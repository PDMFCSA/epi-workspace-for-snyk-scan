const a19_0x2c7978=a19_0x541e;(function(_0x2c6c17,_0x4b1727){const _0x154cf7=a19_0x541e,_0x5d55f2=_0x2c6c17();while(!![]){try{const _0x7748ab=-parseInt(_0x154cf7(0x1c2))/0x1*(parseInt(_0x154cf7(0x1f4))/0x2)+parseInt(_0x154cf7(0x1d8))/0x3*(parseInt(_0x154cf7(0x1b0))/0x4)+parseInt(_0x154cf7(0x19d))/0x5+parseInt(_0x154cf7(0x1bb))/0x6+-parseInt(_0x154cf7(0x1d7))/0x7*(-parseInt(_0x154cf7(0x1d5))/0x8)+-parseInt(_0x154cf7(0x1cc))/0x9+-parseInt(_0x154cf7(0x1cf))/0xa;if(_0x7748ab===_0x4b1727)break;else _0x5d55f2['push'](_0x5d55f2['shift']());}catch(_0x256d66){_0x5d55f2['push'](_0x5d55f2['shift']());}}}(a19_0x50fd,0xe932c));function a19_0x541e(_0x3d3fb2,_0x2bd5f8){const _0x50fd86=a19_0x50fd();return a19_0x541e=function(_0x541ecc,_0x1b43d0){_0x541ecc=_0x541ecc-0x19b;let _0x2f76e5=_0x50fd86[_0x541ecc];return _0x2f76e5;},a19_0x541e(_0x3d3fb2,_0x2bd5f8);}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x2c7978(0x1a0)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x2c7978(0x1e8)),{logger}=require(a19_0x2c7978(0x1f3)),{getCredentialsPath,getGridDetails}=require(a19_0x2c7978(0x1e0)),{scaleUpHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require(a19_0x2c7978(0x1a2)),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require(a19_0x2c7978(0x1df)),{getCloudProviderObject}=require(a19_0x2c7978(0x1dc));exports[a19_0x2c7978(0x1c1)]='grid',exports[a19_0x2c7978(0x1e7)]=a19_0x2c7978(0x1be),exports['builder']=function(_0x2a7f61){const _0x4bae39=a19_0x2c7978,_0x42816a={};_0x42816a[_0x4bae39(0x1b9)]=_0x4bae39(0x1c5),_0x42816a[_0x4bae39(0x1a7)]=_0x4bae39(0x1af),_0x42816a[_0x4bae39(0x1c3)]=_0x4bae39(0x1b7),_0x42816a[_0x4bae39(0x1e9)]=_0x4bae39(0x1d3),_0x42816a[_0x4bae39(0x1ce)]=_0x4bae39(0x1b3);const _0x159c02=_0x42816a,_0x270a1b={};_0x270a1b[_0x4bae39(0x1bc)]=_0x159c02[_0x4bae39(0x1b9)],_0x270a1b[_0x4bae39(0x1e3)]=_0x159c02[_0x4bae39(0x1a7)];const _0x4a3a74={};_0x4a3a74[_0x4bae39(0x1bc)]=_0x159c02[_0x4bae39(0x1c3)],_0x4a3a74[_0x4bae39(0x1e3)]=_0x159c02[_0x4bae39(0x1e9)],_0x4a3a74['default']=![];const _0x2e7865={};return _0x2e7865[_0x4bae39(0x1ac)]=_0x270a1b,_0x2e7865[_0x4bae39(0x1b4)]=_0x4a3a74,_0x2a7f61[_0x4bae39(0x1e2)](HELP_HEADER_MESSAGE[_0x4bae39(0x1e6)])['epilogue'](HELP_FOOTER_MESSAGE)['options'](_0x2e7865)[_0x4bae39(0x1b3)](_0x159c02['PWLiz'])[_0x4bae39(0x1ad)];},exports[a19_0x2c7978(0x1e5)]=async function(_0x446d0e){const _0x1a9e6d=a19_0x2c7978,_0x337f61={'yNPfe':_0x1a9e6d(0x1ab),'pMKrM':function(_0xc19532){return _0xc19532();},'bbTWr':_0x1a9e6d(0x1d9),'BHMNu':function(_0x365794,_0x1c4195,_0x512f76,_0x1fed18,_0xca0baf,_0x5e1241,_0xc40d1e){return _0x365794(_0x1c4195,_0x512f76,_0x1fed18,_0xca0baf,_0x5e1241,_0xc40d1e);},'WUUQo':'start-grid-called','aBffY':_0x1a9e6d(0x1d2),'GEwUs':function(_0x3f8245,_0xd07627,_0x5f3e56,_0x5ea9b,_0x588e8c,_0x5b361b,_0x2d2935){return _0x3f8245(_0xd07627,_0x5f3e56,_0x5ea9b,_0x588e8c,_0x5b361b,_0x2d2935);},'cfwpi':function(_0x2a29e0){return _0x2a29e0();},'rMNLU':_0x1a9e6d(0x1ef),'ZYjzn':'<PasswordPlaceholder>','VyNap':_0x1a9e6d(0x19c),'pGKXB':function(_0x5d89d4,_0x2098da,_0x5413ba,_0x40e342){return _0x5d89d4(_0x2098da,_0x5413ba,_0x40e342);},'qpXex':function(_0xff33af,_0x663eab,_0x26cf7e,_0x548ed8,_0x20bb0f,_0x24a666,_0x342990){return _0xff33af(_0x663eab,_0x26cf7e,_0x548ed8,_0x20bb0f,_0x24a666,_0x342990);},'qirrH':function(_0x27a6ed,_0x14d48a,_0x135d9f){return _0x27a6ed(_0x14d48a,_0x135d9f);},'WqWZW':_0x1a9e6d(0x1ec),'IWvUo':function(_0xfe52ab,_0x328a4b){return _0xfe52ab===_0x328a4b;},'zGKql':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','aDcIr':_0x1a9e6d(0x1d0),'qOdPa':_0x1a9e6d(0x1c4),'GjnOQ':'server-error'};let _0x123313;try{!_0x446d0e[_0x1a9e6d(0x1ed)]&&(logger[_0x1a9e6d(0x1eb)](_0x337f61['yNPfe']),process[_0x1a9e6d(0x1f1)](0x1));!fs[_0x1a9e6d(0x1ae)](_0x337f61[_0x1a9e6d(0x1a5)](getCredentialsPath))&&(logger[_0x1a9e6d(0x1eb)](_0x337f61[_0x1a9e6d(0x1a1)]),await _0x337f61[_0x1a9e6d(0x1a6)](sendInstrumentationEvent,_0x446d0e,_0x337f61[_0x1a9e6d(0x1de)],messageTypes['ERROR'],_0x337f61[_0x1a9e6d(0x1ca)],null,_0x446d0e),process[_0x1a9e6d(0x1f1)](0x1));logger[_0x1a9e6d(0x1d6)](_0x1a9e6d(0x1d4)+_0x446d0e['gridId']),await _0x337f61[_0x1a9e6d(0x1da)](sendInstrumentationEvent,_0x446d0e,_0x337f61['WUUQo'],messageTypes[_0x1a9e6d(0x1a3)],null,null,_0x446d0e);const _0x5f0faa=JSON[_0x1a9e6d(0x1a9)](fs[_0x1a9e6d(0x1d1)](_0x337f61[_0x1a9e6d(0x1aa)](getCredentialsPath)));global_registry['bstackUsername']=_0x5f0faa['Browserstack'][_0x1a9e6d(0x1bf)],global_registry['bstackAccesskey']=_0x5f0faa[_0x1a9e6d(0x1c8)]['password'];const _0x34d6a3=WS_ENDPOINT[_0x1a9e6d(0x1f0)](_0x337f61[_0x1a9e6d(0x1bd)],_0x5f0faa[_0x1a9e6d(0x1c8)][_0x1a9e6d(0x1bf)])['replace'](_0x337f61[_0x1a9e6d(0x1a4)],_0x5f0faa[_0x1a9e6d(0x1c8)][_0x1a9e6d(0x1b2)]),_0x222cfc={};_0x222cfc[_0x1a9e6d(0x1b5)]=ws,_0x222cfc['connectionTimeout']=0x36ee80,_0x123313=new ReconnectingWebSocket(_0x34d6a3,[],_0x222cfc),logger[_0x1a9e6d(0x19b)](_0x337f61['VyNap']),webSocketUtils[_0x1a9e6d(0x1ee)](_0x123313,_0x446d0e[_0x1a9e6d(0x1db)],_0x446d0e['password']);const [_0x1731c2,_0x393efd]=await _0x337f61[_0x1a9e6d(0x1ba)](getGridDetails,_0x5f0faa['Browserstack']['username'],_0x5f0faa[_0x1a9e6d(0x1c8)][_0x1a9e6d(0x1b2)],_0x446d0e[_0x1a9e6d(0x1ed)]);if(_0x393efd){const _0x15cc5d=_0x393efd['info'];global_registry[_0x1a9e6d(0x1c0)]=_0x15cc5d[_0x1a9e6d(0x1c0)],global_registry[_0x1a9e6d(0x1b1)]=_0x15cc5d[_0x1a9e6d(0x1f2)],global_registry['clusterName']=_0x15cc5d[_0x1a9e6d(0x1b8)];const _0x5061d4=await _0x337f61[_0x1a9e6d(0x1dd)](getCloudProviderObject,_0x15cc5d['cloudProvider'],_0x15cc5d[_0x1a9e6d(0x1b8)],_0x15cc5d[_0x1a9e6d(0x19e)],_0x123313,webSocketUtils,_0x446d0e),[_0x114912,_0xca8713,_0x24b2e9,_0x38f5b9,_0x21043d,_0x2701c5]=await _0x337f61['qirrH'](createK8sClient,_0x5061d4,_0x446d0e[_0x1a9e6d(0x1c9)]);await _0x337f61['qirrH'](scaleUpHubDeployment,_0xca8713,_0x15cc5d[_0x1a9e6d(0x19e)]),logger[_0x1a9e6d(0x1d6)](_0x337f61[_0x1a9e6d(0x1e4)]),process['exit'](0x0);}_0x337f61[_0x1a9e6d(0x19f)](_0x1731c2[_0x1a9e6d(0x1cb)],0x191)&&(logger[_0x1a9e6d(0x1eb)](_0x337f61['zGKql']),await _0x337f61['qpXex'](sendInstrumentationEvent,_0x446d0e,_0x337f61['WUUQo'],messageTypes[_0x1a9e6d(0x1c6)],_0x337f61[_0x1a9e6d(0x1b6)],null,_0x446d0e),process[_0x1a9e6d(0x1f1)](0x1)),_0x337f61[_0x1a9e6d(0x19f)](_0x1731c2[_0x1a9e6d(0x1cb)],0x190)&&(logger[_0x1a9e6d(0x1eb)](JSON[_0x1a9e6d(0x1a9)](_0x1731c2['body'])[_0x1a9e6d(0x1cd)]),await _0x337f61[_0x1a9e6d(0x1a6)](sendInstrumentationEvent,_0x446d0e,_0x337f61[_0x1a9e6d(0x1de)],messageTypes['ERROR'],_0x337f61[_0x1a9e6d(0x1a8)],null,_0x446d0e),process[_0x1a9e6d(0x1f1)](0x1)),logger[_0x1a9e6d(0x1eb)](_0x1a9e6d(0x1ea)+JSON[_0x1a9e6d(0x1e1)](_0x1731c2)),await _0x337f61[_0x1a9e6d(0x1a6)](sendInstrumentationEvent,_0x446d0e,_0x337f61[_0x1a9e6d(0x1de)],messageTypes['ERROR'],_0x337f61[_0x1a9e6d(0x1c7)],_0x1731c2,_0x446d0e),process[_0x1a9e6d(0x1f1)](0x1);}catch(_0x21aecf){const _0x1ab8e5='Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20'+_0x21aecf+'\x20\x0a'+JSON[_0x1a9e6d(0x1e1)](_0x21aecf['stack'])+'\x20';logger['error'](_0x1ab8e5),process[_0x1a9e6d(0x1f1)](0x1);}};function a19_0x50fd(){const _0x25c617=['init-not-called','boolean','Starting\x20grid\x20','14845984PkLjse','info','7dsQTPj','3SDVwpP','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','GEwUs','user','../../cloudproviders/utils','qpXex','WUUQo','../../utils/createk8sClient','../../utils/utilityMethods','stringify','usage','type','WqWZW','handler','start','desc','../../config/constants','wpYca','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','error','Grid\x20started','gridId','addListeners','<UsernamePlaceholder>','replace','exit','region','../../config/logger','288930aRhPVN','debug','Adding\x20Websocket\x20listeners','8413095nmFKbz','name','IWvUo','reconnecting-websocket','bbTWr','../../utils/instrumentationUtils','INFO','ZYjzn','pMKrM','BHMNu','dNbYY','qOdPa','parse','cfwpi','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','grid-id','argv','existsSync','string','3997520JDFYPZ','clusterRegion','password','help','skip-tls-cert-verify','WebSocket','aDcIr','Skip\x20insecure\x20cert\x20verification.','clusterName','jzhhI','pGKXB','8594502kCqsnu','description','rMNLU','Start\x20an\x20existing\x20Automation\x20grid.','username','cloudProvider','command','11kFUspU','uosvB','invalid-grid-id','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','ERROR','GjnOQ','Browserstack','skipTlsCertVerify','aBffY','statusCode','4121775UphVrv','message','PWLiz','29678940nUmgkq','unauthorised','readFileSync'];a19_0x50fd=function(){return _0x25c617;};return a19_0x50fd();}