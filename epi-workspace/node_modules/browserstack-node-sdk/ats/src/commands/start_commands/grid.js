const a19_0x23c734=a19_0x1860;(function(_0x1bd179,_0x128eb4){const _0x30110d=a19_0x1860,_0x2e50a5=_0x1bd179();while(!![]){try{const _0x2d1a85=parseInt(_0x30110d(0x199))/0x1+-parseInt(_0x30110d(0x18e))/0x2*(parseInt(_0x30110d(0x1ce))/0x3)+-parseInt(_0x30110d(0x1be))/0x4+-parseInt(_0x30110d(0x19c))/0x5*(parseInt(_0x30110d(0x1ab))/0x6)+-parseInt(_0x30110d(0x18c))/0x7*(-parseInt(_0x30110d(0x1b3))/0x8)+parseInt(_0x30110d(0x1b7))/0x9*(-parseInt(_0x30110d(0x1de))/0xa)+parseInt(_0x30110d(0x19f))/0xb;if(_0x2d1a85===_0x128eb4)break;else _0x2e50a5['push'](_0x2e50a5['shift']());}catch(_0x28ad52){_0x2e50a5['push'](_0x2e50a5['shift']());}}}(a19_0x530a,0x2349e));function a19_0x530a(){const _0x336756=['HDLdJ','builder','FSzus','skipTlsCertVerify','usage','grid-id','ERROR','bstackUsername','<PasswordPlaceholder>','type','stringify','start','existsSync','../../utils/createk8sClient','JKOfc','390770XOYpbD','desc','cloudProvider','user','replace','help','oRNmd','region','INFO','jksps','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','../../config/constants','729673wByVEb','addListeners','33342rllfWS','cTIxR','epilogue','vKfyh','Grid\x20started','gridId','exit','skip-tls-cert-verify','description','clusterName','efxJX','273687oPGHFK','clusterRegion','options','110GgcCNa','debug','../../cloudproviders/utils','2376528VtiSjO','yYdWv','readFileSync','bOUHl','unauthorised','init-not-called','../../utils/gridComponents','string','username','Pwpxl','IDWgo','TQILD','68682aVfZej','parse','start-grid-called','dqAuV','<UsernamePlaceholder>','grid','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','statusCode','8IMyCwZ','error','HtWKS','Browserstack','18zaqHRb','name','info','../../utils/utilityMethods','body','argv','Starting\x20grid\x20','77672CxYBuC','AgvjV','../../config/logger','server-error','message','iWJwW','boolean','ErDNm','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','reconnecting-websocket','password','../../utils/instrumentationUtils','NouWg','stack','GwRUf','18lbCOUp'];a19_0x530a=function(){return _0x336756;};return a19_0x530a();}function a19_0x1860(_0x1cd714,_0x4a201f){const _0x530ade=a19_0x530a();return a19_0x1860=function(_0x18605d,_0xda3a57){_0x18605d=_0x18605d-0x186;let _0x3d99d5=_0x530ade[_0x18605d];return _0x3d99d5;},a19_0x1860(_0x1cd714,_0x4a201f);}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x23c734(0x1c8)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x23c734(0x18b)),{logger}=require(a19_0x23c734(0x1c0)),{getCredentialsPath,getGridDetails}=require(a19_0x23c734(0x1ba)),{scaleUpHubDeployment}=require(a19_0x23c734(0x1a5)),{sendInstrumentationEvent}=require(a19_0x23c734(0x1ca)),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require(a19_0x23c734(0x1dc)),{getCloudProviderObject}=require(a19_0x23c734(0x19e));exports['command']=a19_0x23c734(0x1b0),exports[a19_0x23c734(0x1df)]='Start\x20an\x20existing\x20Automation\x20grid.',exports[a19_0x23c734(0x1d0)]=function(_0x1a6bbd){const _0x315a3a=a19_0x23c734,_0xad4f42={};_0xad4f42[_0x315a3a(0x1cf)]=_0x315a3a(0x1c6),_0xad4f42['cTIxR']=_0x315a3a(0x1a6),_0xad4f42[_0x315a3a(0x1b5)]='Skip\x20insecure\x20cert\x20verification.',_0xad4f42[_0x315a3a(0x1cd)]=_0x315a3a(0x1c4),_0xad4f42[_0x315a3a(0x1c5)]=_0x315a3a(0x1e3);const _0x14b143=_0xad4f42,_0x515197={};_0x515197[_0x315a3a(0x196)]=_0x14b143[_0x315a3a(0x1cf)],_0x515197[_0x315a3a(0x1d8)]=_0x14b143[_0x315a3a(0x18f)];const _0x4edafa={};_0x4edafa[_0x315a3a(0x196)]=_0x14b143[_0x315a3a(0x1b5)],_0x4edafa[_0x315a3a(0x1d8)]=_0x14b143[_0x315a3a(0x1cd)],_0x4edafa['default']=![];const _0x10583e={};return _0x10583e[_0x315a3a(0x1d4)]=_0x515197,_0x10583e[_0x315a3a(0x195)]=_0x4edafa,_0x1a6bbd[_0x315a3a(0x1d3)](HELP_HEADER_MESSAGE[_0x315a3a(0x1da)])[_0x315a3a(0x190)](HELP_FOOTER_MESSAGE)[_0x315a3a(0x19b)](_0x10583e)[_0x315a3a(0x1e3)](_0x14b143[_0x315a3a(0x1c5)])[_0x315a3a(0x1bc)];},exports['handler']=async function(_0x58e652){const _0x3f1b8f=a19_0x23c734,_0x368c5f={'bOUHl':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','efxJX':function(_0xe49eb5){return _0xe49eb5();},'dqAuV':_0x3f1b8f(0x1c7),'JKOfc':function(_0x2efa69,_0x102fc2,_0x5d5afa,_0x662e87,_0x276488,_0x37714b,_0x3f5691){return _0x2efa69(_0x102fc2,_0x5d5afa,_0x662e87,_0x276488,_0x37714b,_0x3f5691);},'IDWgo':_0x3f1b8f(0x1ad),'jksps':_0x3f1b8f(0x1a4),'TQILD':_0x3f1b8f(0x1af),'ANmuS':_0x3f1b8f(0x1d7),'Pwpxl':'Adding\x20Websocket\x20listeners','zjIsd':function(_0x138722,_0x226d4b,_0x2a05bb,_0x55fd8d){return _0x138722(_0x226d4b,_0x2a05bb,_0x55fd8d);},'NouWg':function(_0x34f41a,_0x3e61b1,_0x271d57){return _0x34f41a(_0x3e61b1,_0x271d57);},'oRNmd':_0x3f1b8f(0x192),'FSzus':function(_0x3f9dbc,_0x1aee5d){return _0x3f9dbc===_0x1aee5d;},'lMhVW':_0x3f1b8f(0x18a),'yYdWv':_0x3f1b8f(0x1a3),'vKfyh':function(_0x4d4408,_0x5e1214,_0x4691a0,_0x2d1eeb,_0x18c908,_0x24577e,_0x3f1094){return _0x4d4408(_0x5e1214,_0x4691a0,_0x2d1eeb,_0x18c908,_0x24577e,_0x3f1094);},'AgvjV':'invalid-grid-id','iWJwW':_0x3f1b8f(0x1c1)};let _0x1190d5;try{!_0x58e652[_0x3f1b8f(0x193)]&&(logger[_0x3f1b8f(0x1b4)](_0x368c5f[_0x3f1b8f(0x1a2)]),process[_0x3f1b8f(0x194)](0x1));!fs[_0x3f1b8f(0x1db)](_0x368c5f[_0x3f1b8f(0x198)](getCredentialsPath))&&(logger[_0x3f1b8f(0x1b4)](_0x368c5f[_0x3f1b8f(0x1ae)]),await _0x368c5f[_0x3f1b8f(0x1dd)](sendInstrumentationEvent,_0x58e652,_0x368c5f[_0x3f1b8f(0x1a9)],messageTypes['ERROR'],_0x368c5f[_0x3f1b8f(0x189)],null,_0x58e652),process[_0x3f1b8f(0x194)](0x1));logger[_0x3f1b8f(0x1b9)](_0x3f1b8f(0x1bd)+_0x58e652[_0x3f1b8f(0x193)]),await _0x368c5f[_0x3f1b8f(0x1dd)](sendInstrumentationEvent,_0x58e652,_0x368c5f['IDWgo'],messageTypes[_0x3f1b8f(0x188)],null,null,_0x58e652);const _0x2bc2bc=JSON[_0x3f1b8f(0x1ac)](fs[_0x3f1b8f(0x1a1)](_0x368c5f[_0x3f1b8f(0x198)](getCredentialsPath)));global_registry[_0x3f1b8f(0x1d6)]=_0x2bc2bc[_0x3f1b8f(0x1b6)][_0x3f1b8f(0x1a7)],global_registry['bstackAccesskey']=_0x2bc2bc[_0x3f1b8f(0x1b6)][_0x3f1b8f(0x1c9)];const _0x586702=WS_ENDPOINT[_0x3f1b8f(0x1e2)](_0x368c5f[_0x3f1b8f(0x1aa)],_0x2bc2bc['Browserstack'][_0x3f1b8f(0x1a7)])['replace'](_0x368c5f['ANmuS'],_0x2bc2bc[_0x3f1b8f(0x1b6)][_0x3f1b8f(0x1c9)]),_0x59c53e={};_0x59c53e['WebSocket']=ws,_0x59c53e['connectionTimeout']=0x36ee80,_0x1190d5=new ReconnectingWebSocket(_0x586702,[],_0x59c53e),logger[_0x3f1b8f(0x19d)](_0x368c5f[_0x3f1b8f(0x1a8)]),webSocketUtils[_0x3f1b8f(0x18d)](_0x1190d5,_0x58e652[_0x3f1b8f(0x1e1)],_0x58e652[_0x3f1b8f(0x1c9)]);const [_0x5a85ec,_0x42e77b]=await _0x368c5f['zjIsd'](getGridDetails,_0x2bc2bc[_0x3f1b8f(0x1b6)]['username'],_0x2bc2bc[_0x3f1b8f(0x1b6)][_0x3f1b8f(0x1c9)],_0x58e652[_0x3f1b8f(0x193)]);if(_0x42e77b){const _0x5ca01e=_0x42e77b[_0x3f1b8f(0x1b9)];global_registry[_0x3f1b8f(0x1e0)]=_0x5ca01e[_0x3f1b8f(0x1e0)],global_registry[_0x3f1b8f(0x19a)]=_0x5ca01e[_0x3f1b8f(0x187)],global_registry[_0x3f1b8f(0x197)]=_0x5ca01e[_0x3f1b8f(0x197)];const _0x14b66c=await _0x368c5f[_0x3f1b8f(0x1dd)](getCloudProviderObject,_0x5ca01e[_0x3f1b8f(0x1e0)],_0x5ca01e[_0x3f1b8f(0x197)],_0x5ca01e[_0x3f1b8f(0x1b8)],_0x1190d5,webSocketUtils,_0x58e652),[_0x52728e,_0x1f67ae,_0x197403,_0x333b50,_0xfb2624,_0x442f16]=await _0x368c5f['NouWg'](createK8sClient,_0x14b66c,_0x58e652[_0x3f1b8f(0x1d2)]);await _0x368c5f[_0x3f1b8f(0x1cb)](scaleUpHubDeployment,_0x1f67ae,_0x5ca01e[_0x3f1b8f(0x1b8)]),logger['info'](_0x368c5f[_0x3f1b8f(0x186)]),process['exit'](0x0);}_0x368c5f[_0x3f1b8f(0x1d1)](_0x5a85ec[_0x3f1b8f(0x1b2)],0x191)&&(logger[_0x3f1b8f(0x1b4)](_0x368c5f['lMhVW']),await _0x368c5f['JKOfc'](sendInstrumentationEvent,_0x58e652,_0x368c5f[_0x3f1b8f(0x1a9)],messageTypes[_0x3f1b8f(0x1d5)],_0x368c5f[_0x3f1b8f(0x1a0)],null,_0x58e652),process[_0x3f1b8f(0x194)](0x1)),_0x368c5f[_0x3f1b8f(0x1d1)](_0x5a85ec[_0x3f1b8f(0x1b2)],0x190)&&(logger[_0x3f1b8f(0x1b4)](JSON['parse'](_0x5a85ec[_0x3f1b8f(0x1bb)])[_0x3f1b8f(0x1c2)]),await _0x368c5f[_0x3f1b8f(0x191)](sendInstrumentationEvent,_0x58e652,_0x368c5f[_0x3f1b8f(0x1a9)],messageTypes[_0x3f1b8f(0x1d5)],_0x368c5f[_0x3f1b8f(0x1bf)],null,_0x58e652),process['exit'](0x1)),logger['error'](_0x3f1b8f(0x1b1)+JSON[_0x3f1b8f(0x1d9)](_0x5a85ec)),await _0x368c5f[_0x3f1b8f(0x191)](sendInstrumentationEvent,_0x58e652,_0x368c5f[_0x3f1b8f(0x1a9)],messageTypes[_0x3f1b8f(0x1d5)],_0x368c5f[_0x3f1b8f(0x1c3)],_0x5a85ec,_0x58e652),process['exit'](0x1);}catch(_0x4840ce){const _0x16c830='Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20'+_0x4840ce+'\x20\x0a'+JSON[_0x3f1b8f(0x1d9)](_0x4840ce[_0x3f1b8f(0x1cc)])+'\x20';logger[_0x3f1b8f(0x1b4)](_0x16c830),process[_0x3f1b8f(0x194)](0x1);}};