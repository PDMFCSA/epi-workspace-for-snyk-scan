const a19_0x45bf2a=a19_0x6d0d;(function(_0x746611,_0x1f057b){const _0xa68efa=a19_0x6d0d,_0x25dcf5=_0x746611();while(!![]){try{const _0x392819=-parseInt(_0xa68efa(0x1c9))/0x1*(-parseInt(_0xa68efa(0x1bb))/0x2)+-parseInt(_0xa68efa(0x1c5))/0x3+parseInt(_0xa68efa(0x1fa))/0x4*(parseInt(_0xa68efa(0x1e0))/0x5)+-parseInt(_0xa68efa(0x1f0))/0x6+parseInt(_0xa68efa(0x204))/0x7+parseInt(_0xa68efa(0x1cb))/0x8+-parseInt(_0xa68efa(0x1de))/0x9;if(_0x392819===_0x1f057b)break;else _0x25dcf5['push'](_0x25dcf5['shift']());}catch(_0x59f7b3){_0x25dcf5['push'](_0x25dcf5['shift']());}}}(a19_0x597c,0x99918));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x45bf2a(0x1b6)),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require(a19_0x45bf2a(0x203)),{scaleUpHubDeployment}=require(a19_0x45bf2a(0x1dd)),{sendInstrumentationEvent}=require(a19_0x45bf2a(0x1b4)),webSocketUtils=require(a19_0x45bf2a(0x1c0)),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require('../../cloudproviders/utils');function a19_0x597c(){const _0x1aeabb=['gridId','MrJEG','2740092vSzKnA','WebSocket','debug','start-grid-called','name','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','lFYRI','lBPpO','YLqpt','server-error','5068AUFNJj','Vsrfd','vUEdB','INFO','Grid\x20started','message','bstackUsername','<PasswordPlaceholder>','exit','../../utils/utilityMethods','1471946wkGILw','error','gMAZt','Adding\x20Websocket\x20listeners','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','usage','description','command','../../utils/instrumentationUtils','parse','../../config/constants','cloudProvider','Browserstack','help','readFileSync','724366fAupPy','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','connectionTimeout','boolean','qXfxs','../../utils/webSocketUtils','addListeners','taSJn','start','UhNwM','1131552BnKXEo','bmkXt','default','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','1JWNdrz','Starting\x20grid\x20','244864tylbdg','argv','ahWwr','SjVfT','statusCode','tlVry','string','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','stringify','MUQwr','esxgO','replace','Start\x20an\x20existing\x20Automation\x20grid.','builder','info','dsgho','cYmwY','ERROR','../../utils/gridComponents','3197160COcgeL','type','4795eDlAOz','clusterName','grid','RxZsS','stack','Skip\x20insecure\x20cert\x20verification.','user','password','username','bstackAccesskey','grid-id','iEunH','gdoNa','handler'];a19_0x597c=function(){return _0x1aeabb;};return a19_0x597c();}function a19_0x6d0d(_0x449308,_0x32e9dd){const _0x597c1f=a19_0x597c();return a19_0x6d0d=function(_0x6d0db5,_0x40b36b){_0x6d0db5=_0x6d0db5-0x1b4;let _0x421ca2=_0x597c1f[_0x6d0db5];return _0x421ca2;},a19_0x6d0d(_0x449308,_0x32e9dd);}exports[a19_0x45bf2a(0x20b)]=a19_0x45bf2a(0x1e2),exports['desc']=a19_0x45bf2a(0x1d7),exports[a19_0x45bf2a(0x1d8)]=function(_0x4e19d4){const _0x4e96ab=a19_0x45bf2a,_0x2a45d2={};_0x2a45d2['vUEdB']=_0x4e96ab(0x1f5),_0x2a45d2[_0x4e96ab(0x1d0)]=_0x4e96ab(0x1d1),_0x2a45d2['bmkXt']=_0x4e96ab(0x1e5),_0x2a45d2[_0x4e96ab(0x1fb)]=_0x4e96ab(0x1be),_0x2a45d2['cYmwY']=_0x4e96ab(0x1b9);const _0x2d81b4=_0x2a45d2,_0x570e62={};_0x570e62[_0x4e96ab(0x20a)]=_0x2d81b4[_0x4e96ab(0x1fc)],_0x570e62[_0x4e96ab(0x1df)]=_0x2d81b4[_0x4e96ab(0x1d0)];const _0x5f7b24={};_0x5f7b24[_0x4e96ab(0x20a)]=_0x2d81b4[_0x4e96ab(0x1c6)],_0x5f7b24[_0x4e96ab(0x1df)]=_0x2d81b4[_0x4e96ab(0x1fb)],_0x5f7b24[_0x4e96ab(0x1c7)]=![];const _0x5c6762={};return _0x5c6762[_0x4e96ab(0x1ea)]=_0x570e62,_0x5c6762['skip-tls-cert-verify']=_0x5f7b24,_0x4e19d4[_0x4e96ab(0x209)](HELP_HEADER_MESSAGE[_0x4e96ab(0x1c3)])['epilogue'](HELP_FOOTER_MESSAGE)['options'](_0x5c6762)[_0x4e96ab(0x1b9)](_0x2d81b4[_0x4e96ab(0x1db)])[_0x4e96ab(0x1cc)];},exports[a19_0x45bf2a(0x1ed)]=async function(_0x245366){const _0x467f99=a19_0x45bf2a,_0xd99558={'ahWwr':_0x467f99(0x1c8),'gMAZt':function(_0x4acab9){return _0x4acab9();},'GbCWD':_0x467f99(0x1d2),'SjVfT':function(_0x5812d8,_0x546214,_0x11eb76,_0x50ae3c,_0x4b35db,_0x53c0bd,_0x17720d){return _0x5812d8(_0x546214,_0x11eb76,_0x50ae3c,_0x4b35db,_0x53c0bd,_0x17720d);},'iEunH':_0x467f99(0x1f3),'MUQwr':'init-not-called','UhNwM':function(_0x2d0d91,_0x40ae50,_0x13becd,_0x36a4bf,_0x5a10f7,_0x26e282,_0x1b74b4){return _0x2d0d91(_0x40ae50,_0x13becd,_0x36a4bf,_0x5a10f7,_0x26e282,_0x1b74b4);},'lFYRI':function(_0x204eb2){return _0x204eb2();},'gdoNa':'<UsernamePlaceholder>','eYDIB':_0x467f99(0x201),'YLqpt':_0x467f99(0x207),'taSJn':function(_0x38ad13,_0x4c4f30,_0x3c3dd0,_0x41c89e){return _0x38ad13(_0x4c4f30,_0x3c3dd0,_0x41c89e);},'OaXIw':function(_0x5c2eb9,_0x2eb667,_0x13a101){return _0x5c2eb9(_0x2eb667,_0x13a101);},'RxZsS':function(_0x18ea6f,_0x3f3008,_0x27136e){return _0x18ea6f(_0x3f3008,_0x27136e);},'dsgho':_0x467f99(0x1fe),'eCSvQ':function(_0x59ca45,_0x3dab3b){return _0x59ca45===_0x3dab3b;},'esxgO':_0x467f99(0x1bc),'yZRoJ':function(_0x304526,_0x112b85,_0x26f236,_0x1067be,_0x38219d,_0x13a593,_0x530933){return _0x304526(_0x112b85,_0x26f236,_0x1067be,_0x38219d,_0x13a593,_0x530933);},'MrJEG':'unauthorised','dEqEV':function(_0x26768f,_0x3ca3bf,_0x8043b9,_0x10e435,_0x39abc2,_0x2080fd,_0x3c460c){return _0x26768f(_0x3ca3bf,_0x8043b9,_0x10e435,_0x39abc2,_0x2080fd,_0x3c460c);},'lBPpO':'invalid-grid-id','lPnEp':function(_0x13c643,_0x145010,_0x37a052,_0x4ea5aa,_0x225912,_0x601ce8,_0x182e71){return _0x13c643(_0x145010,_0x37a052,_0x4ea5aa,_0x225912,_0x601ce8,_0x182e71);},'qXfxs':_0x467f99(0x1f9)};let _0x805891;try{!_0x245366[_0x467f99(0x1ee)]&&(logger[_0x467f99(0x205)](_0xd99558[_0x467f99(0x1cd)]),process[_0x467f99(0x202)](0x1));!fs['existsSync'](_0xd99558[_0x467f99(0x206)](getCredentialsPath))&&(logger[_0x467f99(0x205)](_0xd99558['GbCWD']),await _0xd99558[_0x467f99(0x1ce)](sendInstrumentationEvent,_0x245366,_0xd99558[_0x467f99(0x1eb)],messageTypes[_0x467f99(0x1dc)],_0xd99558[_0x467f99(0x1d4)],null,_0x245366),process['exit'](0x1));logger[_0x467f99(0x1d9)](_0x467f99(0x1ca)+_0x245366[_0x467f99(0x1ee)]),await _0xd99558[_0x467f99(0x1c4)](sendInstrumentationEvent,_0x245366,_0xd99558[_0x467f99(0x1eb)],messageTypes[_0x467f99(0x1fd)],null,null,_0x245366);const _0x4dd0c0=JSON['parse'](fs[_0x467f99(0x1ba)](_0xd99558[_0x467f99(0x1f6)](getCredentialsPath)));global_registry[_0x467f99(0x200)]=_0x4dd0c0['Browserstack'][_0x467f99(0x1e8)],global_registry[_0x467f99(0x1e9)]=_0x4dd0c0[_0x467f99(0x1b8)][_0x467f99(0x1e7)];const _0xa16a33=WS_ENDPOINT[_0x467f99(0x1d6)](_0xd99558[_0x467f99(0x1ec)],_0x4dd0c0['Browserstack']['username'])[_0x467f99(0x1d6)](_0xd99558['eYDIB'],_0x4dd0c0[_0x467f99(0x1b8)][_0x467f99(0x1e7)]),_0x59a2fc={};_0x59a2fc[_0x467f99(0x1f1)]=ws,_0x59a2fc[_0x467f99(0x1bd)]=0x36ee80,_0x805891=new ReconnectingWebSocket(_0xa16a33,[],_0x59a2fc),logger[_0x467f99(0x1f2)](_0xd99558[_0x467f99(0x1f8)]),webSocketUtils[_0x467f99(0x1c1)](_0x805891,_0x245366[_0x467f99(0x1e6)],_0x245366['password']);const [_0x715e10,_0xa8f242]=await _0xd99558[_0x467f99(0x1c2)](getGridDetails,_0x4dd0c0[_0x467f99(0x1b8)][_0x467f99(0x1e8)],_0x4dd0c0[_0x467f99(0x1b8)]['password'],_0x245366[_0x467f99(0x1ee)]);if(_0xa8f242){const _0x396869=_0xa8f242['info'];global_registry[_0x467f99(0x1b7)]=_0x396869[_0x467f99(0x1b7)],global_registry['clusterRegion']=_0x396869['region'],global_registry[_0x467f99(0x1e1)]=_0x396869['clusterName'];const _0x5e86a6=await _0xd99558[_0x467f99(0x1c4)](getCloudProviderObject,_0x396869[_0x467f99(0x1b7)],_0x396869[_0x467f99(0x1e1)],_0x396869[_0x467f99(0x1f4)],_0x805891,webSocketUtils,_0x245366),[_0x1478e9,_0x393fe3,_0x5dabb8,_0x5e376b,_0x28b02e,_0x4dca48]=await _0xd99558['OaXIw'](createK8sClient,_0x5e86a6,_0x245366['skipTlsCertVerify']);await _0xd99558[_0x467f99(0x1e3)](scaleUpHubDeployment,_0x393fe3,_0x396869[_0x467f99(0x1f4)]),logger['info'](_0xd99558[_0x467f99(0x1da)]),process[_0x467f99(0x202)](0x0);}_0xd99558['eCSvQ'](_0x715e10[_0x467f99(0x1cf)],0x191)&&(logger[_0x467f99(0x205)](_0xd99558[_0x467f99(0x1d5)]),await _0xd99558['yZRoJ'](sendInstrumentationEvent,_0x245366,_0xd99558[_0x467f99(0x1eb)],messageTypes['ERROR'],_0xd99558[_0x467f99(0x1ef)],null,_0x245366),process[_0x467f99(0x202)](0x1)),_0xd99558['eCSvQ'](_0x715e10['statusCode'],0x190)&&(logger[_0x467f99(0x205)](JSON[_0x467f99(0x1b5)](_0x715e10['body'])[_0x467f99(0x1ff)]),await _0xd99558['dEqEV'](sendInstrumentationEvent,_0x245366,_0xd99558[_0x467f99(0x1eb)],messageTypes[_0x467f99(0x1dc)],_0xd99558[_0x467f99(0x1f7)],null,_0x245366),process[_0x467f99(0x202)](0x1)),logger[_0x467f99(0x205)]('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON['stringify'](_0x715e10)),await _0xd99558['lPnEp'](sendInstrumentationEvent,_0x245366,_0xd99558[_0x467f99(0x1eb)],messageTypes[_0x467f99(0x1dc)],_0xd99558[_0x467f99(0x1bf)],_0x715e10,_0x245366),process[_0x467f99(0x202)](0x1);}catch(_0x3dc105){const _0x45f657=_0x467f99(0x208)+_0x3dc105+'\x20\x0a'+JSON[_0x467f99(0x1d3)](_0x3dc105[_0x467f99(0x1e4)])+'\x20';logger[_0x467f99(0x205)](_0x45f657),process[_0x467f99(0x202)](0x1);}};