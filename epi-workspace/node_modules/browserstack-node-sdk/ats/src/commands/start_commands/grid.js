const a19_0x2cfb49=a19_0x4ef3;(function(_0x45cb13,_0x5d30f2){const _0x50edb1=a19_0x4ef3,_0x24842b=_0x45cb13();while(!![]){try{const _0x308ed3=parseInt(_0x50edb1(0xf8))/0x1+-parseInt(_0x50edb1(0x10a))/0x2+-parseInt(_0x50edb1(0x10b))/0x3*(parseInt(_0x50edb1(0x139))/0x4)+parseInt(_0x50edb1(0x13f))/0x5*(parseInt(_0x50edb1(0xf2))/0x6)+parseInt(_0x50edb1(0x11a))/0x7*(-parseInt(_0x50edb1(0x10c))/0x8)+parseInt(_0x50edb1(0xf7))/0x9*(parseInt(_0x50edb1(0x13c))/0xa)+-parseInt(_0x50edb1(0x131))/0xb*(-parseInt(_0x50edb1(0x143))/0xc);if(_0x308ed3===_0x5d30f2)break;else _0x24842b['push'](_0x24842b['shift']());}catch(_0x4bc542){_0x24842b['push'](_0x24842b['shift']());}}}(a19_0x3bfe,0x1bc70));function a19_0x4ef3(_0x1f9a1a,_0xa83ea2){const _0x3bfe23=a19_0x3bfe();return a19_0x4ef3=function(_0x4ef3fb,_0x51ddc1){_0x4ef3fb=_0x4ef3fb-0xf0;let _0x3115de=_0x3bfe23[_0x4ef3fb];return _0x3115de;},a19_0x4ef3(_0x1f9a1a,_0xa83ea2);}function a19_0x3bfe(){const _0x10b973=['QecIV','addListeners','Grid\x20started','body','NXmPF','usage','Browserstack','33gMhLWZ','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','ikPUT','../../utils/gridComponents','vBmEL','gridId','dnQEp','server-error','8QFhcUf','init-not-called','region','3430ECsNok','builder','error','10BTgLcM','Start\x20an\x20existing\x20Automation\x20grid.','user','reconnecting-websocket','2796BGhdIg','desc','exit','lCFsK','cloudProvider','username','name','ubphk','handler','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','Skip\x20insecure\x20cert\x20verification.','stack','223062quOecL','help','grid-id','stringify','sDYBH','279mnyIwo','226753xUdOIh','bstackAccesskey','message','epilogue','cWNNs','hsRKy','../../cloudproviders/utils','qGUmX','info','statusCode','clusterName','readFileSync','eryQL','start-grid-called','type','ERROR','bstackUsername','start','96678ewQPjl','111702XAXJiV','1408dNdtBz','LSIsC','pYdlK','<UsernamePlaceholder>','options','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','command','nsEwq','description','../../utils/utilityMethods','password','parse','3017aVPVXb','connectionTimeout','skip-tls-cert-verify','argv','yZBgw','skipTlsCertVerify','../../utils/createk8sClient','boolean','replace','../../config/logger','<PasswordPlaceholder>','debug','LHFod','Starting\x20grid\x20','tTlZo','rpdqG'];a19_0x3bfe=function(){return _0x10b973;};return a19_0x3bfe();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x2cfb49(0x142)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require('../../config/constants'),{logger}=require(a19_0x2cfb49(0x123)),{getCredentialsPath,getGridDetails}=require(a19_0x2cfb49(0x117)),{scaleUpHubDeployment}=require(a19_0x2cfb49(0x134)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require(a19_0x2cfb49(0x120)),{getCloudProviderObject}=require(a19_0x2cfb49(0xfe));exports[a19_0x2cfb49(0x114)]='grid',exports[a19_0x2cfb49(0x144)]=a19_0x2cfb49(0x140),exports[a19_0x2cfb49(0x13d)]=function(_0x8309cb){const _0x2a0f91=a19_0x2cfb49,_0xedaf91={};_0xedaf91[_0x2a0f91(0x137)]=_0x2a0f91(0x112),_0xedaf91[_0x2a0f91(0xfd)]='string',_0xedaf91[_0x2a0f91(0x11e)]=_0x2a0f91(0xf0),_0xedaf91[_0x2a0f91(0x10e)]=_0x2a0f91(0x121),_0xedaf91['vBmEL']=_0x2a0f91(0xf3);const _0x4a19fc=_0xedaf91,_0x19909d={};_0x19909d[_0x2a0f91(0x116)]=_0x4a19fc['dnQEp'],_0x19909d[_0x2a0f91(0x106)]=_0x4a19fc[_0x2a0f91(0xfd)];const _0x4022c8={};_0x4022c8['description']=_0x4a19fc[_0x2a0f91(0x11e)],_0x4022c8[_0x2a0f91(0x106)]=_0x4a19fc[_0x2a0f91(0x10e)],_0x4022c8['default']=![];const _0x25d23c={};return _0x25d23c[_0x2a0f91(0xf4)]=_0x19909d,_0x25d23c[_0x2a0f91(0x11c)]=_0x4022c8,_0x8309cb[_0x2a0f91(0x12f)](HELP_HEADER_MESSAGE[_0x2a0f91(0x109)])[_0x2a0f91(0xfb)](HELP_FOOTER_MESSAGE)[_0x2a0f91(0x110)](_0x25d23c)[_0x2a0f91(0xf3)](_0x4a19fc[_0x2a0f91(0x135)])[_0x2a0f91(0x11d)];},exports[a19_0x2cfb49(0x14b)]=async function(_0x55f623){const _0x1443a2=a19_0x2cfb49,_0x4a606d={'rpdqG':_0x1443a2(0x113),'nsEwq':function(_0x5cfb8f){return _0x5cfb8f();},'cWNNs':_0x1443a2(0x111),'lCFsK':function(_0x3cbb6e,_0x238a0a,_0xd83c68,_0x2872d5,_0x5c12f4,_0x3bfbac,_0x475aed){return _0x3cbb6e(_0x238a0a,_0xd83c68,_0x2872d5,_0x5c12f4,_0x3bfbac,_0x475aed);},'LHFod':_0x1443a2(0x105),'kYOKV':_0x1443a2(0x13a),'tTlZo':function(_0x25c32e,_0x487ba7,_0x3622cb,_0x14133f,_0x3c4be4,_0x5925d7,_0x7eb5ae){return _0x25c32e(_0x487ba7,_0x3622cb,_0x14133f,_0x3c4be4,_0x5925d7,_0x7eb5ae);},'FUJRC':_0x1443a2(0x10f),'qGUmX':_0x1443a2(0x124),'CjPNj':'Adding\x20Websocket\x20listeners','NXmPF':function(_0x3d2b9e,_0x51ba3f,_0x2ee1e1,_0x4044ed){return _0x3d2b9e(_0x51ba3f,_0x2ee1e1,_0x4044ed);},'ubphk':function(_0x440814,_0xc733f0,_0x20d4fc,_0x1601d4,_0x21383c,_0x1d205c,_0x5de4d4){return _0x440814(_0xc733f0,_0x20d4fc,_0x1601d4,_0x21383c,_0x1d205c,_0x5de4d4);},'ikPUT':function(_0x4f3fe5,_0x57561b,_0xd2d74d){return _0x4f3fe5(_0x57561b,_0xd2d74d);},'LSIsC':_0x1443a2(0x12c),'eryQL':function(_0xdfe9b3,_0x1ccdf4){return _0xdfe9b3===_0x1ccdf4;},'eLxkC':_0x1443a2(0x132),'QecIV':'unauthorised','sDYBH':'invalid-grid-id','VeDrN':_0x1443a2(0x138)};let _0x5be05e;try{!_0x55f623[_0x1443a2(0x136)]&&(logger[_0x1443a2(0x13e)](_0x4a606d[_0x1443a2(0x129)]),process[_0x1443a2(0x145)](0x1));!fs['existsSync'](_0x4a606d[_0x1443a2(0x115)](getCredentialsPath))&&(logger[_0x1443a2(0x13e)](_0x4a606d[_0x1443a2(0xfc)]),await _0x4a606d['lCFsK'](sendInstrumentationEvent,_0x55f623,_0x4a606d[_0x1443a2(0x126)],messageTypes[_0x1443a2(0x107)],_0x4a606d['kYOKV'],null,_0x55f623),process[_0x1443a2(0x145)](0x1));logger[_0x1443a2(0x100)](_0x1443a2(0x127)+_0x55f623[_0x1443a2(0x136)]),await _0x4a606d[_0x1443a2(0x128)](sendInstrumentationEvent,_0x55f623,_0x4a606d[_0x1443a2(0x126)],messageTypes['INFO'],null,null,_0x55f623);const _0x2dbdad=JSON[_0x1443a2(0x119)](fs[_0x1443a2(0x103)](_0x4a606d[_0x1443a2(0x115)](getCredentialsPath)));global_registry[_0x1443a2(0x108)]=_0x2dbdad[_0x1443a2(0x130)][_0x1443a2(0x148)],global_registry[_0x1443a2(0xf9)]=_0x2dbdad['Browserstack'][_0x1443a2(0x118)];const _0x2122b0=WS_ENDPOINT[_0x1443a2(0x122)](_0x4a606d['FUJRC'],_0x2dbdad[_0x1443a2(0x130)][_0x1443a2(0x148)])[_0x1443a2(0x122)](_0x4a606d[_0x1443a2(0xff)],_0x2dbdad['Browserstack'][_0x1443a2(0x118)]),_0x10b819={};_0x10b819['WebSocket']=ws,_0x10b819[_0x1443a2(0x11b)]=0x36ee80,_0x5be05e=new ReconnectingWebSocket(_0x2122b0,[],_0x10b819),logger[_0x1443a2(0x125)](_0x4a606d['CjPNj']),webSocketUtils[_0x1443a2(0x12b)](_0x5be05e,_0x55f623[_0x1443a2(0x141)],_0x55f623[_0x1443a2(0x118)]);const [_0x1be41e,_0x2285b8]=await _0x4a606d[_0x1443a2(0x12e)](getGridDetails,_0x2dbdad['Browserstack']['username'],_0x2dbdad[_0x1443a2(0x130)]['password'],_0x55f623['gridId']);if(_0x2285b8){const _0x2d6770=_0x2285b8[_0x1443a2(0x100)];global_registry[_0x1443a2(0x147)]=_0x2d6770[_0x1443a2(0x147)],global_registry['clusterRegion']=_0x2d6770[_0x1443a2(0x13b)],global_registry[_0x1443a2(0x102)]=_0x2d6770[_0x1443a2(0x102)];const _0x475efd=await _0x4a606d[_0x1443a2(0x14a)](getCloudProviderObject,_0x2d6770[_0x1443a2(0x147)],_0x2d6770[_0x1443a2(0x102)],_0x2d6770[_0x1443a2(0x149)],_0x5be05e,webSocketUtils,_0x55f623),[_0x2a4450,_0x5afebc,_0x3fc566,_0x568bfa,_0x54261b,_0x5e84b5]=await _0x4a606d[_0x1443a2(0x133)](createK8sClient,_0x475efd,_0x55f623[_0x1443a2(0x11f)]);await _0x4a606d[_0x1443a2(0x133)](scaleUpHubDeployment,_0x5afebc,_0x2d6770[_0x1443a2(0x149)]),logger[_0x1443a2(0x100)](_0x4a606d[_0x1443a2(0x10d)]),process[_0x1443a2(0x145)](0x0);}_0x4a606d[_0x1443a2(0x104)](_0x1be41e['statusCode'],0x191)&&(logger['error'](_0x4a606d['eLxkC']),await _0x4a606d[_0x1443a2(0x146)](sendInstrumentationEvent,_0x55f623,_0x4a606d[_0x1443a2(0x126)],messageTypes['ERROR'],_0x4a606d[_0x1443a2(0x12a)],null,_0x55f623),process[_0x1443a2(0x145)](0x1)),_0x4a606d[_0x1443a2(0x104)](_0x1be41e[_0x1443a2(0x101)],0x190)&&(logger[_0x1443a2(0x13e)](JSON['parse'](_0x1be41e[_0x1443a2(0x12d)])[_0x1443a2(0xfa)]),await _0x4a606d[_0x1443a2(0x14a)](sendInstrumentationEvent,_0x55f623,_0x4a606d[_0x1443a2(0x126)],messageTypes['ERROR'],_0x4a606d[_0x1443a2(0xf6)],null,_0x55f623),process[_0x1443a2(0x145)](0x1)),logger['error']('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON[_0x1443a2(0xf5)](_0x1be41e)),await _0x4a606d[_0x1443a2(0x146)](sendInstrumentationEvent,_0x55f623,_0x4a606d[_0x1443a2(0x126)],messageTypes[_0x1443a2(0x107)],_0x4a606d['VeDrN'],_0x1be41e,_0x55f623),process[_0x1443a2(0x145)](0x1);}catch(_0x69cb6){const _0x21e7a0=_0x1443a2(0x14c)+_0x69cb6+'\x20\x0a'+JSON[_0x1443a2(0xf5)](_0x69cb6[_0x1443a2(0xf1)])+'\x20';logger[_0x1443a2(0x13e)](_0x21e7a0),process[_0x1443a2(0x145)](0x1);}};