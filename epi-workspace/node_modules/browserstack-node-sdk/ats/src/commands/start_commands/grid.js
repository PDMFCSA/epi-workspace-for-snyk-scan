const a19_0x1a4b57=a19_0x238c;function a19_0x2065(){const _0x27ce78=['command','../../cloudproviders/utils','1065468ZhIouA','TzfpU','region','clusterName','existsSync','woSaA','Mvzoi','debug','../../utils/gridComponents','exit','7671840brtTIs','ANYzd','206705xoYtMp','replace','stringify','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','password','type','skipTlsCertVerify','connectionTimeout','start-grid-called','hAsdc','GBnXk','10NncIUS','Xfbaa','help','info','gridId','Grid\x20started','description','ERROR','cloudProvider','builder','boolean','ZKZgq','2507183POwaEl','clusterRegion','aeljS','bWLXe','../../utils/createk8sClient','string','209902NDtKQS','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','669332uwkTDb','readFileSync','../../config/logger','statusCode','uZbGP','acRnC','INFO','stack','message','../../config/constants','argv','OKHfK','wnedR','Skip\x20insecure\x20cert\x20verification.','KGNvw','grid','name','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','unauthorised','Start\x20an\x20existing\x20Automation\x20grid.','sUXpY','error','Browserstack','username','<PasswordPlaceholder>','addListeners','invalid-grid-id','SJUOU','266325CILZJp','parse','uFBRD','POVvM','WYqlg','WebSocket','init-not-called','DgzTg','JZOXc'];a19_0x2065=function(){return _0x27ce78;};return a19_0x2065();}(function(_0x5c090d,_0x40b487){const _0x20b252=a19_0x238c,_0x3082a8=_0x5c090d();while(!![]){try{const _0x2f88bc=parseInt(_0x20b252(0x9b))/0x1+-parseInt(_0x20b252(0xb8))/0x2+parseInt(_0x20b252(0x84))/0x3+-parseInt(_0x20b252(0xba))/0x4+parseInt(_0x20b252(0xa6))/0x5*(-parseInt(_0x20b252(0x8f))/0x6)+-parseInt(_0x20b252(0xb2))/0x7+parseInt(_0x20b252(0x99))/0x8;if(_0x2f88bc===_0x40b487)break;else _0x3082a8['push'](_0x3082a8['shift']());}catch(_0x4f55d9){_0x3082a8['push'](_0x3082a8['shift']());}}}(a19_0x2065,0x41a33));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x1a4b57(0x71)),{logger}=require(a19_0x1a4b57(0xbc)),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleUpHubDeployment}=require(a19_0x1a4b57(0x97)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require(a19_0x1a4b57(0xb6)),{getCloudProviderObject}=require(a19_0x1a4b57(0x8e));function a19_0x238c(_0x4e465c,_0x12fe96){const _0x20653a=a19_0x2065();return a19_0x238c=function(_0x238caf,_0x5461b3){_0x238caf=_0x238caf-0x6b;let _0x294208=_0x20653a[_0x238caf];return _0x294208;},a19_0x238c(_0x4e465c,_0x12fe96);}exports[a19_0x1a4b57(0x8d)]=a19_0x1a4b57(0x77),exports['desc']=a19_0x1a4b57(0x7b),exports[a19_0x1a4b57(0xaf)]=function(_0x257970){const _0x1dec65=a19_0x1a4b57,_0x38f900={};_0x38f900['Mvzoi']='Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.',_0x38f900['KXqeJ']=_0x1dec65(0xb7),_0x38f900[_0x1dec65(0x76)]=_0x1dec65(0x75),_0x38f900[_0x1dec65(0xa4)]=_0x1dec65(0xb0),_0x38f900[_0x1dec65(0x90)]=_0x1dec65(0xa8);const _0x198931=_0x38f900,_0x4709c1={};_0x4709c1['description']=_0x198931[_0x1dec65(0x95)],_0x4709c1[_0x1dec65(0xa0)]=_0x198931['KXqeJ'];const _0x4f6e11={};_0x4f6e11[_0x1dec65(0xac)]=_0x198931[_0x1dec65(0x76)],_0x4f6e11[_0x1dec65(0xa0)]=_0x198931[_0x1dec65(0xa4)],_0x4f6e11['default']=![];const _0x36db91={};return _0x36db91['grid-id']=_0x4709c1,_0x36db91['skip-tls-cert-verify']=_0x4f6e11,_0x257970['usage'](HELP_HEADER_MESSAGE['start'])['epilogue'](HELP_FOOTER_MESSAGE)['options'](_0x36db91)[_0x1dec65(0xa8)](_0x198931[_0x1dec65(0x90)])[_0x1dec65(0x72)];},exports['handler']=async function(_0x1d78a9){const _0x3973d1=a19_0x1a4b57,_0x169fb6={'ANYzd':_0x3973d1(0x79),'WYqlg':function(_0x301c42){return _0x301c42();},'bWLXe':_0x3973d1(0x9e),'OKHfK':function(_0x4a3096,_0x1cbea6,_0x55a6a9,_0x17bd78,_0x34581e,_0x256c68,_0x155797){return _0x4a3096(_0x1cbea6,_0x55a6a9,_0x17bd78,_0x34581e,_0x256c68,_0x155797);},'uFBRD':_0x3973d1(0xa3),'amuzQ':_0x3973d1(0x8a),'GBnXk':function(_0x3f1a1c,_0x13d14a,_0x5bd026,_0x45f5f7,_0x19010b,_0x57f7d7,_0x18e3b7){return _0x3f1a1c(_0x13d14a,_0x5bd026,_0x45f5f7,_0x19010b,_0x57f7d7,_0x18e3b7);},'sUXpY':function(_0x4b3a08){return _0x4b3a08();},'acRnC':'<UsernamePlaceholder>','ZKZgq':_0x3973d1(0x80),'JZOXc':'Adding\x20Websocket\x20listeners','uZbGP':function(_0x4d8227,_0x2505f3,_0x163e12,_0x2ad462){return _0x4d8227(_0x2505f3,_0x163e12,_0x2ad462);},'SJUOU':function(_0x5b16a4,_0x3af71c,_0x3ca1fb){return _0x5b16a4(_0x3af71c,_0x3ca1fb);},'Xfbaa':_0x3973d1(0xab),'wnedR':function(_0x4ab7a8,_0x5a6e48){return _0x4ab7a8===_0x5a6e48;},'POVvM':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','woSaA':_0x3973d1(0x7a),'aeljS':function(_0x65baa3,_0xdc2b01,_0x372559,_0x5b8527,_0x1dc511,_0x400315,_0x3a5561){return _0x65baa3(_0xdc2b01,_0x372559,_0x5b8527,_0x1dc511,_0x400315,_0x3a5561);},'OcAtb':_0x3973d1(0x82),'DgzTg':'server-error'};let _0x13a98a;try{!_0x1d78a9[_0x3973d1(0xaa)]&&(logger['error'](_0x169fb6[_0x3973d1(0x9a)]),process[_0x3973d1(0x98)](0x1));!fs[_0x3973d1(0x93)](_0x169fb6[_0x3973d1(0x88)](getCredentialsPath))&&(logger[_0x3973d1(0x7d)](_0x169fb6[_0x3973d1(0xb5)]),await _0x169fb6['OKHfK'](sendInstrumentationEvent,_0x1d78a9,_0x169fb6['uFBRD'],messageTypes['ERROR'],_0x169fb6['amuzQ'],null,_0x1d78a9),process[_0x3973d1(0x98)](0x1));logger[_0x3973d1(0xa9)]('Starting\x20grid\x20'+_0x1d78a9[_0x3973d1(0xaa)]),await _0x169fb6[_0x3973d1(0xa5)](sendInstrumentationEvent,_0x1d78a9,_0x169fb6['uFBRD'],messageTypes[_0x3973d1(0x6e)],null,null,_0x1d78a9);const _0x50f823=JSON['parse'](fs[_0x3973d1(0xbb)](_0x169fb6[_0x3973d1(0x7c)](getCredentialsPath)));global_registry['bstackUsername']=_0x50f823[_0x3973d1(0x7e)]['username'],global_registry['bstackAccesskey']=_0x50f823['Browserstack'][_0x3973d1(0x9f)];const _0x2c57a0=WS_ENDPOINT[_0x3973d1(0x9c)](_0x169fb6[_0x3973d1(0x6d)],_0x50f823[_0x3973d1(0x7e)][_0x3973d1(0x7f)])[_0x3973d1(0x9c)](_0x169fb6[_0x3973d1(0xb1)],_0x50f823[_0x3973d1(0x7e)][_0x3973d1(0x9f)]),_0x3596b4={};_0x3596b4[_0x3973d1(0x89)]=ws,_0x3596b4[_0x3973d1(0xa2)]=0x36ee80,_0x13a98a=new ReconnectingWebSocket(_0x2c57a0,[],_0x3596b4),logger[_0x3973d1(0x96)](_0x169fb6[_0x3973d1(0x8c)]),webSocketUtils[_0x3973d1(0x81)](_0x13a98a,_0x1d78a9['user'],_0x1d78a9['password']);const [_0xff60bc,_0x431644]=await _0x169fb6[_0x3973d1(0x6c)](getGridDetails,_0x50f823[_0x3973d1(0x7e)][_0x3973d1(0x7f)],_0x50f823[_0x3973d1(0x7e)][_0x3973d1(0x9f)],_0x1d78a9['gridId']);if(_0x431644){const _0x22bf5d=_0x431644[_0x3973d1(0xa9)];global_registry[_0x3973d1(0xae)]=_0x22bf5d['cloudProvider'],global_registry[_0x3973d1(0xb3)]=_0x22bf5d[_0x3973d1(0x91)],global_registry['clusterName']=_0x22bf5d[_0x3973d1(0x92)];const _0x2e8a53=await _0x169fb6[_0x3973d1(0xa5)](getCloudProviderObject,_0x22bf5d[_0x3973d1(0xae)],_0x22bf5d[_0x3973d1(0x92)],_0x22bf5d[_0x3973d1(0x78)],_0x13a98a,webSocketUtils,_0x1d78a9),[_0x5579c7,_0x46791b,_0x5d8ba3,_0x39d93b,_0x282bf9,_0x1bc032]=await _0x169fb6[_0x3973d1(0x83)](createK8sClient,_0x2e8a53,_0x1d78a9[_0x3973d1(0xa1)]);await _0x169fb6[_0x3973d1(0x83)](scaleUpHubDeployment,_0x46791b,_0x22bf5d[_0x3973d1(0x78)]),logger['info'](_0x169fb6[_0x3973d1(0xa7)]),process[_0x3973d1(0x98)](0x0);}_0x169fb6[_0x3973d1(0x74)](_0xff60bc[_0x3973d1(0x6b)],0x191)&&(logger['error'](_0x169fb6[_0x3973d1(0x87)]),await _0x169fb6[_0x3973d1(0x73)](sendInstrumentationEvent,_0x1d78a9,_0x169fb6[_0x3973d1(0x86)],messageTypes[_0x3973d1(0xad)],_0x169fb6[_0x3973d1(0x94)],null,_0x1d78a9),process[_0x3973d1(0x98)](0x1)),_0x169fb6[_0x3973d1(0x74)](_0xff60bc[_0x3973d1(0x6b)],0x190)&&(logger['error'](JSON[_0x3973d1(0x85)](_0xff60bc['body'])[_0x3973d1(0x70)]),await _0x169fb6[_0x3973d1(0xb4)](sendInstrumentationEvent,_0x1d78a9,_0x169fb6[_0x3973d1(0x86)],messageTypes['ERROR'],_0x169fb6['OcAtb'],null,_0x1d78a9),process[_0x3973d1(0x98)](0x1)),logger[_0x3973d1(0x7d)](_0x3973d1(0xb9)+JSON[_0x3973d1(0x9d)](_0xff60bc)),await _0x169fb6[_0x3973d1(0xa5)](sendInstrumentationEvent,_0x1d78a9,_0x169fb6['uFBRD'],messageTypes['ERROR'],_0x169fb6[_0x3973d1(0x8b)],_0xff60bc,_0x1d78a9),process[_0x3973d1(0x98)](0x1);}catch(_0x1a8f96){const _0x317c7a='Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20'+_0x1a8f96+'\x20\x0a'+JSON[_0x3973d1(0x9d)](_0x1a8f96[_0x3973d1(0x6f)])+'\x20';logger[_0x3973d1(0x7d)](_0x317c7a),process[_0x3973d1(0x98)](0x1);}};