const a19_0x3aacd9=a19_0x35c8;(function(_0x8782dd,_0x490bf1){const _0x5a90a3=a19_0x35c8,_0x2680f0=_0x8782dd();while(!![]){try{const _0x2f6442=-parseInt(_0x5a90a3(0x135))/0x1*(-parseInt(_0x5a90a3(0x152))/0x2)+-parseInt(_0x5a90a3(0x13a))/0x3+-parseInt(_0x5a90a3(0x164))/0x4*(-parseInt(_0x5a90a3(0x14d))/0x5)+-parseInt(_0x5a90a3(0x160))/0x6*(-parseInt(_0x5a90a3(0x16f))/0x7)+parseInt(_0x5a90a3(0x157))/0x8*(parseInt(_0x5a90a3(0x112))/0x9)+-parseInt(_0x5a90a3(0x139))/0xa*(-parseInt(_0x5a90a3(0x130))/0xb)+-parseInt(_0x5a90a3(0x14b))/0xc*(parseInt(_0x5a90a3(0x15d))/0xd);if(_0x2f6442===_0x490bf1)break;else _0x2680f0['push'](_0x2680f0['shift']());}catch(_0x33f4df){_0x2680f0['push'](_0x2680f0['shift']());}}}(a19_0x2c75,0xbdd59));function a19_0x35c8(_0x14e8d7,_0x4ae290){const _0x2c7534=a19_0x2c75();return a19_0x35c8=function(_0x35c883,_0x22895d){_0x35c883=_0x35c883-0x10e;let _0x5c1b90=_0x2c7534[_0x35c883];return _0x5c1b90;},a19_0x35c8(_0x14e8d7,_0x4ae290);}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x3aacd9(0x126)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x3aacd9(0x149)),{logger}=require(a19_0x3aacd9(0x16a)),{getCredentialsPath,getGridDetails}=require(a19_0x3aacd9(0x169)),{scaleUpHubDeployment}=require(a19_0x3aacd9(0x14f)),{sendInstrumentationEvent}=require(a19_0x3aacd9(0x138)),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require(a19_0x3aacd9(0x16c)),{getCloudProviderObject}=require('../../cloudproviders/utils');function a19_0x2c75(){const _0x2a1c6b=['nZDhU','readFileSync','boolean','XQCLz','statusCode','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','11691gYytwI','Adding\x20Websocket\x20listeners','body','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','replace','oZiBH','string','help','builder','Skip\x20insecure\x20cert\x20verification.','Start\x20an\x20existing\x20Automation\x20grid.','DeYnx','parse','IcKoW','oYfKr','epilogue','bZfWe','password','region','server-error','reconnecting-websocket','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','clusterName','Browserstack','Starting\x20grid\x20','GspwT','BRbhO','ootfk','invalid-grid-id','stack','1169355YwZYFo','grid-id','options','exit','WMMpl','14879aFVfoL','vAtyW','addListeners','../../utils/instrumentationUtils','10YLLAzz','1039800tnViIw','MSAis','type','dAojG','unauthorised','JXhBl','existsSync','enxck','name','YTCOD','Grid\x20started','vtisl','username','ERROR','bstackAccesskey','../../config/constants','jtZmg','475764YdGaRm','info','10PHlgRu','NmiZZ','../../utils/gridComponents','desc','usage','86WqKyQy','skip-tls-cert-verify','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','VRsvd','debug','7816LzRFOj','bstackUsername','cloudProvider','BxNwp','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','init-not-called','598VMkRfJ','WebSocket','gridId','840BbnTEY','argv','INFO','<UsernamePlaceholder>','1253596jkSeWi','start-grid-called','RkEAq','error','description','../../utils/utilityMethods','../../config/logger','command','../../utils/createk8sClient','stringify','klvol','15295IMEoXq','start'];a19_0x2c75=function(){return _0x2a1c6b;};return a19_0x2c75();}exports[a19_0x3aacd9(0x16b)]='grid',exports[a19_0x3aacd9(0x150)]=a19_0x3aacd9(0x11c),exports[a19_0x3aacd9(0x11a)]=function(_0x2a4858){const _0x14eab3=a19_0x3aacd9,_0x39f83a={};_0x39f83a[_0x14eab3(0x14a)]=_0x14eab3(0x15b),_0x39f83a[_0x14eab3(0x13b)]=_0x14eab3(0x118),_0x39f83a['dAojG']=_0x14eab3(0x11b),_0x39f83a[_0x14eab3(0x171)]=_0x14eab3(0x10e),_0x39f83a[_0x14eab3(0x136)]=_0x14eab3(0x119);const _0x15290a=_0x39f83a,_0x4725db={};_0x4725db[_0x14eab3(0x168)]=_0x15290a[_0x14eab3(0x14a)],_0x4725db['type']=_0x15290a[_0x14eab3(0x13b)];const _0x1d5224={};_0x1d5224[_0x14eab3(0x168)]=_0x15290a[_0x14eab3(0x13d)],_0x1d5224[_0x14eab3(0x13c)]=_0x15290a[_0x14eab3(0x171)],_0x1d5224['default']=![];const _0x1a4559={};return _0x1a4559[_0x14eab3(0x131)]=_0x4725db,_0x1a4559[_0x14eab3(0x153)]=_0x1d5224,_0x2a4858[_0x14eab3(0x151)](HELP_HEADER_MESSAGE[_0x14eab3(0x170)])[_0x14eab3(0x121)](HELP_FOOTER_MESSAGE)[_0x14eab3(0x132)](_0x1a4559)[_0x14eab3(0x119)](_0x15290a[_0x14eab3(0x136)])[_0x14eab3(0x161)];},exports['handler']=async function(_0x2b5b81){const _0xda33e5=a19_0x3aacd9,_0xd8cbfb={'xBRio':_0xda33e5(0x154),'enxck':function(_0x31e53c){return _0x31e53c();},'GspwT':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','oYfKr':function(_0x56c1b2,_0x28f81a,_0x355cec,_0x19d02b,_0x38ea88,_0x32f7e2,_0x490f29){return _0x56c1b2(_0x28f81a,_0x355cec,_0x19d02b,_0x38ea88,_0x32f7e2,_0x490f29);},'RkEAq':_0xda33e5(0x165),'ootfk':_0xda33e5(0x15c),'VRsvd':_0xda33e5(0x163),'vtisl':'<PasswordPlaceholder>','BxNwp':_0xda33e5(0x113),'dLngZ':function(_0x1ccc8c,_0x25dca0,_0x36fa36,_0x47f9ae){return _0x1ccc8c(_0x25dca0,_0x36fa36,_0x47f9ae);},'IcKoW':function(_0x24657b,_0xa03bcc,_0x1f39f5,_0x4e07ff,_0x552baf,_0x4ebcf0,_0x595dce){return _0x24657b(_0xa03bcc,_0x1f39f5,_0x4e07ff,_0x552baf,_0x4ebcf0,_0x595dce);},'bZfWe':function(_0x523d89,_0x49b6ef,_0x2969b8){return _0x523d89(_0x49b6ef,_0x2969b8);},'NmiZZ':function(_0x3a43bf,_0x32d6b3,_0xc46af6){return _0x3a43bf(_0x32d6b3,_0xc46af6);},'oZiBH':_0xda33e5(0x144),'DeYnx':function(_0x3bdf95,_0x420d21){return _0x3bdf95===_0x420d21;},'klvol':_0xda33e5(0x127),'XQCLz':function(_0x2fb9e6,_0x4c3ec2,_0x35c116,_0xe52bcf,_0x57a452,_0x39f4c5,_0x27ffba){return _0x2fb9e6(_0x4c3ec2,_0x35c116,_0xe52bcf,_0x57a452,_0x39f4c5,_0x27ffba);},'BRbhO':_0xda33e5(0x13e),'YTCOD':_0xda33e5(0x12e),'JXhBl':function(_0x452859,_0x584599,_0x176ff3,_0x5e7044,_0x2024b9,_0x293da6,_0x39cbf8){return _0x452859(_0x584599,_0x176ff3,_0x5e7044,_0x2024b9,_0x293da6,_0x39cbf8);},'WMMpl':_0xda33e5(0x125)};let _0xb3cff4;try{!_0x2b5b81['gridId']&&(logger[_0xda33e5(0x167)](_0xd8cbfb['xBRio']),process[_0xda33e5(0x133)](0x1));!fs[_0xda33e5(0x140)](_0xd8cbfb[_0xda33e5(0x141)](getCredentialsPath))&&(logger[_0xda33e5(0x167)](_0xd8cbfb[_0xda33e5(0x12b)]),await _0xd8cbfb[_0xda33e5(0x120)](sendInstrumentationEvent,_0x2b5b81,_0xd8cbfb[_0xda33e5(0x166)],messageTypes[_0xda33e5(0x147)],_0xd8cbfb[_0xda33e5(0x12d)],null,_0x2b5b81),process[_0xda33e5(0x133)](0x1));logger[_0xda33e5(0x14c)](_0xda33e5(0x12a)+_0x2b5b81[_0xda33e5(0x15f)]),await _0xd8cbfb[_0xda33e5(0x120)](sendInstrumentationEvent,_0x2b5b81,_0xd8cbfb[_0xda33e5(0x166)],messageTypes[_0xda33e5(0x162)],null,null,_0x2b5b81);const _0x4130d4=JSON[_0xda33e5(0x11e)](fs[_0xda33e5(0x172)](_0xd8cbfb[_0xda33e5(0x141)](getCredentialsPath)));global_registry[_0xda33e5(0x158)]=_0x4130d4[_0xda33e5(0x129)][_0xda33e5(0x146)],global_registry[_0xda33e5(0x148)]=_0x4130d4[_0xda33e5(0x129)][_0xda33e5(0x123)];const _0x573070=WS_ENDPOINT[_0xda33e5(0x116)](_0xd8cbfb[_0xda33e5(0x155)],_0x4130d4['Browserstack'][_0xda33e5(0x146)])['replace'](_0xd8cbfb[_0xda33e5(0x145)],_0x4130d4[_0xda33e5(0x129)][_0xda33e5(0x123)]),_0x831a55={};_0x831a55[_0xda33e5(0x15e)]=ws,_0x831a55['connectionTimeout']=0x36ee80,_0xb3cff4=new ReconnectingWebSocket(_0x573070,[],_0x831a55),logger[_0xda33e5(0x156)](_0xd8cbfb[_0xda33e5(0x15a)]),webSocketUtils[_0xda33e5(0x137)](_0xb3cff4,_0x2b5b81['user'],_0x2b5b81[_0xda33e5(0x123)]);const [_0x890578,_0x58c147]=await _0xd8cbfb['dLngZ'](getGridDetails,_0x4130d4[_0xda33e5(0x129)][_0xda33e5(0x146)],_0x4130d4['Browserstack']['password'],_0x2b5b81[_0xda33e5(0x15f)]);if(_0x58c147){const _0x10a80a=_0x58c147[_0xda33e5(0x14c)];global_registry['cloudProvider']=_0x10a80a[_0xda33e5(0x159)],global_registry['clusterRegion']=_0x10a80a[_0xda33e5(0x124)],global_registry['clusterName']=_0x10a80a[_0xda33e5(0x128)];const _0x51edf6=await _0xd8cbfb[_0xda33e5(0x11f)](getCloudProviderObject,_0x10a80a['cloudProvider'],_0x10a80a[_0xda33e5(0x128)],_0x10a80a[_0xda33e5(0x142)],_0xb3cff4,webSocketUtils,_0x2b5b81),[_0x40a9bd,_0x489cbd,_0x4131af,_0x9da23f,_0x3883f3,_0x5af968]=await _0xd8cbfb[_0xda33e5(0x122)](createK8sClient,_0x51edf6,_0x2b5b81['skipTlsCertVerify']);await _0xd8cbfb[_0xda33e5(0x14e)](scaleUpHubDeployment,_0x489cbd,_0x10a80a['name']),logger[_0xda33e5(0x14c)](_0xd8cbfb[_0xda33e5(0x117)]),process[_0xda33e5(0x133)](0x0);}_0xd8cbfb[_0xda33e5(0x11d)](_0x890578['statusCode'],0x191)&&(logger[_0xda33e5(0x167)](_0xd8cbfb[_0xda33e5(0x16e)]),await _0xd8cbfb[_0xda33e5(0x10f)](sendInstrumentationEvent,_0x2b5b81,_0xd8cbfb[_0xda33e5(0x166)],messageTypes[_0xda33e5(0x147)],_0xd8cbfb[_0xda33e5(0x12c)],null,_0x2b5b81),process[_0xda33e5(0x133)](0x1)),_0xd8cbfb[_0xda33e5(0x11d)](_0x890578[_0xda33e5(0x110)],0x190)&&(logger[_0xda33e5(0x167)](JSON[_0xda33e5(0x11e)](_0x890578[_0xda33e5(0x114)])['message']),await _0xd8cbfb[_0xda33e5(0x10f)](sendInstrumentationEvent,_0x2b5b81,_0xd8cbfb[_0xda33e5(0x166)],messageTypes[_0xda33e5(0x147)],_0xd8cbfb[_0xda33e5(0x143)],null,_0x2b5b81),process['exit'](0x1)),logger[_0xda33e5(0x167)](_0xda33e5(0x111)+JSON[_0xda33e5(0x16d)](_0x890578)),await _0xd8cbfb[_0xda33e5(0x13f)](sendInstrumentationEvent,_0x2b5b81,_0xd8cbfb[_0xda33e5(0x166)],messageTypes['ERROR'],_0xd8cbfb[_0xda33e5(0x134)],_0x890578,_0x2b5b81),process['exit'](0x1);}catch(_0x402099){const _0xfbb6e3=_0xda33e5(0x115)+_0x402099+'\x20\x0a'+JSON[_0xda33e5(0x16d)](_0x402099[_0xda33e5(0x12f)])+'\x20';logger[_0xda33e5(0x167)](_0xfbb6e3),process[_0xda33e5(0x133)](0x1);}};