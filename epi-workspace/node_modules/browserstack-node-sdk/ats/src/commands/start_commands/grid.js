const a19_0x48b601=a19_0x3449;function a19_0x1e5b(){const _0x215af8=['Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','../../utils/createk8sClient','init-not-called','grid-id','hBvEg','gYlSw','parse','cloudProvider','help','type','boolean','Browserstack','exit','vGExv','wwVjD','3188800RoUAHv','clusterName','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','body','grid','skip-tls-cert-verify','replace','qpSwT','error','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','unauthorised','IpqHl','options','65799ZZsxFW','TojnW','Tclfx','vhbct','<UsernamePlaceholder>','VIkfz','invalid-grid-id','TnmjR','password','readFileSync','reconnecting-websocket','yqxLW','default','start-grid-called','addListeners','atZEa','argv','yppCl','skipTlsCertVerify','description','3410452RTBiGa','1177347HHnRFx','ERROR','stringify','TzWxm','debug','command','Start\x20an\x20existing\x20Automation\x20grid.','XgrpI','../../utils/instrumentationUtils','uObuF','server-error','gridId','WebSocket','bstackUsername','5017212tnSWrC','../../cloudproviders/utils','connectionTimeout','handler','bstackAccesskey','stack','existsSync','eQyQS','region','../../utils/gridComponents','EHFTz','../../utils/utilityMethods','OiHNH','FXJub','7663026cvooXK','desc','user','info','ARJln','Skip\x20insecure\x20cert\x20verification.','RVgMQ','ebddB','Starting\x20grid\x20','Adding\x20Websocket\x20listeners','tFRVA','statusCode','1390958teeFed','start','name','username'];a19_0x1e5b=function(){return _0x215af8;};return a19_0x1e5b();}function a19_0x3449(_0x52f211,_0x403cd4){const _0x1e5b86=a19_0x1e5b();return a19_0x3449=function(_0x344922,_0x36d449){_0x344922=_0x344922-0x16a;let _0x53c8f7=_0x1e5b86[_0x344922];return _0x53c8f7;},a19_0x3449(_0x52f211,_0x403cd4);}(function(_0x3941b1,_0x9c3c3b){const _0x1c4aaa=a19_0x3449,_0x1ff85c=_0x3941b1();while(!![]){try{const _0x3cbd08=parseInt(_0x1c4aaa(0x16c))/0x1+-parseInt(_0x1c4aaa(0x1a9))/0x2+-parseInt(_0x1c4aaa(0x181))/0x3+parseInt(_0x1c4aaa(0x180))/0x4+parseInt(_0x1c4aaa(0x1bc))/0x5+-parseInt(_0x1c4aaa(0x18f))/0x6+parseInt(_0x1c4aaa(0x19d))/0x7;if(_0x3cbd08===_0x9c3c3b)break;else _0x1ff85c['push'](_0x1ff85c['shift']());}catch(_0x1de583){_0x1ff85c['push'](_0x1ff85c['shift']());}}}(a19_0x1e5b,0xb16e8));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x48b601(0x176)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require('../../config/constants'),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require(a19_0x48b601(0x19a)),{scaleUpHubDeployment}=require(a19_0x48b601(0x198)),{sendInstrumentationEvent}=require(a19_0x48b601(0x189)),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require(a19_0x48b601(0x1ae)),{getCloudProviderObject}=require(a19_0x48b601(0x190));exports[a19_0x48b601(0x186)]=a19_0x48b601(0x1c0),exports[a19_0x48b601(0x19e)]=a19_0x48b601(0x187),exports['builder']=function(_0x40813b){const _0x5bb5bd=a19_0x48b601,_0x10e838={};_0x10e838['yqxLW']=_0x5bb5bd(0x1ad),_0x10e838[_0x5bb5bd(0x1b1)]='string',_0x10e838[_0x5bb5bd(0x171)]=_0x5bb5bd(0x1a2),_0x10e838[_0x5bb5bd(0x16e)]=_0x5bb5bd(0x1b7),_0x10e838[_0x5bb5bd(0x1a3)]='help';const _0x31a610=_0x10e838,_0x32943d={};_0x32943d[_0x5bb5bd(0x17f)]=_0x31a610[_0x5bb5bd(0x177)],_0x32943d[_0x5bb5bd(0x1b6)]=_0x31a610[_0x5bb5bd(0x1b1)];const _0x2dbbf4={};_0x2dbbf4['description']=_0x31a610[_0x5bb5bd(0x171)],_0x2dbbf4[_0x5bb5bd(0x1b6)]=_0x31a610[_0x5bb5bd(0x16e)],_0x2dbbf4[_0x5bb5bd(0x178)]=![];const _0x41fccf={};return _0x41fccf[_0x5bb5bd(0x1b0)]=_0x32943d,_0x41fccf[_0x5bb5bd(0x1c1)]=_0x2dbbf4,_0x40813b['usage'](HELP_HEADER_MESSAGE[_0x5bb5bd(0x1aa)])['epilogue'](HELP_FOOTER_MESSAGE)[_0x5bb5bd(0x16b)](_0x41fccf)[_0x5bb5bd(0x1b5)](_0x31a610[_0x5bb5bd(0x1a3)])[_0x5bb5bd(0x17c)];},exports[a19_0x48b601(0x192)]=async function(_0x2cd462){const _0x1f2551=a19_0x48b601,_0x5a6937={'tFRVA':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','OiHNH':function(_0x3615ea){return _0x3615ea();},'ARJln':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','atuFm':function(_0x43128c,_0x590738,_0x46022f,_0x36ef5f,_0x50ad15,_0xde47dd,_0x1bed67){return _0x43128c(_0x590738,_0x46022f,_0x36ef5f,_0x50ad15,_0xde47dd,_0x1bed67);},'vGExv':_0x1f2551(0x179),'EHFTz':_0x1f2551(0x1af),'XgrpI':function(_0x3b58e2,_0x4f01c1,_0x3a5dd1,_0xe77be,_0xab83b2,_0xe2b29,_0x5906f1){return _0x3b58e2(_0x4f01c1,_0x3a5dd1,_0xe77be,_0xab83b2,_0xe2b29,_0x5906f1);},'eQyQS':_0x1f2551(0x170),'FXJub':'<PasswordPlaceholder>','TnmjR':_0x1f2551(0x1a6),'gJLDL':function(_0x1cb2d2,_0x4736d2,_0x344f7c,_0x4dbc1e){return _0x1cb2d2(_0x4736d2,_0x344f7c,_0x4dbc1e);},'vhbct':function(_0x3d9355,_0x29ec16,_0x5b2115){return _0x3d9355(_0x29ec16,_0x5b2115);},'ebddB':function(_0x2ec5a2,_0x1e7d16,_0x2e30cb){return _0x2ec5a2(_0x1e7d16,_0x2e30cb);},'TojnW':'Grid\x20started','wwVjD':function(_0x4b7150,_0x3bf9ef){return _0x4b7150===_0x3bf9ef;},'TzWxm':_0x1f2551(0x1c5),'yppCl':function(_0x1cd875,_0x3562cc,_0x1cdb96,_0x2b8f05,_0x46ef4d,_0x4b8ef6,_0x5cd73d){return _0x1cd875(_0x3562cc,_0x1cdb96,_0x2b8f05,_0x46ef4d,_0x4b8ef6,_0x5cd73d);},'IpqHl':_0x1f2551(0x1c6),'uObuF':function(_0x37a5bc,_0x217dee){return _0x37a5bc===_0x217dee;},'gYlSw':_0x1f2551(0x172),'qpSwT':function(_0x163e11,_0x5a15f0,_0x4a386f,_0x5baeba,_0x5a270c,_0x84e209,_0x2afbd8){return _0x163e11(_0x5a15f0,_0x4a386f,_0x5baeba,_0x5a270c,_0x84e209,_0x2afbd8);},'atZEa':_0x1f2551(0x18b)};let _0x49f350;try{!_0x2cd462['gridId']&&(logger[_0x1f2551(0x1c4)](_0x5a6937[_0x1f2551(0x1a7)]),process['exit'](0x1));!fs[_0x1f2551(0x195)](_0x5a6937[_0x1f2551(0x19b)](getCredentialsPath))&&(logger[_0x1f2551(0x1c4)](_0x5a6937[_0x1f2551(0x1a1)]),await _0x5a6937['atuFm'](sendInstrumentationEvent,_0x2cd462,_0x5a6937[_0x1f2551(0x1ba)],messageTypes[_0x1f2551(0x182)],_0x5a6937[_0x1f2551(0x199)],null,_0x2cd462),process[_0x1f2551(0x1b9)](0x1));logger['info'](_0x1f2551(0x1a5)+_0x2cd462[_0x1f2551(0x18c)]),await _0x5a6937[_0x1f2551(0x188)](sendInstrumentationEvent,_0x2cd462,_0x5a6937['vGExv'],messageTypes['INFO'],null,null,_0x2cd462);const _0x3397db=JSON[_0x1f2551(0x1b3)](fs[_0x1f2551(0x175)](_0x5a6937[_0x1f2551(0x19b)](getCredentialsPath)));global_registry[_0x1f2551(0x18e)]=_0x3397db['Browserstack'][_0x1f2551(0x1ac)],global_registry[_0x1f2551(0x193)]=_0x3397db[_0x1f2551(0x1b8)][_0x1f2551(0x174)];const _0x20d846=WS_ENDPOINT[_0x1f2551(0x1c2)](_0x5a6937[_0x1f2551(0x196)],_0x3397db[_0x1f2551(0x1b8)]['username'])[_0x1f2551(0x1c2)](_0x5a6937[_0x1f2551(0x19c)],_0x3397db[_0x1f2551(0x1b8)][_0x1f2551(0x174)]),_0x2ad6c5={};_0x2ad6c5[_0x1f2551(0x18d)]=ws,_0x2ad6c5[_0x1f2551(0x191)]=0x36ee80,_0x49f350=new ReconnectingWebSocket(_0x20d846,[],_0x2ad6c5),logger[_0x1f2551(0x185)](_0x5a6937[_0x1f2551(0x173)]),webSocketUtils[_0x1f2551(0x17a)](_0x49f350,_0x2cd462[_0x1f2551(0x19f)],_0x2cd462[_0x1f2551(0x174)]);const [_0x1676c9,_0x24b104]=await _0x5a6937['gJLDL'](getGridDetails,_0x3397db['Browserstack'][_0x1f2551(0x1ac)],_0x3397db[_0x1f2551(0x1b8)][_0x1f2551(0x174)],_0x2cd462[_0x1f2551(0x18c)]);if(_0x24b104){const _0x57fdfe=_0x24b104[_0x1f2551(0x1a0)];global_registry[_0x1f2551(0x1b4)]=_0x57fdfe[_0x1f2551(0x1b4)],global_registry['clusterRegion']=_0x57fdfe[_0x1f2551(0x197)],global_registry[_0x1f2551(0x1bd)]=_0x57fdfe[_0x1f2551(0x1bd)];const _0x80c12a=await _0x5a6937[_0x1f2551(0x188)](getCloudProviderObject,_0x57fdfe[_0x1f2551(0x1b4)],_0x57fdfe[_0x1f2551(0x1bd)],_0x57fdfe[_0x1f2551(0x1ab)],_0x49f350,webSocketUtils,_0x2cd462),[_0x4278cc,_0xed102a,_0xbcb0a0,_0x30e519,_0x4f7aa8,_0x4171e7]=await _0x5a6937[_0x1f2551(0x16f)](createK8sClient,_0x80c12a,_0x2cd462[_0x1f2551(0x17e)]);await _0x5a6937[_0x1f2551(0x1a4)](scaleUpHubDeployment,_0xed102a,_0x57fdfe[_0x1f2551(0x1ab)]),logger[_0x1f2551(0x1a0)](_0x5a6937[_0x1f2551(0x16d)]),process['exit'](0x0);}_0x5a6937[_0x1f2551(0x1bb)](_0x1676c9[_0x1f2551(0x1a8)],0x191)&&(logger[_0x1f2551(0x1c4)](_0x5a6937[_0x1f2551(0x184)]),await _0x5a6937[_0x1f2551(0x17d)](sendInstrumentationEvent,_0x2cd462,_0x5a6937['vGExv'],messageTypes[_0x1f2551(0x182)],_0x5a6937[_0x1f2551(0x16a)],null,_0x2cd462),process[_0x1f2551(0x1b9)](0x1)),_0x5a6937[_0x1f2551(0x18a)](_0x1676c9['statusCode'],0x190)&&(logger[_0x1f2551(0x1c4)](JSON[_0x1f2551(0x1b3)](_0x1676c9[_0x1f2551(0x1bf)])['message']),await _0x5a6937[_0x1f2551(0x17d)](sendInstrumentationEvent,_0x2cd462,_0x5a6937[_0x1f2551(0x1ba)],messageTypes[_0x1f2551(0x182)],_0x5a6937[_0x1f2551(0x1b2)],null,_0x2cd462),process['exit'](0x1)),logger[_0x1f2551(0x1c4)]('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON[_0x1f2551(0x183)](_0x1676c9)),await _0x5a6937[_0x1f2551(0x1c3)](sendInstrumentationEvent,_0x2cd462,_0x5a6937[_0x1f2551(0x1ba)],messageTypes[_0x1f2551(0x182)],_0x5a6937[_0x1f2551(0x17b)],_0x1676c9,_0x2cd462),process[_0x1f2551(0x1b9)](0x1);}catch(_0x18e19e){const _0x2c0d2d=_0x1f2551(0x1be)+_0x18e19e+'\x20\x0a'+JSON[_0x1f2551(0x183)](_0x18e19e[_0x1f2551(0x194)])+'\x20';logger[_0x1f2551(0x1c4)](_0x2c0d2d),process[_0x1f2551(0x1b9)](0x1);}};