const a19_0x3f5b81=a19_0x41d8;(function(_0x4e6c6a,_0x3e103d){const _0x380d02=a19_0x41d8,_0xe15293=_0x4e6c6a();while(!![]){try{const _0x338196=-parseInt(_0x380d02(0xe1))/0x1+parseInt(_0x380d02(0xbd))/0x2*(parseInt(_0x380d02(0xdc))/0x3)+-parseInt(_0x380d02(0xe4))/0x4*(-parseInt(_0x380d02(0xd0))/0x5)+-parseInt(_0x380d02(0xc7))/0x6+-parseInt(_0x380d02(0xcd))/0x7+-parseInt(_0x380d02(0x103))/0x8*(parseInt(_0x380d02(0xcf))/0x9)+parseInt(_0x380d02(0xdf))/0xa;if(_0x338196===_0x3e103d)break;else _0xe15293['push'](_0xe15293['shift']());}catch(_0x409278){_0xe15293['push'](_0xe15293['shift']());}}}(a19_0x1a34,0x447d5));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x3f5b81(0xc2)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x3f5b81(0xc1)),{logger}=require(a19_0x3f5b81(0xeb)),{getCredentialsPath,getGridDetails}=require(a19_0x3f5b81(0x10b)),{scaleUpHubDeployment}=require(a19_0x3f5b81(0xbb)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require(a19_0x3f5b81(0xce)),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require(a19_0x3f5b81(0xb8));function a19_0x41d8(_0x52919f,_0x15a79f){const _0x1a34df=a19_0x1a34();return a19_0x41d8=function(_0x41d8c6,_0x187a82){_0x41d8c6=_0x41d8c6-0xb7;let _0x2fa025=_0x1a34df[_0x41d8c6];return _0x2fa025;},a19_0x41d8(_0x52919f,_0x15a79f);}function a19_0x1a34(){const _0x23b0fb=['3945860xemGXp','description','266849UAAIfK','WebSocket','doTGC','76OpshYs','gridId','name','jawYh','eIbZw','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','help','../../config/logger','Skip\x20insecure\x20cert\x20verification.','password','invalid-grid-id','amASE','Starting\x20grid\x20','Adding\x20Websocket\x20listeners','Browserstack','info','skipTlsCertVerify','body','UVZFQ','ERROR','clusterRegion','debug','TqiVt','vwawf','clusterName','username','stack','stringify','type','command','region','382456TNCfGm','vOeBv','replace','CngNC','start-grid-called','grid','bstackAccesskey','<PasswordPlaceholder>','../../utils/utilityMethods','default','parse','LjXPE','khhDW','../../cloudproviders/utils','string','itULW','../../utils/gridComponents','olevS','950074woRHku','start','KhGPn','jxbUh','../../config/constants','reconnecting-websocket','epilogue','znmsL','cloudProvider','aWgxM','916950nNoopr','unauthorised','argv','server-error','Grid\x20started','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','3629458XOaXbK','../../utils/webSocketUtils','27lRSlPk','129605qnAyZv','mgqXt','cFNhV','grid-id','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','desc','statusCode','error','options','MVBwM','yquYn','handler','3yQddDH','exit','message'];a19_0x1a34=function(){return _0x23b0fb;};return a19_0x1a34();}exports[a19_0x3f5b81(0x101)]=a19_0x3f5b81(0x108),exports[a19_0x3f5b81(0xd5)]='Start\x20an\x20existing\x20Automation\x20grid.',exports['builder']=function(_0x3d794f){const _0x3eba7c=a19_0x3f5b81,_0x6cf2b3={};_0x6cf2b3['nSKOF']='Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.',_0x6cf2b3[_0x3eba7c(0xc6)]=_0x3eba7c(0xb9),_0x6cf2b3[_0x3eba7c(0xfa)]=_0x3eba7c(0xec),_0x6cf2b3[_0x3eba7c(0x106)]='boolean',_0x6cf2b3[_0x3eba7c(0xd1)]=_0x3eba7c(0xea);const _0x20196d=_0x6cf2b3,_0x410b21={};_0x410b21[_0x3eba7c(0xe0)]=_0x20196d['nSKOF'],_0x410b21[_0x3eba7c(0x100)]=_0x20196d[_0x3eba7c(0xc6)];const _0x4efb1b={};_0x4efb1b['description']=_0x20196d['TqiVt'],_0x4efb1b['type']=_0x20196d[_0x3eba7c(0x106)],_0x4efb1b[_0x3eba7c(0x10c)]=![];const _0x1cc7df={};return _0x1cc7df[_0x3eba7c(0xd3)]=_0x410b21,_0x1cc7df['skip-tls-cert-verify']=_0x4efb1b,_0x3d794f['usage'](HELP_HEADER_MESSAGE[_0x3eba7c(0xbe)])[_0x3eba7c(0xc3)](HELP_FOOTER_MESSAGE)[_0x3eba7c(0xd8)](_0x1cc7df)['help'](_0x20196d[_0x3eba7c(0xd1)])[_0x3eba7c(0xc9)];},exports[a19_0x3f5b81(0xdb)]=async function(_0x5232a5){const _0x192cf5=a19_0x3f5b81,_0x42c7f1={'oxMiy':_0x192cf5(0xd4),'yquYn':function(_0x2d5193){return _0x2d5193();},'olevS':_0x192cf5(0xcc),'cFNhV':function(_0x3269b1,_0x36771c,_0x4c6872,_0xfed4e8,_0x3a3d20,_0x11653d,_0x5cbad6){return _0x3269b1(_0x36771c,_0x4c6872,_0xfed4e8,_0x3a3d20,_0x11653d,_0x5cbad6);},'itULW':_0x192cf5(0x107),'eIbZw':'init-not-called','MVBwM':function(_0x2924db,_0x151def,_0x309ed7,_0x1a9b7e,_0xc62831,_0x4a13f4,_0x478fcc){return _0x2924db(_0x151def,_0x309ed7,_0x1a9b7e,_0xc62831,_0x4a13f4,_0x478fcc);},'LjXPE':function(_0x1eda5f){return _0x1eda5f();},'ZMljC':'<UsernamePlaceholder>','vwawf':_0x192cf5(0x10a),'amASE':_0x192cf5(0xf1),'jCLjM':function(_0x1bf80b,_0x49ef86,_0xced9f6,_0xd824fd){return _0x1bf80b(_0x49ef86,_0xced9f6,_0xd824fd);},'jxbUh':function(_0x5e494e,_0x391833,_0x1e7074){return _0x5e494e(_0x391833,_0x1e7074);},'vOeBv':function(_0x2e5115,_0x68330c,_0x1ac6db){return _0x2e5115(_0x68330c,_0x1ac6db);},'klAQf':_0x192cf5(0xcb),'doTGC':function(_0x30cbb7,_0x1ac232){return _0x30cbb7===_0x1ac232;},'RRjhl':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','znmsL':function(_0x5633f5,_0x8cf6f2,_0x54389c,_0xc5229c,_0xa222f0,_0x3649cf,_0xf07e2e){return _0x5633f5(_0x8cf6f2,_0x54389c,_0xc5229c,_0xa222f0,_0x3649cf,_0xf07e2e);},'KhGPn':_0x192cf5(0xc8),'jawYh':function(_0x3bfd6c,_0x2da761){return _0x3bfd6c===_0x2da761;},'UVZFQ':_0x192cf5(0xee),'khhDW':function(_0x4ba7c2,_0x569ab6,_0x408b84,_0x3400b3,_0x3afd4c,_0xdfb060,_0x17d0fc){return _0x4ba7c2(_0x569ab6,_0x408b84,_0x3400b3,_0x3afd4c,_0xdfb060,_0x17d0fc);},'ehgNn':_0x192cf5(0xca)};let _0x3eaed3;try{!_0x5232a5[_0x192cf5(0xe5)]&&(logger[_0x192cf5(0xd7)](_0x42c7f1['oxMiy']),process[_0x192cf5(0xdd)](0x1));!fs['existsSync'](_0x42c7f1[_0x192cf5(0xda)](getCredentialsPath))&&(logger['error'](_0x42c7f1[_0x192cf5(0xbc)]),await _0x42c7f1[_0x192cf5(0xd2)](sendInstrumentationEvent,_0x5232a5,_0x42c7f1['itULW'],messageTypes[_0x192cf5(0xf7)],_0x42c7f1[_0x192cf5(0xe8)],null,_0x5232a5),process['exit'](0x1));logger[_0x192cf5(0xf3)](_0x192cf5(0xf0)+_0x5232a5['gridId']),await _0x42c7f1['MVBwM'](sendInstrumentationEvent,_0x5232a5,_0x42c7f1[_0x192cf5(0xba)],messageTypes['INFO'],null,null,_0x5232a5);const _0x21fbea=JSON[_0x192cf5(0x10d)](fs['readFileSync'](_0x42c7f1[_0x192cf5(0x10e)](getCredentialsPath)));global_registry['bstackUsername']=_0x21fbea[_0x192cf5(0xf2)][_0x192cf5(0xfd)],global_registry[_0x192cf5(0x109)]=_0x21fbea[_0x192cf5(0xf2)]['password'];const _0x4df26f=WS_ENDPOINT['replace'](_0x42c7f1['ZMljC'],_0x21fbea[_0x192cf5(0xf2)]['username'])[_0x192cf5(0x105)](_0x42c7f1[_0x192cf5(0xfb)],_0x21fbea['Browserstack']['password']),_0x13c125={};_0x13c125[_0x192cf5(0xe2)]=ws,_0x13c125['connectionTimeout']=0x36ee80,_0x3eaed3=new ReconnectingWebSocket(_0x4df26f,[],_0x13c125),logger[_0x192cf5(0xf9)](_0x42c7f1[_0x192cf5(0xef)]),webSocketUtils['addListeners'](_0x3eaed3,_0x5232a5['user'],_0x5232a5[_0x192cf5(0xed)]);const [_0x1656b9,_0x5dc256]=await _0x42c7f1['jCLjM'](getGridDetails,_0x21fbea[_0x192cf5(0xf2)][_0x192cf5(0xfd)],_0x21fbea[_0x192cf5(0xf2)][_0x192cf5(0xed)],_0x5232a5[_0x192cf5(0xe5)]);if(_0x5dc256){const _0x277423=_0x5dc256['info'];global_registry[_0x192cf5(0xc5)]=_0x277423[_0x192cf5(0xc5)],global_registry[_0x192cf5(0xf8)]=_0x277423[_0x192cf5(0x102)],global_registry[_0x192cf5(0xfc)]=_0x277423['clusterName'];const _0x1af19a=await _0x42c7f1[_0x192cf5(0xd9)](getCloudProviderObject,_0x277423[_0x192cf5(0xc5)],_0x277423['clusterName'],_0x277423[_0x192cf5(0xe6)],_0x3eaed3,webSocketUtils,_0x5232a5),[_0x3d17c8,_0x2d7493,_0x457dc7,_0x3fb42c,_0x1a7194,_0xb3b9c6]=await _0x42c7f1[_0x192cf5(0xc0)](createK8sClient,_0x1af19a,_0x5232a5[_0x192cf5(0xf4)]);await _0x42c7f1[_0x192cf5(0x104)](scaleUpHubDeployment,_0x2d7493,_0x277423[_0x192cf5(0xe6)]),logger[_0x192cf5(0xf3)](_0x42c7f1['klAQf']),process[_0x192cf5(0xdd)](0x0);}_0x42c7f1[_0x192cf5(0xe3)](_0x1656b9[_0x192cf5(0xd6)],0x191)&&(logger[_0x192cf5(0xd7)](_0x42c7f1['RRjhl']),await _0x42c7f1[_0x192cf5(0xc4)](sendInstrumentationEvent,_0x5232a5,_0x42c7f1[_0x192cf5(0xba)],messageTypes[_0x192cf5(0xf7)],_0x42c7f1[_0x192cf5(0xbf)],null,_0x5232a5),process[_0x192cf5(0xdd)](0x1)),_0x42c7f1[_0x192cf5(0xe7)](_0x1656b9[_0x192cf5(0xd6)],0x190)&&(logger['error'](JSON[_0x192cf5(0x10d)](_0x1656b9[_0x192cf5(0xf5)])[_0x192cf5(0xde)]),await _0x42c7f1[_0x192cf5(0xc4)](sendInstrumentationEvent,_0x5232a5,_0x42c7f1[_0x192cf5(0xba)],messageTypes['ERROR'],_0x42c7f1[_0x192cf5(0xf6)],null,_0x5232a5),process[_0x192cf5(0xdd)](0x1)),logger[_0x192cf5(0xd7)](_0x192cf5(0xe9)+JSON[_0x192cf5(0xff)](_0x1656b9)),await _0x42c7f1[_0x192cf5(0xb7)](sendInstrumentationEvent,_0x5232a5,_0x42c7f1['itULW'],messageTypes[_0x192cf5(0xf7)],_0x42c7f1['ehgNn'],_0x1656b9,_0x5232a5),process['exit'](0x1);}catch(_0x3ff0c6){const _0x8353a4='Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20'+_0x3ff0c6+'\x20\x0a'+JSON[_0x192cf5(0xff)](_0x3ff0c6[_0x192cf5(0xfe)])+'\x20';logger[_0x192cf5(0xd7)](_0x8353a4),process[_0x192cf5(0xdd)](0x1);}};