const a19_0x170435=a19_0xe25b;function a19_0x8924(){const _0x128f0a=['parse','connectionTimeout','jTLom','start','<UsernamePlaceholder>','rmctj','../../utils/webSocketUtils','75zlHHjz','bstackUsername','string','btWPh','replace','boolean','Grid\x20started','HiybH','name','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','tzifw','bZiZP','gridId','afHPE','7radBYf','info','pqrhc','usage','sDDLy','QBMHY','44ofrUPN','../../utils/createk8sClient','desc','ERROR','type','server-error','bstackAccesskey','5274400LCVxGv','4248212Odlpju','stack','skip-tls-cert-verify','hpJpo','skipTlsCertVerify','debug','JMhyL','username','exit','1019cRGodD','addListeners','FndIf','<PasswordPlaceholder>','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','grid','default','305556axVykQ','clusterRegion','cOQiu','GndQs','866yJYLHu','user','../../utils/gridComponents','yLaLW','password','epilogue','unauthorised','invalid-grid-id','../../config/logger','readFileSync','../../utils/instrumentationUtils','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','8820470QXqGXA','cloudProvider','AAcoq','INFO','error','clusterName','TYcRt','SZzax','SOasF','YVmbF','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','builder','argv','description','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','Skip\x20insecure\x20cert\x20verification.','statusCode','stringify','1337688jPuwfR','3432060wwxJbA','Browserstack','WebSocket','command','message','init-not-called','cENVX','fTSSd'];a19_0x8924=function(){return _0x128f0a;};return a19_0x8924();}(function(_0x1602a8,_0x1a4287){const _0x33f370=a19_0xe25b,_0x1204ff=_0x1602a8();while(!![]){try{const _0x1bf10b=parseInt(_0x33f370(0xe6))/0x1*(parseInt(_0x33f370(0xf1))/0x2)+-parseInt(_0x33f370(0x10f))/0x3+-parseInt(_0x33f370(0xdd))/0x4+-parseInt(_0x33f370(0x11f))/0x5*(parseInt(_0x33f370(0xed))/0x6)+-parseInt(_0x33f370(0xcf))/0x7*(parseInt(_0x33f370(0xdc))/0x8)+-parseInt(_0x33f370(0x110))/0x9+parseInt(_0x33f370(0xfd))/0xa*(parseInt(_0x33f370(0xd5))/0xb);if(_0x1bf10b===_0x1a4287)break;else _0x1204ff['push'](_0x1204ff['shift']());}catch(_0x268dff){_0x1204ff['push'](_0x1204ff['shift']());}}}(a19_0x8924,0xa0628));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require('../../config/constants'),{logger}=require(a19_0x170435(0xf9)),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleUpHubDeployment}=require(a19_0x170435(0xf3)),{sendInstrumentationEvent}=require(a19_0x170435(0xfb)),webSocketUtils=require(a19_0x170435(0x11e)),{createK8sClient}=require(a19_0x170435(0xd6)),{getCloudProviderObject}=require('../../cloudproviders/utils');function a19_0xe25b(_0x420e40,_0x5779c4){const _0x89242c=a19_0x8924();return a19_0xe25b=function(_0xe25b03,_0x37246d){_0xe25b03=_0xe25b03-0xc5;let _0x5c5104=_0x89242c[_0xe25b03];return _0x5c5104;},a19_0xe25b(_0x420e40,_0x5779c4);}exports[a19_0x170435(0x113)]=a19_0x170435(0xeb),exports[a19_0x170435(0xd7)]='Start\x20an\x20existing\x20Automation\x20grid.',exports[a19_0x170435(0x108)]=function(_0x1a53fd){const _0x556124=a19_0x170435,_0x280b06={};_0x280b06[_0x556124(0x122)]='Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.',_0x280b06[_0x556124(0xff)]=_0x556124(0x121),_0x280b06['TYcRt']=_0x556124(0x10c),_0x280b06[_0x556124(0x116)]=_0x556124(0xc6),_0x280b06[_0x556124(0xcb)]='help';const _0x105f24=_0x280b06,_0x489d0d={};_0x489d0d[_0x556124(0x10a)]=_0x105f24[_0x556124(0x122)],_0x489d0d['type']=_0x105f24['AAcoq'];const _0x2bc0da={};_0x2bc0da[_0x556124(0x10a)]=_0x105f24[_0x556124(0x103)],_0x2bc0da[_0x556124(0xd9)]=_0x105f24[_0x556124(0x116)],_0x2bc0da[_0x556124(0xec)]=![];const _0x5a4daa={};return _0x5a4daa['grid-id']=_0x489d0d,_0x5a4daa[_0x556124(0xdf)]=_0x2bc0da,_0x1a53fd[_0x556124(0xd2)](HELP_HEADER_MESSAGE[_0x556124(0x11b)])[_0x556124(0xf6)](HELP_FOOTER_MESSAGE)['options'](_0x5a4daa)['help'](_0x105f24[_0x556124(0xcb)])[_0x556124(0x109)];},exports['handler']=async function(_0x146a5d){const _0x5987a4=a19_0x170435,_0x1ff7fd={'FndIf':_0x5987a4(0xfc),'bZiZP':function(_0x25176b){return _0x25176b();},'fTSSd':_0x5987a4(0xca),'yLaLW':function(_0x5ad772,_0x261cb8,_0x33b451,_0x49de75,_0x550d73,_0x37eb53,_0x164307){return _0x5ad772(_0x261cb8,_0x33b451,_0x49de75,_0x550d73,_0x37eb53,_0x164307);},'QBMHY':'start-grid-called','HiybH':_0x5987a4(0x115),'jTLom':function(_0x30433e,_0x5e7234,_0x576de4,_0x54d618,_0x1ef538,_0x5ef57c,_0x245490){return _0x30433e(_0x5e7234,_0x576de4,_0x54d618,_0x1ef538,_0x5ef57c,_0x245490);},'cOQiu':_0x5987a4(0x11c),'JMhyL':_0x5987a4(0xe9),'afHPE':'Adding\x20Websocket\x20listeners','ibxTP':function(_0x42675e,_0xcdd8bc,_0x10c38d,_0x68ad56){return _0x42675e(_0xcdd8bc,_0x10c38d,_0x68ad56);},'YVmbF':function(_0x370940,_0x575ea4,_0x546e37){return _0x370940(_0x575ea4,_0x546e37);},'sDDLy':function(_0x221f8b,_0x152a6c,_0xeea0f9){return _0x221f8b(_0x152a6c,_0xeea0f9);},'SOasF':_0x5987a4(0xc7),'SZzax':function(_0x15eff4,_0x46a430){return _0x15eff4===_0x46a430;},'rmctj':_0x5987a4(0x107),'MmGFc':_0x5987a4(0xf7),'GndQs':function(_0x45d1c4,_0x318632){return _0x45d1c4===_0x318632;},'Twzwq':_0x5987a4(0xf8),'pqrhc':function(_0x2b96ef,_0x5c37d6,_0x3ab5de,_0x21eb85,_0x376da6,_0x3e3f18,_0x38cd40){return _0x2b96ef(_0x5c37d6,_0x3ab5de,_0x21eb85,_0x376da6,_0x3e3f18,_0x38cd40);},'hpJpo':_0x5987a4(0xda)};let _0x567e70;try{!_0x146a5d['gridId']&&(logger[_0x5987a4(0x101)](_0x1ff7fd[_0x5987a4(0xe8)]),process[_0x5987a4(0xe5)](0x1));!fs['existsSync'](_0x1ff7fd[_0x5987a4(0xcc)](getCredentialsPath))&&(logger[_0x5987a4(0x101)](_0x1ff7fd[_0x5987a4(0x117)]),await _0x1ff7fd[_0x5987a4(0xf4)](sendInstrumentationEvent,_0x146a5d,_0x1ff7fd[_0x5987a4(0xd4)],messageTypes[_0x5987a4(0xd8)],_0x1ff7fd[_0x5987a4(0xc8)],null,_0x146a5d),process[_0x5987a4(0xe5)](0x1));logger[_0x5987a4(0xd0)]('Starting\x20grid\x20'+_0x146a5d[_0x5987a4(0xcd)]),await _0x1ff7fd[_0x5987a4(0x11a)](sendInstrumentationEvent,_0x146a5d,_0x1ff7fd[_0x5987a4(0xd4)],messageTypes[_0x5987a4(0x100)],null,null,_0x146a5d);const _0x35f77e=JSON[_0x5987a4(0x118)](fs[_0x5987a4(0xfa)](_0x1ff7fd[_0x5987a4(0xcc)](getCredentialsPath)));global_registry[_0x5987a4(0x120)]=_0x35f77e[_0x5987a4(0x111)][_0x5987a4(0xe4)],global_registry[_0x5987a4(0xdb)]=_0x35f77e[_0x5987a4(0x111)][_0x5987a4(0xf5)];const _0x1ca5f9=WS_ENDPOINT[_0x5987a4(0xc5)](_0x1ff7fd[_0x5987a4(0xef)],_0x35f77e[_0x5987a4(0x111)][_0x5987a4(0xe4)])[_0x5987a4(0xc5)](_0x1ff7fd[_0x5987a4(0xe3)],_0x35f77e[_0x5987a4(0x111)][_0x5987a4(0xf5)]),_0x1735c6={};_0x1735c6[_0x5987a4(0x112)]=ws,_0x1735c6[_0x5987a4(0x119)]=0x36ee80,_0x567e70=new ReconnectingWebSocket(_0x1ca5f9,[],_0x1735c6),logger[_0x5987a4(0xe2)](_0x1ff7fd[_0x5987a4(0xce)]),webSocketUtils[_0x5987a4(0xe7)](_0x567e70,_0x146a5d[_0x5987a4(0xf2)],_0x146a5d[_0x5987a4(0xf5)]);const [_0x31e9e1,_0x5d7884]=await _0x1ff7fd['ibxTP'](getGridDetails,_0x35f77e[_0x5987a4(0x111)][_0x5987a4(0xe4)],_0x35f77e[_0x5987a4(0x111)][_0x5987a4(0xf5)],_0x146a5d['gridId']);if(_0x5d7884){const _0x48a265=_0x5d7884[_0x5987a4(0xd0)];global_registry[_0x5987a4(0xfe)]=_0x48a265['cloudProvider'],global_registry[_0x5987a4(0xee)]=_0x48a265['region'],global_registry[_0x5987a4(0x102)]=_0x48a265[_0x5987a4(0x102)];const _0x377324=await _0x1ff7fd['yLaLW'](getCloudProviderObject,_0x48a265[_0x5987a4(0xfe)],_0x48a265[_0x5987a4(0x102)],_0x48a265['name'],_0x567e70,webSocketUtils,_0x146a5d),[_0x139485,_0x1973b1,_0x24c5a8,_0x38471e,_0x1d2d86,_0x29e526]=await _0x1ff7fd[_0x5987a4(0x106)](createK8sClient,_0x377324,_0x146a5d[_0x5987a4(0xe1)]);await _0x1ff7fd[_0x5987a4(0xd3)](scaleUpHubDeployment,_0x1973b1,_0x48a265[_0x5987a4(0xc9)]),logger[_0x5987a4(0xd0)](_0x1ff7fd[_0x5987a4(0x105)]),process[_0x5987a4(0xe5)](0x0);}_0x1ff7fd[_0x5987a4(0x104)](_0x31e9e1[_0x5987a4(0x10d)],0x191)&&(logger['error'](_0x1ff7fd[_0x5987a4(0x11d)]),await _0x1ff7fd['jTLom'](sendInstrumentationEvent,_0x146a5d,_0x1ff7fd[_0x5987a4(0xd4)],messageTypes[_0x5987a4(0xd8)],_0x1ff7fd['MmGFc'],null,_0x146a5d),process[_0x5987a4(0xe5)](0x1)),_0x1ff7fd[_0x5987a4(0xf0)](_0x31e9e1[_0x5987a4(0x10d)],0x190)&&(logger['error'](JSON[_0x5987a4(0x118)](_0x31e9e1['body'])[_0x5987a4(0x114)]),await _0x1ff7fd[_0x5987a4(0xf4)](sendInstrumentationEvent,_0x146a5d,_0x1ff7fd[_0x5987a4(0xd4)],messageTypes[_0x5987a4(0xd8)],_0x1ff7fd['Twzwq'],null,_0x146a5d),process[_0x5987a4(0xe5)](0x1)),logger[_0x5987a4(0x101)](_0x5987a4(0x10b)+JSON[_0x5987a4(0x10e)](_0x31e9e1)),await _0x1ff7fd[_0x5987a4(0xd1)](sendInstrumentationEvent,_0x146a5d,_0x1ff7fd['QBMHY'],messageTypes[_0x5987a4(0xd8)],_0x1ff7fd[_0x5987a4(0xe0)],_0x31e9e1,_0x146a5d),process['exit'](0x1);}catch(_0xb17094){const _0x458cf8=_0x5987a4(0xea)+_0xb17094+'\x20\x0a'+JSON[_0x5987a4(0x10e)](_0xb17094[_0x5987a4(0xde)])+'\x20';logger['error'](_0x458cf8),process[_0x5987a4(0xe5)](0x1);}};