const a19_0x5cb12d=a19_0x432a;(function(_0x3037ab,_0x20143c){const _0x263513=a19_0x432a,_0x4dbef1=_0x3037ab();while(!![]){try{const _0x4ac778=parseInt(_0x263513(0x188))/0x1*(parseInt(_0x263513(0x18f))/0x2)+-parseInt(_0x263513(0x16e))/0x3*(parseInt(_0x263513(0x16b))/0x4)+parseInt(_0x263513(0x18a))/0x5+-parseInt(_0x263513(0x15b))/0x6*(parseInt(_0x263513(0x19e))/0x7)+parseInt(_0x263513(0x152))/0x8+-parseInt(_0x263513(0x19c))/0x9*(parseInt(_0x263513(0x1a5))/0xa)+parseInt(_0x263513(0x198))/0xb*(parseInt(_0x263513(0x17a))/0xc);if(_0x4ac778===_0x20143c)break;else _0x4dbef1['push'](_0x4dbef1['shift']());}catch(_0x57c1fb){_0x4dbef1['push'](_0x4dbef1['shift']());}}}(a19_0x3ec3,0x5550b));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x5cb12d(0x17d)),{logger}=require(a19_0x5cb12d(0x180)),{getCredentialsPath,getGridDetails}=require(a19_0x5cb12d(0x15c)),{scaleUpHubDeployment}=require(a19_0x5cb12d(0x1a6)),{sendInstrumentationEvent}=require(a19_0x5cb12d(0x1a9)),webSocketUtils=require(a19_0x5cb12d(0x16a)),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require(a19_0x5cb12d(0x164));function a19_0x432a(_0x5a0ede,_0x411cba){const _0x3ec335=a19_0x3ec3();return a19_0x432a=function(_0x432a43,_0x25ce01){_0x432a43=_0x432a43-0x150;let _0x2baedc=_0x3ec335[_0x432a43];return _0x2baedc;},a19_0x432a(_0x5a0ede,_0x411cba);}exports[a19_0x5cb12d(0x160)]=a19_0x5cb12d(0x1a2),exports['desc']=a19_0x5cb12d(0x178),exports[a19_0x5cb12d(0x19a)]=function(_0x5debd5){const _0x54de1a=a19_0x5cb12d,_0x9e84bb={};_0x9e84bb[_0x54de1a(0x19b)]=_0x54de1a(0x163),_0x9e84bb['rWBMQ']=_0x54de1a(0x17f),_0x9e84bb['wWEUI']=_0x54de1a(0x177),_0x9e84bb[_0x54de1a(0x150)]=_0x54de1a(0x174),_0x9e84bb['PjWDz']=_0x54de1a(0x154);const _0x1de095=_0x9e84bb,_0xcfe49a={};_0xcfe49a['description']=_0x1de095[_0x54de1a(0x19b)],_0xcfe49a[_0x54de1a(0x19f)]=_0x1de095[_0x54de1a(0x184)];const _0x3d7cfd={};_0x3d7cfd[_0x54de1a(0x194)]=_0x1de095['wWEUI'],_0x3d7cfd['type']=_0x1de095[_0x54de1a(0x150)],_0x3d7cfd['default']=![];const _0x3d00c4={};return _0x3d00c4[_0x54de1a(0x166)]=_0xcfe49a,_0x3d00c4[_0x54de1a(0x15d)]=_0x3d7cfd,_0x5debd5[_0x54de1a(0x181)](HELP_HEADER_MESSAGE[_0x54de1a(0x193)])[_0x54de1a(0x15e)](HELP_FOOTER_MESSAGE)['options'](_0x3d00c4)['help'](_0x1de095['PjWDz'])[_0x54de1a(0x1a7)];},exports[a19_0x5cb12d(0x1a3)]=async function(_0x40eb8e){const _0x5541ea=a19_0x5cb12d,_0x55634d={'GoKAp':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','GtwaI':function(_0x5eb95){return _0x5eb95();},'mCgAf':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','QhdyU':function(_0x3f1e2b,_0x165f89,_0x319bdb,_0x34b013,_0x533e60,_0x3dcebf,_0xb54c2){return _0x3f1e2b(_0x165f89,_0x319bdb,_0x34b013,_0x533e60,_0x3dcebf,_0xb54c2);},'evqxW':_0x5541ea(0x168),'AottP':'init-not-called','jnziN':function(_0xe706f3,_0x471b3a,_0x3a7dc8,_0x228808,_0x35abab,_0x5cefec,_0x226a1d){return _0xe706f3(_0x471b3a,_0x3a7dc8,_0x228808,_0x35abab,_0x5cefec,_0x226a1d);},'MgvgT':function(_0x59df1c){return _0x59df1c();},'xZZlw':_0x5541ea(0x16f),'EahKC':_0x5541ea(0x159),'bDsVs':_0x5541ea(0x183),'IKOJb':function(_0x5b5bf5,_0x487216,_0x2bca64,_0x39fa82){return _0x5b5bf5(_0x487216,_0x2bca64,_0x39fa82);},'VIMxY':function(_0x2009f7,_0xe5fd87,_0x507ea7){return _0x2009f7(_0xe5fd87,_0x507ea7);},'kkhps':function(_0x114619,_0x1377f3,_0x5b87f6){return _0x114619(_0x1377f3,_0x5b87f6);},'AqTFI':'Grid\x20started','XMCeC':function(_0x5f1543,_0x54d7ab){return _0x5f1543===_0x54d7ab;},'FdBgp':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','dVtLI':_0x5541ea(0x196),'Uahsg':function(_0x3efda7,_0x213654,_0x2f6de8,_0x403044,_0x527c8f,_0x56998d,_0x372c3f){return _0x3efda7(_0x213654,_0x2f6de8,_0x403044,_0x527c8f,_0x56998d,_0x372c3f);},'VRfvV':_0x5541ea(0x1a8),'cQAhO':'server-error'};let _0x10713c;try{!_0x40eb8e['gridId']&&(logger[_0x5541ea(0x151)](_0x55634d['GoKAp']),process[_0x5541ea(0x16c)](0x1));!fs[_0x5541ea(0x170)](_0x55634d[_0x5541ea(0x16d)](getCredentialsPath))&&(logger[_0x5541ea(0x151)](_0x55634d['mCgAf']),await _0x55634d['QhdyU'](sendInstrumentationEvent,_0x40eb8e,_0x55634d[_0x5541ea(0x18d)],messageTypes[_0x5541ea(0x17b)],_0x55634d[_0x5541ea(0x179)],null,_0x40eb8e),process[_0x5541ea(0x16c)](0x1));logger[_0x5541ea(0x1a4)]('Starting\x20grid\x20'+_0x40eb8e[_0x5541ea(0x1a0)]),await _0x55634d['jnziN'](sendInstrumentationEvent,_0x40eb8e,_0x55634d[_0x5541ea(0x18d)],messageTypes[_0x5541ea(0x192)],null,null,_0x40eb8e);const _0x12e22d=JSON[_0x5541ea(0x185)](fs[_0x5541ea(0x17c)](_0x55634d[_0x5541ea(0x191)](getCredentialsPath)));global_registry[_0x5541ea(0x1a1)]=_0x12e22d[_0x5541ea(0x176)][_0x5541ea(0x165)],global_registry[_0x5541ea(0x162)]=_0x12e22d[_0x5541ea(0x176)]['password'];const _0x3c21e2=WS_ENDPOINT[_0x5541ea(0x156)](_0x55634d[_0x5541ea(0x195)],_0x12e22d[_0x5541ea(0x176)]['username'])[_0x5541ea(0x156)](_0x55634d[_0x5541ea(0x173)],_0x12e22d['Browserstack']['password']),_0xb770da={};_0xb770da[_0x5541ea(0x167)]=ws,_0xb770da['connectionTimeout']=0x36ee80,_0x10713c=new ReconnectingWebSocket(_0x3c21e2,[],_0xb770da),logger[_0x5541ea(0x199)](_0x55634d[_0x5541ea(0x19d)]),webSocketUtils['addListeners'](_0x10713c,_0x40eb8e['user'],_0x40eb8e[_0x5541ea(0x18c)]);const [_0x221095,_0x54cb57]=await _0x55634d[_0x5541ea(0x186)](getGridDetails,_0x12e22d[_0x5541ea(0x176)][_0x5541ea(0x165)],_0x12e22d['Browserstack'][_0x5541ea(0x18c)],_0x40eb8e['gridId']);if(_0x54cb57){const _0x48a7f4=_0x54cb57[_0x5541ea(0x1a4)];global_registry[_0x5541ea(0x169)]=_0x48a7f4[_0x5541ea(0x169)],global_registry[_0x5541ea(0x189)]=_0x48a7f4[_0x5541ea(0x197)],global_registry[_0x5541ea(0x171)]=_0x48a7f4['clusterName'];const _0x26e09d=await _0x55634d[_0x5541ea(0x153)](getCloudProviderObject,_0x48a7f4['cloudProvider'],_0x48a7f4[_0x5541ea(0x171)],_0x48a7f4['name'],_0x10713c,webSocketUtils,_0x40eb8e),[_0x5757c2,_0x45004f,_0x45e17c,_0x3a249d,_0x3535e8,_0x3fda3b]=await _0x55634d[_0x5541ea(0x18e)](createK8sClient,_0x26e09d,_0x40eb8e[_0x5541ea(0x157)]);await _0x55634d['kkhps'](scaleUpHubDeployment,_0x45004f,_0x48a7f4[_0x5541ea(0x155)]),logger[_0x5541ea(0x1a4)](_0x55634d[_0x5541ea(0x172)]),process['exit'](0x0);}_0x55634d[_0x5541ea(0x190)](_0x221095[_0x5541ea(0x158)],0x191)&&(logger['error'](_0x55634d[_0x5541ea(0x161)]),await _0x55634d['QhdyU'](sendInstrumentationEvent,_0x40eb8e,_0x55634d[_0x5541ea(0x18d)],messageTypes[_0x5541ea(0x17b)],_0x55634d[_0x5541ea(0x18b)],null,_0x40eb8e),process[_0x5541ea(0x16c)](0x1)),_0x55634d[_0x5541ea(0x190)](_0x221095['statusCode'],0x190)&&(logger[_0x5541ea(0x151)](JSON['parse'](_0x221095[_0x5541ea(0x15a)])[_0x5541ea(0x175)]),await _0x55634d['Uahsg'](sendInstrumentationEvent,_0x40eb8e,_0x55634d[_0x5541ea(0x18d)],messageTypes[_0x5541ea(0x17b)],_0x55634d['VRfvV'],null,_0x40eb8e),process[_0x5541ea(0x16c)](0x1)),logger[_0x5541ea(0x151)](_0x5541ea(0x182)+JSON[_0x5541ea(0x187)](_0x221095)),await _0x55634d[_0x5541ea(0x17e)](sendInstrumentationEvent,_0x40eb8e,_0x55634d['evqxW'],messageTypes[_0x5541ea(0x17b)],_0x55634d[_0x5541ea(0x15f)],_0x221095,_0x40eb8e),process[_0x5541ea(0x16c)](0x1);}catch(_0x12884f){const _0x627fb7='Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20'+_0x12884f+'\x20\x0a'+JSON[_0x5541ea(0x187)](_0x12884f['stack'])+'\x20';logger['error'](_0x627fb7),process[_0x5541ea(0x16c)](0x1);}};function a19_0x3ec3(){const _0x1e3c82=['VIMxY','473540txiibv','XMCeC','MgvgT','INFO','start','description','xZZlw','unauthorised','region','1177TWknjK','debug','builder','yFuor','27dHvZho','bDsVs','7mcKcmt','type','gridId','bstackUsername','grid','handler','info','388570slqyVl','../../utils/gridComponents','argv','invalid-grid-id','../../utils/instrumentationUtils','rLxqt','error','3483328WbmIKL','QhdyU','help','name','replace','skipTlsCertVerify','statusCode','<PasswordPlaceholder>','body','3019362YEflKY','../../utils/utilityMethods','skip-tls-cert-verify','epilogue','cQAhO','command','FdBgp','bstackAccesskey','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','../../cloudproviders/utils','username','grid-id','WebSocket','start-grid-called','cloudProvider','../../utils/webSocketUtils','500EUuuFF','exit','GtwaI','15819NbkexC','<UsernamePlaceholder>','existsSync','clusterName','AqTFI','EahKC','boolean','message','Browserstack','Skip\x20insecure\x20cert\x20verification.','Start\x20an\x20existing\x20Automation\x20grid.','AottP','80016QbGgHi','ERROR','readFileSync','../../config/constants','Uahsg','string','../../config/logger','usage','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','Adding\x20Websocket\x20listeners','rWBMQ','parse','IKOJb','stringify','1OzDaXx','clusterRegion','1213560eDKKvg','dVtLI','password','evqxW'];a19_0x3ec3=function(){return _0x1e3c82;};return a19_0x3ec3();}