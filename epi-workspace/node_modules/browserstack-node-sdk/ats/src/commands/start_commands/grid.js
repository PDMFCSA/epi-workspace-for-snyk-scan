const a19_0x2d20e8=a19_0x5588;(function(_0x17e169,_0xdd1a34){const _0x125fd2=a19_0x5588,_0x2e3c37=_0x17e169();while(!![]){try{const _0x762d10=parseInt(_0x125fd2(0x198))/0x1+-parseInt(_0x125fd2(0x1bd))/0x2+parseInt(_0x125fd2(0x1f2))/0x3*(-parseInt(_0x125fd2(0x1b5))/0x4)+-parseInt(_0x125fd2(0x19f))/0x5+parseInt(_0x125fd2(0x19c))/0x6+-parseInt(_0x125fd2(0x1ad))/0x7*(-parseInt(_0x125fd2(0x1dd))/0x8)+parseInt(_0x125fd2(0x1cc))/0x9*(-parseInt(_0x125fd2(0x1ae))/0xa);if(_0x762d10===_0xdd1a34)break;else _0x2e3c37['push'](_0x2e3c37['shift']());}catch(_0x3640a0){_0x2e3c37['push'](_0x2e3c37['shift']());}}}(a19_0x5082,0x458ec));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x2d20e8(0x1ec)),{logger}=require(a19_0x2d20e8(0x1eb)),{getCredentialsPath,getGridDetails}=require(a19_0x2d20e8(0x19d)),{scaleUpHubDeployment}=require(a19_0x2d20e8(0x1c3)),{sendInstrumentationEvent}=require(a19_0x2d20e8(0x1f1)),webSocketUtils=require(a19_0x2d20e8(0x1b3)),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require(a19_0x2d20e8(0x1b2));function a19_0x5588(_0x228610,_0x5a22a3){const _0x50826e=a19_0x5082();return a19_0x5588=function(_0x5588eb,_0x32fb7d){_0x5588eb=_0x5588eb-0x198;let _0x59a645=_0x50826e[_0x5588eb];return _0x59a645;},a19_0x5588(_0x228610,_0x5a22a3);}function a19_0x5082(){const _0x466ffd=['user','help','invalid-grid-id','grid','statusCode','exit','skipTlsCertVerify','mqttC','UJLfq','Grid\x20started','../../config/logger','../../config/constants','JwKwE','server-error','name','Start\x20an\x20existing\x20Automation\x20grid.','../../utils/instrumentationUtils','1737Zehjei','zVbGU','body','info','builder','grid-id','412523AnMOJo','replace','XratU','EWalu','603918rLiUvA','../../utils/utilityMethods','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','1212840bmUfqA','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','password','cloudProvider','poiEW','WebSocket','lKCgb','start','string','unauthorised','connectionTimeout','boolean','YDaPn','Browserstack','14uJzKAI','90jjNpmf','skip-tls-cert-verify','FFECg','start-grid-called','../../cloudproviders/utils','../../utils/webSocketUtils','desc','1604uDRXFT','error','VIrum','<PasswordPlaceholder>','debug','init-not-called','INFO','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','65940dXPYdn','DgIgT','ERROR','epilogue','stack','lhRCQ','../../utils/gridComponents','clusterName','username','message','command','<UsernamePlaceholder>','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','feYHN','bstackUsername','70623LQfguc','stringify','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','MfEBT','Starting\x20grid\x20','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','Gkjzn','description','options','Adding\x20Websocket\x20listeners','bstackAccesskey','type','wCbWl','argv','gridId','WWuct','zxcex','1400288xTFyaJ','sXKTJ','hcyqN','parse'];a19_0x5082=function(){return _0x466ffd;};return a19_0x5082();}exports[a19_0x2d20e8(0x1c7)]=a19_0x2d20e8(0x1e4),exports[a19_0x2d20e8(0x1b4)]=a19_0x2d20e8(0x1f0),exports[a19_0x2d20e8(0x1f6)]=function(_0xd053cd){const _0x3deaa6=a19_0x2d20e8,_0x3541ff={};_0x3541ff['JRkNM']=_0x3deaa6(0x1d1),_0x3541ff[_0x3deaa6(0x1c2)]=_0x3deaa6(0x1a7),_0x3541ff[_0x3deaa6(0x1e8)]='Skip\x20insecure\x20cert\x20verification.',_0x3541ff['feYHN']=_0x3deaa6(0x1aa),_0x3541ff[_0x3deaa6(0x1df)]=_0x3deaa6(0x1e2);const _0xc2b186=_0x3541ff,_0x36a437={};_0x36a437[_0x3deaa6(0x1d3)]=_0xc2b186['JRkNM'],_0x36a437['type']=_0xc2b186['lhRCQ'];const _0x23e492={};_0x23e492['description']=_0xc2b186['mqttC'],_0x23e492[_0x3deaa6(0x1d7)]=_0xc2b186[_0x3deaa6(0x1ca)],_0x23e492['default']=![];const _0x19415f={};return _0x19415f[_0x3deaa6(0x1f7)]=_0x36a437,_0x19415f[_0x3deaa6(0x1af)]=_0x23e492,_0xd053cd['usage'](HELP_HEADER_MESSAGE[_0x3deaa6(0x1a6)])[_0x3deaa6(0x1c0)](HELP_FOOTER_MESSAGE)[_0x3deaa6(0x1d4)](_0x19415f)[_0x3deaa6(0x1e2)](_0xc2b186[_0x3deaa6(0x1df)])[_0x3deaa6(0x1d9)];},exports['handler']=async function(_0x49a3eb){const _0x484331=a19_0x2d20e8,_0x3e8425={'VIrum':_0x484331(0x1c9),'Gkjzn':function(_0x4016c7){return _0x4016c7();},'UJLfq':_0x484331(0x1ce),'zVbGU':function(_0x509584,_0x51552e,_0x32c65f,_0x19515f,_0x445e5e,_0x215f53,_0xcfeae7){return _0x509584(_0x51552e,_0x32c65f,_0x19515f,_0x445e5e,_0x215f53,_0xcfeae7);},'lKCgb':_0x484331(0x1b1),'vQLYh':_0x484331(0x1ba),'FFECg':function(_0x200b7e){return _0x200b7e();},'YDaPn':_0x484331(0x1c8),'DgIgT':_0x484331(0x1b8),'sXKTJ':_0x484331(0x1d5),'rOAHV':function(_0x32edf8,_0x19da8f,_0x59b390,_0x109a89){return _0x32edf8(_0x19da8f,_0x59b390,_0x109a89);},'WWuct':function(_0x5d82f4,_0x2e5505,_0x5e2862){return _0x5d82f4(_0x2e5505,_0x5e2862);},'XratU':_0x484331(0x1ea),'xQBdv':function(_0x2dc584,_0x30658c){return _0x2dc584===_0x30658c;},'JwKwE':_0x484331(0x1a0),'MfEBT':function(_0x51d598,_0x33ca53,_0x160265,_0x3b3eb0,_0x1a2a6f,_0x1eee02,_0xd5b3f1){return _0x51d598(_0x33ca53,_0x160265,_0x3b3eb0,_0x1a2a6f,_0x1eee02,_0xd5b3f1);},'EWalu':_0x484331(0x1a8),'zxcex':function(_0x4188a6,_0x4d0c21){return _0x4188a6===_0x4d0c21;},'wCbWl':_0x484331(0x1e3),'MMbsk':function(_0x504526,_0x3c58bc,_0x189a99,_0x30d6d4,_0x3861ad,_0x2f6109,_0x58eeea){return _0x504526(_0x3c58bc,_0x189a99,_0x30d6d4,_0x3861ad,_0x2f6109,_0x58eeea);},'poiEW':_0x484331(0x1ee)};let _0xf5d6b1;try{!_0x49a3eb[_0x484331(0x1da)]&&(logger[_0x484331(0x1b6)](_0x3e8425[_0x484331(0x1b7)]),process[_0x484331(0x1e6)](0x1));!fs['existsSync'](_0x3e8425[_0x484331(0x1d2)](getCredentialsPath))&&(logger[_0x484331(0x1b6)](_0x3e8425[_0x484331(0x1e9)]),await _0x3e8425['zVbGU'](sendInstrumentationEvent,_0x49a3eb,_0x3e8425[_0x484331(0x1a5)],messageTypes['ERROR'],_0x3e8425['vQLYh'],null,_0x49a3eb),process['exit'](0x1));logger[_0x484331(0x1f5)](_0x484331(0x1d0)+_0x49a3eb[_0x484331(0x1da)]),await _0x3e8425[_0x484331(0x1f3)](sendInstrumentationEvent,_0x49a3eb,_0x3e8425[_0x484331(0x1a5)],messageTypes[_0x484331(0x1bb)],null,null,_0x49a3eb);const _0x30ebb1=JSON['parse'](fs['readFileSync'](_0x3e8425[_0x484331(0x1b0)](getCredentialsPath)));global_registry[_0x484331(0x1cb)]=_0x30ebb1[_0x484331(0x1ac)][_0x484331(0x1c5)],global_registry[_0x484331(0x1d6)]=_0x30ebb1[_0x484331(0x1ac)][_0x484331(0x1a1)];const _0x10ab15=WS_ENDPOINT['replace'](_0x3e8425[_0x484331(0x1ab)],_0x30ebb1[_0x484331(0x1ac)]['username'])[_0x484331(0x199)](_0x3e8425[_0x484331(0x1be)],_0x30ebb1[_0x484331(0x1ac)][_0x484331(0x1a1)]),_0x2001d3={};_0x2001d3[_0x484331(0x1a4)]=ws,_0x2001d3[_0x484331(0x1a9)]=0x36ee80,_0xf5d6b1=new ReconnectingWebSocket(_0x10ab15,[],_0x2001d3),logger[_0x484331(0x1b9)](_0x3e8425[_0x484331(0x1de)]),webSocketUtils['addListeners'](_0xf5d6b1,_0x49a3eb[_0x484331(0x1e1)],_0x49a3eb[_0x484331(0x1a1)]);const [_0x10023e,_0xce52ae]=await _0x3e8425['rOAHV'](getGridDetails,_0x30ebb1[_0x484331(0x1ac)][_0x484331(0x1c5)],_0x30ebb1['Browserstack'][_0x484331(0x1a1)],_0x49a3eb[_0x484331(0x1da)]);if(_0xce52ae){const _0x313f30=_0xce52ae[_0x484331(0x1f5)];global_registry[_0x484331(0x1a2)]=_0x313f30['cloudProvider'],global_registry['clusterRegion']=_0x313f30['region'],global_registry[_0x484331(0x1c4)]=_0x313f30['clusterName'];const _0x4d0753=await _0x3e8425['zVbGU'](getCloudProviderObject,_0x313f30[_0x484331(0x1a2)],_0x313f30[_0x484331(0x1c4)],_0x313f30[_0x484331(0x1ef)],_0xf5d6b1,webSocketUtils,_0x49a3eb),[_0x5ca554,_0xca5ea0,_0x209c38,_0x3f36f6,_0x38f15e,_0x1715a9]=await _0x3e8425['WWuct'](createK8sClient,_0x4d0753,_0x49a3eb[_0x484331(0x1e7)]);await _0x3e8425[_0x484331(0x1db)](scaleUpHubDeployment,_0xca5ea0,_0x313f30[_0x484331(0x1ef)]),logger[_0x484331(0x1f5)](_0x3e8425[_0x484331(0x19a)]),process[_0x484331(0x1e6)](0x0);}_0x3e8425['xQBdv'](_0x10023e[_0x484331(0x1e5)],0x191)&&(logger['error'](_0x3e8425[_0x484331(0x1ed)]),await _0x3e8425[_0x484331(0x1cf)](sendInstrumentationEvent,_0x49a3eb,_0x3e8425[_0x484331(0x1a5)],messageTypes[_0x484331(0x1bf)],_0x3e8425[_0x484331(0x19b)],null,_0x49a3eb),process['exit'](0x1)),_0x3e8425[_0x484331(0x1dc)](_0x10023e[_0x484331(0x1e5)],0x190)&&(logger[_0x484331(0x1b6)](JSON[_0x484331(0x1e0)](_0x10023e[_0x484331(0x1f4)])[_0x484331(0x1c6)]),await _0x3e8425[_0x484331(0x1f3)](sendInstrumentationEvent,_0x49a3eb,_0x3e8425[_0x484331(0x1a5)],messageTypes[_0x484331(0x1bf)],_0x3e8425[_0x484331(0x1d8)],null,_0x49a3eb),process[_0x484331(0x1e6)](0x1)),logger[_0x484331(0x1b6)](_0x484331(0x19e)+JSON[_0x484331(0x1cd)](_0x10023e)),await _0x3e8425['MMbsk'](sendInstrumentationEvent,_0x49a3eb,_0x3e8425[_0x484331(0x1a5)],messageTypes[_0x484331(0x1bf)],_0x3e8425[_0x484331(0x1a3)],_0x10023e,_0x49a3eb),process[_0x484331(0x1e6)](0x1);}catch(_0xada07c){const _0x3abab0=_0x484331(0x1bc)+_0xada07c+'\x20\x0a'+JSON[_0x484331(0x1cd)](_0xada07c[_0x484331(0x1c1)])+'\x20';logger['error'](_0x3abab0),process[_0x484331(0x1e6)](0x1);}};