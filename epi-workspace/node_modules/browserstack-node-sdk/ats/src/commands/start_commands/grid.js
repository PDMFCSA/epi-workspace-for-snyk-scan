const a19_0x22cc28=a19_0x4cbb;(function(_0xb0853c,_0x467fc8){const _0x3f4c73=a19_0x4cbb,_0x194e55=_0xb0853c();while(!![]){try{const _0x5840bb=parseInt(_0x3f4c73(0xee))/0x1+-parseInt(_0x3f4c73(0xe1))/0x2+parseInt(_0x3f4c73(0xf9))/0x3*(-parseInt(_0x3f4c73(0x128))/0x4)+-parseInt(_0x3f4c73(0xe3))/0x5*(-parseInt(_0x3f4c73(0xfb))/0x6)+parseInt(_0x3f4c73(0x102))/0x7+parseInt(_0x3f4c73(0xde))/0x8+-parseInt(_0x3f4c73(0x11b))/0x9;if(_0x5840bb===_0x467fc8)break;else _0x194e55['push'](_0x194e55['shift']());}catch(_0x3a1ae5){_0x194e55['push'](_0x194e55['shift']());}}}(a19_0x5281,0x538c6));function a19_0x5281(){const _0x25b2d1=['BryZL','Grid\x20started','error','argv','Starting\x20grid\x20','user','start-grid-called','dabFO','server-error','SdVwY','3876876iElNAg','reconnecting-websocket','invalid-grid-id','start','parse','help','VLcri','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','addListeners','replace','QydyW','info','../../config/constants','130708aTnwTR','unauthorised','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','gridId','../../utils/instrumentationUtils','region','IbMaf','cloudProvider','init-not-called','skipTlsCertVerify','clusterName','YUxOy','INFO','boolean','1982760fDmvKJ','<PasswordPlaceholder>','lPCOW','608510dduvnP','name','2320cGwKPn','exit','existsSync','Browserstack','WebSocket','grid','desc','password','VEETu','../../utils/createk8sClient','epilogue','643165oQWCTE','Adding\x20Websocket\x20listeners','imQoa','Start\x20an\x20existing\x20Automation\x20grid.','kZnha','../../config/logger','readFileSync','ERROR','username','description','zSKSR','27bmAYiE','string','1122LWPPjm','TNXin','yhBoa','builder','statusCode','LyrpZ','ctbJe','2754836bMnhEB','handler','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','BVmLt','UNCIN','../../cloudproviders/utils','fmwRd','HRgeR','../../utils/webSocketUtils','options','JBgNa','wDEBm','clusterRegion','usage','type'];a19_0x5281=function(){return _0x25b2d1;};return a19_0x5281();}function a19_0x4cbb(_0x2a56ab,_0x5e58a5){const _0x5281a7=a19_0x5281();return a19_0x4cbb=function(_0x4cbbed,_0x222b4e){_0x4cbbed=_0x4cbbed-0xd2;let _0x311017=_0x5281a7[_0x4cbbed];return _0x311017;},a19_0x4cbb(_0x2a56ab,_0x5e58a5);}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x22cc28(0x11c)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x22cc28(0x127)),{logger}=require(a19_0x22cc28(0xf3)),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleUpHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require(a19_0x22cc28(0xd4)),webSocketUtils=require(a19_0x22cc28(0x10a)),{createK8sClient}=require(a19_0x22cc28(0xec)),{getCloudProviderObject}=require(a19_0x22cc28(0x107));exports['command']=a19_0x22cc28(0xe8),exports[a19_0x22cc28(0xe9)]=a19_0x22cc28(0xf1),exports[a19_0x22cc28(0xfe)]=function(_0x199960){const _0x4bddad=a19_0x22cc28,_0x5a8086={};_0x5a8086['kdtQQ']=_0x4bddad(0x104),_0x5a8086[_0x4bddad(0x10c)]=_0x4bddad(0xfa),_0x5a8086[_0x4bddad(0xd6)]='Skip\x20insecure\x20cert\x20verification.',_0x5a8086[_0x4bddad(0x100)]=_0x4bddad(0xdd),_0x5a8086['SdVwY']=_0x4bddad(0x120);const _0x11bcd1=_0x5a8086,_0x4df59b={};_0x4df59b[_0x4bddad(0xf7)]=_0x11bcd1['kdtQQ'],_0x4df59b[_0x4bddad(0x110)]=_0x11bcd1['JBgNa'];const _0x3439da={};_0x3439da[_0x4bddad(0xf7)]=_0x11bcd1[_0x4bddad(0xd6)],_0x3439da[_0x4bddad(0x110)]=_0x11bcd1[_0x4bddad(0x100)],_0x3439da['default']=![];const _0x3532f9={};return _0x3532f9['grid-id']=_0x4df59b,_0x3532f9['skip-tls-cert-verify']=_0x3439da,_0x199960[_0x4bddad(0x10f)](HELP_HEADER_MESSAGE[_0x4bddad(0x11e)])[_0x4bddad(0xed)](HELP_FOOTER_MESSAGE)[_0x4bddad(0x10b)](_0x3532f9)[_0x4bddad(0x120)](_0x11bcd1[_0x4bddad(0x11a)])[_0x4bddad(0x114)];},exports[a19_0x22cc28(0x103)]=async function(_0x177383){const _0x2354fa=a19_0x22cc28,_0x4665d5={'wDEBm':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','BryZL':function(_0x5ca637){return _0x5ca637();},'lPCOW':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','mUmif':function(_0x8a0c5b,_0x505ca2,_0x147b70,_0x15a492,_0x4b41d0,_0x3e5bfb,_0x3a79d6){return _0x8a0c5b(_0x505ca2,_0x147b70,_0x15a492,_0x4b41d0,_0x3e5bfb,_0x3a79d6);},'UNCIN':_0x2354fa(0x117),'xpPlu':_0x2354fa(0xd8),'HRgeR':function(_0x189e00,_0x3eebfe,_0x16b231,_0x241f91,_0xddbe,_0x38ec9c,_0x531bb0){return _0x189e00(_0x3eebfe,_0x16b231,_0x241f91,_0xddbe,_0x38ec9c,_0x531bb0);},'BVmLt':function(_0x595dac){return _0x595dac();},'TNXin':'<UsernamePlaceholder>','yhBoa':_0x2354fa(0xdf),'ctbJe':_0x2354fa(0xef),'dabFO':function(_0x1e2a13,_0x5ed04a,_0x9d5108,_0x2dcd70){return _0x1e2a13(_0x5ed04a,_0x9d5108,_0x2dcd70);},'ALxsj':function(_0x491129,_0x9aad95,_0x3a9732){return _0x491129(_0x9aad95,_0x3a9732);},'QydyW':function(_0x5932a1,_0x4a112a,_0x60d43c){return _0x5932a1(_0x4a112a,_0x60d43c);},'VLcri':_0x2354fa(0x112),'fmwRd':function(_0x3d4c4f,_0x486ee7){return _0x3d4c4f===_0x486ee7;},'imQoa':_0x2354fa(0xd2),'jsjRE':function(_0x2d2354,_0x2c83de,_0x56306b,_0x2113a9,_0x36a08f,_0x39def2,_0x4b3970){return _0x2d2354(_0x2c83de,_0x56306b,_0x2113a9,_0x36a08f,_0x39def2,_0x4b3970);},'ufIfU':_0x2354fa(0x129),'zSKSR':function(_0x38a3c1,_0x40630,_0x4e5eee,_0x408a12,_0x11bd79,_0x1f6dc9,_0x51679e){return _0x38a3c1(_0x40630,_0x4e5eee,_0x408a12,_0x11bd79,_0x1f6dc9,_0x51679e);},'kZnha':_0x2354fa(0x11d),'YUxOy':function(_0x51acc5,_0x554b0c,_0x5f4b80,_0xd98b77,_0x325d6a,_0x5b3780,_0x562619){return _0x51acc5(_0x554b0c,_0x5f4b80,_0xd98b77,_0x325d6a,_0x5b3780,_0x562619);},'VEETu':_0x2354fa(0x119)};let _0x58f48f;try{!_0x177383['gridId']&&(logger['error'](_0x4665d5[_0x2354fa(0x10d)]),process[_0x2354fa(0xe4)](0x1));!fs[_0x2354fa(0xe5)](_0x4665d5[_0x2354fa(0x111)](getCredentialsPath))&&(logger[_0x2354fa(0x113)](_0x4665d5[_0x2354fa(0xe0)]),await _0x4665d5['mUmif'](sendInstrumentationEvent,_0x177383,_0x4665d5['UNCIN'],messageTypes[_0x2354fa(0xf5)],_0x4665d5['xpPlu'],null,_0x177383),process[_0x2354fa(0xe4)](0x1));logger[_0x2354fa(0x126)](_0x2354fa(0x115)+_0x177383[_0x2354fa(0xd3)]),await _0x4665d5[_0x2354fa(0x109)](sendInstrumentationEvent,_0x177383,_0x4665d5[_0x2354fa(0x106)],messageTypes[_0x2354fa(0xdc)],null,null,_0x177383);const _0x9b86ec=JSON[_0x2354fa(0x11f)](fs[_0x2354fa(0xf4)](_0x4665d5[_0x2354fa(0x105)](getCredentialsPath)));global_registry['bstackUsername']=_0x9b86ec[_0x2354fa(0xe6)][_0x2354fa(0xf6)],global_registry['bstackAccesskey']=_0x9b86ec[_0x2354fa(0xe6)][_0x2354fa(0xea)];const _0x43fbf2=WS_ENDPOINT[_0x2354fa(0x124)](_0x4665d5[_0x2354fa(0xfc)],_0x9b86ec['Browserstack'][_0x2354fa(0xf6)])[_0x2354fa(0x124)](_0x4665d5[_0x2354fa(0xfd)],_0x9b86ec[_0x2354fa(0xe6)][_0x2354fa(0xea)]),_0x26732b={};_0x26732b[_0x2354fa(0xe7)]=ws,_0x26732b['connectionTimeout']=0x36ee80,_0x58f48f=new ReconnectingWebSocket(_0x43fbf2,[],_0x26732b),logger['debug'](_0x4665d5[_0x2354fa(0x101)]),webSocketUtils[_0x2354fa(0x123)](_0x58f48f,_0x177383[_0x2354fa(0x116)],_0x177383[_0x2354fa(0xea)]);const [_0x3cca14,_0x351923]=await _0x4665d5[_0x2354fa(0x118)](getGridDetails,_0x9b86ec[_0x2354fa(0xe6)]['username'],_0x9b86ec[_0x2354fa(0xe6)][_0x2354fa(0xea)],_0x177383[_0x2354fa(0xd3)]);if(_0x351923){const _0x1121e9=_0x351923['info'];global_registry[_0x2354fa(0xd7)]=_0x1121e9[_0x2354fa(0xd7)],global_registry[_0x2354fa(0x10e)]=_0x1121e9[_0x2354fa(0xd5)],global_registry[_0x2354fa(0xda)]=_0x1121e9[_0x2354fa(0xda)];const _0xd81cae=await _0x4665d5[_0x2354fa(0x109)](getCloudProviderObject,_0x1121e9[_0x2354fa(0xd7)],_0x1121e9[_0x2354fa(0xda)],_0x1121e9[_0x2354fa(0xe2)],_0x58f48f,webSocketUtils,_0x177383),[_0x36cbdc,_0x28d802,_0x365435,_0xa1139f,_0x559d7b,_0x503a47]=await _0x4665d5['ALxsj'](createK8sClient,_0xd81cae,_0x177383[_0x2354fa(0xd9)]);await _0x4665d5[_0x2354fa(0x125)](scaleUpHubDeployment,_0x28d802,_0x1121e9[_0x2354fa(0xe2)]),logger[_0x2354fa(0x126)](_0x4665d5[_0x2354fa(0x121)]),process['exit'](0x0);}_0x4665d5[_0x2354fa(0x108)](_0x3cca14[_0x2354fa(0xff)],0x191)&&(logger[_0x2354fa(0x113)](_0x4665d5[_0x2354fa(0xf0)]),await _0x4665d5['jsjRE'](sendInstrumentationEvent,_0x177383,_0x4665d5[_0x2354fa(0x106)],messageTypes[_0x2354fa(0xf5)],_0x4665d5['ufIfU'],null,_0x177383),process[_0x2354fa(0xe4)](0x1)),_0x4665d5[_0x2354fa(0x108)](_0x3cca14[_0x2354fa(0xff)],0x190)&&(logger[_0x2354fa(0x113)](JSON[_0x2354fa(0x11f)](_0x3cca14['body'])['message']),await _0x4665d5[_0x2354fa(0xf8)](sendInstrumentationEvent,_0x177383,_0x4665d5[_0x2354fa(0x106)],messageTypes[_0x2354fa(0xf5)],_0x4665d5[_0x2354fa(0xf2)],null,_0x177383),process[_0x2354fa(0xe4)](0x1)),logger[_0x2354fa(0x113)](_0x2354fa(0x122)+JSON['stringify'](_0x3cca14)),await _0x4665d5[_0x2354fa(0xdb)](sendInstrumentationEvent,_0x177383,_0x4665d5[_0x2354fa(0x106)],messageTypes[_0x2354fa(0xf5)],_0x4665d5[_0x2354fa(0xeb)],_0x3cca14,_0x177383),process['exit'](0x1);}catch(_0x268f62){const _0xe4beb3='Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20'+_0x268f62+'\x20\x0a'+JSON['stringify'](_0x268f62['stack'])+'\x20';logger[_0x2354fa(0x113)](_0xe4beb3),process[_0x2354fa(0xe4)](0x1);}};