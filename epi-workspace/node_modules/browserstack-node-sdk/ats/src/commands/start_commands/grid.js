const a19_0x2f2745=a19_0x1b16;(function(_0x294f13,_0x1ee47d){const _0x24fcb7=a19_0x1b16,_0x2c7817=_0x294f13();while(!![]){try{const _0x2ccd97=-parseInt(_0x24fcb7(0x19a))/0x1+parseInt(_0x24fcb7(0x1c0))/0x2*(-parseInt(_0x24fcb7(0x196))/0x3)+parseInt(_0x24fcb7(0x1a4))/0x4+parseInt(_0x24fcb7(0x18c))/0x5*(parseInt(_0x24fcb7(0x194))/0x6)+-parseInt(_0x24fcb7(0x1b1))/0x7+-parseInt(_0x24fcb7(0x1d2))/0x8+-parseInt(_0x24fcb7(0x197))/0x9*(-parseInt(_0x24fcb7(0x1a6))/0xa);if(_0x2ccd97===_0x1ee47d)break;else _0x2c7817['push'](_0x2c7817['shift']());}catch(_0x42843b){_0x2c7817['push'](_0x2c7817['shift']());}}}(a19_0x16d2,0xcd853));function a19_0x1b16(_0x3b920d,_0x109d70){const _0x16d27f=a19_0x16d2();return a19_0x1b16=function(_0x1b1609,_0x1b9969){_0x1b1609=_0x1b1609-0x186;let _0x155a29=_0x16d27f[_0x1b1609];return _0x155a29;},a19_0x1b16(_0x3b920d,_0x109d70);}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x2f2745(0x189)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x2f2745(0x198)),{logger}=require(a19_0x2f2745(0x1a5)),{getCredentialsPath,getGridDetails}=require(a19_0x2f2745(0x19e)),{scaleUpHubDeployment}=require(a19_0x2f2745(0x1c3)),{sendInstrumentationEvent}=require(a19_0x2f2745(0x1cc)),webSocketUtils=require(a19_0x2f2745(0x19d)),{createK8sClient}=require(a19_0x2f2745(0x188)),{getCloudProviderObject}=require(a19_0x2f2745(0x1ab));function a19_0x16d2(){const _0x4a655b=['readFileSync','5935804TBrwln','clusterName','unauthorised','info','kFOhF','RRDaX','stack','yipzX','iXxYv','connectionTimeout','Qqxcu','MzIeO','<UsernamePlaceholder>','anBzu','vaXnc','64294iwsvoZ','grid-id','IZLTj','../../utils/gridComponents','boolean','exit','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','desc','ycvQB','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','parse','handler','../../utils/instrumentationUtils','body','debug','Grid\x20started','XYPOA','stringify','3721312sikayI','Start\x20an\x20existing\x20Automation\x20grid.','start','options','Adding\x20Websocket\x20listeners','default','description','message','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','OGaLg','bstackAccesskey','invalid-grid-id','ERROR','WebSocket','statusCode','error','eyWTu','help','ReQsB','type','skip-tls-cert-verify','ZCYBj','oulXw','UohNo','usage','../../utils/createk8sClient','reconnecting-websocket','init-not-called','ZVXLH','1180nsRtgw','start-grid-called','bhwoT','<PasswordPlaceholder>','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','QBWHc','username','replace','16686CoxMKY','region','15zHWJJx','6102yomUjE','../../config/constants','clusterRegion','1431158IfAkQq','user','wlTkk','../../utils/webSocketUtils','../../utils/utilityMethods','epilogue','server-error','MLjyl','gridId','cloudProvider','1215776UOXefO','../../config/logger','41100eMWFAz','argv','password','existsSync','coOTH','../../cloudproviders/utils','DJrRw','Browserstack','jPYzd','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!'];a19_0x16d2=function(){return _0x4a655b;};return a19_0x16d2();}exports['command']='grid',exports[a19_0x2f2745(0x1c7)]=a19_0x2f2745(0x1d3),exports['builder']=function(_0x371d65){const _0x2fdd2c=a19_0x2f2745,_0x317935={};_0x317935[_0x2fdd2c(0x1a1)]=_0x2fdd2c(0x1da),_0x317935[_0x2fdd2c(0x1e2)]='string',_0x317935[_0x2fdd2c(0x1e7)]='Skip\x20insecure\x20cert\x20verification.',_0x317935[_0x2fdd2c(0x1ae)]=_0x2fdd2c(0x1c4),_0x317935[_0x2fdd2c(0x191)]=_0x2fdd2c(0x1e3);const _0x4a36c3=_0x317935,_0x278b53={};_0x278b53[_0x2fdd2c(0x1d8)]=_0x4a36c3[_0x2fdd2c(0x1a1)],_0x278b53[_0x2fdd2c(0x1e5)]=_0x4a36c3['eyWTu'];const _0x1eee63={};_0x1eee63[_0x2fdd2c(0x1d8)]=_0x4a36c3[_0x2fdd2c(0x1e7)],_0x1eee63[_0x2fdd2c(0x1e5)]=_0x4a36c3[_0x2fdd2c(0x1ae)],_0x1eee63[_0x2fdd2c(0x1d7)]=![];const _0x35a6b1={};return _0x35a6b1[_0x2fdd2c(0x1c1)]=_0x278b53,_0x35a6b1[_0x2fdd2c(0x1e6)]=_0x1eee63,_0x371d65[_0x2fdd2c(0x187)](HELP_HEADER_MESSAGE[_0x2fdd2c(0x1d4)])[_0x2fdd2c(0x19f)](HELP_FOOTER_MESSAGE)[_0x2fdd2c(0x1d5)](_0x35a6b1)[_0x2fdd2c(0x1e3)](_0x4a36c3[_0x2fdd2c(0x191)])[_0x2fdd2c(0x1a7)];},exports[a19_0x2f2745(0x1cb)]=async function(_0x45a9f1){const _0x4b2bd8=a19_0x2f2745,_0x5f06b1={'IZLTj':_0x4b2bd8(0x190),'MzIeO':function(_0x892e7c){return _0x892e7c();},'ZVXLH':_0x4b2bd8(0x1c6),'kFOhF':function(_0x53c88f,_0x553762,_0x4d3e8b,_0x183a86,_0x1bab4e,_0x41de53,_0x49892f){return _0x53c88f(_0x553762,_0x4d3e8b,_0x183a86,_0x1bab4e,_0x41de53,_0x49892f);},'XYPOA':_0x4b2bd8(0x18d),'Qqxcu':_0x4b2bd8(0x18a),'yipzX':_0x4b2bd8(0x1bd),'ycvQB':_0x4b2bd8(0x18f),'UohNo':_0x4b2bd8(0x1d6),'wlTkk':function(_0x29d41a,_0xe31652,_0x1a5b0d,_0x5f3b37){return _0x29d41a(_0xe31652,_0x1a5b0d,_0x5f3b37);},'anBzu':function(_0x3e5c68,_0x4a1de3,_0x16acbb){return _0x3e5c68(_0x4a1de3,_0x16acbb);},'ReQsB':function(_0x421e44,_0x5259d1,_0x389483){return _0x421e44(_0x5259d1,_0x389483);},'DJrRw':_0x4b2bd8(0x1cf),'OGaLg':function(_0x30ede5,_0x3056f3){return _0x30ede5===_0x3056f3;},'oulXw':_0x4b2bd8(0x1af),'vaXnc':_0x4b2bd8(0x1b3),'coOTH':function(_0x3697fd,_0x361940,_0x131cf9,_0x28f424,_0x178f33,_0x35bf6d,_0x2c3948){return _0x3697fd(_0x361940,_0x131cf9,_0x28f424,_0x178f33,_0x35bf6d,_0x2c3948);},'bhwoT':_0x4b2bd8(0x1dd),'RRDaX':function(_0xd964b7,_0x59b51f,_0x3db663,_0x2f81bf,_0x478d65,_0x3e36c5,_0x35e810){return _0xd964b7(_0x59b51f,_0x3db663,_0x2f81bf,_0x478d65,_0x3e36c5,_0x35e810);},'iXxYv':_0x4b2bd8(0x1a0)};let _0x187915;try{!_0x45a9f1['gridId']&&(logger[_0x4b2bd8(0x1e1)](_0x5f06b1[_0x4b2bd8(0x1c2)]),process[_0x4b2bd8(0x1c5)](0x1));!fs[_0x4b2bd8(0x1a9)](_0x5f06b1['MzIeO'](getCredentialsPath))&&(logger[_0x4b2bd8(0x1e1)](_0x5f06b1[_0x4b2bd8(0x18b)]),await _0x5f06b1[_0x4b2bd8(0x1b5)](sendInstrumentationEvent,_0x45a9f1,_0x5f06b1[_0x4b2bd8(0x1d0)],messageTypes['ERROR'],_0x5f06b1[_0x4b2bd8(0x1bb)],null,_0x45a9f1),process['exit'](0x1));logger[_0x4b2bd8(0x1b4)]('Starting\x20grid\x20'+_0x45a9f1['gridId']),await _0x5f06b1[_0x4b2bd8(0x1b5)](sendInstrumentationEvent,_0x45a9f1,_0x5f06b1[_0x4b2bd8(0x1d0)],messageTypes['INFO'],null,null,_0x45a9f1);const _0x44393c=JSON[_0x4b2bd8(0x1ca)](fs[_0x4b2bd8(0x1b0)](_0x5f06b1[_0x4b2bd8(0x1bc)](getCredentialsPath)));global_registry['bstackUsername']=_0x44393c['Browserstack']['username'],global_registry[_0x4b2bd8(0x1dc)]=_0x44393c[_0x4b2bd8(0x1ad)][_0x4b2bd8(0x1a8)];const _0x40ffd0=WS_ENDPOINT[_0x4b2bd8(0x193)](_0x5f06b1[_0x4b2bd8(0x1b8)],_0x44393c[_0x4b2bd8(0x1ad)][_0x4b2bd8(0x192)])['replace'](_0x5f06b1[_0x4b2bd8(0x1c8)],_0x44393c[_0x4b2bd8(0x1ad)][_0x4b2bd8(0x1a8)]),_0x2f6254={};_0x2f6254[_0x4b2bd8(0x1df)]=ws,_0x2f6254[_0x4b2bd8(0x1ba)]=0x36ee80,_0x187915=new ReconnectingWebSocket(_0x40ffd0,[],_0x2f6254),logger[_0x4b2bd8(0x1ce)](_0x5f06b1[_0x4b2bd8(0x186)]),webSocketUtils['addListeners'](_0x187915,_0x45a9f1[_0x4b2bd8(0x19b)],_0x45a9f1[_0x4b2bd8(0x1a8)]);const [_0x2acbb4,_0x46995d]=await _0x5f06b1[_0x4b2bd8(0x19c)](getGridDetails,_0x44393c[_0x4b2bd8(0x1ad)][_0x4b2bd8(0x192)],_0x44393c['Browserstack']['password'],_0x45a9f1[_0x4b2bd8(0x1a2)]);if(_0x46995d){const _0x348712=_0x46995d[_0x4b2bd8(0x1b4)];global_registry['cloudProvider']=_0x348712[_0x4b2bd8(0x1a3)],global_registry[_0x4b2bd8(0x199)]=_0x348712[_0x4b2bd8(0x195)],global_registry[_0x4b2bd8(0x1b2)]=_0x348712[_0x4b2bd8(0x1b2)];const _0x38fd34=await _0x5f06b1['kFOhF'](getCloudProviderObject,_0x348712[_0x4b2bd8(0x1a3)],_0x348712[_0x4b2bd8(0x1b2)],_0x348712['name'],_0x187915,webSocketUtils,_0x45a9f1),[_0x18645f,_0x2b6eca,_0x36c587,_0x3bea9b,_0x37f683,_0x22631f]=await _0x5f06b1[_0x4b2bd8(0x1be)](createK8sClient,_0x38fd34,_0x45a9f1['skipTlsCertVerify']);await _0x5f06b1[_0x4b2bd8(0x1e4)](scaleUpHubDeployment,_0x2b6eca,_0x348712['name']),logger[_0x4b2bd8(0x1b4)](_0x5f06b1[_0x4b2bd8(0x1ac)]),process[_0x4b2bd8(0x1c5)](0x0);}_0x5f06b1['OGaLg'](_0x2acbb4[_0x4b2bd8(0x1e0)],0x191)&&(logger['error'](_0x5f06b1[_0x4b2bd8(0x1e8)]),await _0x5f06b1[_0x4b2bd8(0x1b5)](sendInstrumentationEvent,_0x45a9f1,_0x5f06b1[_0x4b2bd8(0x1d0)],messageTypes[_0x4b2bd8(0x1de)],_0x5f06b1[_0x4b2bd8(0x1bf)],null,_0x45a9f1),process['exit'](0x1)),_0x5f06b1[_0x4b2bd8(0x1db)](_0x2acbb4['statusCode'],0x190)&&(logger[_0x4b2bd8(0x1e1)](JSON[_0x4b2bd8(0x1ca)](_0x2acbb4[_0x4b2bd8(0x1cd)])[_0x4b2bd8(0x1d9)]),await _0x5f06b1[_0x4b2bd8(0x1aa)](sendInstrumentationEvent,_0x45a9f1,_0x5f06b1[_0x4b2bd8(0x1d0)],messageTypes[_0x4b2bd8(0x1de)],_0x5f06b1[_0x4b2bd8(0x18e)],null,_0x45a9f1),process[_0x4b2bd8(0x1c5)](0x1)),logger[_0x4b2bd8(0x1e1)](_0x4b2bd8(0x1c9)+JSON[_0x4b2bd8(0x1d1)](_0x2acbb4)),await _0x5f06b1[_0x4b2bd8(0x1b6)](sendInstrumentationEvent,_0x45a9f1,_0x5f06b1[_0x4b2bd8(0x1d0)],messageTypes[_0x4b2bd8(0x1de)],_0x5f06b1[_0x4b2bd8(0x1b9)],_0x2acbb4,_0x45a9f1),process[_0x4b2bd8(0x1c5)](0x1);}catch(_0x316259){const _0x4c1389='Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20'+_0x316259+'\x20\x0a'+JSON[_0x4b2bd8(0x1d1)](_0x316259[_0x4b2bd8(0x1b7)])+'\x20';logger[_0x4b2bd8(0x1e1)](_0x4c1389),process['exit'](0x1);}};