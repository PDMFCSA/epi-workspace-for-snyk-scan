const a19_0x4f3ef0=a19_0x2ee1;(function(_0x33410c,_0x5482c7){const _0x57febf=a19_0x2ee1,_0x3b319b=_0x33410c();while(!![]){try{const _0x1a144a=-parseInt(_0x57febf(0x14d))/0x1+-parseInt(_0x57febf(0x133))/0x2+-parseInt(_0x57febf(0x172))/0x3+-parseInt(_0x57febf(0x14b))/0x4+parseInt(_0x57febf(0x14c))/0x5*(-parseInt(_0x57febf(0x14e))/0x6)+parseInt(_0x57febf(0x15b))/0x7*(-parseInt(_0x57febf(0x123))/0x8)+parseInt(_0x57febf(0x17b))/0x9;if(_0x1a144a===_0x5482c7)break;else _0x3b319b['push'](_0x3b319b['shift']());}catch(_0x3963f9){_0x3b319b['push'](_0x3b319b['shift']());}}}(a19_0x306e,0xd1799));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x4f3ef0(0x182)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x4f3ef0(0x154)),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require(a19_0x4f3ef0(0x16f)),{scaleUpHubDeployment}=require(a19_0x4f3ef0(0x164)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require(a19_0x4f3ef0(0x17a)),{getCloudProviderObject}=require('../../cloudproviders/utils');function a19_0x306e(){const _0x4ecf73=['options','../../utils/gridComponents','error','password','debug','Grid\x20started','exit','jYgQE','region','help','nLhxj','FNTmL','../../utils/utilityMethods','INFO','default','2352093PDaNlE','Start\x20an\x20existing\x20Automation\x20grid.','XaWsY','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','server-error','cloudProvider','name','KlpqR','../../utils/createk8sClient','46334799qcuyrN','WebSocket','info','WNNnu','FEdtg','replace','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','reconnecting-websocket','8BuRgsW','BZBIm','ZAvTt','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','init-not-called','Skip\x20insecure\x20cert\x20verification.','command','unauthorised','argv','type','boolean','Starting\x20grid\x20','clusterName','epilogue','yTRBv','UElWI','715744cxrnPh','message','stack','handler','OFixO','usage','<PasswordPlaceholder>','user','grid','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','JqNPT','aFmEa','connectionTimeout','XYLfG','ERROR','start','JjYvJ','parse','readFileSync','Browserstack','clusterRegion','zDDWC','stringify','IldnK','3146420adbCxz','1009805RMrTcq','1588092zhtGCJ','18LKoEzl','gridId','LElPR','NNfwP','uXdoQ','string','../../config/constants','body','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','bstackUsername','username','AdmkX','addListeners','1174733SAGGXC','Adding\x20Websocket\x20listeners','builder','start-grid-called','invalid-grid-id','cRWou','udndb','nWRwC'];a19_0x306e=function(){return _0x4ecf73;};return a19_0x306e();}function a19_0x2ee1(_0x392af5,_0x2888cc){const _0x306e7d=a19_0x306e();return a19_0x2ee1=function(_0x2ee1ad,_0x3587f9){_0x2ee1ad=_0x2ee1ad-0x123;let _0x40a899=_0x306e7d[_0x2ee1ad];return _0x40a899;},a19_0x2ee1(_0x392af5,_0x2888cc);}exports[a19_0x4f3ef0(0x129)]=a19_0x4f3ef0(0x13b),exports['desc']=a19_0x4f3ef0(0x173),exports[a19_0x4f3ef0(0x15d)]=function(_0x4a7a7c){const _0x4645b0=a19_0x4f3ef0,_0x51aa75={};_0x51aa75[_0x4645b0(0x179)]=_0x4645b0(0x156),_0x51aa75[_0x4645b0(0x140)]=_0x4645b0(0x153),_0x51aa75[_0x4645b0(0x125)]=_0x4645b0(0x128),_0x51aa75[_0x4645b0(0x131)]=_0x4645b0(0x12d),_0x51aa75[_0x4645b0(0x16d)]=_0x4645b0(0x16c);const _0x36894d=_0x51aa75,_0x815e4a={};_0x815e4a['description']=_0x36894d[_0x4645b0(0x179)],_0x815e4a[_0x4645b0(0x12c)]=_0x36894d['XYLfG'];const _0x556bae={};_0x556bae['description']=_0x36894d[_0x4645b0(0x125)],_0x556bae[_0x4645b0(0x12c)]=_0x36894d[_0x4645b0(0x131)],_0x556bae[_0x4645b0(0x171)]=![];const _0x3921ab={};return _0x3921ab['grid-id']=_0x815e4a,_0x3921ab['skip-tls-cert-verify']=_0x556bae,_0x4a7a7c[_0x4645b0(0x138)](HELP_HEADER_MESSAGE[_0x4645b0(0x142)])[_0x4645b0(0x130)](HELP_FOOTER_MESSAGE)[_0x4645b0(0x163)](_0x3921ab)[_0x4645b0(0x16c)](_0x36894d[_0x4645b0(0x16d)])[_0x4645b0(0x12b)];},exports[a19_0x4f3ef0(0x136)]=async function(_0x11a250){const _0x3a8297=a19_0x4f3ef0,_0x1fa923={'XaWsY':_0x3a8297(0x13c),'WNNnu':function(_0x13fe0a){return _0x13fe0a();},'cGTah':_0x3a8297(0x126),'uXdoQ':function(_0x4e0693,_0x5ea21a,_0x121419,_0x16ff3b,_0x36aeda,_0x4e495f,_0x430018){return _0x4e0693(_0x5ea21a,_0x121419,_0x16ff3b,_0x36aeda,_0x4e495f,_0x430018);},'JqNPT':_0x3a8297(0x15e),'zDDWC':_0x3a8297(0x127),'BZBIm':function(_0x56e803,_0x22e47f,_0x5e5422,_0x4998ed,_0xa7b818,_0x146a50,_0x7f2405){return _0x56e803(_0x22e47f,_0x5e5422,_0x4998ed,_0xa7b818,_0x146a50,_0x7f2405);},'UElWI':'<UsernamePlaceholder>','FEdtg':_0x3a8297(0x139),'jYgQE':_0x3a8297(0x15c),'AdmkX':function(_0x1eddd0,_0x5ae8a5,_0x43f58d,_0x39a029){return _0x1eddd0(_0x5ae8a5,_0x43f58d,_0x39a029);},'nWRwC':function(_0x3cbeea,_0x153b3c,_0x4e9753){return _0x3cbeea(_0x153b3c,_0x4e9753);},'aFmEa':function(_0x210870,_0x3f87fd,_0x2d14d9){return _0x210870(_0x3f87fd,_0x2d14d9);},'udndb':_0x3a8297(0x168),'cRWou':function(_0xb56309,_0x97b4fc){return _0xb56309===_0x97b4fc;},'vAuZn':_0x3a8297(0x181),'JjYvJ':function(_0x1c9fc4,_0x3ed635,_0x5a3e4e,_0x563915,_0x549ed3,_0x113299,_0x259e35){return _0x1c9fc4(_0x3ed635,_0x5a3e4e,_0x563915,_0x549ed3,_0x113299,_0x259e35);},'NNfwP':_0x3a8297(0x12a),'gUPUX':function(_0x4a2d46,_0x2f7cdb){return _0x4a2d46===_0x2f7cdb;},'OFixO':function(_0x42fb81,_0x2e6bd2,_0x566f6a,_0x2e5fe8,_0x4188b9,_0xaae9aa,_0x5e2ce6){return _0x42fb81(_0x2e6bd2,_0x566f6a,_0x2e5fe8,_0x4188b9,_0xaae9aa,_0x5e2ce6);},'LElPR':_0x3a8297(0x15f),'IldnK':function(_0x5a3cac,_0x494481,_0x5b9bdf,_0x1ea5c0,_0x52331f,_0x9358b6,_0x5aa274){return _0x5a3cac(_0x494481,_0x5b9bdf,_0x1ea5c0,_0x52331f,_0x9358b6,_0x5aa274);},'FNTmL':_0x3a8297(0x176)};let _0x4103f2;try{!_0x11a250[_0x3a8297(0x14f)]&&(logger[_0x3a8297(0x165)](_0x1fa923[_0x3a8297(0x174)]),process[_0x3a8297(0x169)](0x1));!fs['existsSync'](_0x1fa923['WNNnu'](getCredentialsPath))&&(logger[_0x3a8297(0x165)](_0x1fa923['cGTah']),await _0x1fa923[_0x3a8297(0x152)](sendInstrumentationEvent,_0x11a250,_0x1fa923[_0x3a8297(0x13d)],messageTypes[_0x3a8297(0x141)],_0x1fa923[_0x3a8297(0x148)],null,_0x11a250),process[_0x3a8297(0x169)](0x1));logger['info'](_0x3a8297(0x12e)+_0x11a250[_0x3a8297(0x14f)]),await _0x1fa923[_0x3a8297(0x124)](sendInstrumentationEvent,_0x11a250,_0x1fa923['JqNPT'],messageTypes[_0x3a8297(0x170)],null,null,_0x11a250);const _0x34ae82=JSON[_0x3a8297(0x144)](fs[_0x3a8297(0x145)](_0x1fa923[_0x3a8297(0x17e)](getCredentialsPath)));global_registry[_0x3a8297(0x157)]=_0x34ae82[_0x3a8297(0x146)]['username'],global_registry['bstackAccesskey']=_0x34ae82[_0x3a8297(0x146)]['password'];const _0x55c007=WS_ENDPOINT[_0x3a8297(0x180)](_0x1fa923[_0x3a8297(0x132)],_0x34ae82[_0x3a8297(0x146)][_0x3a8297(0x158)])[_0x3a8297(0x180)](_0x1fa923[_0x3a8297(0x17f)],_0x34ae82['Browserstack'][_0x3a8297(0x166)]),_0x70590e={};_0x70590e[_0x3a8297(0x17c)]=ws,_0x70590e[_0x3a8297(0x13f)]=0x36ee80,_0x4103f2=new ReconnectingWebSocket(_0x55c007,[],_0x70590e),logger[_0x3a8297(0x167)](_0x1fa923[_0x3a8297(0x16a)]),webSocketUtils[_0x3a8297(0x15a)](_0x4103f2,_0x11a250[_0x3a8297(0x13a)],_0x11a250[_0x3a8297(0x166)]);const [_0x2c8034,_0x1998d1]=await _0x1fa923[_0x3a8297(0x159)](getGridDetails,_0x34ae82[_0x3a8297(0x146)][_0x3a8297(0x158)],_0x34ae82[_0x3a8297(0x146)][_0x3a8297(0x166)],_0x11a250['gridId']);if(_0x1998d1){const _0x5aa4c9=_0x1998d1[_0x3a8297(0x17d)];global_registry[_0x3a8297(0x177)]=_0x5aa4c9[_0x3a8297(0x177)],global_registry[_0x3a8297(0x147)]=_0x5aa4c9[_0x3a8297(0x16b)],global_registry[_0x3a8297(0x12f)]=_0x5aa4c9[_0x3a8297(0x12f)];const _0x32b855=await _0x1fa923[_0x3a8297(0x124)](getCloudProviderObject,_0x5aa4c9[_0x3a8297(0x177)],_0x5aa4c9[_0x3a8297(0x12f)],_0x5aa4c9[_0x3a8297(0x178)],_0x4103f2,webSocketUtils,_0x11a250),[_0x3c1b19,_0x346970,_0x40d44b,_0x3b3086,_0xf87dd,_0x305d0f]=await _0x1fa923[_0x3a8297(0x162)](createK8sClient,_0x32b855,_0x11a250['skipTlsCertVerify']);await _0x1fa923[_0x3a8297(0x13e)](scaleUpHubDeployment,_0x346970,_0x5aa4c9['name']),logger['info'](_0x1fa923[_0x3a8297(0x161)]),process['exit'](0x0);}_0x1fa923[_0x3a8297(0x160)](_0x2c8034['statusCode'],0x191)&&(logger[_0x3a8297(0x165)](_0x1fa923['vAuZn']),await _0x1fa923[_0x3a8297(0x143)](sendInstrumentationEvent,_0x11a250,_0x1fa923[_0x3a8297(0x13d)],messageTypes[_0x3a8297(0x141)],_0x1fa923[_0x3a8297(0x151)],null,_0x11a250),process[_0x3a8297(0x169)](0x1)),_0x1fa923['gUPUX'](_0x2c8034['statusCode'],0x190)&&(logger[_0x3a8297(0x165)](JSON[_0x3a8297(0x144)](_0x2c8034[_0x3a8297(0x155)])[_0x3a8297(0x134)]),await _0x1fa923[_0x3a8297(0x137)](sendInstrumentationEvent,_0x11a250,_0x1fa923[_0x3a8297(0x13d)],messageTypes[_0x3a8297(0x141)],_0x1fa923[_0x3a8297(0x150)],null,_0x11a250),process[_0x3a8297(0x169)](0x1)),logger[_0x3a8297(0x165)]('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON[_0x3a8297(0x149)](_0x2c8034)),await _0x1fa923[_0x3a8297(0x14a)](sendInstrumentationEvent,_0x11a250,_0x1fa923[_0x3a8297(0x13d)],messageTypes[_0x3a8297(0x141)],_0x1fa923[_0x3a8297(0x16e)],_0x2c8034,_0x11a250),process[_0x3a8297(0x169)](0x1);}catch(_0x460940){const _0x5aa0ac=_0x3a8297(0x175)+_0x460940+'\x20\x0a'+JSON[_0x3a8297(0x149)](_0x460940[_0x3a8297(0x135)])+'\x20';logger[_0x3a8297(0x165)](_0x5aa0ac),process[_0x3a8297(0x169)](0x1);}};