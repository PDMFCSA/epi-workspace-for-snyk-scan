const a19_0x2131eb=a19_0x347d;function a19_0x347d(_0x463157,_0x11dd17){const _0x4f9164=a19_0x4f91();return a19_0x347d=function(_0x347d4f,_0xbf0100){_0x347d4f=_0x347d4f-0x1c7;let _0x484940=_0x4f9164[_0x347d4f];return _0x484940;},a19_0x347d(_0x463157,_0x11dd17);}(function(_0x3901b2,_0x1288cd){const _0x3e7e2a=a19_0x347d,_0x2636cd=_0x3901b2();while(!![]){try{const _0x534331=parseInt(_0x3e7e2a(0x1cc))/0x1+parseInt(_0x3e7e2a(0x1d0))/0x2+parseInt(_0x3e7e2a(0x1f1))/0x3*(-parseInt(_0x3e7e2a(0x1e4))/0x4)+-parseInt(_0x3e7e2a(0x1dd))/0x5*(-parseInt(_0x3e7e2a(0x1e8))/0x6)+-parseInt(_0x3e7e2a(0x1e0))/0x7+parseInt(_0x3e7e2a(0x1fd))/0x8+-parseInt(_0x3e7e2a(0x1fa))/0x9;if(_0x534331===_0x1288cd)break;else _0x2636cd['push'](_0x2636cd['shift']());}catch(_0x3350a5){_0x2636cd['push'](_0x2636cd['shift']());}}}(a19_0x4f91,0xb0220));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x2131eb(0x1f0)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x2131eb(0x218)),{logger}=require(a19_0x2131eb(0x1d6)),{getCredentialsPath,getGridDetails}=require(a19_0x2131eb(0x1ea)),{scaleUpHubDeployment}=require(a19_0x2131eb(0x221)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require(a19_0x2131eb(0x210)),{createK8sClient}=require(a19_0x2131eb(0x213)),{getCloudProviderObject}=require(a19_0x2131eb(0x1db));function a19_0x4f91(){const _0x47e592=['connectionTimeout','2464352gfZNfs','hBWgK','gridId','existsSync','desc','Browserstack','BiAYG','Skip\x20insecure\x20cert\x20verification.','help','INFO','name','Adding\x20Websocket\x20listeners','start-grid-called','exit','acMlS','server-error','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','Starting\x20grid\x20','IEuvA','../../utils/webSocketUtils','addListeners','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','../../utils/createk8sClient','stack','unauthorised','<UsernamePlaceholder>','password','../../config/constants','Start\x20an\x20existing\x20Automation\x20grid.','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','PsGmE','KHEGF','string','kWIyq','start','bXYoi','../../utils/gridComponents','username','init-not-called','error','command','statusCode','881934oypQmC','readFileSync','kAQnv','clusterName','1637578oFfvTV','info','invalid-grid-id','<PasswordPlaceholder>','grid','cloudProvider','../../config/logger','type','usage','DuUVN','argv','../../cloudproviders/utils','GLpaW','50kPJLAi','NhQGA','nfywN','9142427mljtQQ','parse','bstackUsername','nYTtR','4vSDxyi','ksYAb','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','QTeLL','605700DDexkZ','OnbQa','../../utils/utilityMethods','WebSocket','epilogue','description','user','replace','reconnecting-websocket','1215567XFGAkZ','boolean','Grid\x20started','stringify','skipTlsCertVerify','skip-tls-cert-verify','ERROR','builder','handler','5270193qKsUJX','debug'];a19_0x4f91=function(){return _0x47e592;};return a19_0x4f91();}exports[a19_0x2131eb(0x1ca)]=a19_0x2131eb(0x1d4),exports[a19_0x2131eb(0x201)]=a19_0x2131eb(0x219),exports[a19_0x2131eb(0x1f8)]=function(_0xa6b17){const _0x35ae85=a19_0x2131eb,_0x5ca6e9={};_0x5ca6e9[_0x35ae85(0x1e9)]=_0x35ae85(0x1e6),_0x5ca6e9['ksYAb']=_0x35ae85(0x21d),_0x5ca6e9[_0x35ae85(0x20b)]=_0x35ae85(0x204),_0x5ca6e9[_0x35ae85(0x1ce)]=_0x35ae85(0x1f2),_0x5ca6e9[_0x35ae85(0x220)]=_0x35ae85(0x205);const _0x330680=_0x5ca6e9,_0x11ba07={};_0x11ba07['description']=_0x330680['OnbQa'],_0x11ba07['type']=_0x330680[_0x35ae85(0x1e5)];const _0x54058a={};_0x54058a[_0x35ae85(0x1ed)]=_0x330680[_0x35ae85(0x20b)],_0x54058a[_0x35ae85(0x1d7)]=_0x330680[_0x35ae85(0x1ce)],_0x54058a['default']=![];const _0x546856={};return _0x546856['grid-id']=_0x11ba07,_0x546856[_0x35ae85(0x1f6)]=_0x54058a,_0xa6b17[_0x35ae85(0x1d8)](HELP_HEADER_MESSAGE[_0x35ae85(0x21f)])[_0x35ae85(0x1ec)](HELP_FOOTER_MESSAGE)['options'](_0x546856)[_0x35ae85(0x205)](_0x330680[_0x35ae85(0x220)])[_0x35ae85(0x1da)];},exports[a19_0x2131eb(0x1f9)]=async function(_0x5d6644){const _0x2e9cf8=a19_0x2131eb,_0x353dbf={'nfywN':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','nYTtR':function(_0x4dbda0){return _0x4dbda0();},'TiyDs':_0x2e9cf8(0x20d),'KHEGF':function(_0x588755,_0x2c578c,_0x45ebee,_0x438f0b,_0x33ca93,_0x493b62,_0x95e3fb){return _0x588755(_0x2c578c,_0x45ebee,_0x438f0b,_0x33ca93,_0x493b62,_0x95e3fb);},'kWIyq':_0x2e9cf8(0x209),'DuUVN':_0x2e9cf8(0x1c8),'wlNWI':function(_0x358799){return _0x358799();},'jYqoj':_0x2e9cf8(0x216),'kXJJu':_0x2e9cf8(0x1d3),'WsIBZ':_0x2e9cf8(0x208),'xwRRZ':function(_0x8bc96a,_0x4d1073,_0x3101da,_0x3bb6cd){return _0x8bc96a(_0x4d1073,_0x3101da,_0x3bb6cd);},'NhQGA':function(_0x3c8858,_0x401c84,_0x8934d){return _0x3c8858(_0x401c84,_0x8934d);},'BiAYG':_0x2e9cf8(0x1f3),'PsGmE':function(_0xd3a598,_0x5cd81b){return _0xd3a598===_0x5cd81b;},'GLpaW':_0x2e9cf8(0x212),'hBWgK':_0x2e9cf8(0x215),'NrhLu':_0x2e9cf8(0x1d2),'QTeLL':function(_0x412996,_0x7fd322,_0x2979d6,_0x4b96b1,_0x5f1c03,_0x49c78e,_0x19fe6a){return _0x412996(_0x7fd322,_0x2979d6,_0x4b96b1,_0x5f1c03,_0x49c78e,_0x19fe6a);},'IEuvA':_0x2e9cf8(0x20c)};let _0x9b824f;try{!_0x5d6644[_0x2e9cf8(0x1ff)]&&(logger['error'](_0x353dbf[_0x2e9cf8(0x1df)]),process[_0x2e9cf8(0x20a)](0x1));!fs[_0x2e9cf8(0x200)](_0x353dbf[_0x2e9cf8(0x1e3)](getCredentialsPath))&&(logger[_0x2e9cf8(0x1c9)](_0x353dbf['TiyDs']),await _0x353dbf[_0x2e9cf8(0x21c)](sendInstrumentationEvent,_0x5d6644,_0x353dbf[_0x2e9cf8(0x21e)],messageTypes[_0x2e9cf8(0x1f7)],_0x353dbf[_0x2e9cf8(0x1d9)],null,_0x5d6644),process['exit'](0x1));logger['info'](_0x2e9cf8(0x20e)+_0x5d6644[_0x2e9cf8(0x1ff)]),await _0x353dbf[_0x2e9cf8(0x21c)](sendInstrumentationEvent,_0x5d6644,_0x353dbf[_0x2e9cf8(0x21e)],messageTypes[_0x2e9cf8(0x206)],null,null,_0x5d6644);const _0x1c8a34=JSON[_0x2e9cf8(0x1e1)](fs[_0x2e9cf8(0x1cd)](_0x353dbf['wlNWI'](getCredentialsPath)));global_registry[_0x2e9cf8(0x1e2)]=_0x1c8a34['Browserstack'][_0x2e9cf8(0x1c7)],global_registry['bstackAccesskey']=_0x1c8a34[_0x2e9cf8(0x202)][_0x2e9cf8(0x217)];const _0x513f54=WS_ENDPOINT[_0x2e9cf8(0x1ef)](_0x353dbf['jYqoj'],_0x1c8a34['Browserstack'][_0x2e9cf8(0x1c7)])[_0x2e9cf8(0x1ef)](_0x353dbf['kXJJu'],_0x1c8a34[_0x2e9cf8(0x202)][_0x2e9cf8(0x217)]),_0x5c7352={};_0x5c7352[_0x2e9cf8(0x1eb)]=ws,_0x5c7352[_0x2e9cf8(0x1fc)]=0x36ee80,_0x9b824f=new ReconnectingWebSocket(_0x513f54,[],_0x5c7352),logger[_0x2e9cf8(0x1fb)](_0x353dbf['WsIBZ']),webSocketUtils[_0x2e9cf8(0x211)](_0x9b824f,_0x5d6644[_0x2e9cf8(0x1ee)],_0x5d6644[_0x2e9cf8(0x217)]);const [_0x20baeb,_0x29510f]=await _0x353dbf['xwRRZ'](getGridDetails,_0x1c8a34['Browserstack']['username'],_0x1c8a34[_0x2e9cf8(0x202)][_0x2e9cf8(0x217)],_0x5d6644[_0x2e9cf8(0x1ff)]);if(_0x29510f){const _0x305c12=_0x29510f[_0x2e9cf8(0x1d1)];global_registry['cloudProvider']=_0x305c12[_0x2e9cf8(0x1d5)],global_registry['clusterRegion']=_0x305c12['region'],global_registry['clusterName']=_0x305c12[_0x2e9cf8(0x1cf)];const _0x4078e5=await _0x353dbf[_0x2e9cf8(0x21c)](getCloudProviderObject,_0x305c12['cloudProvider'],_0x305c12[_0x2e9cf8(0x1cf)],_0x305c12['name'],_0x9b824f,webSocketUtils,_0x5d6644),[_0x583165,_0x3d27bf,_0x60e41c,_0x2048f8,_0x1d19c4,_0x294130]=await _0x353dbf[_0x2e9cf8(0x1de)](createK8sClient,_0x4078e5,_0x5d6644[_0x2e9cf8(0x1f5)]);await _0x353dbf[_0x2e9cf8(0x1de)](scaleUpHubDeployment,_0x3d27bf,_0x305c12[_0x2e9cf8(0x207)]),logger[_0x2e9cf8(0x1d1)](_0x353dbf[_0x2e9cf8(0x203)]),process['exit'](0x0);}_0x353dbf[_0x2e9cf8(0x21b)](_0x20baeb['statusCode'],0x191)&&(logger[_0x2e9cf8(0x1c9)](_0x353dbf[_0x2e9cf8(0x1dc)]),await _0x353dbf['KHEGF'](sendInstrumentationEvent,_0x5d6644,_0x353dbf[_0x2e9cf8(0x21e)],messageTypes[_0x2e9cf8(0x1f7)],_0x353dbf[_0x2e9cf8(0x1fe)],null,_0x5d6644),process['exit'](0x1)),_0x353dbf[_0x2e9cf8(0x21b)](_0x20baeb[_0x2e9cf8(0x1cb)],0x190)&&(logger[_0x2e9cf8(0x1c9)](JSON[_0x2e9cf8(0x1e1)](_0x20baeb['body'])['message']),await _0x353dbf['KHEGF'](sendInstrumentationEvent,_0x5d6644,_0x353dbf[_0x2e9cf8(0x21e)],messageTypes['ERROR'],_0x353dbf['NrhLu'],null,_0x5d6644),process['exit'](0x1)),logger[_0x2e9cf8(0x1c9)](_0x2e9cf8(0x21a)+JSON[_0x2e9cf8(0x1f4)](_0x20baeb)),await _0x353dbf[_0x2e9cf8(0x1e7)](sendInstrumentationEvent,_0x5d6644,_0x353dbf[_0x2e9cf8(0x21e)],messageTypes[_0x2e9cf8(0x1f7)],_0x353dbf[_0x2e9cf8(0x20f)],_0x20baeb,_0x5d6644),process[_0x2e9cf8(0x20a)](0x1);}catch(_0x2e6f5c){const _0x167031='Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20'+_0x2e6f5c+'\x20\x0a'+JSON['stringify'](_0x2e6f5c[_0x2e9cf8(0x214)])+'\x20';logger[_0x2e9cf8(0x1c9)](_0x167031),process['exit'](0x1);}};