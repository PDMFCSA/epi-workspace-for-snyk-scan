const a19_0x57677c=a19_0x42c5;(function(_0x4eaf4c,_0x252a75){const _0x171b05=a19_0x42c5,_0x4b1b28=_0x4eaf4c();while(!![]){try{const _0x5d4325=parseInt(_0x171b05(0x14c))/0x1+parseInt(_0x171b05(0x16a))/0x2+parseInt(_0x171b05(0x139))/0x3*(-parseInt(_0x171b05(0x149))/0x4)+parseInt(_0x171b05(0x16c))/0x5*(-parseInt(_0x171b05(0x15e))/0x6)+-parseInt(_0x171b05(0x15d))/0x7*(parseInt(_0x171b05(0x175))/0x8)+parseInt(_0x171b05(0x145))/0x9+-parseInt(_0x171b05(0x11e))/0xa*(-parseInt(_0x171b05(0x121))/0xb);if(_0x5d4325===_0x252a75)break;else _0x4b1b28['push'](_0x4b1b28['shift']());}catch(_0x5ca424){_0x4b1b28['push'](_0x4b1b28['shift']());}}}(a19_0x46d2,0xf1441));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x57677c(0x166)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x57677c(0x156)),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require(a19_0x57677c(0x126)),{scaleUpHubDeployment}=require(a19_0x57677c(0x122)),{sendInstrumentationEvent}=require(a19_0x57677c(0x151)),webSocketUtils=require(a19_0x57677c(0x16f)),{createK8sClient}=require(a19_0x57677c(0x137)),{getCloudProviderObject}=require(a19_0x57677c(0x120));exports['command']='grid',exports[a19_0x57677c(0x16e)]=a19_0x57677c(0x14a),exports[a19_0x57677c(0x16b)]=function(_0x2e1918){const _0x3d0ccc=a19_0x57677c,_0x22ced9={};_0x22ced9[_0x3d0ccc(0x11c)]=_0x3d0ccc(0x153),_0x22ced9['atoyS']=_0x3d0ccc(0x160),_0x22ced9[_0x3d0ccc(0x172)]=_0x3d0ccc(0x138),_0x22ced9[_0x3d0ccc(0x164)]=_0x3d0ccc(0x11b),_0x22ced9['oGqmt']=_0x3d0ccc(0x155);const _0x424c05=_0x22ced9,_0x19e458={};_0x19e458[_0x3d0ccc(0x143)]=_0x424c05[_0x3d0ccc(0x11c)],_0x19e458[_0x3d0ccc(0x140)]=_0x424c05['atoyS'];const _0x57014c={};_0x57014c[_0x3d0ccc(0x143)]=_0x424c05['zdnep'],_0x57014c[_0x3d0ccc(0x140)]=_0x424c05['ebyGm'],_0x57014c[_0x3d0ccc(0x13c)]=![];const _0x2f5ff2={};return _0x2f5ff2['grid-id']=_0x19e458,_0x2f5ff2[_0x3d0ccc(0x173)]=_0x57014c,_0x2e1918[_0x3d0ccc(0x12a)](HELP_HEADER_MESSAGE['start'])[_0x3d0ccc(0x13d)](HELP_FOOTER_MESSAGE)[_0x3d0ccc(0x15b)](_0x2f5ff2)[_0x3d0ccc(0x155)](_0x424c05['oGqmt'])[_0x3d0ccc(0x130)];},exports[a19_0x57677c(0x135)]=async function(_0x214a77){const _0x2967a2=a19_0x57677c,_0x497884={'SwtsD':_0x2967a2(0x146),'ZoIip':function(_0x491ba5){return _0x491ba5();},'rnTNZ':_0x2967a2(0x163),'qdulc':function(_0x468ef3,_0x22d0a6,_0x200583,_0x20182e,_0x3fbd9e,_0x196b35,_0x26ea31){return _0x468ef3(_0x22d0a6,_0x200583,_0x20182e,_0x3fbd9e,_0x196b35,_0x26ea31);},'CnhhH':_0x2967a2(0x13f),'UkCXz':_0x2967a2(0x12c),'evFbK':function(_0x1e0c07,_0x4cec94,_0x4e9da5,_0x3f2a15,_0x9f0a6c,_0xbf09c9,_0x2bcf00){return _0x1e0c07(_0x4cec94,_0x4e9da5,_0x3f2a15,_0x9f0a6c,_0xbf09c9,_0x2bcf00);},'MRAKL':'<UsernamePlaceholder>','wCrfH':_0x2967a2(0x165),'PvHJs':_0x2967a2(0x14d),'hcdiS':function(_0x27d0a6,_0x38a70f,_0x5d041a,_0x28f74a){return _0x27d0a6(_0x38a70f,_0x5d041a,_0x28f74a);},'PEqEz':function(_0x282c61,_0x3eb4a1,_0x126fd1){return _0x282c61(_0x3eb4a1,_0x126fd1);},'vSClL':_0x2967a2(0x152),'KLanM':function(_0x2702a3,_0x4da7be){return _0x2702a3===_0x4da7be;},'GtoBW':_0x2967a2(0x12d),'AVLZp':_0x2967a2(0x11f),'eFGIG':function(_0x3902f2,_0x1bea07){return _0x3902f2===_0x1bea07;},'JaYFY':'invalid-grid-id','bTIao':_0x2967a2(0x129)};let _0x4e34ec;try{!_0x214a77[_0x2967a2(0x171)]&&(logger[_0x2967a2(0x148)](_0x497884['SwtsD']),process[_0x2967a2(0x15f)](0x1));!fs[_0x2967a2(0x147)](_0x497884[_0x2967a2(0x123)](getCredentialsPath))&&(logger[_0x2967a2(0x148)](_0x497884[_0x2967a2(0x133)]),await _0x497884[_0x2967a2(0x144)](sendInstrumentationEvent,_0x214a77,_0x497884[_0x2967a2(0x13e)],messageTypes[_0x2967a2(0x142)],_0x497884[_0x2967a2(0x11d)],null,_0x214a77),process[_0x2967a2(0x15f)](0x1));logger['info'](_0x2967a2(0x134)+_0x214a77['gridId']),await _0x497884[_0x2967a2(0x136)](sendInstrumentationEvent,_0x214a77,_0x497884[_0x2967a2(0x13e)],messageTypes[_0x2967a2(0x125)],null,null,_0x214a77);const _0x5566e7=JSON['parse'](fs[_0x2967a2(0x162)](_0x497884[_0x2967a2(0x123)](getCredentialsPath)));global_registry[_0x2967a2(0x169)]=_0x5566e7[_0x2967a2(0x132)]['username'],global_registry[_0x2967a2(0x16d)]=_0x5566e7[_0x2967a2(0x132)]['password'];const _0x479286=WS_ENDPOINT[_0x2967a2(0x141)](_0x497884[_0x2967a2(0x12e)],_0x5566e7[_0x2967a2(0x132)][_0x2967a2(0x159)])[_0x2967a2(0x141)](_0x497884['wCrfH'],_0x5566e7[_0x2967a2(0x132)][_0x2967a2(0x13b)]),_0x4babf4={};_0x4babf4[_0x2967a2(0x12b)]=ws,_0x4babf4[_0x2967a2(0x167)]=0x36ee80,_0x4e34ec=new ReconnectingWebSocket(_0x479286,[],_0x4babf4),logger[_0x2967a2(0x168)](_0x497884[_0x2967a2(0x127)]),webSocketUtils['addListeners'](_0x4e34ec,_0x214a77['user'],_0x214a77['password']);const [_0x500e73,_0x4f1ce1]=await _0x497884[_0x2967a2(0x13a)](getGridDetails,_0x5566e7[_0x2967a2(0x132)]['username'],_0x5566e7[_0x2967a2(0x132)]['password'],_0x214a77['gridId']);if(_0x4f1ce1){const _0x8f2d13=_0x4f1ce1[_0x2967a2(0x174)];global_registry[_0x2967a2(0x154)]=_0x8f2d13['cloudProvider'],global_registry[_0x2967a2(0x14b)]=_0x8f2d13[_0x2967a2(0x131)],global_registry[_0x2967a2(0x14e)]=_0x8f2d13['clusterName'];const _0x1ee47d=await _0x497884[_0x2967a2(0x136)](getCloudProviderObject,_0x8f2d13[_0x2967a2(0x154)],_0x8f2d13[_0x2967a2(0x14e)],_0x8f2d13[_0x2967a2(0x157)],_0x4e34ec,webSocketUtils,_0x214a77),[_0x56ab9e,_0x1eaaf3,_0x31e7de,_0x1e9e0b,_0x28599b,_0x527fd1]=await _0x497884['PEqEz'](createK8sClient,_0x1ee47d,_0x214a77['skipTlsCertVerify']);await _0x497884[_0x2967a2(0x161)](scaleUpHubDeployment,_0x1eaaf3,_0x8f2d13['name']),logger[_0x2967a2(0x174)](_0x497884[_0x2967a2(0x150)]),process['exit'](0x0);}_0x497884[_0x2967a2(0x15a)](_0x500e73['statusCode'],0x191)&&(logger['error'](_0x497884[_0x2967a2(0x170)]),await _0x497884['qdulc'](sendInstrumentationEvent,_0x214a77,_0x497884[_0x2967a2(0x13e)],messageTypes['ERROR'],_0x497884[_0x2967a2(0x176)],null,_0x214a77),process[_0x2967a2(0x15f)](0x1)),_0x497884[_0x2967a2(0x14f)](_0x500e73['statusCode'],0x190)&&(logger[_0x2967a2(0x148)](JSON[_0x2967a2(0x158)](_0x500e73['body'])[_0x2967a2(0x124)]),await _0x497884[_0x2967a2(0x136)](sendInstrumentationEvent,_0x214a77,_0x497884[_0x2967a2(0x13e)],messageTypes[_0x2967a2(0x142)],_0x497884[_0x2967a2(0x128)],null,_0x214a77),process[_0x2967a2(0x15f)](0x1)),logger[_0x2967a2(0x148)](_0x2967a2(0x12f)+JSON[_0x2967a2(0x15c)](_0x500e73)),await _0x497884[_0x2967a2(0x136)](sendInstrumentationEvent,_0x214a77,_0x497884[_0x2967a2(0x13e)],messageTypes['ERROR'],_0x497884['bTIao'],_0x500e73,_0x214a77),process['exit'](0x1);}catch(_0x1d1f8d){const _0x43ec2f='Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20'+_0x1d1f8d+'\x20\x0a'+JSON[_0x2967a2(0x15c)](_0x1d1f8d['stack'])+'\x20';logger['error'](_0x43ec2f),process[_0x2967a2(0x15f)](0x1);}};function a19_0x42c5(_0x44a75f,_0x37a1e0){const _0x46d274=a19_0x46d2();return a19_0x42c5=function(_0x42c553,_0x53a095){_0x42c553=_0x42c553-0x11b;let _0x3ca4c7=_0x46d274[_0x42c553];return _0x3ca4c7;},a19_0x42c5(_0x44a75f,_0x37a1e0);}function a19_0x46d2(){const _0x18007b=['PEqEz','readFileSync','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','ebyGm','<PasswordPlaceholder>','reconnecting-websocket','connectionTimeout','debug','bstackUsername','753832CanQrl','builder','130TbLrLb','bstackAccesskey','desc','../../utils/webSocketUtils','GtoBW','gridId','zdnep','skip-tls-cert-verify','info','8ozouPd','AVLZp','boolean','fFYWK','UkCXz','13040wWdSaq','unauthorised','../../cloudproviders/utils','1045PpBpIc','../../utils/gridComponents','ZoIip','message','INFO','../../utils/utilityMethods','PvHJs','JaYFY','server-error','usage','WebSocket','init-not-called','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','MRAKL','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','argv','region','Browserstack','rnTNZ','Starting\x20grid\x20','handler','evFbK','../../utils/createk8sClient','Skip\x20insecure\x20cert\x20verification.','1620582ewljSp','hcdiS','password','default','epilogue','CnhhH','start-grid-called','type','replace','ERROR','description','qdulc','1334061qoeGZp','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','existsSync','error','4HAraIe','Start\x20an\x20existing\x20Automation\x20grid.','clusterRegion','1094959qLgOIl','Adding\x20Websocket\x20listeners','clusterName','eFGIG','vSClL','../../utils/instrumentationUtils','Grid\x20started','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','cloudProvider','help','../../config/constants','name','parse','username','KLanM','options','stringify','1472737PeIErC','1194BtKncZ','exit','string'];a19_0x46d2=function(){return _0x18007b;};return a19_0x46d2();}