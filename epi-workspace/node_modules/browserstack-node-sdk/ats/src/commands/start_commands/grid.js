const a19_0x3c67a7=a19_0x4dcb;(function(_0xe12203,_0x1d03cb){const _0x13eb35=a19_0x4dcb,_0x545e37=_0xe12203();while(!![]){try{const _0x281fbf=-parseInt(_0x13eb35(0xb7))/0x1*(-parseInt(_0x13eb35(0xd7))/0x2)+-parseInt(_0x13eb35(0xbb))/0x3+parseInt(_0x13eb35(0xe6))/0x4+-parseInt(_0x13eb35(0xa6))/0x5+-parseInt(_0x13eb35(0xb1))/0x6*(-parseInt(_0x13eb35(0xd4))/0x7)+-parseInt(_0x13eb35(0xcb))/0x8+-parseInt(_0x13eb35(0xcf))/0x9*(-parseInt(_0x13eb35(0xc6))/0xa);if(_0x281fbf===_0x1d03cb)break;else _0x545e37['push'](_0x545e37['shift']());}catch(_0x57fa27){_0x545e37['push'](_0x545e37['shift']());}}}(a19_0x46ee,0xc6d5a));function a19_0x46ee(){const _0xc2cef6=['49TdGAZR','info','bstackUsername','2vEfVrJ','Adding\x20Websocket\x20listeners','../../utils/createk8sClient','replace','hjJel','ERROR','options','statusCode','connectionTimeout','gridId','addListeners','command','JqHHI','bstackAccesskey','unauthorised','3505876gbITrK','<PasswordPlaceholder>','grid-id','body','OxbcR','parse','type','name','menyG','uuMlP','user','password','../../utils/gridComponents','MAliK','argv','YQmTW','UaNow','Gutut','Start\x20an\x20existing\x20Automation\x20grid.','boolean','tdXCS','../../cloudproviders/utils','error','7111910oiHqra','description','../../utils/utilityMethods','clusterName','builder','INFO','skipTlsCertVerify','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','RpgXp','OMOmv','server-error','462846lBtZEJ','reconnecting-websocket','../../utils/webSocketUtils','RDLqS','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','280794xQrlJa','zflWd','desc','region','2080134bQJHWC','debug','jhQSL','readFileSync','usage','clusterRegion','Grid\x20started','Starting\x20grid\x20','ZuZSd','Skip\x20insecure\x20cert\x20verification.','Browserstack','2990VEgoHk','start-grid-called','<UsernamePlaceholder>','stringify','IWakk','9313176ZIojzS','cloudProvider','EMTiy','exit','72153yyjgPy','username','start','../../utils/instrumentationUtils','TOSyT'];a19_0x46ee=function(){return _0xc2cef6;};return a19_0x46ee();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x3c67a7(0xb2)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require('../../config/constants'),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require(a19_0x3c67a7(0xa8)),{scaleUpHubDeployment}=require(a19_0x3c67a7(0xf2)),{sendInstrumentationEvent}=require(a19_0x3c67a7(0xd2)),webSocketUtils=require(a19_0x3c67a7(0xb3)),{createK8sClient}=require(a19_0x3c67a7(0xd9)),{getCloudProviderObject}=require(a19_0x3c67a7(0xa4));function a19_0x4dcb(_0x44cf5f,_0x341ff7){const _0x46eeee=a19_0x46ee();return a19_0x4dcb=function(_0x4dcb57,_0x321c42){_0x4dcb57=_0x4dcb57-0x9f;let _0x5f0735=_0x46eeee[_0x4dcb57];return _0x5f0735;},a19_0x4dcb(_0x44cf5f,_0x341ff7);}exports[a19_0x3c67a7(0xe2)]='grid',exports[a19_0x3c67a7(0xb9)]=a19_0x3c67a7(0xa1),exports[a19_0x3c67a7(0xaa)]=function(_0xb34c27){const _0x5f27c1=a19_0x3c67a7,_0x565324={};_0x565324[_0x5f27c1(0xe3)]=_0x5f27c1(0xad),_0x565324[_0x5f27c1(0xae)]='string',_0x565324[_0x5f27c1(0xb8)]=_0x5f27c1(0xc4),_0x565324[_0x5f27c1(0xd3)]=_0x5f27c1(0xa2),_0x565324[_0x5f27c1(0xf5)]='help';const _0x57e5fd=_0x565324,_0x6abb3b={};_0x6abb3b[_0x5f27c1(0xa7)]=_0x57e5fd['JqHHI'],_0x6abb3b[_0x5f27c1(0xec)]=_0x57e5fd[_0x5f27c1(0xae)];const _0xa8859b={};_0xa8859b[_0x5f27c1(0xa7)]=_0x57e5fd[_0x5f27c1(0xb8)],_0xa8859b[_0x5f27c1(0xec)]=_0x57e5fd['TOSyT'],_0xa8859b['default']=![];const _0x4e80e1={};return _0x4e80e1[_0x5f27c1(0xe8)]=_0x6abb3b,_0x4e80e1['skip-tls-cert-verify']=_0xa8859b,_0xb34c27[_0x5f27c1(0xbf)](HELP_HEADER_MESSAGE[_0x5f27c1(0xd1)])['epilogue'](HELP_FOOTER_MESSAGE)[_0x5f27c1(0xdd)](_0x4e80e1)['help'](_0x57e5fd[_0x5f27c1(0xf5)])[_0x5f27c1(0xf4)];},exports['handler']=async function(_0x46a9dc){const _0x16ee09=a19_0x3c67a7,_0x2dc354={'IllXl':_0x16ee09(0xb6),'wtFyF':function(_0x26aa03){return _0x26aa03();},'igMvz':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','UaNow':function(_0x468a02,_0x28b913,_0x20f433,_0x4f3cb9,_0x35b57f,_0x677ff8,_0x529b74){return _0x468a02(_0x28b913,_0x20f433,_0x4f3cb9,_0x35b57f,_0x677ff8,_0x529b74);},'OxbcR':_0x16ee09(0xc7),'Gutut':'init-not-called','ilxNp':function(_0x168fae){return _0x168fae();},'RDLqS':_0x16ee09(0xc8),'MAliK':_0x16ee09(0xe7),'menyG':_0x16ee09(0xd8),'IWakk':function(_0x540f23,_0x2d36a7,_0x4bd64e,_0x1d536d){return _0x540f23(_0x2d36a7,_0x4bd64e,_0x1d536d);},'EMTiy':function(_0x4492c1,_0xf71466,_0x1721cc){return _0x4492c1(_0xf71466,_0x1721cc);},'tdXCS':function(_0x980aac,_0x3c94c5,_0x1cfc63){return _0x980aac(_0x3c94c5,_0x1cfc63);},'uuMlP':_0x16ee09(0xc1),'OMOmv':function(_0x4a318a,_0x31353e){return _0x4a318a===_0x31353e;},'ZrEtt':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','TPBzs':function(_0xfe79a,_0x2dd05a,_0x2ce8d5,_0x4fc4e1,_0x376169,_0x18fb67,_0x2827b5){return _0xfe79a(_0x2dd05a,_0x2ce8d5,_0x4fc4e1,_0x376169,_0x18fb67,_0x2827b5);},'hjJel':_0x16ee09(0xe5),'ZuZSd':function(_0x2afa86,_0x40ccd9,_0x4b80d3,_0x3dd835,_0x156f86,_0x543f93,_0x2ba1be){return _0x2afa86(_0x40ccd9,_0x4b80d3,_0x3dd835,_0x156f86,_0x543f93,_0x2ba1be);},'RzlUR':'invalid-grid-id','jhQSL':_0x16ee09(0xb0)};let _0x3475c6;try{!_0x46a9dc['gridId']&&(logger[_0x16ee09(0xa5)](_0x2dc354['IllXl']),process['exit'](0x1));!fs['existsSync'](_0x2dc354['wtFyF'](getCredentialsPath))&&(logger[_0x16ee09(0xa5)](_0x2dc354['igMvz']),await _0x2dc354[_0x16ee09(0x9f)](sendInstrumentationEvent,_0x46a9dc,_0x2dc354[_0x16ee09(0xea)],messageTypes[_0x16ee09(0xdc)],_0x2dc354[_0x16ee09(0xa0)],null,_0x46a9dc),process['exit'](0x1));logger[_0x16ee09(0xd5)](_0x16ee09(0xc2)+_0x46a9dc[_0x16ee09(0xe0)]),await _0x2dc354['UaNow'](sendInstrumentationEvent,_0x46a9dc,_0x2dc354['OxbcR'],messageTypes[_0x16ee09(0xab)],null,null,_0x46a9dc);const _0x3284db=JSON[_0x16ee09(0xeb)](fs[_0x16ee09(0xbe)](_0x2dc354['ilxNp'](getCredentialsPath)));global_registry[_0x16ee09(0xd6)]=_0x3284db[_0x16ee09(0xc5)][_0x16ee09(0xd0)],global_registry[_0x16ee09(0xe4)]=_0x3284db[_0x16ee09(0xc5)]['password'];const _0xbc260e=WS_ENDPOINT[_0x16ee09(0xda)](_0x2dc354[_0x16ee09(0xb4)],_0x3284db['Browserstack'][_0x16ee09(0xd0)])[_0x16ee09(0xda)](_0x2dc354[_0x16ee09(0xf3)],_0x3284db[_0x16ee09(0xc5)]['password']),_0x20c44c={};_0x20c44c['WebSocket']=ws,_0x20c44c[_0x16ee09(0xdf)]=0x36ee80,_0x3475c6=new ReconnectingWebSocket(_0xbc260e,[],_0x20c44c),logger[_0x16ee09(0xbc)](_0x2dc354[_0x16ee09(0xee)]),webSocketUtils[_0x16ee09(0xe1)](_0x3475c6,_0x46a9dc[_0x16ee09(0xf0)],_0x46a9dc[_0x16ee09(0xf1)]);const [_0x605c03,_0x2a1649]=await _0x2dc354[_0x16ee09(0xca)](getGridDetails,_0x3284db[_0x16ee09(0xc5)][_0x16ee09(0xd0)],_0x3284db[_0x16ee09(0xc5)][_0x16ee09(0xf1)],_0x46a9dc[_0x16ee09(0xe0)]);if(_0x2a1649){const _0x390710=_0x2a1649[_0x16ee09(0xd5)];global_registry[_0x16ee09(0xcc)]=_0x390710[_0x16ee09(0xcc)],global_registry[_0x16ee09(0xc0)]=_0x390710[_0x16ee09(0xba)],global_registry['clusterName']=_0x390710[_0x16ee09(0xa9)];const _0x46c041=await _0x2dc354[_0x16ee09(0x9f)](getCloudProviderObject,_0x390710[_0x16ee09(0xcc)],_0x390710['clusterName'],_0x390710[_0x16ee09(0xed)],_0x3475c6,webSocketUtils,_0x46a9dc),[_0x2f7bf7,_0x14ab66,_0x5f1769,_0x6988e6,_0x44d091,_0x5729d6]=await _0x2dc354[_0x16ee09(0xcd)](createK8sClient,_0x46c041,_0x46a9dc[_0x16ee09(0xac)]);await _0x2dc354[_0x16ee09(0xa3)](scaleUpHubDeployment,_0x14ab66,_0x390710[_0x16ee09(0xed)]),logger[_0x16ee09(0xd5)](_0x2dc354[_0x16ee09(0xef)]),process[_0x16ee09(0xce)](0x0);}_0x2dc354[_0x16ee09(0xaf)](_0x605c03[_0x16ee09(0xde)],0x191)&&(logger['error'](_0x2dc354['ZrEtt']),await _0x2dc354['TPBzs'](sendInstrumentationEvent,_0x46a9dc,_0x2dc354[_0x16ee09(0xea)],messageTypes[_0x16ee09(0xdc)],_0x2dc354[_0x16ee09(0xdb)],null,_0x46a9dc),process['exit'](0x1)),_0x2dc354[_0x16ee09(0xaf)](_0x605c03[_0x16ee09(0xde)],0x190)&&(logger[_0x16ee09(0xa5)](JSON['parse'](_0x605c03[_0x16ee09(0xe9)])['message']),await _0x2dc354[_0x16ee09(0xc3)](sendInstrumentationEvent,_0x46a9dc,_0x2dc354[_0x16ee09(0xea)],messageTypes['ERROR'],_0x2dc354['RzlUR'],null,_0x46a9dc),process[_0x16ee09(0xce)](0x1)),logger[_0x16ee09(0xa5)](_0x16ee09(0xb5)+JSON[_0x16ee09(0xc9)](_0x605c03)),await _0x2dc354[_0x16ee09(0xc3)](sendInstrumentationEvent,_0x46a9dc,_0x2dc354[_0x16ee09(0xea)],messageTypes[_0x16ee09(0xdc)],_0x2dc354[_0x16ee09(0xbd)],_0x605c03,_0x46a9dc),process['exit'](0x1);}catch(_0x425391){const _0x1b7b6b='Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20'+_0x425391+'\x20\x0a'+JSON[_0x16ee09(0xc9)](_0x425391['stack'])+'\x20';logger['error'](_0x1b7b6b),process[_0x16ee09(0xce)](0x1);}};