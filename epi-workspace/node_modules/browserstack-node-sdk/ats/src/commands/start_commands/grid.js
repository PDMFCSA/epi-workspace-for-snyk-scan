const a19_0x32d509=a19_0x3d29;function a19_0x20e5(){const _0x37ee3a=['Grid\x20started','Browserstack','ERROR','bstackUsername','Start\x20an\x20existing\x20Automation\x20grid.','14xYSrap','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','debug','../../utils/webSocketUtils','usage','<PasswordPlaceholder>','udScV','../../config/logger','handler','statusCode','fXdwh','15DFzbNo','boolean','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','epilogue','6ImtTuc','stack','KIWSg','676023vQyxFC','help','password','exit','../../utils/createk8sClient','default','command','NkBzG','jMokJ','gridId','readFileSync','13544eWipOJ','2589183SSJzUM','string','name','connectionTimeout','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','WImuD','Adding\x20Websocket\x20listeners','vRbrY','clusterName','../../config/constants','cloudProvider','error','invalid-grid-id','oSOXu','unauthorised','foxQL','skip-tls-cert-verify','info','addListeners','../../utils/utilityMethods','Starting\x20grid\x20','355428ekUIbx','jkLyA','lrmrY','skipTlsCertVerify','argv','iqUqe','message','desc','<UsernamePlaceholder>','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','start','yppMG','GdTgq','TIqgT','../../utils/gridComponents','start-grid-called','mSQWV','grid','6830890TaRKjG','EUDXP','../../utils/instrumentationUtils','1374120GLMeXR','init-not-called','server-error','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','111599VGVhWi','WebSocket','Skip\x20insecure\x20cert\x20verification.','uiRjI','description','username','replace','eBglj','wBLQU','options','type','../../cloudproviders/utils'];a19_0x20e5=function(){return _0x37ee3a;};return a19_0x20e5();}function a19_0x3d29(_0x3c04ce,_0x20eef7){const _0x20e568=a19_0x20e5();return a19_0x3d29=function(_0x3d2940,_0x4a7550){_0x3d2940=_0x3d2940-0x7b;let _0xcbe173=_0x20e568[_0x3d2940];return _0xcbe173;},a19_0x3d29(_0x3c04ce,_0x20eef7);}(function(_0x2c0589,_0x2b1558){const _0xbf8c04=a19_0x3d29,_0x43d08f=_0x2c0589();while(!![]){try{const _0x91b853=parseInt(_0xbf8c04(0xae))/0x1*(parseInt(_0xbf8c04(0xce))/0x2)+parseInt(_0xbf8c04(0xd1))/0x3+parseInt(_0xbf8c04(0x95))/0x4*(parseInt(_0xbf8c04(0xca))/0x5)+-parseInt(_0xbf8c04(0xaa))/0x6+-parseInt(_0xbf8c04(0xbf))/0x7*(parseInt(_0xbf8c04(0x7f))/0x8)+parseInt(_0xbf8c04(0x80))/0x9+-parseInt(_0xbf8c04(0xa7))/0xa;if(_0x91b853===_0x2b1558)break;else _0x43d08f['push'](_0x43d08f['shift']());}catch(_0xa0ac84){_0x43d08f['push'](_0x43d08f['shift']());}}}(a19_0x20e5,0x308f5));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x32d509(0x89)),{logger}=require(a19_0x32d509(0xc6)),{getCredentialsPath,getGridDetails}=require(a19_0x32d509(0x93)),{scaleUpHubDeployment}=require(a19_0x32d509(0xa3)),{sendInstrumentationEvent}=require(a19_0x32d509(0xa9)),webSocketUtils=require(a19_0x32d509(0xc2)),{createK8sClient}=require(a19_0x32d509(0xd5)),{getCloudProviderObject}=require(a19_0x32d509(0xb9));exports[a19_0x32d509(0xd7)]=a19_0x32d509(0xa6),exports[a19_0x32d509(0x9c)]=a19_0x32d509(0xbe),exports['builder']=function(_0x2fd03e){const _0xa792a8=a19_0x32d509,_0x33b0a1={};_0x33b0a1[_0xa792a8(0xc9)]=_0xa792a8(0xc0),_0x33b0a1['Khpcq']=_0xa792a8(0x81),_0x33b0a1[_0xa792a8(0xb5)]=_0xa792a8(0xb0),_0x33b0a1[_0xa792a8(0x87)]=_0xa792a8(0xcb),_0x33b0a1[_0xa792a8(0x9a)]=_0xa792a8(0xd2);const _0x300841=_0x33b0a1,_0x43cf31={};_0x43cf31[_0xa792a8(0xb2)]=_0x300841[_0xa792a8(0xc9)],_0x43cf31[_0xa792a8(0xb8)]=_0x300841['Khpcq'];const _0x5a92e9={};_0x5a92e9['description']=_0x300841[_0xa792a8(0xb5)],_0x5a92e9['type']=_0x300841[_0xa792a8(0x87)],_0x5a92e9[_0xa792a8(0xd6)]=![];const _0xf0eeec={};return _0xf0eeec['grid-id']=_0x43cf31,_0xf0eeec[_0xa792a8(0x90)]=_0x5a92e9,_0x2fd03e[_0xa792a8(0xc3)](HELP_HEADER_MESSAGE[_0xa792a8(0x9f)])[_0xa792a8(0xcd)](HELP_FOOTER_MESSAGE)[_0xa792a8(0xb7)](_0xf0eeec)[_0xa792a8(0xd2)](_0x300841[_0xa792a8(0x9a)])[_0xa792a8(0x99)];},exports[a19_0x32d509(0xc7)]=async function(_0x3f2c5e){const _0x47d519=a19_0x32d509,_0x260283={'KIWSg':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','GdTgq':function(_0x1074f1){return _0x1074f1();},'foxQL':_0x47d519(0x9e),'lrmrY':function(_0x26577f,_0x5c44d7,_0x5c98b9,_0x4b4c43,_0x51fa8f,_0x2ff0f8,_0xad75b8){return _0x26577f(_0x5c44d7,_0x5c98b9,_0x4b4c43,_0x51fa8f,_0x2ff0f8,_0xad75b8);},'yppMG':_0x47d519(0xa4),'oSOXu':_0x47d519(0xab),'TIqgT':function(_0x470709,_0x254cfa,_0x5bbf5,_0x3d1ffb,_0x50c611,_0x1658dd,_0x55feeb){return _0x470709(_0x254cfa,_0x5bbf5,_0x3d1ffb,_0x50c611,_0x1658dd,_0x55feeb);},'WImuD':_0x47d519(0x9d),'NkBzG':_0x47d519(0xc4),'mSQWV':_0x47d519(0x86),'EUDXP':function(_0x358395,_0x414ad6,_0x41834b,_0x213ef2){return _0x358395(_0x414ad6,_0x41834b,_0x213ef2);},'CdaMY':function(_0x432f39,_0x2a836e,_0x5ce216,_0x23f841,_0x18a4f3,_0x12c73f,_0x259eb8){return _0x432f39(_0x2a836e,_0x5ce216,_0x23f841,_0x18a4f3,_0x12c73f,_0x259eb8);},'uiRjI':function(_0x370938,_0x3b5e36,_0x19b74a){return _0x370938(_0x3b5e36,_0x19b74a);},'tgpLX':function(_0x314cc8,_0x96b046,_0x51a18d){return _0x314cc8(_0x96b046,_0x51a18d);},'KCddT':_0x47d519(0xba),'Drrdh':function(_0x252893,_0x4cd05d){return _0x252893===_0x4cd05d;},'jMokJ':_0x47d519(0xad),'wBLQU':function(_0x392320,_0x91dc60,_0x12222c,_0x4df21e,_0x341221,_0x1994dd,_0x57ba56){return _0x392320(_0x91dc60,_0x12222c,_0x4df21e,_0x341221,_0x1994dd,_0x57ba56);},'udScV':_0x47d519(0x8e),'jkLyA':_0x47d519(0x8c),'eobnQ':_0x47d519(0xac)};let _0x51d5de;try{!_0x3f2c5e['gridId']&&(logger[_0x47d519(0x8b)](_0x260283[_0x47d519(0xd0)]),process[_0x47d519(0xd4)](0x1));!fs['existsSync'](_0x260283[_0x47d519(0xa1)](getCredentialsPath))&&(logger[_0x47d519(0x8b)](_0x260283[_0x47d519(0x8f)]),await _0x260283[_0x47d519(0x97)](sendInstrumentationEvent,_0x3f2c5e,_0x260283['yppMG'],messageTypes[_0x47d519(0xbc)],_0x260283[_0x47d519(0x8d)],null,_0x3f2c5e),process[_0x47d519(0xd4)](0x1));logger[_0x47d519(0x91)](_0x47d519(0x94)+_0x3f2c5e[_0x47d519(0x7d)]),await _0x260283[_0x47d519(0xa2)](sendInstrumentationEvent,_0x3f2c5e,_0x260283[_0x47d519(0xa0)],messageTypes['INFO'],null,null,_0x3f2c5e);const _0x58e120=JSON['parse'](fs[_0x47d519(0x7e)](_0x260283[_0x47d519(0xa1)](getCredentialsPath)));global_registry[_0x47d519(0xbd)]=_0x58e120[_0x47d519(0xbb)]['username'],global_registry['bstackAccesskey']=_0x58e120[_0x47d519(0xbb)]['password'];const _0x2bd75f=WS_ENDPOINT['replace'](_0x260283[_0x47d519(0x85)],_0x58e120['Browserstack'][_0x47d519(0xb3)])[_0x47d519(0xb4)](_0x260283[_0x47d519(0x7b)],_0x58e120[_0x47d519(0xbb)][_0x47d519(0xd3)]),_0x430c90={};_0x430c90[_0x47d519(0xaf)]=ws,_0x430c90[_0x47d519(0x83)]=0x36ee80,_0x51d5de=new ReconnectingWebSocket(_0x2bd75f,[],_0x430c90),logger[_0x47d519(0xc1)](_0x260283[_0x47d519(0xa5)]),webSocketUtils[_0x47d519(0x92)](_0x51d5de,_0x3f2c5e['user'],_0x3f2c5e[_0x47d519(0xd3)]);const [_0x407d3a,_0x436cc2]=await _0x260283[_0x47d519(0xa8)](getGridDetails,_0x58e120['Browserstack'][_0x47d519(0xb3)],_0x58e120[_0x47d519(0xbb)]['password'],_0x3f2c5e[_0x47d519(0x7d)]);if(_0x436cc2){const _0x16269c=_0x436cc2['info'];global_registry[_0x47d519(0x8a)]=_0x16269c['cloudProvider'],global_registry['clusterRegion']=_0x16269c['region'],global_registry[_0x47d519(0x88)]=_0x16269c[_0x47d519(0x88)];const _0xfa44e4=await _0x260283['CdaMY'](getCloudProviderObject,_0x16269c[_0x47d519(0x8a)],_0x16269c[_0x47d519(0x88)],_0x16269c[_0x47d519(0x82)],_0x51d5de,webSocketUtils,_0x3f2c5e),[_0x43eee5,_0x370e62,_0x47c129,_0x4714bd,_0x3678a5,_0x5b6443]=await _0x260283[_0x47d519(0xb1)](createK8sClient,_0xfa44e4,_0x3f2c5e[_0x47d519(0x98)]);await _0x260283['tgpLX'](scaleUpHubDeployment,_0x370e62,_0x16269c['name']),logger[_0x47d519(0x91)](_0x260283['KCddT']),process[_0x47d519(0xd4)](0x0);}_0x260283['Drrdh'](_0x407d3a['statusCode'],0x191)&&(logger['error'](_0x260283[_0x47d519(0x7c)]),await _0x260283[_0x47d519(0xb6)](sendInstrumentationEvent,_0x3f2c5e,_0x260283[_0x47d519(0xa0)],messageTypes[_0x47d519(0xbc)],_0x260283[_0x47d519(0xc5)],null,_0x3f2c5e),process[_0x47d519(0xd4)](0x1)),_0x260283['Drrdh'](_0x407d3a[_0x47d519(0xc8)],0x190)&&(logger[_0x47d519(0x8b)](JSON['parse'](_0x407d3a['body'])[_0x47d519(0x9b)]),await _0x260283['lrmrY'](sendInstrumentationEvent,_0x3f2c5e,_0x260283[_0x47d519(0xa0)],messageTypes['ERROR'],_0x260283[_0x47d519(0x96)],null,_0x3f2c5e),process['exit'](0x1)),logger['error'](_0x47d519(0xcc)+JSON['stringify'](_0x407d3a)),await _0x260283[_0x47d519(0xa2)](sendInstrumentationEvent,_0x3f2c5e,_0x260283[_0x47d519(0xa0)],messageTypes['ERROR'],_0x260283['eobnQ'],_0x407d3a,_0x3f2c5e),process[_0x47d519(0xd4)](0x1);}catch(_0xbf9e5){const _0x5bdf44=_0x47d519(0x84)+_0xbf9e5+'\x20\x0a'+JSON['stringify'](_0xbf9e5[_0x47d519(0xcf)])+'\x20';logger[_0x47d519(0x8b)](_0x5bdf44),process[_0x47d519(0xd4)](0x1);}};