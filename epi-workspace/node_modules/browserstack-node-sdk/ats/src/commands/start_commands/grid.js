const a19_0x2d6e71=a19_0x2895;(function(_0x14efbc,_0x2a2cef){const _0x4d5ffa=a19_0x2895,_0x295757=_0x14efbc();while(!![]){try{const _0x58ad82=parseInt(_0x4d5ffa(0x18a))/0x1+parseInt(_0x4d5ffa(0x1ba))/0x2+parseInt(_0x4d5ffa(0x1c7))/0x3*(parseInt(_0x4d5ffa(0x1ad))/0x4)+-parseInt(_0x4d5ffa(0x1a0))/0x5*(parseInt(_0x4d5ffa(0x1d5))/0x6)+parseInt(_0x4d5ffa(0x1d3))/0x7*(-parseInt(_0x4d5ffa(0x19f))/0x8)+-parseInt(_0x4d5ffa(0x194))/0x9+parseInt(_0x4d5ffa(0x196))/0xa*(parseInt(_0x4d5ffa(0x1a4))/0xb);if(_0x58ad82===_0x2a2cef)break;else _0x295757['push'](_0x295757['shift']());}catch(_0x49e08a){_0x295757['push'](_0x295757['shift']());}}}(a19_0x3763,0x5d8fd));function a19_0x2895(_0x2b6f16,_0x280e5e){const _0x37634b=a19_0x3763();return a19_0x2895=function(_0x28952c,_0x109392){_0x28952c=_0x28952c-0x17f;let _0x1f0bdf=_0x37634b[_0x28952c];return _0x1f0bdf;},a19_0x2895(_0x2b6f16,_0x280e5e);}function a19_0x3763(){const _0x4ba80c=['user','type','grid','init-not-called','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','16HLPTHL','NvMZv','../../utils/utilityMethods','KjVAZ','KXuPo','ynuQE','string','skip-tls-cert-verify','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','CCsnI','MNUsY','message','qDjnc','1151206gVhovF','body','DrouV','desc','description','TLIoe','region','naULD','reconnecting-websocket','unauthorised','rrhun','skipTlsCertVerify','<PasswordPlaceholder>','188214UkZupe','ZainD','../../utils/gridComponents','HJIVA','bstackUsername','DjvXa','help','clusterRegion','connectionTimeout','DoGDe','Browserstack','info','14UOStuC','gridId','6bzqGew','hPNSV','WebSocket','invalid-grid-id','grid-id','debug','OCdNW','TARWn','INFO','existsSync','xzaLX','cloudProvider','cKduy','default','gQozI','builder','replace','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','ERROR','stack','usage','463045uZnJSo','<UsernamePlaceholder>','Adding\x20Websocket\x20listeners','exit','boolean','error','../../config/constants','statusCode','iehWi','Start\x20an\x20existing\x20Automation\x20grid.','4424139FHmlor','clusterName','10ZOaVpZ','PVObd','start','Grid\x20started','username','addListeners','password','argv','KjTLj','450488sqXhzZ','3420845bkexaR','server-error','parse','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','4201901ojYbwR','bstackAccesskey','command','readFileSync'];a19_0x3763=function(){return _0x4ba80c;};return a19_0x3763();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x2d6e71(0x1c2)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x2d6e71(0x190)),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require(a19_0x2d6e71(0x1af)),{scaleUpHubDeployment}=require(a19_0x2d6e71(0x1c9)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require('../../cloudproviders/utils');exports[a19_0x2d6e71(0x1a6)]=a19_0x2d6e71(0x1aa),exports[a19_0x2d6e71(0x1bd)]=a19_0x2d6e71(0x193),exports[a19_0x2d6e71(0x184)]=function(_0x6b9fb0){const _0x5094a6=a19_0x2d6e71,_0x535ee7={};_0x535ee7[_0x5094a6(0x1ae)]=_0x5094a6(0x186),_0x535ee7['TLIoe']=_0x5094a6(0x1b3),_0x535ee7[_0x5094a6(0x1d0)]='Skip\x20insecure\x20cert\x20verification.',_0x535ee7[_0x5094a6(0x197)]=_0x5094a6(0x18e),_0x535ee7[_0x5094a6(0x1b0)]=_0x5094a6(0x1cd);const _0x1629d9=_0x535ee7,_0x4d9721={};_0x4d9721[_0x5094a6(0x1be)]=_0x1629d9[_0x5094a6(0x1ae)],_0x4d9721[_0x5094a6(0x1a9)]=_0x1629d9[_0x5094a6(0x1bf)];const _0x108785={};_0x108785[_0x5094a6(0x1be)]=_0x1629d9[_0x5094a6(0x1d0)],_0x108785[_0x5094a6(0x1a9)]=_0x1629d9['PVObd'],_0x108785[_0x5094a6(0x182)]=![];const _0x5aa3c5={};return _0x5aa3c5[_0x5094a6(0x1d9)]=_0x4d9721,_0x5aa3c5[_0x5094a6(0x1b4)]=_0x108785,_0x6b9fb0[_0x5094a6(0x189)](HELP_HEADER_MESSAGE[_0x5094a6(0x198)])['epilogue'](HELP_FOOTER_MESSAGE)['options'](_0x5aa3c5)[_0x5094a6(0x1cd)](_0x1629d9[_0x5094a6(0x1b0)])[_0x5094a6(0x19d)];},exports['handler']=async function(_0x205744){const _0x59f157=a19_0x2d6e71,_0x469727={'DjvXa':_0x59f157(0x1a3),'cKduy':function(_0x4c5d77){return _0x4c5d77();},'naULD':_0x59f157(0x1ac),'KjTLj':function(_0x2554bc,_0x3414f3,_0x59fd14,_0x319adb,_0x3a0dc2,_0x17b302,_0x40162a){return _0x2554bc(_0x3414f3,_0x59fd14,_0x319adb,_0x3a0dc2,_0x17b302,_0x40162a);},'MNUsY':'start-grid-called','ZainD':_0x59f157(0x1ab),'KXuPo':function(_0xb3bb2a,_0x5c9dcf,_0x67131d,_0x104de6,_0xb4ed33,_0xa26e92,_0x84d768){return _0xb3bb2a(_0x5c9dcf,_0x67131d,_0x104de6,_0xb4ed33,_0xa26e92,_0x84d768);},'OCdNW':function(_0x442ab0){return _0x442ab0();},'teGZl':_0x59f157(0x18b),'TARWn':_0x59f157(0x1c6),'qDjnc':_0x59f157(0x18c),'chORw':function(_0x4ddb71,_0x55c4da,_0x527354,_0x2e2daf){return _0x4ddb71(_0x55c4da,_0x527354,_0x2e2daf);},'gQozI':function(_0x5a4cca,_0x3f7cd5,_0x185f3e,_0x5db994,_0x13cb4e,_0x3294df,_0x1e0449){return _0x5a4cca(_0x3f7cd5,_0x185f3e,_0x5db994,_0x13cb4e,_0x3294df,_0x1e0449);},'ynuQE':function(_0x1e6ed7,_0x5c7f14,_0x54786b){return _0x1e6ed7(_0x5c7f14,_0x54786b);},'HJIVA':_0x59f157(0x199),'rrhun':function(_0x612406,_0x24b956){return _0x612406===_0x24b956;},'xzaLX':_0x59f157(0x1b5),'vjspm':function(_0x5e4e31,_0x55f6e1,_0x264245,_0x5d097d,_0x40c64a,_0x592474,_0x499bea){return _0x5e4e31(_0x55f6e1,_0x264245,_0x5d097d,_0x40c64a,_0x592474,_0x499bea);},'CCsnI':_0x59f157(0x1c3),'qeGaq':function(_0x48d775,_0xde958c){return _0x48d775===_0xde958c;},'DrouV':function(_0x353410,_0x142848,_0x1816a9,_0x5d5d57,_0x125cfe,_0x25a187,_0x58b75c){return _0x353410(_0x142848,_0x1816a9,_0x5d5d57,_0x125cfe,_0x25a187,_0x58b75c);},'CvJSc':_0x59f157(0x1d8),'hPNSV':function(_0xef0df5,_0x57428f,_0x3309fd,_0xe3bd62,_0xc289d9,_0x24efcb,_0x3f468b){return _0xef0df5(_0x57428f,_0x3309fd,_0xe3bd62,_0xc289d9,_0x24efcb,_0x3f468b);},'iehWi':_0x59f157(0x1a1)};let _0x21a8d0;try{!_0x205744[_0x59f157(0x1d4)]&&(logger[_0x59f157(0x18f)](_0x469727[_0x59f157(0x1cc)]),process[_0x59f157(0x18d)](0x1));!fs[_0x59f157(0x1de)](_0x469727[_0x59f157(0x181)](getCredentialsPath))&&(logger['error'](_0x469727[_0x59f157(0x1c1)]),await _0x469727[_0x59f157(0x19e)](sendInstrumentationEvent,_0x205744,_0x469727[_0x59f157(0x1b7)],messageTypes['ERROR'],_0x469727[_0x59f157(0x1c8)],null,_0x205744),process[_0x59f157(0x18d)](0x1));logger[_0x59f157(0x1d2)]('Starting\x20grid\x20'+_0x205744['gridId']),await _0x469727[_0x59f157(0x1b1)](sendInstrumentationEvent,_0x205744,_0x469727['MNUsY'],messageTypes[_0x59f157(0x1dd)],null,null,_0x205744);const _0x36fab7=JSON[_0x59f157(0x1a2)](fs[_0x59f157(0x1a7)](_0x469727[_0x59f157(0x1db)](getCredentialsPath)));global_registry[_0x59f157(0x1cb)]=_0x36fab7['Browserstack'][_0x59f157(0x19a)],global_registry[_0x59f157(0x1a5)]=_0x36fab7[_0x59f157(0x1d1)]['password'];const _0x3a7709=WS_ENDPOINT[_0x59f157(0x185)](_0x469727['teGZl'],_0x36fab7[_0x59f157(0x1d1)][_0x59f157(0x19a)])[_0x59f157(0x185)](_0x469727[_0x59f157(0x1dc)],_0x36fab7[_0x59f157(0x1d1)][_0x59f157(0x19c)]),_0x157c1a={};_0x157c1a[_0x59f157(0x1d7)]=ws,_0x157c1a[_0x59f157(0x1cf)]=0x36ee80,_0x21a8d0=new ReconnectingWebSocket(_0x3a7709,[],_0x157c1a),logger[_0x59f157(0x1da)](_0x469727[_0x59f157(0x1b9)]),webSocketUtils[_0x59f157(0x19b)](_0x21a8d0,_0x205744[_0x59f157(0x1a8)],_0x205744['password']);const [_0x2641de,_0x13c96e]=await _0x469727['chORw'](getGridDetails,_0x36fab7[_0x59f157(0x1d1)][_0x59f157(0x19a)],_0x36fab7[_0x59f157(0x1d1)][_0x59f157(0x19c)],_0x205744[_0x59f157(0x1d4)]);if(_0x13c96e){const _0x392245=_0x13c96e[_0x59f157(0x1d2)];global_registry[_0x59f157(0x180)]=_0x392245[_0x59f157(0x180)],global_registry[_0x59f157(0x1ce)]=_0x392245[_0x59f157(0x1c0)],global_registry[_0x59f157(0x195)]=_0x392245['clusterName'];const _0x317527=await _0x469727[_0x59f157(0x183)](getCloudProviderObject,_0x392245[_0x59f157(0x180)],_0x392245['clusterName'],_0x392245['name'],_0x21a8d0,webSocketUtils,_0x205744),[_0x16ce55,_0x15f7c9,_0x821512,_0x57f7fe,_0x4ae0b7,_0x270c10]=await _0x469727[_0x59f157(0x1b2)](createK8sClient,_0x317527,_0x205744[_0x59f157(0x1c5)]);await _0x469727[_0x59f157(0x1b2)](scaleUpHubDeployment,_0x15f7c9,_0x392245['name']),logger[_0x59f157(0x1d2)](_0x469727[_0x59f157(0x1ca)]),process[_0x59f157(0x18d)](0x0);}_0x469727[_0x59f157(0x1c4)](_0x2641de[_0x59f157(0x191)],0x191)&&(logger[_0x59f157(0x18f)](_0x469727[_0x59f157(0x17f)]),await _0x469727['vjspm'](sendInstrumentationEvent,_0x205744,_0x469727['MNUsY'],messageTypes[_0x59f157(0x187)],_0x469727[_0x59f157(0x1b6)],null,_0x205744),process['exit'](0x1)),_0x469727['qeGaq'](_0x2641de[_0x59f157(0x191)],0x190)&&(logger[_0x59f157(0x18f)](JSON[_0x59f157(0x1a2)](_0x2641de[_0x59f157(0x1bb)])[_0x59f157(0x1b8)]),await _0x469727[_0x59f157(0x1bc)](sendInstrumentationEvent,_0x205744,_0x469727[_0x59f157(0x1b7)],messageTypes[_0x59f157(0x187)],_0x469727['CvJSc'],null,_0x205744),process[_0x59f157(0x18d)](0x1)),logger[_0x59f157(0x18f)]('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON['stringify'](_0x2641de)),await _0x469727[_0x59f157(0x1d6)](sendInstrumentationEvent,_0x205744,_0x469727[_0x59f157(0x1b7)],messageTypes['ERROR'],_0x469727[_0x59f157(0x192)],_0x2641de,_0x205744),process[_0x59f157(0x18d)](0x1);}catch(_0x495ef5){const _0x49ce9e='Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20'+_0x495ef5+'\x20\x0a'+JSON['stringify'](_0x495ef5[_0x59f157(0x188)])+'\x20';logger['error'](_0x49ce9e),process['exit'](0x1);}};