const a19_0x111fe1=a19_0x23ea;function a19_0x23ea(_0x5effb3,_0x492d7e){const _0x1d1332=a19_0x1d13();return a19_0x23ea=function(_0x23ea46,_0x57291e){_0x23ea46=_0x23ea46-0x137;let _0x32ef7a=_0x1d1332[_0x23ea46];return _0x32ef7a;},a19_0x23ea(_0x5effb3,_0x492d7e);}function a19_0x1d13(){const _0x2ebb97=['help','ODkqm','epilogue','jagVL','existsSync','type','start-grid-called','HqCDH','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','511012SPqzpO','<PasswordPlaceholder>','init-not-called','Dslti','jnIFZ','command','fbffX','INFO','gridId','vwgAe','Start\x20an\x20existing\x20Automation\x20grid.','CyHDt','statusCode','1648HblksD','region','Grid\x20started','builder','server-error','ERROR','Browserstack','5JUopzy','addListeners','5241DkFDMY','<UsernamePlaceholder>','skip-tls-cert-verify','ZOoTt','205911ggrbmy','HlujJ','user','clusterRegion','invalid-grid-id','aHfRN','string','../../utils/webSocketUtils','WebSocket','grid','exit','JXqLu','desc','info','glaYG','clusterName','start','../../utils/gridComponents','11652488TFbHLC','../../utils/instrumentationUtils','usage','error','7564782YbFfdR','wSoGR','8327053vLFBjL','Adding\x20Websocket\x20listeners','Skip\x20insecure\x20cert\x20verification.','username','default','../../config/constants','fyETe','../../cloudproviders/utils','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','replace','argv','body','OinGi','PCnRf','handler','bstackUsername','fcObb','message','650hfknxv','cloudProvider','ScZsc','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','Starting\x20grid\x20','2hxkwqM','QlNgU','connectionTimeout','options','name','hQvxf','stringify','qbype','grid-id','11934142XkfjEI','debug','JOBAy','parse','password','skipTlsCertVerify'];a19_0x1d13=function(){return _0x2ebb97;};return a19_0x1d13();}(function(_0x313403,_0x16f3cf){const _0x1f9364=a19_0x23ea,_0x7a8dd0=_0x313403();while(!![]){try{const _0x1faf98=-parseInt(_0x1f9364(0x149))/0x1*(parseInt(_0x1f9364(0x161))/0x2)+parseInt(_0x1f9364(0x177))/0x3*(parseInt(_0x1f9364(0x16e))/0x4)+parseInt(_0x1f9364(0x175))/0x5*(parseInt(_0x1f9364(0x191))/0x6)+parseInt(_0x1f9364(0x193))/0x7+-parseInt(_0x1f9364(0x18d))/0x8+parseInt(_0x1f9364(0x17b))/0x9*(-parseInt(_0x1f9364(0x144))/0xa)+parseInt(_0x1f9364(0x152))/0xb;if(_0x1faf98===_0x16f3cf)break;else _0x7a8dd0['push'](_0x7a8dd0['shift']());}catch(_0x74e7bd){_0x7a8dd0['push'](_0x7a8dd0['shift']());}}}(a19_0x1d13,0xc3662));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x111fe1(0x137)),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleUpHubDeployment}=require(a19_0x111fe1(0x18c)),{sendInstrumentationEvent}=require(a19_0x111fe1(0x18e)),webSocketUtils=require(a19_0x111fe1(0x182)),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require(a19_0x111fe1(0x139));exports[a19_0x111fe1(0x166)]=a19_0x111fe1(0x184),exports[a19_0x111fe1(0x187)]=a19_0x111fe1(0x16b),exports[a19_0x111fe1(0x171)]=function(_0x3720fd){const _0xf6185a=a19_0x111fe1,_0x13a6e7={};_0x13a6e7[_0xf6185a(0x142)]=_0xf6185a(0x160),_0x13a6e7['qHEJo']=_0xf6185a(0x181),_0x13a6e7[_0xf6185a(0x13e)]=_0xf6185a(0x195),_0x13a6e7[_0xf6185a(0x14e)]='boolean',_0x13a6e7[_0xf6185a(0x15f)]=_0xf6185a(0x158);const _0x41dad0=_0x13a6e7,_0x537ee3={};_0x537ee3['description']=_0x41dad0[_0xf6185a(0x142)],_0x537ee3[_0xf6185a(0x15d)]=_0x41dad0['qHEJo'];const _0x189f00={};_0x189f00['description']=_0x41dad0[_0xf6185a(0x13e)],_0x189f00[_0xf6185a(0x15d)]=_0x41dad0[_0xf6185a(0x14e)],_0x189f00[_0xf6185a(0x197)]=![];const _0x3fd388={};return _0x3fd388[_0xf6185a(0x151)]=_0x537ee3,_0x3fd388[_0xf6185a(0x179)]=_0x189f00,_0x3720fd[_0xf6185a(0x18f)](HELP_HEADER_MESSAGE[_0xf6185a(0x18b)])[_0xf6185a(0x15a)](HELP_FOOTER_MESSAGE)[_0xf6185a(0x14c)](_0x3fd388)[_0xf6185a(0x158)](_0x41dad0[_0xf6185a(0x15f)])[_0xf6185a(0x13c)];},exports[a19_0x111fe1(0x140)]=async function(_0x1f8497){const _0x4e98a9=a19_0x111fe1,_0x54266a={'jnIFZ':_0x4e98a9(0x147),'jagVL':function(_0x1adb1e){return _0x1adb1e();},'wSoGR':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','QlNgU':function(_0x1f791e,_0xc40ab9,_0x444005,_0x2debeb,_0x4261f7,_0x2e898d,_0x17b020){return _0x1f791e(_0xc40ab9,_0x444005,_0x2debeb,_0x4261f7,_0x2e898d,_0x17b020);},'qbype':_0x4e98a9(0x15e),'aHfRN':_0x4e98a9(0x163),'yWLpc':function(_0x472be0){return _0x472be0();},'fbffX':_0x4e98a9(0x178),'ScZsc':_0x4e98a9(0x162),'JOBAy':_0x4e98a9(0x194),'HlujJ':function(_0x358e42,_0x127c23,_0x42439e,_0x51057c){return _0x358e42(_0x127c23,_0x42439e,_0x51057c);},'fyETe':function(_0xce8395,_0x39bbaf,_0x37a818,_0x3205ff,_0x20b950,_0x3eac85,_0xc6dc85){return _0xce8395(_0x39bbaf,_0x37a818,_0x3205ff,_0x20b950,_0x3eac85,_0xc6dc85);},'ETYGD':function(_0x4651d2,_0x4c3b02,_0x2aec0f){return _0x4651d2(_0x4c3b02,_0x2aec0f);},'ZOoTt':_0x4e98a9(0x170),'Dslti':function(_0xd0c582,_0x2deca0){return _0xd0c582===_0x2deca0;},'CyHDt':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','UoTcx':'unauthorised','JXqLu':function(_0x2aa5c9,_0x492114){return _0x2aa5c9===_0x492114;},'PCnRf':function(_0x31e210,_0x37fb53,_0x24c496,_0x485737,_0x372926,_0x1a686a,_0x1f3c01){return _0x31e210(_0x37fb53,_0x24c496,_0x485737,_0x372926,_0x1a686a,_0x1f3c01);},'glaYG':_0x4e98a9(0x17f),'ODkqm':function(_0x54183a,_0x43eeb4,_0x4e524c,_0x3cfe5e,_0x15a164,_0x4900bf,_0xf0ee2b){return _0x54183a(_0x43eeb4,_0x4e524c,_0x3cfe5e,_0x15a164,_0x4900bf,_0xf0ee2b);},'vwgAe':_0x4e98a9(0x172)};let _0x400ae9;try{!_0x1f8497[_0x4e98a9(0x169)]&&(logger[_0x4e98a9(0x190)](_0x54266a[_0x4e98a9(0x165)]),process[_0x4e98a9(0x185)](0x1));!fs[_0x4e98a9(0x15c)](_0x54266a[_0x4e98a9(0x15b)](getCredentialsPath))&&(logger[_0x4e98a9(0x190)](_0x54266a[_0x4e98a9(0x192)]),await _0x54266a[_0x4e98a9(0x14a)](sendInstrumentationEvent,_0x1f8497,_0x54266a['qbype'],messageTypes[_0x4e98a9(0x173)],_0x54266a[_0x4e98a9(0x180)],null,_0x1f8497),process[_0x4e98a9(0x185)](0x1));logger[_0x4e98a9(0x188)](_0x4e98a9(0x148)+_0x1f8497[_0x4e98a9(0x169)]),await _0x54266a['QlNgU'](sendInstrumentationEvent,_0x1f8497,_0x54266a['qbype'],messageTypes[_0x4e98a9(0x168)],null,null,_0x1f8497);const _0x18d56a=JSON[_0x4e98a9(0x155)](fs['readFileSync'](_0x54266a['yWLpc'](getCredentialsPath)));global_registry[_0x4e98a9(0x141)]=_0x18d56a['Browserstack'][_0x4e98a9(0x196)],global_registry['bstackAccesskey']=_0x18d56a[_0x4e98a9(0x174)][_0x4e98a9(0x156)];const _0x41ed6a=WS_ENDPOINT[_0x4e98a9(0x13b)](_0x54266a[_0x4e98a9(0x167)],_0x18d56a['Browserstack'][_0x4e98a9(0x196)])[_0x4e98a9(0x13b)](_0x54266a[_0x4e98a9(0x146)],_0x18d56a[_0x4e98a9(0x174)]['password']),_0x262250={};_0x262250[_0x4e98a9(0x183)]=ws,_0x262250[_0x4e98a9(0x14b)]=0x36ee80,_0x400ae9=new ReconnectingWebSocket(_0x41ed6a,[],_0x262250),logger[_0x4e98a9(0x153)](_0x54266a[_0x4e98a9(0x154)]),webSocketUtils[_0x4e98a9(0x176)](_0x400ae9,_0x1f8497[_0x4e98a9(0x17d)],_0x1f8497[_0x4e98a9(0x156)]);const [_0x1364ac,_0xe5e5c0]=await _0x54266a[_0x4e98a9(0x17c)](getGridDetails,_0x18d56a[_0x4e98a9(0x174)][_0x4e98a9(0x196)],_0x18d56a[_0x4e98a9(0x174)][_0x4e98a9(0x156)],_0x1f8497[_0x4e98a9(0x169)]);if(_0xe5e5c0){const _0x50e546=_0xe5e5c0[_0x4e98a9(0x188)];global_registry[_0x4e98a9(0x145)]=_0x50e546['cloudProvider'],global_registry[_0x4e98a9(0x17e)]=_0x50e546[_0x4e98a9(0x16f)],global_registry[_0x4e98a9(0x18a)]=_0x50e546[_0x4e98a9(0x18a)];const _0x32a3b6=await _0x54266a[_0x4e98a9(0x138)](getCloudProviderObject,_0x50e546['cloudProvider'],_0x50e546['clusterName'],_0x50e546[_0x4e98a9(0x14d)],_0x400ae9,webSocketUtils,_0x1f8497),[_0x4e0722,_0x3ea1f1,_0x223594,_0x2f2b6a,_0x26b426,_0x5df744]=await _0x54266a['ETYGD'](createK8sClient,_0x32a3b6,_0x1f8497[_0x4e98a9(0x157)]);await _0x54266a['ETYGD'](scaleUpHubDeployment,_0x3ea1f1,_0x50e546[_0x4e98a9(0x14d)]),logger[_0x4e98a9(0x188)](_0x54266a[_0x4e98a9(0x17a)]),process[_0x4e98a9(0x185)](0x0);}_0x54266a[_0x4e98a9(0x164)](_0x1364ac[_0x4e98a9(0x16d)],0x191)&&(logger[_0x4e98a9(0x190)](_0x54266a[_0x4e98a9(0x16c)]),await _0x54266a['fyETe'](sendInstrumentationEvent,_0x1f8497,_0x54266a[_0x4e98a9(0x150)],messageTypes[_0x4e98a9(0x173)],_0x54266a['UoTcx'],null,_0x1f8497),process[_0x4e98a9(0x185)](0x1)),_0x54266a[_0x4e98a9(0x186)](_0x1364ac['statusCode'],0x190)&&(logger['error'](JSON[_0x4e98a9(0x155)](_0x1364ac[_0x4e98a9(0x13d)])[_0x4e98a9(0x143)]),await _0x54266a[_0x4e98a9(0x13f)](sendInstrumentationEvent,_0x1f8497,_0x54266a['qbype'],messageTypes[_0x4e98a9(0x173)],_0x54266a[_0x4e98a9(0x189)],null,_0x1f8497),process[_0x4e98a9(0x185)](0x1)),logger[_0x4e98a9(0x190)]('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON['stringify'](_0x1364ac)),await _0x54266a[_0x4e98a9(0x159)](sendInstrumentationEvent,_0x1f8497,_0x54266a[_0x4e98a9(0x150)],messageTypes[_0x4e98a9(0x173)],_0x54266a[_0x4e98a9(0x16a)],_0x1364ac,_0x1f8497),process['exit'](0x1);}catch(_0x27f803){const _0x2f5d30=_0x4e98a9(0x13a)+_0x27f803+'\x20\x0a'+JSON[_0x4e98a9(0x14f)](_0x27f803['stack'])+'\x20';logger[_0x4e98a9(0x190)](_0x2f5d30),process[_0x4e98a9(0x185)](0x1);}};