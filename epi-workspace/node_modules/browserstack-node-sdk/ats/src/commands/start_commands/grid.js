const a19_0x2fa2bb=a19_0x493d;function a19_0x493d(_0x2dcb9f,_0x35da4e){const _0x290f6f=a19_0x290f();return a19_0x493d=function(_0x493dfb,_0x3d5f3c){_0x493dfb=_0x493dfb-0x66;let _0x21099b=_0x290f6f[_0x493dfb];return _0x21099b;},a19_0x493d(_0x2dcb9f,_0x35da4e);}(function(_0x153932,_0x1586e6){const _0x3ee35=a19_0x493d,_0x15a6e6=_0x153932();while(!![]){try{const _0x1b279a=-parseInt(_0x3ee35(0xb5))/0x1+-parseInt(_0x3ee35(0x67))/0x2*(-parseInt(_0x3ee35(0x94))/0x3)+parseInt(_0x3ee35(0x7c))/0x4+parseInt(_0x3ee35(0xb0))/0x5+-parseInt(_0x3ee35(0x89))/0x6*(-parseInt(_0x3ee35(0xb6))/0x7)+parseInt(_0x3ee35(0x82))/0x8+-parseInt(_0x3ee35(0x92))/0x9*(parseInt(_0x3ee35(0x69))/0xa);if(_0x1b279a===_0x1586e6)break;else _0x15a6e6['push'](_0x15a6e6['shift']());}catch(_0x35f1ef){_0x15a6e6['push'](_0x15a6e6['shift']());}}}(a19_0x290f,0x1905e));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x2fa2bb(0xb1)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require('../../config/constants'),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require(a19_0x2fa2bb(0xbb)),{scaleUpHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require(a19_0x2fa2bb(0x88)),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require('../../cloudproviders/utils');exports[a19_0x2fa2bb(0x93)]=a19_0x2fa2bb(0x9c),exports[a19_0x2fa2bb(0x7e)]=a19_0x2fa2bb(0xa3),exports[a19_0x2fa2bb(0xb8)]=function(_0x121f41){const _0x185d45=a19_0x2fa2bb,_0x37099c={};_0x37099c[_0x185d45(0x6d)]=_0x185d45(0x9d),_0x37099c[_0x185d45(0x9a)]='string',_0x37099c[_0x185d45(0xb4)]=_0x185d45(0x66),_0x37099c[_0x185d45(0x99)]=_0x185d45(0x83),_0x37099c[_0x185d45(0x76)]=_0x185d45(0x87);const _0x3e97ca=_0x37099c,_0x6ed43e={};_0x6ed43e[_0x185d45(0x80)]=_0x3e97ca[_0x185d45(0x6d)],_0x6ed43e['type']=_0x3e97ca[_0x185d45(0x9a)];const _0x191859={};_0x191859[_0x185d45(0x80)]=_0x3e97ca['tWZod'],_0x191859[_0x185d45(0x70)]=_0x3e97ca[_0x185d45(0x99)],_0x191859[_0x185d45(0x6e)]=![];const _0x594303={};return _0x594303[_0x185d45(0x75)]=_0x6ed43e,_0x594303[_0x185d45(0xab)]=_0x191859,_0x121f41[_0x185d45(0x71)](HELP_HEADER_MESSAGE['start'])[_0x185d45(0xac)](HELP_FOOTER_MESSAGE)[_0x185d45(0xc0)](_0x594303)[_0x185d45(0x87)](_0x3e97ca['SRcsE'])[_0x185d45(0xbf)];},exports[a19_0x2fa2bb(0xa5)]=async function(_0x42d978){const _0x30c8c8=a19_0x2fa2bb,_0x4f8dda={'bmWqT':_0x30c8c8(0x6b),'SSMgY':function(_0xe6d4de){return _0xe6d4de();},'JMnWh':_0x30c8c8(0x77),'Ohhcl':function(_0x36f583,_0x1993ab,_0x5817f9,_0x25f724,_0x32d8ba,_0xbfda7e,_0x3c2b30){return _0x36f583(_0x1993ab,_0x5817f9,_0x25f724,_0x32d8ba,_0xbfda7e,_0x3c2b30);},'nANyi':'start-grid-called','oJIyr':_0x30c8c8(0x78),'kgacN':function(_0x251c94,_0x5c4e56,_0xdaf1cf,_0x3cb8ef,_0x4fdcce,_0x4a4c19,_0x3fbe81){return _0x251c94(_0x5c4e56,_0xdaf1cf,_0x3cb8ef,_0x4fdcce,_0x4a4c19,_0x3fbe81);},'GgoWu':function(_0x21ad5b){return _0x21ad5b();},'UYAGX':_0x30c8c8(0x8f),'NIgkC':_0x30c8c8(0x98),'XVMeY':'Adding\x20Websocket\x20listeners','IxZnU':function(_0xb89ddc,_0x5a21f1,_0x4c882d,_0x325914){return _0xb89ddc(_0x5a21f1,_0x4c882d,_0x325914);},'NqIqk':function(_0x39ffa2,_0x404e6c,_0x4b36a0){return _0x39ffa2(_0x404e6c,_0x4b36a0);},'xNbeV':_0x30c8c8(0xa0),'PGVtu':function(_0x300b77,_0xedac1d){return _0x300b77===_0xedac1d;},'Lgotk':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','LBNhW':_0x30c8c8(0x8e),'fvJzm':function(_0x5b6730,_0x29d41e){return _0x5b6730===_0x29d41e;},'zDgej':_0x30c8c8(0x73),'rCGtf':function(_0x476727,_0xd7e102,_0x5a5903,_0x2ced86,_0x592d0c,_0x6056ae,_0x352e09){return _0x476727(_0xd7e102,_0x5a5903,_0x2ced86,_0x592d0c,_0x6056ae,_0x352e09);},'DDtIz':'server-error'};let _0x3e8ce4;try{!_0x42d978[_0x30c8c8(0x81)]&&(logger[_0x30c8c8(0x9b)](_0x4f8dda[_0x30c8c8(0x7d)]),process[_0x30c8c8(0xa1)](0x1));!fs[_0x30c8c8(0x9e)](_0x4f8dda[_0x30c8c8(0x9f)](getCredentialsPath))&&(logger['error'](_0x4f8dda[_0x30c8c8(0x84)]),await _0x4f8dda[_0x30c8c8(0x7a)](sendInstrumentationEvent,_0x42d978,_0x4f8dda[_0x30c8c8(0xa9)],messageTypes[_0x30c8c8(0xb9)],_0x4f8dda[_0x30c8c8(0xad)],null,_0x42d978),process[_0x30c8c8(0xa1)](0x1));logger[_0x30c8c8(0x7b)](_0x30c8c8(0x6f)+_0x42d978[_0x30c8c8(0x81)]),await _0x4f8dda[_0x30c8c8(0xaf)](sendInstrumentationEvent,_0x42d978,_0x4f8dda[_0x30c8c8(0xa9)],messageTypes[_0x30c8c8(0xb7)],null,null,_0x42d978);const _0x50b4c3=JSON[_0x30c8c8(0xaa)](fs[_0x30c8c8(0xbe)](_0x4f8dda[_0x30c8c8(0x72)](getCredentialsPath)));global_registry[_0x30c8c8(0x79)]=_0x50b4c3[_0x30c8c8(0x6a)][_0x30c8c8(0x91)],global_registry['bstackAccesskey']=_0x50b4c3[_0x30c8c8(0x6a)][_0x30c8c8(0xa4)];const _0x354e84=WS_ENDPOINT[_0x30c8c8(0xb2)](_0x4f8dda[_0x30c8c8(0xbc)],_0x50b4c3['Browserstack'][_0x30c8c8(0x91)])['replace'](_0x4f8dda['NIgkC'],_0x50b4c3[_0x30c8c8(0x6a)][_0x30c8c8(0xa4)]),_0x1c1ca7={};_0x1c1ca7[_0x30c8c8(0x90)]=ws,_0x1c1ca7[_0x30c8c8(0x68)]=0x36ee80,_0x3e8ce4=new ReconnectingWebSocket(_0x354e84,[],_0x1c1ca7),logger[_0x30c8c8(0xb3)](_0x4f8dda[_0x30c8c8(0x7f)]),webSocketUtils[_0x30c8c8(0xa2)](_0x3e8ce4,_0x42d978[_0x30c8c8(0xa6)],_0x42d978[_0x30c8c8(0xa4)]);const [_0x7ce30c,_0x14119b]=await _0x4f8dda[_0x30c8c8(0x6c)](getGridDetails,_0x50b4c3[_0x30c8c8(0x6a)][_0x30c8c8(0x91)],_0x50b4c3[_0x30c8c8(0x6a)][_0x30c8c8(0xa4)],_0x42d978[_0x30c8c8(0x81)]);if(_0x14119b){const _0x24d02b=_0x14119b[_0x30c8c8(0x7b)];global_registry[_0x30c8c8(0x74)]=_0x24d02b[_0x30c8c8(0x74)],global_registry['clusterRegion']=_0x24d02b[_0x30c8c8(0xa7)],global_registry[_0x30c8c8(0x8b)]=_0x24d02b[_0x30c8c8(0x8b)];const _0x4df65d=await _0x4f8dda[_0x30c8c8(0xaf)](getCloudProviderObject,_0x24d02b[_0x30c8c8(0x74)],_0x24d02b[_0x30c8c8(0x8b)],_0x24d02b[_0x30c8c8(0xc1)],_0x3e8ce4,webSocketUtils,_0x42d978),[_0x204a75,_0x34c1d3,_0x38f8d1,_0x429f78,_0x5280c6,_0x44cb79]=await _0x4f8dda[_0x30c8c8(0x8c)](createK8sClient,_0x4df65d,_0x42d978[_0x30c8c8(0x85)]);await _0x4f8dda[_0x30c8c8(0x8c)](scaleUpHubDeployment,_0x34c1d3,_0x24d02b['name']),logger[_0x30c8c8(0x7b)](_0x4f8dda[_0x30c8c8(0xa8)]),process[_0x30c8c8(0xa1)](0x0);}_0x4f8dda[_0x30c8c8(0x8a)](_0x7ce30c[_0x30c8c8(0x86)],0x191)&&(logger[_0x30c8c8(0x9b)](_0x4f8dda[_0x30c8c8(0x8d)]),await _0x4f8dda[_0x30c8c8(0xaf)](sendInstrumentationEvent,_0x42d978,_0x4f8dda[_0x30c8c8(0xa9)],messageTypes[_0x30c8c8(0xb9)],_0x4f8dda[_0x30c8c8(0x96)],null,_0x42d978),process[_0x30c8c8(0xa1)](0x1)),_0x4f8dda[_0x30c8c8(0xae)](_0x7ce30c['statusCode'],0x190)&&(logger[_0x30c8c8(0x9b)](JSON['parse'](_0x7ce30c['body'])[_0x30c8c8(0xbd)]),await _0x4f8dda['Ohhcl'](sendInstrumentationEvent,_0x42d978,_0x4f8dda['nANyi'],messageTypes['ERROR'],_0x4f8dda[_0x30c8c8(0x95)],null,_0x42d978),process[_0x30c8c8(0xa1)](0x1)),logger[_0x30c8c8(0x9b)]('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON[_0x30c8c8(0xba)](_0x7ce30c)),await _0x4f8dda['rCGtf'](sendInstrumentationEvent,_0x42d978,_0x4f8dda['nANyi'],messageTypes[_0x30c8c8(0xb9)],_0x4f8dda[_0x30c8c8(0xc2)],_0x7ce30c,_0x42d978),process['exit'](0x1);}catch(_0x431db3){const _0x4f53d6='Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20'+_0x431db3+'\x20\x0a'+JSON[_0x30c8c8(0xba)](_0x431db3[_0x30c8c8(0x97)])+'\x20';logger[_0x30c8c8(0x9b)](_0x4f53d6),process[_0x30c8c8(0xa1)](0x1);}};function a19_0x290f(){const _0x74d997=['boolean','JMnWh','skipTlsCertVerify','statusCode','help','../../utils/webSocketUtils','3678BRaoCJ','PGVtu','clusterName','NqIqk','Lgotk','unauthorised','<UsernamePlaceholder>','WebSocket','username','1879749UZAoty','command','201ppQaoM','zDgej','LBNhW','stack','<PasswordPlaceholder>','vtGhq','OqWFu','error','grid','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','existsSync','SSMgY','Grid\x20started','exit','addListeners','Start\x20an\x20existing\x20Automation\x20grid.','password','handler','user','region','xNbeV','nANyi','parse','skip-tls-cert-verify','epilogue','oJIyr','fvJzm','kgacN','789540SgFdzZ','reconnecting-websocket','replace','debug','tWZod','22330mVSagY','1533MCYhUn','INFO','builder','ERROR','stringify','../../utils/utilityMethods','UYAGX','message','readFileSync','argv','options','name','DDtIz','Skip\x20insecure\x20cert\x20verification.','3134JhsqJq','connectionTimeout','30jGfBJl','Browserstack','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','IxZnU','PucCF','default','Starting\x20grid\x20','type','usage','GgoWu','invalid-grid-id','cloudProvider','grid-id','SRcsE','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','init-not-called','bstackUsername','Ohhcl','info','685548mDYhpW','bmWqT','desc','XVMeY','description','gridId','1463008tNSnXG'];a19_0x290f=function(){return _0x74d997;};return a19_0x290f();}