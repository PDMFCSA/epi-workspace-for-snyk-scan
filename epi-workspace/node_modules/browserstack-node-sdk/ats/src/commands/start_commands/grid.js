const a19_0xe7d4cd=a19_0x35ad;function a19_0x35ad(_0x1915a5,_0x4b34f3){const _0x4e19ca=a19_0x4e19();return a19_0x35ad=function(_0x35ad54,_0x3fb668){_0x35ad54=_0x35ad54-0x1b6;let _0xee9dff=_0x4e19ca[_0x35ad54];return _0xee9dff;},a19_0x35ad(_0x1915a5,_0x4b34f3);}(function(_0x5e4848,_0x51bada){const _0x52aed8=a19_0x35ad,_0x269415=_0x5e4848();while(!![]){try{const _0x58e359=parseInt(_0x52aed8(0x1e9))/0x1+-parseInt(_0x52aed8(0x1c4))/0x2+parseInt(_0x52aed8(0x1fb))/0x3+parseInt(_0x52aed8(0x1c1))/0x4*(-parseInt(_0x52aed8(0x1fe))/0x5)+-parseInt(_0x52aed8(0x1bc))/0x6*(-parseInt(_0x52aed8(0x1de))/0x7)+parseInt(_0x52aed8(0x1c7))/0x8+-parseInt(_0x52aed8(0x1ca))/0x9;if(_0x58e359===_0x51bada)break;else _0x269415['push'](_0x269415['shift']());}catch(_0x3aac0e){_0x269415['push'](_0x269415['shift']());}}}(a19_0x4e19,0x2a100));function a19_0x4e19(){const _0x5ca7da=['help','TMLUN','../../utils/instrumentationUtils','Adding\x20Websocket\x20listeners','desc','FLJwG','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','Skip\x20insecure\x20cert\x20verification.','nKVvV','unauthorised','../../config/constants','fNynq','exit','1107211JcDKYI','vyMOF','nEHZw','description','info','grid','bRhTA','kOaFM','gridId','parse','type','2396hwMMWB','invalid-grid-id','grid-id','HlRxA','clusterRegion','DCZYv','error','stringify','default','ixuTN','statusCode','Browserstack','clusterName','username','skip-tls-cert-verify','WebSocket','vftEq','name','843036WShvrv','jTUJc','ERROR','5YBKuzl','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','../../config/logger','existsSync','<UsernamePlaceholder>','ZxcyW','bstackAccesskey','CMgGl','init-not-called','boolean','bYHVt','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','cloudProvider','readFileSync','debug','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','NmQnP','LMiXr','usage','skipTlsCertVerify','FuikL','Start\x20an\x20existing\x20Automation\x20grid.','argv','start-grid-called','bstackUsername','../../cloudproviders/utils','../../utils/webSocketUtils','12YJkaGY','region','body','<PasswordPlaceholder>','password','452036gYbpid','command','handler','435454CyzNTz','lSKpG','LcrAR','1127728tEzoRW','xIaNn','../../utils/createk8sClient','2139264DrQXLx','INFO','pqzOE','replace','../../utils/utilityMethods','Cqqzu','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start'];a19_0x4e19=function(){return _0x5ca7da;};return a19_0x4e19();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0xe7d4cd(0x1db)),{logger}=require(a19_0xe7d4cd(0x200)),{getCredentialsPath,getGridDetails}=require(a19_0xe7d4cd(0x1ce)),{scaleUpHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require(a19_0xe7d4cd(0x1d3)),webSocketUtils=require(a19_0xe7d4cd(0x1bb)),{createK8sClient}=require(a19_0xe7d4cd(0x1c9)),{getCloudProviderObject}=require(a19_0xe7d4cd(0x1ba));exports[a19_0xe7d4cd(0x1c2)]=a19_0xe7d4cd(0x1e3),exports[a19_0xe7d4cd(0x1d5)]=a19_0xe7d4cd(0x1b6),exports['builder']=function(_0x3aa6dd){const _0x2cd484=a19_0xe7d4cd,_0x2ab1d9={};_0x2ab1d9[_0x2cd484(0x1dc)]=_0x2cd484(0x1d7),_0x2ab1d9[_0x2cd484(0x1cc)]='string',_0x2ab1d9[_0x2cd484(0x1d2)]=_0x2cd484(0x1d8),_0x2ab1d9[_0x2cd484(0x1ee)]=_0x2cd484(0x207),_0x2ab1d9[_0x2cd484(0x1c5)]=_0x2cd484(0x1d1);const _0x2a37dc=_0x2ab1d9,_0x1fe4ee={};_0x1fe4ee[_0x2cd484(0x1e1)]=_0x2a37dc['fNynq'],_0x1fe4ee[_0x2cd484(0x1e8)]=_0x2a37dc['pqzOE'];const _0x723a12={};_0x723a12['description']=_0x2a37dc[_0x2cd484(0x1d2)],_0x723a12[_0x2cd484(0x1e8)]=_0x2a37dc[_0x2cd484(0x1ee)],_0x723a12[_0x2cd484(0x1f1)]=![];const _0xf7aca={};return _0xf7aca[_0x2cd484(0x1eb)]=_0x1fe4ee,_0xf7aca[_0x2cd484(0x1f7)]=_0x723a12,_0x3aa6dd[_0x2cd484(0x210)](HELP_HEADER_MESSAGE['start'])['epilogue'](HELP_FOOTER_MESSAGE)['options'](_0xf7aca)[_0x2cd484(0x1d1)](_0x2a37dc[_0x2cd484(0x1c5)])[_0x2cd484(0x1b7)];},exports[a19_0xe7d4cd(0x1c3)]=async function(_0x5e1fb3){const _0x30030b=a19_0xe7d4cd,_0x1715e4={'LMiXr':_0x30030b(0x1d0),'NmQnP':function(_0x2c1b5a){return _0x2c1b5a();},'bYHVt':_0x30030b(0x20d),'LcrAR':function(_0xf3067e,_0x2fe118,_0x192d1a,_0x112201,_0x489fc9,_0x4c2c1a,_0x326eb8){return _0xf3067e(_0x2fe118,_0x192d1a,_0x112201,_0x489fc9,_0x4c2c1a,_0x326eb8);},'kOaFM':_0x30030b(0x1b8),'HlRxA':_0x30030b(0x206),'ixuTN':function(_0x5a552a,_0x12b6f9,_0x6c368a,_0x4ea2d5,_0x140083,_0x5802ec,_0x317585){return _0x5a552a(_0x12b6f9,_0x6c368a,_0x4ea2d5,_0x140083,_0x5802ec,_0x317585);},'CMgGl':function(_0x47959f){return _0x47959f();},'nKVvV':_0x30030b(0x202),'vyMOF':_0x30030b(0x1bf),'ZxcyW':_0x30030b(0x1d4),'bRhTA':function(_0x518060,_0x5e6440,_0x20775f,_0x4ef4e7){return _0x518060(_0x5e6440,_0x20775f,_0x4ef4e7);},'Cqqzu':function(_0x4d33cc,_0x349fb4,_0x543eb3,_0x25a8aa,_0x3567af,_0x22431a,_0x819ab3){return _0x4d33cc(_0x349fb4,_0x543eb3,_0x25a8aa,_0x3567af,_0x22431a,_0x819ab3);},'nEHZw':function(_0x2a08c6,_0x44984f,_0x40bf74){return _0x2a08c6(_0x44984f,_0x40bf74);},'xIaNn':'Grid\x20started','jTUJc':function(_0x3ca589,_0x11a918){return _0x3ca589===_0x11a918;},'FuikL':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','sCGbU':_0x30030b(0x1da),'FLJwG':function(_0x1930c7,_0x42d8de){return _0x1930c7===_0x42d8de;},'uZRUK':_0x30030b(0x1ea),'vftEq':'server-error'};let _0xf5da1e;try{!_0x5e1fb3['gridId']&&(logger[_0x30030b(0x1ef)](_0x1715e4[_0x30030b(0x20f)]),process[_0x30030b(0x1dd)](0x1));!fs[_0x30030b(0x201)](_0x1715e4[_0x30030b(0x20e)](getCredentialsPath))&&(logger[_0x30030b(0x1ef)](_0x1715e4[_0x30030b(0x208)]),await _0x1715e4[_0x30030b(0x1c6)](sendInstrumentationEvent,_0x5e1fb3,_0x1715e4[_0x30030b(0x1e5)],messageTypes['ERROR'],_0x1715e4[_0x30030b(0x1ec)],null,_0x5e1fb3),process[_0x30030b(0x1dd)](0x1));logger[_0x30030b(0x1e2)]('Starting\x20grid\x20'+_0x5e1fb3[_0x30030b(0x1e6)]),await _0x1715e4[_0x30030b(0x1f2)](sendInstrumentationEvent,_0x5e1fb3,_0x1715e4[_0x30030b(0x1e5)],messageTypes[_0x30030b(0x1cb)],null,null,_0x5e1fb3);const _0x460c7c=JSON['parse'](fs[_0x30030b(0x20b)](_0x1715e4[_0x30030b(0x205)](getCredentialsPath)));global_registry[_0x30030b(0x1b9)]=_0x460c7c[_0x30030b(0x1f4)][_0x30030b(0x1f6)],global_registry[_0x30030b(0x204)]=_0x460c7c[_0x30030b(0x1f4)]['password'];const _0x54ee3f=WS_ENDPOINT[_0x30030b(0x1cd)](_0x1715e4[_0x30030b(0x1d9)],_0x460c7c[_0x30030b(0x1f4)]['username'])['replace'](_0x1715e4[_0x30030b(0x1df)],_0x460c7c[_0x30030b(0x1f4)]['password']),_0x184669={};_0x184669[_0x30030b(0x1f8)]=ws,_0x184669['connectionTimeout']=0x36ee80,_0xf5da1e=new ReconnectingWebSocket(_0x54ee3f,[],_0x184669),logger[_0x30030b(0x20c)](_0x1715e4[_0x30030b(0x203)]),webSocketUtils['addListeners'](_0xf5da1e,_0x5e1fb3['user'],_0x5e1fb3[_0x30030b(0x1c0)]);const [_0x20df6a,_0x2f88c7]=await _0x1715e4[_0x30030b(0x1e4)](getGridDetails,_0x460c7c[_0x30030b(0x1f4)][_0x30030b(0x1f6)],_0x460c7c['Browserstack'][_0x30030b(0x1c0)],_0x5e1fb3[_0x30030b(0x1e6)]);if(_0x2f88c7){const _0x5ee35d=_0x2f88c7[_0x30030b(0x1e2)];global_registry['cloudProvider']=_0x5ee35d[_0x30030b(0x20a)],global_registry[_0x30030b(0x1ed)]=_0x5ee35d[_0x30030b(0x1bd)],global_registry[_0x30030b(0x1f5)]=_0x5ee35d[_0x30030b(0x1f5)];const _0x8d0198=await _0x1715e4['Cqqzu'](getCloudProviderObject,_0x5ee35d[_0x30030b(0x20a)],_0x5ee35d[_0x30030b(0x1f5)],_0x5ee35d[_0x30030b(0x1fa)],_0xf5da1e,webSocketUtils,_0x5e1fb3),[_0xdb05c6,_0x183f8f,_0x5816c9,_0x4211d7,_0x124822,_0xaa8a3e]=await _0x1715e4[_0x30030b(0x1e0)](createK8sClient,_0x8d0198,_0x5e1fb3[_0x30030b(0x211)]);await _0x1715e4[_0x30030b(0x1e0)](scaleUpHubDeployment,_0x183f8f,_0x5ee35d['name']),logger['info'](_0x1715e4[_0x30030b(0x1c8)]),process['exit'](0x0);}_0x1715e4[_0x30030b(0x1fc)](_0x20df6a[_0x30030b(0x1f3)],0x191)&&(logger[_0x30030b(0x1ef)](_0x1715e4[_0x30030b(0x212)]),await _0x1715e4[_0x30030b(0x1cf)](sendInstrumentationEvent,_0x5e1fb3,_0x1715e4['kOaFM'],messageTypes['ERROR'],_0x1715e4['sCGbU'],null,_0x5e1fb3),process['exit'](0x1)),_0x1715e4[_0x30030b(0x1d6)](_0x20df6a[_0x30030b(0x1f3)],0x190)&&(logger[_0x30030b(0x1ef)](JSON[_0x30030b(0x1e7)](_0x20df6a[_0x30030b(0x1be)])['message']),await _0x1715e4[_0x30030b(0x1c6)](sendInstrumentationEvent,_0x5e1fb3,_0x1715e4['kOaFM'],messageTypes['ERROR'],_0x1715e4['uZRUK'],null,_0x5e1fb3),process['exit'](0x1)),logger[_0x30030b(0x1ef)](_0x30030b(0x209)+JSON[_0x30030b(0x1f0)](_0x20df6a)),await _0x1715e4[_0x30030b(0x1cf)](sendInstrumentationEvent,_0x5e1fb3,_0x1715e4[_0x30030b(0x1e5)],messageTypes[_0x30030b(0x1fd)],_0x1715e4[_0x30030b(0x1f9)],_0x20df6a,_0x5e1fb3),process[_0x30030b(0x1dd)](0x1);}catch(_0x20fecd){const _0x5a1fa0=_0x30030b(0x1ff)+_0x20fecd+'\x20\x0a'+JSON[_0x30030b(0x1f0)](_0x20fecd['stack'])+'\x20';logger[_0x30030b(0x1ef)](_0x5a1fa0),process[_0x30030b(0x1dd)](0x1);}};