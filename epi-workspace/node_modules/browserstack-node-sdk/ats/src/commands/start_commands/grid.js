const a17_0x949da4=a17_0x30e5;function a17_0x478b(){const _0x399a1b=['builder','hFDmA','RkoGA','desc','../../utils/gridComponents','1GETJAe','Skip\x20insecure\x20cert\x20verification.','reconnecting-websocket','HwcEZ','HCuQI','usage','bstackUsername','5869940yWkUsd','NFHpX','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','user','stack','name','Browserstack','fYZdz','init-not-called','<PasswordPlaceholder>','username','boolean','unauthorised','options','message','KHONH','grid-id','WVdeO','readFileSync','gridId','stringify','4090023JMxuvj','clusterName','INFO','<UsernamePlaceholder>','8674248qQFjPB','pzMbI','izbdb','handler','lOfCH','35lgNZhZ','string','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','637148umlXhd','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','10umOChE','vxHrC','skipTlsCertVerify','command','addListeners','LZLWy','description','9728081pvTsyH','password','exit','parse','../../utils/utilityMethods','cloudProvider','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','debug','type','invalid-grid-id','../../utils/instrumentationUtils','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','oHTbi','../../config/logger','start','WebSocket','XIdio','XYsCC','hPKVF','help','clusterRegion','replace','ERROR','info','zsqZG','EjbJs','error','Grid\x20started','873786rKLvVX','MVvCj','FodaX','4VLvLtj','GnNQN','Start\x20an\x20existing\x20Automation\x20grid.','2823642EwDflF'];a17_0x478b=function(){return _0x399a1b;};return a17_0x478b();}(function(_0x12e2f2,_0x170f0e){const _0x263668=a17_0x30e5,_0x4fa000=_0x12e2f2();while(!![]){try{const _0x4b4aa9=-parseInt(_0x263668(0x159))/0x1*(-parseInt(_0x263668(0x181))/0x2)+-parseInt(_0x263668(0x153))/0x3+-parseInt(_0x263668(0x150))/0x4*(-parseInt(_0x263668(0x160))/0x5)+-parseInt(_0x263668(0x14d))/0x6*(-parseInt(_0x263668(0x17e))/0x7)+-parseInt(_0x263668(0x179))/0x8+parseInt(_0x263668(0x175))/0x9*(-parseInt(_0x263668(0x183))/0xa)+parseInt(_0x263668(0x18a))/0xb;if(_0x4b4aa9===_0x170f0e)break;else _0x4fa000['push'](_0x4fa000['shift']());}catch(_0x218336){_0x4fa000['push'](_0x4fa000['shift']());}}}(a17_0x478b,0x989fa));function a17_0x30e5(_0x4fbe09,_0x5a5b72){const _0x478b65=a17_0x478b();return a17_0x30e5=function(_0x30e55f,_0x253072){_0x30e55f=_0x30e55f-0x134;let _0x58cc3d=_0x478b65[_0x30e55f];return _0x58cc3d;},a17_0x30e5(_0x4fbe09,_0x5a5b72);}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a17_0x949da4(0x15b)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require('../../config/constants'),{logger}=require(a17_0x949da4(0x13e)),{getCredentialsPath,getGridDetails}=require(a17_0x949da4(0x135)),{scaleUpHubDeployment}=require(a17_0x949da4(0x158)),{sendInstrumentationEvent}=require(a17_0x949da4(0x13b)),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require('../../cloudproviders/utils');exports[a17_0x949da4(0x186)]='grid',exports[a17_0x949da4(0x157)]=a17_0x949da4(0x152),exports[a17_0x949da4(0x154)]=function(_0x529f72){const _0x448b27=a17_0x949da4,_0x528757={};_0x528757[_0x448b27(0x16f)]='Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.',_0x528757[_0x448b27(0x141)]=_0x448b27(0x17f),_0x528757[_0x448b27(0x149)]=_0x448b27(0x15a),_0x528757['XYsCC']=_0x448b27(0x16b),_0x528757[_0x448b27(0x17d)]=_0x448b27(0x144);const _0x2dbab8=_0x528757,_0x66062d={};_0x66062d[_0x448b27(0x189)]=_0x2dbab8[_0x448b27(0x16f)],_0x66062d[_0x448b27(0x139)]=_0x2dbab8[_0x448b27(0x141)];const _0x334aa8={};_0x334aa8[_0x448b27(0x189)]=_0x2dbab8[_0x448b27(0x149)],_0x334aa8[_0x448b27(0x139)]=_0x2dbab8[_0x448b27(0x142)],_0x334aa8['default']=![];const _0x6682e9={};return _0x6682e9[_0x448b27(0x170)]=_0x66062d,_0x6682e9['skip-tls-cert-verify']=_0x334aa8,_0x529f72[_0x448b27(0x15e)](HELP_HEADER_MESSAGE[_0x448b27(0x13f)])['epilogue'](HELP_FOOTER_MESSAGE)[_0x448b27(0x16d)](_0x6682e9)[_0x448b27(0x144)](_0x2dbab8['lOfCH'])['argv'];},exports[a17_0x949da4(0x17c)]=async function(_0x3d4077){const _0x599299=a17_0x949da4,_0x43c9c3={'lidyU':_0x599299(0x137),'pzMbI':function(_0x3ad58f){return _0x3ad58f();},'RkoGA':_0x599299(0x13c),'EjbJs':function(_0x3c1382,_0xb1a2f5,_0x460668,_0x3d22f1,_0x13d3d1,_0x4ff4d3,_0x44aa08){return _0x3c1382(_0xb1a2f5,_0x460668,_0x3d22f1,_0x13d3d1,_0x4ff4d3,_0x44aa08);},'fYZdz':'start-grid-called','vxHrC':_0x599299(0x168),'HwcEZ':function(_0x1387cf,_0x4a8f7a,_0x25a1f7,_0x5ef8ea,_0x248724,_0x13c3ed,_0x32bc70){return _0x1387cf(_0x4a8f7a,_0x25a1f7,_0x5ef8ea,_0x248724,_0x13c3ed,_0x32bc70);},'BrMsX':function(_0x173116){return _0x173116();},'hFDmA':_0x599299(0x178),'JTFLW':_0x599299(0x169),'NFHpX':'Adding\x20Websocket\x20listeners','HCuQI':function(_0x5d8a02,_0x4414ca,_0x29bcc8,_0x53e790){return _0x5d8a02(_0x4414ca,_0x29bcc8,_0x53e790);},'GnNQN':function(_0x29b73d,_0x40b9ee,_0x10f88f){return _0x29b73d(_0x40b9ee,_0x10f88f);},'izbdb':_0x599299(0x14c),'hPKVF':function(_0x4c8d2e,_0x543de7){return _0x4c8d2e===_0x543de7;},'mSyqO':_0x599299(0x162),'FWTYb':function(_0x1622f4,_0xaa77c,_0x48e03b,_0x12b6e9,_0x17d6dd,_0xd9edf8,_0x11b159){return _0x1622f4(_0xaa77c,_0x48e03b,_0x12b6e9,_0x17d6dd,_0xd9edf8,_0x11b159);},'WVdeO':_0x599299(0x16c),'LZLWy':function(_0x2ffe94,_0x1a8533,_0xc6a57d,_0x4fd138,_0x35fc23,_0x2ddb80,_0x5cab5a){return _0x2ffe94(_0x1a8533,_0xc6a57d,_0x4fd138,_0x35fc23,_0x2ddb80,_0x5cab5a);},'FodaX':_0x599299(0x13a),'MVvCj':function(_0x12f824,_0x224db3,_0x5d1980,_0x289f64,_0x9c5621,_0x53a8b2,_0x2b8ef6){return _0x12f824(_0x224db3,_0x5d1980,_0x289f64,_0x9c5621,_0x53a8b2,_0x2b8ef6);},'oHTbi':'server-error'};let _0x535ec9;try{!_0x3d4077[_0x599299(0x173)]&&(logger[_0x599299(0x14b)](_0x43c9c3['lidyU']),process[_0x599299(0x18c)](0x1));!fs['existsSync'](_0x43c9c3[_0x599299(0x17a)](getCredentialsPath))&&(logger[_0x599299(0x14b)](_0x43c9c3[_0x599299(0x156)]),await _0x43c9c3[_0x599299(0x14a)](sendInstrumentationEvent,_0x3d4077,_0x43c9c3[_0x599299(0x167)],messageTypes['ERROR'],_0x43c9c3[_0x599299(0x184)],null,_0x3d4077),process[_0x599299(0x18c)](0x1));logger['info']('Starting\x20grid\x20'+_0x3d4077[_0x599299(0x173)]),await _0x43c9c3[_0x599299(0x15c)](sendInstrumentationEvent,_0x3d4077,_0x43c9c3[_0x599299(0x167)],messageTypes[_0x599299(0x177)],null,null,_0x3d4077);const _0x26644a=JSON[_0x599299(0x134)](fs[_0x599299(0x172)](_0x43c9c3['BrMsX'](getCredentialsPath)));global_registry[_0x599299(0x15f)]=_0x26644a[_0x599299(0x166)][_0x599299(0x16a)],global_registry['bstackAccesskey']=_0x26644a[_0x599299(0x166)][_0x599299(0x18b)];const _0x1d4166=WS_ENDPOINT[_0x599299(0x146)](_0x43c9c3[_0x599299(0x155)],_0x26644a[_0x599299(0x166)][_0x599299(0x16a)])[_0x599299(0x146)](_0x43c9c3['JTFLW'],_0x26644a['Browserstack'][_0x599299(0x18b)]),_0x4f9776={};_0x4f9776[_0x599299(0x140)]=ws,_0x4f9776['connectionTimeout']=0x36ee80,_0x535ec9=new ReconnectingWebSocket(_0x1d4166,[],_0x4f9776),logger[_0x599299(0x138)](_0x43c9c3[_0x599299(0x161)]),webSocketUtils[_0x599299(0x187)](_0x535ec9,_0x3d4077[_0x599299(0x163)],_0x3d4077[_0x599299(0x18b)]);const [_0x1c994b,_0x227e3b]=await _0x43c9c3[_0x599299(0x15d)](getGridDetails,_0x26644a[_0x599299(0x166)][_0x599299(0x16a)],_0x26644a[_0x599299(0x166)]['password'],_0x3d4077[_0x599299(0x173)]);if(_0x227e3b){const _0x456e77=_0x227e3b[_0x599299(0x148)];global_registry[_0x599299(0x136)]=_0x456e77[_0x599299(0x136)],global_registry[_0x599299(0x145)]=_0x456e77['region'],global_registry[_0x599299(0x176)]=_0x456e77[_0x599299(0x176)];const _0x1c7ca6=await _0x43c9c3['EjbJs'](getCloudProviderObject,_0x456e77[_0x599299(0x136)],_0x456e77[_0x599299(0x176)],_0x456e77[_0x599299(0x165)],_0x535ec9,webSocketUtils,_0x3d4077),[_0x57775a,_0x5cb8f9,_0x43b6f1,_0x3169b6,_0xa5183d,_0x517b9a]=await _0x43c9c3[_0x599299(0x151)](createK8sClient,_0x1c7ca6,_0x3d4077[_0x599299(0x185)]);await _0x43c9c3[_0x599299(0x151)](scaleUpHubDeployment,_0x5cb8f9,_0x456e77[_0x599299(0x165)]),logger[_0x599299(0x148)](_0x43c9c3[_0x599299(0x17b)]),process[_0x599299(0x18c)](0x0);}_0x43c9c3['hPKVF'](_0x1c994b['statusCode'],0x191)&&(logger[_0x599299(0x14b)](_0x43c9c3['mSyqO']),await _0x43c9c3['FWTYb'](sendInstrumentationEvent,_0x3d4077,_0x43c9c3[_0x599299(0x167)],messageTypes[_0x599299(0x147)],_0x43c9c3[_0x599299(0x171)],null,_0x3d4077),process[_0x599299(0x18c)](0x1)),_0x43c9c3[_0x599299(0x143)](_0x1c994b['statusCode'],0x190)&&(logger[_0x599299(0x14b)](JSON[_0x599299(0x134)](_0x1c994b['body'])[_0x599299(0x16e)]),await _0x43c9c3[_0x599299(0x188)](sendInstrumentationEvent,_0x3d4077,_0x43c9c3[_0x599299(0x167)],messageTypes[_0x599299(0x147)],_0x43c9c3[_0x599299(0x14f)],null,_0x3d4077),process[_0x599299(0x18c)](0x1)),logger['error'](_0x599299(0x182)+JSON['stringify'](_0x1c994b)),await _0x43c9c3[_0x599299(0x14e)](sendInstrumentationEvent,_0x3d4077,_0x43c9c3[_0x599299(0x167)],messageTypes['ERROR'],_0x43c9c3[_0x599299(0x13d)],_0x1c994b,_0x3d4077),process[_0x599299(0x18c)](0x1);}catch(_0x45221c){const _0x648b87=_0x599299(0x180)+_0x45221c+'\x20\x0a'+JSON[_0x599299(0x174)](_0x45221c[_0x599299(0x164)])+'\x20';logger[_0x599299(0x14b)](_0x648b87),process[_0x599299(0x18c)](0x1);}};