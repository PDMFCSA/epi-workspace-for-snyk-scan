const a19_0x15508d=a19_0x39d1;function a19_0x39d1(_0x2fdd9c,_0xd5c063){const _0x40dabd=a19_0x40da();return a19_0x39d1=function(_0x39d1cf,_0x414d47){_0x39d1cf=_0x39d1cf-0x80;let _0x158270=_0x40dabd[_0x39d1cf];return _0x158270;},a19_0x39d1(_0x2fdd9c,_0xd5c063);}(function(_0x32da26,_0x41a1e6){const _0x59ec0e=a19_0x39d1,_0x4fc686=_0x32da26();while(!![]){try{const _0x32bdde=parseInt(_0x59ec0e(0xba))/0x1+-parseInt(_0x59ec0e(0x94))/0x2*(parseInt(_0x59ec0e(0xbe))/0x3)+-parseInt(_0x59ec0e(0xb9))/0x4+parseInt(_0x59ec0e(0x91))/0x5+parseInt(_0x59ec0e(0xcf))/0x6+parseInt(_0x59ec0e(0xce))/0x7*(-parseInt(_0x59ec0e(0x83))/0x8)+parseInt(_0x59ec0e(0xd5))/0x9;if(_0x32bdde===_0x41a1e6)break;else _0x4fc686['push'](_0x4fc686['shift']());}catch(_0x2d09ec){_0x4fc686['push'](_0x4fc686['shift']());}}}(a19_0x40da,0x6b15e));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x15508d(0xd6)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x15508d(0xc0)),{logger}=require(a19_0x15508d(0x98)),{getCredentialsPath,getGridDetails}=require(a19_0x15508d(0xb0)),{scaleUpHubDeployment}=require(a19_0x15508d(0xb7)),{sendInstrumentationEvent}=require(a19_0x15508d(0xa3)),webSocketUtils=require(a19_0x15508d(0x95)),{createK8sClient}=require(a19_0x15508d(0xa9)),{getCloudProviderObject}=require(a19_0x15508d(0xc9));function a19_0x40da(){const _0x27fc0a=['XWBMs','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','addListeners','username','command','WcSKG','bstackAccesskey','<UsernamePlaceholder>','../../utils/instrumentationUtils','info','start','readFileSync','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','help','../../utils/createk8sClient','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','AKAmU','unauthorised','Start\x20an\x20existing\x20Automation\x20grid.','debug','yggCJ','../../utils/utilityMethods','options','Adding\x20Websocket\x20listeners','parse','exit','grid','ipEkP','../../utils/gridComponents','kBuEm','2711816atzaWg','75230wIzqhj','Starting\x20grid\x20','invalid-grid-id','replace','3nswrwP','Browserstack','../../config/constants','WebSocket','QBRnx','bstackUsername','user','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','builder','grid-id','ERROR','../../cloudproviders/utils','MKKTl','type','hxciw','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','7AfAhrY','2917380thAfgi','statusCode','start-grid-called','ZNoZu','desc','stringify','8212311dwWwVP','reconnecting-websocket','server-error','EYtZO','Skip\x20insecure\x20cert\x20verification.','2950744lPtMmR','password','stack','kLdqQ','Plije','QYgqu','default','oOVrG','gBKDR','gridId','WdWsO','XKbEf','cloudProvider','clusterName','3508335rzUXdG','clusterRegion','name','1380374DuiVQH','../../utils/webSocketUtils','skip-tls-cert-verify','GbQXB','../../config/logger','ldbxK','error'];a19_0x40da=function(){return _0x27fc0a;};return a19_0x40da();}exports[a19_0x15508d(0x9f)]=a19_0x15508d(0xb5),exports[a19_0x15508d(0xd3)]=a19_0x15508d(0xad),exports[a19_0x15508d(0xc6)]=function(_0xf6577d){const _0x46b626=a19_0x15508d,_0x417c3a={};_0x417c3a[_0x46b626(0x99)]=_0x46b626(0x9c),_0x417c3a[_0x46b626(0xcc)]='string',_0x417c3a[_0x46b626(0x8b)]=_0x46b626(0x82),_0x417c3a[_0x46b626(0x81)]='boolean',_0x417c3a['WcSKG']=_0x46b626(0xa8);const _0x391bce=_0x417c3a,_0x19ee0c={};_0x19ee0c['description']=_0x391bce[_0x46b626(0x99)],_0x19ee0c[_0x46b626(0xcb)]=_0x391bce['hxciw'];const _0x63b353={};_0x63b353['description']=_0x391bce[_0x46b626(0x8b)],_0x63b353[_0x46b626(0xcb)]=_0x391bce[_0x46b626(0x81)],_0x63b353[_0x46b626(0x89)]=![];const _0x533be5={};return _0x533be5[_0x46b626(0xc7)]=_0x19ee0c,_0x533be5[_0x46b626(0x96)]=_0x63b353,_0xf6577d['usage'](HELP_HEADER_MESSAGE[_0x46b626(0xa5)])['epilogue'](HELP_FOOTER_MESSAGE)[_0x46b626(0xb1)](_0x533be5)[_0x46b626(0xa8)](_0x391bce[_0x46b626(0xa0)])['argv'];},exports['handler']=async function(_0x3d36f1){const _0x5851d9=a19_0x15508d,_0x19b488={'ipEkP':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','kLdqQ':function(_0x5193b8){return _0x5193b8();},'Plije':_0x5851d9(0xcd),'ZNoZu':function(_0x47281b,_0x41900d,_0x323462,_0x44c478,_0x337e2e,_0x50b057,_0x132996){return _0x47281b(_0x41900d,_0x323462,_0x44c478,_0x337e2e,_0x50b057,_0x132996);},'WdWsO':_0x5851d9(0xd1),'QYgqu':'init-not-called','AKAmU':_0x5851d9(0xa2),'MKKTl':'<PasswordPlaceholder>','ZbomB':_0x5851d9(0xb2),'XWBMs':function(_0x5141f2,_0x30a7c2,_0x3dfdca,_0x56382e){return _0x5141f2(_0x30a7c2,_0x3dfdca,_0x56382e);},'pnKbq':function(_0x5a9686,_0x163f63,_0x54c8d8){return _0x5a9686(_0x163f63,_0x54c8d8);},'ARcpo':function(_0x4861bf,_0x400f5f,_0x550b12){return _0x4861bf(_0x400f5f,_0x550b12);},'XKbEf':'Grid\x20started','GbQXB':function(_0x3bb027,_0x482ba9){return _0x3bb027===_0x482ba9;},'NOosv':_0x5851d9(0xa7),'QBRnx':function(_0xcc0a79,_0x9fb8e3,_0x52ab30,_0x5a93a1,_0x28a185,_0x3c87af,_0x2ec631){return _0xcc0a79(_0x9fb8e3,_0x52ab30,_0x5a93a1,_0x28a185,_0x3c87af,_0x2ec631);},'kBuEm':_0x5851d9(0xac),'oOVrG':_0x5851d9(0xbc),'yggCJ':_0x5851d9(0x80)};let _0x209fbd;try{!_0x3d36f1[_0x5851d9(0x8c)]&&(logger[_0x5851d9(0x9a)](_0x19b488[_0x5851d9(0xb6)]),process[_0x5851d9(0xb4)](0x1));!fs['existsSync'](_0x19b488[_0x5851d9(0x86)](getCredentialsPath))&&(logger['error'](_0x19b488[_0x5851d9(0x87)]),await _0x19b488['ZNoZu'](sendInstrumentationEvent,_0x3d36f1,_0x19b488[_0x5851d9(0x8d)],messageTypes[_0x5851d9(0xc8)],_0x19b488[_0x5851d9(0x88)],null,_0x3d36f1),process[_0x5851d9(0xb4)](0x1));logger['info'](_0x5851d9(0xbb)+_0x3d36f1[_0x5851d9(0x8c)]),await _0x19b488[_0x5851d9(0xd2)](sendInstrumentationEvent,_0x3d36f1,_0x19b488[_0x5851d9(0x8d)],messageTypes['INFO'],null,null,_0x3d36f1);const _0x10944f=JSON[_0x5851d9(0xb3)](fs[_0x5851d9(0xa6)](_0x19b488[_0x5851d9(0x86)](getCredentialsPath)));global_registry[_0x5851d9(0xc3)]=_0x10944f[_0x5851d9(0xbf)][_0x5851d9(0x9e)],global_registry[_0x5851d9(0xa1)]=_0x10944f[_0x5851d9(0xbf)][_0x5851d9(0x84)];const _0x3e2802=WS_ENDPOINT['replace'](_0x19b488[_0x5851d9(0xab)],_0x10944f[_0x5851d9(0xbf)][_0x5851d9(0x9e)])[_0x5851d9(0xbd)](_0x19b488[_0x5851d9(0xca)],_0x10944f[_0x5851d9(0xbf)]['password']),_0x596e0f={};_0x596e0f[_0x5851d9(0xc1)]=ws,_0x596e0f['connectionTimeout']=0x36ee80,_0x209fbd=new ReconnectingWebSocket(_0x3e2802,[],_0x596e0f),logger[_0x5851d9(0xae)](_0x19b488['ZbomB']),webSocketUtils[_0x5851d9(0x9d)](_0x209fbd,_0x3d36f1[_0x5851d9(0xc4)],_0x3d36f1[_0x5851d9(0x84)]);const [_0x1ddc55,_0x26dee9]=await _0x19b488[_0x5851d9(0x9b)](getGridDetails,_0x10944f[_0x5851d9(0xbf)][_0x5851d9(0x9e)],_0x10944f[_0x5851d9(0xbf)]['password'],_0x3d36f1[_0x5851d9(0x8c)]);if(_0x26dee9){const _0x319a67=_0x26dee9[_0x5851d9(0xa4)];global_registry[_0x5851d9(0x8f)]=_0x319a67[_0x5851d9(0x8f)],global_registry[_0x5851d9(0x92)]=_0x319a67['region'],global_registry[_0x5851d9(0x90)]=_0x319a67[_0x5851d9(0x90)];const _0xbd1b50=await _0x19b488['ZNoZu'](getCloudProviderObject,_0x319a67[_0x5851d9(0x8f)],_0x319a67[_0x5851d9(0x90)],_0x319a67[_0x5851d9(0x93)],_0x209fbd,webSocketUtils,_0x3d36f1),[_0x534eb0,_0x4e8a58,_0x52271e,_0x322120,_0x155034,_0x1cadf2]=await _0x19b488['pnKbq'](createK8sClient,_0xbd1b50,_0x3d36f1['skipTlsCertVerify']);await _0x19b488['ARcpo'](scaleUpHubDeployment,_0x4e8a58,_0x319a67[_0x5851d9(0x93)]),logger[_0x5851d9(0xa4)](_0x19b488[_0x5851d9(0x8e)]),process[_0x5851d9(0xb4)](0x0);}_0x19b488['GbQXB'](_0x1ddc55[_0x5851d9(0xd0)],0x191)&&(logger[_0x5851d9(0x9a)](_0x19b488['NOosv']),await _0x19b488[_0x5851d9(0xc2)](sendInstrumentationEvent,_0x3d36f1,_0x19b488[_0x5851d9(0x8d)],messageTypes['ERROR'],_0x19b488[_0x5851d9(0xb8)],null,_0x3d36f1),process[_0x5851d9(0xb4)](0x1)),_0x19b488[_0x5851d9(0x97)](_0x1ddc55[_0x5851d9(0xd0)],0x190)&&(logger[_0x5851d9(0x9a)](JSON[_0x5851d9(0xb3)](_0x1ddc55['body'])['message']),await _0x19b488['ZNoZu'](sendInstrumentationEvent,_0x3d36f1,_0x19b488[_0x5851d9(0x8d)],messageTypes[_0x5851d9(0xc8)],_0x19b488[_0x5851d9(0x8a)],null,_0x3d36f1),process[_0x5851d9(0xb4)](0x1)),logger[_0x5851d9(0x9a)](_0x5851d9(0xc5)+JSON['stringify'](_0x1ddc55)),await _0x19b488[_0x5851d9(0xc2)](sendInstrumentationEvent,_0x3d36f1,_0x19b488[_0x5851d9(0x8d)],messageTypes[_0x5851d9(0xc8)],_0x19b488[_0x5851d9(0xaf)],_0x1ddc55,_0x3d36f1),process[_0x5851d9(0xb4)](0x1);}catch(_0x41aa80){const _0x4c50cb=_0x5851d9(0xaa)+_0x41aa80+'\x20\x0a'+JSON[_0x5851d9(0xd4)](_0x41aa80[_0x5851d9(0x85)])+'\x20';logger['error'](_0x4c50cb),process[_0x5851d9(0xb4)](0x1);}};