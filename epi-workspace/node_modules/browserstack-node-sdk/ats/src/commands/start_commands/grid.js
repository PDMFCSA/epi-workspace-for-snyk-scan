const a19_0xdb275=a19_0x11a7;function a19_0x460a(){const _0x338fd8=['<UsernamePlaceholder>','description','replace','Starting\x20grid\x20','7714553zQuAfU','string','sBvsn','password','addListeners','../../config/constants','user','exit','1945758DxWcXc','QjQLy','4TSwLZa','clusterRegion','type','parse','info','server-error','ERROR','../../utils/utilityMethods','UlQVb','builder','iTRfV','INFO','6mmQJvt','../../cloudproviders/utils','Ejhhw','error','message','existsSync','mYPTf','grid','Grid\x20started','debug','skipTlsCertVerify','default','invalid-grid-id','start','8YAuUvn','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','zshgZ','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','reconnecting-websocket','UbmYc','GomKU','../../utils/webSocketUtils','connectionTimeout','eAgVY','ExIvM','epilogue','../../utils/createk8sClient','JONWl','WebSocket','unauthorised','95xXpIcN','XMmOp','desc','body','ROYid','Start\x20an\x20existing\x20Automation\x20grid.','argv','stringify','Browserstack','../../config/logger','skip-tls-cert-verify','QUCzu','boolean','FLqlC','HqsfB','bstackAccesskey','username','command','../../utils/gridComponents','10558660iXuIhQ','clusterName','nqFCo','115259YDNLGe','help','11724720hvalHP','FozVB','2445381Vtydrt','gridId','nHvob','Skip\x20insecure\x20cert\x20verification.','start-grid-called','name','299212crktcT','12UYoLcu','handler','cloudProvider'];a19_0x460a=function(){return _0x338fd8;};return a19_0x460a();}(function(_0x3337d2,_0x24bd96){const _0x47c0dd=a19_0x11a7,_0x4789c6=_0x3337d2();while(!![]){try{const _0x306069=parseInt(_0x47c0dd(0xaf))/0x1*(-parseInt(_0x47c0dd(0xcb))/0x2)+-parseInt(_0x47c0dd(0xc9))/0x3+parseInt(_0x47c0dd(0xb9))/0x4*(-parseInt(_0x47c0dd(0x99))/0x5)+parseInt(_0x47c0dd(0xd7))/0x6*(parseInt(_0x47c0dd(0xac))/0x7)+-parseInt(_0x47c0dd(0x88))/0x8*(parseInt(_0x47c0dd(0xb3))/0x9)+parseInt(_0x47c0dd(0xb1))/0xa+parseInt(_0x47c0dd(0xc1))/0xb*(parseInt(_0x47c0dd(0xba))/0xc);if(_0x306069===_0x24bd96)break;else _0x4789c6['push'](_0x4789c6['shift']());}catch(_0x5531fa){_0x4789c6['push'](_0x4789c6['shift']());}}}(a19_0x460a,0xc5c79));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0xdb275(0x8d)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0xdb275(0xc6)),{logger}=require(a19_0xdb275(0xa2)),{getCredentialsPath,getGridDetails}=require(a19_0xdb275(0xd2)),{scaleUpHubDeployment}=require(a19_0xdb275(0xab)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require(a19_0xdb275(0x90)),{createK8sClient}=require(a19_0xdb275(0x95)),{getCloudProviderObject}=require(a19_0xdb275(0xd8));function a19_0x11a7(_0x4ea99b,_0x1e813f){const _0x460afa=a19_0x460a();return a19_0x11a7=function(_0x11a7a0,_0x5466e1){_0x11a7a0=_0x11a7a0-0x83;let _0x21322a=_0x460afa[_0x11a7a0];return _0x21322a;},a19_0x11a7(_0x4ea99b,_0x1e813f);}exports[a19_0xdb275(0xaa)]=a19_0xdb275(0xde),exports[a19_0xdb275(0x9b)]=a19_0xdb275(0x9e),exports[a19_0xdb275(0xd4)]=function(_0x1b4430){const _0x1312c9=a19_0xdb275,_0x5d6324={};_0x5d6324[_0x1312c9(0xc3)]='Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.',_0x5d6324[_0x1312c9(0x8f)]=_0x1312c9(0xc2),_0x5d6324[_0x1312c9(0xb2)]=_0x1312c9(0xb6),_0x5d6324[_0x1312c9(0xd9)]=_0x1312c9(0xa5),_0x5d6324[_0x1312c9(0xca)]=_0x1312c9(0xb0);const _0x3af446=_0x5d6324,_0x3b8446={};_0x3b8446[_0x1312c9(0xbe)]=_0x3af446['sBvsn'],_0x3b8446['type']=_0x3af446[_0x1312c9(0x8f)];const _0x3eed54={};_0x3eed54['description']=_0x3af446[_0x1312c9(0xb2)],_0x3eed54[_0x1312c9(0xcd)]=_0x3af446[_0x1312c9(0xd9)],_0x3eed54[_0x1312c9(0x85)]=![];const _0x3f0e83={};return _0x3f0e83['grid-id']=_0x3b8446,_0x3f0e83[_0x1312c9(0xa3)]=_0x3eed54,_0x1b4430['usage'](HELP_HEADER_MESSAGE[_0x1312c9(0x87)])[_0x1312c9(0x94)](HELP_FOOTER_MESSAGE)['options'](_0x3f0e83)['help'](_0x3af446[_0x1312c9(0xca)])[_0x1312c9(0x9f)];},exports[a19_0xdb275(0xbb)]=async function(_0x2080f4){const _0x522daa=a19_0xdb275,_0x166add={'mYPTf':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','nHvob':function(_0x175c88){return _0x175c88();},'QUCzu':_0x522daa(0x8c),'UbmYc':function(_0x38ba0b,_0x5da9bf,_0x4563df,_0x294f0a,_0x2e41fd,_0x8499e7,_0x26ad7d){return _0x38ba0b(_0x5da9bf,_0x4563df,_0x294f0a,_0x2e41fd,_0x8499e7,_0x26ad7d);},'eAgVY':_0x522daa(0xb7),'HqsfB':'init-not-called','xEYtn':_0x522daa(0xbd),'UlQVb':'<PasswordPlaceholder>','ROYid':'Adding\x20Websocket\x20listeners','zshgZ':function(_0x3fb6a3,_0x60fd84,_0x1959bb,_0x324d98){return _0x3fb6a3(_0x60fd84,_0x1959bb,_0x324d98);},'ExIvM':function(_0x4e9fe6,_0x196caf,_0x49ea02,_0x235e86,_0x26edd3,_0x21e960,_0x269a0b){return _0x4e9fe6(_0x196caf,_0x49ea02,_0x235e86,_0x26edd3,_0x21e960,_0x269a0b);},'FLqlC':function(_0x53f9cd,_0x588899,_0x1fde68){return _0x53f9cd(_0x588899,_0x1fde68);},'XqCII':_0x522daa(0xdf),'JONWl':function(_0x4c6afd,_0x356694){return _0x4c6afd===_0x356694;},'jZJhe':_0x522daa(0x8a),'ofiNt':function(_0x315025,_0x35ed6d,_0x39965e,_0xc3ce38,_0x284a1e,_0x32daf3,_0x301d9c){return _0x315025(_0x35ed6d,_0x39965e,_0xc3ce38,_0x284a1e,_0x32daf3,_0x301d9c);},'iTRfV':_0x522daa(0x98),'nqFCo':function(_0x4b6d13,_0x317799){return _0x4b6d13===_0x317799;},'XMmOp':_0x522daa(0x86),'muRBv':_0x522daa(0xd0)};let _0xa08aba;try{!_0x2080f4['gridId']&&(logger[_0x522daa(0xda)](_0x166add[_0x522daa(0xdd)]),process[_0x522daa(0xc8)](0x1));!fs[_0x522daa(0xdc)](_0x166add[_0x522daa(0xb5)](getCredentialsPath))&&(logger[_0x522daa(0xda)](_0x166add[_0x522daa(0xa4)]),await _0x166add[_0x522daa(0x8e)](sendInstrumentationEvent,_0x2080f4,_0x166add[_0x522daa(0x92)],messageTypes[_0x522daa(0xd1)],_0x166add[_0x522daa(0xa7)],null,_0x2080f4),process[_0x522daa(0xc8)](0x1));logger[_0x522daa(0xcf)](_0x522daa(0xc0)+_0x2080f4[_0x522daa(0xb4)]),await _0x166add[_0x522daa(0x8e)](sendInstrumentationEvent,_0x2080f4,_0x166add[_0x522daa(0x92)],messageTypes[_0x522daa(0xd6)],null,null,_0x2080f4);const _0x38d866=JSON[_0x522daa(0xce)](fs['readFileSync'](_0x166add[_0x522daa(0xb5)](getCredentialsPath)));global_registry['bstackUsername']=_0x38d866[_0x522daa(0xa1)][_0x522daa(0xa9)],global_registry[_0x522daa(0xa8)]=_0x38d866[_0x522daa(0xa1)]['password'];const _0x17be8f=WS_ENDPOINT[_0x522daa(0xbf)](_0x166add['xEYtn'],_0x38d866['Browserstack'][_0x522daa(0xa9)])[_0x522daa(0xbf)](_0x166add[_0x522daa(0xd3)],_0x38d866[_0x522daa(0xa1)][_0x522daa(0xc4)]),_0x2a659e={};_0x2a659e[_0x522daa(0x97)]=ws,_0x2a659e[_0x522daa(0x91)]=0x36ee80,_0xa08aba=new ReconnectingWebSocket(_0x17be8f,[],_0x2a659e),logger[_0x522daa(0x83)](_0x166add[_0x522daa(0x9d)]),webSocketUtils[_0x522daa(0xc5)](_0xa08aba,_0x2080f4[_0x522daa(0xc7)],_0x2080f4[_0x522daa(0xc4)]);const [_0x16454d,_0x46445c]=await _0x166add[_0x522daa(0x8b)](getGridDetails,_0x38d866['Browserstack']['username'],_0x38d866['Browserstack'][_0x522daa(0xc4)],_0x2080f4[_0x522daa(0xb4)]);if(_0x46445c){const _0x50979f=_0x46445c[_0x522daa(0xcf)];global_registry[_0x522daa(0xbc)]=_0x50979f[_0x522daa(0xbc)],global_registry[_0x522daa(0xcc)]=_0x50979f['region'],global_registry[_0x522daa(0xad)]=_0x50979f[_0x522daa(0xad)];const _0x26f646=await _0x166add[_0x522daa(0x93)](getCloudProviderObject,_0x50979f['cloudProvider'],_0x50979f[_0x522daa(0xad)],_0x50979f[_0x522daa(0xb8)],_0xa08aba,webSocketUtils,_0x2080f4),[_0x3dda2f,_0x22d944,_0x5957b4,_0x100c2d,_0x3f6592,_0x317390]=await _0x166add['FLqlC'](createK8sClient,_0x26f646,_0x2080f4[_0x522daa(0x84)]);await _0x166add[_0x522daa(0xa6)](scaleUpHubDeployment,_0x22d944,_0x50979f[_0x522daa(0xb8)]),logger[_0x522daa(0xcf)](_0x166add['XqCII']),process[_0x522daa(0xc8)](0x0);}_0x166add[_0x522daa(0x96)](_0x16454d['statusCode'],0x191)&&(logger[_0x522daa(0xda)](_0x166add['jZJhe']),await _0x166add['ofiNt'](sendInstrumentationEvent,_0x2080f4,_0x166add[_0x522daa(0x92)],messageTypes[_0x522daa(0xd1)],_0x166add[_0x522daa(0xd5)],null,_0x2080f4),process['exit'](0x1)),_0x166add[_0x522daa(0xae)](_0x16454d['statusCode'],0x190)&&(logger['error'](JSON[_0x522daa(0xce)](_0x16454d[_0x522daa(0x9c)])[_0x522daa(0xdb)]),await _0x166add[_0x522daa(0x8e)](sendInstrumentationEvent,_0x2080f4,_0x166add[_0x522daa(0x92)],messageTypes[_0x522daa(0xd1)],_0x166add[_0x522daa(0x9a)],null,_0x2080f4),process['exit'](0x1)),logger[_0x522daa(0xda)](_0x522daa(0x89)+JSON[_0x522daa(0xa0)](_0x16454d)),await _0x166add[_0x522daa(0x8e)](sendInstrumentationEvent,_0x2080f4,_0x166add[_0x522daa(0x92)],messageTypes['ERROR'],_0x166add['muRBv'],_0x16454d,_0x2080f4),process['exit'](0x1);}catch(_0x58d5fe){const _0x47079e='Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20'+_0x58d5fe+'\x20\x0a'+JSON[_0x522daa(0xa0)](_0x58d5fe['stack'])+'\x20';logger[_0x522daa(0xda)](_0x47079e),process[_0x522daa(0xc8)](0x1);}};