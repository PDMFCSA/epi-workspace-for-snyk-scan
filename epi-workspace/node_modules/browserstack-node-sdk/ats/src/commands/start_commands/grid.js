const a19_0x1629c1=a19_0x2347;(function(_0x401b76,_0x4758de){const _0x27a1e8=a19_0x2347,_0x5e4cef=_0x401b76();while(!![]){try{const _0x1152af=-parseInt(_0x27a1e8(0xd0))/0x1*(-parseInt(_0x27a1e8(0x120))/0x2)+-parseInt(_0x27a1e8(0xe7))/0x3*(-parseInt(_0x27a1e8(0xe0))/0x4)+-parseInt(_0x27a1e8(0xfc))/0x5+parseInt(_0x27a1e8(0x115))/0x6+-parseInt(_0x27a1e8(0x125))/0x7+parseInt(_0x27a1e8(0xf5))/0x8+-parseInt(_0x27a1e8(0xde))/0x9;if(_0x1152af===_0x4758de)break;else _0x5e4cef['push'](_0x5e4cef['shift']());}catch(_0x5593ef){_0x5e4cef['push'](_0x5e4cef['shift']());}}}(a19_0x5376,0x8509f));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x1629c1(0xef)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x1629c1(0xea)),{logger}=require(a19_0x1629c1(0xee)),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleUpHubDeployment}=require(a19_0x1629c1(0x11c)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require(a19_0x1629c1(0x100)),{createK8sClient}=require(a19_0x1629c1(0x126)),{getCloudProviderObject}=require('../../cloudproviders/utils');function a19_0x5376(){const _0x5d17ed=['TSpaW','start','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','../../config/logger','reconnecting-websocket','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','init-not-called','Adding\x20Websocket\x20listeners','info','readFileSync','7964104dGqUqX','gridId','clusterName','default','nKIdF','dOffL','vuIWE','2351630FawadH','stack','name','bstackUsername','../../utils/webSocketUtils','skip-tls-cert-verify','unauthorised','PGolg','WebSocket','rPZTi','region','desc','statusCode','skipTlsCertVerify','builder','NXLTI','HnKmU','command','usage','FKjLe','password','PQskF','TLGtv','server-error','debug','2539758CmAbfe','whlUC','stringify','invalid-grid-id','Xnmsx','Starting\x20grid\x20','type','../../utils/gridComponents','grid-id','user','bstackAccesskey','468neMTNc','<UsernamePlaceholder>','existsSync','start-grid-called','yoNGR','1518013KSnotU','../../utils/createk8sClient','vpmVg','ERROR','NopOP','<PasswordPlaceholder>','error','2155UUxtqz','help','description','DqWHR','UfDDg','boolean','Start\x20an\x20existing\x20Automation\x20grid.','Oxjil','Browserstack','addListeners','username','dNguA','parse','replace','8995140yAtNPe','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','8HemNwy','options','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','cloudProvider','message','string','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','462744aWVYtk','body','exit','../../config/constants'];a19_0x5376=function(){return _0x5d17ed;};return a19_0x5376();}function a19_0x2347(_0x40e322,_0x2c70fa){const _0x53763c=a19_0x5376();return a19_0x2347=function(_0x234775,_0xfcad1f){_0x234775=_0x234775-0xd0;let _0xf7be14=_0x53763c[_0x234775];return _0xf7be14;},a19_0x2347(_0x40e322,_0x2c70fa);}exports[a19_0x1629c1(0x10d)]='grid',exports[a19_0x1629c1(0x107)]=a19_0x1629c1(0xd6),exports[a19_0x1629c1(0x10a)]=function(_0x18c0f9){const _0x33732a=a19_0x1629c1,_0x3d3b15={};_0x3d3b15[_0x33732a(0xd3)]=_0x33732a(0xe6),_0x3d3b15[_0x33732a(0x119)]=_0x33732a(0xe5),_0x3d3b15['Oxjil']='Skip\x20insecure\x20cert\x20verification.',_0x3d3b15[_0x33732a(0xfb)]=_0x33732a(0xd5),_0x3d3b15[_0x33732a(0xd4)]=_0x33732a(0xd1);const _0x4d0b1c=_0x3d3b15,_0x3e6b1e={};_0x3e6b1e[_0x33732a(0xd2)]=_0x4d0b1c[_0x33732a(0xd3)],_0x3e6b1e['type']=_0x4d0b1c['Xnmsx'];const _0x56a692={};_0x56a692[_0x33732a(0xd2)]=_0x4d0b1c[_0x33732a(0xd7)],_0x56a692[_0x33732a(0x11b)]=_0x4d0b1c[_0x33732a(0xfb)],_0x56a692[_0x33732a(0xf8)]=![];const _0x350091={};return _0x350091[_0x33732a(0x11d)]=_0x3e6b1e,_0x350091[_0x33732a(0x101)]=_0x56a692,_0x18c0f9[_0x33732a(0x10e)](HELP_HEADER_MESSAGE[_0x33732a(0xec)])['epilogue'](HELP_FOOTER_MESSAGE)[_0x33732a(0xe1)](_0x350091)[_0x33732a(0xd1)](_0x4d0b1c[_0x33732a(0xd4)])['argv'];},exports['handler']=async function(_0x2a804c){const _0x16c960=a19_0x1629c1,_0x1f229e={'whlUC':_0x16c960(0xdf),'PQskF':function(_0x592919){return _0x592919();},'yoNGR':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','dNguA':function(_0x42bfcf,_0x9db9d7,_0x12ff7f,_0x249e68,_0x12694f,_0x12a2d8,_0x4182fb){return _0x42bfcf(_0x9db9d7,_0x12ff7f,_0x249e68,_0x12694f,_0x12a2d8,_0x4182fb);},'NXLTI':_0x16c960(0x123),'uBaiN':_0x16c960(0xf1),'vpmVg':function(_0x48c5b4){return _0x48c5b4();},'TLGtv':_0x16c960(0x121),'FKjLe':_0x16c960(0x12a),'PGolg':_0x16c960(0xf2),'NopOP':function(_0x5a2d46,_0x2fe2d1,_0x1deff8,_0x1f3c0c){return _0x5a2d46(_0x2fe2d1,_0x1deff8,_0x1f3c0c);},'nKIdF':function(_0xba1ab9,_0x16621d,_0x412155){return _0xba1ab9(_0x16621d,_0x412155);},'dOffL':'Grid\x20started','UMuID':function(_0x187fba,_0x396d54){return _0x187fba===_0x396d54;},'aUOyT':_0x16c960(0xed),'HnKmU':_0x16c960(0x102),'yQotO':function(_0x4f423d,_0x34af99){return _0x4f423d===_0x34af99;},'rPZTi':_0x16c960(0x118),'TSpaW':_0x16c960(0x113)};let _0x1d5cbe;try{!_0x2a804c['gridId']&&(logger[_0x16c960(0x12b)](_0x1f229e[_0x16c960(0x116)]),process[_0x16c960(0xe9)](0x1));!fs[_0x16c960(0x122)](_0x1f229e[_0x16c960(0x111)](getCredentialsPath))&&(logger['error'](_0x1f229e[_0x16c960(0x124)]),await _0x1f229e['dNguA'](sendInstrumentationEvent,_0x2a804c,_0x1f229e['NXLTI'],messageTypes[_0x16c960(0x128)],_0x1f229e['uBaiN'],null,_0x2a804c),process[_0x16c960(0xe9)](0x1));logger['info'](_0x16c960(0x11a)+_0x2a804c[_0x16c960(0xf6)]),await _0x1f229e[_0x16c960(0xdb)](sendInstrumentationEvent,_0x2a804c,_0x1f229e[_0x16c960(0x10b)],messageTypes['INFO'],null,null,_0x2a804c);const _0x234042=JSON['parse'](fs[_0x16c960(0xf4)](_0x1f229e[_0x16c960(0x127)](getCredentialsPath)));global_registry[_0x16c960(0xff)]=_0x234042[_0x16c960(0xd8)]['username'],global_registry[_0x16c960(0x11f)]=_0x234042[_0x16c960(0xd8)]['password'];const _0x522378=WS_ENDPOINT[_0x16c960(0xdd)](_0x1f229e[_0x16c960(0x112)],_0x234042[_0x16c960(0xd8)][_0x16c960(0xda)])['replace'](_0x1f229e[_0x16c960(0x10f)],_0x234042[_0x16c960(0xd8)][_0x16c960(0x110)]),_0x22a3e0={};_0x22a3e0[_0x16c960(0x104)]=ws,_0x22a3e0['connectionTimeout']=0x36ee80,_0x1d5cbe=new ReconnectingWebSocket(_0x522378,[],_0x22a3e0),logger[_0x16c960(0x114)](_0x1f229e[_0x16c960(0x103)]),webSocketUtils[_0x16c960(0xd9)](_0x1d5cbe,_0x2a804c[_0x16c960(0x11e)],_0x2a804c[_0x16c960(0x110)]);const [_0x475c6c,_0x5682d1]=await _0x1f229e[_0x16c960(0x129)](getGridDetails,_0x234042['Browserstack'][_0x16c960(0xda)],_0x234042['Browserstack'][_0x16c960(0x110)],_0x2a804c[_0x16c960(0xf6)]);if(_0x5682d1){const _0x155749=_0x5682d1[_0x16c960(0xf3)];global_registry[_0x16c960(0xe3)]=_0x155749[_0x16c960(0xe3)],global_registry['clusterRegion']=_0x155749[_0x16c960(0x106)],global_registry['clusterName']=_0x155749[_0x16c960(0xf7)];const _0x4a4620=await _0x1f229e['dNguA'](getCloudProviderObject,_0x155749[_0x16c960(0xe3)],_0x155749[_0x16c960(0xf7)],_0x155749[_0x16c960(0xfe)],_0x1d5cbe,webSocketUtils,_0x2a804c),[_0x48a32f,_0x240294,_0x5b6a79,_0x5663b1,_0x2e7e0c,_0x568c9f]=await _0x1f229e['nKIdF'](createK8sClient,_0x4a4620,_0x2a804c[_0x16c960(0x109)]);await _0x1f229e[_0x16c960(0xf9)](scaleUpHubDeployment,_0x240294,_0x155749[_0x16c960(0xfe)]),logger[_0x16c960(0xf3)](_0x1f229e[_0x16c960(0xfa)]),process[_0x16c960(0xe9)](0x0);}_0x1f229e['UMuID'](_0x475c6c[_0x16c960(0x108)],0x191)&&(logger[_0x16c960(0x12b)](_0x1f229e['aUOyT']),await _0x1f229e[_0x16c960(0xdb)](sendInstrumentationEvent,_0x2a804c,_0x1f229e['NXLTI'],messageTypes[_0x16c960(0x128)],_0x1f229e[_0x16c960(0x10c)],null,_0x2a804c),process[_0x16c960(0xe9)](0x1)),_0x1f229e['yQotO'](_0x475c6c[_0x16c960(0x108)],0x190)&&(logger['error'](JSON[_0x16c960(0xdc)](_0x475c6c[_0x16c960(0xe8)])[_0x16c960(0xe4)]),await _0x1f229e[_0x16c960(0xdb)](sendInstrumentationEvent,_0x2a804c,_0x1f229e[_0x16c960(0x10b)],messageTypes[_0x16c960(0x128)],_0x1f229e[_0x16c960(0x105)],null,_0x2a804c),process[_0x16c960(0xe9)](0x1)),logger[_0x16c960(0x12b)](_0x16c960(0xe2)+JSON[_0x16c960(0x117)](_0x475c6c)),await _0x1f229e['dNguA'](sendInstrumentationEvent,_0x2a804c,_0x1f229e[_0x16c960(0x10b)],messageTypes['ERROR'],_0x1f229e[_0x16c960(0xeb)],_0x475c6c,_0x2a804c),process[_0x16c960(0xe9)](0x1);}catch(_0x1c40ea){const _0x3d5c54=_0x16c960(0xf0)+_0x1c40ea+'\x20\x0a'+JSON[_0x16c960(0x117)](_0x1c40ea[_0x16c960(0xfd)])+'\x20';logger[_0x16c960(0x12b)](_0x3d5c54),process[_0x16c960(0xe9)](0x1);}};