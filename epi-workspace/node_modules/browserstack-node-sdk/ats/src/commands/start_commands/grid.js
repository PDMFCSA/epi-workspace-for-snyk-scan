const a19_0x3d143e=a19_0x1492;function a19_0x1492(_0xbe9bda,_0x3dedae){const _0x2b8fed=a19_0x2b8f();return a19_0x1492=function(_0x1492b6,_0x1e8dde){_0x1492b6=_0x1492b6-0x1d8;let _0x2fb6a3=_0x2b8fed[_0x1492b6];return _0x2fb6a3;},a19_0x1492(_0xbe9bda,_0x3dedae);}function a19_0x2b8f(){const _0x1994cd=['../../utils/webSocketUtils','parse','type','swmmK','grid','stack','5306IQmVqC','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','640bKqUXQ','cloudProvider','VweNK','83844kzZiRF','../../utils/instrumentationUtils','reconnecting-websocket','<PasswordPlaceholder>','afVxR','skip-tls-cert-verify','command','mCWpJ','grid-id','494112VBofwc','RLpAP','bstackUsername','KxTtp','string','error','ERROR','stringify','Browserstack','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','username','info','UVnmm','VbdgH','region','skipTlsCertVerify','gridId','Adding\x20Websocket\x20listeners','IKetv','Start\x20an\x20existing\x20Automation\x20grid.','boolean','2976736jiiEUI','name','Ksqwg','INFO','../../utils/gridComponents','2ljNwfr','Grid\x20started','options','5464nZMEai','builder','144475NgzCEd','uaPyQ','bstackAccesskey','nrMIJ','zpQzW','usage','init-not-called','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','replace','nFbto','IZSkU','clusterName','../../utils/createk8sClient','cfnoG','../../cloudproviders/utils','body','desc','../../config/logger','password','statusCode','user','30zTArBM','iuceT','epilogue','11BhaHda','JdOGZ','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','../../utils/utilityMethods','start-grid-called','exit','../../config/constants','VyVAZ','clusterRegion','argv','description','default','43122obVcNS','unauthorised','EUaHx','XbDJZ','12822372pYjaRU','help','debug','eoxCQ','existsSync','yyxne','<UsernamePlaceholder>'];a19_0x2b8f=function(){return _0x1994cd;};return a19_0x2b8f();}(function(_0x159762,_0x2ad292){const _0x5dfd75=a19_0x1492,_0x3043da=_0x159762();while(!![]){try{const _0x443c31=parseInt(_0x5dfd75(0x21e))/0x1+parseInt(_0x5dfd75(0x238))/0x2*(parseInt(_0x5dfd75(0x1ff))/0x3)+parseInt(_0x5dfd75(0x233))/0x4+parseInt(_0x5dfd75(0x1db))/0x5*(parseInt(_0x5dfd75(0x1f0))/0x6)+parseInt(_0x5dfd75(0x210))/0x7*(-parseInt(_0x5dfd75(0x1d9))/0x8)+parseInt(_0x5dfd75(0x215))/0x9*(parseInt(_0x5dfd75(0x212))/0xa)+parseInt(_0x5dfd75(0x1f3))/0xb*(-parseInt(_0x5dfd75(0x203))/0xc);if(_0x443c31===_0x2ad292)break;else _0x3043da['push'](_0x3043da['shift']());}catch(_0x37a729){_0x3043da['push'](_0x3043da['shift']());}}}(a19_0x2b8f,0x63654));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x3d143e(0x217)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x3d143e(0x1f9)),{logger}=require(a19_0x3d143e(0x1ec)),{getCredentialsPath,getGridDetails}=require(a19_0x3d143e(0x1f6)),{scaleUpHubDeployment}=require(a19_0x3d143e(0x237)),{sendInstrumentationEvent}=require(a19_0x3d143e(0x216)),webSocketUtils=require(a19_0x3d143e(0x20a)),{createK8sClient}=require(a19_0x3d143e(0x1e7)),{getCloudProviderObject}=require(a19_0x3d143e(0x1e9));exports[a19_0x3d143e(0x21b)]=a19_0x3d143e(0x20e),exports[a19_0x3d143e(0x1eb)]=a19_0x3d143e(0x231),exports[a19_0x3d143e(0x1da)]=function(_0x4ab408){const _0x3d5c12=a19_0x3d143e,_0x21c679={};_0x21c679[_0x3d5c12(0x1f1)]=_0x3d5c12(0x1e2),_0x21c679['zpQzW']=_0x3d5c12(0x222),_0x21c679[_0x3d5c12(0x208)]='Skip\x20insecure\x20cert\x20verification.',_0x21c679[_0x3d5c12(0x206)]=_0x3d5c12(0x232),_0x21c679[_0x3d5c12(0x21c)]=_0x3d5c12(0x204);const _0x2acb4d=_0x21c679,_0x487b20={};_0x487b20[_0x3d5c12(0x1fd)]=_0x2acb4d[_0x3d5c12(0x1f1)],_0x487b20[_0x3d5c12(0x20c)]=_0x2acb4d[_0x3d5c12(0x1df)];const _0x2e28fe={};_0x2e28fe[_0x3d5c12(0x1fd)]=_0x2acb4d[_0x3d5c12(0x208)],_0x2e28fe['type']=_0x2acb4d[_0x3d5c12(0x206)],_0x2e28fe[_0x3d5c12(0x1fe)]=![];const _0x10c3af={};return _0x10c3af[_0x3d5c12(0x21d)]=_0x487b20,_0x10c3af[_0x3d5c12(0x21a)]=_0x2e28fe,_0x4ab408[_0x3d5c12(0x1e0)](HELP_HEADER_MESSAGE['start'])[_0x3d5c12(0x1f2)](HELP_FOOTER_MESSAGE)[_0x3d5c12(0x1d8)](_0x10c3af)[_0x3d5c12(0x204)](_0x2acb4d[_0x3d5c12(0x21c)])[_0x3d5c12(0x1fc)];},exports['handler']=async function(_0x15f45a){const _0x45732d=a19_0x3d143e,_0x4cabcb={'VbdgH':_0x45732d(0x211),'KxTtp':function(_0x472f6e){return _0x472f6e();},'VyVAZ':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','EUaHx':function(_0x1c28de,_0x25f9a3,_0x5952c2,_0x1899c1,_0x2946e0,_0x339414,_0x40e0a2){return _0x1c28de(_0x25f9a3,_0x5952c2,_0x1899c1,_0x2946e0,_0x339414,_0x40e0a2);},'RLpAP':_0x45732d(0x1f7),'RxVbC':_0x45732d(0x1e1),'swmmK':function(_0x508b0d,_0x1e31df,_0x5d9201,_0x13b744,_0x8c38fe,_0x172c46,_0x3a3eee){return _0x508b0d(_0x1e31df,_0x5d9201,_0x13b744,_0x8c38fe,_0x172c46,_0x3a3eee);},'XbDJZ':_0x45732d(0x209),'IZSkU':_0x45732d(0x218),'nFbto':_0x45732d(0x22f),'IKetv':function(_0x5f5777,_0x47d76f,_0x3c7617,_0x4e2fca){return _0x5f5777(_0x47d76f,_0x3c7617,_0x4e2fca);},'cfnoG':function(_0x232456,_0x2a10ac,_0x270ac5,_0x7cb702,_0x2bc569,_0x54a563,_0x4df9bd){return _0x232456(_0x2a10ac,_0x270ac5,_0x7cb702,_0x2bc569,_0x54a563,_0x4df9bd);},'nrMIJ':function(_0xa84043,_0x47da1f,_0x11d20e){return _0xa84043(_0x47da1f,_0x11d20e);},'JdOGZ':_0x45732d(0x239),'uaPyQ':function(_0x27a1ae,_0x2b0e08){return _0x27a1ae===_0x2b0e08;},'VweNK':_0x45732d(0x1f5),'afVxR':_0x45732d(0x200),'Ksqwg':'invalid-grid-id','UVnmm':'server-error'};let _0x5e08f6;try{!_0x15f45a[_0x45732d(0x22e)]&&(logger[_0x45732d(0x223)](_0x4cabcb[_0x45732d(0x22b)]),process[_0x45732d(0x1f8)](0x1));!fs[_0x45732d(0x207)](_0x4cabcb[_0x45732d(0x221)](getCredentialsPath))&&(logger[_0x45732d(0x223)](_0x4cabcb[_0x45732d(0x1fa)]),await _0x4cabcb[_0x45732d(0x201)](sendInstrumentationEvent,_0x15f45a,_0x4cabcb[_0x45732d(0x21f)],messageTypes[_0x45732d(0x224)],_0x4cabcb['RxVbC'],null,_0x15f45a),process[_0x45732d(0x1f8)](0x1));logger[_0x45732d(0x229)]('Starting\x20grid\x20'+_0x15f45a[_0x45732d(0x22e)]),await _0x4cabcb[_0x45732d(0x20d)](sendInstrumentationEvent,_0x15f45a,_0x4cabcb['RLpAP'],messageTypes[_0x45732d(0x236)],null,null,_0x15f45a);const _0x11a221=JSON[_0x45732d(0x20b)](fs['readFileSync'](_0x4cabcb[_0x45732d(0x221)](getCredentialsPath)));global_registry[_0x45732d(0x220)]=_0x11a221[_0x45732d(0x226)][_0x45732d(0x228)],global_registry[_0x45732d(0x1dd)]=_0x11a221[_0x45732d(0x226)][_0x45732d(0x1ed)];const _0x1abdd5=WS_ENDPOINT[_0x45732d(0x1e3)](_0x4cabcb[_0x45732d(0x202)],_0x11a221[_0x45732d(0x226)][_0x45732d(0x228)])[_0x45732d(0x1e3)](_0x4cabcb[_0x45732d(0x1e5)],_0x11a221[_0x45732d(0x226)][_0x45732d(0x1ed)]),_0x24cac3={};_0x24cac3['WebSocket']=ws,_0x24cac3['connectionTimeout']=0x36ee80,_0x5e08f6=new ReconnectingWebSocket(_0x1abdd5,[],_0x24cac3),logger[_0x45732d(0x205)](_0x4cabcb[_0x45732d(0x1e4)]),webSocketUtils['addListeners'](_0x5e08f6,_0x15f45a[_0x45732d(0x1ef)],_0x15f45a[_0x45732d(0x1ed)]);const [_0x2e6667,_0x20b86b]=await _0x4cabcb[_0x45732d(0x230)](getGridDetails,_0x11a221[_0x45732d(0x226)][_0x45732d(0x228)],_0x11a221['Browserstack'][_0x45732d(0x1ed)],_0x15f45a[_0x45732d(0x22e)]);if(_0x20b86b){const _0xf11ee3=_0x20b86b[_0x45732d(0x229)];global_registry['cloudProvider']=_0xf11ee3[_0x45732d(0x213)],global_registry[_0x45732d(0x1fb)]=_0xf11ee3[_0x45732d(0x22c)],global_registry['clusterName']=_0xf11ee3[_0x45732d(0x1e6)];const _0x37501e=await _0x4cabcb[_0x45732d(0x1e8)](getCloudProviderObject,_0xf11ee3[_0x45732d(0x213)],_0xf11ee3[_0x45732d(0x1e6)],_0xf11ee3[_0x45732d(0x234)],_0x5e08f6,webSocketUtils,_0x15f45a),[_0x10a8c7,_0xf7e092,_0x3a4999,_0x4a80de,_0x219d9b,_0x2ceead]=await _0x4cabcb[_0x45732d(0x1de)](createK8sClient,_0x37501e,_0x15f45a[_0x45732d(0x22d)]);await _0x4cabcb[_0x45732d(0x1de)](scaleUpHubDeployment,_0xf7e092,_0xf11ee3['name']),logger[_0x45732d(0x229)](_0x4cabcb[_0x45732d(0x1f4)]),process[_0x45732d(0x1f8)](0x0);}_0x4cabcb[_0x45732d(0x1dc)](_0x2e6667[_0x45732d(0x1ee)],0x191)&&(logger[_0x45732d(0x223)](_0x4cabcb[_0x45732d(0x214)]),await _0x4cabcb[_0x45732d(0x20d)](sendInstrumentationEvent,_0x15f45a,_0x4cabcb[_0x45732d(0x21f)],messageTypes[_0x45732d(0x224)],_0x4cabcb[_0x45732d(0x219)],null,_0x15f45a),process[_0x45732d(0x1f8)](0x1)),_0x4cabcb[_0x45732d(0x1dc)](_0x2e6667[_0x45732d(0x1ee)],0x190)&&(logger[_0x45732d(0x223)](JSON[_0x45732d(0x20b)](_0x2e6667[_0x45732d(0x1ea)])['message']),await _0x4cabcb[_0x45732d(0x20d)](sendInstrumentationEvent,_0x15f45a,_0x4cabcb['RLpAP'],messageTypes[_0x45732d(0x224)],_0x4cabcb[_0x45732d(0x235)],null,_0x15f45a),process[_0x45732d(0x1f8)](0x1)),logger['error'](_0x45732d(0x227)+JSON[_0x45732d(0x225)](_0x2e6667)),await _0x4cabcb[_0x45732d(0x1e8)](sendInstrumentationEvent,_0x15f45a,_0x4cabcb[_0x45732d(0x21f)],messageTypes[_0x45732d(0x224)],_0x4cabcb[_0x45732d(0x22a)],_0x2e6667,_0x15f45a),process[_0x45732d(0x1f8)](0x1);}catch(_0xfe5a50){const _0x45aabe='Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20'+_0xfe5a50+'\x20\x0a'+JSON[_0x45732d(0x225)](_0xfe5a50[_0x45732d(0x20f)])+'\x20';logger['error'](_0x45aabe),process[_0x45732d(0x1f8)](0x1);}};