const a19_0x1f1b52=a19_0x43d8;(function(_0x2e301a,_0x2df42d){const _0x4b4224=a19_0x43d8,_0x4e0c2a=_0x2e301a();while(!![]){try{const _0x3d16e8=-parseInt(_0x4b4224(0x139))/0x1*(-parseInt(_0x4b4224(0x10f))/0x2)+-parseInt(_0x4b4224(0x121))/0x3+-parseInt(_0x4b4224(0x129))/0x4*(-parseInt(_0x4b4224(0x11d))/0x5)+-parseInt(_0x4b4224(0x11b))/0x6*(-parseInt(_0x4b4224(0x113))/0x7)+parseInt(_0x4b4224(0x116))/0x8+-parseInt(_0x4b4224(0x109))/0x9+-parseInt(_0x4b4224(0x138))/0xa*(parseInt(_0x4b4224(0x115))/0xb);if(_0x3d16e8===_0x2df42d)break;else _0x4e0c2a['push'](_0x4e0c2a['shift']());}catch(_0x59c9f5){_0x4e0c2a['push'](_0x4e0c2a['shift']());}}}(a19_0x1335,0x97456));function a19_0x1335(){const _0x1b6814=['readFileSync','jxOaA','error','start-grid-called','INFO','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','iLKBB','username','message','help','cloudProvider','../../utils/gridComponents','Start\x20an\x20existing\x20Automation\x20grid.','UOIpM','AvCbB','vGIrG','HZKtp','handler','name','gridId','KnMjR','<PasswordPlaceholder>','../../utils/webSocketUtils','aZkCn','xlveG','lwsAa','password','user','../../config/constants','saFkD','Grid\x20started','nXlhW','existsSync','debug','epilogue','replace','parse','clusterRegion','eFoBa','type','info','init-not-called','jkqgj','6061176lazewn','bstackAccesskey','../../utils/instrumentationUtils','stringify','exit','desc','630GMzOfv','grid','jKbqd','description','24983GXgyzL','default','1243DXZyiN','2590416HYgWTQ','jIWeP','body','statusCode','connectionTimeout','1338PquIQy','grid-id','5787445irMTYc','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','hMLTe','ERROR','1366602YxJCvk','stack','Skip\x20insecure\x20cert\x20verification.','Starting\x20grid\x20','zVMwg','../../cloudproviders/utils','RMhcb','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','4JBTsPO','server-error','invalid-grid-id','BGBtr','reconnecting-websocket','region','argv','clusterName','uIoFf','addListeners','skip-tls-cert-verify','sxGBj','bstackUsername','Browserstack','opBRe','63530zriHUb','601XKJhar','usage','boolean','unauthorised','skipTlsCertVerify','string','start'];a19_0x1335=function(){return _0x1b6814;};return a19_0x1335();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x1f1b52(0x12d)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x1f1b52(0x15d)),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleUpHubDeployment}=require(a19_0x1f1b52(0x14c)),{sendInstrumentationEvent}=require(a19_0x1f1b52(0x10b)),webSocketUtils=require(a19_0x1f1b52(0x157)),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require(a19_0x1f1b52(0x126));function a19_0x43d8(_0x10449c,_0x2c711b){const _0x1335f9=a19_0x1335();return a19_0x43d8=function(_0x43d8c5,_0x29684d){_0x43d8c5=_0x43d8c5-0x108;let _0x1f97bd=_0x1335f9[_0x43d8c5];return _0x1f97bd;},a19_0x43d8(_0x10449c,_0x2c711b);}exports['command']=a19_0x1f1b52(0x110),exports[a19_0x1f1b52(0x10e)]=a19_0x1f1b52(0x14d),exports['builder']=function(_0x178d2d){const _0x367f89=a19_0x1f1b52,_0x5453b1={};_0x5453b1[_0x367f89(0x11f)]=_0x367f89(0x146),_0x5453b1[_0x367f89(0x160)]=_0x367f89(0x13e),_0x5453b1[_0x367f89(0x131)]=_0x367f89(0x123),_0x5453b1['sxGBj']=_0x367f89(0x13b),_0x5453b1[_0x367f89(0x137)]=_0x367f89(0x14a);const _0x1e89ce=_0x5453b1,_0x48b1b6={};_0x48b1b6[_0x367f89(0x112)]=_0x1e89ce[_0x367f89(0x11f)],_0x48b1b6[_0x367f89(0x168)]=_0x1e89ce['nXlhW'];const _0x5dd25f={};_0x5dd25f['description']=_0x1e89ce[_0x367f89(0x131)],_0x5dd25f['type']=_0x1e89ce[_0x367f89(0x134)],_0x5dd25f[_0x367f89(0x114)]=![];const _0x47df58={};return _0x47df58[_0x367f89(0x11c)]=_0x48b1b6,_0x47df58[_0x367f89(0x133)]=_0x5dd25f,_0x178d2d[_0x367f89(0x13a)](HELP_HEADER_MESSAGE[_0x367f89(0x13f)])[_0x367f89(0x163)](HELP_FOOTER_MESSAGE)['options'](_0x47df58)[_0x367f89(0x14a)](_0x1e89ce[_0x367f89(0x137)])[_0x367f89(0x12f)];},exports[a19_0x1f1b52(0x152)]=async function(_0x1bf9ea){const _0x5cfd46=a19_0x1f1b52,_0x228451={'RJsGr':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','lwsAa':function(_0x5be318){return _0x5be318();},'jIWeP':_0x5cfd46(0x11e),'RMhcb':function(_0x2a04f7,_0xcc4239,_0x2ff57c,_0x9c005f,_0x56c4e2,_0x1d5469,_0x546d07){return _0x2a04f7(_0xcc4239,_0x2ff57c,_0x9c005f,_0x56c4e2,_0x1d5469,_0x546d07);},'HZKtp':_0x5cfd46(0x143),'aZkCn':_0x5cfd46(0x16a),'TvIWi':function(_0x5ea815){return _0x5ea815();},'YjNmg':'<UsernamePlaceholder>','xlveG':_0x5cfd46(0x156),'zVMwg':'Adding\x20Websocket\x20listeners','KnMjR':function(_0xab85a2,_0x200a0a,_0x10116a,_0xbcd4c2){return _0xab85a2(_0x200a0a,_0x10116a,_0xbcd4c2);},'UOIpM':function(_0x4d0e4b,_0xf4f83f,_0x47a37a,_0x5f561e,_0x12a030,_0xa10993,_0x4bc3b7){return _0x4d0e4b(_0xf4f83f,_0x47a37a,_0x5f561e,_0x12a030,_0xa10993,_0x4bc3b7);},'iLKBB':function(_0x42460d,_0x103b36,_0x25527c){return _0x42460d(_0x103b36,_0x25527c);},'jKbqd':function(_0x984307,_0x1a9a89,_0x1354fc){return _0x984307(_0x1a9a89,_0x1354fc);},'BGBtr':_0x5cfd46(0x15f),'jxOaA':function(_0x1fa647,_0x4f1ba6){return _0x1fa647===_0x4f1ba6;},'YGpXL':_0x5cfd46(0x145),'vGIrG':function(_0x4e7d10,_0x342b33,_0x5f2817,_0x1c83d2,_0x444588,_0x592d9c,_0x51e425){return _0x4e7d10(_0x342b33,_0x5f2817,_0x1c83d2,_0x444588,_0x592d9c,_0x51e425);},'saFkD':_0x5cfd46(0x13c),'jkqgj':_0x5cfd46(0x12b),'eFoBa':function(_0x54bc15,_0x7c142f,_0x35c55f,_0x145c8c,_0x30eea3,_0x151afe,_0x505acb){return _0x54bc15(_0x7c142f,_0x35c55f,_0x145c8c,_0x30eea3,_0x151afe,_0x505acb);},'AvCbB':_0x5cfd46(0x12a)};let _0x10dd10;try{!_0x1bf9ea['gridId']&&(logger[_0x5cfd46(0x142)](_0x228451['RJsGr']),process['exit'](0x1));!fs[_0x5cfd46(0x161)](_0x228451[_0x5cfd46(0x15a)](getCredentialsPath))&&(logger[_0x5cfd46(0x142)](_0x228451[_0x5cfd46(0x117)]),await _0x228451[_0x5cfd46(0x127)](sendInstrumentationEvent,_0x1bf9ea,_0x228451[_0x5cfd46(0x151)],messageTypes[_0x5cfd46(0x120)],_0x228451[_0x5cfd46(0x158)],null,_0x1bf9ea),process['exit'](0x1));logger[_0x5cfd46(0x169)](_0x5cfd46(0x124)+_0x1bf9ea[_0x5cfd46(0x154)]),await _0x228451[_0x5cfd46(0x127)](sendInstrumentationEvent,_0x1bf9ea,_0x228451['HZKtp'],messageTypes[_0x5cfd46(0x144)],null,null,_0x1bf9ea);const _0x4e3867=JSON[_0x5cfd46(0x165)](fs[_0x5cfd46(0x140)](_0x228451['TvIWi'](getCredentialsPath)));global_registry[_0x5cfd46(0x135)]=_0x4e3867[_0x5cfd46(0x136)]['username'],global_registry[_0x5cfd46(0x10a)]=_0x4e3867[_0x5cfd46(0x136)][_0x5cfd46(0x15b)];const _0x102617=WS_ENDPOINT[_0x5cfd46(0x164)](_0x228451['YjNmg'],_0x4e3867[_0x5cfd46(0x136)][_0x5cfd46(0x148)])[_0x5cfd46(0x164)](_0x228451[_0x5cfd46(0x159)],_0x4e3867[_0x5cfd46(0x136)]['password']),_0x26004f={};_0x26004f['WebSocket']=ws,_0x26004f[_0x5cfd46(0x11a)]=0x36ee80,_0x10dd10=new ReconnectingWebSocket(_0x102617,[],_0x26004f),logger[_0x5cfd46(0x162)](_0x228451[_0x5cfd46(0x125)]),webSocketUtils[_0x5cfd46(0x132)](_0x10dd10,_0x1bf9ea[_0x5cfd46(0x15c)],_0x1bf9ea[_0x5cfd46(0x15b)]);const [_0x16603c,_0x4d43d9]=await _0x228451[_0x5cfd46(0x155)](getGridDetails,_0x4e3867[_0x5cfd46(0x136)][_0x5cfd46(0x148)],_0x4e3867['Browserstack'][_0x5cfd46(0x15b)],_0x1bf9ea[_0x5cfd46(0x154)]);if(_0x4d43d9){const _0x614d6f=_0x4d43d9['info'];global_registry['cloudProvider']=_0x614d6f[_0x5cfd46(0x14b)],global_registry[_0x5cfd46(0x166)]=_0x614d6f[_0x5cfd46(0x12e)],global_registry[_0x5cfd46(0x130)]=_0x614d6f[_0x5cfd46(0x130)];const _0x28d502=await _0x228451['UOIpM'](getCloudProviderObject,_0x614d6f['cloudProvider'],_0x614d6f[_0x5cfd46(0x130)],_0x614d6f[_0x5cfd46(0x153)],_0x10dd10,webSocketUtils,_0x1bf9ea),[_0x2d02ab,_0x3c208d,_0x500bfa,_0x1bda17,_0x11aa65,_0xf6e2dc]=await _0x228451[_0x5cfd46(0x147)](createK8sClient,_0x28d502,_0x1bf9ea[_0x5cfd46(0x13d)]);await _0x228451[_0x5cfd46(0x111)](scaleUpHubDeployment,_0x3c208d,_0x614d6f[_0x5cfd46(0x153)]),logger[_0x5cfd46(0x169)](_0x228451[_0x5cfd46(0x12c)]),process[_0x5cfd46(0x10d)](0x0);}_0x228451['jxOaA'](_0x16603c[_0x5cfd46(0x119)],0x191)&&(logger['error'](_0x228451['YGpXL']),await _0x228451[_0x5cfd46(0x150)](sendInstrumentationEvent,_0x1bf9ea,_0x228451[_0x5cfd46(0x151)],messageTypes['ERROR'],_0x228451[_0x5cfd46(0x15e)],null,_0x1bf9ea),process['exit'](0x1)),_0x228451[_0x5cfd46(0x141)](_0x16603c['statusCode'],0x190)&&(logger[_0x5cfd46(0x142)](JSON[_0x5cfd46(0x165)](_0x16603c[_0x5cfd46(0x118)])[_0x5cfd46(0x149)]),await _0x228451[_0x5cfd46(0x14e)](sendInstrumentationEvent,_0x1bf9ea,_0x228451['HZKtp'],messageTypes['ERROR'],_0x228451[_0x5cfd46(0x108)],null,_0x1bf9ea),process[_0x5cfd46(0x10d)](0x1)),logger[_0x5cfd46(0x142)]('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON[_0x5cfd46(0x10c)](_0x16603c)),await _0x228451[_0x5cfd46(0x167)](sendInstrumentationEvent,_0x1bf9ea,_0x228451['HZKtp'],messageTypes[_0x5cfd46(0x120)],_0x228451[_0x5cfd46(0x14f)],_0x16603c,_0x1bf9ea),process[_0x5cfd46(0x10d)](0x1);}catch(_0x3ce5e2){const _0x393caa=_0x5cfd46(0x128)+_0x3ce5e2+'\x20\x0a'+JSON[_0x5cfd46(0x10c)](_0x3ce5e2[_0x5cfd46(0x122)])+'\x20';logger[_0x5cfd46(0x142)](_0x393caa),process[_0x5cfd46(0x10d)](0x1);}};