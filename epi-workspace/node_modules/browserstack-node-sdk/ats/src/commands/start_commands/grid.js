const a19_0x22d33d=a19_0x2cae;function a19_0x3efb(){const _0x50f47a=['help','15182544hjFmHk','../../cloudproviders/utils','connectionTimeout','type','2143696gIhJfY','nrdmV','epilogue','rchnw','qKgaI','pmEFx','dqAvC','1188luugWy','reconnecting-websocket','info','debug','../../config/logger','ERROR','nyoOG','desc','10hipmmQ','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','Skip\x20insecure\x20cert\x20verification.','22708aUQDra','464192uxXLlS','luWrS','start','server-error','sscVm','Browserstack','Start\x20an\x20existing\x20Automation\x20grid.','GCyJh','unauthorised','cloudProvider','elpVr','username','body','usage','1519869XJnucJ','kUZaG','message','../../utils/gridComponents','GyaBY','password','name','boolean','baBUS','<UsernamePlaceholder>','exit','Grid\x20started','KMBJF','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','Adding\x20Websocket\x20listeners','53950xYINaS','start-grid-called','stack','error','readFileSync','Duhev','INFO','clusterName','options','KXMVj','grid-id','../../utils/utilityMethods','2tbmWvj','WebSocket','400Ildfao','region','statusCode','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','../../utils/createk8sClient','default','replace','Starting\x20grid\x20','gridId','existsSync','kKuXQ','description','clusterRegion','invalid-grid-id','parse','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','../../utils/instrumentationUtils','skipTlsCertVerify','22MhSqQM','string','uTAEe','<PasswordPlaceholder>','DWoyj','1999302NfDYNt','bstackAccesskey','bstackUsername'];a19_0x3efb=function(){return _0x50f47a;};return a19_0x3efb();}(function(_0x1eeeff,_0x2390fa){const _0x52c5e2=a19_0x2cae,_0x11007d=_0x1eeeff();while(!![]){try{const _0x324ba7=-parseInt(_0x52c5e2(0x82))/0x1+parseInt(_0x52c5e2(0xab))/0x2*(parseInt(_0x52c5e2(0x90))/0x3)+-parseInt(_0x52c5e2(0xcc))/0x4+parseInt(_0x52c5e2(0x7e))/0x5*(-parseInt(_0x52c5e2(0xc4))/0x6)+-parseInt(_0x52c5e2(0x81))/0x7*(parseInt(_0x52c5e2(0xad))/0x8)+-parseInt(_0x52c5e2(0x76))/0x9*(parseInt(_0x52c5e2(0x9f))/0xa)+-parseInt(_0x52c5e2(0xbf))/0xb*(-parseInt(_0x52c5e2(0xc8))/0xc);if(_0x324ba7===_0x2390fa)break;else _0x11007d['push'](_0x11007d['shift']());}catch(_0x520ae0){_0x11007d['push'](_0x11007d['shift']());}}}(a19_0x3efb,0x7921d));function a19_0x2cae(_0x37e8a9,_0x360a5d){const _0x3efbc3=a19_0x3efb();return a19_0x2cae=function(_0x2cae26,_0x4b3c1e){_0x2cae26=_0x2cae26-0x75;let _0x3b075b=_0x3efbc3[_0x2cae26];return _0x3b075b;},a19_0x2cae(_0x37e8a9,_0x360a5d);}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x22d33d(0x77)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require('../../config/constants'),{logger}=require(a19_0x22d33d(0x7a)),{getCredentialsPath,getGridDetails}=require(a19_0x22d33d(0xaa)),{scaleUpHubDeployment}=require(a19_0x22d33d(0x93)),{sendInstrumentationEvent}=require(a19_0x22d33d(0xbd)),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require(a19_0x22d33d(0xb1)),{getCloudProviderObject}=require(a19_0x22d33d(0xc9));exports['command']='grid',exports[a19_0x22d33d(0x7d)]=a19_0x22d33d(0x88),exports['builder']=function(_0xc43732){const _0x3fb2fb=a19_0x22d33d,_0x14bf7a={};_0x14bf7a[_0x3fb2fb(0xa4)]='Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.',_0x14bf7a[_0x3fb2fb(0x83)]=_0x3fb2fb(0xc0),_0x14bf7a[_0x3fb2fb(0x86)]=_0x3fb2fb(0x80),_0x14bf7a[_0x3fb2fb(0x89)]=_0x3fb2fb(0x97),_0x14bf7a['elpVr']=_0x3fb2fb(0xc7);const _0x5bf740=_0x14bf7a,_0xaf23ab={};_0xaf23ab[_0x3fb2fb(0xb8)]=_0x5bf740['Duhev'],_0xaf23ab[_0x3fb2fb(0xcb)]=_0x5bf740[_0x3fb2fb(0x83)];const _0x204f6e={};_0x204f6e[_0x3fb2fb(0xb8)]=_0x5bf740[_0x3fb2fb(0x86)],_0x204f6e[_0x3fb2fb(0xcb)]=_0x5bf740['GCyJh'],_0x204f6e[_0x3fb2fb(0xb2)]=![];const _0x3a7d0d={};return _0x3a7d0d[_0x3fb2fb(0xa9)]=_0xaf23ab,_0x3a7d0d['skip-tls-cert-verify']=_0x204f6e,_0xc43732[_0x3fb2fb(0x8f)](HELP_HEADER_MESSAGE[_0x3fb2fb(0x84)])[_0x3fb2fb(0xce)](HELP_FOOTER_MESSAGE)[_0x3fb2fb(0xa7)](_0x3a7d0d)[_0x3fb2fb(0xc7)](_0x5bf740[_0x3fb2fb(0x8c)])['argv'];},exports['handler']=async function(_0x24865a){const _0x4f20db=a19_0x22d33d,_0x44809c={'rchnw':_0x4f20db(0x7f),'dqAvC':function(_0x342c66){return _0x342c66();},'uTAEe':_0x4f20db(0x9d),'kUZaG':function(_0x126234,_0x1138a5,_0x2393e0,_0x2fc71b,_0x3ede69,_0x3ef64d,_0x38418e){return _0x126234(_0x1138a5,_0x2393e0,_0x2fc71b,_0x3ede69,_0x3ef64d,_0x38418e);},'pmEFx':_0x4f20db(0xa0),'RonJK':'init-not-called','KMBJF':function(_0x3ab921,_0x532a85,_0x32c66b,_0x3e1d63,_0x7cb14f,_0x238dc6,_0x55d0e7){return _0x3ab921(_0x532a85,_0x32c66b,_0x3e1d63,_0x7cb14f,_0x238dc6,_0x55d0e7);},'GyaBY':function(_0x41c84f){return _0x41c84f();},'qKgaI':_0x4f20db(0x99),'kKuXQ':_0x4f20db(0xc2),'KvklD':_0x4f20db(0x9e),'IVOPB':function(_0x30db3e,_0x1fd876,_0x5e7a98,_0x4ca028){return _0x30db3e(_0x1fd876,_0x5e7a98,_0x4ca028);},'KXMVj':function(_0x7db68,_0x4c675d,_0xbef366){return _0x7db68(_0x4c675d,_0xbef366);},'nrdmV':function(_0x25b164,_0x36f0be,_0x1277ed){return _0x25b164(_0x36f0be,_0x1277ed);},'nyoOG':_0x4f20db(0x9b),'IKkZj':function(_0x2a5efb,_0x1e01a3){return _0x2a5efb===_0x1e01a3;},'BDGyb':_0x4f20db(0xb0),'Zoqsx':function(_0x1669e0,_0x129305,_0x2dc328,_0x40f22b,_0x1dc04b,_0x4431c4,_0x383f49){return _0x1669e0(_0x129305,_0x2dc328,_0x40f22b,_0x1dc04b,_0x4431c4,_0x383f49);},'yPFBF':_0x4f20db(0x8a),'paIwC':function(_0x4b550f,_0x37c936,_0x33d871,_0x30b884,_0x690bb4,_0x47d0c1,_0x235e97){return _0x4b550f(_0x37c936,_0x33d871,_0x30b884,_0x690bb4,_0x47d0c1,_0x235e97);},'DWoyj':_0x4f20db(0xba),'baBUS':function(_0x3e9d3d,_0x409521,_0x6b1e75,_0x517baf,_0xffa0c5,_0x491ddb,_0xe0fafc){return _0x3e9d3d(_0x409521,_0x6b1e75,_0x517baf,_0xffa0c5,_0x491ddb,_0xe0fafc);},'bGHeV':_0x4f20db(0x85)};let _0xb0ba7c;try{!_0x24865a[_0x4f20db(0xb5)]&&(logger[_0x4f20db(0xa2)](_0x44809c[_0x4f20db(0xcf)]),process[_0x4f20db(0x9a)](0x1));!fs[_0x4f20db(0xb6)](_0x44809c[_0x4f20db(0x75)](getCredentialsPath))&&(logger[_0x4f20db(0xa2)](_0x44809c[_0x4f20db(0xc1)]),await _0x44809c[_0x4f20db(0x91)](sendInstrumentationEvent,_0x24865a,_0x44809c[_0x4f20db(0xd1)],messageTypes[_0x4f20db(0x7b)],_0x44809c['RonJK'],null,_0x24865a),process[_0x4f20db(0x9a)](0x1));logger[_0x4f20db(0x78)](_0x4f20db(0xb4)+_0x24865a[_0x4f20db(0xb5)]),await _0x44809c[_0x4f20db(0x9c)](sendInstrumentationEvent,_0x24865a,_0x44809c['pmEFx'],messageTypes[_0x4f20db(0xa5)],null,null,_0x24865a);const _0x3860f5=JSON[_0x4f20db(0xbb)](fs[_0x4f20db(0xa3)](_0x44809c[_0x4f20db(0x94)](getCredentialsPath)));global_registry[_0x4f20db(0xc6)]=_0x3860f5[_0x4f20db(0x87)]['username'],global_registry[_0x4f20db(0xc5)]=_0x3860f5[_0x4f20db(0x87)][_0x4f20db(0x95)];const _0x23cde8=WS_ENDPOINT[_0x4f20db(0xb3)](_0x44809c[_0x4f20db(0xd0)],_0x3860f5['Browserstack'][_0x4f20db(0x8d)])[_0x4f20db(0xb3)](_0x44809c[_0x4f20db(0xb7)],_0x3860f5[_0x4f20db(0x87)][_0x4f20db(0x95)]),_0x190040={};_0x190040[_0x4f20db(0xac)]=ws,_0x190040[_0x4f20db(0xca)]=0x36ee80,_0xb0ba7c=new ReconnectingWebSocket(_0x23cde8,[],_0x190040),logger[_0x4f20db(0x79)](_0x44809c['KvklD']),webSocketUtils['addListeners'](_0xb0ba7c,_0x24865a['user'],_0x24865a[_0x4f20db(0x95)]);const [_0x46cd48,_0x4d1769]=await _0x44809c['IVOPB'](getGridDetails,_0x3860f5[_0x4f20db(0x87)][_0x4f20db(0x8d)],_0x3860f5[_0x4f20db(0x87)][_0x4f20db(0x95)],_0x24865a['gridId']);if(_0x4d1769){const _0x4f6833=_0x4d1769['info'];global_registry[_0x4f20db(0x8b)]=_0x4f6833['cloudProvider'],global_registry[_0x4f20db(0xb9)]=_0x4f6833[_0x4f20db(0xae)],global_registry['clusterName']=_0x4f6833[_0x4f20db(0xa6)];const _0x575511=await _0x44809c[_0x4f20db(0x9c)](getCloudProviderObject,_0x4f6833[_0x4f20db(0x8b)],_0x4f6833[_0x4f20db(0xa6)],_0x4f6833[_0x4f20db(0x96)],_0xb0ba7c,webSocketUtils,_0x24865a),[_0x4d23bf,_0x5a858e,_0xb65233,_0x40bbfe,_0xd68c92,_0x57d6fb]=await _0x44809c[_0x4f20db(0xa8)](createK8sClient,_0x575511,_0x24865a[_0x4f20db(0xbe)]);await _0x44809c[_0x4f20db(0xcd)](scaleUpHubDeployment,_0x5a858e,_0x4f6833[_0x4f20db(0x96)]),logger[_0x4f20db(0x78)](_0x44809c[_0x4f20db(0x7c)]),process[_0x4f20db(0x9a)](0x0);}_0x44809c['IKkZj'](_0x46cd48[_0x4f20db(0xaf)],0x191)&&(logger[_0x4f20db(0xa2)](_0x44809c['BDGyb']),await _0x44809c['Zoqsx'](sendInstrumentationEvent,_0x24865a,_0x44809c[_0x4f20db(0xd1)],messageTypes[_0x4f20db(0x7b)],_0x44809c['yPFBF'],null,_0x24865a),process[_0x4f20db(0x9a)](0x1)),_0x44809c['IKkZj'](_0x46cd48[_0x4f20db(0xaf)],0x190)&&(logger[_0x4f20db(0xa2)](JSON[_0x4f20db(0xbb)](_0x46cd48[_0x4f20db(0x8e)])[_0x4f20db(0x92)]),await _0x44809c['paIwC'](sendInstrumentationEvent,_0x24865a,_0x44809c['pmEFx'],messageTypes[_0x4f20db(0x7b)],_0x44809c[_0x4f20db(0xc3)],null,_0x24865a),process[_0x4f20db(0x9a)](0x1)),logger['error']('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON['stringify'](_0x46cd48)),await _0x44809c[_0x4f20db(0x98)](sendInstrumentationEvent,_0x24865a,_0x44809c[_0x4f20db(0xd1)],messageTypes[_0x4f20db(0x7b)],_0x44809c['bGHeV'],_0x46cd48,_0x24865a),process[_0x4f20db(0x9a)](0x1);}catch(_0x48560f){const _0x5e3e66=_0x4f20db(0xbc)+_0x48560f+'\x20\x0a'+JSON['stringify'](_0x48560f[_0x4f20db(0xa1)])+'\x20';logger['error'](_0x5e3e66),process[_0x4f20db(0x9a)](0x1);}};