const a19_0x91acf=a19_0x2d16;function a19_0x2d16(_0x2fa702,_0x22e247){const _0x14a95f=a19_0x14a9();return a19_0x2d16=function(_0x2d1666,_0x501840){_0x2d1666=_0x2d1666-0x6b;let _0x568e04=_0x14a95f[_0x2d1666];return _0x568e04;},a19_0x2d16(_0x2fa702,_0x22e247);}(function(_0x50d78e,_0x217f87){const _0x3968df=a19_0x2d16,_0x5c9ba3=_0x50d78e();while(!![]){try{const _0x512e68=-parseInt(_0x3968df(0xa5))/0x1+parseInt(_0x3968df(0x7f))/0x2*(-parseInt(_0x3968df(0xa4))/0x3)+parseInt(_0x3968df(0x6b))/0x4*(-parseInt(_0x3968df(0x7a))/0x5)+parseInt(_0x3968df(0x7e))/0x6*(-parseInt(_0x3968df(0xa9))/0x7)+parseInt(_0x3968df(0xb5))/0x8+parseInt(_0x3968df(0x76))/0x9+parseInt(_0x3968df(0xa8))/0xa;if(_0x512e68===_0x217f87)break;else _0x5c9ba3['push'](_0x5c9ba3['shift']());}catch(_0xed45dc){_0x5c9ba3['push'](_0x5c9ba3['shift']());}}}(a19_0x14a9,0x76843));function a19_0x14a9(){const _0x4aba35=['Grid\x20started','kXgjX','cloudProvider','ZhBon','start','eXbYB','command','bstackAccesskey','error','../../config/logger','Browserstack','connectionTimeout','enNOV','<UsernamePlaceholder>','ZBDmb','stringify','parse','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','info','reconnecting-websocket','nPriO','epilogue','3OMJcIK','489103ucegeh','body','clusterName','9826840HWlaqA','946743dEgCCH','desc','options','default','../../cloudproviders/utils','stack','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','grid-id','readFileSync','XPzbR','unauthorised','bstackUsername','5990824SXoKfR','../../utils/createk8sClient','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','fKqfL','ERROR','gridId','wQomh','skip-tls-cert-verify','string','password','addListeners','WebSocket','20pKMmAw','type','NaMdS','description','exit','hxzKp','server-error','INFO','init-not-called','existsSync','PCCJq','3155355ujjcIj','RwalV','NuhKz','grid','277715KgAeRT','clusterRegion','replace','PHALY','12UJVWCb','1118746eAuLuF','argv','username','kNTfA','sRlHn','nTYRt','name','help','debug','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','uTyXy','usage','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','KonyZ','builder'];a19_0x14a9=function(){return _0x4aba35;};return a19_0x14a9();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x91acf(0xa1)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require('../../config/constants'),{logger}=require(a19_0x91acf(0x97)),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleUpHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require(a19_0x91acf(0xb6)),{getCloudProviderObject}=require(a19_0x91acf(0xad));exports[a19_0x91acf(0x94)]=a19_0x91acf(0x79),exports[a19_0x91acf(0xaa)]='Start\x20an\x20existing\x20Automation\x20grid.',exports[a19_0x91acf(0x8d)]=function(_0x178998){const _0x35076d=a19_0x91acf,_0x409260={};_0x409260['FBCQJ']=_0x35076d(0x9f),_0x409260['NuhKz']=_0x35076d(0xbd),_0x409260['kwrBk']='Skip\x20insecure\x20cert\x20verification.',_0x409260[_0x35076d(0x82)]='boolean',_0x409260[_0x35076d(0x7d)]=_0x35076d(0x86);const _0x40ca1d=_0x409260,_0x3ba793={};_0x3ba793['description']=_0x40ca1d['FBCQJ'],_0x3ba793[_0x35076d(0x6c)]=_0x40ca1d[_0x35076d(0x78)];const _0x539c63={};_0x539c63[_0x35076d(0x6e)]=_0x40ca1d['kwrBk'],_0x539c63[_0x35076d(0x6c)]=_0x40ca1d[_0x35076d(0x82)],_0x539c63[_0x35076d(0xac)]=![];const _0x244de3={};return _0x244de3[_0x35076d(0xb0)]=_0x3ba793,_0x244de3[_0x35076d(0xbc)]=_0x539c63,_0x178998[_0x35076d(0x8a)](HELP_HEADER_MESSAGE[_0x35076d(0x92)])[_0x35076d(0xa3)](HELP_FOOTER_MESSAGE)[_0x35076d(0xab)](_0x244de3)['help'](_0x40ca1d['PHALY'])[_0x35076d(0x80)];},exports['handler']=async function(_0x20dd66){const _0x3513bf=a19_0x91acf,_0x3077a9={'NaMdS':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','nTYRt':function(_0x35b720){return _0x35b720();},'dOYNs':_0x3513bf(0x8b),'fKqfL':function(_0x4bca46,_0x425f5a,_0x191a4a,_0x370b9e,_0x5280d2,_0x5ebaff,_0xa23d65){return _0x4bca46(_0x425f5a,_0x191a4a,_0x370b9e,_0x5280d2,_0x5ebaff,_0xa23d65);},'wQomh':'start-grid-called','ZBDmb':_0x3513bf(0x73),'PCCJq':function(_0x5d1ed2){return _0x5d1ed2();},'fJuGR':_0x3513bf(0x9b),'sRlHn':'<PasswordPlaceholder>','kXgjX':'Adding\x20Websocket\x20listeners','nPriO':function(_0x501eb3,_0x228e69,_0x471ec9,_0x6bc61c){return _0x501eb3(_0x228e69,_0x471ec9,_0x6bc61c);},'uTyXy':function(_0x4a5d77,_0x43a410,_0x4fa5e3,_0x46f648,_0x55b06f,_0x297cae,_0x65a7f){return _0x4a5d77(_0x43a410,_0x4fa5e3,_0x46f648,_0x55b06f,_0x297cae,_0x65a7f);},'ZhBon':function(_0x39032b,_0x44a59e,_0x54e750){return _0x39032b(_0x44a59e,_0x54e750);},'RwalV':function(_0x241a1c,_0x25c859,_0xa43691){return _0x241a1c(_0x25c859,_0xa43691);},'enNOV':_0x3513bf(0x8e),'KonyZ':function(_0x17dd3f,_0x30a03d){return _0x17dd3f===_0x30a03d;},'GmhtR':_0x3513bf(0xb7),'eXbYB':_0x3513bf(0xb3),'hxzKp':'invalid-grid-id','rLUmr':function(_0x27b5f1,_0x1c901e,_0x55b11d,_0x4dc9ad,_0x495f7d,_0x207e94,_0x357f88){return _0x27b5f1(_0x1c901e,_0x55b11d,_0x4dc9ad,_0x495f7d,_0x207e94,_0x357f88);},'XPzbR':_0x3513bf(0x71)};let _0x109d70;try{!_0x20dd66[_0x3513bf(0xba)]&&(logger[_0x3513bf(0x96)](_0x3077a9[_0x3513bf(0x6d)]),process[_0x3513bf(0x6f)](0x1));!fs[_0x3513bf(0x74)](_0x3077a9[_0x3513bf(0x84)](getCredentialsPath))&&(logger[_0x3513bf(0x96)](_0x3077a9['dOYNs']),await _0x3077a9[_0x3513bf(0xb8)](sendInstrumentationEvent,_0x20dd66,_0x3077a9[_0x3513bf(0xbb)],messageTypes['ERROR'],_0x3077a9[_0x3513bf(0x9c)],null,_0x20dd66),process[_0x3513bf(0x6f)](0x1));logger[_0x3513bf(0xa0)]('Starting\x20grid\x20'+_0x20dd66[_0x3513bf(0xba)]),await _0x3077a9['fKqfL'](sendInstrumentationEvent,_0x20dd66,_0x3077a9[_0x3513bf(0xbb)],messageTypes[_0x3513bf(0x72)],null,null,_0x20dd66);const _0x5de2f9=JSON[_0x3513bf(0x9e)](fs[_0x3513bf(0xb1)](_0x3077a9[_0x3513bf(0x75)](getCredentialsPath)));global_registry[_0x3513bf(0xb4)]=_0x5de2f9['Browserstack']['username'],global_registry[_0x3513bf(0x95)]=_0x5de2f9[_0x3513bf(0x98)][_0x3513bf(0xbe)];const _0x311249=WS_ENDPOINT[_0x3513bf(0x7c)](_0x3077a9['fJuGR'],_0x5de2f9[_0x3513bf(0x98)][_0x3513bf(0x81)])[_0x3513bf(0x7c)](_0x3077a9[_0x3513bf(0x83)],_0x5de2f9[_0x3513bf(0x98)]['password']),_0x48ad8d={};_0x48ad8d[_0x3513bf(0xc0)]=ws,_0x48ad8d[_0x3513bf(0x99)]=0x36ee80,_0x109d70=new ReconnectingWebSocket(_0x311249,[],_0x48ad8d),logger[_0x3513bf(0x87)](_0x3077a9[_0x3513bf(0x8f)]),webSocketUtils[_0x3513bf(0xbf)](_0x109d70,_0x20dd66['user'],_0x20dd66[_0x3513bf(0xbe)]);const [_0x65bef8,_0x28edf8]=await _0x3077a9[_0x3513bf(0xa2)](getGridDetails,_0x5de2f9[_0x3513bf(0x98)]['username'],_0x5de2f9[_0x3513bf(0x98)][_0x3513bf(0xbe)],_0x20dd66[_0x3513bf(0xba)]);if(_0x28edf8){const _0x315ef9=_0x28edf8[_0x3513bf(0xa0)];global_registry[_0x3513bf(0x90)]=_0x315ef9[_0x3513bf(0x90)],global_registry[_0x3513bf(0x7b)]=_0x315ef9['region'],global_registry[_0x3513bf(0xa7)]=_0x315ef9['clusterName'];const _0x1e3f80=await _0x3077a9[_0x3513bf(0x89)](getCloudProviderObject,_0x315ef9[_0x3513bf(0x90)],_0x315ef9[_0x3513bf(0xa7)],_0x315ef9[_0x3513bf(0x85)],_0x109d70,webSocketUtils,_0x20dd66),[_0x87110e,_0x1f8310,_0x235edf,_0x4e03d0,_0x117baa,_0x175bf4]=await _0x3077a9[_0x3513bf(0x91)](createK8sClient,_0x1e3f80,_0x20dd66['skipTlsCertVerify']);await _0x3077a9[_0x3513bf(0x77)](scaleUpHubDeployment,_0x1f8310,_0x315ef9[_0x3513bf(0x85)]),logger[_0x3513bf(0xa0)](_0x3077a9[_0x3513bf(0x9a)]),process[_0x3513bf(0x6f)](0x0);}_0x3077a9['KonyZ'](_0x65bef8['statusCode'],0x191)&&(logger[_0x3513bf(0x96)](_0x3077a9['GmhtR']),await _0x3077a9[_0x3513bf(0xb8)](sendInstrumentationEvent,_0x20dd66,_0x3077a9['wQomh'],messageTypes[_0x3513bf(0xb9)],_0x3077a9[_0x3513bf(0x93)],null,_0x20dd66),process[_0x3513bf(0x6f)](0x1)),_0x3077a9[_0x3513bf(0x8c)](_0x65bef8['statusCode'],0x190)&&(logger[_0x3513bf(0x96)](JSON[_0x3513bf(0x9e)](_0x65bef8[_0x3513bf(0xa6)])['message']),await _0x3077a9[_0x3513bf(0x89)](sendInstrumentationEvent,_0x20dd66,_0x3077a9[_0x3513bf(0xbb)],messageTypes[_0x3513bf(0xb9)],_0x3077a9[_0x3513bf(0x70)],null,_0x20dd66),process[_0x3513bf(0x6f)](0x1)),logger[_0x3513bf(0x96)](_0x3513bf(0xaf)+JSON[_0x3513bf(0x9d)](_0x65bef8)),await _0x3077a9['rLUmr'](sendInstrumentationEvent,_0x20dd66,_0x3077a9['wQomh'],messageTypes[_0x3513bf(0xb9)],_0x3077a9[_0x3513bf(0xb2)],_0x65bef8,_0x20dd66),process[_0x3513bf(0x6f)](0x1);}catch(_0x1eee52){const _0x1f7d84=_0x3513bf(0x88)+_0x1eee52+'\x20\x0a'+JSON[_0x3513bf(0x9d)](_0x1eee52[_0x3513bf(0xae)])+'\x20';logger[_0x3513bf(0x96)](_0x1f7d84),process[_0x3513bf(0x6f)](0x1);}};