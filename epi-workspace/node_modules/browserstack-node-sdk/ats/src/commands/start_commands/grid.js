const a19_0x4f1b0c=a19_0x1c42;function a19_0x1c42(_0x5834ec,_0x1342b7){const _0x4a2aee=a19_0x4a2a();return a19_0x1c42=function(_0x1c422d,_0x2ff509){_0x1c422d=_0x1c422d-0x1d6;let _0x1ae2a1=_0x4a2aee[_0x1c422d];return _0x1ae2a1;},a19_0x1c42(_0x5834ec,_0x1342b7);}(function(_0x107690,_0x14f037){const _0x8c28c3=a19_0x1c42,_0x4501c8=_0x107690();while(!![]){try{const _0x4d7132=-parseInt(_0x8c28c3(0x22a))/0x1*(-parseInt(_0x8c28c3(0x1dc))/0x2)+parseInt(_0x8c28c3(0x224))/0x3+parseInt(_0x8c28c3(0x22c))/0x4+parseInt(_0x8c28c3(0x20d))/0x5*(parseInt(_0x8c28c3(0x1f3))/0x6)+parseInt(_0x8c28c3(0x210))/0x7*(parseInt(_0x8c28c3(0x1f9))/0x8)+-parseInt(_0x8c28c3(0x1f1))/0x9*(-parseInt(_0x8c28c3(0x1fd))/0xa)+-parseInt(_0x8c28c3(0x1ee))/0xb*(parseInt(_0x8c28c3(0x1de))/0xc);if(_0x4d7132===_0x14f037)break;else _0x4501c8['push'](_0x4501c8['shift']());}catch(_0x1da73e){_0x4501c8['push'](_0x4501c8['shift']());}}}(a19_0x4a2a,0x298ff));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x4f1b0c(0x1fa)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x4f1b0c(0x1f7)),{logger}=require(a19_0x4f1b0c(0x1da)),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleUpHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require(a19_0x4f1b0c(0x1fc)),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require(a19_0x4f1b0c(0x223));function a19_0x4a2a(){const _0x26656d=['readFileSync','user','ERROR','parse','22NaKWGD','error','xbqDw','17451gadYCw','help','2118QcAARJ','kJhAj','password','info','../../config/constants','start','304sQUshA','reconnecting-websocket','default','../../utils/webSocketUtils','310dNOuua','zJLUD','skip-tls-cert-verify','epilogue','cmQiL','builder','ziHnB','debug','OquJD','WTXfH','string','WSzJY','INFO','exit','kyRKD','dzoGL','1145PtSyJz','Skip\x20insecure\x20cert\x20verification.','hghUq','8141viGiPo','clusterName','AZNJR','<UsernamePlaceholder>','replace','grid-id','wQbdZ','description','gyiKV','username','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','init-not-called','Mlwnq','region','bstackUsername','GewKo','server-error','usage','PzbEb','../../cloudproviders/utils','882615mzrAta','options','WebSocket','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','Browserstack','stringify','14932qxVqKj','start-grid-called','1114016zuZClA','bneps','ajuRL','message','invalid-grid-id','../../config/logger','mvzWO','14UFEmWl','type','4152804hyOQmt','cloudProvider','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','Starting\x20grid\x20','body','handler','grid','<PasswordPlaceholder>','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','gridId','statusCode','name'];a19_0x4a2a=function(){return _0x26656d;};return a19_0x4a2a();}exports['command']=a19_0x4f1b0c(0x1e4),exports['desc']='Start\x20an\x20existing\x20Automation\x20grid.',exports[a19_0x4f1b0c(0x202)]=function(_0x1e85c8){const _0x262db0=a19_0x4f1b0c,_0x2e41b1={};_0x2e41b1['WTXfH']=_0x262db0(0x21a),_0x2e41b1[_0x262db0(0x208)]=_0x262db0(0x207),_0x2e41b1['ywmXZ']=_0x262db0(0x20e),_0x2e41b1[_0x262db0(0x203)]='boolean',_0x2e41b1[_0x262db0(0x218)]=_0x262db0(0x1f2);const _0x283094=_0x2e41b1,_0x2377fd={};_0x2377fd['description']=_0x283094[_0x262db0(0x206)],_0x2377fd['type']=_0x283094['WSzJY'];const _0x5f2ae5={};_0x5f2ae5[_0x262db0(0x217)]=_0x283094['ywmXZ'],_0x5f2ae5[_0x262db0(0x1dd)]=_0x283094[_0x262db0(0x203)],_0x5f2ae5[_0x262db0(0x1fb)]=![];const _0x217383={};return _0x217383[_0x262db0(0x215)]=_0x2377fd,_0x217383[_0x262db0(0x1ff)]=_0x5f2ae5,_0x1e85c8[_0x262db0(0x221)](HELP_HEADER_MESSAGE[_0x262db0(0x1f8)])[_0x262db0(0x200)](HELP_FOOTER_MESSAGE)[_0x262db0(0x225)](_0x217383)[_0x262db0(0x1f2)](_0x283094['gyiKV'])['argv'];},exports[a19_0x4f1b0c(0x1e3)]=async function(_0x2298db){const _0x434f28=a19_0x4f1b0c,_0x4314f1={'AZNJR':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','xbqDw':function(_0x1a8e14){return _0x1a8e14();},'GewKo':_0x434f28(0x1e0),'kyRKD':function(_0x33cd64,_0x5cf8ee,_0x564e09,_0x36f07e,_0xa5dafe,_0x3c6e74,_0x22cc47){return _0x33cd64(_0x5cf8ee,_0x564e09,_0x36f07e,_0xa5dafe,_0x3c6e74,_0x22cc47);},'kJhAj':_0x434f28(0x22b),'OquJD':_0x434f28(0x21b),'hghUq':_0x434f28(0x213),'bneps':_0x434f28(0x1e5),'wQbdZ':'Adding\x20Websocket\x20listeners','cmQiL':function(_0x4e1997,_0x1e41af,_0x387776,_0xcba6b7){return _0x4e1997(_0x1e41af,_0x387776,_0xcba6b7);},'Mlwnq':function(_0xff24aa,_0x231e35,_0x43919b){return _0xff24aa(_0x231e35,_0x43919b);},'edfGX':'Grid\x20started','PzbEb':function(_0x2395ff,_0x436d9c){return _0x2395ff===_0x436d9c;},'mvzWO':_0x434f28(0x1e6),'KAODZ':'unauthorised','dzoGL':function(_0x399f75,_0x236664){return _0x399f75===_0x236664;},'zJLUD':_0x434f28(0x1d9),'ajuRL':_0x434f28(0x220)};let _0x69c887;try{!_0x2298db['gridId']&&(logger[_0x434f28(0x1ef)](_0x4314f1[_0x434f28(0x212)]),process[_0x434f28(0x20a)](0x1));!fs['existsSync'](_0x4314f1[_0x434f28(0x1f0)](getCredentialsPath))&&(logger[_0x434f28(0x1ef)](_0x4314f1[_0x434f28(0x21f)]),await _0x4314f1[_0x434f28(0x20b)](sendInstrumentationEvent,_0x2298db,_0x4314f1['kJhAj'],messageTypes[_0x434f28(0x1ec)],_0x4314f1[_0x434f28(0x205)],null,_0x2298db),process[_0x434f28(0x20a)](0x1));logger[_0x434f28(0x1f6)](_0x434f28(0x1e1)+_0x2298db[_0x434f28(0x1e7)]),await _0x4314f1['kyRKD'](sendInstrumentationEvent,_0x2298db,_0x4314f1[_0x434f28(0x1f4)],messageTypes[_0x434f28(0x209)],null,null,_0x2298db);const _0x341722=JSON[_0x434f28(0x1ed)](fs[_0x434f28(0x1ea)](_0x4314f1[_0x434f28(0x1f0)](getCredentialsPath)));global_registry[_0x434f28(0x21e)]=_0x341722[_0x434f28(0x228)][_0x434f28(0x219)],global_registry['bstackAccesskey']=_0x341722[_0x434f28(0x228)]['password'];const _0xab3fb6=WS_ENDPOINT[_0x434f28(0x214)](_0x4314f1[_0x434f28(0x20f)],_0x341722[_0x434f28(0x228)][_0x434f28(0x219)])[_0x434f28(0x214)](_0x4314f1[_0x434f28(0x1d6)],_0x341722[_0x434f28(0x228)][_0x434f28(0x1f5)]),_0x3a5c38={};_0x3a5c38[_0x434f28(0x226)]=ws,_0x3a5c38['connectionTimeout']=0x36ee80,_0x69c887=new ReconnectingWebSocket(_0xab3fb6,[],_0x3a5c38),logger[_0x434f28(0x204)](_0x4314f1[_0x434f28(0x216)]),webSocketUtils['addListeners'](_0x69c887,_0x2298db[_0x434f28(0x1eb)],_0x2298db['password']);const [_0xbfbc40,_0x26b963]=await _0x4314f1[_0x434f28(0x201)](getGridDetails,_0x341722['Browserstack']['username'],_0x341722[_0x434f28(0x228)][_0x434f28(0x1f5)],_0x2298db[_0x434f28(0x1e7)]);if(_0x26b963){const _0x68c75b=_0x26b963[_0x434f28(0x1f6)];global_registry[_0x434f28(0x1df)]=_0x68c75b[_0x434f28(0x1df)],global_registry['clusterRegion']=_0x68c75b[_0x434f28(0x21d)],global_registry[_0x434f28(0x211)]=_0x68c75b['clusterName'];const _0x38c201=await _0x4314f1['kyRKD'](getCloudProviderObject,_0x68c75b[_0x434f28(0x1df)],_0x68c75b[_0x434f28(0x211)],_0x68c75b['name'],_0x69c887,webSocketUtils,_0x2298db),[_0x4b4b28,_0x458dbb,_0x13ebba,_0x498bf9,_0x1916aa,_0x46a374]=await _0x4314f1[_0x434f28(0x21c)](createK8sClient,_0x38c201,_0x2298db['skipTlsCertVerify']);await _0x4314f1['Mlwnq'](scaleUpHubDeployment,_0x458dbb,_0x68c75b[_0x434f28(0x1e9)]),logger[_0x434f28(0x1f6)](_0x4314f1['edfGX']),process[_0x434f28(0x20a)](0x0);}_0x4314f1[_0x434f28(0x222)](_0xbfbc40['statusCode'],0x191)&&(logger[_0x434f28(0x1ef)](_0x4314f1[_0x434f28(0x1db)]),await _0x4314f1['kyRKD'](sendInstrumentationEvent,_0x2298db,_0x4314f1[_0x434f28(0x1f4)],messageTypes['ERROR'],_0x4314f1['KAODZ'],null,_0x2298db),process['exit'](0x1)),_0x4314f1[_0x434f28(0x20c)](_0xbfbc40[_0x434f28(0x1e8)],0x190)&&(logger[_0x434f28(0x1ef)](JSON['parse'](_0xbfbc40[_0x434f28(0x1e2)])[_0x434f28(0x1d8)]),await _0x4314f1[_0x434f28(0x20b)](sendInstrumentationEvent,_0x2298db,_0x4314f1[_0x434f28(0x1f4)],messageTypes[_0x434f28(0x1ec)],_0x4314f1[_0x434f28(0x1fe)],null,_0x2298db),process[_0x434f28(0x20a)](0x1)),logger[_0x434f28(0x1ef)]('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON[_0x434f28(0x229)](_0xbfbc40)),await _0x4314f1[_0x434f28(0x20b)](sendInstrumentationEvent,_0x2298db,_0x4314f1[_0x434f28(0x1f4)],messageTypes[_0x434f28(0x1ec)],_0x4314f1[_0x434f28(0x1d7)],_0xbfbc40,_0x2298db),process[_0x434f28(0x20a)](0x1);}catch(_0x244857){const _0x57fd4b=_0x434f28(0x227)+_0x244857+'\x20\x0a'+JSON[_0x434f28(0x229)](_0x244857['stack'])+'\x20';logger[_0x434f28(0x1ef)](_0x57fd4b),process[_0x434f28(0x20a)](0x1);}};