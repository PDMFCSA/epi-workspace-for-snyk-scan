const a21_0x534e5b=a21_0x7fc9;(function(_0x2f87bd,_0x5e73c0){const _0x452cbf=a21_0x7fc9,_0xdcb391=_0x2f87bd();while(!![]){try{const _0x120112=parseInt(_0x452cbf(0x200))/0x1+-parseInt(_0x452cbf(0x1fe))/0x2*(parseInt(_0x452cbf(0x1f5))/0x3)+-parseInt(_0x452cbf(0x215))/0x4*(-parseInt(_0x452cbf(0x1d0))/0x5)+-parseInt(_0x452cbf(0x1e9))/0x6*(parseInt(_0x452cbf(0x20a))/0x7)+-parseInt(_0x452cbf(0x1f2))/0x8+parseInt(_0x452cbf(0x1ea))/0x9+parseInt(_0x452cbf(0x1f9))/0xa;if(_0x120112===_0x5e73c0)break;else _0xdcb391['push'](_0xdcb391['shift']());}catch(_0x57575d){_0xdcb391['push'](_0xdcb391['shift']());}}}(a21_0x1cab,0x90a30));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x534e5b(0x1cd)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x534e5b(0x1db)),{logger}=require(a21_0x534e5b(0x1d3)),{getCredentialsPath,getGridDetails}=require(a21_0x534e5b(0x1c6)),{scaleDownHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require(a21_0x534e5b(0x1cb)),webSocketUtils=require(a21_0x534e5b(0x1cc)),{createK8sClient}=require(a21_0x534e5b(0x20e)),{getCloudProviderObject}=require('../../cloudproviders/utils');function a21_0x7fc9(_0x60e655,_0x5bdbbb){const _0x1cab67=a21_0x1cab();return a21_0x7fc9=function(_0x7fc90e,_0x2d953d){_0x7fc90e=_0x7fc90e-0x1bb;let _0x5d78db=_0x1cab67[_0x7fc90e];return _0x5d78db;},a21_0x7fc9(_0x60e655,_0x5bdbbb);}exports[a21_0x534e5b(0x212)]=a21_0x534e5b(0x1bf),exports[a21_0x534e5b(0x209)]=a21_0x534e5b(0x1c9),exports[a21_0x534e5b(0x1dd)]=function(_0x4133f9){const _0x1f981f=a21_0x534e5b,_0x141eaa={};_0x141eaa[_0x1f981f(0x1e8)]=_0x1f981f(0x207),_0x141eaa[_0x1f981f(0x1d9)]=_0x1f981f(0x1e3),_0x141eaa[_0x1f981f(0x1d2)]=_0x1f981f(0x1f8),_0x141eaa['YmNoa']=_0x1f981f(0x1fa),_0x141eaa[_0x1f981f(0x1d5)]='help';const _0x4615a8=_0x141eaa,_0x4fd7c0={};_0x4fd7c0[_0x1f981f(0x1c0)]=_0x4615a8[_0x1f981f(0x1e8)],_0x4fd7c0[_0x1f981f(0x1e5)]=_0x4615a8[_0x1f981f(0x1d9)];const _0x2cf62d={};_0x2cf62d[_0x1f981f(0x1c0)]=_0x4615a8[_0x1f981f(0x1d2)],_0x2cf62d[_0x1f981f(0x1e5)]=_0x4615a8[_0x1f981f(0x1d7)],_0x2cf62d[_0x1f981f(0x1c7)]=![];const _0x2df1e4={};return _0x2df1e4[_0x1f981f(0x1e0)]=_0x4fd7c0,_0x2df1e4['skip-tls-cert-verify']=_0x2cf62d,_0x4133f9[_0x1f981f(0x211)](HELP_HEADER_MESSAGE[_0x1f981f(0x214)])['epilogue'](HELP_FOOTER_MESSAGE)['options'](_0x2df1e4)['help'](_0x4615a8[_0x1f981f(0x1d5)])['argv'];},exports[a21_0x534e5b(0x1f4)]=async function(_0x45bee4){const _0x587c7f=a21_0x534e5b,_0x3ae7de={'NVmwY':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','IvCOO':function(_0x1ba1b0){return _0x1ba1b0();},'rmDMu':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','cUxzM':function(_0x50a302,_0x96ea44,_0x52bf98,_0x31f9af,_0x1e364e,_0x2e9faa,_0x2a1e29){return _0x50a302(_0x96ea44,_0x52bf98,_0x31f9af,_0x1e364e,_0x2e9faa,_0x2a1e29);},'ZyQra':'stop-grid-called','Yrisg':_0x587c7f(0x1ca),'WuzCQ':_0x587c7f(0x1ee),'zjXxn':_0x587c7f(0x1e2),'HtTMN':_0x587c7f(0x1c5),'MqwOH':function(_0x4661b5,_0x2f4abd,_0x313bd4,_0x83fba){return _0x4661b5(_0x2f4abd,_0x313bd4,_0x83fba);},'jVFtp':function(_0x2720d9,_0x2bc736,_0x285540){return _0x2720d9(_0x2bc736,_0x285540);},'FEnuT':function(_0x304c98,_0x310ccf,_0x487313){return _0x304c98(_0x310ccf,_0x487313);},'sqZcD':_0x587c7f(0x1d1),'eHYGl':function(_0x18de95,_0x7bb9a1){return _0x18de95===_0x7bb9a1;},'VZlOz':_0x587c7f(0x1fc),'EOxuB':_0x587c7f(0x1e4),'qHtIq':function(_0x475bd8,_0x4bd7d1){return _0x475bd8===_0x4bd7d1;},'CTwjJ':_0x587c7f(0x1d8),'QCDlA':function(_0x36a358,_0x4a5e60,_0x551ad8,_0x3ce9b0,_0x15b78d,_0x562b5b,_0x3ef018){return _0x36a358(_0x4a5e60,_0x551ad8,_0x3ce9b0,_0x15b78d,_0x562b5b,_0x3ef018);},'emsKi':_0x587c7f(0x1da)};let _0x1a7767;try{!_0x45bee4[_0x587c7f(0x201)]&&(logger[_0x587c7f(0x205)](_0x3ae7de[_0x587c7f(0x1ef)]),process[_0x587c7f(0x1f1)](0x1));!fs[_0x587c7f(0x1cf)](_0x3ae7de[_0x587c7f(0x1ed)](getCredentialsPath))&&(logger[_0x587c7f(0x205)](_0x3ae7de['rmDMu']),await _0x3ae7de['cUxzM'](sendInstrumentationEvent,_0x45bee4,_0x3ae7de['ZyQra'],messageTypes[_0x587c7f(0x1ce)],_0x3ae7de['Yrisg'],null,_0x45bee4),process[_0x587c7f(0x1f1)](0x1));logger[_0x587c7f(0x203)](_0x587c7f(0x1c3)+_0x45bee4[_0x587c7f(0x201)]),await _0x3ae7de[_0x587c7f(0x1bb)](sendInstrumentationEvent,_0x45bee4,_0x3ae7de[_0x587c7f(0x206)],messageTypes['INFO'],null,null,_0x45bee4);const _0x374bcb=JSON[_0x587c7f(0x1eb)](fs[_0x587c7f(0x1fd)](_0x3ae7de['IvCOO'](getCredentialsPath)));global_registry[_0x587c7f(0x1d6)]=_0x374bcb['Browserstack']['username'],global_registry[_0x587c7f(0x1f7)]=_0x374bcb[_0x587c7f(0x1e7)][_0x587c7f(0x1de)];const _0x27f55d=WS_ENDPOINT[_0x587c7f(0x1ec)](_0x3ae7de[_0x587c7f(0x208)],_0x374bcb[_0x587c7f(0x1e7)][_0x587c7f(0x20b)])['replace'](_0x3ae7de['zjXxn'],_0x374bcb['Browserstack']['password']),_0x3ca56f={};_0x3ca56f[_0x587c7f(0x1c1)]=ws,_0x3ca56f[_0x587c7f(0x204)]=0x36ee80,_0x1a7767=new ReconnectingWebSocket(_0x27f55d,[],_0x3ca56f),logger[_0x587c7f(0x1f3)](_0x3ae7de['HtTMN']),webSocketUtils[_0x587c7f(0x1ff)](_0x1a7767,_0x45bee4[_0x587c7f(0x1f6)],_0x45bee4[_0x587c7f(0x1de)]);const [_0x5b7c16,_0x58ed58]=await _0x3ae7de['MqwOH'](getGridDetails,_0x374bcb[_0x587c7f(0x1e7)][_0x587c7f(0x20b)],_0x374bcb[_0x587c7f(0x1e7)][_0x587c7f(0x1de)],_0x45bee4['gridId']);if(_0x58ed58){const _0x36206e=_0x58ed58['info'];global_registry['cloudProvider']=_0x36206e[_0x587c7f(0x1e1)],global_registry[_0x587c7f(0x1bd)]=_0x36206e[_0x587c7f(0x1fb)],global_registry[_0x587c7f(0x1e6)]=_0x36206e['clusterName'];const _0x48d274=await _0x3ae7de['cUxzM'](getCloudProviderObject,_0x36206e[_0x587c7f(0x1e1)],_0x36206e[_0x587c7f(0x1e6)],_0x36206e[_0x587c7f(0x1dc)],_0x1a7767,webSocketUtils,_0x45bee4),[_0x33b35f,_0x4f8569,_0x2ff996,_0xc9bebe,_0x18d729,_0x3b55f2]=await _0x3ae7de[_0x587c7f(0x1c8)](createK8sClient,_0x48d274,_0x45bee4[_0x587c7f(0x1d4)]);await _0x3ae7de[_0x587c7f(0x20d)](scaleDownHubDeployment,_0x4f8569,_0x36206e[_0x587c7f(0x1dc)]),logger[_0x587c7f(0x203)](_0x3ae7de[_0x587c7f(0x1c2)]),process[_0x587c7f(0x1f1)](0x0);}_0x3ae7de[_0x587c7f(0x1f0)](_0x5b7c16['statusCode'],0x191)&&(logger[_0x587c7f(0x205)](_0x3ae7de['VZlOz']),await _0x3ae7de[_0x587c7f(0x1bb)](sendInstrumentationEvent,_0x45bee4,_0x3ae7de['ZyQra'],messageTypes[_0x587c7f(0x1ce)],_0x3ae7de[_0x587c7f(0x210)],null,_0x45bee4),process[_0x587c7f(0x1f1)](0x1)),_0x3ae7de['qHtIq'](_0x5b7c16[_0x587c7f(0x1be)],0x190)&&(logger['error'](JSON['parse'](_0x5b7c16['body'])[_0x587c7f(0x213)]),await _0x3ae7de['cUxzM'](sendInstrumentationEvent,_0x45bee4,_0x3ae7de['ZyQra'],messageTypes[_0x587c7f(0x1ce)],_0x3ae7de[_0x587c7f(0x20f)],null,_0x45bee4),process[_0x587c7f(0x1f1)](0x1)),logger[_0x587c7f(0x205)]('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON[_0x587c7f(0x1bc)](_0x5b7c16)),await _0x3ae7de[_0x587c7f(0x202)](sendInstrumentationEvent,_0x45bee4,_0x3ae7de[_0x587c7f(0x206)],messageTypes[_0x587c7f(0x1ce)],_0x3ae7de[_0x587c7f(0x20c)],_0x5b7c16,_0x45bee4),process[_0x587c7f(0x1f1)](0x1);}catch(_0x306aed){const _0x23fb2d=_0x587c7f(0x1df)+_0x306aed+'\x20\x0a'+JSON['stringify'](_0x306aed[_0x587c7f(0x1c4)])+'\x20';logger[_0x587c7f(0x205)](_0x23fb2d),process[_0x587c7f(0x1f1)](0x1);}};function a21_0x1cab(){const _0x1635c8=['replace','IvCOO','<UsernamePlaceholder>','NVmwY','eHYGl','exit','4151688yFomLq','debug','handler','3093iNIhQF','user','bstackAccesskey','Skip\x20insecure\x20cert\x20verification.','15940130kDCVDJ','boolean','region','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','readFileSync','1858amjhqq','addListeners','133540yPvJzV','gridId','QCDlA','info','connectionTimeout','error','ZyQra','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','WuzCQ','desc','7421127eDCNmK','username','emsKi','FEnuT','../../utils/createk8sClient','CTwjJ','EOxuB','usage','command','message','stop','4Pkcheh','cUxzM','stringify','clusterRegion','statusCode','grid','description','WebSocket','sqZcD','Stopping\x20grid\x20','stack','Adding\x20Websocket\x20listeners','../../utils/utilityMethods','default','jVFtp','Stop\x20a\x20running\x20Automation\x20grid.','init-not-called','../../utils/instrumentationUtils','../../utils/webSocketUtils','reconnecting-websocket','ERROR','existsSync','4292655NpPvuy','Grid\x20stoppped.','jOqBa','../../config/logger','skipTlsCertVerify','ePBvP','bstackUsername','YmNoa','invalid-grid-id','NqDbP','server-error','../../config/constants','name','builder','password','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','grid-id','cloudProvider','<PasswordPlaceholder>','string','unauthorised','type','clusterName','Browserstack','GysiP','6hLQuqX','4889421heYYWH','parse'];a21_0x1cab=function(){return _0x1635c8;};return a21_0x1cab();}