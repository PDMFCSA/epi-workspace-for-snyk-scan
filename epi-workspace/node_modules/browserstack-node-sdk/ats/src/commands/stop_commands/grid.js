function a21_0x5e54(){const _0x4eb9f6=['skipTlsCertVerify','body','Adding\x20Websocket\x20listeners','info','xvljX','stop-grid-called','unauthorised','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','Grid\x20stoppped.','Browserstack','stack','replace','ZzMAP','boolean','cloudProvider','reconnecting-websocket','error','user','parse','username','51044283zhDODT','INFO','../../config/constants','help','jOFfy','../../utils/webSocketUtils','ldVxL','288677xGoHZv','3560EEnRrX','message','OSwVJ','<UsernamePlaceholder>','../../config/logger','desc','name','clusterRegion','stringify','3604472CKwIQv','handler','rvVkD','CLsnR','type','oyNlN','HgZoO','../../utils/createk8sClient','region','bstackAccesskey','password','1224900FoTyXG','10GjRHjM','8772066rnZDsZ','debug','grid-id','sYmWx','usage','stop','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','jjmjG','exit','init-not-called','options','ESgBP','Pannf','grid','KGWtO','QuOpr','Stop\x20a\x20running\x20Automation\x20grid.','orJOp','LXTNE','clusterName','eUkoK','xSagk','oBmxf','7025615ZoHLaf','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','ERROR','default','string','../../utils/instrumentationUtils','connectionTimeout','description','14252vsYWkx','server-error','iqlnm','pUBHK','gridId','bstackUsername','../../utils/utilityMethods','Skip\x20insecure\x20cert\x20verification.','addListeners','cnzzq','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','kXPOW'];a21_0x5e54=function(){return _0x4eb9f6;};return a21_0x5e54();}const a21_0x40c810=a21_0x5401;(function(_0x158939,_0x3ef587){const _0x1156a1=a21_0x5401,_0x41bc7f=_0x158939();while(!![]){try{const _0x102d81=parseInt(_0x1156a1(0x1ab))/0x1*(-parseInt(_0x1156a1(0x163))/0x2)+-parseInt(_0x1156a1(0x162))/0x3+-parseInt(_0x1156a1(0x1b5))/0x4+-parseInt(_0x1156a1(0x17c))/0x5+-parseInt(_0x1156a1(0x164))/0x6+-parseInt(_0x1156a1(0x184))/0x7*(-parseInt(_0x1156a1(0x1ac))/0x8)+parseInt(_0x1156a1(0x1a4))/0x9;if(_0x102d81===_0x3ef587)break;else _0x41bc7f['push'](_0x41bc7f['shift']());}catch(_0x15f63a){_0x41bc7f['push'](_0x41bc7f['shift']());}}}(a21_0x5e54,0xe9ce6));function a21_0x5401(_0x1ee887,_0x34f6aa){const _0x5e54da=a21_0x5e54();return a21_0x5401=function(_0x5401fd,_0x4abbad){_0x5401fd=_0x5401fd-0x15c;let _0x208391=_0x5e54da[_0x5401fd];return _0x208391;},a21_0x5401(_0x1ee887,_0x34f6aa);}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x40c810(0x19f)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x40c810(0x1a6)),{logger}=require(a21_0x40c810(0x1b0)),{getCredentialsPath,getGridDetails}=require(a21_0x40c810(0x18a)),{scaleDownHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require(a21_0x40c810(0x181)),webSocketUtils=require(a21_0x40c810(0x1a9)),{createK8sClient}=require(a21_0x40c810(0x15e)),{getCloudProviderObject}=require('../../cloudproviders/utils');exports['command']=a21_0x40c810(0x172),exports[a21_0x40c810(0x1b1)]=a21_0x40c810(0x175),exports['builder']=function(_0x4c2b35){const _0x19588f=a21_0x40c810,_0x3efb71={};_0x3efb71[_0x19588f(0x1aa)]=_0x19588f(0x18e),_0x3efb71[_0x19588f(0x17b)]=_0x19588f(0x180),_0x3efb71[_0x19588f(0x167)]=_0x19588f(0x18b),_0x3efb71['eUkoK']=_0x19588f(0x19d),_0x3efb71[_0x19588f(0x186)]=_0x19588f(0x1a7);const _0x14e451=_0x3efb71,_0x15159a={};_0x15159a[_0x19588f(0x183)]=_0x14e451[_0x19588f(0x1aa)],_0x15159a[_0x19588f(0x1b9)]=_0x14e451[_0x19588f(0x17b)];const _0xec940d={};_0xec940d[_0x19588f(0x183)]=_0x14e451[_0x19588f(0x167)],_0xec940d[_0x19588f(0x1b9)]=_0x14e451[_0x19588f(0x179)],_0xec940d[_0x19588f(0x17f)]=![];const _0xe03c61={};return _0xe03c61[_0x19588f(0x166)]=_0x15159a,_0xe03c61['skip-tls-cert-verify']=_0xec940d,_0x4c2b35[_0x19588f(0x168)](HELP_HEADER_MESSAGE[_0x19588f(0x169)])['epilogue'](HELP_FOOTER_MESSAGE)[_0x19588f(0x16f)](_0xe03c61)[_0x19588f(0x1a7)](_0x14e451[_0x19588f(0x186)])['argv'];},exports[a21_0x40c810(0x1b6)]=async function(_0x366d04){const _0x4903db=a21_0x40c810,_0x5eb1fe={'oyNlN':_0x4903db(0x16b),'cnzzq':function(_0x59e1ce){return _0x59e1ce();},'ksMKc':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','CLsnR':function(_0x13d60c,_0x2eab5f,_0x139d3f,_0xab2057,_0x5b76ce,_0x3697f5,_0x54ef1d){return _0x13d60c(_0x2eab5f,_0x139d3f,_0xab2057,_0x5b76ce,_0x3697f5,_0x54ef1d);},'rvVkD':_0x4903db(0x195),'orJOp':_0x4903db(0x16e),'pUBHK':_0x4903db(0x1af),'ESgBP':'<PasswordPlaceholder>','KGWtO':_0x4903db(0x192),'HgZoO':function(_0x4cdf94,_0x5334fa,_0x5e667c,_0x4dbbf7){return _0x4cdf94(_0x5334fa,_0x5e667c,_0x4dbbf7);},'kXPOW':function(_0x222525,_0x225b12,_0x11e6f9,_0x7f643e,_0x26388e,_0x14f986,_0x5d8f40){return _0x222525(_0x225b12,_0x11e6f9,_0x7f643e,_0x26388e,_0x14f986,_0x5d8f40);},'jOFfy':function(_0x2e03a5,_0x57b7c5,_0x422cbc){return _0x2e03a5(_0x57b7c5,_0x422cbc);},'OSwVJ':_0x4903db(0x198),'xvljX':function(_0x123c75,_0x43ee9f){return _0x123c75===_0x43ee9f;},'jjmjG':_0x4903db(0x197),'ZzMAP':function(_0x3b255b,_0x191597,_0x6a2e0e,_0x42ca7d,_0x5ef3e9,_0x410b40,_0x509844){return _0x3b255b(_0x191597,_0x6a2e0e,_0x42ca7d,_0x5ef3e9,_0x410b40,_0x509844);},'Pannf':_0x4903db(0x196),'LXTNE':function(_0x59df45,_0x423c88){return _0x59df45===_0x423c88;},'LfZXv':function(_0x5cff21,_0x3144c1,_0x7a88cf,_0x1e7c9b,_0x2a7cee,_0x2370cd,_0x5bc8b2){return _0x5cff21(_0x3144c1,_0x7a88cf,_0x1e7c9b,_0x2a7cee,_0x2370cd,_0x5bc8b2);},'xSagk':'invalid-grid-id','QuOpr':_0x4903db(0x185)};let _0x54bc84;try{!_0x366d04[_0x4903db(0x188)]&&(logger[_0x4903db(0x1a0)](_0x5eb1fe[_0x4903db(0x15c)]),process['exit'](0x1));!fs['existsSync'](_0x5eb1fe[_0x4903db(0x18d)](getCredentialsPath))&&(logger[_0x4903db(0x1a0)](_0x5eb1fe['ksMKc']),await _0x5eb1fe['CLsnR'](sendInstrumentationEvent,_0x366d04,_0x5eb1fe[_0x4903db(0x1b7)],messageTypes['ERROR'],_0x5eb1fe[_0x4903db(0x176)],null,_0x366d04),process[_0x4903db(0x16d)](0x1));logger[_0x4903db(0x193)]('Stopping\x20grid\x20'+_0x366d04[_0x4903db(0x188)]),await _0x5eb1fe[_0x4903db(0x1b8)](sendInstrumentationEvent,_0x366d04,_0x5eb1fe[_0x4903db(0x1b7)],messageTypes[_0x4903db(0x1a5)],null,null,_0x366d04);const _0x29a352=JSON[_0x4903db(0x1a2)](fs['readFileSync'](_0x5eb1fe['cnzzq'](getCredentialsPath)));global_registry[_0x4903db(0x189)]=_0x29a352[_0x4903db(0x199)][_0x4903db(0x1a3)],global_registry[_0x4903db(0x160)]=_0x29a352[_0x4903db(0x199)][_0x4903db(0x161)];const _0x783235=WS_ENDPOINT[_0x4903db(0x19b)](_0x5eb1fe[_0x4903db(0x187)],_0x29a352[_0x4903db(0x199)][_0x4903db(0x1a3)])[_0x4903db(0x19b)](_0x5eb1fe[_0x4903db(0x170)],_0x29a352['Browserstack'][_0x4903db(0x161)]),_0x426291={};_0x426291['WebSocket']=ws,_0x426291[_0x4903db(0x182)]=0x36ee80,_0x54bc84=new ReconnectingWebSocket(_0x783235,[],_0x426291),logger[_0x4903db(0x165)](_0x5eb1fe[_0x4903db(0x173)]),webSocketUtils[_0x4903db(0x18c)](_0x54bc84,_0x366d04[_0x4903db(0x1a1)],_0x366d04[_0x4903db(0x161)]);const [_0x527bc2,_0x37118c]=await _0x5eb1fe[_0x4903db(0x15d)](getGridDetails,_0x29a352['Browserstack'][_0x4903db(0x1a3)],_0x29a352[_0x4903db(0x199)][_0x4903db(0x161)],_0x366d04[_0x4903db(0x188)]);if(_0x37118c){const _0x1ee481=_0x37118c[_0x4903db(0x193)];global_registry[_0x4903db(0x19e)]=_0x1ee481[_0x4903db(0x19e)],global_registry[_0x4903db(0x1b3)]=_0x1ee481[_0x4903db(0x15f)],global_registry['clusterName']=_0x1ee481[_0x4903db(0x178)];const _0x2eef3e=await _0x5eb1fe[_0x4903db(0x18f)](getCloudProviderObject,_0x1ee481[_0x4903db(0x19e)],_0x1ee481[_0x4903db(0x178)],_0x1ee481[_0x4903db(0x1b2)],_0x54bc84,webSocketUtils,_0x366d04),[_0x52239f,_0x3aac16,_0xc920fa,_0x461282,_0x2ee98c,_0x5205b7]=await _0x5eb1fe[_0x4903db(0x1a8)](createK8sClient,_0x2eef3e,_0x366d04[_0x4903db(0x190)]);await _0x5eb1fe['jOFfy'](scaleDownHubDeployment,_0x3aac16,_0x1ee481[_0x4903db(0x1b2)]),logger[_0x4903db(0x193)](_0x5eb1fe[_0x4903db(0x1ae)]),process['exit'](0x0);}_0x5eb1fe[_0x4903db(0x194)](_0x527bc2['statusCode'],0x191)&&(logger[_0x4903db(0x1a0)](_0x5eb1fe[_0x4903db(0x16c)]),await _0x5eb1fe[_0x4903db(0x19c)](sendInstrumentationEvent,_0x366d04,_0x5eb1fe[_0x4903db(0x1b7)],messageTypes[_0x4903db(0x17e)],_0x5eb1fe[_0x4903db(0x171)],null,_0x366d04),process[_0x4903db(0x16d)](0x1)),_0x5eb1fe[_0x4903db(0x177)](_0x527bc2['statusCode'],0x190)&&(logger[_0x4903db(0x1a0)](JSON[_0x4903db(0x1a2)](_0x527bc2[_0x4903db(0x191)])[_0x4903db(0x1ad)]),await _0x5eb1fe['LfZXv'](sendInstrumentationEvent,_0x366d04,_0x5eb1fe[_0x4903db(0x1b7)],messageTypes[_0x4903db(0x17e)],_0x5eb1fe[_0x4903db(0x17a)],null,_0x366d04),process[_0x4903db(0x16d)](0x1)),logger[_0x4903db(0x1a0)](_0x4903db(0x16a)+JSON['stringify'](_0x527bc2)),await _0x5eb1fe[_0x4903db(0x19c)](sendInstrumentationEvent,_0x366d04,_0x5eb1fe[_0x4903db(0x1b7)],messageTypes['ERROR'],_0x5eb1fe[_0x4903db(0x174)],_0x527bc2,_0x366d04),process[_0x4903db(0x16d)](0x1);}catch(_0x228cde){const _0x202567=_0x4903db(0x17d)+_0x228cde+'\x20\x0a'+JSON[_0x4903db(0x1b4)](_0x228cde[_0x4903db(0x19a)])+'\x20';logger[_0x4903db(0x1a0)](_0x202567),process[_0x4903db(0x16d)](0x1);}};