const a19_0x32bc11=a19_0x3338;(function(_0x2cf06c,_0x2918f3){const _0x2797d7=a19_0x3338,_0x17af3c=_0x2cf06c();while(!![]){try{const _0x13c9e7=parseInt(_0x2797d7(0xb5))/0x1*(-parseInt(_0x2797d7(0x106))/0x2)+-parseInt(_0x2797d7(0xdf))/0x3+parseInt(_0x2797d7(0xac))/0x4*(parseInt(_0x2797d7(0x105))/0x5)+-parseInt(_0x2797d7(0xf7))/0x6*(parseInt(_0x2797d7(0xc5))/0x7)+-parseInt(_0x2797d7(0xfe))/0x8*(-parseInt(_0x2797d7(0xef))/0x9)+-parseInt(_0x2797d7(0xb8))/0xa+-parseInt(_0x2797d7(0xaa))/0xb*(-parseInt(_0x2797d7(0xe7))/0xc);if(_0x13c9e7===_0x2918f3)break;else _0x17af3c['push'](_0x17af3c['shift']());}catch(_0x3e5b2b){_0x17af3c['push'](_0x17af3c['shift']());}}}(a19_0x37f6,0xc450f));function a19_0x3338(_0x1c622a,_0x5ccf7d){const _0x37f66e=a19_0x37f6();return a19_0x3338=function(_0x333821,_0x548236){_0x333821=_0x333821-0xa9;let _0x50ab72=_0x37f66e[_0x333821];return _0x50ab72;},a19_0x3338(_0x1c622a,_0x5ccf7d);}function a19_0x37f6(){const _0x328bee=['Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','VheNZ','eaXgm','../../utils/instrumentationUtils','Stopping\x20grid\x20','skipTlsCertVerify','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','nTwbW','usage','cloudProvider','2482971Zjdmtw','parse','stringify','gridId','yMrFV','yRCVL','body','stop','984BhEsZI','exit','NSxtK','vBtVm','help','HvhNt','stop-grid-called','ZfcnB','1319049qPEnLY','boolean','ERROR','<PasswordPlaceholder>','message','../../utils/createk8sClient','skip-tls-cert-verify','kcUon','361866IkXUlk','DYWUa','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','eOpnj','region','../../utils/gridComponents','../../utils/webSocketUtils','16BTkIBc','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','grid','addListeners','connectionTimeout','INFO','../../config/logger','5QToRWX','4594eTWyfg','bstackUsername','command','replace','info','stack','type','options','statusCode','426514YUQLXX','Stop\x20a\x20running\x20Automation\x20grid.','4740308ySJMzL','Adding\x20Websocket\x20listeners','../../cloudproviders/utils','eVTEH','username','Grid\x20stoppped.','user','../../utils/utilityMethods','handler','643QCDRmo','kyCNJ','clusterName','411530erOjZn','error','name','epilogue','debug','Browserstack','clusterRegion','Bjlbb','readFileSync','password','wGhlM','init-not-called','builder','175QpgCSq','mpEcA','bstackAccesskey','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','existsSync','WebSocket','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','grid-id','argv','description','../../config/constants','uTRKN','ULFbf','RGwzk','string','OUNlF'];a19_0x37f6=function(){return _0x328bee;};return a19_0x37f6();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x32bc11(0xcf)),{logger}=require(a19_0x32bc11(0x104)),{getCredentialsPath,getGridDetails}=require(a19_0x32bc11(0xb3)),{scaleDownHubDeployment}=require(a19_0x32bc11(0xfc)),{sendInstrumentationEvent}=require(a19_0x32bc11(0xd8)),webSocketUtils=require(a19_0x32bc11(0xfd)),{createK8sClient}=require(a19_0x32bc11(0xf4)),{getCloudProviderObject}=require(a19_0x32bc11(0xae));exports[a19_0x32bc11(0x108)]=a19_0x32bc11(0x100),exports['desc']=a19_0x32bc11(0xab),exports[a19_0x32bc11(0xc4)]=function(_0x38c6e7){const _0x32549c=a19_0x32bc11,_0x5e2a21={};_0x5e2a21['NSxtK']=_0x32549c(0xdb),_0x5e2a21['bRxcz']=_0x32549c(0xd3),_0x5e2a21['uTRKN']='Skip\x20insecure\x20cert\x20verification.',_0x5e2a21[_0x32549c(0xdc)]=_0x32549c(0xf0),_0x5e2a21['eOpnj']=_0x32549c(0xeb);const _0x473bd1=_0x5e2a21,_0x4aa09a={};_0x4aa09a[_0x32549c(0xce)]=_0x473bd1[_0x32549c(0xe9)],_0x4aa09a['type']=_0x473bd1['bRxcz'];const _0x50157c={};_0x50157c[_0x32549c(0xce)]=_0x473bd1[_0x32549c(0xd0)],_0x50157c[_0x32549c(0x10c)]=_0x473bd1[_0x32549c(0xdc)],_0x50157c['default']=![];const _0x2818bb={};return _0x2818bb[_0x32549c(0xcc)]=_0x4aa09a,_0x2818bb[_0x32549c(0xf5)]=_0x50157c,_0x38c6e7[_0x32549c(0xdd)](HELP_HEADER_MESSAGE[_0x32549c(0xe6)])[_0x32549c(0xbb)](HELP_FOOTER_MESSAGE)[_0x32549c(0x10d)](_0x2818bb)['help'](_0x473bd1[_0x32549c(0xfa)])[_0x32549c(0xcd)];},exports[a19_0x32bc11(0xb4)]=async function(_0x1fb090){const _0x1750f0=a19_0x32bc11,_0x450d36={'yRCVL':_0x1750f0(0xcb),'eaXgm':function(_0x453548){return _0x453548();},'yMrFV':_0x1750f0(0xff),'OUNlF':function(_0xc9c023,_0x535b0b,_0x1c72cc,_0x5d2a43,_0x1c588c,_0x209fbb,_0x1f4c10){return _0xc9c023(_0x535b0b,_0x1c72cc,_0x5d2a43,_0x1c588c,_0x209fbb,_0x1f4c10);},'kyCNJ':_0x1750f0(0xed),'eVTEH':_0x1750f0(0xc3),'HvhNt':function(_0x353e57,_0x105992,_0x95be63,_0x3ae92f,_0x1c8942,_0x1565d1,_0x163219){return _0x353e57(_0x105992,_0x95be63,_0x3ae92f,_0x1c8942,_0x1565d1,_0x163219);},'RarKZ':'<UsernamePlaceholder>','vBtVm':_0x1750f0(0xf2),'RGwzk':_0x1750f0(0xad),'wGhlM':function(_0x4cbef6,_0xb5ce35,_0x11af4f,_0x3d95c6){return _0x4cbef6(_0xb5ce35,_0x11af4f,_0x3d95c6);},'Bjlbb':function(_0x4f91cc,_0x2d6f2f,_0x87d48e){return _0x4f91cc(_0x2d6f2f,_0x87d48e);},'VheNZ':function(_0x564a8b,_0x5ef8f2,_0x8c223b){return _0x564a8b(_0x5ef8f2,_0x8c223b);},'ZfcnB':_0x1750f0(0xb1),'mpEcA':function(_0x170853,_0x8faf4a){return _0x170853===_0x8faf4a;},'kcUon':_0x1750f0(0xc8),'DYWUa':'unauthorised','ULFbf':function(_0x15ad8b,_0x258f44,_0x54aa41,_0x1a990d,_0xeb2fc0,_0x143776,_0x320786){return _0x15ad8b(_0x258f44,_0x54aa41,_0x1a990d,_0xeb2fc0,_0x143776,_0x320786);},'QoNKr':'invalid-grid-id','TamYj':'server-error'};let _0x9567c4;try{!_0x1fb090[_0x1750f0(0xe2)]&&(logger[_0x1750f0(0xb9)](_0x450d36[_0x1750f0(0xe4)]),process['exit'](0x1));!fs[_0x1750f0(0xc9)](_0x450d36[_0x1750f0(0xd7)](getCredentialsPath))&&(logger[_0x1750f0(0xb9)](_0x450d36[_0x1750f0(0xe3)]),await _0x450d36[_0x1750f0(0xd4)](sendInstrumentationEvent,_0x1fb090,_0x450d36[_0x1750f0(0xb6)],messageTypes[_0x1750f0(0xf1)],_0x450d36[_0x1750f0(0xaf)],null,_0x1fb090),process[_0x1750f0(0xe8)](0x1));logger[_0x1750f0(0x10a)](_0x1750f0(0xd9)+_0x1fb090[_0x1750f0(0xe2)]),await _0x450d36[_0x1750f0(0xec)](sendInstrumentationEvent,_0x1fb090,_0x450d36[_0x1750f0(0xb6)],messageTypes[_0x1750f0(0x103)],null,null,_0x1fb090);const _0x134f3c=JSON[_0x1750f0(0xe0)](fs[_0x1750f0(0xc0)](_0x450d36[_0x1750f0(0xd7)](getCredentialsPath)));global_registry[_0x1750f0(0x107)]=_0x134f3c['Browserstack']['username'],global_registry[_0x1750f0(0xc7)]=_0x134f3c['Browserstack'][_0x1750f0(0xc1)];const _0xc45f6b=WS_ENDPOINT[_0x1750f0(0x109)](_0x450d36['RarKZ'],_0x134f3c[_0x1750f0(0xbd)][_0x1750f0(0xb0)])[_0x1750f0(0x109)](_0x450d36[_0x1750f0(0xea)],_0x134f3c[_0x1750f0(0xbd)][_0x1750f0(0xc1)]),_0x4d1a14={};_0x4d1a14[_0x1750f0(0xca)]=ws,_0x4d1a14[_0x1750f0(0x102)]=0x36ee80,_0x9567c4=new ReconnectingWebSocket(_0xc45f6b,[],_0x4d1a14),logger[_0x1750f0(0xbc)](_0x450d36[_0x1750f0(0xd2)]),webSocketUtils[_0x1750f0(0x101)](_0x9567c4,_0x1fb090[_0x1750f0(0xb2)],_0x1fb090['password']);const [_0xfd5b7e,_0x14340c]=await _0x450d36[_0x1750f0(0xc2)](getGridDetails,_0x134f3c[_0x1750f0(0xbd)][_0x1750f0(0xb0)],_0x134f3c[_0x1750f0(0xbd)][_0x1750f0(0xc1)],_0x1fb090[_0x1750f0(0xe2)]);if(_0x14340c){const _0x18faaa=_0x14340c[_0x1750f0(0x10a)];global_registry[_0x1750f0(0xde)]=_0x18faaa[_0x1750f0(0xde)],global_registry[_0x1750f0(0xbe)]=_0x18faaa[_0x1750f0(0xfb)],global_registry[_0x1750f0(0xb7)]=_0x18faaa[_0x1750f0(0xb7)];const _0x3895b6=await _0x450d36['HvhNt'](getCloudProviderObject,_0x18faaa[_0x1750f0(0xde)],_0x18faaa['clusterName'],_0x18faaa[_0x1750f0(0xba)],_0x9567c4,webSocketUtils,_0x1fb090),[_0x331333,_0x134407,_0x260bed,_0x5aaee2,_0x29dcbb,_0x5493b0]=await _0x450d36[_0x1750f0(0xbf)](createK8sClient,_0x3895b6,_0x1fb090[_0x1750f0(0xda)]);await _0x450d36[_0x1750f0(0xd6)](scaleDownHubDeployment,_0x134407,_0x18faaa[_0x1750f0(0xba)]),logger['info'](_0x450d36[_0x1750f0(0xee)]),process[_0x1750f0(0xe8)](0x0);}_0x450d36[_0x1750f0(0xc6)](_0xfd5b7e[_0x1750f0(0xa9)],0x191)&&(logger['error'](_0x450d36[_0x1750f0(0xf6)]),await _0x450d36['HvhNt'](sendInstrumentationEvent,_0x1fb090,_0x450d36[_0x1750f0(0xb6)],messageTypes[_0x1750f0(0xf1)],_0x450d36[_0x1750f0(0xf8)],null,_0x1fb090),process[_0x1750f0(0xe8)](0x1)),_0x450d36[_0x1750f0(0xc6)](_0xfd5b7e[_0x1750f0(0xa9)],0x190)&&(logger['error'](JSON[_0x1750f0(0xe0)](_0xfd5b7e[_0x1750f0(0xe5)])[_0x1750f0(0xf3)]),await _0x450d36[_0x1750f0(0xd1)](sendInstrumentationEvent,_0x1fb090,_0x450d36[_0x1750f0(0xb6)],messageTypes[_0x1750f0(0xf1)],_0x450d36['QoNKr'],null,_0x1fb090),process[_0x1750f0(0xe8)](0x1)),logger['error'](_0x1750f0(0xf9)+JSON[_0x1750f0(0xe1)](_0xfd5b7e)),await _0x450d36[_0x1750f0(0xd1)](sendInstrumentationEvent,_0x1fb090,_0x450d36[_0x1750f0(0xb6)],messageTypes[_0x1750f0(0xf1)],_0x450d36['TamYj'],_0xfd5b7e,_0x1fb090),process[_0x1750f0(0xe8)](0x1);}catch(_0x56d5b3){const _0x4367c5=_0x1750f0(0xd5)+_0x56d5b3+'\x20\x0a'+JSON[_0x1750f0(0xe1)](_0x56d5b3[_0x1750f0(0x10b)])+'\x20';logger[_0x1750f0(0xb9)](_0x4367c5),process[_0x1750f0(0xe8)](0x1);}};