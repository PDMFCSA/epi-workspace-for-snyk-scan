const a21_0x142e92=a21_0x5390;(function(_0x28af4c,_0x4fb61e){const _0x54f2f8=a21_0x5390,_0x49c03b=_0x28af4c();while(!![]){try{const _0x84f898=parseInt(_0x54f2f8(0x20a))/0x1*(-parseInt(_0x54f2f8(0x223))/0x2)+-parseInt(_0x54f2f8(0x21c))/0x3*(-parseInt(_0x54f2f8(0x20c))/0x4)+parseInt(_0x54f2f8(0x200))/0x5*(parseInt(_0x54f2f8(0x1eb))/0x6)+parseInt(_0x54f2f8(0x220))/0x7+-parseInt(_0x54f2f8(0x23f))/0x8+parseInt(_0x54f2f8(0x20f))/0x9+-parseInt(_0x54f2f8(0x1f1))/0xa;if(_0x84f898===_0x4fb61e)break;else _0x49c03b['push'](_0x49c03b['shift']());}catch(_0x3407b1){_0x49c03b['push'](_0x49c03b['shift']());}}}(a21_0x4c1b,0xb1640));function a21_0x5390(_0x39e32e,_0x1e2ce5){const _0x4c1b17=a21_0x4c1b();return a21_0x5390=function(_0x53908d,_0x2874ed){_0x53908d=_0x53908d-0x1eb;let _0x845b55=_0x4c1b17[_0x53908d];return _0x845b55;},a21_0x5390(_0x39e32e,_0x1e2ce5);}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x142e92(0x23e)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x142e92(0x22c)),{logger}=require(a21_0x142e92(0x215)),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleDownHubDeployment}=require(a21_0x142e92(0x212)),{sendInstrumentationEvent}=require(a21_0x142e92(0x246)),webSocketUtils=require(a21_0x142e92(0x22a)),{createK8sClient}=require(a21_0x142e92(0x1f5)),{getCloudProviderObject}=require(a21_0x142e92(0x241));exports['command']=a21_0x142e92(0x20b),exports[a21_0x142e92(0x1f6)]=a21_0x142e92(0x208),exports['builder']=function(_0x2e6a31){const _0x3654b1=a21_0x142e92,_0x2ab8f5={};_0x2ab8f5[_0x3654b1(0x201)]=_0x3654b1(0x1fa),_0x2ab8f5[_0x3654b1(0x1ef)]=_0x3654b1(0x207),_0x2ab8f5['Eejfp']='Skip\x20insecure\x20cert\x20verification.',_0x2ab8f5[_0x3654b1(0x20d)]=_0x3654b1(0x239),_0x2ab8f5['xguHW']=_0x3654b1(0x23d);const _0x258384=_0x2ab8f5,_0x48654e={};_0x48654e[_0x3654b1(0x230)]=_0x258384['tLvKs'],_0x48654e['type']=_0x258384[_0x3654b1(0x1ef)];const _0x238088={};_0x238088[_0x3654b1(0x230)]=_0x258384[_0x3654b1(0x233)],_0x238088[_0x3654b1(0x224)]=_0x258384['PSSoj'],_0x238088['default']=![];const _0x2dcf67={};return _0x2dcf67['grid-id']=_0x48654e,_0x2dcf67[_0x3654b1(0x237)]=_0x238088,_0x2e6a31['usage'](HELP_HEADER_MESSAGE['stop'])[_0x3654b1(0x214)](HELP_FOOTER_MESSAGE)['options'](_0x2dcf67)[_0x3654b1(0x23d)](_0x258384[_0x3654b1(0x20e)])['argv'];},exports[a21_0x142e92(0x242)]=async function(_0x4634e3){const _0x5ddeaf=a21_0x142e92,_0x3de6e9={'cbphy':_0x5ddeaf(0x225),'NYPfk':function(_0x2279d6){return _0x2279d6();},'GvYIJ':_0x5ddeaf(0x1fd),'QUIrF':function(_0x382074,_0x46f8df,_0x2a0ea9,_0x280b66,_0x1375b7,_0x3b3b40,_0x81c682){return _0x382074(_0x46f8df,_0x2a0ea9,_0x280b66,_0x1375b7,_0x3b3b40,_0x81c682);},'spGiq':_0x5ddeaf(0x1ec),'DnmMh':'init-not-called','QuISl':function(_0x2cb0be){return _0x2cb0be();},'QrqTi':_0x5ddeaf(0x226),'UnOTV':_0x5ddeaf(0x216),'uHrvD':_0x5ddeaf(0x1f2),'cVYmr':function(_0x22d0b1,_0x3db494,_0x5f13e7,_0x9a2d4e){return _0x22d0b1(_0x3db494,_0x5f13e7,_0x9a2d4e);},'gzWSE':function(_0xc6f777,_0x1f8d4f,_0x4d1f52){return _0xc6f777(_0x1f8d4f,_0x4d1f52);},'gkmMU':function(_0x3faa6a,_0x2f2e89,_0x1c96bd){return _0x3faa6a(_0x2f2e89,_0x1c96bd);},'shlfa':_0x5ddeaf(0x22e),'hksdf':function(_0x515bd9,_0x3f0299){return _0x515bd9===_0x3f0299;},'cxOzO':_0x5ddeaf(0x221),'BOkZc':_0x5ddeaf(0x213),'UJiSh':function(_0x48d8d9,_0x1c6845){return _0x48d8d9===_0x1c6845;},'cMNyj':function(_0x5f58fd,_0x57f755,_0x21eee0,_0x22c879,_0x5bee59,_0x204752,_0x34a6ca){return _0x5f58fd(_0x57f755,_0x21eee0,_0x22c879,_0x5bee59,_0x204752,_0x34a6ca);},'IdfNf':'invalid-grid-id','vThrO':function(_0x3707a0,_0x4ef0d1,_0x43d09c,_0x3541df,_0x69d6fe,_0x5d61d1,_0x3c47e9){return _0x3707a0(_0x4ef0d1,_0x43d09c,_0x3541df,_0x69d6fe,_0x5d61d1,_0x3c47e9);},'VoFeC':_0x5ddeaf(0x21a)};let _0x155434;try{!_0x4634e3[_0x5ddeaf(0x21f)]&&(logger[_0x5ddeaf(0x204)](_0x3de6e9[_0x5ddeaf(0x238)]),process[_0x5ddeaf(0x1f3)](0x1));!fs['existsSync'](_0x3de6e9[_0x5ddeaf(0x222)](getCredentialsPath))&&(logger[_0x5ddeaf(0x204)](_0x3de6e9[_0x5ddeaf(0x227)]),await _0x3de6e9[_0x5ddeaf(0x23a)](sendInstrumentationEvent,_0x4634e3,_0x3de6e9[_0x5ddeaf(0x1f7)],messageTypes[_0x5ddeaf(0x232)],_0x3de6e9[_0x5ddeaf(0x240)],null,_0x4634e3),process['exit'](0x1));logger['info'](_0x5ddeaf(0x219)+_0x4634e3['gridId']),await _0x3de6e9[_0x5ddeaf(0x23a)](sendInstrumentationEvent,_0x4634e3,_0x3de6e9['spGiq'],messageTypes[_0x5ddeaf(0x1ed)],null,null,_0x4634e3);const _0x441785=JSON[_0x5ddeaf(0x23b)](fs[_0x5ddeaf(0x21b)](_0x3de6e9['QuISl'](getCredentialsPath)));global_registry[_0x5ddeaf(0x203)]=_0x441785[_0x5ddeaf(0x244)][_0x5ddeaf(0x1fb)],global_registry['bstackAccesskey']=_0x441785[_0x5ddeaf(0x244)][_0x5ddeaf(0x22b)];const _0x288173=WS_ENDPOINT['replace'](_0x3de6e9['QrqTi'],_0x441785[_0x5ddeaf(0x244)][_0x5ddeaf(0x1fb)])[_0x5ddeaf(0x21e)](_0x3de6e9['UnOTV'],_0x441785[_0x5ddeaf(0x244)]['password']),_0x4c6717={};_0x4c6717['WebSocket']=ws,_0x4c6717[_0x5ddeaf(0x228)]=0x36ee80,_0x155434=new ReconnectingWebSocket(_0x288173,[],_0x4c6717),logger[_0x5ddeaf(0x229)](_0x3de6e9[_0x5ddeaf(0x245)]),webSocketUtils[_0x5ddeaf(0x1ff)](_0x155434,_0x4634e3[_0x5ddeaf(0x21d)],_0x4634e3[_0x5ddeaf(0x22b)]);const [_0xdd48f0,_0x5990ad]=await _0x3de6e9[_0x5ddeaf(0x218)](getGridDetails,_0x441785[_0x5ddeaf(0x244)]['username'],_0x441785[_0x5ddeaf(0x244)]['password'],_0x4634e3['gridId']);if(_0x5990ad){const _0x2989b8=_0x5990ad[_0x5ddeaf(0x22d)];global_registry[_0x5ddeaf(0x235)]=_0x2989b8['cloudProvider'],global_registry[_0x5ddeaf(0x1f9)]=_0x2989b8[_0x5ddeaf(0x23c)],global_registry[_0x5ddeaf(0x1ee)]=_0x2989b8[_0x5ddeaf(0x1ee)];const _0x232fe7=await _0x3de6e9[_0x5ddeaf(0x23a)](getCloudProviderObject,_0x2989b8['cloudProvider'],_0x2989b8[_0x5ddeaf(0x1ee)],_0x2989b8['name'],_0x155434,webSocketUtils,_0x4634e3),[_0x467b95,_0x4afdcd,_0x49b6ec,_0x2d1b01,_0x5015ab,_0x320463]=await _0x3de6e9['gzWSE'](createK8sClient,_0x232fe7,_0x4634e3[_0x5ddeaf(0x236)]);await _0x3de6e9[_0x5ddeaf(0x1f4)](scaleDownHubDeployment,_0x4afdcd,_0x2989b8[_0x5ddeaf(0x1f8)]),logger[_0x5ddeaf(0x22d)](_0x3de6e9[_0x5ddeaf(0x210)]),process['exit'](0x0);}_0x3de6e9[_0x5ddeaf(0x1fc)](_0xdd48f0[_0x5ddeaf(0x206)],0x191)&&(logger['error'](_0x3de6e9[_0x5ddeaf(0x202)]),await _0x3de6e9[_0x5ddeaf(0x23a)](sendInstrumentationEvent,_0x4634e3,_0x3de6e9['spGiq'],messageTypes[_0x5ddeaf(0x232)],_0x3de6e9[_0x5ddeaf(0x22f)],null,_0x4634e3),process[_0x5ddeaf(0x1f3)](0x1)),_0x3de6e9[_0x5ddeaf(0x243)](_0xdd48f0[_0x5ddeaf(0x206)],0x190)&&(logger[_0x5ddeaf(0x204)](JSON[_0x5ddeaf(0x23b)](_0xdd48f0[_0x5ddeaf(0x1fe)])[_0x5ddeaf(0x234)]),await _0x3de6e9[_0x5ddeaf(0x209)](sendInstrumentationEvent,_0x4634e3,_0x3de6e9['spGiq'],messageTypes[_0x5ddeaf(0x232)],_0x3de6e9[_0x5ddeaf(0x231)],null,_0x4634e3),process[_0x5ddeaf(0x1f3)](0x1)),logger[_0x5ddeaf(0x204)](_0x5ddeaf(0x211)+JSON['stringify'](_0xdd48f0)),await _0x3de6e9['vThrO'](sendInstrumentationEvent,_0x4634e3,_0x3de6e9['spGiq'],messageTypes[_0x5ddeaf(0x232)],_0x3de6e9[_0x5ddeaf(0x1f0)],_0xdd48f0,_0x4634e3),process[_0x5ddeaf(0x1f3)](0x1);}catch(_0x218707){const _0x488625='Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20'+_0x218707+'\x20\x0a'+JSON[_0x5ddeaf(0x205)](_0x218707[_0x5ddeaf(0x217)])+'\x20';logger[_0x5ddeaf(0x204)](_0x488625),process[_0x5ddeaf(0x1f3)](0x1);}};function a21_0x4c1b(){const _0x15fca9=['25166610SPSAkw','Adding\x20Websocket\x20listeners','exit','gkmMU','../../utils/createk8sClient','desc','spGiq','name','clusterRegion','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','username','hksdf','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','body','addListeners','14785qXZCnd','tLvKs','cxOzO','bstackUsername','error','stringify','statusCode','string','Stop\x20a\x20running\x20Automation\x20grid.','cMNyj','495559lMztqG','grid','4nykCcw','PSSoj','xguHW','10803663OWgBrS','shlfa','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','../../utils/gridComponents','unauthorised','epilogue','../../config/logger','<PasswordPlaceholder>','stack','cVYmr','Stopping\x20grid\x20','server-error','readFileSync','2729346BFAqAQ','user','replace','gridId','7557746ceOdiS','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','NYPfk','2WKSqJF','type','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','<UsernamePlaceholder>','GvYIJ','connectionTimeout','debug','../../utils/webSocketUtils','password','../../config/constants','info','Grid\x20stoppped.','BOkZc','description','IdfNf','ERROR','Eejfp','message','cloudProvider','skipTlsCertVerify','skip-tls-cert-verify','cbphy','boolean','QUIrF','parse','region','help','reconnecting-websocket','1309536XAPvMH','DnmMh','../../cloudproviders/utils','handler','UJiSh','Browserstack','uHrvD','../../utils/instrumentationUtils','1446SlEozI','stop-grid-called','INFO','clusterName','ydjPu','VoFeC'];a21_0x4c1b=function(){return _0x15fca9;};return a21_0x4c1b();}