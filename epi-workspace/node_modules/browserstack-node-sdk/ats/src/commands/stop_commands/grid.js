function a21_0x5b33(_0x41a57d,_0x3d66bb){const _0x30c6a0=a21_0x30c6();return a21_0x5b33=function(_0x5b33e2,_0x5371ef){_0x5b33e2=_0x5b33e2-0x1dc;let _0x42dca9=_0x30c6a0[_0x5b33e2];return _0x42dca9;},a21_0x5b33(_0x41a57d,_0x3d66bb);}const a21_0x3c7dd9=a21_0x5b33;function a21_0x30c6(){const _0x3fe094=['default','XEuDl','4041744pIMmAn','hOaQa','3123116OorkEc','tPUtE','string','type','password','qetbp','EGMcn','description','debug','3WGdMnJ','../../cloudproviders/utils','dlert','YzXFG','../../utils/gridComponents','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','connectionTimeout','grid-id','command','cloudProvider','iOvFm','readFileSync','WebSocket','parse','invalid-grid-id','replace','name','84604CYSbTo','../../utils/webSocketUtils','username','skip-tls-cert-verify','desc','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','Skip\x20insecure\x20cert\x20verification.','addListeners','stringify','139465bAscSa','Grid\x20stoppped.','hjeAf','../../config/constants','<PasswordPlaceholder>','info','jvotm','<UsernamePlaceholder>','../../utils/createk8sClient','region','clusterRegion','clusterName','exit','kYtNO','mQKzm','builder','lszNp','16925211pcxHKF','ERROR','statusCode','../../utils/instrumentationUtils','DKkFf','skipTlsCertVerify','bstackAccesskey','bstackUsername','unauthorised','QEsmY','error','1644366MVlAiU','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','OLkDt','grid','boolean','48TVprxy','epilogue','NyXtm','AKJup','server-error','gridId','argv','eQUjh','wkqQM','Browserstack','INFO','653828GgAMni','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'];a21_0x30c6=function(){return _0x3fe094;};return a21_0x30c6();}(function(_0x4639b9,_0x3a6b7e){const _0x3cf742=a21_0x5b33,_0x2c66f8=_0x4639b9();while(!![]){try{const _0x3c347b=-parseInt(_0x3cf742(0x1ed))/0x1+parseInt(_0x3cf742(0x212))/0x2+parseInt(_0x3cf742(0x1dc))/0x3*(parseInt(_0x3cf742(0x228))/0x4)+-parseInt(_0x3cf742(0x1f6))/0x5*(-parseInt(_0x3cf742(0x217))/0x6)+parseInt(_0x3cf742(0x222))/0x7+parseInt(_0x3cf742(0x226))/0x8+-parseInt(_0x3cf742(0x207))/0x9;if(_0x3c347b===_0x3a6b7e)break;else _0x2c66f8['push'](_0x2c66f8['shift']());}catch(_0x51c5dc){_0x2c66f8['push'](_0x2c66f8['shift']());}}}(a21_0x30c6,0x70319));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x3c7dd9(0x1f9)),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleDownHubDeployment}=require(a21_0x3c7dd9(0x1e0)),{sendInstrumentationEvent}=require(a21_0x3c7dd9(0x20a)),webSocketUtils=require(a21_0x3c7dd9(0x1ee)),{createK8sClient}=require(a21_0x3c7dd9(0x1fe)),{getCloudProviderObject}=require(a21_0x3c7dd9(0x1dd));exports[a21_0x3c7dd9(0x1e4)]=a21_0x3c7dd9(0x215),exports[a21_0x3c7dd9(0x1f1)]='Stop\x20a\x20running\x20Automation\x20grid.',exports[a21_0x3c7dd9(0x205)]=function(_0x43fc8b){const _0x1fedca=a21_0x3c7dd9,_0x14580c={};_0x14580c[_0x1fedca(0x21f)]='Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.',_0x14580c[_0x1fedca(0x210)]=_0x1fedca(0x22a),_0x14580c[_0x1fedca(0x22e)]=_0x1fedca(0x1f3),_0x14580c[_0x1fedca(0x227)]=_0x1fedca(0x216),_0x14580c[_0x1fedca(0x219)]='help';const _0x15f665=_0x14580c,_0x13cbbc={};_0x13cbbc['description']=_0x15f665[_0x1fedca(0x21f)],_0x13cbbc[_0x1fedca(0x22b)]=_0x15f665[_0x1fedca(0x210)];const _0x47dd77={};_0x47dd77[_0x1fedca(0x22f)]=_0x15f665[_0x1fedca(0x22e)],_0x47dd77[_0x1fedca(0x22b)]=_0x15f665[_0x1fedca(0x227)],_0x47dd77[_0x1fedca(0x224)]=![];const _0x598731={};return _0x598731[_0x1fedca(0x1e3)]=_0x13cbbc,_0x598731[_0x1fedca(0x1f0)]=_0x47dd77,_0x43fc8b['usage'](HELP_HEADER_MESSAGE['stop'])[_0x1fedca(0x218)](HELP_FOOTER_MESSAGE)['options'](_0x598731)['help'](_0x15f665['NyXtm'])[_0x1fedca(0x21d)];},exports['handler']=async function(_0x493702){const _0x3e0e63=a21_0x3c7dd9,_0x3f2185={'AKJup':_0x3e0e63(0x213),'dlert':function(_0x147d72){return _0x147d72();},'OLkDt':_0x3e0e63(0x1e1),'hjeAf':function(_0xee23af,_0x272161,_0x2e38b9,_0x5e0921,_0x12dc58,_0x2a1978,_0x185b86){return _0xee23af(_0x272161,_0x2e38b9,_0x5e0921,_0x12dc58,_0x2a1978,_0x185b86);},'jvotm':'stop-grid-called','eQUjh':'init-not-called','mQKzm':_0x3e0e63(0x1fd),'iOvFm':_0x3e0e63(0x1fa),'mqwPv':'Adding\x20Websocket\x20listeners','lZLpI':function(_0x579f4a,_0x2dcad8,_0x11d329,_0x13d14c){return _0x579f4a(_0x2dcad8,_0x11d329,_0x13d14c);},'kYtNO':function(_0x4cc89b,_0x458fcc,_0x41473d,_0x2bcde3,_0x143fe4,_0x115cb9,_0x5b7444){return _0x4cc89b(_0x458fcc,_0x41473d,_0x2bcde3,_0x143fe4,_0x115cb9,_0x5b7444);},'SBiYj':function(_0x42fd8d,_0x452891,_0x5c8ca2){return _0x42fd8d(_0x452891,_0x5c8ca2);},'tPUtE':_0x3e0e63(0x1f7),'XEuDl':function(_0x5a7ab1,_0x52b56c){return _0x5a7ab1===_0x52b56c;},'kumsP':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','YzXFG':function(_0x20c9fa,_0x409152,_0x39fe5b,_0x2ecc1d,_0x4ef501,_0x51c0bc,_0x24dfc0){return _0x20c9fa(_0x409152,_0x39fe5b,_0x2ecc1d,_0x4ef501,_0x51c0bc,_0x24dfc0);},'DKkFf':_0x3e0e63(0x20f),'qetbp':_0x3e0e63(0x1ea),'lszNp':_0x3e0e63(0x21b)};let _0x424b42;try{!_0x493702[_0x3e0e63(0x21c)]&&(logger[_0x3e0e63(0x211)](_0x3f2185[_0x3e0e63(0x21a)]),process[_0x3e0e63(0x202)](0x1));!fs['existsSync'](_0x3f2185['dlert'](getCredentialsPath))&&(logger['error'](_0x3f2185[_0x3e0e63(0x214)]),await _0x3f2185[_0x3e0e63(0x1f8)](sendInstrumentationEvent,_0x493702,_0x3f2185[_0x3e0e63(0x1fc)],messageTypes[_0x3e0e63(0x208)],_0x3f2185[_0x3e0e63(0x21e)],null,_0x493702),process[_0x3e0e63(0x202)](0x1));logger[_0x3e0e63(0x1fb)]('Stopping\x20grid\x20'+_0x493702[_0x3e0e63(0x21c)]),await _0x3f2185[_0x3e0e63(0x1f8)](sendInstrumentationEvent,_0x493702,_0x3f2185[_0x3e0e63(0x1fc)],messageTypes[_0x3e0e63(0x221)],null,null,_0x493702);const _0x3f7dff=JSON[_0x3e0e63(0x1e9)](fs[_0x3e0e63(0x1e7)](_0x3f2185[_0x3e0e63(0x1de)](getCredentialsPath)));global_registry[_0x3e0e63(0x20e)]=_0x3f7dff[_0x3e0e63(0x220)]['username'],global_registry[_0x3e0e63(0x20d)]=_0x3f7dff[_0x3e0e63(0x220)][_0x3e0e63(0x22c)];const _0x2bb5a8=WS_ENDPOINT[_0x3e0e63(0x1eb)](_0x3f2185[_0x3e0e63(0x204)],_0x3f7dff[_0x3e0e63(0x220)][_0x3e0e63(0x1ef)])[_0x3e0e63(0x1eb)](_0x3f2185[_0x3e0e63(0x1e6)],_0x3f7dff['Browserstack'][_0x3e0e63(0x22c)]),_0xe9a9e8={};_0xe9a9e8[_0x3e0e63(0x1e8)]=ws,_0xe9a9e8[_0x3e0e63(0x1e2)]=0x36ee80,_0x424b42=new ReconnectingWebSocket(_0x2bb5a8,[],_0xe9a9e8),logger[_0x3e0e63(0x230)](_0x3f2185['mqwPv']),webSocketUtils[_0x3e0e63(0x1f4)](_0x424b42,_0x493702['user'],_0x493702[_0x3e0e63(0x22c)]);const [_0x257341,_0x84abb9]=await _0x3f2185['lZLpI'](getGridDetails,_0x3f7dff[_0x3e0e63(0x220)][_0x3e0e63(0x1ef)],_0x3f7dff['Browserstack'][_0x3e0e63(0x22c)],_0x493702[_0x3e0e63(0x21c)]);if(_0x84abb9){const _0x1b4437=_0x84abb9[_0x3e0e63(0x1fb)];global_registry['cloudProvider']=_0x1b4437[_0x3e0e63(0x1e5)],global_registry[_0x3e0e63(0x200)]=_0x1b4437[_0x3e0e63(0x1ff)],global_registry[_0x3e0e63(0x201)]=_0x1b4437[_0x3e0e63(0x201)];const _0x50d6b8=await _0x3f2185[_0x3e0e63(0x203)](getCloudProviderObject,_0x1b4437[_0x3e0e63(0x1e5)],_0x1b4437[_0x3e0e63(0x201)],_0x1b4437[_0x3e0e63(0x1ec)],_0x424b42,webSocketUtils,_0x493702),[_0xeaeb82,_0x2cc553,_0x2d9537,_0x273798,_0x1b3e8a,_0x18e915]=await _0x3f2185['SBiYj'](createK8sClient,_0x50d6b8,_0x493702[_0x3e0e63(0x20c)]);await _0x3f2185['SBiYj'](scaleDownHubDeployment,_0x2cc553,_0x1b4437[_0x3e0e63(0x1ec)]),logger['info'](_0x3f2185[_0x3e0e63(0x229)]),process[_0x3e0e63(0x202)](0x0);}_0x3f2185[_0x3e0e63(0x225)](_0x257341[_0x3e0e63(0x209)],0x191)&&(logger[_0x3e0e63(0x211)](_0x3f2185['kumsP']),await _0x3f2185[_0x3e0e63(0x1df)](sendInstrumentationEvent,_0x493702,_0x3f2185[_0x3e0e63(0x1fc)],messageTypes[_0x3e0e63(0x208)],_0x3f2185[_0x3e0e63(0x20b)],null,_0x493702),process[_0x3e0e63(0x202)](0x1)),_0x3f2185[_0x3e0e63(0x225)](_0x257341[_0x3e0e63(0x209)],0x190)&&(logger[_0x3e0e63(0x211)](JSON[_0x3e0e63(0x1e9)](_0x257341['body'])['message']),await _0x3f2185[_0x3e0e63(0x1f8)](sendInstrumentationEvent,_0x493702,_0x3f2185[_0x3e0e63(0x1fc)],messageTypes[_0x3e0e63(0x208)],_0x3f2185[_0x3e0e63(0x22d)],null,_0x493702),process[_0x3e0e63(0x202)](0x1)),logger[_0x3e0e63(0x211)](_0x3e0e63(0x223)+JSON[_0x3e0e63(0x1f5)](_0x257341)),await _0x3f2185[_0x3e0e63(0x203)](sendInstrumentationEvent,_0x493702,_0x3f2185['jvotm'],messageTypes[_0x3e0e63(0x208)],_0x3f2185[_0x3e0e63(0x206)],_0x257341,_0x493702),process['exit'](0x1);}catch(_0x4c8437){const _0x341f47=_0x3e0e63(0x1f2)+_0x4c8437+'\x20\x0a'+JSON[_0x3e0e63(0x1f5)](_0x4c8437['stack'])+'\x20';logger[_0x3e0e63(0x211)](_0x341f47),process['exit'](0x1);}};