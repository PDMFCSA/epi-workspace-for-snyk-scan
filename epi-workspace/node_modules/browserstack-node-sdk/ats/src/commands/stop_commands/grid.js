function a21_0x1239(_0x3e612b,_0x1867f6){const _0x38ecdb=a21_0x38ec();return a21_0x1239=function(_0x123967,_0x46d31a){_0x123967=_0x123967-0x174;let _0x1980f5=_0x38ecdb[_0x123967];return _0x1980f5;},a21_0x1239(_0x3e612b,_0x1867f6);}const a21_0x179493=a21_0x1239;(function(_0x41bba5,_0x76bdf1){const _0x6827b0=a21_0x1239,_0x2a550a=_0x41bba5();while(!![]){try{const _0x4eeb44=-parseInt(_0x6827b0(0x1a3))/0x1*(parseInt(_0x6827b0(0x18e))/0x2)+-parseInt(_0x6827b0(0x1a8))/0x3*(parseInt(_0x6827b0(0x179))/0x4)+parseInt(_0x6827b0(0x19f))/0x5*(parseInt(_0x6827b0(0x1c1))/0x6)+-parseInt(_0x6827b0(0x190))/0x7*(-parseInt(_0x6827b0(0x19b))/0x8)+-parseInt(_0x6827b0(0x19c))/0x9+-parseInt(_0x6827b0(0x181))/0xa*(parseInt(_0x6827b0(0x19d))/0xb)+parseInt(_0x6827b0(0x1ad))/0xc;if(_0x4eeb44===_0x76bdf1)break;else _0x2a550a['push'](_0x2a550a['shift']());}catch(_0x7311d0){_0x2a550a['push'](_0x2a550a['shift']());}}}(a21_0x38ec,0xdca5f));function a21_0x38ec(){const _0x5b407b=['../../utils/createk8sClient','<UsernamePlaceholder>','Browserstack','skipTlsCertVerify','../../config/logger','6uqKpBA','type','username','argv','password','desc','region','../../utils/webSocketUtils','unauthorised','INFO','cloudProvider','4556dmfIPc','command','stop-grid-called','description','Skip\x20insecure\x20cert\x20verification.','../../utils/utilityMethods','string','Grid\x20stoppped.','715190kFEdPk','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','ryMHQ','default','gridId','usage','info','DHgVJ','../../config/constants','DGNyK','clusterName','clusterRegion','EXkwd','102782HzzOGD','grid-id','314524KJDLbw','skip-tls-cert-verify','stop','kZzIg','ERROR','reconnecting-websocket','error','statusCode','DkjBW','NYClI','bstackUsername','88YwXgDm','3860208FXYuvA','88MYAhfP','invalid-grid-id','656785CnrYIp','ewUrk','debug','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','13uGxabO','Stopping\x20grid\x20','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','message','sDMCS','894DYAqlQ','FVMDc','readFileSync','replace','Stop\x20a\x20running\x20Automation\x20grid.','27440820URnXlE','exit','ZOTYb','qfKFE','options','bXskX','stack','init-not-called','stringify','RiYFT','handler','Adding\x20Websocket\x20listeners','pSGJY','bstackAccesskey','BHqAW'];a21_0x38ec=function(){return _0x5b407b;};return a21_0x38ec();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x179493(0x195)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x179493(0x189)),{logger}=require(a21_0x179493(0x1c0)),{getCredentialsPath,getGridDetails}=require(a21_0x179493(0x17e)),{scaleDownHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require(a21_0x179493(0x175)),{createK8sClient}=require(a21_0x179493(0x1bc)),{getCloudProviderObject}=require('../../cloudproviders/utils');exports[a21_0x179493(0x17a)]='grid',exports[a21_0x179493(0x1c6)]=a21_0x179493(0x1ac),exports['builder']=function(_0xc868a2){const _0x813bd7=a21_0x179493,_0x54ba35={};_0x54ba35['bXskX']=_0x813bd7(0x1a2),_0x54ba35[_0x813bd7(0x1b9)]=_0x813bd7(0x17f),_0x54ba35[_0x813bd7(0x1bb)]=_0x813bd7(0x17d),_0x54ba35[_0x813bd7(0x18a)]='boolean',_0x54ba35[_0x813bd7(0x1a0)]='help';const _0x1c6284=_0x54ba35,_0x44536d={};_0x44536d[_0x813bd7(0x17c)]=_0x1c6284[_0x813bd7(0x1b2)],_0x44536d[_0x813bd7(0x1c2)]=_0x1c6284[_0x813bd7(0x1b9)];const _0x291b7b={};_0x291b7b[_0x813bd7(0x17c)]=_0x1c6284[_0x813bd7(0x1bb)],_0x291b7b[_0x813bd7(0x1c2)]=_0x1c6284['DGNyK'],_0x291b7b[_0x813bd7(0x184)]=![];const _0x5c7fea={};return _0x5c7fea[_0x813bd7(0x18f)]=_0x44536d,_0x5c7fea[_0x813bd7(0x191)]=_0x291b7b,_0xc868a2[_0x813bd7(0x186)](HELP_HEADER_MESSAGE[_0x813bd7(0x192)])['epilogue'](HELP_FOOTER_MESSAGE)[_0x813bd7(0x1b1)](_0x5c7fea)['help'](_0x1c6284[_0x813bd7(0x1a0)])[_0x813bd7(0x1c4)];},exports[a21_0x179493(0x1b7)]=async function(_0x5bb896){const _0x494482=a21_0x179493,_0x5b237b={'cXmfB':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','ODjSL':function(_0x5c1669){return _0x5c1669();},'EXkwd':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','ZOTYb':function(_0x1c030d,_0x49aeec,_0x101906,_0x1984a9,_0x2717cd,_0x16b2c0,_0x599bfd){return _0x1c030d(_0x49aeec,_0x101906,_0x1984a9,_0x2717cd,_0x16b2c0,_0x599bfd);},'qfKFE':_0x494482(0x17b),'FVMDc':_0x494482(0x1b4),'iusVN':function(_0x32b471){return _0x32b471();},'RiYFT':_0x494482(0x1bd),'NYClI':'<PasswordPlaceholder>','FSrvf':_0x494482(0x1b8),'kZzIg':function(_0x17cd30,_0x5102d2,_0x3b08fc,_0xec4c80){return _0x17cd30(_0x5102d2,_0x3b08fc,_0xec4c80);},'DHgVJ':function(_0x28712e,_0x534aae,_0x1c78ca,_0x4b6580,_0x2cf9c2,_0x54f0ee,_0x84be76){return _0x28712e(_0x534aae,_0x1c78ca,_0x4b6580,_0x2cf9c2,_0x54f0ee,_0x84be76);},'RXoGK':function(_0x2b0e27,_0x5a2834,_0x22e282){return _0x2b0e27(_0x5a2834,_0x22e282);},'DkjBW':function(_0x430fd0,_0x1ed01c,_0x439d78){return _0x430fd0(_0x1ed01c,_0x439d78);},'nihUN':_0x494482(0x180),'ryMHQ':function(_0x40e8d6,_0x2211ac){return _0x40e8d6===_0x2211ac;},'HPoFR':_0x494482(0x1a5),'kFziH':_0x494482(0x176),'sDMCS':_0x494482(0x19e),'CRtMw':'server-error'};let _0x186f3f;try{!_0x5bb896[_0x494482(0x185)]&&(logger[_0x494482(0x196)](_0x5b237b['cXmfB']),process[_0x494482(0x1ae)](0x1));!fs['existsSync'](_0x5b237b['ODjSL'](getCredentialsPath))&&(logger[_0x494482(0x196)](_0x5b237b[_0x494482(0x18d)]),await _0x5b237b[_0x494482(0x1af)](sendInstrumentationEvent,_0x5bb896,_0x5b237b['qfKFE'],messageTypes[_0x494482(0x194)],_0x5b237b[_0x494482(0x1a9)],null,_0x5bb896),process['exit'](0x1));logger['info'](_0x494482(0x1a4)+_0x5bb896[_0x494482(0x185)]),await _0x5b237b[_0x494482(0x1af)](sendInstrumentationEvent,_0x5bb896,_0x5b237b[_0x494482(0x1b0)],messageTypes[_0x494482(0x177)],null,null,_0x5bb896);const _0xb03e5c=JSON['parse'](fs[_0x494482(0x1aa)](_0x5b237b['iusVN'](getCredentialsPath)));global_registry[_0x494482(0x19a)]=_0xb03e5c[_0x494482(0x1be)]['username'],global_registry[_0x494482(0x1ba)]=_0xb03e5c[_0x494482(0x1be)][_0x494482(0x1c5)];const _0x30172e=WS_ENDPOINT['replace'](_0x5b237b[_0x494482(0x1b6)],_0xb03e5c[_0x494482(0x1be)][_0x494482(0x1c3)])[_0x494482(0x1ab)](_0x5b237b[_0x494482(0x199)],_0xb03e5c[_0x494482(0x1be)][_0x494482(0x1c5)]),_0x32f16e={};_0x32f16e['WebSocket']=ws,_0x32f16e['connectionTimeout']=0x36ee80,_0x186f3f=new ReconnectingWebSocket(_0x30172e,[],_0x32f16e),logger[_0x494482(0x1a1)](_0x5b237b['FSrvf']),webSocketUtils['addListeners'](_0x186f3f,_0x5bb896['user'],_0x5bb896[_0x494482(0x1c5)]);const [_0x9c5956,_0x1d4249]=await _0x5b237b[_0x494482(0x193)](getGridDetails,_0xb03e5c[_0x494482(0x1be)][_0x494482(0x1c3)],_0xb03e5c[_0x494482(0x1be)][_0x494482(0x1c5)],_0x5bb896[_0x494482(0x185)]);if(_0x1d4249){const _0x840e2f=_0x1d4249['info'];global_registry[_0x494482(0x178)]=_0x840e2f[_0x494482(0x178)],global_registry[_0x494482(0x18c)]=_0x840e2f[_0x494482(0x174)],global_registry['clusterName']=_0x840e2f['clusterName'];const _0x110e14=await _0x5b237b[_0x494482(0x188)](getCloudProviderObject,_0x840e2f[_0x494482(0x178)],_0x840e2f[_0x494482(0x18b)],_0x840e2f['name'],_0x186f3f,webSocketUtils,_0x5bb896),[_0x221338,_0x581fa3,_0x1a3d54,_0x22eb04,_0x251c53,_0x56a965]=await _0x5b237b['RXoGK'](createK8sClient,_0x110e14,_0x5bb896[_0x494482(0x1bf)]);await _0x5b237b[_0x494482(0x198)](scaleDownHubDeployment,_0x581fa3,_0x840e2f['name']),logger[_0x494482(0x187)](_0x5b237b['nihUN']),process[_0x494482(0x1ae)](0x0);}_0x5b237b['ryMHQ'](_0x9c5956[_0x494482(0x197)],0x191)&&(logger['error'](_0x5b237b['HPoFR']),await _0x5b237b[_0x494482(0x1af)](sendInstrumentationEvent,_0x5bb896,_0x5b237b[_0x494482(0x1b0)],messageTypes[_0x494482(0x194)],_0x5b237b['kFziH'],null,_0x5bb896),process[_0x494482(0x1ae)](0x1)),_0x5b237b[_0x494482(0x183)](_0x9c5956[_0x494482(0x197)],0x190)&&(logger[_0x494482(0x196)](JSON['parse'](_0x9c5956['body'])[_0x494482(0x1a6)]),await _0x5b237b['DHgVJ'](sendInstrumentationEvent,_0x5bb896,_0x5b237b['qfKFE'],messageTypes[_0x494482(0x194)],_0x5b237b[_0x494482(0x1a7)],null,_0x5bb896),process[_0x494482(0x1ae)](0x1)),logger['error'](_0x494482(0x182)+JSON['stringify'](_0x9c5956)),await _0x5b237b[_0x494482(0x188)](sendInstrumentationEvent,_0x5bb896,_0x5b237b[_0x494482(0x1b0)],messageTypes[_0x494482(0x194)],_0x5b237b['CRtMw'],_0x9c5956,_0x5bb896),process[_0x494482(0x1ae)](0x1);}catch(_0x3b2a86){const _0x221060='Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20'+_0x3b2a86+'\x20\x0a'+JSON[_0x494482(0x1b5)](_0x3b2a86[_0x494482(0x1b3)])+'\x20';logger[_0x494482(0x196)](_0x221060),process['exit'](0x1);}};