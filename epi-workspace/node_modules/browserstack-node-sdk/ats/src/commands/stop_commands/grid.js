function a21_0x50a1(_0x53b40a,_0x5816f4){const _0x563461=a21_0x5634();return a21_0x50a1=function(_0x50a13d,_0x5d0b3d){_0x50a13d=_0x50a13d-0x1eb;let _0x23da4b=_0x563461[_0x50a13d];return _0x23da4b;},a21_0x50a1(_0x53b40a,_0x5816f4);}const a21_0x2c1dd6=a21_0x50a1;(function(_0x37a835,_0x3773b5){const _0x2e5674=a21_0x50a1,_0x193269=_0x37a835();while(!![]){try{const _0x18cc05=parseInt(_0x2e5674(0x22a))/0x1+-parseInt(_0x2e5674(0x221))/0x2*(parseInt(_0x2e5674(0x227))/0x3)+-parseInt(_0x2e5674(0x211))/0x4+parseInt(_0x2e5674(0x1f5))/0x5+parseInt(_0x2e5674(0x21f))/0x6*(-parseInt(_0x2e5674(0x203))/0x7)+-parseInt(_0x2e5674(0x224))/0x8+-parseInt(_0x2e5674(0x23d))/0x9*(-parseInt(_0x2e5674(0x230))/0xa);if(_0x18cc05===_0x3773b5)break;else _0x193269['push'](_0x193269['shift']());}catch(_0x464bbb){_0x193269['push'](_0x193269['shift']());}}}(a21_0x5634,0xac0ee));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x2c1dd6(0x1ee)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x2c1dd6(0x1fe)),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require(a21_0x2c1dd6(0x217)),{scaleDownHubDeployment}=require(a21_0x2c1dd6(0x20c)),{sendInstrumentationEvent}=require(a21_0x2c1dd6(0x232)),webSocketUtils=require(a21_0x2c1dd6(0x1fb)),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require(a21_0x2c1dd6(0x214));function a21_0x5634(){const _0x207a4f=['builder','../../utils/instrumentationUtils','parse','skipTlsCertVerify','password','stop','existsSync','bstackUsername','argv','string','ofEyX','HXZFX','18527931qThrEO','help','description','user','Lplek','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','IpZjC','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','rRlqY','reconnecting-websocket','clusterName','epilogue','ERROR','error','Mvrqa','mFemh','534640XFWQRR','izGvu','grid-id','username','hQLCt','WebSocket','../../utils/webSocketUtils','options','exit','../../config/constants','VlgFt','skip-tls-cert-verify','default','hmeWg','1120zOWmwT','Stopping\x20grid\x20','INFO','readFileSync','stringify','jRgbJ','debug','XsBrE','Skip\x20insecure\x20cert\x20verification.','../../utils/gridComponents','clusterRegion','OqsCp','gridId','command','428460hGFoZd','MUXgq','body','../../cloudproviders/utils','fPRfh','rCeTg','../../utils/utilityMethods','type','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','info','replace','boolean','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','stack','10248UEhtCN','statusCode','422TyfxhH','KXZdb','<UsernamePlaceholder>','2514328LNMWUW','EHekl','init-not-called','14919utvxmc','Browserstack','name','283152MYGayT','invalid-grid-id','server-error','connectionTimeout','cloudProvider','unauthorised','10hHxJZZ'];a21_0x5634=function(){return _0x207a4f;};return a21_0x5634();}exports[a21_0x2c1dd6(0x210)]='grid',exports['desc']='Stop\x20a\x20running\x20Automation\x20grid.',exports[a21_0x2c1dd6(0x231)]=function(_0x4be628){const _0x3261ef=a21_0x2c1dd6,_0x51373d={};_0x51373d[_0x3261ef(0x23b)]=_0x3261ef(0x1ec),_0x51373d[_0x3261ef(0x1f9)]=_0x3261ef(0x23a),_0x51373d[_0x3261ef(0x23c)]=_0x3261ef(0x20b),_0x51373d[_0x3261ef(0x208)]=_0x3261ef(0x21c),_0x51373d['EHekl']=_0x3261ef(0x23e);const _0x2839e7=_0x51373d,_0x2484a6={};_0x2484a6[_0x3261ef(0x23f)]=_0x2839e7[_0x3261ef(0x23b)],_0x2484a6[_0x3261ef(0x218)]=_0x2839e7[_0x3261ef(0x1f9)];const _0x9781f2={};_0x9781f2['description']=_0x2839e7[_0x3261ef(0x23c)],_0x9781f2['type']=_0x2839e7[_0x3261ef(0x208)],_0x9781f2[_0x3261ef(0x201)]=![];const _0xab0380={};return _0xab0380[_0x3261ef(0x1f7)]=_0x2484a6,_0xab0380[_0x3261ef(0x200)]=_0x9781f2,_0x4be628['usage'](HELP_HEADER_MESSAGE[_0x3261ef(0x236)])[_0x3261ef(0x1f0)](HELP_FOOTER_MESSAGE)[_0x3261ef(0x1fc)](_0xab0380)[_0x3261ef(0x23e)](_0x2839e7[_0x3261ef(0x225)])[_0x3261ef(0x239)];},exports['handler']=async function(_0x1df00e){const _0x2f0671=a21_0x2c1dd6,_0x132448={'YQils':_0x2f0671(0x242),'VlgFt':function(_0x450999){return _0x450999();},'OqsCp':_0x2f0671(0x21d),'hmeWg':function(_0x119263,_0xd372c7,_0x4d42a9,_0xcad821,_0x3929ee,_0x38f2c0,_0x2c5604){return _0x119263(_0xd372c7,_0x4d42a9,_0xcad821,_0x3929ee,_0x38f2c0,_0x2c5604);},'XsBrE':'stop-grid-called','rCeTg':_0x2f0671(0x226),'RYFgM':function(_0x364ad9,_0x2f70e2,_0x2ad89d,_0x398af7,_0x548ab7,_0x51211b,_0x41b073){return _0x364ad9(_0x2f70e2,_0x2ad89d,_0x398af7,_0x548ab7,_0x51211b,_0x41b073);},'rRlqY':function(_0x51f1ff){return _0x51f1ff();},'uYZyt':_0x2f0671(0x223),'fPRfh':'<PasswordPlaceholder>','izGvu':'Adding\x20Websocket\x20listeners','vsNLg':function(_0x252a9c,_0x4f5db4,_0x1b1adf,_0x508965){return _0x252a9c(_0x4f5db4,_0x1b1adf,_0x508965);},'Mvrqa':function(_0x23037f,_0x5507f7,_0x2f355f){return _0x23037f(_0x5507f7,_0x2f355f);},'Ivkgq':function(_0x55000a,_0x559027,_0x3b3dc1){return _0x55000a(_0x559027,_0x3b3dc1);},'KXZdb':'Grid\x20stoppped.','IpZjC':function(_0x5e3150,_0x45af87){return _0x5e3150===_0x45af87;},'SEVbT':_0x2f0671(0x219),'eghwz':function(_0x4f396c,_0x5961e3,_0x4e2e1c,_0x4ad5e8,_0x556e48,_0x53577d,_0x25480f){return _0x4f396c(_0x5961e3,_0x4e2e1c,_0x4ad5e8,_0x556e48,_0x53577d,_0x25480f);},'mFemh':_0x2f0671(0x22f),'Lplek':function(_0x36e718,_0x574e8a,_0x5e5d1d,_0x2cb7e6,_0x353c4e,_0x1dd39e,_0x58f4d5){return _0x36e718(_0x574e8a,_0x5e5d1d,_0x2cb7e6,_0x353c4e,_0x1dd39e,_0x58f4d5);},'ECJat':_0x2f0671(0x22b),'yighG':function(_0x5b88c0,_0x1933c0,_0x369c4b,_0x3bc14a,_0x266d3c,_0x2d2979,_0x520d1f){return _0x5b88c0(_0x1933c0,_0x369c4b,_0x3bc14a,_0x266d3c,_0x2d2979,_0x520d1f);},'MUXgq':_0x2f0671(0x22c)};let _0x51bd17;try{!_0x1df00e[_0x2f0671(0x20f)]&&(logger[_0x2f0671(0x1f2)](_0x132448['YQils']),process[_0x2f0671(0x1fd)](0x1));!fs[_0x2f0671(0x237)](_0x132448[_0x2f0671(0x1ff)](getCredentialsPath))&&(logger['error'](_0x132448[_0x2f0671(0x20e)]),await _0x132448[_0x2f0671(0x202)](sendInstrumentationEvent,_0x1df00e,_0x132448[_0x2f0671(0x20a)],messageTypes[_0x2f0671(0x1f1)],_0x132448[_0x2f0671(0x216)],null,_0x1df00e),process['exit'](0x1));logger[_0x2f0671(0x21a)](_0x2f0671(0x204)+_0x1df00e['gridId']),await _0x132448['RYFgM'](sendInstrumentationEvent,_0x1df00e,_0x132448[_0x2f0671(0x20a)],messageTypes[_0x2f0671(0x205)],null,null,_0x1df00e);const _0x5c44f7=JSON[_0x2f0671(0x233)](fs[_0x2f0671(0x206)](_0x132448[_0x2f0671(0x1ed)](getCredentialsPath)));global_registry[_0x2f0671(0x238)]=_0x5c44f7[_0x2f0671(0x228)][_0x2f0671(0x1f8)],global_registry['bstackAccesskey']=_0x5c44f7[_0x2f0671(0x228)][_0x2f0671(0x235)];const _0x1572dd=WS_ENDPOINT['replace'](_0x132448['uYZyt'],_0x5c44f7[_0x2f0671(0x228)][_0x2f0671(0x1f8)])[_0x2f0671(0x21b)](_0x132448[_0x2f0671(0x215)],_0x5c44f7[_0x2f0671(0x228)][_0x2f0671(0x235)]),_0x196e1a={};_0x196e1a[_0x2f0671(0x1fa)]=ws,_0x196e1a[_0x2f0671(0x22d)]=0x36ee80,_0x51bd17=new ReconnectingWebSocket(_0x1572dd,[],_0x196e1a),logger[_0x2f0671(0x209)](_0x132448[_0x2f0671(0x1f6)]),webSocketUtils['addListeners'](_0x51bd17,_0x1df00e[_0x2f0671(0x240)],_0x1df00e[_0x2f0671(0x235)]);const [_0x346f57,_0x18ab95]=await _0x132448['vsNLg'](getGridDetails,_0x5c44f7[_0x2f0671(0x228)][_0x2f0671(0x1f8)],_0x5c44f7[_0x2f0671(0x228)][_0x2f0671(0x235)],_0x1df00e['gridId']);if(_0x18ab95){const _0x4464d2=_0x18ab95[_0x2f0671(0x21a)];global_registry[_0x2f0671(0x22e)]=_0x4464d2[_0x2f0671(0x22e)],global_registry[_0x2f0671(0x20d)]=_0x4464d2['region'],global_registry[_0x2f0671(0x1ef)]=_0x4464d2[_0x2f0671(0x1ef)];const _0x47f5ee=await _0x132448['RYFgM'](getCloudProviderObject,_0x4464d2[_0x2f0671(0x22e)],_0x4464d2[_0x2f0671(0x1ef)],_0x4464d2[_0x2f0671(0x229)],_0x51bd17,webSocketUtils,_0x1df00e),[_0x5c7034,_0x15e114,_0x501f64,_0xbb99f,_0xb15e53,_0xac0ad1]=await _0x132448[_0x2f0671(0x1f3)](createK8sClient,_0x47f5ee,_0x1df00e[_0x2f0671(0x234)]);await _0x132448['Ivkgq'](scaleDownHubDeployment,_0x15e114,_0x4464d2[_0x2f0671(0x229)]),logger['info'](_0x132448[_0x2f0671(0x222)]),process[_0x2f0671(0x1fd)](0x0);}_0x132448[_0x2f0671(0x1eb)](_0x346f57[_0x2f0671(0x220)],0x191)&&(logger[_0x2f0671(0x1f2)](_0x132448['SEVbT']),await _0x132448['eghwz'](sendInstrumentationEvent,_0x1df00e,_0x132448[_0x2f0671(0x20a)],messageTypes[_0x2f0671(0x1f1)],_0x132448[_0x2f0671(0x1f4)],null,_0x1df00e),process[_0x2f0671(0x1fd)](0x1)),_0x132448[_0x2f0671(0x1eb)](_0x346f57[_0x2f0671(0x220)],0x190)&&(logger[_0x2f0671(0x1f2)](JSON[_0x2f0671(0x233)](_0x346f57[_0x2f0671(0x213)])['message']),await _0x132448[_0x2f0671(0x241)](sendInstrumentationEvent,_0x1df00e,_0x132448['XsBrE'],messageTypes['ERROR'],_0x132448['ECJat'],null,_0x1df00e),process[_0x2f0671(0x1fd)](0x1)),logger['error']('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON[_0x2f0671(0x207)](_0x346f57)),await _0x132448['yighG'](sendInstrumentationEvent,_0x1df00e,_0x132448[_0x2f0671(0x20a)],messageTypes['ERROR'],_0x132448[_0x2f0671(0x212)],_0x346f57,_0x1df00e),process['exit'](0x1);}catch(_0x5f4fea){const _0x6204a8='Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20'+_0x5f4fea+'\x20\x0a'+JSON[_0x2f0671(0x207)](_0x5f4fea[_0x2f0671(0x21e)])+'\x20';logger[_0x2f0671(0x1f2)](_0x6204a8),process[_0x2f0671(0x1fd)](0x1);}};