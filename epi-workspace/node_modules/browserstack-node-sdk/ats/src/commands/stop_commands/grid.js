function a21_0xaaf3(_0x51e4f8,_0x110aa4){const _0x2f5012=a21_0x2f50();return a21_0xaaf3=function(_0xaaf3e3,_0x21b178){_0xaaf3e3=_0xaaf3e3-0xb3;let _0x32b705=_0x2f5012[_0xaaf3e3];return _0x32b705;},a21_0xaaf3(_0x51e4f8,_0x110aa4);}const a21_0x41e220=a21_0xaaf3;(function(_0x54843e,_0x399e50){const _0x3b69bc=a21_0xaaf3,_0x26ec2c=_0x54843e();while(!![]){try{const _0xe5e061=parseInt(_0x3b69bc(0xfe))/0x1+-parseInt(_0x3b69bc(0xb4))/0x2+parseInt(_0x3b69bc(0xf6))/0x3*(-parseInt(_0x3b69bc(0xe4))/0x4)+parseInt(_0x3b69bc(0xc0))/0x5+-parseInt(_0x3b69bc(0xca))/0x6+-parseInt(_0x3b69bc(0xe5))/0x7+-parseInt(_0x3b69bc(0xbd))/0x8*(-parseInt(_0x3b69bc(0xcd))/0x9);if(_0xe5e061===_0x399e50)break;else _0x26ec2c['push'](_0x26ec2c['shift']());}catch(_0x2bdd4e){_0x26ec2c['push'](_0x26ec2c['shift']());}}}(a21_0x2f50,0x56d4e));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x41e220(0xb7)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x41e220(0xb6)),{logger}=require(a21_0x41e220(0xe0)),{getCredentialsPath,getGridDetails}=require(a21_0x41e220(0x109)),{scaleDownHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require(a21_0x41e220(0xce)),webSocketUtils=require(a21_0x41e220(0xcc)),{createK8sClient}=require(a21_0x41e220(0xd7)),{getCloudProviderObject}=require(a21_0x41e220(0xcb));function a21_0x2f50(){const _0x57c46b=['stop','<UsernamePlaceholder>','desc','cloudProvider','clusterRegion','password','stringify','bstackAccesskey','3591930RAXnYZ','../../cloudproviders/utils','../../utils/webSocketUtils','171gpjhzi','../../utils/instrumentationUtils','addListeners','options','skip-tls-cert-verify','exit','kGrXr','stack','grid','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','../../utils/createk8sClient','ocIiU','command','irDnc','gridId','skipTlsCertVerify','message','parse','body','../../config/logger','VuRuz','clusterName','IrNzR','44WwXBOF','3249295ButmQb','invalid-grid-id','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','SraXf','epilogue','twWDq','ERROR','handler','INFO','connectionTimeout','statusCode','type','debug','ytkEF','PipVX','BYsmz','username','72957XWcNdy','error','<PasswordPlaceholder>','hPhhn','SkMwo','QUXUI','ByQau','string','247246eElkPv','Iaihc','NlsyV','Browserstack','help','stop-grid-called','akTtM','default','XCebk','name','PGyHp','../../utils/utilityMethods','description','825742KXRksH','unauthorised','../../config/constants','reconnecting-websocket','usage','PrrRO','Stop\x20a\x20running\x20Automation\x20grid.','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','Grid\x20stoppped.','652472HFyBrz','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','UWJnX','1510075IkoxtL','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.'];a21_0x2f50=function(){return _0x57c46b;};return a21_0x2f50();}exports[a21_0x41e220(0xd9)]=a21_0x41e220(0xd5),exports[a21_0x41e220(0xc4)]=a21_0x41e220(0xba),exports['builder']=function(_0x5405f0){const _0x15ba3f=a21_0x41e220,_0x4b5a58={};_0x4b5a58[_0x15ba3f(0xf9)]='Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.',_0x4b5a58[_0x15ba3f(0xd3)]=_0x15ba3f(0xfd),_0x4b5a58[_0x15ba3f(0xfb)]='Skip\x20insecure\x20cert\x20verification.',_0x4b5a58[_0x15ba3f(0x100)]='boolean',_0x4b5a58['OmLuU']='help';const _0x5058ea=_0x4b5a58,_0x3fc941={};_0x3fc941[_0x15ba3f(0xb3)]=_0x5058ea[_0x15ba3f(0xf9)],_0x3fc941['type']=_0x5058ea[_0x15ba3f(0xd3)];const _0x5e1fe9={};_0x5e1fe9[_0x15ba3f(0xb3)]=_0x5058ea[_0x15ba3f(0xfb)],_0x5e1fe9[_0x15ba3f(0xf0)]=_0x5058ea[_0x15ba3f(0x100)],_0x5e1fe9[_0x15ba3f(0x105)]=![];const _0x3351dd={};return _0x3351dd['grid-id']=_0x3fc941,_0x3351dd[_0x15ba3f(0xd1)]=_0x5e1fe9,_0x5405f0[_0x15ba3f(0xb8)](HELP_HEADER_MESSAGE[_0x15ba3f(0xc2)])[_0x15ba3f(0xe9)](HELP_FOOTER_MESSAGE)[_0x15ba3f(0xd0)](_0x3351dd)[_0x15ba3f(0x102)](_0x5058ea['OmLuU'])['argv'];},exports[a21_0x41e220(0xec)]=async function(_0x25d3e0){const _0x11a0fd=a21_0x41e220,_0x55f304={'SraXf':_0x11a0fd(0xbb),'BYsmz':function(_0x270010){return _0x270010();},'yEtwc':_0x11a0fd(0xc1),'ocIiU':function(_0x4a09df,_0x35977b,_0xfdee55,_0x23b14b,_0x155e70,_0x4081ca,_0x10b7bf){return _0x4a09df(_0x35977b,_0xfdee55,_0x23b14b,_0x155e70,_0x4081ca,_0x10b7bf);},'SkMwo':_0x11a0fd(0x103),'PrrRO':'init-not-called','ByQau':function(_0x3c9cc1){return _0x3c9cc1();},'PGyHp':_0x11a0fd(0xc3),'Iaihc':_0x11a0fd(0xf8),'IrNzR':'Adding\x20Websocket\x20listeners','ymkqv':function(_0x6a1b20,_0x48115b,_0x21b3ff,_0x1555b9){return _0x6a1b20(_0x48115b,_0x21b3ff,_0x1555b9);},'twWDq':function(_0x2eafb5,_0x394514,_0x1e1048){return _0x2eafb5(_0x394514,_0x1e1048);},'VuRuz':function(_0x1a68d2,_0x41e73a,_0x39dba3){return _0x1a68d2(_0x41e73a,_0x39dba3);},'UWJnX':_0x11a0fd(0xbc),'PABSP':function(_0x465a42,_0x23d644){return _0x465a42===_0x23d644;},'PipVX':_0x11a0fd(0xd6),'XCebk':_0x11a0fd(0xb5),'NMori':function(_0xffcbce,_0x2f3fed){return _0xffcbce===_0x2f3fed;},'akTtM':function(_0x1b21bf,_0x31a7fe,_0x2d9356,_0x3a38ba,_0x3e86b1,_0x5d8c71,_0x53d068){return _0x1b21bf(_0x31a7fe,_0x2d9356,_0x3a38ba,_0x3e86b1,_0x5d8c71,_0x53d068);},'ytkEF':_0x11a0fd(0xe6),'fZkBi':function(_0x18d562,_0x4009e5,_0x2a766b,_0xe72e69,_0x327125,_0x16b4ca,_0x34c25a){return _0x18d562(_0x4009e5,_0x2a766b,_0xe72e69,_0x327125,_0x16b4ca,_0x34c25a);},'irDnc':'server-error'};let _0x409778;try{!_0x25d3e0[_0x11a0fd(0xdb)]&&(logger[_0x11a0fd(0xf7)](_0x55f304[_0x11a0fd(0xe8)]),process['exit'](0x1));!fs['existsSync'](_0x55f304[_0x11a0fd(0xf4)](getCredentialsPath))&&(logger[_0x11a0fd(0xf7)](_0x55f304['yEtwc']),await _0x55f304['ocIiU'](sendInstrumentationEvent,_0x25d3e0,_0x55f304[_0x11a0fd(0xfa)],messageTypes[_0x11a0fd(0xeb)],_0x55f304[_0x11a0fd(0xb9)],null,_0x25d3e0),process[_0x11a0fd(0xd2)](0x1));logger['info']('Stopping\x20grid\x20'+_0x25d3e0['gridId']),await _0x55f304['ocIiU'](sendInstrumentationEvent,_0x25d3e0,_0x55f304[_0x11a0fd(0xfa)],messageTypes[_0x11a0fd(0xed)],null,null,_0x25d3e0);const _0x2f604b=JSON[_0x11a0fd(0xde)](fs['readFileSync'](_0x55f304[_0x11a0fd(0xfc)](getCredentialsPath)));global_registry['bstackUsername']=_0x2f604b['Browserstack'][_0x11a0fd(0xf5)],global_registry[_0x11a0fd(0xc9)]=_0x2f604b[_0x11a0fd(0x101)]['password'];const _0x5b780e=WS_ENDPOINT['replace'](_0x55f304[_0x11a0fd(0x108)],_0x2f604b['Browserstack']['username'])['replace'](_0x55f304[_0x11a0fd(0xff)],_0x2f604b[_0x11a0fd(0x101)][_0x11a0fd(0xc7)]),_0x2af9b8={};_0x2af9b8['WebSocket']=ws,_0x2af9b8[_0x11a0fd(0xee)]=0x36ee80,_0x409778=new ReconnectingWebSocket(_0x5b780e,[],_0x2af9b8),logger[_0x11a0fd(0xf1)](_0x55f304[_0x11a0fd(0xe3)]),webSocketUtils[_0x11a0fd(0xcf)](_0x409778,_0x25d3e0['user'],_0x25d3e0[_0x11a0fd(0xc7)]);const [_0x15fc97,_0x355159]=await _0x55f304['ymkqv'](getGridDetails,_0x2f604b[_0x11a0fd(0x101)]['username'],_0x2f604b[_0x11a0fd(0x101)]['password'],_0x25d3e0[_0x11a0fd(0xdb)]);if(_0x355159){const _0x4488db=_0x355159['info'];global_registry[_0x11a0fd(0xc5)]=_0x4488db[_0x11a0fd(0xc5)],global_registry[_0x11a0fd(0xc6)]=_0x4488db['region'],global_registry[_0x11a0fd(0xe2)]=_0x4488db['clusterName'];const _0x2ddbc7=await _0x55f304[_0x11a0fd(0xd8)](getCloudProviderObject,_0x4488db[_0x11a0fd(0xc5)],_0x4488db[_0x11a0fd(0xe2)],_0x4488db[_0x11a0fd(0x107)],_0x409778,webSocketUtils,_0x25d3e0),[_0x402640,_0x886f65,_0x689bd7,_0x4bd374,_0x2c0387,_0x3f8cb8]=await _0x55f304[_0x11a0fd(0xea)](createK8sClient,_0x2ddbc7,_0x25d3e0[_0x11a0fd(0xdc)]);await _0x55f304[_0x11a0fd(0xe1)](scaleDownHubDeployment,_0x886f65,_0x4488db[_0x11a0fd(0x107)]),logger['info'](_0x55f304[_0x11a0fd(0xbf)]),process[_0x11a0fd(0xd2)](0x0);}_0x55f304['PABSP'](_0x15fc97[_0x11a0fd(0xef)],0x191)&&(logger[_0x11a0fd(0xf7)](_0x55f304[_0x11a0fd(0xf3)]),await _0x55f304[_0x11a0fd(0xd8)](sendInstrumentationEvent,_0x25d3e0,_0x55f304[_0x11a0fd(0xfa)],messageTypes[_0x11a0fd(0xeb)],_0x55f304[_0x11a0fd(0x106)],null,_0x25d3e0),process[_0x11a0fd(0xd2)](0x1)),_0x55f304['NMori'](_0x15fc97['statusCode'],0x190)&&(logger[_0x11a0fd(0xf7)](JSON[_0x11a0fd(0xde)](_0x15fc97[_0x11a0fd(0xdf)])[_0x11a0fd(0xdd)]),await _0x55f304[_0x11a0fd(0x104)](sendInstrumentationEvent,_0x25d3e0,_0x55f304[_0x11a0fd(0xfa)],messageTypes[_0x11a0fd(0xeb)],_0x55f304[_0x11a0fd(0xf2)],null,_0x25d3e0),process[_0x11a0fd(0xd2)](0x1)),logger[_0x11a0fd(0xf7)](_0x11a0fd(0xbe)+JSON[_0x11a0fd(0xc8)](_0x15fc97)),await _0x55f304['fZkBi'](sendInstrumentationEvent,_0x25d3e0,_0x55f304[_0x11a0fd(0xfa)],messageTypes[_0x11a0fd(0xeb)],_0x55f304[_0x11a0fd(0xda)],_0x15fc97,_0x25d3e0),process[_0x11a0fd(0xd2)](0x1);}catch(_0x31d2c9){const _0x2969d5=_0x11a0fd(0xe7)+_0x31d2c9+'\x20\x0a'+JSON[_0x11a0fd(0xc8)](_0x31d2c9[_0x11a0fd(0xd4)])+'\x20';logger['error'](_0x2969d5),process[_0x11a0fd(0xd2)](0x1);}};