function a21_0x3ad5(){const _0x600d61=['WebSocket','help','afALp','hjZnn','Stop\x20a\x20running\x20Automation\x20grid.','type','command','clusterRegion','user','ERROR','iLgby','8421470HGLeWN','grid-id','wTuOL','string','argv','bMtLU','replace','<PasswordPlaceholder>','4652GROkpm','invalid-grid-id','iFIqJ','connectionTimeout','server-error','debug','clusterName','stop','9YuSYpX','addListeners','stop-grid-called','Grid\x20stoppped.','iswPs','boolean','desc','131190QkKMqO','username','bcHHn','info','cloudProvider','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','Stopping\x20grid\x20','Browserstack','RlgzM','UpSwb','../../config/logger','../../utils/createk8sClient','error','1629UvtXCf','body','skipTlsCertVerify','password','bstackAccesskey','exit','parse','stringify','15EOOBDM','../../cloudproviders/utils','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','../../config/constants','Cdmiq','default','QghkQ','lcJxM','../../utils/instrumentationUtils','skip-tls-cert-verify','Skip\x20insecure\x20cert\x20verification.','GXTPA','NYeAe','EXmpU','statusCode','nsSgz','BGwgo','unauthorised','651556UNtopB','epilogue','42FYcSZB','reconnecting-websocket','bstackUsername','INFO','hcwmX','933040oqgEUS','14557153Mmqmem','options','init-not-called','12ezeDpa','message','HmLqB','builder','description','2iqDwND','9993753zlgrXs','IVVnI','usage','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','gridId'];a21_0x3ad5=function(){return _0x600d61;};return a21_0x3ad5();}function a21_0x138c(_0x2c763f,_0x2251d5){const _0x3ad541=a21_0x3ad5();return a21_0x138c=function(_0x138c11,_0x4ce5a4){_0x138c11=_0x138c11-0x1e4;let _0x826a20=_0x3ad541[_0x138c11];return _0x826a20;},a21_0x138c(_0x2c763f,_0x2251d5);}const a21_0x552ce9=a21_0x138c;(function(_0x3dc9ce,_0x410e03){const _0x1fc91f=a21_0x138c,_0x16f2d0=_0x3dc9ce();while(!![]){try{const _0x4d94cc=parseInt(_0x1fc91f(0x20f))/0x1*(parseInt(_0x1fc91f(0x1ff))/0x2)+parseInt(_0x1fc91f(0x1e5))/0x3*(-parseInt(_0x1fc91f(0x228))/0x4)+-parseInt(_0x1fc91f(0x1ed))/0x5*(-parseInt(_0x1fc91f(0x237))/0x6)+parseInt(_0x1fc91f(0x201))/0x7*(-parseInt(_0x1fc91f(0x206))/0x8)+-parseInt(_0x1fc91f(0x230))/0x9*(parseInt(_0x1fc91f(0x220))/0xa)+parseInt(_0x1fc91f(0x210))/0xb+parseInt(_0x1fc91f(0x20a))/0xc*(parseInt(_0x1fc91f(0x207))/0xd);if(_0x4d94cc===_0x410e03)break;else _0x16f2d0['push'](_0x16f2d0['shift']());}catch(_0x5e3e02){_0x16f2d0['push'](_0x16f2d0['shift']());}}}(a21_0x3ad5,0x8ba73));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x552ce9(0x202)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x552ce9(0x1f0)),{logger}=require(a21_0x552ce9(0x241)),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleDownHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require(a21_0x552ce9(0x1f5)),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require(a21_0x552ce9(0x242)),{getCloudProviderObject}=require(a21_0x552ce9(0x1ee));exports[a21_0x552ce9(0x21b)]='grid',exports[a21_0x552ce9(0x236)]=a21_0x552ce9(0x219),exports[a21_0x552ce9(0x20d)]=function(_0x21c5a5){const _0x1f3c0f=a21_0x552ce9,_0x2d3d03={};_0x2d3d03[_0x1f3c0f(0x240)]='Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.',_0x2d3d03['hjZnn']=_0x1f3c0f(0x223),_0x2d3d03[_0x1f3c0f(0x1f3)]=_0x1f3c0f(0x1f7),_0x2d3d03[_0x1f3c0f(0x1f1)]=_0x1f3c0f(0x235),_0x2d3d03[_0x1f3c0f(0x1f4)]=_0x1f3c0f(0x216);const _0x5289c1=_0x2d3d03,_0x182a6d={};_0x182a6d['description']=_0x5289c1[_0x1f3c0f(0x240)],_0x182a6d[_0x1f3c0f(0x21a)]=_0x5289c1[_0x1f3c0f(0x218)];const _0x5cda6b={};_0x5cda6b[_0x1f3c0f(0x20e)]=_0x5289c1[_0x1f3c0f(0x1f3)],_0x5cda6b[_0x1f3c0f(0x21a)]=_0x5289c1[_0x1f3c0f(0x1f1)],_0x5cda6b[_0x1f3c0f(0x1f2)]=![];const _0x426ace={};return _0x426ace[_0x1f3c0f(0x221)]=_0x182a6d,_0x426ace[_0x1f3c0f(0x1f6)]=_0x5cda6b,_0x21c5a5[_0x1f3c0f(0x212)](HELP_HEADER_MESSAGE[_0x1f3c0f(0x22f)])[_0x1f3c0f(0x200)](HELP_FOOTER_MESSAGE)[_0x1f3c0f(0x208)](_0x426ace)[_0x1f3c0f(0x216)](_0x5289c1[_0x1f3c0f(0x1f4)])[_0x1f3c0f(0x224)];},exports['handler']=async function(_0x1527c8){const _0x591acf=a21_0x552ce9,_0x4a7565={'hcwmX':_0x591acf(0x213),'iLgby':function(_0x18a1f3){return _0x18a1f3();},'NYeAe':_0x591acf(0x1ef),'bcHHn':function(_0x57cc79,_0x3f1d62,_0xbcebfe,_0xad7a49,_0x1ebbe7,_0x2682f5,_0x1a58bd){return _0x57cc79(_0x3f1d62,_0xbcebfe,_0xad7a49,_0x1ebbe7,_0x2682f5,_0x1a58bd);},'nsSgz':_0x591acf(0x232),'XsKXQ':_0x591acf(0x209),'iswPs':function(_0x52a8aa,_0x322618,_0x3c7626,_0x33bb6e,_0x530a26,_0x1b2f78,_0x5c6079){return _0x52a8aa(_0x322618,_0x3c7626,_0x33bb6e,_0x530a26,_0x1b2f78,_0x5c6079);},'aZVQL':'<UsernamePlaceholder>','BGwgo':_0x591acf(0x227),'uhirN':'Adding\x20Websocket\x20listeners','iFIqJ':function(_0x3ba47f,_0x26d032,_0x34b77d,_0x4caca0){return _0x3ba47f(_0x26d032,_0x34b77d,_0x4caca0);},'bMtLU':function(_0x970aaa,_0x16ebde,_0x3b0593){return _0x970aaa(_0x16ebde,_0x3b0593);},'afALp':function(_0x57aaa9,_0xdb0d6e,_0x1a550e){return _0x57aaa9(_0xdb0d6e,_0x1a550e);},'EXmpU':_0x591acf(0x233),'xpxlM':function(_0x53e763,_0x287156){return _0x53e763===_0x287156;},'IVVnI':_0x591acf(0x23c),'RlgzM':_0x591acf(0x1fe),'HmLqB':function(_0x79774e,_0x51dc54){return _0x79774e===_0x51dc54;},'wTuOL':_0x591acf(0x229),'GXTPA':_0x591acf(0x22c)};let _0x3d49cb;try{!_0x1527c8[_0x591acf(0x214)]&&(logger['error'](_0x4a7565[_0x591acf(0x205)]),process[_0x591acf(0x1ea)](0x1));!fs['existsSync'](_0x4a7565[_0x591acf(0x21f)](getCredentialsPath))&&(logger[_0x591acf(0x1e4)](_0x4a7565[_0x591acf(0x1f9)]),await _0x4a7565['bcHHn'](sendInstrumentationEvent,_0x1527c8,_0x4a7565[_0x591acf(0x1fc)],messageTypes['ERROR'],_0x4a7565['XsKXQ'],null,_0x1527c8),process[_0x591acf(0x1ea)](0x1));logger[_0x591acf(0x23a)](_0x591acf(0x23d)+_0x1527c8[_0x591acf(0x214)]),await _0x4a7565[_0x591acf(0x234)](sendInstrumentationEvent,_0x1527c8,_0x4a7565['nsSgz'],messageTypes[_0x591acf(0x204)],null,null,_0x1527c8);const _0x3a20f8=JSON[_0x591acf(0x1eb)](fs['readFileSync'](_0x4a7565['iLgby'](getCredentialsPath)));global_registry[_0x591acf(0x203)]=_0x3a20f8[_0x591acf(0x23e)]['username'],global_registry[_0x591acf(0x1e9)]=_0x3a20f8[_0x591acf(0x23e)]['password'];const _0x2a4196=WS_ENDPOINT['replace'](_0x4a7565['aZVQL'],_0x3a20f8[_0x591acf(0x23e)]['username'])[_0x591acf(0x226)](_0x4a7565[_0x591acf(0x1fd)],_0x3a20f8[_0x591acf(0x23e)][_0x591acf(0x1e8)]),_0x5d2477={};_0x5d2477[_0x591acf(0x215)]=ws,_0x5d2477[_0x591acf(0x22b)]=0x36ee80,_0x3d49cb=new ReconnectingWebSocket(_0x2a4196,[],_0x5d2477),logger[_0x591acf(0x22d)](_0x4a7565['uhirN']),webSocketUtils[_0x591acf(0x231)](_0x3d49cb,_0x1527c8[_0x591acf(0x21d)],_0x1527c8[_0x591acf(0x1e8)]);const [_0x379499,_0x3f832f]=await _0x4a7565[_0x591acf(0x22a)](getGridDetails,_0x3a20f8[_0x591acf(0x23e)][_0x591acf(0x238)],_0x3a20f8[_0x591acf(0x23e)][_0x591acf(0x1e8)],_0x1527c8['gridId']);if(_0x3f832f){const _0x4845cf=_0x3f832f['info'];global_registry[_0x591acf(0x23b)]=_0x4845cf[_0x591acf(0x23b)],global_registry[_0x591acf(0x21c)]=_0x4845cf['region'],global_registry[_0x591acf(0x22e)]=_0x4845cf['clusterName'];const _0x3b1b36=await _0x4a7565[_0x591acf(0x234)](getCloudProviderObject,_0x4845cf[_0x591acf(0x23b)],_0x4845cf['clusterName'],_0x4845cf['name'],_0x3d49cb,webSocketUtils,_0x1527c8),[_0x360aff,_0x4b34fe,_0x1f083e,_0x64367,_0x585a6e,_0x4f2195]=await _0x4a7565[_0x591acf(0x225)](createK8sClient,_0x3b1b36,_0x1527c8[_0x591acf(0x1e7)]);await _0x4a7565[_0x591acf(0x217)](scaleDownHubDeployment,_0x4b34fe,_0x4845cf['name']),logger[_0x591acf(0x23a)](_0x4a7565[_0x591acf(0x1fa)]),process[_0x591acf(0x1ea)](0x0);}_0x4a7565['xpxlM'](_0x379499[_0x591acf(0x1fb)],0x191)&&(logger['error'](_0x4a7565[_0x591acf(0x211)]),await _0x4a7565[_0x591acf(0x234)](sendInstrumentationEvent,_0x1527c8,_0x4a7565['nsSgz'],messageTypes['ERROR'],_0x4a7565[_0x591acf(0x23f)],null,_0x1527c8),process['exit'](0x1)),_0x4a7565[_0x591acf(0x20c)](_0x379499[_0x591acf(0x1fb)],0x190)&&(logger[_0x591acf(0x1e4)](JSON[_0x591acf(0x1eb)](_0x379499[_0x591acf(0x1e6)])[_0x591acf(0x20b)]),await _0x4a7565[_0x591acf(0x239)](sendInstrumentationEvent,_0x1527c8,_0x4a7565[_0x591acf(0x1fc)],messageTypes[_0x591acf(0x21e)],_0x4a7565[_0x591acf(0x222)],null,_0x1527c8),process[_0x591acf(0x1ea)](0x1)),logger[_0x591acf(0x1e4)]('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON[_0x591acf(0x1ec)](_0x379499)),await _0x4a7565[_0x591acf(0x234)](sendInstrumentationEvent,_0x1527c8,_0x4a7565[_0x591acf(0x1fc)],messageTypes[_0x591acf(0x21e)],_0x4a7565[_0x591acf(0x1f8)],_0x379499,_0x1527c8),process[_0x591acf(0x1ea)](0x1);}catch(_0x289bdc){const _0x1d187b='Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20'+_0x289bdc+'\x20\x0a'+JSON[_0x591acf(0x1ec)](_0x289bdc['stack'])+'\x20';logger[_0x591acf(0x1e4)](_0x1d187b),process['exit'](0x1);}};