const a21_0x1bcd9e=a21_0x4c56;(function(_0x86b16b,_0x5b5580){const _0x1b84e2=a21_0x4c56,_0x1afbcc=_0x86b16b();while(!![]){try{const _0x28c81d=-parseInt(_0x1b84e2(0xdb))/0x1*(-parseInt(_0x1b84e2(0x122))/0x2)+parseInt(_0x1b84e2(0xe9))/0x3*(parseInt(_0x1b84e2(0x100))/0x4)+parseInt(_0x1b84e2(0xd9))/0x5*(-parseInt(_0x1b84e2(0x10e))/0x6)+parseInt(_0x1b84e2(0xe6))/0x7*(-parseInt(_0x1b84e2(0x119))/0x8)+-parseInt(_0x1b84e2(0x111))/0x9*(-parseInt(_0x1b84e2(0x115))/0xa)+parseInt(_0x1b84e2(0xf8))/0xb+parseInt(_0x1b84e2(0xd2))/0xc*(parseInt(_0x1b84e2(0xdf))/0xd);if(_0x28c81d===_0x5b5580)break;else _0x1afbcc['push'](_0x1afbcc['shift']());}catch(_0xd41636){_0x1afbcc['push'](_0x1afbcc['shift']());}}}(a21_0x23bc,0x3d014));function a21_0x4c56(_0x1141ae,_0x22b8ba){const _0x23bc9f=a21_0x23bc();return a21_0x4c56=function(_0x4c565b,_0x1267c1){_0x4c565b=_0x4c565b-0xc4;let _0x53fa1e=_0x23bc9f[_0x4c565b];return _0x53fa1e;},a21_0x4c56(_0x1141ae,_0x22b8ba);}function a21_0x23bc(){const _0xa268fd=['OQCXN','../../config/logger','name','qmlWx','stop','unauthorised','region','bstackUsername','429974pmBoWH','<PasswordPlaceholder>','Adding\x20Websocket\x20listeners','grid','message','Skip\x20insecure\x20cert\x20verification.','error','user','../../cloudproviders/utils','handler','KQnfL','../../utils/utilityMethods','desc','skipTlsCertVerify','cloudProvider','exit','376296mEznZd','stack','password','server-error','parse','stop-grid-called','builder','340430KBrLCh','vTbQp','2cleKNF','dnMiS','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','readFileSync','26kRQdBu','apoHG','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','usage','<UsernamePlaceholder>','argv','existsSync','697039JkXMcD','reconnecting-websocket','olpYr','22251xjTBam','Browserstack','gridId','info','addListeners','stringify','help','bBclb','../../utils/instrumentationUtils','type','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','vsdFL','oVIsi','clusterName','383119irzcYb','debug','../../config/constants','invalid-grid-id','username','CtXSl','statusCode','description','168hmqFnH','default','WcuSu','rpJVb','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','psIuy','command','../../utils/gridComponents','init-not-called','ERROR','Vnnjp','skip-tls-cert-verify','iIkJV','GrhCC','24XtWWfM','clusterRegion','body','144wyKOsA','pBzRi','Qfsvj','../../utils/createk8sClient','113170UZWtli','bnCzn','grid-id','replace','40vzEHlt'];a21_0x23bc=function(){return _0xa268fd;};return a21_0x23bc();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x1bcd9e(0xe7)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x1bcd9e(0xfa)),{logger}=require(a21_0x1bcd9e(0x11b)),{getCredentialsPath,getGridDetails}=require(a21_0x1bcd9e(0xcd)),{scaleDownHubDeployment}=require(a21_0x1bcd9e(0x107)),{sendInstrumentationEvent}=require(a21_0x1bcd9e(0xf1)),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require(a21_0x1bcd9e(0x114)),{getCloudProviderObject}=require(a21_0x1bcd9e(0xca));exports[a21_0x1bcd9e(0x106)]=a21_0x1bcd9e(0xc5),exports[a21_0x1bcd9e(0xce)]='Stop\x20a\x20running\x20Automation\x20grid.',exports[a21_0x1bcd9e(0xd8)]=function(_0x2203f7){const _0x21d399=a21_0x1bcd9e,_0x5139fc={};_0x5139fc[_0x21d399(0xe0)]=_0x21d399(0xdd),_0x5139fc['vTbQp']='string',_0x5139fc[_0x21d399(0x113)]=_0x21d399(0xc7),_0x5139fc[_0x21d399(0x102)]='boolean',_0x5139fc[_0x21d399(0xcc)]=_0x21d399(0xef);const _0x5c2e82=_0x5139fc,_0x87dcd={};_0x87dcd[_0x21d399(0xff)]=_0x5c2e82[_0x21d399(0xe0)],_0x87dcd[_0x21d399(0xf2)]=_0x5c2e82[_0x21d399(0xda)];const _0x284e4a={};_0x284e4a['description']=_0x5c2e82[_0x21d399(0x113)],_0x284e4a['type']=_0x5c2e82[_0x21d399(0x102)],_0x284e4a[_0x21d399(0x101)]=![];const _0x1666e7={};return _0x1666e7[_0x21d399(0x117)]=_0x87dcd,_0x1666e7[_0x21d399(0x10b)]=_0x284e4a,_0x2203f7[_0x21d399(0xe2)](HELP_HEADER_MESSAGE[_0x21d399(0x11e)])['epilogue'](HELP_FOOTER_MESSAGE)['options'](_0x1666e7)[_0x21d399(0xef)](_0x5c2e82['KQnfL'])[_0x21d399(0xe4)];},exports[a21_0x1bcd9e(0xcb)]=async function(_0x494c7f){const _0x44f7b3=a21_0x1bcd9e,_0x34c499={'Uidum':_0x44f7b3(0xf4),'oVIsi':function(_0x29fb68){return _0x29fb68();},'CtXSl':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','qmlWx':function(_0x3800ed,_0x7ed8f9,_0x3aabc4,_0x442c79,_0x1a4422,_0x4dec4a,_0x36ff91){return _0x3800ed(_0x7ed8f9,_0x3aabc4,_0x442c79,_0x1a4422,_0x4dec4a,_0x36ff91);},'iIkJV':_0x44f7b3(0xd7),'bBclb':_0x44f7b3(0x108),'Vnnjp':function(_0x561c24){return _0x561c24();},'OQCXN':_0x44f7b3(0xe3),'lUBWP':_0x44f7b3(0x123),'ZkiKA':_0x44f7b3(0xc4),'MYNuY':function(_0x29758d,_0x474376,_0x36a25f,_0x142de4){return _0x29758d(_0x474376,_0x36a25f,_0x142de4);},'PhylC':function(_0x2ec4c2,_0x51e9e1,_0x2bf4a3){return _0x2ec4c2(_0x51e9e1,_0x2bf4a3);},'psIuy':function(_0x2a3635,_0x11cadd,_0x4ac04b){return _0x2a3635(_0x11cadd,_0x4ac04b);},'dnMiS':'Grid\x20stoppped.','bnCzn':function(_0x110658,_0x3e45cb){return _0x110658===_0x3e45cb;},'pBzRi':_0x44f7b3(0x104),'vsdFL':function(_0xd33145,_0x27933b,_0x322031,_0x3d6904,_0xf7ef3f,_0x12a3aa,_0x157e6c){return _0xd33145(_0x27933b,_0x322031,_0x3d6904,_0xf7ef3f,_0x12a3aa,_0x157e6c);},'rpJVb':_0x44f7b3(0x11f),'GrhCC':function(_0x368fd9,_0xc378f0){return _0x368fd9===_0xc378f0;},'olpYr':_0x44f7b3(0xfb),'AkLVu':_0x44f7b3(0xd5)};let _0xfad0fd;try{!_0x494c7f['gridId']&&(logger[_0x44f7b3(0xc8)](_0x34c499['Uidum']),process['exit'](0x1));!fs[_0x44f7b3(0xe5)](_0x34c499[_0x44f7b3(0xf6)](getCredentialsPath))&&(logger[_0x44f7b3(0xc8)](_0x34c499[_0x44f7b3(0xfd)]),await _0x34c499[_0x44f7b3(0x11d)](sendInstrumentationEvent,_0x494c7f,_0x34c499[_0x44f7b3(0x10c)],messageTypes['ERROR'],_0x34c499[_0x44f7b3(0xf0)],null,_0x494c7f),process[_0x44f7b3(0xd1)](0x1));logger['info']('Stopping\x20grid\x20'+_0x494c7f[_0x44f7b3(0xeb)]),await _0x34c499[_0x44f7b3(0x11d)](sendInstrumentationEvent,_0x494c7f,_0x34c499[_0x44f7b3(0x10c)],messageTypes['INFO'],null,null,_0x494c7f);const _0x302649=JSON[_0x44f7b3(0xd6)](fs[_0x44f7b3(0xde)](_0x34c499[_0x44f7b3(0x10a)](getCredentialsPath)));global_registry[_0x44f7b3(0x121)]=_0x302649['Browserstack'][_0x44f7b3(0xfc)],global_registry['bstackAccesskey']=_0x302649[_0x44f7b3(0xea)][_0x44f7b3(0xd4)];const _0x3b61f9=WS_ENDPOINT[_0x44f7b3(0x118)](_0x34c499[_0x44f7b3(0x11a)],_0x302649[_0x44f7b3(0xea)][_0x44f7b3(0xfc)])[_0x44f7b3(0x118)](_0x34c499['lUBWP'],_0x302649['Browserstack'][_0x44f7b3(0xd4)]),_0x2115a0={};_0x2115a0['WebSocket']=ws,_0x2115a0['connectionTimeout']=0x36ee80,_0xfad0fd=new ReconnectingWebSocket(_0x3b61f9,[],_0x2115a0),logger[_0x44f7b3(0xf9)](_0x34c499['ZkiKA']),webSocketUtils[_0x44f7b3(0xed)](_0xfad0fd,_0x494c7f[_0x44f7b3(0xc9)],_0x494c7f[_0x44f7b3(0xd4)]);const [_0x24bce8,_0x1fb8bc]=await _0x34c499['MYNuY'](getGridDetails,_0x302649['Browserstack'][_0x44f7b3(0xfc)],_0x302649[_0x44f7b3(0xea)][_0x44f7b3(0xd4)],_0x494c7f[_0x44f7b3(0xeb)]);if(_0x1fb8bc){const _0x2575d0=_0x1fb8bc['info'];global_registry['cloudProvider']=_0x2575d0[_0x44f7b3(0xd0)],global_registry[_0x44f7b3(0x10f)]=_0x2575d0[_0x44f7b3(0x120)],global_registry[_0x44f7b3(0xf7)]=_0x2575d0['clusterName'];const _0x12025c=await _0x34c499['qmlWx'](getCloudProviderObject,_0x2575d0[_0x44f7b3(0xd0)],_0x2575d0[_0x44f7b3(0xf7)],_0x2575d0[_0x44f7b3(0x11c)],_0xfad0fd,webSocketUtils,_0x494c7f),[_0x55b553,_0x45b30e,_0x1d05a6,_0x3eccb4,_0x52cdea,_0x529bac]=await _0x34c499['PhylC'](createK8sClient,_0x12025c,_0x494c7f[_0x44f7b3(0xcf)]);await _0x34c499[_0x44f7b3(0x105)](scaleDownHubDeployment,_0x45b30e,_0x2575d0[_0x44f7b3(0x11c)]),logger[_0x44f7b3(0xec)](_0x34c499[_0x44f7b3(0xdc)]),process[_0x44f7b3(0xd1)](0x0);}_0x34c499[_0x44f7b3(0x116)](_0x24bce8['statusCode'],0x191)&&(logger['error'](_0x34c499[_0x44f7b3(0x112)]),await _0x34c499['vsdFL'](sendInstrumentationEvent,_0x494c7f,_0x34c499['iIkJV'],messageTypes[_0x44f7b3(0x109)],_0x34c499[_0x44f7b3(0x103)],null,_0x494c7f),process[_0x44f7b3(0xd1)](0x1)),_0x34c499[_0x44f7b3(0x10d)](_0x24bce8[_0x44f7b3(0xfe)],0x190)&&(logger['error'](JSON[_0x44f7b3(0xd6)](_0x24bce8[_0x44f7b3(0x110)])[_0x44f7b3(0xc6)]),await _0x34c499[_0x44f7b3(0xf5)](sendInstrumentationEvent,_0x494c7f,_0x34c499[_0x44f7b3(0x10c)],messageTypes['ERROR'],_0x34c499[_0x44f7b3(0xe8)],null,_0x494c7f),process['exit'](0x1)),logger[_0x44f7b3(0xc8)](_0x44f7b3(0xf3)+JSON[_0x44f7b3(0xee)](_0x24bce8)),await _0x34c499[_0x44f7b3(0x11d)](sendInstrumentationEvent,_0x494c7f,_0x34c499[_0x44f7b3(0x10c)],messageTypes[_0x44f7b3(0x109)],_0x34c499['AkLVu'],_0x24bce8,_0x494c7f),process[_0x44f7b3(0xd1)](0x1);}catch(_0x1fe651){const _0x4e21dc=_0x44f7b3(0xe1)+_0x1fe651+'\x20\x0a'+JSON[_0x44f7b3(0xee)](_0x1fe651[_0x44f7b3(0xd3)])+'\x20';logger[_0x44f7b3(0xc8)](_0x4e21dc),process['exit'](0x1);}};