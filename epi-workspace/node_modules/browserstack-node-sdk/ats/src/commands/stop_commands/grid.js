function a21_0x5247(_0x3991e2,_0x295a62){const _0x2873c1=a21_0x2873();return a21_0x5247=function(_0x52470c,_0x18eacb){_0x52470c=_0x52470c-0x17a;let _0xf1e8d2=_0x2873c1[_0x52470c];return _0xf1e8d2;},a21_0x5247(_0x3991e2,_0x295a62);}const a21_0x2aded9=a21_0x5247;(function(_0x429bb4,_0x4d1abf){const _0x232b97=a21_0x5247,_0x50e2ed=_0x429bb4();while(!![]){try{const _0x51f64b=parseInt(_0x232b97(0x1a4))/0x1+parseInt(_0x232b97(0x196))/0x2+parseInt(_0x232b97(0x1c5))/0x3+parseInt(_0x232b97(0x1bc))/0x4+-parseInt(_0x232b97(0x1bb))/0x5*(parseInt(_0x232b97(0x18a))/0x6)+parseInt(_0x232b97(0x1a6))/0x7+-parseInt(_0x232b97(0x17f))/0x8*(parseInt(_0x232b97(0x1c9))/0x9);if(_0x51f64b===_0x4d1abf)break;else _0x50e2ed['push'](_0x50e2ed['shift']());}catch(_0x24cc82){_0x50e2ed['push'](_0x50e2ed['shift']());}}}(a21_0x2873,0xb196b));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x2aded9(0x1d5)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x2aded9(0x1b7)),{logger}=require(a21_0x2aded9(0x199)),{getCredentialsPath,getGridDetails}=require(a21_0x2aded9(0x1b8)),{scaleDownHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require(a21_0x2aded9(0x19f)),webSocketUtils=require(a21_0x2aded9(0x1cd)),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require(a21_0x2aded9(0x187));exports[a21_0x2aded9(0x1ae)]=a21_0x2aded9(0x1b1),exports[a21_0x2aded9(0x1aa)]=a21_0x2aded9(0x1d4),exports[a21_0x2aded9(0x1a0)]=function(_0x5d0339){const _0x379407=a21_0x2aded9,_0x52aed4={};_0x52aed4[_0x379407(0x1b2)]='Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.',_0x52aed4[_0x379407(0x17c)]=_0x379407(0x1d0),_0x52aed4[_0x379407(0x1a2)]=_0x379407(0x1a5),_0x52aed4[_0x379407(0x19b)]=_0x379407(0x1b4),_0x52aed4[_0x379407(0x1ba)]=_0x379407(0x1ab);const _0x89c4e4=_0x52aed4,_0x5940b8={};_0x5940b8[_0x379407(0x17d)]=_0x89c4e4[_0x379407(0x1b2)],_0x5940b8[_0x379407(0x19c)]=_0x89c4e4[_0x379407(0x17c)];const _0x588bc2={};_0x588bc2[_0x379407(0x17d)]=_0x89c4e4[_0x379407(0x1a2)],_0x588bc2[_0x379407(0x19c)]=_0x89c4e4[_0x379407(0x19b)],_0x588bc2[_0x379407(0x190)]=![];const _0x3de20d={};return _0x3de20d[_0x379407(0x185)]=_0x5940b8,_0x3de20d[_0x379407(0x188)]=_0x588bc2,_0x5d0339['usage'](HELP_HEADER_MESSAGE[_0x379407(0x1d3)])[_0x379407(0x191)](HELP_FOOTER_MESSAGE)['options'](_0x3de20d)[_0x379407(0x1ab)](_0x89c4e4[_0x379407(0x1ba)])[_0x379407(0x18c)];},exports['handler']=async function(_0x5d284c){const _0x2dc7a3=a21_0x2aded9,_0xc5772c={'ZOrFR':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','PfWkD':function(_0x225701){return _0x225701();},'VmQkm':_0x2dc7a3(0x1c0),'aUWCS':function(_0x75ece5,_0x201252,_0x4923fe,_0x1df418,_0x1fbbcb,_0x5d3bf8,_0x224f03){return _0x75ece5(_0x201252,_0x4923fe,_0x1df418,_0x1fbbcb,_0x5d3bf8,_0x224f03);},'QUiyR':_0x2dc7a3(0x189),'ReyxZ':_0x2dc7a3(0x1af),'eGDyO':function(_0x22d41e){return _0x22d41e();},'aZcIx':_0x2dc7a3(0x192),'oDMYQ':_0x2dc7a3(0x1b0),'KHdMI':_0x2dc7a3(0x1ad),'Rskkp':function(_0x268aea,_0x3ce5cc,_0x3ca24c,_0x304738){return _0x268aea(_0x3ce5cc,_0x3ca24c,_0x304738);},'rsPWp':function(_0x309193,_0xadd410,_0x1b0095,_0x3ad870,_0x30457f,_0x3da2cb,_0x2169ca){return _0x309193(_0xadd410,_0x1b0095,_0x3ad870,_0x30457f,_0x3da2cb,_0x2169ca);},'IoLXH':function(_0x48afb3,_0x2e81db,_0x31f863){return _0x48afb3(_0x2e81db,_0x31f863);},'oBGqj':function(_0x1c1b83,_0x96a664,_0x19339e){return _0x1c1b83(_0x96a664,_0x19339e);},'BwLvq':_0x2dc7a3(0x1b6),'VjTxX':function(_0x4221a4,_0x15d068){return _0x4221a4===_0x15d068;},'MFvyQ':_0x2dc7a3(0x17e),'xEkab':'unauthorised','Tzalr':function(_0x25b9b9,_0x26c9e8,_0x35adf0,_0x3c736d,_0x556cf3,_0x48f2e0,_0xb12c38){return _0x25b9b9(_0x26c9e8,_0x35adf0,_0x3c736d,_0x556cf3,_0x48f2e0,_0xb12c38);},'dBvBP':_0x2dc7a3(0x198),'YOXOG':_0x2dc7a3(0x194)};let _0x3503bd;try{!_0x5d284c[_0x2dc7a3(0x1bd)]&&(logger['error'](_0xc5772c[_0x2dc7a3(0x1ca)]),process[_0x2dc7a3(0x181)](0x1));!fs[_0x2dc7a3(0x1d7)](_0xc5772c[_0x2dc7a3(0x180)](getCredentialsPath))&&(logger['error'](_0xc5772c[_0x2dc7a3(0x1ce)]),await _0xc5772c['aUWCS'](sendInstrumentationEvent,_0x5d284c,_0xc5772c[_0x2dc7a3(0x1bf)],messageTypes[_0x2dc7a3(0x182)],_0xc5772c[_0x2dc7a3(0x1cc)],null,_0x5d284c),process['exit'](0x1));logger[_0x2dc7a3(0x1cf)]('Stopping\x20grid\x20'+_0x5d284c[_0x2dc7a3(0x1bd)]),await _0xc5772c[_0x2dc7a3(0x1c1)](sendInstrumentationEvent,_0x5d284c,_0xc5772c[_0x2dc7a3(0x1bf)],messageTypes[_0x2dc7a3(0x18f)],null,null,_0x5d284c);const _0x5a04cb=JSON[_0x2dc7a3(0x1c3)](fs[_0x2dc7a3(0x1d2)](_0xc5772c['eGDyO'](getCredentialsPath)));global_registry[_0x2dc7a3(0x186)]=_0x5a04cb[_0x2dc7a3(0x1d6)][_0x2dc7a3(0x1a1)],global_registry[_0x2dc7a3(0x19a)]=_0x5a04cb['Browserstack']['password'];const _0x2acb89=WS_ENDPOINT[_0x2dc7a3(0x1d1)](_0xc5772c[_0x2dc7a3(0x193)],_0x5a04cb[_0x2dc7a3(0x1d6)][_0x2dc7a3(0x1a1)])[_0x2dc7a3(0x1d1)](_0xc5772c['oDMYQ'],_0x5a04cb[_0x2dc7a3(0x1d6)]['password']),_0xc2c991={};_0xc2c991[_0x2dc7a3(0x1c4)]=ws,_0xc2c991[_0x2dc7a3(0x17a)]=0x36ee80,_0x3503bd=new ReconnectingWebSocket(_0x2acb89,[],_0xc2c991),logger[_0x2dc7a3(0x18d)](_0xc5772c[_0x2dc7a3(0x1a7)]),webSocketUtils[_0x2dc7a3(0x1b5)](_0x3503bd,_0x5d284c[_0x2dc7a3(0x1a8)],_0x5d284c[_0x2dc7a3(0x1a9)]);const [_0x2e7443,_0x2b8a50]=await _0xc5772c[_0x2dc7a3(0x1cb)](getGridDetails,_0x5a04cb['Browserstack'][_0x2dc7a3(0x1a1)],_0x5a04cb['Browserstack']['password'],_0x5d284c[_0x2dc7a3(0x1bd)]);if(_0x2b8a50){const _0x20aff9=_0x2b8a50[_0x2dc7a3(0x1cf)];global_registry[_0x2dc7a3(0x1c6)]=_0x20aff9[_0x2dc7a3(0x1c6)],global_registry[_0x2dc7a3(0x18b)]=_0x20aff9['region'],global_registry[_0x2dc7a3(0x1c7)]=_0x20aff9['clusterName'];const _0xa7e00=await _0xc5772c[_0x2dc7a3(0x1c8)](getCloudProviderObject,_0x20aff9[_0x2dc7a3(0x1c6)],_0x20aff9['clusterName'],_0x20aff9[_0x2dc7a3(0x1c2)],_0x3503bd,webSocketUtils,_0x5d284c),[_0x665c49,_0x18d0eb,_0x2bd43e,_0x145954,_0x3808b6,_0x408ab1]=await _0xc5772c[_0x2dc7a3(0x1a3)](createK8sClient,_0xa7e00,_0x5d284c[_0x2dc7a3(0x1ac)]);await _0xc5772c['oBGqj'](scaleDownHubDeployment,_0x18d0eb,_0x20aff9['name']),logger['info'](_0xc5772c[_0x2dc7a3(0x19d)]),process[_0x2dc7a3(0x181)](0x0);}_0xc5772c[_0x2dc7a3(0x1b9)](_0x2e7443[_0x2dc7a3(0x1b3)],0x191)&&(logger['error'](_0xc5772c[_0x2dc7a3(0x183)]),await _0xc5772c['rsPWp'](sendInstrumentationEvent,_0x5d284c,_0xc5772c['QUiyR'],messageTypes[_0x2dc7a3(0x182)],_0xc5772c[_0x2dc7a3(0x17b)],null,_0x5d284c),process[_0x2dc7a3(0x181)](0x1)),_0xc5772c[_0x2dc7a3(0x1b9)](_0x2e7443['statusCode'],0x190)&&(logger[_0x2dc7a3(0x184)](JSON['parse'](_0x2e7443['body'])['message']),await _0xc5772c[_0x2dc7a3(0x19e)](sendInstrumentationEvent,_0x5d284c,_0xc5772c['QUiyR'],messageTypes['ERROR'],_0xc5772c['dBvBP'],null,_0x5d284c),process[_0x2dc7a3(0x181)](0x1)),logger['error']('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON[_0x2dc7a3(0x197)](_0x2e7443)),await _0xc5772c[_0x2dc7a3(0x1c1)](sendInstrumentationEvent,_0x5d284c,_0xc5772c[_0x2dc7a3(0x1bf)],messageTypes[_0x2dc7a3(0x182)],_0xc5772c[_0x2dc7a3(0x18e)],_0x2e7443,_0x5d284c),process[_0x2dc7a3(0x181)](0x1);}catch(_0xb79e1a){const _0x21725b=_0x2dc7a3(0x195)+_0xb79e1a+'\x20\x0a'+JSON[_0x2dc7a3(0x197)](_0xb79e1a[_0x2dc7a3(0x1be)])+'\x20';logger[_0x2dc7a3(0x184)](_0x21725b),process[_0x2dc7a3(0x181)](0x1);}};function a21_0x2873(){const _0x2b9fab=['VmQkm','info','string','replace','readFileSync','stop','Stop\x20a\x20running\x20Automation\x20grid.','reconnecting-websocket','Browserstack','existsSync','connectionTimeout','xEkab','gXBgZ','description','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','2264gtGwyL','PfWkD','exit','ERROR','MFvyQ','error','grid-id','bstackUsername','../../cloudproviders/utils','skip-tls-cert-verify','stop-grid-called','2490xucyPb','clusterRegion','argv','debug','YOXOG','INFO','default','epilogue','<UsernamePlaceholder>','aZcIx','server-error','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','2247072kgugRI','stringify','invalid-grid-id','../../config/logger','bstackAccesskey','qonGd','type','BwLvq','Tzalr','../../utils/instrumentationUtils','builder','username','fCRey','IoLXH','1038877ruBdHH','Skip\x20insecure\x20cert\x20verification.','8104313EsbSWW','KHdMI','user','password','desc','help','skipTlsCertVerify','Adding\x20Websocket\x20listeners','command','init-not-called','<PasswordPlaceholder>','grid','TxjTx','statusCode','boolean','addListeners','Grid\x20stoppped.','../../config/constants','../../utils/utilityMethods','VjTxX','uFpEt','12370voQBoF','5755096WwsKsJ','gridId','stack','QUiyR','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','aUWCS','name','parse','WebSocket','1221894PpAmXx','cloudProvider','clusterName','rsPWp','108513bAvFAD','ZOrFR','Rskkp','ReyxZ','../../utils/webSocketUtils'];a21_0x2873=function(){return _0x2b9fab;};return a21_0x2873();}