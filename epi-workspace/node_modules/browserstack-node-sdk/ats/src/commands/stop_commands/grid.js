function a21_0x24f4(_0x39113d,_0x59e27f){const _0x3daf40=a21_0x3daf();return a21_0x24f4=function(_0x24f449,_0x30201d){_0x24f449=_0x24f449-0x1b5;let _0x6680b4=_0x3daf40[_0x24f449];return _0x6680b4;},a21_0x24f4(_0x39113d,_0x59e27f);}const a21_0x332078=a21_0x24f4;(function(_0x2ce031,_0x122cb0){const _0x1b5b67=a21_0x24f4,_0x152eb8=_0x2ce031();while(!![]){try{const _0x227996=parseInt(_0x1b5b67(0x1e2))/0x1*(-parseInt(_0x1b5b67(0x1e0))/0x2)+parseInt(_0x1b5b67(0x214))/0x3*(-parseInt(_0x1b5b67(0x1ec))/0x4)+-parseInt(_0x1b5b67(0x1cf))/0x5*(-parseInt(_0x1b5b67(0x20f))/0x6)+parseInt(_0x1b5b67(0x1c5))/0x7*(parseInt(_0x1b5b67(0x1be))/0x8)+parseInt(_0x1b5b67(0x1f1))/0x9*(parseInt(_0x1b5b67(0x1d5))/0xa)+-parseInt(_0x1b5b67(0x204))/0xb*(-parseInt(_0x1b5b67(0x1bb))/0xc)+parseInt(_0x1b5b67(0x20a))/0xd;if(_0x227996===_0x122cb0)break;else _0x152eb8['push'](_0x152eb8['shift']());}catch(_0x57434f){_0x152eb8['push'](_0x152eb8['shift']());}}}(a21_0x3daf,0x924ce));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x332078(0x213)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require('../../config/constants'),{logger}=require(a21_0x332078(0x1ed)),{getCredentialsPath,getGridDetails}=require(a21_0x332078(0x1de)),{scaleDownHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require(a21_0x332078(0x200)),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require(a21_0x332078(0x1e5)),{getCloudProviderObject}=require(a21_0x332078(0x1ea));function a21_0x3daf(){const _0x463485=['region','<PasswordPlaceholder>','16leFXXD','password','default','Grid\x20stoppped.','qjfJb','existsSync','<UsernamePlaceholder>','979783beTlUR','ygexa','ipXBk','MZhUB','grid','skip-tls-cert-verify','bstackUsername','builder','username','cUQor','20ZrBGMY','SNItj','INFO','cloudProvider','FIuEX','stringify','4210uvXtMt','Adding\x20Websocket\x20listeners','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','info','aymjv','clusterName','stack','body','gridId','../../utils/utilityMethods','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','85574GpPJDA','GvQBj','26xMUzmW','Stopping\x20grid\x20','CNduZ','../../utils/createk8sClient','addListeners','clusterRegion','txSKc','readFileSync','../../cloudproviders/utils','debug','4HWKpCW','../../config/logger','DtedM','MrmuE','YueVv','1719mzqBUJ','UFrrI','Browserstack','help','Stop\x20a\x20running\x20Automation\x20grid.','init-not-called','error','message','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','invalid-grid-id','replace','RRmAP','parse','unauthorised','string','../../utils/instrumentationUtils','argv','options','fltgJ','310068ukJpXB','boolean','HOOjs','ERROR','desc','server-error','7176156ShXrOw','user','MzsSh','AxOYn','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','909654dlXaqU','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','name','gHtbN','reconnecting-websocket','2296443niFDIn','description','type','exit','command','grid-id','ZfBOS','408FcFLDH'];a21_0x3daf=function(){return _0x463485;};return a21_0x3daf();}exports[a21_0x332078(0x1b8)]=a21_0x332078(0x1c9),exports[a21_0x332078(0x208)]=a21_0x332078(0x1f5),exports[a21_0x332078(0x1cc)]=function(_0x5b971f){const _0x436812=a21_0x332078,_0x1f4b80={};_0x1f4b80['aymjv']=_0x436812(0x20e),_0x1f4b80[_0x436812(0x203)]=_0x436812(0x1ff),_0x1f4b80[_0x436812(0x1d0)]='Skip\x20insecure\x20cert\x20verification.',_0x1f4b80[_0x436812(0x1ef)]=_0x436812(0x205),_0x1f4b80[_0x436812(0x1e4)]=_0x436812(0x1f4);const _0x32571c=_0x1f4b80,_0x1d51f3={};_0x1d51f3['description']=_0x32571c[_0x436812(0x1d9)],_0x1d51f3[_0x436812(0x1b6)]=_0x32571c[_0x436812(0x203)];const _0x36f51c={};_0x36f51c[_0x436812(0x1b5)]=_0x32571c[_0x436812(0x1d0)],_0x36f51c[_0x436812(0x1b6)]=_0x32571c[_0x436812(0x1ef)],_0x36f51c[_0x436812(0x1c0)]=![];const _0x40613d={};return _0x40613d[_0x436812(0x1b9)]=_0x1d51f3,_0x40613d[_0x436812(0x1ca)]=_0x36f51c,_0x5b971f['usage'](HELP_HEADER_MESSAGE['stop'])['epilogue'](HELP_FOOTER_MESSAGE)[_0x436812(0x202)](_0x40613d)[_0x436812(0x1f4)](_0x32571c[_0x436812(0x1e4)])[_0x436812(0x201)];},exports['handler']=async function(_0x136261){const _0x4b9244=a21_0x332078,_0xbd60ab={'DtedM':_0x4b9244(0x1d7),'YueVv':function(_0x51d208){return _0x51d208();},'FIuEX':_0x4b9244(0x1f9),'gHtbN':function(_0x22f571,_0x2ea5ed,_0x41c317,_0x20b4bc,_0xdd1679,_0x2f83ad,_0x296d37){return _0x22f571(_0x2ea5ed,_0x41c317,_0x20b4bc,_0xdd1679,_0x2f83ad,_0x296d37);},'ipXBk':'stop-grid-called','VrtBu':_0x4b9244(0x1f6),'MzsSh':function(_0x1065eb,_0x789faa,_0x591a69,_0x5f3da5,_0x1b0d97,_0x4c200b,_0x15d0e6){return _0x1065eb(_0x789faa,_0x591a69,_0x5f3da5,_0x1b0d97,_0x4c200b,_0x15d0e6);},'GvQBj':function(_0xab1eb0){return _0xab1eb0();},'ygexa':_0x4b9244(0x1c4),'txSKc':_0x4b9244(0x1bd),'cUQor':_0x4b9244(0x1d6),'MZhUB':function(_0x41b4a7,_0x150774,_0x4d7c60,_0x4b80a4){return _0x41b4a7(_0x150774,_0x4d7c60,_0x4b80a4);},'qjfJb':function(_0x182426,_0x32bd25,_0x27a3f3,_0x262ac8,_0x43b224,_0x2a1587,_0x57bbf7){return _0x182426(_0x32bd25,_0x27a3f3,_0x262ac8,_0x43b224,_0x2a1587,_0x57bbf7);},'AxOYn':function(_0x1643c5,_0x5c4d71,_0x1ca5fa){return _0x1643c5(_0x5c4d71,_0x1ca5fa);},'ZfBOS':_0x4b9244(0x1c1),'RRmAP':function(_0x256cef,_0x4d93af){return _0x256cef===_0x4d93af;},'lyoLX':_0x4b9244(0x210),'UFrrI':function(_0x37fd59,_0x202e68,_0x34b582,_0x3646f8,_0x1ccd63,_0x519397,_0xb0f8c2){return _0x37fd59(_0x202e68,_0x34b582,_0x3646f8,_0x1ccd63,_0x519397,_0xb0f8c2);},'PAtbZ':_0x4b9244(0x1fe),'maIWP':function(_0x332309,_0x35528f){return _0x332309===_0x35528f;},'HOOjs':_0x4b9244(0x1fa),'QSSZB':_0x4b9244(0x209)};let _0x2f014f;try{!_0x136261['gridId']&&(logger[_0x4b9244(0x1f7)](_0xbd60ab[_0x4b9244(0x1ee)]),process[_0x4b9244(0x1b7)](0x1));!fs[_0x4b9244(0x1c3)](_0xbd60ab[_0x4b9244(0x1f0)](getCredentialsPath))&&(logger[_0x4b9244(0x1f7)](_0xbd60ab[_0x4b9244(0x1d3)]),await _0xbd60ab[_0x4b9244(0x212)](sendInstrumentationEvent,_0x136261,_0xbd60ab['ipXBk'],messageTypes[_0x4b9244(0x207)],_0xbd60ab['VrtBu'],null,_0x136261),process[_0x4b9244(0x1b7)](0x1));logger[_0x4b9244(0x1d8)](_0x4b9244(0x1e3)+_0x136261[_0x4b9244(0x1dd)]),await _0xbd60ab[_0x4b9244(0x20c)](sendInstrumentationEvent,_0x136261,_0xbd60ab['ipXBk'],messageTypes[_0x4b9244(0x1d1)],null,null,_0x136261);const _0x194c00=JSON[_0x4b9244(0x1fd)](fs[_0x4b9244(0x1e9)](_0xbd60ab[_0x4b9244(0x1e1)](getCredentialsPath)));global_registry[_0x4b9244(0x1cb)]=_0x194c00[_0x4b9244(0x1f3)][_0x4b9244(0x1cd)],global_registry['bstackAccesskey']=_0x194c00[_0x4b9244(0x1f3)][_0x4b9244(0x1bf)];const _0x3478ac=WS_ENDPOINT[_0x4b9244(0x1fb)](_0xbd60ab[_0x4b9244(0x1c6)],_0x194c00[_0x4b9244(0x1f3)][_0x4b9244(0x1cd)])[_0x4b9244(0x1fb)](_0xbd60ab[_0x4b9244(0x1e8)],_0x194c00[_0x4b9244(0x1f3)][_0x4b9244(0x1bf)]),_0x268ae1={};_0x268ae1['WebSocket']=ws,_0x268ae1['connectionTimeout']=0x36ee80,_0x2f014f=new ReconnectingWebSocket(_0x3478ac,[],_0x268ae1),logger[_0x4b9244(0x1eb)](_0xbd60ab[_0x4b9244(0x1ce)]),webSocketUtils[_0x4b9244(0x1e6)](_0x2f014f,_0x136261[_0x4b9244(0x20b)],_0x136261['password']);const [_0x5a809e,_0x434c04]=await _0xbd60ab[_0x4b9244(0x1c8)](getGridDetails,_0x194c00['Browserstack']['username'],_0x194c00['Browserstack']['password'],_0x136261[_0x4b9244(0x1dd)]);if(_0x434c04){const _0x34f7fc=_0x434c04[_0x4b9244(0x1d8)];global_registry[_0x4b9244(0x1d2)]=_0x34f7fc[_0x4b9244(0x1d2)],global_registry[_0x4b9244(0x1e7)]=_0x34f7fc[_0x4b9244(0x1bc)],global_registry[_0x4b9244(0x1da)]=_0x34f7fc[_0x4b9244(0x1da)];const _0x461d3c=await _0xbd60ab[_0x4b9244(0x1c2)](getCloudProviderObject,_0x34f7fc['cloudProvider'],_0x34f7fc[_0x4b9244(0x1da)],_0x34f7fc['name'],_0x2f014f,webSocketUtils,_0x136261),[_0x403ed9,_0x41a820,_0x351718,_0x398f30,_0x638c7b,_0xfafc1d]=await _0xbd60ab['AxOYn'](createK8sClient,_0x461d3c,_0x136261['skipTlsCertVerify']);await _0xbd60ab[_0x4b9244(0x20d)](scaleDownHubDeployment,_0x41a820,_0x34f7fc[_0x4b9244(0x211)]),logger[_0x4b9244(0x1d8)](_0xbd60ab[_0x4b9244(0x1ba)]),process[_0x4b9244(0x1b7)](0x0);}_0xbd60ab[_0x4b9244(0x1fc)](_0x5a809e['statusCode'],0x191)&&(logger[_0x4b9244(0x1f7)](_0xbd60ab['lyoLX']),await _0xbd60ab[_0x4b9244(0x1f2)](sendInstrumentationEvent,_0x136261,_0xbd60ab[_0x4b9244(0x1c7)],messageTypes[_0x4b9244(0x207)],_0xbd60ab['PAtbZ'],null,_0x136261),process[_0x4b9244(0x1b7)](0x1)),_0xbd60ab['maIWP'](_0x5a809e['statusCode'],0x190)&&(logger[_0x4b9244(0x1f7)](JSON[_0x4b9244(0x1fd)](_0x5a809e[_0x4b9244(0x1dc)])[_0x4b9244(0x1f8)]),await _0xbd60ab['UFrrI'](sendInstrumentationEvent,_0x136261,_0xbd60ab[_0x4b9244(0x1c7)],messageTypes[_0x4b9244(0x207)],_0xbd60ab[_0x4b9244(0x206)],null,_0x136261),process[_0x4b9244(0x1b7)](0x1)),logger[_0x4b9244(0x1f7)](_0x4b9244(0x1df)+JSON['stringify'](_0x5a809e)),await _0xbd60ab['MzsSh'](sendInstrumentationEvent,_0x136261,_0xbd60ab[_0x4b9244(0x1c7)],messageTypes[_0x4b9244(0x207)],_0xbd60ab['QSSZB'],_0x5a809e,_0x136261),process[_0x4b9244(0x1b7)](0x1);}catch(_0x469adf){const _0x4bd290='Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20'+_0x469adf+'\x20\x0a'+JSON[_0x4b9244(0x1d4)](_0x469adf[_0x4b9244(0x1db)])+'\x20';logger[_0x4b9244(0x1f7)](_0x4bd290),process[_0x4b9244(0x1b7)](0x1);}};