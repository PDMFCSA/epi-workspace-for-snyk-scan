function a21_0x195c(_0x158021,_0x2457f4){const _0x1091fa=a21_0x1091();return a21_0x195c=function(_0x195cfb,_0xebf05){_0x195cfb=_0x195cfb-0x7d;let _0x122e88=_0x1091fa[_0x195cfb];return _0x122e88;},a21_0x195c(_0x158021,_0x2457f4);}const a21_0x1b8b88=a21_0x195c;(function(_0x334d79,_0x5c74ad){const _0x2f4fc6=a21_0x195c,_0x1e8260=_0x334d79();while(!![]){try{const _0x478d19=parseInt(_0x2f4fc6(0x7d))/0x1+parseInt(_0x2f4fc6(0x86))/0x2*(-parseInt(_0x2f4fc6(0xa4))/0x3)+-parseInt(_0x2f4fc6(0xcb))/0x4*(-parseInt(_0x2f4fc6(0x85))/0x5)+parseInt(_0x2f4fc6(0xbc))/0x6*(parseInt(_0x2f4fc6(0x9d))/0x7)+-parseInt(_0x2f4fc6(0xbf))/0x8+-parseInt(_0x2f4fc6(0x8b))/0x9*(-parseInt(_0x2f4fc6(0x91))/0xa)+-parseInt(_0x2f4fc6(0xbb))/0xb*(parseInt(_0x2f4fc6(0x99))/0xc);if(_0x478d19===_0x5c74ad)break;else _0x1e8260['push'](_0x1e8260['shift']());}catch(_0x4ff4b9){_0x1e8260['push'](_0x1e8260['shift']());}}}(a21_0x1091,0x4c853));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x1b8b88(0xc3)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x1b8b88(0xd4)),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require(a21_0x1b8b88(0xc5)),{scaleDownHubDeployment}=require(a21_0x1b8b88(0x89)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require(a21_0x1b8b88(0xaa)),{createK8sClient}=require(a21_0x1b8b88(0xac)),{getCloudProviderObject}=require(a21_0x1b8b88(0xca));function a21_0x1091(){const _0x2140f4=['CdUqf','exit','xoZEF','info','365596fgYTpB','189318oqXrGy','AKHeO','help','3235184vbMkGg','boolean','debug','UJiuU','reconnecting-websocket','argv','../../utils/utilityMethods','replace','bfuCt','VVzWf','server-error','../../cloudproviders/utils','27336aHLJaJ','description','ItVVD','dGtdI','grid-id','password','AKNHx','cloudProvider','clusterName','../../config/constants','WebSocket','unauthorised','<UsernamePlaceholder>','466373ufXRdR','Stopping\x20grid\x20','region','message','Browserstack','name','desc','TtZti','365qjQYqV','2zveIaD','jxIEp','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','../../utils/gridComponents','gridId','9MBvzWY','juJKy','aFipd','error','existsSync','skip-tls-cert-verify','3075290eUvNSs','VqQIp','Stop\x20a\x20running\x20Automation\x20grid.','epilogue','nXifU','Grid\x20stoppped.','builder','lyrkp','120kROhqZ','BZYug','<PasswordPlaceholder>','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','7cWfPrE','username','stack','ERROR','pBhnU','scIdh','addListeners','762456cAWtBG','command','parse','TMBFa','QPzID','stringify','../../utils/webSocketUtils','INFO','../../utils/createk8sClient','stop','stop-grid-called','init-not-called','options','skipTlsCertVerify','TutQu','OdWFt','string','PlnYl','Adding\x20Websocket\x20listeners'];a21_0x1091=function(){return _0x2140f4;};return a21_0x1091();}exports[a21_0x1b8b88(0xa5)]='grid',exports[a21_0x1b8b88(0x83)]=a21_0x1b8b88(0x93),exports[a21_0x1b8b88(0x97)]=function(_0x5f1d1e){const _0x544156=a21_0x1b8b88,_0x3b6b1f={};_0x3b6b1f[_0x544156(0x87)]=_0x544156(0x88),_0x3b6b1f[_0x544156(0xb5)]=_0x544156(0xb4),_0x3b6b1f[_0x544156(0x8d)]='Skip\x20insecure\x20cert\x20verification.',_0x3b6b1f[_0x544156(0xb7)]=_0x544156(0xc0),_0x3b6b1f[_0x544156(0xc7)]='help';const _0x5d3abc=_0x3b6b1f,_0x353a9e={};_0x353a9e[_0x544156(0xcc)]=_0x5d3abc[_0x544156(0x87)],_0x353a9e['type']=_0x5d3abc['PlnYl'];const _0x116927={};_0x116927[_0x544156(0xcc)]=_0x5d3abc['aFipd'],_0x116927['type']=_0x5d3abc[_0x544156(0xb7)],_0x116927['default']=![];const _0x5a1044={};return _0x5a1044[_0x544156(0xcf)]=_0x353a9e,_0x5a1044[_0x544156(0x90)]=_0x116927,_0x5f1d1e['usage'](HELP_HEADER_MESSAGE[_0x544156(0xad)])[_0x544156(0x94)](HELP_FOOTER_MESSAGE)[_0x544156(0xb0)](_0x5a1044)[_0x544156(0xbe)](_0x5d3abc['bfuCt'])[_0x544156(0xc4)];},exports['handler']=async function(_0x3f0c3d){const _0x4e3a00=a21_0x1b8b88,_0x4532fe={'BZYug':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','fQtTY':function(_0x23bf28){return _0x23bf28();},'TutQu':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','scIdh':function(_0xaa5e8b,_0x5df9b3,_0xaf1bf7,_0x2c92bb,_0x47676a,_0x8745f8,_0x151d32){return _0xaa5e8b(_0x5df9b3,_0xaf1bf7,_0x2c92bb,_0x47676a,_0x8745f8,_0x151d32);},'VqQIp':_0x4e3a00(0xae),'pBhnU':_0x4e3a00(0xaf),'AKNHx':function(_0x249ba1,_0x1a8330,_0x347c0f,_0x36118f,_0x53ba61,_0x3fa192,_0x395e7d){return _0x249ba1(_0x1a8330,_0x347c0f,_0x36118f,_0x53ba61,_0x3fa192,_0x395e7d);},'AKHeO':function(_0x735049){return _0x735049();},'ItVVD':_0x4e3a00(0xd7),'dGtdI':_0x4e3a00(0x9b),'xoZEF':_0x4e3a00(0xb6),'TMBFa':function(_0x7d4376,_0x3cdde2,_0x275cdc,_0x2aaca5){return _0x7d4376(_0x3cdde2,_0x275cdc,_0x2aaca5);},'TtZti':function(_0x15f200,_0x28a2b3,_0x15f530,_0x26acca,_0xc342b,_0xe2654e,_0x51a737){return _0x15f200(_0x28a2b3,_0x15f530,_0x26acca,_0xc342b,_0xe2654e,_0x51a737);},'RUNOw':function(_0x2b773d,_0x21c23b,_0x151101){return _0x2b773d(_0x21c23b,_0x151101);},'cLYIq':function(_0x1cfaa9,_0x54c24f,_0x2987a1){return _0x1cfaa9(_0x54c24f,_0x2987a1);},'UJiuU':_0x4e3a00(0x96),'juJKy':function(_0x1bd5ad,_0x51df0c){return _0x1bd5ad===_0x51df0c;},'lyrkp':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','VVzWf':_0x4e3a00(0xd6),'OdWFt':function(_0xd05f3a,_0x184522){return _0xd05f3a===_0x184522;},'nXifU':'invalid-grid-id','QPzID':_0x4e3a00(0xc9)};let _0x17d85c;try{!_0x3f0c3d[_0x4e3a00(0x8a)]&&(logger[_0x4e3a00(0x8e)](_0x4532fe[_0x4e3a00(0x9a)]),process[_0x4e3a00(0xb8)](0x1));!fs[_0x4e3a00(0x8f)](_0x4532fe['fQtTY'](getCredentialsPath))&&(logger[_0x4e3a00(0x8e)](_0x4532fe[_0x4e3a00(0xb2)]),await _0x4532fe[_0x4e3a00(0xa2)](sendInstrumentationEvent,_0x3f0c3d,_0x4532fe[_0x4e3a00(0x92)],messageTypes[_0x4e3a00(0xa0)],_0x4532fe[_0x4e3a00(0xa1)],null,_0x3f0c3d),process[_0x4e3a00(0xb8)](0x1));logger[_0x4e3a00(0xba)](_0x4e3a00(0x7e)+_0x3f0c3d[_0x4e3a00(0x8a)]),await _0x4532fe[_0x4e3a00(0xd1)](sendInstrumentationEvent,_0x3f0c3d,_0x4532fe['VqQIp'],messageTypes[_0x4e3a00(0xab)],null,null,_0x3f0c3d);const _0x2ceccb=JSON[_0x4e3a00(0xa6)](fs['readFileSync'](_0x4532fe[_0x4e3a00(0xbd)](getCredentialsPath)));global_registry['bstackUsername']=_0x2ceccb[_0x4e3a00(0x81)][_0x4e3a00(0x9e)],global_registry['bstackAccesskey']=_0x2ceccb[_0x4e3a00(0x81)][_0x4e3a00(0xd0)];const _0x45d51a=WS_ENDPOINT[_0x4e3a00(0xc6)](_0x4532fe[_0x4e3a00(0xcd)],_0x2ceccb['Browserstack'][_0x4e3a00(0x9e)])['replace'](_0x4532fe[_0x4e3a00(0xce)],_0x2ceccb[_0x4e3a00(0x81)][_0x4e3a00(0xd0)]),_0x2c683c={};_0x2c683c[_0x4e3a00(0xd5)]=ws,_0x2c683c['connectionTimeout']=0x36ee80,_0x17d85c=new ReconnectingWebSocket(_0x45d51a,[],_0x2c683c),logger[_0x4e3a00(0xc1)](_0x4532fe[_0x4e3a00(0xb9)]),webSocketUtils[_0x4e3a00(0xa3)](_0x17d85c,_0x3f0c3d['user'],_0x3f0c3d[_0x4e3a00(0xd0)]);const [_0x8c7964,_0x5a3d26]=await _0x4532fe[_0x4e3a00(0xa7)](getGridDetails,_0x2ceccb[_0x4e3a00(0x81)][_0x4e3a00(0x9e)],_0x2ceccb[_0x4e3a00(0x81)][_0x4e3a00(0xd0)],_0x3f0c3d[_0x4e3a00(0x8a)]);if(_0x5a3d26){const _0x86b43a=_0x5a3d26[_0x4e3a00(0xba)];global_registry[_0x4e3a00(0xd2)]=_0x86b43a[_0x4e3a00(0xd2)],global_registry['clusterRegion']=_0x86b43a[_0x4e3a00(0x7f)],global_registry[_0x4e3a00(0xd3)]=_0x86b43a[_0x4e3a00(0xd3)];const _0x57c02f=await _0x4532fe[_0x4e3a00(0x84)](getCloudProviderObject,_0x86b43a[_0x4e3a00(0xd2)],_0x86b43a[_0x4e3a00(0xd3)],_0x86b43a['name'],_0x17d85c,webSocketUtils,_0x3f0c3d),[_0x3c460c,_0x5e62f2,_0x502cd6,_0x16435e,_0x5808c0,_0x14d224]=await _0x4532fe['RUNOw'](createK8sClient,_0x57c02f,_0x3f0c3d[_0x4e3a00(0xb1)]);await _0x4532fe['cLYIq'](scaleDownHubDeployment,_0x5e62f2,_0x86b43a[_0x4e3a00(0x82)]),logger[_0x4e3a00(0xba)](_0x4532fe[_0x4e3a00(0xc2)]),process['exit'](0x0);}_0x4532fe[_0x4e3a00(0x8c)](_0x8c7964['statusCode'],0x191)&&(logger[_0x4e3a00(0x8e)](_0x4532fe[_0x4e3a00(0x98)]),await _0x4532fe[_0x4e3a00(0xa2)](sendInstrumentationEvent,_0x3f0c3d,_0x4532fe[_0x4e3a00(0x92)],messageTypes[_0x4e3a00(0xa0)],_0x4532fe[_0x4e3a00(0xc8)],null,_0x3f0c3d),process[_0x4e3a00(0xb8)](0x1)),_0x4532fe[_0x4e3a00(0xb3)](_0x8c7964['statusCode'],0x190)&&(logger['error'](JSON[_0x4e3a00(0xa6)](_0x8c7964['body'])[_0x4e3a00(0x80)]),await _0x4532fe['scIdh'](sendInstrumentationEvent,_0x3f0c3d,_0x4532fe[_0x4e3a00(0x92)],messageTypes['ERROR'],_0x4532fe[_0x4e3a00(0x95)],null,_0x3f0c3d),process[_0x4e3a00(0xb8)](0x1)),logger[_0x4e3a00(0x8e)](_0x4e3a00(0x9c)+JSON[_0x4e3a00(0xa9)](_0x8c7964)),await _0x4532fe['scIdh'](sendInstrumentationEvent,_0x3f0c3d,_0x4532fe[_0x4e3a00(0x92)],messageTypes[_0x4e3a00(0xa0)],_0x4532fe[_0x4e3a00(0xa8)],_0x8c7964,_0x3f0c3d),process['exit'](0x1);}catch(_0x6d62da){const _0x2498a3='Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20'+_0x6d62da+'\x20\x0a'+JSON[_0x4e3a00(0xa9)](_0x6d62da[_0x4e3a00(0x9f)])+'\x20';logger[_0x4e3a00(0x8e)](_0x2498a3),process[_0x4e3a00(0xb8)](0x1);}};