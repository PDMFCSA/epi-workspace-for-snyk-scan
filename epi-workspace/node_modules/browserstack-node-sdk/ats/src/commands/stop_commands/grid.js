const a21_0x4e2f7d=a21_0x4da7;function a21_0x4da7(_0x4985c2,_0x4a43d7){const _0xffd8b1=a21_0xffd8();return a21_0x4da7=function(_0x4da79d,_0x127b62){_0x4da79d=_0x4da79d-0xf1;let _0x5c041a=_0xffd8b1[_0x4da79d];return _0x5c041a;},a21_0x4da7(_0x4985c2,_0x4a43d7);}(function(_0x646336,_0x3127b7){const _0x4ec10c=a21_0x4da7,_0x359d2b=_0x646336();while(!![]){try{const _0x2915e1=parseInt(_0x4ec10c(0x11c))/0x1+-parseInt(_0x4ec10c(0x129))/0x2+parseInt(_0x4ec10c(0x12b))/0x3+-parseInt(_0x4ec10c(0x139))/0x4*(parseInt(_0x4ec10c(0x122))/0x5)+-parseInt(_0x4ec10c(0xf3))/0x6*(-parseInt(_0x4ec10c(0xff))/0x7)+parseInt(_0x4ec10c(0x14c))/0x8*(parseInt(_0x4ec10c(0x120))/0x9)+-parseInt(_0x4ec10c(0x119))/0xa*(parseInt(_0x4ec10c(0x131))/0xb);if(_0x2915e1===_0x3127b7)break;else _0x359d2b['push'](_0x359d2b['shift']());}catch(_0x1b5f8c){_0x359d2b['push'](_0x359d2b['shift']());}}}(a21_0xffd8,0x58461));function a21_0xffd8(){const _0x4b9944=['message','Skip\x20insecure\x20cert\x20verification.','WHtDU','OduHe','gTllb','region','argv','connectionTimeout','CfCCN','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','ccSVi','bstackAccesskey','FnRub','sNwCs','ERROR','zeqiI','vtZvl','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','4564328FGvKSQ','<UsernamePlaceholder>','builder','server-error','name','exit','zCdkn','default','username','stop','30fZzUJf','PASzC','stack','../../config/logger','user','LjkOp','Browserstack','../../utils/createk8sClient','cloudProvider','gridId','Grid\x20stoppped.','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','221193ispcAU','vfwPL','zYqhI','command','grid','../../config/constants','../../utils/instrumentationUtils','type','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','wCvwZ','grid-id','../../utils/webSocketUtils','reconnecting-websocket','existsSync','replace','hpgOs','error','njINP','string','stop-grid-called','epilogue','lKEhk','../../cloudproviders/utils','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','boolean','options','3065330aVMAtO','description','Stop\x20a\x20running\x20Automation\x20grid.','166098gEniQS','stringify','clusterRegion','parse','9UwAgzz','bstackUsername','80dEbwJo','invalid-grid-id','skipTlsCertVerify','zSpIY','INFO','psBUr','hVwpI','971774XxULXP','../../utils/utilityMethods','1826913DxVmGp','../../utils/gridComponents','help','info','handler','usage','11wqwdyb','clusterName','readFileSync','WebSocket','password','NYbVi','xISmf','Adding\x20Websocket\x20listeners','87404GQDFLi'];a21_0xffd8=function(){return _0x4b9944;};return a21_0xffd8();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x4e2f7d(0x10b)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x4e2f7d(0x104)),{logger}=require(a21_0x4e2f7d(0xf6)),{getCredentialsPath,getGridDetails}=require(a21_0x4e2f7d(0x12a)),{scaleDownHubDeployment}=require(a21_0x4e2f7d(0x12c)),{sendInstrumentationEvent}=require(a21_0x4e2f7d(0x105)),webSocketUtils=require(a21_0x4e2f7d(0x10a)),{createK8sClient}=require(a21_0x4e2f7d(0xfa)),{getCloudProviderObject}=require(a21_0x4e2f7d(0x115));exports[a21_0x4e2f7d(0x102)]=a21_0x4e2f7d(0x103),exports['desc']=a21_0x4e2f7d(0x11b),exports[a21_0x4e2f7d(0x14e)]=function(_0x6cab6a){const _0x3f60bb=a21_0x4e2f7d,_0x173a0a={};_0x173a0a[_0x3f60bb(0x152)]='Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.',_0x173a0a[_0x3f60bb(0x128)]=_0x3f60bb(0x111),_0x173a0a['vtZvl']=_0x3f60bb(0x13b),_0x173a0a[_0x3f60bb(0x13d)]=_0x3f60bb(0x117),_0x173a0a[_0x3f60bb(0x144)]=_0x3f60bb(0x12d);const _0x19df56=_0x173a0a,_0x20b898={};_0x20b898[_0x3f60bb(0x11a)]=_0x19df56['zCdkn'],_0x20b898[_0x3f60bb(0x106)]=_0x19df56[_0x3f60bb(0x128)];const _0x36149f={};_0x36149f[_0x3f60bb(0x11a)]=_0x19df56[_0x3f60bb(0x14a)],_0x36149f[_0x3f60bb(0x106)]=_0x19df56[_0x3f60bb(0x13d)],_0x36149f[_0x3f60bb(0x153)]=![];const _0x90da2d={};return _0x90da2d[_0x3f60bb(0x109)]=_0x20b898,_0x90da2d['skip-tls-cert-verify']=_0x36149f,_0x6cab6a[_0x3f60bb(0x130)](HELP_HEADER_MESSAGE[_0x3f60bb(0xf2)])[_0x3f60bb(0x113)](HELP_FOOTER_MESSAGE)[_0x3f60bb(0x118)](_0x90da2d)[_0x3f60bb(0x12d)](_0x19df56['ccSVi'])[_0x3f60bb(0x140)];},exports[a21_0x4e2f7d(0x12f)]=async function(_0x3c78b4){const _0xbe9905=a21_0x4e2f7d,_0x5d88a3={'WHtDU':_0xbe9905(0x107),'hpgOs':function(_0x479416){return _0x479416();},'wCvwZ':_0xbe9905(0x116),'zYqhI':function(_0x4f0aee,_0x2afb12,_0xe4d29e,_0xd48623,_0x35b711,_0x243b45,_0x48d67c){return _0x4f0aee(_0x2afb12,_0xe4d29e,_0xd48623,_0x35b711,_0x243b45,_0x48d67c);},'lKEhk':_0xbe9905(0x112),'lEVgW':'init-not-called','njINP':function(_0x187fce){return _0x187fce();},'FnRub':_0xbe9905(0x14d),'xISmf':'<PasswordPlaceholder>','NYbVi':_0xbe9905(0x138),'PASzC':function(_0x440672,_0x5522fe,_0xae8246,_0x4dc318){return _0x440672(_0x5522fe,_0xae8246,_0x4dc318);},'qpBid':function(_0x11047e,_0x57cd40,_0x5a5bce){return _0x11047e(_0x57cd40,_0x5a5bce);},'sNwCs':function(_0x550a24,_0x3fdf68,_0x5b5156){return _0x550a24(_0x3fdf68,_0x5b5156);},'LjkOp':_0xbe9905(0xfd),'zSpIY':function(_0x2107a9,_0x1f99a4){return _0x2107a9===_0x1f99a4;},'CfCCN':_0xbe9905(0x143),'zeqiI':'unauthorised','gTllb':function(_0x4c1865,_0x5c75c2,_0x2cae7c,_0xf22f0c,_0xa6474a,_0xe9df89,_0x391963){return _0x4c1865(_0x5c75c2,_0x2cae7c,_0xf22f0c,_0xa6474a,_0xe9df89,_0x391963);},'psBUr':_0xbe9905(0x123),'vfwPL':_0xbe9905(0x14f)};let _0x5e1dc1;try{!_0x3c78b4[_0xbe9905(0xfc)]&&(logger[_0xbe9905(0x10f)](_0x5d88a3[_0xbe9905(0x13c)]),process[_0xbe9905(0x151)](0x1));!fs[_0xbe9905(0x10c)](_0x5d88a3[_0xbe9905(0x10e)](getCredentialsPath))&&(logger[_0xbe9905(0x10f)](_0x5d88a3[_0xbe9905(0x108)]),await _0x5d88a3[_0xbe9905(0x101)](sendInstrumentationEvent,_0x3c78b4,_0x5d88a3[_0xbe9905(0x114)],messageTypes[_0xbe9905(0x148)],_0x5d88a3['lEVgW'],null,_0x3c78b4),process[_0xbe9905(0x151)](0x1));logger[_0xbe9905(0x12e)]('Stopping\x20grid\x20'+_0x3c78b4[_0xbe9905(0xfc)]),await _0x5d88a3[_0xbe9905(0x101)](sendInstrumentationEvent,_0x3c78b4,_0x5d88a3['lKEhk'],messageTypes[_0xbe9905(0x126)],null,null,_0x3c78b4);const _0x1424b7=JSON[_0xbe9905(0x11f)](fs[_0xbe9905(0x133)](_0x5d88a3[_0xbe9905(0x110)](getCredentialsPath)));global_registry[_0xbe9905(0x121)]=_0x1424b7[_0xbe9905(0xf9)][_0xbe9905(0xf1)],global_registry[_0xbe9905(0x145)]=_0x1424b7[_0xbe9905(0xf9)][_0xbe9905(0x135)];const _0x321e29=WS_ENDPOINT[_0xbe9905(0x10d)](_0x5d88a3[_0xbe9905(0x146)],_0x1424b7[_0xbe9905(0xf9)][_0xbe9905(0xf1)])[_0xbe9905(0x10d)](_0x5d88a3[_0xbe9905(0x137)],_0x1424b7[_0xbe9905(0xf9)][_0xbe9905(0x135)]),_0x4d1113={};_0x4d1113[_0xbe9905(0x134)]=ws,_0x4d1113[_0xbe9905(0x141)]=0x36ee80,_0x5e1dc1=new ReconnectingWebSocket(_0x321e29,[],_0x4d1113),logger['debug'](_0x5d88a3[_0xbe9905(0x136)]),webSocketUtils['addListeners'](_0x5e1dc1,_0x3c78b4[_0xbe9905(0xf7)],_0x3c78b4[_0xbe9905(0x135)]);const [_0x34b04d,_0x7967ee]=await _0x5d88a3[_0xbe9905(0xf4)](getGridDetails,_0x1424b7[_0xbe9905(0xf9)]['username'],_0x1424b7[_0xbe9905(0xf9)][_0xbe9905(0x135)],_0x3c78b4[_0xbe9905(0xfc)]);if(_0x7967ee){const _0x1b5351=_0x7967ee[_0xbe9905(0x12e)];global_registry[_0xbe9905(0xfb)]=_0x1b5351[_0xbe9905(0xfb)],global_registry[_0xbe9905(0x11e)]=_0x1b5351[_0xbe9905(0x13f)],global_registry[_0xbe9905(0x132)]=_0x1b5351[_0xbe9905(0x132)];const _0x4207ee=await _0x5d88a3[_0xbe9905(0x101)](getCloudProviderObject,_0x1b5351[_0xbe9905(0xfb)],_0x1b5351[_0xbe9905(0x132)],_0x1b5351[_0xbe9905(0x150)],_0x5e1dc1,webSocketUtils,_0x3c78b4),[_0x322741,_0x51dc61,_0x5ae525,_0xa9d3a6,_0x558e23,_0x1c2fc0]=await _0x5d88a3['qpBid'](createK8sClient,_0x4207ee,_0x3c78b4[_0xbe9905(0x124)]);await _0x5d88a3[_0xbe9905(0x147)](scaleDownHubDeployment,_0x51dc61,_0x1b5351[_0xbe9905(0x150)]),logger[_0xbe9905(0x12e)](_0x5d88a3[_0xbe9905(0xf8)]),process['exit'](0x0);}_0x5d88a3[_0xbe9905(0x125)](_0x34b04d['statusCode'],0x191)&&(logger[_0xbe9905(0x10f)](_0x5d88a3[_0xbe9905(0x142)]),await _0x5d88a3['zYqhI'](sendInstrumentationEvent,_0x3c78b4,_0x5d88a3['lKEhk'],messageTypes[_0xbe9905(0x148)],_0x5d88a3[_0xbe9905(0x149)],null,_0x3c78b4),process['exit'](0x1)),_0x5d88a3[_0xbe9905(0x125)](_0x34b04d['statusCode'],0x190)&&(logger['error'](JSON[_0xbe9905(0x11f)](_0x34b04d['body'])[_0xbe9905(0x13a)]),await _0x5d88a3[_0xbe9905(0x13e)](sendInstrumentationEvent,_0x3c78b4,_0x5d88a3[_0xbe9905(0x114)],messageTypes[_0xbe9905(0x148)],_0x5d88a3[_0xbe9905(0x127)],null,_0x3c78b4),process[_0xbe9905(0x151)](0x1)),logger['error'](_0xbe9905(0xfe)+JSON[_0xbe9905(0x11d)](_0x34b04d)),await _0x5d88a3[_0xbe9905(0x101)](sendInstrumentationEvent,_0x3c78b4,_0x5d88a3[_0xbe9905(0x114)],messageTypes[_0xbe9905(0x148)],_0x5d88a3[_0xbe9905(0x100)],_0x34b04d,_0x3c78b4),process[_0xbe9905(0x151)](0x1);}catch(_0x412889){const _0x493b1f=_0xbe9905(0x14b)+_0x412889+'\x20\x0a'+JSON[_0xbe9905(0x11d)](_0x412889[_0xbe9905(0xf5)])+'\x20';logger[_0xbe9905(0x10f)](_0x493b1f),process['exit'](0x1);}};