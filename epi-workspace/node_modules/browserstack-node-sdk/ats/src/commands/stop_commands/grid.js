function a21_0x396a(){const _0x5e7aeb=['reconnecting-websocket','AWjVK','12234qULVei','../../utils/instrumentationUtils','info','Skip\x20insecure\x20cert\x20verification.','24gILHsU','371620OsFIGq','EhgmK','argv','../../cloudproviders/utils','Kgnvj','cloudProvider','username','xfXiW','stringify','replace','TZLmb','region','clusterName','Stop\x20a\x20running\x20Automation\x20grid.','command','EWoos','wEvgn','KuXwz','Stopping\x20grid\x20','name','../../utils/webSocketUtils','ERROR','gridId','server-error','skipTlsCertVerify','help','description','skip-tls-cert-verify','debug','../../config/logger','epilogue','LmNKl','UrVvn','../../utils/createk8sClient','1914108CsHADF','desc','addListeners','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','169748liSGJG','2963240wQSlGn','INFO','../../utils/utilityMethods','statusCode','unauthorised','readFileSync','ytBsV','stop','IBwJW','kECar','1594545GdgrKN','existsSync','WebSocket','type','default','Sabms','Grid\x20stoppped.','519477chcdhT','error','password','<PasswordPlaceholder>','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','UIowh','body','stop-grid-called','parse','XRPvM','../../config/constants','boolean','user','options','builder','exit','../../utils/gridComponents','init-not-called','vjEwH','Browserstack','<UsernamePlaceholder>','bstackUsername','bstackAccesskey','invalid-grid-id'];a21_0x396a=function(){return _0x5e7aeb;};return a21_0x396a();}const a21_0x2657c7=a21_0x4b51;(function(_0x4da59f,_0x1f8584){const _0x3ec70e=a21_0x4b51,_0x4d603c=_0x4da59f();while(!![]){try{const _0x42b892=-parseInt(_0x3ec70e(0x1ad))/0x1+parseInt(_0x3ec70e(0x186))/0x2*(parseInt(_0x3ec70e(0x182))/0x3)+parseInt(_0x3ec70e(0x187))/0x4+parseInt(_0x3ec70e(0x1b8))/0x5+parseInt(_0x3ec70e(0x1a9))/0x6+-parseInt(_0x3ec70e(0x168))/0x7+-parseInt(_0x3ec70e(0x1ae))/0x8;if(_0x42b892===_0x1f8584)break;else _0x4d603c['push'](_0x4d603c['shift']());}catch(_0x311e21){_0x4d603c['push'](_0x4d603c['shift']());}}}(a21_0x396a,0x2861c));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x2657c7(0x180)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x2657c7(0x172)),{logger}=require(a21_0x2657c7(0x1a4)),{getCredentialsPath,getGridDetails}=require(a21_0x2657c7(0x1b0)),{scaleDownHubDeployment}=require(a21_0x2657c7(0x178)),{sendInstrumentationEvent}=require(a21_0x2657c7(0x183)),webSocketUtils=require(a21_0x2657c7(0x19b)),{createK8sClient}=require(a21_0x2657c7(0x1a8)),{getCloudProviderObject}=require(a21_0x2657c7(0x18a));function a21_0x4b51(_0x473169,_0x1d8904){const _0x396ade=a21_0x396a();return a21_0x4b51=function(_0x4b51c6,_0x5de882){_0x4b51c6=_0x4b51c6-0x165;let _0x26e2d0=_0x396ade[_0x4b51c6];return _0x26e2d0;},a21_0x4b51(_0x473169,_0x1d8904);}exports[a21_0x2657c7(0x195)]='grid',exports[a21_0x2657c7(0x1aa)]=a21_0x2657c7(0x194),exports[a21_0x2657c7(0x176)]=function(_0x178869){const _0x5b35df=a21_0x2657c7,_0xe21107={};_0xe21107[_0x5b35df(0x1b6)]='Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.',_0xe21107[_0x5b35df(0x171)]='string',_0xe21107['nrRaI']=_0x5b35df(0x185),_0xe21107[_0x5b35df(0x198)]=_0x5b35df(0x173),_0xe21107[_0x5b35df(0x17a)]=_0x5b35df(0x1a0);const _0x1c2fdc=_0xe21107,_0x44df38={};_0x44df38['description']=_0x1c2fdc[_0x5b35df(0x1b6)],_0x44df38[_0x5b35df(0x1bb)]=_0x1c2fdc[_0x5b35df(0x171)];const _0x46d1b2={};_0x46d1b2[_0x5b35df(0x1a1)]=_0x1c2fdc['nrRaI'],_0x46d1b2[_0x5b35df(0x1bb)]=_0x1c2fdc[_0x5b35df(0x198)],_0x46d1b2[_0x5b35df(0x165)]=![];const _0x5ca0b7={};return _0x5ca0b7['grid-id']=_0x44df38,_0x5ca0b7[_0x5b35df(0x1a2)]=_0x46d1b2,_0x178869['usage'](HELP_HEADER_MESSAGE[_0x5b35df(0x1b5)])[_0x5b35df(0x1a5)](HELP_FOOTER_MESSAGE)[_0x5b35df(0x175)](_0x5ca0b7)[_0x5b35df(0x1a0)](_0x1c2fdc[_0x5b35df(0x17a)])[_0x5b35df(0x189)];},exports['handler']=async function(_0xa716ef){const _0x849cf9=a21_0x2657c7,_0x34bbd1={'oCDXC':_0x849cf9(0x1ac),'UIowh':function(_0x2bb99c){return _0x2bb99c();},'xfXiW':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','fWqTQ':function(_0x13706d,_0x230956,_0xa9661f,_0x7d6d3e,_0x5a2705,_0x2cb19f,_0x365005){return _0x13706d(_0x230956,_0xa9661f,_0x7d6d3e,_0x5a2705,_0x2cb19f,_0x365005);},'LmNKl':_0x849cf9(0x16f),'EhgmK':_0x849cf9(0x179),'KYlOs':function(_0x1c57f9,_0x150b5e,_0x2ca6c3,_0x58a7ea,_0x194857,_0x1a87ef,_0x2c486a){return _0x1c57f9(_0x150b5e,_0x2ca6c3,_0x58a7ea,_0x194857,_0x1a87ef,_0x2c486a);},'mCMme':_0x849cf9(0x17c),'Sabms':_0x849cf9(0x16b),'TZLmb':'Adding\x20Websocket\x20listeners','cYqAx':function(_0x509455,_0x2857c1,_0x37885b,_0x5900df){return _0x509455(_0x2857c1,_0x37885b,_0x5900df);},'ytBsV':function(_0x48a308,_0x3c27a5,_0x2c0d78){return _0x48a308(_0x3c27a5,_0x2c0d78);},'AWjVK':_0x849cf9(0x167),'kECar':function(_0x4e9d8c,_0x423806){return _0x4e9d8c===_0x423806;},'Kgnvj':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','UrVvn':function(_0x53ba58,_0x839c56,_0x49b2ca,_0x4aebb8,_0x3e0220,_0x2b5922,_0x45a0bd){return _0x53ba58(_0x839c56,_0x49b2ca,_0x4aebb8,_0x3e0220,_0x2b5922,_0x45a0bd);},'vrrEl':_0x849cf9(0x1b2),'wEvgn':function(_0x148f15,_0x5a564c,_0x1df639,_0x2d5cc4,_0x2f886e,_0x384d91,_0x3da6c1){return _0x148f15(_0x5a564c,_0x1df639,_0x2d5cc4,_0x2f886e,_0x384d91,_0x3da6c1);},'ydAEk':_0x849cf9(0x17f),'TYRJp':function(_0x4427ed,_0x1bcd1f,_0x57c5bb,_0x2675e4,_0x15f271,_0x5eb9a2,_0x1d1547){return _0x4427ed(_0x1bcd1f,_0x57c5bb,_0x2675e4,_0x15f271,_0x5eb9a2,_0x1d1547);},'EWoos':_0x849cf9(0x19e)};let _0x24a8cc;try{!_0xa716ef[_0x849cf9(0x19d)]&&(logger[_0x849cf9(0x169)](_0x34bbd1['oCDXC']),process['exit'](0x1));!fs[_0x849cf9(0x1b9)](_0x34bbd1[_0x849cf9(0x16d)](getCredentialsPath))&&(logger['error'](_0x34bbd1[_0x849cf9(0x18e)]),await _0x34bbd1['fWqTQ'](sendInstrumentationEvent,_0xa716ef,_0x34bbd1[_0x849cf9(0x1a6)],messageTypes[_0x849cf9(0x19c)],_0x34bbd1[_0x849cf9(0x188)],null,_0xa716ef),process['exit'](0x1));logger[_0x849cf9(0x184)](_0x849cf9(0x199)+_0xa716ef[_0x849cf9(0x19d)]),await _0x34bbd1['KYlOs'](sendInstrumentationEvent,_0xa716ef,_0x34bbd1[_0x849cf9(0x1a6)],messageTypes[_0x849cf9(0x1af)],null,null,_0xa716ef);const _0x45eab4=JSON[_0x849cf9(0x170)](fs[_0x849cf9(0x1b3)](_0x34bbd1[_0x849cf9(0x16d)](getCredentialsPath)));global_registry[_0x849cf9(0x17d)]=_0x45eab4[_0x849cf9(0x17b)][_0x849cf9(0x18d)],global_registry[_0x849cf9(0x17e)]=_0x45eab4[_0x849cf9(0x17b)][_0x849cf9(0x16a)];const _0x5f0909=WS_ENDPOINT[_0x849cf9(0x190)](_0x34bbd1['mCMme'],_0x45eab4['Browserstack'][_0x849cf9(0x18d)])[_0x849cf9(0x190)](_0x34bbd1[_0x849cf9(0x166)],_0x45eab4[_0x849cf9(0x17b)][_0x849cf9(0x16a)]),_0x2336af={};_0x2336af[_0x849cf9(0x1ba)]=ws,_0x2336af['connectionTimeout']=0x36ee80,_0x24a8cc=new ReconnectingWebSocket(_0x5f0909,[],_0x2336af),logger[_0x849cf9(0x1a3)](_0x34bbd1[_0x849cf9(0x191)]),webSocketUtils[_0x849cf9(0x1ab)](_0x24a8cc,_0xa716ef[_0x849cf9(0x174)],_0xa716ef['password']);const [_0x3aafbb,_0x3a4eec]=await _0x34bbd1['cYqAx'](getGridDetails,_0x45eab4['Browserstack'][_0x849cf9(0x18d)],_0x45eab4[_0x849cf9(0x17b)]['password'],_0xa716ef[_0x849cf9(0x19d)]);if(_0x3a4eec){const _0x4b33af=_0x3a4eec[_0x849cf9(0x184)];global_registry[_0x849cf9(0x18c)]=_0x4b33af[_0x849cf9(0x18c)],global_registry['clusterRegion']=_0x4b33af[_0x849cf9(0x192)],global_registry[_0x849cf9(0x193)]=_0x4b33af[_0x849cf9(0x193)];const _0x545636=await _0x34bbd1['KYlOs'](getCloudProviderObject,_0x4b33af[_0x849cf9(0x18c)],_0x4b33af[_0x849cf9(0x193)],_0x4b33af['name'],_0x24a8cc,webSocketUtils,_0xa716ef),[_0x3298b8,_0x5b76b2,_0x1e75ee,_0x347222,_0x2300a5,_0x3a908d]=await _0x34bbd1['ytBsV'](createK8sClient,_0x545636,_0xa716ef[_0x849cf9(0x19f)]);await _0x34bbd1[_0x849cf9(0x1b4)](scaleDownHubDeployment,_0x5b76b2,_0x4b33af[_0x849cf9(0x19a)]),logger['info'](_0x34bbd1[_0x849cf9(0x181)]),process[_0x849cf9(0x177)](0x0);}_0x34bbd1[_0x849cf9(0x1b7)](_0x3aafbb['statusCode'],0x191)&&(logger['error'](_0x34bbd1[_0x849cf9(0x18b)]),await _0x34bbd1[_0x849cf9(0x1a7)](sendInstrumentationEvent,_0xa716ef,_0x34bbd1[_0x849cf9(0x1a6)],messageTypes['ERROR'],_0x34bbd1['vrrEl'],null,_0xa716ef),process[_0x849cf9(0x177)](0x1)),_0x34bbd1[_0x849cf9(0x1b7)](_0x3aafbb[_0x849cf9(0x1b1)],0x190)&&(logger[_0x849cf9(0x169)](JSON['parse'](_0x3aafbb[_0x849cf9(0x16e)])['message']),await _0x34bbd1[_0x849cf9(0x197)](sendInstrumentationEvent,_0xa716ef,_0x34bbd1[_0x849cf9(0x1a6)],messageTypes['ERROR'],_0x34bbd1['ydAEk'],null,_0xa716ef),process['exit'](0x1)),logger[_0x849cf9(0x169)]('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON['stringify'](_0x3aafbb)),await _0x34bbd1['TYRJp'](sendInstrumentationEvent,_0xa716ef,_0x34bbd1['LmNKl'],messageTypes[_0x849cf9(0x19c)],_0x34bbd1[_0x849cf9(0x196)],_0x3aafbb,_0xa716ef),process[_0x849cf9(0x177)](0x1);}catch(_0x13b14e){const _0x34aa19=_0x849cf9(0x16c)+_0x13b14e+'\x20\x0a'+JSON[_0x849cf9(0x18f)](_0x13b14e['stack'])+'\x20';logger[_0x849cf9(0x169)](_0x34aa19),process[_0x849cf9(0x177)](0x1);}};