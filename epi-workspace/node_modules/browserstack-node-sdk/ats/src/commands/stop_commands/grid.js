function a21_0x9a8f(){const _0x548c85=['readFileSync','ffieR','string','username','xsbyU','name','pnPfO','bHMWz','gridId','<PasswordPlaceholder>','LHZPX','bstackUsername','jjebA','QWZiy','188124FFozHN','statusCode','stop','builder','help','reconnecting-websocket','GUYeG','OhACG','360528xVnDJq','15yJHNfP','VvvMn','skipTlsCertVerify','region','VbVlN','eVQYB','../../config/constants','info','cloudProvider','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','uPZCv','MFrcQ','skip-tls-cert-verify','WebSocket','password','aXEiF','unauthorised','<UsernamePlaceholder>','stop-grid-called','HnHNU','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','stack','type','Adding\x20Websocket\x20listeners','5lMBdKZ','options','usage','INFO','exit','../../utils/instrumentationUtils','user','2040798nPpXKG','boolean','1529416IuaMfT','addListeners','8620KCXtMV','error','Stop\x20a\x20running\x20Automation\x20grid.','grid','body','existsSync','nDTVq','CirEY','../../utils/utilityMethods','2799gqmqqp','xeGVy','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','init-not-called','186908mjnazB','replace','../../utils/webSocketUtils','Browserstack','desc','description','ERROR','stringify','../../utils/createk8sClient','DHVVs','ZsSyF','debug','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','../../utils/gridComponents','command','clusterRegion','epilogue','clusterName','389239lPhWuQ','../../cloudproviders/utils','message'];a21_0x9a8f=function(){return _0x548c85;};return a21_0x9a8f();}const a21_0x7fd1ae=a21_0x21d5;function a21_0x21d5(_0x5696d5,_0x299da7){const _0x9a8f04=a21_0x9a8f();return a21_0x21d5=function(_0x21d5f6,_0x42dd1a){_0x21d5f6=_0x21d5f6-0x141;let _0x31822b=_0x9a8f04[_0x21d5f6];return _0x31822b;},a21_0x21d5(_0x5696d5,_0x299da7);}(function(_0x5249ff,_0x3c0692){const _0x3b1398=a21_0x21d5,_0x176d7a=_0x5249ff();while(!![]){try{const _0x562954=-parseInt(_0x3b1398(0x172))/0x1+parseInt(_0x3b1398(0x160))/0x2+-parseInt(_0x3b1398(0x18c))/0x3*(parseInt(_0x3b1398(0x183))/0x4)+-parseInt(_0x3b1398(0x148))/0x5*(-parseInt(_0x3b1398(0x14f))/0x6)+-parseInt(_0x3b1398(0x18b))/0x7+parseInt(_0x3b1398(0x151))/0x8+-parseInt(_0x3b1398(0x15c))/0x9*(-parseInt(_0x3b1398(0x153))/0xa);if(_0x562954===_0x3c0692)break;else _0x176d7a['push'](_0x176d7a['shift']());}catch(_0xa1a0c8){_0x176d7a['push'](_0x176d7a['shift']());}}}(a21_0x9a8f,0x34f74));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x7fd1ae(0x188)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x7fd1ae(0x192)),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require(a21_0x7fd1ae(0x15b)),{scaleDownHubDeployment}=require(a21_0x7fd1ae(0x16d)),{sendInstrumentationEvent}=require(a21_0x7fd1ae(0x14d)),webSocketUtils=require(a21_0x7fd1ae(0x162)),{createK8sClient}=require(a21_0x7fd1ae(0x168)),{getCloudProviderObject}=require(a21_0x7fd1ae(0x173));exports[a21_0x7fd1ae(0x16e)]=a21_0x7fd1ae(0x156),exports[a21_0x7fd1ae(0x164)]=a21_0x7fd1ae(0x155),exports[a21_0x7fd1ae(0x186)]=function(_0x23dc89){const _0x2658e9=a21_0x7fd1ae,_0x1db28a={};_0x1db28a[_0x2658e9(0x18d)]='Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.',_0x1db28a['YMhVK']=_0x2658e9(0x177),_0x1db28a['VIWRC']='Skip\x20insecure\x20cert\x20verification.',_0x1db28a['ffieR']=_0x2658e9(0x150),_0x1db28a[_0x2658e9(0x196)]=_0x2658e9(0x187);const _0x1ffcc1=_0x1db28a,_0x187d2f={};_0x187d2f[_0x2658e9(0x165)]=_0x1ffcc1[_0x2658e9(0x18d)],_0x187d2f[_0x2658e9(0x146)]=_0x1ffcc1['YMhVK'];const _0x4756df={};_0x4756df[_0x2658e9(0x165)]=_0x1ffcc1['VIWRC'],_0x4756df[_0x2658e9(0x146)]=_0x1ffcc1[_0x2658e9(0x176)],_0x4756df['default']=![];const _0x11a27b={};return _0x11a27b['grid-id']=_0x187d2f,_0x11a27b[_0x2658e9(0x198)]=_0x4756df,_0x23dc89[_0x2658e9(0x14a)](HELP_HEADER_MESSAGE[_0x2658e9(0x185)])[_0x2658e9(0x170)](HELP_FOOTER_MESSAGE)[_0x2658e9(0x149)](_0x11a27b)['help'](_0x1ffcc1[_0x2658e9(0x196)])['argv'];},exports['handler']=async function(_0x153d91){const _0x1483d4=a21_0x7fd1ae,_0x5ecc29={'CirEY':_0x1483d4(0x195),'nDTVq':function(_0x50db64){return _0x50db64();},'jjebA':_0x1483d4(0x15e),'GUYeG':function(_0x3f350f,_0x4623bc,_0x1094f8,_0x31c587,_0x3183bc,_0x555961,_0x4805d3){return _0x3f350f(_0x4623bc,_0x1094f8,_0x31c587,_0x3183bc,_0x555961,_0x4805d3);},'xeGVy':_0x1483d4(0x142),'MFrcQ':_0x1483d4(0x15f),'bFxry':function(_0x1a2c45){return _0x1a2c45();},'HnHNU':_0x1483d4(0x141),'QWZiy':_0x1483d4(0x17e),'pnPfO':_0x1483d4(0x147),'eVQYB':function(_0x5800b7,_0x46d40e,_0x5e1698,_0x3694e2){return _0x5800b7(_0x46d40e,_0x5e1698,_0x3694e2);},'LHZPX':function(_0x8e2767,_0x4f1781,_0x5aeb38,_0x57dd16,_0x366132,_0x173153,_0x5d4c50){return _0x8e2767(_0x4f1781,_0x5aeb38,_0x57dd16,_0x366132,_0x173153,_0x5d4c50);},'DHVVs':function(_0x1c20e8,_0x1d6d9e,_0x32fa27){return _0x1c20e8(_0x1d6d9e,_0x32fa27);},'OhACG':function(_0x484d71,_0x917940,_0xb95e4f){return _0x484d71(_0x917940,_0xb95e4f);},'oCwPW':'Grid\x20stoppped.','xsbyU':function(_0x5509a0,_0x3b57d4){return _0x5509a0===_0x3b57d4;},'ZsSyF':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','aXEiF':function(_0x4e19e0,_0x41f504,_0x13bd9d,_0x25b12e,_0x40cc9b,_0xf1492f,_0x534ae8){return _0x4e19e0(_0x41f504,_0x13bd9d,_0x25b12e,_0x40cc9b,_0xf1492f,_0x534ae8);},'VbVlN':_0x1483d4(0x19c),'FVJeS':function(_0x23fc00,_0x37cc42,_0x4b610a,_0x4b9c15,_0x2d1218,_0x26fdc1,_0x545745){return _0x23fc00(_0x37cc42,_0x4b610a,_0x4b9c15,_0x2d1218,_0x26fdc1,_0x545745);},'jzKPt':'invalid-grid-id','AqCRE':function(_0x448ff1,_0x5d5e5f,_0xced1ff,_0x1483a0,_0x5432e2,_0xb78cb9,_0x351c95){return _0x448ff1(_0x5d5e5f,_0xced1ff,_0x1483a0,_0x5432e2,_0xb78cb9,_0x351c95);},'bHMWz':'server-error'};let _0x5835e6;try{!_0x153d91[_0x1483d4(0x17d)]&&(logger[_0x1483d4(0x154)](_0x5ecc29[_0x1483d4(0x15a)]),process['exit'](0x1));!fs[_0x1483d4(0x158)](_0x5ecc29[_0x1483d4(0x159)](getCredentialsPath))&&(logger[_0x1483d4(0x154)](_0x5ecc29[_0x1483d4(0x181)]),await _0x5ecc29[_0x1483d4(0x189)](sendInstrumentationEvent,_0x153d91,_0x5ecc29[_0x1483d4(0x15d)],messageTypes['ERROR'],_0x5ecc29[_0x1483d4(0x197)],null,_0x153d91),process[_0x1483d4(0x14c)](0x1));logger[_0x1483d4(0x193)]('Stopping\x20grid\x20'+_0x153d91[_0x1483d4(0x17d)]),await _0x5ecc29[_0x1483d4(0x189)](sendInstrumentationEvent,_0x153d91,_0x5ecc29[_0x1483d4(0x15d)],messageTypes[_0x1483d4(0x14b)],null,null,_0x153d91);const _0xd7e689=JSON['parse'](fs[_0x1483d4(0x175)](_0x5ecc29['bFxry'](getCredentialsPath)));global_registry[_0x1483d4(0x180)]=_0xd7e689[_0x1483d4(0x163)][_0x1483d4(0x178)],global_registry['bstackAccesskey']=_0xd7e689['Browserstack']['password'];const _0x5cdfac=WS_ENDPOINT[_0x1483d4(0x161)](_0x5ecc29[_0x1483d4(0x143)],_0xd7e689[_0x1483d4(0x163)][_0x1483d4(0x178)])[_0x1483d4(0x161)](_0x5ecc29[_0x1483d4(0x182)],_0xd7e689[_0x1483d4(0x163)][_0x1483d4(0x19a)]),_0x3a3a9a={};_0x3a3a9a[_0x1483d4(0x199)]=ws,_0x3a3a9a['connectionTimeout']=0x36ee80,_0x5835e6=new ReconnectingWebSocket(_0x5cdfac,[],_0x3a3a9a),logger[_0x1483d4(0x16b)](_0x5ecc29[_0x1483d4(0x17b)]),webSocketUtils[_0x1483d4(0x152)](_0x5835e6,_0x153d91[_0x1483d4(0x14e)],_0x153d91[_0x1483d4(0x19a)]);const [_0x45ab8c,_0x1df046]=await _0x5ecc29[_0x1483d4(0x191)](getGridDetails,_0xd7e689[_0x1483d4(0x163)][_0x1483d4(0x178)],_0xd7e689['Browserstack'][_0x1483d4(0x19a)],_0x153d91[_0x1483d4(0x17d)]);if(_0x1df046){const _0x41e317=_0x1df046['info'];global_registry[_0x1483d4(0x194)]=_0x41e317[_0x1483d4(0x194)],global_registry[_0x1483d4(0x16f)]=_0x41e317[_0x1483d4(0x18f)],global_registry['clusterName']=_0x41e317[_0x1483d4(0x171)];const _0x188d48=await _0x5ecc29[_0x1483d4(0x17f)](getCloudProviderObject,_0x41e317[_0x1483d4(0x194)],_0x41e317[_0x1483d4(0x171)],_0x41e317[_0x1483d4(0x17a)],_0x5835e6,webSocketUtils,_0x153d91),[_0x3b00d8,_0x38dc71,_0x452c19,_0x4cd361,_0x49879c,_0x18d89a]=await _0x5ecc29[_0x1483d4(0x169)](createK8sClient,_0x188d48,_0x153d91[_0x1483d4(0x18e)]);await _0x5ecc29[_0x1483d4(0x18a)](scaleDownHubDeployment,_0x38dc71,_0x41e317[_0x1483d4(0x17a)]),logger['info'](_0x5ecc29['oCwPW']),process[_0x1483d4(0x14c)](0x0);}_0x5ecc29[_0x1483d4(0x179)](_0x45ab8c[_0x1483d4(0x184)],0x191)&&(logger[_0x1483d4(0x154)](_0x5ecc29[_0x1483d4(0x16a)]),await _0x5ecc29[_0x1483d4(0x19b)](sendInstrumentationEvent,_0x153d91,_0x5ecc29['xeGVy'],messageTypes[_0x1483d4(0x166)],_0x5ecc29[_0x1483d4(0x190)],null,_0x153d91),process[_0x1483d4(0x14c)](0x1)),_0x5ecc29[_0x1483d4(0x179)](_0x45ab8c[_0x1483d4(0x184)],0x190)&&(logger[_0x1483d4(0x154)](JSON['parse'](_0x45ab8c[_0x1483d4(0x157)])[_0x1483d4(0x174)]),await _0x5ecc29['FVJeS'](sendInstrumentationEvent,_0x153d91,_0x5ecc29[_0x1483d4(0x15d)],messageTypes[_0x1483d4(0x166)],_0x5ecc29['jzKPt'],null,_0x153d91),process[_0x1483d4(0x14c)](0x1)),logger[_0x1483d4(0x154)](_0x1483d4(0x16c)+JSON[_0x1483d4(0x167)](_0x45ab8c)),await _0x5ecc29['AqCRE'](sendInstrumentationEvent,_0x153d91,_0x5ecc29[_0x1483d4(0x15d)],messageTypes[_0x1483d4(0x166)],_0x5ecc29[_0x1483d4(0x17c)],_0x45ab8c,_0x153d91),process[_0x1483d4(0x14c)](0x1);}catch(_0x5622f4){const _0x496c9b=_0x1483d4(0x144)+_0x5622f4+'\x20\x0a'+JSON[_0x1483d4(0x167)](_0x5622f4[_0x1483d4(0x145)])+'\x20';logger[_0x1483d4(0x154)](_0x496c9b),process[_0x1483d4(0x14c)](0x1);}};