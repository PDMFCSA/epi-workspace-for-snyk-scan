const a21_0x376d50=a21_0xe9ed;(function(_0x20c93e,_0x20c973){const _0x13c6fc=a21_0xe9ed,_0x4cd81b=_0x20c93e();while(!![]){try{const _0x41916b=-parseInt(_0x13c6fc(0x17f))/0x1*(parseInt(_0x13c6fc(0x1aa))/0x2)+-parseInt(_0x13c6fc(0x1a9))/0x3*(parseInt(_0x13c6fc(0x186))/0x4)+parseInt(_0x13c6fc(0x16f))/0x5+parseInt(_0x13c6fc(0x16d))/0x6*(-parseInt(_0x13c6fc(0x19a))/0x7)+-parseInt(_0x13c6fc(0x165))/0x8+parseInt(_0x13c6fc(0x18a))/0x9+-parseInt(_0x13c6fc(0x176))/0xa*(-parseInt(_0x13c6fc(0x183))/0xb);if(_0x41916b===_0x20c973)break;else _0x4cd81b['push'](_0x4cd81b['shift']());}catch(_0x450624){_0x4cd81b['push'](_0x4cd81b['shift']());}}}(a21_0x9c5a,0xcdb92));function a21_0xe9ed(_0xb54ed0,_0x3be27a){const _0x9c5a21=a21_0x9c5a();return a21_0xe9ed=function(_0xe9ed1a,_0x4bd806){_0xe9ed1a=_0xe9ed1a-0x15f;let _0x17f911=_0x9c5a21[_0xe9ed1a];return _0x17f911;},a21_0xe9ed(_0xb54ed0,_0x3be27a);}function a21_0x9c5a(){const _0x5aff9f=['CpXQn','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','builder','epilogue','description','JcpuR','../../config/logger','gridId','6433YPSBTf','invalid-grid-id','qjaiD','clusterRegion','15543VjlyAL','stop','kdags','4zoYmdX','cloudProvider','clusterName','message','11304747OHqNJf','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','Stop\x20a\x20running\x20Automation\x20grid.','statusCode','exit','IhHMk','jIabb','existsSync','Browserstack','body','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','eqwuG','SxqJR','stringify','WebSocket','ebUsG','245zYekXo','Skip\x20insecure\x20cert\x20verification.','options','stop-grid-called','addListeners','argv','../../utils/createk8sClient','PhiHw','../../cloudproviders/utils','EopAt','parse','password','bstackAccesskey','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','info','1709457VjOJof','8Ksinuz','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','server-error','tInpK','type','ERROR','help','stack','unauthorised','../../utils/instrumentationUtils','replace','../../utils/utilityMethods','LopFu','qHpVN','handler','name','FSZla','desc','<PasswordPlaceholder>','command','cilMw','usage','uNWAR','readFileSync','VzZiq','error','Tmyyc','6116272LTdoDx','Stopping\x20grid\x20','../../config/constants','ETMBA','debug','boolean','Adding\x20Websocket\x20listeners','grid','25278rDSuCp','bstackUsername','758140KCMaiV','HKBev','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','region','skipTlsCertVerify','../../utils/webSocketUtils','username','6670OdnGkH'];a21_0x9c5a=function(){return _0x5aff9f;};return a21_0x9c5a();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x376d50(0x167)),{logger}=require(a21_0x376d50(0x17d)),{getCredentialsPath,getGridDetails}=require(a21_0x376d50(0x1b5)),{scaleDownHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require(a21_0x376d50(0x1b3)),webSocketUtils=require(a21_0x376d50(0x174)),{createK8sClient}=require(a21_0x376d50(0x1a0)),{getCloudProviderObject}=require(a21_0x376d50(0x1a2));exports[a21_0x376d50(0x1bd)]=a21_0x376d50(0x16c),exports[a21_0x376d50(0x1bb)]=a21_0x376d50(0x18c),exports[a21_0x376d50(0x179)]=function(_0x444bc6){const _0x3b74e8=a21_0x376d50,_0x6d94be={};_0x6d94be[_0x3b74e8(0x196)]=_0x3b74e8(0x178),_0x6d94be[_0x3b74e8(0x1be)]='string',_0x6d94be['qjaiD']=_0x3b74e8(0x19b),_0x6d94be[_0x3b74e8(0x1ba)]=_0x3b74e8(0x16a),_0x6d94be[_0x3b74e8(0x164)]=_0x3b74e8(0x1b0);const _0x44990a=_0x6d94be,_0x5cce2c={};_0x5cce2c[_0x3b74e8(0x17b)]=_0x44990a['SxqJR'],_0x5cce2c[_0x3b74e8(0x1ae)]=_0x44990a['cilMw'];const _0x52893f={};_0x52893f[_0x3b74e8(0x17b)]=_0x44990a[_0x3b74e8(0x181)],_0x52893f[_0x3b74e8(0x1ae)]=_0x44990a['FSZla'],_0x52893f['default']=![];const _0x50b616={};return _0x50b616['grid-id']=_0x5cce2c,_0x50b616['skip-tls-cert-verify']=_0x52893f,_0x444bc6[_0x3b74e8(0x15f)](HELP_HEADER_MESSAGE[_0x3b74e8(0x184)])[_0x3b74e8(0x17a)](HELP_FOOTER_MESSAGE)[_0x3b74e8(0x19c)](_0x50b616)[_0x3b74e8(0x1b0)](_0x44990a[_0x3b74e8(0x164)])[_0x3b74e8(0x19f)];},exports[a21_0x376d50(0x1b8)]=async function(_0x4f433b){const _0x355ed3=a21_0x376d50,_0xcb67ff={'uNWAR':_0x355ed3(0x1ab),'HKBev':function(_0x41a1a2){return _0x41a1a2();},'VzZiq':_0x355ed3(0x194),'qHpVN':function(_0x13fe61,_0x24e6a0,_0x546198,_0xd90909,_0x269a0d,_0x58c0ec,_0x19d90d){return _0x13fe61(_0x24e6a0,_0x546198,_0xd90909,_0x269a0d,_0x58c0ec,_0x19d90d);},'eqwuG':_0x355ed3(0x19d),'ebUsG':'init-not-called','JcpuR':'<UsernamePlaceholder>','wSFLD':_0x355ed3(0x1bc),'LopFu':_0x355ed3(0x16b),'CpXQn':function(_0x54fff1,_0x3f3a00,_0x40197a,_0x52f75e){return _0x54fff1(_0x3f3a00,_0x40197a,_0x52f75e);},'tInpK':function(_0x51f586,_0x23f9f9,_0x18e9f7){return _0x51f586(_0x23f9f9,_0x18e9f7);},'QHGhM':function(_0x586b20,_0x5cc940,_0x2c851b){return _0x586b20(_0x5cc940,_0x2c851b);},'IhHMk':'Grid\x20stoppped.','jIabb':function(_0x56fa3e,_0x441e4a){return _0x56fa3e===_0x441e4a;},'IWhGx':_0x355ed3(0x171),'kdags':_0x355ed3(0x1b2),'PhiHw':_0x355ed3(0x180),'EopAt':function(_0x390dde,_0x57b90e,_0x441bb9,_0x214cc4,_0x1ff8d3,_0x12c3ab,_0x13c3d6){return _0x390dde(_0x57b90e,_0x441bb9,_0x214cc4,_0x1ff8d3,_0x12c3ab,_0x13c3d6);},'ETMBA':_0x355ed3(0x1ac)};let _0x4b4caf;try{!_0x4f433b[_0x355ed3(0x17e)]&&(logger[_0x355ed3(0x163)](_0xcb67ff[_0x355ed3(0x160)]),process['exit'](0x1));!fs[_0x355ed3(0x191)](_0xcb67ff[_0x355ed3(0x170)](getCredentialsPath))&&(logger[_0x355ed3(0x163)](_0xcb67ff[_0x355ed3(0x162)]),await _0xcb67ff[_0x355ed3(0x1b7)](sendInstrumentationEvent,_0x4f433b,_0xcb67ff[_0x355ed3(0x195)],messageTypes['ERROR'],_0xcb67ff[_0x355ed3(0x199)],null,_0x4f433b),process[_0x355ed3(0x18e)](0x1));logger[_0x355ed3(0x1a8)](_0x355ed3(0x166)+_0x4f433b[_0x355ed3(0x17e)]),await _0xcb67ff[_0x355ed3(0x1b7)](sendInstrumentationEvent,_0x4f433b,_0xcb67ff['eqwuG'],messageTypes['INFO'],null,null,_0x4f433b);const _0x232229=JSON[_0x355ed3(0x1a4)](fs[_0x355ed3(0x161)](_0xcb67ff[_0x355ed3(0x170)](getCredentialsPath)));global_registry[_0x355ed3(0x16e)]=_0x232229['Browserstack'][_0x355ed3(0x175)],global_registry[_0x355ed3(0x1a6)]=_0x232229[_0x355ed3(0x192)][_0x355ed3(0x1a5)];const _0x15e5c3=WS_ENDPOINT['replace'](_0xcb67ff[_0x355ed3(0x17c)],_0x232229[_0x355ed3(0x192)][_0x355ed3(0x175)])[_0x355ed3(0x1b4)](_0xcb67ff['wSFLD'],_0x232229[_0x355ed3(0x192)]['password']),_0x43428a={};_0x43428a[_0x355ed3(0x198)]=ws,_0x43428a['connectionTimeout']=0x36ee80,_0x4b4caf=new ReconnectingWebSocket(_0x15e5c3,[],_0x43428a),logger[_0x355ed3(0x169)](_0xcb67ff[_0x355ed3(0x1b6)]),webSocketUtils[_0x355ed3(0x19e)](_0x4b4caf,_0x4f433b['user'],_0x4f433b[_0x355ed3(0x1a5)]);const [_0x7b109e,_0x322df6]=await _0xcb67ff[_0x355ed3(0x177)](getGridDetails,_0x232229['Browserstack'][_0x355ed3(0x175)],_0x232229[_0x355ed3(0x192)][_0x355ed3(0x1a5)],_0x4f433b['gridId']);if(_0x322df6){const _0x31d6f0=_0x322df6[_0x355ed3(0x1a8)];global_registry[_0x355ed3(0x187)]=_0x31d6f0[_0x355ed3(0x187)],global_registry[_0x355ed3(0x182)]=_0x31d6f0[_0x355ed3(0x172)],global_registry[_0x355ed3(0x188)]=_0x31d6f0[_0x355ed3(0x188)];const _0x537fa9=await _0xcb67ff[_0x355ed3(0x1b7)](getCloudProviderObject,_0x31d6f0[_0x355ed3(0x187)],_0x31d6f0[_0x355ed3(0x188)],_0x31d6f0['name'],_0x4b4caf,webSocketUtils,_0x4f433b),[_0x525d37,_0x557290,_0x31efbe,_0x36351d,_0x59a8b8,_0x25c0a8]=await _0xcb67ff[_0x355ed3(0x1ad)](createK8sClient,_0x537fa9,_0x4f433b[_0x355ed3(0x173)]);await _0xcb67ff['QHGhM'](scaleDownHubDeployment,_0x557290,_0x31d6f0[_0x355ed3(0x1b9)]),logger[_0x355ed3(0x1a8)](_0xcb67ff[_0x355ed3(0x18f)]),process[_0x355ed3(0x18e)](0x0);}_0xcb67ff[_0x355ed3(0x190)](_0x7b109e[_0x355ed3(0x18d)],0x191)&&(logger[_0x355ed3(0x163)](_0xcb67ff['IWhGx']),await _0xcb67ff[_0x355ed3(0x1b7)](sendInstrumentationEvent,_0x4f433b,_0xcb67ff[_0x355ed3(0x195)],messageTypes[_0x355ed3(0x1af)],_0xcb67ff[_0x355ed3(0x185)],null,_0x4f433b),process['exit'](0x1)),_0xcb67ff['jIabb'](_0x7b109e['statusCode'],0x190)&&(logger[_0x355ed3(0x163)](JSON['parse'](_0x7b109e[_0x355ed3(0x193)])[_0x355ed3(0x189)]),await _0xcb67ff[_0x355ed3(0x1b7)](sendInstrumentationEvent,_0x4f433b,_0xcb67ff['eqwuG'],messageTypes[_0x355ed3(0x1af)],_0xcb67ff[_0x355ed3(0x1a1)],null,_0x4f433b),process[_0x355ed3(0x18e)](0x1)),logger[_0x355ed3(0x163)](_0x355ed3(0x18b)+JSON[_0x355ed3(0x197)](_0x7b109e)),await _0xcb67ff[_0x355ed3(0x1a3)](sendInstrumentationEvent,_0x4f433b,_0xcb67ff[_0x355ed3(0x195)],messageTypes[_0x355ed3(0x1af)],_0xcb67ff[_0x355ed3(0x168)],_0x7b109e,_0x4f433b),process[_0x355ed3(0x18e)](0x1);}catch(_0x43ec67){const _0x31b289=_0x355ed3(0x1a7)+_0x43ec67+'\x20\x0a'+JSON[_0x355ed3(0x197)](_0x43ec67[_0x355ed3(0x1b1)])+'\x20';logger['error'](_0x31b289),process[_0x355ed3(0x18e)](0x1);}};