function a21_0x1bb4(_0x1c5f13,_0x1ae782){const _0x85f553=a21_0x85f5();return a21_0x1bb4=function(_0x1bb43b,_0x3e4e79){_0x1bb43b=_0x1bb43b-0x1b4;let _0x408721=_0x85f553[_0x1bb43b];return _0x408721;},a21_0x1bb4(_0x1c5f13,_0x1ae782);}const a21_0x3f1994=a21_0x1bb4;(function(_0x146026,_0x47c27e){const _0x589e0c=a21_0x1bb4,_0x1743c2=_0x146026();while(!![]){try{const _0x5d87d5=-parseInt(_0x589e0c(0x1d4))/0x1+parseInt(_0x589e0c(0x203))/0x2*(parseInt(_0x589e0c(0x1fb))/0x3)+-parseInt(_0x589e0c(0x1c8))/0x4*(-parseInt(_0x589e0c(0x1ba))/0x5)+-parseInt(_0x589e0c(0x1ce))/0x6*(parseInt(_0x589e0c(0x1f7))/0x7)+-parseInt(_0x589e0c(0x1f9))/0x8+parseInt(_0x589e0c(0x1ee))/0x9*(-parseInt(_0x589e0c(0x200))/0xa)+parseInt(_0x589e0c(0x1db))/0xb;if(_0x5d87d5===_0x47c27e)break;else _0x1743c2['push'](_0x1743c2['shift']());}catch(_0x4e7fac){_0x1743c2['push'](_0x1743c2['shift']());}}}(a21_0x85f5,0xe4878));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x3f1994(0x1e1)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x3f1994(0x20a)),{logger}=require(a21_0x3f1994(0x1ef)),{getCredentialsPath,getGridDetails}=require(a21_0x3f1994(0x20d)),{scaleDownHubDeployment}=require(a21_0x3f1994(0x1d8)),{sendInstrumentationEvent}=require(a21_0x3f1994(0x1e0)),webSocketUtils=require(a21_0x3f1994(0x204)),{createK8sClient}=require(a21_0x3f1994(0x1c3)),{getCloudProviderObject}=require(a21_0x3f1994(0x1e7));exports[a21_0x3f1994(0x1df)]=a21_0x3f1994(0x1d0),exports['desc']=a21_0x3f1994(0x1be),exports[a21_0x3f1994(0x1dc)]=function(_0x47601c){const _0x294bc0=a21_0x3f1994,_0x146481={};_0x146481[_0x294bc0(0x1f4)]='Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.',_0x146481[_0x294bc0(0x1f3)]=_0x294bc0(0x1e8),_0x146481[_0x294bc0(0x1fa)]=_0x294bc0(0x1c5),_0x146481[_0x294bc0(0x20c)]=_0x294bc0(0x201),_0x146481[_0x294bc0(0x1b5)]=_0x294bc0(0x1de);const _0x1261c0=_0x146481,_0x1f2896={};_0x1f2896[_0x294bc0(0x1e6)]=_0x1261c0[_0x294bc0(0x1f4)],_0x1f2896['type']=_0x1261c0['CQaXg'];const _0x2668f0={};_0x2668f0[_0x294bc0(0x1e6)]=_0x1261c0[_0x294bc0(0x1fa)],_0x2668f0['type']=_0x1261c0[_0x294bc0(0x20c)],_0x2668f0[_0x294bc0(0x1e4)]=![];const _0x155bc1={};return _0x155bc1[_0x294bc0(0x1bf)]=_0x1f2896,_0x155bc1[_0x294bc0(0x1d6)]=_0x2668f0,_0x47601c[_0x294bc0(0x1b6)](HELP_HEADER_MESSAGE['stop'])['epilogue'](HELP_FOOTER_MESSAGE)[_0x294bc0(0x1f2)](_0x155bc1)[_0x294bc0(0x1de)](_0x1261c0[_0x294bc0(0x1b5)])[_0x294bc0(0x1cb)];},exports['handler']=async function(_0x27696e){const _0x395b5b=a21_0x3f1994,_0x3ebb26={'yxsjb':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','fbawZ':function(_0x12150e){return _0x12150e();},'GnqNQ':_0x395b5b(0x1f8),'FPSRn':function(_0x35c082,_0x37fbfd,_0x312426,_0x201249,_0x2ff577,_0xd2043a,_0x147f8f){return _0x35c082(_0x37fbfd,_0x312426,_0x201249,_0x2ff577,_0xd2043a,_0x147f8f);},'gBtNC':_0x395b5b(0x20b),'NalzT':_0x395b5b(0x1b9),'ZXdzj':function(_0x50d300){return _0x50d300();},'tMXkL':_0x395b5b(0x1cf),'JmlQC':_0x395b5b(0x207),'ruoej':_0x395b5b(0x1d3),'VRtOl':function(_0x11803a,_0xb1bc5c,_0x525c76,_0xa6dd32){return _0x11803a(_0xb1bc5c,_0x525c76,_0xa6dd32);},'jPYyH':function(_0x521714,_0x4907f7,_0x50c2a3,_0x315407,_0x4153e1,_0x4b4f4f,_0xf1b541){return _0x521714(_0x4907f7,_0x50c2a3,_0x315407,_0x4153e1,_0x4b4f4f,_0xf1b541);},'zZWLE':function(_0x597e54,_0x35c5ac,_0x4427d9){return _0x597e54(_0x35c5ac,_0x4427d9);},'Uvkbo':'Grid\x20stoppped.','jJyhB':function(_0x5ad3f1,_0x18c04a){return _0x5ad3f1===_0x18c04a;},'tKkAz':_0x395b5b(0x1d7),'ZQRAe':_0x395b5b(0x1b7),'EbaaN':function(_0x2abb0c,_0x21123e){return _0x2abb0c===_0x21123e;},'rzdYM':function(_0x2d1701,_0x25fff1,_0x1011d0,_0x402827,_0x213927,_0x348f4d,_0x410d03){return _0x2d1701(_0x25fff1,_0x1011d0,_0x402827,_0x213927,_0x348f4d,_0x410d03);},'CYqLi':_0x395b5b(0x1bb),'mEMaw':'server-error'};let _0x2d6442;try{!_0x27696e[_0x395b5b(0x206)]&&(logger[_0x395b5b(0x20e)](_0x3ebb26[_0x395b5b(0x1ca)]),process['exit'](0x1));!fs['existsSync'](_0x3ebb26[_0x395b5b(0x1c0)](getCredentialsPath))&&(logger['error'](_0x3ebb26['GnqNQ']),await _0x3ebb26['FPSRn'](sendInstrumentationEvent,_0x27696e,_0x3ebb26['gBtNC'],messageTypes['ERROR'],_0x3ebb26[_0x395b5b(0x1ea)],null,_0x27696e),process['exit'](0x1));logger['info'](_0x395b5b(0x1d9)+_0x27696e[_0x395b5b(0x206)]),await _0x3ebb26[_0x395b5b(0x1c1)](sendInstrumentationEvent,_0x27696e,_0x3ebb26[_0x395b5b(0x1fc)],messageTypes[_0x395b5b(0x1d2)],null,null,_0x27696e);const _0x29f3bc=JSON['parse'](fs['readFileSync'](_0x3ebb26[_0x395b5b(0x1c9)](getCredentialsPath)));global_registry[_0x395b5b(0x209)]=_0x29f3bc['Browserstack'][_0x395b5b(0x1e9)],global_registry[_0x395b5b(0x1e5)]=_0x29f3bc['Browserstack'][_0x395b5b(0x1c2)];const _0x3a105f=WS_ENDPOINT[_0x395b5b(0x1c4)](_0x3ebb26[_0x395b5b(0x1e2)],_0x29f3bc[_0x395b5b(0x1cc)][_0x395b5b(0x1e9)])['replace'](_0x3ebb26[_0x395b5b(0x1c7)],_0x29f3bc[_0x395b5b(0x1cc)]['password']),_0x453cb5={};_0x453cb5['WebSocket']=ws,_0x453cb5[_0x395b5b(0x1ff)]=0x36ee80,_0x2d6442=new ReconnectingWebSocket(_0x3a105f,[],_0x453cb5),logger[_0x395b5b(0x205)](_0x3ebb26['ruoej']),webSocketUtils['addListeners'](_0x2d6442,_0x27696e[_0x395b5b(0x1cd)],_0x27696e[_0x395b5b(0x1c2)]);const [_0x4c8eb7,_0x54fbd0]=await _0x3ebb26[_0x395b5b(0x1f1)](getGridDetails,_0x29f3bc['Browserstack']['username'],_0x29f3bc[_0x395b5b(0x1cc)][_0x395b5b(0x1c2)],_0x27696e['gridId']);if(_0x54fbd0){const _0x208ebe=_0x54fbd0['info'];global_registry[_0x395b5b(0x1da)]=_0x208ebe['cloudProvider'],global_registry[_0x395b5b(0x1b4)]=_0x208ebe['region'],global_registry['clusterName']=_0x208ebe[_0x395b5b(0x1c6)];const _0x2a9bf3=await _0x3ebb26[_0x395b5b(0x1dd)](getCloudProviderObject,_0x208ebe[_0x395b5b(0x1da)],_0x208ebe[_0x395b5b(0x1c6)],_0x208ebe[_0x395b5b(0x1ec)],_0x2d6442,webSocketUtils,_0x27696e),[_0x58754e,_0x53ab76,_0x28cf60,_0x2ec91b,_0x2090cb,_0x4f28d7]=await _0x3ebb26[_0x395b5b(0x1b8)](createK8sClient,_0x2a9bf3,_0x27696e['skipTlsCertVerify']);await _0x3ebb26['zZWLE'](scaleDownHubDeployment,_0x53ab76,_0x208ebe['name']),logger['info'](_0x3ebb26[_0x395b5b(0x1f0)]),process[_0x395b5b(0x1f5)](0x0);}_0x3ebb26['jJyhB'](_0x4c8eb7[_0x395b5b(0x202)],0x191)&&(logger['error'](_0x3ebb26[_0x395b5b(0x1eb)]),await _0x3ebb26[_0x395b5b(0x1c1)](sendInstrumentationEvent,_0x27696e,_0x3ebb26[_0x395b5b(0x1fc)],messageTypes[_0x395b5b(0x1bd)],_0x3ebb26['ZQRAe'],null,_0x27696e),process[_0x395b5b(0x1f5)](0x1)),_0x3ebb26[_0x395b5b(0x1f6)](_0x4c8eb7['statusCode'],0x190)&&(logger['error'](JSON[_0x395b5b(0x1ed)](_0x4c8eb7['body'])[_0x395b5b(0x1fd)]),await _0x3ebb26[_0x395b5b(0x1bc)](sendInstrumentationEvent,_0x27696e,_0x3ebb26[_0x395b5b(0x1fc)],messageTypes['ERROR'],_0x3ebb26[_0x395b5b(0x1e3)],null,_0x27696e),process[_0x395b5b(0x1f5)](0x1)),logger[_0x395b5b(0x20e)](_0x395b5b(0x1d5)+JSON[_0x395b5b(0x208)](_0x4c8eb7)),await _0x3ebb26[_0x395b5b(0x1dd)](sendInstrumentationEvent,_0x27696e,_0x3ebb26['gBtNC'],messageTypes[_0x395b5b(0x1bd)],_0x3ebb26['mEMaw'],_0x4c8eb7,_0x27696e),process[_0x395b5b(0x1f5)](0x1);}catch(_0x1bff3b){const _0x5b9a71=_0x395b5b(0x1fe)+_0x1bff3b+'\x20\x0a'+JSON[_0x395b5b(0x208)](_0x1bff3b[_0x395b5b(0x1d1)])+'\x20';logger['error'](_0x5b9a71),process[_0x395b5b(0x1f5)](0x1);}};function a21_0x85f5(){const _0x490ef8=['replace','Skip\x20insecure\x20cert\x20verification.','clusterName','JmlQC','452fMwpOb','ZXdzj','yxsjb','argv','Browserstack','user','284286IuJnxF','<UsernamePlaceholder>','grid','stack','INFO','Adding\x20Websocket\x20listeners','1112546LolmWs','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','skip-tls-cert-verify','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','../../utils/gridComponents','Stopping\x20grid\x20','cloudProvider','27774637tBTTfl','builder','jPYyH','help','command','../../utils/instrumentationUtils','reconnecting-websocket','tMXkL','CYqLi','default','bstackAccesskey','description','../../cloudproviders/utils','string','username','NalzT','tKkAz','name','parse','18XfhIsV','../../config/logger','Uvkbo','VRtOl','options','CQaXg','ndCEN','exit','EbaaN','105GffYhy','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','3051048annjnb','qyjod','2964IiINGq','gBtNC','message','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','connectionTimeout','6838190AzLtlq','boolean','statusCode','1902QSuZZH','../../utils/webSocketUtils','debug','gridId','<PasswordPlaceholder>','stringify','bstackUsername','../../config/constants','stop-grid-called','yeEIk','../../utils/utilityMethods','error','clusterRegion','VdPVr','usage','unauthorised','zZWLE','init-not-called','46185LdIyDi','invalid-grid-id','rzdYM','ERROR','Stop\x20a\x20running\x20Automation\x20grid.','grid-id','fbawZ','FPSRn','password','../../utils/createk8sClient'];a21_0x85f5=function(){return _0x490ef8;};return a21_0x85f5();}