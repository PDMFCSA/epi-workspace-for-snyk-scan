function a21_0x3ab4(_0x22158a,_0x1c9cbc){const _0x109be8=a21_0x109b();return a21_0x3ab4=function(_0x3ab424,_0x4a73f6){_0x3ab424=_0x3ab424-0x110;let _0x29169b=_0x109be8[_0x3ab424];return _0x29169b;},a21_0x3ab4(_0x22158a,_0x1c9cbc);}const a21_0x22fd2c=a21_0x3ab4;function a21_0x109b(){const _0x5e8c17=['XuHKr','oEOGt','handler','grid','6212028hDLBrO','XIsBl','argv','ZGlia','gridId','iHDAW','Stopping\x20grid\x20','../../utils/createk8sClient','init-not-called','statusCode','OTQuB','dPrVy','CeFIt','skip-tls-cert-verify','stack','HbWZU','clusterRegion','GYbTB','existsSync','Skip\x20insecure\x20cert\x20verification.','../../cloudproviders/utils','body','WiZMD','invalid-grid-id','<PasswordPlaceholder>','message','stringify','stop','replace','mmFST','JpkOn','unauthorised','stop-grid-called','../../utils/gridComponents','2278062nPErCQ','command','EuROc','exit','elGlc','readFileSync','default','parse','grid-id','<UsernamePlaceholder>','string','HMUyq','description','Browserstack','aqLTu','Adding\x20Websocket\x20listeners','username','user','INFO','error','2770977ytYVXT','../../utils/utilityMethods','mmfGm','15482450PVcZfc','cloudProvider','rrrpt','zZJHt','clusterName','debug','epilogue','1KDiaqk','addListeners','../../config/constants','12icTNhS','desc','ERROR','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','name','options','reconnecting-websocket','2264DtRvoW','skipTlsCertVerify','connectionTimeout','1968775lIYyaX','info','type','8029wLlIVE','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','help','../../config/logger','613602WEzgeR','password'];a21_0x109b=function(){return _0x5e8c17;};return a21_0x109b();}(function(_0x38ef6e,_0x3a1ca4){const _0x1ff9e7=a21_0x3ab4,_0x247ef4=_0x38ef6e();while(!![]){try{const _0x2d25b4=-parseInt(_0x1ff9e7(0x153))/0x1*(-parseInt(_0x1ff9e7(0x135))/0x2)+-parseInt(_0x1ff9e7(0x149))/0x3+parseInt(_0x1ff9e7(0x156))/0x4*(parseInt(_0x1ff9e7(0x160))/0x5)+parseInt(_0x1ff9e7(0x113))/0x6+-parseInt(_0x1ff9e7(0x163))/0x7*(parseInt(_0x1ff9e7(0x15d))/0x8)+parseInt(_0x1ff9e7(0x167))/0x9+-parseInt(_0x1ff9e7(0x14c))/0xa;if(_0x2d25b4===_0x3a1ca4)break;else _0x247ef4['push'](_0x247ef4['shift']());}catch(_0x81f62b){_0x247ef4['push'](_0x247ef4['shift']());}}}(a21_0x109b,0x9926b));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x22fd2c(0x15c)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x22fd2c(0x155)),{logger}=require(a21_0x22fd2c(0x166)),{getCredentialsPath,getGridDetails}=require(a21_0x22fd2c(0x14a)),{scaleDownHubDeployment}=require(a21_0x22fd2c(0x134)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require(a21_0x22fd2c(0x11a)),{getCloudProviderObject}=require(a21_0x22fd2c(0x127));exports[a21_0x22fd2c(0x136)]=a21_0x22fd2c(0x112),exports[a21_0x22fd2c(0x157)]='Stop\x20a\x20running\x20Automation\x20grid.',exports['builder']=function(_0xefef94){const _0x253ec6=a21_0x22fd2c,_0x5908a5={};_0x5908a5[_0x253ec6(0x116)]='Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.',_0x5908a5[_0x253ec6(0x124)]=_0x253ec6(0x13f),_0x5908a5['iHDAW']=_0x253ec6(0x126),_0x5908a5[_0x253ec6(0x122)]='boolean',_0x5908a5[_0x253ec6(0x11e)]='help';const _0x742037=_0x5908a5,_0x2e9e9f={};_0x2e9e9f['description']=_0x742037[_0x253ec6(0x116)],_0x2e9e9f['type']=_0x742037[_0x253ec6(0x124)];const _0x17b066={};_0x17b066[_0x253ec6(0x141)]=_0x742037[_0x253ec6(0x118)],_0x17b066[_0x253ec6(0x162)]=_0x742037[_0x253ec6(0x122)],_0x17b066[_0x253ec6(0x13b)]=![];const _0x1f631c={};return _0x1f631c[_0x253ec6(0x13d)]=_0x2e9e9f,_0x1f631c[_0x253ec6(0x120)]=_0x17b066,_0xefef94['usage'](HELP_HEADER_MESSAGE[_0x253ec6(0x12e)])[_0x253ec6(0x152)](HELP_FOOTER_MESSAGE)[_0x253ec6(0x15b)](_0x1f631c)[_0x253ec6(0x165)](_0x742037[_0x253ec6(0x11e)])[_0x253ec6(0x115)];},exports[a21_0x22fd2c(0x111)]=async function(_0x5743f6){const _0x5e3c57=a21_0x22fd2c,_0x2316c9={'MxtKQ':_0x5e3c57(0x164),'CeFIt':function(_0x201e9c){return _0x201e9c();},'aqLTu':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','mmFST':function(_0x151d57,_0x473d1f,_0x4008fb,_0x3d3960,_0x355d78,_0x53525b,_0x398776){return _0x151d57(_0x473d1f,_0x4008fb,_0x3d3960,_0x355d78,_0x53525b,_0x398776);},'WiZMD':_0x5e3c57(0x133),'zZJHt':_0x5e3c57(0x11b),'EuROc':function(_0x528e33,_0x31f029,_0x35c093,_0xb8bd1c,_0x508e93,_0x2059aa,_0x236707){return _0x528e33(_0x31f029,_0x35c093,_0xb8bd1c,_0x508e93,_0x2059aa,_0x236707);},'JpkOn':function(_0x6095c1){return _0x6095c1();},'YWSdy':_0x5e3c57(0x13e),'XIsBl':_0x5e3c57(0x12b),'oEOGt':_0x5e3c57(0x144),'rrrpt':function(_0x1a2b89,_0x472d50,_0x153c91,_0x3043dc){return _0x1a2b89(_0x472d50,_0x153c91,_0x3043dc);},'XuHKr':function(_0x3b91b1,_0x34f716,_0x438955){return _0x3b91b1(_0x34f716,_0x438955);},'SGigt':'Grid\x20stoppped.','mmfGm':function(_0x91d948,_0x9dfd72){return _0x91d948===_0x9dfd72;},'elGlc':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','zkDuo':function(_0x233927,_0x143186,_0x2377bf,_0x44e797,_0x431105,_0x18d90b,_0x131672){return _0x233927(_0x143186,_0x2377bf,_0x44e797,_0x431105,_0x18d90b,_0x131672);},'HMUyq':_0x5e3c57(0x132),'tzENC':_0x5e3c57(0x12a),'OTQuB':function(_0x45997c,_0x176810,_0x545a50,_0x48d4b9,_0x260f0c,_0x330f99,_0x1babf9){return _0x45997c(_0x176810,_0x545a50,_0x48d4b9,_0x260f0c,_0x330f99,_0x1babf9);},'JmjbG':'server-error'};let _0x3ff8d0;try{!_0x5743f6[_0x5e3c57(0x117)]&&(logger[_0x5e3c57(0x148)](_0x2316c9['MxtKQ']),process[_0x5e3c57(0x138)](0x1));!fs[_0x5e3c57(0x125)](_0x2316c9[_0x5e3c57(0x11f)](getCredentialsPath))&&(logger[_0x5e3c57(0x148)](_0x2316c9[_0x5e3c57(0x143)]),await _0x2316c9[_0x5e3c57(0x130)](sendInstrumentationEvent,_0x5743f6,_0x2316c9[_0x5e3c57(0x129)],messageTypes['ERROR'],_0x2316c9[_0x5e3c57(0x14f)],null,_0x5743f6),process[_0x5e3c57(0x138)](0x1));logger[_0x5e3c57(0x161)](_0x5e3c57(0x119)+_0x5743f6[_0x5e3c57(0x117)]),await _0x2316c9[_0x5e3c57(0x137)](sendInstrumentationEvent,_0x5743f6,_0x2316c9[_0x5e3c57(0x129)],messageTypes[_0x5e3c57(0x147)],null,null,_0x5743f6);const _0x417dd4=JSON[_0x5e3c57(0x13c)](fs[_0x5e3c57(0x13a)](_0x2316c9[_0x5e3c57(0x131)](getCredentialsPath)));global_registry['bstackUsername']=_0x417dd4[_0x5e3c57(0x142)]['username'],global_registry['bstackAccesskey']=_0x417dd4[_0x5e3c57(0x142)][_0x5e3c57(0x168)];const _0x420cff=WS_ENDPOINT['replace'](_0x2316c9['YWSdy'],_0x417dd4[_0x5e3c57(0x142)][_0x5e3c57(0x145)])[_0x5e3c57(0x12f)](_0x2316c9[_0x5e3c57(0x114)],_0x417dd4[_0x5e3c57(0x142)][_0x5e3c57(0x168)]),_0x514bf2={};_0x514bf2['WebSocket']=ws,_0x514bf2[_0x5e3c57(0x15f)]=0x36ee80,_0x3ff8d0=new ReconnectingWebSocket(_0x420cff,[],_0x514bf2),logger[_0x5e3c57(0x151)](_0x2316c9[_0x5e3c57(0x110)]),webSocketUtils[_0x5e3c57(0x154)](_0x3ff8d0,_0x5743f6[_0x5e3c57(0x146)],_0x5743f6[_0x5e3c57(0x168)]);const [_0x4e1519,_0x501df1]=await _0x2316c9[_0x5e3c57(0x14e)](getGridDetails,_0x417dd4[_0x5e3c57(0x142)]['username'],_0x417dd4['Browserstack']['password'],_0x5743f6[_0x5e3c57(0x117)]);if(_0x501df1){const _0x185955=_0x501df1[_0x5e3c57(0x161)];global_registry[_0x5e3c57(0x14d)]=_0x185955[_0x5e3c57(0x14d)],global_registry[_0x5e3c57(0x123)]=_0x185955['region'],global_registry[_0x5e3c57(0x150)]=_0x185955[_0x5e3c57(0x150)];const _0x3d2dd6=await _0x2316c9['EuROc'](getCloudProviderObject,_0x185955['cloudProvider'],_0x185955['clusterName'],_0x185955[_0x5e3c57(0x15a)],_0x3ff8d0,webSocketUtils,_0x5743f6),[_0x490dd7,_0x2f291c,_0x19d76b,_0x1999c2,_0x5503ce,_0x4e9ab0]=await _0x2316c9[_0x5e3c57(0x169)](createK8sClient,_0x3d2dd6,_0x5743f6[_0x5e3c57(0x15e)]);await _0x2316c9[_0x5e3c57(0x169)](scaleDownHubDeployment,_0x2f291c,_0x185955['name']),logger['info'](_0x2316c9['SGigt']),process['exit'](0x0);}_0x2316c9[_0x5e3c57(0x14b)](_0x4e1519['statusCode'],0x191)&&(logger['error'](_0x2316c9[_0x5e3c57(0x139)]),await _0x2316c9['zkDuo'](sendInstrumentationEvent,_0x5743f6,_0x2316c9['WiZMD'],messageTypes[_0x5e3c57(0x158)],_0x2316c9[_0x5e3c57(0x140)],null,_0x5743f6),process[_0x5e3c57(0x138)](0x1)),_0x2316c9['mmfGm'](_0x4e1519[_0x5e3c57(0x11c)],0x190)&&(logger[_0x5e3c57(0x148)](JSON[_0x5e3c57(0x13c)](_0x4e1519[_0x5e3c57(0x128)])[_0x5e3c57(0x12c)]),await _0x2316c9[_0x5e3c57(0x130)](sendInstrumentationEvent,_0x5743f6,_0x2316c9[_0x5e3c57(0x129)],messageTypes[_0x5e3c57(0x158)],_0x2316c9['tzENC'],null,_0x5743f6),process[_0x5e3c57(0x138)](0x1)),logger[_0x5e3c57(0x148)](_0x5e3c57(0x159)+JSON[_0x5e3c57(0x12d)](_0x4e1519)),await _0x2316c9[_0x5e3c57(0x11d)](sendInstrumentationEvent,_0x5743f6,_0x2316c9[_0x5e3c57(0x129)],messageTypes[_0x5e3c57(0x158)],_0x2316c9['JmjbG'],_0x4e1519,_0x5743f6),process[_0x5e3c57(0x138)](0x1);}catch(_0x591363){const _0x8b141a='Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20'+_0x591363+'\x20\x0a'+JSON[_0x5e3c57(0x12d)](_0x591363[_0x5e3c57(0x121)])+'\x20';logger[_0x5e3c57(0x148)](_0x8b141a),process[_0x5e3c57(0x138)](0x1);}};