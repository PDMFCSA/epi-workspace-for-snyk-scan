const a21_0x1a08e5=a21_0x70aa;(function(_0x5d3f16,_0x165871){const _0x3d644c=a21_0x70aa,_0x35c73f=_0x5d3f16();while(!![]){try{const _0xd72027=-parseInt(_0x3d644c(0x13c))/0x1*(parseInt(_0x3d644c(0x146))/0x2)+parseInt(_0x3d644c(0x136))/0x3*(-parseInt(_0x3d644c(0x149))/0x4)+-parseInt(_0x3d644c(0x117))/0x5+parseInt(_0x3d644c(0x12a))/0x6*(parseInt(_0x3d644c(0x10e))/0x7)+-parseInt(_0x3d644c(0x123))/0x8+parseInt(_0x3d644c(0x11c))/0x9*(parseInt(_0x3d644c(0x135))/0xa)+-parseInt(_0x3d644c(0x120))/0xb*(-parseInt(_0x3d644c(0x12f))/0xc);if(_0xd72027===_0x165871)break;else _0x35c73f['push'](_0x35c73f['shift']());}catch(_0x2e66b7){_0x35c73f['push'](_0x35c73f['shift']());}}}(a21_0x2055,0x81c06));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x1a08e5(0x148)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x1a08e5(0x13d)),{logger}=require(a21_0x1a08e5(0x11d)),{getCredentialsPath,getGridDetails}=require(a21_0x1a08e5(0x131)),{scaleDownHubDeployment}=require(a21_0x1a08e5(0x100)),{sendInstrumentationEvent}=require(a21_0x1a08e5(0x13f)),webSocketUtils=require(a21_0x1a08e5(0x145)),{createK8sClient}=require(a21_0x1a08e5(0x102)),{getCloudProviderObject}=require(a21_0x1a08e5(0x133));function a21_0x70aa(_0x2b47a6,_0x3e8000){const _0x205589=a21_0x2055();return a21_0x70aa=function(_0x70aad3,_0x23e93c){_0x70aad3=_0x70aad3-0xec;let _0x8a2b08=_0x205589[_0x70aad3];return _0x8a2b08;},a21_0x70aa(_0x2b47a6,_0x3e8000);}exports[a21_0x1a08e5(0x141)]=a21_0x1a08e5(0x147),exports[a21_0x1a08e5(0x114)]=a21_0x1a08e5(0x107),exports[a21_0x1a08e5(0x12b)]=function(_0x563504){const _0x4da283=a21_0x1a08e5,_0x223435={};_0x223435[_0x4da283(0x12d)]=_0x4da283(0x111),_0x223435[_0x4da283(0xf2)]=_0x4da283(0xee),_0x223435['RgQqb']=_0x4da283(0x119),_0x223435[_0x4da283(0xed)]=_0x4da283(0xf8),_0x223435['nlFJm']='help';const _0x3d0f67=_0x223435,_0x173ff1={};_0x173ff1[_0x4da283(0x125)]=_0x3d0f67['siQDV'],_0x173ff1['type']=_0x3d0f67['DXZct'];const _0x29fdbd={};_0x29fdbd[_0x4da283(0x125)]=_0x3d0f67[_0x4da283(0x14a)],_0x29fdbd[_0x4da283(0x139)]=_0x3d0f67[_0x4da283(0xed)],_0x29fdbd['default']=![];const _0x2eeeb8={};return _0x2eeeb8[_0x4da283(0x105)]=_0x173ff1,_0x2eeeb8[_0x4da283(0xfa)]=_0x29fdbd,_0x563504[_0x4da283(0x112)](HELP_HEADER_MESSAGE['stop'])['epilogue'](HELP_FOOTER_MESSAGE)[_0x4da283(0x137)](_0x2eeeb8)['help'](_0x3d0f67[_0x4da283(0x116)])[_0x4da283(0x10b)];},exports[a21_0x1a08e5(0x124)]=async function(_0x48af0f){const _0x33a3fa=a21_0x1a08e5,_0x595d30={'QWyWD':_0x33a3fa(0x13b),'bbJgV':function(_0x171633){return _0x171633();},'xtdtP':_0x33a3fa(0x121),'BUGiM':function(_0x5c8389,_0x138940,_0x539298,_0x35893b,_0x76c6b0,_0x2cd9b8,_0x64939f){return _0x5c8389(_0x138940,_0x539298,_0x35893b,_0x76c6b0,_0x2cd9b8,_0x64939f);},'dUzvX':_0x33a3fa(0x10f),'czyjX':'init-not-called','xYltb':function(_0x427b10){return _0x427b10();},'GKVze':_0x33a3fa(0xf7),'vwsGb':_0x33a3fa(0x127),'NFuur':_0x33a3fa(0x13e),'pUczy':function(_0x3ea391,_0x3a31a9,_0x7a29f6,_0x1d3f13){return _0x3ea391(_0x3a31a9,_0x7a29f6,_0x1d3f13);},'OfEfx':function(_0x1066e2,_0x530cdc,_0x4341a3){return _0x1066e2(_0x530cdc,_0x4341a3);},'Zrtnr':_0x33a3fa(0xec),'IcjoT':function(_0x3819be,_0x26fbd9){return _0x3819be===_0x26fbd9;},'vctpR':_0x33a3fa(0x104),'kjRsr':_0x33a3fa(0xf4),'DSInW':function(_0x25a9f3,_0x23dabd,_0x4ca155,_0x5574e5,_0x24ad6e,_0x544836,_0x53dee3){return _0x25a9f3(_0x23dabd,_0x4ca155,_0x5574e5,_0x24ad6e,_0x544836,_0x53dee3);},'ZHvvt':'invalid-grid-id','rwCMs':function(_0x1eaf88,_0x3a7966,_0x391bd5,_0x1a8cf2,_0x17a1f9,_0x48b97e,_0x26628c){return _0x1eaf88(_0x3a7966,_0x391bd5,_0x1a8cf2,_0x17a1f9,_0x48b97e,_0x26628c);},'clAuU':_0x33a3fa(0x126)};let _0x5d8baf;try{!_0x48af0f[_0x33a3fa(0x12e)]&&(logger['error'](_0x595d30[_0x33a3fa(0x122)]),process[_0x33a3fa(0xef)](0x1));!fs[_0x33a3fa(0xf6)](_0x595d30[_0x33a3fa(0xff)](getCredentialsPath))&&(logger[_0x33a3fa(0x118)](_0x595d30[_0x33a3fa(0x110)]),await _0x595d30['BUGiM'](sendInstrumentationEvent,_0x48af0f,_0x595d30['dUzvX'],messageTypes[_0x33a3fa(0x103)],_0x595d30[_0x33a3fa(0x11e)],null,_0x48af0f),process['exit'](0x1));logger[_0x33a3fa(0xfc)](_0x33a3fa(0x132)+_0x48af0f[_0x33a3fa(0x12e)]),await _0x595d30['BUGiM'](sendInstrumentationEvent,_0x48af0f,_0x595d30[_0x33a3fa(0xf5)],messageTypes[_0x33a3fa(0x108)],null,null,_0x48af0f);const _0x5af91c=JSON[_0x33a3fa(0x10d)](fs['readFileSync'](_0x595d30['xYltb'](getCredentialsPath)));global_registry[_0x33a3fa(0x13a)]=_0x5af91c[_0x33a3fa(0x130)][_0x33a3fa(0xf1)],global_registry[_0x33a3fa(0xfd)]=_0x5af91c['Browserstack'][_0x33a3fa(0x138)];const _0x232b8a=WS_ENDPOINT[_0x33a3fa(0xfe)](_0x595d30[_0x33a3fa(0x11b)],_0x5af91c[_0x33a3fa(0x130)][_0x33a3fa(0xf1)])[_0x33a3fa(0xfe)](_0x595d30[_0x33a3fa(0xf9)],_0x5af91c[_0x33a3fa(0x130)]['password']),_0x53f6a0={};_0x53f6a0[_0x33a3fa(0x11f)]=ws,_0x53f6a0[_0x33a3fa(0xf0)]=0x36ee80,_0x5d8baf=new ReconnectingWebSocket(_0x232b8a,[],_0x53f6a0),logger['debug'](_0x595d30[_0x33a3fa(0x143)]),webSocketUtils[_0x33a3fa(0x109)](_0x5d8baf,_0x48af0f[_0x33a3fa(0x129)],_0x48af0f[_0x33a3fa(0x138)]);const [_0x3b331c,_0x3d6485]=await _0x595d30[_0x33a3fa(0x12c)](getGridDetails,_0x5af91c[_0x33a3fa(0x130)]['username'],_0x5af91c[_0x33a3fa(0x130)][_0x33a3fa(0x138)],_0x48af0f[_0x33a3fa(0x12e)]);if(_0x3d6485){const _0x313bdf=_0x3d6485['info'];global_registry[_0x33a3fa(0x101)]=_0x313bdf['cloudProvider'],global_registry[_0x33a3fa(0x106)]=_0x313bdf[_0x33a3fa(0xf3)],global_registry[_0x33a3fa(0x128)]=_0x313bdf[_0x33a3fa(0x128)];const _0x5de8ed=await _0x595d30['BUGiM'](getCloudProviderObject,_0x313bdf['cloudProvider'],_0x313bdf[_0x33a3fa(0x128)],_0x313bdf['name'],_0x5d8baf,webSocketUtils,_0x48af0f),[_0x21b8f2,_0x981b55,_0x34521a,_0x440d76,_0x2921f4,_0x320848]=await _0x595d30['OfEfx'](createK8sClient,_0x5de8ed,_0x48af0f['skipTlsCertVerify']);await _0x595d30[_0x33a3fa(0x144)](scaleDownHubDeployment,_0x981b55,_0x313bdf['name']),logger[_0x33a3fa(0xfc)](_0x595d30['Zrtnr']),process['exit'](0x0);}_0x595d30[_0x33a3fa(0xfb)](_0x3b331c['statusCode'],0x191)&&(logger[_0x33a3fa(0x118)](_0x595d30[_0x33a3fa(0x140)]),await _0x595d30['BUGiM'](sendInstrumentationEvent,_0x48af0f,_0x595d30[_0x33a3fa(0xf5)],messageTypes[_0x33a3fa(0x103)],_0x595d30['kjRsr'],null,_0x48af0f),process[_0x33a3fa(0xef)](0x1)),_0x595d30['IcjoT'](_0x3b331c[_0x33a3fa(0x11a)],0x190)&&(logger[_0x33a3fa(0x118)](JSON['parse'](_0x3b331c['body'])[_0x33a3fa(0x134)]),await _0x595d30['DSInW'](sendInstrumentationEvent,_0x48af0f,_0x595d30[_0x33a3fa(0xf5)],messageTypes[_0x33a3fa(0x103)],_0x595d30[_0x33a3fa(0x10a)],null,_0x48af0f),process[_0x33a3fa(0xef)](0x1)),logger[_0x33a3fa(0x118)](_0x33a3fa(0x113)+JSON[_0x33a3fa(0x115)](_0x3b331c)),await _0x595d30[_0x33a3fa(0x10c)](sendInstrumentationEvent,_0x48af0f,_0x595d30[_0x33a3fa(0xf5)],messageTypes[_0x33a3fa(0x103)],_0x595d30['clAuU'],_0x3b331c,_0x48af0f),process['exit'](0x1);}catch(_0x2f1b6a){const _0x7d422b=_0x33a3fa(0x142)+_0x2f1b6a+'\x20\x0a'+JSON[_0x33a3fa(0x115)](_0x2f1b6a['stack'])+'\x20';logger[_0x33a3fa(0x118)](_0x7d422b),process['exit'](0x1);}};function a21_0x2055(){const _0x32deb6=['bstackUsername','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','1muLBhf','../../config/constants','Adding\x20Websocket\x20listeners','../../utils/instrumentationUtils','vctpR','command','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','NFuur','OfEfx','../../utils/webSocketUtils','1018366jcCuHo','grid','reconnecting-websocket','148YLVtqb','RgQqb','Grid\x20stoppped.','nhlhT','string','exit','connectionTimeout','username','DXZct','region','unauthorised','dUzvX','existsSync','<UsernamePlaceholder>','boolean','vwsGb','skip-tls-cert-verify','IcjoT','info','bstackAccesskey','replace','bbJgV','../../utils/gridComponents','cloudProvider','../../utils/createk8sClient','ERROR','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','grid-id','clusterRegion','Stop\x20a\x20running\x20Automation\x20grid.','INFO','addListeners','ZHvvt','argv','rwCMs','parse','35nzphDu','stop-grid-called','xtdtP','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','usage','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','desc','stringify','nlFJm','4819415axHzCJ','error','Skip\x20insecure\x20cert\x20verification.','statusCode','GKVze','135945rejtgJ','../../config/logger','czyjX','WebSocket','2761klYBIq','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','QWyWD','4806576eLQjIS','handler','description','server-error','<PasswordPlaceholder>','clusterName','user','284370JWnWPx','builder','pUczy','siQDV','gridId','113988Qnkkzw','Browserstack','../../utils/utilityMethods','Stopping\x20grid\x20','../../cloudproviders/utils','message','410BknzZo','51501bLqUeO','options','password','type'];a21_0x2055=function(){return _0x32deb6;};return a21_0x2055();}