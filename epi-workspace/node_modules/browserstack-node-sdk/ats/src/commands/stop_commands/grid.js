function a21_0x525a(){const _0x478b8d=['statusCode','readFileSync','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','QXLHI','options','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','password','../../config/logger','WebSocket','PmFlL','builder','2084094DfoziV','argv','bstackAccesskey','20tJFndJ','Grid\x20stoppped.','../../utils/instrumentationUtils','string','aTqHG','type','replace','yhOqd','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','cloudProvider','epilogue','155154XBPIqJ','../../utils/gridComponents','suroL','connectionTimeout','stringify','description','Dkkag','<UsernamePlaceholder>','exit','Adding\x20Websocket\x20listeners','debug','37294990CCOKSd','FItmq','invalid-grid-id','HBcgl','boolean','body','unauthorised','../../cloudproviders/utils','ViwCr','INFO','default','username','grid-id','Stop\x20a\x20running\x20Automation\x20grid.','Browserstack','415nHGJgY','name','kIfMh','parse','gridId','Skip\x20insecure\x20cert\x20verification.','tuWJM','40INDAnA','sBAUW','region','error','clusterRegion','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','jeAOc','desc','484377lhxIbA','stack','uSTWa','<PasswordPlaceholder>','11016ROlHDN','ERROR','jdFik','skipTlsCertVerify','Cmrwd','handler','IOkel','stop-grid-called','dAGPP','Stopping\x20grid\x20','clusterName','skip-tls-cert-verify','server-error','info','808409LxwrOm','mwvgQ','IuIdB','107611ySIECh','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','HlgML','user','message','help','usage'];a21_0x525a=function(){return _0x478b8d;};return a21_0x525a();}function a21_0x7981(_0x2e41f9,_0x566ded){const _0x525ab4=a21_0x525a();return a21_0x7981=function(_0x798197,_0x1f29dd){_0x798197=_0x798197-0x162;let _0xf063aa=_0x525ab4[_0x798197];return _0xf063aa;},a21_0x7981(_0x2e41f9,_0x566ded);}const a21_0x4817fe=a21_0x7981;(function(_0x3a8d4e,_0xa86370){const _0x2b347f=a21_0x7981,_0x388523=_0x3a8d4e();while(!![]){try{const _0x2975b0=-parseInt(_0x2b347f(0x18a))/0x1+-parseInt(_0x2b347f(0x1ad))/0x2+parseInt(_0x2b347f(0x178))/0x3*(-parseInt(_0x2b347f(0x1a2))/0x4)+-parseInt(_0x2b347f(0x169))/0x5*(parseInt(_0x2b347f(0x17c))/0x6)+-parseInt(_0x2b347f(0x18d))/0x7+-parseInt(_0x2b347f(0x170))/0x8*(parseInt(_0x2b347f(0x19f))/0x9)+parseInt(_0x2b347f(0x1b8))/0xa;if(_0x2975b0===_0xa86370)break;else _0x388523['push'](_0x388523['shift']());}catch(_0x3d4b9b){_0x388523['push'](_0x388523['shift']());}}}(a21_0x525a,0xad7e3));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require('../../config/constants'),{logger}=require(a21_0x4817fe(0x19b)),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleDownHubDeployment}=require(a21_0x4817fe(0x1ae)),{sendInstrumentationEvent}=require(a21_0x4817fe(0x1a4)),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require(a21_0x4817fe(0x1bf));exports['command']='grid',exports[a21_0x4817fe(0x177)]=a21_0x4817fe(0x167),exports[a21_0x4817fe(0x19e)]=function(_0x1a8c7e){const _0x269120=a21_0x4817fe,_0x3d08c4={};_0x3d08c4[_0x269120(0x19d)]='Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.',_0x3d08c4[_0x269120(0x17e)]=_0x269120(0x1a5),_0x3d08c4[_0x269120(0x1b9)]=_0x269120(0x16e),_0x3d08c4[_0x269120(0x182)]=_0x269120(0x1bc),_0x3d08c4['MErQv']=_0x269120(0x192);const _0x6b3bf2=_0x3d08c4,_0x2112e9={};_0x2112e9[_0x269120(0x1b2)]=_0x6b3bf2['PmFlL'],_0x2112e9['type']=_0x6b3bf2['jdFik'];const _0x87c990={};_0x87c990[_0x269120(0x1b2)]=_0x6b3bf2[_0x269120(0x1b9)],_0x87c990[_0x269120(0x1a7)]=_0x6b3bf2['IOkel'],_0x87c990[_0x269120(0x164)]=![];const _0x45f2a3={};return _0x45f2a3[_0x269120(0x166)]=_0x2112e9,_0x45f2a3[_0x269120(0x187)]=_0x87c990,_0x1a8c7e[_0x269120(0x193)](HELP_HEADER_MESSAGE['stop'])[_0x269120(0x1ac)](HELP_FOOTER_MESSAGE)[_0x269120(0x198)](_0x45f2a3)[_0x269120(0x192)](_0x6b3bf2['MErQv'])[_0x269120(0x1a0)];},exports[a21_0x4817fe(0x181)]=async function(_0xc5d710){const _0x56bfa3=a21_0x4817fe,_0x5ddad2={'uSTWa':_0x56bfa3(0x175),'suroL':function(_0x264fcd){return _0x264fcd();},'KuddC':_0x56bfa3(0x199),'mwvgQ':function(_0x5d6c2c,_0x154492,_0x270b9c,_0x52d409,_0x4edc03,_0x2e6683,_0x1a866d){return _0x5d6c2c(_0x154492,_0x270b9c,_0x52d409,_0x4edc03,_0x2e6683,_0x1a866d);},'HlgML':_0x56bfa3(0x183),'sBAUW':'init-not-called','yhOqd':function(_0x20ad5a,_0x204e1e,_0x53abbe,_0x2bf0e4,_0x6d01d3,_0x5ec06a,_0x3561ea){return _0x20ad5a(_0x204e1e,_0x53abbe,_0x2bf0e4,_0x6d01d3,_0x5ec06a,_0x3561ea);},'Dkkag':_0x56bfa3(0x1b4),'IFBxt':_0x56bfa3(0x17b),'tuWJM':_0x56bfa3(0x1b6),'VVMrx':function(_0x119045,_0x57d20c,_0x8f50f7,_0x5ba85e){return _0x119045(_0x57d20c,_0x8f50f7,_0x5ba85e);},'wrtar':function(_0x512966,_0x561eda,_0x169ee3){return _0x512966(_0x561eda,_0x169ee3);},'aTqHG':function(_0x2962c3,_0x41bd1b,_0x3e5067){return _0x2962c3(_0x41bd1b,_0x3e5067);},'IuIdB':_0x56bfa3(0x1a3),'ViwCr':function(_0x462e97,_0x2a5000){return _0x462e97===_0x2a5000;},'dAGPP':_0x56bfa3(0x1aa),'Cmrwd':function(_0x29c7a1,_0x46c2f7,_0x5d069f,_0x134544,_0x4f7d44,_0x314067,_0x54cb76){return _0x29c7a1(_0x46c2f7,_0x5d069f,_0x134544,_0x4f7d44,_0x314067,_0x54cb76);},'QXLHI':_0x56bfa3(0x1be),'HBcgl':function(_0x5c180d,_0x4b04ad){return _0x5c180d===_0x4b04ad;},'kIfMh':_0x56bfa3(0x1ba),'jeAOc':_0x56bfa3(0x188)};let _0x279926;try{!_0xc5d710[_0x56bfa3(0x16d)]&&(logger[_0x56bfa3(0x173)](_0x5ddad2[_0x56bfa3(0x17a)]),process[_0x56bfa3(0x1b5)](0x1));!fs['existsSync'](_0x5ddad2[_0x56bfa3(0x1af)](getCredentialsPath))&&(logger['error'](_0x5ddad2['KuddC']),await _0x5ddad2[_0x56bfa3(0x18b)](sendInstrumentationEvent,_0xc5d710,_0x5ddad2[_0x56bfa3(0x18f)],messageTypes[_0x56bfa3(0x17d)],_0x5ddad2[_0x56bfa3(0x171)],null,_0xc5d710),process['exit'](0x1));logger[_0x56bfa3(0x189)](_0x56bfa3(0x185)+_0xc5d710[_0x56bfa3(0x16d)]),await _0x5ddad2[_0x56bfa3(0x1a9)](sendInstrumentationEvent,_0xc5d710,_0x5ddad2[_0x56bfa3(0x18f)],messageTypes[_0x56bfa3(0x163)],null,null,_0xc5d710);const _0x1fca2a=JSON[_0x56bfa3(0x16c)](fs[_0x56bfa3(0x195)](_0x5ddad2[_0x56bfa3(0x1af)](getCredentialsPath)));global_registry['bstackUsername']=_0x1fca2a[_0x56bfa3(0x168)]['username'],global_registry[_0x56bfa3(0x1a1)]=_0x1fca2a[_0x56bfa3(0x168)][_0x56bfa3(0x19a)];const _0xd1b2b2=WS_ENDPOINT['replace'](_0x5ddad2[_0x56bfa3(0x1b3)],_0x1fca2a['Browserstack'][_0x56bfa3(0x165)])[_0x56bfa3(0x1a8)](_0x5ddad2['IFBxt'],_0x1fca2a[_0x56bfa3(0x168)][_0x56bfa3(0x19a)]),_0x4d1dee={};_0x4d1dee[_0x56bfa3(0x19c)]=ws,_0x4d1dee[_0x56bfa3(0x1b0)]=0x36ee80,_0x279926=new ReconnectingWebSocket(_0xd1b2b2,[],_0x4d1dee),logger[_0x56bfa3(0x1b7)](_0x5ddad2[_0x56bfa3(0x16f)]),webSocketUtils['addListeners'](_0x279926,_0xc5d710[_0x56bfa3(0x190)],_0xc5d710['password']);const [_0x45b638,_0x21dd76]=await _0x5ddad2['VVMrx'](getGridDetails,_0x1fca2a['Browserstack'][_0x56bfa3(0x165)],_0x1fca2a[_0x56bfa3(0x168)]['password'],_0xc5d710[_0x56bfa3(0x16d)]);if(_0x21dd76){const _0x2e31af=_0x21dd76[_0x56bfa3(0x189)];global_registry[_0x56bfa3(0x1ab)]=_0x2e31af[_0x56bfa3(0x1ab)],global_registry[_0x56bfa3(0x174)]=_0x2e31af[_0x56bfa3(0x172)],global_registry[_0x56bfa3(0x186)]=_0x2e31af[_0x56bfa3(0x186)];const _0x1242ee=await _0x5ddad2[_0x56bfa3(0x1a9)](getCloudProviderObject,_0x2e31af['cloudProvider'],_0x2e31af[_0x56bfa3(0x186)],_0x2e31af['name'],_0x279926,webSocketUtils,_0xc5d710),[_0x2378d6,_0x5ef380,_0x356758,_0x28c2fa,_0x4f5832,_0x25a5b4]=await _0x5ddad2['wrtar'](createK8sClient,_0x1242ee,_0xc5d710[_0x56bfa3(0x17f)]);await _0x5ddad2[_0x56bfa3(0x1a6)](scaleDownHubDeployment,_0x5ef380,_0x2e31af[_0x56bfa3(0x16a)]),logger[_0x56bfa3(0x189)](_0x5ddad2[_0x56bfa3(0x18c)]),process[_0x56bfa3(0x1b5)](0x0);}_0x5ddad2[_0x56bfa3(0x162)](_0x45b638[_0x56bfa3(0x194)],0x191)&&(logger['error'](_0x5ddad2[_0x56bfa3(0x184)]),await _0x5ddad2['Cmrwd'](sendInstrumentationEvent,_0xc5d710,_0x5ddad2['HlgML'],messageTypes[_0x56bfa3(0x17d)],_0x5ddad2[_0x56bfa3(0x197)],null,_0xc5d710),process[_0x56bfa3(0x1b5)](0x1)),_0x5ddad2[_0x56bfa3(0x1bb)](_0x45b638['statusCode'],0x190)&&(logger[_0x56bfa3(0x173)](JSON[_0x56bfa3(0x16c)](_0x45b638[_0x56bfa3(0x1bd)])[_0x56bfa3(0x191)]),await _0x5ddad2[_0x56bfa3(0x180)](sendInstrumentationEvent,_0xc5d710,_0x5ddad2['HlgML'],messageTypes[_0x56bfa3(0x17d)],_0x5ddad2[_0x56bfa3(0x16b)],null,_0xc5d710),process[_0x56bfa3(0x1b5)](0x1)),logger[_0x56bfa3(0x173)](_0x56bfa3(0x196)+JSON[_0x56bfa3(0x1b1)](_0x45b638)),await _0x5ddad2[_0x56bfa3(0x1a9)](sendInstrumentationEvent,_0xc5d710,_0x5ddad2[_0x56bfa3(0x18f)],messageTypes['ERROR'],_0x5ddad2[_0x56bfa3(0x176)],_0x45b638,_0xc5d710),process[_0x56bfa3(0x1b5)](0x1);}catch(_0x490e41){const _0x2e3713=_0x56bfa3(0x18e)+_0x490e41+'\x20\x0a'+JSON[_0x56bfa3(0x1b1)](_0x490e41[_0x56bfa3(0x179)])+'\x20';logger[_0x56bfa3(0x173)](_0x2e3713),process[_0x56bfa3(0x1b5)](0x1);}};