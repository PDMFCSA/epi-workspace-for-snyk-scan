const a21_0x47eb13=a21_0x11b8;function a21_0x11b8(_0x2b6eff,_0xea8ee8){const _0xdcf7db=a21_0xdcf7();return a21_0x11b8=function(_0x11b8f1,_0x2d2d0c){_0x11b8f1=_0x11b8f1-0x116;let _0x4b7ace=_0xdcf7db[_0x11b8f1];return _0x4b7ace;},a21_0x11b8(_0x2b6eff,_0xea8ee8);}(function(_0x2023ee,_0x1ee512){const _0x38f57f=a21_0x11b8,_0x3741f3=_0x2023ee();while(!![]){try{const _0x214bc6=-parseInt(_0x38f57f(0x14c))/0x1+-parseInt(_0x38f57f(0x166))/0x2+parseInt(_0x38f57f(0x13c))/0x3*(-parseInt(_0x38f57f(0x121))/0x4)+-parseInt(_0x38f57f(0x120))/0x5*(-parseInt(_0x38f57f(0x136))/0x6)+-parseInt(_0x38f57f(0x16a))/0x7*(-parseInt(_0x38f57f(0x134))/0x8)+parseInt(_0x38f57f(0x176))/0x9*(-parseInt(_0x38f57f(0x12d))/0xa)+-parseInt(_0x38f57f(0x156))/0xb*(-parseInt(_0x38f57f(0x15e))/0xc);if(_0x214bc6===_0x1ee512)break;else _0x3741f3['push'](_0x3741f3['shift']());}catch(_0x49c99c){_0x3741f3['push'](_0x3741f3['shift']());}}}(a21_0xdcf7,0xa4b8c));function a21_0xdcf7(){const _0x3d1011=['aAiWX','grid','hoVqt','rMHIa','HEfVi','statusCode','Grid\x20stoppped.','existsSync','exit','1248785SfeOZY','username','ZfVsA','DtVEt','options','string','Stopping\x20grid\x20','../../config/logger','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','command','22733931EkHbFG','../../config/constants','info','vbKYr','Stop\x20a\x20running\x20Automation\x20grid.','BmrvI','password','../../utils/webSocketUtils','24rWIdLp','parse','TxlAR','IgnpZ','../../utils/createk8sClient','epilogue','xtfDC','coHGg','2500928bctRuk','SnPuK','../../cloudproviders/utils','GZdQW','1680791DSnlUn','reconnecting-websocket','desc','stop','description','QxnBl','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','error','region','hRaSa','stop-grid-called','clusterName','852921KRTUDS','Txoqr','handler','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','init-not-called','type','gridId','Browserstack','boolean','WebSocket','fQhGj','10FsBnvR','2901324kglveg','../../utils/instrumentationUtils','bstackUsername','help','body','../../utils/gridComponents','EteUH','debug','skip-tls-cert-verify','vDyVP','bstackAccesskey','HDTcM','130TYbIZn','invalid-grid-id','builder','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','ERROR','cloudProvider','addListeners','8IwvwUH','connectionTimeout','2273166snVjlS','zCLsB','usage','tdyqt','../../utils/utilityMethods','Skip\x20insecure\x20cert\x20verification.','3rnpsFW','BhAbm','message','stringify','replace','stack','name'];a21_0xdcf7=function(){return _0x3d1011;};return a21_0xdcf7();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x47eb13(0x16b)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x47eb13(0x157)),{logger}=require(a21_0x47eb13(0x153)),{getCredentialsPath,getGridDetails}=require(a21_0x47eb13(0x13a)),{scaleDownHubDeployment}=require(a21_0x47eb13(0x126)),{sendInstrumentationEvent}=require(a21_0x47eb13(0x122)),webSocketUtils=require(a21_0x47eb13(0x15d)),{createK8sClient}=require(a21_0x47eb13(0x162)),{getCloudProviderObject}=require(a21_0x47eb13(0x168));exports[a21_0x47eb13(0x155)]=a21_0x47eb13(0x144),exports[a21_0x47eb13(0x16c)]=a21_0x47eb13(0x15a),exports[a21_0x47eb13(0x12f)]=function(_0x5c292b){const _0x2c9bcf=a21_0x47eb13,_0x1e6fec={};_0x1e6fec[_0x2c9bcf(0x116)]='Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.',_0x1e6fec[_0x2c9bcf(0x139)]=_0x2c9bcf(0x151),_0x1e6fec[_0x2c9bcf(0x15b)]=_0x2c9bcf(0x13b),_0x1e6fec[_0x2c9bcf(0x173)]=_0x2c9bcf(0x11d),_0x1e6fec[_0x2c9bcf(0x11f)]=_0x2c9bcf(0x124);const _0x341ef0=_0x1e6fec,_0x500ad0={};_0x500ad0[_0x2c9bcf(0x16e)]=_0x341ef0['Txoqr'],_0x500ad0[_0x2c9bcf(0x11a)]=_0x341ef0[_0x2c9bcf(0x139)];const _0x11d34d={};_0x11d34d[_0x2c9bcf(0x16e)]=_0x341ef0[_0x2c9bcf(0x15b)],_0x11d34d[_0x2c9bcf(0x11a)]=_0x341ef0[_0x2c9bcf(0x173)],_0x11d34d['default']=![];const _0x5499a6={};return _0x5499a6['grid-id']=_0x500ad0,_0x5499a6[_0x2c9bcf(0x129)]=_0x11d34d,_0x5c292b[_0x2c9bcf(0x138)](HELP_HEADER_MESSAGE[_0x2c9bcf(0x16d)])[_0x2c9bcf(0x163)](HELP_FOOTER_MESSAGE)[_0x2c9bcf(0x150)](_0x5499a6)['help'](_0x341ef0[_0x2c9bcf(0x11f)])['argv'];},exports[a21_0x47eb13(0x117)]=async function(_0x450ab7){const _0x1e5574=a21_0x47eb13,_0x30c920={'HDTcM':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','rMHIa':function(_0x211a98){return _0x211a98();},'ZfVsA':_0x1e5574(0x130),'aAiWX':function(_0x578a47,_0x1082b0,_0x3cf6cb,_0x1d2b44,_0x410f16,_0x5c67dc,_0x3f3bde){return _0x578a47(_0x1082b0,_0x3cf6cb,_0x1d2b44,_0x410f16,_0x5c67dc,_0x3f3bde);},'TxlAR':_0x1e5574(0x174),'vbKYr':_0x1e5574(0x119),'hoVqt':'<UsernamePlaceholder>','zCLsB':'<PasswordPlaceholder>','xtfDC':'Adding\x20Websocket\x20listeners','coHGg':function(_0x1c591a,_0x47a6aa,_0x4302ab,_0x12ba2f){return _0x1c591a(_0x47a6aa,_0x4302ab,_0x12ba2f);},'IgnpZ':function(_0x1af2fd,_0x19e8f9,_0xfa0cc5,_0x3b10f9,_0x23b89f,_0x8f28e1,_0x13e0d9){return _0x1af2fd(_0x19e8f9,_0xfa0cc5,_0x3b10f9,_0x23b89f,_0x8f28e1,_0x13e0d9);},'DtVEt':function(_0xe4b67c,_0x258c39,_0x22a259){return _0xe4b67c(_0x258c39,_0x22a259);},'QxnBl':function(_0x137704,_0x446d68,_0x2eed4d){return _0x137704(_0x446d68,_0x2eed4d);},'GZdQW':_0x1e5574(0x149),'vDyVP':function(_0x5ba399,_0x4ec00b){return _0x5ba399===_0x4ec00b;},'EteUH':_0x1e5574(0x170),'SnPuK':'unauthorised','HEfVi':_0x1e5574(0x12e),'BhAbm':'server-error'};let _0x5ae22d;try{!_0x450ab7[_0x1e5574(0x11b)]&&(logger[_0x1e5574(0x171)](_0x30c920[_0x1e5574(0x12c)]),process[_0x1e5574(0x14b)](0x1));!fs[_0x1e5574(0x14a)](_0x30c920[_0x1e5574(0x146)](getCredentialsPath))&&(logger['error'](_0x30c920[_0x1e5574(0x14e)]),await _0x30c920['aAiWX'](sendInstrumentationEvent,_0x450ab7,_0x30c920[_0x1e5574(0x160)],messageTypes[_0x1e5574(0x131)],_0x30c920[_0x1e5574(0x159)],null,_0x450ab7),process[_0x1e5574(0x14b)](0x1));logger[_0x1e5574(0x158)](_0x1e5574(0x152)+_0x450ab7[_0x1e5574(0x11b)]),await _0x30c920[_0x1e5574(0x143)](sendInstrumentationEvent,_0x450ab7,_0x30c920[_0x1e5574(0x160)],messageTypes['INFO'],null,null,_0x450ab7);const _0x2474b9=JSON[_0x1e5574(0x15f)](fs['readFileSync'](_0x30c920['rMHIa'](getCredentialsPath)));global_registry[_0x1e5574(0x123)]=_0x2474b9[_0x1e5574(0x11c)]['username'],global_registry[_0x1e5574(0x12b)]=_0x2474b9[_0x1e5574(0x11c)][_0x1e5574(0x15c)];const _0x54662d=WS_ENDPOINT[_0x1e5574(0x140)](_0x30c920[_0x1e5574(0x145)],_0x2474b9['Browserstack']['username'])[_0x1e5574(0x140)](_0x30c920[_0x1e5574(0x137)],_0x2474b9[_0x1e5574(0x11c)][_0x1e5574(0x15c)]),_0x311112={};_0x311112[_0x1e5574(0x11e)]=ws,_0x311112[_0x1e5574(0x135)]=0x36ee80,_0x5ae22d=new ReconnectingWebSocket(_0x54662d,[],_0x311112),logger[_0x1e5574(0x128)](_0x30c920[_0x1e5574(0x164)]),webSocketUtils[_0x1e5574(0x133)](_0x5ae22d,_0x450ab7['user'],_0x450ab7[_0x1e5574(0x15c)]);const [_0x2295fa,_0x5f469c]=await _0x30c920[_0x1e5574(0x165)](getGridDetails,_0x2474b9[_0x1e5574(0x11c)][_0x1e5574(0x14d)],_0x2474b9[_0x1e5574(0x11c)]['password'],_0x450ab7[_0x1e5574(0x11b)]);if(_0x5f469c){const _0x44d05f=_0x5f469c['info'];global_registry[_0x1e5574(0x132)]=_0x44d05f[_0x1e5574(0x132)],global_registry['clusterRegion']=_0x44d05f[_0x1e5574(0x172)],global_registry['clusterName']=_0x44d05f[_0x1e5574(0x175)];const _0x490377=await _0x30c920[_0x1e5574(0x161)](getCloudProviderObject,_0x44d05f[_0x1e5574(0x132)],_0x44d05f['clusterName'],_0x44d05f[_0x1e5574(0x142)],_0x5ae22d,webSocketUtils,_0x450ab7),[_0x19ca20,_0x20d1d8,_0x12aab8,_0x2d7a3d,_0x1d7915,_0x506688]=await _0x30c920[_0x1e5574(0x14f)](createK8sClient,_0x490377,_0x450ab7['skipTlsCertVerify']);await _0x30c920[_0x1e5574(0x16f)](scaleDownHubDeployment,_0x20d1d8,_0x44d05f[_0x1e5574(0x142)]),logger[_0x1e5574(0x158)](_0x30c920[_0x1e5574(0x169)]),process['exit'](0x0);}_0x30c920[_0x1e5574(0x12a)](_0x2295fa['statusCode'],0x191)&&(logger[_0x1e5574(0x171)](_0x30c920[_0x1e5574(0x127)]),await _0x30c920[_0x1e5574(0x161)](sendInstrumentationEvent,_0x450ab7,_0x30c920[_0x1e5574(0x160)],messageTypes[_0x1e5574(0x131)],_0x30c920[_0x1e5574(0x167)],null,_0x450ab7),process[_0x1e5574(0x14b)](0x1)),_0x30c920['vDyVP'](_0x2295fa[_0x1e5574(0x148)],0x190)&&(logger[_0x1e5574(0x171)](JSON[_0x1e5574(0x15f)](_0x2295fa[_0x1e5574(0x125)])[_0x1e5574(0x13e)]),await _0x30c920[_0x1e5574(0x143)](sendInstrumentationEvent,_0x450ab7,_0x30c920['TxlAR'],messageTypes['ERROR'],_0x30c920[_0x1e5574(0x147)],null,_0x450ab7),process[_0x1e5574(0x14b)](0x1)),logger[_0x1e5574(0x171)](_0x1e5574(0x154)+JSON[_0x1e5574(0x13f)](_0x2295fa)),await _0x30c920['IgnpZ'](sendInstrumentationEvent,_0x450ab7,_0x30c920['TxlAR'],messageTypes['ERROR'],_0x30c920[_0x1e5574(0x13d)],_0x2295fa,_0x450ab7),process['exit'](0x1);}catch(_0x458b32){const _0xc85907=_0x1e5574(0x118)+_0x458b32+'\x20\x0a'+JSON['stringify'](_0x458b32[_0x1e5574(0x141)])+'\x20';logger[_0x1e5574(0x171)](_0xc85907),process[_0x1e5574(0x14b)](0x1);}};