function a21_0x4be3(){const _0x372227=['body','WebSocket','parse','grid-id','NomEN','stop-grid-called','init-not-called','<UsernamePlaceholder>','default','ggmfu','addListeners','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','IFtJo','name','lZmVr','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','handler','IVKgq','debug','6795acmFgW','6825ZfPvXN','3480grZfSg','tevwg','clusterName','gridId','error','492JYmWyT','LpQqe','unauthorised','bstackUsername','../../utils/createk8sClient','epilogue','cloudProvider','MkuuM','stringify','../../utils/utilityMethods','5543888bhPxaz','Grid\x20stoppped.','clusterRegion','region','Stgrq','uGSYE','password','../../utils/instrumentationUtils','218627xNwwxe','3092DgFxFI','message','grid','4160250rfrSHu','info','6713721QAbNdy','reconnecting-websocket','KzSDr','Stopping\x20grid\x20','help','Browserstack','VoZKg','argv','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','description','Stop\x20a\x20running\x20Automation\x20grid.','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','RkllR','type','connectionTimeout','exit','stack','Adding\x20Websocket\x20listeners','USKuI','bstackAccesskey','desc','eTayc','ERROR','1608GoRexg','../../utils/webSocketUtils','replace','lSzGb','existsSync','username','server-error','gXfuB','GnrVr','skip-tls-cert-verify','usage'];a21_0x4be3=function(){return _0x372227;};return a21_0x4be3();}const a21_0x4d00ce=a21_0x4f0c;(function(_0x1c2769,_0x4b4a28){const _0x5c6f59=a21_0x4f0c,_0x1f8bee=_0x1c2769();while(!![]){try{const _0x1a37a9=parseInt(_0x5c6f59(0x11c))/0x1+parseInt(_0x5c6f59(0x10a))/0x2*(-parseInt(_0x5c6f59(0x103))/0x3)+-parseInt(_0x5c6f59(0x11d))/0x4*(-parseInt(_0x5c6f59(0x105))/0x5)+parseInt(_0x5c6f59(0x139))/0x6*(-parseInt(_0x5c6f59(0x104))/0x7)+-parseInt(_0x5c6f59(0x114))/0x8+parseInt(_0x5c6f59(0x122))/0x9+parseInt(_0x5c6f59(0x120))/0xa;if(_0x1a37a9===_0x4b4a28)break;else _0x1f8bee['push'](_0x1f8bee['shift']());}catch(_0x57f249){_0x1f8bee['push'](_0x1f8bee['shift']());}}}(a21_0x4be3,0x63671));function a21_0x4f0c(_0x40ea86,_0x4c75cf){const _0x4be370=a21_0x4be3();return a21_0x4f0c=function(_0x4f0c4e,_0x2e533e){_0x4f0c4e=_0x4f0c4e-0xeb;let _0x5215d5=_0x4be370[_0x4f0c4e];return _0x5215d5;},a21_0x4f0c(_0x40ea86,_0x4c75cf);}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x4d00ce(0x123)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require('../../config/constants'),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require(a21_0x4d00ce(0x113)),{scaleDownHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require(a21_0x4d00ce(0x11b)),webSocketUtils=require(a21_0x4d00ce(0x13a)),{createK8sClient}=require(a21_0x4d00ce(0x10e)),{getCloudProviderObject}=require('../../cloudproviders/utils');exports['command']=a21_0x4d00ce(0x11f),exports[a21_0x4d00ce(0x136)]=a21_0x4d00ce(0x12c),exports['builder']=function(_0x3b1e05){const _0x3d8f9a=a21_0x4d00ce,_0x184985={};_0x184985[_0x3d8f9a(0x119)]=_0x3d8f9a(0xf9),_0x184985['LLtqd']='string',_0x184985[_0x3d8f9a(0x106)]='Skip\x20insecure\x20cert\x20verification.',_0x184985[_0x3d8f9a(0x101)]='boolean',_0x184985[_0x3d8f9a(0xf7)]=_0x3d8f9a(0x126);const _0x4ba77f=_0x184985,_0x5ed9ad={};_0x5ed9ad[_0x3d8f9a(0x12b)]=_0x4ba77f[_0x3d8f9a(0x119)],_0x5ed9ad['type']=_0x4ba77f['LLtqd'];const _0x233c8d={};_0x233c8d[_0x3d8f9a(0x12b)]=_0x4ba77f[_0x3d8f9a(0x106)],_0x233c8d[_0x3d8f9a(0x12f)]=_0x4ba77f[_0x3d8f9a(0x101)],_0x233c8d[_0x3d8f9a(0xf6)]=![];const _0x309460={};return _0x309460[_0x3d8f9a(0xf1)]=_0x5ed9ad,_0x309460[_0x3d8f9a(0xec)]=_0x233c8d,_0x3b1e05[_0x3d8f9a(0xed)](HELP_HEADER_MESSAGE['stop'])[_0x3d8f9a(0x10f)](HELP_FOOTER_MESSAGE)['options'](_0x309460)[_0x3d8f9a(0x126)](_0x4ba77f['ggmfu'])[_0x3d8f9a(0x129)];},exports[a21_0x4d00ce(0x100)]=async function(_0x45e25f){const _0xa78361=a21_0x4d00ce,_0x45bba8={'NXHdL':_0xa78361(0xfb),'NomEN':function(_0x5bcff1){return _0x5bcff1();},'Kerke':_0xa78361(0x12d),'USKuI':function(_0x5d9106,_0x2ab8db,_0x1d943f,_0xf4c4de,_0x35d9f4,_0x25fd02,_0x40396c){return _0x5d9106(_0x2ab8db,_0x1d943f,_0xf4c4de,_0x35d9f4,_0x25fd02,_0x40396c);},'Stgrq':_0xa78361(0xf3),'jufkL':_0xa78361(0xf4),'MkuuM':function(_0x4a6471){return _0x4a6471();},'lZmVr':_0xa78361(0xf5),'KzSDr':'<PasswordPlaceholder>','eTayc':_0xa78361(0x133),'GnrVr':function(_0x3c62fb,_0x1d1f5e,_0x5412b5,_0x586eec){return _0x3c62fb(_0x1d1f5e,_0x5412b5,_0x586eec);},'gXfuB':function(_0x326e19,_0x5003e2,_0x289292){return _0x326e19(_0x5003e2,_0x289292);},'PSpTF':_0xa78361(0x115),'LpQqe':function(_0xa81774,_0x1e4dd9){return _0xa81774===_0x1e4dd9;},'VoZKg':_0xa78361(0xfa),'IFtJo':function(_0x2d9765,_0x31e74b,_0x248ffd,_0x462dce,_0x514c62,_0x1d6a55,_0x3453b9){return _0x2d9765(_0x31e74b,_0x248ffd,_0x462dce,_0x514c62,_0x1d6a55,_0x3453b9);},'lSzGb':_0xa78361(0x10c),'Puyuq':function(_0x439ba9,_0x179b5b,_0x231cb2,_0x41ed07,_0x308bc1,_0x2ab2e3,_0xa41405){return _0x439ba9(_0x179b5b,_0x231cb2,_0x41ed07,_0x308bc1,_0x2ab2e3,_0xa41405);},'hxtQG':'invalid-grid-id','RkllR':_0xa78361(0x13f)};let _0x333246;try{!_0x45e25f[_0xa78361(0x108)]&&(logger[_0xa78361(0x109)](_0x45bba8['NXHdL']),process['exit'](0x1));!fs[_0xa78361(0x13d)](_0x45bba8[_0xa78361(0xf2)](getCredentialsPath))&&(logger[_0xa78361(0x109)](_0x45bba8['Kerke']),await _0x45bba8[_0xa78361(0x134)](sendInstrumentationEvent,_0x45e25f,_0x45bba8[_0xa78361(0x118)],messageTypes['ERROR'],_0x45bba8['jufkL'],null,_0x45e25f),process[_0xa78361(0x131)](0x1));logger[_0xa78361(0x121)](_0xa78361(0x125)+_0x45e25f[_0xa78361(0x108)]),await _0x45bba8[_0xa78361(0x134)](sendInstrumentationEvent,_0x45e25f,_0x45bba8['Stgrq'],messageTypes['INFO'],null,null,_0x45e25f);const _0x208396=JSON[_0xa78361(0xf0)](fs['readFileSync'](_0x45bba8[_0xa78361(0x111)](getCredentialsPath)));global_registry[_0xa78361(0x10d)]=_0x208396[_0xa78361(0x127)][_0xa78361(0x13e)],global_registry[_0xa78361(0x135)]=_0x208396[_0xa78361(0x127)][_0xa78361(0x11a)];const _0x3946c2=WS_ENDPOINT[_0xa78361(0x13b)](_0x45bba8[_0xa78361(0xfe)],_0x208396[_0xa78361(0x127)][_0xa78361(0x13e)])['replace'](_0x45bba8[_0xa78361(0x124)],_0x208396['Browserstack'][_0xa78361(0x11a)]),_0x116cd8={};_0x116cd8[_0xa78361(0xef)]=ws,_0x116cd8[_0xa78361(0x130)]=0x36ee80,_0x333246=new ReconnectingWebSocket(_0x3946c2,[],_0x116cd8),logger[_0xa78361(0x102)](_0x45bba8[_0xa78361(0x137)]),webSocketUtils[_0xa78361(0xf8)](_0x333246,_0x45e25f['user'],_0x45e25f[_0xa78361(0x11a)]);const [_0x48c82d,_0x554ceb]=await _0x45bba8[_0xa78361(0xeb)](getGridDetails,_0x208396[_0xa78361(0x127)][_0xa78361(0x13e)],_0x208396[_0xa78361(0x127)][_0xa78361(0x11a)],_0x45e25f[_0xa78361(0x108)]);if(_0x554ceb){const _0x543b27=_0x554ceb[_0xa78361(0x121)];global_registry['cloudProvider']=_0x543b27[_0xa78361(0x110)],global_registry[_0xa78361(0x116)]=_0x543b27[_0xa78361(0x117)],global_registry[_0xa78361(0x107)]=_0x543b27['clusterName'];const _0x19c41e=await _0x45bba8[_0xa78361(0x134)](getCloudProviderObject,_0x543b27[_0xa78361(0x110)],_0x543b27[_0xa78361(0x107)],_0x543b27['name'],_0x333246,webSocketUtils,_0x45e25f),[_0x2b8095,_0x165bc4,_0x169405,_0x467a6,_0x4dae8b,_0x42fd85]=await _0x45bba8[_0xa78361(0x140)](createK8sClient,_0x19c41e,_0x45e25f['skipTlsCertVerify']);await _0x45bba8[_0xa78361(0x140)](scaleDownHubDeployment,_0x165bc4,_0x543b27[_0xa78361(0xfd)]),logger[_0xa78361(0x121)](_0x45bba8['PSpTF']),process[_0xa78361(0x131)](0x0);}_0x45bba8[_0xa78361(0x10b)](_0x48c82d['statusCode'],0x191)&&(logger[_0xa78361(0x109)](_0x45bba8[_0xa78361(0x128)]),await _0x45bba8[_0xa78361(0xfc)](sendInstrumentationEvent,_0x45e25f,_0x45bba8['Stgrq'],messageTypes[_0xa78361(0x138)],_0x45bba8[_0xa78361(0x13c)],null,_0x45e25f),process[_0xa78361(0x131)](0x1)),_0x45bba8[_0xa78361(0x10b)](_0x48c82d['statusCode'],0x190)&&(logger['error'](JSON[_0xa78361(0xf0)](_0x48c82d[_0xa78361(0xee)])[_0xa78361(0x11e)]),await _0x45bba8['Puyuq'](sendInstrumentationEvent,_0x45e25f,_0x45bba8[_0xa78361(0x118)],messageTypes[_0xa78361(0x138)],_0x45bba8['hxtQG'],null,_0x45e25f),process[_0xa78361(0x131)](0x1)),logger[_0xa78361(0x109)](_0xa78361(0x12a)+JSON[_0xa78361(0x112)](_0x48c82d)),await _0x45bba8[_0xa78361(0xfc)](sendInstrumentationEvent,_0x45e25f,_0x45bba8[_0xa78361(0x118)],messageTypes[_0xa78361(0x138)],_0x45bba8[_0xa78361(0x12e)],_0x48c82d,_0x45e25f),process[_0xa78361(0x131)](0x1);}catch(_0x4bad35){const _0x18fcf6=_0xa78361(0xff)+_0x4bad35+'\x20\x0a'+JSON['stringify'](_0x4bad35[_0xa78361(0x132)])+'\x20';logger['error'](_0x18fcf6),process[_0xa78361(0x131)](0x1);}};