function a21_0xe9d6(){const _0x469809=['clusterName','../../utils/utilityMethods','1484mbCHyx','bstackAccesskey','Stopping\x20grid\x20','../../cloudproviders/utils','uDKKH','stringify','addListeners','argv','description','bstackUsername','username','parse','BMPpp','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','ULTUa','stop-grid-called','13443usTKCO','Adding\x20Websocket\x20listeners','Browserstack','gridId','niRUr','3875832kyGjNj','20184JJjKbo','name','wnpiy','NVhpG','handler','region','string','18vGlVEs','../../utils/webSocketUtils','epilogue','message','command','10sBiunM','tFZDz','init-not-called','../../config/logger','builder','ebeDf','stop','unauthorised','ImFgw','gVxyE','user','7218370jzbCtB','statusCode','grid','replace','usage','Uzebb','boolean','info','5020860YRkMTD','options','26855565dePmCv','SHFyJ','116722NTWUZX','nGBRQ','ERROR','server-error','sGShd','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','type','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','GOQyr','hTngm','tyRtU','password','invalid-grid-id','<UsernamePlaceholder>','HadXT','skip-tls-cert-verify','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','error','../../utils/gridComponents','356xgOHuw','INFO','Skip\x20insecure\x20cert\x20verification.','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','KCxis','Stop\x20a\x20running\x20Automation\x20grid.','nGJVK','readFileSync','stack','default','exit','WebSocket','nnLjD','cloudProvider'];a21_0xe9d6=function(){return _0x469809;};return a21_0xe9d6();}const a21_0x365762=a21_0x5f36;(function(_0x4f8efe,_0x35b6ba){const _0x558311=a21_0x5f36,_0x5bb6d2=_0x4f8efe();while(!![]){try{const _0x3bedc0=parseInt(_0x558311(0x1d2))/0x1*(parseInt(_0x558311(0x1e9))/0x2)+parseInt(_0x558311(0x21c))/0x3*(parseInt(_0x558311(0x1fc))/0x4)+parseInt(_0x558311(0x1e5))/0x5+parseInt(_0x558311(0x222))/0x6*(-parseInt(_0x558311(0x20c))/0x7)+parseInt(_0x558311(0x221))/0x8+-parseInt(_0x558311(0x229))/0x9*(-parseInt(_0x558311(0x1dd))/0xa)+-parseInt(_0x558311(0x1e7))/0xb;if(_0x3bedc0===_0x35b6ba)break;else _0x5bb6d2['push'](_0x5bb6d2['shift']());}catch(_0x4e11c3){_0x5bb6d2['push'](_0x5bb6d2['shift']());}}}(a21_0xe9d6,0xb9961));function a21_0x5f36(_0x48e3aa,_0x51343a){const _0xe9d652=a21_0xe9d6();return a21_0x5f36=function(_0x5f36ea,_0x29b0ab){_0x5f36ea=_0x5f36ea-0x1d0;let _0x162979=_0xe9d652[_0x5f36ea];return _0x162979;},a21_0x5f36(_0x48e3aa,_0x51343a);}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require('../../config/constants'),{logger}=require(a21_0x365762(0x1d5)),{getCredentialsPath,getGridDetails}=require(a21_0x365762(0x20b)),{scaleDownHubDeployment}=require(a21_0x365762(0x1fb)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require(a21_0x365762(0x22a)),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require(a21_0x365762(0x20f));exports[a21_0x365762(0x1d1)]=a21_0x365762(0x1df),exports['desc']=a21_0x365762(0x201),exports[a21_0x365762(0x1d6)]=function(_0x274e36){const _0x4c1a73=a21_0x365762,_0x47010d={};_0x47010d['niRUr']=_0x4c1a73(0x1ee),_0x47010d['HadXT']=_0x4c1a73(0x228),_0x47010d['jNNeX']=_0x4c1a73(0x1fe),_0x47010d[_0x4c1a73(0x224)]=_0x4c1a73(0x1e3),_0x47010d[_0x4c1a73(0x218)]='help';const _0x324a4d=_0x47010d,_0x42ffb6={};_0x42ffb6['description']=_0x324a4d[_0x4c1a73(0x220)],_0x42ffb6['type']=_0x324a4d[_0x4c1a73(0x1f7)];const _0x510a14={};_0x510a14[_0x4c1a73(0x214)]=_0x324a4d['jNNeX'],_0x510a14[_0x4c1a73(0x1ef)]=_0x324a4d['wnpiy'],_0x510a14[_0x4c1a73(0x205)]=![];const _0x456758={};return _0x456758['grid-id']=_0x42ffb6,_0x456758[_0x4c1a73(0x1f8)]=_0x510a14,_0x274e36[_0x4c1a73(0x1e1)](HELP_HEADER_MESSAGE[_0x4c1a73(0x1d8)])[_0x4c1a73(0x22b)](HELP_FOOTER_MESSAGE)[_0x4c1a73(0x1e6)](_0x456758)['help'](_0x324a4d[_0x4c1a73(0x218)])[_0x4c1a73(0x213)];},exports[a21_0x365762(0x226)]=async function(_0x441056){const _0x32ae68=a21_0x365762,_0x53cda9={'tFZDz':_0x32ae68(0x1f9),'nGBRQ':function(_0x495bb9){return _0x495bb9();},'ZqbVL':_0x32ae68(0x1f0),'TeRrx':function(_0x1996db,_0x24b7b6,_0x151810,_0x201b39,_0x2de755,_0x264409,_0x4b09fb){return _0x1996db(_0x24b7b6,_0x151810,_0x201b39,_0x2de755,_0x264409,_0x4b09fb);},'NVhpG':_0x32ae68(0x21b),'SHFyJ':_0x32ae68(0x1d4),'gVxyE':function(_0x4a88a9,_0x2c21c0,_0x119b0b,_0x52b8dc,_0x59dbe3,_0xa712cc,_0x131e28){return _0x4a88a9(_0x2c21c0,_0x119b0b,_0x52b8dc,_0x59dbe3,_0xa712cc,_0x131e28);},'hTngm':_0x32ae68(0x1f6),'JZFPh':'<PasswordPlaceholder>','ImFgw':_0x32ae68(0x21d),'nnLjD':function(_0x56f5b9,_0x242b3f,_0x33081a,_0x44fa47){return _0x56f5b9(_0x242b3f,_0x33081a,_0x44fa47);},'KCxis':function(_0x44a44d,_0xb21958,_0x288ab7,_0xf59b5,_0x3a9276,_0x412e98,_0x4d563b){return _0x44a44d(_0xb21958,_0x288ab7,_0xf59b5,_0x3a9276,_0x412e98,_0x4d563b);},'sGShd':function(_0x4b13a9,_0x3b61d6,_0x336109){return _0x4b13a9(_0x3b61d6,_0x336109);},'ebeDf':function(_0x4ff2ad,_0x10b05c,_0x49421e){return _0x4ff2ad(_0x10b05c,_0x49421e);},'tyRtU':'Grid\x20stoppped.','ghiuG':function(_0x1bb2dc,_0x12f5bc){return _0x1bb2dc===_0x12f5bc;},'ULTUa':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','nGJVK':function(_0x28a536,_0x29206f,_0x3fbb55,_0x1ab671,_0x1791fd,_0x5c0cc9,_0x3c8efd){return _0x28a536(_0x29206f,_0x3fbb55,_0x1ab671,_0x1791fd,_0x5c0cc9,_0x3c8efd);},'uDKKH':_0x32ae68(0x1d9),'WCjbj':_0x32ae68(0x1f5),'GOQyr':function(_0x301a9a,_0x531015,_0x33260d,_0x39c108,_0x4f5d0d,_0x193810,_0x367ece){return _0x301a9a(_0x531015,_0x33260d,_0x39c108,_0x4f5d0d,_0x193810,_0x367ece);},'Uzebb':_0x32ae68(0x1ec)};let _0xaf1a9d;try{!_0x441056[_0x32ae68(0x21f)]&&(logger[_0x32ae68(0x1fa)](_0x53cda9[_0x32ae68(0x1d3)]),process[_0x32ae68(0x206)](0x1));!fs['existsSync'](_0x53cda9[_0x32ae68(0x1ea)](getCredentialsPath))&&(logger[_0x32ae68(0x1fa)](_0x53cda9['ZqbVL']),await _0x53cda9['TeRrx'](sendInstrumentationEvent,_0x441056,_0x53cda9['NVhpG'],messageTypes[_0x32ae68(0x1eb)],_0x53cda9[_0x32ae68(0x1e8)],null,_0x441056),process['exit'](0x1));logger[_0x32ae68(0x1e4)](_0x32ae68(0x20e)+_0x441056[_0x32ae68(0x21f)]),await _0x53cda9[_0x32ae68(0x1db)](sendInstrumentationEvent,_0x441056,_0x53cda9[_0x32ae68(0x225)],messageTypes[_0x32ae68(0x1fd)],null,null,_0x441056);const _0xd425bc=JSON[_0x32ae68(0x217)](fs[_0x32ae68(0x203)](_0x53cda9[_0x32ae68(0x1ea)](getCredentialsPath)));global_registry[_0x32ae68(0x215)]=_0xd425bc['Browserstack'][_0x32ae68(0x216)],global_registry[_0x32ae68(0x20d)]=_0xd425bc[_0x32ae68(0x21e)][_0x32ae68(0x1f4)];const _0x868f2=WS_ENDPOINT[_0x32ae68(0x1e0)](_0x53cda9[_0x32ae68(0x1f2)],_0xd425bc[_0x32ae68(0x21e)][_0x32ae68(0x216)])[_0x32ae68(0x1e0)](_0x53cda9['JZFPh'],_0xd425bc[_0x32ae68(0x21e)][_0x32ae68(0x1f4)]),_0x3824ed={};_0x3824ed[_0x32ae68(0x207)]=ws,_0x3824ed['connectionTimeout']=0x36ee80,_0xaf1a9d=new ReconnectingWebSocket(_0x868f2,[],_0x3824ed),logger['debug'](_0x53cda9[_0x32ae68(0x1da)]),webSocketUtils[_0x32ae68(0x212)](_0xaf1a9d,_0x441056[_0x32ae68(0x1dc)],_0x441056[_0x32ae68(0x1f4)]);const [_0x4180ca,_0x18d0e7]=await _0x53cda9[_0x32ae68(0x208)](getGridDetails,_0xd425bc[_0x32ae68(0x21e)][_0x32ae68(0x216)],_0xd425bc[_0x32ae68(0x21e)][_0x32ae68(0x1f4)],_0x441056['gridId']);if(_0x18d0e7){const _0x3d5483=_0x18d0e7[_0x32ae68(0x1e4)];global_registry[_0x32ae68(0x209)]=_0x3d5483[_0x32ae68(0x209)],global_registry['clusterRegion']=_0x3d5483[_0x32ae68(0x227)],global_registry[_0x32ae68(0x20a)]=_0x3d5483['clusterName'];const _0xd6d7f4=await _0x53cda9[_0x32ae68(0x200)](getCloudProviderObject,_0x3d5483[_0x32ae68(0x209)],_0x3d5483['clusterName'],_0x3d5483[_0x32ae68(0x223)],_0xaf1a9d,webSocketUtils,_0x441056),[_0x3cc356,_0x5803cf,_0xf89c31,_0x5da1d0,_0x40e53b,_0x25fb67]=await _0x53cda9[_0x32ae68(0x1ed)](createK8sClient,_0xd6d7f4,_0x441056['skipTlsCertVerify']);await _0x53cda9[_0x32ae68(0x1d7)](scaleDownHubDeployment,_0x5803cf,_0x3d5483[_0x32ae68(0x223)]),logger['info'](_0x53cda9[_0x32ae68(0x1f3)]),process[_0x32ae68(0x206)](0x0);}_0x53cda9['ghiuG'](_0x4180ca[_0x32ae68(0x1de)],0x191)&&(logger['error'](_0x53cda9[_0x32ae68(0x21a)]),await _0x53cda9[_0x32ae68(0x202)](sendInstrumentationEvent,_0x441056,_0x53cda9[_0x32ae68(0x225)],messageTypes[_0x32ae68(0x1eb)],_0x53cda9[_0x32ae68(0x210)],null,_0x441056),process[_0x32ae68(0x206)](0x1)),_0x53cda9['ghiuG'](_0x4180ca[_0x32ae68(0x1de)],0x190)&&(logger[_0x32ae68(0x1fa)](JSON[_0x32ae68(0x217)](_0x4180ca['body'])[_0x32ae68(0x1d0)]),await _0x53cda9['gVxyE'](sendInstrumentationEvent,_0x441056,_0x53cda9['NVhpG'],messageTypes['ERROR'],_0x53cda9['WCjbj'],null,_0x441056),process['exit'](0x1)),logger['error'](_0x32ae68(0x1ff)+JSON[_0x32ae68(0x211)](_0x4180ca)),await _0x53cda9[_0x32ae68(0x1f1)](sendInstrumentationEvent,_0x441056,_0x53cda9[_0x32ae68(0x225)],messageTypes[_0x32ae68(0x1eb)],_0x53cda9[_0x32ae68(0x1e2)],_0x4180ca,_0x441056),process[_0x32ae68(0x206)](0x1);}catch(_0xbe5a76){const _0x383d0b=_0x32ae68(0x219)+_0xbe5a76+'\x20\x0a'+JSON[_0x32ae68(0x211)](_0xbe5a76[_0x32ae68(0x204)])+'\x20';logger[_0x32ae68(0x1fa)](_0x383d0b),process[_0x32ae68(0x206)](0x1);}};