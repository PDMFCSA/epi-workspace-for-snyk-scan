const a21_0x5def7c=a21_0x37de;(function(_0x986254,_0x26031d){const _0x3369f0=a21_0x37de,_0x8fabee=_0x986254();while(!![]){try{const _0xe0524b=-parseInt(_0x3369f0(0xb2))/0x1*(parseInt(_0x3369f0(0x9e))/0x2)+-parseInt(_0x3369f0(0x9c))/0x3+parseInt(_0x3369f0(0xe2))/0x4*(-parseInt(_0x3369f0(0xd8))/0x5)+-parseInt(_0x3369f0(0xc4))/0x6+-parseInt(_0x3369f0(0xef))/0x7+-parseInt(_0x3369f0(0xee))/0x8*(-parseInt(_0x3369f0(0xbc))/0x9)+parseInt(_0x3369f0(0x9d))/0xa;if(_0xe0524b===_0x26031d)break;else _0x8fabee['push'](_0x8fabee['shift']());}catch(_0x3ce6fd){_0x8fabee['push'](_0x8fabee['shift']());}}}(a21_0x4a5c,0x8108c));function a21_0x4a5c(){const _0x5046cf=['bstackAccesskey','dchqE','skipTlsCertVerify','../../utils/webSocketUtils','region','ruBrn','OyNkh','rApqA','invalid-grid-id','4keJtHk','szDzd','command','utlVi','default','clusterName','readFileSync','FnxyO','hcuEw','yEtEE','debug','stop','56CUQnEF','7280588YEfrvy','info','../../config/logger','NFPGy','SfGKS','fqQXX','THaLi','RyTEx','message','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','JrKWQ','Grid\x20stoppped.','FBqVi','epilogue','name','JGmPN','owDFd','NecXS','../../utils/instrumentationUtils','980925hFaVjv','16792680aAQctQ','2hYXkxW','YrNaA','desc','Xezkc','statusCode','DmJXW','skip-tls-cert-verify','body','bstackUsername','cloudProvider','password','grid','../../utils/gridComponents','Stop\x20a\x20running\x20Automation\x20grid.','replace','user','string','handler','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','clusterRegion','108347SJkAua','Browserstack','description','MFbLZ','Skip\x20insecure\x20cert\x20verification.','EkxKt','type','exit','INFO','boolean','934452ZtdcUR','<PasswordPlaceholder>','LeVGJ','username','MvEYo','pzbQH','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','reconnecting-websocket','1703598lAksFG','gridId','options','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','Adding\x20Websocket\x20listeners','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','parse','../../utils/utilityMethods','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','Stopping\x20grid\x20','server-error','addListeners','init-not-called','error','help','stack','ERROR','builder','argv','stringify','591005StuJWo'];a21_0x4a5c=function(){return _0x5046cf;};return a21_0x4a5c();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a21_0x5def7c(0xc3)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require('../../config/constants'),{logger}=require(a21_0x5def7c(0xf1)),{getCredentialsPath,getGridDetails}=require(a21_0x5def7c(0xcb)),{scaleDownHubDeployment}=require(a21_0x5def7c(0xaa)),{sendInstrumentationEvent}=require(a21_0x5def7c(0x9b)),webSocketUtils=require(a21_0x5def7c(0xdc)),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require('../../cloudproviders/utils');function a21_0x37de(_0x295a72,_0x345985){const _0x4a5c0b=a21_0x4a5c();return a21_0x37de=function(_0x37dec2,_0x4148d5){_0x37dec2=_0x37dec2-0x96;let _0x32d629=_0x4a5c0b[_0x37dec2];return _0x32d629;},a21_0x37de(_0x295a72,_0x345985);}exports[a21_0x5def7c(0xe4)]=a21_0x5def7c(0xa9),exports[a21_0x5def7c(0xa0)]=a21_0x5def7c(0xab),exports[a21_0x5def7c(0xd5)]=function(_0x295e0e){const _0x346719=a21_0x5def7c,_0x5f1004={};_0x5f1004['THaLi']=_0x346719(0xc2),_0x5f1004[_0x346719(0xc0)]=_0x346719(0xae),_0x5f1004['fqQXX']=_0x346719(0xb6),_0x5f1004[_0x346719(0x9a)]=_0x346719(0xbb),_0x5f1004[_0x346719(0xde)]=_0x346719(0xd2);const _0x1234ac=_0x5f1004,_0x1694a0={};_0x1694a0[_0x346719(0xb4)]=_0x1234ac[_0x346719(0xf5)],_0x1694a0['type']=_0x1234ac[_0x346719(0xc0)];const _0x1ce8a3={};_0x1ce8a3['description']=_0x1234ac[_0x346719(0xf4)],_0x1ce8a3[_0x346719(0xb8)]=_0x1234ac[_0x346719(0x9a)],_0x1ce8a3[_0x346719(0xe6)]=![];const _0x1b5796={};return _0x1b5796['grid-id']=_0x1694a0,_0x1b5796[_0x346719(0xa4)]=_0x1ce8a3,_0x295e0e['usage'](HELP_HEADER_MESSAGE[_0x346719(0xed)])[_0x346719(0x96)](HELP_FOOTER_MESSAGE)[_0x346719(0xc6)](_0x1b5796)['help'](_0x1234ac[_0x346719(0xde)])[_0x346719(0xd6)];},exports[a21_0x5def7c(0xaf)]=async function(_0x4fea8d){const _0x402ba4=a21_0x5def7c,_0x7b5209={'yEtEE':_0x402ba4(0xcc),'owDFd':function(_0x8fdc2f){return _0x8fdc2f();},'LeVGJ':_0x402ba4(0xb0),'pzbQH':function(_0x48d524,_0x426397,_0x19be1c,_0x45b56d,_0x34bf0b,_0x2becd8,_0xf329bc){return _0x48d524(_0x426397,_0x19be1c,_0x45b56d,_0x34bf0b,_0x2becd8,_0xf329bc);},'DmJXW':'stop-grid-called','YrNaA':_0x402ba4(0xd0),'SfGKS':function(_0x2a0833){return _0x2a0833();},'EkxKt':'<UsernamePlaceholder>','dchqE':_0x402ba4(0xbd),'szDzd':_0x402ba4(0xc8),'CAdSr':function(_0x38ddcb,_0x47d1a0,_0x8643c5,_0xd531a5){return _0x38ddcb(_0x47d1a0,_0x8643c5,_0xd531a5);},'JrKWQ':function(_0x3603a8,_0x275f55,_0x5bd69a){return _0x3603a8(_0x275f55,_0x5bd69a);},'utlVi':function(_0x1ac772,_0x41bc8e,_0x2add4e){return _0x1ac772(_0x41bc8e,_0x2add4e);},'FnxyO':_0x402ba4(0xfa),'Xezkc':function(_0x36072c,_0x133e9b){return _0x36072c===_0x133e9b;},'OyNkh':_0x402ba4(0xf8),'hcuEw':function(_0x105423,_0x550e8b,_0x1db705,_0x1b8c25,_0x47f517,_0x4698b9,_0x13da36){return _0x105423(_0x550e8b,_0x1db705,_0x1b8c25,_0x47f517,_0x4698b9,_0x13da36);},'JGmPN':'unauthorised','RyTEx':function(_0x48f912,_0x2e175){return _0x48f912===_0x2e175;},'FBqVi':function(_0x579a9b,_0x5b1fa2,_0x2b88ba,_0x46f7a1,_0x25313f,_0x259ac5,_0x4bbb5c){return _0x579a9b(_0x5b1fa2,_0x2b88ba,_0x46f7a1,_0x25313f,_0x259ac5,_0x4bbb5c);},'rApqA':_0x402ba4(0xe1),'MFbLZ':function(_0x122523,_0x34c29b,_0x3c72c2,_0x3482f9,_0x49114d,_0x5cac64,_0x707369){return _0x122523(_0x34c29b,_0x3c72c2,_0x3482f9,_0x49114d,_0x5cac64,_0x707369);},'NFPGy':_0x402ba4(0xce)};let _0x1b2192;try{!_0x4fea8d[_0x402ba4(0xc5)]&&(logger[_0x402ba4(0xd1)](_0x7b5209[_0x402ba4(0xeb)]),process[_0x402ba4(0xb9)](0x1));!fs['existsSync'](_0x7b5209[_0x402ba4(0x99)](getCredentialsPath))&&(logger[_0x402ba4(0xd1)](_0x7b5209[_0x402ba4(0xbe)]),await _0x7b5209['pzbQH'](sendInstrumentationEvent,_0x4fea8d,_0x7b5209['DmJXW'],messageTypes[_0x402ba4(0xd4)],_0x7b5209[_0x402ba4(0x9f)],null,_0x4fea8d),process['exit'](0x1));logger[_0x402ba4(0xf0)](_0x402ba4(0xcd)+_0x4fea8d[_0x402ba4(0xc5)]),await _0x7b5209['pzbQH'](sendInstrumentationEvent,_0x4fea8d,_0x7b5209['DmJXW'],messageTypes[_0x402ba4(0xba)],null,null,_0x4fea8d);const _0x5162ae=JSON['parse'](fs[_0x402ba4(0xe8)](_0x7b5209[_0x402ba4(0xf3)](getCredentialsPath)));global_registry[_0x402ba4(0xa6)]=_0x5162ae[_0x402ba4(0xb3)][_0x402ba4(0xbf)],global_registry[_0x402ba4(0xd9)]=_0x5162ae['Browserstack']['password'];const _0x4e985e=WS_ENDPOINT[_0x402ba4(0xac)](_0x7b5209[_0x402ba4(0xb7)],_0x5162ae[_0x402ba4(0xb3)]['username'])[_0x402ba4(0xac)](_0x7b5209[_0x402ba4(0xda)],_0x5162ae['Browserstack'][_0x402ba4(0xa8)]),_0x35b941={};_0x35b941['WebSocket']=ws,_0x35b941['connectionTimeout']=0x36ee80,_0x1b2192=new ReconnectingWebSocket(_0x4e985e,[],_0x35b941),logger[_0x402ba4(0xec)](_0x7b5209[_0x402ba4(0xe3)]),webSocketUtils[_0x402ba4(0xcf)](_0x1b2192,_0x4fea8d[_0x402ba4(0xad)],_0x4fea8d[_0x402ba4(0xa8)]);const [_0x46a49b,_0x34d1af]=await _0x7b5209['CAdSr'](getGridDetails,_0x5162ae[_0x402ba4(0xb3)][_0x402ba4(0xbf)],_0x5162ae[_0x402ba4(0xb3)][_0x402ba4(0xa8)],_0x4fea8d[_0x402ba4(0xc5)]);if(_0x34d1af){const _0x5114a3=_0x34d1af['info'];global_registry[_0x402ba4(0xa7)]=_0x5114a3[_0x402ba4(0xa7)],global_registry[_0x402ba4(0xb1)]=_0x5114a3[_0x402ba4(0xdd)],global_registry[_0x402ba4(0xe7)]=_0x5114a3['clusterName'];const _0x142093=await _0x7b5209[_0x402ba4(0xc1)](getCloudProviderObject,_0x5114a3[_0x402ba4(0xa7)],_0x5114a3[_0x402ba4(0xe7)],_0x5114a3[_0x402ba4(0x97)],_0x1b2192,webSocketUtils,_0x4fea8d),[_0x2edce6,_0x3b633f,_0x39eb8a,_0x7de074,_0x3698eb,_0x128616]=await _0x7b5209[_0x402ba4(0xf9)](createK8sClient,_0x142093,_0x4fea8d[_0x402ba4(0xdb)]);await _0x7b5209[_0x402ba4(0xe5)](scaleDownHubDeployment,_0x3b633f,_0x5114a3[_0x402ba4(0x97)]),logger[_0x402ba4(0xf0)](_0x7b5209[_0x402ba4(0xe9)]),process[_0x402ba4(0xb9)](0x0);}_0x7b5209[_0x402ba4(0xa1)](_0x46a49b[_0x402ba4(0xa2)],0x191)&&(logger[_0x402ba4(0xd1)](_0x7b5209[_0x402ba4(0xdf)]),await _0x7b5209[_0x402ba4(0xea)](sendInstrumentationEvent,_0x4fea8d,_0x7b5209[_0x402ba4(0xa3)],messageTypes[_0x402ba4(0xd4)],_0x7b5209[_0x402ba4(0x98)],null,_0x4fea8d),process[_0x402ba4(0xb9)](0x1)),_0x7b5209[_0x402ba4(0xf6)](_0x46a49b[_0x402ba4(0xa2)],0x190)&&(logger['error'](JSON[_0x402ba4(0xca)](_0x46a49b[_0x402ba4(0xa5)])[_0x402ba4(0xf7)]),await _0x7b5209[_0x402ba4(0xfb)](sendInstrumentationEvent,_0x4fea8d,_0x7b5209[_0x402ba4(0xa3)],messageTypes[_0x402ba4(0xd4)],_0x7b5209[_0x402ba4(0xe0)],null,_0x4fea8d),process[_0x402ba4(0xb9)](0x1)),logger[_0x402ba4(0xd1)](_0x402ba4(0xc9)+JSON[_0x402ba4(0xd7)](_0x46a49b)),await _0x7b5209[_0x402ba4(0xb5)](sendInstrumentationEvent,_0x4fea8d,_0x7b5209[_0x402ba4(0xa3)],messageTypes[_0x402ba4(0xd4)],_0x7b5209[_0x402ba4(0xf2)],_0x46a49b,_0x4fea8d),process[_0x402ba4(0xb9)](0x1);}catch(_0x39c3f9){const _0x3c8176=_0x402ba4(0xc7)+_0x39c3f9+'\x20\x0a'+JSON[_0x402ba4(0xd7)](_0x39c3f9[_0x402ba4(0xd3)])+'\x20';logger[_0x402ba4(0xd1)](_0x3c8176),process['exit'](0x1);}};