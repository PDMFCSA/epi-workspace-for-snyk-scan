const a12_0x46b6f4=a12_0x3f61;function a12_0x3f61(_0x1b9e40,_0x17e97b){const _0x470825=a12_0x4708();return a12_0x3f61=function(_0x3f6122,_0x20c7e0){_0x3f6122=_0x3f6122-0xa4;let _0x2afe13=_0x470825[_0x3f6122];return _0x2afe13;},a12_0x3f61(_0x1b9e40,_0x17e97b);}(function(_0x4d121f,_0x40d2fd){const _0xa16cf7=a12_0x3f61,_0x300c8b=_0x4d121f();while(!![]){try{const _0x46bb67=parseInt(_0xa16cf7(0xf9))/0x1+-parseInt(_0xa16cf7(0x10d))/0x2+-parseInt(_0xa16cf7(0x109))/0x3*(-parseInt(_0xa16cf7(0xdc))/0x4)+parseInt(_0xa16cf7(0xac))/0x5*(-parseInt(_0xa16cf7(0xf0))/0x6)+-parseInt(_0xa16cf7(0xec))/0x7*(parseInt(_0xa16cf7(0xd3))/0x8)+-parseInt(_0xa16cf7(0xf8))/0x9+-parseInt(_0xa16cf7(0xbe))/0xa*(-parseInt(_0xa16cf7(0x106))/0xb);if(_0x46bb67===_0x40d2fd)break;else _0x300c8b['push'](_0x300c8b['shift']());}catch(_0x5bd5ff){_0x300c8b['push'](_0x300c8b['shift']());}}}(a12_0x4708,0x884e4));const fs=require('fs'),util=require(a12_0x46b6f4(0x10e)),got=require('got'),{v4:uuidv4}=require(a12_0x46b6f4(0x105)),{logger}=require(a12_0x46b6f4(0xbc)),{inputBstackKeys}=require('../utils/userInput'),{BS_API_URL,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,global_registry,messageTypes}=require(a12_0x46b6f4(0xd0)),{getDirForConfig,getCredentialsPath,getAuthHeader}=require('../utils/utilityMethods'),{sendInstrumentationEvent}=require(a12_0x46b6f4(0xcc));exports[a12_0x46b6f4(0xa4)]='init',exports[a12_0x46b6f4(0xad)]=a12_0x46b6f4(0xd4),exports[a12_0x46b6f4(0xee)]=function(_0x5c3591){const _0x941d59=a12_0x46b6f4,_0x3866ef={};_0x3866ef['ZBHGs']='Use\x20username\x20to\x20configure\x20the\x20CLI\x20for\x20future\x20actions.',_0x3866ef[_0x941d59(0xe6)]=_0x941d59(0xd2),_0x3866ef[_0x941d59(0xdf)]=_0x941d59(0x10f),_0x3866ef[_0x941d59(0xe0)]=_0x941d59(0xe1);const _0x5b24b2=_0x3866ef,_0x141363={};_0x141363[_0x941d59(0xf3)]=_0x5b24b2[_0x941d59(0xa6)],_0x141363[_0x941d59(0xe4)]=_0x5b24b2[_0x941d59(0xe6)];const _0x40eb6a={};_0x40eb6a[_0x941d59(0xf3)]=_0x5b24b2[_0x941d59(0xdf)],_0x40eb6a[_0x941d59(0xe4)]=_0x5b24b2['lOBOl'];const _0x386fa2={};return _0x386fa2['bstack-username']=_0x141363,_0x386fa2[_0x941d59(0xb2)]=_0x40eb6a,_0x5c3591[_0x941d59(0xe9)](HELP_HEADER_MESSAGE[_0x941d59(0xb7)])['epilogue'](HELP_FOOTER_MESSAGE)[_0x941d59(0xd6)](_0x386fa2)['recommendCommands']()[_0x941d59(0xb3)]()['help'](_0x5b24b2[_0x941d59(0xe0)])[_0x941d59(0xce)];},exports['handler']=async function(_0x481104){const _0x233aad=a12_0x46b6f4,_0x3a0507={'ltvMQ':function(_0x4fa953){return _0x4fa953();},'oxFfs':'utf-8','dplJs':_0x233aad(0x107),'OFSAw':'string','maKPU':_0x233aad(0x10f),'MBAZW':_0x233aad(0xe1),'gKlbH':function(_0x2409e8,_0x5ad95f,_0x5e06aa,_0x4747bd,_0x32710e,_0x5e42af,_0xac0299){return _0x2409e8(_0x5ad95f,_0x5e06aa,_0x4747bd,_0x32710e,_0x5e42af,_0xac0299);},'OkSyz':_0x233aad(0xdd),'TKDxS':function(_0x1f019d){return _0x1f019d();},'GwUlT':function(_0x515ab7,_0x277f85){return _0x515ab7===_0x277f85;},'NgOov':_0x233aad(0x103),'BlfoL':function(_0x5dc800,_0xd77618){return _0x5dc800!==_0xd77618;},'vQDCc':_0x233aad(0xf4),'ayWZX':_0x233aad(0xc4),'iJZjx':'vpNlm','LdcEB':_0x233aad(0xd7),'pnzIT':_0x233aad(0xb1),'qlIZg':function(_0x39c495,_0x650503){return _0x39c495!==_0x650503;},'fviYY':'QbmgO','LXmPF':_0x233aad(0xf2),'PbaYv':function(_0x2cee8b,_0x186b92){return _0x2cee8b===_0x186b92;},'QBTcN':_0x233aad(0xc2),'YIxTK':_0x233aad(0x10c),'bULcr':function(_0x52a088){return _0x52a088();},'VdKBs':_0x233aad(0xe7),'JPhrr':function(_0x118b2d,_0x450a28,_0x5383af){return _0x118b2d(_0x450a28,_0x5383af);},'cyktO':function(_0x1b34ca,_0x174b5a){return _0x1b34ca===_0x174b5a;},'SJCtB':function(_0x3d42ce,_0x3c6655){return _0x3d42ce===_0x3c6655;},'kAUnL':_0x233aad(0xfa),'xTAKN':'xpzcW','aJcss':function(_0x503648,_0x1d11e9){return _0x503648===_0x1d11e9;},'NFiRi':_0x233aad(0xdb),'GQmGh':function(_0x39cee0){return _0x39cee0();},'nIjLt':function(_0x40edac,_0x216e26){return _0x40edac===_0x216e26;},'MRJoA':_0x233aad(0xbd),'EIODm':_0x233aad(0x111),'lXjlH':function(_0x57844a,_0x43c598,_0x50b8b9,_0x471d51,_0x348f20,_0x4cf638,_0x619b99){return _0x57844a(_0x43c598,_0x50b8b9,_0x471d51,_0x348f20,_0x4cf638,_0x619b99);},'qqsQn':'wrong-creds','uQwvZ':function(_0x3c35fc,_0x5cd95d,_0x39ceaa,_0x5f2e68,_0x31d016,_0x2adefc,_0x39029e){return _0x3c35fc(_0x5cd95d,_0x39ceaa,_0x5f2e68,_0x31d016,_0x2adefc,_0x39029e);},'prkLa':_0x233aad(0xa8)};try{global_registry['requestId']=_0x3a0507[_0x233aad(0xbf)](uuidv4),_0x3a0507[_0x233aad(0xd1)](sendInstrumentationEvent,_0x481104,_0x3a0507[_0x233aad(0xe5)],messageTypes[_0x233aad(0xae)],null,null,_0x481104);const _0x5e5e1a=_0x3a0507[_0x233aad(0xfe)](getDirForConfig);!fs[_0x233aad(0xcf)](_0x5e5e1a)&&(_0x3a0507[_0x233aad(0xeb)](_0x3a0507['NgOov'],_0x3a0507[_0x233aad(0xfd)])?fs[_0x233aad(0xb9)](_0x5e5e1a):_0x5a28e9=_0xfe461b[_0x233aad(0xb6)]);let _0x3879a,_0xd7560;process[_0x233aad(0xaf)][_0x233aad(0x100)]&&(_0x3a0507[_0x233aad(0xe8)](_0x3a0507['vQDCc'],_0x3a0507[_0x233aad(0xa5)])?_0x2e37ef=_0x1f9a10['env'][_0x233aad(0xc7)]:_0x3879a=process['env'][_0x233aad(0x100)]);if(process[_0x233aad(0xaf)][_0x233aad(0xc7)]){if(_0x3a0507[_0x233aad(0xe8)](_0x3a0507[_0x233aad(0xc0)],_0x3a0507[_0x233aad(0xc5)]))_0xd7560=process[_0x233aad(0xaf)]['BROWSERSTACK_ACCESS_KEY'];else{let _0x330a6b={};const _0x59ed8c=_0x3a0507[_0x233aad(0xbf)](_0x1e67d4);_0x1f19bf[_0x233aad(0xcf)](_0x59ed8c)&&(_0x330a6b=_0x288826[_0x233aad(0xab)](_0x21c928['readFileSync'](_0x59ed8c,_0x3a0507[_0x233aad(0x110)])));const _0x3bb1e9={};_0x3bb1e9[_0x233aad(0xb4)]=_0x79dad6,_0x3bb1e9[_0x233aad(0xde)]=_0x141b38,_0x330a6b[_0x233aad(0xd5)]=_0x3bb1e9,_0x1b6bc5[_0x233aad(0x102)](_0x59ed8c,_0x725de9['stringify'](_0x330a6b)),_0x444015[_0x233aad(0xcb)](0x0);}}_0x481104[_0x233aad(0xc6)]&&(_0x3a0507[_0x233aad(0xe8)](_0x3a0507[_0x233aad(0xbb)],_0x3a0507[_0x233aad(0xfc)])?_0x3879a=_0x481104[_0x233aad(0xc6)]:_0x3afc16[_0x233aad(0xb9)](_0x3f164e));_0x481104[_0x233aad(0xb6)]&&(_0x3a0507['qlIZg'](_0x3a0507[_0x233aad(0xb0)],_0x3a0507[_0x233aad(0xc1)])?_0xd7560=_0x481104[_0x233aad(0xb6)]:_0x23e9ee=_0x42dd50[_0x233aad(0xc6)]);if(_0x3a0507[_0x233aad(0xeb)](_0x3879a,undefined)||_0x3a0507[_0x233aad(0xea)](_0xd7560,undefined)){if(_0x3a0507[_0x233aad(0xf1)](_0x3a0507[_0x233aad(0x101)],_0x3a0507[_0x233aad(0x101)]))_0x3fd625=_0x5cd0fc[_0x233aad(0xaf)]['BROWSERSTACK_USERNAME'];else{logger['debug'](_0x3a0507[_0x233aad(0xff)]);const [_0x2fb054,_0x54fb35]=await _0x3a0507[_0x233aad(0xcd)](inputBstackKeys);_0x3879a=_0x2fb054,_0xd7560=_0x54fb35;}}let _0x502ffd=![];const _0x5eb0fe='https://'+_0x3879a+':'+_0xd7560+'@'+BS_API_URL+_0x233aad(0x108),_0x354dd4={'method':_0x3a0507['VdKBs'],'headers':_0x3a0507[_0x233aad(0xd9)](getAuthHeader,_0x3879a,_0xd7560),'throwHttpErrors':![]},_0x13c2ed=await _0x3a0507[_0x233aad(0xd9)](got,_0x5eb0fe,_0x354dd4);if(_0x3a0507[_0x233aad(0xe8)](_0x13c2ed,null)&&_0x3a0507['BlfoL'](_0x13c2ed,undefined)&&_0x3a0507[_0x233aad(0xf5)](_0x13c2ed[_0x233aad(0xc8)],0xc8)){if(_0x3a0507['SJCtB'](_0x3a0507[_0x233aad(0xf6)],_0x3a0507[_0x233aad(0xda)])){const _0x11e2e5={};_0x11e2e5['description']=_0x3a0507[_0x233aad(0xa7)],_0x11e2e5[_0x233aad(0xe4)]=_0x3a0507[_0x233aad(0x112)];const _0x274809={};_0x274809[_0x233aad(0xf3)]=_0x3a0507[_0x233aad(0xa9)],_0x274809[_0x233aad(0xe4)]=_0x3a0507['OFSAw'];const _0x5eb7c0={};return _0x5eb7c0[_0x233aad(0xba)]=_0x11e2e5,_0x5eb7c0['bstack-accesskey']=_0x274809,_0x126c95[_0x233aad(0xe9)](_0xefe53e[_0x233aad(0xb7)])[_0x233aad(0xca)](_0x4169c6)['options'](_0x5eb7c0)[_0x233aad(0xd8)]()[_0x233aad(0xb3)]()['help'](_0x3a0507[_0x233aad(0xf7)])[_0x233aad(0xce)];}else _0x502ffd=!![];}if(_0x502ffd){if(_0x3a0507[_0x233aad(0xaa)](_0x3a0507[_0x233aad(0xc9)],_0x3a0507[_0x233aad(0xc9)])){let _0x1b97cc={};const _0x16cc81=_0x3a0507[_0x233aad(0xc3)](getCredentialsPath);fs[_0x233aad(0xcf)](_0x16cc81)&&(_0x3a0507['nIjLt'](_0x3a0507[_0x233aad(0xfb)],_0x3a0507[_0x233aad(0xfb)])?_0x1b97cc=JSON[_0x233aad(0xab)](fs[_0x233aad(0x10a)](_0x16cc81,_0x3a0507[_0x233aad(0x110)])):_0x5564f2=_0x5bcf88[_0x233aad(0xab)](_0x3ba060[_0x233aad(0x10a)](_0x109bc5,_0x3a0507[_0x233aad(0x110)])));const _0x36b028={};_0x36b028[_0x233aad(0xb4)]=_0x3879a,_0x36b028[_0x233aad(0xde)]=_0xd7560,_0x1b97cc['Browserstack']=_0x36b028,fs[_0x233aad(0x102)](_0x16cc81,JSON[_0x233aad(0xb5)](_0x1b97cc)),process[_0x233aad(0xcb)](0x0);}else _0x54058b=!![];}else logger[_0x233aad(0xed)](_0x3a0507[_0x233aad(0xb8)]),await _0x3a0507[_0x233aad(0xe3)](sendInstrumentationEvent,_0x481104,_0x3a0507[_0x233aad(0xe5)],messageTypes[_0x233aad(0x10b)],_0x3a0507[_0x233aad(0x104)],null,_0x481104),process[_0x233aad(0xcb)](0x1);}catch(_0x272a21){logger[_0x233aad(0xed)](_0x272a21[_0x233aad(0xef)]),await _0x3a0507['uQwvZ'](sendInstrumentationEvent,_0x481104,_0x3a0507[_0x233aad(0xe5)],messageTypes['ERROR'],_0x3a0507[_0x233aad(0xe2)],_0x272a21,_0x481104),process[_0x233aad(0xcb)](0x1);}};function a12_0x4708(){const _0x40e436=['mkdirSync','bstack-username','LdcEB','../config/logger','zNAfK','3078820BjYjPR','ltvMQ','ayWZX','LXmPF','xwRDh','GQmGh','rKwYW','iJZjx','bstackUsername','BROWSERSTACK_ACCESS_KEY','statusCode','NFiRi','epilogue','exit','../utils/instrumentationUtils','bULcr','argv','existsSync','../config/constants','gKlbH','string','2611736DjNFgn','Initialise\x20the\x20BrowserStack\x20CLI\x20with\x20appropriate\x20credentials.','Browserstack','options','uigve','recommendCommands','JPhrr','xTAKN','inyKx','7284fvSqUc','init-called','password','RDIBh','wXyZq','help','prkLa','lXjlH','type','OkSyz','lOBOl','GET','BlfoL','usage','PbaYv','GwUlT','14dXjIhD','error','builder','stack','56226SktFTb','qlIZg','nQXVo','description','PxvsE','cyktO','kAUnL','MBAZW','9461340gRnRXb','633441Rtdhnw','nxuxP','MRJoA','pnzIT','NgOov','TKDxS','YIxTK','BROWSERSTACK_USERNAME','QBTcN','writeFileSync','RigCx','qqsQn','uuid','66DARItH','Use\x20username\x20to\x20configure\x20the\x20CLI\x20for\x20future\x20actions.','/automate/plan.json','57UylYzy','readFileSync','ERROR','BrowserStack\x20username\x20and\x20password\x20neither\x20passed\x20in\x20command\x20line\x20arguments\x20nor\x20set\x20as\x20environment\x20variables.\x20Raising\x20a\x20prompt\x20to\x20get\x20the\x20details.','486918UBEacE','util','Use\x20corresponding\x20access-key\x20to\x20configure\x20the\x20CLI\x20for\x20future\x20actions.','oxFfs','Wrong\x20credentials\x20passed.\x20Please\x20try\x20again\x20with\x20correct\x20credentials!','OFSAw','command','vQDCc','ZBHGs','dplJs','unknown-error','maKPU','aJcss','parse','5BpSrew','desc','INFO','env','fviYY','KVTjR','bstack-accesskey','strict','username','stringify','bstackAccesskey','init','EIODm'];a12_0x4708=function(){return _0x40e436;};return a12_0x4708();}