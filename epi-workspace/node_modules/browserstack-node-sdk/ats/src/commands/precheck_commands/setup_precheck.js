const a17_0xb33bcf=a17_0x5287;(function(_0x211dbe,_0x1221c4){const _0x57f85a=a17_0x5287,_0x3e3a3f=_0x211dbe();while(!![]){try{const _0x5bb58a=parseInt(_0x57f85a(0x1d9))/0x1*(parseInt(_0x57f85a(0x212))/0x2)+parseInt(_0x57f85a(0x145))/0x3*(parseInt(_0x57f85a(0x1ff))/0x4)+parseInt(_0x57f85a(0x1b6))/0x5*(-parseInt(_0x57f85a(0x1f9))/0x6)+-parseInt(_0x57f85a(0x21b))/0x7+parseInt(_0x57f85a(0x20a))/0x8+parseInt(_0x57f85a(0x1a1))/0x9+-parseInt(_0x57f85a(0x1c3))/0xa;if(_0x5bb58a===_0x1221c4)break;else _0x3e3a3f['push'](_0x3e3a3f['shift']());}catch(_0x291c6e){_0x3e3a3f['push'](_0x3e3a3f['shift']());}}}(a17_0x2624,0x9400d));function a17_0x2624(){const _0x513cfd=['mffKy','getUTCHours','type','rQpmg','isTrialGridAccessible','rNHXj','FaHfJ','===\x20Precheck\x20Report\x20-\x20','zPVHz','../../config/constants','bstackUsername','.txt','INFO','error','unable\x20to\x20verify\x20if\x20cluster\x20`','SIDlU','XAFBY','FWPTK','cloudProvider','command','gridProfile','Cluster\x20','log/report_','PcCxZ','getUTCDate','phjcm','fxJFl','clusterRegion','iZWIE','init','PPpXJ','Report\x20saved\x20in\x20','../../config/logger','header','Pass\x20the\x20name\x20of\x20cloud\x20provider\x20for\x20existing\x20Kubernetes\x20Cluster.','delay','2033820huDqBT','LOG','CETNB','ezmZj','vzSNB','<UsernamePlaceholder>','EMXri','Failure','bvPYJ','TFvYW','cluster-check-failed-','push','onatM','dummy-grid','CPfxF','SrxQb','NRxMR','<PasswordPlaceholder>','accessResp','isClusterPresent',']\x20status\x20:\x20','390035jydZGO','name','error\x20stack\x20:\x20','MBMQZ','status','uyLUu','Message:\x20','argv','ZwNMU','xBcLU','\x20data\x20:\x20','TsBFL','clusterName','2888800zFXbFS','replace','method','stringify','length','TrOqd','\x20\x20Message:\x20','checkAccess','\x20error\x20:\x20','`\x20already\x20exists','yIKgm','ttTPT','DYuhy','uuid','debug','cluster-name','WebSocket','Success','riUjR','BsxBI','authHeader','wzppT','709603fOlNJM','Browserstack','KmhDO','username','Fsnkq','KwtBG','sxmJT','nADcy','szeVS','oGPqO','string','qVKjf','grid-profile','gidKO','parse','../../utils/webSocketUtils','Check\x20the\x20pre-requisites\x20needed\x20for\x20Automation\x20grid\x20setup','writeFileSync','HFIII','pre_check','WyLHd','vqSvd','KVKQr','RHaVP','will\x20be\x20created','HBpDq','Cluster\x20`','description','Gwmml','Create\x20a\x20grid\x20in\x20existing\x20Kubernetes\x20Cluster\x20on\x20AWS/Azure/GCP.','data','idsSO','12ySsHmT','Invalid\x20input.\x20Currently\x20the\x20automation\x20grid\x20in\x20AWS,\x20AZURE\x20&\x20GCP\x20cloud\x20provider\x20is\x20supported\x20using\x20CLI.','wrKfz','cupjW','ADtIX','dtxxi','4rTmaCX','nLsYt','Failed\x20in\x20pre-check!\x20Error:\x20','nRFXB','cqFCc','riMRJ','dJqio','Bwdsc','XtBmW','region','PXoPF','7717960VekfqI','credential-not-found','help','grid','VzcMT','response','hDQRv','pre-check-failed','2OhonuS','ugSKJ','NVaOi','TLSv1_2_client_method','epilogue','usage','ABQmG','aCYFK','join','8051064GLmXKa','PGjIs','existsSync','info','Oughq','reconnecting-websocket','pre-check-grid-profile-empty','CMegP','pre-check','cloud-provider-not-supported','OVcPc','\x20details\x20cannot\x20be\x20fetched\x0a\x0a','eequF','YCIhp','MlCWE','bowHO','find','\x20\x20Code:\x20','body','pre-check-cluster-args-not-passed','MFouL','Khvep','pre-check-grid-called','is\x20already\x20present','vBoZZ','FmGma','FMLSe','LGPJj','`\x20,error\x20:\x20','XwBiQ','limPr','hTmlU','CLOUD_PROVIDER','SSL\x20Configured','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','Status:\x20','XmuOI','mRAwO','../../utils/utilityMethods','iRqcQ','message','YohRU','Error\x20Details:\x0a','Missing\x20required\x20arguments:\x20','requestId','exit','getUTCMonth','Tbnze','902817RGulNd','Grid\x20profile\x20fetched\x20for\x20pre-check','EldDf','TGwBb','SuJAy','nxpFc','IBeWz','rqBTz','Zpwzx','/packages/cli/get-all-grid-profiles','password','builder','\x20region\x20-\x20','split','gYHCj','../../cloudproviders/utils','ERROR','STBcP','adnCl','Use\x20an\x20existing\x20grid\x20profile\x20to\x20setup\x20the\x20Automation\x20Grid.\x20By\x20default,\x20configured\x20profile\x20is\x20used.','RbXiP','iTaTg','ZllwM','OwUtV','SJSAi','buXyQ','uNxjj','grid\x20profile\x20flow\x20','stack\x20trace\x20','sendEventToBackend','vJNze','Pass\x20the\x20region\x20for\x20existing\x20Kubernetes\x20Cluster.','cloud-provider','kOmIM','mwzkm','MvLqa','desc','https://','ThlBw','stack','connectionTimeout','isTls1_2_SUPPORTED','kMWpl','vRcYJ','joEGV','IUnFt','uVRMq','../../utils/instrumentationUtils','readFileSync','bstackAccesskey','vWQsY','Cluster\x20details\x0a-----------------------\x0a','CYgEC','code','User\x20Access','\x20\x20Stack:\x20'];a17_0x2624=function(){return _0x513cfd;};return a17_0x2624();}const fs=require('fs'),ws=require('ws'),got=require('got'),{v4:uuidv4}=require(a17_0xb33bcf(0x1d0)),ReconnectingWebSocket=require(a17_0xb33bcf(0x220)),{getCredentialsPath,reportToGalactusAndSendToEDS,getAuthHeader,responseValidation,isUndefined,curlRequest,isTlsSupported,getSystemMetaData}=require(a17_0xb33bcf(0x13b)),{logger}=require(a17_0xb33bcf(0x19d)),{HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,global_registry,messageTypes,WS_ENDPOINT,WS_EVENTS,ALL_SUPPORTED_CLOUD_PROVIDERS,AG_API_URL,DEFAULT_CLUSTER_DETAILS}=require(a17_0xb33bcf(0x186)),{getCloudProviderObjectWithOutInit}=require(a17_0xb33bcf(0x154)),webSocketUtils=require(a17_0xb33bcf(0x1e8)),{sendInstrumentationEvent}=require(a17_0xb33bcf(0x174));exports[a17_0xb33bcf(0x190)]=a17_0xb33bcf(0x20d),exports[a17_0xb33bcf(0x169)]=a17_0xb33bcf(0x1e9),exports[a17_0xb33bcf(0x150)]=function(_0x5b9c81){const _0x2bcca9=a17_0xb33bcf,_0x2abc3b={};_0x2abc3b['nLsYt']=_0x2bcca9(0x1f6),_0x2abc3b[_0x2bcca9(0x1f2)]=_0x2bcca9(0x1e3),_0x2abc3b[_0x2bcca9(0x12f)]='Pass\x20the\x20name\x20of\x20cloud\x20provider\x20for\x20existing\x20Kubernetes\x20Cluster.',_0x2abc3b['qVKjf']=_0x2bcca9(0x164),_0x2abc3b[_0x2bcca9(0x12a)]=_0x2bcca9(0x158),_0x2abc3b[_0x2bcca9(0x1be)]=_0x2bcca9(0x20c);const _0x569b1b=_0x2abc3b,_0x23bdbf={};_0x23bdbf[_0x2bcca9(0x1f4)]=_0x569b1b[_0x2bcca9(0x200)],_0x23bdbf[_0x2bcca9(0x17f)]=_0x569b1b['HBpDq'];const _0xa69bab={};_0xa69bab['description']=_0x569b1b[_0x2bcca9(0x12f)],_0xa69bab[_0x2bcca9(0x17f)]=_0x569b1b[_0x2bcca9(0x1f2)];const _0x5035a2={};_0x5035a2[_0x2bcca9(0x1f4)]=_0x569b1b[_0x2bcca9(0x1e4)],_0x5035a2['type']=_0x569b1b[_0x2bcca9(0x1f2)];const _0x56931c={};_0x56931c[_0x2bcca9(0x1f4)]=_0x569b1b[_0x2bcca9(0x12a)],_0x56931c['type']=_0x569b1b[_0x2bcca9(0x1f2)];const _0xaab0d3={};return _0xaab0d3[_0x2bcca9(0x1d2)]=_0x23bdbf,_0xaab0d3['cloud-provider']=_0xa69bab,_0xaab0d3[_0x2bcca9(0x208)]=_0x5035a2,_0xaab0d3['grid-profile']=_0x56931c,_0x5b9c81[_0x2bcca9(0x217)](HELP_HEADER_MESSAGE[_0x2bcca9(0x1ec)])[_0x2bcca9(0x216)](HELP_FOOTER_MESSAGE)['options'](_0xaab0d3)[_0x2bcca9(0x20c)](_0x569b1b[_0x2bcca9(0x1be)])[_0x2bcca9(0x1bd)];};function a17_0x5287(_0x24220a,_0x356a19){const _0x262461=a17_0x2624();return a17_0x5287=function(_0x528732,_0x13f627){_0x528732=_0x528732-0x127;let _0x1f9875=_0x262461[_0x528732];return _0x1f9875;},a17_0x5287(_0x24220a,_0x356a19);}async function inputValidation(_0x5b9608,_0x566a47){const _0x22bc24=a17_0xb33bcf,_0x3bcee5={'Bwdsc':function(_0x1ab88a,_0x18be06){return _0x1ab88a+_0x18be06;},'fqeQZ':'Success','kOmIM':_0x22bc24(0x1a8),'iZWIE':function(_0x308ccc,_0x28e137){return _0x308ccc||_0x28e137;},'uNxjj':'N/A','YohRU':'Error\x20Details:\x0a','XmuOI':_0x22bc24(0x165),'ntuvn':_0x22bc24(0x12c),'rqBTz':'will\x20be\x20created','hDQRv':_0x22bc24(0x1d2),'kMWpl':'error','dJqio':_0x22bc24(0x208),'ThlBw':_0x22bc24(0x1f6),'FWPTK':_0x22bc24(0x1e3),'RFCNd':_0x22bc24(0x19f),'yIKgm':_0x22bc24(0x164),'Oughq':_0x22bc24(0x158),'SrxQb':_0x22bc24(0x20c),'vzSNB':'Missing\x20required\x20arguments.\x20Please\x20provide\x20either\x20grid\x20profile\x20or\x20cluster\x20details\x20(cluser-name\x20,\x20cloud\x20provider\x20&\x20region','iTaTg':function(_0x241e27,_0x2a816a){return _0x241e27===_0x2a816a;},'vzzFS':'akGEb','KVKQr':_0x22bc24(0x168),'PbxaI':function(_0x1d067c,_0x193bdd){return _0x1d067c!==_0x193bdd;},'OwUtV':_0x22bc24(0x1a7),'KwtBG':function(_0x3c7dab,_0x53a728){return _0x3c7dab!==_0x53a728;},'vqSvd':_0x22bc24(0x1fe),'PtMeX':function(_0x3493f7,_0x5dcfe0){return _0x3493f7!==_0x5dcfe0;},'IUnFt':_0x22bc24(0x13c),'CMegP':_0x22bc24(0x14a),'phjcm':function(_0x4a4269,_0x24ee5f){return _0x4a4269!==_0x24ee5f;},'ctBuI':_0x22bc24(0x144),'FmGma':_0x22bc24(0x1c8),'vRcYJ':function(_0x1d7e0c,_0x27e67d){return _0x1d7e0c>_0x27e67d;},'vBoZZ':_0x22bc24(0x1f8),'ABQmG':function(_0x4cd06a,_0x1604cd,_0x4c115e,_0x344123,_0x22e198,_0x6c50db,_0x577107,_0x2a1ba7){return _0x4cd06a(_0x1604cd,_0x4c115e,_0x344123,_0x22e198,_0x6c50db,_0x577107,_0x2a1ba7);},'riUjR':_0x22bc24(0x12b),'hTmlU':_0x22bc24(0x128),'ugSKJ':'htylX','rQpmg':_0x22bc24(0x1f0),'ezmZj':_0x22bc24(0x1fa),'ADtIX':function(_0x57cd3d,_0x1a68e8,_0x31a656,_0x53aaa9,_0x4938d5,_0x1fa131,_0x3eab55,_0x3c9659){return _0x57cd3d(_0x1a68e8,_0x31a656,_0x53aaa9,_0x4938d5,_0x1fa131,_0x3eab55,_0x3c9659);},'CYgEC':_0x22bc24(0x224),'PGjIs':function(_0xe40c28,_0xe1206b){return _0xe40c28!==_0xe1206b;},'TsBFL':_0x22bc24(0x1e6),'MBMQZ':_0x22bc24(0x1fc),'IBeWz':function(_0x3833e,_0x117a0a){return _0x3833e!==_0x117a0a;},'mffKy':_0x22bc24(0x229),'fxJFl':'GET','PXoPF':function(_0x3fdbb1,_0x583314,_0xebb9e7){return _0x3fdbb1(_0x583314,_0xebb9e7);},'limPr':function(_0x511680,_0x460177,_0x539a1d,_0x309c73,_0x187343,_0x1040c3){return _0x511680(_0x460177,_0x539a1d,_0x309c73,_0x187343,_0x1040c3);},'gYHCj':_0x22bc24(0x223),'SuJAy':_0x22bc24(0x1e5),'aCbQW':_0x22bc24(0x1f5),'FQtUi':'zNOrz','XtBmW':function(_0x25b87c,_0x3fd4c1){return _0x25b87c(_0x3fd4c1);},'SIDlU':_0x22bc24(0x177),'CPfxF':function(_0x1aacfd,_0x7acb30,_0xe07c72,_0x12fda6,_0x1ed3e1,_0x302bb1,_0xbda559,_0x516c1d){return _0x1aacfd(_0x7acb30,_0xe07c72,_0x12fda6,_0x1ed3e1,_0x302bb1,_0xbda559,_0x516c1d);},'adnCl':_0x22bc24(0x221),'BsxBI':function(_0x4cc306,_0x447902){return _0x4cc306!==_0x447902;},'ELcSb':'ftcSm','STBcP':_0x22bc24(0x202),'YCIhp':function(_0x421a88,_0x31436c){return _0x421a88===_0x31436c;},'TGwBb':_0x22bc24(0x147),'RbXiP':_0x22bc24(0x167),'fpScC':_0x22bc24(0x146),'OyROk':function(_0x3899a9,_0x489b9a){return _0x3899a9===_0x489b9a;},'bvPYJ':_0x22bc24(0x173),'PcCxZ':_0x22bc24(0x1ce)};let _0x1d5e6a;try{if(_0x3bcee5['iTaTg'](_0x3bcee5['vzzFS'],_0x3bcee5[_0x22bc24(0x1ef)]))_0x217c5e[_0x22bc24(0x142)](0x1);else{if(_0x5b9608[_0x22bc24(0x1c2)]||_0x5b9608[_0x22bc24(0x18f)]||_0x5b9608[_0x22bc24(0x208)]){if(_0x3bcee5['PbxaI'](_0x3bcee5[_0x22bc24(0x15c)],_0x3bcee5['OwUtV'])){const {header:_0x3515bb,response:_0x13f0b8}=_0x4b2cfb,{status:_0x313a05,data:_0x97e771,error:_0x14a853}=_0x13f0b8;_0x35f92b+=_0x3515bb+'\x20#'+_0x3bcee5[_0x22bc24(0x206)](_0x4deb55,0x1)+'\x0a',_0x47d41d+=_0x22bc24(0x138)+(_0x313a05?_0x3bcee5['fqeQZ']:_0x3bcee5[_0x22bc24(0x166)])+'\x0a',_0xd2ad11+=_0x22bc24(0x1bc)+_0x3bcee5[_0x22bc24(0x199)](_0x97e771,_0x3bcee5[_0x22bc24(0x15f)])+'\x0a',_0x14a853&&(_0x28c231+=_0x3bcee5[_0x22bc24(0x13e)],_0x4ace99+=_0x22bc24(0x1c9)+(_0x14a853['message']||_0x3bcee5[_0x22bc24(0x15f)])+'\x0a',_0x1cd0e3+='\x20\x20Code:\x20'+(_0x14a853[_0x22bc24(0x17a)]||_0x3bcee5[_0x22bc24(0x15f)])+'\x0a',_0x4512b9+=_0x22bc24(0x17c)+(_0x14a853[_0x22bc24(0x16c)]||_0x3bcee5[_0x22bc24(0x15f)])+'\x0a'),_0x26b3b2+='\x0a\x0a';}else{const _0x57c0de=[];!_0x5b9608[_0x22bc24(0x1c2)]&&(_0x3bcee5[_0x22bc24(0x1de)](_0x3bcee5['vqSvd'],_0x3bcee5[_0x22bc24(0x1ee)])?(_0x59ad63['info']('['+_0x2fef5c+_0x22bc24(0x1b5)+_0x3aef87[_0x22bc24(0x1ba)]+_0x22bc24(0x1c0)+_0x263cc0[_0x22bc24(0x1f7)]+_0x22bc24(0x1cb)+_0x312c74['error']),_0xbd4968['error']&&_0x2b40ad[_0x22bc24(0x18a)](_0x22bc24(0x1b8)+_0x174d0a[_0x22bc24(0x18a)][_0x22bc24(0x16c)])):_0x57c0de[_0x22bc24(0x1ac)](_0x3bcee5['hDQRv']));;!_0x5b9608['cloudProvider']&&(_0x3bcee5['PtMeX'](_0x3bcee5[_0x22bc24(0x172)],_0x3bcee5[_0x22bc24(0x222)])?_0x57c0de['push'](_0x3bcee5[_0x22bc24(0x139)]):(_0x4bb378+=_0x3bcee5[_0x22bc24(0x13e)],_0x3646ea+=_0x22bc24(0x1c9)+(_0x3ad0a2[_0x22bc24(0x13d)]||_0x3bcee5[_0x22bc24(0x15f)])+'\x0a',_0x15a5db+=_0x22bc24(0x22c)+(_0xf67555[_0x22bc24(0x17a)]||_0x3bcee5['uNxjj'])+'\x0a',_0x41910f+='\x20\x20Stack:\x20'+(_0x3374f0[_0x22bc24(0x16c)]||_0x3bcee5[_0x22bc24(0x15f)])+'\x0a'));;!_0x5b9608['region']&&(_0x3bcee5[_0x22bc24(0x196)](_0x3bcee5['ctBuI'],_0x3bcee5[_0x22bc24(0x12e)])?_0x57c0de['push'](_0x3bcee5['dJqio']):_0x42bd0b[_0x22bc24(0x21e)](_0x22bc24(0x1f3)+_0x1ed72f['clusterName']+_0x22bc24(0x1cc)));;_0x3bcee5[_0x22bc24(0x170)](_0x57c0de[_0x22bc24(0x1c7)],0x0)&&(_0x3bcee5['iTaTg'](_0x3bcee5['vBoZZ'],_0x3bcee5[_0x22bc24(0x12d)])?(_0x1d5e6a=_0x22bc24(0x140)+_0x57c0de[_0x22bc24(0x21a)](',\x20')+'.\x20Please\x20provide\x20all\x20required\x20arguments.',await _0x3bcee5[_0x22bc24(0x218)](reportToGalactusAndSendToEDS,_0x5b9608,_0x566a47,_0x1d5e6a,messageTypes[_0x22bc24(0x155)],_0x3bcee5['riUjR'],_0x3bcee5[_0x22bc24(0x134)],_0x3bcee5[_0x22bc24(0x16f)]),logger[_0x22bc24(0x18a)](_0x1d5e6a),process[_0x22bc24(0x142)](0x1)):_0x5a3096['push'](_0x3bcee5[_0x22bc24(0x139)])),!ALL_SUPPORTED_CLOUD_PROVIDERS['includes'](_0x5b9608[_0x22bc24(0x18f)]['toLowerCase']())&&(_0x3bcee5[_0x22bc24(0x15a)](_0x3bcee5[_0x22bc24(0x213)],_0x3bcee5[_0x22bc24(0x180)])?_0x4055d4+=_0x22bc24(0x192)+_0x14b66d[_0x22bc24(0x1c2)]+'\x20'+(_0x53ae21?_0x3bcee5['ntuvn']:_0x3bcee5[_0x22bc24(0x14c)])+'\x0a\x0a':(_0x1d5e6a=_0x3bcee5[_0x22bc24(0x1a4)],await _0x3bcee5[_0x22bc24(0x1fd)](reportToGalactusAndSendToEDS,_0x5b9608,_0x566a47,_0x1d5e6a,messageTypes[_0x22bc24(0x155)],_0x3bcee5[_0x22bc24(0x1d5)],_0x3bcee5[_0x22bc24(0x179)],_0x3bcee5['kMWpl']),logger['error'](_0x1d5e6a),!_0x5b9608[_0x22bc24(0x18f)]&&(_0x3bcee5[_0x22bc24(0x21c)](_0x3bcee5[_0x22bc24(0x1c1)],_0x3bcee5[_0x22bc24(0x1b9)])?(logger[_0x22bc24(0x21e)]('Setting\x20cloud\x20provider\x20as\x20'+DEFAULT_CLUSTER_DETAILS[_0x22bc24(0x135)]+'\x20'),_0x5b9608[_0x22bc24(0x18f)]=DEFAULT_CLUSTER_DETAILS[_0x22bc24(0x135)]):_0x3ac6ab['push'](_0x3bcee5[_0x22bc24(0x210)])))),global_registry[_0x22bc24(0x1c2)]=_0x5b9608[_0x22bc24(0x1c2)],global_registry[_0x22bc24(0x18f)]=_0x5b9608[_0x22bc24(0x18f)],global_registry['clusterRegion']=_0x5b9608[_0x22bc24(0x208)];}}else{if(_0x5b9608[_0x22bc24(0x191)]){if(_0x3bcee5['IBeWz'](_0x3bcee5[_0x22bc24(0x17d)],_0x3bcee5[_0x22bc24(0x17d)])){const _0x6a1398={};_0x6a1398[_0x22bc24(0x17f)]=_0x2d4362[_0x22bc24(0x1a2)],_0x6a1398['message']=_0x26f538,_0x3bdece[_0x22bc24(0x162)](_0x488df9,_0x6a1398,_0x3bcee5[_0x22bc24(0x16f)],!![]);}else{global_registry[_0x22bc24(0x191)]=_0x5b9608[_0x22bc24(0x191)],logger[_0x22bc24(0x1d1)](_0x22bc24(0x160)+_0x5b9608['gridProfile']);const _0x51d1b2=_0x22bc24(0x16a)+AG_API_URL+_0x22bc24(0x14e),_0x51a73a={};_0x51a73a[_0x22bc24(0x1c5)]=_0x3bcee5[_0x22bc24(0x197)],_0x51a73a['headers']=global_registry[_0x22bc24(0x1d7)],_0x51a73a['throwHttpErrors']=![];const _0x33f81a=_0x51a73a,_0x157edd=await _0x3bcee5[_0x22bc24(0x209)](got,_0x51d1b2,_0x33f81a),_0x2a4e13=await _0x3bcee5[_0x22bc24(0x133)](responseValidation,_0x157edd,_0x3bcee5[_0x22bc24(0x153)],_0x3bcee5[_0x22bc24(0x149)],_0x5b9608,_0x566a47);let _0x4f71ff={};if(_0x3bcee5[_0x22bc24(0x15a)](_0x2a4e13,0xc8)){if(_0x3bcee5[_0x22bc24(0x14b)](_0x3bcee5['aCbQW'],_0x3bcee5['FQtUi'])){const _0xdc4a3a=JSON[_0x22bc24(0x1e7)](_0x157edd[_0x22bc24(0x127)]),_0x8bf74=_0xdc4a3a[_0x22bc24(0x22b)](_0x34f02e=>_0x34f02e[_0x22bc24(0x1b7)]===_0x5b9608[_0x22bc24(0x191)])||null;_0x3bcee5[_0x22bc24(0x207)](isUndefined,_0x8bf74)?_0x3bcee5['IBeWz'](_0x3bcee5['SIDlU'],_0x3bcee5[_0x22bc24(0x18c)])?_0x4adb1f['error']('error\x20stack\x20:\x20'+_0x51dc0f[_0x22bc24(0x18a)]['stack']):(_0x1d5e6a='Invalid\x20input.\x20grid\x20profiles:\x20'+_0x5b9608[_0x22bc24(0x191)]+'.\x20please\x20verify\x20the\x20grid\x20profile\x20name\x20and\x20try\x20again',await _0x3bcee5[_0x22bc24(0x1af)](reportToGalactusAndSendToEDS,_0x5b9608,_0x566a47,_0x1d5e6a,messageTypes[_0x22bc24(0x155)],_0x3bcee5[_0x22bc24(0x1d5)],_0x3bcee5[_0x22bc24(0x157)],_0x3bcee5[_0x22bc24(0x16f)]),logger[_0x22bc24(0x18a)](_0x1d5e6a),process[_0x22bc24(0x142)](0x1)):_0x3bcee5[_0x22bc24(0x1d6)](_0x3bcee5['ELcSb'],_0x3bcee5[_0x22bc24(0x156)])?_0x4f71ff=_0x8bf74:_0x157ef8+=_0x22bc24(0x192)+_0x2cb935['clusterName']+_0x22bc24(0x226);}else _0x3fa2b8[_0x22bc24(0x1ac)](_0x3bcee5[_0x22bc24(0x205)]);}else{if(_0x3bcee5[_0x22bc24(0x228)](_0x3bcee5[_0x22bc24(0x148)],_0x3bcee5[_0x22bc24(0x159)])){const _0x2c6145={};_0x2c6145[_0x22bc24(0x1f4)]=_0x3bcee5[_0x22bc24(0x16b)],_0x2c6145[_0x22bc24(0x17f)]=_0x3bcee5[_0x22bc24(0x18e)];const _0x30d9de={};_0x30d9de[_0x22bc24(0x1f4)]=_0x3bcee5['RFCNd'],_0x30d9de[_0x22bc24(0x17f)]=_0x3bcee5[_0x22bc24(0x18e)];const _0x27d0e8={};_0x27d0e8[_0x22bc24(0x1f4)]=_0x3bcee5[_0x22bc24(0x1cd)],_0x27d0e8[_0x22bc24(0x17f)]=_0x3bcee5[_0x22bc24(0x18e)];const _0x3ed31d={};_0x3ed31d[_0x22bc24(0x1f4)]=_0x3bcee5[_0x22bc24(0x21f)],_0x3ed31d['type']=_0x3bcee5['FWPTK'];const _0x34f53e={};return _0x34f53e['cluster-name']=_0x2c6145,_0x34f53e[_0x22bc24(0x165)]=_0x30d9de,_0x34f53e[_0x22bc24(0x208)]=_0x27d0e8,_0x34f53e[_0x22bc24(0x1e5)]=_0x3ed31d,_0x254b4c[_0x22bc24(0x217)](_0x162ae4[_0x22bc24(0x1ec)])[_0x22bc24(0x216)](_0x5413a7)['options'](_0x34f53e)[_0x22bc24(0x20c)](_0x3bcee5[_0x22bc24(0x1b0)])['argv'];}else process[_0x22bc24(0x142)](0x1);}const _0xa469ed={};_0xa469ed[_0x22bc24(0x17f)]=WS_EVENTS[_0x22bc24(0x1a2)],_0xa469ed[_0x22bc24(0x13d)]=_0x3bcee5['fpScC'],webSocketUtils[_0x22bc24(0x162)](_0x566a47,_0xa469ed),global_registry[_0x22bc24(0x18f)]=_0x4f71ff['cloudProvider'],global_registry[_0x22bc24(0x198)]=_0x4f71ff[_0x22bc24(0x208)],global_registry[_0x22bc24(0x1c2)]=_0x4f71ff['clusterName'];}}else _0x3bcee5['OyROk'](_0x3bcee5[_0x22bc24(0x1a9)],_0x3bcee5[_0x22bc24(0x1a9)])?(logger[_0x22bc24(0x18a)](_0x3bcee5[_0x22bc24(0x1a5)]),process[_0x22bc24(0x142)](0x1)):(_0x6a6b47['info']('Setting\x20cloud\x20provider\x20as\x20'+_0x3b27db[_0x22bc24(0x135)]+'\x20'),_0x3f962e[_0x22bc24(0x18f)]=_0x795402[_0x22bc24(0x135)]);}}}catch(_0x6fd345){_0x3bcee5[_0x22bc24(0x15a)](_0x3bcee5['PcCxZ'],_0x3bcee5[_0x22bc24(0x194)])?(_0x1d5e6a='Error\x20in\x20input\x20validation\x20while\x20pre-check\x20-\x20'+_0x6fd345+':\x20'+_0x6fd345[_0x22bc24(0x16c)],logger[_0x22bc24(0x18a)](_0x1d5e6a),await _0x3bcee5['ADtIX'](reportToGalactusAndSendToEDS,_0x5b9608,_0x566a47,_0x1d5e6a,messageTypes['ERROR'],_0x3bcee5[_0x22bc24(0x1d5)],_0x3bcee5[_0x22bc24(0x179)],_0x3bcee5[_0x22bc24(0x16f)]),process['exit'](0x1)):(_0x3dd23d[_0x22bc24(0x18a)](_0x3bcee5[_0x22bc24(0x1a5)]),_0xd7bc0e[_0x22bc24(0x142)](0x1));}}function printResponse(_0x831b79,_0x325a86){const _0x1acdc6=a17_0xb33bcf,_0x183512={};_0x183512[_0x1acdc6(0x1d8)]=function(_0xd6fa21,_0x45b21d){return _0xd6fa21!==_0x45b21d;},_0x183512[_0x1acdc6(0x15b)]=_0x1acdc6(0x219),_0x183512[_0x1acdc6(0x1aa)]=_0x1acdc6(0x214);const _0x3f2f9d=_0x183512;logger[_0x1acdc6(0x21e)]('['+_0x831b79+_0x1acdc6(0x1b5)+_0x325a86[_0x1acdc6(0x1ba)]+_0x1acdc6(0x1c0)+_0x325a86[_0x1acdc6(0x1f7)]+_0x1acdc6(0x1cb)+_0x325a86[_0x1acdc6(0x18a)]),_0x325a86[_0x1acdc6(0x18a)]&&(_0x3f2f9d['wzppT'](_0x3f2f9d[_0x1acdc6(0x15b)],_0x3f2f9d[_0x1acdc6(0x1aa)])?logger[_0x1acdc6(0x18a)]('error\x20stack\x20:\x20'+_0x325a86[_0x1acdc6(0x18a)]['stack']):_0x1de210=_0x1bbe67);}async function generateReport(_0x51300c,_0x4b3c65){const _0x559d70=a17_0xb33bcf,_0xee67d7={'KmhDO':function(_0x13bed5,_0x896e98){return _0x13bed5+_0x896e98;},'VVHEj':_0x559d70(0x1d4),'ItDog':_0x559d70(0x1a8),'cqFCc':function(_0x20462e,_0x20e8bf){return _0x20462e||_0x20e8bf;},'FaHfJ':'N/A','jPflp':_0x559d70(0x13f),'XAFBY':_0x559d70(0x178),'mRAwO':function(_0x2d7db4,_0x5450fd){return _0x2d7db4!=_0x5450fd;},'rNHXj':'is\x20already\x20present','Fsnkq':_0x559d70(0x1f1),'oGPqO':function(_0x2de639){return _0x2de639();}};let _0x51c38c=_0x559d70(0x184)+global_registry[_0x559d70(0x18f)]+'\x20===\x0a\x0a';return _0x51300c['forEach']((_0x494cbb,_0x34cb1c)=>{const _0x17e4dd=_0x559d70,{header:_0x41664c,response:_0x2260ef}=_0x494cbb,{status:_0x3bbe41,data:_0x1b4fb6,error:_0x146bdb}=_0x2260ef;_0x51c38c+=_0x41664c+'\x20#'+_0xee67d7[_0x17e4dd(0x1db)](_0x34cb1c,0x1)+'\x0a',_0x51c38c+=_0x17e4dd(0x138)+(_0x3bbe41?_0xee67d7['VVHEj']:_0xee67d7['ItDog'])+'\x0a',_0x51c38c+=_0x17e4dd(0x1bc)+_0xee67d7[_0x17e4dd(0x203)](_0x1b4fb6,_0xee67d7['FaHfJ'])+'\x0a',_0x146bdb&&(_0x51c38c+=_0xee67d7['jPflp'],_0x51c38c+=_0x17e4dd(0x1c9)+(_0x146bdb[_0x17e4dd(0x13d)]||_0xee67d7[_0x17e4dd(0x183)])+'\x0a',_0x51c38c+='\x20\x20Code:\x20'+(_0x146bdb[_0x17e4dd(0x17a)]||_0xee67d7['FaHfJ'])+'\x0a',_0x51c38c+=_0x17e4dd(0x17c)+(_0x146bdb[_0x17e4dd(0x16c)]||_0xee67d7[_0x17e4dd(0x183)])+'\x0a'),_0x51c38c+='\x0a\x0a';}),_0x51c38c+=_0xee67d7[_0x559d70(0x18d)],_0xee67d7[_0x559d70(0x13a)](_0x4b3c65,null)?_0x51c38c+='Cluster\x20'+global_registry[_0x559d70(0x1c2)]+'\x20'+(_0x4b3c65?_0xee67d7[_0x559d70(0x182)]:_0xee67d7[_0x559d70(0x1dd)])+'\x0a\x0a':_0x51c38c+=_0x559d70(0x192)+global_registry[_0x559d70(0x1c2)]+_0x559d70(0x226),_0x51c38c+=_0xee67d7[_0x559d70(0x1e2)](getSystemMetaData),_0x51c38c;};exports['handler']=async function(_0x26d3ef){const _0x1e537d=a17_0xb33bcf,_0x1e703f={'xBcLU':function(_0x338bee){return _0x338bee();},'onatM':_0x1e537d(0x137),'DYuhy':function(_0x26fb0f,_0x2747c9,_0x5763cb,_0x4a656f,_0x2ec61f,_0x556e1a,_0x39ddd5,_0x4465c9){return _0x26fb0f(_0x2747c9,_0x5763cb,_0x4a656f,_0x2ec61f,_0x556e1a,_0x39ddd5,_0x4465c9);},'wrKfz':_0x1e537d(0x12b),'bowHO':_0x1e537d(0x20b),'NRxMR':'error','MFouL':function(_0x5692a2,_0xae1e9e,_0x1ae580,_0x459fbd,_0x4eabd3,_0x48b806,_0x422b91){return _0x5692a2(_0xae1e9e,_0x1ae580,_0x459fbd,_0x4eabd3,_0x48b806,_0x422b91);},'WyLHd':function(_0xa81463){return _0xa81463();},'VzcMT':_0x1e537d(0x1a6),'nADcy':_0x1e537d(0x1b2),'eequF':function(_0x29717a,_0x2627a2,_0x2dffc5){return _0x29717a(_0x2627a2,_0x2dffc5);},'vJNze':function(_0x159a6f,_0x3df8b7,_0x559e55){return _0x159a6f(_0x3df8b7,_0x559e55);},'XwBiQ':function(_0x14f723,_0x49d588,_0x54b44e,_0x3b5209,_0x3e5f14,_0x2241af,_0x38bbab){return _0x14f723(_0x49d588,_0x54b44e,_0x3b5209,_0x3e5f14,_0x2241af,_0x38bbab);},'riMRJ':_0x1e537d(0x1ae),'szeVS':function(_0x491330,_0x5ee47d,_0x59c2b7){return _0x491330(_0x5ee47d,_0x59c2b7);},'HFIII':'toolInstalledResp','OVcPc':'3|2|0|1|4','zPVHz':_0x1e537d(0x1b3),'uyLUu':_0x1e537d(0x181),'joEGV':function(_0x270428,_0x125825){return _0x270428(_0x125825);},'diams':_0x1e537d(0x215),'sxmJT':function(_0x300b58,_0x4d49a1,_0x6cb51e){return _0x300b58(_0x4d49a1,_0x6cb51e);},'dBOik':_0x1e537d(0x16e),'Zpwzx':'Tool\x20Installed','buXyQ':_0x1e537d(0x17b),'FrOOH':'Whitelisted\x20browserstack','CETNB':_0x1e537d(0x136),'PPpXJ':function(_0x4c9cd7,_0x36484d,_0x32ec17){return _0x4c9cd7(_0x36484d,_0x32ec17);},'SJSAi':function(_0x29a1a1,_0x4603a3){return _0x29a1a1+_0x4603a3;},'LGPJj':'utf-8','MrvOv':_0x1e537d(0x211)};let _0xb0dd45,_0x25c89f;try{global_registry[_0x1e537d(0x141)]=_0x1e703f['xBcLU'](uuidv4);!fs[_0x1e537d(0x21d)](_0x1e703f[_0x1e537d(0x1bf)](getCredentialsPath))&&(_0x25c89f=_0x1e703f[_0x1e537d(0x1ad)],logger[_0x1e537d(0x18a)](_0x25c89f),await _0x1e703f[_0x1e537d(0x1cf)](reportToGalactusAndSendToEDS,_0x26d3ef,_0xb0dd45,_0x25c89f,messageTypes[_0x1e537d(0x155)],_0x1e703f['wrKfz'],_0x1e703f[_0x1e537d(0x22a)],_0x1e703f[_0x1e537d(0x1b1)]),process[_0x1e537d(0x142)](0x1));_0x1e703f[_0x1e537d(0x129)](sendInstrumentationEvent,_0x26d3ef,_0x1e703f[_0x1e537d(0x1fb)],messageTypes[_0x1e537d(0x189)],null,null,_0x26d3ef);const _0x5cec44=JSON['parse'](fs[_0x1e537d(0x175)](_0x1e703f[_0x1e537d(0x1ed)](getCredentialsPath)));global_registry[_0x1e537d(0x187)]=_0x5cec44['Browserstack'][_0x1e537d(0x1dc)],global_registry[_0x1e537d(0x176)]=_0x5cec44[_0x1e537d(0x1da)][_0x1e537d(0x14f)];const _0x545339=WS_ENDPOINT['replace'](_0x1e703f[_0x1e537d(0x20e)],_0x5cec44[_0x1e537d(0x1da)]['username'])[_0x1e537d(0x1c4)](_0x1e703f[_0x1e537d(0x1e0)],_0x5cec44[_0x1e537d(0x1da)][_0x1e537d(0x14f)]),_0x496cc2={};_0x496cc2[_0x1e537d(0x1d3)]=ws,_0x496cc2[_0x1e537d(0x16d)]=0x36ee80,_0xb0dd45=new ReconnectingWebSocket(_0x545339,[],_0x496cc2),global_registry['authHeader']=_0x1e703f[_0x1e537d(0x227)](getAuthHeader,global_registry['bstackUsername'],global_registry['bstackAccesskey']),await _0x1e703f[_0x1e537d(0x163)](inputValidation,_0x26d3ef,_0xb0dd45),logger[_0x1e537d(0x21e)]('Pre-check\x20running\x20for\x20Cloud\x20-\x20'+global_registry[_0x1e537d(0x18f)]+_0x1e537d(0x151)+global_registry[_0x1e537d(0x198)]);let _0x7774d4=await _0x1e703f[_0x1e537d(0x132)](getCloudProviderObjectWithOutInit,global_registry['cloudProvider'],global_registry[_0x1e537d(0x1c2)],_0x1e703f[_0x1e537d(0x204)],_0xb0dd45,webSocketUtils,_0x26d3ef);const _0x48c013=await _0x7774d4['isCliToolInstalled']();_0x1e703f[_0x1e537d(0x1e1)](printResponse,_0x1e703f[_0x1e537d(0x1eb)],_0x48c013),_0x7774d4=await _0x7774d4[_0x1e537d(0x19a)]();let _0x32853e=![];try{_0x32853e=await _0x7774d4[_0x1e537d(0x1b4)]();}catch(_0x18befa){const _0x362e0b=_0x1e703f[_0x1e537d(0x225)][_0x1e537d(0x152)]('|');let _0x1e4017=0x0;while(!![]){switch(_0x362e0b[_0x1e4017++]){case'0':logger[_0x1e537d(0x18a)](_0x25c89f);continue;case'1':_0x25c89f+='\x0a'+JSON[_0x1e537d(0x1c6)](_0x18befa[_0x1e537d(0x16c)]);continue;case'2':_0x32853e=null;continue;case'3':_0x25c89f=_0x1e537d(0x18b)+global_registry['clusterName']+'`\x20is\x20present\x20in\x20region\x20`'+global_registry['clusterRegion']+_0x1e537d(0x131)+_0x18befa;continue;case'4':await _0x1e703f[_0x1e537d(0x1cf)](reportToGalactusAndSendToEDS,_0x26d3ef,_0xb0dd45,_0x25c89f,messageTypes['ERROR'],_0x1e703f['wrKfz'],_0x1e537d(0x1ab)+global_registry[_0x1e537d(0x18f)],_0x1e703f[_0x1e537d(0x1b1)]);continue;}break;}}_0x32853e&&logger[_0x1e537d(0x21e)](_0x1e537d(0x1f3)+global_registry[_0x1e537d(0x1c2)]+_0x1e537d(0x1cc));const _0xbf7793=await _0x7774d4[_0x1e537d(0x1ca)]();_0x1e703f['szeVS'](printResponse,_0x1e703f[_0x1e537d(0x185)],_0xbf7793);const _0x2352c9=await _0x1e703f[_0x1e537d(0x1bf)](curlRequest);_0x1e703f[_0x1e537d(0x163)](printResponse,_0x1e703f[_0x1e537d(0x1bb)],_0x2352c9);const _0x3698dd=await _0x1e703f[_0x1e537d(0x171)](isTlsSupported,_0x1e703f['diams']);_0x1e703f[_0x1e537d(0x1df)](printResponse,_0x1e703f['dBOik'],_0x3698dd);const _0x347eaa={};_0x347eaa[_0x1e537d(0x19e)]=_0x1e703f[_0x1e537d(0x14d)],_0x347eaa[_0x1e537d(0x20f)]=_0x48c013;const _0x4561d2={};_0x4561d2['header']=_0x1e703f[_0x1e537d(0x15e)],_0x4561d2[_0x1e537d(0x20f)]=_0xbf7793;const _0x2d9fcb={};_0x2d9fcb[_0x1e537d(0x19e)]=_0x1e703f['FrOOH'],_0x2d9fcb[_0x1e537d(0x20f)]=_0x2352c9;const _0x1aaca3={};_0x1aaca3[_0x1e537d(0x19e)]=_0x1e703f[_0x1e537d(0x1a3)],_0x1aaca3[_0x1e537d(0x20f)]=_0x3698dd;const _0x249974=[_0x347eaa,_0x4561d2,_0x2d9fcb,_0x1aaca3],_0x20fcdd=await _0x1e703f[_0x1e537d(0x19b)](generateReport,_0x249974,_0x32853e),_0x1f0bcb=new Date(),_0x4b49e3=_0x1f0bcb['getUTCFullYear']()+'_'+_0x1e703f[_0x1e537d(0x15d)](_0x1f0bcb[_0x1e537d(0x143)](),0x1)+'_'+_0x1f0bcb[_0x1e537d(0x195)]()+'_'+_0x1f0bcb[_0x1e537d(0x17e)]()+'_'+_0x1f0bcb['getUTCMinutes'](),_0x2ca775=_0x1e537d(0x193)+_0x4b49e3+_0x1e537d(0x188);fs[_0x1e537d(0x1ea)](_0x2ca775,_0x20fcdd,_0x1e703f[_0x1e537d(0x130)]),logger['info'](_0x1e537d(0x19c)+_0x2ca775),process['exit'](0x0);}catch(_0xacef33){let _0x41a976=_0x1e537d(0x201)+_0xacef33+'\x20';logger[_0x1e537d(0x18a)](_0x41a976),_0x41a976+='\x0a'+JSON[_0x1e537d(0x1c6)](_0xacef33['stack']),logger[_0x1e537d(0x1d1)](_0x1e537d(0x161)+_0xacef33[_0x1e537d(0x16c)]);if(_0xb0dd45){const _0x1f8042={};_0x1f8042[_0x1e537d(0x17f)]=WS_EVENTS['LOG'],_0x1f8042[_0x1e537d(0x13d)]=_0x41a976,webSocketUtils[_0x1e537d(0x162)](_0xb0dd45,_0x1f8042,_0x1e703f['NRxMR'],!![]);}await webSocketUtils[_0x1e537d(0x1a0)](0x7d0);const _0x3b13b9={};_0x3b13b9['error']=_0x41a976,await _0x1e703f['XwBiQ'](sendInstrumentationEvent,_0x26d3ef,_0x1e703f[_0x1e537d(0x1fb)],messageTypes['ERROR'],_0x1e703f['MrvOv'],_0x3b13b9,_0x26d3ef),process[_0x1e537d(0x142)](0x1);}};