const a17_0xf7e438=a17_0x209e;(function(_0x4ebdc3,_0x423490){const _0x30e1db=a17_0x209e,_0x906693=_0x4ebdc3();while(!![]){try{const _0x4989ea=parseInt(_0x30e1db(0x1f1))/0x1*(-parseInt(_0x30e1db(0x2e0))/0x2)+-parseInt(_0x30e1db(0x2f3))/0x3*(parseInt(_0x30e1db(0x2f2))/0x4)+parseInt(_0x30e1db(0x28d))/0x5+-parseInt(_0x30e1db(0x256))/0x6*(parseInt(_0x30e1db(0x2a6))/0x7)+parseInt(_0x30e1db(0x27b))/0x8*(parseInt(_0x30e1db(0x2a5))/0x9)+-parseInt(_0x30e1db(0x2f9))/0xa*(-parseInt(_0x30e1db(0x207))/0xb)+-parseInt(_0x30e1db(0x20c))/0xc*(-parseInt(_0x30e1db(0x2eb))/0xd);if(_0x4989ea===_0x423490)break;else _0x906693['push'](_0x906693['shift']());}catch(_0x45b988){_0x906693['push'](_0x906693['shift']());}}}(a17_0x4de5,0x838b8));const fs=require('fs'),ws=require('ws'),got=require(a17_0xf7e438(0x1eb)),{v4:uuidv4}=require('uuid'),ReconnectingWebSocket=require(a17_0xf7e438(0x27f)),{getCredentialsPath,reportToGalactusAndSendToEDS,getAuthHeader,responseValidation,isUndefined,curlRequest,isTlsSupported,getSystemMetaData}=require(a17_0xf7e438(0x1f8)),{logger}=require(a17_0xf7e438(0x285)),{HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,global_registry,messageTypes,WS_ENDPOINT,WS_EVENTS,ALL_SUPPORTED_CLOUD_PROVIDERS,AG_API_URL,DEFAULT_CLUSTER_DETAILS}=require('../../config/constants'),{getCloudProviderObjectWithOutInit}=require(a17_0xf7e438(0x29e)),webSocketUtils=require(a17_0xf7e438(0x23b)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils');exports[a17_0xf7e438(0x27d)]='grid',exports['desc']=a17_0xf7e438(0x240),exports[a17_0xf7e438(0x2d2)]=function(_0xa315e9){const _0x4fdd35=a17_0xf7e438,_0x36947e={};_0x36947e[_0x4fdd35(0x27a)]=_0x4fdd35(0x2bb),_0x36947e[_0x4fdd35(0x294)]=_0x4fdd35(0x2ec),_0x36947e[_0x4fdd35(0x26a)]=_0x4fdd35(0x2bf),_0x36947e[_0x4fdd35(0x22e)]=_0x4fdd35(0x248),_0x36947e[_0x4fdd35(0x250)]=_0x4fdd35(0x1ef),_0x36947e[_0x4fdd35(0x2a8)]=_0x4fdd35(0x284);const _0x54ba73=_0x36947e,_0x276c60={};_0x276c60[_0x4fdd35(0x28e)]=_0x54ba73['Lxwoh'],_0x276c60[_0x4fdd35(0x2de)]=_0x54ba73[_0x4fdd35(0x294)];const _0x4950fd={};_0x4950fd['description']=_0x54ba73[_0x4fdd35(0x26a)],_0x4950fd[_0x4fdd35(0x2de)]=_0x54ba73[_0x4fdd35(0x294)];const _0xfd8d42={};_0xfd8d42['description']=_0x54ba73[_0x4fdd35(0x22e)],_0xfd8d42[_0x4fdd35(0x2de)]=_0x54ba73['jhftq'];const _0x365baa={};_0x365baa[_0x4fdd35(0x28e)]=_0x54ba73[_0x4fdd35(0x250)],_0x365baa[_0x4fdd35(0x2de)]=_0x54ba73['jhftq'];const _0x35fe6f={};return _0x35fe6f['cluster-name']=_0x276c60,_0x35fe6f['cloud-provider']=_0x4950fd,_0x35fe6f[_0x4fdd35(0x1f9)]=_0xfd8d42,_0x35fe6f[_0x4fdd35(0x282)]=_0x365baa,_0xa315e9['usage'](HELP_HEADER_MESSAGE[_0x4fdd35(0x253)])[_0x4fdd35(0x2cb)](HELP_FOOTER_MESSAGE)[_0x4fdd35(0x26e)](_0x35fe6f)['help'](_0x54ba73[_0x4fdd35(0x2a8)])[_0x4fdd35(0x29f)];};async function inputValidation(_0x38d450,_0x1406e6){const _0x28c6f0=a17_0xf7e438,_0xade642={'WoryR':_0x28c6f0(0x21b),'psuMu':_0x28c6f0(0x2bb),'pfyvS':_0x28c6f0(0x2ec),'pnybM':'Pass\x20the\x20name\x20of\x20cloud\x20provider\x20for\x20existing\x20Kubernetes\x20Cluster.','uACJy':_0x28c6f0(0x248),'SvvTj':_0x28c6f0(0x1ef),'OHOeC':_0x28c6f0(0x284),'VYiNw':_0x28c6f0(0x2c0),'LMRIi':'N/A','qlyDJ':function(_0x3e0b40,_0x2fa325){return _0x3e0b40+_0x2fa325;},'jEEWr':_0x28c6f0(0x202),'NEJgb':_0x28c6f0(0x2d9),'axnab':function(_0x3eca52,_0x15c4d0){return _0x3eca52||_0x15c4d0;},'UUZLx':_0x28c6f0(0x1f9),'BpjZW':'cluster-name','YcRuS':'cloud-provider','EOSqJ':_0x28c6f0(0x2d0),'TPflA':'is\x20already\x20present','hMrQw':_0x28c6f0(0x237),'qrIAW':function(_0x40c2fc,_0xd6af92){return _0x40c2fc!==_0xd6af92;},'YMBwt':_0x28c6f0(0x2d6),'OQsTY':_0x28c6f0(0x235),'FmKuA':function(_0x23aad9,_0x5a5c33){return _0x23aad9===_0x5a5c33;},'ldrGC':_0x28c6f0(0x213),'LTOQd':function(_0xea73d9,_0x180215){return _0xea73d9===_0x180215;},'MvUXZ':_0x28c6f0(0x2e9),'eDBoQ':_0x28c6f0(0x2f7),'wDAab':_0x28c6f0(0x275),'cFoFQ':_0x28c6f0(0x2d8),'kJRlY':'AzVQi','xEEbi':_0x28c6f0(0x2d3),'CpTDS':function(_0x1101cf,_0x30abfb){return _0x1101cf>_0x30abfb;},'FNPQu':_0x28c6f0(0x279),'CZbyA':function(_0x44ddb9,_0x11e22e,_0x19047d,_0x2c93c2,_0x565799,_0x56c59a,_0x3075ea,_0x1bddd8){return _0x44ddb9(_0x11e22e,_0x19047d,_0x2c93c2,_0x565799,_0x56c59a,_0x3075ea,_0x1bddd8);},'FBTfm':_0x28c6f0(0x1ed),'gCwHF':'pre-check-cluster-args-not-passed','CdNRz':function(_0x1aaa6b,_0x2d075d){return _0x1aaa6b===_0x2d075d;},'kGtaz':'PnMoK','bgViP':_0x28c6f0(0x239),'OqppP':_0x28c6f0(0x25b),'HJsQm':'cloud-provider-not-supported','ItNCy':function(_0x4c2cf0,_0x5842b5){return _0x4c2cf0!==_0x5842b5;},'WpQKm':_0x28c6f0(0x217),'GlDEc':'GSDuq','MdDIZ':'WODrt','LlwTF':_0x28c6f0(0x263),'LdJfu':function(_0x51d590,_0x5be676,_0x259816){return _0x51d590(_0x5be676,_0x259816);},'dVYst':function(_0x2c8aaf,_0x1f801d,_0x52731a,_0x101028,_0x269c9d,_0x485ac9){return _0x2c8aaf(_0x1f801d,_0x52731a,_0x101028,_0x269c9d,_0x485ac9);},'vyuMN':_0x28c6f0(0x1fe),'XMUsK':_0x28c6f0(0x282),'jHOWO':function(_0x103ae4,_0x4be851){return _0x103ae4===_0x4be851;},'ddiBs':function(_0x358082,_0x1aa29c){return _0x358082!==_0x1aa29c;},'gQxsB':'waRPN','eYkyu':_0x28c6f0(0x2e8),'ZpmtY':function(_0x951be8,_0x269bfd){return _0x951be8(_0x269bfd);},'wTTzN':function(_0x3419d6,_0x5e6bfa){return _0x3419d6!==_0x5e6bfa;},'Klndq':_0x28c6f0(0x26f),'fdYOF':'KXmzP','aQhxg':function(_0x1c3bdc,_0x52604d,_0x4afc95,_0x46dd77,_0x218a7a,_0x523547,_0x311075,_0xcdf97b){return _0x1c3bdc(_0x52604d,_0x4afc95,_0x46dd77,_0x218a7a,_0x523547,_0x311075,_0xcdf97b);},'liglr':_0x28c6f0(0x2dc),'IcRHG':function(_0x3abf19,_0x2e766b){return _0x3abf19===_0x2e766b;},'mLByD':_0x28c6f0(0x2e7),'oBVoj':_0x28c6f0(0x242),'pIejg':function(_0xe1321a,_0x1802af){return _0xe1321a!==_0x1802af;},'GaMOl':'eToWy','Mtrid':_0x28c6f0(0x2b2),'JidYp':_0x28c6f0(0x278),'Ijdfl':function(_0x3db2aa,_0x25ccd9){return _0x3db2aa===_0x25ccd9;},'udrqh':_0x28c6f0(0x1ff),'pBjJo':_0x28c6f0(0x255),'MRRAo':_0x28c6f0(0x2a9),'zpuOv':_0x28c6f0(0x2ac),'kWQCS':function(_0x5cf633,_0x3ed9ec,_0x4d3849,_0x40a559,_0x445e99,_0x1a0b6b,_0x97513f,_0x48a4c2){return _0x5cf633(_0x3ed9ec,_0x4d3849,_0x40a559,_0x445e99,_0x1a0b6b,_0x97513f,_0x48a4c2);}};let _0x112d6f;try{if(_0xade642[_0x28c6f0(0x25e)](_0xade642['YMBwt'],_0xade642['OQsTY'])){if(_0x38d450[_0x28c6f0(0x2e4)]||_0x38d450[_0x28c6f0(0x238)]||_0x38d450['region']){if(_0xade642[_0x28c6f0(0x268)](_0xade642[_0x28c6f0(0x1f2)],_0xade642['ldrGC'])){const _0x2159b6=[];!_0x38d450['clusterName']&&(_0xade642[_0x28c6f0(0x2db)](_0xade642[_0x28c6f0(0x276)],_0xade642[_0x28c6f0(0x2ce)])?_0x5757a1+=_0x28c6f0(0x277)+_0x220128[_0x28c6f0(0x2e4)]+_0x28c6f0(0x2b9):_0x2159b6['push'](_0xade642[_0x28c6f0(0x2ca)]));;!_0x38d450[_0x28c6f0(0x238)]&&(_0xade642[_0x28c6f0(0x25e)](_0xade642['wDAab'],_0xade642[_0x28c6f0(0x267)])?_0x2159b6[_0x28c6f0(0x2f0)](_0xade642[_0x28c6f0(0x247)]):(_0x45b137[_0x28c6f0(0x204)](_0x28c6f0(0x226)+_0x3fcee2[_0x28c6f0(0x2b5)]+'\x20'),_0x3fdedd[_0x28c6f0(0x238)]=_0xe688c1['CLOUD_PROVIDER']));;!_0x38d450[_0x28c6f0(0x1f9)]&&(_0xade642[_0x28c6f0(0x2db)](_0xade642[_0x28c6f0(0x206)],_0xade642[_0x28c6f0(0x289)])?(_0x2de499[_0x28c6f0(0x2d0)](_0xade642[_0x28c6f0(0x2b6)]),_0xfba1cf[_0x28c6f0(0x29a)](0x1)):_0x2159b6[_0x28c6f0(0x2f0)](_0xade642[_0x28c6f0(0x22c)]));;_0xade642[_0x28c6f0(0x2be)](_0x2159b6[_0x28c6f0(0x231)],0x0)&&(_0xade642['LTOQd'](_0xade642['FNPQu'],_0xade642[_0x28c6f0(0x257)])?(_0x112d6f=_0x28c6f0(0x2a2)+_0x2159b6[_0x28c6f0(0x2f1)](',\x20')+_0x28c6f0(0x21a),await _0xade642[_0x28c6f0(0x2c8)](reportToGalactusAndSendToEDS,_0x38d450,_0x1406e6,_0x112d6f,messageTypes['ERROR'],_0xade642[_0x28c6f0(0x232)],_0xade642[_0x28c6f0(0x254)],_0xade642['EOSqJ']),logger[_0x28c6f0(0x2d0)](_0x112d6f),process[_0x28c6f0(0x29a)](0x1)):_0x2b0561=_0x2adc46);if(!ALL_SUPPORTED_CLOUD_PROVIDERS[_0x28c6f0(0x2c6)](_0x38d450[_0x28c6f0(0x238)][_0x28c6f0(0x2e1)]())){if(_0xade642[_0x28c6f0(0x2cf)](_0xade642[_0x28c6f0(0x210)],_0xade642[_0x28c6f0(0x23e)]))_0x247459[_0x28c6f0(0x2d0)](_0x28c6f0(0x1f7)+_0x61fb90['error']['stack']);else{_0x112d6f=_0xade642[_0x28c6f0(0x272)],await _0xade642[_0x28c6f0(0x2c8)](reportToGalactusAndSendToEDS,_0x38d450,_0x1406e6,_0x112d6f,messageTypes[_0x28c6f0(0x211)],_0xade642[_0x28c6f0(0x232)],_0xade642[_0x28c6f0(0x2cc)],_0xade642[_0x28c6f0(0x2b0)]),logger[_0x28c6f0(0x2d0)](_0x112d6f);if(!_0x38d450[_0x28c6f0(0x238)]){if(_0xade642[_0x28c6f0(0x252)](_0xade642[_0x28c6f0(0x266)],_0xade642[_0x28c6f0(0x266)])){const _0x574dfd={};_0x574dfd['description']=_0xade642['psuMu'],_0x574dfd[_0x28c6f0(0x2de)]=_0xade642[_0x28c6f0(0x2c5)];const _0x3b023c={};_0x3b023c['description']=_0xade642['pnybM'],_0x3b023c[_0x28c6f0(0x2de)]=_0xade642['pfyvS'];const _0x7ab645={};_0x7ab645[_0x28c6f0(0x28e)]=_0xade642[_0x28c6f0(0x1fd)],_0x7ab645[_0x28c6f0(0x2de)]=_0xade642[_0x28c6f0(0x2c5)];const _0x4f9dc7={};_0x4f9dc7[_0x28c6f0(0x28e)]=_0xade642[_0x28c6f0(0x23d)],_0x4f9dc7[_0x28c6f0(0x2de)]=_0xade642['pfyvS'];const _0x5c2f44={};return _0x5c2f44[_0x28c6f0(0x24f)]=_0x574dfd,_0x5c2f44[_0x28c6f0(0x2c7)]=_0x3b023c,_0x5c2f44[_0x28c6f0(0x1f9)]=_0x7ab645,_0x5c2f44['grid-profile']=_0x4f9dc7,_0x328151[_0x28c6f0(0x2c2)](_0x2ed1bf[_0x28c6f0(0x253)])[_0x28c6f0(0x2cb)](_0x281248)[_0x28c6f0(0x26e)](_0x5c2f44)[_0x28c6f0(0x284)](_0xade642['OHOeC'])[_0x28c6f0(0x29f)];}else logger[_0x28c6f0(0x204)](_0x28c6f0(0x226)+DEFAULT_CLUSTER_DETAILS['CLOUD_PROVIDER']+'\x20'),_0x38d450['cloudProvider']=DEFAULT_CLUSTER_DETAILS[_0x28c6f0(0x2b5)];}}}global_registry['clusterName']=_0x38d450[_0x28c6f0(0x2e4)],global_registry[_0x28c6f0(0x238)]=_0x38d450[_0x28c6f0(0x238)],global_registry[_0x28c6f0(0x22d)]=_0x38d450[_0x28c6f0(0x1f9)];}else _0x3c171f[_0x28c6f0(0x204)]('['+_0x4b4d63+_0x28c6f0(0x1fa)+_0x233785[_0x28c6f0(0x2b3)]+'\x20data\x20:\x20'+_0x18d16d[_0x28c6f0(0x2f5)]+_0x28c6f0(0x21d)+_0x57074[_0x28c6f0(0x2d0)]),_0x56ab0e[_0x28c6f0(0x2d0)]&&_0x53fae1[_0x28c6f0(0x2d0)]('error\x20stack\x20:\x20'+_0x317d53['error'][_0x28c6f0(0x23c)]);}else{if(_0x38d450['gridProfile']){if(_0xade642[_0x28c6f0(0x2db)](_0xade642[_0x28c6f0(0x2ba)],_0xade642['MdDIZ']))_0x1733a2+=_0xade642[_0x28c6f0(0x21c)],_0x4dc65c+=_0x28c6f0(0x287)+(_0x592197[_0x28c6f0(0x2b7)]||_0xade642[_0x28c6f0(0x24d)])+'\x0a',_0x412c48+='\x20\x20Code:\x20'+(_0x327231[_0x28c6f0(0x2ae)]||_0xade642['LMRIi'])+'\x0a',_0x50ada6+='\x20\x20Stack:\x20'+(_0x534dcf[_0x28c6f0(0x23c)]||_0xade642[_0x28c6f0(0x24d)])+'\x0a';else{global_registry['gridProfile']=_0x38d450[_0x28c6f0(0x243)],logger['debug'](_0x28c6f0(0x290)+_0x38d450['gridProfile']);const _0x4cf787=_0x28c6f0(0x295)+AG_API_URL+'/packages/cli/get-all-grid-profiles',_0x4c584d={};_0x4c584d[_0x28c6f0(0x2aa)]=_0xade642[_0x28c6f0(0x2cd)],_0x4c584d['headers']=global_registry[_0x28c6f0(0x281)],_0x4c584d[_0x28c6f0(0x291)]=![];const _0x5d30d1=_0x4c584d,_0x396620=await _0xade642['LdJfu'](got,_0x4cf787,_0x5d30d1),_0xaf0fb4=await _0xade642[_0x28c6f0(0x24a)](responseValidation,_0x396620,_0xade642[_0x28c6f0(0x298)],_0xade642[_0x28c6f0(0x28c)],_0x38d450,_0x1406e6);let _0x4ec99a={};if(_0xade642[_0x28c6f0(0x205)](_0xaf0fb4,0xc8)){if(_0xade642[_0x28c6f0(0x215)](_0xade642['gQxsB'],_0xade642[_0x28c6f0(0x2f8)])){const _0x363b12=JSON[_0x28c6f0(0x28b)](_0x396620['body']),_0x383af7=_0x363b12['find'](_0x38da21=>_0x38da21[_0x28c6f0(0x2bc)]===_0x38d450[_0x28c6f0(0x243)])||null;if(_0xade642[_0x28c6f0(0x25f)](isUndefined,_0x383af7)){if(_0xade642[_0x28c6f0(0x2a4)](_0xade642[_0x28c6f0(0x2b4)],_0xade642[_0x28c6f0(0x1f3)]))_0x112d6f=_0x28c6f0(0x270)+_0x38d450[_0x28c6f0(0x243)]+_0x28c6f0(0x21f),await _0xade642[_0x28c6f0(0x24c)](reportToGalactusAndSendToEDS,_0x38d450,_0x1406e6,_0x112d6f,messageTypes[_0x28c6f0(0x211)],_0xade642[_0x28c6f0(0x232)],_0xade642[_0x28c6f0(0x259)],_0xade642['EOSqJ']),logger[_0x28c6f0(0x2d0)](_0x112d6f),process[_0x28c6f0(0x29a)](0x1);else{const {header:_0x566dec,response:_0x30a0f9}=_0xf8b146,{status:_0x47990b,data:_0x11b689,error:_0x4dec74}=_0x30a0f9;_0x154eeb+=_0x566dec+'\x20#'+_0xade642[_0x28c6f0(0x2df)](_0x53fe91,0x1)+'\x0a',_0xb16e0d+=_0x28c6f0(0x29c)+(_0x47990b?_0xade642[_0x28c6f0(0x29b)]:_0xade642[_0x28c6f0(0x233)])+'\x0a',_0x1f2c34+=_0x28c6f0(0x273)+_0xade642[_0x28c6f0(0x296)](_0x11b689,_0xade642[_0x28c6f0(0x24d)])+'\x0a',_0x4dec74&&(_0x6764f9+=_0xade642['VYiNw'],_0x5da3b9+=_0x28c6f0(0x287)+(_0x4dec74[_0x28c6f0(0x2b7)]||_0xade642[_0x28c6f0(0x24d)])+'\x0a',_0x2c6a88+=_0x28c6f0(0x218)+(_0x4dec74['code']||_0xade642[_0x28c6f0(0x24d)])+'\x0a',_0x8b39ae+=_0x28c6f0(0x2b1)+(_0x4dec74[_0x28c6f0(0x23c)]||_0xade642['LMRIi'])+'\x0a'),_0x32349e+='\x0a\x0a';}}else _0xade642['IcRHG'](_0xade642[_0x28c6f0(0x260)],_0xade642[_0x28c6f0(0x274)])?_0x46720e[_0x28c6f0(0x2f0)](_0xade642[_0x28c6f0(0x22c)]):_0x4ec99a=_0x383af7;}else _0x5376c3['push'](_0xade642[_0x28c6f0(0x2ca)]);}else _0xade642[_0x28c6f0(0x225)](_0xade642[_0x28c6f0(0x1fc)],_0xade642[_0x28c6f0(0x22a)])?process[_0x28c6f0(0x29a)](0x1):_0x3e76b5[_0x28c6f0(0x2f0)](_0xade642['YcRuS']);const _0xd1bc18={};_0xd1bc18[_0x28c6f0(0x2de)]=WS_EVENTS['LOG'],_0xd1bc18[_0x28c6f0(0x2b7)]=_0xade642[_0x28c6f0(0x299)],webSocketUtils['sendEventToBackend'](_0x1406e6,_0xd1bc18),global_registry[_0x28c6f0(0x238)]=_0x4ec99a[_0x28c6f0(0x238)],global_registry[_0x28c6f0(0x22d)]=_0x4ec99a[_0x28c6f0(0x1f9)],global_registry['clusterName']=_0x4ec99a[_0x28c6f0(0x2e4)];}}else{if(_0xade642[_0x28c6f0(0x216)](_0xade642[_0x28c6f0(0x262)],_0xade642[_0x28c6f0(0x22b)])){const _0xf7b7bd={};_0xf7b7bd[_0x28c6f0(0x2de)]=_0x5ab64e[_0x28c6f0(0x258)],_0xf7b7bd['message']=_0x16a488,_0x3ad63a['sendEventToBackend'](_0x13cdb2,_0xf7b7bd,_0xade642['EOSqJ'],!![]);}else logger[_0x28c6f0(0x2d0)](_0xade642[_0x28c6f0(0x2b6)]),process[_0x28c6f0(0x29a)](0x1);}}}else _0xaff18d[_0x28c6f0(0x204)](_0x28c6f0(0x200)+_0x1298af[_0x28c6f0(0x2e4)]+'`\x20already\x20exists');}catch(_0xadf6f9){_0xade642['LTOQd'](_0xade642[_0x28c6f0(0x251)],_0xade642[_0x28c6f0(0x2b8)])?_0x4e7e35+=_0x28c6f0(0x277)+_0x5d026e[_0x28c6f0(0x2e4)]+'\x20'+(_0x2bbdbc?_0xade642['TPflA']:_0xade642['hMrQw'])+'\x0a\x0a':(_0x112d6f=_0x28c6f0(0x292)+_0xadf6f9+':\x20'+_0xadf6f9[_0x28c6f0(0x23c)],logger[_0x28c6f0(0x2d0)](_0x112d6f),await _0xade642[_0x28c6f0(0x2da)](reportToGalactusAndSendToEDS,_0x38d450,_0x1406e6,_0x112d6f,messageTypes[_0x28c6f0(0x211)],_0xade642['FBTfm'],_0xade642[_0x28c6f0(0x2cc)],_0xade642[_0x28c6f0(0x2b0)]),process[_0x28c6f0(0x29a)](0x1));}}function printResponse(_0x171b2d,_0x343cd9){const _0x2fcdc0=a17_0xf7e438,_0x3fada1={};_0x3fada1['dNxRr']=function(_0x2f0d6b,_0x1e868f){return _0x2f0d6b!==_0x1e868f;},_0x3fada1[_0x2fcdc0(0x2ea)]=_0x2fcdc0(0x21e);const _0xf2f8b3=_0x3fada1;logger[_0x2fcdc0(0x204)]('['+_0x171b2d+_0x2fcdc0(0x1fa)+_0x343cd9[_0x2fcdc0(0x2b3)]+_0x2fcdc0(0x27e)+_0x343cd9[_0x2fcdc0(0x2f5)]+_0x2fcdc0(0x21d)+_0x343cd9[_0x2fcdc0(0x2d0)]),_0x343cd9[_0x2fcdc0(0x2d0)]&&(_0xf2f8b3['dNxRr'](_0xf2f8b3['oLxQI'],_0xf2f8b3['oLxQI'])?_0x2e4d86[_0x2fcdc0(0x29a)](0x1):logger['error'](_0x2fcdc0(0x1f7)+_0x343cd9[_0x2fcdc0(0x2d0)]['stack']));}async function generateReport(_0x58d437,_0x4bce7b){const _0x2b1566=a17_0xf7e438,_0x483dcf={'kwHab':function(_0x48428d,_0x2df813){return _0x48428d+_0x2df813;},'ekxJA':_0x2b1566(0x202),'pWsGe':_0x2b1566(0x2d9),'hTrOL':function(_0x49c3cb,_0x4f553f){return _0x49c3cb||_0x4f553f;},'KiCGm':'N/A','MVAFd':_0x2b1566(0x2c0),'mVJnS':_0x2b1566(0x28a),'komFc':function(_0x45c361,_0x16fefd){return _0x45c361!=_0x16fefd;},'UUUFJ':'is\x20already\x20present','aJWxE':_0x2b1566(0x237),'ZGGaF':function(_0x56a03f){return _0x56a03f();}};let _0x266569=_0x2b1566(0x2ed)+global_registry[_0x2b1566(0x238)]+'\x20===\x0a\x0a';return _0x58d437['forEach']((_0x4ae67a,_0x5e05ac)=>{const _0x3fcce2=_0x2b1566,{header:_0x26497a,response:_0x16ef01}=_0x4ae67a,{status:_0x56f12d,data:_0x4f7d66,error:_0x6ed69e}=_0x16ef01;_0x266569+=_0x26497a+'\x20#'+_0x483dcf[_0x3fcce2(0x201)](_0x5e05ac,0x1)+'\x0a',_0x266569+=_0x3fcce2(0x29c)+(_0x56f12d?_0x483dcf['ekxJA']:_0x483dcf[_0x3fcce2(0x2ad)])+'\x0a',_0x266569+=_0x3fcce2(0x273)+_0x483dcf[_0x3fcce2(0x280)](_0x4f7d66,_0x483dcf[_0x3fcce2(0x2af)])+'\x0a',_0x6ed69e&&(_0x266569+=_0x483dcf[_0x3fcce2(0x1f4)],_0x266569+=_0x3fcce2(0x287)+(_0x6ed69e[_0x3fcce2(0x2b7)]||_0x483dcf[_0x3fcce2(0x2af)])+'\x0a',_0x266569+=_0x3fcce2(0x218)+(_0x6ed69e['code']||_0x483dcf[_0x3fcce2(0x2af)])+'\x0a',_0x266569+=_0x3fcce2(0x2b1)+(_0x6ed69e[_0x3fcce2(0x23c)]||_0x483dcf[_0x3fcce2(0x2af)])+'\x0a'),_0x266569+='\x0a\x0a';}),_0x266569+=_0x483dcf[_0x2b1566(0x246)],_0x483dcf['komFc'](_0x4bce7b,null)?_0x266569+=_0x2b1566(0x277)+global_registry[_0x2b1566(0x2e4)]+'\x20'+(_0x4bce7b?_0x483dcf[_0x2b1566(0x224)]:_0x483dcf[_0x2b1566(0x208)])+'\x0a\x0a':_0x266569+=_0x2b1566(0x277)+global_registry[_0x2b1566(0x2e4)]+_0x2b1566(0x2b9),_0x266569+=_0x483dcf[_0x2b1566(0x24e)](getSystemMetaData),_0x266569;}function a17_0x4de5(){const _0x1a2872=['Lxwoh','577688XmpqUy','isTls1_2_SUPPORTED','command','\x20data\x20:\x20','reconnecting-websocket','hTrOL','authHeader','grid-profile','INFO','help','../../config/logger','<UsernamePlaceholder>','\x20\x20Message:\x20','ZcfBP','xEEbi','Cluster\x20details\x0a-----------------------\x0a','parse','XMUsK','4718595kWwonw','description','Pre-check\x20running\x20for\x20Cloud\x20-\x20','grid\x20profile\x20flow\x20','throwHttpErrors','Error\x20in\x20input\x20validation\x20while\x20pre-check\x20-\x20','sendEventToBackend','jhftq','https://','axnab','Browserstack','vyuMN','JidYp','exit','jEEWr','Status:\x20','stringify','../../cloudproviders/utils','argv','lWqnW','eYYJX','Missing\x20required\x20arguments:\x20','existsSync','wTTzN','9WKufAp','103621lnsYtk','replace','CBpFG','sJSiv','method','LwcDt','WeUyy','pWsGe','code','KiCGm','EOSqJ','\x20\x20Stack:\x20','qQFkI','status','Klndq','CLOUD_PROVIDER','WoryR','message','zpuOv','\x20details\x20cannot\x20be\x20fetched\x0a\x0a','GlDEc','Create\x20a\x20grid\x20in\x20existing\x20Kubernetes\x20Cluster\x20on\x20AWS/Azure/GCP.','name','QACwp','CpTDS','Pass\x20the\x20name\x20of\x20cloud\x20provider\x20for\x20existing\x20Kubernetes\x20Cluster.','Error\x20Details:\x0a','Failed\x20in\x20pre-check!\x20Error:\x20','usage','readFileSync','WZsZc','pfyvS','includes','cloud-provider','CZbyA','Report\x20saved\x20in\x20','BpjZW','epilogue','HJsQm','LlwTF','eDBoQ','CdNRz','error','wEpRH','builder','eDfco','accessResp','.txt','cqCyJ','writeFileSync','jHdWn','Failure','kWQCS','LTOQd','pre-check-grid-profile-empty','utf-8','type','qlyDJ','12748MUXuSf','toLowerCase','connectionTimeout','isCliToolInstalled','clusterName','pre-check-failed','getUTCDate','tPMge','iRZSF','vvoqO','oLxQI','286ETqukw','string','===\x20Precheck\x20Report\x20-\x20','mWrGG','wHImJ','push','join','4QTLSpJ','745068pBScxK','getUTCMonth','data','`\x20already\x20exists','Vshfe','eYkyu','412860WdThOQ','got','toolInstalledResp','pre-check-grid-called','debug','Use\x20an\x20existing\x20grid\x20profile\x20to\x20setup\x20the\x20Automation\x20Grid.\x20By\x20default,\x20configured\x20profile\x20is\x20used.','BGIir','91QfXSdS','ldrGC','fdYOF','MVAFd','XEoSM','password','error\x20stack\x20:\x20','../../utils/utilityMethods','region',']\x20status\x20:\x20','response','GaMOl','uACJy','pre-check','uIhiE','Cluster\x20`','kwHab','Success','username','info','jHOWO','kJRlY','132wUPjZx','aJWxE','RmGSd','Whitelisted\x20browserstack','`\x20,error\x20:\x20','341232xWkcBw','yJpIf','djvKQ','mnIGH','kGtaz','ERROR','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','IHmBM','split','ddiBs','Ijdfl','ZyYRz','\x20\x20Code:\x20','requestId','.\x20Please\x20provide\x20all\x20required\x20arguments.','Missing\x20required\x20arguments.\x20Please\x20provide\x20either\x20grid\x20profile\x20or\x20cluster\x20details\x20(cluser-name\x20,\x20cloud\x20provider\x20&\x20region','VYiNw','\x20error\x20:\x20','igzik','.\x20please\x20verify\x20the\x20grid\x20profile\x20name\x20and\x20try\x20again','getUTCMinutes','HrLHH','delay','getUTCHours','UUUFJ','pIejg','Setting\x20cloud\x20provider\x20as\x20','xFkjd','log/report_','TzAzi','Mtrid','pBjJo','UUZLx','clusterRegion','tYZBJ','bstackUsername','checkAccess','length','FBTfm','NEJgb','TLSv1_2_client_method','OFUil','bstackAccesskey','will\x20be\x20created','cloudProvider','Qvtln','dummy-grid','../../utils/webSocketUtils','stack','SvvTj','bgViP','DXLFG','Check\x20the\x20pre-requisites\x20needed\x20for\x20Automation\x20grid\x20setup','wGnnv','AyQQb','gridProfile','VJVKQ','EhRpP','mVJnS','YcRuS','Pass\x20the\x20region\x20for\x20existing\x20Kubernetes\x20Cluster.','header','dVYst','credential-not-found','aQhxg','LMRIi','ZGGaF','cluster-name','NBltR','MRRAo','ItNCy','pre_check','gCwHF','PjLxH','312wYVgiV','FNPQu','LOG','liglr','cluster-check-failed-','Invalid\x20input.\x20Currently\x20the\x20automation\x20grid\x20in\x20AWS,\x20AZURE\x20&\x20GCP\x20cloud\x20provider\x20is\x20supported\x20using\x20CLI.','getUTCFullYear','\x20region\x20-\x20','qrIAW','ZpmtY','mLByD','pTHTj','udrqh','GET','HChvA','User\x20Access','WpQKm','cFoFQ','FmKuA','`\x20is\x20present\x20in\x20region\x20`','fLyyq','init','fyCkT','unable\x20to\x20verify\x20if\x20cluster\x20`','options','kAoxV','Invalid\x20input.\x20grid\x20profiles:\x20','epRHU','OqppP','Message:\x20','oBVoj','GipnE','MvUXZ','Cluster\x20','Grid\x20profile\x20fetched\x20for\x20pre-check','FZLej'];a17_0x4de5=function(){return _0x1a2872;};return a17_0x4de5();}function a17_0x209e(_0x1bf82f,_0x565496){const _0x4de5f8=a17_0x4de5();return a17_0x209e=function(_0x209ea0,_0x3713c3){_0x209ea0=_0x209ea0-0x1eb;let _0x61af26=_0x4de5f8[_0x209ea0];return _0x61af26;},a17_0x209e(_0x1bf82f,_0x565496);};exports['handler']=async function(_0x7f845a){const _0xff1aed=a17_0xf7e438,_0x2e35fa={'VJVKQ':function(_0x33dd42){return _0x33dd42();},'EhRpP':function(_0x583af0){return _0x583af0();},'ZcfBP':_0xff1aed(0x212),'HChvA':function(_0x223f86,_0x5ca29a,_0x61e2c4,_0x2b5c0b,_0x584ed2,_0xa69d23,_0x505129,_0x248829){return _0x223f86(_0x5ca29a,_0x61e2c4,_0x2b5c0b,_0x584ed2,_0xa69d23,_0x505129,_0x248829);},'wHImJ':_0xff1aed(0x1ed),'DXLFG':_0xff1aed(0x24b),'wEpRH':_0xff1aed(0x2d0),'QACwp':function(_0x460da5,_0x5a735f,_0x45c46a,_0x2b8fab,_0x3e999b,_0xc920ab,_0x3362e2){return _0x460da5(_0x5a735f,_0x45c46a,_0x2b8fab,_0x3e999b,_0xc920ab,_0x3362e2);},'wGnnv':_0xff1aed(0x286),'epRHU':'<PasswordPlaceholder>','yJpIf':function(_0x52f5fa,_0xd9d7ea,_0x26e1f0){return _0x52f5fa(_0xd9d7ea,_0x26e1f0);},'lWqnW':function(_0x2fc952,_0x52fbd4,_0x1ba375){return _0x2fc952(_0x52fbd4,_0x1ba375);},'XCQmH':_0xff1aed(0x23a),'TzAzi':function(_0x37dbb2,_0x1499d2,_0x58b646){return _0x37dbb2(_0x1499d2,_0x58b646);},'GNoks':_0xff1aed(0x1ec),'xFkjd':'4|3|1|0|2','BGIir':function(_0x39e755,_0x10167e,_0x57c609,_0x1cd93c,_0xc2dd46,_0x468ed3,_0x3d3513,_0x3b6af7){return _0x39e755(_0x10167e,_0x57c609,_0x1cd93c,_0xc2dd46,_0x468ed3,_0x3d3513,_0x3b6af7);},'HrLHH':_0xff1aed(0x2d4),'WZsZc':'isTrialGridAccessible','cwhta':function(_0x2f2fdc,_0x179d24){return _0x2f2fdc(_0x179d24);},'XEoSM':_0xff1aed(0x234),'fyCkT':_0xff1aed(0x27c),'eYYJX':'Tool\x20Installed','pTHTj':_0xff1aed(0x265),'vOuzr':_0xff1aed(0x20a),'djvKQ':'SSL\x20Configured','LwcDt':function(_0x79fe00,_0x45c6fc,_0x2bb32e){return _0x79fe00(_0x45c6fc,_0x2bb32e);},'RmGSd':function(_0x5e40d4,_0x300eef){return _0x5e40d4+_0x300eef;},'HAnOG':_0xff1aed(0x2dd),'mnIGH':function(_0x522b50,_0x1ac0cb,_0xd95547,_0x19ca89,_0x166e79,_0x8ea933,_0x426e01){return _0x522b50(_0x1ac0cb,_0xd95547,_0x19ca89,_0x166e79,_0x8ea933,_0x426e01);},'mWrGG':_0xff1aed(0x2e5)};let _0xee1452,_0x13d01a;try{global_registry[_0xff1aed(0x219)]=_0x2e35fa[_0xff1aed(0x244)](uuidv4);!fs[_0xff1aed(0x2a3)](_0x2e35fa[_0xff1aed(0x245)](getCredentialsPath))&&(_0x13d01a=_0x2e35fa[_0xff1aed(0x288)],logger[_0xff1aed(0x2d0)](_0x13d01a),await _0x2e35fa[_0xff1aed(0x264)](reportToGalactusAndSendToEDS,_0x7f845a,_0xee1452,_0x13d01a,messageTypes['ERROR'],_0x2e35fa[_0xff1aed(0x2ef)],_0x2e35fa[_0xff1aed(0x23f)],_0x2e35fa[_0xff1aed(0x2d1)]),process['exit'](0x1));_0x2e35fa[_0xff1aed(0x2bd)](sendInstrumentationEvent,_0x7f845a,_0x2e35fa[_0xff1aed(0x2ef)],messageTypes[_0xff1aed(0x283)],null,null,_0x7f845a);const _0x4f7f9b=JSON[_0xff1aed(0x28b)](fs[_0xff1aed(0x2c3)](_0x2e35fa[_0xff1aed(0x245)](getCredentialsPath)));global_registry[_0xff1aed(0x22f)]=_0x4f7f9b[_0xff1aed(0x297)]['username'],global_registry[_0xff1aed(0x236)]=_0x4f7f9b[_0xff1aed(0x297)][_0xff1aed(0x1f6)];const _0x2acfc9=WS_ENDPOINT[_0xff1aed(0x2a7)](_0x2e35fa[_0xff1aed(0x241)],_0x4f7f9b['Browserstack'][_0xff1aed(0x203)])['replace'](_0x2e35fa[_0xff1aed(0x271)],_0x4f7f9b[_0xff1aed(0x297)]['password']),_0x5ce976={};_0x5ce976['WebSocket']=ws,_0x5ce976[_0xff1aed(0x2e2)]=0x36ee80,_0xee1452=new ReconnectingWebSocket(_0x2acfc9,[],_0x5ce976),global_registry[_0xff1aed(0x281)]=_0x2e35fa[_0xff1aed(0x20d)](getAuthHeader,global_registry[_0xff1aed(0x22f)],global_registry[_0xff1aed(0x236)]),await _0x2e35fa[_0xff1aed(0x2a0)](inputValidation,_0x7f845a,_0xee1452),logger[_0xff1aed(0x204)](_0xff1aed(0x28f)+global_registry[_0xff1aed(0x238)]+_0xff1aed(0x25d)+global_registry[_0xff1aed(0x22d)]);let _0x2360ad=await _0x2e35fa[_0xff1aed(0x2bd)](getCloudProviderObjectWithOutInit,global_registry[_0xff1aed(0x238)],global_registry[_0xff1aed(0x2e4)],_0x2e35fa['XCQmH'],_0xee1452,webSocketUtils,_0x7f845a);const _0x1b5e72=await _0x2360ad[_0xff1aed(0x2e3)]();_0x2e35fa[_0xff1aed(0x229)](printResponse,_0x2e35fa['GNoks'],_0x1b5e72),_0x2360ad=await _0x2360ad[_0xff1aed(0x26b)]();let _0x42512c=![];try{_0x42512c=await _0x2360ad['isClusterPresent']();}catch(_0x25256b){const _0x58124e=_0x2e35fa[_0xff1aed(0x227)][_0xff1aed(0x214)]('|');let _0x417aae=0x0;while(!![]){switch(_0x58124e[_0x417aae++]){case'0':_0x13d01a+='\x0a'+JSON['stringify'](_0x25256b[_0xff1aed(0x23c)]);continue;case'1':logger[_0xff1aed(0x2d0)](_0x13d01a);continue;case'2':await _0x2e35fa[_0xff1aed(0x1f0)](reportToGalactusAndSendToEDS,_0x7f845a,_0xee1452,_0x13d01a,messageTypes[_0xff1aed(0x211)],_0x2e35fa[_0xff1aed(0x2ef)],_0xff1aed(0x25a)+global_registry[_0xff1aed(0x238)],_0x2e35fa[_0xff1aed(0x2d1)]);continue;case'3':_0x42512c=null;continue;case'4':_0x13d01a=_0xff1aed(0x26d)+global_registry[_0xff1aed(0x2e4)]+_0xff1aed(0x269)+global_registry['clusterRegion']+_0xff1aed(0x20b)+_0x25256b;continue;}break;}}_0x42512c&&logger['info'](_0xff1aed(0x200)+global_registry[_0xff1aed(0x2e4)]+_0xff1aed(0x2f6));const _0x234be6=await _0x2360ad[_0xff1aed(0x230)]();_0x2e35fa[_0xff1aed(0x229)](printResponse,_0x2e35fa[_0xff1aed(0x221)],_0x234be6);const _0x2f5d8d=await _0x2e35fa['VJVKQ'](curlRequest);_0x2e35fa['yJpIf'](printResponse,_0x2e35fa[_0xff1aed(0x2c4)],_0x2f5d8d);const _0x5dbc28=await _0x2e35fa['cwhta'](isTlsSupported,_0x2e35fa[_0xff1aed(0x1f5)]);_0x2e35fa[_0xff1aed(0x20d)](printResponse,_0x2e35fa[_0xff1aed(0x26c)],_0x5dbc28);const _0x36b99e={};_0x36b99e[_0xff1aed(0x249)]=_0x2e35fa[_0xff1aed(0x2a1)],_0x36b99e[_0xff1aed(0x1fb)]=_0x1b5e72;const _0x3e133a={};_0x3e133a['header']=_0x2e35fa[_0xff1aed(0x261)],_0x3e133a[_0xff1aed(0x1fb)]=_0x234be6;const _0x5199ea={};_0x5199ea[_0xff1aed(0x249)]=_0x2e35fa['vOuzr'],_0x5199ea[_0xff1aed(0x1fb)]=_0x2f5d8d;const _0x12a12e={};_0x12a12e[_0xff1aed(0x249)]=_0x2e35fa[_0xff1aed(0x20e)],_0x12a12e[_0xff1aed(0x1fb)]=_0x5dbc28;const _0x4e741a=[_0x36b99e,_0x3e133a,_0x5199ea,_0x12a12e],_0x11efaa=await _0x2e35fa[_0xff1aed(0x2ab)](generateReport,_0x4e741a,_0x42512c),_0x4d7105=new Date(),_0x36398f=_0x4d7105[_0xff1aed(0x25c)]()+'_'+_0x2e35fa[_0xff1aed(0x209)](_0x4d7105[_0xff1aed(0x2f4)](),0x1)+'_'+_0x4d7105[_0xff1aed(0x2e6)]()+'_'+_0x4d7105[_0xff1aed(0x223)]()+'_'+_0x4d7105[_0xff1aed(0x220)](),_0x4c6e74=_0xff1aed(0x228)+_0x36398f+_0xff1aed(0x2d5);fs[_0xff1aed(0x2d7)](_0x4c6e74,_0x11efaa,_0x2e35fa['HAnOG']),logger[_0xff1aed(0x204)](_0xff1aed(0x2c9)+_0x4c6e74),process[_0xff1aed(0x29a)](0x0);}catch(_0x26cd72){let _0x479909=_0xff1aed(0x2c1)+_0x26cd72+'\x20';logger[_0xff1aed(0x2d0)](_0x479909),_0x479909+='\x0a'+JSON[_0xff1aed(0x29d)](_0x26cd72[_0xff1aed(0x23c)]),logger[_0xff1aed(0x1ee)]('stack\x20trace\x20'+_0x26cd72[_0xff1aed(0x23c)]);if(_0xee1452){const _0x4be8cb={};_0x4be8cb[_0xff1aed(0x2de)]=WS_EVENTS[_0xff1aed(0x258)],_0x4be8cb['message']=_0x479909,webSocketUtils[_0xff1aed(0x293)](_0xee1452,_0x4be8cb,_0x2e35fa['wEpRH'],!![]);}await webSocketUtils[_0xff1aed(0x222)](0x7d0);const _0x18021f={};_0x18021f[_0xff1aed(0x2d0)]=_0x479909,await _0x2e35fa[_0xff1aed(0x20f)](sendInstrumentationEvent,_0x7f845a,_0x2e35fa[_0xff1aed(0x2ef)],messageTypes[_0xff1aed(0x211)],_0x2e35fa[_0xff1aed(0x2ee)],_0x18021f,_0x7f845a),process[_0xff1aed(0x29a)](0x1);}};