const a17_0x5f34aa=a17_0x451d;(function(_0x1b5b4e,_0x50bb4b){const _0x51034f=a17_0x451d,_0x2981b7=_0x1b5b4e();while(!![]){try{const _0x1cd18b=parseInt(_0x51034f(0x1a3))/0x1*(-parseInt(_0x51034f(0x1dd))/0x2)+-parseInt(_0x51034f(0x235))/0x3+-parseInt(_0x51034f(0x184))/0x4+-parseInt(_0x51034f(0x22c))/0x5*(parseInt(_0x51034f(0x25d))/0x6)+parseInt(_0x51034f(0x183))/0x7*(-parseInt(_0x51034f(0x192))/0x8)+-parseInt(_0x51034f(0x1fe))/0x9*(parseInt(_0x51034f(0x1e8))/0xa)+parseInt(_0x51034f(0x199))/0xb;if(_0x1cd18b===_0x50bb4b)break;else _0x2981b7['push'](_0x2981b7['shift']());}catch(_0x248578){_0x2981b7['push'](_0x2981b7['shift']());}}}(a17_0x5d0b,0x530f4));const fs=require('fs'),ws=require('ws'),got=require(a17_0x5f34aa(0x176)),{v4:uuidv4}=require(a17_0x5f34aa(0x253)),ReconnectingWebSocket=require('reconnecting-websocket'),{getCredentialsPath,reportToGalactusAndSendToEDS,getAuthHeader,responseValidation,isUndefined,curlRequest,isTlsSupported,getSystemMetaData}=require(a17_0x5f34aa(0x214)),{logger}=require(a17_0x5f34aa(0x1e6)),{HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,global_registry,messageTypes,WS_ENDPOINT,WS_EVENTS,ALL_SUPPORTED_CLOUD_PROVIDERS,AG_API_URL,DEFAULT_CLUSTER_DETAILS}=require('../../config/constants'),{getCloudProviderObjectWithOutInit}=require(a17_0x5f34aa(0x1eb)),webSocketUtils=require(a17_0x5f34aa(0x205)),{sendInstrumentationEvent}=require(a17_0x5f34aa(0x1d8));function a17_0x451d(_0x454dab,_0x4f78f7){const _0x5d0b64=a17_0x5d0b();return a17_0x451d=function(_0x451dd6,_0x1d6f0d){_0x451dd6=_0x451dd6-0x176;let _0x442fda=_0x5d0b64[_0x451dd6];return _0x442fda;},a17_0x451d(_0x454dab,_0x4f78f7);}exports[a17_0x5f34aa(0x185)]='grid',exports[a17_0x5f34aa(0x1e1)]=a17_0x5f34aa(0x252),exports[a17_0x5f34aa(0x1fb)]=function(_0x367330){const _0x330398=a17_0x5f34aa,_0x19ed3={};_0x19ed3[_0x330398(0x243)]=_0x330398(0x1d7),_0x19ed3[_0x330398(0x1b7)]=_0x330398(0x1f1),_0x19ed3[_0x330398(0x24a)]='Pass\x20the\x20name\x20of\x20cloud\x20provider\x20for\x20existing\x20Kubernetes\x20Cluster.',_0x19ed3['SKLUr']='Pass\x20the\x20region\x20for\x20existing\x20Kubernetes\x20Cluster.',_0x19ed3[_0x330398(0x197)]=_0x330398(0x1bb),_0x19ed3[_0x330398(0x251)]=_0x330398(0x257);const _0x4d3191=_0x19ed3,_0x579b9e={};_0x579b9e[_0x330398(0x233)]=_0x4d3191[_0x330398(0x243)],_0x579b9e[_0x330398(0x1cb)]=_0x4d3191[_0x330398(0x1b7)];const _0x508589={};_0x508589[_0x330398(0x233)]=_0x4d3191['msaWS'],_0x508589[_0x330398(0x1cb)]=_0x4d3191[_0x330398(0x1b7)];const _0x37992a={};_0x37992a['description']=_0x4d3191[_0x330398(0x212)],_0x37992a[_0x330398(0x1cb)]=_0x4d3191[_0x330398(0x1b7)];const _0x15dfe1={};_0x15dfe1['description']=_0x4d3191[_0x330398(0x197)],_0x15dfe1[_0x330398(0x1cb)]=_0x4d3191[_0x330398(0x1b7)];const _0x283c7d={};return _0x283c7d[_0x330398(0x20b)]=_0x579b9e,_0x283c7d[_0x330398(0x1e5)]=_0x508589,_0x283c7d['region']=_0x37992a,_0x283c7d[_0x330398(0x1f0)]=_0x15dfe1,_0x367330[_0x330398(0x1ad)](HELP_HEADER_MESSAGE[_0x330398(0x261)])['epilogue'](HELP_FOOTER_MESSAGE)[_0x330398(0x1e2)](_0x283c7d)[_0x330398(0x257)](_0x4d3191[_0x330398(0x251)])['argv'];};function a17_0x5d0b(){const _0x46b46d=['authHeader','UKJQt','xsgDt','UQSSf','XxfnO','usage','dummy-grid','Status:\x20','stack\x20trace\x20','SODYY','writeFileSync','\x20\x20Code:\x20','vphNA','status','\x20===\x0a\x0a','xzDmh','lysSj','\x20details\x20cannot\x20be\x20fetched\x0a\x0a','cloudProvider','Use\x20an\x20existing\x20grid\x20profile\x20to\x20setup\x20the\x20Automation\x20Grid.\x20By\x20default,\x20configured\x20profile\x20is\x20used.','.\x20please\x20verify\x20the\x20grid\x20profile\x20name\x20and\x20try\x20again','getUTCFullYear',']\x20status\x20:\x20','isTrialGridAccessible','kyuTk','MnmXs','Cluster\x20`','accessResp','throwHttpErrors','FXbYo','`\x20,error\x20:\x20','ThjvM','iDmqD','roBeg','N/A','type','mdeMO','feFyN','CyUJJ','HROdv','log/report_','message','Nilpq','Failed\x20in\x20pre-check!\x20Error:\x20','PwvLF','mRDGS','meBmF','Create\x20a\x20grid\x20in\x20existing\x20Kubernetes\x20Cluster\x20on\x20AWS/Azure/GCP.','../../utils/instrumentationUtils','hsQzf','sendEventToBackend','parse','IXHOJ','151862brtpQH','\x20\x20Stack:\x20','Error\x20Details:\x0a','ppsMA','desc','options','vazCl','plrkj','cloud-provider','../../config/logger','fHvlO','10gLmoKI','code','WbHYv','../../cloudproviders/utils','error','yCJcD','body','debug','grid-profile','string','existsSync','readFileSync','isTls1_2_SUPPORTED','obxGL','cluster-check-failed-','BTqkw','`\x20already\x20exists','<UsernamePlaceholder>','gridProfile','builder','BITYj','ACqBV','4132494IDRDbo','IhKZl','iIBKw','length','pre-check-grid-profile-empty','Missing\x20required\x20arguments:\x20','header','../../utils/webSocketUtils','Setting\x20cloud\x20provider\x20as\x20','\x20\x20Message:\x20','jEDyx','Error\x20in\x20input\x20validation\x20while\x20pre-check\x20-\x20','EbOdi','cluster-name','FSrQw','Browserstack','replace','delay','RxCHC','QLrTY','SKLUr','HAVDU','../../utils/utilityMethods','RoMuQ','https://','GqAxC','epilogue','NZCVN','is\x20already\x20present','Invalid\x20input.\x20Currently\x20the\x20automation\x20grid\x20in\x20AWS,\x20AZURE\x20&\x20GCP\x20cloud\x20provider\x20is\x20supported\x20using\x20CLI.','LfNUh','VztAy','data','stack','vLGVA','Success','bnzWT','`\x20is\x20present\x20in\x20region\x20`','mqlUF','method','getUTCDate','pre-check','zQbQl','CXDMG','/packages/cli/get-all-grid-profiles','GET','35ngkwSB','clusterRegion','oqAPn','QUODX','exit','yAQdE','osyRl','description','TLSv1_2_client_method','1953546kMEIwb','EItFQ','connectionTimeout','will\x20be\x20created','ZSSEk','Tool\x20Installed','join','init','IHqZy','RqkTi','khAZl','rYsEh','CLOUD_PROVIDER','Failure','mClaZ','ORkIz','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','bflxf','credential-not-found','push','\x20data\x20:\x20','msaWS','forEach','AbjWy','info','<PasswordPlaceholder>','TZFcW','qQydH','gJZjy','Check\x20the\x20pre-requisites\x20needed\x20for\x20Automation\x20grid\x20setup','uuid','UZvFi','region','csozy','help','SMFtg','vJuvx','eppMs','bstackUsername','gROtS','90798XWaIsW','response','IWtkR','OoVQz','pre_check','QjtAZ','lLPqo','pre-check-cluster-args-not-passed','SBvgo','weyxV','HIQBc','QdxpQ','got','ZYUoA','vYUfd','LZxqm','WebSocket','User\x20Access','hxNsS','rZekS','clusterName','Pre-check\x20running\x20for\x20Cloud\x20-\x20','opDhq','XVCiE','sPHiR','14tMgNrA','635452gmpJrd','command','LOG','mDJIl','Pass\x20the\x20region\x20for\x20existing\x20Kubernetes\x20Cluster.','FkPpz','zwQvZ','Grid\x20profile\x20fetched\x20for\x20pre-check','username','dJZvY','vdWEM','OKrTV','unable\x20to\x20verify\x20if\x20cluster\x20`','QmDfr','2555416DozblO','includes','MYDPr','stringify','HYhUw','pgocG','.txt','27566770oujFRp','pre-check-grid-called','Cluster\x20','xQlsR','Message:\x20','split','error\x20stack\x20:\x20','AEXdt','toLowerCase','IWMps','2lzXlDq','getUTCMinutes','QMXTR','ERROR','UBVGn'];a17_0x5d0b=function(){return _0x46b46d;};return a17_0x5d0b();}async function inputValidation(_0x27eb19,_0x262f85){const _0x120e9e=a17_0x5f34aa,_0x115ca1={'LfNUh':'Error\x20Details:\x0a','HYhUw':_0x120e9e(0x1ca),'eppMs':'Create\x20a\x20grid\x20in\x20existing\x20Kubernetes\x20Cluster\x20on\x20AWS/Azure/GCP.','sPHiR':_0x120e9e(0x1f1),'XVCiE':'Pass\x20the\x20name\x20of\x20cloud\x20provider\x20for\x20existing\x20Kubernetes\x20Cluster.','brNko':_0x120e9e(0x188),'osyRl':_0x120e9e(0x1bb),'dJZvY':_0x120e9e(0x257),'iDmqD':_0x120e9e(0x21a),'ThjvM':'will\x20be\x20created','XxfnO':_0x120e9e(0x255),'IhKZl':_0x120e9e(0x1e5),'mRDGS':_0x120e9e(0x1ec),'vhAFH':function(_0x4c5766,_0x50573e){return _0x4c5766+_0x50573e;},'vphNA':_0x120e9e(0x221),'CXDMG':'Failure','meBmF':function(_0x291bd2,_0xd7678c){return _0x291bd2||_0xd7678c;},'UQSSf':_0x120e9e(0x20b),'MnmXs':'Missing\x20required\x20arguments.\x20Please\x20provide\x20either\x20grid\x20profile\x20or\x20cluster\x20details\x20(cluser-name\x20,\x20cloud\x20provider\x20&\x20region','WbHYv':function(_0x32a041,_0x1d1976){return _0x32a041===_0x1d1976;},'sKirJ':_0x120e9e(0x1dc),'fHvlO':'pVcik','obxGL':function(_0x4d4a4a,_0x1d1981){return _0x4d4a4a!==_0x1d1981;},'QMXTR':_0x120e9e(0x18a),'weyxV':_0x120e9e(0x1ed),'vYUfd':_0x120e9e(0x210),'lLPqo':function(_0x4715ed,_0x53c339){return _0x4715ed===_0x53c339;},'khAZl':'aPqsV','SMFtg':function(_0x188b1c,_0x1f1cfe){return _0x188b1c>_0x1f1cfe;},'cLuZJ':function(_0x36ac68,_0xbfccce){return _0x36ac68!==_0xbfccce;},'QUODX':'QNMjI','spIve':function(_0x3794de,_0x54b9a5,_0x4efbb1,_0x31e06e,_0x48369d,_0x1478c7,_0x504881,_0xf7acd8){return _0x3794de(_0x54b9a5,_0x4efbb1,_0x31e06e,_0x48369d,_0x1478c7,_0x504881,_0xf7acd8);},'ppsMA':_0x120e9e(0x19a),'bBstr':_0x120e9e(0x264),'gROtS':_0x120e9e(0x1a0),'pTqdF':_0x120e9e(0x179),'PBvIB':_0x120e9e(0x21b),'oqAPn':'cloud-provider-not-supported','PwvLF':_0x120e9e(0x262),'mqlUF':_0x120e9e(0x236),'FXbYo':_0x120e9e(0x1d9),'hxNsS':_0x120e9e(0x22b),'FSrQw':function(_0x490de4,_0xd40d8d,_0x493429){return _0x490de4(_0xd40d8d,_0x493429);},'pEWTX':function(_0x45f5fa,_0x45fb04,_0x4ee7b9,_0x54dd6a,_0xcd710e,_0x205b77){return _0x45f5fa(_0x45fb04,_0x4ee7b9,_0x54dd6a,_0xcd710e,_0x205b77);},'AbjWy':_0x120e9e(0x227),'vdWEM':_0x120e9e(0x1f0),'mnUfo':function(_0x4edbf4,_0x4851d3){return _0x4edbf4===_0x4851d3;},'QdxpQ':function(_0x5a04a6,_0x1d7c22){return _0x5a04a6!==_0x1d7c22;},'Erfdr':_0x120e9e(0x1fd),'RoMuQ':_0x120e9e(0x231),'ORkIz':function(_0x9b9ffb,_0x4dd3b3){return _0x9b9ffb(_0x4dd3b3);},'NZCVN':function(_0x2de4a8,_0x2d7bf0){return _0x2de4a8===_0x2d7bf0;},'HAVDU':_0x120e9e(0x25f),'Nilpq':function(_0x991385,_0x5c4bed,_0x45f222,_0x5cc9f3,_0x4fb661,_0x2698fa,_0x3f8d28,_0x236167){return _0x991385(_0x5c4bed,_0x45f222,_0x5cc9f3,_0x4fb661,_0x2698fa,_0x3f8d28,_0x236167);},'rZekS':_0x120e9e(0x202),'csozy':function(_0x198d2c,_0x3e60b3){return _0x198d2c!==_0x3e60b3;},'GqAxC':_0x120e9e(0x1a9),'MYDPr':function(_0x2fe162,_0x2a0d91){return _0x2fe162!==_0x2a0d91;},'mdeMO':_0x120e9e(0x177),'KrWIm':_0x120e9e(0x18b),'ZaYrS':function(_0x4eee23,_0x48d281){return _0x4eee23!==_0x48d281;},'HIQBc':'WKqTq','TZFcW':_0x120e9e(0x21d),'xQlsR':function(_0x4754b4,_0x180284){return _0x4754b4===_0x180284;},'SODYY':_0x120e9e(0x1fc),'IHqZy':function(_0x1ce4aa,_0xe709e5,_0x4a1d53,_0x4af4e0,_0x355a3f,_0x1b314f,_0x6c7536,_0x24bff4){return _0x1ce4aa(_0xe709e5,_0x4a1d53,_0x4af4e0,_0x355a3f,_0x1b314f,_0x6c7536,_0x24bff4);}};let _0x3b7803;try{if(_0x115ca1[_0x120e9e(0x1ea)](_0x115ca1['sKirJ'],_0x115ca1[_0x120e9e(0x1e7)]))_0x52192e+=_0x115ca1[_0x120e9e(0x21c)],_0x5cbcc0+=_0x120e9e(0x207)+(_0x2a82bd[_0x120e9e(0x1d1)]||_0x115ca1[_0x120e9e(0x196)])+'\x0a',_0xf9f054+=_0x120e9e(0x1b3)+(_0x13af02[_0x120e9e(0x1e9)]||_0x115ca1[_0x120e9e(0x196)])+'\x0a',_0x4d50ef+=_0x120e9e(0x1de)+(_0x1d61b3[_0x120e9e(0x21f)]||_0x115ca1[_0x120e9e(0x196)])+'\x0a';else{if(_0x27eb19['clusterName']||_0x27eb19[_0x120e9e(0x1ba)]||_0x27eb19[_0x120e9e(0x255)]){if(_0x115ca1[_0x120e9e(0x1f5)](_0x115ca1[_0x120e9e(0x1a5)],_0x115ca1[_0x120e9e(0x1a5)])){const _0x488f8d={};_0x488f8d[_0x120e9e(0x233)]=_0x115ca1[_0x120e9e(0x25a)],_0x488f8d[_0x120e9e(0x1cb)]=_0x115ca1['sPHiR'];const _0x1f54c3={};_0x1f54c3[_0x120e9e(0x233)]=_0x115ca1[_0x120e9e(0x181)],_0x1f54c3[_0x120e9e(0x1cb)]=_0x115ca1[_0x120e9e(0x182)];const _0x51b651={};_0x51b651[_0x120e9e(0x233)]=_0x115ca1['brNko'],_0x51b651[_0x120e9e(0x1cb)]=_0x115ca1[_0x120e9e(0x182)];const _0x5d3298={};_0x5d3298['description']=_0x115ca1[_0x120e9e(0x232)],_0x5d3298[_0x120e9e(0x1cb)]=_0x115ca1[_0x120e9e(0x182)];const _0x172893={};return _0x172893['cluster-name']=_0x488f8d,_0x172893[_0x120e9e(0x1e5)]=_0x1f54c3,_0x172893[_0x120e9e(0x255)]=_0x51b651,_0x172893[_0x120e9e(0x1f0)]=_0x5d3298,_0x50a7aa[_0x120e9e(0x1ad)](_0x41ce8f[_0x120e9e(0x261)])[_0x120e9e(0x218)](_0x35f936)['options'](_0x172893)['help'](_0x115ca1[_0x120e9e(0x18d)])['argv'];}else{const _0x2f9496=[];!_0x27eb19[_0x120e9e(0x17e)]&&(_0x115ca1[_0x120e9e(0x1ea)](_0x115ca1[_0x120e9e(0x266)],_0x115ca1[_0x120e9e(0x266)])?_0x2f9496[_0x120e9e(0x248)](_0x115ca1[_0x120e9e(0x1ab)]):_0x2de0c0+=_0x120e9e(0x19b)+_0x474b55[_0x120e9e(0x17e)]+'\x20'+(_0x3c515c?_0x115ca1[_0x120e9e(0x1c8)]:_0x115ca1[_0x120e9e(0x1c7)])+'\x0a\x0a');;!_0x27eb19[_0x120e9e(0x1ba)]&&(_0x115ca1[_0x120e9e(0x1ea)](_0x115ca1[_0x120e9e(0x178)],_0x115ca1[_0x120e9e(0x178)])?_0x2f9496[_0x120e9e(0x248)](_0x115ca1[_0x120e9e(0x1ff)]):_0x4aa1ce[_0x120e9e(0x230)](0x1));;!_0x27eb19[_0x120e9e(0x255)]&&(_0x115ca1[_0x120e9e(0x263)](_0x115ca1[_0x120e9e(0x23f)],_0x115ca1[_0x120e9e(0x23f)])?_0x2f9496[_0x120e9e(0x248)](_0x115ca1[_0x120e9e(0x1ac)]):_0x565f6d[_0x120e9e(0x248)](_0x115ca1['XxfnO']));;_0x115ca1[_0x120e9e(0x258)](_0x2f9496[_0x120e9e(0x201)],0x0)&&(_0x115ca1['cLuZJ'](_0x115ca1[_0x120e9e(0x22f)],_0x115ca1[_0x120e9e(0x22f)])?(_0x14a844[_0x120e9e(0x24d)]('['+_0x252ee3+_0x120e9e(0x1be)+_0x226c84[_0x120e9e(0x1b5)]+_0x120e9e(0x249)+_0xa17664[_0x120e9e(0x21e)]+'\x20error\x20:\x20'+_0x2ee4a8[_0x120e9e(0x1ec)]),_0x2bd725[_0x120e9e(0x1ec)]&&_0x1ba6f9[_0x120e9e(0x1ec)](_0x120e9e(0x19f)+_0xbdf5e3['error'][_0x120e9e(0x21f)])):(_0x3b7803=_0x120e9e(0x203)+_0x2f9496[_0x120e9e(0x23b)](',\x20')+'.\x20Please\x20provide\x20all\x20required\x20arguments.',await _0x115ca1['spIve'](reportToGalactusAndSendToEDS,_0x27eb19,_0x262f85,_0x3b7803,messageTypes[_0x120e9e(0x1a6)],_0x115ca1[_0x120e9e(0x1e0)],_0x115ca1['bBstr'],_0x115ca1[_0x120e9e(0x1d5)]),logger[_0x120e9e(0x1ec)](_0x3b7803),process[_0x120e9e(0x230)](0x1))),!ALL_SUPPORTED_CLOUD_PROVIDERS[_0x120e9e(0x193)](_0x27eb19['cloudProvider'][_0x120e9e(0x1a1)]())&&(_0x115ca1[_0x120e9e(0x1f5)](_0x115ca1[_0x120e9e(0x25c)],_0x115ca1['pTqdF'])?(_0x3b7803=_0x115ca1['PBvIB'],await _0x115ca1['spIve'](reportToGalactusAndSendToEDS,_0x27eb19,_0x262f85,_0x3b7803,messageTypes[_0x120e9e(0x1a6)],_0x115ca1[_0x120e9e(0x1e0)],_0x115ca1[_0x120e9e(0x22e)],_0x115ca1[_0x120e9e(0x1d5)]),logger['error'](_0x3b7803),!_0x27eb19[_0x120e9e(0x1ba)]&&(_0x115ca1[_0x120e9e(0x263)](_0x115ca1[_0x120e9e(0x1d4)],_0x115ca1[_0x120e9e(0x1d4)])?(logger['info']('Setting\x20cloud\x20provider\x20as\x20'+DEFAULT_CLUSTER_DETAILS['CLOUD_PROVIDER']+'\x20'),_0x27eb19[_0x120e9e(0x1ba)]=DEFAULT_CLUSTER_DETAILS['CLOUD_PROVIDER']):_0x37fd1f[_0x120e9e(0x248)](_0x115ca1[_0x120e9e(0x1ff)]))):(_0x4f9cd3[_0x120e9e(0x24d)](_0x120e9e(0x206)+_0x1c037d[_0x120e9e(0x241)]+'\x20'),_0x386c06[_0x120e9e(0x1ba)]=_0x57ad98[_0x120e9e(0x241)])),global_registry[_0x120e9e(0x17e)]=_0x27eb19[_0x120e9e(0x17e)],global_registry[_0x120e9e(0x1ba)]=_0x27eb19[_0x120e9e(0x1ba)],global_registry[_0x120e9e(0x22d)]=_0x27eb19[_0x120e9e(0x255)];}}else{if(_0x27eb19['gridProfile']){if(_0x115ca1[_0x120e9e(0x1f5)](_0x115ca1[_0x120e9e(0x224)],_0x115ca1[_0x120e9e(0x1c5)])){global_registry[_0x120e9e(0x1fa)]=_0x27eb19[_0x120e9e(0x1fa)],logger[_0x120e9e(0x1ef)]('grid\x20profile\x20flow\x20'+_0x27eb19[_0x120e9e(0x1fa)]);const _0x2494a3=_0x120e9e(0x216)+AG_API_URL+_0x120e9e(0x22a),_0x80e576={};_0x80e576[_0x120e9e(0x225)]=_0x115ca1[_0x120e9e(0x17c)],_0x80e576['headers']=global_registry[_0x120e9e(0x1a8)],_0x80e576[_0x120e9e(0x1c4)]=![];const _0x216f09=_0x80e576,_0x2191e5=await _0x115ca1[_0x120e9e(0x20c)](got,_0x2494a3,_0x216f09),_0x36b106=await _0x115ca1['pEWTX'](responseValidation,_0x2191e5,_0x115ca1[_0x120e9e(0x24c)],_0x115ca1[_0x120e9e(0x18e)],_0x27eb19,_0x262f85);let _0x3a2d11={};if(_0x115ca1['mnUfo'](_0x36b106,0xc8)){if(_0x115ca1[_0x120e9e(0x268)](_0x115ca1['Erfdr'],_0x115ca1[_0x120e9e(0x215)])){const _0x3db4be=JSON[_0x120e9e(0x1db)](_0x2191e5[_0x120e9e(0x1ee)]),_0x55c700=_0x3db4be['find'](_0x2e0ae5=>_0x2e0ae5['name']===_0x27eb19[_0x120e9e(0x1fa)])||null;if(_0x115ca1[_0x120e9e(0x244)](isUndefined,_0x55c700)){if(_0x115ca1[_0x120e9e(0x219)](_0x115ca1[_0x120e9e(0x213)],_0x115ca1[_0x120e9e(0x213)]))_0x3b7803='Invalid\x20input.\x20grid\x20profiles:\x20'+_0x27eb19[_0x120e9e(0x1fa)]+_0x120e9e(0x1bc),await _0x115ca1[_0x120e9e(0x1d2)](reportToGalactusAndSendToEDS,_0x27eb19,_0x262f85,_0x3b7803,messageTypes['ERROR'],_0x115ca1[_0x120e9e(0x1e0)],_0x115ca1[_0x120e9e(0x17d)],_0x115ca1[_0x120e9e(0x1d5)]),logger['error'](_0x3b7803),process['exit'](0x1);else{const _0x5cb96a={};_0x5cb96a[_0x120e9e(0x1cb)]=_0x10183c[_0x120e9e(0x186)],_0x5cb96a[_0x120e9e(0x1d1)]=_0x163386,_0x256e5d['sendEventToBackend'](_0x532032,_0x5cb96a,_0x115ca1[_0x120e9e(0x1d5)],!![]);}}else _0x115ca1[_0x120e9e(0x256)](_0x115ca1[_0x120e9e(0x217)],_0x115ca1[_0x120e9e(0x217)])?_0x4b42c0[_0x120e9e(0x1ec)](_0x120e9e(0x19f)+_0x2724bb['error'][_0x120e9e(0x21f)]):_0x3a2d11=_0x55c700;}else _0x27e743+=_0x120e9e(0x19b)+_0x5ce3d1['clusterName']+_0x120e9e(0x1b9);}else{if(_0x115ca1[_0x120e9e(0x194)](_0x115ca1[_0x120e9e(0x1cc)],_0x115ca1[_0x120e9e(0x1cc)])){const {header:_0xc08a00,response:_0x1ae8a0}=_0x3269c1,{status:_0x40e5d5,data:_0x4c65c5,error:_0x201bb4}=_0x1ae8a0;_0xfba520+=_0xc08a00+'\x20#'+_0x115ca1['vhAFH'](_0x3cd1d3,0x1)+'\x0a',_0x2ffd6f+=_0x120e9e(0x1af)+(_0x40e5d5?_0x115ca1[_0x120e9e(0x1b4)]:_0x115ca1[_0x120e9e(0x229)])+'\x0a',_0x24d70f+=_0x120e9e(0x19d)+_0x115ca1[_0x120e9e(0x1d6)](_0x4c65c5,_0x115ca1[_0x120e9e(0x196)])+'\x0a',_0x201bb4&&(_0x5ce565+=_0x115ca1[_0x120e9e(0x21c)],_0x2613c3+=_0x120e9e(0x207)+(_0x201bb4[_0x120e9e(0x1d1)]||_0x115ca1[_0x120e9e(0x196)])+'\x0a',_0x564e83+=_0x120e9e(0x1b3)+(_0x201bb4[_0x120e9e(0x1e9)]||_0x115ca1[_0x120e9e(0x196)])+'\x0a',_0x4fd530+='\x20\x20Stack:\x20'+(_0x201bb4[_0x120e9e(0x21f)]||_0x115ca1[_0x120e9e(0x196)])+'\x0a'),_0x4a237c+='\x0a\x0a';}else process[_0x120e9e(0x230)](0x1);}const _0x548d9d={};_0x548d9d[_0x120e9e(0x1cb)]=WS_EVENTS[_0x120e9e(0x186)],_0x548d9d[_0x120e9e(0x1d1)]=_0x115ca1['KrWIm'],webSocketUtils[_0x120e9e(0x1da)](_0x262f85,_0x548d9d),global_registry[_0x120e9e(0x1ba)]=_0x3a2d11[_0x120e9e(0x1ba)],global_registry[_0x120e9e(0x22d)]=_0x3a2d11[_0x120e9e(0x255)],global_registry[_0x120e9e(0x17e)]=_0x3a2d11[_0x120e9e(0x17e)];}else _0x3269ca[_0x120e9e(0x248)](_0x115ca1[_0x120e9e(0x1ab)]);}else _0x115ca1['ZaYrS'](_0x115ca1[_0x120e9e(0x267)],_0x115ca1[_0x120e9e(0x24f)])?(logger[_0x120e9e(0x1ec)](_0x115ca1[_0x120e9e(0x1c1)]),process['exit'](0x1)):(_0x4c66e9[_0x120e9e(0x1ec)](_0x115ca1[_0x120e9e(0x1c1)]),_0x324d3b[_0x120e9e(0x230)](0x1));}}}catch(_0xac6584){_0x115ca1[_0x120e9e(0x19c)](_0x115ca1['SODYY'],_0x115ca1[_0x120e9e(0x1b1)])?(_0x3b7803=_0x120e9e(0x209)+_0xac6584+':\x20'+_0xac6584[_0x120e9e(0x21f)],logger[_0x120e9e(0x1ec)](_0x3b7803),await _0x115ca1[_0x120e9e(0x23d)](reportToGalactusAndSendToEDS,_0x27eb19,_0x262f85,_0x3b7803,messageTypes[_0x120e9e(0x1a6)],_0x115ca1[_0x120e9e(0x1e0)],_0x115ca1[_0x120e9e(0x22e)],_0x115ca1[_0x120e9e(0x1d5)]),process[_0x120e9e(0x230)](0x1)):_0x3c79d5=_0x162047;}}function printResponse(_0x3c674e,_0x2854d7){const _0x3d57db=a17_0x5f34aa,_0x1d5776={};_0x1d5776[_0x3d57db(0x1c9)]=function(_0x1dfac8,_0x255689){return _0x1dfac8!==_0x255689;},_0x1d5776[_0x3d57db(0x246)]=_0x3d57db(0x228);const _0x3021b5=_0x1d5776;logger['info']('['+_0x3c674e+_0x3d57db(0x1be)+_0x2854d7[_0x3d57db(0x1b5)]+_0x3d57db(0x249)+_0x2854d7[_0x3d57db(0x21e)]+'\x20error\x20:\x20'+_0x2854d7[_0x3d57db(0x1ec)]),_0x2854d7[_0x3d57db(0x1ec)]&&(_0x3021b5[_0x3d57db(0x1c9)](_0x3021b5[_0x3d57db(0x246)],_0x3021b5['bflxf'])?_0x5d9800[_0x3d57db(0x24d)]('Cluster\x20`'+_0x2467c4['clusterName']+_0x3d57db(0x1f8)):logger[_0x3d57db(0x1ec)](_0x3d57db(0x19f)+_0x2854d7[_0x3d57db(0x1ec)]['stack']));}async function generateReport(_0x49b878,_0x3928ff){const _0x293cf9=a17_0x5f34aa,_0x1de807={'QmDfr':function(_0x4abcf6,_0x278b91){return _0x4abcf6+_0x278b91;},'UZvFi':_0x293cf9(0x221),'EbOdi':_0x293cf9(0x242),'YFDMX':function(_0x47fe0e,_0x37b394){return _0x47fe0e||_0x37b394;},'jEDyx':_0x293cf9(0x1ca),'ofeef':_0x293cf9(0x1df),'BTqkw':'Cluster\x20details\x0a-----------------------\x0a','mDJIl':function(_0xf414d0,_0x1629b3){return _0xf414d0!=_0x1629b3;},'hlYia':_0x293cf9(0x21a),'vJuvx':_0x293cf9(0x238),'MNLoK':function(_0x5b12d9){return _0x5b12d9();}};let _0xff0e7='===\x20Precheck\x20Report\x20-\x20'+global_registry[_0x293cf9(0x1ba)]+_0x293cf9(0x1b6);return _0x49b878[_0x293cf9(0x24b)]((_0x2fe149,_0x57100e)=>{const _0x4e555d=_0x293cf9,{header:_0x542625,response:_0x40e5d6}=_0x2fe149,{status:_0x2c866e,data:_0xe0c7ff,error:_0xd288de}=_0x40e5d6;_0xff0e7+=_0x542625+'\x20#'+_0x1de807[_0x4e555d(0x191)](_0x57100e,0x1)+'\x0a',_0xff0e7+=_0x4e555d(0x1af)+(_0x2c866e?_0x1de807[_0x4e555d(0x254)]:_0x1de807[_0x4e555d(0x20a)])+'\x0a',_0xff0e7+=_0x4e555d(0x19d)+_0x1de807['YFDMX'](_0xe0c7ff,_0x1de807[_0x4e555d(0x208)])+'\x0a',_0xd288de&&(_0xff0e7+=_0x1de807['ofeef'],_0xff0e7+=_0x4e555d(0x207)+(_0xd288de[_0x4e555d(0x1d1)]||_0x1de807[_0x4e555d(0x208)])+'\x0a',_0xff0e7+='\x20\x20Code:\x20'+(_0xd288de[_0x4e555d(0x1e9)]||_0x1de807[_0x4e555d(0x208)])+'\x0a',_0xff0e7+=_0x4e555d(0x1de)+(_0xd288de[_0x4e555d(0x21f)]||_0x1de807[_0x4e555d(0x208)])+'\x0a'),_0xff0e7+='\x0a\x0a';}),_0xff0e7+=_0x1de807[_0x293cf9(0x1f7)],_0x1de807[_0x293cf9(0x187)](_0x3928ff,null)?_0xff0e7+=_0x293cf9(0x19b)+global_registry['clusterName']+'\x20'+(_0x3928ff?_0x1de807['hlYia']:_0x1de807[_0x293cf9(0x259)])+'\x0a\x0a':_0xff0e7+='Cluster\x20'+global_registry[_0x293cf9(0x17e)]+'\x20details\x20cannot\x20be\x20fetched\x0a\x0a',_0xff0e7+=_0x1de807['MNLoK'](getSystemMetaData),_0xff0e7;};exports['handler']=async function(_0x112fd1){const _0x166af9=a17_0x5f34aa,_0x472c3={'bnzWT':function(_0xf9ab92){return _0xf9ab92();},'ciLzT':_0x166af9(0x245),'bwZrk':function(_0x1a1897,_0x2b3b65,_0x1e126b,_0x5484f8,_0xe0d465,_0x239755,_0x2b0898,_0x1ff529){return _0x1a1897(_0x2b3b65,_0x1e126b,_0x5484f8,_0xe0d465,_0x239755,_0x2b0898,_0x1ff529);},'kyuTk':_0x166af9(0x19a),'hhJZg':_0x166af9(0x247),'RqkTi':_0x166af9(0x1ec),'IWMps':function(_0x5678b1,_0x1a1bdc,_0x1d7416,_0x1a96e5,_0x51ba51,_0x578b14,_0x47d775){return _0x5678b1(_0x1a1bdc,_0x1d7416,_0x1a96e5,_0x51ba51,_0x578b14,_0x47d775);},'mERuW':function(_0x1db52d){return _0x1db52d();},'UBVGn':_0x166af9(0x1f9),'EViqy':_0x166af9(0x24e),'lysSj':function(_0x482c4a,_0x4b3096,_0x1aa29b){return _0x482c4a(_0x4b3096,_0x1aa29b);},'OoVQz':_0x166af9(0x1ae),'CyUJJ':function(_0x59832a,_0x264f5d,_0x4ebba7){return _0x59832a(_0x264f5d,_0x4ebba7);},'xsgDt':'toolInstalledResp','QLrTY':'4|3|2|0|1','ZSSEk':function(_0x92bba3,_0xfba0f4,_0xe18f0d,_0x1d1b11,_0x26bcfa,_0x46c98e,_0x5137c1,_0x7ed643){return _0x92bba3(_0xfba0f4,_0xe18f0d,_0x1d1b11,_0x26bcfa,_0x46c98e,_0x5137c1,_0x7ed643);},'pCGoF':_0x166af9(0x1c3),'qQydH':function(_0x550f73){return _0x550f73();},'OKrTV':function(_0x179072,_0x101c81,_0xc824f6){return _0x179072(_0x101c81,_0xc824f6);},'iIBKw':_0x166af9(0x1bf),'QQVDO':function(_0x1384f6,_0x38d08e){return _0x1384f6(_0x38d08e);},'opDhq':_0x166af9(0x234),'SBvgo':_0x166af9(0x1f4),'HROdv':_0x166af9(0x23a),'rYsEh':_0x166af9(0x17b),'FkPpz':'Whitelisted\x20browserstack','vazCl':'SSL\x20Configured','plrkj':function(_0x4e76c9,_0x364841){return _0x4e76c9+_0x364841;},'feFyN':'utf-8','vLGVA':function(_0x2bf894,_0x38ab9e,_0x144206,_0x56090e,_0x416319,_0x47227e,_0x2e8e0f){return _0x2bf894(_0x38ab9e,_0x144206,_0x56090e,_0x416319,_0x47227e,_0x2e8e0f);},'QUvQd':'pre-check-failed'};let _0x27d497,_0x3507e4;try{global_registry['requestId']=_0x472c3[_0x166af9(0x222)](uuidv4);!fs[_0x166af9(0x1f2)](_0x472c3[_0x166af9(0x222)](getCredentialsPath))&&(_0x3507e4=_0x472c3['ciLzT'],logger[_0x166af9(0x1ec)](_0x3507e4),await _0x472c3['bwZrk'](reportToGalactusAndSendToEDS,_0x112fd1,_0x27d497,_0x3507e4,messageTypes[_0x166af9(0x1a6)],_0x472c3[_0x166af9(0x1c0)],_0x472c3['hhJZg'],_0x472c3[_0x166af9(0x23e)]),process[_0x166af9(0x230)](0x1));_0x472c3[_0x166af9(0x1a2)](sendInstrumentationEvent,_0x112fd1,_0x472c3[_0x166af9(0x1c0)],messageTypes['INFO'],null,null,_0x112fd1);const _0x383790=JSON[_0x166af9(0x1db)](fs[_0x166af9(0x1f3)](_0x472c3['mERuW'](getCredentialsPath)));global_registry[_0x166af9(0x25b)]=_0x383790[_0x166af9(0x20d)][_0x166af9(0x18c)],global_registry['bstackAccesskey']=_0x383790[_0x166af9(0x20d)]['password'];const _0x168078=WS_ENDPOINT[_0x166af9(0x20e)](_0x472c3[_0x166af9(0x1a7)],_0x383790['Browserstack'][_0x166af9(0x18c)])['replace'](_0x472c3['EViqy'],_0x383790[_0x166af9(0x20d)]['password']),_0x178baf={};_0x178baf[_0x166af9(0x17a)]=ws,_0x178baf[_0x166af9(0x237)]=0x36ee80,_0x27d497=new ReconnectingWebSocket(_0x168078,[],_0x178baf),global_registry['authHeader']=_0x472c3[_0x166af9(0x1b8)](getAuthHeader,global_registry[_0x166af9(0x25b)],global_registry['bstackAccesskey']),await _0x472c3['lysSj'](inputValidation,_0x112fd1,_0x27d497),logger[_0x166af9(0x24d)](_0x166af9(0x17f)+global_registry[_0x166af9(0x1ba)]+'\x20region\x20-\x20'+global_registry[_0x166af9(0x22d)]);let _0x320c86=await _0x472c3[_0x166af9(0x1a2)](getCloudProviderObjectWithOutInit,global_registry[_0x166af9(0x1ba)],global_registry['clusterName'],_0x472c3[_0x166af9(0x260)],_0x27d497,webSocketUtils,_0x112fd1);const _0x2bbbd2=await _0x320c86['isCliToolInstalled']();_0x472c3['CyUJJ'](printResponse,_0x472c3[_0x166af9(0x1aa)],_0x2bbbd2),_0x320c86=await _0x320c86[_0x166af9(0x23c)]();let _0x32deb0=![];try{_0x32deb0=await _0x320c86['isClusterPresent']();}catch(_0x2ca817){const _0x4dfdfb=_0x472c3[_0x166af9(0x211)][_0x166af9(0x19e)]('|');let _0x4abe97=0x0;while(!![]){switch(_0x4dfdfb[_0x4abe97++]){case'0':_0x3507e4+='\x0a'+JSON[_0x166af9(0x195)](_0x2ca817[_0x166af9(0x21f)]);continue;case'1':await _0x472c3[_0x166af9(0x239)](reportToGalactusAndSendToEDS,_0x112fd1,_0x27d497,_0x3507e4,messageTypes[_0x166af9(0x1a6)],_0x472c3[_0x166af9(0x1c0)],_0x166af9(0x1f6)+global_registry['cloudProvider'],_0x472c3['RqkTi']);continue;case'2':logger[_0x166af9(0x1ec)](_0x3507e4);continue;case'3':_0x32deb0=null;continue;case'4':_0x3507e4=_0x166af9(0x190)+global_registry[_0x166af9(0x17e)]+_0x166af9(0x223)+global_registry[_0x166af9(0x22d)]+_0x166af9(0x1c6)+_0x2ca817;continue;}break;}}_0x32deb0&&logger[_0x166af9(0x24d)](_0x166af9(0x1c2)+global_registry['clusterName']+_0x166af9(0x1f8));const _0x45e1b1=await _0x320c86['checkAccess']();_0x472c3[_0x166af9(0x1ce)](printResponse,_0x472c3['pCGoF'],_0x45e1b1);const _0xe26353=await _0x472c3[_0x166af9(0x250)](curlRequest);_0x472c3[_0x166af9(0x18f)](printResponse,_0x472c3[_0x166af9(0x200)],_0xe26353);const _0x26950f=await _0x472c3['QQVDO'](isTlsSupported,_0x472c3[_0x166af9(0x180)]);_0x472c3[_0x166af9(0x1ce)](printResponse,_0x472c3[_0x166af9(0x265)],_0x26950f);const _0x1fffef={};_0x1fffef[_0x166af9(0x204)]=_0x472c3[_0x166af9(0x1cf)],_0x1fffef['response']=_0x2bbbd2;const _0x43f206={};_0x43f206[_0x166af9(0x204)]=_0x472c3[_0x166af9(0x240)],_0x43f206[_0x166af9(0x25e)]=_0x45e1b1;const _0x5f1060={};_0x5f1060[_0x166af9(0x204)]=_0x472c3[_0x166af9(0x189)],_0x5f1060[_0x166af9(0x25e)]=_0xe26353;const _0x26fd4c={};_0x26fd4c[_0x166af9(0x204)]=_0x472c3[_0x166af9(0x1e3)],_0x26fd4c[_0x166af9(0x25e)]=_0x26950f;const _0x124d16=[_0x1fffef,_0x43f206,_0x5f1060,_0x26fd4c],_0x478b37=await _0x472c3[_0x166af9(0x1b8)](generateReport,_0x124d16,_0x32deb0),_0x3fc32d=new Date(),_0x35ed85=_0x3fc32d[_0x166af9(0x1bd)]()+'_'+_0x472c3[_0x166af9(0x1e4)](_0x3fc32d['getUTCMonth'](),0x1)+'_'+_0x3fc32d[_0x166af9(0x226)]()+'_'+_0x3fc32d['getUTCHours']()+'_'+_0x3fc32d[_0x166af9(0x1a4)](),_0x5d985f=_0x166af9(0x1d0)+_0x35ed85+_0x166af9(0x198);fs[_0x166af9(0x1b2)](_0x5d985f,_0x478b37,_0x472c3[_0x166af9(0x1cd)]),logger[_0x166af9(0x24d)]('Report\x20saved\x20in\x20'+_0x5d985f),process[_0x166af9(0x230)](0x0);}catch(_0x33c2de){let _0x2c45ab=_0x166af9(0x1d3)+_0x33c2de+'\x20';logger[_0x166af9(0x1ec)](_0x2c45ab),_0x2c45ab+='\x0a'+JSON[_0x166af9(0x195)](_0x33c2de[_0x166af9(0x21f)]),logger[_0x166af9(0x1ef)](_0x166af9(0x1b0)+_0x33c2de['stack']);if(_0x27d497){const _0x111a4e={};_0x111a4e[_0x166af9(0x1cb)]=WS_EVENTS['LOG'],_0x111a4e['message']=_0x2c45ab,webSocketUtils[_0x166af9(0x1da)](_0x27d497,_0x111a4e,_0x472c3[_0x166af9(0x23e)],!![]);}await webSocketUtils[_0x166af9(0x20f)](0x7d0);const _0x5e6dd0={};_0x5e6dd0[_0x166af9(0x1ec)]=_0x2c45ab,await _0x472c3[_0x166af9(0x220)](sendInstrumentationEvent,_0x112fd1,_0x472c3[_0x166af9(0x1c0)],messageTypes[_0x166af9(0x1a6)],_0x472c3['QUvQd'],_0x5e6dd0,_0x112fd1),process[_0x166af9(0x230)](0x1);}};