const a17_0x4fa6b9=a17_0x2e38;(function(_0x41a7c0,_0x518b97){const _0x37d253=a17_0x2e38,_0x5b64e3=_0x41a7c0();while(!![]){try{const _0x4c2cea=parseInt(_0x37d253(0xf1))/0x1*(-parseInt(_0x37d253(0x103))/0x2)+parseInt(_0x37d253(0x12a))/0x3+parseInt(_0x37d253(0xe7))/0x4*(parseInt(_0x37d253(0xa5))/0x5)+-parseInt(_0x37d253(0x88))/0x6+-parseInt(_0x37d253(0x107))/0x7*(-parseInt(_0x37d253(0xb3))/0x8)+-parseInt(_0x37d253(0x93))/0x9*(-parseInt(_0x37d253(0x10c))/0xa)+parseInt(_0x37d253(0xf3))/0xb;if(_0x4c2cea===_0x518b97)break;else _0x5b64e3['push'](_0x5b64e3['shift']());}catch(_0xeda1fe){_0x5b64e3['push'](_0x5b64e3['shift']());}}}(a17_0x12d9,0xa7e2e));const fs=require('fs'),ws=require('ws'),got=require(a17_0x4fa6b9(0x136)),{v4:uuidv4}=require(a17_0x4fa6b9(0x116)),ReconnectingWebSocket=require(a17_0x4fa6b9(0x8e)),{getCredentialsPath,reportToGalactusAndSendToEDS,getAuthHeader,responseValidation,isUndefined,curlRequest,isTlsSupported,getSystemMetaData}=require(a17_0x4fa6b9(0xd7)),{logger}=require('../../config/logger'),{HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,global_registry,messageTypes,WS_ENDPOINT,WS_EVENTS,ALL_SUPPORTED_CLOUD_PROVIDERS,AG_API_URL,DEFAULT_CLUSTER_DETAILS}=require(a17_0x4fa6b9(0x8f)),{getCloudProviderObjectWithOutInit}=require(a17_0x4fa6b9(0x167)),webSocketUtils=require('../../utils/webSocketUtils'),{sendInstrumentationEvent}=require(a17_0x4fa6b9(0x14f));exports[a17_0x4fa6b9(0xa2)]=a17_0x4fa6b9(0x8a),exports[a17_0x4fa6b9(0xfc)]=a17_0x4fa6b9(0x143),exports['builder']=function(_0x351cd8){const _0x1fc8b7=a17_0x4fa6b9,_0x47d3ba={};_0x47d3ba[_0x1fc8b7(0x165)]=_0x1fc8b7(0xf6),_0x47d3ba[_0x1fc8b7(0x109)]=_0x1fc8b7(0xde),_0x47d3ba[_0x1fc8b7(0xd3)]=_0x1fc8b7(0x7d),_0x47d3ba[_0x1fc8b7(0x148)]=_0x1fc8b7(0x13d),_0x47d3ba['Uytvu']=_0x1fc8b7(0x105),_0x47d3ba[_0x1fc8b7(0xeb)]=_0x1fc8b7(0x14e);const _0x11bbb5=_0x47d3ba,_0x276b6b={};_0x276b6b[_0x1fc8b7(0xd0)]=_0x11bbb5[_0x1fc8b7(0x165)],_0x276b6b[_0x1fc8b7(0x129)]=_0x11bbb5[_0x1fc8b7(0x109)];const _0x43a20d={};_0x43a20d[_0x1fc8b7(0xd0)]=_0x11bbb5['AshYN'],_0x43a20d['type']=_0x11bbb5[_0x1fc8b7(0x109)];const _0x2812c8={};_0x2812c8[_0x1fc8b7(0xd0)]=_0x11bbb5[_0x1fc8b7(0x148)],_0x2812c8[_0x1fc8b7(0x129)]=_0x11bbb5['JPoIt'];const _0x5e4777={};_0x5e4777[_0x1fc8b7(0xd0)]=_0x11bbb5[_0x1fc8b7(0xb2)],_0x5e4777[_0x1fc8b7(0x129)]=_0x11bbb5['JPoIt'];const _0x2067ea={};return _0x2067ea[_0x1fc8b7(0xba)]=_0x276b6b,_0x2067ea[_0x1fc8b7(0x13a)]=_0x43a20d,_0x2067ea['region']=_0x2812c8,_0x2067ea[_0x1fc8b7(0x12f)]=_0x5e4777,_0x351cd8[_0x1fc8b7(0x16e)](HELP_HEADER_MESSAGE[_0x1fc8b7(0xf4)])[_0x1fc8b7(0x164)](HELP_FOOTER_MESSAGE)[_0x1fc8b7(0xef)](_0x2067ea)[_0x1fc8b7(0x14e)](_0x11bbb5[_0x1fc8b7(0xeb)])[_0x1fc8b7(0xb8)];};function a17_0x2e38(_0x48d11e,_0x2d662a){const _0x12d951=a17_0x12d9();return a17_0x2e38=function(_0x2e38f1,_0x27053d){_0x2e38f1=_0x2e38f1-0x7d;let _0x381527=_0x12d951[_0x2e38f1];return _0x381527;},a17_0x2e38(_0x48d11e,_0x2d662a);}async function inputValidation(_0x1a18df,_0x459137){const _0x91f1f8=a17_0x4fa6b9,_0x37d981={'JeZsp':function(_0x35d911,_0x37a533){return _0x35d911+_0x37a533;},'BagWg':_0x91f1f8(0x147),'cActL':'Failure','IPxdn':function(_0xc1058,_0x375932){return _0xc1058||_0x375932;},'OxRpD':'N/A','XXoLC':_0x91f1f8(0xe8),'vzdKp':_0x91f1f8(0xb6),'XtODW':_0x91f1f8(0x139),'UEoCk':_0x91f1f8(0xa9),'sqTrd':'Create\x20a\x20grid\x20in\x20existing\x20Kubernetes\x20Cluster\x20on\x20AWS/Azure/GCP.','nwIfk':_0x91f1f8(0xde),'AjXvw':_0x91f1f8(0x7d),'krQky':_0x91f1f8(0x13d),'hHwyG':_0x91f1f8(0x105),'texGs':_0x91f1f8(0x14e),'QVjTR':_0x91f1f8(0x10d),'vGRQf':_0x91f1f8(0xc3),'xwtrf':_0x91f1f8(0x13a),'gREsw':function(_0x4f1766,_0x7f5bc2){return _0x4f1766===_0x7f5bc2;},'rIhsM':_0x91f1f8(0xc1),'SkzVF':function(_0x33a17c,_0x4d5536){return _0x33a17c!==_0x4d5536;},'HLWQs':_0x91f1f8(0x82),'jTtxV':function(_0x47e5fe,_0x319bac){return _0x47e5fe===_0x319bac;},'EKyuR':'kpAUI','IJEQD':_0x91f1f8(0x126),'pGqyY':_0x91f1f8(0xba),'FdxcM':function(_0x8e47b7,_0x44568e){return _0x8e47b7===_0x44568e;},'vDIWc':_0x91f1f8(0xdc),'gkHzk':'VChcP','idctM':function(_0x2e9fbb,_0x1c1120){return _0x2e9fbb>_0x1c1120;},'vLfij':'iDbLr','KkoIp':_0x91f1f8(0xe9),'tILcf':function(_0x499faf,_0x10bd65,_0x1f463e,_0x55918d,_0x37d8c5,_0x391b4b,_0x11a7f6,_0x5f564e){return _0x499faf(_0x10bd65,_0x1f463e,_0x55918d,_0x37d8c5,_0x391b4b,_0x11a7f6,_0x5f564e);},'FsiDZ':_0x91f1f8(0xf9),'ZzwCk':_0x91f1f8(0x98),'UOIFk':function(_0x199f60,_0x4716a2){return _0x199f60!==_0x4716a2;},'xEgXO':_0x91f1f8(0xd1),'vfntq':_0x91f1f8(0x85),'tuqVI':'Invalid\x20input.\x20Currently\x20the\x20automation\x20grid\x20in\x20AWS,\x20AZURE\x20&\x20GCP\x20cloud\x20provider\x20is\x20supported\x20using\x20CLI.','MPhyk':_0x91f1f8(0x12d),'tPUkC':_0x91f1f8(0xed),'PepCb':'phevk','oskFB':_0x91f1f8(0x151),'SbXsC':_0x91f1f8(0xb7),'YjrHQ':function(_0x52ac2b,_0x57e0b5,_0x2184c6){return _0x52ac2b(_0x57e0b5,_0x2184c6);},'bPnnb':function(_0x3a0028,_0x3dec6e,_0x4d76c2,_0x5b0a40,_0x370fcb,_0x548800){return _0x3a0028(_0x3dec6e,_0x4d76c2,_0x5b0a40,_0x370fcb,_0x548800);},'uaQLH':_0x91f1f8(0xfe),'XdZJa':_0x91f1f8(0x12f),'WeZDE':function(_0x35e439,_0xe92f91){return _0x35e439===_0xe92f91;},'sZjFg':'FQYWx','ICDMU':function(_0x59a57c,_0x5cdd61){return _0x59a57c(_0x5cdd61);},'dHJbt':_0x91f1f8(0x89),'hRPbV':'ujTdc','mnEAQ':'pre-check-grid-profile-empty','wWtyI':function(_0x54048a,_0x3c3e0c){return _0x54048a!==_0x3c3e0c;},'FdMnz':'IcgiB','JvcAe':function(_0x17905f,_0x1891ac){return _0x17905f===_0x1891ac;},'cwCRl':_0x91f1f8(0xbc),'shRjm':_0x91f1f8(0xa0),'LqnHC':_0x91f1f8(0x150),'LtyNt':function(_0x41b02f,_0x5c7035){return _0x41b02f===_0x5c7035;},'INlIA':_0x91f1f8(0x122),'lQSXQ':_0x91f1f8(0x108),'zcBYU':_0x91f1f8(0xb0)};let _0x381ff2;try{if(_0x37d981[_0x91f1f8(0x13c)](_0x37d981[_0x91f1f8(0x169)],_0x37d981['rIhsM'])){if(_0x1a18df[_0x91f1f8(0xa8)]||_0x1a18df[_0x91f1f8(0x8d)]||_0x1a18df[_0x91f1f8(0xc3)]){if(_0x37d981[_0x91f1f8(0xad)](_0x37d981[_0x91f1f8(0xd2)],_0x37d981['HLWQs'])){const {header:_0x3e7b2f,response:_0x24c3a5}=_0x19bdf6,{status:_0x25f0af,data:_0x421622,error:_0x502e10}=_0x24c3a5;_0x5520e8+=_0x3e7b2f+'\x20#'+_0x37d981['JeZsp'](_0x1a7b49,0x1)+'\x0a',_0x11e26b+='Status:\x20'+(_0x25f0af?_0x37d981[_0x91f1f8(0x168)]:_0x37d981[_0x91f1f8(0xe1)])+'\x0a',_0xa43859+=_0x91f1f8(0x142)+_0x37d981[_0x91f1f8(0xdb)](_0x421622,_0x37d981[_0x91f1f8(0x87)])+'\x0a',_0x502e10&&(_0x4d0845+=_0x37d981[_0x91f1f8(0x90)],_0xb60909+=_0x91f1f8(0x113)+(_0x502e10['message']||_0x37d981[_0x91f1f8(0x87)])+'\x0a',_0x34ae86+='\x20\x20Code:\x20'+(_0x502e10['code']||_0x37d981[_0x91f1f8(0x87)])+'\x0a',_0xc61320+=_0x91f1f8(0x135)+(_0x502e10[_0x91f1f8(0x15f)]||_0x37d981[_0x91f1f8(0x87)])+'\x0a'),_0x34ddb3+='\x0a\x0a';}else{const _0x5aa1d5=[];!_0x1a18df['clusterName']&&(_0x37d981['jTtxV'](_0x37d981['EKyuR'],_0x37d981[_0x91f1f8(0xfb)])?(_0x1792b0[_0x91f1f8(0xa4)]('['+_0x224ddd+_0x91f1f8(0xee)+_0x2359e8[_0x91f1f8(0x97)]+_0x91f1f8(0x11c)+_0x209436[_0x91f1f8(0xda)]+_0x91f1f8(0x152)+_0x2f5061[_0x91f1f8(0x10d)]),_0x57d561['error']&&_0x12cb7f['error'](_0x91f1f8(0x16d)+_0x9d9362[_0x91f1f8(0x10d)]['stack'])):_0x5aa1d5[_0x91f1f8(0x84)](_0x37d981[_0x91f1f8(0x149)]));;!_0x1a18df[_0x91f1f8(0x8d)]&&(_0x37d981[_0x91f1f8(0x14a)](_0x37d981[_0x91f1f8(0xd4)],_0x37d981[_0x91f1f8(0xd4)])?_0x5aa1d5[_0x91f1f8(0x84)](_0x37d981[_0x91f1f8(0xe2)]):_0x4d2c82[_0x91f1f8(0xe3)](0x1));;!_0x1a18df['region']&&(_0x37d981[_0x91f1f8(0xad)](_0x37d981['gkHzk'],_0x37d981['gkHzk'])?(_0x264ed0['info'](_0x91f1f8(0x123)+_0x3ab416[_0x91f1f8(0x125)]+'\x20'),_0xb34eb7[_0x91f1f8(0x8d)]=_0x309015[_0x91f1f8(0x125)]):_0x5aa1d5[_0x91f1f8(0x84)](_0x37d981[_0x91f1f8(0xfd)]));;_0x37d981[_0x91f1f8(0x155)](_0x5aa1d5[_0x91f1f8(0x13f)],0x0)&&(_0x37d981[_0x91f1f8(0xad)](_0x37d981[_0x91f1f8(0xf5)],_0x37d981[_0x91f1f8(0x119)])?(_0x381ff2=_0x91f1f8(0x10b)+_0x5aa1d5[_0x91f1f8(0x11f)](',\x20')+_0x91f1f8(0xaa),await _0x37d981['tILcf'](reportToGalactusAndSendToEDS,_0x1a18df,_0x459137,_0x381ff2,messageTypes[_0x91f1f8(0x111)],_0x37d981[_0x91f1f8(0x11d)],_0x37d981['ZzwCk'],_0x37d981[_0x91f1f8(0x133)]),logger['error'](_0x381ff2),process[_0x91f1f8(0xe3)](0x1)):_0xa657e2+=_0x91f1f8(0xe4)+_0x3a721e[_0x91f1f8(0xa8)]+'\x20'+(_0x9f3935?_0x37d981['vzdKp']:_0x37d981['XtODW'])+'\x0a\x0a');if(!ALL_SUPPORTED_CLOUD_PROVIDERS[_0x91f1f8(0x131)](_0x1a18df[_0x91f1f8(0x8d)][_0x91f1f8(0x8c)]())){if(_0x37d981[_0x91f1f8(0xb5)](_0x37d981[_0x91f1f8(0xc5)],_0x37d981['vfntq']))_0x381ff2=_0x37d981['tuqVI'],await _0x37d981[_0x91f1f8(0xae)](reportToGalactusAndSendToEDS,_0x1a18df,_0x459137,_0x381ff2,messageTypes[_0x91f1f8(0x111)],_0x37d981[_0x91f1f8(0x11d)],_0x37d981[_0x91f1f8(0xce)],_0x37d981[_0x91f1f8(0x133)]),logger['error'](_0x381ff2),!_0x1a18df[_0x91f1f8(0x8d)]&&(_0x37d981['SkzVF'](_0x37d981[_0x91f1f8(0x16b)],_0x37d981[_0x91f1f8(0xa7)])?(logger[_0x91f1f8(0xa4)]('Setting\x20cloud\x20provider\x20as\x20'+DEFAULT_CLUSTER_DETAILS['CLOUD_PROVIDER']+'\x20'),_0x1a18df['cloudProvider']=DEFAULT_CLUSTER_DETAILS[_0x91f1f8(0x125)]):(_0x9fb1fd[_0x91f1f8(0x10d)](_0x37d981[_0x91f1f8(0x11e)]),_0x21cbb2[_0x91f1f8(0xe3)](0x1)));else{const _0x57b337={};_0x57b337['description']=_0x37d981['sqTrd'],_0x57b337['type']=_0x37d981[_0x91f1f8(0x99)];const _0x37e86e={};_0x37e86e[_0x91f1f8(0xd0)]=_0x37d981[_0x91f1f8(0xcd)],_0x37e86e[_0x91f1f8(0x129)]=_0x37d981['nwIfk'];const _0x5f608f={};_0x5f608f[_0x91f1f8(0xd0)]=_0x37d981[_0x91f1f8(0xa3)],_0x5f608f[_0x91f1f8(0x129)]=_0x37d981[_0x91f1f8(0x99)];const _0x5f2b91={};_0x5f2b91[_0x91f1f8(0xd0)]=_0x37d981[_0x91f1f8(0xd8)],_0x5f2b91['type']=_0x37d981[_0x91f1f8(0x99)];const _0x1cd7d2={};return _0x1cd7d2[_0x91f1f8(0xba)]=_0x57b337,_0x1cd7d2[_0x91f1f8(0x13a)]=_0x37e86e,_0x1cd7d2[_0x91f1f8(0xc3)]=_0x5f608f,_0x1cd7d2[_0x91f1f8(0x12f)]=_0x5f2b91,_0x1d3ffb[_0x91f1f8(0x16e)](_0x12e331['pre_check'])[_0x91f1f8(0x164)](_0x1c6c12)['options'](_0x1cd7d2)[_0x91f1f8(0x14e)](_0x37d981['texGs'])[_0x91f1f8(0xb8)];}}global_registry['clusterName']=_0x1a18df[_0x91f1f8(0xa8)],global_registry[_0x91f1f8(0x8d)]=_0x1a18df[_0x91f1f8(0x8d)],global_registry[_0x91f1f8(0x86)]=_0x1a18df[_0x91f1f8(0xc3)];}}else{if(_0x1a18df[_0x91f1f8(0x157)]){if(_0x37d981[_0x91f1f8(0xbd)](_0x37d981[_0x91f1f8(0x128)],_0x37d981['oskFB'])){global_registry[_0x91f1f8(0x157)]=_0x1a18df[_0x91f1f8(0x157)],logger[_0x91f1f8(0x83)](_0x91f1f8(0x166)+_0x1a18df['gridProfile']);const _0x5a2473='https://'+AG_API_URL+'/packages/cli/get-all-grid-profiles',_0x4a7574={};_0x4a7574['method']=_0x37d981[_0x91f1f8(0x130)],_0x4a7574[_0x91f1f8(0xe6)]=global_registry[_0x91f1f8(0x102)],_0x4a7574[_0x91f1f8(0x9f)]=![];const _0x121f60=_0x4a7574,_0x5eb4a8=await _0x37d981[_0x91f1f8(0x127)](got,_0x5a2473,_0x121f60),_0x4e8ff4=await _0x37d981[_0x91f1f8(0x16a)](responseValidation,_0x5eb4a8,_0x37d981['uaQLH'],_0x37d981[_0x91f1f8(0xcc)],_0x1a18df,_0x459137);let _0x4508b0={};if(_0x37d981['gREsw'](_0x4e8ff4,0xc8)){if(_0x37d981['WeZDE'](_0x37d981[_0x91f1f8(0x14d)],_0x37d981['sZjFg'])){const _0xffd312=JSON[_0x91f1f8(0x161)](_0x5eb4a8[_0x91f1f8(0xbf)]),_0x2c3657=_0xffd312['find'](_0x4ac2ab=>_0x4ac2ab['name']===_0x1a18df[_0x91f1f8(0x157)])||null;_0x37d981[_0x91f1f8(0x146)](isUndefined,_0x2c3657)?_0x37d981[_0x91f1f8(0x134)](_0x37d981['dHJbt'],_0x37d981[_0x91f1f8(0x14b)])?_0x560a3c=_0x27560b:(_0x381ff2='Invalid\x20input.\x20grid\x20profiles:\x20'+_0x1a18df[_0x91f1f8(0x157)]+_0x91f1f8(0x154),await _0x37d981[_0x91f1f8(0xae)](reportToGalactusAndSendToEDS,_0x1a18df,_0x459137,_0x381ff2,messageTypes[_0x91f1f8(0x111)],_0x37d981[_0x91f1f8(0x11d)],_0x37d981[_0x91f1f8(0xb4)],_0x37d981[_0x91f1f8(0x133)]),logger['error'](_0x381ff2),process[_0x91f1f8(0xe3)](0x1)):_0x37d981['wWtyI'](_0x37d981['FdMnz'],_0x37d981[_0x91f1f8(0xf8)])?_0x17cc21[_0x91f1f8(0x10d)](_0x91f1f8(0x16d)+_0x21e466['error'][_0x91f1f8(0x15f)]):_0x4508b0=_0x2c3657;}else{const _0x2ad051={};_0x2ad051[_0x91f1f8(0x129)]=_0x418f4a[_0x91f1f8(0x141)],_0x2ad051[_0x91f1f8(0x8b)]=_0x30382,_0x3a54ed[_0x91f1f8(0xab)](_0x163f13,_0x2ad051,_0x37d981[_0x91f1f8(0x133)],!![]);}}else _0x37d981[_0x91f1f8(0x15d)](_0x37d981[_0x91f1f8(0xea)],_0x37d981['shRjm'])?_0x506c94[_0x91f1f8(0xa4)](_0x91f1f8(0xac)+_0x1b49c4['clusterName']+'`\x20already\x20exists'):process[_0x91f1f8(0xe3)](0x1);const _0x1a875f={};_0x1a875f[_0x91f1f8(0x129)]=WS_EVENTS[_0x91f1f8(0x141)],_0x1a875f[_0x91f1f8(0x8b)]=_0x37d981[_0x91f1f8(0x15e)],webSocketUtils[_0x91f1f8(0xab)](_0x459137,_0x1a875f),global_registry['cloudProvider']=_0x4508b0[_0x91f1f8(0x8d)],global_registry['clusterRegion']=_0x4508b0[_0x91f1f8(0xc3)],global_registry['clusterName']=_0x4508b0[_0x91f1f8(0xa8)];}else _0x2e1fa2[_0x91f1f8(0x84)](_0x37d981[_0x91f1f8(0xfd)]);}else _0x37d981['LtyNt'](_0x37d981[_0x91f1f8(0x81)],_0x37d981[_0x91f1f8(0x81)])?(logger[_0x91f1f8(0x10d)](_0x37d981[_0x91f1f8(0x11e)]),process[_0x91f1f8(0xe3)](0x1)):(_0x397a91+=_0x37d981[_0x91f1f8(0x90)],_0x228110+=_0x91f1f8(0x113)+(_0x28e700[_0x91f1f8(0x8b)]||_0x37d981[_0x91f1f8(0x87)])+'\x0a',_0xc7506b+=_0x91f1f8(0x156)+(_0x163fec[_0x91f1f8(0x11b)]||_0x37d981[_0x91f1f8(0x87)])+'\x0a',_0x55e25e+=_0x91f1f8(0x135)+(_0x1b7750[_0x91f1f8(0x15f)]||_0x37d981[_0x91f1f8(0x87)])+'\x0a');}}else _0x419c80+=_0x91f1f8(0xe4)+_0x5b0488[_0x91f1f8(0xa8)]+_0x91f1f8(0xcb);}catch(_0x29de35){_0x37d981[_0x91f1f8(0x134)](_0x37d981['lQSXQ'],_0x37d981[_0x91f1f8(0x106)])?_0x59e85f[_0x91f1f8(0x84)](_0x37d981['xwtrf']):(_0x381ff2='Error\x20in\x20input\x20validation\x20while\x20pre-check\x20-\x20'+_0x29de35+':\x20'+_0x29de35[_0x91f1f8(0x15f)],logger[_0x91f1f8(0x10d)](_0x381ff2),await _0x37d981[_0x91f1f8(0xae)](reportToGalactusAndSendToEDS,_0x1a18df,_0x459137,_0x381ff2,messageTypes['ERROR'],_0x37d981[_0x91f1f8(0x11d)],_0x37d981['MPhyk'],_0x37d981['QVjTR']),process[_0x91f1f8(0xe3)](0x1));}}function printResponse(_0x2b1575,_0x48a41c){const _0x407959=a17_0x4fa6b9,_0x1e2641={};_0x1e2641[_0x407959(0x13e)]=_0x407959(0xba),_0x1e2641['apQBE']=function(_0x392f19,_0x4a11d6){return _0x392f19!==_0x4a11d6;},_0x1e2641['qlTSr']='QKTfb';const _0x1e20c3=_0x1e2641;logger[_0x407959(0xa4)]('['+_0x2b1575+_0x407959(0xee)+_0x48a41c[_0x407959(0x97)]+_0x407959(0x11c)+_0x48a41c[_0x407959(0xda)]+_0x407959(0x152)+_0x48a41c[_0x407959(0x10d)]),_0x48a41c[_0x407959(0x10d)]&&(_0x1e20c3['apQBE'](_0x1e20c3[_0x407959(0x9e)],_0x1e20c3['qlTSr'])?_0x59939a['push'](_0x1e20c3[_0x407959(0x13e)]):logger['error'](_0x407959(0x16d)+_0x48a41c['error'][_0x407959(0x15f)]));}async function generateReport(_0x293c0e,_0x4f6659){const _0x1d9380=a17_0x4fa6b9,_0x4efe80={'bVtpZ':function(_0x12dd0e,_0x1faf56){return _0x12dd0e+_0x1faf56;},'OFKOe':_0x1d9380(0x147),'QhRVC':_0x1d9380(0xcf),'TnOmI':function(_0x483492,_0x1eb87f){return _0x483492||_0x1eb87f;},'HRTOB':_0x1d9380(0x144),'PISUG':_0x1d9380(0xe8),'vlSLA':_0x1d9380(0x110),'UVnkv':function(_0x17e07d,_0x595531){return _0x17e07d!=_0x595531;},'qKIna':_0x1d9380(0xb6),'akEwW':'will\x20be\x20created','GoJdI':function(_0x39c9c9){return _0x39c9c9();}};let _0x2f62df=_0x1d9380(0xb9)+global_registry[_0x1d9380(0x8d)]+_0x1d9380(0x172);return _0x293c0e[_0x1d9380(0xc6)]((_0x379bcd,_0x1584b6)=>{const _0x288972=_0x1d9380,{header:_0x2af675,response:_0x3fc979}=_0x379bcd,{status:_0x20e0ad,data:_0x528453,error:_0x32273e}=_0x3fc979;_0x2f62df+=_0x2af675+'\x20#'+_0x4efe80['bVtpZ'](_0x1584b6,0x1)+'\x0a',_0x2f62df+=_0x288972(0xa1)+(_0x20e0ad?_0x4efe80['OFKOe']:_0x4efe80[_0x288972(0x153)])+'\x0a',_0x2f62df+=_0x288972(0x142)+_0x4efe80[_0x288972(0x170)](_0x528453,_0x4efe80['HRTOB'])+'\x0a',_0x32273e&&(_0x2f62df+=_0x4efe80['PISUG'],_0x2f62df+='\x20\x20Message:\x20'+(_0x32273e['message']||_0x4efe80[_0x288972(0x92)])+'\x0a',_0x2f62df+=_0x288972(0x156)+(_0x32273e['code']||_0x4efe80[_0x288972(0x92)])+'\x0a',_0x2f62df+=_0x288972(0x135)+(_0x32273e['stack']||_0x4efe80[_0x288972(0x92)])+'\x0a'),_0x2f62df+='\x0a\x0a';}),_0x2f62df+=_0x4efe80[_0x1d9380(0xd6)],_0x4efe80[_0x1d9380(0x14c)](_0x4f6659,null)?_0x2f62df+=_0x1d9380(0xe4)+global_registry[_0x1d9380(0xa8)]+'\x20'+(_0x4f6659?_0x4efe80[_0x1d9380(0xe0)]:_0x4efe80[_0x1d9380(0xec)])+'\x0a\x0a':_0x2f62df+=_0x1d9380(0xe4)+global_registry[_0x1d9380(0xa8)]+_0x1d9380(0xcb),_0x2f62df+=_0x4efe80[_0x1d9380(0x158)](getSystemMetaData),_0x2f62df;}function a17_0x12d9(){const _0x4caedb=['BagWg','rIhsM','bPnnb','tPUkC','INFO','error\x20stack\x20:\x20','usage','existsSync','TnOmI','getUTCFullYear','\x20===\x0a\x0a','vzPnB','Pass\x20the\x20name\x20of\x20cloud\x20provider\x20for\x20existing\x20Kubernetes\x20Cluster.','fpJdX','pnRqD','response','INlIA','xUsEe','debug','push','ofgdv','clusterRegion','OxRpD','6531972MEaDkz','GWmUd','grid','message','toLowerCase','cloudProvider','reconnecting-websocket','../../config/constants','XXoLC','PcHoF','HRTOB','130941yFwygd','split','Pre-check\x20running\x20for\x20Cloud\x20-\x20','header','status','pre-check-cluster-args-not-passed','nwIfk','qCKtJ','Failed\x20in\x20pre-check!\x20Error:\x20','`\x20already\x20exists','handler','qlTSr','throwHttpErrors','aoYWu','Status:\x20','command','krQky','info','5OtszPd','RxLmA','PepCb','clusterName','Missing\x20required\x20arguments.\x20Please\x20provide\x20either\x20grid\x20profile\x20or\x20cluster\x20details\x20(cluser-name\x20,\x20cloud\x20provider\x20&\x20region','.\x20Please\x20provide\x20all\x20required\x20arguments.','sendEventToBackend','Cluster\x20`','SkzVF','tILcf','Report\x20saved\x20in\x20','OWZFd','connectionTimeout','Uytvu','16IQDWkW','mnEAQ','UOIFk','is\x20already\x20present','GET','argv','===\x20Precheck\x20Report\x20-\x20','cluster-name','TLSv1_2_client_method','yGaRV','jTtxV','<PasswordPlaceholder>','body','WebSocket','MGTNJ','User\x20Access','region','Tool\x20Installed','xEgXO','forEach','cluster-check-failed-','UHYXz','dummy-grid','username','\x20details\x20cannot\x20be\x20fetched\x0a\x0a','XdZJa','AjXvw','MPhyk','Failure','description','slxwL','HLWQs','AshYN','vDIWc','`\x20,error\x20:\x20','vlSLA','../../utils/utilityMethods','hHwyG','\x20region\x20-\x20','data','IPxdn','SqwGX','mEDvR','string','getUTCMinutes','qKIna','cActL','xwtrf','exit','Cluster\x20','UVDLF','headers','4328192cWEYRA','Error\x20Details:\x0a','FjcQR','cwCRl','uzcfP','akEwW','JttMB',']\x20status\x20:\x20','options','<UsernamePlaceholder>','3kKmrba','zmpZs','2600444tpuQmI','pre_check','vLfij','Create\x20a\x20grid\x20in\x20existing\x20Kubernetes\x20Cluster\x20on\x20AWS/Azure/GCP.','utf-8','FdMnz','pre-check-grid-called','stringify','IJEQD','desc','vGRQf','pre-check','credential-not-found','EkMJr','replace','authHeader','199416SYtvKd','MlYiw','Use\x20an\x20existing\x20grid\x20profile\x20to\x20setup\x20the\x20Automation\x20Grid.\x20By\x20default,\x20configured\x20profile\x20is\x20used.','zcBYU','45332hJggat','ePAel','JPoIt','init','Missing\x20required\x20arguments:\x20','230yiLRfB','error','BKrSe','vdqQK','Cluster\x20details\x0a-----------------------\x0a','ERROR','LXAUM','\x20\x20Message:\x20','getUTCHours','getUTCDate','uuid','pre-check-failed','Whitelisted\x20browserstack','KkoIp','YXVRD','code','\x20data\x20:\x20','FsiDZ','UEoCk','join','bstackUsername','isTrialGridAccessible','JbuaT','Setting\x20cloud\x20provider\x20as\x20','`\x20is\x20present\x20in\x20region\x20`','CLOUD_PROVIDER','PaKdR','YjrHQ','oskFB','type','1228251HsJOom','meYnV','EAYoa','cloud-provider-not-supported','bstackAccesskey','grid-profile','SbXsC','includes','dykuQ','QVjTR','WeZDE','\x20\x20Stack:\x20','got','TNKRD','xPzlS','will\x20be\x20created','cloud-provider','Browserstack','gREsw','Pass\x20the\x20region\x20for\x20existing\x20Kubernetes\x20Cluster.','JcUZt','length','writeFileSync','LOG','Message:\x20','Check\x20the\x20pre-requisites\x20needed\x20for\x20Automation\x20grid\x20setup','N/A','3|2|1|4|0','ICDMU','Success','KHTFt','pGqyY','FdxcM','hRPbV','UVnkv','sZjFg','help','../../utils/instrumentationUtils','Grid\x20profile\x20fetched\x20for\x20pre-check','NhgvF','\x20error\x20:\x20','QhRVC','.\x20please\x20verify\x20the\x20grid\x20profile\x20name\x20and\x20try\x20again','idctM','\x20\x20Code:\x20','gridProfile','GoJdI','oMYDe','checkAccess','dnFWY','requestId','JvcAe','LqnHC','stack','SSL\x20Configured','parse','DBWQp','stack\x20trace\x20','epilogue','JFtLQ','grid\x20profile\x20flow\x20','../../cloudproviders/utils'];a17_0x12d9=function(){return _0x4caedb;};return a17_0x12d9();};exports[a17_0x4fa6b9(0x9d)]=async function(_0x4d07ec){const _0x3bc460=a17_0x4fa6b9,_0x35bd45={'YpIAg':function(_0x3a9c07){return _0x3a9c07();},'UHYXz':function(_0x27829f){return _0x27829f();},'vdqQK':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','pioNX':function(_0x34c584,_0x29318a,_0xbbcc26,_0x428f31,_0x495f62,_0x341da7,_0x481c8c,_0x4a0193){return _0x34c584(_0x29318a,_0xbbcc26,_0x428f31,_0x495f62,_0x341da7,_0x481c8c,_0x4a0193);},'PcHoF':_0x3bc460(0xf9),'zmpZs':_0x3bc460(0xff),'dnFWY':_0x3bc460(0x10d),'EAYoa':function(_0x201044,_0x58357d,_0x3e926c,_0x30e4db,_0x2b3721,_0x3c82d0,_0x4340f0){return _0x201044(_0x58357d,_0x3e926c,_0x30e4db,_0x2b3721,_0x3c82d0,_0x4340f0);},'BKrSe':_0x3bc460(0xf0),'dykuQ':_0x3bc460(0xbe),'pnRqD':function(_0x432b4e,_0x3f2ab4,_0x451b68){return _0x432b4e(_0x3f2ab4,_0x451b68);},'ZTkjk':function(_0x32a683,_0x2d2cc4,_0x58bf06){return _0x32a683(_0x2d2cc4,_0x58bf06);},'HqCfu':_0x3bc460(0xc9),'vzPnB':'toolInstalledResp','meYnV':_0x3bc460(0x145),'xPzlS':function(_0x5422d6,_0x4a6e15,_0x271624,_0x24525,_0x50b91f,_0x3a8c84,_0x3e8c89,_0xdb6843){return _0x5422d6(_0x4a6e15,_0x271624,_0x24525,_0x50b91f,_0x3a8c84,_0x3e8c89,_0xdb6843);},'qkmFF':function(_0x222700,_0x1c67d0,_0x45c9c5){return _0x222700(_0x1c67d0,_0x45c9c5);},'DBWQp':'accessResp','qCKtJ':function(_0x3bdb02,_0x46e0da,_0x2eef26){return _0x3bdb02(_0x46e0da,_0x2eef26);},'oMYDe':_0x3bc460(0x121),'RxLmA':function(_0x2461e6,_0x3d4d21){return _0x2461e6(_0x3d4d21);},'bKbXb':_0x3bc460(0xbb),'LXAUM':'isTls1_2_SUPPORTED','EkMJr':_0x3bc460(0xc4),'TNKRD':_0x3bc460(0xc2),'YXVRD':_0x3bc460(0x118),'UVDLF':_0x3bc460(0x160),'mEDvR':function(_0x1dec13,_0x18117b,_0xbcbbef){return _0x1dec13(_0x18117b,_0xbcbbef);},'QbRaC':function(_0x5c6e01,_0x4cbaed){return _0x5c6e01+_0x4cbaed;},'MlYiw':_0x3bc460(0xf7),'fpJdX':_0x3bc460(0x117)};let _0xfc4c53,_0x233687;try{global_registry[_0x3bc460(0x15c)]=_0x35bd45['YpIAg'](uuidv4);!fs[_0x3bc460(0x16f)](_0x35bd45[_0x3bc460(0xc8)](getCredentialsPath))&&(_0x233687=_0x35bd45[_0x3bc460(0x10f)],logger['error'](_0x233687),await _0x35bd45['pioNX'](reportToGalactusAndSendToEDS,_0x4d07ec,_0xfc4c53,_0x233687,messageTypes[_0x3bc460(0x111)],_0x35bd45[_0x3bc460(0x91)],_0x35bd45[_0x3bc460(0xf2)],_0x35bd45['dnFWY']),process[_0x3bc460(0xe3)](0x1));_0x35bd45[_0x3bc460(0x12c)](sendInstrumentationEvent,_0x4d07ec,_0x35bd45['PcHoF'],messageTypes[_0x3bc460(0x16c)],null,null,_0x4d07ec);const _0x532d46=JSON[_0x3bc460(0x161)](fs['readFileSync'](_0x35bd45[_0x3bc460(0xc8)](getCredentialsPath)));global_registry[_0x3bc460(0x120)]=_0x532d46[_0x3bc460(0x13b)][_0x3bc460(0xca)],global_registry[_0x3bc460(0x12e)]=_0x532d46[_0x3bc460(0x13b)]['password'];const _0x161f8a=WS_ENDPOINT['replace'](_0x35bd45[_0x3bc460(0x10e)],_0x532d46[_0x3bc460(0x13b)]['username'])[_0x3bc460(0x101)](_0x35bd45[_0x3bc460(0x132)],_0x532d46[_0x3bc460(0x13b)]['password']),_0x42f2b6={};_0x42f2b6[_0x3bc460(0xc0)]=ws,_0x42f2b6[_0x3bc460(0xb1)]=0x36ee80,_0xfc4c53=new ReconnectingWebSocket(_0x161f8a,[],_0x42f2b6),global_registry[_0x3bc460(0x102)]=_0x35bd45[_0x3bc460(0x7f)](getAuthHeader,global_registry[_0x3bc460(0x120)],global_registry[_0x3bc460(0x12e)]),await _0x35bd45['ZTkjk'](inputValidation,_0x4d07ec,_0xfc4c53),logger['info'](_0x3bc460(0x95)+global_registry[_0x3bc460(0x8d)]+_0x3bc460(0xd9)+global_registry[_0x3bc460(0x86)]);let _0x352282=await _0x35bd45['EAYoa'](getCloudProviderObjectWithOutInit,global_registry[_0x3bc460(0x8d)],global_registry['clusterName'],_0x35bd45['HqCfu'],_0xfc4c53,webSocketUtils,_0x4d07ec);const _0x2da61d=await _0x352282['isCliToolInstalled']();_0x35bd45[_0x3bc460(0x7f)](printResponse,_0x35bd45[_0x3bc460(0x173)],_0x2da61d),_0x352282=await _0x352282[_0x3bc460(0x10a)]();let _0x2b4185=![];try{_0x2b4185=await _0x352282['isClusterPresent']();}catch(_0x47c367){const _0x4226c5=_0x35bd45[_0x3bc460(0x12b)][_0x3bc460(0x94)]('|');let _0x3d6750=0x0;while(!![]){switch(_0x4226c5[_0x3d6750++]){case'0':await _0x35bd45[_0x3bc460(0x138)](reportToGalactusAndSendToEDS,_0x4d07ec,_0xfc4c53,_0x233687,messageTypes[_0x3bc460(0x111)],_0x35bd45[_0x3bc460(0x91)],_0x3bc460(0xc7)+global_registry[_0x3bc460(0x8d)],_0x35bd45[_0x3bc460(0x15b)]);continue;case'1':logger[_0x3bc460(0x10d)](_0x233687);continue;case'2':_0x2b4185=null;continue;case'3':_0x233687='unable\x20to\x20verify\x20if\x20cluster\x20`'+global_registry[_0x3bc460(0xa8)]+_0x3bc460(0x124)+global_registry[_0x3bc460(0x86)]+_0x3bc460(0xd5)+_0x47c367;continue;case'4':_0x233687+='\x0a'+JSON['stringify'](_0x47c367[_0x3bc460(0x15f)]);continue;}break;}}_0x2b4185&&logger[_0x3bc460(0xa4)](_0x3bc460(0xac)+global_registry[_0x3bc460(0xa8)]+_0x3bc460(0x9c));const _0x2c6cd9=await _0x352282[_0x3bc460(0x15a)]();_0x35bd45['qkmFF'](printResponse,_0x35bd45[_0x3bc460(0x162)],_0x2c6cd9);const _0xb88fd0=await _0x35bd45[_0x3bc460(0xc8)](curlRequest);_0x35bd45[_0x3bc460(0x9a)](printResponse,_0x35bd45[_0x3bc460(0x159)],_0xb88fd0);const _0xdaa4ce=await _0x35bd45[_0x3bc460(0xa6)](isTlsSupported,_0x35bd45['bKbXb']);_0x35bd45['qCKtJ'](printResponse,_0x35bd45[_0x3bc460(0x112)],_0xdaa4ce);const _0x34575a={};_0x34575a[_0x3bc460(0x96)]=_0x35bd45[_0x3bc460(0x100)],_0x34575a[_0x3bc460(0x80)]=_0x2da61d;const _0x4a754d={};_0x4a754d['header']=_0x35bd45[_0x3bc460(0x137)],_0x4a754d[_0x3bc460(0x80)]=_0x2c6cd9;const _0x32e6bf={};_0x32e6bf[_0x3bc460(0x96)]=_0x35bd45[_0x3bc460(0x11a)],_0x32e6bf['response']=_0xb88fd0;const _0x581958={};_0x581958[_0x3bc460(0x96)]=_0x35bd45[_0x3bc460(0xe5)],_0x581958[_0x3bc460(0x80)]=_0xdaa4ce;const _0x4dbfd7=[_0x34575a,_0x4a754d,_0x32e6bf,_0x581958],_0x469435=await _0x35bd45[_0x3bc460(0xdd)](generateReport,_0x4dbfd7,_0x2b4185),_0x151aa5=new Date(),_0x5da3b6=_0x151aa5[_0x3bc460(0x171)]()+'_'+_0x35bd45['QbRaC'](_0x151aa5['getUTCMonth'](),0x1)+'_'+_0x151aa5[_0x3bc460(0x115)]()+'_'+_0x151aa5[_0x3bc460(0x114)]()+'_'+_0x151aa5[_0x3bc460(0xdf)](),_0x1bd5d6='log/report_'+_0x5da3b6+'.txt';fs[_0x3bc460(0x140)](_0x1bd5d6,_0x469435,_0x35bd45[_0x3bc460(0x104)]),logger[_0x3bc460(0xa4)](_0x3bc460(0xaf)+_0x1bd5d6),process[_0x3bc460(0xe3)](0x0);}catch(_0x48f065){let _0x83dd95=_0x3bc460(0x9b)+_0x48f065+'\x20';logger[_0x3bc460(0x10d)](_0x83dd95),_0x83dd95+='\x0a'+JSON[_0x3bc460(0xfa)](_0x48f065[_0x3bc460(0x15f)]),logger[_0x3bc460(0x83)](_0x3bc460(0x163)+_0x48f065[_0x3bc460(0x15f)]);if(_0xfc4c53){const _0x487d8c={};_0x487d8c[_0x3bc460(0x129)]=WS_EVENTS['LOG'],_0x487d8c['message']=_0x83dd95,webSocketUtils[_0x3bc460(0xab)](_0xfc4c53,_0x487d8c,_0x35bd45['dnFWY'],!![]);}await webSocketUtils['delay'](0x7d0);const _0x4d8f7f={};_0x4d8f7f['error']=_0x83dd95,await _0x35bd45[_0x3bc460(0x12c)](sendInstrumentationEvent,_0x4d07ec,_0x35bd45[_0x3bc460(0x91)],messageTypes[_0x3bc460(0x111)],_0x35bd45[_0x3bc460(0x7e)],_0x4d8f7f,_0x4d07ec),process[_0x3bc460(0xe3)](0x1);}};