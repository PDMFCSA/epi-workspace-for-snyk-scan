const a17_0x4a0502=a17_0x1bc2;function a17_0x1bc2(_0x2cb671,_0xf759ca){const _0x5a3021=a17_0x5a30();return a17_0x1bc2=function(_0x1bc2c7,_0x2e3a68){_0x1bc2c7=_0x1bc2c7-0x127;let _0x26decf=_0x5a3021[_0x1bc2c7];return _0x26decf;},a17_0x1bc2(_0x2cb671,_0xf759ca);}(function(_0xc39921,_0x441bcd){const _0x2721c9=a17_0x1bc2,_0x1eb480=_0xc39921();while(!![]){try{const _0x3e7069=-parseInt(_0x2721c9(0x218))/0x1+-parseInt(_0x2721c9(0x214))/0x2+parseInt(_0x2721c9(0x159))/0x3+parseInt(_0x2721c9(0x1c0))/0x4+parseInt(_0x2721c9(0x1c2))/0x5+parseInt(_0x2721c9(0x1a8))/0x6*(-parseInt(_0x2721c9(0x168))/0x7)+parseInt(_0x2721c9(0x182))/0x8;if(_0x3e7069===_0x441bcd)break;else _0x1eb480['push'](_0x1eb480['shift']());}catch(_0x296321){_0x1eb480['push'](_0x1eb480['shift']());}}}(a17_0x5a30,0x6508b));const fs=require('fs'),ws=require('ws'),got=require('got'),{v4:uuidv4}=require(a17_0x4a0502(0x15c)),ReconnectingWebSocket=require('reconnecting-websocket'),{getCredentialsPath,reportToGalactusAndSendToEDS,getAuthHeader,responseValidation,isUndefined,curlRequest,isTlsSupported,getSystemMetaData}=require(a17_0x4a0502(0x1fa)),{logger}=require('../../config/logger'),{HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,global_registry,messageTypes,WS_ENDPOINT,WS_EVENTS,ALL_SUPPORTED_CLOUD_PROVIDERS,AG_API_URL,DEFAULT_CLUSTER_DETAILS}=require(a17_0x4a0502(0x15e)),{getCloudProviderObjectWithOutInit}=require(a17_0x4a0502(0x13a)),webSocketUtils=require('../../utils/webSocketUtils'),{sendInstrumentationEvent}=require(a17_0x4a0502(0x1a1));exports[a17_0x4a0502(0x197)]=a17_0x4a0502(0x1d3),exports[a17_0x4a0502(0x156)]=a17_0x4a0502(0x1ad),exports[a17_0x4a0502(0x1e9)]=function(_0x5513a0){const _0x30c54e=a17_0x4a0502,_0x17b043={};_0x17b043[_0x30c54e(0x139)]=_0x30c54e(0x1ce),_0x17b043[_0x30c54e(0x1c9)]=_0x30c54e(0x1e6),_0x17b043[_0x30c54e(0x150)]=_0x30c54e(0x202),_0x17b043[_0x30c54e(0x176)]=_0x30c54e(0x1da),_0x17b043['xyuzH']=_0x30c54e(0x20a),_0x17b043[_0x30c54e(0x14d)]=_0x30c54e(0x1c1);const _0x3238e6=_0x17b043,_0x5605ac={};_0x5605ac[_0x30c54e(0x1d9)]=_0x3238e6['FkNiS'],_0x5605ac[_0x30c54e(0x209)]=_0x3238e6[_0x30c54e(0x1c9)];const _0x510ae6={};_0x510ae6['description']=_0x3238e6[_0x30c54e(0x150)],_0x510ae6[_0x30c54e(0x209)]=_0x3238e6['gMCwL'];const _0x27cc9b={};_0x27cc9b['description']=_0x3238e6[_0x30c54e(0x176)],_0x27cc9b[_0x30c54e(0x209)]=_0x3238e6['gMCwL'];const _0x3f8c93={};_0x3f8c93['description']=_0x3238e6[_0x30c54e(0x20c)],_0x3f8c93[_0x30c54e(0x209)]=_0x3238e6[_0x30c54e(0x1c9)];const _0x5f52ab={};return _0x5f52ab[_0x30c54e(0x181)]=_0x5605ac,_0x5f52ab[_0x30c54e(0x134)]=_0x510ae6,_0x5f52ab[_0x30c54e(0x219)]=_0x27cc9b,_0x5f52ab[_0x30c54e(0x1f4)]=_0x3f8c93,_0x5513a0['usage'](HELP_HEADER_MESSAGE[_0x30c54e(0x1c7)])[_0x30c54e(0x15a)](HELP_FOOTER_MESSAGE)['options'](_0x5f52ab)[_0x30c54e(0x1c1)](_0x3238e6[_0x30c54e(0x14d)])['argv'];};async function inputValidation(_0x3230a5,_0x57d7f5){const _0x588a23=a17_0x4a0502,_0x25176f={'LkBra':function(_0x5f4a0d,_0x57496c){return _0x5f4a0d+_0x57496c;},'fKmxU':'Success','yhEWg':_0x588a23(0x164),'oNnYR':function(_0xcf721,_0x372d83){return _0xcf721||_0x372d83;},'xFVLo':_0x588a23(0x1cc),'FJhPo':_0x588a23(0x16f),'gngGy':'error','zlmNY':'Missing\x20required\x20arguments.\x20Please\x20provide\x20either\x20grid\x20profile\x20or\x20cluster\x20details\x20(cluser-name\x20,\x20cloud\x20provider\x20&\x20region','HWZdY':_0x588a23(0x17d),'XgyRc':'will\x20be\x20created','jtrRm':'cloud-provider','bhtKX':_0x588a23(0x219),'bJMRJ':_0x588a23(0x181),'houLZ':function(_0x251eb3,_0x4a919f){return _0x251eb3===_0x4a919f;},'ahoeF':_0x588a23(0x220),'ISjlc':_0x588a23(0x1f7),'FxMJA':function(_0x2ceecc,_0x140a4d){return _0x2ceecc!==_0x140a4d;},'PkyuC':'OWRRK','enVJV':'fPJII','AGhqp':_0x588a23(0x198),'VriON':_0x588a23(0x154),'Udrfh':_0x588a23(0x17c),'VkTSw':function(_0x12dbfe,_0x42527d){return _0x12dbfe!==_0x42527d;},'qaMaL':_0x588a23(0x194),'zgPcr':function(_0x9925c8,_0x44bb4e){return _0x9925c8>_0x44bb4e;},'VIsNh':function(_0x3f6985,_0x137edc){return _0x3f6985===_0x137edc;},'Ybjza':_0x588a23(0x1cd),'xdjly':_0x588a23(0x1b3),'gsZrL':function(_0x133526,_0x54affa,_0x2b19fe,_0x340f4d,_0x562c81,_0x15c7cc,_0x37eef4,_0x1d940b){return _0x133526(_0x54affa,_0x2b19fe,_0x340f4d,_0x562c81,_0x15c7cc,_0x37eef4,_0x1d940b);},'WIEGM':_0x588a23(0x1ed),'JMJjs':_0x588a23(0x1bc),'fnCnq':function(_0x2c2913,_0x523a67){return _0x2c2913===_0x523a67;},'VDzjP':_0x588a23(0x213),'nRWvc':_0x588a23(0x1ff),'bkcbt':_0x588a23(0x215),'vepaE':'lUIbd','SGSJN':_0x588a23(0x162),'YwbTJ':_0x588a23(0x172),'kiMHE':'jriGK','anJhC':_0x588a23(0x18f),'zFrVi':function(_0x2a0101,_0xc7a25e,_0x27f441){return _0x2a0101(_0xc7a25e,_0x27f441);},'qIxsN':function(_0x26ef23,_0x2a98ec,_0x29036c,_0x4d16e4,_0x4b57f8,_0x2733a3){return _0x26ef23(_0x2a98ec,_0x29036c,_0x4d16e4,_0x4b57f8,_0x2733a3);},'swXcx':'pre-check','KKGDO':_0x588a23(0x1f4),'nkWrY':_0x588a23(0x1a7),'IsssB':_0x588a23(0x1a2),'txnvf':function(_0x35cbd7,_0x131e93){return _0x35cbd7(_0x131e93);},'JbhBJ':function(_0x5acc9c,_0x9d8481){return _0x5acc9c!==_0x9d8481;},'UXWHy':'jefNR','LBSOe':function(_0x9251ad,_0x47f32b,_0x58ada2,_0x38a4d3,_0x10cd72,_0x1e9dfe,_0xe51b2a,_0x85e224){return _0x9251ad(_0x47f32b,_0x58ada2,_0x38a4d3,_0x10cd72,_0x1e9dfe,_0xe51b2a,_0x85e224);},'TFtrB':_0x588a23(0x17e),'OYBZP':function(_0x19dbff,_0x246ad7){return _0x19dbff!==_0x246ad7;},'EOOJY':'rXzql','ATTgo':function(_0x45feca,_0x54369c){return _0x45feca===_0x54369c;},'rprdR':_0x588a23(0x1f1),'rNHPD':_0x588a23(0x171),'wNBTP':function(_0x310cb6,_0x299fe1){return _0x310cb6!==_0x299fe1;},'mAqtd':_0x588a23(0x1b4),'wQcJL':_0x588a23(0x138),'sqoHn':function(_0x1a9e4f,_0x29e814,_0x2ee9db,_0x150571,_0x16d05c,_0x867da7,_0x1581b5,_0x2c3507){return _0x1a9e4f(_0x29e814,_0x2ee9db,_0x150571,_0x16d05c,_0x867da7,_0x1581b5,_0x2c3507);}};let _0x113472;try{if(_0x25176f[_0x588a23(0x18b)](_0x25176f[_0x588a23(0x161)],_0x25176f[_0x588a23(0x208)]))_0x3ff460[_0x588a23(0x1db)](_0x588a23(0x1f3)+_0x32267f[_0x588a23(0x187)]+'\x20'),_0x6fbd24[_0x588a23(0x1fe)]=_0x1b856c['CLOUD_PROVIDER'];else{if(_0x3230a5['clusterName']||_0x3230a5[_0x588a23(0x1fe)]||_0x3230a5[_0x588a23(0x219)]){if(_0x25176f[_0x588a23(0x16e)](_0x25176f[_0x588a23(0x12d)],_0x25176f['enVJV'])){const _0x19c37f=[];!_0x3230a5[_0x588a23(0x1e1)]&&(_0x25176f['FxMJA'](_0x25176f[_0x588a23(0x136)],_0x25176f[_0x588a23(0x136)])?_0xd171f3['error'](_0x588a23(0x205)+_0x2d47db['error'][_0x588a23(0x13f)]):_0x19c37f[_0x588a23(0x132)](_0x25176f[_0x588a23(0x178)]));;if(!_0x3230a5[_0x588a23(0x1fe)]){if(_0x25176f[_0x588a23(0x16e)](_0x25176f['VriON'],_0x25176f['Udrfh']))_0x19c37f[_0x588a23(0x132)](_0x25176f[_0x588a23(0x1e2)]);else{const {header:_0x1c3259,response:_0x1b0c09}=_0x38580b,{status:_0x2f5e95,data:_0x31f542,error:_0x31f812}=_0x1b0c09;_0x39bf34+=_0x1c3259+'\x20#'+_0x25176f[_0x588a23(0x193)](_0x490dda,0x1)+'\x0a',_0x5daf30+='Status:\x20'+(_0x2f5e95?_0x25176f[_0x588a23(0x1e0)]:_0x25176f[_0x588a23(0x1fc)])+'\x0a',_0x52b4fa+=_0x588a23(0x1dd)+_0x25176f[_0x588a23(0x1e4)](_0x31f542,_0x25176f[_0x588a23(0x173)])+'\x0a',_0x31f812&&(_0x4afb96+=_0x25176f['FJhPo'],_0x5c5141+=_0x588a23(0x127)+(_0x31f812[_0x588a23(0x13e)]||_0x25176f['xFVLo'])+'\x0a',_0x46c48b+='\x20\x20Code:\x20'+(_0x31f812[_0x588a23(0x1bf)]||_0x25176f[_0x588a23(0x173)])+'\x0a',_0x1ade80+=_0x588a23(0x21b)+(_0x31f812[_0x588a23(0x13f)]||_0x25176f['xFVLo'])+'\x0a'),_0x55c585+='\x0a\x0a';}};if(!_0x3230a5[_0x588a23(0x219)]){if(_0x25176f['VkTSw'](_0x25176f[_0x588a23(0x1be)],_0x25176f[_0x588a23(0x1be)])){const _0x2f91ac={};_0x2f91ac[_0x588a23(0x209)]=_0x41b6ec[_0x588a23(0x151)],_0x2f91ac[_0x588a23(0x13e)]=_0x3e15e7,_0xada77b['sendEventToBackend'](_0x5432c4,_0x2f91ac,_0x25176f[_0x588a23(0x14b)],!![]);}else _0x19c37f[_0x588a23(0x132)](_0x25176f[_0x588a23(0x1de)]);};_0x25176f[_0x588a23(0x1b5)](_0x19c37f['length'],0x0)&&(_0x25176f[_0x588a23(0x170)](_0x25176f['Ybjza'],_0x25176f[_0x588a23(0x15d)])?(_0x296e17[_0x588a23(0x1cf)](_0x25176f[_0x588a23(0x18e)]),_0x1e482e[_0x588a23(0x14c)](0x1)):(_0x113472='Missing\x20required\x20arguments:\x20'+_0x19c37f[_0x588a23(0x16b)](',\x20')+'.\x20Please\x20provide\x20all\x20required\x20arguments.',await _0x25176f['gsZrL'](reportToGalactusAndSendToEDS,_0x3230a5,_0x57d7f5,_0x113472,messageTypes[_0x588a23(0x21c)],_0x25176f[_0x588a23(0x217)],_0x25176f[_0x588a23(0x1a9)],_0x25176f[_0x588a23(0x14b)]),logger[_0x588a23(0x1cf)](_0x113472),process[_0x588a23(0x14c)](0x1))),!ALL_SUPPORTED_CLOUD_PROVIDERS[_0x588a23(0x1b1)](_0x3230a5['cloudProvider']['toLowerCase']())&&(_0x25176f['fnCnq'](_0x25176f[_0x588a23(0x1fd)],_0x25176f[_0x588a23(0x1fd)])?(_0x113472=_0x25176f[_0x588a23(0x1f6)],await _0x25176f[_0x588a23(0x212)](reportToGalactusAndSendToEDS,_0x3230a5,_0x57d7f5,_0x113472,messageTypes[_0x588a23(0x21c)],_0x25176f[_0x588a23(0x217)],_0x25176f['bkcbt'],_0x25176f[_0x588a23(0x14b)]),logger[_0x588a23(0x1cf)](_0x113472),!_0x3230a5['cloudProvider']&&(_0x25176f['VkTSw'](_0x25176f[_0x588a23(0x14a)],_0x25176f[_0x588a23(0x20f)])?(logger[_0x588a23(0x1db)](_0x588a23(0x1f3)+DEFAULT_CLUSTER_DETAILS[_0x588a23(0x187)]+'\x20'),_0x3230a5['cloudProvider']=DEFAULT_CLUSTER_DETAILS[_0x588a23(0x187)]):_0x4a39f0[_0x588a23(0x14c)](0x1))):_0xeba83c+=_0x588a23(0x195)+_0x1fccc4[_0x588a23(0x1e1)]+'\x20'+(_0x48305e?_0x25176f[_0x588a23(0x17a)]:_0x25176f[_0x588a23(0x137)])+'\x0a\x0a'),global_registry[_0x588a23(0x1e1)]=_0x3230a5[_0x588a23(0x1e1)],global_registry['cloudProvider']=_0x3230a5[_0x588a23(0x1fe)],global_registry[_0x588a23(0x21e)]=_0x3230a5[_0x588a23(0x219)];}else _0x5d8f13[_0x588a23(0x132)](_0x25176f[_0x588a23(0x1e2)]);}else{if(_0x3230a5[_0x588a23(0x201)]){if(_0x25176f[_0x588a23(0x18b)](_0x25176f[_0x588a23(0x184)],_0x25176f[_0x588a23(0x1b0)]))_0x2a9a68[_0x588a23(0x132)](_0x25176f['bhtKX']);else{global_registry['gridProfile']=_0x3230a5['gridProfile'],logger[_0x588a23(0x1c8)](_0x588a23(0x1e5)+_0x3230a5[_0x588a23(0x201)]);const _0x5dd609=_0x588a23(0x200)+AG_API_URL+_0x588a23(0x1d8),_0x4f0b6d={};_0x4f0b6d['method']=_0x25176f[_0x588a23(0x1cb)],_0x4f0b6d['headers']=global_registry[_0x588a23(0x19b)],_0x4f0b6d[_0x588a23(0x16a)]=![];const _0x12afdc=_0x4f0b6d,_0x302690=await _0x25176f[_0x588a23(0x142)](got,_0x5dd609,_0x12afdc),_0x412956=await _0x25176f[_0x588a23(0x163)](responseValidation,_0x302690,_0x25176f[_0x588a23(0x1e3)],_0x25176f[_0x588a23(0x204)],_0x3230a5,_0x57d7f5);let _0x4eba0e={};if(_0x25176f[_0x588a23(0x167)](_0x412956,0xc8)){if(_0x25176f[_0x588a23(0x16e)](_0x25176f['nkWrY'],_0x25176f['IsssB'])){const _0x4c119d=JSON['parse'](_0x302690['body']),_0x40d994=_0x4c119d[_0x588a23(0x141)](_0x1fdf9e=>_0x1fdf9e['name']===_0x3230a5[_0x588a23(0x201)])||null;_0x25176f[_0x588a23(0x185)](isUndefined,_0x40d994)?_0x25176f['JbhBJ'](_0x25176f[_0x588a23(0x189)],_0x25176f[_0x588a23(0x189)])?_0x20be69+=_0x588a23(0x195)+_0x18a4c7[_0x588a23(0x1e1)]+_0x588a23(0x13c):(_0x113472=_0x588a23(0x177)+_0x3230a5[_0x588a23(0x201)]+'.\x20please\x20verify\x20the\x20grid\x20profile\x20name\x20and\x20try\x20again',await _0x25176f[_0x588a23(0x131)](reportToGalactusAndSendToEDS,_0x3230a5,_0x57d7f5,_0x113472,messageTypes[_0x588a23(0x21c)],_0x25176f['WIEGM'],_0x25176f[_0x588a23(0x221)],_0x25176f['gngGy']),logger[_0x588a23(0x1cf)](_0x113472),process[_0x588a23(0x14c)](0x1)):_0x25176f[_0x588a23(0x12f)](_0x25176f[_0x588a23(0x1fb)],_0x25176f[_0x588a23(0x1fb)])?_0x4facce[_0x588a23(0x132)](_0x25176f[_0x588a23(0x178)]):_0x4eba0e=_0x40d994;}else _0x155938=_0x8f2e1f;}else _0x25176f['ATTgo'](_0x25176f[_0x588a23(0x1df)],_0x25176f[_0x588a23(0x1df)])?process[_0x588a23(0x14c)](0x1):_0x12f861[_0x588a23(0x1db)](_0x588a23(0x160)+_0x43f2a5[_0x588a23(0x1e1)]+_0x588a23(0x145));const _0x41fe81={};_0x41fe81[_0x588a23(0x209)]=WS_EVENTS[_0x588a23(0x151)],_0x41fe81[_0x588a23(0x13e)]=_0x25176f[_0x588a23(0x1f2)],webSocketUtils[_0x588a23(0x129)](_0x57d7f5,_0x41fe81),global_registry['cloudProvider']=_0x4eba0e[_0x588a23(0x1fe)],global_registry[_0x588a23(0x21e)]=_0x4eba0e['region'],global_registry[_0x588a23(0x1e1)]=_0x4eba0e[_0x588a23(0x1e1)];}}else _0x25176f[_0x588a23(0x16d)](_0x25176f[_0x588a23(0x1c6)],_0x25176f['mAqtd'])?(_0x327fb9[_0x588a23(0x1db)]('['+_0x4c3b57+_0x588a23(0x133)+_0x2140eb[_0x588a23(0x12c)]+'\x20data\x20:\x20'+_0xe76745['data']+'\x20error\x20:\x20'+_0x1b0026['error']),_0x24c73d[_0x588a23(0x1cf)]&&_0x15949c[_0x588a23(0x1cf)](_0x588a23(0x205)+_0x5d8545[_0x588a23(0x1cf)][_0x588a23(0x13f)])):(logger[_0x588a23(0x1cf)](_0x25176f[_0x588a23(0x18e)]),process[_0x588a23(0x14c)](0x1));}}}catch(_0x3350ef){_0x25176f[_0x588a23(0x16d)](_0x25176f[_0x588a23(0x18a)],_0x25176f[_0x588a23(0x18a)])?(_0x53c68a+=_0x25176f[_0x588a23(0x157)],_0xa180bb+=_0x588a23(0x127)+(_0x2ae7b9[_0x588a23(0x13e)]||_0x25176f[_0x588a23(0x173)])+'\x0a',_0x51058d+=_0x588a23(0x19c)+(_0x5ce593[_0x588a23(0x1bf)]||_0x25176f[_0x588a23(0x173)])+'\x0a',_0x5a7056+='\x20\x20Stack:\x20'+(_0x46343[_0x588a23(0x13f)]||_0x25176f[_0x588a23(0x173)])+'\x0a'):(_0x113472=_0x588a23(0x1ef)+_0x3350ef+':\x20'+_0x3350ef[_0x588a23(0x13f)],logger['error'](_0x113472),await _0x25176f[_0x588a23(0x1a4)](reportToGalactusAndSendToEDS,_0x3230a5,_0x57d7f5,_0x113472,messageTypes[_0x588a23(0x21c)],_0x25176f[_0x588a23(0x217)],_0x25176f['bkcbt'],_0x25176f[_0x588a23(0x14b)]),process['exit'](0x1));}}function printResponse(_0x2febc3,_0x4c7004){const _0x139250=a17_0x4a0502,_0x4799d5={};_0x4799d5['SxKrR']=_0x139250(0x1ce),_0x4799d5['MNEvL']=_0x139250(0x1e6),_0x4799d5[_0x139250(0x148)]=_0x139250(0x202),_0x4799d5[_0x139250(0x20b)]='Pass\x20the\x20region\x20for\x20existing\x20Kubernetes\x20Cluster.',_0x4799d5[_0x139250(0x1d0)]=_0x139250(0x20a),_0x4799d5[_0x139250(0x1a6)]=_0x139250(0x1c1),_0x4799d5[_0x139250(0x1b8)]=function(_0x176f3a,_0x2f724a){return _0x176f3a!==_0x2f724a;},_0x4799d5['TjeGP']=_0x139250(0x1ea),_0x4799d5[_0x139250(0x1c4)]=_0x139250(0x12a);const _0x3376c5=_0x4799d5;logger[_0x139250(0x1db)]('['+_0x2febc3+_0x139250(0x133)+_0x4c7004['status']+_0x139250(0x1bd)+_0x4c7004[_0x139250(0x18c)]+_0x139250(0x211)+_0x4c7004[_0x139250(0x1cf)]);if(_0x4c7004[_0x139250(0x1cf)]){if(_0x3376c5[_0x139250(0x1b8)](_0x3376c5[_0x139250(0x17f)],_0x3376c5[_0x139250(0x1c4)]))logger[_0x139250(0x1cf)](_0x139250(0x205)+_0x4c7004[_0x139250(0x1cf)][_0x139250(0x13f)]);else{const _0x2d075e={};_0x2d075e[_0x139250(0x1d9)]=_0x3376c5[_0x139250(0x1e7)],_0x2d075e['type']=_0x3376c5[_0x139250(0x135)];const _0x1a2122={};_0x1a2122['description']=_0x3376c5[_0x139250(0x148)],_0x1a2122[_0x139250(0x209)]=_0x3376c5[_0x139250(0x135)];const _0x5572f2={};_0x5572f2['description']=_0x3376c5[_0x139250(0x20b)],_0x5572f2[_0x139250(0x209)]=_0x3376c5[_0x139250(0x135)];const _0x5f4c81={};_0x5f4c81[_0x139250(0x1d9)]=_0x3376c5[_0x139250(0x1d0)],_0x5f4c81[_0x139250(0x209)]=_0x3376c5[_0x139250(0x135)];const _0x373c5a={};return _0x373c5a[_0x139250(0x181)]=_0x2d075e,_0x373c5a['cloud-provider']=_0x1a2122,_0x373c5a[_0x139250(0x219)]=_0x5572f2,_0x373c5a[_0x139250(0x1f4)]=_0x5f4c81,_0x1708dd['usage'](_0x302455[_0x139250(0x1c7)])[_0x139250(0x15a)](_0x43057a)['options'](_0x373c5a)[_0x139250(0x1c1)](_0x3376c5['AEtri'])[_0x139250(0x1d4)];}}}async function generateReport(_0x57bdc6,_0x485bf3){const _0x5830f4=a17_0x4a0502,_0x3b7cfb={'QjpNd':function(_0x4226dd,_0x258050){return _0x4226dd+_0x258050;},'yGYZs':'Success','jKUam':_0x5830f4(0x164),'tlMbl':function(_0x598074,_0x3e57ab){return _0x598074||_0x3e57ab;},'sFXQM':'N/A','sTXmH':'Error\x20Details:\x0a','lTIXA':_0x5830f4(0x20e),'UwXPj':function(_0x4ff1ab,_0x35bdde){return _0x4ff1ab!=_0x35bdde;},'dcpLs':_0x5830f4(0x17d),'wifRS':'will\x20be\x20created','IdfFw':function(_0x28ed01){return _0x28ed01();}};let _0x37a6d3=_0x5830f4(0x149)+global_registry['cloudProvider']+_0x5830f4(0x1f8);return _0x57bdc6[_0x5830f4(0x1d2)]((_0x583703,_0x17906b)=>{const _0x17bfb2=_0x5830f4,{header:_0x240605,response:_0xf975b7}=_0x583703,{status:_0x4bc4a3,data:_0x4015f5,error:_0x276184}=_0xf975b7;_0x37a6d3+=_0x240605+'\x20#'+_0x3b7cfb[_0x17bfb2(0x1e8)](_0x17906b,0x1)+'\x0a',_0x37a6d3+=_0x17bfb2(0x1aa)+(_0x4bc4a3?_0x3b7cfb[_0x17bfb2(0x13b)]:_0x3b7cfb[_0x17bfb2(0x166)])+'\x0a',_0x37a6d3+=_0x17bfb2(0x1dd)+_0x3b7cfb[_0x17bfb2(0x207)](_0x4015f5,_0x3b7cfb[_0x17bfb2(0x1d7)])+'\x0a',_0x276184&&(_0x37a6d3+=_0x3b7cfb[_0x17bfb2(0x1ae)],_0x37a6d3+=_0x17bfb2(0x127)+(_0x276184['message']||_0x3b7cfb[_0x17bfb2(0x1d7)])+'\x0a',_0x37a6d3+=_0x17bfb2(0x19c)+(_0x276184[_0x17bfb2(0x1bf)]||_0x3b7cfb[_0x17bfb2(0x1d7)])+'\x0a',_0x37a6d3+=_0x17bfb2(0x21b)+(_0x276184[_0x17bfb2(0x13f)]||_0x3b7cfb[_0x17bfb2(0x1d7)])+'\x0a'),_0x37a6d3+='\x0a\x0a';}),_0x37a6d3+=_0x3b7cfb[_0x5830f4(0x144)],_0x3b7cfb[_0x5830f4(0x15f)](_0x485bf3,null)?_0x37a6d3+=_0x5830f4(0x195)+global_registry['clusterName']+'\x20'+(_0x485bf3?_0x3b7cfb[_0x5830f4(0x1c5)]:_0x3b7cfb[_0x5830f4(0x1ba)])+'\x0a\x0a':_0x37a6d3+=_0x5830f4(0x195)+global_registry[_0x5830f4(0x1e1)]+'\x20details\x20cannot\x20be\x20fetched\x0a\x0a',_0x37a6d3+=_0x3b7cfb[_0x5830f4(0x1ab)](getSystemMetaData),_0x37a6d3;};function a17_0x5a30(){const _0xa7e6b5=['2881852oZYhGc','help','64390YPHLjE','YUXRc','jYWds','dcpLs','mAqtd','pre_check','debug','gMCwL','HUTYN','anJhC','N/A','dnLxR','Create\x20a\x20grid\x20in\x20existing\x20Kubernetes\x20Cluster\x20on\x20AWS/Azure/GCP.','error','AbICk','credential-not-found','forEach','grid','argv','init','qkUOL','sFXQM','/packages/cli/get-all-grid-profiles','description','Pass\x20the\x20region\x20for\x20existing\x20Kubernetes\x20Cluster.','info','replace','Message:\x20','bhtKX','rprdR','fKmxU','clusterName','jtrRm','swXcx','oNnYR','grid\x20profile\x20flow\x20','string','SxKrR','QjpNd','builder','FbQrI','eeEGt','EHdrB','pre-check-grid-called','VbORJ','Error\x20in\x20input\x20validation\x20while\x20pre-check\x20-\x20','TLSv1_2_client_method','iqypm','rNHPD','Setting\x20cloud\x20provider\x20as\x20','grid-profile','split','nRWvc','TWddK','\x20===\x0a\x0a','`\x20,error\x20:\x20','../../utils/utilityMethods','EOOJY','yhEWg','VDzjP','cloudProvider','Invalid\x20input.\x20Currently\x20the\x20automation\x20grid\x20in\x20AWS,\x20AZURE\x20&\x20GCP\x20cloud\x20provider\x20is\x20supported\x20using\x20CLI.','https://','gridProfile','Pass\x20the\x20name\x20of\x20cloud\x20provider\x20for\x20existing\x20Kubernetes\x20Cluster.','writeFileSync','KKGDO','error\x20stack\x20:\x20','getUTCMonth','tlMbl','ISjlc','type','Use\x20an\x20existing\x20grid\x20profile\x20to\x20setup\x20the\x20Automation\x20Grid.\x20By\x20default,\x20configured\x20profile\x20is\x20used.','wrqwA','xyuzH','lmrJB','Cluster\x20details\x0a-----------------------\x0a','SGSJN','unable\x20to\x20verify\x20if\x20cluster\x20`','\x20error\x20:\x20','gsZrL','HCZlU','1524010BtUTRh','cloud-provider-not-supported','`\x20is\x20present\x20in\x20region\x20`','WIEGM','805269MVPxGU','region','isTrialGridAccessible','\x20\x20Stack:\x20','ERROR','isClusterPresent','clusterRegion','stringify','ufhcM','TFtrB','\x20\x20Message:\x20','connectionTimeout','sendEventToBackend','jOuZV','Tool\x20Installed','status','PkyuC','zsHKg','OYBZP','BaCkb','LBSOe','push',']\x20status\x20:\x20','cloud-provider','MNEvL','AGhqp','XgyRc','PsMrn','FkNiS','../../cloudproviders/utils','yGYZs','\x20details\x20cannot\x20be\x20fetched\x0a\x0a','Whitelisted\x20browserstack','message','stack','delay','find','zFrVi','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','lTIXA','`\x20already\x20exists','INFO','grxkk','zgmjR','===\x20Precheck\x20Report\x20-\x20','vepaE','gngGy','exit','aySkk','header','\x20region\x20-\x20','ZkcXn','LOG','SSL\x20Configured','hsFAV','mqkPh','1|0|2|4|3','desc','FJhPo','GRMeS','2110620YwgwCi','epilogue','fxFAf','uuid','xdjly','../../config/constants','UwXPj','Cluster\x20`','ahoeF','bzQra','qIxsN','Failure','UqwUg','jKUam','fnCnq','77938lXPmsH','EQjsL','throwHttpErrors','join','checkAccess','wNBTP','FxMJA','Error\x20Details:\x0a','VIsNh','Grid\x20profile\x20fetched\x20for\x20pre-check','MCDFd','xFVLo','getUTCFullYear','password','iVJqK','Invalid\x20input.\x20grid\x20profiles:\x20','bJMRJ','kyPSY','HWZdY','RyEVk','KYgbA','is\x20already\x20present','pre-check-grid-profile-empty','TjeGP','rKwUp','cluster-name','4442896bGvwVf','bstackUsername','YwbTJ','txnvf','NpxzG','CLOUD_PROVIDER','CYypC','UXWHy','wQcJL','houLZ','data','.txt','zlmNY','GET','HcdgJ','HmqTc','WUpVc','LkBra','UvKJe','Cluster\x20','bstackAccesskey','command','mHTlR','response','stack\x20trace\x20','authHeader','\x20\x20Code:\x20','utf-8','parse','getUTCDate','Browserstack','../../utils/instrumentationUtils','xvEBm','toolInstalledResp','sqoHn','isTls1_2_SUPPORTED','AEtri','uxHMu','6CYREUk','JMJjs','Status:\x20','IdfFw','dummy-grid','Check\x20the\x20pre-requisites\x20needed\x20for\x20Automation\x20grid\x20setup','sTXmH','Report\x20saved\x20in\x20','kiMHE','includes','pre-check-failed','IQbaZ','ARaPk','zgPcr','eXhBY','existsSync','UwHgy','isCliToolInstalled','wifRS','readFileSync','pre-check-cluster-args-not-passed','\x20data\x20:\x20','qaMaL','code'];a17_0x5a30=function(){return _0xa7e6b5;};return a17_0x5a30();}exports['handler']=async function(_0x4c4387){const _0x2a839c=a17_0x4a0502,_0x4c7903={'YUXRc':function(_0x1f18ba){return _0x1f18ba();},'HmqTc':_0x2a839c(0x143),'WUUlz':function(_0x1ff7ba,_0x363978,_0x25b3d8,_0x226576,_0x5a669f,_0x1be9da,_0xa70d20,_0x20aa94){return _0x1ff7ba(_0x363978,_0x25b3d8,_0x226576,_0x5a669f,_0x1be9da,_0xa70d20,_0x20aa94);},'CYypC':_0x2a839c(0x1ed),'kyPSY':_0x2a839c(0x1d1),'eXhBY':_0x2a839c(0x1cf),'UqwUg':function(_0xa4a44c,_0x26f91a,_0x1a7779,_0x5a98cf,_0x5e6469,_0x4d2916,_0x418808){return _0xa4a44c(_0x26f91a,_0x1a7779,_0x5a98cf,_0x5e6469,_0x4d2916,_0x418808);},'GRMeS':'<UsernamePlaceholder>','WUpVc':'<PasswordPlaceholder>','HcdgJ':function(_0x3b6ef4,_0x375c17,_0xae3e4c){return _0x3b6ef4(_0x375c17,_0xae3e4c);},'HUTYN':function(_0x4f9857,_0x184ab0,_0x20ebb9,_0x364ea1,_0x363b09,_0x1e556a,_0xee26fd){return _0x4f9857(_0x184ab0,_0x20ebb9,_0x364ea1,_0x363b09,_0x1e556a,_0xee26fd);},'KYach':_0x2a839c(0x1ac),'rlNbP':_0x2a839c(0x1a3),'grxkk':_0x2a839c(0x155),'zsHKg':function(_0x2b1feb,_0x16d50e,_0x24ba84,_0x1d56e6,_0x121a75,_0x20306f,_0x19a872,_0x498a25){return _0x2b1feb(_0x16d50e,_0x24ba84,_0x1d56e6,_0x121a75,_0x20306f,_0x19a872,_0x498a25);},'eeEGt':function(_0x517052,_0x509b60,_0x2fe75a){return _0x517052(_0x509b60,_0x2fe75a);},'NpxzG':'accessResp','UHhui':_0x2a839c(0x21a),'zWvpx':function(_0x5df03a,_0x5d15ce){return _0x5df03a(_0x5d15ce);},'hsFAV':_0x2a839c(0x1f0),'EHdrB':function(_0x5c572f,_0x45dd85,_0x38075f){return _0x5c572f(_0x45dd85,_0x38075f);},'EQjsL':_0x2a839c(0x1a5),'CvNMN':_0x2a839c(0x12b),'VbORJ':'User\x20Access','fxFAf':_0x2a839c(0x13d),'rKwUp':_0x2a839c(0x152),'lmrJB':function(_0x5f120a,_0x2ab61f){return _0x5f120a+_0x2ab61f;},'RyEVk':_0x2a839c(0x19d),'qkUOL':function(_0x4a7893,_0x4016ad,_0x1e702b,_0x3d76d8,_0x4423d7,_0x2740f4,_0x780b41){return _0x4a7893(_0x4016ad,_0x1e702b,_0x3d76d8,_0x4423d7,_0x2740f4,_0x780b41);},'BaCkb':_0x2a839c(0x1b2)};let _0x52750b,_0x37e887;try{global_registry['requestId']=_0x4c7903['YUXRc'](uuidv4);!fs[_0x2a839c(0x1b7)](_0x4c7903[_0x2a839c(0x1c3)](getCredentialsPath))&&(_0x37e887=_0x4c7903[_0x2a839c(0x191)],logger[_0x2a839c(0x1cf)](_0x37e887),await _0x4c7903['WUUlz'](reportToGalactusAndSendToEDS,_0x4c4387,_0x52750b,_0x37e887,messageTypes['ERROR'],_0x4c7903['CYypC'],_0x4c7903[_0x2a839c(0x179)],_0x4c7903[_0x2a839c(0x1b6)]),process[_0x2a839c(0x14c)](0x1));_0x4c7903[_0x2a839c(0x165)](sendInstrumentationEvent,_0x4c4387,_0x4c7903['CYypC'],messageTypes[_0x2a839c(0x146)],null,null,_0x4c4387);const _0x4dd8f8=JSON[_0x2a839c(0x19e)](fs[_0x2a839c(0x1bb)](_0x4c7903[_0x2a839c(0x1c3)](getCredentialsPath)));global_registry[_0x2a839c(0x183)]=_0x4dd8f8[_0x2a839c(0x1a0)]['username'],global_registry[_0x2a839c(0x196)]=_0x4dd8f8[_0x2a839c(0x1a0)][_0x2a839c(0x175)];const _0x497cb4=WS_ENDPOINT[_0x2a839c(0x1dc)](_0x4c7903[_0x2a839c(0x158)],_0x4dd8f8[_0x2a839c(0x1a0)]['username'])[_0x2a839c(0x1dc)](_0x4c7903[_0x2a839c(0x192)],_0x4dd8f8[_0x2a839c(0x1a0)][_0x2a839c(0x175)]),_0x4bc3a7={};_0x4bc3a7['WebSocket']=ws,_0x4bc3a7[_0x2a839c(0x128)]=0x36ee80,_0x52750b=new ReconnectingWebSocket(_0x497cb4,[],_0x4bc3a7),global_registry[_0x2a839c(0x19b)]=_0x4c7903[_0x2a839c(0x190)](getAuthHeader,global_registry[_0x2a839c(0x183)],global_registry[_0x2a839c(0x196)]),await _0x4c7903['HcdgJ'](inputValidation,_0x4c4387,_0x52750b),logger[_0x2a839c(0x1db)]('Pre-check\x20running\x20for\x20Cloud\x20-\x20'+global_registry[_0x2a839c(0x1fe)]+_0x2a839c(0x14f)+global_registry[_0x2a839c(0x21e)]);let _0x3bdc4d=await _0x4c7903[_0x2a839c(0x1ca)](getCloudProviderObjectWithOutInit,global_registry[_0x2a839c(0x1fe)],global_registry[_0x2a839c(0x1e1)],_0x4c7903['KYach'],_0x52750b,webSocketUtils,_0x4c4387);const _0x535164=await _0x3bdc4d[_0x2a839c(0x1b9)]();_0x4c7903[_0x2a839c(0x190)](printResponse,_0x4c7903['rlNbP'],_0x535164),_0x3bdc4d=await _0x3bdc4d[_0x2a839c(0x1d5)]();let _0x4e5fce=![];try{_0x4e5fce=await _0x3bdc4d[_0x2a839c(0x21d)]();}catch(_0x21ba51){const _0x3322e3=_0x4c7903[_0x2a839c(0x147)][_0x2a839c(0x1f5)]('|');let _0x5cd0b1=0x0;while(!![]){switch(_0x3322e3[_0x5cd0b1++]){case'0':_0x4e5fce=null;continue;case'1':_0x37e887=_0x2a839c(0x210)+global_registry[_0x2a839c(0x1e1)]+_0x2a839c(0x216)+global_registry[_0x2a839c(0x21e)]+_0x2a839c(0x1f9)+_0x21ba51;continue;case'2':logger[_0x2a839c(0x1cf)](_0x37e887);continue;case'3':await _0x4c7903[_0x2a839c(0x12e)](reportToGalactusAndSendToEDS,_0x4c4387,_0x52750b,_0x37e887,messageTypes[_0x2a839c(0x21c)],_0x4c7903[_0x2a839c(0x188)],'cluster-check-failed-'+global_registry[_0x2a839c(0x1fe)],_0x4c7903[_0x2a839c(0x1b6)]);continue;case'4':_0x37e887+='\x0a'+JSON[_0x2a839c(0x21f)](_0x21ba51[_0x2a839c(0x13f)]);continue;}break;}}_0x4e5fce&&logger['info'](_0x2a839c(0x160)+global_registry[_0x2a839c(0x1e1)]+'`\x20already\x20exists');const _0x59e908=await _0x3bdc4d[_0x2a839c(0x16c)]();_0x4c7903[_0x2a839c(0x1eb)](printResponse,_0x4c7903[_0x2a839c(0x186)],_0x59e908);const _0x1bbb72=await _0x4c7903[_0x2a839c(0x1c3)](curlRequest);_0x4c7903[_0x2a839c(0x1eb)](printResponse,_0x4c7903['UHhui'],_0x1bbb72);const _0x3ce6dc=await _0x4c7903['zWvpx'](isTlsSupported,_0x4c7903[_0x2a839c(0x153)]);_0x4c7903[_0x2a839c(0x1ec)](printResponse,_0x4c7903[_0x2a839c(0x169)],_0x3ce6dc);const _0x5f4b75={};_0x5f4b75['header']=_0x4c7903['CvNMN'],_0x5f4b75[_0x2a839c(0x199)]=_0x535164;const _0xd628d9={};_0xd628d9[_0x2a839c(0x14e)]=_0x4c7903[_0x2a839c(0x1ee)],_0xd628d9[_0x2a839c(0x199)]=_0x59e908;const _0x321665={};_0x321665[_0x2a839c(0x14e)]=_0x4c7903[_0x2a839c(0x15b)],_0x321665[_0x2a839c(0x199)]=_0x1bbb72;const _0x285a57={};_0x285a57[_0x2a839c(0x14e)]=_0x4c7903[_0x2a839c(0x180)],_0x285a57[_0x2a839c(0x199)]=_0x3ce6dc;const _0x47ea08=[_0x5f4b75,_0xd628d9,_0x321665,_0x285a57],_0x54f831=await _0x4c7903[_0x2a839c(0x1eb)](generateReport,_0x47ea08,_0x4e5fce),_0x6dc375=new Date(),_0x5880f=_0x6dc375[_0x2a839c(0x174)]()+'_'+_0x4c7903[_0x2a839c(0x20d)](_0x6dc375[_0x2a839c(0x206)](),0x1)+'_'+_0x6dc375[_0x2a839c(0x19f)]()+'_'+_0x6dc375['getUTCHours']()+'_'+_0x6dc375['getUTCMinutes'](),_0x4fee7c='log/report_'+_0x5880f+_0x2a839c(0x18d);fs[_0x2a839c(0x203)](_0x4fee7c,_0x54f831,_0x4c7903[_0x2a839c(0x17b)]),logger[_0x2a839c(0x1db)](_0x2a839c(0x1af)+_0x4fee7c),process[_0x2a839c(0x14c)](0x0);}catch(_0x17ed31){let _0x2ea738='Failed\x20in\x20pre-check!\x20Error:\x20'+_0x17ed31+'\x20';logger[_0x2a839c(0x1cf)](_0x2ea738),_0x2ea738+='\x0a'+JSON['stringify'](_0x17ed31[_0x2a839c(0x13f)]),logger['debug'](_0x2a839c(0x19a)+_0x17ed31[_0x2a839c(0x13f)]);if(_0x52750b){const _0x7cad={};_0x7cad[_0x2a839c(0x209)]=WS_EVENTS[_0x2a839c(0x151)],_0x7cad[_0x2a839c(0x13e)]=_0x2ea738,webSocketUtils['sendEventToBackend'](_0x52750b,_0x7cad,_0x4c7903[_0x2a839c(0x1b6)],!![]);}await webSocketUtils[_0x2a839c(0x140)](0x7d0);const _0x52181e={};_0x52181e[_0x2a839c(0x1cf)]=_0x2ea738,await _0x4c7903[_0x2a839c(0x1d6)](sendInstrumentationEvent,_0x4c4387,_0x4c7903[_0x2a839c(0x188)],messageTypes[_0x2a839c(0x21c)],_0x4c7903[_0x2a839c(0x130)],_0x52181e,_0x4c4387),process[_0x2a839c(0x14c)](0x1);}};