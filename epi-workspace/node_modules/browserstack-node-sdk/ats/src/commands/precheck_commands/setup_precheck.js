const a17_0x4fc318=a17_0x52f8;(function(_0x3bb263,_0x79fd5){const _0x112cb3=a17_0x52f8,_0x2204aa=_0x3bb263();while(!![]){try{const _0x383602=-parseInt(_0x112cb3(0x202))/0x1+-parseInt(_0x112cb3(0x16e))/0x2*(-parseInt(_0x112cb3(0x14c))/0x3)+parseInt(_0x112cb3(0x236))/0x4*(parseInt(_0x112cb3(0x21e))/0x5)+parseInt(_0x112cb3(0x162))/0x6+-parseInt(_0x112cb3(0x15c))/0x7*(parseInt(_0x112cb3(0x1d6))/0x8)+parseInt(_0x112cb3(0x188))/0x9*(-parseInt(_0x112cb3(0x15d))/0xa)+parseInt(_0x112cb3(0x1d4))/0xb;if(_0x383602===_0x79fd5)break;else _0x2204aa['push'](_0x2204aa['shift']());}catch(_0x2b5a7a){_0x2204aa['push'](_0x2204aa['shift']());}}}(a17_0x3887,0x74c77));const fs=require('fs'),ws=require('ws'),got=require('got'),{v4:uuidv4}=require('uuid'),ReconnectingWebSocket=require(a17_0x4fc318(0x224)),{getCredentialsPath,reportToGalactusAndSendToEDS,getAuthHeader,responseValidation,isUndefined,curlRequest,isTlsSupported,getSystemMetaData}=require('../../utils/utilityMethods'),{logger}=require(a17_0x4fc318(0x1f9)),{HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,global_registry,messageTypes,WS_ENDPOINT,WS_EVENTS,ALL_SUPPORTED_CLOUD_PROVIDERS,AG_API_URL,DEFAULT_CLUSTER_DETAILS}=require('../../config/constants'),{getCloudProviderObjectWithOutInit}=require(a17_0x4fc318(0x1b4)),webSocketUtils=require(a17_0x4fc318(0x20c)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils');exports[a17_0x4fc318(0x1c0)]=a17_0x4fc318(0x157),exports[a17_0x4fc318(0x1a8)]=a17_0x4fc318(0x215),exports[a17_0x4fc318(0x1a2)]=function(_0x59b4aa){const _0x33e765=a17_0x4fc318,_0x3e7b9c={};_0x3e7b9c[_0x33e765(0x1d1)]='Create\x20a\x20grid\x20in\x20existing\x20Kubernetes\x20Cluster\x20on\x20AWS/Azure/GCP.',_0x3e7b9c[_0x33e765(0x1e7)]=_0x33e765(0x207),_0x3e7b9c[_0x33e765(0x1ef)]='Pass\x20the\x20name\x20of\x20cloud\x20provider\x20for\x20existing\x20Kubernetes\x20Cluster.',_0x3e7b9c[_0x33e765(0x15f)]=_0x33e765(0x156),_0x3e7b9c[_0x33e765(0x16f)]=_0x33e765(0x158),_0x3e7b9c[_0x33e765(0x218)]=_0x33e765(0x193);const _0x56a051=_0x3e7b9c,_0x6f1e9c={};_0x6f1e9c[_0x33e765(0x1cd)]=_0x56a051[_0x33e765(0x1d1)],_0x6f1e9c[_0x33e765(0x1a4)]=_0x56a051[_0x33e765(0x1e7)];const _0x3cad93={};_0x3cad93[_0x33e765(0x1cd)]=_0x56a051[_0x33e765(0x1ef)],_0x3cad93[_0x33e765(0x1a4)]=_0x56a051['yZjth'];const _0x2d6c7f={};_0x2d6c7f[_0x33e765(0x1cd)]=_0x56a051[_0x33e765(0x15f)],_0x2d6c7f[_0x33e765(0x1a4)]=_0x56a051[_0x33e765(0x1e7)];const _0x17a4fb={};_0x17a4fb[_0x33e765(0x1cd)]=_0x56a051[_0x33e765(0x16f)],_0x17a4fb[_0x33e765(0x1a4)]=_0x56a051[_0x33e765(0x1e7)];const _0x682057={};return _0x682057[_0x33e765(0x16d)]=_0x6f1e9c,_0x682057[_0x33e765(0x1aa)]=_0x3cad93,_0x682057[_0x33e765(0x1ea)]=_0x2d6c7f,_0x682057[_0x33e765(0x1bd)]=_0x17a4fb,_0x59b4aa['usage'](HELP_HEADER_MESSAGE[_0x33e765(0x1df)])[_0x33e765(0x171)](HELP_FOOTER_MESSAGE)['options'](_0x682057)[_0x33e765(0x193)](_0x56a051[_0x33e765(0x218)])[_0x33e765(0x1a3)];};function a17_0x52f8(_0x26963f,_0x23351f){const _0x3887b1=a17_0x3887();return a17_0x52f8=function(_0x52f84f,_0x55aae2){_0x52f84f=_0x52f84f-0x13d;let _0x47b176=_0x3887b1[_0x52f84f];return _0x47b176;},a17_0x52f8(_0x26963f,_0x23351f);}async function inputValidation(_0x50e845,_0x31f755){const _0x36a896=a17_0x4fc318,_0x276964={'myXNR':_0x36a896(0x1ea),'QheFS':_0x36a896(0x1f4),'PerOA':'cluster-name','KrcTT':'is\x20already\x20present','BOwdV':_0x36a896(0x18c),'VMTiL':_0x36a896(0x1aa),'BaiEE':function(_0x3efecd,_0x3ed9fa){return _0x3efecd+_0x3ed9fa;},'bIKnA':_0x36a896(0x1b8),'yNHbK':_0x36a896(0x1f0),'eRVnv':function(_0x4ff491,_0x33cd6a){return _0x4ff491||_0x33cd6a;},'NbUgb':'N/A','zuMcQ':'Error\x20Details:\x0a','tsTbK':_0x36a896(0x185),'myGul':_0x36a896(0x1bb),'gEEsD':_0x36a896(0x207),'xiJMC':_0x36a896(0x1f2),'SKnIg':_0x36a896(0x156),'JHZOo':_0x36a896(0x158),'qhETv':'help','NQKcR':function(_0x5ca35a,_0x164fdb){return _0x5ca35a!==_0x164fdb;},'PtEnU':'GJxvc','yhvUY':_0x36a896(0x1f1),'TUAIp':function(_0x1976a5,_0x466eaf){return _0x1976a5===_0x466eaf;},'KORbC':_0x36a896(0x1ce),'TuYKc':function(_0x2ccfaa,_0x147ac6){return _0x2ccfaa!==_0x147ac6;},'aGTog':_0x36a896(0x210),'uaGaW':'bXspO','hNrrs':_0x36a896(0x189),'prNwi':_0x36a896(0x1de),'jfGgK':'RpPAE','yviMi':function(_0x1aabf4,_0x39c1d5){return _0x1aabf4>_0x39c1d5;},'jEqTF':_0x36a896(0x1b7),'OoNTD':function(_0xa2b332,_0x31e70b,_0x549e07,_0x3a5716,_0xa60829,_0x3cc44f,_0x54b11b,_0x106481){return _0xa2b332(_0x31e70b,_0x549e07,_0x3a5716,_0xa60829,_0x3cc44f,_0x54b11b,_0x106481);},'juGBm':_0x36a896(0x1f8),'tVQFo':_0x36a896(0x19a),'Hbsby':function(_0x4b134b,_0x1ed780){return _0x4b134b!==_0x1ed780;},'ELRzm':_0x36a896(0x234),'RQDUp':'Invalid\x20input.\x20Currently\x20the\x20automation\x20grid\x20in\x20AWS,\x20AZURE\x20&\x20GCP\x20cloud\x20provider\x20is\x20supported\x20using\x20CLI.','FYiXu':_0x36a896(0x17f),'fdhZI':function(_0x129328,_0x41a711){return _0x129328!==_0x41a711;},'TaZOl':_0x36a896(0x1b9),'ytNst':function(_0xa72cfb,_0x18ca8e){return _0xa72cfb===_0x18ca8e;},'BjHjo':_0x36a896(0x1eb),'aApKE':_0x36a896(0x150),'phAsU':function(_0x38621f,_0x1f1501,_0x220bad){return _0x38621f(_0x1f1501,_0x220bad);},'SGDaF':function(_0x292047,_0x4856d8,_0x3d0d12,_0x3644ce,_0x3e5a62,_0x28f765){return _0x292047(_0x4856d8,_0x3d0d12,_0x3644ce,_0x3e5a62,_0x28f765);},'Wxqfa':_0x36a896(0x22d),'pjnwr':_0x36a896(0x1bd),'OfbqD':function(_0x52acb8,_0x312d93){return _0x52acb8!==_0x312d93;},'RvNww':_0x36a896(0x228),'PRrQH':_0x36a896(0x1c5),'hNFCZ':function(_0x57bd98,_0x5d167e){return _0x57bd98(_0x5d167e);},'bbVkq':function(_0x3b309c,_0x4b1259){return _0x3b309c===_0x4b1259;},'NpsQT':_0x36a896(0x233),'GFWEd':_0x36a896(0x1be),'lHtLV':function(_0x3ec8a0,_0x4a6256){return _0x3ec8a0!==_0x4a6256;},'APRWa':_0x36a896(0x23a),'jRdWq':'CLeai','kSNsn':_0x36a896(0x172),'tFwgB':_0x36a896(0x13d),'tGgEx':'XkFjG','lMtdW':_0x36a896(0x23b),'wkfED':'MpZVW'};let _0x4067ef;try{if(_0x276964[_0x36a896(0x1cb)](_0x276964[_0x36a896(0x1ee)],_0x276964['yhvUY'])){if(_0x50e845[_0x36a896(0x147)]||_0x50e845['cloudProvider']||_0x50e845[_0x36a896(0x1ea)]){if(_0x276964['TUAIp'](_0x276964['KORbC'],_0x276964[_0x36a896(0x13e)])){const _0x58140a=[];!_0x50e845[_0x36a896(0x147)]&&(_0x276964[_0x36a896(0x212)](_0x276964['aGTog'],_0x276964[_0x36a896(0x173)])?_0x58140a[_0x36a896(0x14d)](_0x276964[_0x36a896(0x1a1)]):_0x487fed[_0x36a896(0x14d)](_0x276964[_0x36a896(0x1d8)]));;if(!_0x50e845[_0x36a896(0x18a)]){if(_0x276964[_0x36a896(0x206)](_0x276964['hNrrs'],_0x276964[_0x36a896(0x151)])){const _0x39cb78={};_0x39cb78[_0x36a896(0x1a4)]=_0x2a774c[_0x36a896(0x169)],_0x39cb78['message']=_0x2501ac,_0x5cef23[_0x36a896(0x20b)](_0x545545,_0x39cb78,_0x276964[_0x36a896(0x153)],!![]);}else _0x58140a[_0x36a896(0x14d)](_0x276964['VMTiL']);};!_0x50e845[_0x36a896(0x1ea)]&&(_0x276964[_0x36a896(0x1cb)](_0x276964[_0x36a896(0x223)],_0x276964[_0x36a896(0x223)])?_0x3fbebb[_0x36a896(0x14d)](_0x276964['PerOA']):_0x58140a[_0x36a896(0x14d)](_0x276964[_0x36a896(0x1d8)]));;_0x276964['yviMi'](_0x58140a[_0x36a896(0x15e)],0x0)&&(_0x276964[_0x36a896(0x212)](_0x276964[_0x36a896(0x191)],_0x276964[_0x36a896(0x191)])?_0x2bab18+='Cluster\x20'+_0x1d6ad5[_0x36a896(0x147)]+'\x20'+(_0x447701?_0x276964[_0x36a896(0x159)]:_0x276964[_0x36a896(0x20d)])+'\x0a\x0a':(_0x4067ef=_0x36a896(0x152)+_0x58140a[_0x36a896(0x14e)](',\x20')+_0x36a896(0x19b),await _0x276964['OoNTD'](reportToGalactusAndSendToEDS,_0x50e845,_0x31f755,_0x4067ef,messageTypes['ERROR'],_0x276964[_0x36a896(0x220)],_0x276964[_0x36a896(0x18b)],_0x276964['QheFS']),logger[_0x36a896(0x1f4)](_0x4067ef),process['exit'](0x1))),!ALL_SUPPORTED_CLOUD_PROVIDERS[_0x36a896(0x230)](_0x50e845[_0x36a896(0x18a)][_0x36a896(0x235)]())&&(_0x276964[_0x36a896(0x163)](_0x276964[_0x36a896(0x221)],_0x276964[_0x36a896(0x221)])?_0x44e0cc[_0x36a896(0x14d)](_0x276964['VMTiL']):(_0x4067ef=_0x276964[_0x36a896(0x239)],await _0x276964['OoNTD'](reportToGalactusAndSendToEDS,_0x50e845,_0x31f755,_0x4067ef,messageTypes[_0x36a896(0x209)],_0x276964[_0x36a896(0x220)],_0x276964[_0x36a896(0x21d)],_0x276964[_0x36a896(0x153)]),logger[_0x36a896(0x1f4)](_0x4067ef),!_0x50e845[_0x36a896(0x18a)]&&(_0x276964['fdhZI'](_0x276964[_0x36a896(0x178)],_0x276964[_0x36a896(0x178)])?_0x1883f1[_0x36a896(0x167)](_0x36a896(0x148)+_0x40fdc4[_0x36a896(0x147)]+_0x36a896(0x164)):(logger[_0x36a896(0x167)]('Setting\x20cloud\x20provider\x20as\x20'+DEFAULT_CLUSTER_DETAILS[_0x36a896(0x22a)]+'\x20'),_0x50e845[_0x36a896(0x18a)]=DEFAULT_CLUSTER_DETAILS[_0x36a896(0x22a)])))),global_registry[_0x36a896(0x147)]=_0x50e845[_0x36a896(0x147)],global_registry[_0x36a896(0x18a)]=_0x50e845['cloudProvider'],global_registry[_0x36a896(0x15a)]=_0x50e845[_0x36a896(0x1ea)];}else _0x8bf3ba+='Cluster\x20'+_0x3d6142['clusterName']+'\x20details\x20cannot\x20be\x20fetched\x0a\x0a';}else{if(_0x50e845[_0x36a896(0x23d)]){if(_0x276964['ytNst'](_0x276964['BjHjo'],_0x276964['BjHjo'])){global_registry[_0x36a896(0x23d)]=_0x50e845[_0x36a896(0x23d)],logger[_0x36a896(0x14f)]('grid\x20profile\x20flow\x20'+_0x50e845[_0x36a896(0x23d)]);const _0x539dcb='https://'+AG_API_URL+'/packages/cli/get-all-grid-profiles',_0x1398ae={};_0x1398ae[_0x36a896(0x1e3)]=_0x276964[_0x36a896(0x21c)],_0x1398ae[_0x36a896(0x1e8)]=global_registry[_0x36a896(0x18d)],_0x1398ae[_0x36a896(0x23e)]=![];const _0x4be680=_0x1398ae,_0x232784=await _0x276964[_0x36a896(0x165)](got,_0x539dcb,_0x4be680),_0x58f0ef=await _0x276964['SGDaF'](responseValidation,_0x232784,_0x276964[_0x36a896(0x1ed)],_0x276964[_0x36a896(0x200)],_0x50e845,_0x31f755);let _0x3b8b8b={};if(_0x276964[_0x36a896(0x206)](_0x58f0ef,0xc8)){if(_0x276964[_0x36a896(0x217)](_0x276964[_0x36a896(0x1c3)],_0x276964[_0x36a896(0x1e2)])){const _0x44c31b=JSON[_0x36a896(0x1e6)](_0x232784['body']),_0x161cac=_0x44c31b[_0x36a896(0x15b)](_0x3f82c5=>_0x3f82c5[_0x36a896(0x142)]===_0x50e845[_0x36a896(0x23d)])||null;if(_0x276964[_0x36a896(0x203)](isUndefined,_0x161cac))_0x276964[_0x36a896(0x198)](_0x276964['NpsQT'],_0x276964[_0x36a896(0x20a)])?(_0x4067ef=_0x36a896(0x160)+_0x50e845[_0x36a896(0x23d)]+_0x36a896(0x1a6),await _0x276964[_0x36a896(0x219)](reportToGalactusAndSendToEDS,_0x50e845,_0x31f755,_0x4067ef,messageTypes[_0x36a896(0x209)],_0x276964[_0x36a896(0x220)],_0x276964[_0x36a896(0x1d0)],_0x276964[_0x36a896(0x153)]),logger[_0x36a896(0x1f4)](_0x4067ef),process['exit'](0x1)):_0xb2119b['error'](_0x36a896(0x179)+_0x19ee7c[_0x36a896(0x1f4)][_0x36a896(0x1e0)]);else{if(_0x276964[_0x36a896(0x20e)](_0x276964[_0x36a896(0x17a)],_0x276964[_0x36a896(0x1b5)]))_0x3b8b8b=_0x161cac;else{const {header:_0x1e6ce9,response:_0x1e7110}=_0x39da8a,{status:_0x589d9b,data:_0x975bbc,error:_0x366ea8}=_0x1e7110;_0x520b97+=_0x1e6ce9+'\x20#'+_0x276964[_0x36a896(0x166)](_0x2ec4c3,0x1)+'\x0a',_0x2d101d+='Status:\x20'+(_0x589d9b?_0x276964[_0x36a896(0x192)]:_0x276964[_0x36a896(0x154)])+'\x0a',_0x40467b+=_0x36a896(0x199)+_0x276964['eRVnv'](_0x975bbc,_0x276964['NbUgb'])+'\x0a',_0x366ea8&&(_0xe9b73+=_0x276964[_0x36a896(0x1b6)],_0x4322c7+=_0x36a896(0x1fa)+(_0x366ea8[_0x36a896(0x187)]||_0x276964[_0x36a896(0x1fe)])+'\x0a',_0x4bde2e+=_0x36a896(0x1ac)+(_0x366ea8[_0x36a896(0x18f)]||_0x276964[_0x36a896(0x1fe)])+'\x0a',_0x10cf8d+=_0x36a896(0x1c2)+(_0x366ea8[_0x36a896(0x1e0)]||_0x276964[_0x36a896(0x1fe)])+'\x0a'),_0x27d542+='\x0a\x0a';}}}else _0x3a6cbf[_0x36a896(0x140)](0x1);}else _0x276964[_0x36a896(0x198)](_0x276964[_0x36a896(0x168)],_0x276964[_0x36a896(0x168)])?process[_0x36a896(0x140)](0x1):(_0x261cee[_0x36a896(0x1f4)](_0x276964['tsTbK']),_0x3494ed[_0x36a896(0x140)](0x1));const _0x366965={};_0x366965['type']=WS_EVENTS[_0x36a896(0x169)],_0x366965['message']=_0x276964[_0x36a896(0x186)],webSocketUtils[_0x36a896(0x20b)](_0x31f755,_0x366965),global_registry['cloudProvider']=_0x3b8b8b['cloudProvider'],global_registry['clusterRegion']=_0x3b8b8b[_0x36a896(0x1ea)],global_registry[_0x36a896(0x147)]=_0x3b8b8b[_0x36a896(0x147)];}else{const _0x20437a={};_0x20437a[_0x36a896(0x1cd)]=_0x276964[_0x36a896(0x1c9)],_0x20437a[_0x36a896(0x1a4)]=_0x276964[_0x36a896(0x180)];const _0x5e0f20={};_0x5e0f20[_0x36a896(0x1cd)]=_0x276964[_0x36a896(0x1cc)],_0x5e0f20[_0x36a896(0x1a4)]=_0x276964[_0x36a896(0x180)];const _0x5ee055={};_0x5ee055[_0x36a896(0x1cd)]=_0x276964[_0x36a896(0x21f)],_0x5ee055[_0x36a896(0x1a4)]=_0x276964[_0x36a896(0x180)];const _0x3c2eb1={};_0x3c2eb1[_0x36a896(0x1cd)]=_0x276964[_0x36a896(0x144)],_0x3c2eb1[_0x36a896(0x1a4)]=_0x276964['gEEsD'];const _0x1b0535={};return _0x1b0535[_0x36a896(0x16d)]=_0x20437a,_0x1b0535[_0x36a896(0x1aa)]=_0x5e0f20,_0x1b0535[_0x36a896(0x1ea)]=_0x5ee055,_0x1b0535[_0x36a896(0x1bd)]=_0x3c2eb1,_0x1cb03d['usage'](_0x258871['pre_check'])[_0x36a896(0x171)](_0x39b840)['options'](_0x1b0535)[_0x36a896(0x193)](_0x276964[_0x36a896(0x182)])[_0x36a896(0x1a3)];}}else _0x276964[_0x36a896(0x217)](_0x276964[_0x36a896(0x194)],_0x276964[_0x36a896(0x194)])?(_0xd31e5b[_0x36a896(0x167)]('['+_0x102e87+_0x36a896(0x17c)+_0x3c5478[_0x36a896(0x1dc)]+'\x20data\x20:\x20'+_0x13abeb['data']+_0x36a896(0x19e)+_0x555f61[_0x36a896(0x1f4)]),_0x21bb38['error']&&_0xe1a6f5[_0x36a896(0x1f4)](_0x36a896(0x179)+_0x4a8847[_0x36a896(0x1f4)][_0x36a896(0x1e0)])):(logger[_0x36a896(0x1f4)](_0x276964[_0x36a896(0x1a7)]),process[_0x36a896(0x140)](0x1));}}else _0x2676fc+=_0x276964[_0x36a896(0x1b6)],_0x399dbd+='\x20\x20Message:\x20'+(_0x359652['message']||_0x276964[_0x36a896(0x1fe)])+'\x0a',_0x4bbd87+=_0x36a896(0x1ac)+(_0x2ecfb6[_0x36a896(0x18f)]||_0x276964['NbUgb'])+'\x0a',_0x83fedc+='\x20\x20Stack:\x20'+(_0x172da8[_0x36a896(0x1e0)]||_0x276964[_0x36a896(0x1fe)])+'\x0a';}catch(_0x41f753){_0x276964[_0x36a896(0x17e)](_0x276964[_0x36a896(0x195)],_0x276964[_0x36a896(0x1ab)])?(_0x23e7b0['info']('Setting\x20cloud\x20provider\x20as\x20'+_0x5568d9[_0x36a896(0x22a)]+'\x20'),_0x20a375[_0x36a896(0x18a)]=_0x3022eb[_0x36a896(0x22a)]):(_0x4067ef=_0x36a896(0x204)+_0x41f753+':\x20'+_0x41f753[_0x36a896(0x1e0)],logger['error'](_0x4067ef),await _0x276964[_0x36a896(0x219)](reportToGalactusAndSendToEDS,_0x50e845,_0x31f755,_0x4067ef,messageTypes[_0x36a896(0x209)],_0x276964[_0x36a896(0x220)],_0x276964[_0x36a896(0x21d)],_0x276964[_0x36a896(0x153)]),process['exit'](0x1));}}function a17_0x3887(){const _0x369d43=['message','9XAtuuP','ssdor','cloudProvider','tVQFo','will\x20be\x20created','authHeader','forEach','code','MfaGM','jEqTF','bIKnA','help','tGgEx','lMtdW','zaOtB','aDtzY','bbVkq','Message:\x20','pre-check-cluster-args-not-passed','.\x20Please\x20provide\x20all\x20required\x20arguments.','PsfSy','isClusterPresent','\x20error\x20:\x20','epIbH','WVDkZ','PerOA','builder','argv','type','zQZyg','.\x20please\x20verify\x20the\x20grid\x20profile\x20name\x20and\x20try\x20again','tsTbK','desc','response','cloud-provider','wkfED','\x20\x20Code:\x20','readFileSync','EKxfR','accessResp','isTrialGridAccessible','Pre-check\x20running\x20for\x20Cloud\x20-\x20','requestId','ZtAmo','../../cloudproviders/utils','jRdWq','zuMcQ','SFmQs','Success','jSoFC','Report\x20saved\x20in\x20','Create\x20a\x20grid\x20in\x20existing\x20Kubernetes\x20Cluster\x20on\x20AWS/Azure/GCP.','WTxZD','grid-profile','pre-check-grid-profile-empty','isCliToolInstalled','command','Browserstack','\x20\x20Stack:\x20','RvNww','N/A','nYNRP','SSL\x20Configured','getUTCMonth','<UsernamePlaceholder>','myGul','\x20details\x20cannot\x20be\x20fetched\x0a\x0a','NQKcR','xiJMC','description','LOsSK','mPMnc','GFWEd','BsVTG','stringify','username','2224992OeEYRb','Ujzwu','2582792mqbzFa','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','myXNR','VRELE','NlPeh','\x20===\x0a\x0a','status','password','oJTBw','pre_check','stack','idpTD','PRrQH','method','handler','dDdYF','parse','yZjth','headers','BRBLG','region','pizuD','\x20region\x20-\x20','Wxqfa','PtEnU','MqCnT','Failure','HIJXS','Pass\x20the\x20name\x20of\x20cloud\x20provider\x20for\x20existing\x20Kubernetes\x20Cluster.','vovtb','error','bstackAccesskey','delay','IIlQk','pre-check-grid-called','../../config/logger','\x20\x20Message:\x20','qIgIf','ldOmI','Zhpzn','NbUgb','Whitelisted\x20browserstack','pjnwr','getUTCMinutes','883537Nquqgn','hNFCZ','Error\x20in\x20input\x20validation\x20while\x20pre-check\x20-\x20','`\x20is\x20present\x20in\x20region\x20`','TUAIp','string','bstackUsername','ERROR','NpsQT','sendEventToBackend','../../utils/webSocketUtils','BOwdV','lHtLV','isTls1_2_SUPPORTED','WwUqP','jdeVV','TuYKc','checkAccess','QzBoJ','Check\x20the\x20pre-requisites\x20needed\x20for\x20Automation\x20grid\x20setup','data','OfbqD','TrJZY','OoNTD','QHiJJ','replace','aApKE','FYiXu','8335wBjLLY','SKnIg','juGBm','ELRzm','dummy-grid','jfGgK','reconnecting-websocket','utf-8','PtbUI','`\x20,error\x20:\x20','aZbHg','LFeeh','CLOUD_PROVIDER','===\x20Precheck\x20Report\x20-\x20','tFzXv','pre-check','\x20data\x20:\x20','getUTCFullYear','includes','INFO','GPMbf','YporY','IgHmo','toLowerCase','480FPRvGO','<PasswordPlaceholder>','pEOEi','RQDUp','DVKhw','OmDNJ','Error\x20Details:\x0a','gridProfile','throwHttpErrors','Grid\x20profile\x20fetched\x20for\x20pre-check','KORbC','yjbDU','exit','WebSocket','name','.txt','JHZOo','header','3|2|4|1|0','clusterName','Cluster\x20`','YvGXi','User\x20Access','GYAre','3YNJVnp','push','join','debug','GET','prNwi','Missing\x20required\x20arguments:\x20','QheFS','yNHbK','Cluster\x20','Pass\x20the\x20region\x20for\x20existing\x20Kubernetes\x20Cluster.','grid','Use\x20an\x20existing\x20grid\x20profile\x20to\x20setup\x20the\x20Automation\x20Grid.\x20By\x20default,\x20configured\x20profile\x20is\x20used.','KrcTT','clusterRegion','find','7GlFCYQ','2174030cORmXo','length','vwuZu','Invalid\x20input.\x20grid\x20profiles:\x20','TLSv1_2_client_method','3783906lJpiyh','Hbsby','`\x20already\x20exists','phAsU','BaiEE','info','kSNsn','LOG','ENMZG','Tool\x20Installed','connectionTimeout','cluster-name','1738306JuJqKP','VVOTQ','stack\x20trace\x20','epilogue','iQGMN','uaGaW','aPioD','Ijpjr','cdTSF','Cluster\x20details\x0a-----------------------\x0a','TaZOl','error\x20stack\x20:\x20','APRWa','iVOqm',']\x20status\x20:\x20','YDEEp','ytNst','cloud-provider-not-supported','gEEsD','split','qhETv','writeFileSync','BrnDc','Missing\x20required\x20arguments.\x20Please\x20provide\x20either\x20grid\x20profile\x20or\x20cluster\x20details\x20(cluser-name\x20,\x20cloud\x20provider\x20&\x20region','tFwgB'];a17_0x3887=function(){return _0x369d43;};return a17_0x3887();}function printResponse(_0xe2c939,_0xdcd35a){const _0x2aad10=a17_0x4fc318,_0x6e0af8={};_0x6e0af8[_0x2aad10(0x1d9)]=function(_0xc83bde,_0x16aaab){return _0xc83bde!==_0x16aaab;},_0x6e0af8[_0x2aad10(0x184)]=_0x2aad10(0x211),_0x6e0af8[_0x2aad10(0x214)]=_0x2aad10(0x1bc);const _0x186792=_0x6e0af8;logger['info']('['+_0xe2c939+_0x2aad10(0x17c)+_0xdcd35a[_0x2aad10(0x1dc)]+_0x2aad10(0x22e)+_0xdcd35a[_0x2aad10(0x216)]+_0x2aad10(0x19e)+_0xdcd35a[_0x2aad10(0x1f4)]),_0xdcd35a[_0x2aad10(0x1f4)]&&(_0x186792['VRELE'](_0x186792[_0x2aad10(0x184)],_0x186792['QzBoJ'])?logger[_0x2aad10(0x1f4)]('error\x20stack\x20:\x20'+_0xdcd35a[_0x2aad10(0x1f4)][_0x2aad10(0x1e0)]):_0x48c57b=_0x4e85d7);}async function generateReport(_0x5a8240,_0x2a9b0c){const _0x5140a4=a17_0x4fc318,_0x3ec35e={'CRDBs':function(_0x5f5c85,_0x11d6b2){return _0x5f5c85+_0x11d6b2;},'vovtb':_0x5140a4(0x1b8),'PtbUI':_0x5140a4(0x1f0),'cdTSF':function(_0x20dc7e,_0x3a5825){return _0x20dc7e||_0x3a5825;},'WVDkZ':_0x5140a4(0x1c4),'vZCEI':_0x5140a4(0x23c),'lPXEZ':_0x5140a4(0x177),'RdXmJ':function(_0x2f35a6,_0xda8e69){return _0x2f35a6!=_0xda8e69;},'qIgIf':'is\x20already\x20present','MruJG':_0x5140a4(0x18c),'QYAHY':function(_0x586721){return _0x586721();}};let _0xd4ac4c=_0x5140a4(0x22b)+global_registry[_0x5140a4(0x18a)]+_0x5140a4(0x1db);return _0x5a8240[_0x5140a4(0x18e)]((_0x1b6a1c,_0x4ccd13)=>{const _0x11fe6d=_0x5140a4,{header:_0x46d76e,response:_0x3f0249}=_0x1b6a1c,{status:_0x35d23d,data:_0x5ae603,error:_0x41cb2c}=_0x3f0249;_0xd4ac4c+=_0x46d76e+'\x20#'+_0x3ec35e['CRDBs'](_0x4ccd13,0x1)+'\x0a',_0xd4ac4c+='Status:\x20'+(_0x35d23d?_0x3ec35e[_0x11fe6d(0x1f3)]:_0x3ec35e[_0x11fe6d(0x226)])+'\x0a',_0xd4ac4c+=_0x11fe6d(0x199)+_0x3ec35e[_0x11fe6d(0x176)](_0x5ae603,_0x3ec35e['WVDkZ'])+'\x0a',_0x41cb2c&&(_0xd4ac4c+=_0x3ec35e['vZCEI'],_0xd4ac4c+='\x20\x20Message:\x20'+(_0x41cb2c[_0x11fe6d(0x187)]||_0x3ec35e[_0x11fe6d(0x1a0)])+'\x0a',_0xd4ac4c+='\x20\x20Code:\x20'+(_0x41cb2c[_0x11fe6d(0x18f)]||_0x3ec35e[_0x11fe6d(0x1a0)])+'\x0a',_0xd4ac4c+='\x20\x20Stack:\x20'+(_0x41cb2c[_0x11fe6d(0x1e0)]||_0x3ec35e[_0x11fe6d(0x1a0)])+'\x0a'),_0xd4ac4c+='\x0a\x0a';}),_0xd4ac4c+=_0x3ec35e['lPXEZ'],_0x3ec35e['RdXmJ'](_0x2a9b0c,null)?_0xd4ac4c+=_0x5140a4(0x155)+global_registry[_0x5140a4(0x147)]+'\x20'+(_0x2a9b0c?_0x3ec35e[_0x5140a4(0x1fb)]:_0x3ec35e['MruJG'])+'\x0a\x0a':_0xd4ac4c+=_0x5140a4(0x155)+global_registry[_0x5140a4(0x147)]+_0x5140a4(0x1ca),_0xd4ac4c+=_0x3ec35e['QYAHY'](getSystemMetaData),_0xd4ac4c;};exports[a17_0x4fc318(0x1e4)]=async function(_0x337da0){const _0x5505bc=a17_0x4fc318,_0x44c842={'BRBLG':function(_0x65e62c){return _0x65e62c();},'dDdYF':function(_0x3306d9){return _0x3306d9();},'aPioD':_0x5505bc(0x1d7),'PsfSy':function(_0x37e971,_0xe33903,_0x34ebd6,_0xd15151,_0x536b63,_0x5045f2,_0x1447d9,_0x1bf5d9){return _0x37e971(_0xe33903,_0x34ebd6,_0xd15151,_0x536b63,_0x5045f2,_0x1447d9,_0x1bf5d9);},'iVOqm':'pre-check-grid-called','yjbDU':'credential-not-found','idpTD':_0x5505bc(0x1f4),'YDEEp':function(_0x633bd1,_0x33bab1,_0x5070a3,_0x2902b4,_0x379ace,_0x36310f,_0x43c28e){return _0x633bd1(_0x33bab1,_0x5070a3,_0x2902b4,_0x379ace,_0x36310f,_0x43c28e);},'aDtzY':_0x5505bc(0x1c8),'epIbH':_0x5505bc(0x237),'tFzXv':function(_0x1f4ae1,_0x20e00a,_0x5dae77){return _0x1f4ae1(_0x20e00a,_0x5dae77);},'ldOmI':_0x5505bc(0x222),'GYAre':function(_0x17352d,_0x134791,_0x354723){return _0x17352d(_0x134791,_0x354723);},'EKxfR':'toolInstalledResp','GPMbf':_0x5505bc(0x146),'zQZyg':function(_0x572928,_0x564c4c,_0xaa576b,_0xa126a4,_0x256359,_0x358321,_0x22869b,_0x5c8340){return _0x572928(_0x564c4c,_0xaa576b,_0xa126a4,_0x256359,_0x358321,_0x22869b,_0x5c8340);},'pEOEi':function(_0x5ac4ab,_0x51efe6,_0x1093a9){return _0x5ac4ab(_0x51efe6,_0x1093a9);},'Ijpjr':_0x5505bc(0x1af),'QHiJJ':function(_0x5cb59a){return _0x5cb59a();},'MfaGM':function(_0x3d299a,_0x5cb40a,_0x4c084f){return _0x3d299a(_0x5cb40a,_0x4c084f);},'ENMZG':_0x5505bc(0x1b0),'IIlQk':function(_0x449e41,_0x42972a){return _0x449e41(_0x42972a);},'mPMnc':_0x5505bc(0x161),'Zhpzn':function(_0x3de591,_0x2953fe,_0x2ea5b7){return _0x3de591(_0x2953fe,_0x2ea5b7);},'YFiDi':_0x5505bc(0x20f),'YvGXi':_0x5505bc(0x16b),'NlPeh':_0x5505bc(0x14a),'zaOtB':_0x5505bc(0x1ff),'Ujzwu':_0x5505bc(0x1c6),'hjjcT':function(_0x121e75,_0x5daf8f,_0x53dd4b){return _0x121e75(_0x5daf8f,_0x53dd4b);},'XGSKw':function(_0xa121b4,_0x3cddaa){return _0xa121b4+_0x3cddaa;},'AtvEq':_0x5505bc(0x225),'ZtAmo':function(_0x4251ab,_0x5b9123,_0x26a00d,_0x434834,_0x3f672c,_0x346552,_0x17027f){return _0x4251ab(_0x5b9123,_0x26a00d,_0x434834,_0x3f672c,_0x346552,_0x17027f);},'LFeeh':'pre-check-failed'};let _0x38bb99,_0x151a74;try{global_registry[_0x5505bc(0x1b2)]=_0x44c842[_0x5505bc(0x1e9)](uuidv4);!fs['existsSync'](_0x44c842[_0x5505bc(0x1e5)](getCredentialsPath))&&(_0x151a74=_0x44c842[_0x5505bc(0x174)],logger['error'](_0x151a74),await _0x44c842[_0x5505bc(0x19c)](reportToGalactusAndSendToEDS,_0x337da0,_0x38bb99,_0x151a74,messageTypes['ERROR'],_0x44c842['iVOqm'],_0x44c842[_0x5505bc(0x13f)],_0x44c842[_0x5505bc(0x1e1)]),process[_0x5505bc(0x140)](0x1));_0x44c842[_0x5505bc(0x17d)](sendInstrumentationEvent,_0x337da0,_0x44c842[_0x5505bc(0x17b)],messageTypes[_0x5505bc(0x231)],null,null,_0x337da0);const _0x29797b=JSON[_0x5505bc(0x1e6)](fs[_0x5505bc(0x1ad)](_0x44c842[_0x5505bc(0x1e9)](getCredentialsPath)));global_registry['bstackUsername']=_0x29797b[_0x5505bc(0x1c1)][_0x5505bc(0x1d3)],global_registry['bstackAccesskey']=_0x29797b['Browserstack'][_0x5505bc(0x1dd)];const _0x1e9407=WS_ENDPOINT[_0x5505bc(0x21b)](_0x44c842[_0x5505bc(0x197)],_0x29797b[_0x5505bc(0x1c1)][_0x5505bc(0x1d3)])[_0x5505bc(0x21b)](_0x44c842[_0x5505bc(0x19f)],_0x29797b[_0x5505bc(0x1c1)]['password']),_0x2b20b7={};_0x2b20b7[_0x5505bc(0x141)]=ws,_0x2b20b7[_0x5505bc(0x16c)]=0x36ee80,_0x38bb99=new ReconnectingWebSocket(_0x1e9407,[],_0x2b20b7),global_registry[_0x5505bc(0x18d)]=_0x44c842[_0x5505bc(0x22c)](getAuthHeader,global_registry[_0x5505bc(0x208)],global_registry[_0x5505bc(0x1f5)]),await _0x44c842[_0x5505bc(0x22c)](inputValidation,_0x337da0,_0x38bb99),logger[_0x5505bc(0x167)](_0x5505bc(0x1b1)+global_registry[_0x5505bc(0x18a)]+_0x5505bc(0x1ec)+global_registry[_0x5505bc(0x15a)]);let _0x520275=await _0x44c842[_0x5505bc(0x17d)](getCloudProviderObjectWithOutInit,global_registry[_0x5505bc(0x18a)],global_registry[_0x5505bc(0x147)],_0x44c842[_0x5505bc(0x1fc)],_0x38bb99,webSocketUtils,_0x337da0);const _0x23a8e5=await _0x520275[_0x5505bc(0x1bf)]();_0x44c842[_0x5505bc(0x14b)](printResponse,_0x44c842[_0x5505bc(0x1ae)],_0x23a8e5),_0x520275=await _0x520275['init']();let _0x38ade3=![];try{_0x38ade3=await _0x520275[_0x5505bc(0x19d)]();}catch(_0x22950f){const _0x2bc9ac=_0x44c842[_0x5505bc(0x232)][_0x5505bc(0x181)]('|');let _0x2ae670=0x0;while(!![]){switch(_0x2bc9ac[_0x2ae670++]){case'0':await _0x44c842[_0x5505bc(0x1a5)](reportToGalactusAndSendToEDS,_0x337da0,_0x38bb99,_0x151a74,messageTypes[_0x5505bc(0x209)],_0x44c842[_0x5505bc(0x17b)],'cluster-check-failed-'+global_registry['cloudProvider'],_0x44c842['idpTD']);continue;case'1':_0x151a74+='\x0a'+JSON[_0x5505bc(0x1d2)](_0x22950f[_0x5505bc(0x1e0)]);continue;case'2':_0x38ade3=null;continue;case'3':_0x151a74='unable\x20to\x20verify\x20if\x20cluster\x20`'+global_registry[_0x5505bc(0x147)]+_0x5505bc(0x205)+global_registry[_0x5505bc(0x15a)]+_0x5505bc(0x227)+_0x22950f;continue;case'4':logger[_0x5505bc(0x1f4)](_0x151a74);continue;}break;}}_0x38ade3&&logger['info'](_0x5505bc(0x148)+global_registry[_0x5505bc(0x147)]+_0x5505bc(0x164));const _0x55c6ba=await _0x520275[_0x5505bc(0x213)]();_0x44c842[_0x5505bc(0x238)](printResponse,_0x44c842[_0x5505bc(0x175)],_0x55c6ba);const _0x596829=await _0x44c842[_0x5505bc(0x21a)](curlRequest);_0x44c842[_0x5505bc(0x190)](printResponse,_0x44c842[_0x5505bc(0x16a)],_0x596829);const _0x488a5d=await _0x44c842[_0x5505bc(0x1f7)](isTlsSupported,_0x44c842[_0x5505bc(0x1cf)]);_0x44c842[_0x5505bc(0x1fd)](printResponse,_0x44c842['YFiDi'],_0x488a5d);const _0x38b403={};_0x38b403[_0x5505bc(0x145)]=_0x44c842[_0x5505bc(0x149)],_0x38b403[_0x5505bc(0x1a9)]=_0x23a8e5;const _0x26adbc={};_0x26adbc[_0x5505bc(0x145)]=_0x44c842[_0x5505bc(0x1da)],_0x26adbc[_0x5505bc(0x1a9)]=_0x55c6ba;const _0x34b401={};_0x34b401[_0x5505bc(0x145)]=_0x44c842[_0x5505bc(0x196)],_0x34b401[_0x5505bc(0x1a9)]=_0x596829;const _0x248b85={};_0x248b85[_0x5505bc(0x145)]=_0x44c842[_0x5505bc(0x1d5)],_0x248b85[_0x5505bc(0x1a9)]=_0x488a5d;const _0x2a02d4=[_0x38b403,_0x26adbc,_0x34b401,_0x248b85],_0xa08480=await _0x44c842['hjjcT'](generateReport,_0x2a02d4,_0x38ade3),_0x334878=new Date(),_0x599873=_0x334878[_0x5505bc(0x22f)]()+'_'+_0x44c842['XGSKw'](_0x334878[_0x5505bc(0x1c7)](),0x1)+'_'+_0x334878['getUTCDate']()+'_'+_0x334878['getUTCHours']()+'_'+_0x334878[_0x5505bc(0x201)](),_0x428ba9='log/report_'+_0x599873+_0x5505bc(0x143);fs[_0x5505bc(0x183)](_0x428ba9,_0xa08480,_0x44c842['AtvEq']),logger[_0x5505bc(0x167)](_0x5505bc(0x1ba)+_0x428ba9),process['exit'](0x0);}catch(_0x5914e0){let _0x16e434='Failed\x20in\x20pre-check!\x20Error:\x20'+_0x5914e0+'\x20';logger[_0x5505bc(0x1f4)](_0x16e434),_0x16e434+='\x0a'+JSON['stringify'](_0x5914e0[_0x5505bc(0x1e0)]),logger[_0x5505bc(0x14f)](_0x5505bc(0x170)+_0x5914e0[_0x5505bc(0x1e0)]);if(_0x38bb99){const _0x340eee={};_0x340eee['type']=WS_EVENTS[_0x5505bc(0x169)],_0x340eee[_0x5505bc(0x187)]=_0x16e434,webSocketUtils[_0x5505bc(0x20b)](_0x38bb99,_0x340eee,_0x44c842[_0x5505bc(0x1e1)],!![]);}await webSocketUtils[_0x5505bc(0x1f6)](0x7d0);const _0x12bb18={};_0x12bb18[_0x5505bc(0x1f4)]=_0x16e434,await _0x44c842[_0x5505bc(0x1b3)](sendInstrumentationEvent,_0x337da0,_0x44c842['iVOqm'],messageTypes[_0x5505bc(0x209)],_0x44c842[_0x5505bc(0x229)],_0x12bb18,_0x337da0),process[_0x5505bc(0x140)](0x1);}};