const a17_0xb8aa8b=a17_0x2c41;(function(_0xb159ad,_0x4c35a4){const _0x5b98c5=a17_0x2c41,_0x2004ee=_0xb159ad();while(!![]){try{const _0x1aacd9=-parseInt(_0x5b98c5(0x124))/0x1+-parseInt(_0x5b98c5(0x169))/0x2*(parseInt(_0x5b98c5(0x1a9))/0x3)+-parseInt(_0x5b98c5(0x18a))/0x4+-parseInt(_0x5b98c5(0x165))/0x5+-parseInt(_0x5b98c5(0xfc))/0x6+-parseInt(_0x5b98c5(0x104))/0x7+parseInt(_0x5b98c5(0x196))/0x8;if(_0x1aacd9===_0x4c35a4)break;else _0x2004ee['push'](_0x2004ee['shift']());}catch(_0x2ac7b9){_0x2004ee['push'](_0x2004ee['shift']());}}}(a17_0x414b,0x9af81));const fs=require('fs'),ws=require('ws'),got=require(a17_0xb8aa8b(0xb6)),{v4:uuidv4}=require(a17_0xb8aa8b(0x101)),ReconnectingWebSocket=require(a17_0xb8aa8b(0x167)),{getCredentialsPath,reportToGalactusAndSendToEDS,getAuthHeader,responseValidation,isUndefined,curlRequest,isTlsSupported,getSystemMetaData}=require(a17_0xb8aa8b(0xe6)),{logger}=require(a17_0xb8aa8b(0x16e)),{HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,global_registry,messageTypes,WS_ENDPOINT,WS_EVENTS,ALL_SUPPORTED_CLOUD_PROVIDERS,AG_API_URL,DEFAULT_CLUSTER_DETAILS}=require(a17_0xb8aa8b(0x1af)),{getCloudProviderObjectWithOutInit}=require(a17_0xb8aa8b(0xd8)),webSocketUtils=require('../../utils/webSocketUtils'),{sendInstrumentationEvent}=require(a17_0xb8aa8b(0xdc));function a17_0x414b(){const _0x10d48f=['sjVWP','replace','ThQvl','Failed\x20in\x20pre-check!\x20Error:\x20','BOmBk','JsZiN','MptiH','cloud-provider-not-supported','getUTCHours','Success','KsdbZ','VqZYc','FfYKo','pre-check-grid-profile-empty','javQZ','name','authHeader','lRiiH','Status:\x20','CoIPs','unable\x20to\x20verify\x20if\x20cluster\x20`','WmTEb','EPqYF','isTls1_2_SUPPORTED','<PasswordPlaceholder>','TxgDF','ammXr','clusterName','find','yydib','includes','response','ZJGfm','status','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','aGCHl','kJPMC','vqqaO','bXRFi','QIeeA','mbgOf','Pass\x20the\x20region\x20for\x20existing\x20Kubernetes\x20Cluster.','Check\x20the\x20pre-requisites\x20needed\x20for\x20Automation\x20grid\x20setup','<UsernamePlaceholder>','https://','lqgDI','BQnGQ','builder','IsNUx','IdAHi','getUTCFullYear','Nstzr','\x20details\x20cannot\x20be\x20fetched\x0a\x0a','PrjVA','jbbUX','options','Cluster\x20','Icars','clusterRegion','svqvU','isCliToolInstalled','User\x20Access','NeRCE','4938115quPAVH','debug','reconnecting-websocket','Xapga','63708OBCCHy','grid','usage','JufVG','code','../../config/logger','ReWqK','getUTCMonth','DFboE','rlSTl','IdNiD','parse','`\x20is\x20present\x20in\x20region\x20`','Message:\x20','KInBK','QSmjU','\x20\x20Stack:\x20','FNyOV','oGUqk','nOOIi','string','stack','CtSAM','header','join','oXdsL','tKLLH','XsAmL','Missing\x20required\x20arguments:\x20','body','RKPSc','requestId','stringify','921152ourfdv','credential-not-found','pre-check','writeFileSync','Use\x20an\x20existing\x20grid\x20profile\x20to\x20setup\x20the\x20Automation\x20Grid.\x20By\x20default,\x20configured\x20profile\x20is\x20used.','cluster-name','BLCqI','KYkFJ','is\x20already\x20present','OBasG','mZkNB','info','33473640AEvkHL','GET','sDARX','description','kuwHa','eprkm','throwHttpErrors','LOG','peEmy','Invalid\x20input.\x20Currently\x20the\x20automation\x20grid\x20in\x20AWS,\x20AZURE\x20&\x20GCP\x20cloud\x20provider\x20is\x20supported\x20using\x20CLI.','Setting\x20cloud\x20provider\x20as\x20','NuCNx','MFvOd','headers','checkAccess','cloud-provider','dummy-grid','\x20\x20Message:\x20','argv','24uEMtwL','Browserstack','forEach','UfAiG','bbbyk','yHjzq','../../config/constants','will\x20be\x20created','isClusterPresent','===\x20Precheck\x20Report\x20-\x20','uJAnV','cloudProvider','gridProfile','.\x20Please\x20provide\x20all\x20required\x20arguments.','error',']\x20status\x20:\x20','mNajc','ERROR','zZCpn','got','\x20data\x20:\x20','Create\x20a\x20grid\x20in\x20existing\x20Kubernetes\x20Cluster\x20on\x20AWS/Azure/GCP.','jhYwy','region','vWStK','GkXud','RITDa','yDOpL','HoMTb','esWKR','\x20error\x20:\x20','wtwzF','otfrQ','RsfPQ','Pre-check\x20running\x20for\x20Cloud\x20-\x20','mWrYr','YkPoH','ipKwa','/packages/cli/get-all-grid-profiles','data','yghpp','\x20region\x20-\x20','nLyUv','`\x20already\x20exists','XRlyb','QZOyl','Failure','HndPf','WtLHn','.\x20please\x20verify\x20the\x20grid\x20profile\x20name\x20and\x20try\x20again','password','N/A','error\x20stack\x20:\x20','../../cloudproviders/utils','0|3|4|1|2','delay','Whitelisted\x20browserstack','../../utils/instrumentationUtils','username','Pass\x20the\x20name\x20of\x20cloud\x20provider\x20for\x20existing\x20Kubernetes\x20Cluster.','iBREO','SSL\x20Configured','Error\x20in\x20input\x20validation\x20while\x20pre-check\x20-\x20','RvNDQ','qATRR','pre-check-cluster-args-not-passed','getUTCMinutes','../../utils/utilityMethods','bDtSD','Report\x20saved\x20in\x20','exit','ZXTfj','oSOKF','\x20\x20Code:\x20','split','Cluster\x20details\x0a-----------------------\x0a','connectionTimeout','dLHqf','mvkhL','FZHKT','accessResp','help','REPVo','PhRJS','bstackUsername','CLOUD_PROVIDER','grid\x20profile\x20flow\x20','MXPXG','epilogue','2762892jdaWdq','existsSync','Syhqj','Tool\x20Installed','jFHCo','uuid','grid-profile','pre-check-grid-called','7311927JOEBWp','SqlhF','type','UMkIA','wziKi','`\x20,error\x20:\x20','IIJEV','BOrpr','LqLWa','plKVf','message','toLowerCase','Error\x20Details:\x0a','uLkwS','init','TLSv1_2_client_method','isTrialGridAccessible','Cluster\x20`','lKiQW','INFO','length','desc','push','VXwYE','command','gaizV','XSbDW','PJwsF','bstackAccesskey','DkJvI','sendEventToBackend','WebSocket','571666PGFhUz','mxsUx'];a17_0x414b=function(){return _0x10d48f;};return a17_0x414b();}function a17_0x2c41(_0x231d6c,_0xdc0879){const _0x414b35=a17_0x414b();return a17_0x2c41=function(_0x2c4149,_0x43371c){_0x2c4149=_0x2c4149-0xb4;let _0x5b7731=_0x414b35[_0x2c4149];return _0x5b7731;},a17_0x2c41(_0x231d6c,_0xdc0879);}exports[a17_0xb8aa8b(0x11c)]=a17_0xb8aa8b(0x16a),exports[a17_0xb8aa8b(0x119)]=a17_0xb8aa8b(0x150),exports[a17_0xb8aa8b(0x155)]=function(_0x68964a){const _0x57b8ff=a17_0xb8aa8b,_0x186883={};_0x186883[_0x57b8ff(0x130)]=_0x57b8ff(0xb8),_0x186883[_0x57b8ff(0xcb)]='string',_0x186883[_0x57b8ff(0x14b)]=_0x57b8ff(0xde),_0x186883[_0x57b8ff(0x125)]=_0x57b8ff(0x14f),_0x186883['XRlyb']='Use\x20an\x20existing\x20grid\x20profile\x20to\x20setup\x20the\x20Automation\x20Grid.\x20By\x20default,\x20configured\x20profile\x20is\x20used.',_0x186883[_0x57b8ff(0x1b3)]=_0x57b8ff(0xf4);const _0x243584=_0x186883,_0x496ed6={};_0x496ed6[_0x57b8ff(0x199)]=_0x243584[_0x57b8ff(0x130)],_0x496ed6['type']=_0x243584[_0x57b8ff(0xcb)];const _0x6901a7={};_0x6901a7[_0x57b8ff(0x199)]=_0x243584[_0x57b8ff(0x14b)],_0x6901a7['type']=_0x243584[_0x57b8ff(0xcb)];const _0x3a6092={};_0x3a6092[_0x57b8ff(0x199)]=_0x243584[_0x57b8ff(0x125)],_0x3a6092[_0x57b8ff(0x106)]=_0x243584[_0x57b8ff(0xcb)];const _0x668b48={};_0x668b48['description']=_0x243584[_0x57b8ff(0xcf)],_0x668b48[_0x57b8ff(0x106)]=_0x243584[_0x57b8ff(0xcb)];const _0x5e681c={};return _0x5e681c[_0x57b8ff(0x18f)]=_0x496ed6,_0x5e681c[_0x57b8ff(0x1a5)]=_0x6901a7,_0x5e681c['region']=_0x3a6092,_0x5e681c[_0x57b8ff(0x102)]=_0x668b48,_0x68964a[_0x57b8ff(0x16b)](HELP_HEADER_MESSAGE['pre_check'])[_0x57b8ff(0xfb)](HELP_FOOTER_MESSAGE)[_0x57b8ff(0x15d)](_0x5e681c)['help'](_0x243584[_0x57b8ff(0x1b3)])[_0x57b8ff(0x1a8)];};async function inputValidation(_0x58265d,_0x35e011){const _0x2ae826=a17_0xb8aa8b,_0x329be3={'jhYwy':_0x2ae826(0x1b7),'oSOKF':_0x2ae826(0x192),'RvNDQ':'will\x20be\x20created','RsfPQ':_0x2ae826(0x1a5),'mNajc':_0x2ae826(0xb8),'CtSAM':_0x2ae826(0x17d),'bXRFi':_0x2ae826(0xde),'KYkFJ':_0x2ae826(0x14f),'eprkm':_0x2ae826(0x18e),'kJPMC':_0x2ae826(0xf4),'wziKi':_0x2ae826(0xba),'UfAiG':'Missing\x20required\x20arguments.\x20Please\x20provide\x20either\x20grid\x20profile\x20or\x20cluster\x20details\x20(cluser-name\x20,\x20cloud\x20provider\x20&\x20region','CoIPs':function(_0x218136,_0x8bc90){return _0x218136+_0x8bc90;},'YJFAR':_0x2ae826(0x12f),'bbbyk':_0x2ae826(0xd1),'BQnGQ':function(_0x3fa877,_0x152ee5){return _0x3fa877||_0x152ee5;},'otfrQ':'N/A','PrjVA':'Error\x20Details:\x0a','JufVG':'cluster-name','ReWqK':function(_0x197cc4,_0x73545f){return _0x197cc4===_0x73545f;},'SqlhF':'XpSyO','VXwYE':_0x2ae826(0x194),'RKPSc':function(_0x1465e9,_0x33cdaf){return _0x1465e9===_0x33cdaf;},'DkJvI':'UJkqI','PJwsF':_0x2ae826(0x137),'KInBK':function(_0x45dcd9,_0x56f25b){return _0x45dcd9!==_0x56f25b;},'FxrUI':'HqUhH','yDOpL':_0x2ae826(0xf0),'FZHKT':function(_0xc160b3,_0xbfe44f){return _0xc160b3!==_0xbfe44f;},'BOrpr':_0x2ae826(0xcd),'ZXTfj':_0x2ae826(0x161),'lqgDI':function(_0x3db2fe,_0x354f5c){return _0x3db2fe>_0x354f5c;},'sDARX':'CepTu','HndPf':function(_0x3a9fc7,_0x2a4f74,_0x31298e,_0x1ca1ed,_0x5b57d3,_0x2b9bbd,_0x429b0a,_0x3db6c0){return _0x3a9fc7(_0x2a4f74,_0x31298e,_0x1ca1ed,_0x5b57d3,_0x2b9bbd,_0x429b0a,_0x3db6c0);},'IdNiD':_0x2ae826(0x103),'EPqYF':_0x2ae826(0xe4),'dTvRM':function(_0x122906,_0x4bfc59){return _0x122906===_0x4bfc59;},'MXPXG':_0x2ae826(0xf6),'mWrYr':'jxSTt','sjVWP':_0x2ae826(0x19f),'lKiQW':function(_0x155a32,_0xd1f624,_0x3c0331,_0x125362,_0x2fb3be,_0x53435c,_0x21697f,_0x5438e8){return _0x155a32(_0xd1f624,_0x3c0331,_0x125362,_0x2fb3be,_0x53435c,_0x21697f,_0x5438e8);},'FNyOV':_0x2ae826(0x12d),'gaizV':function(_0x178d26,_0x3330c0){return _0x178d26===_0x3330c0;},'JFuCm':_0x2ae826(0x1ae),'JsZiN':function(_0x1d89ac,_0x3c1b67){return _0x1d89ac===_0x3c1b67;},'iBREO':_0x2ae826(0xbb),'uDMLf':_0x2ae826(0x197),'kuwHa':function(_0x1e9f42,_0x36748e,_0x34e607){return _0x1e9f42(_0x36748e,_0x34e607);},'jFHCo':function(_0x52cd50,_0x369bbc,_0x54f448,_0x376da2,_0x1587a3,_0x24eef7){return _0x52cd50(_0x369bbc,_0x54f448,_0x376da2,_0x1587a3,_0x24eef7);},'zZCpn':_0x2ae826(0x18c),'XsAmL':_0x2ae826(0x102),'uLkwS':_0x2ae826(0x13f),'qATRR':function(_0x12f1b7,_0x2fe112){return _0x12f1b7(_0x2fe112);},'MptiH':function(_0x3d5027,_0x37f0cb){return _0x3d5027===_0x37f0cb;},'mgKYH':_0x2ae826(0x156),'BLCqI':'sUnCX','MFvOd':_0x2ae826(0x133),'FeVdI':'hWDmh','IdAHi':_0x2ae826(0x183),'IdcZZ':_0x2ae826(0x12a),'NeRCE':'Grid\x20profile\x20fetched\x20for\x20pre-check','ipKwa':_0x2ae826(0x132),'aGCHl':'zsJkO','Pyzpl':function(_0x205123,_0x1b22e1){return _0x205123===_0x1b22e1;},'OBasG':'PayPr','VqZYc':_0x2ae826(0xfe),'jouGJ':function(_0x3aa0a9,_0x382343,_0x5d97e6,_0x555086,_0x5d9dfe,_0x4640c6,_0x22af81,_0x79c68d){return _0x3aa0a9(_0x382343,_0x5d97e6,_0x555086,_0x5d9dfe,_0x4640c6,_0x22af81,_0x79c68d);}};let _0x19778c;try{if(_0x329be3[_0x2ae826(0x16f)](_0x329be3[_0x2ae826(0x105)],_0x329be3[_0x2ae826(0x11b)]))_0x486bab[_0x2ae826(0x195)]('['+_0x348693+_0x2ae826(0x1b8)+_0x2304bc[_0x2ae826(0x147)]+_0x2ae826(0xb7)+_0x4cc8b[_0x2ae826(0xca)]+_0x2ae826(0xc1)+_0x551cb8[_0x2ae826(0x1b7)]),_0xff75df[_0x2ae826(0x1b7)]&&_0x11a878[_0x2ae826(0x1b7)](_0x2ae826(0xd7)+_0x4b93f6['error']['stack']);else{if(_0x58265d['clusterName']||_0x58265d[_0x2ae826(0x1b4)]||_0x58265d['region']){if(_0x329be3[_0x2ae826(0x187)](_0x329be3[_0x2ae826(0x121)],_0x329be3[_0x2ae826(0x121)])){const _0x354597=[];if(!_0x58265d['clusterName']){if(_0x329be3[_0x2ae826(0x187)](_0x329be3['PJwsF'],_0x329be3[_0x2ae826(0x11f)]))_0x354597['push'](_0x329be3[_0x2ae826(0x16c)]);else{const _0xf402ce={};_0xf402ce[_0x2ae826(0x106)]=_0x3c7751[_0x2ae826(0x19d)],_0xf402ce['message']=_0x44990c,_0x231f63['sendEventToBackend'](_0x255d2d,_0xf402ce,_0x329be3[_0x2ae826(0xb9)],!![]);}};!_0x58265d[_0x2ae826(0x1b4)]&&(_0x329be3[_0x2ae826(0x177)](_0x329be3['FxrUI'],_0x329be3[_0x2ae826(0xbe)])?_0x354597['push'](_0x329be3[_0x2ae826(0xc4)]):_0xccb6ca+='Cluster\x20'+_0x25209a[_0x2ae826(0x141)]+'\x20'+(_0x341edd?_0x329be3[_0x2ae826(0xeb)]:_0x329be3[_0x2ae826(0xe2)])+'\x0a\x0a');;!_0x58265d[_0x2ae826(0xba)]&&(_0x329be3[_0x2ae826(0xf2)](_0x329be3[_0x2ae826(0x10b)],_0x329be3[_0x2ae826(0xea)])?_0x354597[_0x2ae826(0x11a)](_0x329be3[_0x2ae826(0x108)]):_0x16fbbf[_0x2ae826(0x195)](_0x2ae826(0x115)+_0x227461[_0x2ae826(0x141)]+'`\x20already\x20exists'));;_0x329be3[_0x2ae826(0x153)](_0x354597[_0x2ae826(0x118)],0x0)&&(_0x329be3['KInBK'](_0x329be3[_0x2ae826(0x198)],_0x329be3[_0x2ae826(0x198)])?_0x8b4c9b['push'](_0x329be3[_0x2ae826(0xc4)]):(_0x19778c=_0x2ae826(0x185)+_0x354597[_0x2ae826(0x181)](',\x20')+_0x2ae826(0x1b6),await _0x329be3[_0x2ae826(0xd2)](reportToGalactusAndSendToEDS,_0x58265d,_0x35e011,_0x19778c,messageTypes[_0x2ae826(0xb4)],_0x329be3[_0x2ae826(0x173)],_0x329be3[_0x2ae826(0x13c)],_0x329be3[_0x2ae826(0xb9)]),logger['error'](_0x19778c),process[_0x2ae826(0xe9)](0x1)));if(!ALL_SUPPORTED_CLOUD_PROVIDERS[_0x2ae826(0x144)](_0x58265d[_0x2ae826(0x1b4)][_0x2ae826(0x10f)]())){if(_0x329be3['dTvRM'](_0x329be3[_0x2ae826(0xfa)],_0x329be3[_0x2ae826(0xc6)])){const _0x59763a={};_0x59763a['description']=_0x329be3[_0x2ae826(0x1b9)],_0x59763a['type']=_0x329be3['CtSAM'];const _0x201664={};_0x201664[_0x2ae826(0x199)]=_0x329be3[_0x2ae826(0x14c)],_0x201664[_0x2ae826(0x106)]=_0x329be3[_0x2ae826(0x17f)];const _0x4ec442={};_0x4ec442[_0x2ae826(0x199)]=_0x329be3[_0x2ae826(0x191)],_0x4ec442[_0x2ae826(0x106)]=_0x329be3['CtSAM'];const _0x325a44={};_0x325a44['description']=_0x329be3[_0x2ae826(0x19b)],_0x325a44[_0x2ae826(0x106)]=_0x329be3['CtSAM'];const _0x2e1317={};return _0x2e1317[_0x2ae826(0x18f)]=_0x59763a,_0x2e1317['cloud-provider']=_0x201664,_0x2e1317['region']=_0x4ec442,_0x2e1317[_0x2ae826(0x102)]=_0x325a44,_0x574626[_0x2ae826(0x16b)](_0x52a34f['pre_check'])[_0x2ae826(0xfb)](_0x2b02d3)['options'](_0x2e1317)[_0x2ae826(0xf4)](_0x329be3[_0x2ae826(0x14a)])[_0x2ae826(0x1a8)];}else _0x19778c=_0x329be3[_0x2ae826(0x126)],await _0x329be3[_0x2ae826(0x116)](reportToGalactusAndSendToEDS,_0x58265d,_0x35e011,_0x19778c,messageTypes[_0x2ae826(0xb4)],_0x329be3['IdNiD'],_0x329be3[_0x2ae826(0x17a)],_0x329be3[_0x2ae826(0xb9)]),logger[_0x2ae826(0x1b7)](_0x19778c),!_0x58265d[_0x2ae826(0x1b4)]&&(_0x329be3['gaizV'](_0x329be3['JFuCm'],_0x329be3['JFuCm'])?(logger[_0x2ae826(0x195)](_0x2ae826(0x1a0)+DEFAULT_CLUSTER_DETAILS['CLOUD_PROVIDER']+'\x20'),_0x58265d[_0x2ae826(0x1b4)]=DEFAULT_CLUSTER_DETAILS[_0x2ae826(0xf8)]):(_0x582654[_0x2ae826(0x195)]('Setting\x20cloud\x20provider\x20as\x20'+_0xfe8c55['CLOUD_PROVIDER']+'\x20'),_0x2f6593[_0x2ae826(0x1b4)]=_0x5e1331[_0x2ae826(0xf8)]));}global_registry[_0x2ae826(0x141)]=_0x58265d['clusterName'],global_registry['cloudProvider']=_0x58265d[_0x2ae826(0x1b4)],global_registry[_0x2ae826(0x160)]=_0x58265d[_0x2ae826(0xba)];}else _0x143418[_0x2ae826(0xe9)](0x1);}else{if(_0x58265d[_0x2ae826(0x1b5)]){if(_0x329be3[_0x2ae826(0x12b)](_0x329be3['iBREO'],_0x329be3[_0x2ae826(0xdf)])){global_registry[_0x2ae826(0x1b5)]=_0x58265d[_0x2ae826(0x1b5)],logger['debug'](_0x2ae826(0xf9)+_0x58265d[_0x2ae826(0x1b5)]);const _0x4dcc78=_0x2ae826(0x152)+AG_API_URL+_0x2ae826(0xc9),_0x18282a={};_0x18282a['method']=_0x329be3['uDMLf'],_0x18282a[_0x2ae826(0x1a3)]=global_registry['authHeader'],_0x18282a[_0x2ae826(0x19c)]=![];const _0x20369b=_0x18282a,_0x7b281d=await _0x329be3[_0x2ae826(0x19a)](got,_0x4dcc78,_0x20369b),_0x4a9887=await _0x329be3[_0x2ae826(0x100)](responseValidation,_0x7b281d,_0x329be3[_0x2ae826(0xb5)],_0x329be3[_0x2ae826(0x184)],_0x58265d,_0x35e011);let _0x24be3c={};if(_0x329be3[_0x2ae826(0x11d)](_0x4a9887,0xc8)){if(_0x329be3['KInBK'](_0x329be3[_0x2ae826(0x111)],_0x329be3['uLkwS']))_0x2103ec['error']('error\x20stack\x20:\x20'+_0x115405[_0x2ae826(0x1b7)]['stack']);else{const _0x447d6e=JSON[_0x2ae826(0x174)](_0x7b281d[_0x2ae826(0x186)]),_0x3e10df=_0x447d6e[_0x2ae826(0x142)](_0x290b03=>_0x290b03[_0x2ae826(0x135)]===_0x58265d[_0x2ae826(0x1b5)])||null;_0x329be3[_0x2ae826(0xe3)](isUndefined,_0x3e10df)?_0x329be3[_0x2ae826(0x12c)](_0x329be3['mgKYH'],_0x329be3[_0x2ae826(0x190)])?_0x1347cc=_0x10be17:(_0x19778c='Invalid\x20input.\x20grid\x20profiles:\x20'+_0x58265d['gridProfile']+_0x2ae826(0xd4),await _0x329be3['lKiQW'](reportToGalactusAndSendToEDS,_0x58265d,_0x35e011,_0x19778c,messageTypes[_0x2ae826(0xb4)],_0x329be3[_0x2ae826(0x173)],_0x329be3[_0x2ae826(0x1a2)],_0x329be3[_0x2ae826(0xb9)]),logger[_0x2ae826(0x1b7)](_0x19778c),process[_0x2ae826(0xe9)](0x1)):_0x329be3[_0x2ae826(0xf2)](_0x329be3['FeVdI'],_0x329be3['FeVdI'])?_0xe50bd8[_0x2ae826(0x11a)](_0x329be3[_0x2ae826(0x108)]):_0x24be3c=_0x3e10df;}}else _0x329be3['KInBK'](_0x329be3[_0x2ae826(0x157)],_0x329be3['IdcZZ'])?process[_0x2ae826(0xe9)](0x1):(_0x3eacd7[_0x2ae826(0x1b7)](_0x329be3[_0x2ae826(0x1ac)]),_0x38173f['exit'](0x1));const _0x45e0c6={};_0x45e0c6[_0x2ae826(0x106)]=WS_EVENTS[_0x2ae826(0x19d)],_0x45e0c6[_0x2ae826(0x10e)]=_0x329be3[_0x2ae826(0x164)],webSocketUtils[_0x2ae826(0x122)](_0x35e011,_0x45e0c6),global_registry[_0x2ae826(0x1b4)]=_0x24be3c[_0x2ae826(0x1b4)],global_registry[_0x2ae826(0x160)]=_0x24be3c[_0x2ae826(0xba)],global_registry[_0x2ae826(0x141)]=_0x24be3c[_0x2ae826(0x141)];}else{const {header:_0x19d280,response:_0x10309b}=_0x2e1444,{status:_0x1daca7,data:_0x25c401,error:_0x5425e4}=_0x10309b;_0x48a6fa+=_0x19d280+'\x20#'+_0x329be3[_0x2ae826(0x139)](_0x14bc06,0x1)+'\x0a',_0x1ca3fc+=_0x2ae826(0x138)+(_0x1daca7?_0x329be3['YJFAR']:_0x329be3[_0x2ae826(0x1ad)])+'\x0a',_0x5856b9+=_0x2ae826(0x176)+_0x329be3[_0x2ae826(0x154)](_0x25c401,_0x329be3[_0x2ae826(0xc3)])+'\x0a',_0x5425e4&&(_0x39fe31+=_0x329be3[_0x2ae826(0x15b)],_0x33831a+='\x20\x20Message:\x20'+(_0x5425e4['message']||_0x329be3[_0x2ae826(0xc3)])+'\x0a',_0xc57d16+='\x20\x20Code:\x20'+(_0x5425e4[_0x2ae826(0x16d)]||_0x329be3['otfrQ'])+'\x0a',_0x23b0cf+=_0x2ae826(0x179)+(_0x5425e4[_0x2ae826(0x17e)]||_0x329be3['otfrQ'])+'\x0a'),_0x458b55+='\x0a\x0a';}}else _0x329be3[_0x2ae826(0x177)](_0x329be3[_0x2ae826(0xc8)],_0x329be3[_0x2ae826(0x149)])?(logger[_0x2ae826(0x1b7)](_0x329be3['UfAiG']),process[_0x2ae826(0xe9)](0x1)):_0x3584f9[_0x2ae826(0x11a)](_0x329be3[_0x2ae826(0x16c)]);}}}catch(_0x1bc591){_0x329be3['Pyzpl'](_0x329be3[_0x2ae826(0x193)],_0x329be3[_0x2ae826(0x131)])?(_0x5d2976+=_0x329be3['PrjVA'],_0x1307cd+=_0x2ae826(0x1a7)+(_0x47c313[_0x2ae826(0x10e)]||_0x329be3[_0x2ae826(0xc3)])+'\x0a',_0x15022a+=_0x2ae826(0xec)+(_0x354000[_0x2ae826(0x16d)]||_0x329be3[_0x2ae826(0xc3)])+'\x0a',_0x1b865b+=_0x2ae826(0x179)+(_0x558985['stack']||_0x329be3[_0x2ae826(0xc3)])+'\x0a'):(_0x19778c=_0x2ae826(0xe1)+_0x1bc591+':\x20'+_0x1bc591[_0x2ae826(0x17e)],logger[_0x2ae826(0x1b7)](_0x19778c),await _0x329be3['jouGJ'](reportToGalactusAndSendToEDS,_0x58265d,_0x35e011,_0x19778c,messageTypes['ERROR'],_0x329be3[_0x2ae826(0x173)],_0x329be3[_0x2ae826(0x17a)],_0x329be3[_0x2ae826(0xb9)]),process[_0x2ae826(0xe9)](0x1));}}function printResponse(_0x1bf1e1,_0x56c16e){const _0x378863=a17_0xb8aa8b,_0x21972d={};_0x21972d[_0x378863(0x171)]=function(_0x569d28,_0x47175c){return _0x569d28===_0x47175c;},_0x21972d[_0x378863(0xd3)]='SVqmJ',_0x21972d['HoMTb']=_0x378863(0x168);const _0x14f879=_0x21972d;logger[_0x378863(0x195)]('['+_0x1bf1e1+_0x378863(0x1b8)+_0x56c16e['status']+_0x378863(0xb7)+_0x56c16e[_0x378863(0xca)]+_0x378863(0xc1)+_0x56c16e['error']),_0x56c16e[_0x378863(0x1b7)]&&(_0x14f879['DFboE'](_0x14f879[_0x378863(0xd3)],_0x14f879[_0x378863(0xbf)])?_0x260fa4+='Cluster\x20'+_0x269a13[_0x378863(0x141)]+'\x20details\x20cannot\x20be\x20fetched\x0a\x0a':logger[_0x378863(0x1b7)]('error\x20stack\x20:\x20'+_0x56c16e['error']['stack']));}async function generateReport(_0x1a623b,_0x5352e8){const _0x39193e=a17_0xb8aa8b,_0x18c4ca={'UMkIA':function(_0x33de0c,_0x4c055b){return _0x33de0c+_0x4c055b;},'vbmUO':_0x39193e(0x12f),'javQZ':_0x39193e(0xd1),'gNnAQ':function(_0x50b0d1,_0x288245){return _0x50b0d1||_0x288245;},'REPVo':_0x39193e(0xd6),'ThQvl':_0x39193e(0x110),'ZEFFs':_0x39193e(0xee),'jbbUX':function(_0x2dc1bf,_0x50f645){return _0x2dc1bf!=_0x50f645;},'DDgpQ':_0x39193e(0x192),'GkXud':_0x39193e(0x1b0),'ammXr':function(_0x4fbfd2){return _0x4fbfd2();}};let _0x37e3f9=_0x39193e(0x1b2)+global_registry[_0x39193e(0x1b4)]+'\x20===\x0a\x0a';return _0x1a623b[_0x39193e(0x1ab)]((_0x1634ea,_0x20d01e)=>{const _0x46dc99=_0x39193e,{header:_0x4fe14e,response:_0x141747}=_0x1634ea,{status:_0xa0013e,data:_0x11d214,error:_0x4cad9b}=_0x141747;_0x37e3f9+=_0x4fe14e+'\x20#'+_0x18c4ca[_0x46dc99(0x107)](_0x20d01e,0x1)+'\x0a',_0x37e3f9+=_0x46dc99(0x138)+(_0xa0013e?_0x18c4ca['vbmUO']:_0x18c4ca[_0x46dc99(0x134)])+'\x0a',_0x37e3f9+=_0x46dc99(0x176)+_0x18c4ca['gNnAQ'](_0x11d214,_0x18c4ca[_0x46dc99(0xf5)])+'\x0a',_0x4cad9b&&(_0x37e3f9+=_0x18c4ca[_0x46dc99(0x128)],_0x37e3f9+=_0x46dc99(0x1a7)+(_0x4cad9b[_0x46dc99(0x10e)]||_0x18c4ca['REPVo'])+'\x0a',_0x37e3f9+=_0x46dc99(0xec)+(_0x4cad9b[_0x46dc99(0x16d)]||_0x18c4ca['REPVo'])+'\x0a',_0x37e3f9+=_0x46dc99(0x179)+(_0x4cad9b[_0x46dc99(0x17e)]||_0x18c4ca[_0x46dc99(0xf5)])+'\x0a'),_0x37e3f9+='\x0a\x0a';}),_0x37e3f9+=_0x18c4ca['ZEFFs'],_0x18c4ca[_0x39193e(0x15c)](_0x5352e8,null)?_0x37e3f9+=_0x39193e(0x15e)+global_registry[_0x39193e(0x141)]+'\x20'+(_0x5352e8?_0x18c4ca['DDgpQ']:_0x18c4ca[_0x39193e(0xbc)])+'\x0a\x0a':_0x37e3f9+='Cluster\x20'+global_registry[_0x39193e(0x141)]+_0x39193e(0x15a),_0x37e3f9+=_0x18c4ca[_0x39193e(0x140)](getSystemMetaData),_0x37e3f9;};exports['handler']=async function(_0x5bf9e6){const _0x102c30=a17_0xb8aa8b,_0x585c06={'bDtSD':function(_0x2b0e4d){return _0x2b0e4d();},'rlSTl':_0x102c30(0x148),'QIeeA':function(_0x2824fe,_0x2cd6bf,_0x4e0508,_0x5bf2d4,_0x4c3c35,_0xce9bac,_0x3ea608,_0x18b8be){return _0x2824fe(_0x2cd6bf,_0x4e0508,_0x5bf2d4,_0x4c3c35,_0xce9bac,_0x3ea608,_0x18b8be);},'IIJEV':'pre-check-grid-called','RITDa':_0x102c30(0x18b),'mbgOf':_0x102c30(0x1b7),'peEmy':function(_0x5b141f,_0x3742b7,_0x588c30,_0x231c46,_0x4dd98e,_0x5a2c3d,_0x5f5707){return _0x5b141f(_0x3742b7,_0x588c30,_0x231c46,_0x4dd98e,_0x5a2c3d,_0x5f5707);},'SUref':_0x102c30(0x151),'mvkhL':_0x102c30(0x13e),'oGUqk':function(_0x118c51,_0x1ddfe4,_0x5495f8){return _0x118c51(_0x1ddfe4,_0x5495f8);},'lqHdo':function(_0x5380a5,_0x4df9b0,_0x5955f3,_0x816744,_0x7ac829,_0x31da40,_0x240983){return _0x5380a5(_0x4df9b0,_0x5955f3,_0x816744,_0x7ac829,_0x31da40,_0x240983);},'wtwzF':_0x102c30(0x1a6),'QZOyl':function(_0x190bc6,_0x2b4ca9,_0x2ceff5){return _0x190bc6(_0x2b4ca9,_0x2ceff5);},'NuCNx':'toolInstalledResp','plKVf':_0x102c30(0xd9),'nOOIi':_0x102c30(0xf3),'LqLWa':function(_0x4ee07c){return _0x4ee07c();},'YkPoH':_0x102c30(0x114),'QSmjU':function(_0xa62042,_0x589973){return _0xa62042(_0x589973);},'esWKR':_0x102c30(0x113),'XSbDW':_0x102c30(0x13d),'WmTEb':_0x102c30(0xff),'oXdsL':_0x102c30(0x163),'QhmjD':_0x102c30(0xdb),'NWNKE':_0x102c30(0xe0),'Icars':function(_0x1844cf,_0x3fbcec,_0x117e98){return _0x1844cf(_0x3fbcec,_0x117e98);},'Nstzr':function(_0x8841af,_0x18d423){return _0x8841af+_0x18d423;},'ltUvO':'utf-8','yydib':function(_0x4db452,_0x38a4e3,_0xf267fe,_0x53ecd5,_0x45312a,_0x4f980c,_0x567757){return _0x4db452(_0x38a4e3,_0xf267fe,_0x53ecd5,_0x45312a,_0x4f980c,_0x567757);},'ZJGfm':'pre-check-failed'};let _0x25c0e4,_0x410ae7;try{global_registry[_0x102c30(0x188)]=_0x585c06[_0x102c30(0xe7)](uuidv4);!fs[_0x102c30(0xfd)](_0x585c06[_0x102c30(0xe7)](getCredentialsPath))&&(_0x410ae7=_0x585c06[_0x102c30(0x172)],logger[_0x102c30(0x1b7)](_0x410ae7),await _0x585c06[_0x102c30(0x14d)](reportToGalactusAndSendToEDS,_0x5bf9e6,_0x25c0e4,_0x410ae7,messageTypes[_0x102c30(0xb4)],_0x585c06[_0x102c30(0x10a)],_0x585c06[_0x102c30(0xbd)],_0x585c06[_0x102c30(0x14e)]),process[_0x102c30(0xe9)](0x1));_0x585c06[_0x102c30(0x19e)](sendInstrumentationEvent,_0x5bf9e6,_0x585c06[_0x102c30(0x10a)],messageTypes[_0x102c30(0x117)],null,null,_0x5bf9e6);const _0x43c55e=JSON['parse'](fs['readFileSync'](_0x585c06[_0x102c30(0xe7)](getCredentialsPath)));global_registry[_0x102c30(0xf7)]=_0x43c55e[_0x102c30(0x1aa)][_0x102c30(0xdd)],global_registry[_0x102c30(0x120)]=_0x43c55e[_0x102c30(0x1aa)][_0x102c30(0xd5)];const _0x3fbaf1=WS_ENDPOINT[_0x102c30(0x127)](_0x585c06['SUref'],_0x43c55e[_0x102c30(0x1aa)][_0x102c30(0xdd)])['replace'](_0x585c06[_0x102c30(0xf1)],_0x43c55e['Browserstack'][_0x102c30(0xd5)]),_0x16d451={};_0x16d451[_0x102c30(0x123)]=ws,_0x16d451[_0x102c30(0xef)]=0x36ee80,_0x25c0e4=new ReconnectingWebSocket(_0x3fbaf1,[],_0x16d451),global_registry[_0x102c30(0x136)]=_0x585c06[_0x102c30(0x17b)](getAuthHeader,global_registry[_0x102c30(0xf7)],global_registry[_0x102c30(0x120)]),await _0x585c06[_0x102c30(0x17b)](inputValidation,_0x5bf9e6,_0x25c0e4),logger[_0x102c30(0x195)](_0x102c30(0xc5)+global_registry[_0x102c30(0x1b4)]+_0x102c30(0xcc)+global_registry['clusterRegion']);let _0x1e7049=await _0x585c06['lqHdo'](getCloudProviderObjectWithOutInit,global_registry[_0x102c30(0x1b4)],global_registry[_0x102c30(0x141)],_0x585c06[_0x102c30(0xc2)],_0x25c0e4,webSocketUtils,_0x5bf9e6);const _0x3c9f81=await _0x1e7049[_0x102c30(0x162)]();_0x585c06[_0x102c30(0xd0)](printResponse,_0x585c06[_0x102c30(0x1a1)],_0x3c9f81),_0x1e7049=await _0x1e7049[_0x102c30(0x112)]();let _0x59882d=![];try{_0x59882d=await _0x1e7049[_0x102c30(0x1b1)]();}catch(_0x3dbe6f){const _0x3b219d=_0x585c06[_0x102c30(0x10d)][_0x102c30(0xed)]('|');let _0x3e2a6d=0x0;while(!![]){switch(_0x3b219d[_0x3e2a6d++]){case'0':_0x410ae7=_0x102c30(0x13a)+global_registry[_0x102c30(0x141)]+_0x102c30(0x175)+global_registry['clusterRegion']+_0x102c30(0x109)+_0x3dbe6f;continue;case'1':_0x410ae7+='\x0a'+JSON[_0x102c30(0x189)](_0x3dbe6f[_0x102c30(0x17e)]);continue;case'2':await _0x585c06[_0x102c30(0x14d)](reportToGalactusAndSendToEDS,_0x5bf9e6,_0x25c0e4,_0x410ae7,messageTypes['ERROR'],_0x585c06[_0x102c30(0x10a)],'cluster-check-failed-'+global_registry[_0x102c30(0x1b4)],_0x585c06[_0x102c30(0x14e)]);continue;case'3':_0x59882d=null;continue;case'4':logger['error'](_0x410ae7);continue;}break;}}_0x59882d&&logger[_0x102c30(0x195)](_0x102c30(0x115)+global_registry['clusterName']+_0x102c30(0xce));const _0x5510bc=await _0x1e7049[_0x102c30(0x1a4)]();_0x585c06[_0x102c30(0xd0)](printResponse,_0x585c06[_0x102c30(0x17c)],_0x5510bc);const _0x1d1003=await _0x585c06[_0x102c30(0x10c)](curlRequest);_0x585c06[_0x102c30(0xd0)](printResponse,_0x585c06[_0x102c30(0xc7)],_0x1d1003);const _0x17d293=await _0x585c06[_0x102c30(0x178)](isTlsSupported,_0x585c06[_0x102c30(0xc0)]);_0x585c06['QZOyl'](printResponse,_0x585c06[_0x102c30(0x11e)],_0x17d293);const _0x562a22={};_0x562a22['header']=_0x585c06[_0x102c30(0x13b)],_0x562a22['response']=_0x3c9f81;const _0x51d4de={};_0x51d4de[_0x102c30(0x180)]=_0x585c06[_0x102c30(0x182)],_0x51d4de[_0x102c30(0x145)]=_0x5510bc;const _0xcf38c1={};_0xcf38c1['header']=_0x585c06['QhmjD'],_0xcf38c1['response']=_0x1d1003;const _0x590215={};_0x590215[_0x102c30(0x180)]=_0x585c06['NWNKE'],_0x590215[_0x102c30(0x145)]=_0x17d293;const _0x39f5dc=[_0x562a22,_0x51d4de,_0xcf38c1,_0x590215],_0x1ce8b4=await _0x585c06[_0x102c30(0x15f)](generateReport,_0x39f5dc,_0x59882d),_0x4ed3d5=new Date(),_0x4acf69=_0x4ed3d5[_0x102c30(0x158)]()+'_'+_0x585c06[_0x102c30(0x159)](_0x4ed3d5[_0x102c30(0x170)](),0x1)+'_'+_0x4ed3d5['getUTCDate']()+'_'+_0x4ed3d5[_0x102c30(0x12e)]()+'_'+_0x4ed3d5[_0x102c30(0xe5)](),_0x301ada='log/report_'+_0x4acf69+'.txt';fs[_0x102c30(0x18d)](_0x301ada,_0x1ce8b4,_0x585c06['ltUvO']),logger['info'](_0x102c30(0xe8)+_0x301ada),process[_0x102c30(0xe9)](0x0);}catch(_0x3da14b){let _0x47e082=_0x102c30(0x129)+_0x3da14b+'\x20';logger[_0x102c30(0x1b7)](_0x47e082),_0x47e082+='\x0a'+JSON['stringify'](_0x3da14b[_0x102c30(0x17e)]),logger[_0x102c30(0x166)]('stack\x20trace\x20'+_0x3da14b[_0x102c30(0x17e)]);if(_0x25c0e4){const _0x5aa5a6={};_0x5aa5a6[_0x102c30(0x106)]=WS_EVENTS[_0x102c30(0x19d)],_0x5aa5a6[_0x102c30(0x10e)]=_0x47e082,webSocketUtils['sendEventToBackend'](_0x25c0e4,_0x5aa5a6,_0x585c06[_0x102c30(0x14e)],!![]);}await webSocketUtils[_0x102c30(0xda)](0x7d0);const _0x344c0b={};_0x344c0b[_0x102c30(0x1b7)]=_0x47e082,await _0x585c06[_0x102c30(0x143)](sendInstrumentationEvent,_0x5bf9e6,_0x585c06[_0x102c30(0x10a)],messageTypes[_0x102c30(0xb4)],_0x585c06[_0x102c30(0x146)],_0x344c0b,_0x5bf9e6),process[_0x102c30(0xe9)](0x1);}};