const a17_0x479262=a17_0x4232;(function(_0x5a7c77,_0x5d6e38){const _0x42452e=a17_0x4232,_0x191f63=_0x5a7c77();while(!![]){try{const _0xdc9662=parseInt(_0x42452e(0xd4))/0x1+parseInt(_0x42452e(0xca))/0x2*(-parseInt(_0x42452e(0xe5))/0x3)+parseInt(_0x42452e(0x179))/0x4+parseInt(_0x42452e(0x166))/0x5*(-parseInt(_0x42452e(0x190))/0x6)+parseInt(_0x42452e(0x117))/0x7+-parseInt(_0x42452e(0x157))/0x8*(parseInt(_0x42452e(0xe4))/0x9)+-parseInt(_0x42452e(0x19c))/0xa*(-parseInt(_0x42452e(0x118))/0xb);if(_0xdc9662===_0x5d6e38)break;else _0x191f63['push'](_0x191f63['shift']());}catch(_0x51fda9){_0x191f63['push'](_0x191f63['shift']());}}}(a17_0x4ec6,0x7c604));const fs=require('fs'),ws=require('ws'),got=require(a17_0x479262(0xfd)),{v4:uuidv4}=require(a17_0x479262(0x13f)),ReconnectingWebSocket=require('reconnecting-websocket'),{getCredentialsPath,reportToGalactusAndSendToEDS,getAuthHeader,responseValidation,isUndefined,curlRequest,isTlsSupported,getSystemMetaData}=require(a17_0x479262(0x165)),{logger}=require('../../config/logger'),{HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,global_registry,messageTypes,WS_ENDPOINT,WS_EVENTS,ALL_SUPPORTED_CLOUD_PROVIDERS,AG_API_URL,DEFAULT_CLUSTER_DETAILS}=require(a17_0x479262(0x154)),{getCloudProviderObjectWithOutInit}=require(a17_0x479262(0x155)),webSocketUtils=require(a17_0x479262(0xf5)),{sendInstrumentationEvent}=require(a17_0x479262(0x147));function a17_0x4232(_0x4cc3c3,_0x1a198d){const _0x4ec6af=a17_0x4ec6();return a17_0x4232=function(_0x423202,_0x5571ca){_0x423202=_0x423202-0xa5;let _0x12389c=_0x4ec6af[_0x423202];return _0x12389c;},a17_0x4232(_0x4cc3c3,_0x1a198d);}function a17_0x4ec6(){const _0x2dd790=['uiYGj','getUTCHours','vcEsj','pSryl','hodfi','yUmHK','ibenZ','eaDXL','Use\x20an\x20existing\x20grid\x20profile\x20to\x20setup\x20the\x20Automation\x20Grid.\x20By\x20default,\x20configured\x20profile\x20is\x20used.','string','../../utils/utilityMethods','153005eNKmFX','\x20===\x0a\x0a','qWaSo','wWrcg','MVFKl','Pre-check\x20running\x20for\x20Cloud\x20-\x20','options','cloudProvider','description','oKJlp','Status:\x20','clusterRegion','XPEat','uvFcd','kjKyQ','ZiRza','SafEB','hsTOz','bstackAccesskey','693040TMaUuD','Jcixo','NFFMw','xwxJA','jVMaD','\x20\x20Code:\x20','init','qNXaz','push','kPJPJ','Cluster\x20details\x0a-----------------------\x0a','region','gridProfile','isTls1_2_SUPPORTED','neaOx','status','tDmRo','xooSn','wPTGX','response','qtAsa','dpzxN','INFO','198sRNpHP','error\x20stack\x20:\x20','QiUhx','method','BDykd','dHIae','CxFoA','HixzE','UGrYe','JPKeV','name','pre-check-grid-profile-empty','200Ircpig','Yonet','swSgS','JGqJM','DSnNW','ERROR','getUTCFullYear','help','xHzJw','gfYAL','xkMjV','LKszo','xRGJC','utf-8','\x20region\x20-\x20','JsjoL','stack','pre-check','\x20error\x20:\x20','fEXrc','IvmHe','NSrRr','hwRLB','TLSv1_2_client_method','bdiSI','getUTCMonth','DZIAW','code','QbmOf','info','authHeader','requestId','Cluster\x20','ORkaj','PgFuc','pVwlj','unable\x20to\x20verify\x20if\x20cluster\x20`','Failure','pre-check-cluster-args-not-passed','\x20data\x20:\x20','header','rDaiH','4GsSagT','Failed\x20in\x20pre-check!\x20Error:\x20','exit','log/report_','IcuoU','delay','FjYZM','hERZh','RSlfl','Invalid\x20input.\x20grid\x20profiles:\x20','680844jeevGH','Error\x20in\x20input\x20validation\x20while\x20pre-check\x20-\x20','Setting\x20cloud\x20provider\x20as\x20','`\x20,error\x20:\x20','clusterName','isClusterPresent','`\x20already\x20exists','qfZns','ESkFh','sNEIM','`\x20is\x20present\x20in\x20region\x20`','.\x20please\x20verify\x20the\x20grid\x20profile\x20name\x20and\x20try\x20again','jDbgw','Pass\x20the\x20region\x20for\x20existing\x20Kubernetes\x20Cluster.','grid-profile','usage','2294667epvhUI','58566dgBCuo','.\x20Please\x20provide\x20all\x20required\x20arguments.','wGoLQ','pre-check-failed','<UsernamePlaceholder>','TMZTB','stringify','UKTsZ','Message:\x20','bstackUsername','hRuaO','Cluster\x20`','VToYe','TxUtv','type','connectionTimeout','../../utils/webSocketUtils','jIhFO','LOG','cloud-provider','Error\x20Details:\x0a','4|3|1|2|0','eGAYh','GET','got','\x20\x20Message:\x20','Missing\x20required\x20arguments:\x20','\x20details\x20cannot\x20be\x20fetched\x0a\x0a','toLowerCase','ERmql','Create\x20a\x20grid\x20in\x20existing\x20Kubernetes\x20Cluster\x20on\x20AWS/Azure/GCP.','OLAhD','toolInstalledResp','cAqBZ','debug','sjhxH','Check\x20the\x20pre-requisites\x20needed\x20for\x20Automation\x20grid\x20setup','lGjUK','split','qAeOq','smckO','LaAmo','cloud-provider-not-supported','bwCCy','dummy-grid','WXJJK','User\x20Access','SeTav','ZaMAT','writeFileSync','6508040OVwgHy','16203kgudoI','tIQyX','credential-not-found','.txt','cmsEC','Browserstack','GwVkT','checkAccess','yFeWc','gySZT','PwFDE','bheAD','includes','gSatY','existsSync','aowks','Grid\x20profile\x20fetched\x20for\x20pre-check','waBFt','isTrialGridAccessible','will\x20be\x20created','Zaddh','IvPhe','pre_check','rGVFw','Report\x20saved\x20in\x20','PaTAQ','SRyzh','N/A','abWkR','message','Success','grid\x20profile\x20flow\x20','isCliToolInstalled','cluster-name','Pass\x20the\x20name\x20of\x20cloud\x20provider\x20for\x20existing\x20Kubernetes\x20Cluster.','Missing\x20required\x20arguments.\x20Please\x20provide\x20either\x20grid\x20profile\x20or\x20cluster\x20details\x20(cluser-name\x20,\x20cloud\x20provider\x20&\x20region',']\x20status\x20:\x20','RwlXo','is\x20already\x20present','uuid','mGBln','uQvkm','lqpdg','desc','stack\x20trace\x20','\x20\x20Stack:\x20','Whitelisted\x20browserstack','../../utils/instrumentationUtils','throwHttpErrors','WebSocket','password','wYVBK','lNMAX','JmBhV','CLOUD_PROVIDER','bikak','sendEventToBackend','LVlzA','MRWSn','pre-check-grid-called','../../config/constants','../../cloudproviders/utils','UrkuM','8uqJEGm','IIAlX','epilogue','error'];a17_0x4ec6=function(){return _0x2dd790;};return a17_0x4ec6();}exports['command']='grid',exports[a17_0x479262(0x143)]=a17_0x479262(0x109),exports['builder']=function(_0x7ed2eb){const _0x55fdf9=a17_0x479262,_0x3073b={};_0x3073b['sNEIM']=_0x55fdf9(0x103),_0x3073b[_0x55fdf9(0x177)]=_0x55fdf9(0x164),_0x3073b[_0x55fdf9(0xe7)]=_0x55fdf9(0x13a),_0x3073b[_0x55fdf9(0xb3)]=_0x55fdf9(0xe1),_0x3073b['ILasU']=_0x55fdf9(0x163),_0x3073b[_0x55fdf9(0x152)]=_0x55fdf9(0xa7);const _0x162a7c=_0x3073b,_0x1b7fa8={};_0x1b7fa8['description']=_0x162a7c[_0x55fdf9(0xdd)],_0x1b7fa8['type']=_0x162a7c[_0x55fdf9(0x177)];const _0x21af8d={};_0x21af8d[_0x55fdf9(0x16e)]=_0x162a7c[_0x55fdf9(0xe7)],_0x21af8d[_0x55fdf9(0xf3)]=_0x162a7c[_0x55fdf9(0x177)];const _0x81ab95={};_0x81ab95[_0x55fdf9(0x16e)]=_0x162a7c[_0x55fdf9(0xb3)],_0x81ab95['type']=_0x162a7c['hsTOz'];const _0x404cf2={};_0x404cf2['description']=_0x162a7c['ILasU'],_0x404cf2[_0x55fdf9(0xf3)]=_0x162a7c['hsTOz'];const _0x28564e={};return _0x28564e[_0x55fdf9(0x139)]=_0x1b7fa8,_0x28564e[_0x55fdf9(0xf8)]=_0x21af8d,_0x28564e['region']=_0x81ab95,_0x28564e[_0x55fdf9(0xe2)]=_0x404cf2,_0x7ed2eb['usage'](HELP_HEADER_MESSAGE[_0x55fdf9(0x12e)])[_0x55fdf9(0x159)](HELP_FOOTER_MESSAGE)[_0x55fdf9(0x16c)](_0x28564e)[_0x55fdf9(0xa7)](_0x162a7c[_0x55fdf9(0x152)])['argv'];};async function inputValidation(_0x46893e,_0xa45ad5){const _0x34b049=a17_0x479262,_0x3de3c8={'gfYAL':'region','TxUtv':_0x34b049(0xf9),'HixzE':_0x34b049(0x133),'JPKeV':_0x34b049(0x139),'wFBhq':'Create\x20a\x20grid\x20in\x20existing\x20Kubernetes\x20Cluster\x20on\x20AWS/Azure/GCP.','bheAD':'string','NFFMw':_0x34b049(0x13a),'mGBln':_0x34b049(0xe1),'xooSn':_0x34b049(0x163),'GwVkT':_0x34b049(0xa7),'PwFDE':_0x34b049(0x13e),'lNMAX':_0x34b049(0x12b),'xRGJC':_0x34b049(0x15a),'pSryl':_0x34b049(0x13b),'smckO':_0x34b049(0xf8),'TMZTB':function(_0x5bb9ad,_0x1b0dfb){return _0x5bb9ad+_0x1b0dfb;},'XDgvV':_0x34b049(0x136),'pVwlj':_0x34b049(0xc5),'qNXaz':function(_0x411431,_0x126399){return _0x411431||_0x126399;},'swSgS':function(_0x537e25,_0x561fab){return _0x537e25!==_0x561fab;},'ZRTyK':'HdxyR','BlhEY':'oXZkK','SafEB':_0x34b049(0x16a),'vcEsj':_0x34b049(0x17c),'PgFuc':function(_0x14d349,_0x23842e){return _0x14d349!==_0x23842e;},'tDmRo':_0x34b049(0x162),'waBFt':_0x34b049(0x18b),'jIhFO':_0x34b049(0x12c),'jKDhC':function(_0x1d9609,_0x1e3cb4){return _0x1d9609!==_0x1e3cb4;},'uQvkm':_0x34b049(0xba),'RcYNH':'GPWaw','bikak':function(_0x108e3d,_0x510957){return _0x108e3d>_0x510957;},'IzYAF':'zIUno','lGjUK':function(_0xa093c8,_0x53132b,_0x4ab9da,_0x296049,_0x2cdddd,_0x11f731,_0x3050b2,_0xc1a396){return _0xa093c8(_0x53132b,_0x4ab9da,_0x296049,_0x2cdddd,_0x11f731,_0x3050b2,_0xc1a396);},'Jcixo':_0x34b049(0x153),'VToYe':_0x34b049(0xc6),'ORkaj':function(_0x270f1a,_0x52875f){return _0x270f1a===_0x52875f;},'abWkR':_0x34b049(0x142),'mfwOs':'Invalid\x20input.\x20Currently\x20the\x20automation\x20grid\x20in\x20AWS,\x20AZURE\x20&\x20GCP\x20cloud\x20provider\x20is\x20supported\x20using\x20CLI.','qAeOq':_0x34b049(0x10f),'qtAsa':function(_0x553d27,_0x3a8fe7){return _0x553d27===_0x3a8fe7;},'cAqBZ':_0x34b049(0x16f),'dHIae':_0x34b049(0x132),'IvPhe':_0x34b049(0xd0),'PaTAQ':_0x34b049(0x102),'IIAlX':_0x34b049(0xfc),'hALbA':function(_0xd106ab,_0x3e5dab,_0x35a171){return _0xd106ab(_0x3e5dab,_0x35a171);},'QiUhx':function(_0x541ad8,_0x46c9be,_0x4dc2c5,_0x1ecc9c,_0x53fa13,_0x51da29){return _0x541ad8(_0x46c9be,_0x4dc2c5,_0x1ecc9c,_0x53fa13,_0x51da29);},'hodfi':_0x34b049(0xb1),'XPEat':_0x34b049(0xe2),'UrkuM':function(_0x4fd68c,_0x3e8c2c){return _0x4fd68c===_0x3e8c2c;},'bdiSI':_0x34b049(0x194),'Yonet':function(_0x4ae207,_0xdc0870){return _0x4ae207(_0xdc0870);},'inwbB':function(_0x3215f8,_0x4953af){return _0x3215f8===_0x4953af;},'CxFoA':_0x34b049(0xb6),'UGrYe':_0x34b049(0x19b),'uiYGj':_0x34b049(0x121),'kjKyQ':_0x34b049(0x173),'wYVBK':'ITglz','JGqJM':_0x34b049(0x128),'rDaiH':_0x34b049(0xdc),'rPTAR':_0x34b049(0x182),'yFeWc':'ucXwY'};let _0x320a5a;try{if(_0x3de3c8[_0x34b049(0x19e)](_0x3de3c8['ZRTyK'],_0x3de3c8['BlhEY'])){if(_0x46893e[_0x34b049(0xd8)]||_0x46893e[_0x34b049(0x16d)]||_0x46893e[_0x34b049(0x184)]){if(_0x3de3c8[_0x34b049(0x19e)](_0x3de3c8[_0x34b049(0x176)],_0x3de3c8[_0x34b049(0x15d)])){const _0xe312e5=[];!_0x46893e[_0x34b049(0xd8)]&&(_0x3de3c8['PgFuc'](_0x3de3c8[_0x34b049(0x189)],_0x3de3c8[_0x34b049(0x189)])?_0x44477e['push'](_0x3de3c8['gfYAL']):_0xe312e5[_0x34b049(0x181)](_0x3de3c8[_0x34b049(0x199)]));;!_0x46893e[_0x34b049(0x16d)]&&(_0x3de3c8[_0x34b049(0x19e)](_0x3de3c8[_0x34b049(0x129)],_0x3de3c8[_0x34b049(0xf6)])?_0xe312e5['push'](_0x3de3c8['smckO']):(_0x4451b5+=_0x3de3c8[_0x34b049(0xf2)],_0x5daa51+=_0x34b049(0xfe)+(_0x457216['message']||_0x3de3c8[_0x34b049(0x197)])+'\x0a',_0x41eb0b+=_0x34b049(0x17e)+(_0x5054c0[_0x34b049(0xbb)]||_0x3de3c8['HixzE'])+'\x0a',_0x501abd+=_0x34b049(0x145)+(_0x509212[_0x34b049(0xb0)]||_0x3de3c8[_0x34b049(0x197)])+'\x0a'));;!_0x46893e[_0x34b049(0x184)]&&(_0x3de3c8['jKDhC'](_0x3de3c8[_0x34b049(0x141)],_0x3de3c8['RcYNH'])?_0xe312e5[_0x34b049(0x181)](_0x3de3c8[_0x34b049(0xa9)]):_0x2e1e53[_0x34b049(0x181)](_0x3de3c8[_0x34b049(0x199)]));;_0x3de3c8[_0x34b049(0x14f)](_0xe312e5['length'],0x0)&&(_0x3de3c8[_0x34b049(0xc2)](_0x3de3c8['IzYAF'],_0x3de3c8['IzYAF'])?_0x2b6b5a+=_0x34b049(0xc0)+_0x2dae5f['clusterName']+'\x20details\x20cannot\x20be\x20fetched\x0a\x0a':(_0x320a5a=_0x34b049(0xff)+_0xe312e5['join'](',\x20')+_0x34b049(0xe6),await _0x3de3c8[_0x34b049(0x10a)](reportToGalactusAndSendToEDS,_0x46893e,_0xa45ad5,_0x320a5a,messageTypes[_0x34b049(0xa5)],_0x3de3c8[_0x34b049(0x17a)],_0x3de3c8[_0x34b049(0xf1)],_0x3de3c8[_0x34b049(0xac)]),logger[_0x34b049(0x15a)](_0x320a5a),process[_0x34b049(0xcc)](0x1)));if(!ALL_SUPPORTED_CLOUD_PROVIDERS[_0x34b049(0x124)](_0x46893e['cloudProvider'][_0x34b049(0x101)]())){if(_0x3de3c8[_0x34b049(0xc1)](_0x3de3c8[_0x34b049(0x134)],_0x3de3c8[_0x34b049(0x134)])){_0x320a5a=_0x3de3c8['mfwOs'],await _0x3de3c8[_0x34b049(0x10a)](reportToGalactusAndSendToEDS,_0x46893e,_0xa45ad5,_0x320a5a,messageTypes[_0x34b049(0xa5)],_0x3de3c8[_0x34b049(0x17a)],_0x3de3c8[_0x34b049(0x10c)],_0x3de3c8['xRGJC']),logger[_0x34b049(0x15a)](_0x320a5a);if(!_0x46893e[_0x34b049(0x16d)]){if(_0x3de3c8[_0x34b049(0x18d)](_0x3de3c8[_0x34b049(0x106)],_0x3de3c8[_0x34b049(0x195)])){const _0x8d34ba={};_0x8d34ba[_0x34b049(0x16e)]=_0x3de3c8['wFBhq'],_0x8d34ba[_0x34b049(0xf3)]=_0x3de3c8[_0x34b049(0x123)];const _0x175130={};_0x175130['description']=_0x3de3c8[_0x34b049(0x17b)],_0x175130[_0x34b049(0xf3)]=_0x3de3c8['bheAD'];const _0x4a6844={};_0x4a6844[_0x34b049(0x16e)]=_0x3de3c8[_0x34b049(0x140)],_0x4a6844['type']=_0x3de3c8[_0x34b049(0x123)];const _0x66e85f={};_0x66e85f['description']=_0x3de3c8[_0x34b049(0x18a)],_0x66e85f[_0x34b049(0xf3)]=_0x3de3c8[_0x34b049(0x123)];const _0x33a336={};return _0x33a336[_0x34b049(0x139)]=_0x8d34ba,_0x33a336[_0x34b049(0xf8)]=_0x175130,_0x33a336['region']=_0x4a6844,_0x33a336[_0x34b049(0xe2)]=_0x66e85f,_0x3038d2[_0x34b049(0xe3)](_0xa37a99[_0x34b049(0x12e)])[_0x34b049(0x159)](_0x4b1fa2)['options'](_0x33a336)[_0x34b049(0xa7)](_0x3de3c8[_0x34b049(0x11e)])['argv'];}else logger[_0x34b049(0xbd)](_0x34b049(0xd6)+DEFAULT_CLUSTER_DETAILS[_0x34b049(0x14e)]+'\x20'),_0x46893e[_0x34b049(0x16d)]=DEFAULT_CLUSTER_DETAILS[_0x34b049(0x14e)];}}else _0x4f30d0[_0x34b049(0x15a)](_0x34b049(0x191)+_0x15b311[_0x34b049(0x15a)][_0x34b049(0xb0)]);}global_registry['clusterName']=_0x46893e[_0x34b049(0xd8)],global_registry[_0x34b049(0x16d)]=_0x46893e[_0x34b049(0x16d)],global_registry[_0x34b049(0x171)]=_0x46893e[_0x34b049(0x184)];}else _0x58a081+=_0x34b049(0xc0)+_0x271c69['clusterName']+'\x20'+(_0x1755d9?_0x3de3c8[_0x34b049(0x122)]:_0x3de3c8[_0x34b049(0x14c)])+'\x0a\x0a';}else{if(_0x46893e[_0x34b049(0x185)]){if(_0x3de3c8['swSgS'](_0x3de3c8[_0x34b049(0x12d)],_0x3de3c8[_0x34b049(0x131)])){global_registry[_0x34b049(0x185)]=_0x46893e[_0x34b049(0x185)],logger[_0x34b049(0x107)](_0x34b049(0x137)+_0x46893e[_0x34b049(0x185)]);const _0x258f6c='https://'+AG_API_URL+'/packages/cli/get-all-grid-profiles',_0x111995={};_0x111995[_0x34b049(0x193)]=_0x3de3c8[_0x34b049(0x158)],_0x111995['headers']=global_registry[_0x34b049(0xbe)],_0x111995[_0x34b049(0x148)]=![];const _0x1a05b5=_0x111995,_0xd5e6b0=await _0x3de3c8['hALbA'](got,_0x258f6c,_0x1a05b5),_0x20e383=await _0x3de3c8[_0x34b049(0x192)](responseValidation,_0xd5e6b0,_0x3de3c8[_0x34b049(0x15f)],_0x3de3c8[_0x34b049(0x172)],_0x46893e,_0xa45ad5);let _0x511f7b={};if(_0x3de3c8[_0x34b049(0x156)](_0x20e383,0xc8)){if(_0x3de3c8[_0x34b049(0xc2)](_0x3de3c8[_0x34b049(0xb8)],_0x3de3c8[_0x34b049(0xb8)])){const _0x18787e={};_0x18787e[_0x34b049(0xf3)]=_0x328463['LOG'],_0x18787e[_0x34b049(0x135)]=_0xd84dd7,_0x5f09f7[_0x34b049(0x150)](_0x58f83e,_0x18787e,_0x3de3c8[_0x34b049(0xac)],!![]);}else{const _0xbbfbf7=JSON['parse'](_0xd5e6b0['body']),_0x53e231=_0xbbfbf7['find'](_0x2fb8e5=>_0x2fb8e5[_0x34b049(0x19a)]===_0x46893e[_0x34b049(0x185)])||null;_0x3de3c8[_0x34b049(0x19d)](isUndefined,_0x53e231)?_0x3de3c8['inwbB'](_0x3de3c8[_0x34b049(0x196)],_0x3de3c8[_0x34b049(0x196)])?(_0x320a5a=_0x34b049(0xd3)+_0x46893e['gridProfile']+_0x34b049(0xdf),await _0x3de3c8[_0x34b049(0x10a)](reportToGalactusAndSendToEDS,_0x46893e,_0xa45ad5,_0x320a5a,messageTypes[_0x34b049(0xa5)],_0x3de3c8[_0x34b049(0x17a)],_0x3de3c8[_0x34b049(0x198)],_0x3de3c8['xRGJC']),logger[_0x34b049(0x15a)](_0x320a5a),process[_0x34b049(0xcc)](0x1)):(_0x2fca80[_0x34b049(0x15a)](_0x3de3c8[_0x34b049(0x15e)]),_0x2157b6[_0x34b049(0xcc)](0x1)):_0x3de3c8['inwbB'](_0x3de3c8[_0x34b049(0x15b)],_0x3de3c8[_0x34b049(0x15b)])?_0x511f7b=_0x53e231:(_0x5a2b16[_0x34b049(0xbd)]('Setting\x20cloud\x20provider\x20as\x20'+_0x374fb2['CLOUD_PROVIDER']+'\x20'),_0x49362d[_0x34b049(0x16d)]=_0x22ebe6['CLOUD_PROVIDER']);}}else _0x3de3c8[_0x34b049(0x156)](_0x3de3c8[_0x34b049(0x174)],_0x3de3c8[_0x34b049(0x14b)])?_0x213866[_0x34b049(0x181)](_0x3de3c8[_0x34b049(0x10d)]):process[_0x34b049(0xcc)](0x1);const _0x19a438={};_0x19a438[_0x34b049(0xf3)]=WS_EVENTS[_0x34b049(0xf7)],_0x19a438[_0x34b049(0x135)]=_0x3de3c8[_0x34b049(0x19f)],webSocketUtils[_0x34b049(0x150)](_0xa45ad5,_0x19a438),global_registry[_0x34b049(0x16d)]=_0x511f7b['cloudProvider'],global_registry['clusterRegion']=_0x511f7b[_0x34b049(0x184)],global_registry[_0x34b049(0xd8)]=_0x511f7b[_0x34b049(0xd8)];}else _0x339ad9=_0x19d8a0;}else _0x3de3c8['jKDhC'](_0x3de3c8[_0x34b049(0xc9)],_0x3de3c8['rPTAR'])?(logger['error'](_0x3de3c8['pSryl']),process['exit'](0x1)):(_0x3bb6eb[_0x34b049(0xbd)]('['+_0x4e52a0+_0x34b049(0x13c)+_0x4c03a7[_0x34b049(0x188)]+_0x34b049(0xc7)+_0x580b99['data']+_0x34b049(0xb2)+_0x423500['error']),_0x1e1ff7['error']&&_0x51608f[_0x34b049(0x15a)](_0x34b049(0x191)+_0x178330['error'][_0x34b049(0xb0)]));}}else _0xb2dca6[_0x34b049(0xbd)]('Cluster\x20`'+_0xc04eae[_0x34b049(0xd8)]+'`\x20already\x20exists');}catch(_0x5166b0){if(_0x3de3c8[_0x34b049(0x19e)](_0x3de3c8[_0x34b049(0x120)],_0x3de3c8[_0x34b049(0x120)])){const {header:_0x5d7562,response:_0x200902}=_0x58d2e6,{status:_0x1588bf,data:_0x367ecb,error:_0x5e9319}=_0x200902;_0x200f8e+=_0x5d7562+'\x20#'+_0x3de3c8[_0x34b049(0xea)](_0x1cc6ae,0x1)+'\x0a',_0x561c4f+=_0x34b049(0x170)+(_0x1588bf?_0x3de3c8['XDgvV']:_0x3de3c8[_0x34b049(0xc3)])+'\x0a',_0x4694e9+='Message:\x20'+_0x3de3c8[_0x34b049(0x180)](_0x367ecb,_0x3de3c8[_0x34b049(0x197)])+'\x0a',_0x5e9319&&(_0x4ad7a5+=_0x3de3c8[_0x34b049(0xf2)],_0x2bd68e+=_0x34b049(0xfe)+(_0x5e9319[_0x34b049(0x135)]||_0x3de3c8['HixzE'])+'\x0a',_0x51a3b4+='\x20\x20Code:\x20'+(_0x5e9319[_0x34b049(0xbb)]||_0x3de3c8[_0x34b049(0x197)])+'\x0a',_0x3ea343+=_0x34b049(0x145)+(_0x5e9319['stack']||_0x3de3c8[_0x34b049(0x197)])+'\x0a'),_0xbb9b57+='\x0a\x0a';}else _0x320a5a=_0x34b049(0xd5)+_0x5166b0+':\x20'+_0x5166b0[_0x34b049(0xb0)],logger[_0x34b049(0x15a)](_0x320a5a),await _0x3de3c8[_0x34b049(0x10a)](reportToGalactusAndSendToEDS,_0x46893e,_0xa45ad5,_0x320a5a,messageTypes[_0x34b049(0xa5)],_0x3de3c8[_0x34b049(0x17a)],_0x3de3c8[_0x34b049(0x10c)],_0x3de3c8[_0x34b049(0xac)]),process[_0x34b049(0xcc)](0x1);}}function printResponse(_0x5512a8,_0x311753){const _0x322c86=a17_0x479262,_0x4cd493={};_0x4cd493[_0x322c86(0xa8)]=function(_0x22abee,_0x2ca017){return _0x22abee===_0x2ca017;},_0x4cd493['RSlfl']=_0x322c86(0xb5),_0x4cd493[_0x322c86(0x115)]='PYBfP';const _0x13397b=_0x4cd493;logger[_0x322c86(0xbd)]('['+_0x5512a8+']\x20status\x20:\x20'+_0x311753[_0x322c86(0x188)]+_0x322c86(0xc7)+_0x311753['data']+'\x20error\x20:\x20'+_0x311753[_0x322c86(0x15a)]),_0x311753[_0x322c86(0x15a)]&&(_0x13397b['xHzJw'](_0x13397b[_0x322c86(0xd2)],_0x13397b[_0x322c86(0x115)])?_0x137840[_0x322c86(0xcc)](0x1):logger[_0x322c86(0x15a)](_0x322c86(0x191)+_0x311753['error']['stack']));}async function generateReport(_0x31833e,_0x4daf80){const _0x2e9d30=a17_0x479262,_0x50c82e={'hRuaO':function(_0x37ee0f,_0x433083){return _0x37ee0f+_0x433083;},'JmBhV':_0x2e9d30(0x136),'ibenZ':_0x2e9d30(0xc5),'tIQyX':function(_0x4af4fb,_0x323021){return _0x4af4fb||_0x323021;},'qWaSo':_0x2e9d30(0x133),'UKTsZ':_0x2e9d30(0xf9),'bwCCy':_0x2e9d30(0x183),'rIgMC':function(_0x4a7995,_0x51ba5a){return _0x4a7995!=_0x51ba5a;},'gSatY':_0x2e9d30(0x13e),'ZiRza':'will\x20be\x20created','QbmOf':function(_0x5b7f5f){return _0x5b7f5f();}};let _0x4fc9e4='===\x20Precheck\x20Report\x20-\x20'+global_registry[_0x2e9d30(0x16d)]+_0x2e9d30(0x167);return _0x31833e['forEach']((_0x5e5724,_0x5ebac8)=>{const _0x5b6fd9=_0x2e9d30,{header:_0x16bf5d,response:_0x1c5de1}=_0x5e5724,{status:_0x57cf08,data:_0x2ec218,error:_0x26c1cc}=_0x1c5de1;_0x4fc9e4+=_0x16bf5d+'\x20#'+_0x50c82e[_0x5b6fd9(0xef)](_0x5ebac8,0x1)+'\x0a',_0x4fc9e4+=_0x5b6fd9(0x170)+(_0x57cf08?_0x50c82e[_0x5b6fd9(0x14d)]:_0x50c82e[_0x5b6fd9(0x161)])+'\x0a',_0x4fc9e4+=_0x5b6fd9(0xed)+_0x50c82e[_0x5b6fd9(0x119)](_0x2ec218,_0x50c82e[_0x5b6fd9(0x168)])+'\x0a',_0x26c1cc&&(_0x4fc9e4+=_0x50c82e[_0x5b6fd9(0xec)],_0x4fc9e4+='\x20\x20Message:\x20'+(_0x26c1cc[_0x5b6fd9(0x135)]||_0x50c82e[_0x5b6fd9(0x168)])+'\x0a',_0x4fc9e4+=_0x5b6fd9(0x17e)+(_0x26c1cc[_0x5b6fd9(0xbb)]||_0x50c82e[_0x5b6fd9(0x168)])+'\x0a',_0x4fc9e4+=_0x5b6fd9(0x145)+(_0x26c1cc[_0x5b6fd9(0xb0)]||_0x50c82e[_0x5b6fd9(0x168)])+'\x0a'),_0x4fc9e4+='\x0a\x0a';}),_0x4fc9e4+=_0x50c82e[_0x2e9d30(0x110)],_0x50c82e['rIgMC'](_0x4daf80,null)?_0x4fc9e4+=_0x2e9d30(0xc0)+global_registry[_0x2e9d30(0xd8)]+'\x20'+(_0x4daf80?_0x50c82e[_0x2e9d30(0x125)]:_0x50c82e[_0x2e9d30(0x175)])+'\x0a\x0a':_0x4fc9e4+=_0x2e9d30(0xc0)+global_registry['clusterName']+_0x2e9d30(0x100),_0x4fc9e4+=_0x50c82e[_0x2e9d30(0xbc)](getSystemMetaData),_0x4fc9e4;};exports['handler']=async function(_0x43de4b){const _0x12c247=a17_0x479262,_0x30cc1b={'cmsEC':function(_0x30bef9){return _0x30bef9();},'eGAYh':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','dpzxN':function(_0x356fc8,_0x4c7dab,_0x5189a1,_0x240e1e,_0x395d70,_0x42c259,_0x4ab3d6,_0xe15e30){return _0x356fc8(_0x4c7dab,_0x5189a1,_0x240e1e,_0x395d70,_0x42c259,_0x4ab3d6,_0xe15e30);},'hERZh':_0x12c247(0x153),'xkMjV':_0x12c247(0x11a),'sjhxH':'error','jDbgw':function(_0x2cc32e,_0x383734,_0x1ff781,_0x3f80f8,_0x54e716,_0x5e30e5,_0x453b69){return _0x2cc32e(_0x383734,_0x1ff781,_0x3f80f8,_0x54e716,_0x5e30e5,_0x453b69);},'jVMaD':function(_0x132540){return _0x132540();},'RwlXo':_0x12c247(0xe9),'LKszo':'<PasswordPlaceholder>','aowks':function(_0xacd7d2,_0xe7e75d,_0x5d0759){return _0xacd7d2(_0xe7e75d,_0x5d0759);},'DSnNW':function(_0x4a1845,_0x1c8370,_0x22b4b8,_0x405f7d,_0x5dd85d,_0x2a0342,_0x3374d9){return _0x4a1845(_0x1c8370,_0x22b4b8,_0x405f7d,_0x5dd85d,_0x2a0342,_0x3374d9);},'rGVFw':_0x12c247(0x111),'qfZns':_0x12c247(0x105),'JsjoL':_0x12c247(0xfa),'LaAmo':function(_0x3b3a5f,_0x50ebbc,_0x40965f,_0x49b93e,_0x256adc,_0x312f77,_0x2a64b9,_0x2ef9d6){return _0x3b3a5f(_0x50ebbc,_0x40965f,_0x49b93e,_0x256adc,_0x312f77,_0x2a64b9,_0x2ef9d6);},'PQCRM':function(_0x41fc78,_0x2fa587,_0x3e33ef){return _0x41fc78(_0x2fa587,_0x3e33ef);},'Sgfda':'accessResp','Wxlek':_0x12c247(0x12a),'OLAhD':function(_0xee2de5,_0x149b4d){return _0xee2de5(_0x149b4d);},'IcuoU':_0x12c247(0xb7),'yUmHK':function(_0x10c0cd,_0x104b69,_0x25cdb7){return _0x10c0cd(_0x104b69,_0x25cdb7);},'WXJJK':_0x12c247(0x186),'LVlzA':'Tool\x20Installed','IvmHe':_0x12c247(0x113),'SeTav':_0x12c247(0x146),'iKcxL':'SSL\x20Configured','PMiAZ':function(_0xf19277,_0x4e581b){return _0xf19277+_0x4e581b;},'neaOx':_0x12c247(0xad),'wWrcg':_0x12c247(0xe8)};let _0x4bd858,_0x3c6e7a;try{global_registry[_0x12c247(0xbf)]=_0x30cc1b[_0x12c247(0x11c)](uuidv4);!fs[_0x12c247(0x126)](_0x30cc1b[_0x12c247(0x11c)](getCredentialsPath))&&(_0x3c6e7a=_0x30cc1b[_0x12c247(0xfb)],logger[_0x12c247(0x15a)](_0x3c6e7a),await _0x30cc1b[_0x12c247(0x18e)](reportToGalactusAndSendToEDS,_0x43de4b,_0x4bd858,_0x3c6e7a,messageTypes[_0x12c247(0xa5)],_0x30cc1b['hERZh'],_0x30cc1b[_0x12c247(0xaa)],_0x30cc1b[_0x12c247(0x108)]),process[_0x12c247(0xcc)](0x1));_0x30cc1b[_0x12c247(0xe0)](sendInstrumentationEvent,_0x43de4b,_0x30cc1b[_0x12c247(0xd1)],messageTypes[_0x12c247(0x18f)],null,null,_0x43de4b);const _0x38ce22=JSON['parse'](fs['readFileSync'](_0x30cc1b[_0x12c247(0x17d)](getCredentialsPath)));global_registry[_0x12c247(0xee)]=_0x38ce22['Browserstack']['username'],global_registry[_0x12c247(0x178)]=_0x38ce22['Browserstack'][_0x12c247(0x14a)];const _0x26be09=WS_ENDPOINT['replace'](_0x30cc1b[_0x12c247(0x13d)],_0x38ce22[_0x12c247(0x11d)]['username'])['replace'](_0x30cc1b[_0x12c247(0xab)],_0x38ce22[_0x12c247(0x11d)][_0x12c247(0x14a)]),_0x521f19={};_0x521f19[_0x12c247(0x149)]=ws,_0x521f19[_0x12c247(0xf4)]=0x36ee80,_0x4bd858=new ReconnectingWebSocket(_0x26be09,[],_0x521f19),global_registry[_0x12c247(0xbe)]=_0x30cc1b[_0x12c247(0x127)](getAuthHeader,global_registry[_0x12c247(0xee)],global_registry[_0x12c247(0x178)]),await _0x30cc1b[_0x12c247(0x127)](inputValidation,_0x43de4b,_0x4bd858),logger[_0x12c247(0xbd)](_0x12c247(0x16b)+global_registry[_0x12c247(0x16d)]+_0x12c247(0xae)+global_registry['clusterRegion']);let _0x435e28=await _0x30cc1b[_0x12c247(0x1a0)](getCloudProviderObjectWithOutInit,global_registry[_0x12c247(0x16d)],global_registry[_0x12c247(0xd8)],_0x30cc1b[_0x12c247(0x12f)],_0x4bd858,webSocketUtils,_0x43de4b);const _0x25aa11=await _0x435e28[_0x12c247(0x138)]();_0x30cc1b[_0x12c247(0x127)](printResponse,_0x30cc1b[_0x12c247(0xdb)],_0x25aa11),_0x435e28=await _0x435e28[_0x12c247(0x17f)]();let _0x280734=![];try{_0x280734=await _0x435e28[_0x12c247(0xd9)]();}catch(_0x68a410){const _0x2d78f5=_0x30cc1b[_0x12c247(0xaf)][_0x12c247(0x10b)]('|');let _0x3f2d3c=0x0;while(!![]){switch(_0x2d78f5[_0x3f2d3c++]){case'0':await _0x30cc1b[_0x12c247(0x10e)](reportToGalactusAndSendToEDS,_0x43de4b,_0x4bd858,_0x3c6e7a,messageTypes['ERROR'],_0x30cc1b['hERZh'],'cluster-check-failed-'+global_registry['cloudProvider'],_0x30cc1b['sjhxH']);continue;case'1':logger['error'](_0x3c6e7a);continue;case'2':_0x3c6e7a+='\x0a'+JSON['stringify'](_0x68a410[_0x12c247(0xb0)]);continue;case'3':_0x280734=null;continue;case'4':_0x3c6e7a=_0x12c247(0xc4)+global_registry[_0x12c247(0xd8)]+_0x12c247(0xde)+global_registry['clusterRegion']+_0x12c247(0xd7)+_0x68a410;continue;}break;}}_0x280734&&logger['info'](_0x12c247(0xf0)+global_registry['clusterName']+_0x12c247(0xda));const _0x52d905=await _0x435e28[_0x12c247(0x11f)]();_0x30cc1b['PQCRM'](printResponse,_0x30cc1b['Sgfda'],_0x52d905);const _0x394552=await _0x30cc1b[_0x12c247(0x11c)](curlRequest);_0x30cc1b['aowks'](printResponse,_0x30cc1b['Wxlek'],_0x394552);const _0x34b84e=await _0x30cc1b[_0x12c247(0x104)](isTlsSupported,_0x30cc1b[_0x12c247(0xce)]);_0x30cc1b['yUmHK'](printResponse,_0x30cc1b[_0x12c247(0x112)],_0x34b84e);const _0x14c6a0={};_0x14c6a0['header']=_0x30cc1b[_0x12c247(0x151)],_0x14c6a0[_0x12c247(0x18c)]=_0x25aa11;const _0x1be203={};_0x1be203[_0x12c247(0xc8)]=_0x30cc1b[_0x12c247(0xb4)],_0x1be203[_0x12c247(0x18c)]=_0x52d905;const _0x565f4f={};_0x565f4f[_0x12c247(0xc8)]=_0x30cc1b[_0x12c247(0x114)],_0x565f4f[_0x12c247(0x18c)]=_0x394552;const _0xa4227d={};_0xa4227d[_0x12c247(0xc8)]=_0x30cc1b['iKcxL'],_0xa4227d['response']=_0x34b84e;const _0x46f03a=[_0x14c6a0,_0x1be203,_0x565f4f,_0xa4227d],_0x524025=await _0x30cc1b[_0x12c247(0x160)](generateReport,_0x46f03a,_0x280734),_0x52344f=new Date(),_0x4d772e=_0x52344f[_0x12c247(0xa6)]()+'_'+_0x30cc1b['PMiAZ'](_0x52344f[_0x12c247(0xb9)](),0x1)+'_'+_0x52344f['getUTCDate']()+'_'+_0x52344f[_0x12c247(0x15c)]()+'_'+_0x52344f['getUTCMinutes'](),_0x1341a7=_0x12c247(0xcd)+_0x4d772e+_0x12c247(0x11b);fs[_0x12c247(0x116)](_0x1341a7,_0x524025,_0x30cc1b[_0x12c247(0x187)]),logger[_0x12c247(0xbd)](_0x12c247(0x130)+_0x1341a7),process['exit'](0x0);}catch(_0x10bfe1){let _0x367cfa=_0x12c247(0xcb)+_0x10bfe1+'\x20';logger['error'](_0x367cfa),_0x367cfa+='\x0a'+JSON[_0x12c247(0xeb)](_0x10bfe1[_0x12c247(0xb0)]),logger[_0x12c247(0x107)](_0x12c247(0x144)+_0x10bfe1[_0x12c247(0xb0)]);if(_0x4bd858){const _0x377073={};_0x377073[_0x12c247(0xf3)]=WS_EVENTS['LOG'],_0x377073[_0x12c247(0x135)]=_0x367cfa,webSocketUtils[_0x12c247(0x150)](_0x4bd858,_0x377073,_0x30cc1b[_0x12c247(0x108)],!![]);}await webSocketUtils[_0x12c247(0xcf)](0x7d0);const _0x267f28={};_0x267f28['error']=_0x367cfa,await _0x30cc1b[_0x12c247(0xe0)](sendInstrumentationEvent,_0x43de4b,_0x30cc1b[_0x12c247(0xd1)],messageTypes[_0x12c247(0xa5)],_0x30cc1b[_0x12c247(0x169)],_0x267f28,_0x43de4b),process[_0x12c247(0xcc)](0x1);}};