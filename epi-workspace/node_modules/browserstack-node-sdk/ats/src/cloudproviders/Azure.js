const a1_0x3b4a38=a1_0x1383;(function(_0xd760ad,_0x4c41e){const _0x3aded3=a1_0x1383,_0x28e3c9=_0xd760ad();while(!![]){try{const _0x236f09=-parseInt(_0x3aded3(0x2a1))/0x1+parseInt(_0x3aded3(0x1c5))/0x2+parseInt(_0x3aded3(0x1ed))/0x3*(parseInt(_0x3aded3(0x291))/0x4)+-parseInt(_0x3aded3(0x200))/0x5*(parseInt(_0x3aded3(0x141))/0x6)+-parseInt(_0x3aded3(0x20a))/0x7+parseInt(_0x3aded3(0x17c))/0x8*(parseInt(_0x3aded3(0x2a4))/0x9)+-parseInt(_0x3aded3(0x225))/0xa;if(_0x236f09===_0x4c41e)break;else _0x28e3c9['push'](_0x28e3c9['shift']());}catch(_0x4b513c){_0x28e3c9['push'](_0x28e3c9['shift']());}}}(a1_0x3688,0x53cb9));function a1_0x1383(_0x1a6f1d,_0x26edea){const _0x3688c4=a1_0x3688();return a1_0x1383=function(_0x1383d4,_0x489bef){_0x1383d4=_0x1383d4-0x11e;let _0x36610d=_0x3688c4[_0x1383d4];return _0x36610d;},a1_0x1383(_0x1a6f1d,_0x26edea);}const fs=require('fs'),path=require('path'),yaml=require(a1_0x3b4a38(0x259)),{logger}=require(a1_0x3b4a38(0x193)),{CloudProvider}=require('./CloudProvider'),{deleteRoutingDeps,deleteAgent}=require(a1_0x3b4a38(0x2b3)),{AZURE,WS_EVENTS,global_registry}=require('../config/constants'),PERMISSIONS=require(a1_0x3b4a38(0x1a2)),{ClientSecretCredential}=require(a1_0x3b4a38(0x1f5)),{NetworkManagementClient}=require(a1_0x3b4a38(0x2f8)),{StorageManagementClient}=require(a1_0x3b4a38(0x14a)),{AuthorizationManagementClient}=require(a1_0x3b4a38(0x14b)),{ResourceManagementClient}=require('@azure/arm-resources'),{ContainerServiceClient}=require(a1_0x3b4a38(0x296)),{runCommand}=require(a1_0x3b4a38(0x167));function a1_0x3688(){const _0x15e88e=['lXGBX','DPfmF','DqiFp','SYKQn','getById','checkAccess','EEbmk','mmfxs','QBztY','QiVwx','LOG','message','Hisla','1344906cGndvi','clusterAutoUpgrade','QUqCs','Fkivd','XtegD','XpPjs','FBfzg','dyMuF','HHQpo','.\x20Please\x20Check\x20and\x20try\x20again,\x20error:\x20','YoUes','IwcQD','loadBalancer','getGridHostname','ivfji','ePhCo','HhpeC','ChLPh','Managed\x20identity\x20already\x20exists,\x20skipping','jnlBD','zTCaK','qjvLg','zXkdt','Incremental','rqgZt','createOtherResources','SjXem','uORlO','okcnT','parameters','xkfuQ','PRKbX','qpsBj','sendAzureInfoToHST','QwiEz','FFVJF','nTVmC','metadata','debug','lHIoG','1969557TbfkCQ','No\x20role\x20defintion\x20found\x20for\x20the\x20attached\x20roles','tags','enabled','PqXjg','hostname','YutPN','PliJC','@azure/identity','No\x20service\x20principal\x20found','NrmUG','actionPermission\x20:\x20','LLrQB','VNFVH','\x20CLIENT\x20ID:\x20','oQaxq','isManagedIdentityPresent','AWita','vjqPN','215zGAPqt','KtPee','zrzuM','map','setupHubHa','azureresources','description','JVKkG','NihCa','uBLlF','1176539pGlKTX','Bearer\x20','FjSKG','CYigm','dmikd','LVcsX','No\x20attached\x20role\x20for\x20the\x20client\x20key','EiQcd','XemaV','qxEZV','NeVsQ','RdzeJ','pWRyd','createFederatedAccountForHubHA','cUPfG','https://graph.microsoft.com/.default','Disk\x20size\x20(in\x20GiB)\x20to\x20provision\x20for\x20each\x20of\x20the\x20agent\x20pool\x20nodes.\x20This\x20value\x20ranges\x20from\x200\x20to\x201023.\x20Specifying\x200\x20will\x20apply\x20the\x20default\x20disk\x20size\x20for\x20that\x20agentVMSize.','RESOURCES','fAoAR','goLcW','cuapy','managedClusters','RJKDQ','sendEventToBackend','oHvyd','getToken','Creating\x20Azure\x20storage\x20account','4466950nQgePL','PNWyx','headers','YWDLk','FuStv','XiLqX','OqgaB','networkClient','SyDIs','Content-Type','bvQBJ','RiYIL','NkEgB','MJKCK','DceOM','data','nXTdh','LuINY','Qmnfr','RVtCj','createCluster','roleDefinitions','utf-8','AYolR','deleteCluster','stringify','assignedTo(\x27','gQnUZ','zbfOq','XEkjI','znPmw','length','dSJrk','riucX','fOHuR','kzcCz','FKgGr','adzXg','clusterInfo','mxpsZ','FSGEV','\x20RESOURCE\x20GROUP:\x20','getStorageAccountName','HHNpY','Jvxvg','Wbqxr','FUgkv','oQvsI','JulgZ','split','oAIgH','Cannot\x20find\x20VPC\x20','js-yaml','stack','rwzQe','rzveP','KQuWH','rLsbI','qCwSg','s3Bucket','virtualNetworks','TVglE','createOrUpdate','maxNodes','turboscale','TwLBq','BAvRE','vpcInfo','qtCyp','upbOt','permissions','HSwtk','turboscale-storageaccount-deployment','cloudProvider','rules','rvauO','createManagedIdentity','ksXxh','parse','Mslbn','2023-01-31','rwVpc','yUdNi','gQRzW','gCHLS','isCliToolInstalled','qLxoP','RBQSE','wlTDF','GET','oiKhs','hub','azLJE','variables','updateClusterAlreadyPresent','clientSecret','hGCsL','turboscale-cluster-deployment','QTbED','PNyMu','getHeader','sMmkt','getUserInput','toLowerCase','VZVkT','subscriptionId','ingress','wSOhV','4hIDqIQ','AESWe','pKorW','Action\x20permission\x20list\x20is\x20empty\x0a','KgZHI','@azure/arm-containerservice','resourceGroups','application/json','isClusterPresent','disableLocalAccounts','turboscale-identity-deployment','tenantId','Deleting\x20the\x20cluster\x20','Cannot\x20find\x20subnets\x20','InASa','fUVNx','155595nYONWX','[getResourceClientId]\x20Failed\x20to\x20fetch\x20clientId.\x20Error:\x20','Enabling\x20OIDC\x20Issuer\x20for\x20the\x20cluster','67923agvIqF','setClients','username','IpjPA','log','hUnTk','vckpU','YaZyS','JxcXq','yZrHl','securityProfile','KXvYA','rGCVH','wGtLB','AjkfS','../utils/gridComponents','uvLwL','Blob\x20delete\x20lifecycle','rws','policy','isStorageAccountPresent','gridName','Creating\x20Azure\x20managed\x20identity','true','SJYGi','BDJFX','Creating\x20Azure\x20federated\x20identity','Created\x20Azure\x20federated\x20identity\x20&\x20Storage\x20Class\x20for\x20Hub\x20Ha','webSocketUtils','fPnMj','nvKGY','clusterRegion','[concat(\x27/subscriptions/\x27,\x20subscription().subscriptionId,\x20\x27/resourceGroups/\x27,\x20resourceGroup().name,\x20\x27/providers/Microsoft.Network/virtualNetworks/\x27,\x20parameters(\x27vpcName\x27),\x20\x27/subnets/\x27,\x20parameters(\x27subnetName\x27))]','mgqQr','getResourceGroups','filter','toUpperCase','SzDba','Ukuqb','FGNhk','clientId','templates','SxCOZ','storageAccounts','isBrowserstackCluster','node','getResourceClientId','mSTjb','listClusterAdminCredentials','riJjG','HYtwp','VrYZY','join','info','createStorageAccount','pcMdC','agentPoolProfiles','WsoMj','kubeconfigs','includes','IJtRs','pbGAL','exit','blobTypes','KaeEd','slice','Received\x20response\x20-\x20','value','principalId','KXqnk','dErip','cloudProviderClientId','.\x20Error:\x20','listAll','turboscale-managed-identity-','PSGtP','Role\x20definition\x20response\x20list\x20\x20:\x20\x20','deployments','userInstanceType','Authorization','cFcDd','cloudProviderSubscriptionId','lpcXx','VcjdW','@azure/arm-network','instanceType','virrF','toString','GVVlf','RwuDX','workloadIdentity','VTQOI','nrsWw','denied','oQcFc','false','lZAhE','DAdps','type','default','YzDHQ','JOjRs','bstackUsername','resources','bxmxv','mVmYX','fRnPV','authClient','ULoun','Pmqsr','push','allowed','gHpaw','[variables(\x27vnetSubnetID\x27)]','KIJav','uALXJ','uycjV','cnyxJ','pEVcm','bBFhn','OEipv','AkAYl','ImJWK','LdRZZ','qKtsT','Creating\x20required\x20resources\x20-\x20AKS\x20Cluster,\x20Storage\x20account\x20and\x20Managed\x20identity','resourceClient','tlYDO','ACTION','yTiOp','\x20CLIENT\x20SECRET:\x20','properties','clusterName','90078jVawMM','cloudProviderResourceGroup','fwiKw','tKrdK','Enabling\x20Local\x20account\x20for\x20the\x20cluster','prmni','GcNhk','gjjSe','xiwsx','@azure/arm-storage','@azure/arm-authorization','Jhyyz','managedidentity.json','getKubeConfigData','turboscale-federated-deployment','json','dhQTr','hATXv','roEBm','cloudProviderTenantId','vpcName','oidcIssuerProfile','error','foBdI','boOwO','readFileAsync','containerClient','eeukx','VPMFC','tVKNZ','HhRVb','Storage\x20account\x20already\x20exists,\x20skipping','LDcbW','DkzPY','storageClient','isSubnetsValid','NObhc','AEfqy','../utils/utilityMethods','hDWGl','dXfSK','string','LvRGn','KebEd','getClusterInfo','AHXme','rWLxx','zyawT','JeuKL','createFederatedAccount','NcLkL','emJAG','userMaxNodes','kPEEC','forEach','cloudProviderClientSecret','VVaXh','nGPsb','issuerURL','456vrlWSY','storageAccountName','definition','pjGKx','YeAug','ZdIuw','ttSQi','WlIoq','VehoR','list','OKpUy','location','IqHyr','accessKey','pcoyr','isVPCPresent','4|2|0|3|1|5','TjrGt','No\x20CLI\x20tool\x20required','listByResourceGroup','Wrong\x20input!\x20Please\x20try\x20again\x20with\x20a\x20valid\x20input.','pJbxo','cloudProviderName','../config/logger','subnetName','bUWkY','name','setupNewCluster','getPrincipalIdFromClientId','beginCreateOrUpdateAndWait','lvOwX','zgLuu','ZFqfi','dwyxU','vnJYc','Ceszb','LpAAS','BJPiC','../permissions/AZURE.json','ziWuy','xacgi','VpgnH','UwLgl','setCachedCredsInRegistry','CQlTy','resourceGroup','ttwxU','browserstack:managedBy','fGdtd','status','blockBlob','ngDTp','actions','pLhpX','Juoka','federatedidentity','wYnsN','ZdaMe','yUGxN','BrowserStack'];a1_0x3688=function(){return _0x15e88e;};return a1_0x3688();}class AzureCloudProvider extends CloudProvider{constructor(_0x1fd669,_0x4da426,_0x35fefa,_0x34270c){const _0x2291a1=a1_0x3b4a38,_0x24ba5a={};_0x24ba5a[_0x2291a1(0x1d9)]='0|5|3|7|4|1|2|6';const _0x1bb9aa=_0x24ba5a,_0x1a3b59=_0x1bb9aa[_0x2291a1(0x1d9)][_0x2291a1(0x256)]('|');let _0x6084a7=0x0;while(!![]){switch(_0x1a3b59[_0x6084a7++]){case'0':super(AZURE,_0x1fd669,_0x4da426,_0x35fefa,_0x34270c);continue;case'1':this['resourceClient']=null;continue;case'2':this[_0x2291a1(0x22c)]=null;continue;case'3':this['clusterInfo']=null;continue;case'4':this[_0x2291a1(0x163)]=null;continue;case'5':this['cred']=null;continue;case'6':this['authClient']=null;continue;case'7':this[_0x2291a1(0x15b)]=null;continue;}break;}}async['init'](){return await super['init'](),this;}[a1_0x3b4a38(0x2a5)](){const _0xc55cb8=a1_0x3b4a38,_0x12185f=new ClientSecretCredential(global_registry[_0xc55cb8(0x154)],global_registry[_0xc55cb8(0x2eb)],global_registry[_0xc55cb8(0x178)]);this[_0xc55cb8(0x15b)]=new ContainerServiceClient(_0x12185f,global_registry['cloudProviderSubscriptionId']),this[_0xc55cb8(0x163)]=new StorageManagementClient(_0x12185f,global_registry[_0xc55cb8(0x2f5)]),this[_0xc55cb8(0x13a)]=new ResourceManagementClient(_0x12185f,global_registry[_0xc55cb8(0x2f5)]),this[_0xc55cb8(0x22c)]=new NetworkManagementClient(_0x12185f,global_registry['cloudProviderSubscriptionId']),this[_0xc55cb8(0x127)]=new AuthorizationManagementClient(_0x12185f,global_registry[_0xc55cb8(0x2f5)]),this['cred']=_0x12185f;}[a1_0x3b4a38(0x24f)](){const _0x2df0ba=a1_0x3b4a38,_0x1b2e14={};_0x1b2e14[_0x2df0ba(0x166)]=function(_0x341785,_0x42f071){return _0x341785+_0x42f071;},_0x1b2e14[_0x2df0ba(0x26c)]=_0x2df0ba(0x265),_0x1b2e14[_0x2df0ba(0x28a)]=function(_0x125624,_0x166fbb){return _0x125624-_0x166fbb;};const _0x2105d4=_0x1b2e14,_0x5e2c2d=global_registry[_0x2df0ba(0x260)][_0x2df0ba(0x256)]('-'),_0x269bea=_0x2105d4[_0x2df0ba(0x166)](_0x2105d4[_0x2df0ba(0x26c)],_0x5e2c2d[_0x2105d4[_0x2df0ba(0x28a)](_0x5e2c2d[_0x2df0ba(0x244)],0x1)])[_0x2df0ba(0x2e5)](0x0,0x18);return _0x269bea[_0x2df0ba(0x28c)]();}[a1_0x3b4a38(0x1a7)](_0x469bd9){const _0x324bd1=a1_0x3b4a38,_0x220f83={};_0x220f83['zXkdt']='0|2|5|1|4|3';const _0x139106=_0x220f83,_0xf61b7d=_0x139106[_0x324bd1(0x1db)][_0x324bd1(0x256)]('|');let _0x2e8820=0x0;while(!![]){switch(_0xf61b7d[_0x2e8820++]){case'0':global_registry[_0x324bd1(0x2eb)]=_0x469bd9[this[_0x324bd1(0x192)]]['clientId'];continue;case'1':global_registry[_0x324bd1(0x2f5)]=_0x469bd9[this[_0x324bd1(0x192)]]['subscriptionId'];continue;case'2':global_registry[_0x324bd1(0x178)]=_0x469bd9[this[_0x324bd1(0x192)]][_0x324bd1(0x284)];continue;case'3':this[_0x324bd1(0x2a5)]();continue;case'4':global_registry[_0x324bd1(0x142)]=_0x469bd9[this['cloudProviderName']][_0x324bd1(0x1a9)];continue;case'5':global_registry[_0x324bd1(0x154)]=_0x469bd9[this[_0x324bd1(0x192)]][_0x324bd1(0x29c)];continue;}break;}}async[a1_0x3b4a38(0x28b)](_0x20092c,_0x34a7fe){const _0x29b9ad=a1_0x3b4a38,_0x1f97ac={'nGPsb':_0x29b9ad(0x190),'dhQTr':_0x29b9ad(0x2a3),'BoRGe':function(_0x4e62dd,_0x50f5b9,_0x5a4887){return _0x4e62dd(_0x50f5b9,_0x5a4887);},'qLxoP':function(_0x1a714a,_0x9a228e){return _0x1a714a(_0x9a228e);},'uycjV':function(_0x2ab738,_0x5fa1d6){return _0x2ab738(_0x5fa1d6);},'DkzPY':function(_0x25d096,_0x115b1c){return _0x25d096(_0x115b1c);},'vYxte':function(_0x5c198e,_0x4acb43){return _0x5c198e===_0x4acb43;},'rzveP':function(_0x336ad8,_0x58f0ee){return _0x336ad8!==_0x58f0ee;},'dXfSK':_0x29b9ad(0x2ce),'JVKkG':function(_0x6bb90f,_0x580a96){return _0x6bb90f(_0x580a96);},'dSJrk':function(_0x4aaaf3,_0x349cc4){return _0x4aaaf3===_0x349cc4;},'FSGEV':function(_0x592803,_0x478b72){return _0x592803!==_0x478b72;},'Pmqsr':_0x29b9ad(0x28d),'okcnT':_0x29b9ad(0x241),'SJYGi':function(_0x262521,_0x5c98a4){return _0x262521(_0x5c98a4);},'LDcbW':function(_0x3b25a4,_0x1283d5){return _0x3b25a4===_0x1283d5;},'Ukuqb':function(_0x47fe88,_0x372d27){return _0x47fe88===_0x372d27;},'xiwsx':function(_0xaab95f,_0x375320){return _0xaab95f!==_0x375320;},'mxpsZ':_0x29b9ad(0x16e),'ZdIuw':function(_0x1c5d99,_0x30f958){return _0x1c5d99===_0x30f958;},'YoUes':_0x29b9ad(0x19a),'Juoka':function(_0x317934,_0x140813){return _0x317934!==_0x140813;},'zrzuM':_0x29b9ad(0x2d6),'ePhCo':function(_0x50ad8e,_0x4ec06d){return _0x50ad8e<_0x4ec06d;},'wYnsN':function(_0x9433af,_0x474451){return _0x9433af===_0x474451;},'raBeK':_0x29b9ad(0x1a3),'KgZHI':_0x29b9ad(0x174),'RdzeJ':function(_0x235092,_0x5bdf31){return _0x235092+_0x5bdf31;},'Jedtd':'Please\x20enter\x20numeric\x20choice\x20(must\x20exactly\x20match\x20list\x20item):\x20','VpgnH':function(_0x1b8643,_0x5ee164){return _0x1b8643<=_0x5ee164;},'nsFJm':function(_0x44ce07,_0x1216b3){return _0x44ce07>_0x1216b3;},'lZAhE':_0x29b9ad(0x2c1),'SyDIs':function(_0x5b73b1,_0x50e067){return _0x5b73b1-_0x50e067;}},_0x4ff919=this[_0x29b9ad(0x192)][_0x29b9ad(0x2c8)](),_0x3a93b7=await _0x1f97ac[_0x29b9ad(0x27b)](_0x20092c,_0x4ff919+_0x29b9ad(0x1fb)),_0x4fb40b=await _0x1f97ac[_0x29b9ad(0x27b)](_0x20092c,_0x4ff919+_0x29b9ad(0x13e)),_0x4e92a6=await _0x1f97ac[_0x29b9ad(0x130)](_0x20092c,_0x4ff919+'\x20TENANT\x20ID:\x20'),_0x5ad387=await _0x1f97ac[_0x29b9ad(0x162)](_0x20092c,_0x4ff919+'\x20SUBSCRIPTION\x20ID:\x20');global_registry[_0x29b9ad(0x2eb)]=_0x3a93b7,global_registry[_0x29b9ad(0x178)]=_0x4fb40b,global_registry['cloudProviderTenantId']=_0x4e92a6,global_registry[_0x29b9ad(0x2f5)]=_0x5ad387,this[_0x29b9ad(0x2a5)]();const _0x56a98f=await this[_0x29b9ad(0x2c6)](),_0x56f41e=_0x56a98f[_0x29b9ad(0x244)];let _0x375853;if(_0x1f97ac['vYxte'](_0x56f41e,0x0))_0x1f97ac[_0x29b9ad(0x25c)](_0x1f97ac[_0x29b9ad(0x169)],_0x1f97ac[_0x29b9ad(0x169)])?(_0xfcfb24[_0x29b9ad(0x157)](_0x1f97ac[_0x29b9ad(0x17a)]),_0xa1a719[_0x29b9ad(0x2e2)](0x1)):_0x375853=await _0x1f97ac['JVKkG'](_0x20092c,_0x4ff919+_0x29b9ad(0x24e));else{if(_0x1f97ac[_0x29b9ad(0x245)](_0x56f41e,0x1)){if(_0x1f97ac['FSGEV'](_0x1f97ac[_0x29b9ad(0x129)],_0x1f97ac[_0x29b9ad(0x1e1)])){const _0x1bd851=await _0x1f97ac[_0x29b9ad(0x2bc)](_0x20092c,'Found\x20only\x20one\x20resource\x20group:\x20'+_0x56a98f[0x0]+'\x0aDo\x20you\x20want\x20to\x20proceed\x20with\x20this\x20resource\x20group\x20(y/n)?\x20');(_0x1f97ac['dSJrk'](_0x1bd851,undefined)||_0x1f97ac[_0x29b9ad(0x161)](_0x1bd851,null)||!(_0x1f97ac['LDcbW'](_0x1bd851['toLowerCase'](),'y')||_0x1f97ac[_0x29b9ad(0x2ca)](_0x1bd851['toLowerCase'](),'n')))&&(_0x1f97ac[_0x29b9ad(0x149)](_0x1f97ac[_0x29b9ad(0x24c)],_0x1f97ac[_0x29b9ad(0x24c)])?_0x3b9286[_0x29b9ad(0x12a)](..._0x68daaf['actions']):(console[_0x29b9ad(0x157)](_0x1f97ac[_0x29b9ad(0x17a)]),process[_0x29b9ad(0x2e2)](0x1)));if(_0x1f97ac[_0x29b9ad(0x161)](_0x1bd851[_0x29b9ad(0x28c)](),'n')){if(_0x1f97ac[_0x29b9ad(0x181)](_0x1f97ac['YoUes'],_0x1f97ac[_0x29b9ad(0x1cf)]))process['exit'](0x0);else return!![];}_0x375853=_0x56a98f[0x0];}else{_0x52a691[_0x29b9ad(0x2d9)](_0x1f97ac[_0x29b9ad(0x151)]);const _0x3e70ee={};_0x3e70ee[_0x29b9ad(0x11e)]=_0xe4bdcd['RESOURCES'],_0x3e70ee[_0x29b9ad(0x1c3)]=_0x1f97ac[_0x29b9ad(0x151)],this[_0x29b9ad(0x2c0)][_0x29b9ad(0x221)](this['rws'],_0x3e70ee),_0x30a4a5['oidcIssuerProfile'][_0x29b9ad(0x1f0)]=!![];}}else{if(_0x1f97ac[_0x29b9ad(0x1b2)](_0x1f97ac[_0x29b9ad(0x202)],_0x1f97ac[_0x29b9ad(0x202)]))return;else{for(let _0x2853fc=0x0;_0x1f97ac[_0x29b9ad(0x1d4)](_0x2853fc,_0x56a98f[_0x29b9ad(0x244)]);_0x2853fc+=0x1){_0x1f97ac[_0x29b9ad(0x1b4)](_0x1f97ac['raBeK'],_0x1f97ac[_0x29b9ad(0x295)])?_0x4f7447[_0x29b9ad(0x12a)](_0x502f30['name']):console[_0x29b9ad(0x2a8)]('['+_0x1f97ac[_0x29b9ad(0x215)](_0x2853fc,0x1)+']\x20'+_0x56a98f[_0x2853fc]);}const _0x43ba21=await _0x1f97ac[_0x29b9ad(0x207)](_0x20092c,_0x1f97ac['Jedtd']),_0x5358e8=_0x1f97ac[_0x29b9ad(0x2bc)](Number,_0x43ba21);(_0x1f97ac[_0x29b9ad(0x207)](isNaN,_0x5358e8)||_0x1f97ac[_0x29b9ad(0x1a5)](_0x5358e8,0x0)||_0x1f97ac['nsFJm'](_0x5358e8,_0x56f41e))&&(_0x1f97ac[_0x29b9ad(0x24d)](_0x1f97ac[_0x29b9ad(0x304)],_0x1f97ac['lZAhE'])?_0x1f97ac['BoRGe'](_0x45b523,()=>_0x2abe45(),0x3e8):(console[_0x29b9ad(0x157)](_0x1f97ac['nGPsb']),process[_0x29b9ad(0x2e2)](0x1))),_0x375853=_0x56a98f[_0x1f97ac[_0x29b9ad(0x22d)](_0x5358e8,0x1)];}}}global_registry[_0x29b9ad(0x142)]=_0x375853;const _0x25d1ba={};return _0x25d1ba[_0x29b9ad(0x2cc)]=_0x3a93b7,_0x25d1ba[_0x29b9ad(0x284)]=_0x4fb40b,_0x25d1ba[_0x29b9ad(0x29c)]=_0x4e92a6,_0x25d1ba[_0x29b9ad(0x28e)]=_0x5ad387,_0x25d1ba['resourceGroup']=_0x375853,_0x34a7fe[_0x29b9ad(0x26e)][AZURE]=_0x25d1ba,_0x34a7fe;}async['getResourceGroups'](){const _0x2a3b0e=a1_0x3b4a38,_0x5899d5={};_0x5899d5[_0x2a3b0e(0x2d3)]=_0x2a3b0e(0x1f6),_0x5899d5[_0x2a3b0e(0x18a)]=function(_0x22c5ba,_0x3b8a33){return _0x22c5ba===_0x3b8a33;},_0x5899d5[_0x2a3b0e(0x293)]='gNYnj',_0x5899d5[_0x2a3b0e(0x148)]=function(_0x4acff5,_0x5842a3){return _0x4acff5!==_0x5842a3;},_0x5899d5[_0x2a3b0e(0x195)]='WvyPU',_0x5899d5[_0x2a3b0e(0x2dd)]=_0x2a3b0e(0x278);const _0x57c698=_0x5899d5,_0x62f694=[];try{if(_0x57c698[_0x2a3b0e(0x18a)](_0x57c698[_0x2a3b0e(0x293)],_0x57c698['pKorW'])){const _0x41aacb=await this['resourceClient'][_0x2a3b0e(0x297)][_0x2a3b0e(0x185)]();for await(const _0x2965a1 of _0x41aacb){_0x57c698[_0x2a3b0e(0x148)](_0x57c698['bUWkY'],_0x57c698[_0x2a3b0e(0x2dd)])?_0x62f694[_0x2a3b0e(0x12a)](_0x2965a1[_0x2a3b0e(0x196)]):_0x169c88[_0x2a3b0e(0x157)]=_0x2299f4;}}else throw new _0x57f3e7(_0x57c698[_0x2a3b0e(0x2d3)],_0x2a3b0e(0x2e6)+_0x1ef532['stringify'](_0x4ce982));}catch(_0x1e049c){}return _0x62f694;}async[a1_0x3b4a38(0x16d)](){const _0xce5840=a1_0x3b4a38;return this['clusterInfo']=await this[_0xce5840(0x15b)]['managedClusters']['get'](global_registry[_0xce5840(0x142)],this[_0xce5840(0x140)]),this[_0xce5840(0x24b)];}async[a1_0x3b4a38(0x14e)](){const _0x244502=a1_0x3b4a38,_0x19d287=await this[_0x244502(0x15b)][_0x244502(0x21f)][_0x244502(0x2d4)](global_registry[_0x244502(0x142)],this['clusterName']),_0x4b0ad8=_0x19d287[_0x244502(0x2de)][0x0][_0x244502(0x2e7)][_0x244502(0x2fb)]();return _0x4b0ad8;}[a1_0x3b4a38(0x1d2)](_0x4174e5){const _0x402455=a1_0x3b4a38;return _0x4174e5['status'][_0x402455(0x1d1)][_0x402455(0x28f)][0x0][_0x402455(0x1f2)];}async[a1_0x3b4a38(0x299)](){const _0x13496b=a1_0x3b4a38,_0x56a8c9={};_0x56a8c9['ngDTp']=function(_0x4232f3,_0xb53a9b){return _0x4232f3===_0xb53a9b;},_0x56a8c9['AESWe']=function(_0x476f2e,_0x3239b5){return _0x476f2e!==_0x3239b5;},_0x56a8c9[_0x13496b(0x2e4)]=_0x13496b(0x1a8),_0x56a8c9[_0x13496b(0x132)]=function(_0x58d876,_0xbfd0e8){return _0x58d876===_0xbfd0e8;},_0x56a8c9[_0x13496b(0x277)]=_0x13496b(0x15d),_0x56a8c9['fOHuR']=_0x13496b(0x1f9);const _0x3ab233=_0x56a8c9,_0x8def28=new Array();for await(const _0x74b5e of this['containerClient'][_0x13496b(0x21f)]['listByResourceGroup'](global_registry[_0x13496b(0x142)])){_0x3ab233[_0x13496b(0x292)](_0x3ab233[_0x13496b(0x2e4)],_0x3ab233[_0x13496b(0x2e4)])?_0x461f59['push'](_0x46b153):_0x8def28[_0x13496b(0x12a)](_0x74b5e);}for await(const _0x4f6030 of _0x8def28){if(_0x3ab233['pEVcm'](_0x3ab233[_0x13496b(0x277)],_0x3ab233['yUdNi'])){if(_0x3ab233[_0x13496b(0x1af)](_0x4f6030['name'],this[_0x13496b(0x140)])){if(_0x3ab233['ngDTp'](_0x3ab233[_0x13496b(0x247)],_0x3ab233[_0x13496b(0x247)]))return await this[_0x13496b(0x16d)](),!![];else{if(_0x3ab233[_0x13496b(0x1af)](_0x2cbdb6[_0x13496b(0x196)],_0x13496b(0x2ee)+this[_0x13496b(0x140)]))return!![];}}}else return _0x4a205c[_0x13496b(0x157)](_0x13496b(0x29e)+_0x46126d+'.\x20Error:\x20'+_0x5ae43f),[![],[]];}return![];}async[a1_0x3b4a38(0x197)](_0x316bef=null,_0x39ee73=null){const _0xf0a6da=a1_0x3b4a38,_0xfe4228={};_0xfe4228['YDjbH']='5|1|3|4|0|2',_0xfe4228[_0xf0a6da(0x272)]=_0xf0a6da(0x139);const _0x20da28=_0xfe4228,_0x155d9b=_0x20da28['YDjbH'][_0xf0a6da(0x256)]('|');let _0x3594c3=0x0;while(!![]){switch(_0x155d9b[_0x3594c3++]){case'0':await this[_0xf0a6da(0x1de)]();continue;case'1':const _0x98e1a2={};_0x98e1a2[_0xf0a6da(0x11e)]=WS_EVENTS[_0xf0a6da(0x1c2)],_0x98e1a2[_0xf0a6da(0x1c3)]=_0x20da28[_0xf0a6da(0x272)],this[_0xf0a6da(0x2c0)][_0xf0a6da(0x221)](this[_0xf0a6da(0x2b6)],_0x98e1a2);continue;case'2':return[_0x316bef,_0x39ee73];case'3':logger[_0xf0a6da(0x2d9)](_0x20da28[_0xf0a6da(0x272)]);continue;case'4':await this['createCluster'](_0x316bef,_0x39ee73);continue;case'5':this[_0xf0a6da(0x1e6)]();continue;}break;}}async[a1_0x3b4a38(0x239)](_0x516286=null,_0x3ff533=null){const _0x3b91f=a1_0x3b4a38,_0x4a8a83={};_0x4a8a83[_0x3b91f(0x128)]=_0x3b91f(0x2cd),_0x4a8a83['hDWGl']='azureresources',_0x4a8a83[_0x3b91f(0x22b)]='akscluster.json',_0x4a8a83[_0x3b91f(0x1f4)]=_0x3b91f(0x23b),_0x4a8a83[_0x3b91f(0x1d5)]=_0x3b91f(0x2bb),_0x4a8a83['nvKGY']=_0x3b91f(0x303),_0x4a8a83['xuRkg']=function(_0x303eed,_0x5ef5a4){return _0x303eed!==_0x5ef5a4;},_0x4a8a83[_0x3b91f(0x279)]=function(_0x5d19cb,_0x616ead){return _0x5d19cb!==_0x616ead;},_0x4a8a83[_0x3b91f(0x26a)]=function(_0x47865e,_0x80b1cf){return _0x47865e===_0x80b1cf;},_0x4a8a83[_0x3b91f(0x2ab)]=_0x3b91f(0x24a),_0x4a8a83[_0x3b91f(0x171)]=_0x3b91f(0x16a),_0x4a8a83[_0x3b91f(0x27c)]=_0x3b91f(0x21a),_0x4a8a83[_0x3b91f(0x1df)]=_0x3b91f(0x2c4),_0x4a8a83[_0x3b91f(0x120)]=_0x3b91f(0x12d),_0x4a8a83['InASa']=_0x3b91f(0x286),_0x4a8a83[_0x3b91f(0x1a4)]=_0x3b91f(0x1dc);const _0x45a732=_0x4a8a83;let _0x2c828a=await fs[_0x3b91f(0x15a)](path[_0x3b91f(0x2d8)](__dirname,'..',_0x45a732[_0x3b91f(0x128)],_0x45a732[_0x3b91f(0x168)],_0x45a732['OqgaB']),_0x45a732['PliJC']);_0x2c828a=JSON[_0x3b91f(0x273)](_0x2c828a);const _0x95cee9={};_0x95cee9[_0x3b91f(0x2e7)]=this['clusterName'];const _0x45cd03={};_0x45cd03['value']=global_registry[_0x3b91f(0x2c3)];const _0x5b0d04={};_0x5b0d04[_0x3b91f(0x2e7)]=global_registry[_0x3b91f(0x2f9)];const _0xf011bd={};_0xf011bd[_0x3b91f(0x2e7)]=global_registry[_0x3b91f(0x264)];const _0x2dbc24={};_0x2dbc24['value']=global_registry[_0x3b91f(0x1c6)]?_0x45a732[_0x3b91f(0x1d5)]:_0x45a732[_0x3b91f(0x2c2)];const _0xf87960={};_0xf87960[_0x3b91f(0x140)]=_0x95cee9,_0xf87960[_0x3b91f(0x187)]=_0x45cd03,_0xf87960[_0x3b91f(0x2f2)]=_0x5b0d04,_0xf87960[_0x3b91f(0x175)]=_0xf011bd,_0xf87960[_0x3b91f(0x1c6)]=_0x2dbc24;let _0x575e29=_0xf87960;if(_0x45a732['xuRkg'](_0x516286,null)&&_0x45a732[_0x3b91f(0x279)](_0x3ff533,null)){if(_0x45a732[_0x3b91f(0x26a)](_0x45a732[_0x3b91f(0x2ab)],_0x45a732['YaZyS'])){const _0x54ea29={};_0x54ea29[_0x3b91f(0x11e)]=_0x45a732[_0x3b91f(0x171)],_0x54ea29[_0x3b91f(0x1ea)]={},_0x54ea29[_0x3b91f(0x1ea)][_0x3b91f(0x206)]=_0x45a732['RBQSE'];const _0x17973a={};_0x17973a['type']=_0x45a732['JeuKL'],_0x17973a[_0x3b91f(0x1ea)]={},_0x17973a[_0x3b91f(0x1ea)][_0x3b91f(0x206)]=_0x45a732[_0x3b91f(0x27c)],_0x2c828a[_0x3b91f(0x1e2)]={..._0x2c828a[_0x3b91f(0x1e2)],'vpcName':_0x54ea29,'subnetName':_0x17973a};const _0x2b1bc8={};_0x2b1bc8['vnetSubnetID']=_0x45a732['SjXem'],_0x2c828a[_0x3b91f(0x282)]=_0x2b1bc8,_0x2c828a[_0x3b91f(0x123)][0x0][_0x3b91f(0x13f)][_0x3b91f(0x2dc)][0x0]={..._0x2c828a[_0x3b91f(0x123)][0x0][_0x3b91f(0x13f)][_0x3b91f(0x2dc)][0x0],'vnetSubnetID':_0x45a732['YzDHQ']};const _0x5f2380={};_0x5f2380[_0x3b91f(0x2e7)]=_0x516286;const _0x139b2e={};_0x139b2e[_0x3b91f(0x2e7)]=_0x3ff533[0x0],_0x575e29={..._0x575e29,'vpcName':_0x5f2380,'subnetName':_0x139b2e};}else return _0x10149f[_0x3b91f(0x157)]=_0x50b239[_0x3b91f(0x157)],_0x281fe6;}await this[_0x3b91f(0x13a)][_0x3b91f(0x2f1)][_0x3b91f(0x199)](global_registry[_0x3b91f(0x142)],_0x45a732[_0x3b91f(0x29f)],{'properties':{'template':_0x2c828a,'mode':_0x45a732['xacgi'],'parameters':_0x575e29}});}async[a1_0x3b4a38(0x1de)](){const _0x163de8=a1_0x3b4a38,_0x41c926={};_0x41c926[_0x163de8(0x2b1)]=_0x163de8(0x1ee),_0x41c926['nScoZ']=function(_0x3a0f64,_0x265a5f){return _0x3a0f64===_0x265a5f;},_0x41c926[_0x163de8(0x17f)]='Enabling\x20Local\x20account\x20for\x20the\x20cluster',_0x41c926[_0x163de8(0x2a7)]=function(_0x303f14,_0x29c9fa){return _0x303f14+_0x29c9fa;},_0x41c926['EEbmk']=function(_0x3544ba,_0x4707b2){return _0x3544ba!==_0x4707b2;},_0x41c926[_0x163de8(0x285)]=_0x163de8(0x228),_0x41c926['dmikd']=_0x163de8(0x224),_0x41c926['vckpU']=function(_0x5f4325,_0x1f5a8c){return _0x5f4325===_0x1f5a8c;},_0x41c926[_0x163de8(0x165)]='RXYAB',_0x41c926[_0x163de8(0x2af)]='eyMLy',_0x41c926[_0x163de8(0x2f6)]='Storage\x20account\x20already\x20exists,\x20skipping',_0x41c926[_0x163de8(0x159)]=function(_0x1c9c5d,_0x4db055){return _0x1c9c5d===_0x4db055;},_0x41c926[_0x163de8(0x133)]=_0x163de8(0x2c9),_0x41c926[_0x163de8(0x1a6)]=_0x163de8(0x2ba),_0x41c926[_0x163de8(0x1cd)]=function(_0x5b697c,_0x541fdf){return _0x5b697c===_0x541fdf;},_0x41c926[_0x163de8(0x233)]='INLFK',_0x41c926[_0x163de8(0x191)]=_0x163de8(0x1d7),_0x41c926[_0x163de8(0x1b6)]=_0x163de8(0x2be),_0x41c926[_0x163de8(0x236)]='Created\x20Azure\x20federated\x20identity';const _0x66698b=_0x41c926,_0xe58d12=await this[_0x163de8(0x2b8)]();if(!_0xe58d12){if(_0x66698b[_0x163de8(0x1be)](_0x66698b[_0x163de8(0x285)],_0x66698b[_0x163de8(0x285)]))return _0x4e0efe['data']=_0x66698b[_0x163de8(0x2b1)],_0x12f7cd;else{const _0x5ab5d9={};_0x5ab5d9['type']=WS_EVENTS[_0x163de8(0x1c2)],_0x5ab5d9['message']=_0x66698b[_0x163de8(0x20e)],this[_0x163de8(0x2c0)]['sendEventToBackend'](this[_0x163de8(0x2b6)],_0x5ab5d9),logger['info'](_0x66698b[_0x163de8(0x20e)]),await this[_0x163de8(0x2da)]();}}else{if(_0x66698b[_0x163de8(0x2aa)](_0x66698b[_0x163de8(0x165)],_0x66698b[_0x163de8(0x2af)])){if(_0x66698b['nScoZ'](_0x294d1e['name'],_0x3858ea))return!![];}else logger['info'](_0x66698b[_0x163de8(0x2f6)]);}const _0x31d182=await this[_0x163de8(0x1fd)]();if(!_0x31d182){if(_0x66698b[_0x163de8(0x159)](_0x66698b[_0x163de8(0x133)],_0x66698b[_0x163de8(0x133)])){const _0x339426={};_0x339426['type']=WS_EVENTS['LOG'],_0x339426[_0x163de8(0x1c3)]=_0x66698b[_0x163de8(0x1a6)],this[_0x163de8(0x2c0)]['sendEventToBackend'](this['rws'],_0x339426),logger['info'](_0x66698b[_0x163de8(0x1a6)]),await this[_0x163de8(0x271)]();}else{_0x3a3776[_0x163de8(0x2d9)](_0x66698b[_0x163de8(0x17f)]);const _0x332281={};_0x332281[_0x163de8(0x11e)]=_0x56a108[_0x163de8(0x21b)],_0x332281[_0x163de8(0x1c3)]=_0x66698b[_0x163de8(0x17f)],this[_0x163de8(0x2c0)][_0x163de8(0x221)](this[_0x163de8(0x2b6)],_0x332281),_0x24ae7a[_0x163de8(0x29a)]=![];}}else _0x66698b['HHQpo'](_0x66698b[_0x163de8(0x233)],_0x66698b[_0x163de8(0x233)])?logger['info'](_0x66698b[_0x163de8(0x191)]):_0x24348b['log']('['+_0x66698b['IpjPA'](_0x3afcb0,0x1)+']\x20'+_0xfc5cac[_0x2eaa49]);logger[_0x163de8(0x2d9)](_0x66698b[_0x163de8(0x1b6)]),await this['createFederatedAccount'](),logger[_0x163de8(0x2d9)](_0x66698b[_0x163de8(0x236)]);}async['createStorageAccount'](){const _0x6383ee=a1_0x3b4a38,_0x5add1d={};_0x5add1d[_0x6383ee(0x22a)]=_0x6383ee(0x2cd),_0x5add1d[_0x6383ee(0x1cb)]='azureresources',_0x5add1d[_0x6383ee(0x1ff)]='storageaccount.json',_0x5add1d[_0x6383ee(0x2fc)]='utf-8',_0x5add1d[_0x6383ee(0x1fe)]=_0x6383ee(0x26d),_0x5add1d[_0x6383ee(0x230)]=_0x6383ee(0x1dc),_0x5add1d[_0x6383ee(0x1e3)]=_0x6383ee(0x2b5),_0x5add1d[_0x6383ee(0x25f)]='Lifecycle',_0x5add1d[_0x6383ee(0x1cc)]=_0x6383ee(0x1ae),_0x5add1d[_0x6383ee(0x246)]=_0x6383ee(0x11f);const _0x56da4b=_0x5add1d;let _0x6cf2c7=await fs[_0x6383ee(0x15a)](path[_0x6383ee(0x2d8)](__dirname,'..',_0x56da4b[_0x6383ee(0x22a)],_0x56da4b[_0x6383ee(0x1cb)],_0x56da4b['vjqPN']),_0x56da4b[_0x6383ee(0x2fc)]);_0x6cf2c7=JSON[_0x6383ee(0x273)](_0x6cf2c7);const _0x42b746=this[_0x6383ee(0x24f)](),_0x12cf5d={};_0x12cf5d[_0x6383ee(0x2e7)]=_0x42b746;const _0x2c948={};_0x2c948[_0x6383ee(0x17d)]=_0x12cf5d,await this[_0x6383ee(0x13a)][_0x6383ee(0x2f1)][_0x6383ee(0x199)](global_registry[_0x6383ee(0x142)],_0x56da4b['AWita'],{'properties':{'template':_0x6cf2c7,'mode':_0x56da4b[_0x6383ee(0x230)],'parameters':_0x2c948}});const _0x51d9f8={};_0x51d9f8['daysAfterCreationGreaterThan']=0x3c;const _0x4b51aa={};_0x4b51aa['delete']=_0x51d9f8;const _0x2b0f38={};_0x2b0f38['baseBlob']=_0x4b51aa;const _0xcd3395={};_0xcd3395[_0x6383ee(0x1f0)]=!![],_0xcd3395[_0x6383ee(0x196)]=_0x56da4b[_0x6383ee(0x1e3)],_0xcd3395['type']=_0x56da4b[_0x6383ee(0x25f)],_0xcd3395[_0x6383ee(0x17e)]={},_0xcd3395[_0x6383ee(0x17e)]['actions']=_0x2b0f38,_0xcd3395[_0x6383ee(0x17e)]['filters']={},_0xcd3395[_0x6383ee(0x17e)]['filters'][_0x6383ee(0x2e3)]=[_0x56da4b[_0x6383ee(0x1cc)]];const _0x31a9f6={};_0x31a9f6[_0x6383ee(0x26f)]=[_0xcd3395];const _0x4f165f={};_0x4f165f[_0x6383ee(0x2b7)]=_0x31a9f6;const _0x39d461=_0x4f165f;await this[_0x6383ee(0x163)]['managementPolicies'][_0x6383ee(0x263)](global_registry[_0x6383ee(0x142)],_0x42b746,_0x56da4b['riucX'],_0x39d461);}async[a1_0x3b4a38(0x271)](){const _0x4ca4a0=a1_0x3b4a38,_0x260706={};_0x260706[_0x4ca4a0(0x13b)]=_0x4ca4a0(0x2cd),_0x260706[_0x4ca4a0(0x211)]=_0x4ca4a0(0x205),_0x260706[_0x4ca4a0(0x126)]=_0x4ca4a0(0x14d),_0x260706[_0x4ca4a0(0x253)]=_0x4ca4a0(0x23b),_0x260706[_0x4ca4a0(0x209)]=_0x4ca4a0(0x29b),_0x260706[_0x4ca4a0(0x257)]=_0x4ca4a0(0x1dc);const _0x5bdc28=_0x260706;let _0x269097=await fs[_0x4ca4a0(0x15a)](path[_0x4ca4a0(0x2d8)](__dirname,'..',_0x5bdc28[_0x4ca4a0(0x13b)],_0x5bdc28['EiQcd'],_0x5bdc28['fRnPV']),_0x5bdc28[_0x4ca4a0(0x253)]);_0x269097=JSON['parse'](_0x269097),await this['resourceClient'][_0x4ca4a0(0x2f1)][_0x4ca4a0(0x199)](global_registry[_0x4ca4a0(0x142)],_0x5bdc28['uBLlF'],{'properties':{'template':_0x269097,'mode':_0x5bdc28[_0x4ca4a0(0x257)],'parameters':{'clusterName':{'value':this['clusterName']}}}});}async[a1_0x3b4a38(0x172)](){const _0x49f60c=a1_0x3b4a38,_0x3a5a7e={};_0x3a5a7e[_0x49f60c(0x183)]=function(_0x25c8e9,_0x2edb57){return _0x25c8e9+_0x2edb57;},_0x3a5a7e[_0x49f60c(0x121)]=_0x49f60c(0x265),_0x3a5a7e['kzcCz']=function(_0x3112fb,_0x37bc32){return _0x3112fb-_0x37bc32;},_0x3a5a7e[_0x49f60c(0x267)]=function(_0x43193f,_0x2bba24){return _0x43193f!==_0x2bba24;},_0x3a5a7e[_0x49f60c(0x251)]=_0x49f60c(0x2c5),_0x3a5a7e[_0x49f60c(0x2d5)]=_0x49f60c(0x280),_0x3a5a7e[_0x49f60c(0x21e)]=_0x49f60c(0x2d1),_0x3a5a7e['egfnn']=function(_0x437657,_0x1fa23c){return _0x437657!==_0x1fa23c;},_0x3a5a7e[_0x49f60c(0x1b5)]=_0x49f60c(0x262),_0x3a5a7e[_0x49f60c(0x2ac)]=_0x49f60c(0x135),_0x3a5a7e['Hisla']=_0x49f60c(0x2cd),_0x3a5a7e['VNFVH']='azureresources',_0x3a5a7e[_0x49f60c(0x1d6)]='utf-8',_0x3a5a7e[_0x49f60c(0x23c)]=_0x49f60c(0x14f),_0x3a5a7e[_0x49f60c(0x184)]=_0x49f60c(0x1dc);const _0x11f4ee=_0x3a5a7e;if(!this[_0x49f60c(0x24b)]){if(_0x11f4ee[_0x49f60c(0x267)](_0x11f4ee[_0x49f60c(0x251)],_0x11f4ee[_0x49f60c(0x251)])){const _0x1fe420=_0x335dc5['s3Bucket'][_0x49f60c(0x256)]('-'),_0x72d75e=_0x11f4ee[_0x49f60c(0x183)](_0x11f4ee['JOjRs'],_0x1fe420[_0x11f4ee[_0x49f60c(0x248)](_0x1fe420[_0x49f60c(0x244)],0x1)])['slice'](0x0,0x18);return _0x72d75e[_0x49f60c(0x28c)]();}else await this[_0x49f60c(0x16d)]();}const _0x3f9657=this[_0x49f60c(0x24b)]?.[_0x49f60c(0x156)]?.[_0x49f60c(0x17b)],_0x1e96bb=[_0x11f4ee['riJjG'],_0x11f4ee[_0x49f60c(0x21e)]];for await(const _0x52b01b of _0x1e96bb){if(_0x11f4ee['egfnn'](_0x11f4ee[_0x49f60c(0x1b5)],_0x11f4ee['JxcXq'])){let _0x5b83ab=await fs[_0x49f60c(0x15a)](path[_0x49f60c(0x2d8)](__dirname,'..',_0x11f4ee[_0x49f60c(0x1c4)],_0x11f4ee[_0x49f60c(0x1fa)],_0x49f60c(0x1b3)+_0x52b01b+'.json'),_0x11f4ee[_0x49f60c(0x1d6)]);_0x5b83ab=JSON[_0x49f60c(0x273)](_0x5b83ab);const _0x5619ec={};_0x5619ec[_0x49f60c(0x2e7)]=_0x3f9657,await this[_0x49f60c(0x13a)]['deployments'][_0x49f60c(0x199)](global_registry[_0x49f60c(0x142)],_0x11f4ee['AYolR'],{'properties':{'template':_0x5b83ab,'mode':_0x11f4ee[_0x49f60c(0x184)],'parameters':{'oidcIssuer':_0x5619ec,'gridName':{'value':this[_0x49f60c(0x2b9)]},'clusterName':{'value':this['clusterName']}}}});}else return _0x51c197['error'](_0x49f60c(0x2a2)+_0x5eeded+':'+_0x2d9ab9[_0x49f60c(0x25a)]),{};}}async[a1_0x3b4a38(0x204)](_0x4949c7,_0x380e3c,_0x3b9ebd,_0x4a3ccc,_0x4907f1){const _0x53240c=a1_0x3b4a38,_0x50cc19={};_0x50cc19[_0x53240c(0x19d)]='Creating\x20Azure\x20federated\x20identity\x20for\x20Hub\x20Ha',_0x50cc19[_0x53240c(0x1a1)]=_0x53240c(0x2bf);const _0xd4f91e=_0x50cc19,_0x250438={};_0x250438['type']=WS_EVENTS[_0x53240c(0x1c2)],_0x250438[_0x53240c(0x1c3)]=_0xd4f91e[_0x53240c(0x19d)],this[_0x53240c(0x2c0)][_0x53240c(0x221)](this[_0x53240c(0x2b6)],_0x250438),logger['info'](_0xd4f91e[_0x53240c(0x19d)]),await this[_0x53240c(0x217)]();const _0x2b0032={};_0x2b0032[_0x53240c(0x11e)]=WS_EVENTS['LOG'],_0x2b0032[_0x53240c(0x1c3)]=_0xd4f91e[_0x53240c(0x1a1)],this[_0x53240c(0x2c0)][_0x53240c(0x221)](this[_0x53240c(0x2b6)],_0x2b0032);}async[a1_0x3b4a38(0x217)](){const _0x298d4a=a1_0x3b4a38,_0x2c3a51={};_0x2c3a51[_0x298d4a(0x2d7)]=function(_0x5875ee,_0x2d0f5f){return _0x5875ee!==_0x2d0f5f;},_0x2c3a51['tqFZc']=_0x298d4a(0x1d0),_0x2c3a51[_0x298d4a(0x269)]=_0x298d4a(0x287),_0x2c3a51[_0x298d4a(0x2b2)]='templates',_0x2c3a51['mVmYX']='hubharesources',_0x2c3a51[_0x298d4a(0x188)]='federatedidentityuploader.json',_0x2c3a51[_0x298d4a(0x180)]=_0x298d4a(0x23b),_0x2c3a51[_0x298d4a(0x216)]=_0x298d4a(0x14f),_0x2c3a51[_0x298d4a(0x21c)]=_0x298d4a(0x1dc);const _0x5be31b=_0x2c3a51;if(!this[_0x298d4a(0x24b)]){if(_0x5be31b[_0x298d4a(0x2d7)](_0x5be31b['tqFZc'],_0x5be31b[_0x298d4a(0x269)]))await this[_0x298d4a(0x16d)]();else return _0x34ba0a['error']('Cannot\x20find\x20VPC\x20'+_0x1d1e6a+_0x298d4a(0x1ce)+_0x4f5f59),![];}const _0x5e9e9d=this[_0x298d4a(0x24b)]?.[_0x298d4a(0x156)]?.[_0x298d4a(0x17b)];let _0x15c61b=await fs['readFileAsync'](path[_0x298d4a(0x2d8)](__dirname,'..',_0x5be31b[_0x298d4a(0x2b2)],_0x5be31b[_0x298d4a(0x125)],_0x5be31b[_0x298d4a(0x188)]),_0x5be31b[_0x298d4a(0x180)]);_0x15c61b=JSON[_0x298d4a(0x273)](_0x15c61b);const _0x19a47e={};_0x19a47e[_0x298d4a(0x2e7)]=_0x5e9e9d,await this[_0x298d4a(0x13a)][_0x298d4a(0x2f1)][_0x298d4a(0x199)](global_registry['cloudProviderResourceGroup'],_0x5be31b[_0x298d4a(0x216)],{'properties':{'template':_0x15c61b,'mode':_0x5be31b[_0x298d4a(0x21c)],'parameters':{'oidcIssuer':_0x19a47e,'namespace':{'value':global_registry['hubHaNameSpace']},'clusterName':{'value':this[_0x298d4a(0x140)]}}}});}async[a1_0x3b4a38(0x2b8)](){const _0x195c3c=a1_0x3b4a38,_0x3f7978={};_0x3f7978[_0x195c3c(0x14c)]=function(_0x2c55ec,_0x5ac6bc){return _0x2c55ec===_0x5ac6bc;},_0x3f7978[_0x195c3c(0x254)]=_0x195c3c(0x294),_0x3f7978['BymlV']=_0x195c3c(0x210),_0x3f7978[_0x195c3c(0x2bd)]=_0x195c3c(0x12b),_0x3f7978[_0x195c3c(0x231)]=_0x195c3c(0x301),_0x3f7978[_0x195c3c(0x1d8)]=function(_0x2765e7,_0x437de8){return _0x2765e7!==_0x437de8;},_0x3f7978[_0x195c3c(0x2ef)]=_0x195c3c(0x18d),_0x3f7978[_0x195c3c(0x2e0)]=function(_0x585822,_0x337658){return _0x585822!==_0x337658;},_0x3f7978[_0x195c3c(0x1f1)]='mIPPx',_0x3f7978[_0x195c3c(0x176)]=function(_0x1cb922,_0x57b92e){return _0x1cb922===_0x57b92e;},_0x3f7978[_0x195c3c(0x27d)]=_0x195c3c(0x19f);const _0x32fba2=_0x3f7978,_0x42bcba=this[_0x195c3c(0x24f)](),_0x568055=new Array();for await(const _0x3d7de3 of this[_0x195c3c(0x163)][_0x195c3c(0x2cf)][_0x195c3c(0x18f)](global_registry[_0x195c3c(0x142)])){_0x32fba2[_0x195c3c(0x1d8)](_0x32fba2[_0x195c3c(0x2ef)],_0x32fba2['PSGtP'])?(_0x217646+=_0x32fba2[_0x195c3c(0x14c)](_0x53b75c[_0x195c3c(0x244)],0x0)?_0x32fba2[_0x195c3c(0x254)]:'',_0x401b91[_0x195c3c(0x1eb)](_0x195c3c(0x2f0)+_0x358c3d[_0x195c3c(0x23e)](_0x58bc3b))):_0x568055[_0x195c3c(0x12a)](_0x3d7de3);}for await(const _0x3ef4ad of _0x568055){if(_0x32fba2[_0x195c3c(0x2e0)](_0x32fba2[_0x195c3c(0x1f1)],_0x32fba2['PqXjg']))return _0x31f2a3[_0x195c3c(0x234)]=_0x32fba2['BymlV'],_0x374c37;else{if(_0x32fba2['Jhyyz'](_0x3ef4ad[_0x195c3c(0x196)],_0x42bcba)){if(_0x32fba2[_0x195c3c(0x176)](_0x32fba2[_0x195c3c(0x27d)],_0x32fba2[_0x195c3c(0x27d)]))return!![];else{const _0x32288c=_0x215d1b[_0x195c3c(0x2df)](_0x544c78);_0x55e8ca+='\x0a\x09'+_0x46e38d+':\x20'+(_0x32288c?_0x32fba2['BDJFX']:_0x32fba2[_0x195c3c(0x231)]),!_0x32288c&&(_0x9cce26[_0x195c3c(0x1ad)]=![]);}}}}return![];}async['isManagedIdentityPresent'](){const _0x5bfd18=a1_0x3b4a38,_0x1db245={};_0x1db245['ZFqfi']='Enabling\x20Workload\x20identity\x20for\x20the\x20cluster',_0x1db245['MJKCK']=_0x5bfd18(0x16a),_0x1db245['ivfji']=_0x5bfd18(0x21a),_0x1db245[_0x5bfd18(0x2ea)]=_0x5bfd18(0x2c4),_0x1db245[_0x5bfd18(0x1e5)]=_0x5bfd18(0x12d),_0x1db245[_0x5bfd18(0x288)]=function(_0x14411e,_0x2a0a18){return _0x14411e!==_0x2a0a18;},_0x1db245[_0x5bfd18(0x266)]=_0x5bfd18(0x243),_0x1db245[_0x5bfd18(0x1ca)]=_0x5bfd18(0x2e9),_0x1db245[_0x5bfd18(0x158)]=function(_0x2098dc,_0x4d4c57){return _0x2098dc===_0x4d4c57;},_0x1db245[_0x5bfd18(0x229)]=_0x5bfd18(0x137),_0x1db245['xGJEL']='kZino',_0x1db245[_0x5bfd18(0x2a0)]=function(_0x57f836,_0x2ca154){return _0x57f836===_0x2ca154;},_0x1db245[_0x5bfd18(0x235)]=function(_0x2e271a,_0xba30ba){return _0x2e271a!==_0xba30ba;},_0x1db245[_0x5bfd18(0x16f)]=_0x5bfd18(0x226),_0x1db245[_0x5bfd18(0x15e)]='nBXeK';const _0x374f87=_0x1db245,_0x2bd727=new Array();for await(const _0x171faa of this[_0x5bfd18(0x13a)][_0x5bfd18(0x123)][_0x5bfd18(0x18f)](global_registry[_0x5bfd18(0x142)])){if(_0x374f87[_0x5bfd18(0x288)](_0x374f87['TwLBq'],_0x374f87[_0x5bfd18(0x1ca)]))_0x2bd727['push'](_0x171faa);else{_0x2c2cf8[_0x5bfd18(0x2d9)](_0x374f87[_0x5bfd18(0x19c)]);const _0x110253={};_0x110253[_0x5bfd18(0x11e)]=_0x4aae9e[_0x5bfd18(0x21b)],_0x110253['message']=_0x374f87[_0x5bfd18(0x19c)],this['webSocketUtils'][_0x5bfd18(0x221)](this[_0x5bfd18(0x2b6)],_0x110253);const _0xda8c77={};_0xda8c77[_0x5bfd18(0x1f0)]=!![];const _0x5e3e85={'workloadIdentity':_0xda8c77,..._0x1428cc['securityProfile']};_0x2c4ae9['securityProfile']=_0x5e3e85;}}for await(const _0x8fd92e of _0x2bd727){if(_0x374f87[_0x5bfd18(0x158)](_0x374f87['FuStv'],_0x374f87['xGJEL']))_0x29ad04[_0x5bfd18(0x268)][_0x5bfd18(0x12a)](_0x4a4e27);else{if(_0x374f87['fUVNx'](_0x8fd92e[_0x5bfd18(0x196)],_0x5bfd18(0x2ee)+this['clusterName'])){if(_0x374f87['nXTdh'](_0x374f87['rWLxx'],_0x374f87[_0x5bfd18(0x15e)]))return!![];else{const _0x4af864={};_0x4af864[_0x5bfd18(0x11e)]=_0x374f87[_0x5bfd18(0x232)],_0x4af864[_0x5bfd18(0x1ea)]={},_0x4af864[_0x5bfd18(0x1ea)]['description']=_0x374f87['ivfji'];const _0x1b053f={};_0x1b053f[_0x5bfd18(0x11e)]=_0x374f87[_0x5bfd18(0x232)],_0x1b053f[_0x5bfd18(0x1ea)]={},_0x1b053f[_0x5bfd18(0x1ea)][_0x5bfd18(0x206)]=_0x374f87[_0x5bfd18(0x1d3)];const _0x2260dc={..._0x138b8e['parameters']};_0x2260dc[_0x5bfd18(0x155)]=_0x4af864,_0x2260dc['subnetName']=_0x1b053f,_0x3e754d[_0x5bfd18(0x1e2)]=_0x2260dc;const _0x5e847b={};_0x5e847b['vnetSubnetID']=_0x374f87['dErip'],_0x58c710[_0x5bfd18(0x282)]=_0x5e847b;const _0xef1f3={..._0x596ec8[_0x5bfd18(0x123)][0x0][_0x5bfd18(0x13f)][_0x5bfd18(0x2dc)][0x0]};_0xef1f3['vnetSubnetID']=_0x374f87[_0x5bfd18(0x1e5)],_0xaa1a7c[_0x5bfd18(0x123)][0x0]['properties'][_0x5bfd18(0x2dc)][0x0]=_0xef1f3;const _0x5850cb={};_0x5850cb[_0x5bfd18(0x2e7)]=_0x811f50;const _0x530dc7={};_0x530dc7[_0x5bfd18(0x2e7)]=_0x58afcb[0x0];const _0x281ab2={..._0x32512c};_0x281ab2['vpcName']=_0x5850cb,_0x281ab2[_0x5bfd18(0x194)]=_0x530dc7,_0x53d610=_0x281ab2;}}}}return![];}async[a1_0x3b4a38(0x2d2)](_0x4cf467,_0x34e737=0x3){const _0x4e41c8=a1_0x3b4a38,_0x5763fd={'QwiEz':function(_0x5be5d0,_0x2b28c2){return _0x5be5d0===_0x2b28c2;},'mmfxs':function(_0x3343e9,_0x1b1eb9){return _0x3343e9===_0x1b1eb9;},'oHvyd':'vqbSw','SYKQn':function(_0x2f4c6d,_0x29ab8c,_0x561c7f){return _0x2f4c6d(_0x29ab8c,_0x561c7f);},'cnyxJ':_0x4e41c8(0x242),'uALXJ':_0x4e41c8(0x1a0),'virrF':_0x4e41c8(0x1ac),'sLhLG':_0x4e41c8(0x305),'NrmUG':function(_0x3e0018,_0x4fdb94){return _0x3e0018!==_0x4fdb94;},'LNLNt':_0x4e41c8(0x276),'azLJE':function(_0x57dd4e,_0x281f22){return _0x57dd4e===_0x281f22;},'XtegD':_0x4e41c8(0x25b),'oQaxq':_0x4e41c8(0x275),'KtPee':function(_0xcce5cc,_0x222888){return _0xcce5cc===_0x222888;},'wSOhV':_0x4e41c8(0x1ec),'rGCVH':function(_0x308e4b,_0x4cfb28){return _0x308e4b<=_0x4cfb28;},'NiLUj':'jsxjU','ttwxU':'naQuo','RwuDX':function(_0x2e542b,_0x42c2ff){return _0x2e542b-_0x42c2ff;}};try{if(_0x5763fd['mmfxs'](_0x5763fd[_0x4e41c8(0x131)],_0x5763fd[_0x4e41c8(0x12f)])){if(_0x5763fd[_0x4e41c8(0x1e7)](_0x528370[_0x4e41c8(0x196)],_0x26f626))return!![];}else{const _0x3bc113=new Array();for await(const _0x56a7e5 of this[_0x4e41c8(0x13a)][_0x4e41c8(0x123)]['listByResourceGroup'](global_registry[_0x4e41c8(0x142)])){if(_0x5763fd[_0x4e41c8(0x1bf)](_0x5763fd[_0x4e41c8(0x2fa)],_0x5763fd['sLhLG']))return[!![],_0x2c472e];else _0x3bc113[_0x4e41c8(0x12a)](_0x56a7e5);}let _0x4b3355='';for await(const _0xc0cfb7 of _0x3bc113){_0x5763fd[_0x4e41c8(0x1f7)](_0x5763fd['LNLNt'],_0x5763fd['LNLNt'])?_0x39ffcd[_0x4e41c8(0x12a)](_0x27c22d):_0x5763fd[_0x4e41c8(0x281)](_0xc0cfb7[_0x4e41c8(0x196)],_0x4cf467)&&(_0x5763fd[_0x4e41c8(0x1f7)](_0x5763fd[_0x4e41c8(0x1c9)],_0x5763fd[_0x4e41c8(0x1c9)])?_0x293d24['status']=![]:_0x4b3355=_0xc0cfb7['id']);}const _0x37f164=await this[_0x4e41c8(0x13a)][_0x4e41c8(0x123)][_0x4e41c8(0x1bc)](_0x4b3355,_0x5763fd[_0x4e41c8(0x1fc)]);return _0x37f164[_0x4e41c8(0x13f)][_0x4e41c8(0x2cc)];}}catch(_0xee529e){if(_0x5763fd[_0x4e41c8(0x201)](_0x5763fd[_0x4e41c8(0x290)],_0x5763fd[_0x4e41c8(0x290)])){if(_0x5763fd[_0x4e41c8(0x2b0)](_0x34e737,0x0)){if(_0x5763fd[_0x4e41c8(0x1bf)](_0x5763fd['NiLUj'],_0x5763fd[_0x4e41c8(0x1aa)]))_0x33c47a[_0x4e41c8(0x157)]=_0x5cdbc4;else return logger['error'](_0x4e41c8(0x2a2)+_0xee529e+':'+_0xee529e[_0x4e41c8(0x25a)]),{};}return await new Promise(_0x992e3e=>{const _0x46cb91=_0x4e41c8;_0x5763fd[_0x46cb91(0x1bf)](_0x5763fd[_0x46cb91(0x222)],_0x5763fd['oHvyd'])?_0x5763fd[_0x46cb91(0x1bb)](setTimeout,()=>_0x992e3e(),0x3e8):_0x4de462[_0x46cb91(0x12a)](_0x1ee2b0);}),this[_0x4e41c8(0x2d2)](_0x4cf467,_0x5763fd[_0x4e41c8(0x2fd)](_0x34e737,0x1));}else return!![];}}async[a1_0x3b4a38(0x2d0)](){const _0x3e12bb=a1_0x3b4a38,_0x462af8={};_0x462af8[_0x3e12bb(0x249)]=function(_0x339cfc,_0x5b855a){return _0x339cfc===_0x5b855a;},_0x462af8[_0x3e12bb(0x212)]='Wrong\x20input!\x20Please\x20try\x20again\x20with\x20a\x20valid\x20input.',_0x462af8['zgLuu']=_0x3e12bb(0x2ad),_0x462af8[_0x3e12bb(0x12c)]=_0x3e12bb(0x1ab),_0x462af8[_0x3e12bb(0x1e8)]=_0x3e12bb(0x1b7),_0x462af8['JulgZ']=function(_0x264d04,_0x27971d){return _0x264d04!==_0x27971d;},_0x462af8[_0x3e12bb(0x143)]=_0x3e12bb(0x15f);const _0x19c365=_0x462af8;!this['clusterInfo']&&(_0x19c365[_0x3e12bb(0x249)](_0x19c365[_0x3e12bb(0x19b)],_0x19c365[_0x3e12bb(0x19b)])?await this[_0x3e12bb(0x16d)]():_0x19c365['FKgGr'](_0x1e32df[_0x3e12bb(0x196)],_0x3104cc)&&(_0x586693=_0x50314a['id']));const _0x17de51=this[_0x3e12bb(0x24b)]?.[_0x3e12bb(0x1ef)]||{};if(_0x17de51&&_0x19c365[_0x3e12bb(0x249)](_0x17de51[_0x19c365['gHpaw']],_0x19c365[_0x3e12bb(0x1e8)])){if(_0x19c365[_0x3e12bb(0x255)](_0x19c365[_0x3e12bb(0x143)],_0x19c365[_0x3e12bb(0x143)]))_0x2ffd13['error'](_0x19c365['XemaV']),_0x35b3cd[_0x3e12bb(0x2e2)](0x1);else return!![];}return![];}async[a1_0x3b4a38(0x23d)](_0x5ed4b3,_0x5f55a4){const _0x441bb3=a1_0x3b4a38,_0x264881={'NcLkL':function(_0x334480,_0xc8da25){return _0x334480(_0xc8da25);},'QUqCs':'Deleted\x20the\x20cluster\x20successfully'};await _0x264881[_0x441bb3(0x173)](deleteAgent,_0x5ed4b3),await _0x264881['NcLkL'](deleteRoutingDeps,_0x5ed4b3);const _0x58b931=this[_0x441bb3(0x15b)];logger['info'](_0x441bb3(0x29d)+this[_0x441bb3(0x140)]),await _0x58b931['managedClusters']['beginDeleteAndWait'](global_registry[_0x441bb3(0x142)],this[_0x441bb3(0x140)]),logger[_0x441bb3(0x2d9)](_0x264881[_0x441bb3(0x1c7)]);}async[a1_0x3b4a38(0x283)](){const _0x93abf7=a1_0x3b4a38,_0x46e5c0={};_0x46e5c0[_0x93abf7(0x2a9)]=_0x93abf7(0x1d7),_0x46e5c0[_0x93abf7(0x1da)]=function(_0x454ed9,_0x290ab4){return _0x454ed9===_0x290ab4;},_0x46e5c0[_0x93abf7(0x147)]=_0x93abf7(0x186),_0x46e5c0['VTQOI']=function(_0x4d3d10,_0x57ee47){return _0x4d3d10&&_0x57ee47;},_0x46e5c0[_0x93abf7(0x2e1)]=function(_0x2abb0f,_0x19f874){return _0x2abb0f!==_0x19f874;},_0x46e5c0['NeVsQ']=_0x93abf7(0x179),_0x46e5c0[_0x93abf7(0x274)]=_0x93abf7(0x1ba),_0x46e5c0[_0x93abf7(0x220)]=_0x93abf7(0x1b9),_0x46e5c0[_0x93abf7(0x134)]='KuPPj',_0x46e5c0[_0x93abf7(0x27f)]=_0x93abf7(0x2a3),_0x46e5c0[_0x93abf7(0x1c1)]=_0x93abf7(0x1e4),_0x46e5c0[_0x93abf7(0x1e9)]='Enabling\x20Workload\x20identity\x20for\x20the\x20cluster',_0x46e5c0[_0x93abf7(0x20d)]=function(_0x17f0d3,_0x5eddd8){return _0x17f0d3!==_0x5eddd8;},_0x46e5c0['vnJYc']='APKCV',_0x46e5c0[_0x93abf7(0x20f)]='nJyuC',_0x46e5c0[_0x93abf7(0x16b)]=_0x93abf7(0x145);const _0x5a75fb=_0x46e5c0;!this[_0x93abf7(0x24b)]&&(_0x5a75fb[_0x93abf7(0x1da)](_0x5a75fb[_0x93abf7(0x147)],_0x5a75fb[_0x93abf7(0x147)])?await this['getClusterInfo']():_0x86ea2b['push'](_0xb638bd));const _0x2adeee=this[_0x93abf7(0x24b)],_0x34fa05=this[_0x93abf7(0x24b)]?.['oidcIssuerProfile']?.[_0x93abf7(0x1f0)]||![],_0x5ccd72=this[_0x93abf7(0x24b)]?.[_0x93abf7(0x2ae)]?.[_0x93abf7(0x2fe)]?.[_0x93abf7(0x1f0)]||![],_0x320328=!this[_0x93abf7(0x24b)]?.['disableLocalAccounts']||![];if(_0x5a75fb[_0x93abf7(0x2ff)](_0x34fa05,_0x5ccd72)&&_0x320328){if(_0x5a75fb[_0x93abf7(0x2e1)](_0x5a75fb[_0x93abf7(0x214)],_0x5a75fb[_0x93abf7(0x274)]))return;else _0x432c98[_0x93abf7(0x2d9)](_0x5a75fb['hUnTk']);}if(!_0x34fa05){if(_0x5a75fb[_0x93abf7(0x1da)](_0x5a75fb['RJKDQ'],_0x5a75fb[_0x93abf7(0x134)])){const _0x27aeac=new _0x3cd983(_0x20f71c[_0x93abf7(0x154)],_0x2c4474[_0x93abf7(0x2eb)],_0x4caa28['cloudProviderClientSecret']);this[_0x93abf7(0x15b)]=new _0x57c7ef(_0x27aeac,_0x1decfe[_0x93abf7(0x2f5)]),this['storageClient']=new _0x2e5f4d(_0x27aeac,_0x49c076['cloudProviderSubscriptionId']),this[_0x93abf7(0x13a)]=new _0xd3928f(_0x27aeac,_0x3dcc37['cloudProviderSubscriptionId']),this[_0x93abf7(0x22c)]=new _0x1983a7(_0x27aeac,_0x517cb0[_0x93abf7(0x2f5)]),this['authClient']=new _0x2fb53b(_0x27aeac,_0x154253[_0x93abf7(0x2f5)]),this['cred']=_0x27aeac;}else{logger[_0x93abf7(0x2d9)](_0x5a75fb['oiKhs']);const _0x303977={};_0x303977[_0x93abf7(0x11e)]=WS_EVENTS[_0x93abf7(0x21b)],_0x303977[_0x93abf7(0x1c3)]=_0x5a75fb[_0x93abf7(0x27f)],this[_0x93abf7(0x2c0)][_0x93abf7(0x221)](this[_0x93abf7(0x2b6)],_0x303977),_0x2adeee[_0x93abf7(0x156)]['enabled']=!![];}}if(!_0x5ccd72){if(_0x5a75fb[_0x93abf7(0x2e1)](_0x5a75fb[_0x93abf7(0x1c1)],_0x5a75fb[_0x93abf7(0x1c1)]))return!![];else{logger[_0x93abf7(0x2d9)](_0x5a75fb[_0x93abf7(0x1e9)]);const _0x1bf4ee={};_0x1bf4ee[_0x93abf7(0x11e)]=WS_EVENTS[_0x93abf7(0x21b)],_0x1bf4ee[_0x93abf7(0x1c3)]=_0x5a75fb['nTVmC'],this[_0x93abf7(0x2c0)][_0x93abf7(0x221)](this[_0x93abf7(0x2b6)],_0x1bf4ee);const _0x14a098={};_0x14a098['enabled']=!![],_0x2adeee[_0x93abf7(0x2ae)]={'workloadIdentity':_0x14a098,..._0x2adeee[_0x93abf7(0x2ae)]};}}if(!_0x320328){if(_0x5a75fb[_0x93abf7(0x20d)](_0x5a75fb[_0x93abf7(0x19e)],_0x5a75fb[_0x93abf7(0x20f)])){logger['info'](_0x5a75fb[_0x93abf7(0x16b)]);const _0x316ec1={};_0x316ec1['type']=WS_EVENTS['RESOURCES'],_0x316ec1['message']=_0x5a75fb['LvRGn'],this[_0x93abf7(0x2c0)][_0x93abf7(0x221)](this[_0x93abf7(0x2b6)],_0x316ec1),_0x2adeee[_0x93abf7(0x29a)]=![];}else _0xa22c18[_0x93abf7(0x2e2)](0x0);}await this[_0x93abf7(0x15b)][_0x93abf7(0x21f)][_0x93abf7(0x199)](global_registry[_0x93abf7(0x142)],this['clusterName'],_0x2adeee),await this[_0x93abf7(0x16d)]();}async[a1_0x3b4a38(0x1e6)](){const _0x2939d3=a1_0x3b4a38,_0x243b32={};_0x243b32[_0x2939d3(0x1f3)]=_0x2939d3(0x18c),_0x243b32[_0x2939d3(0x208)]=function(_0x42f316,_0x43bce6){return _0x42f316!==_0x43bce6;},_0x243b32[_0x2939d3(0x138)]=_0x2939d3(0x2f7);const _0x207015=_0x243b32,_0x172f15=await this[_0x2939d3(0x22c)][_0x2939d3(0x261)][_0x2939d3(0x2ed)](global_registry[_0x2939d3(0x142)]),_0x4e3543={};_0x4e3543[_0x2939d3(0x2a6)]=global_registry[_0x2939d3(0x122)],_0x4e3543[_0x2939d3(0x189)]=global_registry['bstackAccesskey'],_0x4e3543[_0x2939d3(0x26e)]=AZURE,_0x4e3543[_0x2939d3(0x268)]=[];const _0x4a6ee9=_0x4e3543;for await(const _0x1cf5f7 of _0x172f15){if(_0x207015[_0x2939d3(0x208)](_0x207015[_0x2939d3(0x138)],_0x207015['qKtsT'])){const _0x43052f=_0x207015['YutPN'][_0x2939d3(0x256)]('|');let _0x3ace6b=0x0;while(!![]){switch(_0x43052f[_0x3ace6b++]){case'0':_0x1c5639[_0x2939d3(0x154)]=_0x4d5ecb[this['cloudProviderName']][_0x2939d3(0x29c)];continue;case'1':_0x129028[_0x2939d3(0x142)]=_0x49fd93[this['cloudProviderName']][_0x2939d3(0x1a9)];continue;case'2':_0x32ce36['cloudProviderClientSecret']=_0x5096f9[this[_0x2939d3(0x192)]][_0x2939d3(0x284)];continue;case'3':_0x144ff9[_0x2939d3(0x2f5)]=_0x236de1[this[_0x2939d3(0x192)]][_0x2939d3(0x28e)];continue;case'4':_0x4525bb['cloudProviderClientId']=_0x18977e[this[_0x2939d3(0x192)]][_0x2939d3(0x2cc)];continue;case'5':this['setClients']();continue;}break;}}else _0x4a6ee9['vpcInfo'][_0x2939d3(0x12a)](_0x1cf5f7);}const _0x37ad4a={};_0x37ad4a[_0x2939d3(0x11e)]=WS_EVENTS[_0x2939d3(0x21b)],_0x37ad4a[_0x2939d3(0x1c3)]=_0x4a6ee9,this[_0x2939d3(0x2c0)][_0x2939d3(0x221)](this['rws'],_0x37ad4a);}async[a1_0x3b4a38(0x18b)](_0x5ea5d2){const _0x47750d=a1_0x3b4a38,_0xe6532a={};_0xe6532a[_0x47750d(0x1b1)]=_0x47750d(0x160),_0xe6532a[_0x47750d(0x252)]=_0x47750d(0x18e),_0xe6532a[_0x47750d(0x213)]=function(_0x2db3c8,_0x4ad19a){return _0x2db3c8===_0x4ad19a;},_0xe6532a[_0x47750d(0x124)]=_0x47750d(0x25d),_0xe6532a[_0x47750d(0x1c0)]=_0x47750d(0x238),_0xe6532a['bvQBJ']=function(_0x37a4e4,_0x25d90c){return _0x37a4e4===_0x25d90c;},_0xe6532a[_0x47750d(0x1dd)]=_0x47750d(0x237),_0xe6532a[_0x47750d(0x2db)]='YgiRQ',_0xe6532a[_0x47750d(0x250)]=function(_0x394f71,_0x437c49){return _0x394f71===_0x437c49;},_0xe6532a['yTiOp']=_0x47750d(0x302),_0xe6532a[_0x47750d(0x144)]=_0x47750d(0x1b8),_0xe6532a['rLsbI']=function(_0x49737f,_0xba274f){return _0x49737f!==_0xba274f;},_0xe6532a[_0x47750d(0x12e)]=_0x47750d(0x300),_0xe6532a[_0x47750d(0x1c8)]='Rfpjr';const _0x3e6a6a=_0xe6532a;try{if(_0x3e6a6a['qxEZV'](_0x3e6a6a[_0x47750d(0x124)],_0x3e6a6a[_0x47750d(0x1c0)]))_0x3c3d12=_0x373572['id'];else{const _0x2889a2=await this[_0x47750d(0x22c)][_0x47750d(0x261)][_0x47750d(0x2ed)](global_registry[_0x47750d(0x142)]);for await(const _0x24e001 of _0x2889a2){if(_0x3e6a6a[_0x47750d(0x22f)](_0x3e6a6a[_0x47750d(0x1dd)],_0x3e6a6a[_0x47750d(0x2db)]))_0x2494a6['info'](_0x3e6a6a[_0x47750d(0x1b1)]);else{if(_0x3e6a6a['HHNpY'](_0x24e001[_0x47750d(0x196)],_0x5ea5d2))return _0x3e6a6a[_0x47750d(0x250)](_0x3e6a6a[_0x47750d(0x13d)],_0x3e6a6a[_0x47750d(0x144)])?_0x123112[_0x47750d(0x1ad)]['loadBalancer'][_0x47750d(0x28f)][0x0]['hostname']:!![];}}}}catch(_0x14add2){if(_0x3e6a6a[_0x47750d(0x25e)](_0x3e6a6a[_0x47750d(0x12e)],_0x3e6a6a[_0x47750d(0x1c8)]))return logger[_0x47750d(0x157)](_0x47750d(0x258)+_0x5ea5d2+_0x47750d(0x1ce)+_0x14add2),![];else{const _0x36d9c2={};_0x36d9c2[_0x47750d(0x1ad)]=!![],_0x36d9c2[_0x47750d(0x157)]=null,_0x36d9c2['data']=_0x3e6a6a[_0x47750d(0x252)];const _0x37532b=_0x36d9c2;return _0x37532b;}}return![];}async[a1_0x3b4a38(0x164)](_0x5f2665,_0x5db141){const _0x3a65b6=a1_0x3b4a38,_0x3616f3={};_0x3616f3['ImJWK']=function(_0x339d30,_0x47b927){return _0x339d30===_0x47b927;},_0x3616f3['cUPfG']=_0x3a65b6(0x2f4),_0x3616f3['tTiow']=_0x3a65b6(0x170);const _0x2e981d=_0x3616f3;try{if(_0x2e981d[_0x3a65b6(0x136)](_0x2e981d[_0x3a65b6(0x218)],_0x2e981d[_0x3a65b6(0x218)])){const _0x2accdc=await this['networkClient']['subnets']['get'](global_registry[_0x3a65b6(0x142)],_0x5db141,_0x5f2665[0x0]);if(_0x2e981d[_0x3a65b6(0x136)](_0x5f2665[0x0],_0x2accdc[_0x3a65b6(0x196)])){if(_0x2e981d['ImJWK'](_0x2e981d['tTiow'],_0x2e981d['tTiow']))return[!![],_0x5f2665];else _0x182f47['push'](_0x932298);}}else return!![];}catch(_0x32bc4d){return logger[_0x3a65b6(0x157)](_0x3a65b6(0x29e)+_0x5f2665+_0x3a65b6(0x2ec)+_0x32bc4d),[![],[]];}return[![],[]];}async[a1_0x3b4a38(0x27a)](){const _0x5a37e5=a1_0x3b4a38,_0x48272c={};_0x48272c[_0x5a37e5(0x153)]=_0x5a37e5(0x18e);const _0x445ae7=_0x48272c,_0x217587={};_0x217587[_0x5a37e5(0x1ad)]=!![],_0x217587[_0x5a37e5(0x157)]=null,_0x217587[_0x5a37e5(0x234)]=_0x445ae7['roEBm'];const _0x43c1f2=_0x217587;return _0x43c1f2;}async[a1_0x3b4a38(0x289)](){const _0x13f13c=a1_0x3b4a38,_0x45dadc={};_0x45dadc[_0x13f13c(0x240)]=_0x13f13c(0x219),_0x45dadc[_0x13f13c(0x146)]=_0x13f13c(0x27e),_0x45dadc['FGNhk']=_0x13f13c(0x298);const _0x5321c0=_0x45dadc,_0x1ad653=await this['cred'][_0x13f13c(0x223)](_0x5321c0['gQnUZ']),_0x41b72b={};_0x41b72b['method']=_0x5321c0[_0x13f13c(0x146)],_0x41b72b[_0x13f13c(0x227)]={},_0x41b72b[_0x13f13c(0x227)][_0x13f13c(0x2f3)]=_0x13f13c(0x20b)+_0x1ad653['token'],_0x41b72b[_0x13f13c(0x227)][_0x13f13c(0x22e)]=_0x5321c0[_0x13f13c(0x2cb)];const _0x5adc00=_0x41b72b;return _0x5adc00;}async[a1_0x3b4a38(0x198)](_0x130e7a){const _0x3e7e3a=a1_0x3b4a38,_0x28ae2b={'KebEd':function(_0x2a70a1,_0x2c9145,_0x2fa32b){return _0x2a70a1(_0x2c9145,_0x2fa32b);},'LVVfb':function(_0x38746a,_0x1be305){return _0x38746a===_0x1be305;},'uORlO':_0x3e7e3a(0x1f6)},_0x3ef227={};_0x3ef227[_0x3e7e3a(0x2e8)]='',_0x3ef227[_0x3e7e3a(0x157)]=null;const _0x5b99d7=_0x3ef227;try{const _0x56fed0='https://graph.microsoft.com/v1.0/servicePrincipals?$filter=appId\x20eq\x20\x27'+_0x130e7a+'\x27',_0x1f2735=await this[_0x3e7e3a(0x289)](),_0x425f60=await _0x28ae2b[_0x3e7e3a(0x16c)](fetch,_0x56fed0,_0x1f2735),_0x1a1a82=await _0x425f60[_0x3e7e3a(0x150)]();if(!_0x1a1a82['value']||_0x28ae2b['LVVfb'](_0x1a1a82[_0x3e7e3a(0x2e7)][_0x3e7e3a(0x244)],0x0))throw new Error(_0x28ae2b[_0x3e7e3a(0x1e0)],_0x3e7e3a(0x2e6)+JSON[_0x3e7e3a(0x23e)](_0x1a1a82));_0x5b99d7[_0x3e7e3a(0x2e8)]=_0x1a1a82[_0x3e7e3a(0x2e7)][0x0]['id'];}catch(_0x1091ec){_0x5b99d7[_0x3e7e3a(0x157)]=_0x1091ec;}return _0x5b99d7;}async[a1_0x3b4a38(0x1bd)](){const _0x5f152c=a1_0x3b4a38,_0x14131e={};_0x14131e['rvauO']='allowed',_0x14131e[_0x5f152c(0x182)]=_0x5f152c(0x301),_0x14131e['eeukx']=function(_0x3fee84,_0x256d89){return _0x3fee84!==_0x256d89;},_0x14131e[_0x5f152c(0x2b4)]=function(_0x4773dc,_0x239e9d){return _0x4773dc===_0x239e9d;},_0x14131e[_0x5f152c(0x152)]=_0x5f152c(0x210),_0x14131e['FjSKG']='No\x20role\x20defintion\x20found\x20for\x20the\x20attached\x20roles',_0x14131e[_0x5f152c(0x21d)]=_0x5f152c(0x294);const _0x26e46e=_0x14131e,_0x5ed6e8={};_0x5ed6e8[_0x5f152c(0x1ad)]=![],_0x5ed6e8[_0x5f152c(0x157)]=null,_0x5ed6e8['data']='';const _0x45ac4d=_0x5ed6e8;try{let _0x53d6cd='';const _0x13b2bd='subscriptions/'+global_registry[_0x5f152c(0x2f5)]+'/resourceGroups/'+global_registry[_0x5f152c(0x142)],_0x33780a=await this[_0x5f152c(0x198)](global_registry['cloudProviderClientId']);if(_0x26e46e[_0x5f152c(0x15c)](_0x33780a[_0x5f152c(0x157)],null))return _0x45ac4d['error']=_0x33780a[_0x5f152c(0x157)],_0x45ac4d;const _0x5af6d7=_0x5f152c(0x23f)+_0x33780a[_0x5f152c(0x2e8)]+'\x27)',_0x220723={};_0x220723[_0x5f152c(0x2c7)]=_0x5af6d7;const _0x3dfed9=await this[_0x5f152c(0x127)]['roleAssignments']['listForScope'](_0x13b2bd,_0x220723),_0x156413=[];for await(const _0x50e8c1 of _0x3dfed9){_0x156413[_0x5f152c(0x12a)](_0x50e8c1);}if(_0x26e46e[_0x5f152c(0x2b4)](_0x156413[_0x5f152c(0x244)],0x0))return _0x45ac4d['data']=_0x26e46e[_0x5f152c(0x152)],_0x45ac4d;const _0x1b3aaa=[...new Set(_0x156413[_0x5f152c(0x203)](_0x44aa7c=>_0x44aa7c['roleDefinitionId']))];if(_0x26e46e[_0x5f152c(0x2b4)](_0x1b3aaa['length'],0x0))return _0x45ac4d['data']=_0x26e46e[_0x5f152c(0x20c)],_0x45ac4d;const _0x23562b=[],_0x5d62d1=[];for(const _0x1c245d of _0x1b3aaa){const _0x1252e2=await this[_0x5f152c(0x127)][_0x5f152c(0x23a)][_0x5f152c(0x1bc)](_0x1c245d);logger['debug']('role\x20name\x20attached\x20-\x20'+_0x1252e2['roleName']),_0x23562b['push'](_0x1252e2),logger[_0x5f152c(0x1eb)]('Attached\x20permissions\x20:\x20'+JSON[_0x5f152c(0x23e)](_0x1252e2[_0x5f152c(0x26b)])),_0x1252e2[_0x5f152c(0x26b)][_0x5f152c(0x177)](_0x1ea41c=>{const _0x5dff80=_0x5f152c;_0x5d62d1[_0x5dff80(0x12a)](..._0x1ea41c[_0x5dff80(0x1b0)]);});}logger[_0x5f152c(0x1eb)](_0x5f152c(0x1f8)+JSON['stringify'](_0x5d62d1)),_0x26e46e[_0x5f152c(0x2b4)](_0x5d62d1[_0x5f152c(0x244)],0x0)&&(_0x53d6cd+=_0x26e46e[_0x5f152c(0x2b4)](_0x5d62d1['length'],0x0)?_0x26e46e[_0x5f152c(0x21d)]:'',logger[_0x5f152c(0x1eb)](_0x5f152c(0x2f0)+JSON[_0x5f152c(0x23e)](_0x23562b))),_0x45ac4d[_0x5f152c(0x1ad)]=!![],Object['entries'](PERMISSIONS[_0x5f152c(0x13c)])[_0x5f152c(0x177)](([_0x3713a5,_0x203817])=>{const _0x5dcb47=_0x5f152c,_0x4b91f0=_0x5d62d1[_0x5dcb47(0x2df)](_0x3713a5);_0x53d6cd+='\x0a\x09'+_0x203817+':\x20'+(_0x4b91f0?_0x26e46e[_0x5dcb47(0x270)]:_0x26e46e['ttSQi']),!_0x4b91f0&&(_0x45ac4d['status']=![]);}),_0x45ac4d[_0x5f152c(0x234)]=_0x53d6cd;}catch(_0x2ddb97){_0x45ac4d['error']=_0x2ddb97;}return _0x45ac4d;}}const a1_0x9b4a11={};a1_0x9b4a11['AzureCloudProvider']=AzureCloudProvider,module['exports']=a1_0x9b4a11;