const a27_0x46ae81=a27_0x5e27;(function(_0x32b059,_0x4b3ad9){const _0x3cfa87=a27_0x5e27,_0x50e46d=_0x32b059();while(!![]){try{const _0x3602e0=parseInt(_0x3cfa87(0x11c))/0x1+parseInt(_0x3cfa87(0x105))/0x2+parseInt(_0x3cfa87(0x116))/0x3+parseInt(_0x3cfa87(0xd3))/0x4+-parseInt(_0x3cfa87(0x147))/0x5*(parseInt(_0x3cfa87(0x11b))/0x6)+-parseInt(_0x3cfa87(0x142))/0x7+parseInt(_0x3cfa87(0xc0))/0x8;if(_0x3602e0===_0x4b3ad9)break;else _0x50e46d['push'](_0x50e46d['shift']());}catch(_0x735a52){_0x50e46d['push'](_0x50e46d['shift']());}}}(a27_0x4d2a,0x6d5e8));function a27_0x4d2a(){const _0x1a6baa=['path','PKcwm','DWtOb','Tags','ntEsx','AcxZN','valueOf','js-yaml','stackCreateComplete','ORtcc','padStart','jXTqu','rgSbT','forEach','kVqFZ','iWMOe','Subnet02','yhkYC','iZFYy','iDhbd','yoGey','Fn::Join','JUZJR','cdjgO','ParameterGroups','ParameterKey','Properties','Subnets','MDqyp','jiBJh','debug','createStack','Parameters','NodeGroup','promise','fZVgw','EUzKO','ldCjD','POcOk','value','DELETE','NLScO','391220ksUyQt','vDdJv','fNrlT','bguGS','join','NodeGroupName','jEJLZ','NodeImageId','IzRVU','UkRMv','aws-eks-cluster-dep.yaml','RfEtS','CFTemplates','OHycd','true','HsrGX','-NodeGroup','1787523EAlKfr','NodeAutoScalingGroupMinSizeWindows','Capabilities','StackName','ftyfw','4805316gXizlD','241696SSSsfC','eAuxn','TUToC','NgRlx','Subnet01','pZyHR','vpc-import.yaml','Subnet03Block','keys','2010-05-15','kidXI','TemplateBody','ParameterValue','load','push','SjOWc','NodeGroupWindows','mdOze','Subnet02Block','Vhmtj','Subnet01Block','ClusterAutoUpgrade','rwiVf','sZYbX','GHDdz','WctYW','cgojs','ytmvV','2|4|3|0|5|1','aVBNG','Subnet','HmxDi','DtfSw','zBkXi','split','KGXLL','bsZHR','s3-create.yaml','5121375YpoFcW','kRdks','-Windows-NodeGroup','TFFyU','CloudFormation','5HxSewe','OiUwS','jWDPz','SubnetIds','OnFailure','Outputs','WHWex','instanceType','vpc-create.yaml','JtUBT','raUeC','toString','NodeGroupNameWindows','waitFor','Resources','BldxW','EKSCluster','CaZYw','Ref','ami','../config/constants','VPC','Value','awsObj','gqWAv','DRTEl','VrlIo','rJiDa','PJLra','CAPABILITY_NAMED_IAM','../config/logger','MTQxb','Key','OtKJD','wNdGh','yNvmX','WzTeV','schema','CRECy','AWS::CloudFormation::Interface','Rddcx','FrqNN','UkOKV','KvKoC','oSjAh','bluebird','ZFKYx','NodeAutoScalingGroupDesiredSizeWindows','Metadata','ouNVE','browserstack:creationDate','browserstack:cluster','3603784MvxGmX','vARPV','ClusterName','BNgWe','zAUWy','apiVersion','StackId','readFileAsync','NtRGv','OnRMY','NxHjW','false','./AWSUtils','yMFrM','QKHro','Isvhi','ResourcesVpcConfig','subnet-import.yaml','DUFiB','1987468xrnAAQ','utf-8','EhUOQ','js-yaml-cloudformation-schema','rHppc','JmKkl','MwSHd','XrdCS'];a27_0x4d2a=function(){return _0x1a6baa;};return a27_0x4d2a();}const fs=require('fs'),path=require(a27_0x46ae81(0xdb)),Promise=require(a27_0x46ae81(0x174)),yaml=require(a27_0x46ae81(0xe2)),{CLOUDFORMATION_SCHEMA}=require(a27_0x46ae81(0xd6)),AWS=require(a27_0x46ae81(0xcc))[a27_0x46ae81(0x15e)],{CLUSTER_DEP_STACK_NAME,COMMON_HST_TAGS,global_registry}=require(a27_0x46ae81(0x15b)),{logger}=require(a27_0x46ae81(0x165)),{isBucketPresent}=require(a27_0x46ae81(0xcc));Promise['promisifyAll'](fs);function a27_0x5e27(_0x53856b,_0x371970){const _0x4d2af3=a27_0x4d2a();return a27_0x5e27=function(_0x5e279d,_0x1a1720){_0x5e279d=_0x5e279d-0xbc;let _0x11fd7e=_0x4d2af3[_0x5e279d];return _0x11fd7e;},a27_0x5e27(_0x53856b,_0x371970);}const mergeTemplates=(_0x1eef72,_0xb4fe63)=>{const _0x56d4e1=a27_0x46ae81,_0x297592={'SjOWc':function(_0x1b1751,_0x370c17){return _0x1b1751===_0x370c17;},'CaZYw':_0x56d4e1(0x132),'YYjvN':function(_0x30ff6b,_0x23ae94,_0x2d9e7f){return _0x30ff6b(_0x23ae94,_0x2d9e7f);},'QKHro':function(_0x4f0ded,_0x42ea3c){return _0x4f0ded(_0x42ea3c);},'ZpMUy':_0x56d4e1(0xd2),'rHppc':'cFNjy'};Object[_0x56d4e1(0x124)](_0xb4fe63)[_0x56d4e1(0xe8)](_0x39d813=>{const _0x5d68ca=_0x56d4e1,_0x23a0f1={'BNgWe':function(_0x307966,_0x1398fc,_0x3b2ce7){return _0x297592['YYjvN'](_0x307966,_0x1398fc,_0x3b2ce7);},'iDhbd':function(_0x835f2e,_0x42c14c){const _0x47081c=a27_0x5e27;return _0x297592[_0x47081c(0xce)](_0x835f2e,_0x42c14c);}};if(_0x297592['SjOWc'](_0x297592['ZpMUy'],_0x297592[_0x5d68ca(0xd7)]))_0x23a0f1[_0x5d68ca(0xc3)](_0x1e8fc6,_0x2599ee,_0x300be8);else{var _0x5652d1=_0xb4fe63[_0x39d813];Object[_0x5d68ca(0x124)](_0x5652d1)[_0x5d68ca(0xe8)](_0x352b2c=>{const _0x4fef3f=_0x5d68ca;_0x297592[_0x4fef3f(0x12b)](_0x297592[_0x4fef3f(0x158)],_0x297592[_0x4fef3f(0x158)])?_0x1eef72[_0x39d813][_0x352b2c]=_0x5652d1[_0x352b2c]:(_0x1ddec5['Parameters'][_0x4fef3f(0x12a)]({'ParameterKey':_0x4fef3f(0x13a)+_0x23a0f1[_0x4fef3f(0xee)](_0x297d6f,_0x1d88bf)[_0x4fef3f(0xe5)](0x2,'0'),'ParameterValue':_0x48b65c[_0x4fef3f(0x102)]}),_0x3e8f63+=0x1);});}});},addVPCData=async(_0x58c816,_0x41809b)=>{const _0x25c83b=a27_0x46ae81,_0x3822f2={'iWMOe':_0x25c83b(0x15c),'MwSHd':function(_0x26d745,_0x1f289b){return _0x26d745===_0x1f289b;},'EhUOQ':'coAhF','RfEtS':_0x25c83b(0x111),'bguGS':_0x25c83b(0x122),'ldCjD':'utf-8','XrdCS':function(_0x1de919,_0x56f805,_0x4b1f02){return _0x1de919(_0x56f805,_0x4b1f02);},'KGXLL':_0x25c83b(0x16e),'DRTEl':_0x25c83b(0x151),'EVHfW':_0x25c83b(0x14f),'pZyHR':'VpcBlock'};if(_0x41809b){if(_0x3822f2[_0x25c83b(0xd9)](_0x3822f2[_0x25c83b(0xd5)],_0x3822f2['EhUOQ'])){const _0x1e809e=await fs[_0x25c83b(0xc7)](path[_0x25c83b(0x109)](__dirname,'..',_0x3822f2[_0x25c83b(0x110)],_0x3822f2[_0x25c83b(0x108)]),_0x3822f2[_0x25c83b(0x100)]),_0x415670={};_0x415670[_0x25c83b(0x16c)]=CLOUDFORMATION_SCHEMA;const _0x526841=yaml['load'](_0x1e809e,_0x415670);_0x3822f2['XrdCS'](mergeTemplates,_0x58c816,_0x526841),_0x58c816['Metadata'][_0x3822f2[_0x25c83b(0x13f)]]['ParameterGroups'][0x0][_0x25c83b(0xfb)][_0x25c83b(0x12a)](_0x3822f2['iWMOe']);}else{const _0x53855c={};_0x53855c[_0x25c83b(0xf4)]=_0x3822f2[_0x25c83b(0xea)],_0x53855c['ParameterValue']=_0xe7ef2e,_0x493750[_0x25c83b(0xfb)][_0x25c83b(0x12a)](_0x53855c);}}else{if(_0x3822f2[_0x25c83b(0xd9)](_0x3822f2[_0x25c83b(0x160)],_0x3822f2[_0x25c83b(0x160)])){const _0x5e8943=await fs[_0x25c83b(0xc7)](path['join'](__dirname,'..',_0x3822f2[_0x25c83b(0x110)],_0x3822f2['EVHfW']),_0x3822f2['ldCjD']),_0x357a26={};_0x357a26[_0x25c83b(0x16c)]=CLOUDFORMATION_SCHEMA;const _0x4ba3f1=yaml[_0x25c83b(0x129)](_0x5e8943,_0x357a26);_0x3822f2[_0x25c83b(0xda)](mergeTemplates,_0x58c816,_0x4ba3f1),_0x58c816['Metadata'][_0x3822f2[_0x25c83b(0x13f)]][_0x25c83b(0xf3)][0x0]['Parameters'][_0x25c83b(0x12a)](_0x3822f2[_0x25c83b(0x121)]);}else{var _0xc44c91=_0x2b7fc1[_0x28c98c];_0x3ba41c[_0x25c83b(0x124)](_0xc44c91)[_0x25c83b(0xe8)](_0x1914e2=>{_0x5a2bdd[_0x2dfe09][_0x1914e2]=_0xc44c91[_0x1914e2];});}}},addS3Data=async _0xf72ee3=>{const _0xe1165c=a27_0x46ae81,_0x562f9b={'OiUwS':'CFTemplates','XvZlr':_0xe1165c(0x141),'UkOKV':_0xe1165c(0xd4),'ZFKYx':function(_0x26aef1,_0x245fd9){return _0x26aef1(_0x245fd9);},'rJiDa':function(_0x5cffba,_0x4c0cdb){return _0x5cffba===_0x4c0cdb;},'WzTeV':_0xe1165c(0x137),'HXJRH':_0xe1165c(0xe6),'TFFyU':function(_0x4d7bf8,_0x158501,_0x2bab1c){return _0x4d7bf8(_0x158501,_0x2bab1c);}},_0x525967=await fs[_0xe1165c(0xc7)](path[_0xe1165c(0x109)](__dirname,'..',_0x562f9b[_0xe1165c(0x148)],_0x562f9b['XvZlr']),_0x562f9b[_0xe1165c(0x171)]),_0x47683c={};_0x47683c[_0xe1165c(0x16c)]=CLOUDFORMATION_SCHEMA;const _0xb70dec=yaml[_0xe1165c(0x129)](_0x525967,_0x47683c),_0x4787a4=await _0x562f9b[_0xe1165c(0x175)](isBucketPresent,global_registry['s3Bucket']);_0x562f9b[_0xe1165c(0x162)](_0x4787a4,![])&&(_0x562f9b['rJiDa'](_0x562f9b[_0xe1165c(0x16b)],_0x562f9b['HXJRH'])?_0x48ca9d[_0x241ad6[_0xe1165c(0x167)]]=_0x50238f['Value']:_0x562f9b[_0xe1165c(0x145)](mergeTemplates,_0xf72ee3,_0xb70dec));},addSubnetData=async(_0x305418,_0x55b1e8)=>{const _0x1f16ff=a27_0x46ae81,_0x59f45b={'OnRMY':function(_0x1b6227,_0x43f7a8){return _0x1b6227(_0x43f7a8);},'NFYWV':function(_0x26d07b,_0x533ea1){return _0x26d07b!==_0x533ea1;},'cdjgO':'pDruE','NtRGv':'5|2|4|3|1|0','Trqlh':_0x1f16ff(0xf0),'yNvmX':'AWS::CloudFormation::Interface','HsrGX':function(_0xabc8f8,_0x552479){return _0xabc8f8(_0x552479);},'EUzKO':function(_0x34a5a0,_0x4b9163){return _0x34a5a0(_0x4b9163);},'ntEsx':_0x1f16ff(0xfc),'PJLra':_0x1f16ff(0x12c),'BldxW':function(_0x32c174,_0x552533){return _0x32c174!==_0x552533;},'jEJLZ':_0x1f16ff(0xef),'kidXI':_0x1f16ff(0x111),'HUiGt':_0x1f16ff(0xd1),'WHWex':_0x1f16ff(0xd4),'DtfSw':function(_0x508013,_0x53298b,_0x56160b){return _0x508013(_0x53298b,_0x56160b);},'bsZHR':function(_0x27366b,_0x1c84dd){return _0x27366b===_0x1c84dd;},'PKcwm':_0x1f16ff(0xc4),'kVqFZ':_0x1f16ff(0x107),'SBwDc':'subnet-create.yaml','VWOUx':function(_0x494983,_0x3842fc,_0x28331e){return _0x494983(_0x3842fc,_0x28331e);},'JmKkl':_0x1f16ff(0x120),'OtKJD':_0x1f16ff(0xeb),'rgSbT':'Subnet03','yhkYC':_0x1f16ff(0x130),'AcxZN':_0x1f16ff(0x12e),'MDqyp':_0x1f16ff(0x123)};if(_0x55b1e8){if(_0x59f45b[_0x1f16ff(0x156)](_0x59f45b[_0x1f16ff(0x10b)],_0x59f45b[_0x1f16ff(0x10b)]))_0x577b8a['Resources'][_0x25558e][_0x1f16ff(0xf5)]&&_0x406d9a[_0x1f16ff(0x155)][_0xb55464][_0x1f16ff(0xf5)][_0x1f16ff(0xde)]&&_0x19358d[_0x1f16ff(0x155)][_0x52ebf2][_0x1f16ff(0xf5)]['Tags'][_0x1f16ff(0x12a)](..._0x8b4b99);else{const _0x22956e=await fs[_0x1f16ff(0xc7)](path[_0x1f16ff(0x109)](__dirname,'..',_0x59f45b[_0x1f16ff(0x126)],_0x59f45b['HUiGt']),_0x59f45b[_0x1f16ff(0x14d)]),_0x474171={};_0x474171['schema']=CLOUDFORMATION_SCHEMA;const _0x121747=yaml[_0x1f16ff(0x129)](_0x22956e,_0x474171);_0x59f45b[_0x1f16ff(0x13c)](mergeTemplates,_0x305418,_0x121747);let _0x87c7c2=0x1;_0x55b1e8['forEach'](_0x37e8ff=>{const _0x5457fe=_0x1f16ff,_0x34052b={'cxfyO':function(_0x5f12f5,_0x132b20){const _0x48cd7f=a27_0x5e27;return _0x59f45b[_0x48cd7f(0xc9)](_0x5f12f5,_0x132b20);}};if(_0x59f45b['NFYWV'](_0x59f45b[_0x5457fe(0xf2)],_0x59f45b[_0x5457fe(0xf2)])){const _0x55fc35={'wNdGh':function(_0x2b9278,_0x22aef7){return _0x34052b['cxfyO'](_0x2b9278,_0x22aef7);}};let _0x432452=0x1;_0x4d360a['forEach'](_0x38b006=>{const _0x1dfa0b=_0x5457fe;_0x526a48['Parameters']['push']({'ParameterKey':_0x1dfa0b(0x13a)+_0x55fc35[_0x1dfa0b(0x169)](_0x9912ba,_0x432452)[_0x1dfa0b(0xe5)](0x2,'0'),'ParameterValue':_0x38b006['value']}),_0x432452+=0x1;});}else{const _0x26153e=_0x59f45b[_0x5457fe(0xc8)][_0x5457fe(0x13e)]('|');let _0x21e39b=0x0;while(!![]){switch(_0x26153e[_0x21e39b++]){case'0':_0x87c7c2+=0x1;continue;case'1':_0x305418[_0x5457fe(0x14c)]['SubnetIds']['Value'][_0x59f45b['Trqlh']][0x1][_0x5457fe(0x12a)]({'Ref':_0x5457fe(0x13a)+_0x59f45b['OnRMY'](String,_0x87c7c2)[_0x5457fe(0xe5)](0x2,'0')});continue;case'2':_0x305418[_0x5457fe(0xbc)][_0x59f45b[_0x5457fe(0x16a)]][_0x5457fe(0xf3)][0x0][_0x5457fe(0xfb)][_0x5457fe(0x12a)](_0x5457fe(0x13a)+_0x59f45b[_0x5457fe(0x114)](String,_0x87c7c2)[_0x5457fe(0xe5)](0x2,'0'));continue;case'3':_0x305418['Resources'][_0x5457fe(0x12c)][_0x5457fe(0xf5)][_0x5457fe(0xf6)][_0x5457fe(0x12a)]({'Ref':_0x5457fe(0x13a)+_0x59f45b[_0x5457fe(0xff)](String,_0x87c7c2)[_0x5457fe(0xe5)](0x2,'0')});continue;case'4':_0x305418[_0x5457fe(0x155)][_0x5457fe(0xfc)][_0x5457fe(0xf5)][_0x5457fe(0xf6)][_0x5457fe(0x12a)]({'Ref':_0x5457fe(0x13a)+_0x59f45b[_0x5457fe(0xff)](String,_0x87c7c2)[_0x5457fe(0xe5)](0x2,'0')});continue;case'5':_0x305418['Resources'][_0x5457fe(0x157)][_0x5457fe(0xf5)][_0x5457fe(0xd0)][_0x5457fe(0x14a)][_0x5457fe(0x12a)]({'Ref':'Subnet'+_0x59f45b[_0x5457fe(0x114)](String,_0x87c7c2)[_0x5457fe(0xe5)](0x2,'0')});continue;}break;}}});}}else{if(_0x59f45b[_0x1f16ff(0x140)](_0x59f45b[_0x1f16ff(0xdc)],_0x59f45b[_0x1f16ff(0xe9)])){for(const _0x542cec in _0x134ff5['Resources']){_0x330ca1['Resources'][_0x542cec]['Properties']&&_0x246ae7[_0x1f16ff(0x155)][_0x542cec]['Properties'][_0x1f16ff(0xde)]&&_0x24949f[_0x1f16ff(0x155)][_0x542cec][_0x1f16ff(0xf5)][_0x1f16ff(0xde)]['push'](..._0x48a8f3);}const _0x5c100f={};_0x1c345b[_0x1f16ff(0xe8)](_0x1ce6b8=>{const _0x4ff7b0=_0x1f16ff;_0x5c100f[_0x1ce6b8['Key']]=_0x1ce6b8[_0x4ff7b0(0x15d)];}),_0x1d2bb3[_0x1f16ff(0x155)][_0x59f45b[_0x1f16ff(0xdf)]][_0x1f16ff(0xf5)][_0x1f16ff(0xde)]=_0x5c100f,_0xa49272[_0x1f16ff(0x155)][_0x59f45b[_0x1f16ff(0x163)]][_0x1f16ff(0xf5)][_0x1f16ff(0xde)]=_0x5c100f;}else{const _0x274b50=await fs[_0x1f16ff(0xc7)](path[_0x1f16ff(0x109)](__dirname,'..',_0x59f45b[_0x1f16ff(0x126)],_0x59f45b['SBwDc']),_0x59f45b[_0x1f16ff(0x14d)]),_0x5ce5ce={};_0x5ce5ce[_0x1f16ff(0x16c)]=CLOUDFORMATION_SCHEMA;const _0x383218=yaml[_0x1f16ff(0x129)](_0x274b50,_0x5ce5ce);_0x59f45b['VWOUx'](mergeTemplates,_0x305418,_0x383218),_0x305418['Resources'][_0x1f16ff(0x157)]['DependsOn']['push'](_0x59f45b[_0x1f16ff(0xd8)],_0x59f45b[_0x1f16ff(0x168)],_0x59f45b[_0x1f16ff(0xe7)]);const _0x1e1c64={};_0x1e1c64[_0x1f16ff(0x159)]=_0x59f45b[_0x1f16ff(0xd8)];const _0x2fd1e8={};_0x2fd1e8[_0x1f16ff(0x159)]=_0x59f45b[_0x1f16ff(0x168)];const _0x2c8059={};_0x2c8059[_0x1f16ff(0x159)]=_0x59f45b[_0x1f16ff(0xe7)],_0x305418[_0x1f16ff(0x155)][_0x1f16ff(0x157)][_0x1f16ff(0xf5)][_0x1f16ff(0xd0)][_0x1f16ff(0x14a)]=[_0x1e1c64,_0x2fd1e8,_0x2c8059],_0x305418[_0x1f16ff(0xbc)][_0x59f45b[_0x1f16ff(0x16a)]][_0x1f16ff(0xf3)][0x0]['Parameters'][_0x1f16ff(0x12a)](_0x59f45b[_0x1f16ff(0xec)],_0x59f45b[_0x1f16ff(0xe0)],_0x59f45b[_0x1f16ff(0xf7)]);const _0xd84748={};_0xd84748[_0x1f16ff(0x159)]=_0x59f45b[_0x1f16ff(0xd8)];const _0x30508f={};_0x30508f['Ref']=_0x59f45b[_0x1f16ff(0x168)];const _0x444822={};_0x444822[_0x1f16ff(0x159)]=_0x59f45b['rgSbT'],_0x305418[_0x1f16ff(0x155)][_0x1f16ff(0xfc)][_0x1f16ff(0xf5)]['Subnets']=[_0xd84748,_0x30508f,_0x444822];const _0x12af45={};_0x12af45[_0x1f16ff(0x159)]=_0x59f45b[_0x1f16ff(0xd8)];const _0x48d65b={};_0x48d65b[_0x1f16ff(0x159)]=_0x59f45b[_0x1f16ff(0x168)];const _0x4c8dee={};_0x4c8dee['Ref']=_0x59f45b['rgSbT'],_0x305418[_0x1f16ff(0x155)]['NodeGroupWindows'][_0x1f16ff(0xf5)]['Subnets']=[_0x12af45,_0x48d65b,_0x4c8dee],_0x305418[_0x1f16ff(0x14c)]['SubnetIds'][_0x1f16ff(0x15d)][_0x59f45b['Trqlh']][0x1]=[{'Ref':_0x59f45b[_0x1f16ff(0xd8)]},{'Ref':_0x59f45b[_0x1f16ff(0x168)]},{'Ref':_0x59f45b['rgSbT']}];}}},addTags=async(_0xde0fe0,_0x210e57,_0x29f0f1)=>{const _0xe4d1b4=a27_0x46ae81,_0x248b9e={'NxHjW':_0xe4d1b4(0x138),'zBkXi':function(_0x3545da,_0x4f144e){return _0x3545da(_0x4f144e);},'GHDdz':function(_0xab38c3,_0x49f1ed){return _0xab38c3(_0x49f1ed);},'VrlIo':'AWS::CloudFormation::Interface','Vhmtj':function(_0x98641f,_0x21638c){return _0x98641f(_0x21638c);},'JtUBT':_0xe4d1b4(0xf0),'mdOze':function(_0x1bd361,_0x308084){return _0x1bd361!==_0x308084;},'ouNVE':_0xe4d1b4(0x112),'JAgOv':function(_0x65ed51,_0x368254){return _0x65ed51===_0x368254;},'jWDPz':'cVKdB','eAuxn':_0xe4d1b4(0xf1),'NVPwg':_0xe4d1b4(0x106),'jiBJh':_0xe4d1b4(0xfc),'jjmUv':_0xe4d1b4(0x12c)};for(const _0x4d20ca in _0xde0fe0['Resources']){if(_0x248b9e['JAgOv'](_0x248b9e[_0xe4d1b4(0x149)],_0x248b9e[_0xe4d1b4(0x11d)]))_0x53b10e[_0xe4d1b4(0x155)][_0x34536b][_0xe4d1b4(0xf5)]['Tags'][_0xe4d1b4(0x12a)](..._0x3a7b7c);else{if(_0xde0fe0[_0xe4d1b4(0x155)][_0x4d20ca][_0xe4d1b4(0xf5)]&&_0xde0fe0['Resources'][_0x4d20ca][_0xe4d1b4(0xf5)][_0xe4d1b4(0xde)]){if(_0x248b9e['JAgOv'](_0x248b9e['NVPwg'],_0x248b9e['NVPwg']))_0xde0fe0[_0xe4d1b4(0x155)][_0x4d20ca][_0xe4d1b4(0xf5)][_0xe4d1b4(0xde)][_0xe4d1b4(0x12a)](..._0x29f0f1);else{const _0x2765c3=_0x248b9e[_0xe4d1b4(0xca)][_0xe4d1b4(0x13e)]('|');let _0x4752f4=0x0;while(!![]){switch(_0x2765c3[_0x4752f4++]){case'0':_0x471ecb[_0xe4d1b4(0x155)][_0xe4d1b4(0x12c)]['Properties'][_0xe4d1b4(0xf6)][_0xe4d1b4(0x12a)]({'Ref':'Subnet'+_0x248b9e['zBkXi'](_0x3e91f4,_0x1ed6b2)['padStart'](0x2,'0')});continue;case'1':_0x4d0547+=0x1;continue;case'2':_0x420484['Resources']['EKSCluster'][_0xe4d1b4(0xf5)][_0xe4d1b4(0xd0)][_0xe4d1b4(0x14a)][_0xe4d1b4(0x12a)]({'Ref':_0xe4d1b4(0x13a)+_0x248b9e['zBkXi'](_0x561f48,_0x5f3ede)[_0xe4d1b4(0xe5)](0x2,'0')});continue;case'3':_0x2bc15b[_0xe4d1b4(0x155)][_0xe4d1b4(0xfc)]['Properties'][_0xe4d1b4(0xf6)][_0xe4d1b4(0x12a)]({'Ref':_0xe4d1b4(0x13a)+_0x248b9e[_0xe4d1b4(0x134)](_0x40ff94,_0x32e8bb)[_0xe4d1b4(0xe5)](0x2,'0')});continue;case'4':_0x3d9381[_0xe4d1b4(0xbc)][_0x248b9e[_0xe4d1b4(0x161)]]['ParameterGroups'][0x0][_0xe4d1b4(0xfb)][_0xe4d1b4(0x12a)](_0xe4d1b4(0x13a)+_0x248b9e[_0xe4d1b4(0x12f)](_0x304d89,_0x1ba2b5)[_0xe4d1b4(0xe5)](0x2,'0'));continue;case'5':_0x358da2[_0xe4d1b4(0x14c)][_0xe4d1b4(0x14a)][_0xe4d1b4(0x15d)][_0x248b9e[_0xe4d1b4(0x150)]][0x1]['push']({'Ref':_0xe4d1b4(0x13a)+_0x248b9e[_0xe4d1b4(0x13d)](_0x630b45,_0x4460fa)[_0xe4d1b4(0xe5)](0x2,'0')});continue;}break;}}}}}const _0x220b7a={};_0x29f0f1['forEach'](_0x2fb3c5=>{const _0x2d703b=_0xe4d1b4;_0x248b9e[_0x2d703b(0x12d)](_0x248b9e[_0x2d703b(0xbd)],_0x248b9e[_0x2d703b(0xbd)])?_0x3d01cf[_0x2d703b(0x124)](_0x1560d5)[_0x2d703b(0xe8)](_0x1a08ec=>{const _0x5f53a0=_0x2d703b;var _0x38e094=_0x5deb42[_0x1a08ec];_0x5aeb34[_0x5f53a0(0x124)](_0x38e094)['forEach'](_0x49c5fa=>{_0x47a154[_0x1a08ec][_0x49c5fa]=_0x38e094[_0x49c5fa];});}):_0x220b7a[_0x2fb3c5[_0x2d703b(0x167)]]=_0x2fb3c5[_0x2d703b(0x15d)];}),_0xde0fe0[_0xe4d1b4(0x155)][_0x248b9e[_0xe4d1b4(0xf8)]]['Properties'][_0xe4d1b4(0xde)]=_0x220b7a,_0xde0fe0['Resources'][_0x248b9e['jjmUv']][_0xe4d1b4(0xf5)]['Tags']=_0x220b7a;};exports['createClusterStack']=async(_0x57765b,_0x283582,_0x439524,_0x5e009e=null,_0x576414=null,_0x23359b)=>{const _0x44982d=a27_0x46ae81,_0x56cd11={'iZFYy':function(_0x3f9e51,_0x253ed7){return _0x3f9e51(_0x253ed7);},'yMFrM':_0x44982d(0xbf),'Isvhi':_0x44982d(0xbe),'ExDDU':_0x44982d(0x125),'MTQxb':'CFTemplates','KvKoC':_0x44982d(0x10f),'bbDKn':_0x44982d(0xd4),'aVBNG':function(_0x17ee74,_0x3b6731,_0x3e4159){return _0x17ee74(_0x3b6731,_0x3e4159);},'DWtOb':function(_0x3b776e,_0x19e878){return _0x3b776e(_0x19e878);},'sZYbX':function(_0x54447c,_0x161b71,_0x17d7aa){return _0x54447c(_0x161b71,_0x17d7aa);},'FCLzB':function(_0x4c08f5,_0x44297e,_0x37a00f,_0xc6ef33){return _0x4c08f5(_0x44297e,_0x37a00f,_0xc6ef33);},'Petpe':_0x44982d(0x103),'nvbeZ':_0x44982d(0xc2),'UkRMv':_0x44982d(0x10a),'HmxDi':'NodeAutoScalingGroupMinSize','NgRlx':_0x44982d(0x117),'fZVgw':_0x44982d(0x176),'gqWAv':'NodeAutoScalingGroupMaxSize','NLScO':_0x44982d(0x10c),'dXrhu':'NodeInstanceType','WctYW':'S3BucketName','TUToC':_0x44982d(0x153),'IzRVU':_0x44982d(0x131),'FrqNN':_0x44982d(0x113),'kRdks':_0x44982d(0xcb),'POcOk':_0x44982d(0x164),'Rddcx':function(_0x2b50c1,_0x5ce20f){return _0x2b50c1!=_0x5ce20f;},'ftyfw':function(_0x498470,_0x4575f8){return _0x498470!==_0x4575f8;},'ORtcc':_0x44982d(0x136),'oSjAh':'VPC','CRECy':'Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','vARPV':_0x44982d(0xe3)},_0x355c61=COMMON_HST_TAGS,_0x1d467f={};_0x1d467f[_0x44982d(0x167)]=_0x56cd11[_0x44982d(0xcd)],_0x1d467f['Value']=_0x57765b,_0x355c61[_0x44982d(0x12a)](_0x1d467f),_0x355c61[_0x44982d(0x12a)]({'Key':_0x56cd11[_0x44982d(0xcf)],'Value':new Date()[_0x44982d(0xe1)]()[_0x44982d(0x152)]()});const _0x878599={};_0x878599[_0x44982d(0xc5)]=_0x56cd11['ExDDU'];const _0x2360b5=new AWS[(_0x44982d(0x146))](_0x878599),_0xdeed70=await fs[_0x44982d(0xc7)](path[_0x44982d(0x109)](__dirname,'..',_0x56cd11[_0x44982d(0x166)],_0x56cd11[_0x44982d(0x172)]),_0x56cd11['bbDKn']),_0xb96c2={};_0xb96c2[_0x44982d(0x16c)]=CLOUDFORMATION_SCHEMA;const _0x15daf2=yaml[_0x44982d(0x129)](_0xdeed70,_0xb96c2);await _0x56cd11[_0x44982d(0x139)](addVPCData,_0x15daf2,_0x5e009e),await _0x56cd11[_0x44982d(0xdd)](addS3Data,_0x15daf2),await _0x56cd11[_0x44982d(0x133)](addSubnetData,_0x15daf2,_0x576414),await _0x56cd11['FCLzB'](addTags,_0x15daf2,_0x57765b,_0x355c61);const _0x2834a0=JSON['stringify'](_0x15daf2),_0x4dd926={};_0x4dd926[_0x44982d(0x119)]=CLUSTER_DEP_STACK_NAME+'-'+_0x57765b,_0x4dd926[_0x44982d(0x14b)]=_0x56cd11['Petpe'],_0x4dd926[_0x44982d(0x127)]=_0x2834a0,_0x4dd926[_0x44982d(0xfb)]=[{'ParameterKey':_0x56cd11['nvbeZ'],'ParameterValue':_0x57765b},{'ParameterKey':_0x56cd11[_0x44982d(0x10e)],'ParameterValue':_0x57765b+_0x44982d(0x115)},{'ParameterKey':_0x56cd11[_0x44982d(0x13b)],'ParameterValue':''+_0x283582},{'ParameterKey':_0x56cd11[_0x44982d(0x11f)],'ParameterValue':'0'},{'ParameterKey':_0x56cd11[_0x44982d(0xfe)],'ParameterValue':'1'},{'ParameterKey':_0x56cd11[_0x44982d(0x15f)],'ParameterValue':''+_0x439524},{'ParameterKey':_0x56cd11[_0x44982d(0x104)],'ParameterValue':global_registry[_0x44982d(0x15a)]},{'ParameterKey':_0x56cd11['dXrhu'],'ParameterValue':global_registry[_0x44982d(0x14e)]},{'ParameterKey':_0x56cd11[_0x44982d(0x135)],'ParameterValue':global_registry['s3Bucket']},{'ParameterKey':_0x56cd11[_0x44982d(0x11e)],'ParameterValue':_0x57765b+_0x44982d(0x144)},{'ParameterKey':_0x56cd11[_0x44982d(0x10d)],'ParameterValue':_0x23359b?_0x56cd11[_0x44982d(0x170)]:_0x56cd11[_0x44982d(0x143)]}],_0x4dd926[_0x44982d(0x118)]=[_0x56cd11[_0x44982d(0x101)]],_0x4dd926['Tags']=_0x355c61;const _0x281ddf=_0x4dd926;if(_0x56cd11[_0x44982d(0x16f)](_0x5e009e,null)&&_0x56cd11[_0x44982d(0x11a)](_0x5e009e,undefined)){if(_0x56cd11[_0x44982d(0x11a)](_0x56cd11['ORtcc'],_0x56cd11[_0x44982d(0xe4)]))_0x162fd8[_0x57b109][_0x1d8160]=_0x484ed6[_0x5ee034];else{const _0x5e4040={};_0x5e4040['ParameterKey']=_0x56cd11[_0x44982d(0x173)],_0x5e4040[_0x44982d(0x128)]=_0x5e009e,_0x281ddf[_0x44982d(0xfb)][_0x44982d(0x12a)](_0x5e4040);}}if(_0x56cd11[_0x44982d(0x16f)](_0x576414,null)&&_0x56cd11[_0x44982d(0x11a)](_0x576414,undefined)){let _0x1b0d81=0x1;_0x576414['forEach'](_0x46d618=>{const _0x2f213b=_0x44982d;_0x281ddf['Parameters'][_0x2f213b(0x12a)]({'ParameterKey':_0x2f213b(0x13a)+_0x56cd11[_0x2f213b(0xed)](String,_0x1b0d81)['padStart'](0x2,'0'),'ParameterValue':_0x46d618['value']}),_0x1b0d81+=0x1;});}const _0xddb407=await _0x2360b5[_0x44982d(0xfa)](_0x281ddf)[_0x44982d(0xfd)]();logger[_0x44982d(0xf9)](_0x56cd11[_0x44982d(0x16d)]);const _0x29d496={};return _0x29d496['StackName']=_0xddb407[_0x44982d(0xc6)],_0x2360b5[_0x44982d(0x154)](_0x56cd11[_0x44982d(0xc1)],_0x29d496)[_0x44982d(0xfd)]();};