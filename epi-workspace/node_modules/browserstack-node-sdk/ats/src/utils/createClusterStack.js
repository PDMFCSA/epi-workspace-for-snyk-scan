const a27_0x115c40=a27_0x540f;(function(_0x5e2cd4,_0x297a10){const _0x196e97=a27_0x540f,_0x54545e=_0x5e2cd4();while(!![]){try{const _0x5b023b=parseInt(_0x196e97(0x207))/0x1*(parseInt(_0x196e97(0x1d9))/0x2)+-parseInt(_0x196e97(0x26c))/0x3*(parseInt(_0x196e97(0x24f))/0x4)+parseInt(_0x196e97(0x1f2))/0x5+-parseInt(_0x196e97(0x220))/0x6*(-parseInt(_0x196e97(0x24d))/0x7)+-parseInt(_0x196e97(0x1eb))/0x8*(parseInt(_0x196e97(0x1c3))/0x9)+-parseInt(_0x196e97(0x231))/0xa*(-parseInt(_0x196e97(0x1f7))/0xb)+-parseInt(_0x196e97(0x244))/0xc;if(_0x5b023b===_0x297a10)break;else _0x54545e['push'](_0x54545e['shift']());}catch(_0xcb5c3f){_0x54545e['push'](_0x54545e['shift']());}}}(a27_0x5897,0x7af33));const fs=require('fs'),path=require(a27_0x115c40(0x1db)),Promise=require(a27_0x115c40(0x1f1)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),AWS=require(a27_0x115c40(0x20c))[a27_0x115c40(0x1ea)],{CLUSTER_DEP_STACK_NAME,COMMON_HST_TAGS,global_registry}=require(a27_0x115c40(0x1bd)),{logger}=require('../config/logger'),{isBucketPresent}=require(a27_0x115c40(0x20c));Promise[a27_0x115c40(0x242)](fs);const mergeTemplates=(_0x31a51b,_0x861ae9)=>{const _0x1da285=a27_0x115c40,_0x18f21b={};_0x18f21b[_0x1da285(0x1c9)]=function(_0x3add02,_0x202005){return _0x3add02===_0x202005;},_0x18f21b[_0x1da285(0x259)]=_0x1da285(0x251),_0x18f21b[_0x1da285(0x232)]='sRclO';const _0x5286d8=_0x18f21b;Object[_0x1da285(0x1cb)](_0x861ae9)[_0x1da285(0x25e)](_0x190694=>{const _0x4c48b6=_0x1da285,_0xaec8c0={'lXFMO':function(_0x4d6295,_0x5907b2){const _0x5acf8b=a27_0x540f;return _0x5286d8[_0x5acf8b(0x1c9)](_0x4d6295,_0x5907b2);},'jcxHV':_0x5286d8[_0x4c48b6(0x259)]};if(_0x5286d8[_0x4c48b6(0x1c9)](_0x5286d8['sYQSD'],_0x5286d8[_0x4c48b6(0x232)])){var _0x2fdb6b=_0x861ae9[_0x190694];Object[_0x4c48b6(0x1cb)](_0x2fdb6b)[_0x4c48b6(0x25e)](_0x10a33b=>{const _0x2e977c=_0x4c48b6;_0xaec8c0[_0x2e977c(0x1d3)](_0xaec8c0['jcxHV'],_0xaec8c0[_0x2e977c(0x267)])?_0x31a51b[_0x190694][_0x10a33b]=_0x2fdb6b[_0x10a33b]:_0x3b3a34[_0xcc1fb8[_0x2e977c(0x211)]]=_0x11873b[_0x2e977c(0x201)];});}else _0x331236[_0x4c48b6(0x1f4)][_0x492ea6][_0x4c48b6(0x26b)][_0x4c48b6(0x1e4)][_0x4c48b6(0x1dc)](..._0x288d6f);});},addVPCData=async(_0x220543,_0x2516e2)=>{const _0x5aafac=a27_0x115c40,_0x13864b={'wGUGw':_0x5aafac(0x22c),'qCGYt':function(_0x386629,_0x259b90){return _0x386629(_0x259b90);},'XUEqV':function(_0x30b898,_0x10204){return _0x30b898!==_0x10204;},'FxyTJ':_0x5aafac(0x218),'LBvEK':'CFTemplates','eTIHf':_0x5aafac(0x1ef),'XyeNU':_0x5aafac(0x24a),'slqVN':function(_0x48397d,_0x139bae,_0x50361b){return _0x48397d(_0x139bae,_0x50361b);},'JxRjO':'AWS::CloudFormation::Interface','yBFGz':_0x5aafac(0x221),'hrkUh':_0x5aafac(0x1bc),'RgZsd':_0x5aafac(0x21c),'AlRBs':function(_0xe791cf,_0x1ec4e7,_0x168ac1){return _0xe791cf(_0x1ec4e7,_0x168ac1);},'jgEVd':_0x5aafac(0x254)};if(_0x2516e2){if(_0x13864b[_0x5aafac(0x269)](_0x13864b[_0x5aafac(0x20b)],_0x13864b[_0x5aafac(0x20b)])){const _0x29c7de={};_0x29c7de[_0x5aafac(0x21f)]=_0x13864b['wGUGw'],_0x29c7de['ParameterValue']=_0x3e3451,_0x2ca66e[_0x5aafac(0x22f)][_0x5aafac(0x1dc)](_0x29c7de);}else{const _0x5218ae=await fs[_0x5aafac(0x1fc)](path['join'](__dirname,'..',_0x13864b['LBvEK'],_0x13864b[_0x5aafac(0x225)]),_0x13864b['XyeNU']),_0x540970={};_0x540970['schema']=CLOUDFORMATION_SCHEMA;const _0x39b844=yaml[_0x5aafac(0x1cd)](_0x5218ae,_0x540970);_0x13864b[_0x5aafac(0x1fb)](mergeTemplates,_0x220543,_0x39b844),_0x220543['Metadata'][_0x13864b[_0x5aafac(0x1e2)]][_0x5aafac(0x1fa)][0x0][_0x5aafac(0x22f)]['push'](_0x13864b[_0x5aafac(0x265)]);}}else{if(_0x13864b[_0x5aafac(0x269)](_0x13864b[_0x5aafac(0x229)],_0x13864b[_0x5aafac(0x22b)])){const _0x168193=await fs[_0x5aafac(0x1fc)](path[_0x5aafac(0x26a)](__dirname,'..',_0x13864b[_0x5aafac(0x257)],_0x13864b[_0x5aafac(0x1f9)]),_0x13864b[_0x5aafac(0x23f)]),_0x350627={};_0x350627[_0x5aafac(0x25f)]=CLOUDFORMATION_SCHEMA;const _0x540b35=yaml[_0x5aafac(0x1cd)](_0x168193,_0x350627);_0x13864b['AlRBs'](mergeTemplates,_0x220543,_0x540b35),_0x220543[_0x5aafac(0x256)][_0x13864b[_0x5aafac(0x1e2)]][_0x5aafac(0x1fa)][0x0][_0x5aafac(0x22f)][_0x5aafac(0x1dc)](_0x13864b[_0x5aafac(0x1e5)]);}else _0x4b2f70[_0x5aafac(0x22f)][_0x5aafac(0x1dc)]({'ParameterKey':_0x5aafac(0x262)+_0x13864b['qCGYt'](_0x302ced,_0x26cefd)['padStart'](0x2,'0'),'ParameterValue':_0x369957[_0x5aafac(0x219)]}),_0x495f9e+=0x1;}},addS3Data=async _0xf6112e=>{const _0xe5039=a27_0x115c40,_0x6f59f={'efioO':'3|5|2|1|4|0','jNBtR':function(_0x4c040a,_0x1d4601){return _0x4c040a(_0x1d4601);},'WvTij':function(_0xfeb670,_0xc7137){return _0xfeb670(_0xc7137);},'UPgCo':_0xe5039(0x1d8),'cuXbS':'AWS::CloudFormation::Interface','RGoYA':function(_0x33d618,_0x3cbac7){return _0x33d618(_0x3cbac7);},'XLDYJ':_0xe5039(0x1b9),'qJRnq':'s3-create.yaml','xLnqM':_0xe5039(0x24a),'oNovA':function(_0x279695,_0x1fffd6){return _0x279695===_0x1fffd6;},'SUSTh':_0xe5039(0x25b),'WRjVG':function(_0x23482b,_0x5789cf,_0x579b93){return _0x23482b(_0x5789cf,_0x579b93);}},_0x30a3fc=await fs['readFileAsync'](path['join'](__dirname,'..',_0x6f59f['XLDYJ'],_0x6f59f[_0xe5039(0x250)]),_0x6f59f['xLnqM']),_0x49ba76={};_0x49ba76[_0xe5039(0x25f)]=CLOUDFORMATION_SCHEMA;const _0x37ea3d=yaml[_0xe5039(0x1cd)](_0x30a3fc,_0x49ba76),_0x5d2aeb=await _0x6f59f['jNBtR'](isBucketPresent,global_registry['s3Bucket']);if(_0x6f59f['oNovA'](_0x5d2aeb,![])){if(_0x6f59f[_0xe5039(0x1e8)](_0x6f59f[_0xe5039(0x20e)],_0x6f59f[_0xe5039(0x20e)]))_0x6f59f[_0xe5039(0x261)](mergeTemplates,_0xf6112e,_0x37ea3d);else{const _0x34401c=_0x6f59f[_0xe5039(0x1de)][_0xe5039(0x1bb)]('|');let _0xb85d83=0x0;while(!![]){switch(_0x34401c[_0xb85d83++]){case'0':_0x4fe261+=0x1;continue;case'1':_0x415c10[_0xe5039(0x1f4)][_0xe5039(0x205)][_0xe5039(0x26b)][_0xe5039(0x1be)][_0xe5039(0x1dc)]({'Ref':'Subnet'+_0x6f59f[_0xe5039(0x1b2)](_0x30399c,_0x2ede5c)[_0xe5039(0x240)](0x2,'0')});continue;case'2':_0x11235b['Resources'][_0xe5039(0x1ee)][_0xe5039(0x26b)][_0xe5039(0x1be)][_0xe5039(0x1dc)]({'Ref':_0xe5039(0x262)+_0x6f59f[_0xe5039(0x1b2)](_0x170998,_0x1de263)[_0xe5039(0x240)](0x2,'0')});continue;case'3':_0x1ee76e['Resources'][_0xe5039(0x212)][_0xe5039(0x26b)]['ResourcesVpcConfig'][_0xe5039(0x1d0)]['push']({'Ref':'Subnet'+_0x6f59f[_0xe5039(0x209)](_0x11286a,_0x58b73d)['padStart'](0x2,'0')});continue;case'4':_0x323b32['Outputs'][_0xe5039(0x1d0)][_0xe5039(0x201)][_0x6f59f[_0xe5039(0x1bf)]][0x1][_0xe5039(0x1dc)]({'Ref':_0xe5039(0x262)+_0x6f59f[_0xe5039(0x209)](_0x37b53b,_0x18fba4)[_0xe5039(0x240)](0x2,'0')});continue;case'5':_0x241987[_0xe5039(0x256)][_0x6f59f[_0xe5039(0x1ba)]][_0xe5039(0x1fa)][0x0][_0xe5039(0x22f)][_0xe5039(0x1dc)]('Subnet'+_0x6f59f[_0xe5039(0x1ed)](_0x35f4f5,_0x17fae8)[_0xe5039(0x240)](0x2,'0'));continue;}break;}}}},addSubnetData=async(_0xa4a773,_0x393a4f)=>{const _0x34c8be=a27_0x115c40,_0x454622={'EdSzL':function(_0x12a439,_0x16dea8){return _0x12a439===_0x16dea8;},'fuwLB':'ilhWD','OtlWj':_0x34c8be(0x216),'FpERU':function(_0x18a718,_0x5276e4){return _0x18a718(_0x5276e4);},'NaTlf':function(_0x14de1d,_0x38ec78){return _0x14de1d(_0x38ec78);},'sfczZ':_0x34c8be(0x214),'Lifdh':function(_0xebe444,_0x5758f3){return _0xebe444(_0x5758f3);},'qzvgE':_0x34c8be(0x1d8),'MPgCJ':function(_0x156951,_0x3b2163){return _0x156951(_0x3b2163);},'NlxUS':function(_0x448e15,_0xfc8de,_0x28f581){return _0x448e15(_0xfc8de,_0x28f581);},'VAJkB':'WmJEq','ocVtW':_0x34c8be(0x1b5),'GDKac':'CFTemplates','ZHFvw':'subnet-import.yaml','HMYZk':'utf-8','dfqFr':function(_0x39ef44,_0x4f4200,_0xc7c88a){return _0x39ef44(_0x4f4200,_0xc7c88a);},'xRHwW':function(_0x206ce6,_0x259cbc){return _0x206ce6!==_0x259cbc;},'MmjyP':'SdkoU','uHXlA':'subnet-create.yaml','hEcde':function(_0x46ab68,_0x22c047,_0x3e0950){return _0x46ab68(_0x22c047,_0x3e0950);},'Buptj':_0x34c8be(0x200),'hWelC':_0x34c8be(0x1ff),'RlRww':_0x34c8be(0x22a),'msiAE':_0x34c8be(0x260),'QMBoQ':_0x34c8be(0x22d),'xDBJL':_0x34c8be(0x1fe)};if(_0x393a4f){if(_0x454622[_0x34c8be(0x21a)](_0x454622['VAJkB'],_0x454622[_0x34c8be(0x237)]))_0x169e83[_0x34c8be(0x1f4)][_0x5965d2][_0x34c8be(0x26b)]&&_0x393764[_0x34c8be(0x1f4)][_0xc7256e][_0x34c8be(0x26b)]['Tags']&&_0x52222f[_0x34c8be(0x1f4)][_0x587d5a][_0x34c8be(0x26b)][_0x34c8be(0x1e4)][_0x34c8be(0x1dc)](..._0x16d47a);else{const _0x3ad3a3=await fs[_0x34c8be(0x1fc)](path[_0x34c8be(0x26a)](__dirname,'..',_0x454622[_0x34c8be(0x245)],_0x454622[_0x34c8be(0x1b1)]),_0x454622[_0x34c8be(0x236)]),_0xd2188={};_0xd2188['schema']=CLOUDFORMATION_SCHEMA;const _0x21c669=yaml[_0x34c8be(0x1cd)](_0x3ad3a3,_0xd2188);_0x454622['dfqFr'](mergeTemplates,_0xa4a773,_0x21c669);let _0x47a5f5=0x1;_0x393a4f[_0x34c8be(0x25e)](_0x7c58ee=>{const _0x42518f=_0x34c8be;if(_0x454622[_0x42518f(0x21a)](_0x454622['fuwLB'],_0x454622[_0x42518f(0x252)])){const _0x45efd6=_0x454622['OtlWj']['split']('|');let _0xe3a086=0x0;while(!![]){switch(_0x45efd6[_0xe3a086++]){case'0':_0xa4a773[_0x42518f(0x1f4)][_0x42518f(0x1ee)][_0x42518f(0x26b)][_0x42518f(0x1be)][_0x42518f(0x1dc)]({'Ref':_0x42518f(0x262)+_0x454622[_0x42518f(0x208)](String,_0x47a5f5)[_0x42518f(0x240)](0x2,'0')});continue;case'1':_0xa4a773[_0x42518f(0x1f4)][_0x42518f(0x205)]['Properties'][_0x42518f(0x1be)][_0x42518f(0x1dc)]({'Ref':_0x42518f(0x262)+_0x454622['NaTlf'](String,_0x47a5f5)[_0x42518f(0x240)](0x2,'0')});continue;case'2':_0xa4a773['Metadata'][_0x454622[_0x42518f(0x223)]][_0x42518f(0x1fa)][0x0][_0x42518f(0x22f)][_0x42518f(0x1dc)](_0x42518f(0x262)+_0x454622[_0x42518f(0x208)](String,_0x47a5f5)[_0x42518f(0x240)](0x2,'0'));continue;case'3':_0x47a5f5+=0x1;continue;case'4':_0xa4a773[_0x42518f(0x1f4)][_0x42518f(0x212)]['Properties'][_0x42518f(0x263)][_0x42518f(0x1d0)]['push']({'Ref':'Subnet'+_0x454622['Lifdh'](String,_0x47a5f5)[_0x42518f(0x240)](0x2,'0')});continue;case'5':_0xa4a773[_0x42518f(0x1c5)]['SubnetIds'][_0x42518f(0x201)][_0x454622[_0x42518f(0x24c)]][0x1][_0x42518f(0x1dc)]({'Ref':_0x42518f(0x262)+_0x454622['MPgCJ'](String,_0x47a5f5)['padStart'](0x2,'0')});continue;}break;}}else _0x3fdbec[_0x4ca1d2][_0x9923a7]=_0x2433e0[_0x2f3abd];});}}else{if(_0x454622[_0x34c8be(0x239)](_0x454622[_0x34c8be(0x202)],_0x454622[_0x34c8be(0x202)]))_0x454622[_0x34c8be(0x241)](_0x1a426d,_0xb81b91,_0x4f2d05);else{const _0x5cce97=await fs[_0x34c8be(0x1fc)](path[_0x34c8be(0x26a)](__dirname,'..',_0x454622[_0x34c8be(0x245)],_0x454622[_0x34c8be(0x1b7)]),_0x454622[_0x34c8be(0x236)]),_0x3e57cf={};_0x3e57cf[_0x34c8be(0x25f)]=CLOUDFORMATION_SCHEMA;const _0x2b41d9=yaml[_0x34c8be(0x1cd)](_0x5cce97,_0x3e57cf);_0x454622['hEcde'](mergeTemplates,_0xa4a773,_0x2b41d9),_0xa4a773[_0x34c8be(0x1f4)][_0x34c8be(0x212)][_0x34c8be(0x24b)][_0x34c8be(0x1dc)](_0x454622[_0x34c8be(0x268)],_0x454622[_0x34c8be(0x1d2)],_0x454622['RlRww']);const _0x49c55e={};_0x49c55e[_0x34c8be(0x1cf)]=_0x454622[_0x34c8be(0x268)];const _0x2866e9={};_0x2866e9[_0x34c8be(0x1cf)]=_0x454622[_0x34c8be(0x1d2)];const _0x454feb={};_0x454feb[_0x34c8be(0x1cf)]=_0x454622[_0x34c8be(0x1df)],_0xa4a773['Resources'][_0x34c8be(0x212)][_0x34c8be(0x26b)]['ResourcesVpcConfig']['SubnetIds']=[_0x49c55e,_0x2866e9,_0x454feb],_0xa4a773[_0x34c8be(0x256)][_0x454622[_0x34c8be(0x223)]][_0x34c8be(0x1fa)][0x0][_0x34c8be(0x22f)]['push'](_0x454622[_0x34c8be(0x1b8)],_0x454622[_0x34c8be(0x234)],_0x454622[_0x34c8be(0x1d6)]);const _0x1bf0dd={};_0x1bf0dd[_0x34c8be(0x1cf)]=_0x454622[_0x34c8be(0x268)];const _0x430b52={};_0x430b52[_0x34c8be(0x1cf)]=_0x454622['hWelC'];const _0x4faa24={};_0x4faa24[_0x34c8be(0x1cf)]=_0x454622[_0x34c8be(0x1df)],_0xa4a773['Resources'][_0x34c8be(0x1ee)][_0x34c8be(0x26b)]['Subnets']=[_0x1bf0dd,_0x430b52,_0x4faa24];const _0x23b2c2={};_0x23b2c2[_0x34c8be(0x1cf)]=_0x454622['Buptj'];const _0x3f0294={};_0x3f0294[_0x34c8be(0x1cf)]=_0x454622[_0x34c8be(0x1d2)];const _0x3fd410={};_0x3fd410[_0x34c8be(0x1cf)]=_0x454622[_0x34c8be(0x1df)],_0xa4a773[_0x34c8be(0x1f4)][_0x34c8be(0x205)]['Properties']['Subnets']=[_0x23b2c2,_0x3f0294,_0x3fd410],_0xa4a773[_0x34c8be(0x1c5)][_0x34c8be(0x1d0)]['Value'][_0x454622[_0x34c8be(0x24c)]][0x1]=[{'Ref':_0x454622[_0x34c8be(0x268)]},{'Ref':_0x454622['hWelC']},{'Ref':_0x454622[_0x34c8be(0x1df)]}];}}},addTags=async(_0x141e78,_0x5dc69a,_0x23fc4c)=>{const _0x2688bd=a27_0x115c40,_0x19e9fd={'WOznP':'NodeGroup','GCPFG':_0x2688bd(0x205),'ZjXBi':function(_0x553e17,_0x2397ad){return _0x553e17(_0x2397ad);},'SQOey':function(_0x27365a,_0x315dd2){return _0x27365a===_0x315dd2;},'ToVQd':'biFTi','vVwKG':'bCeDM','YpQgS':function(_0x24bdc0,_0x5b3014){return _0x24bdc0===_0x5b3014;},'FCTZQ':_0x2688bd(0x249),'bVeLd':function(_0x18fb0d,_0x9c9cba){return _0x18fb0d!==_0x9c9cba;},'COVbF':_0x2688bd(0x1cc),'ZaJhD':_0x2688bd(0x215)};for(const _0xd66aad in _0x141e78[_0x2688bd(0x1f4)]){if(_0x19e9fd[_0x2688bd(0x21e)](_0x19e9fd['FCTZQ'],_0x19e9fd[_0x2688bd(0x1e6)])){if(_0x141e78[_0x2688bd(0x1f4)][_0xd66aad][_0x2688bd(0x26b)]&&_0x141e78[_0x2688bd(0x1f4)][_0xd66aad]['Properties'][_0x2688bd(0x1e4)]){if(_0x19e9fd[_0x2688bd(0x224)](_0x19e9fd[_0x2688bd(0x264)],_0x19e9fd[_0x2688bd(0x1e9)]))_0x141e78['Resources'][_0xd66aad][_0x2688bd(0x26b)][_0x2688bd(0x1e4)][_0x2688bd(0x1dc)](..._0x23fc4c);else{for(const _0x51c77b in _0x57a7ca[_0x2688bd(0x1f4)]){_0x780fa9[_0x2688bd(0x1f4)][_0x51c77b][_0x2688bd(0x26b)]&&_0x1b366c['Resources'][_0x51c77b]['Properties']['Tags']&&_0x5aa617[_0x2688bd(0x1f4)][_0x51c77b][_0x2688bd(0x26b)][_0x2688bd(0x1e4)][_0x2688bd(0x1dc)](..._0x5e5b4d);}const _0x2ba913={};_0x517547[_0x2688bd(0x25e)](_0x52edf5=>{const _0x5a2542=_0x2688bd;_0x2ba913[_0x52edf5[_0x5a2542(0x211)]]=_0x52edf5[_0x5a2542(0x201)];}),_0x1db8bb[_0x2688bd(0x1f4)][_0x19e9fd[_0x2688bd(0x1d1)]][_0x2688bd(0x26b)]['Tags']=_0x2ba913,_0x152e82['Resources'][_0x19e9fd[_0x2688bd(0x25c)]][_0x2688bd(0x26b)][_0x2688bd(0x1e4)]=_0x2ba913;}}}else{const _0x3c6479={'Zmbes':function(_0x3d0892,_0x1257a7){const _0x36fdea=_0x2688bd;return _0x19e9fd[_0x36fdea(0x1f3)](_0x3d0892,_0x1257a7);}};let _0xed6d76=0x1;_0x364b5f[_0x2688bd(0x25e)](_0x16a105=>{const _0x3677a7=_0x2688bd;_0x287b7e[_0x3677a7(0x22f)][_0x3677a7(0x1dc)]({'ParameterKey':_0x3677a7(0x262)+_0x3c6479[_0x3677a7(0x1b3)](_0x2c4ec9,_0xed6d76)[_0x3677a7(0x240)](0x2,'0'),'ParameterValue':_0x16a105['value']}),_0xed6d76+=0x1;});}}const _0x2ca06e={};_0x23fc4c[_0x2688bd(0x25e)](_0x180943=>{const _0x45340d=_0x2688bd;_0x19e9fd[_0x45340d(0x23c)](_0x19e9fd[_0x45340d(0x1b4)],_0x19e9fd[_0x45340d(0x23a)])?_0x24a5f8[_0x45340d(0x1cb)](_0x56adea)[_0x45340d(0x25e)](_0x543d8a=>{const _0x47c967=_0x45340d;var _0x905935=_0x2e3fbd[_0x543d8a];_0x52facb['keys'](_0x905935)[_0x47c967(0x25e)](_0x9e854=>{_0x5df52f[_0x543d8a][_0x9e854]=_0x905935[_0x9e854];});}):_0x2ca06e[_0x180943['Key']]=_0x180943[_0x45340d(0x201)];}),_0x141e78[_0x2688bd(0x1f4)][_0x19e9fd['WOznP']][_0x2688bd(0x26b)]['Tags']=_0x2ca06e,_0x141e78['Resources'][_0x19e9fd[_0x2688bd(0x25c)]]['Properties']['Tags']=_0x2ca06e;};exports[a27_0x115c40(0x1c2)]=async(_0x609d48,_0x4d53d1,_0x519491,_0x32069b=null,_0x3ddafa=null,_0x4a10ce)=>{const _0x1f90e1=a27_0x115c40,_0x284c7b={'TwwKU':function(_0x178411,_0x254754){return _0x178411(_0x254754);},'zAcdg':'browserstack:cluster','PNeJS':'browserstack:creationDate','gbyMa':_0x1f90e1(0x25a),'KvBxt':'CFTemplates','NMukW':_0x1f90e1(0x226),'qBWTH':_0x1f90e1(0x24a),'brsCf':function(_0x1fe2e7,_0x4edab9,_0x41be8e){return _0x1fe2e7(_0x4edab9,_0x41be8e);},'dPLrc':function(_0xe058d3,_0x5b9157){return _0xe058d3(_0x5b9157);},'oyMuU':function(_0x4d4508,_0x1e005b,_0x50d6a2){return _0x4d4508(_0x1e005b,_0x50d6a2);},'VrPVC':function(_0x3edae7,_0x1e39f2,_0x152d78,_0x2f8fd3){return _0x3edae7(_0x1e39f2,_0x152d78,_0x2f8fd3);},'MmlDV':_0x1f90e1(0x1b6),'IHbCW':_0x1f90e1(0x235),'xYjCb':'NodeGroupName','erITN':'NodeAutoScalingGroupMinSize','thUlA':_0x1f90e1(0x230),'obhTU':_0x1f90e1(0x1c0),'WMMiY':_0x1f90e1(0x1f6),'rjpqn':'NodeImageId','jWQhU':_0x1f90e1(0x1c4),'XEXMs':_0x1f90e1(0x217),'mGGjj':_0x1f90e1(0x21d),'elHmm':'ClusterAutoUpgrade','PMfAm':_0x1f90e1(0x20d),'oUbiS':_0x1f90e1(0x23d),'TUFwI':_0x1f90e1(0x1e1),'qXvIk':function(_0xc8a57f,_0x575c1c){return _0xc8a57f!=_0x575c1c;},'jdhhr':function(_0x195568,_0xe7bc5){return _0x195568!==_0xe7bc5;},'LFNeL':function(_0x1196b8,_0x3b615a){return _0x1196b8===_0x3b615a;},'aeLSd':_0x1f90e1(0x227),'UQJfV':_0x1f90e1(0x1e3),'ukyxj':_0x1f90e1(0x22c),'GgZUi':_0x1f90e1(0x20a),'lZeXm':_0x1f90e1(0x22e)},_0x29ae0e=COMMON_HST_TAGS,_0x614ecf={};_0x614ecf[_0x1f90e1(0x211)]=_0x284c7b['zAcdg'],_0x614ecf[_0x1f90e1(0x201)]=_0x609d48,_0x29ae0e['push'](_0x614ecf),_0x29ae0e[_0x1f90e1(0x1dc)]({'Key':_0x284c7b[_0x1f90e1(0x24e)],'Value':new Date()[_0x1f90e1(0x21b)]()[_0x1f90e1(0x25d)]()});const _0x31fddd={};_0x31fddd['apiVersion']=_0x284c7b['gbyMa'];const _0x4626c6=new AWS['CloudFormation'](_0x31fddd),_0x7ae6c=await fs[_0x1f90e1(0x1fc)](path[_0x1f90e1(0x26a)](__dirname,'..',_0x284c7b[_0x1f90e1(0x1f5)],_0x284c7b[_0x1f90e1(0x1c1)]),_0x284c7b['qBWTH']),_0x58d001={};_0x58d001[_0x1f90e1(0x25f)]=CLOUDFORMATION_SCHEMA;const _0x26da1d=yaml[_0x1f90e1(0x1cd)](_0x7ae6c,_0x58d001);await _0x284c7b[_0x1f90e1(0x1ec)](addVPCData,_0x26da1d,_0x32069b),await _0x284c7b[_0x1f90e1(0x238)](addS3Data,_0x26da1d),await _0x284c7b[_0x1f90e1(0x1c6)](addSubnetData,_0x26da1d,_0x3ddafa),await _0x284c7b[_0x1f90e1(0x1e0)](addTags,_0x26da1d,_0x609d48,_0x29ae0e);const _0x3a482e=JSON[_0x1f90e1(0x1d4)](_0x26da1d),_0x4b730c={};_0x4b730c[_0x1f90e1(0x1ca)]=CLUSTER_DEP_STACK_NAME+'-'+_0x609d48,_0x4b730c[_0x1f90e1(0x1dd)]=_0x284c7b['MmlDV'],_0x4b730c['TemplateBody']=_0x3a482e,_0x4b730c[_0x1f90e1(0x22f)]=[{'ParameterKey':_0x284c7b['IHbCW'],'ParameterValue':_0x609d48},{'ParameterKey':_0x284c7b[_0x1f90e1(0x258)],'ParameterValue':_0x609d48+_0x1f90e1(0x1c8)},{'ParameterKey':_0x284c7b[_0x1f90e1(0x210)],'ParameterValue':''+_0x4d53d1},{'ParameterKey':_0x284c7b[_0x1f90e1(0x1b0)],'ParameterValue':'0'},{'ParameterKey':_0x284c7b[_0x1f90e1(0x248)],'ParameterValue':'1'},{'ParameterKey':_0x284c7b[_0x1f90e1(0x1fd)],'ParameterValue':''+_0x519491},{'ParameterKey':_0x284c7b[_0x1f90e1(0x23e)],'ParameterValue':global_registry[_0x1f90e1(0x1da)]},{'ParameterKey':_0x284c7b[_0x1f90e1(0x203)],'ParameterValue':global_registry[_0x1f90e1(0x204)]},{'ParameterKey':_0x284c7b[_0x1f90e1(0x253)],'ParameterValue':global_registry['s3Bucket']},{'ParameterKey':_0x284c7b[_0x1f90e1(0x255)],'ParameterValue':_0x609d48+_0x1f90e1(0x1e7)},{'ParameterKey':_0x284c7b[_0x1f90e1(0x20f)],'ParameterValue':_0x4a10ce?_0x284c7b[_0x1f90e1(0x1f0)]:_0x284c7b[_0x1f90e1(0x213)]}],_0x4b730c[_0x1f90e1(0x233)]=[_0x284c7b[_0x1f90e1(0x243)]],_0x4b730c[_0x1f90e1(0x1e4)]=_0x29ae0e;const _0x416f29=_0x4b730c;if(_0x284c7b[_0x1f90e1(0x1ce)](_0x32069b,null)&&_0x284c7b['jdhhr'](_0x32069b,undefined)){if(_0x284c7b[_0x1f90e1(0x206)](_0x284c7b['aeLSd'],_0x284c7b[_0x1f90e1(0x1d5)])){var _0x5d4fd3=_0x39c5a7[_0x83319d];_0x492718[_0x1f90e1(0x1cb)](_0x5d4fd3)['forEach'](_0x4ecfed=>{_0xa40bd7[_0x1301c8][_0x4ecfed]=_0x5d4fd3[_0x4ecfed];});}else{const _0x36d8c4={};_0x36d8c4[_0x1f90e1(0x21f)]=_0x284c7b[_0x1f90e1(0x222)],_0x36d8c4[_0x1f90e1(0x247)]=_0x32069b,_0x416f29[_0x1f90e1(0x22f)]['push'](_0x36d8c4);}}if(_0x284c7b[_0x1f90e1(0x1ce)](_0x3ddafa,null)&&_0x284c7b[_0x1f90e1(0x246)](_0x3ddafa,undefined)){let _0x593493=0x1;_0x3ddafa[_0x1f90e1(0x25e)](_0x35de7f=>{const _0x5b1e1d=_0x1f90e1;_0x416f29[_0x5b1e1d(0x22f)][_0x5b1e1d(0x1dc)]({'ParameterKey':_0x5b1e1d(0x262)+_0x284c7b['TwwKU'](String,_0x593493)[_0x5b1e1d(0x240)](0x2,'0'),'ParameterValue':_0x35de7f['value']}),_0x593493+=0x1;});}const _0x46b821=await _0x4626c6[_0x1f90e1(0x1f8)](_0x416f29)['promise']();logger[_0x1f90e1(0x266)](_0x284c7b[_0x1f90e1(0x1d7)]);const _0x183fe2={};return _0x183fe2['StackName']=_0x46b821[_0x1f90e1(0x228)],_0x4626c6[_0x1f90e1(0x23b)](_0x284c7b['lZeXm'],_0x183fe2)[_0x1f90e1(0x1c7)]();};function a27_0x540f(_0x3a581b,_0x245f33){const _0x58978a=a27_0x5897();return a27_0x540f=function(_0x540fcb,_0xe4e58f){_0x540fcb=_0x540fcb-0x1b0;let _0x232f80=_0x58978a[_0x540fcb];return _0x232f80;},a27_0x540f(_0x3a581b,_0x245f33);}function a27_0x5897(){const _0x96e4c9=['WvTij','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','FxyTJ','./AWSUtils','true','SUSTh','elHmm','erITN','Key','EKSCluster','oUbiS','AWS::CloudFormation::Interface','qHYZT','4|2|0|1|5|3','S3BucketName','JUwKo','value','EdSzL','valueOf','vpc-create.yaml','NodeGroupNameWindows','YpQgS','ParameterKey','29100NFjpKZ','tBlvK','ukyxj','sfczZ','bVeLd','eTIHf','aws-eks-cluster-dep.yaml','MVavl','StackId','yBFGz','Subnet03','hrkUh','VPC','Subnet02Block','stackCreateComplete','Parameters','NodeAutoScalingGroupMinSizeWindows','90qeVlpM','sYQSD','Capabilities','QMBoQ','ClusterName','HMYZk','ocVtW','dPLrc','xRHwW','vVwKG','waitFor','SQOey','false','rjpqn','XyeNU','padStart','NlxUS','promisifyAll','TUFwI','7522644UHUmvX','GDKac','jdhhr','ParameterValue','obhTU','GbskR','utf-8','DependsOn','qzvgE','1267lJsDzv','PNeJS','771796eHzzSw','qJRnq','fusxq','fuwLB','XEXMs','VpcBlock','mGGjj','Metadata','LBvEK','xYjCb','MZYdS','2010-05-15','puNva','GCPFG','toString','forEach','schema','Subnet01Block','WRjVG','Subnet','ResourcesVpcConfig','COVbF','wGUGw','debug','jcxHV','Buptj','XUEqV','join','Properties','6VwSlHf','thUlA','ZHFvw','jNBtR','Zmbes','ToVQd','qXejo','DELETE','uHXlA','msiAE','CFTemplates','cuXbS','split','rgMts','../config/constants','Subnets','UPgCo','NodeAutoScalingGroupDesiredSizeWindows','NMukW','createClusterStack','1070703LcqYIy','NodeInstanceType','Outputs','oyMuU','promise','-NodeGroup','SbOQn','StackName','keys','zEXXO','load','qXvIk','Ref','SubnetIds','WOznP','hWelC','lXFMO','stringify','UQJfV','xDBJL','GgZUi','Fn::Join','1328104iLOunc','ami','path','push','OnFailure','efioO','RlRww','VrPVC','CAPABILITY_NAMED_IAM','JxRjO','njsIR','Tags','jgEVd','FCTZQ','-Windows-NodeGroup','oNovA','ZaJhD','awsObj','24hkJlWW','brsCf','RGoYA','NodeGroup','vpc-import.yaml','PMfAm','bluebird','364085FRyidu','ZjXBi','Resources','KvBxt','NodeAutoScalingGroupMaxSize','316030OoDuqq','createStack','RgZsd','ParameterGroups','slqVN','readFileAsync','WMMiY','Subnet03Block','Subnet02','Subnet01','Value','MmjyP','jWQhU','instanceType','NodeGroupWindows','LFNeL','1ayEZpr','FpERU'];a27_0x5897=function(){return _0x96e4c9;};return a27_0x5897();}