const a27_0x241780=a27_0x5bdd;function a27_0x5bdd(_0x5ab9a7,_0x1fbf2d){const _0x3d974c=a27_0x3d97();return a27_0x5bdd=function(_0x5bdd12,_0x2edde1){_0x5bdd12=_0x5bdd12-0x1bc;let _0x113f20=_0x3d974c[_0x5bdd12];return _0x113f20;},a27_0x5bdd(_0x5ab9a7,_0x1fbf2d);}(function(_0x9eb519,_0xc599bd){const _0x4893aa=a27_0x5bdd,_0x29b94e=_0x9eb519();while(!![]){try{const _0x21858d=-parseInt(_0x4893aa(0x21d))/0x1+parseInt(_0x4893aa(0x1bc))/0x2*(parseInt(_0x4893aa(0x267))/0x3)+parseInt(_0x4893aa(0x221))/0x4+-parseInt(_0x4893aa(0x1d9))/0x5+-parseInt(_0x4893aa(0x215))/0x6*(-parseInt(_0x4893aa(0x218))/0x7)+parseInt(_0x4893aa(0x214))/0x8*(-parseInt(_0x4893aa(0x1ee))/0x9)+parseInt(_0x4893aa(0x1c6))/0xa;if(_0x21858d===_0xc599bd)break;else _0x29b94e['push'](_0x29b94e['shift']());}catch(_0x330614){_0x29b94e['push'](_0x29b94e['shift']());}}}(a27_0x3d97,0x56a86));const fs=require('fs'),path=require(a27_0x241780(0x1df)),Promise=require(a27_0x241780(0x22c)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),AWS=require(a27_0x241780(0x1d5))[a27_0x241780(0x200)],{CLUSTER_DEP_STACK_NAME,COMMON_HST_TAGS,global_registry}=require('../config/constants'),{logger}=require(a27_0x241780(0x260)),{isBucketPresent}=require(a27_0x241780(0x1d5));Promise[a27_0x241780(0x226)](fs);const mergeTemplates=(_0x33c236,_0x5d4986)=>{const _0x5b2ebc=a27_0x241780,_0x192a27={'WXFDO':function(_0x164955,_0x509945){return _0x164955!==_0x509945;},'dfhIE':_0x5b2ebc(0x1d1),'NBiiC':_0x5b2ebc(0x1d2),'xZRbe':_0x5b2ebc(0x275),'dyFIe':function(_0x5c4655,_0x3eb919){return _0x5c4655(_0x3eb919);},'IHsdZ':function(_0x2e7675,_0xaa0388){return _0x2e7675(_0xaa0388);},'oHoGz':_0x5b2ebc(0x1c9),'EoWUk':function(_0x1bd402,_0x437065){return _0x1bd402!==_0x437065;},'IiieV':_0x5b2ebc(0x22d),'pAxXZ':_0x5b2ebc(0x20d)};Object['keys'](_0x5d4986)['forEach'](_0x3524ef=>{const _0x3cc657=_0x5b2ebc,_0xb07396={'CvXgV':function(_0x1b328d,_0x38e23e){return _0x192a27['WXFDO'](_0x1b328d,_0x38e23e);},'xqXzl':_0x192a27[_0x3cc657(0x245)],'xKera':_0x192a27[_0x3cc657(0x252)],'RpToK':_0x192a27[_0x3cc657(0x1f7)],'HfXDH':function(_0x12afb3,_0x58f2d8){const _0x57a170=_0x3cc657;return _0x192a27[_0x57a170(0x238)](_0x12afb3,_0x58f2d8);},'wClTK':function(_0x2859aa,_0x24facd){const _0xea39f6=_0x3cc657;return _0x192a27[_0xea39f6(0x20e)](_0x2859aa,_0x24facd);},'fCdHx':_0x192a27[_0x3cc657(0x265)],'ZppZz':function(_0x2cef65,_0xd41847){const _0x5b6725=_0x3cc657;return _0x192a27[_0x5b6725(0x238)](_0x2cef65,_0xd41847);}};if(_0x192a27[_0x3cc657(0x22e)](_0x192a27[_0x3cc657(0x26e)],_0x192a27[_0x3cc657(0x1f1)])){var _0xe3ab62=_0x5d4986[_0x3524ef];Object[_0x3cc657(0x206)](_0xe3ab62)['forEach'](_0x4852a9=>{const _0x1ad07f=_0x3cc657;_0xb07396['CvXgV'](_0xb07396['xqXzl'],_0xb07396['xqXzl'])?_0xf0adf7[_0x1ad07f(0x1eb)][_0x2e6133][_0x1ad07f(0x25d)][_0x1ad07f(0x255)][_0x1ad07f(0x270)](..._0x3bcad8):_0x33c236[_0x3524ef][_0x4852a9]=_0xe3ab62[_0x4852a9];});}else{const _0x560abc=_0xb07396['xKera'][_0x3cc657(0x268)]('|');let _0x28fc2b=0x0;while(!![]){switch(_0x560abc[_0x28fc2b++]){case'0':_0x2b9e1b['Metadata'][_0xb07396[_0x3cc657(0x24e)]]['ParameterGroups'][0x0][_0x3cc657(0x1f2)][_0x3cc657(0x270)](_0x3cc657(0x244)+_0xb07396[_0x3cc657(0x21a)](_0x1238fd,_0x6c65d1)['padStart'](0x2,'0'));continue;case'1':_0x560d73[_0x3cc657(0x1eb)][_0x3cc657(0x22f)]['Properties'][_0x3cc657(0x251)]['push']({'Ref':_0x3cc657(0x244)+_0xb07396[_0x3cc657(0x21a)](_0x4a5036,_0x47badb)[_0x3cc657(0x1e6)](0x2,'0')});continue;case'2':_0xc1b04a[_0x3cc657(0x1eb)]['EKSCluster'][_0x3cc657(0x25d)][_0x3cc657(0x274)][_0x3cc657(0x234)]['push']({'Ref':_0x3cc657(0x244)+_0xb07396[_0x3cc657(0x21a)](_0x236acc,_0x1c9bf9)[_0x3cc657(0x1e6)](0x2,'0')});continue;case'3':_0x2faacf[_0x3cc657(0x1eb)]['NodeGroupWindows'][_0x3cc657(0x25d)][_0x3cc657(0x251)][_0x3cc657(0x270)]({'Ref':_0x3cc657(0x244)+_0xb07396[_0x3cc657(0x241)](_0x321fb4,_0x565e72)[_0x3cc657(0x1e6)](0x2,'0')});continue;case'4':_0x2bd28e[_0x3cc657(0x23e)][_0x3cc657(0x234)][_0x3cc657(0x20b)][_0xb07396[_0x3cc657(0x228)]][0x1][_0x3cc657(0x270)]({'Ref':'Subnet'+_0xb07396[_0x3cc657(0x222)](_0x5c1767,_0xf87422)[_0x3cc657(0x1e6)](0x2,'0')});continue;case'5':_0x53a289+=0x1;continue;}break;}}});},addVPCData=async(_0x56dea1,_0x2d1842)=>{const _0x4196e2=a27_0x241780,_0x6001a8={'KDXuy':function(_0x2bf16e,_0x4fb780){return _0x2bf16e(_0x4fb780);},'YZLRy':function(_0x4d1a08,_0x29d4f1){return _0x4d1a08===_0x29d4f1;},'nnwZc':_0x4196e2(0x212),'IEozY':_0x4196e2(0x1e7),'MDvTK':_0x4196e2(0x1e9),'RSElc':'utf-8','WqXdC':function(_0x1ac91f,_0x3f108e,_0x1fd70b){return _0x1ac91f(_0x3f108e,_0x1fd70b);},'iUqBc':_0x4196e2(0x275),'ccuns':_0x4196e2(0x26b),'OHibG':function(_0x52a9e0,_0x5f0995){return _0x52a9e0===_0x5f0995;},'nUBNs':_0x4196e2(0x25f),'ERJXl':_0x4196e2(0x23f),'OcJAy':_0x4196e2(0x247)};if(_0x2d1842){if(_0x6001a8[_0x4196e2(0x1d3)](_0x6001a8[_0x4196e2(0x23b)],_0x6001a8['nnwZc'])){const _0x3f7c1b=await fs[_0x4196e2(0x203)](path[_0x4196e2(0x237)](__dirname,'..',_0x6001a8[_0x4196e2(0x1cb)],_0x6001a8[_0x4196e2(0x225)]),_0x6001a8[_0x4196e2(0x1c3)]),_0x471fdf={};_0x471fdf[_0x4196e2(0x232)]=CLOUDFORMATION_SCHEMA;const _0x12630b=yaml[_0x4196e2(0x24a)](_0x3f7c1b,_0x471fdf);_0x6001a8[_0x4196e2(0x229)](mergeTemplates,_0x56dea1,_0x12630b),_0x56dea1[_0x4196e2(0x213)][_0x6001a8[_0x4196e2(0x254)]][_0x4196e2(0x246)][0x0][_0x4196e2(0x1f2)][_0x4196e2(0x270)](_0x6001a8[_0x4196e2(0x1cd)]);}else _0x452074[_0x4196e2(0x1eb)][_0x2f1f21][_0x4196e2(0x25d)]&&_0xdac5cb['Resources'][_0x340ed4][_0x4196e2(0x25d)][_0x4196e2(0x255)]&&_0x1e0e6e['Resources'][_0x3edfff]['Properties']['Tags'][_0x4196e2(0x270)](..._0x17a110);}else{if(_0x6001a8['OHibG'](_0x6001a8['nUBNs'],_0x6001a8['nUBNs'])){const _0x559e42=await fs[_0x4196e2(0x203)](path[_0x4196e2(0x237)](__dirname,'..',_0x6001a8[_0x4196e2(0x1cb)],_0x6001a8[_0x4196e2(0x1e4)]),_0x6001a8[_0x4196e2(0x1c3)]),_0x272a4e={};_0x272a4e['schema']=CLOUDFORMATION_SCHEMA;const _0x41df56=yaml['load'](_0x559e42,_0x272a4e);_0x6001a8[_0x4196e2(0x229)](mergeTemplates,_0x56dea1,_0x41df56),_0x56dea1[_0x4196e2(0x213)][_0x6001a8[_0x4196e2(0x254)]][_0x4196e2(0x246)][0x0][_0x4196e2(0x1f2)][_0x4196e2(0x270)](_0x6001a8[_0x4196e2(0x210)]);}else{let _0x57f150=0x1;_0x186de8['forEach'](_0x2ea862=>{const _0xb29091=_0x4196e2;_0x3e9fad[_0xb29091(0x1f2)][_0xb29091(0x270)]({'ParameterKey':_0xb29091(0x244)+_0x6001a8[_0xb29091(0x259)](_0x240295,_0x57f150)[_0xb29091(0x1e6)](0x2,'0'),'ParameterValue':_0x2ea862[_0xb29091(0x250)]}),_0x57f150+=0x1;});}}},addS3Data=async _0x5789ed=>{const _0x296b59=a27_0x241780,_0x13cb8a={'EKHKG':_0x296b59(0x1e7),'dfXzE':_0x296b59(0x1e2),'RYqeL':'utf-8','ZVIHl':function(_0x51de50,_0xe325a4){return _0x51de50(_0xe325a4);},'jxhqe':function(_0x5919b2,_0x265909){return _0x5919b2===_0x265909;},'QkmCU':function(_0x251cf1,_0x46ca96){return _0x251cf1!==_0x46ca96;},'NoWso':'Xjzys','REznP':'lczkg','ZlMYa':function(_0x568c96,_0x28ffba,_0x266dc8){return _0x568c96(_0x28ffba,_0x266dc8);}},_0x26eef8=await fs[_0x296b59(0x203)](path[_0x296b59(0x237)](__dirname,'..',_0x13cb8a[_0x296b59(0x25a)],_0x13cb8a['dfXzE']),_0x13cb8a[_0x296b59(0x21b)]),_0x404bee={};_0x404bee[_0x296b59(0x232)]=CLOUDFORMATION_SCHEMA;const _0x1a5f88=yaml['load'](_0x26eef8,_0x404bee),_0x4e0e14=await _0x13cb8a[_0x296b59(0x239)](isBucketPresent,global_registry[_0x296b59(0x24c)]);_0x13cb8a[_0x296b59(0x1ce)](_0x4e0e14,![])&&(_0x13cb8a[_0x296b59(0x1de)](_0x13cb8a[_0x296b59(0x1ff)],_0x13cb8a['REznP'])?_0x13cb8a[_0x296b59(0x1f8)](mergeTemplates,_0x5789ed,_0x1a5f88):_0x48e341[_0x24dd08][_0x490911]=_0x196194[_0x257cb6]);},addSubnetData=async(_0x135617,_0x161d01)=>{const _0x234b1b=a27_0x241780,_0x501072={'QYaKp':function(_0x40bf91,_0x3ff005){return _0x40bf91!==_0x3ff005;},'yryym':_0x234b1b(0x1da),'uoGeF':'3|5|2|1|4|0','ShNEz':function(_0x2a8b08,_0x4a20e0){return _0x2a8b08(_0x4a20e0);},'PILBz':_0x234b1b(0x1c9),'Nftmd':_0x234b1b(0x275),'izFhu':function(_0x3be120,_0x20ac86){return _0x3be120(_0x20ac86);},'meTiR':function(_0xcb48e7,_0x1ec359){return _0xcb48e7(_0x1ec359);},'xqxnB':function(_0x2cb9d9,_0x573f62,_0x4ae1f4){return _0x2cb9d9(_0x573f62,_0x4ae1f4);},'UFZAx':function(_0xb584bf,_0x4eaf90){return _0xb584bf===_0x4eaf90;},'UatbP':'uvZid','awtNj':_0x234b1b(0x1e7),'CKTZH':_0x234b1b(0x216),'veyYt':'utf-8','pJWMQ':function(_0x38938a,_0x11bb52){return _0x38938a===_0x11bb52;},'fSEBB':_0x234b1b(0x22b),'XERJd':_0x234b1b(0x227),'VLWya':'Subnet01','mUhTr':_0x234b1b(0x1bd),'wWDcu':'Subnet03','nTgRJ':'Subnet01Block','lkenS':_0x234b1b(0x26c),'HOtkz':'Subnet03Block'};if(_0x161d01){if(_0x501072['UFZAx'](_0x501072['UatbP'],_0x501072['UatbP'])){const _0x139a4b=await fs[_0x234b1b(0x203)](path[_0x234b1b(0x237)](__dirname,'..',_0x501072[_0x234b1b(0x1fc)],_0x501072['CKTZH']),_0x501072[_0x234b1b(0x223)]),_0x5b718d={};_0x5b718d[_0x234b1b(0x232)]=CLOUDFORMATION_SCHEMA;const _0x2f5192=yaml['load'](_0x139a4b,_0x5b718d);_0x501072[_0x234b1b(0x25b)](mergeTemplates,_0x135617,_0x2f5192);let _0x888cf2=0x1;_0x161d01['forEach'](_0x309d79=>{const _0x274ed5=_0x234b1b;if(_0x501072[_0x274ed5(0x266)](_0x501072[_0x274ed5(0x217)],_0x501072[_0x274ed5(0x217)]))_0xf2831d[_0x372f6b['Key']]=_0x2e9fd9['Value'];else{const _0x5585fb=_0x501072[_0x274ed5(0x208)]['split']('|');let _0x5541f2=0x0;while(!![]){switch(_0x5585fb[_0x5541f2++]){case'0':_0x888cf2+=0x1;continue;case'1':_0x135617[_0x274ed5(0x1eb)][_0x274ed5(0x1f6)][_0x274ed5(0x25d)][_0x274ed5(0x251)]['push']({'Ref':_0x274ed5(0x244)+_0x501072[_0x274ed5(0x23d)](String,_0x888cf2)['padStart'](0x2,'0')});continue;case'2':_0x135617['Resources'][_0x274ed5(0x22f)][_0x274ed5(0x25d)][_0x274ed5(0x251)][_0x274ed5(0x270)]({'Ref':'Subnet'+_0x501072[_0x274ed5(0x23d)](String,_0x888cf2)[_0x274ed5(0x1e6)](0x2,'0')});continue;case'3':_0x135617['Resources'][_0x274ed5(0x1c5)][_0x274ed5(0x25d)]['ResourcesVpcConfig'][_0x274ed5(0x234)]['push']({'Ref':_0x274ed5(0x244)+_0x501072[_0x274ed5(0x23d)](String,_0x888cf2)[_0x274ed5(0x1e6)](0x2,'0')});continue;case'4':_0x135617[_0x274ed5(0x23e)]['SubnetIds']['Value'][_0x501072['PILBz']][0x1][_0x274ed5(0x270)]({'Ref':_0x274ed5(0x244)+_0x501072['ShNEz'](String,_0x888cf2)[_0x274ed5(0x1e6)](0x2,'0')});continue;case'5':_0x135617[_0x274ed5(0x213)][_0x501072[_0x274ed5(0x22a)]][_0x274ed5(0x246)][0x0][_0x274ed5(0x1f2)]['push'](_0x274ed5(0x244)+_0x501072['izFhu'](String,_0x888cf2)['padStart'](0x2,'0'));continue;}break;}}});}else _0x43ff82[_0x234b1b(0x1f2)][_0x234b1b(0x270)]({'ParameterKey':_0x234b1b(0x244)+_0x501072[_0x234b1b(0x24b)](_0xae9d13,_0x561137)[_0x234b1b(0x1e6)](0x2,'0'),'ParameterValue':_0x57726a[_0x234b1b(0x250)]}),_0x13a1e4+=0x1;}else{if(_0x501072[_0x234b1b(0x24f)](_0x501072[_0x234b1b(0x1c7)],_0x501072[_0x234b1b(0x1c7)])){const _0x52e271=await fs['readFileAsync'](path[_0x234b1b(0x237)](__dirname,'..',_0x501072['awtNj'],_0x501072[_0x234b1b(0x1c0)]),_0x501072[_0x234b1b(0x223)]),_0x888df3={};_0x888df3['schema']=CLOUDFORMATION_SCHEMA;const _0x1cda95=yaml[_0x234b1b(0x24a)](_0x52e271,_0x888df3);_0x501072['xqxnB'](mergeTemplates,_0x135617,_0x1cda95),_0x135617['Resources']['EKSCluster'][_0x234b1b(0x1fb)][_0x234b1b(0x270)](_0x501072['VLWya'],_0x501072[_0x234b1b(0x26d)],_0x501072[_0x234b1b(0x220)]);const _0x26e5ad={};_0x26e5ad['Ref']=_0x501072[_0x234b1b(0x1ca)];const _0x490d7b={};_0x490d7b['Ref']=_0x501072['mUhTr'];const _0x1c4da8={};_0x1c4da8['Ref']=_0x501072['wWDcu'],_0x135617[_0x234b1b(0x1eb)][_0x234b1b(0x1c5)]['Properties'][_0x234b1b(0x274)][_0x234b1b(0x234)]=[_0x26e5ad,_0x490d7b,_0x1c4da8],_0x135617[_0x234b1b(0x213)][_0x501072[_0x234b1b(0x22a)]][_0x234b1b(0x246)][0x0]['Parameters'][_0x234b1b(0x270)](_0x501072[_0x234b1b(0x1d4)],_0x501072['lkenS'],_0x501072[_0x234b1b(0x1ef)]);const _0x2515f2={};_0x2515f2[_0x234b1b(0x1f0)]=_0x501072['VLWya'];const _0x2f24bb={};_0x2f24bb[_0x234b1b(0x1f0)]=_0x501072[_0x234b1b(0x26d)];const _0x2342c9={};_0x2342c9[_0x234b1b(0x1f0)]=_0x501072[_0x234b1b(0x220)],_0x135617[_0x234b1b(0x1eb)]['NodeGroup']['Properties']['Subnets']=[_0x2515f2,_0x2f24bb,_0x2342c9];const _0x2f4b7d={};_0x2f4b7d[_0x234b1b(0x1f0)]=_0x501072[_0x234b1b(0x1ca)];const _0xd65d14={};_0xd65d14['Ref']=_0x501072['mUhTr'];const _0x4d4b9a={};_0x4d4b9a[_0x234b1b(0x1f0)]=_0x501072[_0x234b1b(0x220)],_0x135617[_0x234b1b(0x1eb)][_0x234b1b(0x1f6)][_0x234b1b(0x25d)][_0x234b1b(0x251)]=[_0x2f4b7d,_0xd65d14,_0x4d4b9a],_0x135617['Outputs']['SubnetIds']['Value'][_0x501072[_0x234b1b(0x205)]][0x1]=[{'Ref':_0x501072[_0x234b1b(0x1ca)]},{'Ref':_0x501072['mUhTr']},{'Ref':_0x501072[_0x234b1b(0x220)]}];}else _0x501072[_0x234b1b(0x25b)](_0x41f3f7,_0x3aa2c6,_0xfe3ce2);}},addTags=async(_0x48bf65,_0x524587,_0x294fcd)=>{const _0x330396=a27_0x241780,_0x520471={};_0x520471[_0x330396(0x1db)]=_0x330396(0x22f),_0x520471['CDXgp']=_0x330396(0x1f6),_0x520471[_0x330396(0x248)]=_0x330396(0x26b),_0x520471[_0x330396(0x21e)]=function(_0x405853,_0x52aa65){return _0x405853===_0x52aa65;},_0x520471[_0x330396(0x21f)]='bxFOh',_0x520471[_0x330396(0x235)]='mhkWE',_0x520471[_0x330396(0x204)]=function(_0x5d99c9,_0x492cf1){return _0x5d99c9!==_0x492cf1;},_0x520471[_0x330396(0x1e1)]='yXOlD',_0x520471[_0x330396(0x1e5)]='GRgEp',_0x520471[_0x330396(0x1cf)]=_0x330396(0x256),_0x520471[_0x330396(0x243)]=_0x330396(0x1f3);const _0x2d30ae=_0x520471;for(const _0x139d5f in _0x48bf65['Resources']){if(_0x2d30ae[_0x330396(0x204)](_0x2d30ae[_0x330396(0x1e1)],_0x2d30ae[_0x330396(0x1e5)])){if(_0x48bf65[_0x330396(0x1eb)][_0x139d5f][_0x330396(0x25d)]&&_0x48bf65[_0x330396(0x1eb)][_0x139d5f][_0x330396(0x25d)]['Tags']){if(_0x2d30ae[_0x330396(0x21e)](_0x2d30ae[_0x330396(0x1cf)],_0x2d30ae['MJKdd'])){for(const _0x123f8b in _0x2eb542['Resources']){_0x372ab5[_0x330396(0x1eb)][_0x123f8b]['Properties']&&_0x212c07['Resources'][_0x123f8b][_0x330396(0x25d)][_0x330396(0x255)]&&_0x3924db[_0x330396(0x1eb)][_0x123f8b][_0x330396(0x25d)][_0x330396(0x255)]['push'](..._0x16b4e6);}const _0x1e49ef={};_0x15d203['forEach'](_0x335bfa=>{const _0x5d545c=_0x330396;_0x1e49ef[_0x335bfa[_0x5d545c(0x261)]]=_0x335bfa[_0x5d545c(0x20b)];}),_0x317863['Resources'][_0x2d30ae[_0x330396(0x1db)]]['Properties'][_0x330396(0x255)]=_0x1e49ef,_0x155156['Resources'][_0x2d30ae[_0x330396(0x1c8)]][_0x330396(0x25d)]['Tags']=_0x1e49ef;}else _0x48bf65[_0x330396(0x1eb)][_0x139d5f][_0x330396(0x25d)][_0x330396(0x255)][_0x330396(0x270)](..._0x294fcd);}}else{const _0x4e76c1={};_0x4e76c1[_0x330396(0x202)]=_0x2d30ae[_0x330396(0x248)],_0x4e76c1[_0x330396(0x1f9)]=_0xa51610,_0x2ad8c3[_0x330396(0x1f2)]['push'](_0x4e76c1);}}const _0x20d3a8={};_0x294fcd[_0x330396(0x230)](_0x510e70=>{const _0x43b42f=_0x330396;if(_0x2d30ae[_0x43b42f(0x21e)](_0x2d30ae[_0x43b42f(0x21f)],_0x2d30ae[_0x43b42f(0x235)])){var _0x15dc7f=_0x15b722[_0x42cfb6];_0x59640a[_0x43b42f(0x206)](_0x15dc7f)[_0x43b42f(0x230)](_0x56c2af=>{_0xf3934e[_0x3328ad][_0x56c2af]=_0x15dc7f[_0x56c2af];});}else _0x20d3a8[_0x510e70[_0x43b42f(0x261)]]=_0x510e70[_0x43b42f(0x20b)];}),_0x48bf65['Resources'][_0x2d30ae[_0x330396(0x1db)]][_0x330396(0x25d)][_0x330396(0x255)]=_0x20d3a8,_0x48bf65[_0x330396(0x1eb)][_0x2d30ae[_0x330396(0x1c8)]][_0x330396(0x25d)][_0x330396(0x255)]=_0x20d3a8;};function a27_0x3d97(){const _0x29e030=['StackName','NodeGroupWindows','xZRbe','ZlMYa','ParameterValue','stackCreateComplete','DependsOn','awtNj','bkdrx','utf-8','NoWso','awsObj','ClusterAutoUpgrade','ParameterKey','readFileAsync','Osyti','PILBz','keys','NodeGroupName','uoGeF','promise','dPXJl','Value','ZgwUZ','dGGAW','IHsdZ','cIQEt','OcJAy','WtkPk','gKVLH','Metadata','742584jZVavz','60DRrzOh','subnet-import.yaml','yryym','291515SwXNDf','browserstack:creationDate','HfXDH','RYqeL','BaDvF','263489kncwVW','ORsED','hiVNO','wWDcu','776272eIuVll','ZppZz','veyYt','gDzFW','MDvTK','promisifyAll','subnet-create.yaml','fCdHx','WqXdC','Nftmd','qUgkz','bluebird','lfiFz','EoWUk','NodeGroup','forEach','NrVhi','schema','hLIRc','SubnetIds','mxKxw','hccON','join','dyFIe','ZVIHl','HeTjX','nnwZc','CRigL','ShNEz','Outputs','vpc-create.yaml','JzOes','wClTK','NodeGroupNameWindows','MJKdd','Subnet','dfhIE','ParameterGroups','VpcBlock','DhmFI','S3BucketName','load','meTiR','s3Bucket','ami','RpToK','pJWMQ','value','Subnets','NBiiC','-NodeGroup','iUqBc','Tags','Dqfpn','-Windows-NodeGroup','TemplateBody','KDXuy','EKHKG','xqxnB','stringify','Properties','hOxdI','NerRl','../config/logger','Key','igNDH','NodeAutoScalingGroupDesiredSizeWindows','true','oHoGz','QYaKp','3834UpdFFv','split','Jrikd','debug','VPC','Subnet02Block','mUhTr','IiieV','Capabilities','push','lTpmo','LFJYR','qjCOc','ResourcesVpcConfig','AWS::CloudFormation::Interface','124OdbcmM','Subnet02','NodeAutoScalingGroupMinSizeWindows','NodeAutoScalingGroupMaxSize','XERJd','sZnnk','qfeAk','RSElc','browserstack:cluster','EKSCluster','7255870upukTy','fSEBB','CDXgp','Fn::Join','VLWya','IEozY','QHzEV','ccuns','jxhqe','Ytebk','zdYGc','NMeWQ','2|0|1|3|4|5','YZLRy','nTgRJ','./AWSUtils','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','OnFailure','LlHgF','1663935GHBaby','quMep','gtPuj','EhWBy','NNnEU','QkmCU','path','pIYmc','AIOik','s3-create.yaml','cVKAF','ERJXl','TrHFI','padStart','CFTemplates','oiSrC','vpc-import.yaml','CAPABILITY_NAMED_IAM','Resources','gdoUp','StackId','45xbTPKi','HOtkz','Ref','pAxXZ','Parameters','yvcpK','fWTml'];a27_0x3d97=function(){return _0x29e030;};return a27_0x3d97();}exports['createClusterStack']=async(_0x59a9e5,_0xdd0c32,_0x4aff00,_0x230a7e=null,_0x23d327=null,_0x76b344)=>{const _0xd7905=a27_0x241780,_0x5c1731={'fWTml':function(_0x3b191c,_0x1b3da4){return _0x3b191c(_0x1b3da4);},'ODkve':_0xd7905(0x1c4),'cawDt':_0xd7905(0x219),'QHzEV':'2010-05-15','hLIRc':_0xd7905(0x1e7),'WtkPk':'aws-eks-cluster-dep.yaml','LlHgF':_0xd7905(0x1fe),'BaDvF':function(_0x6d530e,_0x3092d8,_0xeab8c5){return _0x6d530e(_0x3092d8,_0xeab8c5);},'dNfkT':function(_0xc3afd0,_0x4d1b97){return _0xc3afd0(_0x4d1b97);},'bkdrx':function(_0x3694f1,_0x423f05,_0x3f68e1,_0x191ccf){return _0x3694f1(_0x423f05,_0x3f68e1,_0x191ccf);},'ZgwUZ':'DELETE','HeTjX':'ClusterName','hOxdI':_0xd7905(0x207),'qfeAk':'NodeAutoScalingGroupMinSize','CRigL':_0xd7905(0x1be),'lTpmo':_0xd7905(0x263),'gDzFW':_0xd7905(0x1bf),'gdoUp':'NodeImageId','Jrikd':'NodeInstanceType','LFJYR':_0xd7905(0x249),'NrVhi':_0xd7905(0x242),'zdYGc':_0xd7905(0x201),'EhWBy':_0xd7905(0x264),'IZnxs':'false','NNnEU':_0xd7905(0x1ea),'cVKAF':function(_0x597ce4,_0xd3d44f){return _0x597ce4!=_0xd3d44f;},'dPXJl':function(_0x8abf44,_0x5e0673){return _0x8abf44!==_0x5e0673;},'igNDH':function(_0x152aee,_0x240f23){return _0x152aee!==_0x240f23;},'hccON':_0xd7905(0x20f),'oiSrC':_0xd7905(0x1c1),'JzOes':_0xd7905(0x26b),'pIYmc':_0xd7905(0x1d6),'qjCOc':_0xd7905(0x1fa)},_0x9f9aa0=COMMON_HST_TAGS,_0x231138={};_0x231138[_0xd7905(0x261)]=_0x5c1731['ODkve'],_0x231138['Value']=_0x59a9e5,_0x9f9aa0[_0xd7905(0x270)](_0x231138),_0x9f9aa0[_0xd7905(0x270)]({'Key':_0x5c1731['cawDt'],'Value':new Date()['valueOf']()['toString']()});const _0x22200a={};_0x22200a['apiVersion']=_0x5c1731[_0xd7905(0x1cc)];const _0x2e73fd=new AWS['CloudFormation'](_0x22200a),_0x5043c5=await fs[_0xd7905(0x203)](path['join'](__dirname,'..',_0x5c1731[_0xd7905(0x233)],_0x5c1731[_0xd7905(0x211)]),_0x5c1731[_0xd7905(0x1d8)]),_0x19f13a={};_0x19f13a[_0xd7905(0x232)]=CLOUDFORMATION_SCHEMA;const _0x3f5eae=yaml[_0xd7905(0x24a)](_0x5043c5,_0x19f13a);await _0x5c1731[_0xd7905(0x21c)](addVPCData,_0x3f5eae,_0x230a7e),await _0x5c1731['dNfkT'](addS3Data,_0x3f5eae),await _0x5c1731['BaDvF'](addSubnetData,_0x3f5eae,_0x23d327),await _0x5c1731[_0xd7905(0x1fd)](addTags,_0x3f5eae,_0x59a9e5,_0x9f9aa0);const _0x442b0b=JSON[_0xd7905(0x25c)](_0x3f5eae),_0x15f9db={};_0x15f9db[_0xd7905(0x1f5)]=CLUSTER_DEP_STACK_NAME+'-'+_0x59a9e5,_0x15f9db[_0xd7905(0x1d7)]=_0x5c1731[_0xd7905(0x20c)],_0x15f9db[_0xd7905(0x258)]=_0x442b0b,_0x15f9db[_0xd7905(0x1f2)]=[{'ParameterKey':_0x5c1731[_0xd7905(0x23a)],'ParameterValue':_0x59a9e5},{'ParameterKey':_0x5c1731[_0xd7905(0x25e)],'ParameterValue':_0x59a9e5+_0xd7905(0x253)},{'ParameterKey':_0x5c1731[_0xd7905(0x1c2)],'ParameterValue':''+_0xdd0c32},{'ParameterKey':_0x5c1731[_0xd7905(0x23c)],'ParameterValue':'0'},{'ParameterKey':_0x5c1731[_0xd7905(0x271)],'ParameterValue':'1'},{'ParameterKey':_0x5c1731[_0xd7905(0x224)],'ParameterValue':''+_0x4aff00},{'ParameterKey':_0x5c1731[_0xd7905(0x1ec)],'ParameterValue':global_registry[_0xd7905(0x24d)]},{'ParameterKey':_0x5c1731[_0xd7905(0x269)],'ParameterValue':global_registry['instanceType']},{'ParameterKey':_0x5c1731[_0xd7905(0x272)],'ParameterValue':global_registry[_0xd7905(0x24c)]},{'ParameterKey':_0x5c1731[_0xd7905(0x231)],'ParameterValue':_0x59a9e5+_0xd7905(0x257)},{'ParameterKey':_0x5c1731[_0xd7905(0x1d0)],'ParameterValue':_0x76b344?_0x5c1731[_0xd7905(0x1dc)]:_0x5c1731['IZnxs']}],_0x15f9db[_0xd7905(0x26f)]=[_0x5c1731[_0xd7905(0x1dd)]],_0x15f9db[_0xd7905(0x255)]=_0x9f9aa0;const _0x5df938=_0x15f9db;if(_0x5c1731[_0xd7905(0x1e3)](_0x230a7e,null)&&_0x5c1731[_0xd7905(0x20a)](_0x230a7e,undefined)){if(_0x5c1731[_0xd7905(0x262)](_0x5c1731[_0xd7905(0x236)],_0x5c1731[_0xd7905(0x1e8)])){const _0x551e80={};_0x551e80[_0xd7905(0x202)]=_0x5c1731[_0xd7905(0x240)],_0x551e80[_0xd7905(0x1f9)]=_0x230a7e,_0x5df938[_0xd7905(0x1f2)][_0xd7905(0x270)](_0x551e80);}else _0x2c4331[_0xd7905(0x206)](_0x531982)[_0xd7905(0x230)](_0x49935e=>{const _0x2d0cbb=_0xd7905;var _0x560444=_0x5a2820[_0x49935e];_0x145074['keys'](_0x560444)[_0x2d0cbb(0x230)](_0x2c7900=>{_0x287743[_0x49935e][_0x2c7900]=_0x560444[_0x2c7900];});});}if(_0x5c1731['cVKAF'](_0x23d327,null)&&_0x5c1731[_0xd7905(0x262)](_0x23d327,undefined)){let _0x25ee95=0x1;_0x23d327[_0xd7905(0x230)](_0x555dce=>{const _0x587622=_0xd7905;_0x5df938[_0x587622(0x1f2)][_0x587622(0x270)]({'ParameterKey':_0x587622(0x244)+_0x5c1731[_0x587622(0x1f4)](String,_0x25ee95)[_0x587622(0x1e6)](0x2,'0'),'ParameterValue':_0x555dce['value']}),_0x25ee95+=0x1;});}const _0x4c0592=await _0x2e73fd['createStack'](_0x5df938)[_0xd7905(0x209)]();logger[_0xd7905(0x26a)](_0x5c1731[_0xd7905(0x1e0)]);const _0x28f0c5={};return _0x28f0c5['StackName']=_0x4c0592[_0xd7905(0x1ed)],_0x2e73fd['waitFor'](_0x5c1731[_0xd7905(0x273)],_0x28f0c5)[_0xd7905(0x209)]();};