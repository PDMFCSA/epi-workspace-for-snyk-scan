const a27_0x5a050e=a27_0x4e1d;(function(_0x25659a,_0x2650d0){const _0x2231ab=a27_0x4e1d,_0x2c7a94=_0x25659a();while(!![]){try{const _0x469dc9=-parseInt(_0x2231ab(0xcd))/0x1+-parseInt(_0x2231ab(0xfb))/0x2+-parseInt(_0x2231ab(0xc6))/0x3+-parseInt(_0x2231ab(0x80))/0x4*(parseInt(_0x2231ab(0x105))/0x5)+parseInt(_0x2231ab(0x9d))/0x6*(-parseInt(_0x2231ab(0x10a))/0x7)+parseInt(_0x2231ab(0xcb))/0x8*(parseInt(_0x2231ab(0x94))/0x9)+parseInt(_0x2231ab(0xd1))/0xa*(parseInt(_0x2231ab(0x128))/0xb);if(_0x469dc9===_0x2650d0)break;else _0x2c7a94['push'](_0x2c7a94['shift']());}catch(_0x6cc1ab){_0x2c7a94['push'](_0x2c7a94['shift']());}}}(a27_0x40a4,0x46972));const fs=require('fs'),path=require(a27_0x5a050e(0x11f)),Promise=require(a27_0x5a050e(0xd0)),yaml=require(a27_0x5a050e(0xa2)),{CLOUDFORMATION_SCHEMA}=require(a27_0x5a050e(0x118)),AWS=require(a27_0x5a050e(0x117))['awsObj'],{CLUSTER_DEP_STACK_NAME,COMMON_HST_TAGS,global_registry}=require(a27_0x5a050e(0xe0)),{logger}=require('../config/logger'),{isBucketPresent}=require('./AWSUtils');Promise[a27_0x5a050e(0xe2)](fs);function a27_0x40a4(){const _0xbaa55c=['153qLaChc','Properties','dRTIE','qIege','Subnet01Block','OREPb','CVWZs','PywQK','browserstack:creationDate','110310FJzYTE','stoPO','split','NodeGroupName','ResourcesVpcConfig','js-yaml','TemplateBody','Metadata','tRQcV','eyIzx','xdxPB','nPamu','ctoCV','zWKZp','dFTDN','QQaBd','stackCreateComplete','NodeAutoScalingGroupMinSize','vpc-import.yaml','BZuSb','dZxPh','NodeGroupWindows','ParameterKey','CUrtp','vgzHC','ZAavD','NKJdP','yoETL','ekAzM','XiYyE','zQOZx','GosOh','stringify','NodeInstanceType','toString','eMvVi','nmAve','uBUUO','pXrAC','RXqwQ','CFTemplates','1458483PFxfPF','CuIEn','EcgPU','VpcBlock','browserstack:cluster','76696bRFxIE','QqpAo','217125ptQEcN','load','tebJr','bluebird','43910EjwSkD','Subnet03','Subnet01','apiVersion','-Windows-NodeGroup','fpAtE','RQuuk','NodeAutoScalingGroupMinSizeWindows','sKpUn','OPlhB','s3-create.yaml','Key','HZoaK','Fn::Join','kYEnb','../config/constants','S3BucketName','promisifyAll','trwml','JXaQs','push','vYkKZ','HSmNU','sVqLi','qNtcs','nfUtm','debug','FORmo','padStart','msNWm','ljtRq','Subnet','NodeImageId','schema','iOLGF','plvXx','join','HVuJO','FjWvE','value','HhPoH','Parameters','338342RCYWyD','Outputs','2010-05-15','kWlyR','VPC','StackId','XYyor','eyuUf','Subnet02Block','HAkqM','5HrIheD','SVRpu','VzepL','mtRos','utf-8','161gAEKJV','SQMlR','AWS::CloudFormation::Interface','rVwNA','KUVkK','StackName','hmOdT','DgnVq','createClusterStack','SubnetIds','uLsRP','Ref','Resources','./AWSUtils','js-yaml-cloudformation-schema','qZJwb','ParameterValue','TcCft','NodeAutoScalingGroupDesiredSizeWindows','LBemx','LNpiX','path','lmXTG','subnet-import.yaml','MROgb','pPnQp','ParameterGroups','jrhsU','EKSCluster','tNzNd','4609ARZTeZ','ilBte','YbbKq','promise','NodeGroupNameWindows','DJacD','Subnets','CAPABILITY_NAMED_IAM','Capabilities','VDYTG','readFileAsync','DependsOn','oEEQo','hQjeF','jYcwR','keys','1673432VhwsOR','MBkto','xXKNE','njjtr','ami','Tags','Value','JVgxY','usEOj','KWfzo','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','NodeGroup','aws-eks-cluster-dep.yaml','yZTNM','OnFailure','valueOf','QGGwJ','forEach','zTocr','4|0|3|2|5|1'];a27_0x40a4=function(){return _0xbaa55c;};return a27_0x40a4();}function a27_0x4e1d(_0x53f5be,_0x24a224){const _0x40a476=a27_0x40a4();return a27_0x4e1d=function(_0x4e1d58,_0x5c8cdc){_0x4e1d58=_0x4e1d58-0x76;let _0x1de866=_0x40a476[_0x4e1d58];return _0x1de866;},a27_0x4e1d(_0x53f5be,_0x24a224);}const mergeTemplates=(_0x3bdae8,_0x338a61)=>{const _0x5962f2=a27_0x5a050e,_0x5af71b={'gYiKK':_0x5962f2(0x8b),'GuhsV':_0x5962f2(0xb2),'PywQK':function(_0x2a8d69,_0x4f5ff8){return _0x2a8d69===_0x4f5ff8;},'SVRpu':_0x5962f2(0x11e),'RXqwQ':_0x5962f2(0xc2),'NKJdP':function(_0xa6b9be,_0xb12830){return _0xa6b9be(_0xb12830);},'pPnQp':function(_0x3a4d53,_0x49751d){return _0x3a4d53===_0x49751d;},'VzepL':_0x5962f2(0x125)};Object['keys'](_0x338a61)[_0x5962f2(0x91)](_0x1edfda=>{const _0x414cb0=_0x5962f2,_0x376e00={'DgnVq':_0x5af71b['gYiKK'],'CuIEn':_0x5af71b['GuhsV'],'dRTIE':function(_0x17e8f9,_0x45f24b){const _0x55aca4=a27_0x4e1d;return _0x5af71b[_0x55aca4(0x9b)](_0x17e8f9,_0x45f24b);},'MROgb':_0x5af71b[_0x414cb0(0x106)],'rckYK':_0x5af71b[_0x414cb0(0xc4)],'ilBte':function(_0x195ce1,_0x452653){const _0x4f9a49=_0x414cb0;return _0x5af71b[_0x4f9a49(0xb7)](_0x195ce1,_0x452653);}};if(_0x5af71b[_0x414cb0(0x123)](_0x5af71b[_0x414cb0(0x107)],_0x5af71b['VzepL'])){var _0x55c426=_0x338a61[_0x1edfda];Object[_0x414cb0(0x7f)](_0x55c426)[_0x414cb0(0x91)](_0x344092=>{const _0x359b9e=_0x414cb0;if(_0x376e00[_0x359b9e(0x96)](_0x376e00[_0x359b9e(0x122)],_0x376e00['rckYK'])){for(const _0x2ee9f3 in _0x668e3a['Resources']){_0x3dbe42[_0x359b9e(0x116)][_0x2ee9f3][_0x359b9e(0x95)]&&_0x53780b['Resources'][_0x2ee9f3][_0x359b9e(0x95)]['Tags']&&_0x138fcc[_0x359b9e(0x116)][_0x2ee9f3]['Properties'][_0x359b9e(0x85)][_0x359b9e(0xe5)](..._0x5a7eff);}const _0x596aa5={};_0x43deb4[_0x359b9e(0x91)](_0x3e84cf=>{const _0x392c65=_0x359b9e;_0x596aa5[_0x3e84cf[_0x392c65(0xdc)]]=_0x3e84cf[_0x392c65(0x86)];}),_0x490680[_0x359b9e(0x116)][_0x376e00[_0x359b9e(0x111)]][_0x359b9e(0x95)][_0x359b9e(0x85)]=_0x596aa5,_0x506af8[_0x359b9e(0x116)][_0x376e00[_0x359b9e(0xc7)]]['Properties']['Tags']=_0x596aa5;}else _0x3bdae8[_0x1edfda][_0x344092]=_0x55c426[_0x344092];});}else{const _0x28def4={'LBemx':function(_0x28a854,_0x43da08){const _0x4b69fc=_0x414cb0;return _0x376e00[_0x4b69fc(0x129)](_0x28a854,_0x43da08);}};let _0x229d15=0x1;_0x4af881[_0x414cb0(0x91)](_0x553ae1=>{const _0x53956a=_0x414cb0;_0x148d00[_0x53956a(0xfa)]['push']({'ParameterKey':_0x53956a(0xf0)+_0x28def4[_0x53956a(0x11d)](_0x12f804,_0x229d15)[_0x53956a(0xed)](0x2,'0'),'ParameterValue':_0x553ae1[_0x53956a(0xf8)]}),_0x229d15+=0x1;});}});},addVPCData=async(_0x2e6022,_0xff131b)=>{const _0x5a0c87=a27_0x5a050e,_0x128201={'bUKUo':function(_0x308600,_0x40e594){return _0x308600!==_0x40e594;},'qNtcs':_0x5a0c87(0xc8),'vYkKZ':_0x5a0c87(0xc5),'wmnEW':_0x5a0c87(0xaf),'tRQcV':'utf-8','njjtr':function(_0x22a35f,_0x12f8d5,_0x185008){return _0x22a35f(_0x12f8d5,_0x185008);},'HhPoH':_0x5a0c87(0x10c),'YxnlC':_0x5a0c87(0xff),'HSmNU':function(_0x224aea,_0x13efc5){return _0x224aea!==_0x13efc5;},'XYyor':_0x5a0c87(0x10d),'ZAavD':'vpc-create.yaml','NJPOY':function(_0x460e3c,_0x5a6bef,_0x5ec172){return _0x460e3c(_0x5a6bef,_0x5ec172);},'pXrAC':_0x5a0c87(0xc9)};if(_0xff131b){if(_0x128201['bUKUo'](_0x128201[_0x5a0c87(0xe9)],_0x128201[_0x5a0c87(0xe9)]))_0x17e803[_0x54d3ed[_0x5a0c87(0xdc)]]=_0x2fbe4b[_0x5a0c87(0x86)];else{const _0x682c12=await fs[_0x5a0c87(0x7a)](path[_0x5a0c87(0xf5)](__dirname,'..',_0x128201[_0x5a0c87(0xe6)],_0x128201['wmnEW']),_0x128201[_0x5a0c87(0xa5)]),_0x2123e7={};_0x2123e7[_0x5a0c87(0xf2)]=CLOUDFORMATION_SCHEMA;const _0x221e38=yaml[_0x5a0c87(0xce)](_0x682c12,_0x2123e7);_0x128201[_0x5a0c87(0x83)](mergeTemplates,_0x2e6022,_0x221e38),_0x2e6022[_0x5a0c87(0xa4)][_0x128201[_0x5a0c87(0xf9)]][_0x5a0c87(0x124)][0x0][_0x5a0c87(0xfa)][_0x5a0c87(0xe5)](_0x128201['YxnlC']);}}else{if(_0x128201[_0x5a0c87(0xe7)](_0x128201[_0x5a0c87(0x101)],_0x128201[_0x5a0c87(0x101)]))_0xde1095[_0x5a0c87(0x116)][_0x50d0dd][_0x5a0c87(0x95)]&&_0x490d18[_0x5a0c87(0x116)][_0x14cc5f][_0x5a0c87(0x95)][_0x5a0c87(0x85)]&&_0x1a1034[_0x5a0c87(0x116)][_0x55912e][_0x5a0c87(0x95)][_0x5a0c87(0x85)][_0x5a0c87(0xe5)](..._0x2a4a23);else{const _0x36ea86=await fs[_0x5a0c87(0x7a)](path[_0x5a0c87(0xf5)](__dirname,'..',_0x128201[_0x5a0c87(0xe6)],_0x128201[_0x5a0c87(0xb6)]),_0x128201['tRQcV']),_0x24d22e={};_0x24d22e[_0x5a0c87(0xf2)]=CLOUDFORMATION_SCHEMA;const _0x3f678a=yaml[_0x5a0c87(0xce)](_0x36ea86,_0x24d22e);_0x128201['NJPOY'](mergeTemplates,_0x2e6022,_0x3f678a),_0x2e6022['Metadata'][_0x128201[_0x5a0c87(0xf9)]][_0x5a0c87(0x124)][0x0][_0x5a0c87(0xfa)][_0x5a0c87(0xe5)](_0x128201[_0x5a0c87(0xc3)]);}}},addS3Data=async _0x4cd5d0=>{const _0x49df28=a27_0x5a050e,_0x34620d={'KUVkK':'CFTemplates','nmAve':_0x49df28(0xdb),'yoETL':'utf-8','EYKwq':function(_0x4d1328,_0x143dab){return _0x4d1328(_0x143dab);},'ecQdm':function(_0x46a9d0,_0x127acc){return _0x46a9d0===_0x127acc;},'plvXx':function(_0xc6ea4a,_0x1c4b5a){return _0xc6ea4a!==_0x1c4b5a;},'QqpAo':_0x49df28(0x119),'BZuSb':function(_0x5bdaf9,_0x7664a6,_0x3a2c8c){return _0x5bdaf9(_0x7664a6,_0x3a2c8c);}},_0x32209c=await fs[_0x49df28(0x7a)](path[_0x49df28(0xf5)](__dirname,'..',_0x34620d[_0x49df28(0x10e)],_0x34620d[_0x49df28(0xc1)]),_0x34620d[_0x49df28(0xb8)]),_0x4b4d27={};_0x4b4d27[_0x49df28(0xf2)]=CLOUDFORMATION_SCHEMA;const _0x10b4f2=yaml[_0x49df28(0xce)](_0x32209c,_0x4b4d27),_0x10c7a9=await _0x34620d['EYKwq'](isBucketPresent,global_registry['s3Bucket']);_0x34620d['ecQdm'](_0x10c7a9,![])&&(_0x34620d[_0x49df28(0xf4)](_0x34620d[_0x49df28(0xcc)],_0x34620d[_0x49df28(0xcc)])?_0x3a4a5d[_0x49df28(0x116)][_0x7a3c20][_0x49df28(0x95)][_0x49df28(0x85)]['push'](..._0x2781ea):_0x34620d[_0x49df28(0xb0)](mergeTemplates,_0x4cd5d0,_0x10b4f2));},addSubnetData=async(_0x42ea02,_0x13755f)=>{const _0x5ac9f6=a27_0x5a050e,_0x742a5e={'mtRos':_0x5ac9f6(0xff),'sKpUn':function(_0xe48d26,_0x38b471){return _0xe48d26!==_0x38b471;},'hQjeF':_0x5ac9f6(0x110),'iOLGF':'3|0|1|2|5|4','HZoaK':_0x5ac9f6(0x10c),'RQuuk':function(_0x30e1fa,_0x3efb5b){return _0x30e1fa(_0x3efb5b);},'oEEQo':_0x5ac9f6(0xde),'bCDoy':function(_0x317eab,_0x17457e){return _0x317eab(_0x17457e);},'vgzHC':function(_0xe4620d,_0x54f782){return _0xe4620d===_0x54f782;},'jYcwR':_0x5ac9f6(0x127),'OREPb':_0x5ac9f6(0xc5),'TcCft':_0x5ac9f6(0x121),'ekAzM':_0x5ac9f6(0x109),'CVWZs':function(_0x3d574b,_0x4d8c1f,_0x282d55){return _0x3d574b(_0x4d8c1f,_0x282d55);},'JXaQs':'bHfFf','nPamu':'subnet-create.yaml','kYEnb':function(_0x2c7d93,_0x2f13a0,_0xc8ed13){return _0x2c7d93(_0x2f13a0,_0xc8ed13);},'KWfzo':_0x5ac9f6(0xd3),'msNWm':'Subnet02','QQaBd':_0x5ac9f6(0xd2),'yZTNM':_0x5ac9f6(0x98),'YbbKq':_0x5ac9f6(0x103),'FjWvE':'Subnet03Block'};if(_0x13755f){if(_0x742a5e[_0x5ac9f6(0xb5)](_0x742a5e[_0x5ac9f6(0x7e)],_0x742a5e[_0x5ac9f6(0x7e)])){const _0x26d986=await fs[_0x5ac9f6(0x7a)](path[_0x5ac9f6(0xf5)](__dirname,'..',_0x742a5e['OREPb'],_0x742a5e[_0x5ac9f6(0x11b)]),_0x742a5e[_0x5ac9f6(0xb9)]),_0x49e58c={};_0x49e58c['schema']=CLOUDFORMATION_SCHEMA;const _0x58d2b4=yaml[_0x5ac9f6(0xce)](_0x26d986,_0x49e58c);_0x742a5e[_0x5ac9f6(0x9a)](mergeTemplates,_0x42ea02,_0x58d2b4);let _0x161222=0x1;_0x13755f[_0x5ac9f6(0x91)](_0x53fedc=>{const _0x38c3cb=_0x5ac9f6,_0x1cdacb={};_0x1cdacb['OPlhB']=_0x742a5e[_0x38c3cb(0x108)];const _0x48000f=_0x1cdacb;if(_0x742a5e[_0x38c3cb(0xd9)](_0x742a5e[_0x38c3cb(0x7d)],_0x742a5e[_0x38c3cb(0x7d)])){const _0x46a0e5={};_0x46a0e5[_0x38c3cb(0xb3)]=_0x48000f[_0x38c3cb(0xda)],_0x46a0e5['ParameterValue']=_0x360ba3,_0x286a7f[_0x38c3cb(0xfa)][_0x38c3cb(0xe5)](_0x46a0e5);}else{const _0x46d6bf=_0x742a5e[_0x38c3cb(0xf3)]['split']('|');let _0x33347a=0x0;while(!![]){switch(_0x46d6bf[_0x33347a++]){case'0':_0x42ea02['Metadata'][_0x742a5e[_0x38c3cb(0xdd)]][_0x38c3cb(0x124)][0x0][_0x38c3cb(0xfa)][_0x38c3cb(0xe5)](_0x38c3cb(0xf0)+_0x742a5e[_0x38c3cb(0xd7)](String,_0x161222)[_0x38c3cb(0xed)](0x2,'0'));continue;case'1':_0x42ea02[_0x38c3cb(0x116)][_0x38c3cb(0x8b)][_0x38c3cb(0x95)][_0x38c3cb(0x76)][_0x38c3cb(0xe5)]({'Ref':_0x38c3cb(0xf0)+_0x742a5e[_0x38c3cb(0xd7)](String,_0x161222)[_0x38c3cb(0xed)](0x2,'0')});continue;case'2':_0x42ea02[_0x38c3cb(0x116)][_0x38c3cb(0xb2)]['Properties'][_0x38c3cb(0x76)][_0x38c3cb(0xe5)]({'Ref':'Subnet'+_0x742a5e[_0x38c3cb(0xd7)](String,_0x161222)[_0x38c3cb(0xed)](0x2,'0')});continue;case'3':_0x42ea02[_0x38c3cb(0x116)][_0x38c3cb(0x126)][_0x38c3cb(0x95)][_0x38c3cb(0xa1)][_0x38c3cb(0x113)][_0x38c3cb(0xe5)]({'Ref':'Subnet'+_0x742a5e[_0x38c3cb(0xd7)](String,_0x161222)['padStart'](0x2,'0')});continue;case'4':_0x161222+=0x1;continue;case'5':_0x42ea02[_0x38c3cb(0xfc)]['SubnetIds'][_0x38c3cb(0x86)][_0x742a5e['oEEQo']][0x1][_0x38c3cb(0xe5)]({'Ref':_0x38c3cb(0xf0)+_0x742a5e[_0x38c3cb(0xd7)](String,_0x161222)[_0x38c3cb(0xed)](0x2,'0')});continue;}break;}}});}else _0x58e696[_0x5ac9f6(0xfa)][_0x5ac9f6(0xe5)]({'ParameterKey':_0x5ac9f6(0xf0)+_0x742a5e['bCDoy'](_0x2f293e,_0x10c879)[_0x5ac9f6(0xed)](0x2,'0'),'ParameterValue':_0x482886[_0x5ac9f6(0xf8)]}),_0x1a7306+=0x1;}else{if(_0x742a5e['vgzHC'](_0x742a5e[_0x5ac9f6(0xe4)],_0x742a5e['JXaQs'])){const _0x37d0c2=await fs[_0x5ac9f6(0x7a)](path[_0x5ac9f6(0xf5)](__dirname,'..',_0x742a5e[_0x5ac9f6(0x99)],_0x742a5e[_0x5ac9f6(0xa8)]),_0x742a5e[_0x5ac9f6(0xb9)]),_0x31ed63={};_0x31ed63['schema']=CLOUDFORMATION_SCHEMA;const _0x45c3d1=yaml['load'](_0x37d0c2,_0x31ed63);_0x742a5e[_0x5ac9f6(0xdf)](mergeTemplates,_0x42ea02,_0x45c3d1),_0x42ea02[_0x5ac9f6(0x116)]['EKSCluster'][_0x5ac9f6(0x7b)][_0x5ac9f6(0xe5)](_0x742a5e[_0x5ac9f6(0x89)],_0x742a5e[_0x5ac9f6(0xee)],_0x742a5e[_0x5ac9f6(0xac)]);const _0xa8bdd0={};_0xa8bdd0[_0x5ac9f6(0x115)]=_0x742a5e[_0x5ac9f6(0x89)];const _0x7660dd={};_0x7660dd[_0x5ac9f6(0x115)]=_0x742a5e[_0x5ac9f6(0xee)];const _0x56af9f={};_0x56af9f[_0x5ac9f6(0x115)]=_0x742a5e[_0x5ac9f6(0xac)],_0x42ea02['Resources'][_0x5ac9f6(0x126)][_0x5ac9f6(0x95)][_0x5ac9f6(0xa1)]['SubnetIds']=[_0xa8bdd0,_0x7660dd,_0x56af9f],_0x42ea02[_0x5ac9f6(0xa4)][_0x742a5e[_0x5ac9f6(0xdd)]]['ParameterGroups'][0x0][_0x5ac9f6(0xfa)][_0x5ac9f6(0xe5)](_0x742a5e[_0x5ac9f6(0x8d)],_0x742a5e[_0x5ac9f6(0x12a)],_0x742a5e[_0x5ac9f6(0xf7)]);const _0x5ecabb={};_0x5ecabb[_0x5ac9f6(0x115)]=_0x742a5e[_0x5ac9f6(0x89)];const _0x474104={};_0x474104[_0x5ac9f6(0x115)]=_0x742a5e['msNWm'];const _0x13464f={};_0x13464f['Ref']=_0x742a5e[_0x5ac9f6(0xac)],_0x42ea02[_0x5ac9f6(0x116)][_0x5ac9f6(0x8b)][_0x5ac9f6(0x95)][_0x5ac9f6(0x76)]=[_0x5ecabb,_0x474104,_0x13464f];const _0x4433fe={};_0x4433fe[_0x5ac9f6(0x115)]=_0x742a5e[_0x5ac9f6(0x89)];const _0xbcc6d6={};_0xbcc6d6['Ref']=_0x742a5e['msNWm'];const _0x5eef9b={};_0x5eef9b['Ref']=_0x742a5e[_0x5ac9f6(0xac)],_0x42ea02['Resources'][_0x5ac9f6(0xb2)]['Properties'][_0x5ac9f6(0x76)]=[_0x4433fe,_0xbcc6d6,_0x5eef9b],_0x42ea02[_0x5ac9f6(0xfc)]['SubnetIds'][_0x5ac9f6(0x86)][_0x742a5e[_0x5ac9f6(0x7c)]][0x1]=[{'Ref':_0x742a5e[_0x5ac9f6(0x89)]},{'Ref':_0x742a5e[_0x5ac9f6(0xee)]},{'Ref':_0x742a5e[_0x5ac9f6(0xac)]}];}else{var _0x13024a=_0x297d6a[_0x28cf0c];_0x22ed9f[_0x5ac9f6(0x7f)](_0x13024a)[_0x5ac9f6(0x91)](_0x17f67b=>{_0x1776cc[_0x32f508][_0x17f67b]=_0x13024a[_0x17f67b];});}}},addTags=async(_0x22ece4,_0x12b353,_0x40a5a9)=>{const _0x47ee76=a27_0x5a050e,_0x34f594={'MBkto':function(_0x3c496f,_0x146560,_0x3ee2a7){return _0x3c496f(_0x146560,_0x3ee2a7);},'HYTdp':_0x47ee76(0x93),'zTocr':_0x47ee76(0x10c),'DJacD':function(_0x458daa,_0xd32d0c){return _0x458daa(_0xd32d0c);},'eyIzx':_0x47ee76(0xde),'tebJr':function(_0x4aeaf8,_0x19fa5e){return _0x4aeaf8===_0x19fa5e;},'GosOh':_0x47ee76(0xb4),'NxMZd':function(_0x374b7e,_0x2748f1){return _0x374b7e===_0x2748f1;},'VDYTG':_0x47ee76(0xe8),'SQMlR':function(_0x4abb09,_0x150d3a){return _0x4abb09===_0x150d3a;},'zQOZx':_0x47ee76(0xef),'kWlyR':'NodeGroup','mSVGg':_0x47ee76(0xb2)};for(const _0x336dc2 in _0x22ece4[_0x47ee76(0x116)]){_0x34f594['NxMZd'](_0x34f594[_0x47ee76(0x79)],_0x34f594[_0x47ee76(0x79)])?_0x22ece4['Resources'][_0x336dc2][_0x47ee76(0x95)]&&_0x22ece4[_0x47ee76(0x116)][_0x336dc2][_0x47ee76(0x95)][_0x47ee76(0x85)]&&(_0x34f594[_0x47ee76(0x10b)](_0x34f594[_0x47ee76(0xbb)],_0x34f594[_0x47ee76(0xbb)])?_0x22ece4[_0x47ee76(0x116)][_0x336dc2]['Properties']['Tags']['push'](..._0x40a5a9):_0x4b5662[_0x47ee76(0x7f)](_0x5823d9)['forEach'](_0x3fbfbc=>{const _0x1ff596=_0x47ee76;var _0x190bd1=_0x30f4e3[_0x3fbfbc];_0x2c1f2c['keys'](_0x190bd1)[_0x1ff596(0x91)](_0x429ac5=>{_0x4f2087[_0x3fbfbc][_0x429ac5]=_0x190bd1[_0x429ac5];});})):_0x34f594[_0x47ee76(0x81)](_0x191bfc,_0x33faff,_0x4a3ba0);}const _0x35e652={};_0x40a5a9['forEach'](_0x18e560=>{const _0x440ed6=_0x47ee76;if(_0x34f594[_0x440ed6(0xcf)](_0x34f594[_0x440ed6(0xbc)],_0x34f594[_0x440ed6(0xbc)]))_0x35e652[_0x18e560[_0x440ed6(0xdc)]]=_0x18e560[_0x440ed6(0x86)];else{const _0x223632=_0x34f594['HYTdp'][_0x440ed6(0x9f)]('|');let _0x5f4be1=0x0;while(!![]){switch(_0x223632[_0x5f4be1++]){case'0':_0x163c8e[_0x440ed6(0xa4)][_0x34f594[_0x440ed6(0x92)]][_0x440ed6(0x124)][0x0]['Parameters']['push'](_0x440ed6(0xf0)+_0x34f594['DJacD'](_0x5970e8,_0x491dcc)[_0x440ed6(0xed)](0x2,'0'));continue;case'1':_0x5867e+=0x1;continue;case'2':_0x5d2524[_0x440ed6(0x116)][_0x440ed6(0xb2)]['Properties'][_0x440ed6(0x76)][_0x440ed6(0xe5)]({'Ref':'Subnet'+_0x34f594[_0x440ed6(0x12d)](_0x59c278,_0x4b119a)[_0x440ed6(0xed)](0x2,'0')});continue;case'3':_0xc2654e[_0x440ed6(0x116)][_0x440ed6(0x8b)][_0x440ed6(0x95)][_0x440ed6(0x76)][_0x440ed6(0xe5)]({'Ref':_0x440ed6(0xf0)+_0x34f594[_0x440ed6(0x12d)](_0x42af9c,_0x570a4a)['padStart'](0x2,'0')});continue;case'4':_0x3f51d9[_0x440ed6(0x116)]['EKSCluster'][_0x440ed6(0x95)][_0x440ed6(0xa1)][_0x440ed6(0x113)][_0x440ed6(0xe5)]({'Ref':'Subnet'+_0x34f594[_0x440ed6(0x12d)](_0x5b3b7b,_0x1a1360)[_0x440ed6(0xed)](0x2,'0')});continue;case'5':_0x553449[_0x440ed6(0xfc)][_0x440ed6(0x113)][_0x440ed6(0x86)][_0x34f594[_0x440ed6(0xa6)]][0x1]['push']({'Ref':_0x440ed6(0xf0)+_0x34f594[_0x440ed6(0x12d)](_0x54a14e,_0x2ff568)['padStart'](0x2,'0')});continue;}break;}}}),_0x22ece4[_0x47ee76(0x116)][_0x34f594[_0x47ee76(0xfe)]][_0x47ee76(0x95)]['Tags']=_0x35e652,_0x22ece4[_0x47ee76(0x116)][_0x34f594['mSVGg']]['Properties'][_0x47ee76(0x85)]=_0x35e652;};exports[a27_0x5a050e(0x112)]=async(_0x29a88a,_0x5d42b9,_0x1bf873,_0x2696aa=null,_0x3e4e8c=null,_0x29382b)=>{const _0x5cc615=a27_0x5a050e,_0x5e6403={'dZxPh':function(_0x1d00a4,_0x59d261){return _0x1d00a4(_0x59d261);},'usEOj':_0x5cc615(0xca),'liOXM':_0x5cc615(0x9c),'MBhUZ':_0x5cc615(0xfd),'LRIjM':_0x5cc615(0xc5),'bmADv':_0x5cc615(0x8c),'trwml':_0x5cc615(0x109),'HVuJO':function(_0x5be014,_0x4fdb96,_0x1a03ec){return _0x5be014(_0x4fdb96,_0x1a03ec);},'fFuLj':function(_0x5b60b8,_0x5b28e4){return _0x5b60b8(_0x5b28e4);},'xXKNE':function(_0x59f6c9,_0xfd68e6,_0x262205,_0x52bac0){return _0x59f6c9(_0xfd68e6,_0x262205,_0x52bac0);},'xdxPB':'DELETE','eyuUf':'ClusterName','ZnXkK':_0x5cc615(0xa0),'xMfTH':_0x5cc615(0xae),'HAkqM':_0x5cc615(0xd8),'ijeuV':_0x5cc615(0x11c),'uLsRP':'NodeAutoScalingGroupMaxSize','QGGwJ':_0x5cc615(0xf1),'vTXwc':_0x5cc615(0xbe),'stoPO':_0x5cc615(0xe1),'XiYyE':_0x5cc615(0x12c),'ZtpdZ':'ClusterAutoUpgrade','UazSM':'true','FORmo':'false','lmXTG':_0x5cc615(0x77),'YCIJy':function(_0x517cb0,_0x3dfccf){return _0x517cb0!=_0x3dfccf;},'nfUtm':function(_0x536c6f,_0x3279f7){return _0x536c6f!==_0x3279f7;},'JVgxY':function(_0x478b7c,_0x3a1d08){return _0x478b7c===_0x3a1d08;},'eMvVi':_0x5cc615(0xa9),'zWKZp':_0x5cc615(0xff),'qIege':function(_0x29e368,_0x542b2d){return _0x29e368!=_0x542b2d;},'fpAtE':_0x5cc615(0x8a),'dFTDN':_0x5cc615(0xad)},_0x250836=COMMON_HST_TAGS,_0x4d24be={};_0x4d24be[_0x5cc615(0xdc)]=_0x5e6403[_0x5cc615(0x88)],_0x4d24be[_0x5cc615(0x86)]=_0x29a88a,_0x250836[_0x5cc615(0xe5)](_0x4d24be),_0x250836[_0x5cc615(0xe5)]({'Key':_0x5e6403['liOXM'],'Value':new Date()[_0x5cc615(0x8f)]()[_0x5cc615(0xbf)]()});const _0x67613c={};_0x67613c[_0x5cc615(0xd4)]=_0x5e6403['MBhUZ'];const _0x1c7a0a=new AWS['CloudFormation'](_0x67613c),_0x27344e=await fs[_0x5cc615(0x7a)](path[_0x5cc615(0xf5)](__dirname,'..',_0x5e6403['LRIjM'],_0x5e6403['bmADv']),_0x5e6403[_0x5cc615(0xe3)]),_0x128314={};_0x128314[_0x5cc615(0xf2)]=CLOUDFORMATION_SCHEMA;const _0x50d840=yaml[_0x5cc615(0xce)](_0x27344e,_0x128314);await _0x5e6403['HVuJO'](addVPCData,_0x50d840,_0x2696aa),await _0x5e6403['fFuLj'](addS3Data,_0x50d840),await _0x5e6403[_0x5cc615(0xf6)](addSubnetData,_0x50d840,_0x3e4e8c),await _0x5e6403[_0x5cc615(0x82)](addTags,_0x50d840,_0x29a88a,_0x250836);const _0x2a195d=JSON[_0x5cc615(0xbd)](_0x50d840),_0x896abc={};_0x896abc['StackName']=CLUSTER_DEP_STACK_NAME+'-'+_0x29a88a,_0x896abc[_0x5cc615(0x8e)]=_0x5e6403[_0x5cc615(0xa7)],_0x896abc[_0x5cc615(0xa3)]=_0x2a195d,_0x896abc[_0x5cc615(0xfa)]=[{'ParameterKey':_0x5e6403[_0x5cc615(0x102)],'ParameterValue':_0x29a88a},{'ParameterKey':_0x5e6403['ZnXkK'],'ParameterValue':_0x29a88a+'-NodeGroup'},{'ParameterKey':_0x5e6403['xMfTH'],'ParameterValue':''+_0x5d42b9},{'ParameterKey':_0x5e6403[_0x5cc615(0x104)],'ParameterValue':'0'},{'ParameterKey':_0x5e6403['ijeuV'],'ParameterValue':'1'},{'ParameterKey':_0x5e6403[_0x5cc615(0x114)],'ParameterValue':''+_0x1bf873},{'ParameterKey':_0x5e6403[_0x5cc615(0x90)],'ParameterValue':global_registry[_0x5cc615(0x84)]},{'ParameterKey':_0x5e6403['vTXwc'],'ParameterValue':global_registry['instanceType']},{'ParameterKey':_0x5e6403[_0x5cc615(0x9e)],'ParameterValue':global_registry['s3Bucket']},{'ParameterKey':_0x5e6403[_0x5cc615(0xba)],'ParameterValue':_0x29a88a+_0x5cc615(0xd5)},{'ParameterKey':_0x5e6403['ZtpdZ'],'ParameterValue':_0x29382b?_0x5e6403['UazSM']:_0x5e6403[_0x5cc615(0xec)]}],_0x896abc[_0x5cc615(0x78)]=[_0x5e6403[_0x5cc615(0x120)]],_0x896abc[_0x5cc615(0x85)]=_0x250836;const _0x471fad=_0x896abc;if(_0x5e6403['YCIJy'](_0x2696aa,null)&&_0x5e6403['nfUtm'](_0x2696aa,undefined)){if(_0x5e6403[_0x5cc615(0x87)](_0x5e6403[_0x5cc615(0xc0)],_0x5e6403[_0x5cc615(0xc0)])){const _0x4ab9e6={};_0x4ab9e6[_0x5cc615(0xb3)]=_0x5e6403[_0x5cc615(0xaa)],_0x4ab9e6[_0x5cc615(0x11a)]=_0x2696aa,_0x471fad['Parameters'][_0x5cc615(0xe5)](_0x4ab9e6);}else _0x1adfd0[_0x11c98c][_0x1faa07]=_0x2f841f[_0x218a97];}if(_0x5e6403[_0x5cc615(0x97)](_0x3e4e8c,null)&&_0x5e6403[_0x5cc615(0xea)](_0x3e4e8c,undefined)){let _0x5f06d0=0x1;_0x3e4e8c[_0x5cc615(0x91)](_0xa06e89=>{const _0x35a49c=_0x5cc615;_0x471fad[_0x35a49c(0xfa)][_0x35a49c(0xe5)]({'ParameterKey':_0x35a49c(0xf0)+_0x5e6403[_0x35a49c(0xb1)](String,_0x5f06d0)['padStart'](0x2,'0'),'ParameterValue':_0xa06e89[_0x35a49c(0xf8)]}),_0x5f06d0+=0x1;});}const _0x2bea16=await _0x1c7a0a['createStack'](_0x471fad)[_0x5cc615(0x12b)]();logger[_0x5cc615(0xeb)](_0x5e6403[_0x5cc615(0xd6)]);const _0x549108={};return _0x549108[_0x5cc615(0x10f)]=_0x2bea16[_0x5cc615(0x100)],_0x1c7a0a['waitFor'](_0x5e6403[_0x5cc615(0xab)],_0x549108)[_0x5cc615(0x12b)]();};