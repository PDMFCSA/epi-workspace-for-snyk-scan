const a27_0x271d4b=a27_0x5cd9;function a27_0x5cd9(_0x51b93f,_0x1ff212){const _0x119a42=a27_0x119a();return a27_0x5cd9=function(_0x5cd90b,_0x24afe3){_0x5cd90b=_0x5cd90b-0x1a4;let _0x3bb5f3=_0x119a42[_0x5cd90b];return _0x3bb5f3;},a27_0x5cd9(_0x51b93f,_0x1ff212);}(function(_0xc0107c,_0xd84cec){const _0x635c1a=a27_0x5cd9,_0x4b20b8=_0xc0107c();while(!![]){try{const _0x286129=parseInt(_0x635c1a(0x236))/0x1+parseInt(_0x635c1a(0x23b))/0x2*(parseInt(_0x635c1a(0x1f1))/0x3)+parseInt(_0x635c1a(0x1c9))/0x4*(parseInt(_0x635c1a(0x1f4))/0x5)+-parseInt(_0x635c1a(0x203))/0x6*(parseInt(_0x635c1a(0x20a))/0x7)+parseInt(_0x635c1a(0x1e8))/0x8*(-parseInt(_0x635c1a(0x221))/0x9)+parseInt(_0x635c1a(0x1cd))/0xa+parseInt(_0x635c1a(0x1a4))/0xb*(parseInt(_0x635c1a(0x22b))/0xc);if(_0x286129===_0xd84cec)break;else _0x4b20b8['push'](_0x4b20b8['shift']());}catch(_0x4897e6){_0x4b20b8['push'](_0x4b20b8['shift']());}}}(a27_0x119a,0xbbbdc));const fs=require('fs'),path=require('path'),Promise=require(a27_0x271d4b(0x23f)),yaml=require(a27_0x271d4b(0x20b)),{CLOUDFORMATION_SCHEMA}=require(a27_0x271d4b(0x228)),AWS=require(a27_0x271d4b(0x1ad))[a27_0x271d4b(0x246)],{CLUSTER_DEP_STACK_NAME,COMMON_HST_TAGS,global_registry}=require(a27_0x271d4b(0x214)),{logger}=require('../config/logger'),{isBucketPresent}=require(a27_0x271d4b(0x1ad));Promise['promisifyAll'](fs);const mergeTemplates=(_0x4aca8e,_0x49995c)=>{const _0x91c104=a27_0x271d4b,_0x1b3ccf={};_0x1b3ccf['hTalR']=function(_0x3b2e70,_0x1be400){return _0x3b2e70!==_0x1be400;},_0x1b3ccf[_0x91c104(0x1fc)]=_0x91c104(0x1f9),_0x1b3ccf[_0x91c104(0x1b5)]='wGZRL',_0x1b3ccf['RfGNU']=function(_0x56ae38,_0x3238a4){return _0x56ae38!==_0x3238a4;},_0x1b3ccf['toFBH']=_0x91c104(0x1dc);const _0x598fe7=_0x1b3ccf;Object[_0x91c104(0x1fd)](_0x49995c)[_0x91c104(0x22f)](_0x4fb21c=>{const _0x92b899=_0x91c104,_0x302b33={'OqHFq':function(_0x172c86,_0x4a48f2){const _0x38e395=a27_0x5cd9;return _0x598fe7[_0x38e395(0x248)](_0x172c86,_0x4a48f2);},'IGDHL':_0x598fe7[_0x92b899(0x1fc)],'CvBEq':_0x598fe7['XSaXx']};if(_0x598fe7['RfGNU'](_0x598fe7[_0x92b899(0x1df)],_0x598fe7[_0x92b899(0x1df)]))_0x5342fb[_0x92b899(0x1fd)](_0x455fb9)[_0x92b899(0x22f)](_0x5d8df3=>{const _0x1afcc2=_0x92b899;var _0x58e029=_0x1dddc0[_0x5d8df3];_0x296ef9[_0x1afcc2(0x1fd)](_0x58e029)[_0x1afcc2(0x22f)](_0x2db9cb=>{_0x27cff2[_0x5d8df3][_0x2db9cb]=_0x58e029[_0x2db9cb];});});else{var _0x1c0598=_0x49995c[_0x4fb21c];Object['keys'](_0x1c0598)['forEach'](_0x490f03=>{const _0x2b0e97=_0x92b899;if(_0x302b33[_0x2b0e97(0x22e)](_0x302b33[_0x2b0e97(0x1b4)],_0x302b33[_0x2b0e97(0x247)]))_0x4aca8e[_0x4fb21c][_0x490f03]=_0x1c0598[_0x490f03];else{var _0x26e1ee=_0x50bdfe[_0x1bfcf8];_0x48a1c7[_0x2b0e97(0x1fd)](_0x26e1ee)['forEach'](_0x1bee7f=>{_0x19699f[_0x1f8fb8][_0x1bee7f]=_0x26e1ee[_0x1bee7f];});}});}});},addVPCData=async(_0x43e5c0,_0x2edb5a)=>{const _0x417146=a27_0x271d4b,_0x157bda={'pkXbR':_0x417146(0x24f),'IjKXl':_0x417146(0x229),'trRec':function(_0x3e7c7b,_0x5a2008){return _0x3e7c7b(_0x5a2008);},'qfHdD':function(_0x1d70e4,_0xff5ff2){return _0x1d70e4!==_0xff5ff2;},'jAJaz':_0x417146(0x20d),'xZWCh':_0x417146(0x252),'AZpQV':_0x417146(0x215),'eFIxz':_0x417146(0x1c0),'FETdn':function(_0x24ae80,_0x602925,_0x424f29){return _0x24ae80(_0x602925,_0x424f29);},'UyXAb':_0x417146(0x1bd),'kHFxA':_0x417146(0x1a5),'TODWw':function(_0x33f91d,_0x29ae77){return _0x33f91d!==_0x29ae77;},'WIuwR':_0x417146(0x253),'cDclo':'KkoQL','VYlfi':_0x417146(0x1d9),'oSnWS':_0x417146(0x1a6)};if(_0x2edb5a){if(_0x157bda[_0x417146(0x1f5)](_0x157bda[_0x417146(0x241)],_0x157bda[_0x417146(0x241)])){for(const _0x4d998f in _0x510f61[_0x417146(0x207)]){_0x26c16e[_0x417146(0x207)][_0x4d998f][_0x417146(0x25c)]&&_0x294b84[_0x417146(0x207)][_0x4d998f]['Properties'][_0x417146(0x237)]&&_0x3a92c8[_0x417146(0x207)][_0x4d998f][_0x417146(0x25c)]['Tags'][_0x417146(0x250)](..._0xf6cb6f);}const _0x481aae={};_0x1ef099[_0x417146(0x22f)](_0x1b77f2=>{const _0x326f20=_0x417146;_0x481aae[_0x1b77f2[_0x326f20(0x255)]]=_0x1b77f2[_0x326f20(0x1bc)];}),_0x25fca1[_0x417146(0x207)][_0x157bda[_0x417146(0x20c)]][_0x417146(0x25c)]['Tags']=_0x481aae,_0x33938a[_0x417146(0x207)][_0x157bda[_0x417146(0x208)]][_0x417146(0x25c)][_0x417146(0x237)]=_0x481aae;}else{const _0x2264d7=await fs[_0x417146(0x1da)](path[_0x417146(0x233)](__dirname,'..',_0x157bda['xZWCh'],_0x157bda[_0x417146(0x25d)]),_0x157bda[_0x417146(0x220)]),_0x3de0e2={};_0x3de0e2['schema']=CLOUDFORMATION_SCHEMA;const _0x126cc5=yaml['load'](_0x2264d7,_0x3de0e2);_0x157bda[_0x417146(0x1ee)](mergeTemplates,_0x43e5c0,_0x126cc5),_0x43e5c0[_0x417146(0x243)][_0x157bda['UyXAb']][_0x417146(0x258)][0x0][_0x417146(0x24a)]['push'](_0x157bda[_0x417146(0x24d)]);}}else{if(_0x157bda['TODWw'](_0x157bda[_0x417146(0x1a8)],_0x157bda[_0x417146(0x25e)])){const _0x48e7be=await fs[_0x417146(0x1da)](path[_0x417146(0x233)](__dirname,'..',_0x157bda[_0x417146(0x1cf)],_0x157bda['VYlfi']),_0x157bda[_0x417146(0x220)]),_0x56d8b4={};_0x56d8b4['schema']=CLOUDFORMATION_SCHEMA;const _0x105f81=yaml[_0x417146(0x1e0)](_0x48e7be,_0x56d8b4);_0x157bda[_0x417146(0x1ee)](mergeTemplates,_0x43e5c0,_0x105f81),_0x43e5c0[_0x417146(0x243)][_0x157bda['UyXAb']]['ParameterGroups'][0x0]['Parameters'][_0x417146(0x250)](_0x157bda[_0x417146(0x218)]);}else{let _0x50a8ca=0x1;_0x1082ae[_0x417146(0x22f)](_0x3731e9=>{const _0x43a3e8=_0x417146;_0x22f75c[_0x43a3e8(0x24a)][_0x43a3e8(0x250)]({'ParameterKey':'Subnet'+_0x157bda[_0x43a3e8(0x225)](_0x42f4c5,_0x50a8ca)[_0x43a3e8(0x1c6)](0x2,'0'),'ParameterValue':_0x3731e9[_0x43a3e8(0x21d)]}),_0x50a8ca+=0x1;});}}},addS3Data=async _0x3f8569=>{const _0x34b9e7=a27_0x271d4b,_0x1e230c={'cskbH':function(_0x50330b,_0x326cef){return _0x50330b(_0x326cef);},'eELfd':_0x34b9e7(0x252),'HrctI':'s3-create.yaml','aFxSK':_0x34b9e7(0x1c0),'VWaGH':function(_0x1a566b,_0x3e9ba7){return _0x1a566b(_0x3e9ba7);},'aPyGr':function(_0x8b7bbb,_0x202b17){return _0x8b7bbb===_0x202b17;},'TLFaL':_0x34b9e7(0x1d5),'PJGos':_0x34b9e7(0x1db),'PwjgM':function(_0x341286,_0x4afee5,_0xc5a088){return _0x341286(_0x4afee5,_0xc5a088);}},_0x23464c=await fs[_0x34b9e7(0x1da)](path[_0x34b9e7(0x233)](__dirname,'..',_0x1e230c[_0x34b9e7(0x1b7)],_0x1e230c[_0x34b9e7(0x1b3)]),_0x1e230c[_0x34b9e7(0x1ff)]),_0x54e0f4={};_0x54e0f4['schema']=CLOUDFORMATION_SCHEMA;const _0x5d1e39=yaml[_0x34b9e7(0x1e0)](_0x23464c,_0x54e0f4),_0x4c13d5=await _0x1e230c[_0x34b9e7(0x1cc)](isBucketPresent,global_registry[_0x34b9e7(0x1a9)]);_0x1e230c[_0x34b9e7(0x1ce)](_0x4c13d5,![])&&(_0x1e230c[_0x34b9e7(0x1ce)](_0x1e230c[_0x34b9e7(0x227)],_0x1e230c[_0x34b9e7(0x1f2)])?(_0x3fabc5['Parameters'][_0x34b9e7(0x250)]({'ParameterKey':'Subnet'+_0x1e230c[_0x34b9e7(0x1bb)](_0x3156ba,_0x2af704)[_0x34b9e7(0x1c6)](0x2,'0'),'ParameterValue':_0x2e1341[_0x34b9e7(0x21d)]}),_0x5b376e+=0x1):_0x1e230c[_0x34b9e7(0x1b0)](mergeTemplates,_0x3f8569,_0x5d1e39));},addSubnetData=async(_0x4b6f89,_0x24370d)=>{const _0x18f598=a27_0x271d4b,_0x1c1cdf={'jcNKJ':function(_0x44e54c,_0x2bef9a){return _0x44e54c!==_0x2bef9a;},'OiXFg':'crmGc','yXhyr':'0|1|5|4|2|3','TgqYi':function(_0x2f50bb,_0xaf0563){return _0x2f50bb(_0xaf0563);},'SbJqh':_0x18f598(0x1bd),'aXPSy':function(_0x17a606,_0x393980){return _0x17a606(_0x393980);},'vBFoH':_0x18f598(0x1ac),'JDgbS':function(_0x3ce46b,_0x65e6d4){return _0x3ce46b(_0x65e6d4);},'KKnWk':function(_0x2520da,_0x33e8b9){return _0x2520da(_0x33e8b9);},'zqGie':function(_0x168bd5,_0x2fe68c){return _0x168bd5(_0x2fe68c);},'aXyfn':function(_0x1e22ef,_0x43405e){return _0x1e22ef===_0x43405e;},'jfbxo':_0x18f598(0x20e),'JVLUw':'CFTemplates','VMFIh':_0x18f598(0x1d2),'FAkWj':_0x18f598(0x1c0),'kBaux':function(_0x312912,_0x122b84,_0x2fddf2){return _0x312912(_0x122b84,_0x2fddf2);},'HMwzk':_0x18f598(0x1e9),'YkDCA':_0x18f598(0x259),'iidIt':'Subnet01','jfjBD':_0x18f598(0x1ae),'RroAp':_0x18f598(0x23a),'vSwkP':_0x18f598(0x231),'AMTqp':_0x18f598(0x1aa),'CeBDl':_0x18f598(0x1d8)};if(_0x24370d){if(_0x1c1cdf[_0x18f598(0x222)](_0x1c1cdf[_0x18f598(0x254)],_0x1c1cdf[_0x18f598(0x254)])){const _0xeca223=await fs['readFileAsync'](path[_0x18f598(0x233)](__dirname,'..',_0x1c1cdf[_0x18f598(0x1f0)],_0x1c1cdf['VMFIh']),_0x1c1cdf[_0x18f598(0x240)]),_0x5a56db={};_0x5a56db[_0x18f598(0x257)]=CLOUDFORMATION_SCHEMA;const _0x240164=yaml[_0x18f598(0x1e0)](_0xeca223,_0x5a56db);_0x1c1cdf[_0x18f598(0x1be)](mergeTemplates,_0x4b6f89,_0x240164);let _0x499254=0x1;_0x24370d[_0x18f598(0x22f)](_0x42e49c=>{const _0x137fa5=_0x18f598;if(_0x1c1cdf['jcNKJ'](_0x1c1cdf[_0x137fa5(0x224)],_0x1c1cdf[_0x137fa5(0x224)]))_0x19fbb7[_0x33f5b9[_0x137fa5(0x255)]]=_0x2c642b[_0x137fa5(0x1bc)];else{const _0x3ef827=_0x1c1cdf['yXhyr'][_0x137fa5(0x249)]('|');let _0x44a6f3=0x0;while(!![]){switch(_0x3ef827[_0x44a6f3++]){case'0':_0x4b6f89[_0x137fa5(0x207)][_0x137fa5(0x211)][_0x137fa5(0x25c)]['ResourcesVpcConfig'][_0x137fa5(0x1b2)][_0x137fa5(0x250)]({'Ref':_0x137fa5(0x1e3)+_0x1c1cdf[_0x137fa5(0x256)](String,_0x499254)[_0x137fa5(0x1c6)](0x2,'0')});continue;case'1':_0x4b6f89[_0x137fa5(0x243)][_0x1c1cdf[_0x137fa5(0x21b)]][_0x137fa5(0x258)][0x0][_0x137fa5(0x24a)][_0x137fa5(0x250)](_0x137fa5(0x1e3)+_0x1c1cdf[_0x137fa5(0x1ca)](String,_0x499254)[_0x137fa5(0x1c6)](0x2,'0'));continue;case'2':_0x4b6f89['Outputs']['SubnetIds'][_0x137fa5(0x1bc)][_0x1c1cdf['vBFoH']][0x1]['push']({'Ref':_0x137fa5(0x1e3)+_0x1c1cdf[_0x137fa5(0x1c8)](String,_0x499254)['padStart'](0x2,'0')});continue;case'3':_0x499254+=0x1;continue;case'4':_0x4b6f89[_0x137fa5(0x207)][_0x137fa5(0x229)]['Properties']['Subnets'][_0x137fa5(0x250)]({'Ref':_0x137fa5(0x1e3)+_0x1c1cdf[_0x137fa5(0x20f)](String,_0x499254)[_0x137fa5(0x1c6)](0x2,'0')});continue;case'5':_0x4b6f89['Resources']['NodeGroup'][_0x137fa5(0x25c)][_0x137fa5(0x1c2)][_0x137fa5(0x250)]({'Ref':'Subnet'+_0x1c1cdf[_0x137fa5(0x23d)](String,_0x499254)[_0x137fa5(0x1c6)](0x2,'0')});continue;}break;}}});}else _0x300df3[_0xc97c52][_0x207fb1]=_0x209d72[_0x302707];}else{if(_0x1c1cdf['jcNKJ'](_0x1c1cdf[_0x18f598(0x23e)],_0x1c1cdf[_0x18f598(0x23e)]))_0x3b781f[_0x18f598(0x207)][_0x1c5278][_0x18f598(0x25c)]&&_0x5c6e62[_0x18f598(0x207)][_0x384436][_0x18f598(0x25c)][_0x18f598(0x237)]&&_0x715eb4[_0x18f598(0x207)][_0x4c2204][_0x18f598(0x25c)]['Tags']['push'](..._0x31f89e);else{const _0x19642c=await fs[_0x18f598(0x1da)](path['join'](__dirname,'..',_0x1c1cdf[_0x18f598(0x1f0)],_0x1c1cdf['YkDCA']),_0x1c1cdf['FAkWj']),_0x3fb7f2={};_0x3fb7f2[_0x18f598(0x257)]=CLOUDFORMATION_SCHEMA;const _0x4e0451=yaml['load'](_0x19642c,_0x3fb7f2);_0x1c1cdf[_0x18f598(0x1be)](mergeTemplates,_0x4b6f89,_0x4e0451),_0x4b6f89[_0x18f598(0x207)][_0x18f598(0x211)][_0x18f598(0x24e)]['push'](_0x1c1cdf[_0x18f598(0x1e1)],_0x1c1cdf[_0x18f598(0x234)],_0x1c1cdf[_0x18f598(0x1e2)]);const _0x451ba3={};_0x451ba3['Ref']=_0x1c1cdf['iidIt'];const _0x34c4c4={};_0x34c4c4[_0x18f598(0x212)]=_0x1c1cdf[_0x18f598(0x234)];const _0x59fe62={};_0x59fe62[_0x18f598(0x212)]=_0x1c1cdf['RroAp'],_0x4b6f89['Resources']['EKSCluster']['Properties'][_0x18f598(0x24c)][_0x18f598(0x1b2)]=[_0x451ba3,_0x34c4c4,_0x59fe62],_0x4b6f89[_0x18f598(0x243)][_0x1c1cdf[_0x18f598(0x21b)]][_0x18f598(0x258)][0x0][_0x18f598(0x24a)][_0x18f598(0x250)](_0x1c1cdf[_0x18f598(0x1ef)],_0x1c1cdf[_0x18f598(0x1b8)],_0x1c1cdf['CeBDl']);const _0x3b2612={};_0x3b2612[_0x18f598(0x212)]=_0x1c1cdf[_0x18f598(0x1e1)];const _0x455ce2={};_0x455ce2[_0x18f598(0x212)]=_0x1c1cdf[_0x18f598(0x234)];const _0x579dc6={};_0x579dc6['Ref']=_0x1c1cdf['RroAp'],_0x4b6f89[_0x18f598(0x207)][_0x18f598(0x24f)][_0x18f598(0x25c)][_0x18f598(0x1c2)]=[_0x3b2612,_0x455ce2,_0x579dc6];const _0x535016={};_0x535016[_0x18f598(0x212)]=_0x1c1cdf[_0x18f598(0x1e1)];const _0x1cff4f={};_0x1cff4f[_0x18f598(0x212)]=_0x1c1cdf[_0x18f598(0x234)];const _0x2a42b7={};_0x2a42b7[_0x18f598(0x212)]=_0x1c1cdf['RroAp'],_0x4b6f89[_0x18f598(0x207)]['NodeGroupWindows'][_0x18f598(0x25c)]['Subnets']=[_0x535016,_0x1cff4f,_0x2a42b7],_0x4b6f89[_0x18f598(0x1b1)][_0x18f598(0x1b2)][_0x18f598(0x1bc)][_0x1c1cdf['vBFoH']][0x1]=[{'Ref':_0x1c1cdf[_0x18f598(0x1e1)]},{'Ref':_0x1c1cdf[_0x18f598(0x234)]},{'Ref':_0x1c1cdf['RroAp']}];}}},addTags=async(_0x11f836,_0x653ed7,_0x2b45b1)=>{const _0x231f9f=a27_0x271d4b,_0x2770b7={'ftlot':_0x231f9f(0x1d0),'ZFgsX':function(_0x384dae,_0x4af72f){return _0x384dae(_0x4af72f);},'OwGyv':function(_0x25619d,_0x23ce55){return _0x25619d(_0x23ce55);},'ickbP':_0x231f9f(0x1bd),'VLSUK':_0x231f9f(0x1ac),'BuoYB':function(_0x59ec3c,_0x3267d4,_0x5109b9){return _0x59ec3c(_0x3267d4,_0x5109b9);},'hnPdu':function(_0xda6f73,_0x29c251){return _0xda6f73===_0x29c251;},'CcAqO':'NUqii','hIqZS':'vErcx','fjXrz':_0x231f9f(0x1af),'bDKrS':function(_0x5262d2,_0x404413){return _0x5262d2!==_0x404413;},'IXELP':_0x231f9f(0x223),'cDOqv':_0x231f9f(0x1e5),'GYNNB':_0x231f9f(0x24f),'CuFYr':_0x231f9f(0x229)};for(const _0x3764bc in _0x11f836[_0x231f9f(0x207)]){if(_0x2770b7[_0x231f9f(0x21c)](_0x2770b7[_0x231f9f(0x21f)],_0x2770b7['fjXrz'])){if(_0x11f836[_0x231f9f(0x207)][_0x3764bc]['Properties']&&_0x11f836[_0x231f9f(0x207)][_0x3764bc][_0x231f9f(0x25c)][_0x231f9f(0x237)]){if(_0x2770b7[_0x231f9f(0x216)](_0x2770b7[_0x231f9f(0x1c3)],_0x2770b7[_0x231f9f(0x1ea)]))_0x11f836[_0x231f9f(0x207)][_0x3764bc]['Properties'][_0x231f9f(0x237)][_0x231f9f(0x250)](..._0x2b45b1);else{const _0x4c7ab6=_0x2770b7[_0x231f9f(0x1e7)][_0x231f9f(0x249)]('|');let _0x2074b9=0x0;while(!![]){switch(_0x4c7ab6[_0x2074b9++]){case'0':_0x528d1d[_0x231f9f(0x207)][_0x231f9f(0x229)][_0x231f9f(0x25c)]['Subnets'][_0x231f9f(0x250)]({'Ref':'Subnet'+_0x2770b7[_0x231f9f(0x1f7)](_0x409fc8,_0xf5dd0b)[_0x231f9f(0x1c6)](0x2,'0')});continue;case'1':_0x1fa92b[_0x231f9f(0x207)]['NodeGroup'][_0x231f9f(0x25c)]['Subnets']['push']({'Ref':_0x231f9f(0x1e3)+_0x2770b7[_0x231f9f(0x217)](_0x3e1c27,_0x2151c2)[_0x231f9f(0x1c6)](0x2,'0')});continue;case'2':_0x57b4f1+=0x1;continue;case'3':_0x43abad[_0x231f9f(0x243)][_0x2770b7[_0x231f9f(0x202)]]['ParameterGroups'][0x0][_0x231f9f(0x24a)][_0x231f9f(0x250)](_0x231f9f(0x1e3)+_0x2770b7[_0x231f9f(0x1f7)](_0x371540,_0x1fcb56)['padStart'](0x2,'0'));continue;case'4':_0x5be4aa['Outputs']['SubnetIds'][_0x231f9f(0x1bc)][_0x2770b7['VLSUK']][0x1][_0x231f9f(0x250)]({'Ref':_0x231f9f(0x1e3)+_0x2770b7[_0x231f9f(0x217)](_0x5ce695,_0x4bd359)[_0x231f9f(0x1c6)](0x2,'0')});continue;case'5':_0x551604[_0x231f9f(0x207)][_0x231f9f(0x211)][_0x231f9f(0x25c)][_0x231f9f(0x24c)][_0x231f9f(0x1b2)][_0x231f9f(0x250)]({'Ref':'Subnet'+_0x2770b7[_0x231f9f(0x1f7)](_0x39e048,_0x1ac9f7)['padStart'](0x2,'0')});continue;}break;}}}}else _0x2770b7['BuoYB'](_0x508d3d,_0x3a3b4b,_0x5ddc28);}const _0x4ea267={};_0x2b45b1[_0x231f9f(0x22f)](_0x337536=>{const _0x9181aa=_0x231f9f;_0x2770b7[_0x9181aa(0x21c)](_0x2770b7[_0x9181aa(0x1fa)],_0x2770b7[_0x9181aa(0x1b9)])?_0x2108ee[_0x9181aa(0x207)][_0x3cf263][_0x9181aa(0x25c)]['Tags'][_0x9181aa(0x250)](..._0x2378fd):_0x4ea267[_0x337536[_0x9181aa(0x255)]]=_0x337536[_0x9181aa(0x1bc)];}),_0x11f836['Resources'][_0x2770b7['GYNNB']][_0x231f9f(0x25c)][_0x231f9f(0x237)]=_0x4ea267,_0x11f836['Resources'][_0x2770b7[_0x231f9f(0x1d6)]][_0x231f9f(0x25c)][_0x231f9f(0x237)]=_0x4ea267;};function a27_0x119a(){const _0x561aeb=['ami','Properties','AZpQV','cDclo','1451219DsgWwD','VPC','VpcBlock','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','WIuwR','s3Bucket','Subnet02Block','UJpfX','Fn::Join','./AWSUtils','Subnet02','agXcw','PwjgM','Outputs','SubnetIds','HrctI','IGDHL','XSaXx','PssEd','eELfd','AMTqp','hIqZS','NodeInstanceType','cskbH','Value','AWS::CloudFormation::Interface','kBaux','ZDBla','utf-8','ZOjoy','Subnets','IXELP','NodeAutoScalingGroupDesiredSizeWindows','apiVersion','padStart','NodeAutoScalingGroupMinSize','JDgbS','14216uEQhBA','aXPSy','NodeAutoScalingGroupMinSizeWindows','VWaGH','1225280modgzz','aPyGr','xZWCh','5|3|1|0|4|2','browserstack:creationDate','subnet-import.yaml','StackId','ParameterKey','yYDOF','CuFYr','KtOPU','Subnet03Block','vpc-create.yaml','readFileAsync','XanRk','CGAIc','rtGVS','Capabilities','toFBH','load','iidIt','RroAp','Subnet','cSafH','kvpSP','NodeGroupNameWindows','ftlot','6762696pUcmhA','pcJWU','cDOqv','MfHcR','stackCreateComplete','RSmUS','FETdn','vSwkP','JVLUw','430857NZzMBV','PJGos','waitFor','305wjjEef','qfHdD','2010-05-15','ZFgsX','StackName','XPfdj','CcAqO','-NodeGroup','kYdlx','keys','valueOf','aFxSK','ParameterValue','createStack','ickbP','714060qcRLKv','debug','NodeGroupName','ARTHt','Resources','IjKXl','-Windows-NodeGroup','7zrNOrA','js-yaml','pkXbR','LcoSo','gUsgN','KKnWk','SPqjv','EKSCluster','Ref','zrMqI','../config/constants','vpc-import.yaml','bDKrS','OwGyv','oSnWS','instanceType','yKhlW','SbJqh','hnPdu','value','lRUHW','fjXrz','eFIxz','9ROeJiR','aXyfn','UsERb','OiXFg','trRec','NodeAutoScalingGroupMaxSize','TLFaL','js-yaml-cloudformation-schema','NodeGroupWindows','CAPABILITY_NAMED_IAM','84kdoEzz','Ivumz','kEgQr','OqHFq','forEach','createClusterStack','Subnet01Block','toString','join','jfjBD','tgrqO','326891sLWQVk','Tags','UxXfH','BUctp','Subnet03','2LnoIlC','EwMbB','zqGie','HMwzk','bluebird','FAkWj','jAJaz','ASAKJ','Metadata','LjivD','OnFailure','awsObj','CvBEq','hTalR','split','Parameters','S3BucketName','ResourcesVpcConfig','kHFxA','DependsOn','NodeGroup','push','NcCHL','CFTemplates','Trlgo','jfbxo','Key','TgqYi','schema','ParameterGroups','subnet-create.yaml','ClusterName'];a27_0x119a=function(){return _0x561aeb;};return a27_0x119a();}exports[a27_0x271d4b(0x230)]=async(_0x510281,_0x3a559a,_0x1fc212,_0x59c5f6=null,_0x1d9b4f=null)=>{const _0x36bb2f=a27_0x271d4b,_0x4ff004={'ZDBla':_0x36bb2f(0x1a5),'Ivumz':function(_0xec0bf4,_0x19c7fb){return _0xec0bf4(_0x19c7fb);},'zrMqI':'browserstack:cluster','KtOPU':_0x36bb2f(0x1d1),'UxXfH':_0x36bb2f(0x1f6),'SPqjv':_0x36bb2f(0x252),'UJpfX':'aws-eks-cluster-dep.yaml','WMIxw':_0x36bb2f(0x1c0),'xnKkC':function(_0x3373b9,_0x2f65c3,_0x42c482){return _0x3373b9(_0x2f65c3,_0x42c482);},'EwMbB':function(_0x39e9a8,_0x1d044c){return _0x39e9a8(_0x1d044c);},'tEFyV':function(_0x4737ee,_0x4f1a32,_0x3e685e,_0xc6ee84){return _0x4737ee(_0x4f1a32,_0x3e685e,_0xc6ee84);},'fVuYn':'DELETE','yKhlW':_0x36bb2f(0x25a),'hBuhR':_0x36bb2f(0x205),'ndnHD':_0x36bb2f(0x1c7),'KQkHh':_0x36bb2f(0x1cb),'zUyAK':_0x36bb2f(0x1c4),'MfHcR':_0x36bb2f(0x226),'BUctp':'NodeImageId','kEgQr':_0x36bb2f(0x1ba),'ZOjoy':_0x36bb2f(0x24b),'PssEd':_0x36bb2f(0x1e6),'NcCHL':_0x36bb2f(0x22a),'tgrqO':function(_0x40c421,_0x341010){return _0x40c421!=_0x341010;},'ASAKJ':function(_0x17a611,_0x1d5cb4){return _0x17a611!==_0x1d5cb4;},'rtGVS':function(_0x499282,_0x48fa72){return _0x499282!==_0x48fa72;},'cSafH':_0x36bb2f(0x244),'ARTHt':_0x36bb2f(0x21e),'RSmUS':_0x36bb2f(0x1a7),'TpMcW':_0x36bb2f(0x1ec)},_0x2d82d2=COMMON_HST_TAGS,_0x31376a={};_0x31376a[_0x36bb2f(0x255)]=_0x4ff004[_0x36bb2f(0x213)],_0x31376a['Value']=_0x510281,_0x2d82d2[_0x36bb2f(0x250)](_0x31376a),_0x2d82d2['push']({'Key':_0x4ff004[_0x36bb2f(0x1d7)],'Value':new Date()[_0x36bb2f(0x1fe)]()[_0x36bb2f(0x232)]()});const _0xa19e5c={};_0xa19e5c[_0x36bb2f(0x1c5)]=_0x4ff004[_0x36bb2f(0x238)];const _0x3d4d74=new AWS['CloudFormation'](_0xa19e5c),_0x4d6e83=await fs[_0x36bb2f(0x1da)](path[_0x36bb2f(0x233)](__dirname,'..',_0x4ff004[_0x36bb2f(0x210)],_0x4ff004[_0x36bb2f(0x1ab)]),_0x4ff004['WMIxw']),_0x47ee3b={};_0x47ee3b[_0x36bb2f(0x257)]=CLOUDFORMATION_SCHEMA;const _0x9bff27=yaml[_0x36bb2f(0x1e0)](_0x4d6e83,_0x47ee3b);await _0x4ff004['xnKkC'](addVPCData,_0x9bff27,_0x59c5f6),await _0x4ff004[_0x36bb2f(0x23c)](addS3Data,_0x9bff27),await _0x4ff004['xnKkC'](addSubnetData,_0x9bff27,_0x1d9b4f),await _0x4ff004['tEFyV'](addTags,_0x9bff27,_0x510281,_0x2d82d2);const _0x1c53dc=JSON['stringify'](_0x9bff27),_0x2f4c0f={};_0x2f4c0f[_0x36bb2f(0x1f8)]=CLUSTER_DEP_STACK_NAME+'-'+_0x510281,_0x2f4c0f[_0x36bb2f(0x245)]=_0x4ff004['fVuYn'],_0x2f4c0f['TemplateBody']=_0x1c53dc,_0x2f4c0f['Parameters']=[{'ParameterKey':_0x4ff004[_0x36bb2f(0x21a)],'ParameterValue':_0x510281},{'ParameterKey':_0x4ff004['hBuhR'],'ParameterValue':_0x510281+_0x36bb2f(0x1fb)},{'ParameterKey':_0x4ff004['ndnHD'],'ParameterValue':''+_0x3a559a},{'ParameterKey':_0x4ff004['KQkHh'],'ParameterValue':'0'},{'ParameterKey':_0x4ff004['zUyAK'],'ParameterValue':'1'},{'ParameterKey':_0x4ff004[_0x36bb2f(0x1eb)],'ParameterValue':''+_0x1fc212},{'ParameterKey':_0x4ff004[_0x36bb2f(0x239)],'ParameterValue':global_registry[_0x36bb2f(0x25b)]},{'ParameterKey':_0x4ff004[_0x36bb2f(0x22d)],'ParameterValue':global_registry[_0x36bb2f(0x219)]},{'ParameterKey':_0x4ff004[_0x36bb2f(0x1c1)],'ParameterValue':global_registry[_0x36bb2f(0x1a9)]},{'ParameterKey':_0x4ff004[_0x36bb2f(0x1b6)],'ParameterValue':_0x510281+_0x36bb2f(0x209)}],_0x2f4c0f[_0x36bb2f(0x1de)]=[_0x4ff004[_0x36bb2f(0x251)]],_0x2f4c0f[_0x36bb2f(0x237)]=_0x2d82d2;const _0x2a157a=_0x2f4c0f;if(_0x4ff004[_0x36bb2f(0x235)](_0x59c5f6,null)&&_0x4ff004[_0x36bb2f(0x242)](_0x59c5f6,undefined)){if(_0x4ff004[_0x36bb2f(0x1dd)](_0x4ff004[_0x36bb2f(0x1e4)],_0x4ff004[_0x36bb2f(0x206)])){const _0xd8faaf={};_0xd8faaf[_0x36bb2f(0x1d4)]=_0x4ff004[_0x36bb2f(0x1bf)],_0xd8faaf[_0x36bb2f(0x200)]=_0x59c5f6,_0x2a157a['Parameters'][_0x36bb2f(0x250)](_0xd8faaf);}else{const _0x1cdb2d={};_0x1cdb2d[_0x36bb2f(0x1d4)]=_0x4ff004[_0x36bb2f(0x1bf)],_0x1cdb2d['ParameterValue']=_0x1015f8,_0xd803df['Parameters'][_0x36bb2f(0x250)](_0x1cdb2d);}}if(_0x4ff004[_0x36bb2f(0x235)](_0x1d9b4f,null)&&_0x4ff004[_0x36bb2f(0x242)](_0x1d9b4f,undefined)){let _0x4f3911=0x1;_0x1d9b4f[_0x36bb2f(0x22f)](_0x41cc3a=>{const _0xc893f2=_0x36bb2f;_0x2a157a['Parameters']['push']({'ParameterKey':_0xc893f2(0x1e3)+_0x4ff004[_0xc893f2(0x22c)](String,_0x4f3911)[_0xc893f2(0x1c6)](0x2,'0'),'ParameterValue':_0x41cc3a[_0xc893f2(0x21d)]}),_0x4f3911+=0x1;});}const _0x395e6f=await _0x3d4d74[_0x36bb2f(0x201)](_0x2a157a)['promise']();logger[_0x36bb2f(0x204)](_0x4ff004[_0x36bb2f(0x1ed)]);const _0x4535de={};return _0x4535de[_0x36bb2f(0x1f8)]=_0x395e6f[_0x36bb2f(0x1d3)],_0x3d4d74[_0x36bb2f(0x1f3)](_0x4ff004['TpMcW'],_0x4535de)['promise']();};