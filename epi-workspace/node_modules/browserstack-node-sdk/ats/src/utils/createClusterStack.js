const a27_0x2fcb5f=a27_0x3f2e;function a27_0x2a3f(){const _0x28915=['value','oNuDh','ParameterKey','aws-eks-cluster-dep.yaml','piaWN','AicqV','iwqZe','lGpFV','sywiu','false','sEAJg','xUzwC','NodeInstanceType','xaEfB','gXktT','qMBHJ','ParameterValue','AwmYt','mdfpJ','efmjY','Subnet02Block','DELETE','TemplateBody','CloudFormation','FFhDI','36eOnLfH','5665625AhTftI','forEach','DependsOn','wQKrF','qzWbw','isyMA','../config/logger','s3-create.yaml','zbHpK','6274128ESZzfC','BvKFm','2010-05-15','NodeAutoScalingGroupDesiredSizeWindows','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','emElT','browserstack:cluster','TEQXu','DkiuW','yLxNB','DhwKY','CJhkT','DGnLC','createStack','tdjLT','5|0|2|4|3|1','sWZQL','load','VyxEZ','true','kVoYJ','Subnet','feHXN','zfIJe','1641NPrWsy','lZWzC','ami','RBrqL','CFTemplates','tsAmp','StackName','keys','zRfuY','YYehd','zQjHp','AWS::CloudFormation::Interface','path','Resources','lMHmP','RQaUp','RAsRV','QlYgr','NKKeR','s3Bucket','NGuHc','BbtYM','KqNro','onvJi','bluebird','js-yaml-cloudformation-schema','evQmD','VpcBlock','fsZcU','LKCDB','padStart','EKSCluster','ClusterAutoUpgrade','zzbBq','tDIbX','0|3|1|5|2|4','Key','-NodeGroup','NodeGroup','join','qwwDi','promisifyAll','ZPcLP','oJQNb','stackCreateComplete','./AWSUtils','16qEgaAj','nWrhn','Metadata','Ref','vcGzj','waitFor','JSukk','nrRYf','Tags','aZoNZ','JLdQh','valueOf','ASLtg','QipxZ','273414UJjudm','../config/constants','lTNvj','awsObj','MYxTm','bTsOv','skWRP','pvmev','PKoym','OnFailure','Subnets','kPKed','StackId','Subnet01Block','hShdJ','stringify','CMYTI','xltfQ','tQveZ','Value','wXCEW','promise','DFYrF','IsFqO','kWvFw','SubnetIds','instanceType','1512ybNAMP','NBoGg','S3BucketName','Parameters','OiAnQ','geegJ','zsKHe','ResourcesVpcConfig','-Windows-NodeGroup','js-yaml','VPMjX','schema','fKFLQ','TXgKf','dUGbq','qetzk','GFafm','UikPj','UsNPX','NodeGroupWindows','HxWnl','ztAkz','ParameterGroups','xCLDq','CClKF','1853652LVAChl','push','VPC','CqsfI','FoPpo','NodeImageId','wDFcY','ngEpQ','FfKgX','aEFUC','NodeGroupNameWindows','ElVAI','split','TfVrL','ZvJfw','EeKyv','NodeAutoScalingGroupMinSizeWindows','Subnet03Block','Subnet03','Rdccp','loUrE','TWZmU','readFileAsync','vpc-create.yaml','15107650wwoDWd','YOxcb','kZiPp','OHJgW','GKgJB','54792tYDbeI','browserstack:creationDate','createClusterStack','GUWmP','vpc-import.yaml','subnet-create.yaml','RfIdt','RvHIE','NodeAutoScalingGroupMinSize','PuYVV','flQzP','Properties','utf-8','FkfQV','apiVersion','vIYla'];a27_0x2a3f=function(){return _0x28915;};return a27_0x2a3f();}(function(_0x12f53e,_0xa9ef20){const _0x4a8aa9=a27_0x3f2e,_0x12381c=_0x12f53e();while(!![]){try{const _0x21d75b=parseInt(_0x4a8aa9(0xc0))/0x1*(-parseInt(_0x4a8aa9(0xee))/0x2)+parseInt(_0x4a8aa9(0xfc))/0x3*(parseInt(_0x4a8aa9(0x9e))/0x4)+-parseInt(_0x4a8aa9(0x9f))/0x5+-parseInt(_0x4a8aa9(0x130))/0x6+parseInt(_0x4a8aa9(0xa8))/0x7+parseInt(_0x4a8aa9(0x117))/0x8*(-parseInt(_0x4a8aa9(0x14d))/0x9)+parseInt(_0x4a8aa9(0x148))/0xa;if(_0x21d75b===_0xa9ef20)break;else _0x12381c['push'](_0x12381c['shift']());}catch(_0x1a4c3a){_0x12381c['push'](_0x12381c['shift']());}}}(a27_0x2a3f,0x97bac));function a27_0x3f2e(_0x47da91,_0x20954f){const _0x2a3f03=a27_0x2a3f();return a27_0x3f2e=function(_0x3f2e6e,_0x24b94c){_0x3f2e6e=_0x3f2e6e-0x93;let _0x2e2ca8=_0x2a3f03[_0x3f2e6e];return _0x2e2ca8;},a27_0x3f2e(_0x47da91,_0x20954f);}const fs=require('fs'),path=require(a27_0x2fcb5f(0xcc)),Promise=require(a27_0x2fcb5f(0xd8)),yaml=require(a27_0x2fcb5f(0x120)),{CLOUDFORMATION_SCHEMA}=require(a27_0x2fcb5f(0xd9)),AWS=require(a27_0x2fcb5f(0xed))[a27_0x2fcb5f(0xff)],{CLUSTER_DEP_STACK_NAME,COMMON_HST_TAGS,global_registry}=require(a27_0x2fcb5f(0xfd)),{logger}=require(a27_0x2fcb5f(0xa5)),{isBucketPresent}=require('./AWSUtils');Promise[a27_0x2fcb5f(0xe9)](fs);const mergeTemplates=(_0x3e848b,_0x4e9235)=>{const _0x121a82=a27_0x2fcb5f,_0x95f64={'wDFcY':function(_0x356424,_0x1a6683){return _0x356424===_0x1a6683;},'vcGzj':_0x121a82(0x14b),'RQaUp':_0x121a82(0xea),'ASLtg':_0x121a82(0xe3),'zbHpK':function(_0x44c923,_0x4011e4){return _0x44c923(_0x4011e4);},'LKCDB':'Fn::Join','IsFqO':function(_0x4348f0,_0x459585){return _0x4348f0(_0x459585);},'onvJi':_0x121a82(0xcb),'vrAbT':function(_0x255118,_0x5c85b1){return _0x255118(_0x5c85b1);},'efmjY':function(_0x581f79,_0x11bd79){return _0x581f79!==_0x11bd79;},'CJhkT':_0x121a82(0x162),'zQjHp':_0x121a82(0x153)};Object['keys'](_0x4e9235)['forEach'](_0xbc875c=>{const _0x501a3e=_0x121a82,_0x35ffc8={'flQzP':function(_0x2b775b,_0x24079d){const _0x1f1058=a27_0x3f2e;return _0x95f64[_0x1f1058(0x136)](_0x2b775b,_0x24079d);},'PKoym':_0x95f64[_0x501a3e(0xf2)],'GPzcN':_0x95f64[_0x501a3e(0xcf)],'JLdQh':_0x95f64[_0x501a3e(0xfa)],'kZiPp':function(_0x3ea5a8,_0x13cc95){const _0x572359=_0x501a3e;return _0x95f64[_0x572359(0xa7)](_0x3ea5a8,_0x13cc95);},'isyMA':_0x95f64[_0x501a3e(0xdd)],'tdjLT':function(_0x2da5d1,_0x1bc713){const _0x4452c3=_0x501a3e;return _0x95f64[_0x4452c3(0x113)](_0x2da5d1,_0x1bc713);},'evQmD':_0x95f64[_0x501a3e(0xd7)],'YYehd':function(_0x5048f0,_0x14f0ef){return _0x95f64['vrAbT'](_0x5048f0,_0x14f0ef);}};if(_0x95f64[_0x501a3e(0x98)](_0x95f64[_0x501a3e(0xb3)],_0x95f64[_0x501a3e(0xca)])){var _0x4e28c1=_0x4e9235[_0xbc875c];Object[_0x501a3e(0xc7)](_0x4e28c1)[_0x501a3e(0xa0)](_0x55abb1=>{const _0x505308=_0x501a3e;_0x35ffc8[_0x505308(0x157)](_0x35ffc8[_0x505308(0x104)],_0x35ffc8['GPzcN'])?_0xea7b9[_0x1ebf98][_0xcae86]=_0x129618[_0x3b4cfd]:_0x3e848b[_0xbc875c][_0x55abb1]=_0x4e28c1[_0x55abb1];});}else{const _0x5a3ee3=_0x35ffc8[_0x501a3e(0xf8)][_0x501a3e(0x13c)]('|');let _0x579029=0x0;while(!![]){switch(_0x5a3ee3[_0x579029++]){case'0':_0x5bbfba['Resources'][_0x501a3e(0xdf)][_0x501a3e(0x158)]['ResourcesVpcConfig']['SubnetIds'][_0x501a3e(0x131)]({'Ref':'Subnet'+_0x35ffc8['kZiPp'](_0x3e57b8,_0x8098e6)[_0x501a3e(0xde)](0x2,'0')});continue;case'1':_0x3c4618[_0x501a3e(0xcd)]['NodeGroup'][_0x501a3e(0x158)]['Subnets'][_0x501a3e(0x131)]({'Ref':_0x501a3e(0xbd)+_0x35ffc8[_0x501a3e(0x14a)](_0x1470c7,_0xb16240)[_0x501a3e(0xde)](0x2,'0')});continue;case'2':_0x3f78db['Outputs'][_0x501a3e(0x115)][_0x501a3e(0x10f)][_0x35ffc8[_0x501a3e(0xa4)]][0x1][_0x501a3e(0x131)]({'Ref':'Subnet'+_0x35ffc8[_0x501a3e(0xb6)](_0x1b4b77,_0x58ea35)[_0x501a3e(0xde)](0x2,'0')});continue;case'3':_0x51183b[_0x501a3e(0xf0)][_0x35ffc8[_0x501a3e(0xda)]][_0x501a3e(0x12d)][0x0][_0x501a3e(0x11a)]['push']('Subnet'+_0x35ffc8[_0x501a3e(0xc9)](_0x2d1d1e,_0x17e84e)[_0x501a3e(0xde)](0x2,'0'));continue;case'4':_0x2b380e+=0x1;continue;case'5':_0x3401ad['Resources'][_0x501a3e(0x12a)]['Properties'][_0x501a3e(0x106)][_0x501a3e(0x131)]({'Ref':_0x501a3e(0xbd)+_0x35ffc8[_0x501a3e(0x14a)](_0x4ecb34,_0x19e58d)[_0x501a3e(0xde)](0x2,'0')});continue;}break;}}});},addVPCData=async(_0x5a33d8,_0x4466b5)=>{const _0x42edc0=a27_0x2fcb5f,_0x2738e8={'sywiu':function(_0x35b883,_0x4b6e2a){return _0x35b883(_0x4b6e2a);},'RvHIE':function(_0xac1f05,_0x51a27f){return _0xac1f05!==_0x51a27f;},'loUrE':_0x42edc0(0xef),'HxWnl':_0x42edc0(0x13e),'oJQNb':_0x42edc0(0xc4),'yLxNB':_0x42edc0(0x151),'BbtYM':'utf-8','FkfQV':function(_0x46d913,_0x284a7f,_0x3c3949){return _0x46d913(_0x284a7f,_0x3c3949);},'FFhDI':_0x42edc0(0xcb),'AwmYt':_0x42edc0(0x132),'qzWbw':function(_0x14e292,_0xaff5a2){return _0x14e292!==_0xaff5a2;},'EeKyv':_0x42edc0(0xd0),'Fmuhq':_0x42edc0(0x147),'feHXN':_0x42edc0(0xdb)};if(_0x4466b5){if(_0x2738e8[_0x42edc0(0x154)](_0x2738e8[_0x42edc0(0x144)],_0x2738e8[_0x42edc0(0x12b)])){const _0x5dda11=await fs['readFileAsync'](path[_0x42edc0(0xe7)](__dirname,'..',_0x2738e8[_0x42edc0(0xeb)],_0x2738e8[_0x42edc0(0xb1)]),_0x2738e8[_0x42edc0(0xd5)]),_0x267880={};_0x267880['schema']=CLOUDFORMATION_SCHEMA;const _0x5a467b=yaml[_0x42edc0(0xb9)](_0x5dda11,_0x267880);_0x2738e8[_0x42edc0(0x15a)](mergeTemplates,_0x5a33d8,_0x5a467b),_0x5a33d8[_0x42edc0(0xf0)][_0x2738e8[_0x42edc0(0x9d)]]['ParameterGroups'][0x0][_0x42edc0(0x11a)][_0x42edc0(0x131)](_0x2738e8[_0x42edc0(0x96)]);}else _0x2b691f[_0x1739d4['Key']]=_0x447338[_0x42edc0(0x10f)];}else{if(_0x2738e8[_0x42edc0(0xa3)](_0x2738e8[_0x42edc0(0x13f)],_0x2738e8['EeKyv'])){const _0x2561f6={'wXCEW':function(_0x8c6289,_0xc3e195){const _0x5302b3=_0x42edc0;return _0x2738e8[_0x5302b3(0x165)](_0x8c6289,_0xc3e195);}};let _0x33d8a4=0x1;_0x4c4cdf[_0x42edc0(0xa0)](_0x434265=>{const _0x563a6c=_0x42edc0;_0x2730f5[_0x563a6c(0x11a)][_0x563a6c(0x131)]({'ParameterKey':_0x563a6c(0xbd)+_0x2561f6[_0x563a6c(0x110)](_0x22fb32,_0x33d8a4)[_0x563a6c(0xde)](0x2,'0'),'ParameterValue':_0x434265[_0x563a6c(0x15d)]}),_0x33d8a4+=0x1;});}else{const _0x19bc7c=await fs['readFileAsync'](path[_0x42edc0(0xe7)](__dirname,'..',_0x2738e8['oJQNb'],_0x2738e8['Fmuhq']),_0x2738e8[_0x42edc0(0xd5)]),_0x4da6a5={};_0x4da6a5['schema']=CLOUDFORMATION_SCHEMA;const _0x15608f=yaml['load'](_0x19bc7c,_0x4da6a5);_0x2738e8['FkfQV'](mergeTemplates,_0x5a33d8,_0x15608f),_0x5a33d8[_0x42edc0(0xf0)][_0x2738e8[_0x42edc0(0x9d)]][_0x42edc0(0x12d)][0x0][_0x42edc0(0x11a)][_0x42edc0(0x131)](_0x2738e8[_0x42edc0(0xbe)]);}}},addS3Data=async _0x12d8e7=>{const _0x572d0d=a27_0x2fcb5f,_0x22cd5e={'tQveZ':_0x572d0d(0x132),'kPKed':'CFTemplates','DkiuW':_0x572d0d(0xa6),'CClKF':'utf-8','QlYgr':function(_0x1515cc,_0x279287){return _0x1515cc(_0x279287);},'bTsOv':function(_0x22c05b,_0x4ef37d){return _0x22c05b===_0x4ef37d;},'xUzwC':_0x572d0d(0x143),'UikPj':_0x572d0d(0x139),'MYxTm':function(_0x111f75,_0x43a60e,_0x17b2a7){return _0x111f75(_0x43a60e,_0x17b2a7);}},_0x16a302=await fs['readFileAsync'](path['join'](__dirname,'..',_0x22cd5e[_0x572d0d(0x107)],_0x22cd5e[_0x572d0d(0xb0)]),_0x22cd5e[_0x572d0d(0x12f)]),_0x4f6b36={};_0x4f6b36[_0x572d0d(0x122)]=CLOUDFORMATION_SCHEMA;const _0x7f7ba4=yaml['load'](_0x16a302,_0x4f6b36),_0x338e7d=await _0x22cd5e[_0x572d0d(0xd1)](isBucketPresent,global_registry[_0x572d0d(0xd3)]);if(_0x22cd5e['bTsOv'](_0x338e7d,![])){if(_0x22cd5e[_0x572d0d(0x101)](_0x22cd5e[_0x572d0d(0x168)],_0x22cd5e[_0x572d0d(0x128)])){const _0x1d820d={};_0x1d820d[_0x572d0d(0x15f)]=_0x22cd5e[_0x572d0d(0x10e)],_0x1d820d[_0x572d0d(0x95)]=_0x19a18a,_0x41493f[_0x572d0d(0x11a)]['push'](_0x1d820d);}else _0x22cd5e[_0x572d0d(0x100)](mergeTemplates,_0x12d8e7,_0x7f7ba4);}},addSubnetData=async(_0x47c529,_0x14253e)=>{const _0x4433ec=a27_0x2fcb5f,_0x1da1e2={'DhwKY':function(_0x1b0642,_0x56c105){return _0x1b0642!==_0x56c105;},'DFYrF':_0x4433ec(0xc3),'hAtVU':_0x4433ec(0x13b),'skWRP':_0x4433ec(0xb7),'TEQXu':_0x4433ec(0xcb),'GUWmP':function(_0x3563f4,_0x48440d){return _0x3563f4(_0x48440d);},'FfKgX':function(_0xea7df0,_0x5be4aa){return _0xea7df0(_0x5be4aa);},'NGuHc':'Fn::Join','qWvtI':function(_0x269a42,_0x25f5d6){return _0x269a42(_0x25f5d6);},'lTNvj':function(_0x1c6a1b,_0x33ef1d){return _0x1c6a1b(_0x33ef1d);},'dmebQ':function(_0x5dd644,_0x3072b0){return _0x5dd644!==_0x3072b0;},'zRfuY':_0x4433ec(0x127),'zfIJe':_0x4433ec(0xc4),'KqNro':'subnet-import.yaml','lGpFV':_0x4433ec(0x159),'lZWzC':function(_0xda88b3,_0x425c32,_0x23871b){return _0xda88b3(_0x425c32,_0x23871b);},'tsAmp':function(_0xa58f1f,_0x4e65ad){return _0xa58f1f===_0x4e65ad;},'PuYVV':_0x4433ec(0x11d),'CMYTI':_0x4433ec(0xe8),'fsZcU':_0x4433ec(0x152),'gXktT':'Subnet01','sWZQL':'Subnet02','TWZmU':_0x4433ec(0x142),'BvKFm':_0x4433ec(0x109),'ngEpQ':_0x4433ec(0x99),'CiMEb':_0x4433ec(0x141)};if(_0x14253e){if(_0x1da1e2['dmebQ'](_0x1da1e2[_0x4433ec(0xc8)],_0x1da1e2[_0x4433ec(0xc8)]))_0x53786f['keys'](_0x274e06)[_0x4433ec(0xa0)](_0x547cfc=>{const _0x37b3d0=_0x4433ec;var _0x3cfc60=_0x10f547[_0x547cfc];_0x47305c[_0x37b3d0(0xc7)](_0x3cfc60)[_0x37b3d0(0xa0)](_0x294a1a=>{_0x474179[_0x547cfc][_0x294a1a]=_0x3cfc60[_0x294a1a];});});else{const _0x283746=await fs['readFileAsync'](path[_0x4433ec(0xe7)](__dirname,'..',_0x1da1e2[_0x4433ec(0xbf)],_0x1da1e2[_0x4433ec(0xd6)]),_0x1da1e2[_0x4433ec(0x164)]),_0x5435b0={};_0x5435b0[_0x4433ec(0x122)]=CLOUDFORMATION_SCHEMA;const _0x111b79=yaml['load'](_0x283746,_0x5435b0);_0x1da1e2['lZWzC'](mergeTemplates,_0x47c529,_0x111b79);let _0x20092f=0x1;_0x14253e[_0x4433ec(0xa0)](_0x275b07=>{const _0x50e636=_0x4433ec;if(_0x1da1e2[_0x50e636(0xb2)](_0x1da1e2[_0x50e636(0x112)],_0x1da1e2['hAtVU'])){const _0x175a5e=_0x1da1e2[_0x50e636(0x102)][_0x50e636(0x13c)]('|');let _0x25d541=0x0;while(!![]){switch(_0x175a5e[_0x25d541++]){case'0':_0x47c529['Metadata'][_0x1da1e2[_0x50e636(0xaf)]][_0x50e636(0x12d)][0x0][_0x50e636(0x11a)][_0x50e636(0x131)](_0x50e636(0xbd)+_0x1da1e2[_0x50e636(0x150)](String,_0x20092f)['padStart'](0x2,'0'));continue;case'1':_0x20092f+=0x1;continue;case'2':_0x47c529['Resources']['NodeGroup'][_0x50e636(0x158)][_0x50e636(0x106)]['push']({'Ref':_0x50e636(0xbd)+_0x1da1e2[_0x50e636(0x138)](String,_0x20092f)[_0x50e636(0xde)](0x2,'0')});continue;case'3':_0x47c529['Outputs'][_0x50e636(0x115)][_0x50e636(0x10f)][_0x1da1e2[_0x50e636(0xd4)]][0x1][_0x50e636(0x131)]({'Ref':'Subnet'+_0x1da1e2['qWvtI'](String,_0x20092f)[_0x50e636(0xde)](0x2,'0')});continue;case'4':_0x47c529[_0x50e636(0xcd)][_0x50e636(0x12a)][_0x50e636(0x158)][_0x50e636(0x106)][_0x50e636(0x131)]({'Ref':_0x50e636(0xbd)+_0x1da1e2[_0x50e636(0xfe)](String,_0x20092f)['padStart'](0x2,'0')});continue;case'5':_0x47c529[_0x50e636(0xcd)][_0x50e636(0xdf)][_0x50e636(0x158)][_0x50e636(0x11e)]['SubnetIds'][_0x50e636(0x131)]({'Ref':'Subnet'+_0x1da1e2['qWvtI'](String,_0x20092f)['padStart'](0x2,'0')});continue;}break;}}else _0x3d2b53['Resources'][_0x5aaab7]['Properties'][_0x50e636(0xf6)][_0x50e636(0x131)](..._0x259e21);});}}else{if(_0x1da1e2[_0x4433ec(0xc5)](_0x1da1e2[_0x4433ec(0x156)],_0x1da1e2[_0x4433ec(0x10c)]))_0x58e69e['Resources'][_0x580e86][_0x4433ec(0x158)]&&_0x26c315['Resources'][_0x5ad3ca][_0x4433ec(0x158)][_0x4433ec(0xf6)]&&_0x423708['Resources'][_0x452ff0][_0x4433ec(0x158)][_0x4433ec(0xf6)][_0x4433ec(0x131)](..._0x30eede);else{const _0x27d6ac=await fs['readFileAsync'](path[_0x4433ec(0xe7)](__dirname,'..',_0x1da1e2[_0x4433ec(0xbf)],_0x1da1e2[_0x4433ec(0xdc)]),_0x1da1e2[_0x4433ec(0x164)]),_0xe21837={};_0xe21837['schema']=CLOUDFORMATION_SCHEMA;const _0x519003=yaml['load'](_0x27d6ac,_0xe21837);_0x1da1e2[_0x4433ec(0xc1)](mergeTemplates,_0x47c529,_0x519003),_0x47c529['Resources']['EKSCluster'][_0x4433ec(0xa1)]['push'](_0x1da1e2['gXktT'],_0x1da1e2['sWZQL'],_0x1da1e2[_0x4433ec(0x145)]);const _0x1ffc1c={};_0x1ffc1c[_0x4433ec(0xf1)]=_0x1da1e2[_0x4433ec(0x93)];const _0x528f96={};_0x528f96[_0x4433ec(0xf1)]=_0x1da1e2[_0x4433ec(0xb8)];const _0x19aa69={};_0x19aa69[_0x4433ec(0xf1)]=_0x1da1e2['TWZmU'],_0x47c529[_0x4433ec(0xcd)][_0x4433ec(0xdf)][_0x4433ec(0x158)][_0x4433ec(0x11e)][_0x4433ec(0x115)]=[_0x1ffc1c,_0x528f96,_0x19aa69],_0x47c529['Metadata'][_0x1da1e2[_0x4433ec(0xaf)]][_0x4433ec(0x12d)][0x0]['Parameters'][_0x4433ec(0x131)](_0x1da1e2[_0x4433ec(0xa9)],_0x1da1e2[_0x4433ec(0x137)],_0x1da1e2['CiMEb']);const _0x356344={};_0x356344['Ref']=_0x1da1e2['gXktT'];const _0x354c46={};_0x354c46[_0x4433ec(0xf1)]=_0x1da1e2[_0x4433ec(0xb8)];const _0x370352={};_0x370352[_0x4433ec(0xf1)]=_0x1da1e2[_0x4433ec(0x145)],_0x47c529[_0x4433ec(0xcd)][_0x4433ec(0xe6)][_0x4433ec(0x158)][_0x4433ec(0x106)]=[_0x356344,_0x354c46,_0x370352];const _0x4b17e2={};_0x4b17e2[_0x4433ec(0xf1)]=_0x1da1e2[_0x4433ec(0x93)];const _0x58647f={};_0x58647f[_0x4433ec(0xf1)]=_0x1da1e2[_0x4433ec(0xb8)];const _0x18823f={};_0x18823f[_0x4433ec(0xf1)]=_0x1da1e2[_0x4433ec(0x145)],_0x47c529[_0x4433ec(0xcd)][_0x4433ec(0x12a)][_0x4433ec(0x158)][_0x4433ec(0x106)]=[_0x4b17e2,_0x58647f,_0x18823f],_0x47c529['Outputs']['SubnetIds'][_0x4433ec(0x10f)][_0x1da1e2[_0x4433ec(0xd4)]][0x1]=[{'Ref':_0x1da1e2[_0x4433ec(0x93)]},{'Ref':_0x1da1e2[_0x4433ec(0xb8)]},{'Ref':_0x1da1e2['TWZmU']}];}}},addTags=async(_0x537d08,_0x34699f,_0x507c40)=>{const _0x1f6162=a27_0x2fcb5f,_0x32ec37={'geegJ':function(_0x68a359,_0x2049f7,_0x2c0496){return _0x68a359(_0x2049f7,_0x2c0496);},'HBXpw':function(_0x29b4ab,_0x13ba0b){return _0x29b4ab(_0x13ba0b);},'lMHmP':function(_0x3e7b50,_0xd4877e){return _0x3e7b50===_0xd4877e;},'pvmev':_0x1f6162(0x134),'ZdWLR':_0x1f6162(0x14c),'fKFLQ':function(_0x5bac2c,_0x21f3b0){return _0x5bac2c!==_0x21f3b0;},'xltfQ':'UpwlD','xaEfB':_0x1f6162(0x114),'JSukk':_0x1f6162(0xe6),'qetzk':_0x1f6162(0x12a)};for(const _0x343cbc in _0x537d08[_0x1f6162(0xcd)]){_0x32ec37[_0x1f6162(0x123)](_0x32ec37[_0x1f6162(0x10d)],_0x32ec37[_0x1f6162(0x10d)])?_0x32ec37[_0x1f6162(0x11c)](_0x25ed62,_0x53ff06,_0xc4301e):_0x537d08[_0x1f6162(0xcd)][_0x343cbc][_0x1f6162(0x158)]&&_0x537d08[_0x1f6162(0xcd)][_0x343cbc][_0x1f6162(0x158)][_0x1f6162(0xf6)]&&(_0x32ec37[_0x1f6162(0xce)](_0x32ec37['xaEfB'],_0x32ec37[_0x1f6162(0x16a)])?_0x537d08[_0x1f6162(0xcd)][_0x343cbc][_0x1f6162(0x158)][_0x1f6162(0xf6)][_0x1f6162(0x131)](..._0x507c40):(_0x371ce2[_0x1f6162(0x11a)][_0x1f6162(0x131)]({'ParameterKey':_0x1f6162(0xbd)+_0x32ec37['HBXpw'](_0x5dc5b6,_0x58a62f)[_0x1f6162(0xde)](0x2,'0'),'ParameterValue':_0x7496ac['value']}),_0x5becfb+=0x1));}const _0x2d2036={};_0x507c40[_0x1f6162(0xa0)](_0x250661=>{const _0x429e78=_0x1f6162;if(_0x32ec37[_0x429e78(0xce)](_0x32ec37[_0x429e78(0x103)],_0x32ec37['ZdWLR'])){var _0x217a31=_0x464b51[_0x18a9c3];_0x230672[_0x429e78(0xc7)](_0x217a31)['forEach'](_0x178e21=>{_0xd84ea0[_0x30649d][_0x178e21]=_0x217a31[_0x178e21];});}else _0x2d2036[_0x250661[_0x429e78(0xe4)]]=_0x250661['Value'];}),_0x537d08[_0x1f6162(0xcd)][_0x32ec37[_0x1f6162(0xf4)]][_0x1f6162(0x158)][_0x1f6162(0xf6)]=_0x2d2036,_0x537d08[_0x1f6162(0xcd)][_0x32ec37[_0x1f6162(0x126)]][_0x1f6162(0x158)][_0x1f6162(0xf6)]=_0x2d2036;};exports[a27_0x2fcb5f(0x14f)]=async(_0x529075,_0x2436de,_0x5235d5,_0x257627=null,_0x213e20=null,_0x133e91)=>{const _0x2c0c9b=a27_0x2fcb5f,_0xab209e={'DGnLC':_0x2c0c9b(0xe6),'hShdJ':_0x2c0c9b(0x12a),'kVoYJ':function(_0x4458b2,_0x551427){return _0x4458b2(_0x551427);},'qMBHJ':_0x2c0c9b(0xae),'iwqZe':_0x2c0c9b(0x14e),'emElT':_0x2c0c9b(0xaa),'VyxEZ':'CFTemplates','elPoU':_0x2c0c9b(0x160),'YOxcb':_0x2c0c9b(0x159),'OiAnQ':function(_0x567655,_0x4768b8,_0x176ebe){return _0x567655(_0x4768b8,_0x176ebe);},'DdQyP':function(_0x48ba3f,_0x1c1a1d,_0x7d944c){return _0x48ba3f(_0x1c1a1d,_0x7d944c);},'VUeDS':function(_0x49f6cd,_0xe62833,_0x51b539,_0x5650d9){return _0x49f6cd(_0xe62833,_0x51b539,_0x5650d9);},'wQKrF':_0x2c0c9b(0x9a),'jGmEl':'ClusterName','xCLDq':'NodeGroupName','CqsfI':_0x2c0c9b(0x155),'nrRYf':_0x2c0c9b(0x140),'oNuDh':_0x2c0c9b(0xab),'sEAJg':'NodeAutoScalingGroupMaxSize','ztAkz':_0x2c0c9b(0x135),'NKKeR':_0x2c0c9b(0x169),'tDIbX':_0x2c0c9b(0x119),'RUXFj':_0x2c0c9b(0x13a),'TXgKf':_0x2c0c9b(0xe0),'xGaTN':_0x2c0c9b(0xbb),'dUGbq':_0x2c0c9b(0x166),'TfVrL':'CAPABILITY_NAMED_IAM','mdfpJ':function(_0x425e8f,_0x2b4722){return _0x425e8f!=_0x2b4722;},'NBoGg':function(_0x768e5c,_0x4db800){return _0x768e5c!==_0x4db800;},'piaWN':function(_0x185e3f,_0x1017a6){return _0x185e3f===_0x1017a6;},'VPMjX':'rfkka','aZoNZ':_0x2c0c9b(0x132),'QipxZ':function(_0x349cae,_0x423c48){return _0x349cae!=_0x423c48;},'vIYla':function(_0x57823f,_0x1c44bf){return _0x57823f!==_0x1c44bf;},'UsNPX':_0x2c0c9b(0xac),'zzbBq':_0x2c0c9b(0xec)},_0x3545ae=COMMON_HST_TAGS,_0x4a7ae5={};_0x4a7ae5[_0x2c0c9b(0xe4)]=_0xab209e[_0x2c0c9b(0x94)],_0x4a7ae5[_0x2c0c9b(0x10f)]=_0x529075,_0x3545ae['push'](_0x4a7ae5),_0x3545ae['push']({'Key':_0xab209e[_0x2c0c9b(0x163)],'Value':new Date()[_0x2c0c9b(0xf9)]()['toString']()});const _0x6fa75d={};_0x6fa75d[_0x2c0c9b(0x15b)]=_0xab209e[_0x2c0c9b(0xad)];const _0x48bd2b=new AWS[(_0x2c0c9b(0x9c))](_0x6fa75d),_0x33f541=await fs[_0x2c0c9b(0x146)](path['join'](__dirname,'..',_0xab209e[_0x2c0c9b(0xba)],_0xab209e['elPoU']),_0xab209e[_0x2c0c9b(0x149)]),_0x16ed66={};_0x16ed66[_0x2c0c9b(0x122)]=CLOUDFORMATION_SCHEMA;const _0x240233=yaml[_0x2c0c9b(0xb9)](_0x33f541,_0x16ed66);await _0xab209e[_0x2c0c9b(0x11b)](addVPCData,_0x240233,_0x257627),await _0xab209e[_0x2c0c9b(0xbc)](addS3Data,_0x240233),await _0xab209e['DdQyP'](addSubnetData,_0x240233,_0x213e20),await _0xab209e['VUeDS'](addTags,_0x240233,_0x529075,_0x3545ae);const _0x130c9c=JSON[_0x2c0c9b(0x10b)](_0x240233),_0x5bec55={};_0x5bec55[_0x2c0c9b(0xc6)]=CLUSTER_DEP_STACK_NAME+'-'+_0x529075,_0x5bec55[_0x2c0c9b(0x105)]=_0xab209e[_0x2c0c9b(0xa2)],_0x5bec55[_0x2c0c9b(0x9b)]=_0x130c9c,_0x5bec55[_0x2c0c9b(0x11a)]=[{'ParameterKey':_0xab209e['jGmEl'],'ParameterValue':_0x529075},{'ParameterKey':_0xab209e[_0x2c0c9b(0x12e)],'ParameterValue':_0x529075+_0x2c0c9b(0xe5)},{'ParameterKey':_0xab209e[_0x2c0c9b(0x133)],'ParameterValue':''+_0x2436de},{'ParameterKey':_0xab209e[_0x2c0c9b(0xf5)],'ParameterValue':'0'},{'ParameterKey':_0xab209e[_0x2c0c9b(0x15e)],'ParameterValue':'1'},{'ParameterKey':_0xab209e[_0x2c0c9b(0x167)],'ParameterValue':''+_0x5235d5},{'ParameterKey':_0xab209e[_0x2c0c9b(0x12c)],'ParameterValue':global_registry[_0x2c0c9b(0xc2)]},{'ParameterKey':_0xab209e[_0x2c0c9b(0xd2)],'ParameterValue':global_registry[_0x2c0c9b(0x116)]},{'ParameterKey':_0xab209e[_0x2c0c9b(0xe2)],'ParameterValue':global_registry[_0x2c0c9b(0xd3)]},{'ParameterKey':_0xab209e['RUXFj'],'ParameterValue':_0x529075+_0x2c0c9b(0x11f)},{'ParameterKey':_0xab209e[_0x2c0c9b(0x124)],'ParameterValue':_0x133e91?_0xab209e['xGaTN']:_0xab209e[_0x2c0c9b(0x125)]}],_0x5bec55['Capabilities']=[_0xab209e[_0x2c0c9b(0x13d)]],_0x5bec55[_0x2c0c9b(0xf6)]=_0x3545ae;const _0x123f98=_0x5bec55;if(_0xab209e[_0x2c0c9b(0x97)](_0x257627,null)&&_0xab209e[_0x2c0c9b(0x118)](_0x257627,undefined)){if(_0xab209e[_0x2c0c9b(0x161)](_0xab209e[_0x2c0c9b(0x121)],_0xab209e[_0x2c0c9b(0x121)])){const _0xe81bae={};_0xe81bae[_0x2c0c9b(0x15f)]=_0xab209e[_0x2c0c9b(0xf7)],_0xe81bae[_0x2c0c9b(0x95)]=_0x257627,_0x123f98[_0x2c0c9b(0x11a)][_0x2c0c9b(0x131)](_0xe81bae);}else{for(const _0x404b7c in _0x3926d1[_0x2c0c9b(0xcd)]){_0x106c0e[_0x2c0c9b(0xcd)][_0x404b7c]['Properties']&&_0x1f5ff4[_0x2c0c9b(0xcd)][_0x404b7c][_0x2c0c9b(0x158)][_0x2c0c9b(0xf6)]&&_0x5703bc[_0x2c0c9b(0xcd)][_0x404b7c][_0x2c0c9b(0x158)]['Tags']['push'](..._0x4ecc8d);}const _0x251ad2={};_0x1d1b3c[_0x2c0c9b(0xa0)](_0x55122c=>{const _0xbf6834=_0x2c0c9b;_0x251ad2[_0x55122c[_0xbf6834(0xe4)]]=_0x55122c[_0xbf6834(0x10f)];}),_0x5938f1[_0x2c0c9b(0xcd)][_0xab209e[_0x2c0c9b(0xb4)]][_0x2c0c9b(0x158)][_0x2c0c9b(0xf6)]=_0x251ad2,_0x58af5f[_0x2c0c9b(0xcd)][_0xab209e[_0x2c0c9b(0x10a)]][_0x2c0c9b(0x158)]['Tags']=_0x251ad2;}}if(_0xab209e[_0x2c0c9b(0xfb)](_0x213e20,null)&&_0xab209e[_0x2c0c9b(0x15c)](_0x213e20,undefined)){let _0x37e6ca=0x1;_0x213e20[_0x2c0c9b(0xa0)](_0x447306=>{const _0x1c00fa=_0x2c0c9b;_0x123f98[_0x1c00fa(0x11a)][_0x1c00fa(0x131)]({'ParameterKey':_0x1c00fa(0xbd)+_0xab209e[_0x1c00fa(0xbc)](String,_0x37e6ca)[_0x1c00fa(0xde)](0x2,'0'),'ParameterValue':_0x447306[_0x1c00fa(0x15d)]}),_0x37e6ca+=0x1;});}const _0x5063c5=await _0x48bd2b[_0x2c0c9b(0xb5)](_0x123f98)[_0x2c0c9b(0x111)]();logger['debug'](_0xab209e[_0x2c0c9b(0x129)]);const _0x532740={};return _0x532740[_0x2c0c9b(0xc6)]=_0x5063c5[_0x2c0c9b(0x108)],_0x48bd2b[_0x2c0c9b(0xf3)](_0xab209e[_0x2c0c9b(0xe1)],_0x532740)['promise']();};