const a27_0x4301ea=a27_0x24e9;(function(_0x223c19,_0xb67916){const _0x8ff32d=a27_0x24e9,_0x2cb6ad=_0x223c19();while(!![]){try{const _0x192705=-parseInt(_0x8ff32d(0x200))/0x1+parseInt(_0x8ff32d(0x203))/0x2+-parseInt(_0x8ff32d(0x1bb))/0x3+-parseInt(_0x8ff32d(0x1ee))/0x4*(parseInt(_0x8ff32d(0x217))/0x5)+-parseInt(_0x8ff32d(0x1b5))/0x6+-parseInt(_0x8ff32d(0x230))/0x7*(parseInt(_0x8ff32d(0x224))/0x8)+parseInt(_0x8ff32d(0x248))/0x9;if(_0x192705===_0xb67916)break;else _0x2cb6ad['push'](_0x2cb6ad['shift']());}catch(_0x236d00){_0x2cb6ad['push'](_0x2cb6ad['shift']());}}}(a27_0x1a7e,0xd0d4e));const fs=require('fs'),path=require(a27_0x4301ea(0x1f8)),Promise=require(a27_0x4301ea(0x1e4)),yaml=require(a27_0x4301ea(0x253)),{CLOUDFORMATION_SCHEMA}=require(a27_0x4301ea(0x223)),AWS=require(a27_0x4301ea(0x1ec))['awsObj'],{CLUSTER_DEP_STACK_NAME,COMMON_HST_TAGS,global_registry}=require(a27_0x4301ea(0x1ce)),{logger}=require('../config/logger'),{isBucketPresent}=require(a27_0x4301ea(0x1ec));function a27_0x1a7e(){const _0x5bbbd3=['EKSCluster','VpcBlock','ihvxk','hOKAb','VWvWA','load','ParameterKey','NodeGroupNameWindows','readFileAsync','HvHUb','createClusterStack','QZjBJ','lfySy','kqkhL','oDHyw','Resources','NodeGroupName','gEVEx','bluebird','Outputs','xctSq','CAPABILITY_NAMED_IAM','NodeImageId','nuGlY','aws-eks-cluster-dep.yaml','Key','./AWSUtils','edGPp','1688UnVnlT','MAAkB','nllrY','nxchY','NRSOi','utf-8','Subnet02','KtlQY','KKIYZ','UFOJN','path','JfeSw','RTViK','XnTPV','Subnet01','PsiGg','promise','lpYuk','1275688ETdRfG','TpbID','gFOQT','2661912bNyyLB','oYyAw','OBIXx','oLisB','PnlBU','2|4|0|5|1|3','QngRh','uvNoU','vSKGA','Pxfth','valueOf','s3-create.yaml','dDOCl','toString','lYuGk','HxQeH','ParameterGroups','ZrJqu','MStCV','mPKzu','14590kfLWFi','fiBfv','XNQqy','sdDZP','WLKZk','Tags','VPC','Fn::Join','schema','Subnets','false','promisifyAll','js-yaml-cloudformation-schema','10928408nqBtSv','WSbwV','SoGvv','tZrcs','ocrsu','SCzBp','OQmqs','DcLpU','NodeInstanceType','CFTemplates','gNHNd','Subnet02Block','7XvgoYP','BWosY','value','TGHxi','vlLvX','qJMpW','S3BucketName','NodeAutoScalingGroupMinSize','gfRpM','ygoZZ','Parameters','debug','lIlAr','forEach','zcCtL','xzRkl','ResourcesVpcConfig','AWS::CloudFormation::Interface','tmPAp','BOWAh','GrzYR','gqBiA','StackId','push','49109796DuAtWE','join','wjVFs','NodeGroupWindows','keys','Ref','StackName','NodeGroup','stringify','fyCyT','TFzYZ','js-yaml','gHEJO','afQYl','eexRK','YBjtm','vpc-create.yaml','lYSLf','NodeAutoScalingGroupMaxSize','IZDDk','Subnet','emhPY','-Windows-NodeGroup','padStart','yHXho','SubnetIds','subnet-import.yaml','true','krDrF','CloudFormation','GMsov','browserstack:cluster','QYoai','ami','aasol','bIWnC','DependsOn','IcSjr','ParameterValue','atHOg','AYvnz','aySrx','lZAtT','TeVwW','Capabilities','Subnet03Block','RGyBC','Value','TifPM','2416038nUiTxF','ClusterName','OnFailure','4|5|3|1|2|0','aUBPc','wxEpo','4969254hGNZDj','apiVersion','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','Subnet03','vpc-import.yaml','Properties','nuqbc','ZnBIc','Metadata','NodeAutoScalingGroupMinSizeWindows','lrJni','s3Bucket','subnet-create.yaml','TemplateBody','fqBwn','zVdEv','HcHvN','split','Subnet01Block','../config/constants','wXjti','-NodeGroup','stackCreateComplete'];a27_0x1a7e=function(){return _0x5bbbd3;};return a27_0x1a7e();}Promise[a27_0x4301ea(0x222)](fs);const mergeTemplates=(_0x20973d,_0x13221c)=>{const _0x36ce0a=a27_0x4301ea,_0x5ed228={'xzRkl':function(_0x450ea5,_0x34c389){return _0x450ea5(_0x34c389);},'CRfAL':function(_0xb6d27f,_0xbc4e4){return _0xb6d27f===_0xbc4e4;},'yHXho':_0x36ce0a(0x1a6),'OOsEI':function(_0x2a0f88,_0x26f37c){return _0x2a0f88===_0x26f37c;},'nuqbc':_0x36ce0a(0x202)};Object[_0x36ce0a(0x24c)](_0x13221c)['forEach'](_0x274dff=>{const _0x3773fd=_0x36ce0a,_0x4c6e34={'OBIXx':function(_0x1c8393,_0x249374){const _0x297b26=a27_0x24e9;return _0x5ed228[_0x297b26(0x23f)](_0x1c8393,_0x249374);},'YBjtm':function(_0x35c73c,_0x1e1065){return _0x5ed228['CRfAL'](_0x35c73c,_0x1e1065);},'BWosY':_0x5ed228[_0x3773fd(0x19c)]};if(_0x5ed228['OOsEI'](_0x5ed228[_0x3773fd(0x1c1)],_0x5ed228[_0x3773fd(0x1c1)])){var _0x6412ec=_0x13221c[_0x274dff];Object[_0x3773fd(0x24c)](_0x6412ec)['forEach'](_0x1be778=>{const _0x32c804=_0x3773fd;_0x4c6e34[_0x32c804(0x257)](_0x4c6e34[_0x32c804(0x231)],_0x4c6e34[_0x32c804(0x231)])?_0x20973d[_0x274dff][_0x1be778]=_0x6412ec[_0x1be778]:(_0xf4d6cd[_0x32c804(0x23a)]['push']({'ParameterKey':_0x32c804(0x25c)+_0x4c6e34[_0x32c804(0x205)](_0x4d6fb2,_0x40153e)[_0x32c804(0x19b)](0x2,'0'),'ParameterValue':_0x365de8['value']}),_0x5b0cef+=0x1);});}else _0x3dba20[_0x3773fd(0x24c)](_0x24a4da)[_0x3773fd(0x23d)](_0x34d50c=>{const _0x1e5111=_0x3773fd;var _0x39d5e2=_0x5d0c5b[_0x34d50c];_0x14c1d0[_0x1e5111(0x24c)](_0x39d5e2)[_0x1e5111(0x23d)](_0xaf7775=>{_0x1888b3[_0x34d50c][_0xaf7775]=_0x39d5e2[_0xaf7775];});});});},addVPCData=async(_0x2a67c8,_0x2e765f)=>{const _0x3b3cbe=a27_0x4301ea,_0x4cadca={'oYyAw':'VPC','fyCyT':_0x3b3cbe(0x1b8),'UFOJN':function(_0x167033,_0xb02aec){return _0x167033(_0xb02aec);},'hLLXw':'Fn::Join','HxQeH':function(_0xef8778,_0x3c5ada){return _0xef8778(_0x3c5ada);},'TFzYZ':function(_0x4717b3,_0x465d1c){return _0x4717b3(_0x465d1c);},'gEVEx':_0x3b3cbe(0x241),'oLisB':function(_0x19c429,_0x1c6ba0){return _0x19c429(_0x1c6ba0);},'Pxfth':function(_0x405147,_0x47e8fb){return _0x405147!==_0x47e8fb;},'lIlAr':_0x3b3cbe(0x1a0),'wXjti':'CFTemplates','nuGlY':_0x3b3cbe(0x1bf),'gHEJO':_0x3b3cbe(0x1f3),'xctSq':function(_0x4d6621,_0x3785e8,_0x3ae62e){return _0x4d6621(_0x3785e8,_0x3ae62e);},'zcCtL':function(_0x2c9a1d,_0x216dcc){return _0x2c9a1d===_0x216dcc;},'GMsov':_0x3b3cbe(0x22b),'ygoZZ':_0x3b3cbe(0x258),'tmPAp':_0x3b3cbe(0x1d3)};if(_0x2e765f){if(_0x4cadca[_0x3b3cbe(0x20c)](_0x4cadca[_0x3b3cbe(0x23c)],_0x4cadca[_0x3b3cbe(0x23c)])){const _0x31dc1e={};_0x31dc1e[_0x3b3cbe(0x1d8)]=_0x4cadca['oYyAw'],_0x31dc1e[_0x3b3cbe(0x1aa)]=_0x3fb1cd,_0x39b096[_0x3b3cbe(0x23a)][_0x3b3cbe(0x247)](_0x31dc1e);}else{const _0x3b5b4a=await fs[_0x3b3cbe(0x1da)](path['join'](__dirname,'..',_0x4cadca[_0x3b3cbe(0x1cf)],_0x4cadca[_0x3b3cbe(0x1e9)]),_0x4cadca[_0x3b3cbe(0x254)]),_0x43ecf9={};_0x43ecf9[_0x3b3cbe(0x21f)]=CLOUDFORMATION_SCHEMA;const _0x1dfb1d=yaml['load'](_0x3b5b4a,_0x43ecf9);_0x4cadca[_0x3b3cbe(0x1e6)](mergeTemplates,_0x2a67c8,_0x1dfb1d),_0x2a67c8[_0x3b3cbe(0x1c3)][_0x4cadca['gEVEx']]['ParameterGroups'][0x0]['Parameters'][_0x3b3cbe(0x247)](_0x4cadca[_0x3b3cbe(0x204)]);}}else{if(_0x4cadca[_0x3b3cbe(0x23e)](_0x4cadca[_0x3b3cbe(0x1a2)],_0x4cadca['GMsov'])){const _0x2397c9=await fs[_0x3b3cbe(0x1da)](path[_0x3b3cbe(0x249)](__dirname,'..',_0x4cadca[_0x3b3cbe(0x1cf)],_0x4cadca[_0x3b3cbe(0x239)]),_0x4cadca[_0x3b3cbe(0x254)]),_0x32072c={};_0x32072c[_0x3b3cbe(0x21f)]=CLOUDFORMATION_SCHEMA;const _0x292049=yaml['load'](_0x2397c9,_0x32072c);_0x4cadca['xctSq'](mergeTemplates,_0x2a67c8,_0x292049),_0x2a67c8[_0x3b3cbe(0x1c3)][_0x4cadca[_0x3b3cbe(0x1e3)]][_0x3b3cbe(0x213)][0x0]['Parameters'][_0x3b3cbe(0x247)](_0x4cadca[_0x3b3cbe(0x242)]);}else{const _0xe19239=_0x4cadca[_0x3b3cbe(0x251)][_0x3b3cbe(0x1cc)]('|');let _0x40d4c5=0x0;while(!![]){switch(_0xe19239[_0x40d4c5++]){case'0':_0x33bdb6+=0x1;continue;case'1':_0x328a63['Resources'][_0x3b3cbe(0x24b)][_0x3b3cbe(0x1c0)]['Subnets']['push']({'Ref':_0x3b3cbe(0x25c)+_0x4cadca[_0x3b3cbe(0x1f7)](_0x47ea69,_0x60321)[_0x3b3cbe(0x19b)](0x2,'0')});continue;case'2':_0x38da63[_0x3b3cbe(0x1e5)][_0x3b3cbe(0x19d)]['Value'][_0x4cadca['hLLXw']][0x1]['push']({'Ref':_0x3b3cbe(0x25c)+_0x4cadca[_0x3b3cbe(0x212)](_0x43a594,_0xe3b244)[_0x3b3cbe(0x19b)](0x2,'0')});continue;case'3':_0x2e7793[_0x3b3cbe(0x1e1)]['NodeGroup'][_0x3b3cbe(0x1c0)][_0x3b3cbe(0x220)][_0x3b3cbe(0x247)]({'Ref':_0x3b3cbe(0x25c)+_0x4cadca[_0x3b3cbe(0x252)](_0xa4f284,_0x2cbf48)[_0x3b3cbe(0x19b)](0x2,'0')});continue;case'4':_0x40cb37[_0x3b3cbe(0x1e1)]['EKSCluster'][_0x3b3cbe(0x1c0)][_0x3b3cbe(0x240)]['SubnetIds']['push']({'Ref':'Subnet'+_0x4cadca[_0x3b3cbe(0x212)](_0x14d7f3,_0x5a1cdb)[_0x3b3cbe(0x19b)](0x2,'0')});continue;case'5':_0x48aef7[_0x3b3cbe(0x1c3)][_0x4cadca[_0x3b3cbe(0x1e3)]][_0x3b3cbe(0x213)][0x0]['Parameters']['push'](_0x3b3cbe(0x25c)+_0x4cadca[_0x3b3cbe(0x206)](_0x2fad84,_0x9ed3ac)[_0x3b3cbe(0x19b)](0x2,'0'));continue;}break;}}}},addS3Data=async _0x37484f=>{const _0x3400e0=a27_0x4301ea,_0x3a1f10={'TGHxi':_0x3400e0(0x24f),'PnlBU':_0x3400e0(0x24b),'WLKZk':_0x3400e0(0x22d),'emhPY':_0x3400e0(0x20e),'lZAtT':_0x3400e0(0x1f3),'nxchY':function(_0x3087ba,_0x111284){return _0x3087ba(_0x111284);},'fqBwn':function(_0x3f31fe,_0x3e50ab){return _0x3f31fe===_0x3e50ab;},'XnTPV':_0x3400e0(0x1d5),'ocrsu':'cuxNL','BOWAh':function(_0x4eca7a,_0x4e0ae2,_0x580984){return _0x4eca7a(_0x4e0ae2,_0x580984);}},_0x53d469=await fs[_0x3400e0(0x1da)](path[_0x3400e0(0x249)](__dirname,'..',_0x3a1f10[_0x3400e0(0x21b)],_0x3a1f10[_0x3400e0(0x25d)]),_0x3a1f10[_0x3400e0(0x1ae)]),_0x555958={};_0x555958[_0x3400e0(0x21f)]=CLOUDFORMATION_SCHEMA;const _0x4e5af9=yaml[_0x3400e0(0x1d7)](_0x53d469,_0x555958),_0x41cc98=await _0x3a1f10[_0x3400e0(0x1f1)](isBucketPresent,global_registry[_0x3400e0(0x1c6)]);if(_0x3a1f10[_0x3400e0(0x1c9)](_0x41cc98,![])){if(_0x3a1f10[_0x3400e0(0x1c9)](_0x3a1f10[_0x3400e0(0x1fb)],_0x3a1f10[_0x3400e0(0x228)])){for(const _0x175016 in _0x2a2571[_0x3400e0(0x1e1)]){_0x1ca333['Resources'][_0x175016][_0x3400e0(0x1c0)]&&_0x18cc31[_0x3400e0(0x1e1)][_0x175016][_0x3400e0(0x1c0)][_0x3400e0(0x21c)]&&_0x32da9a[_0x3400e0(0x1e1)][_0x175016][_0x3400e0(0x1c0)][_0x3400e0(0x21c)][_0x3400e0(0x247)](..._0x469f05);}const _0x1c4185={};_0x28a13b['forEach'](_0x43d20f=>{const _0x56a514=_0x3400e0;_0x1c4185[_0x43d20f[_0x56a514(0x1eb)]]=_0x43d20f[_0x56a514(0x1b3)];}),_0x3ef1d2[_0x3400e0(0x1e1)][_0x3a1f10[_0x3400e0(0x233)]][_0x3400e0(0x1c0)][_0x3400e0(0x21c)]=_0x1c4185,_0x4f0984['Resources'][_0x3a1f10[_0x3400e0(0x207)]][_0x3400e0(0x1c0)][_0x3400e0(0x21c)]=_0x1c4185;}else _0x3a1f10[_0x3400e0(0x243)](mergeTemplates,_0x37484f,_0x4e5af9);}},addSubnetData=async(_0x19e506,_0x2c5047)=>{const _0x3eba33=a27_0x4301ea,_0x5f0b7c={'jdSxB':function(_0x310e38,_0x5635c4){return _0x310e38===_0x5635c4;},'HcHvN':_0x3eba33(0x1d4),'QYoai':_0x3eba33(0x208),'QngRh':function(_0x2fc4d1,_0x1e6325){return _0x2fc4d1(_0x1e6325);},'GrzYR':_0x3eba33(0x21e),'AYvnz':function(_0x365706,_0x9bcd08){return _0x365706(_0x9bcd08);},'QoCFI':function(_0x59ff4d,_0xe5fc9c){return _0x59ff4d(_0xe5fc9c);},'ZrJqu':_0x3eba33(0x241),'lpYuk':function(_0x38be1f,_0x3a2a93){return _0x38be1f(_0x3a2a93);},'IZDDk':function(_0x338d1c,_0x4121ef,_0x21ccd0){return _0x338d1c(_0x4121ef,_0x21ccd0);},'KKIYZ':function(_0x448882,_0x1b180f){return _0x448882===_0x1b180f;},'MAAkB':'Thcpn','edGPp':'CFTemplates','iQqKs':_0x3eba33(0x19e),'eexRK':_0x3eba33(0x1f3),'mRRqS':function(_0xcd8715,_0xc8e0f9){return _0xcd8715!==_0xc8e0f9;},'qJMpW':_0x3eba33(0x1ca),'TifPM':_0x3eba33(0x219),'wjVFs':_0x3eba33(0x1c7),'dDOCl':_0x3eba33(0x1fc),'atHOg':_0x3eba33(0x1f4),'uvNoU':_0x3eba33(0x1be),'OQmqs':_0x3eba33(0x1cd),'vlLvX':_0x3eba33(0x22f),'RTViK':_0x3eba33(0x1b1)};if(_0x2c5047){if(_0x5f0b7c[_0x3eba33(0x1f6)](_0x5f0b7c[_0x3eba33(0x1ef)],_0x5f0b7c[_0x3eba33(0x1ef)])){const _0x301387=await fs['readFileAsync'](path['join'](__dirname,'..',_0x5f0b7c[_0x3eba33(0x1ed)],_0x5f0b7c['iQqKs']),_0x5f0b7c[_0x3eba33(0x256)]),_0x38d73d={};_0x38d73d['schema']=CLOUDFORMATION_SCHEMA;const _0x12d448=yaml[_0x3eba33(0x1d7)](_0x301387,_0x38d73d);_0x5f0b7c[_0x3eba33(0x25b)](mergeTemplates,_0x19e506,_0x12d448);let _0x35b8dc=0x1;_0x2c5047[_0x3eba33(0x23d)](_0x49f4ea=>{const _0x21bb03=_0x3eba33;if(_0x5f0b7c['jdSxB'](_0x5f0b7c[_0x21bb03(0x1cb)],_0x5f0b7c['HcHvN'])){const _0x16c1f4=_0x5f0b7c[_0x21bb03(0x1a4)][_0x21bb03(0x1cc)]('|');let _0x43573a=0x0;while(!![]){switch(_0x16c1f4[_0x43573a++]){case'0':_0x19e506[_0x21bb03(0x1e1)][_0x21bb03(0x24f)]['Properties'][_0x21bb03(0x220)][_0x21bb03(0x247)]({'Ref':'Subnet'+_0x5f0b7c[_0x21bb03(0x209)](String,_0x35b8dc)[_0x21bb03(0x19b)](0x2,'0')});continue;case'1':_0x19e506[_0x21bb03(0x1e5)][_0x21bb03(0x19d)][_0x21bb03(0x1b3)][_0x5f0b7c[_0x21bb03(0x244)]][0x1][_0x21bb03(0x247)]({'Ref':'Subnet'+_0x5f0b7c['AYvnz'](String,_0x35b8dc)[_0x21bb03(0x19b)](0x2,'0')});continue;case'2':_0x19e506['Resources'][_0x21bb03(0x1d2)]['Properties'][_0x21bb03(0x240)]['SubnetIds'][_0x21bb03(0x247)]({'Ref':_0x21bb03(0x25c)+_0x5f0b7c['QoCFI'](String,_0x35b8dc)[_0x21bb03(0x19b)](0x2,'0')});continue;case'3':_0x35b8dc+=0x1;continue;case'4':_0x19e506[_0x21bb03(0x1c3)][_0x5f0b7c[_0x21bb03(0x214)]][_0x21bb03(0x213)][0x0][_0x21bb03(0x23a)][_0x21bb03(0x247)](_0x21bb03(0x25c)+_0x5f0b7c[_0x21bb03(0x1ff)](String,_0x35b8dc)['padStart'](0x2,'0'));continue;case'5':_0x19e506['Resources'][_0x21bb03(0x24b)][_0x21bb03(0x1c0)][_0x21bb03(0x220)][_0x21bb03(0x247)]({'Ref':_0x21bb03(0x25c)+_0x5f0b7c[_0x21bb03(0x1ac)](String,_0x35b8dc)[_0x21bb03(0x19b)](0x2,'0')});continue;}break;}}else _0x45b603[_0x1d329b][_0x3d57d4]=_0x1c4233[_0x2933ee];});}else _0x5f0b7c['IZDDk'](_0x3e94da,_0x521088,_0x3cfc99);}else{if(_0x5f0b7c['mRRqS'](_0x5f0b7c[_0x3eba33(0x235)],_0x5f0b7c[_0x3eba33(0x1b4)])){const _0x1a5f5d=await fs[_0x3eba33(0x1da)](path[_0x3eba33(0x249)](__dirname,'..',_0x5f0b7c[_0x3eba33(0x1ed)],_0x5f0b7c[_0x3eba33(0x24a)]),_0x5f0b7c[_0x3eba33(0x256)]),_0xbf1794={};_0xbf1794[_0x3eba33(0x21f)]=CLOUDFORMATION_SCHEMA;const _0xc988ea=yaml[_0x3eba33(0x1d7)](_0x1a5f5d,_0xbf1794);_0x5f0b7c[_0x3eba33(0x25b)](mergeTemplates,_0x19e506,_0xc988ea),_0x19e506[_0x3eba33(0x1e1)]['EKSCluster'][_0x3eba33(0x1a8)][_0x3eba33(0x247)](_0x5f0b7c['dDOCl'],_0x5f0b7c[_0x3eba33(0x1ab)],_0x5f0b7c[_0x3eba33(0x20a)]);const _0x507018={};_0x507018[_0x3eba33(0x24d)]=_0x5f0b7c[_0x3eba33(0x20f)];const _0x551975={};_0x551975[_0x3eba33(0x24d)]=_0x5f0b7c[_0x3eba33(0x1ab)];const _0x41041e={};_0x41041e[_0x3eba33(0x24d)]=_0x5f0b7c['uvNoU'],_0x19e506[_0x3eba33(0x1e1)]['EKSCluster'][_0x3eba33(0x1c0)][_0x3eba33(0x240)][_0x3eba33(0x19d)]=[_0x507018,_0x551975,_0x41041e],_0x19e506[_0x3eba33(0x1c3)][_0x5f0b7c[_0x3eba33(0x214)]]['ParameterGroups'][0x0]['Parameters']['push'](_0x5f0b7c[_0x3eba33(0x22a)],_0x5f0b7c[_0x3eba33(0x234)],_0x5f0b7c[_0x3eba33(0x1fa)]);const _0xb9eba6={};_0xb9eba6[_0x3eba33(0x24d)]=_0x5f0b7c['dDOCl'];const _0x23187a={};_0x23187a[_0x3eba33(0x24d)]=_0x5f0b7c[_0x3eba33(0x1ab)];const _0x5a8104={};_0x5a8104[_0x3eba33(0x24d)]=_0x5f0b7c[_0x3eba33(0x20a)],_0x19e506[_0x3eba33(0x1e1)][_0x3eba33(0x24f)][_0x3eba33(0x1c0)]['Subnets']=[_0xb9eba6,_0x23187a,_0x5a8104];const _0x2844b6={};_0x2844b6['Ref']=_0x5f0b7c['dDOCl'];const _0x1a5bc4={};_0x1a5bc4['Ref']=_0x5f0b7c[_0x3eba33(0x1ab)];const _0x4ad535={};_0x4ad535[_0x3eba33(0x24d)]=_0x5f0b7c[_0x3eba33(0x20a)],_0x19e506[_0x3eba33(0x1e1)]['NodeGroupWindows'][_0x3eba33(0x1c0)][_0x3eba33(0x220)]=[_0x2844b6,_0x1a5bc4,_0x4ad535],_0x19e506['Outputs'][_0x3eba33(0x19d)][_0x3eba33(0x1b3)][_0x5f0b7c[_0x3eba33(0x244)]][0x1]=[{'Ref':_0x5f0b7c[_0x3eba33(0x20f)]},{'Ref':_0x5f0b7c[_0x3eba33(0x1ab)]},{'Ref':_0x5f0b7c[_0x3eba33(0x20a)]}];}else _0x3cad51['Resources'][_0x5c6385]['Properties']&&_0x55c855[_0x3eba33(0x1e1)][_0x15ae0d][_0x3eba33(0x1c0)][_0x3eba33(0x21c)]&&_0x783596[_0x3eba33(0x1e1)][_0x35af3b]['Properties']['Tags'][_0x3eba33(0x247)](..._0x414cac);}},addTags=async(_0x54d6b4,_0x80c06b,_0x4f5dc0)=>{const _0x555639=a27_0x4301ea,_0x3ba63d={'bIWnC':function(_0x558435,_0x5ae7b8){return _0x558435(_0x5ae7b8);},'gqBiA':function(_0x12edfe,_0x2166c5){return _0x12edfe!==_0x2166c5;},'lfySy':_0x555639(0x225),'KtlQY':function(_0xf78124,_0x17f1e5){return _0xf78124===_0x17f1e5;},'TeVwW':_0x555639(0x216),'wxEpo':'fjLyx','UkIKd':function(_0x2f6454,_0x13a27a){return _0x2f6454===_0x13a27a;},'lYSLf':'uhWKy','ZnBIc':_0x555639(0x24f),'aySrx':'NodeGroupWindows'};for(const _0x904c85 in _0x54d6b4[_0x555639(0x1e1)]){if(_0x3ba63d[_0x555639(0x1f5)](_0x3ba63d[_0x555639(0x1af)],_0x3ba63d[_0x555639(0x1ba)])){var _0x191f6b=_0xc0b82[_0x5b8997];_0x4f70eb[_0x555639(0x24c)](_0x191f6b)[_0x555639(0x23d)](_0x25782c=>{_0x558fc7[_0x2c5d31][_0x25782c]=_0x191f6b[_0x25782c];});}else{if(_0x54d6b4[_0x555639(0x1e1)][_0x904c85][_0x555639(0x1c0)]&&_0x54d6b4[_0x555639(0x1e1)][_0x904c85][_0x555639(0x1c0)]['Tags']){if(_0x3ba63d['UkIKd'](_0x3ba63d[_0x555639(0x259)],_0x3ba63d[_0x555639(0x259)]))_0x54d6b4[_0x555639(0x1e1)][_0x904c85][_0x555639(0x1c0)]['Tags'][_0x555639(0x247)](..._0x4f5dc0);else{const _0x599ba3={'tZrcs':function(_0x4ebe4b,_0x5340e2){const _0x4e1cbc=_0x555639;return _0x3ba63d[_0x4e1cbc(0x1a7)](_0x4ebe4b,_0x5340e2);}};let _0x313fcb=0x1;_0x4dda0e[_0x555639(0x23d)](_0x3c71b8=>{const _0x4d09bd=_0x555639;_0x33568d[_0x4d09bd(0x23a)][_0x4d09bd(0x247)]({'ParameterKey':_0x4d09bd(0x25c)+_0x599ba3[_0x4d09bd(0x227)](_0x5e1cda,_0x313fcb)[_0x4d09bd(0x19b)](0x2,'0'),'ParameterValue':_0x3c71b8[_0x4d09bd(0x232)]}),_0x313fcb+=0x1;});}}}}const _0x3a1837={};_0x4f5dc0['forEach'](_0x4f4495=>{const _0x4515f0=_0x555639;_0x3ba63d[_0x4515f0(0x245)](_0x3ba63d['lfySy'],_0x3ba63d[_0x4515f0(0x1de)])?_0x52064a[_0x4515f0(0x1e1)][_0x88fda][_0x4515f0(0x1c0)][_0x4515f0(0x21c)]['push'](..._0x53b726):_0x3a1837[_0x4f4495[_0x4515f0(0x1eb)]]=_0x4f4495[_0x4515f0(0x1b3)];}),_0x54d6b4['Resources'][_0x3ba63d[_0x555639(0x1c2)]]['Properties']['Tags']=_0x3a1837,_0x54d6b4[_0x555639(0x1e1)][_0x3ba63d[_0x555639(0x1ad)]][_0x555639(0x1c0)][_0x555639(0x21c)]=_0x3a1837;};function a27_0x24e9(_0x19e52f,_0x1e61a8){const _0x1a7eb0=a27_0x1a7e();return a27_0x24e9=function(_0x24e938,_0x4a9808){_0x24e938=_0x24e938-0x19a;let _0x4feda6=_0x1a7eb0[_0x24e938];return _0x4feda6;},a27_0x24e9(_0x19e52f,_0x1e61a8);}exports[a27_0x4301ea(0x1dc)]=async(_0x16ce09,_0x5ebf07,_0xc3bcf5,_0x173f31=null,_0x1ce62a=null,_0x3c1aeb)=>{const _0xd2e714=a27_0x4301ea,_0x1399ca={'nZcbR':function(_0x2eb9da,_0x4f6964){return _0x2eb9da(_0x4f6964);},'SCzBp':_0xd2e714(0x1a3),'nllrY':'browserstack:creationDate','vSKGA':'2010-05-15','QXHtI':'CFTemplates','QZjBJ':_0xd2e714(0x1ea),'cDLiV':'utf-8','kqkhL':function(_0x4c0855,_0x3b4565,_0x15aa05){return _0x4c0855(_0x3b4565,_0x15aa05);},'afQYl':function(_0x3c32cf,_0x44a089){return _0x3c32cf(_0x44a089);},'koTPL':function(_0x47b245,_0x5364d9,_0x3ae3c9,_0x3d4f4d){return _0x47b245(_0x5364d9,_0x3ae3c9,_0x3d4f4d);},'lYuGk':'DELETE','NRSOi':_0xd2e714(0x1b6),'KrIZz':_0xd2e714(0x1e2),'PsiGg':_0xd2e714(0x237),'VWvWA':_0xd2e714(0x1c4),'yqrbK':'NodeAutoScalingGroupDesiredSizeWindows','TpbID':_0xd2e714(0x25a),'HvHUb':_0xd2e714(0x1e8),'sdDZP':_0xd2e714(0x22c),'RUnKW':_0xd2e714(0x236),'gfRpM':_0xd2e714(0x1d9),'RGyBC':'ClusterAutoUpgrade','FnAYS':_0xd2e714(0x19f),'lrJni':_0xd2e714(0x221),'tLDws':_0xd2e714(0x1e7),'MStCV':function(_0x1c184d,_0x1a6220){return _0x1c184d!=_0x1a6220;},'oDHyw':function(_0x13c899,_0x9b71b){return _0x13c899!==_0x9b71b;},'SoGvv':function(_0x242b95,_0x38c0e0){return _0x242b95===_0x38c0e0;},'gNHNd':'FwKhB','JfeSw':_0xd2e714(0x21d),'uMyQA':function(_0x1bfbfd,_0x3cc504){return _0x1bfbfd!=_0x3cc504;},'fiBfv':function(_0x1de203,_0x195223){return _0x1de203!==_0x195223;},'aUBPc':_0xd2e714(0x1bd),'IcSjr':_0xd2e714(0x1d1)},_0x2f73f2=COMMON_HST_TAGS,_0x7bf621={};_0x7bf621[_0xd2e714(0x1eb)]=_0x1399ca[_0xd2e714(0x229)],_0x7bf621[_0xd2e714(0x1b3)]=_0x16ce09,_0x2f73f2[_0xd2e714(0x247)](_0x7bf621),_0x2f73f2[_0xd2e714(0x247)]({'Key':_0x1399ca[_0xd2e714(0x1f0)],'Value':new Date()[_0xd2e714(0x20d)]()[_0xd2e714(0x210)]()});const _0x459da4={};_0x459da4[_0xd2e714(0x1bc)]=_0x1399ca[_0xd2e714(0x20b)];const _0x5c17d4=new AWS[(_0xd2e714(0x1a1))](_0x459da4),_0x3dbccd=await fs[_0xd2e714(0x1da)](path['join'](__dirname,'..',_0x1399ca['QXHtI'],_0x1399ca[_0xd2e714(0x1dd)]),_0x1399ca['cDLiV']),_0x3c7679={};_0x3c7679[_0xd2e714(0x21f)]=CLOUDFORMATION_SCHEMA;const _0x357840=yaml[_0xd2e714(0x1d7)](_0x3dbccd,_0x3c7679);await _0x1399ca[_0xd2e714(0x1df)](addVPCData,_0x357840,_0x173f31),await _0x1399ca[_0xd2e714(0x255)](addS3Data,_0x357840),await _0x1399ca[_0xd2e714(0x1df)](addSubnetData,_0x357840,_0x1ce62a),await _0x1399ca['koTPL'](addTags,_0x357840,_0x16ce09,_0x2f73f2);const _0x3a3ca9=JSON[_0xd2e714(0x250)](_0x357840),_0x1dde0f={};_0x1dde0f['StackName']=CLUSTER_DEP_STACK_NAME+'-'+_0x16ce09,_0x1dde0f[_0xd2e714(0x1b7)]=_0x1399ca[_0xd2e714(0x211)],_0x1dde0f[_0xd2e714(0x1c8)]=_0x3a3ca9,_0x1dde0f[_0xd2e714(0x23a)]=[{'ParameterKey':_0x1399ca[_0xd2e714(0x1f2)],'ParameterValue':_0x16ce09},{'ParameterKey':_0x1399ca['KrIZz'],'ParameterValue':_0x16ce09+_0xd2e714(0x1d0)},{'ParameterKey':_0x1399ca[_0xd2e714(0x1fd)],'ParameterValue':''+_0x5ebf07},{'ParameterKey':_0x1399ca[_0xd2e714(0x1d6)],'ParameterValue':'0'},{'ParameterKey':_0x1399ca['yqrbK'],'ParameterValue':'1'},{'ParameterKey':_0x1399ca[_0xd2e714(0x201)],'ParameterValue':''+_0xc3bcf5},{'ParameterKey':_0x1399ca[_0xd2e714(0x1db)],'ParameterValue':global_registry[_0xd2e714(0x1a5)]},{'ParameterKey':_0x1399ca[_0xd2e714(0x21a)],'ParameterValue':global_registry['instanceType']},{'ParameterKey':_0x1399ca['RUnKW'],'ParameterValue':global_registry[_0xd2e714(0x1c6)]},{'ParameterKey':_0x1399ca[_0xd2e714(0x238)],'ParameterValue':_0x16ce09+_0xd2e714(0x19a)},{'ParameterKey':_0x1399ca[_0xd2e714(0x1b2)],'ParameterValue':_0x3c1aeb?_0x1399ca['FnAYS']:_0x1399ca[_0xd2e714(0x1c5)]}],_0x1dde0f[_0xd2e714(0x1b0)]=[_0x1399ca['tLDws']],_0x1dde0f[_0xd2e714(0x21c)]=_0x2f73f2;const _0x4c2f02=_0x1dde0f;if(_0x1399ca[_0xd2e714(0x215)](_0x173f31,null)&&_0x1399ca[_0xd2e714(0x1e0)](_0x173f31,undefined)){if(_0x1399ca[_0xd2e714(0x226)](_0x1399ca[_0xd2e714(0x22e)],_0x1399ca[_0xd2e714(0x22e)])){const _0x26352e={};_0x26352e[_0xd2e714(0x1d8)]=_0x1399ca[_0xd2e714(0x1f9)],_0x26352e[_0xd2e714(0x1aa)]=_0x173f31,_0x4c2f02[_0xd2e714(0x23a)][_0xd2e714(0x247)](_0x26352e);}else _0x148123[_0x3e4ada['Key']]=_0x2dc68f[_0xd2e714(0x1b3)];}if(_0x1399ca['uMyQA'](_0x1ce62a,null)&&_0x1399ca[_0xd2e714(0x218)](_0x1ce62a,undefined)){let _0x90ce3c=0x1;_0x1ce62a[_0xd2e714(0x23d)](_0x56c60b=>{const _0x1bbc15=_0xd2e714;_0x4c2f02[_0x1bbc15(0x23a)][_0x1bbc15(0x247)]({'ParameterKey':'Subnet'+_0x1399ca['nZcbR'](String,_0x90ce3c)[_0x1bbc15(0x19b)](0x2,'0'),'ParameterValue':_0x56c60b[_0x1bbc15(0x232)]}),_0x90ce3c+=0x1;});}const _0xb3e79f=await _0x5c17d4['createStack'](_0x4c2f02)[_0xd2e714(0x1fe)]();logger[_0xd2e714(0x23b)](_0x1399ca[_0xd2e714(0x1b9)]);const _0x7d07f3={};return _0x7d07f3[_0xd2e714(0x24e)]=_0xb3e79f[_0xd2e714(0x246)],_0x5c17d4['waitFor'](_0x1399ca[_0xd2e714(0x1a9)],_0x7d07f3)[_0xd2e714(0x1fe)]();};