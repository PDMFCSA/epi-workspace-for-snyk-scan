const a27_0x19f47e=a27_0x29a8;function a27_0x29a8(_0x47eb87,_0x56667a){const _0xc4ba54=a27_0xc4ba();return a27_0x29a8=function(_0x29a8db,_0x56572d){_0x29a8db=_0x29a8db-0xf3;let _0x4745d2=_0xc4ba54[_0x29a8db];return _0x4745d2;},a27_0x29a8(_0x47eb87,_0x56667a);}(function(_0x5dd0e7,_0x5e29a8){const _0x2d4cb1=a27_0x29a8,_0xdc6198=_0x5dd0e7();while(!![]){try{const _0x5f3558=-parseInt(_0x2d4cb1(0x12f))/0x1*(parseInt(_0x2d4cb1(0x174))/0x2)+parseInt(_0x2d4cb1(0x16d))/0x3*(parseInt(_0x2d4cb1(0x165))/0x4)+parseInt(_0x2d4cb1(0xff))/0x5+-parseInt(_0x2d4cb1(0x172))/0x6+parseInt(_0x2d4cb1(0x10f))/0x7+-parseInt(_0x2d4cb1(0x192))/0x8*(-parseInt(_0x2d4cb1(0x169))/0x9)+parseInt(_0x2d4cb1(0x164))/0xa*(-parseInt(_0x2d4cb1(0x117))/0xb);if(_0x5f3558===_0x5e29a8)break;else _0xdc6198['push'](_0xdc6198['shift']());}catch(_0x92ed14){_0xdc6198['push'](_0xdc6198['shift']());}}}(a27_0xc4ba,0xb9876));const fs=require('fs'),path=require('path'),Promise=require(a27_0x19f47e(0x17b)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a27_0x19f47e(0x134)),AWS=require(a27_0x19f47e(0x130))[a27_0x19f47e(0x106)],{CLUSTER_DEP_STACK_NAME,COMMON_HST_TAGS,global_registry}=require(a27_0x19f47e(0x100)),{logger}=require(a27_0x19f47e(0x19b)),{isBucketPresent}=require('./AWSUtils');Promise[a27_0x19f47e(0x194)](fs);function a27_0xc4ba(){const _0x5394a6=['promisifyAll','prcZr','keys','QAWSq','vrERP','rjSnn','Subnet03','../config/logger','JTnbF','uerpD','LmwiF','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','yvQEy','VkBnh','Parameters','aKCDI','zrxyG','ResourcesVpcConfig','CloudFormation','utf-8','lDMIo','Resources','VXjqc','aws-eks-cluster-dep.yaml','RxKVK','ami','IbUmb','FaSMF','chBDp','gArzF','pkPfQ','CouSR','FFznU','OinlT','ionlZ','GHwkh','LUsnS','EutwP','value','TFduz','2320795SydquN','../config/constants','valueOf','EKSCluster','Properties','NodeGroupNameWindows','VOdiT','awsObj','NodeAutoScalingGroupMaxSize','stringify','uQCcS','Subnet02Block','frxSZ','qDCur','NICfZ','IsFBk','7270263NODGBI','Fn::Join','browserstack:cluster','CUuJM','rOpbU','Capabilities','vpc-create.yaml','QarKB','384747hfSsEB','PlkPO','pfduI','S3BucketName','aAjTk','aScTG','promise','GagKC','UUfcJ','SWHXZ','NodeInstanceType','VPC','NodeGroupWindows','Subnet01','Value','CAPABILITY_NAMED_IAM','ClusterName','Subnet03Block','stackCreateComplete','SubnetIds','OBuEA','NodeGroupName','Ekebf','jfPOT','86601HAqqUu','./AWSUtils','adQpK','DvxTt','IJElX','js-yaml-cloudformation-schema','fsQNv','symbe','padStart','BLbcC','eukJE','GlgTz','YWYLr','AWS::CloudFormation::Interface','jaDxy','Outputs','ZfIMQ','waitFor','-NodeGroup','OqDGG','schema','AKZyr','CWTPT','NodeAutoScalingGroupMinSizeWindows','DrHJr','fYCtD','ParameterKey','load','s3-create.yaml','JQwXy','NodeAutoScalingGroupMinSize','XPhBx','Subnet','EmFrQ','CYWGK','Subnets','kyDIa','Metadata','uNpne','NodeGroup','iLSZD','vJHFP','instanceType','gXlxA','Subnet01Block','join','zjcvJ','apiVersion','TemplateBody','ParameterGroups','pSDdE','Tags','OnFailure','270inGNRf','61172ExvvzH','s3Bucket','JTUmp','CFTemplates','12089943hGnBtg','aRKmx','forEach','Subnet02','108iiXDoE','veTjh','split','4|5|1|0|2|3','sLFAw','5477574iKGqgh','vpc-import.yaml','18eVAIKr','NygOe','oHAtj','true','WkHLu','PBAxr','StackName','bluebird','lRpPv','subnet-create.yaml','UEdJk','guIqH','Key','XAbAc','push','Ref','rjtQI','QkpYZ','zyYSZ','lGJHI','ParameterValue','jvFzu','TDDvu','IEoqX','JWPQu','ZNvlD','zrjKa','readFileAsync','fGCmf','GCrap','8Cztkoo','NQksh'];a27_0xc4ba=function(){return _0x5394a6;};return a27_0xc4ba();}const mergeTemplates=(_0x1e597b,_0x17a659)=>{const _0x54fe5d=a27_0x19f47e,_0x2d4cde={'ynjhQ':function(_0x17745b,_0x370160){return _0x17745b(_0x370160);},'chTIJ':function(_0x2c1da6,_0x503a18){return _0x2c1da6===_0x503a18;},'JTUmp':_0x54fe5d(0x10d),'CYWGK':function(_0x259f65,_0x4c9f2d){return _0x259f65!==_0x4c9f2d;},'aAjTk':_0x54fe5d(0x176),'OBuEA':_0x54fe5d(0x131)};Object[_0x54fe5d(0x196)](_0x17a659)[_0x54fe5d(0x16b)](_0x365a08=>{const _0x17b4bf=_0x54fe5d,_0x39242b={'YWYLr':function(_0x4210cd,_0x1400fb){return _0x2d4cde['chTIJ'](_0x4210cd,_0x1400fb);},'frxSZ':_0x2d4cde[_0x17b4bf(0x167)]};if(_0x2d4cde[_0x17b4bf(0x151)](_0x2d4cde[_0x17b4bf(0x11b)],_0x2d4cde[_0x17b4bf(0x12b)])){var _0x5dd7bf=_0x17a659[_0x365a08];Object[_0x17b4bf(0x196)](_0x5dd7bf)[_0x17b4bf(0x16b)](_0x266115=>{const _0x19a360=_0x17b4bf;_0x39242b[_0x19a360(0x13b)](_0x39242b[_0x19a360(0x10b)],_0x39242b[_0x19a360(0x10b)])?_0x1e597b[_0x365a08][_0x266115]=_0x5dd7bf[_0x266115]:_0x4721ec[_0x1b509e][_0x2a4890]=_0xdd40f[_0x27e2c6];});}else _0x507d19[_0x17b4bf(0x1a2)][_0x17b4bf(0x182)]({'ParameterKey':_0x17b4bf(0x14f)+_0x2d4cde['ynjhQ'](_0xf93245,_0x252a83)[_0x17b4bf(0x137)](0x2,'0'),'ParameterValue':_0x43ced8[_0x17b4bf(0xfd)]}),_0x34dada+=0x1;});},addVPCData=async(_0xd46ee7,_0x99f115)=>{const _0x46c640=a27_0x19f47e,_0x390f5e={'wxcPC':function(_0x50e704,_0xc79247){return _0x50e704===_0xc79247;},'PHFNL':'PYtbw','QAWSq':_0x46c640(0x168),'rjtQI':_0x46c640(0x173),'NQksh':_0x46c640(0x1a7),'FFznU':function(_0x2d6136,_0x4c5f42,_0x186477){return _0x2d6136(_0x4c5f42,_0x186477);},'VkBnh':_0x46c640(0x13c),'jfPOT':'VPC','OzIqg':function(_0xf9d857,_0x298a67){return _0xf9d857!==_0x298a67;},'fGCmf':'taMBK','GlgTz':_0x46c640(0x115),'NygOe':'VpcBlock'};if(_0x99f115){if(_0x390f5e['wxcPC'](_0x390f5e['PHFNL'],_0x390f5e['PHFNL'])){const _0x53d1ec=await fs[_0x46c640(0x18f)](path['join'](__dirname,'..',_0x390f5e['QAWSq'],_0x390f5e[_0x46c640(0x184)]),_0x390f5e[_0x46c640(0x193)]),_0x30e257={};_0x30e257[_0x46c640(0x143)]=CLOUDFORMATION_SCHEMA;const _0x4d9641=yaml[_0x46c640(0x14a)](_0x53d1ec,_0x30e257);_0x390f5e[_0x46c640(0xf7)](mergeTemplates,_0xd46ee7,_0x4d9641),_0xd46ee7[_0x46c640(0x154)][_0x390f5e[_0x46c640(0x1a1)]][_0x46c640(0x160)][0x0][_0x46c640(0x1a2)][_0x46c640(0x182)](_0x390f5e[_0x46c640(0x12e)]);}else _0x5a4b4f[_0x24cd47[_0x46c640(0x180)]]=_0x3228c9['Value'];}else{if(_0x390f5e['OzIqg'](_0x390f5e['fGCmf'],_0x390f5e[_0x46c640(0x190)]))_0xdd23cd[_0x46c640(0x1a9)][_0x5c4de5][_0x46c640(0x103)][_0x46c640(0x162)][_0x46c640(0x182)](..._0x57fa98);else{const _0x4e126d=await fs[_0x46c640(0x18f)](path[_0x46c640(0x15c)](__dirname,'..',_0x390f5e[_0x46c640(0x197)],_0x390f5e[_0x46c640(0x13a)]),_0x390f5e[_0x46c640(0x193)]),_0xf63310={};_0xf63310[_0x46c640(0x143)]=CLOUDFORMATION_SCHEMA;const _0x48b221=yaml[_0x46c640(0x14a)](_0x4e126d,_0xf63310);_0x390f5e[_0x46c640(0xf7)](mergeTemplates,_0xd46ee7,_0x48b221),_0xd46ee7['Metadata'][_0x390f5e['VkBnh']][_0x46c640(0x160)][0x0][_0x46c640(0x1a2)][_0x46c640(0x182)](_0x390f5e[_0x46c640(0x175)]);}}},addS3Data=async _0x51e58a=>{const _0x673116=a27_0x19f47e,_0x2329b1={'zyYSZ':_0x673116(0x122),'JQwXy':_0x673116(0x168),'PlkPO':_0x673116(0x14b),'ddwKm':_0x673116(0x1a7),'vOxbQ':function(_0x5a17db,_0x25aad6){return _0x5a17db(_0x25aad6);},'fsQNv':function(_0x4352b5,_0x142f5e){return _0x4352b5===_0x142f5e;},'GCrap':function(_0x24018e,_0x3b0fe3){return _0x24018e!==_0x3b0fe3;},'iLSZD':_0x673116(0x16e),'guIqH':_0x673116(0x158),'fYCtD':function(_0x455c6a,_0x7a0340,_0x385fd9){return _0x455c6a(_0x7a0340,_0x385fd9);}},_0x41a2c3=await fs[_0x673116(0x18f)](path[_0x673116(0x15c)](__dirname,'..',_0x2329b1[_0x673116(0x14c)],_0x2329b1[_0x673116(0x118)]),_0x2329b1['ddwKm']),_0x5b02ed={};_0x5b02ed[_0x673116(0x143)]=CLOUDFORMATION_SCHEMA;const _0x40939d=yaml[_0x673116(0x14a)](_0x41a2c3,_0x5b02ed),_0x2d2db0=await _0x2329b1['vOxbQ'](isBucketPresent,global_registry[_0x673116(0x166)]);if(_0x2329b1[_0x673116(0x135)](_0x2d2db0,![])){if(_0x2329b1[_0x673116(0x191)](_0x2329b1[_0x673116(0x157)],_0x2329b1[_0x673116(0x17f)]))_0x2329b1[_0x673116(0x148)](mergeTemplates,_0x51e58a,_0x40939d);else{const _0x1b5f97={};_0x1b5f97['ParameterKey']=_0x2329b1[_0x673116(0x186)],_0x1b5f97[_0x673116(0x188)]=_0x5de492,_0x1843dc[_0x673116(0x1a2)]['push'](_0x1b5f97);}}},addSubnetData=async(_0x534fe3,_0x5c36d9)=>{const _0x5aa74a=a27_0x19f47e,_0x140d6c={'jvFzu':'NodeGroup','MvoiI':'NodeGroupWindows','QkpYZ':function(_0x3c91b9,_0x2ab588){return _0x3c91b9!==_0x2ab588;},'rOpbU':_0x5aa74a(0x199),'aKCDI':'kPeLX','FRZCM':_0x5aa74a(0x170),'IsFBk':function(_0x1fea17,_0x4d08bb){return _0x1fea17(_0x4d08bb);},'LmwiF':function(_0x20f23f,_0x509302){return _0x20f23f(_0x509302);},'CouSR':_0x5aa74a(0x110),'pfduI':function(_0x470bc5,_0x50ae82){return _0x470bc5(_0x50ae82);},'SWHXZ':'AWS::CloudFormation::Interface','TFduz':function(_0x30b357,_0x574aac){return _0x30b357===_0x574aac;},'DrHJr':_0x5aa74a(0x171),'Cirek':_0x5aa74a(0x195),'jaDxy':_0x5aa74a(0x168),'chBDp':'subnet-import.yaml','zrjKa':_0x5aa74a(0x1a7),'lGJHI':function(_0x3702e8,_0x5713c1,_0x27ecf0){return _0x3702e8(_0x5713c1,_0x27ecf0);},'XPhBx':function(_0x4d63b1,_0x1f394e){return _0x4d63b1===_0x1f394e;},'zrxyG':'QafsB','TRXYZ':_0x5aa74a(0x17d),'IbUmb':_0x5aa74a(0x124),'aScTG':_0x5aa74a(0x16c),'DvxTt':_0x5aa74a(0x19a),'WnBgp':_0x5aa74a(0x15b),'TDDvu':_0x5aa74a(0x10a),'GagKC':_0x5aa74a(0x128)};if(_0x5c36d9){if(_0x140d6c[_0x5aa74a(0xfe)](_0x140d6c[_0x5aa74a(0x147)],_0x140d6c['Cirek']))_0x5dc442[_0x5aa74a(0x1a9)][_0x341189][_0x5aa74a(0x103)]&&_0x488143[_0x5aa74a(0x1a9)][_0x258646][_0x5aa74a(0x103)][_0x5aa74a(0x162)]&&_0x2b5741[_0x5aa74a(0x1a9)][_0x5a99ba][_0x5aa74a(0x103)]['Tags'][_0x5aa74a(0x182)](..._0x548593);else{const _0x52f7bf=await fs['readFileAsync'](path['join'](__dirname,'..',_0x140d6c[_0x5aa74a(0x13d)],_0x140d6c[_0x5aa74a(0xf3)]),_0x140d6c[_0x5aa74a(0x18e)]),_0x52835d={};_0x52835d[_0x5aa74a(0x143)]=CLOUDFORMATION_SCHEMA;const _0x13ab6b=yaml['load'](_0x52f7bf,_0x52835d);_0x140d6c['lGJHI'](mergeTemplates,_0x534fe3,_0x13ab6b);let _0x19fa81=0x1;_0x5c36d9[_0x5aa74a(0x16b)](_0x209c4a=>{const _0x183692=_0x5aa74a;if(_0x140d6c[_0x183692(0x185)](_0x140d6c[_0x183692(0x113)],_0x140d6c[_0x183692(0x1a3)])){const _0x243270=_0x140d6c['FRZCM']['split']('|');let _0x52e448=0x0;while(!![]){switch(_0x243270[_0x52e448++]){case'0':_0x534fe3[_0x183692(0x1a9)]['NodeGroupWindows'][_0x183692(0x103)][_0x183692(0x152)]['push']({'Ref':_0x183692(0x14f)+_0x140d6c[_0x183692(0x10e)](String,_0x19fa81)[_0x183692(0x137)](0x2,'0')});continue;case'1':_0x534fe3[_0x183692(0x1a9)][_0x183692(0x156)][_0x183692(0x103)][_0x183692(0x152)][_0x183692(0x182)]({'Ref':_0x183692(0x14f)+_0x140d6c[_0x183692(0x19e)](String,_0x19fa81)[_0x183692(0x137)](0x2,'0')});continue;case'2':_0x534fe3[_0x183692(0x13e)][_0x183692(0x12a)][_0x183692(0x125)][_0x140d6c['CouSR']][0x1][_0x183692(0x182)]({'Ref':_0x183692(0x14f)+_0x140d6c[_0x183692(0x19e)](String,_0x19fa81)[_0x183692(0x137)](0x2,'0')});continue;case'3':_0x19fa81+=0x1;continue;case'4':_0x534fe3['Resources'][_0x183692(0x102)][_0x183692(0x103)][_0x183692(0x1a5)][_0x183692(0x12a)][_0x183692(0x182)]({'Ref':_0x183692(0x14f)+_0x140d6c[_0x183692(0x119)](String,_0x19fa81)['padStart'](0x2,'0')});continue;case'5':_0x534fe3['Metadata'][_0x140d6c[_0x183692(0x120)]][_0x183692(0x160)][0x0][_0x183692(0x1a2)][_0x183692(0x182)]('Subnet'+_0x140d6c[_0x183692(0x19e)](String,_0x19fa81)[_0x183692(0x137)](0x2,'0'));continue;}break;}}else{for(const _0x3a3e13 in _0xaa7272['Resources']){_0x3f1578[_0x183692(0x1a9)][_0x3a3e13]['Properties']&&_0x354ab1[_0x183692(0x1a9)][_0x3a3e13][_0x183692(0x103)][_0x183692(0x162)]&&_0x5d2a9c[_0x183692(0x1a9)][_0x3a3e13][_0x183692(0x103)][_0x183692(0x162)][_0x183692(0x182)](..._0x522aaf);}const _0x222f08={};_0x267462[_0x183692(0x16b)](_0x3079d1=>{const _0x8db155=_0x183692;_0x222f08[_0x3079d1[_0x8db155(0x180)]]=_0x3079d1[_0x8db155(0x125)];}),_0x5e34fc[_0x183692(0x1a9)][_0x140d6c[_0x183692(0x189)]][_0x183692(0x103)][_0x183692(0x162)]=_0x222f08,_0x5b7c8b[_0x183692(0x1a9)][_0x140d6c['MvoiI']]['Properties']['Tags']=_0x222f08;}});}}else{if(_0x140d6c[_0x5aa74a(0x14e)](_0x140d6c[_0x5aa74a(0x1a4)],_0x140d6c[_0x5aa74a(0x1a4)])){const _0x259070=await fs[_0x5aa74a(0x18f)](path[_0x5aa74a(0x15c)](__dirname,'..',_0x140d6c['jaDxy'],_0x140d6c['TRXYZ']),_0x140d6c[_0x5aa74a(0x18e)]),_0x526f59={};_0x526f59[_0x5aa74a(0x143)]=CLOUDFORMATION_SCHEMA;const _0x5f5d9a=yaml['load'](_0x259070,_0x526f59);_0x140d6c[_0x5aa74a(0x187)](mergeTemplates,_0x534fe3,_0x5f5d9a),_0x534fe3[_0x5aa74a(0x1a9)][_0x5aa74a(0x102)]['DependsOn'][_0x5aa74a(0x182)](_0x140d6c[_0x5aa74a(0x1ae)],_0x140d6c[_0x5aa74a(0x11c)],_0x140d6c[_0x5aa74a(0x132)]);const _0x2c8c0e={};_0x2c8c0e[_0x5aa74a(0x183)]=_0x140d6c[_0x5aa74a(0x1ae)];const _0x23d734={};_0x23d734['Ref']=_0x140d6c[_0x5aa74a(0x11c)];const _0x5994de={};_0x5994de[_0x5aa74a(0x183)]=_0x140d6c['DvxTt'],_0x534fe3[_0x5aa74a(0x1a9)][_0x5aa74a(0x102)][_0x5aa74a(0x103)][_0x5aa74a(0x1a5)][_0x5aa74a(0x12a)]=[_0x2c8c0e,_0x23d734,_0x5994de],_0x534fe3[_0x5aa74a(0x154)][_0x140d6c['SWHXZ']][_0x5aa74a(0x160)][0x0]['Parameters'][_0x5aa74a(0x182)](_0x140d6c['WnBgp'],_0x140d6c[_0x5aa74a(0x18a)],_0x140d6c[_0x5aa74a(0x11e)]);const _0xa18497={};_0xa18497[_0x5aa74a(0x183)]=_0x140d6c['IbUmb'];const _0x4c2613={};_0x4c2613[_0x5aa74a(0x183)]=_0x140d6c[_0x5aa74a(0x11c)];const _0x2bc8a1={};_0x2bc8a1[_0x5aa74a(0x183)]=_0x140d6c[_0x5aa74a(0x132)],_0x534fe3['Resources']['NodeGroup'][_0x5aa74a(0x103)]['Subnets']=[_0xa18497,_0x4c2613,_0x2bc8a1];const _0x346126={};_0x346126['Ref']=_0x140d6c[_0x5aa74a(0x1ae)];const _0x151bec={};_0x151bec[_0x5aa74a(0x183)]=_0x140d6c['aScTG'];const _0x13f357={};_0x13f357[_0x5aa74a(0x183)]=_0x140d6c[_0x5aa74a(0x132)],_0x534fe3['Resources'][_0x5aa74a(0x123)]['Properties'][_0x5aa74a(0x152)]=[_0x346126,_0x151bec,_0x13f357],_0x534fe3[_0x5aa74a(0x13e)]['SubnetIds']['Value'][_0x140d6c[_0x5aa74a(0xf6)]][0x1]=[{'Ref':_0x140d6c[_0x5aa74a(0x1ae)]},{'Ref':_0x140d6c['aScTG']},{'Ref':_0x140d6c['DvxTt']}];}else{var _0x5c0eb2=_0x24e47b[_0x3da28d];_0x103718[_0x5aa74a(0x196)](_0x5c0eb2)['forEach'](_0x5db19d=>{_0x5b90a7[_0x39a332][_0x5db19d]=_0x5c0eb2[_0x5db19d];});}}},addTags=async(_0x29f83a,_0x2d8824,_0x47f516)=>{const _0x4b62f7=a27_0x19f47e,_0x5befc8={'kyDIa':function(_0x5baad2,_0x43a1b9,_0x229234){return _0x5baad2(_0x43a1b9,_0x229234);},'qPBte':function(_0x5883a5,_0x426e82){return _0x5883a5(_0x426e82);},'PBAxr':function(_0x250ce3,_0x278dac){return _0x250ce3!==_0x278dac;},'VOdiT':_0x4b62f7(0x109),'WkHLu':'hWGMn','vrERP':_0x4b62f7(0x17c),'IwkHt':function(_0x3e5d54,_0x58ed96){return _0x3e5d54===_0x58ed96;},'lDMIo':_0x4b62f7(0xfc),'UUfcJ':_0x4b62f7(0x136),'uerpD':'NodeGroup','Ekebf':_0x4b62f7(0x123)};for(const _0x2d285b in _0x29f83a[_0x4b62f7(0x1a9)]){_0x5befc8[_0x4b62f7(0x179)](_0x5befc8[_0x4b62f7(0x198)],_0x5befc8[_0x4b62f7(0x198)])?_0x5befc8[_0x4b62f7(0x153)](_0x484d1c,_0x3c8749,_0x19d747):_0x29f83a[_0x4b62f7(0x1a9)][_0x2d285b][_0x4b62f7(0x103)]&&_0x29f83a[_0x4b62f7(0x1a9)][_0x2d285b][_0x4b62f7(0x103)][_0x4b62f7(0x162)]&&(_0x5befc8['IwkHt'](_0x5befc8[_0x4b62f7(0x1a8)],_0x5befc8[_0x4b62f7(0x11f)])?_0x46db49[_0x4b62f7(0x196)](_0x5ddbc0)['forEach'](_0x304e24=>{var _0x20455e=_0x14cde6[_0x304e24];_0x484d9f['keys'](_0x20455e)['forEach'](_0x59bdbe=>{_0x1bd97f[_0x304e24][_0x59bdbe]=_0x20455e[_0x59bdbe];});}):_0x29f83a[_0x4b62f7(0x1a9)][_0x2d285b][_0x4b62f7(0x103)][_0x4b62f7(0x162)]['push'](..._0x47f516));}const _0x2111e9={};_0x47f516[_0x4b62f7(0x16b)](_0x2caa6a=>{const _0x22e47d=_0x4b62f7;if(_0x5befc8[_0x22e47d(0x179)](_0x5befc8[_0x22e47d(0x105)],_0x5befc8[_0x22e47d(0x178)]))_0x2111e9[_0x2caa6a[_0x22e47d(0x180)]]=_0x2caa6a[_0x22e47d(0x125)];else{const _0x5970e3={'MPaBD':function(_0x55bf8f,_0x5f1478){return _0x5befc8['qPBte'](_0x55bf8f,_0x5f1478);}};let _0x3afb08=0x1;_0x20f2fb['forEach'](_0x2d4c1e=>{const _0x48800f=_0x22e47d;_0x28e4fd[_0x48800f(0x1a2)][_0x48800f(0x182)]({'ParameterKey':_0x48800f(0x14f)+_0x5970e3['MPaBD'](_0xc60da3,_0x3afb08)[_0x48800f(0x137)](0x2,'0'),'ParameterValue':_0x2d4c1e[_0x48800f(0xfd)]}),_0x3afb08+=0x1;});}}),_0x29f83a[_0x4b62f7(0x1a9)][_0x5befc8[_0x4b62f7(0x19d)]][_0x4b62f7(0x103)]['Tags']=_0x2111e9,_0x29f83a['Resources'][_0x5befc8[_0x4b62f7(0x12d)]][_0x4b62f7(0x103)][_0x4b62f7(0x162)]=_0x2111e9;};exports['createClusterStack']=async(_0x1c8b08,_0x32fa5e,_0x4a6ca1,_0xa6f225=null,_0x305fc6=null,_0x517547)=>{const _0x10c351=a27_0x19f47e,_0x1b76f1={'gArzF':'1|2|4|3|5|0','FaSMF':function(_0x56d091,_0x594b22){return _0x56d091(_0x594b22);},'KhnvO':'AWS::CloudFormation::Interface','pSDdE':function(_0x33f6fe,_0x386db9){return _0x33f6fe(_0x386db9);},'ZNvlD':function(_0x52b54a,_0x165114){return _0x52b54a(_0x165114);},'XAbAc':_0x10c351(0x110),'uNpne':function(_0x158f41,_0x343e10){return _0x158f41(_0x343e10);},'aRKmx':_0x10c351(0x111),'ZfIMQ':'browserstack:creationDate','JWPQu':'2010-05-15','gXlxA':'CFTemplates','pkPfQ':_0x10c351(0x1ab),'IpoKt':'utf-8','qDCur':function(_0x3a18c2,_0x54670a,_0x2aecdb){return _0x3a18c2(_0x54670a,_0x2aecdb);},'yvQEy':function(_0x21c135,_0x4505dc){return _0x21c135(_0x4505dc);},'dfrhS':function(_0x1632ab,_0x297812,_0x6a2f23,_0x554071){return _0x1632ab(_0x297812,_0x6a2f23,_0x554071);},'GHwkh':'DELETE','BLbcC':_0x10c351(0x127),'OinlT':_0x10c351(0x12c),'OqDGG':_0x10c351(0x14d),'CWTPT':_0x10c351(0x146),'eukJE':'NodeAutoScalingGroupDesiredSizeWindows','JTnbF':_0x10c351(0x107),'VjybE':'NodeImageId','zjcvJ':_0x10c351(0x121),'UEdJk':_0x10c351(0x11a),'IJElX':_0x10c351(0x104),'VXjqc':'ClusterAutoUpgrade','QarKB':_0x10c351(0x177),'LUsnS':'false','IEoqX':_0x10c351(0x126),'temJF':function(_0xd12e1e,_0x48d24d){return _0xd12e1e!=_0x48d24d;},'yrdEa':function(_0x49e261,_0x2cd083){return _0x49e261!==_0x2cd083;},'AKZyr':function(_0x5783e5,_0x404ae9){return _0x5783e5===_0x404ae9;},'Tcepy':'QIguQ','EmFrQ':'QxGEV','ionlZ':_0x10c351(0x122),'CUuJM':function(_0x229606,_0x6e95fc){return _0x229606!==_0x6e95fc;},'RUEyu':_0x10c351(0x19f),'RxKVK':_0x10c351(0x129)},_0x3cd9fc=COMMON_HST_TAGS,_0x278451={};_0x278451[_0x10c351(0x180)]=_0x1b76f1[_0x10c351(0x16a)],_0x278451[_0x10c351(0x125)]=_0x1c8b08,_0x3cd9fc[_0x10c351(0x182)](_0x278451),_0x3cd9fc[_0x10c351(0x182)]({'Key':_0x1b76f1[_0x10c351(0x13f)],'Value':new Date()[_0x10c351(0x101)]()['toString']()});const _0x5db5d6={};_0x5db5d6[_0x10c351(0x15e)]=_0x1b76f1[_0x10c351(0x18c)];const _0x3a7e1b=new AWS[(_0x10c351(0x1a6))](_0x5db5d6),_0x2ed749=await fs[_0x10c351(0x18f)](path[_0x10c351(0x15c)](__dirname,'..',_0x1b76f1[_0x10c351(0x15a)],_0x1b76f1[_0x10c351(0xf5)]),_0x1b76f1['IpoKt']),_0x714437={};_0x714437[_0x10c351(0x143)]=CLOUDFORMATION_SCHEMA;const _0x59b370=yaml[_0x10c351(0x14a)](_0x2ed749,_0x714437);await _0x1b76f1[_0x10c351(0x10c)](addVPCData,_0x59b370,_0xa6f225),await _0x1b76f1[_0x10c351(0x1a0)](addS3Data,_0x59b370),await _0x1b76f1['qDCur'](addSubnetData,_0x59b370,_0x305fc6),await _0x1b76f1['dfrhS'](addTags,_0x59b370,_0x1c8b08,_0x3cd9fc);const _0x43f1b6=JSON[_0x10c351(0x108)](_0x59b370),_0x500826={};_0x500826['StackName']=CLUSTER_DEP_STACK_NAME+'-'+_0x1c8b08,_0x500826[_0x10c351(0x163)]=_0x1b76f1[_0x10c351(0xfa)],_0x500826[_0x10c351(0x15f)]=_0x43f1b6,_0x500826[_0x10c351(0x1a2)]=[{'ParameterKey':_0x1b76f1[_0x10c351(0x138)],'ParameterValue':_0x1c8b08},{'ParameterKey':_0x1b76f1[_0x10c351(0xf8)],'ParameterValue':_0x1c8b08+_0x10c351(0x141)},{'ParameterKey':_0x1b76f1[_0x10c351(0x142)],'ParameterValue':''+_0x32fa5e},{'ParameterKey':_0x1b76f1[_0x10c351(0x145)],'ParameterValue':'0'},{'ParameterKey':_0x1b76f1[_0x10c351(0x139)],'ParameterValue':'1'},{'ParameterKey':_0x1b76f1[_0x10c351(0x19c)],'ParameterValue':''+_0x4a6ca1},{'ParameterKey':_0x1b76f1['VjybE'],'ParameterValue':global_registry[_0x10c351(0x1ad)]},{'ParameterKey':_0x1b76f1[_0x10c351(0x15d)],'ParameterValue':global_registry[_0x10c351(0x159)]},{'ParameterKey':_0x1b76f1[_0x10c351(0x17e)],'ParameterValue':global_registry[_0x10c351(0x166)]},{'ParameterKey':_0x1b76f1[_0x10c351(0x133)],'ParameterValue':_0x1c8b08+'-Windows-NodeGroup'},{'ParameterKey':_0x1b76f1[_0x10c351(0x1aa)],'ParameterValue':_0x517547?_0x1b76f1[_0x10c351(0x116)]:_0x1b76f1[_0x10c351(0xfb)]}],_0x500826[_0x10c351(0x114)]=[_0x1b76f1[_0x10c351(0x18b)]],_0x500826[_0x10c351(0x162)]=_0x3cd9fc;const _0x165486=_0x500826;if(_0x1b76f1['temJF'](_0xa6f225,null)&&_0x1b76f1['yrdEa'](_0xa6f225,undefined)){if(_0x1b76f1[_0x10c351(0x144)](_0x1b76f1['Tcepy'],_0x1b76f1[_0x10c351(0x150)])){const _0x369813=_0x1b76f1[_0x10c351(0xf4)][_0x10c351(0x16f)]('|');let _0x235790=0x0;while(!![]){switch(_0x369813[_0x235790++]){case'0':_0x1d13f5+=0x1;continue;case'1':_0x1e7e31['Resources'][_0x10c351(0x102)][_0x10c351(0x103)]['ResourcesVpcConfig'][_0x10c351(0x12a)][_0x10c351(0x182)]({'Ref':_0x10c351(0x14f)+_0x1b76f1[_0x10c351(0x1af)](_0x438289,_0x36f96e)['padStart'](0x2,'0')});continue;case'2':_0xcd415c['Metadata'][_0x1b76f1['KhnvO']]['ParameterGroups'][0x0]['Parameters'][_0x10c351(0x182)](_0x10c351(0x14f)+_0x1b76f1[_0x10c351(0x161)](_0x8ca688,_0x4f5ae0)[_0x10c351(0x137)](0x2,'0'));continue;case'3':_0x2bcb13[_0x10c351(0x1a9)][_0x10c351(0x123)][_0x10c351(0x103)][_0x10c351(0x152)][_0x10c351(0x182)]({'Ref':_0x10c351(0x14f)+_0x1b76f1[_0x10c351(0x18d)](_0x22010c,_0x288502)['padStart'](0x2,'0')});continue;case'4':_0x333ddd[_0x10c351(0x1a9)][_0x10c351(0x156)]['Properties'][_0x10c351(0x152)][_0x10c351(0x182)]({'Ref':_0x10c351(0x14f)+_0x1b76f1['pSDdE'](_0x3c6e34,_0xfc8b7a)[_0x10c351(0x137)](0x2,'0')});continue;case'5':_0x28fca6[_0x10c351(0x13e)][_0x10c351(0x12a)][_0x10c351(0x125)][_0x1b76f1[_0x10c351(0x181)]][0x1][_0x10c351(0x182)]({'Ref':_0x10c351(0x14f)+_0x1b76f1[_0x10c351(0x155)](_0x19a5b5,_0x2d4a82)['padStart'](0x2,'0')});continue;}break;}}else{const _0x3e60aa={};_0x3e60aa[_0x10c351(0x149)]=_0x1b76f1[_0x10c351(0xf9)],_0x3e60aa[_0x10c351(0x188)]=_0xa6f225,_0x165486['Parameters'][_0x10c351(0x182)](_0x3e60aa);}}if(_0x1b76f1['temJF'](_0x305fc6,null)&&_0x1b76f1[_0x10c351(0x112)](_0x305fc6,undefined)){let _0x221496=0x1;_0x305fc6[_0x10c351(0x16b)](_0x4f044c=>{const _0x4a9aa9=_0x10c351;_0x165486[_0x4a9aa9(0x1a2)][_0x4a9aa9(0x182)]({'ParameterKey':'Subnet'+_0x1b76f1[_0x4a9aa9(0x18d)](String,_0x221496)['padStart'](0x2,'0'),'ParameterValue':_0x4f044c['value']}),_0x221496+=0x1;});}const _0x36a166=await _0x3a7e1b['createStack'](_0x165486)[_0x10c351(0x11d)]();logger['debug'](_0x1b76f1['RUEyu']);const _0x257fbf={};return _0x257fbf[_0x10c351(0x17a)]=_0x36a166['StackId'],_0x3a7e1b[_0x10c351(0x140)](_0x1b76f1[_0x10c351(0x1ac)],_0x257fbf)['promise']();};