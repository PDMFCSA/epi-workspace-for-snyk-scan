const a27_0x273a98=a27_0x1048;(function(_0x5f25ce,_0xdf2a13){const _0x2546c6=a27_0x1048,_0x4af895=_0x5f25ce();while(!![]){try{const _0x3e0467=-parseInt(_0x2546c6(0x15b))/0x1*(-parseInt(_0x2546c6(0x17e))/0x2)+parseInt(_0x2546c6(0x1a6))/0x3+parseInt(_0x2546c6(0x18e))/0x4*(-parseInt(_0x2546c6(0x170))/0x5)+-parseInt(_0x2546c6(0x163))/0x6+parseInt(_0x2546c6(0x189))/0x7+-parseInt(_0x2546c6(0x18f))/0x8+-parseInt(_0x2546c6(0x15a))/0x9*(-parseInt(_0x2546c6(0x16e))/0xa);if(_0x3e0467===_0xdf2a13)break;else _0x4af895['push'](_0x4af895['shift']());}catch(_0x1acfd7){_0x4af895['push'](_0x4af895['shift']());}}}(a27_0x1836,0x64a86));const fs=require('fs'),path=require(a27_0x273a98(0x1c8)),Promise=require(a27_0x273a98(0x14a)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),AWS=require(a27_0x273a98(0x15d))['awsObj'],{CLUSTER_DEP_STACK_NAME,COMMON_HST_TAGS,global_registry}=require(a27_0x273a98(0x1e2)),{logger}=require(a27_0x273a98(0x1d3)),{isBucketPresent}=require('./AWSUtils');Promise['promisifyAll'](fs);const mergeTemplates=(_0x26abb4,_0x1172f1)=>{const _0x46ef06=a27_0x273a98,_0x3a4f04={};_0x3a4f04[_0x46ef06(0x14e)]=_0x46ef06(0x1ff),_0x3a4f04[_0x46ef06(0x1ee)]=function(_0x539b9b,_0x2ff36a){return _0x539b9b!==_0x2ff36a;},_0x3a4f04[_0x46ef06(0x1f0)]=_0x46ef06(0x198),_0x3a4f04[_0x46ef06(0x1bd)]=_0x46ef06(0x179),_0x3a4f04[_0x46ef06(0x18d)]=function(_0x2a9e62,_0x3b8a6b){return _0x2a9e62===_0x3b8a6b;},_0x3a4f04[_0x46ef06(0x1ac)]='XjyFO';const _0x4c9379=_0x3a4f04;Object[_0x46ef06(0x143)](_0x1172f1)[_0x46ef06(0x175)](_0x25ee37=>{const _0x1fa791=_0x46ef06,_0x1f12e8={'bzNRz':_0x4c9379[_0x1fa791(0x14e)],'GIdfR':function(_0x2c36f5,_0x23ce07){const _0x1aa9cb=_0x1fa791;return _0x4c9379[_0x1aa9cb(0x1ee)](_0x2c36f5,_0x23ce07);},'gCJnK':_0x4c9379[_0x1fa791(0x1f0)],'TeCdG':_0x4c9379[_0x1fa791(0x1bd)]};if(_0x4c9379['gckiX'](_0x4c9379[_0x1fa791(0x1ac)],_0x4c9379[_0x1fa791(0x1ac)])){var _0x43ea29=_0x1172f1[_0x25ee37];Object[_0x1fa791(0x143)](_0x43ea29)[_0x1fa791(0x175)](_0x2f9f8a=>{const _0x1aca9d=_0x1fa791;if(_0x1f12e8[_0x1aca9d(0x18b)](_0x1f12e8['gCJnK'],_0x1f12e8[_0x1aca9d(0x176)]))_0x26abb4[_0x25ee37][_0x2f9f8a]=_0x43ea29[_0x2f9f8a];else{const _0x15d667={};_0x15d667[_0x1aca9d(0x16f)]=_0x1f12e8[_0x1aca9d(0x1b8)],_0x15d667[_0x1aca9d(0x17a)]=_0x390ad9,_0x17e998[_0x1aca9d(0x14f)][_0x1aca9d(0x157)](_0x15d667);}});}else _0x475d53[_0x1fa791(0x169)][_0x802dbb][_0x1fa791(0x199)][_0x1fa791(0x160)][_0x1fa791(0x157)](..._0x534363);});},addVPCData=async(_0x9dc486,_0x1abf89)=>{const _0x43e990=a27_0x273a98,_0x25857d={'pjzmD':function(_0x138412,_0x51674d,_0x53f61b){return _0x138412(_0x51674d,_0x53f61b);},'hmmne':function(_0x40dd04,_0x29180d){return _0x40dd04===_0x29180d;},'QRMrn':_0x43e990(0x1b2),'IRCxF':_0x43e990(0x1ca),'Zqyzh':'vpc-import.yaml','ZVRfZ':'utf-8','xWcqg':_0x43e990(0x196),'YvZZZ':_0x43e990(0x1ff),'yRaPj':function(_0x4c432d,_0x4e8d3f){return _0x4c432d!==_0x4e8d3f;},'AnOJY':'IbwgJ','gzOsS':_0x43e990(0x19a),'MlREV':_0x43e990(0x1d5)};if(_0x1abf89){if(_0x25857d[_0x43e990(0x1c9)](_0x25857d[_0x43e990(0x1b5)],_0x25857d[_0x43e990(0x1b5)])){const _0x4eca7d=await fs[_0x43e990(0x1e5)](path[_0x43e990(0x148)](__dirname,'..',_0x25857d[_0x43e990(0x1f7)],_0x25857d[_0x43e990(0x164)]),_0x25857d['ZVRfZ']),_0x468595={};_0x468595[_0x43e990(0x1f3)]=CLOUDFORMATION_SCHEMA;const _0x518a8e=yaml[_0x43e990(0x1e4)](_0x4eca7d,_0x468595);_0x25857d['pjzmD'](mergeTemplates,_0x9dc486,_0x518a8e),_0x9dc486[_0x43e990(0x1c7)][_0x25857d[_0x43e990(0x1ab)]]['ParameterGroups'][0x0][_0x43e990(0x14f)][_0x43e990(0x157)](_0x25857d[_0x43e990(0x1b0)]);}else _0x25857d[_0x43e990(0x1fa)](_0x3823c5,_0x33c56d,_0x3c7e3a);}else{if(_0x25857d[_0x43e990(0x1cb)](_0x25857d[_0x43e990(0x1dc)],_0x25857d[_0x43e990(0x1dc)]))_0x4c9185[_0x3cbb9a][_0x52ebe8]=_0x334903[_0x51598f];else{const _0x7b2885=await fs[_0x43e990(0x1e5)](path[_0x43e990(0x148)](__dirname,'..',_0x25857d[_0x43e990(0x1f7)],_0x25857d[_0x43e990(0x1e7)]),_0x25857d[_0x43e990(0x184)]),_0x3149b9={};_0x3149b9[_0x43e990(0x1f3)]=CLOUDFORMATION_SCHEMA;const _0xbfc54d=yaml[_0x43e990(0x1e4)](_0x7b2885,_0x3149b9);_0x25857d['pjzmD'](mergeTemplates,_0x9dc486,_0xbfc54d),_0x9dc486[_0x43e990(0x1c7)][_0x25857d['xWcqg']][_0x43e990(0x149)][0x0][_0x43e990(0x14f)]['push'](_0x25857d[_0x43e990(0x1e9)]);}}},addS3Data=async _0x65929b=>{const _0x435b9a=a27_0x273a98,_0x50632a={'ODUFt':_0x435b9a(0x180),'Pzwta':_0x435b9a(0x188),'EnZid':_0x435b9a(0x1ca),'nxmUk':'s3-create.yaml','ChvxK':_0x435b9a(0x17c),'HEeuI':function(_0x43d5d1,_0x1f23e7){return _0x43d5d1(_0x1f23e7);},'PvCIh':function(_0x40b27e,_0x20f006){return _0x40b27e===_0x20f006;},'Vjsvu':_0x435b9a(0x151),'EHESA':'UZbbG','tBuZj':function(_0x5943d8,_0xda224a,_0x568c43){return _0x5943d8(_0xda224a,_0x568c43);}},_0x5b24e9=await fs[_0x435b9a(0x1e5)](path[_0x435b9a(0x148)](__dirname,'..',_0x50632a['EnZid'],_0x50632a[_0x435b9a(0x1c4)]),_0x50632a[_0x435b9a(0x1ed)]),_0x9aed9c={};_0x9aed9c[_0x435b9a(0x1f3)]=CLOUDFORMATION_SCHEMA;const _0xc93fd8=yaml['load'](_0x5b24e9,_0x9aed9c),_0x2fa479=await _0x50632a['HEeuI'](isBucketPresent,global_registry[_0x435b9a(0x142)]);if(_0x50632a[_0x435b9a(0x185)](_0x2fa479,![])){if(_0x50632a['PvCIh'](_0x50632a['Vjsvu'],_0x50632a['EHESA'])){for(const _0x520261 in _0x4cf083[_0x435b9a(0x169)]){_0x5808c3[_0x435b9a(0x169)][_0x520261]['Properties']&&_0x1293c0[_0x435b9a(0x169)][_0x520261][_0x435b9a(0x199)][_0x435b9a(0x160)]&&_0x5833c3[_0x435b9a(0x169)][_0x520261][_0x435b9a(0x199)][_0x435b9a(0x160)][_0x435b9a(0x157)](..._0x47991b);}const _0x44c712={};_0x49c446[_0x435b9a(0x175)](_0x21bec0=>{const _0x25abe5=_0x435b9a;_0x44c712[_0x21bec0[_0x25abe5(0x1ba)]]=_0x21bec0[_0x25abe5(0x1b9)];}),_0x1e5abc[_0x435b9a(0x169)][_0x50632a['ODUFt']]['Properties'][_0x435b9a(0x160)]=_0x44c712,_0x517f2c[_0x435b9a(0x169)][_0x50632a[_0x435b9a(0x1bf)]][_0x435b9a(0x199)][_0x435b9a(0x160)]=_0x44c712;}else _0x50632a[_0x435b9a(0x1a9)](mergeTemplates,_0x65929b,_0xc93fd8);}},addSubnetData=async(_0x5435e9,_0x128538)=>{const _0x3675a7=a27_0x273a98,_0x41954e={'IpvlM':function(_0x3cfc6e,_0x4ccd1e){return _0x3cfc6e(_0x4ccd1e);},'QbBrS':function(_0x129d96,_0x36af82){return _0x129d96===_0x36af82;},'sfMGe':_0x3675a7(0x1be),'UyfDW':_0x3675a7(0x192),'yQdsv':function(_0x271bfa,_0x2d79ca){return _0x271bfa(_0x2d79ca);},'xBgAf':_0x3675a7(0x1d4),'CjNSz':function(_0x2e609b,_0x3d5b7a){return _0x2e609b(_0x3d5b7a);},'wbtLy':_0x3675a7(0x196),'QyeZq':'ndmOJ','JzdUQ':'tNUvX','aHYlv':_0x3675a7(0x1ca),'WDQJk':_0x3675a7(0x154),'xIdWb':'utf-8','dVXNN':function(_0x2c6a9d,_0x384ce7,_0x14eb18){return _0x2c6a9d(_0x384ce7,_0x14eb18);},'mxGyg':function(_0x2c94c7,_0x2b3711){return _0x2c94c7!==_0x2b3711;},'OfltL':_0x3675a7(0x15c),'IxeZs':_0x3675a7(0x1de),'ZxqKy':_0x3675a7(0x144),'QuJqp':_0x3675a7(0x193),'oBxRq':_0x3675a7(0x187),'mFfhK':_0x3675a7(0x15f),'vYXpN':_0x3675a7(0x1a7),'UvrLM':_0x3675a7(0x1c3),'OVNLt':_0x3675a7(0x173)};if(_0x128538){if(_0x41954e[_0x3675a7(0x1ce)](_0x41954e['QyeZq'],_0x41954e[_0x3675a7(0x1d0)]))_0x4159eb[_0x140a84[_0x3675a7(0x1ba)]]=_0x11b1f0[_0x3675a7(0x1b9)];else{const _0x66102d=await fs['readFileAsync'](path['join'](__dirname,'..',_0x41954e[_0x3675a7(0x166)],_0x41954e[_0x3675a7(0x19d)]),_0x41954e[_0x3675a7(0x14c)]),_0x3317bb={};_0x3317bb[_0x3675a7(0x1f3)]=CLOUDFORMATION_SCHEMA;const _0x54ac22=yaml['load'](_0x66102d,_0x3317bb);_0x41954e[_0x3675a7(0x146)](mergeTemplates,_0x5435e9,_0x54ac22);let _0x31b6c3=0x1;_0x128538[_0x3675a7(0x175)](_0x7c7829=>{const _0x26a54a=_0x3675a7,_0x1ea5ad={'TiGDl':function(_0x33355e,_0x5a7c02){const _0x47261e=a27_0x1048;return _0x41954e[_0x47261e(0x1f6)](_0x33355e,_0x5a7c02);}};if(_0x41954e['QbBrS'](_0x41954e[_0x26a54a(0x1ae)],_0x41954e[_0x26a54a(0x1ae)])){const _0x460d71=_0x41954e['UyfDW'][_0x26a54a(0x1c2)]('|');let _0x471c36=0x0;while(!![]){switch(_0x460d71[_0x471c36++]){case'0':_0x31b6c3+=0x1;continue;case'1':_0x5435e9[_0x26a54a(0x169)]['NodeGroupWindows'][_0x26a54a(0x199)][_0x26a54a(0x1a2)][_0x26a54a(0x157)]({'Ref':_0x26a54a(0x145)+_0x41954e[_0x26a54a(0x1e6)](String,_0x31b6c3)[_0x26a54a(0x1a0)](0x2,'0')});continue;case'2':_0x5435e9[_0x26a54a(0x1df)]['SubnetIds'][_0x26a54a(0x1b9)][_0x41954e[_0x26a54a(0x15e)]][0x1][_0x26a54a(0x157)]({'Ref':_0x26a54a(0x145)+_0x41954e[_0x26a54a(0x1e3)](String,_0x31b6c3)[_0x26a54a(0x1a0)](0x2,'0')});continue;case'3':_0x5435e9[_0x26a54a(0x169)][_0x26a54a(0x1b1)][_0x26a54a(0x199)][_0x26a54a(0x16d)][_0x26a54a(0x14d)][_0x26a54a(0x157)]({'Ref':_0x26a54a(0x145)+_0x41954e[_0x26a54a(0x1e6)](String,_0x31b6c3)[_0x26a54a(0x1a0)](0x2,'0')});continue;case'4':_0x5435e9[_0x26a54a(0x1c7)][_0x41954e['wbtLy']][_0x26a54a(0x149)][0x0]['Parameters'][_0x26a54a(0x157)](_0x26a54a(0x145)+_0x41954e[_0x26a54a(0x1e6)](String,_0x31b6c3)[_0x26a54a(0x1a0)](0x2,'0'));continue;case'5':_0x5435e9[_0x26a54a(0x169)][_0x26a54a(0x180)][_0x26a54a(0x199)][_0x26a54a(0x1a2)][_0x26a54a(0x157)]({'Ref':_0x26a54a(0x145)+_0x41954e[_0x26a54a(0x1e6)](String,_0x31b6c3)[_0x26a54a(0x1a0)](0x2,'0')});continue;}break;}}else{let _0x3229b5=0x1;_0x4108c2[_0x26a54a(0x175)](_0x4aaa9c=>{const _0x468c73=_0x26a54a;_0x5aebc2[_0x468c73(0x14f)][_0x468c73(0x157)]({'ParameterKey':_0x468c73(0x145)+_0x1ea5ad[_0x468c73(0x1eb)](_0x4e1142,_0x3229b5)[_0x468c73(0x1a0)](0x2,'0'),'ParameterValue':_0x4aaa9c[_0x468c73(0x1fb)]}),_0x3229b5+=0x1;});}});}}else{if(_0x41954e[_0x3675a7(0x1dd)](_0x41954e['OfltL'],_0x41954e[_0x3675a7(0x172)])){const _0x4d1723=await fs[_0x3675a7(0x1e5)](path[_0x3675a7(0x148)](__dirname,'..',_0x41954e[_0x3675a7(0x166)],_0x41954e[_0x3675a7(0x1bc)]),_0x41954e[_0x3675a7(0x14c)]),_0x1433d0={};_0x1433d0[_0x3675a7(0x1f3)]=CLOUDFORMATION_SCHEMA;const _0x39144f=yaml[_0x3675a7(0x1e4)](_0x4d1723,_0x1433d0);_0x41954e[_0x3675a7(0x146)](mergeTemplates,_0x5435e9,_0x39144f),_0x5435e9[_0x3675a7(0x169)]['EKSCluster'][_0x3675a7(0x191)]['push'](_0x41954e['QuJqp'],_0x41954e['oBxRq'],_0x41954e[_0x3675a7(0x19b)]);const _0x5ee8df={};_0x5ee8df[_0x3675a7(0x17f)]=_0x41954e[_0x3675a7(0x1a3)];const _0x5b2565={};_0x5b2565[_0x3675a7(0x17f)]=_0x41954e[_0x3675a7(0x16b)];const _0x531fab={};_0x531fab[_0x3675a7(0x17f)]=_0x41954e[_0x3675a7(0x19b)],_0x5435e9[_0x3675a7(0x169)][_0x3675a7(0x1b1)][_0x3675a7(0x199)]['ResourcesVpcConfig']['SubnetIds']=[_0x5ee8df,_0x5b2565,_0x531fab],_0x5435e9[_0x3675a7(0x1c7)][_0x41954e['wbtLy']]['ParameterGroups'][0x0]['Parameters'][_0x3675a7(0x157)](_0x41954e[_0x3675a7(0x202)],_0x41954e[_0x3675a7(0x1a5)],_0x41954e[_0x3675a7(0x152)]);const _0x2ef90d={};_0x2ef90d[_0x3675a7(0x17f)]=_0x41954e['QuJqp'];const _0x489901={};_0x489901[_0x3675a7(0x17f)]=_0x41954e[_0x3675a7(0x16b)];const _0x3af2e0={};_0x3af2e0[_0x3675a7(0x17f)]=_0x41954e[_0x3675a7(0x19b)],_0x5435e9[_0x3675a7(0x169)][_0x3675a7(0x180)]['Properties'][_0x3675a7(0x1a2)]=[_0x2ef90d,_0x489901,_0x3af2e0];const _0x488849={};_0x488849['Ref']=_0x41954e['QuJqp'];const _0x2b40eb={};_0x2b40eb[_0x3675a7(0x17f)]=_0x41954e[_0x3675a7(0x16b)];const _0x5d7538={};_0x5d7538['Ref']=_0x41954e[_0x3675a7(0x19b)],_0x5435e9[_0x3675a7(0x169)][_0x3675a7(0x188)][_0x3675a7(0x199)][_0x3675a7(0x1a2)]=[_0x488849,_0x2b40eb,_0x5d7538],_0x5435e9[_0x3675a7(0x1df)]['SubnetIds']['Value'][_0x41954e[_0x3675a7(0x15e)]][0x1]=[{'Ref':_0x41954e[_0x3675a7(0x1a3)]},{'Ref':_0x41954e[_0x3675a7(0x16b)]},{'Ref':_0x41954e['mFfhK']}];}else _0x5626c2[_0x3675a7(0x143)](_0x234477)['forEach'](_0x502921=>{const _0x61024f=_0x3675a7;var _0x18f3cc=_0x3311df[_0x502921];_0x444c65[_0x61024f(0x143)](_0x18f3cc)[_0x61024f(0x175)](_0x595729=>{_0x435b9b[_0x502921][_0x595729]=_0x18f3cc[_0x595729];});});}},addTags=async(_0x13aa87,_0x52e973,_0x56d080)=>{const _0x2f6715=a27_0x273a98,_0x14267d={'WvlOv':_0x2f6715(0x17b),'YYaHa':'AWS::CloudFormation::Interface','EitMR':function(_0x472231,_0x3e3838){return _0x472231(_0x3e3838);},'Nytqf':_0x2f6715(0x1d4),'vvquJ':function(_0x20a848,_0x55e1b8){return _0x20a848(_0x55e1b8);},'roSAa':function(_0x5a5f14,_0x2a82a9){return _0x5a5f14(_0x2a82a9);},'vTXHU':function(_0x20dea8,_0x3ec0f7){return _0x20dea8===_0x3ec0f7;},'KKjrP':_0x2f6715(0x1e0),'OQRzG':_0x2f6715(0x1fe),'uvBvR':_0x2f6715(0x201),'JvzDq':_0x2f6715(0x1ad),'hcSqU':_0x2f6715(0x1b4),'ZtTTL':_0x2f6715(0x180),'uPKje':_0x2f6715(0x188)};for(const _0xb218 in _0x13aa87[_0x2f6715(0x169)]){if(_0x14267d[_0x2f6715(0x156)](_0x14267d[_0x2f6715(0x1cd)],_0x14267d[_0x2f6715(0x1cd)])){if(_0x13aa87[_0x2f6715(0x169)][_0xb218][_0x2f6715(0x199)]&&_0x13aa87[_0x2f6715(0x169)][_0xb218][_0x2f6715(0x199)][_0x2f6715(0x160)]){if(_0x14267d['vTXHU'](_0x14267d[_0x2f6715(0x1a1)],_0x14267d[_0x2f6715(0x1ef)])){const _0x466380=_0x14267d[_0x2f6715(0x13f)][_0x2f6715(0x1c2)]('|');let _0x3067a5=0x0;while(!![]){switch(_0x466380[_0x3067a5++]){case'0':_0x3b016c+=0x1;continue;case'1':_0x405d5f[_0x2f6715(0x1c7)][_0x14267d[_0x2f6715(0x1f2)]]['ParameterGroups'][0x0][_0x2f6715(0x14f)]['push']('Subnet'+_0x14267d[_0x2f6715(0x16a)](_0x3a85fd,_0x446d5a)['padStart'](0x2,'0'));continue;case'2':_0x5e78dc['Outputs']['SubnetIds']['Value'][_0x14267d[_0x2f6715(0x1f1)]][0x1][_0x2f6715(0x157)]({'Ref':_0x2f6715(0x145)+_0x14267d[_0x2f6715(0x16a)](_0x260258,_0x3767a9)[_0x2f6715(0x1a0)](0x2,'0')});continue;case'3':_0x119129[_0x2f6715(0x169)][_0x2f6715(0x1b1)]['Properties'][_0x2f6715(0x16d)][_0x2f6715(0x14d)][_0x2f6715(0x157)]({'Ref':_0x2f6715(0x145)+_0x14267d[_0x2f6715(0x16a)](_0x240430,_0xbae60c)[_0x2f6715(0x1a0)](0x2,'0')});continue;case'4':_0xff6143[_0x2f6715(0x169)][_0x2f6715(0x180)][_0x2f6715(0x199)]['Subnets'][_0x2f6715(0x157)]({'Ref':'Subnet'+_0x14267d[_0x2f6715(0x190)](_0x34ebb2,_0x4a503e)[_0x2f6715(0x1a0)](0x2,'0')});continue;case'5':_0x10c7d3[_0x2f6715(0x169)][_0x2f6715(0x188)][_0x2f6715(0x199)][_0x2f6715(0x1a2)][_0x2f6715(0x157)]({'Ref':_0x2f6715(0x145)+_0x14267d[_0x2f6715(0x1f8)](_0x27df40,_0x2bb193)['padStart'](0x2,'0')});continue;}break;}}else _0x13aa87['Resources'][_0xb218][_0x2f6715(0x199)][_0x2f6715(0x160)][_0x2f6715(0x157)](..._0x56d080);}}else _0x5c59ad['Resources'][_0x46faea][_0x2f6715(0x199)]&&_0x25c1a7[_0x2f6715(0x169)][_0x2be3ff]['Properties'][_0x2f6715(0x160)]&&_0x440abe[_0x2f6715(0x169)][_0xf7766b][_0x2f6715(0x199)]['Tags'][_0x2f6715(0x157)](..._0x208fe6);}const _0x126eee={};_0x56d080[_0x2f6715(0x175)](_0x52ea95=>{const _0x145389=_0x2f6715;if(_0x14267d['vTXHU'](_0x14267d['KKjrP'],_0x14267d[_0x145389(0x186)])){var _0x24c04c=_0x4606d2[_0x4d8b38];_0x26dd57[_0x145389(0x143)](_0x24c04c)[_0x145389(0x175)](_0x4e27cd=>{_0x122547[_0x275a54][_0x4e27cd]=_0x24c04c[_0x4e27cd];});}else _0x126eee[_0x52ea95['Key']]=_0x52ea95[_0x145389(0x1b9)];}),_0x13aa87[_0x2f6715(0x169)][_0x14267d[_0x2f6715(0x1d9)]][_0x2f6715(0x199)][_0x2f6715(0x160)]=_0x126eee,_0x13aa87['Resources'][_0x14267d[_0x2f6715(0x1d1)]][_0x2f6715(0x199)][_0x2f6715(0x160)]=_0x126eee;};function a27_0x1048(_0x1dfd77,_0x58c92a){const _0x1836ff=a27_0x1836();return a27_0x1048=function(_0x1048ce,_0xb1185e){_0x1048ce=_0x1048ce-0x13f;let _0x33198a=_0x1836ff[_0x1048ce];return _0x33198a;},a27_0x1048(_0x1dfd77,_0x58c92a);}function a27_0x1836(){const _0x1cb674=['WvlOv','2010-05-15','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','s3Bucket','keys','subnet-create.yaml','Subnet','dVXNN','dYIRe','join','ParameterGroups','bluebird','ClusterName','xIdWb','SubnetIds','GAZKK','Parameters','cCuKx','cawHf','OVNLt','kydbv','subnet-import.yaml','tPzlV','vTXHU','push','NodeGroupNameWindows','ZXWZd','1503sWkZqx','3259wmGBvT','OPdwF','./AWSUtils','xBgAf','Subnet03','Tags','ClusterAutoUpgrade','KrSuV','3292152LpodHt','Zqyzh','fOWNE','aHYlv','OnFailure','Hxjzw','Resources','EitMR','oBxRq','IkTQX','ResourcesVpcConfig','2930cOHYDw','ParameterKey','2330IItHoL','StackName','IxeZs','Subnet03Block','NodeAutoScalingGroupDesiredSizeWindows','forEach','TeCdG','ObZiI','TbAOV','JgfNp','ParameterValue','3|1|4|5|2|0','utf-8','S3BucketName','402jAurwW','Ref','NodeGroup','iHVtc','vCsCk','StackId','ZVRfZ','PvCIh','OQRzG','Subnet02','NodeGroupWindows','5239507DDnEPF','PCjpu','GIdfR','Capabilities','gckiX','2316JJssTE','5387232keYwvc','vvquJ','DependsOn','3|4|5|1|2|0','Subnet01','UdcNw','ami','AWS::CloudFormation::Interface','SAgKo','nrAsx','Properties','vpc-create.yaml','mFfhK','DELETE','WDQJk','HWCNv','CloudFormation','padStart','JvzDq','Subnets','QuJqp','XTfSL','UvrLM','1355139KgzZml','Subnet01Block','cvcoW','tBuZj','stackCreateComplete','xWcqg','olHYU','jlxhy','sfMGe','yhery','YvZZZ','EKSCluster','hOJvW','xfqXT','bJDCB','QRMrn','wPAfw','NodeAutoScalingGroupMinSizeWindows','bzNRz','Value','Key','NodeGroupName','ZxqKy','UsiVo','mMXcN','Pzwta','stringify','valueOf','split','Subnet02Block','nxmUk','aws-eks-cluster-dep.yaml','mYeUG','Metadata','path','hmmne','CFTemplates','yRaPj','hIrLU','uvBvR','QbBrS','NodeInstanceType','JzdUQ','uPKje','TemplateBody','../config/logger','Fn::Join','VpcBlock','promise','false','NodeAutoScalingGroupMaxSize','ZtTTL','iCUXY','RkyeE','AnOJY','mxGyg','mWGFV','Outputs','SGibH','RQyjH','../config/constants','CjNSz','load','readFileAsync','yQdsv','gzOsS','browserstack:cluster','MlREV','rbcLZ','TiGDl','-NodeGroup','ChvxK','uuVgJ','hcSqU','CuvXF','Nytqf','YYaHa','schema','wRGZJ','rIkos','IpvlM','IRCxF','roSAa','nGCxS','pjzmD','value','waitFor','ZtMMv','zPLxy','VPC','instanceType','WsuZc','vYXpN'];a27_0x1836=function(){return _0x1cb674;};return a27_0x1836();}exports['createClusterStack']=async(_0x364c47,_0x1a0fa1,_0x1db15b,_0xe3c39a=null,_0x5dee55=null,_0x915b08)=>{const _0x3abdad=a27_0x273a98,_0x11b6cb={'cCuKx':function(_0x16aacf,_0xc2a17d){return _0x16aacf(_0xc2a17d);},'SAgKo':function(_0x256d6c,_0x427e58){return _0x256d6c(_0x427e58);},'kydbv':_0x3abdad(0x1e8),'iHVtc':'browserstack:creationDate','Hxjzw':_0x3abdad(0x140),'UdcNw':_0x3abdad(0x1ca),'ObZiI':_0x3abdad(0x1c5),'HsWpb':'utf-8','XTfSL':function(_0xc45e4d,_0x56a73e,_0x5aab61){return _0xc45e4d(_0x56a73e,_0x5aab61);},'vCsCk':function(_0xcf12a2,_0x114d01){return _0xcf12a2(_0x114d01);},'RQyjH':function(_0x1081dd,_0x236ba3,_0x55db75){return _0x1081dd(_0x236ba3,_0x55db75);},'EYmCO':function(_0x55e003,_0x5751f3,_0xf17289,_0x391198){return _0x55e003(_0x5751f3,_0xf17289,_0x391198);},'tPzlV':_0x3abdad(0x19c),'rbcLZ':_0x3abdad(0x14b),'KrSuV':_0x3abdad(0x1bb),'hIrLU':'NodeAutoScalingGroupMinSize','dYIRe':_0x3abdad(0x1b7),'cvcoW':_0x3abdad(0x174),'TbAOV':_0x3abdad(0x1d8),'jLbvL':'NodeImageId','owQqU':_0x3abdad(0x1cf),'ZtMMv':_0x3abdad(0x17d),'iCUXY':_0x3abdad(0x158),'RkyeE':_0x3abdad(0x161),'HWCNv':'true','yhery':_0x3abdad(0x1d7),'ZXZmj':'CAPABILITY_NAMED_IAM','PCjpu':function(_0x2cfb31,_0x4b60fb){return _0x2cfb31!=_0x4b60fb;},'hHjDZ':function(_0x50ec65,_0x44f019){return _0x50ec65!==_0x44f019;},'IkTQX':function(_0x143511,_0x3809cd){return _0x143511!==_0x3809cd;},'ZXWZd':'DtmQC','nGCxS':_0x3abdad(0x1b6),'fOWNE':'VPC','wRGZJ':function(_0x5f0d98,_0x11cb2b){return _0x5f0d98!=_0x11cb2b;},'xfqXT':function(_0x3afc78,_0x419efe){return _0x3afc78!==_0x419efe;},'mYeUG':_0x3abdad(0x141),'rIkos':_0x3abdad(0x1aa)},_0x2a6349=COMMON_HST_TAGS,_0x1cba1f={};_0x1cba1f['Key']=_0x11b6cb[_0x3abdad(0x153)],_0x1cba1f[_0x3abdad(0x1b9)]=_0x364c47,_0x2a6349[_0x3abdad(0x157)](_0x1cba1f),_0x2a6349['push']({'Key':_0x11b6cb[_0x3abdad(0x181)],'Value':new Date()[_0x3abdad(0x1c1)]()['toString']()});const _0xd78c3f={};_0xd78c3f['apiVersion']=_0x11b6cb[_0x3abdad(0x168)];const _0x2d22cc=new AWS[(_0x3abdad(0x19f))](_0xd78c3f),_0x1e04a8=await fs[_0x3abdad(0x1e5)](path['join'](__dirname,'..',_0x11b6cb[_0x3abdad(0x194)],_0x11b6cb[_0x3abdad(0x177)]),_0x11b6cb['HsWpb']),_0x1cae9d={};_0x1cae9d[_0x3abdad(0x1f3)]=CLOUDFORMATION_SCHEMA;const _0x5670d5=yaml[_0x3abdad(0x1e4)](_0x1e04a8,_0x1cae9d);await _0x11b6cb[_0x3abdad(0x1a4)](addVPCData,_0x5670d5,_0xe3c39a),await _0x11b6cb[_0x3abdad(0x182)](addS3Data,_0x5670d5),await _0x11b6cb[_0x3abdad(0x1e1)](addSubnetData,_0x5670d5,_0x5dee55),await _0x11b6cb['EYmCO'](addTags,_0x5670d5,_0x364c47,_0x2a6349);const _0x4db404=JSON[_0x3abdad(0x1c0)](_0x5670d5),_0x55e6ad={};_0x55e6ad[_0x3abdad(0x171)]=CLUSTER_DEP_STACK_NAME+'-'+_0x364c47,_0x55e6ad[_0x3abdad(0x167)]=_0x11b6cb[_0x3abdad(0x155)],_0x55e6ad[_0x3abdad(0x1d2)]=_0x4db404,_0x55e6ad[_0x3abdad(0x14f)]=[{'ParameterKey':_0x11b6cb[_0x3abdad(0x1ea)],'ParameterValue':_0x364c47},{'ParameterKey':_0x11b6cb[_0x3abdad(0x162)],'ParameterValue':_0x364c47+_0x3abdad(0x1ec)},{'ParameterKey':_0x11b6cb[_0x3abdad(0x1cc)],'ParameterValue':''+_0x1a0fa1},{'ParameterKey':_0x11b6cb[_0x3abdad(0x147)],'ParameterValue':'0'},{'ParameterKey':_0x11b6cb[_0x3abdad(0x1a8)],'ParameterValue':'1'},{'ParameterKey':_0x11b6cb[_0x3abdad(0x178)],'ParameterValue':''+_0x1db15b},{'ParameterKey':_0x11b6cb['jLbvL'],'ParameterValue':global_registry[_0x3abdad(0x195)]},{'ParameterKey':_0x11b6cb['owQqU'],'ParameterValue':global_registry[_0x3abdad(0x200)]},{'ParameterKey':_0x11b6cb[_0x3abdad(0x1fd)],'ParameterValue':global_registry[_0x3abdad(0x142)]},{'ParameterKey':_0x11b6cb[_0x3abdad(0x1da)],'ParameterValue':_0x364c47+'-Windows-NodeGroup'},{'ParameterKey':_0x11b6cb[_0x3abdad(0x1db)],'ParameterValue':_0x915b08?_0x11b6cb[_0x3abdad(0x19e)]:_0x11b6cb[_0x3abdad(0x1af)]}],_0x55e6ad[_0x3abdad(0x18c)]=[_0x11b6cb['ZXZmj']],_0x55e6ad[_0x3abdad(0x160)]=_0x2a6349;const _0x4c6af3=_0x55e6ad;if(_0x11b6cb[_0x3abdad(0x18a)](_0xe3c39a,null)&&_0x11b6cb['hHjDZ'](_0xe3c39a,undefined)){if(_0x11b6cb[_0x3abdad(0x16c)](_0x11b6cb[_0x3abdad(0x159)],_0x11b6cb[_0x3abdad(0x1f9)])){const _0x569295={};_0x569295[_0x3abdad(0x16f)]=_0x11b6cb[_0x3abdad(0x165)],_0x569295['ParameterValue']=_0xe3c39a,_0x4c6af3[_0x3abdad(0x14f)][_0x3abdad(0x157)](_0x569295);}else _0x367b95[_0x3abdad(0x14f)][_0x3abdad(0x157)]({'ParameterKey':_0x3abdad(0x145)+_0x11b6cb[_0x3abdad(0x150)](_0x2986dc,_0x4884d4)[_0x3abdad(0x1a0)](0x2,'0'),'ParameterValue':_0x1475ce['value']}),_0x39af38+=0x1;}if(_0x11b6cb[_0x3abdad(0x1f4)](_0x5dee55,null)&&_0x11b6cb[_0x3abdad(0x1b3)](_0x5dee55,undefined)){let _0x41b328=0x1;_0x5dee55['forEach'](_0x9718b0=>{const _0x36045c=_0x3abdad;_0x4c6af3[_0x36045c(0x14f)]['push']({'ParameterKey':_0x36045c(0x145)+_0x11b6cb[_0x36045c(0x197)](String,_0x41b328)['padStart'](0x2,'0'),'ParameterValue':_0x9718b0['value']}),_0x41b328+=0x1;});}const _0x4e9161=await _0x2d22cc['createStack'](_0x4c6af3)[_0x3abdad(0x1d6)]();logger['debug'](_0x11b6cb[_0x3abdad(0x1c6)]);const _0x1cb8ab={};return _0x1cb8ab[_0x3abdad(0x171)]=_0x4e9161[_0x3abdad(0x183)],_0x2d22cc[_0x3abdad(0x1fc)](_0x11b6cb[_0x3abdad(0x1f5)],_0x1cb8ab)['promise']();};