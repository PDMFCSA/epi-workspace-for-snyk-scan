function a27_0xa37b(){const _0x1a6def=['NodeAutoScalingGroupDesiredSizeWindows','IubBR','./AWSUtils','Outputs','readFileAsync','ezFqv','4UXdHRg','5|4|0|2|3|1','jVVEz','Ref','2010-05-15','-NodeGroup','browserstack:cluster','bluebird','StackName','fGnPR','Parameters','MKDBY','jwMIJ','NboHn','UnDEf','BncJf','vKYgE','Subnet01Block','ioUwM','nWnwI','ZFouX','kdPqi','ParameterGroups','pBXZT','js-yaml','DependsOn','ukiAk','load','gzUwI','push','js-yaml-cloudformation-schema','PlaES','yQXsa','wzbBo','NodeAutoScalingGroupMaxSize','ami','forEach','261198MTUIjS','wRUku','schema','aARPI','promisifyAll','awsObj','OnFailure','FvXFg','DZRwz','s3Bucket','join','nfHQA','NodeGroupNameWindows','value','DtjTU','createStack','padStart','Fn::Join','DglzI','218604lUbbOJ','fbwOr','hIDRx','efUJV','3710sXSUEi','Subnet01','uBVAK','cwRvL','KvxXs','uwKmL','PqBDW','RTYoR','enJuu','zKWmR','CloudFormation','MCCaN','gUomr','Value','NodeAutoScalingGroupMinSizeWindows','qBmLI','gLwBl','subnet-import.yaml','fCWIG','ClusterName','doGpj','false','dMTHB','utf-8','NodeGroupWindows','VpcBlock','LcRNn','ResourcesVpcConfig','oMsbd','StackId','CEdTY','pvLJt','YmAsM','ZQFzi','CFTemplates','17928QhYwxU','cmXwV','SeOch','2046674rlqPRC','Qithk','TemplateBody','Properties','EtNLH','uNQhK','aCrcY','instanceType','iIdZF','promise','TCmVJ','lauSu','movPm','Resources','Capabilities','aws-eks-cluster-dep.yaml','qCBpu','DyLwD','../config/logger','qsuga','CAPABILITY_NAMED_IAM','WZxIP','ldQTt','Subnet03Block','cmrSP','Subnet','Metadata','RJsEj','1248384mwPeTp','ClusterAutoUpgrade','Cjpke','ParameterKey','path','WrOAd','Uphtc','Subnet02','debug','NodeGroupName','Subnet03','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','subnet-create.yaml','S3BucketName','Subnet02Block','PNqjf','vApzD','EKSCluster','fYPbn','ParameterValue','aSkHZ','Key','chQFH','IZvah','browserstack:creationDate','-Windows-NodeGroup','NodeGroup','true','vwSRo','huGqj','mutSg','MnXNk','waitFor','RfhfC','dsgwb','apiVersion','Fpckv','QvFjZ','FcBLv','stackCreateComplete','Tags','oSCyp','qufqD','AWS::CloudFormation::Interface','9AuhTnU','NodeImageId','hUECh','hLhWQ','IJOOr','bNYzG','3149340lwBFhw','SubnetIds','s3-create.yaml','4|0|2|3|5|1','PsWLQ','VPC','aFHpv','Subnets','split','xysAt','tREaw','LpJmM','vpc-create.yaml','QNgSl','413048CzRvsT','keys','AIhuq'];a27_0xa37b=function(){return _0x1a6def;};return a27_0xa37b();}const a27_0x52c333=a27_0x1254;(function(_0x447690,_0x3c3533){const _0x2d58c3=a27_0x1254,_0x39c710=_0x447690();while(!![]){try{const _0x581a4b=parseInt(_0x2d58c3(0x1b8))/0x1+-parseInt(_0x2d58c3(0x1a5))/0x2*(-parseInt(_0x2d58c3(0x163))/0x3)+parseInt(_0x2d58c3(0x180))/0x4*(parseInt(_0x2d58c3(0x169))/0x5)+parseInt(_0x2d58c3(0x1fe))/0x6+-parseInt(_0x2d58c3(0x1e2))/0x7+-parseInt(_0x2d58c3(0x177))/0x8+-parseInt(_0x2d58c3(0x1df))/0x9*(parseInt(_0x2d58c3(0x1bc))/0xa);if(_0x581a4b===_0x3c3533)break;else _0x39c710['push'](_0x39c710['shift']());}catch(_0x22ac7e){_0x39c710['push'](_0x39c710['shift']());}}}(a27_0xa37b,0x592e8));const fs=require('fs'),path=require(a27_0x52c333(0x202)),Promise=require(a27_0x52c333(0x187)),yaml=require(a27_0x52c333(0x198)),{CLOUDFORMATION_SCHEMA}=require(a27_0x52c333(0x19e)),AWS=require(a27_0x52c333(0x17c))[a27_0x52c333(0x1aa)],{CLUSTER_DEP_STACK_NAME,COMMON_HST_TAGS,global_registry}=require('../config/constants'),{logger}=require(a27_0x52c333(0x1f4)),{isBucketPresent}=require(a27_0x52c333(0x17c));Promise[a27_0x52c333(0x1a9)](fs);function a27_0x1254(_0x5082e2,_0x459d3c){const _0xa37b4e=a27_0xa37b();return a27_0x1254=function(_0x1254a1,_0x268244){_0x1254a1=_0x1254a1-0x152;let _0x1c3af6=_0xa37b4e[_0x1254a1];return _0x1c3af6;},a27_0x1254(_0x5082e2,_0x459d3c);}const mergeTemplates=(_0x5bfcbd,_0x436a07)=>{const _0x1eb0ca=a27_0x52c333,_0x3bad35={};_0x3bad35[_0x1eb0ca(0x1d8)]=function(_0x3e8652,_0x2d525f){return _0x3e8652===_0x2d525f;},_0x3bad35[_0x1eb0ca(0x19c)]=_0x1eb0ca(0x16d),_0x3bad35['MPdSx']=_0x1eb0ca(0x1d6),_0x3bad35[_0x1eb0ca(0x1a6)]=function(_0x531e23,_0x5afcac){return _0x531e23!==_0x5afcac;},_0x3bad35[_0x1eb0ca(0x167)]=_0x1eb0ca(0x1c0),_0x3bad35['JrpdD']=_0x1eb0ca(0x1e6);const _0x4c7718=_0x3bad35;Object[_0x1eb0ca(0x178)](_0x436a07)[_0x1eb0ca(0x1a4)](_0x1fda9a=>{const _0x26d498=_0x1eb0ca,_0x2e8432={'smlmQ':function(_0x50e570,_0x22cbbf){const _0x2a8147=a27_0x1254;return _0x4c7718[_0x2a8147(0x1d8)](_0x50e570,_0x22cbbf);},'gcHwB':_0x4c7718[_0x26d498(0x19c)],'ZFouX':_0x4c7718['MPdSx']};if(_0x4c7718['wRUku'](_0x4c7718[_0x26d498(0x167)],_0x4c7718['JrpdD'])){var _0xec3243=_0x436a07[_0x1fda9a];Object['keys'](_0xec3243)[_0x26d498(0x1a4)](_0xc185c2=>{const _0x504757=_0x26d498;_0x2e8432['smlmQ'](_0x2e8432['gcHwB'],_0x2e8432[_0x504757(0x194)])?_0x127480[_0x504757(0x178)](_0x423433)[_0x504757(0x1a4)](_0x4854fb=>{const _0x44b75d=_0x504757;var _0x1620f2=_0x349280[_0x4854fb];_0x897644[_0x44b75d(0x178)](_0x1620f2)[_0x44b75d(0x1a4)](_0x3ee38a=>{_0x3fad8f[_0x4854fb][_0x3ee38a]=_0x1620f2[_0x3ee38a];});}):_0x5bfcbd[_0x1fda9a][_0xc185c2]=_0xec3243[_0xc185c2];});}else _0x35f6e5[_0x56c9dc['Key']]=_0x2ef11b[_0x26d498(0x1c9)];});},addVPCData=async(_0x59534d,_0x32a9fb)=>{const _0x1fbaa4=a27_0x52c333,_0x5bc339={'bNYzG':_0x1fbaa4(0x218),'pvLJt':_0x1fbaa4(0x1d4),'VEbSE':function(_0xf60d4c,_0x55aeec){return _0xf60d4c(_0x55aeec);},'jwMIJ':function(_0x3fd193,_0x3ad735){return _0x3fd193!==_0x3ad735;},'DyLwD':'GGIIB','ldQTt':_0x1fbaa4(0x1de),'gLwBl':'vpc-import.yaml','DtjTU':_0x1fbaa4(0x1d3),'oSCyp':function(_0x23a051,_0x4ec5e3,_0x269147){return _0x23a051(_0x4ec5e3,_0x269147);},'lauSu':_0x1fbaa4(0x162),'pBXZT':_0x1fbaa4(0x16e),'QvFjZ':function(_0x5b4c19,_0x9d0e41){return _0x5b4c19===_0x9d0e41;},'tREaw':'IareE','AIhuq':_0x1fbaa4(0x175),'GFDzL':function(_0x859da1,_0x25b437,_0x5495d8){return _0x859da1(_0x25b437,_0x5495d8);},'BzYUE':_0x1fbaa4(0x1d5)};if(_0x32a9fb){if(_0x5bc339[_0x1fbaa4(0x18c)](_0x5bc339['DyLwD'],_0x5bc339[_0x1fbaa4(0x1f3)])){for(const _0x233753 in _0x15bf21[_0x1fbaa4(0x1ef)]){_0x534cc3[_0x1fbaa4(0x1ef)][_0x233753][_0x1fbaa4(0x1e5)]&&_0x1cbba[_0x1fbaa4(0x1ef)][_0x233753][_0x1fbaa4(0x1e5)]['Tags']&&_0x2e113b[_0x1fbaa4(0x1ef)][_0x233753][_0x1fbaa4(0x1e5)][_0x1fbaa4(0x15f)][_0x1fbaa4(0x19d)](..._0x5fc7a9);}const _0x3242db={};_0x7c0525['forEach'](_0x14e08a=>{const _0x4134d0=_0x1fbaa4;_0x3242db[_0x14e08a[_0x4134d0(0x213)]]=_0x14e08a[_0x4134d0(0x1c9)];}),_0x21b5ba['Resources'][_0x5bc339[_0x1fbaa4(0x168)]]['Properties']['Tags']=_0x3242db,_0xb9f7e7[_0x1fbaa4(0x1ef)][_0x5bc339[_0x1fbaa4(0x1db)]][_0x1fbaa4(0x1e5)][_0x1fbaa4(0x15f)]=_0x3242db;}else{const _0x5cfede=await fs[_0x1fbaa4(0x17e)](path[_0x1fbaa4(0x1af)](__dirname,'..',_0x5bc339[_0x1fbaa4(0x1f8)],_0x5bc339[_0x1fbaa4(0x1cc)]),_0x5bc339[_0x1fbaa4(0x1b3)]),_0x4900df={};_0x4900df[_0x1fbaa4(0x1a7)]=CLOUDFORMATION_SCHEMA;const _0x211c2e=yaml['load'](_0x5cfede,_0x4900df);_0x5bc339[_0x1fbaa4(0x160)](mergeTemplates,_0x59534d,_0x211c2e),_0x59534d[_0x1fbaa4(0x1fc)][_0x5bc339[_0x1fbaa4(0x1ed)]][_0x1fbaa4(0x196)][0x0][_0x1fbaa4(0x18a)][_0x1fbaa4(0x19d)](_0x5bc339[_0x1fbaa4(0x197)]);}}else{if(_0x5bc339[_0x1fbaa4(0x15c)](_0x5bc339[_0x1fbaa4(0x173)],_0x5bc339[_0x1fbaa4(0x173)])){const _0xae31b2=await fs['readFileAsync'](path[_0x1fbaa4(0x1af)](__dirname,'..',_0x5bc339['ldQTt'],_0x5bc339[_0x1fbaa4(0x179)]),_0x5bc339[_0x1fbaa4(0x1b3)]),_0x51d8bf={};_0x51d8bf[_0x1fbaa4(0x1a7)]=CLOUDFORMATION_SCHEMA;const _0x770c0c=yaml[_0x1fbaa4(0x19b)](_0xae31b2,_0x51d8bf);_0x5bc339['GFDzL'](mergeTemplates,_0x59534d,_0x770c0c),_0x59534d[_0x1fbaa4(0x1fc)][_0x5bc339[_0x1fbaa4(0x1ed)]][_0x1fbaa4(0x196)][0x0]['Parameters'][_0x1fbaa4(0x19d)](_0x5bc339['BzYUE']);}else{const _0x4b6526={'nfHQA':function(_0x15cdbb,_0x4a5528){return _0x5bc339['VEbSE'](_0x15cdbb,_0x4a5528);}};let _0x1ed036=0x1;_0x2a4c87[_0x1fbaa4(0x1a4)](_0x2d14a0=>{const _0xf1c17a=_0x1fbaa4;_0x3ca082[_0xf1c17a(0x18a)]['push']({'ParameterKey':_0xf1c17a(0x1fb)+_0x4b6526[_0xf1c17a(0x1b0)](_0x1d129a,_0x1ed036)[_0xf1c17a(0x1b5)](0x2,'0'),'ParameterValue':_0x2d14a0['value']}),_0x1ed036+=0x1;});}}},addS3Data=async _0x36c090=>{const _0xd2a6b1=a27_0x52c333,_0x420528={'hIDRx':_0xd2a6b1(0x16c),'MCCaN':_0xd2a6b1(0x162),'aCrcY':function(_0x3a23f3,_0x16d3e2){return _0x3a23f3(_0x16d3e2);},'chQFH':function(_0x53b261,_0x45f80b){return _0x53b261(_0x45f80b);},'QZhLv':_0xd2a6b1(0x1b6),'uNQhK':_0xd2a6b1(0x1de),'QvHLQ':_0xd2a6b1(0x16b),'Fpckv':'utf-8','LdIQf':function(_0x129924,_0x139f8f){return _0x129924===_0x139f8f;},'uBVAK':function(_0x560c36,_0x4866fb){return _0x560c36===_0x4866fb;},'doGpj':_0xd2a6b1(0x1ec),'QNgSl':_0xd2a6b1(0x1b9),'vKYgE':function(_0xc0387b,_0x3a6b7c,_0x4a4907){return _0xc0387b(_0x3a6b7c,_0x4a4907);}},_0x550735=await fs['readFileAsync'](path[_0xd2a6b1(0x1af)](__dirname,'..',_0x420528[_0xd2a6b1(0x1e7)],_0x420528['QvHLQ']),_0x420528[_0xd2a6b1(0x15b)]),_0x193f36={};_0x193f36[_0xd2a6b1(0x1a7)]=CLOUDFORMATION_SCHEMA;const _0x4b0922=yaml[_0xd2a6b1(0x19b)](_0x550735,_0x193f36),_0x25becb=await _0x420528['chQFH'](isBucketPresent,global_registry[_0xd2a6b1(0x1ae)]);if(_0x420528['LdIQf'](_0x25becb,![])){if(_0x420528[_0xd2a6b1(0x1be)](_0x420528[_0xd2a6b1(0x1d0)],_0x420528[_0xd2a6b1(0x176)])){const _0x1a4ab2=_0x420528[_0xd2a6b1(0x1ba)][_0xd2a6b1(0x171)]('|');let _0x28da09=0x0;while(!![]){switch(_0x1a4ab2[_0x28da09++]){case'0':_0x5c83aa['Metadata'][_0x420528[_0xd2a6b1(0x1c7)]][_0xd2a6b1(0x196)][0x0]['Parameters']['push'](_0xd2a6b1(0x1fb)+_0x420528['aCrcY'](_0x154115,_0x423232)[_0xd2a6b1(0x1b5)](0x2,'0'));continue;case'1':_0x40bbae+=0x1;continue;case'2':_0x549b0b['Resources'][_0xd2a6b1(0x218)][_0xd2a6b1(0x1e5)][_0xd2a6b1(0x170)][_0xd2a6b1(0x19d)]({'Ref':_0xd2a6b1(0x1fb)+_0x420528[_0xd2a6b1(0x1e8)](_0x547f3c,_0x3502bc)['padStart'](0x2,'0')});continue;case'3':_0x420224[_0xd2a6b1(0x1ef)][_0xd2a6b1(0x1d4)][_0xd2a6b1(0x1e5)][_0xd2a6b1(0x170)][_0xd2a6b1(0x19d)]({'Ref':_0xd2a6b1(0x1fb)+_0x420528[_0xd2a6b1(0x214)](_0xfa7d7f,_0x190b61)[_0xd2a6b1(0x1b5)](0x2,'0')});continue;case'4':_0x2307c1[_0xd2a6b1(0x1ef)][_0xd2a6b1(0x20f)][_0xd2a6b1(0x1e5)]['ResourcesVpcConfig']['SubnetIds']['push']({'Ref':_0xd2a6b1(0x1fb)+_0x420528['aCrcY'](_0x3d72ab,_0x3ad721)[_0xd2a6b1(0x1b5)](0x2,'0')});continue;case'5':_0x38ecdf[_0xd2a6b1(0x17d)][_0xd2a6b1(0x16a)][_0xd2a6b1(0x1c9)][_0x420528['QZhLv']][0x1]['push']({'Ref':_0xd2a6b1(0x1fb)+_0x420528['aCrcY'](_0x5ccf18,_0x511ef3)[_0xd2a6b1(0x1b5)](0x2,'0')});continue;}break;}}else _0x420528[_0xd2a6b1(0x190)](mergeTemplates,_0x36c090,_0x4b0922);}},addSubnetData=async(_0x5d4455,_0x14c9d4)=>{const _0x514823=a27_0x52c333,_0x4572d5={'LpJmM':function(_0xaa53d,_0x5253a7,_0x35e049){return _0xaa53d(_0x5253a7,_0x35e049);},'IubBR':function(_0x28f797,_0x4ea217){return _0x28f797!==_0x4ea217;},'zKWmR':'OSjAY','RfhfC':_0x514823(0x181),'dsgwb':function(_0x1a7e40,_0x273ecb){return _0x1a7e40(_0x273ecb);},'OWOwt':function(_0x447aaa,_0x35da46){return _0x447aaa(_0x35da46);},'hUECh':_0x514823(0x1b6),'UnDEf':function(_0x48b1a2,_0x2e4412){return _0x48b1a2(_0x2e4412);},'dMTHB':_0x514823(0x162),'umCtW':function(_0x4dcd49,_0x4a1bbc){return _0x4dcd49(_0x4a1bbc);},'ezFqv':function(_0x33d009,_0x1bfe63){return _0x33d009(_0x1bfe63);},'RTYoR':function(_0x1df507,_0x35f0ab){return _0x1df507===_0x35f0ab;},'xysAt':_0x514823(0x166),'enJuu':'seToy','cwRvL':'CFTemplates','BncJf':_0x514823(0x1cd),'uwKmL':_0x514823(0x1d3),'fYPbn':_0x514823(0x1ad),'efUJV':_0x514823(0x1dd),'Cjpke':_0x514823(0x20a),'YmAsM':function(_0xefe0ea,_0x103047,_0x313394){return _0xefe0ea(_0x103047,_0x313394);},'movPm':_0x514823(0x1bd),'FcBLv':_0x514823(0x205),'aARPI':_0x514823(0x208),'ioUwM':_0x514823(0x191),'wzbBo':_0x514823(0x20c),'CEdTY':_0x514823(0x1f9)};if(_0x14c9d4){if(_0x4572d5[_0x514823(0x1c3)](_0x4572d5[_0x514823(0x172)],_0x4572d5[_0x514823(0x1c4)]))_0x4572d5[_0x514823(0x174)](_0x14289f,_0x54a415,_0x452f59);else{const _0x56578f=await fs[_0x514823(0x17e)](path[_0x514823(0x1af)](__dirname,'..',_0x4572d5[_0x514823(0x1bf)],_0x4572d5[_0x514823(0x18f)]),_0x4572d5[_0x514823(0x1c1)]),_0x3a172b={};_0x3a172b[_0x514823(0x1a7)]=CLOUDFORMATION_SCHEMA;const _0x1bbd8b=yaml[_0x514823(0x19b)](_0x56578f,_0x3a172b);_0x4572d5['LpJmM'](mergeTemplates,_0x5d4455,_0x1bbd8b);let _0x4b9c49=0x1;_0x14c9d4[_0x514823(0x1a4)](_0x452144=>{const _0x4ab759=_0x514823;if(_0x4572d5['IubBR'](_0x4572d5[_0x4ab759(0x1c5)],_0x4572d5[_0x4ab759(0x1c5)])){var _0xa53144=_0x1eb4a9[_0x347bce];_0x7ed1c5[_0x4ab759(0x178)](_0xa53144)[_0x4ab759(0x1a4)](_0x258750=>{_0x5075d1[_0xb4593c][_0x258750]=_0xa53144[_0x258750];});}else{const _0x4c838c=_0x4572d5[_0x4ab759(0x158)][_0x4ab759(0x171)]('|');let _0x12a91f=0x0;while(!![]){switch(_0x4c838c[_0x12a91f++]){case'0':_0x5d4455['Resources']['NodeGroup'][_0x4ab759(0x1e5)][_0x4ab759(0x170)]['push']({'Ref':_0x4ab759(0x1fb)+_0x4572d5[_0x4ab759(0x159)](String,_0x4b9c49)[_0x4ab759(0x1b5)](0x2,'0')});continue;case'1':_0x4b9c49+=0x1;continue;case'2':_0x5d4455[_0x4ab759(0x1ef)][_0x4ab759(0x1d4)]['Properties'][_0x4ab759(0x170)][_0x4ab759(0x19d)]({'Ref':'Subnet'+_0x4572d5['OWOwt'](String,_0x4b9c49)[_0x4ab759(0x1b5)](0x2,'0')});continue;case'3':_0x5d4455[_0x4ab759(0x17d)][_0x4ab759(0x16a)][_0x4ab759(0x1c9)][_0x4572d5['hUECh']][0x1][_0x4ab759(0x19d)]({'Ref':_0x4ab759(0x1fb)+_0x4572d5[_0x4ab759(0x18e)](String,_0x4b9c49)[_0x4ab759(0x1b5)](0x2,'0')});continue;case'4':_0x5d4455[_0x4ab759(0x1fc)][_0x4572d5[_0x4ab759(0x1d2)]][_0x4ab759(0x196)][0x0][_0x4ab759(0x18a)][_0x4ab759(0x19d)]('Subnet'+_0x4572d5['umCtW'](String,_0x4b9c49)[_0x4ab759(0x1b5)](0x2,'0'));continue;case'5':_0x5d4455['Resources']['EKSCluster'][_0x4ab759(0x1e5)]['ResourcesVpcConfig'][_0x4ab759(0x16a)][_0x4ab759(0x19d)]({'Ref':_0x4ab759(0x1fb)+_0x4572d5[_0x4ab759(0x17f)](String,_0x4b9c49)['padStart'](0x2,'0')});continue;}break;}}});}}else{if(_0x4572d5[_0x514823(0x17b)](_0x4572d5[_0x514823(0x210)],_0x4572d5[_0x514823(0x1bb)])){const _0x462372=await fs['readFileAsync'](path['join'](__dirname,'..',_0x4572d5[_0x514823(0x1bf)],_0x4572d5[_0x514823(0x200)]),_0x4572d5[_0x514823(0x1c1)]),_0xa6a05f={};_0xa6a05f['schema']=CLOUDFORMATION_SCHEMA;const _0x15f36f=yaml[_0x514823(0x19b)](_0x462372,_0xa6a05f);_0x4572d5[_0x514823(0x1dc)](mergeTemplates,_0x5d4455,_0x15f36f),_0x5d4455[_0x514823(0x1ef)]['EKSCluster'][_0x514823(0x199)][_0x514823(0x19d)](_0x4572d5[_0x514823(0x1ee)],_0x4572d5[_0x514823(0x15d)],_0x4572d5[_0x514823(0x1a8)]);const _0xa29027={};_0xa29027[_0x514823(0x183)]=_0x4572d5[_0x514823(0x1ee)];const _0x183fd0={};_0x183fd0[_0x514823(0x183)]=_0x4572d5['FcBLv'];const _0x465bf2={};_0x465bf2[_0x514823(0x183)]=_0x4572d5[_0x514823(0x1a8)],_0x5d4455[_0x514823(0x1ef)][_0x514823(0x20f)][_0x514823(0x1e5)][_0x514823(0x1d7)][_0x514823(0x16a)]=[_0xa29027,_0x183fd0,_0x465bf2],_0x5d4455[_0x514823(0x1fc)][_0x4572d5[_0x514823(0x1d2)]][_0x514823(0x196)][0x0][_0x514823(0x18a)][_0x514823(0x19d)](_0x4572d5[_0x514823(0x192)],_0x4572d5[_0x514823(0x1a1)],_0x4572d5[_0x514823(0x1da)]);const _0x404fef={};_0x404fef[_0x514823(0x183)]=_0x4572d5[_0x514823(0x1ee)];const _0x4a8230={};_0x4a8230[_0x514823(0x183)]=_0x4572d5[_0x514823(0x15d)];const _0x5730d9={};_0x5730d9[_0x514823(0x183)]=_0x4572d5[_0x514823(0x1a8)],_0x5d4455['Resources'][_0x514823(0x218)]['Properties']['Subnets']=[_0x404fef,_0x4a8230,_0x5730d9];const _0x22584a={};_0x22584a[_0x514823(0x183)]=_0x4572d5[_0x514823(0x1ee)];const _0x515a2e={};_0x515a2e[_0x514823(0x183)]=_0x4572d5[_0x514823(0x15d)];const _0xb5244e={};_0xb5244e[_0x514823(0x183)]=_0x4572d5[_0x514823(0x1a8)],_0x5d4455[_0x514823(0x1ef)]['NodeGroupWindows'][_0x514823(0x1e5)][_0x514823(0x170)]=[_0x22584a,_0x515a2e,_0xb5244e],_0x5d4455[_0x514823(0x17d)][_0x514823(0x16a)][_0x514823(0x1c9)][_0x4572d5[_0x514823(0x165)]][0x1]=[{'Ref':_0x4572d5['movPm']},{'Ref':_0x4572d5[_0x514823(0x15d)]},{'Ref':_0x4572d5[_0x514823(0x1a8)]}];}else _0x115f7d['Resources'][_0x3900c5][_0x514823(0x1e5)]&&_0x22a8f7[_0x514823(0x1ef)][_0x3aaa18][_0x514823(0x1e5)]['Tags']&&_0x2415f4[_0x514823(0x1ef)][_0x32c68b][_0x514823(0x1e5)][_0x514823(0x15f)][_0x514823(0x19d)](..._0x537f94);}},addTags=async(_0x247f99,_0x4d45a8,_0x1c0dc1)=>{const _0xd79668=a27_0x52c333,_0x11c1bc={'lpRjv':function(_0x1a6819,_0x47d212){return _0x1a6819(_0x47d212);},'zowji':function(_0x5d503b,_0x127776){return _0x5d503b===_0x127776;},'vApzD':'BlwJM','PNqjf':function(_0x673aa6,_0x36a8c1){return _0x673aa6===_0x36a8c1;},'IZvah':_0xd79668(0x154),'gUomr':function(_0x4c5147,_0x568e05){return _0x4c5147!==_0x568e05;},'IonEV':_0xd79668(0x1ce),'RJsEj':_0xd79668(0x1a0),'qCBpu':_0xd79668(0x218),'meJhF':_0xd79668(0x1d4)};for(const _0x12388f in _0x247f99[_0xd79668(0x1ef)]){_0x11c1bc[_0xd79668(0x20d)](_0x11c1bc[_0xd79668(0x215)],_0x11c1bc[_0xd79668(0x215)])?_0x247f99[_0xd79668(0x1ef)][_0x12388f]['Properties']&&_0x247f99[_0xd79668(0x1ef)][_0x12388f][_0xd79668(0x1e5)]['Tags']&&(_0x11c1bc[_0xd79668(0x1c8)](_0x11c1bc['IonEV'],_0x11c1bc[_0xd79668(0x1fd)])?_0x247f99['Resources'][_0x12388f]['Properties'][_0xd79668(0x15f)][_0xd79668(0x19d)](..._0x1c0dc1):(_0x51d041[_0xd79668(0x18a)][_0xd79668(0x19d)]({'ParameterKey':_0xd79668(0x1fb)+_0x11c1bc['lpRjv'](_0x55342b,_0x2cdf3a)[_0xd79668(0x1b5)](0x2,'0'),'ParameterValue':_0x544030[_0xd79668(0x1b2)]}),_0x56cf8e+=0x1)):_0xe0f9b5[_0x242b06][_0x1d2df7]=_0x1fe595[_0x13a051];}const _0x3d34bc={};_0x1c0dc1['forEach'](_0x11b5b6=>{const _0x27fbf1=_0xd79668;_0x11c1bc['zowji'](_0x11c1bc[_0x27fbf1(0x20e)],_0x11c1bc[_0x27fbf1(0x20e)])?_0x3d34bc[_0x11b5b6[_0x27fbf1(0x213)]]=_0x11b5b6['Value']:_0x2ff724[_0x27fbf1(0x1ef)][_0x3994dc][_0x27fbf1(0x1e5)][_0x27fbf1(0x15f)][_0x27fbf1(0x19d)](..._0x1e9cc3);}),_0x247f99[_0xd79668(0x1ef)][_0x11c1bc[_0xd79668(0x1f2)]][_0xd79668(0x1e5)][_0xd79668(0x15f)]=_0x3d34bc,_0x247f99[_0xd79668(0x1ef)][_0x11c1bc['meJhF']][_0xd79668(0x1e5)][_0xd79668(0x15f)]=_0x3d34bc;};exports['createClusterStack']=async(_0x5e9870,_0x41dcb8,_0x6e68b3,_0x290f56=null,_0x2ae9e2=null,_0x214528)=>{const _0x4e40d3=a27_0x52c333,_0x3671b4={'MKDBY':_0x4e40d3(0x16e),'qsuga':function(_0x227f17,_0x326b61){return _0x227f17(_0x326b61);},'WcNfE':_0x4e40d3(0x186),'qufqD':_0x4e40d3(0x216),'WZxIP':_0x4e40d3(0x184),'aSkHZ':_0x4e40d3(0x1de),'kdPqi':_0x4e40d3(0x1f1),'DglzI':_0x4e40d3(0x1d3),'cmXwV':function(_0x19c4cc,_0x240bce,_0xf585a2){return _0x19c4cc(_0x240bce,_0xf585a2);},'CxdGD':function(_0x152c15,_0x8f2dfe,_0x362c77,_0x4b6833){return _0x152c15(_0x8f2dfe,_0x362c77,_0x4b6833);},'PqBDW':'DELETE','qBmLI':_0x4e40d3(0x1cf),'UogDa':_0x4e40d3(0x207),'FvXFg':'NodeAutoScalingGroupMinSize','aFHpv':_0x4e40d3(0x1ca),'SeOch':_0x4e40d3(0x17a),'cmrSP':_0x4e40d3(0x1a2),'fGnPR':_0x4e40d3(0x164),'Qithk':'NodeInstanceType','Jdjku':_0x4e40d3(0x20b),'nwPla':_0x4e40d3(0x1b1),'jVVEz':_0x4e40d3(0x1ff),'Uphtc':_0x4e40d3(0x152),'ywWPX':_0x4e40d3(0x1d1),'PlaES':_0x4e40d3(0x1f6),'NboHn':function(_0x5e5498,_0xb56316){return _0x5e5498!=_0xb56316;},'mutSg':function(_0x1d9706,_0x452674){return _0x1d9706!==_0x452674;},'ukiAk':function(_0x253eb0,_0x53aac8){return _0x253eb0===_0x53aac8;},'iIdZF':_0x4e40d3(0x193),'MnXNk':function(_0x498d0a,_0x6342f6){return _0x498d0a!=_0x6342f6;},'WTNSy':function(_0x4aec0a,_0x1f560b){return _0x4aec0a!==_0x1f560b;},'vwSRo':_0x4e40d3(0x209),'WrOAd':_0x4e40d3(0x15e)},_0x49114f=COMMON_HST_TAGS,_0x2747ba={};_0x2747ba[_0x4e40d3(0x213)]=_0x3671b4['WcNfE'],_0x2747ba[_0x4e40d3(0x1c9)]=_0x5e9870,_0x49114f[_0x4e40d3(0x19d)](_0x2747ba),_0x49114f['push']({'Key':_0x3671b4[_0x4e40d3(0x161)],'Value':new Date()['valueOf']()['toString']()});const _0x56050d={};_0x56050d[_0x4e40d3(0x15a)]=_0x3671b4[_0x4e40d3(0x1f7)];const _0x3f778d=new AWS[(_0x4e40d3(0x1c6))](_0x56050d),_0x476f57=await fs[_0x4e40d3(0x17e)](path['join'](__dirname,'..',_0x3671b4[_0x4e40d3(0x212)],_0x3671b4[_0x4e40d3(0x195)]),_0x3671b4[_0x4e40d3(0x1b7)]),_0x1c18d8={};_0x1c18d8[_0x4e40d3(0x1a7)]=CLOUDFORMATION_SCHEMA;const _0x4d17a7=yaml[_0x4e40d3(0x19b)](_0x476f57,_0x1c18d8);await _0x3671b4[_0x4e40d3(0x1e0)](addVPCData,_0x4d17a7,_0x290f56),await _0x3671b4['qsuga'](addS3Data,_0x4d17a7),await _0x3671b4[_0x4e40d3(0x1e0)](addSubnetData,_0x4d17a7,_0x2ae9e2),await _0x3671b4['CxdGD'](addTags,_0x4d17a7,_0x5e9870,_0x49114f);const _0x132010=JSON['stringify'](_0x4d17a7),_0x418bcb={};_0x418bcb['StackName']=CLUSTER_DEP_STACK_NAME+'-'+_0x5e9870,_0x418bcb[_0x4e40d3(0x1ab)]=_0x3671b4[_0x4e40d3(0x1c2)],_0x418bcb[_0x4e40d3(0x1e4)]=_0x132010,_0x418bcb[_0x4e40d3(0x18a)]=[{'ParameterKey':_0x3671b4[_0x4e40d3(0x1cb)],'ParameterValue':_0x5e9870},{'ParameterKey':_0x3671b4['UogDa'],'ParameterValue':_0x5e9870+_0x4e40d3(0x185)},{'ParameterKey':_0x3671b4[_0x4e40d3(0x1ac)],'ParameterValue':''+_0x41dcb8},{'ParameterKey':_0x3671b4[_0x4e40d3(0x16f)],'ParameterValue':'0'},{'ParameterKey':_0x3671b4[_0x4e40d3(0x1e1)],'ParameterValue':'1'},{'ParameterKey':_0x3671b4[_0x4e40d3(0x1fa)],'ParameterValue':''+_0x6e68b3},{'ParameterKey':_0x3671b4[_0x4e40d3(0x189)],'ParameterValue':global_registry[_0x4e40d3(0x1a3)]},{'ParameterKey':_0x3671b4[_0x4e40d3(0x1e3)],'ParameterValue':global_registry[_0x4e40d3(0x1e9)]},{'ParameterKey':_0x3671b4['Jdjku'],'ParameterValue':global_registry['s3Bucket']},{'ParameterKey':_0x3671b4['nwPla'],'ParameterValue':_0x5e9870+_0x4e40d3(0x217)},{'ParameterKey':_0x3671b4[_0x4e40d3(0x182)],'ParameterValue':_0x214528?_0x3671b4[_0x4e40d3(0x204)]:_0x3671b4['ywWPX']}],_0x418bcb[_0x4e40d3(0x1f0)]=[_0x3671b4[_0x4e40d3(0x19f)]],_0x418bcb[_0x4e40d3(0x15f)]=_0x49114f;const _0x5a2e4a=_0x418bcb;if(_0x3671b4[_0x4e40d3(0x18d)](_0x290f56,null)&&_0x3671b4[_0x4e40d3(0x155)](_0x290f56,undefined)){if(_0x3671b4[_0x4e40d3(0x19a)](_0x3671b4[_0x4e40d3(0x1ea)],_0x3671b4['iIdZF'])){const _0x14b8de={};_0x14b8de[_0x4e40d3(0x201)]=_0x3671b4[_0x4e40d3(0x18b)],_0x14b8de[_0x4e40d3(0x211)]=_0x290f56,_0x5a2e4a[_0x4e40d3(0x18a)][_0x4e40d3(0x19d)](_0x14b8de);}else{const _0x57db1e={};_0x57db1e['ParameterKey']=_0x3671b4['MKDBY'],_0x57db1e[_0x4e40d3(0x211)]=_0x5c5967,_0x5c925f[_0x4e40d3(0x18a)]['push'](_0x57db1e);}}if(_0x3671b4[_0x4e40d3(0x156)](_0x2ae9e2,null)&&_0x3671b4['WTNSy'](_0x2ae9e2,undefined)){let _0x331623=0x1;_0x2ae9e2[_0x4e40d3(0x1a4)](_0x571abc=>{const _0x99ee07=_0x4e40d3;_0x5a2e4a[_0x99ee07(0x18a)][_0x99ee07(0x19d)]({'ParameterKey':'Subnet'+_0x3671b4[_0x99ee07(0x1f5)](String,_0x331623)[_0x99ee07(0x1b5)](0x2,'0'),'ParameterValue':_0x571abc['value']}),_0x331623+=0x1;});}const _0x513ff9=await _0x3f778d[_0x4e40d3(0x1b4)](_0x5a2e4a)[_0x4e40d3(0x1eb)]();logger[_0x4e40d3(0x206)](_0x3671b4[_0x4e40d3(0x153)]);const _0x208d12={};return _0x208d12[_0x4e40d3(0x188)]=_0x513ff9[_0x4e40d3(0x1d9)],_0x3f778d[_0x4e40d3(0x157)](_0x3671b4[_0x4e40d3(0x203)],_0x208d12)['promise']();};