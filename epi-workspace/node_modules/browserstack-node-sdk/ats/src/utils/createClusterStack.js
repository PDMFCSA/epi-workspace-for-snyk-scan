const a27_0xc7e7b=a27_0x24ab;(function(_0x48ad31,_0x30d7f5){const _0x143bcb=a27_0x24ab,_0x11a56a=_0x48ad31();while(!![]){try{const _0x12bca5=-parseInt(_0x143bcb(0x1e0))/0x1+parseInt(_0x143bcb(0x223))/0x2*(parseInt(_0x143bcb(0x21d))/0x3)+-parseInt(_0x143bcb(0x18b))/0x4*(parseInt(_0x143bcb(0x1d9))/0x5)+parseInt(_0x143bcb(0x205))/0x6*(-parseInt(_0x143bcb(0x1b6))/0x7)+parseInt(_0x143bcb(0x172))/0x8+parseInt(_0x143bcb(0x186))/0x9*(-parseInt(_0x143bcb(0x174))/0xa)+parseInt(_0x143bcb(0x19e))/0xb*(parseInt(_0x143bcb(0x167))/0xc);if(_0x12bca5===_0x30d7f5)break;else _0x11a56a['push'](_0x11a56a['shift']());}catch(_0x2a34ca){_0x11a56a['push'](_0x11a56a['shift']());}}}(a27_0x7e63,0xba842));const fs=require('fs'),path=require(a27_0xc7e7b(0x1ef)),Promise=require(a27_0xc7e7b(0x199)),yaml=require(a27_0xc7e7b(0x17b)),{CLOUDFORMATION_SCHEMA}=require(a27_0xc7e7b(0x203)),AWS=require('./AWSUtils')[a27_0xc7e7b(0x194)],{CLUSTER_DEP_STACK_NAME,COMMON_HST_TAGS,global_registry}=require(a27_0xc7e7b(0x212)),{logger}=require('../config/logger'),{isBucketPresent}=require(a27_0xc7e7b(0x168));Promise[a27_0xc7e7b(0x179)](fs);const mergeTemplates=(_0x33e603,_0x160a0e)=>{const _0x42ccb8=a27_0xc7e7b,_0x371f8c={'iMWRL':function(_0x17a1f6,_0x4c5c56){return _0x17a1f6!==_0x4c5c56;},'EfWMj':_0x42ccb8(0x17f),'zTrmC':'cRMgV','MJhmh':function(_0x742a39,_0x587bb6){return _0x742a39(_0x587bb6);},'GbFtd':function(_0x438ad0,_0x5e30a1){return _0x438ad0!==_0x5e30a1;},'TLwia':'SNvnD','RWVBj':'GjvYZ'};Object[_0x42ccb8(0x1a6)](_0x160a0e)[_0x42ccb8(0x188)](_0x282add=>{const _0x41971e=_0x42ccb8,_0x15e7d2={'FZKqn':function(_0x3fc85f,_0x413824){const _0x384be9=a27_0x24ab;return _0x371f8c[_0x384be9(0x1c2)](_0x3fc85f,_0x413824);},'ChHFB':_0x371f8c[_0x41971e(0x1a0)],'RhWiT':_0x371f8c[_0x41971e(0x1f1)],'HYiys':function(_0x1538bf,_0x55a042){return _0x371f8c['MJhmh'](_0x1538bf,_0x55a042);}};if(_0x371f8c[_0x41971e(0x215)](_0x371f8c[_0x41971e(0x221)],_0x371f8c[_0x41971e(0x1ea)])){var _0xb3ed6c=_0x160a0e[_0x282add];Object['keys'](_0xb3ed6c)[_0x41971e(0x188)](_0x4c3402=>{const _0x49d632=_0x41971e;_0x15e7d2['FZKqn'](_0x15e7d2[_0x49d632(0x1ee)],_0x15e7d2[_0x49d632(0x175)])?_0x33e603[_0x282add][_0x4c3402]=_0xb3ed6c[_0x4c3402]:_0x355268[_0x42d8d2['Key']]=_0x4f3e7a[_0x49d632(0x18d)];});}else{let _0x322cdf=0x1;_0x55d94e[_0x41971e(0x188)](_0x14e579=>{const _0x193b4e=_0x41971e;_0x44e370[_0x193b4e(0x170)][_0x193b4e(0x1af)]({'ParameterKey':_0x193b4e(0x1a4)+_0x15e7d2['HYiys'](_0x1e09b4,_0x322cdf)['padStart'](0x2,'0'),'ParameterValue':_0x14e579[_0x193b4e(0x1f3)]}),_0x322cdf+=0x1;});}});},addVPCData=async(_0xf03fa3,_0x421849)=>{const _0x51240a=a27_0xc7e7b,_0x51474f={'eWLOj':'NodeGroup','YpPFz':'NodeGroupWindows','buZSJ':function(_0x4d659c,_0x30da81){return _0x4d659c===_0x30da81;},'cheiH':_0x51240a(0x182),'bpvtl':_0x51240a(0x216),'uoQdt':_0x51240a(0x1cf),'zBZXI':_0x51240a(0x208),'aLijt':function(_0x271596,_0x10f025,_0x3ba4c1){return _0x271596(_0x10f025,_0x3ba4c1);},'WoaHe':_0x51240a(0x200),'wBfiz':'VPC','XobdV':function(_0x2494b1,_0x262563){return _0x2494b1!==_0x262563;},'bkANz':'KHdKe','EHBwg':_0x51240a(0x1b3),'hNLiT':_0x51240a(0x1c6),'VOjxs':function(_0x212ed5,_0x15c198,_0x30a8c1){return _0x212ed5(_0x15c198,_0x30a8c1);},'hcbcZ':_0x51240a(0x163)};if(_0x421849){if(_0x51474f[_0x51240a(0x1a1)](_0x51474f[_0x51240a(0x207)],_0x51474f[_0x51240a(0x207)])){const _0x345fb2=await fs[_0x51240a(0x173)](path[_0x51240a(0x1d5)](__dirname,'..',_0x51474f[_0x51240a(0x1d1)],_0x51474f[_0x51240a(0x1f4)]),_0x51474f[_0x51240a(0x225)]),_0x323323={};_0x323323[_0x51240a(0x222)]=CLOUDFORMATION_SCHEMA;const _0x291d73=yaml['load'](_0x345fb2,_0x323323);_0x51474f[_0x51240a(0x16a)](mergeTemplates,_0xf03fa3,_0x291d73),_0xf03fa3[_0x51240a(0x193)][_0x51474f[_0x51240a(0x21c)]]['ParameterGroups'][0x0][_0x51240a(0x170)][_0x51240a(0x1af)](_0x51474f[_0x51240a(0x1e3)]);}else{for(const _0x2182d1 in _0x3f0fb7[_0x51240a(0x1ae)]){_0x35ee10[_0x51240a(0x1ae)][_0x2182d1][_0x51240a(0x1fc)]&&_0x350d88['Resources'][_0x2182d1][_0x51240a(0x1fc)][_0x51240a(0x171)]&&_0x25b0c2[_0x51240a(0x1ae)][_0x2182d1][_0x51240a(0x1fc)][_0x51240a(0x171)][_0x51240a(0x1af)](..._0x340e21);}const _0x13ab1a={};_0x5b0d1c[_0x51240a(0x188)](_0x3a5609=>{const _0x4f5539=_0x51240a;_0x13ab1a[_0x3a5609[_0x4f5539(0x16b)]]=_0x3a5609[_0x4f5539(0x18d)];}),_0x5c2fd2[_0x51240a(0x1ae)][_0x51474f['eWLOj']][_0x51240a(0x1fc)][_0x51240a(0x171)]=_0x13ab1a,_0x20e6cb[_0x51240a(0x1ae)][_0x51474f[_0x51240a(0x1f0)]][_0x51240a(0x1fc)][_0x51240a(0x171)]=_0x13ab1a;}}else{if(_0x51474f[_0x51240a(0x224)](_0x51474f[_0x51240a(0x1a7)],_0x51474f[_0x51240a(0x16e)])){const _0x5bbf04=await fs['readFileAsync'](path[_0x51240a(0x1d5)](__dirname,'..',_0x51474f[_0x51240a(0x1d1)],_0x51474f[_0x51240a(0x19b)]),_0x51474f[_0x51240a(0x225)]),_0x54bc32={};_0x54bc32['schema']=CLOUDFORMATION_SCHEMA;const _0x18b374=yaml[_0x51240a(0x1fd)](_0x5bbf04,_0x54bc32);_0x51474f[_0x51240a(0x177)](mergeTemplates,_0xf03fa3,_0x18b374),_0xf03fa3[_0x51240a(0x193)][_0x51474f['WoaHe']][_0x51240a(0x20c)][0x0][_0x51240a(0x170)][_0x51240a(0x1af)](_0x51474f[_0x51240a(0x1e8)]);}else{var _0x42ebfa=_0x47d1f9[_0x1adea7];_0x21b493[_0x51240a(0x1a6)](_0x42ebfa)[_0x51240a(0x188)](_0x30c896=>{_0x5266a1[_0x43d012][_0x30c896]=_0x42ebfa[_0x30c896];});}}},addS3Data=async _0x309862=>{const _0x57f54d=a27_0xc7e7b,_0x277e5d={'orPbs':_0x57f54d(0x216),'qdZIN':'s3-create.yaml','iqUDx':_0x57f54d(0x208),'UNbVE':function(_0x1904c5,_0x28fc0c){return _0x1904c5(_0x28fc0c);},'nBXso':function(_0x40282a,_0x527590){return _0x40282a===_0x527590;},'uNwwm':function(_0x5c4814,_0x221290){return _0x5c4814!==_0x221290;},'tmfIR':'kvbSb','mSEhb':function(_0x23d9e6,_0x56b21b,_0x9dfaf4){return _0x23d9e6(_0x56b21b,_0x9dfaf4);}},_0xf1b46=await fs['readFileAsync'](path['join'](__dirname,'..',_0x277e5d[_0x57f54d(0x1eb)],_0x277e5d[_0x57f54d(0x166)]),_0x277e5d[_0x57f54d(0x1e4)]),_0x2be0c1={};_0x2be0c1[_0x57f54d(0x222)]=CLOUDFORMATION_SCHEMA;const _0x1032ca=yaml[_0x57f54d(0x1fd)](_0xf1b46,_0x2be0c1),_0x1cb76b=await _0x277e5d[_0x57f54d(0x1c9)](isBucketPresent,global_registry[_0x57f54d(0x202)]);_0x277e5d[_0x57f54d(0x1ab)](_0x1cb76b,![])&&(_0x277e5d[_0x57f54d(0x1b5)](_0x277e5d['tmfIR'],_0x277e5d[_0x57f54d(0x21b)])?_0x37bd60[_0x57f54d(0x1ae)][_0x5d0494][_0x57f54d(0x1fc)][_0x57f54d(0x171)]['push'](..._0x47dbbb):_0x277e5d['mSEhb'](mergeTemplates,_0x309862,_0x1032ca));},addSubnetData=async(_0x39a1d5,_0x88482a)=>{const _0x9d06ed=a27_0xc7e7b,_0x451b3c={'qAiNv':function(_0x4bfda2,_0x1c8191,_0x29a186){return _0x4bfda2(_0x1c8191,_0x29a186);},'aYMZM':function(_0x2208da,_0x521930){return _0x2208da(_0x521930);},'vgFpu':function(_0x2337c7,_0x5b92e0){return _0x2337c7===_0x5b92e0;},'QOvCB':_0x9d06ed(0x191),'PZJQb':_0x9d06ed(0x1b0),'myvKG':_0x9d06ed(0x1f6),'aVrAV':function(_0x3eb7d0,_0x4c47f5){return _0x3eb7d0(_0x4c47f5);},'fuobR':_0x9d06ed(0x200),'MimXV':function(_0x2f6698,_0x53e092){return _0x2f6698(_0x53e092);},'qYHwj':function(_0x44a0bf,_0xd97481){return _0x44a0bf!==_0xd97481;},'Eqsch':_0x9d06ed(0x1a3),'fgauE':_0x9d06ed(0x216),'TqmeQ':_0x9d06ed(0x20a),'kQQVB':'utf-8','TZpWR':function(_0x441766,_0x431caf,_0x16c4b7){return _0x441766(_0x431caf,_0x16c4b7);},'ONNlc':_0x9d06ed(0x201),'BugIX':_0x9d06ed(0x190),'diDPc':function(_0x34c929,_0x1dde0d,_0xcdb902){return _0x34c929(_0x1dde0d,_0xcdb902);},'jVIGu':_0x9d06ed(0x183),'CQpaN':_0x9d06ed(0x21a),'lLCAy':_0x9d06ed(0x210),'NIFaO':'Subnet01Block','mjNTK':_0x9d06ed(0x226),'kIBFR':_0x9d06ed(0x1ca)};if(_0x88482a){if(_0x451b3c[_0x9d06ed(0x17c)](_0x451b3c['Eqsch'],_0x451b3c[_0x9d06ed(0x195)]))_0x451b3c[_0x9d06ed(0x164)](_0x352297,_0x52c5b9,_0xe668ea);else{const _0x3b9357=await fs['readFileAsync'](path['join'](__dirname,'..',_0x451b3c['fgauE'],_0x451b3c['TqmeQ']),_0x451b3c[_0x9d06ed(0x19c)]),_0x3419fc={};_0x3419fc[_0x9d06ed(0x222)]=CLOUDFORMATION_SCHEMA;const _0x449c32=yaml[_0x9d06ed(0x1fd)](_0x3b9357,_0x3419fc);_0x451b3c[_0x9d06ed(0x1e1)](mergeTemplates,_0x39a1d5,_0x449c32);let _0x50b41b=0x1;_0x88482a[_0x9d06ed(0x188)](_0x44f361=>{const _0x13ac98=_0x9d06ed,_0x1c3526={'aHhHu':function(_0x3526c9,_0xd0fe0e){const _0x5ee85d=a27_0x24ab;return _0x451b3c[_0x5ee85d(0x17e)](_0x3526c9,_0xd0fe0e);}};if(_0x451b3c[_0x13ac98(0x1de)](_0x451b3c[_0x13ac98(0x21e)],_0x451b3c[_0x13ac98(0x21e)])){const _0x335124=_0x451b3c[_0x13ac98(0x1ad)]['split']('|');let _0xfe5797=0x0;while(!![]){switch(_0x335124[_0xfe5797++]){case'0':_0x39a1d5[_0x13ac98(0x1ae)][_0x13ac98(0x180)][_0x13ac98(0x1fc)][_0x13ac98(0x1b9)][_0x13ac98(0x1af)]({'Ref':_0x13ac98(0x1a4)+_0x451b3c[_0x13ac98(0x17e)](String,_0x50b41b)[_0x13ac98(0x211)](0x2,'0')});continue;case'1':_0x39a1d5[_0x13ac98(0x1ae)][_0x13ac98(0x196)][_0x13ac98(0x1fc)][_0x13ac98(0x1b9)][_0x13ac98(0x1af)]({'Ref':_0x13ac98(0x1a4)+_0x451b3c[_0x13ac98(0x17e)](String,_0x50b41b)['padStart'](0x2,'0')});continue;case'2':_0x39a1d5[_0x13ac98(0x16f)]['SubnetIds'][_0x13ac98(0x18d)][_0x451b3c['myvKG']][0x1][_0x13ac98(0x1af)]({'Ref':_0x13ac98(0x1a4)+_0x451b3c[_0x13ac98(0x17e)](String,_0x50b41b)['padStart'](0x2,'0')});continue;case'3':_0x50b41b+=0x1;continue;case'4':_0x39a1d5[_0x13ac98(0x1ae)][_0x13ac98(0x16c)][_0x13ac98(0x1fc)]['ResourcesVpcConfig'][_0x13ac98(0x1dc)]['push']({'Ref':'Subnet'+_0x451b3c[_0x13ac98(0x220)](String,_0x50b41b)[_0x13ac98(0x211)](0x2,'0')});continue;case'5':_0x39a1d5[_0x13ac98(0x193)][_0x451b3c['fuobR']][_0x13ac98(0x20c)][0x0]['Parameters']['push'](_0x13ac98(0x1a4)+_0x451b3c['MimXV'](String,_0x50b41b)['padStart'](0x2,'0'));continue;}break;}}else _0x3f4e0c[_0x13ac98(0x170)][_0x13ac98(0x1af)]({'ParameterKey':'Subnet'+_0x1c3526[_0x13ac98(0x1b7)](_0x233944,_0x3005fb)[_0x13ac98(0x211)](0x2,'0'),'ParameterValue':_0x3bff47[_0x13ac98(0x1f3)]}),_0xae24db+=0x1;});}}else{if(_0x451b3c['qYHwj'](_0x451b3c[_0x9d06ed(0x1a9)],_0x451b3c[_0x9d06ed(0x1a9)]))_0xe9d7b3[_0x9d06ed(0x1a6)](_0x48219a)['forEach'](_0xb3dce0=>{const _0x16d883=_0x9d06ed;var _0x593cef=_0x24734b[_0xb3dce0];_0x2261f2[_0x16d883(0x1a6)](_0x593cef)[_0x16d883(0x188)](_0x1bba23=>{_0x12bfbc[_0xb3dce0][_0x1bba23]=_0x593cef[_0x1bba23];});});else{const _0x5d3157=await fs[_0x9d06ed(0x173)](path[_0x9d06ed(0x1d5)](__dirname,'..',_0x451b3c['fgauE'],_0x451b3c[_0x9d06ed(0x17d)]),_0x451b3c[_0x9d06ed(0x19c)]),_0x184742={};_0x184742[_0x9d06ed(0x222)]=CLOUDFORMATION_SCHEMA;const _0x3d85a3=yaml['load'](_0x5d3157,_0x184742);_0x451b3c[_0x9d06ed(0x1f8)](mergeTemplates,_0x39a1d5,_0x3d85a3),_0x39a1d5['Resources']['EKSCluster'][_0x9d06ed(0x227)][_0x9d06ed(0x1af)](_0x451b3c[_0x9d06ed(0x218)],_0x451b3c[_0x9d06ed(0x1c8)],_0x451b3c[_0x9d06ed(0x1f2)]);const _0x612ffe={};_0x612ffe[_0x9d06ed(0x187)]=_0x451b3c['jVIGu'];const _0x5b4f42={};_0x5b4f42[_0x9d06ed(0x187)]=_0x451b3c[_0x9d06ed(0x1c8)];const _0x3b8f5e={};_0x3b8f5e['Ref']=_0x451b3c[_0x9d06ed(0x1f2)],_0x39a1d5['Resources'][_0x9d06ed(0x16c)][_0x9d06ed(0x1fc)]['ResourcesVpcConfig']['SubnetIds']=[_0x612ffe,_0x5b4f42,_0x3b8f5e],_0x39a1d5[_0x9d06ed(0x193)][_0x451b3c['fuobR']][_0x9d06ed(0x20c)][0x0][_0x9d06ed(0x170)][_0x9d06ed(0x1af)](_0x451b3c[_0x9d06ed(0x184)],_0x451b3c[_0x9d06ed(0x18f)],_0x451b3c['kIBFR']);const _0x3b06e5={};_0x3b06e5[_0x9d06ed(0x187)]=_0x451b3c['jVIGu'];const _0xff9205={};_0xff9205['Ref']=_0x451b3c[_0x9d06ed(0x1c8)];const _0x27888a={};_0x27888a[_0x9d06ed(0x187)]=_0x451b3c['lLCAy'],_0x39a1d5[_0x9d06ed(0x1ae)][_0x9d06ed(0x196)]['Properties'][_0x9d06ed(0x1b9)]=[_0x3b06e5,_0xff9205,_0x27888a];const _0x47ea55={};_0x47ea55[_0x9d06ed(0x187)]=_0x451b3c['jVIGu'];const _0x1dc7c4={};_0x1dc7c4[_0x9d06ed(0x187)]=_0x451b3c[_0x9d06ed(0x1c8)];const _0x505f2d={};_0x505f2d[_0x9d06ed(0x187)]=_0x451b3c[_0x9d06ed(0x1f2)],_0x39a1d5['Resources'][_0x9d06ed(0x180)][_0x9d06ed(0x1fc)][_0x9d06ed(0x1b9)]=[_0x47ea55,_0x1dc7c4,_0x505f2d],_0x39a1d5[_0x9d06ed(0x16f)]['SubnetIds'][_0x9d06ed(0x18d)][_0x451b3c[_0x9d06ed(0x1e2)]][0x1]=[{'Ref':_0x451b3c[_0x9d06ed(0x218)]},{'Ref':_0x451b3c[_0x9d06ed(0x1c8)]},{'Ref':_0x451b3c['lLCAy']}];}}},addTags=async(_0x467fe5,_0x20542b,_0x20d6a9)=>{const _0x3a8637=a27_0xc7e7b,_0x1823ee={'ZJfTP':'VPC','EiUKz':'2|3|0|1|5|4','eSHRO':function(_0x35813d,_0xa3c3dd){return _0x35813d(_0xa3c3dd);},'ZhOtl':function(_0x225ff9,_0x50b080){return _0x225ff9(_0x50b080);},'LRkqP':'AWS::CloudFormation::Interface','yENbK':function(_0x1dddee,_0x5c6717){return _0x1dddee(_0x5c6717);},'TyqVx':'Fn::Join','koEuS':function(_0x2387d7,_0x8ac34a){return _0x2387d7(_0x8ac34a);},'OrLXe':function(_0x431bb1,_0xeffaee){return _0x431bb1!==_0xeffaee;},'gBkPJ':_0x3a8637(0x20e),'JjDIG':function(_0xc45d92,_0xab712e){return _0xc45d92===_0xab712e;},'xzAuC':'RoDmG','flQTe':function(_0x366de9,_0x33667a){return _0x366de9===_0x33667a;},'WLvER':_0x3a8637(0x1cd),'FgKNp':_0x3a8637(0x1dd),'SihWP':_0x3a8637(0x196),'ttACD':_0x3a8637(0x180)};for(const _0x4e20d9 in _0x467fe5[_0x3a8637(0x1ae)]){if(_0x1823ee['JjDIG'](_0x1823ee[_0x3a8637(0x1c7)],_0x1823ee[_0x3a8637(0x1c7)])){if(_0x467fe5['Resources'][_0x4e20d9]['Properties']&&_0x467fe5[_0x3a8637(0x1ae)][_0x4e20d9]['Properties']['Tags']){if(_0x1823ee[_0x3a8637(0x1d3)](_0x1823ee[_0x3a8637(0x1ba)],_0x1823ee['FgKNp'])){const _0x153be5={};_0x153be5[_0x3a8637(0x1a5)]=_0x1823ee[_0x3a8637(0x213)],_0x153be5['ParameterValue']=_0xba2a3,_0x36d072[_0x3a8637(0x170)][_0x3a8637(0x1af)](_0x153be5);}else _0x467fe5[_0x3a8637(0x1ae)][_0x4e20d9]['Properties'][_0x3a8637(0x171)][_0x3a8637(0x1af)](..._0x20d6a9);}}else _0x48c2f6[_0x3a8637(0x1ae)][_0x2d8152][_0x3a8637(0x1fc)]&&_0x5db6da[_0x3a8637(0x1ae)][_0x1ca139][_0x3a8637(0x1fc)][_0x3a8637(0x171)]&&_0x6f6d0a[_0x3a8637(0x1ae)][_0x487b72][_0x3a8637(0x1fc)]['Tags'][_0x3a8637(0x1af)](..._0x5c34d3);}const _0x1bbe4d={};_0x20d6a9[_0x3a8637(0x188)](_0x501c0b=>{const _0x5463d1=_0x3a8637,_0x3553e0={'KAwJj':_0x1823ee['EiUKz'],'CRupI':function(_0x101d45,_0x530bcc){const _0x432fbb=a27_0x24ab;return _0x1823ee[_0x432fbb(0x20d)](_0x101d45,_0x530bcc);},'SYjsP':function(_0x5ebb18,_0x27ab5e){const _0x1efb13=a27_0x24ab;return _0x1823ee[_0x1efb13(0x1be)](_0x5ebb18,_0x27ab5e);},'dVHSX':_0x1823ee[_0x5463d1(0x1fe)],'zuQMN':function(_0x18adcb,_0xabb080){const _0x73b364=_0x5463d1;return _0x1823ee[_0x73b364(0x1f5)](_0x18adcb,_0xabb080);},'FLDJb':_0x1823ee[_0x5463d1(0x162)],'mKeUM':function(_0x1120fb,_0x54b411){return _0x1823ee['koEuS'](_0x1120fb,_0x54b411);}};if(_0x1823ee[_0x5463d1(0x1e7)](_0x1823ee[_0x5463d1(0x1aa)],_0x1823ee[_0x5463d1(0x1aa)])){const _0x2f0418=_0x3553e0['KAwJj'][_0x5463d1(0x1b4)]('|');let _0xc10966=0x0;while(!![]){switch(_0x2f0418[_0xc10966++]){case'0':_0x58fbc4[_0x5463d1(0x1ae)][_0x5463d1(0x196)][_0x5463d1(0x1fc)][_0x5463d1(0x1b9)]['push']({'Ref':_0x5463d1(0x1a4)+_0x3553e0['CRupI'](_0x58272f,_0x52d93a)[_0x5463d1(0x211)](0x2,'0')});continue;case'1':_0x158ddb[_0x5463d1(0x1ae)][_0x5463d1(0x180)][_0x5463d1(0x1fc)][_0x5463d1(0x1b9)]['push']({'Ref':'Subnet'+_0x3553e0[_0x5463d1(0x1c0)](_0x41fd3f,_0x56d674)['padStart'](0x2,'0')});continue;case'2':_0x1b6f22[_0x5463d1(0x1ae)][_0x5463d1(0x16c)]['Properties'][_0x5463d1(0x1cc)][_0x5463d1(0x1dc)][_0x5463d1(0x1af)]({'Ref':_0x5463d1(0x1a4)+_0x3553e0[_0x5463d1(0x1c0)](_0x40928f,_0x3c78c1)['padStart'](0x2,'0')});continue;case'3':_0x19dbec[_0x5463d1(0x193)][_0x3553e0[_0x5463d1(0x1db)]][_0x5463d1(0x20c)][0x0]['Parameters'][_0x5463d1(0x1af)]('Subnet'+_0x3553e0[_0x5463d1(0x1d2)](_0x2649c0,_0xddee44)[_0x5463d1(0x211)](0x2,'0'));continue;case'4':_0x113472+=0x1;continue;case'5':_0x4c0d75[_0x5463d1(0x16f)][_0x5463d1(0x1dc)][_0x5463d1(0x18d)][_0x3553e0[_0x5463d1(0x19f)]][0x1]['push']({'Ref':_0x5463d1(0x1a4)+_0x3553e0['mKeUM'](_0x4463cb,_0x5324a5)[_0x5463d1(0x211)](0x2,'0')});continue;}break;}}else _0x1bbe4d[_0x501c0b[_0x5463d1(0x16b)]]=_0x501c0b[_0x5463d1(0x18d)];}),_0x467fe5['Resources'][_0x1823ee[_0x3a8637(0x1b2)]][_0x3a8637(0x1fc)][_0x3a8637(0x171)]=_0x1bbe4d,_0x467fe5[_0x3a8637(0x1ae)][_0x1823ee['ttACD']][_0x3a8637(0x1fc)][_0x3a8637(0x171)]=_0x1bbe4d;};function a27_0x24ab(_0x3df983,_0x49cda1){const _0x7e63a4=a27_0x7e63();return a27_0x24ab=function(_0x24abe2,_0x301136){_0x24abe2=_0x24abe2-0x162;let _0x3becd7=_0x7e63a4[_0x24abe2];return _0x3becd7;},a27_0x24ab(_0x3df983,_0x49cda1);}function a27_0x7e63(){const _0x4f4083=['debug','aVrAV','TLwia','schema','202QtSWLw','XobdV','zBZXI','Subnet02Block','DependsOn','TyqVx','VpcBlock','qAiNv','NodeImageId','qdZIN','398760NPITtb','./AWSUtils','WVJsd','aLijt','Key','EKSCluster','NodeAutoScalingGroupMinSizeWindows','EHBwg','Outputs','Parameters','Tags','9771208bmNuDt','readFileAsync','40NoNyRw','RhWiT','xpmQm','VOjxs','ejPFk','promisifyAll','zaZHE','js-yaml','qYHwj','BugIX','aYMZM','lnvvr','NodeGroupWindows','stackCreateComplete','dslGN','Subnet01','NIFaO','DELETE','3047481LUgRli','Ref','forEach','Yifzy','ClusterName','196636ZHLKlX','MHnbw','Value','Bnoma','mjNTK','subnet-create.yaml','TuBVM','oWDRg','Metadata','awsObj','Eqsch','NodeGroup','NodeAutoScalingGroupMinSize','NodeGroupNameWindows','bluebird','createStack','hNLiT','kQQVB','TIrSg','1265YzLVrg','FLDJb','EfWMj','buZSJ','CloudFormation','YstKf','Subnet','ParameterKey','keys','bkANz','apiVersion','ONNlc','gBkPJ','nBXso','browserstack:cluster','PZJQb','Resources','push','4|5|1|0|2|3','SLsMm','SihWP','XBBsk','split','uNwwm','21rcteLu','aHhHu','true','Subnets','WLvER','IGMjd','uXyoA','2010-05-15','ZhOtl','NodeInstanceType','SYjsP','S3BucketName','iMWRL','BKKkR','aws-eks-cluster-dep.yaml','fANHK','vpc-create.yaml','xzAuC','CQpaN','UNbVE','Subnet03Block','ClusterAutoUpgrade','ResourcesVpcConfig','UlwRK','ParameterValue','vpc-import.yaml','LZdty','bpvtl','zuQMN','flQTe','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','join','instanceType','gDoQJ','OgEYS','135tPUgVY','TemplateBody','dVHSX','SubnetIds','nFVWu','vgFpu','NodeAutoScalingGroupDesiredSizeWindows','1256238lESCqP','TZpWR','myvKG','wBfiz','iqUDx','uIGSj','tgBMo','OrLXe','hcbcZ','promise','RWVBj','orPbs','saoyM','NYcuC','ChHFB','path','YpPFz','zTrmC','lLCAy','value','uoQdt','yENbK','Fn::Join','bvlhN','diDPc','OnFailure','gNZoc','VPC','Properties','load','LRkqP','false','AWS::CloudFormation::Interface','oqzDM','s3Bucket','js-yaml-cloudformation-schema','suFgX','2342874uznplt','NodeGroupName','cheiH','utf-8','KJdls','subnet-import.yaml','PKBOy','ParameterGroups','eSHRO','cEgfT','StackName','Subnet03','padStart','../config/constants','ZJfTP','-NodeGroup','GbFtd','CFTemplates','CAPABILITY_NAMED_IAM','jVIGu','waitFor','Subnet02','tmfIR','WoaHe','24669mHUHuJ','QOvCB'];a27_0x7e63=function(){return _0x4f4083;};return a27_0x7e63();}exports['createClusterStack']=async(_0x40a7f0,_0x9b7db2,_0x18557d,_0x42e04=null,_0x4ddf92=null,_0x2fb96a)=>{const _0x524135=a27_0xc7e7b,_0x307c5f={'BKKkR':function(_0x354cee,_0x2a0125){return _0x354cee(_0x2a0125);},'QOgqL':_0x524135(0x1ac),'xpmQm':'browserstack:creationDate','zaZHE':_0x524135(0x1bd),'tgBMo':_0x524135(0x216),'uIGSj':_0x524135(0x1c4),'OgEYS':_0x524135(0x208),'Bnoma':function(_0x38ed46,_0x33b6ea,_0x2fa89d){return _0x38ed46(_0x33b6ea,_0x2fa89d);},'ejPFk':function(_0x165b87,_0x40572d){return _0x165b87(_0x40572d);},'IGMjd':function(_0x403562,_0x3aef61,_0x854d9e){return _0x403562(_0x3aef61,_0x854d9e);},'DojfZ':function(_0x3b1608,_0x9c8c0e,_0x22645c,_0x3a350d){return _0x3b1608(_0x9c8c0e,_0x22645c,_0x3a350d);},'BKmOL':_0x524135(0x185),'uXyoA':_0x524135(0x18a),'lwjrZ':_0x524135(0x206),'YBcmB':_0x524135(0x197),'saoyM':_0x524135(0x16d),'WVJsd':_0x524135(0x1df),'MHnbw':'NodeAutoScalingGroupMaxSize','valmv':_0x524135(0x165),'oWDRg':_0x524135(0x1bf),'fANHK':_0x524135(0x1c1),'SLsMm':_0x524135(0x198),'gDoQJ':_0x524135(0x1cb),'TIrSg':_0x524135(0x1b8),'mwMAJ':_0x524135(0x1ff),'Yifzy':_0x524135(0x217),'NYcuC':function(_0x199895,_0xe9c29b){return _0x199895!=_0xe9c29b;},'PKBOy':function(_0x3d58d8,_0x19242a){return _0x3d58d8!==_0x19242a;},'SCsmB':function(_0x22fa7c,_0x2ee400){return _0x22fa7c===_0x2ee400;},'KJdls':'GHpMC','LZdty':_0x524135(0x1f7),'gNZoc':_0x524135(0x1fb),'suFgX':_0x524135(0x1d4),'vFgvZ':_0x524135(0x181)},_0x360190=COMMON_HST_TAGS,_0x1b4a76={};_0x1b4a76[_0x524135(0x16b)]=_0x307c5f['QOgqL'],_0x1b4a76[_0x524135(0x18d)]=_0x40a7f0,_0x360190[_0x524135(0x1af)](_0x1b4a76),_0x360190[_0x524135(0x1af)]({'Key':_0x307c5f[_0x524135(0x176)],'Value':new Date()['valueOf']()['toString']()});const _0x59623a={};_0x59623a[_0x524135(0x1a8)]=_0x307c5f[_0x524135(0x17a)];const _0x3f3275=new AWS[(_0x524135(0x1a2))](_0x59623a),_0x273654=await fs[_0x524135(0x173)](path[_0x524135(0x1d5)](__dirname,'..',_0x307c5f[_0x524135(0x1e6)],_0x307c5f[_0x524135(0x1e5)]),_0x307c5f[_0x524135(0x1d8)]),_0x53a9ab={};_0x53a9ab[_0x524135(0x222)]=CLOUDFORMATION_SCHEMA;const _0x254168=yaml[_0x524135(0x1fd)](_0x273654,_0x53a9ab);await _0x307c5f[_0x524135(0x18e)](addVPCData,_0x254168,_0x42e04),await _0x307c5f[_0x524135(0x178)](addS3Data,_0x254168),await _0x307c5f[_0x524135(0x1bb)](addSubnetData,_0x254168,_0x4ddf92),await _0x307c5f['DojfZ'](addTags,_0x254168,_0x40a7f0,_0x360190);const _0x1a075e=JSON['stringify'](_0x254168),_0x4cdec6={};_0x4cdec6[_0x524135(0x20f)]=CLUSTER_DEP_STACK_NAME+'-'+_0x40a7f0,_0x4cdec6[_0x524135(0x1f9)]=_0x307c5f['BKmOL'],_0x4cdec6[_0x524135(0x1da)]=_0x1a075e,_0x4cdec6[_0x524135(0x170)]=[{'ParameterKey':_0x307c5f[_0x524135(0x1bc)],'ParameterValue':_0x40a7f0},{'ParameterKey':_0x307c5f['lwjrZ'],'ParameterValue':_0x40a7f0+_0x524135(0x214)},{'ParameterKey':_0x307c5f['YBcmB'],'ParameterValue':''+_0x9b7db2},{'ParameterKey':_0x307c5f[_0x524135(0x1ec)],'ParameterValue':'0'},{'ParameterKey':_0x307c5f[_0x524135(0x169)],'ParameterValue':'1'},{'ParameterKey':_0x307c5f[_0x524135(0x18c)],'ParameterValue':''+_0x18557d},{'ParameterKey':_0x307c5f['valmv'],'ParameterValue':global_registry['ami']},{'ParameterKey':_0x307c5f[_0x524135(0x192)],'ParameterValue':global_registry[_0x524135(0x1d6)]},{'ParameterKey':_0x307c5f[_0x524135(0x1c5)],'ParameterValue':global_registry[_0x524135(0x202)]},{'ParameterKey':_0x307c5f[_0x524135(0x1b1)],'ParameterValue':_0x40a7f0+'-Windows-NodeGroup'},{'ParameterKey':_0x307c5f[_0x524135(0x1d7)],'ParameterValue':_0x2fb96a?_0x307c5f[_0x524135(0x19d)]:_0x307c5f['mwMAJ']}],_0x4cdec6['Capabilities']=[_0x307c5f[_0x524135(0x189)]],_0x4cdec6[_0x524135(0x171)]=_0x360190;const _0x308c9b=_0x4cdec6;if(_0x307c5f[_0x524135(0x1ed)](_0x42e04,null)&&_0x307c5f[_0x524135(0x20b)](_0x42e04,undefined)){if(_0x307c5f['SCsmB'](_0x307c5f[_0x524135(0x209)],_0x307c5f[_0x524135(0x1d0)]))_0x3f50ae[_0x115e80][_0x136ee5]=_0xe687c9[_0x142923];else{const _0x161e23={};_0x161e23['ParameterKey']=_0x307c5f[_0x524135(0x1fa)],_0x161e23[_0x524135(0x1ce)]=_0x42e04,_0x308c9b[_0x524135(0x170)][_0x524135(0x1af)](_0x161e23);}}if(_0x307c5f[_0x524135(0x1ed)](_0x4ddf92,null)&&_0x307c5f[_0x524135(0x20b)](_0x4ddf92,undefined)){let _0x1a4f79=0x1;_0x4ddf92['forEach'](_0x3adbbe=>{const _0xe80f46=_0x524135;_0x308c9b[_0xe80f46(0x170)][_0xe80f46(0x1af)]({'ParameterKey':'Subnet'+_0x307c5f[_0xe80f46(0x1c3)](String,_0x1a4f79)['padStart'](0x2,'0'),'ParameterValue':_0x3adbbe['value']}),_0x1a4f79+=0x1;});}const _0x322628=await _0x3f3275[_0x524135(0x19a)](_0x308c9b)['promise']();logger[_0x524135(0x21f)](_0x307c5f[_0x524135(0x204)]);const _0xdc353f={};return _0xdc353f[_0x524135(0x20f)]=_0x322628['StackId'],_0x3f3275[_0x524135(0x219)](_0x307c5f['vFgvZ'],_0xdc353f)[_0x524135(0x1e9)]();};