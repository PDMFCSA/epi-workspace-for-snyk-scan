const a28_0x4761bd=a28_0x43f1;(function(_0x104791,_0x5b3860){const _0x10f482=a28_0x43f1,_0x18eaea=_0x104791();while(!![]){try{const _0x38aa18=-parseInt(_0x10f482(0x1d2))/0x1*(parseInt(_0x10f482(0x1f3))/0x2)+parseInt(_0x10f482(0x1cb))/0x3*(parseInt(_0x10f482(0x1c0))/0x4)+parseInt(_0x10f482(0x1eb))/0x5+-parseInt(_0x10f482(0x1c1))/0x6*(parseInt(_0x10f482(0x1d7))/0x7)+-parseInt(_0x10f482(0x1d0))/0x8+parseInt(_0x10f482(0x1bf))/0x9*(parseInt(_0x10f482(0x1f6))/0xa)+parseInt(_0x10f482(0x1dd))/0xb*(parseInt(_0x10f482(0x1c7))/0xc);if(_0x38aa18===_0x5b3860)break;else _0x18eaea['push'](_0x18eaea['shift']());}catch(_0x44fd17){_0x18eaea['push'](_0x18eaea['shift']());}}}(a28_0xb93c,0xed847));const fs=require('fs'),path=require(a28_0x4761bd(0x1f4)),Promise=require(a28_0x4761bd(0x1be)),yaml=require(a28_0x4761bd(0x1ec)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),AWS=require(a28_0x4761bd(0x1df))[a28_0x4761bd(0x1ef)],AWSUtils=require(a28_0x4761bd(0x1df)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x4761bd(0x1f8)),{logger}=require(a28_0x4761bd(0x1f5));Promise[a28_0x4761bd(0x1f9)](fs);function a28_0x43f1(_0x165fc5,_0x532660){const _0xb93cda=a28_0xb93c();return a28_0x43f1=function(_0x43f1be,_0x156e37){_0x43f1be=_0x43f1be-0x1be;let _0x4675d0=_0xb93cda[_0x43f1be];return _0x4675d0;},a28_0x43f1(_0x165fc5,_0x532660);}const addTags=async(_0x25afcc,_0xc20431)=>{const _0x48f89f=a28_0x4761bd;for(const _0x68f47c in _0x25afcc['Resources']){_0x25afcc[_0x48f89f(0x1dc)][_0x68f47c][_0x48f89f(0x1d9)]&&_0x25afcc[_0x48f89f(0x1dc)][_0x68f47c][_0x48f89f(0x1d9)][_0x48f89f(0x1f0)]&&_0x25afcc[_0x48f89f(0x1dc)][_0x68f47c][_0x48f89f(0x1d9)][_0x48f89f(0x1f0)][_0x48f89f(0x1e9)](..._0xc20431);}};exports['createHubHaStack']=async(_0x374195,_0x5a8b47=null)=>{const _0x21543c=a28_0x4761bd,_0x36b6fd={'vxGPY':_0x21543c(0x1ca),'AFLSG':_0x21543c(0x1c8),'IbRFx':'2010-05-15','Jtoss':_0x21543c(0x1de),'PUmAx':'hub-ha.yaml','LjDBF':_0x21543c(0x1ed),'qWjXJ':function(_0x34d4f2,_0x2ca45e,_0x18eb70){return _0x34d4f2(_0x2ca45e,_0x18eb70);},'DmWgS':_0x21543c(0x1e7),'gSTEq':'DELETE','UjzpV':'VpcId','wtqaI':_0x21543c(0x1e8),'XJttO':'ClusterOIDCURL','bZUQt':_0x21543c(0x1cc),'ZsSFO':'Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','WZePr':_0x21543c(0x1fa)},_0x30edd1=COMMON_HST_TAGS,_0x4179e2={};_0x4179e2[_0x21543c(0x1d3)]=_0x36b6fd[_0x21543c(0x1ee)],_0x4179e2[_0x21543c(0x1ce)]=_0x374195,_0x30edd1['push'](_0x4179e2),_0x30edd1[_0x21543c(0x1e9)]({'Key':_0x36b6fd['AFLSG'],'Value':new Date()[_0x21543c(0x1da)]()['toString']()});const _0x389817={};_0x389817[_0x21543c(0x1cd)]=_0x36b6fd[_0x21543c(0x1f2)];const _0x2e0ca9=new AWS[(_0x21543c(0x1c9))](_0x389817),_0x3f1db6=await fs['readFileAsync'](path[_0x21543c(0x1e2)](__dirname,'..',_0x36b6fd[_0x21543c(0x1c6)],_0x36b6fd[_0x21543c(0x1cf)]),_0x36b6fd[_0x21543c(0x1d5)]),_0xf33458={};_0xf33458['schema']=CLOUDFORMATION_SCHEMA;const _0x3ae87e=yaml['load'](_0x3f1db6,_0xf33458);await _0x36b6fd[_0x21543c(0x1c2)](addTags,_0x3ae87e,_0x30edd1);const _0x446c44=JSON[_0x21543c(0x1e4)](_0x3ae87e);let _0x5ebe2f=await AWSUtils[_0x21543c(0x1d4)](_0x374195);_0x5ebe2f=_0x5ebe2f[_0x21543c(0x1e3)](_0x36b6fd[_0x21543c(0x1c5)])[0x1];const _0x4c5382={};_0x4c5382[_0x21543c(0x1d1)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x374195+_0x21543c(0x1c3),_0x4c5382['OnFailure']=_0x36b6fd[_0x21543c(0x1d8)],_0x4c5382[_0x21543c(0x1f1)]=_0x446c44,_0x4c5382[_0x21543c(0x1c4)]=[{'ParameterKey':_0x36b6fd[_0x21543c(0x1e5)],'ParameterValue':_0x5a8b47},{'ParameterKey':_0x36b6fd[_0x21543c(0x1e1)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x374195},{'ParameterKey':_0x36b6fd[_0x21543c(0x1d6)],'ParameterValue':_0x5ebe2f}],_0x4c5382[_0x21543c(0x1ea)]=[_0x36b6fd[_0x21543c(0x1e6)]],_0x4c5382[_0x21543c(0x1f0)]=_0x30edd1;const _0x4031ac=_0x4c5382,_0x3ce077=await _0x2e0ca9[_0x21543c(0x1f7)](_0x4031ac)['promise']();logger['info'](_0x36b6fd[_0x21543c(0x1db)]);const _0x3579f3={};return _0x3579f3[_0x21543c(0x1d1)]=_0x3ce077['StackId'],_0x2e0ca9[_0x21543c(0x1e0)](_0x36b6fd['WZePr'],_0x3579f3)['promise']();};function a28_0xb93c(){const _0x56f311=['7284TQZXAS','CAPABILITY_NAMED_IAM','apiVersion','Value','PUmAx','3859608odoRMm','StackName','1fKKCHP','Key','getOidcUrl','LjDBF','XJttO','102151FPjcyq','gSTEq','Properties','valueOf','ZsSFO','Resources','2057CavnKw','CFTemplates','./AWSUtils','waitFor','wtqaI','join','split','stringify','UjzpV','bZUQt','://','BaseResourceName','push','Capabilities','5029085uiZBkB','js-yaml','utf-8','vxGPY','awsObj','Tags','TemplateBody','IbRFx','3639234BSqHJx','path','../config/logger','1237010MLwWjP','createStack','../config/constants','promisifyAll','stackCreateComplete','bluebird','117pBxqTJ','644tCsMpI','258NwdZuP','qWjXJ','-cf','Parameters','DmWgS','Jtoss','57600mIOHLC','browserstack:creationDate','CloudFormation','browserstack:cluster'];a28_0xb93c=function(){return _0x56f311;};return a28_0xb93c();}