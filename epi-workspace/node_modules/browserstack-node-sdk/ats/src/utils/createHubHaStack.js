const a28_0x4a4892=a28_0x29f3;(function(_0x51fcbb,_0x24dc5b){const _0x355c7d=a28_0x29f3,_0x140aaf=_0x51fcbb();while(!![]){try{const _0x269afe=-parseInt(_0x355c7d(0x13b))/0x1*(-parseInt(_0x355c7d(0x146))/0x2)+parseInt(_0x355c7d(0x16b))/0x3*(-parseInt(_0x355c7d(0x144))/0x4)+parseInt(_0x355c7d(0x136))/0x5+-parseInt(_0x355c7d(0x16d))/0x6+-parseInt(_0x355c7d(0x13e))/0x7+parseInt(_0x355c7d(0x175))/0x8+parseInt(_0x355c7d(0x139))/0x9;if(_0x269afe===_0x24dc5b)break;else _0x140aaf['push'](_0x140aaf['shift']());}catch(_0x45d6fd){_0x140aaf['push'](_0x140aaf['shift']());}}}(a28_0x4925,0xca14e));function a28_0x29f3(_0x1a8451,_0x3768bf){const _0x4925dd=a28_0x4925();return a28_0x29f3=function(_0x29f3b0,_0x14371d){_0x29f3b0=_0x29f3b0-0x134;let _0x318feb=_0x4925dd[_0x29f3b0];return _0x318feb;},a28_0x29f3(_0x1a8451,_0x3768bf);}const fs=require('fs'),path=require(a28_0x4a4892(0x156)),Promise=require('bluebird'),yaml=require(a28_0x4a4892(0x15d)),{CLOUDFORMATION_SCHEMA}=require(a28_0x4a4892(0x135)),AWS=require(a28_0x4a4892(0x13c))[a28_0x4a4892(0x14f)],AWSUtils=require(a28_0x4a4892(0x13c)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x4a4892(0x148)),{logger}=require(a28_0x4a4892(0x176));Promise[a28_0x4a4892(0x152)](fs);function a28_0x4925(){const _0x162b71=['-cf','zlWXZ','StackName','84376pNtmUX','apiVersion','2nwuAwb','join','../config/constants','Tags','createHubHaStack','load','toString','2010-05-15','Properties','awsObj','CqnCu','Key','promisifyAll','schema','ZPUYr','split','path','CFTemplates','Parameters','promise','pnvkS','browserstack:creationDate','readFileAsync','js-yaml','JwoQt','getOidcUrl','Resources','Capabilities','Value','CBzga','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','BaseResourceName','info','CloudFormation','CAPABILITY_NAMED_IAM','VpcId','stringify','150vSatPp','StackId','7431984JsIvSv','stackCreateComplete','browserstack:cluster','utf-8','xQZFg','waitFor','valueOf','YRzAZ','6780440EdcqUY','../config/logger','TemplateBody','push','js-yaml-cloudformation-schema','2038620yiNTPB','mrvGq','Vhgxb','21382362tpsESo','DELETE','150705lZnpXU','./AWSUtils','yhpSE','4624984FNkHpv','ClusterOIDCURL','oDzIK'];a28_0x4925=function(){return _0x162b71;};return a28_0x4925();}const addTags=async(_0x451c96,_0x16fafa)=>{const _0x5a5b1a=a28_0x4a4892;for(const _0x4cf987 in _0x451c96[_0x5a5b1a(0x160)]){_0x451c96['Resources'][_0x4cf987]['Properties']&&_0x451c96[_0x5a5b1a(0x160)][_0x4cf987][_0x5a5b1a(0x14e)]['Tags']&&_0x451c96['Resources'][_0x4cf987][_0x5a5b1a(0x14e)][_0x5a5b1a(0x149)][_0x5a5b1a(0x134)](..._0x16fafa);}};exports[a28_0x4a4892(0x14a)]=async(_0x1e26aa,_0x19971f=null)=>{const _0x52d7a2=a28_0x4a4892,_0x33c1ce={'YRzAZ':_0x52d7a2(0x16f),'CBzga':_0x52d7a2(0x15b),'ZPUYr':_0x52d7a2(0x14d),'cDkMx':_0x52d7a2(0x157),'CqnCu':'hub-ha.yaml','mrvGq':_0x52d7a2(0x170),'Vhgxb':function(_0x5008a3,_0x32f363,_0x155347){return _0x5008a3(_0x32f363,_0x155347);},'pnvkS':'://','zlWXZ':_0x52d7a2(0x13a),'oDzIK':_0x52d7a2(0x169),'xoSOL':_0x52d7a2(0x165),'xQZFg':_0x52d7a2(0x13f),'vwiPF':_0x52d7a2(0x168),'yhpSE':_0x52d7a2(0x164),'JwoQt':_0x52d7a2(0x16e)},_0xda380a=COMMON_HST_TAGS,_0x18260e={};_0x18260e[_0x52d7a2(0x151)]=_0x33c1ce[_0x52d7a2(0x174)],_0x18260e[_0x52d7a2(0x162)]=_0x1e26aa,_0xda380a[_0x52d7a2(0x134)](_0x18260e),_0xda380a['push']({'Key':_0x33c1ce[_0x52d7a2(0x163)],'Value':new Date()[_0x52d7a2(0x173)]()[_0x52d7a2(0x14c)]()});const _0x256fd4={};_0x256fd4[_0x52d7a2(0x145)]=_0x33c1ce[_0x52d7a2(0x154)];const _0x18d157=new AWS[(_0x52d7a2(0x167))](_0x256fd4),_0x2f438d=await fs[_0x52d7a2(0x15c)](path[_0x52d7a2(0x147)](__dirname,'..',_0x33c1ce['cDkMx'],_0x33c1ce[_0x52d7a2(0x150)]),_0x33c1ce[_0x52d7a2(0x137)]),_0x52a0d5={};_0x52a0d5[_0x52d7a2(0x153)]=CLOUDFORMATION_SCHEMA;const _0x373213=yaml[_0x52d7a2(0x14b)](_0x2f438d,_0x52a0d5);await _0x33c1ce[_0x52d7a2(0x138)](addTags,_0x373213,_0xda380a);const _0x298b8f=JSON[_0x52d7a2(0x16a)](_0x373213);let _0x514ed2=await AWSUtils[_0x52d7a2(0x15f)](_0x1e26aa);_0x514ed2=_0x514ed2[_0x52d7a2(0x155)](_0x33c1ce[_0x52d7a2(0x15a)])[0x1];const _0x19802b={};_0x19802b[_0x52d7a2(0x143)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x1e26aa+_0x52d7a2(0x141),_0x19802b['OnFailure']=_0x33c1ce[_0x52d7a2(0x142)],_0x19802b[_0x52d7a2(0x177)]=_0x298b8f,_0x19802b[_0x52d7a2(0x158)]=[{'ParameterKey':_0x33c1ce[_0x52d7a2(0x140)],'ParameterValue':_0x19971f},{'ParameterKey':_0x33c1ce['xoSOL'],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x1e26aa},{'ParameterKey':_0x33c1ce[_0x52d7a2(0x171)],'ParameterValue':_0x514ed2}],_0x19802b[_0x52d7a2(0x161)]=[_0x33c1ce['vwiPF']],_0x19802b[_0x52d7a2(0x149)]=_0xda380a;const _0x30add8=_0x19802b,_0x55339e=await _0x18d157['createStack'](_0x30add8)[_0x52d7a2(0x159)]();logger[_0x52d7a2(0x166)](_0x33c1ce[_0x52d7a2(0x13d)]);const _0x392b85={};return _0x392b85[_0x52d7a2(0x143)]=_0x55339e[_0x52d7a2(0x16c)],_0x18d157[_0x52d7a2(0x172)](_0x33c1ce[_0x52d7a2(0x15e)],_0x392b85)[_0x52d7a2(0x159)]();};