function a28_0xd093(_0x57090d,_0x31f76b){const _0x51f6f9=a28_0x51f6();return a28_0xd093=function(_0xd09372,_0xbd7647){_0xd09372=_0xd09372-0xce;let _0x1070d6=_0x51f6f9[_0xd09372];return _0x1070d6;},a28_0xd093(_0x57090d,_0x31f76b);}const a28_0x4fea82=a28_0xd093;function a28_0x51f6(){const _0x306345=['2837176MARjCX','js-yaml-cloudformation-schema','schema','cfmFM','stackCreateComplete','js-yaml','SSBXf','toString','TemplateBody','split','load','10557657vxUyxs','9727vDfcqD','wjDyh','://','EEteN','info','waitFor','1196134mJeLFn','stringify','8644860wzQteE','Properties','push','ClusterOIDCURL','utf-8','readFileAsync','MPgHM','KaHnK','valueOf','79080ILYkRt','VyqNO','createStack','BaseResourceName','StackName','OnFailure','kclAD','mBkvL','promise','Resources','VPJgX','../config/logger','browserstack:creationDate','3GhmKEP','CAPABILITY_NAMED_IAM','3350485PnMTwd','CloudFormation','ecgYl','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','getOidcUrl','sgCdo','2010-05-15','Tags','apiVersion','hub-ha.yaml','Value','NbvAK','path','./AWSUtils','21IeXzsC','CFTemplates'];a28_0x51f6=function(){return _0x306345;};return a28_0x51f6();}(function(_0x460dc7,_0x3af053){const _0x83b279=a28_0xd093,_0x29d666=_0x460dc7();while(!![]){try{const _0x397184=-parseInt(_0x83b279(0xfb))/0x1+-parseInt(_0x83b279(0x101))/0x2*(-parseInt(_0x83b279(0xdd))/0x3)+parseInt(_0x83b279(0xd0))/0x4+-parseInt(_0x83b279(0xdf))/0x5+-parseInt(_0x83b279(0x103))/0x6+-parseInt(_0x83b279(0xed))/0x7*(-parseInt(_0x83b279(0xef))/0x8)+parseInt(_0x83b279(0xfa))/0x9;if(_0x397184===_0x3af053)break;else _0x29d666['push'](_0x29d666['shift']());}catch(_0x3e6bcb){_0x29d666['push'](_0x29d666['shift']());}}}(a28_0x51f6,0xb3409));const fs=require('fs'),path=require(a28_0x4fea82(0xeb)),Promise=require('bluebird'),yaml=require(a28_0x4fea82(0xf4)),{CLOUDFORMATION_SCHEMA}=require(a28_0x4fea82(0xf0)),AWS=require(a28_0x4fea82(0xec))['awsObj'],AWSUtils=require(a28_0x4fea82(0xec)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require(a28_0x4fea82(0xdb));Promise['promisifyAll'](fs);const addTags=async(_0x17b20f,_0x57afdc)=>{const _0x53ec54=a28_0x4fea82;for(const _0x449344 in _0x17b20f[_0x53ec54(0xd9)]){_0x17b20f[_0x53ec54(0xd9)][_0x449344][_0x53ec54(0x104)]&&_0x17b20f[_0x53ec54(0xd9)][_0x449344][_0x53ec54(0x104)][_0x53ec54(0xe6)]&&_0x17b20f['Resources'][_0x449344][_0x53ec54(0x104)][_0x53ec54(0xe6)][_0x53ec54(0x105)](..._0x57afdc);}};exports['createHubHaStack']=async(_0x3a309b,_0x5440d3=null)=>{const _0x5a40ca=a28_0x4fea82,_0x300041={'ZDtFN':'browserstack:cluster','KaHnK':_0x5a40ca(0xdc),'ecgYl':_0x5a40ca(0xe5),'SSBXf':_0x5a40ca(0xee),'fAKIA':_0x5a40ca(0xe8),'mBkvL':_0x5a40ca(0x107),'kclAD':function(_0x542b48,_0x32366c,_0x150752){return _0x542b48(_0x32366c,_0x150752);},'VyqNO':_0x5a40ca(0xfd),'sgCdo':'DELETE','cfmFM':'VpcId','wjDyh':_0x5a40ca(0xd3),'NbvAK':_0x5a40ca(0x106),'VPJgX':_0x5a40ca(0xde),'EEteN':_0x5a40ca(0xe2),'MPgHM':_0x5a40ca(0xf3)},_0x3ded77=COMMON_HST_TAGS,_0x40da25={};_0x40da25['Key']=_0x300041['ZDtFN'],_0x40da25[_0x5a40ca(0xe9)]=_0x3a309b,_0x3ded77['push'](_0x40da25),_0x3ded77[_0x5a40ca(0x105)]({'Key':_0x300041[_0x5a40ca(0xce)],'Value':new Date()[_0x5a40ca(0xcf)]()[_0x5a40ca(0xf6)]()});const _0x2c90fb={};_0x2c90fb[_0x5a40ca(0xe7)]=_0x300041[_0x5a40ca(0xe1)];const _0x42e4d5=new AWS[(_0x5a40ca(0xe0))](_0x2c90fb),_0x3f1872=await fs[_0x5a40ca(0x108)](path['join'](__dirname,'..',_0x300041[_0x5a40ca(0xf5)],_0x300041['fAKIA']),_0x300041[_0x5a40ca(0xd7)]),_0x434068={};_0x434068[_0x5a40ca(0xf1)]=CLOUDFORMATION_SCHEMA;const _0x4f92d8=yaml[_0x5a40ca(0xf9)](_0x3f1872,_0x434068);await _0x300041[_0x5a40ca(0xd6)](addTags,_0x4f92d8,_0x3ded77);const _0xed49dd=JSON[_0x5a40ca(0x102)](_0x4f92d8);let _0x371045=await AWSUtils[_0x5a40ca(0xe3)](_0x3a309b);_0x371045=_0x371045[_0x5a40ca(0xf8)](_0x300041[_0x5a40ca(0xd1)])[0x1];const _0x55995d={};_0x55995d[_0x5a40ca(0xd4)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3a309b+'-cf',_0x55995d[_0x5a40ca(0xd5)]=_0x300041[_0x5a40ca(0xe4)],_0x55995d[_0x5a40ca(0xf7)]=_0xed49dd,_0x55995d['Parameters']=[{'ParameterKey':_0x300041[_0x5a40ca(0xf2)],'ParameterValue':_0x5440d3},{'ParameterKey':_0x300041[_0x5a40ca(0xfc)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3a309b},{'ParameterKey':_0x300041[_0x5a40ca(0xea)],'ParameterValue':_0x371045}],_0x55995d['Capabilities']=[_0x300041[_0x5a40ca(0xda)]],_0x55995d['Tags']=_0x3ded77;const _0x464fd2=_0x55995d,_0x3c901f=await _0x42e4d5[_0x5a40ca(0xd2)](_0x464fd2)[_0x5a40ca(0xd8)]();logger[_0x5a40ca(0xff)](_0x300041[_0x5a40ca(0xfe)]);const _0x182a40={};return _0x182a40['StackName']=_0x3c901f['StackId'],_0x42e4d5[_0x5a40ca(0x100)](_0x300041[_0x5a40ca(0x109)],_0x182a40)[_0x5a40ca(0xd8)]();};