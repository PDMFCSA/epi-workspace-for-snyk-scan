const a28_0x25b84e=a28_0x1ddd;(function(_0x599e9c,_0x33b34f){const _0x386bce=a28_0x1ddd,_0x584b30=_0x599e9c();while(!![]){try{const _0x2e27a6=parseInt(_0x386bce(0x143))/0x1*(parseInt(_0x386bce(0x128))/0x2)+parseInt(_0x386bce(0x156))/0x3+-parseInt(_0x386bce(0x12e))/0x4*(parseInt(_0x386bce(0x14e))/0x5)+-parseInt(_0x386bce(0x135))/0x6+-parseInt(_0x386bce(0x12b))/0x7+-parseInt(_0x386bce(0x14a))/0x8*(parseInt(_0x386bce(0x120))/0x9)+parseInt(_0x386bce(0x151))/0xa;if(_0x2e27a6===_0x33b34f)break;else _0x584b30['push'](_0x584b30['shift']());}catch(_0x2a2f6e){_0x584b30['push'](_0x584b30['shift']());}}}(a28_0x295d,0x945a8));const fs=require('fs'),path=require(a28_0x25b84e(0x127)),Promise=require('bluebird'),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a28_0x25b84e(0x121)),AWS=require(a28_0x25b84e(0x129))['awsObj'],AWSUtils=require(a28_0x25b84e(0x129)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x25b84e(0x12d)),{logger}=require(a28_0x25b84e(0x12c));function a28_0x295d(){const _0x465159=['ZoduX','LtuRU','Properties','valueOf','getOidcUrl','1723122hJWYDo','js-yaml-cloudformation-schema','push','://','BaseResourceName','ilcDW','promisifyAll','path','250dNWpZH','./AWSUtils','eyxiR','6028820HzsuoP','../config/logger','../config/constants','4rniOnp','toString','Tags','babxe','apiVersion','vuhBd','CloudFormation','4284414mBybkl','IPczR','Value','promise','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','fwEiq','DELETE','StackName','stringify','2010-05-15','TemplateBody','RqQYU','CAPABILITY_NAMED_IAM','VpcId','7723GpaPbI','browserstack:cluster','browserstack:creationDate','readFileAsync','Parameters','mTSOV','utf-8','8DcFjXA','gjJHY','OnFailure','hub-ha.yaml','1792135lXSsRr','Capabilities','Resources','14001490spDJbo','stackCreateComplete','createHubHaStack','XBNyQ','schema','1102038oCViBP'];a28_0x295d=function(){return _0x465159;};return a28_0x295d();}function a28_0x1ddd(_0x282367,_0xef6c6c){const _0x295d2a=a28_0x295d();return a28_0x1ddd=function(_0x1dddc9,_0x26e852){_0x1dddc9=_0x1dddc9-0x11d;let _0x3a74a2=_0x295d2a[_0x1dddc9];return _0x3a74a2;},a28_0x1ddd(_0x282367,_0xef6c6c);}Promise[a28_0x25b84e(0x126)](fs);const addTags=async(_0x5d1025,_0x35813c)=>{const _0x25e709=a28_0x25b84e;for(const _0x50ed56 in _0x5d1025['Resources']){_0x5d1025[_0x25e709(0x150)][_0x50ed56][_0x25e709(0x11d)]&&_0x5d1025[_0x25e709(0x150)][_0x50ed56]['Properties']['Tags']&&_0x5d1025[_0x25e709(0x150)][_0x50ed56]['Properties'][_0x25e709(0x130)][_0x25e709(0x122)](..._0x35813c);}};exports[a28_0x25b84e(0x153)]=async(_0x4c3422,_0x30beb4=null)=>{const _0xec1020=a28_0x25b84e,_0x26a32e={'RQJxU':_0xec1020(0x144),'XBNyQ':_0xec1020(0x145),'gjJHY':_0xec1020(0x13e),'IPczR':'CFTemplates','ilcDW':_0xec1020(0x14d),'RqQYU':_0xec1020(0x149),'eyxiR':function(_0x12792e,_0x47dca2,_0x76dd41){return _0x12792e(_0x47dca2,_0x76dd41);},'fwEiq':_0xec1020(0x123),'mTSOV':_0xec1020(0x13b),'hBDuo':_0xec1020(0x142),'BFXUs':_0xec1020(0x124),'babxe':'ClusterOIDCURL','ZoduX':_0xec1020(0x141),'LtuRU':_0xec1020(0x139),'vuhBd':_0xec1020(0x152)},_0x5b36f8=COMMON_HST_TAGS,_0x29cb2a={};_0x29cb2a['Key']=_0x26a32e['RQJxU'],_0x29cb2a[_0xec1020(0x137)]=_0x4c3422,_0x5b36f8[_0xec1020(0x122)](_0x29cb2a),_0x5b36f8[_0xec1020(0x122)]({'Key':_0x26a32e[_0xec1020(0x154)],'Value':new Date()[_0xec1020(0x11e)]()[_0xec1020(0x12f)]()});const _0x286166={};_0x286166[_0xec1020(0x132)]=_0x26a32e[_0xec1020(0x14b)];const _0x2dfb4d=new AWS[(_0xec1020(0x134))](_0x286166),_0x3b5a04=await fs[_0xec1020(0x146)](path['join'](__dirname,'..',_0x26a32e[_0xec1020(0x136)],_0x26a32e[_0xec1020(0x125)]),_0x26a32e[_0xec1020(0x140)]),_0x285278={};_0x285278[_0xec1020(0x155)]=CLOUDFORMATION_SCHEMA;const _0x2314c0=yaml['load'](_0x3b5a04,_0x285278);await _0x26a32e[_0xec1020(0x12a)](addTags,_0x2314c0,_0x5b36f8);const _0x5b1cf5=JSON[_0xec1020(0x13d)](_0x2314c0);let _0x4bb9d3=await AWSUtils[_0xec1020(0x11f)](_0x4c3422);_0x4bb9d3=_0x4bb9d3['split'](_0x26a32e[_0xec1020(0x13a)])[0x1];const _0x110a78={};_0x110a78[_0xec1020(0x13c)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x4c3422+'-cf',_0x110a78[_0xec1020(0x14c)]=_0x26a32e[_0xec1020(0x148)],_0x110a78[_0xec1020(0x13f)]=_0x5b1cf5,_0x110a78[_0xec1020(0x147)]=[{'ParameterKey':_0x26a32e['hBDuo'],'ParameterValue':_0x30beb4},{'ParameterKey':_0x26a32e['BFXUs'],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x4c3422},{'ParameterKey':_0x26a32e[_0xec1020(0x131)],'ParameterValue':_0x4bb9d3}],_0x110a78[_0xec1020(0x14f)]=[_0x26a32e[_0xec1020(0x157)]],_0x110a78[_0xec1020(0x130)]=_0x5b36f8;const _0x1581ae=_0x110a78,_0x5c99ba=await _0x2dfb4d['createStack'](_0x1581ae)[_0xec1020(0x138)]();logger['info'](_0x26a32e[_0xec1020(0x158)]);const _0x1d544a={};return _0x1d544a[_0xec1020(0x13c)]=_0x5c99ba['StackId'],_0x2dfb4d['waitFor'](_0x26a32e[_0xec1020(0x133)],_0x1d544a)[_0xec1020(0x138)]();};