function a28_0x3c43(){const _0x11f7f3=['948950SEUTEn','-cf','toString','28rjIXnf','mUItJ','508552BUykxk','YWbOY','split','StackName','awsObj','Tags','AYEHs','browserstack:creationDate','6261654NQlXiz','CAPABILITY_NAMED_IAM','DELETE','CFTemplates','1114083fsqtAz','utf-8','DnzKM','stackCreateComplete','2010-05-15','21nUbcAs','js-yaml-cloudformation-schema','Key','glqfh','Value','apiVersion','322534Uycdst','../config/logger','IrihW','4866815ztgWBd','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','promise','://','Capabilities','MPOuk','promisifyAll','xOdmr','OnFailure','GKgVk','ojsAT','cXhWy','VpcId','./AWSUtils','4LxkVHx','push','Fxhfs','waitFor','BaseResourceName','path','ClusterOIDCURL','645490vvKAFo','TemplateBody','Properties','schema','StackId','Resources','join','valueOf','js-yaml'];a28_0x3c43=function(){return _0x11f7f3;};return a28_0x3c43();}function a28_0x1337(_0x46f9fb,_0x457393){const _0x3c436d=a28_0x3c43();return a28_0x1337=function(_0x13375a,_0x1241e6){_0x13375a=_0x13375a-0x80;let _0xd65598=_0x3c436d[_0x13375a];return _0xd65598;},a28_0x1337(_0x46f9fb,_0x457393);}const a28_0x1e9bc6=a28_0x1337;(function(_0x561423,_0x33d324){const _0xe52644=a28_0x1337,_0x5d0d5a=_0x561423();while(!![]){try{const _0x41c1e7=-parseInt(_0xe52644(0xbb))/0x1+-parseInt(_0xe52644(0xa3))/0x2*(-parseInt(_0xe52644(0x9d))/0x3)+-parseInt(_0xe52644(0xb4))/0x4*(-parseInt(_0xe52644(0xa6))/0x5)+-parseInt(_0xe52644(0x94))/0x6+parseInt(_0xe52644(0x8a))/0x7*(parseInt(_0xe52644(0x8c))/0x8)+-parseInt(_0xe52644(0x98))/0x9+parseInt(_0xe52644(0x87))/0xa;if(_0x41c1e7===_0x33d324)break;else _0x5d0d5a['push'](_0x5d0d5a['shift']());}catch(_0x512572){_0x5d0d5a['push'](_0x5d0d5a['shift']());}}}(a28_0x3c43,0x9be35));const fs=require('fs'),path=require(a28_0x1e9bc6(0xb9)),Promise=require('bluebird'),yaml=require(a28_0x1e9bc6(0x86)),{CLOUDFORMATION_SCHEMA}=require(a28_0x1e9bc6(0x9e)),AWS=require(a28_0x1e9bc6(0xb3))[a28_0x1e9bc6(0x90)],AWSUtils=require(a28_0x1e9bc6(0xb3)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require(a28_0x1e9bc6(0xa4));Promise[a28_0x1e9bc6(0xac)](fs);const addTags=async(_0x39d3a4,_0x3027cd)=>{const _0x14562f=a28_0x1e9bc6;for(const _0x33abdc in _0x39d3a4[_0x14562f(0x83)]){_0x39d3a4[_0x14562f(0x83)][_0x33abdc][_0x14562f(0x80)]&&_0x39d3a4[_0x14562f(0x83)][_0x33abdc][_0x14562f(0x80)][_0x14562f(0x91)]&&_0x39d3a4['Resources'][_0x33abdc][_0x14562f(0x80)]['Tags'][_0x14562f(0xb5)](..._0x3027cd);}};exports['createHubHaStack']=async(_0x33a307,_0x2c0a4e=null)=>{const _0xcddb0f=a28_0x1e9bc6,_0x37af18={'glqfh':'browserstack:cluster','AYEHs':_0xcddb0f(0x93),'MPOuk':_0xcddb0f(0x9c),'IrihW':_0xcddb0f(0x97),'YWbOY':'hub-ha.yaml','aQCmG':_0xcddb0f(0x99),'Fxhfs':function(_0x368ffa,_0x2734c8,_0x246e49){return _0x368ffa(_0x2734c8,_0x246e49);},'LnLQn':_0xcddb0f(0xa9),'cXhWy':_0xcddb0f(0x96),'GKgVk':_0xcddb0f(0xb2),'ojsAT':_0xcddb0f(0xb8),'oPSTg':_0xcddb0f(0xba),'xOdmr':_0xcddb0f(0x95),'DnzKM':_0xcddb0f(0xa7),'mUItJ':_0xcddb0f(0x9b)},_0x342644=COMMON_HST_TAGS,_0x1f421f={};_0x1f421f[_0xcddb0f(0x9f)]=_0x37af18[_0xcddb0f(0xa0)],_0x1f421f[_0xcddb0f(0xa1)]=_0x33a307,_0x342644[_0xcddb0f(0xb5)](_0x1f421f),_0x342644[_0xcddb0f(0xb5)]({'Key':_0x37af18[_0xcddb0f(0x92)],'Value':new Date()[_0xcddb0f(0x85)]()[_0xcddb0f(0x89)]()});const _0x9f0370={};_0x9f0370[_0xcddb0f(0xa2)]=_0x37af18[_0xcddb0f(0xab)];const _0x2fd40b=new AWS['CloudFormation'](_0x9f0370),_0x4650bc=await fs['readFileAsync'](path[_0xcddb0f(0x84)](__dirname,'..',_0x37af18[_0xcddb0f(0xa5)],_0x37af18[_0xcddb0f(0x8d)]),_0x37af18['aQCmG']),_0x1c6dc9={};_0x1c6dc9[_0xcddb0f(0x81)]=CLOUDFORMATION_SCHEMA;const _0x480f13=yaml['load'](_0x4650bc,_0x1c6dc9);await _0x37af18[_0xcddb0f(0xb6)](addTags,_0x480f13,_0x342644);const _0xbd13d6=JSON['stringify'](_0x480f13);let _0x4b2ff0=await AWSUtils['getOidcUrl'](_0x33a307);_0x4b2ff0=_0x4b2ff0[_0xcddb0f(0x8e)](_0x37af18['LnLQn'])[0x1];const _0x47ec64={};_0x47ec64[_0xcddb0f(0x8f)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x33a307+_0xcddb0f(0x88),_0x47ec64[_0xcddb0f(0xae)]=_0x37af18[_0xcddb0f(0xb1)],_0x47ec64[_0xcddb0f(0xbc)]=_0xbd13d6,_0x47ec64['Parameters']=[{'ParameterKey':_0x37af18[_0xcddb0f(0xaf)],'ParameterValue':_0x2c0a4e},{'ParameterKey':_0x37af18[_0xcddb0f(0xb0)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x33a307},{'ParameterKey':_0x37af18['oPSTg'],'ParameterValue':_0x4b2ff0}],_0x47ec64[_0xcddb0f(0xaa)]=[_0x37af18[_0xcddb0f(0xad)]],_0x47ec64[_0xcddb0f(0x91)]=_0x342644;const _0x536564=_0x47ec64,_0x16bc3e=await _0x2fd40b['createStack'](_0x536564)[_0xcddb0f(0xa8)]();logger['info'](_0x37af18[_0xcddb0f(0x9a)]);const _0x2bcbeb={};return _0x2bcbeb[_0xcddb0f(0x8f)]=_0x16bc3e[_0xcddb0f(0x82)],_0x2fd40b[_0xcddb0f(0xb7)](_0x37af18[_0xcddb0f(0x8b)],_0x2bcbeb)['promise']();};