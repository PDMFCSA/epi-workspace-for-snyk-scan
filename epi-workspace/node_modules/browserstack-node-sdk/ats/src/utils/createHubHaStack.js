const a28_0x49fad0=a28_0x5585;(function(_0x5d1611,_0x20d505){const _0x4fa84c=a28_0x5585,_0x48da1a=_0x5d1611();while(!![]){try{const _0x53b798=-parseInt(_0x4fa84c(0x219))/0x1+-parseInt(_0x4fa84c(0x1fb))/0x2*(-parseInt(_0x4fa84c(0x1da))/0x3)+-parseInt(_0x4fa84c(0x1f7))/0x4*(-parseInt(_0x4fa84c(0x1f5))/0x5)+-parseInt(_0x4fa84c(0x1eb))/0x6+parseInt(_0x4fa84c(0x1ef))/0x7*(-parseInt(_0x4fa84c(0x20c))/0x8)+-parseInt(_0x4fa84c(0x20e))/0x9+parseInt(_0x4fa84c(0x200))/0xa;if(_0x53b798===_0x20d505)break;else _0x48da1a['push'](_0x48da1a['shift']());}catch(_0x3e74db){_0x48da1a['push'](_0x48da1a['shift']());}}}(a28_0x5969,0x9a3db));function a28_0x5585(_0x137038,_0x303cf8){const _0x596971=a28_0x5969();return a28_0x5585=function(_0x558547,_0x4c2cf8){_0x558547=_0x558547-0x1da;let _0x278ac1=_0x596971[_0x558547];return _0x278ac1;},a28_0x5585(_0x137038,_0x303cf8);}const fs=require('fs'),path=require(a28_0x49fad0(0x1f9)),Promise=require(a28_0x49fad0(0x208)),yaml=require(a28_0x49fad0(0x1fd)),{CLOUDFORMATION_SCHEMA}=require(a28_0x49fad0(0x210)),AWS=require(a28_0x49fad0(0x1db))[a28_0x49fad0(0x207)],AWSUtils=require('./AWSUtils'),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x49fad0(0x1e4)),{logger}=require(a28_0x49fad0(0x218));Promise[a28_0x49fad0(0x20b)](fs);const addTags=async(_0x209d9f,_0x1686b3)=>{const _0x5606f3=a28_0x49fad0;for(const _0x564a70 in _0x209d9f[_0x5606f3(0x1f0)]){_0x209d9f[_0x5606f3(0x1f0)][_0x564a70][_0x5606f3(0x211)]&&_0x209d9f['Resources'][_0x564a70]['Properties'][_0x5606f3(0x205)]&&_0x209d9f[_0x5606f3(0x1f0)][_0x564a70]['Properties'][_0x5606f3(0x205)][_0x5606f3(0x201)](..._0x1686b3);}};exports['createHubHaStack']=async(_0x44ea42,_0xd3b6b1=null)=>{const _0x137931=a28_0x49fad0,_0x126fac={'bucLQ':_0x137931(0x203),'TMgYy':'browserstack:creationDate','CWcgE':'2010-05-15','pdSor':_0x137931(0x1f1),'jLmWX':'hub-ha.yaml','AKfTq':_0x137931(0x1fa),'VkgbR':function(_0x1a1a20,_0x59c317,_0x33363f){return _0x1a1a20(_0x59c317,_0x33363f);},'YImVa':_0x137931(0x1ed),'wueMy':_0x137931(0x206),'xuvbf':_0x137931(0x1e1),'rGEpW':_0x137931(0x1ff),'JQsuN':_0x137931(0x1e2),'dprGx':_0x137931(0x21b),'NFTWi':_0x137931(0x20f),'rANqu':_0x137931(0x217)},_0x2f4011=COMMON_HST_TAGS,_0x145616={};_0x145616['Key']=_0x126fac[_0x137931(0x214)],_0x145616[_0x137931(0x1e9)]=_0x44ea42,_0x2f4011[_0x137931(0x201)](_0x145616),_0x2f4011[_0x137931(0x201)]({'Key':_0x126fac[_0x137931(0x215)],'Value':new Date()['valueOf']()[_0x137931(0x1fe)]()});const _0x5186ed={};_0x5186ed[_0x137931(0x1de)]=_0x126fac[_0x137931(0x1ee)];const _0x25a269=new AWS[(_0x137931(0x1ec))](_0x5186ed),_0x2996d2=await fs[_0x137931(0x1fc)](path[_0x137931(0x1e5)](__dirname,'..',_0x126fac[_0x137931(0x21a)],_0x126fac[_0x137931(0x1e3)]),_0x126fac[_0x137931(0x1e6)]),_0x16543d={};_0x16543d['schema']=CLOUDFORMATION_SCHEMA;const _0x4957f8=yaml['load'](_0x2996d2,_0x16543d);await _0x126fac[_0x137931(0x216)](addTags,_0x4957f8,_0x2f4011);const _0x20a81d=JSON[_0x137931(0x212)](_0x4957f8);let _0x3770cc=await AWSUtils['getOidcUrl'](_0x44ea42);_0x3770cc=_0x3770cc['split'](_0x126fac[_0x137931(0x1f8)])[0x1];const _0x4f2b66={};_0x4f2b66['StackName']=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x44ea42+_0x137931(0x1f3),_0x4f2b66[_0x137931(0x213)]=_0x126fac[_0x137931(0x1e8)],_0x4f2b66[_0x137931(0x1e0)]=_0x20a81d,_0x4f2b66[_0x137931(0x1df)]=[{'ParameterKey':_0x126fac[_0x137931(0x1f6)],'ParameterValue':_0xd3b6b1},{'ParameterKey':_0x126fac[_0x137931(0x1f4)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x44ea42},{'ParameterKey':_0x126fac[_0x137931(0x204)],'ParameterValue':_0x3770cc}],_0x4f2b66[_0x137931(0x1dc)]=[_0x126fac['dprGx']],_0x4f2b66['Tags']=_0x2f4011;const _0x312f14=_0x4f2b66,_0x10ad8e=await _0x25a269[_0x137931(0x20d)](_0x312f14)['promise']();logger[_0x137931(0x209)](_0x126fac[_0x137931(0x202)]);const _0x365d58={};return _0x365d58[_0x137931(0x1ea)]=_0x10ad8e[_0x137931(0x20a)],_0x25a269[_0x137931(0x1f2)](_0x126fac[_0x137931(0x1e7)],_0x365d58)[_0x137931(0x1dd)]();};function a28_0x5969(){const _0x3047d2=['561869QSdIJG','Resources','CFTemplates','waitFor','-cf','rGEpW','38355ZsqQTa','xuvbf','436SUWpHN','YImVa','path','utf-8','939454HzmtKc','readFileAsync','js-yaml','toString','BaseResourceName','14119470CKEPvY','push','NFTWi','browserstack:cluster','JQsuN','Tags','DELETE','awsObj','bluebird','info','StackId','promisifyAll','16VkTRhe','createStack','41733XptFdd','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','js-yaml-cloudformation-schema','Properties','stringify','OnFailure','bucLQ','TMgYy','VkgbR','stackCreateComplete','../config/logger','820027MDenjK','pdSor','CAPABILITY_NAMED_IAM','3DOfXAR','./AWSUtils','Capabilities','promise','apiVersion','Parameters','TemplateBody','VpcId','ClusterOIDCURL','jLmWX','../config/constants','join','AKfTq','rANqu','wueMy','Value','StackName','6605064GWnVWF','CloudFormation','://','CWcgE'];a28_0x5969=function(){return _0x3047d2;};return a28_0x5969();}