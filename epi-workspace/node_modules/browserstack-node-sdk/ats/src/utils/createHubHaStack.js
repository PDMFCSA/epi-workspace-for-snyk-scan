const a28_0x2679f7=a28_0x34e1;(function(_0x2b9469,_0x3da27e){const _0x5b9002=a28_0x34e1,_0x29df2b=_0x2b9469();while(!![]){try{const _0x179952=-parseInt(_0x5b9002(0x1fd))/0x1*(parseInt(_0x5b9002(0x1e9))/0x2)+parseInt(_0x5b9002(0x1d9))/0x3*(-parseInt(_0x5b9002(0x20c))/0x4)+-parseInt(_0x5b9002(0x20e))/0x5+-parseInt(_0x5b9002(0x1d8))/0x6*(parseInt(_0x5b9002(0x1ef))/0x7)+parseInt(_0x5b9002(0x1f0))/0x8+-parseInt(_0x5b9002(0x209))/0x9+parseInt(_0x5b9002(0x1e8))/0xa;if(_0x179952===_0x3da27e)break;else _0x29df2b['push'](_0x29df2b['shift']());}catch(_0x47085d){_0x29df2b['push'](_0x29df2b['shift']());}}}(a28_0x3666,0x9c855));const fs=require('fs'),path=require(a28_0x2679f7(0x202)),Promise=require(a28_0x2679f7(0x1dd)),yaml=require(a28_0x2679f7(0x1f3)),{CLOUDFORMATION_SCHEMA}=require(a28_0x2679f7(0x204)),AWS=require('./AWSUtils')[a28_0x2679f7(0x201)],AWSUtils=require(a28_0x2679f7(0x1f6)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x2679f7(0x1db)),{logger}=require(a28_0x2679f7(0x1e3));Promise[a28_0x2679f7(0x20b)](fs);const addTags=async(_0x4ff1ba,_0xb880d2)=>{const _0xd300e5=a28_0x2679f7;for(const _0x2d78b8 in _0x4ff1ba['Resources']){_0x4ff1ba['Resources'][_0x2d78b8]['Properties']&&_0x4ff1ba[_0xd300e5(0x1ec)][_0x2d78b8][_0xd300e5(0x1d7)][_0xd300e5(0x1f7)]&&_0x4ff1ba[_0xd300e5(0x1ec)][_0x2d78b8][_0xd300e5(0x1d7)][_0xd300e5(0x1f7)][_0xd300e5(0x210)](..._0xb880d2);}};exports[a28_0x2679f7(0x212)]=async(_0x516d30,_0x53488d=null)=>{const _0x9149a7=a28_0x2679f7,_0x684f9a={'dtuKl':_0x9149a7(0x1e6),'BQqbJ':_0x9149a7(0x1eb),'cdVqT':_0x9149a7(0x1f1),'baVYj':'CFTemplates','inArb':_0x9149a7(0x1f4),'sslwV':'utf-8','XoIjM':function(_0x315144,_0xd3592c,_0x18ffce){return _0x315144(_0xd3592c,_0x18ffce);},'bNTRr':'://','TdTRc':'DELETE','aabsh':_0x9149a7(0x20a),'wXjis':'BaseResourceName','AouwY':_0x9149a7(0x1e0),'hXdTW':_0x9149a7(0x1d6),'ELnwG':_0x9149a7(0x206),'XIAoq':'stackCreateComplete'},_0x1818cb=COMMON_HST_TAGS,_0x3ac053={};_0x3ac053[_0x9149a7(0x1df)]=_0x684f9a['dtuKl'],_0x3ac053[_0x9149a7(0x20f)]=_0x516d30,_0x1818cb[_0x9149a7(0x210)](_0x3ac053),_0x1818cb[_0x9149a7(0x210)]({'Key':_0x684f9a[_0x9149a7(0x1da)],'Value':new Date()[_0x9149a7(0x1de)]()[_0x9149a7(0x1ff)]()});const _0x55ca92={};_0x55ca92[_0x9149a7(0x1f5)]=_0x684f9a[_0x9149a7(0x1f9)];const _0x3c4438=new AWS[(_0x9149a7(0x205))](_0x55ca92),_0x10e8ea=await fs['readFileAsync'](path[_0x9149a7(0x203)](__dirname,'..',_0x684f9a[_0x9149a7(0x1f8)],_0x684f9a[_0x9149a7(0x1e7)]),_0x684f9a[_0x9149a7(0x200)]),_0x2571d3={};_0x2571d3[_0x9149a7(0x1e5)]=CLOUDFORMATION_SCHEMA;const _0x52bf1c=yaml[_0x9149a7(0x1ed)](_0x10e8ea,_0x2571d3);await _0x684f9a['XoIjM'](addTags,_0x52bf1c,_0x1818cb);const _0x392dd3=JSON[_0x9149a7(0x1ee)](_0x52bf1c);let _0xa04d7a=await AWSUtils[_0x9149a7(0x1fe)](_0x516d30);_0xa04d7a=_0xa04d7a[_0x9149a7(0x20d)](_0x684f9a['bNTRr'])[0x1];const _0x2862f1={};_0x2862f1['StackName']=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x516d30+_0x9149a7(0x1e2),_0x2862f1[_0x9149a7(0x207)]=_0x684f9a['TdTRc'],_0x2862f1[_0x9149a7(0x1ea)]=_0x392dd3,_0x2862f1['Parameters']=[{'ParameterKey':_0x684f9a[_0x9149a7(0x1fb)],'ParameterValue':_0x53488d},{'ParameterKey':_0x684f9a[_0x9149a7(0x211)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x516d30},{'ParameterKey':_0x684f9a['AouwY'],'ParameterValue':_0xa04d7a}],_0x2862f1[_0x9149a7(0x1e4)]=[_0x684f9a[_0x9149a7(0x1fc)]],_0x2862f1[_0x9149a7(0x1f7)]=_0x1818cb;const _0x4b561a=_0x2862f1,_0x4ec869=await _0x3c4438['createStack'](_0x4b561a)[_0x9149a7(0x1f2)]();logger['info'](_0x684f9a[_0x9149a7(0x208)]);const _0x966c9d={};return _0x966c9d['StackName']=_0x4ec869[_0x9149a7(0x1e1)],_0x3c4438[_0x9149a7(0x1dc)](_0x684f9a[_0x9149a7(0x1fa)],_0x966c9d)[_0x9149a7(0x1f2)]();};function a28_0x34e1(_0x23b4e8,_0x5c7cd0){const _0x3666c4=a28_0x3666();return a28_0x34e1=function(_0x34e112,_0x453b47){_0x34e112=_0x34e112-0x1d6;let _0x34b7f4=_0x3666c4[_0x34e112];return _0x34b7f4;},a28_0x34e1(_0x23b4e8,_0x5c7cd0);}function a28_0x3666(){const _0x4ebfe4=['createHubHaStack','CAPABILITY_NAMED_IAM','Properties','6aGXGSw','1580277FwylXC','BQqbJ','../config/constants','waitFor','bluebird','valueOf','Key','ClusterOIDCURL','StackId','-cf','../config/logger','Capabilities','schema','browserstack:cluster','inArb','33869530ZcMhmF','14752lEfzal','TemplateBody','browserstack:creationDate','Resources','load','stringify','7761299Aagxwx','3501512sxDJHy','2010-05-15','promise','js-yaml','hub-ha.yaml','apiVersion','./AWSUtils','Tags','baVYj','cdVqT','XIAoq','aabsh','hXdTW','56QQOPDU','getOidcUrl','toString','sslwV','awsObj','path','join','js-yaml-cloudformation-schema','CloudFormation','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','OnFailure','ELnwG','876735yPEcjt','VpcId','promisifyAll','4kcwHFF','split','5187730GXOPAc','Value','push','wXjis'];a28_0x3666=function(){return _0x4ebfe4;};return a28_0x3666();}