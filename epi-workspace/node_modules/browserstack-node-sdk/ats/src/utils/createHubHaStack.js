function a28_0x21e8(){const _0x2d9304=['toString','StackName','dEqCn','hub-ha.yaml','12340472tfHebt','://','DELETE','63rLdAEY','../config/logger','StackId','CAPABILITY_NAMED_IAM','readFileAsync','Value','js-yaml-cloudformation-schema','10162467aeEydX','promisifyAll','tkaAa','../config/constants','6uoOuYb','OnFailure','createStack','iCDIF','VpcId','AegqK','qMxiI','valueOf','597538zJpsVk','5674255dzCIwe','waitFor','load','OfEoc','2010-05-15','stringify','lbHwF','4qvgrkp','split','stackCreateComplete','DffCw','27278JxuYgX','TRYkE','CloudFormation','utf-8','Resources','yOZHC','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','59466110mwaEwD','TemplateBody','bluebird','9MujQjh','Tags','Key','promise','push','oaYIE','ClusterOIDCURL','Parameters','7976650KgjBaa','egYgO','Properties'];a28_0x21e8=function(){return _0x2d9304;};return a28_0x21e8();}const a28_0x4af372=a28_0x1a92;(function(_0x1eea49,_0x3bec62){const _0x3f8775=a28_0x1a92,_0x5dc218=_0x1eea49();while(!![]){try{const _0x39af6a=parseInt(_0x3f8775(0x1c4))/0x1+-parseInt(_0x3f8775(0x1d0))/0x2*(parseInt(_0x3f8775(0x1ec))/0x3)+-parseInt(_0x3f8775(0x1cc))/0x4*(parseInt(_0x3f8775(0x1c5))/0x5)+parseInt(_0x3f8775(0x1bc))/0x6*(-parseInt(_0x3f8775(0x1b8))/0x7)+-parseInt(_0x3f8775(0x1e9))/0x8+-parseInt(_0x3f8775(0x1da))/0x9*(parseInt(_0x3f8775(0x1e2))/0xa)+parseInt(_0x3f8775(0x1d7))/0xb;if(_0x39af6a===_0x3bec62)break;else _0x5dc218['push'](_0x5dc218['shift']());}catch(_0x8df17c){_0x5dc218['push'](_0x5dc218['shift']());}}}(a28_0x21e8,0xc0f01));function a28_0x1a92(_0x28e590,_0x5a9600){const _0x21e851=a28_0x21e8();return a28_0x1a92=function(_0x1a9262,_0x34907b){_0x1a9262=_0x1a9262-0x1b6;let _0x5ccd1a=_0x21e851[_0x1a9262];return _0x5ccd1a;},a28_0x1a92(_0x28e590,_0x5a9600);}const fs=require('fs'),path=require('path'),Promise=require(a28_0x4af372(0x1d9)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a28_0x4af372(0x1b7)),AWS=require('./AWSUtils')['awsObj'],AWSUtils=require('./AWSUtils'),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x4af372(0x1bb)),{logger}=require(a28_0x4af372(0x1ed));Promise[a28_0x4af372(0x1b9)](fs);const addTags=async(_0x21cc40,_0xbaa217)=>{const _0x36bbd8=a28_0x4af372;for(const _0x5cebff in _0x21cc40[_0x36bbd8(0x1d4)]){_0x21cc40['Resources'][_0x5cebff]['Properties']&&_0x21cc40[_0x36bbd8(0x1d4)][_0x5cebff][_0x36bbd8(0x1e4)][_0x36bbd8(0x1db)]&&_0x21cc40[_0x36bbd8(0x1d4)][_0x5cebff][_0x36bbd8(0x1e4)][_0x36bbd8(0x1db)][_0x36bbd8(0x1de)](..._0xbaa217);}};exports['createHubHaStack']=async(_0x1ad29d,_0x14ad3e=null)=>{const _0x12ad0=a28_0x4af372,_0x3270cc={'OfEoc':'browserstack:cluster','AegqK':'browserstack:creationDate','egYgO':_0x12ad0(0x1c9),'QlaFe':'CFTemplates','DffCw':_0x12ad0(0x1e8),'dEqCn':_0x12ad0(0x1d3),'tXldn':function(_0x50ac3d,_0x5e78c0,_0x1248bf){return _0x50ac3d(_0x5e78c0,_0x1248bf);},'yOZHC':_0x12ad0(0x1ea),'XpjGL':_0x12ad0(0x1eb),'oaYIE':_0x12ad0(0x1c0),'qMxiI':'BaseResourceName','tkaAa':_0x12ad0(0x1e0),'TRYkE':_0x12ad0(0x1ef),'iCDIF':_0x12ad0(0x1d6),'lbHwF':_0x12ad0(0x1ce)},_0x1c10bf=COMMON_HST_TAGS,_0x41c152={};_0x41c152[_0x12ad0(0x1dc)]=_0x3270cc[_0x12ad0(0x1c8)],_0x41c152[_0x12ad0(0x1b6)]=_0x1ad29d,_0x1c10bf[_0x12ad0(0x1de)](_0x41c152),_0x1c10bf[_0x12ad0(0x1de)]({'Key':_0x3270cc[_0x12ad0(0x1c1)],'Value':new Date()[_0x12ad0(0x1c3)]()[_0x12ad0(0x1e5)]()});const _0x147e68={};_0x147e68['apiVersion']=_0x3270cc[_0x12ad0(0x1e3)];const _0x3bc3d2=new AWS[(_0x12ad0(0x1d2))](_0x147e68),_0x5d7794=await fs[_0x12ad0(0x1f0)](path['join'](__dirname,'..',_0x3270cc['QlaFe'],_0x3270cc[_0x12ad0(0x1cf)]),_0x3270cc[_0x12ad0(0x1e7)]),_0x1c659c={};_0x1c659c['schema']=CLOUDFORMATION_SCHEMA;const _0x4387b0=yaml[_0x12ad0(0x1c7)](_0x5d7794,_0x1c659c);await _0x3270cc['tXldn'](addTags,_0x4387b0,_0x1c10bf);const _0x46616a=JSON[_0x12ad0(0x1ca)](_0x4387b0);let _0x2c5c16=await AWSUtils['getOidcUrl'](_0x1ad29d);_0x2c5c16=_0x2c5c16[_0x12ad0(0x1cd)](_0x3270cc[_0x12ad0(0x1d5)])[0x1];const _0x1fcc27={};_0x1fcc27['StackName']=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x1ad29d+'-cf',_0x1fcc27[_0x12ad0(0x1bd)]=_0x3270cc['XpjGL'],_0x1fcc27[_0x12ad0(0x1d8)]=_0x46616a,_0x1fcc27[_0x12ad0(0x1e1)]=[{'ParameterKey':_0x3270cc[_0x12ad0(0x1df)],'ParameterValue':_0x14ad3e},{'ParameterKey':_0x3270cc[_0x12ad0(0x1c2)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x1ad29d},{'ParameterKey':_0x3270cc[_0x12ad0(0x1ba)],'ParameterValue':_0x2c5c16}],_0x1fcc27['Capabilities']=[_0x3270cc[_0x12ad0(0x1d1)]],_0x1fcc27['Tags']=_0x1c10bf;const _0x2e22bb=_0x1fcc27,_0x184225=await _0x3bc3d2[_0x12ad0(0x1be)](_0x2e22bb)[_0x12ad0(0x1dd)]();logger['info'](_0x3270cc[_0x12ad0(0x1bf)]);const _0xbabf7a={};return _0xbabf7a[_0x12ad0(0x1e6)]=_0x184225[_0x12ad0(0x1ee)],_0x3bc3d2[_0x12ad0(0x1c6)](_0x3270cc[_0x12ad0(0x1cb)],_0xbabf7a)[_0x12ad0(0x1dd)]();};