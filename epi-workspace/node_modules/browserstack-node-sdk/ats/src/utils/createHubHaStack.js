function a28_0x54fc(_0xdc9a63,_0x5c94db){const _0x4e68f9=a28_0x4e68();return a28_0x54fc=function(_0x54fc76,_0x494bc1){_0x54fc76=_0x54fc76-0x153;let _0x4ac494=_0x4e68f9[_0x54fc76];return _0x4ac494;},a28_0x54fc(_0xdc9a63,_0x5c94db);}const a28_0x862edf=a28_0x54fc;(function(_0x5a71b5,_0x18d4d6){const _0x23ffa9=a28_0x54fc,_0x581832=_0x5a71b5();while(!![]){try{const _0x48f6ff=-parseInt(_0x23ffa9(0x16e))/0x1*(parseInt(_0x23ffa9(0x18a))/0x2)+-parseInt(_0x23ffa9(0x192))/0x3*(parseInt(_0x23ffa9(0x16a))/0x4)+-parseInt(_0x23ffa9(0x18e))/0x5*(parseInt(_0x23ffa9(0x168))/0x6)+-parseInt(_0x23ffa9(0x15d))/0x7+-parseInt(_0x23ffa9(0x166))/0x8+parseInt(_0x23ffa9(0x159))/0x9*(-parseInt(_0x23ffa9(0x15b))/0xa)+-parseInt(_0x23ffa9(0x186))/0xb*(-parseInt(_0x23ffa9(0x16d))/0xc);if(_0x48f6ff===_0x18d4d6)break;else _0x581832['push'](_0x581832['shift']());}catch(_0x455b55){_0x581832['push'](_0x581832['shift']());}}}(a28_0x4e68,0xd5a1a));function a28_0x4e68(){const _0x500ea1=['waitFor','CAPABILITY_NAMED_IAM','split','ggAmg','72fpGMkr','LaRAS','1997670iEAqUZ','DELETE','2000194PkWQji','browserstack:cluster','CloudFormation','Mboyo','BaseResourceName','bluebird','svAgL','Parameters','Properties','9827440zIzuFF','StackName','69294MyGVQo','ClusterOIDCURL','5585956dZKTTS','schema','Resources','48tJHWAD','7tPKTHe','getOidcUrl','LUbZZ','Tags','Key','dGtJT','js-yaml','stringify','stackCreateComplete','CTaMK','cCAgy','push','awsObj','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','promise','-cf','://','TemplateBody','readFileAsync','Capabilities','PRRfz','promisifyAll','USesV','createStack','21505407aJiBxV','../config/logger','TAmOf','./AWSUtils','494808ZLNRhN','js-yaml-cloudformation-schema','../config/constants','valueOf','305fPVOls','VpcId','AbkAi','StackId','3mykbdG','toString','info'];a28_0x4e68=function(){return _0x500ea1;};return a28_0x4e68();}const fs=require('fs'),path=require('path'),Promise=require(a28_0x862edf(0x162)),yaml=require(a28_0x862edf(0x174)),{CLOUDFORMATION_SCHEMA}=require(a28_0x862edf(0x18b)),AWS=require(a28_0x862edf(0x189))[a28_0x862edf(0x17a)],AWSUtils=require('./AWSUtils'),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x862edf(0x18c)),{logger}=require(a28_0x862edf(0x187));Promise[a28_0x862edf(0x183)](fs);const addTags=async(_0x320a6c,_0x2a9453)=>{const _0x4c6644=a28_0x862edf;for(const _0x225db4 in _0x320a6c['Resources']){_0x320a6c[_0x4c6644(0x16c)][_0x225db4][_0x4c6644(0x165)]&&_0x320a6c[_0x4c6644(0x16c)][_0x225db4][_0x4c6644(0x165)][_0x4c6644(0x171)]&&_0x320a6c['Resources'][_0x225db4][_0x4c6644(0x165)][_0x4c6644(0x171)][_0x4c6644(0x179)](..._0x2a9453);}};exports['createHubHaStack']=async(_0x4b47ff,_0x38be48=null)=>{const _0x134cd9=a28_0x862edf,_0xe278c9={'USesV':_0x134cd9(0x15e),'TAmOf':'browserstack:creationDate','cCAgy':'2010-05-15','AbkAi':'CFTemplates','ggAmg':'hub-ha.yaml','svAgL':'utf-8','PRRfz':function(_0x486511,_0x9edd4a,_0x58bb5b){return _0x486511(_0x9edd4a,_0x58bb5b);},'dGtJT':_0x134cd9(0x17e),'LUbZZ':_0x134cd9(0x15c),'XeuHq':_0x134cd9(0x18f),'LaRAS':_0x134cd9(0x161),'Gdejm':_0x134cd9(0x169),'CTaMK':_0x134cd9(0x156),'MSIZV':_0x134cd9(0x17b),'Mboyo':_0x134cd9(0x176)},_0x9a0ddb=COMMON_HST_TAGS,_0x483989={};_0x483989[_0x134cd9(0x172)]=_0xe278c9[_0x134cd9(0x184)],_0x483989['Value']=_0x4b47ff,_0x9a0ddb[_0x134cd9(0x179)](_0x483989),_0x9a0ddb['push']({'Key':_0xe278c9[_0x134cd9(0x188)],'Value':new Date()[_0x134cd9(0x18d)]()[_0x134cd9(0x153)]()});const _0x2a4bef={};_0x2a4bef['apiVersion']=_0xe278c9[_0x134cd9(0x178)];const _0xcd8153=new AWS[(_0x134cd9(0x15f))](_0x2a4bef),_0x636424=await fs[_0x134cd9(0x180)](path['join'](__dirname,'..',_0xe278c9[_0x134cd9(0x190)],_0xe278c9[_0x134cd9(0x158)]),_0xe278c9[_0x134cd9(0x163)]),_0x296bab={};_0x296bab[_0x134cd9(0x16b)]=CLOUDFORMATION_SCHEMA;const _0x21f517=yaml['load'](_0x636424,_0x296bab);await _0xe278c9[_0x134cd9(0x182)](addTags,_0x21f517,_0x9a0ddb);const _0x248c04=JSON[_0x134cd9(0x175)](_0x21f517);let _0x1f4386=await AWSUtils[_0x134cd9(0x16f)](_0x4b47ff);_0x1f4386=_0x1f4386[_0x134cd9(0x157)](_0xe278c9[_0x134cd9(0x173)])[0x1];const _0x4ba270={};_0x4ba270[_0x134cd9(0x167)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x4b47ff+_0x134cd9(0x17d),_0x4ba270['OnFailure']=_0xe278c9[_0x134cd9(0x170)],_0x4ba270[_0x134cd9(0x17f)]=_0x248c04,_0x4ba270[_0x134cd9(0x164)]=[{'ParameterKey':_0xe278c9['XeuHq'],'ParameterValue':_0x38be48},{'ParameterKey':_0xe278c9[_0x134cd9(0x15a)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x4b47ff},{'ParameterKey':_0xe278c9['Gdejm'],'ParameterValue':_0x1f4386}],_0x4ba270[_0x134cd9(0x181)]=[_0xe278c9[_0x134cd9(0x177)]],_0x4ba270[_0x134cd9(0x171)]=_0x9a0ddb;const _0x4eed7e=_0x4ba270,_0x1fce59=await _0xcd8153[_0x134cd9(0x185)](_0x4eed7e)['promise']();logger[_0x134cd9(0x154)](_0xe278c9['MSIZV']);const _0x27a036={};return _0x27a036[_0x134cd9(0x167)]=_0x1fce59[_0x134cd9(0x191)],_0xcd8153[_0x134cd9(0x155)](_0xe278c9[_0x134cd9(0x160)],_0x27a036)[_0x134cd9(0x17c)]();};