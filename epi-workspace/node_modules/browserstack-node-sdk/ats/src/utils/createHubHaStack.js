const a28_0x12cdba=a28_0x392a;(function(_0x3423ce,_0x55b95d){const _0x344cbc=a28_0x392a,_0x57b6a1=_0x3423ce();while(!![]){try{const _0x1bea4d=-parseInt(_0x344cbc(0x7e))/0x1+-parseInt(_0x344cbc(0x98))/0x2*(parseInt(_0x344cbc(0x90))/0x3)+-parseInt(_0x344cbc(0xa1))/0x4*(-parseInt(_0x344cbc(0x74))/0x5)+parseInt(_0x344cbc(0x7d))/0x6*(parseInt(_0x344cbc(0x8e))/0x7)+-parseInt(_0x344cbc(0x97))/0x8+parseInt(_0x344cbc(0x6a))/0x9*(parseInt(_0x344cbc(0x87))/0xa)+-parseInt(_0x344cbc(0x92))/0xb*(-parseInt(_0x344cbc(0x81))/0xc);if(_0x1bea4d===_0x55b95d)break;else _0x57b6a1['push'](_0x57b6a1['shift']());}catch(_0x546a8a){_0x57b6a1['push'](_0x57b6a1['shift']());}}}(a28_0x5091,0xe5bde));const fs=require('fs'),path=require(a28_0x12cdba(0xa4)),Promise=require(a28_0x12cdba(0x6b)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a28_0x12cdba(0x6d)),AWS=require(a28_0x12cdba(0x84))[a28_0x12cdba(0x6f)],AWSUtils=require(a28_0x12cdba(0x84)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x12cdba(0x7b)),{logger}=require(a28_0x12cdba(0x83));Promise[a28_0x12cdba(0x99)](fs);const addTags=async(_0x432e37,_0x2fa39d)=>{const _0x192d1e=a28_0x12cdba;for(const _0x1e1511 in _0x432e37['Resources']){_0x432e37[_0x192d1e(0x89)][_0x1e1511][_0x192d1e(0x9a)]&&_0x432e37[_0x192d1e(0x89)][_0x1e1511]['Properties'][_0x192d1e(0x75)]&&_0x432e37[_0x192d1e(0x89)][_0x1e1511][_0x192d1e(0x9a)][_0x192d1e(0x75)]['push'](..._0x2fa39d);}};function a28_0x392a(_0x5e279d,_0x53b1c5){const _0x509182=a28_0x5091();return a28_0x392a=function(_0x392aa6,_0x41f5e8){_0x392aa6=_0x392aa6-0x68;let _0x5a4cf4=_0x509182[_0x392aa6];return _0x5a4cf4;},a28_0x392a(_0x5e279d,_0x53b1c5);}exports['createHubHaStack']=async(_0x53c858,_0x205a08=null)=>{const _0x52410a=a28_0x12cdba,_0x4ebeb6={'Arjdd':_0x52410a(0x72),'nxNyW':_0x52410a(0x7f),'GQfhs':'2010-05-15','vZpMJ':_0x52410a(0x9f),'mHLRD':'hub-ha.yaml','pLAda':_0x52410a(0xa3),'HVCWn':function(_0x48c2dd,_0x354796,_0x2df670){return _0x48c2dd(_0x354796,_0x2df670);},'kEdlY':_0x52410a(0x8b),'FCJft':_0x52410a(0x70),'crXgt':_0x52410a(0x7c),'GerDn':_0x52410a(0x9d),'KQcMk':'ClusterOIDCURL','OsLow':_0x52410a(0x77),'oiSvZ':_0x52410a(0x69),'GyIjS':_0x52410a(0x68)},_0xae7650=COMMON_HST_TAGS,_0x373c71={};_0x373c71[_0x52410a(0x80)]=_0x4ebeb6[_0x52410a(0x78)],_0x373c71['Value']=_0x53c858,_0xae7650[_0x52410a(0x95)](_0x373c71),_0xae7650[_0x52410a(0x95)]({'Key':_0x4ebeb6[_0x52410a(0x93)],'Value':new Date()[_0x52410a(0x79)]()[_0x52410a(0x8f)]()});const _0x884af0={};_0x884af0[_0x52410a(0x86)]=_0x4ebeb6[_0x52410a(0x8d)];const _0x46a675=new AWS[(_0x52410a(0x88))](_0x884af0),_0x27dfe4=await fs[_0x52410a(0xa0)](path['join'](__dirname,'..',_0x4ebeb6[_0x52410a(0x91)],_0x4ebeb6['mHLRD']),_0x4ebeb6['pLAda']),_0x58cd98={};_0x58cd98['schema']=CLOUDFORMATION_SCHEMA;const _0x33efcb=yaml[_0x52410a(0x6c)](_0x27dfe4,_0x58cd98);await _0x4ebeb6[_0x52410a(0x9b)](addTags,_0x33efcb,_0xae7650);const _0x518af6=JSON[_0x52410a(0x96)](_0x33efcb);let _0x48b6af=await AWSUtils['getOidcUrl'](_0x53c858);_0x48b6af=_0x48b6af['split'](_0x4ebeb6['kEdlY'])[0x1];const _0x3c4160={};_0x3c4160['StackName']=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x53c858+_0x52410a(0x8c),_0x3c4160[_0x52410a(0x76)]=_0x4ebeb6['FCJft'],_0x3c4160[_0x52410a(0x7a)]=_0x518af6,_0x3c4160[_0x52410a(0x8a)]=[{'ParameterKey':_0x4ebeb6['crXgt'],'ParameterValue':_0x205a08},{'ParameterKey':_0x4ebeb6[_0x52410a(0x9e)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x53c858},{'ParameterKey':_0x4ebeb6[_0x52410a(0x9c)],'ParameterValue':_0x48b6af}],_0x3c4160[_0x52410a(0xa2)]=[_0x4ebeb6[_0x52410a(0x82)]],_0x3c4160[_0x52410a(0x75)]=_0xae7650;const _0x2dc709=_0x3c4160,_0x1a09c4=await _0x46a675[_0x52410a(0x73)](_0x2dc709)[_0x52410a(0x6e)]();logger['info'](_0x4ebeb6[_0x52410a(0x85)]);const _0xf2044={};return _0xf2044['StackName']=_0x1a09c4[_0x52410a(0x94)],_0x46a675[_0x52410a(0x71)](_0x4ebeb6['GyIjS'],_0xf2044)['promise']();};function a28_0x5091(){const _0x488909=['promise','awsObj','DELETE','waitFor','browserstack:cluster','createStack','3865805HRyWFs','Tags','OnFailure','CAPABILITY_NAMED_IAM','Arjdd','valueOf','TemplateBody','../config/constants','VpcId','735510WdGpLI','592134qfVfUZ','browserstack:creationDate','Key','12fLxSMu','OsLow','../config/logger','./AWSUtils','oiSvZ','apiVersion','10170nSAVUC','CloudFormation','Resources','Parameters','://','-cf','GQfhs','28TdZwZv','toString','80076TWabZf','vZpMJ','609092wQJNqV','nxNyW','StackId','push','stringify','305432vtqKoW','122LkTBRg','promisifyAll','Properties','HVCWn','KQcMk','BaseResourceName','GerDn','CFTemplates','readFileAsync','8vLeqMW','Capabilities','utf-8','path','stackCreateComplete','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','9801CfEdWR','bluebird','load','js-yaml-cloudformation-schema'];a28_0x5091=function(){return _0x488909;};return a28_0x5091();}