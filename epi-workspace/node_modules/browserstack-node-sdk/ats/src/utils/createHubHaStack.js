const a28_0x45f543=a28_0x1394;(function(_0x4c79b5,_0x4cce5b){const _0x229a00=a28_0x1394,_0x587ef3=_0x4c79b5();while(!![]){try{const _0x78a06f=parseInt(_0x229a00(0x109))/0x1+parseInt(_0x229a00(0xee))/0x2*(-parseInt(_0x229a00(0xea))/0x3)+-parseInt(_0x229a00(0xf2))/0x4*(-parseInt(_0x229a00(0xdf))/0x5)+-parseInt(_0x229a00(0xda))/0x6*(parseInt(_0x229a00(0xe8))/0x7)+parseInt(_0x229a00(0xdc))/0x8+-parseInt(_0x229a00(0xd2))/0x9+parseInt(_0x229a00(0xf3))/0xa;if(_0x78a06f===_0x4cce5b)break;else _0x587ef3['push'](_0x587ef3['shift']());}catch(_0x1c53db){_0x587ef3['push'](_0x587ef3['shift']());}}}(a28_0x1c57,0x59038));const fs=require('fs'),path=require(a28_0x45f543(0x100)),Promise=require(a28_0x45f543(0xd7)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a28_0x45f543(0xfb)),AWS=require('./AWSUtils')['awsObj'],AWSUtils=require('./AWSUtils'),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x45f543(0xec)),{logger}=require(a28_0x45f543(0xd8));function a28_0x1c57(){const _0x2780ed=['StackId','../config/constants','utf-8','614ZljNrw','createStack','pRxMq','browserstack:creationDate','493808dJUXFM','9898100NcqEki','BPFCc','stringify','info','://','rYEUF','Tags','valueOf','js-yaml-cloudformation-schema','OnFailure','ClusterOIDCURL','promise','apiVersion','path','CFTemplates','Properties','stackCreateComplete','2010-05-15','CloudFormation','-cf','waitFor','yNoEQ','228823sNslPK','push','Value','join','DELETE','Key','4618188SXfuXN','kDEUC','VpcId','browserstack:cluster','CwHCM','bluebird','../config/logger','load','3259686WNeOpP','YvSlB','2232432ZnoVwr','createHubHaStack','CAPABILITY_NAMED_IAM','10XeZlgL','hub-ha.yaml','StackName','toString','Resources','promisifyAll','schema','CKlsN','svnSF','7cjMine','split','3162KOjvij'];a28_0x1c57=function(){return _0x2780ed;};return a28_0x1c57();}Promise[a28_0x45f543(0xe4)](fs);function a28_0x1394(_0x2c371b,_0x5f3f2b){const _0x1c5726=a28_0x1c57();return a28_0x1394=function(_0x1394aa,_0x4f78f6){_0x1394aa=_0x1394aa-0xd2;let _0x4c5423=_0x1c5726[_0x1394aa];return _0x4c5423;},a28_0x1394(_0x2c371b,_0x5f3f2b);}const addTags=async(_0x1ef5c9,_0x34dced)=>{const _0x196ea5=a28_0x45f543;for(const _0x451dbc in _0x1ef5c9[_0x196ea5(0xe3)]){_0x1ef5c9['Resources'][_0x451dbc][_0x196ea5(0x102)]&&_0x1ef5c9[_0x196ea5(0xe3)][_0x451dbc]['Properties'][_0x196ea5(0xf9)]&&_0x1ef5c9[_0x196ea5(0xe3)][_0x451dbc]['Properties'][_0x196ea5(0xf9)]['push'](..._0x34dced);}};exports[a28_0x45f543(0xdd)]=async(_0x1bbc08,_0x5cce2c=null)=>{const _0x3dd7b6=a28_0x45f543,_0x3a5ec0={'pRxMq':_0x3dd7b6(0xd5),'oMZCx':_0x3dd7b6(0xf1),'yNoEQ':_0x3dd7b6(0x104),'iXplv':_0x3dd7b6(0x101),'YvSlB':_0x3dd7b6(0xe0),'RRPqq':_0x3dd7b6(0xed),'BPFCc':function(_0x22ea74,_0x2434e1,_0x55d121){return _0x22ea74(_0x2434e1,_0x55d121);},'HXdRD':_0x3dd7b6(0xf7),'cpuMt':_0x3dd7b6(0x10d),'CKlsN':_0x3dd7b6(0xd4),'DkyWA':'BaseResourceName','svnSF':_0x3dd7b6(0xfd),'kDEUC':_0x3dd7b6(0xde),'rYEUF':'Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','CwHCM':_0x3dd7b6(0x103)},_0x7b9faf=COMMON_HST_TAGS,_0x5442cd={};_0x5442cd[_0x3dd7b6(0x10e)]=_0x3a5ec0[_0x3dd7b6(0xf0)],_0x5442cd[_0x3dd7b6(0x10b)]=_0x1bbc08,_0x7b9faf[_0x3dd7b6(0x10a)](_0x5442cd),_0x7b9faf[_0x3dd7b6(0x10a)]({'Key':_0x3a5ec0['oMZCx'],'Value':new Date()[_0x3dd7b6(0xfa)]()[_0x3dd7b6(0xe2)]()});const _0x413844={};_0x413844[_0x3dd7b6(0xff)]=_0x3a5ec0[_0x3dd7b6(0x108)];const _0x3fadc8=new AWS[(_0x3dd7b6(0x105))](_0x413844),_0x1d1871=await fs['readFileAsync'](path[_0x3dd7b6(0x10c)](__dirname,'..',_0x3a5ec0['iXplv'],_0x3a5ec0[_0x3dd7b6(0xdb)]),_0x3a5ec0['RRPqq']),_0x3681d8={};_0x3681d8[_0x3dd7b6(0xe5)]=CLOUDFORMATION_SCHEMA;const _0x356a90=yaml[_0x3dd7b6(0xd9)](_0x1d1871,_0x3681d8);await _0x3a5ec0[_0x3dd7b6(0xf4)](addTags,_0x356a90,_0x7b9faf);const _0x31faf2=JSON[_0x3dd7b6(0xf5)](_0x356a90);let _0x39012a=await AWSUtils['getOidcUrl'](_0x1bbc08);_0x39012a=_0x39012a[_0x3dd7b6(0xe9)](_0x3a5ec0['HXdRD'])[0x1];const _0x27718e={};_0x27718e[_0x3dd7b6(0xe1)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x1bbc08+_0x3dd7b6(0x106),_0x27718e[_0x3dd7b6(0xfc)]=_0x3a5ec0['cpuMt'],_0x27718e['TemplateBody']=_0x31faf2,_0x27718e['Parameters']=[{'ParameterKey':_0x3a5ec0[_0x3dd7b6(0xe6)],'ParameterValue':_0x5cce2c},{'ParameterKey':_0x3a5ec0['DkyWA'],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x1bbc08},{'ParameterKey':_0x3a5ec0[_0x3dd7b6(0xe7)],'ParameterValue':_0x39012a}],_0x27718e['Capabilities']=[_0x3a5ec0[_0x3dd7b6(0xd3)]],_0x27718e[_0x3dd7b6(0xf9)]=_0x7b9faf;const _0x18d5a0=_0x27718e,_0x4765d1=await _0x3fadc8[_0x3dd7b6(0xef)](_0x18d5a0)[_0x3dd7b6(0xfe)]();logger[_0x3dd7b6(0xf6)](_0x3a5ec0[_0x3dd7b6(0xf8)]);const _0x22ffbd={};return _0x22ffbd[_0x3dd7b6(0xe1)]=_0x4765d1[_0x3dd7b6(0xeb)],_0x3fadc8[_0x3dd7b6(0x107)](_0x3a5ec0[_0x3dd7b6(0xd6)],_0x22ffbd)['promise']();};