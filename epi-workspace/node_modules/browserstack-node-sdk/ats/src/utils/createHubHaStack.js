const a28_0x45b576=a28_0x387e;(function(_0x5d316d,_0x176242){const _0x4c5631=a28_0x387e,_0x590182=_0x5d316d();while(!![]){try{const _0x41af40=parseInt(_0x4c5631(0x1a0))/0x1+parseInt(_0x4c5631(0x18e))/0x2*(parseInt(_0x4c5631(0x18d))/0x3)+-parseInt(_0x4c5631(0x18c))/0x4*(-parseInt(_0x4c5631(0x195))/0x5)+parseInt(_0x4c5631(0x1ab))/0x6*(-parseInt(_0x4c5631(0x1a3))/0x7)+-parseInt(_0x4c5631(0x180))/0x8*(-parseInt(_0x4c5631(0x1b2))/0x9)+-parseInt(_0x4c5631(0x1ac))/0xa+-parseInt(_0x4c5631(0x185))/0xb*(parseInt(_0x4c5631(0x19d))/0xc);if(_0x41af40===_0x176242)break;else _0x590182['push'](_0x590182['shift']());}catch(_0x4aff9c){_0x590182['push'](_0x590182['shift']());}}}(a28_0x5adb,0x59c44));const fs=require('fs'),path=require('path'),Promise=require(a28_0x45b576(0x1b3)),yaml=require(a28_0x45b576(0x1a8)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),AWS=require('./AWSUtils')[a28_0x45b576(0x19e)],AWSUtils=require(a28_0x45b576(0x186)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x45b576(0x1a7)),{logger}=require('../config/logger');Promise['promisifyAll'](fs);const addTags=async(_0x20a17b,_0x11b0f1)=>{const _0x4794c9=a28_0x45b576;for(const _0x205429 in _0x20a17b[_0x4794c9(0x181)]){_0x20a17b[_0x4794c9(0x181)][_0x205429]['Properties']&&_0x20a17b[_0x4794c9(0x181)][_0x205429]['Properties'][_0x4794c9(0x1af)]&&_0x20a17b['Resources'][_0x205429]['Properties']['Tags'][_0x4794c9(0x1a5)](..._0x11b0f1);}};function a28_0x387e(_0x5d98cc,_0x406980){const _0x5adb0e=a28_0x5adb();return a28_0x387e=function(_0x387e63,_0x31773e){_0x387e63=_0x387e63-0x178;let _0x3691b6=_0x5adb0e[_0x387e63];return _0x3691b6;},a28_0x387e(_0x5d98cc,_0x406980);}function a28_0x5adb(){const _0x35e3d0=['209dRPtKu','./AWSUtils','PRvyu','Capabilities','2010-05-15','browserstack:cluster','oGrIF','8ZmNpzz','419541VcEHro','6pzkTYC','Parameters','CloudFormation','toString','ClusterOIDCURL','hbHRZ','aLUuQ','1693930BLyqPf','promise','Key','zAAzX','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','getOidcUrl','stackCreateComplete','valueOf','591072rGIxpJ','awsObj','schema','491124JYRmZg','owYKf','AQruC','245XCYdxT','LOwoD','push','apiVersion','../config/constants','js-yaml','createHubHaStack','VpcId','65958Apwptn','3454230mrcPHM','Value','hub-ha.yaml','Tags','BaseResourceName','createStack','9DtGHdf','bluebird','join','readFileAsync','CFTemplates','TemplateBody','Kxqgf','browserstack:creationDate','fQWKS','split','StackId','3563912wnsCfc','Resources','aPXVA','://','stringify'];a28_0x5adb=function(){return _0x35e3d0;};return a28_0x5adb();}exports[a28_0x45b576(0x1a9)]=async(_0xda635c,_0x4374dd=null)=>{const _0xe424a1=a28_0x45b576,_0x176c66={'LOwoD':_0xe424a1(0x18a),'zAAzX':_0xe424a1(0x17c),'fCBZF':_0xe424a1(0x189),'AQruC':_0xe424a1(0x179),'aLUuQ':_0xe424a1(0x1ae),'fQWKS':'utf-8','PRvyu':function(_0xd15e3,_0x1dbcdb,_0x248939){return _0xd15e3(_0x1dbcdb,_0x248939);},'aPXVA':_0xe424a1(0x183),'oGrIF':'DELETE','Kxqgf':_0xe424a1(0x1aa),'hbHRZ':_0xe424a1(0x1b0),'owYKf':_0xe424a1(0x192),'CUMld':'CAPABILITY_NAMED_IAM','bJREB':_0xe424a1(0x199),'QLXBf':_0xe424a1(0x19b)},_0x10a9ce=COMMON_HST_TAGS,_0x489229={};_0x489229[_0xe424a1(0x197)]=_0x176c66[_0xe424a1(0x1a4)],_0x489229[_0xe424a1(0x1ad)]=_0xda635c,_0x10a9ce['push'](_0x489229),_0x10a9ce[_0xe424a1(0x1a5)]({'Key':_0x176c66[_0xe424a1(0x198)],'Value':new Date()[_0xe424a1(0x19c)]()[_0xe424a1(0x191)]()});const _0xe6b7fb={};_0xe6b7fb[_0xe424a1(0x1a6)]=_0x176c66['fCBZF'];const _0x37e210=new AWS[(_0xe424a1(0x190))](_0xe6b7fb),_0x38e07b=await fs[_0xe424a1(0x178)](path[_0xe424a1(0x1b4)](__dirname,'..',_0x176c66[_0xe424a1(0x1a2)],_0x176c66[_0xe424a1(0x194)]),_0x176c66[_0xe424a1(0x17d)]),_0x5985d3={};_0x5985d3[_0xe424a1(0x19f)]=CLOUDFORMATION_SCHEMA;const _0x4831f0=yaml['load'](_0x38e07b,_0x5985d3);await _0x176c66[_0xe424a1(0x187)](addTags,_0x4831f0,_0x10a9ce);const _0x12e353=JSON[_0xe424a1(0x184)](_0x4831f0);let _0x11262e=await AWSUtils[_0xe424a1(0x19a)](_0xda635c);_0x11262e=_0x11262e[_0xe424a1(0x17e)](_0x176c66[_0xe424a1(0x182)])[0x1];const _0x33d5dc={};_0x33d5dc['StackName']=CLUSTER_HUB_HA_STACK_NAME+'-'+_0xda635c+'-cf',_0x33d5dc['OnFailure']=_0x176c66[_0xe424a1(0x18b)],_0x33d5dc[_0xe424a1(0x17a)]=_0x12e353,_0x33d5dc[_0xe424a1(0x18f)]=[{'ParameterKey':_0x176c66[_0xe424a1(0x17b)],'ParameterValue':_0x4374dd},{'ParameterKey':_0x176c66[_0xe424a1(0x193)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0xda635c},{'ParameterKey':_0x176c66[_0xe424a1(0x1a1)],'ParameterValue':_0x11262e}],_0x33d5dc[_0xe424a1(0x188)]=[_0x176c66['CUMld']],_0x33d5dc[_0xe424a1(0x1af)]=_0x10a9ce;const _0x560874=_0x33d5dc,_0x1e3203=await _0x37e210[_0xe424a1(0x1b1)](_0x560874)[_0xe424a1(0x196)]();logger['info'](_0x176c66['bJREB']);const _0x41eb15={};return _0x41eb15['StackName']=_0x1e3203[_0xe424a1(0x17f)],_0x37e210['waitFor'](_0x176c66['QLXBf'],_0x41eb15)['promise']();};