const a28_0x480a98=a28_0x1825;(function(_0xf6aba3,_0x480eaa){const _0x3276cb=a28_0x1825,_0x1547c7=_0xf6aba3();while(!![]){try{const _0x13e371=parseInt(_0x3276cb(0x190))/0x1*(parseInt(_0x3276cb(0x17e))/0x2)+-parseInt(_0x3276cb(0x168))/0x3*(-parseInt(_0x3276cb(0x16a))/0x4)+parseInt(_0x3276cb(0x184))/0x5*(-parseInt(_0x3276cb(0x178))/0x6)+-parseInt(_0x3276cb(0x171))/0x7+parseInt(_0x3276cb(0x156))/0x8+parseInt(_0x3276cb(0x167))/0x9*(parseInt(_0x3276cb(0x17f))/0xa)+-parseInt(_0x3276cb(0x187))/0xb*(parseInt(_0x3276cb(0x18f))/0xc);if(_0x13e371===_0x480eaa)break;else _0x1547c7['push'](_0x1547c7['shift']());}catch(_0x16ae37){_0x1547c7['push'](_0x1547c7['shift']());}}}(a28_0x4250,0x2849d));function a28_0x1825(_0x123d4d,_0x4f3770){const _0x425010=a28_0x4250();return a28_0x1825=function(_0x1825c9,_0x2a3c56){_0x1825c9=_0x1825c9-0x156;let _0x489458=_0x425010[_0x1825c9];return _0x489458;},a28_0x1825(_0x123d4d,_0x4f3770);}const fs=require('fs'),path=require('path'),Promise=require(a28_0x480a98(0x18e)),yaml=require(a28_0x480a98(0x173)),{CLOUDFORMATION_SCHEMA}=require(a28_0x480a98(0x191)),AWS=require('./AWSUtils')[a28_0x480a98(0x15b)],AWSUtils=require(a28_0x480a98(0x15e)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require(a28_0x480a98(0x197));Promise[a28_0x480a98(0x18b)](fs);function a28_0x4250(){const _0x2299cc=['72LOPYdH','schema','VpcId','hub-ha.yaml','Parameters','StackName','1678SSgPfC','9580pyywvy','browserstack:cluster','Key','2010-05-15','readFileAsync','112340XkhDAr','sTWMo','StackId','1870kLzTuw','createStack','-cf','Resources','promisifyAll','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','tcegD','bluebird','31284igYaOm','179iQYRzy','js-yaml-cloudformation-schema','CAPABILITY_NAMED_IAM','VdgDs','JdfHF','RmeUL','stackCreateComplete','../config/logger','2299176DLsMiF','CFTemplates','info','Properties','UlHfX','awsObj','CloudFormation','utf-8','./AWSUtils','browserstack:creationDate','YErtD','TemplateBody','bNHuJ','Tags','ClusterOIDCURL','://','DELETE','2952ZmPCdg','770487BnZaJL','waitFor','4TiBQWX','Value','load','split','BaseResourceName','promise','JJXIT','915628FjlMWW','jqBFl','js-yaml','createHubHaStack','apiVersion','push','BVynn'];a28_0x4250=function(){return _0x2299cc;};return a28_0x4250();}const addTags=async(_0x579f73,_0x32c92)=>{const _0x3227d6=a28_0x480a98;for(const _0x20b98d in _0x579f73[_0x3227d6(0x18a)]){_0x579f73[_0x3227d6(0x18a)][_0x20b98d]['Properties']&&_0x579f73[_0x3227d6(0x18a)][_0x20b98d][_0x3227d6(0x159)][_0x3227d6(0x163)]&&_0x579f73['Resources'][_0x20b98d][_0x3227d6(0x159)][_0x3227d6(0x163)]['push'](..._0x32c92);}};exports[a28_0x480a98(0x174)]=async(_0xd9dd77,_0x5547aa=null)=>{const _0x3b8e27=a28_0x480a98,_0x4b3c40={'gplga':_0x3b8e27(0x180),'KtZkv':_0x3b8e27(0x15f),'RmeUL':_0x3b8e27(0x182),'sTWMo':_0x3b8e27(0x157),'VdgDs':_0x3b8e27(0x17b),'JJXIT':_0x3b8e27(0x15d),'uTXKn':function(_0x110d5d,_0xca5096,_0xf18620){return _0x110d5d(_0xca5096,_0xf18620);},'UlHfX':_0x3b8e27(0x165),'BVynn':_0x3b8e27(0x166),'YErtD':_0x3b8e27(0x17a),'tcegD':_0x3b8e27(0x16e),'bNHuJ':_0x3b8e27(0x164),'gzHqY':_0x3b8e27(0x192),'jqBFl':_0x3b8e27(0x18c),'JdfHF':_0x3b8e27(0x196)},_0x19fb5d=COMMON_HST_TAGS,_0x5b4f5d={};_0x5b4f5d[_0x3b8e27(0x181)]=_0x4b3c40['gplga'],_0x5b4f5d[_0x3b8e27(0x16b)]=_0xd9dd77,_0x19fb5d[_0x3b8e27(0x176)](_0x5b4f5d),_0x19fb5d['push']({'Key':_0x4b3c40['KtZkv'],'Value':new Date()['valueOf']()['toString']()});const _0x1dbc31={};_0x1dbc31[_0x3b8e27(0x175)]=_0x4b3c40[_0x3b8e27(0x195)];const _0x5ca009=new AWS[(_0x3b8e27(0x15c))](_0x1dbc31),_0x1e18c0=await fs[_0x3b8e27(0x183)](path['join'](__dirname,'..',_0x4b3c40[_0x3b8e27(0x185)],_0x4b3c40[_0x3b8e27(0x193)]),_0x4b3c40[_0x3b8e27(0x170)]),_0x51c192={};_0x51c192[_0x3b8e27(0x179)]=CLOUDFORMATION_SCHEMA;const _0x2d9382=yaml[_0x3b8e27(0x16c)](_0x1e18c0,_0x51c192);await _0x4b3c40['uTXKn'](addTags,_0x2d9382,_0x19fb5d);const _0x4d4e42=JSON['stringify'](_0x2d9382);let _0x4d47a5=await AWSUtils['getOidcUrl'](_0xd9dd77);_0x4d47a5=_0x4d47a5[_0x3b8e27(0x16d)](_0x4b3c40[_0x3b8e27(0x15a)])[0x1];const _0x3cb3d8={};_0x3cb3d8[_0x3b8e27(0x17d)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0xd9dd77+_0x3b8e27(0x189),_0x3cb3d8['OnFailure']=_0x4b3c40[_0x3b8e27(0x177)],_0x3cb3d8[_0x3b8e27(0x161)]=_0x4d4e42,_0x3cb3d8[_0x3b8e27(0x17c)]=[{'ParameterKey':_0x4b3c40[_0x3b8e27(0x160)],'ParameterValue':_0x5547aa},{'ParameterKey':_0x4b3c40[_0x3b8e27(0x18d)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0xd9dd77},{'ParameterKey':_0x4b3c40[_0x3b8e27(0x162)],'ParameterValue':_0x4d47a5}],_0x3cb3d8['Capabilities']=[_0x4b3c40['gzHqY']],_0x3cb3d8[_0x3b8e27(0x163)]=_0x19fb5d;const _0x5317a9=_0x3cb3d8,_0x3698db=await _0x5ca009[_0x3b8e27(0x188)](_0x5317a9)[_0x3b8e27(0x16f)]();logger[_0x3b8e27(0x158)](_0x4b3c40[_0x3b8e27(0x172)]);const _0x33844d={};return _0x33844d['StackName']=_0x3698db[_0x3b8e27(0x186)],_0x5ca009[_0x3b8e27(0x169)](_0x4b3c40[_0x3b8e27(0x194)],_0x33844d)['promise']();};