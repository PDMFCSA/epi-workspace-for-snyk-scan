const a28_0xc0d840=a28_0x60e3;(function(_0xdc5b5f,_0xee53bf){const _0x4c20a1=a28_0x60e3,_0x2163d0=_0xdc5b5f();while(!![]){try{const _0x57a666=parseInt(_0x4c20a1(0x14c))/0x1+parseInt(_0x4c20a1(0x16c))/0x2*(parseInt(_0x4c20a1(0x158))/0x3)+parseInt(_0x4c20a1(0x148))/0x4+-parseInt(_0x4c20a1(0x184))/0x5+-parseInt(_0x4c20a1(0x181))/0x6+parseInt(_0x4c20a1(0x15d))/0x7+parseInt(_0x4c20a1(0x152))/0x8*(parseInt(_0x4c20a1(0x16b))/0x9);if(_0x57a666===_0xee53bf)break;else _0x2163d0['push'](_0x2163d0['shift']());}catch(_0x3cbb74){_0x2163d0['push'](_0x2163d0['shift']());}}}(a28_0x3bdf,0x7b4e2));const fs=require('fs'),path=require(a28_0xc0d840(0x177)),Promise=require(a28_0xc0d840(0x17f)),yaml=require(a28_0xc0d840(0x153)),{CLOUDFORMATION_SCHEMA}=require(a28_0xc0d840(0x183)),AWS=require(a28_0xc0d840(0x155))[a28_0xc0d840(0x173)],AWSUtils=require(a28_0xc0d840(0x155)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0xc0d840(0x16a)),{logger}=require(a28_0xc0d840(0x180));function a28_0x60e3(_0xef3772,_0x4989c6){const _0x3bdf5f=a28_0x3bdf();return a28_0x60e3=function(_0x60e357,_0x357c64){_0x60e357=_0x60e357-0x147;let _0x4589b6=_0x3bdf5f[_0x60e357];return _0x4589b6;},a28_0x60e3(_0xef3772,_0x4989c6);}function a28_0x3bdf(){const _0x15ed9d=['browserstack:cluster','waitFor','183XGDCph','info','load','jiTSp','GHRKN','158963Ypxnpn','BaseResourceName','IxhmX','valueOf','cAVuo','TdHfm','createHubHaStack','browserstack:creationDate','-cf','CFTemplates','xSsPc','join','Capabilities','../config/constants','104553XZAXyz','5202wxclMM','oUJAg','StackId','Value','CloudFormation','getOidcUrl','StackName','awsObj','stringify','Properties','Key','path','stackCreateComplete','CAPABILITY_NAMED_IAM','Resources','push','qrCSp','schema','TemplateBody','bluebird','../config/logger','4861746AhpfVt','Parameters','js-yaml-cloudformation-schema','3201835RcFhZT','OcxYe','FcpRf','2746196ONLzCA','Tags','createStack','promise','901925xjOsHn','readFileAsync','mSffQ','://','YvzVf','DELETE','128otofyV','js-yaml','lWAsI','./AWSUtils'];a28_0x3bdf=function(){return _0x15ed9d;};return a28_0x3bdf();}Promise['promisifyAll'](fs);const addTags=async(_0x4caa06,_0x20fffa)=>{const _0x5476c5=a28_0xc0d840;for(const _0x4de658 in _0x4caa06[_0x5476c5(0x17a)]){_0x4caa06[_0x5476c5(0x17a)][_0x4de658][_0x5476c5(0x175)]&&_0x4caa06[_0x5476c5(0x17a)][_0x4de658][_0x5476c5(0x175)][_0x5476c5(0x149)]&&_0x4caa06[_0x5476c5(0x17a)][_0x4de658][_0x5476c5(0x175)][_0x5476c5(0x149)][_0x5476c5(0x17b)](..._0x20fffa);}};exports[a28_0xc0d840(0x163)]=async(_0x183296,_0x4e8033=null)=>{const _0x694ea1=a28_0xc0d840,_0xbc9954={'xSsPc':_0x694ea1(0x156),'qrCSp':_0x694ea1(0x164),'fOZay':'2010-05-15','OcxYe':_0x694ea1(0x166),'TdHfm':'hub-ha.yaml','IxhmX':'utf-8','mSffQ':function(_0x26509c,_0x2a1a9d,_0x4f1606){return _0x26509c(_0x2a1a9d,_0x4f1606);},'lWAsI':_0x694ea1(0x14f),'GHRKN':_0x694ea1(0x151),'YvzVf':'VpcId','jiTSp':_0x694ea1(0x15e),'NopoD':'ClusterOIDCURL','FcpRf':_0x694ea1(0x179),'cAVuo':'Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','oUJAg':_0x694ea1(0x178)},_0x49f86b=COMMON_HST_TAGS,_0x54185c={};_0x54185c[_0x694ea1(0x176)]=_0xbc9954[_0x694ea1(0x167)],_0x54185c[_0x694ea1(0x16f)]=_0x183296,_0x49f86b[_0x694ea1(0x17b)](_0x54185c),_0x49f86b['push']({'Key':_0xbc9954[_0x694ea1(0x17c)],'Value':new Date()[_0x694ea1(0x160)]()['toString']()});const _0x415013={};_0x415013['apiVersion']=_0xbc9954['fOZay'];const _0x509853=new AWS[(_0x694ea1(0x170))](_0x415013),_0x21a84c=await fs[_0x694ea1(0x14d)](path[_0x694ea1(0x168)](__dirname,'..',_0xbc9954[_0x694ea1(0x185)],_0xbc9954[_0x694ea1(0x162)]),_0xbc9954[_0x694ea1(0x15f)]),_0x3b4589={};_0x3b4589[_0x694ea1(0x17d)]=CLOUDFORMATION_SCHEMA;const _0x683c46=yaml[_0x694ea1(0x15a)](_0x21a84c,_0x3b4589);await _0xbc9954[_0x694ea1(0x14e)](addTags,_0x683c46,_0x49f86b);const _0x27ec7c=JSON[_0x694ea1(0x174)](_0x683c46);let _0x368e44=await AWSUtils[_0x694ea1(0x171)](_0x183296);_0x368e44=_0x368e44['split'](_0xbc9954[_0x694ea1(0x154)])[0x1];const _0x2cb669={};_0x2cb669[_0x694ea1(0x172)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x183296+_0x694ea1(0x165),_0x2cb669['OnFailure']=_0xbc9954[_0x694ea1(0x15c)],_0x2cb669[_0x694ea1(0x17e)]=_0x27ec7c,_0x2cb669[_0x694ea1(0x182)]=[{'ParameterKey':_0xbc9954[_0x694ea1(0x150)],'ParameterValue':_0x4e8033},{'ParameterKey':_0xbc9954[_0x694ea1(0x15b)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x183296},{'ParameterKey':_0xbc9954['NopoD'],'ParameterValue':_0x368e44}],_0x2cb669[_0x694ea1(0x169)]=[_0xbc9954[_0x694ea1(0x147)]],_0x2cb669[_0x694ea1(0x149)]=_0x49f86b;const _0x324352=_0x2cb669,_0xd2d9ce=await _0x509853[_0x694ea1(0x14a)](_0x324352)['promise']();logger[_0x694ea1(0x159)](_0xbc9954[_0x694ea1(0x161)]);const _0x95429={};return _0x95429[_0x694ea1(0x172)]=_0xd2d9ce[_0x694ea1(0x16e)],_0x509853[_0x694ea1(0x157)](_0xbc9954[_0x694ea1(0x16d)],_0x95429)[_0x694ea1(0x14b)]();};