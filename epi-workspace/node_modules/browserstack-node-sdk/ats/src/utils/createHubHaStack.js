function a28_0x32fb(_0x54f768,_0x18394a){const _0x34cf13=a28_0x34cf();return a28_0x32fb=function(_0x32fbb0,_0x19bcf8){_0x32fbb0=_0x32fbb0-0x1f4;let _0x73d997=_0x34cf13[_0x32fbb0];return _0x73d997;},a28_0x32fb(_0x54f768,_0x18394a);}const a28_0x5cd90c=a28_0x32fb;(function(_0x4ed40c,_0xc45466){const _0x102692=a28_0x32fb,_0x1de071=_0x4ed40c();while(!![]){try{const _0x49cbef=-parseInt(_0x102692(0x1f7))/0x1+-parseInt(_0x102692(0x226))/0x2+-parseInt(_0x102692(0x203))/0x3*(-parseInt(_0x102692(0x229))/0x4)+-parseInt(_0x102692(0x22b))/0x5*(-parseInt(_0x102692(0x1fd))/0x6)+parseInt(_0x102692(0x1f6))/0x7*(-parseInt(_0x102692(0x1fe))/0x8)+-parseInt(_0x102692(0x204))/0x9+parseInt(_0x102692(0x1f5))/0xa;if(_0x49cbef===_0xc45466)break;else _0x1de071['push'](_0x1de071['shift']());}catch(_0x5796b2){_0x1de071['push'](_0x1de071['shift']());}}}(a28_0x34cf,0x23f96));const fs=require('fs'),path=require(a28_0x5cd90c(0x1fc)),Promise=require(a28_0x5cd90c(0x1fa)),yaml=require(a28_0x5cd90c(0x227)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),AWS=require(a28_0x5cd90c(0x215))['awsObj'],AWSUtils=require(a28_0x5cd90c(0x215)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x5cd90c(0x1f4)),{logger}=require(a28_0x5cd90c(0x225));Promise[a28_0x5cd90c(0x21e)](fs);const addTags=async(_0x210c54,_0x379fe9)=>{const _0x317212=a28_0x5cd90c;for(const _0x3d34d2 in _0x210c54['Resources']){_0x210c54[_0x317212(0x22e)][_0x3d34d2]['Properties']&&_0x210c54[_0x317212(0x22e)][_0x3d34d2][_0x317212(0x202)][_0x317212(0x224)]&&_0x210c54[_0x317212(0x22e)][_0x3d34d2][_0x317212(0x202)][_0x317212(0x224)][_0x317212(0x207)](..._0x379fe9);}};function a28_0x34cf(){const _0x528abc=['RZBKm','Parameters','VpcId','utf-8','Tags','../config/logger','23054HydUGk','js-yaml','-cf','667884QLZawD','OBmBJ','20dHSSkH','toString','Key','Resources','../config/constants','4485020EtjMFv','728357UAOFFl','131482uCaulY','StackId','getOidcUrl','bluebird','2010-05-15','path','73770QXmLPo','8VpRYna','OnFailure','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','XUwgz','Properties','3wEdwfz','2432187xIlNyu','apiVersion','CloudFormation','push','hub-ha.yaml','nlGZn','eOUyR','pkomh','StackName','qlhQw','DELETE','waitFor','stringify','CAPABILITY_NAMED_IAM','BaseResourceName','info','fPTUJ','./AWSUtils','OZNnx','promise','browserstack:cluster','schema','WRqqD','Capabilities','join','browserstack:creationDate','promisifyAll','stackCreateComplete'];a28_0x34cf=function(){return _0x528abc;};return a28_0x34cf();}exports['createHubHaStack']=async(_0x17f937,_0xed01b=null)=>{const _0x512106=a28_0x5cd90c,_0x15a0f4={'DnJZm':_0x512106(0x218),'nlGZn':_0x512106(0x21d),'OBmBJ':_0x512106(0x1fb),'XUwgz':'CFTemplates','YfVyc':_0x512106(0x208),'ejGjz':_0x512106(0x223),'fPTUJ':function(_0x5265a8,_0x5c6e2c,_0x1490fb){return _0x5265a8(_0x5c6e2c,_0x1490fb);},'OZNnx':'://','HoRZS':_0x512106(0x20e),'qlhQw':_0x512106(0x222),'etTnH':_0x512106(0x212),'pkomh':'ClusterOIDCURL','eOUyR':_0x512106(0x211),'WRqqD':_0x512106(0x200),'RZBKm':_0x512106(0x21f)},_0x1119f6=COMMON_HST_TAGS,_0xc9d200={};_0xc9d200[_0x512106(0x22d)]=_0x15a0f4['DnJZm'],_0xc9d200['Value']=_0x17f937,_0x1119f6[_0x512106(0x207)](_0xc9d200),_0x1119f6[_0x512106(0x207)]({'Key':_0x15a0f4[_0x512106(0x209)],'Value':new Date()['valueOf']()[_0x512106(0x22c)]()});const _0x170bda={};_0x170bda[_0x512106(0x205)]=_0x15a0f4[_0x512106(0x22a)];const _0x461f23=new AWS[(_0x512106(0x206))](_0x170bda),_0x1da4e0=await fs['readFileAsync'](path[_0x512106(0x21c)](__dirname,'..',_0x15a0f4[_0x512106(0x201)],_0x15a0f4['YfVyc']),_0x15a0f4['ejGjz']),_0x2e8aee={};_0x2e8aee[_0x512106(0x219)]=CLOUDFORMATION_SCHEMA;const _0x4f7645=yaml['load'](_0x1da4e0,_0x2e8aee);await _0x15a0f4[_0x512106(0x214)](addTags,_0x4f7645,_0x1119f6);const _0x50c700=JSON[_0x512106(0x210)](_0x4f7645);let _0x188ba5=await AWSUtils[_0x512106(0x1f9)](_0x17f937);_0x188ba5=_0x188ba5['split'](_0x15a0f4[_0x512106(0x216)])[0x1];const _0x1ec411={};_0x1ec411[_0x512106(0x20c)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x17f937+_0x512106(0x228),_0x1ec411[_0x512106(0x1ff)]=_0x15a0f4['HoRZS'],_0x1ec411['TemplateBody']=_0x50c700,_0x1ec411[_0x512106(0x221)]=[{'ParameterKey':_0x15a0f4[_0x512106(0x20d)],'ParameterValue':_0xed01b},{'ParameterKey':_0x15a0f4['etTnH'],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x17f937},{'ParameterKey':_0x15a0f4[_0x512106(0x20b)],'ParameterValue':_0x188ba5}],_0x1ec411[_0x512106(0x21b)]=[_0x15a0f4[_0x512106(0x20a)]],_0x1ec411[_0x512106(0x224)]=_0x1119f6;const _0x50caae=_0x1ec411,_0x76e3d5=await _0x461f23['createStack'](_0x50caae)[_0x512106(0x217)]();logger[_0x512106(0x213)](_0x15a0f4[_0x512106(0x21a)]);const _0x5a6d66={};return _0x5a6d66[_0x512106(0x20c)]=_0x76e3d5[_0x512106(0x1f8)],_0x461f23[_0x512106(0x20f)](_0x15a0f4[_0x512106(0x220)],_0x5a6d66)['promise']();};