const a28_0x4b0b6b=a28_0x563a;(function(_0x490d0e,_0x465dad){const _0x422984=a28_0x563a,_0x468c68=_0x490d0e();while(!![]){try{const _0x4c8827=-parseInt(_0x422984(0xe8))/0x1*(parseInt(_0x422984(0xbe))/0x2)+parseInt(_0x422984(0xd3))/0x3*(parseInt(_0x422984(0xe2))/0x4)+-parseInt(_0x422984(0xbf))/0x5+parseInt(_0x422984(0xc7))/0x6*(-parseInt(_0x422984(0xb9))/0x7)+-parseInt(_0x422984(0xd7))/0x8+parseInt(_0x422984(0xc0))/0x9+-parseInt(_0x422984(0xd9))/0xa*(-parseInt(_0x422984(0xd0))/0xb);if(_0x4c8827===_0x465dad)break;else _0x468c68['push'](_0x468c68['shift']());}catch(_0x4f2ca1){_0x468c68['push'](_0x468c68['shift']());}}}(a28_0x3e75,0x4c8e9));const fs=require('fs'),path=require(a28_0x4b0b6b(0xd4)),Promise=require('bluebird'),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a28_0x4b0b6b(0xc6)),AWS=require(a28_0x4b0b6b(0xb8))['awsObj'],AWSUtils=require(a28_0x4b0b6b(0xb8)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x4b0b6b(0xc2)),{logger}=require('../config/logger');function a28_0x3e75(){const _0x2c55d8=['../config/constants','CloudFormation','Parameters','Capabilities','js-yaml-cloudformation-schema','2194896pxaZLP','push','browserstack:creationDate','promisifyAll','apiVersion','schema','Crvob','ClusterOIDCURL','JelRL','2277ThDDEc','eXMHL','BaseResourceName','5442ncSzQS','path','waitFor','promise','1742656YpIJZH','CFTemplates','42740xQAGYR','Properties','srFpS','toString','createHubHaStack','createStack','StackId','Value','load','1356rVbkiE','join','info','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','AUgAM','OnFailure','177779BarvlI','VpcId','valueOf','hGpWv','stackCreateComplete','Resources','StackName','rtkVI','-cf','Tags','hub-ha.yaml','2010-05-15','qiNdV','./AWSUtils','7jbdaYT','getOidcUrl','utf-8','STUUr','ydtSR','2ZGULOS','2560280yXxEiD','786564PSLrGm','browserstack:cluster'];a28_0x3e75=function(){return _0x2c55d8;};return a28_0x3e75();}function a28_0x563a(_0x120dfd,_0x5dbbf5){const _0x3e7566=a28_0x3e75();return a28_0x563a=function(_0x563af0,_0xb81163){_0x563af0=_0x563af0-0xb8;let _0x35c9ba=_0x3e7566[_0x563af0];return _0x35c9ba;},a28_0x563a(_0x120dfd,_0x5dbbf5);}Promise[a28_0x4b0b6b(0xca)](fs);const addTags=async(_0x7b9a9,_0x4f126a)=>{const _0x2a9d09=a28_0x4b0b6b;for(const _0x4977f7 in _0x7b9a9[_0x2a9d09(0xed)]){_0x7b9a9[_0x2a9d09(0xed)][_0x4977f7][_0x2a9d09(0xda)]&&_0x7b9a9['Resources'][_0x4977f7]['Properties'][_0x2a9d09(0xf1)]&&_0x7b9a9[_0x2a9d09(0xed)][_0x4977f7][_0x2a9d09(0xda)]['Tags']['push'](..._0x4f126a);}};exports[a28_0x4b0b6b(0xdd)]=async(_0x589790,_0x18b25b=null)=>{const _0x32edba=a28_0x4b0b6b,_0x77693f={'ydtSR':_0x32edba(0xc1),'eXMHL':_0x32edba(0xc9),'rtkVI':_0x32edba(0xf3),'STUUr':_0x32edba(0xd8),'hGpWv':_0x32edba(0xf2),'Crvob':_0x32edba(0xbb),'JelRL':function(_0x590df4,_0x3d1087,_0x121975){return _0x590df4(_0x3d1087,_0x121975);},'QrJEG':'://','FyMBs':'DELETE','srFpS':_0x32edba(0xe9),'kkFRA':_0x32edba(0xd2),'NqZJb':_0x32edba(0xce),'AUgAM':'CAPABILITY_NAMED_IAM','DZgVI':_0x32edba(0xe5),'qiNdV':_0x32edba(0xec)},_0x5a8a61=COMMON_HST_TAGS,_0x132e43={};_0x132e43['Key']=_0x77693f[_0x32edba(0xbd)],_0x132e43[_0x32edba(0xe0)]=_0x589790,_0x5a8a61[_0x32edba(0xc8)](_0x132e43),_0x5a8a61[_0x32edba(0xc8)]({'Key':_0x77693f[_0x32edba(0xd1)],'Value':new Date()[_0x32edba(0xea)]()[_0x32edba(0xdc)]()});const _0x2ae638={};_0x2ae638[_0x32edba(0xcb)]=_0x77693f[_0x32edba(0xef)];const _0x294df0=new AWS[(_0x32edba(0xc3))](_0x2ae638),_0x3a0412=await fs['readFileAsync'](path[_0x32edba(0xe3)](__dirname,'..',_0x77693f[_0x32edba(0xbc)],_0x77693f[_0x32edba(0xeb)]),_0x77693f[_0x32edba(0xcd)]),_0x59c469={};_0x59c469[_0x32edba(0xcc)]=CLOUDFORMATION_SCHEMA;const _0x4ef05b=yaml[_0x32edba(0xe1)](_0x3a0412,_0x59c469);await _0x77693f[_0x32edba(0xcf)](addTags,_0x4ef05b,_0x5a8a61);const _0x57d21c=JSON['stringify'](_0x4ef05b);let _0x4ddedb=await AWSUtils[_0x32edba(0xba)](_0x589790);_0x4ddedb=_0x4ddedb['split'](_0x77693f['QrJEG'])[0x1];const _0x57b269={};_0x57b269[_0x32edba(0xee)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x589790+_0x32edba(0xf0),_0x57b269[_0x32edba(0xe7)]=_0x77693f['FyMBs'],_0x57b269['TemplateBody']=_0x57d21c,_0x57b269[_0x32edba(0xc4)]=[{'ParameterKey':_0x77693f[_0x32edba(0xdb)],'ParameterValue':_0x18b25b},{'ParameterKey':_0x77693f['kkFRA'],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x589790},{'ParameterKey':_0x77693f['NqZJb'],'ParameterValue':_0x4ddedb}],_0x57b269[_0x32edba(0xc5)]=[_0x77693f[_0x32edba(0xe6)]],_0x57b269[_0x32edba(0xf1)]=_0x5a8a61;const _0x2ea713=_0x57b269,_0x46e091=await _0x294df0[_0x32edba(0xde)](_0x2ea713)[_0x32edba(0xd6)]();logger[_0x32edba(0xe4)](_0x77693f['DZgVI']);const _0x23e1f={};return _0x23e1f[_0x32edba(0xee)]=_0x46e091[_0x32edba(0xdf)],_0x294df0[_0x32edba(0xd5)](_0x77693f[_0x32edba(0xf4)],_0x23e1f)[_0x32edba(0xd6)]();};