const a28_0x4cac50=a28_0x31ee;(function(_0x257fcd,_0x373545){const _0xefaa71=a28_0x31ee,_0x5c0cfe=_0x257fcd();while(!![]){try{const _0x154470=parseInt(_0xefaa71(0xfd))/0x1+-parseInt(_0xefaa71(0x103))/0x2*(parseInt(_0xefaa71(0xf7))/0x3)+parseInt(_0xefaa71(0x105))/0x4+-parseInt(_0xefaa71(0x102))/0x5*(-parseInt(_0xefaa71(0x122))/0x6)+-parseInt(_0xefaa71(0xe4))/0x7+-parseInt(_0xefaa71(0x11c))/0x8*(parseInt(_0xefaa71(0xf6))/0x9)+-parseInt(_0xefaa71(0x117))/0xa*(parseInt(_0xefaa71(0x118))/0xb);if(_0x154470===_0x373545)break;else _0x5c0cfe['push'](_0x5c0cfe['shift']());}catch(_0x47b5c7){_0x5c0cfe['push'](_0x5c0cfe['shift']());}}}(a28_0xf619,0x7311f));const fs=require('fs'),path=require(a28_0x4cac50(0x110)),Promise=require(a28_0x4cac50(0x113)),yaml=require(a28_0x4cac50(0x10d)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),AWS=require(a28_0x4cac50(0xed))[a28_0x4cac50(0xfa)],AWSUtils=require(a28_0x4cac50(0xed)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x4cac50(0xeb)),{logger}=require(a28_0x4cac50(0xe6));function a28_0x31ee(_0x146113,_0x171fb9){const _0xf619f4=a28_0xf619();return a28_0x31ee=function(_0x31ee64,_0x5a84c6){_0x31ee64=_0x31ee64-0xe3;let _0x58dfa3=_0xf619f4[_0x31ee64];return _0x58dfa3;},a28_0x31ee(_0x146113,_0x171fb9);}function a28_0xf619(){const _0x1997cf=['promise','4313204ACyGJD','CAPABILITY_NAMED_IAM','../config/logger','createHubHaStack','apiVersion','hub-ha.yaml','getOidcUrl','../config/constants','push','./AWSUtils','YGBSB','ElurF','niMYw','TemplateBody','wqQey','Capabilities','zwbnE','VpcId','556092BHgfes','27korzKj','join','toString','awsObj','MKFfU','utf-8','704608CprFDc','ClusterOIDCURL','createStack','HeRwf','SjrBy','5pzXVtR','94058cKFvMf','munHO','2318296KRXIhe','info','waitFor','OrvdF','nrzPo','Key','OnFailure','readFileAsync','js-yaml','-cf','StackName','path','2010-05-15','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','bluebird','xugYk','browserstack:cluster','://','260awVDaM','120274lxPyNr','XGyeK','YYOfu','StackId','40YmtHvI','stringify','promisifyAll','Resources','Tags','schema','4918812BwcSHx','stackCreateComplete','valueOf','Properties'];a28_0xf619=function(){return _0x1997cf;};return a28_0xf619();}Promise[a28_0x4cac50(0x11e)](fs);const addTags=async(_0x3408af,_0xef90ab)=>{const _0xc35418=a28_0x4cac50;for(const _0x125326 in _0x3408af['Resources']){_0x3408af['Resources'][_0x125326][_0xc35418(0x125)]&&_0x3408af['Resources'][_0x125326][_0xc35418(0x125)][_0xc35418(0x120)]&&_0x3408af[_0xc35418(0x11f)][_0x125326][_0xc35418(0x125)][_0xc35418(0x120)][_0xc35418(0xec)](..._0xef90ab);}};exports[a28_0x4cac50(0xe7)]=async(_0x34cecd,_0x469897=null)=>{const _0x5e86df=a28_0x4cac50,_0xfa39c1={'XGyeK':_0x5e86df(0x115),'ElurF':'browserstack:creationDate','SjrBy':_0x5e86df(0x111),'zwbnE':'CFTemplates','wqQey':_0x5e86df(0xe9),'OrvdF':_0x5e86df(0xfc),'mKATJ':function(_0x392f45,_0x47b456,_0x2a468d){return _0x392f45(_0x47b456,_0x2a468d);},'niMYw':_0x5e86df(0x116),'HeRwf':'DELETE','nrzPo':_0x5e86df(0xf5),'munHO':'BaseResourceName','xugYk':_0x5e86df(0xfe),'YYOfu':_0x5e86df(0xe5),'MKFfU':_0x5e86df(0x112),'YGBSB':_0x5e86df(0x123)},_0x34f2aa=COMMON_HST_TAGS,_0x5ed79f={};_0x5ed79f[_0x5e86df(0x10a)]=_0xfa39c1[_0x5e86df(0x119)],_0x5ed79f['Value']=_0x34cecd,_0x34f2aa[_0x5e86df(0xec)](_0x5ed79f),_0x34f2aa[_0x5e86df(0xec)]({'Key':_0xfa39c1[_0x5e86df(0xef)],'Value':new Date()[_0x5e86df(0x124)]()[_0x5e86df(0xf9)]()});const _0x5898ff={};_0x5898ff[_0x5e86df(0xe8)]=_0xfa39c1[_0x5e86df(0x101)];const _0x181ea5=new AWS['CloudFormation'](_0x5898ff),_0x3c3a90=await fs[_0x5e86df(0x10c)](path[_0x5e86df(0xf8)](__dirname,'..',_0xfa39c1[_0x5e86df(0xf4)],_0xfa39c1[_0x5e86df(0xf2)]),_0xfa39c1[_0x5e86df(0x108)]),_0x4f0227={};_0x4f0227[_0x5e86df(0x121)]=CLOUDFORMATION_SCHEMA;const _0x57d41b=yaml['load'](_0x3c3a90,_0x4f0227);await _0xfa39c1['mKATJ'](addTags,_0x57d41b,_0x34f2aa);const _0x37af5c=JSON[_0x5e86df(0x11d)](_0x57d41b);let _0x54ab0a=await AWSUtils[_0x5e86df(0xea)](_0x34cecd);_0x54ab0a=_0x54ab0a['split'](_0xfa39c1[_0x5e86df(0xf0)])[0x1];const _0x5a78ad={};_0x5a78ad['StackName']=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x34cecd+_0x5e86df(0x10e),_0x5a78ad[_0x5e86df(0x10b)]=_0xfa39c1[_0x5e86df(0x100)],_0x5a78ad[_0x5e86df(0xf1)]=_0x37af5c,_0x5a78ad['Parameters']=[{'ParameterKey':_0xfa39c1[_0x5e86df(0x109)],'ParameterValue':_0x469897},{'ParameterKey':_0xfa39c1[_0x5e86df(0x104)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x34cecd},{'ParameterKey':_0xfa39c1[_0x5e86df(0x114)],'ParameterValue':_0x54ab0a}],_0x5a78ad[_0x5e86df(0xf3)]=[_0xfa39c1[_0x5e86df(0x11a)]],_0x5a78ad[_0x5e86df(0x120)]=_0x34f2aa;const _0x84d40e=_0x5a78ad,_0x299c87=await _0x181ea5[_0x5e86df(0xff)](_0x84d40e)['promise']();logger[_0x5e86df(0x106)](_0xfa39c1[_0x5e86df(0xfb)]);const _0x222988={};return _0x222988[_0x5e86df(0x10f)]=_0x299c87[_0x5e86df(0x11b)],_0x181ea5[_0x5e86df(0x107)](_0xfa39c1[_0x5e86df(0xee)],_0x222988)[_0x5e86df(0xe3)]();};