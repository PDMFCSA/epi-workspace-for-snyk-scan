function a28_0x5602(_0x258b97,_0x21309c){const _0xe2a539=a28_0xe2a5();return a28_0x5602=function(_0x5602d5,_0x5060ba){_0x5602d5=_0x5602d5-0x18b;let _0x5539c3=_0xe2a539[_0x5602d5];return _0x5539c3;},a28_0x5602(_0x258b97,_0x21309c);}const a28_0x4e83c7=a28_0x5602;(function(_0x517eec,_0xc16e50){const _0x1401d5=a28_0x5602,_0x5831b6=_0x517eec();while(!![]){try{const _0xf086a3=parseInt(_0x1401d5(0x18d))/0x1+-parseInt(_0x1401d5(0x18c))/0x2*(parseInt(_0x1401d5(0x196))/0x3)+-parseInt(_0x1401d5(0x193))/0x4+parseInt(_0x1401d5(0x1af))/0x5+-parseInt(_0x1401d5(0x1bc))/0x6+-parseInt(_0x1401d5(0x191))/0x7*(-parseInt(_0x1401d5(0x1be))/0x8)+parseInt(_0x1401d5(0x1a4))/0x9;if(_0xf086a3===_0xc16e50)break;else _0x5831b6['push'](_0x5831b6['shift']());}catch(_0x54318b){_0x5831b6['push'](_0x5831b6['shift']());}}}(a28_0xe2a5,0x76f85));const fs=require('fs'),path=require(a28_0x4e83c7(0x1b7)),Promise=require(a28_0x4e83c7(0x19b)),yaml=require(a28_0x4e83c7(0x197)),{CLOUDFORMATION_SCHEMA}=require(a28_0x4e83c7(0x1c8)),AWS=require(a28_0x4e83c7(0x1b0))[a28_0x4e83c7(0x1a9)],AWSUtils=require(a28_0x4e83c7(0x1b0)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require('../config/logger');Promise[a28_0x4e83c7(0x1c2)](fs);function a28_0xe2a5(){const _0x82039c=['CBfuH','StackId','stackCreateComplete','toString','749575knlLvD','./AWSUtils','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','fGBMq','info','Resources','hiqrP','Value','path','BaseResourceName','2010-05-15','wruye','Properties','5646012jbnCgf','readFileAsync','1024qTlOkz','Capabilities','AdzNC','schema','promisifyAll','browserstack:cluster','utf-8','StackName','CFTemplates','split','js-yaml-cloudformation-schema','promise','95618MUBkpQ','45663AhfCEV','jvMej','VpcId','stringify','37226EXAjem','getOidcUrl','1721792JSMQSE','BPjJl','-cf','12AuyPJF','js-yaml','qQQXC','join','TemplateBody','bluebird','Key','imxFz','NuHWe','OnFailure','CloudFormation','waitFor','push','jvMAK','10563345IHnWSS','Tags','createStack','PPTtF','DELETE','awsObj','cHwsC'];a28_0xe2a5=function(){return _0x82039c;};return a28_0xe2a5();}const addTags=async(_0x4be988,_0x27f1c0)=>{const _0x2f6474=a28_0x4e83c7;for(const _0x130202 in _0x4be988[_0x2f6474(0x1b4)]){_0x4be988[_0x2f6474(0x1b4)][_0x130202][_0x2f6474(0x1bb)]&&_0x4be988[_0x2f6474(0x1b4)][_0x130202][_0x2f6474(0x1bb)][_0x2f6474(0x1a5)]&&_0x4be988[_0x2f6474(0x1b4)][_0x130202][_0x2f6474(0x1bb)][_0x2f6474(0x1a5)][_0x2f6474(0x1a2)](..._0x27f1c0);}};exports['createHubHaStack']=async(_0x3d62de,_0x374bac=null)=>{const _0x54f736=a28_0x4e83c7,_0xcad390={'wruye':_0x54f736(0x1c3),'imxFz':'browserstack:creationDate','BPjJl':_0x54f736(0x1b9),'yxEOr':_0x54f736(0x1c6),'jvMAK':'hub-ha.yaml','jvMej':_0x54f736(0x1c4),'cHwsC':function(_0x3f885b,_0x5ebc5d,_0x322ce7){return _0x3f885b(_0x5ebc5d,_0x322ce7);},'NuHWe':'://','CBfuH':_0x54f736(0x1a8),'fGBMq':_0x54f736(0x18f),'PPTtF':_0x54f736(0x1b8),'BpneJ':'ClusterOIDCURL','qQQXC':'CAPABILITY_NAMED_IAM','AdzNC':_0x54f736(0x1b1),'hiqrP':_0x54f736(0x1ad)},_0x48de2f=COMMON_HST_TAGS,_0x2a6871={};_0x2a6871[_0x54f736(0x19c)]=_0xcad390[_0x54f736(0x1ba)],_0x2a6871[_0x54f736(0x1b6)]=_0x3d62de,_0x48de2f[_0x54f736(0x1a2)](_0x2a6871),_0x48de2f[_0x54f736(0x1a2)]({'Key':_0xcad390[_0x54f736(0x19d)],'Value':new Date()['valueOf']()[_0x54f736(0x1ae)]()});const _0xa059ac={};_0xa059ac['apiVersion']=_0xcad390[_0x54f736(0x194)];const _0x3f42c3=new AWS[(_0x54f736(0x1a0))](_0xa059ac),_0x2f25f7=await fs[_0x54f736(0x1bd)](path[_0x54f736(0x199)](__dirname,'..',_0xcad390['yxEOr'],_0xcad390[_0x54f736(0x1a3)]),_0xcad390[_0x54f736(0x18e)]),_0x3e9f92={};_0x3e9f92[_0x54f736(0x1c1)]=CLOUDFORMATION_SCHEMA;const _0x572761=yaml['load'](_0x2f25f7,_0x3e9f92);await _0xcad390[_0x54f736(0x1aa)](addTags,_0x572761,_0x48de2f);const _0x1565fd=JSON[_0x54f736(0x190)](_0x572761);let _0x42f84e=await AWSUtils[_0x54f736(0x192)](_0x3d62de);_0x42f84e=_0x42f84e[_0x54f736(0x1c7)](_0xcad390[_0x54f736(0x19e)])[0x1];const _0x5ca3b9={};_0x5ca3b9[_0x54f736(0x1c5)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3d62de+_0x54f736(0x195),_0x5ca3b9[_0x54f736(0x19f)]=_0xcad390[_0x54f736(0x1ab)],_0x5ca3b9[_0x54f736(0x19a)]=_0x1565fd,_0x5ca3b9['Parameters']=[{'ParameterKey':_0xcad390[_0x54f736(0x1b2)],'ParameterValue':_0x374bac},{'ParameterKey':_0xcad390[_0x54f736(0x1a7)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3d62de},{'ParameterKey':_0xcad390['BpneJ'],'ParameterValue':_0x42f84e}],_0x5ca3b9[_0x54f736(0x1bf)]=[_0xcad390[_0x54f736(0x198)]],_0x5ca3b9[_0x54f736(0x1a5)]=_0x48de2f;const _0x3cd5a2=_0x5ca3b9,_0x4874c1=await _0x3f42c3[_0x54f736(0x1a6)](_0x3cd5a2)[_0x54f736(0x18b)]();logger[_0x54f736(0x1b3)](_0xcad390[_0x54f736(0x1c0)]);const _0x1df56d={};return _0x1df56d[_0x54f736(0x1c5)]=_0x4874c1[_0x54f736(0x1ac)],_0x3f42c3[_0x54f736(0x1a1)](_0xcad390[_0x54f736(0x1b5)],_0x1df56d)[_0x54f736(0x18b)]();};