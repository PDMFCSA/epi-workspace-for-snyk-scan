const a28_0x4f801a=a28_0x4c4d;function a28_0x4c4d(_0x122acd,_0x408efb){const _0x159908=a28_0x1599();return a28_0x4c4d=function(_0x4c4d84,_0x43f381){_0x4c4d84=_0x4c4d84-0x169;let _0x3e54e3=_0x159908[_0x4c4d84];return _0x3e54e3;},a28_0x4c4d(_0x122acd,_0x408efb);}(function(_0x129515,_0x14e4e9){const _0x54741e=a28_0x4c4d,_0x304525=_0x129515();while(!![]){try{const _0x58a334=parseInt(_0x54741e(0x17f))/0x1*(parseInt(_0x54741e(0x1a9))/0x2)+-parseInt(_0x54741e(0x170))/0x3*(-parseInt(_0x54741e(0x185))/0x4)+-parseInt(_0x54741e(0x1aa))/0x5+parseInt(_0x54741e(0x18e))/0x6*(-parseInt(_0x54741e(0x189))/0x7)+parseInt(_0x54741e(0x16f))/0x8+parseInt(_0x54741e(0x17d))/0x9*(parseInt(_0x54741e(0x19b))/0xa)+parseInt(_0x54741e(0x19c))/0xb*(-parseInt(_0x54741e(0x176))/0xc);if(_0x58a334===_0x14e4e9)break;else _0x304525['push'](_0x304525['shift']());}catch(_0x540b26){_0x304525['push'](_0x304525['shift']());}}}(a28_0x1599,0x835f7));function a28_0x1599(){const _0x1c2ade=['80DkiIji','YSuXq','qRqAz','valueOf','38913bSMRsS','stackCreateComplete','js-yaml','split','readFileAsync','468ANPvlc','Key','DELETE','ClusterOIDCURL','CAPABILITY_NAMED_IAM','promisifyAll','CorjX','createHubHaStack','zDBGd','push','hub-ha.yaml','getOidcUrl','toString','252190TPuSmD','54527dLUhcX','CbMMZ','CloudFormation','OnFailure','UgkPO','./AWSUtils','Properties','uIfqK','load','join','VeGSy','stringify','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','19296GaRkam','4841205FyovTI','zAMIz','VpcId','Capabilities','TemplateBody','createStack','BaseResourceName','Tags','4663672VhQZmu','80169LrVnku','browserstack:cluster','Value','Resources','../config/logger','dLWxo','60ZXHKJI','StackId','info','../config/constants','promise','browserstack:creationDate','StackName','144cpxgHG','SUjms','46yOeibV','awsObj','CFTemplates','path','://','waitFor'];a28_0x1599=function(){return _0x1c2ade;};return a28_0x1599();}const fs=require('fs'),path=require(a28_0x4f801a(0x182)),Promise=require('bluebird'),yaml=require(a28_0x4f801a(0x18b)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),AWS=require(a28_0x4f801a(0x1a1))[a28_0x4f801a(0x180)],AWSUtils=require(a28_0x4f801a(0x1a1)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x4f801a(0x179)),{logger}=require(a28_0x4f801a(0x174));Promise[a28_0x4f801a(0x193)](fs);const addTags=async(_0x8a8428,_0x4a45a2)=>{const _0x3f1150=a28_0x4f801a;for(const _0x357425 in _0x8a8428[_0x3f1150(0x173)]){_0x8a8428[_0x3f1150(0x173)][_0x357425]['Properties']&&_0x8a8428['Resources'][_0x357425]['Properties'][_0x3f1150(0x16e)]&&_0x8a8428[_0x3f1150(0x173)][_0x357425][_0x3f1150(0x1a2)][_0x3f1150(0x16e)]['push'](..._0x4a45a2);}};exports[a28_0x4f801a(0x195)]=async(_0x171593,_0x3dd9fa=null)=>{const _0x20b494=a28_0x4f801a,_0x323c95={'UgkPO':_0x20b494(0x171),'CbMMZ':_0x20b494(0x17b),'JitpH':'2010-05-15','TTAId':_0x20b494(0x181),'YSuXq':_0x20b494(0x198),'xehvQ':'utf-8','qRqAz':function(_0x3694af,_0x3d93cf,_0x2dbaae){return _0x3694af(_0x3d93cf,_0x2dbaae);},'TWWJL':_0x20b494(0x183),'SUjms':_0x20b494(0x190),'CorjX':_0x20b494(0x169),'VeGSy':_0x20b494(0x16d),'uIfqK':_0x20b494(0x191),'zDBGd':_0x20b494(0x192),'dLWxo':_0x20b494(0x1a8),'zAMIz':_0x20b494(0x18a)},_0x42cd79=COMMON_HST_TAGS,_0x2816be={};_0x2816be[_0x20b494(0x18f)]=_0x323c95[_0x20b494(0x1a0)],_0x2816be[_0x20b494(0x172)]=_0x171593,_0x42cd79[_0x20b494(0x197)](_0x2816be),_0x42cd79[_0x20b494(0x197)]({'Key':_0x323c95[_0x20b494(0x19d)],'Value':new Date()[_0x20b494(0x188)]()[_0x20b494(0x19a)]()});const _0x209418={};_0x209418['apiVersion']=_0x323c95['JitpH'];const _0x4ef814=new AWS[(_0x20b494(0x19e))](_0x209418),_0x196e47=await fs[_0x20b494(0x18d)](path[_0x20b494(0x1a5)](__dirname,'..',_0x323c95['TTAId'],_0x323c95[_0x20b494(0x186)]),_0x323c95['xehvQ']),_0x57a4d7={};_0x57a4d7['schema']=CLOUDFORMATION_SCHEMA;const _0x7a8c80=yaml[_0x20b494(0x1a4)](_0x196e47,_0x57a4d7);await _0x323c95[_0x20b494(0x187)](addTags,_0x7a8c80,_0x42cd79);const _0x29842f=JSON[_0x20b494(0x1a7)](_0x7a8c80);let _0x36d699=await AWSUtils[_0x20b494(0x199)](_0x171593);_0x36d699=_0x36d699[_0x20b494(0x18c)](_0x323c95['TWWJL'])[0x1];const _0x10cdf2={};_0x10cdf2['StackName']=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x171593+'-cf',_0x10cdf2[_0x20b494(0x19f)]=_0x323c95[_0x20b494(0x17e)],_0x10cdf2[_0x20b494(0x16b)]=_0x29842f,_0x10cdf2['Parameters']=[{'ParameterKey':_0x323c95[_0x20b494(0x194)],'ParameterValue':_0x3dd9fa},{'ParameterKey':_0x323c95[_0x20b494(0x1a6)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x171593},{'ParameterKey':_0x323c95[_0x20b494(0x1a3)],'ParameterValue':_0x36d699}],_0x10cdf2[_0x20b494(0x16a)]=[_0x323c95[_0x20b494(0x196)]],_0x10cdf2[_0x20b494(0x16e)]=_0x42cd79;const _0x3a2f9c=_0x10cdf2,_0x2081ac=await _0x4ef814[_0x20b494(0x16c)](_0x3a2f9c)[_0x20b494(0x17a)]();logger[_0x20b494(0x178)](_0x323c95[_0x20b494(0x175)]);const _0x22106={};return _0x22106[_0x20b494(0x17c)]=_0x2081ac[_0x20b494(0x177)],_0x4ef814[_0x20b494(0x184)](_0x323c95[_0x20b494(0x1ab)],_0x22106)[_0x20b494(0x17a)]();};