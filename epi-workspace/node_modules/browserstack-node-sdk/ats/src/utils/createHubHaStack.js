const a28_0x4ff1a0=a28_0xf120;(function(_0x2333ff,_0x2a4ab5){const _0x2c0c41=a28_0xf120,_0x405d52=_0x2333ff();while(!![]){try{const _0x174eb3=-parseInt(_0x2c0c41(0x122))/0x1+-parseInt(_0x2c0c41(0x127))/0x2+-parseInt(_0x2c0c41(0x12b))/0x3*(parseInt(_0x2c0c41(0x138))/0x4)+-parseInt(_0x2c0c41(0x12e))/0x5*(-parseInt(_0x2c0c41(0x11e))/0x6)+parseInt(_0x2c0c41(0x133))/0x7+-parseInt(_0x2c0c41(0x156))/0x8+parseInt(_0x2c0c41(0x153))/0x9;if(_0x174eb3===_0x2a4ab5)break;else _0x405d52['push'](_0x405d52['shift']());}catch(_0x1c00c7){_0x405d52['push'](_0x405d52['shift']());}}}(a28_0x3065,0x2e643));function a28_0xf120(_0xc20369,_0x4959df){const _0x306525=a28_0x3065();return a28_0xf120=function(_0xf12006,_0x5a47c2){_0xf12006=_0xf12006-0x11e;let _0xb959c=_0x306525[_0xf12006];return _0xb959c;},a28_0xf120(_0xc20369,_0x4959df);}const fs=require('fs'),path=require(a28_0x4ff1a0(0x14a)),Promise=require(a28_0x4ff1a0(0x143)),yaml=require(a28_0x4ff1a0(0x13d)),{CLOUDFORMATION_SCHEMA}=require(a28_0x4ff1a0(0x158)),AWS=require(a28_0x4ff1a0(0x150))[a28_0x4ff1a0(0x12d)],AWSUtils=require(a28_0x4ff1a0(0x150)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x4ff1a0(0x14d)),{logger}=require(a28_0x4ff1a0(0x125));Promise[a28_0x4ff1a0(0x146)](fs);const addTags=async(_0x13b16e,_0x60d08f)=>{const _0x3c0b67=a28_0x4ff1a0;for(const _0x511250 in _0x13b16e[_0x3c0b67(0x144)]){_0x13b16e[_0x3c0b67(0x144)][_0x511250][_0x3c0b67(0x13c)]&&_0x13b16e[_0x3c0b67(0x144)][_0x511250][_0x3c0b67(0x13c)][_0x3c0b67(0x14f)]&&_0x13b16e[_0x3c0b67(0x144)][_0x511250][_0x3c0b67(0x13c)]['Tags'][_0x3c0b67(0x132)](..._0x60d08f);}};function a28_0x3065(){const _0x3174b5=['Resources','apiVersion','promisifyAll','valueOf','2010-05-15','browserstack:creationDate','path','Parameters','stringify','../config/constants','ClusterOIDCURL','Tags','./AWSUtils','getOidcUrl','ylWil','6702264EqmpcG','StackId','readFileAsync','2164960OdFhVd','xOEjk','js-yaml-cloudformation-schema','split','createHubHaStack','browserstack:cluster','12eqLRzY','xRXNw','StackName','zLyfS','281156IoPHzr','DELETE','TemplateBody','../config/logger','iqZoG','396452vHrjzA','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','waitFor','CloudFormation','26517tyiovy','HBPaG','awsObj','234670CgYpBK','stackCreateComplete','Capabilities','VpcId','push','1576421OSGnaq','createStack','CFTemplates','schema','CAPABILITY_NAMED_IAM','56tWbMng','NjLTd','-cf','MaCjT','Properties','js-yaml','vIeSh','OnFailure','Value','://','promise','bluebird'];a28_0x3065=function(){return _0x3174b5;};return a28_0x3065();}exports[a28_0x4ff1a0(0x15a)]=async(_0x3d9873,_0x1afbe3=null)=>{const _0x543b41=a28_0x4ff1a0,_0x2edcc1={'syzkm':_0x543b41(0x15b),'HBPaG':_0x543b41(0x149),'qWZUJ':_0x543b41(0x148),'Vkxve':_0x543b41(0x135),'xOEjk':'hub-ha.yaml','MaCjT':'utf-8','iTpMD':function(_0x7a2619,_0x573301,_0x5a70cb){return _0x7a2619(_0x573301,_0x5a70cb);},'xRXNw':_0x543b41(0x141),'iqZoG':_0x543b41(0x123),'NjLTd':_0x543b41(0x131),'szpSF':'BaseResourceName','mbCeG':_0x543b41(0x14e),'vIeSh':_0x543b41(0x137),'ylWil':_0x543b41(0x128),'zLyfS':_0x543b41(0x12f)},_0x226bdb=COMMON_HST_TAGS,_0x1cf830={};_0x1cf830['Key']=_0x2edcc1['syzkm'],_0x1cf830[_0x543b41(0x140)]=_0x3d9873,_0x226bdb[_0x543b41(0x132)](_0x1cf830),_0x226bdb[_0x543b41(0x132)]({'Key':_0x2edcc1[_0x543b41(0x12c)],'Value':new Date()[_0x543b41(0x147)]()['toString']()});const _0x3f5c35={};_0x3f5c35[_0x543b41(0x145)]=_0x2edcc1['qWZUJ'];const _0x2d161c=new AWS[(_0x543b41(0x12a))](_0x3f5c35),_0x5ccdd9=await fs[_0x543b41(0x155)](path['join'](__dirname,'..',_0x2edcc1['Vkxve'],_0x2edcc1[_0x543b41(0x157)]),_0x2edcc1[_0x543b41(0x13b)]),_0x59c344={};_0x59c344[_0x543b41(0x136)]=CLOUDFORMATION_SCHEMA;const _0xa4ee02=yaml['load'](_0x5ccdd9,_0x59c344);await _0x2edcc1['iTpMD'](addTags,_0xa4ee02,_0x226bdb);const _0x265aae=JSON[_0x543b41(0x14c)](_0xa4ee02);let _0x26c34d=await AWSUtils[_0x543b41(0x151)](_0x3d9873);_0x26c34d=_0x26c34d[_0x543b41(0x159)](_0x2edcc1[_0x543b41(0x11f)])[0x1];const _0x2a154d={};_0x2a154d[_0x543b41(0x120)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3d9873+_0x543b41(0x13a),_0x2a154d[_0x543b41(0x13f)]=_0x2edcc1[_0x543b41(0x126)],_0x2a154d[_0x543b41(0x124)]=_0x265aae,_0x2a154d[_0x543b41(0x14b)]=[{'ParameterKey':_0x2edcc1[_0x543b41(0x139)],'ParameterValue':_0x1afbe3},{'ParameterKey':_0x2edcc1['szpSF'],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3d9873},{'ParameterKey':_0x2edcc1['mbCeG'],'ParameterValue':_0x26c34d}],_0x2a154d[_0x543b41(0x130)]=[_0x2edcc1[_0x543b41(0x13e)]],_0x2a154d[_0x543b41(0x14f)]=_0x226bdb;const _0x3956b3=_0x2a154d,_0x1b1cc7=await _0x2d161c[_0x543b41(0x134)](_0x3956b3)[_0x543b41(0x142)]();logger['info'](_0x2edcc1[_0x543b41(0x152)]);const _0x57818e={};return _0x57818e[_0x543b41(0x120)]=_0x1b1cc7[_0x543b41(0x154)],_0x2d161c[_0x543b41(0x129)](_0x2edcc1[_0x543b41(0x121)],_0x57818e)[_0x543b41(0x142)]();};