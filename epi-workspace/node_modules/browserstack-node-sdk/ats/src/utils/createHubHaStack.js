const a26_0x35ac08=a26_0x1ba9;(function(_0x682633,_0x2fd003){const _0x2d987e=a26_0x1ba9,_0x147a5e=_0x682633();while(!![]){try{const _0x57df80=parseInt(_0x2d987e(0x183))/0x1+parseInt(_0x2d987e(0x16c))/0x2*(parseInt(_0x2d987e(0x15b))/0x3)+-parseInt(_0x2d987e(0x191))/0x4*(-parseInt(_0x2d987e(0x160))/0x5)+-parseInt(_0x2d987e(0x172))/0x6*(parseInt(_0x2d987e(0x164))/0x7)+-parseInt(_0x2d987e(0x188))/0x8+-parseInt(_0x2d987e(0x171))/0x9+-parseInt(_0x2d987e(0x165))/0xa*(-parseInt(_0x2d987e(0x16b))/0xb);if(_0x57df80===_0x2fd003)break;else _0x147a5e['push'](_0x147a5e['shift']());}catch(_0x1b6eac){_0x147a5e['push'](_0x147a5e['shift']());}}}(a26_0x477b,0x9d516));const fs=require('fs'),path=require(a26_0x35ac08(0x17a)),Promise=require(a26_0x35ac08(0x16d)),yaml=require(a26_0x35ac08(0x162)),{CLOUDFORMATION_SCHEMA}=require(a26_0x35ac08(0x179)),AWS=require(a26_0x35ac08(0x17d))[a26_0x35ac08(0x16f)],AWSUtils=require('./AWSUtils'),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a26_0x35ac08(0x180)),{logger}=require(a26_0x35ac08(0x181));Promise[a26_0x35ac08(0x159)](fs);const addTags=async(_0x172a01,_0x1e2a26)=>{const _0x54ac6c=a26_0x35ac08;for(const _0xbacf96 in _0x172a01[_0x54ac6c(0x17b)]){_0x172a01[_0x54ac6c(0x17b)][_0xbacf96][_0x54ac6c(0x170)]&&_0x172a01[_0x54ac6c(0x17b)][_0xbacf96]['Properties']['Tags']&&_0x172a01[_0x54ac6c(0x17b)][_0xbacf96][_0x54ac6c(0x170)]['Tags'][_0x54ac6c(0x178)](..._0x1e2a26);}};function a26_0x477b(){const _0x958908=['BaseResourceName','10006RzRYnP','OnFailure','Value','schema','VZlSD','9532952BEfWYU','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','TemplateBody','CFTemplates','getOidcUrl','PEDFV','promise','info','StackId','204XmnHsm','CAPABILITY_NAMED_IAM','stringify','VpcId','CloudFormation','split','JJama','promisifyAll','browserstack:cluster','2160693RwsQgy','join','mQgMK','Fkiru','StackName','113645JiRdkE','Capabilities','js-yaml','apiVersion','21VsKERK','880180Uhvbyp','createHubHaStack','DELETE','createStack','://','Key','110drzXmF','2ujePca','bluebird','waitFor','awsObj','Properties','6803028Ovpfbs','355422lwIeDN','wmYFB','uQrjS','Tags','browserstack:creationDate','readFileAsync','push','js-yaml-cloudformation-schema','path','Resources','ClusterOIDCURL','./AWSUtils','hub-ha.yaml','2010-05-15','../config/constants','../config/logger'];a26_0x477b=function(){return _0x958908;};return a26_0x477b();}function a26_0x1ba9(_0x30b310,_0x51a830){const _0x477b50=a26_0x477b();return a26_0x1ba9=function(_0x1ba9a6,_0x86279){_0x1ba9a6=_0x1ba9a6-0x154;let _0xc5766d=_0x477b50[_0x1ba9a6];return _0xc5766d;},a26_0x1ba9(_0x30b310,_0x51a830);}exports[a26_0x35ac08(0x166)]=async(_0x5a0f95,_0xb5bc2f=null)=>{const _0xd72b34=a26_0x35ac08,_0x4f5920={'xXQzZ':_0xd72b34(0x15a),'ekDLJ':_0xd72b34(0x176),'JJama':_0xd72b34(0x17f),'uQrjS':_0xd72b34(0x18b),'VWWEA':_0xd72b34(0x17e),'TFOaa':'utf-8','TTUzG':function(_0x3130a9,_0x1fbc46,_0x4c520b){return _0x3130a9(_0x1fbc46,_0x4c520b);},'PEDFV':_0xd72b34(0x169),'ZyBqx':_0xd72b34(0x167),'qxLpX':_0xd72b34(0x155),'VZlSD':_0xd72b34(0x182),'wmYFB':_0xd72b34(0x17c),'RKilO':_0xd72b34(0x192),'mQgMK':_0xd72b34(0x189),'Fkiru':'stackCreateComplete'},_0x9b986f=COMMON_HST_TAGS,_0x4cbc7d={};_0x4cbc7d[_0xd72b34(0x16a)]=_0x4f5920['xXQzZ'],_0x4cbc7d[_0xd72b34(0x185)]=_0x5a0f95,_0x9b986f['push'](_0x4cbc7d),_0x9b986f[_0xd72b34(0x178)]({'Key':_0x4f5920['ekDLJ'],'Value':new Date()['valueOf']()['toString']()});const _0x336be3={};_0x336be3[_0xd72b34(0x163)]=_0x4f5920[_0xd72b34(0x158)];const _0x2d0284=new AWS[(_0xd72b34(0x156))](_0x336be3),_0x4332f0=await fs[_0xd72b34(0x177)](path[_0xd72b34(0x15c)](__dirname,'..',_0x4f5920[_0xd72b34(0x174)],_0x4f5920['VWWEA']),_0x4f5920['TFOaa']),_0x43eb70={};_0x43eb70[_0xd72b34(0x186)]=CLOUDFORMATION_SCHEMA;const _0xbb52e0=yaml['load'](_0x4332f0,_0x43eb70);await _0x4f5920['TTUzG'](addTags,_0xbb52e0,_0x9b986f);const _0x197d86=JSON[_0xd72b34(0x154)](_0xbb52e0);let _0x1f866a=await AWSUtils[_0xd72b34(0x18c)](_0x5a0f95);_0x1f866a=_0x1f866a[_0xd72b34(0x157)](_0x4f5920[_0xd72b34(0x18d)])[0x1];const _0x5b1ce8={};_0x5b1ce8[_0xd72b34(0x15f)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x5a0f95+'-cf',_0x5b1ce8[_0xd72b34(0x184)]=_0x4f5920['ZyBqx'],_0x5b1ce8[_0xd72b34(0x18a)]=_0x197d86,_0x5b1ce8['Parameters']=[{'ParameterKey':_0x4f5920['qxLpX'],'ParameterValue':_0xb5bc2f},{'ParameterKey':_0x4f5920[_0xd72b34(0x187)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x5a0f95},{'ParameterKey':_0x4f5920[_0xd72b34(0x173)],'ParameterValue':_0x1f866a}],_0x5b1ce8[_0xd72b34(0x161)]=[_0x4f5920['RKilO']],_0x5b1ce8[_0xd72b34(0x175)]=_0x9b986f;const _0x1bc5cf=_0x5b1ce8,_0x37c866=await _0x2d0284[_0xd72b34(0x168)](_0x1bc5cf)[_0xd72b34(0x18e)]();logger[_0xd72b34(0x18f)](_0x4f5920[_0xd72b34(0x15d)]);const _0x29e7af={};return _0x29e7af[_0xd72b34(0x15f)]=_0x37c866[_0xd72b34(0x190)],_0x2d0284[_0xd72b34(0x16e)](_0x4f5920[_0xd72b34(0x15e)],_0x29e7af)[_0xd72b34(0x18e)]();};