function a28_0x31f7(_0x5226ce,_0x32a1a7){const _0x936a22=a28_0x936a();return a28_0x31f7=function(_0x31f71f,_0x357c14){_0x31f71f=_0x31f71f-0xf2;let _0x28a75a=_0x936a22[_0x31f71f];return _0x28a75a;},a28_0x31f7(_0x5226ce,_0x32a1a7);}const a28_0x1ed815=a28_0x31f7;(function(_0x73f812,_0x3eac48){const _0x5346af=a28_0x31f7,_0xf055c8=_0x73f812();while(!![]){try{const _0x163985=-parseInt(_0x5346af(0x10f))/0x1+-parseInt(_0x5346af(0x116))/0x2*(-parseInt(_0x5346af(0x11b))/0x3)+parseInt(_0x5346af(0x11d))/0x4+parseInt(_0x5346af(0x12a))/0x5+-parseInt(_0x5346af(0x106))/0x6*(parseInt(_0x5346af(0x10a))/0x7)+-parseInt(_0x5346af(0x129))/0x8+parseInt(_0x5346af(0x10d))/0x9;if(_0x163985===_0x3eac48)break;else _0xf055c8['push'](_0xf055c8['shift']());}catch(_0x55221b){_0xf055c8['push'](_0xf055c8['shift']());}}}(a28_0x936a,0xee332));const fs=require('fs'),path=require(a28_0x1ed815(0x12b)),Promise=require('bluebird'),yaml=require(a28_0x1ed815(0xfb)),{CLOUDFORMATION_SCHEMA}=require(a28_0x1ed815(0x12d)),AWS=require('./AWSUtils')[a28_0x1ed815(0x119)],AWSUtils=require(a28_0x1ed815(0xfa)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require(a28_0x1ed815(0x125));Promise['promisifyAll'](fs);const addTags=async(_0x328cec,_0x4333c7)=>{const _0xe43e69=a28_0x1ed815;for(const _0x5f4783 in _0x328cec[_0xe43e69(0x126)]){_0x328cec['Resources'][_0x5f4783][_0xe43e69(0xf8)]&&_0x328cec[_0xe43e69(0x126)][_0x5f4783][_0xe43e69(0xf8)][_0xe43e69(0xf5)]&&_0x328cec[_0xe43e69(0x126)][_0x5f4783][_0xe43e69(0xf8)][_0xe43e69(0xf5)][_0xe43e69(0x12e)](..._0x4333c7);}};function a28_0x936a(){const _0x55fe14=['hub-ha.yaml','info','load','JkMjm','TemplateBody','apiVersion','createStack','valueOf','54138CNxLBn','GAjBQ','chNYH','utf-8','1274llXUyu','createHubHaStack','promise','20292966qEGEJd','Value','73995EAwZOg','jkPoK','vsMrS','getOidcUrl','blFsq','stringify','DELETE','234FwXtHg','://','VpcId','awsObj','Capabilities','3QVqyIC','CloudFormation','4676848dRCvtM','GoHjC','StackName','waitFor','iydOq','HdSGy','join','readFileAsync','../config/logger','Resources','jLLMA','CFTemplates','6449704fqnFSm','369785YHxqbL','path','Parameters','js-yaml-cloudformation-schema','push','toString','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','haNeh','Tags','StackId','BaseResourceName','Properties','-cf','./AWSUtils','js-yaml','RlaoC','OnFailure'];a28_0x936a=function(){return _0x55fe14;};return a28_0x936a();}exports[a28_0x1ed815(0x10b)]=async(_0x4605b5,_0x3e2ca5=null)=>{const _0x2dc9a9=a28_0x1ed815,_0x564662={'jLLMA':'browserstack:cluster','jkPoK':'browserstack:creationDate','GAjBQ':'2010-05-15','iydOq':_0x2dc9a9(0x128),'GEsPW':_0x2dc9a9(0xfe),'Drwvi':_0x2dc9a9(0x109),'RlaoC':function(_0x4979f5,_0x34fc44,_0x4954f6){return _0x4979f5(_0x34fc44,_0x4954f6);},'GoHjC':_0x2dc9a9(0x117),'blFsq':_0x2dc9a9(0x115),'HdSGy':_0x2dc9a9(0x118),'tNqVc':_0x2dc9a9(0xf7),'haNeh':'ClusterOIDCURL','chNYH':'CAPABILITY_NAMED_IAM','vsMrS':_0x2dc9a9(0xf3),'JkMjm':'stackCreateComplete'},_0xfdaf13=COMMON_HST_TAGS,_0x4cb7e1={};_0x4cb7e1['Key']=_0x564662[_0x2dc9a9(0x127)],_0x4cb7e1[_0x2dc9a9(0x10e)]=_0x4605b5,_0xfdaf13[_0x2dc9a9(0x12e)](_0x4cb7e1),_0xfdaf13['push']({'Key':_0x564662[_0x2dc9a9(0x110)],'Value':new Date()[_0x2dc9a9(0x105)]()[_0x2dc9a9(0xf2)]()});const _0xdf7385={};_0xdf7385[_0x2dc9a9(0x103)]=_0x564662[_0x2dc9a9(0x107)];const _0x4af46e=new AWS[(_0x2dc9a9(0x11c))](_0xdf7385),_0x31783a=await fs[_0x2dc9a9(0x124)](path[_0x2dc9a9(0x123)](__dirname,'..',_0x564662[_0x2dc9a9(0x121)],_0x564662['GEsPW']),_0x564662['Drwvi']),_0x4af46d={};_0x4af46d['schema']=CLOUDFORMATION_SCHEMA;const _0x27f63d=yaml[_0x2dc9a9(0x100)](_0x31783a,_0x4af46d);await _0x564662[_0x2dc9a9(0xfc)](addTags,_0x27f63d,_0xfdaf13);const _0x5d9f16=JSON[_0x2dc9a9(0x114)](_0x27f63d);let _0x59d25d=await AWSUtils[_0x2dc9a9(0x112)](_0x4605b5);_0x59d25d=_0x59d25d['split'](_0x564662[_0x2dc9a9(0x11e)])[0x1];const _0xf534c5={};_0xf534c5[_0x2dc9a9(0x11f)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x4605b5+_0x2dc9a9(0xf9),_0xf534c5[_0x2dc9a9(0xfd)]=_0x564662[_0x2dc9a9(0x113)],_0xf534c5[_0x2dc9a9(0x102)]=_0x5d9f16,_0xf534c5[_0x2dc9a9(0x12c)]=[{'ParameterKey':_0x564662[_0x2dc9a9(0x122)],'ParameterValue':_0x3e2ca5},{'ParameterKey':_0x564662['tNqVc'],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x4605b5},{'ParameterKey':_0x564662[_0x2dc9a9(0xf4)],'ParameterValue':_0x59d25d}],_0xf534c5[_0x2dc9a9(0x11a)]=[_0x564662[_0x2dc9a9(0x108)]],_0xf534c5['Tags']=_0xfdaf13;const _0x1664a8=_0xf534c5,_0x3aa17f=await _0x4af46e[_0x2dc9a9(0x104)](_0x1664a8)['promise']();logger[_0x2dc9a9(0xff)](_0x564662[_0x2dc9a9(0x111)]);const _0x42451a={};return _0x42451a['StackName']=_0x3aa17f[_0x2dc9a9(0xf6)],_0x4af46e[_0x2dc9a9(0x120)](_0x564662[_0x2dc9a9(0x101)],_0x42451a)[_0x2dc9a9(0x10c)]();};