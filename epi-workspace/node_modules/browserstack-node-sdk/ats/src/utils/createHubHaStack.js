const a28_0xc6733a=a28_0x482a;(function(_0x43f7c4,_0x23f35d){const _0x56539c=a28_0x482a,_0x307ef0=_0x43f7c4();while(!![]){try{const _0x245dca=-parseInt(_0x56539c(0x1a5))/0x1+parseInt(_0x56539c(0x1a9))/0x2+parseInt(_0x56539c(0x1cd))/0x3*(-parseInt(_0x56539c(0x1ac))/0x4)+-parseInt(_0x56539c(0x1a3))/0x5*(-parseInt(_0x56539c(0x1c8))/0x6)+parseInt(_0x56539c(0x198))/0x7+-parseInt(_0x56539c(0x1d0))/0x8+-parseInt(_0x56539c(0x1b8))/0x9*(-parseInt(_0x56539c(0x19c))/0xa);if(_0x245dca===_0x23f35d)break;else _0x307ef0['push'](_0x307ef0['shift']());}catch(_0x4574e1){_0x307ef0['push'](_0x307ef0['shift']());}}}(a28_0x3da5,0x5b038));function a28_0x3da5(){const _0x55e297=['schema','1040kXeJmc','StackName','waitFor','zlTBK','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','push','CFTemplates','15XOIKGs','js-yaml','277995MgZsIQ','./AWSUtils','EOyAL','stringify','816728iWWxef','Value','-cf','56SMNAaA','DJBpZ','CAPABILITY_NAMED_IAM','WtRZe','toString','js-yaml-cloudformation-schema','QTKaI','OnFailure','vBuTZ','createHubHaStack','Resources','../config/constants','31446dqABgC','hub-ha.yaml','Parameters','Properties','stackCreateComplete','TemplateBody','info','getOidcUrl','split','Key','VpcId','load','BaseResourceName','TlFsZ','wizEZ','bluebird','258828WuhgNy','2010-05-15','../config/logger','wsJky','promisifyAll','11109SsAZyE','awsObj','promise','4786096zjnclQ','MfmMY','JgysJ','2798159WBbVSn','Tags','yInLa'];a28_0x3da5=function(){return _0x55e297;};return a28_0x3da5();}const fs=require('fs'),path=require('path'),Promise=require(a28_0xc6733a(0x1c7)),yaml=require(a28_0xc6733a(0x1a4)),{CLOUDFORMATION_SCHEMA}=require(a28_0xc6733a(0x1b1)),AWS=require('./AWSUtils')[a28_0xc6733a(0x1ce)],AWSUtils=require(a28_0xc6733a(0x1a6)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0xc6733a(0x1b7)),{logger}=require(a28_0xc6733a(0x1ca));Promise[a28_0xc6733a(0x1cc)](fs);const addTags=async(_0x5ac187,_0x411846)=>{const _0x3b770a=a28_0xc6733a;for(const _0x16ebea in _0x5ac187[_0x3b770a(0x1b6)]){_0x5ac187[_0x3b770a(0x1b6)][_0x16ebea][_0x3b770a(0x1bb)]&&_0x5ac187[_0x3b770a(0x1b6)][_0x16ebea][_0x3b770a(0x1bb)][_0x3b770a(0x199)]&&_0x5ac187[_0x3b770a(0x1b6)][_0x16ebea][_0x3b770a(0x1bb)][_0x3b770a(0x199)]['push'](..._0x411846);}};function a28_0x482a(_0x140571,_0x48155d){const _0x3da581=a28_0x3da5();return a28_0x482a=function(_0x482a41,_0x40febf){_0x482a41=_0x482a41-0x198;let _0x3716b0=_0x3da581[_0x482a41];return _0x3716b0;},a28_0x482a(_0x140571,_0x48155d);}exports[a28_0xc6733a(0x1b5)]=async(_0x56a396,_0x48b0ee=null)=>{const _0x2712cc=a28_0xc6733a,_0x292267={'JgysJ':'browserstack:cluster','ctnEN':'browserstack:creationDate','zlTBK':_0x2712cc(0x1c9),'EOyAL':_0x2712cc(0x1a2),'yInLa':_0x2712cc(0x1b9),'ftyEb':'utf-8','QTKaI':function(_0xe6cfee,_0xba02d1,_0x2c6861){return _0xe6cfee(_0xba02d1,_0x2c6861);},'wsJky':'://','vBuTZ':'DELETE','DJBpZ':_0x2712cc(0x1c2),'TlFsZ':_0x2712cc(0x1c4),'YVGlS':'ClusterOIDCURL','MfmMY':_0x2712cc(0x1ae),'WtRZe':_0x2712cc(0x1a0),'wizEZ':_0x2712cc(0x1bc)},_0x5494c1=COMMON_HST_TAGS,_0x52c966={};_0x52c966[_0x2712cc(0x1c1)]=_0x292267[_0x2712cc(0x1d2)],_0x52c966[_0x2712cc(0x1aa)]=_0x56a396,_0x5494c1['push'](_0x52c966),_0x5494c1[_0x2712cc(0x1a1)]({'Key':_0x292267['ctnEN'],'Value':new Date()['valueOf']()[_0x2712cc(0x1b0)]()});const _0x2db241={};_0x2db241['apiVersion']=_0x292267[_0x2712cc(0x19f)];const _0xc34576=new AWS['CloudFormation'](_0x2db241),_0x1093e3=await fs['readFileAsync'](path['join'](__dirname,'..',_0x292267[_0x2712cc(0x1a7)],_0x292267[_0x2712cc(0x19a)]),_0x292267['ftyEb']),_0x203548={};_0x203548[_0x2712cc(0x19b)]=CLOUDFORMATION_SCHEMA;const _0x2fdf2d=yaml[_0x2712cc(0x1c3)](_0x1093e3,_0x203548);await _0x292267[_0x2712cc(0x1b2)](addTags,_0x2fdf2d,_0x5494c1);const _0x6dc9d=JSON[_0x2712cc(0x1a8)](_0x2fdf2d);let _0x3537b7=await AWSUtils[_0x2712cc(0x1bf)](_0x56a396);_0x3537b7=_0x3537b7[_0x2712cc(0x1c0)](_0x292267[_0x2712cc(0x1cb)])[0x1];const _0x5996fe={};_0x5996fe[_0x2712cc(0x19d)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x56a396+_0x2712cc(0x1ab),_0x5996fe[_0x2712cc(0x1b3)]=_0x292267[_0x2712cc(0x1b4)],_0x5996fe[_0x2712cc(0x1bd)]=_0x6dc9d,_0x5996fe[_0x2712cc(0x1ba)]=[{'ParameterKey':_0x292267[_0x2712cc(0x1ad)],'ParameterValue':_0x48b0ee},{'ParameterKey':_0x292267[_0x2712cc(0x1c5)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x56a396},{'ParameterKey':_0x292267['YVGlS'],'ParameterValue':_0x3537b7}],_0x5996fe['Capabilities']=[_0x292267[_0x2712cc(0x1d1)]],_0x5996fe[_0x2712cc(0x199)]=_0x5494c1;const _0x2c22ac=_0x5996fe,_0x504dad=await _0xc34576['createStack'](_0x2c22ac)['promise']();logger[_0x2712cc(0x1be)](_0x292267[_0x2712cc(0x1af)]);const _0x46a097={};return _0x46a097[_0x2712cc(0x19d)]=_0x504dad['StackId'],_0xc34576[_0x2712cc(0x19e)](_0x292267[_0x2712cc(0x1c6)],_0x46a097)[_0x2712cc(0x1cf)]();};