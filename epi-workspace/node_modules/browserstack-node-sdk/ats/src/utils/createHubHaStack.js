function a28_0x1b9e(_0xd1472,_0x2c933c){const _0x3fa540=a28_0x3fa5();return a28_0x1b9e=function(_0x1b9e69,_0x33d666){_0x1b9e69=_0x1b9e69-0x1c8;let _0x5930ce=_0x3fa540[_0x1b9e69];return _0x5930ce;},a28_0x1b9e(_0xd1472,_0x2c933c);}const a28_0xf3e00c=a28_0x1b9e;(function(_0x1e68ae,_0x308864){const _0x5accc2=a28_0x1b9e,_0xcf856d=_0x1e68ae();while(!![]){try{const _0x5b7eb4=parseInt(_0x5accc2(0x1f0))/0x1+parseInt(_0x5accc2(0x1d5))/0x2*(parseInt(_0x5accc2(0x1db))/0x3)+-parseInt(_0x5accc2(0x1fb))/0x4*(parseInt(_0x5accc2(0x1da))/0x5)+-parseInt(_0x5accc2(0x1f7))/0x6*(-parseInt(_0x5accc2(0x1cb))/0x7)+-parseInt(_0x5accc2(0x1dc))/0x8+parseInt(_0x5accc2(0x201))/0x9*(parseInt(_0x5accc2(0x1e9))/0xa)+-parseInt(_0x5accc2(0x1f6))/0xb;if(_0x5b7eb4===_0x308864)break;else _0xcf856d['push'](_0xcf856d['shift']());}catch(_0x369722){_0xcf856d['push'](_0xcf856d['shift']());}}}(a28_0x3fa5,0x68f58));const fs=require('fs'),path=require('path'),Promise=require('bluebird'),yaml=require(a28_0xf3e00c(0x1fa)),{CLOUDFORMATION_SCHEMA}=require(a28_0xf3e00c(0x1d7)),AWS=require(a28_0xf3e00c(0x1fe))[a28_0xf3e00c(0x1ed)],AWSUtils=require(a28_0xf3e00c(0x1fe)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0xf3e00c(0x1d8)),{logger}=require(a28_0xf3e00c(0x1e7));Promise[a28_0xf3e00c(0x1fd)](fs);const addTags=async(_0x145ea5,_0x271d08)=>{const _0x73b02=a28_0xf3e00c;for(const _0x2a3ae6 in _0x145ea5[_0x73b02(0x1ef)]){_0x145ea5['Resources'][_0x2a3ae6]['Properties']&&_0x145ea5[_0x73b02(0x1ef)][_0x2a3ae6][_0x73b02(0x1f5)][_0x73b02(0x1f4)]&&_0x145ea5[_0x73b02(0x1ef)][_0x2a3ae6][_0x73b02(0x1f5)][_0x73b02(0x1f4)][_0x73b02(0x1e5)](..._0x271d08);}};exports[a28_0xf3e00c(0x1c8)]=async(_0x3d34ae,_0x27094b=null)=>{const _0x58b1c7=a28_0xf3e00c,_0x348aca={'Atsxw':_0x58b1c7(0x1cc),'eJrPO':'browserstack:creationDate','Jjdpa':_0x58b1c7(0x1dd),'jBrcH':_0x58b1c7(0x1ce),'bANnE':_0x58b1c7(0x1f1),'gNmwH':'utf-8','KWzDh':function(_0xf28a55,_0x50e277,_0x27c2f2){return _0xf28a55(_0x50e277,_0x27c2f2);},'eHYgH':_0x58b1c7(0x1cd),'Cesrd':_0x58b1c7(0x1f8),'kAWAd':'VpcId','FaAKF':_0x58b1c7(0x1df),'IrTVd':_0x58b1c7(0x1ff),'MEHqo':_0x58b1c7(0x1e8),'lCuRF':_0x58b1c7(0x205),'YtHhv':_0x58b1c7(0x1d1)},_0x4a155f=COMMON_HST_TAGS,_0x42b981={};_0x42b981[_0x58b1c7(0x1e2)]=_0x348aca['Atsxw'],_0x42b981[_0x58b1c7(0x1e3)]=_0x3d34ae,_0x4a155f[_0x58b1c7(0x1e5)](_0x42b981),_0x4a155f[_0x58b1c7(0x1e5)]({'Key':_0x348aca[_0x58b1c7(0x1d3)],'Value':new Date()[_0x58b1c7(0x1e6)]()[_0x58b1c7(0x1f3)]()});const _0x48f992={};_0x48f992[_0x58b1c7(0x1ca)]=_0x348aca[_0x58b1c7(0x1de)];const _0x3d5c63=new AWS[(_0x58b1c7(0x1ec))](_0x48f992),_0x5a6498=await fs[_0x58b1c7(0x203)](path['join'](__dirname,'..',_0x348aca[_0x58b1c7(0x207)],_0x348aca[_0x58b1c7(0x1d6)]),_0x348aca[_0x58b1c7(0x1d2)]),_0x569b6b={};_0x569b6b[_0x58b1c7(0x1ea)]=CLOUDFORMATION_SCHEMA;const _0x52fb9a=yaml['load'](_0x5a6498,_0x569b6b);await _0x348aca[_0x58b1c7(0x1d9)](addTags,_0x52fb9a,_0x4a155f);const _0x383787=JSON[_0x58b1c7(0x200)](_0x52fb9a);let _0x2aeb6c=await AWSUtils[_0x58b1c7(0x202)](_0x3d34ae);_0x2aeb6c=_0x2aeb6c[_0x58b1c7(0x1e4)](_0x348aca[_0x58b1c7(0x204)])[0x1];const _0x39c5b6={};_0x39c5b6[_0x58b1c7(0x1d0)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3d34ae+_0x58b1c7(0x1f9),_0x39c5b6[_0x58b1c7(0x1e1)]=_0x348aca[_0x58b1c7(0x208)],_0x39c5b6[_0x58b1c7(0x1c9)]=_0x383787,_0x39c5b6['Parameters']=[{'ParameterKey':_0x348aca[_0x58b1c7(0x1e0)],'ParameterValue':_0x27094b},{'ParameterKey':_0x348aca['FaAKF'],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3d34ae},{'ParameterKey':_0x348aca[_0x58b1c7(0x1ee)],'ParameterValue':_0x2aeb6c}],_0x39c5b6[_0x58b1c7(0x206)]=[_0x348aca['MEHqo']],_0x39c5b6[_0x58b1c7(0x1f4)]=_0x4a155f;const _0x4add5a=_0x39c5b6,_0x5c0d11=await _0x3d5c63['createStack'](_0x4add5a)[_0x58b1c7(0x1f2)]();logger[_0x58b1c7(0x1d4)](_0x348aca[_0x58b1c7(0x1cf)]);const _0x4d5cbb={};return _0x4d5cbb['StackName']=_0x5c0d11[_0x58b1c7(0x1eb)],_0x3d5c63[_0x58b1c7(0x1fc)](_0x348aca['YtHhv'],_0x4d5cbb)['promise']();};function a28_0x3fa5(){const _0x5c49c0=['split','push','valueOf','../config/logger','CAPABILITY_NAMED_IAM','30alFWKc','schema','StackId','CloudFormation','awsObj','IrTVd','Resources','37534QIQzAx','hub-ha.yaml','promise','toString','Tags','Properties','1549482pOdbsn','13758cFYcYm','DELETE','-cf','js-yaml','12NBkOee','waitFor','promisifyAll','./AWSUtils','ClusterOIDCURL','stringify','181323GXaPPV','getOidcUrl','readFileAsync','eHYgH','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','Capabilities','jBrcH','Cesrd','createHubHaStack','TemplateBody','apiVersion','2338eViAlM','browserstack:cluster','://','CFTemplates','lCuRF','StackName','stackCreateComplete','gNmwH','eJrPO','info','46dLmNWm','bANnE','js-yaml-cloudformation-schema','../config/constants','KWzDh','1051575SjRWGZ','88131bUAvRd','2702312ZCKOTc','2010-05-15','Jjdpa','BaseResourceName','kAWAd','OnFailure','Key','Value'];a28_0x3fa5=function(){return _0x5c49c0;};return a28_0x3fa5();}