const a26_0x29042d=a26_0x3426;(function(_0x33456f,_0x205fd0){const _0x50a3d9=a26_0x3426,_0x40aaca=_0x33456f();while(!![]){try{const _0x3210f7=parseInt(_0x50a3d9(0x191))/0x1+parseInt(_0x50a3d9(0x186))/0x2+parseInt(_0x50a3d9(0x193))/0x3+parseInt(_0x50a3d9(0x197))/0x4+-parseInt(_0x50a3d9(0x17b))/0x5+parseInt(_0x50a3d9(0x18f))/0x6*(parseInt(_0x50a3d9(0x19f))/0x7)+-parseInt(_0x50a3d9(0x1aa))/0x8*(parseInt(_0x50a3d9(0x17f))/0x9);if(_0x3210f7===_0x205fd0)break;else _0x40aaca['push'](_0x40aaca['shift']());}catch(_0x1713ef){_0x40aaca['push'](_0x40aaca['shift']());}}}(a26_0x5836,0x7908a));function a26_0x5836(){const _0x2904e2=['stringify','../config/constants','aMgCi','split','DctcF','rchhh','1522353RIUXDe','TemplateBody','browserstack:cluster','sRqgN','awsObj','UjvfX','CoIIl','waitFor','rPZPH','path','TtsqX','4284448GblvJv','getOidcUrl','push','hub-ha.yaml','oEfwI','promisifyAll','Parameters','lLFLJ','DELETE','readFileAsync','stackCreateComplete','vuXka','./AWSUtils','ClusterOIDCURL','browserstack:creationDate','gRAAZ','CloudFormation','createStack','toString','3682035UXzsZe','CAPABILITY_NAMED_IAM','load','xowFf','18enmaeH','Tags','CFTemplates','apiVersion','Properties','schema','valueOf','1282490jxGwTZ','join','-cf','Cqhmr','promise','Resources','StackName','js-yaml-cloudformation-schema','OnFailure','6mMEDOQ','utf-8','221458DYJZxz','js-yaml','1536903KvUfuD','VpcId','BaseResourceName','Key','2843160QfiajO','createHubHaStack'];a26_0x5836=function(){return _0x2904e2;};return a26_0x5836();}const fs=require('fs'),path=require(a26_0x29042d(0x1a8)),Promise=require('bluebird'),yaml=require(a26_0x29042d(0x192)),{CLOUDFORMATION_SCHEMA}=require(a26_0x29042d(0x18d)),AWS=require(a26_0x29042d(0x1b6))[a26_0x29042d(0x1a3)],AWSUtils=require(a26_0x29042d(0x1b6)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a26_0x29042d(0x19a)),{logger}=require('../config/logger');function a26_0x3426(_0x17a8ae,_0x256078){const _0x5836b3=a26_0x5836();return a26_0x3426=function(_0x342661,_0x4b95cf){_0x342661=_0x342661-0x17b;let _0x273149=_0x5836b3[_0x342661];return _0x273149;},a26_0x3426(_0x17a8ae,_0x256078);}Promise[a26_0x29042d(0x1af)](fs);const addTags=async(_0xe6065,_0x4d4148)=>{const _0x5e6894=a26_0x29042d;for(const _0x2507bf in _0xe6065[_0x5e6894(0x18b)]){_0xe6065[_0x5e6894(0x18b)][_0x2507bf][_0x5e6894(0x183)]&&_0xe6065[_0x5e6894(0x18b)][_0x2507bf][_0x5e6894(0x183)]['Tags']&&_0xe6065[_0x5e6894(0x18b)][_0x2507bf][_0x5e6894(0x183)][_0x5e6894(0x180)][_0x5e6894(0x1ac)](..._0x4d4148);}};exports[a26_0x29042d(0x198)]=async(_0x39a381,_0x3e4710=null)=>{const _0x35be4f=a26_0x29042d,_0x56a30={'vuXka':_0x35be4f(0x1a1),'xowFf':_0x35be4f(0x1b8),'Cqhmr':'2010-05-15','oEfwI':_0x35be4f(0x181),'UjvfX':_0x35be4f(0x1ad),'rchhh':_0x35be4f(0x190),'TtsqX':function(_0x8cbd73,_0xa497d0,_0x59da0d){return _0x8cbd73(_0xa497d0,_0x59da0d);},'lLFLJ':'://','sRqgN':_0x35be4f(0x1b2),'xTJUc':_0x35be4f(0x194),'CoIIl':_0x35be4f(0x195),'gRAAZ':_0x35be4f(0x1b7),'rPZPH':_0x35be4f(0x17c),'DctcF':'Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','aMgCi':_0x35be4f(0x1b4)},_0x295cde=COMMON_HST_TAGS,_0x38d259={};_0x38d259[_0x35be4f(0x196)]=_0x56a30[_0x35be4f(0x1b5)],_0x38d259['Value']=_0x39a381,_0x295cde['push'](_0x38d259),_0x295cde[_0x35be4f(0x1ac)]({'Key':_0x56a30[_0x35be4f(0x17e)],'Value':new Date()[_0x35be4f(0x185)]()[_0x35be4f(0x1bc)]()});const _0x5f23ce={};_0x5f23ce[_0x35be4f(0x182)]=_0x56a30[_0x35be4f(0x189)];const _0x3a7d94=new AWS[(_0x35be4f(0x1ba))](_0x5f23ce),_0x53e718=await fs[_0x35be4f(0x1b3)](path[_0x35be4f(0x187)](__dirname,'..',_0x56a30[_0x35be4f(0x1ae)],_0x56a30[_0x35be4f(0x1a4)]),_0x56a30[_0x35be4f(0x19e)]),_0x44e725={};_0x44e725[_0x35be4f(0x184)]=CLOUDFORMATION_SCHEMA;const _0x30304f=yaml[_0x35be4f(0x17d)](_0x53e718,_0x44e725);await _0x56a30[_0x35be4f(0x1a9)](addTags,_0x30304f,_0x295cde);const _0xe56156=JSON[_0x35be4f(0x199)](_0x30304f);let _0x33c229=await AWSUtils[_0x35be4f(0x1ab)](_0x39a381);_0x33c229=_0x33c229[_0x35be4f(0x19c)](_0x56a30[_0x35be4f(0x1b1)])[0x1];const _0x118475={};_0x118475[_0x35be4f(0x18c)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x39a381+_0x35be4f(0x188),_0x118475[_0x35be4f(0x18e)]=_0x56a30[_0x35be4f(0x1a2)],_0x118475[_0x35be4f(0x1a0)]=_0xe56156,_0x118475[_0x35be4f(0x1b0)]=[{'ParameterKey':_0x56a30['xTJUc'],'ParameterValue':_0x3e4710},{'ParameterKey':_0x56a30[_0x35be4f(0x1a5)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x39a381},{'ParameterKey':_0x56a30[_0x35be4f(0x1b9)],'ParameterValue':_0x33c229}],_0x118475['Capabilities']=[_0x56a30[_0x35be4f(0x1a7)]],_0x118475[_0x35be4f(0x180)]=_0x295cde;const _0x40edb5=_0x118475,_0x5119b2=await _0x3a7d94[_0x35be4f(0x1bb)](_0x40edb5)[_0x35be4f(0x18a)]();logger['info'](_0x56a30[_0x35be4f(0x19d)]);const _0x2252d7={};return _0x2252d7[_0x35be4f(0x18c)]=_0x5119b2['StackId'],_0x3a7d94[_0x35be4f(0x1a6)](_0x56a30[_0x35be4f(0x19b)],_0x2252d7)[_0x35be4f(0x18a)]();};