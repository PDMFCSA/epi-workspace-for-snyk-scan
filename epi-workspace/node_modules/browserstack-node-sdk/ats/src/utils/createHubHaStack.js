function a28_0x3973(_0x3574ba,_0x4de2c2){const _0x10424a=a28_0x1042();return a28_0x3973=function(_0x39736f,_0x3304f4){_0x39736f=_0x39736f-0x8e;let _0x323b8a=_0x10424a[_0x39736f];return _0x323b8a;},a28_0x3973(_0x3574ba,_0x4de2c2);}const a28_0x2784f5=a28_0x3973;(function(_0x198329,_0x44ff61){const _0x4668d3=a28_0x3973,_0x4a7b0c=_0x198329();while(!![]){try{const _0x1f4729=parseInt(_0x4668d3(0xbb))/0x1*(-parseInt(_0x4668d3(0xcb))/0x2)+parseInt(_0x4668d3(0xab))/0x3*(parseInt(_0x4668d3(0xb6))/0x4)+parseInt(_0x4668d3(0xa9))/0x5*(-parseInt(_0x4668d3(0xbc))/0x6)+-parseInt(_0x4668d3(0xcc))/0x7*(-parseInt(_0x4668d3(0x8f))/0x8)+parseInt(_0x4668d3(0xbd))/0x9*(-parseInt(_0x4668d3(0xc1))/0xa)+-parseInt(_0x4668d3(0xca))/0xb*(parseInt(_0x4668d3(0xb2))/0xc)+parseInt(_0x4668d3(0x9e))/0xd;if(_0x1f4729===_0x44ff61)break;else _0x4a7b0c['push'](_0x4a7b0c['shift']());}catch(_0x5d18da){_0x4a7b0c['push'](_0x4a7b0c['shift']());}}}(a28_0x1042,0x25563));const fs=require('fs'),path=require(a28_0x2784f5(0xc3)),Promise=require(a28_0x2784f5(0x92)),yaml=require(a28_0x2784f5(0x9c)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),AWS=require('./AWSUtils')[a28_0x2784f5(0xbe)],AWSUtils=require('./AWSUtils'),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x2784f5(0xb0)),{logger}=require(a28_0x2784f5(0xa2));Promise[a28_0x2784f5(0xc0)](fs);const addTags=async(_0x2805bd,_0x3be203)=>{const _0x4242fa=a28_0x2784f5;for(const _0xa8f52 in _0x2805bd[_0x4242fa(0xad)]){_0x2805bd['Resources'][_0xa8f52]['Properties']&&_0x2805bd[_0x4242fa(0xad)][_0xa8f52]['Properties'][_0x4242fa(0x96)]&&_0x2805bd['Resources'][_0xa8f52][_0x4242fa(0x94)][_0x4242fa(0x96)][_0x4242fa(0xc4)](..._0x3be203);}};exports[a28_0x2784f5(0xbf)]=async(_0x5b1627,_0x3f5b4f=null)=>{const _0x4ee05c=a28_0x2784f5,_0x279c11={'gKupU':_0x4ee05c(0xb7),'AbKCJ':_0x4ee05c(0xc8),'zMqAF':_0x4ee05c(0x91),'jfRwU':_0x4ee05c(0xac),'sfOAm':_0x4ee05c(0x8e),'rLtbo':_0x4ee05c(0xa6),'jRIwT':function(_0x4c0d50,_0x16fa17,_0x8cfa11){return _0x4c0d50(_0x16fa17,_0x8cfa11);},'ZQGcr':_0x4ee05c(0x9f),'RNgeD':'DELETE','kqyXh':_0x4ee05c(0x9b),'DkGHY':_0x4ee05c(0xa3),'QvkgA':_0x4ee05c(0xaf),'aqbeG':_0x4ee05c(0x90),'lqaUR':_0x4ee05c(0xb5),'PwmeI':_0x4ee05c(0xb9)},_0x3fa084=COMMON_HST_TAGS,_0x51fac6={};_0x51fac6[_0x4ee05c(0x98)]=_0x279c11[_0x4ee05c(0x97)],_0x51fac6['Value']=_0x5b1627,_0x3fa084[_0x4ee05c(0xc4)](_0x51fac6),_0x3fa084['push']({'Key':_0x279c11[_0x4ee05c(0xa8)],'Value':new Date()['valueOf']()[_0x4ee05c(0xba)]()});const _0x38f364={};_0x38f364[_0x4ee05c(0xa5)]=_0x279c11['zMqAF'];const _0xedee5a=new AWS[(_0x4ee05c(0x95))](_0x38f364),_0x4fee0e=await fs[_0x4ee05c(0xa1)](path[_0x4ee05c(0xa0)](__dirname,'..',_0x279c11[_0x4ee05c(0xa7)],_0x279c11[_0x4ee05c(0x9d)]),_0x279c11[_0x4ee05c(0x93)]),_0x427607={};_0x427607[_0x4ee05c(0xa4)]=CLOUDFORMATION_SCHEMA;const _0x50cca7=yaml['load'](_0x4fee0e,_0x427607);await _0x279c11[_0x4ee05c(0xb3)](addTags,_0x50cca7,_0x3fa084);const _0x4bae76=JSON['stringify'](_0x50cca7);let _0x42a38c=await AWSUtils[_0x4ee05c(0x99)](_0x5b1627);_0x42a38c=_0x42a38c[_0x4ee05c(0xc5)](_0x279c11['ZQGcr'])[0x1];const _0x54465b={};_0x54465b[_0x4ee05c(0xc7)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x5b1627+_0x4ee05c(0xc6),_0x54465b[_0x4ee05c(0x9a)]=_0x279c11[_0x4ee05c(0xc2)],_0x54465b['TemplateBody']=_0x4bae76,_0x54465b['Parameters']=[{'ParameterKey':_0x279c11['kqyXh'],'ParameterValue':_0x3f5b4f},{'ParameterKey':_0x279c11[_0x4ee05c(0xaa)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x5b1627},{'ParameterKey':_0x279c11[_0x4ee05c(0xb4)],'ParameterValue':_0x42a38c}],_0x54465b[_0x4ee05c(0xcd)]=[_0x279c11[_0x4ee05c(0xae)]],_0x54465b[_0x4ee05c(0x96)]=_0x3fa084;const _0x1d3fe9=_0x54465b,_0x364da9=await _0xedee5a[_0x4ee05c(0xc9)](_0x1d3fe9)[_0x4ee05c(0xb1)]();logger['info'](_0x279c11[_0x4ee05c(0xb8)]);const _0x528349={};return _0x528349[_0x4ee05c(0xc7)]=_0x364da9['StackId'],_0xedee5a['waitFor'](_0x279c11['PwmeI'],_0x528349)[_0x4ee05c(0xb1)]();};function a28_0x1042(){const _0x15e00b=['sfOAm','10150153mdNspm','://','join','readFileAsync','../config/logger','BaseResourceName','schema','apiVersion','utf-8','jfRwU','AbKCJ','5nzLsKt','DkGHY','88629lfdROl','CFTemplates','Resources','aqbeG','ClusterOIDCURL','../config/constants','promise','3033228SbmFpA','jRIwT','QvkgA','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','8yfGcia','browserstack:cluster','lqaUR','stackCreateComplete','toString','1VWZQzE','1388598MGepgF','203913GRSuwv','awsObj','createHubHaStack','promisifyAll','130adeeYp','RNgeD','path','push','split','-cf','StackName','browserstack:creationDate','createStack','11tPURiD','268522wcnFDG','84nHkIkC','Capabilities','hub-ha.yaml','150712rWOgLj','CAPABILITY_NAMED_IAM','2010-05-15','bluebird','rLtbo','Properties','CloudFormation','Tags','gKupU','Key','getOidcUrl','OnFailure','VpcId','js-yaml'];a28_0x1042=function(){return _0x15e00b;};return a28_0x1042();}