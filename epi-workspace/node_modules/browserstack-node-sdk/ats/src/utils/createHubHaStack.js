function a28_0x374d(){const _0x321603=['schema','StackName','VpcId','stackCreateComplete','browserstack:creationDate','getOidcUrl','oXmwo','7016535iqCVAG','OnFailure','VTOuH','stringify','awsObj','valueOf','apiVersion','./AWSUtils','browserstack:cluster','sezRH','CAPABILITY_NAMED_IAM','INWCy','Properties','push','2010-05-15','Tags','326042QypYWW','../config/constants','1022604VNPzpZ','xMOqW','promisifyAll','1100435DvfqDe','load','utf-8','js-yaml','Parameters','Resources','toString','readFileAsync','createStack','1uJHQEp','1366488KbBcyY','bluebird','xbSlv','uYHrM','hub-ha.yaml','VTXEM','BSRgq','promise','-cf','13225LqMCgn','DELETE','waitFor','join','CFTemplates','path','Key','StackId','Capabilities','info','524lsyOKQ','ezXBP','split','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','2530960Czwatv'];a28_0x374d=function(){return _0x321603;};return a28_0x374d();}const a28_0x54e1b1=a28_0x3102;(function(_0x1b505e,_0x2cc178){const _0x1ed5bb=a28_0x3102,_0x59736e=_0x1b505e();while(!![]){try{const _0x3fc44a=-parseInt(_0x1ed5bb(0x95))/0x1*(parseInt(_0x1ed5bb(0x87))/0x2)+parseInt(_0x1ed5bb(0x89))/0x3+-parseInt(_0x1ed5bb(0xa9))/0x4*(parseInt(_0x1ed5bb(0x9f))/0x5)+-parseInt(_0x1ed5bb(0x96))/0x6+parseInt(_0x1ed5bb(0x8c))/0x7+-parseInt(_0x1ed5bb(0xad))/0x8+parseInt(_0x1ed5bb(0xb5))/0x9;if(_0x3fc44a===_0x2cc178)break;else _0x59736e['push'](_0x59736e['shift']());}catch(_0x2f6914){_0x59736e['push'](_0x59736e['shift']());}}}(a28_0x374d,0x36b36));const fs=require('fs'),path=require(a28_0x54e1b1(0xa4)),Promise=require(a28_0x54e1b1(0x97)),yaml=require(a28_0x54e1b1(0x8f)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),AWS=require(a28_0x54e1b1(0xbc))[a28_0x54e1b1(0xb9)],AWSUtils=require(a28_0x54e1b1(0xbc)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x54e1b1(0x88)),{logger}=require('../config/logger');Promise[a28_0x54e1b1(0x8b)](fs);function a28_0x3102(_0x1eef77,_0x444416){const _0x374de1=a28_0x374d();return a28_0x3102=function(_0x31026a,_0x57c9f1){_0x31026a=_0x31026a-0x83;let _0x3957e3=_0x374de1[_0x31026a];return _0x3957e3;},a28_0x3102(_0x1eef77,_0x444416);}const addTags=async(_0x3b202d,_0x345f7a)=>{const _0x372dfc=a28_0x54e1b1;for(const _0x3dfbdb in _0x3b202d[_0x372dfc(0x91)]){_0x3b202d[_0x372dfc(0x91)][_0x3dfbdb][_0x372dfc(0x83)]&&_0x3b202d[_0x372dfc(0x91)][_0x3dfbdb][_0x372dfc(0x83)]['Tags']&&_0x3b202d[_0x372dfc(0x91)][_0x3dfbdb][_0x372dfc(0x83)][_0x372dfc(0x86)][_0x372dfc(0x84)](..._0x345f7a);}};exports['createHubHaStack']=async(_0x1d48b7,_0x155477=null)=>{const _0x369ad2=a28_0x54e1b1,_0x14f1a9={'oXmwo':_0x369ad2(0xbd),'MsVpo':_0x369ad2(0xb2),'JmJeq':_0x369ad2(0x85),'XVgwv':_0x369ad2(0xa3),'sezRH':_0x369ad2(0x9a),'ezXBP':_0x369ad2(0x8e),'INWCy':function(_0x1b3637,_0xfeaca5,_0x4a5685){return _0x1b3637(_0xfeaca5,_0x4a5685);},'uYHrM':'://','VTXEM':_0x369ad2(0xa0),'xMOqW':_0x369ad2(0xb0),'FUXoO':'BaseResourceName','VTOuH':'ClusterOIDCURL','qVqAq':_0x369ad2(0xbf),'xbSlv':_0x369ad2(0xac),'BSRgq':_0x369ad2(0xb1)},_0x2edbd7=COMMON_HST_TAGS,_0x3a45a6={};_0x3a45a6[_0x369ad2(0xa5)]=_0x14f1a9[_0x369ad2(0xb4)],_0x3a45a6['Value']=_0x1d48b7,_0x2edbd7['push'](_0x3a45a6),_0x2edbd7[_0x369ad2(0x84)]({'Key':_0x14f1a9['MsVpo'],'Value':new Date()[_0x369ad2(0xba)]()[_0x369ad2(0x92)]()});const _0x2cfba5={};_0x2cfba5[_0x369ad2(0xbb)]=_0x14f1a9['JmJeq'];const _0x4d3f3a=new AWS['CloudFormation'](_0x2cfba5),_0x25a43f=await fs[_0x369ad2(0x93)](path[_0x369ad2(0xa2)](__dirname,'..',_0x14f1a9['XVgwv'],_0x14f1a9[_0x369ad2(0xbe)]),_0x14f1a9[_0x369ad2(0xaa)]),_0x546bac={};_0x546bac[_0x369ad2(0xae)]=CLOUDFORMATION_SCHEMA;const _0x39e777=yaml[_0x369ad2(0x8d)](_0x25a43f,_0x546bac);await _0x14f1a9[_0x369ad2(0xc0)](addTags,_0x39e777,_0x2edbd7);const _0x31d7d8=JSON[_0x369ad2(0xb8)](_0x39e777);let _0x68d886=await AWSUtils[_0x369ad2(0xb3)](_0x1d48b7);_0x68d886=_0x68d886[_0x369ad2(0xab)](_0x14f1a9[_0x369ad2(0x99)])[0x1];const _0x15a994={};_0x15a994['StackName']=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x1d48b7+_0x369ad2(0x9e),_0x15a994[_0x369ad2(0xb6)]=_0x14f1a9[_0x369ad2(0x9b)],_0x15a994['TemplateBody']=_0x31d7d8,_0x15a994[_0x369ad2(0x90)]=[{'ParameterKey':_0x14f1a9[_0x369ad2(0x8a)],'ParameterValue':_0x155477},{'ParameterKey':_0x14f1a9['FUXoO'],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x1d48b7},{'ParameterKey':_0x14f1a9[_0x369ad2(0xb7)],'ParameterValue':_0x68d886}],_0x15a994[_0x369ad2(0xa7)]=[_0x14f1a9['qVqAq']],_0x15a994['Tags']=_0x2edbd7;const _0x46cad9=_0x15a994,_0x4eed15=await _0x4d3f3a[_0x369ad2(0x94)](_0x46cad9)[_0x369ad2(0x9d)]();logger[_0x369ad2(0xa8)](_0x14f1a9[_0x369ad2(0x98)]);const _0x2c9900={};return _0x2c9900[_0x369ad2(0xaf)]=_0x4eed15[_0x369ad2(0xa6)],_0x4d3f3a[_0x369ad2(0xa1)](_0x14f1a9[_0x369ad2(0x9c)],_0x2c9900)[_0x369ad2(0x9d)]();};