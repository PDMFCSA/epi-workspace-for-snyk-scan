function a28_0x3a95(){const _0x41b6c3=['awsObj','4665864Rqheov','stackCreateComplete','CAPABILITY_NAMED_IAM','CloudFormation','516nGHgsN','valueOf','info','CFTemplates','quNuZ','12BpfVGO','utf-8','Capabilities','TemplateBody','2010-05-15','./AWSUtils','Tags','browserstack:creationDate','load','tgVzw','getOidcUrl','OnFailure','mWjTD','StackId','StackName','Key','8fruAVV','ZbInP','Resources','38380mKeWFC','browserstack:cluster','wQNnu','305679QQQhDU','readFileAsync','Properties','://','stringify','../config/constants','6148730oXVczq','schema','js-yaml-cloudformation-schema','SIzVo','split','waitFor','NZeqT','promisifyAll','push','28umJlUZ','zeYWW','NAjJJ','../config/logger','RfBJv','apiVersion','createHubHaStack','bluebird','156WjnxfY','toString','ogwgz','64797VvgmAk','3004722kcTtzl','13458XFIcFL','promise','-cf','hub-ha.yaml','BaseResourceName'];a28_0x3a95=function(){return _0x41b6c3;};return a28_0x3a95();}const a28_0x1a27d7=a28_0x276d;function a28_0x276d(_0xce0bc1,_0x4347fa){const _0x3a95a4=a28_0x3a95();return a28_0x276d=function(_0x276d81,_0x1f770e){_0x276d81=_0x276d81-0xdd;let _0x3a2b76=_0x3a95a4[_0x276d81];return _0x3a2b76;},a28_0x276d(_0xce0bc1,_0x4347fa);}(function(_0x3a14a6,_0x33c716){const _0x2c9249=a28_0x276d,_0x3551ee=_0x3a14a6();while(!![]){try{const _0xce2fe0=parseInt(_0x2c9249(0x116))/0x1*(-parseInt(_0x2c9249(0xe2))/0x2)+parseInt(_0x2c9249(0xe0))/0x3*(-parseInt(_0x2c9249(0xf1))/0x4)+-parseInt(_0x2c9249(0x104))/0x5*(parseInt(_0x2c9249(0xdd))/0x6)+-parseInt(_0x2c9249(0xe8))/0x7*(parseInt(_0x2c9249(0x101))/0x8)+-parseInt(_0x2c9249(0xe1))/0x9+parseInt(_0x2c9249(0x10d))/0xa+parseInt(_0x2c9249(0x107))/0xb*(parseInt(_0x2c9249(0xec))/0xc);if(_0xce2fe0===_0x33c716)break;else _0x3551ee['push'](_0x3551ee['shift']());}catch(_0x2d7940){_0x3551ee['push'](_0x3551ee['shift']());}}}(a28_0x3a95,0x570fd));const fs=require('fs'),path=require('path'),Promise=require(a28_0x1a27d7(0x11d)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a28_0x1a27d7(0x10f)),AWS=require(a28_0x1a27d7(0xf6))[a28_0x1a27d7(0xe7)],AWSUtils=require('./AWSUtils'),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x1a27d7(0x10c)),{logger}=require(a28_0x1a27d7(0x119));Promise[a28_0x1a27d7(0x114)](fs);const addTags=async(_0x38b0e8,_0x11c96c)=>{const _0x6e6ae3=a28_0x1a27d7;for(const _0x4dfa3f in _0x38b0e8[_0x6e6ae3(0x103)]){_0x38b0e8['Resources'][_0x4dfa3f][_0x6e6ae3(0x109)]&&_0x38b0e8[_0x6e6ae3(0x103)][_0x4dfa3f]['Properties']['Tags']&&_0x38b0e8['Resources'][_0x4dfa3f][_0x6e6ae3(0x109)][_0x6e6ae3(0xf7)][_0x6e6ae3(0x115)](..._0x11c96c);}};exports[a28_0x1a27d7(0x11c)]=async(_0x3e6110,_0x3cfb5b=null)=>{const _0x3af690=a28_0x1a27d7,_0x75d3e5={'MjPVE':_0x3af690(0x105),'SIzVo':_0x3af690(0xf8),'lSUus':_0x3af690(0xf5),'ogwgz':_0x3af690(0xef),'mWjTD':_0x3af690(0xe5),'kYdnD':_0x3af690(0xf2),'zeYWW':function(_0x6056a8,_0x525278,_0x187e52){return _0x6056a8(_0x525278,_0x187e52);},'ZbInP':_0x3af690(0x10a),'XrbxE':'DELETE','NAjJJ':'VpcId','NZeqT':_0x3af690(0xe6),'RfBJv':'ClusterOIDCURL','quNuZ':_0x3af690(0xea),'tgVzw':'Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','wQNnu':_0x3af690(0xe9)},_0x4944f9=COMMON_HST_TAGS,_0x1243d9={};_0x1243d9[_0x3af690(0x100)]=_0x75d3e5['MjPVE'],_0x1243d9['Value']=_0x3e6110,_0x4944f9['push'](_0x1243d9),_0x4944f9[_0x3af690(0x115)]({'Key':_0x75d3e5[_0x3af690(0x110)],'Value':new Date()[_0x3af690(0xed)]()[_0x3af690(0xde)]()});const _0x49e906={};_0x49e906[_0x3af690(0x11b)]=_0x75d3e5['lSUus'];const _0x557ac6=new AWS[(_0x3af690(0xeb))](_0x49e906),_0x400f99=await fs[_0x3af690(0x108)](path['join'](__dirname,'..',_0x75d3e5[_0x3af690(0xdf)],_0x75d3e5[_0x3af690(0xfd)]),_0x75d3e5['kYdnD']),_0xbba083={};_0xbba083[_0x3af690(0x10e)]=CLOUDFORMATION_SCHEMA;const _0x17fa1e=yaml[_0x3af690(0xf9)](_0x400f99,_0xbba083);await _0x75d3e5[_0x3af690(0x117)](addTags,_0x17fa1e,_0x4944f9);const _0x4f7215=JSON[_0x3af690(0x10b)](_0x17fa1e);let _0x185618=await AWSUtils[_0x3af690(0xfb)](_0x3e6110);_0x185618=_0x185618[_0x3af690(0x111)](_0x75d3e5[_0x3af690(0x102)])[0x1];const _0x216bbe={};_0x216bbe['StackName']=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3e6110+_0x3af690(0xe4),_0x216bbe[_0x3af690(0xfc)]=_0x75d3e5['XrbxE'],_0x216bbe[_0x3af690(0xf4)]=_0x4f7215,_0x216bbe['Parameters']=[{'ParameterKey':_0x75d3e5[_0x3af690(0x118)],'ParameterValue':_0x3cfb5b},{'ParameterKey':_0x75d3e5[_0x3af690(0x113)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3e6110},{'ParameterKey':_0x75d3e5[_0x3af690(0x11a)],'ParameterValue':_0x185618}],_0x216bbe[_0x3af690(0xf3)]=[_0x75d3e5[_0x3af690(0xf0)]],_0x216bbe[_0x3af690(0xf7)]=_0x4944f9;const _0x536744=_0x216bbe,_0x2bc99f=await _0x557ac6['createStack'](_0x536744)['promise']();logger[_0x3af690(0xee)](_0x75d3e5[_0x3af690(0xfa)]);const _0x71a33={};return _0x71a33[_0x3af690(0xff)]=_0x2bc99f[_0x3af690(0xfe)],_0x557ac6[_0x3af690(0x112)](_0x75d3e5[_0x3af690(0x106)],_0x71a33)[_0x3af690(0xe3)]();};