function a28_0x3bef(_0x8836af,_0x4192e4){const _0xb3ec96=a28_0xb3ec();return a28_0x3bef=function(_0x3bef8f,_0x1c3b6d){_0x3bef8f=_0x3bef8f-0xe4;let _0x15f704=_0xb3ec96[_0x3bef8f];return _0x15f704;},a28_0x3bef(_0x8836af,_0x4192e4);}const a28_0x2cb2a7=a28_0x3bef;function a28_0xb3ec(){const _0x4b76b6=['24114320stJcze','info','itnZV','ClusterOIDCURL','TycPI','browserstack:cluster','Value','8kJekar','valueOf','StackName','DELETE','2010-05-15','BaseResourceName','createStack','DKXtm','4750731Vpiqht','CFTemplates','737474PxSZpt','Tags','dOxOB','Resources','push','browserstack:creationDate','2196QGCuLp','awsObj','OwHVU','38425uAojBY','IfqTl','CloudFormation','stackCreateComplete','empND','../config/constants','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','CGPXw','Capabilities','://','QoHkp','promise','schema','readFileAsync','split','stringify','StackId','638946rcofeP','2UbIdMT','createHubHaStack','js-yaml','promisifyAll','path','CAPABILITY_NAMED_IAM','hub-ha.yaml','FTEiX','apiVersion','iQAke','RaCdX','getOidcUrl','load','Key','Properties','OnFailure','375336urhHXi','6657bDEWyR','Parameters'];a28_0xb3ec=function(){return _0x4b76b6;};return a28_0xb3ec();}(function(_0x113277,_0x3d8a1a){const _0x40b99d=a28_0x3bef,_0x798799=_0x113277();while(!![]){try{const _0x577c13=-parseInt(_0x40b99d(0xe9))/0x1*(parseInt(_0x40b99d(0x10d))/0x2)+parseInt(_0x40b99d(0xe8))/0x3*(-parseInt(_0x40b99d(0x103))/0x4)+-parseInt(_0x40b99d(0x116))/0x5+-parseInt(_0x40b99d(0x113))/0x6*(parseInt(_0x40b99d(0xfa))/0x7)+parseInt(_0x40b99d(0xf9))/0x8+-parseInt(_0x40b99d(0x10b))/0x9+parseInt(_0x40b99d(0xfc))/0xa;if(_0x577c13===_0x3d8a1a)break;else _0x798799['push'](_0x798799['shift']());}catch(_0x1af79b){_0x798799['push'](_0x798799['shift']());}}}(a28_0xb3ec,0x646a5));const fs=require('fs'),path=require(a28_0x2cb2a7(0xed)),Promise=require('bluebird'),yaml=require(a28_0x2cb2a7(0xeb)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),AWS=require('./AWSUtils')[a28_0x2cb2a7(0x114)],AWSUtils=require('./AWSUtils'),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x2cb2a7(0x11b)),{logger}=require('../config/logger');Promise[a28_0x2cb2a7(0xec)](fs);const addTags=async(_0x43b69f,_0xc183ec)=>{const _0x184dfd=a28_0x2cb2a7;for(const _0x53626a in _0x43b69f[_0x184dfd(0x110)]){_0x43b69f[_0x184dfd(0x110)][_0x53626a]['Properties']&&_0x43b69f['Resources'][_0x53626a][_0x184dfd(0xf7)][_0x184dfd(0x10e)]&&_0x43b69f['Resources'][_0x53626a][_0x184dfd(0xf7)]['Tags'][_0x184dfd(0x111)](..._0xc183ec);}};exports[a28_0x2cb2a7(0xea)]=async(_0x5e8040,_0x5cf5e1=null)=>{const _0x31705d=a28_0x2cb2a7,_0x54e737={'empND':_0x31705d(0x101),'dOxOB':_0x31705d(0x112),'CGPXw':_0x31705d(0x107),'HnXEp':_0x31705d(0x10c),'OwHVU':_0x31705d(0xef),'itnZV':'utf-8','TycPI':function(_0x24439c,_0x4bbaa3,_0x36e3dc){return _0x24439c(_0x4bbaa3,_0x36e3dc);},'FTEiX':_0x31705d(0x11f),'DKXtm':_0x31705d(0x106),'QoHkp':'VpcId','ZBwPs':_0x31705d(0x108),'iQAke':_0x31705d(0xff),'IfqTl':_0x31705d(0xee),'dIyeW':_0x31705d(0x11c),'RaCdX':_0x31705d(0x119)},_0x57b044=COMMON_HST_TAGS,_0x5e845b={};_0x5e845b[_0x31705d(0xf6)]=_0x54e737[_0x31705d(0x11a)],_0x5e845b[_0x31705d(0x102)]=_0x5e8040,_0x57b044[_0x31705d(0x111)](_0x5e845b),_0x57b044['push']({'Key':_0x54e737[_0x31705d(0x10f)],'Value':new Date()[_0x31705d(0x104)]()['toString']()});const _0x45c24a={};_0x45c24a[_0x31705d(0xf1)]=_0x54e737[_0x31705d(0x11d)];const _0x20dac8=new AWS[(_0x31705d(0x118))](_0x45c24a),_0x40d380=await fs[_0x31705d(0xe4)](path['join'](__dirname,'..',_0x54e737['HnXEp'],_0x54e737[_0x31705d(0x115)]),_0x54e737[_0x31705d(0xfe)]),_0x4b3363={};_0x4b3363[_0x31705d(0x122)]=CLOUDFORMATION_SCHEMA;const _0x20b5a5=yaml[_0x31705d(0xf5)](_0x40d380,_0x4b3363);await _0x54e737[_0x31705d(0x100)](addTags,_0x20b5a5,_0x57b044);const _0x26138d=JSON[_0x31705d(0xe6)](_0x20b5a5);let _0xf07e43=await AWSUtils[_0x31705d(0xf4)](_0x5e8040);_0xf07e43=_0xf07e43[_0x31705d(0xe5)](_0x54e737[_0x31705d(0xf0)])[0x1];const _0x42e37e={};_0x42e37e[_0x31705d(0x105)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x5e8040+'-cf',_0x42e37e[_0x31705d(0xf8)]=_0x54e737[_0x31705d(0x10a)],_0x42e37e['TemplateBody']=_0x26138d,_0x42e37e[_0x31705d(0xfb)]=[{'ParameterKey':_0x54e737[_0x31705d(0x120)],'ParameterValue':_0x5cf5e1},{'ParameterKey':_0x54e737['ZBwPs'],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x5e8040},{'ParameterKey':_0x54e737[_0x31705d(0xf2)],'ParameterValue':_0xf07e43}],_0x42e37e[_0x31705d(0x11e)]=[_0x54e737[_0x31705d(0x117)]],_0x42e37e['Tags']=_0x57b044;const _0x37e919=_0x42e37e,_0x15679c=await _0x20dac8[_0x31705d(0x109)](_0x37e919)[_0x31705d(0x121)]();logger[_0x31705d(0xfd)](_0x54e737['dIyeW']);const _0x130dde={};return _0x130dde[_0x31705d(0x105)]=_0x15679c[_0x31705d(0xe7)],_0x20dac8['waitFor'](_0x54e737[_0x31705d(0xf3)],_0x130dde)[_0x31705d(0x121)]();};