const a28_0x1be719=a28_0x4ca5;function a28_0x489e(){const _0x104d96=['jHweD','CFTemplates','load','js-yaml','tQgRZ','811832uGxBdA','./AWSUtils','browserstack:cluster','XaUza','valueOf','2010-05-15','hub-ha.yaml','229070dfVagn','toString','BaseResourceName','js-yaml-cloudformation-schema','waitFor','Parameters','Tags','12zcNIlQ','MmoMx','491046yTfpsj','TXYSJ','SHoAs','schema','-cf','apiVersion','stringify','StackName','promisifyAll','ClusterOIDCURL','Properties','hhITe','30672mGlEzV','1eoBbAc','HFhaB','createStack','split','NQUdU','192885FwDahX','exYoy','TemplateBody','awsObj','push','createHubHaStack','Capabilities','CAPABILITY_NAMED_IAM','VpcId','../config/logger','CloudFormation','IUUkT','54VujIvT','stackCreateComplete','cvrRe','BvLTE','bluebird','820474QXkRjC','info','Resources','OnFailure','browserstack:creationDate','utf-8','StackId','promise','3921uPvZXT'];a28_0x489e=function(){return _0x104d96;};return a28_0x489e();}(function(_0x3fc189,_0x9fe8c1){const _0x12c501=a28_0x4ca5,_0x1aebd6=_0x3fc189();while(!![]){try{const _0x540bb2=parseInt(_0x12c501(0x198))/0x1*(parseInt(_0x12c501(0x1ae))/0x2)+-parseInt(_0x12c501(0x1b6))/0x3*(parseInt(_0x12c501(0x189))/0x4)+parseInt(_0x12c501(0x19d))/0x5+-parseInt(_0x12c501(0x18b))/0x6+-parseInt(_0x12c501(0x1bc))/0x7+parseInt(_0x12c501(0x197))/0x8*(-parseInt(_0x12c501(0x1a9))/0x9)+parseInt(_0x12c501(0x1c3))/0xa;if(_0x540bb2===_0x9fe8c1)break;else _0x1aebd6['push'](_0x1aebd6['shift']());}catch(_0x47158e){_0x1aebd6['push'](_0x1aebd6['shift']());}}}(a28_0x489e,0x3c4c3));const fs=require('fs'),path=require('path'),Promise=require(a28_0x1be719(0x1ad)),yaml=require(a28_0x1be719(0x1ba)),{CLOUDFORMATION_SCHEMA}=require(a28_0x1be719(0x185)),AWS=require(a28_0x1be719(0x1bd))[a28_0x1be719(0x1a0)],AWSUtils=require(a28_0x1be719(0x1bd)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require(a28_0x1be719(0x1a6));function a28_0x4ca5(_0x4c742b,_0x380d40){const _0x489e38=a28_0x489e();return a28_0x4ca5=function(_0x4ca5ff,_0xd879){_0x4ca5ff=_0x4ca5ff-0x183;let _0x454ee5=_0x489e38[_0x4ca5ff];return _0x454ee5;},a28_0x4ca5(_0x4c742b,_0x380d40);}Promise[a28_0x1be719(0x193)](fs);const addTags=async(_0x282dde,_0x12c3c4)=>{const _0x106aa9=a28_0x1be719;for(const _0x7359b1 in _0x282dde[_0x106aa9(0x1b0)]){_0x282dde[_0x106aa9(0x1b0)][_0x7359b1][_0x106aa9(0x195)]&&_0x282dde[_0x106aa9(0x1b0)][_0x7359b1]['Properties'][_0x106aa9(0x188)]&&_0x282dde[_0x106aa9(0x1b0)][_0x7359b1][_0x106aa9(0x195)]['Tags'][_0x106aa9(0x1a1)](..._0x12c3c4);}};exports[a28_0x1be719(0x1a2)]=async(_0x3a284b,_0x3e9dec=null)=>{const _0x298cc0=a28_0x1be719,_0x3a6299={'jHweD':_0x298cc0(0x1be),'HFhaB':_0x298cc0(0x1b2),'EpPfU':_0x298cc0(0x1c1),'exYoy':_0x298cc0(0x1b8),'IUUkT':_0x298cc0(0x1c2),'hhITe':_0x298cc0(0x1b3),'XaUza':function(_0x2e9c4d,_0x3c67d5,_0xdffc8b){return _0x2e9c4d(_0x3c67d5,_0xdffc8b);},'NQUdU':'://','TXYSJ':'DELETE','SHoAs':_0x298cc0(0x1a5),'tQgRZ':_0x298cc0(0x184),'DWBlM':_0x298cc0(0x194),'BvLTE':_0x298cc0(0x1a4),'MmoMx':'Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','cvrRe':_0x298cc0(0x1aa)},_0x1a2855=COMMON_HST_TAGS,_0x49aab2={};_0x49aab2['Key']=_0x3a6299[_0x298cc0(0x1b7)],_0x49aab2['Value']=_0x3a284b,_0x1a2855[_0x298cc0(0x1a1)](_0x49aab2),_0x1a2855[_0x298cc0(0x1a1)]({'Key':_0x3a6299[_0x298cc0(0x199)],'Value':new Date()[_0x298cc0(0x1c0)]()[_0x298cc0(0x183)]()});const _0x27e844={};_0x27e844[_0x298cc0(0x190)]=_0x3a6299['EpPfU'];const _0x37613b=new AWS[(_0x298cc0(0x1a7))](_0x27e844),_0x4647c9=await fs['readFileAsync'](path['join'](__dirname,'..',_0x3a6299[_0x298cc0(0x19e)],_0x3a6299[_0x298cc0(0x1a8)]),_0x3a6299[_0x298cc0(0x196)]),_0x334623={};_0x334623[_0x298cc0(0x18e)]=CLOUDFORMATION_SCHEMA;const _0x39abeb=yaml[_0x298cc0(0x1b9)](_0x4647c9,_0x334623);await _0x3a6299[_0x298cc0(0x1bf)](addTags,_0x39abeb,_0x1a2855);const _0x21f642=JSON[_0x298cc0(0x191)](_0x39abeb);let _0x19b0f9=await AWSUtils['getOidcUrl'](_0x3a284b);_0x19b0f9=_0x19b0f9[_0x298cc0(0x19b)](_0x3a6299[_0x298cc0(0x19c)])[0x1];const _0x3735d7={};_0x3735d7[_0x298cc0(0x192)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3a284b+_0x298cc0(0x18f),_0x3735d7[_0x298cc0(0x1b1)]=_0x3a6299[_0x298cc0(0x18c)],_0x3735d7[_0x298cc0(0x19f)]=_0x21f642,_0x3735d7[_0x298cc0(0x187)]=[{'ParameterKey':_0x3a6299[_0x298cc0(0x18d)],'ParameterValue':_0x3e9dec},{'ParameterKey':_0x3a6299[_0x298cc0(0x1bb)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3a284b},{'ParameterKey':_0x3a6299['DWBlM'],'ParameterValue':_0x19b0f9}],_0x3735d7[_0x298cc0(0x1a3)]=[_0x3a6299[_0x298cc0(0x1ac)]],_0x3735d7['Tags']=_0x1a2855;const _0x25e16e=_0x3735d7,_0x2db47a=await _0x37613b[_0x298cc0(0x19a)](_0x25e16e)[_0x298cc0(0x1b5)]();logger[_0x298cc0(0x1af)](_0x3a6299[_0x298cc0(0x18a)]);const _0x4d6f8e={};return _0x4d6f8e['StackName']=_0x2db47a[_0x298cc0(0x1b4)],_0x37613b[_0x298cc0(0x186)](_0x3a6299[_0x298cc0(0x1ab)],_0x4d6f8e)[_0x298cc0(0x1b5)]();};