const a28_0x389d53=a28_0x5334;(function(_0x3c2d99,_0x252ab6){const _0x398ea2=a28_0x5334,_0x2109a0=_0x3c2d99();while(!![]){try{const _0x23d9fa=parseInt(_0x398ea2(0x1bf))/0x1*(-parseInt(_0x398ea2(0x1a9))/0x2)+parseInt(_0x398ea2(0x1cc))/0x3*(parseInt(_0x398ea2(0x1c1))/0x4)+-parseInt(_0x398ea2(0x1e3))/0x5+-parseInt(_0x398ea2(0x1c6))/0x6*(parseInt(_0x398ea2(0x1d2))/0x7)+parseInt(_0x398ea2(0x1af))/0x8+-parseInt(_0x398ea2(0x1cd))/0x9+parseInt(_0x398ea2(0x1a8))/0xa*(parseInt(_0x398ea2(0x1d7))/0xb);if(_0x23d9fa===_0x252ab6)break;else _0x2109a0['push'](_0x2109a0['shift']());}catch(_0x59e659){_0x2109a0['push'](_0x2109a0['shift']());}}}(a28_0x3cd4,0xc895d));function a28_0x3cd4(){const _0x1bbf4f=['36PoFxaR','promisifyAll','ClusterOIDCURL','LtyRm','Resources','108KIDGUk','toString','MhzBa','VpcId','Tags','-cf','20685uxKkTS','6959898SyFEIC','IdIlu','valueOf','../config/constants','utf-8','250180IEOxYb','CAPABILITY_NAMED_IAM','readFileAsync','Parameters','apiVersion','1255067bfqBcV','promise','nmJdH','StackName','TemplateBody','BaseResourceName','awsObj','Key','hub-ha.yaml','browserstack:cluster','waitFor','js-yaml','5270215etYPAy','browserstack:creationDate','../config/logger','schema','split','290mGALRW','16aIsZvc','knpDt','tSGzM','./AWSUtils','Properties','push','4937008igqdFD','createHubHaStack','js-yaml-cloudformation-schema','path','getOidcUrl','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','qtDzO','load','stackCreateComplete','sZlgX','info','StackId','join','Value','bluebird','CFTemplates','86964WrMoun','://'];a28_0x3cd4=function(){return _0x1bbf4f;};return a28_0x3cd4();}function a28_0x5334(_0x482945,_0x4ddb86){const _0x3cd43c=a28_0x3cd4();return a28_0x5334=function(_0x53342b,_0xda09b2){_0x53342b=_0x53342b-0x1a8;let _0x2ea8d3=_0x3cd43c[_0x53342b];return _0x2ea8d3;},a28_0x5334(_0x482945,_0x4ddb86);}const fs=require('fs'),path=require(a28_0x389d53(0x1b2)),Promise=require(a28_0x389d53(0x1bd)),yaml=require(a28_0x389d53(0x1e2)),{CLOUDFORMATION_SCHEMA}=require(a28_0x389d53(0x1b1)),AWS=require(a28_0x389d53(0x1ac))[a28_0x389d53(0x1dd)],AWSUtils=require(a28_0x389d53(0x1ac)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x389d53(0x1d0)),{logger}=require(a28_0x389d53(0x1e5));Promise[a28_0x389d53(0x1c2)](fs);const addTags=async(_0x54cb4f,_0x576877)=>{const _0x1bf521=a28_0x389d53;for(const _0x56bb9a in _0x54cb4f['Resources']){_0x54cb4f[_0x1bf521(0x1c5)][_0x56bb9a][_0x1bf521(0x1ad)]&&_0x54cb4f[_0x1bf521(0x1c5)][_0x56bb9a][_0x1bf521(0x1ad)][_0x1bf521(0x1ca)]&&_0x54cb4f[_0x1bf521(0x1c5)][_0x56bb9a]['Properties'][_0x1bf521(0x1ca)][_0x1bf521(0x1ae)](..._0x576877);}};exports[a28_0x389d53(0x1b0)]=async(_0x5ac544,_0x58d11a=null)=>{const _0x29a809=a28_0x389d53,_0x1787e7={'MhzBa':_0x29a809(0x1e0),'LtyRm':_0x29a809(0x1e4),'EnWNr':'2010-05-15','dRKJZ':_0x29a809(0x1be),'qtDzO':_0x29a809(0x1df),'knpDt':_0x29a809(0x1d1),'qfWYd':function(_0x11c881,_0x50432b,_0x35620c){return _0x11c881(_0x50432b,_0x35620c);},'IdIlu':_0x29a809(0x1c0),'tSGzM':'DELETE','PgxOL':_0x29a809(0x1c9),'YKIKL':_0x29a809(0x1dc),'sZlgX':_0x29a809(0x1c3),'tSQhy':_0x29a809(0x1d3),'TEAVJ':_0x29a809(0x1b4),'nmJdH':_0x29a809(0x1b7)},_0x39a435=COMMON_HST_TAGS,_0x35a2ca={};_0x35a2ca[_0x29a809(0x1de)]=_0x1787e7[_0x29a809(0x1c8)],_0x35a2ca[_0x29a809(0x1bc)]=_0x5ac544,_0x39a435[_0x29a809(0x1ae)](_0x35a2ca),_0x39a435[_0x29a809(0x1ae)]({'Key':_0x1787e7[_0x29a809(0x1c4)],'Value':new Date()[_0x29a809(0x1cf)]()[_0x29a809(0x1c7)]()});const _0x4d8c1c={};_0x4d8c1c[_0x29a809(0x1d6)]=_0x1787e7['EnWNr'];const _0x73bcc0=new AWS['CloudFormation'](_0x4d8c1c),_0x35b972=await fs[_0x29a809(0x1d4)](path[_0x29a809(0x1bb)](__dirname,'..',_0x1787e7['dRKJZ'],_0x1787e7[_0x29a809(0x1b5)]),_0x1787e7[_0x29a809(0x1aa)]),_0x1eaa8e={};_0x1eaa8e[_0x29a809(0x1e6)]=CLOUDFORMATION_SCHEMA;const _0x12e0de=yaml[_0x29a809(0x1b6)](_0x35b972,_0x1eaa8e);await _0x1787e7['qfWYd'](addTags,_0x12e0de,_0x39a435);const _0x56002e=JSON['stringify'](_0x12e0de);let _0x43f33e=await AWSUtils[_0x29a809(0x1b3)](_0x5ac544);_0x43f33e=_0x43f33e[_0x29a809(0x1e7)](_0x1787e7[_0x29a809(0x1ce)])[0x1];const _0x2104f5={};_0x2104f5[_0x29a809(0x1da)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x5ac544+_0x29a809(0x1cb),_0x2104f5['OnFailure']=_0x1787e7[_0x29a809(0x1ab)],_0x2104f5[_0x29a809(0x1db)]=_0x56002e,_0x2104f5[_0x29a809(0x1d5)]=[{'ParameterKey':_0x1787e7['PgxOL'],'ParameterValue':_0x58d11a},{'ParameterKey':_0x1787e7['YKIKL'],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x5ac544},{'ParameterKey':_0x1787e7[_0x29a809(0x1b8)],'ParameterValue':_0x43f33e}],_0x2104f5['Capabilities']=[_0x1787e7['tSQhy']],_0x2104f5[_0x29a809(0x1ca)]=_0x39a435;const _0x2c6206=_0x2104f5,_0x44a32e=await _0x73bcc0['createStack'](_0x2c6206)[_0x29a809(0x1d8)]();logger[_0x29a809(0x1b9)](_0x1787e7['TEAVJ']);const _0x41a9e2={};return _0x41a9e2[_0x29a809(0x1da)]=_0x44a32e[_0x29a809(0x1ba)],_0x73bcc0[_0x29a809(0x1e1)](_0x1787e7[_0x29a809(0x1d9)],_0x41a9e2)[_0x29a809(0x1d8)]();};