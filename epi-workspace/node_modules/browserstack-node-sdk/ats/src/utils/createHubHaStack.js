const a28_0x3ffa4b=a28_0x2e0f;(function(_0x418adb,_0x1e0844){const _0x4c7e68=a28_0x2e0f,_0x15e38c=_0x418adb();while(!![]){try{const _0xe1612f=-parseInt(_0x4c7e68(0x15b))/0x1+parseInt(_0x4c7e68(0x161))/0x2+parseInt(_0x4c7e68(0x147))/0x3*(-parseInt(_0x4c7e68(0x15a))/0x4)+-parseInt(_0x4c7e68(0x14d))/0x5*(-parseInt(_0x4c7e68(0x13a))/0x6)+-parseInt(_0x4c7e68(0x128))/0x7*(parseInt(_0x4c7e68(0x12d))/0x8)+parseInt(_0x4c7e68(0x155))/0x9*(-parseInt(_0x4c7e68(0x154))/0xa)+parseInt(_0x4c7e68(0x156))/0xb*(parseInt(_0x4c7e68(0x15e))/0xc);if(_0xe1612f===_0x1e0844)break;else _0x15e38c['push'](_0x15e38c['shift']());}catch(_0x1250d7){_0x15e38c['push'](_0x15e38c['shift']());}}}(a28_0x27ec,0x84bd7));const fs=require('fs'),path=require('path'),Promise=require(a28_0x3ffa4b(0x12c)),yaml=require(a28_0x3ffa4b(0x126)),{CLOUDFORMATION_SCHEMA}=require(a28_0x3ffa4b(0x152)),AWS=require(a28_0x3ffa4b(0x124))[a28_0x3ffa4b(0x163)],AWSUtils=require(a28_0x3ffa4b(0x124)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x3ffa4b(0x151)),{logger}=require(a28_0x3ffa4b(0x14f));Promise[a28_0x3ffa4b(0x130)](fs);function a28_0x27ec(){const _0x86b704=['BaseResourceName','3FNnutB','ZbDyK','utf-8','CFTemplates','hub-ha.yaml','getOidcUrl','5CGarfB','TemplateBody','../config/logger','Properties','../config/constants','js-yaml-cloudformation-schema','Tags','50030OLndmd','909nXogSm','3905tUlmsS','jcTKg','browserstack:creationDate','createStack','1216412KlTpVm','531916SkpPNz','DELETE','createHubHaStack','32268wbWGux','apiVersion','info','1224546HKSFWK','schema','awsObj','JkIxC','Resources','Capabilities','./AWSUtils','split','js-yaml','load','850304tZqwoD','Parameters','valueOf','ClusterOIDCURL','bluebird','40PMwjPO','bBIET','waitFor','promisifyAll','StackId','StackName','LAHxo','Value','push','promise','join','OnFailure','CloudFormation','5553102ggiFJA','Key','stringify','ZjVxK','dLUMQ','NHqZD','NysDE','iHOEc','jIBhX','CAPABILITY_NAMED_IAM','-cf','NeirA'];a28_0x27ec=function(){return _0x86b704;};return a28_0x27ec();}function a28_0x2e0f(_0x2b7a98,_0x5d6f64){const _0x27ec2a=a28_0x27ec();return a28_0x2e0f=function(_0x2e0f76,_0x2344ff){_0x2e0f76=_0x2e0f76-0x124;let _0x5a25e3=_0x27ec2a[_0x2e0f76];return _0x5a25e3;},a28_0x2e0f(_0x2b7a98,_0x5d6f64);}const addTags=async(_0x4c4ba3,_0x2f3337)=>{const _0x44d759=a28_0x3ffa4b;for(const _0x2fd512 in _0x4c4ba3[_0x44d759(0x165)]){_0x4c4ba3[_0x44d759(0x165)][_0x2fd512][_0x44d759(0x150)]&&_0x4c4ba3[_0x44d759(0x165)][_0x2fd512][_0x44d759(0x150)][_0x44d759(0x153)]&&_0x4c4ba3[_0x44d759(0x165)][_0x2fd512][_0x44d759(0x150)]['Tags'][_0x44d759(0x135)](..._0x2f3337);}};exports[a28_0x3ffa4b(0x15d)]=async(_0xed25c4,_0x2ddd4a=null)=>{const _0x426d46=a28_0x3ffa4b,_0x1d83a4={'dLUMQ':'browserstack:cluster','iHOEc':_0x426d46(0x158),'ZbDyK':'2010-05-15','jsyWW':_0x426d46(0x14a),'sBIxN':_0x426d46(0x14b),'jIBhX':_0x426d46(0x149),'NysDE':function(_0x1616bd,_0x55746a,_0x4bc24c){return _0x1616bd(_0x55746a,_0x4bc24c);},'JkIxC':'://','EwnTq':_0x426d46(0x15c),'jcTKg':'VpcId','ZjVxK':_0x426d46(0x146),'NeirA':_0x426d46(0x12b),'NHqZD':_0x426d46(0x143),'bBIET':'Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','LAHxo':'stackCreateComplete'},_0x296f1c=COMMON_HST_TAGS,_0x4b5260={};_0x4b5260[_0x426d46(0x13b)]=_0x1d83a4[_0x426d46(0x13e)],_0x4b5260[_0x426d46(0x134)]=_0xed25c4,_0x296f1c[_0x426d46(0x135)](_0x4b5260),_0x296f1c[_0x426d46(0x135)]({'Key':_0x1d83a4[_0x426d46(0x141)],'Value':new Date()[_0x426d46(0x12a)]()['toString']()});const _0xebd1a3={};_0xebd1a3[_0x426d46(0x15f)]=_0x1d83a4[_0x426d46(0x148)];const _0x3d3f23=new AWS[(_0x426d46(0x139))](_0xebd1a3),_0x2616c0=await fs['readFileAsync'](path[_0x426d46(0x137)](__dirname,'..',_0x1d83a4['jsyWW'],_0x1d83a4['sBIxN']),_0x1d83a4[_0x426d46(0x142)]),_0x430ed5={};_0x430ed5[_0x426d46(0x162)]=CLOUDFORMATION_SCHEMA;const _0x73bcc5=yaml[_0x426d46(0x127)](_0x2616c0,_0x430ed5);await _0x1d83a4[_0x426d46(0x140)](addTags,_0x73bcc5,_0x296f1c);const _0x282b00=JSON[_0x426d46(0x13c)](_0x73bcc5);let _0x11445d=await AWSUtils[_0x426d46(0x14c)](_0xed25c4);_0x11445d=_0x11445d[_0x426d46(0x125)](_0x1d83a4[_0x426d46(0x164)])[0x1];const _0x56b737={};_0x56b737[_0x426d46(0x132)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0xed25c4+_0x426d46(0x144),_0x56b737[_0x426d46(0x138)]=_0x1d83a4['EwnTq'],_0x56b737[_0x426d46(0x14e)]=_0x282b00,_0x56b737[_0x426d46(0x129)]=[{'ParameterKey':_0x1d83a4[_0x426d46(0x157)],'ParameterValue':_0x2ddd4a},{'ParameterKey':_0x1d83a4[_0x426d46(0x13d)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0xed25c4},{'ParameterKey':_0x1d83a4[_0x426d46(0x145)],'ParameterValue':_0x11445d}],_0x56b737[_0x426d46(0x166)]=[_0x1d83a4[_0x426d46(0x13f)]],_0x56b737[_0x426d46(0x153)]=_0x296f1c;const _0x3cdfe8=_0x56b737,_0x3b07bc=await _0x3d3f23[_0x426d46(0x159)](_0x3cdfe8)[_0x426d46(0x136)]();logger[_0x426d46(0x160)](_0x1d83a4[_0x426d46(0x12e)]);const _0x122359={};return _0x122359[_0x426d46(0x132)]=_0x3b07bc[_0x426d46(0x131)],_0x3d3f23[_0x426d46(0x12f)](_0x1d83a4[_0x426d46(0x133)],_0x122359)[_0x426d46(0x136)]();};