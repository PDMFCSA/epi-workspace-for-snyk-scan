const a28_0x276e51=a28_0x23cf;(function(_0x43839e,_0x3d18a0){const _0x34a35d=a28_0x23cf,_0x4f0b3b=_0x43839e();while(!![]){try{const _0x369b19=parseInt(_0x34a35d(0x14b))/0x1*(-parseInt(_0x34a35d(0x16f))/0x2)+parseInt(_0x34a35d(0x153))/0x3*(-parseInt(_0x34a35d(0x146))/0x4)+parseInt(_0x34a35d(0x175))/0x5+-parseInt(_0x34a35d(0x179))/0x6+-parseInt(_0x34a35d(0x170))/0x7+-parseInt(_0x34a35d(0x17e))/0x8*(parseInt(_0x34a35d(0x158))/0x9)+-parseInt(_0x34a35d(0x159))/0xa*(-parseInt(_0x34a35d(0x149))/0xb);if(_0x369b19===_0x3d18a0)break;else _0x4f0b3b['push'](_0x4f0b3b['shift']());}catch(_0x2d0cbe){_0x4f0b3b['push'](_0x4f0b3b['shift']());}}}(a28_0x4a23,0x3a3b2));function a28_0x23cf(_0x466ac8,_0x567acb){const _0x4a2364=a28_0x4a23();return a28_0x23cf=function(_0x23cfa5,_0x45ee75){_0x23cfa5=_0x23cfa5-0x146;let _0x52769a=_0x4a2364[_0x23cfa5];return _0x52769a;},a28_0x23cf(_0x466ac8,_0x567acb);}const fs=require('fs'),path=require(a28_0x276e51(0x17b)),Promise=require(a28_0x276e51(0x168)),yaml=require(a28_0x276e51(0x162)),{CLOUDFORMATION_SCHEMA}=require(a28_0x276e51(0x147)),AWS=require(a28_0x276e51(0x169))[a28_0x276e51(0x164)],AWSUtils=require(a28_0x276e51(0x169)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require(a28_0x276e51(0x14e));function a28_0x4a23(){const _0x417b1c=['StackName','Properties','239376muJpPa','createStack','path','VpcId','Tags','1768ITpYxz','promise','Key','849172LicwJh','js-yaml-cloudformation-schema','loQXc','33oGRzbT','Parameters','73StldTe','CxwzN','waitFor','../config/logger','utf-8','readFileAsync','load','info','6XXyCHY','pJNQw','CloudFormation','2010-05-15','UhETI','18990eYmuxm','4408070aezHyA','split','Resources','createHubHaStack','browserstack:creationDate','toString','HeULH','Value','QqrBv','js-yaml','CAPABILITY_NAMED_IAM','awsObj','schema','browserstack:cluster','CFTemplates','bluebird','./AWSUtils','push','CaQcQ','vYoFv','-cf','TmFZo','3506EbmGOh','2892568SXtgin','Capabilities','OnFailure','cgWfu','WDXms','1940390vVSrvX','EIoya'];a28_0x4a23=function(){return _0x417b1c;};return a28_0x4a23();}Promise['promisifyAll'](fs);const addTags=async(_0x41ffd8,_0x2126d6)=>{const _0x5985be=a28_0x276e51;for(const _0x2d45b9 in _0x41ffd8[_0x5985be(0x15b)]){_0x41ffd8[_0x5985be(0x15b)][_0x2d45b9][_0x5985be(0x178)]&&_0x41ffd8['Resources'][_0x2d45b9][_0x5985be(0x178)][_0x5985be(0x17d)]&&_0x41ffd8[_0x5985be(0x15b)][_0x2d45b9][_0x5985be(0x178)][_0x5985be(0x17d)][_0x5985be(0x16a)](..._0x2126d6);}};exports[a28_0x276e51(0x15c)]=async(_0x4f20f0,_0x3f557b=null)=>{const _0x3e76b3=a28_0x276e51,_0x4e3257={'UhETI':_0x3e76b3(0x166),'EIoya':_0x3e76b3(0x15d),'vYoFv':_0x3e76b3(0x156),'cgWfu':_0x3e76b3(0x167),'CxwzN':'hub-ha.yaml','DRsug':_0x3e76b3(0x14f),'TmFZo':function(_0x4c9b41,_0x447faf,_0x341857){return _0x4c9b41(_0x447faf,_0x341857);},'gJRas':'://','pJNQw':'DELETE','HeULH':_0x3e76b3(0x17c),'loQXc':'BaseResourceName','CaQcQ':'ClusterOIDCURL','WDXms':_0x3e76b3(0x163),'QqrBv':'Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','dAAUI':'stackCreateComplete'},_0x5df826=COMMON_HST_TAGS,_0x21c470={};_0x21c470[_0x3e76b3(0x180)]=_0x4e3257[_0x3e76b3(0x157)],_0x21c470[_0x3e76b3(0x160)]=_0x4f20f0,_0x5df826[_0x3e76b3(0x16a)](_0x21c470),_0x5df826['push']({'Key':_0x4e3257[_0x3e76b3(0x176)],'Value':new Date()['valueOf']()[_0x3e76b3(0x15e)]()});const _0xdfcf2c={};_0xdfcf2c['apiVersion']=_0x4e3257[_0x3e76b3(0x16c)];const _0x3b4b93=new AWS[(_0x3e76b3(0x155))](_0xdfcf2c),_0x46f6fb=await fs[_0x3e76b3(0x150)](path['join'](__dirname,'..',_0x4e3257[_0x3e76b3(0x173)],_0x4e3257[_0x3e76b3(0x14c)]),_0x4e3257['DRsug']),_0x294522={};_0x294522[_0x3e76b3(0x165)]=CLOUDFORMATION_SCHEMA;const _0x327117=yaml[_0x3e76b3(0x151)](_0x46f6fb,_0x294522);await _0x4e3257[_0x3e76b3(0x16e)](addTags,_0x327117,_0x5df826);const _0x3ecc99=JSON['stringify'](_0x327117);let _0x290c2a=await AWSUtils['getOidcUrl'](_0x4f20f0);_0x290c2a=_0x290c2a[_0x3e76b3(0x15a)](_0x4e3257['gJRas'])[0x1];const _0x1f237e={};_0x1f237e[_0x3e76b3(0x177)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x4f20f0+_0x3e76b3(0x16d),_0x1f237e[_0x3e76b3(0x172)]=_0x4e3257[_0x3e76b3(0x154)],_0x1f237e['TemplateBody']=_0x3ecc99,_0x1f237e[_0x3e76b3(0x14a)]=[{'ParameterKey':_0x4e3257[_0x3e76b3(0x15f)],'ParameterValue':_0x3f557b},{'ParameterKey':_0x4e3257[_0x3e76b3(0x148)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x4f20f0},{'ParameterKey':_0x4e3257[_0x3e76b3(0x16b)],'ParameterValue':_0x290c2a}],_0x1f237e[_0x3e76b3(0x171)]=[_0x4e3257[_0x3e76b3(0x174)]],_0x1f237e[_0x3e76b3(0x17d)]=_0x5df826;const _0x4f4458=_0x1f237e,_0x2df441=await _0x3b4b93[_0x3e76b3(0x17a)](_0x4f4458)[_0x3e76b3(0x17f)]();logger[_0x3e76b3(0x152)](_0x4e3257[_0x3e76b3(0x161)]);const _0x4f0977={};return _0x4f0977[_0x3e76b3(0x177)]=_0x2df441['StackId'],_0x3b4b93[_0x3e76b3(0x14d)](_0x4e3257['dAAUI'],_0x4f0977)['promise']();};