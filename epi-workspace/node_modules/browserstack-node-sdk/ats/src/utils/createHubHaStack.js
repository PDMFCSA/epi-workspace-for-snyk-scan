function a28_0xf16e(){const _0x569b7b=['createHubHaStack','hub-ha.yaml','365756KCElvn','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','readFileAsync','promisifyAll','StackName','jESor','35270sfCrbl','2NJhpxP','join','waitFor','ClusterOIDCURL','CAPABILITY_NAMED_IAM','js-yaml-cloudformation-schema','promise','937104SHCmrN','Tags','Properties','BEkms','20gCgXOw','getOidcUrl','toString','nolYJ','28192AiifMJ','759deepLx','push','cJWKv','ekkkl','NDmcP','apiVersion','1805818gvUyAu','VpcId','zDsId','UwWzW','js-yaml','SDRsd','390786iczLrV','Key','Resources','split','CFTemplates','DELETE','faKGf','HbQiL','path','browserstack:creationDate','bluebird','TemplateBody','64133XGUfxk','3zFCAPJ','stringify','info','Capabilities','Parameters','load','414jeaSum','Bkide','browserstack:cluster','awsObj','CloudFormation','./AWSUtils','schema','BaseResourceName'];a28_0xf16e=function(){return _0x569b7b;};return a28_0xf16e();}const a28_0x24c0f6=a28_0x2190;(function(_0x120b46,_0xe41ab2){const _0x518c4b=a28_0x2190,_0x954b04=_0x120b46();while(!![]){try{const _0xd67282=-parseInt(_0x518c4b(0x11f))/0x1*(-parseInt(_0x518c4b(0xf7))/0x2)+-parseInt(_0x518c4b(0x120))/0x3*(-parseInt(_0x518c4b(0xf0))/0x4)+parseInt(_0x518c4b(0x102))/0x5*(-parseInt(_0x518c4b(0x113))/0x6)+parseInt(_0x518c4b(0x10d))/0x7+-parseInt(_0x518c4b(0x106))/0x8*(-parseInt(_0x518c4b(0x126))/0x9)+parseInt(_0x518c4b(0xf6))/0xa*(-parseInt(_0x518c4b(0x107))/0xb)+parseInt(_0x518c4b(0xfe))/0xc;if(_0xd67282===_0xe41ab2)break;else _0x954b04['push'](_0x954b04['shift']());}catch(_0x360536){_0x954b04['push'](_0x954b04['shift']());}}}(a28_0xf16e,0x2495f));const fs=require('fs'),path=require(a28_0x24c0f6(0x11b)),Promise=require(a28_0x24c0f6(0x11d)),yaml=require(a28_0x24c0f6(0x111)),{CLOUDFORMATION_SCHEMA}=require(a28_0x24c0f6(0xfc)),AWS=require(a28_0x24c0f6(0x12b))[a28_0x24c0f6(0x129)],AWSUtils=require('./AWSUtils'),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require('../config/logger');function a28_0x2190(_0x306888,_0x4806e5){const _0xf16e7c=a28_0xf16e();return a28_0x2190=function(_0x219099,_0x30e84c){_0x219099=_0x219099-0xec;let _0x8e032a=_0xf16e7c[_0x219099];return _0x8e032a;},a28_0x2190(_0x306888,_0x4806e5);}Promise[a28_0x24c0f6(0xf3)](fs);const addTags=async(_0x4603b1,_0xbdd040)=>{const _0x5f13db=a28_0x24c0f6;for(const _0x309113 in _0x4603b1['Resources']){_0x4603b1[_0x5f13db(0x115)][_0x309113][_0x5f13db(0x100)]&&_0x4603b1['Resources'][_0x309113][_0x5f13db(0x100)]['Tags']&&_0x4603b1[_0x5f13db(0x115)][_0x309113][_0x5f13db(0x100)][_0x5f13db(0xff)][_0x5f13db(0x108)](..._0xbdd040);}};exports[a28_0x24c0f6(0xee)]=async(_0x46a9fa,_0x52575c=null)=>{const _0x49daba=a28_0x24c0f6,_0x17f526={'BEkms':_0x49daba(0x128),'SDRsd':_0x49daba(0x11c),'jESor':'2010-05-15','NDmcP':_0x49daba(0x117),'cJWKv':_0x49daba(0xef),'Bkide':'utf-8','nolYJ':function(_0x5df818,_0x4eba5b,_0x165ab4){return _0x5df818(_0x4eba5b,_0x165ab4);},'UwWzW':'://','faKGf':_0x49daba(0x118),'ekkkl':_0x49daba(0x10e),'szxUZ':_0x49daba(0xed),'iMWoK':_0x49daba(0xfa),'zDsId':_0x49daba(0xfb),'IrXUm':_0x49daba(0xf1),'HbQiL':'stackCreateComplete'},_0x2a3169=COMMON_HST_TAGS,_0x3ff78f={};_0x3ff78f[_0x49daba(0x114)]=_0x17f526[_0x49daba(0x101)],_0x3ff78f['Value']=_0x46a9fa,_0x2a3169[_0x49daba(0x108)](_0x3ff78f),_0x2a3169[_0x49daba(0x108)]({'Key':_0x17f526[_0x49daba(0x112)],'Value':new Date()['valueOf']()[_0x49daba(0x104)]()});const _0x322388={};_0x322388[_0x49daba(0x10c)]=_0x17f526[_0x49daba(0xf5)];const _0xbbec67=new AWS[(_0x49daba(0x12a))](_0x322388),_0x1ea33c=await fs[_0x49daba(0xf2)](path[_0x49daba(0xf8)](__dirname,'..',_0x17f526[_0x49daba(0x10b)],_0x17f526[_0x49daba(0x109)]),_0x17f526[_0x49daba(0x127)]),_0x578f0f={};_0x578f0f[_0x49daba(0xec)]=CLOUDFORMATION_SCHEMA;const _0x43ad54=yaml[_0x49daba(0x125)](_0x1ea33c,_0x578f0f);await _0x17f526[_0x49daba(0x105)](addTags,_0x43ad54,_0x2a3169);const _0x692a23=JSON[_0x49daba(0x121)](_0x43ad54);let _0x4c35a5=await AWSUtils[_0x49daba(0x103)](_0x46a9fa);_0x4c35a5=_0x4c35a5[_0x49daba(0x116)](_0x17f526[_0x49daba(0x110)])[0x1];const _0x1d03d6={};_0x1d03d6[_0x49daba(0xf4)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x46a9fa+'-cf',_0x1d03d6['OnFailure']=_0x17f526[_0x49daba(0x119)],_0x1d03d6[_0x49daba(0x11e)]=_0x692a23,_0x1d03d6[_0x49daba(0x124)]=[{'ParameterKey':_0x17f526[_0x49daba(0x10a)],'ParameterValue':_0x52575c},{'ParameterKey':_0x17f526['szxUZ'],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x46a9fa},{'ParameterKey':_0x17f526['iMWoK'],'ParameterValue':_0x4c35a5}],_0x1d03d6[_0x49daba(0x123)]=[_0x17f526[_0x49daba(0x10f)]],_0x1d03d6[_0x49daba(0xff)]=_0x2a3169;const _0x3523a0=_0x1d03d6,_0x7261a1=await _0xbbec67['createStack'](_0x3523a0)[_0x49daba(0xfd)]();logger[_0x49daba(0x122)](_0x17f526['IrXUm']);const _0x226e1e={};return _0x226e1e[_0x49daba(0xf4)]=_0x7261a1['StackId'],_0xbbec67[_0x49daba(0xf9)](_0x17f526[_0x49daba(0x11a)],_0x226e1e)['promise']();};