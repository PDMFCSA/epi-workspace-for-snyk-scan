const a28_0x62ddc9=a28_0x57c2;(function(_0x7d67b7,_0x1cb499){const _0x39897e=a28_0x57c2,_0x35d456=_0x7d67b7();while(!![]){try{const _0x2e9544=-parseInt(_0x39897e(0x14c))/0x1*(parseInt(_0x39897e(0x170))/0x2)+parseInt(_0x39897e(0x14b))/0x3+-parseInt(_0x39897e(0x154))/0x4+parseInt(_0x39897e(0x147))/0x5*(-parseInt(_0x39897e(0x16d))/0x6)+parseInt(_0x39897e(0x155))/0x7*(-parseInt(_0x39897e(0x15e))/0x8)+parseInt(_0x39897e(0x148))/0x9+parseInt(_0x39897e(0x151))/0xa;if(_0x2e9544===_0x1cb499)break;else _0x35d456['push'](_0x35d456['shift']());}catch(_0x1a0081){_0x35d456['push'](_0x35d456['shift']());}}}(a28_0x115d,0xeeb7c));function a28_0x115d(){const _0x38b77b=['24Htmqtb','createHubHaStack','Capabilities','info','valueOf','://','stringify','push','Tags','browserstack:cluster','YcMNC','wnzQt','./AWSUtils','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','StackName','36pFCtIL','VpcId','promise','12BVjEtb','Hzulg','CloudFormation','StackId','getOidcUrl','CFTemplates','EHGrt','schema','TemplateBody','2010-05-15','EFoPC','js-yaml','DELETE','apiVersion','Resources','readFileAsync','Key','MTZHG','tbyzk','798685EqsOyi','12879666bTVMdX','Parameters','load','3332031jlmqDS','109849tDoxXx','join','ClusterOIDCURL','waitFor','toString','15421220lmUixJ','stackCreateComplete','utf-8','52256CNKFyg','3442845ScDVLC','Properties','createStack','OeGjp','CAPABILITY_NAMED_IAM','../config/constants','qwCTl','BaseResourceName','split'];a28_0x115d=function(){return _0x38b77b;};return a28_0x115d();}function a28_0x57c2(_0x3bcdf1,_0x326a29){const _0x115d25=a28_0x115d();return a28_0x57c2=function(_0x57c26a,_0x2ab708){_0x57c26a=_0x57c26a-0x138;let _0xacd3c0=_0x115d25[_0x57c26a];return _0xacd3c0;},a28_0x57c2(_0x3bcdf1,_0x326a29);}const fs=require('fs'),path=require('path'),Promise=require('bluebird'),yaml=require(a28_0x62ddc9(0x13f)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),AWS=require('./AWSUtils')['awsObj'],AWSUtils=require(a28_0x62ddc9(0x16a)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x62ddc9(0x15a)),{logger}=require('../config/logger');Promise['promisifyAll'](fs);const addTags=async(_0x192709,_0x35630b)=>{const _0x558244=a28_0x62ddc9;for(const _0x32b4d5 in _0x192709[_0x558244(0x142)]){_0x192709[_0x558244(0x142)][_0x32b4d5]['Properties']&&_0x192709[_0x558244(0x142)][_0x32b4d5][_0x558244(0x156)][_0x558244(0x166)]&&_0x192709[_0x558244(0x142)][_0x32b4d5][_0x558244(0x156)][_0x558244(0x166)][_0x558244(0x165)](..._0x35630b);}};exports[a28_0x62ddc9(0x15f)]=async(_0x20960e,_0x471b77=null)=>{const _0x25610f=a28_0x62ddc9,_0x21c385={'Nrahp':_0x25610f(0x167),'OeGjp':'browserstack:creationDate','BCDGD':_0x25610f(0x13d),'McVCW':_0x25610f(0x139),'tbyzk':'hub-ha.yaml','bACUu':_0x25610f(0x153),'MTZHG':function(_0xb31952,_0x248e4a,_0x36e1fb){return _0xb31952(_0x248e4a,_0x36e1fb);},'Hzulg':_0x25610f(0x163),'EHGrt':_0x25610f(0x140),'YcMNC':_0x25610f(0x16e),'EFoPC':_0x25610f(0x15c),'OjROl':_0x25610f(0x14e),'eqsXM':_0x25610f(0x159),'qwCTl':_0x25610f(0x16b),'wnzQt':_0x25610f(0x152)},_0xec4e4d=COMMON_HST_TAGS,_0x32e48a={};_0x32e48a[_0x25610f(0x144)]=_0x21c385['Nrahp'],_0x32e48a['Value']=_0x20960e,_0xec4e4d[_0x25610f(0x165)](_0x32e48a),_0xec4e4d[_0x25610f(0x165)]({'Key':_0x21c385[_0x25610f(0x158)],'Value':new Date()[_0x25610f(0x162)]()[_0x25610f(0x150)]()});const _0x3fb75a={};_0x3fb75a[_0x25610f(0x141)]=_0x21c385['BCDGD'];const _0x307304=new AWS[(_0x25610f(0x172))](_0x3fb75a),_0x1076dd=await fs[_0x25610f(0x143)](path[_0x25610f(0x14d)](__dirname,'..',_0x21c385['McVCW'],_0x21c385[_0x25610f(0x146)]),_0x21c385['bACUu']),_0x13c4c3={};_0x13c4c3[_0x25610f(0x13b)]=CLOUDFORMATION_SCHEMA;const _0x44f81b=yaml[_0x25610f(0x14a)](_0x1076dd,_0x13c4c3);await _0x21c385[_0x25610f(0x145)](addTags,_0x44f81b,_0xec4e4d);const _0x1fe445=JSON[_0x25610f(0x164)](_0x44f81b);let _0x1df8a6=await AWSUtils[_0x25610f(0x138)](_0x20960e);_0x1df8a6=_0x1df8a6[_0x25610f(0x15d)](_0x21c385[_0x25610f(0x171)])[0x1];const _0x52cb9f={};_0x52cb9f[_0x25610f(0x16c)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x20960e+'-cf',_0x52cb9f['OnFailure']=_0x21c385[_0x25610f(0x13a)],_0x52cb9f[_0x25610f(0x13c)]=_0x1fe445,_0x52cb9f[_0x25610f(0x149)]=[{'ParameterKey':_0x21c385[_0x25610f(0x168)],'ParameterValue':_0x471b77},{'ParameterKey':_0x21c385[_0x25610f(0x13e)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x20960e},{'ParameterKey':_0x21c385['OjROl'],'ParameterValue':_0x1df8a6}],_0x52cb9f[_0x25610f(0x160)]=[_0x21c385['eqsXM']],_0x52cb9f[_0x25610f(0x166)]=_0xec4e4d;const _0x414e8b=_0x52cb9f,_0x32e976=await _0x307304[_0x25610f(0x157)](_0x414e8b)[_0x25610f(0x16f)]();logger[_0x25610f(0x161)](_0x21c385[_0x25610f(0x15b)]);const _0x3a7a90={};return _0x3a7a90[_0x25610f(0x16c)]=_0x32e976[_0x25610f(0x173)],_0x307304[_0x25610f(0x14f)](_0x21c385[_0x25610f(0x169)],_0x3a7a90)[_0x25610f(0x16f)]();};