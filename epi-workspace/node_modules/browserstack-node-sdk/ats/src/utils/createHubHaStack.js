function a28_0x1428(){const _0xaf142=['createStack','stringify','js-yaml','ClusterOIDCURL','Key','Tags','browserstack:creationDate','pULzc','581007XavZYi','10DiABvF','getOidcUrl','iMWIx','createHubHaStack','./AWSUtils','VpcId','Value','../config/constants','promise','585055xeBeZr','path','1128102jbTMkZ','hub-ha.yaml','CloudFormation','429212sDNkqc','GfDwJ','apiVersion','CAPABILITY_NAMED_IAM','waitFor','bZRkU','awsObj','xRDri','2010-05-15','TemplateBody','619407sykzSN','Resources','2979300QHPCjZ','Capabilities','push','YDbka','info','OnFailure','stackCreateComplete','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','9683DuMASb','YvvNx','toString','4hCwzFv','UBeKT','schema','toOTt','Parameters','browserstack:cluster','ZeEDe','valueOf','OclPn','promisifyAll','24DnNUOX','Properties','join','NBQoR','DELETE','utf-8','StackName','-cf','bluebird'];a28_0x1428=function(){return _0xaf142;};return a28_0x1428();}const a28_0x74dfe3=a28_0x12df;(function(_0x24d125,_0x246acb){const _0x1accf7=a28_0x12df,_0x247546=_0x24d125();while(!![]){try{const _0x5bd177=-parseInt(_0x1accf7(0x163))/0x1*(parseInt(_0x1accf7(0x182))/0x2)+parseInt(_0x1accf7(0x181))/0x3*(-parseInt(_0x1accf7(0x166))/0x4)+parseInt(_0x1accf7(0x14a))/0x5+-parseInt(_0x1accf7(0x14c))/0x6+-parseInt(_0x1accf7(0x14f))/0x7+-parseInt(_0x1accf7(0x170))/0x8*(-parseInt(_0x1accf7(0x159))/0x9)+parseInt(_0x1accf7(0x15b))/0xa;if(_0x5bd177===_0x246acb)break;else _0x247546['push'](_0x247546['shift']());}catch(_0x1ebb59){_0x247546['push'](_0x247546['shift']());}}}(a28_0x1428,0x1fbc9));const fs=require('fs'),path=require(a28_0x74dfe3(0x14b)),Promise=require(a28_0x74dfe3(0x178)),yaml=require(a28_0x74dfe3(0x17b)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),AWS=require('./AWSUtils')[a28_0x74dfe3(0x155)],AWSUtils=require(a28_0x74dfe3(0x186)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x74dfe3(0x189)),{logger}=require('../config/logger');function a28_0x12df(_0xf8fe18,_0x5885ff){const _0x1428ac=a28_0x1428();return a28_0x12df=function(_0x12df1f,_0x444605){_0x12df1f=_0x12df1f-0x14a;let _0x4a8cdc=_0x1428ac[_0x12df1f];return _0x4a8cdc;},a28_0x12df(_0xf8fe18,_0x5885ff);}Promise[a28_0x74dfe3(0x16f)](fs);const addTags=async(_0x13cb6b,_0x22cda0)=>{const _0xe7c690=a28_0x74dfe3;for(const _0x652041 in _0x13cb6b[_0xe7c690(0x15a)]){_0x13cb6b['Resources'][_0x652041]['Properties']&&_0x13cb6b['Resources'][_0x652041][_0xe7c690(0x171)][_0xe7c690(0x17e)]&&_0x13cb6b[_0xe7c690(0x15a)][_0x652041][_0xe7c690(0x171)]['Tags'][_0xe7c690(0x15d)](..._0x22cda0);}};exports[a28_0x74dfe3(0x185)]=async(_0x11293b,_0x112130=null)=>{const _0x454eaa=a28_0x74dfe3,_0x4acd23={'twtVZ':_0x454eaa(0x16b),'iMWIx':_0x454eaa(0x17f),'ZeEDe':_0x454eaa(0x157),'GfDwJ':'CFTemplates','YDbka':_0x454eaa(0x14d),'Xdxxv':_0x454eaa(0x175),'UBeKT':function(_0x57a79e,_0x3a9c87,_0x316f9f){return _0x57a79e(_0x3a9c87,_0x316f9f);},'NBQoR':'://','YvvNx':_0x454eaa(0x174),'OclPn':_0x454eaa(0x187),'QIptv':'BaseResourceName','toOTt':_0x454eaa(0x17c),'pULzc':_0x454eaa(0x152),'bZRkU':_0x454eaa(0x162),'xRDri':_0x454eaa(0x161)},_0x405b06=COMMON_HST_TAGS,_0x59b2a4={};_0x59b2a4[_0x454eaa(0x17d)]=_0x4acd23['twtVZ'],_0x59b2a4[_0x454eaa(0x188)]=_0x11293b,_0x405b06[_0x454eaa(0x15d)](_0x59b2a4),_0x405b06[_0x454eaa(0x15d)]({'Key':_0x4acd23[_0x454eaa(0x184)],'Value':new Date()[_0x454eaa(0x16d)]()[_0x454eaa(0x165)]()});const _0x372174={};_0x372174[_0x454eaa(0x151)]=_0x4acd23[_0x454eaa(0x16c)];const _0xa029d4=new AWS[(_0x454eaa(0x14e))](_0x372174),_0x2b20d2=await fs['readFileAsync'](path[_0x454eaa(0x172)](__dirname,'..',_0x4acd23[_0x454eaa(0x150)],_0x4acd23[_0x454eaa(0x15e)]),_0x4acd23['Xdxxv']),_0x2014fb={};_0x2014fb[_0x454eaa(0x168)]=CLOUDFORMATION_SCHEMA;const _0x5b9079=yaml['load'](_0x2b20d2,_0x2014fb);await _0x4acd23[_0x454eaa(0x167)](addTags,_0x5b9079,_0x405b06);const _0x53a35a=JSON[_0x454eaa(0x17a)](_0x5b9079);let _0x2ee13e=await AWSUtils[_0x454eaa(0x183)](_0x11293b);_0x2ee13e=_0x2ee13e['split'](_0x4acd23[_0x454eaa(0x173)])[0x1];const _0xb1cf5={};_0xb1cf5[_0x454eaa(0x176)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x11293b+_0x454eaa(0x177),_0xb1cf5[_0x454eaa(0x160)]=_0x4acd23[_0x454eaa(0x164)],_0xb1cf5[_0x454eaa(0x158)]=_0x53a35a,_0xb1cf5[_0x454eaa(0x16a)]=[{'ParameterKey':_0x4acd23[_0x454eaa(0x16e)],'ParameterValue':_0x112130},{'ParameterKey':_0x4acd23['QIptv'],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x11293b},{'ParameterKey':_0x4acd23[_0x454eaa(0x169)],'ParameterValue':_0x2ee13e}],_0xb1cf5[_0x454eaa(0x15c)]=[_0x4acd23[_0x454eaa(0x180)]],_0xb1cf5[_0x454eaa(0x17e)]=_0x405b06;const _0x3c7b97=_0xb1cf5,_0xf4c218=await _0xa029d4[_0x454eaa(0x179)](_0x3c7b97)[_0x454eaa(0x18a)]();logger[_0x454eaa(0x15f)](_0x4acd23[_0x454eaa(0x154)]);const _0x165817={};return _0x165817[_0x454eaa(0x176)]=_0xf4c218['StackId'],_0xa029d4[_0x454eaa(0x153)](_0x4acd23[_0x454eaa(0x156)],_0x165817)[_0x454eaa(0x18a)]();};