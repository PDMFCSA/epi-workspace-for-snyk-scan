function a28_0x4300(){const _0x145972=['CloudFormation','aKphl','eqOJf','Parameters','Uwoeg','Capabilities','browserstack:creationDate','244602qsrROn','stackCreateComplete','path','DELETE','3864763IJdXOr','split','../config/constants','MUbVy','251683MjdfOq','StackName','Key','readFileAsync','jKEeL','valueOf','UAeFF','cIKlY','load','createHubHaStack','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','://','598480bKZRYx','ClusterOIDCURL','./AWSUtils','promise','getOidcUrl','852524MnIWMW','MOpOU','1864266gffxhV','hub-ha.yaml','TemplateBody','OnFailure','vRUiB','Maprf','js-yaml-cloudformation-schema','VpcId','wsxoR','WUwhY','Value','BaseResourceName','awsObj','Resources','createStack','CFTemplates','-cf','1316525IBAjWu','lFQoh','StackId','utf-8','Tags','../config/logger','Properties','join','info','push'];a28_0x4300=function(){return _0x145972;};return a28_0x4300();}const a28_0x5aeb28=a28_0x180f;(function(_0x307237,_0xef59e7){const _0x5b71c5=a28_0x180f,_0x456ea4=_0x307237();while(!![]){try{const _0x317887=parseInt(_0x5b71c5(0x135))/0x1+parseInt(_0x5b71c5(0x141))/0x2+-parseInt(_0x5b71c5(0x12d))/0x3+parseInt(_0x5b71c5(0x146))/0x4+-parseInt(_0x5b71c5(0x11c))/0x5+parseInt(_0x5b71c5(0x148))/0x6+-parseInt(_0x5b71c5(0x131))/0x7;if(_0x317887===_0xef59e7)break;else _0x456ea4['push'](_0x456ea4['shift']());}catch(_0x4dfbe8){_0x456ea4['push'](_0x456ea4['shift']());}}}(a28_0x4300,0x2b699));const fs=require('fs'),path=require(a28_0x5aeb28(0x12f)),Promise=require('bluebird'),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a28_0x5aeb28(0x14e)),AWS=require(a28_0x5aeb28(0x143))[a28_0x5aeb28(0x117)],AWSUtils=require(a28_0x5aeb28(0x143)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x5aeb28(0x133)),{logger}=require(a28_0x5aeb28(0x121));function a28_0x180f(_0x18f6d2,_0x44bb7b){const _0x4300bb=a28_0x4300();return a28_0x180f=function(_0x180f49,_0x27d852){_0x180f49=_0x180f49-0x114;let _0x103dff=_0x4300bb[_0x180f49];return _0x103dff;},a28_0x180f(_0x18f6d2,_0x44bb7b);}Promise['promisifyAll'](fs);const addTags=async(_0x14ff42,_0x3da4bf)=>{const _0x25fada=a28_0x5aeb28;for(const _0x13d69c in _0x14ff42['Resources']){_0x14ff42[_0x25fada(0x118)][_0x13d69c][_0x25fada(0x122)]&&_0x14ff42[_0x25fada(0x118)][_0x13d69c][_0x25fada(0x122)][_0x25fada(0x120)]&&_0x14ff42[_0x25fada(0x118)][_0x13d69c][_0x25fada(0x122)]['Tags'][_0x25fada(0x125)](..._0x3da4bf);}};exports[a28_0x5aeb28(0x13e)]=async(_0x21126d,_0x3bdfca=null)=>{const _0x462908=a28_0x5aeb28,_0x2b10a0={'lFQoh':'browserstack:cluster','wsxoR':_0x462908(0x12c),'vRUiB':'2010-05-15','aKphl':_0x462908(0x11a),'eqOJf':_0x462908(0x149),'nvtwR':_0x462908(0x11f),'Uwoeg':function(_0x51ef5d,_0x25b32f,_0x4b8859){return _0x51ef5d(_0x25b32f,_0x4b8859);},'jKEeL':_0x462908(0x140),'KlgQG':_0x462908(0x130),'cIKlY':_0x462908(0x14f),'UAeFF':_0x462908(0x116),'WUwhY':_0x462908(0x142),'MOpOU':'CAPABILITY_NAMED_IAM','MUbVy':_0x462908(0x13f),'Maprf':_0x462908(0x12e)},_0x449d41=COMMON_HST_TAGS,_0x21988d={};_0x21988d[_0x462908(0x137)]=_0x2b10a0[_0x462908(0x11d)],_0x21988d[_0x462908(0x115)]=_0x21126d,_0x449d41[_0x462908(0x125)](_0x21988d),_0x449d41['push']({'Key':_0x2b10a0[_0x462908(0x150)],'Value':new Date()[_0x462908(0x13a)]()['toString']()});const _0x2b2109={};_0x2b2109['apiVersion']=_0x2b10a0[_0x462908(0x14c)];const _0x299c62=new AWS[(_0x462908(0x126))](_0x2b2109),_0x3c73f6=await fs[_0x462908(0x138)](path[_0x462908(0x123)](__dirname,'..',_0x2b10a0[_0x462908(0x127)],_0x2b10a0[_0x462908(0x128)]),_0x2b10a0['nvtwR']),_0x5b8a5f={};_0x5b8a5f['schema']=CLOUDFORMATION_SCHEMA;const _0x2b65a8=yaml[_0x462908(0x13d)](_0x3c73f6,_0x5b8a5f);await _0x2b10a0[_0x462908(0x12a)](addTags,_0x2b65a8,_0x449d41);const _0x1683a=JSON['stringify'](_0x2b65a8);let _0x2f6f07=await AWSUtils[_0x462908(0x145)](_0x21126d);_0x2f6f07=_0x2f6f07[_0x462908(0x132)](_0x2b10a0[_0x462908(0x139)])[0x1];const _0x5b3658={};_0x5b3658[_0x462908(0x136)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x21126d+_0x462908(0x11b),_0x5b3658[_0x462908(0x14b)]=_0x2b10a0['KlgQG'],_0x5b3658[_0x462908(0x14a)]=_0x1683a,_0x5b3658[_0x462908(0x129)]=[{'ParameterKey':_0x2b10a0[_0x462908(0x13c)],'ParameterValue':_0x3bdfca},{'ParameterKey':_0x2b10a0[_0x462908(0x13b)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x21126d},{'ParameterKey':_0x2b10a0[_0x462908(0x114)],'ParameterValue':_0x2f6f07}],_0x5b3658[_0x462908(0x12b)]=[_0x2b10a0[_0x462908(0x147)]],_0x5b3658['Tags']=_0x449d41;const _0x4fb850=_0x5b3658,_0x3e7bd3=await _0x299c62[_0x462908(0x119)](_0x4fb850)[_0x462908(0x144)]();logger[_0x462908(0x124)](_0x2b10a0[_0x462908(0x134)]);const _0x225d3f={};return _0x225d3f[_0x462908(0x136)]=_0x3e7bd3[_0x462908(0x11e)],_0x299c62['waitFor'](_0x2b10a0[_0x462908(0x14d)],_0x225d3f)[_0x462908(0x144)]();};