const a28_0x29a49e=a28_0x31db;(function(_0x36f0e9,_0x4c9dc3){const _0x4896a5=a28_0x31db,_0x5485a4=_0x36f0e9();while(!![]){try{const _0x19cd39=parseInt(_0x4896a5(0x194))/0x1+-parseInt(_0x4896a5(0x191))/0x2+parseInt(_0x4896a5(0x1b6))/0x3+parseInt(_0x4896a5(0x19a))/0x4+parseInt(_0x4896a5(0x18a))/0x5*(parseInt(_0x4896a5(0x1a0))/0x6)+-parseInt(_0x4896a5(0x1b3))/0x7+-parseInt(_0x4896a5(0x1ae))/0x8*(parseInt(_0x4896a5(0x19f))/0x9);if(_0x19cd39===_0x4c9dc3)break;else _0x5485a4['push'](_0x5485a4['shift']());}catch(_0x1c1d68){_0x5485a4['push'](_0x5485a4['shift']());}}}(a28_0x9a7b,0x34095));function a28_0x9a7b(){const _0x502702=['promisifyAll','split','js-yaml','browserstack:cluster','27HaEcDb','109182MppbkN','fVdIu','OgBzP','schema','jHDWo','Tags','TXZHw','Resources','CloudFormation','awsObj','promise','getOidcUrl','toString','Capabilities','9112boITeG','StackId','createStack','browserstack:creationDate','Properties','2781611hzpyVZ','utf-8','HUmCJ','974169DsLtKM','gcruD','Value','createHubHaStack','qfsym','AEcSZ','load','CxlQi','bluebird','OHlmi','SIryF','../config/constants','2010-05-15','40RzYhTG','push','ClusterOIDCURL','XkocN','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','jsPbu','info','676780LJsBsi','vdNXG','EmrZz','333421iacNVB','CAPABILITY_NAMED_IAM','VpcId','../config/logger','./AWSUtils','join','594404ItDsjO'];a28_0x9a7b=function(){return _0x502702;};return a28_0x9a7b();}const fs=require('fs'),path=require('path'),Promise=require(a28_0x29a49e(0x1be)),yaml=require(a28_0x29a49e(0x19d)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),AWS=require(a28_0x29a49e(0x198))[a28_0x29a49e(0x1a9)],AWSUtils=require(a28_0x29a49e(0x198)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x29a49e(0x1c1)),{logger}=require(a28_0x29a49e(0x197));Promise[a28_0x29a49e(0x19b)](fs);function a28_0x31db(_0xd8d03c,_0x5261f4){const _0x9a7b5a=a28_0x9a7b();return a28_0x31db=function(_0x31db6e,_0x20aea5){_0x31db6e=_0x31db6e-0x18a;let _0x576c9d=_0x9a7b5a[_0x31db6e];return _0x576c9d;},a28_0x31db(_0xd8d03c,_0x5261f4);}const addTags=async(_0x3e8eff,_0x19f66d)=>{const _0x4275c5=a28_0x29a49e;for(const _0x4abb12 in _0x3e8eff[_0x4275c5(0x1a7)]){_0x3e8eff[_0x4275c5(0x1a7)][_0x4abb12]['Properties']&&_0x3e8eff[_0x4275c5(0x1a7)][_0x4abb12][_0x4275c5(0x1b2)][_0x4275c5(0x1a5)]&&_0x3e8eff[_0x4275c5(0x1a7)][_0x4abb12][_0x4275c5(0x1b2)][_0x4275c5(0x1a5)]['push'](..._0x19f66d);}};exports[a28_0x29a49e(0x1b9)]=async(_0x3b7a11,_0x112b03=null)=>{const _0x3abb1f=a28_0x29a49e,_0x248266={'SIryF':_0x3abb1f(0x19e),'OgBzP':_0x3abb1f(0x1b1),'XkocN':_0x3abb1f(0x1c2),'jsPbu':'CFTemplates','qfsym':'hub-ha.yaml','OHlmi':_0x3abb1f(0x1b4),'TXZHw':function(_0x231bb2,_0x2bc241,_0x4c4c5d){return _0x231bb2(_0x2bc241,_0x4c4c5d);},'jHDWo':'://','CxlQi':'DELETE','HUmCJ':_0x3abb1f(0x196),'EmrZz':'BaseResourceName','vdNXG':_0x3abb1f(0x18c),'gcruD':_0x3abb1f(0x195),'fVdIu':_0x3abb1f(0x18e),'AEcSZ':'stackCreateComplete'},_0x1ec49e=COMMON_HST_TAGS,_0x55a458={};_0x55a458['Key']=_0x248266[_0x3abb1f(0x1c0)],_0x55a458[_0x3abb1f(0x1b8)]=_0x3b7a11,_0x1ec49e['push'](_0x55a458),_0x1ec49e[_0x3abb1f(0x18b)]({'Key':_0x248266[_0x3abb1f(0x1a2)],'Value':new Date()['valueOf']()[_0x3abb1f(0x1ac)]()});const _0x1c637e={};_0x1c637e['apiVersion']=_0x248266[_0x3abb1f(0x18d)];const _0x5011c4=new AWS[(_0x3abb1f(0x1a8))](_0x1c637e),_0x9c5092=await fs['readFileAsync'](path[_0x3abb1f(0x199)](__dirname,'..',_0x248266[_0x3abb1f(0x18f)],_0x248266[_0x3abb1f(0x1ba)]),_0x248266[_0x3abb1f(0x1bf)]),_0x26bc46={};_0x26bc46[_0x3abb1f(0x1a3)]=CLOUDFORMATION_SCHEMA;const _0x1abf98=yaml[_0x3abb1f(0x1bc)](_0x9c5092,_0x26bc46);await _0x248266[_0x3abb1f(0x1a6)](addTags,_0x1abf98,_0x1ec49e);const _0x3a3ae6=JSON['stringify'](_0x1abf98);let _0x2a0b28=await AWSUtils[_0x3abb1f(0x1ab)](_0x3b7a11);_0x2a0b28=_0x2a0b28[_0x3abb1f(0x19c)](_0x248266[_0x3abb1f(0x1a4)])[0x1];const _0xdf93f9={};_0xdf93f9['StackName']=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3b7a11+'-cf',_0xdf93f9['OnFailure']=_0x248266[_0x3abb1f(0x1bd)],_0xdf93f9['TemplateBody']=_0x3a3ae6,_0xdf93f9['Parameters']=[{'ParameterKey':_0x248266[_0x3abb1f(0x1b5)],'ParameterValue':_0x112b03},{'ParameterKey':_0x248266[_0x3abb1f(0x193)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3b7a11},{'ParameterKey':_0x248266[_0x3abb1f(0x192)],'ParameterValue':_0x2a0b28}],_0xdf93f9[_0x3abb1f(0x1ad)]=[_0x248266[_0x3abb1f(0x1b7)]],_0xdf93f9[_0x3abb1f(0x1a5)]=_0x1ec49e;const _0x1cb1af=_0xdf93f9,_0x2222d0=await _0x5011c4[_0x3abb1f(0x1b0)](_0x1cb1af)[_0x3abb1f(0x1aa)]();logger[_0x3abb1f(0x190)](_0x248266[_0x3abb1f(0x1a1)]);const _0x167f80={};return _0x167f80['StackName']=_0x2222d0[_0x3abb1f(0x1af)],_0x5011c4['waitFor'](_0x248266[_0x3abb1f(0x1bb)],_0x167f80)[_0x3abb1f(0x1aa)]();};