function a28_0x5598(){const _0x3598af=['877604oQNPbK','Tags','join','js-yaml-cloudformation-schema','hub-ha.yaml','ClusterOIDCURL','189294mlLfdb','./AWSUtils','16IRsAoL','info','XjVis','toString','Key','35ouXwlY','VpcId','promise','441108ajIjcs','split','LDzEF','stringify','://','LNynf','CAPABILITY_NAMED_IAM','../config/constants','browserstack:cluster','Parameters','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','OiKxX','Properties','Value','918711nWoWPF','PrETU','push','Resources','gZrNP','173411nRyNSP','CFTemplates','GIxgy','stackCreateComplete','kbVHH','FoFrP','getOidcUrl','xAUXx','valueOf','BIUrD','OnFailure','ODYYh','2564540stVrpg','../config/logger','230328EAGVMo','bluebird','path','StackId','browserstack:creationDate','CloudFormation','-cf','AHsUP','FvBDY','readFileAsync','2010-05-15','createHubHaStack','waitFor','DELETE','BaseResourceName','3YXXqFT','StackName','tHpvO'];a28_0x5598=function(){return _0x3598af;};return a28_0x5598();}const a28_0x7a2142=a28_0x2775;(function(_0x2f3dc0,_0x20e22c){const _0xaff1e8=a28_0x2775,_0x4b39e3=_0x2f3dc0();while(!![]){try{const _0x3d1a9f=parseInt(_0xaff1e8(0x1ec))/0x1+-parseInt(_0xaff1e8(0x20e))/0x2*(-parseInt(_0xaff1e8(0x1fb))/0x3)+-parseInt(_0xaff1e8(0x1fe))/0x4+parseInt(_0xaff1e8(0x20b))/0x5*(-parseInt(_0xaff1e8(0x204))/0x6)+parseInt(_0xaff1e8(0x1de))/0x7*(-parseInt(_0xaff1e8(0x206))/0x8)+-parseInt(_0xaff1e8(0x1d9))/0x9+parseInt(_0xaff1e8(0x1ea))/0xa;if(_0x3d1a9f===_0x20e22c)break;else _0x4b39e3['push'](_0x4b39e3['shift']());}catch(_0x425a4d){_0x4b39e3['push'](_0x4b39e3['shift']());}}}(a28_0x5598,0x1c30b));const fs=require('fs'),path=require(a28_0x7a2142(0x1ee)),Promise=require(a28_0x7a2142(0x1ed)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a28_0x7a2142(0x201)),AWS=require('./AWSUtils')['awsObj'],AWSUtils=require(a28_0x7a2142(0x205)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x7a2142(0x1d2)),{logger}=require(a28_0x7a2142(0x1eb));Promise['promisifyAll'](fs);function a28_0x2775(_0x376017,_0x31fe7d){const _0x55985f=a28_0x5598();return a28_0x2775=function(_0x277565,_0x10dca2){_0x277565=_0x277565-0x1d1;let _0x2e0a27=_0x55985f[_0x277565];return _0x2e0a27;},a28_0x2775(_0x376017,_0x31fe7d);}const addTags=async(_0x3d7fb6,_0x3a7492)=>{const _0x1dabdc=a28_0x7a2142;for(const _0x40fd7a in _0x3d7fb6[_0x1dabdc(0x1dc)]){_0x3d7fb6[_0x1dabdc(0x1dc)][_0x40fd7a][_0x1dabdc(0x1d7)]&&_0x3d7fb6[_0x1dabdc(0x1dc)][_0x40fd7a]['Properties'][_0x1dabdc(0x1ff)]&&_0x3d7fb6[_0x1dabdc(0x1dc)][_0x40fd7a][_0x1dabdc(0x1d7)][_0x1dabdc(0x1ff)][_0x1dabdc(0x1db)](..._0x3a7492);}};exports[a28_0x7a2142(0x1f7)]=async(_0x144140,_0x231ea0=null)=>{const _0x4a7572=a28_0x7a2142,_0x5c30f7={'LNynf':_0x4a7572(0x1d3),'GIxgy':_0x4a7572(0x1f0),'gZrNP':_0x4a7572(0x1f6),'xAUXx':_0x4a7572(0x1df),'FvBDY':_0x4a7572(0x202),'FoFrP':'utf-8','AHsUP':function(_0x5e8086,_0x56141c,_0x5007b0){return _0x5e8086(_0x56141c,_0x5007b0);},'OiKxX':_0x4a7572(0x212),'PrETU':_0x4a7572(0x1f9),'LDzEF':_0x4a7572(0x20c),'tHpvO':_0x4a7572(0x1fa),'kbVHH':_0x4a7572(0x203),'XjVis':_0x4a7572(0x1d1),'BIUrD':_0x4a7572(0x1d5),'ODYYh':_0x4a7572(0x1e1)},_0x8b11a6=COMMON_HST_TAGS,_0x5e773a={};_0x5e773a[_0x4a7572(0x20a)]=_0x5c30f7[_0x4a7572(0x213)],_0x5e773a[_0x4a7572(0x1d8)]=_0x144140,_0x8b11a6[_0x4a7572(0x1db)](_0x5e773a),_0x8b11a6[_0x4a7572(0x1db)]({'Key':_0x5c30f7[_0x4a7572(0x1e0)],'Value':new Date()[_0x4a7572(0x1e6)]()[_0x4a7572(0x209)]()});const _0x43064b={};_0x43064b['apiVersion']=_0x5c30f7[_0x4a7572(0x1dd)];const _0x5f2aea=new AWS[(_0x4a7572(0x1f1))](_0x43064b),_0x374cf5=await fs[_0x4a7572(0x1f5)](path[_0x4a7572(0x200)](__dirname,'..',_0x5c30f7[_0x4a7572(0x1e5)],_0x5c30f7[_0x4a7572(0x1f4)]),_0x5c30f7[_0x4a7572(0x1e3)]),_0x1729cd={};_0x1729cd['schema']=CLOUDFORMATION_SCHEMA;const _0x21541b=yaml['load'](_0x374cf5,_0x1729cd);await _0x5c30f7[_0x4a7572(0x1f3)](addTags,_0x21541b,_0x8b11a6);const _0x32bfaa=JSON[_0x4a7572(0x211)](_0x21541b);let _0x350b8e=await AWSUtils[_0x4a7572(0x1e4)](_0x144140);_0x350b8e=_0x350b8e[_0x4a7572(0x20f)](_0x5c30f7[_0x4a7572(0x1d6)])[0x1];const _0x117cbf={};_0x117cbf[_0x4a7572(0x1fc)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x144140+_0x4a7572(0x1f2),_0x117cbf[_0x4a7572(0x1e8)]=_0x5c30f7[_0x4a7572(0x1da)],_0x117cbf['TemplateBody']=_0x32bfaa,_0x117cbf[_0x4a7572(0x1d4)]=[{'ParameterKey':_0x5c30f7[_0x4a7572(0x210)],'ParameterValue':_0x231ea0},{'ParameterKey':_0x5c30f7[_0x4a7572(0x1fd)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x144140},{'ParameterKey':_0x5c30f7[_0x4a7572(0x1e2)],'ParameterValue':_0x350b8e}],_0x117cbf['Capabilities']=[_0x5c30f7[_0x4a7572(0x208)]],_0x117cbf[_0x4a7572(0x1ff)]=_0x8b11a6;const _0x486668=_0x117cbf,_0x3e3413=await _0x5f2aea['createStack'](_0x486668)[_0x4a7572(0x20d)]();logger[_0x4a7572(0x207)](_0x5c30f7[_0x4a7572(0x1e7)]);const _0x30f518={};return _0x30f518[_0x4a7572(0x1fc)]=_0x3e3413[_0x4a7572(0x1ef)],_0x5f2aea[_0x4a7572(0x1f8)](_0x5c30f7[_0x4a7572(0x1e9)],_0x30f518)[_0x4a7572(0x20d)]();};