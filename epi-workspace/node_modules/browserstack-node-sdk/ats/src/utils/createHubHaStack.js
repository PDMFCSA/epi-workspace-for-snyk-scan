const a28_0x1c5554=a28_0x31a1;(function(_0x14a1b7,_0x3d3a15){const _0x41ed9f=a28_0x31a1,_0x3481ae=_0x14a1b7();while(!![]){try{const _0x2722b3=-parseInt(_0x41ed9f(0x18a))/0x1+-parseInt(_0x41ed9f(0x19e))/0x2+parseInt(_0x41ed9f(0x196))/0x3*(parseInt(_0x41ed9f(0x183))/0x4)+parseInt(_0x41ed9f(0x191))/0x5*(-parseInt(_0x41ed9f(0x199))/0x6)+parseInt(_0x41ed9f(0x1b8))/0x7*(parseInt(_0x41ed9f(0x187))/0x8)+parseInt(_0x41ed9f(0x1b4))/0x9+parseInt(_0x41ed9f(0x1b0))/0xa;if(_0x2722b3===_0x3d3a15)break;else _0x3481ae['push'](_0x3481ae['shift']());}catch(_0x1626a5){_0x3481ae['push'](_0x3481ae['shift']());}}}(a28_0x4388,0xda6f2));const fs=require('fs'),path=require(a28_0x1c5554(0x180)),Promise=require(a28_0x1c5554(0x1b1)),yaml=require(a28_0x1c5554(0x1a7)),{CLOUDFORMATION_SCHEMA}=require(a28_0x1c5554(0x193)),AWS=require('./AWSUtils')['awsObj'],AWSUtils=require('./AWSUtils'),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x1c5554(0x189)),{logger}=require('../config/logger');Promise['promisifyAll'](fs);function a28_0x4388(){const _0x3c3539=['bluebird','wwZLq','CFTemplates','3178854tvklAU','LEpIB','IsLMr','OnFailure','2814vbIuZr','JTyRE','ZeIVj','Gezgc','Bwryl','://','path','StackName','Properties','2725756dHFbAq','Tags','DELETE','BaseResourceName','26024wfEzdN','NHFek','../config/constants','1240640CBDkYh','Value','createStack','Key','browserstack:creationDate','stackCreateComplete','CiecW','127340gUjTUN','waitFor','js-yaml-cloudformation-schema','valueOf','utf-8','3oOZQiE','readFileAsync','TuTJJ','156wLEUQr','Capabilities','dVcgS','apiVersion','Resources','1999988AKkEpv','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','jMdzg','info','push','createHubHaStack','promise','ClusterOIDCURL','LFDKd','js-yaml','VpcId','schema','browserstack:cluster','toString','StackId','join','getOidcUrl','-cf','14551570NBMwWy'];a28_0x4388=function(){return _0x3c3539;};return a28_0x4388();}const addTags=async(_0x54be25,_0x38dcef)=>{const _0x580a24=a28_0x1c5554;for(const _0x3b568e in _0x54be25[_0x580a24(0x19d)]){_0x54be25[_0x580a24(0x19d)][_0x3b568e][_0x580a24(0x182)]&&_0x54be25[_0x580a24(0x19d)][_0x3b568e]['Properties'][_0x580a24(0x184)]&&_0x54be25[_0x580a24(0x19d)][_0x3b568e]['Properties'][_0x580a24(0x184)][_0x580a24(0x1a2)](..._0x38dcef);}};function a28_0x31a1(_0x53085a,_0xf730bb){const _0x43883e=a28_0x4388();return a28_0x31a1=function(_0x31a177,_0x748745){_0x31a177=_0x31a177-0x180;let _0x2406d2=_0x43883e[_0x31a177];return _0x2406d2;},a28_0x31a1(_0x53085a,_0xf730bb);}exports[a28_0x1c5554(0x1a3)]=async(_0x3b26f5,_0x1c8270=null)=>{const _0x33c299=a28_0x1c5554,_0x2afada={'qMdGF':_0x33c299(0x1aa),'CiecW':_0x33c299(0x18e),'TuTJJ':'2010-05-15','LEpIB':_0x33c299(0x1b3),'Gezgc':'hub-ha.yaml','NHFek':_0x33c299(0x195),'JTyRE':function(_0x29b356,_0xce0eda,_0x4dd047){return _0x29b356(_0xce0eda,_0x4dd047);},'Bwryl':_0x33c299(0x1bd),'LFDKd':_0x33c299(0x185),'ZeIVj':_0x33c299(0x1a8),'dVcgS':_0x33c299(0x186),'loFjZ':_0x33c299(0x1a5),'jMdzg':'CAPABILITY_NAMED_IAM','IsLMr':_0x33c299(0x19f),'wwZLq':_0x33c299(0x18f)},_0x3952b6=COMMON_HST_TAGS,_0x5cc398={};_0x5cc398[_0x33c299(0x18d)]=_0x2afada['qMdGF'],_0x5cc398[_0x33c299(0x18b)]=_0x3b26f5,_0x3952b6[_0x33c299(0x1a2)](_0x5cc398),_0x3952b6[_0x33c299(0x1a2)]({'Key':_0x2afada[_0x33c299(0x190)],'Value':new Date()[_0x33c299(0x194)]()[_0x33c299(0x1ab)]()});const _0x469066={};_0x469066[_0x33c299(0x19c)]=_0x2afada[_0x33c299(0x198)];const _0x1ed10b=new AWS['CloudFormation'](_0x469066),_0x4b711d=await fs[_0x33c299(0x197)](path[_0x33c299(0x1ad)](__dirname,'..',_0x2afada[_0x33c299(0x1b5)],_0x2afada[_0x33c299(0x1bb)]),_0x2afada[_0x33c299(0x188)]),_0x57ee7f={};_0x57ee7f[_0x33c299(0x1a9)]=CLOUDFORMATION_SCHEMA;const _0x4f4e15=yaml['load'](_0x4b711d,_0x57ee7f);await _0x2afada[_0x33c299(0x1b9)](addTags,_0x4f4e15,_0x3952b6);const _0x3aecff=JSON['stringify'](_0x4f4e15);let _0x4e801c=await AWSUtils[_0x33c299(0x1ae)](_0x3b26f5);_0x4e801c=_0x4e801c['split'](_0x2afada[_0x33c299(0x1bc)])[0x1];const _0x970834={};_0x970834[_0x33c299(0x181)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3b26f5+_0x33c299(0x1af),_0x970834[_0x33c299(0x1b7)]=_0x2afada[_0x33c299(0x1a6)],_0x970834['TemplateBody']=_0x3aecff,_0x970834['Parameters']=[{'ParameterKey':_0x2afada[_0x33c299(0x1ba)],'ParameterValue':_0x1c8270},{'ParameterKey':_0x2afada[_0x33c299(0x19b)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3b26f5},{'ParameterKey':_0x2afada['loFjZ'],'ParameterValue':_0x4e801c}],_0x970834[_0x33c299(0x19a)]=[_0x2afada[_0x33c299(0x1a0)]],_0x970834[_0x33c299(0x184)]=_0x3952b6;const _0x3471ee=_0x970834,_0x4a4cdc=await _0x1ed10b[_0x33c299(0x18c)](_0x3471ee)[_0x33c299(0x1a4)]();logger[_0x33c299(0x1a1)](_0x2afada[_0x33c299(0x1b6)]);const _0x59bfa9={};return _0x59bfa9[_0x33c299(0x181)]=_0x4a4cdc[_0x33c299(0x1ac)],_0x1ed10b[_0x33c299(0x192)](_0x2afada[_0x33c299(0x1b2)],_0x59bfa9)[_0x33c299(0x1a4)]();};