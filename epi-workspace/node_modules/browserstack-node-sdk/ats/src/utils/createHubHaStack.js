const a28_0x41697e=a28_0x3f5c;(function(_0x2b8c06,_0xcb93a3){const _0x4568ed=a28_0x3f5c,_0x53952c=_0x2b8c06();while(!![]){try{const _0x59015d=parseInt(_0x4568ed(0xd6))/0x1*(-parseInt(_0x4568ed(0xb4))/0x2)+parseInt(_0x4568ed(0xd0))/0x3+-parseInt(_0x4568ed(0xc1))/0x4+-parseInt(_0x4568ed(0xbe))/0x5+-parseInt(_0x4568ed(0xcb))/0x6+parseInt(_0x4568ed(0xae))/0x7+parseInt(_0x4568ed(0xc0))/0x8;if(_0x59015d===_0xcb93a3)break;else _0x53952c['push'](_0x53952c['shift']());}catch(_0x3e28ae){_0x53952c['push'](_0x53952c['shift']());}}}(a28_0x583f,0xc9419));const fs=require('fs'),path=require(a28_0x41697e(0xe6)),Promise=require(a28_0x41697e(0xe3)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a28_0x41697e(0xb3)),AWS=require(a28_0x41697e(0xd3))[a28_0x41697e(0xad)],AWSUtils=require(a28_0x41697e(0xd3)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x41697e(0xd2)),{logger}=require(a28_0x41697e(0xc6));Promise[a28_0x41697e(0xb6)](fs);const addTags=async(_0x226410,_0x3e6230)=>{const _0x4493ac=a28_0x41697e;for(const _0x23db0f in _0x226410[_0x4493ac(0xdc)]){_0x226410[_0x4493ac(0xdc)][_0x23db0f][_0x4493ac(0xe4)]&&_0x226410['Resources'][_0x23db0f][_0x4493ac(0xe4)]['Tags']&&_0x226410[_0x4493ac(0xdc)][_0x23db0f][_0x4493ac(0xe4)][_0x4493ac(0xbc)][_0x4493ac(0xb5)](..._0x3e6230);}};function a28_0x3f5c(_0x4ab413,_0x46fd63){const _0x583f61=a28_0x583f();return a28_0x3f5c=function(_0x3f5ce7,_0xa99999){_0x3f5ce7=_0x3f5ce7-0xab;let _0x28acd3=_0x583f61[_0x3f5ce7];return _0x28acd3;},a28_0x3f5c(_0x4ab413,_0x46fd63);}function a28_0x583f(){const _0x3094e7=['promise','Tags','-cf','6450740iZhfyn','cbIvk','20491792wIzXhu','2479576oaXqFH','hub-ha.yaml','load','utf-8','Parameters','../config/logger','AeigR','createHubHaStack','argLR','getOidcUrl','4685016TMdkMF','Value','TemplateBody','CAPABILITY_NAMED_IAM','OnFailure','4876197nLCeoc','CFTemplates','../config/constants','./AWSUtils','Capabilities','CloudFormation','89uSRzAX','join','BaseResourceName','HSRJe','DELETE','StackId','Resources','info','2010-05-15','readFileAsync','browserstack:creationDate','xPDMB','toString','bluebird','Properties','MTkKx','path','hjadm','VpcId','ClusterOIDCURL','cOgDX','tBthb','awsObj','821968wzqABr','iKiCJ','oZcix','apiVersion','split','js-yaml-cloudformation-schema','17732IASItD','push','promisifyAll','://','waitFor','stackCreateComplete','StackName'];a28_0x583f=function(){return _0x3094e7;};return a28_0x583f();}exports[a28_0x41697e(0xc8)]=async(_0x4e79bd,_0x536b50=null)=>{const _0x3df7a1=a28_0x41697e,_0x193688={'oxraO':'browserstack:cluster','GsMPa':_0x3df7a1(0xe0),'cOgDX':_0x3df7a1(0xde),'xPDMB':_0x3df7a1(0xd1),'oZcix':_0x3df7a1(0xc2),'hjadm':_0x3df7a1(0xc4),'tBthb':function(_0x588ea7,_0x4eef22,_0x241597){return _0x588ea7(_0x4eef22,_0x241597);},'UJsOX':_0x3df7a1(0xb7),'kmfmz':_0x3df7a1(0xda),'HSRJe':_0x3df7a1(0xe8),'cbIvk':_0x3df7a1(0xd8),'argLR':_0x3df7a1(0xe9),'iKiCJ':_0x3df7a1(0xce),'MTkKx':'Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','AeigR':_0x3df7a1(0xb9)},_0x260485=COMMON_HST_TAGS,_0x5eb830={};_0x5eb830['Key']=_0x193688['oxraO'],_0x5eb830[_0x3df7a1(0xcc)]=_0x4e79bd,_0x260485[_0x3df7a1(0xb5)](_0x5eb830),_0x260485['push']({'Key':_0x193688['GsMPa'],'Value':new Date()['valueOf']()[_0x3df7a1(0xe2)]()});const _0x36bc66={};_0x36bc66[_0x3df7a1(0xb1)]=_0x193688[_0x3df7a1(0xab)];const _0x14ccd2=new AWS[(_0x3df7a1(0xd5))](_0x36bc66),_0x4440e0=await fs[_0x3df7a1(0xdf)](path[_0x3df7a1(0xd7)](__dirname,'..',_0x193688[_0x3df7a1(0xe1)],_0x193688[_0x3df7a1(0xb0)]),_0x193688[_0x3df7a1(0xe7)]),_0x300ea4={};_0x300ea4['schema']=CLOUDFORMATION_SCHEMA;const _0x9a001=yaml[_0x3df7a1(0xc3)](_0x4440e0,_0x300ea4);await _0x193688[_0x3df7a1(0xac)](addTags,_0x9a001,_0x260485);const _0x46863e=JSON['stringify'](_0x9a001);let _0x3793cb=await AWSUtils[_0x3df7a1(0xca)](_0x4e79bd);_0x3793cb=_0x3793cb[_0x3df7a1(0xb2)](_0x193688['UJsOX'])[0x1];const _0x3952d4={};_0x3952d4[_0x3df7a1(0xba)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x4e79bd+_0x3df7a1(0xbd),_0x3952d4[_0x3df7a1(0xcf)]=_0x193688['kmfmz'],_0x3952d4[_0x3df7a1(0xcd)]=_0x46863e,_0x3952d4[_0x3df7a1(0xc5)]=[{'ParameterKey':_0x193688[_0x3df7a1(0xd9)],'ParameterValue':_0x536b50},{'ParameterKey':_0x193688[_0x3df7a1(0xbf)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x4e79bd},{'ParameterKey':_0x193688[_0x3df7a1(0xc9)],'ParameterValue':_0x3793cb}],_0x3952d4[_0x3df7a1(0xd4)]=[_0x193688[_0x3df7a1(0xaf)]],_0x3952d4['Tags']=_0x260485;const _0x52075f=_0x3952d4,_0x3f0536=await _0x14ccd2['createStack'](_0x52075f)[_0x3df7a1(0xbb)]();logger[_0x3df7a1(0xdd)](_0x193688[_0x3df7a1(0xe5)]);const _0x5366e0={};return _0x5366e0['StackName']=_0x3f0536[_0x3df7a1(0xdb)],_0x14ccd2[_0x3df7a1(0xb8)](_0x193688[_0x3df7a1(0xc7)],_0x5366e0)[_0x3df7a1(0xbb)]();};