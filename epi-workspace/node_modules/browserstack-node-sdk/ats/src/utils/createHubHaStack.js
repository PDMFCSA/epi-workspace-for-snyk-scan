function a28_0x3934(_0x29e065,_0x6ed46a){const _0x5628ac=a28_0x5628();return a28_0x3934=function(_0x3934a3,_0x3fc767){_0x3934a3=_0x3934a3-0x144;let _0x5dedfd=_0x5628ac[_0x3934a3];return _0x5dedfd;},a28_0x3934(_0x29e065,_0x6ed46a);}const a28_0x14aace=a28_0x3934;(function(_0x379b64,_0x4f54e1){const _0x5e3fda=a28_0x3934,_0x4fb1ff=_0x379b64();while(!![]){try{const _0x1f7e15=-parseInt(_0x5e3fda(0x148))/0x1+-parseInt(_0x5e3fda(0x14c))/0x2*(parseInt(_0x5e3fda(0x167))/0x3)+parseInt(_0x5e3fda(0x16d))/0x4*(parseInt(_0x5e3fda(0x175))/0x5)+parseInt(_0x5e3fda(0x178))/0x6*(-parseInt(_0x5e3fda(0x164))/0x7)+-parseInt(_0x5e3fda(0x16f))/0x8*(parseInt(_0x5e3fda(0x15c))/0x9)+parseInt(_0x5e3fda(0x158))/0xa*(parseInt(_0x5e3fda(0x15a))/0xb)+-parseInt(_0x5e3fda(0x156))/0xc*(-parseInt(_0x5e3fda(0x151))/0xd);if(_0x1f7e15===_0x4f54e1)break;else _0x4fb1ff['push'](_0x4fb1ff['shift']());}catch(_0xf838c3){_0x4fb1ff['push'](_0x4fb1ff['shift']());}}}(a28_0x5628,0x2f3c8));const fs=require('fs'),path=require(a28_0x14aace(0x16b)),Promise=require(a28_0x14aace(0x14f)),yaml=require(a28_0x14aace(0x160)),{CLOUDFORMATION_SCHEMA}=require(a28_0x14aace(0x17a)),AWS=require(a28_0x14aace(0x14a))['awsObj'],AWSUtils=require('./AWSUtils'),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x14aace(0x14e)),{logger}=require(a28_0x14aace(0x185));Promise[a28_0x14aace(0x169)](fs);function a28_0x5628(){const _0x583372=['Properties','91nhimdX','gbylB','OSpxA','load','CAPABILITY_NAMED_IAM','1176396sgHWJm','Tags','30vYWFFN','createStack','584507TfGAGC','join','9UKgyjI','Capabilities','toString','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','js-yaml','UgOxZ','StackId','hub-ha.yaml','1560363dFhLLX','Value','WnChX','9ObuylL','Key','promisifyAll','-cf','path','wICia','4SUcJPX','promise','2610584GYOjJO','QXQLI','StackName','stringify','BmTXy','browserstack:creationDate','1171580XFbCLy','Resources','XgeYS','6WxktKj','browserstack:cluster','js-yaml-cloudformation-schema','ClusterOIDCURL','push','cAGLu','DELETE','utf-8','OnFailure','createHubHaStack','MfRmY','VpcId','apiVersion','../config/logger','yuRuF','getOidcUrl','CFTemplates','stackCreateComplete','55789Soytes','readFileAsync','./AWSUtils','Wvarz','187638OZPJNM','valueOf','../config/constants','bluebird'];a28_0x5628=function(){return _0x583372;};return a28_0x5628();}const addTags=async(_0x36ca36,_0x2a6552)=>{const _0x311a58=a28_0x14aace;for(const _0xef1309 in _0x36ca36['Resources']){_0x36ca36[_0x311a58(0x176)][_0xef1309]['Properties']&&_0x36ca36[_0x311a58(0x176)][_0xef1309][_0x311a58(0x150)][_0x311a58(0x157)]&&_0x36ca36[_0x311a58(0x176)][_0xef1309]['Properties']['Tags'][_0x311a58(0x17c)](..._0x2a6552);}};exports[a28_0x14aace(0x181)]=async(_0x6c40e2,_0x3f70df=null)=>{const _0x98b2c2=a28_0x14aace,_0x2ab352={'OSpxA':_0x98b2c2(0x179),'Wvarz':_0x98b2c2(0x174),'gbylB':'2010-05-15','XgeYS':_0x98b2c2(0x146),'DRncd':_0x98b2c2(0x163),'RPyuq':_0x98b2c2(0x17f),'QXQLI':function(_0x3d561f,_0x4dadc9,_0x206e44){return _0x3d561f(_0x4dadc9,_0x206e44);},'BmTXy':'://','MfRmY':_0x98b2c2(0x17e),'yuRuF':_0x98b2c2(0x183),'UgOxZ':'BaseResourceName','wICia':_0x98b2c2(0x17b),'KCOLa':_0x98b2c2(0x155),'cAGLu':_0x98b2c2(0x15f),'WnChX':_0x98b2c2(0x147)},_0x253d96=COMMON_HST_TAGS,_0x162cdf={};_0x162cdf[_0x98b2c2(0x168)]=_0x2ab352[_0x98b2c2(0x153)],_0x162cdf[_0x98b2c2(0x165)]=_0x6c40e2,_0x253d96[_0x98b2c2(0x17c)](_0x162cdf),_0x253d96[_0x98b2c2(0x17c)]({'Key':_0x2ab352[_0x98b2c2(0x14b)],'Value':new Date()[_0x98b2c2(0x14d)]()[_0x98b2c2(0x15e)]()});const _0x4c8e4c={};_0x4c8e4c[_0x98b2c2(0x184)]=_0x2ab352[_0x98b2c2(0x152)];const _0x4e752e=new AWS['CloudFormation'](_0x4c8e4c),_0x43345e=await fs[_0x98b2c2(0x149)](path[_0x98b2c2(0x15b)](__dirname,'..',_0x2ab352[_0x98b2c2(0x177)],_0x2ab352['DRncd']),_0x2ab352['RPyuq']),_0x104933={};_0x104933['schema']=CLOUDFORMATION_SCHEMA;const _0x26629e=yaml[_0x98b2c2(0x154)](_0x43345e,_0x104933);await _0x2ab352[_0x98b2c2(0x170)](addTags,_0x26629e,_0x253d96);const _0x190442=JSON[_0x98b2c2(0x172)](_0x26629e);let _0x16d3ef=await AWSUtils[_0x98b2c2(0x145)](_0x6c40e2);_0x16d3ef=_0x16d3ef['split'](_0x2ab352[_0x98b2c2(0x173)])[0x1];const _0x1c4bfe={};_0x1c4bfe[_0x98b2c2(0x171)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x6c40e2+_0x98b2c2(0x16a),_0x1c4bfe[_0x98b2c2(0x180)]=_0x2ab352[_0x98b2c2(0x182)],_0x1c4bfe['TemplateBody']=_0x190442,_0x1c4bfe['Parameters']=[{'ParameterKey':_0x2ab352[_0x98b2c2(0x144)],'ParameterValue':_0x3f70df},{'ParameterKey':_0x2ab352[_0x98b2c2(0x161)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x6c40e2},{'ParameterKey':_0x2ab352[_0x98b2c2(0x16c)],'ParameterValue':_0x16d3ef}],_0x1c4bfe[_0x98b2c2(0x15d)]=[_0x2ab352['KCOLa']],_0x1c4bfe[_0x98b2c2(0x157)]=_0x253d96;const _0x7cc884=_0x1c4bfe,_0x3da940=await _0x4e752e[_0x98b2c2(0x159)](_0x7cc884)[_0x98b2c2(0x16e)]();logger['info'](_0x2ab352[_0x98b2c2(0x17d)]);const _0x589ff2={};return _0x589ff2[_0x98b2c2(0x171)]=_0x3da940[_0x98b2c2(0x162)],_0x4e752e['waitFor'](_0x2ab352[_0x98b2c2(0x166)],_0x589ff2)[_0x98b2c2(0x16e)]();};