const a28_0x28d3f1=a28_0x5e17;function a28_0x5e17(_0x5c8058,_0x47408b){const _0x9e91b7=a28_0x9e91();return a28_0x5e17=function(_0x5e17b6,_0x14abb0){_0x5e17b6=_0x5e17b6-0x106;let _0x54d551=_0x9e91b7[_0x5e17b6];return _0x54d551;},a28_0x5e17(_0x5c8058,_0x47408b);}(function(_0x5b3b91,_0x44a3f1){const _0x17aed1=a28_0x5e17,_0x437be4=_0x5b3b91();while(!![]){try{const _0x21f085=-parseInt(_0x17aed1(0x120))/0x1*(parseInt(_0x17aed1(0x143))/0x2)+parseInt(_0x17aed1(0x124))/0x3*(-parseInt(_0x17aed1(0x132))/0x4)+parseInt(_0x17aed1(0x140))/0x5*(parseInt(_0x17aed1(0x12c))/0x6)+-parseInt(_0x17aed1(0x119))/0x7+parseInt(_0x17aed1(0x110))/0x8+-parseInt(_0x17aed1(0x12f))/0x9+parseInt(_0x17aed1(0x111))/0xa;if(_0x21f085===_0x44a3f1)break;else _0x437be4['push'](_0x437be4['shift']());}catch(_0x4fc2c3){_0x437be4['push'](_0x437be4['shift']());}}}(a28_0x9e91,0xc7e4a));const fs=require('fs'),path=require(a28_0x28d3f1(0x142)),Promise=require(a28_0x28d3f1(0x14a)),yaml=require(a28_0x28d3f1(0x13f)),{CLOUDFORMATION_SCHEMA}=require(a28_0x28d3f1(0x134)),AWS=require('./AWSUtils')[a28_0x28d3f1(0x123)],AWSUtils=require(a28_0x28d3f1(0x11d)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x28d3f1(0x13c)),{logger}=require(a28_0x28d3f1(0x10b));Promise[a28_0x28d3f1(0x10c)](fs);const addTags=async(_0x5aac79,_0x35e4fe)=>{const _0x551a1d=a28_0x28d3f1;for(const _0x36238c in _0x5aac79[_0x551a1d(0x13e)]){_0x5aac79['Resources'][_0x36238c][_0x551a1d(0x10d)]&&_0x5aac79[_0x551a1d(0x13e)][_0x36238c][_0x551a1d(0x10d)]['Tags']&&_0x5aac79['Resources'][_0x36238c][_0x551a1d(0x10d)][_0x551a1d(0x108)]['push'](..._0x35e4fe);}};exports[a28_0x28d3f1(0x12e)]=async(_0x1bc01d,_0x37d671=null)=>{const _0x149d55=a28_0x28d3f1,_0x486eba={'OmmJG':_0x149d55(0x11a),'ftuAe':_0x149d55(0x121),'zpyUB':'2010-05-15','eSJmY':_0x149d55(0x14b),'LXqFS':_0x149d55(0x146),'sgrfk':_0x149d55(0x136),'bKlSc':function(_0x2fe6a0,_0xad330b,_0x376f44){return _0x2fe6a0(_0xad330b,_0x376f44);},'YnGjb':'://','rbsZD':_0x149d55(0x128),'hMxfy':_0x149d55(0x107),'NNbpj':_0x149d55(0x131),'dZNes':_0x149d55(0x118),'vSCGE':_0x149d55(0x12d),'zvHjZ':_0x149d55(0x112),'NbQaj':_0x149d55(0x126)},_0xe12cdc=COMMON_HST_TAGS,_0x433230={};_0x433230[_0x149d55(0x137)]=_0x486eba[_0x149d55(0x149)],_0x433230[_0x149d55(0x145)]=_0x1bc01d,_0xe12cdc['push'](_0x433230),_0xe12cdc[_0x149d55(0x11e)]({'Key':_0x486eba[_0x149d55(0x135)],'Value':new Date()[_0x149d55(0x14c)]()[_0x149d55(0x13a)]()});const _0x25a0d3={};_0x25a0d3[_0x149d55(0x109)]=_0x486eba[_0x149d55(0x12b)];const _0x27ae76=new AWS[(_0x149d55(0x122))](_0x25a0d3),_0x128bd7=await fs[_0x149d55(0x141)](path[_0x149d55(0x10e)](__dirname,'..',_0x486eba[_0x149d55(0x11f)],_0x486eba[_0x149d55(0x138)]),_0x486eba[_0x149d55(0x139)]),_0x10d1b2={};_0x10d1b2[_0x149d55(0x10a)]=CLOUDFORMATION_SCHEMA;const _0x5813ee=yaml[_0x149d55(0x13d)](_0x128bd7,_0x10d1b2);await _0x486eba['bKlSc'](addTags,_0x5813ee,_0xe12cdc);const _0x1fc7d7=JSON[_0x149d55(0x133)](_0x5813ee);let _0x2b15df=await AWSUtils[_0x149d55(0x114)](_0x1bc01d);_0x2b15df=_0x2b15df[_0x149d55(0x10f)](_0x486eba[_0x149d55(0x127)])[0x1];const _0x20e626={};_0x20e626[_0x149d55(0x147)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x1bc01d+'-cf',_0x20e626[_0x149d55(0x106)]=_0x486eba[_0x149d55(0x130)],_0x20e626[_0x149d55(0x144)]=_0x1fc7d7,_0x20e626[_0x149d55(0x117)]=[{'ParameterKey':_0x486eba[_0x149d55(0x116)],'ParameterValue':_0x37d671},{'ParameterKey':_0x486eba[_0x149d55(0x11b)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x1bc01d},{'ParameterKey':_0x486eba[_0x149d55(0x129)],'ParameterValue':_0x2b15df}],_0x20e626[_0x149d55(0x12a)]=[_0x486eba['vSCGE']],_0x20e626[_0x149d55(0x108)]=_0xe12cdc;const _0x10d761=_0x20e626,_0x2a32f5=await _0x27ae76[_0x149d55(0x11c)](_0x10d761)[_0x149d55(0x113)]();logger[_0x149d55(0x125)](_0x486eba['zvHjZ']);const _0x2cdc8e={};return _0x2cdc8e[_0x149d55(0x147)]=_0x2a32f5[_0x149d55(0x115)],_0x27ae76[_0x149d55(0x13b)](_0x486eba[_0x149d55(0x148)],_0x2cdc8e)[_0x149d55(0x113)]();};function a28_0x9e91(){const _0xce8c72=['CFTemplates','valueOf','OnFailure','VpcId','Tags','apiVersion','schema','../config/logger','promisifyAll','Properties','join','split','6461368nDGXJv','19191540cSCveb','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','promise','getOidcUrl','StackId','hMxfy','Parameters','ClusterOIDCURL','2462782Vxdqjt','browserstack:cluster','NNbpj','createStack','./AWSUtils','push','eSJmY','731CkAfdT','browserstack:creationDate','CloudFormation','awsObj','901749VoeCbb','info','stackCreateComplete','YnGjb','DELETE','dZNes','Capabilities','zpyUB','6636912ArAtaw','CAPABILITY_NAMED_IAM','createHubHaStack','10604853iHLMjV','rbsZD','BaseResourceName','4KKkTdu','stringify','js-yaml-cloudformation-schema','ftuAe','utf-8','Key','LXqFS','sgrfk','toString','waitFor','../config/constants','load','Resources','js-yaml','5akQqkK','readFileAsync','path','3238wWXxOl','TemplateBody','Value','hub-ha.yaml','StackName','NbQaj','OmmJG','bluebird'];a28_0x9e91=function(){return _0xce8c72;};return a28_0x9e91();}