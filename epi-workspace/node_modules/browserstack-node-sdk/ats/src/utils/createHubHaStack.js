const a28_0x444879=a28_0x3ea5;(function(_0x5ac27a,_0x50510c){const _0x511560=a28_0x3ea5,_0x472719=_0x5ac27a();while(!![]){try{const _0x8ad847=parseInt(_0x511560(0xe0))/0x1*(-parseInt(_0x511560(0x10b))/0x2)+-parseInt(_0x511560(0xdc))/0x3*(parseInt(_0x511560(0xd9))/0x4)+-parseInt(_0x511560(0xee))/0x5*(-parseInt(_0x511560(0xd2))/0x6)+parseInt(_0x511560(0xd5))/0x7*(-parseInt(_0x511560(0xd1))/0x8)+-parseInt(_0x511560(0x109))/0x9*(-parseInt(_0x511560(0xd0))/0xa)+-parseInt(_0x511560(0xe8))/0xb+parseInt(_0x511560(0xef))/0xc;if(_0x8ad847===_0x50510c)break;else _0x472719['push'](_0x472719['shift']());}catch(_0x3c6a4a){_0x472719['push'](_0x472719['shift']());}}}(a28_0x284e,0x65abd));const fs=require('fs'),path=require('path'),Promise=require(a28_0x444879(0x105)),yaml=require(a28_0x444879(0xdd)),{CLOUDFORMATION_SCHEMA}=require(a28_0x444879(0xeb)),AWS=require(a28_0x444879(0xfa))['awsObj'],AWSUtils=require(a28_0x444879(0xfa)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x444879(0xd6)),{logger}=require('../config/logger');function a28_0x3ea5(_0x1daa40,_0x1c9455){const _0x284eca=a28_0x284e();return a28_0x3ea5=function(_0x3ea582,_0x5b65e1){_0x3ea582=_0x3ea582-0xd0;let _0x5c71dd=_0x284eca[_0x3ea582];return _0x5c71dd;},a28_0x3ea5(_0x1daa40,_0x1c9455);}function a28_0x284e(){const _0x2b5e48=['RJOfk','./AWSUtils','CloudFormation','hub-ha.yaml','hkPaO','Properties','JJzUg','waitFor','Capabilities','DELETE','Resources','StackName','bluebird','IxroS','getOidcUrl','CAPABILITY_NAMED_IAM','3375kyRJlV','promise','2018PukPfp','browserstack:cluster','8510SaNSKk','2549832nqCiRn','8244nUHdsF','Ywxtj','LXPxU','14bTATCC','../config/constants','gWAGZ','load','602236MkQnOm','stringify','-cf','6JPSyEM','js-yaml','createHubHaStack','stackCreateComplete','655BQlKTw','UaUKV','asZzt','valueOf','vVWxB','split','createStack','BaseResourceName','1670691arHRwQ','ClusterOIDCURL','Tags','js-yaml-cloudformation-schema','TemplateBody','readFileAsync','1405PfFBzD','17550936OEPxld','qGgTH','push','://','promisifyAll','browserstack:creationDate','TMaWy','Parameters','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','CFTemplates'];a28_0x284e=function(){return _0x2b5e48;};return a28_0x284e();}Promise[a28_0x444879(0xf3)](fs);const addTags=async(_0x51cde4,_0x49df65)=>{const _0xf33021=a28_0x444879;for(const _0x3b1c67 in _0x51cde4[_0xf33021(0x103)]){_0x51cde4[_0xf33021(0x103)][_0x3b1c67][_0xf33021(0xfe)]&&_0x51cde4['Resources'][_0x3b1c67][_0xf33021(0xfe)][_0xf33021(0xea)]&&_0x51cde4[_0xf33021(0x103)][_0x3b1c67][_0xf33021(0xfe)]['Tags'][_0xf33021(0xf1)](..._0x49df65);}};exports[a28_0x444879(0xde)]=async(_0x1b2cd7,_0x45ede8=null)=>{const _0x1e0210=a28_0x444879,_0x38d0b3={'hkPaO':_0x1e0210(0x10c),'JJzUg':_0x1e0210(0xf4),'asZzt':'2010-05-15','vVWxB':_0x1e0210(0xf8),'gWAGZ':_0x1e0210(0xfc),'IxroS':'utf-8','UaUKV':function(_0x26d04e,_0x5afde6,_0x6f8f58){return _0x26d04e(_0x5afde6,_0x6f8f58);},'TMaWy':_0x1e0210(0xf2),'LXPxU':_0x1e0210(0x102),'ycBgw':'VpcId','qGgTH':_0x1e0210(0xe7),'Ywxtj':_0x1e0210(0xe9),'lBFlC':_0x1e0210(0x108),'tOYeM':_0x1e0210(0xf7),'RJOfk':_0x1e0210(0xdf)},_0x4283ae=COMMON_HST_TAGS,_0x5ccd13={};_0x5ccd13['Key']=_0x38d0b3[_0x1e0210(0xfd)],_0x5ccd13['Value']=_0x1b2cd7,_0x4283ae[_0x1e0210(0xf1)](_0x5ccd13),_0x4283ae[_0x1e0210(0xf1)]({'Key':_0x38d0b3[_0x1e0210(0xff)],'Value':new Date()[_0x1e0210(0xe3)]()['toString']()});const _0x31a852={};_0x31a852['apiVersion']=_0x38d0b3[_0x1e0210(0xe2)];const _0x583f84=new AWS[(_0x1e0210(0xfb))](_0x31a852),_0x1f4313=await fs[_0x1e0210(0xed)](path['join'](__dirname,'..',_0x38d0b3[_0x1e0210(0xe4)],_0x38d0b3[_0x1e0210(0xd7)]),_0x38d0b3[_0x1e0210(0x106)]),_0x225ed9={};_0x225ed9['schema']=CLOUDFORMATION_SCHEMA;const _0x8266e5=yaml[_0x1e0210(0xd8)](_0x1f4313,_0x225ed9);await _0x38d0b3[_0x1e0210(0xe1)](addTags,_0x8266e5,_0x4283ae);const _0x2b5632=JSON[_0x1e0210(0xda)](_0x8266e5);let _0x18749a=await AWSUtils[_0x1e0210(0x107)](_0x1b2cd7);_0x18749a=_0x18749a[_0x1e0210(0xe5)](_0x38d0b3[_0x1e0210(0xf5)])[0x1];const _0x205cde={};_0x205cde[_0x1e0210(0x104)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x1b2cd7+_0x1e0210(0xdb),_0x205cde['OnFailure']=_0x38d0b3[_0x1e0210(0xd4)],_0x205cde[_0x1e0210(0xec)]=_0x2b5632,_0x205cde[_0x1e0210(0xf6)]=[{'ParameterKey':_0x38d0b3['ycBgw'],'ParameterValue':_0x45ede8},{'ParameterKey':_0x38d0b3[_0x1e0210(0xf0)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x1b2cd7},{'ParameterKey':_0x38d0b3[_0x1e0210(0xd3)],'ParameterValue':_0x18749a}],_0x205cde[_0x1e0210(0x101)]=[_0x38d0b3['lBFlC']],_0x205cde[_0x1e0210(0xea)]=_0x4283ae;const _0x421146=_0x205cde,_0x5ce40e=await _0x583f84[_0x1e0210(0xe6)](_0x421146)[_0x1e0210(0x10a)]();logger['info'](_0x38d0b3['tOYeM']);const _0x1e065b={};return _0x1e065b[_0x1e0210(0x104)]=_0x5ce40e['StackId'],_0x583f84[_0x1e0210(0x100)](_0x38d0b3[_0x1e0210(0xf9)],_0x1e065b)[_0x1e0210(0x10a)]();};