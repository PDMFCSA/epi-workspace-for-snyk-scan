const a28_0x3fa3e5=a28_0x4677;(function(_0x686078,_0x2d902f){const _0x294469=a28_0x4677,_0x19624e=_0x686078();while(!![]){try{const _0x33e538=parseInt(_0x294469(0x207))/0x1+-parseInt(_0x294469(0x1f6))/0x2+parseInt(_0x294469(0x1ff))/0x3*(parseInt(_0x294469(0x1fe))/0x4)+parseInt(_0x294469(0x1e1))/0x5*(-parseInt(_0x294469(0x1ef))/0x6)+-parseInt(_0x294469(0x1fa))/0x7*(parseInt(_0x294469(0x1f3))/0x8)+-parseInt(_0x294469(0x212))/0x9+parseInt(_0x294469(0x20b))/0xa;if(_0x33e538===_0x2d902f)break;else _0x19624e['push'](_0x19624e['shift']());}catch(_0x59c15d){_0x19624e['push'](_0x19624e['shift']());}}}(a28_0x35a3,0x54adf));function a28_0x35a3(){const _0x23546c=['ziqwx','JjUCr','DHbDk','stringify','Parameters','2526165GxfsfB','Resources','TemplateBody','ZJpAF','://','StackName','CloudFormation','valueOf','join','browserstack:cluster','hub-ha.yaml','toString','apiVersion','./AWSUtils','5WxDSNa','Properties','CFTemplates','split','load','wutbF','utf-8','TfcfP','path','CAPABILITY_NAMED_IAM','bluebird','Tags','promise','createHubHaStack','3053394DOyYro','awsObj','-cf','MHfMB','360eOKLbg','BzoGh','stackCreateComplete','426210iqqEZU','Value','gjyfw','browserstack:creationDate','76083yDzvDe','waitFor','../config/logger','StackId','20myzsmI','180813fkhXpp','createStack','ClusterOIDCURL','../config/constants','info','DELETE','Lvdsh','OYNaO','73821qcOpOD','js-yaml-cloudformation-schema','push','phoFo','14634650cBnXjQ','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete'];a28_0x35a3=function(){return _0x23546c;};return a28_0x35a3();}const fs=require('fs'),path=require(a28_0x3fa3e5(0x1e9)),Promise=require(a28_0x3fa3e5(0x1eb)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a28_0x3fa3e5(0x208)),AWS=require(a28_0x3fa3e5(0x21f))[a28_0x3fa3e5(0x1f0)],AWSUtils=require(a28_0x3fa3e5(0x21f)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x3fa3e5(0x202)),{logger}=require(a28_0x3fa3e5(0x1fc));Promise['promisifyAll'](fs);function a28_0x4677(_0x1c9aa3,_0x1cab4e){const _0x35a3d9=a28_0x35a3();return a28_0x4677=function(_0x4677c6,_0x4bd559){_0x4677c6=_0x4677c6-0x1e1;let _0x9aa1fe=_0x35a3d9[_0x4677c6];return _0x9aa1fe;},a28_0x4677(_0x1c9aa3,_0x1cab4e);}const addTags=async(_0x1b66ea,_0x1a0c84)=>{const _0x39f620=a28_0x3fa3e5;for(const _0x48eab6 in _0x1b66ea['Resources']){_0x1b66ea['Resources'][_0x48eab6][_0x39f620(0x1e2)]&&_0x1b66ea[_0x39f620(0x213)][_0x48eab6][_0x39f620(0x1e2)]['Tags']&&_0x1b66ea[_0x39f620(0x213)][_0x48eab6][_0x39f620(0x1e2)]['Tags']['push'](..._0x1a0c84);}};exports[a28_0x3fa3e5(0x1ee)]=async(_0x238be0,_0x19e5be=null)=>{const _0xc8b5ae=a28_0x3fa3e5,_0x57dd02={'GuOMt':_0xc8b5ae(0x21b),'DHbDk':_0xc8b5ae(0x1f9),'ZJpAF':'2010-05-15','Lvdsh':_0xc8b5ae(0x1e3),'gjyfw':_0xc8b5ae(0x21c),'ziqwx':_0xc8b5ae(0x1e7),'TfcfP':function(_0x3ddca7,_0x1377cd,_0x2b40b6){return _0x3ddca7(_0x1377cd,_0x2b40b6);},'MHfMB':_0xc8b5ae(0x216),'phoFo':_0xc8b5ae(0x204),'BzoGh':'VpcId','wutbF':'BaseResourceName','JjUCr':_0xc8b5ae(0x201),'OYNaO':_0xc8b5ae(0x1ea),'OAvzo':_0xc8b5ae(0x20c),'GDqWr':_0xc8b5ae(0x1f5)},_0x552a8e=COMMON_HST_TAGS,_0x26a8ae={};_0x26a8ae['Key']=_0x57dd02['GuOMt'],_0x26a8ae[_0xc8b5ae(0x1f7)]=_0x238be0,_0x552a8e[_0xc8b5ae(0x209)](_0x26a8ae),_0x552a8e[_0xc8b5ae(0x209)]({'Key':_0x57dd02[_0xc8b5ae(0x20f)],'Value':new Date()[_0xc8b5ae(0x219)]()[_0xc8b5ae(0x21d)]()});const _0x316a75={};_0x316a75[_0xc8b5ae(0x21e)]=_0x57dd02[_0xc8b5ae(0x215)];const _0x37ca26=new AWS[(_0xc8b5ae(0x218))](_0x316a75),_0x482178=await fs['readFileAsync'](path[_0xc8b5ae(0x21a)](__dirname,'..',_0x57dd02[_0xc8b5ae(0x205)],_0x57dd02[_0xc8b5ae(0x1f8)]),_0x57dd02[_0xc8b5ae(0x20d)]),_0x11d99c={};_0x11d99c['schema']=CLOUDFORMATION_SCHEMA;const _0x1e6424=yaml[_0xc8b5ae(0x1e5)](_0x482178,_0x11d99c);await _0x57dd02[_0xc8b5ae(0x1e8)](addTags,_0x1e6424,_0x552a8e);const _0x1357a8=JSON[_0xc8b5ae(0x210)](_0x1e6424);let _0x58b8a5=await AWSUtils['getOidcUrl'](_0x238be0);_0x58b8a5=_0x58b8a5[_0xc8b5ae(0x1e4)](_0x57dd02[_0xc8b5ae(0x1f2)])[0x1];const _0x1992a0={};_0x1992a0[_0xc8b5ae(0x217)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x238be0+_0xc8b5ae(0x1f1),_0x1992a0['OnFailure']=_0x57dd02[_0xc8b5ae(0x20a)],_0x1992a0[_0xc8b5ae(0x214)]=_0x1357a8,_0x1992a0[_0xc8b5ae(0x211)]=[{'ParameterKey':_0x57dd02[_0xc8b5ae(0x1f4)],'ParameterValue':_0x19e5be},{'ParameterKey':_0x57dd02[_0xc8b5ae(0x1e6)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x238be0},{'ParameterKey':_0x57dd02[_0xc8b5ae(0x20e)],'ParameterValue':_0x58b8a5}],_0x1992a0['Capabilities']=[_0x57dd02[_0xc8b5ae(0x206)]],_0x1992a0[_0xc8b5ae(0x1ec)]=_0x552a8e;const _0x90e43d=_0x1992a0,_0x469f32=await _0x37ca26[_0xc8b5ae(0x200)](_0x90e43d)[_0xc8b5ae(0x1ed)]();logger[_0xc8b5ae(0x203)](_0x57dd02['OAvzo']);const _0x5bbcda={};return _0x5bbcda['StackName']=_0x469f32[_0xc8b5ae(0x1fd)],_0x37ca26[_0xc8b5ae(0x1fb)](_0x57dd02['GDqWr'],_0x5bbcda)[_0xc8b5ae(0x1ed)]();};