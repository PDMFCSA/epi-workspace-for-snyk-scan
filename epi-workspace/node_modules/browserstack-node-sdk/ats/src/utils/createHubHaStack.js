function a28_0x5ce0(){const _0x2554bd=['xRxIh','VpcId','./AWSUtils','js-yaml-cloudformation-schema','lCVtv','5092bCacex','1711080axLETa','../config/logger','yoJvF','schema','DCrQT','StackName','2495gpjeKL','PYfHT','nPLlf','-cf','djgcl','DELETE','createHubHaStack','StackId','bluebird','CFTemplates','Properties','waitFor','Resources','Tags','CAPABILITY_NAMED_IAM','promisifyAll','4033216nUttuA','XqONA','valueOf','browserstack:cluster','promise','2373JRIMal','gqMRd','8941032tCmjyp','push','awsObj','AKjsx','readFileAsync','stringify','BsEQO','BaseResourceName','split','stackCreateComplete','Value','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','831918YmKRQW','aIACE','getOidcUrl','join','browserstack:creationDate','info','qVkjp','324RNRFVa','vLXro','429665nwEsNo','MbEIK','Parameters','Capabilities','../config/constants'];a28_0x5ce0=function(){return _0x2554bd;};return a28_0x5ce0();}function a28_0x22ac(_0xba8a11,_0x238df0){const _0x5ce09d=a28_0x5ce0();return a28_0x22ac=function(_0x22ac86,_0x3cae29){_0x22ac86=_0x22ac86-0x116;let _0x405758=_0x5ce09d[_0x22ac86];return _0x405758;},a28_0x22ac(_0xba8a11,_0x238df0);}const a28_0x1e302b=a28_0x22ac;(function(_0x1a217b,_0x286bb2){const _0x4cca9b=a28_0x22ac,_0x684e67=_0x1a217b();while(!![]){try{const _0x304824=parseInt(_0x4cca9b(0x14a))/0x1+-parseInt(_0x4cca9b(0x141))/0x2+parseInt(_0x4cca9b(0x118))/0x3+-parseInt(_0x4cca9b(0x117))/0x4*(parseInt(_0x4cca9b(0x11e))/0x5)+-parseInt(_0x4cca9b(0x148))/0x6*(parseInt(_0x4cca9b(0x133))/0x7)+-parseInt(_0x4cca9b(0x12e))/0x8+parseInt(_0x4cca9b(0x135))/0x9;if(_0x304824===_0x286bb2)break;else _0x684e67['push'](_0x684e67['shift']());}catch(_0x4a259){_0x684e67['push'](_0x684e67['shift']());}}}(a28_0x5ce0,0x667f5));const fs=require('fs'),path=require('path'),Promise=require(a28_0x1e302b(0x126)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a28_0x1e302b(0x152)),AWS=require(a28_0x1e302b(0x151))[a28_0x1e302b(0x137)],AWSUtils=require(a28_0x1e302b(0x151)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x1e302b(0x14e)),{logger}=require(a28_0x1e302b(0x119));Promise[a28_0x1e302b(0x12d)](fs);const addTags=async(_0x47fd6e,_0x4faeaf)=>{const _0x544627=a28_0x1e302b;for(const _0x2558f8 in _0x47fd6e['Resources']){_0x47fd6e[_0x544627(0x12a)][_0x2558f8][_0x544627(0x128)]&&_0x47fd6e[_0x544627(0x12a)][_0x2558f8][_0x544627(0x128)][_0x544627(0x12b)]&&_0x47fd6e[_0x544627(0x12a)][_0x2558f8][_0x544627(0x128)][_0x544627(0x12b)][_0x544627(0x136)](..._0x4faeaf);}};exports[a28_0x1e302b(0x124)]=async(_0x1e036a,_0x29ae4c=null)=>{const _0x5683fc=a28_0x1e302b,_0x428481={'qVkjp':_0x5683fc(0x131),'djgcl':_0x5683fc(0x145),'gqMRd':'2010-05-15','aIACE':_0x5683fc(0x127),'AKjsx':'hub-ha.yaml','XqONA':'utf-8','xRxIh':function(_0x1644b3,_0x1e1333,_0x5eb15b){return _0x1644b3(_0x1e1333,_0x5eb15b);},'yoJvF':'://','DCrQT':_0x5683fc(0x123),'lCVtv':_0x5683fc(0x150),'PYfHT':_0x5683fc(0x13c),'nPLlf':'ClusterOIDCURL','BsEQO':_0x5683fc(0x12c),'vLXro':_0x5683fc(0x140),'MbEIK':_0x5683fc(0x13e)},_0x3c8a5b=COMMON_HST_TAGS,_0x37ff28={};_0x37ff28['Key']=_0x428481[_0x5683fc(0x147)],_0x37ff28[_0x5683fc(0x13f)]=_0x1e036a,_0x3c8a5b['push'](_0x37ff28),_0x3c8a5b['push']({'Key':_0x428481[_0x5683fc(0x122)],'Value':new Date()[_0x5683fc(0x130)]()['toString']()});const _0x4d01e9={};_0x4d01e9['apiVersion']=_0x428481[_0x5683fc(0x134)];const _0xbd564=new AWS['CloudFormation'](_0x4d01e9),_0x5230c2=await fs[_0x5683fc(0x139)](path[_0x5683fc(0x144)](__dirname,'..',_0x428481[_0x5683fc(0x142)],_0x428481[_0x5683fc(0x138)]),_0x428481[_0x5683fc(0x12f)]),_0x144865={};_0x144865[_0x5683fc(0x11b)]=CLOUDFORMATION_SCHEMA;const _0x3781cc=yaml['load'](_0x5230c2,_0x144865);await _0x428481[_0x5683fc(0x14f)](addTags,_0x3781cc,_0x3c8a5b);const _0x4182ab=JSON[_0x5683fc(0x13a)](_0x3781cc);let _0x207894=await AWSUtils[_0x5683fc(0x143)](_0x1e036a);_0x207894=_0x207894[_0x5683fc(0x13d)](_0x428481[_0x5683fc(0x11a)])[0x1];const _0x3fb375={};_0x3fb375[_0x5683fc(0x11d)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x1e036a+_0x5683fc(0x121),_0x3fb375['OnFailure']=_0x428481[_0x5683fc(0x11c)],_0x3fb375['TemplateBody']=_0x4182ab,_0x3fb375[_0x5683fc(0x14c)]=[{'ParameterKey':_0x428481[_0x5683fc(0x116)],'ParameterValue':_0x29ae4c},{'ParameterKey':_0x428481[_0x5683fc(0x11f)],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x1e036a},{'ParameterKey':_0x428481[_0x5683fc(0x120)],'ParameterValue':_0x207894}],_0x3fb375[_0x5683fc(0x14d)]=[_0x428481[_0x5683fc(0x13b)]],_0x3fb375[_0x5683fc(0x12b)]=_0x3c8a5b;const _0x2f6bc4=_0x3fb375,_0x5e53f6=await _0xbd564['createStack'](_0x2f6bc4)['promise']();logger[_0x5683fc(0x146)](_0x428481[_0x5683fc(0x149)]);const _0x168e18={};return _0x168e18[_0x5683fc(0x11d)]=_0x5e53f6[_0x5683fc(0x125)],_0xbd564[_0x5683fc(0x129)](_0x428481[_0x5683fc(0x14b)],_0x168e18)[_0x5683fc(0x132)]();};