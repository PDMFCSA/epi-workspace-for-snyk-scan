const a26_0x4c6083=a26_0x148b;(function(_0x1666ef,_0x12775a){const _0x47c2e8=a26_0x148b,_0x426cf5=_0x1666ef();while(!![]){try{const _0x223db1=parseInt(_0x47c2e8(0xf4))/0x1+parseInt(_0x47c2e8(0x122))/0x2+parseInt(_0x47c2e8(0x11d))/0x3*(parseInt(_0x47c2e8(0x120))/0x4)+parseInt(_0x47c2e8(0x117))/0x5*(parseInt(_0x47c2e8(0x105))/0x6)+-parseInt(_0x47c2e8(0xf5))/0x7*(-parseInt(_0x47c2e8(0xf7))/0x8)+parseInt(_0x47c2e8(0x11a))/0x9+-parseInt(_0x47c2e8(0x11b))/0xa;if(_0x223db1===_0x12775a)break;else _0x426cf5['push'](_0x426cf5['shift']());}catch(_0x125ee0){_0x426cf5['push'](_0x426cf5['shift']());}}}(a26_0x35c7,0x573e1));const fs=require('fs'),path=require('path'),yaml=require(a26_0x4c6083(0x123)),{CLOUDFORMATION_SCHEMA}=require(a26_0x4c6083(0xf6)),Promise=require(a26_0x4c6083(0x10e)),AWS=require(a26_0x4c6083(0x11e))[a26_0x4c6083(0x116)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require(a26_0x4c6083(0x10f)),{logger}=require(a26_0x4c6083(0x11f));function a26_0x35c7(){const _0x2f8597=['autoscaler-role-creation.yaml','Resources','push','zaPuu','525441ZUClcC','2469733sOlbvZ','js-yaml-cloudformation-schema','8EkZcQO','QEHbo','Parameters','toString','browserstack:cluster','2010-05-15','mLCOQ','join','CloudFormation','createStack','load','utf-8','Capabilities','stackCreateComplete','6RJAnhA','nKNHJ','Key','DELETE','CZHfG','yJiKY','promise','wRwKZ','stringify','bluebird','../config/constants','apiVersion','promisifyAll','tkYna','templates','Value','Tags','awsObj','800460CgvTNz','readFileAsync','StackId','4226787NSLWvZ','20305530ZjKhUR','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','24KSadjR','./AWSUtils','../config/logger','150256PEeIoC','Properties','1158782RpvmbL','js-yaml','CAPABILITY_NAMED_IAM','valueOf'];a26_0x35c7=function(){return _0x2f8597;};return a26_0x35c7();}Promise[a26_0x4c6083(0x111)](fs);const addAutoscalerTags=async(_0x15e832,_0x5d431a,_0x12cb8c)=>{const _0x1e86f7=a26_0x4c6083;for(const _0x45758f in _0x15e832[_0x1e86f7(0xf1)]){_0x15e832[_0x1e86f7(0xf1)][_0x45758f][_0x1e86f7(0x121)]&&_0x15e832[_0x1e86f7(0xf1)][_0x45758f][_0x1e86f7(0x121)][_0x1e86f7(0x115)]&&_0x15e832[_0x1e86f7(0xf1)][_0x45758f][_0x1e86f7(0x121)][_0x1e86f7(0x115)][_0x1e86f7(0xf2)](..._0x12cb8c);}};function a26_0x148b(_0x5321bc,_0x30f2e0){const _0x35c739=a26_0x35c7();return a26_0x148b=function(_0x148bd1,_0x45669b){_0x148bd1=_0x148bd1-0xf0;let _0x10b22c=_0x35c739[_0x148bd1];return _0x10b22c;},a26_0x148b(_0x5321bc,_0x30f2e0);}exports['createAutoscalerStack']=async _0x1836ff=>{const _0x41f286=a26_0x4c6083,_0x2f7785={'vlZSq':_0x41f286(0xfb),'lzhoU':'browserstack:creationDate','nhkAs':_0x41f286(0xfc),'zaPuu':_0x41f286(0x113),'ZNBpg':_0x41f286(0xf0),'yJiKY':_0x41f286(0x102),'CZHfG':function(_0x2d524a,_0x40c771,_0x222e0f,_0x3f4c81){return _0x2d524a(_0x40c771,_0x222e0f,_0x3f4c81);},'wRwKZ':_0x41f286(0x108),'tkYna':'ClusterName','mLCOQ':_0x41f286(0x124),'QEHbo':_0x41f286(0x11c),'nKNHJ':_0x41f286(0x104)},_0x31f0af=COMMON_HST_TAGS,_0x400612={};_0x400612[_0x41f286(0x107)]=_0x2f7785['vlZSq'],_0x400612[_0x41f286(0x114)]=_0x1836ff,_0x31f0af[_0x41f286(0xf2)](_0x400612),_0x31f0af['push']({'Key':_0x2f7785['lzhoU'],'Value':new Date()[_0x41f286(0x125)]()[_0x41f286(0xfa)]()});const _0x5df538={};_0x5df538[_0x41f286(0x110)]=_0x2f7785['nhkAs'];const _0x1c70d0=new AWS[(_0x41f286(0xff))](_0x5df538),_0x49770a=await fs[_0x41f286(0x118)](path[_0x41f286(0xfe)](__dirname,'..',_0x2f7785[_0x41f286(0xf3)],_0x2f7785['ZNBpg']),_0x2f7785[_0x41f286(0x10a)]),_0x28eb35={};_0x28eb35['schema']=CLOUDFORMATION_SCHEMA;const _0x4fdfc3=yaml[_0x41f286(0x101)](_0x49770a,_0x28eb35);_0x2f7785[_0x41f286(0x109)](addAutoscalerTags,_0x4fdfc3,_0x1836ff,_0x31f0af);const _0x1a358d=JSON[_0x41f286(0x10d)](_0x4fdfc3),_0x1d20ed={};_0x1d20ed['StackName']=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x1836ff,_0x1d20ed['OnFailure']=_0x2f7785[_0x41f286(0x10c)],_0x1d20ed['TemplateBody']=_0x1a358d,_0x1d20ed[_0x41f286(0xf9)]=[{'ParameterKey':_0x2f7785[_0x41f286(0x112)],'ParameterValue':_0x1836ff}],_0x1d20ed[_0x41f286(0x103)]=[_0x2f7785[_0x41f286(0xfd)]],_0x1d20ed[_0x41f286(0x115)]=_0x31f0af;const _0x4f6ea2=_0x1d20ed,_0x2c2068=await _0x1c70d0[_0x41f286(0x100)](_0x4f6ea2)[_0x41f286(0x10b)]();logger['debug'](_0x2f7785[_0x41f286(0xf8)]);const _0x2c448b={};return _0x2c448b['StackName']=_0x2c2068[_0x41f286(0x119)],_0x1c70d0['waitFor'](_0x2f7785[_0x41f286(0x106)],_0x2c448b)[_0x41f286(0x10b)]();};