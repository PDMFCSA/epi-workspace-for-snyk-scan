const a26_0x4ba6a8=a26_0x1bba;function a26_0x4cb5(){const _0x4002fa=['toString','createStack','awsObj','rIhSz','7lPNAwv','./AWSUtils','12fDrXfM','RbMCH','5838312FrEDrX','promisifyAll','UnaEP','2380026AWlrOr','../config/logger','browserstack:creationDate','bkwMk','7rwuKuf','169cEsiIK','push','stringify','ClusterName','4443350szgRCO','DELETE','Properties','4FdwDcd','StackName','mqANh','js-yaml','422964WMEZCD','DBitN','createAutoscalerStack','KRdaw','Parameters','Capabilities','2010-05-15','bluebird','Resources','templates','apiVersion','promise','readFileAsync','yabrx','776330qlxTCw','waitFor','CAPABILITY_NAMED_IAM','schema','Tags','join','utf-8','../config/constants','126dBDEnL','StackId','11689656UMMqtU','valueOf','6352888GIRKRh'];a26_0x4cb5=function(){return _0x4002fa;};return a26_0x4cb5();}function a26_0x1bba(_0x325eb5,_0x104da1){const _0x4cb539=a26_0x4cb5();return a26_0x1bba=function(_0x1bba35,_0x2a4ae6){_0x1bba35=_0x1bba35-0xf5;let _0x511a01=_0x4cb539[_0x1bba35];return _0x511a01;},a26_0x1bba(_0x325eb5,_0x104da1);}(function(_0x3e1963,_0x3a7b0e){const _0x511d77=a26_0x1bba,_0x4bc1d1=_0x3e1963();while(!![]){try{const _0x523309=-parseInt(_0x511d77(0x11e))/0x1*(parseInt(_0x511d77(0x12a))/0x2)+parseInt(_0x511d77(0x11a))/0x3*(parseInt(_0x511d77(0x126))/0x4)+-parseInt(_0x511d77(0x123))/0x5*(parseInt(_0x511d77(0x115))/0x6)+parseInt(_0x511d77(0x113))/0x7*(-parseInt(_0x511d77(0x10e))/0x8)+parseInt(_0x511d77(0x10a))/0x9*(-parseInt(_0x511d77(0x102))/0xa)+-parseInt(_0x511d77(0x10c))/0xb+parseInt(_0x511d77(0x117))/0xc*(parseInt(_0x511d77(0x11f))/0xd);if(_0x523309===_0x3a7b0e)break;else _0x4bc1d1['push'](_0x4bc1d1['shift']());}catch(_0x482599){_0x4bc1d1['push'](_0x4bc1d1['shift']());}}}(a26_0x4cb5,0xdfd3d));const fs=require('fs'),path=require('path'),yaml=require(a26_0x4ba6a8(0x129)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),Promise=require(a26_0x4ba6a8(0xfb)),AWS=require(a26_0x4ba6a8(0x114))[a26_0x4ba6a8(0x111)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require(a26_0x4ba6a8(0x109)),{logger}=require(a26_0x4ba6a8(0x11b));Promise[a26_0x4ba6a8(0x118)](fs);const addAutoscalerTags=async(_0x38a31d,_0x3c2550,_0xc97892)=>{const _0x166c65=a26_0x4ba6a8;for(const _0x4512ba in _0x38a31d[_0x166c65(0xfc)]){_0x38a31d[_0x166c65(0xfc)][_0x4512ba][_0x166c65(0x125)]&&_0x38a31d[_0x166c65(0xfc)][_0x4512ba][_0x166c65(0x125)][_0x166c65(0x106)]&&_0x38a31d[_0x166c65(0xfc)][_0x4512ba][_0x166c65(0x125)][_0x166c65(0x106)][_0x166c65(0x120)](..._0xc97892);}};exports[a26_0x4ba6a8(0xf6)]=async _0x12168a=>{const _0xd6b1a4=a26_0x4ba6a8,_0x5a29fb={'yabrx':'browserstack:cluster','rIhSz':_0xd6b1a4(0x11c),'UnaEP':_0xd6b1a4(0xfa),'NYviV':_0xd6b1a4(0xfd),'mqANh':'autoscaler-role-creation.yaml','Ewxga':_0xd6b1a4(0x108),'RbMCH':function(_0x3cb1f3,_0x3ea72b,_0x40053e,_0x525e27){return _0x3cb1f3(_0x3ea72b,_0x40053e,_0x525e27);},'PoQas':_0xd6b1a4(0x124),'QaUgJ':_0xd6b1a4(0x122),'KRdaw':_0xd6b1a4(0x104),'bkwMk':'Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','DBitN':'stackCreateComplete'},_0x50163a=COMMON_HST_TAGS,_0x24031b={};_0x24031b['Key']=_0x5a29fb[_0xd6b1a4(0x101)],_0x24031b['Value']=_0x12168a,_0x50163a[_0xd6b1a4(0x120)](_0x24031b),_0x50163a[_0xd6b1a4(0x120)]({'Key':_0x5a29fb[_0xd6b1a4(0x112)],'Value':new Date()[_0xd6b1a4(0x10d)]()[_0xd6b1a4(0x10f)]()});const _0x404d89={};_0x404d89[_0xd6b1a4(0xfe)]=_0x5a29fb[_0xd6b1a4(0x119)];const _0x1e5ceb=new AWS['CloudFormation'](_0x404d89),_0x391a71=await fs[_0xd6b1a4(0x100)](path[_0xd6b1a4(0x107)](__dirname,'..',_0x5a29fb['NYviV'],_0x5a29fb[_0xd6b1a4(0x128)]),_0x5a29fb['Ewxga']),_0x2f38e4={};_0x2f38e4[_0xd6b1a4(0x105)]=CLOUDFORMATION_SCHEMA;const _0x253ebb=yaml['load'](_0x391a71,_0x2f38e4);_0x5a29fb[_0xd6b1a4(0x116)](addAutoscalerTags,_0x253ebb,_0x12168a,_0x50163a);const _0x5d416b=JSON[_0xd6b1a4(0x121)](_0x253ebb),_0x283588={};_0x283588['StackName']=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x12168a,_0x283588['OnFailure']=_0x5a29fb['PoQas'],_0x283588['TemplateBody']=_0x5d416b,_0x283588[_0xd6b1a4(0xf8)]=[{'ParameterKey':_0x5a29fb['QaUgJ'],'ParameterValue':_0x12168a}],_0x283588[_0xd6b1a4(0xf9)]=[_0x5a29fb[_0xd6b1a4(0xf7)]],_0x283588[_0xd6b1a4(0x106)]=_0x50163a;const _0xa5a199=_0x283588,_0x47f0b2=await _0x1e5ceb[_0xd6b1a4(0x110)](_0xa5a199)['promise']();logger['debug'](_0x5a29fb[_0xd6b1a4(0x11d)]);const _0x2b8142={};return _0x2b8142[_0xd6b1a4(0x127)]=_0x47f0b2[_0xd6b1a4(0x10b)],_0x1e5ceb[_0xd6b1a4(0x103)](_0x5a29fb[_0xd6b1a4(0xf5)],_0x2b8142)[_0xd6b1a4(0xff)]();};