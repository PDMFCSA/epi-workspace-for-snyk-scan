const a26_0x3488a5=a26_0x36d8;(function(_0x1c42f5,_0x3e4fab){const _0x595d1c=a26_0x36d8,_0x392a57=_0x1c42f5();while(!![]){try{const _0x276059=parseInt(_0x595d1c(0xed))/0x1*(parseInt(_0x595d1c(0xe1))/0x2)+-parseInt(_0x595d1c(0xfb))/0x3*(-parseInt(_0x595d1c(0xef))/0x4)+parseInt(_0x595d1c(0xee))/0x5*(-parseInt(_0x595d1c(0xfc))/0x6)+-parseInt(_0x595d1c(0x101))/0x7+parseInt(_0x595d1c(0xf6))/0x8+parseInt(_0x595d1c(0x10a))/0x9*(-parseInt(_0x595d1c(0xfa))/0xa)+-parseInt(_0x595d1c(0x100))/0xb;if(_0x276059===_0x3e4fab)break;else _0x392a57['push'](_0x392a57['shift']());}catch(_0x455d71){_0x392a57['push'](_0x392a57['shift']());}}}(a26_0x3c7d,0x7398e));const fs=require('fs'),path=require('path'),yaml=require(a26_0x3488a5(0xe2)),{CLOUDFORMATION_SCHEMA}=require(a26_0x3488a5(0xf2)),Promise=require(a26_0x3488a5(0x108)),AWS=require(a26_0x3488a5(0x10c))[a26_0x3488a5(0xf8)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require(a26_0x3488a5(0xe7));Promise[a26_0x3488a5(0xe3)](fs);function a26_0x36d8(_0x484545,_0x1077c7){const _0x3c7d14=a26_0x3c7d();return a26_0x36d8=function(_0x36d8dd,_0x5e5899){_0x36d8dd=_0x36d8dd-0xe1;let _0x2ec7b5=_0x3c7d14[_0x36d8dd];return _0x2ec7b5;},a26_0x36d8(_0x484545,_0x1077c7);}const addAutoscalerTags=async(_0x1ac3f1,_0x5208e2,_0x3f038c)=>{const _0xd7689=a26_0x3488a5;for(const _0x1f68a3 in _0x1ac3f1[_0xd7689(0xff)]){_0x1ac3f1['Resources'][_0x1f68a3][_0xd7689(0xea)]&&_0x1ac3f1[_0xd7689(0xff)][_0x1f68a3][_0xd7689(0xea)][_0xd7689(0xfe)]&&_0x1ac3f1[_0xd7689(0xff)][_0x1f68a3][_0xd7689(0xea)][_0xd7689(0xfe)][_0xd7689(0xe8)](..._0x3f038c);}};function a26_0x3c7d(){const _0x5549b6=['547956RyiMUG','promise','./AWSUtils','dYqzu','860QeNScp','js-yaml','promisifyAll','browserstack:cluster','OnFailure','toString','../config/logger','push','Capabilities','Properties','ClusterName','vtFOB','1803PvqnoO','305EQCokH','116276CIvjqT','StackId','StackName','js-yaml-cloudformation-schema','readFileAsync','CloudFormation','Key','6186464exyNdT','lyKgu','awsObj','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','30xAPSGP','33fbWqSY','26718KIDPeJ','Value','Tags','Resources','5646509GDVrhL','2990869DOnsac','valueOf','apiVersion','TemplateBody','KELPz','createAutoscalerStack','mKBSs','bluebird','SllBM'];a26_0x3c7d=function(){return _0x5549b6;};return a26_0x3c7d();}exports[a26_0x3488a5(0x106)]=async _0x41239a=>{const _0x280b47=a26_0x3488a5,_0x51c054={'SllBM':_0x280b47(0xe4),'lyKgu':'browserstack:creationDate','eYXto':'2010-05-15','pZXeV':'templates','dYqzu':'autoscaler-role-creation.yaml','vtFOB':'utf-8','BjETh':function(_0x810315,_0x5e3449,_0x391684,_0x10659f){return _0x810315(_0x5e3449,_0x391684,_0x10659f);},'vvBQR':'DELETE','gcqXJ':_0x280b47(0xeb),'mKBSs':'CAPABILITY_NAMED_IAM','vbMHk':_0x280b47(0xf9),'KELPz':'stackCreateComplete'},_0x21c31e=COMMON_HST_TAGS,_0x43f956={};_0x43f956[_0x280b47(0xf5)]=_0x51c054[_0x280b47(0x109)],_0x43f956[_0x280b47(0xfd)]=_0x41239a,_0x21c31e[_0x280b47(0xe8)](_0x43f956),_0x21c31e['push']({'Key':_0x51c054[_0x280b47(0xf7)],'Value':new Date()[_0x280b47(0x102)]()[_0x280b47(0xe6)]()});const _0x229ef5={};_0x229ef5[_0x280b47(0x103)]=_0x51c054['eYXto'];const _0x303aac=new AWS[(_0x280b47(0xf4))](_0x229ef5),_0x6c62ed=await fs[_0x280b47(0xf3)](path['join'](__dirname,'..',_0x51c054['pZXeV'],_0x51c054[_0x280b47(0x10d)]),_0x51c054[_0x280b47(0xec)]),_0x356ffd={};_0x356ffd['schema']=CLOUDFORMATION_SCHEMA;const _0xa0eb83=yaml['load'](_0x6c62ed,_0x356ffd);_0x51c054['BjETh'](addAutoscalerTags,_0xa0eb83,_0x41239a,_0x21c31e);const _0x57c44a=JSON['stringify'](_0xa0eb83),_0x3b03ca={};_0x3b03ca[_0x280b47(0xf1)]=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x41239a,_0x3b03ca[_0x280b47(0xe5)]=_0x51c054['vvBQR'],_0x3b03ca[_0x280b47(0x104)]=_0x57c44a,_0x3b03ca['Parameters']=[{'ParameterKey':_0x51c054['gcqXJ'],'ParameterValue':_0x41239a}],_0x3b03ca[_0x280b47(0xe9)]=[_0x51c054[_0x280b47(0x107)]],_0x3b03ca['Tags']=_0x21c31e;const _0x343260=_0x3b03ca,_0x209fc9=await _0x303aac['createStack'](_0x343260)[_0x280b47(0x10b)]();logger['debug'](_0x51c054['vbMHk']);const _0x4216f0={};return _0x4216f0[_0x280b47(0xf1)]=_0x209fc9[_0x280b47(0xf0)],_0x303aac['waitFor'](_0x51c054[_0x280b47(0x105)],_0x4216f0)[_0x280b47(0x10b)]();};