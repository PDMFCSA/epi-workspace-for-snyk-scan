const a26_0x288366=a26_0x1a59;function a26_0x3fb8(){const _0x5eb9c8=['OnFailure','awsObj','4LFWCTY','2614285VZiVrH','readFileAsync','../config/logger','createAutoscalerStack','326368dYWhLy','3231792xgWRfV','Capabilities','2366966zspHru','./AWSUtils','1174672bQnmWj','js-yaml','Parameters','CAPABILITY_NAMED_IAM','vlNYR','apiVersion','join','Tags','js-yaml-cloudformation-schema','push','QAMEe','browserstack:creationDate','stackCreateComplete','load','utf-8','promisifyAll','hBSQH','Key','eLjeb','iYjnj','fehAb','6FbkIlw','stringify','409218yqLmrh','toString','ClusterName','WNBVH','WuMji','autoscaler-role-creation.yaml','Resources','Properties','debug','StackName','JErdO','14587580hFyxYr','../config/constants','3ycuKdB','kAgcC'];a26_0x3fb8=function(){return _0x5eb9c8;};return a26_0x3fb8();}(function(_0x800bec,_0x304ab3){const _0x3b8ce5=a26_0x1a59,_0x26c485=_0x800bec();while(!![]){try{const _0x145d7a=-parseInt(_0x3b8ce5(0x174))/0x1+-parseInt(_0x3b8ce5(0x15e))/0x2*(parseInt(_0x3b8ce5(0x16b))/0x3)+parseInt(_0x3b8ce5(0x16f))/0x4*(-parseInt(_0x3b8ce5(0x170))/0x5)+-parseInt(_0x3b8ce5(0x15c))/0x6*(parseInt(_0x3b8ce5(0x177))/0x7)+-parseInt(_0x3b8ce5(0x179))/0x8+parseInt(_0x3b8ce5(0x175))/0x9+parseInt(_0x3b8ce5(0x169))/0xa;if(_0x145d7a===_0x304ab3)break;else _0x26c485['push'](_0x26c485['shift']());}catch(_0x442a05){_0x26c485['push'](_0x26c485['shift']());}}}(a26_0x3fb8,0x44200));const fs=require('fs'),path=require('path'),yaml=require(a26_0x288366(0x17a)),{CLOUDFORMATION_SCHEMA}=require(a26_0x288366(0x181)),Promise=require('bluebird'),AWS=require(a26_0x288366(0x178))[a26_0x288366(0x16e)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require(a26_0x288366(0x16a)),{logger}=require(a26_0x288366(0x172));Promise[a26_0x288366(0x188)](fs);const addAutoscalerTags=async(_0x7ebd22,_0x1c173d,_0x495e2c)=>{const _0x502aa7=a26_0x288366;for(const _0x5f1f03 in _0x7ebd22['Resources']){_0x7ebd22[_0x502aa7(0x164)][_0x5f1f03][_0x502aa7(0x165)]&&_0x7ebd22[_0x502aa7(0x164)][_0x5f1f03]['Properties']['Tags']&&_0x7ebd22['Resources'][_0x5f1f03][_0x502aa7(0x165)][_0x502aa7(0x180)][_0x502aa7(0x182)](..._0x495e2c);}};function a26_0x1a59(_0x15202e,_0x12343d){const _0x3fb855=a26_0x3fb8();return a26_0x1a59=function(_0x1a599f,_0xc80045){_0x1a599f=_0x1a599f-0x15b;let _0x3ebb11=_0x3fb855[_0x1a599f];return _0x3ebb11;},a26_0x1a59(_0x15202e,_0x12343d);}exports[a26_0x288366(0x173)]=async _0x4ef225=>{const _0x4cace0=a26_0x288366,_0x3d8837={'vlNYR':'browserstack:cluster','WNBVH':_0x4cace0(0x184),'hBSQH':'2010-05-15','QAMEe':'templates','HWdyM':_0x4cace0(0x163),'kAgcC':_0x4cace0(0x187),'iYjnj':function(_0x3faef4,_0x374443,_0x1a1a10,_0x38148d){return _0x3faef4(_0x374443,_0x1a1a10,_0x38148d);},'WuMji':'DELETE','fehAb':_0x4cace0(0x160),'Cnizl':_0x4cace0(0x17c),'eLjeb':'Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','JErdO':_0x4cace0(0x185)},_0x47e03a=COMMON_HST_TAGS,_0x2ac28e={};_0x2ac28e[_0x4cace0(0x18a)]=_0x3d8837[_0x4cace0(0x17d)],_0x2ac28e['Value']=_0x4ef225,_0x47e03a[_0x4cace0(0x182)](_0x2ac28e),_0x47e03a['push']({'Key':_0x3d8837[_0x4cace0(0x161)],'Value':new Date()['valueOf']()[_0x4cace0(0x15f)]()});const _0x529643={};_0x529643[_0x4cace0(0x17e)]=_0x3d8837[_0x4cace0(0x189)];const _0x3b723d=new AWS['CloudFormation'](_0x529643),_0x1885e9=await fs[_0x4cace0(0x171)](path[_0x4cace0(0x17f)](__dirname,'..',_0x3d8837[_0x4cace0(0x183)],_0x3d8837['HWdyM']),_0x3d8837[_0x4cace0(0x16c)]),_0x562b7b={};_0x562b7b['schema']=CLOUDFORMATION_SCHEMA;const _0x2f5002=yaml[_0x4cace0(0x186)](_0x1885e9,_0x562b7b);_0x3d8837[_0x4cace0(0x18c)](addAutoscalerTags,_0x2f5002,_0x4ef225,_0x47e03a);const _0x30173b=JSON[_0x4cace0(0x15d)](_0x2f5002),_0x2b7983={};_0x2b7983[_0x4cace0(0x167)]=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x4ef225,_0x2b7983[_0x4cace0(0x16d)]=_0x3d8837[_0x4cace0(0x162)],_0x2b7983['TemplateBody']=_0x30173b,_0x2b7983[_0x4cace0(0x17b)]=[{'ParameterKey':_0x3d8837[_0x4cace0(0x15b)],'ParameterValue':_0x4ef225}],_0x2b7983[_0x4cace0(0x176)]=[_0x3d8837['Cnizl']],_0x2b7983[_0x4cace0(0x180)]=_0x47e03a;const _0x168adc=_0x2b7983,_0x12608a=await _0x3b723d['createStack'](_0x168adc)['promise']();logger[_0x4cace0(0x166)](_0x3d8837[_0x4cace0(0x18b)]);const _0x413163={};return _0x413163['StackName']=_0x12608a['StackId'],_0x3b723d['waitFor'](_0x3d8837[_0x4cace0(0x168)],_0x413163)['promise']();};