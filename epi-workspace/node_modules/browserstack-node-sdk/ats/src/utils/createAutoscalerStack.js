const a26_0x2e6f42=a26_0x300c;(function(_0x3cb728,_0xe9eda){const _0x31b1d7=a26_0x300c,_0x564fba=_0x3cb728();while(!![]){try{const _0x571ba2=parseInt(_0x31b1d7(0x12f))/0x1*(parseInt(_0x31b1d7(0x128))/0x2)+-parseInt(_0x31b1d7(0x13b))/0x3*(parseInt(_0x31b1d7(0x156))/0x4)+parseInt(_0x31b1d7(0x15a))/0x5+-parseInt(_0x31b1d7(0x12e))/0x6+parseInt(_0x31b1d7(0x151))/0x7*(parseInt(_0x31b1d7(0x145))/0x8)+-parseInt(_0x31b1d7(0x133))/0x9+-parseInt(_0x31b1d7(0x132))/0xa;if(_0x571ba2===_0xe9eda)break;else _0x564fba['push'](_0x564fba['shift']());}catch(_0x286afb){_0x564fba['push'](_0x564fba['shift']());}}}(a26_0x5c9f,0x3aeae));const fs=require('fs'),path=require(a26_0x2e6f42(0x14f)),yaml=require(a26_0x2e6f42(0x13e)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),Promise=require('bluebird'),AWS=require('./AWSUtils')[a26_0x2e6f42(0x14b)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require(a26_0x2e6f42(0x155)),{logger}=require('../config/logger');Promise['promisifyAll'](fs);const addAutoscalerTags=async(_0x684bbd,_0x27f2ef,_0x25d90d)=>{const _0x2765cb=a26_0x2e6f42;for(const _0x41948f in _0x684bbd[_0x2765cb(0x135)]){_0x684bbd['Resources'][_0x41948f][_0x2765cb(0x142)]&&_0x684bbd['Resources'][_0x41948f][_0x2765cb(0x142)][_0x2765cb(0x13c)]&&_0x684bbd[_0x2765cb(0x135)][_0x41948f]['Properties'][_0x2765cb(0x13c)][_0x2765cb(0x136)](..._0x25d90d);}};function a26_0x5c9f(){const _0x3bafdc=['1889415MXCYtI','TemplateBody','Resources','push','DELETE','UzmMx','Key','Capabilities','16827xiGITe','Tags','autoscaler-role-creation.yaml','js-yaml','stringify','browserstack:cluster','2010-05-15','Properties','Value','OnFailure','81584EJTIiE','load','hfhoC','join','stackCreateComplete','CloudFormation','awsObj','templates','CAPABILITY_NAMED_IAM','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','path','StackId','49AsUlsb','createStack','createAutoscalerStack','EhDMX','../config/constants','20JNbrCC','promise','schema','ClusterName','559940uQGRop','readFileAsync','IBwWv','apiVersion','OrFYD','2FbpqsA','IbpCU','ZDJOo','GGzZE','Rvdiu','StackName','39744NEoElL','393870ZjYdOH','OBXrq','waitFor','913140RrWcsI'];a26_0x5c9f=function(){return _0x3bafdc;};return a26_0x5c9f();}function a26_0x300c(_0x46cfd7,_0x2ec372){const _0x5c9f71=a26_0x5c9f();return a26_0x300c=function(_0x300c77,_0x49591d){_0x300c77=_0x300c77-0x126;let _0x4d564a=_0x5c9f71[_0x300c77];return _0x4d564a;},a26_0x300c(_0x46cfd7,_0x2ec372);}exports[a26_0x2e6f42(0x153)]=async _0x410e14=>{const _0x2b265f=a26_0x2e6f42,_0x1afeec={'OBXrq':_0x2b265f(0x140),'EhDMX':'browserstack:creationDate','hfhoC':_0x2b265f(0x141),'IBwWv':_0x2b265f(0x14c),'IbpCU':_0x2b265f(0x13d),'UzmMx':'utf-8','aNnNY':function(_0x16206a,_0x55cd3e,_0x123f22,_0x33e388){return _0x16206a(_0x55cd3e,_0x123f22,_0x33e388);},'OrFYD':_0x2b265f(0x137),'Rvdiu':_0x2b265f(0x159),'GGzZE':_0x2b265f(0x14d),'ZDJOo':_0x2b265f(0x14e),'uWnuq':_0x2b265f(0x149)},_0x3aedbc=COMMON_HST_TAGS,_0x2c42e1={};_0x2c42e1[_0x2b265f(0x139)]=_0x1afeec[_0x2b265f(0x130)],_0x2c42e1[_0x2b265f(0x143)]=_0x410e14,_0x3aedbc[_0x2b265f(0x136)](_0x2c42e1),_0x3aedbc[_0x2b265f(0x136)]({'Key':_0x1afeec[_0x2b265f(0x154)],'Value':new Date()['valueOf']()['toString']()});const _0x28775e={};_0x28775e[_0x2b265f(0x126)]=_0x1afeec[_0x2b265f(0x147)];const _0x5dc5eb=new AWS[(_0x2b265f(0x14a))](_0x28775e),_0x121dc7=await fs[_0x2b265f(0x15b)](path[_0x2b265f(0x148)](__dirname,'..',_0x1afeec[_0x2b265f(0x15c)],_0x1afeec[_0x2b265f(0x129)]),_0x1afeec[_0x2b265f(0x138)]),_0xe5ed29={};_0xe5ed29[_0x2b265f(0x158)]=CLOUDFORMATION_SCHEMA;const _0x1f2fea=yaml[_0x2b265f(0x146)](_0x121dc7,_0xe5ed29);_0x1afeec['aNnNY'](addAutoscalerTags,_0x1f2fea,_0x410e14,_0x3aedbc);const _0x1ad993=JSON[_0x2b265f(0x13f)](_0x1f2fea),_0x20b924={};_0x20b924[_0x2b265f(0x12d)]=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x410e14,_0x20b924[_0x2b265f(0x144)]=_0x1afeec[_0x2b265f(0x127)],_0x20b924[_0x2b265f(0x134)]=_0x1ad993,_0x20b924['Parameters']=[{'ParameterKey':_0x1afeec[_0x2b265f(0x12c)],'ParameterValue':_0x410e14}],_0x20b924[_0x2b265f(0x13a)]=[_0x1afeec[_0x2b265f(0x12b)]],_0x20b924[_0x2b265f(0x13c)]=_0x3aedbc;const _0x41d5a0=_0x20b924,_0x3e5319=await _0x5dc5eb[_0x2b265f(0x152)](_0x41d5a0)['promise']();logger['debug'](_0x1afeec[_0x2b265f(0x12a)]);const _0x5ba13a={};return _0x5ba13a[_0x2b265f(0x12d)]=_0x3e5319[_0x2b265f(0x150)],_0x5dc5eb[_0x2b265f(0x131)](_0x1afeec['uWnuq'],_0x5ba13a)[_0x2b265f(0x157)]();};