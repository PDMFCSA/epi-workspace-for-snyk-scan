const a26_0x3c758f=a26_0x2229;(function(_0x5ac80e,_0x225069){const _0x3f8eaa=a26_0x2229,_0x34c42a=_0x5ac80e();while(!![]){try{const _0x43bff2=parseInt(_0x3f8eaa(0xe3))/0x1+-parseInt(_0x3f8eaa(0xbe))/0x2*(-parseInt(_0x3f8eaa(0xe7))/0x3)+parseInt(_0x3f8eaa(0xed))/0x4*(parseInt(_0x3f8eaa(0xdb))/0x5)+-parseInt(_0x3f8eaa(0xde))/0x6+-parseInt(_0x3f8eaa(0xd8))/0x7+parseInt(_0x3f8eaa(0xe6))/0x8+-parseInt(_0x3f8eaa(0xd2))/0x9;if(_0x43bff2===_0x225069)break;else _0x34c42a['push'](_0x34c42a['shift']());}catch(_0x301e2e){_0x34c42a['push'](_0x34c42a['shift']());}}}(a26_0x2ff6,0x1c0e4));const fs=require('fs'),path=require('path'),yaml=require(a26_0x3c758f(0xd7)),{CLOUDFORMATION_SCHEMA}=require(a26_0x3c758f(0xd0)),Promise=require('bluebird'),AWS=require(a26_0x3c758f(0xc8))['awsObj'],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require(a26_0x3c758f(0xd4));Promise[a26_0x3c758f(0xdf)](fs);const addAutoscalerTags=async(_0x4919e0,_0x23c61a,_0x5ae2e1)=>{const _0x280816=a26_0x3c758f;for(const _0x430b96 in _0x4919e0[_0x280816(0xe8)]){_0x4919e0['Resources'][_0x430b96][_0x280816(0xda)]&&_0x4919e0[_0x280816(0xe8)][_0x430b96][_0x280816(0xda)][_0x280816(0xd9)]&&_0x4919e0[_0x280816(0xe8)][_0x430b96][_0x280816(0xda)]['Tags']['push'](..._0x5ae2e1);}};exports[a26_0x3c758f(0xe9)]=async _0x2a62cf=>{const _0x54597d=a26_0x3c758f,_0x4860a5={'AQmHt':_0x54597d(0xd1),'CueIq':_0x54597d(0xef),'WfieD':_0x54597d(0xe5),'bLrlN':'templates','AtcLa':_0x54597d(0xc5),'VtaEu':_0x54597d(0xe2),'VVOpU':function(_0x23f51c,_0x2afa44,_0x58b5ba,_0x1495b3){return _0x23f51c(_0x2afa44,_0x58b5ba,_0x1495b3);},'mJYvC':_0x54597d(0xcb),'PzOsu':_0x54597d(0xe0),'PqIBy':'CAPABILITY_NAMED_IAM','KCRaS':_0x54597d(0xcf),'rAmgL':_0x54597d(0xcd)},_0x36f5bd=COMMON_HST_TAGS,_0x18d702={};_0x18d702[_0x54597d(0xbf)]=_0x4860a5[_0x54597d(0xd3)],_0x18d702[_0x54597d(0xc6)]=_0x2a62cf,_0x36f5bd[_0x54597d(0xd5)](_0x18d702),_0x36f5bd['push']({'Key':_0x4860a5[_0x54597d(0xec)],'Value':new Date()[_0x54597d(0xdc)]()['toString']()});const _0xbc6d45={};_0xbc6d45[_0x54597d(0xf2)]=_0x4860a5[_0x54597d(0xf3)];const _0x37c069=new AWS[(_0x54597d(0xc0))](_0xbc6d45),_0x116fe=await fs[_0x54597d(0xc7)](path[_0x54597d(0xc1)](__dirname,'..',_0x4860a5[_0x54597d(0xeb)],_0x4860a5[_0x54597d(0xc4)]),_0x4860a5[_0x54597d(0xdd)]),_0x387e62={};_0x387e62['schema']=CLOUDFORMATION_SCHEMA;const _0x3f20ea=yaml[_0x54597d(0xe4)](_0x116fe,_0x387e62);_0x4860a5[_0x54597d(0xca)](addAutoscalerTags,_0x3f20ea,_0x2a62cf,_0x36f5bd);const _0xf425b=JSON[_0x54597d(0xc2)](_0x3f20ea),_0x521c68={};_0x521c68[_0x54597d(0xcc)]=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x2a62cf,_0x521c68[_0x54597d(0xea)]=_0x4860a5['mJYvC'],_0x521c68[_0x54597d(0xd6)]=_0xf425b,_0x521c68[_0x54597d(0xbd)]=[{'ParameterKey':_0x4860a5['PzOsu'],'ParameterValue':_0x2a62cf}],_0x521c68[_0x54597d(0xf0)]=[_0x4860a5[_0x54597d(0xc9)]],_0x521c68['Tags']=_0x36f5bd;const _0x331e99=_0x521c68,_0x3ec0ff=await _0x37c069['createStack'](_0x331e99)[_0x54597d(0xe1)]();logger[_0x54597d(0xf1)](_0x4860a5['KCRaS']);const _0xd77422={};return _0xd77422[_0x54597d(0xcc)]=_0x3ec0ff[_0x54597d(0xc3)],_0x37c069[_0x54597d(0xce)](_0x4860a5[_0x54597d(0xee)],_0xd77422)['promise']();};function a26_0x2229(_0x3d4665,_0x4a0a9c){const _0x2ff6d8=a26_0x2ff6();return a26_0x2229=function(_0x2229eb,_0x20f29b){_0x2229eb=_0x2229eb-0xbd;let _0x2f0265=_0x2ff6d8[_0x2229eb];return _0x2f0265;},a26_0x2229(_0x3d4665,_0x4a0a9c);}function a26_0x2ff6(){const _0x5776e3=['utf-8','108550YdDMaK','load','2010-05-15','1216224TumVOX','152484lXqfSM','Resources','createAutoscalerStack','OnFailure','bLrlN','CueIq','20ALuhDL','rAmgL','browserstack:creationDate','Capabilities','debug','apiVersion','WfieD','Parameters','2fbLgTI','Key','CloudFormation','join','stringify','StackId','AtcLa','autoscaler-role-creation.yaml','Value','readFileAsync','./AWSUtils','PqIBy','VVOpU','DELETE','StackName','stackCreateComplete','waitFor','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','js-yaml-cloudformation-schema','browserstack:cluster','565902gaeAKc','AQmHt','../config/logger','push','TemplateBody','js-yaml','353248FxVpBa','Tags','Properties','8915SDWlbf','valueOf','VtaEu','552378rvMwUT','promisifyAll','ClusterName','promise'];a26_0x2ff6=function(){return _0x5776e3;};return a26_0x2ff6();}