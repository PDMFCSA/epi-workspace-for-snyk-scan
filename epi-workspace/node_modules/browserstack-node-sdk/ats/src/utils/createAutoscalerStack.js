const a26_0x599d35=a26_0x2c40;(function(_0x1768cc,_0x22ed2d){const _0x4a9dfa=a26_0x2c40,_0x35c017=_0x1768cc();while(!![]){try{const _0x16109a=-parseInt(_0x4a9dfa(0x108))/0x1*(-parseInt(_0x4a9dfa(0xe2))/0x2)+-parseInt(_0x4a9dfa(0x109))/0x3+parseInt(_0x4a9dfa(0xdb))/0x4+parseInt(_0x4a9dfa(0xf3))/0x5+-parseInt(_0x4a9dfa(0xfd))/0x6+-parseInt(_0x4a9dfa(0x10a))/0x7*(-parseInt(_0x4a9dfa(0xfa))/0x8)+parseInt(_0x4a9dfa(0xfe))/0x9*(parseInt(_0x4a9dfa(0xf0))/0xa);if(_0x16109a===_0x22ed2d)break;else _0x35c017['push'](_0x35c017['shift']());}catch(_0x4129e4){_0x35c017['push'](_0x35c017['shift']());}}}(a26_0x8a00,0x8b783));const fs=require('fs'),path=require(a26_0x599d35(0xe7)),yaml=require(a26_0x599d35(0xe0)),{CLOUDFORMATION_SCHEMA}=require(a26_0x599d35(0x106)),Promise=require('bluebird'),AWS=require(a26_0x599d35(0xdd))['awsObj'],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require(a26_0x599d35(0x103));function a26_0x2c40(_0x3d87d3,_0x5182a9){const _0x8a00d0=a26_0x8a00();return a26_0x2c40=function(_0x2c4048,_0x3e9ebb){_0x2c4048=_0x2c4048-0xd7;let _0x3375fe=_0x8a00d0[_0x2c4048];return _0x3375fe;},a26_0x2c40(_0x3d87d3,_0x5182a9);}function a26_0x8a00(){const _0x4c9954=['ZflLl','CAPABILITY_NAMED_IAM','load','StackName','Parameters','JIGAn','OnFailure','83916SUffNM','stringify','./AWSUtils','readFileAsync','2010-05-15','js-yaml','Capabilities','1346012oxcnQh','lyIyj','promise','browserstack:cluster','Tags','path','Resources','TemplateBody','ybgki','ClusterName','BSWFm','valueOf','promisifyAll','YfkDI','10kbdXma','utf-8','StackId','462055OantNX','createAutoscalerStack','schema','apiVersion','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','browserstack:creationDate','DELETE','238088tdOfDO','Value','createStack','2613810FkwnQF','9162981gwzqnf','Properties','autoscaler-role-creation.yaml','Okyrc','ONIwd','../config/logger','KqNTf','Key','js-yaml-cloudformation-schema','push','1eixklQ','3374922MUzTuS','77UYeNdO'];a26_0x8a00=function(){return _0x4c9954;};return a26_0x8a00();}Promise[a26_0x599d35(0xee)](fs);const addAutoscalerTags=async(_0x1f839e,_0x199760,_0x3a7d79)=>{const _0x2bffe8=a26_0x599d35;for(const _0x54cf89 in _0x1f839e[_0x2bffe8(0xe8)]){_0x1f839e[_0x2bffe8(0xe8)][_0x54cf89][_0x2bffe8(0xff)]&&_0x1f839e[_0x2bffe8(0xe8)][_0x54cf89][_0x2bffe8(0xff)][_0x2bffe8(0xe6)]&&_0x1f839e[_0x2bffe8(0xe8)][_0x54cf89][_0x2bffe8(0xff)]['Tags'][_0x2bffe8(0x107)](..._0x3a7d79);}};exports[a26_0x599d35(0xf4)]=async _0x239fec=>{const _0x445e56=a26_0x599d35,_0x5c8da0={'YfkDI':_0x445e56(0xe5),'xIhQq':_0x445e56(0xf8),'GkZCc':_0x445e56(0xdf),'Okyrc':'templates','KqNTf':_0x445e56(0x100),'ONIwd':_0x445e56(0xf1),'ZflLl':function(_0x4c27d3,_0x21b390,_0x2c35d3,_0xd95831){return _0x4c27d3(_0x21b390,_0x2c35d3,_0xd95831);},'JIGAn':_0x445e56(0xf9),'OvtdE':_0x445e56(0xeb),'ybgki':_0x445e56(0x10c),'BSWFm':_0x445e56(0xf7),'lyIyj':'stackCreateComplete'},_0x383d36=COMMON_HST_TAGS,_0x2b9951={};_0x2b9951[_0x445e56(0x105)]=_0x5c8da0[_0x445e56(0xef)],_0x2b9951[_0x445e56(0xfb)]=_0x239fec,_0x383d36[_0x445e56(0x107)](_0x2b9951),_0x383d36['push']({'Key':_0x5c8da0['xIhQq'],'Value':new Date()[_0x445e56(0xed)]()['toString']()});const _0x2b61bd={};_0x2b61bd[_0x445e56(0xf6)]=_0x5c8da0['GkZCc'];const _0x2f5b2a=new AWS['CloudFormation'](_0x2b61bd),_0x7ee88e=await fs[_0x445e56(0xde)](path['join'](__dirname,'..',_0x5c8da0[_0x445e56(0x101)],_0x5c8da0[_0x445e56(0x104)]),_0x5c8da0[_0x445e56(0x102)]),_0x5eb43c={};_0x5eb43c[_0x445e56(0xf5)]=CLOUDFORMATION_SCHEMA;const _0xb9000e=yaml[_0x445e56(0x10d)](_0x7ee88e,_0x5eb43c);_0x5c8da0[_0x445e56(0x10b)](addAutoscalerTags,_0xb9000e,_0x239fec,_0x383d36);const _0x1ac89d=JSON[_0x445e56(0xdc)](_0xb9000e),_0x4f3a40={};_0x4f3a40[_0x445e56(0xd7)]=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x239fec,_0x4f3a40[_0x445e56(0xda)]=_0x5c8da0[_0x445e56(0xd9)],_0x4f3a40[_0x445e56(0xe9)]=_0x1ac89d,_0x4f3a40[_0x445e56(0xd8)]=[{'ParameterKey':_0x5c8da0['OvtdE'],'ParameterValue':_0x239fec}],_0x4f3a40[_0x445e56(0xe1)]=[_0x5c8da0[_0x445e56(0xea)]],_0x4f3a40['Tags']=_0x383d36;const _0x13afbe=_0x4f3a40,_0x12c7e4=await _0x2f5b2a[_0x445e56(0xfc)](_0x13afbe)[_0x445e56(0xe4)]();logger['debug'](_0x5c8da0[_0x445e56(0xec)]);const _0x53590a={};return _0x53590a['StackName']=_0x12c7e4[_0x445e56(0xf2)],_0x2f5b2a['waitFor'](_0x5c8da0[_0x445e56(0xe3)],_0x53590a)[_0x445e56(0xe4)]();};