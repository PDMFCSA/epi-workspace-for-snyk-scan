const a26_0x49413f=a26_0x58a7;(function(_0x15cdcb,_0x15953c){const _0x57e904=a26_0x58a7,_0x17d38b=_0x15cdcb();while(!![]){try{const _0x24f82b=-parseInt(_0x57e904(0xa1))/0x1+parseInt(_0x57e904(0xbb))/0x2+parseInt(_0x57e904(0xb6))/0x3+-parseInt(_0x57e904(0xad))/0x4+-parseInt(_0x57e904(0xb4))/0x5*(-parseInt(_0x57e904(0xbd))/0x6)+parseInt(_0x57e904(0xa9))/0x7*(-parseInt(_0x57e904(0xa0))/0x8)+-parseInt(_0x57e904(0xaa))/0x9;if(_0x24f82b===_0x15953c)break;else _0x17d38b['push'](_0x17d38b['shift']());}catch(_0x4333b3){_0x17d38b['push'](_0x17d38b['shift']());}}}(a26_0x521d,0xac639));function a26_0x58a7(_0x3ea9b0,_0xe94c82){const _0x521dbb=a26_0x521d();return a26_0x58a7=function(_0x58a7b2,_0x135635){_0x58a7b2=_0x58a7b2-0x9a;let _0x2a54b1=_0x521dbb[_0x58a7b2];return _0x2a54b1;},a26_0x58a7(_0x3ea9b0,_0xe94c82);}const fs=require('fs'),path=require('path'),yaml=require(a26_0x49413f(0xbc)),{CLOUDFORMATION_SCHEMA}=require(a26_0x49413f(0xae)),Promise=require(a26_0x49413f(0xa3)),AWS=require(a26_0x49413f(0xb3))[a26_0x49413f(0xba)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require(a26_0x49413f(0xbf)),{logger}=require('../config/logger');function a26_0x521d(){const _0x457ba8=['90960wSxHEV','196673VKicSq','stringify','bluebird','OnFailure','autoscaler-role-creation.yaml','TemplateBody','HEObY','geJBe','245AVgMgF','7007328hEIxMA','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','valueOf','1239480QDTRzY','js-yaml-cloudformation-schema','readFileAsync','browserstack:creationDate','tRUee','Parameters','./AWSUtils','830zeQXHU','join','4217580NEBViE','browserstack:cluster','stackCreateComplete','AQYUd','awsObj','1352792dnRaIK','js-yaml','11094lztXFr','xhzBl','../config/constants','promise','StackName','push','DELETE','templates','Resources','load','schema','Tags','2010-05-15','CloudFormation','zpfXq','StackId','Properties','usouY','Value','bjbPi','debug','utf-8','CAPABILITY_NAMED_IAM','createStack'];a26_0x521d=function(){return _0x457ba8;};return a26_0x521d();}Promise['promisifyAll'](fs);const addAutoscalerTags=async(_0x11ab4a,_0x146eb,_0x43d9c3)=>{const _0x4741a1=a26_0x49413f;for(const _0x52ebf0 in _0x11ab4a[_0x4741a1(0xc5)]){_0x11ab4a[_0x4741a1(0xc5)][_0x52ebf0][_0x4741a1(0xcd)]&&_0x11ab4a[_0x4741a1(0xc5)][_0x52ebf0]['Properties'][_0x4741a1(0xc8)]&&_0x11ab4a[_0x4741a1(0xc5)][_0x52ebf0][_0x4741a1(0xcd)]['Tags'][_0x4741a1(0xc2)](..._0x43d9c3);}};exports['createAutoscalerStack']=async _0x4d4ed4=>{const _0x3537d6=a26_0x49413f,_0x541a25={'tRUee':_0x3537d6(0xb7),'zpfXq':_0x3537d6(0xb0),'xhzBl':_0x3537d6(0xc9),'HEObY':_0x3537d6(0xc4),'bjbPi':_0x3537d6(0xa5),'Xzddm':_0x3537d6(0x9d),'usouY':function(_0xe75d35,_0x4d852b,_0x4202eb,_0x4e0445){return _0xe75d35(_0x4d852b,_0x4202eb,_0x4e0445);},'geJBe':_0x3537d6(0xc3),'AQYUd':'ClusterName','WMydW':_0x3537d6(0x9e),'pcBbm':_0x3537d6(0xab),'tplyw':_0x3537d6(0xb8)},_0x39ecde=COMMON_HST_TAGS,_0x524d56={};_0x524d56['Key']=_0x541a25[_0x3537d6(0xb1)],_0x524d56[_0x3537d6(0x9a)]=_0x4d4ed4,_0x39ecde[_0x3537d6(0xc2)](_0x524d56),_0x39ecde[_0x3537d6(0xc2)]({'Key':_0x541a25[_0x3537d6(0xcb)],'Value':new Date()[_0x3537d6(0xac)]()['toString']()});const _0x4bf6e7={};_0x4bf6e7['apiVersion']=_0x541a25[_0x3537d6(0xbe)];const _0x139a66=new AWS[(_0x3537d6(0xca))](_0x4bf6e7),_0x2b2f86=await fs[_0x3537d6(0xaf)](path[_0x3537d6(0xb5)](__dirname,'..',_0x541a25[_0x3537d6(0xa7)],_0x541a25[_0x3537d6(0x9b)]),_0x541a25['Xzddm']),_0x10836f={};_0x10836f[_0x3537d6(0xc7)]=CLOUDFORMATION_SCHEMA;const _0x21f651=yaml[_0x3537d6(0xc6)](_0x2b2f86,_0x10836f);_0x541a25[_0x3537d6(0xce)](addAutoscalerTags,_0x21f651,_0x4d4ed4,_0x39ecde);const _0x462e61=JSON[_0x3537d6(0xa2)](_0x21f651),_0x4bb87e={};_0x4bb87e[_0x3537d6(0xc1)]=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x4d4ed4,_0x4bb87e[_0x3537d6(0xa4)]=_0x541a25[_0x3537d6(0xa8)],_0x4bb87e[_0x3537d6(0xa6)]=_0x462e61,_0x4bb87e[_0x3537d6(0xb2)]=[{'ParameterKey':_0x541a25[_0x3537d6(0xb9)],'ParameterValue':_0x4d4ed4}],_0x4bb87e['Capabilities']=[_0x541a25['WMydW']],_0x4bb87e[_0x3537d6(0xc8)]=_0x39ecde;const _0x4dd460=_0x4bb87e,_0x202ef6=await _0x139a66[_0x3537d6(0x9f)](_0x4dd460)[_0x3537d6(0xc0)]();logger[_0x3537d6(0x9c)](_0x541a25['pcBbm']);const _0x393e60={};return _0x393e60[_0x3537d6(0xc1)]=_0x202ef6[_0x3537d6(0xcc)],_0x139a66['waitFor'](_0x541a25['tplyw'],_0x393e60)['promise']();};