const a26_0x2515d9=a26_0x7617;(function(_0xe7af33,_0x28562b){const _0x4583f6=a26_0x7617,_0x9b8ade=_0xe7af33();while(!![]){try{const _0x293254=-parseInt(_0x4583f6(0x9f))/0x1+-parseInt(_0x4583f6(0x8b))/0x2+-parseInt(_0x4583f6(0x8a))/0x3*(-parseInt(_0x4583f6(0x8e))/0x4)+parseInt(_0x4583f6(0x98))/0x5+-parseInt(_0x4583f6(0x94))/0x6+parseInt(_0x4583f6(0x95))/0x7+parseInt(_0x4583f6(0x86))/0x8*(parseInt(_0x4583f6(0x9c))/0x9);if(_0x293254===_0x28562b)break;else _0x9b8ade['push'](_0x9b8ade['shift']());}catch(_0x175ace){_0x9b8ade['push'](_0x9b8ade['shift']());}}}(a26_0x15da,0xec060));const fs=require('fs'),path=require('path'),yaml=require(a26_0x2515d9(0x96)),{CLOUDFORMATION_SCHEMA}=require(a26_0x2515d9(0xad)),Promise=require('bluebird'),AWS=require('./AWSUtils')[a26_0x2515d9(0x84)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require(a26_0x2515d9(0x82));function a26_0x15da(){const _0xf9c1f6=['browserstack:creationDate','8XbGnwZ','Parameters','schema','promise','9sqxhSP','1265096iHVPCa','heimp','ClusterName','1731732eEASVa','load','VXiGN','DELETE','utf-8','Value','8963298UqHbSd','8708609XZFliq','js-yaml','YqyNf','4763170ZmfubO','lOuSM','valueOf','Properties','4910886TkAQuo','ZTdWM','bLDrM','947991wRCTSa','TemplateBody','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','templates','createAutoscalerStack','push','CAPABILITY_NAMED_IAM','readFileAsync','Tags','Key','join','StackId','autoscaler-role-creation.yaml','OnFailure','js-yaml-cloudformation-schema','Capabilities','Amjax','Resources','StackName','../config/logger','xrtZw','awsObj'];a26_0x15da=function(){return _0xf9c1f6;};return a26_0x15da();}Promise['promisifyAll'](fs);function a26_0x7617(_0x4148af,_0x49e970){const _0x15da61=a26_0x15da();return a26_0x7617=function(_0x761789,_0x3d78ec){_0x761789=_0x761789-0x82;let _0x1151a4=_0x15da61[_0x761789];return _0x1151a4;},a26_0x7617(_0x4148af,_0x49e970);}const addAutoscalerTags=async(_0x1c3e47,_0x19fb07,_0x109fd8)=>{const _0x409e88=a26_0x2515d9;for(const _0x289e66 in _0x1c3e47['Resources']){_0x1c3e47['Resources'][_0x289e66][_0x409e88(0x9b)]&&_0x1c3e47['Resources'][_0x289e66][_0x409e88(0x9b)]['Tags']&&_0x1c3e47[_0x409e88(0xb0)][_0x289e66][_0x409e88(0x9b)]['Tags'][_0x409e88(0xa4)](..._0x109fd8);}};exports[a26_0x2515d9(0xa3)]=async _0x982814=>{const _0x1ba713=a26_0x2515d9,_0x5bfe5d={'bLDrM':'browserstack:cluster','lOuSM':_0x1ba713(0x85),'eXgFO':'2010-05-15','awwFL':_0x1ba713(0xa2),'VXiGN':_0x1ba713(0xab),'YqyNf':_0x1ba713(0x92),'Amjax':function(_0x565a94,_0x3807ac,_0x21be21,_0x2c481a){return _0x565a94(_0x3807ac,_0x21be21,_0x2c481a);},'wGAqc':_0x1ba713(0x91),'ZTdWM':_0x1ba713(0x8d),'heimp':_0x1ba713(0xa5),'nDuPl':_0x1ba713(0xa1),'xrtZw':'stackCreateComplete'},_0x22fb1d=COMMON_HST_TAGS,_0x38d120={};_0x38d120[_0x1ba713(0xa8)]=_0x5bfe5d[_0x1ba713(0x9e)],_0x38d120[_0x1ba713(0x93)]=_0x982814,_0x22fb1d['push'](_0x38d120),_0x22fb1d[_0x1ba713(0xa4)]({'Key':_0x5bfe5d[_0x1ba713(0x99)],'Value':new Date()[_0x1ba713(0x9a)]()['toString']()});const _0x2025e3={};_0x2025e3['apiVersion']=_0x5bfe5d['eXgFO'];const _0x1c76d6=new AWS['CloudFormation'](_0x2025e3),_0x31eacf=await fs[_0x1ba713(0xa6)](path[_0x1ba713(0xa9)](__dirname,'..',_0x5bfe5d['awwFL'],_0x5bfe5d[_0x1ba713(0x90)]),_0x5bfe5d[_0x1ba713(0x97)]),_0x575ad7={};_0x575ad7[_0x1ba713(0x88)]=CLOUDFORMATION_SCHEMA;const _0xe21492=yaml[_0x1ba713(0x8f)](_0x31eacf,_0x575ad7);_0x5bfe5d[_0x1ba713(0xaf)](addAutoscalerTags,_0xe21492,_0x982814,_0x22fb1d);const _0x4f1ce7=JSON['stringify'](_0xe21492),_0x22f698={};_0x22f698[_0x1ba713(0xb1)]=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x982814,_0x22f698[_0x1ba713(0xac)]=_0x5bfe5d['wGAqc'],_0x22f698[_0x1ba713(0xa0)]=_0x4f1ce7,_0x22f698[_0x1ba713(0x87)]=[{'ParameterKey':_0x5bfe5d[_0x1ba713(0x9d)],'ParameterValue':_0x982814}],_0x22f698[_0x1ba713(0xae)]=[_0x5bfe5d[_0x1ba713(0x8c)]],_0x22f698[_0x1ba713(0xa7)]=_0x22fb1d;const _0x730ca7=_0x22f698,_0x1c5549=await _0x1c76d6['createStack'](_0x730ca7)[_0x1ba713(0x89)]();logger['debug'](_0x5bfe5d['nDuPl']);const _0x44894c={};return _0x44894c['StackName']=_0x1c5549[_0x1ba713(0xaa)],_0x1c76d6['waitFor'](_0x5bfe5d[_0x1ba713(0x83)],_0x44894c)[_0x1ba713(0x89)]();};