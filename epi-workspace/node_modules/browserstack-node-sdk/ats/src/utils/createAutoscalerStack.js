const a26_0x5116f6=a26_0x3d96;(function(_0xcecef6,_0x499b9b){const _0xc17b0f=a26_0x3d96,_0x76f70=_0xcecef6();while(!![]){try{const _0x5661f7=parseInt(_0xc17b0f(0x147))/0x1*(parseInt(_0xc17b0f(0x16f))/0x2)+parseInt(_0xc17b0f(0x145))/0x3+-parseInt(_0xc17b0f(0x146))/0x4+parseInt(_0xc17b0f(0x144))/0x5*(parseInt(_0xc17b0f(0x16c))/0x6)+-parseInt(_0xc17b0f(0x169))/0x7+-parseInt(_0xc17b0f(0x143))/0x8+parseInt(_0xc17b0f(0x173))/0x9;if(_0x5661f7===_0x499b9b)break;else _0x76f70['push'](_0x76f70['shift']());}catch(_0x44818d){_0x76f70['push'](_0x76f70['shift']());}}}(a26_0x5531,0x33c5c));function a26_0x3d96(_0xe253d4,_0x559849){const _0x55314f=a26_0x5531();return a26_0x3d96=function(_0x3d96ed,_0x54ac53){_0x3d96ed=_0x3d96ed-0x13d;let _0xfd4b21=_0x55314f[_0x3d96ed];return _0xfd4b21;},a26_0x3d96(_0xe253d4,_0x559849);}const fs=require('fs'),path=require(a26_0x5116f6(0x159)),yaml=require(a26_0x5116f6(0x14a)),{CLOUDFORMATION_SCHEMA}=require(a26_0x5116f6(0x14c)),Promise=require(a26_0x5116f6(0x154)),AWS=require('./AWSUtils')[a26_0x5116f6(0x141)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require(a26_0x5116f6(0x15b)),{logger}=require(a26_0x5116f6(0x153));Promise[a26_0x5116f6(0x14f)](fs);function a26_0x5531(){const _0x498ab6=['Tags','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','promisifyAll','debug','wMKyV','browserstack:creationDate','../config/logger','bluebird','TemplateBody','ClusterName','toString','templates','path','promise','../config/constants','Properties','krSay','push','lYmIB','2010-05-15','LITDG','utf-8','tbqGo','ZwOZS','StackId','waitFor','UIbTY','OnFailure','457667XpNvef','Parameters','stackCreateComplete','78nTTdRd','browserstack:cluster','autoscaler-role-creation.yaml','2txUUcH','readFileAsync','Key','createStack','3921633tCzyEK','thhAa','load','CloudFormation','Resources','stringify','Capabilities','awsObj','lYiPS','2990568SaaZtC','70645vfXdsO','779169xpFceg','982388WWKxMb','17722AKcdrm','StackName','CAPABILITY_NAMED_IAM','js-yaml','schema','js-yaml-cloudformation-schema'];a26_0x5531=function(){return _0x498ab6;};return a26_0x5531();}const addAutoscalerTags=async(_0x5ea590,_0x520226,_0x3a6a65)=>{const _0x148a96=a26_0x5116f6;for(const _0x3527ba in _0x5ea590['Resources']){_0x5ea590[_0x148a96(0x13e)][_0x3527ba][_0x148a96(0x15c)]&&_0x5ea590['Resources'][_0x3527ba][_0x148a96(0x15c)]['Tags']&&_0x5ea590[_0x148a96(0x13e)][_0x3527ba]['Properties'][_0x148a96(0x14d)]['push'](..._0x3a6a65);}};exports['createAutoscalerStack']=async _0x1eaeae=>{const _0x40628d=a26_0x5116f6,_0x2da131={'atJVp':_0x40628d(0x16d),'lYmIB':_0x40628d(0x152),'LITDG':_0x40628d(0x160),'tbqGo':_0x40628d(0x158),'UIbTY':_0x40628d(0x16e),'krSay':_0x40628d(0x162),'JrYew':function(_0x4b72cd,_0x37053a,_0x27c12d,_0xbd48c6){return _0x4b72cd(_0x37053a,_0x27c12d,_0xbd48c6);},'thhAa':'DELETE','wMKyV':_0x40628d(0x156),'lYiPS':_0x40628d(0x149),'wUAVd':_0x40628d(0x14e),'ZwOZS':_0x40628d(0x16b)},_0x39e063=COMMON_HST_TAGS,_0x500209={};_0x500209[_0x40628d(0x171)]=_0x2da131['atJVp'],_0x500209['Value']=_0x1eaeae,_0x39e063[_0x40628d(0x15e)](_0x500209),_0x39e063[_0x40628d(0x15e)]({'Key':_0x2da131[_0x40628d(0x15f)],'Value':new Date()['valueOf']()[_0x40628d(0x157)]()});const _0x4c846b={};_0x4c846b['apiVersion']=_0x2da131[_0x40628d(0x161)];const _0x234fab=new AWS[(_0x40628d(0x13d))](_0x4c846b),_0x3b0668=await fs[_0x40628d(0x170)](path['join'](__dirname,'..',_0x2da131[_0x40628d(0x163)],_0x2da131[_0x40628d(0x167)]),_0x2da131[_0x40628d(0x15d)]),_0x4ef390={};_0x4ef390[_0x40628d(0x14b)]=CLOUDFORMATION_SCHEMA;const _0x50ff73=yaml[_0x40628d(0x175)](_0x3b0668,_0x4ef390);_0x2da131['JrYew'](addAutoscalerTags,_0x50ff73,_0x1eaeae,_0x39e063);const _0x3000bb=JSON[_0x40628d(0x13f)](_0x50ff73),_0x5b3b1a={};_0x5b3b1a['StackName']=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x1eaeae,_0x5b3b1a[_0x40628d(0x168)]=_0x2da131[_0x40628d(0x174)],_0x5b3b1a[_0x40628d(0x155)]=_0x3000bb,_0x5b3b1a[_0x40628d(0x16a)]=[{'ParameterKey':_0x2da131[_0x40628d(0x151)],'ParameterValue':_0x1eaeae}],_0x5b3b1a[_0x40628d(0x140)]=[_0x2da131[_0x40628d(0x142)]],_0x5b3b1a[_0x40628d(0x14d)]=_0x39e063;const _0x233123=_0x5b3b1a,_0x37c3f1=await _0x234fab[_0x40628d(0x172)](_0x233123)[_0x40628d(0x15a)]();logger[_0x40628d(0x150)](_0x2da131['wUAVd']);const _0x208bae={};return _0x208bae[_0x40628d(0x148)]=_0x37c3f1[_0x40628d(0x165)],_0x234fab[_0x40628d(0x166)](_0x2da131[_0x40628d(0x164)],_0x208bae)['promise']();};