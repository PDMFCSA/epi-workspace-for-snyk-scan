const a26_0x1ad19a=a26_0x2dd3;(function(_0x2636aa,_0x3c49f0){const _0x59ceda=a26_0x2dd3,_0x2ff304=_0x2636aa();while(!![]){try{const _0x245f8a=-parseInt(_0x59ceda(0x90))/0x1*(parseInt(_0x59ceda(0x79))/0x2)+-parseInt(_0x59ceda(0x9a))/0x3*(-parseInt(_0x59ceda(0xa5))/0x4)+parseInt(_0x59ceda(0x9d))/0x5+parseInt(_0x59ceda(0xa8))/0x6*(parseInt(_0x59ceda(0x9f))/0x7)+-parseInt(_0x59ceda(0x89))/0x8+-parseInt(_0x59ceda(0x8a))/0x9+parseInt(_0x59ceda(0x8d))/0xa;if(_0x245f8a===_0x3c49f0)break;else _0x2ff304['push'](_0x2ff304['shift']());}catch(_0x57ae76){_0x2ff304['push'](_0x2ff304['shift']());}}}(a26_0x429d,0xe6d50));const fs=require('fs'),path=require(a26_0x1ad19a(0xa6)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a26_0x1ad19a(0x78)),Promise=require(a26_0x1ad19a(0x8e)),AWS=require(a26_0x1ad19a(0x8f))[a26_0x1ad19a(0x85)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require('../config/logger');Promise[a26_0x1ad19a(0x86)](fs);const addAutoscalerTags=async(_0x37d720,_0x3c03c5,_0x4bd83c)=>{const _0x3c7e47=a26_0x1ad19a;for(const _0x1a1952 in _0x37d720['Resources']){_0x37d720['Resources'][_0x1a1952][_0x3c7e47(0x93)]&&_0x37d720[_0x3c7e47(0x80)][_0x1a1952][_0x3c7e47(0x93)][_0x3c7e47(0x9e)]&&_0x37d720[_0x3c7e47(0x80)][_0x1a1952][_0x3c7e47(0x93)][_0x3c7e47(0x9e)]['push'](..._0x4bd83c);}};function a26_0x2dd3(_0x231a27,_0x1cf13c){const _0x429d91=a26_0x429d();return a26_0x2dd3=function(_0x2dd3b4,_0x484dca){_0x2dd3b4=_0x2dd3b4-0x76;let _0x26cb28=_0x429d91[_0x2dd3b4];return _0x26cb28;},a26_0x2dd3(_0x231a27,_0x1cf13c);}function a26_0x429d(){const _0x25b7c1=['stringify','promise','awsObj','promisifyAll','stackCreateComplete','StackName','1860656GzAlcZ','13170888cmGEyw','Value','Parameters','14205950XMLzcm','bluebird','./AWSUtils','1021ocIZwU','push','toString','Properties','uKqlK','mjnTg','yJESK','templates','Key','KoeJk','6FYffgM','load','UkhkH','4179715olEHYN','Tags','2573669UxeZGN','createStack','schema','join','Capabilities','CAPABILITY_NAMED_IAM','3438608kIZPAv','path','utf-8','6EqoNug','DELETE','apiVersion','js-yaml-cloudformation-schema','3334LGJgHw','MTCCz','Wtogc','StackId','CloudFormation','ClusterName','KNuCc','Resources','browserstack:creationDate','OnFailure'];a26_0x429d=function(){return _0x25b7c1;};return a26_0x429d();}exports['createAutoscalerStack']=async _0x307bc6=>{const _0x4d0e41=a26_0x1ad19a,_0x2e1604={'FOVOK':'browserstack:cluster','MTCCz':_0x4d0e41(0x81),'RuIpx':'2010-05-15','Wtogc':_0x4d0e41(0x97),'yJESK':'autoscaler-role-creation.yaml','KoeJk':_0x4d0e41(0xa7),'UkhkH':function(_0x9141d2,_0x584d9b,_0x342c47,_0x2ff964){return _0x9141d2(_0x584d9b,_0x342c47,_0x2ff964);},'KNuCc':_0x4d0e41(0x76),'mjnTg':_0x4d0e41(0x7e),'jumJz':_0x4d0e41(0xa4),'mWCnC':'Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','uKqlK':_0x4d0e41(0x87)},_0x2155a7=COMMON_HST_TAGS,_0x4f6f68={};_0x4f6f68[_0x4d0e41(0x98)]=_0x2e1604['FOVOK'],_0x4f6f68[_0x4d0e41(0x8b)]=_0x307bc6,_0x2155a7[_0x4d0e41(0x91)](_0x4f6f68),_0x2155a7[_0x4d0e41(0x91)]({'Key':_0x2e1604[_0x4d0e41(0x7a)],'Value':new Date()['valueOf']()[_0x4d0e41(0x92)]()});const _0x3bad38={};_0x3bad38[_0x4d0e41(0x77)]=_0x2e1604['RuIpx'];const _0x196c13=new AWS[(_0x4d0e41(0x7d))](_0x3bad38),_0x53142d=await fs['readFileAsync'](path[_0x4d0e41(0xa2)](__dirname,'..',_0x2e1604[_0x4d0e41(0x7b)],_0x2e1604[_0x4d0e41(0x96)]),_0x2e1604[_0x4d0e41(0x99)]),_0x377e57={};_0x377e57[_0x4d0e41(0xa1)]=CLOUDFORMATION_SCHEMA;const _0x32d226=yaml[_0x4d0e41(0x9b)](_0x53142d,_0x377e57);_0x2e1604[_0x4d0e41(0x9c)](addAutoscalerTags,_0x32d226,_0x307bc6,_0x2155a7);const _0x2d40ff=JSON[_0x4d0e41(0x83)](_0x32d226),_0x538280={};_0x538280[_0x4d0e41(0x88)]=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x307bc6,_0x538280[_0x4d0e41(0x82)]=_0x2e1604[_0x4d0e41(0x7f)],_0x538280['TemplateBody']=_0x2d40ff,_0x538280[_0x4d0e41(0x8c)]=[{'ParameterKey':_0x2e1604[_0x4d0e41(0x95)],'ParameterValue':_0x307bc6}],_0x538280[_0x4d0e41(0xa3)]=[_0x2e1604['jumJz']],_0x538280['Tags']=_0x2155a7;const _0x514e65=_0x538280,_0x1a0b61=await _0x196c13[_0x4d0e41(0xa0)](_0x514e65)[_0x4d0e41(0x84)]();logger['debug'](_0x2e1604['mWCnC']);const _0x1dddf2={};return _0x1dddf2[_0x4d0e41(0x88)]=_0x1a0b61[_0x4d0e41(0x7c)],_0x196c13['waitFor'](_0x2e1604[_0x4d0e41(0x94)],_0x1dddf2)[_0x4d0e41(0x84)]();};