const a26_0x1db583=a26_0xce3a;(function(_0x12dac2,_0x4196c8){const _0x4322cd=a26_0xce3a,_0x394f74=_0x12dac2();while(!![]){try{const _0x539cc0=parseInt(_0x4322cd(0x7e))/0x1*(-parseInt(_0x4322cd(0x9f))/0x2)+parseInt(_0x4322cd(0x7f))/0x3*(parseInt(_0x4322cd(0x81))/0x4)+-parseInt(_0x4322cd(0x8b))/0x5*(-parseInt(_0x4322cd(0x8f))/0x6)+-parseInt(_0x4322cd(0x99))/0x7*(-parseInt(_0x4322cd(0x97))/0x8)+-parseInt(_0x4322cd(0x8c))/0x9*(-parseInt(_0x4322cd(0x76))/0xa)+-parseInt(_0x4322cd(0x9e))/0xb+-parseInt(_0x4322cd(0x9a))/0xc;if(_0x539cc0===_0x4196c8)break;else _0x394f74['push'](_0x394f74['shift']());}catch(_0x725c35){_0x394f74['push'](_0x394f74['shift']());}}}(a26_0x2c93,0xb510a));function a26_0xce3a(_0x3dc8b9,_0x34a6a3){const _0x2c938=a26_0x2c93();return a26_0xce3a=function(_0xce3a5f,_0x55b5f2){_0xce3a5f=_0xce3a5f-0x6f;let _0x25af12=_0x2c938[_0xce3a5f];return _0x25af12;},a26_0xce3a(_0x3dc8b9,_0x34a6a3);}const fs=require('fs'),path=require(a26_0x1db583(0x89)),yaml=require(a26_0x1db583(0x8e)),{CLOUDFORMATION_SCHEMA}=require(a26_0x1db583(0x83)),Promise=require(a26_0x1db583(0x73)),AWS=require(a26_0x1db583(0x78))[a26_0x1db583(0x75)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require('../config/logger');Promise['promisifyAll'](fs);const addAutoscalerTags=async(_0x350bbe,_0x27c1b3,_0xa6a980)=>{const _0x8dd930=a26_0x1db583;for(const _0x10a7f7 in _0x350bbe[_0x8dd930(0xa3)]){_0x350bbe['Resources'][_0x10a7f7]['Properties']&&_0x350bbe[_0x8dd930(0xa3)][_0x10a7f7][_0x8dd930(0x84)][_0x8dd930(0x96)]&&_0x350bbe['Resources'][_0x10a7f7]['Properties'][_0x8dd930(0x96)][_0x8dd930(0x7c)](..._0xa6a980);}};exports[a26_0x1db583(0xa1)]=async _0x456dd5=>{const _0x1a957c=a26_0x1db583,_0x1114b9={'AFMKQ':_0x1a957c(0x88),'QaMCZ':'browserstack:creationDate','WzvMa':'2010-05-15','BbVzQ':_0x1a957c(0xa2),'dZqgz':'autoscaler-role-creation.yaml','vUkGs':_0x1a957c(0x7d),'Madsf':function(_0x54b416,_0x15003a,_0x193f37,_0x425bce){return _0x54b416(_0x15003a,_0x193f37,_0x425bce);},'kvnBL':_0x1a957c(0x90),'bykuX':'ClusterName','VINxP':_0x1a957c(0x9c),'rHsPc':_0x1a957c(0x7b),'sppVU':_0x1a957c(0x98)},_0x53fc2f=COMMON_HST_TAGS,_0x3ee304={};_0x3ee304['Key']=_0x1114b9[_0x1a957c(0x70)],_0x3ee304['Value']=_0x456dd5,_0x53fc2f[_0x1a957c(0x7c)](_0x3ee304),_0x53fc2f[_0x1a957c(0x7c)]({'Key':_0x1114b9[_0x1a957c(0x82)],'Value':new Date()[_0x1a957c(0x86)]()['toString']()});const _0x4da7cb={};_0x4da7cb[_0x1a957c(0x79)]=_0x1114b9[_0x1a957c(0x7a)];const _0x5d7397=new AWS[(_0x1a957c(0x8a))](_0x4da7cb),_0x45f6ee=await fs['readFileAsync'](path[_0x1a957c(0x94)](__dirname,'..',_0x1114b9['BbVzQ'],_0x1114b9[_0x1a957c(0xa0)]),_0x1114b9['vUkGs']),_0x34dfc4={};_0x34dfc4['schema']=CLOUDFORMATION_SCHEMA;const _0x100e02=yaml['load'](_0x45f6ee,_0x34dfc4);_0x1114b9[_0x1a957c(0x91)](addAutoscalerTags,_0x100e02,_0x456dd5,_0x53fc2f);const _0x5d1880=JSON[_0x1a957c(0x74)](_0x100e02),_0x4faa44={};_0x4faa44['StackName']=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x456dd5,_0x4faa44['OnFailure']=_0x1114b9[_0x1a957c(0x6f)],_0x4faa44[_0x1a957c(0x85)]=_0x5d1880,_0x4faa44[_0x1a957c(0x9d)]=[{'ParameterKey':_0x1114b9[_0x1a957c(0x8d)],'ParameterValue':_0x456dd5}],_0x4faa44[_0x1a957c(0x93)]=[_0x1114b9[_0x1a957c(0x92)]],_0x4faa44[_0x1a957c(0x96)]=_0x53fc2f;const _0x56605b=_0x4faa44,_0x123ff1=await _0x5d7397[_0x1a957c(0x71)](_0x56605b)[_0x1a957c(0x95)]();logger[_0x1a957c(0x77)](_0x1114b9[_0x1a957c(0x72)]);const _0xaa3a16={};return _0xaa3a16['StackName']=_0x123ff1[_0x1a957c(0x80)],_0x5d7397[_0x1a957c(0x87)](_0x1114b9[_0x1a957c(0x9b)],_0xaa3a16)['promise']();};function a26_0x2c93(){const _0x1da77c=['bluebird','stringify','awsObj','2885390eoqGVE','debug','./AWSUtils','apiVersion','WzvMa','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','push','utf-8','59HWOunP','435TRBqwX','StackId','18640SKYIBU','QaMCZ','js-yaml-cloudformation-schema','Properties','TemplateBody','valueOf','waitFor','browserstack:cluster','path','CloudFormation','5EVIcQW','45kVuGwQ','bykuX','js-yaml','2820396CcHURb','DELETE','Madsf','VINxP','Capabilities','join','promise','Tags','10156328ifZQdz','stackCreateComplete','7JWjmGo','10121748XclHkZ','sppVU','CAPABILITY_NAMED_IAM','Parameters','11852302rLWlvt','40522UxWgyG','dZqgz','createAutoscalerStack','templates','Resources','kvnBL','AFMKQ','createStack','rHsPc'];a26_0x2c93=function(){return _0x1da77c;};return a26_0x2c93();}