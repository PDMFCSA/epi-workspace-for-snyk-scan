const a26_0x591fc1=a26_0x1d8b;(function(_0x5be397,_0x43b48b){const _0x38f91f=a26_0x1d8b,_0x4d2999=_0x5be397();while(!![]){try{const _0x382db4=parseInt(_0x38f91f(0x195))/0x1*(parseInt(_0x38f91f(0x1a7))/0x2)+-parseInt(_0x38f91f(0x183))/0x3+-parseInt(_0x38f91f(0x19c))/0x4+parseInt(_0x38f91f(0x1b8))/0x5*(-parseInt(_0x38f91f(0x1a0))/0x6)+parseInt(_0x38f91f(0x193))/0x7+parseInt(_0x38f91f(0x1a8))/0x8+parseInt(_0x38f91f(0x1b6))/0x9;if(_0x382db4===_0x43b48b)break;else _0x4d2999['push'](_0x4d2999['shift']());}catch(_0x5f47fe){_0x4d2999['push'](_0x4d2999['shift']());}}}(a26_0x1b1f,0x9b23c));const fs=require('fs'),path=require(a26_0x591fc1(0x18d)),yaml=require(a26_0x591fc1(0x1a2)),{CLOUDFORMATION_SCHEMA}=require(a26_0x591fc1(0x189)),Promise=require(a26_0x591fc1(0x18e)),AWS=require(a26_0x591fc1(0x19e))['awsObj'],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require(a26_0x591fc1(0x187)),{logger}=require('../config/logger');Promise[a26_0x591fc1(0x19f)](fs);function a26_0x1d8b(_0x2e12ac,_0x2a79d7){const _0x1b1f8c=a26_0x1b1f();return a26_0x1d8b=function(_0x1d8bb7,_0x3b0cd8){_0x1d8bb7=_0x1d8bb7-0x180;let _0x37ded7=_0x1b1f8c[_0x1d8bb7];return _0x37ded7;},a26_0x1d8b(_0x2e12ac,_0x2a79d7);}const addAutoscalerTags=async(_0x1638e7,_0x584e1c,_0x1f3bc3)=>{const _0x4a49a1=a26_0x591fc1;for(const _0x597523 in _0x1638e7[_0x4a49a1(0x1ae)]){_0x1638e7['Resources'][_0x597523][_0x4a49a1(0x198)]&&_0x1638e7[_0x4a49a1(0x1ae)][_0x597523][_0x4a49a1(0x198)][_0x4a49a1(0x1ac)]&&_0x1638e7[_0x4a49a1(0x1ae)][_0x597523][_0x4a49a1(0x198)][_0x4a49a1(0x1ac)][_0x4a49a1(0x19b)](..._0x1f3bc3);}};exports[a26_0x591fc1(0x185)]=async _0x43107b=>{const _0x3ad795=a26_0x591fc1,_0x33b88e={'BlLzi':_0x3ad795(0x182),'yNNZp':_0x3ad795(0x188),'VHRLC':_0x3ad795(0x1a1),'xyOAe':_0x3ad795(0x1a5),'vYbzN':_0x3ad795(0x1a4),'itKFo':_0x3ad795(0x1b5),'jWRbf':function(_0x367b41,_0x34ac98,_0x1e6cfb,_0x155693){return _0x367b41(_0x34ac98,_0x1e6cfb,_0x155693);},'yhRpl':_0x3ad795(0x1a6),'VGtaw':_0x3ad795(0x190),'HZYpS':'CAPABILITY_NAMED_IAM','Xztpp':_0x3ad795(0x180),'ugHtO':_0x3ad795(0x1af)},_0x161fb4=COMMON_HST_TAGS,_0x4081bd={};_0x4081bd[_0x3ad795(0x192)]=_0x33b88e[_0x3ad795(0x1ad)],_0x4081bd[_0x3ad795(0x19d)]=_0x43107b,_0x161fb4['push'](_0x4081bd),_0x161fb4[_0x3ad795(0x19b)]({'Key':_0x33b88e[_0x3ad795(0x19a)],'Value':new Date()['valueOf']()[_0x3ad795(0x1b7)]()});const _0x1bb0fb={};_0x1bb0fb[_0x3ad795(0x1b1)]=_0x33b88e[_0x3ad795(0x191)];const _0x20c972=new AWS[(_0x3ad795(0x18b))](_0x1bb0fb),_0x19b87d=await fs[_0x3ad795(0x1aa)](path[_0x3ad795(0x1ab)](__dirname,'..',_0x33b88e['xyOAe'],_0x33b88e[_0x3ad795(0x1b9)]),_0x33b88e[_0x3ad795(0x197)]),_0x361b3d={};_0x361b3d['schema']=CLOUDFORMATION_SCHEMA;const _0x3bd005=yaml['load'](_0x19b87d,_0x361b3d);_0x33b88e[_0x3ad795(0x184)](addAutoscalerTags,_0x3bd005,_0x43107b,_0x161fb4);const _0x444b1c=JSON[_0x3ad795(0x1a3)](_0x3bd005),_0x18e25a={};_0x18e25a[_0x3ad795(0x18c)]=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x43107b,_0x18e25a[_0x3ad795(0x181)]=_0x33b88e[_0x3ad795(0x1b2)],_0x18e25a[_0x3ad795(0x196)]=_0x444b1c,_0x18e25a[_0x3ad795(0x186)]=[{'ParameterKey':_0x33b88e[_0x3ad795(0x18a)],'ParameterValue':_0x43107b}],_0x18e25a[_0x3ad795(0x194)]=[_0x33b88e['HZYpS']],_0x18e25a[_0x3ad795(0x1ac)]=_0x161fb4;const _0x3cb9d6=_0x18e25a,_0x4bf94f=await _0x20c972['createStack'](_0x3cb9d6)[_0x3ad795(0x1a9)]();logger[_0x3ad795(0x199)](_0x33b88e[_0x3ad795(0x1b0)]);const _0x2f84ac={};return _0x2f84ac['StackName']=_0x4bf94f[_0x3ad795(0x1b3)],_0x20c972[_0x3ad795(0x18f)](_0x33b88e[_0x3ad795(0x1b4)],_0x2f84ac)['promise']();};function a26_0x1b1f(){const _0x4349cc=['BlLzi','Resources','stackCreateComplete','Xztpp','apiVersion','yhRpl','StackId','ugHtO','utf-8','15090669bDbrqn','toString','1590195ZMVImh','vYbzN','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','OnFailure','browserstack:cluster','2470968IdBVzn','jWRbf','createAutoscalerStack','Parameters','../config/constants','browserstack:creationDate','js-yaml-cloudformation-schema','VGtaw','CloudFormation','StackName','path','bluebird','waitFor','ClusterName','VHRLC','Key','4774441gCRCEu','Capabilities','95nFfIcQ','TemplateBody','itKFo','Properties','debug','yNNZp','push','4117552UtqJEn','Value','./AWSUtils','promisifyAll','18LzjBRw','2010-05-15','js-yaml','stringify','autoscaler-role-creation.yaml','templates','DELETE','2882kNCmQB','7575312MoIaBy','promise','readFileAsync','join','Tags'];a26_0x1b1f=function(){return _0x4349cc;};return a26_0x1b1f();}