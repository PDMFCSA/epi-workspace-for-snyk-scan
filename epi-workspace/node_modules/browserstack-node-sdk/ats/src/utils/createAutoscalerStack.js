const a26_0xdfa5a3=a26_0x18c0;(function(_0x11d68b,_0x4bf6a1){const _0x435501=a26_0x18c0,_0x1bd734=_0x11d68b();while(!![]){try{const _0x460118=-parseInt(_0x435501(0xb2))/0x1+parseInt(_0x435501(0xc1))/0x2*(-parseInt(_0x435501(0xb1))/0x3)+parseInt(_0x435501(0xad))/0x4+-parseInt(_0x435501(0xb5))/0x5+-parseInt(_0x435501(0xc5))/0x6+parseInt(_0x435501(0xa8))/0x7+-parseInt(_0x435501(0xc8))/0x8*(-parseInt(_0x435501(0xc0))/0x9);if(_0x460118===_0x4bf6a1)break;else _0x1bd734['push'](_0x1bd734['shift']());}catch(_0x4a86c6){_0x1bd734['push'](_0x1bd734['shift']());}}}(a26_0x3b99,0xdb1ed));function a26_0x3b99(){const _0x232470=['utf-8','apiVersion','js-yaml','INLjH','vgflv','Tags','3461388YPjXGw','Value','StackId','join','bluebird','832012ImcFPw','push','StackName','iMkzK','691269xoJqUK','1046335iYiEJm','DELETE','nhGDt','692625Ytxqfc','valueOf','toString','js-yaml-cloudformation-schema','debug','promise','createAutoscalerStack','./AWSUtils','rCdNv','OnFailure','awsObj','25569oDDlDH','14dfvRtr','qDJUN','path','tROjr','5753880EsFDKM','uMQrP','Capabilities','11128afAzQk','templates','load','Resources','Parameters','Properties','fuTlM','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','rRJPa','CloudFormation','waitFor'];a26_0x3b99=function(){return _0x232470;};return a26_0x3b99();}const fs=require('fs'),path=require(a26_0xdfa5a3(0xc3)),yaml=require(a26_0xdfa5a3(0xa4)),{CLOUDFORMATION_SCHEMA}=require(a26_0xdfa5a3(0xb8)),Promise=require(a26_0xdfa5a3(0xac)),AWS=require(a26_0xdfa5a3(0xbc))[a26_0xdfa5a3(0xbf)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require('../config/logger');Promise['promisifyAll'](fs);function a26_0x18c0(_0x18f029,_0x98cc32){const _0x3b99cc=a26_0x3b99();return a26_0x18c0=function(_0x18c0ca,_0x33e113){_0x18c0ca=_0x18c0ca-0xa2;let _0x2ddb8f=_0x3b99cc[_0x18c0ca];return _0x2ddb8f;},a26_0x18c0(_0x18f029,_0x98cc32);}const addAutoscalerTags=async(_0x30a433,_0x20deda,_0x4a7d91)=>{const _0x11d436=a26_0xdfa5a3;for(const _0x11e70e in _0x30a433['Resources']){_0x30a433['Resources'][_0x11e70e][_0x11d436(0xcd)]&&_0x30a433[_0x11d436(0xcb)][_0x11e70e][_0x11d436(0xcd)][_0x11d436(0xa7)]&&_0x30a433['Resources'][_0x11e70e][_0x11d436(0xcd)]['Tags'][_0x11d436(0xae)](..._0x4a7d91);}};exports[a26_0xdfa5a3(0xbb)]=async _0x2041ba=>{const _0x166172=a26_0xdfa5a3,_0x10fd68={'AsugP':'browserstack:cluster','uMQrP':'browserstack:creationDate','rRJPa':'2010-05-15','vgflv':_0x166172(0xc9),'fuTlM':'autoscaler-role-creation.yaml','BxJNs':_0x166172(0xa2),'rCdNv':function(_0x5e2d71,_0x5eb9bb,_0x5dd823,_0x38ac07){return _0x5e2d71(_0x5eb9bb,_0x5dd823,_0x38ac07);},'iMkzK':_0x166172(0xb3),'qDJUN':'ClusterName','tROjr':'CAPABILITY_NAMED_IAM','INLjH':_0x166172(0xcf),'nhGDt':'stackCreateComplete'},_0x3e3b1f=COMMON_HST_TAGS,_0x1ef993={};_0x1ef993['Key']=_0x10fd68['AsugP'],_0x1ef993[_0x166172(0xa9)]=_0x2041ba,_0x3e3b1f[_0x166172(0xae)](_0x1ef993),_0x3e3b1f['push']({'Key':_0x10fd68[_0x166172(0xc6)],'Value':new Date()[_0x166172(0xb6)]()[_0x166172(0xb7)]()});const _0x19136c={};_0x19136c[_0x166172(0xa3)]=_0x10fd68[_0x166172(0xd0)];const _0x2652b8=new AWS[(_0x166172(0xd1))](_0x19136c),_0x5cd3c6=await fs['readFileAsync'](path[_0x166172(0xab)](__dirname,'..',_0x10fd68[_0x166172(0xa6)],_0x10fd68[_0x166172(0xce)]),_0x10fd68['BxJNs']),_0x13a283={};_0x13a283['schema']=CLOUDFORMATION_SCHEMA;const _0x1d4934=yaml[_0x166172(0xca)](_0x5cd3c6,_0x13a283);_0x10fd68[_0x166172(0xbd)](addAutoscalerTags,_0x1d4934,_0x2041ba,_0x3e3b1f);const _0x5b3d9d=JSON['stringify'](_0x1d4934),_0x491ae6={};_0x491ae6[_0x166172(0xaf)]=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x2041ba,_0x491ae6[_0x166172(0xbe)]=_0x10fd68[_0x166172(0xb0)],_0x491ae6['TemplateBody']=_0x5b3d9d,_0x491ae6[_0x166172(0xcc)]=[{'ParameterKey':_0x10fd68[_0x166172(0xc2)],'ParameterValue':_0x2041ba}],_0x491ae6[_0x166172(0xc7)]=[_0x10fd68[_0x166172(0xc4)]],_0x491ae6['Tags']=_0x3e3b1f;const _0x237e9c=_0x491ae6,_0x4f6181=await _0x2652b8['createStack'](_0x237e9c)[_0x166172(0xba)]();logger[_0x166172(0xb9)](_0x10fd68[_0x166172(0xa5)]);const _0x3e5683={};return _0x3e5683[_0x166172(0xaf)]=_0x4f6181[_0x166172(0xaa)],_0x2652b8[_0x166172(0xd2)](_0x10fd68[_0x166172(0xb4)],_0x3e5683)[_0x166172(0xba)]();};