const a26_0x159297=a26_0x2a97;function a26_0x2a97(_0x505df2,_0x2ee785){const _0x4e65e7=a26_0x4e65();return a26_0x2a97=function(_0x2a9702,_0x4566ae){_0x2a9702=_0x2a9702-0xab;let _0x36f31f=_0x4e65e7[_0x2a9702];return _0x36f31f;},a26_0x2a97(_0x505df2,_0x2ee785);}(function(_0x37f351,_0x456059){const _0x4cee70=a26_0x2a97,_0x58e24c=_0x37f351();while(!![]){try{const _0x28f19f=-parseInt(_0x4cee70(0xd2))/0x1+-parseInt(_0x4cee70(0xbb))/0x2+-parseInt(_0x4cee70(0xdf))/0x3*(-parseInt(_0x4cee70(0xdc))/0x4)+parseInt(_0x4cee70(0xdb))/0x5*(-parseInt(_0x4cee70(0xe2))/0x6)+parseInt(_0x4cee70(0xae))/0x7+-parseInt(_0x4cee70(0xbd))/0x8+-parseInt(_0x4cee70(0xbf))/0x9*(-parseInt(_0x4cee70(0xb1))/0xa);if(_0x28f19f===_0x456059)break;else _0x58e24c['push'](_0x58e24c['shift']());}catch(_0x3d85c3){_0x58e24c['push'](_0x58e24c['shift']());}}}(a26_0x4e65,0xcf235));const fs=require('fs'),path=require('path'),yaml=require(a26_0x159297(0xd1)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),Promise=require('bluebird'),AWS=require('./AWSUtils')[a26_0x159297(0xe1)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require(a26_0x159297(0xc1)),{logger}=require(a26_0x159297(0xb3));Promise[a26_0x159297(0xb8)](fs);function a26_0x4e65(){const _0x444b54=['stringify','1304008tYFUUa','OYVsX','12815744FCTMFF','StackId','72IhfRbk','Value','../config/constants','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','TemplateBody','CAPABILITY_NAMED_IAM','YLfoK','OnFailure','schema','Resources','duhpl','browserstack:cluster','tyAgM','createStack','browserstack:creationDate','yXUgR','stackCreateComplete','jWVCb','js-yaml','573480EPWGLY','push','Properties','Tags','skpwJ','debug','2010-05-15','join','waitFor','6415ZoDUUt','59344SgwTXd','Key','DELETE','6gmRxIy','CloudFormation','awsObj','7170CpTMBR','IJzLf','readFileAsync','MmsLr','6007022BYsAPn','Capabilities','toString','5401570PVvDnh','autoscaler-role-creation.yaml','../config/logger','Parameters','createAutoscalerStack','StackName','jiqVJ','promisifyAll','valueOf'];a26_0x4e65=function(){return _0x444b54;};return a26_0x4e65();}const addAutoscalerTags=async(_0x550519,_0x3f8274,_0x58eb5f)=>{const _0x4ad338=a26_0x159297;for(const _0x55e374 in _0x550519['Resources']){_0x550519[_0x4ad338(0xc8)][_0x55e374][_0x4ad338(0xd4)]&&_0x550519['Resources'][_0x55e374][_0x4ad338(0xd4)]['Tags']&&_0x550519['Resources'][_0x55e374]['Properties'][_0x4ad338(0xd5)][_0x4ad338(0xd3)](..._0x58eb5f);}};exports[a26_0x159297(0xb5)]=async _0x40e2ea=>{const _0x3ce917=a26_0x159297,_0x15f7d9={'tyAgM':_0x3ce917(0xca),'jiqVJ':_0x3ce917(0xcd),'jywIg':_0x3ce917(0xd8),'duhpl':'templates','YLfoK':_0x3ce917(0xb2),'Aybiz':'utf-8','OYVsX':function(_0x23571a,_0x5c70a4,_0x5afc1a,_0x1b19f2){return _0x23571a(_0x5c70a4,_0x5afc1a,_0x1b19f2);},'IJzLf':_0x3ce917(0xde),'jWVCb':'ClusterName','skpwJ':_0x3ce917(0xc4),'MmsLr':_0x3ce917(0xc2),'yXUgR':_0x3ce917(0xcf)},_0x3ab976=COMMON_HST_TAGS,_0x5f4304={};_0x5f4304[_0x3ce917(0xdd)]=_0x15f7d9[_0x3ce917(0xcb)],_0x5f4304[_0x3ce917(0xc0)]=_0x40e2ea,_0x3ab976[_0x3ce917(0xd3)](_0x5f4304),_0x3ab976['push']({'Key':_0x15f7d9[_0x3ce917(0xb7)],'Value':new Date()[_0x3ce917(0xb9)]()[_0x3ce917(0xb0)]()});const _0x389261={};_0x389261['apiVersion']=_0x15f7d9['jywIg'];const _0x5314de=new AWS[(_0x3ce917(0xe0))](_0x389261),_0x47f760=await fs[_0x3ce917(0xac)](path[_0x3ce917(0xd9)](__dirname,'..',_0x15f7d9[_0x3ce917(0xc9)],_0x15f7d9[_0x3ce917(0xc5)]),_0x15f7d9['Aybiz']),_0xf351ca={};_0xf351ca[_0x3ce917(0xc7)]=CLOUDFORMATION_SCHEMA;const _0x578e95=yaml['load'](_0x47f760,_0xf351ca);_0x15f7d9[_0x3ce917(0xbc)](addAutoscalerTags,_0x578e95,_0x40e2ea,_0x3ab976);const _0xf7355d=JSON[_0x3ce917(0xba)](_0x578e95),_0x149336={};_0x149336['StackName']=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x40e2ea,_0x149336[_0x3ce917(0xc6)]=_0x15f7d9[_0x3ce917(0xab)],_0x149336[_0x3ce917(0xc3)]=_0xf7355d,_0x149336[_0x3ce917(0xb4)]=[{'ParameterKey':_0x15f7d9[_0x3ce917(0xd0)],'ParameterValue':_0x40e2ea}],_0x149336[_0x3ce917(0xaf)]=[_0x15f7d9[_0x3ce917(0xd6)]],_0x149336[_0x3ce917(0xd5)]=_0x3ab976;const _0x34ca69=_0x149336,_0x1c0dbe=await _0x5314de[_0x3ce917(0xcc)](_0x34ca69)['promise']();logger[_0x3ce917(0xd7)](_0x15f7d9[_0x3ce917(0xad)]);const _0xf1603a={};return _0xf1603a[_0x3ce917(0xb6)]=_0x1c0dbe[_0x3ce917(0xbe)],_0x5314de[_0x3ce917(0xda)](_0x15f7d9[_0x3ce917(0xce)],_0xf1603a)['promise']();};