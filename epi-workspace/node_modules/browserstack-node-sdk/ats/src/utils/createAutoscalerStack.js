const a26_0x5d1b4f=a26_0x41cc;(function(_0x23e6d0,_0x21eefb){const _0x588912=a26_0x41cc,_0x384933=_0x23e6d0();while(!![]){try{const _0x51f55c=parseInt(_0x588912(0x199))/0x1*(-parseInt(_0x588912(0x1ae))/0x2)+-parseInt(_0x588912(0x19a))/0x3*(-parseInt(_0x588912(0x1aa))/0x4)+-parseInt(_0x588912(0x18d))/0x5+parseInt(_0x588912(0x1b0))/0x6*(parseInt(_0x588912(0x187))/0x7)+-parseInt(_0x588912(0x1a9))/0x8*(parseInt(_0x588912(0x182))/0x9)+-parseInt(_0x588912(0x19d))/0xa*(parseInt(_0x588912(0x18c))/0xb)+parseInt(_0x588912(0x17e))/0xc;if(_0x51f55c===_0x21eefb)break;else _0x384933['push'](_0x384933['shift']());}catch(_0x4fd93a){_0x384933['push'](_0x384933['shift']());}}}(a26_0x38d3,0x61571));const fs=require('fs'),path=require(a26_0x5d1b4f(0x195)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),Promise=require(a26_0x5d1b4f(0x1b1)),AWS=require(a26_0x5d1b4f(0x198))['awsObj'],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require(a26_0x5d1b4f(0x1a7)),{logger}=require(a26_0x5d1b4f(0x1ac));function a26_0x41cc(_0x45762e,_0x38b55d){const _0x38d391=a26_0x38d3();return a26_0x41cc=function(_0x41cce1,_0x263304){_0x41cce1=_0x41cce1-0x17e;let _0x36ae72=_0x38d391[_0x41cce1];return _0x36ae72;},a26_0x41cc(_0x45762e,_0x38b55d);}Promise[a26_0x5d1b4f(0x19f)](fs);function a26_0x38d3(){const _0x5c036f=['924550ysZHyi','1215030GSFKJQ','Key','liHia','push','join','autoscaler-role-creation.yaml','TemplateBody','GvMfh','path','OfnHl','Parameters','./AWSUtils','785IJsqIu','39003ZOfYGy','Value','readFileAsync','10NXkOXs','DcgIa','promisifyAll','QTLjX','createStack','valueOf','Tags','CAPABILITY_NAMED_IAM','stringify','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','../config/constants','sHpCC','40TBEIxV','232EvmzRE','apiVersion','../config/logger','Resources','206NuRbIC','Properties','282666UiHDvc','bluebird','schema','DELETE','CloudFormation','debug','2341680YWAyld','zTild','browserstack:creationDate','promise','511047bniOAR','stackCreateComplete','createAutoscalerStack','StackId','StackName','21qBAMMd','2010-05-15','PuLjE','waitFor','browserstack:cluster'];a26_0x38d3=function(){return _0x5c036f;};return a26_0x38d3();}const addAutoscalerTags=async(_0x3dee6c,_0x36b11d,_0x503df7)=>{const _0x2e6cbb=a26_0x5d1b4f;for(const _0x179635 in _0x3dee6c[_0x2e6cbb(0x1ad)]){_0x3dee6c[_0x2e6cbb(0x1ad)][_0x179635][_0x2e6cbb(0x1af)]&&_0x3dee6c['Resources'][_0x179635]['Properties'][_0x2e6cbb(0x1a3)]&&_0x3dee6c[_0x2e6cbb(0x1ad)][_0x179635]['Properties'][_0x2e6cbb(0x1a3)]['push'](..._0x503df7);}};exports[a26_0x5d1b4f(0x184)]=async _0x1a0605=>{const _0x4de654=a26_0x5d1b4f,_0x57580e={'pbfIy':_0x4de654(0x18b),'CUhYK':_0x4de654(0x180),'OfnHl':_0x4de654(0x188),'DcgIa':'templates','HxjFn':_0x4de654(0x192),'zTild':'utf-8','liHia':function(_0x78cb71,_0x43b6ca,_0xd80cd1,_0xde8d76){return _0x78cb71(_0x43b6ca,_0xd80cd1,_0xde8d76);},'cPSiN':_0x4de654(0x1b3),'QTLjX':'ClusterName','PuLjE':_0x4de654(0x1a4),'GvMfh':_0x4de654(0x1a6),'sHpCC':_0x4de654(0x183)},_0x129457=COMMON_HST_TAGS,_0x18f324={};_0x18f324[_0x4de654(0x18e)]=_0x57580e['pbfIy'],_0x18f324[_0x4de654(0x19b)]=_0x1a0605,_0x129457[_0x4de654(0x190)](_0x18f324),_0x129457[_0x4de654(0x190)]({'Key':_0x57580e['CUhYK'],'Value':new Date()[_0x4de654(0x1a2)]()['toString']()});const _0x4ef298={};_0x4ef298[_0x4de654(0x1ab)]=_0x57580e[_0x4de654(0x196)];const _0x5eb8c3=new AWS[(_0x4de654(0x1b4))](_0x4ef298),_0x419efb=await fs[_0x4de654(0x19c)](path[_0x4de654(0x191)](__dirname,'..',_0x57580e[_0x4de654(0x19e)],_0x57580e['HxjFn']),_0x57580e[_0x4de654(0x17f)]),_0x45ac93={};_0x45ac93[_0x4de654(0x1b2)]=CLOUDFORMATION_SCHEMA;const _0x340543=yaml['load'](_0x419efb,_0x45ac93);_0x57580e[_0x4de654(0x18f)](addAutoscalerTags,_0x340543,_0x1a0605,_0x129457);const _0x246d9d=JSON[_0x4de654(0x1a5)](_0x340543),_0x409af0={};_0x409af0[_0x4de654(0x186)]=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x1a0605,_0x409af0['OnFailure']=_0x57580e['cPSiN'],_0x409af0[_0x4de654(0x193)]=_0x246d9d,_0x409af0[_0x4de654(0x197)]=[{'ParameterKey':_0x57580e[_0x4de654(0x1a0)],'ParameterValue':_0x1a0605}],_0x409af0['Capabilities']=[_0x57580e[_0x4de654(0x189)]],_0x409af0[_0x4de654(0x1a3)]=_0x129457;const _0x8490c8=_0x409af0,_0x13ac5f=await _0x5eb8c3[_0x4de654(0x1a1)](_0x8490c8)[_0x4de654(0x181)]();logger[_0x4de654(0x1b5)](_0x57580e[_0x4de654(0x194)]);const _0x4783f7={};return _0x4783f7[_0x4de654(0x186)]=_0x13ac5f[_0x4de654(0x185)],_0x5eb8c3[_0x4de654(0x18a)](_0x57580e[_0x4de654(0x1a8)],_0x4783f7)[_0x4de654(0x181)]();};