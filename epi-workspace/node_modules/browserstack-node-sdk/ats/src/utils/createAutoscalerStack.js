const a26_0x147d4d=a26_0x386a;function a26_0x386a(_0xdfd265,_0x4c9970){const _0x5b54bd=a26_0x5b54();return a26_0x386a=function(_0x386a31,_0x289059){_0x386a31=_0x386a31-0xa8;let _0x54f918=_0x5b54bd[_0x386a31];return _0x54f918;},a26_0x386a(_0xdfd265,_0x4c9970);}(function(_0x2f358c,_0x177cd2){const _0x5e896f=a26_0x386a,_0xbc8c41=_0x2f358c();while(!![]){try{const _0x555121=-parseInt(_0x5e896f(0xa9))/0x1*(parseInt(_0x5e896f(0xd8))/0x2)+-parseInt(_0x5e896f(0xb6))/0x3+-parseInt(_0x5e896f(0xc3))/0x4+parseInt(_0x5e896f(0xb9))/0x5*(parseInt(_0x5e896f(0xc4))/0x6)+-parseInt(_0x5e896f(0xac))/0x7+parseInt(_0x5e896f(0xb7))/0x8+parseInt(_0x5e896f(0xd2))/0x9;if(_0x555121===_0x177cd2)break;else _0xbc8c41['push'](_0xbc8c41['shift']());}catch(_0x14f341){_0xbc8c41['push'](_0xbc8c41['shift']());}}}(a26_0x5b54,0x3c6f6));const fs=require('fs'),path=require('path'),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a26_0x147d4d(0xc0)),Promise=require(a26_0x147d4d(0xb8)),AWS=require(a26_0x147d4d(0xaa))[a26_0x147d4d(0xd9)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require(a26_0x147d4d(0xae)),{logger}=require(a26_0x147d4d(0xc1));Promise['promisifyAll'](fs);const addAutoscalerTags=async(_0x47b21f,_0x4b11bc,_0x5cac25)=>{const _0x16cdc6=a26_0x147d4d;for(const _0x519494 in _0x47b21f[_0x16cdc6(0xb4)]){_0x47b21f['Resources'][_0x519494][_0x16cdc6(0xcd)]&&_0x47b21f[_0x16cdc6(0xb4)][_0x519494][_0x16cdc6(0xcd)][_0x16cdc6(0xc5)]&&_0x47b21f[_0x16cdc6(0xb4)][_0x519494][_0x16cdc6(0xcd)][_0x16cdc6(0xc5)][_0x16cdc6(0xbd)](..._0x5cac25);}};function a26_0x5b54(){const _0x101c6c=['Parameters','2213586BXakrb','promise','readFileAsync','createStack','utf-8','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','100038fjQFNT','awsObj','LVYtW','hvvoc','stringify','3rwhIQK','./AWSUtils','valueOf','1907108HBdbom','browserstack:creationDate','../config/constants','TemplateBody','join','2010-05-15','XoKyR','rDkYx','Resources','aVKSR','303699vXEAim','2314472bPNdub','bluebird','995PJoWPf','StackName','createAutoscalerStack','vvyTu','push','DELETE','debug','js-yaml-cloudformation-schema','../config/logger','toString','327160ZVUzgD','9582gIHCAB','Tags','Key','ClusterName','stackCreateComplete','CAPABILITY_NAMED_IAM','schema','mMApg','browserstack:cluster','Properties','bzRRo','Capabilities','templates'];a26_0x5b54=function(){return _0x101c6c;};return a26_0x5b54();}exports[a26_0x147d4d(0xbb)]=async _0x36424b=>{const _0x378872=a26_0x147d4d,_0x178bac={'jvfMs':_0x378872(0xcc),'rDkYx':_0x378872(0xad),'XoKyR':_0x378872(0xb1),'xAPxw':_0x378872(0xd0),'ABKZV':'autoscaler-role-creation.yaml','LVYtW':_0x378872(0xd6),'mMApg':function(_0x2dcba3,_0x50d9f5,_0x42aa1c,_0x2ba5e6){return _0x2dcba3(_0x50d9f5,_0x42aa1c,_0x2ba5e6);},'Qfdih':_0x378872(0xbe),'vvyTu':_0x378872(0xc7),'aVKSR':_0x378872(0xc9),'bzRRo':_0x378872(0xd7),'hvvoc':_0x378872(0xc8)},_0x3564ff=COMMON_HST_TAGS,_0x103382={};_0x103382[_0x378872(0xc6)]=_0x178bac['jvfMs'],_0x103382['Value']=_0x36424b,_0x3564ff[_0x378872(0xbd)](_0x103382),_0x3564ff[_0x378872(0xbd)]({'Key':_0x178bac[_0x378872(0xb3)],'Value':new Date()[_0x378872(0xab)]()[_0x378872(0xc2)]()});const _0x4568e8={};_0x4568e8['apiVersion']=_0x178bac[_0x378872(0xb2)];const _0x243967=new AWS['CloudFormation'](_0x4568e8),_0xf74b4a=await fs[_0x378872(0xd4)](path[_0x378872(0xb0)](__dirname,'..',_0x178bac['xAPxw'],_0x178bac['ABKZV']),_0x178bac[_0x378872(0xda)]),_0x5ecea1={};_0x5ecea1[_0x378872(0xca)]=CLOUDFORMATION_SCHEMA;const _0x34f614=yaml['load'](_0xf74b4a,_0x5ecea1);_0x178bac[_0x378872(0xcb)](addAutoscalerTags,_0x34f614,_0x36424b,_0x3564ff);const _0x486d7e=JSON[_0x378872(0xa8)](_0x34f614),_0x65bd3={};_0x65bd3[_0x378872(0xba)]=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x36424b,_0x65bd3['OnFailure']=_0x178bac['Qfdih'],_0x65bd3[_0x378872(0xaf)]=_0x486d7e,_0x65bd3[_0x378872(0xd1)]=[{'ParameterKey':_0x178bac[_0x378872(0xbc)],'ParameterValue':_0x36424b}],_0x65bd3[_0x378872(0xcf)]=[_0x178bac[_0x378872(0xb5)]],_0x65bd3[_0x378872(0xc5)]=_0x3564ff;const _0x540b7e=_0x65bd3,_0xa9822c=await _0x243967[_0x378872(0xd5)](_0x540b7e)[_0x378872(0xd3)]();logger[_0x378872(0xbf)](_0x178bac[_0x378872(0xce)]);const _0x35572f={};return _0x35572f[_0x378872(0xba)]=_0xa9822c['StackId'],_0x243967['waitFor'](_0x178bac[_0x378872(0xdb)],_0x35572f)[_0x378872(0xd3)]();};