const a24_0x35c5a7=a24_0x31ef;(function(_0x3c7a57,_0x164baf){const _0x514a4e=a24_0x31ef,_0x352f5e=_0x3c7a57();while(!![]){try{const _0x3581d8=parseInt(_0x514a4e(0x163))/0x1*(parseInt(_0x514a4e(0x14b))/0x2)+parseInt(_0x514a4e(0x135))/0x3+parseInt(_0x514a4e(0x158))/0x4+parseInt(_0x514a4e(0x141))/0x5+-parseInt(_0x514a4e(0x13e))/0x6*(-parseInt(_0x514a4e(0x15c))/0x7)+parseInt(_0x514a4e(0x136))/0x8+-parseInt(_0x514a4e(0x12f))/0x9;if(_0x3581d8===_0x164baf)break;else _0x352f5e['push'](_0x352f5e['shift']());}catch(_0x3bda63){_0x352f5e['push'](_0x352f5e['shift']());}}}(a24_0x3143,0x192c2));function a24_0x3143(){const _0xa8932b=['debug','templates','279498lDwuxx','219488TitKDH','StackName','createStack','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','IsLBC','join','schema','Parameters','6qOqTrR','js-yaml','createAutoscalerStack','114340LEuKGp','AOvFG','stringify','valueOf','awsObj','apiVersion','browserstack:creationDate','StackId','Capabilities','promisifyAll','4hGwVnQ','UHpuK','Properties','./AWSUtils','js-yaml-cloudformation-schema','CAPABILITY_NAMED_IAM','promise','ClusterName','TemplateBody','../config/logger','qZeOR','inPKB','waitFor','221464lqOGSN','2010-05-15','LxjKv','DELETE','708904srIXjh','bGNER','Tags','readFileAsync','bGBov','wFjzX','push','41795JGuDhV','CloudFormation','Resources','2525328wncNRN','browserstack:cluster','Value','load'];a24_0x3143=function(){return _0xa8932b;};return a24_0x3143();}const fs=require('fs'),path=require('path'),yaml=require(a24_0x35c5a7(0x13f)),{CLOUDFORMATION_SCHEMA}=require(a24_0x35c5a7(0x14f)),Promise=require('bluebird'),AWS=require(a24_0x35c5a7(0x14e))[a24_0x35c5a7(0x145)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require(a24_0x35c5a7(0x154));function a24_0x31ef(_0x25c797,_0xb1977a){const _0x314366=a24_0x3143();return a24_0x31ef=function(_0x31efb3,_0x54671b){_0x31efb3=_0x31efb3-0x12d;let _0x5b630f=_0x314366[_0x31efb3];return _0x5b630f;},a24_0x31ef(_0x25c797,_0xb1977a);}Promise[a24_0x35c5a7(0x14a)](fs);const addAutoscalerTags=async(_0xd5873b,_0x84f8d,_0x1c5328)=>{const _0x938dff=a24_0x35c5a7;for(const _0x3c240e in _0xd5873b[_0x938dff(0x12e)]){_0xd5873b[_0x938dff(0x12e)][_0x3c240e][_0x938dff(0x14d)]&&_0xd5873b['Resources'][_0x3c240e][_0x938dff(0x14d)][_0x938dff(0x15e)]&&_0xd5873b['Resources'][_0x3c240e][_0x938dff(0x14d)][_0x938dff(0x15e)][_0x938dff(0x162)](..._0x1c5328);}};exports[a24_0x35c5a7(0x140)]=async _0x179c46=>{const _0x2bd4b6=a24_0x35c5a7,_0x370712={'UHpuK':_0x2bd4b6(0x130),'buYMI':_0x2bd4b6(0x147),'IsLBC':_0x2bd4b6(0x159),'qZeOR':_0x2bd4b6(0x134),'inPKB':'autoscaler-role-creation.yaml','wFjzX':'utf-8','LxjKv':function(_0x9c19ef,_0x7c5fe,_0x500123,_0x2070b6){return _0x9c19ef(_0x7c5fe,_0x500123,_0x2070b6);},'bGBov':_0x2bd4b6(0x15b),'bGNER':_0x2bd4b6(0x152),'fbcei':_0x2bd4b6(0x150),'AOvFG':_0x2bd4b6(0x139),'qcGdg':'stackCreateComplete'},_0x172dcb=COMMON_HST_TAGS,_0x41f450={};_0x41f450['Key']=_0x370712[_0x2bd4b6(0x14c)],_0x41f450[_0x2bd4b6(0x131)]=_0x179c46,_0x172dcb[_0x2bd4b6(0x162)](_0x41f450),_0x172dcb['push']({'Key':_0x370712['buYMI'],'Value':new Date()[_0x2bd4b6(0x144)]()['toString']()});const _0x56ac1d={};_0x56ac1d[_0x2bd4b6(0x146)]=_0x370712[_0x2bd4b6(0x13a)];const _0x4642e6=new AWS[(_0x2bd4b6(0x12d))](_0x56ac1d),_0x2c501f=await fs[_0x2bd4b6(0x15f)](path[_0x2bd4b6(0x13b)](__dirname,'..',_0x370712[_0x2bd4b6(0x155)],_0x370712[_0x2bd4b6(0x156)]),_0x370712[_0x2bd4b6(0x161)]),_0x13da39={};_0x13da39[_0x2bd4b6(0x13c)]=CLOUDFORMATION_SCHEMA;const _0x507a5d=yaml[_0x2bd4b6(0x132)](_0x2c501f,_0x13da39);_0x370712[_0x2bd4b6(0x15a)](addAutoscalerTags,_0x507a5d,_0x179c46,_0x172dcb);const _0x22e1c1=JSON[_0x2bd4b6(0x143)](_0x507a5d),_0x161115={};_0x161115[_0x2bd4b6(0x137)]=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x179c46,_0x161115['OnFailure']=_0x370712[_0x2bd4b6(0x160)],_0x161115[_0x2bd4b6(0x153)]=_0x22e1c1,_0x161115[_0x2bd4b6(0x13d)]=[{'ParameterKey':_0x370712[_0x2bd4b6(0x15d)],'ParameterValue':_0x179c46}],_0x161115[_0x2bd4b6(0x149)]=[_0x370712['fbcei']],_0x161115[_0x2bd4b6(0x15e)]=_0x172dcb;const _0x2ff8a4=_0x161115,_0x27f17a=await _0x4642e6[_0x2bd4b6(0x138)](_0x2ff8a4)[_0x2bd4b6(0x151)]();logger[_0x2bd4b6(0x133)](_0x370712[_0x2bd4b6(0x142)]);const _0x4c080a={};return _0x4c080a[_0x2bd4b6(0x137)]=_0x27f17a[_0x2bd4b6(0x148)],_0x4642e6[_0x2bd4b6(0x157)](_0x370712['qcGdg'],_0x4c080a)[_0x2bd4b6(0x151)]();};