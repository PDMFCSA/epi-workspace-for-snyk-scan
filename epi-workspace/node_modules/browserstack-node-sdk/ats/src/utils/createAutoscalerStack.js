const a26_0x3ff2d4=a26_0x4d1d;(function(_0x36726c,_0x12c48a){const _0x447ed0=a26_0x4d1d,_0x139fad=_0x36726c();while(!![]){try{const _0xe6b538=parseInt(_0x447ed0(0x121))/0x1+-parseInt(_0x447ed0(0x113))/0x2*(parseInt(_0x447ed0(0x117))/0x3)+parseInt(_0x447ed0(0x10f))/0x4+-parseInt(_0x447ed0(0x128))/0x5+parseInt(_0x447ed0(0x127))/0x6*(-parseInt(_0x447ed0(0x109))/0x7)+parseInt(_0x447ed0(0x110))/0x8*(parseInt(_0x447ed0(0x120))/0x9)+parseInt(_0x447ed0(0x132))/0xa*(-parseInt(_0x447ed0(0x114))/0xb);if(_0xe6b538===_0x12c48a)break;else _0x139fad['push'](_0x139fad['shift']());}catch(_0x207a0d){_0x139fad['push'](_0x139fad['shift']());}}}(a26_0x197a,0x89119));const fs=require('fs'),path=require(a26_0x3ff2d4(0x11e)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a26_0x3ff2d4(0x124)),Promise=require('bluebird'),AWS=require('./AWSUtils')[a26_0x3ff2d4(0x123)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require(a26_0x3ff2d4(0x100)),{logger}=require('../config/logger');function a26_0x197a(){const _0x531497=['awsObj','js-yaml-cloudformation-schema','Tags','promisifyAll','46164jjlqAI','636635bjsVCa','CloudFormation','VALGY','qMdCj','KYfOm','Resources','browserstack:creationDate','schema','ClusterName','OXjKf','5990ykwqyh','DELETE','Value','../config/constants','kluad','CAPABILITY_NAMED_IAM','stringify','createStack','templates','2010-05-15','KRTZl','promise','413INrEik','StackName','autoscaler-role-creation.yaml','join','createAutoscalerStack','MkBqd','2316116qLLkat','5104104OJaEPG','CuDnO','push','222734nnTkmb','11946bqWAqH','TemplateBody','toString','3hjSiNW','readFileAsync','valueOf','Properties','oFRpf','Key','apiVersion','path','Parameters','9HGpzBF','687545uuQOjF','qgtAb'];a26_0x197a=function(){return _0x531497;};return a26_0x197a();}Promise[a26_0x3ff2d4(0x126)](fs);function a26_0x4d1d(_0x1aa943,_0x15470c){const _0x197a25=a26_0x197a();return a26_0x4d1d=function(_0x4d1dde,_0x220118){_0x4d1dde=_0x4d1dde-0xff;let _0x5dd2ed=_0x197a25[_0x4d1dde];return _0x5dd2ed;},a26_0x4d1d(_0x1aa943,_0x15470c);}const addAutoscalerTags=async(_0x35d873,_0x6566ea,_0x42036c)=>{const _0x27891f=a26_0x3ff2d4;for(const _0x12342f in _0x35d873[_0x27891f(0x12d)]){_0x35d873[_0x27891f(0x12d)][_0x12342f][_0x27891f(0x11a)]&&_0x35d873[_0x27891f(0x12d)][_0x12342f][_0x27891f(0x11a)]['Tags']&&_0x35d873[_0x27891f(0x12d)][_0x12342f][_0x27891f(0x11a)][_0x27891f(0x125)][_0x27891f(0x112)](..._0x42036c);}};exports[a26_0x3ff2d4(0x10d)]=async _0x3f34cc=>{const _0xa82c2d=a26_0x3ff2d4,_0x5bb375={'OXjKf':'browserstack:cluster','uCNXf':_0xa82c2d(0x12e),'qMdCj':_0xa82c2d(0x106),'KRTZl':_0xa82c2d(0x105),'SHeYG':_0xa82c2d(0x10b),'KYfOm':'utf-8','MkBqd':function(_0x487993,_0x4a1037,_0x18a3a6,_0x1c20a4){return _0x487993(_0x4a1037,_0x18a3a6,_0x1c20a4);},'qgtAb':_0xa82c2d(0x133),'VALGY':_0xa82c2d(0x130),'kluad':_0xa82c2d(0x102),'CuDnO':'Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','oFRpf':'stackCreateComplete'},_0x33780c=COMMON_HST_TAGS,_0x55e626={};_0x55e626[_0xa82c2d(0x11c)]=_0x5bb375[_0xa82c2d(0x131)],_0x55e626[_0xa82c2d(0xff)]=_0x3f34cc,_0x33780c[_0xa82c2d(0x112)](_0x55e626),_0x33780c[_0xa82c2d(0x112)]({'Key':_0x5bb375['uCNXf'],'Value':new Date()[_0xa82c2d(0x119)]()[_0xa82c2d(0x116)]()});const _0x55f3cc={};_0x55f3cc[_0xa82c2d(0x11d)]=_0x5bb375[_0xa82c2d(0x12b)];const _0x472313=new AWS[(_0xa82c2d(0x129))](_0x55f3cc),_0x38b3ab=await fs[_0xa82c2d(0x118)](path[_0xa82c2d(0x10c)](__dirname,'..',_0x5bb375[_0xa82c2d(0x107)],_0x5bb375['SHeYG']),_0x5bb375[_0xa82c2d(0x12c)]),_0x4c5bc7={};_0x4c5bc7[_0xa82c2d(0x12f)]=CLOUDFORMATION_SCHEMA;const _0x548a87=yaml['load'](_0x38b3ab,_0x4c5bc7);_0x5bb375[_0xa82c2d(0x10e)](addAutoscalerTags,_0x548a87,_0x3f34cc,_0x33780c);const _0xb37990=JSON[_0xa82c2d(0x103)](_0x548a87),_0x2cd0c3={};_0x2cd0c3[_0xa82c2d(0x10a)]=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x3f34cc,_0x2cd0c3['OnFailure']=_0x5bb375[_0xa82c2d(0x122)],_0x2cd0c3[_0xa82c2d(0x115)]=_0xb37990,_0x2cd0c3[_0xa82c2d(0x11f)]=[{'ParameterKey':_0x5bb375[_0xa82c2d(0x12a)],'ParameterValue':_0x3f34cc}],_0x2cd0c3['Capabilities']=[_0x5bb375[_0xa82c2d(0x101)]],_0x2cd0c3[_0xa82c2d(0x125)]=_0x33780c;const _0x33ee60=_0x2cd0c3,_0xd49247=await _0x472313[_0xa82c2d(0x104)](_0x33ee60)[_0xa82c2d(0x108)]();logger['debug'](_0x5bb375[_0xa82c2d(0x111)]);const _0x107025={};return _0x107025[_0xa82c2d(0x10a)]=_0xd49247['StackId'],_0x472313['waitFor'](_0x5bb375[_0xa82c2d(0x11b)],_0x107025)[_0xa82c2d(0x108)]();};