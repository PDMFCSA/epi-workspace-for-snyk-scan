const a87_0x4967eb=a87_0x302b;(function(_0x309a1c,_0x1e819b){const _0x4d9834=a87_0x302b,_0x1ca64d=_0x309a1c();while(!![]){try{const _0x2d8308=parseInt(_0x4d9834(0x208))/0x1*(-parseInt(_0x4d9834(0x214))/0x2)+parseInt(_0x4d9834(0x1b1))/0x3+parseInt(_0x4d9834(0x1d9))/0x4+parseInt(_0x4d9834(0x1f1))/0x5*(parseInt(_0x4d9834(0x211))/0x6)+-parseInt(_0x4d9834(0x221))/0x7*(parseInt(_0x4d9834(0x236))/0x8)+parseInt(_0x4d9834(0x1e3))/0x9+-parseInt(_0x4d9834(0x1f0))/0xa*(parseInt(_0x4d9834(0x22b))/0xb);if(_0x2d8308===_0x1e819b)break;else _0x1ca64d['push'](_0x1ca64d['shift']());}catch(_0x4e51de){_0x1ca64d['push'](_0x1ca64d['shift']());}}}(a87_0x175c,0x4572f));function a87_0x302b(_0x5b8253,_0x173b42){const _0x175c95=a87_0x175c();return a87_0x302b=function(_0x302b1a,_0x25acde){_0x302b1a=_0x302b1a-0x193;let _0x149042=_0x175c95[_0x302b1a];return _0x149042;},a87_0x302b(_0x5b8253,_0x173b42);}function a87_0x175c(){const _0x2ac547=['getAgentVersion','pjnBQ','test_run','add','Sending\x20trace\x20zip\x20for\x20test:\x20','sVfMq','Sending\x20trace\x20zip\x20to\x20nodeRequest\x20for\x20test:\x20','length','winstonLogger','util','iOiLC','AczvY','NvART','data','../helper','BS_TESTOPS_BUILD_HASHED_ID','ENkAm','getHostInfo','smwtw','CQWdV','BrMSD','AUMeb','vdvaP','YnABK','getGitMetaData','event_type','sendTraceZip','frameworkName','Bearer\x20','gwWgc','password','cJUgA','tUdwD','232866DAwaQV','Processing\x20event\x20-\x20\x27','wCQPK','Data\x20upload\x20to\x20BrowserStack\x20Test\x20Observability\x20failed\x20due\x20to\x20','frameworkVersion','null','../logger','browserstackAutomation','UKMcR','EXCEPTION\x20IN\x20','getUserName','ERROR_SDK_DEPRECATED','JMDYn','GsLhu','HookRunStarted','true','eaEma','RflUk','CBT_Upload','IQjee','CGYpI','bXJjT','start','TXiBM','includes','projectName','mWFFY','getCiInfo','EXCEPTION\x20IN\x20BUILD\x20START\x20EVENT\x20:\x20Missing\x20authentication\x20token','Batch-Queue','dtEbe','success','EXCEPTION\x20IN\x20BUILD\x20START\x20EVENT\x20:\x20','Hook_Start_Upload','mtKPo','./requestQueueHandler','sendEventData','NaSiH','application/json','hook_run','926264tWTzWn','USVkP','status','TJKWk','BROWSERSTACK_RERUN','toString','CREDENTIALS_FOR_CRASH_REPORTING','launch','GaxnV','cwd','3091194BVfipA','HbnVB','format','zRFjg','error','hcWJz','XPskK','QqCFZ','build_hashed_id','BS_TESTOPS_BUILD_COMPLETED','buildDescription','mIiTk','api/v1/builds','530rwrAPp','10qADaJp','message','buildName','allow_screenshots','UHQCP','HLkFV','pendingUploads','logs','env','path','bxszM','response','TestRunSkipped','stringify','niPxy','Kryft','NSHSA','getLogTag','\x20retry\x20runs\x20exceeded','Log_Upload','TestRunStarted','kmmMY','statusText','206533fmiQXN','ERROR_ACCESS_DENIED','eventUrl','Test_Skipped_Upload','BS_TESTOPS_ALLOW_SCREENSHOTS','BROWSERSTACK_TESTHUB_UUID','info','CZFRS','uuid','1201362KlWimm','debug','fpjvi','2LcRlwe','aZLiY','BROWSERSTACK_TESTHUB_JWT','max','Retry\x20runs\x20exceeded','ZPiuV','dzJYA','X-BSTACK-TESTOPS','uploadEventData','waitForBuildStatus','username','sGfhi','Token/buildID\x20is\x20undefined,\x20build\x20creation\x20might\x20have\x20failed','22701myFGYz','nestedKeyValue','JGeKz','api/v1/event','Fkopl','Hook_End_Upload','qDFXX','feaCG','exports','opycX','74261ALprHt','klgnV','false','ExJrx','errorType','json','zVSQZ','Trace\x20zip\x20sent\x20to\x20nodeRequest\x20for\x20test:\x20','jwt','ULyay','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','504VEGYnT','requestQueueHandler','POST'];a87_0x175c=function(){return _0x2ac547;};return a87_0x175c();}const bsSetupHelper=require(a87_0x4967eb(0x19e)),path=require(a87_0x4967eb(0x1fa)),os=require('os'),{debug,getCustomTags,getDefaultHeaders,nodeRequest,asyncAwaitNodeReq,sleep,isTestObservabilitySession,trace}=require('./utils'),{EVENT_ENDPOINT,DEFAULT_WAIT_INTERVAL_FOR_BUILD_STATUS}=require('./constants'),RequestQueueHandler=require(a87_0x4967eb(0x1d4)),logger=require(a87_0x4967eb(0x1b7))[a87_0x4967eb(0x198)],{shouldProcessEventForTesthub,isPercyBuild,getProductMap}=require('../../helpers/testhub/utils'),util=require(a87_0x4967eb(0x199));class SessionHandler{static [a87_0x4967eb(0x237)]=RequestQueueHandler['getInstance']();static async[a87_0x4967eb(0x1e0)](_0x661741,_0x31d899){const _0x5ea5c3=a87_0x4967eb,_0xd81dc9={'YnABK':function(_0x31daaa,_0xef8ca9){return _0x31daaa||_0xef8ca9;},'hcWJz':function(_0x38eeba,_0x31bd14){return _0x38eeba===_0x31bd14;},'Kryft':function(_0x2380be,_0x26c016){return _0x2380be(_0x26c016);},'boMWh':_0x5ea5c3(0x1cd),'opycX':_0x5ea5c3(0x22d),'qDFXX':_0x5ea5c3(0x230),'CZFRS':function(_0x1db395,_0x2b33a2){return _0x1db395(_0x2b33a2);},'klgnV':function(_0x361bd7,_0x335498){return _0x361bd7(_0x335498);},'Vfjfe':function(_0x84e923,_0x5a6b5b,_0x5cfc8f,_0x194a6f,_0x15c838){return _0x84e923(_0x5a6b5b,_0x5cfc8f,_0x194a6f,_0x15c838);},'sGfhi':_0x5ea5c3(0x238),'QqCFZ':_0x5ea5c3(0x1ef),'Wdrmy':function(_0x19d68c,_0x5b5501){return _0x19d68c(_0x5b5501);},'wCQPK':'Build\x20creation\x20successful!','dtEbe':function(_0x48167e){return _0x48167e();},'HLkFV':'true','USVkP':_0x5ea5c3(0x1b6),'UHQCP':function(_0x1f408a,_0xddb06b){return _0x1f408a(_0xddb06b);},'UKMcR':function(_0x1aec34,_0x169ca7){return _0x1aec34(_0x169ca7);},'sVOhE':'ERROR_INVALID_CREDENTIALS','JMDYn':_0x5ea5c3(0x209),'Fkopl':_0x5ea5c3(0x1bc)},_0x44e4e0=bsSetupHelper[_0x5ea5c3(0x1bb)](_0x661741),_0x4f73b8=bsSetupHelper['getAccessKey'](_0x661741),_0x346e3c=_0xd81dc9['YnABK'](_0x44e4e0,'')+':'+_0xd81dc9[_0x5ea5c3(0x1a7)](_0x4f73b8,'');if(_0xd81dc9[_0x5ea5c3(0x1e8)](_0x346e3c,':'))return _0xd81dc9[_0x5ea5c3(0x200)](debug,_0xd81dc9['boMWh']),process[_0x5ea5c3(0x1f9)][_0x5ea5c3(0x1ec)]=_0xd81dc9[_0x5ea5c3(0x22a)],[null,null];let _0x17d7a3=![],_0x16b517=![];if(_0x661741[_0x5ea5c3(0x1b8)]&&_0x661741['app'])_0x16b517=!![];else _0x661741[_0x5ea5c3(0x1b8)]&&(_0x17d7a3=!![]);try{const _0x3d2564={'format':_0xd81dc9[_0x5ea5c3(0x227)],'project_name':_0x661741[_0x5ea5c3(0x1ca)]||'','name':_0x661741[_0x5ea5c3(0x1f3)]||path['basename'](path['resolve'](process[_0x5ea5c3(0x1e2)]())),'build_identifier':_0x661741['buildIdentifier'],'description':_0x661741[_0x5ea5c3(0x1ed)]||'','start_time':new Date()['toISOString'](),'tags':_0xd81dc9['CZFRS'](getCustomTags,_0x661741),'host_info':bsSetupHelper[_0x5ea5c3(0x1a1)](),'ci_info':bsSetupHelper[_0x5ea5c3(0x1cc)](),'build_run_identifier':process[_0x5ea5c3(0x1f9)]['BROWSERSTACK_BUILD_RUN_IDENTIFIER'],'failed_tests_rerun':process[_0x5ea5c3(0x1f9)][_0x5ea5c3(0x1dd)]||![],'version_control':await bsSetupHelper[_0x5ea5c3(0x1a8)](),'observability_version':{'frameworkName':_0x31d899[_0x5ea5c3(0x1ab)],'frameworkVersion':_0x31d899[_0x5ea5c3(0x1b5)],'sdkVersion':bsSetupHelper[_0x5ea5c3(0x239)]()},'product_map':_0xd81dc9[_0x5ea5c3(0x20f)](getProductMap,_0x661741)},_0x57e648={};_0x57e648[_0x5ea5c3(0x21e)]=_0x44e4e0,_0x57e648[_0x5ea5c3(0x1ae)]=_0x4f73b8;const _0x541b76={'auth':_0x57e648,'headers':_0xd81dc9[_0x5ea5c3(0x22c)](getDefaultHeaders,![])},_0x25a8c8=await _0xd81dc9['Vfjfe'](nodeRequest,_0xd81dc9[_0x5ea5c3(0x21f)],_0xd81dc9[_0x5ea5c3(0x1ea)],_0x3d2564,_0x541b76);_0xd81dc9['Wdrmy'](debug,_0xd81dc9[_0x5ea5c3(0x1b3)]);const _0x54f095=_0x25a8c8[_0x5ea5c3(0x19d)];_0x54f095[_0x5ea5c3(0x1eb)]&&(process['env'][_0x5ea5c3(0x20d)]=_0x54f095['build_hashed_id']);if(_0xd81dc9[_0x5ea5c3(0x1cf)](isTestObservabilitySession)){process[_0x5ea5c3(0x1f9)][_0x5ea5c3(0x1ec)]=_0xd81dc9[_0x5ea5c3(0x1f6)];if(_0x54f095[_0x5ea5c3(0x233)]){process[_0x5ea5c3(0x1f9)]['BS_TESTOPS_JWT']=_0x54f095[_0x5ea5c3(0x233)];const _0x5bac25={};_0x5bac25[_0x5ea5c3(0x21e)]=_0x44e4e0,_0x5bac25[_0x5ea5c3(0x1ae)]=_0x4f73b8,process['env'][_0x5ea5c3(0x1df)]=JSON[_0x5ea5c3(0x1fe)](_0x5bac25);}_0x54f095['build_hashed_id']&&(process[_0x5ea5c3(0x1f9)][_0x5ea5c3(0x19f)]=_0x54f095[_0x5ea5c3(0x1eb)]),_0x54f095[_0x5ea5c3(0x1f4)]&&(process[_0x5ea5c3(0x1f9)][_0x5ea5c3(0x20c)]=_0x54f095[_0x5ea5c3(0x1f4)][_0x5ea5c3(0x1de)]());}return[_0x25a8c8[_0x5ea5c3(0x19d)][_0x5ea5c3(0x233)],_0x25a8c8['data'][_0x5ea5c3(0x1eb)],_0x25a8c8['data']['allow_screenshots']];}catch(_0x5ad1ff){process[_0x5ea5c3(0x1f9)][_0x5ea5c3(0x20d)]=_0xd81dc9[_0x5ea5c3(0x1da)],process[_0x5ea5c3(0x1f9)]['BS_TESTOPS_BUILD_COMPLETED']=_0xd81dc9[_0x5ea5c3(0x22a)],process['env']['BS_TESTOPS_JWT']=_0xd81dc9['USVkP'],process[_0x5ea5c3(0x1f9)][_0x5ea5c3(0x19f)]=_0xd81dc9[_0x5ea5c3(0x1da)],process[_0x5ea5c3(0x1f9)][_0x5ea5c3(0x20c)]=_0xd81dc9[_0x5ea5c3(0x1da)];_0x5ad1ff[_0x5ea5c3(0x1fc)]?_0xd81dc9[_0x5ea5c3(0x1f5)](debug,'EXCEPTION\x20IN\x20BUILD\x20START\x20EVENT\x20:\x20'+_0x5ad1ff[_0x5ea5c3(0x1fc)]['status']+'\x20'+_0x5ad1ff[_0x5ea5c3(0x1fc)][_0x5ea5c3(0x207)]+'\x20'+JSON[_0x5ea5c3(0x1fe)](_0x5ad1ff[_0x5ea5c3(0x1fc)][_0x5ea5c3(0x19d)])):_0xd81dc9[_0x5ea5c3(0x1b9)](debug,_0x5ea5c3(0x1d1)+(_0x5ad1ff[_0x5ea5c3(0x1f2)]||_0x5ad1ff));if(_0x5ad1ff&&_0x5ad1ff[_0x5ea5c3(0x1f2)]){const _0x2f3f36=_0x5ad1ff[_0x5ea5c3(0x1f2)];switch(_0x5ad1ff[_0x5ea5c3(0x22f)]){case _0xd81dc9['sVOhE']:logger['error'](_0x2f3f36);break;case _0xd81dc9[_0x5ea5c3(0x1bd)]:logger[_0x5ea5c3(0x20e)](_0x2f3f36);break;case _0xd81dc9[_0x5ea5c3(0x225)]:logger[_0x5ea5c3(0x1e7)](_0x2f3f36);break;default:logger[_0x5ea5c3(0x1e7)](_0x2f3f36);}}else console[_0x5ea5c3(0x20e)](_0x5ea5c3(0x1b4)+_0x5ad1ff);return[null,null,null];}}static async[a87_0x4967eb(0x21d)](){const _0x18a6aa=a87_0x4967eb,_0x410d33={'kmmMY':_0x18a6aa(0x1c0),'AUMeb':_0x18a6aa(0x22d),'TJKWk':function(_0x2f1f8d,_0x1f4c79){return _0x2f1f8d(_0x1f4c79);}},_0x341894=process[_0x18a6aa(0x1f9)]['BS_TESTOPS_BUILD_COMPLETED'];if([_0x410d33[_0x18a6aa(0x206)],_0x410d33[_0x18a6aa(0x1a5)]]['includes'](_0x341894))return;while([_0x410d33[_0x18a6aa(0x206)],_0x410d33[_0x18a6aa(0x1a5)]][_0x18a6aa(0x1c9)](_0x341894)){await _0x410d33[_0x18a6aa(0x1dc)](sleep,DEFAULT_WAIT_INTERVAL_FOR_BUILD_STATUS);}}static[a87_0x4967eb(0x202)](_0x516cd5){const _0x3abc03=a87_0x4967eb,_0x31c1ca={};_0x31c1ca['mtKPo']='Test_Start_Upload',_0x31c1ca['ZPiuV']='Test_End_Upload',_0x31c1ca[_0x3abc03(0x1a3)]=_0x3abc03(0x20b),_0x31c1ca[_0x3abc03(0x1d6)]=_0x3abc03(0x204),_0x31c1ca[_0x3abc03(0x1e6)]=_0x3abc03(0x1d2),_0x31c1ca[_0x3abc03(0x228)]=_0x3abc03(0x226),_0x31c1ca['iOiLC']=_0x3abc03(0x1c3);const _0x29da86=_0x31c1ca,_0x269872={};return _0x269872[_0x3abc03(0x205)]=_0x29da86[_0x3abc03(0x1d3)],_0x269872['TestRunFinished']=_0x29da86[_0x3abc03(0x219)],_0x269872[_0x3abc03(0x1fd)]=_0x29da86[_0x3abc03(0x1a3)],_0x269872['LogCreated']=_0x29da86[_0x3abc03(0x1d6)],_0x269872[_0x3abc03(0x1bf)]=_0x29da86[_0x3abc03(0x1e6)],_0x269872['HookRunFinished']=_0x29da86['feaCG'],_0x269872['CBTSessionCreated']=_0x29da86[_0x3abc03(0x19a)],_0x269872[_0x516cd5[_0x3abc03(0x1a9)]];}static async[a87_0x4967eb(0x1d5)](_0x26f7bb,_0x389526=0x0,_0x34d08b=null){const _0x1d5bf6=a87_0x4967eb,_0x450dc6={'bXJjT':function(_0x425acf,_0x59cc7a){return _0x425acf===_0x59cc7a;},'NSHSA':_0x1d5bf6(0x1aa),'fpjvi':function(_0x3c26e0,_0x2430a5){return _0x3c26e0!==_0x2430a5;},'AjZJB':_0x1d5bf6(0x1d7),'ENkAm':_0x1d5bf6(0x1c0),'TXiBM':function(_0x1756a0,_0x251f21){return _0x1756a0===_0x251f21;},'XPskK':function(_0x5b2a6f,_0x5c3628,_0x456e8e,_0x2590f4,_0x3f377c){return _0x5b2a6f(_0x5c3628,_0x456e8e,_0x2590f4,_0x3f377c);},'BrMSD':_0x1d5bf6(0x238),'NvART':function(_0x3111ef,_0x576208,_0x32e2d2,_0x571841,_0x29af27){return _0x3111ef(_0x576208,_0x32e2d2,_0x571841,_0x29af27);},'IQjee':function(_0x20d192,_0xb422d4){return _0x20d192(_0xb422d4);},'CGYpI':function(_0x38295e,_0x155807){return _0x38295e!==_0x155807;},'pjnBQ':_0x1d5bf6(0x1ce),'zVSQZ':function(_0x3f2ab4,_0x10d2b0){return _0x3f2ab4-_0x10d2b0;},'cJUgA':_0x1d5bf6(0x224),'niPxy':_0x1d5bf6(0x1d0),'JGeKz':function(_0x4c47fb,_0x325a4f){return _0x4c47fb!==_0x325a4f;},'HbnVB':_0x1d5bf6(0x1e7)};_0x450dc6[_0x1d5bf6(0x1c6)](_0x34d08b,_0x450dc6[_0x1d5bf6(0x201)])&&logger[_0x1d5bf6(0x212)](_0x1d5bf6(0x194)+_0x26f7bb[_0x1d5bf6(0x1f8)][0x0]['test_run_uuid']);const _0x5e45c2=await this[_0x1d5bf6(0x202)](_0x26f7bb);let _0x5ca61f=_0x26f7bb,_0x50cf54=EVENT_ENDPOINT;_0x450dc6[_0x1d5bf6(0x213)](_0x34d08b,_0x450dc6['NSHSA'])&&this[_0x1d5bf6(0x237)][_0x1d5bf6(0x1c7)]();const {shouldProceed:_0x3e0024,proceedWithData:_0x112373,proceedWithUrl:_0x1cabf1}=this['requestQueueHandler'][_0x1d5bf6(0x193)](_0x26f7bb);if(!_0x3e0024)return;else _0x112373&&(_0x5ca61f=_0x112373,_0x50cf54=_0x1cabf1);const _0x332d41={};_0x332d41['Authorization']=_0x1d5bf6(0x1ac)+process[_0x1d5bf6(0x1f9)][_0x1d5bf6(0x216)],_0x332d41['Content-Type']=_0x450dc6['AjZJB'],_0x332d41[_0x1d5bf6(0x21b)]=_0x450dc6[_0x1d5bf6(0x1a0)];const _0x33eb29={};_0x33eb29['headers']=_0x332d41;const _0x5cfdad=_0x33eb29;let _0x2e34b1;try{_0x450dc6[_0x1d5bf6(0x1c8)](_0x34d08b,_0x450dc6[_0x1d5bf6(0x201)])?(logger[_0x1d5bf6(0x212)](_0x1d5bf6(0x196)+_0x26f7bb?.[_0x1d5bf6(0x1f8)][0x0]?.['test_run_uuid']),_0x2e34b1=await _0x450dc6[_0x1d5bf6(0x1e9)](asyncAwaitNodeReq,_0x450dc6[_0x1d5bf6(0x1a4)],_0x50cf54,_0x5ca61f,_0x5cfdad),logger[_0x1d5bf6(0x212)](_0x1d5bf6(0x232)+_0x26f7bb?.[_0x1d5bf6(0x1f8)][0x0]?.['test_run_uuid'])):_0x2e34b1=await _0x450dc6[_0x1d5bf6(0x19c)](nodeRequest,_0x450dc6[_0x1d5bf6(0x1a4)],_0x50cf54,_0x5ca61f,_0x5cfdad);if(_0x2e34b1[_0x1d5bf6(0x19d)][_0x1d5bf6(0x1e7)]){const _0x41e977={};_0x41e977[_0x1d5bf6(0x1f2)]=_0x2e34b1[_0x1d5bf6(0x19d)][_0x1d5bf6(0x1e7)];throw _0x41e977;}else{_0x450dc6[_0x1d5bf6(0x1c4)](debug,(_0x450dc6[_0x1d5bf6(0x1c5)](_0x50cf54,this['requestQueueHandler']['eventUrl'])?_0x5e45c2:_0x450dc6[_0x1d5bf6(0x23a)])+'['+_0x389526+']\x20event\x20successful!'),this[_0x1d5bf6(0x237)]['pendingUploads']=Math[_0x1d5bf6(0x217)](0x0,_0x450dc6[_0x1d5bf6(0x231)](this[_0x1d5bf6(0x237)]['pendingUploads'],_0x450dc6[_0x1d5bf6(0x1c8)](_0x50cf54,_0x450dc6['cJUgA'])?0x1:_0x5ca61f[_0x1d5bf6(0x197)]));const _0x3dc0f9={};return _0x3dc0f9[_0x1d5bf6(0x1db)]=_0x450dc6[_0x1d5bf6(0x1ff)],_0x3dc0f9['message']='',_0x3dc0f9;}}catch(_0x4a9870){_0x4a9870['response']?_0x450dc6['IQjee'](debug,_0x1d5bf6(0x1ba)+(_0x450dc6[_0x1d5bf6(0x1c5)](_0x50cf54,this[_0x1d5bf6(0x237)][_0x1d5bf6(0x20a)])?_0x5e45c2:_0x450dc6[_0x1d5bf6(0x23a)])+_0x1d5bf6(0x235)+_0x4a9870[_0x1d5bf6(0x1fc)][_0x1d5bf6(0x1db)]+'\x20'+_0x4a9870[_0x1d5bf6(0x1fc)][_0x1d5bf6(0x207)]+'\x20'+util[_0x1d5bf6(0x1e5)](_0x4a9870[_0x1d5bf6(0x1fc)]['data'])):_0x450dc6[_0x1d5bf6(0x1c4)](debug,'EXCEPTION\x20IN\x20'+(_0x450dc6[_0x1d5bf6(0x223)](_0x50cf54,this[_0x1d5bf6(0x237)][_0x1d5bf6(0x20a)])?_0x5e45c2:_0x450dc6['pjnBQ'])+_0x1d5bf6(0x235)+util[_0x1d5bf6(0x1e5)](_0x4a9870));this['requestQueueHandler'][_0x1d5bf6(0x1f7)]=Math['max'](0x0,_0x450dc6[_0x1d5bf6(0x231)](this[_0x1d5bf6(0x237)][_0x1d5bf6(0x1f7)],_0x450dc6[_0x1d5bf6(0x1c8)](_0x50cf54,_0x450dc6[_0x1d5bf6(0x1af)])?0x1:_0x5ca61f['length']));const _0x368033={};return _0x368033['status']=_0x450dc6[_0x1d5bf6(0x1e4)],_0x368033[_0x1d5bf6(0x1f2)]=_0x4a9870[_0x1d5bf6(0x1f2)]||(_0x4a9870[_0x1d5bf6(0x1fc)]?_0x4a9870[_0x1d5bf6(0x1fc)]['status']+':'+_0x4a9870[_0x1d5bf6(0x1fc)][_0x1d5bf6(0x207)]:_0x4a9870),_0x368033;}}static async['uploadEventData'](_0xa409ec,_0x3171f6=0x0){const _0x390294=a87_0x4967eb,_0x26121f={'GsLhu':function(_0x1eff10,_0x19cbe0){return _0x1eff10+_0x19cbe0;},'ULyay':function(_0xc5f8f5,_0x48f947){return _0xc5f8f5(_0x48f947);},'AMRRt':_0x390294(0x23b),'RflUk':_0x390294(0x210),'tUdwD':_0x390294(0x1d8),'XDcST':function(_0x4da6ef,_0x5bff5e,_0x3f42ff){return _0x4da6ef(_0x5bff5e,_0x3f42ff);},'bxszM':_0x390294(0x21c),'mWFFY':function(_0x299c1d,_0x3b5c8a){return _0x299c1d===_0x3b5c8a;},'gwWgc':function(_0x5570b5,_0x470cbd){return _0x5570b5!==_0x470cbd;},'AczvY':_0x390294(0x1b6),'CnrQU':_0x390294(0x1c0),'aZLiY':function(_0x593b4e){return _0x593b4e();},'smwtw':function(_0x562021,_0x24011f){return _0x562021===_0x24011f;},'vdvaP':function(_0x389701,_0x494447){return _0x389701(_0x494447);},'GaxnV':function(_0x2004d2,_0x2c9418){return _0x2004d2-_0x2c9418;},'mIiTk':_0x390294(0x1e7),'ExJrx':_0x390294(0x220),'iFvTr':function(_0x51b387,_0x15a36d){return _0x51b387>=_0x15a36d;},'LXeKL':function(_0x22730f,_0x3918b7){return _0x22730f!==_0x3918b7;},'sVfMq':function(_0x2f0972,_0x3ae783){return _0x2f0972-_0x3ae783;},'dzJYA':_0x390294(0x218),'eaEma':_0x390294(0x22d),'KNqwV':function(_0x417a4e,_0x18fa69,_0x4bf58c){return _0x417a4e(_0x18fa69,_0x4bf58c);}},_0x54f786=this[_0x390294(0x202)](_0xa409ec);_0x26121f[_0x390294(0x234)](trace,_0x390294(0x1b2)+_0xa409ec['event_type']+'\x27\x20'+(bsSetupHelper[_0x390294(0x222)](_0xa409ec,[_0x26121f['AMRRt'],_0x26121f[_0x390294(0x1c2)]])||bsSetupHelper[_0x390294(0x222)](_0xa409ec,[_0x26121f[_0x390294(0x1b0)],_0x26121f['RflUk']])));if(!_0x26121f['XDcST'](shouldProcessEventForTesthub,_0xa409ec[_0x390294(0x1a9)],_0x26121f[_0x390294(0x1fb)]))return;_0x26121f['mWFFY'](_0x3171f6,0x0)&&process[_0x390294(0x1f9)][_0x390294(0x216)]&&_0x26121f[_0x390294(0x1ad)](process[_0x390294(0x1f9)][_0x390294(0x216)],_0x26121f[_0x390294(0x19b)])&&(this[_0x390294(0x237)]['pendingUploads']+=0x1);if(_0x26121f[_0x390294(0x1cb)](process[_0x390294(0x1f9)][_0x390294(0x1ec)],_0x26121f['CnrQU'])||process['env']['BS_A11Y_JWT']||_0x26121f[_0x390294(0x215)](isPercyBuild)){if(_0x26121f[_0x390294(0x1a2)](process[_0x390294(0x1f9)][_0x390294(0x216)],_0x26121f['AczvY'])){_0x26121f[_0x390294(0x1a6)](debug,_0x390294(0x1ba)+_0x54f786+'\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20missing\x20authentication\x20token'),this['requestQueueHandler']['pendingUploads']=Math['max'](0x0,_0x26121f[_0x390294(0x1e1)](this[_0x390294(0x237)][_0x390294(0x1f7)],0x1));const _0x723939={};return _0x723939[_0x390294(0x1db)]=_0x26121f[_0x390294(0x1ee)],_0x723939[_0x390294(0x1f2)]=_0x26121f[_0x390294(0x22e)],_0x723939;}return await this['sendEventData'](_0xa409ec,_0x3171f6);}else{if(_0x26121f['iFvTr'](_0x3171f6,0x5)){_0x26121f[_0x390294(0x234)](debug,_0x390294(0x1ba)+_0x54f786+'\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20Build\x20Start\x20is\x20not\x20completed\x20and\x20'+_0x54f786+_0x390294(0x203));_0x26121f['LXeKL'](process['env']['BROWSERSTACK_TESTHUB_JWT'],_0x26121f['AczvY'])&&(this[_0x390294(0x237)][_0x390294(0x1f7)]=Math[_0x390294(0x217)](0x0,_0x26121f[_0x390294(0x195)](this['requestQueueHandler']['pendingUploads'],0x1)));const _0x4d0b4d={};return _0x4d0b4d[_0x390294(0x1db)]=_0x26121f[_0x390294(0x1ee)],_0x4d0b4d['message']=_0x26121f[_0x390294(0x21a)],_0x4d0b4d;}else _0x26121f[_0x390294(0x1ad)](process[_0x390294(0x1f9)][_0x390294(0x1ec)],_0x26121f[_0x390294(0x1c1)])&&_0x26121f['KNqwV'](setTimeout,()=>{const _0x3aaa07=_0x390294;this[_0x3aaa07(0x21c)](_0xa409ec,_0x26121f[_0x3aaa07(0x1be)](_0x3171f6,0x1));},0x3e8);}}}module[a87_0x4967eb(0x229)]=SessionHandler;