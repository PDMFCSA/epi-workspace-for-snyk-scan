const a115_0x4a8680=a115_0x28bf;(function(_0x10ea27,_0x243fb7){const _0x19b5d5=a115_0x28bf,_0x218750=_0x10ea27();while(!![]){try{const _0x44a3fc=-parseInt(_0x19b5d5(0xd6))/0x1*(parseInt(_0x19b5d5(0xc5))/0x2)+-parseInt(_0x19b5d5(0xa0))/0x3+-parseInt(_0x19b5d5(0xd1))/0x4*(parseInt(_0x19b5d5(0x9a))/0x5)+-parseInt(_0x19b5d5(0x9f))/0x6*(parseInt(_0x19b5d5(0x99))/0x7)+parseInt(_0x19b5d5(0x95))/0x8+parseInt(_0x19b5d5(0xed))/0x9*(parseInt(_0x19b5d5(0xf4))/0xa)+parseInt(_0x19b5d5(0xe6))/0xb;if(_0x44a3fc===_0x243fb7)break;else _0x218750['push'](_0x218750['shift']());}catch(_0x462a7c){_0x218750['push'](_0x218750['shift']());}}}(a115_0xfc9f,0x211b0));function a115_0x28bf(_0x2ee13f,_0x3386e8){const _0xfc9f59=a115_0xfc9f();return a115_0x28bf=function(_0x28bfcc,_0x31db25){_0x28bfcc=_0x28bfcc-0x8f;let _0x5c58d=_0xfc9f59[_0x28bfcc];return _0x5c58d;},a115_0x28bf(_0x2ee13f,_0x3386e8);}const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require('./constants'),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require('./utils'),{nestedKeyValue}=require(a115_0x4a8680(0xbb)),util=require(a115_0x4a8680(0xdf));class RequestQueueHandler{static ['instance'];[a115_0x4a8680(0xb0)]=0x0;constructor(){const _0x4b21d0=a115_0x4a8680,_0x2fae99={};_0x2fae99[_0x4b21d0(0xe7)]='5|4|2|1|0|6|3',_0x2fae99[_0x4b21d0(0xa3)]=_0x4b21d0(0xd8),_0x2fae99[_0x4b21d0(0xf9)]=_0x4b21d0(0x94),_0x2fae99[_0x4b21d0(0xe8)]=_0x4b21d0(0xcf),_0x2fae99[_0x4b21d0(0xb7)]=_0x4b21d0(0xeb),_0x2fae99[_0x4b21d0(0xe5)]='CBTSessionCreated',_0x2fae99[_0x4b21d0(0xe2)]=_0x4b21d0(0xd4),_0x2fae99[_0x4b21d0(0xcb)]=_0x4b21d0(0xbe),_0x2fae99['yYQWD']='HookRunFinished',_0x2fae99[_0x4b21d0(0xa7)]='TestRunStarted',_0x2fae99[_0x4b21d0(0xde)]='HookRunStarted';const _0x1bd550=_0x2fae99,_0xf8dc0a=_0x1bd550[_0x4b21d0(0xe7)][_0x4b21d0(0xce)]('|');let _0x41d793=0x0;while(!![]){switch(_0xf8dc0a[_0x41d793++]){case'0':this[_0x4b21d0(0xad)]=_0x1bd550[_0x4b21d0(0xa3)];continue;case'1':this[_0x4b21d0(0xa8)]=_0x1bd550[_0x4b21d0(0xf9)];continue;case'2':this[_0x4b21d0(0xa1)]=_0x1bd550[_0x4b21d0(0xe8)];continue;case'3':this[_0x4b21d0(0x9c)]=null;continue;case'4':this[_0x4b21d0(0xe0)]=![];continue;case'5':this['queue']=[];continue;case'6':this['BATCH_EVENT_TYPES']=[_0x1bd550[_0x4b21d0(0xb7)],_0x1bd550[_0x4b21d0(0xe5)],_0x1bd550[_0x4b21d0(0xe2)],_0x1bd550[_0x4b21d0(0xcb)],_0x1bd550['yYQWD'],_0x1bd550[_0x4b21d0(0xa7)],_0x1bd550[_0x4b21d0(0xde)]];continue;}break;}}static[a115_0x4a8680(0xfc)](){const _0x1dc0be=a115_0x4a8680;return!RequestQueueHandler['instance']&&(RequestQueueHandler[_0x1dc0be(0x92)]=new RequestQueueHandler()),RequestQueueHandler[_0x1dc0be(0x92)];}['start']=()=>{const _0x36334c=a115_0x4a8680;!this[_0x36334c(0xe0)]&&(this[_0x36334c(0xe0)]=!![],this['startEventBatchPolling']());};[a115_0x4a8680(0xf7)]=_0x6df514=>{const _0x399b94=a115_0x4a8680,_0x2d8a4e={'TDINJ':function(_0x3ed5bb,_0x4adb02){return _0x3ed5bb===_0x4adb02;},'MFBZQ':_0x399b94(0xb9),'ctPCg':function(_0xd4bea4,_0x84eb3c){return _0xd4bea4>_0x84eb3c;},'JEXZU':'TEST_ATTACHMENT','PcRYS':function(_0x40d1c8,_0x47bdc5){return _0x40d1c8!==_0x47bdc5;},'LEeqr':_0x399b94(0xd4),'TtNFF':function(_0x52eb13,_0x25230c){return _0x52eb13(_0x25230c);},'tFeYf':'Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..'};if(this['BATCH_EVENT_TYPES']['includes'](_0x6df514[_0x399b94(0xba)])){if(_0x6df514[_0x399b94(0xf6)]&&_0x6df514[_0x399b94(0xf6)][0x0]&&_0x2d8a4e['TDINJ'](_0x6df514[_0x399b94(0xf6)][0x0]['kind'],_0x2d8a4e[_0x399b94(0xcd)])){const _0x41a36c={};return _0x41a36c[_0x399b94(0x93)]=!![],_0x41a36c['proceedWithData']=[_0x6df514],_0x41a36c['proceedWithUrl']=this[_0x399b94(0xa8)],_0x41a36c;}if(_0x6df514['logs']&&_0x2d8a4e[_0x399b94(0x97)](_0x6df514['logs'][_0x399b94(0xb3)],0x0)&&_0x2d8a4e[_0x399b94(0x8f)](_0x6df514['logs'][0x0]['kind'],_0x2d8a4e[_0x399b94(0xb6)])&&_0x2d8a4e['PcRYS'](_0x6df514['event_type'],_0x2d8a4e[_0x399b94(0xc6)])){const _0x104352={};return _0x104352['shouldProceed']=!![],_0x104352['proceedWithData']=[_0x6df514],_0x104352[_0x399b94(0xbf)]=this['uploadAttachmentUrl'],_0x104352;}this[_0x399b94(0xe4)][_0x399b94(0xb1)](_0x6df514);let _0xd875e=null;const _0x1e7fd2=this[_0x399b94(0x93)]();_0x1e7fd2&&(_0x2d8a4e[_0x399b94(0xec)](trace,_0x2d8a4e[_0x399b94(0xa6)]),_0xd875e=this[_0x399b94(0xe4)]['slice'](0x0,BATCH_SIZE),this[_0x399b94(0xe4)][_0x399b94(0x90)](0x0,BATCH_SIZE),this['resetEventBatchPolling']());const _0x3b2056={};return _0x3b2056[_0x399b94(0x93)]=_0x1e7fd2,_0x3b2056[_0x399b94(0xea)]=_0xd875e,_0x3b2056[_0x399b94(0xbf)]=this[_0x399b94(0xa1)],_0x3b2056;}const _0x230a45={};return _0x230a45[_0x399b94(0x93)]=!![],_0x230a45;};['shutdown']=async()=>{const _0x195a46=a115_0x4a8680,_0x19029c={'CvKGT':'REMOVING','lrLtR':function(_0x1c359a,_0x10a06b){return _0x1c359a>_0x10a06b;},'pxhvk':'Shutdown-Queue','efWxo':function(_0x25b1a1,_0x2283a9){return _0x25b1a1>_0x2283a9;},'CIztu':function(_0x13d5a5,_0x20156f){return _0x13d5a5(_0x20156f);}};await this[_0x195a46(0xd2)](),this[_0x195a46(0xa9)](_0x19029c[_0x195a46(0xc3)]);while(_0x19029c['lrLtR'](this[_0x195a46(0xe4)][_0x195a46(0xb3)],0x0)){const _0x4f677c=this[_0x195a46(0xe4)][_0x195a46(0xee)](0x0,BATCH_SIZE);this['queue']['splice'](0x0,BATCH_SIZE),await this[_0x195a46(0xef)](this['eventUrl'],_0x19029c[_0x195a46(0xab)],_0x4f677c);}_0x19029c[_0x195a46(0x9b)](this[_0x195a46(0xb0)],0x0)&&_0x19029c[_0x195a46(0xc0)](debug,_0x195a46(0xe9)+this['pendingUploads']);};[a115_0x4a8680(0xef)]=async(_0x423013,_0x4f8b00,_0x47dced)=>{const _0x159afc=a115_0x4a8680,_0x484012={'NQOcr':function(_0x55dce6,_0x146624){return _0x55dce6(_0x146624);},'kvRWU':'utf8','meoQj':function(_0x325555,_0x59691f){return _0x325555(_0x59691f);},'mzKiQ':function(_0x530036){return _0x530036();},'DDLhT':function(_0xa780d5,_0x136c03,_0x18eb18,_0x4fcc77,_0x3845a8){return _0xa780d5(_0x136c03,_0x18eb18,_0x4fcc77,_0x3845a8);},'NKGxE':_0x159afc(0xb5),'McCtK':function(_0x2c1588,_0x1563ae){return _0x2c1588-_0x1563ae;},'EwHQh':function(_0x1fae59,_0xcadf68){return _0x1fae59(_0xcadf68);}};let _0x2ea75a='';try{_0x2ea75a=_0x47dced['map'](_0x3fb240=>'\x27'+_0x3fb240[_0x159afc(0xba)]+'\x27:'+(nestedKeyValue(_0x3fb240,[_0x159afc(0xd0),_0x159afc(0xd9)])||nestedKeyValue(_0x3fb240,[_0x159afc(0xdc),_0x159afc(0xd9)])))[_0x159afc(0xf0)](','),_0x484012['NQOcr'](debug,'Processing\x20batch\x20events\x20for\x20'+_0x4f8b00+_0x159afc(0xdd)+Buffer[_0x159afc(0xa5)](util[_0x159afc(0xd7)]('%j',_0x47dced),_0x484012[_0x159afc(0x9d)])+'\x20bytes.\x20Events\x20are\x20'+_0x2ea75a);}catch(_0x47f37a){_0x484012['meoQj'](debug,'Exception\x20in\x20logging\x20batch\x20events\x20--\x20'+util[_0x159afc(0xd7)](_0x47f37a)+'}');}const _0x548a25={'headers':_0x484012[_0x159afc(0xda)](getDefaultHeaders)};try{const _0x3e6300=await _0x484012[_0x159afc(0xbc)](nodeRequest,_0x484012[_0x159afc(0x98)],_0x423013,_0x47dced,_0x548a25);if(_0x3e6300['data'][_0x159afc(0xbd)]){const _0x292adb={};_0x292adb[_0x159afc(0xf3)]=_0x3e6300['data']['error'];throw _0x292adb;}else _0x484012[_0x159afc(0x9e)](debug,_0x4f8b00+_0x159afc(0xfb)+_0x2ea75a+_0x159afc(0xf8)+util[_0x159afc(0xd7)]('%j',_0x3e6300[_0x159afc(0xc2)])),this[_0x159afc(0xb0)]=Math[_0x159afc(0xd5)](0x0,_0x484012[_0x159afc(0xac)](this['pendingUploads'],_0x47dced[_0x159afc(0xb3)]));}catch(_0x2965da){_0x2965da['response']?_0x484012[_0x159afc(0xae)](debug,_0x159afc(0xaf)+_0x4f8b00+_0x159afc(0xb8)+_0x2965da['response'][_0x159afc(0x91)]+'\x20'+_0x2965da[_0x159afc(0xa4)][_0x159afc(0xf1)]+'\x20'+util[_0x159afc(0xd7)]('%j',_0x2965da['response'])):_0x484012[_0x159afc(0xf2)](debug,_0x159afc(0xaf)+_0x4f8b00+_0x159afc(0xb8)+(_0x2965da[_0x159afc(0xf3)]||_0x2965da)),this[_0x159afc(0xb0)]=Math[_0x159afc(0xd5)](0x0,_0x484012['McCtK'](this['pendingUploads'],_0x47dced['length']));}};[a115_0x4a8680(0xc9)]=()=>{const _0x4d1757=a115_0x4a8680,_0x3358a5={'uePFA':function(_0x5aa88e,_0x2fcd92){return _0x5aa88e>_0x2fcd92;},'eGKAt':function(_0xba37bf,_0x5be4b5){return _0xba37bf(_0x5be4b5);},'zdYgr':_0x4d1757(0xe3),'NuhAy':function(_0x5f21b0,_0x6fd739,_0x5aafe9){return _0x5f21b0(_0x6fd739,_0x5aafe9);}};this[_0x4d1757(0x9c)]=_0x3358a5['NuhAy'](setInterval,async()=>{const _0x4602dc=_0x4d1757;if(_0x3358a5[_0x4602dc(0xca)](this[_0x4602dc(0xe4)]['length'],0x0)){_0x3358a5[_0x4602dc(0xcc)](trace,_0x4602dc(0xc8)+this[_0x4602dc(0xe4)][_0x4602dc(0xb3)]);const _0x26f90d=this[_0x4602dc(0xe4)][_0x4602dc(0xee)](0x0,BATCH_SIZE);this[_0x4602dc(0xe4)][_0x4602dc(0x90)](0x0,BATCH_SIZE),await this[_0x4602dc(0xef)](this[_0x4602dc(0xa1)],_0x3358a5[_0x4602dc(0xdb)],_0x26f90d),_0x3358a5[_0x4602dc(0xcc)](trace,_0x4602dc(0xaa)+this[_0x4602dc(0xe4)][_0x4602dc(0xb3)]);}},BATCH_INTERVAL);};[a115_0x4a8680(0xd3)]=()=>{const _0x45e235=a115_0x4a8680,_0xba4282={};_0xba4282[_0x45e235(0xc4)]=_0x45e235(0xf5);const _0x4997b1=_0xba4282;this[_0x45e235(0xa9)](_0x4997b1['MTMDZ']),this[_0x45e235(0xc9)]();};[a115_0x4a8680(0xa9)]=_0x24609c=>{const _0x31e8cc=a115_0x4a8680,_0x48582b={'afMTq':function(_0x1c38ab,_0x4de2c8){return _0x1c38ab(_0x4de2c8);},'iWCBm':function(_0x42907b,_0x304139){return _0x42907b===_0x304139;},'vMwyP':_0x31e8cc(0x96)};this['pollEventBatchInterval']&&(_0x48582b[_0x31e8cc(0xa2)](clearInterval,this[_0x31e8cc(0x9c)]),this[_0x31e8cc(0x9c)]=null,_0x48582b['iWCBm'](_0x24609c,_0x48582b[_0x31e8cc(0xfa)])&&(this[_0x31e8cc(0xe0)]=![]));};[a115_0x4a8680(0x93)]=()=>{const _0x37b618=a115_0x4a8680,_0x2be0b1={};_0x2be0b1[_0x37b618(0xfd)]=function(_0x5dfe90,_0x38c9d4){return _0x5dfe90>=_0x38c9d4;};const _0x320648=_0x2be0b1;return _0x320648[_0x37b618(0xfd)](this[_0x37b618(0xe4)][_0x37b618(0xb3)],BATCH_SIZE);};async[a115_0x4a8680(0xd2)](_0x170e34=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x230d1e=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x2e9b60=a115_0x4a8680,_0x5b1718={'WbDOk':function(_0x41bbec,_0x1c9eee){return _0x41bbec<=_0x1c9eee;},'xctmP':function(_0x55e9de,_0x2e12a1){return _0x55e9de<=_0x2e12a1;},'HmdUV':function(_0x561a4f,_0x48291b){return _0x561a4f(_0x48291b);},'SdKQo':function(_0x49ae2c,_0x39af9e){return _0x49ae2c-_0x39af9e;}};if(_0x5b1718[_0x2e9b60(0xc1)](this['pendingUploads'],0x0)||_0x5b1718[_0x2e9b60(0xc7)](_0x170e34,0x0))return;return await _0x5b1718[_0x2e9b60(0xb4)](sleep,_0x230d1e),this[_0x2e9b60(0xd2)](_0x5b1718[_0x2e9b60(0xb2)](_0x170e34,_0x230d1e));}}module[a115_0x4a8680(0xe1)]=RequestQueueHandler;function a115_0xfc9f(){const _0x2c6a68=['LEeqr','xctmP','Processing\x20events.\x20Queue\x20Length\x20-\x20','startEventBatchPolling','uePFA','VcNXT','eGKAt','MFBZQ','split','api/v1/batch','test_run','524MOirrS','uploadPending','resetEventBatchPolling','TestRunFinished','max','562ETzLIQ','format','upload-attachments','uuid','mzKiQ','zdYgr','hook_run','.\x20Request\x20Size\x20-\x20','uhnfl','util','started','exports','IRNIS','Interval-Queue','queue','iBfBd','7076476nRMzqK','ETatK','lrwib','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','proceedWithData','LogCreated','TtNFF','221436fWGMda','slice','batchAndPostEvents','join','statusText','NQOcr','message','50hjYRWP','RESETTING','logs','add','\x20--\x20','EGkJa','vMwyP','\x20event\x20successful\x20for\x20events\x20','getInstance','VCvTs','TDINJ','splice','status','instance','shouldProceed','api/v1/screenshots','720144TTdQsa','REMOVING','ctPCg','NKGxE','511aVUlnH','9115FCCXWd','efWxo','pollEventBatchInterval','kvRWU','meoQj','9102bPOWlh','469548vaxRDR','eventUrl','afMTq','SSBDK','response','byteLength','tFeYf','bIKrD','screenshotEventUrl','removeEventBatchPolling','Remaining\x20Queue\x20Length\x20-\x20','pxhvk','McCtK','uploadAttachmentUrl','EwHQh','EXCEPTION\x20IN\x20','pendingUploads','push','SdKQo','length','HmdUV','POST','JEXZU','kdMzj','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','TEST_SCREENSHOT','event_type','../helper','DDLhT','error','TestRunSkipped','proceedWithUrl','CIztu','WbDOk','data','CvKGT','MTMDZ','764uOUegj'];a115_0xfc9f=function(){return _0x2c6a68;};return a115_0xfc9f();}