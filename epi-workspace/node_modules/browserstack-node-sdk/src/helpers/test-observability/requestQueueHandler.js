function a128_0x3f71(_0x491426,_0x191b75){const _0x8a10d7=a128_0x8a10();return a128_0x3f71=function(_0x3f715d,_0x151757){_0x3f715d=_0x3f715d-0xdd;let _0x272388=_0x8a10d7[_0x3f715d];return _0x272388;},a128_0x3f71(_0x491426,_0x191b75);}function a128_0x8a10(){const _0x2eea3b=['GyNTM','statusText','map','Shutdown-Queue','1|4|6|2|3|5|0','RESETTING','wTSeV','FJPmw','MTywJ','HookRunFinished','event_type','gQPsi','RttBF','\x20:\x20','start','kind','getInstance','util','1852xAORkr','pendingUploads','queue','eUsYK','BATCH_EVENT_TYPES','resetEventBatchPolling','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','10BTXlIE','uploadAttachmentUrl','VOyYx','./utils','LZNmo','error','zTYnu','xzzPf','../../bin/utils/constants','1890816GxKGBW','Remaining\x20Queue\x20Length\x20-\x20','\x20--\x20','upload-attachments','KduCO','Processing\x20events.\x20Queue\x20Length\x20-\x20','zsRwk','pollEventBatchInterval','885432cUjBST','startEventBatchPolling','TestRunFinished','5538320BMHdEF','response','REMOVING','9943010LbESFl','./constants','EQzER','cRZzl','shouldProceed','AEhoe','length','13535IGBppu','pMQan','adDVG','608631hAeCFK','uFiyZ','xznpL','MYvML','uuid','test_run','IusPz','removeEventBatchPolling','../helper','batchAndPostEvents','EnJpV','uploadPending','instance','ZQnTt','shutdown','YbwXZ','JZnbd','stbeN','\x20REQUEST\x20TO\x20','XShyF','started','data','format','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','max','DfOAZ','push','logs','api/v1/screenshots','KKohG','5484879jhBdnv','TEST_ATTACHMENT','screenshotEventUrl','CBTSessionCreated','includes','proceedWithData','Interval-Queue','proceedWithUrl','exports','FqAsY','hook_run','slice','eventUrl','TEST_REPORTING_ANALYTICS','Processing\x20batch\x20events\x20for\x20','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','14RbfQhB','.\x20Request\x20Size\x20-\x20','\x20bytes.\x20Events\x20are\x20','byteLength','JWNIt','IEDEW','TAuwk','EXCEPTION\x20IN\x20','Pkehk','splice','api/v1/batch'];a128_0x8a10=function(){return _0x2eea3b;};return a128_0x8a10();}const a128_0x4ae898=a128_0x3f71;(function(_0x3066cf,_0x354447){const _0x24832a=a128_0x3f71,_0x25d0a4=_0x3066cf();while(!![]){try{const _0x54b67f=-parseInt(_0x24832a(0xeb))/0x1+-parseInt(_0x24832a(0x129))/0x2*(-parseInt(_0x24832a(0xfb))/0x3)+parseInt(_0x24832a(0x146))/0x4*(-parseInt(_0x24832a(0xf8))/0x5)+parseInt(_0x24832a(0xe3))/0x6+parseInt(_0x24832a(0xf1))/0x7+-parseInt(_0x24832a(0xee))/0x8+-parseInt(_0x24832a(0x119))/0x9*(-parseInt(_0x24832a(0x14d))/0xa);if(_0x54b67f===_0x354447)break;else _0x25d0a4['push'](_0x25d0a4['shift']());}catch(_0x54c5db){_0x25d0a4['push'](_0x25d0a4['shift']());}}}(a128_0x8a10,0xe40b9));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a128_0x4ae898(0xf2)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a128_0x4ae898(0xdd)),{nestedKeyValue}=require(a128_0x4ae898(0x103)),util=require(a128_0x4ae898(0x145)),constants=require(a128_0x4ae898(0xe2));class RequestQueueHandler{static [a128_0x4ae898(0x107)];['pendingUploads']=0x0;constructor(){const _0x166740=a128_0x4ae898,_0x301c2d={};_0x301c2d[_0x166740(0x13a)]=_0x166740(0x138),_0x301c2d[_0x166740(0xe0)]=_0x166740(0x117),_0x301c2d[_0x166740(0x14f)]=_0x166740(0xe6),_0x301c2d['BKJSY']='LogCreated',_0x301c2d['FqAsY']=_0x166740(0x11c),_0x301c2d['JWNIt']=_0x166740(0xed),_0x301c2d[_0x166740(0xfa)]='TestRunSkipped',_0x301c2d[_0x166740(0xe7)]=_0x166740(0x13d),_0x301c2d['EQzER']='TestRunStarted',_0x301c2d[_0x166740(0x114)]='HookRunStarted',_0x301c2d['XShyF']=_0x166740(0x133);const _0x556955=_0x301c2d,_0xdc8b86=_0x556955[_0x166740(0x13a)]['split']('|');let _0x19df15=0x0;while(!![]){switch(_0xdc8b86[_0x19df15++]){case'0':this[_0x166740(0xea)]=null;continue;case'1':this[_0x166740(0x148)]=[];continue;case'2':this[_0x166740(0x11b)]=_0x556955[_0x166740(0xe0)];continue;case'3':this[_0x166740(0x14e)]=_0x556955[_0x166740(0x14f)];continue;case'4':this[_0x166740(0x10f)]=![];continue;case'5':this[_0x166740(0x14a)]=[_0x556955['BKJSY'],_0x556955[_0x166740(0x122)],_0x556955[_0x166740(0x12d)],_0x556955[_0x166740(0xfa)],_0x556955[_0x166740(0xe7)],_0x556955[_0x166740(0xf3)],_0x556955[_0x166740(0x114)]];continue;case'6':this['eventUrl']=_0x556955[_0x166740(0x10e)];continue;}break;}}static[a128_0x4ae898(0x144)](){const _0x23276b=a128_0x4ae898;return!RequestQueueHandler[_0x23276b(0x107)]&&(RequestQueueHandler[_0x23276b(0x107)]=new RequestQueueHandler()),RequestQueueHandler[_0x23276b(0x107)];}[a128_0x4ae898(0x142)]=()=>{const _0x3bfc89=a128_0x4ae898;!this[_0x3bfc89(0x10f)]&&(this['started']=!![],this[_0x3bfc89(0xec)]());};['add']=_0x4c9332=>{const _0x211756=a128_0x4ae898,_0x1106f6={'stbeN':function(_0x535057,_0x31263c){return _0x535057===_0x31263c;},'KKohG':'TEST_SCREENSHOT','gQPsi':function(_0x1fb08c,_0x3976ea){return _0x1fb08c>_0x3976ea;},'YbwXZ':_0x211756(0x11a),'FJPmw':function(_0x44e845,_0x34b079){return _0x44e845!==_0x34b079;},'MYvML':_0x211756(0xed),'zsRwk':function(_0x262498,_0x1a9304){return _0x262498(_0x1a9304);},'eUsYK':_0x211756(0x14c)};if(this[_0x211756(0x14a)][_0x211756(0x11d)](_0x4c9332[_0x211756(0x13e)])){if(_0x4c9332[_0x211756(0x116)]&&_0x4c9332[_0x211756(0x116)][0x0]&&_0x1106f6[_0x211756(0x10c)](_0x4c9332[_0x211756(0x116)][0x0][_0x211756(0x143)],_0x1106f6[_0x211756(0x118)])){const _0x1cb64a={};return _0x1cb64a['shouldProceed']=!![],_0x1cb64a[_0x211756(0x11e)]=[_0x4c9332],_0x1cb64a[_0x211756(0x120)]=this['screenshotEventUrl'],_0x1cb64a;}if(_0x4c9332[_0x211756(0x116)]&&_0x1106f6[_0x211756(0x13f)](_0x4c9332[_0x211756(0x116)]['length'],0x0)&&_0x1106f6[_0x211756(0x10c)](_0x4c9332[_0x211756(0x116)][0x0][_0x211756(0x143)],_0x1106f6[_0x211756(0x10a)])&&_0x1106f6[_0x211756(0x13b)](_0x4c9332['event_type'],_0x1106f6[_0x211756(0xfe)])){const _0x45e0fe={};return _0x45e0fe[_0x211756(0xf5)]=!![],_0x45e0fe[_0x211756(0x11e)]=[_0x4c9332],_0x45e0fe[_0x211756(0x120)]=this[_0x211756(0x14e)],_0x45e0fe;}this['queue'][_0x211756(0x115)](_0x4c9332);let _0x11c0f0=null;const _0x1536d5=this['shouldProceed']();_0x1536d5&&(_0x1106f6[_0x211756(0xe9)](trace,_0x1106f6[_0x211756(0x149)]),_0x11c0f0=this[_0x211756(0x148)]['slice'](0x0,BATCH_SIZE),this[_0x211756(0x148)][_0x211756(0x132)](0x0,BATCH_SIZE),this[_0x211756(0x14b)]());const _0x4f8f9d={};return _0x4f8f9d[_0x211756(0xf5)]=_0x1536d5,_0x4f8f9d[_0x211756(0x11e)]=_0x11c0f0,_0x4f8f9d['proceedWithUrl']=this['eventUrl'],_0x4f8f9d;}const _0x39a08b={};return _0x39a08b[_0x211756(0xf5)]=!![],_0x39a08b;};[a128_0x4ae898(0x109)]=async()=>{const _0x27712c=a128_0x4ae898,_0x3f2aed={'ZQnTt':_0x27712c(0xf0),'IEDEW':function(_0xe01af8,_0x56d49d){return _0xe01af8>_0x56d49d;},'pKZku':_0x27712c(0x137),'uFiyZ':function(_0x529e24,_0x494fb4){return _0x529e24>_0x494fb4;},'MTywJ':function(_0x3dde87,_0x58ba03){return _0x3dde87(_0x58ba03);}};await this[_0x27712c(0x106)](),this['removeEventBatchPolling'](_0x3f2aed[_0x27712c(0x108)]);while(_0x3f2aed[_0x27712c(0x12e)](this['queue']['length'],0x0)){const _0x40b432=this[_0x27712c(0x148)][_0x27712c(0x124)](0x0,BATCH_SIZE);this['queue'][_0x27712c(0x132)](0x0,BATCH_SIZE),await this[_0x27712c(0x104)](this[_0x27712c(0x125)],_0x3f2aed['pKZku'],_0x40b432);}_0x3f2aed[_0x27712c(0xfc)](this[_0x27712c(0x147)],0x0)&&_0x3f2aed[_0x27712c(0x13c)](debug,_0x27712c(0x128)+this[_0x27712c(0x147)]);};[a128_0x4ae898(0x104)]=async(_0x7d2230,_0x286235,_0x195c79)=>{const _0x11eadd=a128_0x4ae898,_0x178700={'RttBF':function(_0x14912c,_0x1fad27){return _0x14912c(_0x1fad27);},'XWqxE':'utf8','KOKeK':function(_0x2f1158){return _0x2f1158();},'AEhoe':function(_0x1d6ed2,_0x3fca3,_0x43fed8,_0x1d06a8,_0x13a2b5){return _0x1d6ed2(_0x3fca3,_0x43fed8,_0x1d06a8,_0x13a2b5);},'cRZzl':'POST','JZnbd':function(_0x2935fc,_0x3b8b2b){return _0x2935fc-_0x3b8b2b;},'ouwQz':function(_0x29e852,_0x361753){return _0x29e852(_0x361753);}};let _0x23f23e='';try{_0x23f23e=_0x195c79[_0x11eadd(0x136)](_0x256dda=>'\x27'+_0x256dda[_0x11eadd(0x13e)]+'\x27:'+(nestedKeyValue(_0x256dda,[_0x11eadd(0x100),_0x11eadd(0xff)])||nestedKeyValue(_0x256dda,[_0x11eadd(0x123),_0x11eadd(0xff)])))['join'](','),_0x178700['RttBF'](debug,_0x11eadd(0x127)+_0x286235+_0x11eadd(0x12a)+Buffer[_0x11eadd(0x12c)](util['format']('%j',_0x195c79),_0x178700['XWqxE'])+_0x11eadd(0x12b)+_0x23f23e);}catch(_0x2bd6bf){_0x178700[_0x11eadd(0x140)](debug,_0x11eadd(0x112)+util[_0x11eadd(0x111)](_0x2bd6bf)+'}');}const _0x4cfffe={'headers':_0x178700['KOKeK'](getDefaultHeaders)};try{const _0x3b6118=await _0x178700[_0x11eadd(0xf6)](nodeRequest,_0x178700[_0x11eadd(0xf4)],_0x7d2230,_0x195c79,_0x4cfffe);if(_0x3b6118[_0x11eadd(0x110)]['error']){const _0x5e5435={};_0x5e5435['message']=_0x3b6118[_0x11eadd(0x110)][_0x11eadd(0xdf)];throw _0x5e5435;}else _0x178700[_0x11eadd(0x140)](debug,_0x286235+'\x20event\x20successful\x20for\x20events\x20'+_0x23f23e+_0x11eadd(0xe5)+util[_0x11eadd(0x111)]('%j',_0x3b6118[_0x11eadd(0x110)])),this['pendingUploads']=Math[_0x11eadd(0x113)](0x0,_0x178700[_0x11eadd(0x10b)](this['pendingUploads'],_0x195c79[_0x11eadd(0xf7)]));}catch(_0xa295d2){_0xa295d2['response']?_0x178700['ouwQz'](debug,_0x11eadd(0x130)+_0x286235+_0x11eadd(0x10d)+constants[_0x11eadd(0x126)]+_0x11eadd(0x141)+_0xa295d2[_0x11eadd(0xef)]['status']+'\x20'+_0xa295d2[_0x11eadd(0xef)][_0x11eadd(0x135)]+'\x20'+util[_0x11eadd(0x111)]('%j',_0xa295d2['response'])):_0x178700['ouwQz'](debug,'EXCEPTION\x20IN\x20'+_0x286235+'\x20REQUEST\x20TO\x20'+constants[_0x11eadd(0x126)]+_0x11eadd(0x141)+(_0xa295d2['message']||_0xa295d2)),this['pendingUploads']=Math['max'](0x0,_0x178700[_0x11eadd(0x10b)](this['pendingUploads'],_0x195c79[_0x11eadd(0xf7)]));}};[a128_0x4ae898(0xec)]=()=>{const _0x35767c=a128_0x4ae898,_0x4118c1={'pMQan':function(_0x5a2468,_0x48cd46){return _0x5a2468>_0x48cd46;},'xznpL':function(_0x3670cc,_0x2cb54d){return _0x3670cc(_0x2cb54d);},'xzzPf':_0x35767c(0x11f),'PJAaS':function(_0x4a04cf,_0x171605){return _0x4a04cf(_0x171605);},'TAuwk':function(_0x3e15e5,_0x2d9941,_0x148b60){return _0x3e15e5(_0x2d9941,_0x148b60);}};this['pollEventBatchInterval']=_0x4118c1[_0x35767c(0x12f)](setInterval,async()=>{const _0x1d816b=_0x35767c;if(_0x4118c1[_0x1d816b(0xf9)](this[_0x1d816b(0x148)][_0x1d816b(0xf7)],0x0)){_0x4118c1[_0x1d816b(0xfd)](trace,_0x1d816b(0xe8)+this[_0x1d816b(0x148)][_0x1d816b(0xf7)]);const _0x295574=this[_0x1d816b(0x148)][_0x1d816b(0x124)](0x0,BATCH_SIZE);this[_0x1d816b(0x148)]['splice'](0x0,BATCH_SIZE),await this[_0x1d816b(0x104)](this[_0x1d816b(0x125)],_0x4118c1[_0x1d816b(0xe1)],_0x295574),_0x4118c1['PJAaS'](trace,_0x1d816b(0xe4)+this[_0x1d816b(0x148)][_0x1d816b(0xf7)]);}},BATCH_INTERVAL);};[a128_0x4ae898(0x14b)]=()=>{const _0x33fe15=a128_0x4ae898,_0x4713aa={};_0x4713aa['zElYp']=_0x33fe15(0x139);const _0xb9d9b6=_0x4713aa;this[_0x33fe15(0x102)](_0xb9d9b6['zElYp']),this[_0x33fe15(0xec)]();};['removeEventBatchPolling']=_0x51eeff=>{const _0xeb1d7f=a128_0x4ae898,_0x42a49d={'IusPz':function(_0x15b50c,_0x6d3120){return _0x15b50c(_0x6d3120);},'hJOzr':function(_0x191d7e,_0x3510c7){return _0x191d7e===_0x3510c7;},'KJTeS':_0xeb1d7f(0xf0)};this[_0xeb1d7f(0xea)]&&(_0x42a49d[_0xeb1d7f(0x101)](clearInterval,this[_0xeb1d7f(0xea)]),this[_0xeb1d7f(0xea)]=null,_0x42a49d['hJOzr'](_0x51eeff,_0x42a49d['KJTeS'])&&(this[_0xeb1d7f(0x10f)]=![]));};[a128_0x4ae898(0xf5)]=()=>{const _0x435e40=a128_0x4ae898,_0x4b8ce4={};_0x4b8ce4['dCSSQ']=function(_0x16bd7a,_0x153441){return _0x16bd7a>=_0x153441;};const _0x4b240b=_0x4b8ce4;return _0x4b240b['dCSSQ'](this[_0x435e40(0x148)][_0x435e40(0xf7)],BATCH_SIZE);};async[a128_0x4ae898(0x106)](_0x32eea2=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x460c14=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0xdfdded=a128_0x4ae898,_0x18dd48={'LZNmo':function(_0x3ba633,_0x11c7c3){return _0x3ba633<=_0x11c7c3;},'GyNTM':function(_0x418583,_0x10a61c){return _0x418583<=_0x10a61c;},'EnJpV':function(_0xf7794a,_0x470dd7){return _0xf7794a(_0x470dd7);},'Pkehk':function(_0x28ee43,_0x1a407e){return _0x28ee43-_0x1a407e;}};if(_0x18dd48[_0xdfdded(0xde)](this[_0xdfdded(0x147)],0x0)||_0x18dd48[_0xdfdded(0x134)](_0x32eea2,0x0))return;return await _0x18dd48[_0xdfdded(0x105)](sleep,_0x460c14),this[_0xdfdded(0x106)](_0x18dd48[_0xdfdded(0x131)](_0x32eea2,_0x460c14));}}module[a128_0x4ae898(0x121)]=RequestQueueHandler;