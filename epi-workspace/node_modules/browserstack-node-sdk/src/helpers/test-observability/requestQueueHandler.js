const a128_0x2781f4=a128_0x3d5e;function a128_0x3d5e(_0x3914ba,_0x5abcdc){const _0x20b2ff=a128_0x20b2();return a128_0x3d5e=function(_0x3d5e7b,_0xfb66fe){_0x3d5e7b=_0x3d5e7b-0x1ee;let _0xf3c6a6=_0x20b2ff[_0x3d5e7b];return _0xf3c6a6;},a128_0x3d5e(_0x3914ba,_0x5abcdc);}(function(_0x232342,_0x1e566c){const _0x121c35=a128_0x3d5e,_0x2defd5=_0x232342();while(!![]){try{const _0x32bce2=-parseInt(_0x121c35(0x232))/0x1*(-parseInt(_0x121c35(0x206))/0x2)+-parseInt(_0x121c35(0x222))/0x3*(-parseInt(_0x121c35(0x1f5))/0x4)+-parseInt(_0x121c35(0x231))/0x5+parseInt(_0x121c35(0x247))/0x6*(-parseInt(_0x121c35(0x210))/0x7)+parseInt(_0x121c35(0x1ee))/0x8*(-parseInt(_0x121c35(0x262))/0x9)+parseInt(_0x121c35(0x255))/0xa+parseInt(_0x121c35(0x23e))/0xb;if(_0x32bce2===_0x1e566c)break;else _0x2defd5['push'](_0x2defd5['shift']());}catch(_0x2721fc){_0x2defd5['push'](_0x2defd5['shift']());}}}(a128_0x20b2,0x74bc4));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a128_0x2781f4(0x21b)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a128_0x2781f4(0x205)),{nestedKeyValue}=require(a128_0x2781f4(0x21a)),util=require(a128_0x2781f4(0x234)),constants=require('../../bin/utils/constants');class RequestQueueHandler{static [a128_0x2781f4(0x24c)];[a128_0x2781f4(0x253)]=0x0;constructor(){const _0x48fb6c=a128_0x2781f4,_0xfb8e89={};_0xfb8e89[_0x48fb6c(0x25f)]='6|2|5|1|3|4|0',_0xfb8e89[_0x48fb6c(0x257)]=_0x48fb6c(0x221),_0xfb8e89[_0x48fb6c(0x23a)]=_0x48fb6c(0x1fe),_0xfb8e89['fCcib']=_0x48fb6c(0x22e),_0xfb8e89[_0x48fb6c(0x1f7)]='CBTSessionCreated',_0xfb8e89[_0x48fb6c(0x1fa)]=_0x48fb6c(0x217),_0xfb8e89[_0x48fb6c(0x1f1)]=_0x48fb6c(0x23d),_0xfb8e89['qyxnN']=_0x48fb6c(0x23f),_0xfb8e89[_0x48fb6c(0x1f4)]=_0x48fb6c(0x224),_0xfb8e89[_0x48fb6c(0x265)]='HookRunStarted',_0xfb8e89[_0x48fb6c(0x209)]='api/v1/batch';const _0x446def=_0xfb8e89,_0xafc7de=_0x446def[_0x48fb6c(0x25f)]['split']('|');let _0x4617eb=0x0;while(!![]){switch(_0xafc7de[_0x4617eb++]){case'0':this['pollEventBatchInterval']=null;continue;case'1':this['screenshotEventUrl']=_0x446def['YgqlF'];continue;case'2':this[_0x48fb6c(0x252)]=![];continue;case'3':this['uploadAttachmentUrl']=_0x446def[_0x48fb6c(0x23a)];continue;case'4':this[_0x48fb6c(0x263)]=[_0x446def[_0x48fb6c(0x223)],_0x446def[_0x48fb6c(0x1f7)],_0x446def['wexxB'],_0x446def[_0x48fb6c(0x1f1)],_0x446def[_0x48fb6c(0x1fb)],_0x446def[_0x48fb6c(0x1f4)],_0x446def['cLKRx']];continue;case'5':this[_0x48fb6c(0x237)]=_0x446def['cKxKh'];continue;case'6':this['queue']=[];continue;}break;}}static[a128_0x2781f4(0x20c)](){const _0x1eb47c=a128_0x2781f4;return!RequestQueueHandler['instance']&&(RequestQueueHandler[_0x1eb47c(0x24c)]=new RequestQueueHandler()),RequestQueueHandler[_0x1eb47c(0x24c)];}['start']=()=>{const _0x2047b7=a128_0x2781f4;!this['started']&&(this[_0x2047b7(0x252)]=!![],this['startEventBatchPolling']());};[a128_0x2781f4(0x235)]=_0x721e4c=>{const _0x752ae1=a128_0x2781f4,_0x25dc9b={'HGptT':function(_0x31a6ee,_0x331349){return _0x31a6ee===_0x331349;},'nUShK':_0x752ae1(0x251),'YYgQf':function(_0x5c100e,_0xf1d7ac){return _0x5c100e>_0xf1d7ac;},'MNYiu':function(_0x4239f2,_0x324302){return _0x4239f2===_0x324302;},'ZhOvp':_0x752ae1(0x22b),'VoVBQ':function(_0x10b889,_0x1ad0f8){return _0x10b889!==_0x1ad0f8;},'xAJos':_0x752ae1(0x217),'Dbgmt':function(_0x32cd50,_0x120872){return _0x32cd50(_0x120872);},'UUTEr':_0x752ae1(0x200)};if(this[_0x752ae1(0x263)]['includes'](_0x721e4c[_0x752ae1(0x1f8)])){if(_0x721e4c[_0x752ae1(0x254)]&&_0x721e4c['logs'][0x0]&&_0x25dc9b[_0x752ae1(0x261)](_0x721e4c['logs'][0x0][_0x752ae1(0x20f)],_0x25dc9b['nUShK'])){const _0x5bdbf2={};return _0x5bdbf2[_0x752ae1(0x201)]=!![],_0x5bdbf2[_0x752ae1(0x219)]=[_0x721e4c],_0x5bdbf2[_0x752ae1(0x24d)]=this[_0x752ae1(0x22d)],_0x5bdbf2;}if(_0x721e4c[_0x752ae1(0x254)]&&_0x25dc9b[_0x752ae1(0x264)](_0x721e4c[_0x752ae1(0x254)][_0x752ae1(0x24e)],0x0)&&_0x25dc9b['MNYiu'](_0x721e4c[_0x752ae1(0x254)][0x0][_0x752ae1(0x20f)],_0x25dc9b[_0x752ae1(0x249)])&&_0x25dc9b[_0x752ae1(0x225)](_0x721e4c[_0x752ae1(0x1f8)],_0x25dc9b['xAJos'])){const _0x2eff4b={};return _0x2eff4b['shouldProceed']=!![],_0x2eff4b[_0x752ae1(0x219)]=[_0x721e4c],_0x2eff4b['proceedWithUrl']=this[_0x752ae1(0x213)],_0x2eff4b;}this[_0x752ae1(0x258)][_0x752ae1(0x239)](_0x721e4c);let _0x5193c2=null;const _0x9088e9=this['shouldProceed']();_0x9088e9&&(_0x25dc9b[_0x752ae1(0x1f9)](trace,_0x25dc9b[_0x752ae1(0x211)]),_0x5193c2=this['queue'][_0x752ae1(0x215)](0x0,BATCH_SIZE),this[_0x752ae1(0x258)][_0x752ae1(0x227)](0x0,BATCH_SIZE),this['resetEventBatchPolling']());const _0x5a97fd={};return _0x5a97fd[_0x752ae1(0x201)]=_0x9088e9,_0x5a97fd[_0x752ae1(0x219)]=_0x5193c2,_0x5a97fd[_0x752ae1(0x24d)]=this[_0x752ae1(0x237)],_0x5a97fd;}const _0x3d8f7b={};return _0x3d8f7b[_0x752ae1(0x201)]=!![],_0x3d8f7b;};[a128_0x2781f4(0x1fc)]=async()=>{const _0x2dcfd5=a128_0x2781f4,_0x278fff={'rGOWL':'REMOVING','AdMNZ':function(_0x40ce56,_0x55007a){return _0x40ce56>_0x55007a;},'ntwaT':'Shutdown-Queue','WbwrQ':function(_0x47a20a,_0x2b49d2){return _0x47a20a(_0x2b49d2);}};await this['uploadPending'](),this[_0x2dcfd5(0x229)](_0x278fff[_0x2dcfd5(0x21e)]);while(_0x278fff[_0x2dcfd5(0x1f3)](this[_0x2dcfd5(0x258)][_0x2dcfd5(0x24e)],0x0)){const _0x140fd4=this[_0x2dcfd5(0x258)][_0x2dcfd5(0x215)](0x0,BATCH_SIZE);this[_0x2dcfd5(0x258)][_0x2dcfd5(0x227)](0x0,BATCH_SIZE),await this[_0x2dcfd5(0x214)](this[_0x2dcfd5(0x237)],_0x278fff[_0x2dcfd5(0x207)],_0x140fd4);}_0x278fff[_0x2dcfd5(0x1f3)](this[_0x2dcfd5(0x253)],0x0)&&_0x278fff[_0x2dcfd5(0x244)](debug,_0x2dcfd5(0x20d)+this[_0x2dcfd5(0x253)]);};[a128_0x2781f4(0x214)]=async(_0x4e92d4,_0x447f9a,_0x5abab5)=>{const _0x237315=a128_0x2781f4,_0x124dc2={'Isssd':function(_0x3f997f,_0x5895df){return _0x3f997f(_0x5895df);},'rkZlh':_0x237315(0x230),'QxaFA':function(_0x2a3dbe,_0x56bf54){return _0x2a3dbe(_0x56bf54);},'xvFwF':function(_0x53fc83){return _0x53fc83();},'NbscP':function(_0xe1934e,_0x54c720,_0x1afb2b,_0x221a13,_0x382e8a){return _0xe1934e(_0x54c720,_0x1afb2b,_0x221a13,_0x382e8a);},'ISOxV':_0x237315(0x242),'eQYvQ':function(_0x22a502,_0x5b6c47){return _0x22a502(_0x5b6c47);},'JsDcH':function(_0x27f261,_0x13510c){return _0x27f261-_0x13510c;},'vVGxv':function(_0x1251be,_0x34255e){return _0x1251be(_0x34255e);},'LbGjC':function(_0x222dc3,_0x276245){return _0x222dc3-_0x276245;}};let _0x29ce7b='';try{_0x29ce7b=_0x5abab5['map'](_0x426b00=>'\x27'+_0x426b00[_0x237315(0x1f8)]+'\x27:'+(nestedKeyValue(_0x426b00,[_0x237315(0x20a),_0x237315(0x25b)])||nestedKeyValue(_0x426b00,[_0x237315(0x220),_0x237315(0x25b)])))['join'](','),_0x124dc2[_0x237315(0x24a)](debug,_0x237315(0x233)+_0x447f9a+_0x237315(0x25a)+Buffer['byteLength'](util[_0x237315(0x23c)]('%j',_0x5abab5),_0x124dc2[_0x237315(0x25d)])+_0x237315(0x1f2)+_0x29ce7b);}catch(_0x31ec54){_0x124dc2[_0x237315(0x25e)](debug,_0x237315(0x212)+util[_0x237315(0x23c)](_0x31ec54)+'}');}const _0x213c11={'headers':_0x124dc2[_0x237315(0x226)](getDefaultHeaders)};try{const _0x404d05=await _0x124dc2[_0x237315(0x248)](nodeRequest,_0x124dc2[_0x237315(0x245)],_0x4e92d4,_0x5abab5,_0x213c11);if(_0x404d05[_0x237315(0x238)]['error']){const _0x47fe39={};_0x47fe39[_0x237315(0x23b)]=_0x404d05[_0x237315(0x238)][_0x237315(0x25c)];throw _0x47fe39;}else _0x124dc2[_0x237315(0x256)](debug,_0x447f9a+_0x237315(0x20b)+_0x29ce7b+_0x237315(0x22c)+util[_0x237315(0x23c)]('%j',_0x404d05[_0x237315(0x238)])),this[_0x237315(0x253)]=Math[_0x237315(0x246)](0x0,_0x124dc2[_0x237315(0x1ff)](this[_0x237315(0x253)],_0x5abab5[_0x237315(0x24e)]));}catch(_0x2b220e){_0x2b220e[_0x237315(0x1fd)]?_0x124dc2['Isssd'](debug,'EXCEPTION\x20IN\x20'+_0x447f9a+'\x20REQUEST\x20TO\x20'+constants['TEST_REPORTING_ANALYTICS']+_0x237315(0x21d)+_0x2b220e[_0x237315(0x1fd)][_0x237315(0x22a)]+'\x20'+_0x2b220e[_0x237315(0x1fd)][_0x237315(0x1ef)]+'\x20'+util[_0x237315(0x23c)]('%j',_0x2b220e[_0x237315(0x1fd)])):_0x124dc2['vVGxv'](debug,_0x237315(0x218)+_0x447f9a+_0x237315(0x204)+constants['TEST_REPORTING_ANALYTICS']+_0x237315(0x21d)+(_0x2b220e['message']||_0x2b220e)),this['pendingUploads']=Math[_0x237315(0x246)](0x0,_0x124dc2[_0x237315(0x216)](this['pendingUploads'],_0x5abab5[_0x237315(0x24e)]));}};['startEventBatchPolling']=()=>{const _0x3c1c60=a128_0x2781f4,_0x3685d8={'zGeHu':function(_0xf1c624,_0x29b79c){return _0xf1c624>_0x29b79c;},'vqQbO':function(_0x3450b4,_0xf81547){return _0x3450b4(_0xf81547);},'WjWfo':_0x3c1c60(0x22f),'zXCbV':function(_0x237ebb,_0x495b9d,_0x1e3086){return _0x237ebb(_0x495b9d,_0x1e3086);}};this[_0x3c1c60(0x24f)]=_0x3685d8[_0x3c1c60(0x21c)](setInterval,async()=>{const _0x4af6c9=_0x3c1c60;if(_0x3685d8[_0x4af6c9(0x208)](this[_0x4af6c9(0x258)][_0x4af6c9(0x24e)],0x0)){_0x3685d8[_0x4af6c9(0x260)](trace,_0x4af6c9(0x236)+this[_0x4af6c9(0x258)][_0x4af6c9(0x24e)]);const _0x18eb03=this[_0x4af6c9(0x258)]['slice'](0x0,BATCH_SIZE);this['queue']['splice'](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x4af6c9(0x237)],_0x3685d8[_0x4af6c9(0x1f6)],_0x18eb03),_0x3685d8[_0x4af6c9(0x260)](trace,_0x4af6c9(0x228)+this[_0x4af6c9(0x258)][_0x4af6c9(0x24e)]);}},BATCH_INTERVAL);};[a128_0x2781f4(0x24b)]=()=>{const _0x18aee8=a128_0x2781f4,_0x2e7588={};_0x2e7588['JhhNp']=_0x18aee8(0x250);const _0x5b27f8=_0x2e7588;this['removeEventBatchPolling'](_0x5b27f8[_0x18aee8(0x203)]),this['startEventBatchPolling']();};['removeEventBatchPolling']=_0x3345a5=>{const _0x30b04a=a128_0x2781f4,_0x348f17={'bDxQK':function(_0x53036a,_0x1a9f74){return _0x53036a(_0x1a9f74);},'PnMoq':function(_0x474cce,_0x7711d7){return _0x474cce===_0x7711d7;},'JzilF':_0x30b04a(0x1f0)};this[_0x30b04a(0x24f)]&&(_0x348f17['bDxQK'](clearInterval,this[_0x30b04a(0x24f)]),this[_0x30b04a(0x24f)]=null,_0x348f17[_0x30b04a(0x243)](_0x3345a5,_0x348f17['JzilF'])&&(this[_0x30b04a(0x252)]=![]));};['shouldProceed']=()=>{const _0xf5e233=a128_0x2781f4,_0x27eff4={};_0x27eff4[_0xf5e233(0x259)]=function(_0x59beaf,_0x6fc8b9){return _0x59beaf>=_0x6fc8b9;};const _0x49acee=_0x27eff4;return _0x49acee[_0xf5e233(0x259)](this[_0xf5e233(0x258)]['length'],BATCH_SIZE);};async[a128_0x2781f4(0x241)](_0x14e5fa=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x44f8bc=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x1e7d8a=a128_0x2781f4,_0x4c9c53={'NmwtJ':function(_0xb36e3,_0x7824bd){return _0xb36e3<=_0x7824bd;},'RQzcB':function(_0x1da244,_0x4cb6c9){return _0x1da244(_0x4cb6c9);},'aneHU':function(_0x408c08,_0x2f335a){return _0x408c08-_0x2f335a;}};if(_0x4c9c53[_0x1e7d8a(0x202)](this[_0x1e7d8a(0x253)],0x0)||_0x4c9c53[_0x1e7d8a(0x202)](_0x14e5fa,0x0))return;return await _0x4c9c53[_0x1e7d8a(0x20e)](sleep,_0x44f8bc),this[_0x1e7d8a(0x241)](_0x4c9c53[_0x1e7d8a(0x21f)](_0x14e5fa,_0x44f8bc));}}function a128_0x20b2(){const _0x4ce2c5=['AdMNZ','gtodr','4KApuYx','WjWfo','xUAjt','event_type','Dbgmt','wexxB','qyxnN','shutdown','response','upload-attachments','JsDcH','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','shouldProceed','NmwtJ','JhhNp','\x20REQUEST\x20TO\x20','./utils','9082Wtwqcj','ntwaT','zGeHu','cKxKh','test_run','\x20event\x20successful\x20for\x20events\x20','getInstance','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','RQzcB','kind','118909EfKbjw','UUTEr','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','uploadAttachmentUrl','batchAndPostEvents','slice','LbGjC','TestRunFinished','EXCEPTION\x20IN\x20','proceedWithData','../helper','./constants','zXCbV','\x20:\x20','rGOWL','aneHU','hook_run','api/v1/screenshots','566925FbiGvE','fCcib','TestRunStarted','VoVBQ','xvFwF','splice','Remaining\x20Queue\x20Length\x20-\x20','removeEventBatchPolling','status','TEST_ATTACHMENT','\x20--\x20','screenshotEventUrl','LogCreated','Interval-Queue','utf8','4773835XJRUhI','178VbhVmE','Processing\x20batch\x20events\x20for\x20','util','add','Processing\x20events.\x20Queue\x20Length\x20-\x20','eventUrl','data','push','pLWXK','message','format','TestRunSkipped','15966324dzYaYL','HookRunFinished','exports','uploadPending','POST','PnMoq','WbwrQ','ISOxV','max','138Iexcqf','NbscP','ZhOvp','Isssd','resetEventBatchPolling','instance','proceedWithUrl','length','pollEventBatchInterval','RESETTING','TEST_SCREENSHOT','started','pendingUploads','logs','239740CbDcvm','eQYvQ','YgqlF','queue','HUeHf','.\x20Request\x20Size\x20-\x20','uuid','error','rkZlh','QxaFA','dNdZg','vqQbO','HGptT','45pITQNf','BATCH_EVENT_TYPES','YYgQf','cLKRx','1038584bRJoWO','statusText','REMOVING','sgcoq','\x20bytes.\x20Events\x20are\x20'];a128_0x20b2=function(){return _0x4ce2c5;};return a128_0x20b2();}module[a128_0x2781f4(0x240)]=RequestQueueHandler;