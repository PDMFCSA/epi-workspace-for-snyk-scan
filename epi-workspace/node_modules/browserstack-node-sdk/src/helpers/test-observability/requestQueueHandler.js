const a128_0x55a473=a128_0x3912;(function(_0x4fc1ec,_0x591541){const _0x53a734=a128_0x3912,_0x1bcb69=_0x4fc1ec();while(!![]){try{const _0x4defb7=parseInt(_0x53a734(0x1a9))/0x1*(-parseInt(_0x53a734(0x156))/0x2)+-parseInt(_0x53a734(0x13f))/0x3*(-parseInt(_0x53a734(0x140))/0x4)+-parseInt(_0x53a734(0x167))/0x5+-parseInt(_0x53a734(0x1a0))/0x6*(parseInt(_0x53a734(0x16b))/0x7)+-parseInt(_0x53a734(0x155))/0x8*(parseInt(_0x53a734(0x1a7))/0x9)+parseInt(_0x53a734(0x195))/0xa*(-parseInt(_0x53a734(0x1ab))/0xb)+parseInt(_0x53a734(0x17d))/0xc*(parseInt(_0x53a734(0x154))/0xd);if(_0x4defb7===_0x591541)break;else _0x1bcb69['push'](_0x1bcb69['shift']());}catch(_0x53cf04){_0x1bcb69['push'](_0x1bcb69['shift']());}}}(a128_0x2b61,0x2156c));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require('./constants'),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a128_0x55a473(0x19c)),{nestedKeyValue}=require(a128_0x55a473(0x184)),util=require(a128_0x55a473(0x17b)),constants=require(a128_0x55a473(0x151));function a128_0x3912(_0x9856f6,_0x27f7d5){const _0x2b61e0=a128_0x2b61();return a128_0x3912=function(_0x3912da,_0x547afe){_0x3912da=_0x3912da-0x13d;let _0x1f0574=_0x2b61e0[_0x3912da];return _0x1f0574;},a128_0x3912(_0x9856f6,_0x27f7d5);}class RequestQueueHandler{static [a128_0x55a473(0x1a3)];['pendingUploads']=0x0;constructor(){const _0x262c45=a128_0x55a473,_0x49d4a6={};_0x49d4a6[_0x262c45(0x1aa)]=_0x262c45(0x175),_0x49d4a6[_0x262c45(0x17e)]=_0x262c45(0x142),_0x49d4a6[_0x262c45(0x1a2)]='CBTSessionCreated',_0x49d4a6[_0x262c45(0x1a4)]='TestRunFinished',_0x49d4a6[_0x262c45(0x17c)]=_0x262c45(0x164),_0x49d4a6[_0x262c45(0x166)]=_0x262c45(0x15b),_0x49d4a6[_0x262c45(0x18b)]='TestRunStarted',_0x49d4a6[_0x262c45(0x190)]=_0x262c45(0x170),_0x49d4a6['LiNkL']=_0x262c45(0x14e),_0x49d4a6[_0x262c45(0x144)]='api/v1/screenshots',_0x49d4a6['Xwncw']=_0x262c45(0x198);const _0x2083fc=_0x49d4a6,_0x4f89f6=_0x2083fc[_0x262c45(0x1aa)]['split']('|');let _0x4b3b28=0x0;while(!![]){switch(_0x4f89f6[_0x4b3b28++]){case'0':this[_0x262c45(0x14c)]=[_0x2083fc[_0x262c45(0x17e)],_0x2083fc[_0x262c45(0x1a2)],_0x2083fc[_0x262c45(0x1a4)],_0x2083fc[_0x262c45(0x17c)],_0x2083fc[_0x262c45(0x166)],_0x2083fc[_0x262c45(0x18b)],_0x2083fc['VMsCX']];continue;case'1':this[_0x262c45(0x1ac)]=_0x2083fc[_0x262c45(0x16d)];continue;case'2':this[_0x262c45(0x1a6)]=![];continue;case'3':this['queue']=[];continue;case'4':this[_0x262c45(0x19f)]=null;continue;case'5':this['screenshotEventUrl']=_0x2083fc[_0x262c45(0x144)];continue;case'6':this[_0x262c45(0x148)]=_0x2083fc['Xwncw'];continue;}break;}}static[a128_0x55a473(0x160)](){const _0x4bb1fa=a128_0x55a473;return!RequestQueueHandler[_0x4bb1fa(0x1a3)]&&(RequestQueueHandler[_0x4bb1fa(0x1a3)]=new RequestQueueHandler()),RequestQueueHandler[_0x4bb1fa(0x1a3)];}[a128_0x55a473(0x187)]=()=>{const _0x347664=a128_0x55a473;!this[_0x347664(0x1a6)]&&(this[_0x347664(0x1a6)]=!![],this[_0x347664(0x157)]());};[a128_0x55a473(0x18f)]=_0x32b560=>{const _0x4b3443=a128_0x55a473,_0x16a9b4={'Vomba':function(_0x698a90,_0x22dfcf){return _0x698a90===_0x22dfcf;},'gElsO':'TEST_SCREENSHOT','FuKac':function(_0x527502,_0x2adc14){return _0x527502>_0x2adc14;},'IQYvb':'TEST_ATTACHMENT','CSvCQ':function(_0x580316,_0x59da0c){return _0x580316!==_0x59da0c;},'FlVlK':_0x4b3443(0x15e),'RuzJl':function(_0x4ae047,_0x5be60a){return _0x4ae047(_0x5be60a);},'MdQEv':_0x4b3443(0x168)};if(this[_0x4b3443(0x14c)][_0x4b3443(0x194)](_0x32b560[_0x4b3443(0x15c)])){if(_0x32b560[_0x4b3443(0x14a)]&&_0x32b560[_0x4b3443(0x14a)][0x0]&&_0x16a9b4['Vomba'](_0x32b560[_0x4b3443(0x14a)][0x0][_0x4b3443(0x192)],_0x16a9b4[_0x4b3443(0x161)])){const _0x3826ca={};return _0x3826ca[_0x4b3443(0x1ad)]=!![],_0x3826ca[_0x4b3443(0x153)]=[_0x32b560],_0x3826ca[_0x4b3443(0x18a)]=this[_0x4b3443(0x16a)],_0x3826ca;}if(_0x32b560[_0x4b3443(0x14a)]&&_0x16a9b4['FuKac'](_0x32b560[_0x4b3443(0x14a)]['length'],0x0)&&_0x16a9b4['Vomba'](_0x32b560[_0x4b3443(0x14a)][0x0]['kind'],_0x16a9b4['IQYvb'])&&_0x16a9b4['CSvCQ'](_0x32b560[_0x4b3443(0x15c)],_0x16a9b4['FlVlK'])){const _0x4c9e5e={};return _0x4c9e5e[_0x4b3443(0x1ad)]=!![],_0x4c9e5e[_0x4b3443(0x153)]=[_0x32b560],_0x4c9e5e['proceedWithUrl']=this[_0x4b3443(0x148)],_0x4c9e5e;}this['queue'][_0x4b3443(0x186)](_0x32b560);let _0x347829=null;const _0x36d988=this[_0x4b3443(0x1ad)]();_0x36d988&&(_0x16a9b4[_0x4b3443(0x146)](trace,_0x16a9b4['MdQEv']),_0x347829=this['queue'][_0x4b3443(0x199)](0x0,BATCH_SIZE),this['queue']['splice'](0x0,BATCH_SIZE),this[_0x4b3443(0x17a)]());const _0x5c3a04={};return _0x5c3a04[_0x4b3443(0x1ad)]=_0x36d988,_0x5c3a04[_0x4b3443(0x153)]=_0x347829,_0x5c3a04[_0x4b3443(0x18a)]=this['eventUrl'],_0x5c3a04;}const _0xf8ac0a={};return _0xf8ac0a[_0x4b3443(0x1ad)]=!![],_0xf8ac0a;};[a128_0x55a473(0x182)]=async()=>{const _0x3541bb=a128_0x55a473,_0x434e3e={'AeBMP':_0x3541bb(0x183),'wIXLU':function(_0x4eddce,_0x24fc4b){return _0x4eddce>_0x24fc4b;},'jdAmF':_0x3541bb(0x172),'GjLsG':function(_0x5c0c31,_0x224b91){return _0x5c0c31(_0x224b91);}};await this[_0x3541bb(0x150)](),this[_0x3541bb(0x143)](_0x434e3e[_0x3541bb(0x15f)]);while(_0x434e3e[_0x3541bb(0x13d)](this[_0x3541bb(0x163)][_0x3541bb(0x1ae)],0x0)){const _0x352ee4=this[_0x3541bb(0x163)][_0x3541bb(0x199)](0x0,BATCH_SIZE);this[_0x3541bb(0x163)][_0x3541bb(0x197)](0x0,BATCH_SIZE),await this[_0x3541bb(0x19e)](this[_0x3541bb(0x1ac)],_0x434e3e[_0x3541bb(0x165)],_0x352ee4);}_0x434e3e[_0x3541bb(0x13d)](this[_0x3541bb(0x196)],0x0)&&_0x434e3e[_0x3541bb(0x177)](debug,_0x3541bb(0x185)+this[_0x3541bb(0x196)]);};[a128_0x55a473(0x19e)]=async(_0x198c3b,_0x3d9079,_0x539dc7)=>{const _0x383fa0=a128_0x55a473,_0x18c8cc={'VLshD':function(_0x2ff99d,_0x4f21eb){return _0x2ff99d(_0x4f21eb);},'dPtUo':_0x383fa0(0x178),'AHoCR':function(_0x3801e5){return _0x3801e5();},'SFJMF':function(_0x4e0644,_0x589bb7,_0x392528,_0x32ddbc,_0xf80054){return _0x4e0644(_0x589bb7,_0x392528,_0x32ddbc,_0xf80054);},'vbTXO':'POST','HIMGa':function(_0x3359bc,_0x232724){return _0x3359bc-_0x232724;},'lDjlU':function(_0x5aeb2c,_0x5b92ce){return _0x5aeb2c(_0x5b92ce);}};let _0x3daa4e='';try{_0x3daa4e=_0x539dc7['map'](_0x5a8b3b=>'\x27'+_0x5a8b3b[_0x383fa0(0x15c)]+'\x27:'+(nestedKeyValue(_0x5a8b3b,[_0x383fa0(0x14d),_0x383fa0(0x158)])||nestedKeyValue(_0x5a8b3b,[_0x383fa0(0x16c),_0x383fa0(0x158)])))[_0x383fa0(0x17f)](','),_0x18c8cc[_0x383fa0(0x18c)](debug,_0x383fa0(0x176)+_0x3d9079+'.\x20Request\x20Size\x20-\x20'+Buffer[_0x383fa0(0x149)](util['format']('%j',_0x539dc7),_0x18c8cc['dPtUo'])+_0x383fa0(0x141)+_0x3daa4e);}catch(_0x177205){_0x18c8cc[_0x383fa0(0x18c)](debug,'Exception\x20in\x20logging\x20batch\x20events\x20--\x20'+util[_0x383fa0(0x19a)](_0x177205)+'}');}const _0x117802={'headers':_0x18c8cc['AHoCR'](getDefaultHeaders)};try{const _0x22d046=await _0x18c8cc[_0x383fa0(0x181)](nodeRequest,_0x18c8cc[_0x383fa0(0x174)],_0x198c3b,_0x539dc7,_0x117802);if(_0x22d046[_0x383fa0(0x189)][_0x383fa0(0x171)]){const _0x47cbba={};_0x47cbba[_0x383fa0(0x14f)]=_0x22d046[_0x383fa0(0x189)][_0x383fa0(0x171)];throw _0x47cbba;}else _0x18c8cc[_0x383fa0(0x18c)](debug,_0x3d9079+'\x20event\x20successful\x20for\x20events\x20'+_0x3daa4e+_0x383fa0(0x180)+util['format']('%j',_0x22d046[_0x383fa0(0x189)])),this[_0x383fa0(0x196)]=Math[_0x383fa0(0x15d)](0x0,_0x18c8cc[_0x383fa0(0x16e)](this[_0x383fa0(0x196)],_0x539dc7[_0x383fa0(0x1ae)]));}catch(_0x34f3fa){_0x34f3fa[_0x383fa0(0x13e)]?_0x18c8cc[_0x383fa0(0x1a1)](debug,'EXCEPTION\x20IN\x20'+_0x3d9079+'\x20REQUEST\x20TO\x20'+constants['TEST_REPORTING_ANALYTICS']+_0x383fa0(0x1a5)+_0x34f3fa[_0x383fa0(0x13e)]['status']+'\x20'+_0x34f3fa['response'][_0x383fa0(0x188)]+'\x20'+util[_0x383fa0(0x19a)]('%j',_0x34f3fa[_0x383fa0(0x13e)])):_0x18c8cc[_0x383fa0(0x1a1)](debug,'EXCEPTION\x20IN\x20'+_0x3d9079+_0x383fa0(0x193)+constants['TEST_REPORTING_ANALYTICS']+'\x20:\x20'+(_0x34f3fa[_0x383fa0(0x14f)]||_0x34f3fa)),this[_0x383fa0(0x196)]=Math['max'](0x0,_0x18c8cc[_0x383fa0(0x16e)](this[_0x383fa0(0x196)],_0x539dc7[_0x383fa0(0x1ae)]));}};['startEventBatchPolling']=()=>{const _0x56dc89=a128_0x55a473,_0xe3a19d={'fsYpJ':function(_0x357239,_0x22af36){return _0x357239>_0x22af36;},'bAYKB':function(_0x5f3d58,_0x2b3c77){return _0x5f3d58(_0x2b3c77);},'nnGaj':_0x56dc89(0x18e),'sagQY':function(_0x3eab5d,_0x387c61){return _0x3eab5d(_0x387c61);},'LolsT':function(_0x3f3ec1,_0x46bf85,_0x5cc123){return _0x3f3ec1(_0x46bf85,_0x5cc123);}};this[_0x56dc89(0x19f)]=_0xe3a19d[_0x56dc89(0x18d)](setInterval,async()=>{const _0x196c20=_0x56dc89;if(_0xe3a19d[_0x196c20(0x162)](this[_0x196c20(0x163)][_0x196c20(0x1ae)],0x0)){_0xe3a19d[_0x196c20(0x14b)](trace,_0x196c20(0x19d)+this[_0x196c20(0x163)][_0x196c20(0x1ae)]);const _0x2a2313=this['queue'][_0x196c20(0x199)](0x0,BATCH_SIZE);this[_0x196c20(0x163)][_0x196c20(0x197)](0x0,BATCH_SIZE),await this[_0x196c20(0x19e)](this[_0x196c20(0x1ac)],_0xe3a19d[_0x196c20(0x1a8)],_0x2a2313),_0xe3a19d[_0x196c20(0x159)](trace,'Remaining\x20Queue\x20Length\x20-\x20'+this[_0x196c20(0x163)][_0x196c20(0x1ae)]);}},BATCH_INTERVAL);};[a128_0x55a473(0x17a)]=()=>{const _0x5e1d52=a128_0x55a473,_0x365499={};_0x365499[_0x5e1d52(0x173)]=_0x5e1d52(0x169);const _0xdb5dd9=_0x365499;this['removeEventBatchPolling'](_0xdb5dd9[_0x5e1d52(0x173)]),this[_0x5e1d52(0x157)]();};[a128_0x55a473(0x143)]=_0x174df1=>{const _0xaebcca=a128_0x55a473,_0x420ce6={'QTFoo':function(_0x5980c8,_0x39d250){return _0x5980c8(_0x39d250);},'exwKY':function(_0x1cbbc2,_0xdc9b50){return _0x1cbbc2===_0xdc9b50;},'vbBla':_0xaebcca(0x183)};this['pollEventBatchInterval']&&(_0x420ce6[_0xaebcca(0x145)](clearInterval,this[_0xaebcca(0x19f)]),this[_0xaebcca(0x19f)]=null,_0x420ce6[_0xaebcca(0x15a)](_0x174df1,_0x420ce6[_0xaebcca(0x191)])&&(this['started']=![]));};['shouldProceed']=()=>{const _0xec890f=a128_0x55a473,_0x238d45={};_0x238d45[_0xec890f(0x19b)]=function(_0x43a3f2,_0x27aae7){return _0x43a3f2>=_0x27aae7;};const _0x4f8ae6=_0x238d45;return _0x4f8ae6['NOrQJ'](this[_0xec890f(0x163)][_0xec890f(0x1ae)],BATCH_SIZE);};async[a128_0x55a473(0x150)](_0x154112=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x544e3d=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x429351=a128_0x55a473,_0x353f2d={'eiCQc':function(_0x4211c4,_0x3188fa){return _0x4211c4<=_0x3188fa;},'EtEmq':function(_0x55211f,_0x382436){return _0x55211f<=_0x382436;},'qaFLt':function(_0x1549fc,_0x435bd8){return _0x1549fc(_0x435bd8);},'JsJCP':function(_0x48c2fb,_0x3c898b){return _0x48c2fb-_0x3c898b;}};if(_0x353f2d[_0x429351(0x16f)](this['pendingUploads'],0x0)||_0x353f2d[_0x429351(0x179)](_0x154112,0x0))return;return await _0x353f2d[_0x429351(0x152)](sleep,_0x544e3d),this[_0x429351(0x150)](_0x353f2d['JsJCP'](_0x154112,_0x544e3d));}}module[a128_0x55a473(0x147)]=RequestQueueHandler;function a128_0x2b61(){const _0x5ae561=['shouldProceed','length','wIXLU','response','1326YivFlN','1292jfunLJ','\x20bytes.\x20Events\x20are\x20','LogCreated','removeEventBatchPolling','xzqam','QTFoo','RuzJl','exports','uploadAttachmentUrl','byteLength','logs','bAYKB','BATCH_EVENT_TYPES','test_run','api/v1/batch','message','uploadPending','../../bin/utils/constants','qaFLt','proceedWithData','8723bSPVJa','1309240PZvVxA','94LcTfml','startEventBatchPolling','uuid','sagQY','exwKY','HookRunFinished','event_type','max','TestRunFinished','AeBMP','getInstance','gElsO','fsYpJ','queue','TestRunSkipped','jdAmF','lcMbt','336570AczVaO','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','RESETTING','screenshotEventUrl','343VPtfyF','hook_run','LiNkL','HIMGa','eiCQc','HookRunStarted','error','Shutdown-Queue','YkWSf','vbTXO','3|2|1|5|6|0|4','Processing\x20batch\x20events\x20for\x20','GjLsG','utf8','EtEmq','resetEventBatchPolling','util','mxXSj','6972JPbILZ','zRvvi','join','\x20--\x20','SFJMF','shutdown','REMOVING','../helper','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','push','start','statusText','data','proceedWithUrl','MbJKE','VLshD','LolsT','Interval-Queue','add','VMsCX','vbBla','kind','\x20REQUEST\x20TO\x20','includes','1537930VssAir','pendingUploads','splice','upload-attachments','slice','format','NOrQJ','./utils','Processing\x20events.\x20Queue\x20Length\x20-\x20','batchAndPostEvents','pollEventBatchInterval','198CHxKnq','lDjlU','BrCoM','instance','RPGSG','\x20:\x20','started','9bXDyYH','nnGaj','206dEYoyt','GnxoE','11DZYpla','eventUrl'];a128_0x2b61=function(){return _0x5ae561;};return a128_0x2b61();}