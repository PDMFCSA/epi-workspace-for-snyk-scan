const a118_0xde25b4=a118_0x31fa;(function(_0x2ac777,_0x23fce8){const _0x446d9d=a118_0x31fa,_0x3328f4=_0x2ac777();while(!![]){try{const _0x215eb3=-parseInt(_0x446d9d(0xdd))/0x1+-parseInt(_0x446d9d(0x103))/0x2*(-parseInt(_0x446d9d(0x12c))/0x3)+-parseInt(_0x446d9d(0x116))/0x4+parseInt(_0x446d9d(0xf2))/0x5*(parseInt(_0x446d9d(0x14d))/0x6)+-parseInt(_0x446d9d(0xd8))/0x7*(-parseInt(_0x446d9d(0x14f))/0x8)+-parseInt(_0x446d9d(0xe7))/0x9+parseInt(_0x446d9d(0x105))/0xa*(parseInt(_0x446d9d(0x11b))/0xb);if(_0x215eb3===_0x23fce8)break;else _0x3328f4['push'](_0x3328f4['shift']());}catch(_0x34fd1c){_0x3328f4['push'](_0x3328f4['shift']());}}}(a118_0x1a91,0x2d589));function a118_0x31fa(_0x89ffb2,_0x57bdda){const _0x1a9114=a118_0x1a91();return a118_0x31fa=function(_0x31fa2d,_0x481b4f){_0x31fa2d=_0x31fa2d-0xd6;let _0x5cb14c=_0x1a9114[_0x31fa2d];return _0x5cb14c;},a118_0x31fa(_0x89ffb2,_0x57bdda);}const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a118_0xde25b4(0x10a)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a118_0xde25b4(0xf8)),{nestedKeyValue}=require('../helper'),util=require('util'),constants=require(a118_0xde25b4(0xea));class RequestQueueHandler{static [a118_0xde25b4(0xfc)];[a118_0xde25b4(0x118)]=0x0;constructor(){const _0x55bd3d=a118_0xde25b4,_0x15e49c={};_0x15e49c[_0x55bd3d(0x10f)]=_0x55bd3d(0x100),_0x15e49c[_0x55bd3d(0x148)]=_0x55bd3d(0x11a),_0x15e49c[_0x55bd3d(0x13f)]=_0x55bd3d(0xd9),_0x15e49c[_0x55bd3d(0x143)]='CBTSessionCreated',_0x15e49c['lLcZc']=_0x55bd3d(0x124),_0x15e49c[_0x55bd3d(0x10d)]=_0x55bd3d(0x123),_0x15e49c[_0x55bd3d(0xeb)]=_0x55bd3d(0x108),_0x15e49c[_0x55bd3d(0xed)]=_0x55bd3d(0x115),_0x15e49c['FTVgh']=_0x55bd3d(0xdb),_0x15e49c[_0x55bd3d(0x119)]=_0x55bd3d(0x13d),_0x15e49c[_0x55bd3d(0x142)]='api/v1/screenshots';const _0x4cffaa=_0x15e49c,_0x957b59=_0x4cffaa[_0x55bd3d(0x10f)][_0x55bd3d(0x140)]('|');let _0x44bcaf=0x0;while(!![]){switch(_0x957b59[_0x44bcaf++]){case'0':this[_0x55bd3d(0x131)]=null;continue;case'1':this[_0x55bd3d(0x137)]=![];continue;case'2':this[_0x55bd3d(0xfe)]=_0x4cffaa['hbpYV'];continue;case'3':this[_0x55bd3d(0x125)]=[_0x4cffaa[_0x55bd3d(0x13f)],_0x4cffaa[_0x55bd3d(0x143)],_0x4cffaa['lLcZc'],_0x4cffaa['bBUFa'],_0x4cffaa['pFBhz'],_0x4cffaa[_0x55bd3d(0xed)],_0x4cffaa[_0x55bd3d(0xff)]];continue;case'4':this[_0x55bd3d(0x135)]=[];continue;case'5':this[_0x55bd3d(0x129)]=_0x4cffaa['OTseJ'];continue;case'6':this[_0x55bd3d(0xf1)]=_0x4cffaa[_0x55bd3d(0x142)];continue;}break;}}static[a118_0xde25b4(0x12a)](){const _0x4410d8=a118_0xde25b4;return!RequestQueueHandler[_0x4410d8(0xfc)]&&(RequestQueueHandler[_0x4410d8(0xfc)]=new RequestQueueHandler()),RequestQueueHandler[_0x4410d8(0xfc)];}[a118_0xde25b4(0x117)]=()=>{const _0x5ccbe6=a118_0xde25b4;!this[_0x5ccbe6(0x137)]&&(this[_0x5ccbe6(0x137)]=!![],this[_0x5ccbe6(0xfa)]());};[a118_0xde25b4(0x12e)]=_0x1632d2=>{const _0x3d9555=a118_0xde25b4,_0x575c30={'lwmar':function(_0x32fcc6,_0x48947e){return _0x32fcc6===_0x48947e;},'cAMhL':_0x3d9555(0x133),'qZdzf':function(_0x3b84dd,_0x8725c8){return _0x3b84dd>_0x8725c8;},'UkWNs':_0x3d9555(0x146),'fdTfR':function(_0x5d10b9,_0x1ec1c8){return _0x5d10b9!==_0x1ec1c8;},'szvIN':_0x3d9555(0x124),'vCGBJ':function(_0x11cd87,_0x3ad683){return _0x11cd87(_0x3ad683);},'ztbjB':_0x3d9555(0xe8)};if(this[_0x3d9555(0x125)][_0x3d9555(0x101)](_0x1632d2[_0x3d9555(0xe0)])){if(_0x1632d2[_0x3d9555(0x14a)]&&_0x1632d2['logs'][0x0]&&_0x575c30[_0x3d9555(0xd7)](_0x1632d2[_0x3d9555(0x14a)][0x0][_0x3d9555(0xe1)],_0x575c30['cAMhL'])){const _0x4a0c7c={};return _0x4a0c7c[_0x3d9555(0x126)]=!![],_0x4a0c7c[_0x3d9555(0x113)]=[_0x1632d2],_0x4a0c7c[_0x3d9555(0x14b)]=this[_0x3d9555(0xf1)],_0x4a0c7c;}if(_0x1632d2['logs']&&_0x575c30[_0x3d9555(0x141)](_0x1632d2[_0x3d9555(0x14a)][_0x3d9555(0x11f)],0x0)&&_0x575c30[_0x3d9555(0xd7)](_0x1632d2['logs'][0x0][_0x3d9555(0xe1)],_0x575c30[_0x3d9555(0x122)])&&_0x575c30['fdTfR'](_0x1632d2[_0x3d9555(0xe0)],_0x575c30[_0x3d9555(0x110)])){const _0x52b2c1={};return _0x52b2c1[_0x3d9555(0x126)]=!![],_0x52b2c1[_0x3d9555(0x113)]=[_0x1632d2],_0x52b2c1[_0x3d9555(0x14b)]=this[_0x3d9555(0xfe)],_0x52b2c1;}this[_0x3d9555(0x135)]['push'](_0x1632d2);let _0x3c9c92=null;const _0x55fbb9=this[_0x3d9555(0x126)]();_0x55fbb9&&(_0x575c30[_0x3d9555(0xf3)](trace,_0x575c30[_0x3d9555(0x11d)]),_0x3c9c92=this[_0x3d9555(0x135)][_0x3d9555(0x104)](0x0,BATCH_SIZE),this['queue'][_0x3d9555(0xf0)](0x0,BATCH_SIZE),this[_0x3d9555(0x106)]());const _0x53b979={};return _0x53b979[_0x3d9555(0x126)]=_0x55fbb9,_0x53b979[_0x3d9555(0x113)]=_0x3c9c92,_0x53b979[_0x3d9555(0x14b)]=this[_0x3d9555(0x129)],_0x53b979;}const _0x3d44c9={};return _0x3d44c9[_0x3d9555(0x126)]=!![],_0x3d44c9;};[a118_0xde25b4(0x139)]=async()=>{const _0x2b8eae=a118_0xde25b4,_0x45a88b={'KOJfh':_0x2b8eae(0xee),'xDhyT':function(_0x5cf257,_0x2ed8db){return _0x5cf257>_0x2ed8db;},'FYdNl':_0x2b8eae(0xdf),'FmNxa':function(_0x3caa66,_0x24f393){return _0x3caa66>_0x24f393;},'cGzqI':function(_0x3f3cef,_0x524df3){return _0x3f3cef(_0x524df3);}};await this[_0x2b8eae(0x121)](),this[_0x2b8eae(0x109)](_0x45a88b[_0x2b8eae(0xf4)]);while(_0x45a88b[_0x2b8eae(0xdc)](this[_0x2b8eae(0x135)][_0x2b8eae(0x11f)],0x0)){const _0x219725=this[_0x2b8eae(0x135)][_0x2b8eae(0x104)](0x0,BATCH_SIZE);this['queue'][_0x2b8eae(0xf0)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this['eventUrl'],_0x45a88b['FYdNl'],_0x219725);}_0x45a88b[_0x2b8eae(0xe3)](this[_0x2b8eae(0x118)],0x0)&&_0x45a88b['cGzqI'](debug,_0x2b8eae(0x138)+this[_0x2b8eae(0x118)]);};[a118_0xde25b4(0xe2)]=async(_0x338c13,_0x531632,_0x46c12d)=>{const _0x2f1d77=a118_0xde25b4,_0x3da0e5={'mBANR':function(_0x9c52ca,_0x3a7aff){return _0x9c52ca(_0x3a7aff);},'thQej':_0x2f1d77(0x147),'rvJGO':function(_0x222030,_0x5be594){return _0x222030(_0x5be594);},'TmQcC':function(_0x1c047e){return _0x1c047e();},'TyveX':function(_0x1fa1b0,_0x309252,_0x3968f8,_0x5ec2ae,_0x844a77){return _0x1fa1b0(_0x309252,_0x3968f8,_0x5ec2ae,_0x844a77);},'UjeBt':_0x2f1d77(0xec),'dcNeB':function(_0x3aa157,_0x59d81e){return _0x3aa157-_0x59d81e;},'zJqlB':function(_0x550bfe,_0x5f18c9){return _0x550bfe(_0x5f18c9);},'mUApR':function(_0x284ba7,_0x131b49){return _0x284ba7(_0x131b49);}};let _0x140326='';try{_0x140326=_0x46c12d[_0x2f1d77(0x128)](_0x21f4aa=>'\x27'+_0x21f4aa[_0x2f1d77(0xe0)]+'\x27:'+(nestedKeyValue(_0x21f4aa,[_0x2f1d77(0x111),_0x2f1d77(0xf7)])||nestedKeyValue(_0x21f4aa,[_0x2f1d77(0x12d),'uuid'])))[_0x2f1d77(0xde)](','),_0x3da0e5[_0x2f1d77(0x120)](debug,_0x2f1d77(0xe5)+_0x531632+_0x2f1d77(0xe6)+Buffer['byteLength'](util[_0x2f1d77(0x13a)]('%j',_0x46c12d),_0x3da0e5[_0x2f1d77(0x13e)])+_0x2f1d77(0x12b)+_0x140326);}catch(_0x17cea8){_0x3da0e5[_0x2f1d77(0xfb)](debug,_0x2f1d77(0x10b)+util[_0x2f1d77(0x13a)](_0x17cea8)+'}');}const _0x4bb2fa={'headers':_0x3da0e5[_0x2f1d77(0x112)](getDefaultHeaders)};try{const _0x8ec96c=await _0x3da0e5[_0x2f1d77(0xfd)](nodeRequest,_0x3da0e5[_0x2f1d77(0x10e)],_0x338c13,_0x46c12d,_0x4bb2fa);if(_0x8ec96c[_0x2f1d77(0x14e)]['error']){const _0xabf62d={};_0xabf62d[_0x2f1d77(0xda)]=_0x8ec96c['data'][_0x2f1d77(0xef)];throw _0xabf62d;}else _0x3da0e5['mBANR'](debug,_0x531632+'\x20event\x20successful\x20for\x20events\x20'+_0x140326+_0x2f1d77(0xf9)+util[_0x2f1d77(0x13a)]('%j',_0x8ec96c[_0x2f1d77(0x14e)])),this['pendingUploads']=Math[_0x2f1d77(0x145)](0x0,_0x3da0e5[_0x2f1d77(0x114)](this[_0x2f1d77(0x118)],_0x46c12d[_0x2f1d77(0x11f)]));}catch(_0x5ae300){_0x5ae300['response']?_0x3da0e5[_0x2f1d77(0x130)](debug,_0x2f1d77(0xf6)+_0x531632+_0x2f1d77(0xd6)+constants['TEST_REPORTING_ANALYTICS']+'\x20:\x20'+_0x5ae300['response'][_0x2f1d77(0x136)]+'\x20'+_0x5ae300[_0x2f1d77(0x10c)][_0x2f1d77(0x14c)]+'\x20'+util['format']('%j',_0x5ae300[_0x2f1d77(0x10c)])):_0x3da0e5['mUApR'](debug,_0x2f1d77(0xf6)+_0x531632+_0x2f1d77(0xd6)+constants[_0x2f1d77(0x12f)]+'\x20:\x20'+(_0x5ae300[_0x2f1d77(0xda)]||_0x5ae300)),this[_0x2f1d77(0x118)]=Math['max'](0x0,_0x3da0e5['dcNeB'](this[_0x2f1d77(0x118)],_0x46c12d[_0x2f1d77(0x11f)]));}};[a118_0xde25b4(0xfa)]=()=>{const _0x5d3ab9=a118_0xde25b4,_0x23e465={'HbOGF':function(_0x3525b5,_0x8df370){return _0x3525b5>_0x8df370;},'znCyT':function(_0x18b18a,_0x436f06){return _0x18b18a(_0x436f06);},'EvhTK':_0x5d3ab9(0x11c),'Onckr':function(_0x1c26a0,_0x4c4287){return _0x1c26a0(_0x4c4287);},'kNQHy':function(_0xef091f,_0x377ca9,_0x252c4c){return _0xef091f(_0x377ca9,_0x252c4c);}};this[_0x5d3ab9(0x131)]=_0x23e465[_0x5d3ab9(0x13b)](setInterval,async()=>{const _0x11bf0d=_0x5d3ab9;if(_0x23e465[_0x11bf0d(0x13c)](this[_0x11bf0d(0x135)][_0x11bf0d(0x11f)],0x0)){_0x23e465[_0x11bf0d(0x102)](trace,_0x11bf0d(0x134)+this[_0x11bf0d(0x135)][_0x11bf0d(0x11f)]);const _0x462568=this[_0x11bf0d(0x135)][_0x11bf0d(0x104)](0x0,BATCH_SIZE);this[_0x11bf0d(0x135)][_0x11bf0d(0xf0)](0x0,BATCH_SIZE),await this[_0x11bf0d(0xe2)](this[_0x11bf0d(0x129)],_0x23e465[_0x11bf0d(0xe4)],_0x462568),_0x23e465[_0x11bf0d(0xe9)](trace,_0x11bf0d(0x127)+this[_0x11bf0d(0x135)]['length']);}},BATCH_INTERVAL);};['resetEventBatchPolling']=()=>{const _0x4305c3=a118_0xde25b4,_0x247b45={};_0x247b45[_0x4305c3(0x11e)]='RESETTING';const _0x7b8eea=_0x247b45;this[_0x4305c3(0x109)](_0x7b8eea[_0x4305c3(0x11e)]),this['startEventBatchPolling']();};[a118_0xde25b4(0x109)]=_0x22f6f0=>{const _0x53dd8c=a118_0xde25b4,_0x203ecd={'bTUmM':function(_0x11f270,_0x6a5f33){return _0x11f270(_0x6a5f33);},'VJwXx':function(_0x5eca36,_0x31988e){return _0x5eca36===_0x31988e;},'CWIfG':_0x53dd8c(0xee)};this[_0x53dd8c(0x131)]&&(_0x203ecd['bTUmM'](clearInterval,this[_0x53dd8c(0x131)]),this[_0x53dd8c(0x131)]=null,_0x203ecd[_0x53dd8c(0x144)](_0x22f6f0,_0x203ecd['CWIfG'])&&(this[_0x53dd8c(0x137)]=![]));};[a118_0xde25b4(0x126)]=()=>{const _0x5f4832=a118_0xde25b4,_0x112545={};_0x112545[_0x5f4832(0x107)]=function(_0x3f9705,_0x60fed1){return _0x3f9705>=_0x60fed1;};const _0x352acd=_0x112545;return _0x352acd[_0x5f4832(0x107)](this[_0x5f4832(0x135)][_0x5f4832(0x11f)],BATCH_SIZE);};async[a118_0xde25b4(0x121)](_0x8a8290=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x7495da=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0xa6830d=a118_0xde25b4,_0x5d573e={'fZTMp':function(_0x2dfab5,_0x9158b7){return _0x2dfab5<=_0x9158b7;},'pTRBC':function(_0x58bb7b,_0x1d0d12){return _0x58bb7b(_0x1d0d12);},'BeeVn':function(_0x1670e8,_0x3fec5d){return _0x1670e8-_0x3fec5d;}};if(_0x5d573e['fZTMp'](this[_0xa6830d(0x118)],0x0)||_0x5d573e['fZTMp'](_0x8a8290,0x0))return;return await _0x5d573e[_0xa6830d(0xf5)](sleep,_0x7495da),this[_0xa6830d(0x121)](_0x5d573e[_0xa6830d(0x149)](_0x8a8290,_0x7495da));}}module[a118_0xde25b4(0x132)]=RequestQueueHandler;function a118_0x1a91(){const _0x120a2b=['61912JSovDb','\x20REQUEST\x20TO\x20','lwmar','70BkoAvE','LogCreated','message','HookRunStarted','xDhyT','146225ssHCMt','join','Shutdown-Queue','event_type','kind','batchAndPostEvents','FmNxa','EvhTK','Processing\x20batch\x20events\x20for\x20','.\x20Request\x20Size\x20-\x20','2811618LmnqkZ','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','Onckr','../../bin/utils/constants','pFBhz','POST','JutKs','REMOVING','error','splice','screenshotEventUrl','395DBfYiB','vCGBJ','KOJfh','pTRBC','EXCEPTION\x20IN\x20','uuid','./utils','\x20--\x20','startEventBatchPolling','rvJGO','instance','TyveX','uploadAttachmentUrl','FTVgh','4|1|5|6|2|3|0','includes','znCyT','43898InIjAV','slice','2440nSktxD','resetEventBatchPolling','WRxVR','HookRunFinished','removeEventBatchPolling','./constants','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','response','bBUFa','UjeBt','tWBEX','szvIN','test_run','TmQcC','proceedWithData','dcNeB','TestRunStarted','839668eTDNjQ','start','pendingUploads','OTseJ','upload-attachments','19536bENrHu','Interval-Queue','ztbjB','cTCdz','length','mBANR','uploadPending','UkWNs','TestRunSkipped','TestRunFinished','BATCH_EVENT_TYPES','shouldProceed','Remaining\x20Queue\x20Length\x20-\x20','map','eventUrl','getInstance','\x20bytes.\x20Events\x20are\x20','42DJUlUd','hook_run','add','TEST_REPORTING_ANALYTICS','zJqlB','pollEventBatchInterval','exports','TEST_SCREENSHOT','Processing\x20events.\x20Queue\x20Length\x20-\x20','queue','status','started','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','shutdown','format','kNQHy','HbOGF','api/v1/batch','thQej','kokjc','split','qZdzf','DDLWo','pzPTx','VJwXx','max','TEST_ATTACHMENT','utf8','hbpYV','BeeVn','logs','proceedWithUrl','statusText','2754BVcVti','data'];a118_0x1a91=function(){return _0x120a2b;};return a118_0x1a91();}