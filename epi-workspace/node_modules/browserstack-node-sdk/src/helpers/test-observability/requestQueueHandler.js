const a127_0x95e8fc=a127_0x25f1;(function(_0x54dfe0,_0x32e941){const _0x34647c=a127_0x25f1,_0x1ca03f=_0x54dfe0();while(!![]){try{const _0x59ee44=parseInt(_0x34647c(0x123))/0x1*(parseInt(_0x34647c(0xf9))/0x2)+-parseInt(_0x34647c(0x156))/0x3+parseInt(_0x34647c(0x161))/0x4+-parseInt(_0x34647c(0x121))/0x5*(parseInt(_0x34647c(0x168))/0x6)+parseInt(_0x34647c(0xfa))/0x7+parseInt(_0x34647c(0x164))/0x8*(-parseInt(_0x34647c(0x15d))/0x9)+-parseInt(_0x34647c(0xf7))/0xa;if(_0x59ee44===_0x32e941)break;else _0x1ca03f['push'](_0x1ca03f['shift']());}catch(_0x3e3cd2){_0x1ca03f['push'](_0x1ca03f['shift']());}}}(a127_0x313e,0xd21d1));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require('./constants'),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require('./utils'),{nestedKeyValue}=require(a127_0x95e8fc(0x10a)),util=require(a127_0x95e8fc(0xfc)),constants=require(a127_0x95e8fc(0x127));class RequestQueueHandler{static [a127_0x95e8fc(0x169)];[a127_0x95e8fc(0xf5)]=0x0;constructor(){const _0x5a3983=a127_0x95e8fc,_0x9b6117={};_0x9b6117[_0x5a3983(0x140)]=_0x5a3983(0x124),_0x9b6117[_0x5a3983(0x107)]='LogCreated',_0x9b6117[_0x5a3983(0x166)]=_0x5a3983(0x15a),_0x9b6117[_0x5a3983(0x120)]='TestRunFinished',_0x9b6117[_0x5a3983(0x135)]=_0x5a3983(0x10c),_0x9b6117[_0x5a3983(0x150)]=_0x5a3983(0x157),_0x9b6117['RSnkz']='TestRunStarted',_0x9b6117[_0x5a3983(0x126)]=_0x5a3983(0xf6),_0x9b6117[_0x5a3983(0x13f)]=_0x5a3983(0x136),_0x9b6117[_0x5a3983(0x130)]=_0x5a3983(0x10e),_0x9b6117[_0x5a3983(0x109)]=_0x5a3983(0xfb);const _0x53298a=_0x9b6117,_0x23ba8d=_0x53298a[_0x5a3983(0x140)][_0x5a3983(0x11d)]('|');let _0x205ef8=0x0;while(!![]){switch(_0x23ba8d[_0x205ef8++]){case'0':this[_0x5a3983(0x154)]=[_0x53298a[_0x5a3983(0x107)],_0x53298a[_0x5a3983(0x166)],_0x53298a['jMYQK'],_0x53298a[_0x5a3983(0x135)],_0x53298a[_0x5a3983(0x150)],_0x53298a[_0x5a3983(0xf8)],_0x53298a[_0x5a3983(0x126)]];continue;case'1':this['uploadAttachmentUrl']=_0x53298a[_0x5a3983(0x13f)];continue;case'2':this[_0x5a3983(0x16b)]=_0x53298a[_0x5a3983(0x130)];continue;case'3':this[_0x5a3983(0x149)]=[];continue;case'4':this[_0x5a3983(0x11f)]=_0x53298a[_0x5a3983(0x109)];continue;case'5':this[_0x5a3983(0x114)]=null;continue;case'6':this['started']=![];continue;}break;}}static['getInstance'](){const _0x465035=a127_0x95e8fc;return!RequestQueueHandler[_0x465035(0x169)]&&(RequestQueueHandler[_0x465035(0x169)]=new RequestQueueHandler()),RequestQueueHandler[_0x465035(0x169)];}[a127_0x95e8fc(0x11e)]=()=>{const _0x3db762=a127_0x95e8fc;!this[_0x3db762(0x129)]&&(this['started']=!![],this[_0x3db762(0x146)]());};['add']=_0x1a235a=>{const _0x53b060=a127_0x95e8fc,_0x586946={'tAuLj':function(_0x4c4c06,_0x175b0c){return _0x4c4c06===_0x175b0c;},'hQviW':_0x53b060(0x12f),'OkCmg':function(_0x2685cc,_0x22c9ce){return _0x2685cc>_0x22c9ce;},'Uzxgj':_0x53b060(0x148),'haytO':function(_0x359f36,_0x58356e){return _0x359f36!==_0x58356e;},'TkPmS':_0x53b060(0x115),'HLOFa':function(_0x3e573c,_0x3a509b){return _0x3e573c(_0x3a509b);},'qOWlt':_0x53b060(0x16a)};if(this[_0x53b060(0x154)][_0x53b060(0x131)](_0x1a235a[_0x53b060(0x110)])){if(_0x1a235a[_0x53b060(0x12b)]&&_0x1a235a[_0x53b060(0x12b)][0x0]&&_0x586946[_0x53b060(0x13b)](_0x1a235a[_0x53b060(0x12b)][0x0][_0x53b060(0x160)],_0x586946[_0x53b060(0xfe)])){const _0x3238b7={};return _0x3238b7['shouldProceed']=!![],_0x3238b7[_0x53b060(0x153)]=[_0x1a235a],_0x3238b7[_0x53b060(0x125)]=this[_0x53b060(0x16b)],_0x3238b7;}if(_0x1a235a[_0x53b060(0x12b)]&&_0x586946[_0x53b060(0x11b)](_0x1a235a[_0x53b060(0x12b)]['length'],0x0)&&_0x586946[_0x53b060(0x13b)](_0x1a235a[_0x53b060(0x12b)][0x0]['kind'],_0x586946['Uzxgj'])&&_0x586946[_0x53b060(0xff)](_0x1a235a[_0x53b060(0x110)],_0x586946[_0x53b060(0x106)])){const _0x182e0a={};return _0x182e0a[_0x53b060(0x15f)]=!![],_0x182e0a[_0x53b060(0x153)]=[_0x1a235a],_0x182e0a[_0x53b060(0x125)]=this[_0x53b060(0x147)],_0x182e0a;}this['queue'][_0x53b060(0x100)](_0x1a235a);let _0x3796cb=null;const _0x32ef92=this[_0x53b060(0x15f)]();_0x32ef92&&(_0x586946[_0x53b060(0x108)](trace,_0x586946[_0x53b060(0x102)]),_0x3796cb=this[_0x53b060(0x149)][_0x53b060(0x138)](0x0,BATCH_SIZE),this[_0x53b060(0x149)]['splice'](0x0,BATCH_SIZE),this[_0x53b060(0x145)]());const _0xd46bf1={};return _0xd46bf1[_0x53b060(0x15f)]=_0x32ef92,_0xd46bf1['proceedWithData']=_0x3796cb,_0xd46bf1['proceedWithUrl']=this['eventUrl'],_0xd46bf1;}const _0x5acf4b={};return _0x5acf4b[_0x53b060(0x15f)]=!![],_0x5acf4b;};[a127_0x95e8fc(0x13d)]=async()=>{const _0x126575=a127_0x95e8fc,_0x4d6a9d={'WOrPx':'REMOVING','ZhoDc':function(_0xdb9cf9,_0x343a86){return _0xdb9cf9>_0x343a86;},'xzZPA':_0x126575(0x12a),'kOhwK':function(_0x40dd56,_0x432dad){return _0x40dd56(_0x432dad);}};await this[_0x126575(0x104)](),this[_0x126575(0x11a)](_0x4d6a9d[_0x126575(0x167)]);while(_0x4d6a9d['ZhoDc'](this[_0x126575(0x149)]['length'],0x0)){const _0x418883=this[_0x126575(0x149)][_0x126575(0x138)](0x0,BATCH_SIZE);this[_0x126575(0x149)][_0x126575(0x10f)](0x0,BATCH_SIZE),await this[_0x126575(0x132)](this['eventUrl'],_0x4d6a9d[_0x126575(0x152)],_0x418883);}_0x4d6a9d[_0x126575(0x134)](this[_0x126575(0xf5)],0x0)&&_0x4d6a9d['kOhwK'](debug,_0x126575(0x13e)+this[_0x126575(0xf5)]);};[a127_0x95e8fc(0x132)]=async(_0x1184cc,_0xdbc08b,_0x3210ff)=>{const _0x1eacf4=a127_0x95e8fc,_0x1e4ed1={'PYiMA':function(_0x38a9de,_0x4d0c32){return _0x38a9de(_0x4d0c32);},'XBPcB':_0x1eacf4(0x112),'pZgUv':function(_0x27b046){return _0x27b046();},'WylJc':function(_0x5e045f,_0x60bd59,_0x593a1c,_0x59321d,_0x1498bb){return _0x5e045f(_0x60bd59,_0x593a1c,_0x59321d,_0x1498bb);},'IqVww':_0x1eacf4(0x162),'qFvby':function(_0x3d7ea9,_0x27579d){return _0x3d7ea9(_0x27579d);},'thbOK':function(_0x392f41,_0x5e5f41){return _0x392f41-_0x5e5f41;},'ezOtw':function(_0x3db18d,_0x51c3d8){return _0x3db18d(_0x51c3d8);}};let _0x47cde5='';try{_0x47cde5=_0x3210ff[_0x1eacf4(0x12d)](_0x49e6e9=>'\x27'+_0x49e6e9[_0x1eacf4(0x110)]+'\x27:'+(nestedKeyValue(_0x49e6e9,[_0x1eacf4(0x119),_0x1eacf4(0x10b)])||nestedKeyValue(_0x49e6e9,[_0x1eacf4(0x155),'uuid'])))[_0x1eacf4(0x111)](','),_0x1e4ed1[_0x1eacf4(0x12e)](debug,'Processing\x20batch\x20events\x20for\x20'+_0xdbc08b+'.\x20Request\x20Size\x20-\x20'+Buffer[_0x1eacf4(0x133)](util[_0x1eacf4(0x144)]('%j',_0x3210ff),_0x1e4ed1[_0x1eacf4(0xfd)])+'\x20bytes.\x20Events\x20are\x20'+_0x47cde5);}catch(_0x41589a){_0x1e4ed1['PYiMA'](debug,_0x1eacf4(0x105)+util[_0x1eacf4(0x144)](_0x41589a)+'}');}const _0xbd574e={'headers':_0x1e4ed1[_0x1eacf4(0x10d)](getDefaultHeaders)};try{const _0x3ee2b1=await _0x1e4ed1[_0x1eacf4(0x14b)](nodeRequest,_0x1e4ed1[_0x1eacf4(0x15b)],_0x1184cc,_0x3210ff,_0xbd574e);if(_0x3ee2b1[_0x1eacf4(0x116)][_0x1eacf4(0x16c)]){const _0x3146e5={};_0x3146e5[_0x1eacf4(0x13a)]=_0x3ee2b1[_0x1eacf4(0x116)][_0x1eacf4(0x16c)];throw _0x3146e5;}else _0x1e4ed1[_0x1eacf4(0x11c)](debug,_0xdbc08b+_0x1eacf4(0x159)+_0x47cde5+'\x20--\x20'+util[_0x1eacf4(0x144)]('%j',_0x3ee2b1[_0x1eacf4(0x116)])),this['pendingUploads']=Math[_0x1eacf4(0x143)](0x0,_0x1e4ed1['thbOK'](this['pendingUploads'],_0x3210ff[_0x1eacf4(0x15c)]));}catch(_0x418df8){_0x418df8['response']?_0x1e4ed1[_0x1eacf4(0x101)](debug,_0x1eacf4(0x165)+_0xdbc08b+_0x1eacf4(0x12c)+constants[_0x1eacf4(0x14f)]+'\x20:\x20'+_0x418df8[_0x1eacf4(0x128)][_0x1eacf4(0x14c)]+'\x20'+_0x418df8[_0x1eacf4(0x128)]['statusText']+'\x20'+util[_0x1eacf4(0x144)]('%j',_0x418df8['response'])):_0x1e4ed1['qFvby'](debug,'EXCEPTION\x20IN\x20'+_0xdbc08b+'\x20REQUEST\x20TO\x20'+constants['TEST_REPORTING_ANALYTICS']+_0x1eacf4(0x158)+(_0x418df8[_0x1eacf4(0x13a)]||_0x418df8)),this['pendingUploads']=Math[_0x1eacf4(0x143)](0x0,_0x1e4ed1[_0x1eacf4(0x14a)](this['pendingUploads'],_0x3210ff['length']));}};[a127_0x95e8fc(0x146)]=()=>{const _0x2cedea=a127_0x95e8fc,_0x3a6725={'WxmZV':function(_0x30ef0c,_0x3f4156){return _0x30ef0c>_0x3f4156;},'FJyvH':function(_0x4bc829,_0x3275e1){return _0x4bc829(_0x3275e1);},'rRnVK':'Interval-Queue','czUOd':function(_0x505a4e,_0x30b2f9,_0x2bde18){return _0x505a4e(_0x30b2f9,_0x2bde18);}};this['pollEventBatchInterval']=_0x3a6725[_0x2cedea(0x141)](setInterval,async()=>{const _0x7c8781=_0x2cedea;if(_0x3a6725[_0x7c8781(0x118)](this[_0x7c8781(0x149)]['length'],0x0)){_0x3a6725['FJyvH'](trace,_0x7c8781(0x113)+this[_0x7c8781(0x149)]['length']);const _0x56413a=this['queue']['slice'](0x0,BATCH_SIZE);this['queue'][_0x7c8781(0x10f)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x7c8781(0x11f)],_0x3a6725[_0x7c8781(0x13c)],_0x56413a),_0x3a6725[_0x7c8781(0x151)](trace,_0x7c8781(0x163)+this[_0x7c8781(0x149)][_0x7c8781(0x15c)]);}},BATCH_INTERVAL);};[a127_0x95e8fc(0x145)]=()=>{const _0x29a622=a127_0x95e8fc,_0x20a341={};_0x20a341['KulqL']='RESETTING';const _0x55c4ed=_0x20a341;this[_0x29a622(0x11a)](_0x55c4ed[_0x29a622(0x14e)]),this[_0x29a622(0x146)]();};[a127_0x95e8fc(0x11a)]=_0x18f5e1=>{const _0x596f25=a127_0x95e8fc,_0x378999={'bVlkn':function(_0x206f7b,_0x17bf20){return _0x206f7b(_0x17bf20);},'omBKL':function(_0x346c8f,_0x21bdfd){return _0x346c8f===_0x21bdfd;},'EedJm':_0x596f25(0x139)};this[_0x596f25(0x114)]&&(_0x378999[_0x596f25(0x14d)](clearInterval,this[_0x596f25(0x114)]),this['pollEventBatchInterval']=null,_0x378999[_0x596f25(0x103)](_0x18f5e1,_0x378999['EedJm'])&&(this[_0x596f25(0x129)]=![]));};[a127_0x95e8fc(0x15f)]=()=>{const _0x3e942e=a127_0x95e8fc,_0x4290ee={};_0x4290ee[_0x3e942e(0x142)]=function(_0x4f40c2,_0x153444){return _0x4f40c2>=_0x153444;};const _0xd63d4=_0x4290ee;return _0xd63d4[_0x3e942e(0x142)](this['queue'][_0x3e942e(0x15c)],BATCH_SIZE);};async[a127_0x95e8fc(0x104)](_0x1fa404=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x5f2813=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x20e04d=a127_0x95e8fc,_0x21d937={'pzici':function(_0x2c7873,_0x1aa00e){return _0x2c7873<=_0x1aa00e;},'BqyzB':function(_0x4e7210,_0x3e67fd){return _0x4e7210(_0x3e67fd);},'LlCAp':function(_0x35173a,_0x4d8227){return _0x35173a-_0x4d8227;}};if(_0x21d937['pzici'](this[_0x20e04d(0xf5)],0x0)||_0x21d937[_0x20e04d(0x137)](_0x1fa404,0x0))return;return await _0x21d937[_0x20e04d(0x117)](sleep,_0x5f2813),this['uploadPending'](_0x21d937[_0x20e04d(0x122)](_0x1fa404,_0x5f2813));}}function a127_0x313e(){const _0x368c05=['data','BqyzB','WxmZV','test_run','removeEventBatchPolling','OkCmg','qFvby','split','start','eventUrl','jMYQK','7080735KpXPoo','LlCAp','1468403FAcIfW','3|6|4|2|1|0|5','proceedWithUrl','mVZHA','../../bin/utils/constants','response','started','Shutdown-Queue','logs','\x20REQUEST\x20TO\x20','map','PYiMA','TEST_SCREENSHOT','iXrAv','includes','batchAndPostEvents','byteLength','ZhoDc','PjdqN','upload-attachments','pzici','slice','REMOVING','message','tAuLj','rRnVK','shutdown','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','MQfen','gmRDE','czUOd','oEQRn','max','format','resetEventBatchPolling','startEventBatchPolling','uploadAttachmentUrl','TEST_ATTACHMENT','queue','thbOK','WylJc','status','bVlkn','KulqL','TEST_REPORTING_ANALYTICS','wbgCC','FJyvH','xzZPA','proceedWithData','BATCH_EVENT_TYPES','hook_run','1816953IrCaSW','HookRunFinished','\x20:\x20','\x20event\x20successful\x20for\x20events\x20','CBTSessionCreated','IqVww','length','9MWdYfo','exports','shouldProceed','kind','6529064KMVLZg','POST','Remaining\x20Queue\x20Length\x20-\x20','11932944NDVNug','EXCEPTION\x20IN\x20','YHRuC','WOrPx','6LYnAED','instance','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','screenshotEventUrl','error','pendingUploads','HookRunStarted','2544740cwUuje','RSnkz','2HrFlgp','10694922NIScBb','api/v1/batch','util','XBPcB','hQviW','haytO','push','ezOtw','qOWlt','omBKL','uploadPending','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','TkPmS','ImVvO','HLOFa','FKfwU','../helper','uuid','TestRunSkipped','pZgUv','api/v1/screenshots','splice','event_type','join','utf8','Processing\x20events.\x20Queue\x20Length\x20-\x20','pollEventBatchInterval','TestRunFinished'];a127_0x313e=function(){return _0x368c05;};return a127_0x313e();}function a127_0x25f1(_0x5459d1,_0x4c53cc){const _0x313e78=a127_0x313e();return a127_0x25f1=function(_0x25f1de,_0x5d8426){_0x25f1de=_0x25f1de-0xf5;let _0xfd070a=_0x313e78[_0x25f1de];return _0xfd070a;},a127_0x25f1(_0x5459d1,_0x4c53cc);}module[a127_0x95e8fc(0x15e)]=RequestQueueHandler;