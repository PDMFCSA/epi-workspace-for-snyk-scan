const a128_0x32aa5d=a128_0x1b29;(function(_0x598696,_0x2c7ea0){const _0x3ac5b0=a128_0x1b29,_0x220825=_0x598696();while(!![]){try{const _0x36fd15=-parseInt(_0x3ac5b0(0x215))/0x1+-parseInt(_0x3ac5b0(0x245))/0x2*(parseInt(_0x3ac5b0(0x232))/0x3)+parseInt(_0x3ac5b0(0x222))/0x4+parseInt(_0x3ac5b0(0x1f3))/0x5*(parseInt(_0x3ac5b0(0x21b))/0x6)+parseInt(_0x3ac5b0(0x1ef))/0x7+parseInt(_0x3ac5b0(0x239))/0x8*(-parseInt(_0x3ac5b0(0x218))/0x9)+parseInt(_0x3ac5b0(0x23a))/0xa*(parseInt(_0x3ac5b0(0x1e6))/0xb);if(_0x36fd15===_0x2c7ea0)break;else _0x220825['push'](_0x220825['shift']());}catch(_0x3e517c){_0x220825['push'](_0x220825['shift']());}}}(a128_0x142a,0x92598));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require('./constants'),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a128_0x32aa5d(0x1f1)),{nestedKeyValue}=require(a128_0x32aa5d(0x228)),util=require(a128_0x32aa5d(0x1fa)),constants=require(a128_0x32aa5d(0x230));function a128_0x1b29(_0x438edd,_0x48844c){const _0x142aca=a128_0x142a();return a128_0x1b29=function(_0x1b29c9,_0x3454f0){_0x1b29c9=_0x1b29c9-0x1d3;let _0x2a9888=_0x142aca[_0x1b29c9];return _0x2a9888;},a128_0x1b29(_0x438edd,_0x48844c);}class RequestQueueHandler{static ['instance'];[a128_0x32aa5d(0x1ee)]=0x0;constructor(){const _0x4bcf50=a128_0x32aa5d,_0x4e8bae={};_0x4e8bae[_0x4bcf50(0x1dc)]=_0x4bcf50(0x203),_0x4e8bae[_0x4bcf50(0x1f8)]=_0x4bcf50(0x1e5),_0x4e8bae[_0x4bcf50(0x24f)]='api/v1/screenshots',_0x4e8bae[_0x4bcf50(0x22a)]=_0x4bcf50(0x1d3),_0x4e8bae[_0x4bcf50(0x22c)]=_0x4bcf50(0x233),_0x4e8bae[_0x4bcf50(0x20f)]=_0x4bcf50(0x242),_0x4e8bae[_0x4bcf50(0x1f6)]=_0x4bcf50(0x24a),_0x4e8bae[_0x4bcf50(0x22d)]=_0x4bcf50(0x1ff),_0x4e8bae['QTBfP']=_0x4bcf50(0x21a),_0x4e8bae[_0x4bcf50(0x224)]='HookRunStarted',_0x4e8bae[_0x4bcf50(0x217)]=_0x4bcf50(0x1f5);const _0x2d406b=_0x4e8bae,_0x26f3cd=_0x2d406b[_0x4bcf50(0x1dc)][_0x4bcf50(0x23c)]('|');let _0x25219d=0x0;while(!![]){switch(_0x26f3cd[_0x25219d++]){case'0':this[_0x4bcf50(0x23e)]=_0x2d406b['QkBql'];continue;case'1':this['started']=![];continue;case'2':this[_0x4bcf50(0x23b)]=_0x2d406b['wBlBo'];continue;case'3':this[_0x4bcf50(0x237)]=null;continue;case'4':this[_0x4bcf50(0x1e7)]=[_0x2d406b[_0x4bcf50(0x22a)],_0x2d406b[_0x4bcf50(0x22c)],_0x2d406b[_0x4bcf50(0x20f)],_0x2d406b[_0x4bcf50(0x1f6)],_0x2d406b[_0x4bcf50(0x22d)],_0x2d406b[_0x4bcf50(0x24d)],_0x2d406b['xLztv']];continue;case'5':this[_0x4bcf50(0x246)]=[];continue;case'6':this['uploadAttachmentUrl']=_0x2d406b[_0x4bcf50(0x217)];continue;}break;}}static[a128_0x32aa5d(0x1da)](){const _0x4ef5db=a128_0x32aa5d;return!RequestQueueHandler[_0x4ef5db(0x234)]&&(RequestQueueHandler[_0x4ef5db(0x234)]=new RequestQueueHandler()),RequestQueueHandler['instance'];}[a128_0x32aa5d(0x220)]=()=>{const _0x13565c=a128_0x32aa5d;!this['started']&&(this[_0x13565c(0x235)]=!![],this['startEventBatchPolling']());};[a128_0x32aa5d(0x1e0)]=_0x24d112=>{const _0x482c81=a128_0x32aa5d,_0x26c5c6={'BoxlT':function(_0x1ef950,_0x188962){return _0x1ef950===_0x188962;},'wEZWg':_0x482c81(0x247),'tEpcY':function(_0x8df15f,_0x3bf727){return _0x8df15f>_0x3bf727;},'RcyJy':'TEST_ATTACHMENT','LkZir':function(_0xb8b797,_0x1f7962){return _0xb8b797!==_0x1f7962;},'aMLoF':_0x482c81(0x242),'QfTdt':function(_0x23dbe4,_0x1f52f4){return _0x23dbe4(_0x1f52f4);},'RwZBV':_0x482c81(0x1f2)};if(this['BATCH_EVENT_TYPES']['includes'](_0x24d112['event_type'])){if(_0x24d112['logs']&&_0x24d112[_0x482c81(0x1ec)][0x0]&&_0x26c5c6[_0x482c81(0x1eb)](_0x24d112[_0x482c81(0x1ec)][0x0][_0x482c81(0x1d4)],_0x26c5c6[_0x482c81(0x226)])){const _0x1d5b57={};return _0x1d5b57['shouldProceed']=!![],_0x1d5b57[_0x482c81(0x210)]=[_0x24d112],_0x1d5b57[_0x482c81(0x1d5)]=this[_0x482c81(0x23b)],_0x1d5b57;}if(_0x24d112[_0x482c81(0x1ec)]&&_0x26c5c6[_0x482c81(0x221)](_0x24d112[_0x482c81(0x1ec)][_0x482c81(0x20b)],0x0)&&_0x26c5c6['BoxlT'](_0x24d112[_0x482c81(0x1ec)][0x0][_0x482c81(0x1d4)],_0x26c5c6[_0x482c81(0x1e4)])&&_0x26c5c6[_0x482c81(0x22b)](_0x24d112['event_type'],_0x26c5c6[_0x482c81(0x1f9)])){const _0x236f77={};return _0x236f77['shouldProceed']=!![],_0x236f77[_0x482c81(0x210)]=[_0x24d112],_0x236f77[_0x482c81(0x1d5)]=this[_0x482c81(0x211)],_0x236f77;}this[_0x482c81(0x246)][_0x482c81(0x21c)](_0x24d112);let _0x334ff8=null;const _0x44b849=this[_0x482c81(0x1e9)]();_0x44b849&&(_0x26c5c6[_0x482c81(0x20e)](trace,_0x26c5c6[_0x482c81(0x200)]),_0x334ff8=this['queue'][_0x482c81(0x24c)](0x0,BATCH_SIZE),this[_0x482c81(0x246)][_0x482c81(0x22e)](0x0,BATCH_SIZE),this[_0x482c81(0x23f)]());const _0x25c5c7={};return _0x25c5c7['shouldProceed']=_0x44b849,_0x25c5c7[_0x482c81(0x210)]=_0x334ff8,_0x25c5c7['proceedWithUrl']=this['eventUrl'],_0x25c5c7;}const _0x37eff8={};return _0x37eff8['shouldProceed']=!![],_0x37eff8;};[a128_0x32aa5d(0x24b)]=async()=>{const _0x525536=a128_0x32aa5d,_0x5014d1={'oHrxK':_0x525536(0x227),'GdmXP':function(_0x11ac9b,_0x5cf820){return _0x11ac9b>_0x5cf820;},'HviaS':_0x525536(0x229),'gflHX':function(_0x3d153d,_0x5b25ec){return _0x3d153d(_0x5b25ec);}};await this[_0x525536(0x1e2)](),this[_0x525536(0x213)](_0x5014d1[_0x525536(0x223)]);while(_0x5014d1[_0x525536(0x208)](this[_0x525536(0x246)][_0x525536(0x20b)],0x0)){const _0x33275c=this[_0x525536(0x246)][_0x525536(0x24c)](0x0,BATCH_SIZE);this[_0x525536(0x246)]['splice'](0x0,BATCH_SIZE),await this[_0x525536(0x1e1)](this[_0x525536(0x23e)],_0x5014d1[_0x525536(0x24e)],_0x33275c);}_0x5014d1['GdmXP'](this[_0x525536(0x1ee)],0x0)&&_0x5014d1['gflHX'](debug,_0x525536(0x202)+this[_0x525536(0x1ee)]);};[a128_0x32aa5d(0x1e1)]=async(_0x500ae5,_0x5dbff9,_0x36ca99)=>{const _0x134f36=a128_0x32aa5d,_0x4f8487={'QILCr':function(_0xff68ec,_0x4127cc){return _0xff68ec(_0x4127cc);},'FUiWK':_0x134f36(0x238),'CMeMr':function(_0x4777ce,_0x153e4d){return _0x4777ce(_0x153e4d);},'VswUl':function(_0x41be55){return _0x41be55();},'NegbD':function(_0x260599,_0x2181fc,_0x5bd772,_0x440308,_0x527930){return _0x260599(_0x2181fc,_0x5bd772,_0x440308,_0x527930);},'XgNsl':'POST','txDHs':function(_0x48d636,_0x493ef2){return _0x48d636-_0x493ef2;},'lAHTS':function(_0x11922a,_0x3e4ec4){return _0x11922a(_0x3e4ec4);},'hpoOm':function(_0x2741bc,_0x58bbb6){return _0x2741bc-_0x58bbb6;}};let _0x154d73='';try{_0x154d73=_0x36ca99[_0x134f36(0x1dd)](_0x1e8769=>'\x27'+_0x1e8769[_0x134f36(0x1e8)]+'\x27:'+(nestedKeyValue(_0x1e8769,[_0x134f36(0x207),_0x134f36(0x1d7)])||nestedKeyValue(_0x1e8769,[_0x134f36(0x225),_0x134f36(0x1d7)])))[_0x134f36(0x236)](','),_0x4f8487[_0x134f36(0x241)](debug,_0x134f36(0x1ea)+_0x5dbff9+'.\x20Request\x20Size\x20-\x20'+Buffer[_0x134f36(0x249)](util[_0x134f36(0x1ed)]('%j',_0x36ca99),_0x4f8487['FUiWK'])+_0x134f36(0x248)+_0x154d73);}catch(_0x46f6ad){_0x4f8487[_0x134f36(0x1db)](debug,_0x134f36(0x20d)+util['format'](_0x46f6ad)+'}');}const _0x361876={'headers':_0x4f8487[_0x134f36(0x243)](getDefaultHeaders)};try{const _0x57189a=await _0x4f8487[_0x134f36(0x1d6)](nodeRequest,_0x4f8487['XgNsl'],_0x500ae5,_0x36ca99,_0x361876);if(_0x57189a['data'][_0x134f36(0x21e)]){const _0x4ba6ce={};_0x4ba6ce[_0x134f36(0x1f0)]=_0x57189a[_0x134f36(0x1df)][_0x134f36(0x21e)];throw _0x4ba6ce;}else _0x4f8487[_0x134f36(0x1db)](debug,_0x5dbff9+_0x134f36(0x216)+_0x154d73+_0x134f36(0x201)+util['format']('%j',_0x57189a[_0x134f36(0x1df)])),this[_0x134f36(0x1ee)]=Math[_0x134f36(0x205)](0x0,_0x4f8487[_0x134f36(0x1f4)](this[_0x134f36(0x1ee)],_0x36ca99[_0x134f36(0x20b)]));}catch(_0x242a9a){_0x242a9a[_0x134f36(0x21f)]?_0x4f8487['lAHTS'](debug,_0x134f36(0x20c)+_0x5dbff9+_0x134f36(0x21d)+constants[_0x134f36(0x1fc)]+_0x134f36(0x1fb)+_0x242a9a['response'][_0x134f36(0x219)]+'\x20'+_0x242a9a[_0x134f36(0x21f)][_0x134f36(0x1e3)]+'\x20'+util[_0x134f36(0x1ed)]('%j',_0x242a9a['response'])):_0x4f8487[_0x134f36(0x1db)](debug,_0x134f36(0x20c)+_0x5dbff9+_0x134f36(0x21d)+constants[_0x134f36(0x1fc)]+_0x134f36(0x1fb)+(_0x242a9a['message']||_0x242a9a)),this['pendingUploads']=Math['max'](0x0,_0x4f8487[_0x134f36(0x22f)](this[_0x134f36(0x1ee)],_0x36ca99[_0x134f36(0x20b)]));}};['startEventBatchPolling']=()=>{const _0x366625=a128_0x32aa5d,_0x26ea14={'rXwrq':function(_0x2b129b,_0x4efdbb){return _0x2b129b>_0x4efdbb;},'tmPKF':function(_0x51411d,_0x2bd326){return _0x51411d(_0x2bd326);},'VMiag':_0x366625(0x1d9),'sOheZ':function(_0x477133,_0x321b41,_0x49bf61){return _0x477133(_0x321b41,_0x49bf61);}};this['pollEventBatchInterval']=_0x26ea14[_0x366625(0x1d8)](setInterval,async()=>{const _0x20c5fc=_0x366625;if(_0x26ea14[_0x20c5fc(0x244)](this['queue'][_0x20c5fc(0x20b)],0x0)){_0x26ea14[_0x20c5fc(0x1de)](trace,_0x20c5fc(0x204)+this['queue'][_0x20c5fc(0x20b)]);const _0x5b340e=this['queue'][_0x20c5fc(0x24c)](0x0,BATCH_SIZE);this[_0x20c5fc(0x246)]['splice'](0x0,BATCH_SIZE),await this[_0x20c5fc(0x1e1)](this[_0x20c5fc(0x23e)],_0x26ea14['VMiag'],_0x5b340e),_0x26ea14[_0x20c5fc(0x1de)](trace,_0x20c5fc(0x240)+this[_0x20c5fc(0x246)][_0x20c5fc(0x20b)]);}},BATCH_INTERVAL);};[a128_0x32aa5d(0x23f)]=()=>{const _0x24e7c9=a128_0x32aa5d,_0x22b6de={};_0x22b6de[_0x24e7c9(0x1fd)]=_0x24e7c9(0x1f7);const _0x110720=_0x22b6de;this[_0x24e7c9(0x213)](_0x110720[_0x24e7c9(0x1fd)]),this[_0x24e7c9(0x206)]();};[a128_0x32aa5d(0x213)]=_0x2c1928=>{const _0x3917a2=a128_0x32aa5d,_0x558608={'vdAYs':function(_0x395e9b,_0x2d5ff8){return _0x395e9b(_0x2d5ff8);},'OpOrU':function(_0x5e3691,_0x53de2b){return _0x5e3691===_0x53de2b;},'MCaLl':'REMOVING'};this[_0x3917a2(0x237)]&&(_0x558608[_0x3917a2(0x231)](clearInterval,this[_0x3917a2(0x237)]),this[_0x3917a2(0x237)]=null,_0x558608[_0x3917a2(0x209)](_0x2c1928,_0x558608[_0x3917a2(0x212)])&&(this[_0x3917a2(0x235)]=![]));};['shouldProceed']=()=>{const _0x1de327=a128_0x32aa5d,_0x56b4a1={};_0x56b4a1[_0x1de327(0x23d)]=function(_0x48c5eb,_0x818b9){return _0x48c5eb>=_0x818b9;};const _0x48eb38=_0x56b4a1;return _0x48eb38[_0x1de327(0x23d)](this[_0x1de327(0x246)]['length'],BATCH_SIZE);};async[a128_0x32aa5d(0x1e2)](_0x3bd42b=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x279d87=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x1f6a5f=a128_0x32aa5d,_0x2502f8={'njOvb':function(_0x302fb6,_0x2fd8e8){return _0x302fb6<=_0x2fd8e8;},'XqVoj':function(_0x1ccc5f,_0x3b1a61){return _0x1ccc5f(_0x3b1a61);},'nGqyv':function(_0x178930,_0xb65c75){return _0x178930-_0xb65c75;}};if(_0x2502f8[_0x1f6a5f(0x214)](this[_0x1f6a5f(0x1ee)],0x0)||_0x2502f8[_0x1f6a5f(0x214)](_0x3bd42b,0x0))return;return await _0x2502f8['XqVoj'](sleep,_0x279d87),this['uploadPending'](_0x2502f8[_0x1f6a5f(0x20a)](_0x3bd42b,_0x279d87));}}module[a128_0x32aa5d(0x1fe)]=RequestQueueHandler;function a128_0x142a(){const _0x5acc2a=['QkBql','aMLoF','util','\x20:\x20','TEST_REPORTING_ANALYTICS','tVGdj','exports','HookRunFinished','RwZBV','\x20--\x20','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','5|1|0|2|6|4|3','Processing\x20events.\x20Queue\x20Length\x20-\x20','max','startEventBatchPolling','test_run','GdmXP','OpOrU','nGqyv','length','EXCEPTION\x20IN\x20','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','QfTdt','wFubf','proceedWithData','uploadAttachmentUrl','MCaLl','removeEventBatchPolling','njOvb','1041400jogNSu','\x20event\x20successful\x20for\x20events\x20','GbBiO','1494gLwWHy','status','TestRunStarted','18186jwrkXr','push','\x20REQUEST\x20TO\x20','error','response','start','tEpcY','2926532AJwctW','oHrxK','xLztv','hook_run','wEZWg','REMOVING','../helper','Shutdown-Queue','QfynS','LkZir','GWNhi','YRyJa','splice','hpoOm','../../bin/utils/constants','vdAYs','106995zQGOKb','CBTSessionCreated','instance','started','join','pollEventBatchInterval','utf8','26096bPiQUy','74380gYUNea','screenshotEventUrl','split','RVIml','eventUrl','resetEventBatchPolling','Remaining\x20Queue\x20Length\x20-\x20','QILCr','TestRunFinished','VswUl','rXwrq','46kfGSSm','queue','TEST_SCREENSHOT','\x20bytes.\x20Events\x20are\x20','byteLength','TestRunSkipped','shutdown','slice','QTBfP','HviaS','wBlBo','LogCreated','kind','proceedWithUrl','NegbD','uuid','sOheZ','Interval-Queue','getInstance','CMeMr','XAVea','map','tmPKF','data','add','batchAndPostEvents','uploadPending','statusText','RcyJy','api/v1/batch','2332ucyjov','BATCH_EVENT_TYPES','event_type','shouldProceed','Processing\x20batch\x20events\x20for\x20','BoxlT','logs','format','pendingUploads','1252132VaBeRO','message','./utils','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','850vmfGBF','txDHs','upload-attachments','gmFpG','RESETTING'];a128_0x142a=function(){return _0x5acc2a;};return a128_0x142a();}