const a128_0x292c56=a128_0x45b8;(function(_0x56e7f,_0x5ea75a){const _0x5c7ca5=a128_0x45b8,_0x44f491=_0x56e7f();while(!![]){try{const _0x52e672=-parseInt(_0x5c7ca5(0x154))/0x1*(-parseInt(_0x5c7ca5(0x18d))/0x2)+-parseInt(_0x5c7ca5(0x130))/0x3+parseInt(_0x5c7ca5(0x162))/0x4+parseInt(_0x5c7ca5(0x163))/0x5*(parseInt(_0x5c7ca5(0x139))/0x6)+-parseInt(_0x5c7ca5(0x181))/0x7+-parseInt(_0x5c7ca5(0x155))/0x8+parseInt(_0x5c7ca5(0x146))/0x9;if(_0x52e672===_0x5ea75a)break;else _0x44f491['push'](_0x44f491['shift']());}catch(_0xc3bf3f){_0x44f491['push'](_0x44f491['shift']());}}}(a128_0x27e7,0xa1c3e));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a128_0x292c56(0x14f)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require('./utils'),{nestedKeyValue}=require(a128_0x292c56(0x14a)),util=require(a128_0x292c56(0x14b)),constants=require('../../bin/utils/constants');function a128_0x45b8(_0xe278e0,_0x32a249){const _0x27e762=a128_0x27e7();return a128_0x45b8=function(_0x45b8f1,_0x4c3a08){_0x45b8f1=_0x45b8f1-0x127;let _0x347ab8=_0x27e762[_0x45b8f1];return _0x347ab8;},a128_0x45b8(_0xe278e0,_0x32a249);}class RequestQueueHandler{static [a128_0x292c56(0x143)];[a128_0x292c56(0x190)]=0x0;constructor(){const _0x45d357=a128_0x292c56,_0x20c265={};_0x20c265[_0x45d357(0x172)]=_0x45d357(0x131),_0x20c265['zfLJq']=_0x45d357(0x13a),_0x20c265[_0x45d357(0x16b)]=_0x45d357(0x17d),_0x20c265[_0x45d357(0x148)]=_0x45d357(0x16d),_0x20c265[_0x45d357(0x184)]=_0x45d357(0x176),_0x20c265[_0x45d357(0x15e)]=_0x45d357(0x195),_0x20c265['ArNoU']=_0x45d357(0x14c),_0x20c265[_0x45d357(0x12f)]='TestRunStarted',_0x20c265['QXNbb']=_0x45d357(0x186),_0x20c265['WLvcP']=_0x45d357(0x17f),_0x20c265[_0x45d357(0x185)]=_0x45d357(0x147);const _0x53664d=_0x20c265,_0x164d6b=_0x53664d[_0x45d357(0x172)]['split']('|');let _0xe094c1=0x0;while(!![]){switch(_0x164d6b[_0xe094c1++]){case'0':this[_0x45d357(0x16e)]=_0x53664d[_0x45d357(0x161)];continue;case'1':this[_0x45d357(0x18a)]=null;continue;case'2':this[_0x45d357(0x133)]=[_0x53664d[_0x45d357(0x16b)],_0x53664d[_0x45d357(0x148)],_0x53664d['NMDVM'],_0x53664d[_0x45d357(0x15e)],_0x53664d[_0x45d357(0x18f)],_0x53664d[_0x45d357(0x12f)],_0x53664d[_0x45d357(0x17e)]];continue;case'3':this[_0x45d357(0x134)]=[];continue;case'4':this[_0x45d357(0x14d)]=![];continue;case'5':this[_0x45d357(0x12e)]=_0x53664d[_0x45d357(0x149)];continue;case'6':this['screenshotEventUrl']=_0x53664d[_0x45d357(0x185)];continue;}break;}}static[a128_0x292c56(0x142)](){const _0x2c23f7=a128_0x292c56;return!RequestQueueHandler['instance']&&(RequestQueueHandler[_0x2c23f7(0x143)]=new RequestQueueHandler()),RequestQueueHandler['instance'];}['start']=()=>{const _0x47b16e=a128_0x292c56;!this['started']&&(this['started']=!![],this[_0x47b16e(0x150)]());};['add']=_0x47a1ba=>{const _0x4a48ea=a128_0x292c56,_0xbd4334={'ySbNU':function(_0x4d6f62,_0x538afb){return _0x4d6f62===_0x538afb;},'BdeNP':_0x4a48ea(0x175),'ZVZNY':function(_0x5c3479,_0x32e43a){return _0x5c3479>_0x32e43a;},'wKgdv':function(_0x181320,_0x2dea42){return _0x181320===_0x2dea42;},'QGowA':_0x4a48ea(0x135),'zVtAz':function(_0x8526cd,_0x4d60ab){return _0x8526cd!==_0x4d60ab;},'GceUd':'TestRunFinished','KcmsK':function(_0x2a4adc,_0x12e116){return _0x2a4adc(_0x12e116);},'qyvHP':_0x4a48ea(0x165)};if(this['BATCH_EVENT_TYPES'][_0x4a48ea(0x164)](_0x47a1ba['event_type'])){if(_0x47a1ba[_0x4a48ea(0x14e)]&&_0x47a1ba[_0x4a48ea(0x14e)][0x0]&&_0xbd4334[_0x4a48ea(0x187)](_0x47a1ba[_0x4a48ea(0x14e)][0x0][_0x4a48ea(0x166)],_0xbd4334['BdeNP'])){const _0x20d853={};return _0x20d853['shouldProceed']=!![],_0x20d853[_0x4a48ea(0x169)]=[_0x47a1ba],_0x20d853['proceedWithUrl']=this[_0x4a48ea(0x13e)],_0x20d853;}if(_0x47a1ba[_0x4a48ea(0x14e)]&&_0xbd4334['ZVZNY'](_0x47a1ba[_0x4a48ea(0x14e)]['length'],0x0)&&_0xbd4334['wKgdv'](_0x47a1ba[_0x4a48ea(0x14e)][0x0]['kind'],_0xbd4334[_0x4a48ea(0x18c)])&&_0xbd4334['zVtAz'](_0x47a1ba[_0x4a48ea(0x158)],_0xbd4334['GceUd'])){const _0x3d33de={};return _0x3d33de[_0x4a48ea(0x137)]=!![],_0x3d33de[_0x4a48ea(0x169)]=[_0x47a1ba],_0x3d33de[_0x4a48ea(0x16c)]=this[_0x4a48ea(0x12e)],_0x3d33de;}this[_0x4a48ea(0x134)]['push'](_0x47a1ba);let _0x534d2b=null;const _0x1b4403=this['shouldProceed']();_0x1b4403&&(_0xbd4334[_0x4a48ea(0x179)](trace,_0xbd4334[_0x4a48ea(0x177)]),_0x534d2b=this[_0x4a48ea(0x134)][_0x4a48ea(0x15a)](0x0,BATCH_SIZE),this[_0x4a48ea(0x134)]['splice'](0x0,BATCH_SIZE),this[_0x4a48ea(0x157)]());const _0x5b3844={};return _0x5b3844[_0x4a48ea(0x137)]=_0x1b4403,_0x5b3844[_0x4a48ea(0x169)]=_0x534d2b,_0x5b3844[_0x4a48ea(0x16c)]=this[_0x4a48ea(0x16e)],_0x5b3844;}const _0x2c5249={};return _0x2c5249[_0x4a48ea(0x137)]=!![],_0x2c5249;};['shutdown']=async()=>{const _0x399ee2=a128_0x292c56,_0x2db289={'PhIjK':'REMOVING','yzfqj':function(_0x4c5bf6,_0x3a899c){return _0x4c5bf6>_0x3a899c;},'jkgly':'Shutdown-Queue','RtYGB':function(_0x391bd7,_0x34f31e){return _0x391bd7(_0x34f31e);}};await this[_0x399ee2(0x174)](),this[_0x399ee2(0x13c)](_0x2db289[_0x399ee2(0x132)]);while(_0x2db289[_0x399ee2(0x17c)](this[_0x399ee2(0x134)][_0x399ee2(0x16a)],0x0)){const _0x5e70d4=this[_0x399ee2(0x134)][_0x399ee2(0x15a)](0x0,BATCH_SIZE);this[_0x399ee2(0x134)][_0x399ee2(0x12a)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x399ee2(0x16e)],_0x2db289[_0x399ee2(0x171)],_0x5e70d4);}_0x2db289[_0x399ee2(0x17c)](this[_0x399ee2(0x190)],0x0)&&_0x2db289[_0x399ee2(0x128)](debug,_0x399ee2(0x189)+this[_0x399ee2(0x190)]);};[a128_0x292c56(0x180)]=async(_0x3cd987,_0x25b372,_0x18231c)=>{const _0x4f0f21=a128_0x292c56,_0x1fd3b6={'SZkEJ':function(_0x151075,_0xa51642){return _0x151075(_0xa51642);},'CWeNw':'utf8','rSMZV':function(_0x421cce){return _0x421cce();},'ooMsO':function(_0x289082,_0x1013b1,_0x1111de,_0x5b9ff9,_0xb0148b){return _0x289082(_0x1013b1,_0x1111de,_0x5b9ff9,_0xb0148b);},'RXSgP':'POST','VkCeD':function(_0x29ab8d,_0xda9e03){return _0x29ab8d-_0xda9e03;},'MjINp':function(_0x24d910,_0x3058f5){return _0x24d910(_0x3058f5);},'ZcNaY':function(_0x225873,_0x385820){return _0x225873-_0x385820;}};let _0x2f53eb='';try{_0x2f53eb=_0x18231c[_0x4f0f21(0x178)](_0x46b1b1=>'\x27'+_0x46b1b1[_0x4f0f21(0x158)]+'\x27:'+(nestedKeyValue(_0x46b1b1,[_0x4f0f21(0x140),_0x4f0f21(0x17b)])||nestedKeyValue(_0x46b1b1,[_0x4f0f21(0x153),_0x4f0f21(0x17b)])))[_0x4f0f21(0x160)](','),_0x1fd3b6['SZkEJ'](debug,'Processing\x20batch\x20events\x20for\x20'+_0x25b372+_0x4f0f21(0x17a)+Buffer[_0x4f0f21(0x13d)](util[_0x4f0f21(0x194)]('%j',_0x18231c),_0x1fd3b6[_0x4f0f21(0x191)])+_0x4f0f21(0x12d)+_0x2f53eb);}catch(_0x4a8587){_0x1fd3b6[_0x4f0f21(0x173)](debug,_0x4f0f21(0x152)+util[_0x4f0f21(0x194)](_0x4a8587)+'}');}const _0x17c614={'headers':_0x1fd3b6[_0x4f0f21(0x170)](getDefaultHeaders)};try{const _0x5e68c4=await _0x1fd3b6[_0x4f0f21(0x15d)](nodeRequest,_0x1fd3b6['RXSgP'],_0x3cd987,_0x18231c,_0x17c614);if(_0x5e68c4[_0x4f0f21(0x188)][_0x4f0f21(0x127)]){const _0x104f2a={};_0x104f2a[_0x4f0f21(0x138)]=_0x5e68c4[_0x4f0f21(0x188)]['error'];throw _0x104f2a;}else _0x1fd3b6[_0x4f0f21(0x173)](debug,_0x25b372+'\x20event\x20successful\x20for\x20events\x20'+_0x2f53eb+_0x4f0f21(0x129)+util[_0x4f0f21(0x194)]('%j',_0x5e68c4[_0x4f0f21(0x188)])),this[_0x4f0f21(0x190)]=Math[_0x4f0f21(0x18b)](0x0,_0x1fd3b6['VkCeD'](this['pendingUploads'],_0x18231c['length']));}catch(_0x31df1f){_0x31df1f[_0x4f0f21(0x16f)]?_0x1fd3b6[_0x4f0f21(0x173)](debug,_0x4f0f21(0x144)+_0x25b372+'\x20REQUEST\x20TO\x20'+constants[_0x4f0f21(0x145)]+_0x4f0f21(0x13f)+_0x31df1f['response'][_0x4f0f21(0x136)]+'\x20'+_0x31df1f[_0x4f0f21(0x16f)]['statusText']+'\x20'+util[_0x4f0f21(0x194)]('%j',_0x31df1f[_0x4f0f21(0x16f)])):_0x1fd3b6['MjINp'](debug,_0x4f0f21(0x144)+_0x25b372+_0x4f0f21(0x168)+constants[_0x4f0f21(0x145)]+'\x20:\x20'+(_0x31df1f[_0x4f0f21(0x138)]||_0x31df1f)),this[_0x4f0f21(0x190)]=Math[_0x4f0f21(0x18b)](0x0,_0x1fd3b6[_0x4f0f21(0x192)](this[_0x4f0f21(0x190)],_0x18231c[_0x4f0f21(0x16a)]));}};['startEventBatchPolling']=()=>{const _0x2a4818=a128_0x292c56,_0x373179={'YSICc':function(_0x730b5f,_0x12912c){return _0x730b5f>_0x12912c;},'cSane':function(_0x131bf8,_0x1cd11b){return _0x131bf8(_0x1cd11b);},'QnKzH':_0x2a4818(0x156),'VvwEL':function(_0x531ed4,_0x28843c,_0x369006){return _0x531ed4(_0x28843c,_0x369006);}};this[_0x2a4818(0x18a)]=_0x373179['VvwEL'](setInterval,async()=>{const _0x1b30af=_0x2a4818;if(_0x373179[_0x1b30af(0x151)](this[_0x1b30af(0x134)]['length'],0x0)){_0x373179['cSane'](trace,_0x1b30af(0x15f)+this[_0x1b30af(0x134)][_0x1b30af(0x16a)]);const _0x1b08b7=this[_0x1b30af(0x134)][_0x1b30af(0x15a)](0x0,BATCH_SIZE);this[_0x1b30af(0x134)]['splice'](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x1b30af(0x16e)],_0x373179['QnKzH'],_0x1b08b7),_0x373179[_0x1b30af(0x159)](trace,_0x1b30af(0x13b)+this[_0x1b30af(0x134)]['length']);}},BATCH_INTERVAL);};[a128_0x292c56(0x157)]=()=>{const _0x281318=a128_0x292c56,_0x51a3ea={};_0x51a3ea['DVruG']=_0x281318(0x183);const _0x1bdb78=_0x51a3ea;this[_0x281318(0x13c)](_0x1bdb78['DVruG']),this[_0x281318(0x150)]();};['removeEventBatchPolling']=_0x2304ab=>{const _0x4aab7d=a128_0x292c56,_0x4dd1e9={'Ffwdc':function(_0x105bff,_0x1a131d){return _0x105bff(_0x1a131d);},'SXuPZ':function(_0x27c8ce,_0x54133f){return _0x27c8ce===_0x54133f;},'nvdUF':_0x4aab7d(0x167)};this[_0x4aab7d(0x18a)]&&(_0x4dd1e9[_0x4aab7d(0x15b)](clearInterval,this['pollEventBatchInterval']),this[_0x4aab7d(0x18a)]=null,_0x4dd1e9[_0x4aab7d(0x141)](_0x2304ab,_0x4dd1e9[_0x4aab7d(0x12c)])&&(this['started']=![]));};['shouldProceed']=()=>{const _0x45c254=a128_0x292c56,_0x51664f={};_0x51664f[_0x45c254(0x182)]=function(_0x5e3207,_0x3c0703){return _0x5e3207>=_0x3c0703;};const _0x38f47c=_0x51664f;return _0x38f47c[_0x45c254(0x182)](this[_0x45c254(0x134)]['length'],BATCH_SIZE);};async['uploadPending'](_0x4acb94=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x25b912=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x457e06=a128_0x292c56,_0xe1613b={'hqKJA':function(_0x5d252a,_0x41ecf0){return _0x5d252a<=_0x41ecf0;},'lQkWG':function(_0x3259d3,_0x47d3e2){return _0x3259d3<=_0x47d3e2;},'HLnxG':function(_0xa0ad0f,_0x4bcfa0){return _0xa0ad0f(_0x4bcfa0);},'SSDdv':function(_0x3f2073,_0x2bc164){return _0x3f2073-_0x2bc164;}};if(_0xe1613b[_0x457e06(0x193)](this['pendingUploads'],0x0)||_0xe1613b[_0x457e06(0x15c)](_0x4acb94,0x0))return;return await _0xe1613b[_0x457e06(0x18e)](sleep,_0x25b912),this[_0x457e06(0x174)](_0xe1613b[_0x457e06(0x12b)](_0x4acb94,_0x25b912));}}function a128_0x27e7(){const _0x39f0a7=['CWeNw','ZcNaY','hqKJA','format','TestRunSkipped','error','RtYGB','\x20--\x20','splice','SSDdv','nvdUF','\x20bytes.\x20Events\x20are\x20','uploadAttachmentUrl','rCtLW','2749227qjQErn','3|4|0|6|5|2|1','PhIjK','BATCH_EVENT_TYPES','queue','TEST_ATTACHMENT','status','shouldProceed','message','6IypPEV','api/v1/batch','Remaining\x20Queue\x20Length\x20-\x20','removeEventBatchPolling','byteLength','screenshotEventUrl','\x20:\x20','test_run','SXuPZ','getInstance','instance','EXCEPTION\x20IN\x20','TEST_REPORTING_ANALYTICS','21548430TNvMPd','api/v1/screenshots','akIeT','WLvcP','../helper','util','HookRunFinished','started','logs','./constants','startEventBatchPolling','YSICc','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','hook_run','177ESKGoO','8189680LRKFbY','Interval-Queue','resetEventBatchPolling','event_type','cSane','slice','Ffwdc','lQkWG','ooMsO','CEZPH','Processing\x20events.\x20Queue\x20Length\x20-\x20','join','zfLJq','1108600vDXpLt','4816775iklKYf','includes','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','kind','REMOVING','\x20REQUEST\x20TO\x20','proceedWithData','length','XrvdN','proceedWithUrl','CBTSessionCreated','eventUrl','response','rSMZV','jkgly','boiFa','SZkEJ','uploadPending','TEST_SCREENSHOT','TestRunFinished','qyvHP','map','KcmsK','.\x20Request\x20Size\x20-\x20','uuid','yzfqj','LogCreated','QXNbb','upload-attachments','batchAndPostEvents','8795514nBYJvI','EoHNB','RESETTING','NMDVM','RfOlY','HookRunStarted','ySbNU','data','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','pollEventBatchInterval','max','QGowA','2536ULratd','HLnxG','ArNoU','pendingUploads'];a128_0x27e7=function(){return _0x39f0a7;};return a128_0x27e7();}module['exports']=RequestQueueHandler;