const a86_0x21828d=a86_0x83e1;function a86_0x83e1(_0x29d4ef,_0x49e9f4){const _0x167bd1=a86_0x167b();return a86_0x83e1=function(_0x83e11a,_0x1d0889){_0x83e11a=_0x83e11a-0x13c;let _0x22ebb6=_0x167bd1[_0x83e11a];return _0x22ebb6;},a86_0x83e1(_0x29d4ef,_0x49e9f4);}(function(_0x246752,_0xec69e3){const _0x438445=a86_0x83e1,_0x5b199d=_0x246752();while(!![]){try{const _0x39a019=parseInt(_0x438445(0x18a))/0x1+-parseInt(_0x438445(0x142))/0x2+parseInt(_0x438445(0x157))/0x3+parseInt(_0x438445(0x13d))/0x4*(parseInt(_0x438445(0x15b))/0x5)+parseInt(_0x438445(0x159))/0x6+-parseInt(_0x438445(0x19b))/0x7+parseInt(_0x438445(0x151))/0x8;if(_0x39a019===_0xec69e3)break;else _0x5b199d['push'](_0x5b199d['shift']());}catch(_0x4f7824){_0x5b199d['push'](_0x5b199d['shift']());}}}(a86_0x167b,0xc46d8));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a86_0x21828d(0x17c)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a86_0x21828d(0x16f)),{nestedKeyValue}=require(a86_0x21828d(0x152)),util=require(a86_0x21828d(0x188));function a86_0x167b(){const _0x4918a5=['mkwjU','eVUQa','./constants','HookRunFinished','lcXgh','fNoQi','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','ADDIi','dEXdQ','ohwoJ','ZRVPk','pZhcM','TEST_ATTACHMENT','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','util','pollEventBatchInterval','879132RcpnZd','.\x20Request\x20Size\x20-\x20','GTNKR','fFZYV','TestRunSkipped','\x20event\x20successful\x20for\x20events\x20','POST','format','test_run','mlRNd','LogCreated','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','trrOC','byteLength','queue','hook_run','BATCH_EVENT_TYPES','6978020pDXIQC','TestRunFinished','max','uuid','MJwpM','includes','api/v1/batch','YRyfZ','Abvhi','PgElW','pendingUploads','statusText','instance','YPLSZ','ayoUB','map','2588EpIsdR','XgfUV','fXLTZ','getInstance','uploadAttachmentUrl','991776KuGBTa','uploadPending','started','eventUrl','status','logs','hjxlG','xRiti','data','EXCEPTION\x20IN\x20','shouldProceed','TestRunStarted','RESETTING','Processing\x20batch\x20events\x20for\x20','splice','6798448PoWUOG','../helper','QmniP','RjiHb','TEST_SCREENSHOT','add','829674CEpykv','WWcKk','1273434jWmgOX','removeEventBatchPolling','615WiagWH','ClkZJ','proceedWithData','exports','error','startEventBatchPolling','message','CvLcS','start','QBdVd','llYQu','rYdrf','upload-attachments','kind','REMOVING','length','batchAndPostEvents','\x20--\x20','api/v1/screenshots','join','./utils','PDMJY','iNTxv','slice','LsSMX','resetEventBatchPolling','kSqSx','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','response','proceedWithUrl','EVzDg'];a86_0x167b=function(){return _0x4918a5;};return a86_0x167b();}class RequestQueueHandler{static [a86_0x21828d(0x1a7)];[a86_0x21828d(0x1a5)]=0x0;constructor(){const _0xc06f4b=a86_0x21828d,_0x2b008d={};_0x2b008d['ayoUB']='6|5|0|4|2|3|1',_0x2b008d['rYdrf']=_0xc06f4b(0x1a1),_0x2b008d[_0xc06f4b(0x158)]=_0xc06f4b(0x167),_0x2b008d[_0xc06f4b(0x17e)]=_0xc06f4b(0x194),_0x2b008d['QQKNZ']='CBTSessionCreated',_0x2b008d[_0xc06f4b(0x182)]=_0xc06f4b(0x19c),_0x2b008d['ZRVPk']=_0xc06f4b(0x18e),_0x2b008d[_0xc06f4b(0x162)]=_0xc06f4b(0x17d),_0x2b008d[_0xc06f4b(0x1a4)]=_0xc06f4b(0x14d),_0x2b008d[_0xc06f4b(0x193)]='HookRunStarted',_0x2b008d[_0xc06f4b(0x17b)]=_0xc06f4b(0x16d);const _0x95f429=_0x2b008d,_0x4266bc=_0x95f429[_0xc06f4b(0x1a9)]['split']('|');let _0x1f0e40=0x0;while(!![]){switch(_0x4266bc[_0x1f0e40++]){case'0':this[_0xc06f4b(0x145)]=_0x95f429[_0xc06f4b(0x166)];continue;case'1':this[_0xc06f4b(0x189)]=null;continue;case'2':this[_0xc06f4b(0x141)]=_0x95f429[_0xc06f4b(0x158)];continue;case'3':this[_0xc06f4b(0x19a)]=[_0x95f429['lcXgh'],_0x95f429['QQKNZ'],_0x95f429[_0xc06f4b(0x182)],_0x95f429[_0xc06f4b(0x184)],_0x95f429[_0xc06f4b(0x162)],_0x95f429['PgElW'],_0x95f429[_0xc06f4b(0x193)]];continue;case'4':this['screenshotEventUrl']=_0x95f429[_0xc06f4b(0x17b)];continue;case'5':this['started']=![];continue;case'6':this[_0xc06f4b(0x198)]=[];continue;}break;}}static[a86_0x21828d(0x140)](){const _0x56dd25=a86_0x21828d;return!RequestQueueHandler[_0x56dd25(0x1a7)]&&(RequestQueueHandler[_0x56dd25(0x1a7)]=new RequestQueueHandler()),RequestQueueHandler[_0x56dd25(0x1a7)];}[a86_0x21828d(0x163)]=()=>{const _0x4f8413=a86_0x21828d;!this[_0x4f8413(0x144)]&&(this['started']=!![],this['startEventBatchPolling']());};[a86_0x21828d(0x156)]=_0x38c2ff=>{const _0xc4912b=a86_0x21828d,_0x29379b={'kSqSx':function(_0x5906b1,_0x3ff0cd){return _0x5906b1===_0x3ff0cd;},'BRUoX':_0xc4912b(0x155),'iNTxv':function(_0x3488bf,_0x181044){return _0x3488bf>_0x181044;},'ADDIi':_0xc4912b(0x186),'pZhcM':function(_0x3436df,_0x4278e0){return _0x3436df!==_0x4278e0;},'fNoQi':_0xc4912b(0x19c),'mkwjU':function(_0xe22937,_0x58d6d7){return _0xe22937(_0x58d6d7);},'SjSFb':_0xc4912b(0x187)};if(this['BATCH_EVENT_TYPES'][_0xc4912b(0x1a0)](_0x38c2ff['event_type'])){if(_0x38c2ff[_0xc4912b(0x147)]&&_0x38c2ff['logs'][0x0]&&_0x29379b[_0xc4912b(0x175)](_0x38c2ff[_0xc4912b(0x147)][0x0][_0xc4912b(0x168)],_0x29379b['BRUoX'])){const _0x161fb9={};return _0x161fb9[_0xc4912b(0x14c)]=!![],_0x161fb9[_0xc4912b(0x15d)]=[_0x38c2ff],_0x161fb9[_0xc4912b(0x178)]=this['screenshotEventUrl'],_0x161fb9;}if(_0x38c2ff[_0xc4912b(0x147)]&&_0x29379b[_0xc4912b(0x171)](_0x38c2ff['logs']['length'],0x0)&&_0x29379b[_0xc4912b(0x175)](_0x38c2ff[_0xc4912b(0x147)][0x0][_0xc4912b(0x168)],_0x29379b[_0xc4912b(0x181)])&&_0x29379b[_0xc4912b(0x185)](_0x38c2ff['event_type'],_0x29379b[_0xc4912b(0x17f)])){const _0x4a7e2b={};return _0x4a7e2b[_0xc4912b(0x14c)]=!![],_0x4a7e2b[_0xc4912b(0x15d)]=[_0x38c2ff],_0x4a7e2b[_0xc4912b(0x178)]=this['uploadAttachmentUrl'],_0x4a7e2b;}this['queue']['push'](_0x38c2ff);let _0x4a2384=null;const _0x1e1943=this[_0xc4912b(0x14c)]();_0x1e1943&&(_0x29379b[_0xc4912b(0x17a)](trace,_0x29379b['SjSFb']),_0x4a2384=this[_0xc4912b(0x198)][_0xc4912b(0x172)](0x0,BATCH_SIZE),this[_0xc4912b(0x198)][_0xc4912b(0x150)](0x0,BATCH_SIZE),this['resetEventBatchPolling']());const _0x1f9e8f={};return _0x1f9e8f[_0xc4912b(0x14c)]=_0x1e1943,_0x1f9e8f[_0xc4912b(0x15d)]=_0x4a2384,_0x1f9e8f[_0xc4912b(0x178)]=this[_0xc4912b(0x145)],_0x1f9e8f;}const _0x590bbb={};return _0x590bbb[_0xc4912b(0x14c)]=!![],_0x590bbb;};['shutdown']=async()=>{const _0x213187=a86_0x21828d,_0x5d188d={'YPLSZ':'REMOVING','hHWoQ':function(_0xad9d51,_0x3dbb8d){return _0xad9d51>_0x3dbb8d;},'QBdVd':'Shutdown-Queue','QmniP':function(_0xa2c799,_0x2079a7){return _0xa2c799(_0x2079a7);}};await this[_0x213187(0x143)](),this[_0x213187(0x15a)](_0x5d188d[_0x213187(0x1a8)]);while(_0x5d188d['hHWoQ'](this[_0x213187(0x198)][_0x213187(0x16a)],0x0)){const _0x281b62=this[_0x213187(0x198)][_0x213187(0x172)](0x0,BATCH_SIZE);this[_0x213187(0x198)][_0x213187(0x150)](0x0,BATCH_SIZE),await this[_0x213187(0x16b)](this[_0x213187(0x145)],_0x5d188d[_0x213187(0x164)],_0x281b62);}_0x5d188d['hHWoQ'](this['pendingUploads'],0x0)&&_0x5d188d[_0x213187(0x153)](debug,_0x213187(0x176)+this[_0x213187(0x1a5)]);};[a86_0x21828d(0x16b)]=async(_0x5c3797,_0x42cef5,_0x5659a8)=>{const _0x201c1a=a86_0x21828d,_0x35e404={'RjiHb':function(_0x2c272b,_0x244aa0){return _0x2c272b(_0x244aa0);},'Abvhi':'utf8','vQlum':function(_0x1ead61,_0x180619){return _0x1ead61(_0x180619);},'fFZYV':function(_0x1bb241){return _0x1bb241();},'MJwpM':function(_0x5b57db,_0x31a1e9,_0x480646,_0x3e3acb,_0x3ece85){return _0x5b57db(_0x31a1e9,_0x480646,_0x3e3acb,_0x3ece85);},'cVCLf':_0x201c1a(0x190),'ohwoJ':function(_0x1dd719,_0xf481dd){return _0x1dd719(_0xf481dd);},'XgfUV':function(_0x4786a0,_0x2cde95){return _0x4786a0-_0x2cde95;},'trrOC':function(_0x4f9712,_0x2cc8e4){return _0x4f9712(_0x2cc8e4);},'EVzDg':function(_0x30edee,_0x34a31e){return _0x30edee(_0x34a31e);},'PDMJY':function(_0x40532b,_0x5727de){return _0x40532b-_0x5727de;}};let _0xb854a='';try{_0xb854a=_0x5659a8[_0x201c1a(0x13c)](_0x16bc7f=>'\x27'+_0x16bc7f['event_type']+'\x27:'+(nestedKeyValue(_0x16bc7f,[_0x201c1a(0x192),'uuid'])||nestedKeyValue(_0x16bc7f,[_0x201c1a(0x199),_0x201c1a(0x19e)])))[_0x201c1a(0x16e)](','),_0x35e404[_0x201c1a(0x154)](debug,_0x201c1a(0x14f)+_0x42cef5+_0x201c1a(0x18b)+Buffer[_0x201c1a(0x197)](util['format']('%j',_0x5659a8),_0x35e404[_0x201c1a(0x1a3)])+'\x20bytes.\x20Events\x20are\x20'+_0xb854a);}catch(_0x5a81f9){_0x35e404['vQlum'](debug,_0x201c1a(0x180)+util[_0x201c1a(0x191)](_0x5a81f9)+'}');}const _0x5edb65={'headers':_0x35e404[_0x201c1a(0x18d)](getDefaultHeaders)};try{const _0x2aed99=await _0x35e404[_0x201c1a(0x19f)](nodeRequest,_0x35e404['cVCLf'],_0x5c3797,_0x5659a8,_0x5edb65);if(_0x2aed99[_0x201c1a(0x14a)][_0x201c1a(0x15f)]){const _0x1e0cb0={};_0x1e0cb0[_0x201c1a(0x161)]=_0x2aed99['data'][_0x201c1a(0x15f)];throw _0x1e0cb0;}else _0x35e404[_0x201c1a(0x183)](debug,_0x42cef5+_0x201c1a(0x18f)+_0xb854a+_0x201c1a(0x16c)+util['format']('%j',_0x2aed99[_0x201c1a(0x14a)])),this['pendingUploads']=Math[_0x201c1a(0x19d)](0x0,_0x35e404[_0x201c1a(0x13e)](this[_0x201c1a(0x1a5)],_0x5659a8[_0x201c1a(0x16a)]));}catch(_0x327355){_0x327355[_0x201c1a(0x177)]?_0x35e404[_0x201c1a(0x196)](debug,_0x201c1a(0x14b)+_0x42cef5+_0x201c1a(0x195)+_0x327355[_0x201c1a(0x177)][_0x201c1a(0x146)]+'\x20'+_0x327355[_0x201c1a(0x177)][_0x201c1a(0x1a6)]+'\x20'+util['format']('%j',_0x327355[_0x201c1a(0x177)])):_0x35e404[_0x201c1a(0x179)](debug,_0x201c1a(0x14b)+_0x42cef5+_0x201c1a(0x195)+(_0x327355['message']||_0x327355)),this['pendingUploads']=Math[_0x201c1a(0x19d)](0x0,_0x35e404[_0x201c1a(0x170)](this[_0x201c1a(0x1a5)],_0x5659a8[_0x201c1a(0x16a)]));}};[a86_0x21828d(0x160)]=()=>{const _0x3a803b={'JTtIC':function(_0x3a0a34,_0x566161){return _0x3a0a34>_0x566161;},'llYQu':function(_0x1cce54,_0x18b8db){return _0x1cce54(_0x18b8db);},'GTNKR':'Interval-Queue','MGLND':function(_0x5994b1,_0x1029a7,_0x53043f){return _0x5994b1(_0x1029a7,_0x53043f);}};this['pollEventBatchInterval']=_0x3a803b['MGLND'](setInterval,async()=>{const _0x3debb8=a86_0x83e1;if(_0x3a803b['JTtIC'](this['queue'][_0x3debb8(0x16a)],0x0)){_0x3a803b[_0x3debb8(0x165)](trace,'Processing\x20events.\x20Queue\x20Length\x20-\x20'+this['queue']['length']);const _0x2342f0=this[_0x3debb8(0x198)][_0x3debb8(0x172)](0x0,BATCH_SIZE);this[_0x3debb8(0x198)][_0x3debb8(0x150)](0x0,BATCH_SIZE),await this[_0x3debb8(0x16b)](this[_0x3debb8(0x145)],_0x3a803b[_0x3debb8(0x18c)],_0x2342f0),_0x3a803b[_0x3debb8(0x165)](trace,'Remaining\x20Queue\x20Length\x20-\x20'+this[_0x3debb8(0x198)][_0x3debb8(0x16a)]);}},BATCH_INTERVAL);};[a86_0x21828d(0x174)]=()=>{const _0x504e9b=a86_0x21828d,_0x56458b={};_0x56458b[_0x504e9b(0x13f)]=_0x504e9b(0x14e);const _0x509a63=_0x56458b;this['removeEventBatchPolling'](_0x509a63[_0x504e9b(0x13f)]),this[_0x504e9b(0x160)]();};[a86_0x21828d(0x15a)]=_0x4d5740=>{const _0x57cb82=a86_0x21828d,_0x4d61c7={'LsSMX':function(_0x46e9d6,_0x400c69){return _0x46e9d6(_0x400c69);},'xRiti':function(_0x48e97f,_0x230470){return _0x48e97f===_0x230470;},'WnCac':_0x57cb82(0x169)};this[_0x57cb82(0x189)]&&(_0x4d61c7[_0x57cb82(0x173)](clearInterval,this['pollEventBatchInterval']),this['pollEventBatchInterval']=null,_0x4d61c7[_0x57cb82(0x149)](_0x4d5740,_0x4d61c7['WnCac'])&&(this['started']=![]));};[a86_0x21828d(0x14c)]=()=>{const _0x31ddc9=a86_0x21828d,_0x499e84={};_0x499e84['YRyfZ']=function(_0x58dcfc,_0x346227){return _0x58dcfc>=_0x346227;};const _0x4628ce=_0x499e84;return _0x4628ce[_0x31ddc9(0x1a2)](this['queue'][_0x31ddc9(0x16a)],BATCH_SIZE);};async['uploadPending'](_0x457a9e=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x3459a0=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x1d5f27=a86_0x21828d,_0x5bf559={'hjxlG':function(_0x4194c5,_0x582821){return _0x4194c5<=_0x582821;},'ldSwl':function(_0x1e282f,_0x3129a){return _0x1e282f(_0x3129a);},'ClkZJ':function(_0x3ff8b5,_0x1e2614){return _0x3ff8b5-_0x1e2614;}};if(_0x5bf559['hjxlG'](this[_0x1d5f27(0x1a5)],0x0)||_0x5bf559[_0x1d5f27(0x148)](_0x457a9e,0x0))return;return await _0x5bf559['ldSwl'](sleep,_0x3459a0),this[_0x1d5f27(0x143)](_0x5bf559[_0x1d5f27(0x15c)](_0x457a9e,_0x3459a0));}}module[a86_0x21828d(0x15e)]=RequestQueueHandler;