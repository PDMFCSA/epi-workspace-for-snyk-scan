function a115_0xe19b(_0x2e0739,_0x4ab353){const _0xd30b78=a115_0xd30b();return a115_0xe19b=function(_0xe19baa,_0x1cceff){_0xe19baa=_0xe19baa-0x19f;let _0x168066=_0xd30b78[_0xe19baa];return _0x168066;},a115_0xe19b(_0x2e0739,_0x4ab353);}const a115_0x5c3fe1=a115_0xe19b;function a115_0xd30b(){const _0x3cea61=['OcXnV','utf8','qmVQc','dDWtX','48wyefyW','ABmZy','IRhPl','startEventBatchPolling','upload-attachments','pBCvs','removeEventBatchPolling','max','kind','LogCreated','30072okhDEk','Shutdown-Queue','test_run','861QAvTMo','message','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','../helper','HookRunStarted','pollEventBatchInterval','length','\x20--\x20','FRviN','PCoZL','Processing\x20events.\x20Queue\x20Length\x20-\x20','zbMCq','kwJGP','shutdown','RMMUI','batchAndPostEvents','RIpbp','BATCH_EVENT_TYPES','exports','\x20bytes.\x20Events\x20are\x20','epgZt','tPmwe','logs','Processing\x20batch\x20events\x20for\x20','map','FDKuf','SEWhw','HcmGF','ZYlaz','data','status','1|6|4|2|0|3|5','proceedWithData','AASIY','fJczv','20vgsRtG','TestRunStarted','queue','HookRunFinished','slice','eventUrl','pqELC','tNtKt','uuid','ipwPH','37770gzVGDj','VatZJ','TestRunSkipped','SZPtw','uploadAttachmentUrl','EXCEPTION\x20IN\x20','CoqWl','BRVST','includes','pendingUploads','zrlEZ','JGCcm','resetEventBatchPolling','pQfOx','event_type','uploadPending','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','10296rjSYPR','LORQq','asVef','REMOVING','GKIaC','error','10QDhZku','Remaining\x20Queue\x20Length\x20-\x20','403424pbNCEx','RESETTING','yLgrz','shouldProceed','splice','TestRunFinished','SGtTe','screenshotEventUrl','pAxQc','CRPwV','push','TEST_SCREENSHOT','instance','1052847PSRLKZ','cfImU','add','UmnZV','9183537Rpcvlw','format','response','CBTSessionCreated','NGuNp','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','statusText','api/v1/screenshots','started','\x20event\x20successful\x20for\x20events\x20','proceedWithUrl','1595280LTtpMx','UChpi'];a115_0xd30b=function(){return _0x3cea61;};return a115_0xd30b();}(function(_0x239dcd,_0x2675ee){const _0x5ad9ac=a115_0xe19b,_0x2b718c=_0x239dcd();while(!![]){try{const _0x17266c=parseInt(_0x5ad9ac(0x1de))/0x1+-parseInt(_0x5ad9ac(0x200))/0x2*(parseInt(_0x5ad9ac(0x1c5))/0x3)+parseInt(_0x5ad9ac(0x20a))/0x4*(-parseInt(_0x5ad9ac(0x1dc))/0x5)+-parseInt(_0x5ad9ac(0x1fa))/0x6+parseInt(_0x5ad9ac(0x20d))/0x7*(-parseInt(_0x5ad9ac(0x1d6))/0x8)+-parseInt(_0x5ad9ac(0x1eb))/0x9*(parseInt(_0x5ad9ac(0x1bb))/0xa)+parseInt(_0x5ad9ac(0x1ef))/0xb;if(_0x17266c===_0x2675ee)break;else _0x2b718c['push'](_0x2b718c['shift']());}catch(_0xcbf778){_0x2b718c['push'](_0x2b718c['shift']());}}}(a115_0xd30b,0x40324));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require('./constants'),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require('./utils'),{nestedKeyValue}=require(a115_0x5c3fe1(0x210)),util=require('util');class RequestQueueHandler{static [a115_0x5c3fe1(0x1ea)];[a115_0x5c3fe1(0x1ce)]=0x0;constructor(){const _0x41ccf2=a115_0x5c3fe1,_0x31f5f9={};_0x31f5f9[_0x41ccf2(0x1a6)]=_0x41ccf2(0x1b7),_0x31f5f9[_0x41ccf2(0x1fb)]=_0x41ccf2(0x204),_0x31f5f9[_0x41ccf2(0x1c8)]=_0x41ccf2(0x1f6),_0x31f5f9[_0x41ccf2(0x1d2)]=_0x41ccf2(0x209),_0x31f5f9[_0x41ccf2(0x205)]=_0x41ccf2(0x1f2),_0x31f5f9[_0x41ccf2(0x1e6)]='TestRunFinished',_0x31f5f9[_0x41ccf2(0x1c1)]=_0x41ccf2(0x1c7),_0x31f5f9[_0x41ccf2(0x1b9)]=_0x41ccf2(0x1be),_0x31f5f9[_0x41ccf2(0x1d7)]=_0x41ccf2(0x1bc),_0x31f5f9[_0x41ccf2(0x1e0)]=_0x41ccf2(0x211),_0x31f5f9[_0x41ccf2(0x1a8)]='api/v1/batch';const _0x112ac6=_0x31f5f9,_0x8f92b1=_0x112ac6[_0x41ccf2(0x1a6)]['split']('|');let _0x1c2a7e=0x0;while(!![]){switch(_0x8f92b1[_0x1c2a7e++]){case'0':this[_0x41ccf2(0x1c9)]=_0x112ac6[_0x41ccf2(0x1fb)];continue;case'1':this['queue']=[];continue;case'2':this[_0x41ccf2(0x1e5)]=_0x112ac6['SZPtw'];continue;case'3':this['BATCH_EVENT_TYPES']=[_0x112ac6[_0x41ccf2(0x1d2)],_0x112ac6['pBCvs'],_0x112ac6[_0x41ccf2(0x1e6)],_0x112ac6[_0x41ccf2(0x1c1)],_0x112ac6[_0x41ccf2(0x1b9)],_0x112ac6[_0x41ccf2(0x1d7)],_0x112ac6['yLgrz']];continue;case'4':this[_0x41ccf2(0x1c0)]=_0x112ac6[_0x41ccf2(0x1a8)];continue;case'5':this[_0x41ccf2(0x212)]=null;continue;case'6':this[_0x41ccf2(0x1f7)]=![];continue;}break;}}static['getInstance'](){const _0x9cf5a4=a115_0x5c3fe1;return!RequestQueueHandler[_0x9cf5a4(0x1ea)]&&(RequestQueueHandler['instance']=new RequestQueueHandler()),RequestQueueHandler[_0x9cf5a4(0x1ea)];}['start']=()=>{const _0x4f6764=a115_0x5c3fe1;!this[_0x4f6764(0x1f7)]&&(this[_0x4f6764(0x1f7)]=!![],this[_0x4f6764(0x203)]());};[a115_0x5c3fe1(0x1ed)]=_0xe88b52=>{const _0x20da4c=a115_0x5c3fe1,_0x4847d8={'tNtKt':function(_0x5c9fca,_0x589861){return _0x5c9fca===_0x589861;},'PCoZL':_0x20da4c(0x1e9),'SGtTe':function(_0x1b3031,_0xe4158a){return _0x1b3031>_0xe4158a;},'epgZt':'TEST_ATTACHMENT','dDWtX':function(_0xf6cb91,_0x28e797){return _0xf6cb91!==_0x28e797;},'fJczv':_0x20da4c(0x1e3),'RKjfn':function(_0x341dd5,_0xd2a9da){return _0x341dd5(_0xd2a9da);},'GKIaC':'Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..'};if(this[_0x20da4c(0x1a9)][_0x20da4c(0x1cd)](_0xe88b52[_0x20da4c(0x1d3)])){if(_0xe88b52['logs']&&_0xe88b52[_0x20da4c(0x1ae)][0x0]&&_0x4847d8[_0x20da4c(0x1c2)](_0xe88b52['logs'][0x0][_0x20da4c(0x208)],_0x4847d8[_0x20da4c(0x1a1)])){const _0x4e390d={};return _0x4e390d[_0x20da4c(0x1e1)]=!![],_0x4e390d[_0x20da4c(0x1b8)]=[_0xe88b52],_0x4e390d[_0x20da4c(0x1f9)]=this[_0x20da4c(0x1e5)],_0x4e390d;}if(_0xe88b52['logs']&&_0x4847d8[_0x20da4c(0x1e4)](_0xe88b52[_0x20da4c(0x1ae)][_0x20da4c(0x213)],0x0)&&_0x4847d8['tNtKt'](_0xe88b52[_0x20da4c(0x1ae)][0x0][_0x20da4c(0x208)],_0x4847d8[_0x20da4c(0x1ac)])&&_0x4847d8[_0x20da4c(0x1ff)](_0xe88b52['event_type'],_0x4847d8[_0x20da4c(0x1ba)])){const _0xca731e={};return _0xca731e[_0x20da4c(0x1e1)]=!![],_0xca731e[_0x20da4c(0x1b8)]=[_0xe88b52],_0xca731e[_0x20da4c(0x1f9)]=this['uploadAttachmentUrl'],_0xca731e;}this['queue'][_0x20da4c(0x1e8)](_0xe88b52);let _0x51c4a5=null;const _0x388f7b=this[_0x20da4c(0x1e1)]();_0x388f7b&&(_0x4847d8['RKjfn'](trace,_0x4847d8[_0x20da4c(0x1da)]),_0x51c4a5=this['queue'][_0x20da4c(0x1bf)](0x0,BATCH_SIZE),this[_0x20da4c(0x1bd)][_0x20da4c(0x1e2)](0x0,BATCH_SIZE),this[_0x20da4c(0x1d1)]());const _0x229d9a={};return _0x229d9a[_0x20da4c(0x1e1)]=_0x388f7b,_0x229d9a['proceedWithData']=_0x51c4a5,_0x229d9a[_0x20da4c(0x1f9)]=this[_0x20da4c(0x1c0)],_0x229d9a;}const _0x3be08c={};return _0x3be08c[_0x20da4c(0x1e1)]=!![],_0x3be08c;};[a115_0x5c3fe1(0x1a5)]=async()=>{const _0x284745=a115_0x5c3fe1,_0x24a475={'ipwPH':_0x284745(0x1d9),'AMxxa':function(_0x48b2b7,_0xa46fa0){return _0x48b2b7>_0xa46fa0;},'FDKuf':_0x284745(0x20b),'OcXnV':function(_0x36cf70,_0x36d8c3){return _0x36cf70>_0x36d8c3;},'zbMCq':function(_0x5018d5,_0x5a6de5){return _0x5018d5(_0x5a6de5);}};await this[_0x284745(0x1d4)](),this[_0x284745(0x206)](_0x24a475[_0x284745(0x1c4)]);while(_0x24a475['AMxxa'](this[_0x284745(0x1bd)][_0x284745(0x213)],0x0)){const _0x1e83d3=this[_0x284745(0x1bd)][_0x284745(0x1bf)](0x0,BATCH_SIZE);this[_0x284745(0x1bd)]['splice'](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x284745(0x1c0)],_0x24a475[_0x284745(0x1b1)],_0x1e83d3);}_0x24a475[_0x284745(0x1fc)](this[_0x284745(0x1ce)],0x0)&&_0x24a475[_0x284745(0x1a3)](debug,_0x284745(0x20f)+this[_0x284745(0x1ce)]);};['batchAndPostEvents']=async(_0x4ca291,_0x40b26d,_0x1dfc78)=>{const _0x4435a8=a115_0x5c3fe1,_0x525872={'SEWhw':function(_0x5379fc,_0x1cdf25){return _0x5379fc(_0x1cdf25);},'ABmZy':_0x4435a8(0x1fd),'qmVQc':function(_0x536f12){return _0x536f12();},'BRVST':function(_0x490c21,_0x105e73,_0x1d32e4,_0x2d8be8,_0x24f40c){return _0x490c21(_0x105e73,_0x1d32e4,_0x2d8be8,_0x24f40c);},'MhhXP':'POST','ZYlaz':function(_0x296c6a,_0x1556da){return _0x296c6a(_0x1556da);},'aADpy':function(_0x3749c9,_0x3646f5){return _0x3749c9-_0x3646f5;},'CRPwV':function(_0x3897d5,_0x5412d6){return _0x3897d5(_0x5412d6);},'UmnZV':function(_0x1ddd49,_0x52a9e5){return _0x1ddd49-_0x52a9e5;}};let _0x26f898='';try{_0x26f898=_0x1dfc78[_0x4435a8(0x1b0)](_0x3a13cd=>'\x27'+_0x3a13cd[_0x4435a8(0x1d3)]+'\x27:'+(nestedKeyValue(_0x3a13cd,[_0x4435a8(0x20c),_0x4435a8(0x1c3)])||nestedKeyValue(_0x3a13cd,['hook_run',_0x4435a8(0x1c3)])))['join'](','),_0x525872[_0x4435a8(0x1b2)](debug,_0x4435a8(0x1af)+_0x40b26d+'.\x20Request\x20Size\x20-\x20'+Buffer['byteLength'](util['format']('%j',_0x1dfc78),_0x525872[_0x4435a8(0x201)])+_0x4435a8(0x1ab)+_0x26f898);}catch(_0x15ea3b){_0x525872['SEWhw'](debug,_0x4435a8(0x1f4)+util[_0x4435a8(0x1f0)](_0x15ea3b)+'}');}const _0x3fef3e={'headers':_0x525872[_0x4435a8(0x1fe)](getDefaultHeaders)};try{const _0x40d0eb=await _0x525872[_0x4435a8(0x1cc)](nodeRequest,_0x525872['MhhXP'],_0x4ca291,_0x1dfc78,_0x3fef3e);if(_0x40d0eb[_0x4435a8(0x1b5)]['error']){const _0x5bd223={};_0x5bd223[_0x4435a8(0x20e)]=_0x40d0eb[_0x4435a8(0x1b5)][_0x4435a8(0x1db)];throw _0x5bd223;}else _0x525872[_0x4435a8(0x1b4)](debug,_0x40b26d+_0x4435a8(0x1f8)+_0x26f898+_0x4435a8(0x19f)+util[_0x4435a8(0x1f0)]('%j',_0x40d0eb[_0x4435a8(0x1b5)])),this[_0x4435a8(0x1ce)]=Math[_0x4435a8(0x207)](0x0,_0x525872['aADpy'](this[_0x4435a8(0x1ce)],_0x1dfc78[_0x4435a8(0x213)]));}catch(_0x9d886c){_0x9d886c[_0x4435a8(0x1f1)]?_0x525872[_0x4435a8(0x1e7)](debug,'EXCEPTION\x20IN\x20'+_0x40b26d+_0x4435a8(0x1d5)+_0x9d886c[_0x4435a8(0x1f1)][_0x4435a8(0x1b6)]+'\x20'+_0x9d886c[_0x4435a8(0x1f1)][_0x4435a8(0x1f5)]+'\x20'+util['format']('%j',_0x9d886c[_0x4435a8(0x1f1)])):_0x525872['CRPwV'](debug,_0x4435a8(0x1ca)+_0x40b26d+_0x4435a8(0x1d5)+(_0x9d886c[_0x4435a8(0x20e)]||_0x9d886c)),this[_0x4435a8(0x1ce)]=Math['max'](0x0,_0x525872[_0x4435a8(0x1ee)](this['pendingUploads'],_0x1dfc78['length']));}};['startEventBatchPolling']=()=>{const _0x532064=a115_0x5c3fe1,_0x26c8be={'cfImU':function(_0x3933c8,_0x116aa7){return _0x3933c8>_0x116aa7;},'qhejQ':function(_0x351216,_0x354d9a){return _0x351216(_0x354d9a);},'HcmGF':'Interval-Queue','zrlEZ':function(_0x13cad7,_0x3c4ef6){return _0x13cad7(_0x3c4ef6);},'asVef':function(_0x1a726a,_0x2ad678,_0x412f45){return _0x1a726a(_0x2ad678,_0x412f45);}};this[_0x532064(0x212)]=_0x26c8be[_0x532064(0x1d8)](setInterval,async()=>{const _0xdbf216=_0x532064;if(_0x26c8be[_0xdbf216(0x1ec)](this[_0xdbf216(0x1bd)][_0xdbf216(0x213)],0x0)){_0x26c8be['qhejQ'](trace,_0xdbf216(0x1a2)+this[_0xdbf216(0x1bd)][_0xdbf216(0x213)]);const _0x115a53=this[_0xdbf216(0x1bd)]['slice'](0x0,BATCH_SIZE);this[_0xdbf216(0x1bd)][_0xdbf216(0x1e2)](0x0,BATCH_SIZE),await this[_0xdbf216(0x1a7)](this['eventUrl'],_0x26c8be[_0xdbf216(0x1b3)],_0x115a53),_0x26c8be[_0xdbf216(0x1cf)](trace,_0xdbf216(0x1dd)+this[_0xdbf216(0x1bd)]['length']);}},BATCH_INTERVAL);};['resetEventBatchPolling']=()=>{const _0x34493c=a115_0x5c3fe1,_0x190573={};_0x190573[_0x34493c(0x1a4)]=_0x34493c(0x1df);const _0x592bbb=_0x190573;this[_0x34493c(0x206)](_0x592bbb[_0x34493c(0x1a4)]),this[_0x34493c(0x203)]();};['removeEventBatchPolling']=_0x8a536c=>{const _0x447362=a115_0x5c3fe1,_0x5904db={'VatZJ':function(_0x15851e,_0x22153b){return _0x15851e(_0x22153b);},'NGuNp':function(_0x34fed1,_0xefa812){return _0x34fed1===_0xefa812;},'JGCcm':'REMOVING'};this[_0x447362(0x212)]&&(_0x5904db[_0x447362(0x1c6)](clearInterval,this[_0x447362(0x212)]),this[_0x447362(0x212)]=null,_0x5904db[_0x447362(0x1f3)](_0x8a536c,_0x5904db[_0x447362(0x1d0)])&&(this[_0x447362(0x1f7)]=![]));};['shouldProceed']=()=>{const _0x10a10e=a115_0x5c3fe1,_0x552ea2={};_0x552ea2[_0x10a10e(0x1ad)]=function(_0x99cf45,_0xeecea4){return _0x99cf45>=_0xeecea4;};const _0x2232f5=_0x552ea2;return _0x2232f5['tPmwe'](this[_0x10a10e(0x1bd)][_0x10a10e(0x213)],BATCH_SIZE);};async[a115_0x5c3fe1(0x1d4)](_0x505f26=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x3d086c=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x3dcde0=a115_0x5c3fe1,_0x45e384={'FRviN':function(_0x55ccdb,_0x5a187b){return _0x55ccdb<=_0x5a187b;},'IRhPl':function(_0xee0935,_0x46da31){return _0xee0935<=_0x46da31;},'CoqWl':function(_0x534403,_0x559871){return _0x534403(_0x559871);},'KMkZS':function(_0x26dc98,_0x56c067){return _0x26dc98-_0x56c067;}};if(_0x45e384[_0x3dcde0(0x1a0)](this[_0x3dcde0(0x1ce)],0x0)||_0x45e384[_0x3dcde0(0x202)](_0x505f26,0x0))return;return await _0x45e384[_0x3dcde0(0x1cb)](sleep,_0x3d086c),this[_0x3dcde0(0x1d4)](_0x45e384['KMkZS'](_0x505f26,_0x3d086c));}}module[a115_0x5c3fe1(0x1aa)]=RequestQueueHandler;