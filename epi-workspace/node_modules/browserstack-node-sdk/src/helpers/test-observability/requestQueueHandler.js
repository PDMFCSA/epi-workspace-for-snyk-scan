const a86_0x4dba1c=a86_0x5076;function a86_0x2690(){const _0x218541=['push','YGTIC','RoAoB','api/v1/batch','MrzNp','WRCez','CBTSessionCreated','qpXpd','TEST_ATTACHMENT','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','add','xzOTS','PvqHo','batchAndPostEvents','MsAYi','.\x20Request\x20Size\x20-\x20','UPPcV','MBqCm','data','JExMX','join','TestRunStarted','RHnsd','proceedWithData','5950917sLYXIV','resetEventBatchPolling','oSvMF','start','\x20bytes.\x20Events\x20are\x20','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','length','bzpDs','splice','instance','uploadPending','XAfHD','TestRunFinished','3664300mBWutx','REMOVING','cexaA','aoleS','scPXK','gEhYO','pbepW','vRUwG','event_type','4WCmznz','ZTGbK','message','RESETTING','WRhwr','./utils','XQrXG','EXCEPTION\x20IN\x20','MubCT','RrpoE','Interval-Queue','startEventBatchPolling','./constants','removeEventBatchPolling','started','logs','oayjT','kind','response','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','713697hglUeV','ccNEo','error','uuid','VKCuL','getInstance','queue','uploadAttachmentUrl','kxyba','HookRunFinished','lDTLW','exports','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','util','utf8','1880781ERvYzj','hook_run','shouldProceed','2158206pqHALA','byteLength','2839719iEVhZC','\x20--\x20','lGGxv','slice','MKmoI','pollEventBatchInterval','zEoXl','eventUrl','screenshotEventUrl','LogCreated','test_run','Shutdown-Queue','6AQpdZs','max','TestRunSkipped','5|1|2|3|0|4|6','proceedWithUrl','7399208xdtBVW','QnYNB','format','api/v1/screenshots','shutdown','hWnmy','../helper','pendingUploads','BATCH_EVENT_TYPES','SJQZA','Remaining\x20Queue\x20Length\x20-\x20','FjShe'];a86_0x2690=function(){return _0x218541;};return a86_0x2690();}(function(_0x80592d,_0x315e76){const _0x3f90e2=a86_0x5076,_0x3af137=_0x80592d();while(!![]){try{const _0xb3c06d=-parseInt(_0x3f90e2(0xc5))/0x1+parseInt(_0x3f90e2(0xd7))/0x2+-parseInt(_0x3f90e2(0xd9))/0x3*(-parseInt(_0x3f90e2(0xb1))/0x4)+parseInt(_0x3f90e2(0xa8))/0x5*(-parseInt(_0x3f90e2(0xe5))/0x6)+-parseInt(_0x3f90e2(0xd4))/0x7+parseInt(_0x3f90e2(0xea))/0x8+-parseInt(_0x3f90e2(0x10e))/0x9;if(_0xb3c06d===_0x315e76)break;else _0x3af137['push'](_0x3af137['shift']());}catch(_0x4dd5de){_0x3af137['push'](_0x3af137['shift']());}}}(a86_0x2690,0x8c2ac));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a86_0x4dba1c(0xbd)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a86_0x4dba1c(0xb6)),{nestedKeyValue}=require(a86_0x4dba1c(0xf0)),util=require(a86_0x4dba1c(0xd2));class RequestQueueHandler{static ['instance'];[a86_0x4dba1c(0xf1)]=0x0;constructor(){const _0x45b3d0=a86_0x4dba1c,_0x56c87f={};_0x56c87f['RoAoB']=_0x45b3d0(0xe8),_0x56c87f[_0x45b3d0(0xa2)]='upload-attachments',_0x56c87f['xzOTS']=_0x45b3d0(0xf9),_0x56c87f['XAfHD']=_0x45b3d0(0xed),_0x56c87f['UPPcV']=_0x45b3d0(0xe2),_0x56c87f['kxyba']=_0x45b3d0(0xfc),_0x56c87f[_0x45b3d0(0xc1)]=_0x45b3d0(0xa7),_0x56c87f[_0x45b3d0(0xad)]=_0x45b3d0(0xe7),_0x56c87f[_0x45b3d0(0xac)]=_0x45b3d0(0xce),_0x56c87f['HmEZA']=_0x45b3d0(0x10b),_0x56c87f[_0x45b3d0(0xdd)]='HookRunStarted';const _0x53ff03=_0x56c87f,_0x417c74=_0x53ff03[_0x45b3d0(0xf8)]['split']('|');let _0x2ce002=0x0;while(!![]){switch(_0x417c74[_0x2ce002++]){case'0':this[_0x45b3d0(0xcc)]=_0x53ff03[_0x45b3d0(0xa2)];continue;case'1':this[_0x45b3d0(0xbf)]=![];continue;case'2':this[_0x45b3d0(0xe0)]=_0x53ff03[_0x45b3d0(0x101)];continue;case'3':this[_0x45b3d0(0xe1)]=_0x53ff03[_0x45b3d0(0xa6)];continue;case'4':this['BATCH_EVENT_TYPES']=[_0x53ff03[_0x45b3d0(0x106)],_0x53ff03[_0x45b3d0(0xcd)],_0x53ff03[_0x45b3d0(0xc1)],_0x53ff03['gEhYO'],_0x53ff03[_0x45b3d0(0xac)],_0x53ff03['HmEZA'],_0x53ff03['MKmoI']];continue;case'5':this['queue']=[];continue;case'6':this[_0x45b3d0(0xde)]=null;continue;}break;}}static[a86_0x4dba1c(0xca)](){const _0x2555bc=a86_0x4dba1c;return!RequestQueueHandler[_0x2555bc(0xa4)]&&(RequestQueueHandler['instance']=new RequestQueueHandler()),RequestQueueHandler['instance'];}[a86_0x4dba1c(0x9e)]=()=>{const _0x17b470=a86_0x4dba1c;!this[_0x17b470(0xbf)]&&(this['started']=!![],this['startEventBatchPolling']());};[a86_0x4dba1c(0x100)]=_0x281762=>{const _0x1b31b6=a86_0x4dba1c,_0x20297d={'cexaA':function(_0xddb58f,_0x15f4f0){return _0xddb58f===_0x15f4f0;},'pbepW':'TEST_SCREENSHOT','lbgKa':function(_0x3307c1,_0x14ca88){return _0x3307c1>_0x14ca88;},'eJPsv':_0x1b31b6(0xfe),'QnYNB':function(_0x2546c7,_0x10ac96){return _0x2546c7!==_0x10ac96;},'uVCZc':'TestRunFinished','MubCT':function(_0x5d4cce,_0x209137){return _0x5d4cce(_0x209137);},'lGGxv':_0x1b31b6(0xff)};if(this[_0x1b31b6(0xf2)]['includes'](_0x281762[_0x1b31b6(0xb0)])){if(_0x281762[_0x1b31b6(0xc0)]&&_0x281762[_0x1b31b6(0xc0)][0x0]&&_0x20297d['cexaA'](_0x281762[_0x1b31b6(0xc0)][0x0][_0x1b31b6(0xc2)],_0x20297d[_0x1b31b6(0xae)])){const _0x5bb500={};return _0x5bb500[_0x1b31b6(0xd6)]=!![],_0x5bb500['proceedWithData']=[_0x281762],_0x5bb500['proceedWithUrl']=this['screenshotEventUrl'],_0x5bb500;}if(_0x281762['logs']&&_0x20297d['lbgKa'](_0x281762[_0x1b31b6(0xc0)][_0x1b31b6(0xa1)],0x0)&&_0x20297d[_0x1b31b6(0xaa)](_0x281762[_0x1b31b6(0xc0)][0x0][_0x1b31b6(0xc2)],_0x20297d['eJPsv'])&&_0x20297d[_0x1b31b6(0xeb)](_0x281762[_0x1b31b6(0xb0)],_0x20297d['uVCZc'])){const _0xc6e1e4={};return _0xc6e1e4['shouldProceed']=!![],_0xc6e1e4[_0x1b31b6(0x10d)]=[_0x281762],_0xc6e1e4[_0x1b31b6(0xe9)]=this[_0x1b31b6(0xcc)],_0xc6e1e4;}this['queue'][_0x1b31b6(0xf6)](_0x281762);let _0x2240fe=null;const _0x162efc=this[_0x1b31b6(0xd6)]();_0x162efc&&(_0x20297d[_0x1b31b6(0xb9)](trace,_0x20297d[_0x1b31b6(0xdb)]),_0x2240fe=this[_0x1b31b6(0xcb)][_0x1b31b6(0xdc)](0x0,BATCH_SIZE),this[_0x1b31b6(0xcb)][_0x1b31b6(0xa3)](0x0,BATCH_SIZE),this[_0x1b31b6(0x10f)]());const _0x55f6af={};return _0x55f6af[_0x1b31b6(0xd6)]=_0x162efc,_0x55f6af[_0x1b31b6(0x10d)]=_0x2240fe,_0x55f6af[_0x1b31b6(0xe9)]=this[_0x1b31b6(0xe0)],_0x55f6af;}const _0x131fe1={};return _0x131fe1[_0x1b31b6(0xd6)]=!![],_0x131fe1;};[a86_0x4dba1c(0xee)]=async()=>{const _0x1590c3=a86_0x4dba1c,_0x465cc7={'JExMX':_0x1590c3(0xa9),'RHnsd':function(_0x24df71,_0x91c557){return _0x24df71>_0x91c557;},'lDTLW':_0x1590c3(0xe4),'oSvMF':function(_0x2ebdd4,_0x443f65){return _0x2ebdd4(_0x443f65);}};await this[_0x1590c3(0xa5)](),this[_0x1590c3(0xbe)](_0x465cc7[_0x1590c3(0x109)]);while(_0x465cc7[_0x1590c3(0x10c)](this[_0x1590c3(0xcb)]['length'],0x0)){const _0xec2c72=this[_0x1590c3(0xcb)][_0x1590c3(0xdc)](0x0,BATCH_SIZE);this[_0x1590c3(0xcb)]['splice'](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x1590c3(0xe0)],_0x465cc7[_0x1590c3(0xcf)],_0xec2c72);}_0x465cc7[_0x1590c3(0x10c)](this[_0x1590c3(0xf1)],0x0)&&_0x465cc7[_0x1590c3(0x110)](debug,_0x1590c3(0xc4)+this[_0x1590c3(0xf1)]);};[a86_0x4dba1c(0x103)]=async(_0x658a51,_0x5c604c,_0x5e8781)=>{const _0x4f6814=a86_0x4dba1c,_0x2ba2db={'SJQZA':function(_0x52947a,_0x58b9b0){return _0x52947a(_0x58b9b0);},'MsAYi':_0x4f6814(0xd3),'PvqHo':function(_0x521c69,_0x2b6dff){return _0x521c69(_0x2b6dff);},'VKCuL':function(_0x579bf5){return _0x579bf5();},'hWnmy':function(_0x22913e,_0x3c7654,_0x4c4878,_0x244ca3,_0x299aad){return _0x22913e(_0x3c7654,_0x4c4878,_0x244ca3,_0x299aad);},'ZTGbK':'POST','YZKjI':function(_0x555128,_0x525972){return _0x555128(_0x525972);},'aoleS':function(_0x50a4d8,_0x4880b4){return _0x50a4d8-_0x4880b4;},'MrzNp':function(_0x410da1,_0x3e8cfd){return _0x410da1(_0x3e8cfd);},'FjShe':function(_0x1cfa6f,_0x5c8575){return _0x1cfa6f-_0x5c8575;}};let _0x3901ee='';try{_0x3901ee=_0x5e8781['map'](_0x3f252c=>'\x27'+_0x3f252c['event_type']+'\x27:'+(nestedKeyValue(_0x3f252c,[_0x4f6814(0xe3),_0x4f6814(0xc8)])||nestedKeyValue(_0x3f252c,[_0x4f6814(0xd5),_0x4f6814(0xc8)])))[_0x4f6814(0x10a)](','),_0x2ba2db[_0x4f6814(0xf3)](debug,'Processing\x20batch\x20events\x20for\x20'+_0x5c604c+_0x4f6814(0x105)+Buffer[_0x4f6814(0xd8)](util[_0x4f6814(0xec)]('%j',_0x5e8781),_0x2ba2db[_0x4f6814(0x104)])+_0x4f6814(0x9f)+_0x3901ee);}catch(_0x2228f2){_0x2ba2db[_0x4f6814(0x102)](debug,_0x4f6814(0xd1)+util[_0x4f6814(0xec)](_0x2228f2)+'}');}const _0x57170e={'headers':_0x2ba2db[_0x4f6814(0xc9)](getDefaultHeaders)};try{const _0x13b137=await _0x2ba2db[_0x4f6814(0xef)](nodeRequest,_0x2ba2db[_0x4f6814(0xb2)],_0x658a51,_0x5e8781,_0x57170e);if(_0x13b137[_0x4f6814(0x108)][_0x4f6814(0xc7)]){const _0x48c345={};_0x48c345[_0x4f6814(0xb3)]=_0x13b137[_0x4f6814(0x108)][_0x4f6814(0xc7)];throw _0x48c345;}else _0x2ba2db['YZKjI'](debug,_0x5c604c+'\x20event\x20successful\x20for\x20events\x20'+_0x3901ee+_0x4f6814(0xda)+util[_0x4f6814(0xec)]('%j',_0x13b137['data'])),this[_0x4f6814(0xf1)]=Math['max'](0x0,_0x2ba2db[_0x4f6814(0xab)](this[_0x4f6814(0xf1)],_0x5e8781['length']));}catch(_0x4be4c4){_0x4be4c4[_0x4f6814(0xc3)]?_0x2ba2db['YZKjI'](debug,_0x4f6814(0xb8)+_0x5c604c+'\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20'+_0x4be4c4[_0x4f6814(0xc3)]['status']+'\x20'+_0x4be4c4[_0x4f6814(0xc3)]['statusText']+'\x20'+util['format']('%j',_0x4be4c4[_0x4f6814(0xc3)])):_0x2ba2db[_0x4f6814(0xfa)](debug,_0x4f6814(0xb8)+_0x5c604c+_0x4f6814(0xa0)+(_0x4be4c4[_0x4f6814(0xb3)]||_0x4be4c4)),this[_0x4f6814(0xf1)]=Math[_0x4f6814(0xe6)](0x0,_0x2ba2db[_0x4f6814(0xf5)](this[_0x4f6814(0xf1)],_0x5e8781['length']));}};['startEventBatchPolling']=()=>{const _0x50d63b=a86_0x4dba1c,_0xaf605c={'zEoXl':function(_0x12f052,_0x4ffc79){return _0x12f052>_0x4ffc79;},'qpXpd':function(_0x5c9ba8,_0x340793){return _0x5c9ba8(_0x340793);},'WRhwr':_0x50d63b(0xbb),'RrpoE':function(_0x4ab98c,_0x457a14){return _0x4ab98c(_0x457a14);},'ccNEo':function(_0x4bee85,_0x890268,_0x1ad177){return _0x4bee85(_0x890268,_0x1ad177);}};this[_0x50d63b(0xde)]=_0xaf605c[_0x50d63b(0xc6)](setInterval,async()=>{const _0x56a6c6=_0x50d63b;if(_0xaf605c[_0x56a6c6(0xdf)](this[_0x56a6c6(0xcb)][_0x56a6c6(0xa1)],0x0)){_0xaf605c[_0x56a6c6(0xfd)](trace,'Processing\x20events.\x20Queue\x20Length\x20-\x20'+this[_0x56a6c6(0xcb)]['length']);const _0x350b82=this[_0x56a6c6(0xcb)][_0x56a6c6(0xdc)](0x0,BATCH_SIZE);this[_0x56a6c6(0xcb)][_0x56a6c6(0xa3)](0x0,BATCH_SIZE),await this[_0x56a6c6(0x103)](this['eventUrl'],_0xaf605c[_0x56a6c6(0xb5)],_0x350b82),_0xaf605c[_0x56a6c6(0xba)](trace,_0x56a6c6(0xf4)+this[_0x56a6c6(0xcb)]['length']);}},BATCH_INTERVAL);};[a86_0x4dba1c(0x10f)]=()=>{const _0x12233a=a86_0x4dba1c,_0x4a6ad1={};_0x4a6ad1[_0x12233a(0x107)]=_0x12233a(0xb4);const _0x5b9b5e=_0x4a6ad1;this[_0x12233a(0xbe)](_0x5b9b5e[_0x12233a(0x107)]),this[_0x12233a(0xbc)]();};[a86_0x4dba1c(0xbe)]=_0x5cc86f=>{const _0xb39bbd=a86_0x4dba1c,_0x5c1671={'WRCez':function(_0x55ed79,_0x57d213){return _0x55ed79(_0x57d213);},'BtYCO':function(_0x4b0213,_0xe90508){return _0x4b0213===_0xe90508;},'vRUwG':_0xb39bbd(0xa9)};this[_0xb39bbd(0xde)]&&(_0x5c1671[_0xb39bbd(0xfb)](clearInterval,this['pollEventBatchInterval']),this[_0xb39bbd(0xde)]=null,_0x5c1671['BtYCO'](_0x5cc86f,_0x5c1671[_0xb39bbd(0xaf)])&&(this[_0xb39bbd(0xbf)]=![]));};[a86_0x4dba1c(0xd6)]=()=>{const _0x915ca8=a86_0x4dba1c,_0x2988d6={};_0x2988d6['IedAz']=function(_0x1aad7a,_0x2dee53){return _0x1aad7a>=_0x2dee53;};const _0x2a72d2=_0x2988d6;return _0x2a72d2['IedAz'](this['queue'][_0x915ca8(0xa1)],BATCH_SIZE);};async[a86_0x4dba1c(0xa5)](_0x13a15e=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x2dafb1=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x2a37ac=a86_0x4dba1c,_0x5e55fe={'YGTIC':function(_0x5a61af,_0x2c5d00){return _0x5a61af<=_0x2c5d00;},'XQrXG':function(_0x428099,_0x4241d7){return _0x428099(_0x4241d7);},'vOKyQ':function(_0x4d6517,_0x25d8a6){return _0x4d6517-_0x25d8a6;}};if(_0x5e55fe[_0x2a37ac(0xf7)](this['pendingUploads'],0x0)||_0x5e55fe[_0x2a37ac(0xf7)](_0x13a15e,0x0))return;return await _0x5e55fe[_0x2a37ac(0xb7)](sleep,_0x2dafb1),this[_0x2a37ac(0xa5)](_0x5e55fe['vOKyQ'](_0x13a15e,_0x2dafb1));}}function a86_0x5076(_0x4918d5,_0x1aab91){const _0x269043=a86_0x2690();return a86_0x5076=function(_0x507689,_0x3d0ee7){_0x507689=_0x507689-0x9e;let _0xc57186=_0x269043[_0x507689];return _0xc57186;},a86_0x5076(_0x4918d5,_0x1aab91);}module[a86_0x4dba1c(0xd0)]=RequestQueueHandler;