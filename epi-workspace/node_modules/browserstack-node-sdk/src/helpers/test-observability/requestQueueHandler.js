function a118_0x16ce(){const _0x100da9=['\x20:\x20','GiAje','utf8','format','Processing\x20batch\x20events\x20for\x20','REMOVING','WwRyG','hook_run','mJjFd','Shutdown-Queue','started','HookRunFinished','../helper','vNeOv','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','getInstance','RESETTING','length','statusText','\x20REQUEST\x20TO\x20','1043764rglhGv','ozvoE','includes','uploadPending','./constants','12NHxnTz','UZHRY','FkKXe','TestRunFinished','proceedWithUrl','XOqrT','blLqk','slice','CtJhU','NMMYE','1798535GzHvyQ','AoaVr','dMNbS','logs','./utils','eventUrl','TEST_REPORTING_ANALYTICS','PzTDw','screenshotEventUrl','error','urhJG','../../bin/utils/constants','MsUPi','EXCEPTION\x20IN\x20','data','oNSAp','max','3150352JcfHOC','QvtWh','.\x20Request\x20Size\x20-\x20','splice','mDHCM','TEST_SCREENSHOT','proceedWithData','HookRunStarted','3332514PSMymw','eyVHm','XSRQd','join','Remaining\x20Queue\x20Length\x20-\x20','Spcmu','CYxbu','OCTaq','irhjw','xwbIC','ipQvQ','BATCH_EVENT_TYPES','pollEventBatchInterval','513501znFbOK','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','status','9965529IDvwbb','map','kind','exports','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','resetEventBatchPolling','queue','uploadAttachmentUrl','15701Rmltwm','ThIXz','removeEventBatchPolling','rmKzF','batchAndPostEvents','event_type','xiLUF','552pcWGGQ','startEventBatchPolling','Interval-Queue','hhVKz','aErKZ','gUFuS','api/v1/batch','byteLength','POST','response','shouldProceed','pendingUploads','instance','TestRunStarted','message','Processing\x20events.\x20Queue\x20Length\x20-\x20'];a118_0x16ce=function(){return _0x100da9;};return a118_0x16ce();}const a118_0x17d302=a118_0x643c;function a118_0x643c(_0x396695,_0x2a2c4b){const _0x16cefe=a118_0x16ce();return a118_0x643c=function(_0x643c81,_0x3367c6){_0x643c81=_0x643c81-0xf7;let _0x3a6028=_0x16cefe[_0x643c81];return _0x3a6028;},a118_0x643c(_0x396695,_0x2a2c4b);}(function(_0x3eeb03,_0xd6d2c8){const _0x7fa7eb=a118_0x643c,_0x3a2e91=_0x3eeb03();while(!![]){try{const _0x22a93c=parseInt(_0x7fa7eb(0x104))/0x1+parseInt(_0x7fa7eb(0x109))/0x2*(parseInt(_0x7fa7eb(0x139))/0x3)+parseInt(_0x7fa7eb(0x124))/0x4+-parseInt(_0x7fa7eb(0x113))/0x5+-parseInt(_0x7fa7eb(0x12c))/0x6+-parseInt(_0x7fa7eb(0x144))/0x7*(parseInt(_0x7fa7eb(0x14b))/0x8)+-parseInt(_0x7fa7eb(0x13c))/0x9;if(_0x22a93c===_0xd6d2c8)break;else _0x3a2e91['push'](_0x3a2e91['shift']());}catch(_0x52f21b){_0x3a2e91['push'](_0x3a2e91['shift']());}}}(a118_0x16ce,0xa64dc));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a118_0x17d302(0x108)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a118_0x17d302(0x117)),{nestedKeyValue}=require(a118_0x17d302(0xfc)),util=require('util'),constants=require(a118_0x17d302(0x11e));class RequestQueueHandler{static [a118_0x17d302(0x157)];[a118_0x17d302(0x156)]=0x0;constructor(){const _0x3d46b5=a118_0x17d302,_0x477561={};_0x477561['KXKSP']='0|1|3|6|2|5|4',_0x477561[_0x3d46b5(0x135)]='upload-attachments',_0x477561[_0x3d46b5(0x15c)]=_0x3d46b5(0x151),_0x477561[_0x3d46b5(0x131)]='LogCreated',_0x477561[_0x3d46b5(0x145)]='CBTSessionCreated',_0x477561[_0x3d46b5(0x147)]=_0x3d46b5(0x10c),_0x477561[_0x3d46b5(0x11a)]='TestRunSkipped',_0x477561['QvtWh']=_0x3d46b5(0xfb),_0x477561['hhVKz']=_0x3d46b5(0x158),_0x477561[_0x3d46b5(0x111)]=_0x3d46b5(0x12b),_0x477561[_0x3d46b5(0x105)]='api/v1/screenshots';const _0x129d3f=_0x477561,_0x2b96a3=_0x129d3f['KXKSP']['split']('|');let _0x357c9d=0x0;while(!![]){switch(_0x2b96a3[_0x357c9d++]){case'0':this['queue']=[];continue;case'1':this[_0x3d46b5(0xfa)]=![];continue;case'2':this[_0x3d46b5(0x143)]=_0x129d3f[_0x3d46b5(0x135)];continue;case'3':this[_0x3d46b5(0x118)]=_0x129d3f['GiAje'];continue;case'4':this['pollEventBatchInterval']=null;continue;case'5':this['BATCH_EVENT_TYPES']=[_0x129d3f['Spcmu'],_0x129d3f[_0x3d46b5(0x145)],_0x129d3f[_0x3d46b5(0x147)],_0x129d3f[_0x3d46b5(0x11a)],_0x129d3f[_0x3d46b5(0x125)],_0x129d3f[_0x3d46b5(0x14e)],_0x129d3f[_0x3d46b5(0x111)]];continue;case'6':this[_0x3d46b5(0x11b)]=_0x129d3f['ozvoE'];continue;}break;}}static[a118_0x17d302(0xff)](){const _0x377e15=a118_0x17d302;return!RequestQueueHandler[_0x377e15(0x157)]&&(RequestQueueHandler['instance']=new RequestQueueHandler()),RequestQueueHandler['instance'];}['start']=()=>{!this['started']&&(this['started']=!![],this['startEventBatchPolling']());};['add']=_0x196d91=>{const _0x4aed4d=a118_0x17d302,_0x174827={'aErKZ':function(_0x5c3e36,_0x3e21ea){return _0x5c3e36===_0x3e21ea;},'OCTaq':_0x4aed4d(0x129),'XOqrT':function(_0x2d4e12,_0x1faa23){return _0x2d4e12>_0x1faa23;},'XZNVZ':function(_0x5ed0a5,_0x299f7){return _0x5ed0a5===_0x299f7;},'irhjw':'TEST_ATTACHMENT','mJjFd':function(_0x44361b,_0x1e071b){return _0x44361b!==_0x1e071b;},'nPtqV':_0x4aed4d(0x10c),'blLqk':function(_0x282628,_0x2cfa9f){return _0x282628(_0x2cfa9f);},'ipQvQ':_0x4aed4d(0xfe)};if(this[_0x4aed4d(0x137)][_0x4aed4d(0x106)](_0x196d91[_0x4aed4d(0x149)])){if(_0x196d91['logs']&&_0x196d91['logs'][0x0]&&_0x174827[_0x4aed4d(0x14f)](_0x196d91[_0x4aed4d(0x116)][0x0][_0x4aed4d(0x13e)],_0x174827[_0x4aed4d(0x133)])){const _0x348b7f={};return _0x348b7f['shouldProceed']=!![],_0x348b7f[_0x4aed4d(0x12a)]=[_0x196d91],_0x348b7f[_0x4aed4d(0x10d)]=this[_0x4aed4d(0x11b)],_0x348b7f;}if(_0x196d91['logs']&&_0x174827[_0x4aed4d(0x10e)](_0x196d91[_0x4aed4d(0x116)][_0x4aed4d(0x101)],0x0)&&_0x174827['XZNVZ'](_0x196d91[_0x4aed4d(0x116)][0x0][_0x4aed4d(0x13e)],_0x174827[_0x4aed4d(0x134)])&&_0x174827[_0x4aed4d(0xf8)](_0x196d91['event_type'],_0x174827['nPtqV'])){const _0x57a5e8={};return _0x57a5e8[_0x4aed4d(0x155)]=!![],_0x57a5e8[_0x4aed4d(0x12a)]=[_0x196d91],_0x57a5e8[_0x4aed4d(0x10d)]=this['uploadAttachmentUrl'],_0x57a5e8;}this['queue']['push'](_0x196d91);let _0x4af630=null;const _0x512924=this[_0x4aed4d(0x155)]();_0x512924&&(_0x174827[_0x4aed4d(0x10f)](trace,_0x174827[_0x4aed4d(0x136)]),_0x4af630=this[_0x4aed4d(0x142)][_0x4aed4d(0x110)](0x0,BATCH_SIZE),this[_0x4aed4d(0x142)]['splice'](0x0,BATCH_SIZE),this[_0x4aed4d(0x141)]());const _0x317c88={};return _0x317c88[_0x4aed4d(0x155)]=_0x512924,_0x317c88['proceedWithData']=_0x4af630,_0x317c88[_0x4aed4d(0x10d)]=this[_0x4aed4d(0x118)],_0x317c88;}const _0x5737b9={};return _0x5737b9[_0x4aed4d(0x155)]=!![],_0x5737b9;};['shutdown']=async()=>{const _0x11c82b=a118_0x17d302,_0x2f4a12={'AoaVr':'REMOVING','XSRQd':function(_0x56bda2,_0x317284){return _0x56bda2>_0x317284;},'fxDEg':_0x11c82b(0xf9),'CYxbu':function(_0x56079d,_0x4f696e){return _0x56079d>_0x4f696e;},'mDHCM':function(_0x436eb6,_0x4b4fa8){return _0x436eb6(_0x4b4fa8);}};await this['uploadPending'](),this[_0x11c82b(0x146)](_0x2f4a12[_0x11c82b(0x114)]);while(_0x2f4a12[_0x11c82b(0x12e)](this['queue'][_0x11c82b(0x101)],0x0)){const _0x423bb0=this[_0x11c82b(0x142)][_0x11c82b(0x110)](0x0,BATCH_SIZE);this[_0x11c82b(0x142)][_0x11c82b(0x127)](0x0,BATCH_SIZE),await this[_0x11c82b(0x148)](this[_0x11c82b(0x118)],_0x2f4a12['fxDEg'],_0x423bb0);}_0x2f4a12[_0x11c82b(0x132)](this['pendingUploads'],0x0)&&_0x2f4a12[_0x11c82b(0x128)](debug,_0x11c82b(0x13a)+this[_0x11c82b(0x156)]);};[a118_0x17d302(0x148)]=async(_0x41e44a,_0x362734,_0x3ea399)=>{const _0x544cc0=a118_0x17d302,_0x49e563={'NMMYE':function(_0x47a1cc,_0x5ba60f){return _0x47a1cc(_0x5ba60f);},'xqCCM':_0x544cc0(0x15d),'lGZJQ':function(_0x40ef8a){return _0x40ef8a();},'WPzSY':function(_0x53e630,_0x529848,_0x35cb07,_0x1e9fe8,_0xf5f255){return _0x53e630(_0x529848,_0x35cb07,_0x1e9fe8,_0xf5f255);},'FkKXe':_0x544cc0(0x153),'gUFuS':function(_0x3a10d2,_0x1667ad){return _0x3a10d2-_0x1667ad;}};let _0x269e74='';try{_0x269e74=_0x3ea399[_0x544cc0(0x13d)](_0x1124ce=>'\x27'+_0x1124ce['event_type']+'\x27:'+(nestedKeyValue(_0x1124ce,['test_run','uuid'])||nestedKeyValue(_0x1124ce,[_0x544cc0(0xf7),'uuid'])))[_0x544cc0(0x12f)](','),_0x49e563[_0x544cc0(0x112)](debug,_0x544cc0(0x15f)+_0x362734+_0x544cc0(0x126)+Buffer[_0x544cc0(0x152)](util['format']('%j',_0x3ea399),_0x49e563['xqCCM'])+'\x20bytes.\x20Events\x20are\x20'+_0x269e74);}catch(_0x3b061a){_0x49e563[_0x544cc0(0x112)](debug,_0x544cc0(0x140)+util[_0x544cc0(0x15e)](_0x3b061a)+'}');}const _0x240755={'headers':_0x49e563['lGZJQ'](getDefaultHeaders)};try{const _0x107e71=await _0x49e563['WPzSY'](nodeRequest,_0x49e563[_0x544cc0(0x10b)],_0x41e44a,_0x3ea399,_0x240755);if(_0x107e71[_0x544cc0(0x121)][_0x544cc0(0x11c)]){const _0x43776d={};_0x43776d[_0x544cc0(0x159)]=_0x107e71[_0x544cc0(0x121)][_0x544cc0(0x11c)];throw _0x43776d;}else _0x49e563['NMMYE'](debug,_0x362734+'\x20event\x20successful\x20for\x20events\x20'+_0x269e74+'\x20--\x20'+util[_0x544cc0(0x15e)]('%j',_0x107e71['data'])),this['pendingUploads']=Math[_0x544cc0(0x123)](0x0,_0x49e563[_0x544cc0(0x150)](this[_0x544cc0(0x156)],_0x3ea399[_0x544cc0(0x101)]));}catch(_0x21c2db){_0x21c2db[_0x544cc0(0x154)]?_0x49e563['NMMYE'](debug,'EXCEPTION\x20IN\x20'+_0x362734+'\x20REQUEST\x20TO\x20'+constants[_0x544cc0(0x119)]+_0x544cc0(0x15b)+_0x21c2db[_0x544cc0(0x154)][_0x544cc0(0x13b)]+'\x20'+_0x21c2db[_0x544cc0(0x154)][_0x544cc0(0x102)]+'\x20'+util['format']('%j',_0x21c2db['response'])):_0x49e563[_0x544cc0(0x112)](debug,_0x544cc0(0x120)+_0x362734+_0x544cc0(0x103)+constants['TEST_REPORTING_ANALYTICS']+'\x20:\x20'+(_0x21c2db[_0x544cc0(0x159)]||_0x21c2db)),this[_0x544cc0(0x156)]=Math['max'](0x0,_0x49e563[_0x544cc0(0x150)](this['pendingUploads'],_0x3ea399[_0x544cc0(0x101)]));}};[a118_0x17d302(0x14c)]=()=>{const _0x1bd674=a118_0x17d302,_0x284f9d={'eyVHm':function(_0x5e008f,_0x41f65a){return _0x5e008f>_0x41f65a;},'xiLUF':function(_0x2fe4e5,_0x25d078){return _0x2fe4e5(_0x25d078);},'WwRyG':_0x1bd674(0x14d),'dMNbS':function(_0x4a2dd6,_0x4dce1d,_0x206bfb){return _0x4a2dd6(_0x4dce1d,_0x206bfb);}};this['pollEventBatchInterval']=_0x284f9d[_0x1bd674(0x115)](setInterval,async()=>{const _0x22b764=_0x1bd674;if(_0x284f9d[_0x22b764(0x12d)](this[_0x22b764(0x142)][_0x22b764(0x101)],0x0)){_0x284f9d[_0x22b764(0x14a)](trace,_0x22b764(0x15a)+this[_0x22b764(0x142)]['length']);const _0x5e64e7=this['queue'][_0x22b764(0x110)](0x0,BATCH_SIZE);this[_0x22b764(0x142)][_0x22b764(0x127)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x22b764(0x118)],_0x284f9d[_0x22b764(0x161)],_0x5e64e7),_0x284f9d[_0x22b764(0x14a)](trace,_0x22b764(0x130)+this[_0x22b764(0x142)][_0x22b764(0x101)]);}},BATCH_INTERVAL);};[a118_0x17d302(0x141)]=()=>{const _0x451b6f=a118_0x17d302,_0x11b5fd={};_0x11b5fd[_0x451b6f(0xfd)]=_0x451b6f(0x100);const _0x2072dd=_0x11b5fd;this[_0x451b6f(0x146)](_0x2072dd[_0x451b6f(0xfd)]),this[_0x451b6f(0x14c)]();};[a118_0x17d302(0x146)]=_0x15a638=>{const _0x7c70d1=a118_0x17d302,_0x471470={'UjPkT':function(_0x145c2a,_0x5c2872){return _0x145c2a(_0x5c2872);},'QsUZB':function(_0x1a0a94,_0x40214f){return _0x1a0a94===_0x40214f;},'oNSAp':_0x7c70d1(0x160)};this[_0x7c70d1(0x138)]&&(_0x471470['UjPkT'](clearInterval,this[_0x7c70d1(0x138)]),this[_0x7c70d1(0x138)]=null,_0x471470['QsUZB'](_0x15a638,_0x471470[_0x7c70d1(0x122)])&&(this[_0x7c70d1(0xfa)]=![]));};['shouldProceed']=()=>{const _0x3ae80b=a118_0x17d302,_0x58849a={};_0x58849a[_0x3ae80b(0x10a)]=function(_0x350b3b,_0xed8957){return _0x350b3b>=_0xed8957;};const _0x10d501=_0x58849a;return _0x10d501['UZHRY'](this[_0x3ae80b(0x142)][_0x3ae80b(0x101)],BATCH_SIZE);};async[a118_0x17d302(0x107)](_0x311b68=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x56e93a=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0xb9606e=a118_0x17d302,_0x4cd3cf={'urhJG':function(_0x3aa772,_0xf2633){return _0x3aa772<=_0xf2633;},'reUPq':function(_0x58afc8,_0x1ed969){return _0x58afc8(_0x1ed969);},'MsUPi':function(_0x4b7986,_0x51edd7){return _0x4b7986-_0x51edd7;}};if(_0x4cd3cf['urhJG'](this[_0xb9606e(0x156)],0x0)||_0x4cd3cf[_0xb9606e(0x11d)](_0x311b68,0x0))return;return await _0x4cd3cf['reUPq'](sleep,_0x56e93a),this['uploadPending'](_0x4cd3cf[_0xb9606e(0x11f)](_0x311b68,_0x56e93a));}}module[a118_0x17d302(0x13f)]=RequestQueueHandler;