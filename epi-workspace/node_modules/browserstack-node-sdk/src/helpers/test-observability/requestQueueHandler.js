const a125_0x5c0bd0=a125_0x3e57;function a125_0x3e57(_0x79ce3d,_0x993456){const _0x4a5055=a125_0x4a50();return a125_0x3e57=function(_0x3e575d,_0x45f796){_0x3e575d=_0x3e575d-0x169;let _0x36e3f1=_0x4a5055[_0x3e575d];return _0x36e3f1;},a125_0x3e57(_0x79ce3d,_0x993456);}(function(_0x4c9398,_0x395471){const _0x4cca21=a125_0x3e57,_0x3acd3e=_0x4c9398();while(!![]){try{const _0x4296c7=parseInt(_0x4cca21(0x1aa))/0x1+parseInt(_0x4cca21(0x16e))/0x2*(-parseInt(_0x4cca21(0x1d6))/0x3)+parseInt(_0x4cca21(0x17d))/0x4*(parseInt(_0x4cca21(0x181))/0x5)+parseInt(_0x4cca21(0x18a))/0x6+-parseInt(_0x4cca21(0x1c3))/0x7+-parseInt(_0x4cca21(0x175))/0x8+parseInt(_0x4cca21(0x186))/0x9*(-parseInt(_0x4cca21(0x16f))/0xa);if(_0x4296c7===_0x395471)break;else _0x3acd3e['push'](_0x3acd3e['shift']());}catch(_0x690ca3){_0x3acd3e['push'](_0x3acd3e['shift']());}}}(a125_0x4a50,0x76368));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a125_0x5c0bd0(0x17b)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a125_0x5c0bd0(0x1b4)),{nestedKeyValue}=require(a125_0x5c0bd0(0x185)),util=require(a125_0x5c0bd0(0x19b)),constants=require(a125_0x5c0bd0(0x1a8));class RequestQueueHandler{static [a125_0x5c0bd0(0x1bb)];[a125_0x5c0bd0(0x1d5)]=0x0;constructor(){const _0x45b291=a125_0x5c0bd0,_0x2c0c28={};_0x2c0c28[_0x45b291(0x16d)]=_0x45b291(0x1da),_0x2c0c28[_0x45b291(0x1a4)]=_0x45b291(0x179),_0x2c0c28[_0x45b291(0x1ab)]=_0x45b291(0x1bf),_0x2c0c28[_0x45b291(0x173)]=_0x45b291(0x1b3),_0x2c0c28[_0x45b291(0x17f)]='LogCreated',_0x2c0c28[_0x45b291(0x1be)]=_0x45b291(0x16c),_0x2c0c28[_0x45b291(0x1b1)]='TestRunFinished',_0x2c0c28['XPVbG']='TestRunSkipped',_0x2c0c28[_0x45b291(0x1a6)]=_0x45b291(0x16a),_0x2c0c28[_0x45b291(0x182)]=_0x45b291(0x180),_0x2c0c28[_0x45b291(0x1a3)]=_0x45b291(0x1b9);const _0xabdab9=_0x2c0c28,_0x3b2606=_0xabdab9['CTEwG']['split']('|');let _0x435ad8=0x0;while(!![]){switch(_0x3b2606[_0x435ad8++]){case'0':this[_0x45b291(0x193)]=_0xabdab9[_0x45b291(0x1a4)];continue;case'1':this[_0x45b291(0x1cf)]=_0xabdab9[_0x45b291(0x1ab)];continue;case'2':this['uploadAttachmentUrl']=_0xabdab9[_0x45b291(0x173)];continue;case'3':this[_0x45b291(0x1d1)]=![];continue;case'4':this['BATCH_EVENT_TYPES']=[_0xabdab9['KYeSg'],_0xabdab9[_0x45b291(0x1be)],_0xabdab9[_0x45b291(0x1b1)],_0xabdab9['XPVbG'],_0xabdab9['MdaGR'],_0xabdab9[_0x45b291(0x182)],_0xabdab9[_0x45b291(0x1a3)]];continue;case'5':this[_0x45b291(0x17c)]=null;continue;case'6':this[_0x45b291(0x1ae)]=[];continue;}break;}}static['getInstance'](){const _0x143026=a125_0x5c0bd0;return!RequestQueueHandler[_0x143026(0x1bb)]&&(RequestQueueHandler['instance']=new RequestQueueHandler()),RequestQueueHandler[_0x143026(0x1bb)];}[a125_0x5c0bd0(0x169)]=()=>{const _0x677d=a125_0x5c0bd0;!this[_0x677d(0x1d1)]&&(this[_0x677d(0x1d1)]=!![],this['startEventBatchPolling']());};[a125_0x5c0bd0(0x191)]=_0x2321f6=>{const _0x1fa10a=a125_0x5c0bd0,_0x954eee={'zMHhy':function(_0x56b409,_0x21bafe){return _0x56b409===_0x21bafe;},'IQIpd':'TEST_SCREENSHOT','lAcaF':function(_0x536f32,_0x5e3c11){return _0x536f32>_0x5e3c11;},'aNdBM':function(_0x1a51c8,_0x49603d){return _0x1a51c8===_0x49603d;},'PjbTG':_0x1fa10a(0x171),'XDnMA':function(_0x172495,_0x595661){return _0x172495!==_0x595661;},'yirAq':'TestRunFinished','CPVJf':function(_0x4e32ec,_0x31213a){return _0x4e32ec(_0x31213a);},'SJQXQ':_0x1fa10a(0x1b0)};if(this[_0x1fa10a(0x189)][_0x1fa10a(0x199)](_0x2321f6['event_type'])){if(_0x2321f6[_0x1fa10a(0x1a7)]&&_0x2321f6[_0x1fa10a(0x1a7)][0x0]&&_0x954eee[_0x1fa10a(0x16b)](_0x2321f6[_0x1fa10a(0x1a7)][0x0][_0x1fa10a(0x1a0)],_0x954eee[_0x1fa10a(0x196)])){const _0x802eb6={};return _0x802eb6[_0x1fa10a(0x1bc)]=!![],_0x802eb6[_0x1fa10a(0x1c4)]=[_0x2321f6],_0x802eb6[_0x1fa10a(0x1c6)]=this[_0x1fa10a(0x1cf)],_0x802eb6;}if(_0x2321f6[_0x1fa10a(0x1a7)]&&_0x954eee[_0x1fa10a(0x1c1)](_0x2321f6[_0x1fa10a(0x1a7)][_0x1fa10a(0x198)],0x0)&&_0x954eee[_0x1fa10a(0x1a2)](_0x2321f6['logs'][0x0][_0x1fa10a(0x1a0)],_0x954eee['PjbTG'])&&_0x954eee['XDnMA'](_0x2321f6[_0x1fa10a(0x1ba)],_0x954eee[_0x1fa10a(0x1bd)])){const _0x54a13f={};return _0x54a13f[_0x1fa10a(0x1bc)]=!![],_0x54a13f[_0x1fa10a(0x1c4)]=[_0x2321f6],_0x54a13f[_0x1fa10a(0x1c6)]=this[_0x1fa10a(0x1ac)],_0x54a13f;}this[_0x1fa10a(0x1ae)][_0x1fa10a(0x18e)](_0x2321f6);let _0x55de93=null;const _0x3829a1=this[_0x1fa10a(0x1bc)]();_0x3829a1&&(_0x954eee[_0x1fa10a(0x1d3)](trace,_0x954eee[_0x1fa10a(0x197)]),_0x55de93=this[_0x1fa10a(0x1ae)]['slice'](0x0,BATCH_SIZE),this[_0x1fa10a(0x1ae)][_0x1fa10a(0x178)](0x0,BATCH_SIZE),this[_0x1fa10a(0x1cc)]());const _0x3f0a08={};return _0x3f0a08[_0x1fa10a(0x1bc)]=_0x3829a1,_0x3f0a08['proceedWithData']=_0x55de93,_0x3f0a08['proceedWithUrl']=this[_0x1fa10a(0x193)],_0x3f0a08;}const _0x377159={};return _0x377159[_0x1fa10a(0x1bc)]=!![],_0x377159;};[a125_0x5c0bd0(0x18f)]=async()=>{const _0x132b19=a125_0x5c0bd0,_0x35f961={'KgAMj':_0x132b19(0x176),'eyATZ':function(_0x1f2f6d,_0x3129c5){return _0x1f2f6d>_0x3129c5;},'MarKR':_0x132b19(0x1a1),'rfnHA':function(_0x49fa98,_0x11f434){return _0x49fa98(_0x11f434);}};await this[_0x132b19(0x183)](),this['removeEventBatchPolling'](_0x35f961[_0x132b19(0x1b6)]);while(_0x35f961[_0x132b19(0x1c5)](this[_0x132b19(0x1ae)][_0x132b19(0x198)],0x0)){const _0x254f44=this[_0x132b19(0x1ae)][_0x132b19(0x1c2)](0x0,BATCH_SIZE);this[_0x132b19(0x1ae)][_0x132b19(0x178)](0x0,BATCH_SIZE),await this[_0x132b19(0x1b5)](this['eventUrl'],_0x35f961['MarKR'],_0x254f44);}_0x35f961[_0x132b19(0x1c5)](this[_0x132b19(0x1d5)],0x0)&&_0x35f961['rfnHA'](debug,'Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20'+this['pendingUploads']);};['batchAndPostEvents']=async(_0x14816d,_0x486a4f,_0x52a161)=>{const _0x2af386=a125_0x5c0bd0,_0x462e94={'gTMxl':function(_0x1e2897,_0x4d08c8){return _0x1e2897(_0x4d08c8);},'hlsqb':_0x2af386(0x1ca),'sPuHk':function(_0x383b38){return _0x383b38();},'qEOdy':function(_0x245818,_0x4649d6,_0x3fbc48,_0x3870f9,_0x378d8b){return _0x245818(_0x4649d6,_0x3fbc48,_0x3870f9,_0x378d8b);},'KPlQy':_0x2af386(0x194),'HnkMX':function(_0x1de7d8,_0x13c6a5){return _0x1de7d8-_0x13c6a5;},'bYJBO':function(_0x5f2ab8,_0x1305da){return _0x5f2ab8(_0x1305da);},'YWJZB':function(_0x232919,_0x1d0070){return _0x232919-_0x1d0070;}};let _0x6c39de='';try{_0x6c39de=_0x52a161['map'](_0x35ddd0=>'\x27'+_0x35ddd0[_0x2af386(0x1ba)]+'\x27:'+(nestedKeyValue(_0x35ddd0,[_0x2af386(0x1af),_0x2af386(0x1c7)])||nestedKeyValue(_0x35ddd0,[_0x2af386(0x188),_0x2af386(0x1c7)])))[_0x2af386(0x192)](','),_0x462e94['gTMxl'](debug,'Processing\x20batch\x20events\x20for\x20'+_0x486a4f+_0x2af386(0x1d9)+Buffer[_0x2af386(0x1d7)](util[_0x2af386(0x170)]('%j',_0x52a161),_0x462e94[_0x2af386(0x184)])+'\x20bytes.\x20Events\x20are\x20'+_0x6c39de);}catch(_0x4d0292){_0x462e94[_0x2af386(0x190)](debug,'Exception\x20in\x20logging\x20batch\x20events\x20--\x20'+util['format'](_0x4d0292)+'}');}const _0x543e21={'headers':_0x462e94[_0x2af386(0x1c9)](getDefaultHeaders)};try{const _0x50cde4=await _0x462e94['qEOdy'](nodeRequest,_0x462e94[_0x2af386(0x187)],_0x14816d,_0x52a161,_0x543e21);if(_0x50cde4[_0x2af386(0x18b)][_0x2af386(0x1d0)]){const _0x50d24a={};_0x50d24a[_0x2af386(0x1c0)]=_0x50cde4[_0x2af386(0x18b)][_0x2af386(0x1d0)];throw _0x50d24a;}else _0x462e94[_0x2af386(0x190)](debug,_0x486a4f+_0x2af386(0x1d8)+_0x6c39de+_0x2af386(0x19a)+util[_0x2af386(0x170)]('%j',_0x50cde4['data'])),this[_0x2af386(0x1d5)]=Math[_0x2af386(0x1a5)](0x0,_0x462e94[_0x2af386(0x1ad)](this['pendingUploads'],_0x52a161['length']));}catch(_0x3bb1e4){_0x3bb1e4[_0x2af386(0x1a9)]?_0x462e94[_0x2af386(0x190)](debug,_0x2af386(0x177)+_0x486a4f+'\x20REQUEST\x20TO\x20'+constants[_0x2af386(0x1b7)]+'\x20:\x20'+_0x3bb1e4[_0x2af386(0x1a9)][_0x2af386(0x174)]+'\x20'+_0x3bb1e4['response'][_0x2af386(0x1b8)]+'\x20'+util[_0x2af386(0x170)]('%j',_0x3bb1e4[_0x2af386(0x1a9)])):_0x462e94['bYJBO'](debug,_0x2af386(0x177)+_0x486a4f+_0x2af386(0x19e)+constants[_0x2af386(0x1b7)]+_0x2af386(0x17a)+(_0x3bb1e4[_0x2af386(0x1c0)]||_0x3bb1e4)),this['pendingUploads']=Math[_0x2af386(0x1a5)](0x0,_0x462e94['YWJZB'](this['pendingUploads'],_0x52a161['length']));}};['startEventBatchPolling']=()=>{const _0x3ec844=a125_0x5c0bd0,_0x42dd9d={'QahOW':function(_0x51b3c8,_0x4cf1e8){return _0x51b3c8>_0x4cf1e8;},'iDyuh':function(_0x3a52dc,_0x4983e8){return _0x3a52dc(_0x4983e8);},'NBqyA':_0x3ec844(0x17e),'SDgav':function(_0x56bf16,_0x347cd2){return _0x56bf16(_0x347cd2);},'xRwYQ':function(_0x215ce3,_0x1c1929,_0x43d737){return _0x215ce3(_0x1c1929,_0x43d737);}};this[_0x3ec844(0x17c)]=_0x42dd9d[_0x3ec844(0x18d)](setInterval,async()=>{const _0x3cec08=_0x3ec844;if(_0x42dd9d[_0x3cec08(0x1ce)](this['queue']['length'],0x0)){_0x42dd9d['iDyuh'](trace,_0x3cec08(0x18c)+this[_0x3cec08(0x1ae)][_0x3cec08(0x198)]);const _0x411d57=this[_0x3cec08(0x1ae)][_0x3cec08(0x1c2)](0x0,BATCH_SIZE);this[_0x3cec08(0x1ae)][_0x3cec08(0x178)](0x0,BATCH_SIZE),await this[_0x3cec08(0x1b5)](this[_0x3cec08(0x193)],_0x42dd9d['NBqyA'],_0x411d57),_0x42dd9d[_0x3cec08(0x1b2)](trace,_0x3cec08(0x1c8)+this[_0x3cec08(0x1ae)][_0x3cec08(0x198)]);}},BATCH_INTERVAL);};[a125_0x5c0bd0(0x1cc)]=()=>{const _0xe07dbb=a125_0x5c0bd0,_0x223741={};_0x223741[_0xe07dbb(0x1db)]=_0xe07dbb(0x1d4);const _0x3b8239=_0x223741;this[_0xe07dbb(0x195)](_0x3b8239[_0xe07dbb(0x1db)]),this['startEventBatchPolling']();};[a125_0x5c0bd0(0x195)]=_0x586321=>{const _0x1164f1=a125_0x5c0bd0,_0x501213={'XMDip':function(_0x25044c,_0x37bd35){return _0x25044c(_0x37bd35);},'NRxSV':function(_0xb503f9,_0x27c627){return _0xb503f9===_0x27c627;},'hpGqR':_0x1164f1(0x176)};this[_0x1164f1(0x17c)]&&(_0x501213[_0x1164f1(0x19d)](clearInterval,this[_0x1164f1(0x17c)]),this[_0x1164f1(0x17c)]=null,_0x501213[_0x1164f1(0x19c)](_0x586321,_0x501213['hpGqR'])&&(this[_0x1164f1(0x1d1)]=![]));};['shouldProceed']=()=>{const _0x58d8c9=a125_0x5c0bd0,_0x30e95d={};_0x30e95d[_0x58d8c9(0x19f)]=function(_0x25980d,_0x5d2861){return _0x25980d>=_0x5d2861;};const _0x3d9874=_0x30e95d;return _0x3d9874[_0x58d8c9(0x19f)](this[_0x58d8c9(0x1ae)][_0x58d8c9(0x198)],BATCH_SIZE);};async[a125_0x5c0bd0(0x183)](_0x1772d5=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x1e72e4=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x2d1e72=a125_0x5c0bd0,_0x29bd56={'ENfnn':function(_0x2217b9,_0x1a1b18){return _0x2217b9<=_0x1a1b18;},'GxzEM':function(_0x4ddc11,_0x23efc3){return _0x4ddc11(_0x23efc3);},'OgzfY':function(_0x2feed2,_0x54b71c){return _0x2feed2-_0x54b71c;}};if(_0x29bd56[_0x2d1e72(0x172)](this[_0x2d1e72(0x1d5)],0x0)||_0x29bd56[_0x2d1e72(0x172)](_0x1772d5,0x0))return;return await _0x29bd56[_0x2d1e72(0x1d2)](sleep,_0x1e72e4),this[_0x2d1e72(0x183)](_0x29bd56[_0x2d1e72(0x1cd)](_0x1772d5,_0x1e72e4));}}module[a125_0x5c0bd0(0x1cb)]=RequestQueueHandler;function a125_0x4a50(){const _0x32e3b1=['screenshotEventUrl','error','started','GxzEM','CPVJf','RESETTING','pendingUploads','519ttECVA','byteLength','\x20event\x20successful\x20for\x20events\x20','.\x20Request\x20Size\x20-\x20','6|3|0|1|2|4|5','GkpYw','start','HookRunFinished','zMHhy','CBTSessionCreated','CTEwG','4366wGfLpl','30VPwaDz','format','TEST_ATTACHMENT','ENfnn','UyvMP','status','1158760hxLIRn','REMOVING','EXCEPTION\x20IN\x20','splice','api/v1/batch','\x20:\x20','./constants','pollEventBatchInterval','67556TmcxzV','Interval-Queue','KYeSg','TestRunStarted','285HvAfWU','HrxwG','uploadPending','hlsqb','../helper','73881fGuqyE','KPlQy','hook_run','BATCH_EVENT_TYPES','709860vCnIGr','data','Processing\x20events.\x20Queue\x20Length\x20-\x20','xRwYQ','push','shutdown','gTMxl','add','join','eventUrl','POST','removeEventBatchPolling','IQIpd','SJQXQ','length','includes','\x20--\x20','util','NRxSV','XMDip','\x20REQUEST\x20TO\x20','VspZj','kind','Shutdown-Queue','aNdBM','KahNu','RsWjs','max','MdaGR','logs','../../bin/utils/constants','response','757186rqhgBf','kbUbY','uploadAttachmentUrl','HnkMX','queue','test_run','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','HbSDT','SDgav','upload-attachments','./utils','batchAndPostEvents','KgAMj','TEST_REPORTING_ANALYTICS','statusText','HookRunStarted','event_type','instance','shouldProceed','yirAq','WqJhQ','api/v1/screenshots','message','lAcaF','slice','5647866QJFxLD','proceedWithData','eyATZ','proceedWithUrl','uuid','Remaining\x20Queue\x20Length\x20-\x20','sPuHk','utf8','exports','resetEventBatchPolling','OgzfY','QahOW'];a125_0x4a50=function(){return _0x32e3b1;};return a125_0x4a50();}