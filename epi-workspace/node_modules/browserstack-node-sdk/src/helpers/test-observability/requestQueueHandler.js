const a124_0x2a96f2=a124_0x5cdf;function a124_0x5cdf(_0x1f22eb,_0x2c3eb1){const _0xd8d972=a124_0xd8d9();return a124_0x5cdf=function(_0x5cdffd,_0x5e561a){_0x5cdffd=_0x5cdffd-0x14a;let _0x3e6acf=_0xd8d972[_0x5cdffd];return _0x3e6acf;},a124_0x5cdf(_0x1f22eb,_0x2c3eb1);}function a124_0xd8d9(){const _0x43e06e=['logs','message','uploadPending','Interval-Queue','tpCJA','response','removeEventBatchPolling','proceedWithData','exports','ObiIx','BXeiw','zGSGR','started','ejopr','\x20bytes.\x20Events\x20are\x20','add','max','length','ojNrr','132380LadyXa','kLXmt','pendingUploads','\x20--\x20','lbqpX','error','splice','instance','IfabK','yVtaK','event_type','thtFk','JGuvP','ZvRvF','TEST_ATTACHMENT','hPqId','sdbWG','XYvyE','12GuKhBz','UuziZ','EXCEPTION\x20IN\x20','proceedWithUrl','CBTSessionCreated','POST','kind','queue','./constants','statusText','1467444LmItzv','vQFpM','dKOMk','TEST_SCREENSHOT','TestRunFinished','nNmCo','MWXoG','includes','\x20:\x20','TestRunSkipped','6103404vvCMhT','../helper','uuid','NFPfA','Processing\x20batch\x20events\x20for\x20','\x20REQUEST\x20TO\x20','join','data','11678240rGkFvG','HkrET','util','8kqBkuT','api/v1/batch','../../bin/utils/constants','udSij','4891215ZICHpj','slice','ILDVx','czpal','LogCreated','format','gaDqt','uploadAttachmentUrl','uhdgm','api/v1/screenshots','start','shouldProceed','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','batchAndPostEvents','utf8','.\x20Request\x20Size\x20-\x20','TEST_REPORTING_ANALYTICS','BATCH_EVENT_TYPES','17530ergJOT','EjINg','screenshotEventUrl','CGTHo','FfjQK','REMOVING','MMOPq','WFVWZ','pollEventBatchInterval','30fLvKyD','shutdown','VcSqH','sSRWt','startEventBatchPolling','hqtxU','Shutdown-Queue','yvWEg','getInstance','eventUrl','resetEventBatchPolling','test_run','2046dbIbWW','split'];a124_0xd8d9=function(){return _0x43e06e;};return a124_0xd8d9();}(function(_0x20c0ec,_0x5db976){const _0x44a163=a124_0x5cdf,_0x5eeb67=_0x20c0ec();while(!![]){try{const _0x3b0d65=parseInt(_0x44a163(0x1aa))/0x1*(-parseInt(_0x44a163(0x1a1))/0x2)+-parseInt(_0x44a163(0x176))/0x3+parseInt(_0x44a163(0x16c))/0x4*(-parseInt(_0x44a163(0x15a))/0x5)+-parseInt(_0x44a163(0x1b6))/0x6+-parseInt(_0x44a163(0x18f))/0x7*(-parseInt(_0x44a163(0x18b))/0x8)+-parseInt(_0x44a163(0x180))/0x9+parseInt(_0x44a163(0x188))/0xa;if(_0x3b0d65===_0x5db976)break;else _0x5eeb67['push'](_0x5eeb67['shift']());}catch(_0x1d7e8c){_0x5eeb67['push'](_0x5eeb67['shift']());}}}(a124_0xd8d9,0x570c2));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a124_0x2a96f2(0x174)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require('./utils'),{nestedKeyValue}=require(a124_0x2a96f2(0x181)),util=require(a124_0x2a96f2(0x18a)),constants=require(a124_0x2a96f2(0x18d));class RequestQueueHandler{static [a124_0x2a96f2(0x161)];['pendingUploads']=0x0;constructor(){const _0x380074=a124_0x2a96f2,_0x28c39b={};_0x28c39b[_0x380074(0x177)]='4|5|3|2|1|0|6',_0x28c39b[_0x380074(0x15b)]=_0x380074(0x193),_0x28c39b[_0x380074(0x1af)]=_0x380074(0x170),_0x28c39b['XNmQb']=_0x380074(0x17a),_0x28c39b['EjINg']=_0x380074(0x17f),_0x28c39b[_0x380074(0x1ad)]='HookRunFinished',_0x28c39b[_0x380074(0x169)]='TestRunStarted',_0x28c39b['tEnfQ']='HookRunStarted',_0x28c39b[_0x380074(0x162)]='upload-attachments',_0x28c39b[_0x380074(0x166)]=_0x380074(0x198),_0x28c39b[_0x380074(0x151)]=_0x380074(0x18c);const _0x39dc55=_0x28c39b,_0x2a8b1d=_0x39dc55[_0x380074(0x177)][_0x380074(0x1b7)]('|');let _0x48f004=0x0;while(!![]){switch(_0x2a8b1d[_0x48f004++]){case'0':this[_0x380074(0x1a0)]=[_0x39dc55[_0x380074(0x15b)],_0x39dc55[_0x380074(0x1af)],_0x39dc55['XNmQb'],_0x39dc55[_0x380074(0x1a2)],_0x39dc55[_0x380074(0x1ad)],_0x39dc55['hPqId'],_0x39dc55['tEnfQ']];continue;case'1':this[_0x380074(0x196)]=_0x39dc55[_0x380074(0x162)];continue;case'2':this[_0x380074(0x1a3)]=_0x39dc55[_0x380074(0x166)];continue;case'3':this[_0x380074(0x1b3)]=_0x39dc55[_0x380074(0x151)];continue;case'4':this[_0x380074(0x173)]=[];continue;case'5':this[_0x380074(0x153)]=![];continue;case'6':this[_0x380074(0x1a9)]=null;continue;}break;}}static[a124_0x2a96f2(0x1b2)](){const _0x481f3c=a124_0x2a96f2;return!RequestQueueHandler[_0x481f3c(0x161)]&&(RequestQueueHandler[_0x481f3c(0x161)]=new RequestQueueHandler()),RequestQueueHandler[_0x481f3c(0x161)];}[a124_0x2a96f2(0x199)]=()=>{const _0x249d97=a124_0x2a96f2;!this[_0x249d97(0x153)]&&(this[_0x249d97(0x153)]=!![],this['startEventBatchPolling']());};[a124_0x2a96f2(0x156)]=_0x2115e0=>{const _0x1b685c=a124_0x2a96f2,_0x6d94fd={'XYvyE':function(_0x53d7e0,_0x4d9691){return _0x53d7e0===_0x4d9691;},'SuSdC':_0x1b685c(0x179),'AEssI':function(_0x276781,_0x3a6df8){return _0x276781>_0x3a6df8;},'czpal':function(_0x523bfb,_0xf7c522){return _0x523bfb===_0xf7c522;},'CGTHo':_0x1b685c(0x168),'zGSGR':function(_0x333af6,_0x9b692b){return _0x333af6!==_0x9b692b;},'sdbWG':'TestRunFinished','ojNrr':function(_0x5927ce,_0x1cb310){return _0x5927ce(_0x1cb310);},'rgZWF':'Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..'};if(this[_0x1b685c(0x1a0)][_0x1b685c(0x17d)](_0x2115e0[_0x1b685c(0x164)])){if(_0x2115e0[_0x1b685c(0x1b8)]&&_0x2115e0[_0x1b685c(0x1b8)][0x0]&&_0x6d94fd[_0x1b685c(0x16b)](_0x2115e0['logs'][0x0]['kind'],_0x6d94fd['SuSdC'])){const _0xd5ed5a={};return _0xd5ed5a[_0x1b685c(0x19a)]=!![],_0xd5ed5a[_0x1b685c(0x14e)]=[_0x2115e0],_0xd5ed5a[_0x1b685c(0x16f)]=this[_0x1b685c(0x1a3)],_0xd5ed5a;}if(_0x2115e0[_0x1b685c(0x1b8)]&&_0x6d94fd['AEssI'](_0x2115e0[_0x1b685c(0x1b8)]['length'],0x0)&&_0x6d94fd[_0x1b685c(0x192)](_0x2115e0[_0x1b685c(0x1b8)][0x0][_0x1b685c(0x172)],_0x6d94fd[_0x1b685c(0x1a4)])&&_0x6d94fd[_0x1b685c(0x152)](_0x2115e0['event_type'],_0x6d94fd[_0x1b685c(0x16a)])){const _0x5b32cf={};return _0x5b32cf[_0x1b685c(0x19a)]=!![],_0x5b32cf[_0x1b685c(0x14e)]=[_0x2115e0],_0x5b32cf[_0x1b685c(0x16f)]=this[_0x1b685c(0x196)],_0x5b32cf;}this['queue']['push'](_0x2115e0);let _0x402c7f=null;const _0x5cfafd=this[_0x1b685c(0x19a)]();_0x5cfafd&&(_0x6d94fd[_0x1b685c(0x159)](trace,_0x6d94fd['rgZWF']),_0x402c7f=this[_0x1b685c(0x173)][_0x1b685c(0x190)](0x0,BATCH_SIZE),this[_0x1b685c(0x173)][_0x1b685c(0x160)](0x0,BATCH_SIZE),this[_0x1b685c(0x1b4)]());const _0x4ec52a={};return _0x4ec52a['shouldProceed']=_0x5cfafd,_0x4ec52a['proceedWithData']=_0x402c7f,_0x4ec52a[_0x1b685c(0x16f)]=this[_0x1b685c(0x1b3)],_0x4ec52a;}const _0x39927a={};return _0x39927a[_0x1b685c(0x19a)]=!![],_0x39927a;};[a124_0x2a96f2(0x1ab)]=async()=>{const _0x1da144=a124_0x2a96f2,_0x27e3ce={'MWXoG':_0x1da144(0x1a6),'VcSqH':function(_0x11e066,_0x20943d){return _0x11e066>_0x20943d;},'WFVWZ':_0x1da144(0x1b0),'nNmCo':function(_0x1e5e82,_0x282d9c){return _0x1e5e82(_0x282d9c);}};await this[_0x1da144(0x1ba)](),this[_0x1da144(0x14d)](_0x27e3ce[_0x1da144(0x17c)]);while(_0x27e3ce[_0x1da144(0x1ac)](this[_0x1da144(0x173)][_0x1da144(0x158)],0x0)){const _0x334365=this[_0x1da144(0x173)][_0x1da144(0x190)](0x0,BATCH_SIZE);this[_0x1da144(0x173)][_0x1da144(0x160)](0x0,BATCH_SIZE),await this[_0x1da144(0x19c)](this['eventUrl'],_0x27e3ce[_0x1da144(0x1a8)],_0x334365);}_0x27e3ce[_0x1da144(0x1ac)](this[_0x1da144(0x15c)],0x0)&&_0x27e3ce[_0x1da144(0x17b)](debug,_0x1da144(0x19b)+this['pendingUploads']);};[a124_0x2a96f2(0x19c)]=async(_0x3557b7,_0x49d8de,_0x475a7a)=>{const _0x169fb5=a124_0x2a96f2,_0x1821bd={'ILDVx':function(_0x2e747d,_0x3a013d){return _0x2e747d(_0x3a013d);},'dKOMk':_0x169fb5(0x19d),'HkrET':function(_0x2c99e6,_0x5509a7){return _0x2c99e6(_0x5509a7);},'FfjQK':function(_0x2f4f43){return _0x2f4f43();},'yVtaK':function(_0x20ef5b,_0x5f1488,_0x1479f5,_0x5e5827,_0x415867){return _0x20ef5b(_0x5f1488,_0x1479f5,_0x5e5827,_0x415867);},'tpCJA':_0x169fb5(0x171),'MMOPq':function(_0x40f55f,_0x3fa9ad){return _0x40f55f-_0x3fa9ad;},'uhdgm':function(_0x19cabf,_0x430d0d){return _0x19cabf(_0x430d0d);}};let _0xc096c='';try{_0xc096c=_0x475a7a['map'](_0x1f7f50=>'\x27'+_0x1f7f50[_0x169fb5(0x164)]+'\x27:'+(nestedKeyValue(_0x1f7f50,[_0x169fb5(0x1b5),_0x169fb5(0x182)])||nestedKeyValue(_0x1f7f50,['hook_run',_0x169fb5(0x182)])))[_0x169fb5(0x186)](','),_0x1821bd[_0x169fb5(0x191)](debug,_0x169fb5(0x184)+_0x49d8de+_0x169fb5(0x19e)+Buffer['byteLength'](util[_0x169fb5(0x194)]('%j',_0x475a7a),_0x1821bd[_0x169fb5(0x178)])+_0x169fb5(0x155)+_0xc096c);}catch(_0x368e18){_0x1821bd[_0x169fb5(0x189)](debug,'Exception\x20in\x20logging\x20batch\x20events\x20--\x20'+util[_0x169fb5(0x194)](_0x368e18)+'}');}const _0x2ca7aa={'headers':_0x1821bd[_0x169fb5(0x1a5)](getDefaultHeaders)};try{const _0x6efff8=await _0x1821bd[_0x169fb5(0x163)](nodeRequest,_0x1821bd[_0x169fb5(0x14b)],_0x3557b7,_0x475a7a,_0x2ca7aa);if(_0x6efff8[_0x169fb5(0x187)][_0x169fb5(0x15f)]){const _0x315bd9={};_0x315bd9['message']=_0x6efff8['data'][_0x169fb5(0x15f)];throw _0x315bd9;}else _0x1821bd[_0x169fb5(0x191)](debug,_0x49d8de+'\x20event\x20successful\x20for\x20events\x20'+_0xc096c+_0x169fb5(0x15d)+util[_0x169fb5(0x194)]('%j',_0x6efff8[_0x169fb5(0x187)])),this[_0x169fb5(0x15c)]=Math[_0x169fb5(0x157)](0x0,_0x1821bd['MMOPq'](this[_0x169fb5(0x15c)],_0x475a7a[_0x169fb5(0x158)]));}catch(_0x4c0fbd){_0x4c0fbd['response']?_0x1821bd[_0x169fb5(0x197)](debug,'EXCEPTION\x20IN\x20'+_0x49d8de+'\x20REQUEST\x20TO\x20'+constants['TEST_REPORTING_ANALYTICS']+_0x169fb5(0x17e)+_0x4c0fbd[_0x169fb5(0x14c)]['status']+'\x20'+_0x4c0fbd[_0x169fb5(0x14c)][_0x169fb5(0x175)]+'\x20'+util[_0x169fb5(0x194)]('%j',_0x4c0fbd[_0x169fb5(0x14c)])):_0x1821bd['HkrET'](debug,_0x169fb5(0x16e)+_0x49d8de+_0x169fb5(0x185)+constants[_0x169fb5(0x19f)]+_0x169fb5(0x17e)+(_0x4c0fbd[_0x169fb5(0x1b9)]||_0x4c0fbd)),this['pendingUploads']=Math[_0x169fb5(0x157)](0x0,_0x1821bd[_0x169fb5(0x1a7)](this[_0x169fb5(0x15c)],_0x475a7a[_0x169fb5(0x158)]));}};[a124_0x2a96f2(0x1ae)]=()=>{const _0x5b5fe7=a124_0x2a96f2,_0x1b102d={'ObiIx':function(_0xe678ca,_0x4b62c0){return _0xe678ca>_0x4b62c0;},'ejopr':function(_0x10931b,_0x25d850){return _0x10931b(_0x25d850);},'PvlwR':_0x5b5fe7(0x14a),'SewRR':function(_0x1a262e,_0x20e057){return _0x1a262e(_0x20e057);},'ndFLa':function(_0x14916e,_0x1c6b53,_0x426cd2){return _0x14916e(_0x1c6b53,_0x426cd2);}};this['pollEventBatchInterval']=_0x1b102d['ndFLa'](setInterval,async()=>{const _0x5ddaf7=_0x5b5fe7;if(_0x1b102d[_0x5ddaf7(0x150)](this[_0x5ddaf7(0x173)][_0x5ddaf7(0x158)],0x0)){_0x1b102d[_0x5ddaf7(0x154)](trace,'Processing\x20events.\x20Queue\x20Length\x20-\x20'+this['queue'][_0x5ddaf7(0x158)]);const _0x4bdd3c=this['queue'][_0x5ddaf7(0x190)](0x0,BATCH_SIZE);this['queue'][_0x5ddaf7(0x160)](0x0,BATCH_SIZE),await this[_0x5ddaf7(0x19c)](this[_0x5ddaf7(0x1b3)],_0x1b102d['PvlwR'],_0x4bdd3c),_0x1b102d['SewRR'](trace,'Remaining\x20Queue\x20Length\x20-\x20'+this[_0x5ddaf7(0x173)][_0x5ddaf7(0x158)]);}},BATCH_INTERVAL);};['resetEventBatchPolling']=()=>{const _0x4d7811=a124_0x2a96f2,_0x4bcfb9={};_0x4bcfb9['UuziZ']='RESETTING';const _0x5fdf46=_0x4bcfb9;this[_0x4d7811(0x14d)](_0x5fdf46[_0x4d7811(0x16d)]),this[_0x4d7811(0x1ae)]();};[a124_0x2a96f2(0x14d)]=_0x479d80=>{const _0x4536ef=a124_0x2a96f2,_0x412cf9={'lbqpX':function(_0x3dd753,_0x2b2b66){return _0x3dd753(_0x2b2b66);},'udSij':function(_0x2d1350,_0x2ff418){return _0x2d1350===_0x2ff418;},'gaDqt':_0x4536ef(0x1a6)};this[_0x4536ef(0x1a9)]&&(_0x412cf9[_0x4536ef(0x15e)](clearInterval,this[_0x4536ef(0x1a9)]),this[_0x4536ef(0x1a9)]=null,_0x412cf9[_0x4536ef(0x18e)](_0x479d80,_0x412cf9[_0x4536ef(0x195)])&&(this[_0x4536ef(0x153)]=![]));};[a124_0x2a96f2(0x19a)]=()=>{const _0x36cda2=a124_0x2a96f2,_0xc020d9={};_0xc020d9['thtFk']=function(_0x4e5963,_0x464197){return _0x4e5963>=_0x464197;};const _0x546d88=_0xc020d9;return _0x546d88[_0x36cda2(0x165)](this[_0x36cda2(0x173)][_0x36cda2(0x158)],BATCH_SIZE);};async[a124_0x2a96f2(0x1ba)](_0x83d097=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x224911=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x1234c6=a124_0x2a96f2,_0x2b9093={'yvWEg':function(_0x2482ca,_0x2adce1){return _0x2482ca<=_0x2adce1;},'ZvRvF':function(_0x9e2563,_0xe7bcb4){return _0x9e2563(_0xe7bcb4);},'NFPfA':function(_0x3571e3,_0x50009c){return _0x3571e3-_0x50009c;}};if(_0x2b9093[_0x1234c6(0x1b1)](this[_0x1234c6(0x15c)],0x0)||_0x2b9093['yvWEg'](_0x83d097,0x0))return;return await _0x2b9093[_0x1234c6(0x167)](sleep,_0x224911),this[_0x1234c6(0x1ba)](_0x2b9093[_0x1234c6(0x183)](_0x83d097,_0x224911));}}module[a124_0x2a96f2(0x14f)]=RequestQueueHandler;