const a115_0x4d49d4=a115_0x2ef5;(function(_0x232b35,_0x5b5ab7){const _0x47c049=a115_0x2ef5,_0x51dd89=_0x232b35();while(!![]){try{const _0x48f734=-parseInt(_0x47c049(0x12c))/0x1+-parseInt(_0x47c049(0x171))/0x2+parseInt(_0x47c049(0x16b))/0x3+parseInt(_0x47c049(0x15c))/0x4+-parseInt(_0x47c049(0x195))/0x5+-parseInt(_0x47c049(0x163))/0x6*(-parseInt(_0x47c049(0x177))/0x7)+-parseInt(_0x47c049(0x17b))/0x8;if(_0x48f734===_0x5b5ab7)break;else _0x51dd89['push'](_0x51dd89['shift']());}catch(_0x532082){_0x51dd89['push'](_0x51dd89['shift']());}}}(a115_0x3dc7,0x4fcf7));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a115_0x4d49d4(0x18d)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a115_0x4d49d4(0x170)),{nestedKeyValue}=require('../helper'),util=require(a115_0x4d49d4(0x138));class RequestQueueHandler{static [a115_0x4d49d4(0x176)];[a115_0x4d49d4(0x194)]=0x0;constructor(){const _0xa7419a=a115_0x4d49d4,_0x23e175={};_0x23e175[_0xa7419a(0x173)]=_0xa7419a(0x143),_0x23e175['RzbrK']=_0xa7419a(0x153),_0x23e175['cIYMJ']='CBTSessionCreated',_0x23e175[_0xa7419a(0x18f)]=_0xa7419a(0x189),_0x23e175['wsXMS']='TestRunSkipped',_0x23e175[_0xa7419a(0x161)]=_0xa7419a(0x14d),_0x23e175[_0xa7419a(0x12e)]='TestRunStarted',_0x23e175[_0xa7419a(0x179)]='HookRunStarted',_0x23e175[_0xa7419a(0x159)]=_0xa7419a(0x17e),_0x23e175[_0xa7419a(0x183)]=_0xa7419a(0x15b),_0x23e175[_0xa7419a(0x150)]=_0xa7419a(0x14c);const _0x9e72a8=_0x23e175,_0x14a985=_0x9e72a8['Byuma'][_0xa7419a(0x166)]('|');let _0x559164=0x0;while(!![]){switch(_0x14a985[_0x559164++]){case'0':this[_0xa7419a(0x16e)]=![];continue;case'1':this['BATCH_EVENT_TYPES']=[_0x9e72a8[_0xa7419a(0x148)],_0x9e72a8[_0xa7419a(0x169)],_0x9e72a8[_0xa7419a(0x18f)],_0x9e72a8[_0xa7419a(0x187)],_0x9e72a8[_0xa7419a(0x161)],_0x9e72a8[_0xa7419a(0x12e)],_0x9e72a8[_0xa7419a(0x179)]];continue;case'2':this[_0xa7419a(0x158)]=_0x9e72a8['mfWXd'];continue;case'3':this[_0xa7419a(0x13a)]=null;continue;case'4':this['eventUrl']=_0x9e72a8[_0xa7419a(0x183)];continue;case'5':this[_0xa7419a(0x17a)]=_0x9e72a8[_0xa7419a(0x150)];continue;case'6':this[_0xa7419a(0x188)]=[];continue;}break;}}static[a115_0x4d49d4(0x142)](){const _0x6af093=a115_0x4d49d4;return!RequestQueueHandler[_0x6af093(0x176)]&&(RequestQueueHandler[_0x6af093(0x176)]=new RequestQueueHandler()),RequestQueueHandler[_0x6af093(0x176)];}[a115_0x4d49d4(0x174)]=()=>{const _0xea9a58=a115_0x4d49d4;!this[_0xea9a58(0x16e)]&&(this[_0xea9a58(0x16e)]=!![],this[_0xea9a58(0x12f)]());};[a115_0x4d49d4(0x145)]=_0x156e7b=>{const _0x588fbc=a115_0x4d49d4,_0x187ae1={'Nnggg':function(_0x395eb0,_0x22794c){return _0x395eb0===_0x22794c;},'vDGMV':_0x588fbc(0x155),'ggEdF':function(_0x27cf0f,_0x167c82){return _0x27cf0f>_0x167c82;},'QMmUt':_0x588fbc(0x151),'XiwnH':function(_0x108eab,_0x4fc566){return _0x108eab!==_0x4fc566;},'nWqIh':_0x588fbc(0x189),'qeYwU':function(_0x613c8c,_0xed758c){return _0x613c8c(_0xed758c);},'dRLAb':'Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..'};if(this[_0x588fbc(0x137)][_0x588fbc(0x192)](_0x156e7b['event_type'])){if(_0x156e7b[_0x588fbc(0x128)]&&_0x156e7b[_0x588fbc(0x128)][0x0]&&_0x187ae1[_0x588fbc(0x15a)](_0x156e7b[_0x588fbc(0x128)][0x0][_0x588fbc(0x186)],_0x187ae1[_0x588fbc(0x12a)])){const _0x5f28d7={};return _0x5f28d7[_0x588fbc(0x160)]=!![],_0x5f28d7['proceedWithData']=[_0x156e7b],_0x5f28d7[_0x588fbc(0x181)]=this[_0x588fbc(0x158)],_0x5f28d7;}if(_0x156e7b[_0x588fbc(0x128)]&&_0x187ae1['ggEdF'](_0x156e7b[_0x588fbc(0x128)]['length'],0x0)&&_0x187ae1[_0x588fbc(0x15a)](_0x156e7b[_0x588fbc(0x128)][0x0]['kind'],_0x187ae1[_0x588fbc(0x162)])&&_0x187ae1[_0x588fbc(0x16f)](_0x156e7b[_0x588fbc(0x16c)],_0x187ae1[_0x588fbc(0x129)])){const _0x3f5eeb={};return _0x3f5eeb[_0x588fbc(0x160)]=!![],_0x3f5eeb[_0x588fbc(0x196)]=[_0x156e7b],_0x3f5eeb[_0x588fbc(0x181)]=this[_0x588fbc(0x17a)],_0x3f5eeb;}this[_0x588fbc(0x188)][_0x588fbc(0x13e)](_0x156e7b);let _0x34121c=null;const _0x39eb93=this[_0x588fbc(0x160)]();_0x39eb93&&(_0x187ae1[_0x588fbc(0x168)](trace,_0x187ae1['dRLAb']),_0x34121c=this['queue'][_0x588fbc(0x185)](0x0,BATCH_SIZE),this[_0x588fbc(0x188)][_0x588fbc(0x13f)](0x0,BATCH_SIZE),this[_0x588fbc(0x182)]());const _0x6377dd={};return _0x6377dd[_0x588fbc(0x160)]=_0x39eb93,_0x6377dd[_0x588fbc(0x196)]=_0x34121c,_0x6377dd[_0x588fbc(0x181)]=this[_0x588fbc(0x14a)],_0x6377dd;}const _0x55a88b={};return _0x55a88b['shouldProceed']=!![],_0x55a88b;};[a115_0x4d49d4(0x180)]=async()=>{const _0x404845=a115_0x4d49d4,_0x434ef9={'KsMrD':_0x404845(0x154),'QBXmm':function(_0x7f7aec,_0x5065d9){return _0x7f7aec>_0x5065d9;},'EBqnU':_0x404845(0x17d),'Slsmr':function(_0x566dbc,_0x202d71){return _0x566dbc>_0x202d71;},'CBvlL':function(_0x15594f,_0x3bb2f3){return _0x15594f(_0x3bb2f3);}};await this['uploadPending'](),this['removeEventBatchPolling'](_0x434ef9[_0x404845(0x17f)]);while(_0x434ef9['QBXmm'](this['queue'][_0x404845(0x15d)],0x0)){const _0x46a42d=this[_0x404845(0x188)][_0x404845(0x185)](0x0,BATCH_SIZE);this[_0x404845(0x188)]['splice'](0x0,BATCH_SIZE),await this[_0x404845(0x132)](this[_0x404845(0x14a)],_0x434ef9['EBqnU'],_0x46a42d);}_0x434ef9[_0x404845(0x144)](this[_0x404845(0x194)],0x0)&&_0x434ef9['CBvlL'](debug,_0x404845(0x15e)+this[_0x404845(0x194)]);};['batchAndPostEvents']=async(_0x3e0f7e,_0x2bf394,_0x4521e6)=>{const _0x1eadaa=a115_0x4d49d4,_0x1afee7={'VhGkI':function(_0x5c823e,_0x52a649){return _0x5c823e(_0x52a649);},'RFbEI':_0x1eadaa(0x156),'ULiHa':function(_0x4c94c2,_0x107efb){return _0x4c94c2(_0x107efb);},'uIbZM':function(_0x92253e){return _0x92253e();},'ofntd':function(_0x572914,_0x5b6e5b,_0x458d0e,_0x4fd931,_0x151490){return _0x572914(_0x5b6e5b,_0x458d0e,_0x4fd931,_0x151490);},'Ausws':_0x1eadaa(0x139),'vhxbW':function(_0x3ba3e7,_0x38569c){return _0x3ba3e7(_0x38569c);},'kovFF':function(_0x11d827,_0x45a8af){return _0x11d827-_0x45a8af;}};let _0x2def7d='';try{_0x2def7d=_0x4521e6[_0x1eadaa(0x134)](_0x40ada0=>'\x27'+_0x40ada0[_0x1eadaa(0x16c)]+'\x27:'+(nestedKeyValue(_0x40ada0,[_0x1eadaa(0x131),_0x1eadaa(0x175)])||nestedKeyValue(_0x40ada0,[_0x1eadaa(0x16a),_0x1eadaa(0x175)])))[_0x1eadaa(0x16d)](','),_0x1afee7['VhGkI'](debug,_0x1eadaa(0x191)+_0x2bf394+'.\x20Request\x20Size\x20-\x20'+Buffer[_0x1eadaa(0x133)](util[_0x1eadaa(0x15f)]('%j',_0x4521e6),_0x1afee7[_0x1eadaa(0x165)])+'\x20bytes.\x20Events\x20are\x20'+_0x2def7d);}catch(_0x3cf2d3){_0x1afee7['ULiHa'](debug,'Exception\x20in\x20logging\x20batch\x20events\x20--\x20'+util[_0x1eadaa(0x15f)](_0x3cf2d3)+'}');}const _0x33c9c2={'headers':_0x1afee7['uIbZM'](getDefaultHeaders)};try{const _0x186378=await _0x1afee7[_0x1eadaa(0x172)](nodeRequest,_0x1afee7[_0x1eadaa(0x135)],_0x3e0f7e,_0x4521e6,_0x33c9c2);if(_0x186378[_0x1eadaa(0x199)][_0x1eadaa(0x140)]){const _0x48738a={};_0x48738a[_0x1eadaa(0x198)]=_0x186378[_0x1eadaa(0x199)][_0x1eadaa(0x140)];throw _0x48738a;}else _0x1afee7[_0x1eadaa(0x13b)](debug,_0x2bf394+_0x1eadaa(0x197)+_0x2def7d+'\x20--\x20'+util[_0x1eadaa(0x15f)]('%j',_0x186378[_0x1eadaa(0x199)])),this['pendingUploads']=Math[_0x1eadaa(0x12b)](0x0,_0x1afee7['kovFF'](this[_0x1eadaa(0x194)],_0x4521e6[_0x1eadaa(0x15d)]));}catch(_0xfcc052){_0xfcc052[_0x1eadaa(0x127)]?_0x1afee7[_0x1eadaa(0x14b)](debug,_0x1eadaa(0x14e)+_0x2bf394+_0x1eadaa(0x193)+_0xfcc052[_0x1eadaa(0x127)][_0x1eadaa(0x130)]+'\x20'+_0xfcc052[_0x1eadaa(0x127)][_0x1eadaa(0x12d)]+'\x20'+util['format']('%j',_0xfcc052[_0x1eadaa(0x127)])):_0x1afee7['VhGkI'](debug,_0x1eadaa(0x14e)+_0x2bf394+_0x1eadaa(0x193)+(_0xfcc052[_0x1eadaa(0x198)]||_0xfcc052)),this[_0x1eadaa(0x194)]=Math[_0x1eadaa(0x12b)](0x0,_0x1afee7[_0x1eadaa(0x18b)](this[_0x1eadaa(0x194)],_0x4521e6[_0x1eadaa(0x15d)]));}};[a115_0x4d49d4(0x12f)]=()=>{const _0x5a409c=a115_0x4d49d4,_0x112434={'vieFZ':function(_0x4cf99b,_0x576f8e){return _0x4cf99b>_0x576f8e;},'KAvSO':function(_0x4edc84,_0x21290a){return _0x4edc84(_0x21290a);},'LoHbH':_0x5a409c(0x147),'IaYGr':function(_0x48db3e,_0x469b85){return _0x48db3e(_0x469b85);},'IXxRk':function(_0x513e0f,_0x90d35c,_0x301ebd){return _0x513e0f(_0x90d35c,_0x301ebd);}};this[_0x5a409c(0x13a)]=_0x112434[_0x5a409c(0x141)](setInterval,async()=>{const _0x503dcd=_0x5a409c;if(_0x112434[_0x503dcd(0x17c)](this[_0x503dcd(0x188)][_0x503dcd(0x15d)],0x0)){_0x112434[_0x503dcd(0x18e)](trace,_0x503dcd(0x146)+this[_0x503dcd(0x188)][_0x503dcd(0x15d)]);const _0x7f0b1c=this['queue']['slice'](0x0,BATCH_SIZE);this[_0x503dcd(0x188)]['splice'](0x0,BATCH_SIZE),await this[_0x503dcd(0x132)](this[_0x503dcd(0x14a)],_0x112434[_0x503dcd(0x18c)],_0x7f0b1c),_0x112434[_0x503dcd(0x190)](trace,_0x503dcd(0x14f)+this['queue'][_0x503dcd(0x15d)]);}},BATCH_INTERVAL);};[a115_0x4d49d4(0x182)]=()=>{const _0x3a2752=a115_0x4d49d4,_0x23b1f1={};_0x23b1f1[_0x3a2752(0x13d)]=_0x3a2752(0x152);const _0x1d7819=_0x23b1f1;this[_0x3a2752(0x18a)](_0x1d7819[_0x3a2752(0x13d)]),this[_0x3a2752(0x12f)]();};[a115_0x4d49d4(0x18a)]=_0xeedcfa=>{const _0x436744=a115_0x4d49d4,_0x28c0d6={'xPZwn':function(_0x2d6ba8,_0x1962fa){return _0x2d6ba8(_0x1962fa);},'rrNbA':function(_0x4cfae8,_0x1e91d3){return _0x4cfae8===_0x1e91d3;},'Ovfza':_0x436744(0x154)};this['pollEventBatchInterval']&&(_0x28c0d6[_0x436744(0x178)](clearInterval,this[_0x436744(0x13a)]),this[_0x436744(0x13a)]=null,_0x28c0d6['rrNbA'](_0xeedcfa,_0x28c0d6[_0x436744(0x157)])&&(this[_0x436744(0x16e)]=![]));};[a115_0x4d49d4(0x160)]=()=>{const _0x5a6632=a115_0x4d49d4,_0x4d5970={};_0x4d5970[_0x5a6632(0x13c)]=function(_0x1580d3,_0x2a8feb){return _0x1580d3>=_0x2a8feb;};const _0x5aef00=_0x4d5970;return _0x5aef00[_0x5a6632(0x13c)](this[_0x5a6632(0x188)]['length'],BATCH_SIZE);};async['uploadPending'](_0x2a12c6=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x3745ff=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x5cd9a6=a115_0x4d49d4,_0x3a1727={'PTLLE':function(_0x2d962a,_0x51efac){return _0x2d962a<=_0x51efac;},'QkEdt':function(_0x59a2ff,_0x99ab0d){return _0x59a2ff(_0x99ab0d);},'KfjlS':function(_0xd8ad9a,_0x333d97){return _0xd8ad9a-_0x333d97;}};if(_0x3a1727[_0x5cd9a6(0x149)](this['pendingUploads'],0x0)||_0x3a1727['PTLLE'](_0x2a12c6,0x0))return;return await _0x3a1727[_0x5cd9a6(0x164)](sleep,_0x3745ff),this[_0x5cd9a6(0x136)](_0x3a1727[_0x5cd9a6(0x167)](_0x2a12c6,_0x3745ff));}}module[a115_0x4d49d4(0x184)]=RequestQueueHandler;function a115_0x2ef5(_0x484a0c,_0x4a1daa){const _0x3dc774=a115_0x3dc7();return a115_0x2ef5=function(_0x2ef566,_0x5b49ba){_0x2ef566=_0x2ef566-0x127;let _0x3130cf=_0x3dc774[_0x2ef566];return _0x3130cf;},a115_0x2ef5(_0x484a0c,_0x4a1daa);}function a115_0x3dc7(){const _0x4e1eac=['RESETTING','LogCreated','REMOVING','TEST_SCREENSHOT','utf8','Ovfza','screenshotEventUrl','mfWXd','Nnggg','api/v1/batch','1422436kiXPvT','length','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','format','shouldProceed','DeIrB','QMmUt','120tpKaZX','QkEdt','RFbEI','split','KfjlS','qeYwU','cIYMJ','hook_run','1818000ESDrUl','event_type','join','started','XiwnH','./utils','291088eChaMU','ofntd','Byuma','start','uuid','instance','194530rhvkcJ','xPZwn','IQxjK','uploadAttachmentUrl','6132720VEtwMK','vieFZ','Shutdown-Queue','api/v1/screenshots','KsMrD','shutdown','proceedWithUrl','resetEventBatchPolling','tNzPc','exports','slice','kind','wsXMS','queue','TestRunFinished','removeEventBatchPolling','kovFF','LoHbH','./constants','KAvSO','QCZWC','IaYGr','Processing\x20batch\x20events\x20for\x20','includes','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','pendingUploads','1338155NeNegy','proceedWithData','\x20event\x20successful\x20for\x20events\x20','message','data','response','logs','nWqIh','vDGMV','max','10741KOeCzW','statusText','TgIAO','startEventBatchPolling','status','test_run','batchAndPostEvents','byteLength','map','Ausws','uploadPending','BATCH_EVENT_TYPES','util','POST','pollEventBatchInterval','vhxbW','EuDfx','yacWg','push','splice','error','IXxRk','getInstance','6|0|4|2|5|1|3','Slsmr','add','Processing\x20events.\x20Queue\x20Length\x20-\x20','Interval-Queue','RzbrK','PTLLE','eventUrl','VhGkI','upload-attachments','HookRunFinished','EXCEPTION\x20IN\x20','Remaining\x20Queue\x20Length\x20-\x20','YtdUf','TEST_ATTACHMENT'];a115_0x3dc7=function(){return _0x4e1eac;};return a115_0x3dc7();}