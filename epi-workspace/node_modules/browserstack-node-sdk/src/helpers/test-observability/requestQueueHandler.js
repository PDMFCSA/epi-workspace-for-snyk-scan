const a125_0x4426c1=a125_0x3488;function a125_0x15c0(){const _0x115cb6=['LogCreated','HookRunStarted','POST','TEST_SCREENSHOT','BATCH_EVENT_TYPES','proceedWithUrl','instance','format','aUloh','TEST_REPORTING_ANALYTICS','KZhqO','byteLength','NWtJT','ZKvVy','join','CNQDr','GCqHF','\x20:\x20','Oymdn','aaZpO','FiRWl','TestRunSkipped','api/v1/screenshots','knBzJ','utf8','3520253JnKfuK','removeEventBatchPolling','message','error','TestRunFinished','iyXTH','BMdCC','bubyq','RESETTING','CBTSessionCreated','uploadPending','qymNt','635412bNXuKb','length','statusText','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','\x20REQUEST\x20TO\x20','25615jhSLLx','logs','shouldProceed','includes','startEventBatchPolling','3cqTmBf','../helper','VdjJt','VJhpI','YVMsq','LMgOA','sXSTc','add','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','splice','started','jGFXJ','wpgbN','jlKyW','resetEventBatchPolling','eRKQI','uploadAttachmentUrl','117kmGCMp','Irism','slice','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','REcVB','pendingUploads','bNnXE','66clOeRy','lFpIE','EaOuG','Remaining\x20Queue\x20Length\x20-\x20','batchAndPostEvents','doTuf','nHOfs','Processing\x20batch\x20events\x20for\x20','2383619MGkmRE','REMOVING','response','eventUrl','394836rYztfe','split','1gHLhFa','270488zvXupb','IoDIU','5|0|3|4|2|6|1','\x20bytes.\x20Events\x20are\x20','map','3272030hzfMSR','./constants','proceedWithData','\x20event\x20successful\x20for\x20events\x20','status','CeaSJ','wHIAF','uuid','upload-attachments','screenshotEventUrl','./utils','qNNJw','hook_run','pollEventBatchInterval','data','IqEvk','queue','HookRunFinished','Interval-Queue','Shutdown-Queue','event_type','util','api/v1/batch','ypKgY','max','shutdown'];a125_0x15c0=function(){return _0x115cb6;};return a125_0x15c0();}(function(_0x44a594,_0x2f5257){const _0x3e88c3=a125_0x3488,_0xc3b229=_0x44a594();while(!![]){try{const _0x4b00bf=-parseInt(_0x3e88c3(0x188))/0x1*(-parseInt(_0x3e88c3(0x1cd))/0x2)+-parseInt(_0x3e88c3(0x1d7))/0x3*(-parseInt(_0x3e88c3(0x186))/0x4)+parseInt(_0x3e88c3(0x1d2))/0x5*(-parseInt(_0x3e88c3(0x17a))/0x6)+-parseInt(_0x3e88c3(0x182))/0x7+-parseInt(_0x3e88c3(0x189))/0x8*(parseInt(_0x3e88c3(0x1e8))/0x9)+parseInt(_0x3e88c3(0x18e))/0xa+parseInt(_0x3e88c3(0x1c1))/0xb;if(_0x4b00bf===_0x2f5257)break;else _0xc3b229['push'](_0xc3b229['shift']());}catch(_0x2e6f8e){_0xc3b229['push'](_0xc3b229['shift']());}}}(a125_0x15c0,0x3779c));function a125_0x3488(_0x166e3f,_0x49555b){const _0x15c02d=a125_0x15c0();return a125_0x3488=function(_0x348810,_0x4897e5){_0x348810=_0x348810-0x176;let _0x11cd19=_0x15c02d[_0x348810];return _0x11cd19;},a125_0x3488(_0x166e3f,_0x49555b);}const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a125_0x4426c1(0x18f)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a125_0x4426c1(0x198)),{nestedKeyValue}=require(a125_0x4426c1(0x1d8)),util=require(a125_0x4426c1(0x1a3)),constants=require('../../bin/utils/constants');class RequestQueueHandler{static [a125_0x4426c1(0x1ae)];[a125_0x4426c1(0x178)]=0x0;constructor(){const _0x5af58c=a125_0x4426c1,_0x2a538c={};_0x2a538c['aUloh']=_0x5af58c(0x18b),_0x2a538c[_0x5af58c(0x1b5)]=_0x5af58c(0x196),_0x2a538c[_0x5af58c(0x1c6)]=_0x5af58c(0x1a4),_0x2a538c[_0x5af58c(0x1a5)]=_0x5af58c(0x1be),_0x2a538c['BMdCC']=_0x5af58c(0x1a8),_0x2a538c[_0x5af58c(0x1b7)]=_0x5af58c(0x1ca),_0x2a538c[_0x5af58c(0x179)]=_0x5af58c(0x1c5),_0x2a538c[_0x5af58c(0x177)]=_0x5af58c(0x1bd),_0x2a538c['LMgOA']=_0x5af58c(0x19f),_0x2a538c['KZhqO']='TestRunStarted',_0x2a538c[_0x5af58c(0x17f)]=_0x5af58c(0x1a9);const _0x49fe1d=_0x2a538c,_0x10a6c8=_0x49fe1d[_0x5af58c(0x1b0)][_0x5af58c(0x187)]('|');let _0x42404e=0x0;while(!![]){switch(_0x10a6c8[_0x42404e++]){case'0':this[_0x5af58c(0x1e1)]=![];continue;case'1':this[_0x5af58c(0x19b)]=null;continue;case'2':this[_0x5af58c(0x1e7)]=_0x49fe1d[_0x5af58c(0x1b5)];continue;case'3':this[_0x5af58c(0x185)]=_0x49fe1d['iyXTH'];continue;case'4':this[_0x5af58c(0x197)]=_0x49fe1d[_0x5af58c(0x1a5)];continue;case'5':this[_0x5af58c(0x19e)]=[];continue;case'6':this[_0x5af58c(0x1ac)]=[_0x49fe1d[_0x5af58c(0x1c7)],_0x49fe1d[_0x5af58c(0x1b7)],_0x49fe1d[_0x5af58c(0x179)],_0x49fe1d['REcVB'],_0x49fe1d[_0x5af58c(0x1dc)],_0x49fe1d[_0x5af58c(0x1b2)],_0x49fe1d['doTuf']];continue;}break;}}static['getInstance'](){const _0x50a302=a125_0x4426c1;return!RequestQueueHandler[_0x50a302(0x1ae)]&&(RequestQueueHandler[_0x50a302(0x1ae)]=new RequestQueueHandler()),RequestQueueHandler[_0x50a302(0x1ae)];}['start']=()=>{const _0x4cfa3f=a125_0x4426c1;!this[_0x4cfa3f(0x1e1)]&&(this['started']=!![],this[_0x4cfa3f(0x1d6)]());};[a125_0x4426c1(0x1de)]=_0x2a3771=>{const _0x183dff=a125_0x4426c1,_0x42a0ab={'wpgbN':function(_0x4f0e3e,_0x313eab){return _0x4f0e3e===_0x313eab;},'FiRWl':_0x183dff(0x1ab),'uIpok':function(_0x3cff26,_0x170482){return _0x3cff26>_0x170482;},'qNNJw':'TEST_ATTACHMENT','eRKQI':function(_0x31f4aa,_0x2f0341){return _0x31f4aa!==_0x2f0341;},'wHIAF':_0x183dff(0x1c5),'Oymdn':function(_0x595181,_0x5dfeb0){return _0x595181(_0x5dfeb0);},'qymNt':_0x183dff(0x1d0)};if(this[_0x183dff(0x1ac)][_0x183dff(0x1d5)](_0x2a3771[_0x183dff(0x1a2)])){if(_0x2a3771[_0x183dff(0x1d3)]&&_0x2a3771[_0x183dff(0x1d3)][0x0]&&_0x42a0ab[_0x183dff(0x1e3)](_0x2a3771[_0x183dff(0x1d3)][0x0]['kind'],_0x42a0ab[_0x183dff(0x1bc)])){const _0xfec2f3={};return _0xfec2f3[_0x183dff(0x1d4)]=!![],_0xfec2f3[_0x183dff(0x190)]=[_0x2a3771],_0xfec2f3[_0x183dff(0x1ad)]=this[_0x183dff(0x197)],_0xfec2f3;}if(_0x2a3771[_0x183dff(0x1d3)]&&_0x42a0ab['uIpok'](_0x2a3771['logs'][_0x183dff(0x1ce)],0x0)&&_0x42a0ab['wpgbN'](_0x2a3771[_0x183dff(0x1d3)][0x0]['kind'],_0x42a0ab[_0x183dff(0x199)])&&_0x42a0ab[_0x183dff(0x1e6)](_0x2a3771['event_type'],_0x42a0ab[_0x183dff(0x194)])){const _0x33e87d={};return _0x33e87d['shouldProceed']=!![],_0x33e87d['proceedWithData']=[_0x2a3771],_0x33e87d[_0x183dff(0x1ad)]=this[_0x183dff(0x1e7)],_0x33e87d;}this[_0x183dff(0x19e)]['push'](_0x2a3771);let _0x3d9630=null;const _0x4e0dd9=this['shouldProceed']();_0x4e0dd9&&(_0x42a0ab[_0x183dff(0x1ba)](trace,_0x42a0ab[_0x183dff(0x1cc)]),_0x3d9630=this['queue'][_0x183dff(0x1ea)](0x0,BATCH_SIZE),this[_0x183dff(0x19e)]['splice'](0x0,BATCH_SIZE),this[_0x183dff(0x1e5)]());const _0x2c4d1f={};return _0x2c4d1f[_0x183dff(0x1d4)]=_0x4e0dd9,_0x2c4d1f[_0x183dff(0x190)]=_0x3d9630,_0x2c4d1f[_0x183dff(0x1ad)]=this[_0x183dff(0x185)],_0x2c4d1f;}const _0x429960={};return _0x429960[_0x183dff(0x1d4)]=!![],_0x429960;};[a125_0x4426c1(0x1a7)]=async()=>{const _0x29af9b=a125_0x4426c1,_0x3e5349={'NWtJT':'REMOVING','VdjJt':function(_0x5f08ca,_0x51d4ee){return _0x5f08ca>_0x51d4ee;},'sdjJe':_0x29af9b(0x1a1),'IqEvk':function(_0x5c8a7d,_0x4d307d){return _0x5c8a7d(_0x4d307d);}};await this['uploadPending'](),this[_0x29af9b(0x1c2)](_0x3e5349[_0x29af9b(0x1b4)]);while(_0x3e5349[_0x29af9b(0x1d9)](this[_0x29af9b(0x19e)][_0x29af9b(0x1ce)],0x0)){const _0x46e8d8=this[_0x29af9b(0x19e)]['slice'](0x0,BATCH_SIZE);this[_0x29af9b(0x19e)][_0x29af9b(0x1e0)](0x0,BATCH_SIZE),await this[_0x29af9b(0x17e)](this[_0x29af9b(0x185)],_0x3e5349['sdjJe'],_0x46e8d8);}_0x3e5349[_0x29af9b(0x1d9)](this[_0x29af9b(0x178)],0x0)&&_0x3e5349[_0x29af9b(0x19d)](debug,_0x29af9b(0x1df)+this[_0x29af9b(0x178)]);};[a125_0x4426c1(0x17e)]=async(_0x4607eb,_0x59b1ed,_0x174491)=>{const _0x2f5af2=a125_0x4426c1,_0x49fc3b={'Irism':function(_0xbe6acf,_0x3c9f6a){return _0xbe6acf(_0x3c9f6a);},'NtjXr':_0x2f5af2(0x1c0),'IoDIU':function(_0x202e3d,_0x52e984){return _0x202e3d(_0x52e984);},'VJhpI':function(_0x57dd43){return _0x57dd43();},'bpZVN':function(_0x1a02d3,_0x36dc4c,_0x58763b,_0x423615,_0x39bab2){return _0x1a02d3(_0x36dc4c,_0x58763b,_0x423615,_0x39bab2);},'sXSTc':_0x2f5af2(0x1aa),'lFpIE':function(_0x16bd7c,_0x4c4825){return _0x16bd7c-_0x4c4825;},'HMTyY':function(_0x132605,_0xa45fc7){return _0x132605(_0xa45fc7);}};let _0x1cf268='';try{_0x1cf268=_0x174491[_0x2f5af2(0x18d)](_0xcab6ae=>'\x27'+_0xcab6ae[_0x2f5af2(0x1a2)]+'\x27:'+(nestedKeyValue(_0xcab6ae,['test_run',_0x2f5af2(0x195)])||nestedKeyValue(_0xcab6ae,[_0x2f5af2(0x19a),'uuid'])))[_0x2f5af2(0x1b6)](','),_0x49fc3b['Irism'](debug,_0x2f5af2(0x181)+_0x59b1ed+'.\x20Request\x20Size\x20-\x20'+Buffer[_0x2f5af2(0x1b3)](util['format']('%j',_0x174491),_0x49fc3b['NtjXr'])+_0x2f5af2(0x18c)+_0x1cf268);}catch(_0x519e02){_0x49fc3b[_0x2f5af2(0x18a)](debug,_0x2f5af2(0x176)+util[_0x2f5af2(0x1af)](_0x519e02)+'}');}const _0x19a45c={'headers':_0x49fc3b[_0x2f5af2(0x1da)](getDefaultHeaders)};try{const _0x2c8375=await _0x49fc3b['bpZVN'](nodeRequest,_0x49fc3b[_0x2f5af2(0x1dd)],_0x4607eb,_0x174491,_0x19a45c);if(_0x2c8375[_0x2f5af2(0x19c)][_0x2f5af2(0x1c4)]){const _0x3586be={};_0x3586be[_0x2f5af2(0x1c3)]=_0x2c8375[_0x2f5af2(0x19c)][_0x2f5af2(0x1c4)];throw _0x3586be;}else _0x49fc3b[_0x2f5af2(0x18a)](debug,_0x59b1ed+_0x2f5af2(0x191)+_0x1cf268+'\x20--\x20'+util[_0x2f5af2(0x1af)]('%j',_0x2c8375[_0x2f5af2(0x19c)])),this['pendingUploads']=Math[_0x2f5af2(0x1a6)](0x0,_0x49fc3b[_0x2f5af2(0x17b)](this[_0x2f5af2(0x178)],_0x174491['length']));}catch(_0x2196f2){_0x2196f2['response']?_0x49fc3b[_0x2f5af2(0x1e9)](debug,'EXCEPTION\x20IN\x20'+_0x59b1ed+_0x2f5af2(0x1d1)+constants[_0x2f5af2(0x1b1)]+_0x2f5af2(0x1b9)+_0x2196f2[_0x2f5af2(0x184)][_0x2f5af2(0x192)]+'\x20'+_0x2196f2[_0x2f5af2(0x184)][_0x2f5af2(0x1cf)]+'\x20'+util[_0x2f5af2(0x1af)]('%j',_0x2196f2[_0x2f5af2(0x184)])):_0x49fc3b['HMTyY'](debug,'EXCEPTION\x20IN\x20'+_0x59b1ed+_0x2f5af2(0x1d1)+constants[_0x2f5af2(0x1b1)]+_0x2f5af2(0x1b9)+(_0x2196f2['message']||_0x2196f2)),this[_0x2f5af2(0x178)]=Math[_0x2f5af2(0x1a6)](0x0,_0x49fc3b[_0x2f5af2(0x17b)](this[_0x2f5af2(0x178)],_0x174491[_0x2f5af2(0x1ce)]));}};['startEventBatchPolling']=()=>{const _0x3ec7a8=a125_0x4426c1,_0x255ce7={'bubyq':function(_0x4d7c56,_0x3feaaa){return _0x4d7c56>_0x3feaaa;},'GCqHF':function(_0x22035d,_0x44cadd){return _0x22035d(_0x44cadd);},'jGFXJ':_0x3ec7a8(0x1a0),'nHOfs':function(_0x2acfc8,_0x54b4ce,_0x1636ae){return _0x2acfc8(_0x54b4ce,_0x1636ae);}};this[_0x3ec7a8(0x19b)]=_0x255ce7[_0x3ec7a8(0x180)](setInterval,async()=>{const _0x3f132d=_0x3ec7a8;if(_0x255ce7[_0x3f132d(0x1c8)](this[_0x3f132d(0x19e)]['length'],0x0)){_0x255ce7[_0x3f132d(0x1b8)](trace,'Processing\x20events.\x20Queue\x20Length\x20-\x20'+this[_0x3f132d(0x19e)]['length']);const _0x26e310=this['queue'][_0x3f132d(0x1ea)](0x0,BATCH_SIZE);this[_0x3f132d(0x19e)][_0x3f132d(0x1e0)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x3f132d(0x185)],_0x255ce7[_0x3f132d(0x1e2)],_0x26e310),_0x255ce7[_0x3f132d(0x1b8)](trace,_0x3f132d(0x17d)+this[_0x3f132d(0x19e)][_0x3f132d(0x1ce)]);}},BATCH_INTERVAL);};['resetEventBatchPolling']=()=>{const _0x5d2a5a=a125_0x4426c1,_0x1f613b={};_0x1f613b['YVMsq']=_0x5d2a5a(0x1c9);const _0x4cfbc6=_0x1f613b;this[_0x5d2a5a(0x1c2)](_0x4cfbc6[_0x5d2a5a(0x1db)]),this[_0x5d2a5a(0x1d6)]();};[a125_0x4426c1(0x1c2)]=_0x24ef90=>{const _0x160b2e=a125_0x4426c1,_0x43c365={'jlKyW':function(_0x1ebbdd,_0x2802b2){return _0x1ebbdd(_0x2802b2);},'LtJUF':function(_0x5b2a61,_0x44a816){return _0x5b2a61===_0x44a816;},'CeaSJ':_0x160b2e(0x183)};this[_0x160b2e(0x19b)]&&(_0x43c365[_0x160b2e(0x1e4)](clearInterval,this[_0x160b2e(0x19b)]),this[_0x160b2e(0x19b)]=null,_0x43c365['LtJUF'](_0x24ef90,_0x43c365[_0x160b2e(0x193)])&&(this[_0x160b2e(0x1e1)]=![]));};[a125_0x4426c1(0x1d4)]=()=>{const _0x526436=a125_0x4426c1,_0xa5bf0f={};_0xa5bf0f[_0x526436(0x17c)]=function(_0x3bca6d,_0x4a154b){return _0x3bca6d>=_0x4a154b;};const _0xc76c1=_0xa5bf0f;return _0xc76c1[_0x526436(0x17c)](this[_0x526436(0x19e)][_0x526436(0x1ce)],BATCH_SIZE);};async[a125_0x4426c1(0x1cb)](_0x241409=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x411812=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x47fb53=a125_0x4426c1,_0x21f8b2={'cDHTR':function(_0x4fd865,_0x2db416){return _0x4fd865<=_0x2db416;},'knBzJ':function(_0x208224,_0x29a536){return _0x208224<=_0x29a536;},'MsjZq':function(_0x33a885,_0x3b4999){return _0x33a885(_0x3b4999);},'aaZpO':function(_0x285b4d,_0x274aa2){return _0x285b4d-_0x274aa2;}};if(_0x21f8b2['cDHTR'](this[_0x47fb53(0x178)],0x0)||_0x21f8b2[_0x47fb53(0x1bf)](_0x241409,0x0))return;return await _0x21f8b2['MsjZq'](sleep,_0x411812),this[_0x47fb53(0x1cb)](_0x21f8b2[_0x47fb53(0x1bb)](_0x241409,_0x411812));}}module['exports']=RequestQueueHandler;