const a128_0x4cfca2=a128_0x2ba2;(function(_0x19a23b,_0x521d9b){const _0x18ef70=a128_0x2ba2,_0x59c0df=_0x19a23b();while(!![]){try{const _0x3b7c76=parseInt(_0x18ef70(0x16e))/0x1+parseInt(_0x18ef70(0x168))/0x2+parseInt(_0x18ef70(0x1aa))/0x3+-parseInt(_0x18ef70(0x1a4))/0x4+-parseInt(_0x18ef70(0x16a))/0x5*(parseInt(_0x18ef70(0x1c1))/0x6)+-parseInt(_0x18ef70(0x19f))/0x7*(-parseInt(_0x18ef70(0x1b2))/0x8)+-parseInt(_0x18ef70(0x1c7))/0x9*(-parseInt(_0x18ef70(0x1c2))/0xa);if(_0x3b7c76===_0x521d9b)break;else _0x59c0df['push'](_0x59c0df['shift']());}catch(_0x44c6c0){_0x59c0df['push'](_0x59c0df['shift']());}}}(a128_0x55e3,0x49db1));function a128_0x2ba2(_0x107da5,_0x1b28c5){const _0x55e39c=a128_0x55e3();return a128_0x2ba2=function(_0x2ba246,_0xb23f01){_0x2ba246=_0x2ba246-0x15e;let _0x239a66=_0x55e39c[_0x2ba246];return _0x239a66;},a128_0x2ba2(_0x107da5,_0x1b28c5);}const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a128_0x4cfca2(0x1cf)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a128_0x4cfca2(0x1b6)),{nestedKeyValue}=require('../helper'),util=require('util'),constants=require(a128_0x4cfca2(0x1a5));class RequestQueueHandler{static [a128_0x4cfca2(0x174)];[a128_0x4cfca2(0x173)]=0x0;constructor(){const _0x37b8cc=a128_0x4cfca2,_0x52f574={};_0x52f574[_0x37b8cc(0x1c4)]='4|1|6|0|5|2|3',_0x52f574[_0x37b8cc(0x1d0)]='api/v1/screenshots',_0x52f574['iOVlm']=_0x37b8cc(0x1b4),_0x52f574[_0x37b8cc(0x1bc)]=_0x37b8cc(0x1bd),_0x52f574[_0x37b8cc(0x1c5)]=_0x37b8cc(0x197),_0x52f574['YuisX']=_0x37b8cc(0x188),_0x52f574[_0x37b8cc(0x19a)]=_0x37b8cc(0x171),_0x52f574[_0x37b8cc(0x1a0)]=_0x37b8cc(0x16d),_0x52f574[_0x37b8cc(0x194)]=_0x37b8cc(0x1a7),_0x52f574[_0x37b8cc(0x1af)]='upload-attachments',_0x52f574[_0x37b8cc(0x165)]='api/v1/batch';const _0x5141d7=_0x52f574,_0x342a2a=_0x5141d7[_0x37b8cc(0x1c4)][_0x37b8cc(0x1b8)]('|');let _0xaa14cf=0x0;while(!![]){switch(_0x342a2a[_0xaa14cf++]){case'0':this[_0x37b8cc(0x167)]=_0x5141d7['hmHcK'];continue;case'1':this[_0x37b8cc(0x1be)]=![];continue;case'2':this[_0x37b8cc(0x170)]=[_0x5141d7[_0x37b8cc(0x164)],_0x5141d7[_0x37b8cc(0x1bc)],_0x5141d7[_0x37b8cc(0x1c5)],_0x5141d7[_0x37b8cc(0x172)],_0x5141d7[_0x37b8cc(0x19a)],_0x5141d7[_0x37b8cc(0x1a0)],_0x5141d7[_0x37b8cc(0x194)]];continue;case'3':this[_0x37b8cc(0x17c)]=null;continue;case'4':this[_0x37b8cc(0x1b9)]=[];continue;case'5':this['uploadAttachmentUrl']=_0x5141d7[_0x37b8cc(0x1af)];continue;case'6':this['eventUrl']=_0x5141d7[_0x37b8cc(0x165)];continue;}break;}}static[a128_0x4cfca2(0x169)](){const _0x2ddb6c=a128_0x4cfca2;return!RequestQueueHandler[_0x2ddb6c(0x174)]&&(RequestQueueHandler[_0x2ddb6c(0x174)]=new RequestQueueHandler()),RequestQueueHandler[_0x2ddb6c(0x174)];}[a128_0x4cfca2(0x198)]=()=>{const _0x3dbdb6=a128_0x4cfca2;!this[_0x3dbdb6(0x1be)]&&(this['started']=!![],this[_0x3dbdb6(0x1c3)]());};[a128_0x4cfca2(0x18f)]=_0xae1288=>{const _0x47b922=a128_0x4cfca2,_0x2822cf={'mpfnv':function(_0x1be52d,_0x493701){return _0x1be52d===_0x493701;},'KBikM':_0x47b922(0x19b),'xtWQj':function(_0x3d025f,_0x2bb02f){return _0x3d025f>_0x2bb02f;},'flRwm':_0x47b922(0x15e),'ZDWHe':function(_0xb1ad1e,_0x1162b1){return _0xb1ad1e!==_0x1162b1;},'Zivph':_0x47b922(0x197),'YvpPQ':function(_0x3d4719,_0x23b4ec){return _0x3d4719(_0x23b4ec);},'YPQEx':_0x47b922(0x1a6)};if(this['BATCH_EVENT_TYPES']['includes'](_0xae1288[_0x47b922(0x1c0)])){if(_0xae1288['logs']&&_0xae1288[_0x47b922(0x199)][0x0]&&_0x2822cf['mpfnv'](_0xae1288[_0x47b922(0x199)][0x0][_0x47b922(0x160)],_0x2822cf[_0x47b922(0x1b0)])){const _0x367dc8={};return _0x367dc8['shouldProceed']=!![],_0x367dc8[_0x47b922(0x15f)]=[_0xae1288],_0x367dc8[_0x47b922(0x175)]=this[_0x47b922(0x167)],_0x367dc8;}if(_0xae1288[_0x47b922(0x199)]&&_0x2822cf[_0x47b922(0x195)](_0xae1288['logs'][_0x47b922(0x1d6)],0x0)&&_0x2822cf[_0x47b922(0x1a9)](_0xae1288[_0x47b922(0x199)][0x0][_0x47b922(0x160)],_0x2822cf[_0x47b922(0x182)])&&_0x2822cf[_0x47b922(0x1a2)](_0xae1288['event_type'],_0x2822cf[_0x47b922(0x1ce)])){const _0x52da88={};return _0x52da88[_0x47b922(0x196)]=!![],_0x52da88[_0x47b922(0x15f)]=[_0xae1288],_0x52da88['proceedWithUrl']=this[_0x47b922(0x1cc)],_0x52da88;}this[_0x47b922(0x1b9)]['push'](_0xae1288);let _0x99130d=null;const _0xfec931=this[_0x47b922(0x196)]();_0xfec931&&(_0x2822cf[_0x47b922(0x1ba)](trace,_0x2822cf[_0x47b922(0x18d)]),_0x99130d=this[_0x47b922(0x1b9)][_0x47b922(0x16f)](0x0,BATCH_SIZE),this[_0x47b922(0x1b9)][_0x47b922(0x161)](0x0,BATCH_SIZE),this[_0x47b922(0x1d1)]());const _0x366ff5={};return _0x366ff5[_0x47b922(0x196)]=_0xfec931,_0x366ff5[_0x47b922(0x15f)]=_0x99130d,_0x366ff5['proceedWithUrl']=this['eventUrl'],_0x366ff5;}const _0x62eb72={};return _0x62eb72[_0x47b922(0x196)]=!![],_0x62eb72;};[a128_0x4cfca2(0x176)]=async()=>{const _0x244b1c=a128_0x4cfca2,_0x38336a={'fsrGa':'REMOVING','HRGEu':function(_0x54243d,_0x306d40){return _0x54243d>_0x306d40;},'wBxkR':_0x244b1c(0x19e),'tvgdn':function(_0x189c73,_0x26170d){return _0x189c73(_0x26170d);}};await this[_0x244b1c(0x1d5)](),this['removeEventBatchPolling'](_0x38336a[_0x244b1c(0x1ab)]);while(_0x38336a[_0x244b1c(0x1c9)](this['queue'][_0x244b1c(0x1d6)],0x0)){const _0x3db201=this['queue'][_0x244b1c(0x16f)](0x0,BATCH_SIZE);this['queue'][_0x244b1c(0x161)](0x0,BATCH_SIZE),await this[_0x244b1c(0x1bf)](this[_0x244b1c(0x162)],_0x38336a[_0x244b1c(0x19c)],_0x3db201);}_0x38336a[_0x244b1c(0x1c9)](this[_0x244b1c(0x173)],0x0)&&_0x38336a[_0x244b1c(0x179)](debug,_0x244b1c(0x1b1)+this[_0x244b1c(0x173)]);};['batchAndPostEvents']=async(_0x52a88d,_0x4a977d,_0x20f5c0)=>{const _0x4d3856=a128_0x4cfca2,_0x982a16={'QkcFX':function(_0xc6cc32,_0x91f130){return _0xc6cc32(_0x91f130);},'aHJtL':_0x4d3856(0x1c8),'hknWb':function(_0x25c023){return _0x25c023();},'jgzUL':function(_0x3bd57c,_0xb57c,_0x563714,_0x7c9c01,_0x260d9a){return _0x3bd57c(_0xb57c,_0x563714,_0x7c9c01,_0x260d9a);},'WgXrI':_0x4d3856(0x163),'dCBNF':function(_0x48bf8a,_0x2e6850){return _0x48bf8a(_0x2e6850);},'fxRNQ':function(_0x23829c,_0x4f06ee){return _0x23829c-_0x4f06ee;},'kxGpd':function(_0x587e36,_0x260ba1){return _0x587e36(_0x260ba1);},'BhjLI':function(_0x57f9cd,_0x4de53d){return _0x57f9cd-_0x4de53d;}};let _0x253149='';try{_0x253149=_0x20f5c0['map'](_0x4389d1=>'\x27'+_0x4389d1[_0x4d3856(0x1c0)]+'\x27:'+(nestedKeyValue(_0x4389d1,[_0x4d3856(0x177),_0x4d3856(0x17a)])||nestedKeyValue(_0x4389d1,[_0x4d3856(0x192),'uuid'])))[_0x4d3856(0x16c)](','),_0x982a16['QkcFX'](debug,_0x4d3856(0x185)+_0x4a977d+'.\x20Request\x20Size\x20-\x20'+Buffer[_0x4d3856(0x1d4)](util[_0x4d3856(0x1a8)]('%j',_0x20f5c0),_0x982a16[_0x4d3856(0x1b5)])+_0x4d3856(0x1ad)+_0x253149);}catch(_0x3478ff){_0x982a16[_0x4d3856(0x1a3)](debug,'Exception\x20in\x20logging\x20batch\x20events\x20--\x20'+util['format'](_0x3478ff)+'}');}const _0x410473={'headers':_0x982a16[_0x4d3856(0x186)](getDefaultHeaders)};try{const _0xb95819=await _0x982a16[_0x4d3856(0x1ca)](nodeRequest,_0x982a16[_0x4d3856(0x16b)],_0x52a88d,_0x20f5c0,_0x410473);if(_0xb95819['data'][_0x4d3856(0x181)]){const _0x8620b6={};_0x8620b6['message']=_0xb95819['data'][_0x4d3856(0x181)];throw _0x8620b6;}else _0x982a16['dCBNF'](debug,_0x4a977d+_0x4d3856(0x18c)+_0x253149+_0x4d3856(0x183)+util[_0x4d3856(0x1a8)]('%j',_0xb95819['data'])),this[_0x4d3856(0x173)]=Math[_0x4d3856(0x1a1)](0x0,_0x982a16[_0x4d3856(0x184)](this[_0x4d3856(0x173)],_0x20f5c0[_0x4d3856(0x1d6)]));}catch(_0x13b4d6){_0x13b4d6[_0x4d3856(0x193)]?_0x982a16[_0x4d3856(0x190)](debug,_0x4d3856(0x189)+_0x4a977d+_0x4d3856(0x191)+constants['TEST_REPORTING_ANALYTICS']+_0x4d3856(0x1b3)+_0x13b4d6[_0x4d3856(0x193)][_0x4d3856(0x1c6)]+'\x20'+_0x13b4d6[_0x4d3856(0x193)][_0x4d3856(0x178)]+'\x20'+util[_0x4d3856(0x1a8)]('%j',_0x13b4d6[_0x4d3856(0x193)])):_0x982a16[_0x4d3856(0x17f)](debug,_0x4d3856(0x189)+_0x4a977d+_0x4d3856(0x191)+constants[_0x4d3856(0x18e)]+_0x4d3856(0x1b3)+(_0x13b4d6['message']||_0x13b4d6)),this[_0x4d3856(0x173)]=Math[_0x4d3856(0x1a1)](0x0,_0x982a16[_0x4d3856(0x17e)](this[_0x4d3856(0x173)],_0x20f5c0['length']));}};[a128_0x4cfca2(0x1c3)]=()=>{const _0x1ae8c4=a128_0x4cfca2,_0x47e9d2={'kLDiC':function(_0x46a7e8,_0x1a3e08){return _0x46a7e8>_0x1a3e08;},'PFmkD':function(_0x1b6f9f,_0x582cf8){return _0x1b6f9f(_0x582cf8);},'pwtxY':_0x1ae8c4(0x180),'SAcoO':function(_0x75b167,_0x207c71,_0x27246b){return _0x75b167(_0x207c71,_0x27246b);}};this['pollEventBatchInterval']=_0x47e9d2[_0x1ae8c4(0x19d)](setInterval,async()=>{const _0x5abb6b=_0x1ae8c4;if(_0x47e9d2[_0x5abb6b(0x1ae)](this[_0x5abb6b(0x1b9)][_0x5abb6b(0x1d6)],0x0)){_0x47e9d2[_0x5abb6b(0x166)](trace,_0x5abb6b(0x1cd)+this[_0x5abb6b(0x1b9)][_0x5abb6b(0x1d6)]);const _0x8125c5=this[_0x5abb6b(0x1b9)][_0x5abb6b(0x16f)](0x0,BATCH_SIZE);this[_0x5abb6b(0x1b9)][_0x5abb6b(0x161)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x5abb6b(0x162)],_0x47e9d2[_0x5abb6b(0x187)],_0x8125c5),_0x47e9d2[_0x5abb6b(0x166)](trace,'Remaining\x20Queue\x20Length\x20-\x20'+this['queue']['length']);}},BATCH_INTERVAL);};[a128_0x4cfca2(0x1d1)]=()=>{const _0x93945e=a128_0x4cfca2,_0xdb477d={};_0xdb477d[_0x93945e(0x18b)]=_0x93945e(0x1cb);const _0x5203d1=_0xdb477d;this[_0x93945e(0x17b)](_0x5203d1[_0x93945e(0x18b)]),this[_0x93945e(0x1c3)]();};[a128_0x4cfca2(0x17b)]=_0x4ffb5e=>{const _0xef142=a128_0x4cfca2,_0x51ae5a={'ClxWI':function(_0x3fe40b,_0x2e1ec1){return _0x3fe40b(_0x2e1ec1);},'FLxlx':function(_0x310e9c,_0x41b134){return _0x310e9c===_0x41b134;},'DwShF':_0xef142(0x18a)};this[_0xef142(0x17c)]&&(_0x51ae5a[_0xef142(0x1d2)](clearInterval,this[_0xef142(0x17c)]),this[_0xef142(0x17c)]=null,_0x51ae5a[_0xef142(0x1b7)](_0x4ffb5e,_0x51ae5a[_0xef142(0x17d)])&&(this[_0xef142(0x1be)]=![]));};[a128_0x4cfca2(0x196)]=()=>{const _0xbaebc7=a128_0x4cfca2,_0x9c292a={};_0x9c292a['uAaCO']=function(_0x3af532,_0x209374){return _0x3af532>=_0x209374;};const _0x4efccf=_0x9c292a;return _0x4efccf[_0xbaebc7(0x1bb)](this[_0xbaebc7(0x1b9)][_0xbaebc7(0x1d6)],BATCH_SIZE);};async[a128_0x4cfca2(0x1d5)](_0x1b7a38=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x2b96f5=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x192373=a128_0x4cfca2,_0x22f110={'OPyJW':function(_0x1d115d,_0x30285b){return _0x1d115d<=_0x30285b;},'jDWLy':function(_0x3b6ac0,_0x2d206a){return _0x3b6ac0(_0x2d206a);},'JuKlY':function(_0x3fdbc3,_0x175b3a){return _0x3fdbc3-_0x175b3a;}};if(_0x22f110[_0x192373(0x1d3)](this[_0x192373(0x173)],0x0)||_0x22f110[_0x192373(0x1d3)](_0x1b7a38,0x0))return;return await _0x22f110['jDWLy'](sleep,_0x2b96f5),this[_0x192373(0x1d5)](_0x22f110['JuKlY'](_0x1b7a38,_0x2b96f5));}}function a128_0x55e3(){const _0x429169=['IZYpg','CBTSessionCreated','started','batchAndPostEvents','event_type','6ckSulE','300xberbt','startEventBatchPolling','FPHBI','GXNai','status','224577WQYonV','utf8','HRGEu','jgzUL','RESETTING','uploadAttachmentUrl','Processing\x20events.\x20Queue\x20Length\x20-\x20','Zivph','./constants','hmHcK','resetEventBatchPolling','ClxWI','OPyJW','byteLength','uploadPending','length','TEST_ATTACHMENT','proceedWithData','kind','splice','eventUrl','POST','iOVlm','GObrb','PFmkD','screenshotEventUrl','210990VRvHVG','getInstance','2487365NVHegg','WgXrI','join','TestRunStarted','218653ANEQtR','slice','BATCH_EVENT_TYPES','HookRunFinished','YuisX','pendingUploads','instance','proceedWithUrl','shutdown','test_run','statusText','tvgdn','uuid','removeEventBatchPolling','pollEventBatchInterval','DwShF','BhjLI','kxGpd','Interval-Queue','error','flRwm','\x20--\x20','fxRNQ','Processing\x20batch\x20events\x20for\x20','hknWb','pwtxY','TestRunSkipped','EXCEPTION\x20IN\x20','REMOVING','zuvID','\x20event\x20successful\x20for\x20events\x20','YPQEx','TEST_REPORTING_ANALYTICS','add','dCBNF','\x20REQUEST\x20TO\x20','hook_run','response','IYLhU','xtWQj','shouldProceed','TestRunFinished','start','logs','zYHFN','TEST_SCREENSHOT','wBxkR','SAcoO','Shutdown-Queue','2849wRDtBd','Gybik','max','ZDWHe','QkcFX','1712968kXwDTi','../../bin/utils/constants','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','HookRunStarted','format','mpfnv','262563HCyazA','fsrGa','exports','\x20bytes.\x20Events\x20are\x20','kLDiC','txQMC','KBikM','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','1336aYkgrO','\x20:\x20','LogCreated','aHJtL','./utils','FLxlx','split','queue','YvpPQ','uAaCO'];a128_0x55e3=function(){return _0x429169;};return a128_0x55e3();}module[a128_0x4cfca2(0x1ac)]=RequestQueueHandler;