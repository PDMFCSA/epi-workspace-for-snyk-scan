function a86_0x5a3c(){const _0x7a3658=['KjAAb','uploadPending','Remaining\x20Queue\x20Length\x20-\x20','sSIqu','\x20bytes.\x20Events\x20are\x20','removeEventBatchPolling','kind','qODzJ','vJNnh','ZJFrT','status','Processing\x20batch\x20events\x20for\x20','HQSPv','startEventBatchPolling','LuuBf','started','bJfyg','dtgWV','3493lqLjGP','map','2zogkRS','FJYql','slice','proceedWithUrl','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','message','uNFTp','api/v1/batch','./utils','2112924NSnDzv','max','BATCH_EVENT_TYPES','mpcRM','util','PEYoJ','proceedWithData','EXCEPTION\x20IN\x20','RESETTING','./constants','1106084ZmhFTi','rMBYA','resetEventBatchPolling','TestRunStarted','4020045yJkxpW','yPnGS','JqWoe','shouldProceed','dkQMb','JZMna','eventUrl','22320pbJfZn','data','error','3684315oyLETK','25659DNtFrr','length','POST','REMOVING','TestRunSkipped','vFKlU','TEST_SCREENSHOT','\x20event\x20successful\x20for\x20events\x20','TEST_ATTACHMENT','LcNKG','WTgVs','event_type','byteLength','logs','nXkCD','uuid','screenshotEventUrl','response','ofCXO','pendingUploads','.\x20Request\x20Size\x20-\x20','SfwVU','Shutdown-Queue','api/v1/screenshots','includes','uploadAttachmentUrl','iwLmg','join','WXSsG','HookRunStarted','\x20--\x20','dioFw','test_run','pollEventBatchInterval','1522824wOJCUT','HSxjw','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','instance','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','batchAndPostEvents','NobwS','splice','queue','WjMdV','apPux','upload-attachments','format','TestRunFinished','21080TZnAyT','lwUfW','aHQoQ','push'];a86_0x5a3c=function(){return _0x7a3658;};return a86_0x5a3c();}const a86_0x435fa6=a86_0x2ace;function a86_0x2ace(_0x17ffe2,_0x201db3){const _0x5a3c7b=a86_0x5a3c();return a86_0x2ace=function(_0x2ace9d,_0x2f1a33){_0x2ace9d=_0x2ace9d-0xa4;let _0x337b90=_0x5a3c7b[_0x2ace9d];return _0x337b90;},a86_0x2ace(_0x17ffe2,_0x201db3);}(function(_0x5f0059,_0x50480d){const _0xa0f6bb=a86_0x2ace,_0x19bb57=_0x5f0059();while(!![]){try{const _0x1d51a5=-parseInt(_0xa0f6bb(0xc2))/0x1+-parseInt(_0xa0f6bb(0xaf))/0x2*(parseInt(_0xa0f6bb(0xc6))/0x3)+-parseInt(_0xa0f6bb(0xf3))/0x4+-parseInt(_0xa0f6bb(0xd0))/0x5+-parseInt(_0xa0f6bb(0xb8))/0x6+parseInt(_0xa0f6bb(0xad))/0x7*(-parseInt(_0xa0f6bb(0xcd))/0x8)+-parseInt(_0xa0f6bb(0xd1))/0x9*(-parseInt(_0xa0f6bb(0x101))/0xa);if(_0x1d51a5===_0x50480d)break;else _0x19bb57['push'](_0x19bb57['shift']());}catch(_0x309716){_0x19bb57['push'](_0x19bb57['shift']());}}}(a86_0x5a3c,0xab5b4));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a86_0x435fa6(0xc1)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a86_0x435fa6(0xb7)),{nestedKeyValue}=require('../helper'),util=require(a86_0x435fa6(0xbc));class RequestQueueHandler{static [a86_0x435fa6(0xf6)];[a86_0x435fa6(0xe4)]=0x0;constructor(){const _0x270372=a86_0x435fa6,_0x4f43d3={};_0x4f43d3[_0x270372(0xa7)]='2|0|6|5|1|4|3',_0x4f43d3[_0x270372(0x103)]=_0x270372(0xfe),_0x4f43d3[_0x270372(0xed)]='LogCreated',_0x4f43d3[_0x270372(0xc3)]='CBTSessionCreated',_0x4f43d3[_0x270372(0x10c)]='TestRunFinished',_0x4f43d3[_0x270372(0xbb)]=_0x270372(0xd5),_0x4f43d3[_0x270372(0xa9)]='HookRunFinished',_0x4f43d3['ofCXO']=_0x270372(0xc5),_0x4f43d3[_0x270372(0x102)]=_0x270372(0xee),_0x4f43d3[_0x270372(0x10d)]=_0x270372(0xe8),_0x4f43d3[_0x270372(0xa4)]=_0x270372(0xb6);const _0x20ecd5=_0x4f43d3,_0x3ce035=_0x20ecd5['HQSPv']['split']('|');let _0x29fcf0=0x0;while(!![]){switch(_0x3ce035[_0x29fcf0++]){case'0':this[_0x270372(0xaa)]=![];continue;case'1':this[_0x270372(0xea)]=_0x20ecd5[_0x270372(0x103)];continue;case'2':this[_0x270372(0xfb)]=[];continue;case'3':this[_0x270372(0xf2)]=null;continue;case'4':this[_0x270372(0xba)]=[_0x20ecd5[_0x270372(0xed)],_0x20ecd5['rMBYA'],_0x20ecd5[_0x270372(0x10c)],_0x20ecd5[_0x270372(0xbb)],_0x20ecd5[_0x270372(0xa9)],_0x20ecd5[_0x270372(0xe3)],_0x20ecd5[_0x270372(0x102)]];continue;case'5':this[_0x270372(0xe1)]=_0x20ecd5[_0x270372(0x10d)];continue;case'6':this[_0x270372(0xcc)]=_0x20ecd5[_0x270372(0xa4)];continue;}break;}}static['getInstance'](){const _0x5c5448=a86_0x435fa6;return!RequestQueueHandler[_0x5c5448(0xf6)]&&(RequestQueueHandler[_0x5c5448(0xf6)]=new RequestQueueHandler()),RequestQueueHandler['instance'];}['start']=()=>{const _0x99179d=a86_0x435fa6;!this[_0x99179d(0xaa)]&&(this[_0x99179d(0xaa)]=!![],this[_0x99179d(0xa8)]());};['add']=_0x5b1542=>{const _0x42404b=a86_0x435fa6,_0x14672e={'JZMna':function(_0x413cd1,_0x2baef4){return _0x413cd1===_0x2baef4;},'apPux':_0x42404b(0xd7),'QUHJn':function(_0x545429,_0x495df7){return _0x545429>_0x495df7;},'sSIqu':function(_0x2c259c,_0x1a52e4){return _0x2c259c===_0x1a52e4;},'gbFzC':_0x42404b(0xd9),'nXkCD':function(_0x178e7f,_0x8c43f8){return _0x178e7f!==_0x8c43f8;},'rrxhg':_0x42404b(0x100),'SfwVU':function(_0x4e9343,_0x1ee40d){return _0x4e9343(_0x1ee40d);},'RawNG':_0x42404b(0xb3)};if(this[_0x42404b(0xba)][_0x42404b(0xe9)](_0x5b1542[_0x42404b(0xdc)])){if(_0x5b1542['logs']&&_0x5b1542['logs'][0x0]&&_0x14672e[_0x42404b(0xcb)](_0x5b1542[_0x42404b(0xde)][0x0][_0x42404b(0x10b)],_0x14672e[_0x42404b(0xfd)])){const _0x1ad79c={};return _0x1ad79c[_0x42404b(0xc9)]=!![],_0x1ad79c[_0x42404b(0xbe)]=[_0x5b1542],_0x1ad79c[_0x42404b(0xb2)]=this[_0x42404b(0xe1)],_0x1ad79c;}if(_0x5b1542['logs']&&_0x14672e['QUHJn'](_0x5b1542[_0x42404b(0xde)][_0x42404b(0xd2)],0x0)&&_0x14672e[_0x42404b(0x108)](_0x5b1542[_0x42404b(0xde)][0x0][_0x42404b(0x10b)],_0x14672e['gbFzC'])&&_0x14672e[_0x42404b(0xdf)](_0x5b1542['event_type'],_0x14672e['rrxhg'])){const _0x5667de={};return _0x5667de[_0x42404b(0xc9)]=!![],_0x5667de[_0x42404b(0xbe)]=[_0x5b1542],_0x5667de[_0x42404b(0xb2)]=this[_0x42404b(0xea)],_0x5667de;}this[_0x42404b(0xfb)][_0x42404b(0x104)](_0x5b1542);let _0x18d1cc=null;const _0x45eb52=this[_0x42404b(0xc9)]();_0x45eb52&&(_0x14672e[_0x42404b(0xe6)](trace,_0x14672e['RawNG']),_0x18d1cc=this[_0x42404b(0xfb)][_0x42404b(0xb1)](0x0,BATCH_SIZE),this[_0x42404b(0xfb)][_0x42404b(0xfa)](0x0,BATCH_SIZE),this['resetEventBatchPolling']());const _0x2716b4={};return _0x2716b4[_0x42404b(0xc9)]=_0x45eb52,_0x2716b4[_0x42404b(0xbe)]=_0x18d1cc,_0x2716b4[_0x42404b(0xb2)]=this[_0x42404b(0xcc)],_0x2716b4;}const _0xbaad97={};return _0xbaad97[_0x42404b(0xc9)]=!![],_0xbaad97;};['shutdown']=async()=>{const _0xe356f=a86_0x435fa6,_0x5f5981={'KjAAb':'REMOVING','bJfyg':function(_0x5d0807,_0x2805ad){return _0x5d0807>_0x2805ad;},'dioFw':_0xe356f(0xe7),'WTgVs':function(_0x5fc233,_0x491999){return _0x5fc233>_0x491999;},'qMCTv':function(_0x3c0c06,_0x3c0e98){return _0x3c0c06(_0x3c0e98);}};await this[_0xe356f(0x106)](),this[_0xe356f(0x10a)](_0x5f5981[_0xe356f(0x105)]);while(_0x5f5981[_0xe356f(0xab)](this[_0xe356f(0xfb)]['length'],0x0)){const _0x416a2d=this['queue'][_0xe356f(0xb1)](0x0,BATCH_SIZE);this[_0xe356f(0xfb)][_0xe356f(0xfa)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0xe356f(0xcc)],_0x5f5981[_0xe356f(0xf0)],_0x416a2d);}_0x5f5981[_0xe356f(0xdb)](this[_0xe356f(0xe4)],0x0)&&_0x5f5981['qMCTv'](debug,_0xe356f(0xf5)+this[_0xe356f(0xe4)]);};[a86_0x435fa6(0xf8)]=async(_0x355bf7,_0x56b579,_0x3fc156)=>{const _0x519670=a86_0x435fa6,_0x27754f={'yPnGS':function(_0x207bf2,_0x454977){return _0x207bf2(_0x454977);},'JqWoe':'utf8','dkQMb':function(_0x365786){return _0x365786();},'vFKlU':function(_0x1f2b9e,_0x25632a,_0xe7dd65,_0x433473,_0x3b7921){return _0x1f2b9e(_0x25632a,_0xe7dd65,_0x433473,_0x3b7921);},'uNFTp':_0x519670(0xd3),'ocDvo':function(_0x1b0537,_0x2ab039){return _0x1b0537(_0x2ab039);},'FJYql':function(_0x1406e9,_0x5a362c){return _0x1406e9-_0x5a362c;},'atVTK':function(_0x51d231,_0xffa358){return _0x51d231(_0xffa358);}};let _0x383e01='';try{_0x383e01=_0x3fc156[_0x519670(0xae)](_0x193bdd=>'\x27'+_0x193bdd[_0x519670(0xdc)]+'\x27:'+(nestedKeyValue(_0x193bdd,[_0x519670(0xf1),_0x519670(0xe0)])||nestedKeyValue(_0x193bdd,['hook_run','uuid'])))[_0x519670(0xec)](','),_0x27754f[_0x519670(0xc7)](debug,_0x519670(0xa6)+_0x56b579+_0x519670(0xe5)+Buffer[_0x519670(0xdd)](util['format']('%j',_0x3fc156),_0x27754f[_0x519670(0xc8)])+_0x519670(0x109)+_0x383e01);}catch(_0x13f3e3){_0x27754f[_0x519670(0xc7)](debug,'Exception\x20in\x20logging\x20batch\x20events\x20--\x20'+util['format'](_0x13f3e3)+'}');}const _0x2afbea={'headers':_0x27754f[_0x519670(0xca)](getDefaultHeaders)};try{const _0x4e4bff=await _0x27754f[_0x519670(0xd6)](nodeRequest,_0x27754f[_0x519670(0xb5)],_0x355bf7,_0x3fc156,_0x2afbea);if(_0x4e4bff[_0x519670(0xce)]['error']){const _0x4af4b2={};_0x4af4b2[_0x519670(0xb4)]=_0x4e4bff[_0x519670(0xce)][_0x519670(0xcf)];throw _0x4af4b2;}else _0x27754f['ocDvo'](debug,_0x56b579+_0x519670(0xd8)+_0x383e01+_0x519670(0xef)+util[_0x519670(0xff)]('%j',_0x4e4bff[_0x519670(0xce)])),this[_0x519670(0xe4)]=Math[_0x519670(0xb9)](0x0,_0x27754f[_0x519670(0xb0)](this[_0x519670(0xe4)],_0x3fc156[_0x519670(0xd2)]));}catch(_0x24cce0){_0x24cce0[_0x519670(0xe2)]?_0x27754f[_0x519670(0xc7)](debug,'EXCEPTION\x20IN\x20'+_0x56b579+_0x519670(0xf7)+_0x24cce0[_0x519670(0xe2)][_0x519670(0xa5)]+'\x20'+_0x24cce0[_0x519670(0xe2)]['statusText']+'\x20'+util['format']('%j',_0x24cce0[_0x519670(0xe2)])):_0x27754f['atVTK'](debug,_0x519670(0xbf)+_0x56b579+'\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20'+(_0x24cce0[_0x519670(0xb4)]||_0x24cce0)),this[_0x519670(0xe4)]=Math['max'](0x0,_0x27754f['FJYql'](this[_0x519670(0xe4)],_0x3fc156[_0x519670(0xd2)]));}};[a86_0x435fa6(0xa8)]=()=>{const _0x2f94ec=a86_0x435fa6,_0x1a29d1={'LcNKG':function(_0x331518,_0x3904bd){return _0x331518>_0x3904bd;},'iwLmg':function(_0x43bcc6,_0x4856d1){return _0x43bcc6(_0x4856d1);},'qPNIY':'Interval-Queue','PEYoJ':function(_0xbab8c4,_0x19cfce,_0x14d3ba){return _0xbab8c4(_0x19cfce,_0x14d3ba);}};this[_0x2f94ec(0xf2)]=_0x1a29d1[_0x2f94ec(0xbd)](setInterval,async()=>{const _0x3297e2=_0x2f94ec;if(_0x1a29d1[_0x3297e2(0xda)](this[_0x3297e2(0xfb)][_0x3297e2(0xd2)],0x0)){_0x1a29d1[_0x3297e2(0xeb)](trace,'Processing\x20events.\x20Queue\x20Length\x20-\x20'+this[_0x3297e2(0xfb)][_0x3297e2(0xd2)]);const _0x50530=this[_0x3297e2(0xfb)][_0x3297e2(0xb1)](0x0,BATCH_SIZE);this[_0x3297e2(0xfb)][_0x3297e2(0xfa)](0x0,BATCH_SIZE),await this[_0x3297e2(0xf8)](this[_0x3297e2(0xcc)],_0x1a29d1['qPNIY'],_0x50530),_0x1a29d1[_0x3297e2(0xeb)](trace,_0x3297e2(0x107)+this[_0x3297e2(0xfb)][_0x3297e2(0xd2)]);}},BATCH_INTERVAL);};[a86_0x435fa6(0xc4)]=()=>{const _0x2f8b78=a86_0x435fa6,_0x4bde6c={};_0x4bde6c['osxPV']=_0x2f8b78(0xc0);const _0x309196=_0x4bde6c;this[_0x2f8b78(0x10a)](_0x309196['osxPV']),this['startEventBatchPolling']();};[a86_0x435fa6(0x10a)]=_0x13f2de=>{const _0x52d200=a86_0x435fa6,_0x1c3685={'FfBTu':function(_0x44dd64,_0x5b8c0c){return _0x44dd64(_0x5b8c0c);},'HSxjw':function(_0x25b587,_0x26d3f0){return _0x25b587===_0x26d3f0;},'OpwDw':_0x52d200(0xd4)};this[_0x52d200(0xf2)]&&(_0x1c3685['FfBTu'](clearInterval,this[_0x52d200(0xf2)]),this['pollEventBatchInterval']=null,_0x1c3685[_0x52d200(0xf4)](_0x13f2de,_0x1c3685['OpwDw'])&&(this[_0x52d200(0xaa)]=![]));};['shouldProceed']=()=>{const _0x3886c9=a86_0x435fa6,_0x365f5d={};_0x365f5d[_0x3886c9(0xf9)]=function(_0x3792da,_0xe61803){return _0x3792da>=_0xe61803;};const _0x499e82=_0x365f5d;return _0x499e82['NobwS'](this[_0x3886c9(0xfb)][_0x3886c9(0xd2)],BATCH_SIZE);};async[a86_0x435fa6(0x106)](_0xc1105=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0xd026cc=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x4e1752=a86_0x435fa6,_0x41d6f9={'WjMdV':function(_0x22a8b4,_0x258ed4){return _0x22a8b4<=_0x258ed4;},'dtgWV':function(_0x2f9bb0,_0x30e7e3){return _0x2f9bb0(_0x30e7e3);},'YYLvB':function(_0x3d6f8c,_0x4d5ab8){return _0x3d6f8c-_0x4d5ab8;}};if(_0x41d6f9['WjMdV'](this[_0x4e1752(0xe4)],0x0)||_0x41d6f9[_0x4e1752(0xfc)](_0xc1105,0x0))return;return await _0x41d6f9[_0x4e1752(0xac)](sleep,_0xd026cc),this['uploadPending'](_0x41d6f9['YYLvB'](_0xc1105,_0xd026cc));}}module['exports']=RequestQueueHandler;