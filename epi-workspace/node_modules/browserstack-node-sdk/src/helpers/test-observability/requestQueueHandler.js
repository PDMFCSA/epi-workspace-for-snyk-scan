function a86_0x43ac(){const _0x801195=['3062532FcaXgJ','VJDXo','Eazht','push','mbAeY','uuid','ItoxZ','21FwnxKY','event_type','REMOVING','CBTSessionCreated','1617228HQtcji','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','Diiyf','FToun','started','LoTbN','uploadAttachmentUrl','LogCreated','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','AQkvi','1230504UixeOT','gqMTX','map','shutdown','error','10sBXgSg','batchAndPostEvents','tGvOs','XVPcu','add','api/v1/batch','npFef','POST','TestRunStarted','logs','TestRunFinished','Zpmxd','eventUrl','./constants','HookRunStarted','dfRTn','EtQqb','TEST_ATTACHMENT','EXCEPTION\x20IN\x20','pdzSY','jDADb','pendingUploads','exports','kBopn','SPHFI','proceedWithUrl','fygol','statusText','upload-attachments','2|3|4|5|0|1|6','23430KOVIJL','WBEDL','zHrPq','queue','screenshotEventUrl','11896jlhNtP','includes','test_run','start','eEHzd','MXtEA','status','hakjZ','util','max','BPgOw','format','instance','../helper','split','KAHdD','XOvvC','startEventBatchPolling','Remaining\x20Queue\x20Length\x20-\x20','proceedWithData','\x20event\x20successful\x20for\x20events\x20','resetEventBatchPolling','470sVASwH','splice','pollEventBatchInterval','TestRunSkipped','message','7776369vmCTDP','length','BATCH_EVENT_TYPES','shouldProceed','dTqgr','uploadPending','data','GlqJr','WmeEg','\x20bytes.\x20Events\x20are\x20','slice','61cmQYgO','removeEventBatchPolling','OMUbW','jmUxe','RESETTING','response','16619141GBAaff','sPsoB','hook_run','YSlFN','sytpx'];a86_0x43ac=function(){return _0x801195;};return a86_0x43ac();}const a86_0x2d3c48=a86_0xf0a5;(function(_0x9469a0,_0x40ea32){const _0x2c6efe=a86_0xf0a5,_0x567c7e=_0x9469a0();while(!![]){try{const _0x3ae657=-parseInt(_0x2c6efe(0x1d3))/0x1*(-parseInt(_0x2c6efe(0x1a8))/0x2)+parseInt(_0x2c6efe(0x17b))/0x3+-parseInt(_0x2c6efe(0x1ad))/0x4*(-parseInt(_0x2c6efe(0x1c3))/0x5)+-parseInt(_0x2c6efe(0x1de))/0x6+parseInt(_0x2c6efe(0x177))/0x7*(parseInt(_0x2c6efe(0x185))/0x8)+parseInt(_0x2c6efe(0x1c8))/0x9+parseInt(_0x2c6efe(0x18a))/0xa*(-parseInt(_0x2c6efe(0x1d9))/0xb);if(_0x3ae657===_0x40ea32)break;else _0x567c7e['push'](_0x567c7e['shift']());}catch(_0x16ebfc){_0x567c7e['push'](_0x567c7e['shift']());}}}(a86_0x43ac,0xcc762));function a86_0xf0a5(_0x59da5f,_0x2856d6){const _0x43acef=a86_0x43ac();return a86_0xf0a5=function(_0xf0a599,_0x47ac50){_0xf0a599=_0xf0a599-0x172;let _0x80de34=_0x43acef[_0xf0a599];return _0x80de34;},a86_0xf0a5(_0x59da5f,_0x2856d6);}const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a86_0x2d3c48(0x197)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require('./utils'),{nestedKeyValue}=require(a86_0x2d3c48(0x1ba)),util=require(a86_0x2d3c48(0x1b5));class RequestQueueHandler{static [a86_0x2d3c48(0x1b9)];['pendingUploads']=0x0;constructor(){const _0x121116=a86_0x2d3c48,_0x4a414e={};_0x4a414e[_0x121116(0x172)]=_0x121116(0x1a7),_0x4a414e['BPgOw']=_0x121116(0x1a6),_0x4a414e[_0x121116(0x1d5)]=_0x121116(0x182),_0x4a414e[_0x121116(0x18d)]=_0x121116(0x17a),_0x4a414e[_0x121116(0x1cf)]='TestRunFinished',_0x4a414e[_0x121116(0x190)]=_0x121116(0x1c6),_0x4a414e['SPHFI']='HookRunFinished',_0x4a414e[_0x121116(0x19e)]=_0x121116(0x192),_0x4a414e[_0x121116(0x1a1)]=_0x121116(0x198),_0x4a414e[_0x121116(0x1a9)]=_0x121116(0x18f),_0x4a414e[_0x121116(0x17e)]='api/v1/screenshots';const _0x582042=_0x4a414e,_0x2ad937=_0x582042[_0x121116(0x172)][_0x121116(0x1bb)]('|');let _0x33e136=0x0;while(!![]){switch(_0x2ad937[_0x33e136++]){case'0':this[_0x121116(0x181)]=_0x582042[_0x121116(0x1b7)];continue;case'1':this[_0x121116(0x1ca)]=[_0x582042[_0x121116(0x1d5)],_0x582042[_0x121116(0x18d)],_0x582042[_0x121116(0x1cf)],_0x582042['npFef'],_0x582042[_0x121116(0x1a2)],_0x582042['jDADb'],_0x582042[_0x121116(0x1a1)]];continue;case'2':this['queue']=[];continue;case'3':this[_0x121116(0x17f)]=![];continue;case'4':this[_0x121116(0x196)]=_0x582042[_0x121116(0x1a9)];continue;case'5':this[_0x121116(0x1ac)]=_0x582042[_0x121116(0x17e)];continue;case'6':this[_0x121116(0x1c5)]=null;continue;}break;}}static['getInstance'](){const _0x47c3b5=a86_0x2d3c48;return!RequestQueueHandler['instance']&&(RequestQueueHandler[_0x47c3b5(0x1b9)]=new RequestQueueHandler()),RequestQueueHandler[_0x47c3b5(0x1b9)];}[a86_0x2d3c48(0x1b0)]=()=>{const _0x991a3a=a86_0x2d3c48;!this[_0x991a3a(0x17f)]&&(this[_0x991a3a(0x17f)]=!![],this[_0x991a3a(0x1be)]());};[a86_0x2d3c48(0x18e)]=_0x976165=>{const _0x535a93=a86_0x2d3c48,_0x25a8f2={'hakjZ':function(_0x522b4f,_0x8c79b4){return _0x522b4f===_0x8c79b4;},'AQkvi':'TEST_SCREENSHOT','sPsoB':function(_0x33b451,_0x389054){return _0x33b451>_0x389054;},'dfRTn':function(_0x35470a,_0x5dbc9e){return _0x35470a===_0x5dbc9e;},'IwQjQ':_0x535a93(0x19b),'MXtEA':function(_0x1273d8,_0x56beb3){return _0x1273d8!==_0x56beb3;},'AuhHp':_0x535a93(0x194),'XOvvC':function(_0x4db885,_0x52dc72){return _0x4db885(_0x52dc72);},'LoTbN':'Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..'};if(this[_0x535a93(0x1ca)][_0x535a93(0x1ae)](_0x976165['event_type'])){if(_0x976165[_0x535a93(0x193)]&&_0x976165[_0x535a93(0x193)][0x0]&&_0x25a8f2[_0x535a93(0x1b4)](_0x976165[_0x535a93(0x193)][0x0]['kind'],_0x25a8f2[_0x535a93(0x184)])){const _0x4a0f86={};return _0x4a0f86['shouldProceed']=!![],_0x4a0f86[_0x535a93(0x1c0)]=[_0x976165],_0x4a0f86[_0x535a93(0x1a3)]=this['screenshotEventUrl'],_0x4a0f86;}if(_0x976165['logs']&&_0x25a8f2[_0x535a93(0x1da)](_0x976165[_0x535a93(0x193)][_0x535a93(0x1c9)],0x0)&&_0x25a8f2[_0x535a93(0x199)](_0x976165[_0x535a93(0x193)][0x0]['kind'],_0x25a8f2['IwQjQ'])&&_0x25a8f2[_0x535a93(0x1b2)](_0x976165[_0x535a93(0x178)],_0x25a8f2['AuhHp'])){const _0x572d82={};return _0x572d82[_0x535a93(0x1cb)]=!![],_0x572d82[_0x535a93(0x1c0)]=[_0x976165],_0x572d82[_0x535a93(0x1a3)]=this[_0x535a93(0x181)],_0x572d82;}this['queue'][_0x535a93(0x173)](_0x976165);let _0x221db4=null;const _0x57e8dd=this[_0x535a93(0x1cb)]();_0x57e8dd&&(_0x25a8f2[_0x535a93(0x1bd)](trace,_0x25a8f2[_0x535a93(0x180)]),_0x221db4=this[_0x535a93(0x1ab)][_0x535a93(0x1d2)](0x0,BATCH_SIZE),this['queue'][_0x535a93(0x1c4)](0x0,BATCH_SIZE),this[_0x535a93(0x1c2)]());const _0x20736c={};return _0x20736c[_0x535a93(0x1cb)]=_0x57e8dd,_0x20736c[_0x535a93(0x1c0)]=_0x221db4,_0x20736c[_0x535a93(0x1a3)]=this[_0x535a93(0x196)],_0x20736c;}const _0x819784={};return _0x819784[_0x535a93(0x1cb)]=!![],_0x819784;};[a86_0x2d3c48(0x188)]=async()=>{const _0x346d15=a86_0x2d3c48,_0x21d014={'sVOWI':_0x346d15(0x179),'tnSvU':function(_0x4c4d99,_0x1aeff8){return _0x4c4d99>_0x1aeff8;},'zHrPq':'Shutdown-Queue','VUdee':function(_0x16798c,_0x4c7686){return _0x16798c(_0x4c7686);}};await this['uploadPending'](),this[_0x346d15(0x1d4)](_0x21d014['sVOWI']);while(_0x21d014['tnSvU'](this[_0x346d15(0x1ab)][_0x346d15(0x1c9)],0x0)){const _0x4f4398=this[_0x346d15(0x1ab)][_0x346d15(0x1d2)](0x0,BATCH_SIZE);this['queue'][_0x346d15(0x1c4)](0x0,BATCH_SIZE),await this[_0x346d15(0x18b)](this[_0x346d15(0x196)],_0x21d014[_0x346d15(0x1aa)],_0x4f4398);}_0x21d014['tnSvU'](this[_0x346d15(0x19f)],0x0)&&_0x21d014['VUdee'](debug,'Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20'+this[_0x346d15(0x19f)]);};[a86_0x2d3c48(0x18b)]=async(_0x46ea9c,_0x4935a4,_0xbcb94a)=>{const _0x1539bb=a86_0x2d3c48,_0x3a2099={'CkfwH':function(_0x1c216a,_0x307fff){return _0x1c216a(_0x307fff);},'tRUbc':'utf8','tGvOs':function(_0x6a7d0b,_0x5c9b08){return _0x6a7d0b(_0x5c9b08);},'Diiyf':function(_0x35100d){return _0x35100d();},'pdzSY':function(_0x435f98,_0x4e3894,_0x94940b,_0x2bdf5b,_0xa44f41){return _0x435f98(_0x4e3894,_0x94940b,_0x2bdf5b,_0xa44f41);},'mbAeY':_0x1539bb(0x191),'WmeEg':function(_0x2d7091,_0x1e61b4){return _0x2d7091(_0x1e61b4);},'KAHdD':function(_0x2fff2e,_0x528516){return _0x2fff2e-_0x528516;},'fygol':function(_0x20d485,_0x2f7d03){return _0x20d485(_0x2f7d03);},'eEHzd':function(_0x34c987,_0x380639){return _0x34c987-_0x380639;}};let _0x24d78e='';try{_0x24d78e=_0xbcb94a[_0x1539bb(0x187)](_0xea7277=>'\x27'+_0xea7277[_0x1539bb(0x178)]+'\x27:'+(nestedKeyValue(_0xea7277,[_0x1539bb(0x1af),'uuid'])||nestedKeyValue(_0xea7277,[_0x1539bb(0x1db),_0x1539bb(0x175)])))['join'](','),_0x3a2099['CkfwH'](debug,'Processing\x20batch\x20events\x20for\x20'+_0x4935a4+'.\x20Request\x20Size\x20-\x20'+Buffer['byteLength'](util[_0x1539bb(0x1b8)]('%j',_0xbcb94a),_0x3a2099['tRUbc'])+_0x1539bb(0x1d1)+_0x24d78e);}catch(_0x380707){_0x3a2099['tGvOs'](debug,_0x1539bb(0x17c)+util[_0x1539bb(0x1b8)](_0x380707)+'}');}const _0x10544f={'headers':_0x3a2099[_0x1539bb(0x17d)](getDefaultHeaders)};try{const _0x10230e=await _0x3a2099[_0x1539bb(0x19d)](nodeRequest,_0x3a2099[_0x1539bb(0x174)],_0x46ea9c,_0xbcb94a,_0x10544f);if(_0x10230e[_0x1539bb(0x1ce)][_0x1539bb(0x189)]){const _0x188a57={};_0x188a57['message']=_0x10230e[_0x1539bb(0x1ce)][_0x1539bb(0x189)];throw _0x188a57;}else _0x3a2099[_0x1539bb(0x1d0)](debug,_0x4935a4+_0x1539bb(0x1c1)+_0x24d78e+'\x20--\x20'+util[_0x1539bb(0x1b8)]('%j',_0x10230e[_0x1539bb(0x1ce)])),this['pendingUploads']=Math[_0x1539bb(0x1b6)](0x0,_0x3a2099[_0x1539bb(0x1bc)](this[_0x1539bb(0x19f)],_0xbcb94a['length']));}catch(_0x41d8b1){_0x41d8b1[_0x1539bb(0x1d8)]?_0x3a2099[_0x1539bb(0x18c)](debug,'EXCEPTION\x20IN\x20'+_0x4935a4+_0x1539bb(0x183)+_0x41d8b1[_0x1539bb(0x1d8)][_0x1539bb(0x1b3)]+'\x20'+_0x41d8b1[_0x1539bb(0x1d8)][_0x1539bb(0x1a5)]+'\x20'+util[_0x1539bb(0x1b8)]('%j',_0x41d8b1[_0x1539bb(0x1d8)])):_0x3a2099[_0x1539bb(0x1a4)](debug,_0x1539bb(0x19c)+_0x4935a4+_0x1539bb(0x183)+(_0x41d8b1[_0x1539bb(0x1c7)]||_0x41d8b1)),this[_0x1539bb(0x19f)]=Math['max'](0x0,_0x3a2099[_0x1539bb(0x1b1)](this[_0x1539bb(0x19f)],_0xbcb94a['length']));}};[a86_0x2d3c48(0x1be)]=()=>{const _0x346e55=a86_0x2d3c48,_0x496c41={'VJDXo':function(_0x5a2f4f,_0x1198e5){return _0x5a2f4f>_0x1198e5;},'jmUxe':function(_0x3d038a,_0x4f20a3){return _0x3d038a(_0x4f20a3);},'sytpx':'Interval-Queue','EtQqb':function(_0x5e5f99,_0x366d86,_0x4b1c4e){return _0x5e5f99(_0x366d86,_0x4b1c4e);}};this[_0x346e55(0x1c5)]=_0x496c41[_0x346e55(0x19a)](setInterval,async()=>{const _0x14cccc=_0x346e55;if(_0x496c41[_0x14cccc(0x1df)](this[_0x14cccc(0x1ab)]['length'],0x0)){_0x496c41[_0x14cccc(0x1d6)](trace,'Processing\x20events.\x20Queue\x20Length\x20-\x20'+this['queue'][_0x14cccc(0x1c9)]);const _0x480486=this[_0x14cccc(0x1ab)][_0x14cccc(0x1d2)](0x0,BATCH_SIZE);this[_0x14cccc(0x1ab)][_0x14cccc(0x1c4)](0x0,BATCH_SIZE),await this[_0x14cccc(0x18b)](this['eventUrl'],_0x496c41[_0x14cccc(0x1dd)],_0x480486),_0x496c41[_0x14cccc(0x1d6)](trace,_0x14cccc(0x1bf)+this[_0x14cccc(0x1ab)][_0x14cccc(0x1c9)]);}},BATCH_INTERVAL);};[a86_0x2d3c48(0x1c2)]=()=>{const _0x591137=a86_0x2d3c48,_0x4809cc={};_0x4809cc['IvLmH']=_0x591137(0x1d7);const _0xf652c3=_0x4809cc;this[_0x591137(0x1d4)](_0xf652c3['IvLmH']),this[_0x591137(0x1be)]();};[a86_0x2d3c48(0x1d4)]=_0x2849b6=>{const _0x1601b4=a86_0x2d3c48,_0x2d1817={'YSlFN':function(_0x5aab2f,_0x43030a){return _0x5aab2f(_0x43030a);},'InPGs':function(_0x13c6f,_0x2835e4){return _0x13c6f===_0x2835e4;},'EhrLr':'REMOVING'};this[_0x1601b4(0x1c5)]&&(_0x2d1817[_0x1601b4(0x1dc)](clearInterval,this[_0x1601b4(0x1c5)]),this[_0x1601b4(0x1c5)]=null,_0x2d1817['InPGs'](_0x2849b6,_0x2d1817['EhrLr'])&&(this[_0x1601b4(0x17f)]=![]));};[a86_0x2d3c48(0x1cb)]=()=>{const _0x42f832=a86_0x2d3c48,_0x209251={};_0x209251[_0x42f832(0x176)]=function(_0x5bcec3,_0x22febe){return _0x5bcec3>=_0x22febe;};const _0x407b7=_0x209251;return _0x407b7['ItoxZ'](this['queue']['length'],BATCH_SIZE);};async['uploadPending'](_0x1cb479=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x3000c1=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x77bbc1=a86_0x2d3c48,_0x414e3b={'dTqgr':function(_0x3c0232,_0x5f48a3){return _0x3c0232<=_0x5f48a3;},'Ubiwe':function(_0x2693b6,_0x24a2c6){return _0x2693b6<=_0x24a2c6;},'Zpmxd':function(_0x18a5fc,_0x139ee8){return _0x18a5fc(_0x139ee8);},'gqMTX':function(_0xa99736,_0x1962dd){return _0xa99736-_0x1962dd;}};if(_0x414e3b[_0x77bbc1(0x1cc)](this[_0x77bbc1(0x19f)],0x0)||_0x414e3b['Ubiwe'](_0x1cb479,0x0))return;return await _0x414e3b[_0x77bbc1(0x195)](sleep,_0x3000c1),this[_0x77bbc1(0x1cd)](_0x414e3b[_0x77bbc1(0x186)](_0x1cb479,_0x3000c1));}}module[a86_0x2d3c48(0x1a0)]=RequestQueueHandler;