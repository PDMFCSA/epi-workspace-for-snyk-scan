const a118_0x2ba41e=a118_0x527a;function a118_0x117b(){const _0x31d4c0=['Processing\x20events.\x20Queue\x20Length\x20-\x20','213874nsWZjo','shouldProceed','HookRunStarted','batchAndPostEvents','statusText','Shutdown-Queue','resetEventBatchPolling','.\x20Request\x20Size\x20-\x20','pYqKF','QKowM','getInstance','wHmVv','POST','HookRunFinished','uTjhr','lTZuZ','max','1888605hQPEeS','join','status','LnZyC','RjUGl','proceedWithData','removeEventBatchPolling','vugaP','uRUnQ','\x20--\x20','TestRunFinished','shutdown','\x20:\x20','ICGBF','gAxuu','byteLength','SUuDu','Interval-Queue','QdKsO','ZpKYj','QtpSG','bjInS','CBTSessionCreated','TEST_SCREENSHOT','UtbUX','wuNAB','10RTlQqD','pendingUploads','push','EXCEPTION\x20IN\x20','ypUyB','screenshotEventUrl','bJGpi','boXIr','eventUrl','instance','11823868jOCPmH','message','./utils','uuid','tbfcq','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','kind','splice','TEyli','pollEventBatchInterval','./constants','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','util','UkJxf','980394ZXuGyJ','zrBco','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','error','RQPSo','4869189JIdYNY','2|6|5|0|4|3|1','event_type','Remaining\x20Queue\x20Length\x20-\x20','hxKuN','../../bin/utils/constants','uploadAttachmentUrl','uploadPending','length','BhTYo','4501368ycTzeg','start','queue','7725615yjkIfZ','slice','api/v1/screenshots','TestRunStarted','lwHKK','data','started','PtjTw','format','TEST_REPORTING_ANALYTICS','REMOVING','exports','aPPyF','10HpdDYe','logs','gCsuD','hdJaN','../helper','RESETTING','\x20REQUEST\x20TO\x20','TEST_ATTACHMENT','map','hook_run','LogCreated','VtrQR','dzkWh','startEventBatchPolling','upload-attachments','4ylKags','proceedWithUrl','response','Processing\x20batch\x20events\x20for\x20'];a118_0x117b=function(){return _0x31d4c0;};return a118_0x117b();}(function(_0x1627a4,_0x2e3683){const _0x5bf1ca=a118_0x527a,_0x225054=_0x1627a4();while(!![]){try{const _0x141ca9=-parseInt(_0x5bf1ca(0x1ea))/0x1*(parseInt(_0x5bf1ca(0x215))/0x2)+parseInt(_0x5bf1ca(0x232))/0x3*(parseInt(_0x5bf1ca(0x1e5))/0x4)+parseInt(_0x5bf1ca(0x1c9))/0x5+parseInt(_0x5bf1ca(0x22d))/0x6+-parseInt(_0x5bf1ca(0x21f))/0x7+parseInt(_0x5bf1ca(0x1c6))/0x8+-parseInt(_0x5bf1ca(0x1fb))/0x9*(parseInt(_0x5bf1ca(0x1d6))/0xa);if(_0x141ca9===_0x2e3683)break;else _0x225054['push'](_0x225054['shift']());}catch(_0x2346c4){_0x225054['push'](_0x225054['shift']());}}}(a118_0x117b,0xe20dd));function a118_0x527a(_0x15aa49,_0x1111ac){const _0x117b25=a118_0x117b();return a118_0x527a=function(_0x527a42,_0x70b942){_0x527a42=_0x527a42-0x1c6;let _0x328440=_0x117b25[_0x527a42];return _0x328440;},a118_0x527a(_0x15aa49,_0x1111ac);}const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a118_0x2ba41e(0x229)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a118_0x2ba41e(0x221)),{nestedKeyValue}=require(a118_0x2ba41e(0x1da)),util=require(a118_0x2ba41e(0x22b)),constants=require(a118_0x2ba41e(0x237));class RequestQueueHandler{static [a118_0x2ba41e(0x21e)];[a118_0x2ba41e(0x216)]=0x0;constructor(){const _0x2d0548=a118_0x2ba41e,_0x35eec4={};_0x35eec4['xUWUs']=_0x2d0548(0x233),_0x35eec4[_0x2d0548(0x210)]=_0x2d0548(0x1cb),_0x35eec4['hxKuN']=_0x2d0548(0x1e0),_0x35eec4[_0x2d0548(0x219)]=_0x2d0548(0x211),_0x35eec4[_0x2d0548(0x214)]=_0x2d0548(0x205),_0x35eec4[_0x2d0548(0x1f9)]='TestRunSkipped',_0x35eec4['uRUnQ']=_0x2d0548(0x1f7),_0x35eec4[_0x2d0548(0x22c)]=_0x2d0548(0x1cc),_0x35eec4[_0x2d0548(0x1f3)]=_0x2d0548(0x1ec),_0x35eec4[_0x2d0548(0x1f2)]=_0x2d0548(0x1e4),_0x35eec4[_0x2d0548(0x1d5)]='api/v1/batch';const _0x48d58b=_0x35eec4,_0x2d1fb7=_0x48d58b['xUWUs']['split']('|');let _0xc9a995=0x0;while(!![]){switch(_0x2d1fb7[_0xc9a995++]){case'0':this[_0x2d0548(0x21a)]=_0x48d58b['bjInS'];continue;case'1':this[_0x2d0548(0x228)]=null;continue;case'2':this[_0x2d0548(0x1c8)]=[];continue;case'3':this['BATCH_EVENT_TYPES']=[_0x48d58b[_0x2d0548(0x236)],_0x48d58b[_0x2d0548(0x219)],_0x48d58b['wuNAB'],_0x48d58b['lTZuZ'],_0x48d58b[_0x2d0548(0x203)],_0x48d58b[_0x2d0548(0x22c)],_0x48d58b[_0x2d0548(0x1f3)]];continue;case'4':this[_0x2d0548(0x238)]=_0x48d58b['pYqKF'];continue;case'5':this[_0x2d0548(0x21d)]=_0x48d58b[_0x2d0548(0x1d5)];continue;case'6':this['started']=![];continue;}break;}}static[a118_0x2ba41e(0x1f4)](){const _0x33b349=a118_0x2ba41e;return!RequestQueueHandler[_0x33b349(0x21e)]&&(RequestQueueHandler['instance']=new RequestQueueHandler()),RequestQueueHandler[_0x33b349(0x21e)];}[a118_0x2ba41e(0x1c7)]=()=>{const _0x538f7b=a118_0x2ba41e;!this['started']&&(this[_0x538f7b(0x1cf)]=!![],this[_0x538f7b(0x1e3)]());};['add']=_0x29cdba=>{const _0x3b5fb2=a118_0x2ba41e,_0x5c2a2f={'dzkWh':function(_0x323e07,_0x21c477){return _0x323e07===_0x21c477;},'ICGBF':_0x3b5fb2(0x212),'gvGsE':function(_0xef0a88,_0xe747cf){return _0xef0a88>_0xe747cf;},'RQPSo':_0x3b5fb2(0x1dd),'UtbUX':function(_0x4942fb,_0x4872f2){return _0x4942fb!==_0x4872f2;},'RjUGl':'TestRunFinished','zrBco':function(_0x3099cb,_0x2ec978){return _0x3099cb(_0x2ec978);},'qDcRz':_0x3b5fb2(0x22a)};if(this['BATCH_EVENT_TYPES']['includes'](_0x29cdba[_0x3b5fb2(0x234)])){if(_0x29cdba[_0x3b5fb2(0x1d7)]&&_0x29cdba[_0x3b5fb2(0x1d7)][0x0]&&_0x5c2a2f['dzkWh'](_0x29cdba[_0x3b5fb2(0x1d7)][0x0][_0x3b5fb2(0x225)],_0x5c2a2f[_0x3b5fb2(0x208)])){const _0x3b1848={};return _0x3b1848[_0x3b5fb2(0x1eb)]=!![],_0x3b1848['proceedWithData']=[_0x29cdba],_0x3b1848['proceedWithUrl']=this[_0x3b5fb2(0x21a)],_0x3b1848;}if(_0x29cdba[_0x3b5fb2(0x1d7)]&&_0x5c2a2f['gvGsE'](_0x29cdba['logs'][_0x3b5fb2(0x23a)],0x0)&&_0x5c2a2f[_0x3b5fb2(0x1e2)](_0x29cdba[_0x3b5fb2(0x1d7)][0x0][_0x3b5fb2(0x225)],_0x5c2a2f[_0x3b5fb2(0x231)])&&_0x5c2a2f[_0x3b5fb2(0x213)](_0x29cdba[_0x3b5fb2(0x234)],_0x5c2a2f[_0x3b5fb2(0x1ff)])){const _0x3adf22={};return _0x3adf22['shouldProceed']=!![],_0x3adf22[_0x3b5fb2(0x200)]=[_0x29cdba],_0x3adf22[_0x3b5fb2(0x1e6)]=this[_0x3b5fb2(0x238)],_0x3adf22;}this['queue'][_0x3b5fb2(0x217)](_0x29cdba);let _0x275f70=null;const _0x20a03e=this[_0x3b5fb2(0x1eb)]();_0x20a03e&&(_0x5c2a2f[_0x3b5fb2(0x22e)](trace,_0x5c2a2f['qDcRz']),_0x275f70=this[_0x3b5fb2(0x1c8)][_0x3b5fb2(0x1ca)](0x0,BATCH_SIZE),this[_0x3b5fb2(0x1c8)]['splice'](0x0,BATCH_SIZE),this[_0x3b5fb2(0x1f0)]());const _0x40b9c6={};return _0x40b9c6[_0x3b5fb2(0x1eb)]=_0x20a03e,_0x40b9c6[_0x3b5fb2(0x200)]=_0x275f70,_0x40b9c6[_0x3b5fb2(0x1e6)]=this['eventUrl'],_0x40b9c6;}const _0x1d0149={};return _0x1d0149[_0x3b5fb2(0x1eb)]=!![],_0x1d0149;};[a118_0x2ba41e(0x206)]=async()=>{const _0x999c43=a118_0x2ba41e,_0x2edb6c={'sAluG':_0x999c43(0x1d3),'vugaP':function(_0x10ec86,_0x108f42){return _0x10ec86>_0x108f42;},'LnZyC':_0x999c43(0x1ef),'SUuDu':function(_0x17ec56,_0x44fad1){return _0x17ec56(_0x44fad1);}};await this[_0x999c43(0x239)](),this[_0x999c43(0x201)](_0x2edb6c['sAluG']);while(_0x2edb6c[_0x999c43(0x202)](this[_0x999c43(0x1c8)][_0x999c43(0x23a)],0x0)){const _0x340b66=this['queue']['slice'](0x0,BATCH_SIZE);this['queue'][_0x999c43(0x226)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this['eventUrl'],_0x2edb6c[_0x999c43(0x1fe)],_0x340b66);}_0x2edb6c[_0x999c43(0x202)](this[_0x999c43(0x216)],0x0)&&_0x2edb6c[_0x999c43(0x20b)](debug,_0x999c43(0x22f)+this[_0x999c43(0x216)]);};[a118_0x2ba41e(0x1ed)]=async(_0x3098df,_0x4cef4e,_0x57b7dc)=>{const _0x43e54d=a118_0x2ba41e,_0x348058={'uTjhr':function(_0x24b806,_0x21996d){return _0x24b806(_0x21996d);},'VtrQR':'utf8','PtjTw':function(_0x1f092b){return _0x1f092b();},'LxPGS':function(_0x577f75,_0xda179c,_0x426333,_0x30fc37,_0x3bf42b){return _0x577f75(_0xda179c,_0x426333,_0x30fc37,_0x3bf42b);},'wHmVv':_0x43e54d(0x1f6),'ZpKYj':function(_0x49c903,_0x5f0c33){return _0x49c903(_0x5f0c33);},'tbfcq':function(_0x452557,_0x4b269e){return _0x452557-_0x4b269e;},'QdKsO':function(_0x55cbf5,_0x4d92fb){return _0x55cbf5-_0x4d92fb;}};let _0x8826f7='';try{_0x8826f7=_0x57b7dc[_0x43e54d(0x1de)](_0xead659=>'\x27'+_0xead659[_0x43e54d(0x234)]+'\x27:'+(nestedKeyValue(_0xead659,['test_run',_0x43e54d(0x222)])||nestedKeyValue(_0xead659,[_0x43e54d(0x1df),_0x43e54d(0x222)])))[_0x43e54d(0x1fc)](','),_0x348058['uTjhr'](debug,_0x43e54d(0x1e8)+_0x4cef4e+_0x43e54d(0x1f1)+Buffer[_0x43e54d(0x20a)](util[_0x43e54d(0x1d1)]('%j',_0x57b7dc),_0x348058[_0x43e54d(0x1e1)])+'\x20bytes.\x20Events\x20are\x20'+_0x8826f7);}catch(_0x50ad6b){_0x348058[_0x43e54d(0x1f8)](debug,_0x43e54d(0x224)+util[_0x43e54d(0x1d1)](_0x50ad6b)+'}');}const _0x167f11={'headers':_0x348058[_0x43e54d(0x1d0)](getDefaultHeaders)};try{const _0xb04691=await _0x348058['LxPGS'](nodeRequest,_0x348058[_0x43e54d(0x1f5)],_0x3098df,_0x57b7dc,_0x167f11);if(_0xb04691[_0x43e54d(0x1ce)][_0x43e54d(0x230)]){const _0x2ac8e5={};_0x2ac8e5[_0x43e54d(0x220)]=_0xb04691['data'][_0x43e54d(0x230)];throw _0x2ac8e5;}else _0x348058[_0x43e54d(0x20e)](debug,_0x4cef4e+'\x20event\x20successful\x20for\x20events\x20'+_0x8826f7+_0x43e54d(0x204)+util['format']('%j',_0xb04691['data'])),this[_0x43e54d(0x216)]=Math[_0x43e54d(0x1fa)](0x0,_0x348058[_0x43e54d(0x223)](this['pendingUploads'],_0x57b7dc['length']));}catch(_0x496a97){_0x496a97[_0x43e54d(0x1e7)]?_0x348058[_0x43e54d(0x20e)](debug,_0x43e54d(0x218)+_0x4cef4e+'\x20REQUEST\x20TO\x20'+constants[_0x43e54d(0x1d2)]+'\x20:\x20'+_0x496a97[_0x43e54d(0x1e7)][_0x43e54d(0x1fd)]+'\x20'+_0x496a97['response'][_0x43e54d(0x1ee)]+'\x20'+util[_0x43e54d(0x1d1)]('%j',_0x496a97[_0x43e54d(0x1e7)])):_0x348058[_0x43e54d(0x20e)](debug,_0x43e54d(0x218)+_0x4cef4e+_0x43e54d(0x1dc)+constants['TEST_REPORTING_ANALYTICS']+_0x43e54d(0x207)+(_0x496a97['message']||_0x496a97)),this[_0x43e54d(0x216)]=Math[_0x43e54d(0x1fa)](0x0,_0x348058[_0x43e54d(0x20d)](this[_0x43e54d(0x216)],_0x57b7dc[_0x43e54d(0x23a)]));}};['startEventBatchPolling']=()=>{const _0x2d8f08=a118_0x2ba41e,_0x266dd1={'BhTYo':function(_0x5af35e,_0xee9d3a){return _0x5af35e>_0xee9d3a;},'MLDXx':function(_0x933522,_0x3516fa){return _0x933522(_0x3516fa);},'YwhmS':_0x2d8f08(0x20c),'TEyli':function(_0xdf2b41,_0x1ebc12){return _0xdf2b41(_0x1ebc12);},'hdJaN':function(_0x4817d4,_0x5eeb3f,_0xe12f04){return _0x4817d4(_0x5eeb3f,_0xe12f04);}};this['pollEventBatchInterval']=_0x266dd1[_0x2d8f08(0x1d9)](setInterval,async()=>{const _0x264841=_0x2d8f08;if(_0x266dd1[_0x264841(0x23b)](this[_0x264841(0x1c8)]['length'],0x0)){_0x266dd1['MLDXx'](trace,_0x264841(0x1e9)+this[_0x264841(0x1c8)][_0x264841(0x23a)]);const _0x498981=this[_0x264841(0x1c8)][_0x264841(0x1ca)](0x0,BATCH_SIZE);this[_0x264841(0x1c8)][_0x264841(0x226)](0x0,BATCH_SIZE),await this[_0x264841(0x1ed)](this[_0x264841(0x21d)],_0x266dd1['YwhmS'],_0x498981),_0x266dd1[_0x264841(0x227)](trace,_0x264841(0x235)+this[_0x264841(0x1c8)][_0x264841(0x23a)]);}},BATCH_INTERVAL);};[a118_0x2ba41e(0x1f0)]=()=>{const _0x296dfc=a118_0x2ba41e,_0x3e4c52={};_0x3e4c52[_0x296dfc(0x21c)]=_0x296dfc(0x1db);const _0x9a0bcb=_0x3e4c52;this[_0x296dfc(0x201)](_0x9a0bcb[_0x296dfc(0x21c)]),this[_0x296dfc(0x1e3)]();};[a118_0x2ba41e(0x201)]=_0xc4a8bf=>{const _0x3b4093=a118_0x2ba41e,_0x3bf347={'qEtWe':function(_0x176d88,_0x158fe8){return _0x176d88(_0x158fe8);},'gCsuD':function(_0x4e5cb1,_0x37c92f){return _0x4e5cb1===_0x37c92f;},'gAxuu':_0x3b4093(0x1d3)};this[_0x3b4093(0x228)]&&(_0x3bf347['qEtWe'](clearInterval,this[_0x3b4093(0x228)]),this[_0x3b4093(0x228)]=null,_0x3bf347[_0x3b4093(0x1d8)](_0xc4a8bf,_0x3bf347[_0x3b4093(0x209)])&&(this[_0x3b4093(0x1cf)]=![]));};[a118_0x2ba41e(0x1eb)]=()=>{const _0x563376=a118_0x2ba41e,_0x249826={};_0x249826[_0x563376(0x20f)]=function(_0x164e4f,_0x3d0d7e){return _0x164e4f>=_0x3d0d7e;};const _0x1399d9=_0x249826;return _0x1399d9[_0x563376(0x20f)](this[_0x563376(0x1c8)][_0x563376(0x23a)],BATCH_SIZE);};async[a118_0x2ba41e(0x239)](_0x2ebef6=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x5634b6=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x4cccaa=a118_0x2ba41e,_0x1e6868={'lwHKK':function(_0x454157,_0x4ff99d){return _0x454157<=_0x4ff99d;},'JlTZP':function(_0x1e054c,_0x5c134d){return _0x1e054c(_0x5c134d);},'bJGpi':function(_0xab851e,_0x3144ec){return _0xab851e-_0x3144ec;}};if(_0x1e6868[_0x4cccaa(0x1cd)](this['pendingUploads'],0x0)||_0x1e6868[_0x4cccaa(0x1cd)](_0x2ebef6,0x0))return;return await _0x1e6868['JlTZP'](sleep,_0x5634b6),this['uploadPending'](_0x1e6868[_0x4cccaa(0x21b)](_0x2ebef6,_0x5634b6));}}module[a118_0x2ba41e(0x1d4)]=RequestQueueHandler;