const a86_0x5f2a1d=a86_0x342e;(function(_0x413972,_0x1273fe){const _0x516fdd=a86_0x342e,_0x84e87f=_0x413972();while(!![]){try{const _0x594dc6=-parseInt(_0x516fdd(0x16b))/0x1+-parseInt(_0x516fdd(0x1b1))/0x2*(-parseInt(_0x516fdd(0x18b))/0x3)+parseInt(_0x516fdd(0x171))/0x4*(-parseInt(_0x516fdd(0x1c8))/0x5)+-parseInt(_0x516fdd(0x19d))/0x6*(-parseInt(_0x516fdd(0x1b7))/0x7)+parseInt(_0x516fdd(0x1c4))/0x8*(parseInt(_0x516fdd(0x198))/0x9)+parseInt(_0x516fdd(0x19a))/0xa+-parseInt(_0x516fdd(0x173))/0xb;if(_0x594dc6===_0x1273fe)break;else _0x84e87f['push'](_0x84e87f['shift']());}catch(_0x342450){_0x84e87f['push'](_0x84e87f['shift']());}}}(a86_0x3b12,0xc871f));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a86_0x5f2a1d(0x1ba)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a86_0x5f2a1d(0x1ca)),{nestedKeyValue}=require(a86_0x5f2a1d(0x1c2)),util=require(a86_0x5f2a1d(0x1a1));function a86_0x3b12(){const _0x13dcdd=['kVaWO','79659vynYzU','kcnBB','15203500icEcGy','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','AyARW','18xqFikK','utf8','JINid','gXgMi','util','HookRunFinished','pollEventBatchInterval','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','uPnqO','nkgMw','Interval-Queue','RNPjf','split','iVtbT','ylRUM','OzLma','jsJHT','push','instance','nvbCX','1295906XwpPGU','message','mNUrx','ygBmx','JBRkA','bgleb','818643EefzbT','AWpwn','queue','./constants','start','CBDOt','data','0|6|1|3|5|4|2','api/v1/screenshots','QUxOS','event_type','../helper','status','200QiTdPi','byteLength','LogCreated','oKdwt','5CvMGmV','batchAndPostEvents','./utils','response','removeEventBatchPolling','Ysywm','TEST_ATTACHMENT','KJPvx','REMOVING','BdLYi','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','MllZH','GdOnK','lrlLI','Processing\x20batch\x20events\x20for\x20','join','exports','pqYTO','proceedWithData','splice','max','started','logs','RESETTING','slice','Shutdown-Queue','uploadPending','\x20--\x20','TestRunStarted','FlTcw','upload-attachments','368294ZQHDWE','BATCH_EVENT_TYPES','TestRunSkipped','.\x20Request\x20Size\x20-\x20','add','TEST_SCREENSHOT','2497188pJYjfC','screenshotEventUrl','10194921gpoCdN','AhKJA','OxGUi','rZnCN','HookRunStarted','resetEventBatchPolling','pfbHO','CBTSessionCreated','getInstance','eventUrl','proceedWithUrl','Processing\x20events.\x20Queue\x20Length\x20-\x20','test_run','pendingUploads','kind','EXCEPTION\x20IN\x20','xsoif','shouldProceed','FiSiu','statusText','error','shutdown','\x20event\x20successful\x20for\x20events\x20','POST','3VjqIYG','wkhUl','format','Remaining\x20Queue\x20Length\x20-\x20','startEventBatchPolling','map','\x20bytes.\x20Events\x20are\x20','TestRunFinished','hook_run','length','ASMBM','gFMpF'];a86_0x3b12=function(){return _0x13dcdd;};return a86_0x3b12();}class RequestQueueHandler{static ['instance'];[a86_0x5f2a1d(0x180)]=0x0;constructor(){const _0x81c3d6=a86_0x5f2a1d,_0x5272fe={};_0x5272fe[_0x81c3d6(0x1ad)]=_0x81c3d6(0x1be),_0x5272fe['FylQV']='api/v1/batch',_0x5272fe[_0x81c3d6(0x175)]=_0x81c3d6(0x1bf),_0x5272fe[_0x81c3d6(0x159)]=_0x81c3d6(0x1c6),_0x5272fe[_0x81c3d6(0x1b6)]=_0x81c3d6(0x17a),_0x5272fe[_0x81c3d6(0x153)]='TestRunFinished',_0x5272fe['nvbCX']=_0x81c3d6(0x16d),_0x5272fe[_0x81c3d6(0x157)]=_0x81c3d6(0x1a2),_0x5272fe[_0x81c3d6(0x1b3)]=_0x81c3d6(0x168),_0x5272fe[_0x81c3d6(0x183)]=_0x81c3d6(0x177),_0x5272fe[_0x81c3d6(0x1bc)]=_0x81c3d6(0x16a);const _0x495ba3=_0x5272fe,_0x21888d=_0x495ba3[_0x81c3d6(0x1ad)][_0x81c3d6(0x1a9)]('|');let _0xb0aeda=0x0;while(!![]){switch(_0x21888d[_0xb0aeda++]){case'0':this[_0x81c3d6(0x1b9)]=[];continue;case'1':this[_0x81c3d6(0x17c)]=_0x495ba3['FylQV'];continue;case'2':this['pollEventBatchInterval']=null;continue;case'3':this[_0x81c3d6(0x172)]=_0x495ba3[_0x81c3d6(0x175)];continue;case'4':this[_0x81c3d6(0x16c)]=[_0x495ba3[_0x81c3d6(0x159)],_0x495ba3[_0x81c3d6(0x1b6)],_0x495ba3['KJPvx'],_0x495ba3[_0x81c3d6(0x1b0)],_0x495ba3['MllZH'],_0x495ba3[_0x81c3d6(0x1b3)],_0x495ba3[_0x81c3d6(0x183)]];continue;case'5':this['uploadAttachmentUrl']=_0x495ba3[_0x81c3d6(0x1bc)];continue;case'6':this[_0x81c3d6(0x161)]=![];continue;}break;}}static[a86_0x5f2a1d(0x17b)](){const _0x17fc20=a86_0x5f2a1d;return!RequestQueueHandler[_0x17fc20(0x1af)]&&(RequestQueueHandler[_0x17fc20(0x1af)]=new RequestQueueHandler()),RequestQueueHandler[_0x17fc20(0x1af)];}[a86_0x5f2a1d(0x1bb)]=()=>{const _0x26451d=a86_0x5f2a1d;!this[_0x26451d(0x161)]&&(this[_0x26451d(0x161)]=!![],this[_0x26451d(0x18f)]());};[a86_0x5f2a1d(0x16f)]=_0x2e4ee3=>{const _0x16267a=a86_0x5f2a1d,_0x235b57={'RNPjf':function(_0x3de49d,_0x1ccf4d){return _0x3de49d===_0x1ccf4d;},'poMJE':_0x16267a(0x170),'wkhUl':function(_0x790b1c,_0x3fcc92){return _0x790b1c>_0x3fcc92;},'JBRkA':_0x16267a(0x152),'BdLYi':function(_0x3e2126,_0x5832c7){return _0x3e2126!==_0x5832c7;},'oKdwt':_0x16267a(0x192),'ylRUM':function(_0x438dae,_0x2346bf){return _0x438dae(_0x2346bf);},'rZnCN':'Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..'};if(this[_0x16267a(0x16c)]['includes'](_0x2e4ee3[_0x16267a(0x1c1)])){if(_0x2e4ee3[_0x16267a(0x162)]&&_0x2e4ee3[_0x16267a(0x162)][0x0]&&_0x235b57[_0x16267a(0x1a8)](_0x2e4ee3[_0x16267a(0x162)][0x0][_0x16267a(0x181)],_0x235b57['poMJE'])){const _0x160d8e={};return _0x160d8e[_0x16267a(0x184)]=!![],_0x160d8e[_0x16267a(0x15e)]=[_0x2e4ee3],_0x160d8e['proceedWithUrl']=this['screenshotEventUrl'],_0x160d8e;}if(_0x2e4ee3[_0x16267a(0x162)]&&_0x235b57[_0x16267a(0x18c)](_0x2e4ee3[_0x16267a(0x162)]['length'],0x0)&&_0x235b57[_0x16267a(0x1a8)](_0x2e4ee3[_0x16267a(0x162)][0x0]['kind'],_0x235b57[_0x16267a(0x1b5)])&&_0x235b57[_0x16267a(0x155)](_0x2e4ee3[_0x16267a(0x1c1)],_0x235b57[_0x16267a(0x1c7)])){const _0x1f40b0={};return _0x1f40b0[_0x16267a(0x184)]=!![],_0x1f40b0[_0x16267a(0x15e)]=[_0x2e4ee3],_0x1f40b0[_0x16267a(0x17d)]=this['uploadAttachmentUrl'],_0x1f40b0;}this['queue'][_0x16267a(0x1ae)](_0x2e4ee3);let _0x4e78fa=null;const _0x55e6fc=this[_0x16267a(0x184)]();_0x55e6fc&&(_0x235b57[_0x16267a(0x1ab)](trace,_0x235b57[_0x16267a(0x176)]),_0x4e78fa=this['queue']['slice'](0x0,BATCH_SIZE),this[_0x16267a(0x1b9)][_0x16267a(0x15f)](0x0,BATCH_SIZE),this['resetEventBatchPolling']());const _0x377a71={};return _0x377a71[_0x16267a(0x184)]=_0x55e6fc,_0x377a71['proceedWithData']=_0x4e78fa,_0x377a71[_0x16267a(0x17d)]=this[_0x16267a(0x17c)],_0x377a71;}const _0x53cbd1={};return _0x53cbd1[_0x16267a(0x184)]=!![],_0x53cbd1;};[a86_0x5f2a1d(0x188)]=async()=>{const _0x2e4149=a86_0x5f2a1d,_0x208a9e={'ygBmx':_0x2e4149(0x154),'gXgMi':function(_0x54d55d,_0x76d65f){return _0x54d55d>_0x76d65f;},'pqYTO':_0x2e4149(0x165),'ASMBM':function(_0x5ab7a8,_0x4c19e0){return _0x5ab7a8(_0x4c19e0);}};await this[_0x2e4149(0x166)](),this[_0x2e4149(0x150)](_0x208a9e[_0x2e4149(0x1b4)]);while(_0x208a9e[_0x2e4149(0x1a0)](this[_0x2e4149(0x1b9)][_0x2e4149(0x194)],0x0)){const _0x3dd1e2=this[_0x2e4149(0x1b9)]['slice'](0x0,BATCH_SIZE);this[_0x2e4149(0x1b9)][_0x2e4149(0x15f)](0x0,BATCH_SIZE),await this[_0x2e4149(0x1c9)](this['eventUrl'],_0x208a9e[_0x2e4149(0x15d)],_0x3dd1e2);}_0x208a9e[_0x2e4149(0x1a0)](this['pendingUploads'],0x0)&&_0x208a9e[_0x2e4149(0x195)](debug,_0x2e4149(0x156)+this[_0x2e4149(0x180)]);};[a86_0x5f2a1d(0x1c9)]=async(_0x586cfd,_0x4aa43f,_0x27ee1e)=>{const _0x2047c0=a86_0x5f2a1d,_0x2ad0fa={'JINid':function(_0x314c7a,_0x30fcf6){return _0x314c7a(_0x30fcf6);},'kVaWO':_0x2047c0(0x19e),'AhKJA':function(_0x7a0b8f){return _0x7a0b8f();},'FlTcw':function(_0x2b3ad7,_0x121a88,_0x55ea27,_0x138bc6,_0x54c90c){return _0x2b3ad7(_0x121a88,_0x55ea27,_0x138bc6,_0x54c90c);},'uPnqO':_0x2047c0(0x18a),'kcnBB':function(_0x1ed0c2,_0x199fce){return _0x1ed0c2-_0x199fce;},'iKDCB':function(_0x5468e8,_0x6c56da){return _0x5468e8(_0x6c56da);},'QUxOS':function(_0x2b2059,_0x34bbce){return _0x2b2059-_0x34bbce;}};let _0x2024bc='';try{_0x2024bc=_0x27ee1e[_0x2047c0(0x190)](_0x43273d=>'\x27'+_0x43273d[_0x2047c0(0x1c1)]+'\x27:'+(nestedKeyValue(_0x43273d,[_0x2047c0(0x17f),'uuid'])||nestedKeyValue(_0x43273d,[_0x2047c0(0x193),'uuid'])))[_0x2047c0(0x15b)](','),_0x2ad0fa[_0x2047c0(0x19f)](debug,_0x2047c0(0x15a)+_0x4aa43f+_0x2047c0(0x16e)+Buffer[_0x2047c0(0x1c5)](util[_0x2047c0(0x18d)]('%j',_0x27ee1e),_0x2ad0fa[_0x2047c0(0x197)])+_0x2047c0(0x191)+_0x2024bc);}catch(_0x19b750){_0x2ad0fa['JINid'](debug,_0x2047c0(0x19b)+util['format'](_0x19b750)+'}');}const _0x3c004b={'headers':_0x2ad0fa[_0x2047c0(0x174)](getDefaultHeaders)};try{const _0x483183=await _0x2ad0fa[_0x2047c0(0x169)](nodeRequest,_0x2ad0fa[_0x2047c0(0x1a5)],_0x586cfd,_0x27ee1e,_0x3c004b);if(_0x483183['data'][_0x2047c0(0x187)]){const _0x5e3f6b={};_0x5e3f6b[_0x2047c0(0x1b2)]=_0x483183[_0x2047c0(0x1bd)][_0x2047c0(0x187)];throw _0x5e3f6b;}else _0x2ad0fa['JINid'](debug,_0x4aa43f+_0x2047c0(0x189)+_0x2024bc+_0x2047c0(0x167)+util['format']('%j',_0x483183[_0x2047c0(0x1bd)])),this[_0x2047c0(0x180)]=Math[_0x2047c0(0x160)](0x0,_0x2ad0fa[_0x2047c0(0x199)](this[_0x2047c0(0x180)],_0x27ee1e[_0x2047c0(0x194)]));}catch(_0x4045cc){_0x4045cc[_0x2047c0(0x14f)]?_0x2ad0fa[_0x2047c0(0x19f)](debug,_0x2047c0(0x182)+_0x4aa43f+'\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20'+_0x4045cc[_0x2047c0(0x14f)][_0x2047c0(0x1c3)]+'\x20'+_0x4045cc['response'][_0x2047c0(0x186)]+'\x20'+util['format']('%j',_0x4045cc[_0x2047c0(0x14f)])):_0x2ad0fa['iKDCB'](debug,_0x2047c0(0x182)+_0x4aa43f+_0x2047c0(0x1a4)+(_0x4045cc[_0x2047c0(0x1b2)]||_0x4045cc)),this[_0x2047c0(0x180)]=Math[_0x2047c0(0x160)](0x0,_0x2ad0fa[_0x2047c0(0x1c0)](this[_0x2047c0(0x180)],_0x27ee1e[_0x2047c0(0x194)]));}};[a86_0x5f2a1d(0x18f)]=()=>{const _0x4e1811=a86_0x5f2a1d,_0x213009={'gFMpF':function(_0x2ed249,_0x1d900a){return _0x2ed249>_0x1d900a;},'FiSiu':function(_0x5e4514,_0x11d0ee){return _0x5e4514(_0x11d0ee);},'hLnyQ':_0x4e1811(0x1a7),'iVtbT':function(_0x39c5c6,_0x44f5fc,_0x5d64f7){return _0x39c5c6(_0x44f5fc,_0x5d64f7);}};this[_0x4e1811(0x1a3)]=_0x213009[_0x4e1811(0x1aa)](setInterval,async()=>{const _0x50541f=_0x4e1811;if(_0x213009[_0x50541f(0x196)](this[_0x50541f(0x1b9)][_0x50541f(0x194)],0x0)){_0x213009[_0x50541f(0x185)](trace,_0x50541f(0x17e)+this[_0x50541f(0x1b9)][_0x50541f(0x194)]);const _0x586698=this[_0x50541f(0x1b9)][_0x50541f(0x164)](0x0,BATCH_SIZE);this[_0x50541f(0x1b9)][_0x50541f(0x15f)](0x0,BATCH_SIZE),await this[_0x50541f(0x1c9)](this['eventUrl'],_0x213009['hLnyQ'],_0x586698),_0x213009[_0x50541f(0x185)](trace,_0x50541f(0x18e)+this[_0x50541f(0x1b9)][_0x50541f(0x194)]);}},BATCH_INTERVAL);};[a86_0x5f2a1d(0x178)]=()=>{const _0x36d3be=a86_0x5f2a1d,_0x26ac2d={};_0x26ac2d[_0x36d3be(0x179)]=_0x36d3be(0x163);const _0x864a32=_0x26ac2d;this[_0x36d3be(0x150)](_0x864a32['pfbHO']),this['startEventBatchPolling']();};['removeEventBatchPolling']=_0x521e3b=>{const _0x1b066a=a86_0x5f2a1d,_0x5ecb97={'BZwVY':function(_0x3f9617,_0x429187){return _0x3f9617(_0x429187);},'Ysywm':function(_0x222f0a,_0xce7880){return _0x222f0a===_0xce7880;},'AyARW':_0x1b066a(0x154)};this[_0x1b066a(0x1a3)]&&(_0x5ecb97['BZwVY'](clearInterval,this[_0x1b066a(0x1a3)]),this[_0x1b066a(0x1a3)]=null,_0x5ecb97[_0x1b066a(0x151)](_0x521e3b,_0x5ecb97[_0x1b066a(0x19c)])&&(this[_0x1b066a(0x161)]=![]));};['shouldProceed']=()=>{const _0x4dac2d=a86_0x5f2a1d,_0x4bac81={};_0x4bac81[_0x4dac2d(0x1a6)]=function(_0x3fa719,_0x5c8f3c){return _0x3fa719>=_0x5c8f3c;};const _0x53701b=_0x4bac81;return _0x53701b[_0x4dac2d(0x1a6)](this['queue'][_0x4dac2d(0x194)],BATCH_SIZE);};async[a86_0x5f2a1d(0x166)](_0x1dbac4=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x2ff218=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x52aa6a=a86_0x5f2a1d,_0xe29830={'GdOnK':function(_0x1451e2,_0xcb5202){return _0x1451e2<=_0xcb5202;},'pkett':function(_0x2e4377,_0x6ac1b1){return _0x2e4377<=_0x6ac1b1;},'OzLma':function(_0x3192d2,_0x5e962c){return _0x3192d2(_0x5e962c);},'AWpwn':function(_0x40faa9,_0x13886e){return _0x40faa9-_0x13886e;}};if(_0xe29830[_0x52aa6a(0x158)](this[_0x52aa6a(0x180)],0x0)||_0xe29830['pkett'](_0x1dbac4,0x0))return;return await _0xe29830[_0x52aa6a(0x1ac)](sleep,_0x2ff218),this[_0x52aa6a(0x166)](_0xe29830[_0x52aa6a(0x1b8)](_0x1dbac4,_0x2ff218));}}function a86_0x342e(_0x4f980b,_0x50d9fa){const _0x3b125d=a86_0x3b12();return a86_0x342e=function(_0x342e21,_0x3db524){_0x342e21=_0x342e21-0x14f;let _0x586b01=_0x3b125d[_0x342e21];return _0x586b01;},a86_0x342e(_0x4f980b,_0x50d9fa);}module[a86_0x5f2a1d(0x15c)]=RequestQueueHandler;