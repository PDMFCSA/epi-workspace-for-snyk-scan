function a128_0x58a2(){const _0x2b5418=['Remaining\x20Queue\x20Length\x20-\x20','BATCH_EVENT_TYPES','bqYvd','api/v1/screenshots','../helper','iAtwl','startEventBatchPolling','started','api/v1/batch','add','util','fJQOp','Interval-Queue','uploadPending','screenshotEventUrl','eeRqM','TestRunStarted','test_run','awRiI','11730890MtYEQT','1418948cPgoig','splice','180760PgLPwn','join','Airng','max','push','.\x20Request\x20Size\x20-\x20','LogCreated','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','response','FXMQY','vveow','byteLength','map','1143VHWhky','PpKxn','vjlZd','data','OmQxw','1378671tyiLAe','\x20--\x20','BMdqw','kind','hook_run','Vdpmn','0|4|2|6|1|5|3','status','mThVs','\x20event\x20successful\x20for\x20events\x20','TestRunFinished','resetEventBatchPolling','ViZig','RESETTING','REMOVING','\x20:\x20','format','20152EyVUPG','tXrKs','event_type','kAuNG','KZRtJ','TEST_ATTACHMENT','HookRunStarted','uploadAttachmentUrl','\x20REQUEST\x20TO\x20','aglIv','shouldProceed','pendingUploads','exports','BbDia','8660393tUBvHT','zZUkt','ShxXE','message','\x20bytes.\x20Events\x20are\x20','wfLPa','65FElaGn','gXevq','Shutdown-Queue','utf8','dUcjS','74874DLsKLQ','3AjbULB','pollEventBatchInterval','zkmbl','length','proceedWithUrl','GbHjb','cOGJL','./constants','EXCEPTION\x20IN\x20','iNXnL','rZJfz','shutdown','proceedWithData','instance','includes','YuEmo','EgGDy','TEST_REPORTING_ANALYTICS','VHsaJ','slice','start','CXfQI','eventUrl','logs','eCdQC','batchAndPostEvents','gRXpM','queue'];a128_0x58a2=function(){return _0x2b5418;};return a128_0x58a2();}const a128_0x552e10=a128_0x4b5a;function a128_0x4b5a(_0x403541,_0x1b45f8){const _0x58a2c9=a128_0x58a2();return a128_0x4b5a=function(_0x4b5a86,_0x3f6f10){_0x4b5a86=_0x4b5a86-0x1ac;let _0x3270f1=_0x58a2c9[_0x4b5a86];return _0x3270f1;},a128_0x4b5a(_0x403541,_0x1b45f8);}(function(_0xa5b14e,_0x2a3edd){const _0x34c7bc=a128_0x4b5a,_0x4949ee=_0xa5b14e();while(!![]){try{const _0x3fc7f4=parseInt(_0x34c7bc(0x1cc))/0x1+-parseInt(_0x34c7bc(0x1b8))/0x2+-parseInt(_0x34c7bc(0x1f7))/0x3*(parseInt(_0x34c7bc(0x1ba))/0x4)+-parseInt(_0x34c7bc(0x1f1))/0x5*(parseInt(_0x34c7bc(0x1f6))/0x6)+-parseInt(_0x34c7bc(0x1eb))/0x7+-parseInt(_0x34c7bc(0x1dd))/0x8*(-parseInt(_0x34c7bc(0x1c7))/0x9)+parseInt(_0x34c7bc(0x1b7))/0xa;if(_0x3fc7f4===_0x2a3edd)break;else _0x4949ee['push'](_0x4949ee['shift']());}catch(_0xc0e211){_0x4949ee['push'](_0x4949ee['shift']());}}}(a128_0x58a2,0xaf30f));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a128_0x552e10(0x1fe)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require('./utils'),{nestedKeyValue}=require(a128_0x552e10(0x217)),util=require(a128_0x552e10(0x1ae)),constants=require('../../bin/utils/constants');class RequestQueueHandler{static [a128_0x552e10(0x204)];[a128_0x552e10(0x1e8)]=0x0;constructor(){const _0x2c6d17=a128_0x552e10,_0x1e38d9={};_0x1e38d9['XcLQV']=_0x2c6d17(0x1d2),_0x1e38d9[_0x2c6d17(0x1ed)]='upload-attachments',_0x1e38d9[_0x2c6d17(0x20c)]=_0x2c6d17(0x1ac),_0x1e38d9[_0x2c6d17(0x207)]=_0x2c6d17(0x1c0),_0x1e38d9['Airng']='CBTSessionCreated',_0x1e38d9[_0x2c6d17(0x1e0)]=_0x2c6d17(0x1d6),_0x1e38d9[_0x2c6d17(0x1d8)]='TestRunSkipped',_0x1e38d9[_0x2c6d17(0x1af)]='HookRunFinished',_0x1e38d9[_0x2c6d17(0x1ce)]=_0x2c6d17(0x1b4),_0x1e38d9[_0x2c6d17(0x201)]=_0x2c6d17(0x1e3),_0x1e38d9[_0x2c6d17(0x209)]=_0x2c6d17(0x216);const _0x38f24=_0x1e38d9,_0x50cba6=_0x38f24['XcLQV']['split']('|');let _0x29ddae=0x0;while(!![]){switch(_0x50cba6[_0x29ddae++]){case'0':this[_0x2c6d17(0x212)]=[];continue;case'1':this[_0x2c6d17(0x1e4)]=_0x38f24[_0x2c6d17(0x1ed)];continue;case'2':this[_0x2c6d17(0x20d)]=_0x38f24[_0x2c6d17(0x20c)];continue;case'3':this[_0x2c6d17(0x1f8)]=null;continue;case'4':this[_0x2c6d17(0x21a)]=![];continue;case'5':this[_0x2c6d17(0x214)]=[_0x38f24[_0x2c6d17(0x207)],_0x38f24[_0x2c6d17(0x1bc)],_0x38f24[_0x2c6d17(0x1e0)],_0x38f24[_0x2c6d17(0x1d8)],_0x38f24[_0x2c6d17(0x1af)],_0x38f24[_0x2c6d17(0x1ce)],_0x38f24[_0x2c6d17(0x201)]];continue;case'6':this[_0x2c6d17(0x1b2)]=_0x38f24[_0x2c6d17(0x209)];continue;}break;}}static['getInstance'](){const _0x4437c5=a128_0x552e10;return!RequestQueueHandler[_0x4437c5(0x204)]&&(RequestQueueHandler[_0x4437c5(0x204)]=new RequestQueueHandler()),RequestQueueHandler[_0x4437c5(0x204)];}[a128_0x552e10(0x20b)]=()=>{const _0x2d2e61=a128_0x552e10;!this[_0x2d2e61(0x21a)]&&(this['started']=!![],this['startEventBatchPolling']());};[a128_0x552e10(0x1ad)]=_0x124415=>{const _0x20869e=a128_0x552e10,_0x1ff671={'eCdQC':function(_0x4c767e,_0x457166){return _0x4c767e===_0x457166;},'JVcMN':'TEST_SCREENSHOT','QjHvg':function(_0x4230e4,_0x17ef8a){return _0x4230e4>_0x17ef8a;},'vjlZd':_0x20869e(0x1e2),'aglIv':function(_0x51ed4f,_0x4e781b){return _0x51ed4f!==_0x4e781b;},'wfLPa':_0x20869e(0x1d6),'cOGJL':function(_0x5ec014,_0x18caf9){return _0x5ec014(_0x18caf9);},'EpOWr':_0x20869e(0x1c1)};if(this[_0x20869e(0x214)][_0x20869e(0x205)](_0x124415[_0x20869e(0x1df)])){if(_0x124415[_0x20869e(0x20e)]&&_0x124415[_0x20869e(0x20e)][0x0]&&_0x1ff671[_0x20869e(0x20f)](_0x124415[_0x20869e(0x20e)][0x0][_0x20869e(0x1cf)],_0x1ff671['JVcMN'])){const _0x26de17={};return _0x26de17[_0x20869e(0x1e7)]=!![],_0x26de17['proceedWithData']=[_0x124415],_0x26de17[_0x20869e(0x1fb)]=this[_0x20869e(0x1b2)],_0x26de17;}if(_0x124415[_0x20869e(0x20e)]&&_0x1ff671['QjHvg'](_0x124415[_0x20869e(0x20e)][_0x20869e(0x1fa)],0x0)&&_0x1ff671[_0x20869e(0x20f)](_0x124415[_0x20869e(0x20e)][0x0][_0x20869e(0x1cf)],_0x1ff671[_0x20869e(0x1c9)])&&_0x1ff671[_0x20869e(0x1e6)](_0x124415[_0x20869e(0x1df)],_0x1ff671[_0x20869e(0x1f0)])){const _0x5f4e9c={};return _0x5f4e9c['shouldProceed']=!![],_0x5f4e9c['proceedWithData']=[_0x124415],_0x5f4e9c['proceedWithUrl']=this[_0x20869e(0x1e4)],_0x5f4e9c;}this['queue'][_0x20869e(0x1be)](_0x124415);let _0x1a3d76=null;const _0x141b4b=this['shouldProceed']();_0x141b4b&&(_0x1ff671[_0x20869e(0x1fd)](trace,_0x1ff671['EpOWr']),_0x1a3d76=this[_0x20869e(0x212)][_0x20869e(0x20a)](0x0,BATCH_SIZE),this[_0x20869e(0x212)]['splice'](0x0,BATCH_SIZE),this['resetEventBatchPolling']());const _0xe7c556={};return _0xe7c556[_0x20869e(0x1e7)]=_0x141b4b,_0xe7c556[_0x20869e(0x203)]=_0x1a3d76,_0xe7c556['proceedWithUrl']=this[_0x20869e(0x20d)],_0xe7c556;}const _0x38f796={};return _0x38f796[_0x20869e(0x1e7)]=!![],_0x38f796;};[a128_0x552e10(0x202)]=async()=>{const _0x2c657a=a128_0x552e10,_0x241eb8={'WBdPk':_0x2c657a(0x1da),'YyrHU':function(_0x4c3deb,_0xd276c){return _0x4c3deb>_0xd276c;},'zkmbl':_0x2c657a(0x1f3),'gRXpM':function(_0x13bd56,_0x12dceb){return _0x13bd56>_0x12dceb;},'bqYvd':function(_0x280987,_0x589af1){return _0x280987(_0x589af1);}};await this[_0x2c657a(0x1b1)](),this['removeEventBatchPolling'](_0x241eb8['WBdPk']);while(_0x241eb8['YyrHU'](this['queue'][_0x2c657a(0x1fa)],0x0)){const _0x1cbe17=this[_0x2c657a(0x212)]['slice'](0x0,BATCH_SIZE);this['queue'][_0x2c657a(0x1b9)](0x0,BATCH_SIZE),await this[_0x2c657a(0x210)](this[_0x2c657a(0x20d)],_0x241eb8[_0x2c657a(0x1f9)],_0x1cbe17);}_0x241eb8[_0x2c657a(0x211)](this[_0x2c657a(0x1e8)],0x0)&&_0x241eb8[_0x2c657a(0x215)](debug,'Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20'+this[_0x2c657a(0x1e8)]);};[a128_0x552e10(0x210)]=async(_0x375566,_0x526c01,_0x2b9347)=>{const _0x315e2d=a128_0x552e10,_0x1c1e6a={'FXMQY':function(_0x37ed87,_0x574600){return _0x37ed87(_0x574600);},'OmQxw':_0x315e2d(0x1f4),'ZjOUW':function(_0x50eb23){return _0x50eb23();},'BbDia':function(_0x163b1b,_0x162a53,_0x467d8c,_0x3e82ed,_0x25af38){return _0x163b1b(_0x162a53,_0x467d8c,_0x3e82ed,_0x25af38);},'gXevq':'POST','LHqAE':function(_0x2295ea,_0x3521bf){return _0x2295ea(_0x3521bf);},'AdXDB':function(_0xb5148d,_0x45fb51){return _0xb5148d-_0x45fb51;},'Vdpmn':function(_0x1bd0c0,_0x4fd484){return _0x1bd0c0(_0x4fd484);},'mThVs':function(_0x1a6a27,_0x47eb9f){return _0x1a6a27(_0x47eb9f);},'GbHjb':function(_0x57a1e2,_0x66687e){return _0x57a1e2-_0x66687e;}};let _0x5e5443='';try{_0x5e5443=_0x2b9347[_0x315e2d(0x1c6)](_0x44aaf9=>'\x27'+_0x44aaf9[_0x315e2d(0x1df)]+'\x27:'+(nestedKeyValue(_0x44aaf9,[_0x315e2d(0x1b5),'uuid'])||nestedKeyValue(_0x44aaf9,[_0x315e2d(0x1d0),'uuid'])))[_0x315e2d(0x1bb)](','),_0x1c1e6a[_0x315e2d(0x1c3)](debug,'Processing\x20batch\x20events\x20for\x20'+_0x526c01+_0x315e2d(0x1bf)+Buffer[_0x315e2d(0x1c5)](util[_0x315e2d(0x1dc)]('%j',_0x2b9347),_0x1c1e6a[_0x315e2d(0x1cb)])+_0x315e2d(0x1ef)+_0x5e5443);}catch(_0x131bd1){_0x1c1e6a[_0x315e2d(0x1c3)](debug,'Exception\x20in\x20logging\x20batch\x20events\x20--\x20'+util['format'](_0x131bd1)+'}');}const _0x493524={'headers':_0x1c1e6a['ZjOUW'](getDefaultHeaders)};try{const _0x2e52e6=await _0x1c1e6a[_0x315e2d(0x1ea)](nodeRequest,_0x1c1e6a[_0x315e2d(0x1f2)],_0x375566,_0x2b9347,_0x493524);if(_0x2e52e6[_0x315e2d(0x1ca)]['error']){const _0x1f732c={};_0x1f732c[_0x315e2d(0x1ee)]=_0x2e52e6['data']['error'];throw _0x1f732c;}else _0x1c1e6a['LHqAE'](debug,_0x526c01+_0x315e2d(0x1d5)+_0x5e5443+_0x315e2d(0x1cd)+util[_0x315e2d(0x1dc)]('%j',_0x2e52e6[_0x315e2d(0x1ca)])),this[_0x315e2d(0x1e8)]=Math[_0x315e2d(0x1bd)](0x0,_0x1c1e6a['AdXDB'](this[_0x315e2d(0x1e8)],_0x2b9347['length']));}catch(_0x550c36){_0x550c36[_0x315e2d(0x1c2)]?_0x1c1e6a[_0x315e2d(0x1d1)](debug,_0x315e2d(0x1ff)+_0x526c01+_0x315e2d(0x1e5)+constants[_0x315e2d(0x208)]+'\x20:\x20'+_0x550c36[_0x315e2d(0x1c2)][_0x315e2d(0x1d3)]+'\x20'+_0x550c36[_0x315e2d(0x1c2)]['statusText']+'\x20'+util[_0x315e2d(0x1dc)]('%j',_0x550c36['response'])):_0x1c1e6a[_0x315e2d(0x1d4)](debug,_0x315e2d(0x1ff)+_0x526c01+_0x315e2d(0x1e5)+constants[_0x315e2d(0x208)]+_0x315e2d(0x1db)+(_0x550c36[_0x315e2d(0x1ee)]||_0x550c36)),this['pendingUploads']=Math['max'](0x0,_0x1c1e6a[_0x315e2d(0x1fc)](this[_0x315e2d(0x1e8)],_0x2b9347['length']));}};[a128_0x552e10(0x219)]=()=>{const _0x1d594a=a128_0x552e10,_0x3df89a={'vveow':function(_0x24c1c1,_0x1fca49){return _0x24c1c1>_0x1fca49;},'tXrKs':function(_0x4f9678,_0x5d99d1){return _0x4f9678(_0x5d99d1);},'KZRtJ':_0x1d594a(0x1b0),'YuEmo':function(_0x37b6fa,_0x318637,_0xfb921c){return _0x37b6fa(_0x318637,_0xfb921c);}};this[_0x1d594a(0x1f8)]=_0x3df89a[_0x1d594a(0x206)](setInterval,async()=>{const _0x4aeca5=_0x1d594a;if(_0x3df89a[_0x4aeca5(0x1c4)](this['queue'][_0x4aeca5(0x1fa)],0x0)){_0x3df89a['tXrKs'](trace,'Processing\x20events.\x20Queue\x20Length\x20-\x20'+this[_0x4aeca5(0x212)]['length']);const _0x2cb26a=this[_0x4aeca5(0x212)][_0x4aeca5(0x20a)](0x0,BATCH_SIZE);this[_0x4aeca5(0x212)][_0x4aeca5(0x1b9)](0x0,BATCH_SIZE),await this[_0x4aeca5(0x210)](this[_0x4aeca5(0x20d)],_0x3df89a[_0x4aeca5(0x1e1)],_0x2cb26a),_0x3df89a[_0x4aeca5(0x1de)](trace,_0x4aeca5(0x213)+this[_0x4aeca5(0x212)]['length']);}},BATCH_INTERVAL);};[a128_0x552e10(0x1d7)]=()=>{const _0x156b83=a128_0x552e10,_0x2d514f={};_0x2d514f[_0x156b83(0x218)]=_0x156b83(0x1d9);const _0x578160=_0x2d514f;this['removeEventBatchPolling'](_0x578160[_0x156b83(0x218)]),this[_0x156b83(0x219)]();};['removeEventBatchPolling']=_0x18f540=>{const _0x31fe82=a128_0x552e10,_0x4face3={'awRiI':function(_0x4c3209,_0x5cb5ed){return _0x4c3209(_0x5cb5ed);},'iNXnL':function(_0x30aba0,_0x42ca41){return _0x30aba0===_0x42ca41;},'dUcjS':'REMOVING'};this[_0x31fe82(0x1f8)]&&(_0x4face3[_0x31fe82(0x1b6)](clearInterval,this[_0x31fe82(0x1f8)]),this['pollEventBatchInterval']=null,_0x4face3[_0x31fe82(0x200)](_0x18f540,_0x4face3[_0x31fe82(0x1f5)])&&(this[_0x31fe82(0x21a)]=![]));};[a128_0x552e10(0x1e7)]=()=>{const _0x3b8f01=a128_0x552e10,_0x273bb4={};_0x273bb4[_0x3b8f01(0x1b3)]=function(_0x4453d3,_0x2194dd){return _0x4453d3>=_0x2194dd;};const _0x29107b=_0x273bb4;return _0x29107b[_0x3b8f01(0x1b3)](this[_0x3b8f01(0x212)][_0x3b8f01(0x1fa)],BATCH_SIZE);};async[a128_0x552e10(0x1b1)](_0xc53f2c=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x331d9c=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x2185d5=a128_0x552e10,_0xb79006={'PpKxn':function(_0x2e9968,_0x6183bd){return _0x2e9968<=_0x6183bd;},'VGFXY':function(_0x395b2,_0x301cdc){return _0x395b2(_0x301cdc);},'zZUkt':function(_0x5487a2,_0x1ee39e){return _0x5487a2-_0x1ee39e;}};if(_0xb79006[_0x2185d5(0x1c8)](this[_0x2185d5(0x1e8)],0x0)||_0xb79006[_0x2185d5(0x1c8)](_0xc53f2c,0x0))return;return await _0xb79006['VGFXY'](sleep,_0x331d9c),this[_0x2185d5(0x1b1)](_0xb79006[_0x2185d5(0x1ec)](_0xc53f2c,_0x331d9c));}}module[a128_0x552e10(0x1e9)]=RequestQueueHandler;