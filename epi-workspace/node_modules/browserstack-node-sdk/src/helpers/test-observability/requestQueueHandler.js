function a86_0x44bc(){const _0xcaf91=['data','started','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','rLBMn','POST','skLpS','YNNQM','uploadAttachmentUrl','slice','462943qLgPRm','zMlAo','./utils','format','PWSVd','BATCH_EVENT_TYPES','batchAndPostEvents','kind','Interval-Queue','JQbJz','ZFHRF','length','test_run','PDGQI','WBlGc','8388cFMqFl','pollEventBatchInterval','TestRunStarted','removeEventBatchPolling','add','RgKQw','max','map','MOzPw','split','splice','logs','IZgAL','ziAio','TEST_SCREENSHOT','uzwwU','raefS','PDyjF','hook_run','message','eSQRY','TEST_ATTACHMENT','2103661DvClVD','EXCEPTION\x20IN\x20','63430MjANYG','join','AsXgE','HyAen','error','eventUrl','byteLength','tzYCE','kHKcY','Shutdown-Queue','TestRunFinished','kMceY','Processing\x20batch\x20events\x20for\x20','screenshotEventUrl','DwLop','proceedWithData','utf8','LogCreated','Remaining\x20Queue\x20Length\x20-\x20','nVTzT','.\x20Request\x20Size\x20-\x20','queue','vJHfh','getInstance','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','pOgNw','MSRDp','proceedWithUrl','XZRjz','shouldProceed','pendingUploads','push','shutdown','resetEventBatchPolling','OXxMi','includes','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','cJSIR','BQgPh','instance','xUNOx','KPrIv','jbEyS','uuid','TestRunSkipped','yhCZx','response','2820306lgSioX','599064lyRulc','status','ZQART','REMOVING','statusText','\x20--\x20','startEventBatchPolling','uploadPending','pXKCz','204OURlAU','event_type','11938500uZvSTU','dYDeK','136TwylkL','CNbYJ','api/v1/batch','RESETTING','TFbJp','HookRunFinished','ckFoe','util','start','sUrSs','\x20bytes.\x20Events\x20are\x20','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','api/v1/screenshots','9andLnE'];a86_0x44bc=function(){return _0xcaf91;};return a86_0x44bc();}function a86_0x4915(_0x4c1aa3,_0x4e1c70){const _0x44bcb8=a86_0x44bc();return a86_0x4915=function(_0x49154d,_0x1236db){_0x49154d=_0x49154d-0x7d;let _0xf4eb20=_0x44bcb8[_0x49154d];return _0xf4eb20;},a86_0x4915(_0x4c1aa3,_0x4e1c70);}const a86_0x16190e=a86_0x4915;(function(_0x42a46e,_0x2fe2b1){const _0x39d841=a86_0x4915,_0x522959=_0x42a46e();while(!![]){try{const _0x8fc622=parseInt(_0x39d841(0xb6))/0x1+parseInt(_0x39d841(0xc5))/0x2*(-parseInt(_0x39d841(0x9b))/0x3)+-parseInt(_0x39d841(0x9f))/0x4*(parseInt(_0x39d841(0xdd))/0x5)+-parseInt(_0x39d841(0x91))/0x6+-parseInt(_0x39d841(0xdb))/0x7+-parseInt(_0x39d841(0x92))/0x8*(-parseInt(_0x39d841(0xac))/0x9)+parseInt(_0x39d841(0x9d))/0xa;if(_0x8fc622===_0x2fe2b1)break;else _0x522959['push'](_0x522959['shift']());}catch(_0x102dac){_0x522959['push'](_0x522959['shift']());}}}(a86_0x44bc,0x3bb6a));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require('./constants'),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a86_0x16190e(0xb8)),{nestedKeyValue}=require('../helper'),util=require(a86_0x16190e(0xa6));class RequestQueueHandler{static [a86_0x16190e(0x89)];[a86_0x16190e(0x80)]=0x0;constructor(){const _0xc7990c=a86_0x16190e,_0x554273={};_0x554273[_0xc7990c(0x7e)]='0|3|4|1|2|5|6',_0x554273['ziAio']=_0xc7990c(0xab),_0x554273[_0xc7990c(0xa8)]='upload-attachments',_0x554273[_0xc7990c(0xc4)]=_0xc7990c(0xa1),_0x554273['kHKcY']=_0xc7990c(0xee),_0x554273['RgKQw']='CBTSessionCreated',_0x554273['MOzPw']=_0xc7990c(0xe7),_0x554273[_0xc7990c(0x8c)]=_0xc7990c(0x8e),_0x554273[_0xc7990c(0x87)]=_0xc7990c(0xa4),_0x554273[_0xc7990c(0x8f)]=_0xc7990c(0xc7),_0x554273['tzYCE']='HookRunStarted';const _0x2c3854=_0x554273,_0x405d91=_0x2c3854[_0xc7990c(0x7e)][_0xc7990c(0xce)]('|');let _0x2159f6=0x0;while(!![]){switch(_0x405d91[_0x2159f6++]){case'0':this[_0xc7990c(0xf2)]=[];continue;case'1':this[_0xc7990c(0xea)]=_0x2c3854[_0xc7990c(0xd2)];continue;case'2':this[_0xc7990c(0xb4)]=_0x2c3854['sUrSs'];continue;case'3':this[_0xc7990c(0xae)]=![];continue;case'4':this['eventUrl']=_0x2c3854['WBlGc'];continue;case'5':this[_0xc7990c(0xbb)]=[_0x2c3854[_0xc7990c(0xe5)],_0x2c3854[_0xc7990c(0xca)],_0x2c3854[_0xc7990c(0xcd)],_0x2c3854[_0xc7990c(0x8c)],_0x2c3854[_0xc7990c(0x87)],_0x2c3854['yhCZx'],_0x2c3854[_0xc7990c(0xe4)]];continue;case'6':this[_0xc7990c(0xc6)]=null;continue;}break;}}static[a86_0x16190e(0xf4)](){const _0x11a813=a86_0x16190e;return!RequestQueueHandler[_0x11a813(0x89)]&&(RequestQueueHandler[_0x11a813(0x89)]=new RequestQueueHandler()),RequestQueueHandler[_0x11a813(0x89)];}[a86_0x16190e(0xa7)]=()=>{const _0x21a923=a86_0x16190e;!this[_0x21a923(0xae)]&&(this['started']=!![],this['startEventBatchPolling']());};[a86_0x16190e(0xc9)]=_0x52525b=>{const _0x5ee41c=a86_0x16190e,_0x2f458d={'zMlAo':function(_0x390508,_0xd67ece){return _0x390508===_0xd67ece;},'JQbJz':_0x5ee41c(0xd3),'aRipa':function(_0x2b0b53,_0x823e81){return _0x2b0b53>_0x823e81;},'ZQART':function(_0x3be11e,_0x24d913){return _0x3be11e===_0x24d913;},'CNbYJ':_0x5ee41c(0xda),'kMceY':function(_0x2add31,_0x367e6b){return _0x2add31!==_0x367e6b;},'KPrIv':_0x5ee41c(0xe7),'nVTzT':function(_0x10f3d5,_0x392636){return _0x10f3d5(_0x392636);},'YNNQM':_0x5ee41c(0x86)};if(this[_0x5ee41c(0xbb)][_0x5ee41c(0x85)](_0x52525b[_0x5ee41c(0x9c)])){if(_0x52525b[_0x5ee41c(0xd0)]&&_0x52525b['logs'][0x0]&&_0x2f458d[_0x5ee41c(0xb7)](_0x52525b[_0x5ee41c(0xd0)][0x0]['kind'],_0x2f458d[_0x5ee41c(0xbf)])){const _0x3ccb85={};return _0x3ccb85['shouldProceed']=!![],_0x3ccb85[_0x5ee41c(0xec)]=[_0x52525b],_0x3ccb85[_0x5ee41c(0x7d)]=this['screenshotEventUrl'],_0x3ccb85;}if(_0x52525b[_0x5ee41c(0xd0)]&&_0x2f458d['aRipa'](_0x52525b['logs'][_0x5ee41c(0xc1)],0x0)&&_0x2f458d[_0x5ee41c(0x94)](_0x52525b['logs'][0x0][_0x5ee41c(0xbd)],_0x2f458d[_0x5ee41c(0xa0)])&&_0x2f458d[_0x5ee41c(0xe8)](_0x52525b[_0x5ee41c(0x9c)],_0x2f458d[_0x5ee41c(0x8b)])){const _0x4c893a={};return _0x4c893a[_0x5ee41c(0x7f)]=!![],_0x4c893a[_0x5ee41c(0xec)]=[_0x52525b],_0x4c893a[_0x5ee41c(0x7d)]=this['uploadAttachmentUrl'],_0x4c893a;}this[_0x5ee41c(0xf2)][_0x5ee41c(0x81)](_0x52525b);let _0x5f4b66=null;const _0x1006e7=this[_0x5ee41c(0x7f)]();_0x1006e7&&(_0x2f458d[_0x5ee41c(0xf0)](trace,_0x2f458d[_0x5ee41c(0xb3)]),_0x5f4b66=this[_0x5ee41c(0xf2)]['slice'](0x0,BATCH_SIZE),this[_0x5ee41c(0xf2)]['splice'](0x0,BATCH_SIZE),this[_0x5ee41c(0x83)]());const _0x562dae={};return _0x562dae[_0x5ee41c(0x7f)]=_0x1006e7,_0x562dae[_0x5ee41c(0xec)]=_0x5f4b66,_0x562dae[_0x5ee41c(0x7d)]=this[_0x5ee41c(0xe2)],_0x562dae;}const _0x317f3a={};return _0x317f3a[_0x5ee41c(0x7f)]=!![],_0x317f3a;};[a86_0x16190e(0x82)]=async()=>{const _0x5da6d8=a86_0x16190e,_0x44f4ad={'vJHfh':_0x5da6d8(0x95),'MSRDp':function(_0x6f4296,_0x4e853e){return _0x6f4296>_0x4e853e;},'xUNOx':_0x5da6d8(0xe6),'eSQRY':function(_0x5afa7a,_0x49d1a2){return _0x5afa7a>_0x49d1a2;},'ZFHRF':function(_0x163457,_0xa26397){return _0x163457(_0xa26397);}};await this[_0x5da6d8(0x99)](),this[_0x5da6d8(0xc8)](_0x44f4ad[_0x5da6d8(0xf3)]);while(_0x44f4ad[_0x5da6d8(0xf7)](this[_0x5da6d8(0xf2)][_0x5da6d8(0xc1)],0x0)){const _0x46439c=this[_0x5da6d8(0xf2)][_0x5da6d8(0xb5)](0x0,BATCH_SIZE);this[_0x5da6d8(0xf2)][_0x5da6d8(0xcf)](0x0,BATCH_SIZE),await this[_0x5da6d8(0xbc)](this[_0x5da6d8(0xe2)],_0x44f4ad[_0x5da6d8(0x8a)],_0x46439c);}_0x44f4ad[_0x5da6d8(0xd9)](this[_0x5da6d8(0x80)],0x0)&&_0x44f4ad[_0x5da6d8(0xc0)](debug,_0x5da6d8(0xaf)+this[_0x5da6d8(0x80)]);};[a86_0x16190e(0xbc)]=async(_0x68debd,_0x4da14a,_0x297adf)=>{const _0x1e2a63=a86_0x16190e,_0x3c22c3={'OXxMi':function(_0x445426,_0x4a4061){return _0x445426(_0x4a4061);},'dYDeK':_0x1e2a63(0xed),'iPQaA':function(_0x1c8762){return _0x1c8762();},'PDyjF':function(_0x4de5f1,_0x45187d,_0xd1957e,_0x436f9b,_0x36afb5){return _0x4de5f1(_0x45187d,_0xd1957e,_0x436f9b,_0x36afb5);},'DwLop':_0x1e2a63(0xb1),'pXKCz':function(_0x2abd94,_0x555197){return _0x2abd94(_0x555197);},'rLBMn':function(_0xf2685,_0x5d4215){return _0xf2685-_0x5d4215;},'PDGQI':function(_0x401a97,_0x3a767b){return _0x401a97(_0x3a767b);},'pOgNw':function(_0x2f0f6b,_0x58f693){return _0x2f0f6b(_0x58f693);}};let _0x562e46='';try{_0x562e46=_0x297adf[_0x1e2a63(0xcc)](_0x5bd65e=>'\x27'+_0x5bd65e[_0x1e2a63(0x9c)]+'\x27:'+(nestedKeyValue(_0x5bd65e,[_0x1e2a63(0xc2),_0x1e2a63(0x8d)])||nestedKeyValue(_0x5bd65e,[_0x1e2a63(0xd7),'uuid'])))[_0x1e2a63(0xde)](','),_0x3c22c3[_0x1e2a63(0x84)](debug,_0x1e2a63(0xe9)+_0x4da14a+_0x1e2a63(0xf1)+Buffer[_0x1e2a63(0xe3)](util[_0x1e2a63(0xb9)]('%j',_0x297adf),_0x3c22c3[_0x1e2a63(0x9e)])+_0x1e2a63(0xa9)+_0x562e46);}catch(_0x1067ea){_0x3c22c3[_0x1e2a63(0x84)](debug,_0x1e2a63(0xaa)+util['format'](_0x1067ea)+'}');}const _0x1d4cbc={'headers':_0x3c22c3['iPQaA'](getDefaultHeaders)};try{const _0x116cf9=await _0x3c22c3[_0x1e2a63(0xd6)](nodeRequest,_0x3c22c3[_0x1e2a63(0xeb)],_0x68debd,_0x297adf,_0x1d4cbc);if(_0x116cf9['data'][_0x1e2a63(0xe1)]){const _0x31e4d5={};_0x31e4d5['message']=_0x116cf9[_0x1e2a63(0xad)][_0x1e2a63(0xe1)];throw _0x31e4d5;}else _0x3c22c3[_0x1e2a63(0x9a)](debug,_0x4da14a+'\x20event\x20successful\x20for\x20events\x20'+_0x562e46+_0x1e2a63(0x97)+util[_0x1e2a63(0xb9)]('%j',_0x116cf9[_0x1e2a63(0xad)])),this[_0x1e2a63(0x80)]=Math[_0x1e2a63(0xcb)](0x0,_0x3c22c3[_0x1e2a63(0xb0)](this[_0x1e2a63(0x80)],_0x297adf['length']));}catch(_0x14e505){_0x14e505[_0x1e2a63(0x90)]?_0x3c22c3[_0x1e2a63(0xc3)](debug,_0x1e2a63(0xdc)+_0x4da14a+_0x1e2a63(0xf5)+_0x14e505[_0x1e2a63(0x90)][_0x1e2a63(0x93)]+'\x20'+_0x14e505['response'][_0x1e2a63(0x96)]+'\x20'+util[_0x1e2a63(0xb9)]('%j',_0x14e505['response'])):_0x3c22c3[_0x1e2a63(0xf6)](debug,'EXCEPTION\x20IN\x20'+_0x4da14a+'\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20'+(_0x14e505[_0x1e2a63(0xd8)]||_0x14e505)),this[_0x1e2a63(0x80)]=Math['max'](0x0,_0x3c22c3[_0x1e2a63(0xb0)](this[_0x1e2a63(0x80)],_0x297adf[_0x1e2a63(0xc1)]));}};[a86_0x16190e(0x98)]=()=>{const _0x2977b8=a86_0x16190e,_0x582e33={'zmUps':function(_0x514aeb,_0x5c2a3c){return _0x514aeb>_0x5c2a3c;},'IZgAL':function(_0x383aad,_0x2de463){return _0x383aad(_0x2de463);},'mkBUq':_0x2977b8(0xbe),'raefS':function(_0x42344b,_0x3318b9){return _0x42344b(_0x3318b9);},'AsXgE':function(_0x10c4e0,_0x337145,_0x3ea92f){return _0x10c4e0(_0x337145,_0x3ea92f);}};this[_0x2977b8(0xc6)]=_0x582e33[_0x2977b8(0xdf)](setInterval,async()=>{const _0x353616=_0x2977b8;if(_0x582e33['zmUps'](this[_0x353616(0xf2)][_0x353616(0xc1)],0x0)){_0x582e33[_0x353616(0xd1)](trace,'Processing\x20events.\x20Queue\x20Length\x20-\x20'+this[_0x353616(0xf2)][_0x353616(0xc1)]);const _0x2b3bde=this['queue'][_0x353616(0xb5)](0x0,BATCH_SIZE);this['queue'][_0x353616(0xcf)](0x0,BATCH_SIZE),await this[_0x353616(0xbc)](this[_0x353616(0xe2)],_0x582e33['mkBUq'],_0x2b3bde),_0x582e33[_0x353616(0xd5)](trace,_0x353616(0xef)+this['queue']['length']);}},BATCH_INTERVAL);};[a86_0x16190e(0x83)]=()=>{const _0x3560b1=a86_0x16190e,_0xb486ac={};_0xb486ac[_0x3560b1(0xa3)]=_0x3560b1(0xa2);const _0x35bea3=_0xb486ac;this[_0x3560b1(0xc8)](_0x35bea3['TFbJp']),this['startEventBatchPolling']();};[a86_0x16190e(0xc8)]=_0x30de94=>{const _0xb035b4=a86_0x16190e,_0x1dafa4={'ckFoe':function(_0x349d99,_0x37f2c8){return _0x349d99(_0x37f2c8);},'PWSVd':function(_0x4ee9db,_0x17e55e){return _0x4ee9db===_0x17e55e;},'XmDxQ':_0xb035b4(0x95)};this[_0xb035b4(0xc6)]&&(_0x1dafa4[_0xb035b4(0xa5)](clearInterval,this['pollEventBatchInterval']),this[_0xb035b4(0xc6)]=null,_0x1dafa4[_0xb035b4(0xba)](_0x30de94,_0x1dafa4['XmDxQ'])&&(this[_0xb035b4(0xae)]=![]));};[a86_0x16190e(0x7f)]=()=>{const _0x2fc65a=a86_0x16190e,_0x2e9bab={};_0x2e9bab[_0x2fc65a(0xe0)]=function(_0x5c6e5c,_0x42179e){return _0x5c6e5c>=_0x42179e;};const _0x150bbd=_0x2e9bab;return _0x150bbd[_0x2fc65a(0xe0)](this[_0x2fc65a(0xf2)]['length'],BATCH_SIZE);};async[a86_0x16190e(0x99)](_0x259853=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x55a971=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x349533=a86_0x16190e,_0x4db54d={'BQgPh':function(_0x3d230e,_0x5077b6){return _0x3d230e<=_0x5077b6;},'skLpS':function(_0x576f12,_0x11fa92){return _0x576f12(_0x11fa92);},'uzwwU':function(_0x5eae64,_0x46c258){return _0x5eae64-_0x46c258;}};if(_0x4db54d[_0x349533(0x88)](this['pendingUploads'],0x0)||_0x4db54d[_0x349533(0x88)](_0x259853,0x0))return;return await _0x4db54d[_0x349533(0xb2)](sleep,_0x55a971),this[_0x349533(0x99)](_0x4db54d[_0x349533(0xd4)](_0x259853,_0x55a971));}}module['exports']=RequestQueueHandler;