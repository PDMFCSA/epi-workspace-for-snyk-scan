const a128_0x4ecd0d=a128_0x283f;(function(_0x358ad7,_0x4feef9){const _0x731684=a128_0x283f,_0x16da63=_0x358ad7();while(!![]){try{const _0x299ef7=-parseInt(_0x731684(0xec))/0x1*(-parseInt(_0x731684(0x129))/0x2)+-parseInt(_0x731684(0x122))/0x3+-parseInt(_0x731684(0xd2))/0x4+-parseInt(_0x731684(0x11f))/0x5+parseInt(_0x731684(0x139))/0x6+parseInt(_0x731684(0x124))/0x7+-parseInt(_0x731684(0x107))/0x8*(-parseInt(_0x731684(0xc5))/0x9);if(_0x299ef7===_0x4feef9)break;else _0x16da63['push'](_0x16da63['shift']());}catch(_0x482e10){_0x16da63['push'](_0x16da63['shift']());}}}(a128_0x7b31,0xb72a8));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a128_0x4ecd0d(0x116)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a128_0x4ecd0d(0xef)),{nestedKeyValue}=require(a128_0x4ecd0d(0xfd)),util=require(a128_0x4ecd0d(0x11a)),constants=require(a128_0x4ecd0d(0xfa));function a128_0x283f(_0x667c76,_0x16194a){const _0x7b3181=a128_0x7b31();return a128_0x283f=function(_0x283f60,_0x57b4bb){_0x283f60=_0x283f60-0xc3;let _0x7abea0=_0x7b3181[_0x283f60];return _0x7abea0;},a128_0x283f(_0x667c76,_0x16194a);}function a128_0x7b31(){const _0x15acb7=['splice','Processing\x20events.\x20Queue\x20Length\x20-\x20','nkFQw','resetEventBatchPolling','TEST_ATTACHMENT','exports','\x20event\x20successful\x20for\x20events\x20','add','npFXm','response','removeEventBatchPolling','mAePj','4715586xzCiwD','uploadAttachmentUrl','pollEventBatchInterval','push','5402043KjwpwF','yExch','\x20bytes.\x20Events\x20are\x20','nypbw','start','ahlfl','UPtAe','api/v1/screenshots','utf8','\x20--\x20','BPobV','byteLength','.\x20Request\x20Size\x20-\x20','2040672SgJjwm','BoGMc','UQWxy','aMLzc','\x20REQUEST\x20TO\x20','format','startEventBatchPolling','Cdeqv','message','JyjQI','slice','pendingUploads','batchAndPostEvents','LogCreated','coQVJ','viawf','EXCEPTION\x20IN\x20','Remaining\x20Queue\x20Length\x20-\x20','ykALd','TEST_REPORTING_ANALYTICS','upVxo','shouldProceed','qJzIA','ATHJQ','FybiK','status','40POGUPA','join','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','./utils','xzSzc','CBTSessionCreated','upload-attachments','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','VskCD','proceedWithData','started','kind','EgWgT','kPqhl','../../bin/utils/constants','WggGm','TestRunSkipped','../helper','Shutdown-Queue','Swjyy','XeHCL','0|2|4|6|3|1|5','instance','eventUrl','pyXOb','TvQUa','max','8gaqltH','queue','HAACN','TEST_SCREENSHOT','event_type','statusText','BATCH_EVENT_TYPES','length','cBDBv','VghqC','QYdIe','FIDaO','fgDFp','sVGAP','Processing\x20batch\x20events\x20for\x20','./constants','proceedWithUrl','includes','test_run','util','hook_run','shutdown','uploadPending','logs','2569090ZylaiM','screenshotEventUrl','\x20:\x20','1593882XvUHVm','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','3355030NzBuZu','HookRunFinished','HookRunStarted','error','QSidt','22004kEwaBD','RESETTING','TestRunFinished','tSAqv'];a128_0x7b31=function(){return _0x15acb7;};return a128_0x7b31();}class RequestQueueHandler{static ['instance'];[a128_0x4ecd0d(0xdd)]=0x0;constructor(){const _0x8a90b7=a128_0x4ecd0d,_0x2e5cb4={};_0x2e5cb4[_0x8a90b7(0xd4)]=_0x8a90b7(0x101),_0x2e5cb4[_0x8a90b7(0xea)]=_0x8a90b7(0xdf),_0x2e5cb4[_0x8a90b7(0x110)]=_0x8a90b7(0xf1),_0x2e5cb4[_0x8a90b7(0x104)]=_0x8a90b7(0x12b),_0x2e5cb4['ATHJQ']=_0x8a90b7(0xfc),_0x2e5cb4[_0x8a90b7(0x128)]=_0x8a90b7(0x125),_0x2e5cb4[_0x8a90b7(0xdb)]='TestRunStarted',_0x2e5cb4[_0x8a90b7(0xff)]=_0x8a90b7(0x126),_0x2e5cb4[_0x8a90b7(0x12c)]=_0x8a90b7(0xf2),_0x2e5cb4[_0x8a90b7(0x111)]='api/v1/batch',_0x2e5cb4['ahlfl']=_0x8a90b7(0xcc);const _0x213c4f=_0x2e5cb4,_0x1ba857=_0x213c4f[_0x8a90b7(0xd4)]['split']('|');let _0x52a0ff=0x0;while(!![]){switch(_0x1ba857[_0x52a0ff++]){case'0':this[_0x8a90b7(0x108)]=[];continue;case'1':this[_0x8a90b7(0x10d)]=[_0x213c4f[_0x8a90b7(0xea)],_0x213c4f[_0x8a90b7(0x110)],_0x213c4f[_0x8a90b7(0x104)],_0x213c4f[_0x8a90b7(0xe9)],_0x213c4f[_0x8a90b7(0x128)],_0x213c4f[_0x8a90b7(0xdb)],_0x213c4f[_0x8a90b7(0xff)]];continue;case'2':this[_0x8a90b7(0xf6)]=![];continue;case'3':this[_0x8a90b7(0x13a)]=_0x213c4f[_0x8a90b7(0x12c)];continue;case'4':this[_0x8a90b7(0x103)]=_0x213c4f['QYdIe'];continue;case'5':this[_0x8a90b7(0xc3)]=null;continue;case'6':this['screenshotEventUrl']=_0x213c4f[_0x8a90b7(0xca)];continue;}break;}}static['getInstance'](){const _0x4e90c2=a128_0x4ecd0d;return!RequestQueueHandler[_0x4e90c2(0x102)]&&(RequestQueueHandler[_0x4e90c2(0x102)]=new RequestQueueHandler()),RequestQueueHandler[_0x4e90c2(0x102)];}[a128_0x4ecd0d(0xc9)]=()=>{const _0x11bb87=a128_0x4ecd0d;!this['started']&&(this[_0x11bb87(0xf6)]=!![],this[_0x11bb87(0xd8)]());};[a128_0x4ecd0d(0x134)]=_0x7c2bad=>{const _0x29eb7a=a128_0x4ecd0d,_0x248335={'RVSUb':function(_0x387dfb,_0xbe986f){return _0x387dfb===_0xbe986f;},'WggGm':_0x29eb7a(0x10a),'viawf':function(_0x1eed3e,_0x448194){return _0x1eed3e>_0x448194;},'upVxo':function(_0x3d89b5,_0x5d84b7){return _0x3d89b5===_0x5d84b7;},'nypbw':_0x29eb7a(0x131),'EgWgT':function(_0x538b12,_0x2bbf5d){return _0x538b12!==_0x2bbf5d;},'sVGAP':'TestRunFinished','HAACN':function(_0x25b336,_0x57019c){return _0x25b336(_0x57019c);},'mAePj':_0x29eb7a(0x123)};if(this[_0x29eb7a(0x10d)][_0x29eb7a(0x118)](_0x7c2bad[_0x29eb7a(0x10b)])){if(_0x7c2bad[_0x29eb7a(0x11e)]&&_0x7c2bad[_0x29eb7a(0x11e)][0x0]&&_0x248335['RVSUb'](_0x7c2bad[_0x29eb7a(0x11e)][0x0][_0x29eb7a(0xf7)],_0x248335[_0x29eb7a(0xfb)])){const _0x13b101={};return _0x13b101[_0x29eb7a(0xe7)]=!![],_0x13b101[_0x29eb7a(0xf5)]=[_0x7c2bad],_0x13b101[_0x29eb7a(0x117)]=this[_0x29eb7a(0x120)],_0x13b101;}if(_0x7c2bad['logs']&&_0x248335[_0x29eb7a(0xe1)](_0x7c2bad[_0x29eb7a(0x11e)]['length'],0x0)&&_0x248335[_0x29eb7a(0xe6)](_0x7c2bad['logs'][0x0]['kind'],_0x248335[_0x29eb7a(0xc8)])&&_0x248335[_0x29eb7a(0xf8)](_0x7c2bad[_0x29eb7a(0x10b)],_0x248335[_0x29eb7a(0x114)])){const _0x1f1d06={};return _0x1f1d06[_0x29eb7a(0xe7)]=!![],_0x1f1d06[_0x29eb7a(0xf5)]=[_0x7c2bad],_0x1f1d06[_0x29eb7a(0x117)]=this['uploadAttachmentUrl'],_0x1f1d06;}this[_0x29eb7a(0x108)][_0x29eb7a(0xc4)](_0x7c2bad);let _0x208be9=null;const _0x33fa95=this[_0x29eb7a(0xe7)]();_0x33fa95&&(_0x248335[_0x29eb7a(0x109)](trace,_0x248335[_0x29eb7a(0x138)]),_0x208be9=this[_0x29eb7a(0x108)][_0x29eb7a(0xdc)](0x0,BATCH_SIZE),this[_0x29eb7a(0x108)][_0x29eb7a(0x12d)](0x0,BATCH_SIZE),this[_0x29eb7a(0x130)]());const _0x178207={};return _0x178207[_0x29eb7a(0xe7)]=_0x33fa95,_0x178207[_0x29eb7a(0xf5)]=_0x208be9,_0x178207[_0x29eb7a(0x117)]=this['eventUrl'],_0x178207;}const _0xfc7d38={};return _0xfc7d38[_0x29eb7a(0xe7)]=!![],_0xfc7d38;};[a128_0x4ecd0d(0x11c)]=async()=>{const _0x13e411=a128_0x4ecd0d,_0x4d3825={'FIDaO':'REMOVING','VskCD':function(_0x28004c,_0x1cfe8c){return _0x28004c>_0x1cfe8c;},'TvQUa':_0x13e411(0xfe),'BPobV':function(_0x18179a,_0x17ed15){return _0x18179a>_0x17ed15;},'yExch':function(_0x5de656,_0x50c2b7){return _0x5de656(_0x50c2b7);}};await this['uploadPending'](),this[_0x13e411(0x137)](_0x4d3825[_0x13e411(0x112)]);while(_0x4d3825[_0x13e411(0xf4)](this['queue']['length'],0x0)){const _0x169fe1=this[_0x13e411(0x108)][_0x13e411(0xdc)](0x0,BATCH_SIZE);this[_0x13e411(0x108)][_0x13e411(0x12d)](0x0,BATCH_SIZE),await this[_0x13e411(0xde)](this[_0x13e411(0x103)],_0x4d3825[_0x13e411(0x105)],_0x169fe1);}_0x4d3825[_0x13e411(0xcf)](this[_0x13e411(0xdd)],0x0)&&_0x4d3825[_0x13e411(0xc6)](debug,_0x13e411(0xf3)+this[_0x13e411(0xdd)]);};[a128_0x4ecd0d(0xde)]=async(_0x4c798b,_0x30882c,_0x33cb99)=>{const _0x22df17=a128_0x4ecd0d,_0x23c8eb={'nkFQw':function(_0x2a1285,_0x3e6bfc){return _0x2a1285(_0x3e6bfc);},'BoGMc':_0x22df17(0xcd),'Cdeqv':function(_0x543eff,_0x343343){return _0x543eff(_0x343343);},'aMLzc':function(_0x26398f){return _0x26398f();},'kPqhl':function(_0x330c50,_0x20112d,_0x2303ca,_0x3827da,_0x3dd49a){return _0x330c50(_0x20112d,_0x2303ca,_0x3827da,_0x3dd49a);},'qJzIA':'POST','SojUM':function(_0x21d3f3,_0x297c9f){return _0x21d3f3-_0x297c9f;},'sOSMa':function(_0xeb952b,_0x1d8fd2){return _0xeb952b(_0x1d8fd2);},'IZbvT':function(_0x2ada04,_0x3b0ed3){return _0x2ada04-_0x3b0ed3;}};let _0x4210c1='';try{_0x4210c1=_0x33cb99['map'](_0x5b330e=>'\x27'+_0x5b330e['event_type']+'\x27:'+(nestedKeyValue(_0x5b330e,[_0x22df17(0x119),'uuid'])||nestedKeyValue(_0x5b330e,[_0x22df17(0x11b),'uuid'])))[_0x22df17(0xed)](','),_0x23c8eb[_0x22df17(0x12f)](debug,_0x22df17(0x115)+_0x30882c+_0x22df17(0xd1)+Buffer[_0x22df17(0xd0)](util[_0x22df17(0xd7)]('%j',_0x33cb99),_0x23c8eb[_0x22df17(0xd3)])+_0x22df17(0xc7)+_0x4210c1);}catch(_0xd623ce){_0x23c8eb['Cdeqv'](debug,_0x22df17(0xee)+util[_0x22df17(0xd7)](_0xd623ce)+'}');}const _0x3ff7ca={'headers':_0x23c8eb[_0x22df17(0xd5)](getDefaultHeaders)};try{const _0x4e45b1=await _0x23c8eb[_0x22df17(0xf9)](nodeRequest,_0x23c8eb[_0x22df17(0xe8)],_0x4c798b,_0x33cb99,_0x3ff7ca);if(_0x4e45b1['data'][_0x22df17(0x127)]){const _0x5f62ed={};_0x5f62ed[_0x22df17(0xda)]=_0x4e45b1['data'][_0x22df17(0x127)];throw _0x5f62ed;}else _0x23c8eb[_0x22df17(0xd9)](debug,_0x30882c+_0x22df17(0x133)+_0x4210c1+_0x22df17(0xce)+util[_0x22df17(0xd7)]('%j',_0x4e45b1['data'])),this['pendingUploads']=Math['max'](0x0,_0x23c8eb['SojUM'](this['pendingUploads'],_0x33cb99['length']));}catch(_0x3c16ea){_0x3c16ea[_0x22df17(0x136)]?_0x23c8eb['Cdeqv'](debug,'EXCEPTION\x20IN\x20'+_0x30882c+_0x22df17(0xd6)+constants['TEST_REPORTING_ANALYTICS']+_0x22df17(0x121)+_0x3c16ea[_0x22df17(0x136)][_0x22df17(0xeb)]+'\x20'+_0x3c16ea[_0x22df17(0x136)][_0x22df17(0x10c)]+'\x20'+util[_0x22df17(0xd7)]('%j',_0x3c16ea[_0x22df17(0x136)])):_0x23c8eb['sOSMa'](debug,_0x22df17(0xe2)+_0x30882c+_0x22df17(0xd6)+constants[_0x22df17(0xe5)]+_0x22df17(0x121)+(_0x3c16ea['message']||_0x3c16ea)),this[_0x22df17(0xdd)]=Math[_0x22df17(0x106)](0x0,_0x23c8eb['IZbvT'](this[_0x22df17(0xdd)],_0x33cb99[_0x22df17(0x10e)]));}};[a128_0x4ecd0d(0xd8)]=()=>{const _0x309939=a128_0x4ecd0d,_0xa21466={'UPtAe':function(_0x2e02f5,_0x562bb5){return _0x2e02f5>_0x562bb5;},'cBDBv':function(_0x508669,_0x49af39){return _0x508669(_0x49af39);},'ekHUT':'Interval-Queue','Fgvql':function(_0x132a1b,_0x57f3d6){return _0x132a1b(_0x57f3d6);},'GEYHk':function(_0xbb6882,_0xe371e4,_0x144021){return _0xbb6882(_0xe371e4,_0x144021);}};this[_0x309939(0xc3)]=_0xa21466['GEYHk'](setInterval,async()=>{const _0x1759fc=_0x309939;if(_0xa21466[_0x1759fc(0xcb)](this[_0x1759fc(0x108)][_0x1759fc(0x10e)],0x0)){_0xa21466[_0x1759fc(0x10f)](trace,_0x1759fc(0x12e)+this[_0x1759fc(0x108)]['length']);const _0x310622=this[_0x1759fc(0x108)][_0x1759fc(0xdc)](0x0,BATCH_SIZE);this[_0x1759fc(0x108)]['splice'](0x0,BATCH_SIZE),await this[_0x1759fc(0xde)](this['eventUrl'],_0xa21466['ekHUT'],_0x310622),_0xa21466['Fgvql'](trace,_0x1759fc(0xe3)+this[_0x1759fc(0x108)]['length']);}},BATCH_INTERVAL);};[a128_0x4ecd0d(0x130)]=()=>{const _0x8f9ea8=a128_0x4ecd0d,_0x3e26cc={};_0x3e26cc[_0x8f9ea8(0xe4)]=_0x8f9ea8(0x12a);const _0x54e6fd=_0x3e26cc;this[_0x8f9ea8(0x137)](_0x54e6fd['ykALd']),this[_0x8f9ea8(0xd8)]();};[a128_0x4ecd0d(0x137)]=_0x4465cd=>{const _0x27fb63=a128_0x4ecd0d,_0x541fd4={'QUAtl':function(_0x12a1e0,_0x40a818){return _0x12a1e0(_0x40a818);},'XeHCL':function(_0x1f1ba6,_0x307d9a){return _0x1f1ba6===_0x307d9a;},'npFXm':'REMOVING'};this[_0x27fb63(0xc3)]&&(_0x541fd4['QUAtl'](clearInterval,this[_0x27fb63(0xc3)]),this[_0x27fb63(0xc3)]=null,_0x541fd4[_0x27fb63(0x100)](_0x4465cd,_0x541fd4[_0x27fb63(0x135)])&&(this[_0x27fb63(0xf6)]=![]));};[a128_0x4ecd0d(0xe7)]=()=>{const _0x312ac4=a128_0x4ecd0d,_0x3c64cd={};_0x3c64cd[_0x312ac4(0xf0)]=function(_0x1a794e,_0xf4e789){return _0x1a794e>=_0xf4e789;};const _0x36a474=_0x3c64cd;return _0x36a474[_0x312ac4(0xf0)](this[_0x312ac4(0x108)]['length'],BATCH_SIZE);};async[a128_0x4ecd0d(0x11d)](_0x1c24b5=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x492f90=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x493a24=a128_0x4ecd0d,_0x128ff5={'coQVJ':function(_0x10e013,_0x1d586c){return _0x10e013<=_0x1d586c;},'bUPIC':function(_0xf583c,_0x472901){return _0xf583c<=_0x472901;},'fgDFp':function(_0x417858,_0x12859c){return _0x417858(_0x12859c);},'btfyr':function(_0x4b5500,_0x23288c){return _0x4b5500-_0x23288c;}};if(_0x128ff5[_0x493a24(0xe0)](this[_0x493a24(0xdd)],0x0)||_0x128ff5['bUPIC'](_0x1c24b5,0x0))return;return await _0x128ff5[_0x493a24(0x113)](sleep,_0x492f90),this[_0x493a24(0x11d)](_0x128ff5['btfyr'](_0x1c24b5,_0x492f90));}}module[a128_0x4ecd0d(0x132)]=RequestQueueHandler;