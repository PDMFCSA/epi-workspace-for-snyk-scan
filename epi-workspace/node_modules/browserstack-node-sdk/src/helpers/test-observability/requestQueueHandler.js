const a115_0x1eb7f0=a115_0x314e;function a115_0x314e(_0x17b537,_0x5a93bf){const _0x1314bc=a115_0x1314();return a115_0x314e=function(_0x314e38,_0x27f510){_0x314e38=_0x314e38-0x16c;let _0xee1e7c=_0x1314bc[_0x314e38];return _0xee1e7c;},a115_0x314e(_0x17b537,_0x5a93bf);}(function(_0x4daf15,_0x27cd6c){const _0x1e051e=a115_0x314e,_0x46c7ba=_0x4daf15();while(!![]){try{const _0x451cb4=parseInt(_0x1e051e(0x1dc))/0x1*(-parseInt(_0x1e051e(0x1cf))/0x2)+parseInt(_0x1e051e(0x1a5))/0x3*(-parseInt(_0x1e051e(0x18e))/0x4)+parseInt(_0x1e051e(0x197))/0x5*(parseInt(_0x1e051e(0x1a3))/0x6)+parseInt(_0x1e051e(0x187))/0x7*(-parseInt(_0x1e051e(0x19f))/0x8)+-parseInt(_0x1e051e(0x1b4))/0x9+parseInt(_0x1e051e(0x16d))/0xa*(parseInt(_0x1e051e(0x17a))/0xb)+parseInt(_0x1e051e(0x17e))/0xc;if(_0x451cb4===_0x27cd6c)break;else _0x46c7ba['push'](_0x46c7ba['shift']());}catch(_0x4d6c45){_0x46c7ba['push'](_0x46c7ba['shift']());}}}(a115_0x1314,0x79099));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a115_0x1eb7f0(0x1c2)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a115_0x1eb7f0(0x1ae)),{nestedKeyValue}=require(a115_0x1eb7f0(0x1a4)),util=require('util');function a115_0x1314(){const _0x38ccc7=['format','pendingUploads','JPKqq','message','doSkT','egmvc','AMcKL','response','695395ybohRP','CDGWy','hook_run','iBElE','ilJYd','BjWjY','statusText','batchAndPostEvents','16WQVEuF','pollEventBatchInterval','xTXni','TbdDM','36tmyppj','../helper','1845477WoAHuE','Processing\x20events.\x20Queue\x20Length\x20-\x20','NNvVy','kXINc','map','screenshotEventUrl','xNbou','HookRunFinished','startEventBatchPolling','./utils','uuid','eventUrl','gNuoB','BATCH_EVENT_TYPES','api/v1/screenshots','6284052xqWLUn','logs','TEST_ATTACHMENT','data','vLKHk','EXCEPTION\x20IN\x20','oVVdo','TestRunSkipped','resetEventBatchPolling','byteLength','splice','TEST_SCREENSHOT','Processing\x20batch\x20events\x20for\x20','ZTKIx','./constants','event_type','proceedWithData','ZWmza','proceedWithUrl','mSJmH','max','RIsam','length','YQjKH','Interval-Queue','JWoxH','UYuaV','1020242CUNjaC','ZZfRY','QmMJB','LYQZN','\x20event\x20successful\x20for\x20events\x20','add','uploadPending','Iweis','exports','\x20--\x20','JxqeR','RQykY','started','1dcwpqb','slice','ZpWSa','instance','611470KNGqNS','UALqg','uploadAttachmentUrl','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','DCyla','CBTSessionCreated','removeEventBatchPolling','lnjvR','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','ngLGV','REMOVING','Pgfcp','2|1|3|6|5|4|0','88iZAIPp','split','shouldProceed','fTiao','12568620jvsyTf','aaaWY','HookRunStarted','FCHZx','kind','start','TestRunFinished','error','test_run','181153axIiMY','RESETTING','PqZQx','rilti','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','\x20bytes.\x20Events\x20are\x20','queue','4jplXHm'];a115_0x1314=function(){return _0x38ccc7;};return a115_0x1314();}class RequestQueueHandler{static ['instance'];[a115_0x1eb7f0(0x190)]=0x0;constructor(){const _0x1fb1e6=a115_0x1eb7f0,_0x5be36c={};_0x5be36c[_0x1fb1e6(0x17d)]=_0x1fb1e6(0x179),_0x5be36c[_0x1fb1e6(0x1d9)]='api/v1/batch',_0x5be36c[_0x1fb1e6(0x1cb)]='LogCreated',_0x5be36c[_0x1fb1e6(0x1ab)]=_0x1fb1e6(0x172),_0x5be36c[_0x1fb1e6(0x1a1)]=_0x1fb1e6(0x184),_0x5be36c[_0x1fb1e6(0x1d6)]=_0x1fb1e6(0x1bb),_0x5be36c['EpBJi']=_0x1fb1e6(0x1ac),_0x5be36c[_0x1fb1e6(0x1c5)]='TestRunStarted',_0x5be36c[_0x1fb1e6(0x198)]=_0x1fb1e6(0x180),_0x5be36c[_0x1fb1e6(0x174)]='upload-attachments',_0x5be36c[_0x1fb1e6(0x1ce)]=_0x1fb1e6(0x1b3);const _0x5c26c5=_0x5be36c,_0x16dfe6=_0x5c26c5[_0x1fb1e6(0x17d)][_0x1fb1e6(0x17b)]('|');let _0x4d99a7=0x0;while(!![]){switch(_0x16dfe6[_0x4d99a7++]){case'0':this['pollEventBatchInterval']=null;continue;case'1':this[_0x1fb1e6(0x1db)]=![];continue;case'2':this['queue']=[];continue;case'3':this[_0x1fb1e6(0x1b0)]=_0x5c26c5['JxqeR'];continue;case'4':this[_0x1fb1e6(0x1b2)]=[_0x5c26c5[_0x1fb1e6(0x1cb)],_0x5c26c5[_0x1fb1e6(0x1ab)],_0x5c26c5[_0x1fb1e6(0x1a1)],_0x5c26c5[_0x1fb1e6(0x1d6)],_0x5c26c5['EpBJi'],_0x5c26c5[_0x1fb1e6(0x1c5)],_0x5c26c5[_0x1fb1e6(0x198)]];continue;case'5':this[_0x1fb1e6(0x16f)]=_0x5c26c5['lnjvR'];continue;case'6':this['screenshotEventUrl']=_0x5c26c5['UYuaV'];continue;}break;}}static['getInstance'](){const _0x3c6c7c=a115_0x1eb7f0;return!RequestQueueHandler['instance']&&(RequestQueueHandler[_0x3c6c7c(0x16c)]=new RequestQueueHandler()),RequestQueueHandler['instance'];}[a115_0x1eb7f0(0x183)]=()=>{const _0x2a76bd=a115_0x1eb7f0;!this[_0x2a76bd(0x1db)]&&(this[_0x2a76bd(0x1db)]=!![],this['startEventBatchPolling']());};[a115_0x1eb7f0(0x1d4)]=_0x363203=>{const _0x199933=a115_0x1eb7f0,_0x27ba6a={'PqZQx':function(_0x16e395,_0x4f0740){return _0x16e395===_0x4f0740;},'ZTKIx':_0x199933(0x1bf),'vLKHk':function(_0x5ec464,_0x2fc1de){return _0x5ec464>_0x2fc1de;},'Pgfcp':function(_0x139ab8,_0x1fe9ec){return _0x139ab8===_0x1fe9ec;},'LYQZN':_0x199933(0x1b6),'Ckjdm':function(_0x64bcc1,_0x3c6459){return _0x64bcc1!==_0x3c6459;},'iBElE':'TestRunFinished','TbdDM':function(_0x2b523c,_0x3d5b48){return _0x2b523c(_0x3d5b48);},'uqyWc':_0x199933(0x175)};if(this['BATCH_EVENT_TYPES']['includes'](_0x363203['event_type'])){if(_0x363203['logs']&&_0x363203[_0x199933(0x1b5)][0x0]&&_0x27ba6a[_0x199933(0x189)](_0x363203[_0x199933(0x1b5)][0x0][_0x199933(0x182)],_0x27ba6a[_0x199933(0x1c1)])){const _0x4608dc={};return _0x4608dc[_0x199933(0x17c)]=!![],_0x4608dc[_0x199933(0x1c4)]=[_0x363203],_0x4608dc['proceedWithUrl']=this[_0x199933(0x1aa)],_0x4608dc;}if(_0x363203[_0x199933(0x1b5)]&&_0x27ba6a[_0x199933(0x1b8)](_0x363203[_0x199933(0x1b5)][_0x199933(0x1ca)],0x0)&&_0x27ba6a[_0x199933(0x178)](_0x363203['logs'][0x0][_0x199933(0x182)],_0x27ba6a[_0x199933(0x1d2)])&&_0x27ba6a['Ckjdm'](_0x363203[_0x199933(0x1c3)],_0x27ba6a[_0x199933(0x19a)])){const _0x11618f={};return _0x11618f[_0x199933(0x17c)]=!![],_0x11618f['proceedWithData']=[_0x363203],_0x11618f[_0x199933(0x1c6)]=this[_0x199933(0x16f)],_0x11618f;}this[_0x199933(0x18d)]['push'](_0x363203);let _0x48ddb8=null;const _0x158793=this[_0x199933(0x17c)]();_0x158793&&(_0x27ba6a[_0x199933(0x1a2)](trace,_0x27ba6a['uqyWc']),_0x48ddb8=this['queue'][_0x199933(0x1dd)](0x0,BATCH_SIZE),this[_0x199933(0x18d)][_0x199933(0x1be)](0x0,BATCH_SIZE),this[_0x199933(0x1bc)]());const _0xd97923={};return _0xd97923['shouldProceed']=_0x158793,_0xd97923['proceedWithData']=_0x48ddb8,_0xd97923[_0x199933(0x1c6)]=this[_0x199933(0x1b0)],_0xd97923;}const _0x378c02={};return _0x378c02['shouldProceed']=!![],_0x378c02;};['shutdown']=async()=>{const _0x5824b=a115_0x1eb7f0,_0x489ccd={'FCHZx':_0x5824b(0x177),'RIsam':function(_0x29dbe9,_0x186195){return _0x29dbe9>_0x186195;},'JWoxH':'Shutdown-Queue','JPKqq':function(_0x48e4bf,_0x44676e){return _0x48e4bf(_0x44676e);}};await this[_0x5824b(0x1d5)](),this[_0x5824b(0x173)](_0x489ccd[_0x5824b(0x181)]);while(_0x489ccd[_0x5824b(0x1c9)](this[_0x5824b(0x18d)][_0x5824b(0x1ca)],0x0)){const _0x8e34b7=this['queue']['slice'](0x0,BATCH_SIZE);this[_0x5824b(0x18d)][_0x5824b(0x1be)](0x0,BATCH_SIZE),await this[_0x5824b(0x19e)](this['eventUrl'],_0x489ccd[_0x5824b(0x1cd)],_0x8e34b7);}_0x489ccd[_0x5824b(0x1c9)](this[_0x5824b(0x190)],0x0)&&_0x489ccd[_0x5824b(0x191)](debug,_0x5824b(0x18b)+this['pendingUploads']);};[a115_0x1eb7f0(0x19e)]=async(_0x4b33a8,_0x3166dd,_0x3d2308)=>{const _0x3b9e12=a115_0x1eb7f0,_0x5b3350={'doSkT':function(_0x302ada,_0x5e1801){return _0x302ada(_0x5e1801);},'UALqg':'utf8','RQykY':function(_0x159056,_0x1dc3b1){return _0x159056(_0x1dc3b1);},'ZZfRY':function(_0x75585d){return _0x75585d();},'ZpWSa':function(_0x5eb034,_0x1301e5,_0x108c93,_0x26d150,_0x4698ac){return _0x5eb034(_0x1301e5,_0x108c93,_0x26d150,_0x4698ac);},'QmMJB':'POST','aaaWY':function(_0x15d86c,_0x4131b6){return _0x15d86c(_0x4131b6);},'egmvc':function(_0x2ebb3b,_0xb5530f){return _0x2ebb3b-_0xb5530f;},'BjWjY':function(_0x2bb0b9,_0x5a26fb){return _0x2bb0b9(_0x5a26fb);}};let _0x276cf2='';try{_0x276cf2=_0x3d2308[_0x3b9e12(0x1a9)](_0x3e6cd8=>'\x27'+_0x3e6cd8[_0x3b9e12(0x1c3)]+'\x27:'+(nestedKeyValue(_0x3e6cd8,[_0x3b9e12(0x186),_0x3b9e12(0x1af)])||nestedKeyValue(_0x3e6cd8,[_0x3b9e12(0x199),_0x3b9e12(0x1af)])))['join'](','),_0x5b3350[_0x3b9e12(0x193)](debug,_0x3b9e12(0x1c0)+_0x3166dd+'.\x20Request\x20Size\x20-\x20'+Buffer[_0x3b9e12(0x1bd)](util[_0x3b9e12(0x18f)]('%j',_0x3d2308),_0x5b3350[_0x3b9e12(0x16e)])+_0x3b9e12(0x18c)+_0x276cf2);}catch(_0x1b748d){_0x5b3350[_0x3b9e12(0x1da)](debug,'Exception\x20in\x20logging\x20batch\x20events\x20--\x20'+util[_0x3b9e12(0x18f)](_0x1b748d)+'}');}const _0x30bd96={'headers':_0x5b3350[_0x3b9e12(0x1d0)](getDefaultHeaders)};try{const _0x2da1cd=await _0x5b3350[_0x3b9e12(0x1de)](nodeRequest,_0x5b3350[_0x3b9e12(0x1d1)],_0x4b33a8,_0x3d2308,_0x30bd96);if(_0x2da1cd['data'][_0x3b9e12(0x185)]){const _0x5b489e={};_0x5b489e['message']=_0x2da1cd[_0x3b9e12(0x1b7)][_0x3b9e12(0x185)];throw _0x5b489e;}else _0x5b3350[_0x3b9e12(0x17f)](debug,_0x3166dd+_0x3b9e12(0x1d3)+_0x276cf2+_0x3b9e12(0x1d8)+util[_0x3b9e12(0x18f)]('%j',_0x2da1cd['data'])),this[_0x3b9e12(0x190)]=Math[_0x3b9e12(0x1c8)](0x0,_0x5b3350[_0x3b9e12(0x194)](this[_0x3b9e12(0x190)],_0x3d2308[_0x3b9e12(0x1ca)]));}catch(_0x100f1a){_0x100f1a['response']?_0x5b3350['RQykY'](debug,'EXCEPTION\x20IN\x20'+_0x3166dd+'\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20'+_0x100f1a['response']['status']+'\x20'+_0x100f1a['response'][_0x3b9e12(0x19d)]+'\x20'+util['format']('%j',_0x100f1a[_0x3b9e12(0x196)])):_0x5b3350[_0x3b9e12(0x19c)](debug,_0x3b9e12(0x1b9)+_0x3166dd+_0x3b9e12(0x170)+(_0x100f1a[_0x3b9e12(0x192)]||_0x100f1a)),this[_0x3b9e12(0x190)]=Math[_0x3b9e12(0x1c8)](0x0,_0x5b3350['egmvc'](this[_0x3b9e12(0x190)],_0x3d2308['length']));}};[a115_0x1eb7f0(0x1ad)]=()=>{const _0x5875a9=a115_0x1eb7f0,_0x50c22b={'AMcKL':function(_0x5dc8be,_0x592138){return _0x5dc8be>_0x592138;},'oVVdo':function(_0x488521,_0x9634e5){return _0x488521(_0x9634e5);},'ngLGV':_0x5875a9(0x1cc),'NxGEw':function(_0x5ee402,_0x222478){return _0x5ee402(_0x222478);},'gNuoB':function(_0x1c4ecc,_0x2e6841,_0x32ef4f){return _0x1c4ecc(_0x2e6841,_0x32ef4f);}};this['pollEventBatchInterval']=_0x50c22b[_0x5875a9(0x1b1)](setInterval,async()=>{const _0x3b38dc=_0x5875a9;if(_0x50c22b[_0x3b38dc(0x195)](this[_0x3b38dc(0x18d)][_0x3b38dc(0x1ca)],0x0)){_0x50c22b[_0x3b38dc(0x1ba)](trace,_0x3b38dc(0x1a6)+this[_0x3b38dc(0x18d)][_0x3b38dc(0x1ca)]);const _0x45baa6=this['queue'][_0x3b38dc(0x1dd)](0x0,BATCH_SIZE);this[_0x3b38dc(0x18d)][_0x3b38dc(0x1be)](0x0,BATCH_SIZE),await this[_0x3b38dc(0x19e)](this['eventUrl'],_0x50c22b[_0x3b38dc(0x176)],_0x45baa6),_0x50c22b['NxGEw'](trace,'Remaining\x20Queue\x20Length\x20-\x20'+this[_0x3b38dc(0x18d)][_0x3b38dc(0x1ca)]);}},BATCH_INTERVAL);};[a115_0x1eb7f0(0x1bc)]=()=>{const _0x554bbb=a115_0x1eb7f0,_0x5ec7bf={};_0x5ec7bf[_0x554bbb(0x1a7)]=_0x554bbb(0x188);const _0x258f11=_0x5ec7bf;this[_0x554bbb(0x173)](_0x258f11['NNvVy']),this[_0x554bbb(0x1ad)]();};[a115_0x1eb7f0(0x173)]=_0x10de10=>{const _0x4f6233=a115_0x1eb7f0,_0x32ece4={'xJXnE':function(_0x5e6f9d,_0x485a86){return _0x5e6f9d(_0x485a86);},'rilti':function(_0x3cec53,_0x519203){return _0x3cec53===_0x519203;},'DCyla':_0x4f6233(0x177)};this['pollEventBatchInterval']&&(_0x32ece4['xJXnE'](clearInterval,this[_0x4f6233(0x1a0)]),this['pollEventBatchInterval']=null,_0x32ece4[_0x4f6233(0x18a)](_0x10de10,_0x32ece4[_0x4f6233(0x171)])&&(this[_0x4f6233(0x1db)]=![]));};[a115_0x1eb7f0(0x17c)]=()=>{const _0x520f9d=a115_0x1eb7f0,_0x5c8934={};_0x5c8934[_0x520f9d(0x1c7)]=function(_0x3d0220,_0x6ebf23){return _0x3d0220>=_0x6ebf23;};const _0x4477db=_0x5c8934;return _0x4477db[_0x520f9d(0x1c7)](this['queue'][_0x520f9d(0x1ca)],BATCH_SIZE);};async['uploadPending'](_0x2693b3=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x15b539=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x4e42ee=a115_0x1eb7f0,_0x403bbf={'ilJYd':function(_0x15f85f,_0x1794a6){return _0x15f85f<=_0x1794a6;},'SNhuz':function(_0x577b45,_0x2e9561){return _0x577b45<=_0x2e9561;},'kXINc':function(_0x34a24b,_0x3f1795){return _0x34a24b(_0x3f1795);},'qSfbj':function(_0x37c369,_0x4e72df){return _0x37c369-_0x4e72df;}};if(_0x403bbf[_0x4e42ee(0x19b)](this[_0x4e42ee(0x190)],0x0)||_0x403bbf['SNhuz'](_0x2693b3,0x0))return;return await _0x403bbf[_0x4e42ee(0x1a8)](sleep,_0x15b539),this['uploadPending'](_0x403bbf['qSfbj'](_0x2693b3,_0x15b539));}}module[a115_0x1eb7f0(0x1d7)]=RequestQueueHandler;