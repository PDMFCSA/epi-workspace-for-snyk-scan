function a123_0x53f8(_0x34f563,_0x3a18c2){const _0x96b997=a123_0x96b9();return a123_0x53f8=function(_0x53f897,_0x130597){_0x53f897=_0x53f897-0xf9;let _0xf88eab=_0x96b997[_0x53f897];return _0xf88eab;},a123_0x53f8(_0x34f563,_0x3a18c2);}function a123_0x96b9(){const _0x3927d1=['TEST_ATTACHMENT','omdTP','utf8','statusText','BZCmw','LogCreated','27ROKSZr','VoiUq','Wdlan','DLNbO','logs','test_run','WVSaY','kizTe','eventUrl','ckgdE','slice','TestRunFinished','srIiS','format','uuid','pCPvz','6WrHtjN','HOqKQ','lfsYZ','message','splice','AbXoJ','AXwXW','POST','includes','1762201knButP','iavWC','started','pendingUploads','Shutdown-Queue','32855oGBZwO','../helper','resetEventBatchPolling','removeEventBatchPolling','join','BATCH_EVENT_TYPES','XiPpU','batchAndPostEvents','DmAPS','aUyJA','\x20event\x20successful\x20for\x20events\x20','split','8913157dxjdaK','uploadAttachmentUrl','proceedWithUrl','20vaQExU','NHkaN','pqkdP','kind','mZpmf','queue','TestRunSkipped','push','./constants','shouldProceed','1195164kdZnFv','Processing\x20batch\x20events\x20for\x20','exports','HookRunFinished','4|5|6|1|3|2|0','data','REMOVING','proceedWithData','iaUzR','CBTSessionCreated','TEST_REPORTING_ANALYTICS','mDchQ','start','Interval-Queue','screenshotEventUrl','map','./utils','GGbAq','TEST_SCREENSHOT','573660LIjIak','error','GAoTS','2784424aGkNOT','byteLength','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','util','difRs','2xJHlbu','max','instance','knPvt','length','response','HookRunStarted','bYFbL','oViOf','../../bin/utils/constants','Remaining\x20Queue\x20Length\x20-\x20','getInstance','MQiyZ','event_type','.\x20Request\x20Size\x20-\x20','pollEventBatchInterval','wEuDr','uploadPending','shutdown','hook_run','\x20:\x20','KROls','\x20REQUEST\x20TO\x20','startEventBatchPolling','trhyE','639310EKCplI'];a123_0x96b9=function(){return _0x3927d1;};return a123_0x96b9();}const a123_0x503979=a123_0x53f8;(function(_0x18ec8c,_0x3bfd90){const _0x33658e=a123_0x53f8,_0x26de2d=_0x18ec8c();while(!![]){try{const _0x140d73=-parseInt(_0x33658e(0x13c))/0x1+-parseInt(_0x33658e(0xfe))/0x2*(parseInt(_0x33658e(0x155))/0x3)+parseInt(_0x33658e(0x168))/0x4*(parseInt(_0x33658e(0x14b))/0x5)+-parseInt(_0x33658e(0x12e))/0x6*(-parseInt(_0x33658e(0x137))/0x7)+-parseInt(_0x33658e(0xf9))/0x8*(-parseInt(_0x33658e(0x11e))/0x9)+-parseInt(_0x33658e(0x117))/0xa+-parseInt(_0x33658e(0x148))/0xb;if(_0x140d73===_0x3bfd90)break;else _0x26de2d['push'](_0x26de2d['shift']());}catch(_0x5a1884){_0x26de2d['push'](_0x26de2d['shift']());}}}(a123_0x96b9,0x89b85));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a123_0x503979(0x153)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a123_0x503979(0x165)),{nestedKeyValue}=require(a123_0x503979(0x13d)),util=require(a123_0x503979(0xfc)),constants=require(a123_0x503979(0x107));class RequestQueueHandler{static [a123_0x503979(0x100)];['pendingUploads']=0x0;constructor(){const _0x182c17=a123_0x503979,_0x33807a={};_0x33807a['WkByH']=_0x182c17(0x159),_0x33807a[_0x182c17(0x138)]='api/v1/screenshots',_0x33807a[_0x182c17(0x113)]=_0x182c17(0x11d),_0x33807a[_0x182c17(0x160)]=_0x182c17(0x15e),_0x33807a[_0x182c17(0x14c)]=_0x182c17(0x129),_0x33807a[_0x182c17(0x15d)]=_0x182c17(0x151),_0x33807a[_0x182c17(0x125)]=_0x182c17(0x158),_0x33807a[_0x182c17(0x10e)]='TestRunStarted',_0x33807a['PqZhL']=_0x182c17(0x104),_0x33807a[_0x182c17(0x119)]='upload-attachments',_0x33807a[_0x182c17(0x121)]='api/v1/batch';const _0x388225=_0x33807a,_0x53417d=_0x388225['WkByH'][_0x182c17(0x147)]('|');let _0x3bd35d=0x0;while(!![]){switch(_0x53417d[_0x3bd35d++]){case'0':this[_0x182c17(0x10d)]=null;continue;case'1':this[_0x182c17(0x163)]=_0x388225[_0x182c17(0x138)];continue;case'2':this[_0x182c17(0x141)]=[_0x388225[_0x182c17(0x113)],_0x388225[_0x182c17(0x160)],_0x388225[_0x182c17(0x14c)],_0x388225['iaUzR'],_0x388225[_0x182c17(0x125)],_0x388225['wEuDr'],_0x388225['PqZhL']];continue;case'3':this[_0x182c17(0x149)]=_0x388225[_0x182c17(0x119)];continue;case'4':this['queue']=[];continue;case'5':this[_0x182c17(0x139)]=![];continue;case'6':this[_0x182c17(0x126)]=_0x388225[_0x182c17(0x121)];continue;}break;}}static[a123_0x503979(0x109)](){const _0x43267f=a123_0x503979;return!RequestQueueHandler[_0x43267f(0x100)]&&(RequestQueueHandler['instance']=new RequestQueueHandler()),RequestQueueHandler['instance'];}[a123_0x503979(0x161)]=()=>{const _0x5c158e=a123_0x503979;!this['started']&&(this[_0x5c158e(0x139)]=!![],this['startEventBatchPolling']());};['add']=_0x13bc41=>{const _0x4f08df=a123_0x503979,_0x1018aa={'VoiUq':function(_0x57b37f,_0x26d1c4){return _0x57b37f===_0x26d1c4;},'HrlNn':_0x4f08df(0x167),'LmgVy':function(_0x3d4340,_0x1f2380){return _0x3d4340>_0x1f2380;},'kHOsv':_0x4f08df(0x118),'HOqKQ':function(_0x472b8d,_0x45ed19){return _0x472b8d!==_0x45ed19;},'AXwXW':_0x4f08df(0x129),'AbXoJ':function(_0xb0dbae,_0x5affa9){return _0xb0dbae(_0x5affa9);},'lfsYZ':'Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..'};if(this[_0x4f08df(0x141)][_0x4f08df(0x136)](_0x13bc41['event_type'])){if(_0x13bc41[_0x4f08df(0x122)]&&_0x13bc41[_0x4f08df(0x122)][0x0]&&_0x1018aa[_0x4f08df(0x11f)](_0x13bc41[_0x4f08df(0x122)][0x0][_0x4f08df(0x14e)],_0x1018aa['HrlNn'])){const _0x571c2d={};return _0x571c2d[_0x4f08df(0x154)]=!![],_0x571c2d[_0x4f08df(0x15c)]=[_0x13bc41],_0x571c2d[_0x4f08df(0x14a)]=this[_0x4f08df(0x163)],_0x571c2d;}if(_0x13bc41['logs']&&_0x1018aa['LmgVy'](_0x13bc41['logs'][_0x4f08df(0x102)],0x0)&&_0x1018aa[_0x4f08df(0x11f)](_0x13bc41[_0x4f08df(0x122)][0x0][_0x4f08df(0x14e)],_0x1018aa['kHOsv'])&&_0x1018aa[_0x4f08df(0x12f)](_0x13bc41[_0x4f08df(0x10b)],_0x1018aa[_0x4f08df(0x134)])){const _0x2fe718={};return _0x2fe718[_0x4f08df(0x154)]=!![],_0x2fe718[_0x4f08df(0x15c)]=[_0x13bc41],_0x2fe718[_0x4f08df(0x14a)]=this[_0x4f08df(0x149)],_0x2fe718;}this[_0x4f08df(0x150)][_0x4f08df(0x152)](_0x13bc41);let _0x521cc0=null;const _0x4eafab=this[_0x4f08df(0x154)]();_0x4eafab&&(_0x1018aa[_0x4f08df(0x133)](trace,_0x1018aa[_0x4f08df(0x130)]),_0x521cc0=this[_0x4f08df(0x150)][_0x4f08df(0x128)](0x0,BATCH_SIZE),this[_0x4f08df(0x150)][_0x4f08df(0x132)](0x0,BATCH_SIZE),this['resetEventBatchPolling']());const _0x10e666={};return _0x10e666[_0x4f08df(0x154)]=_0x4eafab,_0x10e666['proceedWithData']=_0x521cc0,_0x10e666['proceedWithUrl']=this[_0x4f08df(0x126)],_0x10e666;}const _0x1a9492={};return _0x1a9492[_0x4f08df(0x154)]=!![],_0x1a9492;};[a123_0x503979(0x110)]=async()=>{const _0x251c50=a123_0x503979,_0x1e50df={'iyWsD':_0x251c50(0x15b),'bYFbL':function(_0x4c83a2,_0x411efd){return _0x4c83a2>_0x411efd;},'vKOoZ':_0x251c50(0x13b),'GAoTS':function(_0x57be1a,_0x4b3518){return _0x57be1a(_0x4b3518);}};await this[_0x251c50(0x10f)](),this['removeEventBatchPolling'](_0x1e50df['iyWsD']);while(_0x1e50df[_0x251c50(0x105)](this['queue']['length'],0x0)){const _0x5d562e=this[_0x251c50(0x150)][_0x251c50(0x128)](0x0,BATCH_SIZE);this[_0x251c50(0x150)][_0x251c50(0x132)](0x0,BATCH_SIZE),await this[_0x251c50(0x143)](this[_0x251c50(0x126)],_0x1e50df['vKOoZ'],_0x5d562e);}_0x1e50df[_0x251c50(0x105)](this[_0x251c50(0x13a)],0x0)&&_0x1e50df[_0x251c50(0x16a)](debug,'Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20'+this[_0x251c50(0x13a)]);};[a123_0x503979(0x143)]=async(_0x1c6393,_0x1898c1,_0xebf6)=>{const _0x394870=a123_0x503979,_0x3af635={'DmAPS':function(_0x3ed91b,_0x2ec8c0){return _0x3ed91b(_0x2ec8c0);},'oViOf':_0x394870(0x11a),'mZpmf':function(_0x25cefc,_0x3f83e2){return _0x25cefc(_0x3f83e2);},'GWJcu':function(_0x144fcd){return _0x144fcd();},'difRs':function(_0x474416,_0x3aae89,_0x329d09,_0x3735a3,_0x403daf){return _0x474416(_0x3aae89,_0x329d09,_0x3735a3,_0x403daf);},'EiXhu':_0x394870(0x135),'pCPvz':function(_0x536c04,_0x10a695){return _0x536c04-_0x10a695;}};let _0x539194='';try{_0x539194=_0xebf6[_0x394870(0x164)](_0x59e648=>'\x27'+_0x59e648[_0x394870(0x10b)]+'\x27:'+(nestedKeyValue(_0x59e648,[_0x394870(0x123),_0x394870(0x12c)])||nestedKeyValue(_0x59e648,[_0x394870(0x111),'uuid'])))[_0x394870(0x140)](','),_0x3af635[_0x394870(0x144)](debug,_0x394870(0x156)+_0x1898c1+_0x394870(0x10c)+Buffer[_0x394870(0xfa)](util[_0x394870(0x12b)]('%j',_0xebf6),_0x3af635[_0x394870(0x106)])+'\x20bytes.\x20Events\x20are\x20'+_0x539194);}catch(_0x4d460c){_0x3af635[_0x394870(0x14f)](debug,_0x394870(0xfb)+util['format'](_0x4d460c)+'}');}const _0x457702={'headers':_0x3af635['GWJcu'](getDefaultHeaders)};try{const _0x5a49d6=await _0x3af635[_0x394870(0xfd)](nodeRequest,_0x3af635['EiXhu'],_0x1c6393,_0xebf6,_0x457702);if(_0x5a49d6['data'][_0x394870(0x169)]){const _0x56a405={};_0x56a405['message']=_0x5a49d6[_0x394870(0x15a)]['error'];throw _0x56a405;}else _0x3af635[_0x394870(0x14f)](debug,_0x1898c1+_0x394870(0x146)+_0x539194+'\x20--\x20'+util[_0x394870(0x12b)]('%j',_0x5a49d6[_0x394870(0x15a)])),this[_0x394870(0x13a)]=Math['max'](0x0,_0x3af635[_0x394870(0x12d)](this[_0x394870(0x13a)],_0xebf6[_0x394870(0x102)]));}catch(_0x534df6){_0x534df6[_0x394870(0x103)]?_0x3af635[_0x394870(0x14f)](debug,'EXCEPTION\x20IN\x20'+_0x1898c1+_0x394870(0x114)+constants[_0x394870(0x15f)]+_0x394870(0x112)+_0x534df6['response']['status']+'\x20'+_0x534df6[_0x394870(0x103)][_0x394870(0x11b)]+'\x20'+util[_0x394870(0x12b)]('%j',_0x534df6[_0x394870(0x103)])):_0x3af635[_0x394870(0x144)](debug,'EXCEPTION\x20IN\x20'+_0x1898c1+'\x20REQUEST\x20TO\x20'+constants['TEST_REPORTING_ANALYTICS']+_0x394870(0x112)+(_0x534df6[_0x394870(0x131)]||_0x534df6)),this[_0x394870(0x13a)]=Math[_0x394870(0xff)](0x0,_0x3af635[_0x394870(0x12d)](this['pendingUploads'],_0xebf6[_0x394870(0x102)]));}};['startEventBatchPolling']=()=>{const _0x4a3697=a123_0x503979,_0x2f19da={'BZCmw':function(_0x433587,_0x4cf5b5){return _0x433587>_0x4cf5b5;},'aUyJA':function(_0x259c17,_0xfc265e){return _0x259c17(_0xfc265e);},'MQiyZ':_0x4a3697(0x162),'ckgdE':function(_0x2f3b76,_0x44b550){return _0x2f3b76(_0x44b550);},'trhyE':function(_0x2371f8,_0x9ebcaa,_0x42d2ac){return _0x2371f8(_0x9ebcaa,_0x42d2ac);}};this[_0x4a3697(0x10d)]=_0x2f19da[_0x4a3697(0x116)](setInterval,async()=>{const _0x5c47f2=_0x4a3697;if(_0x2f19da[_0x5c47f2(0x11c)](this['queue'][_0x5c47f2(0x102)],0x0)){_0x2f19da[_0x5c47f2(0x145)](trace,'Processing\x20events.\x20Queue\x20Length\x20-\x20'+this[_0x5c47f2(0x150)][_0x5c47f2(0x102)]);const _0xaa68ed=this[_0x5c47f2(0x150)][_0x5c47f2(0x128)](0x0,BATCH_SIZE);this[_0x5c47f2(0x150)][_0x5c47f2(0x132)](0x0,BATCH_SIZE),await this[_0x5c47f2(0x143)](this['eventUrl'],_0x2f19da[_0x5c47f2(0x10a)],_0xaa68ed),_0x2f19da[_0x5c47f2(0x127)](trace,_0x5c47f2(0x108)+this[_0x5c47f2(0x150)][_0x5c47f2(0x102)]);}},BATCH_INTERVAL);};[a123_0x503979(0x13e)]=()=>{const _0x191f24=a123_0x503979,_0x4c5f5d={};_0x4c5f5d[_0x191f24(0x14d)]='RESETTING';const _0x23717b=_0x4c5f5d;this['removeEventBatchPolling'](_0x23717b[_0x191f24(0x14d)]),this[_0x191f24(0x115)]();};[a123_0x503979(0x13f)]=_0x4bfa5e=>{const _0x1cff2d=a123_0x503979,_0x9eede1={'XiPpU':function(_0xf08663,_0x3b5820){return _0xf08663(_0x3b5820);},'IexcC':function(_0x49c2c7,_0x13138a){return _0x49c2c7===_0x13138a;},'GGbAq':_0x1cff2d(0x15b)};this[_0x1cff2d(0x10d)]&&(_0x9eede1[_0x1cff2d(0x142)](clearInterval,this['pollEventBatchInterval']),this[_0x1cff2d(0x10d)]=null,_0x9eede1['IexcC'](_0x4bfa5e,_0x9eede1[_0x1cff2d(0x166)])&&(this[_0x1cff2d(0x139)]=![]));};[a123_0x503979(0x154)]=()=>{const _0x41b88d=a123_0x503979,_0x572303={};_0x572303[_0x41b88d(0x120)]=function(_0x3ec8bb,_0x291ce7){return _0x3ec8bb>=_0x291ce7;};const _0x4836b4=_0x572303;return _0x4836b4[_0x41b88d(0x120)](this['queue'][_0x41b88d(0x102)],BATCH_SIZE);};async[a123_0x503979(0x10f)](_0x55aa2a=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x52c60f=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x3126c8=a123_0x503979,_0x5f1826={'KOvUa':function(_0x2d9fbc,_0x4a45c2){return _0x2d9fbc<=_0x4a45c2;},'WVSaY':function(_0x274b35,_0x2b52e7){return _0x274b35<=_0x2b52e7;},'srIiS':function(_0x348b7b,_0x476962){return _0x348b7b(_0x476962);},'knPvt':function(_0x379d64,_0x29ff70){return _0x379d64-_0x29ff70;}};if(_0x5f1826['KOvUa'](this[_0x3126c8(0x13a)],0x0)||_0x5f1826[_0x3126c8(0x124)](_0x55aa2a,0x0))return;return await _0x5f1826[_0x3126c8(0x12a)](sleep,_0x52c60f),this[_0x3126c8(0x10f)](_0x5f1826[_0x3126c8(0x101)](_0x55aa2a,_0x52c60f));}}module[a123_0x503979(0x157)]=RequestQueueHandler;