function a86_0x38ed(_0x1c9391,_0x4021d2){const _0x23aff3=a86_0x23af();return a86_0x38ed=function(_0x38ed6a,_0x2ae043){_0x38ed6a=_0x38ed6a-0x182;let _0x2e9e61=_0x23aff3[_0x38ed6a];return _0x2e9e61;},a86_0x38ed(_0x1c9391,_0x4021d2);}function a86_0x23af(){const _0x284d73=['3288196uGNaKH','shouldProceed','CBTSessionCreated','\x20--\x20','BOvjp','splice','test_run','join','RIoor','InKBG','uploadPending','fdEcK','split','NHCWG','./utils','GicaF','exports','upload-attachments','REMOVING','4750386PlSIxr','slice','EXCEPTION\x20IN\x20','LBSUT','uuid','DXxgK','hgEwk','hook_run','Processing\x20batch\x20events\x20for\x20','UFIsE','lhFBk','batchAndPostEvents','started','instance','length','screenshotEventUrl','error','startEventBatchPolling','utf8','3118464wMheFY','BATCH_EVENT_TYPES','queue','shutdown','TestRunFinished','PODlk','HuKYO','TestRunSkipped','statusText','byteLength','RESETTING','proceedWithUrl','GGYxV','RSxJE','api/v1/batch','response','pQzDm','max','BcXRQ','jhqyX','util','proceedWithData','getInstance','kind','data','11384944njxAZD','30324987HqHBKm','2050410rfvZto','kiywn','Processing\x20events.\x20Queue\x20Length\x20-\x20','logs','dtdFI','CgDND','\x20event\x20successful\x20for\x20events\x20','JrJzB','format','push','cTCYx','MijXd','DXnzB','WdhmO','KwPLk','Yzioo','eventUrl','Shutdown-Queue','wgzeN','ObYew','resetEventBatchPolling','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','TQwPh','7DfAsbz','.\x20Request\x20Size\x20-\x20','1|3|0|2|4|6|5','YCKea','NAOEq','TwjSW','ICCwo','8fHkgQl','skmyL','\x20bytes.\x20Events\x20are\x20','event_type','pollEventBatchInterval','VEccv','Interval-Queue','includes','IQHAd','removeEventBatchPolling','./constants','57047VuyrtU','QHkLd','pendingUploads','POST'];a86_0x23af=function(){return _0x284d73;};return a86_0x23af();}const a86_0x3d72e6=a86_0x38ed;(function(_0x52ee84,_0x30fd4c){const _0x393937=a86_0x38ed,_0x33e753=_0x52ee84();while(!![]){try{const _0x2981e1=parseInt(_0x393937(0x1ae))/0x1*(-parseInt(_0x393937(0x1a3))/0x2)+parseInt(_0x393937(0x1d8))/0x3+-parseInt(_0x393937(0x1b2))/0x4+-parseInt(_0x393937(0x184))/0x5+parseInt(_0x393937(0x1c5))/0x6*(-parseInt(_0x393937(0x19c))/0x7)+-parseInt(_0x393937(0x182))/0x8+parseInt(_0x393937(0x183))/0x9;if(_0x2981e1===_0x30fd4c)break;else _0x33e753['push'](_0x33e753['shift']());}catch(_0x1a95f2){_0x33e753['push'](_0x33e753['shift']());}}}(a86_0x23af,0xb3243));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a86_0x3d72e6(0x1ad)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a86_0x3d72e6(0x1c0)),{nestedKeyValue}=require('../helper'),util=require(a86_0x3d72e6(0x1ec));class RequestQueueHandler{static [a86_0x3d72e6(0x1d2)];['pendingUploads']=0x0;constructor(){const _0x596543=a86_0x3d72e6,_0x35800a={};_0x35800a['jhqyX']=_0x596543(0x19e),_0x35800a['DXnzB']=_0x596543(0x1e6),_0x35800a['LBSUT']='api/v1/screenshots',_0x35800a[_0x596543(0x1de)]=_0x596543(0x1c3),_0x35800a[_0x596543(0x1dd)]='LogCreated',_0x35800a['BcXRQ']=_0x596543(0x1b4),_0x35800a[_0x596543(0x1bd)]=_0x596543(0x1dc),_0x35800a[_0x596543(0x1a8)]=_0x596543(0x1df),_0x35800a[_0x596543(0x18b)]='HookRunFinished',_0x35800a[_0x596543(0x1ba)]='TestRunStarted',_0x35800a[_0x596543(0x1e8)]='HookRunStarted';const _0x3b5304=_0x35800a,_0x5b006a=_0x3b5304[_0x596543(0x1eb)][_0x596543(0x1be)]('|');let _0x59c890=0x0;while(!![]){switch(_0x5b006a[_0x59c890++]){case'0':this[_0x596543(0x194)]=_0x3b5304[_0x596543(0x190)];continue;case'1':this[_0x596543(0x1da)]=[];continue;case'2':this[_0x596543(0x1d4)]=_0x3b5304[_0x596543(0x1c8)];continue;case'3':this[_0x596543(0x1d1)]=![];continue;case'4':this['uploadAttachmentUrl']=_0x3b5304[_0x596543(0x1de)];continue;case'5':this[_0x596543(0x1a7)]=null;continue;case'6':this[_0x596543(0x1d9)]=[_0x3b5304[_0x596543(0x1dd)],_0x3b5304[_0x596543(0x1ea)],_0x3b5304[_0x596543(0x1bd)],_0x3b5304[_0x596543(0x1a8)],_0x3b5304['JrJzB'],_0x3b5304[_0x596543(0x1ba)],_0x3b5304[_0x596543(0x1e8)]];continue;}break;}}static[a86_0x3d72e6(0x1ee)](){return!RequestQueueHandler['instance']&&(RequestQueueHandler['instance']=new RequestQueueHandler()),RequestQueueHandler['instance'];}['start']=()=>{const _0x46ae83=a86_0x3d72e6;!this[_0x46ae83(0x1d1)]&&(this['started']=!![],this['startEventBatchPolling']());};['add']=_0x2f0535=>{const _0x20e16e=a86_0x3d72e6,_0x1fa6f0={'YCKea':function(_0x2e483c,_0x377772){return _0x2e483c===_0x377772;},'NHCWG':'TEST_SCREENSHOT','CjrHK':function(_0x3affa0,_0x493307){return _0x3affa0>_0x493307;},'InKBG':function(_0x1dc682,_0x2e3613){return _0x1dc682===_0x2e3613;},'uBZAa':'TEST_ATTACHMENT','IQHAd':function(_0x23f2f5,_0x232cbe){return _0x23f2f5!==_0x232cbe;},'QHkLd':'TestRunFinished','hgEwk':function(_0x365b02,_0x409460){return _0x365b02(_0x409460);},'GoPdR':_0x20e16e(0x199)};if(this['BATCH_EVENT_TYPES'][_0x20e16e(0x1aa)](_0x2f0535[_0x20e16e(0x1a6)])){if(_0x2f0535['logs']&&_0x2f0535['logs'][0x0]&&_0x1fa6f0[_0x20e16e(0x19f)](_0x2f0535[_0x20e16e(0x187)][0x0]['kind'],_0x1fa6f0[_0x20e16e(0x1bf)])){const _0x7aaa84={};return _0x7aaa84['shouldProceed']=!![],_0x7aaa84[_0x20e16e(0x1ed)]=[_0x2f0535],_0x7aaa84[_0x20e16e(0x1e3)]=this[_0x20e16e(0x1d4)],_0x7aaa84;}if(_0x2f0535[_0x20e16e(0x187)]&&_0x1fa6f0['CjrHK'](_0x2f0535[_0x20e16e(0x187)][_0x20e16e(0x1d3)],0x0)&&_0x1fa6f0[_0x20e16e(0x1bb)](_0x2f0535[_0x20e16e(0x187)][0x0][_0x20e16e(0x1ef)],_0x1fa6f0['uBZAa'])&&_0x1fa6f0[_0x20e16e(0x1ab)](_0x2f0535['event_type'],_0x1fa6f0[_0x20e16e(0x1af)])){const _0x2f0a21={};return _0x2f0a21[_0x20e16e(0x1b3)]=!![],_0x2f0a21['proceedWithData']=[_0x2f0535],_0x2f0a21[_0x20e16e(0x1e3)]=this['uploadAttachmentUrl'],_0x2f0a21;}this[_0x20e16e(0x1da)][_0x20e16e(0x18d)](_0x2f0535);let _0x36552b=null;const _0x1d91a6=this['shouldProceed']();_0x1d91a6&&(_0x1fa6f0[_0x20e16e(0x1cb)](trace,_0x1fa6f0['GoPdR']),_0x36552b=this['queue']['slice'](0x0,BATCH_SIZE),this[_0x20e16e(0x1da)][_0x20e16e(0x1b7)](0x0,BATCH_SIZE),this[_0x20e16e(0x198)]());const _0x6a3cf9={};return _0x6a3cf9['shouldProceed']=_0x1d91a6,_0x6a3cf9[_0x20e16e(0x1ed)]=_0x36552b,_0x6a3cf9[_0x20e16e(0x1e3)]=this[_0x20e16e(0x194)],_0x6a3cf9;}const _0x38a394={};return _0x38a394[_0x20e16e(0x1b3)]=!![],_0x38a394;};[a86_0x3d72e6(0x1db)]=async()=>{const _0x1a49eb=a86_0x3d72e6,_0x2b2e1b={'KwPLk':_0x1a49eb(0x1c4),'skmyL':function(_0x4475ec,_0xbe368a){return _0x4475ec>_0xbe368a;},'TwjSW':_0x1a49eb(0x195),'lhFBk':function(_0x544c9e,_0x29c565){return _0x544c9e(_0x29c565);}};await this[_0x1a49eb(0x1bc)](),this['removeEventBatchPolling'](_0x2b2e1b[_0x1a49eb(0x192)]);while(_0x2b2e1b['skmyL'](this['queue'][_0x1a49eb(0x1d3)],0x0)){const _0x348a09=this[_0x1a49eb(0x1da)][_0x1a49eb(0x1c6)](0x0,BATCH_SIZE);this[_0x1a49eb(0x1da)]['splice'](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x1a49eb(0x194)],_0x2b2e1b[_0x1a49eb(0x1a1)],_0x348a09);}_0x2b2e1b[_0x1a49eb(0x1a4)](this[_0x1a49eb(0x1b0)],0x0)&&_0x2b2e1b[_0x1a49eb(0x1cf)](debug,_0x1a49eb(0x19a)+this[_0x1a49eb(0x1b0)]);};[a86_0x3d72e6(0x1d0)]=async(_0x1d418e,_0x148c7b,_0x465cdb)=>{const _0x2d7ebc=a86_0x3d72e6,_0x90fc9e={'dtdFI':function(_0x2b392b,_0xbcc12e){return _0x2b392b(_0xbcc12e);},'xOEJH':_0x2d7ebc(0x1d7),'NAOEq':function(_0x26f1dd,_0x553b47){return _0x26f1dd(_0x553b47);},'tHybJ':function(_0x3f6be9){return _0x3f6be9();},'BOvjp':function(_0x1490dd,_0x477c13,_0x51e8ea,_0x3fba5c,_0x4e115b){return _0x1490dd(_0x477c13,_0x51e8ea,_0x3fba5c,_0x4e115b);},'Yzioo':_0x2d7ebc(0x1b1),'ICCwo':function(_0xc4f47,_0x202eb6){return _0xc4f47(_0x202eb6);},'CgDND':function(_0x45d2fb,_0x1e9dbf){return _0x45d2fb-_0x1e9dbf;}};let _0x2f83e4='';try{_0x2f83e4=_0x465cdb['map'](_0x4bfd3d=>'\x27'+_0x4bfd3d[_0x2d7ebc(0x1a6)]+'\x27:'+(nestedKeyValue(_0x4bfd3d,[_0x2d7ebc(0x1b8),_0x2d7ebc(0x1c9)])||nestedKeyValue(_0x4bfd3d,[_0x2d7ebc(0x1cc),_0x2d7ebc(0x1c9)])))[_0x2d7ebc(0x1b9)](','),_0x90fc9e[_0x2d7ebc(0x188)](debug,_0x2d7ebc(0x1cd)+_0x148c7b+_0x2d7ebc(0x19d)+Buffer[_0x2d7ebc(0x1e1)](util[_0x2d7ebc(0x18c)]('%j',_0x465cdb),_0x90fc9e['xOEJH'])+_0x2d7ebc(0x1a5)+_0x2f83e4);}catch(_0x1a8796){_0x90fc9e[_0x2d7ebc(0x1a0)](debug,'Exception\x20in\x20logging\x20batch\x20events\x20--\x20'+util[_0x2d7ebc(0x18c)](_0x1a8796)+'}');}const _0x4c01eb={'headers':_0x90fc9e['tHybJ'](getDefaultHeaders)};try{const _0x4b6488=await _0x90fc9e[_0x2d7ebc(0x1b6)](nodeRequest,_0x90fc9e[_0x2d7ebc(0x193)],_0x1d418e,_0x465cdb,_0x4c01eb);if(_0x4b6488[_0x2d7ebc(0x1f0)][_0x2d7ebc(0x1d5)]){const _0x446231={};_0x446231['message']=_0x4b6488[_0x2d7ebc(0x1f0)][_0x2d7ebc(0x1d5)];throw _0x446231;}else _0x90fc9e[_0x2d7ebc(0x1a2)](debug,_0x148c7b+_0x2d7ebc(0x18a)+_0x2f83e4+_0x2d7ebc(0x1b5)+util[_0x2d7ebc(0x18c)]('%j',_0x4b6488[_0x2d7ebc(0x1f0)])),this[_0x2d7ebc(0x1b0)]=Math[_0x2d7ebc(0x1e9)](0x0,_0x90fc9e[_0x2d7ebc(0x189)](this[_0x2d7ebc(0x1b0)],_0x465cdb[_0x2d7ebc(0x1d3)]));}catch(_0x39a357){_0x39a357[_0x2d7ebc(0x1e7)]?_0x90fc9e[_0x2d7ebc(0x1a2)](debug,_0x2d7ebc(0x1c7)+_0x148c7b+'\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20'+_0x39a357[_0x2d7ebc(0x1e7)]['status']+'\x20'+_0x39a357['response'][_0x2d7ebc(0x1e0)]+'\x20'+util[_0x2d7ebc(0x18c)]('%j',_0x39a357[_0x2d7ebc(0x1e7)])):_0x90fc9e[_0x2d7ebc(0x1a0)](debug,_0x2d7ebc(0x1c7)+_0x148c7b+'\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20'+(_0x39a357['message']||_0x39a357)),this[_0x2d7ebc(0x1b0)]=Math[_0x2d7ebc(0x1e9)](0x0,_0x90fc9e[_0x2d7ebc(0x189)](this['pendingUploads'],_0x465cdb['length']));}};['startEventBatchPolling']=()=>{const _0x120083=a86_0x3d72e6,_0x2a3af5={'GGYxV':function(_0x46e8ee,_0x50af31){return _0x46e8ee>_0x50af31;},'TQwPh':function(_0x40faf5,_0x475fe6){return _0x40faf5(_0x475fe6);},'cTCYx':_0x120083(0x1a9),'ObYew':function(_0x5ffcbf,_0x1a83cf){return _0x5ffcbf(_0x1a83cf);},'UFIsE':function(_0x2ca25e,_0x1053fe,_0x364c35){return _0x2ca25e(_0x1053fe,_0x364c35);}};this[_0x120083(0x1a7)]=_0x2a3af5[_0x120083(0x1ce)](setInterval,async()=>{const _0x516e2c=_0x120083;if(_0x2a3af5[_0x516e2c(0x1e4)](this[_0x516e2c(0x1da)][_0x516e2c(0x1d3)],0x0)){_0x2a3af5[_0x516e2c(0x19b)](trace,_0x516e2c(0x186)+this[_0x516e2c(0x1da)]['length']);const _0x2b262e=this[_0x516e2c(0x1da)]['slice'](0x0,BATCH_SIZE);this['queue'][_0x516e2c(0x1b7)](0x0,BATCH_SIZE),await this[_0x516e2c(0x1d0)](this[_0x516e2c(0x194)],_0x2a3af5[_0x516e2c(0x18e)],_0x2b262e),_0x2a3af5[_0x516e2c(0x197)](trace,'Remaining\x20Queue\x20Length\x20-\x20'+this[_0x516e2c(0x1da)]['length']);}},BATCH_INTERVAL);};[a86_0x3d72e6(0x198)]=()=>{const _0x5d7b3=a86_0x3d72e6,_0x4d5938={};_0x4d5938['kiywn']=_0x5d7b3(0x1e2);const _0x31ea41=_0x4d5938;this[_0x5d7b3(0x1ac)](_0x31ea41[_0x5d7b3(0x185)]),this[_0x5d7b3(0x1d6)]();};['removeEventBatchPolling']=_0x28799d=>{const _0x26a2ed=a86_0x3d72e6,_0x34e435={'GicaF':function(_0x5a83b5,_0x37b28c){return _0x5a83b5(_0x37b28c);},'RSxJE':function(_0x513718,_0xebc49e){return _0x513718===_0xebc49e;},'wgzeN':_0x26a2ed(0x1c4)};this['pollEventBatchInterval']&&(_0x34e435[_0x26a2ed(0x1c1)](clearInterval,this[_0x26a2ed(0x1a7)]),this[_0x26a2ed(0x1a7)]=null,_0x34e435[_0x26a2ed(0x1e5)](_0x28799d,_0x34e435[_0x26a2ed(0x196)])&&(this['started']=![]));};[a86_0x3d72e6(0x1b3)]=()=>{const _0x141caf=a86_0x3d72e6,_0x58daee={};_0x58daee['WdhmO']=function(_0x1614aa,_0x2ee0bc){return _0x1614aa>=_0x2ee0bc;};const _0x27b069=_0x58daee;return _0x27b069[_0x141caf(0x191)](this[_0x141caf(0x1da)]['length'],BATCH_SIZE);};async[a86_0x3d72e6(0x1bc)](_0x8e028b=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x398810=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x43dd5c=a86_0x3d72e6,_0x517a9c={'DXxgK':function(_0x885967,_0x315d1f){return _0x885967<=_0x315d1f;},'MijXd':function(_0x7a29c0,_0x2f737d){return _0x7a29c0(_0x2f737d);},'lyWVM':function(_0x25dd16,_0x2c992a){return _0x25dd16-_0x2c992a;}};if(_0x517a9c[_0x43dd5c(0x1ca)](this[_0x43dd5c(0x1b0)],0x0)||_0x517a9c[_0x43dd5c(0x1ca)](_0x8e028b,0x0))return;return await _0x517a9c[_0x43dd5c(0x18f)](sleep,_0x398810),this[_0x43dd5c(0x1bc)](_0x517a9c['lyWVM'](_0x8e028b,_0x398810));}}module[a86_0x3d72e6(0x1c2)]=RequestQueueHandler;