const a86_0x430b96=a86_0x2c36;function a86_0x4101(){const _0x219af7=['response','xOeSK','AjUKB','upload-attachments','hook_run','event_type','217335yMAtvi','add','max','RESETTING','TEST_SCREENSHOT','proceedWithData','./utils','MLmUf','753172uEyuOR','pendingUploads','byteLength','splice','resetEventBatchPolling','error','oRpou','map','Processing\x20events.\x20Queue\x20Length\x20-\x20','hZKmU','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','rLyLC','tMStq','dECKv','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','174690goSVIG','Soyvv','proceedWithUrl','cyMCK','sunoa','slice','getInstance','LogCreated','\x20bytes.\x20Events\x20are\x20','startEventBatchPolling','../helper','nmgNB','Shutdown-Queue','BHeOl','format','\x20event\x20successful\x20for\x20events\x20','370656UwglNh','logs','data','fQHoP','includes','started','wLtya','Interval-Queue','uuid','EXCEPTION\x20IN\x20','PdvrS','jfuUa','uploadPending','queue','POST','mElBL','removeEventBatchPolling','AbDzT','JImYu','TestRunFinished','39291ecexDW','./constants','batchAndPostEvents','uploadAttachmentUrl','WZxky','IZpKG','api/v1/screenshots','length','XcfrE','351632GTfAIf','api/v1/batch','screenshotEventUrl','178958JgrImt','Imrvg','\x20--\x20','utf8','split','EXbOz','OngKM','shouldProceed','HKqay','Welut','OVDcn','18DCkXxR','Kdnfv','HookRunFinished','util','ssMXM','statusText','shutdown','message','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','mMMrk','pollEventBatchInterval','eventUrl','kind','TEST_ATTACHMENT','SEgdL','exports','REMOVING','12HfQCRK','HookRunStarted','.\x20Request\x20Size\x20-\x20','TFuzr','BATCH_EVENT_TYPES','start'];a86_0x4101=function(){return _0x219af7;};return a86_0x4101();}(function(_0x10dd33,_0x1070b5){const _0x1eac26=a86_0x2c36,_0xde3905=_0x10dd33();while(!![]){try{const _0x1fc696=parseInt(_0x1eac26(0x144))/0x1+-parseInt(_0x1eac26(0x150))/0x2+-parseInt(_0x1eac26(0x120))/0x3+-parseInt(_0x1eac26(0x16c))/0x4*(-parseInt(_0x1eac26(0x178))/0x5)+-parseInt(_0x1eac26(0x130))/0x6+parseInt(_0x1eac26(0x111))/0x7+parseInt(_0x1eac26(0x14d))/0x8*(parseInt(_0x1eac26(0x15b))/0x9);if(_0x1fc696===_0x1070b5)break;else _0xde3905['push'](_0xde3905['shift']());}catch(_0x30ffd7){_0xde3905['push'](_0xde3905['shift']());}}}(a86_0x4101,0x2603f));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a86_0x430b96(0x145)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a86_0x430b96(0x10f)),{nestedKeyValue}=require(a86_0x430b96(0x12a)),util=require(a86_0x430b96(0x15e));class RequestQueueHandler{static ['instance'];[a86_0x430b96(0x112)]=0x0;constructor(){const _0x2b6d0d=a86_0x430b96,_0x24ac86={};_0x24ac86[_0x2b6d0d(0x149)]='5|1|6|4|2|0|3',_0x24ac86[_0x2b6d0d(0x173)]=_0x2b6d0d(0x127),_0x24ac86[_0x2b6d0d(0x151)]='CBTSessionCreated',_0x24ac86[_0x2b6d0d(0x158)]=_0x2b6d0d(0x143),_0x24ac86[_0x2b6d0d(0x159)]='TestRunSkipped',_0x24ac86['AjUKB']=_0x2b6d0d(0x15d),_0x24ac86[_0x2b6d0d(0x169)]='TestRunStarted',_0x24ac86[_0x2b6d0d(0x142)]=_0x2b6d0d(0x16d),_0x24ac86['BHeOl']=_0x2b6d0d(0x175),_0x24ac86['Soyvv']=_0x2b6d0d(0x14a),_0x24ac86['XcfrE']=_0x2b6d0d(0x14e);const _0x49a4d6=_0x24ac86,_0x4200fc=_0x49a4d6[_0x2b6d0d(0x149)][_0x2b6d0d(0x154)]('|');let _0x53523e=0x0;while(!![]){switch(_0x4200fc[_0x53523e++]){case'0':this[_0x2b6d0d(0x170)]=[_0x49a4d6[_0x2b6d0d(0x173)],_0x49a4d6[_0x2b6d0d(0x151)],_0x49a4d6['HKqay'],_0x49a4d6['Welut'],_0x49a4d6[_0x2b6d0d(0x174)],_0x49a4d6['SEgdL'],_0x49a4d6['JImYu']];continue;case'1':this[_0x2b6d0d(0x135)]=![];continue;case'2':this[_0x2b6d0d(0x147)]=_0x49a4d6[_0x2b6d0d(0x12d)];continue;case'3':this['pollEventBatchInterval']=null;continue;case'4':this[_0x2b6d0d(0x14f)]=_0x49a4d6[_0x2b6d0d(0x121)];continue;case'5':this[_0x2b6d0d(0x13d)]=[];continue;case'6':this['eventUrl']=_0x49a4d6[_0x2b6d0d(0x14c)];continue;}break;}}static[a86_0x430b96(0x126)](){return!RequestQueueHandler['instance']&&(RequestQueueHandler['instance']=new RequestQueueHandler()),RequestQueueHandler['instance'];}[a86_0x430b96(0x171)]=()=>{const _0x28bf74=a86_0x430b96;!this[_0x28bf74(0x135)]&&(this[_0x28bf74(0x135)]=!![],this[_0x28bf74(0x129)]());};[a86_0x430b96(0x10a)]=_0x297a81=>{const _0x3b8ae4=a86_0x430b96,_0x3658b6={'jJjls':function(_0xca8bae,_0x191160){return _0xca8bae===_0x191160;},'Kdnfv':_0x3b8ae4(0x10d),'UgJXd':function(_0xe585e9,_0x39f6cf){return _0xe585e9>_0x39f6cf;},'YsnFA':function(_0x425bd9,_0x13756e){return _0x425bd9===_0x13756e;},'PjYQQ':_0x3b8ae4(0x168),'dECKv':function(_0x9bc4aa,_0x59fd85){return _0x9bc4aa!==_0x59fd85;},'cyMCK':_0x3b8ae4(0x143),'DEUft':function(_0x3eee86,_0xae7256){return _0x3eee86(_0xae7256);},'QGMst':'Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..'};if(this[_0x3b8ae4(0x170)][_0x3b8ae4(0x134)](_0x297a81[_0x3b8ae4(0x177)])){if(_0x297a81[_0x3b8ae4(0x131)]&&_0x297a81[_0x3b8ae4(0x131)][0x0]&&_0x3658b6['jJjls'](_0x297a81[_0x3b8ae4(0x131)][0x0][_0x3b8ae4(0x167)],_0x3658b6[_0x3b8ae4(0x15c)])){const _0x62f6fa={};return _0x62f6fa[_0x3b8ae4(0x157)]=!![],_0x62f6fa[_0x3b8ae4(0x10e)]=[_0x297a81],_0x62f6fa['proceedWithUrl']=this[_0x3b8ae4(0x14f)],_0x62f6fa;}if(_0x297a81['logs']&&_0x3658b6['UgJXd'](_0x297a81[_0x3b8ae4(0x131)][_0x3b8ae4(0x14b)],0x0)&&_0x3658b6['YsnFA'](_0x297a81[_0x3b8ae4(0x131)][0x0][_0x3b8ae4(0x167)],_0x3658b6['PjYQQ'])&&_0x3658b6[_0x3b8ae4(0x11e)](_0x297a81[_0x3b8ae4(0x177)],_0x3658b6[_0x3b8ae4(0x123)])){const _0x212831={};return _0x212831[_0x3b8ae4(0x157)]=!![],_0x212831[_0x3b8ae4(0x10e)]=[_0x297a81],_0x212831[_0x3b8ae4(0x122)]=this['uploadAttachmentUrl'],_0x212831;}this[_0x3b8ae4(0x13d)]['push'](_0x297a81);let _0x5180fa=null;const _0x4a537d=this[_0x3b8ae4(0x157)]();_0x4a537d&&(_0x3658b6['DEUft'](trace,_0x3658b6['QGMst']),_0x5180fa=this[_0x3b8ae4(0x13d)]['slice'](0x0,BATCH_SIZE),this[_0x3b8ae4(0x13d)][_0x3b8ae4(0x114)](0x0,BATCH_SIZE),this[_0x3b8ae4(0x115)]());const _0x220ac0={};return _0x220ac0[_0x3b8ae4(0x157)]=_0x4a537d,_0x220ac0[_0x3b8ae4(0x10e)]=_0x5180fa,_0x220ac0['proceedWithUrl']=this[_0x3b8ae4(0x166)],_0x220ac0;}const _0x350780={};return _0x350780[_0x3b8ae4(0x157)]=!![],_0x350780;};[a86_0x430b96(0x161)]=async()=>{const _0x39be52=a86_0x430b96,_0xe54ead={'hZKmU':_0x39be52(0x16b),'mMMrk':function(_0x1ed6c8,_0x318f39){return _0x1ed6c8>_0x318f39;},'wLtya':_0x39be52(0x12c),'rLyLC':function(_0xca688e,_0x50963d){return _0xca688e>_0x50963d;},'jfuUa':function(_0x2863f6,_0x30d22d){return _0x2863f6(_0x30d22d);}};await this[_0x39be52(0x13c)](),this[_0x39be52(0x140)](_0xe54ead[_0x39be52(0x11a)]);while(_0xe54ead[_0x39be52(0x164)](this['queue']['length'],0x0)){const _0x32e6db=this['queue'][_0x39be52(0x125)](0x0,BATCH_SIZE);this[_0x39be52(0x13d)][_0x39be52(0x114)](0x0,BATCH_SIZE),await this[_0x39be52(0x146)](this[_0x39be52(0x166)],_0xe54ead[_0x39be52(0x136)],_0x32e6db);}_0xe54ead[_0x39be52(0x11c)](this[_0x39be52(0x112)],0x0)&&_0xe54ead[_0x39be52(0x13b)](debug,_0x39be52(0x163)+this['pendingUploads']);};['batchAndPostEvents']=async(_0x121d73,_0x5274aa,_0x5e3fc5)=>{const _0x103491=a86_0x430b96,_0x3bc3ca={'TFuzr':function(_0x314182,_0x32518e){return _0x314182(_0x32518e);},'fQHoP':_0x103491(0x153),'ZCGen':function(_0x5a2b4b,_0x3080fc){return _0x5a2b4b(_0x3080fc);},'eHKUm':function(_0x292c42){return _0x292c42();},'YwmTy':function(_0x21faab,_0x34426f,_0x494bf4,_0x224aea,_0x5ca431){return _0x21faab(_0x34426f,_0x494bf4,_0x224aea,_0x5ca431);},'JPNps':_0x103491(0x13e),'AbDzT':function(_0xf00d66,_0x7a0bfe){return _0xf00d66(_0x7a0bfe);},'MLmUf':function(_0x435531,_0x34e86a){return _0x435531-_0x34e86a;}};let _0x1215ee='';try{_0x1215ee=_0x5e3fc5[_0x103491(0x118)](_0x144d58=>'\x27'+_0x144d58[_0x103491(0x177)]+'\x27:'+(nestedKeyValue(_0x144d58,['test_run',_0x103491(0x138)])||nestedKeyValue(_0x144d58,[_0x103491(0x176),_0x103491(0x138)])))['join'](','),_0x3bc3ca[_0x103491(0x16f)](debug,'Processing\x20batch\x20events\x20for\x20'+_0x5274aa+_0x103491(0x16e)+Buffer[_0x103491(0x113)](util[_0x103491(0x12e)]('%j',_0x5e3fc5),_0x3bc3ca[_0x103491(0x133)])+_0x103491(0x128)+_0x1215ee);}catch(_0x2b3e50){_0x3bc3ca['ZCGen'](debug,_0x103491(0x11b)+util[_0x103491(0x12e)](_0x2b3e50)+'}');}const _0x4b7594={'headers':_0x3bc3ca['eHKUm'](getDefaultHeaders)};try{const _0x40f1d8=await _0x3bc3ca['YwmTy'](nodeRequest,_0x3bc3ca['JPNps'],_0x121d73,_0x5e3fc5,_0x4b7594);if(_0x40f1d8[_0x103491(0x132)][_0x103491(0x116)]){const _0x1b78bc={};_0x1b78bc[_0x103491(0x162)]=_0x40f1d8['data'][_0x103491(0x116)];throw _0x1b78bc;}else _0x3bc3ca[_0x103491(0x141)](debug,_0x5274aa+_0x103491(0x12f)+_0x1215ee+_0x103491(0x152)+util[_0x103491(0x12e)]('%j',_0x40f1d8['data'])),this[_0x103491(0x112)]=Math[_0x103491(0x10b)](0x0,_0x3bc3ca[_0x103491(0x110)](this[_0x103491(0x112)],_0x5e3fc5[_0x103491(0x14b)]));}catch(_0x2bd267){_0x2bd267[_0x103491(0x172)]?_0x3bc3ca[_0x103491(0x16f)](debug,_0x103491(0x139)+_0x5274aa+'\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20'+_0x2bd267['response']['status']+'\x20'+_0x2bd267[_0x103491(0x172)][_0x103491(0x160)]+'\x20'+util[_0x103491(0x12e)]('%j',_0x2bd267[_0x103491(0x172)])):_0x3bc3ca[_0x103491(0x16f)](debug,'EXCEPTION\x20IN\x20'+_0x5274aa+_0x103491(0x11f)+(_0x2bd267['message']||_0x2bd267)),this['pendingUploads']=Math[_0x103491(0x10b)](0x0,_0x3bc3ca[_0x103491(0x110)](this[_0x103491(0x112)],_0x5e3fc5['length']));}};['startEventBatchPolling']=()=>{const _0x18c211=a86_0x430b96,_0x2fa6bd={'nmgNB':function(_0x181301,_0x1a209a){return _0x181301>_0x1a209a;},'tMStq':function(_0x1190db,_0x432704){return _0x1190db(_0x432704);},'EXbOz':_0x18c211(0x137),'OngKM':function(_0x71e6fa,_0x5e207f,_0xbb781c){return _0x71e6fa(_0x5e207f,_0xbb781c);}};this['pollEventBatchInterval']=_0x2fa6bd[_0x18c211(0x156)](setInterval,async()=>{const _0x156424=_0x18c211;if(_0x2fa6bd[_0x156424(0x12b)](this[_0x156424(0x13d)]['length'],0x0)){_0x2fa6bd['tMStq'](trace,_0x156424(0x119)+this[_0x156424(0x13d)][_0x156424(0x14b)]);const _0x21bdff=this[_0x156424(0x13d)][_0x156424(0x125)](0x0,BATCH_SIZE);this['queue']['splice'](0x0,BATCH_SIZE),await this[_0x156424(0x146)](this[_0x156424(0x166)],_0x2fa6bd[_0x156424(0x155)],_0x21bdff),_0x2fa6bd[_0x156424(0x11d)](trace,'Remaining\x20Queue\x20Length\x20-\x20'+this['queue'][_0x156424(0x14b)]);}},BATCH_INTERVAL);};[a86_0x430b96(0x115)]=()=>{const _0x5145ba=a86_0x430b96,_0x29ccce={};_0x29ccce[_0x5145ba(0x13f)]=_0x5145ba(0x10c);const _0xbffa11=_0x29ccce;this[_0x5145ba(0x140)](_0xbffa11['mElBL']),this[_0x5145ba(0x129)]();};['removeEventBatchPolling']=_0x117518=>{const _0x86d5ed=a86_0x430b96,_0x329817={'WZxky':function(_0x1eeab7,_0x44530e){return _0x1eeab7(_0x44530e);},'OVDcn':function(_0x22cf02,_0x42834c){return _0x22cf02===_0x42834c;},'oRpou':_0x86d5ed(0x16b)};this[_0x86d5ed(0x165)]&&(_0x329817[_0x86d5ed(0x148)](clearInterval,this[_0x86d5ed(0x165)]),this[_0x86d5ed(0x165)]=null,_0x329817[_0x86d5ed(0x15a)](_0x117518,_0x329817[_0x86d5ed(0x117)])&&(this['started']=![]));};[a86_0x430b96(0x157)]=()=>{const _0x3c292c=a86_0x430b96,_0x3c9c55={};_0x3c9c55['mmMIS']=function(_0x3e4d9c,_0x1e9ba1){return _0x3e4d9c>=_0x1e9ba1;};const _0x118930=_0x3c9c55;return _0x118930['mmMIS'](this[_0x3c292c(0x13d)][_0x3c292c(0x14b)],BATCH_SIZE);};async['uploadPending'](_0x2801aa=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x5af1fd=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x45aec8=a86_0x430b96,_0x3732a6={'ssMXM':function(_0x3e0a86,_0x165652){return _0x3e0a86<=_0x165652;},'sunoa':function(_0x280f28,_0x56d362){return _0x280f28(_0x56d362);},'PdvrS':function(_0x147fbb,_0x31ea8c){return _0x147fbb-_0x31ea8c;}};if(_0x3732a6[_0x45aec8(0x15f)](this[_0x45aec8(0x112)],0x0)||_0x3732a6[_0x45aec8(0x15f)](_0x2801aa,0x0))return;return await _0x3732a6[_0x45aec8(0x124)](sleep,_0x5af1fd),this['uploadPending'](_0x3732a6[_0x45aec8(0x13a)](_0x2801aa,_0x5af1fd));}}function a86_0x2c36(_0x10ad8c,_0x595afe){const _0x41013d=a86_0x4101();return a86_0x2c36=function(_0x2c36fe,_0x4e7cf3){_0x2c36fe=_0x2c36fe-0x10a;let _0x540c2a=_0x41013d[_0x2c36fe];return _0x540c2a;},a86_0x2c36(_0x10ad8c,_0x595afe);}module[a86_0x430b96(0x16a)]=RequestQueueHandler;