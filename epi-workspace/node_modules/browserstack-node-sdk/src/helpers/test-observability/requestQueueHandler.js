const a128_0x97f911=a128_0x2606;function a128_0x2606(_0x5c95e4,_0x40ad6e){const _0x3f6f61=a128_0x3f6f();return a128_0x2606=function(_0x2606f8,_0x59fbf1){_0x2606f8=_0x2606f8-0x75;let _0x4b920c=_0x3f6f61[_0x2606f8];return _0x4b920c;},a128_0x2606(_0x5c95e4,_0x40ad6e);}(function(_0x36027e,_0x1c870c){const _0x32aa37=a128_0x2606,_0xf298c9=_0x36027e();while(!![]){try{const _0x2313a0=-parseInt(_0x32aa37(0xb3))/0x1+parseInt(_0x32aa37(0x79))/0x2+parseInt(_0x32aa37(0x8f))/0x3+parseInt(_0x32aa37(0xe7))/0x4*(-parseInt(_0x32aa37(0xa5))/0x5)+-parseInt(_0x32aa37(0x93))/0x6+parseInt(_0x32aa37(0x87))/0x7*(parseInt(_0x32aa37(0x75))/0x8)+parseInt(_0x32aa37(0xb8))/0x9*(parseInt(_0x32aa37(0xb0))/0xa);if(_0x2313a0===_0x1c870c)break;else _0xf298c9['push'](_0xf298c9['shift']());}catch(_0x212b65){_0xf298c9['push'](_0xf298c9['shift']());}}}(a128_0x3f6f,0x742b7));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a128_0x97f911(0xca)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a128_0x97f911(0xdb)),{nestedKeyValue}=require(a128_0x97f911(0xaf)),util=require(a128_0x97f911(0xd1)),constants=require(a128_0x97f911(0x92));class RequestQueueHandler{static ['instance'];[a128_0x97f911(0xde)]=0x0;constructor(){const _0x47ec30=a128_0x97f911,_0x440342={};_0x440342[_0x47ec30(0xa1)]=_0x47ec30(0xcc),_0x440342[_0x47ec30(0x7e)]=_0x47ec30(0x80),_0x440342[_0x47ec30(0xdf)]=_0x47ec30(0x77),_0x440342['teiCd']=_0x47ec30(0xa2),_0x440342[_0x47ec30(0xae)]='CBTSessionCreated',_0x440342[_0x47ec30(0xcd)]=_0x47ec30(0xa6),_0x440342[_0x47ec30(0xac)]='TestRunSkipped',_0x440342[_0x47ec30(0xe9)]='HookRunFinished',_0x440342['MDVWD']=_0x47ec30(0xc1),_0x440342[_0x47ec30(0x9b)]='HookRunStarted',_0x440342[_0x47ec30(0xab)]=_0x47ec30(0xba);const _0xd75714=_0x440342,_0x263bf7=_0xd75714[_0x47ec30(0xa1)][_0x47ec30(0xd2)]('|');let _0x25c9d3=0x0;while(!![]){switch(_0x263bf7[_0x25c9d3++]){case'0':this[_0x47ec30(0xa8)]=_0xd75714[_0x47ec30(0x7e)];continue;case'1':this['started']=![];continue;case'2':this[_0x47ec30(0x7a)]=_0xd75714['sUMpF'];continue;case'3':this[_0x47ec30(0xb2)]=null;continue;case'4':this[_0x47ec30(0x95)]=[_0xd75714[_0x47ec30(0xe8)],_0xd75714[_0x47ec30(0xae)],_0xd75714[_0x47ec30(0xcd)],_0xd75714[_0x47ec30(0xac)],_0xd75714[_0x47ec30(0xe9)],_0xd75714[_0x47ec30(0x7b)],_0xd75714['SSCiV']];continue;case'5':this['queue']=[];continue;case'6':this[_0x47ec30(0xb7)]=_0xd75714['yHrud'];continue;}break;}}static[a128_0x97f911(0xe3)](){const _0x272e31=a128_0x97f911;return!RequestQueueHandler['instance']&&(RequestQueueHandler[_0x272e31(0x9e)]=new RequestQueueHandler()),RequestQueueHandler['instance'];}['start']=()=>{const _0x11052c=a128_0x97f911;!this[_0x11052c(0xbd)]&&(this[_0x11052c(0xbd)]=!![],this[_0x11052c(0x76)]());};[a128_0x97f911(0x82)]=_0x4252eb=>{const _0x2cd498=a128_0x97f911,_0x1fbf17={'vusjt':function(_0x310eca,_0x73c596){return _0x310eca===_0x73c596;},'Gcekj':'TEST_SCREENSHOT','aiYkB':function(_0x478314,_0x254d4f){return _0x478314>_0x254d4f;},'vQIMT':function(_0x6736cd,_0x41f826){return _0x6736cd===_0x41f826;},'VyNVN':_0x2cd498(0xd5),'eJdaq':function(_0x2e85d1,_0x74ab2a){return _0x2e85d1!==_0x74ab2a;},'kjEdl':_0x2cd498(0xa6),'mdXjJ':function(_0x3875d0,_0x272035){return _0x3875d0(_0x272035);},'QMZYZ':_0x2cd498(0xc8)};if(this[_0x2cd498(0x95)][_0x2cd498(0x8b)](_0x4252eb[_0x2cd498(0x90)])){if(_0x4252eb[_0x2cd498(0xdc)]&&_0x4252eb[_0x2cd498(0xdc)][0x0]&&_0x1fbf17[_0x2cd498(0xce)](_0x4252eb[_0x2cd498(0xdc)][0x0]['kind'],_0x1fbf17[_0x2cd498(0xd9)])){const _0x5f3ce4={};return _0x5f3ce4[_0x2cd498(0x99)]=!![],_0x5f3ce4[_0x2cd498(0xb4)]=[_0x4252eb],_0x5f3ce4[_0x2cd498(0xa9)]=this[_0x2cd498(0x7a)],_0x5f3ce4;}if(_0x4252eb[_0x2cd498(0xdc)]&&_0x1fbf17['aiYkB'](_0x4252eb[_0x2cd498(0xdc)][_0x2cd498(0xc9)],0x0)&&_0x1fbf17[_0x2cd498(0xbf)](_0x4252eb[_0x2cd498(0xdc)][0x0][_0x2cd498(0xc6)],_0x1fbf17[_0x2cd498(0x88)])&&_0x1fbf17[_0x2cd498(0x98)](_0x4252eb['event_type'],_0x1fbf17[_0x2cd498(0xad)])){const _0x2c64c1={};return _0x2c64c1['shouldProceed']=!![],_0x2c64c1[_0x2cd498(0xb4)]=[_0x4252eb],_0x2c64c1[_0x2cd498(0xa9)]=this[_0x2cd498(0xa8)],_0x2c64c1;}this['queue'][_0x2cd498(0x97)](_0x4252eb);let _0x6f1e2=null;const _0x33a513=this[_0x2cd498(0x99)]();_0x33a513&&(_0x1fbf17[_0x2cd498(0xcb)](trace,_0x1fbf17[_0x2cd498(0xe1)]),_0x6f1e2=this[_0x2cd498(0xbc)]['slice'](0x0,BATCH_SIZE),this[_0x2cd498(0xbc)][_0x2cd498(0x84)](0x0,BATCH_SIZE),this[_0x2cd498(0x7f)]());const _0x481d3c={};return _0x481d3c['shouldProceed']=_0x33a513,_0x481d3c[_0x2cd498(0xb4)]=_0x6f1e2,_0x481d3c['proceedWithUrl']=this[_0x2cd498(0xb7)],_0x481d3c;}const _0x358d93={};return _0x358d93[_0x2cd498(0x99)]=!![],_0x358d93;};['shutdown']=async()=>{const _0x22a60e=a128_0x97f911,_0x587b66={'sjHdb':_0x22a60e(0x9c),'KkcLW':function(_0x553f43,_0xed7f1d){return _0x553f43>_0xed7f1d;},'WpeJE':_0x22a60e(0x7d),'GyCVi':function(_0x256e86,_0x3f90f8){return _0x256e86(_0x3f90f8);}};await this[_0x22a60e(0x85)](),this[_0x22a60e(0x8d)](_0x587b66['sjHdb']);while(_0x587b66['KkcLW'](this[_0x22a60e(0xbc)][_0x22a60e(0xc9)],0x0)){const _0x374615=this[_0x22a60e(0xbc)][_0x22a60e(0xb1)](0x0,BATCH_SIZE);this[_0x22a60e(0xbc)][_0x22a60e(0x84)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x22a60e(0xb7)],_0x587b66[_0x22a60e(0xd4)],_0x374615);}_0x587b66[_0x22a60e(0xe4)](this['pendingUploads'],0x0)&&_0x587b66[_0x22a60e(0x86)](debug,_0x22a60e(0xdd)+this['pendingUploads']);};[a128_0x97f911(0xa4)]=async(_0x2c6377,_0x4935e8,_0x3c4fbf)=>{const _0x33a79c=a128_0x97f911,_0x523bff={'ciwZW':function(_0x42d8e3,_0x27904c){return _0x42d8e3(_0x27904c);},'wvvDX':_0x33a79c(0xd8),'MSoST':function(_0xde1abb,_0x2c862){return _0xde1abb(_0x2c862);},'pYtqq':function(_0x55067d){return _0x55067d();},'mEyqJ':function(_0x232da2,_0xb007c8,_0x1153c9,_0xdd1e64,_0x3f163f){return _0x232da2(_0xb007c8,_0x1153c9,_0xdd1e64,_0x3f163f);},'qnTNA':'POST','rBCub':function(_0x5a90b8,_0x10e539){return _0x5a90b8(_0x10e539);},'kkgsO':function(_0x1fd461,_0x2bc21c){return _0x1fd461-_0x2bc21c;},'wEjxo':function(_0x3d2534,_0x3763e8){return _0x3d2534(_0x3763e8);},'qBqoE':function(_0x26a2be,_0x464234){return _0x26a2be-_0x464234;}};let _0x252016='';try{_0x252016=_0x3c4fbf[_0x33a79c(0xd3)](_0x1cb402=>'\x27'+_0x1cb402[_0x33a79c(0x90)]+'\x27:'+(nestedKeyValue(_0x1cb402,[_0x33a79c(0x81),_0x33a79c(0xb5)])||nestedKeyValue(_0x1cb402,['hook_run','uuid'])))[_0x33a79c(0xa0)](','),_0x523bff[_0x33a79c(0x7c)](debug,_0x33a79c(0xda)+_0x4935e8+_0x33a79c(0x78)+Buffer[_0x33a79c(0x96)](util[_0x33a79c(0xe5)]('%j',_0x3c4fbf),_0x523bff[_0x33a79c(0xe2)])+_0x33a79c(0xd6)+_0x252016);}catch(_0x214af2){_0x523bff[_0x33a79c(0xe0)](debug,_0x33a79c(0xc5)+util['format'](_0x214af2)+'}');}const _0x565d08={'headers':_0x523bff['pYtqq'](getDefaultHeaders)};try{const _0x325d9c=await _0x523bff[_0x33a79c(0xaa)](nodeRequest,_0x523bff[_0x33a79c(0xbe)],_0x2c6377,_0x3c4fbf,_0x565d08);if(_0x325d9c[_0x33a79c(0x94)][_0x33a79c(0x9d)]){const _0x32f7ce={};_0x32f7ce['message']=_0x325d9c[_0x33a79c(0x94)][_0x33a79c(0x9d)];throw _0x32f7ce;}else _0x523bff[_0x33a79c(0xa3)](debug,_0x4935e8+_0x33a79c(0xc3)+_0x252016+_0x33a79c(0x91)+util[_0x33a79c(0xe5)]('%j',_0x325d9c[_0x33a79c(0x94)])),this[_0x33a79c(0xde)]=Math[_0x33a79c(0xcf)](0x0,_0x523bff[_0x33a79c(0x8e)](this[_0x33a79c(0xde)],_0x3c4fbf[_0x33a79c(0xc9)]));}catch(_0x123311){_0x123311[_0x33a79c(0x9f)]?_0x523bff['ciwZW'](debug,_0x33a79c(0xa7)+_0x4935e8+_0x33a79c(0xd7)+constants[_0x33a79c(0xc2)]+_0x33a79c(0xd0)+_0x123311['response']['status']+'\x20'+_0x123311[_0x33a79c(0x9f)][_0x33a79c(0xb9)]+'\x20'+util[_0x33a79c(0xe5)]('%j',_0x123311[_0x33a79c(0x9f)])):_0x523bff['wEjxo'](debug,'EXCEPTION\x20IN\x20'+_0x4935e8+_0x33a79c(0xd7)+constants[_0x33a79c(0xc2)]+'\x20:\x20'+(_0x123311['message']||_0x123311)),this[_0x33a79c(0xde)]=Math[_0x33a79c(0xcf)](0x0,_0x523bff[_0x33a79c(0x9a)](this['pendingUploads'],_0x3c4fbf['length']));}};[a128_0x97f911(0x76)]=()=>{const _0x494ad3=a128_0x97f911,_0x3596a6={'FzKhT':function(_0x31fe0a,_0x5bdec7){return _0x31fe0a>_0x5bdec7;},'dkTWr':function(_0x4cc432,_0x3e06d2){return _0x4cc432(_0x3e06d2);},'uiNVB':'Interval-Queue','sRCeu':function(_0x10086a,_0x358bac,_0x5bcecd){return _0x10086a(_0x358bac,_0x5bcecd);}};this[_0x494ad3(0xb2)]=_0x3596a6['sRCeu'](setInterval,async()=>{const _0x3bcf4a=_0x494ad3;if(_0x3596a6[_0x3bcf4a(0xc0)](this[_0x3bcf4a(0xbc)]['length'],0x0)){_0x3596a6[_0x3bcf4a(0x8a)](trace,'Processing\x20events.\x20Queue\x20Length\x20-\x20'+this[_0x3bcf4a(0xbc)][_0x3bcf4a(0xc9)]);const _0x5aea6b=this[_0x3bcf4a(0xbc)][_0x3bcf4a(0xb1)](0x0,BATCH_SIZE);this[_0x3bcf4a(0xbc)]['splice'](0x0,BATCH_SIZE),await this[_0x3bcf4a(0xa4)](this[_0x3bcf4a(0xb7)],_0x3596a6[_0x3bcf4a(0xbb)],_0x5aea6b),_0x3596a6['dkTWr'](trace,_0x3bcf4a(0xc4)+this[_0x3bcf4a(0xbc)][_0x3bcf4a(0xc9)]);}},BATCH_INTERVAL);};['resetEventBatchPolling']=()=>{const _0x86ba7f=a128_0x97f911,_0x59eee1={};_0x59eee1[_0x86ba7f(0x89)]='RESETTING';const _0x164abc=_0x59eee1;this[_0x86ba7f(0x8d)](_0x164abc[_0x86ba7f(0x89)]),this[_0x86ba7f(0x76)]();};[a128_0x97f911(0x8d)]=_0x17d967=>{const _0x4a37c7=a128_0x97f911,_0x1435ad={'ZoCtb':function(_0x2dbd2e,_0x4c5834){return _0x2dbd2e(_0x4c5834);},'rGXhw':function(_0x2ff5dd,_0x32b0e4){return _0x2ff5dd===_0x32b0e4;},'XPJul':'REMOVING'};this[_0x4a37c7(0xb2)]&&(_0x1435ad['ZoCtb'](clearInterval,this[_0x4a37c7(0xb2)]),this[_0x4a37c7(0xb2)]=null,_0x1435ad['rGXhw'](_0x17d967,_0x1435ad['XPJul'])&&(this[_0x4a37c7(0xbd)]=![]));};['shouldProceed']=()=>{const _0x5e20ef=a128_0x97f911,_0x1fd630={};_0x1fd630[_0x5e20ef(0xc7)]=function(_0x25a1b5,_0x47de8a){return _0x25a1b5>=_0x47de8a;};const _0x26eab1=_0x1fd630;return _0x26eab1[_0x5e20ef(0xc7)](this[_0x5e20ef(0xbc)][_0x5e20ef(0xc9)],BATCH_SIZE);};async['uploadPending'](_0x31a880=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x48b80b=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x77567f=a128_0x97f911,_0x4e4760={'JOmxD':function(_0x4ec829,_0x4f7834){return _0x4ec829<=_0x4f7834;},'AkgjT':function(_0x53f6ae,_0x509c72){return _0x53f6ae(_0x509c72);},'fWxAJ':function(_0x4b1a27,_0x4a69a5){return _0x4b1a27-_0x4a69a5;}};if(_0x4e4760[_0x77567f(0x8c)](this[_0x77567f(0xde)],0x0)||_0x4e4760[_0x77567f(0x8c)](_0x31a880,0x0))return;return await _0x4e4760[_0x77567f(0x83)](sleep,_0x48b80b),this[_0x77567f(0x85)](_0x4e4760[_0x77567f(0xe6)](_0x31a880,_0x48b80b));}}module[a128_0x97f911(0xb6)]=RequestQueueHandler;function a128_0x3f6f(){const _0xaa4b08=['util','split','map','WpeJE','TEST_ATTACHMENT','\x20bytes.\x20Events\x20are\x20','\x20REQUEST\x20TO\x20','utf8','Gcekj','Processing\x20batch\x20events\x20for\x20','./utils','logs','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','pendingUploads','sUMpF','MSoST','QMZYZ','wvvDX','getInstance','KkcLW','format','fWxAJ','278284ReSNxO','teiCd','EROdQ','2377808UyQNkY','startEventBatchPolling','api/v1/screenshots','.\x20Request\x20Size\x20-\x20','244722dAmPhN','screenshotEventUrl','MDVWD','ciwZW','Shutdown-Queue','GYzjl','resetEventBatchPolling','upload-attachments','test_run','add','AkgjT','splice','uploadPending','GyCVi','7SiADao','VyNVN','naVFz','dkTWr','includes','JOmxD','removeEventBatchPolling','kkgsO','776856iObxxI','event_type','\x20--\x20','../../bin/utils/constants','4762644UIEnFV','data','BATCH_EVENT_TYPES','byteLength','push','eJdaq','shouldProceed','qBqoE','SSCiV','REMOVING','error','instance','response','join','CAByW','LogCreated','rBCub','batchAndPostEvents','25UVJyVm','TestRunFinished','EXCEPTION\x20IN\x20','uploadAttachmentUrl','proceedWithUrl','mEyqJ','yHrud','sldvH','kjEdl','NNqUC','../helper','305270FYlxCH','slice','pollEventBatchInterval','312686CyXIQf','proceedWithData','uuid','exports','eventUrl','369kMiOvq','statusText','api/v1/batch','uiNVB','queue','started','qnTNA','vQIMT','FzKhT','TestRunStarted','TEST_REPORTING_ANALYTICS','\x20event\x20successful\x20for\x20events\x20','Remaining\x20Queue\x20Length\x20-\x20','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','kind','lfZIa','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','length','./constants','mdXjJ','5|1|6|2|0|4|3','uKici','vusjt','max','\x20:\x20'];a128_0x3f6f=function(){return _0xaa4b08;};return a128_0x3f6f();}