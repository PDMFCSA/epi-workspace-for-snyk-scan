const a112_0x59c1c5=a112_0x36cc;function a112_0x36cc(_0x4a016b,_0x552687){const _0x5f3dd6=a112_0x5f3d();return a112_0x36cc=function(_0x36cc28,_0x49c529){_0x36cc28=_0x36cc28-0x82;let _0x59fda9=_0x5f3dd6[_0x36cc28];return _0x59fda9;},a112_0x36cc(_0x4a016b,_0x552687);}(function(_0x6cce4d,_0x1f13eb){const _0x125bc3=a112_0x36cc,_0x3a5cf3=_0x6cce4d();while(!![]){try{const _0x3396f5=-parseInt(_0x125bc3(0xa5))/0x1*(parseInt(_0x125bc3(0xef))/0x2)+parseInt(_0x125bc3(0x9a))/0x3*(-parseInt(_0x125bc3(0xbc))/0x4)+-parseInt(_0x125bc3(0xdd))/0x5+-parseInt(_0x125bc3(0xb1))/0x6+parseInt(_0x125bc3(0xce))/0x7+parseInt(_0x125bc3(0xee))/0x8*(-parseInt(_0x125bc3(0xd0))/0x9)+-parseInt(_0x125bc3(0xe1))/0xa*(-parseInt(_0x125bc3(0xcb))/0xb);if(_0x3396f5===_0x1f13eb)break;else _0x3a5cf3['push'](_0x3a5cf3['shift']());}catch(_0x26d261){_0x3a5cf3['push'](_0x3a5cf3['shift']());}}}(a112_0x5f3d,0x737de));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require('./constants'),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require('./utils'),{nestedKeyValue}=require('../helper'),util=require(a112_0x59c1c5(0xe2));class RequestQueueHandler{static ['instance'];[a112_0x59c1c5(0xb4)]=0x0;constructor(){const _0x54bd4f=a112_0x59c1c5,_0x3319f2={};_0x3319f2['hAUDk']=_0x54bd4f(0x92),_0x3319f2['zEfvx']=_0x54bd4f(0xd6),_0x3319f2[_0x54bd4f(0x87)]=_0x54bd4f(0xa0),_0x3319f2['YzArp']=_0x54bd4f(0xe8),_0x3319f2['YasIr']='CBTSessionCreated',_0x3319f2['YsaUA']='TestRunFinished',_0x3319f2[_0x54bd4f(0xe5)]=_0x54bd4f(0x83),_0x3319f2[_0x54bd4f(0x8c)]=_0x54bd4f(0xa6),_0x3319f2['qpgBn']=_0x54bd4f(0xdb),_0x3319f2[_0x54bd4f(0xa3)]='HookRunStarted',_0x3319f2[_0x54bd4f(0xc4)]=_0x54bd4f(0x89);const _0x3e8981=_0x3319f2,_0x1ad237=_0x3e8981['hAUDk']['split']('|');let _0x27a865=0x0;while(!![]){switch(_0x1ad237[_0x27a865++]){case'0':this[_0x54bd4f(0x99)]=_0x3e8981['zEfvx'];continue;case'1':this[_0x54bd4f(0xcf)]=[];continue;case'2':this[_0x54bd4f(0xae)]=![];continue;case'3':this[_0x54bd4f(0xc2)]=_0x3e8981[_0x54bd4f(0x87)];continue;case'4':this['BATCH_EVENT_TYPES']=[_0x3e8981['YzArp'],_0x3e8981[_0x54bd4f(0x82)],_0x3e8981[_0x54bd4f(0xbd)],_0x3e8981[_0x54bd4f(0xe5)],_0x3e8981['aSILP'],_0x3e8981['qpgBn'],_0x3e8981[_0x54bd4f(0xa3)]];continue;case'5':this[_0x54bd4f(0x8f)]=null;continue;case'6':this[_0x54bd4f(0xac)]=_0x3e8981['YasNm'];continue;}break;}}static[a112_0x59c1c5(0xba)](){const _0x5de8fe=a112_0x59c1c5;return!RequestQueueHandler[_0x5de8fe(0x98)]&&(RequestQueueHandler[_0x5de8fe(0x98)]=new RequestQueueHandler()),RequestQueueHandler['instance'];}[a112_0x59c1c5(0xde)]=()=>{const _0x444aaa=a112_0x59c1c5;!this['started']&&(this[_0x444aaa(0xae)]=!![],this[_0x444aaa(0x96)]());};[a112_0x59c1c5(0xcd)]=_0x334ddf=>{const _0x4f8c85=a112_0x59c1c5,_0x305d5a={'mIKJg':function(_0xbc4870,_0x31f319){return _0xbc4870===_0x31f319;},'FSuXw':_0x4f8c85(0xe4),'RJYgg':function(_0x54e22b,_0x44a504){return _0x54e22b>_0x44a504;},'Hudry':_0x4f8c85(0x90),'CLlOf':function(_0x103400,_0x2ea5da){return _0x103400!==_0x2ea5da;},'OLdZX':_0x4f8c85(0xb7),'XSnSz':function(_0x5a1d4d,_0x244af1){return _0x5a1d4d(_0x244af1);},'bjMDq':_0x4f8c85(0xab)};if(this[_0x4f8c85(0x88)]['includes'](_0x334ddf[_0x4f8c85(0xbf)])){if(_0x334ddf[_0x4f8c85(0x97)]&&_0x334ddf[_0x4f8c85(0x97)][0x0]&&_0x305d5a[_0x4f8c85(0x91)](_0x334ddf[_0x4f8c85(0x97)][0x0][_0x4f8c85(0x84)],_0x305d5a[_0x4f8c85(0x85)])){const _0x4bebaf={};return _0x4bebaf[_0x4f8c85(0xa2)]=!![],_0x4bebaf[_0x4f8c85(0x95)]=[_0x334ddf],_0x4bebaf[_0x4f8c85(0x86)]=this[_0x4f8c85(0xac)],_0x4bebaf;}if(_0x334ddf[_0x4f8c85(0x97)]&&_0x305d5a[_0x4f8c85(0xb3)](_0x334ddf[_0x4f8c85(0x97)][_0x4f8c85(0xb2)],0x0)&&_0x305d5a['mIKJg'](_0x334ddf[_0x4f8c85(0x97)][0x0][_0x4f8c85(0x84)],_0x305d5a[_0x4f8c85(0xad)])&&_0x305d5a[_0x4f8c85(0xea)](_0x334ddf['event_type'],_0x305d5a[_0x4f8c85(0xcc)])){const _0x235fa0={};return _0x235fa0[_0x4f8c85(0xa2)]=!![],_0x235fa0[_0x4f8c85(0x95)]=[_0x334ddf],_0x235fa0['proceedWithUrl']=this[_0x4f8c85(0xc2)],_0x235fa0;}this[_0x4f8c85(0xcf)][_0x4f8c85(0xc7)](_0x334ddf);let _0x35927c=null;const _0x5b22a2=this['shouldProceed']();_0x5b22a2&&(_0x305d5a[_0x4f8c85(0x8e)](trace,_0x305d5a[_0x4f8c85(0xca)]),_0x35927c=this[_0x4f8c85(0xcf)][_0x4f8c85(0x8d)](0x0,BATCH_SIZE),this[_0x4f8c85(0xcf)]['splice'](0x0,BATCH_SIZE),this['resetEventBatchPolling']());const _0x2313e3={};return _0x2313e3['shouldProceed']=_0x5b22a2,_0x2313e3[_0x4f8c85(0x95)]=_0x35927c,_0x2313e3[_0x4f8c85(0x86)]=this['eventUrl'],_0x2313e3;}const _0x5019d2={};return _0x5019d2['shouldProceed']=!![],_0x5019d2;};['shutdown']=async()=>{const _0x3d2b96=a112_0x59c1c5,_0x13d2b7={'KudLF':'REMOVING','ypVNQ':function(_0x2cad9e,_0x2586f3){return _0x2cad9e>_0x2586f3;},'LCSbf':_0x3d2b96(0xd2),'KDlQV':function(_0x52137a,_0x21e638){return _0x52137a(_0x21e638);}};await this[_0x3d2b96(0xb6)](),this[_0x3d2b96(0xb9)](_0x13d2b7[_0x3d2b96(0xd9)]);while(_0x13d2b7[_0x3d2b96(0xd4)](this[_0x3d2b96(0xcf)]['length'],0x0)){const _0x769ba9=this[_0x3d2b96(0xcf)][_0x3d2b96(0x8d)](0x0,BATCH_SIZE);this['queue']['splice'](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x3d2b96(0x99)],_0x13d2b7[_0x3d2b96(0xb5)],_0x769ba9);}_0x13d2b7[_0x3d2b96(0xd4)](this[_0x3d2b96(0xb4)],0x0)&&_0x13d2b7['KDlQV'](debug,_0x3d2b96(0xdc)+this[_0x3d2b96(0xb4)]);};[a112_0x59c1c5(0xd7)]=async(_0x5e3e9c,_0x4c622b,_0x33fabe)=>{const _0x5cae43=a112_0x59c1c5,_0x5aeb72={'dolxy':function(_0x6a4088,_0xcd2baa){return _0x6a4088(_0xcd2baa);},'xcEnB':'utf8','tCNSz':function(_0x4dcb09,_0x1a7d92){return _0x4dcb09(_0x1a7d92);},'hiero':function(_0x46e11a){return _0x46e11a();},'OfIqE':function(_0x4a95f9,_0x5bdfee,_0x2ec7f6,_0x2af579,_0x50a785){return _0x4a95f9(_0x5bdfee,_0x2ec7f6,_0x2af579,_0x50a785);},'DMSYg':'POST','SyCog':function(_0xc4bf7a,_0x42bee4){return _0xc4bf7a-_0x42bee4;},'FrzwD':function(_0x5f49a6,_0x182310){return _0x5f49a6-_0x182310;}};let _0x3daa58='';try{_0x3daa58=_0x33fabe[_0x5cae43(0xaf)](_0x53eec3=>'\x27'+_0x53eec3[_0x5cae43(0xbf)]+'\x27:'+(nestedKeyValue(_0x53eec3,[_0x5cae43(0xaa),_0x5cae43(0x9d)])||nestedKeyValue(_0x53eec3,[_0x5cae43(0xc1),_0x5cae43(0x9d)])))['join'](','),_0x5aeb72[_0x5cae43(0xa9)](debug,'Processing\x20batch\x20events\x20for\x20'+_0x4c622b+_0x5cae43(0x8a)+Buffer[_0x5cae43(0x93)](util[_0x5cae43(0xe9)]('%j',_0x33fabe),_0x5aeb72[_0x5cae43(0x94)])+_0x5cae43(0x8b)+_0x3daa58);}catch(_0x1e530c){_0x5aeb72[_0x5cae43(0xdf)](debug,_0x5cae43(0xbe)+util['format'](_0x1e530c)+'}');}const _0x449c8e={'headers':_0x5aeb72['hiero'](getDefaultHeaders)};try{const _0x5aa5aa=await _0x5aeb72['OfIqE'](nodeRequest,_0x5aeb72[_0x5cae43(0xda)],_0x5e3e9c,_0x33fabe,_0x449c8e);if(_0x5aa5aa[_0x5cae43(0xe7)][_0x5cae43(0xf0)]){const _0x7fd83c={};_0x7fd83c['message']=_0x5aa5aa['data'][_0x5cae43(0xf0)];throw _0x7fd83c;}else _0x5aeb72['tCNSz'](debug,_0x4c622b+_0x5cae43(0xa4)+_0x3daa58+'\x20--\x20'+util['format']('%j',_0x5aa5aa['data'])),this['pendingUploads']=Math[_0x5cae43(0xbb)](0x0,_0x5aeb72[_0x5cae43(0xa8)](this[_0x5cae43(0xb4)],_0x33fabe[_0x5cae43(0xb2)]));}catch(_0x3f5b9b){_0x3f5b9b[_0x5cae43(0xc8)]?_0x5aeb72[_0x5cae43(0xdf)](debug,_0x5cae43(0xc3)+_0x4c622b+_0x5cae43(0xa1)+_0x3f5b9b[_0x5cae43(0xc8)][_0x5cae43(0x9f)]+'\x20'+_0x3f5b9b[_0x5cae43(0xc8)][_0x5cae43(0xeb)]+'\x20'+util[_0x5cae43(0xe9)]('%j',_0x3f5b9b[_0x5cae43(0xc8)])):_0x5aeb72[_0x5cae43(0xdf)](debug,'EXCEPTION\x20IN\x20'+_0x4c622b+_0x5cae43(0xa1)+(_0x3f5b9b[_0x5cae43(0xe3)]||_0x3f5b9b)),this[_0x5cae43(0xb4)]=Math[_0x5cae43(0xbb)](0x0,_0x5aeb72['FrzwD'](this[_0x5cae43(0xb4)],_0x33fabe[_0x5cae43(0xb2)]));}};[a112_0x59c1c5(0x96)]=()=>{const _0x223958=a112_0x59c1c5,_0x3f8591={'Mirfx':function(_0x5b5110,_0x1fcc19){return _0x5b5110>_0x1fcc19;},'NnOcX':function(_0x2cf02d,_0x2b4642){return _0x2cf02d(_0x2b4642);},'Mdcii':_0x223958(0xd8),'VHzva':function(_0x199bcd,_0x51087c){return _0x199bcd(_0x51087c);},'tUzWW':function(_0x4e808d,_0x78aa5c,_0xcad57b){return _0x4e808d(_0x78aa5c,_0xcad57b);}};this['pollEventBatchInterval']=_0x3f8591[_0x223958(0xd1)](setInterval,async()=>{const _0x5f277b=_0x223958;if(_0x3f8591[_0x5f277b(0xe0)](this[_0x5f277b(0xcf)][_0x5f277b(0xb2)],0x0)){_0x3f8591[_0x5f277b(0xd3)](trace,_0x5f277b(0xec)+this[_0x5f277b(0xcf)]['length']);const _0x368d5b=this[_0x5f277b(0xcf)][_0x5f277b(0x8d)](0x0,BATCH_SIZE);this[_0x5f277b(0xcf)][_0x5f277b(0xb0)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x5f277b(0x99)],_0x3f8591[_0x5f277b(0xc0)],_0x368d5b),_0x3f8591[_0x5f277b(0x9e)](trace,'Remaining\x20Queue\x20Length\x20-\x20'+this[_0x5f277b(0xcf)]['length']);}},BATCH_INTERVAL);};[a112_0x59c1c5(0xa7)]=()=>{const _0x25ea38=a112_0x59c1c5,_0x41fe66={};_0x41fe66[_0x25ea38(0xb8)]=_0x25ea38(0xf1);const _0x1cd840=_0x41fe66;this['removeEventBatchPolling'](_0x1cd840[_0x25ea38(0xb8)]),this[_0x25ea38(0x96)]();};[a112_0x59c1c5(0xb9)]=_0x56f103=>{const _0x481f41=a112_0x59c1c5,_0x8c3f9e={'tYfcM':function(_0x495f0d,_0x428f1e){return _0x495f0d(_0x428f1e);},'JhmJZ':function(_0x7cec50,_0x483ec5){return _0x7cec50===_0x483ec5;},'xUAzO':_0x481f41(0x9b)};this[_0x481f41(0x8f)]&&(_0x8c3f9e[_0x481f41(0xc9)](clearInterval,this[_0x481f41(0x8f)]),this[_0x481f41(0x8f)]=null,_0x8c3f9e[_0x481f41(0xc6)](_0x56f103,_0x8c3f9e['xUAzO'])&&(this[_0x481f41(0xae)]=![]));};[a112_0x59c1c5(0xa2)]=()=>{const _0x5dc57a=a112_0x59c1c5,_0x363de8={};_0x363de8[_0x5dc57a(0xed)]=function(_0x127867,_0x273078){return _0x127867>=_0x273078;};const _0x10796a=_0x363de8;return _0x10796a[_0x5dc57a(0xed)](this[_0x5dc57a(0xcf)][_0x5dc57a(0xb2)],BATCH_SIZE);};async[a112_0x59c1c5(0xb6)](_0x446d4c=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x394795=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x3720d6=a112_0x59c1c5,_0x1bbb5b={'DTSFs':function(_0x4aac55,_0x2cab65){return _0x4aac55<=_0x2cab65;},'IJJvH':function(_0x3762c4,_0x405569){return _0x3762c4<=_0x405569;},'gXBWq':function(_0x1a9eb2,_0x8e8f0d){return _0x1a9eb2(_0x8e8f0d);},'NYfJH':function(_0x1db313,_0xbaae63){return _0x1db313-_0xbaae63;}};if(_0x1bbb5b[_0x3720d6(0xd5)](this[_0x3720d6(0xb4)],0x0)||_0x1bbb5b['IJJvH'](_0x446d4c,0x0))return;return await _0x1bbb5b[_0x3720d6(0xc5)](sleep,_0x394795),this[_0x3720d6(0xb6)](_0x1bbb5b[_0x3720d6(0x9c)](_0x446d4c,_0x394795));}}function a112_0x5f3d(){const _0x1f942f=['EXCEPTION\x20IN\x20','YasNm','gXBWq','JhmJZ','push','response','tYfcM','bjMDq','21787403eOpmIP','OLdZX','add','2317826umMWuR','queue','2301813inlhtc','tUzWW','Shutdown-Queue','NnOcX','ypVNQ','DTSFs','api/v1/batch','batchAndPostEvents','Interval-Queue','KudLF','DMSYg','TestRunStarted','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','2459005ntLyJs','start','tCNSz','Mirfx','10zzsAom','util','message','TEST_SCREENSHOT','MdlSw','exports','data','LogCreated','format','CLlOf','statusText','Processing\x20events.\x20Queue\x20Length\x20-\x20','VKuOg','8draHhn','338iluCFc','error','RESETTING','YasIr','TestRunSkipped','kind','FSuXw','proceedWithUrl','YWGQX','BATCH_EVENT_TYPES','api/v1/screenshots','.\x20Request\x20Size\x20-\x20','\x20bytes.\x20Events\x20are\x20','aSILP','slice','XSnSz','pollEventBatchInterval','TEST_ATTACHMENT','mIKJg','1|2|0|6|3|4|5','byteLength','xcEnB','proceedWithData','startEventBatchPolling','logs','instance','eventUrl','18jjNVkt','REMOVING','NYfJH','uuid','VHzva','status','upload-attachments','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','shouldProceed','hJpjI','\x20event\x20successful\x20for\x20events\x20','2759GldSdd','HookRunFinished','resetEventBatchPolling','SyCog','dolxy','test_run','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','screenshotEventUrl','Hudry','started','map','splice','3019656xMEuQw','length','RJYgg','pendingUploads','LCSbf','uploadPending','TestRunFinished','XSUSi','removeEventBatchPolling','getInstance','max','81088KPnMjI','YsaUA','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','event_type','Mdcii','hook_run','uploadAttachmentUrl'];a112_0x5f3d=function(){return _0x1f942f;};return a112_0x5f3d();}module[a112_0x59c1c5(0xe6)]=RequestQueueHandler;