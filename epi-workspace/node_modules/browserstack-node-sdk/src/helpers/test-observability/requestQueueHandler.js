const a124_0x194f65=a124_0x536e;(function(_0x1ca8e1,_0x27ce74){const _0x894193=a124_0x536e,_0x582520=_0x1ca8e1();while(!![]){try{const _0x23579f=parseInt(_0x894193(0x14e))/0x1+parseInt(_0x894193(0x16a))/0x2+-parseInt(_0x894193(0x179))/0x3*(parseInt(_0x894193(0x181))/0x4)+parseInt(_0x894193(0x187))/0x5+-parseInt(_0x894193(0x16e))/0x6+parseInt(_0x894193(0x193))/0x7+parseInt(_0x894193(0x19d))/0x8*(parseInt(_0x894193(0x1a1))/0x9);if(_0x23579f===_0x27ce74)break;else _0x582520['push'](_0x582520['shift']());}catch(_0x342f8c){_0x582520['push'](_0x582520['shift']());}}}(a124_0x57d4,0x2c09a));function a124_0x536e(_0x2e368a,_0x5219cf){const _0x57d4f5=a124_0x57d4();return a124_0x536e=function(_0x536e3f,_0x3c0aa0){_0x536e3f=_0x536e3f-0x144;let _0x309fbb=_0x57d4f5[_0x536e3f];return _0x309fbb;},a124_0x536e(_0x2e368a,_0x5219cf);}function a124_0x57d4(){const _0xb8b76d=['sSotR','CBTSessionCreated','247432FXRzsz','Shutdown-Queue','\x20event\x20successful\x20for\x20events\x20','uploadAttachmentUrl','1555392oWrUFN','pollEventBatchInterval','./constants','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','RUDuE','Processing\x20batch\x20events\x20for\x20','upload-attachments','HookRunFinished','batchAndPostEvents','kDmBZ','kind','30057gvemfq','EXCEPTION\x20IN\x20','dEBKi','XKjKE','Remaining\x20Queue\x20Length\x20-\x20','TEST_ATTACHMENT','HookRunStarted','startEventBatchPolling','100slHbnY','splice','status','join','pendingUploads','QYvJB','1551140ZOFItu','logs','Processing\x20events.\x20Queue\x20Length\x20-\x20','\x20--\x20','spdTl','TestRunFinished','format','rHnTX','SITHg','JXcWt','started','JgWqD','820309vQjpwv','api/v1/batch','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','removeEventBatchPolling','../../bin/utils/constants','response','getInstance','iondI','instance','exports','408frwZYr','pPBNf','TEST_REPORTING_ANALYTICS','screenshotEventUrl','207VGhoNy','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','HEMbw','VeNgk','hook_run','XojIY','MIzDA','oNDPQ','proceedWithData','VmJqC','add','map','XLQOy','slice','nKxPQ','Yshan','gkmOt','max','eventUrl','fLEWS','\x20:\x20','JdgLV','data','REMOVING','gAXJN','\x20REQUEST\x20TO\x20','byteLength','TestRunStarted','length','test_run','zadpu','UyVqS','137781jYPXoS','vIewU','XvXCo','zTYrx','utf8','shutdown','PsYbF','uuid','statusText','.\x20Request\x20Size\x20-\x20','mTBsO','shouldProceed','event_type','resetEventBatchPolling','queue','includes','start','message','TestRunSkipped','ieuve','BATCH_EVENT_TYPES','util','uploadPending','push','proceedWithUrl','fIQuz'];a124_0x57d4=function(){return _0xb8b76d;};return a124_0x57d4();}const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a124_0x194f65(0x170)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require('./utils'),{nestedKeyValue}=require('../helper'),util=require(a124_0x194f65(0x163)),constants=require(a124_0x194f65(0x197));class RequestQueueHandler{static ['instance'];[a124_0x194f65(0x185)]=0x0;constructor(){const _0x9e790d=a124_0x194f65,_0x5f65dd={};_0x5f65dd[_0x9e790d(0x14f)]='6|1|3|5|0|2|4',_0x5f65dd[_0x9e790d(0x168)]=_0x9e790d(0x174),_0x5f65dd['rHnTX']='LogCreated',_0x5f65dd[_0x9e790d(0x1b4)]=_0x9e790d(0x169),_0x5f65dd[_0x9e790d(0x1b0)]=_0x9e790d(0x18c),_0x5f65dd[_0x9e790d(0x17b)]=_0x9e790d(0x160),_0x5f65dd[_0x9e790d(0x14c)]=_0x9e790d(0x175),_0x5f65dd[_0x9e790d(0x1a8)]=_0x9e790d(0x149),_0x5f65dd[_0x9e790d(0x154)]=_0x9e790d(0x17f),_0x5f65dd['BBpxB']=_0x9e790d(0x194),_0x5f65dd['HEMbw']='api/v1/screenshots';const _0x7c37ab=_0x5f65dd,_0x4805c9=_0x7c37ab[_0x9e790d(0x14f)]['split']('|');let _0x3b7474=0x0;while(!![]){switch(_0x4805c9[_0x3b7474++]){case'0':this[_0x9e790d(0x16d)]=_0x7c37ab['sSotR'];continue;case'1':this[_0x9e790d(0x191)]=![];continue;case'2':this[_0x9e790d(0x162)]=[_0x7c37ab[_0x9e790d(0x18e)],_0x7c37ab['fLEWS'],_0x7c37ab[_0x9e790d(0x1b0)],_0x7c37ab[_0x9e790d(0x17b)],_0x7c37ab[_0x9e790d(0x14c)],_0x7c37ab[_0x9e790d(0x1a8)],_0x7c37ab[_0x9e790d(0x154)]];continue;case'3':this[_0x9e790d(0x1b3)]=_0x7c37ab['BBpxB'];continue;case'4':this[_0x9e790d(0x16f)]=null;continue;case'5':this[_0x9e790d(0x1a0)]=_0x7c37ab[_0x9e790d(0x1a3)];continue;case'6':this[_0x9e790d(0x15c)]=[];continue;}break;}}static[a124_0x194f65(0x199)](){const _0x5d4204=a124_0x194f65;return!RequestQueueHandler['instance']&&(RequestQueueHandler['instance']=new RequestQueueHandler()),RequestQueueHandler[_0x5d4204(0x19b)];}[a124_0x194f65(0x15e)]=()=>{const _0x35eaf3=a124_0x194f65;!this[_0x35eaf3(0x191)]&&(this[_0x35eaf3(0x191)]=!![],this[_0x35eaf3(0x180)]());};[a124_0x194f65(0x1ab)]=_0x1c0986=>{const _0x4017e0=a124_0x194f65,_0x562c4b={'gAXJN':function(_0x576152,_0x258025){return _0x576152===_0x258025;},'WrSct':'TEST_SCREENSHOT','zTYrx':function(_0x1ba636,_0x3437ac){return _0x1ba636>_0x3437ac;},'CAlZk':function(_0x48bf65,_0xcd64b2){return _0x48bf65===_0xcd64b2;},'XojIY':_0x4017e0(0x17e),'XNOWo':function(_0x132a5d,_0x39a482){return _0x132a5d!==_0x39a482;},'nKxPQ':_0x4017e0(0x18c),'MIzDA':function(_0x1078f2,_0x2ad280){return _0x1078f2(_0x2ad280);},'rsJpe':_0x4017e0(0x171)};if(this['BATCH_EVENT_TYPES'][_0x4017e0(0x15d)](_0x1c0986[_0x4017e0(0x15a)])){if(_0x1c0986[_0x4017e0(0x188)]&&_0x1c0986['logs'][0x0]&&_0x562c4b[_0x4017e0(0x146)](_0x1c0986[_0x4017e0(0x188)][0x0][_0x4017e0(0x178)],_0x562c4b['WrSct'])){const _0x3229eb={};return _0x3229eb[_0x4017e0(0x159)]=!![],_0x3229eb['proceedWithData']=[_0x1c0986],_0x3229eb['proceedWithUrl']=this['screenshotEventUrl'],_0x3229eb;}if(_0x1c0986[_0x4017e0(0x188)]&&_0x562c4b[_0x4017e0(0x151)](_0x1c0986[_0x4017e0(0x188)][_0x4017e0(0x14a)],0x0)&&_0x562c4b['CAlZk'](_0x1c0986[_0x4017e0(0x188)][0x0][_0x4017e0(0x178)],_0x562c4b[_0x4017e0(0x1a6)])&&_0x562c4b['XNOWo'](_0x1c0986[_0x4017e0(0x15a)],_0x562c4b[_0x4017e0(0x1af)])){const _0x505d41={};return _0x505d41['shouldProceed']=!![],_0x505d41[_0x4017e0(0x1a9)]=[_0x1c0986],_0x505d41[_0x4017e0(0x166)]=this[_0x4017e0(0x16d)],_0x505d41;}this['queue'][_0x4017e0(0x165)](_0x1c0986);let _0x423933=null;const _0x5775e7=this[_0x4017e0(0x159)]();_0x5775e7&&(_0x562c4b[_0x4017e0(0x1a7)](trace,_0x562c4b['rsJpe']),_0x423933=this[_0x4017e0(0x15c)]['slice'](0x0,BATCH_SIZE),this[_0x4017e0(0x15c)][_0x4017e0(0x182)](0x0,BATCH_SIZE),this[_0x4017e0(0x15b)]());const _0x4df957={};return _0x4df957[_0x4017e0(0x159)]=_0x5775e7,_0x4df957[_0x4017e0(0x1a9)]=_0x423933,_0x4df957[_0x4017e0(0x166)]=this[_0x4017e0(0x1b3)],_0x4df957;}const _0x2d2f2d={};return _0x2d2f2d[_0x4017e0(0x159)]=!![],_0x2d2f2d;};[a124_0x194f65(0x153)]=async()=>{const _0x168185=a124_0x194f65,_0x7b768={'RUDuE':_0x168185(0x145),'VmJqC':function(_0x287ae0,_0x575098){return _0x287ae0>_0x575098;},'mTBsO':_0x168185(0x16b),'XKjKE':function(_0x5e7e20,_0x5b4c98){return _0x5e7e20(_0x5b4c98);}};await this[_0x168185(0x164)](),this[_0x168185(0x196)](_0x7b768[_0x168185(0x172)]);while(_0x7b768[_0x168185(0x1aa)](this['queue'][_0x168185(0x14a)],0x0)){const _0x2497aa=this['queue'][_0x168185(0x1ae)](0x0,BATCH_SIZE);this[_0x168185(0x15c)]['splice'](0x0,BATCH_SIZE),await this[_0x168185(0x176)](this[_0x168185(0x1b3)],_0x7b768[_0x168185(0x158)],_0x2497aa);}_0x7b768[_0x168185(0x1aa)](this[_0x168185(0x185)],0x0)&&_0x7b768[_0x168185(0x17c)](debug,_0x168185(0x195)+this[_0x168185(0x185)]);};[a124_0x194f65(0x176)]=async(_0x2ae2db,_0x5b7506,_0x4da18a)=>{const _0xdc8b38=a124_0x194f65,_0x48d820={'fIQuz':function(_0x56127c,_0x37121d){return _0x56127c(_0x37121d);},'QAgMa':_0xdc8b38(0x152),'ZLonr':function(_0xef49b8,_0x1b578d){return _0xef49b8(_0x1b578d);},'ieuve':function(_0x453ed0){return _0x453ed0();},'VeNgk':function(_0x40a0c4,_0x58ef41,_0x30ffda,_0x436c33,_0xbfeda6){return _0x40a0c4(_0x58ef41,_0x30ffda,_0x436c33,_0xbfeda6);},'SITHg':'POST','gkmOt':function(_0x2e4d24,_0x160a54){return _0x2e4d24(_0x160a54);},'iondI':function(_0x555623,_0x183efb){return _0x555623-_0x183efb;},'avwLC':function(_0x1fb831,_0x56a8d8){return _0x1fb831(_0x56a8d8);},'XLQOy':function(_0x24b7e6,_0x550cb8){return _0x24b7e6-_0x550cb8;}};let _0x32db52='';try{_0x32db52=_0x4da18a[_0xdc8b38(0x1ac)](_0xf3809f=>'\x27'+_0xf3809f[_0xdc8b38(0x15a)]+'\x27:'+(nestedKeyValue(_0xf3809f,[_0xdc8b38(0x14b),'uuid'])||nestedKeyValue(_0xf3809f,[_0xdc8b38(0x1a5),_0xdc8b38(0x155)])))[_0xdc8b38(0x184)](','),_0x48d820[_0xdc8b38(0x167)](debug,_0xdc8b38(0x173)+_0x5b7506+_0xdc8b38(0x157)+Buffer[_0xdc8b38(0x148)](util[_0xdc8b38(0x18d)]('%j',_0x4da18a),_0x48d820['QAgMa'])+'\x20bytes.\x20Events\x20are\x20'+_0x32db52);}catch(_0x1ff2b7){_0x48d820['ZLonr'](debug,_0xdc8b38(0x1a2)+util[_0xdc8b38(0x18d)](_0x1ff2b7)+'}');}const _0x5f3142={'headers':_0x48d820[_0xdc8b38(0x161)](getDefaultHeaders)};try{const _0x357e50=await _0x48d820[_0xdc8b38(0x1a4)](nodeRequest,_0x48d820[_0xdc8b38(0x18f)],_0x2ae2db,_0x4da18a,_0x5f3142);if(_0x357e50[_0xdc8b38(0x144)]['error']){const _0x2950a6={};_0x2950a6[_0xdc8b38(0x15f)]=_0x357e50[_0xdc8b38(0x144)]['error'];throw _0x2950a6;}else _0x48d820['gkmOt'](debug,_0x5b7506+_0xdc8b38(0x16c)+_0x32db52+_0xdc8b38(0x18a)+util[_0xdc8b38(0x18d)]('%j',_0x357e50[_0xdc8b38(0x144)])),this[_0xdc8b38(0x185)]=Math[_0xdc8b38(0x1b2)](0x0,_0x48d820[_0xdc8b38(0x19a)](this[_0xdc8b38(0x185)],_0x4da18a['length']));}catch(_0x3f6a5b){_0x3f6a5b['response']?_0x48d820['avwLC'](debug,'EXCEPTION\x20IN\x20'+_0x5b7506+_0xdc8b38(0x147)+constants[_0xdc8b38(0x19f)]+_0xdc8b38(0x1b5)+_0x3f6a5b[_0xdc8b38(0x198)][_0xdc8b38(0x183)]+'\x20'+_0x3f6a5b[_0xdc8b38(0x198)][_0xdc8b38(0x156)]+'\x20'+util[_0xdc8b38(0x18d)]('%j',_0x3f6a5b[_0xdc8b38(0x198)])):_0x48d820[_0xdc8b38(0x1b1)](debug,_0xdc8b38(0x17a)+_0x5b7506+_0xdc8b38(0x147)+constants[_0xdc8b38(0x19f)]+_0xdc8b38(0x1b5)+(_0x3f6a5b['message']||_0x3f6a5b)),this[_0xdc8b38(0x185)]=Math['max'](0x0,_0x48d820[_0xdc8b38(0x1ad)](this['pendingUploads'],_0x4da18a['length']));}};[a124_0x194f65(0x180)]=()=>{const _0x5cabff=a124_0x194f65,_0xdb7f5={'ygRkY':function(_0x27b044,_0x8f7465){return _0x27b044>_0x8f7465;},'pPBNf':function(_0x1bb2dc,_0xcc14e8){return _0x1bb2dc(_0xcc14e8);},'hkcoY':'Interval-Queue','spdTl':function(_0x52642c,_0x5f5276){return _0x52642c(_0x5f5276);},'JdgLV':function(_0x1bbec5,_0x2e0e28,_0xf04efe){return _0x1bbec5(_0x2e0e28,_0xf04efe);}};this[_0x5cabff(0x16f)]=_0xdb7f5[_0x5cabff(0x1b6)](setInterval,async()=>{const _0xee58d9=_0x5cabff;if(_0xdb7f5['ygRkY'](this['queue'][_0xee58d9(0x14a)],0x0)){_0xdb7f5[_0xee58d9(0x19e)](trace,_0xee58d9(0x189)+this[_0xee58d9(0x15c)][_0xee58d9(0x14a)]);const _0x8c8adc=this[_0xee58d9(0x15c)][_0xee58d9(0x1ae)](0x0,BATCH_SIZE);this[_0xee58d9(0x15c)][_0xee58d9(0x182)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0xee58d9(0x1b3)],_0xdb7f5['hkcoY'],_0x8c8adc),_0xdb7f5[_0xee58d9(0x18b)](trace,_0xee58d9(0x17d)+this[_0xee58d9(0x15c)][_0xee58d9(0x14a)]);}},BATCH_INTERVAL);};[a124_0x194f65(0x15b)]=()=>{const _0x46c3ac=a124_0x194f65,_0xc9f360={};_0xc9f360['kDmBZ']='RESETTING';const _0x5a46b1=_0xc9f360;this[_0x46c3ac(0x196)](_0x5a46b1[_0x46c3ac(0x177)]),this[_0x46c3ac(0x180)]();};[a124_0x194f65(0x196)]=_0x56f732=>{const _0x255f35=a124_0x194f65,_0x308d12={'QYvJB':function(_0x1ac10b,_0x383657){return _0x1ac10b(_0x383657);},'JgWqD':function(_0x2540c7,_0x4982a6){return _0x2540c7===_0x4982a6;},'JXcWt':_0x255f35(0x145)};this[_0x255f35(0x16f)]&&(_0x308d12[_0x255f35(0x186)](clearInterval,this[_0x255f35(0x16f)]),this['pollEventBatchInterval']=null,_0x308d12[_0x255f35(0x192)](_0x56f732,_0x308d12[_0x255f35(0x190)])&&(this[_0x255f35(0x191)]=![]));};['shouldProceed']=()=>{const _0x5a9f9d=a124_0x194f65,_0x32d375={};_0x32d375['XvXCo']=function(_0x15fcaa,_0x4c51b3){return _0x15fcaa>=_0x4c51b3;};const _0x115a31=_0x32d375;return _0x115a31[_0x5a9f9d(0x150)](this[_0x5a9f9d(0x15c)]['length'],BATCH_SIZE);};async[a124_0x194f65(0x164)](_0x2161c9=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0xfe6f79=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x1243f7=a124_0x194f65,_0x1ae787={'Umryk':function(_0x4b0649,_0x5d6c18){return _0x4b0649<=_0x5d6c18;},'ghSqB':function(_0x27e2b0,_0x485c23){return _0x27e2b0<=_0x485c23;},'ScnZu':function(_0x330c88,_0x3b27ec){return _0x330c88(_0x3b27ec);},'UyVqS':function(_0x24b384,_0x5493c5){return _0x24b384-_0x5493c5;}};if(_0x1ae787['Umryk'](this['pendingUploads'],0x0)||_0x1ae787['ghSqB'](_0x2161c9,0x0))return;return await _0x1ae787['ScnZu'](sleep,_0xfe6f79),this[_0x1243f7(0x164)](_0x1ae787[_0x1243f7(0x14d)](_0x2161c9,_0xfe6f79));}}module[a124_0x194f65(0x19c)]=RequestQueueHandler;