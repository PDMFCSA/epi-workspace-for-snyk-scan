const a86_0x386e74=a86_0x4fc3;(function(_0x46965d,_0x2f4125){const _0x15fe75=a86_0x4fc3,_0x1203e8=_0x46965d();while(!![]){try{const _0x273999=-parseInt(_0x15fe75(0x188))/0x1+-parseInt(_0x15fe75(0x12c))/0x2+parseInt(_0x15fe75(0x120))/0x3*(-parseInt(_0x15fe75(0x127))/0x4)+parseInt(_0x15fe75(0x151))/0x5+parseInt(_0x15fe75(0x167))/0x6+parseInt(_0x15fe75(0x171))/0x7+-parseInt(_0x15fe75(0x122))/0x8*(parseInt(_0x15fe75(0x12b))/0x9);if(_0x273999===_0x2f4125)break;else _0x1203e8['push'](_0x1203e8['shift']());}catch(_0x1ba943){_0x1203e8['push'](_0x1203e8['shift']());}}}(a86_0x44d6,0xa9513));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a86_0x386e74(0x163)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a86_0x386e74(0x139)),{nestedKeyValue}=require(a86_0x386e74(0x18a)),util=require('util');function a86_0x4fc3(_0x5947d4,_0x5a3f18){const _0x44d6fa=a86_0x44d6();return a86_0x4fc3=function(_0x4fc3a3,_0x2dc506){_0x4fc3a3=_0x4fc3a3-0x115;let _0x30cbeb=_0x44d6fa[_0x4fc3a3];return _0x30cbeb;},a86_0x4fc3(_0x5947d4,_0x5a3f18);}class RequestQueueHandler{static [a86_0x386e74(0x176)];['pendingUploads']=0x0;constructor(){const _0x2f935b=a86_0x386e74,_0x5833f0={};_0x5833f0[_0x2f935b(0x15b)]=_0x2f935b(0x147),_0x5833f0[_0x2f935b(0x158)]=_0x2f935b(0x144),_0x5833f0[_0x2f935b(0x125)]='api/v1/screenshots',_0x5833f0[_0x2f935b(0x165)]=_0x2f935b(0x15c),_0x5833f0[_0x2f935b(0x177)]=_0x2f935b(0x146),_0x5833f0[_0x2f935b(0x143)]='TestRunFinished',_0x5833f0[_0x2f935b(0x184)]=_0x2f935b(0x135),_0x5833f0[_0x2f935b(0x141)]=_0x2f935b(0x128),_0x5833f0[_0x2f935b(0x17a)]=_0x2f935b(0x12e),_0x5833f0['JrOhl']=_0x2f935b(0x11a),_0x5833f0[_0x2f935b(0x129)]=_0x2f935b(0x15a);const _0x53afcf=_0x5833f0,_0x1afbe0=_0x53afcf[_0x2f935b(0x15b)][_0x2f935b(0x138)]('|');let _0x3a50a4=0x0;while(!![]){switch(_0x1afbe0[_0x3a50a4++]){case'0':this['eventUrl']=_0x53afcf['huQZH'];continue;case'1':this['screenshotEventUrl']=_0x53afcf[_0x2f935b(0x125)];continue;case'2':this[_0x2f935b(0x134)]=null;continue;case'3':this[_0x2f935b(0x186)]=[_0x53afcf[_0x2f935b(0x165)],_0x53afcf[_0x2f935b(0x177)],_0x53afcf[_0x2f935b(0x143)],_0x53afcf[_0x2f935b(0x184)],_0x53afcf[_0x2f935b(0x141)],_0x53afcf[_0x2f935b(0x17a)],_0x53afcf['JrOhl']];continue;case'4':this[_0x2f935b(0x181)]=[];continue;case'5':this['uploadAttachmentUrl']=_0x53afcf[_0x2f935b(0x129)];continue;case'6':this[_0x2f935b(0x137)]=![];continue;}break;}}static[a86_0x386e74(0x15f)](){const _0x55024d=a86_0x386e74;return!RequestQueueHandler['instance']&&(RequestQueueHandler[_0x55024d(0x176)]=new RequestQueueHandler()),RequestQueueHandler[_0x55024d(0x176)];}[a86_0x386e74(0x18b)]=()=>{const _0x4712c0=a86_0x386e74;!this[_0x4712c0(0x137)]&&(this[_0x4712c0(0x137)]=!![],this[_0x4712c0(0x14a)]());};[a86_0x386e74(0x11e)]=_0xa058cc=>{const _0x15b555=a86_0x386e74,_0x1ab7ce={'JafsY':function(_0x154dce,_0x558e08){return _0x154dce===_0x558e08;},'ClVrV':_0x15b555(0x161),'Pssgm':function(_0x14813f,_0x1aec03){return _0x14813f>_0x1aec03;},'lRFwN':function(_0x50be09,_0xcbf99){return _0x50be09===_0xcbf99;},'IsJfL':_0x15b555(0x183),'BNvWb':function(_0x5be107,_0x192059){return _0x5be107!==_0x192059;},'fZAoZ':_0x15b555(0x124),'MObGR':function(_0x17e497,_0x36b7e8){return _0x17e497(_0x36b7e8);},'razUf':_0x15b555(0x116)};if(this['BATCH_EVENT_TYPES']['includes'](_0xa058cc[_0x15b555(0x175)])){if(_0xa058cc[_0x15b555(0x17c)]&&_0xa058cc[_0x15b555(0x17c)][0x0]&&_0x1ab7ce[_0x15b555(0x15e)](_0xa058cc['logs'][0x0]['kind'],_0x1ab7ce[_0x15b555(0x14d)])){const _0xb87ea9={};return _0xb87ea9[_0x15b555(0x182)]=!![],_0xb87ea9[_0x15b555(0x12d)]=[_0xa058cc],_0xb87ea9[_0x15b555(0x172)]=this['screenshotEventUrl'],_0xb87ea9;}if(_0xa058cc[_0x15b555(0x17c)]&&_0x1ab7ce[_0x15b555(0x164)](_0xa058cc[_0x15b555(0x17c)][_0x15b555(0x189)],0x0)&&_0x1ab7ce[_0x15b555(0x12f)](_0xa058cc['logs'][0x0][_0x15b555(0x16c)],_0x1ab7ce[_0x15b555(0x13a)])&&_0x1ab7ce[_0x15b555(0x12a)](_0xa058cc[_0x15b555(0x175)],_0x1ab7ce[_0x15b555(0x131)])){const _0xab15d4={};return _0xab15d4[_0x15b555(0x182)]=!![],_0xab15d4[_0x15b555(0x12d)]=[_0xa058cc],_0xab15d4[_0x15b555(0x172)]=this[_0x15b555(0x154)],_0xab15d4;}this[_0x15b555(0x181)]['push'](_0xa058cc);let _0x3e9572=null;const _0x4add25=this[_0x15b555(0x182)]();_0x4add25&&(_0x1ab7ce['MObGR'](trace,_0x1ab7ce[_0x15b555(0x166)]),_0x3e9572=this[_0x15b555(0x181)][_0x15b555(0x162)](0x0,BATCH_SIZE),this[_0x15b555(0x181)][_0x15b555(0x160)](0x0,BATCH_SIZE),this[_0x15b555(0x150)]());const _0x441274={};return _0x441274['shouldProceed']=_0x4add25,_0x441274['proceedWithData']=_0x3e9572,_0x441274['proceedWithUrl']=this[_0x15b555(0x14f)],_0x441274;}const _0x113b90={};return _0x113b90[_0x15b555(0x182)]=!![],_0x113b90;};[a86_0x386e74(0x185)]=async()=>{const _0x5c70c5=a86_0x386e74,_0x362109={'okJyd':'REMOVING','fZgEz':function(_0x27991d,_0x2e933d){return _0x27991d>_0x2e933d;},'sspsH':_0x5c70c5(0x170),'ygDqV':function(_0x3d5da8,_0x26200a){return _0x3d5da8(_0x26200a);}};await this['uploadPending'](),this['removeEventBatchPolling'](_0x362109[_0x5c70c5(0x153)]);while(_0x362109[_0x5c70c5(0x15d)](this[_0x5c70c5(0x181)][_0x5c70c5(0x189)],0x0)){const _0x57559c=this[_0x5c70c5(0x181)][_0x5c70c5(0x162)](0x0,BATCH_SIZE);this[_0x5c70c5(0x181)]['splice'](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x5c70c5(0x14f)],_0x362109[_0x5c70c5(0x126)],_0x57559c);}_0x362109[_0x5c70c5(0x15d)](this[_0x5c70c5(0x187)],0x0)&&_0x362109[_0x5c70c5(0x13c)](debug,_0x5c70c5(0x11d)+this[_0x5c70c5(0x187)]);};[a86_0x386e74(0x11f)]=async(_0x2f904a,_0x55bfbc,_0x15a52a)=>{const _0x2f8ecd=a86_0x386e74,_0x10516b={'aHxep':function(_0x5277a5,_0x557faf){return _0x5277a5(_0x557faf);},'xfZMe':'utf8','VFmvV':function(_0xa46a00){return _0xa46a00();},'LHzty':function(_0x52fdd0,_0x2ea2da,_0x56250c,_0x3a1baf,_0x4eba0e){return _0x52fdd0(_0x2ea2da,_0x56250c,_0x3a1baf,_0x4eba0e);},'eOdzw':_0x2f8ecd(0x159),'ClmDZ':function(_0x3649f,_0x5ef3ff){return _0x3649f(_0x5ef3ff);},'zrDnd':function(_0x5e226f,_0x212f52){return _0x5e226f-_0x212f52;},'ICBXU':function(_0x5972d2,_0x14fd95){return _0x5972d2(_0x14fd95);},'qShLa':function(_0x8532ff,_0x81b94){return _0x8532ff-_0x81b94;}};let _0x2537b4='';try{_0x2537b4=_0x15a52a[_0x2f8ecd(0x16a)](_0x13fc15=>'\x27'+_0x13fc15[_0x2f8ecd(0x175)]+'\x27:'+(nestedKeyValue(_0x13fc15,['test_run',_0x2f8ecd(0x178)])||nestedKeyValue(_0x13fc15,['hook_run',_0x2f8ecd(0x178)])))[_0x2f8ecd(0x142)](','),_0x10516b[_0x2f8ecd(0x152)](debug,'Processing\x20batch\x20events\x20for\x20'+_0x55bfbc+'.\x20Request\x20Size\x20-\x20'+Buffer[_0x2f8ecd(0x123)](util[_0x2f8ecd(0x174)]('%j',_0x15a52a),_0x10516b[_0x2f8ecd(0x132)])+'\x20bytes.\x20Events\x20are\x20'+_0x2537b4);}catch(_0x11de39){_0x10516b[_0x2f8ecd(0x152)](debug,_0x2f8ecd(0x140)+util[_0x2f8ecd(0x174)](_0x11de39)+'}');}const _0x2151aa={'headers':_0x10516b[_0x2f8ecd(0x16b)](getDefaultHeaders)};try{const _0x622208=await _0x10516b[_0x2f8ecd(0x179)](nodeRequest,_0x10516b[_0x2f8ecd(0x145)],_0x2f904a,_0x15a52a,_0x2151aa);if(_0x622208[_0x2f8ecd(0x16e)]['error']){const _0x1e5b93={};_0x1e5b93[_0x2f8ecd(0x17b)]=_0x622208[_0x2f8ecd(0x16e)][_0x2f8ecd(0x155)];throw _0x1e5b93;}else _0x10516b[_0x2f8ecd(0x14b)](debug,_0x55bfbc+_0x2f8ecd(0x148)+_0x2537b4+_0x2f8ecd(0x117)+util[_0x2f8ecd(0x174)]('%j',_0x622208[_0x2f8ecd(0x16e)])),this['pendingUploads']=Math[_0x2f8ecd(0x121)](0x0,_0x10516b['zrDnd'](this[_0x2f8ecd(0x187)],_0x15a52a[_0x2f8ecd(0x189)]));}catch(_0x556884){_0x556884['response']?_0x10516b[_0x2f8ecd(0x14b)](debug,_0x2f8ecd(0x11c)+_0x55bfbc+_0x2f8ecd(0x130)+_0x556884[_0x2f8ecd(0x136)][_0x2f8ecd(0x13b)]+'\x20'+_0x556884['response'][_0x2f8ecd(0x16d)]+'\x20'+util[_0x2f8ecd(0x174)]('%j',_0x556884[_0x2f8ecd(0x136)])):_0x10516b[_0x2f8ecd(0x13d)](debug,_0x2f8ecd(0x11c)+_0x55bfbc+_0x2f8ecd(0x130)+(_0x556884[_0x2f8ecd(0x17b)]||_0x556884)),this[_0x2f8ecd(0x187)]=Math[_0x2f8ecd(0x121)](0x0,_0x10516b[_0x2f8ecd(0x16f)](this[_0x2f8ecd(0x187)],_0x15a52a[_0x2f8ecd(0x189)]));}};[a86_0x386e74(0x14a)]=()=>{const _0x544d23=a86_0x386e74,_0x4ca590={'LJYvk':function(_0x25f2e2,_0xcfabb2){return _0x25f2e2>_0xcfabb2;},'hOXVx':function(_0x43c095,_0x497e6e){return _0x43c095(_0x497e6e);},'koYIP':_0x544d23(0x149),'yAYlK':function(_0x33b13d,_0x117d56){return _0x33b13d(_0x117d56);},'RNsTu':function(_0x118628,_0x1f7cd9,_0x5745a0){return _0x118628(_0x1f7cd9,_0x5745a0);}};this['pollEventBatchInterval']=_0x4ca590[_0x544d23(0x13f)](setInterval,async()=>{const _0x54b1ad=_0x544d23;if(_0x4ca590[_0x54b1ad(0x17d)](this[_0x54b1ad(0x181)][_0x54b1ad(0x189)],0x0)){_0x4ca590[_0x54b1ad(0x180)](trace,_0x54b1ad(0x173)+this['queue'][_0x54b1ad(0x189)]);const _0x288fbf=this['queue'][_0x54b1ad(0x162)](0x0,BATCH_SIZE);this[_0x54b1ad(0x181)][_0x54b1ad(0x160)](0x0,BATCH_SIZE),await this[_0x54b1ad(0x11f)](this['eventUrl'],_0x4ca590[_0x54b1ad(0x133)],_0x288fbf),_0x4ca590[_0x54b1ad(0x11b)](trace,_0x54b1ad(0x169)+this[_0x54b1ad(0x181)][_0x54b1ad(0x189)]);}},BATCH_INTERVAL);};[a86_0x386e74(0x150)]=()=>{const _0x938bf4=a86_0x386e74,_0x496f84={};_0x496f84[_0x938bf4(0x157)]=_0x938bf4(0x168);const _0x157ba7=_0x496f84;this['removeEventBatchPolling'](_0x157ba7['MmYil']),this['startEventBatchPolling']();};[a86_0x386e74(0x156)]=_0x27d5bb=>{const _0x23df30=a86_0x386e74,_0x5928bd={'aZRkB':function(_0x1af97d,_0x43c906){return _0x1af97d(_0x43c906);},'pKwiC':function(_0x35ef1e,_0x10a344){return _0x35ef1e===_0x10a344;},'iqCXW':_0x23df30(0x17f)};this[_0x23df30(0x134)]&&(_0x5928bd[_0x23df30(0x118)](clearInterval,this[_0x23df30(0x134)]),this['pollEventBatchInterval']=null,_0x5928bd[_0x23df30(0x13e)](_0x27d5bb,_0x5928bd['iqCXW'])&&(this[_0x23df30(0x137)]=![]));};['shouldProceed']=()=>{const _0x32d3a0=a86_0x386e74,_0x47a14f={};_0x47a14f[_0x32d3a0(0x119)]=function(_0x220fb0,_0x2f813c){return _0x220fb0>=_0x2f813c;};const _0x58ed51=_0x47a14f;return _0x58ed51[_0x32d3a0(0x119)](this[_0x32d3a0(0x181)][_0x32d3a0(0x189)],BATCH_SIZE);};async[a86_0x386e74(0x14e)](_0x28b918=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x49d52b=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0xd5c881=a86_0x386e74,_0x1b534a={'VnIzV':function(_0x117b30,_0x518571){return _0x117b30<=_0x518571;},'coObn':function(_0x549b94,_0xd54ae9){return _0x549b94<=_0xd54ae9;},'haAQb':function(_0x460438,_0x444681){return _0x460438(_0x444681);},'iWPaU':function(_0x458859,_0x58dae3){return _0x458859-_0x58dae3;}};if(_0x1b534a[_0xd5c881(0x115)](this[_0xd5c881(0x187)],0x0)||_0x1b534a['coObn'](_0x28b918,0x0))return;return await _0x1b534a[_0xd5c881(0x14c)](sleep,_0x49d52b),this[_0xd5c881(0x14e)](_0x1b534a[_0xd5c881(0x17e)](_0x28b918,_0x49d52b));}}module['exports']=RequestQueueHandler;function a86_0x44d6(){const _0x6bdc33=['\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','fZAoZ','xfZMe','koYIP','pollEventBatchInterval','TestRunSkipped','response','started','split','./utils','IsJfL','status','ygDqV','ICBXU','pKwiC','RNsTu','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','ipyxi','join','OnAbe','api/v1/batch','eOdzw','CBTSessionCreated','4|6|0|1|5|3|2','\x20event\x20successful\x20for\x20events\x20','Interval-Queue','startEventBatchPolling','ClmDZ','haAQb','ClVrV','uploadPending','eventUrl','resetEventBatchPolling','5283585hLAlRr','aHxep','okJyd','uploadAttachmentUrl','error','removeEventBatchPolling','MmYil','huQZH','POST','upload-attachments','JtTpD','LogCreated','fZgEz','JafsY','getInstance','splice','TEST_SCREENSHOT','slice','./constants','Pssgm','NAAGB','razUf','1331814wmKzsi','RESETTING','Remaining\x20Queue\x20Length\x20-\x20','map','VFmvV','kind','statusText','data','qShLa','Shutdown-Queue','9324749SRdwgU','proceedWithUrl','Processing\x20events.\x20Queue\x20Length\x20-\x20','format','event_type','instance','DVmPn','uuid','LHzty','JroXX','message','logs','LJYvk','iWPaU','REMOVING','hOXVx','queue','shouldProceed','TEST_ATTACHMENT','ylwju','shutdown','BATCH_EVENT_TYPES','pendingUploads','67411PoBdMN','length','../helper','start','VnIzV','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','\x20--\x20','aZRkB','hvEBg','HookRunStarted','yAYlK','EXCEPTION\x20IN\x20','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','add','batchAndPostEvents','1274415rKClWx','max','24776XHyDtR','byteLength','TestRunFinished','eZwlk','sspsH','12mxPWmp','HookRunFinished','OyOOy','BNvWb','1035VmeKZX','438578TXwuzL','proceedWithData','TestRunStarted','lRFwN'];a86_0x44d6=function(){return _0x6bdc33;};return a86_0x44d6();}