function a123_0xe84f(_0x1b4487,_0x5050f7){const _0x5994d9=a123_0x5994();return a123_0xe84f=function(_0xe84f1e,_0x300cb7){_0xe84f1e=_0xe84f1e-0x16f;let _0x4b9da1=_0x5994d9[_0xe84f1e];return _0x4b9da1;},a123_0xe84f(_0x1b4487,_0x5050f7);}const a123_0x420c64=a123_0xe84f;(function(_0x428b2a,_0x7c8c0){const _0x4f40b=a123_0xe84f,_0x5692f4=_0x428b2a();while(!![]){try{const _0x320d21=parseInt(_0x4f40b(0x190))/0x1*(-parseInt(_0x4f40b(0x1d3))/0x2)+-parseInt(_0x4f40b(0x1af))/0x3+parseInt(_0x4f40b(0x1b8))/0x4+parseInt(_0x4f40b(0x16f))/0x5*(-parseInt(_0x4f40b(0x1a9))/0x6)+parseInt(_0x4f40b(0x1a8))/0x7+parseInt(_0x4f40b(0x1b3))/0x8*(-parseInt(_0x4f40b(0x1aa))/0x9)+parseInt(_0x4f40b(0x1ac))/0xa*(-parseInt(_0x4f40b(0x1a0))/0xb);if(_0x320d21===_0x7c8c0)break;else _0x5692f4['push'](_0x5692f4['shift']());}catch(_0x5edf3e){_0x5692f4['push'](_0x5692f4['shift']());}}}(a123_0x5994,0x77093));function a123_0x5994(){const _0x3eb8f3=['BATCH_EVENT_TYPES','utf8','EssTk','proceedWithData','QaSxj','zAODz','sZNqf','./constants','join','status','236797ELcbBB','TestRunFinished','queue','screenshotEventUrl','POST','BxRcv','DzVLz','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','5673080ZzqZVr','31572MZETiR','18qaoxFc','bvwXN','170PpXIdb','Processing\x20events.\x20Queue\x20Length\x20-\x20','shutdown','726024GMRnXi','XXYfB','shouldProceed','add','531336QOdbNI','uploadAttachmentUrl','api/v1/batch','LkAHE','dTvhs','2288648Ashsgu','api/v1/screenshots','upload-attachments','nRzcP','LogCreated','instance','proceedWithUrl','\x20--\x20','nNSyO','pendingUploads','MGkAG','Processing\x20batch\x20events\x20for\x20','includes','../helper','WTFuv','IfgmT','dbMwd','hook_run','REMOVING','batchAndPostEvents','startEventBatchPolling','start','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','EXCEPTION\x20IN\x20','3|2|1|4|5|6|0','eventUrl','BicJr','1752jNzuDV','Interval-Queue','../../bin/utils/constants','splice','.\x20Request\x20Size\x20-\x20','byteLength','CBTSessionCreated','exports','qgFAR','HookRunFinished','slice','sKqYK','45RNuHXE','ZDnrM','MOuky','started','TestRunStarted','QHaXN','xKFPh','format','HXMlr','response','logs','data','pollEventBatchInterval','yaBYA','uploadPending','\x20:\x20','TestRunSkipped','uuid','IbOWj','length','NMPET','error','split','event_type','./utils','kind','TEST_SCREENSHOT','XyuhO','TEST_REPORTING_ANALYTICS','map','CIXcz','Remaining\x20Queue\x20Length\x20-\x20','statusText','122pGNMPE','removeEventBatchPolling','resetEventBatchPolling','util','max','FKqpN'];a123_0x5994=function(){return _0x3eb8f3;};return a123_0x5994();}const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a123_0x420c64(0x19d)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a123_0x420c64(0x187)),{nestedKeyValue}=require(a123_0x420c64(0x1c5)),util=require(a123_0x420c64(0x193)),constants=require(a123_0x420c64(0x1d5));class RequestQueueHandler{static [a123_0x420c64(0x1bd)];[a123_0x420c64(0x1c1)]=0x0;constructor(){const _0x584872=a123_0x420c64,_0x34a890={};_0x34a890[_0x584872(0x1b6)]=_0x584872(0x1d0),_0x34a890['mNdhK']=_0x584872(0x1b5),_0x34a890['yaBYA']=_0x584872(0x1b9),_0x34a890[_0x584872(0x1de)]=_0x584872(0x1ba),_0x34a890[_0x584872(0x1a5)]=_0x584872(0x1bc),_0x34a890[_0x584872(0x1bb)]=_0x584872(0x1d9),_0x34a890['hobmM']='TestRunFinished',_0x34a890[_0x584872(0x198)]=_0x584872(0x17f),_0x34a890['iPZHL']=_0x584872(0x1dc),_0x34a890[_0x584872(0x1db)]=_0x584872(0x173),_0x34a890[_0x584872(0x1b0)]='HookRunStarted';const _0x81c270=_0x34a890,_0x2dcdb5=_0x81c270[_0x584872(0x1b6)][_0x584872(0x185)]('|');let _0x3d8549=0x0;while(!![]){switch(_0x2dcdb5[_0x3d8549++]){case'0':this['pollEventBatchInterval']=null;continue;case'1':this['eventUrl']=_0x81c270['mNdhK'];continue;case'2':this[_0x584872(0x172)]=![];continue;case'3':this[_0x584872(0x1a2)]=[];continue;case'4':this[_0x584872(0x1a3)]=_0x81c270[_0x584872(0x17c)];continue;case'5':this['uploadAttachmentUrl']=_0x81c270['sKqYK'];continue;case'6':this[_0x584872(0x196)]=[_0x81c270[_0x584872(0x1a5)],_0x81c270[_0x584872(0x1bb)],_0x81c270['hobmM'],_0x81c270[_0x584872(0x198)],_0x81c270['iPZHL'],_0x81c270[_0x584872(0x1db)],_0x81c270[_0x584872(0x1b0)]];continue;}break;}}static['getInstance'](){const _0x5339d5=a123_0x420c64;return!RequestQueueHandler[_0x5339d5(0x1bd)]&&(RequestQueueHandler[_0x5339d5(0x1bd)]=new RequestQueueHandler()),RequestQueueHandler['instance'];}[a123_0x420c64(0x1cd)]=()=>{const _0x13f290=a123_0x420c64;!this[_0x13f290(0x172)]&&(this[_0x13f290(0x172)]=!![],this['startEventBatchPolling']());};[a123_0x420c64(0x1b2)]=_0x1c8e69=>{const _0x132e17=a123_0x420c64,_0xed0d09={'dTvhs':function(_0xe3f89,_0x2ce85f){return _0xe3f89===_0x2ce85f;},'DzVLz':_0x132e17(0x189),'sZNqf':function(_0x5a0344,_0x399be6){return _0x5a0344>_0x399be6;},'CIXcz':'TEST_ATTACHMENT','NMPET':function(_0xca2f3c,_0x1cab76){return _0xca2f3c!==_0x1cab76;},'nNSyO':_0x132e17(0x1a1),'bGXxA':function(_0x3acd2e,_0x510093){return _0x3acd2e(_0x510093);},'KyQWk':_0x132e17(0x1a7)};if(this[_0x132e17(0x196)][_0x132e17(0x1c4)](_0x1c8e69[_0x132e17(0x186)])){if(_0x1c8e69[_0x132e17(0x179)]&&_0x1c8e69['logs'][0x0]&&_0xed0d09[_0x132e17(0x1b7)](_0x1c8e69[_0x132e17(0x179)][0x0][_0x132e17(0x188)],_0xed0d09[_0x132e17(0x1a6)])){const _0x39329a={};return _0x39329a['shouldProceed']=!![],_0x39329a[_0x132e17(0x199)]=[_0x1c8e69],_0x39329a[_0x132e17(0x1be)]=this['screenshotEventUrl'],_0x39329a;}if(_0x1c8e69[_0x132e17(0x179)]&&_0xed0d09[_0x132e17(0x19c)](_0x1c8e69['logs'][_0x132e17(0x182)],0x0)&&_0xed0d09['dTvhs'](_0x1c8e69['logs'][0x0]['kind'],_0xed0d09[_0x132e17(0x18d)])&&_0xed0d09[_0x132e17(0x183)](_0x1c8e69['event_type'],_0xed0d09[_0x132e17(0x1c0)])){const _0x5aeb63={};return _0x5aeb63[_0x132e17(0x1b1)]=!![],_0x5aeb63['proceedWithData']=[_0x1c8e69],_0x5aeb63['proceedWithUrl']=this[_0x132e17(0x1b4)],_0x5aeb63;}this[_0x132e17(0x1a2)]['push'](_0x1c8e69);let _0x57a621=null;const _0xb5644a=this[_0x132e17(0x1b1)]();_0xb5644a&&(_0xed0d09['bGXxA'](trace,_0xed0d09['KyQWk']),_0x57a621=this[_0x132e17(0x1a2)][_0x132e17(0x1dd)](0x0,BATCH_SIZE),this[_0x132e17(0x1a2)][_0x132e17(0x1d6)](0x0,BATCH_SIZE),this[_0x132e17(0x192)]());const _0x31c701={};return _0x31c701[_0x132e17(0x1b1)]=_0xb5644a,_0x31c701['proceedWithData']=_0x57a621,_0x31c701[_0x132e17(0x1be)]=this[_0x132e17(0x1d1)],_0x31c701;}const _0xd20faa={};return _0xd20faa['shouldProceed']=!![],_0xd20faa;};[a123_0x420c64(0x1ae)]=async()=>{const _0x1a2d7d=a123_0x420c64,_0x4815ca={'MFwND':_0x1a2d7d(0x1ca),'IfgmT':function(_0x4d5a0a,_0x47635a){return _0x4d5a0a>_0x47635a;},'MOuky':'Shutdown-Queue','VXRHO':function(_0x366627,_0x29b37e){return _0x366627(_0x29b37e);}};await this['uploadPending'](),this[_0x1a2d7d(0x191)](_0x4815ca['MFwND']);while(_0x4815ca['IfgmT'](this[_0x1a2d7d(0x1a2)][_0x1a2d7d(0x182)],0x0)){const _0x32fc3e=this[_0x1a2d7d(0x1a2)][_0x1a2d7d(0x1dd)](0x0,BATCH_SIZE);this['queue'][_0x1a2d7d(0x1d6)](0x0,BATCH_SIZE),await this[_0x1a2d7d(0x1cb)](this[_0x1a2d7d(0x1d1)],_0x4815ca[_0x1a2d7d(0x171)],_0x32fc3e);}_0x4815ca[_0x1a2d7d(0x1c7)](this[_0x1a2d7d(0x1c1)],0x0)&&_0x4815ca['VXRHO'](debug,'Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20'+this[_0x1a2d7d(0x1c1)]);};['batchAndPostEvents']=async(_0x23ef4a,_0x1068da,_0x5807c4)=>{const _0x393256=a123_0x420c64,_0x4c8661={'XyuhO':function(_0x2d3431,_0x3e3c7f){return _0x2d3431(_0x3e3c7f);},'FKqpN':_0x393256(0x197),'IbOWj':function(_0x596b83,_0xce4327){return _0x596b83(_0xce4327);},'yggeH':function(_0x3666dc){return _0x3666dc();},'bvwXN':function(_0x4b8cbc,_0x2609b0,_0x564e14,_0x4e3716,_0x569bbb){return _0x4b8cbc(_0x2609b0,_0x564e14,_0x4e3716,_0x569bbb);},'dbMwd':_0x393256(0x1a4),'kPbNT':function(_0x2d76a2,_0x362962){return _0x2d76a2-_0x362962;},'zAODz':function(_0x48922d,_0x322410){return _0x48922d-_0x322410;}};let _0x26427c='';try{_0x26427c=_0x5807c4[_0x393256(0x18c)](_0x1c5182=>'\x27'+_0x1c5182['event_type']+'\x27:'+(nestedKeyValue(_0x1c5182,['test_run','uuid'])||nestedKeyValue(_0x1c5182,[_0x393256(0x1c9),_0x393256(0x180)])))[_0x393256(0x19e)](','),_0x4c8661['XyuhO'](debug,_0x393256(0x1c3)+_0x1068da+_0x393256(0x1d7)+Buffer[_0x393256(0x1d8)](util['format']('%j',_0x5807c4),_0x4c8661[_0x393256(0x195)])+'\x20bytes.\x20Events\x20are\x20'+_0x26427c);}catch(_0x4c83c6){_0x4c8661[_0x393256(0x181)](debug,_0x393256(0x1ce)+util[_0x393256(0x176)](_0x4c83c6)+'}');}const _0x4034f2={'headers':_0x4c8661['yggeH'](getDefaultHeaders)};try{const _0x5c9897=await _0x4c8661[_0x393256(0x1ab)](nodeRequest,_0x4c8661[_0x393256(0x1c8)],_0x23ef4a,_0x5807c4,_0x4034f2);if(_0x5c9897[_0x393256(0x17a)][_0x393256(0x184)]){const _0x5d61b7={};_0x5d61b7['message']=_0x5c9897[_0x393256(0x17a)][_0x393256(0x184)];throw _0x5d61b7;}else _0x4c8661[_0x393256(0x18a)](debug,_0x1068da+'\x20event\x20successful\x20for\x20events\x20'+_0x26427c+_0x393256(0x1bf)+util[_0x393256(0x176)]('%j',_0x5c9897['data'])),this[_0x393256(0x1c1)]=Math[_0x393256(0x194)](0x0,_0x4c8661['kPbNT'](this['pendingUploads'],_0x5807c4['length']));}catch(_0x1bd2a4){_0x1bd2a4[_0x393256(0x178)]?_0x4c8661[_0x393256(0x181)](debug,'EXCEPTION\x20IN\x20'+_0x1068da+'\x20REQUEST\x20TO\x20'+constants[_0x393256(0x18b)]+_0x393256(0x17e)+_0x1bd2a4[_0x393256(0x178)][_0x393256(0x19f)]+'\x20'+_0x1bd2a4['response'][_0x393256(0x18f)]+'\x20'+util[_0x393256(0x176)]('%j',_0x1bd2a4[_0x393256(0x178)])):_0x4c8661[_0x393256(0x181)](debug,_0x393256(0x1cf)+_0x1068da+'\x20REQUEST\x20TO\x20'+constants[_0x393256(0x18b)]+_0x393256(0x17e)+(_0x1bd2a4['message']||_0x1bd2a4)),this[_0x393256(0x1c1)]=Math[_0x393256(0x194)](0x0,_0x4c8661[_0x393256(0x19b)](this[_0x393256(0x1c1)],_0x5807c4[_0x393256(0x182)]));}};[a123_0x420c64(0x1cc)]=()=>{const _0xb52b22=a123_0x420c64,_0x488919={'akILh':function(_0x2da36a,_0x16130f){return _0x2da36a>_0x16130f;},'QHaXN':function(_0x1600a2,_0x13f9e3){return _0x1600a2(_0x13f9e3);},'WTFuv':_0xb52b22(0x1d4),'jXupv':function(_0x14e4e0,_0x6599b8,_0x3d12c3){return _0x14e4e0(_0x6599b8,_0x3d12c3);}};this[_0xb52b22(0x17b)]=_0x488919['jXupv'](setInterval,async()=>{const _0x16956f=_0xb52b22;if(_0x488919['akILh'](this[_0x16956f(0x1a2)][_0x16956f(0x182)],0x0)){_0x488919['QHaXN'](trace,_0x16956f(0x1ad)+this[_0x16956f(0x1a2)]['length']);const _0x597690=this[_0x16956f(0x1a2)][_0x16956f(0x1dd)](0x0,BATCH_SIZE);this[_0x16956f(0x1a2)][_0x16956f(0x1d6)](0x0,BATCH_SIZE),await this[_0x16956f(0x1cb)](this[_0x16956f(0x1d1)],_0x488919[_0x16956f(0x1c6)],_0x597690),_0x488919[_0x16956f(0x174)](trace,_0x16956f(0x18e)+this['queue'][_0x16956f(0x182)]);}},BATCH_INTERVAL);};[a123_0x420c64(0x192)]=()=>{const _0x566395=a123_0x420c64,_0x274804={};_0x274804[_0x566395(0x170)]='RESETTING';const _0x20f397=_0x274804;this['removeEventBatchPolling'](_0x20f397[_0x566395(0x170)]),this[_0x566395(0x1cc)]();};['removeEventBatchPolling']=_0x1bb5cd=>{const _0x2dc648=a123_0x420c64,_0x52e774={'VNeBh':function(_0x2715e9,_0x5ac763){return _0x2715e9(_0x5ac763);},'HXMlr':function(_0x439476,_0x41f565){return _0x439476===_0x41f565;},'fOYHy':_0x2dc648(0x1ca)};this[_0x2dc648(0x17b)]&&(_0x52e774['VNeBh'](clearInterval,this[_0x2dc648(0x17b)]),this['pollEventBatchInterval']=null,_0x52e774[_0x2dc648(0x177)](_0x1bb5cd,_0x52e774['fOYHy'])&&(this['started']=![]));};[a123_0x420c64(0x1b1)]=()=>{const _0x172ab6=a123_0x420c64,_0x1b2cf2={};_0x1b2cf2[_0x172ab6(0x19a)]=function(_0x12f5d3,_0x3f60e4){return _0x12f5d3>=_0x3f60e4;};const _0x324621=_0x1b2cf2;return _0x324621[_0x172ab6(0x19a)](this[_0x172ab6(0x1a2)][_0x172ab6(0x182)],BATCH_SIZE);};async['uploadPending'](_0x4a9eb5=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x6d169b=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x2b2917=a123_0x420c64,_0x1b260b={'BLFYE':function(_0x18adcd,_0x17188){return _0x18adcd<=_0x17188;},'xKFPh':function(_0x158082,_0x466f72){return _0x158082<=_0x466f72;},'BicJr':function(_0x2ab4dd,_0x248b1c){return _0x2ab4dd(_0x248b1c);},'MGkAG':function(_0x2123e7,_0x5f00a9){return _0x2123e7-_0x5f00a9;}};if(_0x1b260b['BLFYE'](this[_0x2b2917(0x1c1)],0x0)||_0x1b260b[_0x2b2917(0x175)](_0x4a9eb5,0x0))return;return await _0x1b260b[_0x2b2917(0x1d2)](sleep,_0x6d169b),this[_0x2b2917(0x17d)](_0x1b260b[_0x2b2917(0x1c2)](_0x4a9eb5,_0x6d169b));}}module[a123_0x420c64(0x1da)]=RequestQueueHandler;