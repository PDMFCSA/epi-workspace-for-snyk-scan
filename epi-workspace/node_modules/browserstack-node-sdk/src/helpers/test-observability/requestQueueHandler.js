const a115_0x566467=a115_0x5d0f;(function(_0x2aaee1,_0x506f46){const _0x2a3428=a115_0x5d0f,_0x1f81fc=_0x2aaee1();while(!![]){try{const _0x5d1079=parseInt(_0x2a3428(0x1fe))/0x1+-parseInt(_0x2a3428(0x200))/0x2+parseInt(_0x2a3428(0x241))/0x3*(-parseInt(_0x2a3428(0x229))/0x4)+-parseInt(_0x2a3428(0x1f6))/0x5*(-parseInt(_0x2a3428(0x23b))/0x6)+-parseInt(_0x2a3428(0x25c))/0x7*(-parseInt(_0x2a3428(0x24e))/0x8)+-parseInt(_0x2a3428(0x21c))/0x9*(-parseInt(_0x2a3428(0x21a))/0xa)+-parseInt(_0x2a3428(0x24a))/0xb*(parseInt(_0x2a3428(0x239))/0xc);if(_0x5d1079===_0x506f46)break;else _0x1f81fc['push'](_0x1f81fc['shift']());}catch(_0xbfb44c){_0x1f81fc['push'](_0x1f81fc['shift']());}}}(a115_0x2630,0xa641d));function a115_0x2630(){const _0x1563cb=['startEventBatchPolling','TestRunSkipped','twYGR','.\x20Request\x20Size\x20-\x20','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','iiKYR','TEST_REPORTING_ANALYTICS','\x20--\x20','splice','error','format','max','\x20event\x20successful\x20for\x20events\x20','CTRLe','message','uploadAttachmentUrl','542770qElEjT','data','126bJjsAi','includes','UmcTG','LogCreated','kQitx','removeEventBatchPolling','OyvIZ','Shutdown-Queue','resetEventBatchPolling','HookRunStarted','status','instance','../helper','36jlYcWH','Remaining\x20Queue\x20Length\x20-\x20','\x20REQUEST\x20TO\x20','TtUTH','IjLIw','TEST_ATTACHMENT','event_type','oRMDn','getInstance','dptAM','exports','\x20:\x20','lIEML','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','TWqXQ','uploadPending','13284TOrRDG','ELrbn','203124OJjBsM','iJemk','CceEf','hook_run','./utils','./constants','4155PgJcZX','EXCEPTION\x20IN\x20','shutdown','6|2|5|0|1|3|4','qjkVI','uuid','HgjIP','batchAndPostEvents','Processing\x20events.\x20Queue\x20Length\x20-\x20','14597AwuZFa','TestRunFinished','JSsUm','kind','28856AwGnVr','screenshotEventUrl','response','toipp','eventUrl','qjwmQ','AcKrJ','Jzhjg','crTEJ','started','length','UVAzf','pIObJ','eThNe','2513vOPQjR','Processing\x20batch\x20events\x20for\x20','TQMCL','DnLhc','api/v1/screenshots','gSTFX','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','logs','glhQY','pollEventBatchInterval','aTCNy','TestRunStarted','leLwL','CBTSessionCreated','TEST_SCREENSHOT','push','CdIag','RESETTING','map','wuMHO','join','SLaKF','IkYLE','BATCH_EVENT_TYPES','25XPAhbx','slice','proceedWithData','../../bin/utils/constants','lMwha','proceedWithUrl','pendingUploads','start','791546apxihh','queue','1706328DKHyKz','test_run','shouldProceed','add','REMOVING','KAkCh','POST','Interval-Queue','xbUXD','\x20bytes.\x20Events\x20are\x20'];a115_0x2630=function(){return _0x1563cb;};return a115_0x2630();}const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a115_0x566467(0x240)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a115_0x566467(0x23f)),{nestedKeyValue}=require(a115_0x566467(0x228)),util=require('util'),constants=require(a115_0x566467(0x1f9));function a115_0x5d0f(_0x158d7d,_0x92ea2d){const _0x263042=a115_0x2630();return a115_0x5d0f=function(_0x5d0f76,_0x3a9bf4){_0x5d0f76=_0x5d0f76-0x1e0;let _0x451274=_0x263042[_0x5d0f76];return _0x451274;},a115_0x5d0f(_0x158d7d,_0x92ea2d);}class RequestQueueHandler{static ['instance'];[a115_0x566467(0x1fc)]=0x0;constructor(){const _0x12e818=a115_0x566467,_0x59b229={};_0x59b229['IjLIw']=_0x12e818(0x244),_0x59b229[_0x12e818(0x20c)]=_0x12e818(0x1e2),_0x59b229['dptAM']='upload-attachments',_0x59b229[_0x12e818(0x1e1)]=_0x12e818(0x21f),_0x59b229[_0x12e818(0x23d)]=_0x12e818(0x1eb),_0x59b229[_0x12e818(0x247)]=_0x12e818(0x24b),_0x59b229['FeRKZ']=_0x12e818(0x20b),_0x59b229[_0x12e818(0x259)]='HookRunFinished',_0x59b229[_0x12e818(0x254)]=_0x12e818(0x1e9),_0x59b229[_0x12e818(0x245)]=_0x12e818(0x225),_0x59b229[_0x12e818(0x235)]='api/v1/batch';const _0x5beccb=_0x59b229,_0x4c0ccf=_0x5beccb[_0x12e818(0x22d)]['split']('|');let _0x147b8b=0x0;while(!![]){switch(_0x4c0ccf[_0x147b8b++]){case'0':this[_0x12e818(0x24f)]=_0x5beccb[_0x12e818(0x20c)];continue;case'1':this[_0x12e818(0x219)]=_0x5beccb[_0x12e818(0x232)];continue;case'2':this[_0x12e818(0x257)]=![];continue;case'3':this[_0x12e818(0x1f5)]=[_0x5beccb['DnLhc'],_0x5beccb[_0x12e818(0x23d)],_0x5beccb['HgjIP'],_0x5beccb['FeRKZ'],_0x5beccb[_0x12e818(0x259)],_0x5beccb['AcKrJ'],_0x5beccb[_0x12e818(0x245)]];continue;case'4':this[_0x12e818(0x1e7)]=null;continue;case'5':this[_0x12e818(0x252)]=_0x5beccb['lIEML'];continue;case'6':this['queue']=[];continue;}break;}}static[a115_0x566467(0x231)](){const _0x2de101=a115_0x566467;return!RequestQueueHandler[_0x2de101(0x227)]&&(RequestQueueHandler['instance']=new RequestQueueHandler()),RequestQueueHandler[_0x2de101(0x227)];}[a115_0x566467(0x1fd)]=()=>{const _0x44754e=a115_0x566467;!this[_0x44754e(0x257)]&&(this[_0x44754e(0x257)]=!![],this[_0x44754e(0x20a)]());};[a115_0x566467(0x203)]=_0x3d7923=>{const _0x41fed5=a115_0x566467,_0x7cb4da={'iiKYR':function(_0x57ab42,_0x57cee5){return _0x57ab42===_0x57cee5;},'qFgHo':_0x41fed5(0x1ec),'oRMDn':function(_0x2a926f,_0x4c2a7c){return _0x2a926f>_0x4c2a7c;},'CTRLe':function(_0x143c32,_0x479866){return _0x143c32===_0x479866;},'kQitx':_0x41fed5(0x22e),'vcalz':function(_0x12aff5,_0xb52545){return _0x12aff5!==_0xb52545;},'TQMCL':'TestRunFinished','wuMHO':function(_0x1b27ac,_0x7d88f5){return _0x1b27ac(_0x7d88f5);},'TWqXQ':_0x41fed5(0x1e4)};if(this['BATCH_EVENT_TYPES'][_0x41fed5(0x21d)](_0x3d7923[_0x41fed5(0x22f)])){if(_0x3d7923['logs']&&_0x3d7923[_0x41fed5(0x1e5)][0x0]&&_0x7cb4da[_0x41fed5(0x20f)](_0x3d7923[_0x41fed5(0x1e5)][0x0][_0x41fed5(0x24d)],_0x7cb4da['qFgHo'])){const _0xac3e8d={};return _0xac3e8d[_0x41fed5(0x202)]=!![],_0xac3e8d[_0x41fed5(0x1f8)]=[_0x3d7923],_0xac3e8d['proceedWithUrl']=this[_0x41fed5(0x24f)],_0xac3e8d;}if(_0x3d7923[_0x41fed5(0x1e5)]&&_0x7cb4da[_0x41fed5(0x230)](_0x3d7923[_0x41fed5(0x1e5)][_0x41fed5(0x258)],0x0)&&_0x7cb4da[_0x41fed5(0x217)](_0x3d7923['logs'][0x0][_0x41fed5(0x24d)],_0x7cb4da[_0x41fed5(0x220)])&&_0x7cb4da['vcalz'](_0x3d7923['event_type'],_0x7cb4da[_0x41fed5(0x1e0)])){const _0xdea617={};return _0xdea617['shouldProceed']=!![],_0xdea617[_0x41fed5(0x1f8)]=[_0x3d7923],_0xdea617[_0x41fed5(0x1fb)]=this[_0x41fed5(0x219)],_0xdea617;}this[_0x41fed5(0x1ff)][_0x41fed5(0x1ed)](_0x3d7923);let _0x52af83=null;const _0x343f87=this[_0x41fed5(0x202)]();_0x343f87&&(_0x7cb4da[_0x41fed5(0x1f1)](trace,_0x7cb4da[_0x41fed5(0x237)]),_0x52af83=this[_0x41fed5(0x1ff)][_0x41fed5(0x1f7)](0x0,BATCH_SIZE),this['queue'][_0x41fed5(0x212)](0x0,BATCH_SIZE),this['resetEventBatchPolling']());const _0xaa6ef6={};return _0xaa6ef6[_0x41fed5(0x202)]=_0x343f87,_0xaa6ef6[_0x41fed5(0x1f8)]=_0x52af83,_0xaa6ef6[_0x41fed5(0x1fb)]=this['eventUrl'],_0xaa6ef6;}const _0xa9db63={};return _0xa9db63[_0x41fed5(0x202)]=!![],_0xa9db63;};[a115_0x566467(0x243)]=async()=>{const _0x4d3f44=a115_0x566467,_0x5a9b0f={'glhQY':_0x4d3f44(0x204),'Jzhjg':function(_0x3de2a0,_0x2d7601){return _0x3de2a0>_0x2d7601;},'SLaKF':_0x4d3f44(0x223),'oyNMv':function(_0x262632,_0x731917){return _0x262632>_0x731917;},'eThNe':function(_0x423421,_0x1f7da4){return _0x423421(_0x1f7da4);}};await this[_0x4d3f44(0x238)](),this[_0x4d3f44(0x221)](_0x5a9b0f[_0x4d3f44(0x1e6)]);while(_0x5a9b0f[_0x4d3f44(0x255)](this[_0x4d3f44(0x1ff)][_0x4d3f44(0x258)],0x0)){const _0x1c85d8=this[_0x4d3f44(0x1ff)][_0x4d3f44(0x1f7)](0x0,BATCH_SIZE);this[_0x4d3f44(0x1ff)]['splice'](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x4d3f44(0x252)],_0x5a9b0f[_0x4d3f44(0x1f3)],_0x1c85d8);}_0x5a9b0f['oyNMv'](this['pendingUploads'],0x0)&&_0x5a9b0f[_0x4d3f44(0x25b)](debug,_0x4d3f44(0x20e)+this[_0x4d3f44(0x1fc)]);};[a115_0x566467(0x248)]=async(_0x30c3b3,_0x55477c,_0xdbaf58)=>{const _0x2c925b=a115_0x566467,_0x531fa9={'KAkCh':function(_0x2eb43d,_0x54bd84){return _0x2eb43d(_0x54bd84);},'UmcTG':'utf8','leLwL':function(_0x5494da){return _0x5494da();},'gSTFX':function(_0x1aa9c1,_0x56f6d4,_0x305d4e,_0x2f65f8,_0x15bae3){return _0x1aa9c1(_0x56f6d4,_0x305d4e,_0x2f65f8,_0x15bae3);},'IkYLE':_0x2c925b(0x206),'aTCNy':function(_0x516c19,_0x398152){return _0x516c19-_0x398152;},'JSsUm':function(_0x4dcab5,_0x4be4d0){return _0x4dcab5(_0x4be4d0);}};let _0x3ed993='';try{_0x3ed993=_0xdbaf58[_0x2c925b(0x1f0)](_0x4242e0=>'\x27'+_0x4242e0[_0x2c925b(0x22f)]+'\x27:'+(nestedKeyValue(_0x4242e0,[_0x2c925b(0x201),_0x2c925b(0x246)])||nestedKeyValue(_0x4242e0,[_0x2c925b(0x23e),_0x2c925b(0x246)])))[_0x2c925b(0x1f2)](','),_0x531fa9[_0x2c925b(0x205)](debug,_0x2c925b(0x25d)+_0x55477c+_0x2c925b(0x20d)+Buffer['byteLength'](util[_0x2c925b(0x214)]('%j',_0xdbaf58),_0x531fa9[_0x2c925b(0x21e)])+_0x2c925b(0x209)+_0x3ed993);}catch(_0x44b032){_0x531fa9[_0x2c925b(0x205)](debug,_0x2c925b(0x236)+util[_0x2c925b(0x214)](_0x44b032)+'}');}const _0x15304a={'headers':_0x531fa9[_0x2c925b(0x1ea)](getDefaultHeaders)};try{const _0x46db27=await _0x531fa9[_0x2c925b(0x1e3)](nodeRequest,_0x531fa9[_0x2c925b(0x1f4)],_0x30c3b3,_0xdbaf58,_0x15304a);if(_0x46db27[_0x2c925b(0x21b)][_0x2c925b(0x213)]){const _0x5bb72c={};_0x5bb72c[_0x2c925b(0x218)]=_0x46db27[_0x2c925b(0x21b)]['error'];throw _0x5bb72c;}else _0x531fa9[_0x2c925b(0x205)](debug,_0x55477c+_0x2c925b(0x216)+_0x3ed993+_0x2c925b(0x211)+util[_0x2c925b(0x214)]('%j',_0x46db27[_0x2c925b(0x21b)])),this[_0x2c925b(0x1fc)]=Math[_0x2c925b(0x215)](0x0,_0x531fa9[_0x2c925b(0x1e8)](this[_0x2c925b(0x1fc)],_0xdbaf58[_0x2c925b(0x258)]));}catch(_0x4ec7f0){_0x4ec7f0[_0x2c925b(0x250)]?_0x531fa9[_0x2c925b(0x24c)](debug,_0x2c925b(0x242)+_0x55477c+_0x2c925b(0x22b)+constants[_0x2c925b(0x210)]+_0x2c925b(0x234)+_0x4ec7f0['response'][_0x2c925b(0x226)]+'\x20'+_0x4ec7f0[_0x2c925b(0x250)]['statusText']+'\x20'+util[_0x2c925b(0x214)]('%j',_0x4ec7f0[_0x2c925b(0x250)])):_0x531fa9['JSsUm'](debug,'EXCEPTION\x20IN\x20'+_0x55477c+_0x2c925b(0x22b)+constants[_0x2c925b(0x210)]+'\x20:\x20'+(_0x4ec7f0[_0x2c925b(0x218)]||_0x4ec7f0)),this[_0x2c925b(0x1fc)]=Math[_0x2c925b(0x215)](0x0,_0x531fa9['aTCNy'](this['pendingUploads'],_0xdbaf58['length']));}};[a115_0x566467(0x20a)]=()=>{const _0x577e5f=a115_0x566467,_0x2c8186={'OyvIZ':function(_0x210177,_0x2eaa9b){return _0x210177>_0x2eaa9b;},'qjwmQ':function(_0x19edab,_0x1fc68c){return _0x19edab(_0x1fc68c);},'crTEJ':_0x577e5f(0x207),'pIObJ':function(_0x306fdb,_0x153a5f){return _0x306fdb(_0x153a5f);},'CdIag':function(_0x373123,_0x388787,_0x28f1ba){return _0x373123(_0x388787,_0x28f1ba);}};this[_0x577e5f(0x1e7)]=_0x2c8186[_0x577e5f(0x1ee)](setInterval,async()=>{const _0x3a6bfd=_0x577e5f;if(_0x2c8186[_0x3a6bfd(0x222)](this[_0x3a6bfd(0x1ff)][_0x3a6bfd(0x258)],0x0)){_0x2c8186[_0x3a6bfd(0x253)](trace,_0x3a6bfd(0x249)+this['queue'][_0x3a6bfd(0x258)]);const _0x27efea=this[_0x3a6bfd(0x1ff)][_0x3a6bfd(0x1f7)](0x0,BATCH_SIZE);this['queue'][_0x3a6bfd(0x212)](0x0,BATCH_SIZE),await this[_0x3a6bfd(0x248)](this[_0x3a6bfd(0x252)],_0x2c8186[_0x3a6bfd(0x256)],_0x27efea),_0x2c8186[_0x3a6bfd(0x25a)](trace,_0x3a6bfd(0x22a)+this['queue']['length']);}},BATCH_INTERVAL);};[a115_0x566467(0x224)]=()=>{const _0x3879bc=a115_0x566467,_0x575578={};_0x575578[_0x3879bc(0x23c)]=_0x3879bc(0x1ef);const _0x355110=_0x575578;this['removeEventBatchPolling'](_0x355110[_0x3879bc(0x23c)]),this[_0x3879bc(0x20a)]();};[a115_0x566467(0x221)]=_0x4a7ae5=>{const _0x206a57=a115_0x566467,_0x516e56={'upKqi':function(_0x350a04,_0x17d101){return _0x350a04(_0x17d101);},'ELrbn':function(_0x8d0980,_0x4db82f){return _0x8d0980===_0x4db82f;},'Urdow':'REMOVING'};this[_0x206a57(0x1e7)]&&(_0x516e56['upKqi'](clearInterval,this[_0x206a57(0x1e7)]),this['pollEventBatchInterval']=null,_0x516e56[_0x206a57(0x23a)](_0x4a7ae5,_0x516e56['Urdow'])&&(this[_0x206a57(0x257)]=![]));};[a115_0x566467(0x202)]=()=>{const _0x233c1b=a115_0x566467,_0x1d96c1={};_0x1d96c1['xbUXD']=function(_0x36b068,_0x30307e){return _0x36b068>=_0x30307e;};const _0x24b29b=_0x1d96c1;return _0x24b29b[_0x233c1b(0x208)](this[_0x233c1b(0x1ff)][_0x233c1b(0x258)],BATCH_SIZE);};async['uploadPending'](_0x256666=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x552720=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x70a44d=a115_0x566467,_0x2750e9={'MoEfk':function(_0x14c42f,_0x27569a){return _0x14c42f<=_0x27569a;},'TtUTH':function(_0x33b552,_0x54dfaa){return _0x33b552<=_0x54dfaa;},'toipp':function(_0x971232,_0x5ef031){return _0x971232(_0x5ef031);},'lMwha':function(_0x93cacf,_0x473c6d){return _0x93cacf-_0x473c6d;}};if(_0x2750e9['MoEfk'](this[_0x70a44d(0x1fc)],0x0)||_0x2750e9[_0x70a44d(0x22c)](_0x256666,0x0))return;return await _0x2750e9[_0x70a44d(0x251)](sleep,_0x552720),this[_0x70a44d(0x238)](_0x2750e9[_0x70a44d(0x1fa)](_0x256666,_0x552720));}}module[a115_0x566467(0x233)]=RequestQueueHandler;