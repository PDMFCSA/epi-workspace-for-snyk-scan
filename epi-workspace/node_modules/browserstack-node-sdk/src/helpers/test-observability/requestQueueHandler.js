function a115_0x597f(){const _0x56ec4b=['test_run','uploadAttachmentUrl','NWkjZ','.\x20Request\x20Size\x20-\x20','shutdown','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','zrKUt','data','split','TestRunFinished','response','wPjVq','EZiWU','status','HookRunStarted','shouldProceed','16ltSVvM','max','message','zNOKE','WYZlg','instance','zLwMm','api/v1/screenshots','uuid','exports','utf8','eventUrl','startEventBatchPolling','781YkQjFa','proceedWithUrl','eBykR','1756510VsfmCm','REMOVING','qKvqU','event_type','ydOmF','start','pendingUploads','started','RUoWv','slice','./constants','logs','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','\x20bytes.\x20Events\x20are\x20','TEST_SCREENSHOT','Shutdown-Queue','Remaining\x20Queue\x20Length\x20-\x20','LJjxo','igEwA','UtSjB','PhPBI','includes','screenshotEventUrl','byteLength','EXCEPTION\x20IN\x20','resetEventBatchPolling','map','./utils','KDHoY','splice','getInstance','xabtm','Interval-Queue','ilHKC','35BQLeDu','kind','LogCreated','push','RCFpd','wmavI','177972XreSEW','1687221gYuqcY','ITARa','MAwIr','CBTSessionCreated','batchAndPostEvents','86lKIxFP','wLoEG','wXTJi','length','../helper','rRLzw','TestRunStarted','uploadPending','Processing\x20events.\x20Queue\x20Length\x20-\x20','228468tihtfF','add','pollEventBatchInterval','1435yTQrhx','YYKfE','IEdsY','removeEventBatchPolling','8byhHko','queue','FtItX','58044rnrtyZ','zXOGs','BATCH_EVENT_TYPES','TFIuv','lfrcq','VfCun','ZLuhk','YIqGe','TestRunSkipped','idiiy','join','api/v1/batch','CHzLS','format','wZfoe','proceedWithData','1501416OffJeP','DGpOv','TXTXu','ZqKxH','Processing\x20batch\x20events\x20for\x20','upload-attachments','RESETTING','TEST_ATTACHMENT'];a115_0x597f=function(){return _0x56ec4b;};return a115_0x597f();}const a115_0x1be090=a115_0x5951;(function(_0x40cfdb,_0x3667a1){const _0x32c63c=a115_0x5951,_0x10e386=_0x40cfdb();while(!![]){try{const _0x270137=-parseInt(_0x32c63c(0x14c))/0x1*(-parseInt(_0x32c63c(0x140))/0x2)+-parseInt(_0x32c63c(0x13a))/0x3*(parseInt(_0x32c63c(0x150))/0x4)+parseInt(_0x32c63c(0x134))/0x5*(parseInt(_0x32c63c(0x149))/0x6)+parseInt(_0x32c63c(0x163))/0x7+parseInt(_0x32c63c(0x17b))/0x8*(-parseInt(_0x32c63c(0x13b))/0x9)+-parseInt(_0x32c63c(0x18b))/0xa+parseInt(_0x32c63c(0x188))/0xb*(parseInt(_0x32c63c(0x153))/0xc);if(_0x270137===_0x3667a1)break;else _0x10e386['push'](_0x10e386['shift']());}catch(_0xc13c54){_0x10e386['push'](_0x10e386['shift']());}}}(a115_0x597f,0x34f61));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a115_0x1be090(0x195)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a115_0x1be090(0x12d)),{nestedKeyValue}=require(a115_0x1be090(0x144)),util=require('util');class RequestQueueHandler{static [a115_0x1be090(0x180)];[a115_0x1be090(0x191)]=0x0;constructor(){const _0x1c35e2=a115_0x1be090,_0x379d13={};_0x379d13[_0x1c35e2(0x166)]='0|6|5|2|1|4|3',_0x379d13[_0x1c35e2(0x16d)]=_0x1c35e2(0x168),_0x379d13['UtSjB']=_0x1c35e2(0x182),_0x379d13[_0x1c35e2(0x139)]=_0x1c35e2(0x136),_0x379d13[_0x1c35e2(0x19d)]=_0x1c35e2(0x13e),_0x379d13[_0x1c35e2(0x17f)]=_0x1c35e2(0x174),_0x379d13[_0x1c35e2(0x133)]=_0x1c35e2(0x15b),_0x379d13[_0x1c35e2(0x141)]='HookRunFinished',_0x379d13[_0x1c35e2(0x18d)]=_0x1c35e2(0x146),_0x379d13[_0x1c35e2(0x157)]=_0x1c35e2(0x179),_0x379d13[_0x1c35e2(0x158)]=_0x1c35e2(0x15e);const _0x59eed5=_0x379d13,_0x7c4c14=_0x59eed5[_0x1c35e2(0x166)][_0x1c35e2(0x173)]('|');let _0x3f3590=0x0;while(!![]){switch(_0x7c4c14[_0x3f3590++]){case'0':this[_0x1c35e2(0x151)]=[];continue;case'1':this[_0x1c35e2(0x16c)]=_0x59eed5[_0x1c35e2(0x16d)];continue;case'2':this[_0x1c35e2(0x1a1)]=_0x59eed5[_0x1c35e2(0x19e)];continue;case'3':this[_0x1c35e2(0x14b)]=null;continue;case'4':this[_0x1c35e2(0x155)]=[_0x59eed5[_0x1c35e2(0x139)],_0x59eed5['igEwA'],_0x59eed5['WYZlg'],_0x59eed5['ilHKC'],_0x59eed5[_0x1c35e2(0x141)],_0x59eed5['qKvqU'],_0x59eed5['lfrcq']];continue;case'5':this[_0x1c35e2(0x186)]=_0x59eed5[_0x1c35e2(0x158)];continue;case'6':this[_0x1c35e2(0x192)]=![];continue;}break;}}static[a115_0x1be090(0x130)](){const _0x473e7c=a115_0x1be090;return!RequestQueueHandler[_0x473e7c(0x180)]&&(RequestQueueHandler[_0x473e7c(0x180)]=new RequestQueueHandler()),RequestQueueHandler['instance'];}[a115_0x1be090(0x190)]=()=>{const _0x362e0d=a115_0x1be090;!this[_0x362e0d(0x192)]&&(this[_0x362e0d(0x192)]=!![],this[_0x362e0d(0x187)]());};[a115_0x1be090(0x14a)]=_0x1c7d4e=>{const _0x70ca0f=a115_0x1be090,_0x577976={'eGWSU':function(_0x4208d0,_0x4d51e5){return _0x4208d0===_0x4d51e5;},'SyuLy':_0x70ca0f(0x199),'IEdsY':function(_0x37c650,_0x2b39cc){return _0x37c650>_0x2b39cc;},'FtItX':function(_0x179d96,_0x31fcc2){return _0x179d96===_0x31fcc2;},'PYrLe':_0x70ca0f(0x16a),'TXTXu':function(_0x19cafe,_0x3c489c){return _0x19cafe!==_0x3c489c;},'LJjxo':_0x70ca0f(0x174),'QEwCU':function(_0x3adf11,_0x24ad2f){return _0x3adf11(_0x24ad2f);},'eBykR':'Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..'};if(this[_0x70ca0f(0x155)][_0x70ca0f(0x1a0)](_0x1c7d4e[_0x70ca0f(0x18e)])){if(_0x1c7d4e['logs']&&_0x1c7d4e[_0x70ca0f(0x196)][0x0]&&_0x577976['eGWSU'](_0x1c7d4e[_0x70ca0f(0x196)][0x0][_0x70ca0f(0x135)],_0x577976['SyuLy'])){const _0x369222={};return _0x369222[_0x70ca0f(0x17a)]=!![],_0x369222[_0x70ca0f(0x162)]=[_0x1c7d4e],_0x369222[_0x70ca0f(0x189)]=this[_0x70ca0f(0x1a1)],_0x369222;}if(_0x1c7d4e[_0x70ca0f(0x196)]&&_0x577976[_0x70ca0f(0x14e)](_0x1c7d4e['logs']['length'],0x0)&&_0x577976[_0x70ca0f(0x152)](_0x1c7d4e[_0x70ca0f(0x196)][0x0]['kind'],_0x577976['PYrLe'])&&_0x577976[_0x70ca0f(0x165)](_0x1c7d4e[_0x70ca0f(0x18e)],_0x577976[_0x70ca0f(0x19c)])){const _0xc2b729={};return _0xc2b729[_0x70ca0f(0x17a)]=!![],_0xc2b729['proceedWithData']=[_0x1c7d4e],_0xc2b729['proceedWithUrl']=this[_0x70ca0f(0x16c)],_0xc2b729;}this[_0x70ca0f(0x151)][_0x70ca0f(0x137)](_0x1c7d4e);let _0x2050d9=null;const _0x534afe=this['shouldProceed']();_0x534afe&&(_0x577976['QEwCU'](trace,_0x577976[_0x70ca0f(0x18a)]),_0x2050d9=this['queue'][_0x70ca0f(0x194)](0x0,BATCH_SIZE),this[_0x70ca0f(0x151)]['splice'](0x0,BATCH_SIZE),this['resetEventBatchPolling']());const _0x3540c8={};return _0x3540c8[_0x70ca0f(0x17a)]=_0x534afe,_0x3540c8['proceedWithData']=_0x2050d9,_0x3540c8[_0x70ca0f(0x189)]=this[_0x70ca0f(0x186)],_0x3540c8;}const _0x58c39f={};return _0x58c39f['shouldProceed']=!![],_0x58c39f;};[a115_0x1be090(0x16f)]=async()=>{const _0x107c99=a115_0x1be090,_0xb5952a={'rRLzw':_0x107c99(0x18c),'zrKUt':function(_0x4ffea0,_0x23bd56){return _0x4ffea0>_0x23bd56;},'ZLuhk':_0x107c99(0x19a),'ITARa':function(_0xc0fb6f,_0x4304ba){return _0xc0fb6f(_0x4304ba);}};await this[_0x107c99(0x147)](),this[_0x107c99(0x14f)](_0xb5952a[_0x107c99(0x145)]);while(_0xb5952a[_0x107c99(0x171)](this[_0x107c99(0x151)][_0x107c99(0x143)],0x0)){const _0x1ef89e=this[_0x107c99(0x151)][_0x107c99(0x194)](0x0,BATCH_SIZE);this[_0x107c99(0x151)]['splice'](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x107c99(0x186)],_0xb5952a[_0x107c99(0x159)],_0x1ef89e);}_0xb5952a[_0x107c99(0x171)](this['pendingUploads'],0x0)&&_0xb5952a[_0x107c99(0x13c)](debug,'Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20'+this['pendingUploads']);};[a115_0x1be090(0x13f)]=async(_0x3af823,_0x13741f,_0x1eaa7f)=>{const _0x3273dc=a115_0x1be090,_0x36aa76={'wZfoe':function(_0x36268b,_0x499491){return _0x36268b(_0x499491);},'YYKfE':_0x3273dc(0x185),'Zqalc':function(_0x4b04ab,_0x19776a){return _0x4b04ab(_0x19776a);},'wXTJi':function(_0x373ab1){return _0x373ab1();},'DGpOv':function(_0x49a93b,_0x155040,_0x358b57,_0xae7126,_0x320d36){return _0x49a93b(_0x155040,_0x358b57,_0xae7126,_0x320d36);},'idiiy':'POST','xabtm':function(_0x278077,_0x571a93){return _0x278077(_0x571a93);},'ydOmF':function(_0x4bd7d9,_0x1f1c69){return _0x4bd7d9-_0x1f1c69;},'zNOKE':function(_0x89bda7,_0x40d434){return _0x89bda7-_0x40d434;}};let _0x731beb='';try{_0x731beb=_0x1eaa7f[_0x3273dc(0x1a5)](_0x9a61d2=>'\x27'+_0x9a61d2['event_type']+'\x27:'+(nestedKeyValue(_0x9a61d2,[_0x3273dc(0x16b),'uuid'])||nestedKeyValue(_0x9a61d2,['hook_run',_0x3273dc(0x183)])))[_0x3273dc(0x15d)](','),_0x36aa76['wZfoe'](debug,_0x3273dc(0x167)+_0x13741f+_0x3273dc(0x16e)+Buffer[_0x3273dc(0x1a2)](util[_0x3273dc(0x160)]('%j',_0x1eaa7f),_0x36aa76[_0x3273dc(0x14d)])+_0x3273dc(0x198)+_0x731beb);}catch(_0x2ddd20){_0x36aa76['Zqalc'](debug,_0x3273dc(0x170)+util[_0x3273dc(0x160)](_0x2ddd20)+'}');}const _0xe296b6={'headers':_0x36aa76[_0x3273dc(0x142)](getDefaultHeaders)};try{const _0x34e961=await _0x36aa76[_0x3273dc(0x164)](nodeRequest,_0x36aa76[_0x3273dc(0x15c)],_0x3af823,_0x1eaa7f,_0xe296b6);if(_0x34e961[_0x3273dc(0x172)]['error']){const _0x3762ed={};_0x3762ed[_0x3273dc(0x17d)]=_0x34e961[_0x3273dc(0x172)]['error'];throw _0x3762ed;}else _0x36aa76['xabtm'](debug,_0x13741f+'\x20event\x20successful\x20for\x20events\x20'+_0x731beb+'\x20--\x20'+util[_0x3273dc(0x160)]('%j',_0x34e961[_0x3273dc(0x172)])),this[_0x3273dc(0x191)]=Math[_0x3273dc(0x17c)](0x0,_0x36aa76[_0x3273dc(0x18f)](this['pendingUploads'],_0x1eaa7f[_0x3273dc(0x143)]));}catch(_0x13be9e){_0x13be9e[_0x3273dc(0x175)]?_0x36aa76[_0x3273dc(0x161)](debug,_0x3273dc(0x1a3)+_0x13741f+_0x3273dc(0x197)+_0x13be9e[_0x3273dc(0x175)][_0x3273dc(0x178)]+'\x20'+_0x13be9e['response']['statusText']+'\x20'+util[_0x3273dc(0x160)]('%j',_0x13be9e[_0x3273dc(0x175)])):_0x36aa76[_0x3273dc(0x131)](debug,'EXCEPTION\x20IN\x20'+_0x13741f+_0x3273dc(0x197)+(_0x13be9e[_0x3273dc(0x17d)]||_0x13be9e)),this[_0x3273dc(0x191)]=Math[_0x3273dc(0x17c)](0x0,_0x36aa76[_0x3273dc(0x17e)](this[_0x3273dc(0x191)],_0x1eaa7f[_0x3273dc(0x143)]));}};[a115_0x1be090(0x187)]=()=>{const _0x451eb3=a115_0x1be090,_0xfc6d9c={'RCFpd':function(_0x3bab01,_0x481398){return _0x3bab01>_0x481398;},'zLwMm':function(_0x2fb055,_0x4f3b00){return _0x2fb055(_0x4f3b00);},'EZiWU':_0x451eb3(0x132),'zXOGs':function(_0x509d91,_0x1ee1d9,_0x3a32cd){return _0x509d91(_0x1ee1d9,_0x3a32cd);}};this['pollEventBatchInterval']=_0xfc6d9c[_0x451eb3(0x154)](setInterval,async()=>{const _0x3b4750=_0x451eb3;if(_0xfc6d9c[_0x3b4750(0x138)](this[_0x3b4750(0x151)][_0x3b4750(0x143)],0x0)){_0xfc6d9c[_0x3b4750(0x181)](trace,_0x3b4750(0x148)+this[_0x3b4750(0x151)][_0x3b4750(0x143)]);const _0x34e0a5=this[_0x3b4750(0x151)][_0x3b4750(0x194)](0x0,BATCH_SIZE);this[_0x3b4750(0x151)][_0x3b4750(0x12f)](0x0,BATCH_SIZE),await this[_0x3b4750(0x13f)](this['eventUrl'],_0xfc6d9c[_0x3b4750(0x177)],_0x34e0a5),_0xfc6d9c[_0x3b4750(0x181)](trace,_0x3b4750(0x19b)+this[_0x3b4750(0x151)][_0x3b4750(0x143)]);}},BATCH_INTERVAL);};[a115_0x1be090(0x1a4)]=()=>{const _0x271796=a115_0x1be090,_0x7df46d={};_0x7df46d[_0x271796(0x19f)]=_0x271796(0x169);const _0x404064=_0x7df46d;this[_0x271796(0x14f)](_0x404064['PhPBI']),this[_0x271796(0x187)]();};['removeEventBatchPolling']=_0x34d89b=>{const _0x1fd2ed=a115_0x1be090,_0x20c825={'RUoWv':function(_0x1b8780,_0x33c6d5){return _0x1b8780(_0x33c6d5);},'KDHoY':function(_0x45620b,_0x1cf8fb){return _0x45620b===_0x1cf8fb;},'CHzLS':_0x1fd2ed(0x18c)};this[_0x1fd2ed(0x14b)]&&(_0x20c825[_0x1fd2ed(0x193)](clearInterval,this[_0x1fd2ed(0x14b)]),this[_0x1fd2ed(0x14b)]=null,_0x20c825[_0x1fd2ed(0x12e)](_0x34d89b,_0x20c825[_0x1fd2ed(0x15f)])&&(this[_0x1fd2ed(0x192)]=![]));};[a115_0x1be090(0x17a)]=()=>{const _0x3a732c=a115_0x1be090,_0x24b237={};_0x24b237['KsckK']=function(_0x95884d,_0x9f13ef){return _0x95884d>=_0x9f13ef;};const _0x1ddc06=_0x24b237;return _0x1ddc06['KsckK'](this[_0x3a732c(0x151)][_0x3a732c(0x143)],BATCH_SIZE);};async['uploadPending'](_0xa30d05=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x38661e=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x1b2945=a115_0x1be090,_0x3d9c72={'YIqGe':function(_0x1023ce,_0x3a2843){return _0x1023ce<=_0x3a2843;},'wPjVq':function(_0x24934a,_0x430a4d){return _0x24934a<=_0x430a4d;},'MAwIr':function(_0xaf3f67,_0x539237){return _0xaf3f67(_0x539237);},'TFIuv':function(_0x375162,_0x45347b){return _0x375162-_0x45347b;}};if(_0x3d9c72[_0x1b2945(0x15a)](this[_0x1b2945(0x191)],0x0)||_0x3d9c72[_0x1b2945(0x176)](_0xa30d05,0x0))return;return await _0x3d9c72[_0x1b2945(0x13d)](sleep,_0x38661e),this[_0x1b2945(0x147)](_0x3d9c72[_0x1b2945(0x156)](_0xa30d05,_0x38661e));}}function a115_0x5951(_0x116a9,_0x1f424b){const _0x597f89=a115_0x597f();return a115_0x5951=function(_0x595128,_0x1228d9){_0x595128=_0x595128-0x12d;let _0x5306ea=_0x597f89[_0x595128];return _0x5306ea;},a115_0x5951(_0x116a9,_0x1f424b);}module[a115_0x1be090(0x184)]=RequestQueueHandler;