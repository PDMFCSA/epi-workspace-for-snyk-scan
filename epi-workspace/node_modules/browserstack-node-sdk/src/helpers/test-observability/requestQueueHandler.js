function a128_0x4620(){const _0x1b0162=['rUxsd','instance','jLMKF','ypydS','kAjhh','../helper','.\x20Request\x20Size\x20-\x20','ACjYI','util','eventUrl','batchAndPostEvents','logs','lYypn','BATCH_EVENT_TYPES','pendingUploads','egsUP','start','reROt','59967fEGHzT','EXCEPTION\x20IN\x20','api/v1/batch','exports','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','proceedWithUrl','aRpba','CAvUj','mPkQE','Interval-Queue','1461823SDlKvj','OzGaS','LqeNO','proceedWithData','xEvrz','includes','push','RESETTING','TestRunStarted','uploadAttachmentUrl','qSOgf','\x20event\x20successful\x20for\x20events\x20','pollEventBatchInterval','map','jayIc','130EjyLQu','Processing\x20events.\x20Queue\x20Length\x20-\x20','removeEventBatchPolling','Aheip','data','Shutdown-Queue','InoOi','djRku','../../bin/utils/constants','3lmWywj','kgxkx','pEYSt','xWBzg','HookRunFinished','test_run','\x20:\x20','noqMw','5579koDYaG','12BiXJpz','utf8','uuid','Remaining\x20Queue\x20Length\x20-\x20','EJLNy','statusText','wsJHi','OCUDP','Qtase','VKdlx','error','byteLength','TestRunSkipped','mmpcb','dRAVc','112956RRLwwI','max','queue','event_type','bJCOp','uLKlS','REMOVING','getInstance','TEST_REPORTING_ANALYTICS','splice','uploadPending','NeOFq','468PyuUdg','split','shouldProceed','HookRunStarted','pSsbj','response','format','MwVjx','add','2057540lEakfi','length','YTOrD','slice','startEventBatchPolling','kind','1428378qIfiqa','TEST_ATTACHMENT','LbDYz','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','./constants','mcJjh','2712456ptvXce','jttcR','\x20--\x20','CBTSessionCreated','TnLgP','TestRunFinished','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','hook_run','status','api/v1/screenshots','\x20REQUEST\x20TO\x20','shutdown','4tAFQjQ','resetEventBatchPolling'];a128_0x4620=function(){return _0x1b0162;};return a128_0x4620();}const a128_0xaafbd4=a128_0x731e;(function(_0x128c50,_0x2450c0){const _0x5285d1=a128_0x731e,_0x510666=_0x128c50();while(!![]){try{const _0xfbd113=-parseInt(_0x5285d1(0x221))/0x1*(parseInt(_0x5285d1(0x239))/0x2)+-parseInt(_0x5285d1(0x1d9))/0x3*(-parseInt(_0x5285d1(0x1eb))/0x4)+-parseInt(_0x5285d1(0x24e))/0x5+-parseInt(_0x5285d1(0x245))/0x6*(-parseInt(_0x5285d1(0x229))/0x7)+parseInt(_0x5285d1(0x1df))/0x8+-parseInt(_0x5285d1(0x1ff))/0x9*(-parseInt(_0x5285d1(0x218))/0xa)+-parseInt(_0x5285d1(0x209))/0xb*(parseInt(_0x5285d1(0x22a))/0xc);if(_0xfbd113===_0x2450c0)break;else _0x510666['push'](_0x510666['shift']());}catch(_0x4a1d8d){_0x510666['push'](_0x510666['shift']());}}}(a128_0x4620,0x3d115));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a128_0xaafbd4(0x1dd)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require('./utils'),{nestedKeyValue}=require(a128_0xaafbd4(0x1f2)),util=require(a128_0xaafbd4(0x1f5)),constants=require(a128_0xaafbd4(0x220));function a128_0x731e(_0x125386,_0x17167c){const _0x46205d=a128_0x4620();return a128_0x731e=function(_0x731ea4,_0x580f8b){_0x731ea4=_0x731ea4-0x1d8;let _0x4acd04=_0x46205d[_0x731ea4];return _0x4acd04;},a128_0x731e(_0x125386,_0x17167c);}class RequestQueueHandler{static ['instance'];[a128_0xaafbd4(0x1fb)]=0x0;constructor(){const _0x592531=a128_0xaafbd4,_0x2e824d={};_0x2e824d[_0x592531(0x1db)]='2|1|0|5|4|3|6',_0x2e824d['YTOrD']=_0x592531(0x201),_0x2e824d[_0x592531(0x21b)]='LogCreated',_0x2e824d[_0x592531(0x1ed)]=_0x592531(0x1e2),_0x2e824d[_0x592531(0x23e)]='TestRunFinished',_0x2e824d[_0x592531(0x206)]=_0x592531(0x236),_0x2e824d[_0x592531(0x1f0)]=_0x592531(0x225),_0x2e824d[_0x592531(0x24c)]=_0x592531(0x211),_0x2e824d[_0x592531(0x1f1)]=_0x592531(0x248),_0x2e824d[_0x592531(0x223)]='upload-attachments',_0x2e824d[_0x592531(0x1e3)]=_0x592531(0x1e8);const _0x4a64be=_0x2e824d,_0x3a7b1c=_0x4a64be[_0x592531(0x1db)][_0x592531(0x246)]('|');let _0xf825ed=0x0;while(!![]){switch(_0x3a7b1c[_0xf825ed++]){case'0':this[_0x592531(0x1f6)]=_0x4a64be[_0x592531(0x250)];continue;case'1':this['started']=![];continue;case'2':this['queue']=[];continue;case'3':this[_0x592531(0x1fa)]=[_0x4a64be[_0x592531(0x21b)],_0x4a64be[_0x592531(0x1ed)],_0x4a64be['uLKlS'],_0x4a64be[_0x592531(0x206)],_0x4a64be[_0x592531(0x1f0)],_0x4a64be[_0x592531(0x24c)],_0x4a64be[_0x592531(0x1f1)]];continue;case'4':this[_0x592531(0x212)]=_0x4a64be[_0x592531(0x223)];continue;case'5':this['screenshotEventUrl']=_0x4a64be[_0x592531(0x1e3)];continue;case'6':this[_0x592531(0x215)]=null;continue;}break;}}static[a128_0xaafbd4(0x240)](){const _0x5d718f=a128_0xaafbd4;return!RequestQueueHandler[_0x5d718f(0x1ee)]&&(RequestQueueHandler[_0x5d718f(0x1ee)]=new RequestQueueHandler()),RequestQueueHandler['instance'];}[a128_0xaafbd4(0x1fd)]=()=>{!this['started']&&(this['started']=!![],this['startEventBatchPolling']());};[a128_0xaafbd4(0x24d)]=_0x3a4384=>{const _0x4f2cd5=a128_0xaafbd4,_0x470dfe={'dRAVc':function(_0x5f513e,_0x47a44a){return _0x5f513e===_0x47a44a;},'reROt':'TEST_SCREENSHOT','wsJHi':function(_0x30af56,_0x1991fc){return _0x30af56>_0x1991fc;},'tKhCt':function(_0x4f5253,_0x5898e4){return _0x4f5253===_0x5898e4;},'qSOgf':_0x4f2cd5(0x1da),'NeOFq':function(_0x5f2d48,_0x5dd7fe){return _0x5f2d48!==_0x5dd7fe;},'ZaJJm':_0x4f2cd5(0x1e4),'Qtase':function(_0x218570,_0x22eefe){return _0x218570(_0x22eefe);},'LqeNO':_0x4f2cd5(0x203)};if(this[_0x4f2cd5(0x1fa)][_0x4f2cd5(0x20e)](_0x3a4384[_0x4f2cd5(0x23c)])){if(_0x3a4384['logs']&&_0x3a4384['logs'][0x0]&&_0x470dfe[_0x4f2cd5(0x238)](_0x3a4384[_0x4f2cd5(0x1f8)][0x0][_0x4f2cd5(0x1d8)],_0x470dfe[_0x4f2cd5(0x1fe)])){const _0x3163c7={};return _0x3163c7[_0x4f2cd5(0x247)]=!![],_0x3163c7[_0x4f2cd5(0x20c)]=[_0x3a4384],_0x3163c7[_0x4f2cd5(0x204)]=this['screenshotEventUrl'],_0x3163c7;}if(_0x3a4384[_0x4f2cd5(0x1f8)]&&_0x470dfe[_0x4f2cd5(0x230)](_0x3a4384[_0x4f2cd5(0x1f8)][_0x4f2cd5(0x24f)],0x0)&&_0x470dfe['tKhCt'](_0x3a4384[_0x4f2cd5(0x1f8)][0x0]['kind'],_0x470dfe[_0x4f2cd5(0x213)])&&_0x470dfe[_0x4f2cd5(0x244)](_0x3a4384[_0x4f2cd5(0x23c)],_0x470dfe['ZaJJm'])){const _0x297c23={};return _0x297c23[_0x4f2cd5(0x247)]=!![],_0x297c23[_0x4f2cd5(0x20c)]=[_0x3a4384],_0x297c23[_0x4f2cd5(0x204)]=this['uploadAttachmentUrl'],_0x297c23;}this['queue'][_0x4f2cd5(0x20f)](_0x3a4384);let _0x23e496=null;const _0xc5632c=this['shouldProceed']();_0xc5632c&&(_0x470dfe[_0x4f2cd5(0x232)](trace,_0x470dfe[_0x4f2cd5(0x20b)]),_0x23e496=this['queue']['slice'](0x0,BATCH_SIZE),this['queue'][_0x4f2cd5(0x242)](0x0,BATCH_SIZE),this[_0x4f2cd5(0x1ec)]());const _0x5597c1={};return _0x5597c1['shouldProceed']=_0xc5632c,_0x5597c1['proceedWithData']=_0x23e496,_0x5597c1[_0x4f2cd5(0x204)]=this[_0x4f2cd5(0x1f6)],_0x5597c1;}const _0x1bbe4e={};return _0x1bbe4e[_0x4f2cd5(0x247)]=!![],_0x1bbe4e;};[a128_0xaafbd4(0x1ea)]=async()=>{const _0x258ccd=a128_0xaafbd4,_0x491084={'VKdlx':'REMOVING','kgxkx':function(_0xbc8483,_0x312304){return _0xbc8483>_0x312304;},'xEvrz':_0x258ccd(0x21d),'aRpba':function(_0x169e0a,_0x2c1bd1){return _0x169e0a(_0x2c1bd1);}};await this[_0x258ccd(0x243)](),this[_0x258ccd(0x21a)](_0x491084[_0x258ccd(0x233)]);while(_0x491084[_0x258ccd(0x222)](this[_0x258ccd(0x23b)]['length'],0x0)){const _0x4aa996=this[_0x258ccd(0x23b)][_0x258ccd(0x251)](0x0,BATCH_SIZE);this['queue']['splice'](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x258ccd(0x1f6)],_0x491084[_0x258ccd(0x20d)],_0x4aa996);}_0x491084['kgxkx'](this[_0x258ccd(0x1fb)],0x0)&&_0x491084[_0x258ccd(0x205)](debug,_0x258ccd(0x1e5)+this[_0x258ccd(0x1fb)]);};[a128_0xaafbd4(0x1f7)]=async(_0x4ac883,_0x3a620e,_0x350408)=>{const _0x40d8f3=a128_0xaafbd4,_0x3a0c73={'xWBzg':function(_0x3ae227,_0x2775c7){return _0x3ae227(_0x2775c7);},'bJCOp':_0x40d8f3(0x22b),'djRku':function(_0x5cf09d,_0x1240da){return _0x5cf09d(_0x1240da);},'qLjRI':function(_0x25ccab){return _0x25ccab();},'XPXmP':function(_0x1036f2,_0x224fc9,_0x1b689a,_0x27681e,_0x4854b0){return _0x1036f2(_0x224fc9,_0x1b689a,_0x27681e,_0x4854b0);},'egsUP':'POST','mmpcb':function(_0x1e5ea9,_0x3ac67d){return _0x1e5ea9(_0x3ac67d);},'noqMw':function(_0x5765ed,_0x16cb9c){return _0x5765ed-_0x16cb9c;},'ymJHE':function(_0x5456e3,_0x20e178){return _0x5456e3(_0x20e178);},'mcJjh':function(_0x58b46e,_0x53f7ba){return _0x58b46e(_0x53f7ba);},'jayIc':function(_0x178e8c,_0x2b56d0){return _0x178e8c-_0x2b56d0;}};let _0x4518bd='';try{_0x4518bd=_0x350408[_0x40d8f3(0x216)](_0xeea71b=>'\x27'+_0xeea71b[_0x40d8f3(0x23c)]+'\x27:'+(nestedKeyValue(_0xeea71b,[_0x40d8f3(0x226),_0x40d8f3(0x22c)])||nestedKeyValue(_0xeea71b,[_0x40d8f3(0x1e6),_0x40d8f3(0x22c)])))['join'](','),_0x3a0c73[_0x40d8f3(0x224)](debug,'Processing\x20batch\x20events\x20for\x20'+_0x3a620e+_0x40d8f3(0x1f3)+Buffer[_0x40d8f3(0x235)](util[_0x40d8f3(0x24b)]('%j',_0x350408),_0x3a0c73[_0x40d8f3(0x23d)])+'\x20bytes.\x20Events\x20are\x20'+_0x4518bd);}catch(_0x210c0c){_0x3a0c73[_0x40d8f3(0x21f)](debug,_0x40d8f3(0x1dc)+util[_0x40d8f3(0x24b)](_0x210c0c)+'}');}const _0x1b4c25={'headers':_0x3a0c73['qLjRI'](getDefaultHeaders)};try{const _0x29b918=await _0x3a0c73['XPXmP'](nodeRequest,_0x3a0c73[_0x40d8f3(0x1fc)],_0x4ac883,_0x350408,_0x1b4c25);if(_0x29b918['data'][_0x40d8f3(0x234)]){const _0x1e16b8={};_0x1e16b8['message']=_0x29b918[_0x40d8f3(0x21c)][_0x40d8f3(0x234)];throw _0x1e16b8;}else _0x3a0c73[_0x40d8f3(0x237)](debug,_0x3a620e+_0x40d8f3(0x214)+_0x4518bd+_0x40d8f3(0x1e1)+util[_0x40d8f3(0x24b)]('%j',_0x29b918[_0x40d8f3(0x21c)])),this[_0x40d8f3(0x1fb)]=Math[_0x40d8f3(0x23a)](0x0,_0x3a0c73[_0x40d8f3(0x228)](this['pendingUploads'],_0x350408[_0x40d8f3(0x24f)]));}catch(_0xacd2a7){_0xacd2a7[_0x40d8f3(0x24a)]?_0x3a0c73['ymJHE'](debug,_0x40d8f3(0x200)+_0x3a620e+_0x40d8f3(0x1e9)+constants[_0x40d8f3(0x241)]+_0x40d8f3(0x227)+_0xacd2a7[_0x40d8f3(0x24a)][_0x40d8f3(0x1e7)]+'\x20'+_0xacd2a7[_0x40d8f3(0x24a)][_0x40d8f3(0x22f)]+'\x20'+util[_0x40d8f3(0x24b)]('%j',_0xacd2a7['response'])):_0x3a0c73[_0x40d8f3(0x1de)](debug,'EXCEPTION\x20IN\x20'+_0x3a620e+'\x20REQUEST\x20TO\x20'+constants[_0x40d8f3(0x241)]+_0x40d8f3(0x227)+(_0xacd2a7['message']||_0xacd2a7)),this[_0x40d8f3(0x1fb)]=Math[_0x40d8f3(0x23a)](0x0,_0x3a0c73[_0x40d8f3(0x217)](this['pendingUploads'],_0x350408[_0x40d8f3(0x24f)]));}};['startEventBatchPolling']=()=>{const _0x1a625f=a128_0xaafbd4,_0x4353a9={'ACjYI':function(_0x4595ac,_0x2c37d6){return _0x4595ac>_0x2c37d6;},'mPkQE':function(_0xb2ddc9,_0x191ade){return _0xb2ddc9(_0x191ade);},'jttcR':_0x1a625f(0x208),'jguZx':function(_0x750e31,_0x4dd406){return _0x750e31(_0x4dd406);},'MRAsD':function(_0x16df2b,_0x4b1443,_0x516378){return _0x16df2b(_0x4b1443,_0x516378);}};this[_0x1a625f(0x215)]=_0x4353a9['MRAsD'](setInterval,async()=>{const _0x508fb6=_0x1a625f;if(_0x4353a9[_0x508fb6(0x1f4)](this[_0x508fb6(0x23b)][_0x508fb6(0x24f)],0x0)){_0x4353a9[_0x508fb6(0x207)](trace,_0x508fb6(0x219)+this[_0x508fb6(0x23b)][_0x508fb6(0x24f)]);const _0x30639e=this[_0x508fb6(0x23b)][_0x508fb6(0x251)](0x0,BATCH_SIZE);this[_0x508fb6(0x23b)][_0x508fb6(0x242)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x508fb6(0x1f6)],_0x4353a9[_0x508fb6(0x1e0)],_0x30639e),_0x4353a9['jguZx'](trace,_0x508fb6(0x22d)+this[_0x508fb6(0x23b)][_0x508fb6(0x24f)]);}},BATCH_INTERVAL);};['resetEventBatchPolling']=()=>{const _0x1e0b9a=a128_0xaafbd4,_0x340b27={};_0x340b27[_0x1e0b9a(0x249)]=_0x1e0b9a(0x210);const _0x4ef564=_0x340b27;this[_0x1e0b9a(0x21a)](_0x4ef564[_0x1e0b9a(0x249)]),this[_0x1e0b9a(0x252)]();};[a128_0xaafbd4(0x21a)]=_0x3fd817=>{const _0x280ee1=a128_0xaafbd4,_0x21837d={'FrvWA':function(_0x4d7ae7,_0x221332){return _0x4d7ae7(_0x221332);},'EJLNy':function(_0x2b07a7,_0x2ea27b){return _0x2b07a7===_0x2ea27b;},'JLDQg':_0x280ee1(0x23f)};this[_0x280ee1(0x215)]&&(_0x21837d['FrvWA'](clearInterval,this[_0x280ee1(0x215)]),this[_0x280ee1(0x215)]=null,_0x21837d[_0x280ee1(0x22e)](_0x3fd817,_0x21837d['JLDQg'])&&(this['started']=![]));};[a128_0xaafbd4(0x247)]=()=>{const _0x5c6272=a128_0xaafbd4,_0x2c03e8={};_0x2c03e8[_0x5c6272(0x21e)]=function(_0x253293,_0x290f44){return _0x253293>=_0x290f44;};const _0x4398f9=_0x2c03e8;return _0x4398f9[_0x5c6272(0x21e)](this[_0x5c6272(0x23b)][_0x5c6272(0x24f)],BATCH_SIZE);};async[a128_0xaafbd4(0x243)](_0x5bdd99=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x1ab5e5=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x5045cd=a128_0xaafbd4,_0x1f489b={'lYypn':function(_0x2d4823,_0x244829){return _0x2d4823<=_0x244829;},'OzGaS':function(_0x4d8754,_0x4ce48e){return _0x4d8754<=_0x4ce48e;},'jLMKF':function(_0xf25a5c,_0x58d1c3){return _0xf25a5c(_0x58d1c3);},'OCUDP':function(_0x4a6ca0,_0x205a03){return _0x4a6ca0-_0x205a03;}};if(_0x1f489b[_0x5045cd(0x1f9)](this[_0x5045cd(0x1fb)],0x0)||_0x1f489b[_0x5045cd(0x20a)](_0x5bdd99,0x0))return;return await _0x1f489b[_0x5045cd(0x1ef)](sleep,_0x1ab5e5),this[_0x5045cd(0x243)](_0x1f489b[_0x5045cd(0x231)](_0x5bdd99,_0x1ab5e5));}}module[a128_0xaafbd4(0x202)]=RequestQueueHandler;