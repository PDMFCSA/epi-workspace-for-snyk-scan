function a125_0x1932(_0x8404bf,_0x52a01e){const _0x4d6165=a125_0x4d61();return a125_0x1932=function(_0x193253,_0x550ca1){_0x193253=_0x193253-0x1c4;let _0x37960=_0x4d6165[_0x193253];return _0x37960;},a125_0x1932(_0x8404bf,_0x52a01e);}const a125_0x26183e=a125_0x1932;function a125_0x4d61(){const _0x26ab5f=['TEST_SCREENSHOT','GSmKR','JaIGO','shNNm','LogCreated','splice','FeYbF','add','TkdGI','TestRunFinished','pendingUploads','nPEsc','uploadPending','TEST_REPORTING_ANALYTICS','rQbRw','TestRunSkipped','Processing\x20batch\x20events\x20for\x20','GPZyu','fadfb','4eSaYLr','utf8','length','started','api/v1/batch','aBLOt','mFkyq','HookRunFinished','uploadAttachmentUrl','slice','2270750PDEAMW','shutdown','2113912fShDbC','zjIGO','EXCEPTION\x20IN\x20','HjLfw','19862JxATQx','UtVnf','\x20event\x20successful\x20for\x20events\x20','screenshotEventUrl','\x20bytes.\x20Events\x20are\x20','1656955PiIZRI','upload-attachments','proceedWithData','format','Remaining\x20Queue\x20Length\x20-\x20','resetEventBatchPolling','status','WGjBR','join','../helper','HWyuX','30dgSrzO','batchAndPostEvents','Shutdown-Queue','max','Processing\x20events.\x20Queue\x20Length\x20-\x20','ACSTW','proceedWithUrl','shouldProceed','AaTXd','uFhOo','response','logs','\x20--\x20','pcieb','event_type','map','TEST_ATTACHMENT','\x20REQUEST\x20TO\x20','exports','mCcOb','eventUrl','xTokb','ynLew','dAgPp','error','instance','mNLOL','vlkJC','removeEventBatchPolling','2942109erxluF','POST','531543wnWuZS','REMOVING','120qmxRSp','uFbtz','gIkUR','TlDkx','./constants','MkVaP','RESETTING','150899ZPpfbS','start','vtCXo','test_run','queue','pollEventBatchInterval','pKVuY','Interval-Queue','UukGS','data','TestRunStarted','util','startEventBatchPolling','PfVDx','split','kind','MRejg','WPpxO','message','zLrdD','NEkfv','QqREe','.\x20Request\x20Size\x20-\x20'];a125_0x4d61=function(){return _0x26ab5f;};return a125_0x4d61();}(function(_0x51df10,_0x50d328){const _0x5a3c99=a125_0x1932,_0x56c30f=_0x51df10();while(!![]){try{const _0x80020a=parseInt(_0x5a3c99(0x1c5))/0x1+-parseInt(_0x5a3c99(0x208))/0x2*(parseInt(_0x5a3c99(0x1c7))/0x3)+-parseInt(_0x5a3c99(0x1f8))/0x4*(-parseInt(_0x5a3c99(0x20d))/0x5)+-parseInt(_0x5a3c99(0x218))/0x6*(-parseInt(_0x5a3c99(0x1ce))/0x7)+parseInt(_0x5a3c99(0x204))/0x8+-parseInt(_0x5a3c99(0x235))/0x9+-parseInt(_0x5a3c99(0x202))/0xa;if(_0x80020a===_0x50d328)break;else _0x56c30f['push'](_0x56c30f['shift']());}catch(_0x18074f){_0x56c30f['push'](_0x56c30f['shift']());}}}(a125_0x4d61,0x4545e));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a125_0x26183e(0x1cb)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require('./utils'),{nestedKeyValue}=require(a125_0x26183e(0x216)),util=require(a125_0x26183e(0x1d9)),constants=require('../../bin/utils/constants');class RequestQueueHandler{static [a125_0x26183e(0x231)];[a125_0x26183e(0x1ef)]=0x0;constructor(){const _0x1ce232=a125_0x26183e,_0x5c9bc7={};_0x5c9bc7[_0x1ce232(0x1e6)]='5|0|2|4|3|1|6',_0x5c9bc7[_0x1ce232(0x1db)]=_0x1ce232(0x1e9),_0x5c9bc7[_0x1ce232(0x1e3)]='CBTSessionCreated',_0x5c9bc7['bigvS']=_0x1ce232(0x1ee),_0x5c9bc7[_0x1ce232(0x1f3)]=_0x1ce232(0x1f4),_0x5c9bc7[_0x1ce232(0x220)]=_0x1ce232(0x1ff),_0x5c9bc7['HWyuX']=_0x1ce232(0x1d8),_0x5c9bc7[_0x1ce232(0x22e)]='HookRunStarted',_0x5c9bc7[_0x1ce232(0x1f0)]=_0x1ce232(0x1fc),_0x5c9bc7[_0x1ce232(0x1f6)]=_0x1ce232(0x20e),_0x5c9bc7[_0x1ce232(0x1fe)]='api/v1/screenshots';const _0x8d0a45=_0x5c9bc7,_0x1401d2=_0x8d0a45[_0x1ce232(0x1e6)][_0x1ce232(0x1dc)]('|');let _0x41dac1=0x0;while(!![]){switch(_0x1401d2[_0x41dac1++]){case'0':this[_0x1ce232(0x1fb)]=![];continue;case'1':this['BATCH_EVENT_TYPES']=[_0x8d0a45[_0x1ce232(0x1db)],_0x8d0a45[_0x1ce232(0x1e3)],_0x8d0a45['bigvS'],_0x8d0a45['rQbRw'],_0x8d0a45['AaTXd'],_0x8d0a45[_0x1ce232(0x217)],_0x8d0a45[_0x1ce232(0x22e)]];continue;case'2':this[_0x1ce232(0x22c)]=_0x8d0a45[_0x1ce232(0x1f0)];continue;case'3':this[_0x1ce232(0x200)]=_0x8d0a45[_0x1ce232(0x1f6)];continue;case'4':this[_0x1ce232(0x20b)]=_0x8d0a45[_0x1ce232(0x1fe)];continue;case'5':this[_0x1ce232(0x1d2)]=[];continue;case'6':this['pollEventBatchInterval']=null;continue;}break;}}static['getInstance'](){const _0x32db49=a125_0x26183e;return!RequestQueueHandler[_0x32db49(0x231)]&&(RequestQueueHandler[_0x32db49(0x231)]=new RequestQueueHandler()),RequestQueueHandler['instance'];}[a125_0x26183e(0x1cf)]=()=>{const _0x4a398e=a125_0x26183e;!this[_0x4a398e(0x1fb)]&&(this[_0x4a398e(0x1fb)]=!![],this[_0x4a398e(0x1da)]());};[a125_0x26183e(0x1ec)]=_0x29dc27=>{const _0x361acc=a125_0x26183e,_0x36c49b={'uFbtz':function(_0x4b97c5,_0x59b05c){return _0x4b97c5===_0x59b05c;},'UukGS':_0x361acc(0x1e5),'WVdiO':function(_0x49a729,_0x1a9141){return _0x49a729>_0x1a9141;},'UtVnf':_0x361acc(0x228),'pcieb':function(_0xaf9f1a,_0x1e6383){return _0xaf9f1a!==_0x1e6383;},'gIkUR':_0x361acc(0x1ee),'mNLOL':function(_0xcc5c5c,_0x4b2e12){return _0xcc5c5c(_0x4b2e12);},'jtvcO':'Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..'};if(this['BATCH_EVENT_TYPES']['includes'](_0x29dc27[_0x361acc(0x226)])){if(_0x29dc27['logs']&&_0x29dc27[_0x361acc(0x223)][0x0]&&_0x36c49b[_0x361acc(0x1c8)](_0x29dc27[_0x361acc(0x223)][0x0][_0x361acc(0x1dd)],_0x36c49b[_0x361acc(0x1d6)])){const _0x388c15={};return _0x388c15[_0x361acc(0x21f)]=!![],_0x388c15[_0x361acc(0x20f)]=[_0x29dc27],_0x388c15['proceedWithUrl']=this['screenshotEventUrl'],_0x388c15;}if(_0x29dc27[_0x361acc(0x223)]&&_0x36c49b['WVdiO'](_0x29dc27[_0x361acc(0x223)][_0x361acc(0x1fa)],0x0)&&_0x36c49b[_0x361acc(0x1c8)](_0x29dc27['logs'][0x0]['kind'],_0x36c49b[_0x361acc(0x209)])&&_0x36c49b[_0x361acc(0x225)](_0x29dc27[_0x361acc(0x226)],_0x36c49b[_0x361acc(0x1c9)])){const _0x2d8fa0={};return _0x2d8fa0['shouldProceed']=!![],_0x2d8fa0[_0x361acc(0x20f)]=[_0x29dc27],_0x2d8fa0['proceedWithUrl']=this[_0x361acc(0x200)],_0x2d8fa0;}this[_0x361acc(0x1d2)]['push'](_0x29dc27);let _0x1ae23e=null;const _0x4debb7=this[_0x361acc(0x21f)]();_0x4debb7&&(_0x36c49b[_0x361acc(0x232)](trace,_0x36c49b['jtvcO']),_0x1ae23e=this[_0x361acc(0x1d2)][_0x361acc(0x201)](0x0,BATCH_SIZE),this[_0x361acc(0x1d2)][_0x361acc(0x1ea)](0x0,BATCH_SIZE),this[_0x361acc(0x212)]());const _0x5dcc5d={};return _0x5dcc5d[_0x361acc(0x21f)]=_0x4debb7,_0x5dcc5d[_0x361acc(0x20f)]=_0x1ae23e,_0x5dcc5d[_0x361acc(0x21e)]=this['eventUrl'],_0x5dcc5d;}const _0x3861f7={};return _0x3861f7[_0x361acc(0x21f)]=!![],_0x3861f7;};[a125_0x26183e(0x203)]=async()=>{const _0x349ae4=a125_0x26183e,_0x42ca78={'uEfuW':_0x349ae4(0x1c6),'ACSTW':function(_0x4bb632,_0x2d9583){return _0x4bb632>_0x2d9583;},'TlDkx':_0x349ae4(0x21a),'MkVaP':function(_0x58fad0,_0xbd395){return _0x58fad0>_0xbd395;},'MRejg':function(_0x1db60c,_0x3ab3df){return _0x1db60c(_0x3ab3df);}};await this[_0x349ae4(0x1f1)](),this[_0x349ae4(0x234)](_0x42ca78['uEfuW']);while(_0x42ca78[_0x349ae4(0x21d)](this[_0x349ae4(0x1d2)][_0x349ae4(0x1fa)],0x0)){const _0x288a4e=this[_0x349ae4(0x1d2)][_0x349ae4(0x201)](0x0,BATCH_SIZE);this[_0x349ae4(0x1d2)][_0x349ae4(0x1ea)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x349ae4(0x22c)],_0x42ca78[_0x349ae4(0x1ca)],_0x288a4e);}_0x42ca78[_0x349ae4(0x1cc)](this[_0x349ae4(0x1ef)],0x0)&&_0x42ca78[_0x349ae4(0x1de)](debug,'Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20'+this[_0x349ae4(0x1ef)]);};[a125_0x26183e(0x219)]=async(_0x75e17f,_0x4ced6b,_0x298e6e)=>{const _0x303d68=a125_0x26183e,_0x5b8e81={'fadfb':function(_0xf55cd,_0x395b69){return _0xf55cd(_0x395b69);},'zjIGO':_0x303d68(0x1f9),'WGjBR':function(_0x55c43d,_0x43418a){return _0x55c43d(_0x43418a);},'WPpxO':function(_0x4c7699){return _0x4c7699();},'aBLOt':function(_0x497da3,_0x391603,_0x298a49,_0x5d0926,_0x3a2a34){return _0x497da3(_0x391603,_0x298a49,_0x5d0926,_0x3a2a34);},'vtCXo':_0x303d68(0x1c4),'pKVuY':function(_0x4a562b,_0x3c31b2){return _0x4a562b(_0x3c31b2);},'JaIGO':function(_0x2da549,_0x4f4ab0){return _0x2da549-_0x4f4ab0;},'uFhOo':function(_0x18474b,_0x20d488){return _0x18474b(_0x20d488);}};let _0x462677='';try{_0x462677=_0x298e6e[_0x303d68(0x227)](_0x5b0a38=>'\x27'+_0x5b0a38[_0x303d68(0x226)]+'\x27:'+(nestedKeyValue(_0x5b0a38,[_0x303d68(0x1d1),'uuid'])||nestedKeyValue(_0x5b0a38,['hook_run','uuid'])))[_0x303d68(0x215)](','),_0x5b8e81[_0x303d68(0x1f7)](debug,_0x303d68(0x1f5)+_0x4ced6b+_0x303d68(0x1e4)+Buffer['byteLength'](util[_0x303d68(0x210)]('%j',_0x298e6e),_0x5b8e81[_0x303d68(0x205)])+_0x303d68(0x20c)+_0x462677);}catch(_0x1e119b){_0x5b8e81[_0x303d68(0x214)](debug,'Exception\x20in\x20logging\x20batch\x20events\x20--\x20'+util[_0x303d68(0x210)](_0x1e119b)+'}');}const _0x668988={'headers':_0x5b8e81[_0x303d68(0x1df)](getDefaultHeaders)};try{const _0x3d7d07=await _0x5b8e81[_0x303d68(0x1fd)](nodeRequest,_0x5b8e81[_0x303d68(0x1d0)],_0x75e17f,_0x298e6e,_0x668988);if(_0x3d7d07[_0x303d68(0x1d7)]['error']){const _0x139a70={};_0x139a70[_0x303d68(0x1e0)]=_0x3d7d07['data'][_0x303d68(0x230)];throw _0x139a70;}else _0x5b8e81[_0x303d68(0x1d4)](debug,_0x4ced6b+_0x303d68(0x20a)+_0x462677+_0x303d68(0x224)+util['format']('%j',_0x3d7d07[_0x303d68(0x1d7)])),this[_0x303d68(0x1ef)]=Math[_0x303d68(0x21b)](0x0,_0x5b8e81[_0x303d68(0x1e7)](this['pendingUploads'],_0x298e6e[_0x303d68(0x1fa)]));}catch(_0x376eb2){_0x376eb2[_0x303d68(0x222)]?_0x5b8e81[_0x303d68(0x1f7)](debug,_0x303d68(0x206)+_0x4ced6b+_0x303d68(0x229)+constants[_0x303d68(0x1f2)]+'\x20:\x20'+_0x376eb2[_0x303d68(0x222)][_0x303d68(0x213)]+'\x20'+_0x376eb2[_0x303d68(0x222)]['statusText']+'\x20'+util['format']('%j',_0x376eb2['response'])):_0x5b8e81[_0x303d68(0x221)](debug,_0x303d68(0x206)+_0x4ced6b+_0x303d68(0x229)+constants[_0x303d68(0x1f2)]+'\x20:\x20'+(_0x376eb2[_0x303d68(0x1e0)]||_0x376eb2)),this[_0x303d68(0x1ef)]=Math[_0x303d68(0x21b)](0x0,_0x5b8e81['JaIGO'](this[_0x303d68(0x1ef)],_0x298e6e[_0x303d68(0x1fa)]));}};[a125_0x26183e(0x1da)]=()=>{const _0x516f2b=a125_0x26183e,_0x2d1474={'TkdGI':function(_0x377fbf,_0x231e74){return _0x377fbf>_0x231e74;},'zLrdD':function(_0x559024,_0x1b3725){return _0x559024(_0x1b3725);},'HjLfw':_0x516f2b(0x1d5),'mCcOb':function(_0x385e08,_0x229b24,_0x32ea58){return _0x385e08(_0x229b24,_0x32ea58);}};this[_0x516f2b(0x1d3)]=_0x2d1474[_0x516f2b(0x22b)](setInterval,async()=>{const _0xadbc94=_0x516f2b;if(_0x2d1474[_0xadbc94(0x1ed)](this['queue']['length'],0x0)){_0x2d1474['zLrdD'](trace,_0xadbc94(0x21c)+this[_0xadbc94(0x1d2)][_0xadbc94(0x1fa)]);const _0x21afd5=this[_0xadbc94(0x1d2)][_0xadbc94(0x201)](0x0,BATCH_SIZE);this['queue'][_0xadbc94(0x1ea)](0x0,BATCH_SIZE),await this[_0xadbc94(0x219)](this['eventUrl'],_0x2d1474[_0xadbc94(0x207)],_0x21afd5),_0x2d1474[_0xadbc94(0x1e1)](trace,_0xadbc94(0x211)+this[_0xadbc94(0x1d2)][_0xadbc94(0x1fa)]);}},BATCH_INTERVAL);};[a125_0x26183e(0x212)]=()=>{const _0x3cc2f1=a125_0x26183e,_0x3cd87d={};_0x3cd87d[_0x3cc2f1(0x233)]=_0x3cc2f1(0x1cd);const _0x1a1bd8=_0x3cd87d;this[_0x3cc2f1(0x234)](_0x1a1bd8[_0x3cc2f1(0x233)]),this[_0x3cc2f1(0x1da)]();};[a125_0x26183e(0x234)]=_0x4faf1c=>{const _0xb168a=a125_0x26183e,_0x40433e={'ITIMQ':function(_0x122ee2,_0x500e55){return _0x122ee2(_0x500e55);},'shNNm':function(_0x291a76,_0x3f8a37){return _0x291a76===_0x3f8a37;},'xTokb':_0xb168a(0x1c6)};this['pollEventBatchInterval']&&(_0x40433e['ITIMQ'](clearInterval,this[_0xb168a(0x1d3)]),this['pollEventBatchInterval']=null,_0x40433e[_0xb168a(0x1e8)](_0x4faf1c,_0x40433e[_0xb168a(0x22d)])&&(this[_0xb168a(0x1fb)]=![]));};[a125_0x26183e(0x21f)]=()=>{const _0x2aa970=a125_0x26183e,_0x4be01e={};_0x4be01e[_0x2aa970(0x22f)]=function(_0xd2e70e,_0x48fddf){return _0xd2e70e>=_0x48fddf;};const _0x5b80e8=_0x4be01e;return _0x5b80e8[_0x2aa970(0x22f)](this[_0x2aa970(0x1d2)]['length'],BATCH_SIZE);};async[a125_0x26183e(0x1f1)](_0x23c063=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x5dda7b=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0xdff09c=a125_0x26183e,_0x20b21d={'FeYbF':function(_0x196a9f,_0x31ad1a){return _0x196a9f<=_0x31ad1a;},'NEkfv':function(_0x2b939f,_0x47d4f6){return _0x2b939f(_0x47d4f6);},'orXHV':function(_0x5eb498,_0x4b791b){return _0x5eb498-_0x4b791b;}};if(_0x20b21d[_0xdff09c(0x1eb)](this[_0xdff09c(0x1ef)],0x0)||_0x20b21d['FeYbF'](_0x23c063,0x0))return;return await _0x20b21d[_0xdff09c(0x1e2)](sleep,_0x5dda7b),this[_0xdff09c(0x1f1)](_0x20b21d['orXHV'](_0x23c063,_0x5dda7b));}}module[a125_0x26183e(0x22a)]=RequestQueueHandler;