const a85_0xe24e9b=a85_0x3eb8;(function(_0x52dfd7,_0x2c0a2b){const _0x1ea0b2=a85_0x3eb8,_0x299049=_0x52dfd7();while(!![]){try{const _0x364607=parseInt(_0x1ea0b2(0xe0))/0x1*(-parseInt(_0x1ea0b2(0x11b))/0x2)+-parseInt(_0x1ea0b2(0xd0))/0x3*(parseInt(_0x1ea0b2(0xe7))/0x4)+-parseInt(_0x1ea0b2(0x111))/0x5+parseInt(_0x1ea0b2(0x11e))/0x6+parseInt(_0x1ea0b2(0xfe))/0x7*(parseInt(_0x1ea0b2(0xcd))/0x8)+parseInt(_0x1ea0b2(0x118))/0x9*(-parseInt(_0x1ea0b2(0x132))/0xa)+parseInt(_0x1ea0b2(0x117))/0xb;if(_0x364607===_0x2c0a2b)break;else _0x299049['push'](_0x299049['shift']());}catch(_0x18ffd1){_0x299049['push'](_0x299049['shift']());}}}(a85_0x42fd,0x837b1));function a85_0x3eb8(_0x577dfd,_0x5bb97c){const _0x42fd22=a85_0x42fd();return a85_0x3eb8=function(_0x3eb850,_0x3a779b){_0x3eb850=_0x3eb850-0xc3;let _0x493fc7=_0x42fd22[_0x3eb850];return _0x493fc7;},a85_0x3eb8(_0x577dfd,_0x5bb97c);}function a85_0x42fd(){const _0x10303d=['632nYLBra','HookRunStarted','proceedWithUrl','1308DIYQlX','BTosp','eventUrl','FNNWX','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','Processing\x20batch\x20events\x20for\x20','TestRunStarted','lxtRk','pendingUploads','util','anTvo','utf8','GPqfa','nfgXp','data','./utils','1000585hZiZLp','max','\x20event\x20successful\x20for\x20events\x20','ytNpp','logs','\x20bytes.\x20Events\x20are\x20','hook_run','8132bkCgEa','PxgwX','format','weJHH','queue','NFyKU','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','Jflxb','dIKGo','uuid','fCeHG','Ywnvx','YkuJe','JaoLr','join','shutdown','WeLUI','response','mfFdg','uploadPending','startEventBatchPolling','Interval-Queue','Remaining\x20Queue\x20Length\x20-\x20','44457bTVJmT','tdiVx','tVZVI','IkQIC','instance','api/v1/batch','.\x20Request\x20Size\x20-\x20','vwneH','Processing\x20events.\x20Queue\x20Length\x20-\x20','madqg','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','CxcCw','length','screenshotEventUrl','tDefy','pollEventBatchInterval','TestRunFinished','Shutdown-Queue','split','1406830JPvalU','status','TestRunSkipped','test_run','PFzCe','batchAndPostEvents','21842755PUIrRB','902367mvEhKs','VYaHg','started','2DGJJks','map','resetEventBatchPolling','1918278tGpBma','lMOtQ','\x20--\x20','./constants','kind','POST','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','jyALR','slice','api/v1/screenshots','olmsf','BLKTi','vnZPv','REMOVING','YYemX','error','exports','removeEventBatchPolling','CBTSessionCreated','BATCH_EVENT_TYPES','10rPCBxn','proceedWithData','add','qgljX','start','includes','splice','shouldProceed','getInstance','VJQRj','event_type'];a85_0x42fd=function(){return _0x10303d;};return a85_0x42fd();}const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a85_0xe24e9b(0x121)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a85_0xe24e9b(0xdf)),{nestedKeyValue}=require('../helper'),util=require(a85_0xe24e9b(0xd9));class RequestQueueHandler{static [a85_0xe24e9b(0x102)];[a85_0xe24e9b(0xd8)]=0x0;constructor(){const _0x56da37=a85_0xe24e9b,_0x506d05={};_0x506d05[_0x56da37(0x128)]='1|3|5|0|2|4',_0x506d05[_0x56da37(0x129)]=_0x56da37(0x127),_0x506d05[_0x56da37(0x12a)]='LogCreated',_0x506d05[_0x56da37(0x101)]=_0x56da37(0x130),_0x506d05[_0x56da37(0xe3)]=_0x56da37(0x10e),_0x506d05[_0x56da37(0x12c)]=_0x56da37(0x113),_0x506d05[_0x56da37(0x125)]='HookRunFinished',_0x506d05[_0x56da37(0xe8)]=_0x56da37(0xd6),_0x506d05[_0x56da37(0xdc)]=_0x56da37(0xce),_0x506d05['Yxrft']=_0x56da37(0x103);const _0x3ff955=_0x506d05,_0x26b639=_0x3ff955[_0x56da37(0x128)][_0x56da37(0x110)]('|');let _0x1c6eaa=0x0;while(!![]){switch(_0x26b639[_0x1c6eaa++]){case'0':this['screenshotEventUrl']=_0x3ff955[_0x56da37(0x129)];continue;case'1':this[_0x56da37(0xeb)]=[];continue;case'2':this[_0x56da37(0x131)]=[_0x3ff955[_0x56da37(0x12a)],_0x3ff955[_0x56da37(0x101)],_0x3ff955[_0x56da37(0xe3)],_0x3ff955[_0x56da37(0x12c)],_0x3ff955[_0x56da37(0x125)],_0x3ff955[_0x56da37(0xe8)],_0x3ff955[_0x56da37(0xdc)]];continue;case'3':this['started']=![];continue;case'4':this[_0x56da37(0x10d)]=null;continue;case'5':this[_0x56da37(0xd2)]=_0x3ff955['Yxrft'];continue;}break;}}static[a85_0xe24e9b(0xca)](){const _0x3f5978=a85_0xe24e9b;return!RequestQueueHandler['instance']&&(RequestQueueHandler[_0x3f5978(0x102)]=new RequestQueueHandler()),RequestQueueHandler[_0x3f5978(0x102)];}[a85_0xe24e9b(0xc6)]=()=>{!this['started']&&(this['started']=!![],this['startEventBatchPolling']());};[a85_0xe24e9b(0xc4)]=_0x4a2377=>{const _0x17da4=a85_0xe24e9b,_0x2af98d={'anTvo':function(_0x4f43bf,_0x140060){return _0x4f43bf===_0x140060;},'fCeHG':'TEST_SCREENSHOT','BTosp':function(_0x1abaef,_0x5de2a1){return _0x1abaef(_0x5de2a1);},'dIKGo':_0x17da4(0xd4)};if(this['BATCH_EVENT_TYPES'][_0x17da4(0xc7)](_0x4a2377[_0x17da4(0xcc)])){if(_0x4a2377[_0x17da4(0xe4)]&&_0x4a2377[_0x17da4(0xe4)][0x0]&&_0x2af98d[_0x17da4(0xda)](_0x4a2377[_0x17da4(0xe4)][0x0][_0x17da4(0x122)],_0x2af98d[_0x17da4(0xf1)])){const _0x58341b={};return _0x58341b[_0x17da4(0xc9)]=!![],_0x58341b['proceedWithData']=[_0x4a2377],_0x58341b['proceedWithUrl']=this[_0x17da4(0x10b)],_0x58341b;}this[_0x17da4(0xeb)]['push'](_0x4a2377);let _0x42b2b5=null;const _0x1afbe9=this[_0x17da4(0xc9)]();_0x1afbe9&&(_0x2af98d[_0x17da4(0xd1)](trace,_0x2af98d[_0x17da4(0xef)]),_0x42b2b5=this['queue'][_0x17da4(0x126)](0x0,BATCH_SIZE),this['queue'][_0x17da4(0xc8)](0x0,BATCH_SIZE),this['resetEventBatchPolling']());const _0x5d7b9b={};return _0x5d7b9b[_0x17da4(0xc9)]=_0x1afbe9,_0x5d7b9b[_0x17da4(0xc3)]=_0x42b2b5,_0x5d7b9b[_0x17da4(0xcf)]=this[_0x17da4(0xd2)],_0x5d7b9b;}const _0x5628e5={};return _0x5628e5[_0x17da4(0xc9)]=!![],_0x5628e5;};[a85_0xe24e9b(0xf6)]=async()=>{const _0x5b101b=a85_0xe24e9b,_0x1da34c={'KOfRr':_0x5b101b(0x12b),'CxcCw':function(_0x5468a6,_0x35d817){return _0x5468a6>_0x35d817;},'tdiVx':_0x5b101b(0x10f),'YkuJe':function(_0x432d62,_0x1be90c){return _0x432d62(_0x1be90c);}};await this[_0x5b101b(0xfa)](),this[_0x5b101b(0x12f)](_0x1da34c['KOfRr']);while(_0x1da34c[_0x5b101b(0x109)](this[_0x5b101b(0xeb)][_0x5b101b(0x10a)],0x0)){const _0x7048fb=this[_0x5b101b(0xeb)][_0x5b101b(0x126)](0x0,BATCH_SIZE);this[_0x5b101b(0xeb)][_0x5b101b(0xc8)](0x0,BATCH_SIZE),await this[_0x5b101b(0x116)](this[_0x5b101b(0xd2)],_0x1da34c[_0x5b101b(0xff)],_0x7048fb);}_0x1da34c[_0x5b101b(0x109)](this['pendingUploads'],0x0)&&_0x1da34c[_0x5b101b(0xf3)](debug,_0x5b101b(0x108)+this[_0x5b101b(0xd8)]);};[a85_0xe24e9b(0x116)]=async(_0x49ce42,_0x4a471f,_0x2c8eed)=>{const _0x1fd1dc=a85_0xe24e9b,_0x559431={'CHmzQ':function(_0x12f4c7,_0x57906a){return _0x12f4c7(_0x57906a);},'tDefy':_0x1fd1dc(0xdb),'lxtRk':function(_0x41a2c4,_0x15db4d){return _0x41a2c4(_0x15db4d);},'VYaHg':function(_0x11ca25){return _0x11ca25();},'NFyKU':function(_0x86a1a8,_0x5b556f,_0x569ddf,_0x439397,_0x4b48d2){return _0x86a1a8(_0x5b556f,_0x569ddf,_0x439397,_0x4b48d2);},'tVZVI':_0x1fd1dc(0x123),'madqg':function(_0x138b11,_0x408421){return _0x138b11(_0x408421);},'JaoLr':function(_0x9c59b5,_0x2ef4e2){return _0x9c59b5-_0x2ef4e2;},'FNNWX':function(_0x1d46fc,_0xe803aa){return _0x1d46fc(_0xe803aa);},'PFzCe':function(_0x55fcf6,_0x30d06a){return _0x55fcf6-_0x30d06a;}};let _0x4ee1d0='';try{_0x4ee1d0=_0x2c8eed[_0x1fd1dc(0x11c)](_0x2cafd8=>'\x27'+_0x2cafd8['event_type']+'\x27:'+(nestedKeyValue(_0x2cafd8,[_0x1fd1dc(0x114),_0x1fd1dc(0xf0)])||nestedKeyValue(_0x2cafd8,[_0x1fd1dc(0xe6),'uuid'])))[_0x1fd1dc(0xf5)](','),_0x559431['CHmzQ'](debug,_0x1fd1dc(0xd5)+_0x4a471f+_0x1fd1dc(0x104)+Buffer['byteLength'](util['format']('%j',_0x2c8eed),_0x559431[_0x1fd1dc(0x10c)])+_0x1fd1dc(0xe5)+_0x4ee1d0);}catch(_0x4ee0f5){_0x559431[_0x1fd1dc(0xd7)](debug,_0x1fd1dc(0x124)+util[_0x1fd1dc(0xe9)](_0x4ee0f5)+'}');}const _0x119cf7={'headers':_0x559431[_0x1fd1dc(0x119)](getDefaultHeaders)};try{const _0x910e21=await _0x559431[_0x1fd1dc(0xec)](nodeRequest,_0x559431[_0x1fd1dc(0x100)],_0x49ce42,_0x2c8eed,_0x119cf7);if(_0x910e21['data']['error']){const _0x393726={};_0x393726['message']=_0x910e21[_0x1fd1dc(0xde)][_0x1fd1dc(0x12d)];throw _0x393726;}else _0x559431[_0x1fd1dc(0x107)](debug,_0x4a471f+_0x1fd1dc(0xe2)+_0x4ee1d0+_0x1fd1dc(0x120)+util['format']('%j',_0x910e21['data'])),this[_0x1fd1dc(0xd8)]=Math[_0x1fd1dc(0xe1)](0x0,_0x559431[_0x1fd1dc(0xf4)](this[_0x1fd1dc(0xd8)],_0x2c8eed[_0x1fd1dc(0x10a)]));}catch(_0x37fafe){_0x37fafe[_0x1fd1dc(0xf8)]?_0x559431[_0x1fd1dc(0xd3)](debug,'EXCEPTION\x20IN\x20'+_0x4a471f+_0x1fd1dc(0xed)+_0x37fafe[_0x1fd1dc(0xf8)][_0x1fd1dc(0x112)]+'\x20'+_0x37fafe[_0x1fd1dc(0xf8)]['statusText']+'\x20'+util[_0x1fd1dc(0xe9)]('%j',_0x37fafe['response'])):_0x559431[_0x1fd1dc(0xd3)](debug,'EXCEPTION\x20IN\x20'+_0x4a471f+'\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20'+(_0x37fafe['message']||_0x37fafe)),this[_0x1fd1dc(0xd8)]=Math[_0x1fd1dc(0xe1)](0x0,_0x559431[_0x1fd1dc(0x115)](this[_0x1fd1dc(0xd8)],_0x2c8eed['length']));}};['startEventBatchPolling']=()=>{const _0x569ecb=a85_0xe24e9b,_0x13cf54={'LwzWN':function(_0xa8ff84,_0x22de3b){return _0xa8ff84>_0x22de3b;},'weJHH':function(_0x5db62b,_0x1a6396){return _0x5db62b(_0x1a6396);},'VJQRj':_0x569ecb(0xfc),'Jflxb':function(_0x1f3d55,_0x29f5a1){return _0x1f3d55(_0x29f5a1);},'VkrkE':function(_0x1cb187,_0x34e836,_0x7fbef1){return _0x1cb187(_0x34e836,_0x7fbef1);}};this[_0x569ecb(0x10d)]=_0x13cf54['VkrkE'](setInterval,async()=>{const _0x2c0a6e=_0x569ecb;if(_0x13cf54['LwzWN'](this[_0x2c0a6e(0xeb)][_0x2c0a6e(0x10a)],0x0)){_0x13cf54[_0x2c0a6e(0xea)](trace,_0x2c0a6e(0x106)+this[_0x2c0a6e(0xeb)][_0x2c0a6e(0x10a)]);const _0x5428f5=this[_0x2c0a6e(0xeb)]['slice'](0x0,BATCH_SIZE);this[_0x2c0a6e(0xeb)][_0x2c0a6e(0xc8)](0x0,BATCH_SIZE),await this[_0x2c0a6e(0x116)](this[_0x2c0a6e(0xd2)],_0x13cf54[_0x2c0a6e(0xcb)],_0x5428f5),_0x13cf54[_0x2c0a6e(0xee)](trace,_0x2c0a6e(0xfd)+this[_0x2c0a6e(0xeb)][_0x2c0a6e(0x10a)]);}},BATCH_INTERVAL);};[a85_0xe24e9b(0x11d)]=()=>{const _0x43d9fa=a85_0xe24e9b,_0x2d51ab={};_0x2d51ab[_0x43d9fa(0xdd)]='RESETTING';const _0x572981=_0x2d51ab;this[_0x43d9fa(0x12f)](_0x572981[_0x43d9fa(0xdd)]),this[_0x43d9fa(0xfb)]();};[a85_0xe24e9b(0x12f)]=_0x73b075=>{const _0x1d1125=a85_0xe24e9b,_0x373b70={'WeLUI':function(_0x8beaf7,_0xcf3247){return _0x8beaf7(_0xcf3247);},'vwneH':function(_0x236261,_0x184e73){return _0x236261===_0x184e73;},'Ywnvx':_0x1d1125(0x12b)};this[_0x1d1125(0x10d)]&&(_0x373b70[_0x1d1125(0xf7)](clearInterval,this['pollEventBatchInterval']),this[_0x1d1125(0x10d)]=null,_0x373b70[_0x1d1125(0x105)](_0x73b075,_0x373b70[_0x1d1125(0xf2)])&&(this[_0x1d1125(0x11a)]=![]));};[a85_0xe24e9b(0xc9)]=()=>{const _0xcbc847=a85_0xe24e9b,_0xd1c845={};_0xd1c845[_0xcbc847(0xf9)]=function(_0x23a31b,_0x461743){return _0x23a31b>=_0x461743;};const _0x499753=_0xd1c845;return _0x499753[_0xcbc847(0xf9)](this[_0xcbc847(0xeb)][_0xcbc847(0x10a)],BATCH_SIZE);};async[a85_0xe24e9b(0xfa)](_0xf56fed=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x32135f=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x232c13=a85_0xe24e9b,_0x14f701={'qgljX':function(_0x11fb0b,_0x1434e2){return _0x11fb0b<=_0x1434e2;},'smIkp':function(_0xad827f,_0x355e98){return _0xad827f<=_0x355e98;},'lMOtQ':function(_0x4784c,_0x54aa6b){return _0x4784c(_0x54aa6b);},'tUQIU':function(_0x3edf31,_0x5dc746){return _0x3edf31-_0x5dc746;}};if(_0x14f701[_0x232c13(0xc5)](this['pendingUploads'],0x0)||_0x14f701['smIkp'](_0xf56fed,0x0))return;return await _0x14f701[_0x232c13(0x11f)](sleep,_0x32135f),this['uploadPending'](_0x14f701['tUQIU'](_0xf56fed,_0x32135f));}}module[a85_0xe24e9b(0x12e)]=RequestQueueHandler;