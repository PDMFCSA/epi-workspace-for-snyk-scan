const a123_0x352b78=a123_0x1d56;(function(_0x110217,_0x7ba677){const _0x183e56=a123_0x1d56,_0x15df70=_0x110217();while(!![]){try{const _0x5be8f9=-parseInt(_0x183e56(0xe2))/0x1*(parseInt(_0x183e56(0xeb))/0x2)+-parseInt(_0x183e56(0xdf))/0x3+-parseInt(_0x183e56(0x11b))/0x4+-parseInt(_0x183e56(0xb5))/0x5+-parseInt(_0x183e56(0x115))/0x6*(parseInt(_0x183e56(0xe1))/0x7)+parseInt(_0x183e56(0x119))/0x8+-parseInt(_0x183e56(0xa8))/0x9*(-parseInt(_0x183e56(0xbb))/0xa);if(_0x5be8f9===_0x7ba677)break;else _0x15df70['push'](_0x15df70['shift']());}catch(_0x24934f){_0x15df70['push'](_0x15df70['shift']());}}}(a123_0x25cb,0x28e65));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require('./constants'),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a123_0x352b78(0xc8)),{nestedKeyValue}=require(a123_0x352b78(0xb4)),util=require(a123_0x352b78(0xac)),constants=require(a123_0x352b78(0xb0));class RequestQueueHandler{static [a123_0x352b78(0x10f)];['pendingUploads']=0x0;constructor(){const _0x3ffefc=a123_0x352b78,_0x5df6e9={};_0x5df6e9[_0x3ffefc(0xe6)]=_0x3ffefc(0xa6),_0x5df6e9[_0x3ffefc(0x117)]=_0x3ffefc(0xee),_0x5df6e9[_0x3ffefc(0xdb)]='LogCreated',_0x5df6e9['ptvoe']=_0x3ffefc(0xd9),_0x5df6e9[_0x3ffefc(0x101)]='TestRunFinished',_0x5df6e9['mkote']=_0x3ffefc(0xc4),_0x5df6e9[_0x3ffefc(0x11a)]=_0x3ffefc(0xed),_0x5df6e9[_0x3ffefc(0xb8)]=_0x3ffefc(0xa7),_0x5df6e9[_0x3ffefc(0xd0)]=_0x3ffefc(0xc5),_0x5df6e9[_0x3ffefc(0xba)]=_0x3ffefc(0x110),_0x5df6e9[_0x3ffefc(0x106)]=_0x3ffefc(0xf6);const _0x1d052d=_0x5df6e9,_0x45868f=_0x1d052d[_0x3ffefc(0xe6)]['split']('|');let _0x48fa7a=0x0;while(!![]){switch(_0x45868f[_0x48fa7a++]){case'0':this[_0x3ffefc(0xc2)]=_0x1d052d[_0x3ffefc(0x117)];continue;case'1':this['BATCH_EVENT_TYPES']=[_0x1d052d['yzkCD'],_0x1d052d['ptvoe'],_0x1d052d[_0x3ffefc(0x101)],_0x1d052d['mkote'],_0x1d052d[_0x3ffefc(0x11a)],_0x1d052d[_0x3ffefc(0xb8)],_0x1d052d[_0x3ffefc(0xd0)]];continue;case'2':this[_0x3ffefc(0xc7)]=null;continue;case'3':this['queue']=[];continue;case'4':this[_0x3ffefc(0xbe)]=![];continue;case'5':this[_0x3ffefc(0xa4)]=_0x1d052d[_0x3ffefc(0xba)];continue;case'6':this[_0x3ffefc(0xf0)]=_0x1d052d[_0x3ffefc(0x106)];continue;}break;}}static[a123_0x352b78(0xcf)](){const _0x4bc6eb=a123_0x352b78;return!RequestQueueHandler[_0x4bc6eb(0x10f)]&&(RequestQueueHandler[_0x4bc6eb(0x10f)]=new RequestQueueHandler()),RequestQueueHandler[_0x4bc6eb(0x10f)];}[a123_0x352b78(0x112)]=()=>{const _0x2b881f=a123_0x352b78;!this[_0x2b881f(0xbe)]&&(this[_0x2b881f(0xbe)]=!![],this['startEventBatchPolling']());};[a123_0x352b78(0x10d)]=_0x34135e=>{const _0x1d4a36=a123_0x352b78,_0x2cb908={'eWelQ':function(_0x4913ed,_0x3e266c){return _0x4913ed===_0x3e266c;},'fIMLE':_0x1d4a36(0xfc),'pwKZo':function(_0x5820c3,_0x4f0ca4){return _0x5820c3>_0x4f0ca4;},'WVYSz':function(_0x21d671,_0x2885c3){return _0x21d671===_0x2885c3;},'qHgEY':'TEST_ATTACHMENT','wevuQ':function(_0x3e7537,_0x4697ef){return _0x3e7537!==_0x4697ef;},'oixRf':'TestRunFinished','njtiw':function(_0x59221c,_0x5f0558){return _0x59221c(_0x5f0558);},'lVNCC':'Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..'};if(this[_0x1d4a36(0x100)][_0x1d4a36(0x108)](_0x34135e[_0x1d4a36(0xd3)])){if(_0x34135e[_0x1d4a36(0xd4)]&&_0x34135e[_0x1d4a36(0xd4)][0x0]&&_0x2cb908[_0x1d4a36(0x118)](_0x34135e['logs'][0x0][_0x1d4a36(0xb2)],_0x2cb908[_0x1d4a36(0xcd)])){const _0x2952cf={};return _0x2952cf[_0x1d4a36(0xc3)]=!![],_0x2952cf[_0x1d4a36(0xb3)]=[_0x34135e],_0x2952cf[_0x1d4a36(0xe3)]=this[_0x1d4a36(0xa4)],_0x2952cf;}if(_0x34135e[_0x1d4a36(0xd4)]&&_0x2cb908[_0x1d4a36(0xce)](_0x34135e[_0x1d4a36(0xd4)][_0x1d4a36(0xad)],0x0)&&_0x2cb908[_0x1d4a36(0xf3)](_0x34135e['logs'][0x0]['kind'],_0x2cb908[_0x1d4a36(0xde)])&&_0x2cb908[_0x1d4a36(0x105)](_0x34135e[_0x1d4a36(0xd3)],_0x2cb908[_0x1d4a36(0x10c)])){const _0x14075b={};return _0x14075b[_0x1d4a36(0xc3)]=!![],_0x14075b[_0x1d4a36(0xb3)]=[_0x34135e],_0x14075b[_0x1d4a36(0xe3)]=this[_0x1d4a36(0xf0)],_0x14075b;}this['queue'][_0x1d4a36(0xc0)](_0x34135e);let _0x3c23ff=null;const _0x5e5229=this['shouldProceed']();_0x5e5229&&(_0x2cb908[_0x1d4a36(0xb6)](trace,_0x2cb908[_0x1d4a36(0xec)]),_0x3c23ff=this[_0x1d4a36(0xdc)][_0x1d4a36(0x104)](0x0,BATCH_SIZE),this[_0x1d4a36(0xdc)][_0x1d4a36(0xd2)](0x0,BATCH_SIZE),this[_0x1d4a36(0xf9)]());const _0x48f4c7={};return _0x48f4c7[_0x1d4a36(0xc3)]=_0x5e5229,_0x48f4c7[_0x1d4a36(0xb3)]=_0x3c23ff,_0x48f4c7['proceedWithUrl']=this[_0x1d4a36(0xc2)],_0x48f4c7;}const _0x1b6f14={};return _0x1b6f14[_0x1d4a36(0xc3)]=!![],_0x1b6f14;};['shutdown']=async()=>{const _0x4c713c=a123_0x352b78,_0x3846d3={'RRdtB':_0x4c713c(0xb7),'opPKQ':function(_0x53e56d,_0x49d75e){return _0x53e56d>_0x49d75e;},'tiHNh':'Shutdown-Queue','UyPtv':function(_0x18af52,_0x4a8b27){return _0x18af52>_0x4a8b27;},'UdwkS':function(_0x5b2d1c,_0x3ef5d6){return _0x5b2d1c(_0x3ef5d6);}};await this[_0x4c713c(0xf7)](),this[_0x4c713c(0xe5)](_0x3846d3[_0x4c713c(0xfd)]);while(_0x3846d3['opPKQ'](this[_0x4c713c(0xdc)]['length'],0x0)){const _0x4e77cd=this[_0x4c713c(0xdc)][_0x4c713c(0x104)](0x0,BATCH_SIZE);this[_0x4c713c(0xdc)][_0x4c713c(0xd2)](0x0,BATCH_SIZE),await this[_0x4c713c(0xaf)](this[_0x4c713c(0xc2)],_0x3846d3[_0x4c713c(0x10b)],_0x4e77cd);}_0x3846d3['UyPtv'](this[_0x4c713c(0xaa)],0x0)&&_0x3846d3[_0x4c713c(0x111)](debug,_0x4c713c(0xd7)+this['pendingUploads']);};['batchAndPostEvents']=async(_0x419fec,_0x57aed6,_0x5b4a6c)=>{const _0x387cd6=a123_0x352b78,_0x2c5713={'jgTMn':function(_0xc0c13,_0x4399d5){return _0xc0c13(_0x4399d5);},'aVmfa':_0x387cd6(0x102),'abDJL':function(_0x2c35a7){return _0x2c35a7();},'MVggG':function(_0x366f62,_0x5f1698,_0xd46918,_0x58d924,_0x56b186){return _0x366f62(_0x5f1698,_0xd46918,_0x58d924,_0x56b186);},'uVFLh':_0x387cd6(0xdd),'vLqOz':function(_0x39274b,_0x3f34c9){return _0x39274b(_0x3f34c9);},'tBtRO':function(_0x75c825,_0x8e7610){return _0x75c825-_0x8e7610;},'ubiMg':function(_0x22be6f,_0xa4598b){return _0x22be6f(_0xa4598b);},'RorsW':function(_0x2b30cb,_0x391ebf){return _0x2b30cb-_0x391ebf;}};let _0x4ade69='';try{_0x4ade69=_0x5b4a6c['map'](_0x32ad66=>'\x27'+_0x32ad66[_0x387cd6(0xd3)]+'\x27:'+(nestedKeyValue(_0x32ad66,[_0x387cd6(0xc9),_0x387cd6(0xfb)])||nestedKeyValue(_0x32ad66,[_0x387cd6(0xb1),_0x387cd6(0xfb)])))[_0x387cd6(0x103)](','),_0x2c5713['jgTMn'](debug,_0x387cd6(0xf8)+_0x57aed6+_0x387cd6(0xda)+Buffer[_0x387cd6(0xea)](util['format']('%j',_0x5b4a6c),_0x2c5713[_0x387cd6(0xd5)])+_0x387cd6(0xbf)+_0x4ade69);}catch(_0x3455a1){_0x2c5713['jgTMn'](debug,_0x387cd6(0xbc)+util[_0x387cd6(0xc1)](_0x3455a1)+'}');}const _0x53d0e9={'headers':_0x2c5713[_0x387cd6(0xca)](getDefaultHeaders)};try{const _0x5e6134=await _0x2c5713[_0x387cd6(0xd8)](nodeRequest,_0x2c5713[_0x387cd6(0x116)],_0x419fec,_0x5b4a6c,_0x53d0e9);if(_0x5e6134['data'][_0x387cd6(0xfa)]){const _0x4cce3c={};_0x4cce3c[_0x387cd6(0xb9)]=_0x5e6134[_0x387cd6(0xcc)][_0x387cd6(0xfa)];throw _0x4cce3c;}else _0x2c5713[_0x387cd6(0x107)](debug,_0x57aed6+_0x387cd6(0xe9)+_0x4ade69+_0x387cd6(0xf2)+util[_0x387cd6(0xc1)]('%j',_0x5e6134[_0x387cd6(0xcc)])),this['pendingUploads']=Math['max'](0x0,_0x2c5713[_0x387cd6(0xf4)](this[_0x387cd6(0xaa)],_0x5b4a6c[_0x387cd6(0xad)]));}catch(_0x3d44a4){_0x3d44a4[_0x387cd6(0x10a)]?_0x2c5713['ubiMg'](debug,_0x387cd6(0xcb)+_0x57aed6+_0x387cd6(0x114)+constants[_0x387cd6(0x113)]+_0x387cd6(0xd1)+_0x3d44a4['response'][_0x387cd6(0x109)]+'\x20'+_0x3d44a4[_0x387cd6(0x10a)][_0x387cd6(0xe0)]+'\x20'+util[_0x387cd6(0xc1)]('%j',_0x3d44a4[_0x387cd6(0x10a)])):_0x2c5713[_0x387cd6(0xa9)](debug,'EXCEPTION\x20IN\x20'+_0x57aed6+_0x387cd6(0x114)+constants['TEST_REPORTING_ANALYTICS']+_0x387cd6(0xd1)+(_0x3d44a4['message']||_0x3d44a4)),this[_0x387cd6(0xaa)]=Math[_0x387cd6(0xbd)](0x0,_0x2c5713[_0x387cd6(0xe7)](this['pendingUploads'],_0x5b4a6c[_0x387cd6(0xad)]));}};[a123_0x352b78(0xe4)]=()=>{const _0xd56cbf=a123_0x352b78,_0x1eb12c={'seJaF':function(_0x3dc266,_0x4d1fbf){return _0x3dc266>_0x4d1fbf;},'TrbZD':function(_0x5a3b10,_0x3608a1){return _0x5a3b10(_0x3608a1);},'teyxc':_0xd56cbf(0x11c),'Tfqmm':function(_0x2daf7a,_0x2fe033,_0x2ad7fa){return _0x2daf7a(_0x2fe033,_0x2ad7fa);}};this[_0xd56cbf(0xc7)]=_0x1eb12c['Tfqmm'](setInterval,async()=>{const _0x2db4c6=_0xd56cbf;if(_0x1eb12c[_0x2db4c6(0xc6)](this['queue'][_0x2db4c6(0xad)],0x0)){_0x1eb12c[_0x2db4c6(0xff)](trace,_0x2db4c6(0xf5)+this['queue'][_0x2db4c6(0xad)]);const _0x56e2e5=this[_0x2db4c6(0xdc)]['slice'](0x0,BATCH_SIZE);this['queue'][_0x2db4c6(0xd2)](0x0,BATCH_SIZE),await this[_0x2db4c6(0xaf)](this[_0x2db4c6(0xc2)],_0x1eb12c['teyxc'],_0x56e2e5),_0x1eb12c['TrbZD'](trace,'Remaining\x20Queue\x20Length\x20-\x20'+this[_0x2db4c6(0xdc)]['length']);}},BATCH_INTERVAL);};[a123_0x352b78(0xf9)]=()=>{const _0x18f6ac=a123_0x352b78,_0x4c520b={};_0x4c520b[_0x18f6ac(0xf1)]=_0x18f6ac(0xfe);const _0x34c825=_0x4c520b;this[_0x18f6ac(0xe5)](_0x34c825['oDJdQ']),this[_0x18f6ac(0xe4)]();};[a123_0x352b78(0xe5)]=_0x453b7e=>{const _0x30988d=a123_0x352b78,_0x9bec58={'kVPjH':function(_0x572c8e,_0x164244){return _0x572c8e(_0x164244);},'bfbgK':function(_0x3933bb,_0xeb47e5){return _0x3933bb===_0xeb47e5;},'QniFu':_0x30988d(0xb7)};this[_0x30988d(0xc7)]&&(_0x9bec58['kVPjH'](clearInterval,this['pollEventBatchInterval']),this[_0x30988d(0xc7)]=null,_0x9bec58[_0x30988d(0xa5)](_0x453b7e,_0x9bec58['QniFu'])&&(this[_0x30988d(0xbe)]=![]));};['shouldProceed']=()=>{const _0x1e8bc7=a123_0x352b78,_0x25dc5a={};_0x25dc5a[_0x1e8bc7(0xe8)]=function(_0xe1d19a,_0x3a7a8e){return _0xe1d19a>=_0x3a7a8e;};const _0x94842c=_0x25dc5a;return _0x94842c[_0x1e8bc7(0xe8)](this[_0x1e8bc7(0xdc)][_0x1e8bc7(0xad)],BATCH_SIZE);};async[a123_0x352b78(0xf7)](_0x1ea6cd=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x3a4362=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x5bdba4=a123_0x352b78,_0x3525dc={'HViwu':function(_0x4bc200,_0x483460){return _0x4bc200<=_0x483460;},'esWjd':function(_0x369a49,_0x460a49){return _0x369a49<=_0x460a49;},'TDRRn':function(_0x18337a,_0x5a1714){return _0x18337a(_0x5a1714);},'vbloU':function(_0x55e8e2,_0x8bdd54){return _0x55e8e2-_0x8bdd54;}};if(_0x3525dc[_0x5bdba4(0xd6)](this['pendingUploads'],0x0)||_0x3525dc[_0x5bdba4(0x10e)](_0x1ea6cd,0x0))return;return await _0x3525dc[_0x5bdba4(0xab)](sleep,_0x3a4362),this[_0x5bdba4(0xf7)](_0x3525dc[_0x5bdba4(0xae)](_0x1ea6cd,_0x3a4362));}}function a123_0x1d56(_0x170a5a,_0x5c030b){const _0x25cbd9=a123_0x25cb();return a123_0x1d56=function(_0x1d56b6,_0x106586){_0x1d56b6=_0x1d56b6-0xa4;let _0x463a15=_0x25cbd9[_0x1d56b6];return _0x463a15;},a123_0x1d56(_0x170a5a,_0x5c030b);}module[a123_0x352b78(0xef)]=RequestQueueHandler;function a123_0x25cb(){const _0x579e7a=['lVNCC','HookRunFinished','api/v1/batch','exports','uploadAttachmentUrl','oDJdQ','\x20--\x20','WVYSz','tBtRO','Processing\x20events.\x20Queue\x20Length\x20-\x20','upload-attachments','uploadPending','Processing\x20batch\x20events\x20for\x20','resetEventBatchPolling','error','uuid','TEST_SCREENSHOT','RRdtB','RESETTING','TrbZD','BATCH_EVENT_TYPES','EblKT','utf8','join','slice','wevuQ','IpAnA','vLqOz','includes','status','response','tiHNh','oixRf','add','esWjd','instance','api/v1/screenshots','UdwkS','start','TEST_REPORTING_ANALYTICS','\x20REQUEST\x20TO\x20','222198CSCAmy','uVFLh','xkKDH','eWelQ','2447920EdMuMG','xdvAm','241076iKPTMZ','Interval-Queue','screenshotEventUrl','bfbgK','3|4|0|5|6|1|2','TestRunStarted','1693242HlJsJq','ubiMg','pendingUploads','TDRRn','util','length','vbloU','batchAndPostEvents','../../bin/utils/constants','hook_run','kind','proceedWithData','../helper','448715HToWkX','njtiw','REMOVING','agZvN','message','jjcrH','20dlKejB','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','max','started','\x20bytes.\x20Events\x20are\x20','push','format','eventUrl','shouldProceed','TestRunSkipped','HookRunStarted','seJaF','pollEventBatchInterval','./utils','test_run','abDJL','EXCEPTION\x20IN\x20','data','fIMLE','pwKZo','getInstance','JLRkr','\x20:\x20','splice','event_type','logs','aVmfa','HViwu','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','MVggG','CBTSessionCreated','.\x20Request\x20Size\x20-\x20','yzkCD','queue','POST','qHgEY','77031WSqamf','statusText','7LStoBX','100673DHacVc','proceedWithUrl','startEventBatchPolling','removeEventBatchPolling','TeCMs','RorsW','Sluox','\x20event\x20successful\x20for\x20events\x20','byteLength','6ZJElEv'];a123_0x25cb=function(){return _0x579e7a;};return a123_0x25cb();}