const a125_0x32f33c=a125_0x1fe0;(function(_0x59cb6c,_0x3163c4){const _0x406257=a125_0x1fe0,_0x30248c=_0x59cb6c();while(!![]){try{const _0x4b460b=-parseInt(_0x406257(0xc4))/0x1*(-parseInt(_0x406257(0xc8))/0x2)+-parseInt(_0x406257(0x9d))/0x3*(parseInt(_0x406257(0x7d))/0x4)+-parseInt(_0x406257(0x9c))/0x5*(-parseInt(_0x406257(0xc0))/0x6)+-parseInt(_0x406257(0xd4))/0x7+parseInt(_0x406257(0xac))/0x8+-parseInt(_0x406257(0xb8))/0x9+-parseInt(_0x406257(0x81))/0xa*(-parseInt(_0x406257(0xa2))/0xb);if(_0x4b460b===_0x3163c4)break;else _0x30248c['push'](_0x30248c['shift']());}catch(_0x364386){_0x30248c['push'](_0x30248c['shift']());}}}(a125_0x1c10,0xe13d7));function a125_0x1c10(){const _0x50a886=['46122YNBOFE','RqQxw','jBJuS','data','125mQldMU','AUKKl','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','max','13310PDpafR','util','qUwCC','instance','VljPt','Processing\x20batch\x20events\x20for\x20','../../bin/utils/constants','started','CBTSessionCreated','DQWvn','HookRunStarted','response','9079028chkRqn','TestRunFinished','YQlhk','rjCxX','Interval-Queue','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','rOqhn','removeEventBatchPolling','proceedWithData','pendingUploads','./constants','jSWPO','Zuhdo','\x20:\x20','iDsBd','.\x20Request\x20Size\x20-\x20','vmrFS','wdgxR','\x20--\x20','nKkmY','vJbtS','HiONu','dBlqA','slice','format','mvBIR','eQvSB','CnCiQ','cJtRL','uuid','status','0|2|6|3|5|1|4','error','logs','32716GblZNr','uploadAttachmentUrl','getInstance','ceZNZ','820eoEypT','DxLog','yxHgJ','hook_run','jHKSq','startEventBatchPolling','ZDiqV','proceedWithUrl','TestRunStarted','Remaining\x20Queue\x20Length\x20-\x20','ntEWz','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','start','IVgDq','REMOVING','uyyBL','TestRunSkipped','Processing\x20events.\x20Queue\x20Length\x20-\x20','XKyLK','message','queue','uploadPending','kind','test_run','utf8','\x20event\x20successful\x20for\x20events\x20','includes','815NezefE','522XdkoeY','add','statusText','Shutdown-Queue','pollEventBatchInterval','342243vzLLfr','batchAndPostEvents','LLYOm','ITYpC','RESETTING','shouldProceed','eventUrl','EXCEPTION\x20IN\x20','nyiMw','\x20REQUEST\x20TO\x20','3941224FDrnDG','resetEventBatchPolling','MjGkb','map','event_type','length','exports','splice','UDcio','screenshotEventUrl','IfJwZ','CjvjU','13374378CSwHWX','tiPFQ','TEST_REPORTING_ANALYTICS','NWCnV','split','BATCH_EVENT_TYPES','HookRunFinished','HFIoO'];a125_0x1c10=function(){return _0x50a886;};return a125_0x1c10();}function a125_0x1fe0(_0x432046,_0x373d00){const _0x1c10fd=a125_0x1c10();return a125_0x1fe0=function(_0x1fe050,_0x28442b){_0x1fe050=_0x1fe050-0x67;let _0xf24710=_0x1c10fd[_0x1fe050];return _0xf24710;},a125_0x1fe0(_0x432046,_0x373d00);}const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a125_0x32f33c(0xde)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require('./utils'),{nestedKeyValue}=require('../helper'),util=require(a125_0x32f33c(0xc9)),constants=require(a125_0x32f33c(0xce));class RequestQueueHandler{static [a125_0x32f33c(0xcb)];[a125_0x32f33c(0xdd)]=0x0;constructor(){const _0xe34d8f=a125_0x32f33c,_0xd9357e={};_0xd9357e[_0xe34d8f(0xb7)]=_0xe34d8f(0x7a),_0xd9357e[_0xe34d8f(0x71)]='LogCreated',_0xd9357e[_0xe34d8f(0xc1)]=_0xe34d8f(0xd0),_0xd9357e[_0xe34d8f(0xb4)]=_0xe34d8f(0xd5),_0xd9357e[_0xe34d8f(0x85)]=_0xe34d8f(0x91),_0xd9357e[_0xe34d8f(0x93)]=_0xe34d8f(0xbe),_0xd9357e[_0xe34d8f(0x76)]=_0xe34d8f(0x89),_0xd9357e['wdgxR']=_0xe34d8f(0xd2),_0xd9357e[_0xe34d8f(0x90)]='api/v1/screenshots',_0xd9357e[_0xe34d8f(0xb9)]='upload-attachments',_0xd9357e['kFwFX']='api/v1/batch';const _0x146fa6=_0xd9357e,_0x1f6583=_0x146fa6['CjvjU'][_0xe34d8f(0xbc)]('|');let _0xb13e23=0x0;while(!![]){switch(_0x1f6583[_0xb13e23++]){case'0':this[_0xe34d8f(0x95)]=[];continue;case'1':this[_0xe34d8f(0xbd)]=[_0x146fa6[_0xe34d8f(0x71)],_0x146fa6[_0xe34d8f(0xc1)],_0x146fa6[_0xe34d8f(0xb4)],_0x146fa6[_0xe34d8f(0x85)],_0x146fa6[_0xe34d8f(0x93)],_0x146fa6[_0xe34d8f(0x76)],_0x146fa6[_0xe34d8f(0x6c)]];continue;case'2':this['started']=![];continue;case'3':this[_0xe34d8f(0xb5)]=_0x146fa6['uyyBL'];continue;case'4':this[_0xe34d8f(0xa1)]=null;continue;case'5':this[_0xe34d8f(0x7e)]=_0x146fa6[_0xe34d8f(0xb9)];continue;case'6':this[_0xe34d8f(0xa8)]=_0x146fa6['kFwFX'];continue;}break;}}static[a125_0x32f33c(0x7f)](){const _0x4712a8=a125_0x32f33c;return!RequestQueueHandler[_0x4712a8(0xcb)]&&(RequestQueueHandler[_0x4712a8(0xcb)]=new RequestQueueHandler()),RequestQueueHandler[_0x4712a8(0xcb)];}[a125_0x32f33c(0x8d)]=()=>{const _0x51aae4=a125_0x32f33c;!this['started']&&(this[_0x51aae4(0xcf)]=!![],this[_0x51aae4(0x86)]());};[a125_0x32f33c(0x9e)]=_0x57f7df=>{const _0xd59c16=a125_0x32f33c,_0x4b7f26={'VljPt':function(_0x13e6fe,_0x2f716b){return _0x13e6fe===_0x2f716b;},'vmrFS':'TEST_SCREENSHOT','ITYpC':function(_0x36abb4,_0x108cf5){return _0x36abb4>_0x108cf5;},'YrPqJ':function(_0x5500f1,_0xe5b8d6){return _0x5500f1===_0xe5b8d6;},'nKkmY':'TEST_ATTACHMENT','SbDhR':function(_0x4cf34a,_0x3b926a){return _0x4cf34a!==_0x3b926a;},'ceZNZ':_0xd59c16(0xd5),'vJbtS':function(_0x29890b,_0x1cdfdb){return _0x29890b(_0x1cdfdb);},'yxHgJ':_0xd59c16(0x8c)};if(this[_0xd59c16(0xbd)][_0xd59c16(0x9b)](_0x57f7df[_0xd59c16(0xb0)])){if(_0x57f7df[_0xd59c16(0x7c)]&&_0x57f7df[_0xd59c16(0x7c)][0x0]&&_0x4b7f26[_0xd59c16(0xcc)](_0x57f7df[_0xd59c16(0x7c)][0x0][_0xd59c16(0x97)],_0x4b7f26[_0xd59c16(0x6b)])){const _0x5d8593={};return _0x5d8593[_0xd59c16(0xa7)]=!![],_0x5d8593[_0xd59c16(0xdc)]=[_0x57f7df],_0x5d8593[_0xd59c16(0x88)]=this[_0xd59c16(0xb5)],_0x5d8593;}if(_0x57f7df[_0xd59c16(0x7c)]&&_0x4b7f26[_0xd59c16(0xa5)](_0x57f7df[_0xd59c16(0x7c)][_0xd59c16(0xb1)],0x0)&&_0x4b7f26['YrPqJ'](_0x57f7df['logs'][0x0][_0xd59c16(0x97)],_0x4b7f26[_0xd59c16(0x6e)])&&_0x4b7f26['SbDhR'](_0x57f7df[_0xd59c16(0xb0)],_0x4b7f26[_0xd59c16(0x80)])){const _0x4ad0a4={};return _0x4ad0a4['shouldProceed']=!![],_0x4ad0a4[_0xd59c16(0xdc)]=[_0x57f7df],_0x4ad0a4['proceedWithUrl']=this[_0xd59c16(0x7e)],_0x4ad0a4;}this[_0xd59c16(0x95)]['push'](_0x57f7df);let _0x5cada7=null;const _0x15f0e1=this[_0xd59c16(0xa7)]();_0x15f0e1&&(_0x4b7f26[_0xd59c16(0x6f)](trace,_0x4b7f26[_0xd59c16(0x83)]),_0x5cada7=this['queue']['slice'](0x0,BATCH_SIZE),this[_0xd59c16(0x95)][_0xd59c16(0xb3)](0x0,BATCH_SIZE),this[_0xd59c16(0xad)]());const _0x20cb37={};return _0x20cb37[_0xd59c16(0xa7)]=_0x15f0e1,_0x20cb37[_0xd59c16(0xdc)]=_0x5cada7,_0x20cb37[_0xd59c16(0x88)]=this[_0xd59c16(0xa8)],_0x20cb37;}const _0x31dc7c={};return _0x31dc7c[_0xd59c16(0xa7)]=!![],_0x31dc7c;};['shutdown']=async()=>{const _0x5ef048=a125_0x32f33c,_0xb9641f={'eQvSB':_0x5ef048(0x8f),'ZDiqV':function(_0x41cd17,_0x276afd){return _0x41cd17>_0x276afd;},'YQlhk':_0x5ef048(0xa0),'MjGkb':function(_0x4c0394,_0x335fc7){return _0x4c0394>_0x335fc7;},'LLYOm':function(_0x4b5343,_0x391181){return _0x4b5343(_0x391181);}};await this[_0x5ef048(0x96)](),this['removeEventBatchPolling'](_0xb9641f[_0x5ef048(0x75)]);while(_0xb9641f[_0x5ef048(0x87)](this[_0x5ef048(0x95)][_0x5ef048(0xb1)],0x0)){const _0x5729eb=this[_0x5ef048(0x95)][_0x5ef048(0x72)](0x0,BATCH_SIZE);this[_0x5ef048(0x95)][_0x5ef048(0xb3)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this['eventUrl'],_0xb9641f[_0x5ef048(0xd6)],_0x5729eb);}_0xb9641f[_0x5ef048(0xae)](this[_0x5ef048(0xdd)],0x0)&&_0xb9641f[_0x5ef048(0xa4)](debug,_0x5ef048(0xd9)+this[_0x5ef048(0xdd)]);};['batchAndPostEvents']=async(_0x3b9c59,_0x326f87,_0x1af098)=>{const _0x1d03f0=a125_0x32f33c,_0x421203={'PsZTZ':function(_0x2c8e6b,_0x3d0b4d){return _0x2c8e6b(_0x3d0b4d);},'NWCnV':_0x1d03f0(0x99),'qUwCC':function(_0x14b118,_0x4cdbc9){return _0x14b118(_0x4cdbc9);},'Zuhdo':function(_0x34d579){return _0x34d579();},'iDsBd':function(_0x5830e7,_0x5c5b2b,_0x3f9a0a,_0x302f41,_0x4e0fdc){return _0x5830e7(_0x5c5b2b,_0x3f9a0a,_0x302f41,_0x4e0fdc);},'IVgDq':'POST','jBJuS':function(_0x21a26a,_0x360d5b){return _0x21a26a-_0x360d5b;},'ntEWz':function(_0x15d4e8,_0x5f083f){return _0x15d4e8(_0x5f083f);},'jSWPO':function(_0x5eea5f,_0x3c54fa){return _0x5eea5f(_0x3c54fa);},'OFVpx':function(_0x2170ec,_0x291a63){return _0x2170ec-_0x291a63;}};let _0x1020eb='';try{_0x1020eb=_0x1af098[_0x1d03f0(0xaf)](_0x4a3478=>'\x27'+_0x4a3478[_0x1d03f0(0xb0)]+'\x27:'+(nestedKeyValue(_0x4a3478,[_0x1d03f0(0x98),_0x1d03f0(0x78)])||nestedKeyValue(_0x4a3478,[_0x1d03f0(0x84),_0x1d03f0(0x78)])))['join'](','),_0x421203['PsZTZ'](debug,_0x1d03f0(0xcd)+_0x326f87+_0x1d03f0(0x6a)+Buffer['byteLength'](util[_0x1d03f0(0x73)]('%j',_0x1af098),_0x421203[_0x1d03f0(0xbb)])+'\x20bytes.\x20Events\x20are\x20'+_0x1020eb);}catch(_0x430734){_0x421203[_0x1d03f0(0xca)](debug,_0x1d03f0(0xc6)+util[_0x1d03f0(0x73)](_0x430734)+'}');}const _0x2983cc={'headers':_0x421203[_0x1d03f0(0x67)](getDefaultHeaders)};try{const _0x4dabd1=await _0x421203[_0x1d03f0(0x69)](nodeRequest,_0x421203[_0x1d03f0(0x8e)],_0x3b9c59,_0x1af098,_0x2983cc);if(_0x4dabd1[_0x1d03f0(0xc3)][_0x1d03f0(0x7b)]){const _0x50bc18={};_0x50bc18[_0x1d03f0(0x94)]=_0x4dabd1['data'][_0x1d03f0(0x7b)];throw _0x50bc18;}else _0x421203[_0x1d03f0(0xca)](debug,_0x326f87+_0x1d03f0(0x9a)+_0x1020eb+_0x1d03f0(0x6d)+util['format']('%j',_0x4dabd1[_0x1d03f0(0xc3)])),this[_0x1d03f0(0xdd)]=Math[_0x1d03f0(0xc7)](0x0,_0x421203[_0x1d03f0(0xc2)](this[_0x1d03f0(0xdd)],_0x1af098[_0x1d03f0(0xb1)]));}catch(_0x5e9652){_0x5e9652[_0x1d03f0(0xd3)]?_0x421203[_0x1d03f0(0x8b)](debug,_0x1d03f0(0xa9)+_0x326f87+_0x1d03f0(0xab)+constants['TEST_REPORTING_ANALYTICS']+_0x1d03f0(0x68)+_0x5e9652[_0x1d03f0(0xd3)][_0x1d03f0(0x79)]+'\x20'+_0x5e9652[_0x1d03f0(0xd3)][_0x1d03f0(0x9f)]+'\x20'+util[_0x1d03f0(0x73)]('%j',_0x5e9652[_0x1d03f0(0xd3)])):_0x421203[_0x1d03f0(0xdf)](debug,_0x1d03f0(0xa9)+_0x326f87+_0x1d03f0(0xab)+constants[_0x1d03f0(0xba)]+'\x20:\x20'+(_0x5e9652[_0x1d03f0(0x94)]||_0x5e9652)),this['pendingUploads']=Math[_0x1d03f0(0xc7)](0x0,_0x421203['OFVpx'](this[_0x1d03f0(0xdd)],_0x1af098[_0x1d03f0(0xb1)]));}};[a125_0x32f33c(0x86)]=()=>{const _0x165e1d=a125_0x32f33c,_0x14130d={'nyiMw':function(_0x1bf777,_0x1ba061){return _0x1bf777>_0x1ba061;},'kKNny':function(_0x42bb36,_0x53a5f0){return _0x42bb36(_0x53a5f0);},'HFIoO':_0x165e1d(0xd8),'DQWvn':function(_0x3234c4,_0x50b3bd){return _0x3234c4(_0x50b3bd);},'tlloj':function(_0x57d684,_0xb89dd2,_0x493e6f){return _0x57d684(_0xb89dd2,_0x493e6f);}};this['pollEventBatchInterval']=_0x14130d['tlloj'](setInterval,async()=>{const _0x2d3c78=_0x165e1d;if(_0x14130d[_0x2d3c78(0xaa)](this[_0x2d3c78(0x95)][_0x2d3c78(0xb1)],0x0)){_0x14130d['kKNny'](trace,_0x2d3c78(0x92)+this[_0x2d3c78(0x95)][_0x2d3c78(0xb1)]);const _0x3ee99d=this['queue'][_0x2d3c78(0x72)](0x0,BATCH_SIZE);this[_0x2d3c78(0x95)][_0x2d3c78(0xb3)](0x0,BATCH_SIZE),await this[_0x2d3c78(0xa3)](this[_0x2d3c78(0xa8)],_0x14130d[_0x2d3c78(0xbf)],_0x3ee99d),_0x14130d[_0x2d3c78(0xd1)](trace,_0x2d3c78(0x8a)+this[_0x2d3c78(0x95)][_0x2d3c78(0xb1)]);}},BATCH_INTERVAL);};['resetEventBatchPolling']=()=>{const _0x46e222=a125_0x32f33c,_0x4c931c={};_0x4c931c[_0x46e222(0xb6)]=_0x46e222(0xa6);const _0x461566=_0x4c931c;this[_0x46e222(0xdb)](_0x461566[_0x46e222(0xb6)]),this[_0x46e222(0x86)]();};[a125_0x32f33c(0xdb)]=_0x5724a1=>{const _0x319699=a125_0x32f33c,_0x3e62f5={'HZHSY':function(_0x6912dd,_0x1938aa){return _0x6912dd(_0x1938aa);},'rOqhn':function(_0x4317e0,_0x309ff2){return _0x4317e0===_0x309ff2;},'rjCxX':'REMOVING'};this[_0x319699(0xa1)]&&(_0x3e62f5['HZHSY'](clearInterval,this['pollEventBatchInterval']),this[_0x319699(0xa1)]=null,_0x3e62f5[_0x319699(0xda)](_0x5724a1,_0x3e62f5[_0x319699(0xd7)])&&(this[_0x319699(0xcf)]=![]));};[a125_0x32f33c(0xa7)]=()=>{const _0x4539c7=a125_0x32f33c,_0x2fe578={};_0x2fe578[_0x4539c7(0x70)]=function(_0x27deaa,_0x5a3345){return _0x27deaa>=_0x5a3345;};const _0x3fc228=_0x2fe578;return _0x3fc228[_0x4539c7(0x70)](this[_0x4539c7(0x95)][_0x4539c7(0xb1)],BATCH_SIZE);};async[a125_0x32f33c(0x96)](_0x3b101b=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x44a8b4=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x49fba5=a125_0x32f33c,_0x20219a={'AUKKl':function(_0x405e8d,_0x2a796e){return _0x405e8d<=_0x2a796e;},'DxLog':function(_0x336670,_0x34a1dc){return _0x336670<=_0x34a1dc;},'cJtRL':function(_0x5deb69,_0x5453f5){return _0x5deb69(_0x5453f5);},'mvBIR':function(_0x95f59e,_0x5900d8){return _0x95f59e-_0x5900d8;}};if(_0x20219a[_0x49fba5(0xc5)](this[_0x49fba5(0xdd)],0x0)||_0x20219a[_0x49fba5(0x82)](_0x3b101b,0x0))return;return await _0x20219a[_0x49fba5(0x77)](sleep,_0x44a8b4),this[_0x49fba5(0x96)](_0x20219a[_0x49fba5(0x74)](_0x3b101b,_0x44a8b4));}}module[a125_0x32f33c(0xb2)]=RequestQueueHandler;