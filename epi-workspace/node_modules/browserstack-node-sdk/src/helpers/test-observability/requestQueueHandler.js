const a86_0x487d74=a86_0x2e31;function a86_0x4d0e(){const _0x4d8a1a=['uHmYa','RYHjY','DewGK','join','byteLength','add','2535984mMneJz','UdpDi','upload-attachments','dfkwU','LogCreated','qgwgN','143390LQyuWa','2TOnoax','BVKbr','api/v1/batch','39487xdABsV','IOiaj','format','104ZKZBWl','\x20--\x20','response','CBTSessionCreated','./constants','FaEjS','TEST_SCREENSHOT','42ZebfTs','onWRv','splice','Shutdown-Queue','Processing\x20batch\x20events\x20for\x20','pollEventBatchInterval','510405wLNtIA','HookRunFinished','api/v1/screenshots','xDPGt','uploadPending','EXCEPTION\x20IN\x20','util','../helper','tLKoh','shouldProceed','RgfLm','./utils','eVjRG','event_type','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','startEventBatchPolling','kind','batchAndPostEvents','message','max','TestRunStarted','JUxTN','1819464KTrdXw','length','TEST_ATTACHMENT','LtggP','Remaining\x20Queue\x20Length\x20-\x20','removeEventBatchPolling','queue','776159SrTiRU','uploadAttachmentUrl','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','instance','slice','resetEventBatchPolling','started','ILlsa','adIGV','zWobI','fPcVA','338757stkwnY','TestRunFinished','getInstance','nhDaV','qAXGg','HookRunStarted','test_run','hook_run','pendingUploads','RESETTING','BATCH_EVENT_TYPES','proceedWithUrl','44xuMBTt','zLxpN','push','\x20bytes.\x20Events\x20are\x20','BzHXe','logs','statusText','OmPLp','map','exports','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','status','GiAwP','start','HEdzv','6|0|3|2|4|1|5','proceedWithData','split','MntwV','UFvWt','error','Processing\x20events.\x20Queue\x20Length\x20-\x20','GEAko','grcWl','data','TestRunSkipped','shutdown','.\x20Request\x20Size\x20-\x20','screenshotEventUrl','eventUrl','549yWgGcK','rjYeQ'];a86_0x4d0e=function(){return _0x4d8a1a;};return a86_0x4d0e();}(function(_0x1291af,_0x1bd1ed){const _0x547564=a86_0x2e31,_0x20ef98=_0x1291af();while(!![]){try{const _0x23fde0=-parseInt(_0x547564(0xb9))/0x1*(-parseInt(_0x547564(0x89))/0x2)+-parseInt(_0x547564(0xc4))/0x3+-parseInt(_0x547564(0x82))/0x4+-parseInt(_0x547564(0x9c))/0x5*(-parseInt(_0x547564(0x96))/0x6)+-parseInt(_0x547564(0x8c))/0x7*(-parseInt(_0x547564(0x8f))/0x8)+-parseInt(_0x547564(0x7a))/0x9*(parseInt(_0x547564(0x88))/0xa)+-parseInt(_0x547564(0xd0))/0xb*(-parseInt(_0x547564(0xb2))/0xc);if(_0x23fde0===_0x1bd1ed)break;else _0x20ef98['push'](_0x20ef98['shift']());}catch(_0x81dae5){_0x20ef98['push'](_0x20ef98['shift']());}}}(a86_0x4d0e,0x86059));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a86_0x487d74(0x93)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a86_0x487d74(0xa7)),{nestedKeyValue}=require(a86_0x487d74(0xa3)),util=require(a86_0x487d74(0xa2));class RequestQueueHandler{static [a86_0x487d74(0xbc)];[a86_0x487d74(0xcc)]=0x0;constructor(){const _0x349bd2=a86_0x487d74,_0x21d0a0={};_0x21d0a0[_0x349bd2(0x87)]=_0x349bd2(0xdf),_0x21d0a0[_0x349bd2(0xa4)]=_0x349bd2(0x86),_0x21d0a0[_0x349bd2(0xc8)]=_0x349bd2(0x92),_0x21d0a0['fERnE']=_0x349bd2(0xc5),_0x21d0a0[_0x349bd2(0xe3)]=_0x349bd2(0x75),_0x21d0a0['RYHjY']=_0x349bd2(0x9d),_0x21d0a0[_0x349bd2(0xc7)]=_0x349bd2(0xb0),_0x21d0a0[_0x349bd2(0x7b)]=_0x349bd2(0xc9),_0x21d0a0[_0x349bd2(0xd4)]=_0x349bd2(0x9e),_0x21d0a0[_0x349bd2(0xdc)]=_0x349bd2(0x8b),_0x21d0a0[_0x349bd2(0x85)]=_0x349bd2(0x84);const _0x5f3ce6=_0x21d0a0,_0x395b07=_0x5f3ce6[_0x349bd2(0x87)][_0x349bd2(0xe1)]('|');let _0x5b0e95=0x0;while(!![]){switch(_0x395b07[_0x5b0e95++]){case'0':this['started']=![];continue;case'1':this[_0x349bd2(0xce)]=[_0x5f3ce6[_0x349bd2(0xa4)],_0x5f3ce6['qAXGg'],_0x5f3ce6['fERnE'],_0x5f3ce6[_0x349bd2(0xe3)],_0x5f3ce6[_0x349bd2(0x7d)],_0x5f3ce6['nhDaV'],_0x5f3ce6[_0x349bd2(0x7b)]];continue;case'2':this[_0x349bd2(0x78)]=_0x5f3ce6[_0x349bd2(0xd4)];continue;case'3':this[_0x349bd2(0x79)]=_0x5f3ce6[_0x349bd2(0xdc)];continue;case'4':this[_0x349bd2(0xba)]=_0x5f3ce6['dfkwU'];continue;case'5':this[_0x349bd2(0x9b)]=null;continue;case'6':this[_0x349bd2(0xb8)]=[];continue;}break;}}static[a86_0x487d74(0xc6)](){const _0x26b657=a86_0x487d74;return!RequestQueueHandler[_0x26b657(0xbc)]&&(RequestQueueHandler[_0x26b657(0xbc)]=new RequestQueueHandler()),RequestQueueHandler[_0x26b657(0xbc)];}[a86_0x487d74(0xdd)]=()=>{const _0x19211b=a86_0x487d74;!this[_0x19211b(0xbf)]&&(this[_0x19211b(0xbf)]=!![],this[_0x19211b(0xab)]());};[a86_0x487d74(0x81)]=_0x806f7a=>{const _0x36cc6c=a86_0x487d74,_0x5315e1={'zLxpN':function(_0x4977cb,_0x1a8496){return _0x4977cb===_0x1a8496;},'BVKbr':_0x36cc6c(0x95),'AKTuY':function(_0x4b75fe,_0x25d57b){return _0x4b75fe>_0x25d57b;},'MntwV':_0x36cc6c(0xb4),'rbaOm':function(_0x51ff12,_0x2a2d01){return _0x51ff12!==_0x2a2d01;},'onWRv':'TestRunFinished','dcJnv':function(_0x22bd95,_0xa2a54c){return _0x22bd95(_0xa2a54c);},'OLLas':_0x36cc6c(0xaa)};if(this['BATCH_EVENT_TYPES']['includes'](_0x806f7a[_0x36cc6c(0xa9)])){if(_0x806f7a[_0x36cc6c(0xd5)]&&_0x806f7a[_0x36cc6c(0xd5)][0x0]&&_0x5315e1[_0x36cc6c(0xd1)](_0x806f7a['logs'][0x0][_0x36cc6c(0xac)],_0x5315e1[_0x36cc6c(0x8a)])){const _0x14aa52={};return _0x14aa52[_0x36cc6c(0xa5)]=!![],_0x14aa52[_0x36cc6c(0xe0)]=[_0x806f7a],_0x14aa52[_0x36cc6c(0xcf)]=this[_0x36cc6c(0x78)],_0x14aa52;}if(_0x806f7a[_0x36cc6c(0xd5)]&&_0x5315e1['AKTuY'](_0x806f7a['logs'][_0x36cc6c(0xb3)],0x0)&&_0x5315e1[_0x36cc6c(0xd1)](_0x806f7a['logs'][0x0][_0x36cc6c(0xac)],_0x5315e1[_0x36cc6c(0xe2)])&&_0x5315e1['rbaOm'](_0x806f7a[_0x36cc6c(0xa9)],_0x5315e1[_0x36cc6c(0x97)])){const _0x30e28b={};return _0x30e28b[_0x36cc6c(0xa5)]=!![],_0x30e28b['proceedWithData']=[_0x806f7a],_0x30e28b['proceedWithUrl']=this[_0x36cc6c(0xba)],_0x30e28b;}this[_0x36cc6c(0xb8)][_0x36cc6c(0xd2)](_0x806f7a);let _0x10dfb7=null;const _0x173855=this['shouldProceed']();_0x173855&&(_0x5315e1['dcJnv'](trace,_0x5315e1['OLLas']),_0x10dfb7=this['queue'][_0x36cc6c(0xbd)](0x0,BATCH_SIZE),this['queue'][_0x36cc6c(0x98)](0x0,BATCH_SIZE),this[_0x36cc6c(0xbe)]());const _0x70e7cd={};return _0x70e7cd['shouldProceed']=_0x173855,_0x70e7cd[_0x36cc6c(0xe0)]=_0x10dfb7,_0x70e7cd[_0x36cc6c(0xcf)]=this[_0x36cc6c(0x79)],_0x70e7cd;}const _0x57d058={};return _0x57d058[_0x36cc6c(0xa5)]=!![],_0x57d058;};[a86_0x487d74(0x76)]=async()=>{const _0x1c88d1=a86_0x487d74,_0x12ac5b={'tqqLY':'REMOVING','zWobI':function(_0x12b1aa,_0x425b73){return _0x12b1aa>_0x425b73;},'MRbkz':_0x1c88d1(0x99),'RgfLm':function(_0x141aa6,_0x382b0a){return _0x141aa6(_0x382b0a);}};await this[_0x1c88d1(0xa0)](),this['removeEventBatchPolling'](_0x12ac5b['tqqLY']);while(_0x12ac5b[_0x1c88d1(0xc2)](this[_0x1c88d1(0xb8)][_0x1c88d1(0xb3)],0x0)){const _0x314df3=this[_0x1c88d1(0xb8)][_0x1c88d1(0xbd)](0x0,BATCH_SIZE);this['queue'][_0x1c88d1(0x98)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x1c88d1(0x79)],_0x12ac5b['MRbkz'],_0x314df3);}_0x12ac5b[_0x1c88d1(0xc2)](this[_0x1c88d1(0xcc)],0x0)&&_0x12ac5b[_0x1c88d1(0xa6)](debug,'Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20'+this[_0x1c88d1(0xcc)]);};[a86_0x487d74(0xad)]=async(_0x2e682d,_0x64d31a,_0x266285)=>{const _0x4655e8=a86_0x487d74,_0x2fb7dc={'IOiaj':function(_0x447a4d,_0x5ecbc2){return _0x447a4d(_0x5ecbc2);},'adIGV':'utf8','grcWl':function(_0xda193d){return _0xda193d();},'JUxTN':function(_0x1225a8,_0x5649e9,_0x3f7328,_0x1bfc02,_0x314a44){return _0x1225a8(_0x5649e9,_0x3f7328,_0x1bfc02,_0x314a44);},'fPcVA':'POST','gHWur':function(_0x55a609,_0x2e125a){return _0x55a609-_0x2e125a;},'UdpDi':function(_0x2d69b9,_0x796537){return _0x2d69b9(_0x796537);},'xDPGt':function(_0x74a690,_0x476a11){return _0x74a690-_0x476a11;}};let _0x42b653='';try{_0x42b653=_0x266285[_0x4655e8(0xd8)](_0x1e812b=>'\x27'+_0x1e812b[_0x4655e8(0xa9)]+'\x27:'+(nestedKeyValue(_0x1e812b,[_0x4655e8(0xca),'uuid'])||nestedKeyValue(_0x1e812b,[_0x4655e8(0xcb),'uuid'])))[_0x4655e8(0x7f)](','),_0x2fb7dc[_0x4655e8(0x8d)](debug,_0x4655e8(0x9a)+_0x64d31a+_0x4655e8(0x77)+Buffer[_0x4655e8(0x80)](util[_0x4655e8(0x8e)]('%j',_0x266285),_0x2fb7dc[_0x4655e8(0xc1)])+_0x4655e8(0xd3)+_0x42b653);}catch(_0x325142){_0x2fb7dc[_0x4655e8(0x8d)](debug,_0x4655e8(0xda)+util['format'](_0x325142)+'}');}const _0x3c6daf={'headers':_0x2fb7dc[_0x4655e8(0x73)](getDefaultHeaders)};try{const _0x54fe76=await _0x2fb7dc[_0x4655e8(0xb1)](nodeRequest,_0x2fb7dc[_0x4655e8(0xc3)],_0x2e682d,_0x266285,_0x3c6daf);if(_0x54fe76[_0x4655e8(0x74)][_0x4655e8(0xe4)]){const _0x44f5d7={};_0x44f5d7['message']=_0x54fe76['data'][_0x4655e8(0xe4)];throw _0x44f5d7;}else _0x2fb7dc[_0x4655e8(0x8d)](debug,_0x64d31a+'\x20event\x20successful\x20for\x20events\x20'+_0x42b653+_0x4655e8(0x90)+util[_0x4655e8(0x8e)]('%j',_0x54fe76['data'])),this[_0x4655e8(0xcc)]=Math[_0x4655e8(0xaf)](0x0,_0x2fb7dc['gHWur'](this[_0x4655e8(0xcc)],_0x266285['length']));}catch(_0x73269b){_0x73269b[_0x4655e8(0x91)]?_0x2fb7dc[_0x4655e8(0x83)](debug,_0x4655e8(0xa1)+_0x64d31a+_0x4655e8(0xbb)+_0x73269b[_0x4655e8(0x91)][_0x4655e8(0xdb)]+'\x20'+_0x73269b[_0x4655e8(0x91)][_0x4655e8(0xd6)]+'\x20'+util[_0x4655e8(0x8e)]('%j',_0x73269b['response'])):_0x2fb7dc['IOiaj'](debug,_0x4655e8(0xa1)+_0x64d31a+_0x4655e8(0xbb)+(_0x73269b[_0x4655e8(0xae)]||_0x73269b)),this['pendingUploads']=Math['max'](0x0,_0x2fb7dc[_0x4655e8(0x9f)](this['pendingUploads'],_0x266285['length']));}};[a86_0x487d74(0xab)]=()=>{const _0x1a545d=a86_0x487d74,_0x348198={'DewGK':function(_0x4637fa,_0x3db1b6){return _0x4637fa>_0x3db1b6;},'eVjRG':function(_0x41123a,_0x4af5f4){return _0x41123a(_0x4af5f4);},'dqOoT':'Interval-Queue','ILlsa':function(_0x3f91d4,_0x158d20,_0xcc2719){return _0x3f91d4(_0x158d20,_0xcc2719);}};this['pollEventBatchInterval']=_0x348198[_0x1a545d(0xc0)](setInterval,async()=>{const _0x4fa70b=_0x1a545d;if(_0x348198[_0x4fa70b(0x7e)](this[_0x4fa70b(0xb8)][_0x4fa70b(0xb3)],0x0)){_0x348198['eVjRG'](trace,_0x4fa70b(0xe5)+this[_0x4fa70b(0xb8)]['length']);const _0x55b11a=this[_0x4fa70b(0xb8)][_0x4fa70b(0xbd)](0x0,BATCH_SIZE);this['queue'][_0x4fa70b(0x98)](0x0,BATCH_SIZE),await this[_0x4fa70b(0xad)](this[_0x4fa70b(0x79)],_0x348198['dqOoT'],_0x55b11a),_0x348198[_0x4fa70b(0xa8)](trace,_0x4fa70b(0xb6)+this[_0x4fa70b(0xb8)][_0x4fa70b(0xb3)]);}},BATCH_INTERVAL);};[a86_0x487d74(0xbe)]=()=>{const _0x4497b6=a86_0x487d74,_0x151f07={};_0x151f07[_0x4497b6(0xde)]=_0x4497b6(0xcd);const _0x46f263=_0x151f07;this[_0x4497b6(0xb7)](_0x46f263[_0x4497b6(0xde)]),this[_0x4497b6(0xab)]();};[a86_0x487d74(0xb7)]=_0x45dac4=>{const _0x353ebd=a86_0x487d74,_0x1b16fc={'dasxF':function(_0x2e0035,_0x454a0d){return _0x2e0035(_0x454a0d);},'LtggP':function(_0x7532a4,_0x435efd){return _0x7532a4===_0x435efd;},'SZrRe':'REMOVING'};this[_0x353ebd(0x9b)]&&(_0x1b16fc['dasxF'](clearInterval,this[_0x353ebd(0x9b)]),this[_0x353ebd(0x9b)]=null,_0x1b16fc[_0x353ebd(0xb5)](_0x45dac4,_0x1b16fc['SZrRe'])&&(this[_0x353ebd(0xbf)]=![]));};[a86_0x487d74(0xa5)]=()=>{const _0x454f3f=a86_0x487d74,_0x37b364={};_0x37b364[_0x454f3f(0xe6)]=function(_0x56fa47,_0x424efc){return _0x56fa47>=_0x424efc;};const _0x435719=_0x37b364;return _0x435719[_0x454f3f(0xe6)](this['queue'][_0x454f3f(0xb3)],BATCH_SIZE);};async['uploadPending'](_0x3e301c=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x12b09e=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x2f9a5f=a86_0x487d74,_0x45f1dd={'uHmYa':function(_0x3bf66e,_0x37bd49){return _0x3bf66e<=_0x37bd49;},'FaEjS':function(_0x179291,_0x544fd9){return _0x179291(_0x544fd9);},'OmPLp':function(_0x48db00,_0x574b61){return _0x48db00-_0x574b61;}};if(_0x45f1dd[_0x2f9a5f(0x7c)](this[_0x2f9a5f(0xcc)],0x0)||_0x45f1dd[_0x2f9a5f(0x7c)](_0x3e301c,0x0))return;return await _0x45f1dd[_0x2f9a5f(0x94)](sleep,_0x12b09e),this[_0x2f9a5f(0xa0)](_0x45f1dd[_0x2f9a5f(0xd7)](_0x3e301c,_0x12b09e));}}function a86_0x2e31(_0x5df723,_0x5141e5){const _0x4d0e32=a86_0x4d0e();return a86_0x2e31=function(_0x2e31bc,_0x3573ed){_0x2e31bc=_0x2e31bc-0x73;let _0x25f982=_0x4d0e32[_0x2e31bc];return _0x25f982;},a86_0x2e31(_0x5df723,_0x5141e5);}module[a86_0x487d74(0xd9)]=RequestQueueHandler;