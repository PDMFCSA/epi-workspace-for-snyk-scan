function a113_0x2184(){const _0x2985cf=['Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','agBXQ','startEventBatchPolling','wjyxR','CXZxb','MQVVl','map','dsDws','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','logs','./constants','tulDJ','.\x20Request\x20Size\x20-\x20','hook_run','12NXJfVa','qQPmb','PRDTu','statusText','uploadAttachmentUrl','eventUrl','rDCUD','RESETTING','api/v1/batch','dJHFo','error','max','fKVCH','util','start','Shutdown-Queue','Grrhp','BZWfa','hfRfy','QYWKR','ZHGAV','44886eAwSfb','length','utf8','hPDtQ','SyuFx','CMGge','TestRunStarted','1246PrcuPX','Processing\x20batch\x20events\x20for\x20','queue','message','30952323ESRAHV','kind','response','535521Dsuvde','DoStW','add','api/v1/screenshots','getInstance','./utils','batchAndPostEvents','event_type','TEST_SCREENSHOT','test_run','nQiRv','TestRunFinished','uploadPending','RRBpm','2009030crwezj','qmhYS','started','\x20--\x20','DKRbF','\x20event\x20successful\x20for\x20events\x20','split','byteLength','proceedWithUrl','kBodg','3342018Akeevj','TestRunSkipped','status','REMOVING','FWlLL','splice','pendingUploads','tUZSS','Processing\x20events.\x20Queue\x20Length\x20-\x20','3010476WYZpsV','\x20bytes.\x20Events\x20are\x20','uXQyS','instance','proceedWithData','jyNIy','NCyDq','SfwKN','exports','POST','AmOST','SGKNf','push','BATCH_EVENT_TYPES','data','mviHT','XcRLC','screenshotEventUrl','14716792jSoovk','slice','RJaLj','Remaining\x20Queue\x20Length\x20-\x20','pollEventBatchInterval','EXCEPTION\x20IN\x20','removeEventBatchPolling','safHk','10uafRAc','shouldProceed','HfKOm','format'];a113_0x2184=function(){return _0x2985cf;};return a113_0x2184();}const a113_0x49cf57=a113_0x2fc8;(function(_0x333aff,_0x1578ae){const _0x2ee3ac=a113_0x2fc8,_0x46e2c7=_0x333aff();while(!![]){try{const _0x553375=-parseInt(_0x2ee3ac(0x197))/0x1+-parseInt(_0x2ee3ac(0x1af))/0x2+-parseInt(_0x2ee3ac(0x1b8))/0x3+parseInt(_0x2ee3ac(0x174))/0x4*(parseInt(_0x2ee3ac(0x1a5))/0x5)+-parseInt(_0x2ee3ac(0x189))/0x6*(-parseInt(_0x2ee3ac(0x190))/0x7)+-parseInt(_0x2ee3ac(0x15a))/0x8+parseInt(_0x2ee3ac(0x194))/0x9*(parseInt(_0x2ee3ac(0x162))/0xa);if(_0x553375===_0x1578ae)break;else _0x46e2c7['push'](_0x46e2c7['shift']());}catch(_0x1a0f3c){_0x46e2c7['push'](_0x46e2c7['shift']());}}}(a113_0x2184,0xe2362));function a113_0x2fc8(_0xd02ca6,_0x2fd28b){const _0x21843e=a113_0x2184();return a113_0x2fc8=function(_0x2fc89d,_0x4dcfae){_0x2fc89d=_0x2fc89d-0x158;let _0x1b3a9e=_0x21843e[_0x2fc89d];return _0x1b3a9e;},a113_0x2fc8(_0xd02ca6,_0x2fd28b);}const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a113_0x49cf57(0x170)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a113_0x49cf57(0x19c)),{nestedKeyValue}=require('../helper'),util=require(a113_0x49cf57(0x181));class RequestQueueHandler{static [a113_0x49cf57(0x1bb)];['pendingUploads']=0x0;constructor(){const _0x56a975=a113_0x49cf57,_0xad31f2={};_0xad31f2[_0x56a975(0x164)]='1|4|2|5|3|0|6',_0xad31f2[_0x56a975(0x161)]='LogCreated',_0xad31f2[_0x56a975(0x185)]='CBTSessionCreated',_0xad31f2[_0x56a975(0x1c2)]=_0x56a975(0x1a2),_0xad31f2['SyuFx']=_0x56a975(0x1b0),_0xad31f2[_0x56a975(0x17a)]='HookRunFinished',_0xad31f2['sGLHD']=_0x56a975(0x18f),_0xad31f2[_0x56a975(0x1b6)]='HookRunStarted',_0xad31f2[_0x56a975(0x176)]=_0x56a975(0x17c),_0xad31f2['fKVCH']='upload-attachments',_0xad31f2[_0x56a975(0x1a4)]=_0x56a975(0x19a);const _0x1371b6=_0xad31f2,_0x490e18=_0x1371b6[_0x56a975(0x164)][_0x56a975(0x1ab)]('|');let _0x15c092=0x0;while(!![]){switch(_0x490e18[_0x15c092++]){case'0':this['BATCH_EVENT_TYPES']=[_0x1371b6[_0x56a975(0x161)],_0x1371b6['BZWfa'],_0x1371b6[_0x56a975(0x1c2)],_0x1371b6[_0x56a975(0x18d)],_0x1371b6[_0x56a975(0x17a)],_0x1371b6['sGLHD'],_0x1371b6[_0x56a975(0x1b6)]];continue;case'1':this[_0x56a975(0x192)]=[];continue;case'2':this[_0x56a975(0x179)]=_0x1371b6[_0x56a975(0x176)];continue;case'3':this[_0x56a975(0x178)]=_0x1371b6[_0x56a975(0x180)];continue;case'4':this[_0x56a975(0x1a7)]=![];continue;case'5':this[_0x56a975(0x159)]=_0x1371b6[_0x56a975(0x1a4)];continue;case'6':this[_0x56a975(0x15e)]=null;continue;}break;}}static[a113_0x49cf57(0x19b)](){const _0x5181cd=a113_0x49cf57;return!RequestQueueHandler[_0x5181cd(0x1bb)]&&(RequestQueueHandler['instance']=new RequestQueueHandler()),RequestQueueHandler[_0x5181cd(0x1bb)];}[a113_0x49cf57(0x182)]=()=>{const _0x5e1d4b=a113_0x49cf57;!this[_0x5e1d4b(0x1a7)]&&(this[_0x5e1d4b(0x1a7)]=!![],this[_0x5e1d4b(0x168)]());};[a113_0x49cf57(0x199)]=_0x1a2c79=>{const _0x4315b0=a113_0x49cf57,_0x36e7d4={'piMcY':function(_0x101e50,_0x330179){return _0x101e50===_0x330179;},'FWlLL':_0x4315b0(0x19f),'QYWKR':function(_0x3e616c,_0x12adba){return _0x3e616c>_0x12adba;},'MQVVl':function(_0x54ddcf,_0x1853bb){return _0x54ddcf===_0x1853bb;},'dsDws':'TEST_ATTACHMENT','qQPmb':function(_0x3cc5ac,_0x3d0129){return _0x3cc5ac!==_0x3d0129;},'BSohC':_0x4315b0(0x1a2),'qYDCD':function(_0xa7cf0c,_0x351a70){return _0xa7cf0c(_0x351a70);},'JhnAm':_0x4315b0(0x166)};if(this[_0x4315b0(0x1c5)]['includes'](_0x1a2c79[_0x4315b0(0x19e)])){if(_0x1a2c79['logs']&&_0x1a2c79['logs'][0x0]&&_0x36e7d4['piMcY'](_0x1a2c79[_0x4315b0(0x16f)][0x0]['kind'],_0x36e7d4[_0x4315b0(0x1b3)])){const _0x4c5d3d={};return _0x4c5d3d['shouldProceed']=!![],_0x4c5d3d[_0x4315b0(0x1bc)]=[_0x1a2c79],_0x4c5d3d[_0x4315b0(0x1ad)]=this[_0x4315b0(0x159)],_0x4c5d3d;}if(_0x1a2c79[_0x4315b0(0x16f)]&&_0x36e7d4[_0x4315b0(0x187)](_0x1a2c79[_0x4315b0(0x16f)][_0x4315b0(0x18a)],0x0)&&_0x36e7d4[_0x4315b0(0x16b)](_0x1a2c79['logs'][0x0][_0x4315b0(0x195)],_0x36e7d4[_0x4315b0(0x16d)])&&_0x36e7d4[_0x4315b0(0x175)](_0x1a2c79[_0x4315b0(0x19e)],_0x36e7d4['BSohC'])){const _0x4374a4={};return _0x4374a4['shouldProceed']=!![],_0x4374a4['proceedWithData']=[_0x1a2c79],_0x4374a4[_0x4315b0(0x1ad)]=this[_0x4315b0(0x178)],_0x4374a4;}this[_0x4315b0(0x192)][_0x4315b0(0x1c4)](_0x1a2c79);let _0x30a891=null;const _0x298e7b=this['shouldProceed']();_0x298e7b&&(_0x36e7d4['qYDCD'](trace,_0x36e7d4['JhnAm']),_0x30a891=this['queue']['slice'](0x0,BATCH_SIZE),this[_0x4315b0(0x192)][_0x4315b0(0x1b4)](0x0,BATCH_SIZE),this['resetEventBatchPolling']());const _0x253189={};return _0x253189['shouldProceed']=_0x298e7b,_0x253189[_0x4315b0(0x1bc)]=_0x30a891,_0x253189['proceedWithUrl']=this[_0x4315b0(0x179)],_0x253189;}const _0x3b51cf={};return _0x3b51cf[_0x4315b0(0x163)]=!![],_0x3b51cf;};['shutdown']=async()=>{const _0x12b885=a113_0x49cf57,_0x3a0567={'dJHFo':'REMOVING','XDrNZ':function(_0x2ba4fe,_0xd8e16d){return _0x2ba4fe>_0xd8e16d;},'hPDtQ':_0x12b885(0x183),'PClLe':function(_0x46a880,_0x288069){return _0x46a880>_0x288069;},'XcRLC':function(_0xbf5dff,_0x288660){return _0xbf5dff(_0x288660);}};await this[_0x12b885(0x1a3)](),this['removeEventBatchPolling'](_0x3a0567[_0x12b885(0x17d)]);while(_0x3a0567['XDrNZ'](this['queue'][_0x12b885(0x18a)],0x0)){const _0x21386c=this[_0x12b885(0x192)][_0x12b885(0x15b)](0x0,BATCH_SIZE);this[_0x12b885(0x192)][_0x12b885(0x1b4)](0x0,BATCH_SIZE),await this[_0x12b885(0x19d)](this['eventUrl'],_0x3a0567[_0x12b885(0x18c)],_0x21386c);}_0x3a0567['PClLe'](this['pendingUploads'],0x0)&&_0x3a0567[_0x12b885(0x158)](debug,'Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20'+this[_0x12b885(0x1b5)]);};[a113_0x49cf57(0x19d)]=async(_0x4a4ea3,_0x209611,_0x13fd1f)=>{const _0x5dd3d2=a113_0x49cf57,_0x2cc6bf={'CMGge':function(_0x4ee1bb,_0x194593){return _0x4ee1bb(_0x194593);},'jyNIy':_0x5dd3d2(0x18b),'wjyxR':function(_0x24f637,_0x197fce){return _0x24f637(_0x197fce);},'RJaLj':function(_0x2a1e0e){return _0x2a1e0e();},'vmaid':function(_0x45b0c9,_0x1782af,_0x59e560,_0x472575,_0x18dbd3){return _0x45b0c9(_0x1782af,_0x59e560,_0x472575,_0x18dbd3);},'DKRbF':_0x5dd3d2(0x1c1),'agBXQ':function(_0x238c4b,_0x45e0db){return _0x238c4b(_0x45e0db);},'ZHGAV':function(_0x1617c5,_0x3b9958){return _0x1617c5-_0x3b9958;},'KvJSY':function(_0x567b28,_0x44e0ab){return _0x567b28(_0x44e0ab);}};let _0x13e8ce='';try{_0x13e8ce=_0x13fd1f[_0x5dd3d2(0x16c)](_0x3be073=>'\x27'+_0x3be073[_0x5dd3d2(0x19e)]+'\x27:'+(nestedKeyValue(_0x3be073,[_0x5dd3d2(0x1a0),'uuid'])||nestedKeyValue(_0x3be073,[_0x5dd3d2(0x173),'uuid'])))['join'](','),_0x2cc6bf[_0x5dd3d2(0x18e)](debug,_0x5dd3d2(0x191)+_0x209611+_0x5dd3d2(0x172)+Buffer[_0x5dd3d2(0x1ac)](util[_0x5dd3d2(0x165)]('%j',_0x13fd1f),_0x2cc6bf[_0x5dd3d2(0x1bd)])+_0x5dd3d2(0x1b9)+_0x13e8ce);}catch(_0x366531){_0x2cc6bf[_0x5dd3d2(0x169)](debug,'Exception\x20in\x20logging\x20batch\x20events\x20--\x20'+util[_0x5dd3d2(0x165)](_0x366531)+'}');}const _0x27f78b={'headers':_0x2cc6bf[_0x5dd3d2(0x15c)](getDefaultHeaders)};try{const _0x101b72=await _0x2cc6bf['vmaid'](nodeRequest,_0x2cc6bf[_0x5dd3d2(0x1a9)],_0x4a4ea3,_0x13fd1f,_0x27f78b);if(_0x101b72['data'][_0x5dd3d2(0x17e)]){const _0x1206f2={};_0x1206f2[_0x5dd3d2(0x193)]=_0x101b72['data'][_0x5dd3d2(0x17e)];throw _0x1206f2;}else _0x2cc6bf[_0x5dd3d2(0x167)](debug,_0x209611+_0x5dd3d2(0x1aa)+_0x13e8ce+_0x5dd3d2(0x1a8)+util[_0x5dd3d2(0x165)]('%j',_0x101b72[_0x5dd3d2(0x1c6)])),this[_0x5dd3d2(0x1b5)]=Math[_0x5dd3d2(0x17f)](0x0,_0x2cc6bf['ZHGAV'](this[_0x5dd3d2(0x1b5)],_0x13fd1f[_0x5dd3d2(0x18a)]));}catch(_0x1d7eee){_0x1d7eee[_0x5dd3d2(0x196)]?_0x2cc6bf['KvJSY'](debug,_0x5dd3d2(0x15f)+_0x209611+'\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20'+_0x1d7eee[_0x5dd3d2(0x196)][_0x5dd3d2(0x1b1)]+'\x20'+_0x1d7eee[_0x5dd3d2(0x196)][_0x5dd3d2(0x177)]+'\x20'+util[_0x5dd3d2(0x165)]('%j',_0x1d7eee['response'])):_0x2cc6bf['KvJSY'](debug,_0x5dd3d2(0x15f)+_0x209611+_0x5dd3d2(0x16e)+(_0x1d7eee[_0x5dd3d2(0x193)]||_0x1d7eee)),this[_0x5dd3d2(0x1b5)]=Math['max'](0x0,_0x2cc6bf[_0x5dd3d2(0x188)](this[_0x5dd3d2(0x1b5)],_0x13fd1f['length']));}};[a113_0x49cf57(0x168)]=()=>{const _0x5c9077=a113_0x49cf57,_0x50e851={'mviHT':function(_0x37bc5a,_0x46677e){return _0x37bc5a>_0x46677e;},'qmhYS':function(_0x59ef3c,_0x40272b){return _0x59ef3c(_0x40272b);},'kBodg':'Interval-Queue','uXQyS':function(_0x6e4bff,_0x43a912,_0x564116){return _0x6e4bff(_0x43a912,_0x564116);}};this[_0x5c9077(0x15e)]=_0x50e851[_0x5c9077(0x1ba)](setInterval,async()=>{const _0x4e92da=_0x5c9077;if(_0x50e851[_0x4e92da(0x1c7)](this[_0x4e92da(0x192)]['length'],0x0)){_0x50e851[_0x4e92da(0x1a6)](trace,_0x4e92da(0x1b7)+this[_0x4e92da(0x192)][_0x4e92da(0x18a)]);const _0x56f63f=this[_0x4e92da(0x192)]['slice'](0x0,BATCH_SIZE);this[_0x4e92da(0x192)][_0x4e92da(0x1b4)](0x0,BATCH_SIZE),await this[_0x4e92da(0x19d)](this[_0x4e92da(0x179)],_0x50e851[_0x4e92da(0x1ae)],_0x56f63f),_0x50e851[_0x4e92da(0x1a6)](trace,_0x4e92da(0x15d)+this[_0x4e92da(0x192)][_0x4e92da(0x18a)]);}},BATCH_INTERVAL);};['resetEventBatchPolling']=()=>{const _0x21d167=a113_0x49cf57,_0x2187f4={};_0x2187f4[_0x21d167(0x198)]=_0x21d167(0x17b);const _0x2aa471=_0x2187f4;this['removeEventBatchPolling'](_0x2aa471[_0x21d167(0x198)]),this['startEventBatchPolling']();};[a113_0x49cf57(0x160)]=_0x4e21b6=>{const _0x42f015=a113_0x49cf57,_0x58ac7e={'Grrhp':function(_0x3934a3,_0x56ecc3){return _0x3934a3(_0x56ecc3);},'tulDJ':function(_0x574716,_0x47b1a7){return _0x574716===_0x47b1a7;},'SfwKN':_0x42f015(0x1b2)};this['pollEventBatchInterval']&&(_0x58ac7e[_0x42f015(0x184)](clearInterval,this[_0x42f015(0x15e)]),this[_0x42f015(0x15e)]=null,_0x58ac7e[_0x42f015(0x171)](_0x4e21b6,_0x58ac7e[_0x42f015(0x1bf)])&&(this[_0x42f015(0x1a7)]=![]));};[a113_0x49cf57(0x163)]=()=>{const _0x338236=a113_0x49cf57,_0x4aa25e={};_0x4aa25e[_0x338236(0x16a)]=function(_0x24b896,_0x2d7333){return _0x24b896>=_0x2d7333;};const _0x26abae=_0x4aa25e;return _0x26abae[_0x338236(0x16a)](this[_0x338236(0x192)][_0x338236(0x18a)],BATCH_SIZE);};async[a113_0x49cf57(0x1a3)](_0x4bb37b=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x3d4dbb=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x2fbf8e=a113_0x49cf57,_0x1b4a77={'NCyDq':function(_0x27bda6,_0x52ee18){return _0x27bda6<=_0x52ee18;},'nQiRv':function(_0x38cb6b,_0x231d4a){return _0x38cb6b<=_0x231d4a;},'SGKNf':function(_0x4eb87d,_0x3b4f92){return _0x4eb87d(_0x3b4f92);},'hfRfy':function(_0x5291df,_0xc10ba0){return _0x5291df-_0xc10ba0;}};if(_0x1b4a77[_0x2fbf8e(0x1be)](this[_0x2fbf8e(0x1b5)],0x0)||_0x1b4a77[_0x2fbf8e(0x1a1)](_0x4bb37b,0x0))return;return await _0x1b4a77[_0x2fbf8e(0x1c3)](sleep,_0x3d4dbb),this[_0x2fbf8e(0x1a3)](_0x1b4a77[_0x2fbf8e(0x186)](_0x4bb37b,_0x3d4dbb));}}module[a113_0x49cf57(0x1c0)]=RequestQueueHandler;