const a128_0x38ef8d=a128_0x7189;(function(_0x113949,_0x5546c4){const _0x414b29=a128_0x7189,_0x38078c=_0x113949();while(!![]){try{const _0x2b21ce=-parseInt(_0x414b29(0x1df))/0x1*(parseInt(_0x414b29(0x199))/0x2)+-parseInt(_0x414b29(0x1e7))/0x3*(-parseInt(_0x414b29(0x186))/0x4)+parseInt(_0x414b29(0x180))/0x5+-parseInt(_0x414b29(0x181))/0x6*(-parseInt(_0x414b29(0x1ca))/0x7)+-parseInt(_0x414b29(0x18c))/0x8+parseInt(_0x414b29(0x194))/0x9+parseInt(_0x414b29(0x1b2))/0xa*(-parseInt(_0x414b29(0x184))/0xb);if(_0x2b21ce===_0x5546c4)break;else _0x38078c['push'](_0x38078c['shift']());}catch(_0xe7b815){_0x38078c['push'](_0x38078c['shift']());}}}(a128_0x2751,0xae5b6));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a128_0x38ef8d(0x1ae)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a128_0x38ef8d(0x1a4)),{nestedKeyValue}=require(a128_0x38ef8d(0x1c9)),util=require(a128_0x38ef8d(0x1c3)),constants=require(a128_0x38ef8d(0x175));class RequestQueueHandler{static [a128_0x38ef8d(0x17c)];['pendingUploads']=0x0;constructor(){const _0x1dac47=a128_0x38ef8d,_0x38d557={};_0x38d557[_0x1dac47(0x19e)]=_0x1dac47(0x17a),_0x38d557[_0x1dac47(0x178)]=_0x1dac47(0x1d7),_0x38d557[_0x1dac47(0x1d5)]=_0x1dac47(0x1d4),_0x38d557['Oxtby']=_0x1dac47(0x177),_0x38d557[_0x1dac47(0x193)]=_0x1dac47(0x1a7),_0x38d557[_0x1dac47(0x1a6)]='TestRunSkipped',_0x38d557[_0x1dac47(0x18d)]=_0x1dac47(0x1cd),_0x38d557[_0x1dac47(0x1ad)]=_0x1dac47(0x1dc),_0x38d557['hosDl']=_0x1dac47(0x1a3),_0x38d557[_0x1dac47(0x1dd)]=_0x1dac47(0x1ce),_0x38d557['nsuJO']='api/v1/screenshots';const _0x5e3ff7=_0x38d557,_0x5e3ea4=_0x5e3ff7['HMjFJ'][_0x1dac47(0x1e4)]('|');let _0x2e1929=0x0;while(!![]){switch(_0x5e3ea4[_0x2e1929++]){case'0':this[_0x1dac47(0x1c0)]=_0x5e3ff7[_0x1dac47(0x178)];continue;case'1':this[_0x1dac47(0x1b7)]=null;continue;case'2':this[_0x1dac47(0x1bf)]=[_0x5e3ff7[_0x1dac47(0x1d5)],_0x5e3ff7[_0x1dac47(0x1d8)],_0x5e3ff7['GbNrh'],_0x5e3ff7[_0x1dac47(0x1a6)],_0x5e3ff7['vLIeF'],_0x5e3ff7[_0x1dac47(0x1ad)],_0x5e3ff7[_0x1dac47(0x174)]];continue;case'3':this['started']=![];continue;case'4':this['eventUrl']=_0x5e3ff7[_0x1dac47(0x1dd)];continue;case'5':this['screenshotEventUrl']=_0x5e3ff7[_0x1dac47(0x1e8)];continue;case'6':this['queue']=[];continue;}break;}}static['getInstance'](){const _0x20ecb5=a128_0x38ef8d;return!RequestQueueHandler[_0x20ecb5(0x17c)]&&(RequestQueueHandler[_0x20ecb5(0x17c)]=new RequestQueueHandler()),RequestQueueHandler[_0x20ecb5(0x17c)];}['start']=()=>{const _0x10f92e=a128_0x38ef8d;!this[_0x10f92e(0x1e2)]&&(this['started']=!![],this[_0x10f92e(0x1a5)]());};[a128_0x38ef8d(0x1b5)]=_0x11e96d=>{const _0x496d7c=a128_0x38ef8d,_0x683c25={'fjCFg':function(_0x15413e,_0x13176f){return _0x15413e===_0x13176f;},'eYTBd':'TEST_SCREENSHOT','eJvIy':function(_0x4d5f59,_0x1a5e4c){return _0x4d5f59>_0x1a5e4c;},'uRlSe':function(_0x50809b,_0x55f708){return _0x50809b===_0x55f708;},'jGQxd':'TEST_ATTACHMENT','igKqB':function(_0x2c0ba6,_0x413861){return _0x2c0ba6!==_0x413861;},'UakZg':'TestRunFinished','FyeEK':function(_0x36d86e,_0x5274e2){return _0x36d86e(_0x5274e2);},'mWqbl':_0x496d7c(0x17f)};if(this[_0x496d7c(0x1bf)][_0x496d7c(0x1a8)](_0x11e96d['event_type'])){if(_0x11e96d['logs']&&_0x11e96d['logs'][0x0]&&_0x683c25[_0x496d7c(0x1a0)](_0x11e96d['logs'][0x0][_0x496d7c(0x1c2)],_0x683c25['eYTBd'])){const _0x50a69e={};return _0x50a69e[_0x496d7c(0x1e0)]=!![],_0x50a69e['proceedWithData']=[_0x11e96d],_0x50a69e[_0x496d7c(0x19c)]=this[_0x496d7c(0x1bd)],_0x50a69e;}if(_0x11e96d[_0x496d7c(0x1c1)]&&_0x683c25[_0x496d7c(0x1a1)](_0x11e96d[_0x496d7c(0x1c1)][_0x496d7c(0x1cb)],0x0)&&_0x683c25[_0x496d7c(0x1b0)](_0x11e96d[_0x496d7c(0x1c1)][0x0][_0x496d7c(0x1c2)],_0x683c25[_0x496d7c(0x1aa)])&&_0x683c25[_0x496d7c(0x1cc)](_0x11e96d[_0x496d7c(0x1ac)],_0x683c25[_0x496d7c(0x1e6)])){const _0x5874c2={};return _0x5874c2[_0x496d7c(0x1e0)]=!![],_0x5874c2[_0x496d7c(0x189)]=[_0x11e96d],_0x5874c2['proceedWithUrl']=this['uploadAttachmentUrl'],_0x5874c2;}this[_0x496d7c(0x1b6)]['push'](_0x11e96d);let _0x48b076=null;const _0x1327bf=this[_0x496d7c(0x1e0)]();_0x1327bf&&(_0x683c25['FyeEK'](trace,_0x683c25['mWqbl']),_0x48b076=this['queue'][_0x496d7c(0x173)](0x0,BATCH_SIZE),this['queue']['splice'](0x0,BATCH_SIZE),this['resetEventBatchPolling']());const _0x5bb5d1={};return _0x5bb5d1[_0x496d7c(0x1e0)]=_0x1327bf,_0x5bb5d1['proceedWithData']=_0x48b076,_0x5bb5d1['proceedWithUrl']=this[_0x496d7c(0x190)],_0x5bb5d1;}const _0x368444={};return _0x368444[_0x496d7c(0x1e0)]=!![],_0x368444;};[a128_0x38ef8d(0x18e)]=async()=>{const _0x3cfb69=a128_0x38ef8d,_0x2dd155={'BBomx':_0x3cfb69(0x1c5),'MZjIr':function(_0x2efc60,_0x47f5b0){return _0x2efc60>_0x47f5b0;},'QinId':'Shutdown-Queue','vhNYg':function(_0x91d8e,_0x2bda52){return _0x91d8e(_0x2bda52);}};await this[_0x3cfb69(0x195)](),this[_0x3cfb69(0x191)](_0x2dd155[_0x3cfb69(0x1d9)]);while(_0x2dd155[_0x3cfb69(0x18b)](this[_0x3cfb69(0x1b6)][_0x3cfb69(0x1cb)],0x0)){const _0x46f869=this[_0x3cfb69(0x1b6)]['slice'](0x0,BATCH_SIZE);this[_0x3cfb69(0x1b6)]['splice'](0x0,BATCH_SIZE),await this[_0x3cfb69(0x188)](this['eventUrl'],_0x2dd155[_0x3cfb69(0x1ba)],_0x46f869);}_0x2dd155[_0x3cfb69(0x18b)](this[_0x3cfb69(0x1e9)],0x0)&&_0x2dd155[_0x3cfb69(0x19f)](debug,_0x3cfb69(0x1d6)+this[_0x3cfb69(0x1e9)]);};[a128_0x38ef8d(0x188)]=async(_0x160c91,_0x54c46f,_0x37e65d)=>{const _0x4e75b1=a128_0x38ef8d,_0x5c2037={'WOFSZ':function(_0x2be523,_0x3d6db9){return _0x2be523(_0x3d6db9);},'ewVSh':_0x4e75b1(0x1c4),'IPqRw':function(_0x217cb2){return _0x217cb2();},'ctElH':function(_0x28d556,_0x104ccc,_0x21684f,_0x4db39,_0x35a7d1){return _0x28d556(_0x104ccc,_0x21684f,_0x4db39,_0x35a7d1);},'pZvHF':_0x4e75b1(0x1c6),'huMmg':function(_0x313b8e,_0x4fceab){return _0x313b8e-_0x4fceab;},'OCvfs':function(_0xf4a213,_0x2c7f4e){return _0xf4a213(_0x2c7f4e);},'YZkmJ':function(_0x20ef2f,_0x55605a){return _0x20ef2f(_0x55605a);}};let _0x2986e='';try{_0x2986e=_0x37e65d[_0x4e75b1(0x1b1)](_0x3b96b3=>'\x27'+_0x3b96b3[_0x4e75b1(0x1ac)]+'\x27:'+(nestedKeyValue(_0x3b96b3,[_0x4e75b1(0x198),_0x4e75b1(0x19d)])||nestedKeyValue(_0x3b96b3,[_0x4e75b1(0x1ab),_0x4e75b1(0x19d)])))[_0x4e75b1(0x1bb)](','),_0x5c2037[_0x4e75b1(0x187)](debug,_0x4e75b1(0x1b3)+_0x54c46f+_0x4e75b1(0x1da)+Buffer['byteLength'](util[_0x4e75b1(0x19b)]('%j',_0x37e65d),_0x5c2037[_0x4e75b1(0x18a)])+_0x4e75b1(0x1af)+_0x2986e);}catch(_0x112aaf){_0x5c2037[_0x4e75b1(0x187)](debug,_0x4e75b1(0x17b)+util[_0x4e75b1(0x19b)](_0x112aaf)+'}');}const _0x5220fd={'headers':_0x5c2037['IPqRw'](getDefaultHeaders)};try{const _0x2d95f4=await _0x5c2037[_0x4e75b1(0x192)](nodeRequest,_0x5c2037[_0x4e75b1(0x1d2)],_0x160c91,_0x37e65d,_0x5220fd);if(_0x2d95f4[_0x4e75b1(0x1cf)]['error']){const _0x295ad1={};_0x295ad1[_0x4e75b1(0x1d0)]=_0x2d95f4[_0x4e75b1(0x1cf)][_0x4e75b1(0x1de)];throw _0x295ad1;}else _0x5c2037[_0x4e75b1(0x187)](debug,_0x54c46f+_0x4e75b1(0x17d)+_0x2986e+_0x4e75b1(0x1a9)+util[_0x4e75b1(0x19b)]('%j',_0x2d95f4[_0x4e75b1(0x1cf)])),this['pendingUploads']=Math[_0x4e75b1(0x1c8)](0x0,_0x5c2037[_0x4e75b1(0x1be)](this[_0x4e75b1(0x1e9)],_0x37e65d[_0x4e75b1(0x1cb)]));}catch(_0x510f76){_0x510f76[_0x4e75b1(0x1e1)]?_0x5c2037['OCvfs'](debug,_0x4e75b1(0x1a2)+_0x54c46f+_0x4e75b1(0x185)+constants[_0x4e75b1(0x17e)]+_0x4e75b1(0x19a)+_0x510f76[_0x4e75b1(0x1e1)][_0x4e75b1(0x196)]+'\x20'+_0x510f76['response']['statusText']+'\x20'+util[_0x4e75b1(0x19b)]('%j',_0x510f76[_0x4e75b1(0x1e1)])):_0x5c2037[_0x4e75b1(0x176)](debug,_0x4e75b1(0x1a2)+_0x54c46f+'\x20REQUEST\x20TO\x20'+constants['TEST_REPORTING_ANALYTICS']+_0x4e75b1(0x19a)+(_0x510f76[_0x4e75b1(0x1d0)]||_0x510f76)),this[_0x4e75b1(0x1e9)]=Math[_0x4e75b1(0x1c8)](0x0,_0x5c2037['huMmg'](this[_0x4e75b1(0x1e9)],_0x37e65d[_0x4e75b1(0x1cb)]));}};[a128_0x38ef8d(0x1a5)]=()=>{const _0x54ba9b=a128_0x38ef8d,_0x855e89={'BbewA':function(_0x265ee6,_0x3dfa40){return _0x265ee6>_0x3dfa40;},'UwxBB':function(_0x1b9e6a,_0x3e9045){return _0x1b9e6a(_0x3e9045);},'navuz':'Interval-Queue','pOQmz':function(_0x16ced2,_0x1bf35a){return _0x16ced2(_0x1bf35a);},'etMjK':function(_0x4b6800,_0x3c3f68,_0x41c606){return _0x4b6800(_0x3c3f68,_0x41c606);}};this[_0x54ba9b(0x1b7)]=_0x855e89[_0x54ba9b(0x1d3)](setInterval,async()=>{const _0x34fdcb=_0x54ba9b;if(_0x855e89[_0x34fdcb(0x183)](this[_0x34fdcb(0x1b6)][_0x34fdcb(0x1cb)],0x0)){_0x855e89['UwxBB'](trace,'Processing\x20events.\x20Queue\x20Length\x20-\x20'+this['queue'][_0x34fdcb(0x1cb)]);const _0x272d72=this[_0x34fdcb(0x1b6)][_0x34fdcb(0x173)](0x0,BATCH_SIZE);this[_0x34fdcb(0x1b6)]['splice'](0x0,BATCH_SIZE),await this[_0x34fdcb(0x188)](this[_0x34fdcb(0x190)],_0x855e89[_0x34fdcb(0x182)],_0x272d72),_0x855e89[_0x34fdcb(0x197)](trace,_0x34fdcb(0x1e3)+this['queue'][_0x34fdcb(0x1cb)]);}},BATCH_INTERVAL);};[a128_0x38ef8d(0x1d1)]=()=>{const _0x4bce60=a128_0x38ef8d,_0x528090={};_0x528090[_0x4bce60(0x1b4)]=_0x4bce60(0x179);const _0x44dd4b=_0x528090;this[_0x4bce60(0x191)](_0x44dd4b[_0x4bce60(0x1b4)]),this[_0x4bce60(0x1a5)]();};['removeEventBatchPolling']=_0x57643e=>{const _0x3084a4=a128_0x38ef8d,_0x12b4ef={'imSRy':function(_0x22bb8d,_0x4f72df){return _0x22bb8d(_0x4f72df);},'LcQoy':function(_0x3bc4ab,_0x246087){return _0x3bc4ab===_0x246087;},'vwDOV':_0x3084a4(0x1c5)};this[_0x3084a4(0x1b7)]&&(_0x12b4ef[_0x3084a4(0x1db)](clearInterval,this[_0x3084a4(0x1b7)]),this[_0x3084a4(0x1b7)]=null,_0x12b4ef[_0x3084a4(0x1b8)](_0x57643e,_0x12b4ef[_0x3084a4(0x18f)])&&(this[_0x3084a4(0x1e2)]=![]));};[a128_0x38ef8d(0x1e0)]=()=>{const _0x2c4588=a128_0x38ef8d,_0xe94acd={};_0xe94acd[_0x2c4588(0x1bc)]=function(_0xd12c8a,_0x4f381a){return _0xd12c8a>=_0x4f381a;};const _0xacf946=_0xe94acd;return _0xacf946[_0x2c4588(0x1bc)](this[_0x2c4588(0x1b6)][_0x2c4588(0x1cb)],BATCH_SIZE);};async[a128_0x38ef8d(0x195)](_0x2d0a32=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x3ca645=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x3df846=a128_0x38ef8d,_0x2cc2dc={'IIkVi':function(_0x48691c,_0x4989ce){return _0x48691c<=_0x4989ce;},'JnlCK':function(_0x276250,_0x14ec56){return _0x276250<=_0x14ec56;},'qVbOp':function(_0x42d2c1,_0x474648){return _0x42d2c1(_0x474648);},'qtCYr':function(_0x582c7e,_0xcb3129){return _0x582c7e-_0xcb3129;}};if(_0x2cc2dc[_0x3df846(0x1e5)](this['pendingUploads'],0x0)||_0x2cc2dc[_0x3df846(0x1c7)](_0x2d0a32,0x0))return;return await _0x2cc2dc[_0x3df846(0x1b9)](sleep,_0x3ca645),this[_0x3df846(0x195)](_0x2cc2dc['qtCYr'](_0x2d0a32,_0x3ca645));}}module['exports']=RequestQueueHandler;function a128_0x7189(_0x100858,_0x1b1c27){const _0x275175=a128_0x2751();return a128_0x7189=function(_0x718950,_0x1b7879){_0x718950=_0x718950-0x173;let _0x1cd8df=_0x275175[_0x718950];return _0x1cd8df;},a128_0x7189(_0x100858,_0x1b1c27);}function a128_0x2751(){const _0x1810c0=['Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','upload-attachments','Oxtby','BBomx','.\x20Request\x20Size\x20-\x20','imSRy','TestRunStarted','NklnV','error','2tdlLqO','shouldProceed','response','started','Remaining\x20Queue\x20Length\x20-\x20','split','IIkVi','UakZg','4098GJXxRw','nsuJO','pendingUploads','slice','hosDl','../../bin/utils/constants','YZkmJ','CBTSessionCreated','szkhU','RESETTING','6|3|4|5|0|2|1','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','instance','\x20event\x20successful\x20for\x20events\x20','TEST_REPORTING_ANALYTICS','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','6180335TZdOim','6XNOZyq','navuz','BbewA','1740563HmNHLa','\x20REQUEST\x20TO\x20','20lSEzdk','WOFSZ','batchAndPostEvents','proceedWithData','ewVSh','MZjIr','11091584tIvctX','vLIeF','shutdown','vwDOV','eventUrl','removeEventBatchPolling','ctElH','GbNrh','5226534mUahOw','uploadPending','status','pOQmz','test_run','116174ODJobI','\x20:\x20','format','proceedWithUrl','uuid','HMjFJ','vhNYg','fjCFg','eJvIy','EXCEPTION\x20IN\x20','HookRunStarted','./utils','startEventBatchPolling','MZgRe','TestRunFinished','includes','\x20--\x20','jGQxd','hook_run','event_type','cOleD','./constants','\x20bytes.\x20Events\x20are\x20','uRlSe','map','40RWNpld','Processing\x20batch\x20events\x20for\x20','cwXcN','add','queue','pollEventBatchInterval','LcQoy','qVbOp','QinId','join','ELUri','screenshotEventUrl','huMmg','BATCH_EVENT_TYPES','uploadAttachmentUrl','logs','kind','util','utf8','REMOVING','POST','JnlCK','max','../helper','7182679CQXwtq','length','igKqB','HookRunFinished','api/v1/batch','data','message','resetEventBatchPolling','pZvHF','etMjK','LogCreated','FutfI'];a128_0x2751=function(){return _0x1810c0;};return a128_0x2751();}