function a86_0x1c76(_0x385fe6,_0x1663c4){const _0x350529=a86_0x3505();return a86_0x1c76=function(_0x1c7632,_0x57d74d){_0x1c7632=_0x1c7632-0xe4;let _0x3bbdc5=_0x350529[_0x1c7632];return _0x3bbdc5;},a86_0x1c76(_0x385fe6,_0x1663c4);}const a86_0x5d9b8c=a86_0x1c76;function a86_0x3505(){const _0x5dbd78=['ymboN','788578wuBcoR','BrSUr','Shutdown-Queue','QBXXS','upload-attachments','format','batchAndPostEvents','pcKdv','OFMkU','map','.\x20Request\x20Size\x20-\x20','splice','response','pqGVq','LUpgI','max','ahhtN','test_run','NmkkZ','status','data','proceedWithData','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','\x20bytes.\x20Events\x20are\x20','gBZlR','51166BBsNQC','TKgij','removeEventBatchPolling','event_type','logs','slice','YVqDD','pendingUploads','SzgeA','length','BATCH_EVENT_TYPES','Processing\x20events.\x20Queue\x20Length\x20-\x20','REMOVING','BbNKe','queue','kFfUb','split','fXzuV','100914OddIGF','UQyaG','ulBKY','3|2|6|4|1|5|0','ktWMM','AiYen','TestRunFinished','shouldProceed','TEST_ATTACHMENT','TEST_SCREENSHOT','error','LogCreated','instance','3111543hsfJUR','add','join','\x20--\x20','12vrlxKM','mvkCj','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','gGrEY','./constants','cumim','hook_run','pollEventBatchInterval','WVqkM','uploadAttachmentUrl','PSsJK','start','started','5zhfysj','proceedWithUrl','CeNDz','PWInj','screenshotEventUrl','164484jzxkAa','SQvEQ','Processing\x20batch\x20events\x20for\x20','VFZKI','HookRunStarted','uploadPending','message','api/v1/batch','BbrPD','Pbwvg','includes','392996xNAejw','../helper','GZkpr','eventUrl','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','XCEfj','kind','resetEventBatchPolling','YAbAT','CLVdc','lCear','HtYFH','IDtXB','StafY','byteLength','HbTkP','1617280YrDTRp','exports'];a86_0x3505=function(){return _0x5dbd78;};return a86_0x3505();}(function(_0x33b7c2,_0x2070dd){const _0x44d705=a86_0x1c76,_0x38282f=_0x33b7c2();while(!![]){try{const _0x4da2f7=parseInt(_0x44d705(0xe6))/0x1+-parseInt(_0x44d705(0xf8))/0x2+-parseInt(_0x44d705(0x11b))/0x3+-parseInt(_0x44d705(0x126))/0x4*(-parseInt(_0x44d705(0x116))/0x5)+parseInt(_0x44d705(0x109))/0x6*(parseInt(_0x44d705(0x139))/0x7)+parseInt(_0x44d705(0x136))/0x8+-parseInt(_0x44d705(0x105))/0x9;if(_0x4da2f7===_0x2070dd)break;else _0x38282f['push'](_0x38282f['shift']());}catch(_0x2d12b9){_0x38282f['push'](_0x38282f['shift']());}}}(a86_0x3505,0x1ebaf));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a86_0x5d9b8c(0x10d)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require('./utils'),{nestedKeyValue}=require(a86_0x5d9b8c(0x127)),util=require('util');class RequestQueueHandler{static [a86_0x5d9b8c(0x104)];[a86_0x5d9b8c(0xed)]=0x0;constructor(){const _0x2d5995=a86_0x5d9b8c,_0x1a7705={};_0x1a7705[_0x2d5995(0x119)]=_0x2d5995(0xfb),_0x1a7705[_0x2d5995(0x123)]=_0x2d5995(0x13d),_0x1a7705[_0x2d5995(0xe7)]='api/v1/screenshots',_0x1a7705[_0x2d5995(0xf9)]=_0x2d5995(0x103),_0x1a7705[_0x2d5995(0xe5)]='CBTSessionCreated',_0x1a7705[_0x2d5995(0x12e)]='TestRunFinished',_0x1a7705[_0x2d5995(0x13a)]='TestRunSkipped',_0x1a7705['szftl']='HookRunFinished',_0x1a7705['VxStl']='TestRunStarted',_0x1a7705[_0x2d5995(0xfa)]=_0x2d5995(0x11f),_0x1a7705[_0x2d5995(0x10c)]=_0x2d5995(0x122);const _0x329efb=_0x1a7705,_0x23e317=_0x329efb[_0x2d5995(0x119)][_0x2d5995(0xf6)]('|');let _0x4e8ffb=0x0;while(!![]){switch(_0x23e317[_0x4e8ffb++]){case'0':this[_0x2d5995(0x110)]=null;continue;case'1':this[_0x2d5995(0x112)]=_0x329efb[_0x2d5995(0x123)];continue;case'2':this['started']=![];continue;case'3':this[_0x2d5995(0xf4)]=[];continue;case'4':this[_0x2d5995(0x11a)]=_0x329efb[_0x2d5995(0xe7)];continue;case'5':this['BATCH_EVENT_TYPES']=[_0x329efb['UQyaG'],_0x329efb[_0x2d5995(0xe5)],_0x329efb[_0x2d5995(0x12e)],_0x329efb[_0x2d5995(0x13a)],_0x329efb['szftl'],_0x329efb['VxStl'],_0x329efb[_0x2d5995(0xfa)]];continue;case'6':this[_0x2d5995(0x129)]=_0x329efb[_0x2d5995(0x10c)];continue;}break;}}static['getInstance'](){const _0x2499c7=a86_0x5d9b8c;return!RequestQueueHandler[_0x2499c7(0x104)]&&(RequestQueueHandler['instance']=new RequestQueueHandler()),RequestQueueHandler[_0x2499c7(0x104)];}[a86_0x5d9b8c(0x114)]=()=>{const _0x29c67c=a86_0x5d9b8c;!this['started']&&(this[_0x29c67c(0x115)]=!![],this['startEventBatchPolling']());};[a86_0x5d9b8c(0x106)]=_0x19746b=>{const _0x2a663d=a86_0x5d9b8c,_0x4bccd7={'ymboN':function(_0xb66192,_0x3bafc1){return _0xb66192===_0x3bafc1;},'fLtau':_0x2a663d(0x101),'CeNDz':function(_0x178e41,_0x17207b){return _0x178e41>_0x17207b;},'pqGVq':_0x2a663d(0x100),'PSsJK':function(_0x55c52f,_0x4d2f6e){return _0x55c52f!==_0x4d2f6e;},'sykCD':_0x2a663d(0xfe),'OFMkU':function(_0x3d8ee2,_0x266507){return _0x3d8ee2(_0x266507);},'VFZKI':'Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..'};if(this[_0x2a663d(0xf0)][_0x2a663d(0x125)](_0x19746b[_0x2a663d(0xe9)])){if(_0x19746b[_0x2a663d(0xea)]&&_0x19746b['logs'][0x0]&&_0x4bccd7[_0x2a663d(0x138)](_0x19746b['logs'][0x0]['kind'],_0x4bccd7['fLtau'])){const _0x3d5418={};return _0x3d5418[_0x2a663d(0xff)]=!![],_0x3d5418[_0x2a663d(0x14e)]=[_0x19746b],_0x3d5418['proceedWithUrl']=this[_0x2a663d(0x11a)],_0x3d5418;}if(_0x19746b[_0x2a663d(0xea)]&&_0x4bccd7[_0x2a663d(0x118)](_0x19746b['logs'][_0x2a663d(0xef)],0x0)&&_0x4bccd7[_0x2a663d(0x138)](_0x19746b[_0x2a663d(0xea)][0x0][_0x2a663d(0x12c)],_0x4bccd7[_0x2a663d(0x146)])&&_0x4bccd7[_0x2a663d(0x113)](_0x19746b[_0x2a663d(0xe9)],_0x4bccd7['sykCD'])){const _0x3ddd48={};return _0x3ddd48[_0x2a663d(0xff)]=!![],_0x3ddd48[_0x2a663d(0x14e)]=[_0x19746b],_0x3ddd48[_0x2a663d(0x117)]=this[_0x2a663d(0x112)],_0x3ddd48;}this[_0x2a663d(0xf4)]['push'](_0x19746b);let _0x503a50=null;const _0x264639=this[_0x2a663d(0xff)]();_0x264639&&(_0x4bccd7[_0x2a663d(0x141)](trace,_0x4bccd7[_0x2a663d(0x11e)]),_0x503a50=this[_0x2a663d(0xf4)]['slice'](0x0,BATCH_SIZE),this[_0x2a663d(0xf4)][_0x2a663d(0x144)](0x0,BATCH_SIZE),this[_0x2a663d(0x12d)]());const _0x23f102={};return _0x23f102[_0x2a663d(0xff)]=_0x264639,_0x23f102[_0x2a663d(0x14e)]=_0x503a50,_0x23f102['proceedWithUrl']=this[_0x2a663d(0x129)],_0x23f102;}const _0x28bb08={};return _0x28bb08['shouldProceed']=!![],_0x28bb08;};['shutdown']=async()=>{const _0x26506b=a86_0x5d9b8c,_0x895b0f={'WVqkM':_0x26506b(0xf2),'kJZkh':function(_0x9abf2a,_0x36bae8){return _0x9abf2a>_0x36bae8;},'HtYFH':_0x26506b(0x13b),'LUpgI':function(_0x194f7d,_0x2297ae){return _0x194f7d>_0x2297ae;},'cumim':function(_0x15906a,_0x5ad315){return _0x15906a(_0x5ad315);}};await this[_0x26506b(0x120)](),this['removeEventBatchPolling'](_0x895b0f[_0x26506b(0x111)]);while(_0x895b0f['kJZkh'](this[_0x26506b(0xf4)][_0x26506b(0xef)],0x0)){const _0x1f837e=this[_0x26506b(0xf4)][_0x26506b(0xeb)](0x0,BATCH_SIZE);this[_0x26506b(0xf4)][_0x26506b(0x144)](0x0,BATCH_SIZE),await this[_0x26506b(0x13f)](this[_0x26506b(0x129)],_0x895b0f[_0x26506b(0x131)],_0x1f837e);}_0x895b0f[_0x26506b(0x147)](this[_0x26506b(0xed)],0x0)&&_0x895b0f[_0x26506b(0x10e)](debug,_0x26506b(0x12a)+this[_0x26506b(0xed)]);};[a86_0x5d9b8c(0x13f)]=async(_0x6c12d5,_0x3d02a9,_0xf2c990)=>{const _0x2ac262=a86_0x5d9b8c,_0x5e5f93={'GZkpr':function(_0x552387,_0x5196f4){return _0x552387(_0x5196f4);},'kFfUb':'utf8','VgfIV':function(_0x5285a0,_0x58a1dd){return _0x5285a0(_0x58a1dd);},'QBXXS':function(_0x1f4340){return _0x1f4340();},'ktWMM':function(_0x33ff95,_0x19e614,_0x1d5803,_0x1287cf,_0x4e14c0){return _0x33ff95(_0x19e614,_0x1d5803,_0x1287cf,_0x4e14c0);},'CLVdc':'POST','mvkCj':function(_0x512101,_0x16b53f){return _0x512101(_0x16b53f);},'HbTkP':function(_0xa05bf1,_0x167153){return _0xa05bf1-_0x167153;},'YVqDD':function(_0xc44cf6,_0x8edbe0){return _0xc44cf6(_0x8edbe0);},'Pbwvg':function(_0x218b7c,_0x2555bb){return _0x218b7c(_0x2555bb);}};let _0x56556a='';try{_0x56556a=_0xf2c990[_0x2ac262(0x142)](_0x58b9ac=>'\x27'+_0x58b9ac[_0x2ac262(0xe9)]+'\x27:'+(nestedKeyValue(_0x58b9ac,[_0x2ac262(0x14a),'uuid'])||nestedKeyValue(_0x58b9ac,[_0x2ac262(0x10f),'uuid'])))[_0x2ac262(0x107)](','),_0x5e5f93[_0x2ac262(0x128)](debug,_0x2ac262(0x11d)+_0x3d02a9+_0x2ac262(0x143)+Buffer[_0x2ac262(0x134)](util[_0x2ac262(0x13e)]('%j',_0xf2c990),_0x5e5f93[_0x2ac262(0xf5)])+_0x2ac262(0xe4)+_0x56556a);}catch(_0x5e6291){_0x5e5f93['VgfIV'](debug,_0x2ac262(0x10b)+util[_0x2ac262(0x13e)](_0x5e6291)+'}');}const _0x3d666f={'headers':_0x5e5f93[_0x2ac262(0x13c)](getDefaultHeaders)};try{const _0x3a58f5=await _0x5e5f93[_0x2ac262(0xfc)](nodeRequest,_0x5e5f93[_0x2ac262(0x12f)],_0x6c12d5,_0xf2c990,_0x3d666f);if(_0x3a58f5[_0x2ac262(0x14d)]['error']){const _0x1d4f2f={};_0x1d4f2f[_0x2ac262(0x121)]=_0x3a58f5[_0x2ac262(0x14d)][_0x2ac262(0x102)];throw _0x1d4f2f;}else _0x5e5f93[_0x2ac262(0x10a)](debug,_0x3d02a9+'\x20event\x20successful\x20for\x20events\x20'+_0x56556a+_0x2ac262(0x108)+util['format']('%j',_0x3a58f5['data'])),this[_0x2ac262(0xed)]=Math[_0x2ac262(0x148)](0x0,_0x5e5f93[_0x2ac262(0x135)](this[_0x2ac262(0xed)],_0xf2c990[_0x2ac262(0xef)]));}catch(_0x4974c3){_0x4974c3['response']?_0x5e5f93[_0x2ac262(0xec)](debug,'EXCEPTION\x20IN\x20'+_0x3d02a9+_0x2ac262(0x14f)+_0x4974c3[_0x2ac262(0x145)][_0x2ac262(0x14c)]+'\x20'+_0x4974c3['response']['statusText']+'\x20'+util[_0x2ac262(0x13e)]('%j',_0x4974c3[_0x2ac262(0x145)])):_0x5e5f93[_0x2ac262(0x124)](debug,'EXCEPTION\x20IN\x20'+_0x3d02a9+_0x2ac262(0x14f)+(_0x4974c3['message']||_0x4974c3)),this[_0x2ac262(0xed)]=Math[_0x2ac262(0x148)](0x0,_0x5e5f93[_0x2ac262(0x135)](this['pendingUploads'],_0xf2c990[_0x2ac262(0xef)]));}};['startEventBatchPolling']=()=>{const _0x5c5ff3=a86_0x5d9b8c,_0xfdda14={'XCEfj':function(_0x22bc8d,_0x16dbd0){return _0x22bc8d>_0x16dbd0;},'SQvEQ':function(_0x2b8d26,_0x5d288a){return _0x2b8d26(_0x5d288a);},'lCear':'Interval-Queue','IDtXB':function(_0xd2a5f5,_0x45585d){return _0xd2a5f5(_0x45585d);},'pcKdv':function(_0x438cfa,_0x23ce69,_0x15c11e){return _0x438cfa(_0x23ce69,_0x15c11e);}};this[_0x5c5ff3(0x110)]=_0xfdda14[_0x5c5ff3(0x140)](setInterval,async()=>{const _0x385cb5=_0x5c5ff3;if(_0xfdda14[_0x385cb5(0x12b)](this[_0x385cb5(0xf4)]['length'],0x0)){_0xfdda14[_0x385cb5(0x11c)](trace,_0x385cb5(0xf1)+this[_0x385cb5(0xf4)]['length']);const _0x48569a=this[_0x385cb5(0xf4)][_0x385cb5(0xeb)](0x0,BATCH_SIZE);this[_0x385cb5(0xf4)][_0x385cb5(0x144)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this['eventUrl'],_0xfdda14[_0x385cb5(0x130)],_0x48569a),_0xfdda14[_0x385cb5(0x132)](trace,'Remaining\x20Queue\x20Length\x20-\x20'+this[_0x385cb5(0xf4)][_0x385cb5(0xef)]);}},BATCH_INTERVAL);};[a86_0x5d9b8c(0x12d)]=()=>{const _0x47cdb2=a86_0x5d9b8c,_0x61af8={};_0x61af8[_0x47cdb2(0xee)]='RESETTING';const _0x77f9c6=_0x61af8;this['removeEventBatchPolling'](_0x77f9c6[_0x47cdb2(0xee)]),this['startEventBatchPolling']();};[a86_0x5d9b8c(0xe8)]=_0x344e58=>{const _0x3cfcca=a86_0x5d9b8c,_0x4ea183={'BbNKe':function(_0x24fa31,_0x2d06fb){return _0x24fa31(_0x2d06fb);},'fbWcL':function(_0x338f87,_0x12e75c){return _0x338f87===_0x12e75c;},'fXzuV':_0x3cfcca(0xf2)};this[_0x3cfcca(0x110)]&&(_0x4ea183[_0x3cfcca(0xf3)](clearInterval,this[_0x3cfcca(0x110)]),this[_0x3cfcca(0x110)]=null,_0x4ea183['fbWcL'](_0x344e58,_0x4ea183[_0x3cfcca(0xf7)])&&(this[_0x3cfcca(0x115)]=![]));};[a86_0x5d9b8c(0xff)]=()=>{const _0x44fe45=a86_0x5d9b8c,_0x3e55d7={};_0x3e55d7[_0x44fe45(0x149)]=function(_0x10c024,_0x15df1b){return _0x10c024>=_0x15df1b;};const _0xde2c5=_0x3e55d7;return _0xde2c5[_0x44fe45(0x149)](this[_0x44fe45(0xf4)][_0x44fe45(0xef)],BATCH_SIZE);};async[a86_0x5d9b8c(0x120)](_0x366470=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x53de4a=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x301ecf=a86_0x5d9b8c,_0x56b44f={'AiYen':function(_0x5e263e,_0x35a7fa){return _0x5e263e<=_0x35a7fa;},'StafY':function(_0x4038c7,_0x323692){return _0x4038c7(_0x323692);},'NmkkZ':function(_0x30ab69,_0x55eefe){return _0x30ab69-_0x55eefe;}};if(_0x56b44f[_0x301ecf(0xfd)](this['pendingUploads'],0x0)||_0x56b44f['AiYen'](_0x366470,0x0))return;return await _0x56b44f[_0x301ecf(0x133)](sleep,_0x53de4a),this[_0x301ecf(0x120)](_0x56b44f[_0x301ecf(0x14b)](_0x366470,_0x53de4a));}}module[a86_0x5d9b8c(0x137)]=RequestQueueHandler;