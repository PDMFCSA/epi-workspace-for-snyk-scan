const a85_0x22a140=a85_0xe068;function a85_0x3a8f(){const _0x2fdd17=['lpzwh','push','IXtcb','api/v1/screenshots','REMOVING','22KILlQD','message','1245200xEkoGu','18EStVCI','3|6|2|1|5|0|4','LMksN','resetEventBatchPolling','proceedWithData','xCGMw','QmplD','RESETTING','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','FwZlQ','BATCH_EVENT_TYPES','splice','2486460EZOMer','data','RiWSf','../helper','format','TestRunFinished','lFaNO','sstaT','queue','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','wbtqL','zTgcJ','TEST_ATTACHMENT','pendingUploads','instance','OcnfB','mBOxu','event_type','eventUrl','\x20bytes.\x20Events\x20are\x20','error','getInstance','35yWbbwL','NFzxG','includes','util','upload-attachments','POST','tePOe','EXCEPTION\x20IN\x20','DRAal','191910PjZTtH','split','NhIFU','HACIJ','pollEventBatchInterval','JCRFz','UUfuR','uploadPending','started','BgzkO','cWGvz','21514872lVQVkr','length','XbnkF','max','1130860ZzFzJX','shutdown','uploadAttachmentUrl','\x20--\x20','AkJdu','1056KdSLdo','shouldProceed','1558yIMxoD','.\x20Request\x20Size\x20-\x20','eCWsP','logs','AnsJf','pVWvB','test_run','HookRunFinished','byteLength','kqhFu','HookRunStarted','slice','wxFXi','removeEventBatchPolling','TestRunStarted','Processing\x20batch\x20events\x20for\x20','42HtvIPS','screenshotEventUrl','TestRunSkipped','nMKdI','kind','764528yDhjDf','AsAhw','Processing\x20events.\x20Queue\x20Length\x20-\x20','./constants','uGcxa','response','LogCreated','startEventBatchPolling','TEST_SCREENSHOT','fRYap','uuid','exports','./utils','proceedWithUrl','start','Remaining\x20Queue\x20Length\x20-\x20','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','api/v1/batch','add','map','join','MEBWI','VWOHg','WLdag'];a85_0x3a8f=function(){return _0x2fdd17;};return a85_0x3a8f();}(function(_0x43df94,_0x395bab){const _0x1b7839=a85_0xe068,_0x1a1cde=_0x43df94();while(!![]){try{const _0x3a0fbe=-parseInt(_0x1b7839(0x1cb))/0x1+parseInt(_0x1b7839(0x22c))/0x2*(-parseInt(_0x1b7839(0x22a))/0x3)+-parseInt(_0x1b7839(0x1f7))/0x4+-parseInt(_0x1b7839(0x20d))/0x5*(parseInt(_0x1b7839(0x216))/0x6)+-parseInt(_0x1b7839(0x1c6))/0x7*(parseInt(_0x1b7839(0x1ea))/0x8)+parseInt(_0x1b7839(0x1eb))/0x9*(-parseInt(_0x1b7839(0x225))/0xa)+-parseInt(_0x1b7839(0x1e8))/0xb*(-parseInt(_0x1b7839(0x221))/0xc);if(_0x3a0fbe===_0x395bab)break;else _0x1a1cde['push'](_0x1a1cde['shift']());}catch(_0x50844f){_0x1a1cde['push'](_0x1a1cde['shift']());}}}(a85_0x3a8f,0x84336));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a85_0x22a140(0x1ce)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a85_0x22a140(0x1d7)),{nestedKeyValue}=require(a85_0x22a140(0x1fa)),util=require(a85_0x22a140(0x210));function a85_0xe068(_0x2682c9,_0x246c99){const _0x3a8f65=a85_0x3a8f();return a85_0xe068=function(_0xe06834,_0x3aeccf){_0xe06834=_0xe06834-0x1bb;let _0x8385d6=_0x3a8f65[_0xe06834];return _0x8385d6;},a85_0xe068(_0x2682c9,_0x246c99);}class RequestQueueHandler{static [a85_0x22a140(0x205)];['pendingUploads']=0x0;constructor(){const _0x285d01=a85_0x22a140,_0xb536b3={};_0xb536b3[_0x285d01(0x1cc)]=_0x285d01(0x1ec),_0xb536b3[_0x285d01(0x1d4)]=_0x285d01(0x1d1),_0xb536b3[_0x285d01(0x201)]='CBTSessionCreated',_0xb536b3[_0x285d01(0x1f0)]=_0x285d01(0x1fc),_0xb536b3[_0x285d01(0x220)]=_0x285d01(0x1c8),_0xb536b3[_0x285d01(0x22e)]=_0x285d01(0x1bd),_0xb536b3['LMksN']=_0x285d01(0x1c4),_0xb536b3[_0x285d01(0x1cf)]=_0x285d01(0x1c0),_0xb536b3['AnsJf']=_0x285d01(0x1e6),_0xb536b3['UUfuR']=_0x285d01(0x1dc),_0xb536b3[_0x285d01(0x1e1)]=_0x285d01(0x211);const _0x2be8ca=_0xb536b3,_0x24ff84=_0x2be8ca[_0x285d01(0x1cc)][_0x285d01(0x217)]('|');let _0x520a70=0x0;while(!![]){switch(_0x24ff84[_0x520a70++]){case'0':this[_0x285d01(0x1f5)]=[_0x2be8ca[_0x285d01(0x1d4)],_0x2be8ca[_0x285d01(0x201)],_0x2be8ca[_0x285d01(0x1f0)],_0x2be8ca[_0x285d01(0x220)],_0x2be8ca[_0x285d01(0x22e)],_0x2be8ca[_0x285d01(0x1ed)],_0x2be8ca[_0x285d01(0x1cf)]];continue;case'1':this[_0x285d01(0x1c7)]=_0x2be8ca[_0x285d01(0x230)];continue;case'2':this[_0x285d01(0x209)]=_0x2be8ca[_0x285d01(0x21c)];continue;case'3':this['queue']=[];continue;case'4':this[_0x285d01(0x21a)]=null;continue;case'5':this[_0x285d01(0x227)]=_0x2be8ca[_0x285d01(0x1e1)];continue;case'6':this[_0x285d01(0x21e)]=![];continue;}break;}}static[a85_0x22a140(0x20c)](){const _0x391395=a85_0x22a140;return!RequestQueueHandler[_0x391395(0x205)]&&(RequestQueueHandler[_0x391395(0x205)]=new RequestQueueHandler()),RequestQueueHandler['instance'];}[a85_0x22a140(0x1d9)]=()=>{const _0x1fa9fd=a85_0x22a140;!this[_0x1fa9fd(0x21e)]&&(this[_0x1fa9fd(0x21e)]=!![],this['startEventBatchPolling']());};[a85_0x22a140(0x1dd)]=_0xa3ab90=>{const _0x509dcb=a85_0x22a140,_0x37953b={'hIoat':function(_0x3f4250,_0x3f4284){return _0x3f4250===_0x3f4284;},'lpzwh':_0x509dcb(0x1d3),'BgzkO':function(_0x243c5d,_0x2cb524){return _0x243c5d>_0x2cb524;},'pVWvB':_0x509dcb(0x203),'rfECw':function(_0x28e089,_0x3fea59){return _0x28e089!==_0x3fea59;},'FwZlQ':_0x509dcb(0x1fc),'YDalG':function(_0x391592,_0x53e61f){return _0x391592(_0x53e61f);},'kqhFu':_0x509dcb(0x200)};if(this[_0x509dcb(0x1f5)][_0x509dcb(0x20f)](_0xa3ab90['event_type'])){if(_0xa3ab90[_0x509dcb(0x22f)]&&_0xa3ab90['logs'][0x0]&&_0x37953b['hIoat'](_0xa3ab90[_0x509dcb(0x22f)][0x0][_0x509dcb(0x1ca)],_0x37953b[_0x509dcb(0x1e3)])){const _0xaabc2d={};return _0xaabc2d[_0x509dcb(0x22b)]=!![],_0xaabc2d['proceedWithData']=[_0xa3ab90],_0xaabc2d[_0x509dcb(0x1d8)]=this[_0x509dcb(0x1c7)],_0xaabc2d;}if(_0xa3ab90[_0x509dcb(0x22f)]&&_0x37953b[_0x509dcb(0x21f)](_0xa3ab90[_0x509dcb(0x22f)][_0x509dcb(0x222)],0x0)&&_0x37953b['hIoat'](_0xa3ab90[_0x509dcb(0x22f)][0x0][_0x509dcb(0x1ca)],_0x37953b[_0x509dcb(0x1bb)])&&_0x37953b['rfECw'](_0xa3ab90['event_type'],_0x37953b[_0x509dcb(0x1f4)])){const _0x47c5f6={};return _0x47c5f6[_0x509dcb(0x22b)]=!![],_0x47c5f6[_0x509dcb(0x1ef)]=[_0xa3ab90],_0x47c5f6[_0x509dcb(0x1d8)]=this[_0x509dcb(0x227)],_0x47c5f6;}this[_0x509dcb(0x1ff)][_0x509dcb(0x1e4)](_0xa3ab90);let _0x125cc9=null;const _0x400bd9=this['shouldProceed']();_0x400bd9&&(_0x37953b['YDalG'](trace,_0x37953b[_0x509dcb(0x1bf)]),_0x125cc9=this[_0x509dcb(0x1ff)][_0x509dcb(0x1c1)](0x0,BATCH_SIZE),this[_0x509dcb(0x1ff)][_0x509dcb(0x1f6)](0x0,BATCH_SIZE),this[_0x509dcb(0x1ee)]());const _0x5c835c={};return _0x5c835c[_0x509dcb(0x22b)]=_0x400bd9,_0x5c835c[_0x509dcb(0x1ef)]=_0x125cc9,_0x5c835c[_0x509dcb(0x1d8)]=this['eventUrl'],_0x5c835c;}const _0x38cd5b={};return _0x38cd5b[_0x509dcb(0x22b)]=!![],_0x38cd5b;};[a85_0x22a140(0x226)]=async()=>{const _0x3aa328=a85_0x22a140,_0x9aaec9={'QmplD':_0x3aa328(0x1e7),'lFaNO':function(_0x5ddd5f,_0x1a920b){return _0x5ddd5f>_0x1a920b;},'RiWSf':'Shutdown-Queue','OcnfB':function(_0x53fd74,_0x13e53d){return _0x53fd74>_0x13e53d;},'nFIOM':function(_0x9c849c,_0x231ee8){return _0x9c849c(_0x231ee8);}};await this[_0x3aa328(0x21d)](),this[_0x3aa328(0x1c3)](_0x9aaec9[_0x3aa328(0x1f1)]);while(_0x9aaec9[_0x3aa328(0x1fd)](this['queue'][_0x3aa328(0x222)],0x0)){const _0x278751=this[_0x3aa328(0x1ff)][_0x3aa328(0x1c1)](0x0,BATCH_SIZE);this[_0x3aa328(0x1ff)][_0x3aa328(0x1f6)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x3aa328(0x209)],_0x9aaec9[_0x3aa328(0x1f9)],_0x278751);}_0x9aaec9[_0x3aa328(0x206)](this['pendingUploads'],0x0)&&_0x9aaec9['nFIOM'](debug,'Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20'+this[_0x3aa328(0x204)]);};['batchAndPostEvents']=async(_0x305ae8,_0x2f8f8c,_0x730b02)=>{const _0x5c79e0=a85_0x22a140,_0x5521c9={'QGQBJ':function(_0x19f5cc,_0x736091){return _0x19f5cc(_0x736091);},'KQSvN':'utf8','wxFXi':function(_0x359f69,_0x573457){return _0x359f69(_0x573457);},'eMOpD':function(_0x2c482f){return _0x2c482f();},'NFzxG':function(_0x4aab65,_0x139a83,_0xbeea7f,_0x379a67,_0x1964f3){return _0x4aab65(_0x139a83,_0xbeea7f,_0x379a67,_0x1964f3);},'IXtcb':_0x5c79e0(0x212),'WLdag':function(_0x4c069f,_0x343a54){return _0x4c069f-_0x343a54;},'MEBWI':function(_0xaceaaf,_0x45ab36){return _0xaceaaf(_0x45ab36);}};let _0x1ea292='';try{_0x1ea292=_0x730b02[_0x5c79e0(0x1de)](_0xe2db70=>'\x27'+_0xe2db70[_0x5c79e0(0x208)]+'\x27:'+(nestedKeyValue(_0xe2db70,[_0x5c79e0(0x1bc),'uuid'])||nestedKeyValue(_0xe2db70,['hook_run',_0x5c79e0(0x1d5)])))[_0x5c79e0(0x1df)](','),_0x5521c9['QGQBJ'](debug,_0x5c79e0(0x1c5)+_0x2f8f8c+_0x5c79e0(0x22d)+Buffer[_0x5c79e0(0x1be)](util[_0x5c79e0(0x1fb)]('%j',_0x730b02),_0x5521c9['KQSvN'])+_0x5c79e0(0x20a)+_0x1ea292);}catch(_0x236b75){_0x5521c9[_0x5c79e0(0x1c2)](debug,_0x5c79e0(0x1db)+util[_0x5c79e0(0x1fb)](_0x236b75)+'}');}const _0x392a5c={'headers':_0x5521c9['eMOpD'](getDefaultHeaders)};try{const _0x30aa3d=await _0x5521c9[_0x5c79e0(0x20e)](nodeRequest,_0x5521c9[_0x5c79e0(0x1e5)],_0x305ae8,_0x730b02,_0x392a5c);if(_0x30aa3d['data'][_0x5c79e0(0x20b)]){const _0x67aaf8={};_0x67aaf8[_0x5c79e0(0x1e9)]=_0x30aa3d[_0x5c79e0(0x1f8)][_0x5c79e0(0x20b)];throw _0x67aaf8;}else _0x5521c9[_0x5c79e0(0x1c2)](debug,_0x2f8f8c+'\x20event\x20successful\x20for\x20events\x20'+_0x1ea292+_0x5c79e0(0x228)+util[_0x5c79e0(0x1fb)]('%j',_0x30aa3d[_0x5c79e0(0x1f8)])),this[_0x5c79e0(0x204)]=Math[_0x5c79e0(0x224)](0x0,_0x5521c9[_0x5c79e0(0x1e2)](this['pendingUploads'],_0x730b02[_0x5c79e0(0x222)]));}catch(_0x413875){_0x413875[_0x5c79e0(0x1d0)]?_0x5521c9[_0x5c79e0(0x1e0)](debug,'EXCEPTION\x20IN\x20'+_0x2f8f8c+_0x5c79e0(0x1f3)+_0x413875['response']['status']+'\x20'+_0x413875[_0x5c79e0(0x1d0)]['statusText']+'\x20'+util[_0x5c79e0(0x1fb)]('%j',_0x413875[_0x5c79e0(0x1d0)])):_0x5521c9[_0x5c79e0(0x1c2)](debug,_0x5c79e0(0x214)+_0x2f8f8c+_0x5c79e0(0x1f3)+(_0x413875['message']||_0x413875)),this[_0x5c79e0(0x204)]=Math[_0x5c79e0(0x224)](0x0,_0x5521c9[_0x5c79e0(0x1e2)](this[_0x5c79e0(0x204)],_0x730b02[_0x5c79e0(0x222)]));}};[a85_0x22a140(0x1d2)]=()=>{const _0x685cf5=a85_0x22a140,_0x16446c={'dEdpb':function(_0x5dbff1,_0x5cbed5){return _0x5dbff1>_0x5cbed5;},'DRAal':function(_0x180584,_0x131d0f){return _0x180584(_0x131d0f);},'AkJdu':'Interval-Queue','nMKdI':function(_0xfd00fd,_0x1b349e){return _0xfd00fd(_0x1b349e);},'JCRFz':function(_0x56159f,_0x4d56fc,_0x4bf39d){return _0x56159f(_0x4d56fc,_0x4bf39d);}};this[_0x685cf5(0x21a)]=_0x16446c[_0x685cf5(0x21b)](setInterval,async()=>{const _0x18d512=_0x685cf5;if(_0x16446c['dEdpb'](this[_0x18d512(0x1ff)]['length'],0x0)){_0x16446c[_0x18d512(0x215)](trace,_0x18d512(0x1cd)+this['queue'][_0x18d512(0x222)]);const _0x2b418b=this['queue'][_0x18d512(0x1c1)](0x0,BATCH_SIZE);this[_0x18d512(0x1ff)][_0x18d512(0x1f6)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x18d512(0x209)],_0x16446c[_0x18d512(0x229)],_0x2b418b),_0x16446c[_0x18d512(0x1c9)](trace,_0x18d512(0x1da)+this[_0x18d512(0x1ff)][_0x18d512(0x222)]);}},BATCH_INTERVAL);};[a85_0x22a140(0x1ee)]=()=>{const _0x2943a6=a85_0x22a140,_0x100622={};_0x100622[_0x2943a6(0x1fe)]=_0x2943a6(0x1f2);const _0x67cbb7=_0x100622;this[_0x2943a6(0x1c3)](_0x67cbb7[_0x2943a6(0x1fe)]),this[_0x2943a6(0x1d2)]();};[a85_0x22a140(0x1c3)]=_0x4966c2=>{const _0x3cbbe9=a85_0x22a140,_0x2c2435={'HACIJ':function(_0x2970d8,_0x413227){return _0x2970d8(_0x413227);},'QfZXE':function(_0x276671,_0xc9386f){return _0x276671===_0xc9386f;},'tePOe':_0x3cbbe9(0x1e7)};this[_0x3cbbe9(0x21a)]&&(_0x2c2435[_0x3cbbe9(0x219)](clearInterval,this[_0x3cbbe9(0x21a)]),this['pollEventBatchInterval']=null,_0x2c2435['QfZXE'](_0x4966c2,_0x2c2435[_0x3cbbe9(0x213)])&&(this[_0x3cbbe9(0x21e)]=![]));};[a85_0x22a140(0x22b)]=()=>{const _0x42b5ec=a85_0x22a140,_0x1b57de={};_0x1b57de[_0x42b5ec(0x202)]=function(_0x5494af,_0x548a81){return _0x5494af>=_0x548a81;};const _0x5685ea=_0x1b57de;return _0x5685ea[_0x42b5ec(0x202)](this[_0x42b5ec(0x1ff)]['length'],BATCH_SIZE);};async[a85_0x22a140(0x21d)](_0x70182=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x3db34b=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x53358d=a85_0x22a140,_0x568acd={'NhIFU':function(_0x58de2d,_0x1281d9){return _0x58de2d<=_0x1281d9;},'XbnkF':function(_0x48306a,_0x3a8620){return _0x48306a(_0x3a8620);},'mBOxu':function(_0x22ea1f,_0x4512ad){return _0x22ea1f-_0x4512ad;}};if(_0x568acd['NhIFU'](this[_0x53358d(0x204)],0x0)||_0x568acd[_0x53358d(0x218)](_0x70182,0x0))return;return await _0x568acd[_0x53358d(0x223)](sleep,_0x3db34b),this[_0x53358d(0x21d)](_0x568acd[_0x53358d(0x207)](_0x70182,_0x3db34b));}}module[a85_0x22a140(0x1d6)]=RequestQueueHandler;