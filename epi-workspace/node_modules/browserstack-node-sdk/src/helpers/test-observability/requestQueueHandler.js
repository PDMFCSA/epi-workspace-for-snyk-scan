function a128_0x453a(){const _0x101a68=['event_type','CKfPv','includes','join','TEST_ATTACHMENT','kind','eventUrl','XOXZY','screenshotEventUrl','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','Interval-Queue','RRFQR','TEST_SCREENSHOT','mOcpo','removeEventBatchPolling','HookRunStarted','WYFaU','7697880QSOFkV','split','./utils','BGkmH','2375PDIBTJ','pollEventBatchInterval','message','eoZca','scuwe','queue','bQuOB','.\x20Request\x20Size\x20-\x20','laZhJ','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','732fTJjlF','TestRunFinished','add','statusText','slice','QJFsw','api/v1/screenshots','RESETTING','error','tNzQx','LdvDF','MudgY','start','ijXWT','Shutdown-Queue','gLNDw','EXCEPTION\x20IN\x20','uploadAttachmentUrl','EUKcE','XcbUJ','HookRunFinished','util','instance','POST','getInstance','TEST_REPORTING_ANALYTICS','format','shouldProceed','proceedWithData','test_run','voHBr','qIYXf','uuExN','\x20:\x20','./constants','RaivM','\x20event\x20successful\x20for\x20events\x20','6221190AmqPwm','utf8','6262207uCikYZ','batchAndPostEvents','7673536BKFiqn','EWGlg','oFdMT','response','length','\x20bytes.\x20Events\x20are\x20','yPPHd','resetEventBatchPolling','KXhJP','MPITv','uploadPending','data','GZsMa','push','Remaining\x20Queue\x20Length\x20-\x20','NwYOQ','hook_run','dhvrh','CBTSessionCreated','\x20--\x20','upload-attachments','pendingUploads','hXEDW','proceedWithUrl','9BylgVf','1246fFiTGF','../helper','started','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','REMOVING','17625wtDOkS','splice','logs','TestRunStarted','5227486Hzdeud','QvkZF','fSoHh','max','IchEH','shutdown','status','startEventBatchPolling','6pDfVPM','BATCH_EVENT_TYPES','wlKME'];a128_0x453a=function(){return _0x101a68;};return a128_0x453a();}const a128_0x43af26=a128_0x50f3;(function(_0x322f04,_0x3aa6fb){const _0x361381=a128_0x50f3,_0x3a5bdc=_0x322f04();while(!![]){try{const _0x575e79=-parseInt(_0x361381(0x161))/0x1*(-parseInt(_0x361381(0x1ad))/0x2)+-parseInt(_0x361381(0x1b2))/0x3*(-parseInt(_0x361381(0x16b))/0x4)+-parseInt(_0x361381(0x15d))/0x5+-parseInt(_0x361381(0x1be))/0x6*(-parseInt(_0x361381(0x192))/0x7)+-parseInt(_0x361381(0x194))/0x8+-parseInt(_0x361381(0x1ac))/0x9*(parseInt(_0x361381(0x190))/0xa)+parseInt(_0x361381(0x1b6))/0xb;if(_0x575e79===_0x3aa6fb)break;else _0x3a5bdc['push'](_0x3a5bdc['shift']());}catch(_0x2a44c5){_0x3a5bdc['push'](_0x3a5bdc['shift']());}}}(a128_0x453a,0xc436a));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a128_0x43af26(0x18d)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a128_0x43af26(0x15f)),{nestedKeyValue}=require(a128_0x43af26(0x1ae)),util=require(a128_0x43af26(0x180)),constants=require('../../bin/utils/constants');function a128_0x50f3(_0x313623,_0x3eb4f0){const _0x453a41=a128_0x453a();return a128_0x50f3=function(_0x50f3bf,_0x5c352f){_0x50f3bf=_0x50f3bf-0x14d;let _0x25b33d=_0x453a41[_0x50f3bf];return _0x25b33d;},a128_0x50f3(_0x313623,_0x3eb4f0);}class RequestQueueHandler{static [a128_0x43af26(0x181)];[a128_0x43af26(0x1a9)]=0x0;constructor(){const _0x4d19ef=a128_0x43af26,_0x2a3125={};_0x2a3125[_0x4d19ef(0x1b7)]='0|3|5|6|2|4|1',_0x2a3125[_0x4d19ef(0x19d)]=_0x4d19ef(0x1a8),_0x2a3125[_0x4d19ef(0x189)]='LogCreated',_0x2a3125['XcbUJ']=_0x4d19ef(0x1a6),_0x2a3125[_0x4d19ef(0x160)]='TestRunFinished',_0x2a3125[_0x4d19ef(0x159)]='TestRunSkipped',_0x2a3125[_0x4d19ef(0x167)]=_0x4d19ef(0x17f),_0x2a3125[_0x4d19ef(0x157)]=_0x4d19ef(0x1b5),_0x2a3125[_0x4d19ef(0x15c)]=_0x4d19ef(0x15b),_0x2a3125[_0x4d19ef(0x196)]='api/v1/batch',_0x2a3125[_0x4d19ef(0x17a)]=_0x4d19ef(0x171);const _0x2cae57=_0x2a3125,_0x33b892=_0x2cae57['QvkZF'][_0x4d19ef(0x15e)]('|');let _0x165353=0x0;while(!![]){switch(_0x33b892[_0x165353++]){case'0':this['queue']=[];continue;case'1':this[_0x4d19ef(0x162)]=null;continue;case'2':this[_0x4d19ef(0x17c)]=_0x2cae57[_0x4d19ef(0x19d)];continue;case'3':this[_0x4d19ef(0x1af)]=![];continue;case'4':this[_0x4d19ef(0x1bf)]=[_0x2cae57[_0x4d19ef(0x189)],_0x2cae57[_0x4d19ef(0x17e)],_0x2cae57[_0x4d19ef(0x160)],_0x2cae57[_0x4d19ef(0x159)],_0x2cae57[_0x4d19ef(0x167)],_0x2cae57[_0x4d19ef(0x157)],_0x2cae57[_0x4d19ef(0x15c)]];continue;case'5':this['eventUrl']=_0x2cae57[_0x4d19ef(0x196)];continue;case'6':this[_0x4d19ef(0x154)]=_0x2cae57['gLNDw'];continue;}break;}}static[a128_0x43af26(0x183)](){const _0x39c70f=a128_0x43af26;return!RequestQueueHandler[_0x39c70f(0x181)]&&(RequestQueueHandler[_0x39c70f(0x181)]=new RequestQueueHandler()),RequestQueueHandler[_0x39c70f(0x181)];}[a128_0x43af26(0x177)]=()=>{const _0x17b609=a128_0x43af26;!this[_0x17b609(0x1af)]&&(this[_0x17b609(0x1af)]=!![],this[_0x17b609(0x1bd)]());};[a128_0x43af26(0x16d)]=_0x7e2a22=>{const _0x4e3327=a128_0x43af26,_0xa78c6f={'ucsxO':function(_0x376d5d,_0x3d9900){return _0x376d5d===_0x3d9900;},'uooXR':_0x4e3327(0x158),'GZsMa':function(_0x5035a3,_0x47edfe){return _0x5035a3>_0x47edfe;},'tNzQx':_0x4e3327(0x150),'QJFsw':function(_0x178c97,_0x1fecae){return _0x178c97!==_0x1fecae;},'JLCId':_0x4e3327(0x16c),'hXEDW':function(_0xa88795,_0x488ebb){return _0xa88795(_0x488ebb);},'scuwe':_0x4e3327(0x1b0)};if(this[_0x4e3327(0x1bf)][_0x4e3327(0x14e)](_0x7e2a22[_0x4e3327(0x1c1)])){if(_0x7e2a22[_0x4e3327(0x1b4)]&&_0x7e2a22[_0x4e3327(0x1b4)][0x0]&&_0xa78c6f['ucsxO'](_0x7e2a22[_0x4e3327(0x1b4)][0x0][_0x4e3327(0x151)],_0xa78c6f['uooXR'])){const _0x572f43={};return _0x572f43[_0x4e3327(0x186)]=!![],_0x572f43[_0x4e3327(0x187)]=[_0x7e2a22],_0x572f43[_0x4e3327(0x1ab)]=this['screenshotEventUrl'],_0x572f43;}if(_0x7e2a22['logs']&&_0xa78c6f[_0x4e3327(0x1a0)](_0x7e2a22[_0x4e3327(0x1b4)][_0x4e3327(0x198)],0x0)&&_0xa78c6f['ucsxO'](_0x7e2a22[_0x4e3327(0x1b4)][0x0][_0x4e3327(0x151)],_0xa78c6f[_0x4e3327(0x174)])&&_0xa78c6f[_0x4e3327(0x170)](_0x7e2a22[_0x4e3327(0x1c1)],_0xa78c6f['JLCId'])){const _0x5ea3d2={};return _0x5ea3d2[_0x4e3327(0x186)]=!![],_0x5ea3d2[_0x4e3327(0x187)]=[_0x7e2a22],_0x5ea3d2['proceedWithUrl']=this[_0x4e3327(0x17c)],_0x5ea3d2;}this[_0x4e3327(0x166)][_0x4e3327(0x1a1)](_0x7e2a22);let _0xb6f9f1=null;const _0x3b9b5f=this[_0x4e3327(0x186)]();_0x3b9b5f&&(_0xa78c6f[_0x4e3327(0x1aa)](trace,_0xa78c6f[_0x4e3327(0x165)]),_0xb6f9f1=this[_0x4e3327(0x166)][_0x4e3327(0x16f)](0x0,BATCH_SIZE),this['queue'][_0x4e3327(0x1b3)](0x0,BATCH_SIZE),this[_0x4e3327(0x19b)]());const _0x3652a9={};return _0x3652a9['shouldProceed']=_0x3b9b5f,_0x3652a9['proceedWithData']=_0xb6f9f1,_0x3652a9[_0x4e3327(0x1ab)]=this[_0x4e3327(0x152)],_0x3652a9;}const _0x11dde5={};return _0x11dde5[_0x4e3327(0x186)]=!![],_0x11dde5;};[a128_0x43af26(0x1bb)]=async()=>{const _0x408c49=a128_0x43af26,_0x261348={'XOXZY':_0x408c49(0x1b1),'dhvrh':function(_0x180be6,_0x336d2d){return _0x180be6>_0x336d2d;},'qIYXf':_0x408c49(0x179),'fSoHh':function(_0x1f5318,_0x4c218c){return _0x1f5318(_0x4c218c);}};await this[_0x408c49(0x19e)](),this[_0x408c49(0x15a)](_0x261348[_0x408c49(0x153)]);while(_0x261348[_0x408c49(0x1a5)](this[_0x408c49(0x166)][_0x408c49(0x198)],0x0)){const _0x4c7b3e=this[_0x408c49(0x166)][_0x408c49(0x16f)](0x0,BATCH_SIZE);this['queue'][_0x408c49(0x1b3)](0x0,BATCH_SIZE),await this[_0x408c49(0x193)](this[_0x408c49(0x152)],_0x261348[_0x408c49(0x18a)],_0x4c7b3e);}_0x261348['dhvrh'](this['pendingUploads'],0x0)&&_0x261348[_0x408c49(0x1b8)](debug,_0x408c49(0x16a)+this[_0x408c49(0x1a9)]);};['batchAndPostEvents']=async(_0x249f8f,_0x3326e7,_0x420bf1)=>{const _0x1b1662=a128_0x43af26,_0x3995aa={'NcxtP':function(_0xc47ea0,_0x1de8ea){return _0xc47ea0(_0x1de8ea);},'rhyaV':_0x1b1662(0x191),'MudgY':function(_0x11a177,_0x32b64d){return _0x11a177(_0x32b64d);},'NwYOQ':function(_0xb6237a){return _0xb6237a();},'uuExN':function(_0x4add6f,_0x2e5953,_0x1eed91,_0x493e17,_0x1160e1){return _0x4add6f(_0x2e5953,_0x1eed91,_0x493e17,_0x1160e1);},'yPPHd':_0x1b1662(0x182),'wlKME':function(_0x31b312,_0x534c60){return _0x31b312-_0x534c60;},'WhZgh':function(_0x331a1f,_0x64b05c){return _0x331a1f-_0x64b05c;}};let _0x21691a='';try{_0x21691a=_0x420bf1['map'](_0x4724b2=>'\x27'+_0x4724b2[_0x1b1662(0x1c1)]+'\x27:'+(nestedKeyValue(_0x4724b2,[_0x1b1662(0x188),'uuid'])||nestedKeyValue(_0x4724b2,[_0x1b1662(0x1a4),'uuid'])))[_0x1b1662(0x14f)](','),_0x3995aa['NcxtP'](debug,'Processing\x20batch\x20events\x20for\x20'+_0x3326e7+_0x1b1662(0x168)+Buffer['byteLength'](util[_0x1b1662(0x185)]('%j',_0x420bf1),_0x3995aa['rhyaV'])+_0x1b1662(0x199)+_0x21691a);}catch(_0x480ce8){_0x3995aa[_0x1b1662(0x176)](debug,_0x1b1662(0x155)+util[_0x1b1662(0x185)](_0x480ce8)+'}');}const _0x3c1822={'headers':_0x3995aa[_0x1b1662(0x1a3)](getDefaultHeaders)};try{const _0x327ae4=await _0x3995aa[_0x1b1662(0x18b)](nodeRequest,_0x3995aa[_0x1b1662(0x19a)],_0x249f8f,_0x420bf1,_0x3c1822);if(_0x327ae4['data'][_0x1b1662(0x173)]){const _0xd357f={};_0xd357f[_0x1b1662(0x163)]=_0x327ae4[_0x1b1662(0x19f)]['error'];throw _0xd357f;}else _0x3995aa[_0x1b1662(0x176)](debug,_0x3326e7+_0x1b1662(0x18f)+_0x21691a+_0x1b1662(0x1a7)+util[_0x1b1662(0x185)]('%j',_0x327ae4[_0x1b1662(0x19f)])),this['pendingUploads']=Math[_0x1b1662(0x1b9)](0x0,_0x3995aa[_0x1b1662(0x1c0)](this[_0x1b1662(0x1a9)],_0x420bf1[_0x1b1662(0x198)]));}catch(_0xfb0615){_0xfb0615[_0x1b1662(0x197)]?_0x3995aa[_0x1b1662(0x176)](debug,_0x1b1662(0x17b)+_0x3326e7+'\x20REQUEST\x20TO\x20'+constants[_0x1b1662(0x184)]+'\x20:\x20'+_0xfb0615[_0x1b1662(0x197)][_0x1b1662(0x1bc)]+'\x20'+_0xfb0615['response'][_0x1b1662(0x16e)]+'\x20'+util[_0x1b1662(0x185)]('%j',_0xfb0615['response'])):_0x3995aa['MudgY'](debug,_0x1b1662(0x17b)+_0x3326e7+'\x20REQUEST\x20TO\x20'+constants[_0x1b1662(0x184)]+_0x1b1662(0x18c)+(_0xfb0615[_0x1b1662(0x163)]||_0xfb0615)),this[_0x1b1662(0x1a9)]=Math[_0x1b1662(0x1b9)](0x0,_0x3995aa['WhZgh'](this[_0x1b1662(0x1a9)],_0x420bf1[_0x1b1662(0x198)]));}};[a128_0x43af26(0x1bd)]=()=>{const _0x4a11ab=a128_0x43af26,_0xc5f21c={'EUKcE':function(_0x2b10e0,_0x1ebf1a){return _0x2b10e0>_0x1ebf1a;},'CKfPv':function(_0x15199f,_0x5bffb2){return _0x15199f(_0x5bffb2);},'ijXWT':_0x4a11ab(0x156),'pmKkw':function(_0x183d00,_0x4ef643,_0x56acf1){return _0x183d00(_0x4ef643,_0x56acf1);}};this[_0x4a11ab(0x162)]=_0xc5f21c['pmKkw'](setInterval,async()=>{const _0x587afe=_0x4a11ab;if(_0xc5f21c[_0x587afe(0x17d)](this[_0x587afe(0x166)][_0x587afe(0x198)],0x0)){_0xc5f21c[_0x587afe(0x14d)](trace,'Processing\x20events.\x20Queue\x20Length\x20-\x20'+this[_0x587afe(0x166)][_0x587afe(0x198)]);const _0x25f902=this[_0x587afe(0x166)][_0x587afe(0x16f)](0x0,BATCH_SIZE);this[_0x587afe(0x166)]['splice'](0x0,BATCH_SIZE),await this[_0x587afe(0x193)](this[_0x587afe(0x152)],_0xc5f21c[_0x587afe(0x178)],_0x25f902),_0xc5f21c['CKfPv'](trace,_0x587afe(0x1a2)+this[_0x587afe(0x166)][_0x587afe(0x198)]);}},BATCH_INTERVAL);};[a128_0x43af26(0x19b)]=()=>{const _0x3d28c8=a128_0x43af26,_0x57f27e={};_0x57f27e['IchEH']=_0x3d28c8(0x172);const _0x77f674=_0x57f27e;this['removeEventBatchPolling'](_0x77f674[_0x3d28c8(0x1ba)]),this['startEventBatchPolling']();};[a128_0x43af26(0x15a)]=_0x13d0d1=>{const _0x3654cf=a128_0x43af26,_0x66e06c={'MyiDz':function(_0x3b2427,_0x1370fb){return _0x3b2427(_0x1370fb);},'eoZca':function(_0x217b37,_0x4f4227){return _0x217b37===_0x4f4227;},'laZhJ':'REMOVING'};this[_0x3654cf(0x162)]&&(_0x66e06c['MyiDz'](clearInterval,this[_0x3654cf(0x162)]),this[_0x3654cf(0x162)]=null,_0x66e06c[_0x3654cf(0x164)](_0x13d0d1,_0x66e06c[_0x3654cf(0x169)])&&(this['started']=![]));};[a128_0x43af26(0x186)]=()=>{const _0x1727b4=a128_0x43af26,_0x8cedb4={};_0x8cedb4[_0x1727b4(0x19c)]=function(_0x3d8278,_0x29f2a7){return _0x3d8278>=_0x29f2a7;};const _0x45564e=_0x8cedb4;return _0x45564e[_0x1727b4(0x19c)](this[_0x1727b4(0x166)]['length'],BATCH_SIZE);};async[a128_0x43af26(0x19e)](_0x32d923=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x309bfb=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x3f3eea=a128_0x43af26,_0x49ea25={'LdvDF':function(_0x5161bd,_0x323b1f){return _0x5161bd<=_0x323b1f;},'EWGlg':function(_0xa234b9,_0x14d8ce){return _0xa234b9(_0x14d8ce);},'RaivM':function(_0x309888,_0x481809){return _0x309888-_0x481809;}};if(_0x49ea25[_0x3f3eea(0x175)](this[_0x3f3eea(0x1a9)],0x0)||_0x49ea25[_0x3f3eea(0x175)](_0x32d923,0x0))return;return await _0x49ea25[_0x3f3eea(0x195)](sleep,_0x309bfb),this[_0x3f3eea(0x19e)](_0x49ea25[_0x3f3eea(0x18e)](_0x32d923,_0x309bfb));}}module['exports']=RequestQueueHandler;