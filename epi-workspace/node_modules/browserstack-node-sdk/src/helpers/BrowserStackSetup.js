function a55_0x2f78(_0x1759e7,_0x270396){const _0xc9dd80=a55_0xc9dd();return a55_0x2f78=function(_0x2f7872,_0x2bceec){_0x2f7872=_0x2f7872-0xfe;let _0x1ac378=_0xc9dd80[_0x2f7872];return _0x1ac378;},a55_0x2f78(_0x1759e7,_0x270396);}function a55_0xc9dd(){const _0x73790=['finalize','getLocalIdentifier','proxyConfig','YAwHE','aoYfQ','./utilities','exitHandler','getLocalConfig','Hlytz','ANWHy','stopBrowserstackLocal','GQOOg','./performance/performance-tester','uuid','browserStackLocalOptions','join','oHZHF','BdpYU','setUpHubUrl','length','tcgAuthConfig','parallelsPerPlatform','Data\x20sent\x20successfully\x20to\x20','measures','selenium-webdriver','JfabL','stringify','Local\x20binary\x20stopped','toString','debug','isAuthenticated','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','OLkyR','sanitizeCaps','percy','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','FIEVU','error','isEnabled','localIdentifier','setCLICaps','33788FwMIgP','pwCHl','BROWSERSTACK_PERCY','pMTGv','\x20with\x20error\x20','getTurboScaleGridDetails','fireFunnelTestEvent','fBUkW','stopPercy','getFinalCaps','lcogU','isTrue','./logger','allocateHub','qoaTw','BrowserstackHealing.init\x20method\x20timed\x20out','initialize','info','disableAutoCaptureLogs','Error\x20in\x20percy\x20setup\x20','isBrowserstackInfra','Gefgm','unhandledRejection','getCentralUser','Jojwd','selfHeal','mPnWd','setHandlePWError','EDS_URL','Percy\x20stopped','proxy','2502696IgCvjO','35788EZpLMI','MDRJK','localOptions','RimSb','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','fRohE','getConfigPath','HrXaW','killSignal','27PeViSn','182csMzLg','NMIFw','aiHeal:tcgAuth','version','turboScaleUrl','./ats/helper','setupPercy','browserstackLocal','requireSeleniumWebdriverCheck','sdkRunID','race','zeuRt','bxBzz','true','./setKeepAlive','XBDbf','YfMIB','constructor','Local\x20binary\x20started\x20successfully','RDKfM','Percy\x20started\x20successfully','warn','qzVSW','FMzoj','TCG_AUTH_FAILURE','SDK_CLEANUP','38|21|28|43|23|18|5|15|41|27|2|0|12|8|26|14|20|31|22|24|25|13|42|35|9|30|11|29|6|7|33|37|34|40|16|19|36|17|3|1|32|39|4|10','message','CPGfm','getHubUrl','getAccessKey','captureError','SvykB','Lccku','status','ats-repeater','4.5.0','oEEpl','uyMxP','Error\x20occured\x20while\x20stopping\x20percy','accessKey','YeYxi','intExitHandler','162915aiARNi','GlLYx','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','setLogLevel','skipBinaryInitialisation','codeceptjs','envConfig','cancel','testContextOptions','setBrowserstackInfraFromConfig','ydhhu','setupTCGAuth','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','ppeQG','winstonLogger','NxawU','xzUbn','beforeExit','getPackageVersion','?caps=','FacqH','format','readConfig','INVALID_INIT_RESP_WITH_USER_IMPACT','split','DACKM','getUserName','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','19506gNjvDv','\x20with\x20response\x20','30bIdHax','end','platform','handled','OEuFn','SIGINT','custom-repeater','ESHDj','path','setupKeepAlive','isUndefined','iCXgS','customRepeaters','./testhub/utils','turboScaleGridDetails','skipSessionStatus','then','isRunning','win32','wbpEx','KVXBJ','hubUrl','config','getProxyConfigForTcg','./percy/utils','LsHhB','tEHPR','writeFileSync','false','SIGQUIT','3576430rlwhcD','uncaughtException','IdNJP','../bin/utils/constants','../ai-sdk-node/bundle','forceLocal','url','stopLocalBinary','0|3|4|1|2','includes','cDdac','asInq','AI_PROXY_FAILURE','pvqdA','handleExceptions','TGcKW','UPGRADE_REQUIRED','ldkat','Shutdown\x20triggered\x20by\x20','WEzWY','yApFD','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','czrfT','env','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','turboScaleOptions','85lFVwdz','push','No\x20config\x20provided.','QGqgQ','skipSessionName','generateLocalIdentifier','setupBrowserstackLocal','cliConfig','FIJAC','framework','Gbvmi','central_scanner','FRAMEWORK','bstackConfig','playwrightUrl','useW3C','platforms','toLowerCase','BROWSERSTACK_TURBOSCALE','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','isTrialGrid','isHealingEnabled','AI_INIT_FAILURE','rbsIm','stop','assign','pJiHP','measureWrapper','ryJze','904870zClIGB','proxyUrl','tcg\x20config\x20setup\x20successful.','unhandledErrors','statusCode','fCHVv','wnBvJ','Error\x20in\x20sending\x20testhub\x20stop:\x20','./performance/constants','AUTOLOGCAPTURE_NOTIFICATION','PAeze','compareVersions','uwWnF','UkYMg'];a55_0xc9dd=function(){return _0x73790;};return a55_0xc9dd();}const a55_0x36589b=a55_0x2f78;(function(_0x53b31c,_0x404838){const _0x106d9a=a55_0x2f78,_0x2f0614=_0x53b31c();while(!![]){try{const _0x3c5166=-parseInt(_0x106d9a(0x1c1))/0x1+parseInt(_0x106d9a(0x16c))/0x2*(-parseInt(_0x106d9a(0x1df))/0x3)+-parseInt(_0x106d9a(0x18c))/0x4*(-parseInt(_0x106d9a(0x118))/0x5)+-parseInt(_0x106d9a(0x1dd))/0x6*(-parseInt(_0x106d9a(0x196))/0x7)+-parseInt(_0x106d9a(0x18b))/0x8+parseInt(_0x106d9a(0x195))/0x9*(parseInt(_0x106d9a(0x135))/0xa)+parseInt(_0x106d9a(0xfe))/0xb;if(_0x3c5166===_0x404838)break;else _0x2f0614['push'](_0x2f0614['shift']());}catch(_0x3a1d54){_0x2f0614['push'](_0x2f0614['shift']());}}}(a55_0xc9dd,0x2e06c));const util=require('util'),os=require('os'),path=require(a55_0x36589b(0x1e7)),{v4:uuidv4}=require(a55_0x36589b(0x150)),fs=require('fs'),constants=require(a55_0x36589b(0x101)),{isTurboScaleSession}=require(a55_0x36589b(0x19b)),logger=require(a55_0x36589b(0x178))[a55_0x36589b(0x1cf)],helper=require('./helper'),utilities=require(a55_0x36589b(0x148)),percyHelper=require(a55_0x36589b(0x1f7)),hubAllocator=require('../hubAllocationMethods'),PerformanceTester=require(a55_0x36589b(0x14f)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a55_0x36589b(0x13d)),{setPercyFlag}=require(a55_0x36589b(0x1ec)),TestHubHandler=require('./testhub/testhubHandler'),timeoutPromise=require('./timeoutPromise');class BrowserStackSetup{constructor(_0x475c26,_0x5cb7ab){const _0x3a3763=a55_0x36589b,_0x2eb3ea={'ydhhu':_0x3a3763(0x1b0),'HrXaW':'SIGTERM','oEEpl':function(_0x23d215,_0x1b6889){return _0x23d215!==_0x1b6889;},'pvqdA':_0x3a3763(0x1f1),'zqgdZ':'SIGABRT','ryJze':_0x3a3763(0x1fc),'Gefgm':'SIGBREAK','ESHDj':function(_0x52fe72,_0x3bba4c){return _0x52fe72===_0x3bba4c;},'cDdac':'integrations','pwCHl':function(_0x206cca){return _0x206cca();},'Jojwd':'userName\x20or\x20accessKey\x20is\x20not\x20defined','LsHhB':'beforeExit','wnBvJ':_0x3a3763(0x116),'BdpYU':_0x3a3763(0x190),'KVXBJ':_0x3a3763(0x11a),'QGqgQ':_0x3a3763(0x1e4),'DACKM':'SDKTestAttempted','ldkat':'SIGHUP','fBUkW':function(_0x393499,_0x43fe8f){return _0x393499<_0x43fe8f;},'fRohE':function(_0x5929e1,_0xa48758){return _0x5929e1(_0xa48758);},'WEzWY':_0x3a3763(0x15b),'uwWnF':function(_0x536d9e,_0x23f7c5){return _0x536d9e===_0x23f7c5;},'ppeQG':_0x3a3763(0x1ba)},_0x48066c=_0x2eb3ea[_0x3a3763(0x1cb)][_0x3a3763(0x1d9)]('|');let _0x5ce689=0x0;while(!![]){switch(_0x48066c[_0x5ce689++]){case'0':helper[_0x3a3763(0x164)](this[_0x3a3763(0x1f5)]);continue;case'1':process['on'](_0x2eb3ea[_0x3a3763(0x193)],this[_0x3a3763(0x1c0)]);continue;case'2':global[_0x3a3763(0x121)]=_0x5cb7ab;continue;case'3':this['intExitHandler']=this['intExitHandler']['bind'](this);continue;case'4':_0x2eb3ea[_0x3a3763(0x1bb)](process[_0x3a3763(0x1e1)],_0x2eb3ea[_0x3a3763(0x10b)])?(process['on'](_0x2eb3ea['zqgdZ'],this[_0x3a3763(0x1c0)]),process['on'](_0x2eb3ea[_0x3a3763(0x134)],this['intExitHandler'])):process['on'](_0x2eb3ea[_0x3a3763(0x181)],this[_0x3a3763(0x1c0)]);continue;case'5':this[_0x3a3763(0x1f5)][_0x3a3763(0x128)]=this[_0x3a3763(0x1f5)]['platforms']||[];continue;case'6':helper[_0x3a3763(0x187)](this[_0x3a3763(0x1f5)]);continue;case'7':if(_0x2eb3ea[_0x3a3763(0x1e6)](_0x5cb7ab,_0x2eb3ea[_0x3a3763(0x108)]))return;continue;case'8':this[_0x3a3763(0x19f)]=_0x2eb3ea[_0x3a3763(0x16d)](uuidv4);continue;case'9':if(helper[_0x3a3763(0x1e9)](helper[_0x3a3763(0x1db)](this['config']))||helper[_0x3a3763(0x1e9)](helper[_0x3a3763(0x1b4)](this['config'])))throw new Error(_0x2eb3ea[_0x3a3763(0x184)]);continue;case'10':process['on'](_0x2eb3ea[_0x3a3763(0x1f8)],this[_0x3a3763(0x149)]());continue;case'11':this[_0x3a3763(0x1f5)][_0x3a3763(0x151)]['skipBinaryInitialisation']=helper[_0x3a3763(0x177)](this[_0x3a3763(0x1f5)][_0x3a3763(0x151)][_0x3a3763(0x1c5)]);continue;case'12':this[_0x3a3763(0x121)]=_0x5cb7ab;continue;case'13':this[_0x3a3763(0x1f5)]['testContextOptions'][_0x3a3763(0x11c)]=!helper[_0x3a3763(0x180)]()||helper[_0x3a3763(0x177)](this[_0x3a3763(0x1f5)][_0x3a3763(0x1c9)][_0x3a3763(0x11c)]);continue;case'14':global[_0x3a3763(0x19f)]=this[_0x3a3763(0x19f)];continue;case'15':this[_0x3a3763(0x1f5)][_0x3a3763(0x1c9)]=this[_0x3a3763(0x1f5)][_0x3a3763(0x1c9)]||{};continue;case'16':(helper['isUndefined'](this['config'][_0x3a3763(0x128)])||helper[_0x3a3763(0x1e9)](this['config'][_0x3a3763(0x128)][_0x3a3763(0x156)]))&&(helper[_0x3a3763(0x1e9)](this[_0x3a3763(0x1f5)][_0x3a3763(0x158)])?logger[_0x3a3763(0x17d)](_0x2eb3ea[_0x3a3763(0x13b)]):logger[_0x3a3763(0x1ab)](_0x2eb3ea[_0x3a3763(0x154)]),this[_0x3a3763(0x1f5)][_0x3a3763(0x128)]=[]);continue;case'17':!this[_0x3a3763(0x1f5)][_0x3a3763(0x17e)]&&logger[_0x3a3763(0x17d)](constants[_0x3a3763(0x13e)]);continue;case'18':this[_0x3a3763(0x1f5)]=helper[_0x3a3763(0x1d7)](helper[_0x3a3763(0x192)](_0x475c26));continue;case'19':!this['config'][_0x3a3763(0x1c9)]&&(this['config'][_0x3a3763(0x1c9)]={});continue;case'20':logger[_0x3a3763(0x17d)]('SDK\x20run\x20started\x20with\x20id:\x20'+this[_0x3a3763(0x19f)]);continue;case'21':this[_0x3a3763(0x11f)]=helper[_0x3a3763(0x16b)](_0x475c26);continue;case'22':if(this[_0x3a3763(0x1f5)]['error'])throw new Error(this['config'][_0x3a3763(0x168)]);continue;case'23':this[_0x3a3763(0x165)]=null;continue;case'24':helper[_0x3a3763(0x1ca)](this['config'],this[_0x3a3763(0x11f)]);continue;case'25':this[_0x3a3763(0x1f5)][_0x3a3763(0x1c9)][_0x3a3763(0x1ee)]=!helper['isBrowserstackInfra']()||helper[_0x3a3763(0x177)](this[_0x3a3763(0x1f5)]['testContextOptions']['skipSessionStatus']);continue;case'26':this[_0x3a3763(0x194)]=null;continue;case'27':global[_0x3a3763(0x1f5)]=this[_0x3a3763(0x1f5)];continue;case'28':this[_0x3a3763(0x1c7)]=helper['setEnvCaps']();continue;case'29':helper[_0x3a3763(0x1c4)](this[_0x3a3763(0x1f5)],this[_0x3a3763(0x11f)],this['envConfig']);continue;case'30':helper[_0x3a3763(0x14a)](this['config'])&&helper[_0x3a3763(0x1e9)](helper[_0x3a3763(0x144)](this[_0x3a3763(0x1f5)]))&&(!helper[_0x3a3763(0x1e9)](this[_0x3a3763(0x1f5)]['browserStackLocalOptions'])&&_0x2eb3ea['ESHDj'](this[_0x3a3763(0x1f5)]['browserStackLocalOptions'][_0x3a3763(0x1a7)],Object)?!helper[_0x3a3763(0x177)](this[_0x3a3763(0x1f5)][_0x3a3763(0x151)][_0x3a3763(0x1c5)])&&(this['config'][_0x3a3763(0x151)][_0x3a3763(0x16a)]=helper[_0x3a3763(0x11d)]()):this[_0x3a3763(0x1f5)][_0x3a3763(0x151)]={'localIdentifier':helper[_0x3a3763(0x11d)]()});continue;case'31':if(helper[_0x3a3763(0x1e9)](this[_0x3a3763(0x1f5)]))throw new Error(_0x2eb3ea[_0x3a3763(0x1f3)]);continue;case'32':process['on'](_0x2eb3ea[_0x3a3763(0x11b)],this[_0x3a3763(0x1c0)]);continue;case'33':this[_0x3a3763(0x10c)]();continue;case'34':if(!helper[_0x3a3763(0x180)]()){try{process[_0x3a3763(0x115)][_0x3a3763(0x124)]=_0x5cb7ab,utilities[_0x3a3763(0x172)](_0x2eb3ea[_0x3a3763(0x1da)],{},this[_0x3a3763(0x1f5)],this[_0x3a3763(0x121)]);}catch(_0x30cbbb){logger['debug'](_0x3a3763(0x166)+_0x30cbbb);}return;}continue;case'35':!this['config'][_0x3a3763(0x151)]&&(this[_0x3a3763(0x1f5)][_0x3a3763(0x151)]=this['config'][_0x3a3763(0x18e)]||{});continue;case'36':try{process[_0x3a3763(0x115)]['FRAMEWORK']=_0x475c26['_'][0x0],utilities[_0x3a3763(0x172)](_0x2eb3ea[_0x3a3763(0x1da)],{},this[_0x3a3763(0x1f5)],this['framework']);}catch(_0x3d93fd){logger[_0x3a3763(0x160)]('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x3d93fd);}continue;case'37':process[_0x3a3763(0x115)][_0x3a3763(0x12a)]&&(this[_0x3a3763(0x1f5)]['turboScale']=helper[_0x3a3763(0x177)](process[_0x3a3763(0x115)][_0x3a3763(0x12a)]),this[_0x3a3763(0x1f5)]['turboScaleOptions']=this[_0x3a3763(0x1f5)][_0x3a3763(0x117)]||{});continue;case'38':this[_0x3a3763(0x138)]=[];continue;case'39':process['on'](_0x2eb3ea[_0x3a3763(0x10f)],this[_0x3a3763(0x1c0)]);continue;case'40':helper[_0x3a3763(0x19e)](_0x5cb7ab)&&(_0x2eb3ea[_0x3a3763(0x173)](_0x2eb3ea[_0x3a3763(0x191)](parseInt,helper['getPackageVersion'](_0x2eb3ea[_0x3a3763(0x111)])),0x3)&&(this[_0x3a3763(0x1f5)][_0x3a3763(0x127)]=![]),_0x2eb3ea[_0x3a3763(0x141)](helper[_0x3a3763(0x140)](helper[_0x3a3763(0x1d3)](_0x2eb3ea[_0x3a3763(0x111)]),_0x2eb3ea[_0x3a3763(0x1ce)]),0x1)&&(this[_0x3a3763(0x1f5)][_0x3a3763(0x127)]=!![]));continue;case'41':this['errorMessage']={};continue;case'42':helper[_0x3a3763(0x175)](this['config'],this[_0x3a3763(0x11f)],this[_0x3a3763(0x1c7)]);continue;case'43':this[_0x3a3763(0x19d)]=null;continue;}break;}}async[a55_0x36589b(0x17c)](){const _0x2c078d=a55_0x36589b,_0x3d4008={'NMIFw':function(_0xc36093,_0x3ad560){return _0xc36093(_0x3ad560);},'Lccku':_0x2c078d(0x1b9),'OEuFn':_0x2c078d(0x1e5),'GlLYx':_0x2c078d(0x1a3),'Gbvmi':function(_0x55e350,_0x7d98a2){return _0x55e350===_0x7d98a2;},'qxCoR':'playwright','GQOOg':function(_0x66d5d2,_0x56da7f){return _0x66d5d2+_0x56da7f;},'MDRJK':_0x2c078d(0x1d4),'OLkyR':_0x2c078d(0x1c6)};if(_0x3d4008[_0x2c078d(0x197)](isTurboScaleSession,this[_0x2c078d(0x1f5)])){const _0x59ca05=await helper[_0x2c078d(0x171)](this[_0x2c078d(0x1f5)]);this['config'][_0x2c078d(0x1ed)]=_0x59ca05,_0x59ca05[_0x2c078d(0x12c)]&&(this[_0x2c078d(0x1f5)][_0x2c078d(0x19d)]=!![],this[_0x2c078d(0x1f5)]['browserStackLocalOptions'][_0x2c078d(0x16a)]=_0x3d4008[_0x2c078d(0x1b7)],this[_0x2c078d(0x1f5)]['browserStackLocalOptions'][_0x3d4008[_0x2c078d(0x1e3)]]=_0x59ca05[_0x2c078d(0x1eb)][_0x2c078d(0x152)](','),this[_0x2c078d(0x1f5)][_0x2c078d(0x151)][_0x2c078d(0x103)]=_0x3d4008[_0x2c078d(0x1c2)]),this[_0x2c078d(0x1f5)][_0x2c078d(0x19a)]=_0x59ca05[_0x2c078d(0x104)],this[_0x2c078d(0x121)]&&_0x3d4008[_0x2c078d(0x122)](this['framework'][_0x2c078d(0x129)](),_0x3d4008['qxCoR'])&&(this['config'][_0x2c078d(0x19a)]=_0x3d4008[_0x2c078d(0x14e)](_0x59ca05[_0x2c078d(0x126)],_0x3d4008[_0x2c078d(0x18d)])),constants[_0x2c078d(0x1f4)]=helper[_0x2c078d(0x1b3)](this[_0x2c078d(0x1f5)]),logger[_0x2c078d(0x160)]('HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20'+constants[_0x2c078d(0x1f4)]);}helper['setProxySettings'](this[_0x2c078d(0x1f5)]),this[_0x2c078d(0x1e8)](),_0x3d4008[_0x2c078d(0x197)](setPercyFlag,this),await this[_0x2c078d(0x11e)](),![_0x3d4008[_0x2c078d(0x163)]][_0x2c078d(0x107)](this[_0x2c078d(0x121)])&&!_0x3d4008[_0x2c078d(0x197)](isTurboScaleSession,this[_0x2c078d(0x1f5)])&&!helper[_0x2c078d(0x183)]()[_0x2c078d(0x123)]&&await this[_0x2c078d(0x155)]();}async[a55_0x36589b(0x19c)](){const _0x4d7cf8=a55_0x36589b,_0x17f66b={};_0x17f66b['FtUtm']=function(_0x13b936,_0x576456){return _0x13b936===_0x576456;},_0x17f66b[_0x4d7cf8(0x1d1)]=_0x4d7cf8(0x1fb),_0x17f66b[_0x4d7cf8(0x1a9)]=_0x4d7cf8(0x162),_0x17f66b['BxxHL']=_0x4d7cf8(0x1aa),_0x17f66b[_0x4d7cf8(0x1f2)]=_0x4d7cf8(0x1a3),_0x17f66b[_0x4d7cf8(0x112)]=_0x4d7cf8(0x1d2);const _0x26f22f=_0x17f66b;if(helper['isTrue'](this[_0x4d7cf8(0x1f5)]['percy'])&&(!this[_0x4d7cf8(0x165)]||!this[_0x4d7cf8(0x165)][_0x4d7cf8(0x1f0)]()))try{this[_0x4d7cf8(0x165)]=await percyHelper['startPercy'](this[_0x4d7cf8(0x1f5)]);if(!this[_0x4d7cf8(0x165)]){process[_0x4d7cf8(0x115)][_0x4d7cf8(0x16e)]=_0x26f22f[_0x4d7cf8(0x1d1)];throw new Error(_0x26f22f[_0x4d7cf8(0x1a9)]);}logger[_0x4d7cf8(0x17d)](_0x26f22f['BxxHL']),process[_0x4d7cf8(0x115)][_0x4d7cf8(0x16e)]=_0x26f22f[_0x4d7cf8(0x1f2)];let _0x1a70d6=0x0;const _0x2cb39b=async()=>{const _0x56cec6=_0x4d7cf8;_0x1a70d6++,_0x26f22f['FtUtm'](_0x1a70d6,0x1)&&await this[_0x56cec6(0x174)]();};process['on'](_0x26f22f[_0x4d7cf8(0x112)],_0x2cb39b);}catch(_0x5af2f2){process['env'][_0x4d7cf8(0x16e)]=_0x26f22f['xzUbn'],logger[_0x4d7cf8(0x160)](_0x4d7cf8(0x17f)+_0x5af2f2);throw new Error(_0x5af2f2['toString']());}}async[a55_0x36589b(0x174)](){const _0x20f6be=a55_0x36589b,_0x267b73={};_0x267b73[_0x20f6be(0x153)]=_0x20f6be(0x189),_0x267b73[_0x20f6be(0x17a)]=_0x20f6be(0x1bd);const _0x57d4ad=_0x267b73;if(this['percy']&&this[_0x20f6be(0x165)]['isRunning']())try{await percyHelper[_0x20f6be(0x174)](this['percy']),logger[_0x20f6be(0x17d)](_0x57d4ad[_0x20f6be(0x153)]);}catch(_0x53a14c){logger['error'](_0x57d4ad[_0x20f6be(0x17a)],_0x53a14c['message']);}}async[a55_0x36589b(0x11e)](){const _0x54ca54=a55_0x36589b,_0x42ef38={};_0x42ef38[_0x54ca54(0x1ac)]=_0x54ca54(0x1c3),_0x42ef38[_0x54ca54(0x167)]=_0x54ca54(0x1a8);const _0x1075f0=_0x42ef38;if(helper[_0x54ca54(0x180)]()&&helper[_0x54ca54(0x177)](this[_0x54ca54(0x1f5)][_0x54ca54(0x19d)])&&(!this[_0x54ca54(0x19d)]||!this[_0x54ca54(0x19d)][_0x54ca54(0x1f0)]()))try{if(this[_0x54ca54(0x1f5)][_0x54ca54(0x151)]['skipBinaryInitialisation']){logger[_0x54ca54(0x160)](_0x1075f0[_0x54ca54(0x1ac)]);return;}this[_0x54ca54(0x19d)]=await helper['startLocalBinary'](this[_0x54ca54(0x1f5)]),logger[_0x54ca54(0x17d)](_0x1075f0['FIEVU']);}catch(_0x9aab83){logger[_0x54ca54(0x160)](_0x9aab83);throw new Error(_0x9aab83[_0x54ca54(0x15f)]());}}async['stopBrowserstackLocal'](){const _0x3cb910=a55_0x36589b,_0x251f33={};_0x251f33[_0x3cb910(0x1b6)]=_0x3cb910(0x15e),_0x251f33[_0x3cb910(0x1a2)]='Error\x20occured\x20while\x20stopping\x20local\x20binary';const _0x3385fc=_0x251f33;if(this['browserstackLocal']&&this[_0x3cb910(0x19d)][_0x3cb910(0x1f0)]())try{await helper[_0x3cb910(0x105)](this['browserstackLocal']),logger[_0x3cb910(0x17d)](_0x3385fc[_0x3cb910(0x1b6)]);}catch(_0x1993db){logger[_0x3cb910(0x168)](_0x3385fc['bxBzz'],_0x1993db['message']);}}async[a55_0x36589b(0x155)](){return PerformanceTester['measureWrapper'](PerformanceAutEvents['HUB_MANAGEMENT'],async()=>{const _0x576c35=a55_0x2f78;await hubAllocator[_0x576c35(0x179)](this[_0x576c35(0x1f5)]);})();}async[a55_0x36589b(0x1cc)](){const _0x391aaf=a55_0x36589b,_0x491a59={'mPnWd':function(_0x5dfeb8,_0x286f1b){return _0x5dfeb8(_0x286f1b);},'zeuRt':_0x391aaf(0x102),'RimSb':function(_0x285374,_0x268ec0,_0x45cb9f,_0x2696e9,_0x186df4,_0x40cf6b,_0x2bdc25){return _0x285374(_0x268ec0,_0x45cb9f,_0x2696e9,_0x186df4,_0x40cf6b,_0x2bdc25);},'iCXgS':_0x391aaf(0x17b),'IdNJP':'BrowserstackHealingInitFailed','lcogU':function(_0x1eadc5,_0xb52ce0){return _0x1eadc5(_0xb52ce0);},'JfabL':'../../package.json','ANWHy':'BrowserstackHealing.init','zQgRA':function(_0x32624a,_0x157f9c){return _0x32624a(_0x157f9c);},'pJiHP':function(_0x1bce95,_0x359f07){return _0x1bce95===_0x359f07;},'fCHVv':_0x391aaf(0x1a3),'aoYfQ':function(_0x57bb49,_0x50037a){return _0x57bb49===_0x50037a;},'uyMxP':function(_0x199180,_0x2571cb){return _0x199180===_0x2571cb;},'Hlytz':function(_0x4ef5ee,_0x30ca0b){return _0x4ef5ee===_0x30ca0b;},'TGcKW':_0x391aaf(0x113),'czrfT':_0x391aaf(0x1cd),'tEHPR':'Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','ZZiZN':_0x391aaf(0x1dc),'iaboY':function(_0x4566ae,_0x362a70){return _0x4566ae>=_0x362a70;},'lVPEe':function(_0x8b314b,_0x368fd3){return _0x8b314b<_0x368fd3;},'cEokO':function(_0x3858d0,_0x37f47a){return _0x3858d0>=_0x37f47a;},'XBDbf':_0x391aaf(0x137),'PAeze':_0x391aaf(0x198),'FIJAC':function(_0x37c862){return _0x37c862();}},_0x5371e6=PerformanceTester[_0x391aaf(0x133)](_0x491a59[_0x391aaf(0x13f)],async()=>{const _0x76acf2=_0x391aaf;try{const _0x20b89a=new Date(),_0x12c309=helper[_0x76acf2(0x1f6)](this[_0x76acf2(0x1f5)]),_0x97723e=_0x491a59[_0x76acf2(0x186)](require,path[_0x76acf2(0x152)](__dirname,_0x491a59[_0x76acf2(0x1a1)])),_0xc07640=_0x491a59[_0x76acf2(0x18f)](timeoutPromise,constants['TCG_AUTH_TIMEOUT'],_0x491a59[_0x76acf2(0x1ea)],_0x491a59[_0x76acf2(0x100)],_0x20b89a,this[_0x76acf2(0x1f5)],this['framework']),_0x39c767={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x491a59[_0x76acf2(0x176)](require,_0x491a59[_0x76acf2(0x15c)])[_0x76acf2(0x199)],'methodUsed':_0x491a59['ANWHy'],'proxyConfig':_0x12c309,'os':os['platform']()};if(_0x12c309&&_0x12c309[_0x76acf2(0x136)]){utilities[_0x76acf2(0x172)](constants[_0x76acf2(0x10a)],_0x39c767,this[_0x76acf2(0x1f5)],this['framework']);return;}const _0xdce021={};_0xdce021[_0x76acf2(0x18a)]=_0x12c309;const _0x17c0f4=await Promise[_0x76acf2(0x1a0)]([_0x97723e['init'](this[_0x76acf2(0x1f5)][_0x76acf2(0x1be)],this[_0x76acf2(0x1f5)]['userName'],constants['TCG_URL'],_0x491a59['zQgRA'](require,_0x491a59[_0x76acf2(0x15c)])[_0x76acf2(0x199)],_0xdce021)[_0x76acf2(0x1ef)](_0x5e299f=>{const _0x50a663=_0x76acf2;return _0xc07640[_0x50a663(0x1c8)](),_0x5e299f;}),_0xc07640]);_0x17c0f4[_0x76acf2(0x12d)]=_0x491a59[_0x76acf2(0x132)](_0x17c0f4[_0x76acf2(0x12d)],_0x491a59['fCHVv'])||_0x491a59[_0x76acf2(0x132)](_0x17c0f4['isHealingEnabled'],!![]);const _0x164e53=_0x491a59[_0x76acf2(0x147)](this[_0x76acf2(0x1f5)][_0x76acf2(0x185)],!![])||_0x491a59[_0x76acf2(0x1bc)](this[_0x76acf2(0x1f5)]['selfHeal'],_0x491a59[_0x76acf2(0x13a)]);if(_0x491a59[_0x76acf2(0x14b)](_0x17c0f4['message'],constants[_0x76acf2(0x10e)])&&_0x164e53)logger['info'](_0x491a59[_0x76acf2(0x10d)]);else{if(!_0x17c0f4[_0x76acf2(0x161)]&&_0x491a59['aoYfQ'](_0x17c0f4[_0x76acf2(0x1b8)],0x1f7)&&_0x164e53)logger['info'](_0x491a59[_0x76acf2(0x114)]),utilities[_0x76acf2(0x172)](constants['TCG_DOWN'],_0x39c767,this[_0x76acf2(0x1f5)],this['framework']);else{if(!_0x17c0f4[_0x76acf2(0x161)]&&_0x164e53){logger[_0x76acf2(0x17d)](_0x491a59[_0x76acf2(0x1f9)]);const _0x34e500={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x491a59[_0x76acf2(0x176)](require,_0x491a59[_0x76acf2(0x15c)])[_0x76acf2(0x199)],'methodUsed':_0x491a59[_0x76acf2(0x14c)],'proxyConfig':_0x12c309,'os':os[_0x76acf2(0x1e1)]()};utilities[_0x76acf2(0x172)](constants[_0x76acf2(0x1ae)],_0x34e500,this[_0x76acf2(0x1f5)],this['framework']);}else{if(_0x17c0f4[_0x76acf2(0x161)]&&!_0x17c0f4[_0x76acf2(0x12d)]&&_0x164e53)logger['info'](_0x491a59['ZZiZN']);else{if(_0x491a59['iaboY'](_0x17c0f4['status'],0xc8)&&_0x491a59['lVPEe'](_0x17c0f4[_0x76acf2(0x1b8)],0x12c))utilities['fireFunnelTestEvent'](constants['AI_INIT_SUCCESSFUL'],_0x39c767,this[_0x76acf2(0x1f5)],this[_0x76acf2(0x121)]);else{if(_0x491a59['cEokO'](_0x17c0f4[_0x76acf2(0x1b8)],0x190))_0x39c767[_0x76acf2(0x1b8)]=_0x17c0f4[_0x76acf2(0x1b8)],utilities[_0x76acf2(0x172)](constants[_0x76acf2(0x12e)],_0x39c767,this[_0x76acf2(0x1f5)],this[_0x76acf2(0x121)]);else!_0x17c0f4[_0x76acf2(0x1b8)]&&utilities[_0x76acf2(0x172)](constants[_0x76acf2(0x1d8)],_0x39c767,this[_0x76acf2(0x1f5)],this[_0x76acf2(0x121)]);}}}}}if(_0x17c0f4[_0x76acf2(0x161)]&&_0x17c0f4[_0x76acf2(0x12d)]){const _0x33e515={};_0x33e515[_0x76acf2(0x157)]=_0x17c0f4;const _0x4d2165=_0x33e515;_0x12c309&&(_0x4d2165[_0x76acf2(0x145)]=_0x12c309),_0x4d2165[_0x76acf2(0x121)]=this[_0x76acf2(0x121)],_0x4d2165[_0x76acf2(0x125)]=this['config'],helper['setupTcgConfigFile'](_0x4d2165),logger[_0x76acf2(0x160)](_0x491a59[_0x76acf2(0x1a5)]);}}catch(_0x27db4a){logger[_0x76acf2(0x160)](_0x76acf2(0x12b)+(_0x27db4a[_0x76acf2(0x1b1)]?_0x27db4a[_0x76acf2(0x1b1)]:''));}});await _0x491a59[_0x391aaf(0x120)](_0x5371e6);}['setupKeepAlive'](){const _0x248bd1=a55_0x36589b,_0xdc97e7={'eNVuM':function(_0x48a324,_0xf17772){return _0x48a324(_0xf17772);},'rbsIm':_0x248bd1(0x1a4)};_0xdc97e7['eNVuM'](require,_0xdc97e7[_0x248bd1(0x12f)])();}[a55_0x36589b(0x10c)](){const _0x49a40f=a55_0x36589b,_0x577176={};_0x577176[_0x49a40f(0x1ad)]=_0x49a40f(0x182),_0x577176[_0x49a40f(0x1b2)]=_0x49a40f(0xff);const _0x26a8c1=_0x577176,_0x14810c=_0x5a3b6d=>{const _0x394f8e=_0x49a40f;logger['error'](_0x5a3b6d[_0x394f8e(0x1b1)]),logger[_0x394f8e(0x160)](util[_0x394f8e(0x1d6)](_0x5a3b6d)),this[_0x394f8e(0x138)][_0x394f8e(0x119)](util[_0x394f8e(0x1d6)]('%j',_0x5a3b6d)),PerformanceTester[_0x394f8e(0x1b5)](_0x5a3b6d);};process['on'](_0x26a8c1['FMzoj'],_0x14810c),process['on'](_0x26a8c1[_0x49a40f(0x1b2)],_0x14810c);}async[a55_0x36589b(0x1c0)](_0x4b69bd){const _0x31fff6=a55_0x36589b,_0x5327f7={};_0x5327f7['QhyFV']=_0x31fff6(0x106),_0x5327f7[_0x31fff6(0x1d5)]=function(_0x5129d7,_0x3ec8ef){return _0x5129d7+_0x3ec8ef;},_0x5327f7['YAwHE']=_0x31fff6(0x1e2),_0x5327f7['YeYxi']=function(_0x4a7796,_0x5e8773){return _0x4a7796+_0x5e8773;},_0x5327f7[_0x31fff6(0x16f)]=_0x31fff6(0x110);const _0x1701aa=_0x5327f7,_0x1be846=_0x1701aa['QhyFV'][_0x31fff6(0x1d9)]('|');let _0x18c739=0x0;while(!![]){switch(_0x1be846[_0x18c739++]){case'0':if(this[_0x1701aa[_0x31fff6(0x1d5)](_0x1701aa[_0x31fff6(0x146)],_0x4b69bd)])return;continue;case'1':this[_0x31fff6(0x194)]=_0x4b69bd;continue;case'2':await TestHubHandler[_0x31fff6(0x130)](_0x4b69bd);continue;case'3':this[_0x1701aa['YeYxi'](_0x1701aa[_0x31fff6(0x146)],_0x4b69bd)]=!![];continue;case'4':logger[_0x31fff6(0x17d)](_0x1701aa[_0x31fff6(0x1bf)](_0x1701aa[_0x31fff6(0x16f)],_0x4b69bd));continue;}break;}}[a55_0x36589b(0x149)](){const _0x27a1d7=a55_0x36589b,_0x42a601={};_0x42a601[_0x27a1d7(0x1d0)]=function(_0xc4b029,_0x53f91e){return _0xc4b029===_0x53f91e;},_0x42a601[_0x27a1d7(0x142)]='Calling\x20Build\x20Stop\x20from\x20ExitHandler',_0x42a601[_0x27a1d7(0x1a6)]=function(_0x539030,_0x29169f){return _0x539030>_0x29169f;},_0x42a601['asInq']='log/events.json';const _0x4e8ec6=_0x42a601;let _0x59738f=0x0;return async()=>{const _0x3b7be6=_0x27a1d7;_0x59738f++;if(_0x4e8ec6[_0x3b7be6(0x1d0)](_0x59738f,0x1)){helper['checkStopLocalBinaryOnExit'](this[_0x3b7be6(0x121)])&&await this[_0x3b7be6(0x14d)]();try{logger[_0x3b7be6(0x160)](_0x4e8ec6['UkYMg']),await TestHubHandler[_0x3b7be6(0x130)](_0x59738f);}catch(_0x583d37){logger[_0x3b7be6(0x160)](_0x3b7be6(0x13c)+util[_0x3b7be6(0x1d6)](_0x583d37));}PerformanceTester[_0x3b7be6(0x1e0)](PerformanceEvents[_0x3b7be6(0x1af)]);if(PerformanceTester[_0x3b7be6(0x169)]()){const {measures:_0x371b7e,errors:_0xcc78f9}=await PerformanceTester[_0x3b7be6(0x143)](),_0x4d7051={};if(_0x371b7e&&_0x4e8ec6[_0x3b7be6(0x1a6)](_0x371b7e[_0x3b7be6(0x156)],0x0)||_0xcc78f9&&_0x4e8ec6[_0x3b7be6(0x1a6)](_0xcc78f9['length'],0x0)){const _0x21f74c={};_0x21f74c[_0x3b7be6(0x15a)]=_0x371b7e,_0x21f74c['exceptions']=_0xcc78f9,Object[_0x3b7be6(0x131)](_0x4d7051,_0x21f74c);}try{const _0x2f8ac2=await helper['sendToEDS'](_0x4d7051,this['config']);logger[_0x3b7be6(0x160)](_0x3b7be6(0x159)+constants[_0x3b7be6(0x188)]+_0x3b7be6(0x1de)+_0x2f8ac2[_0x3b7be6(0x139)]);}catch(_0x16f02a){logger[_0x3b7be6(0x160)]('Failed\x20to\x20send\x20data\x20to\x20'+constants[_0x3b7be6(0x188)]+_0x3b7be6(0x170)+util[_0x3b7be6(0x1d6)](_0x16f02a));}try{fs[_0x3b7be6(0x1fa)](_0x4e8ec6[_0x3b7be6(0x109)],JSON[_0x3b7be6(0x15d)](_0x4d7051));}catch(_0x4c244a){logger[_0x3b7be6(0x160)]('Error\x20in\x20writing\x20events\x20to\x20file\x20'+_0x4c244a);}}}};}}exports['default']=BrowserStackSetup;