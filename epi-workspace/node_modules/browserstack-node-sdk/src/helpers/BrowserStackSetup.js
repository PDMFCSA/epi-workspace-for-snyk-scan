const a94_0x1eaaa9=a94_0x3b31;(function(_0x1ca7ab,_0x2175ea){const _0x3a2e29=a94_0x3b31,_0x38823d=_0x1ca7ab();while(!![]){try{const _0x38352a=parseInt(_0x3a2e29(0x134))/0x1*(parseInt(_0x3a2e29(0xed))/0x2)+-parseInt(_0x3a2e29(0x9e))/0x3+parseInt(_0x3a2e29(0x8e))/0x4*(-parseInt(_0x3a2e29(0x15a))/0x5)+-parseInt(_0x3a2e29(0xc8))/0x6+-parseInt(_0x3a2e29(0x188))/0x7*(parseInt(_0x3a2e29(0xb2))/0x8)+parseInt(_0x3a2e29(0x9f))/0x9*(parseInt(_0x3a2e29(0xbb))/0xa)+-parseInt(_0x3a2e29(0xfe))/0xb;if(_0x38352a===_0x2175ea)break;else _0x38823d['push'](_0x38823d['shift']());}catch(_0x2dfe00){_0x38823d['push'](_0x38823d['shift']());}}}(a94_0x1060,0xa22f4));const util=require(a94_0x1eaaa9(0x90)),os=require('os'),path=require('path'),{v4:uuidv4}=require(a94_0x1eaaa9(0x14e)),fs=require('fs'),constants=require('../bin/utils/constants'),logger=require(a94_0x1eaaa9(0x103))['winstonLogger'],fileLogger=require(a94_0x1eaaa9(0x103))[a94_0x1eaaa9(0x17f)],{getLogDir}=require(a94_0x1eaaa9(0x103)),helper=require('./helper'),utilities=require(a94_0x1eaaa9(0x106)),percyHelper=require(a94_0x1eaaa9(0x17e)),hubAllocator=require('../hubAllocationMethods'),PerformanceTester=require(a94_0x1eaaa9(0x98)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a94_0x1eaaa9(0x148)),{setPercyFlag}=require('./testhub/utils'),TestHubHandler=require(a94_0x1eaaa9(0xf6)),timeoutPromise=require(a94_0x1eaaa9(0xab)),BrowserstackCLI=require(a94_0x1eaaa9(0xeb)),LoadTestModule=require(a94_0x1eaaa9(0x131)),{getEdsInstrumentationAPIUrl}=require('../bin/utils/apiUtilityMethods'),ClientTroubleShootingService=require(a94_0x1eaaa9(0x9a));function a94_0x3b31(_0x58f0b2,_0x307c20){const _0x106033=a94_0x1060();return a94_0x3b31=function(_0x3b312f,_0x22c308){_0x3b312f=_0x3b312f-0x82;let _0x378159=_0x106033[_0x3b312f];return _0x378159;},a94_0x3b31(_0x58f0b2,_0x307c20);}function a94_0x1060(){const _0x5a6b86=['accessKey','proxyConfig','turboScaleGridDetails','AdltT','format','1225554CUnjxC','beforeExit','aWMwW','exceptions','BROWSERSTACK_TURBOSCALE','./logger','FGjID','vgRxe','./utilities','turboScaleUrl','requireSeleniumWebdriverCheck','handleExceptions','isBrowserstackInfra','OKyfG','LSbBA','captureError','stringify','selenium-webdriver','1|2|17|19|21|5|20|9|13|16|22|12|7|0|8|4|6|18|15|14|23|3|10|11','getFinalCaps','env','setupTcgConfigFile','../../package.json','SIGABRT','uqwWr','../ai-sdk-node/bundle','status','CGcVp','setCLICaps','aKVFo','intExitHandler','YlwLB','YjWjJ','setupTCGAuth','then','SIGTERM','BrowserstackHealing.init\x20method\x20timed\x20out','BrowserstackHealing.init','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','localOptions','browserStackLocalOptions','getPackageVersion','LDMAS','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','finalize','hOrNp','false','split','xKHzH','close','Percy\x20started\x20successfully','../bin/v2/modules/loadTestModule','stop','dfFLo','833ggXDmr','toString','getLocalIdentifier','tcg\x20config\x20setup\x20successful.','toLowerCase','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','isEnabled','dokck','SDK\x20run\x20started\x20with\x20id:\x20','constructor','No\x20config\x20provided.','rCLsm','uncaughtException','PGMZh','TCG_URL','TCG_DOWN','PkmFI','playwrightUrl','isHealingEnabled','Failed\x20to\x20send\x20data\x20to\x20','./performance/constants','vEHlh','MjBtw','preInitialize','isNotUndefined','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','uuid','Error\x20occured\x20while\x20stopping\x20local\x20binary','platform','isRunning','info','EheAN','hcHcM','handled','localIdentifier','KtVjD','Local\x20binary\x20started\x20successfully','YAFUb','25700aAJGTf','measures','eEKIz','errorMessage','assign','setCredentialsFromYmlConfig','aBlQl','gtLLU','?caps=','fireFunnelTestEvent','platforms','getTurboScaleGridDetails','turboScaleOptions','YkZIy','ats-repeater','NQoSc','percy','xQhYF','SDKTestAttempted','compareVersions','VlawL','generateLocalIdentifier','browserstackLocal','setupKeepAlive','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','bstackConfig','tWoTq','wpchd','exitHandler','end','RyhWo','error','isUndefined','setupBrowserstackLocal','2|4|0|3|1','envConfig','./percy/utils','fileLogger','SDK_CLEANUP','setLogLevel','getConfigPath','hubUrl','aiHeal:tcgAuth','HUB_MANAGEMENT','unhandledErrors','race','35TMxVdb','true','getInstance','gQKSY','IPZVz','RbVVY','debug','CJkTt','\x20with\x20error\x20','QojSa','Error\x20in\x20percy\x20setup\x20','TCG_AUTH_TIMEOUT','vrmdZ','skipBinaryInitialisation','2|1|4|0|7|5|6|3','length','NFxOW','stopBrowserstackLocal','AqUeg','Calling\x20Build\x20Stop\x20from\x20ExitHandler','isAuthenticated','92ODeHZy','zJedY','util','proxyUrl','useW3C','fnWOd','yIzbC','mPSGm','selfHeal','SIGQUIT','./performance/performance-tester','pxVWw','../bin/utils/clientTroubleshootingService','AI_PROXY_FAILURE','turboScale','INVALID_INIT_RESP_WITH_USER_IMPACT','2181531boLEMN','10014210lHgNoC','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','isTrue','events.json','initialize','win32','setProxySettings','jLmeM','UOxNm','userName\x20or\x20accessKey\x20is\x20not\x20defined','Rfvqu','cliConfig','./timeoutPromise','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','custom-repeater','kGCml','integrations','message','TCG_AUTH_FAILURE','600568NOTaag','auqae','getAccessKey','UqjHA','config','Error\x20occured\x20while\x20stopping\x20percy','forceLocal','rjNrA','customRepeaters','10GKczXK','4.5.0','sendToEDS','cRPhm','Ijnwz','framework','sanitizeCaps','playwright','startPercy','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','setHandlePWError','parallelsPerPlatform','FRAMEWORK','1699494obimtJ','ZpRZI','wdzhX','skipSessionName','tcgAuthConfig','includes','PvgSA','codeceptjs','hMjvK','reportFinalDetectionState','skipSessionStatus','isTurboScaleSession','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','xGmAG','UfZef','ZCTaJ','killSignal','version','BROWSERSTACK_PERCY','writeFileSync','reportProcessInterruptionSituation','warn','normalizeTestReportingEnvVars','setBrowserstackInfraFromConfig','nlNPi','stopPercy','uOytf','testContextOptions','IkWer','setupPercy','TdHLt','\x20with\x20response\x20','configPath','getHubUrl','fFAQU','../bin/v2/browserstackCLI','XTnYB','2802xSaVga','sdkRunId','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','KvzSz','LTS\x20session\x20enabled\x20for\x20this\x20run.\x20SDK\x20run\x20id:\x20','join','cancel','Error\x20in\x20sending\x20testhub\x20stop:\x20','__isPlaywrightInstalled','./testhub/testhubHandler','setUpHubUrl','Error\x20in\x20writing\x20events\x20to\x20file\x20'];a94_0x1060=function(){return _0x5a6b86;};return a94_0x1060();}class BrowserStackSetup{constructor(_0x5d3375,_0x576d28){const _0x24963d=a94_0x1eaaa9,_0x1169b7={'UOxNm':_0x24963d(0x110),'lzlzz':_0x24963d(0x13e),'YjWjJ':function(_0x1163a2){return _0x1163a2();}},_0x1e9d8c=_0x1169b7[_0x24963d(0xa7)][_0x24963d(0x12d)]('|');let _0x44f619=0x0;while(!![]){switch(_0x1e9d8c[_0x44f619++]){case'0':global[_0x24963d(0xc0)]=_0x576d28;continue;case'1':this[_0x24963d(0x186)]=[];continue;case'2':helper[_0x24963d(0xde)]();continue;case'3':helper['setLogDir'](this[_0x24963d(0xb6)]);continue;case'4':if(this[_0x24963d(0xb6)][_0x24963d(0x179)])throw new Error(this[_0x24963d(0xb6)][_0x24963d(0x179)]);continue;case'5':this[_0x24963d(0xe8)]=helper[_0x24963d(0x182)](_0x5d3375);continue;case'6':helper[_0x24963d(0xdf)](this['config'],this[_0x24963d(0xaa)]);continue;case'7':this['framework']=_0x576d28;continue;case'8':if(helper[_0x24963d(0x17a)](this['config']))throw new Error(_0x1169b7['lzlzz']);continue;case'9':this['cliConfig']=helper[_0x24963d(0x11a)](_0x5d3375);continue;case'10':helper[_0x24963d(0x181)](this['config'],this[_0x24963d(0xaa)],this[_0x24963d(0x17d)]);continue;case'11':PerformanceTester['startMonitoring']();continue;case'12':this[_0x24963d(0xee)]=_0x1169b7[_0x24963d(0x11e)](uuidv4);continue;case'13':this['config'][_0x24963d(0x164)]=this[_0x24963d(0xb6)]['platforms']||[];continue;case'14':this[_0x24963d(0xb6)]['testContextOptions']['skipSessionName']=!helper[_0x24963d(0x10a)]()||helper[_0x24963d(0xa1)](this[_0x24963d(0xb6)][_0x24963d(0xe3)][_0x24963d(0xcb)]);continue;case'15':this['config'][_0x24963d(0xe3)][_0x24963d(0xd2)]=!helper['isBrowserstackInfra']()||helper['isTrue'](this[_0x24963d(0xb6)][_0x24963d(0xe3)][_0x24963d(0xd2)]);continue;case'16':this[_0x24963d(0xb6)][_0x24963d(0xe3)]=this[_0x24963d(0xb6)][_0x24963d(0xe3)]||{};continue;case'17':this[_0x24963d(0x17d)]=helper['setEnvCaps']();continue;case'18':helper[_0x24963d(0x15f)](this[_0x24963d(0xb6)]);continue;case'19':this[_0x24963d(0x170)]=null;continue;case'20':this['config']=helper['readConfig'](this[_0x24963d(0xe8)]);continue;case'21':this['percy']=null;continue;case'22':this[_0x24963d(0x15d)]={};continue;case'23':helper[_0x24963d(0x111)](this[_0x24963d(0xb6)],this[_0x24963d(0xaa)],this[_0x24963d(0x17d)]);continue;}break;}}['preInitialize'](_0x2422c4){const _0x1967ca=a94_0x1eaaa9,_0x2c62e0={'jqUoi':_0x1967ca(0xa8),'PkmFI':function(_0x3d1eb0,_0xa13b34){return _0x3d1eb0===_0xa13b34;},'eEKIz':function(_0x35b78a,_0x589230){return _0x35b78a===_0x589230;},'fnWOd':_0x1967ca(0xaf),'gtLLU':_0x1967ca(0x16c),'OKyfG':function(_0x1de4ad,_0x168847){return _0x1de4ad<_0x168847;},'ZCTaJ':function(_0x517f28,_0x22f08d){return _0x517f28(_0x22f08d);},'yIzbC':_0x1967ca(0x10f),'CGcVp':_0x1967ca(0xbc),'cRPhm':_0x1967ca(0x172),'wTGCQ':_0x1967ca(0x124),'zJedY':_0x1967ca(0x121),'auqae':'SIGINT','aBlQl':'SIGHUP','xKHzH':function(_0x3354fb,_0x4f40a3){return _0x3354fb!==_0x4f40a3;},'vrmdZ':_0x1967ca(0xa4),'dokck':_0x1967ca(0x115),'RbVVY':_0x1967ca(0x97),'rjNrA':'SIGBREAK','rCLsm':_0x1967ca(0xff)},_0x1b30e3=this[_0x1967ca(0xc0)];global[_0x1967ca(0xb6)]=this['config'],helper[_0x1967ca(0xc1)](this[_0x1967ca(0xb6)]),this[_0x1967ca(0xd8)]=null,global[_0x1967ca(0xee)]=this[_0x1967ca(0xee)],logger['info'](_0x1967ca(0x13c)+this[_0x1967ca(0xee)]),!this[_0x1967ca(0xb6)][_0x1967ca(0x126)]&&(this['config'][_0x1967ca(0x126)]=this[_0x1967ca(0xb6)][_0x1967ca(0x125)]||{});if(helper[_0x1967ca(0x17a)](helper['getUserName'](this['config']))||helper['isUndefined'](helper[_0x1967ca(0xb4)](this[_0x1967ca(0xb6)])))throw new Error(_0x2c62e0['jqUoi']);helper['getLocalConfig'](this[_0x1967ca(0xb6)])&&helper['isUndefined'](helper[_0x1967ca(0x136)](this[_0x1967ca(0xb6)]))&&(!helper[_0x1967ca(0x17a)](this['config'][_0x1967ca(0x126)])&&_0x2c62e0[_0x1967ca(0x144)](this[_0x1967ca(0xb6)]['browserStackLocalOptions'][_0x1967ca(0x13d)],Object)?!helper[_0x1967ca(0xa1)](this[_0x1967ca(0xb6)][_0x1967ca(0x126)]['skipBinaryInitialisation'])&&(this[_0x1967ca(0xb6)]['browserStackLocalOptions']['localIdentifier']=helper[_0x1967ca(0x16f)]()):this['config'][_0x1967ca(0x126)]={'localIdentifier':helper[_0x1967ca(0x16f)]()});this['config'][_0x1967ca(0x126)][_0x1967ca(0x86)]=helper[_0x1967ca(0xa1)](this['config'][_0x1967ca(0x126)][_0x1967ca(0x86)]),helper[_0x1967ca(0xc5)](this[_0x1967ca(0xb6)]);if(_0x2c62e0['eEKIz'](_0x1b30e3,_0x2c62e0[_0x1967ca(0x93)]))return;this[_0x1967ca(0x109)]();process[_0x1967ca(0x112)][_0x1967ca(0x102)]&&(this[_0x1967ca(0xb6)][_0x1967ca(0x9c)]=helper[_0x1967ca(0xa1)](process[_0x1967ca(0x112)][_0x1967ca(0x102)]),this[_0x1967ca(0xb6)][_0x1967ca(0x166)]=this[_0x1967ca(0xb6)][_0x1967ca(0x166)]||{});helper[_0x1967ca(0xd3)](this[_0x1967ca(0xb6)])&&(process[_0x1967ca(0x112)][_0x1967ca(0x102)]=!![]);LoadTestModule['isLTSSession'](this[_0x1967ca(0xb6)])&&logger[_0x1967ca(0x18e)](_0x1967ca(0xf1)+this[_0x1967ca(0xee)]);if(!helper[_0x1967ca(0x10a)]()){try{process['env']['FRAMEWORK']=_0x1b30e3,utilities[_0x1967ca(0x163)](_0x2c62e0['gtLLU'],{},this['config'],this['framework']);}catch(_0x1130e2){logger[_0x1967ca(0x18e)](_0x1967ca(0xef)+_0x1130e2);}return;}if(helper[_0x1967ca(0x108)](_0x1b30e3)){if(global[_0x1967ca(0xf5)])return;_0x2c62e0[_0x1967ca(0x10b)](_0x2c62e0[_0x1967ca(0xd7)](parseInt,helper['getPackageVersion'](_0x2c62e0[_0x1967ca(0x94)])),0x3)&&(this['config'][_0x1967ca(0x92)]=![]),_0x2c62e0[_0x1967ca(0x15c)](helper[_0x1967ca(0x16d)](helper[_0x1967ca(0x127)](_0x2c62e0[_0x1967ca(0x94)]),_0x2c62e0[_0x1967ca(0x119)]),0x1)&&(this[_0x1967ca(0xb6)][_0x1967ca(0x92)]=!![]);}(helper['isUndefined'](this[_0x1967ca(0xb6)][_0x1967ca(0x164)])||helper[_0x1967ca(0x17a)](this[_0x1967ca(0xb6)][_0x1967ca(0x164)][_0x1967ca(0x88)]))&&(helper['isUndefined'](this[_0x1967ca(0xb6)][_0x1967ca(0xc6)])?logger[_0x1967ca(0x152)](_0x2c62e0[_0x1967ca(0xbe)]):logger[_0x1967ca(0xdd)](_0x2c62e0['wTGCQ']),this[_0x1967ca(0xb6)]['platforms']=[]);!this[_0x1967ca(0xb6)]['testContextOptions']&&(this[_0x1967ca(0xb6)][_0x1967ca(0xe3)]={});try{process[_0x1967ca(0x112)][_0x1967ca(0xc7)]=_0x2422c4['_'][0x0],utilities[_0x1967ca(0x163)](_0x2c62e0[_0x1967ca(0x161)],{},this[_0x1967ca(0xb6)],this[_0x1967ca(0xc0)]);}catch(_0x120d2b){logger[_0x1967ca(0x18e)]('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x120d2b);}!this[_0x1967ca(0xb6)]['disableAutoCaptureLogs']&&logger[_0x1967ca(0x152)](constants['AUTOLOGCAPTURE_NOTIFICATION']),this[_0x1967ca(0x11c)]=this['intExitHandler']['bind'](this),process['on'](_0x2c62e0[_0x1967ca(0x8f)],this[_0x1967ca(0x11c)]),process['on'](_0x2c62e0[_0x1967ca(0xb3)],this['intExitHandler']),process['on'](_0x2c62e0[_0x1967ca(0x160)],this['intExitHandler']),_0x2c62e0[_0x1967ca(0x12e)](process[_0x1967ca(0x150)],_0x2c62e0[_0x1967ca(0x85)])?(process['on'](_0x2c62e0[_0x1967ca(0x13b)],this[_0x1967ca(0x11c)]),process['on'](_0x2c62e0[_0x1967ca(0x18d)],this[_0x1967ca(0x11c)])):process['on'](_0x2c62e0[_0x1967ca(0xb9)],this[_0x1967ca(0x11c)]),process['on'](_0x2c62e0[_0x1967ca(0x13f)],this[_0x1967ca(0x176)]());}async[a94_0x1eaaa9(0xa3)](_0x24a1c4){const _0x5f578f=a94_0x1eaaa9,_0x1d9734={'tWoTq':_0x5f578f(0x168),'hMjvK':_0x5f578f(0xad),'hOrNp':_0x5f578f(0x189),'UfZef':function(_0x361d44,_0x2d58be){return _0x361d44===_0x2d58be;},'LSbBA':_0x5f578f(0xc2),'aWMwW':function(_0x39e8e4,_0x17168a){return _0x39e8e4+_0x17168a;},'JjAHm':_0x5f578f(0x162),'EheAN':function(_0x18f7ce,_0x246440){return _0x18f7ce(_0x246440);},'fFAQU':_0x5f578f(0xcf)};this[_0x5f578f(0x14b)](_0x24a1c4);if(helper[_0x5f578f(0xd3)](this[_0x5f578f(0xb6)])){const _0x15af25=await helper[_0x5f578f(0x165)](this[_0x5f578f(0xb6)]);this['config'][_0x5f578f(0xfb)]=_0x15af25,_0x15af25['isTrialGrid']&&helper[_0x5f578f(0x14c)](this[_0x5f578f(0xb6)]['browserstackLocal'])&&helper[_0x5f578f(0xa1)](this[_0x5f578f(0xb6)][_0x5f578f(0x170)])&&(this[_0x5f578f(0xb6)]['browserStackLocalOptions'][_0x5f578f(0x156)]=_0x1d9734[_0x5f578f(0x174)],this[_0x5f578f(0xb6)][_0x5f578f(0x126)][_0x1d9734[_0x5f578f(0xd0)]]=_0x15af25[_0x5f578f(0xba)][_0x5f578f(0xf2)](','),this['config'][_0x5f578f(0x126)][_0x5f578f(0xb8)]=_0x1d9734[_0x5f578f(0x12b)]),this[_0x5f578f(0xb6)][_0x5f578f(0x107)]=_0x15af25['url'],this['framework']&&_0x1d9734[_0x5f578f(0xd6)](this[_0x5f578f(0xc0)][_0x5f578f(0x138)](),_0x1d9734['LSbBA'])?this[_0x5f578f(0xb6)][_0x5f578f(0x107)]=_0x1d9734[_0x5f578f(0x100)](_0x15af25[_0x5f578f(0x145)],_0x1d9734['JjAHm']):constants[_0x5f578f(0x183)]=helper[_0x5f578f(0xe9)](this['config']),logger['debug'](_0x5f578f(0x14d)+constants[_0x5f578f(0x183)]);}helper[_0x5f578f(0xa5)](this[_0x5f578f(0xb6)]),this[_0x5f578f(0x171)](),_0x1d9734[_0x5f578f(0x153)](setPercyFlag,this),await this[_0x5f578f(0x17b)](),![_0x1d9734[_0x5f578f(0xea)],_0x1d9734[_0x5f578f(0x10c)]][_0x5f578f(0xcd)](this[_0x5f578f(0xc0)])&&!helper[_0x5f578f(0xd3)](this['config'])&&!helper['getCentralUser']()['central_scanner']&&await this[_0x5f578f(0xf7)]();}async[a94_0x1eaaa9(0xe5)](){const _0x175728=a94_0x1eaaa9,_0x59546e={};_0x59546e['MjBtw']=function(_0x1ab09b,_0x4e0f07){return _0x1ab09b===_0x4e0f07;},_0x59546e[_0x175728(0xf0)]=_0x175728(0x12c),_0x59546e['YkZIy']=_0x175728(0xa0),_0x59546e[_0x175728(0xfc)]=_0x175728(0x130),_0x59546e[_0x175728(0x11d)]='true',_0x59546e['krany']='beforeExit';const _0x242581=_0x59546e;if(helper['isTrue'](this['config'][_0x175728(0x16a)])&&(!this[_0x175728(0x16a)]||!this[_0x175728(0x16a)][_0x175728(0x151)]()))try{this[_0x175728(0x16a)]=await percyHelper[_0x175728(0xc3)](this['config']);if(!this['percy']){process[_0x175728(0x112)][_0x175728(0xda)]=_0x242581['KvzSz'];throw new Error(_0x242581[_0x175728(0x167)]);}logger[_0x175728(0x152)](_0x242581[_0x175728(0xfc)]),process[_0x175728(0x112)][_0x175728(0xda)]=_0x242581[_0x175728(0x11d)];let _0x14de96=0x0;const _0x32ecbb=async()=>{const _0x282ad8=_0x175728;_0x14de96++,_0x242581[_0x282ad8(0x14a)](_0x14de96,0x1)&&await this[_0x282ad8(0xe1)]();};process['on'](_0x242581['krany'],_0x32ecbb);}catch(_0x41ce40){process[_0x175728(0x112)][_0x175728(0xda)]=_0x242581[_0x175728(0xf0)],logger[_0x175728(0x18e)](_0x175728(0x83)+_0x41ce40);throw new Error(_0x41ce40[_0x175728(0x135)]());}}async[a94_0x1eaaa9(0xe1)](){const _0xb3555a=a94_0x1eaaa9,_0x57e2ab={};_0x57e2ab[_0xb3555a(0x175)]='Percy\x20stopped',_0x57e2ab[_0xb3555a(0x104)]=_0xb3555a(0xb7);const _0x4d689c=_0x57e2ab;if(this['percy']&&this['percy'][_0xb3555a(0x151)]())try{await percyHelper[_0xb3555a(0xe1)](this[_0xb3555a(0x16a)]),logger['info'](_0x4d689c['wpchd']);}catch(_0x442282){logger['error'](_0x4d689c['FGjID'],_0x442282[_0xb3555a(0xb0)]);}}async[a94_0x1eaaa9(0x17b)](){const _0x318800=a94_0x1eaaa9,_0x573c46={};_0x573c46['PvgSA']=_0x318800(0xc4),_0x573c46[_0x318800(0xae)]=_0x318800(0x158);const _0x36dac8=_0x573c46;if(helper[_0x318800(0x10a)]()&&helper[_0x318800(0xa1)](this[_0x318800(0xb6)]['browserstackLocal'])&&(!this[_0x318800(0x170)]||!this[_0x318800(0x170)]['isRunning']()))try{if(this[_0x318800(0xb6)][_0x318800(0x126)]['skipBinaryInitialisation']){logger[_0x318800(0x18e)](_0x36dac8[_0x318800(0xce)]);return;}this[_0x318800(0x170)]=await helper['startLocalBinary'](this[_0x318800(0xb6)]),logger[_0x318800(0x152)](_0x36dac8[_0x318800(0xae)]);}catch(_0x590f0e){logger[_0x318800(0x18e)](_0x590f0e);throw new Error(_0x590f0e['toString']());}}async[a94_0x1eaaa9(0x8a)](){const _0x1f4aa6=a94_0x1eaaa9,_0x2ff1b8={};_0x2ff1b8[_0x1f4aa6(0xca)]='Local\x20binary\x20stopped',_0x2ff1b8[_0x1f4aa6(0x18c)]=_0x1f4aa6(0x14f);const _0x64d3f3=_0x2ff1b8;if(this[_0x1f4aa6(0x170)]&&this[_0x1f4aa6(0x170)][_0x1f4aa6(0x151)]())try{await helper['stopLocalBinary'](this['browserstackLocal']),logger[_0x1f4aa6(0x152)](_0x64d3f3[_0x1f4aa6(0xca)]);}catch(_0x4e5298){logger['error'](_0x64d3f3[_0x1f4aa6(0x18c)],_0x4e5298[_0x1f4aa6(0xb0)]);}}async[a94_0x1eaaa9(0xf7)](){const _0x204a0b=a94_0x1eaaa9;return PerformanceTester['measureWrapper'](PerformanceAutEvents[_0x204a0b(0x185)],async()=>{const _0x431c51=_0x204a0b;await hubAllocator['allocateHub'](this[_0x431c51(0xb6)]);})();}async[a94_0x1eaaa9(0x11f)](){const _0x463c5c=a94_0x1eaaa9,_0x125447={'XTnYB':function(_0x165041,_0x5c6686){return _0x165041(_0x5c6686);},'vEHlh':_0x463c5c(0x117),'fnllq':function(_0x278479,_0x44f3c3,_0x2a0736,_0x295990,_0x3e8260,_0x1706b3,_0x46d22a){return _0x278479(_0x44f3c3,_0x2a0736,_0x295990,_0x3e8260,_0x1706b3,_0x46d22a);},'PGMZh':_0x463c5c(0x122),'RyhWo':'BrowserstackHealingInitFailed','YAFUb':function(_0x33e839,_0x24c6ff){return _0x33e839(_0x24c6ff);},'NQoSc':_0x463c5c(0x114),'vgRxe':_0x463c5c(0x123),'xGmAG':function(_0x41f29e,_0x3f6575){return _0x41f29e===_0x3f6575;},'Ijnwz':_0x463c5c(0x189),'IkWer':function(_0x357ad6,_0x388ed1){return _0x357ad6===_0x388ed1;},'hcHcM':function(_0x8a82ea,_0x32c168){return _0x8a82ea===_0x32c168;},'dfFLo':'Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','uOytf':_0x463c5c(0x129),'prhcq':_0x463c5c(0x139),'mEiCq':_0x463c5c(0xd4),'NFxOW':function(_0x5a3be8,_0x12c5ae){return _0x5a3be8>=_0x12c5ae;},'mPSGm':function(_0x189014,_0x171b68){return _0x189014<_0x171b68;},'AqUeg':_0x463c5c(0x137),'uqwWr':_0x463c5c(0x184),'ehyur':function(_0x3ff1e7){return _0x3ff1e7();}},_0x1f1bad=PerformanceTester['measureWrapper'](_0x125447[_0x463c5c(0x116)],async()=>{const _0x195254=_0x463c5c;try{const _0x35a692=new Date(),_0x426772=helper['getProxyConfigForTcg'](this[_0x195254(0xb6)]),_0x32f309=_0x125447[_0x195254(0xec)](require,path['join'](__dirname,_0x125447[_0x195254(0x149)])),_0x1da23e=_0x125447['fnllq'](timeoutPromise,constants[_0x195254(0x84)],_0x125447[_0x195254(0x141)],_0x125447[_0x195254(0x178)],_0x35a692,this[_0x195254(0xb6)],this[_0x195254(0xc0)]),_0x24f2d2={'tcgUrl':constants[_0x195254(0x142)],'sdkVersion':_0x125447[_0x195254(0x159)](require,_0x125447[_0x195254(0x169)])[_0x195254(0xd9)],'methodUsed':_0x125447[_0x195254(0x105)],'proxyConfig':_0x426772,'os':os[_0x195254(0x150)]()};if(_0x426772&&_0x426772[_0x195254(0x91)]){utilities[_0x195254(0x163)](constants[_0x195254(0x9b)],_0x24f2d2,this['config'],this[_0x195254(0xc0)]);return;}const _0x54903e={};_0x54903e['proxy']=_0x426772;const _0x4df0cb=await Promise[_0x195254(0x187)]([_0x32f309['init'](this[_0x195254(0xb6)][_0x195254(0xf9)],this[_0x195254(0xb6)]['userName'],constants[_0x195254(0x142)],_0x125447[_0x195254(0x159)](require,_0x125447['NQoSc'])[_0x195254(0xd9)],_0x54903e)[_0x195254(0x120)](_0x4ca2d7=>{const _0x28dcf8=_0x195254;return _0x1da23e[_0x28dcf8(0xf3)](),_0x4ca2d7;}),_0x1da23e]);_0x4df0cb['isHealingEnabled']=_0x125447[_0x195254(0xd5)](_0x4df0cb[_0x195254(0x146)],_0x125447[_0x195254(0xbf)])||_0x125447[_0x195254(0xe4)](_0x4df0cb[_0x195254(0x146)],!![]);const _0x551402=_0x125447['IkWer'](this[_0x195254(0xb6)][_0x195254(0x96)],!![])||_0x125447['hcHcM'](this[_0x195254(0xb6)][_0x195254(0x96)],_0x125447[_0x195254(0xbf)]);if(_0x125447[_0x195254(0xe4)](_0x4df0cb['message'],constants['UPGRADE_REQUIRED'])&&_0x551402)logger[_0x195254(0x152)](_0x125447[_0x195254(0x133)]);else{if(!_0x4df0cb[_0x195254(0x8d)]&&_0x125447[_0x195254(0x154)](_0x4df0cb['status'],0x1f7)&&_0x551402)logger[_0x195254(0x152)](_0x125447[_0x195254(0xe2)]),utilities['fireFunnelTestEvent'](constants[_0x195254(0x143)],_0x24f2d2,this['config'],this['framework']);else{if(!_0x4df0cb[_0x195254(0x8d)]&&_0x551402){logger[_0x195254(0x152)](_0x125447['prhcq']);const _0x3fc7d0={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x125447['YAFUb'](require,_0x125447[_0x195254(0x169)])[_0x195254(0xd9)],'methodUsed':_0x125447['vgRxe'],'proxyConfig':_0x426772,'os':os['platform']()};utilities[_0x195254(0x163)](constants[_0x195254(0xb1)],_0x3fc7d0,this[_0x195254(0xb6)],this[_0x195254(0xc0)]);}else{if(_0x4df0cb[_0x195254(0x8d)]&&!_0x4df0cb['isHealingEnabled']&&_0x551402)logger['info'](_0x125447['mEiCq']);else{if(_0x125447['NFxOW'](_0x4df0cb['status'],0xc8)&&_0x125447[_0x195254(0x95)](_0x4df0cb['status'],0x12c))utilities['fireFunnelTestEvent'](constants['AI_INIT_SUCCESSFUL'],_0x24f2d2,this[_0x195254(0xb6)],this[_0x195254(0xc0)]);else{if(_0x125447[_0x195254(0x89)](_0x4df0cb[_0x195254(0x118)],0x190))_0x24f2d2[_0x195254(0x118)]=_0x4df0cb[_0x195254(0x118)],utilities[_0x195254(0x163)](constants['AI_INIT_FAILURE'],_0x24f2d2,this[_0x195254(0xb6)],this[_0x195254(0xc0)]);else!_0x4df0cb[_0x195254(0x118)]&&utilities[_0x195254(0x163)](constants[_0x195254(0x9d)],_0x24f2d2,this[_0x195254(0xb6)],this[_0x195254(0xc0)]);}}}}}if(_0x4df0cb[_0x195254(0x8d)]&&_0x4df0cb[_0x195254(0x146)]){const _0xd34ca6={};_0xd34ca6[_0x195254(0xcc)]=_0x4df0cb;const _0x51a162=_0xd34ca6;_0x426772&&(_0x51a162[_0x195254(0xfa)]=_0x426772),_0x51a162['framework']=this[_0x195254(0xc0)],_0x51a162[_0x195254(0x173)]=this['config'],helper[_0x195254(0x113)](_0x51a162),logger[_0x195254(0x18e)](_0x125447[_0x195254(0x8b)]);}}catch(_0x3043bc){logger[_0x195254(0x18e)](_0x195254(0xac)+(_0x3043bc[_0x195254(0xb0)]?_0x3043bc[_0x195254(0xb0)]:''));}});await _0x125447['ehyur'](_0x1f1bad);}[a94_0x1eaaa9(0x171)](){const _0x8cb917=a94_0x1eaaa9,_0x171bcf={'nlNPi':function(_0x26608d,_0x44ff0a){return _0x26608d(_0x44ff0a);},'CJkTt':'./setKeepAlive'};_0x171bcf[_0x8cb917(0xe0)](require,_0x171bcf[_0x8cb917(0x18f)])();}['handleExceptions'](){const _0x1aa1ef=a94_0x1eaaa9,_0xd320e3={};_0xd320e3['QojSa']=_0x1aa1ef(0x17c),_0xd320e3[_0x1aa1ef(0x99)]='unhandledRejection',_0xd320e3[_0x1aa1ef(0xa6)]=_0x1aa1ef(0x140);const _0x73b700=_0xd320e3,_0x1e43c9=_0x5169b8=>{const _0x1b5a4d=_0x1aa1ef,_0x2f2a6d=_0x73b700[_0x1b5a4d(0x82)][_0x1b5a4d(0x12d)]('|');let _0x55d5a0=0x0;while(!![]){switch(_0x2f2a6d[_0x55d5a0++]){case'0':this[_0x1b5a4d(0x186)]['push'](util['format']('%j',_0x5169b8));continue;case'1':ClientTroubleShootingService[_0x1b5a4d(0xd1)]();continue;case'2':logger[_0x1b5a4d(0x179)](_0x5169b8['message']);continue;case'3':PerformanceTester[_0x1b5a4d(0x10d)](_0x5169b8);continue;case'4':logger[_0x1b5a4d(0x18e)](util[_0x1b5a4d(0xfd)](_0x5169b8));continue;}break;}};process['on'](_0x73b700[_0x1aa1ef(0x99)],_0x1e43c9),process['on'](_0x73b700[_0x1aa1ef(0xa6)],_0x1e43c9);}async[a94_0x1eaaa9(0x11c)](_0x57d399){const _0x3c29c6=a94_0x1eaaa9,_0x4be2b8={};_0x4be2b8[_0x3c29c6(0xe6)]=_0x3c29c6(0x87),_0x4be2b8[_0x3c29c6(0x16e)]=function(_0x1cd95d,_0x3eba9f){return _0x1cd95d+_0x3eba9f;},_0x4be2b8['xQhYF']=_0x3c29c6(0x155),_0x4be2b8['ZpRZI']=function(_0x1ed06f,_0x43bdb6){return _0x1ed06f+_0x43bdb6;},_0x4be2b8['aKVFo']='Shutdown\x20triggered\x20by\x20';const _0x1588eb=_0x4be2b8,_0x2981f6=_0x1588eb[_0x3c29c6(0xe6)][_0x3c29c6(0x12d)]('|');let _0x22e6d9=0x0;while(!![]){switch(_0x2981f6[_0x22e6d9++]){case'0':this[_0x3c29c6(0xd8)]=_0x57d399;continue;case'1':this[_0x1588eb[_0x3c29c6(0x16e)](_0x1588eb['xQhYF'],_0x57d399)]=!![];continue;case'2':if(this[_0x1588eb[_0x3c29c6(0xc9)](_0x1588eb[_0x3c29c6(0x16b)],_0x57d399)])return;continue;case'3':await BrowserstackCLI[_0x3c29c6(0x18a)]()[_0x3c29c6(0x132)]();continue;case'4':logger[_0x3c29c6(0x152)](_0x1588eb[_0x3c29c6(0xc9)](_0x1588eb[_0x3c29c6(0x11b)],_0x57d399));continue;case'5':await TestHubHandler[_0x3c29c6(0x132)](_0x57d399);continue;case'6':await ClientTroubleShootingService[_0x3c29c6(0xd1)]();continue;case'7':await ClientTroubleShootingService[_0x3c29c6(0xdc)](_0x57d399);continue;}break;}}['exitHandler'](){const _0x2c4665=a94_0x1eaaa9,_0x56fc91={'UqjHA':function(_0x500b9b,_0x127c55){return _0x500b9b===_0x127c55;},'LDMAS':_0x2c4665(0x8c),'gQKSY':function(_0x1d4a24,_0x34a816){return _0x1d4a24>_0x34a816;},'KtVjD':function(_0x522bbf,_0x434cde){return _0x522bbf(_0x434cde);},'iHWtO':function(_0x3f57ab){return _0x3f57ab();},'Rfvqu':_0x2c4665(0xa2)};let _0x137e93=0x0;return async()=>{const _0x3549f4=_0x2c4665;_0x137e93++;if(_0x56fc91[_0x3549f4(0xb5)](_0x137e93,0x1)){helper['checkStopLocalBinaryOnExit'](this['framework'])&&await this[_0x3549f4(0x8a)]();try{logger[_0x3549f4(0x18e)](_0x56fc91[_0x3549f4(0x128)]),await TestHubHandler[_0x3549f4(0x132)](_0x137e93),await ClientTroubleShootingService[_0x3549f4(0xd1)](),await BrowserstackCLI[_0x3549f4(0x18a)]()[_0x3549f4(0x132)]('1');}catch(_0x5aab12){logger['debug'](_0x3549f4(0xf4)+util[_0x3549f4(0xfd)](_0x5aab12));}PerformanceTester[_0x3549f4(0x177)](PerformanceEvents[_0x3549f4(0x180)]);if(PerformanceTester[_0x3549f4(0x13a)]()){const {measures:_0x287507,errors:_0x5a5bd9}=await PerformanceTester[_0x3549f4(0x12a)](),_0x10ae2c={};if(_0x287507&&_0x56fc91['gQKSY'](_0x287507[_0x3549f4(0x88)],0x0)||_0x5a5bd9&&_0x56fc91[_0x3549f4(0x18b)](_0x5a5bd9[_0x3549f4(0x88)],0x0)){const _0x52dcc8={};_0x52dcc8[_0x3549f4(0x15b)]=_0x287507,_0x52dcc8[_0x3549f4(0x101)]=_0x5a5bd9,Object[_0x3549f4(0x15e)](_0x10ae2c,_0x52dcc8);}try{const _0x370cfc=await helper[_0x3549f4(0xbd)](_0x10ae2c,this['config']);logger[_0x3549f4(0x18e)]('Data\x20sent\x20successfully\x20to\x20'+_0x56fc91[_0x3549f4(0x157)](getEdsInstrumentationAPIUrl,'')+_0x3549f4(0xe7)+_0x370cfc['statusCode']);}catch(_0x1e8390){logger[_0x3549f4(0x18e)](_0x3549f4(0x147)+_0x56fc91['KtVjD'](getEdsInstrumentationAPIUrl,'')+_0x3549f4(0x190)+util[_0x3549f4(0xfd)](_0x1e8390));}try{fs[_0x3549f4(0xdb)](path[_0x3549f4(0xf2)](_0x56fc91['iHWtO'](getLogDir),_0x56fc91[_0x3549f4(0xa9)]),JSON[_0x3549f4(0x10e)](_0x10ae2c));}catch(_0x18cd4f){logger[_0x3549f4(0x18e)](_0x3549f4(0xf8)+_0x18cd4f);}}}logger&&logger[_0x3549f4(0x12f)](),fileLogger&&fileLogger[_0x3549f4(0x12f)]();};}}exports['default']=BrowserStackSetup;