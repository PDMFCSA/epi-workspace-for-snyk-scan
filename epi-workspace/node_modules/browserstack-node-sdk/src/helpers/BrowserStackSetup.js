const a85_0x153a1e=a85_0x4ad6;(function(_0x13254a,_0x49936d){const _0x3bc76f=a85_0x4ad6,_0x11484e=_0x13254a();while(!![]){try{const _0x58c940=parseInt(_0x3bc76f(0x108))/0x1*(parseInt(_0x3bc76f(0x19e))/0x2)+-parseInt(_0x3bc76f(0x131))/0x3*(parseInt(_0x3bc76f(0x180))/0x4)+parseInt(_0x3bc76f(0xb1))/0x5*(-parseInt(_0x3bc76f(0x104))/0x6)+parseInt(_0x3bc76f(0x1a2))/0x7*(-parseInt(_0x3bc76f(0x164))/0x8)+-parseInt(_0x3bc76f(0x125))/0x9*(-parseInt(_0x3bc76f(0xca))/0xa)+parseInt(_0x3bc76f(0xc0))/0xb*(parseInt(_0x3bc76f(0xa5))/0xc)+-parseInt(_0x3bc76f(0x15b))/0xd*(-parseInt(_0x3bc76f(0x19c))/0xe);if(_0x58c940===_0x49936d)break;else _0x11484e['push'](_0x11484e['shift']());}catch(_0x265d24){_0x11484e['push'](_0x11484e['shift']());}}}(a85_0x1e3b,0x97886));const util=require(a85_0x153a1e(0xde)),os=require('os'),path=require(a85_0x153a1e(0xba)),{v4:uuidv4}=require(a85_0x153a1e(0xf0)),fs=require('fs'),constants=require('../bin/utils/constants'),logger=require('./logger')['winstonLogger'],fileLogger=require(a85_0x153a1e(0x12b))[a85_0x153a1e(0xe9)],{getLogDir}=require(a85_0x153a1e(0x12b)),helper=require('./helper'),utilities=require(a85_0x153a1e(0xdf)),percyHelper=require(a85_0x153a1e(0xe1)),hubAllocator=require('../hubAllocationMethods'),PerformanceTester=require(a85_0x153a1e(0xa9)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a85_0x153a1e(0x130)),{setPercyFlag}=require(a85_0x153a1e(0xdc)),TestHubHandler=require(a85_0x153a1e(0x177)),timeoutPromise=require(a85_0x153a1e(0x11e)),BrowserstackCLI=require(a85_0x153a1e(0xb3));class BrowserStackSetup{constructor(_0x5de195,_0x4487d3){const _0x50659c=a85_0x153a1e,_0x55deb9={'XjYKb':_0x50659c(0x19d),'fJRmW':function(_0x16466f){return _0x16466f();},'TYTzk':_0x50659c(0xf3)},_0x331dc6=_0x55deb9['XjYKb']['split']('|');let _0x3f240d=0x0;while(!![]){switch(_0x331dc6[_0x3f240d++]){case'0':this[_0x50659c(0xe3)][_0x50659c(0x199)][_0x50659c(0x1a3)]=!helper[_0x50659c(0x197)]()||helper['isTrue'](this[_0x50659c(0xe3)][_0x50659c(0x199)][_0x50659c(0x1a3)]);continue;case'1':this[_0x50659c(0x16d)]=_0x4487d3;continue;case'2':this['envConfig']=helper[_0x50659c(0x11a)]();continue;case'3':helper[_0x50659c(0x1a1)](this[_0x50659c(0xe3)],this[_0x50659c(0x185)],this[_0x50659c(0x193)]);continue;case'4':helper[_0x50659c(0x156)](this[_0x50659c(0xe3)],this['cliConfig']);continue;case'5':this['config']=helper['readConfig'](helper[_0x50659c(0x1a5)](_0x5de195));continue;case'6':helper[_0x50659c(0xc7)]();continue;case'7':this[_0x50659c(0x185)]=helper[_0x50659c(0xeb)](_0x5de195);continue;case'8':this['config'][_0x50659c(0x199)][_0x50659c(0x14e)]=!helper[_0x50659c(0x197)]()||helper[_0x50659c(0xa0)](this['config'][_0x50659c(0x199)][_0x50659c(0x14e)]);continue;case'9':helper[_0x50659c(0xed)](this[_0x50659c(0xe3)],this[_0x50659c(0x185)],this[_0x50659c(0x193)]);continue;case'10':this[_0x50659c(0x11c)]={};continue;case'11':this[_0x50659c(0xe3)]['platforms']=this['config']['platforms']||[];continue;case'12':this[_0x50659c(0xb9)]=null;continue;case'13':this['config'][_0x50659c(0x199)]=this['config'][_0x50659c(0x199)]||{};continue;case'14':helper['setCredentialsFromYmlConfig'](this[_0x50659c(0xe3)]);continue;case'15':if(this[_0x50659c(0xe3)][_0x50659c(0x135)])throw new Error(this[_0x50659c(0xe3)][_0x50659c(0x135)]);continue;case'16':helper[_0x50659c(0xbf)](this['config']);continue;case'17':PerformanceTester[_0x50659c(0x1a0)]();continue;case'18':global['framework']=_0x4487d3;continue;case'19':this[_0x50659c(0x103)]=[];continue;case'20':this[_0x50659c(0xb0)]=_0x55deb9[_0x50659c(0x194)](uuidv4);continue;case'21':if(helper['isUndefined'](this[_0x50659c(0xe3)]))throw new Error(_0x55deb9[_0x50659c(0xc4)]);continue;case'22':this['percy']=null;continue;}break;}}['preInitialize'](_0x4cd468){const _0x27949b=a85_0x153a1e,_0x4f65a4={'UUAgr':_0x27949b(0x11f),'ZmiSr':function(_0x3bf428,_0x2879c0){return _0x3bf428===_0x2879c0;},'XaYDG':_0x27949b(0xd8),'jvqRV':_0x27949b(0x11d),'LMocx':function(_0x4c7dda,_0x1783d1){return _0x4c7dda<_0x1783d1;},'CIzZl':function(_0x2d80d0,_0x78075a){return _0x2d80d0(_0x78075a);},'neQzn':'selenium-webdriver','YjRgw':_0x27949b(0xc2),'WdGCx':'Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','KvYUO':_0x27949b(0x14c),'yncut':_0x27949b(0x16b),'xLRij':_0x27949b(0x13b),'SbtEP':'SIGHUP','PoJgz':function(_0x59393e,_0x6bd3b7){return _0x59393e!==_0x6bd3b7;},'WmryC':_0x27949b(0x119),'ktEGe':'SIGABRT','llmxc':_0x27949b(0xd0),'QqZpo':'SIGBREAK','TSQsx':_0x27949b(0x10e)},_0x2f82e9=this[_0x27949b(0x16d)];global[_0x27949b(0xe3)]=this['config'],helper[_0x27949b(0xa1)](this[_0x27949b(0xe3)]),this[_0x27949b(0xfa)]=null,global[_0x27949b(0xb0)]=this['sdkRunId'],logger[_0x27949b(0x144)](_0x27949b(0x116)+this['sdkRunId']),!this['config'][_0x27949b(0xdb)]&&(this['config']['browserStackLocalOptions']=this[_0x27949b(0xe3)][_0x27949b(0xc5)]||{});if(helper[_0x27949b(0x107)](helper[_0x27949b(0x147)](this[_0x27949b(0xe3)]))||helper[_0x27949b(0x107)](helper[_0x27949b(0xff)](this[_0x27949b(0xe3)])))throw new Error(_0x4f65a4['UUAgr']);helper['getLocalConfig'](this[_0x27949b(0xe3)])&&helper[_0x27949b(0x107)](helper['getLocalIdentifier'](this[_0x27949b(0xe3)]))&&(!helper[_0x27949b(0x107)](this['config']['browserStackLocalOptions'])&&_0x4f65a4[_0x27949b(0x143)](this[_0x27949b(0xe3)][_0x27949b(0xdb)]['constructor'],Object)?!helper[_0x27949b(0xa0)](this['config']['browserStackLocalOptions'][_0x27949b(0x17e)])&&(this['config'][_0x27949b(0xdb)][_0x27949b(0xa2)]=helper[_0x27949b(0xc1)]()):this[_0x27949b(0xe3)][_0x27949b(0xdb)]={'localIdentifier':helper['generateLocalIdentifier']()});this[_0x27949b(0xe3)]['browserStackLocalOptions'][_0x27949b(0x17e)]=helper[_0x27949b(0xa0)](this[_0x27949b(0xe3)][_0x27949b(0xdb)][_0x27949b(0x17e)]),helper['setHandlePWError'](this[_0x27949b(0xe3)]);if(_0x4f65a4['ZmiSr'](_0x2f82e9,_0x4f65a4[_0x27949b(0xcc)]))return;this[_0x27949b(0x175)]();process['env'][_0x27949b(0x14f)]&&(this['config'][_0x27949b(0xcd)]=helper[_0x27949b(0xa0)](process['env'][_0x27949b(0x14f)]),this[_0x27949b(0xe3)]['turboScaleOptions']=this['config']['turboScaleOptions']||{});helper[_0x27949b(0x149)](this[_0x27949b(0xe3)])&&(process[_0x27949b(0xcb)]['BROWSERSTACK_TURBOSCALE']=!![]);if(!helper[_0x27949b(0x197)]()){try{process[_0x27949b(0xcb)][_0x27949b(0xf6)]=_0x2f82e9,utilities['fireFunnelTestEvent'](_0x4f65a4['jvqRV'],{},this[_0x27949b(0xe3)],this[_0x27949b(0x16d)]);}catch(_0x17aae6){logger[_0x27949b(0x128)](_0x27949b(0x18a)+_0x17aae6);}return;}if(helper[_0x27949b(0xe4)](_0x2f82e9)){if(global[_0x27949b(0x124)])return;_0x4f65a4[_0x27949b(0x148)](_0x4f65a4['CIzZl'](parseInt,helper[_0x27949b(0xb2)](_0x4f65a4[_0x27949b(0x137)])),0x3)&&(this[_0x27949b(0xe3)][_0x27949b(0xd4)]=![]),_0x4f65a4['ZmiSr'](helper['compareVersions'](helper[_0x27949b(0xb2)](_0x4f65a4['neQzn']),_0x4f65a4[_0x27949b(0x173)]),0x1)&&(this['config'][_0x27949b(0xd4)]=!![]);}(helper['isUndefined'](this['config'][_0x27949b(0xc6)])||helper[_0x27949b(0x107)](this[_0x27949b(0xe3)][_0x27949b(0xc6)][_0x27949b(0x145)]))&&(helper[_0x27949b(0x107)](this[_0x27949b(0xe3)][_0x27949b(0x126)])?logger['info'](_0x4f65a4[_0x27949b(0x15a)]):logger['warn'](_0x4f65a4[_0x27949b(0xd7)]),this[_0x27949b(0xe3)][_0x27949b(0xc6)]=[]);!this[_0x27949b(0xe3)][_0x27949b(0x199)]&&(this[_0x27949b(0xe3)][_0x27949b(0x199)]={});try{process[_0x27949b(0xcb)][_0x27949b(0xf6)]=_0x4cd468['_'][0x0],utilities[_0x27949b(0xf7)](_0x4f65a4['jvqRV'],{},this[_0x27949b(0xe3)],this[_0x27949b(0x16d)]);}catch(_0x2ecce7){logger[_0x27949b(0x128)](_0x27949b(0x18a)+_0x2ecce7);}!this[_0x27949b(0xe3)][_0x27949b(0x13f)]&&logger[_0x27949b(0x144)](constants[_0x27949b(0x19f)]),this['intExitHandler']=this[_0x27949b(0xc3)][_0x27949b(0x12a)](this),process['on'](_0x4f65a4[_0x27949b(0x165)],this['intExitHandler']),process['on'](_0x4f65a4[_0x27949b(0x14a)],this[_0x27949b(0xc3)]),process['on'](_0x4f65a4[_0x27949b(0x1ad)],this[_0x27949b(0xc3)]),_0x4f65a4[_0x27949b(0xd1)](process['platform'],_0x4f65a4[_0x27949b(0x10a)])?(process['on'](_0x4f65a4[_0x27949b(0xe2)],this['intExitHandler']),process['on'](_0x4f65a4['llmxc'],this[_0x27949b(0xc3)])):process['on'](_0x4f65a4[_0x27949b(0x186)],this[_0x27949b(0xc3)]),process['on'](_0x4f65a4[_0x27949b(0x111)],this[_0x27949b(0xae)]());}async[a85_0x153a1e(0x189)](_0x33979e){const _0x48479a=a85_0x153a1e,_0x67ce36={'PcwHl':_0x48479a(0xbb),'asZMq':_0x48479a(0xd6),'BdJbf':_0x48479a(0x15d),'xqpzg':function(_0x19b667,_0x30f048){return _0x19b667===_0x30f048;},'XRRVG':_0x48479a(0xe8),'sSkQQ':function(_0x38b7dc,_0x54f068){return _0x38b7dc+_0x54f068;},'KAJxz':_0x48479a(0xd5),'nRSTJ':function(_0x53e678,_0x4f92d1){return _0x53e678(_0x4f92d1);},'yWKay':_0x48479a(0x196)};this[_0x48479a(0xcf)](_0x33979e);if(helper[_0x48479a(0x149)](this[_0x48479a(0xe3)])){const _0x87dca9=await helper[_0x48479a(0x1a8)](this[_0x48479a(0xe3)]);this[_0x48479a(0xe3)][_0x48479a(0xb6)]=_0x87dca9,_0x87dca9[_0x48479a(0x174)]&&helper[_0x48479a(0x176)](this[_0x48479a(0xe3)]['browserstackLocal'])&&helper[_0x48479a(0xa0)](this['config'][_0x48479a(0xb9)])&&(this[_0x48479a(0xe3)][_0x48479a(0xdb)][_0x48479a(0xa2)]=_0x67ce36['PcwHl'],this[_0x48479a(0xe3)][_0x48479a(0xdb)][_0x67ce36['asZMq']]=_0x87dca9[_0x48479a(0xe7)][_0x48479a(0x151)](','),this[_0x48479a(0xe3)][_0x48479a(0xdb)][_0x48479a(0x158)]=_0x67ce36[_0x48479a(0xd9)]),this[_0x48479a(0xe3)][_0x48479a(0x19b)]=_0x87dca9[_0x48479a(0xe5)],this[_0x48479a(0x16d)]&&_0x67ce36[_0x48479a(0x168)](this[_0x48479a(0x16d)][_0x48479a(0x1a7)](),_0x67ce36['XRRVG'])?this[_0x48479a(0xe3)]['turboScaleUrl']=_0x67ce36[_0x48479a(0x161)](_0x87dca9[_0x48479a(0xb8)],_0x67ce36[_0x48479a(0x106)]):constants['hubUrl']=helper[_0x48479a(0x140)](this[_0x48479a(0xe3)]),logger[_0x48479a(0x128)](_0x48479a(0xfc)+constants[_0x48479a(0x153)]);}helper['setProxySettings'](this[_0x48479a(0xe3)]),this['setupKeepAlive'](),_0x67ce36['nRSTJ'](setPercyFlag,this),await this[_0x48479a(0x10d)](),![_0x67ce36[_0x48479a(0x12e)],_0x67ce36[_0x48479a(0xef)]]['includes'](this[_0x48479a(0x16d)])&&!helper[_0x48479a(0x149)](this[_0x48479a(0xe3)])&&!helper[_0x48479a(0x154)]()[_0x48479a(0x18c)]&&await this[_0x48479a(0x195)]();}async['setupPercy'](){const _0x31846a=a85_0x153a1e,_0x305656={};_0x305656[_0x31846a(0x192)]=function(_0x2d23f1,_0x19fc0c){return _0x2d23f1===_0x19fc0c;},_0x305656['nUkBr']='false',_0x305656[_0x31846a(0xaa)]=_0x31846a(0xf4),_0x305656[_0x31846a(0xfb)]='Percy\x20started\x20successfully',_0x305656[_0x31846a(0x157)]=_0x31846a(0x15d),_0x305656[_0x31846a(0x17b)]=_0x31846a(0x10e);const _0xa2f66=_0x305656;if(helper[_0x31846a(0xa0)](this[_0x31846a(0xe3)][_0x31846a(0xb7)])&&(!this['percy']||!this[_0x31846a(0xb7)][_0x31846a(0xf5)]()))try{this['percy']=await percyHelper[_0x31846a(0xea)](this[_0x31846a(0xe3)]);if(!this[_0x31846a(0xb7)]){process[_0x31846a(0xcb)][_0x31846a(0x146)]=_0xa2f66[_0x31846a(0x1a4)];throw new Error(_0xa2f66[_0x31846a(0xaa)]);}logger[_0x31846a(0x144)](_0xa2f66[_0x31846a(0xfb)]),process['env']['BROWSERSTACK_PERCY']=_0xa2f66[_0x31846a(0x157)];let _0x5ea476=0x0;const _0x5dc639=async()=>{const _0x5017a7=_0x31846a;_0x5ea476++,_0xa2f66['AaToN'](_0x5ea476,0x1)&&await this[_0x5017a7(0x155)]();};process['on'](_0xa2f66[_0x31846a(0x17b)],_0x5dc639);}catch(_0x246c00){process[_0x31846a(0xcb)][_0x31846a(0x146)]=_0xa2f66[_0x31846a(0x1a4)],logger['debug']('Error\x20in\x20percy\x20setup\x20'+_0x246c00);throw new Error(_0x246c00[_0x31846a(0x12d)]());}}async['stopPercy'](){const _0x568ef7=a85_0x153a1e,_0x5e877e={};_0x5e877e[_0x568ef7(0x178)]=_0x568ef7(0x150),_0x5e877e['JFtzG']='Error\x20occured\x20while\x20stopping\x20percy';const _0x25f5c5=_0x5e877e;if(this['percy']&&this[_0x568ef7(0xb7)][_0x568ef7(0xf5)]())try{await percyHelper[_0x568ef7(0x155)](this[_0x568ef7(0xb7)]),logger['info'](_0x25f5c5[_0x568ef7(0x178)]);}catch(_0x4d37ab){logger[_0x568ef7(0x135)](_0x25f5c5['JFtzG'],_0x4d37ab[_0x568ef7(0x18b)]);}}async[a85_0x153a1e(0x10d)](){const _0x458df7=a85_0x153a1e,_0x482b2f={};_0x482b2f[_0x458df7(0x117)]=_0x458df7(0x9e),_0x482b2f[_0x458df7(0xce)]=_0x458df7(0x15c);const _0x1530c3=_0x482b2f;if(helper[_0x458df7(0x197)]()&&helper[_0x458df7(0xa0)](this['config'][_0x458df7(0xb9)])&&(!this[_0x458df7(0xb9)]||!this[_0x458df7(0xb9)][_0x458df7(0xf5)]()))try{if(this[_0x458df7(0xe3)][_0x458df7(0xdb)][_0x458df7(0x17e)]){logger[_0x458df7(0x128)](_0x1530c3[_0x458df7(0x117)]);return;}this[_0x458df7(0xb9)]=await helper[_0x458df7(0x115)](this['config']),logger['info'](_0x1530c3[_0x458df7(0xce)]);}catch(_0x248ec4){logger[_0x458df7(0x128)](_0x248ec4);throw new Error(_0x248ec4['toString']());}}async[a85_0x153a1e(0xec)](){const _0xcabf7e=a85_0x153a1e,_0x147558={};_0x147558[_0xcabf7e(0x141)]=_0xcabf7e(0x133),_0x147558['Uvfpf']=_0xcabf7e(0x109);const _0x281101=_0x147558;if(this['browserstackLocal']&&this[_0xcabf7e(0xb9)][_0xcabf7e(0xf5)]())try{await helper[_0xcabf7e(0xad)](this[_0xcabf7e(0xb9)]),logger[_0xcabf7e(0x144)](_0x281101[_0xcabf7e(0x141)]);}catch(_0x291832){logger['error'](_0x281101[_0xcabf7e(0xdd)],_0x291832[_0xcabf7e(0x18b)]);}}async['setUpHubUrl'](){const _0xfdb42c=a85_0x153a1e;return PerformanceTester[_0xfdb42c(0xe0)](PerformanceAutEvents['HUB_MANAGEMENT'],async()=>{const _0x159c76=_0xfdb42c;await hubAllocator[_0x159c76(0x19a)](this[_0x159c76(0xe3)]);})();}async[a85_0x153a1e(0x183)](){const _0x34cb6e=a85_0x153a1e,_0x371aa2={'DkGTk':function(_0x2d73c6,_0x27dd78){return _0x2d73c6(_0x27dd78);},'wnQlN':_0x34cb6e(0x198),'pqoTw':function(_0x422320,_0x5967ba,_0x38ad5f,_0x31fe3d,_0x29103a,_0x3b23f6,_0x9b8e7b){return _0x422320(_0x5967ba,_0x38ad5f,_0x31fe3d,_0x29103a,_0x3b23f6,_0x9b8e7b);},'TuyMR':'BrowserstackHealing.init\x20method\x20timed\x20out','uieUy':_0x34cb6e(0xb4),'QxBPm':_0x34cb6e(0x13c),'ulFQw':_0x34cb6e(0xac),'RzbKq':function(_0x5e4d79,_0x23e5c6){return _0x5e4d79(_0x23e5c6);},'GocCD':function(_0x59b69e,_0x2aca0f){return _0x59b69e===_0x2aca0f;},'sgrlg':'true','fQhwX':function(_0xe6ff59,_0x56b2a2){return _0xe6ff59===_0x56b2a2;},'hYqSn':function(_0x35b504,_0x227488){return _0x35b504===_0x227488;},'KixYi':function(_0x20bc09,_0x388b96){return _0x20bc09===_0x388b96;},'XZgDq':'Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','RQwlI':'Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','VdBFs':_0x34cb6e(0x17f),'ORPSc':function(_0x1914f6,_0x2e218c){return _0x1914f6(_0x2e218c);},'sgFCz':_0x34cb6e(0x16f),'pUlsH':function(_0x314d3e,_0x16f435){return _0x314d3e>=_0x16f435;},'tCqGg':function(_0x5dad23,_0x1bb028){return _0x5dad23<_0x1bb028;},'ygOMW':_0x34cb6e(0x167),'NbiCa':_0x34cb6e(0xfe),'nuflo':function(_0x477a04){return _0x477a04();}},_0x4fc3c6=PerformanceTester[_0x34cb6e(0xe0)](_0x371aa2[_0x34cb6e(0x121)],async()=>{const _0x288024=_0x34cb6e;try{const _0x2f03a9=new Date(),_0x564e78=helper[_0x288024(0x184)](this[_0x288024(0xe3)]),_0x83382f=_0x371aa2[_0x288024(0x179)](require,path['join'](__dirname,_0x371aa2[_0x288024(0x170)])),_0x33b2f9=_0x371aa2[_0x288024(0x14d)](timeoutPromise,constants[_0x288024(0xbe)],_0x371aa2['TuyMR'],_0x371aa2[_0x288024(0xf1)],_0x2f03a9,this[_0x288024(0xe3)],this[_0x288024(0x16d)]),_0x269553={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x371aa2['DkGTk'](require,_0x371aa2[_0x288024(0x13d)])[_0x288024(0xa7)],'methodUsed':_0x371aa2[_0x288024(0x138)],'proxyConfig':_0x564e78,'os':os[_0x288024(0xda)]()};if(_0x564e78&&_0x564e78[_0x288024(0x1ac)]){utilities[_0x288024(0xf7)](constants[_0x288024(0x11b)],_0x269553,this[_0x288024(0xe3)],this[_0x288024(0x16d)]);return;}const _0xc0142b={};_0xc0142b[_0x288024(0x181)]=_0x564e78;const _0x3c4f9f=await Promise[_0x288024(0x16e)]([_0x83382f[_0x288024(0x129)](this[_0x288024(0xe3)][_0x288024(0x118)],this['config'][_0x288024(0x9f)],constants[_0x288024(0x142)],_0x371aa2[_0x288024(0xab)](require,_0x371aa2[_0x288024(0x13d)])[_0x288024(0xa7)],_0xc0142b)[_0x288024(0x13e)](_0x13bc5c=>{const _0x2f0aff=_0x288024;return _0x33b2f9[_0x2f0aff(0x16a)](),_0x13bc5c;}),_0x33b2f9]);_0x3c4f9f[_0x288024(0xf2)]=_0x371aa2[_0x288024(0x172)](_0x3c4f9f[_0x288024(0xf2)],_0x371aa2[_0x288024(0x120)])||_0x371aa2[_0x288024(0x13a)](_0x3c4f9f[_0x288024(0xf2)],!![]);const _0x31f8c7=_0x371aa2[_0x288024(0x187)](this[_0x288024(0xe3)][_0x288024(0x159)],!![])||_0x371aa2[_0x288024(0x172)](this[_0x288024(0xe3)]['selfHeal'],_0x371aa2['sgrlg']);if(_0x371aa2[_0x288024(0x17c)](_0x3c4f9f[_0x288024(0x18b)],constants['UPGRADE_REQUIRED'])&&_0x31f8c7)logger[_0x288024(0x144)](_0x371aa2[_0x288024(0x10f)]);else{if(!_0x3c4f9f['isAuthenticated']&&_0x371aa2[_0x288024(0x187)](_0x3c4f9f[_0x288024(0xbc)],0x1f7)&&_0x31f8c7)logger[_0x288024(0x144)](_0x371aa2[_0x288024(0x16c)]),utilities[_0x288024(0xf7)](constants[_0x288024(0xfd)],_0x269553,this[_0x288024(0xe3)],this['framework']);else{if(!_0x3c4f9f[_0x288024(0x190)]&&_0x31f8c7){logger['info'](_0x371aa2[_0x288024(0xe6)]);const _0x5bf3ce={'tcgUrl':constants[_0x288024(0x142)],'sdkVersion':_0x371aa2[_0x288024(0x152)](require,_0x371aa2[_0x288024(0x13d)])['version'],'methodUsed':_0x371aa2['ulFQw'],'proxyConfig':_0x564e78,'os':os[_0x288024(0xda)]()};utilities['fireFunnelTestEvent'](constants[_0x288024(0x169)],_0x5bf3ce,this[_0x288024(0xe3)],this['framework']);}else{if(_0x3c4f9f[_0x288024(0x190)]&&!_0x3c4f9f[_0x288024(0xf2)]&&_0x31f8c7)logger[_0x288024(0x144)](_0x371aa2[_0x288024(0x14b)]);else{if(_0x371aa2['pUlsH'](_0x3c4f9f[_0x288024(0xbc)],0xc8)&&_0x371aa2['tCqGg'](_0x3c4f9f[_0x288024(0xbc)],0x12c))utilities[_0x288024(0xf7)](constants[_0x288024(0x1ae)],_0x269553,this['config'],this['framework']);else{if(_0x371aa2[_0x288024(0xc8)](_0x3c4f9f['status'],0x190))_0x269553[_0x288024(0xbc)]=_0x3c4f9f[_0x288024(0xbc)],utilities['fireFunnelTestEvent'](constants[_0x288024(0x18e)],_0x269553,this[_0x288024(0xe3)],this[_0x288024(0x16d)]);else!_0x3c4f9f[_0x288024(0xbc)]&&utilities[_0x288024(0xf7)](constants[_0x288024(0x160)],_0x269553,this[_0x288024(0xe3)],this[_0x288024(0x16d)]);}}}}}if(_0x3c4f9f[_0x288024(0x190)]&&_0x3c4f9f[_0x288024(0xf2)]){const _0x28ba1b={};_0x28ba1b[_0x288024(0x15e)]=_0x3c4f9f;const _0x2c9a5f=_0x28ba1b;_0x564e78&&(_0x2c9a5f[_0x288024(0x136)]=_0x564e78),_0x2c9a5f[_0x288024(0x16d)]=this['framework'],_0x2c9a5f[_0x288024(0x191)]=this[_0x288024(0xe3)],helper['setupTcgConfigFile'](_0x2c9a5f),logger[_0x288024(0x128)](_0x371aa2['ygOMW']);}}catch(_0x2bc097){logger[_0x288024(0x128)](_0x288024(0xf9)+(_0x2bc097[_0x288024(0x18b)]?_0x2bc097[_0x288024(0x18b)]:''));}});await _0x371aa2['nuflo'](_0x4fc3c6);}[a85_0x153a1e(0xc9)](){const _0x3b7a05=a85_0x153a1e,_0x1a1cae={'zSpIG':function(_0x39e150,_0x3959e0){return _0x39e150(_0x3959e0);},'gVgCW':_0x3b7a05(0xaf)};_0x1a1cae['zSpIG'](require,_0x1a1cae[_0x3b7a05(0xee)])();}[a85_0x153a1e(0x175)](){const _0x21de1d=a85_0x153a1e,_0x4e5b26={};_0x4e5b26[_0x21de1d(0x134)]=_0x21de1d(0x114),_0x4e5b26[_0x21de1d(0x113)]=_0x21de1d(0x18d);const _0x3c6b5a=_0x4e5b26,_0x33c53f=_0x5a456f=>{const _0x1a2377=_0x21de1d;logger['error'](_0x5a456f[_0x1a2377(0x18b)]),logger[_0x1a2377(0x128)](util[_0x1a2377(0xa4)](_0x5a456f)),this['unhandledErrors'][_0x1a2377(0x127)](util['format']('%j',_0x5a456f)),PerformanceTester[_0x1a2377(0x162)](_0x5a456f);};process['on'](_0x3c6b5a[_0x21de1d(0x134)],_0x33c53f),process['on'](_0x3c6b5a['FOyrZ'],_0x33c53f);}async['intExitHandler'](_0x4d5ec0){const _0x5653e3=a85_0x153a1e,_0x5058a6={};_0x5058a6[_0x5653e3(0xb5)]=_0x5653e3(0xd3),_0x5058a6[_0x5653e3(0x12f)]=function(_0x5947c8,_0x1f9429){return _0x5947c8+_0x1f9429;},_0x5058a6[_0x5653e3(0x163)]=_0x5653e3(0x10b),_0x5058a6['JQOwf']=function(_0x38320e,_0x222149){return _0x38320e+_0x222149;},_0x5058a6[_0x5653e3(0x17a)]=_0x5653e3(0x171),_0x5058a6[_0x5653e3(0xbd)]=function(_0x5c6b31,_0x4b5fac){return _0x5c6b31+_0x4b5fac;};const _0xa9380=_0x5058a6,_0x44d3ef=_0xa9380[_0x5653e3(0xb5)][_0x5653e3(0xd2)]('|');let _0x124c29=0x0;while(!![]){switch(_0x44d3ef[_0x124c29++]){case'0':this[_0x5653e3(0xfa)]=_0x4d5ec0;continue;case'1':fileLogger&&fileLogger[_0x5653e3(0x17d)]();continue;case'2':await BrowserstackCLI['getInstance']()[_0x5653e3(0x102)]();continue;case'3':await TestHubHandler['stop'](_0x4d5ec0);continue;case'4':logger&&logger['close']();continue;case'5':logger[_0x5653e3(0x144)](_0xa9380[_0x5653e3(0x12f)](_0xa9380[_0x5653e3(0x163)],_0x4d5ec0));continue;case'6':this[_0xa9380[_0x5653e3(0xa6)](_0xa9380[_0x5653e3(0x17a)],_0x4d5ec0)]=!![];continue;case'7':if(this[_0xa9380['BHJLQ'](_0xa9380[_0x5653e3(0x17a)],_0x4d5ec0)])return;continue;}break;}}[a85_0x153a1e(0xae)](){const _0x487239=a85_0x153a1e,_0x46aeb4={'ghNuJ':function(_0x1c6591,_0x19b898){return _0x1c6591===_0x19b898;},'LVqPl':_0x487239(0x1a6),'DBMMR':function(_0x592c7a,_0x7473b1){return _0x592c7a>_0x7473b1;},'YTDvs':function(_0x411607,_0x1bf1c4){return _0x411607>_0x1bf1c4;},'OGJSP':function(_0x5d445a){return _0x5d445a();},'lbLvn':_0x487239(0x122)};let _0x2f7c15=0x0;return async()=>{const _0x1cbc12=_0x487239;_0x2f7c15++;if(_0x46aeb4[_0x1cbc12(0xf8)](_0x2f7c15,0x1)){helper[_0x1cbc12(0x1ab)](this['framework'])&&await this[_0x1cbc12(0xec)]();try{logger[_0x1cbc12(0x128)](_0x46aeb4[_0x1cbc12(0x10c)]),await TestHubHandler[_0x1cbc12(0x102)](_0x2f7c15),await BrowserstackCLI[_0x1cbc12(0x100)]()[_0x1cbc12(0x102)]('1');}catch(_0x5f3437){logger[_0x1cbc12(0x128)]('Error\x20in\x20sending\x20testhub\x20stop:\x20'+util[_0x1cbc12(0xa4)](_0x5f3437));}PerformanceTester[_0x1cbc12(0x139)](PerformanceEvents[_0x1cbc12(0x101)]);if(PerformanceTester[_0x1cbc12(0x112)]()){const {measures:_0x33f95e,errors:_0x162a88}=await PerformanceTester[_0x1cbc12(0x188)](),_0x3143b5={};if(_0x33f95e&&_0x46aeb4[_0x1cbc12(0x12c)](_0x33f95e[_0x1cbc12(0x145)],0x0)||_0x162a88&&_0x46aeb4[_0x1cbc12(0x132)](_0x162a88[_0x1cbc12(0x145)],0x0)){const _0x5a5d58={};_0x5a5d58[_0x1cbc12(0x18f)]=_0x33f95e,_0x5a5d58['exceptions']=_0x162a88,Object['assign'](_0x3143b5,_0x5a5d58);}try{const _0x1fbd34=await helper[_0x1cbc12(0x15f)](_0x3143b5,this[_0x1cbc12(0xe3)]);logger[_0x1cbc12(0x128)](_0x1cbc12(0xa3)+constants[_0x1cbc12(0xa8)]+_0x1cbc12(0x1a9)+_0x1fbd34[_0x1cbc12(0x1aa)]);}catch(_0x299413){logger['debug'](_0x1cbc12(0x182)+constants['EDS_URL']+_0x1cbc12(0x123)+util['format'](_0x299413));}try{fs['writeFileSync'](path[_0x1cbc12(0x151)](_0x46aeb4[_0x1cbc12(0x110)](getLogDir),_0x46aeb4[_0x1cbc12(0x166)]),JSON['stringify'](_0x3143b5));}catch(_0x330079){logger[_0x1cbc12(0x128)](_0x1cbc12(0x105)+_0x330079);}}}};}}function a85_0x1e3b(){const _0x2af4ce=['1421535iYPTqG','YTDvs','Local\x20binary\x20stopped','ALjkM','error','proxyConfig','neQzn','ulFQw','end','fQhwX','SIGINT','../../package.json','QxBPm','then','disableAutoCaptureLogs','getHubUrl','FRSxS','TCG_URL','ZmiSr','info','length','BROWSERSTACK_PERCY','getUserName','LMocx','isTurboScaleSession','xLRij','sgFCz','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','pqoTw','skipSessionName','BROWSERSTACK_TURBOSCALE','Percy\x20stopped','join','ORPSc','hubUrl','getCentralUser','stopPercy','setBrowserstackInfraFromConfig','XqZtp','forceLocal','selfHeal','WdGCx','13xrnnzO','Local\x20binary\x20started\x20successfully','true','tcgAuthConfig','sendToEDS','INVALID_INIT_RESP_WITH_USER_IMPACT','sSkQQ','captureError','ffuHv','24dvkimy','yncut','lbLvn','tcg\x20config\x20setup\x20successful.','xqpzg','TCG_AUTH_FAILURE','cancel','SIGTERM','RQwlI','framework','race','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','wnQlN','handled','GocCD','YjRgw','isTrialGrid','handleExceptions','isNotUndefined','./testhub/testhubHandler','fRcOi','DkGTk','iaAAE','NEjko','KixYi','close','skipBinaryInitialisation','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','8WlkziN','proxy','Failed\x20to\x20send\x20data\x20to\x20','setupTCGAuth','getProxyConfigForTcg','cliConfig','QqZpo','hYqSn','finalize','initialize','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','message','central_scanner','uncaughtException','AI_INIT_FAILURE','measures','isAuthenticated','bstackConfig','AaToN','envConfig','fJRmW','setUpHubUrl','codeceptjs','isBrowserstackInfra','../ai-sdk-node/bundle','testContextOptions','allocateHub','turboScaleUrl','13239478nNqIYY','19|6|2|12|22|5|7|11|13|10|20|1|18|21|15|4|14|0|8|9|16|3|17','362AktCOd','AUTOLOGCAPTURE_NOTIFICATION','startMonitoring','setLogLevel','1289869aVkNEI','skipSessionStatus','nUkBr','getConfigPath','Calling\x20Build\x20Stop\x20from\x20ExitHandler','toLowerCase','getTurboScaleGridDetails','\x20with\x20response\x20','statusCode','checkStopLocalBinaryOnExit','proxyUrl','SbtEP','AI_INIT_SUCCESSFUL','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','userName','isTrue','sanitizeCaps','localIdentifier','Data\x20sent\x20successfully\x20to\x20','format','22224WFanSI','JQOwf','version','EDS_URL','./performance/performance-tester','HQeRm','RzbKq','BrowserstackHealing.init','stopLocalBinary','exitHandler','./setKeepAlive','sdkRunId','1205OjGuQP','getPackageVersion','../bin/v2/browserstackCLI','BrowserstackHealingInitFailed','qWIpS','turboScaleGridDetails','percy','playwrightUrl','browserstackLocal','path','ats-repeater','status','BHJLQ','TCG_AUTH_TIMEOUT','setLogDir','3454EsugDE','generateLocalIdentifier','4.5.0','intExitHandler','TYTzk','localOptions','platforms','normalizeTestReportingEnvVars','pUlsH','setupKeepAlive','240hFRPHE','env','XaYDG','turboScale','nwndy','preInitialize','SIGQUIT','PoJgz','split','4|1|7|6|5|0|3|2','useW3C','?caps=','custom-repeater','KvYUO','integrations','BdJbf','platform','browserStackLocalOptions','./testhub/utils','Uvfpf','util','./utilities','measureWrapper','./percy/utils','ktEGe','config','requireSeleniumWebdriverCheck','url','VdBFs','customRepeaters','playwright','fileLogger','startPercy','setCLICaps','stopBrowserstackLocal','getFinalCaps','gVgCW','XRRVG','uuid','uieUy','isHealingEnabled','No\x20config\x20provided.','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','isRunning','FRAMEWORK','fireFunnelTestEvent','ghNuJ','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','killSignal','glBUw','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','TCG_DOWN','aiHeal:tcgAuth','getAccessKey','getInstance','SDK_CLEANUP','stop','unhandledErrors','5484sjsMti','Error\x20in\x20writing\x20events\x20to\x20file\x20','KAJxz','isUndefined','3326FONvUz','Error\x20occured\x20while\x20stopping\x20local\x20binary','WmryC','Shutdown\x20triggered\x20by\x20','LVqPl','setupBrowserstackLocal','beforeExit','XZgDq','OGJSP','TSQsx','isEnabled','FOyrZ','unhandledRejection','startLocalBinary','SDK\x20run\x20started\x20with\x20id:\x20','DnwvG','accessKey','win32','setEnvCaps','AI_PROXY_FAILURE','errorMessage','SDKTestAttempted','./timeoutPromise','userName\x20or\x20accessKey\x20is\x20not\x20defined','sgrlg','NbiCa','events.json','\x20with\x20error\x20','__isPlaywrightInstalled','79587ZuiMiO','parallelsPerPlatform','push','debug','init','bind','./logger','DBMMR','toString','yWKay','GZWZK','./performance/constants'];a85_0x1e3b=function(){return _0x2af4ce;};return a85_0x1e3b();}function a85_0x4ad6(_0x241386,_0x2ca016){const _0x1e3bca=a85_0x1e3b();return a85_0x4ad6=function(_0x4ad67d,_0x162104){_0x4ad67d=_0x4ad67d-0x9e;let _0x58c12d=_0x1e3bca[_0x4ad67d];return _0x58c12d;},a85_0x4ad6(_0x241386,_0x2ca016);}exports['default']=BrowserStackSetup;