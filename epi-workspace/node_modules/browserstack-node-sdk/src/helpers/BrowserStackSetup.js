function a91_0x4d3c(){const _0x4c7486=['getInstance','JWquc','percy','true','FrQlU','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','../ai-sdk-node/bundle','SDK_CLEANUP','getLocalIdentifier','exitHandler','gRxrR','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','turboScaleUrl','measureWrapper','win32','initialize','Error\x20in\x20percy\x20setup\x20','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','nkQDE','INVALID_INIT_RESP_WITH_USER_IMPACT','../bin/utils/apiUtilityMethods','1193019QbRBRS','TGTwK','exceptions','jRDFt','BROWSERSTACK_PERCY','beforeExit','gewep','default','selfHeal','setupPercy','compareVersions','getCentralUser','getAccessKey','./logger','stringify','browserstackLocal','VsVpu','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','events.json','then','status','isRunning','../bin/utils/clientTroubleshootingService','DJQir','eYKVT','codeceptjs','SIGTERM','browserStackLocalOptions','toLowerCase','testContextOptions','mpKYc','4.5.0','unhandledErrors','framework','SIGABRT','turboScale','waHdg','AHIwL','\x20with\x20error\x20','tcgAuthConfig','4834956wwGDmq','push','startMonitoring','intExitHandler','Local\x20binary\x20started\x20successfully','BfYfQ','TCG_URL','statusCode','uncaughtException','HceRS','ICMMM','isBrowserstackInfra','stop','fireFunnelTestEvent','./performance/performance-tester','ats-repeater','rCpBg','turboScaleGridDetails','Vjpiy','kpwYu','omriq','selenium-webdriver','uaGRr','TCG_AUTH_FAILURE','includes','gpyiQ','zmnLG','Calling\x20Build\x20Stop\x20from\x20ExitHandler','8|16|18|22|13|10|15|14|7|2|20|9|12|21|11|5|6|19|4|1|0|17|3','isUndefined','env','toString','yNKln','setLogLevel','lpUes','skipSessionName','nNUtk','isHealingEnabled','TCG_AUTH_TIMEOUT','./timeoutPromise','gLtdp','platform','handleExceptions','allocateHub','requireSeleniumWebdriverCheck','9518718sTrQJz','disableAutoCaptureLogs','SIGINT','KyDIq','setupBrowserstackLocal','forceLocal','10kyDRlF','split','handled','DYVzg','9keUJlF','cancel','Percy\x20started\x20successfully','SIGBREAK','?caps=','race','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','SDK\x20run\x20started\x20with\x20id:\x20','localOptions','oiUmc','xBreX','jDUoT','setBrowserstackInfraFromConfig','info','AUTOLOGCAPTURE_NOTIFICATION','../../package.json','errorMessage','custom-repeater','FRAMEWORK','BrowserstackHealingInitFailed','url','dedey','stopBrowserstackLocal','arPdH','3149960SuaWhC','false','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','dLwoQ','util','length','Error\x20in\x20writing\x20events\x20to\x20file\x20','getUserName','BROWSERSTACK_TURBOSCALE','parallelsPerPlatform','gNcwz','getHubUrl','BrowserstackHealing.init\x20method\x20timed\x20out','init','platforms','format','writeFileSync','getFinalCaps','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','skipSessionStatus','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','zqGpD','Failed\x20to\x20send\x20data\x20to\x20','BrowserstackHealing.init','readConfig','version','aWqVW','vrWOc','tiIdE','sdkRunId','TCG_DOWN','1382704CBBPRi','config','fldXY','qitJE','playwright','startPercy','setupTcgConfigFile','turboScaleOptions','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','constructor','end','UumbB','vXcwj','proxyUrl','proxyConfig','close','Error\x20in\x20sending\x20testhub\x20stop:\x20','reportProcessInterruptionSituation','zrYBy','HgnrV','Error\x20occured\x20while\x20stopping\x20local\x20binary','startLocalBinary','preInitialize','2QXriPM','Percy\x20stopped','userName','customRepeaters','xbjPU','kjjFd','Ppqxy','playwrightUrl','SDKTestAttempted','./utilities','gWIIb','./testhub/testhubHandler','oLuKv','envConfig','setUpHubUrl','\x20with\x20response\x20','getConfigPath','central_scanner','skipBinaryInitialisation','generateLocalIdentifier','error','1660022nNAwTr','sendToEDS','localIdentifier','XvCDy','anQXw','getTurboScaleGridDetails','NlMKZ','gzMIV','proxy','sanitizeCaps','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','__isPlaywrightInstalled','debug','PFkTk','../bin/utils/constants','getProxyConfigForTcg','isTurboScaleSession','integrations','./helper','setupTCGAuth','DjssH','setupKeepAlive','isNotUndefined','checkStopLocalBinaryOnExit','wfnaY','isEnabled','bind','join','hubUrl','getPackageVersion','isAuthenticated','bstackConfig','useW3C','DyFXa','21999710TAWqkH','dOAwa','CNhXi','aiHeal:tcgAuth','stopPercy','HarOc','setCLICaps','4|7|0|3|6|2|1|5','LGKSe','message','xHJrg','getLocalConfig','finalize','./percy/utils','cliConfig','accessKey','isTrue'];a91_0x4d3c=function(){return _0x4c7486;};return a91_0x4d3c();}const a91_0x454784=a91_0x481b;(function(_0x5ea692,_0x4cf92a){const _0x7c0b75=a91_0x481b,_0x5cb05a=_0x5ea692();while(!![]){try{const _0x122515=parseInt(_0x7c0b75(0x201))/0x1*(parseInt(_0x7c0b75(0x1a3))/0x2)+-parseInt(_0x7c0b75(0x229))/0x3+-parseInt(_0x7c0b75(0x16d))/0x4*(-parseInt(_0x7c0b75(0x151))/0x5)+parseInt(_0x7c0b75(0x14b))/0x6+parseInt(_0x7c0b75(0x1b8))/0x7+parseInt(_0x7c0b75(0x18c))/0x8+parseInt(_0x7c0b75(0x155))/0x9*(-parseInt(_0x7c0b75(0x1da))/0xa);if(_0x122515===_0x4cf92a)break;else _0x5cb05a['push'](_0x5cb05a['shift']());}catch(_0xcfc036){_0x5cb05a['push'](_0x5cb05a['shift']());}}}(a91_0x4d3c,0xe89ed));function a91_0x481b(_0x571dd4,_0x21e400){const _0x4d3c24=a91_0x4d3c();return a91_0x481b=function(_0x481bbe,_0x40f866){_0x481bbe=_0x481bbe-0x14a;let _0x2bc375=_0x4d3c24[_0x481bbe];return _0x2bc375;},a91_0x481b(_0x571dd4,_0x21e400);}const util=require(a91_0x454784(0x171)),os=require('os'),path=require('path'),{v4:uuidv4}=require('uuid'),fs=require('fs'),constants=require(a91_0x454784(0x1c6)),logger=require(a91_0x454784(0x20e))['winstonLogger'],fileLogger=require(a91_0x454784(0x20e))['fileLogger'],{getLogDir}=require('./logger'),helper=require(a91_0x454784(0x1ca)),utilities=require(a91_0x454784(0x1ac)),percyHelper=require(a91_0x454784(0x1e7)),hubAllocator=require('../hubAllocationMethods'),PerformanceTester=require(a91_0x454784(0x237)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require('./performance/constants'),{setPercyFlag}=require('./testhub/utils'),TestHubHandler=require(a91_0x454784(0x1ae)),timeoutPromise=require(a91_0x454784(0x250)),BrowserstackCLI=require('../bin/v2/browserstackCLI'),{getEdsInstrumentationAPIUrl}=require(a91_0x454784(0x200)),ClientTroubleShootingService=require(a91_0x454784(0x217));class BrowserStackSetup{constructor(_0x3156ec,_0x2feaf5){const _0x3e422d=a91_0x454784,_0x1c3f22={'DjssH':_0x3e422d(0x245),'BJfTu':function(_0x19dffd){return _0x19dffd();},'TGTwK':'No\x20config\x20provided.'},_0x39c16f=_0x1c3f22[_0x3e422d(0x1cc)][_0x3e422d(0x152)]('|');let _0x1e13ea=0x0;while(!![]){switch(_0x39c16f[_0x1e13ea++]){case'0':helper['setLogDir'](this['config']);continue;case'1':helper[_0x3e422d(0x17e)](this['config'],this['cliConfig'],this[_0x3e422d(0x1b0)]);continue;case'2':this[_0x3e422d(0x165)]={};continue;case'3':PerformanceTester[_0x3e422d(0x22b)]();continue;case'4':this[_0x3e422d(0x18d)][_0x3e422d(0x21e)]['skipSessionName']=!helper[_0x3e422d(0x234)]()||helper['isTrue'](this[_0x3e422d(0x18d)][_0x3e422d(0x21e)][_0x3e422d(0x24c)]);continue;case'5':helper[_0x3e422d(0x161)](this[_0x3e422d(0x18d)],this['cliConfig']);continue;case'6':helper['setCredentialsFromYmlConfig'](this[_0x3e422d(0x18d)]);continue;case'7':this[_0x3e422d(0x18d)][_0x3e422d(0x21e)]=this[_0x3e422d(0x18d)][_0x3e422d(0x21e)]||{};continue;case'8':this[_0x3e422d(0x221)]=[];continue;case'9':this[_0x3e422d(0x222)]=_0x2feaf5;continue;case'10':this[_0x3e422d(0x18d)]=helper[_0x3e422d(0x185)](helper[_0x3e422d(0x1b3)](_0x3156ec));continue;case'11':if(this[_0x3e422d(0x18d)][_0x3e422d(0x1b7)])throw new Error(this[_0x3e422d(0x18d)][_0x3e422d(0x1b7)]);continue;case'12':global['framework']=_0x2feaf5;continue;case'13':this[_0x3e422d(0x1ed)]=null;continue;case'14':this[_0x3e422d(0x18d)][_0x3e422d(0x17b)]=this[_0x3e422d(0x18d)][_0x3e422d(0x17b)]||[];continue;case'15':this[_0x3e422d(0x1e8)]=helper[_0x3e422d(0x1e0)](_0x3156ec);continue;case'16':helper['normalizeTestReportingEnvVars']();continue;case'17':helper[_0x3e422d(0x24a)](this[_0x3e422d(0x18d)],this['cliConfig'],this[_0x3e422d(0x1b0)]);continue;case'18':this[_0x3e422d(0x1b0)]=helper['setEnvCaps']();continue;case'19':this[_0x3e422d(0x18d)]['testContextOptions'][_0x3e422d(0x180)]=!helper['isBrowserstackInfra']()||helper[_0x3e422d(0x1ea)](this[_0x3e422d(0x18d)][_0x3e422d(0x21e)]['skipSessionStatus']);continue;case'20':this[_0x3e422d(0x18a)]=_0x1c3f22['BJfTu'](uuidv4);continue;case'21':if(helper['isUndefined'](this[_0x3e422d(0x18d)]))throw new Error(_0x1c3f22[_0x3e422d(0x202)]);continue;case'22':this[_0x3e422d(0x210)]=null;continue;}break;}}[a91_0x454784(0x1a2)](_0x4012ba){const _0x5bc208=a91_0x454784,_0x240f54={'HceRS':'userName\x20or\x20accessKey\x20is\x20not\x20defined','kjjFd':function(_0x4d8ada,_0x15e9b9){return _0x4d8ada===_0x15e9b9;},'arPdH':function(_0x540806,_0x2803fd){return _0x540806===_0x2803fd;},'NlMKZ':_0x5bc208(0x1c9),'wfnaY':_0x5bc208(0x1ab),'UumbB':function(_0x2e6c56,_0x4064e6){return _0x2e6c56<_0x4064e6;},'NTuuD':function(_0x47585,_0xa8fdda){return _0x47585(_0xa8fdda);},'jDUoT':_0x5bc208(0x23e),'HgnrV':function(_0x85bf30,_0x4e9d6b){return _0x85bf30===_0x4e9d6b;},'lkasU':_0x5bc208(0x220),'xBreX':_0x5bc208(0x1fd),'NMVxi':_0x5bc208(0x194),'aHGeF':_0x5bc208(0x21b),'nrPyB':_0x5bc208(0x14d),'JWquc':'SIGHUP','gWIIb':function(_0x5de448,_0xe582e2){return _0x5de448!==_0xe582e2;},'dOAwa':_0x5bc208(0x1fa),'CNhXi':_0x5bc208(0x223),'JEPgL':'SIGQUIT','waHdg':_0x5bc208(0x158),'KENer':_0x5bc208(0x206)},_0x2ec1c6=this[_0x5bc208(0x222)];global[_0x5bc208(0x18d)]=this[_0x5bc208(0x18d)],helper[_0x5bc208(0x1c1)](this[_0x5bc208(0x18d)]),this['killSignal']=null,global[_0x5bc208(0x18a)]=this[_0x5bc208(0x18a)],logger['info'](_0x5bc208(0x15c)+this[_0x5bc208(0x18a)]),!this[_0x5bc208(0x18d)][_0x5bc208(0x21c)]&&(this['config'][_0x5bc208(0x21c)]=this['config'][_0x5bc208(0x15d)]||{});if(helper[_0x5bc208(0x246)](helper[_0x5bc208(0x174)](this[_0x5bc208(0x18d)]))||helper['isUndefined'](helper[_0x5bc208(0x20d)](this[_0x5bc208(0x18d)])))throw new Error(_0x240f54[_0x5bc208(0x232)]);helper[_0x5bc208(0x1e5)](this[_0x5bc208(0x18d)])&&helper[_0x5bc208(0x246)](helper[_0x5bc208(0x1f4)](this['config']))&&(!helper['isUndefined'](this['config'][_0x5bc208(0x21c)])&&_0x240f54[_0x5bc208(0x1a8)](this[_0x5bc208(0x18d)]['browserStackLocalOptions'][_0x5bc208(0x195)],Object)?!helper['isTrue'](this[_0x5bc208(0x18d)][_0x5bc208(0x21c)]['skipBinaryInitialisation'])&&(this[_0x5bc208(0x18d)][_0x5bc208(0x21c)][_0x5bc208(0x1ba)]=helper['generateLocalIdentifier']()):this[_0x5bc208(0x18d)]['browserStackLocalOptions']={'localIdentifier':helper[_0x5bc208(0x1b6)]()});this['config'][_0x5bc208(0x21c)][_0x5bc208(0x1b5)]=helper[_0x5bc208(0x1ea)](this[_0x5bc208(0x18d)][_0x5bc208(0x21c)][_0x5bc208(0x1b5)]),helper['setHandlePWError'](this[_0x5bc208(0x18d)]);if(_0x240f54[_0x5bc208(0x16c)](_0x2ec1c6,_0x240f54[_0x5bc208(0x1be)]))return;this[_0x5bc208(0x253)]();process[_0x5bc208(0x247)][_0x5bc208(0x175)]&&(this['config'][_0x5bc208(0x224)]=helper['isTrue'](process[_0x5bc208(0x247)]['BROWSERSTACK_TURBOSCALE']),this[_0x5bc208(0x18d)][_0x5bc208(0x193)]=this[_0x5bc208(0x18d)][_0x5bc208(0x193)]||{});helper[_0x5bc208(0x1c8)](this[_0x5bc208(0x18d)])&&(process[_0x5bc208(0x247)][_0x5bc208(0x175)]=!![]);if(!helper[_0x5bc208(0x234)]()){try{process['env'][_0x5bc208(0x167)]=_0x2ec1c6,utilities[_0x5bc208(0x236)](_0x240f54[_0x5bc208(0x1d0)],{},this[_0x5bc208(0x18d)],this[_0x5bc208(0x222)]);}catch(_0x5cf7e1){logger['debug'](_0x5bc208(0x212)+_0x5cf7e1);}return;}if(helper[_0x5bc208(0x14a)](_0x2ec1c6)){if(global[_0x5bc208(0x1c3)])return;_0x240f54[_0x5bc208(0x197)](_0x240f54['NTuuD'](parseInt,helper['getPackageVersion'](_0x240f54[_0x5bc208(0x160)])),0x3)&&(this[_0x5bc208(0x18d)][_0x5bc208(0x1d8)]=![]),_0x240f54[_0x5bc208(0x19f)](helper[_0x5bc208(0x20b)](helper[_0x5bc208(0x1d5)](_0x240f54[_0x5bc208(0x160)]),_0x240f54['lkasU']),0x1)&&(this['config'][_0x5bc208(0x1d8)]=!![]);}(helper[_0x5bc208(0x246)](this['config']['platforms'])||helper['isUndefined'](this[_0x5bc208(0x18d)][_0x5bc208(0x17b)]['length']))&&(helper['isUndefined'](this[_0x5bc208(0x18d)][_0x5bc208(0x176)])?logger[_0x5bc208(0x162)](_0x240f54[_0x5bc208(0x15f)]):logger['warn'](_0x240f54['NMVxi']),this['config']['platforms']=[]);!this[_0x5bc208(0x18d)][_0x5bc208(0x21e)]&&(this[_0x5bc208(0x18d)]['testContextOptions']={});try{process[_0x5bc208(0x247)][_0x5bc208(0x167)]=_0x4012ba['_'][0x0],utilities['fireFunnelTestEvent'](_0x240f54[_0x5bc208(0x1d0)],{},this['config'],this[_0x5bc208(0x222)]);}catch(_0x418a22){logger[_0x5bc208(0x1c4)](_0x5bc208(0x212)+_0x418a22);}!this[_0x5bc208(0x18d)][_0x5bc208(0x14c)]&&logger['info'](constants[_0x5bc208(0x163)]),this[_0x5bc208(0x22c)]=this['intExitHandler'][_0x5bc208(0x1d2)](this),process['on'](_0x240f54['aHGeF'],this[_0x5bc208(0x22c)]),process['on'](_0x240f54['nrPyB'],this[_0x5bc208(0x22c)]),process['on'](_0x240f54[_0x5bc208(0x1ec)],this['intExitHandler']),_0x240f54[_0x5bc208(0x1ad)](process[_0x5bc208(0x252)],_0x240f54[_0x5bc208(0x1db)])?(process['on'](_0x240f54[_0x5bc208(0x1dc)],this[_0x5bc208(0x22c)]),process['on'](_0x240f54['JEPgL'],this[_0x5bc208(0x22c)])):process['on'](_0x240f54[_0x5bc208(0x225)],this[_0x5bc208(0x22c)]),process['on'](_0x240f54['KENer'],this[_0x5bc208(0x1f5)]());}async[a91_0x454784(0x1fb)](_0x27d830){const _0x59a92f=a91_0x454784,_0xf10dab={'bdvaT':_0x59a92f(0x238),'nNUtk':_0x59a92f(0x166),'xbjPU':_0x59a92f(0x1ee),'oFiHK':function(_0x57ae55,_0x2b5a5f){return _0x57ae55===_0x2b5a5f;},'vrWOc':_0x59a92f(0x190),'khBJX':function(_0x54418e,_0x32a17b){return _0x54418e+_0x32a17b;},'zqGpD':_0x59a92f(0x159),'zmnLG':function(_0x4f4c8e,_0x126886){return _0x4f4c8e(_0x126886);},'akfVA':_0x59a92f(0x21a)};this[_0x59a92f(0x1a2)](_0x27d830);if(helper[_0x59a92f(0x1c8)](this[_0x59a92f(0x18d)])){const _0x5ca643=await helper[_0x59a92f(0x1bd)](this[_0x59a92f(0x18d)]);this['config'][_0x59a92f(0x23a)]=_0x5ca643,_0x5ca643['isTrialGrid']&&helper[_0x59a92f(0x1ce)](this['config'][_0x59a92f(0x210)])&&helper['isTrue'](this['config'][_0x59a92f(0x210)])&&(this[_0x59a92f(0x18d)][_0x59a92f(0x21c)]['localIdentifier']=_0xf10dab['bdvaT'],this['config'][_0x59a92f(0x21c)][_0xf10dab[_0x59a92f(0x24d)]]=_0x5ca643[_0x59a92f(0x1a6)][_0x59a92f(0x1d3)](','),this['config']['browserStackLocalOptions'][_0x59a92f(0x150)]=_0xf10dab[_0x59a92f(0x1a7)]),this[_0x59a92f(0x18d)]['turboScaleUrl']=_0x5ca643[_0x59a92f(0x169)],this['framework']&&_0xf10dab['oFiHK'](this['framework'][_0x59a92f(0x21d)](),_0xf10dab[_0x59a92f(0x188)])?this['config'][_0x59a92f(0x1f8)]=_0xf10dab['khBJX'](_0x5ca643[_0x59a92f(0x1aa)],_0xf10dab[_0x59a92f(0x182)]):constants[_0x59a92f(0x1d4)]=helper[_0x59a92f(0x178)](this[_0x59a92f(0x18d)]),logger['debug'](_0x59a92f(0x16f)+constants[_0x59a92f(0x1d4)]);}helper['setProxySettings'](this['config']),this[_0x59a92f(0x1cd)](),_0xf10dab[_0x59a92f(0x243)](setPercyFlag,this),await this['setupBrowserstackLocal'](),![_0xf10dab['akfVA'],_0xf10dab[_0x59a92f(0x188)]][_0x59a92f(0x241)](this[_0x59a92f(0x222)])&&!helper[_0x59a92f(0x1c8)](this['config'])&&!helper[_0x59a92f(0x20c)]()[_0x59a92f(0x1b4)]&&await this[_0x59a92f(0x1b1)]();}async[a91_0x454784(0x20a)](){const _0x380060=a91_0x454784,_0x5d1a89={};_0x5d1a89['dLwoQ']=function(_0x261c3e,_0x565946){return _0x261c3e===_0x565946;},_0x5d1a89[_0x380060(0x1af)]=_0x380060(0x16e),_0x5d1a89[_0x380060(0x1bc)]=_0x380060(0x181),_0x5d1a89[_0x380060(0x251)]=_0x380060(0x157),_0x5d1a89[_0x380060(0x1a9)]=_0x380060(0x1ee),_0x5d1a89['DYVzg']='beforeExit';const _0x2c8ecd=_0x5d1a89;if(helper[_0x380060(0x1ea)](this[_0x380060(0x18d)][_0x380060(0x1ed)])&&(!this['percy']||!this[_0x380060(0x1ed)][_0x380060(0x216)]()))try{this[_0x380060(0x1ed)]=await percyHelper[_0x380060(0x191)](this[_0x380060(0x18d)]);if(!this[_0x380060(0x1ed)]){process[_0x380060(0x247)][_0x380060(0x205)]=_0x2c8ecd['oLuKv'];throw new Error(_0x2c8ecd[_0x380060(0x1bc)]);}logger['info'](_0x2c8ecd[_0x380060(0x251)]),process[_0x380060(0x247)]['BROWSERSTACK_PERCY']=_0x2c8ecd[_0x380060(0x1a9)];let _0x57daa0=0x0;const _0x2350b2=async()=>{const _0x1cc789=_0x380060;_0x57daa0++,_0x2c8ecd[_0x1cc789(0x170)](_0x57daa0,0x1)&&await this[_0x1cc789(0x1de)]();};process['on'](_0x2c8ecd[_0x380060(0x154)],_0x2350b2);}catch(_0x4557bf){process[_0x380060(0x247)][_0x380060(0x205)]=_0x2c8ecd[_0x380060(0x1af)],logger[_0x380060(0x1c4)](_0x380060(0x1fc)+_0x4557bf);throw new Error(_0x4557bf[_0x380060(0x248)]());}}async[a91_0x454784(0x1de)](){const _0x103827=a91_0x454784,_0x16ef16={};_0x16ef16[_0x103827(0x204)]=_0x103827(0x1a4),_0x16ef16['tiIdE']='Error\x20occured\x20while\x20stopping\x20percy';const _0x8961b0=_0x16ef16;if(this[_0x103827(0x1ed)]&&this[_0x103827(0x1ed)][_0x103827(0x216)]())try{await percyHelper[_0x103827(0x1de)](this['percy']),logger[_0x103827(0x162)](_0x8961b0[_0x103827(0x204)]);}catch(_0x2071d2){logger[_0x103827(0x1b7)](_0x8961b0[_0x103827(0x189)],_0x2071d2[_0x103827(0x1e3)]);}}async[a91_0x454784(0x14f)](){const _0x1ca404=a91_0x454784,_0x58dca9={};_0x58dca9[_0x1ca404(0x21f)]=_0x1ca404(0x1f1),_0x58dca9[_0x1ca404(0x1d9)]=_0x1ca404(0x22d);const _0x1f3cd8=_0x58dca9;if(helper[_0x1ca404(0x234)]()&&helper['isTrue'](this[_0x1ca404(0x18d)]['browserstackLocal'])&&(!this[_0x1ca404(0x210)]||!this['browserstackLocal'][_0x1ca404(0x216)]()))try{if(this[_0x1ca404(0x18d)]['browserStackLocalOptions'][_0x1ca404(0x1b5)]){logger[_0x1ca404(0x1c4)](_0x1f3cd8[_0x1ca404(0x21f)]);return;}this['browserstackLocal']=await helper[_0x1ca404(0x1a1)](this[_0x1ca404(0x18d)]),logger['info'](_0x1f3cd8[_0x1ca404(0x1d9)]);}catch(_0x1ee07c){logger[_0x1ca404(0x1c4)](_0x1ee07c);throw new Error(_0x1ee07c[_0x1ca404(0x248)]());}}async[a91_0x454784(0x16b)](){const _0x3bd12c=a91_0x454784,_0xa7d942={};_0xa7d942[_0x3bd12c(0x15e)]='Local\x20binary\x20stopped',_0xa7d942[_0x3bd12c(0x23c)]=_0x3bd12c(0x1a0);const _0x1b5f17=_0xa7d942;if(this['browserstackLocal']&&this[_0x3bd12c(0x210)]['isRunning']())try{await helper['stopLocalBinary'](this[_0x3bd12c(0x210)]),logger['info'](_0x1b5f17['oiUmc']);}catch(_0x1a90e0){logger[_0x3bd12c(0x1b7)](_0x1b5f17[_0x3bd12c(0x23c)],_0x1a90e0['message']);}}async[a91_0x454784(0x1b1)](){return PerformanceTester['measureWrapper'](PerformanceAutEvents['HUB_MANAGEMENT'],async()=>{const _0x3e91c6=a91_0x481b;await hubAllocator[_0x3e91c6(0x254)](this[_0x3e91c6(0x18d)]);})();}async[a91_0x454784(0x1cb)](){const _0x4ee2bb=a91_0x454784,_0x18ddc9={'FrQlU':function(_0x3c0e74,_0x167013){return _0x3c0e74(_0x167013);},'CpjZZ':_0x4ee2bb(0x1f2),'fldXY':function(_0x596562,_0x46faac,_0x5a34bb,_0x44ae38,_0x43cb48,_0x3dd5aa,_0x49d34b){return _0x596562(_0x46faac,_0x5a34bb,_0x44ae38,_0x43cb48,_0x3dd5aa,_0x49d34b);},'LiQNl':_0x4ee2bb(0x179),'yNKln':_0x4ee2bb(0x168),'KyDIq':function(_0x4a35a0,_0x57a0b0){return _0x4a35a0(_0x57a0b0);},'gRxrR':_0x4ee2bb(0x164),'gzMIV':_0x4ee2bb(0x184),'UxVfh':function(_0x1bade5,_0x3701d6){return _0x1bade5(_0x3701d6);},'lvOFn':function(_0x14f4f5,_0x2ba4e6){return _0x14f4f5===_0x2ba4e6;},'ICMMM':'true','gewep':function(_0x1fa4e0,_0x2c323a){return _0x1fa4e0===_0x2c323a;},'wQUDm':function(_0x4e9d5a,_0x12a351){return _0x4e9d5a===_0x12a351;},'rjiQp':_0x4ee2bb(0x15b),'qitJE':function(_0x10480f,_0x206eda){return _0x10480f===_0x206eda;},'omriq':_0x4ee2bb(0x17f),'rCpBg':_0x4ee2bb(0x1f0),'HarOc':function(_0xd00642,_0xf8af22){return _0xd00642(_0xf8af22);},'JpnsQ':_0x4ee2bb(0x1f7),'Vjpiy':function(_0x12ffc7,_0x167662){return _0x12ffc7>=_0x167662;},'VsVpu':function(_0x557279,_0x5a0f09){return _0x557279<_0x5a0f09;},'Dosct':'tcg\x20config\x20setup\x20successful.','DJQir':_0x4ee2bb(0x1dd),'eYKVT':function(_0x1e998d){return _0x1e998d();}},_0x46b1fd=PerformanceTester[_0x4ee2bb(0x1f9)](_0x18ddc9[_0x4ee2bb(0x218)],async()=>{const _0x27dbb0=_0x4ee2bb;try{const _0x5e5691=new Date(),_0x5a28c9=helper[_0x27dbb0(0x1c7)](this[_0x27dbb0(0x18d)]),_0x40ec4e=_0x18ddc9[_0x27dbb0(0x1ef)](require,path[_0x27dbb0(0x1d3)](__dirname,_0x18ddc9['CpjZZ'])),_0x4433d5=_0x18ddc9[_0x27dbb0(0x18e)](timeoutPromise,constants[_0x27dbb0(0x24f)],_0x18ddc9['LiQNl'],_0x18ddc9[_0x27dbb0(0x249)],_0x5e5691,this[_0x27dbb0(0x18d)],this[_0x27dbb0(0x222)]),_0x2c30cd={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x18ddc9[_0x27dbb0(0x14e)](require,_0x18ddc9[_0x27dbb0(0x1f6)])[_0x27dbb0(0x186)],'methodUsed':_0x18ddc9['gzMIV'],'proxyConfig':_0x5a28c9,'os':os[_0x27dbb0(0x252)]()};if(_0x5a28c9&&_0x5a28c9[_0x27dbb0(0x199)]){utilities[_0x27dbb0(0x236)](constants['AI_PROXY_FAILURE'],_0x2c30cd,this[_0x27dbb0(0x18d)],this[_0x27dbb0(0x222)]);return;}const _0x5584ea={};_0x5584ea[_0x27dbb0(0x1c0)]=_0x5a28c9;const _0x151d3d=await Promise[_0x27dbb0(0x15a)]([_0x40ec4e[_0x27dbb0(0x17a)](this[_0x27dbb0(0x18d)][_0x27dbb0(0x1e9)],this['config'][_0x27dbb0(0x1a5)],constants[_0x27dbb0(0x22f)],_0x18ddc9['UxVfh'](require,_0x18ddc9[_0x27dbb0(0x1f6)])[_0x27dbb0(0x186)],_0x5584ea)[_0x27dbb0(0x214)](_0x1c4391=>{const _0x1887fd=_0x27dbb0;return _0x4433d5[_0x1887fd(0x156)](),_0x1c4391;}),_0x4433d5]);_0x151d3d[_0x27dbb0(0x24e)]=_0x18ddc9['lvOFn'](_0x151d3d[_0x27dbb0(0x24e)],_0x18ddc9[_0x27dbb0(0x233)])||_0x18ddc9['gewep'](_0x151d3d['isHealingEnabled'],!![]);const _0x189cbe=_0x18ddc9['lvOFn'](this[_0x27dbb0(0x18d)][_0x27dbb0(0x209)],!![])||_0x18ddc9['wQUDm'](this[_0x27dbb0(0x18d)][_0x27dbb0(0x209)],_0x18ddc9['ICMMM']);if(_0x18ddc9[_0x27dbb0(0x207)](_0x151d3d[_0x27dbb0(0x1e3)],constants['UPGRADE_REQUIRED'])&&_0x189cbe)logger[_0x27dbb0(0x162)](_0x18ddc9['rjiQp']);else{if(!_0x151d3d['isAuthenticated']&&_0x18ddc9[_0x27dbb0(0x18f)](_0x151d3d[_0x27dbb0(0x215)],0x1f7)&&_0x189cbe)logger[_0x27dbb0(0x162)](_0x18ddc9[_0x27dbb0(0x23d)]),utilities[_0x27dbb0(0x236)](constants[_0x27dbb0(0x18b)],_0x2c30cd,this[_0x27dbb0(0x18d)],this[_0x27dbb0(0x222)]);else{if(!_0x151d3d['isAuthenticated']&&_0x189cbe){logger['info'](_0x18ddc9[_0x27dbb0(0x239)]);const _0x8d5964={'tcgUrl':constants[_0x27dbb0(0x22f)],'sdkVersion':_0x18ddc9[_0x27dbb0(0x1df)](require,_0x18ddc9[_0x27dbb0(0x1f6)])[_0x27dbb0(0x186)],'methodUsed':_0x18ddc9[_0x27dbb0(0x1bf)],'proxyConfig':_0x5a28c9,'os':os['platform']()};utilities['fireFunnelTestEvent'](constants[_0x27dbb0(0x240)],_0x8d5964,this[_0x27dbb0(0x18d)],this[_0x27dbb0(0x222)]);}else{if(_0x151d3d[_0x27dbb0(0x1d6)]&&!_0x151d3d[_0x27dbb0(0x24e)]&&_0x189cbe)logger['info'](_0x18ddc9['JpnsQ']);else{if(_0x18ddc9[_0x27dbb0(0x23b)](_0x151d3d[_0x27dbb0(0x215)],0xc8)&&_0x18ddc9[_0x27dbb0(0x211)](_0x151d3d['status'],0x12c))utilities[_0x27dbb0(0x236)](constants['AI_INIT_SUCCESSFUL'],_0x2c30cd,this[_0x27dbb0(0x18d)],this[_0x27dbb0(0x222)]);else{if(_0x18ddc9[_0x27dbb0(0x23b)](_0x151d3d[_0x27dbb0(0x215)],0x190))_0x2c30cd[_0x27dbb0(0x215)]=_0x151d3d[_0x27dbb0(0x215)],utilities['fireFunnelTestEvent'](constants['AI_INIT_FAILURE'],_0x2c30cd,this['config'],this['framework']);else!_0x151d3d['status']&&utilities[_0x27dbb0(0x236)](constants[_0x27dbb0(0x1ff)],_0x2c30cd,this[_0x27dbb0(0x18d)],this['framework']);}}}}}if(_0x151d3d[_0x27dbb0(0x1d6)]&&_0x151d3d['isHealingEnabled']){const _0xb44827={};_0xb44827[_0x27dbb0(0x228)]=_0x151d3d;const _0x28cffc=_0xb44827;_0x5a28c9&&(_0x28cffc[_0x27dbb0(0x19a)]=_0x5a28c9),_0x28cffc['framework']=this[_0x27dbb0(0x222)],_0x28cffc[_0x27dbb0(0x1d7)]=this[_0x27dbb0(0x18d)],helper[_0x27dbb0(0x192)](_0x28cffc),logger['debug'](_0x18ddc9['Dosct']);}}catch(_0xd81764){logger['debug'](_0x27dbb0(0x1c2)+(_0xd81764[_0x27dbb0(0x1e3)]?_0xd81764['message']:''));}});await _0x18ddc9[_0x4ee2bb(0x219)](_0x46b1fd);}[a91_0x454784(0x1cd)](){const _0x4b34ef=a91_0x454784,_0x56f833={'axcJa':function(_0x150a29,_0x1016dd){return _0x150a29(_0x1016dd);},'xHJrg':'./setKeepAlive'};_0x56f833['axcJa'](require,_0x56f833[_0x4b34ef(0x1e4)])();}[a91_0x454784(0x253)](){const _0x35e73c=a91_0x454784,_0x4912a5={};_0x4912a5[_0x35e73c(0x198)]='3|1|0|4|2',_0x4912a5[_0x35e73c(0x1bb)]='unhandledRejection',_0x4912a5[_0x35e73c(0x23f)]=_0x35e73c(0x231);const _0x30bac2=_0x4912a5,_0x147854=_0xd29b44=>{const _0x4544c0=_0x35e73c,_0x207dfa=_0x30bac2[_0x4544c0(0x198)][_0x4544c0(0x152)]('|');let _0x44352f=0x0;while(!![]){switch(_0x207dfa[_0x44352f++]){case'0':this['unhandledErrors'][_0x4544c0(0x22a)](util[_0x4544c0(0x17c)]('%j',_0xd29b44));continue;case'1':logger[_0x4544c0(0x1c4)](util[_0x4544c0(0x17c)](_0xd29b44));continue;case'2':ClientTroubleShootingService['reportFinalDetectionState']();continue;case'3':logger[_0x4544c0(0x1b7)](_0xd29b44['message']);continue;case'4':PerformanceTester['captureError'](_0xd29b44);continue;}break;}};process['on'](_0x30bac2['XvCDy'],_0x147854),process['on'](_0x30bac2['uaGRr'],_0x147854);}async['intExitHandler'](_0x7035e7){const _0x1b8ca8=a91_0x454784,_0x317c4d={};_0x317c4d[_0x1b8ca8(0x22e)]=_0x1b8ca8(0x1e1),_0x317c4d[_0x1b8ca8(0x226)]=function(_0x183a25,_0x4ff42b){return _0x183a25+_0x4ff42b;},_0x317c4d['zrYBy']='Shutdown\x20triggered\x20by\x20',_0x317c4d[_0x1b8ca8(0x1c5)]=function(_0x292ec2,_0x5227ea){return _0x292ec2+_0x5227ea;},_0x317c4d[_0x1b8ca8(0x1e2)]=_0x1b8ca8(0x153),_0x317c4d[_0x1b8ca8(0x187)]=function(_0x5aa9af,_0x591ccd){return _0x5aa9af+_0x591ccd;};const _0x348e5b=_0x317c4d,_0x4e31e9=_0x348e5b[_0x1b8ca8(0x22e)][_0x1b8ca8(0x152)]('|');let _0x4547c9=0x0;while(!![]){switch(_0x4e31e9[_0x4547c9++]){case'0':logger[_0x1b8ca8(0x162)](_0x348e5b[_0x1b8ca8(0x226)](_0x348e5b[_0x1b8ca8(0x19e)],_0x7035e7));continue;case'1':await ClientTroubleShootingService['reportFinalDetectionState']();continue;case'2':await TestHubHandler[_0x1b8ca8(0x235)](_0x7035e7);continue;case'3':this['killSignal']=_0x7035e7;continue;case'4':if(this[_0x348e5b[_0x1b8ca8(0x1c5)](_0x348e5b[_0x1b8ca8(0x1e2)],_0x7035e7)])return;continue;case'5':await BrowserstackCLI['getInstance']()[_0x1b8ca8(0x235)]();continue;case'6':await ClientTroubleShootingService[_0x1b8ca8(0x19d)](_0x7035e7);continue;case'7':this[_0x348e5b[_0x1b8ca8(0x187)](_0x348e5b[_0x1b8ca8(0x1e2)],_0x7035e7)]=!![];continue;}break;}}[a91_0x454784(0x1f5)](){const _0xdd56eb=a91_0x454784,_0x3ab626={'oawab':function(_0x44b690,_0x470cd0){return _0x44b690===_0x470cd0;},'dedey':_0xdd56eb(0x244),'lpUes':function(_0x1b5613,_0x71a407){return _0x1b5613>_0x71a407;},'gNcwz':function(_0x331777,_0x5107e2){return _0x331777>_0x5107e2;},'gpyiQ':function(_0x433a27,_0x10e585){return _0x433a27(_0x10e585);},'MzYwS':function(_0xdf01f4){return _0xdf01f4();},'nkQDE':_0xdd56eb(0x213)};let _0x34133b=0x0;return async()=>{const _0x290e47=_0xdd56eb;_0x34133b++;if(_0x3ab626['oawab'](_0x34133b,0x1)){helper[_0x290e47(0x1cf)](this['framework'])&&await this['stopBrowserstackLocal']();try{logger[_0x290e47(0x1c4)](_0x3ab626[_0x290e47(0x16a)]),await TestHubHandler[_0x290e47(0x235)](_0x34133b),await ClientTroubleShootingService['reportFinalDetectionState'](),await BrowserstackCLI[_0x290e47(0x1eb)]()[_0x290e47(0x235)]('1');}catch(_0x1dbdce){logger[_0x290e47(0x1c4)](_0x290e47(0x19c)+util['format'](_0x1dbdce));}PerformanceTester[_0x290e47(0x196)](PerformanceEvents[_0x290e47(0x1f3)]);if(PerformanceTester[_0x290e47(0x1d1)]()){const {measures:_0x4fcf87,errors:_0x18aa0d}=await PerformanceTester[_0x290e47(0x1e6)](),_0x366b31={};if(_0x4fcf87&&_0x3ab626[_0x290e47(0x24b)](_0x4fcf87[_0x290e47(0x172)],0x0)||_0x18aa0d&&_0x3ab626[_0x290e47(0x177)](_0x18aa0d['length'],0x0)){const _0x4182ac={};_0x4182ac['measures']=_0x4fcf87,_0x4182ac[_0x290e47(0x203)]=_0x18aa0d,Object['assign'](_0x366b31,_0x4182ac);}try{const _0xf5b8e4=await helper[_0x290e47(0x1b9)](_0x366b31,this[_0x290e47(0x18d)]);logger[_0x290e47(0x1c4)]('Data\x20sent\x20successfully\x20to\x20'+_0x3ab626['gpyiQ'](getEdsInstrumentationAPIUrl,'')+_0x290e47(0x1b2)+_0xf5b8e4[_0x290e47(0x230)]);}catch(_0x3e9d6b){logger[_0x290e47(0x1c4)](_0x290e47(0x183)+_0x3ab626[_0x290e47(0x242)](getEdsInstrumentationAPIUrl,'')+_0x290e47(0x227)+util[_0x290e47(0x17c)](_0x3e9d6b));}try{fs[_0x290e47(0x17d)](path['join'](_0x3ab626['MzYwS'](getLogDir),_0x3ab626[_0x290e47(0x1fe)]),JSON[_0x290e47(0x20f)](_0x366b31));}catch(_0x8b9160){logger[_0x290e47(0x1c4)](_0x290e47(0x173)+_0x8b9160);}}}logger&&logger[_0x290e47(0x19b)](),fileLogger&&fileLogger['close']();};}}exports[a91_0x454784(0x208)]=BrowserStackSetup;