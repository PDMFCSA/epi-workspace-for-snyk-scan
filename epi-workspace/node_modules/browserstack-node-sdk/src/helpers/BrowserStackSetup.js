const a55_0x17a0d2=a55_0x6f03;(function(_0xa4cbbd,_0xa3c577){const _0x2d7cc6=a55_0x6f03,_0x56bf9c=_0xa4cbbd();while(!![]){try{const _0x49163c=parseInt(_0x2d7cc6(0x259))/0x1*(parseInt(_0x2d7cc6(0x24a))/0x2)+parseInt(_0x2d7cc6(0x210))/0x3*(parseInt(_0x2d7cc6(0x201))/0x4)+parseInt(_0x2d7cc6(0x238))/0x5+parseInt(_0x2d7cc6(0x227))/0x6+-parseInt(_0x2d7cc6(0x21d))/0x7*(parseInt(_0x2d7cc6(0x19e))/0x8)+parseInt(_0x2d7cc6(0x1e3))/0x9+-parseInt(_0x2d7cc6(0x22f))/0xa;if(_0x49163c===_0xa3c577)break;else _0x56bf9c['push'](_0x56bf9c['shift']());}catch(_0x23ca6a){_0x56bf9c['push'](_0x56bf9c['shift']());}}}(a55_0xcae1,0x7a714));const util=require(a55_0x17a0d2(0x196)),os=require('os'),path=require(a55_0x17a0d2(0x1fd)),{v4:uuidv4}=require('uuid'),fs=require('fs'),constants=require('../bin/utils/constants'),{isTurboScaleSession}=require(a55_0x17a0d2(0x1bf)),logger=require(a55_0x17a0d2(0x1f0))[a55_0x17a0d2(0x17e)],helper=require(a55_0x17a0d2(0x1ef)),utilities=require(a55_0x17a0d2(0x254)),percyHelper=require(a55_0x17a0d2(0x246)),hubAllocator=require(a55_0x17a0d2(0x1f4)),PerformanceTester=require('./performance/performance-tester'),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a55_0x17a0d2(0x1a8)),{setPercyFlag}=require('./testhub/utils'),TestHubHandler=require(a55_0x17a0d2(0x1f3)),timeoutPromise=require(a55_0x17a0d2(0x21c));class BrowserStackSetup{constructor(_0x5112ab,_0x339858){const _0x3becdd=a55_0x17a0d2,_0x1cee27={'SLmOX':_0x3becdd(0x211),'gdcnl':function(_0x1b1125,_0x15dbc0){return _0x1b1125===_0x15dbc0;},'cuCAO':_0x3becdd(0x22e),'QHNYo':_0x3becdd(0x232),'xxjoA':_0x3becdd(0x18b),'kCDBY':_0x3becdd(0x1a7),'PeltH':_0x3becdd(0x22c),'vweKF':_0x3becdd(0x1ab),'ZQjGI':_0x3becdd(0x1c6),'xFqwM':_0x3becdd(0x266),'YHXro':function(_0x17519d){return _0x17519d();},'OLLNG':function(_0x16171f,_0xdca143){return _0x16171f!==_0xdca143;},'qgbWN':_0x3becdd(0x216),'KWlmg':_0x3becdd(0x1f9),'gnYag':'SIGQUIT','hKLDZ':_0x3becdd(0x1ed),'LyeXC':_0x3becdd(0x1a3),'IJEoF':function(_0x5563ca,_0x4112ee){return _0x5563ca<_0x4112ee;},'eiqOG':function(_0x2038a8,_0xc38dec){return _0x2038a8(_0xc38dec);},'eQsjX':'selenium-webdriver','CHHMC':_0x3becdd(0x1fb),'KpXlk':_0x3becdd(0x212)},_0x4b1504=_0x1cee27[_0x3becdd(0x268)][_0x3becdd(0x1a2)]('|');let _0x2a10cd=0x0;while(!![]){switch(_0x4b1504[_0x2a10cd++]){case'0':this['errorMessage']={};continue;case'1':this[_0x3becdd(0x20c)][_0x3becdd(0x1ad)][_0x3becdd(0x174)]=!helper[_0x3becdd(0x248)]()||helper[_0x3becdd(0x242)](this[_0x3becdd(0x20c)][_0x3becdd(0x1ad)][_0x3becdd(0x174)]);continue;case'2':helper[_0x3becdd(0x1e8)](this['config'])&&helper[_0x3becdd(0x1b2)](helper[_0x3becdd(0x1d2)](this['config']))&&(!helper[_0x3becdd(0x1b2)](this[_0x3becdd(0x20c)]['browserStackLocalOptions'])&&_0x1cee27[_0x3becdd(0x24d)](this['config'][_0x3becdd(0x1fc)]['constructor'],Object)?!helper[_0x3becdd(0x242)](this[_0x3becdd(0x20c)][_0x3becdd(0x1fc)]['skipBinaryInitialisation'])&&(this[_0x3becdd(0x20c)]['browserStackLocalOptions'][_0x3becdd(0x1a9)]=helper[_0x3becdd(0x1f7)]()):this[_0x3becdd(0x20c)]['browserStackLocalOptions']={'localIdentifier':helper[_0x3becdd(0x1f7)]()});continue;case'3':process['on'](_0x1cee27['cuCAO'],this[_0x3becdd(0x1f8)]);continue;case'4':this[_0x3becdd(0x20c)][_0x3becdd(0x1ad)][_0x3becdd(0x19f)]=!helper['isBrowserstackInfra']()||helper[_0x3becdd(0x242)](this['config'][_0x3becdd(0x1ad)][_0x3becdd(0x19f)]);continue;case'5':helper['setLogLevel'](this[_0x3becdd(0x20c)],this[_0x3becdd(0x26e)],this['envConfig']);continue;case'6':process['on'](_0x1cee27['QHNYo'],this[_0x3becdd(0x1f8)]);continue;case'7':if(helper[_0x3becdd(0x1b2)](helper[_0x3becdd(0x261)](this['config']))||helper[_0x3becdd(0x1b2)](helper['getAccessKey'](this[_0x3becdd(0x20c)])))throw new Error(_0x1cee27[_0x3becdd(0x1d3)]);continue;case'8':this[_0x3becdd(0x188)]=null;continue;case'9':this[_0x3becdd(0x26e)]=helper[_0x3becdd(0x205)](_0x5112ab);continue;case'10':this[_0x3becdd(0x20e)]();continue;case'11':if(!helper[_0x3becdd(0x248)]()){try{process['env'][_0x3becdd(0x185)]=_0x339858,utilities['fireFunnelTestEvent'](_0x1cee27[_0x3becdd(0x231)],{},this[_0x3becdd(0x20c)],this['framework']);}catch(_0x4061f5){logger['debug'](_0x3becdd(0x220)+_0x4061f5);}return;}continue;case'12':!this[_0x3becdd(0x20c)]['browserStackLocalOptions']&&(this[_0x3becdd(0x20c)]['browserStackLocalOptions']=this[_0x3becdd(0x20c)]['localOptions']||{});continue;case'13':this[_0x3becdd(0x240)]=null;continue;case'14':this[_0x3becdd(0x1e5)]=[];continue;case'15':helper['setBrowserstackInfraFromConfig'](this[_0x3becdd(0x20c)],this[_0x3becdd(0x26e)]);continue;case'16':this[_0x3becdd(0x20c)]=helper[_0x3becdd(0x20f)](helper[_0x3becdd(0x25d)](_0x5112ab));continue;case'17':!this[_0x3becdd(0x20c)][_0x3becdd(0x1ad)]&&(this['config'][_0x3becdd(0x1ad)]={});continue;case'18':global[_0x3becdd(0x20c)]=this['config'];continue;case'19':helper[_0x3becdd(0x1c8)](this['config'],this[_0x3becdd(0x26e)],this[_0x3becdd(0x1c5)]);continue;case'20':this[_0x3becdd(0x20c)][_0x3becdd(0x1fc)][_0x3becdd(0x1aa)]=helper[_0x3becdd(0x242)](this['config'][_0x3becdd(0x1fc)]['skipBinaryInitialisation']);continue;case'21':(helper['isUndefined'](this[_0x3becdd(0x20c)][_0x3becdd(0x1d4)])||helper[_0x3becdd(0x1b2)](this[_0x3becdd(0x20c)][_0x3becdd(0x1d4)][_0x3becdd(0x1cc)]))&&(helper[_0x3becdd(0x1b2)](this[_0x3becdd(0x20c)]['parallelsPerPlatform'])?logger[_0x3becdd(0x19c)](_0x1cee27[_0x3becdd(0x222)]):logger[_0x3becdd(0x1eb)](_0x1cee27[_0x3becdd(0x1c1)]),this[_0x3becdd(0x20c)][_0x3becdd(0x1d4)]=[]);continue;case'22':try{process[_0x3becdd(0x1db)][_0x3becdd(0x185)]=_0x5112ab['_'][0x0],utilities[_0x3becdd(0x24e)](_0x1cee27[_0x3becdd(0x231)],{},this[_0x3becdd(0x20c)],this[_0x3becdd(0x187)]);}catch(_0xd89836){logger[_0x3becdd(0x1bb)](_0x3becdd(0x220)+_0xd89836);}continue;case'23':this[_0x3becdd(0x1f8)]=this['intExitHandler'][_0x3becdd(0x17a)](this);continue;case'24':if(_0x1cee27[_0x3becdd(0x24d)](_0x339858,_0x1cee27['ZQjGI']))return;continue;case'25':process['on'](_0x1cee27[_0x3becdd(0x1cf)],this[_0x3becdd(0x1f8)]);continue;case'26':process[_0x3becdd(0x1db)][_0x3becdd(0x209)]&&(this[_0x3becdd(0x20c)]['turboScale']=helper[_0x3becdd(0x242)](process[_0x3becdd(0x1db)][_0x3becdd(0x209)]),this['config'][_0x3becdd(0x1c2)]=this[_0x3becdd(0x20c)][_0x3becdd(0x1c2)]||{});continue;case'27':this[_0x3becdd(0x1c9)]=_0x1cee27['YHXro'](uuidv4);continue;case'28':this[_0x3becdd(0x187)]=_0x339858;continue;case'29':global[_0x3becdd(0x1c9)]=this[_0x3becdd(0x1c9)];continue;case'30':if(this[_0x3becdd(0x20c)][_0x3becdd(0x1ec)])throw new Error(this['config'][_0x3becdd(0x1ec)]);continue;case'31':helper[_0x3becdd(0x249)](this[_0x3becdd(0x20c)]);continue;case'32':this[_0x3becdd(0x1e6)]=null;continue;case'33':!this[_0x3becdd(0x20c)][_0x3becdd(0x173)]&&logger[_0x3becdd(0x19c)](constants[_0x3becdd(0x217)]);continue;case'34':_0x1cee27[_0x3becdd(0x1b4)](process[_0x3becdd(0x253)],_0x1cee27[_0x3becdd(0x265)])?(process['on'](_0x1cee27['KWlmg'],this[_0x3becdd(0x1f8)]),process['on'](_0x1cee27['gnYag'],this[_0x3becdd(0x1f8)])):process['on'](_0x1cee27[_0x3becdd(0x26c)],this['intExitHandler']);continue;case'35':logger[_0x3becdd(0x19c)](_0x3becdd(0x179)+this[_0x3becdd(0x1c9)]);continue;case'36':this[_0x3becdd(0x20c)][_0x3becdd(0x1d4)]=this[_0x3becdd(0x20c)][_0x3becdd(0x1d4)]||[];continue;case'37':this[_0x3becdd(0x20c)]['testContextOptions']=this['config']['testContextOptions']||{};continue;case'38':global[_0x3becdd(0x187)]=_0x339858;continue;case'39':process['on'](_0x1cee27[_0x3becdd(0x198)],this[_0x3becdd(0x1ff)]());continue;case'40':this['envConfig']=helper['setEnvCaps']();continue;case'41':helper['requireSeleniumWebdriverCheck'](_0x339858)&&(_0x1cee27[_0x3becdd(0x1bc)](_0x1cee27[_0x3becdd(0x1c7)](parseInt,helper[_0x3becdd(0x1ac)](_0x1cee27[_0x3becdd(0x23f)])),0x3)&&(this[_0x3becdd(0x20c)][_0x3becdd(0x26a)]=![]),_0x1cee27['gdcnl'](helper[_0x3becdd(0x25f)](helper[_0x3becdd(0x1ac)](_0x1cee27[_0x3becdd(0x23f)]),_0x1cee27[_0x3becdd(0x1de)]),0x1)&&(this[_0x3becdd(0x20c)][_0x3becdd(0x26a)]=!![]));continue;case'42':helper[_0x3becdd(0x1ea)](this['config']);continue;case'43':if(helper[_0x3becdd(0x1b2)](this[_0x3becdd(0x20c)]))throw new Error(_0x1cee27[_0x3becdd(0x186)]);continue;}break;}}async['initialize'](){const _0x5ac372=a55_0x17a0d2,_0x216a9a={'ENVsT':function(_0x378785,_0x282b54){return _0x378785(_0x282b54);},'fQSAs':_0x5ac372(0x239),'XOUws':_0x5ac372(0x263),'tfQjw':_0x5ac372(0x1b3),'wwrRc':function(_0x28c917,_0x12c4b7){return _0x28c917===_0x12c4b7;},'rwnhP':_0x5ac372(0x189),'KXHJM':function(_0x5b466e,_0x3744f7){return _0x5b466e+_0x3744f7;},'GFWox':_0x5ac372(0x245),'MjujP':_0x5ac372(0x24f)};if(_0x216a9a[_0x5ac372(0x1f1)](isTurboScaleSession,this[_0x5ac372(0x20c)])){const _0x3b98fb=await helper[_0x5ac372(0x20b)](this[_0x5ac372(0x20c)]);this[_0x5ac372(0x20c)][_0x5ac372(0x1a0)]=_0x3b98fb,_0x3b98fb[_0x5ac372(0x1a6)]&&(this[_0x5ac372(0x20c)][_0x5ac372(0x1e6)]=!![],this[_0x5ac372(0x20c)]['browserStackLocalOptions'][_0x5ac372(0x1a9)]=_0x216a9a['fQSAs'],this[_0x5ac372(0x20c)]['browserStackLocalOptions'][_0x216a9a['XOUws']]=_0x3b98fb[_0x5ac372(0x225)]['join'](','),this[_0x5ac372(0x20c)][_0x5ac372(0x1fc)][_0x5ac372(0x241)]=_0x216a9a[_0x5ac372(0x23d)]),this[_0x5ac372(0x20c)][_0x5ac372(0x25c)]=_0x3b98fb[_0x5ac372(0x20d)],this['framework']&&_0x216a9a[_0x5ac372(0x22b)](this[_0x5ac372(0x187)][_0x5ac372(0x251)](),_0x216a9a[_0x5ac372(0x1f5)])&&(this[_0x5ac372(0x20c)]['turboScaleUrl']=_0x216a9a['KXHJM'](_0x3b98fb[_0x5ac372(0x184)],_0x216a9a[_0x5ac372(0x235)])),constants[_0x5ac372(0x257)]=helper[_0x5ac372(0x270)](this[_0x5ac372(0x20c)]),logger[_0x5ac372(0x1bb)](_0x5ac372(0x21e)+constants['hubUrl']);}helper[_0x5ac372(0x199)](this[_0x5ac372(0x20c)]),this[_0x5ac372(0x25e)](),_0x216a9a[_0x5ac372(0x1f1)](setPercyFlag,this),await this[_0x5ac372(0x271)](),![_0x216a9a[_0x5ac372(0x208)]][_0x5ac372(0x22d)](this[_0x5ac372(0x187)])&&!_0x216a9a[_0x5ac372(0x1f1)](isTurboScaleSession,this['config'])&&!helper['getCentralUser']()[_0x5ac372(0x195)]&&await this[_0x5ac372(0x180)]();}async[a55_0x17a0d2(0x181)](){const _0x40bfbb=a55_0x17a0d2,_0x460dd4={};_0x460dd4[_0x40bfbb(0x206)]=function(_0x137990,_0x233b95){return _0x137990===_0x233b95;},_0x460dd4[_0x40bfbb(0x1a5)]=_0x40bfbb(0x1ee),_0x460dd4[_0x40bfbb(0x1f6)]='Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.',_0x460dd4[_0x40bfbb(0x19b)]=_0x40bfbb(0x18e),_0x460dd4[_0x40bfbb(0x1ce)]=_0x40bfbb(0x1b3),_0x460dd4['dCbnH']='beforeExit';const _0x3babaf=_0x460dd4;if(helper['isTrue'](this['config'][_0x40bfbb(0x240)])&&(!this['percy']||!this['percy']['isRunning']()))try{this[_0x40bfbb(0x240)]=await percyHelper[_0x40bfbb(0x24b)](this[_0x40bfbb(0x20c)]);if(!this[_0x40bfbb(0x240)]){process[_0x40bfbb(0x1db)]['BROWSERSTACK_PERCY']=_0x3babaf[_0x40bfbb(0x1a5)];throw new Error(_0x3babaf['hUiWx']);}logger[_0x40bfbb(0x19c)](_0x3babaf[_0x40bfbb(0x19b)]),process[_0x40bfbb(0x1db)][_0x40bfbb(0x243)]=_0x3babaf[_0x40bfbb(0x1ce)];let _0x343ea4=0x0;const _0xeefefd=async()=>{const _0x86bda6=_0x40bfbb;_0x343ea4++,_0x3babaf[_0x86bda6(0x206)](_0x343ea4,0x1)&&await this[_0x86bda6(0x23c)]();};process['on'](_0x3babaf[_0x40bfbb(0x1d0)],_0xeefefd);}catch(_0x448878){process[_0x40bfbb(0x1db)][_0x40bfbb(0x243)]=_0x3babaf[_0x40bfbb(0x1a5)],logger['debug']('Error\x20in\x20percy\x20setup\x20'+_0x448878);throw new Error(_0x448878[_0x40bfbb(0x24c)]());}}async[a55_0x17a0d2(0x23c)](){const _0x2998cb=a55_0x17a0d2,_0x2d90d9={};_0x2d90d9[_0x2998cb(0x247)]=_0x2998cb(0x228),_0x2d90d9['khdzr']=_0x2998cb(0x258);const _0x3b1bf1=_0x2d90d9;if(this[_0x2998cb(0x240)]&&this[_0x2998cb(0x240)][_0x2998cb(0x1c4)]())try{await percyHelper[_0x2998cb(0x23c)](this['percy']),logger[_0x2998cb(0x19c)](_0x3b1bf1[_0x2998cb(0x247)]);}catch(_0x1e85d8){logger['error'](_0x3b1bf1[_0x2998cb(0x236)],_0x1e85d8['message']);}}async[a55_0x17a0d2(0x271)](){const _0x3f7a12=a55_0x17a0d2,_0x14bda5={};_0x14bda5[_0x3f7a12(0x18d)]=_0x3f7a12(0x25b),_0x14bda5[_0x3f7a12(0x17b)]=_0x3f7a12(0x1b0);const _0x3878ec=_0x14bda5;if(helper[_0x3f7a12(0x248)]()&&helper[_0x3f7a12(0x242)](this[_0x3f7a12(0x20c)]['browserstackLocal'])&&(!this[_0x3f7a12(0x1e6)]||!this['browserstackLocal']['isRunning']()))try{if(this[_0x3f7a12(0x20c)][_0x3f7a12(0x1fc)][_0x3f7a12(0x1aa)]){logger['debug'](_0x3878ec[_0x3f7a12(0x18d)]);return;}this['browserstackLocal']=await helper['startLocalBinary'](this[_0x3f7a12(0x20c)]),logger[_0x3f7a12(0x19c)](_0x3878ec['kxeCH']);}catch(_0x6a8045){logger[_0x3f7a12(0x1bb)](_0x6a8045);throw new Error(_0x6a8045[_0x3f7a12(0x24c)]());}}async['stopBrowserstackLocal'](){const _0x2df3e3=a55_0x17a0d2,_0x38d81c={};_0x38d81c[_0x2df3e3(0x183)]=_0x2df3e3(0x1dc),_0x38d81c[_0x2df3e3(0x1f2)]=_0x2df3e3(0x18a);const _0xd7600a=_0x38d81c;if(this['browserstackLocal']&&this[_0x2df3e3(0x1e6)][_0x2df3e3(0x1c4)]())try{await helper[_0x2df3e3(0x23b)](this[_0x2df3e3(0x1e6)]),logger[_0x2df3e3(0x19c)](_0xd7600a[_0x2df3e3(0x183)]);}catch(_0x1a0022){logger['error'](_0xd7600a[_0x2df3e3(0x1f2)],_0x1a0022[_0x2df3e3(0x1d7)]);}}async[a55_0x17a0d2(0x180)](){const _0x5b4969=a55_0x17a0d2;return PerformanceTester[_0x5b4969(0x1d5)](PerformanceAutEvents[_0x5b4969(0x178)],async()=>{const _0x3c817b=_0x5b4969;await hubAllocator[_0x3c817b(0x229)](this[_0x3c817b(0x20c)]);})();}async[a55_0x17a0d2(0x1bd)](){const _0x43e146=a55_0x17a0d2,_0x20b946={'ggTjS':function(_0x3e6398,_0x20ed5b){return _0x3e6398(_0x20ed5b);},'KDfcP':_0x43e146(0x260),'kXtjS':function(_0x141ec8,_0x52bcb6,_0x3fc40e,_0x205012,_0x19185c,_0x5c63c9,_0x4000e6){return _0x141ec8(_0x52bcb6,_0x3fc40e,_0x205012,_0x19185c,_0x5c63c9,_0x4000e6);},'rjoCD':_0x43e146(0x224),'DlcnJ':_0x43e146(0x1e9),'JTKgY':_0x43e146(0x1c3),'ApiQm':'BrowserstackHealing.init','ddklT':function(_0x129411,_0x281ea4){return _0x129411===_0x281ea4;},'PMcvs':_0x43e146(0x1b3),'sbChs':function(_0x3190a8,_0x2457be){return _0x3190a8===_0x2457be;},'XJiqn':function(_0x2668fa,_0x44a5b9){return _0x2668fa===_0x44a5b9;},'cEqrR':_0x43e146(0x221),'pgtiy':function(_0x578f08,_0x35a71a){return _0x578f08===_0x35a71a;},'gldok':_0x43e146(0x1df),'xdPsI':_0x43e146(0x1e1),'sYHBX':function(_0x141bde,_0x3d03f1){return _0x141bde(_0x3d03f1);},'wkDUv':_0x43e146(0x1b1),'ltnEG':function(_0x2949ce,_0x290844){return _0x2949ce>=_0x290844;},'vmTmi':function(_0x5f1de0,_0x1e9139){return _0x5f1de0<_0x1e9139;},'PePZp':_0x43e146(0x1d1),'GQEZz':'aiHeal:tcgAuth','eBySh':function(_0x147e0b){return _0x147e0b();}},_0x46c25e=PerformanceTester[_0x43e146(0x1d5)](_0x20b946['GQEZz'],async()=>{const _0x3792c4=_0x43e146;try{const _0x31eddd=new Date(),_0x529ec4=helper[_0x3792c4(0x26d)](this[_0x3792c4(0x20c)]),_0x3c9df4=_0x20b946[_0x3792c4(0x219)](require,path[_0x3792c4(0x1a1)](__dirname,_0x20b946[_0x3792c4(0x19a)])),_0x194da4=_0x20b946['kXtjS'](timeoutPromise,constants[_0x3792c4(0x182)],_0x20b946[_0x3792c4(0x192)],_0x20b946[_0x3792c4(0x1d6)],_0x31eddd,this[_0x3792c4(0x20c)],this[_0x3792c4(0x187)]),_0x47e54c={'tcgUrl':constants[_0x3792c4(0x1e7)],'sdkVersion':_0x20b946['ggTjS'](require,_0x20b946[_0x3792c4(0x250)])[_0x3792c4(0x1ca)],'methodUsed':_0x20b946[_0x3792c4(0x1fe)],'proxyConfig':_0x529ec4,'os':os['platform']()};if(_0x529ec4&&_0x529ec4[_0x3792c4(0x214)]){utilities[_0x3792c4(0x24e)](constants[_0x3792c4(0x1e0)],_0x47e54c,this['config'],this['framework']);return;}const _0x3bd3de={};_0x3bd3de[_0x3792c4(0x1e2)]=_0x529ec4;const _0x533982=await Promise[_0x3792c4(0x22a)]([_0x3c9df4[_0x3792c4(0x175)](this[_0x3792c4(0x20c)][_0x3792c4(0x252)],this[_0x3792c4(0x20c)][_0x3792c4(0x1da)],constants[_0x3792c4(0x1e7)],_0x20b946[_0x3792c4(0x219)](require,_0x20b946[_0x3792c4(0x250)])['version'],_0x3bd3de)[_0x3792c4(0x18f)](_0x5641c3=>{const _0x540d2f=_0x3792c4;return _0x194da4[_0x540d2f(0x26b)](),_0x5641c3;}),_0x194da4]);_0x533982[_0x3792c4(0x203)]=_0x20b946['ddklT'](_0x533982[_0x3792c4(0x203)],_0x20b946[_0x3792c4(0x23e)])||_0x20b946[_0x3792c4(0x215)](_0x533982[_0x3792c4(0x203)],!![]);const _0x485ae0=_0x20b946[_0x3792c4(0x215)](this[_0x3792c4(0x20c)]['selfHeal'],!![])||_0x20b946[_0x3792c4(0x1dd)](this['config'][_0x3792c4(0x1e4)],_0x20b946['PMcvs']);if(_0x20b946[_0x3792c4(0x1dd)](_0x533982['message'],constants[_0x3792c4(0x193)])&&_0x485ae0)logger[_0x3792c4(0x19c)](_0x20b946[_0x3792c4(0x234)]);else{if(!_0x533982[_0x3792c4(0x177)]&&_0x20b946['pgtiy'](_0x533982[_0x3792c4(0x237)],0x1f7)&&_0x485ae0)logger[_0x3792c4(0x19c)](_0x20b946[_0x3792c4(0x197)]),utilities[_0x3792c4(0x24e)](constants[_0x3792c4(0x1c0)],_0x47e54c,this[_0x3792c4(0x20c)],this[_0x3792c4(0x187)]);else{if(!_0x533982[_0x3792c4(0x177)]&&_0x485ae0){logger[_0x3792c4(0x19c)](_0x20b946[_0x3792c4(0x267)]);const _0x5ca6ba={'tcgUrl':constants[_0x3792c4(0x1e7)],'sdkVersion':_0x20b946[_0x3792c4(0x218)](require,_0x20b946[_0x3792c4(0x250)])[_0x3792c4(0x1ca)],'methodUsed':_0x20b946[_0x3792c4(0x1fe)],'proxyConfig':_0x529ec4,'os':os[_0x3792c4(0x253)]()};utilities[_0x3792c4(0x24e)](constants['TCG_AUTH_FAILURE'],_0x5ca6ba,this[_0x3792c4(0x20c)],this[_0x3792c4(0x187)]);}else{if(_0x533982['isAuthenticated']&&!_0x533982[_0x3792c4(0x203)]&&_0x485ae0)logger[_0x3792c4(0x19c)](_0x20b946[_0x3792c4(0x204)]);else{if(_0x20b946[_0x3792c4(0x1b9)](_0x533982[_0x3792c4(0x237)],0xc8)&&_0x20b946[_0x3792c4(0x1af)](_0x533982[_0x3792c4(0x237)],0x12c))utilities[_0x3792c4(0x24e)](constants[_0x3792c4(0x269)],_0x47e54c,this[_0x3792c4(0x20c)],this[_0x3792c4(0x187)]);else{if(_0x20b946[_0x3792c4(0x1b9)](_0x533982['status'],0x190))_0x47e54c[_0x3792c4(0x237)]=_0x533982['status'],utilities[_0x3792c4(0x24e)](constants[_0x3792c4(0x1ae)],_0x47e54c,this[_0x3792c4(0x20c)],this[_0x3792c4(0x187)]);else!_0x533982[_0x3792c4(0x237)]&&utilities[_0x3792c4(0x24e)](constants[_0x3792c4(0x190)],_0x47e54c,this['config'],this[_0x3792c4(0x187)]);}}}}}if(_0x533982['isAuthenticated']&&_0x533982[_0x3792c4(0x203)]){const _0x2a269f={};_0x2a269f['tcgAuthConfig']=_0x533982;const _0x27d893=_0x2a269f;_0x529ec4&&(_0x27d893['proxyConfig']=_0x529ec4),_0x27d893[_0x3792c4(0x187)]=this[_0x3792c4(0x187)],_0x27d893[_0x3792c4(0x226)]=this[_0x3792c4(0x20c)],helper['setupTcgConfigFile'](_0x27d893),logger['debug'](_0x20b946[_0x3792c4(0x233)]);}}catch(_0x2a4799){logger[_0x3792c4(0x1bb)](_0x3792c4(0x223)+(_0x2a4799[_0x3792c4(0x1d7)]?_0x2a4799[_0x3792c4(0x1d7)]:''));}});await _0x20b946[_0x43e146(0x17d)](_0x46c25e);}[a55_0x17a0d2(0x25e)](){const _0x59c541=a55_0x17a0d2,_0x32b482={'YfLbA':function(_0x3f7838,_0x150d03){return _0x3f7838(_0x150d03);},'oTpNw':'./setKeepAlive'};_0x32b482['YfLbA'](require,_0x32b482[_0x59c541(0x1be)])();}[a55_0x17a0d2(0x20e)](){const _0x163011=a55_0x17a0d2,_0x2fb98c={};_0x2fb98c['QZtXa']=_0x163011(0x176),_0x2fb98c[_0x163011(0x1b7)]=_0x163011(0x17f);const _0x4fbd89=_0x2fb98c,_0x4dbb59=_0x2ba326=>{const _0x34d9de=_0x163011;logger[_0x34d9de(0x1ec)](_0x2ba326[_0x34d9de(0x1d7)]),logger[_0x34d9de(0x1bb)](util[_0x34d9de(0x172)](_0x2ba326)),this[_0x34d9de(0x1e5)][_0x34d9de(0x18c)](util[_0x34d9de(0x172)]('%j',_0x2ba326)),PerformanceTester[_0x34d9de(0x1d8)](_0x2ba326);};process['on'](_0x4fbd89[_0x163011(0x1b5)],_0x4dbb59),process['on'](_0x4fbd89['MDCeE'],_0x4dbb59);}async[a55_0x17a0d2(0x1f8)](_0x503ac0){const _0x25b008=a55_0x17a0d2,_0x52c68b={};_0x52c68b['GPQsG']='4|3|1|0|2',_0x52c68b[_0x25b008(0x207)]=function(_0x4d409e,_0x304f99){return _0x4d409e+_0x304f99;},_0x52c68b[_0x25b008(0x1d9)]=_0x25b008(0x256),_0x52c68b[_0x25b008(0x194)]=_0x25b008(0x213),_0x52c68b[_0x25b008(0x17c)]=function(_0x34a35a,_0x22bf89){return _0x34a35a+_0x22bf89;};const _0x59f46c=_0x52c68b,_0x3c6486=_0x59f46c[_0x25b008(0x255)][_0x25b008(0x1a2)]('|');let _0x222bda=0x0;while(!![]){switch(_0x3c6486[_0x222bda++]){case'0':this[_0x25b008(0x188)]=_0x503ac0;continue;case'1':logger[_0x25b008(0x19c)](_0x59f46c[_0x25b008(0x207)](_0x59f46c[_0x25b008(0x1d9)],_0x503ac0));continue;case'2':await TestHubHandler[_0x25b008(0x262)](_0x503ac0);continue;case'3':this[_0x59f46c[_0x25b008(0x207)](_0x59f46c[_0x25b008(0x194)],_0x503ac0)]=!![];continue;case'4':if(this[_0x59f46c['SHQNS'](_0x59f46c[_0x25b008(0x194)],_0x503ac0)])return;continue;}break;}}[a55_0x17a0d2(0x1ff)](){const _0x31b69b=a55_0x17a0d2,_0x32c5ec={};_0x32c5ec['VxYpR']=function(_0x2bf849,_0x536b12){return _0x2bf849===_0x536b12;},_0x32c5ec[_0x31b69b(0x202)]=_0x31b69b(0x23a),_0x32c5ec['HqNwy']=function(_0x548a4d,_0x48fd0d){return _0x548a4d>_0x48fd0d;},_0x32c5ec[_0x31b69b(0x1b6)]=_0x31b69b(0x21f);const _0x7078db=_0x32c5ec;let _0x45e7e0=0x0;return async()=>{const _0x2a133f=_0x31b69b;_0x45e7e0++;if(_0x7078db[_0x2a133f(0x1cb)](_0x45e7e0,0x1)){helper[_0x2a133f(0x200)](this[_0x2a133f(0x187)])&&await this[_0x2a133f(0x230)]();try{logger[_0x2a133f(0x1bb)](_0x7078db['NtQCv']),await TestHubHandler['stop'](_0x45e7e0);}catch(_0x27d05e){logger[_0x2a133f(0x1bb)](_0x2a133f(0x244)+util[_0x2a133f(0x172)](_0x27d05e));}PerformanceTester['end'](PerformanceEvents[_0x2a133f(0x26f)]);if(PerformanceTester[_0x2a133f(0x1b8)]()){const {measures:_0x17f1c6,errors:_0x3373a3}=await PerformanceTester[_0x2a133f(0x25a)](),_0x26c4b9={};if(_0x17f1c6&&_0x7078db[_0x2a133f(0x21a)](_0x17f1c6[_0x2a133f(0x1cc)],0x0)||_0x3373a3&&_0x7078db['HqNwy'](_0x3373a3[_0x2a133f(0x1cc)],0x0)){const _0xb6078f={};_0xb6078f[_0x2a133f(0x1ba)]=_0x17f1c6,_0xb6078f[_0x2a133f(0x21b)]=_0x3373a3,Object['assign'](_0x26c4b9,_0xb6078f);}try{const _0xabe4e0=await helper['sendToEDS'](_0x26c4b9,this[_0x2a133f(0x20c)]);logger['debug'](_0x2a133f(0x264)+constants['EDS_URL']+'\x20with\x20response\x20'+_0xabe4e0['statusCode']);}catch(_0x5efafe){logger[_0x2a133f(0x1bb)](_0x2a133f(0x20a)+constants[_0x2a133f(0x1cd)]+_0x2a133f(0x19d)+util[_0x2a133f(0x172)](_0x5efafe));}try{fs[_0x2a133f(0x1fa)](_0x7078db['rcNhD'],JSON[_0x2a133f(0x191)](_0x26c4b9));}catch(_0x38ab69){logger[_0x2a133f(0x1bb)](_0x2a133f(0x1a4)+_0x38ab69);}}}};}}function a55_0x6f03(_0x37f42c,_0x449ce1){const _0xcae1d2=a55_0xcae1();return a55_0x6f03=function(_0x6f034a,_0x423ea1){_0x6f034a=_0x6f034a-0x172;let _0x438aeb=_0xcae1d2[_0x6f034a];return _0x438aeb;},a55_0x6f03(_0x37f42c,_0x449ce1);}exports['default']=BrowserStackSetup;function a55_0xcae1(){const _0x5c0492=['ENVsT','JbpQU','./testhub/testhubHandler','../hubAllocationMethods','rwnhP','hUiWx','generateLocalIdentifier','intExitHandler','SIGABRT','writeFileSync','4.5.0','browserStackLocalOptions','path','ApiQm','exitHandler','checkStopLocalBinaryOnExit','2878460QIDqza','NtQCv','isHealingEnabled','wkDUv','setCLICaps','ezrHv','egGWJ','MjujP','BROWSERSTACK_TURBOSCALE','Failed\x20to\x20send\x20data\x20to\x20','getTurboScaleGridDetails','config','url','handleExceptions','readConfig','3mVZJGr','14|9|40|32|13|16|36|37|0|18|38|31|28|27|8|29|35|43|30|15|4|1|19|12|7|2|20|5|42|24|10|26|11|41|21|17|22|33|23|6|25|3|34|39','No\x20config\x20provided.','handled','proxyUrl','sbChs','win32','AUTOLOGCAPTURE_NOTIFICATION','sYHBX','ggTjS','HqNwy','exceptions','./timeoutPromise','63HRdmdX','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','log/events.json','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','PeltH','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','BrowserstackHealing.init\x20method\x20timed\x20out','customRepeaters','bstackConfig','2879484ceNHiA','Percy\x20stopped','allocateHub','race','wwrRc','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','includes','SIGHUP','16146810kXsQMG','stopBrowserstackLocal','kCDBY','SIGTERM','PePZp','cEqrR','GFWox','khdzr','status','1280150oRnqTS','ats-repeater','Calling\x20Build\x20Stop\x20from\x20ExitHandler','stopLocalBinary','stopPercy','tfQjw','PMcvs','eQsjX','percy','forceLocal','isTrue','BROWSERSTACK_PERCY','Error\x20in\x20sending\x20testhub\x20stop:\x20','?caps=','./percy/utils','IUjEM','isBrowserstackInfra','sanitizeCaps','26xYrOLw','startPercy','toString','gdcnl','fireFunnelTestEvent','codeceptjs','JTKgY','toLowerCase','accessKey','platform','./utilities','GPQsG','Shutdown\x20triggered\x20by\x20','hubUrl','Error\x20occured\x20while\x20stopping\x20percy','37129WosRrE','finalize','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','turboScaleUrl','getConfigPath','setupKeepAlive','compareVersions','../ai-sdk-node/bundle','getUserName','stop','custom-repeater','Data\x20sent\x20successfully\x20to\x20','qgbWN','SIGINT','xdPsI','SLmOX','AI_INIT_SUCCESSFUL','useW3C','cancel','hKLDZ','getProxyConfigForTcg','cliConfig','SDK_CLEANUP','getHubUrl','setupBrowserstackLocal','format','disableAutoCaptureLogs','skipSessionName','init','unhandledRejection','isAuthenticated','HUB_MANAGEMENT','SDK\x20run\x20started\x20with\x20id:\x20','bind','kxeCH','SHQNS','eBySh','winstonLogger','uncaughtException','setUpHubUrl','setupPercy','TCG_AUTH_TIMEOUT','zaFZB','playwrightUrl','FRAMEWORK','KpXlk','framework','killSignal','playwright','Error\x20occured\x20while\x20stopping\x20local\x20binary','userName\x20or\x20accessKey\x20is\x20not\x20defined','push','TWHFl','Percy\x20started\x20successfully','then','INVALID_INIT_RESP_WITH_USER_IMPACT','stringify','rjoCD','UPGRADE_REQUIRED','nGloW','central_scanner','util','gldok','LyeXC','setProxySettings','KDfcP','KBYKD','info','\x20with\x20error\x20','251792wOuUmh','skipSessionStatus','turboScaleGridDetails','join','split','beforeExit','Error\x20in\x20writing\x20events\x20to\x20file\x20','QgIxF','isTrialGrid','SDKTestAttempted','./performance/constants','localIdentifier','skipBinaryInitialisation','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','getPackageVersion','testContextOptions','AI_INIT_FAILURE','vmTmi','Local\x20binary\x20started\x20successfully','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','isUndefined','true','OLLNG','QZtXa','rcNhD','MDCeE','isEnabled','ltnEG','measures','debug','IJEoF','setupTCGAuth','oTpNw','./ats/helper','TCG_DOWN','vweKF','turboScaleOptions','../../package.json','isRunning','envConfig','integrations','eiqOG','getFinalCaps','sdkRunID','version','VxYpR','length','EDS_URL','SkbEB','xFqwM','dCbnH','tcg\x20config\x20setup\x20successful.','getLocalIdentifier','xxjoA','platforms','measureWrapper','DlcnJ','message','captureError','fXGMd','userName','env','Local\x20binary\x20stopped','XJiqn','CHHMC','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','AI_PROXY_FAILURE','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','proxy','4151115GTvvCR','selfHeal','unhandledErrors','browserstackLocal','TCG_URL','getLocalConfig','BrowserstackHealingInitFailed','setHandlePWError','warn','error','SIGBREAK','false','./helper','./logger'];a55_0xcae1=function(){return _0x5c0492;};return a55_0xcae1();}