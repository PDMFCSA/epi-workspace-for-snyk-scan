const a90_0x2809fd=a90_0x3c50;function a90_0x3591(){const _0x493eec=['isUndefined','win32','PdQjN','unhandledRejection','captureError','yoNcx','skipSessionStatus','getInstance','info','setLogDir','8347932KHKLGW','tOtwk','xTswW','readConfig','custom-repeater','SIGINT','ZKOBh','setupPercy','Shutdown\x20triggered\x20by\x20','WVlhL','../../package.json','./testhub/utils','YOjjv','AI_INIT_SUCCESSFUL','XIwij','proxyConfig','bcYAP','Local\x20binary\x20started\x20successfully','mZaNv','setBrowserstackInfraFromConfig','sendToEDS','toString','18|10|7|8|2|13|22|21|11|5|16|20|9|12|17|6|4|3|0|19|1|14|15','playwrightUrl','setProxySettings','../bin/utils/apiUtilityMethods','HZnqO','turboScaleOptions','dalLs','DxEyK','browserStackLocalOptions','lWPYb','skipSessionName','turboScale','zEtoR','config','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','errorMessage','BROWSERSTACK_PERCY','HGOnQ','preInitialize','allocateHub','./setKeepAlive','cliConfig','unhandledErrors','69204XVsPMf','codeceptjs','AUTOLOGCAPTURE_NOTIFICATION','Error\x20in\x20writing\x20events\x20to\x20file\x20','format','winstonLogger','tNCKf','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','toLowerCase','EcJsU','true','status','2kVHpGh','env','generateLocalIdentifier','AI_PROXY_FAILURE','nMPNt','turboScaleGridDetails','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','measureWrapper','ZyFGW','forceLocal','isAuthenticated','browserstackLocal','race','selfHeal','KnyKT','sanitizeCaps','normalizeTestReportingEnvVars','platforms','isTurboScaleSession','debug','close','ceDKb','BROWSERSTACK_TURBOSCALE','vZtcE','./percy/utils','path','central_scanner','url','testContextOptions','Error\x20occured\x20while\x20stopping\x20local\x20binary','WibcX','VmYWY','integrations','useW3C','aiHeal:tcgAuth','AgcNU','compareVersions','bind','VGfKh','tcgAuthConfig','LytQD','14373DVToDL','getLocalConfig','fGMPc','CXiwA','SIGABRT','stopPercy','getFinalCaps','SDK_CLEANUP','setEnvCaps','Habya','fileLogger','getTurboScaleGridDetails','IROEK','NNTPq','sdkRunId','__isPlaywrightInstalled','length','No\x20config\x20provided.','setUpHubUrl','1133004anySwi','DSkIx','Local\x20binary\x20stopped','./performance/performance-tester','nqlbr','isBrowserstackInfra','\x20with\x20response\x20','turboScaleUrl','hKPiv','TCG_DOWN','BrowserstackHealing.init','0|5|2|4|3|1','xPTuZ','2006752QKnZfU','getPackageVersion','HUB_MANAGEMENT','vocAY','tcg\x20config\x20setup\x20successful.','xZTbN','checkStopLocalBinaryOnExit','wERJu','fireFunnelTestEvent','../bin/v2/browserstackCLI','setupTCGAuth','./testhub/testhubHandler','getLocalIdentifier','intExitHandler','envConfig','UpAWw','RtRnA','vLJVY','exitHandler','error','setLogLevel','isEnabled','stringify','isNotUndefined','Error\x20in\x20percy\x20setup\x20','../bin/utils/constants','./timeoutPromise','getCentralUser','initialize','YXLWB','QyGHT','message','setupKeepAlive','SIGQUIT','RfRBu','getConfigPath','wurcQ','veZJG','skipBinaryInitialisation','playwright','setHandlePWError','../ai-sdk-node/bundle','isRunning','framework','IGneA','Percy\x20started\x20successfully','getHubUrl','stopBrowserstackLocal','CkMCP','nToKr','35172620bciPic','xVHyG','getProxyConfigForTcg','LqkZV','JTLsI','parallelsPerPlatform','warn','stop','TCG_AUTH_FAILURE','platform','../hubAllocationMethods','push','setupBrowserstackLocal','4.5.0','stopLocalBinary','localOptions','isTrue','setCLICaps','Data\x20sent\x20successfully\x20to\x20','percy','./utilities','proxyUrl','selenium-webdriver','TCG_AUTH_TIMEOUT','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','UsAUE','version','vhCid','writeFileSync','uncaughtException','join','ZfEfp','killSignal','TCG_URL','handleExceptions','xrnqE','osXMa','isHealingEnabled','2489150EuFMfA','FRAMEWORK','GzXPz','constructor','beforeExit','zHMUu','false','BrowserstackHealingInitFailed','Percy\x20stopped','123QugyQb','isTrialGrid','end','localIdentifier','35mAgZsK','userName','AI_INIT_FAILURE','hubUrl','accessKey','RSjyN','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','split'];a90_0x3591=function(){return _0x493eec;};return a90_0x3591();}(function(_0x4c3896,_0x5e7c47){const _0x2033a7=a90_0x3c50,_0x253217=_0x4c3896();while(!![]){try{const _0x31e1cf=parseInt(_0x2033a7(0x1e2))/0x1*(parseInt(_0x2033a7(0x1b9))/0x2)+-parseInt(_0x2033a7(0x16a))/0x3*(parseInt(_0x2033a7(0x1ad))/0x4)+-parseInt(_0x2033a7(0x25a))/0x5+-parseInt(_0x2033a7(0x1f5))/0x6*(parseInt(_0x2033a7(0x16e))/0x7)+parseInt(_0x2033a7(0x202))/0x8+-parseInt(_0x2033a7(0x180))/0x9+parseInt(_0x2033a7(0x234))/0xa;if(_0x31e1cf===_0x5e7c47)break;else _0x253217['push'](_0x253217['shift']());}catch(_0x4d76aa){_0x253217['push'](_0x253217['shift']());}}}(a90_0x3591,0xabc66));const util=require('util'),os=require('os'),path=require(a90_0x2809fd(0x1d2)),{v4:uuidv4}=require('uuid'),fs=require('fs'),constants=require(a90_0x2809fd(0x21b)),logger=require('./logger')[a90_0x2809fd(0x1b2)],fileLogger=require('./logger')[a90_0x2809fd(0x1ec)],{getLogDir}=require('./logger'),helper=require('./helper'),utilities=require(a90_0x2809fd(0x248)),percyHelper=require(a90_0x2809fd(0x1d1)),hubAllocator=require(a90_0x2809fd(0x23e)),PerformanceTester=require(a90_0x2809fd(0x1f8)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require('./performance/constants'),{setPercyFlag}=require(a90_0x2809fd(0x18b)),TestHubHandler=require(a90_0x2809fd(0x20d)),timeoutPromise=require(a90_0x2809fd(0x21c)),BrowserstackCLI=require(a90_0x2809fd(0x20b)),{getEdsInstrumentationAPIUrl}=require(a90_0x2809fd(0x199));class BrowserStackSetup{constructor(_0x4cf5fc,_0x1db4b9){const _0x120c78=a90_0x2809fd,_0x2cc325={'BgSHK':_0x120c78(0x196),'yMIhN':_0x120c78(0x1f3),'nqlbr':function(_0x428233){return _0x428233();}},_0xcd6bf9=_0x2cc325['BgSHK'][_0x120c78(0x175)]('|');let _0x5e2946=0x0;while(!![]){switch(_0xcd6bf9[_0x5e2946++]){case'0':this[_0x120c78(0x1a3)]['testContextOptions'][_0x120c78(0x1a0)]=!helper[_0x120c78(0x1fa)]()||helper[_0x120c78(0x244)](this[_0x120c78(0x1a3)]['testContextOptions'][_0x120c78(0x1a0)]);continue;case'1':helper[_0x120c78(0x17f)](this[_0x120c78(0x1a3)]);continue;case'2':this[_0x120c78(0x247)]=null;continue;case'3':this[_0x120c78(0x1a3)][_0x120c78(0x1d5)][_0x120c78(0x17c)]=!helper['isBrowserstackInfra']()||helper[_0x120c78(0x244)](this[_0x120c78(0x1a3)][_0x120c78(0x1d5)][_0x120c78(0x17c)]);continue;case'4':helper['setCredentialsFromYmlConfig'](this[_0x120c78(0x1a3)]);continue;case'5':this[_0x120c78(0x1a5)]={};continue;case'6':helper[_0x120c78(0x193)](this['config'],this[_0x120c78(0x1ab)]);continue;case'7':this[_0x120c78(0x210)]=helper[_0x120c78(0x1ea)]();continue;case'8':this[_0x120c78(0x1c4)]=null;continue;case'9':global['framework']=_0x1db4b9;continue;case'10':helper[_0x120c78(0x1c9)]();continue;case'11':this['config'][_0x120c78(0x1d5)]=this['config']['testContextOptions']||{};continue;case'12':if(helper[_0x120c78(0x176)](this[_0x120c78(0x1a3)]))throw new Error(_0x2cc325['yMIhN']);continue;case'13':this[_0x120c78(0x1a3)]=helper[_0x120c78(0x183)](helper[_0x120c78(0x225)](_0x4cf5fc));continue;case'14':helper[_0x120c78(0x216)](this[_0x120c78(0x1a3)],this['cliConfig'],this[_0x120c78(0x210)]);continue;case'15':PerformanceTester['startMonitoring']();continue;case'16':this['sdkRunId']=_0x2cc325[_0x120c78(0x1f9)](uuidv4);continue;case'17':if(this['config'][_0x120c78(0x215)])throw new Error(this[_0x120c78(0x1a3)][_0x120c78(0x215)]);continue;case'18':this[_0x120c78(0x1ac)]=[];continue;case'19':helper[_0x120c78(0x1e8)](this[_0x120c78(0x1a3)],this[_0x120c78(0x1ab)],this[_0x120c78(0x210)]);continue;case'20':this[_0x120c78(0x22d)]=_0x1db4b9;continue;case'21':this[_0x120c78(0x1a3)][_0x120c78(0x1ca)]=this[_0x120c78(0x1a3)]['platforms']||[];continue;case'22':this[_0x120c78(0x1ab)]=helper[_0x120c78(0x245)](_0x4cf5fc);continue;}break;}}[a90_0x2809fd(0x1a8)](_0x2a4f24){const _0x166708=a90_0x2809fd,_0xca429e={'GzXPz':'userName\x20or\x20accessKey\x20is\x20not\x20defined','HGOnQ':function(_0x5d4d51,_0x14ea4d){return _0x5d4d51===_0x14ea4d;},'zHMUu':function(_0x4d379a,_0x1206cc){return _0x4d379a===_0x1206cc;},'fGMPc':_0x166708(0x1d9),'tNCKf':'SDKTestAttempted','QyGHT':function(_0x5258d6,_0x293441){return _0x5258d6<_0x293441;},'UsAUE':function(_0x4cdca1,_0x414fd3){return _0x4cdca1(_0x414fd3);},'ZyFGW':_0x166708(0x24a),'xTswW':function(_0x7771ac,_0x176b41){return _0x7771ac===_0x176b41;},'COkbU':_0x166708(0x241),'JrGPm':_0x166708(0x1bf),'kbBVQ':'parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','xrnqE':'SIGTERM','KnyKT':_0x166708(0x185),'AgcNU':'SIGHUP','nMPNt':function(_0x4072cd,_0x261aa1){return _0x4072cd!==_0x261aa1;},'yoNcx':_0x166708(0x177),'xVHyG':_0x166708(0x1e6),'CkMCP':_0x166708(0x223),'FMPPU':'SIGBREAK','BtjDN':_0x166708(0x25e)},_0x298171=this[_0x166708(0x22d)];global[_0x166708(0x1a3)]=this[_0x166708(0x1a3)],helper[_0x166708(0x1c8)](this['config']),this[_0x166708(0x254)]=null,global['sdkRunId']=this[_0x166708(0x1f0)],logger['info']('SDK\x20run\x20started\x20with\x20id:\x20'+this[_0x166708(0x1f0)]),!this[_0x166708(0x1a3)]['browserStackLocalOptions']&&(this[_0x166708(0x1a3)][_0x166708(0x19e)]=this[_0x166708(0x1a3)][_0x166708(0x243)]||{});if(helper[_0x166708(0x176)](helper['getUserName'](this['config']))||helper[_0x166708(0x176)](helper['getAccessKey'](this[_0x166708(0x1a3)])))throw new Error(_0xca429e[_0x166708(0x25c)]);helper[_0x166708(0x1e3)](this[_0x166708(0x1a3)])&&helper[_0x166708(0x176)](helper[_0x166708(0x20e)](this[_0x166708(0x1a3)]))&&(!helper[_0x166708(0x176)](this[_0x166708(0x1a3)]['browserStackLocalOptions'])&&_0xca429e[_0x166708(0x1a7)](this['config']['browserStackLocalOptions'][_0x166708(0x25d)],Object)?!helper['isTrue'](this[_0x166708(0x1a3)][_0x166708(0x19e)][_0x166708(0x228)])&&(this[_0x166708(0x1a3)][_0x166708(0x19e)][_0x166708(0x16d)]=helper[_0x166708(0x1bb)]()):this['config'][_0x166708(0x19e)]={'localIdentifier':helper[_0x166708(0x1bb)]()});this[_0x166708(0x1a3)][_0x166708(0x19e)][_0x166708(0x228)]=helper[_0x166708(0x244)](this[_0x166708(0x1a3)][_0x166708(0x19e)]['skipBinaryInitialisation']),helper[_0x166708(0x22a)](this[_0x166708(0x1a3)]);if(_0xca429e[_0x166708(0x25f)](_0x298171,_0xca429e[_0x166708(0x1e4)]))return;this[_0x166708(0x256)]();process[_0x166708(0x1ba)][_0x166708(0x1cf)]&&(this[_0x166708(0x1a3)][_0x166708(0x1a1)]=helper[_0x166708(0x244)](process[_0x166708(0x1ba)][_0x166708(0x1cf)]),this['config'][_0x166708(0x19b)]=this[_0x166708(0x1a3)][_0x166708(0x19b)]||{});helper[_0x166708(0x1cb)](this[_0x166708(0x1a3)])&&(process['env'][_0x166708(0x1cf)]=!![]);if(!helper[_0x166708(0x1fa)]()){try{process[_0x166708(0x1ba)][_0x166708(0x25b)]=_0x298171,utilities[_0x166708(0x20a)](_0xca429e['tNCKf'],{},this[_0x166708(0x1a3)],this['framework']);}catch(_0xfecc12){logger[_0x166708(0x1cc)](_0x166708(0x1b4)+_0xfecc12);}return;}if(helper['requireSeleniumWebdriverCheck'](_0x298171)){if(global[_0x166708(0x1f1)])return;_0xca429e[_0x166708(0x220)](_0xca429e[_0x166708(0x24d)](parseInt,helper[_0x166708(0x203)](_0xca429e[_0x166708(0x1c1)])),0x3)&&(this['config'][_0x166708(0x1da)]=![]),_0xca429e[_0x166708(0x182)](helper[_0x166708(0x1dd)](helper[_0x166708(0x203)](_0xca429e[_0x166708(0x1c1)]),_0xca429e['COkbU']),0x1)&&(this['config'][_0x166708(0x1da)]=!![]);}(helper[_0x166708(0x176)](this[_0x166708(0x1a3)][_0x166708(0x1ca)])||helper[_0x166708(0x176)](this[_0x166708(0x1a3)][_0x166708(0x1ca)][_0x166708(0x1f2)]))&&(helper[_0x166708(0x176)](this[_0x166708(0x1a3)][_0x166708(0x239)])?logger[_0x166708(0x17e)](_0xca429e['JrGPm']):logger[_0x166708(0x23a)](_0xca429e['kbBVQ']),this['config'][_0x166708(0x1ca)]=[]);!this['config']['testContextOptions']&&(this[_0x166708(0x1a3)][_0x166708(0x1d5)]={});try{process[_0x166708(0x1ba)]['FRAMEWORK']=_0x2a4f24['_'][0x0],utilities[_0x166708(0x20a)](_0xca429e[_0x166708(0x1b3)],{},this[_0x166708(0x1a3)],this['framework']);}catch(_0xeb8ea7){logger[_0x166708(0x1cc)](_0x166708(0x1b4)+_0xeb8ea7);}!this[_0x166708(0x1a3)]['disableAutoCaptureLogs']&&logger[_0x166708(0x17e)](constants[_0x166708(0x1af)]),this[_0x166708(0x20f)]=this[_0x166708(0x20f)][_0x166708(0x1de)](this),process['on'](_0xca429e[_0x166708(0x257)],this[_0x166708(0x20f)]),process['on'](_0xca429e[_0x166708(0x1c7)],this[_0x166708(0x20f)]),process['on'](_0xca429e[_0x166708(0x1dc)],this[_0x166708(0x20f)]),_0xca429e[_0x166708(0x1bd)](process['platform'],_0xca429e[_0x166708(0x17b)])?(process['on'](_0xca429e[_0x166708(0x235)],this[_0x166708(0x20f)]),process['on'](_0xca429e[_0x166708(0x232)],this['intExitHandler'])):process['on'](_0xca429e['FMPPU'],this['intExitHandler']),process['on'](_0xca429e['BtjDN'],this[_0x166708(0x214)]());}async[a90_0x2809fd(0x21e)](_0x456438){const _0x556c30=a90_0x2809fd,_0x3fdb23={'LytQD':'ats-repeater','mZaNv':_0x556c30(0x184),'lWPYb':_0x556c30(0x1b7),'HUXua':function(_0x1f4f55,_0x1f1f33){return _0x1f4f55===_0x1f1f33;},'HZnqO':_0x556c30(0x229),'DxEyK':function(_0x1abefa,_0x1b0a99){return _0x1abefa+_0x1b0a99;},'RSjyN':'?caps=','osXMa':function(_0x4348c2,_0x1002fc){return _0x4348c2(_0x1002fc);},'gjjip':_0x556c30(0x1ae)};this[_0x556c30(0x1a8)](_0x456438);if(helper[_0x556c30(0x1cb)](this[_0x556c30(0x1a3)])){const _0x4c0031=await helper[_0x556c30(0x1ed)](this['config']);this[_0x556c30(0x1a3)][_0x556c30(0x1be)]=_0x4c0031,_0x4c0031[_0x556c30(0x16b)]&&helper[_0x556c30(0x219)](this[_0x556c30(0x1a3)][_0x556c30(0x1c4)])&&helper[_0x556c30(0x244)](this[_0x556c30(0x1a3)]['browserstackLocal'])&&(this['config'][_0x556c30(0x19e)][_0x556c30(0x16d)]=_0x3fdb23[_0x556c30(0x1e1)],this[_0x556c30(0x1a3)][_0x556c30(0x19e)][_0x3fdb23[_0x556c30(0x192)]]=_0x4c0031['customRepeaters'][_0x556c30(0x252)](','),this[_0x556c30(0x1a3)][_0x556c30(0x19e)][_0x556c30(0x1c2)]=_0x3fdb23[_0x556c30(0x19f)]),this[_0x556c30(0x1a3)][_0x556c30(0x1fc)]=_0x4c0031[_0x556c30(0x1d4)],this[_0x556c30(0x22d)]&&_0x3fdb23['HUXua'](this['framework'][_0x556c30(0x1b5)](),_0x3fdb23[_0x556c30(0x19a)])?this[_0x556c30(0x1a3)][_0x556c30(0x1fc)]=_0x3fdb23[_0x556c30(0x19d)](_0x4c0031[_0x556c30(0x197)],_0x3fdb23[_0x556c30(0x173)]):constants[_0x556c30(0x171)]=helper[_0x556c30(0x230)](this[_0x556c30(0x1a3)]),logger['debug']('HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20'+constants[_0x556c30(0x171)]);}helper[_0x556c30(0x198)](this[_0x556c30(0x1a3)]),this[_0x556c30(0x222)](),_0x3fdb23[_0x556c30(0x258)](setPercyFlag,this),await this['setupBrowserstackLocal'](),![_0x3fdb23['gjjip'],_0x3fdb23['HZnqO']]['includes'](this[_0x556c30(0x22d)])&&!helper['isTurboScaleSession'](this[_0x556c30(0x1a3)])&&!helper[_0x556c30(0x21d)]()[_0x556c30(0x1d3)]&&await this[_0x556c30(0x1f4)]();}async[a90_0x2809fd(0x187)](){const _0x5a5505=a90_0x2809fd,_0x3ac118={};_0x3ac118[_0x5a5505(0x1f6)]=function(_0x34a887,_0x53508e){return _0x34a887===_0x53508e;},_0x3ac118[_0x5a5505(0x1e5)]=_0x5a5505(0x260),_0x3ac118['PdQjN']=_0x5a5505(0x1a4),_0x3ac118[_0x5a5505(0x253)]=_0x5a5505(0x22f),_0x3ac118[_0x5a5505(0x190)]=_0x5a5505(0x1b7),_0x3ac118[_0x5a5505(0x1d8)]=_0x5a5505(0x25e);const _0xaa0342=_0x3ac118;if(helper[_0x5a5505(0x244)](this[_0x5a5505(0x1a3)][_0x5a5505(0x247)])&&(!this['percy']||!this[_0x5a5505(0x247)][_0x5a5505(0x22c)]()))try{this[_0x5a5505(0x247)]=await percyHelper['startPercy'](this[_0x5a5505(0x1a3)]);if(!this[_0x5a5505(0x247)]){process['env'][_0x5a5505(0x1a6)]=_0xaa0342[_0x5a5505(0x1e5)];throw new Error(_0xaa0342[_0x5a5505(0x178)]);}logger[_0x5a5505(0x17e)](_0xaa0342['ZfEfp']),process['env'][_0x5a5505(0x1a6)]=_0xaa0342[_0x5a5505(0x190)];let _0x2187ac=0x0;const _0x1ac692=async()=>{const _0x29e7cf=_0x5a5505;_0x2187ac++,_0xaa0342[_0x29e7cf(0x1f6)](_0x2187ac,0x1)&&await this[_0x29e7cf(0x1e7)]();};process['on'](_0xaa0342[_0x5a5505(0x1d8)],_0x1ac692);}catch(_0x38c870){process[_0x5a5505(0x1ba)][_0x5a5505(0x1a6)]=_0xaa0342['CXiwA'],logger['debug'](_0x5a5505(0x21a)+_0x38c870);throw new Error(_0x38c870['toString']());}}async[a90_0x2809fd(0x1e7)](){const _0x23bd80=a90_0x2809fd,_0x4202c9={};_0x4202c9['ngSDj']=_0x23bd80(0x169),_0x4202c9[_0x23bd80(0x212)]='Error\x20occured\x20while\x20stopping\x20percy';const _0x3c0c48=_0x4202c9;if(this[_0x23bd80(0x247)]&&this[_0x23bd80(0x247)][_0x23bd80(0x22c)]())try{await percyHelper[_0x23bd80(0x1e7)](this['percy']),logger[_0x23bd80(0x17e)](_0x3c0c48['ngSDj']);}catch(_0x3819dd){logger[_0x23bd80(0x215)](_0x3c0c48['RtRnA'],_0x3819dd['message']);}}async[a90_0x2809fd(0x240)](){const _0x25344a=a90_0x2809fd,_0x245e58={};_0x245e58[_0x25344a(0x1ce)]='Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled',_0x245e58[_0x25344a(0x1ef)]=_0x25344a(0x191);const _0x49a682=_0x245e58;if(helper['isBrowserstackInfra']()&&helper[_0x25344a(0x244)](this['config'][_0x25344a(0x1c4)])&&(!this['browserstackLocal']||!this[_0x25344a(0x1c4)][_0x25344a(0x22c)]()))try{if(this[_0x25344a(0x1a3)][_0x25344a(0x19e)][_0x25344a(0x228)]){logger[_0x25344a(0x1cc)](_0x49a682[_0x25344a(0x1ce)]);return;}this[_0x25344a(0x1c4)]=await helper['startLocalBinary'](this['config']),logger[_0x25344a(0x17e)](_0x49a682['NNTPq']);}catch(_0x21713d){logger['debug'](_0x21713d);throw new Error(_0x21713d[_0x25344a(0x195)]());}}async[a90_0x2809fd(0x231)](){const _0x12d9c4=a90_0x2809fd,_0x48e6dd={};_0x48e6dd['XIwij']=_0x12d9c4(0x1f7),_0x48e6dd['joSzW']=_0x12d9c4(0x1d6);const _0x159a02=_0x48e6dd;if(this[_0x12d9c4(0x1c4)]&&this[_0x12d9c4(0x1c4)]['isRunning']())try{await helper[_0x12d9c4(0x242)](this[_0x12d9c4(0x1c4)]),logger[_0x12d9c4(0x17e)](_0x159a02[_0x12d9c4(0x18e)]);}catch(_0x1e3b22){logger[_0x12d9c4(0x215)](_0x159a02['joSzW'],_0x1e3b22[_0x12d9c4(0x221)]);}}async[a90_0x2809fd(0x1f4)](){const _0x3bba36=a90_0x2809fd;return PerformanceTester[_0x3bba36(0x1c0)](PerformanceAutEvents[_0x3bba36(0x204)],async()=>{const _0x5e60ad=_0x3bba36;await hubAllocator[_0x5e60ad(0x1a9)](this['config']);})();}async[a90_0x2809fd(0x20c)](){const _0x423b4e=a90_0x2809fd,_0x4ee4c7={'wERJu':function(_0x4aa197,_0xf0e893){return _0x4aa197(_0xf0e893);},'QCsfR':_0x423b4e(0x22b),'WibcX':function(_0x91c1a7,_0x34ce67,_0x273b30,_0x4b3b27,_0xdd7e08,_0x169c9c,_0x1b4d01){return _0x91c1a7(_0x34ce67,_0x273b30,_0x4b3b27,_0xdd7e08,_0x169c9c,_0x1b4d01);},'vhCid':'BrowserstackHealing.init\x20method\x20timed\x20out','wurcQ':_0x423b4e(0x261),'IROEK':_0x423b4e(0x18a),'eqojg':_0x423b4e(0x1ff),'zEtoR':function(_0xffce18,_0x56f5b4){return _0xffce18(_0x56f5b4);},'UpAWw':function(_0x15a953,_0x35d5dc){return _0x15a953===_0x35d5dc;},'JTLsI':_0x423b4e(0x1b7),'xPTuZ':function(_0x455a72,_0x4ef795){return _0x455a72===_0x4ef795;},'pFMWE':_0x423b4e(0x24c),'Habya':'Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','hKPiv':'Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','vocAY':'Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','vZtcE':function(_0x3b204f,_0x595ed5){return _0x3b204f>=_0x595ed5;},'VeUct':function(_0x391867,_0x5a43df){return _0x391867<_0x5a43df;},'vLJVY':_0x423b4e(0x206),'iDPdf':_0x423b4e(0x1db),'YXLWB':function(_0x445ba0){return _0x445ba0();}},_0x448f6f=PerformanceTester[_0x423b4e(0x1c0)](_0x4ee4c7['iDPdf'],async()=>{const _0x26c3d1=_0x423b4e;try{const _0x47888c=new Date(),_0x556dd0=helper[_0x26c3d1(0x236)](this[_0x26c3d1(0x1a3)]),_0x52ab8a=_0x4ee4c7['wERJu'](require,path[_0x26c3d1(0x252)](__dirname,_0x4ee4c7['QCsfR'])),_0x20030a=_0x4ee4c7[_0x26c3d1(0x1d7)](timeoutPromise,constants[_0x26c3d1(0x24b)],_0x4ee4c7[_0x26c3d1(0x24f)],_0x4ee4c7[_0x26c3d1(0x226)],_0x47888c,this['config'],this[_0x26c3d1(0x22d)]),_0x58574c={'tcgUrl':constants[_0x26c3d1(0x255)],'sdkVersion':_0x4ee4c7[_0x26c3d1(0x209)](require,_0x4ee4c7[_0x26c3d1(0x1ee)])['version'],'methodUsed':_0x4ee4c7['eqojg'],'proxyConfig':_0x556dd0,'os':os[_0x26c3d1(0x23d)]()};if(_0x556dd0&&_0x556dd0[_0x26c3d1(0x249)]){utilities['fireFunnelTestEvent'](constants[_0x26c3d1(0x1bc)],_0x58574c,this[_0x26c3d1(0x1a3)],this['framework']);return;}const _0x131ed7={};_0x131ed7['proxy']=_0x556dd0;const _0xea41fb=await Promise[_0x26c3d1(0x1c5)]([_0x52ab8a['init'](this[_0x26c3d1(0x1a3)][_0x26c3d1(0x172)],this[_0x26c3d1(0x1a3)][_0x26c3d1(0x16f)],constants[_0x26c3d1(0x255)],_0x4ee4c7[_0x26c3d1(0x1a2)](require,_0x4ee4c7[_0x26c3d1(0x1ee)])[_0x26c3d1(0x24e)],_0x131ed7)['then'](_0x654856=>{return _0x20030a['cancel'](),_0x654856;}),_0x20030a]);_0xea41fb[_0x26c3d1(0x259)]=_0x4ee4c7['UpAWw'](_0xea41fb[_0x26c3d1(0x259)],_0x4ee4c7[_0x26c3d1(0x238)])||_0x4ee4c7['xPTuZ'](_0xea41fb[_0x26c3d1(0x259)],!![]);const _0x5a077c=_0x4ee4c7['UpAWw'](this['config'][_0x26c3d1(0x1c6)],!![])||_0x4ee4c7[_0x26c3d1(0x211)](this['config'][_0x26c3d1(0x1c6)],_0x4ee4c7[_0x26c3d1(0x238)]);if(_0x4ee4c7[_0x26c3d1(0x211)](_0xea41fb[_0x26c3d1(0x221)],constants['UPGRADE_REQUIRED'])&&_0x5a077c)logger[_0x26c3d1(0x17e)](_0x4ee4c7['pFMWE']);else{if(!_0xea41fb[_0x26c3d1(0x1c3)]&&_0x4ee4c7[_0x26c3d1(0x201)](_0xea41fb['status'],0x1f7)&&_0x5a077c)logger['info'](_0x4ee4c7[_0x26c3d1(0x1eb)]),utilities[_0x26c3d1(0x20a)](constants[_0x26c3d1(0x1fe)],_0x58574c,this[_0x26c3d1(0x1a3)],this[_0x26c3d1(0x22d)]);else{if(!_0xea41fb[_0x26c3d1(0x1c3)]&&_0x5a077c){logger[_0x26c3d1(0x17e)](_0x4ee4c7[_0x26c3d1(0x1fd)]);const _0x451b25={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x4ee4c7[_0x26c3d1(0x209)](require,_0x4ee4c7['IROEK'])[_0x26c3d1(0x24e)],'methodUsed':_0x4ee4c7['eqojg'],'proxyConfig':_0x556dd0,'os':os['platform']()};utilities['fireFunnelTestEvent'](constants[_0x26c3d1(0x23c)],_0x451b25,this[_0x26c3d1(0x1a3)],this['framework']);}else{if(_0xea41fb[_0x26c3d1(0x1c3)]&&!_0xea41fb[_0x26c3d1(0x259)]&&_0x5a077c)logger[_0x26c3d1(0x17e)](_0x4ee4c7[_0x26c3d1(0x205)]);else{if(_0x4ee4c7[_0x26c3d1(0x1d0)](_0xea41fb[_0x26c3d1(0x1b8)],0xc8)&&_0x4ee4c7['VeUct'](_0xea41fb[_0x26c3d1(0x1b8)],0x12c))utilities[_0x26c3d1(0x20a)](constants[_0x26c3d1(0x18d)],_0x58574c,this[_0x26c3d1(0x1a3)],this[_0x26c3d1(0x22d)]);else{if(_0x4ee4c7[_0x26c3d1(0x1d0)](_0xea41fb[_0x26c3d1(0x1b8)],0x190))_0x58574c[_0x26c3d1(0x1b8)]=_0xea41fb[_0x26c3d1(0x1b8)],utilities[_0x26c3d1(0x20a)](constants[_0x26c3d1(0x170)],_0x58574c,this['config'],this[_0x26c3d1(0x22d)]);else!_0xea41fb['status']&&utilities[_0x26c3d1(0x20a)](constants['INVALID_INIT_RESP_WITH_USER_IMPACT'],_0x58574c,this[_0x26c3d1(0x1a3)],this['framework']);}}}}}if(_0xea41fb[_0x26c3d1(0x1c3)]&&_0xea41fb['isHealingEnabled']){const _0x3a5cdd={};_0x3a5cdd[_0x26c3d1(0x1e0)]=_0xea41fb;const _0x29a7d6=_0x3a5cdd;_0x556dd0&&(_0x29a7d6[_0x26c3d1(0x18f)]=_0x556dd0),_0x29a7d6['framework']=this[_0x26c3d1(0x22d)],_0x29a7d6['bstackConfig']=this[_0x26c3d1(0x1a3)],helper['setupTcgConfigFile'](_0x29a7d6),logger[_0x26c3d1(0x1cc)](_0x4ee4c7[_0x26c3d1(0x213)]);}}catch(_0x2a11a0){logger[_0x26c3d1(0x1cc)](_0x26c3d1(0x174)+(_0x2a11a0[_0x26c3d1(0x221)]?_0x2a11a0[_0x26c3d1(0x221)]:''));}});await _0x4ee4c7[_0x423b4e(0x21f)](_0x448f6f);}['setupKeepAlive'](){const _0x430745=a90_0x2809fd,_0x366774={'RfRBu':function(_0x289a4b,_0xa8e034){return _0x289a4b(_0xa8e034);},'LqkZV':_0x430745(0x1aa)};_0x366774[_0x430745(0x224)](require,_0x366774[_0x430745(0x237)])();}['handleExceptions'](){const _0x15b3be=a90_0x2809fd,_0x4293ae={};_0x4293ae[_0x15b3be(0x181)]=_0x15b3be(0x179),_0x4293ae[_0x15b3be(0x207)]=_0x15b3be(0x251);const _0x9f2d25=_0x4293ae,_0xc1ad1=_0x201246=>{const _0x455f09=_0x15b3be;logger['error'](_0x201246[_0x455f09(0x221)]),logger[_0x455f09(0x1cc)](util[_0x455f09(0x1b1)](_0x201246)),this[_0x455f09(0x1ac)][_0x455f09(0x23f)](util[_0x455f09(0x1b1)]('%j',_0x201246)),PerformanceTester[_0x455f09(0x17a)](_0x201246);};process['on'](_0x9f2d25[_0x15b3be(0x181)],_0xc1ad1),process['on'](_0x9f2d25['xZTbN'],_0xc1ad1);}async[a90_0x2809fd(0x20f)](_0x1afb6a){const _0x4b5aaf=a90_0x2809fd,_0x2d66c8={};_0x2d66c8['zfkGZ']=_0x4b5aaf(0x200),_0x2d66c8[_0x4b5aaf(0x19c)]=function(_0x2b6b7b,_0x580923){return _0x2b6b7b+_0x580923;},_0x2d66c8['sQKHO']='handled',_0x2d66c8[_0x4b5aaf(0x186)]=function(_0x12ba03,_0x1c84c2){return _0x12ba03+_0x1c84c2;},_0x2d66c8[_0x4b5aaf(0x1b6)]=_0x4b5aaf(0x188);const _0x50fa4d=_0x2d66c8,_0x10c322=_0x50fa4d['zfkGZ'][_0x4b5aaf(0x175)]('|');let _0x43d93a=0x0;while(!![]){switch(_0x10c322[_0x43d93a++]){case'0':if(this[_0x50fa4d[_0x4b5aaf(0x19c)](_0x50fa4d['sQKHO'],_0x1afb6a)])return;continue;case'1':await BrowserstackCLI[_0x4b5aaf(0x17d)]()[_0x4b5aaf(0x23b)]();continue;case'2':logger['info'](_0x50fa4d[_0x4b5aaf(0x186)](_0x50fa4d[_0x4b5aaf(0x1b6)],_0x1afb6a));continue;case'3':await TestHubHandler[_0x4b5aaf(0x23b)](_0x1afb6a);continue;case'4':this['killSignal']=_0x1afb6a;continue;case'5':this[_0x50fa4d[_0x4b5aaf(0x186)](_0x50fa4d['sQKHO'],_0x1afb6a)]=!![];continue;}break;}}[a90_0x2809fd(0x214)](){const _0x2c5891={'veZJG':function(_0x2280ce,_0x178f0b){return _0x2280ce===_0x178f0b;},'WVlhL':'Calling\x20Build\x20Stop\x20from\x20ExitHandler','YOjjv':function(_0x538690,_0x46088e){return _0x538690>_0x46088e;},'IGneA':function(_0x56f585,_0x552fd0){return _0x56f585(_0x552fd0);},'nToKr':function(_0x530c38,_0x4b4f35){return _0x530c38(_0x4b4f35);},'VGfKh':function(_0x30362e){return _0x30362e();},'fdbkQ':'events.json'};let _0x81ac31=0x0;return async()=>{const _0x16f029=a90_0x3c50;_0x81ac31++;if(_0x2c5891[_0x16f029(0x227)](_0x81ac31,0x1)){helper[_0x16f029(0x208)](this[_0x16f029(0x22d)])&&await this['stopBrowserstackLocal']();try{logger['debug'](_0x2c5891[_0x16f029(0x189)]),await TestHubHandler[_0x16f029(0x23b)](_0x81ac31),await BrowserstackCLI[_0x16f029(0x17d)]()[_0x16f029(0x23b)]('1');}catch(_0x24ea10){logger[_0x16f029(0x1cc)]('Error\x20in\x20sending\x20testhub\x20stop:\x20'+util[_0x16f029(0x1b1)](_0x24ea10));}PerformanceTester[_0x16f029(0x16c)](PerformanceEvents[_0x16f029(0x1e9)]);if(PerformanceTester[_0x16f029(0x217)]()){const {measures:_0x979949,errors:_0x5bc452}=await PerformanceTester['finalize'](),_0x5cd39d={};if(_0x979949&&_0x2c5891[_0x16f029(0x18c)](_0x979949[_0x16f029(0x1f2)],0x0)||_0x5bc452&&_0x2c5891['YOjjv'](_0x5bc452[_0x16f029(0x1f2)],0x0)){const _0x1b41bb={};_0x1b41bb['measures']=_0x979949,_0x1b41bb['exceptions']=_0x5bc452,Object['assign'](_0x5cd39d,_0x1b41bb);}try{const _0x15167c=await helper[_0x16f029(0x194)](_0x5cd39d,this['config']);logger[_0x16f029(0x1cc)](_0x16f029(0x246)+_0x2c5891[_0x16f029(0x22e)](getEdsInstrumentationAPIUrl,'')+_0x16f029(0x1fb)+_0x15167c['statusCode']);}catch(_0xeba4c){logger['debug']('Failed\x20to\x20send\x20data\x20to\x20'+_0x2c5891[_0x16f029(0x233)](getEdsInstrumentationAPIUrl,'')+'\x20with\x20error\x20'+util[_0x16f029(0x1b1)](_0xeba4c));}try{fs[_0x16f029(0x250)](path['join'](_0x2c5891[_0x16f029(0x1df)](getLogDir),_0x2c5891['fdbkQ']),JSON[_0x16f029(0x218)](_0x5cd39d));}catch(_0x20e332){logger[_0x16f029(0x1cc)](_0x16f029(0x1b0)+_0x20e332);}}}logger&&logger[_0x16f029(0x1cd)](),fileLogger&&fileLogger['close']();};}}function a90_0x3c50(_0x2a7356,_0x380f85){const _0x3591c8=a90_0x3591();return a90_0x3c50=function(_0x3c50e0,_0x35ce27){_0x3c50e0=_0x3c50e0-0x169;let _0x167711=_0x3591c8[_0x3c50e0];return _0x167711;},a90_0x3c50(_0x2a7356,_0x380f85);}exports['default']=BrowserStackSetup;