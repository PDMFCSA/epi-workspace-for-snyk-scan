const a55_0x738529=a55_0x1123;(function(_0x1157cd,_0x28ebc0){const _0xd59174=a55_0x1123,_0x292a32=_0x1157cd();while(!![]){try{const _0x5e8c25=parseInt(_0xd59174(0x108))/0x1*(parseInt(_0xd59174(0x164))/0x2)+parseInt(_0xd59174(0xf4))/0x3*(-parseInt(_0xd59174(0xf6))/0x4)+-parseInt(_0xd59174(0x8d))/0x5*(-parseInt(_0xd59174(0x123))/0x6)+-parseInt(_0xd59174(0x79))/0x7+parseInt(_0xd59174(0xdd))/0x8*(parseInt(_0xd59174(0xb5))/0x9)+parseInt(_0xd59174(0x69))/0xa+parseInt(_0xd59174(0x153))/0xb*(-parseInt(_0xd59174(0x98))/0xc);if(_0x5e8c25===_0x28ebc0)break;else _0x292a32['push'](_0x292a32['shift']());}catch(_0x3e0052){_0x292a32['push'](_0x292a32['shift']());}}}(a55_0x264f,0xc05d0));const util=require(a55_0x738529(0x16d)),os=require('os'),path=require(a55_0x738529(0x13b)),{v4:uuidv4}=require(a55_0x738529(0xdb)),fs=require('fs'),constants=require('../bin/utils/constants'),{isTurboScaleSession}=require(a55_0x738529(0x113)),logger=require(a55_0x738529(0xb7))[a55_0x738529(0x136)],{getLogDir}=require(a55_0x738529(0xb7)),helper=require('./helper'),utilities=require(a55_0x738529(0x103)),percyHelper=require(a55_0x738529(0xae)),hubAllocator=require(a55_0x738529(0x165)),PerformanceTester=require(a55_0x738529(0x97)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a55_0x738529(0xa4)),{setPercyFlag}=require('./testhub/utils'),TestHubHandler=require('./testhub/testhubHandler'),timeoutPromise=require(a55_0x738529(0x6a));function a55_0x264f(){const _0xc57dcb=['init','isHealingEnabled','WLrdR','./percy/utils','browserStackLocalOptions','version','measures','BROWSERSTACK_TURBOSCALE','BvqYw','tNKSk','230211lkddGs','sendToEDS','./logger','getProxyConfigForTcg','oiYKh','isAuthenticated','AI_INIT_FAILURE','TCG_AUTH_FAILURE','cancel','setLogLevel','getConfigPath','../ai-sdk-node/bundle','XSfvv','INVALID_INIT_RESP_WITH_USER_IMPACT','getFinalCaps','TunDd','captureError','BROWSERSTACK_PERCY','\x20with\x20error\x20','TYwHU','BtwSe','userName','getPackageVersion','HZkcf','playwrightUrl','getTurboScaleGridDetails','JzlHr','bPuSd','TCG_DOWN','Error\x20occured\x20while\x20stopping\x20percy','SIGABRT','setEnvCaps','getCentralUser','events.json','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','\x20with\x20response\x20','proxyConfig','XssJH','uuid','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','56tgtUnE','message','UPGRADE_REQUIRED','length','XLAeg','Local\x20binary\x20started\x20successfully','Hslwf','customRepeaters','hubUrl','localIdentifier','Failed\x20to\x20send\x20data\x20to\x20','CQQxA','skipBinaryInitialisation','isRunning','yqpQy','hCyaT','platforms','central_scanner','KnEfM','ats-repeater','alRMv','SDK_CLEANUP','accessKey','402nBWXbC','kTwYL','16228XYSjvy','wqgsR','killSignal','CNNlM','CAohC','platform','unhandledRejection','VqHmc','aiHeal:tcgAuth','env','uncaughtException','pKRCa','AI_PROXY_FAILURE','./utilities','?caps=','measureWrapper','useW3C','getLocalConfig','1QGvUdu','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','Fscqq','zRwiF','stopLocalBinary','unhandledErrors','selenium-webdriver','isNotUndefined','envConfig','race','proxyUrl','./ats/helper','YxTHd','stopPercy','VJGvb','Error\x20in\x20sending\x20testhub\x20stop:\x20','SDKTestAttempted','nvSmZ','setupBrowserstackLocal','SIGBREAK','debug','bxsyW','setLogDir','percy','eUyuB','LQuAd','testContextOptions','1440354yiyUZd','qPKbo','1|17|13|11|14|8|18|9|10|12|19|4|20|15|3|7|0|2|5|6|16','eAeaL','Shutdown\x20triggered\x20by\x20','KkTZU','constructor','gaQjm','initialize','writeFileSync','isBrowserstackInfra','zcZEn','end','allocateHub','browserstackLocal','JBYqe','iJGNI','EDS_URL','setBrowserstackInfraFromConfig','winstonLogger','setUpHubUrl','pJInq','config','No\x20config\x20provided.','path','beforeExit','SDK\x20run\x20started\x20with\x20id:\x20','skipSessionStatus','./setKeepAlive','RMHqm','TevZc','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','stringify','parallelsPerPlatform','push','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','info','integrations','startMonitoring','eUVKY','error','then','handled','prpmJ','isTrue','toString','Data\x20sent\x20successfully\x20to\x20','setupTcgConfigFile','77RWregZ','1|2|4|3|0','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','vvivh','4.5.0','oEtdm','sTeVM','handleExceptions','oHLIY','startLocalBinary','CIoMD','SIGTERM','Qchys','intExitHandler','Calling\x20Build\x20Stop\x20from\x20ExitHandler','KYbcF','SIGHUP','2466842UcAjcz','../hubAllocationMethods','bstackConfig','DkrqM','Error\x20in\x20percy\x20setup\x20','format','Percy\x20started\x20successfully','startPercy','BvilV','util','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','split','7658480WQMizv','./timeoutPromise','AUTOLOGCAPTURE_NOTIFICATION','finalize','FADOB','rdkXo','BrowserstackHealing.init\x20method\x20timed\x20out','FRAMEWORK','ohfgp','url','DVqeA','Error\x20occured\x20while\x20stopping\x20local\x20binary','ZICxG','status','getLocalIdentifier','disableAutoCaptureLogs','264677qcxtvk','setupPercy','turboScaleOptions','generateLocalIdentifier','FdKyq','skipSessionName','fireFunnelTestEvent','readConfig','URimW','forceLocal','wuBft','turboScaleGridDetails','win32','SRBlx','isUndefined','getUserName','framework','join','ljJEL','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','10xIkKkB','JYkfO','exitHandler','BrowserstackHealing.init','Ufjwm','pusJz','errorMessage','getAccessKey','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','fckmZ','./performance/performance-tester','2209836LrKBiT','SIGINT','custom-repeater','CgbDG','bind','zzBpF','setupKeepAlive','true','TCG_AUTH_TIMEOUT','SuhYY','sdkRunId','requireSeleniumWebdriverCheck','./performance/constants','stopBrowserstackLocal','tcgAuthConfig','tcg\x20config\x20setup\x20successful.','false','cliConfig','nXeSO'];a55_0x264f=function(){return _0xc57dcb;};return a55_0x264f();}class BrowserStackSetup{constructor(_0x56fe5e,_0x5e6b80){const _0x3b6bfe=a55_0x738529,_0x408738={'oHLIY':_0x3b6bfe(0x125),'Ufjwm':function(_0x27c263){return _0x27c263();},'KYbcF':_0x3b6bfe(0x13a)},_0x353eb4=_0x408738[_0x3b6bfe(0x15b)]['split']('|');let _0x9a6961=0x0;while(!![]){switch(_0x353eb4[_0x9a6961++]){case'0':this['config']['testContextOptions'][_0x3b6bfe(0x7e)]=!helper[_0x3b6bfe(0x12d)]()||helper[_0x3b6bfe(0x14f)](this[_0x3b6bfe(0x139)][_0x3b6bfe(0x122)][_0x3b6bfe(0x7e)]);continue;case'1':this['unhandledErrors']=[];continue;case'2':helper[_0x3b6bfe(0xc3)](this[_0x3b6bfe(0x139)],this['cliConfig'],this['envConfig']);continue;case'3':helper[_0x3b6bfe(0x135)](this[_0x3b6bfe(0x139)],this['cliConfig']);continue;case'4':global[_0x3b6bfe(0x89)]=_0x5e6b80;continue;case'5':helper[_0x3b6bfe(0x11e)](this[_0x3b6bfe(0x139)]);continue;case'6':helper[_0x3b6bfe(0xbe)](this[_0x3b6bfe(0x139)],this[_0x3b6bfe(0xa9)],this[_0x3b6bfe(0x110)]);continue;case'7':this[_0x3b6bfe(0x139)][_0x3b6bfe(0x122)][_0x3b6bfe(0x13e)]=!helper[_0x3b6bfe(0x12d)]()||helper['isTrue'](this[_0x3b6bfe(0x139)][_0x3b6bfe(0x122)][_0x3b6bfe(0x13e)]);continue;case'8':this[_0x3b6bfe(0x139)]=helper[_0x3b6bfe(0x80)](helper[_0x3b6bfe(0xbf)](_0x56fe5e));continue;case'9':this[_0x3b6bfe(0x139)]['testContextOptions']=this[_0x3b6bfe(0x139)][_0x3b6bfe(0x122)]||{};continue;case'10':this[_0x3b6bfe(0x93)]={};continue;case'11':this[_0x3b6bfe(0x131)]=null;continue;case'12':this[_0x3b6bfe(0xa2)]=_0x408738[_0x3b6bfe(0x91)](uuidv4);continue;case'13':this['envConfig']=helper[_0x3b6bfe(0xd4)]();continue;case'14':this['percy']=null;continue;case'15':if(this['config'][_0x3b6bfe(0x14b)])throw new Error(this[_0x3b6bfe(0x139)]['error']);continue;case'16':PerformanceTester[_0x3b6bfe(0x149)]();continue;case'17':this[_0x3b6bfe(0xa9)]=helper['setCLICaps'](_0x56fe5e);continue;case'18':this['config'][_0x3b6bfe(0xed)]=this['config'][_0x3b6bfe(0xed)]||[];continue;case'19':this[_0x3b6bfe(0x89)]=_0x5e6b80;continue;case'20':if(helper[_0x3b6bfe(0x87)](this[_0x3b6bfe(0x139)]))throw new Error(_0x408738[_0x3b6bfe(0x162)]);continue;}break;}}['preInitialize'](_0x45840d){const _0x5aa783=a55_0x738529,_0x1da470={'wuBft':'userName\x20or\x20accessKey\x20is\x20not\x20defined','WLrdR':function(_0xe02454,_0x4c2297){return _0xe02454===_0x4c2297;},'DVqeA':_0x5aa783(0x148),'zzBpF':_0x5aa783(0x118),'vvivh':function(_0x1952d2,_0x170746){return _0x1952d2<_0x170746;},'CQQxA':function(_0x542d16,_0x28ccb9){return _0x542d16(_0x28ccb9);},'XSfvv':_0x5aa783(0x10e),'DkrqM':function(_0x8bbb23,_0x5bac2f){return _0x8bbb23===_0x5bac2f;},'JBYqe':_0x5aa783(0x157),'oncGt':_0x5aa783(0x16e),'kTwYL':_0x5aa783(0xdc),'TYwHU':_0x5aa783(0x15e),'Fscqq':_0x5aa783(0x99),'SRBlx':_0x5aa783(0x163),'wqgsR':function(_0x5bb991,_0x273bb2){return _0x5bb991!==_0x273bb2;},'KLdmR':_0x5aa783(0x85),'CNNlM':_0x5aa783(0xd3),'pJInq':'SIGQUIT','FADOB':_0x5aa783(0x11b),'VqHmc':_0x5aa783(0x13c)},_0x26414a=this[_0x5aa783(0x89)];global[_0x5aa783(0x139)]=this['config'],helper['sanitizeCaps'](this[_0x5aa783(0x139)]),this[_0x5aa783(0xf8)]=null,global[_0x5aa783(0xa2)]=this[_0x5aa783(0xa2)],logger[_0x5aa783(0x147)](_0x5aa783(0x13d)+this[_0x5aa783(0xa2)]),!this[_0x5aa783(0x139)][_0x5aa783(0xaf)]&&(this[_0x5aa783(0x139)][_0x5aa783(0xaf)]=this[_0x5aa783(0x139)]['localOptions']||{});if(helper[_0x5aa783(0x87)](helper[_0x5aa783(0x88)](this[_0x5aa783(0x139)]))||helper[_0x5aa783(0x87)](helper[_0x5aa783(0x94)](this[_0x5aa783(0x139)])))throw new Error(_0x1da470[_0x5aa783(0x83)]);helper[_0x5aa783(0x107)](this[_0x5aa783(0x139)])&&helper[_0x5aa783(0x87)](helper[_0x5aa783(0x77)](this[_0x5aa783(0x139)]))&&(!helper[_0x5aa783(0x87)](this[_0x5aa783(0x139)]['browserStackLocalOptions'])&&_0x1da470[_0x5aa783(0xad)](this['config'][_0x5aa783(0xaf)][_0x5aa783(0x129)],Object)?!helper[_0x5aa783(0x14f)](this[_0x5aa783(0x139)][_0x5aa783(0xaf)][_0x5aa783(0xe9)])&&(this['config'][_0x5aa783(0xaf)][_0x5aa783(0xe6)]=helper['generateLocalIdentifier']()):this[_0x5aa783(0x139)][_0x5aa783(0xaf)]={'localIdentifier':helper[_0x5aa783(0x7c)]()});this['config']['browserStackLocalOptions']['skipBinaryInitialisation']=helper[_0x5aa783(0x14f)](this['config']['browserStackLocalOptions'][_0x5aa783(0xe9)]),helper['setHandlePWError'](this[_0x5aa783(0x139)]);if(_0x1da470[_0x5aa783(0xad)](_0x26414a,_0x1da470[_0x5aa783(0x73)]))return;this[_0x5aa783(0x15a)]();process[_0x5aa783(0xff)]['BROWSERSTACK_TURBOSCALE']&&(this[_0x5aa783(0x139)]['turboScale']=helper['isTrue'](process[_0x5aa783(0xff)][_0x5aa783(0xb2)]),this[_0x5aa783(0x139)][_0x5aa783(0x7b)]=this[_0x5aa783(0x139)]['turboScaleOptions']||{});if(!helper[_0x5aa783(0x12d)]()){try{process[_0x5aa783(0xff)][_0x5aa783(0x70)]=_0x26414a,utilities['fireFunnelTestEvent'](_0x1da470[_0x5aa783(0x9d)],{},this[_0x5aa783(0x139)],this[_0x5aa783(0x89)]);}catch(_0x5f1ae6){logger[_0x5aa783(0x11c)]('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x5f1ae6);}return;}helper[_0x5aa783(0xa3)](_0x26414a)&&(_0x1da470[_0x5aa783(0x156)](_0x1da470[_0x5aa783(0xe8)](parseInt,helper[_0x5aa783(0xcb)](_0x1da470[_0x5aa783(0xc1)])),0x3)&&(this[_0x5aa783(0x139)][_0x5aa783(0x106)]=![]),_0x1da470[_0x5aa783(0x167)](helper['compareVersions'](helper[_0x5aa783(0xcb)](_0x1da470[_0x5aa783(0xc1)]),_0x1da470[_0x5aa783(0x132)]),0x1)&&(this[_0x5aa783(0x139)][_0x5aa783(0x106)]=!![]));(helper[_0x5aa783(0x87)](this[_0x5aa783(0x139)][_0x5aa783(0xed)])||helper[_0x5aa783(0x87)](this['config'][_0x5aa783(0xed)]['length']))&&(helper['isUndefined'](this[_0x5aa783(0x139)][_0x5aa783(0x144)])?logger[_0x5aa783(0x147)](_0x1da470['oncGt']):logger['warn'](_0x1da470[_0x5aa783(0xf5)]),this[_0x5aa783(0x139)][_0x5aa783(0xed)]=[]);!this[_0x5aa783(0x139)][_0x5aa783(0x122)]&&(this[_0x5aa783(0x139)][_0x5aa783(0x122)]={});try{process['env']['FRAMEWORK']=_0x45840d['_'][0x0],utilities['fireFunnelTestEvent'](_0x1da470['zzBpF'],{},this[_0x5aa783(0x139)],this['framework']);}catch(_0x530fc5){logger['debug']('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x530fc5);}!this['config'][_0x5aa783(0x78)]&&logger[_0x5aa783(0x147)](constants[_0x5aa783(0x6b)]),this['intExitHandler']=this[_0x5aa783(0x160)][_0x5aa783(0x9c)](this),process['on'](_0x1da470[_0x5aa783(0xc8)],this[_0x5aa783(0x160)]),process['on'](_0x1da470[_0x5aa783(0x10a)],this[_0x5aa783(0x160)]),process['on'](_0x1da470[_0x5aa783(0x86)],this['intExitHandler']),_0x1da470[_0x5aa783(0xf7)](process[_0x5aa783(0xfb)],_0x1da470['KLdmR'])?(process['on'](_0x1da470[_0x5aa783(0xf9)],this['intExitHandler']),process['on'](_0x1da470[_0x5aa783(0x138)],this[_0x5aa783(0x160)])):process['on'](_0x1da470[_0x5aa783(0x6d)],this['intExitHandler']),process['on'](_0x1da470[_0x5aa783(0xfd)],this[_0x5aa783(0x8f)]());}async[a55_0x738529(0x12b)](_0x173e87){const _0x599908=a55_0x738529,_0x6a38e1={'bxsyW':function(_0x238e16,_0x1e462c){return _0x238e16(_0x1e462c);},'VJGvb':_0x599908(0xf0),'hCyaT':_0x599908(0x9a),'eAeaL':_0x599908(0x9f),'nvSmZ':function(_0x147cd2,_0x3fbe66){return _0x147cd2===_0x3fbe66;},'TunDd':'playwright','IZLlt':function(_0x2f130f,_0x445727){return _0x2f130f+_0x445727;},'pKRCa':_0x599908(0x104),'BvilV':'codeceptjs','CgbDG':function(_0x5e5754,_0x26b0ea){return _0x5e5754(_0x26b0ea);}};this['preInitialize'](_0x173e87);if(_0x6a38e1[_0x599908(0x11d)](isTurboScaleSession,this[_0x599908(0x139)])){const _0x323f26=await helper[_0x599908(0xce)](this['config']);this[_0x599908(0x139)][_0x599908(0x84)]=_0x323f26,_0x323f26['isTrialGrid']&&helper[_0x599908(0x10f)](this[_0x599908(0x139)][_0x599908(0x131)])&&helper[_0x599908(0x14f)](this['config'][_0x599908(0x131)])&&(this[_0x599908(0x139)][_0x599908(0xaf)]['localIdentifier']=_0x6a38e1[_0x599908(0x116)],this['config']['browserStackLocalOptions'][_0x6a38e1[_0x599908(0xec)]]=_0x323f26[_0x599908(0xe4)][_0x599908(0x8a)](','),this[_0x599908(0x139)][_0x599908(0xaf)][_0x599908(0x82)]=_0x6a38e1[_0x599908(0x126)]),this[_0x599908(0x139)]['turboScaleUrl']=_0x323f26[_0x599908(0x72)],this[_0x599908(0x89)]&&_0x6a38e1[_0x599908(0x119)](this[_0x599908(0x89)]['toLowerCase'](),_0x6a38e1[_0x599908(0xc4)])&&(this[_0x599908(0x139)]['turboScaleUrl']=_0x6a38e1['IZLlt'](_0x323f26[_0x599908(0xcd)],_0x6a38e1[_0x599908(0x101)])),constants['hubUrl']=helper['getHubUrl'](this[_0x599908(0x139)]),logger[_0x599908(0x11c)]('HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20'+constants[_0x599908(0xe5)]);}helper['setProxySettings'](this[_0x599908(0x139)]),this[_0x599908(0x9e)](),_0x6a38e1[_0x599908(0x11d)](setPercyFlag,this),await this[_0x599908(0x11a)](),![_0x6a38e1[_0x599908(0x16c)]]['includes'](this[_0x599908(0x89)])&&!_0x6a38e1[_0x599908(0x9b)](isTurboScaleSession,this[_0x599908(0x139)])&&!helper[_0x599908(0xd5)]()[_0x599908(0xee)]&&await this[_0x599908(0x137)]();}async[a55_0x738529(0x7a)](){const _0x51287e=a55_0x738529,_0x581e33={};_0x581e33[_0x51287e(0x71)]=function(_0x535681,_0x5befd3){return _0x535681===_0x5befd3;},_0x581e33['tNKSk']=_0x51287e(0xa8),_0x581e33[_0x51287e(0x10b)]=_0x51287e(0x155),_0x581e33[_0x51287e(0x158)]=_0x51287e(0x16a),_0x581e33[_0x51287e(0x12a)]=_0x51287e(0x9f),_0x581e33[_0x51287e(0xb9)]='beforeExit';const _0x35841a=_0x581e33;if(helper['isTrue'](this[_0x51287e(0x139)]['percy'])&&(!this[_0x51287e(0x11f)]||!this[_0x51287e(0x11f)]['isRunning']()))try{this[_0x51287e(0x11f)]=await percyHelper[_0x51287e(0x16b)](this[_0x51287e(0x139)]);if(!this[_0x51287e(0x11f)]){process[_0x51287e(0xff)][_0x51287e(0xc6)]=_0x35841a[_0x51287e(0xb4)];throw new Error(_0x35841a[_0x51287e(0x10b)]);}logger[_0x51287e(0x147)](_0x35841a[_0x51287e(0x158)]),process['env'][_0x51287e(0xc6)]=_0x35841a[_0x51287e(0x12a)];let _0x1e9b54=0x0;const _0x3a65ca=async()=>{const _0x2a9361=_0x51287e;_0x1e9b54++,_0x35841a[_0x2a9361(0x71)](_0x1e9b54,0x1)&&await this[_0x2a9361(0x115)]();};process['on'](_0x35841a[_0x51287e(0xb9)],_0x3a65ca);}catch(_0x385dee){process[_0x51287e(0xff)][_0x51287e(0xc6)]=_0x35841a[_0x51287e(0xb4)],logger[_0x51287e(0x11c)](_0x51287e(0x168)+_0x385dee);throw new Error(_0x385dee[_0x51287e(0x150)]());}}async[a55_0x738529(0x115)](){const _0x1dbb1e=a55_0x738529,_0x34b0c9={};_0x34b0c9[_0x1dbb1e(0x124)]='Percy\x20stopped',_0x34b0c9[_0x1dbb1e(0x15f)]=_0x1dbb1e(0xd2);const _0x322f19=_0x34b0c9;if(this[_0x1dbb1e(0x11f)]&&this[_0x1dbb1e(0x11f)][_0x1dbb1e(0xea)]())try{await percyHelper[_0x1dbb1e(0x115)](this[_0x1dbb1e(0x11f)]),logger[_0x1dbb1e(0x147)](_0x322f19[_0x1dbb1e(0x124)]);}catch(_0x9240ae){logger['error'](_0x322f19['Qchys'],_0x9240ae[_0x1dbb1e(0xde)]);}}async[a55_0x738529(0x11a)](){const _0x459b49=a55_0x738529,_0x407c07={};_0x407c07['CAohC']=_0x459b49(0x95),_0x407c07['FdKyq']=_0x459b49(0xe2);const _0x549170=_0x407c07;if(helper[_0x459b49(0x12d)]()&&helper[_0x459b49(0x14f)](this[_0x459b49(0x139)][_0x459b49(0x131)])&&(!this['browserstackLocal']||!this['browserstackLocal'][_0x459b49(0xea)]()))try{if(this['config'][_0x459b49(0xaf)][_0x459b49(0xe9)]){logger[_0x459b49(0x11c)](_0x549170[_0x459b49(0xfa)]);return;}this[_0x459b49(0x131)]=await helper[_0x459b49(0x15c)](this[_0x459b49(0x139)]),logger[_0x459b49(0x147)](_0x549170[_0x459b49(0x7d)]);}catch(_0xd7caa){logger[_0x459b49(0x11c)](_0xd7caa);throw new Error(_0xd7caa[_0x459b49(0x150)]());}}async[a55_0x738529(0xa5)](){const _0x5d9ccc=a55_0x738529,_0x56064f={};_0x56064f[_0x5d9ccc(0xf1)]='Local\x20binary\x20stopped',_0x56064f['nXeSO']=_0x5d9ccc(0x74);const _0x2d92fa=_0x56064f;if(this[_0x5d9ccc(0x131)]&&this[_0x5d9ccc(0x131)]['isRunning']())try{await helper[_0x5d9ccc(0x10c)](this[_0x5d9ccc(0x131)]),logger[_0x5d9ccc(0x147)](_0x2d92fa[_0x5d9ccc(0xf1)]);}catch(_0x575d78){logger[_0x5d9ccc(0x14b)](_0x2d92fa[_0x5d9ccc(0xaa)],_0x575d78[_0x5d9ccc(0xde)]);}}async['setUpHubUrl'](){const _0xf9687f=a55_0x738529;return PerformanceTester[_0xf9687f(0x105)](PerformanceAutEvents['HUB_MANAGEMENT'],async()=>{const _0x165e23=_0xf9687f;await hubAllocator[_0x165e23(0x130)](this[_0x165e23(0x139)]);})();}async['setupTCGAuth'](){const _0x16fce5=a55_0x738529,_0x30307f={'iJGNI':function(_0x561236,_0x5a985f){return _0x561236(_0x5a985f);},'SuhYY':_0x16fce5(0xc0),'JzlHr':function(_0x4a6424,_0x466d7d,_0x1fff92,_0x19b72e,_0x36626e,_0x4e616a,_0x504110){return _0x4a6424(_0x466d7d,_0x1fff92,_0x19b72e,_0x36626e,_0x4e616a,_0x504110);},'eUyuB':_0x16fce5(0x6f),'ZICxG':'BrowserstackHealingInitFailed','BvqYw':function(_0x1559b2,_0x198386){return _0x1559b2(_0x198386);},'JYkfO':'../../package.json','pusJz':_0x16fce5(0x90),'BtwSe':function(_0x312108,_0x468020){return _0x312108(_0x468020);},'CIoMD':function(_0x499276,_0x3f0957){return _0x499276===_0x3f0957;},'XLAeg':_0x16fce5(0x9f),'HZkcf':function(_0x207a96,_0x590a0b){return _0x207a96===_0x590a0b;},'hbopf':_0x16fce5(0x146),'YxTHd':_0x16fce5(0x142),'ZCBpd':_0x16fce5(0xd7),'rdkXo':_0x16fce5(0x109),'fckmZ':function(_0x292e42,_0x45fb33){return _0x292e42>=_0x45fb33;},'YdbQt':function(_0x4ff8cc,_0x3772cb){return _0x4ff8cc<_0x3772cb;},'LQuAd':_0x16fce5(0xa7),'RMHqm':_0x16fce5(0xfe),'prpmJ':function(_0x134545){return _0x134545();}},_0x1e4c2b=PerformanceTester['measureWrapper'](_0x30307f[_0x16fce5(0x140)],async()=>{const _0x3d62db=_0x16fce5;try{const _0x35d396=new Date(),_0x3ad6a8=helper[_0x3d62db(0xb8)](this[_0x3d62db(0x139)]),_0x17e946=_0x30307f[_0x3d62db(0x133)](require,path[_0x3d62db(0x8a)](__dirname,_0x30307f[_0x3d62db(0xa1)])),_0x36b48f=_0x30307f[_0x3d62db(0xcf)](timeoutPromise,constants[_0x3d62db(0xa0)],_0x30307f[_0x3d62db(0x120)],_0x30307f[_0x3d62db(0x75)],_0x35d396,this[_0x3d62db(0x139)],this['framework']),_0x316337={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x30307f[_0x3d62db(0xb3)](require,_0x30307f[_0x3d62db(0x8e)])[_0x3d62db(0xb0)],'methodUsed':_0x30307f[_0x3d62db(0x92)],'proxyConfig':_0x3ad6a8,'os':os['platform']()};if(_0x3ad6a8&&_0x3ad6a8[_0x3d62db(0x112)]){utilities['fireFunnelTestEvent'](constants[_0x3d62db(0x102)],_0x316337,this['config'],this['framework']);return;}const _0x37feec={};_0x37feec['proxy']=_0x3ad6a8;const _0xa7322f=await Promise[_0x3d62db(0x111)]([_0x17e946[_0x3d62db(0xab)](this[_0x3d62db(0x139)][_0x3d62db(0xf3)],this[_0x3d62db(0x139)][_0x3d62db(0xca)],constants['TCG_URL'],_0x30307f[_0x3d62db(0xc9)](require,_0x30307f['JYkfO'])[_0x3d62db(0xb0)],_0x37feec)[_0x3d62db(0x14c)](_0xc09d6e=>{const _0x525bc2=_0x3d62db;return _0x36b48f[_0x525bc2(0xbd)](),_0xc09d6e;}),_0x36b48f]);_0xa7322f[_0x3d62db(0xac)]=_0x30307f[_0x3d62db(0x15d)](_0xa7322f[_0x3d62db(0xac)],_0x30307f[_0x3d62db(0xe1)])||_0x30307f['CIoMD'](_0xa7322f[_0x3d62db(0xac)],!![]);const _0x464259=_0x30307f['CIoMD'](this[_0x3d62db(0x139)]['selfHeal'],!![])||_0x30307f[_0x3d62db(0x15d)](this[_0x3d62db(0x139)]['selfHeal'],_0x30307f[_0x3d62db(0xe1)]);if(_0x30307f[_0x3d62db(0xcc)](_0xa7322f[_0x3d62db(0xde)],constants[_0x3d62db(0xdf)])&&_0x464259)logger[_0x3d62db(0x147)](_0x30307f['hbopf']);else{if(!_0xa7322f[_0x3d62db(0xba)]&&_0x30307f[_0x3d62db(0x15d)](_0xa7322f[_0x3d62db(0x76)],0x1f7)&&_0x464259)logger[_0x3d62db(0x147)](_0x30307f[_0x3d62db(0x114)]),utilities[_0x3d62db(0x7f)](constants[_0x3d62db(0xd1)],_0x316337,this[_0x3d62db(0x139)],this[_0x3d62db(0x89)]);else{if(!_0xa7322f[_0x3d62db(0xba)]&&_0x464259){logger['info'](_0x30307f['ZCBpd']);const _0x49be10={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x30307f[_0x3d62db(0x133)](require,_0x30307f['JYkfO'])['version'],'methodUsed':_0x30307f['pusJz'],'proxyConfig':_0x3ad6a8,'os':os[_0x3d62db(0xfb)]()};utilities[_0x3d62db(0x7f)](constants[_0x3d62db(0xbc)],_0x49be10,this[_0x3d62db(0x139)],this[_0x3d62db(0x89)]);}else{if(_0xa7322f['isAuthenticated']&&!_0xa7322f['isHealingEnabled']&&_0x464259)logger[_0x3d62db(0x147)](_0x30307f[_0x3d62db(0x6e)]);else{if(_0x30307f['fckmZ'](_0xa7322f[_0x3d62db(0x76)],0xc8)&&_0x30307f['YdbQt'](_0xa7322f[_0x3d62db(0x76)],0x12c))utilities[_0x3d62db(0x7f)](constants['AI_INIT_SUCCESSFUL'],_0x316337,this['config'],this[_0x3d62db(0x89)]);else{if(_0x30307f[_0x3d62db(0x96)](_0xa7322f['status'],0x190))_0x316337['status']=_0xa7322f[_0x3d62db(0x76)],utilities[_0x3d62db(0x7f)](constants[_0x3d62db(0xbb)],_0x316337,this[_0x3d62db(0x139)],this[_0x3d62db(0x89)]);else!_0xa7322f[_0x3d62db(0x76)]&&utilities[_0x3d62db(0x7f)](constants[_0x3d62db(0xc2)],_0x316337,this['config'],this[_0x3d62db(0x89)]);}}}}}if(_0xa7322f[_0x3d62db(0xba)]&&_0xa7322f[_0x3d62db(0xac)]){const _0x53a3b7={};_0x53a3b7[_0x3d62db(0xa6)]=_0xa7322f;const _0x1cd069=_0x53a3b7;_0x3ad6a8&&(_0x1cd069[_0x3d62db(0xd9)]=_0x3ad6a8),_0x1cd069[_0x3d62db(0x89)]=this[_0x3d62db(0x89)],_0x1cd069[_0x3d62db(0x166)]=this[_0x3d62db(0x139)],helper[_0x3d62db(0x152)](_0x1cd069),logger[_0x3d62db(0x11c)](_0x30307f[_0x3d62db(0x121)]);}}catch(_0x185093){logger[_0x3d62db(0x11c)](_0x3d62db(0x8c)+(_0x185093[_0x3d62db(0xde)]?_0x185093[_0x3d62db(0xde)]:''));}});await _0x30307f[_0x16fce5(0x14e)](_0x1e4c2b);}[a55_0x738529(0x9e)](){const _0x3a8288=a55_0x738529,_0x2b883d={'NnudT':function(_0x18c3ff,_0xa3488c){return _0x18c3ff(_0xa3488c);},'kngVF':_0x3a8288(0x13f)};_0x2b883d['NnudT'](require,_0x2b883d['kngVF'])();}['handleExceptions'](){const _0x5bcb40=a55_0x738529,_0xf1668e={};_0xf1668e[_0x5bcb40(0xe3)]=_0x5bcb40(0xfc),_0xf1668e[_0x5bcb40(0x14a)]=_0x5bcb40(0x100);const _0x39ff65=_0xf1668e,_0x5593d0=_0x158c5d=>{const _0x79a6ad=_0x5bcb40;logger[_0x79a6ad(0x14b)](_0x158c5d[_0x79a6ad(0xde)]),logger[_0x79a6ad(0x11c)](util[_0x79a6ad(0x169)](_0x158c5d)),this[_0x79a6ad(0x10d)][_0x79a6ad(0x145)](util[_0x79a6ad(0x169)]('%j',_0x158c5d)),PerformanceTester[_0x79a6ad(0xc5)](_0x158c5d);};process['on'](_0x39ff65['Hslwf'],_0x5593d0),process['on'](_0x39ff65[_0x5bcb40(0x14a)],_0x5593d0);}async[a55_0x738529(0x160)](_0x2829f4){const _0x5e9d0e=a55_0x738529,_0x4ea4c9={};_0x4ea4c9[_0x5e9d0e(0xeb)]=_0x5e9d0e(0x154),_0x4ea4c9[_0x5e9d0e(0x8b)]=function(_0x386e2,_0x116fe4){return _0x386e2+_0x116fe4;},_0x4ea4c9['KkTZU']=_0x5e9d0e(0x14d),_0x4ea4c9['KnEfM']=function(_0x13c127,_0x3e3d2d){return _0x13c127+_0x3e3d2d;},_0x4ea4c9['sTeVM']=_0x5e9d0e(0x127);const _0x47468c=_0x4ea4c9,_0x1cffd=_0x47468c['yqpQy'][_0x5e9d0e(0x16f)]('|');let _0xa79b9a=0x0;while(!![]){switch(_0x1cffd[_0xa79b9a++]){case'0':await TestHubHandler['stop'](_0x2829f4);continue;case'1':if(this[_0x47468c['ljJEL'](_0x47468c[_0x5e9d0e(0x128)],_0x2829f4)])return;continue;case'2':this[_0x47468c[_0x5e9d0e(0xef)](_0x47468c[_0x5e9d0e(0x128)],_0x2829f4)]=!![];continue;case'3':this[_0x5e9d0e(0xf8)]=_0x2829f4;continue;case'4':logger[_0x5e9d0e(0x147)](_0x47468c[_0x5e9d0e(0x8b)](_0x47468c[_0x5e9d0e(0x159)],_0x2829f4));continue;}break;}}[a55_0x738529(0x8f)](){const _0x3861b9=a55_0x738529,_0x46cf11={'TevZc':function(_0x3d19a7,_0x3c3e5d){return _0x3d19a7===_0x3c3e5d;},'eXMxr':_0x3861b9(0x161),'XssJH':function(_0xde6ef8,_0x5548e8){return _0xde6ef8>_0x5548e8;},'URimW':function(_0x4670aa,_0x2b6076){return _0x4670aa>_0x2b6076;},'bPuSd':function(_0x4d9b5c){return _0x4d9b5c();},'zcZEn':_0x3861b9(0xd6)};let _0x28c8e5=0x0;return async()=>{const _0x5450d5=_0x3861b9;_0x28c8e5++;if(_0x46cf11[_0x5450d5(0x141)](_0x28c8e5,0x1)){helper['checkStopLocalBinaryOnExit'](this[_0x5450d5(0x89)])&&await this[_0x5450d5(0xa5)]();try{logger[_0x5450d5(0x11c)](_0x46cf11['eXMxr']),await TestHubHandler['stop'](_0x28c8e5);}catch(_0xc180f2){logger['debug'](_0x5450d5(0x117)+util[_0x5450d5(0x169)](_0xc180f2));}PerformanceTester[_0x5450d5(0x12f)](PerformanceEvents[_0x5450d5(0xf2)]);if(PerformanceTester['isEnabled']()){const {measures:_0x5e1890,errors:_0x22e999}=await PerformanceTester[_0x5450d5(0x6c)](),_0xc8d7d9={};if(_0x5e1890&&_0x46cf11[_0x5450d5(0xda)](_0x5e1890[_0x5450d5(0xe0)],0x0)||_0x22e999&&_0x46cf11[_0x5450d5(0x81)](_0x22e999[_0x5450d5(0xe0)],0x0)){const _0x3c7963={};_0x3c7963[_0x5450d5(0xb1)]=_0x5e1890,_0x3c7963['exceptions']=_0x22e999,Object['assign'](_0xc8d7d9,_0x3c7963);}try{const _0x53bd43=await helper[_0x5450d5(0xb6)](_0xc8d7d9,this['config']);logger[_0x5450d5(0x11c)](_0x5450d5(0x151)+constants[_0x5450d5(0x134)]+_0x5450d5(0xd8)+_0x53bd43['statusCode']);}catch(_0x730a78){logger[_0x5450d5(0x11c)](_0x5450d5(0xe7)+constants[_0x5450d5(0x134)]+_0x5450d5(0xc7)+util[_0x5450d5(0x169)](_0x730a78));}try{fs[_0x5450d5(0x12c)](path[_0x5450d5(0x8a)](_0x46cf11[_0x5450d5(0xd0)](getLogDir),_0x46cf11[_0x5450d5(0x12e)]),JSON[_0x5450d5(0x143)](_0xc8d7d9));}catch(_0x23990d){logger[_0x5450d5(0x11c)]('Error\x20in\x20writing\x20events\x20to\x20file\x20'+_0x23990d);}}}};}}function a55_0x1123(_0x43ce21,_0x27c59d){const _0x264f20=a55_0x264f();return a55_0x1123=function(_0x11231d,_0x3be735){_0x11231d=_0x11231d-0x69;let _0x44ab27=_0x264f20[_0x11231d];return _0x44ab27;},a55_0x1123(_0x43ce21,_0x27c59d);}exports['default']=BrowserStackSetup;