const a89_0x4e9407=a89_0x3e48;(function(_0x1e4fdc,_0x4c9fb1){const _0x3d1b4d=a89_0x3e48,_0x399966=_0x1e4fdc();while(!![]){try{const _0x2ddc40=parseInt(_0x3d1b4d(0x211))/0x1+-parseInt(_0x3d1b4d(0x26d))/0x2*(-parseInt(_0x3d1b4d(0x2a0))/0x3)+parseInt(_0x3d1b4d(0x222))/0x4+-parseInt(_0x3d1b4d(0x2a7))/0x5+-parseInt(_0x3d1b4d(0x272))/0x6*(parseInt(_0x3d1b4d(0x1d4))/0x7)+parseInt(_0x3d1b4d(0x21a))/0x8+parseInt(_0x3d1b4d(0x251))/0x9*(parseInt(_0x3d1b4d(0x235))/0xa);if(_0x2ddc40===_0x4c9fb1)break;else _0x399966['push'](_0x399966['shift']());}catch(_0x2a1c2e){_0x399966['push'](_0x399966['shift']());}}}(a89_0x2357,0x5b824));const util=require('util'),os=require('os'),path=require('path'),{v4:uuidv4}=require(a89_0x4e9407(0x1c9)),fs=require('fs'),constants=require(a89_0x4e9407(0x24f)),logger=require('./logger')['winstonLogger'],fileLogger=require(a89_0x4e9407(0x28b))['fileLogger'],{getLogDir}=require(a89_0x4e9407(0x28b)),helper=require(a89_0x4e9407(0x250)),utilities=require(a89_0x4e9407(0x1d1)),percyHelper=require(a89_0x4e9407(0x2ac)),hubAllocator=require(a89_0x4e9407(0x1d0)),PerformanceTester=require(a89_0x4e9407(0x220)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a89_0x4e9407(0x1b7)),{setPercyFlag}=require(a89_0x4e9407(0x23c)),TestHubHandler=require(a89_0x4e9407(0x1b8)),timeoutPromise=require(a89_0x4e9407(0x260)),BrowserstackCLI=require(a89_0x4e9407(0x27a)),{getEdsInstrumentationAPIUrl}=require(a89_0x4e9407(0x27b));function a89_0x2357(){const _0x41de26=['BROWSERSTACK_TURBOSCALE','../hubAllocationMethods','./utilities','includes','Percy\x20started\x20successfully','511mcIxUu','selfHeal','TCG_DOWN','PGXiR','./setKeepAlive','WVdNE','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','info','SDK\x20run\x20started\x20with\x20id:\x20','split','init','3|0|22|16|11|7|21|4|19|9|5|20|13|14|2|18|8|12|6|15|17|10|1','finalize','ixztD','proxy','stop','config','Error\x20occured\x20while\x20stopping\x20percy','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','toLowerCase','Calling\x20Build\x20Stop\x20from\x20ExitHandler','browserStackLocalOptions','KsDUs','unhandledErrors','handled','custom-repeater','integrations','getProxyConfigForTcg','percy','ClWsJ','checkStopLocalBinaryOnExit','isTrue','getHubUrl','icRHm','gnZyV','ats-repeater','LWCJj','Local\x20binary\x20started\x20successfully','sdkRunId','lVoTv','LYBYr','zMjYu','turboScale','getConfigPath','requireSeleniumWebdriverCheck','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','then','xmWAr','fireFunnelTestEvent','isBrowserstackInfra','ldfrG','skipBinaryInitialisation','AI_PROXY_FAILURE','cancel','Error\x20in\x20writing\x20events\x20to\x20file\x20','getLocalIdentifier','AI_INIT_SUCCESSFUL','STqZt','true','length','BrROH','723871JZBXaP','userName\x20or\x20accessKey\x20is\x20not\x20defined','status','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','compareVersions','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','getFinalCaps','debug','2844992EphvYn','setUpHubUrl','isUndefined','framework','getUserName','kZHaT','./performance/performance-tester','setLogDir','926504FqZpMM','SDK_CLEANUP','unhandledRejection','Local\x20binary\x20stopped','Data\x20sent\x20successfully\x20to\x20','zqpGa','wLQeM','version','startPercy','error','url','push','xdCnV','hxxYd','SfXYk','join','writeFileSync','getPackageVersion','fEFyG','1930zOgWkn','proxyConfig','platforms','EVYGX','SIGINT','TCG_URL','handleExceptions','./testhub/utils','GzqYV','AI_INIT_FAILURE','Failed\x20to\x20send\x20data\x20to\x20','Error\x20in\x20percy\x20setup\x20','stopBrowserstackLocal','?caps=','EKaPq','stopPercy','../ai-sdk-node/bundle','normalizeTestReportingEnvVars','nrGRe','close','customRepeaters','SIGHUP','LquBm','aiHeal:tcgAuth','platform','WwAUW','../bin/utils/constants','./helper','5436EBjkQo','TCG_AUTH_FAILURE','playwrightUrl','getInstance','end','nAQpq','turboScaleGridDetails','SIGABRT','useW3C','1|3|2|5|0|4','errorMessage','getAccessKey','RDAwr','isNotUndefined','SIGBREAK','./timeoutPromise','oIsle','xKvXd','vflLY','turboScaleUrl','Error\x20in\x20sending\x20testhub\x20stop:\x20','\x20with\x20error\x20','cliConfig','SpJPo','testContextOptions','UwrpV','BMqyj','beforeExit','4xJhpTt','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','SVpIY','Akzap','WarON','40758egRTyM','assign','browserstackLocal','measureWrapper','skipSessionStatus','SDKTestAttempted','sanitizeCaps','format','../bin/v2/browserstackCLI','../bin/utils/apiUtilityMethods','jJMNZ','mPUTd','setHandlePWError','tcgAuthConfig','bstackConfig','generateLocalIdentifier','toString','win32','setupBrowserstackLocal','sendToEDS','mxUpl','JVEXC','Shutdown\x20triggered\x20by\x20','HUB_MANAGEMENT','stopLocalBinary','./logger','envConfig','rQudN','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','QUgog','killSignal','zBBYX','leACI','isHealingEnabled','userName','false','message','FRAMEWORK','BROWSERSTACK_PERCY','isTurboScaleSession','Qtuot','setupTcgConfigFile','bind','skipSessionName','setupKeepAlive','jzitM','60006BhMSbv','isAuthenticated','cMwkt','thrJo','intExitHandler','EsZuY','kWxVC','2984940bxYIOV','captureError','env','VHEhe','BfvKE','./percy/utils','preInitialize','statusCode','localOptions','NXmiH','jezoB','LzFXr','imKsK','SIGQUIT','measures','BrowserstackHealing.init','INVALID_INIT_RESP_WITH_USER_IMPACT','startLocalBinary','central_scanner','race','setLogLevel','setupTCGAuth','disableAutoCaptureLogs','RIDnQ','default','NVQrA','setBrowserstackInfraFromConfig','EDqPo','./performance/constants','./testhub/testhubHandler','uncaughtException','xilRO','readConfig','startMonitoring','localIdentifier','eHKDA','hubUrl','ooPOV','BrowserstackHealingInitFailed','TFyjW','isRunning','warn','tcg\x20config\x20setup\x20successful.','forceLocal','parallelsPerPlatform','PeRLb','uuid','AOAzX','../../package.json','setEnvCaps','getLocalConfig','KPJNQ'];a89_0x2357=function(){return _0x41de26;};return a89_0x2357();}function a89_0x3e48(_0x2f8704,_0x1a4d8f){const _0x2357e1=a89_0x2357();return a89_0x3e48=function(_0x3e48fd,_0x1f32a6){_0x3e48fd=_0x3e48fd-0x1aa;let _0x6fd0d0=_0x2357e1[_0x3e48fd];return _0x6fd0d0;},a89_0x3e48(_0x2f8704,_0x1a4d8f);}class BrowserStackSetup{constructor(_0x26bd5b,_0x4cf751){const _0x534d67=a89_0x4e9407,_0x16e3e5={'jzitM':_0x534d67(0x1df),'EKaPq':function(_0x336c0d){return _0x336c0d();},'FCMux':'No\x20config\x20provided.'},_0x3f544a=_0x16e3e5[_0x534d67(0x29f)][_0x534d67(0x1dd)]('|');let _0x1fb11b=0x0;while(!![]){switch(_0x3f544a[_0x1fb11b++]){case'0':helper[_0x534d67(0x246)]();continue;case'1':PerformanceTester[_0x534d67(0x1bc)]();continue;case'2':if(this[_0x534d67(0x1e4)][_0x534d67(0x22b)])throw new Error(this[_0x534d67(0x1e4)][_0x534d67(0x22b)]);continue;case'3':this[_0x534d67(0x1eb)]=[];continue;case'4':this['config'][_0x534d67(0x237)]=this[_0x534d67(0x1e4)]['platforms']||[];continue;case'5':this[_0x534d67(0x1fa)]=_0x16e3e5[_0x534d67(0x243)](uuidv4);continue;case'6':this[_0x534d67(0x1e4)]['testContextOptions'][_0x534d67(0x29d)]=!helper[_0x534d67(0x205)]()||helper[_0x534d67(0x1f3)](this[_0x534d67(0x1e4)][_0x534d67(0x269)][_0x534d67(0x29d)]);continue;case'7':this[_0x534d67(0x1e4)]=helper[_0x534d67(0x1bb)](helper[_0x534d67(0x1ff)](_0x26bd5b));continue;case'8':helper['setCredentialsFromYmlConfig'](this[_0x534d67(0x1e4)]);continue;case'9':this[_0x534d67(0x25b)]={};continue;case'10':helper[_0x534d67(0x1af)](this[_0x534d67(0x1e4)],this['cliConfig'],this[_0x534d67(0x28c)]);continue;case'11':this[_0x534d67(0x1f0)]=null;continue;case'12':this['config']['testContextOptions'][_0x534d67(0x276)]=!helper[_0x534d67(0x205)]()||helper[_0x534d67(0x1f3)](this[_0x534d67(0x1e4)][_0x534d67(0x269)][_0x534d67(0x276)]);continue;case'13':global['framework']=_0x4cf751;continue;case'14':if(helper[_0x534d67(0x21c)](this[_0x534d67(0x1e4)]))throw new Error(_0x16e3e5['FCMux']);continue;case'15':helper[_0x534d67(0x218)](this[_0x534d67(0x1e4)],this['cliConfig'],this[_0x534d67(0x28c)]);continue;case'16':this[_0x534d67(0x274)]=null;continue;case'17':helper[_0x534d67(0x221)](this[_0x534d67(0x1e4)]);continue;case'18':helper[_0x534d67(0x1b5)](this['config'],this['cliConfig']);continue;case'19':this['config']['testContextOptions']=this[_0x534d67(0x1e4)][_0x534d67(0x269)]||{};continue;case'20':this[_0x534d67(0x21d)]=_0x4cf751;continue;case'21':this[_0x534d67(0x267)]=helper['setCLICaps'](_0x26bd5b);continue;case'22':this[_0x534d67(0x28c)]=helper[_0x534d67(0x1cc)]();continue;}break;}}[a89_0x4e9407(0x2ad)](_0x5ddc21){const _0xbe68cb=a89_0x4e9407,_0x2f7ca0={'mPUTd':_0xbe68cb(0x212),'WVdNE':function(_0x5d8b32,_0x6ec5c4){return _0x5d8b32===_0x6ec5c4;},'jJMNZ':function(_0x503653,_0x523115){return _0x503653===_0x523115;},'vflLY':_0xbe68cb(0x1ee),'oIsle':_0xbe68cb(0x277),'BMqyj':function(_0x57e1f8,_0x2906cb){return _0x57e1f8<_0x2906cb;},'SfXYk':function(_0x2d84fc,_0x4472af){return _0x2d84fc(_0x4472af);},'NXmiH':'selenium-webdriver','kWxVC':'4.5.0','xnQdR':_0xbe68cb(0x216),'lVoTv':_0xbe68cb(0x1da),'AOAzX':'SIGTERM','KsDUs':_0xbe68cb(0x239),'mxUpl':_0xbe68cb(0x24a),'SpJPo':function(_0x1f613c,_0x281334){return _0x1f613c!==_0x281334;},'EsZuY':_0xbe68cb(0x283),'kZHaT':_0xbe68cb(0x258),'msXCi':_0xbe68cb(0x2b4),'WwAUW':_0xbe68cb(0x25f),'WarON':_0xbe68cb(0x26c)},_0xa62f0d=this[_0xbe68cb(0x21d)];global[_0xbe68cb(0x1e4)]=this[_0xbe68cb(0x1e4)],helper[_0xbe68cb(0x278)](this[_0xbe68cb(0x1e4)]),this[_0xbe68cb(0x290)]=null,global['sdkRunId']=this[_0xbe68cb(0x1fa)],logger['info'](_0xbe68cb(0x1dc)+this[_0xbe68cb(0x1fa)]),!this[_0xbe68cb(0x1e4)][_0xbe68cb(0x1e9)]&&(this[_0xbe68cb(0x1e4)]['browserStackLocalOptions']=this[_0xbe68cb(0x1e4)][_0xbe68cb(0x2af)]||{});if(helper[_0xbe68cb(0x21c)](helper[_0xbe68cb(0x21e)](this['config']))||helper[_0xbe68cb(0x21c)](helper[_0xbe68cb(0x25c)](this[_0xbe68cb(0x1e4)])))throw new Error(_0x2f7ca0[_0xbe68cb(0x27d)]);helper[_0xbe68cb(0x1cd)](this[_0xbe68cb(0x1e4)])&&helper[_0xbe68cb(0x21c)](helper[_0xbe68cb(0x20b)](this[_0xbe68cb(0x1e4)]))&&(!helper[_0xbe68cb(0x21c)](this[_0xbe68cb(0x1e4)][_0xbe68cb(0x1e9)])&&_0x2f7ca0[_0xbe68cb(0x1d9)](this['config'][_0xbe68cb(0x1e9)]['constructor'],Object)?!helper[_0xbe68cb(0x1f3)](this[_0xbe68cb(0x1e4)][_0xbe68cb(0x1e9)]['skipBinaryInitialisation'])&&(this[_0xbe68cb(0x1e4)][_0xbe68cb(0x1e9)]['localIdentifier']=helper['generateLocalIdentifier']()):this[_0xbe68cb(0x1e4)][_0xbe68cb(0x1e9)]={'localIdentifier':helper[_0xbe68cb(0x281)]()});this[_0xbe68cb(0x1e4)][_0xbe68cb(0x1e9)][_0xbe68cb(0x207)]=helper[_0xbe68cb(0x1f3)](this[_0xbe68cb(0x1e4)][_0xbe68cb(0x1e9)][_0xbe68cb(0x207)]),helper[_0xbe68cb(0x27e)](this[_0xbe68cb(0x1e4)]);if(_0x2f7ca0[_0xbe68cb(0x27c)](_0xa62f0d,_0x2f7ca0[_0xbe68cb(0x263)]))return;this[_0xbe68cb(0x23b)]();process['env']['BROWSERSTACK_TURBOSCALE']&&(this[_0xbe68cb(0x1e4)][_0xbe68cb(0x1fe)]=helper['isTrue'](process['env']['BROWSERSTACK_TURBOSCALE']),this[_0xbe68cb(0x1e4)]['turboScaleOptions']=this[_0xbe68cb(0x1e4)]['turboScaleOptions']||{});helper[_0xbe68cb(0x299)](this['config'])&&(process[_0xbe68cb(0x2a9)][_0xbe68cb(0x1cf)]=!![]);if(!helper[_0xbe68cb(0x205)]()){try{process[_0xbe68cb(0x2a9)][_0xbe68cb(0x297)]=_0xa62f0d,utilities[_0xbe68cb(0x204)](_0x2f7ca0[_0xbe68cb(0x261)],{},this[_0xbe68cb(0x1e4)],this[_0xbe68cb(0x21d)]);}catch(_0x4a1098){logger[_0xbe68cb(0x219)](_0xbe68cb(0x28e)+_0x4a1098);}return;}if(helper[_0xbe68cb(0x200)](_0xa62f0d)){if(global['__isPlaywrightInstalled'])return;_0x2f7ca0[_0xbe68cb(0x26b)](_0x2f7ca0[_0xbe68cb(0x230)](parseInt,helper[_0xbe68cb(0x233)](_0x2f7ca0['NXmiH'])),0x3)&&(this[_0xbe68cb(0x1e4)][_0xbe68cb(0x259)]=![]),_0x2f7ca0[_0xbe68cb(0x1d9)](helper[_0xbe68cb(0x215)](helper[_0xbe68cb(0x233)](_0x2f7ca0[_0xbe68cb(0x2b0)]),_0x2f7ca0[_0xbe68cb(0x2a6)]),0x1)&&(this['config']['useW3C']=!![]);}(helper[_0xbe68cb(0x21c)](this[_0xbe68cb(0x1e4)][_0xbe68cb(0x237)])||helper[_0xbe68cb(0x21c)](this[_0xbe68cb(0x1e4)][_0xbe68cb(0x237)]['length']))&&(helper[_0xbe68cb(0x21c)](this['config'][_0xbe68cb(0x1c7)])?logger[_0xbe68cb(0x1db)](_0x2f7ca0['xnQdR']):logger[_0xbe68cb(0x1c4)](_0x2f7ca0[_0xbe68cb(0x1fb)]),this[_0xbe68cb(0x1e4)]['platforms']=[]);!this['config'][_0xbe68cb(0x269)]&&(this[_0xbe68cb(0x1e4)][_0xbe68cb(0x269)]={});try{process[_0xbe68cb(0x2a9)][_0xbe68cb(0x297)]=_0x5ddc21['_'][0x0],utilities[_0xbe68cb(0x204)](_0x2f7ca0[_0xbe68cb(0x261)],{},this[_0xbe68cb(0x1e4)],this[_0xbe68cb(0x21d)]);}catch(_0x27eb3a){logger[_0xbe68cb(0x219)](_0xbe68cb(0x28e)+_0x27eb3a);}!this['config'][_0xbe68cb(0x1b1)]&&logger[_0xbe68cb(0x1db)](constants['AUTOLOGCAPTURE_NOTIFICATION']),this[_0xbe68cb(0x2a4)]=this[_0xbe68cb(0x2a4)][_0xbe68cb(0x29c)](this),process['on'](_0x2f7ca0[_0xbe68cb(0x1ca)],this[_0xbe68cb(0x2a4)]),process['on'](_0x2f7ca0[_0xbe68cb(0x1ea)],this[_0xbe68cb(0x2a4)]),process['on'](_0x2f7ca0[_0xbe68cb(0x286)],this[_0xbe68cb(0x2a4)]),_0x2f7ca0[_0xbe68cb(0x268)](process[_0xbe68cb(0x24d)],_0x2f7ca0[_0xbe68cb(0x2a5)])?(process['on'](_0x2f7ca0[_0xbe68cb(0x21f)],this[_0xbe68cb(0x2a4)]),process['on'](_0x2f7ca0['msXCi'],this[_0xbe68cb(0x2a4)])):process['on'](_0x2f7ca0[_0xbe68cb(0x24e)],this['intExitHandler']),process['on'](_0x2f7ca0[_0xbe68cb(0x271)],this['exitHandler']());}async['initialize'](_0x2f2c8b){const _0x453cab=a89_0x4e9407,_0x5a1877={'VHEhe':_0x453cab(0x1f7),'WlQIl':_0x453cab(0x1ed),'ClWsJ':'true','xilRO':function(_0x376355,_0x6e7d9c){return _0x376355===_0x6e7d9c;},'rQudN':'playwright','UUjBm':function(_0x880e0,_0x4f72b3){return _0x880e0+_0x4f72b3;},'LWCJj':_0x453cab(0x242),'DQAXm':function(_0x30da3a,_0x296f1a){return _0x30da3a(_0x296f1a);},'CIyAg':'codeceptjs'};this[_0x453cab(0x2ad)](_0x2f2c8b);if(helper[_0x453cab(0x299)](this[_0x453cab(0x1e4)])){const _0x482018=await helper['getTurboScaleGridDetails'](this['config']);this['config'][_0x453cab(0x257)]=_0x482018,_0x482018['isTrialGrid']&&helper[_0x453cab(0x25e)](this[_0x453cab(0x1e4)][_0x453cab(0x274)])&&helper[_0x453cab(0x1f3)](this[_0x453cab(0x1e4)][_0x453cab(0x274)])&&(this[_0x453cab(0x1e4)][_0x453cab(0x1e9)][_0x453cab(0x1bd)]=_0x5a1877[_0x453cab(0x2aa)],this['config']['browserStackLocalOptions'][_0x5a1877['WlQIl']]=_0x482018[_0x453cab(0x249)]['join'](','),this[_0x453cab(0x1e4)][_0x453cab(0x1e9)][_0x453cab(0x1c6)]=_0x5a1877[_0x453cab(0x1f1)]),this[_0x453cab(0x1e4)][_0x453cab(0x264)]=_0x482018[_0x453cab(0x22c)],this[_0x453cab(0x21d)]&&_0x5a1877[_0x453cab(0x1ba)](this[_0x453cab(0x21d)][_0x453cab(0x1e7)](),_0x5a1877[_0x453cab(0x28d)])?this['config'][_0x453cab(0x264)]=_0x5a1877['UUjBm'](_0x482018[_0x453cab(0x253)],_0x5a1877[_0x453cab(0x1f8)]):constants[_0x453cab(0x1bf)]=helper[_0x453cab(0x1f4)](this[_0x453cab(0x1e4)]),logger[_0x453cab(0x219)]('HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20'+constants['hubUrl']);}helper['setProxySettings'](this[_0x453cab(0x1e4)]),this[_0x453cab(0x29e)](),_0x5a1877['DQAXm'](setPercyFlag,this),await this[_0x453cab(0x284)](),![_0x5a1877['CIyAg'],_0x5a1877[_0x453cab(0x28d)]][_0x453cab(0x1d2)](this['framework'])&&!helper['isTurboScaleSession'](this[_0x453cab(0x1e4)])&&!helper['getCentralUser']()[_0x453cab(0x1ad)]&&await this[_0x453cab(0x21b)]();}async['setupPercy'](){const _0x26dc9c=a89_0x4e9407,_0x440d39={};_0x440d39[_0x26dc9c(0x1be)]=function(_0x3781ab,_0x49411f){return _0x3781ab===_0x49411f;},_0x440d39[_0x26dc9c(0x238)]=_0x26dc9c(0x295),_0x440d39[_0x26dc9c(0x291)]=_0x26dc9c(0x26e),_0x440d39[_0x26dc9c(0x1c2)]=_0x26dc9c(0x1d3),_0x440d39['ooPOV']=_0x26dc9c(0x20e),_0x440d39['zMjYu']=_0x26dc9c(0x26c);const _0x43acad=_0x440d39;if(helper[_0x26dc9c(0x1f3)](this[_0x26dc9c(0x1e4)]['percy'])&&(!this[_0x26dc9c(0x1f0)]||!this[_0x26dc9c(0x1f0)][_0x26dc9c(0x1c3)]()))try{this[_0x26dc9c(0x1f0)]=await percyHelper[_0x26dc9c(0x22a)](this['config']);if(!this[_0x26dc9c(0x1f0)]){process['env'][_0x26dc9c(0x298)]=_0x43acad['EVYGX'];throw new Error(_0x43acad[_0x26dc9c(0x291)]);}logger[_0x26dc9c(0x1db)](_0x43acad[_0x26dc9c(0x1c2)]),process[_0x26dc9c(0x2a9)][_0x26dc9c(0x298)]=_0x43acad[_0x26dc9c(0x1c0)];let _0x4acc26=0x0;const _0x558637=async()=>{const _0x3fc7a9=_0x26dc9c;_0x4acc26++,_0x43acad[_0x3fc7a9(0x1be)](_0x4acc26,0x1)&&await this['stopPercy']();};process['on'](_0x43acad[_0x26dc9c(0x1fd)],_0x558637);}catch(_0x12938b){process['env'][_0x26dc9c(0x298)]=_0x43acad[_0x26dc9c(0x238)],logger[_0x26dc9c(0x219)](_0x26dc9c(0x240)+_0x12938b);throw new Error(_0x12938b[_0x26dc9c(0x282)]());}}async[a89_0x4e9407(0x244)](){const _0x2a288a=a89_0x4e9407,_0xcaee1e={};_0xcaee1e[_0x2a288a(0x22f)]='Percy\x20stopped',_0xcaee1e[_0x2a288a(0x2a3)]=_0x2a288a(0x1e5);const _0x5c860c=_0xcaee1e;if(this[_0x2a288a(0x1f0)]&&this['percy']['isRunning']())try{await percyHelper['stopPercy'](this['percy']),logger[_0x2a288a(0x1db)](_0x5c860c[_0x2a288a(0x22f)]);}catch(_0x629fdb){logger[_0x2a288a(0x22b)](_0x5c860c['thrJo'],_0x629fdb[_0x2a288a(0x296)]);}}async['setupBrowserstackLocal'](){const _0x4cff3=a89_0x4e9407,_0x67b9f8={};_0x67b9f8[_0x4cff3(0x2b2)]='Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled',_0x67b9f8[_0x4cff3(0x247)]=_0x4cff3(0x1f9);const _0x484301=_0x67b9f8;if(helper['isBrowserstackInfra']()&&helper[_0x4cff3(0x1f3)](this[_0x4cff3(0x1e4)][_0x4cff3(0x274)])&&(!this[_0x4cff3(0x274)]||!this[_0x4cff3(0x274)][_0x4cff3(0x1c3)]()))try{if(this['config'][_0x4cff3(0x1e9)]['skipBinaryInitialisation']){logger[_0x4cff3(0x219)](_0x484301[_0x4cff3(0x2b2)]);return;}this[_0x4cff3(0x274)]=await helper[_0x4cff3(0x1ac)](this['config']),logger['info'](_0x484301[_0x4cff3(0x247)]);}catch(_0x439865){logger['debug'](_0x439865);throw new Error(_0x439865[_0x4cff3(0x282)]());}}async[a89_0x4e9407(0x241)](){const _0x3eff42=a89_0x4e9407,_0x2ee085={};_0x2ee085[_0x3eff42(0x234)]=_0x3eff42(0x225),_0x2ee085[_0x3eff42(0x1e1)]='Error\x20occured\x20while\x20stopping\x20local\x20binary';const _0x90bdc=_0x2ee085;if(this[_0x3eff42(0x274)]&&this[_0x3eff42(0x274)]['isRunning']())try{await helper[_0x3eff42(0x28a)](this[_0x3eff42(0x274)]),logger[_0x3eff42(0x1db)](_0x90bdc[_0x3eff42(0x234)]);}catch(_0x362772){logger['error'](_0x90bdc['ixztD'],_0x362772[_0x3eff42(0x296)]);}}async[a89_0x4e9407(0x21b)](){const _0x274674=a89_0x4e9407;return PerformanceTester[_0x274674(0x275)](PerformanceAutEvents[_0x274674(0x289)],async()=>{const _0x1acaf2=_0x274674;await hubAllocator['allocateHub'](this[_0x1acaf2(0x1e4)]);})();}async[a89_0x4e9407(0x1b0)](){const _0x42e05f=a89_0x4e9407,_0x526a88={'JVEXC':function(_0x405bd8,_0x273572){return _0x405bd8(_0x273572);},'gnZyV':_0x42e05f(0x245),'BfvKE':function(_0x1c7d1f,_0x4f0aa1,_0x3d4201,_0x5a142c,_0x29fb3b,_0x227a78,_0x5bb60f){return _0x1c7d1f(_0x4f0aa1,_0x3d4201,_0x5a142c,_0x29fb3b,_0x227a78,_0x5bb60f);},'RIDnQ':'BrowserstackHealing.init\x20method\x20timed\x20out','PGXiR':_0x42e05f(0x1c1),'RDAwr':_0x42e05f(0x1cb),'xdCnV':_0x42e05f(0x1aa),'PeRLb':function(_0x32de28,_0x21440d){return _0x32de28===_0x21440d;},'imKsK':_0x42e05f(0x20e),'NVQrA':function(_0xc6249d,_0x4d94e3){return _0xc6249d===_0x4d94e3;},'GzqYV':_0x42e05f(0x201),'Qtuot':function(_0x4ca45b,_0x3286ad){return _0x4ca45b===_0x3286ad;},'EDqPo':_0x42e05f(0x1e6),'RXOut':'Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','LYBYr':_0x42e05f(0x217),'cMwkt':function(_0x4937cd,_0x36fd7e){return _0x4937cd>=_0x36fd7e;},'lSABC':function(_0x3faa73,_0x4bbf55){return _0x3faa73<_0x4bbf55;},'KPJNQ':function(_0x4f2981,_0x41f05e){return _0x4f2981>=_0x41f05e;},'QUgog':_0x42e05f(0x1c5),'icRHm':_0x42e05f(0x24c),'UwrpV':function(_0x52d6fd){return _0x52d6fd();}},_0x17242c=PerformanceTester[_0x42e05f(0x275)](_0x526a88[_0x42e05f(0x1f5)],async()=>{const _0x54aa9d=_0x42e05f;try{const _0x57ad2e=new Date(),_0x593169=helper[_0x54aa9d(0x1ef)](this[_0x54aa9d(0x1e4)]),_0x30ee3a=_0x526a88[_0x54aa9d(0x287)](require,path[_0x54aa9d(0x231)](__dirname,_0x526a88[_0x54aa9d(0x1f6)])),_0x210c9d=_0x526a88[_0x54aa9d(0x2ab)](timeoutPromise,constants['TCG_AUTH_TIMEOUT'],_0x526a88[_0x54aa9d(0x1b2)],_0x526a88[_0x54aa9d(0x1d7)],_0x57ad2e,this[_0x54aa9d(0x1e4)],this[_0x54aa9d(0x21d)]),_0x59360d={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x526a88[_0x54aa9d(0x287)](require,_0x526a88[_0x54aa9d(0x25d)])['version'],'methodUsed':_0x526a88[_0x54aa9d(0x22e)],'proxyConfig':_0x593169,'os':os[_0x54aa9d(0x24d)]()};if(_0x593169&&_0x593169['proxyUrl']){utilities[_0x54aa9d(0x204)](constants[_0x54aa9d(0x208)],_0x59360d,this[_0x54aa9d(0x1e4)],this[_0x54aa9d(0x21d)]);return;}const _0x558264={};_0x558264[_0x54aa9d(0x1e2)]=_0x593169;const _0xd8995c=await Promise[_0x54aa9d(0x1ae)]([_0x30ee3a[_0x54aa9d(0x1de)](this[_0x54aa9d(0x1e4)]['accessKey'],this['config'][_0x54aa9d(0x294)],constants[_0x54aa9d(0x23a)],_0x526a88[_0x54aa9d(0x287)](require,_0x526a88[_0x54aa9d(0x25d)])[_0x54aa9d(0x229)],_0x558264)[_0x54aa9d(0x202)](_0x23c061=>{const _0x3572c2=_0x54aa9d;return _0x210c9d[_0x3572c2(0x209)](),_0x23c061;}),_0x210c9d]);_0xd8995c['isHealingEnabled']=_0x526a88[_0x54aa9d(0x1c8)](_0xd8995c[_0x54aa9d(0x293)],_0x526a88[_0x54aa9d(0x2b3)])||_0x526a88['PeRLb'](_0xd8995c['isHealingEnabled'],!![]);const _0x55ec1e=_0x526a88['PeRLb'](this[_0x54aa9d(0x1e4)][_0x54aa9d(0x1d5)],!![])||_0x526a88[_0x54aa9d(0x1b4)](this[_0x54aa9d(0x1e4)][_0x54aa9d(0x1d5)],_0x526a88[_0x54aa9d(0x2b3)]);if(_0x526a88[_0x54aa9d(0x1b4)](_0xd8995c['message'],constants['UPGRADE_REQUIRED'])&&_0x55ec1e)logger[_0x54aa9d(0x1db)](_0x526a88[_0x54aa9d(0x23d)]);else{if(!_0xd8995c['isAuthenticated']&&_0x526a88[_0x54aa9d(0x29a)](_0xd8995c[_0x54aa9d(0x213)],0x1f7)&&_0x55ec1e)logger['info'](_0x526a88[_0x54aa9d(0x1b6)]),utilities['fireFunnelTestEvent'](constants[_0x54aa9d(0x1d6)],_0x59360d,this[_0x54aa9d(0x1e4)],this['framework']);else{if(!_0xd8995c['isAuthenticated']&&_0x55ec1e){logger[_0x54aa9d(0x1db)](_0x526a88['RXOut']);const _0x16a164={'tcgUrl':constants[_0x54aa9d(0x23a)],'sdkVersion':_0x526a88[_0x54aa9d(0x287)](require,_0x526a88[_0x54aa9d(0x25d)])[_0x54aa9d(0x229)],'methodUsed':_0x526a88[_0x54aa9d(0x22e)],'proxyConfig':_0x593169,'os':os[_0x54aa9d(0x24d)]()};utilities[_0x54aa9d(0x204)](constants[_0x54aa9d(0x252)],_0x16a164,this['config'],this[_0x54aa9d(0x21d)]);}else{if(_0xd8995c[_0x54aa9d(0x2a1)]&&!_0xd8995c[_0x54aa9d(0x293)]&&_0x55ec1e)logger['info'](_0x526a88[_0x54aa9d(0x1fc)]);else{if(_0x526a88[_0x54aa9d(0x2a2)](_0xd8995c[_0x54aa9d(0x213)],0xc8)&&_0x526a88['lSABC'](_0xd8995c[_0x54aa9d(0x213)],0x12c))utilities[_0x54aa9d(0x204)](constants[_0x54aa9d(0x20c)],_0x59360d,this['config'],this[_0x54aa9d(0x21d)]);else{if(_0x526a88[_0x54aa9d(0x1ce)](_0xd8995c[_0x54aa9d(0x213)],0x190))_0x59360d[_0x54aa9d(0x213)]=_0xd8995c[_0x54aa9d(0x213)],utilities[_0x54aa9d(0x204)](constants[_0x54aa9d(0x23e)],_0x59360d,this[_0x54aa9d(0x1e4)],this['framework']);else!_0xd8995c[_0x54aa9d(0x213)]&&utilities[_0x54aa9d(0x204)](constants[_0x54aa9d(0x1ab)],_0x59360d,this['config'],this[_0x54aa9d(0x21d)]);}}}}}if(_0xd8995c[_0x54aa9d(0x2a1)]&&_0xd8995c[_0x54aa9d(0x293)]){const _0x2671e5={};_0x2671e5[_0x54aa9d(0x27f)]=_0xd8995c;const _0x38aa3b=_0x2671e5;_0x593169&&(_0x38aa3b[_0x54aa9d(0x236)]=_0x593169),_0x38aa3b[_0x54aa9d(0x21d)]=this['framework'],_0x38aa3b[_0x54aa9d(0x280)]=this[_0x54aa9d(0x1e4)],helper[_0x54aa9d(0x29b)](_0x38aa3b),logger[_0x54aa9d(0x219)](_0x526a88[_0x54aa9d(0x28f)]);}}catch(_0x1b64f5){logger[_0x54aa9d(0x219)](_0x54aa9d(0x214)+(_0x1b64f5[_0x54aa9d(0x296)]?_0x1b64f5['message']:''));}});await _0x526a88[_0x42e05f(0x26a)](_0x17242c);}[a89_0x4e9407(0x29e)](){const _0x224779=a89_0x4e9407,_0xede844={'BrROH':function(_0x3fa677,_0x1e848c){return _0x3fa677(_0x1e848c);},'SVpIY':_0x224779(0x1d8)};_0xede844[_0x224779(0x210)](require,_0xede844[_0x224779(0x26f)])();}[a89_0x4e9407(0x23b)](){const _0x1dd47a=a89_0x4e9407,_0x18a57c={};_0x18a57c[_0x1dd47a(0x262)]=_0x1dd47a(0x224),_0x18a57c['Akzap']=_0x1dd47a(0x1b9);const _0x5d4b29=_0x18a57c,_0x308731=_0x250061=>{const _0x20c677=_0x1dd47a;logger[_0x20c677(0x22b)](_0x250061[_0x20c677(0x296)]),logger[_0x20c677(0x219)](util[_0x20c677(0x279)](_0x250061)),this[_0x20c677(0x1eb)][_0x20c677(0x22d)](util[_0x20c677(0x279)]('%j',_0x250061)),PerformanceTester[_0x20c677(0x2a8)](_0x250061);};process['on'](_0x5d4b29[_0x1dd47a(0x262)],_0x308731),process['on'](_0x5d4b29[_0x1dd47a(0x270)],_0x308731);}async['intExitHandler'](_0x272632){const _0x52d959=a89_0x4e9407,_0x2c68e8={};_0x2c68e8[_0x52d959(0x227)]=_0x52d959(0x25a),_0x2c68e8['STqZt']=function(_0x40e401,_0x278be4){return _0x40e401+_0x278be4;},_0x2c68e8[_0x52d959(0x24b)]=_0x52d959(0x1ec),_0x2c68e8[_0x52d959(0x203)]=function(_0x489393,_0x3ce380){return _0x489393+_0x3ce380;},_0x2c68e8[_0x52d959(0x256)]=_0x52d959(0x288);const _0x3d4e14=_0x2c68e8,_0x5f562e=_0x3d4e14[_0x52d959(0x227)][_0x52d959(0x1dd)]('|');let _0x413cac=0x0;while(!![]){switch(_0x5f562e[_0x413cac++]){case'0':await TestHubHandler[_0x52d959(0x1e3)](_0x272632);continue;case'1':if(this[_0x3d4e14[_0x52d959(0x20d)](_0x3d4e14[_0x52d959(0x24b)],_0x272632)])return;continue;case'2':logger['info'](_0x3d4e14['xmWAr'](_0x3d4e14['nAQpq'],_0x272632));continue;case'3':this[_0x3d4e14[_0x52d959(0x20d)](_0x3d4e14[_0x52d959(0x24b)],_0x272632)]=!![];continue;case'4':await BrowserstackCLI[_0x52d959(0x254)]()[_0x52d959(0x1e3)]();continue;case'5':this[_0x52d959(0x290)]=_0x272632;continue;}break;}}['exitHandler'](){const _0xa35432=a89_0x4e9407,_0x3aa847={'GWISU':function(_0x2f999d,_0x2ab803){return _0x2f999d===_0x2ab803;},'ufbtf':_0xa35432(0x1e8),'vJpUy':function(_0x3bf4bd,_0x3b611b){return _0x3bf4bd>_0x3b611b;},'ldfrG':function(_0x1960a2,_0x330e0f){return _0x1960a2>_0x330e0f;},'jezoB':function(_0x5d8657,_0x5c1060){return _0x5d8657(_0x5c1060);},'leACI':function(_0x520d60){return _0x520d60();},'wLQeM':'events.json'};let _0x38b4fe=0x0;return async()=>{const _0x170d94=_0xa35432;_0x38b4fe++;if(_0x3aa847['GWISU'](_0x38b4fe,0x1)){helper[_0x170d94(0x1f2)](this[_0x170d94(0x21d)])&&await this[_0x170d94(0x241)]();try{logger['debug'](_0x3aa847['ufbtf']),await TestHubHandler[_0x170d94(0x1e3)](_0x38b4fe),await BrowserstackCLI['getInstance']()[_0x170d94(0x1e3)]('1');}catch(_0x4ce305){logger[_0x170d94(0x219)](_0x170d94(0x265)+util[_0x170d94(0x279)](_0x4ce305));}PerformanceTester[_0x170d94(0x255)](PerformanceEvents[_0x170d94(0x223)]);if(PerformanceTester['isEnabled']()){const {measures:_0x4e8cde,errors:_0x5d154c}=await PerformanceTester[_0x170d94(0x1e0)](),_0x5a2362={};if(_0x4e8cde&&_0x3aa847['vJpUy'](_0x4e8cde[_0x170d94(0x20f)],0x0)||_0x5d154c&&_0x3aa847[_0x170d94(0x206)](_0x5d154c[_0x170d94(0x20f)],0x0)){const _0x2b0dd1={};_0x2b0dd1[_0x170d94(0x2b5)]=_0x4e8cde,_0x2b0dd1['exceptions']=_0x5d154c,Object[_0x170d94(0x273)](_0x5a2362,_0x2b0dd1);}try{const _0x6a6530=await helper[_0x170d94(0x285)](_0x5a2362,this[_0x170d94(0x1e4)]);logger[_0x170d94(0x219)](_0x170d94(0x226)+_0x3aa847[_0x170d94(0x2b1)](getEdsInstrumentationAPIUrl,'')+'\x20with\x20response\x20'+_0x6a6530[_0x170d94(0x2ae)]);}catch(_0x9c0591){logger[_0x170d94(0x219)](_0x170d94(0x23f)+_0x3aa847['jezoB'](getEdsInstrumentationAPIUrl,'')+_0x170d94(0x266)+util[_0x170d94(0x279)](_0x9c0591));}try{fs[_0x170d94(0x232)](path['join'](_0x3aa847[_0x170d94(0x292)](getLogDir),_0x3aa847[_0x170d94(0x228)]),JSON['stringify'](_0x5a2362));}catch(_0x141fdf){logger[_0x170d94(0x219)](_0x170d94(0x20a)+_0x141fdf);}}}logger&&logger[_0x170d94(0x248)](),fileLogger&&fileLogger[_0x170d94(0x248)]();};}}exports[a89_0x4e9407(0x1b3)]=BrowserStackSetup;