const a91_0x540610=a91_0x33a2;(function(_0x269f2c,_0x5170e0){const _0x67b1fa=a91_0x33a2,_0x324270=_0x269f2c();while(!![]){try{const _0x1d67d6=parseInt(_0x67b1fa(0xc3))/0x1+-parseInt(_0x67b1fa(0x186))/0x2+-parseInt(_0x67b1fa(0x1b6))/0x3+parseInt(_0x67b1fa(0x102))/0x4*(-parseInt(_0x67b1fa(0x188))/0x5)+-parseInt(_0x67b1fa(0xf8))/0x6+parseInt(_0x67b1fa(0xf0))/0x7+parseInt(_0x67b1fa(0x1b2))/0x8*(parseInt(_0x67b1fa(0x13f))/0x9);if(_0x1d67d6===_0x5170e0)break;else _0x324270['push'](_0x324270['shift']());}catch(_0x15d84f){_0x324270['push'](_0x324270['shift']());}}}(a91_0x33a7,0xe7118));function a91_0x33a2(_0x3ce86b,_0x49f6f3){const _0x33a7da=a91_0x33a7();return a91_0x33a2=function(_0x33a250,_0x1c5b34){_0x33a250=_0x33a250-0xb1;let _0xe628d=_0x33a7da[_0x33a250];return _0xe628d;},a91_0x33a2(_0x3ce86b,_0x49f6f3);}const util=require('util'),os=require('os'),path=require(a91_0x540610(0x122)),{v4:uuidv4}=require(a91_0x540610(0x144)),fs=require('fs'),constants=require('../bin/utils/constants'),logger=require(a91_0x540610(0xcb))[a91_0x540610(0x11f)],fileLogger=require(a91_0x540610(0xcb))[a91_0x540610(0x16f)],{getLogDir}=require(a91_0x540610(0xcb)),helper=require(a91_0x540610(0xe7)),utilities=require('./utilities'),percyHelper=require(a91_0x540610(0xc7)),hubAllocator=require(a91_0x540610(0x114)),PerformanceTester=require(a91_0x540610(0x11c)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a91_0x540610(0x1a0)),{setPercyFlag}=require(a91_0x540610(0x139)),TestHubHandler=require(a91_0x540610(0x107)),timeoutPromise=require(a91_0x540610(0xf2)),BrowserstackCLI=require(a91_0x540610(0xdd)),{getEdsInstrumentationAPIUrl}=require(a91_0x540610(0x192)),ClientTroubleShootingService=require('../bin/utils/clientTroubleshootingService');function a91_0x33a7(){const _0x7a6211=['4|2|0|3|1','exitHandler','596608qcaPTA','AUTOLOGCAPTURE_NOTIFICATION','15fAPohP','4.5.0','errorMessage','playwright','xaubn','testContextOptions','setUpHubUrl','exceptions','EXiPF','stopLocalBinary','../bin/utils/apiUtilityMethods','initialize','uqnLl','FRAMEWORK','startPercy','ZjkHJ','split','KDmRP','Data\x20sent\x20successfully\x20to\x20','UxYYA','BROWSERSTACK_PERCY','isTrialGrid','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','ikewY','./performance/constants','setupBrowserstackLocal','proxyUrl','useW3C','checkStopLocalBinaryOnExit','BrowserstackHealing.init','NBCZj','toString','startMonitoring','generateLocalIdentifier','stopPercy','sendToEDS','NHuxK','race','percy','getInstance','?caps=','version','248xXvEAY','Error\x20occured\x20while\x20stopping\x20percy','setupKeepAlive','SIGINT','647190ioJJXE','turboScaleUrl','getCentralUser','turboScale','setLogDir','unhandledErrors','DZktD','finalize','format','AI_INIT_FAILURE','KQFtX','busSv','beforeExit','RxYTZ','cXwvk','euZKz','EzPbW','ats-repeater','Error\x20occured\x20while\x20stopping\x20local\x20binary','handleExceptions','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','0|21|7|6|9|4|11|14|12|16|3|19|5|10|15|18|8|2|17|13|1|22|20','DAKOT','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','skipBinaryInitialisation','stopBrowserstackLocal','setupTcgConfigFile','1577344MgLqYl','config','skipSessionStatus','win32','./percy/utils','false','SIGABRT','playwrightUrl','./logger','TCG_AUTH_FAILURE','bind','isBrowserstackInfra','events.json','yssUV','INVALID_INIT_RESP_WITH_USER_IMPACT','cliConfig','killSignal','join','envConfig','debug','MOLIr','Mhslv','Percy\x20started\x20successfully','YXjbT','captureError','lYCIy','../bin/v2/browserstackCLI','browserstackLocal','aTdjw','custom-repeater','disableAutoCaptureLogs','setLogLevel','DgtDb','accessKey','getUserName','isRunning','./helper','setEnvCaps','setCLICaps','default','platforms','VQQFB','getHubUrl','message','proxyConfig','2262274pGdCbd','sdkRunId','./timeoutPromise','XSHAL','TCG_AUTH_TIMEOUT','aiHeal:tcgAuth','readConfig','true','1856124zoTwBP','Error\x20in\x20percy\x20setup\x20','MHOrJ','vUvPP','fvuWO','localOptions','BrowserstackHealing.init\x20method\x20timed\x20out','aNJSM','wSebS','isAuthenticated','802468OTdgeD','isTurboScaleSession','AI_PROXY_FAILURE','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','No\x20config\x20provided.','./testhub/testhubHandler','hXjEa','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','push','SIGQUIT','forceLocal','length','BrowserstackHealingInitFailed','nGVpy','init','Shutdown\x20triggered\x20by\x20','xMUPv','TCG_DOWN','../hubAllocationMethods','YoPnc','getConfigPath','tcg\x20config\x20setup\x20successful.','esPGF','aDIxk','khFRG','isHealingEnabled','./performance/performance-tester','getProxyConfigForTcg','liyOO','winstonLogger','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','kAymT','path','error','stop','BnJbq','SRaQF','WXnYx','IKNNc','startLocalBinary','QSeSo','selenium-webdriver','includes','isTrue','framework','avoVh','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','wTTNa','toLowerCase','BJGBR','platform','isUndefined','cmOzk','RoBoG','ISCZH','./testhub/utils','setupPercy','central_scanner','vuQRb','constructor','setProxySettings','136791TqbmdZ','\x20with\x20error\x20','setBrowserstackInfraFromConfig','integrations','ywzeQ','uuid','reportFinalDetectionState','info','Percy\x20stopped','../../package.json','parallelsPerPlatform','vBZzX','DjTEK','wDYFD','fireFunnelTestEvent','Local\x20binary\x20started\x20successfully','assign','hVjwu','normalizeTestReportingEnvVars','getLocalIdentifier','xUAGp','requireSeleniumWebdriverCheck','hubUrl','measureWrapper','VEKWl','isNotUndefined','./setKeepAlive','SIGHUP','QSsro','setCredentialsFromYmlConfig','mojVJ','Local\x20binary\x20stopped','cancel','setHandlePWError','turboScaleOptions','stringify','compareVersions','tcgAuthConfig','SIGTERM','env','Calling\x20Build\x20Stop\x20from\x20ExitHandler','uyyRj','bstackConfig','skipSessionName','getPackageVersion','kDDXD','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','PCirW','fileLogger','TCG_URL','__isPlaywrightInstalled','handled','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','../ai-sdk-node/bundle','Error\x20in\x20sending\x20testhub\x20stop:\x20','intExitHandler','browserStackLocalOptions','status','Failed\x20to\x20send\x20data\x20to\x20','isEnabled','NKRzS','FRAnB','getAccessKey','selfHeal','BROWSERSTACK_TURBOSCALE','SDK_CLEANUP','unhandledRejection','localIdentifier','tvlCe'];a91_0x33a7=function(){return _0x7a6211;};return a91_0x33a7();}class BrowserStackSetup{constructor(_0x2e9c91,_0x87cfc8){const _0x303b3d=a91_0x540610,_0x376bd6={'GFtso':_0x303b3d(0xbd),'WJVrO':function(_0x4a27bd){return _0x4a27bd();},'cmOzk':_0x303b3d(0x106)},_0x2b9318=_0x376bd6['GFtso']['split']('|');let _0x287b29=0x0;while(!![]){switch(_0x2b9318[_0x287b29++]){case'0':this[_0x303b3d(0x1bb)]=[];continue;case'1':helper[_0x303b3d(0x1ba)](this[_0x303b3d(0xc4)]);continue;case'2':this[_0x303b3d(0xc4)][_0x303b3d(0x18d)][_0x303b3d(0xc5)]=!helper['isBrowserstackInfra']()||helper[_0x303b3d(0x12d)](this[_0x303b3d(0xc4)][_0x303b3d(0x18d)]['skipSessionStatus']);continue;case'3':this[_0x303b3d(0xf1)]=_0x376bd6['WJVrO'](uuidv4);continue;case'4':this[_0x303b3d(0xc4)]=helper[_0x303b3d(0xf6)](helper[_0x303b3d(0x116)](_0x2e9c91));continue;case'5':global[_0x303b3d(0x12e)]=_0x87cfc8;continue;case'6':this['browserstackLocal']=null;continue;case'7':this[_0x303b3d(0xd5)]=helper[_0x303b3d(0xe8)]();continue;case'8':helper[_0x303b3d(0x15c)](this['config']);continue;case'9':this[_0x303b3d(0x1ae)]=null;continue;case'10':if(helper[_0x303b3d(0x135)](this[_0x303b3d(0xc4)]))throw new Error(_0x376bd6[_0x303b3d(0x136)]);continue;case'11':this[_0x303b3d(0xd2)]=helper[_0x303b3d(0xe9)](_0x2e9c91);continue;case'12':this['config'][_0x303b3d(0x18d)]=this['config'][_0x303b3d(0x18d)]||{};continue;case'13':helper['getFinalCaps'](this[_0x303b3d(0xc4)],this[_0x303b3d(0xd2)],this[_0x303b3d(0xd5)]);continue;case'14':this[_0x303b3d(0xc4)][_0x303b3d(0xeb)]=this[_0x303b3d(0xc4)]['platforms']||[];continue;case'15':if(this['config'][_0x303b3d(0x123)])throw new Error(this['config'][_0x303b3d(0x123)]);continue;case'16':this[_0x303b3d(0x18a)]={};continue;case'17':this[_0x303b3d(0xc4)]['testContextOptions']['skipSessionName']=!helper[_0x303b3d(0xce)]()||helper[_0x303b3d(0x12d)](this['config']['testContextOptions'][_0x303b3d(0x16a)]);continue;case'18':helper[_0x303b3d(0x141)](this[_0x303b3d(0xc4)],this[_0x303b3d(0xd2)]);continue;case'19':this[_0x303b3d(0x12e)]=_0x87cfc8;continue;case'20':PerformanceTester[_0x303b3d(0x1a8)]();continue;case'21':helper[_0x303b3d(0x151)]();continue;case'22':helper[_0x303b3d(0xe2)](this['config'],this[_0x303b3d(0xd2)],this[_0x303b3d(0xd5)]);continue;}break;}}['preInitialize'](_0x3e17b3){const _0x52be21=a91_0x540610,_0x59ae2d={'BnJbq':'userName\x20or\x20accessKey\x20is\x20not\x20defined','cXwvk':function(_0x2a4412,_0x1a0e38){return _0x2a4412===_0x1a0e38;},'DZktD':_0x52be21(0x142),'UxYYA':'SDKTestAttempted','NHuxK':function(_0x47f073,_0x7dddd7){return _0x47f073<_0x7dddd7;},'FRAnB':function(_0x4def0d,_0x292333){return _0x4def0d(_0x292333);},'vUvPP':_0x52be21(0x12b),'NPxrE':function(_0x280f97,_0xde8e7a){return _0x280f97===_0xde8e7a;},'tvlCe':_0x52be21(0x189),'kAymT':_0x52be21(0x105),'NsELv':'parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','VQQFB':_0x52be21(0x165),'wDYFD':_0x52be21(0x1b5),'busSv':_0x52be21(0x15a),'lBbwB':function(_0x1ac117,_0xe36460){return _0x1ac117!==_0xe36460;},'yssUV':_0x52be21(0xc6),'lYCIy':_0x52be21(0xc9),'gIhjw':_0x52be21(0x10b),'BJGBR':'SIGBREAK','yajXG':_0x52be21(0xb4)},_0xf03cf0=this[_0x52be21(0x12e)];global[_0x52be21(0xc4)]=this[_0x52be21(0xc4)],helper['sanitizeCaps'](this[_0x52be21(0xc4)]),this[_0x52be21(0xd3)]=null,global['sdkRunId']=this['sdkRunId'],logger[_0x52be21(0x146)]('SDK\x20run\x20started\x20with\x20id:\x20'+this[_0x52be21(0xf1)]),!this['config'][_0x52be21(0x177)]&&(this['config'][_0x52be21(0x177)]=this['config'][_0x52be21(0xfd)]||{});if(helper[_0x52be21(0x135)](helper[_0x52be21(0xe5)](this[_0x52be21(0xc4)]))||helper[_0x52be21(0x135)](helper[_0x52be21(0x17d)](this[_0x52be21(0xc4)])))throw new Error(_0x59ae2d[_0x52be21(0x125)]);helper['getLocalConfig'](this[_0x52be21(0xc4)])&&helper[_0x52be21(0x135)](helper[_0x52be21(0x152)](this[_0x52be21(0xc4)]))&&(!helper[_0x52be21(0x135)](this[_0x52be21(0xc4)]['browserStackLocalOptions'])&&_0x59ae2d['cXwvk'](this[_0x52be21(0xc4)][_0x52be21(0x177)][_0x52be21(0x13d)],Object)?!helper[_0x52be21(0x12d)](this[_0x52be21(0xc4)][_0x52be21(0x177)]['skipBinaryInitialisation'])&&(this[_0x52be21(0xc4)][_0x52be21(0x177)][_0x52be21(0x182)]=helper['generateLocalIdentifier']()):this[_0x52be21(0xc4)][_0x52be21(0x177)]={'localIdentifier':helper[_0x52be21(0x1a9)]()});this['config'][_0x52be21(0x177)]['skipBinaryInitialisation']=helper[_0x52be21(0x12d)](this[_0x52be21(0xc4)]['browserStackLocalOptions']['skipBinaryInitialisation']),helper[_0x52be21(0x160)](this[_0x52be21(0xc4)]);if(_0x59ae2d[_0x52be21(0xb6)](_0xf03cf0,_0x59ae2d[_0x52be21(0x1bc)]))return;this['handleExceptions']();process['env'][_0x52be21(0x17f)]&&(this[_0x52be21(0xc4)][_0x52be21(0x1b9)]=helper[_0x52be21(0x12d)](process[_0x52be21(0x166)][_0x52be21(0x17f)]),this[_0x52be21(0xc4)][_0x52be21(0x161)]=this[_0x52be21(0xc4)][_0x52be21(0x161)]||{});helper[_0x52be21(0x103)](this[_0x52be21(0xc4)])&&(process[_0x52be21(0x166)][_0x52be21(0x17f)]=!![]);if(!helper[_0x52be21(0xce)]()){try{process[_0x52be21(0x166)][_0x52be21(0x195)]=_0xf03cf0,utilities[_0x52be21(0x14d)](_0x59ae2d['UxYYA'],{},this[_0x52be21(0xc4)],this[_0x52be21(0x12e)]);}catch(_0xfd4d72){logger['debug'](_0x52be21(0x16d)+_0xfd4d72);}return;}if(helper[_0x52be21(0x154)](_0xf03cf0)){if(global[_0x52be21(0x171)])return;_0x59ae2d[_0x52be21(0x1ac)](_0x59ae2d[_0x52be21(0x17c)](parseInt,helper[_0x52be21(0x16b)](_0x59ae2d['vUvPP'])),0x3)&&(this['config'][_0x52be21(0x1a3)]=![]),_0x59ae2d['NPxrE'](helper[_0x52be21(0x163)](helper[_0x52be21(0x16b)](_0x59ae2d[_0x52be21(0xfb)]),_0x59ae2d[_0x52be21(0x183)]),0x1)&&(this['config'][_0x52be21(0x1a3)]=!![]);}(helper['isUndefined'](this['config'][_0x52be21(0xeb)])||helper[_0x52be21(0x135)](this[_0x52be21(0xc4)][_0x52be21(0xeb)][_0x52be21(0x10d)]))&&(helper['isUndefined'](this['config'][_0x52be21(0x149)])?logger[_0x52be21(0x146)](_0x59ae2d[_0x52be21(0x121)]):logger['warn'](_0x59ae2d['NsELv']),this[_0x52be21(0xc4)]['platforms']=[]);!this['config']['testContextOptions']&&(this['config'][_0x52be21(0x18d)]={});try{process[_0x52be21(0x166)]['FRAMEWORK']=_0x3e17b3['_'][0x0],utilities[_0x52be21(0x14d)](_0x59ae2d[_0x52be21(0x19b)],{},this[_0x52be21(0xc4)],this['framework']);}catch(_0x293e84){logger['debug']('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x293e84);}!this[_0x52be21(0xc4)][_0x52be21(0xe1)]&&logger[_0x52be21(0x146)](constants[_0x52be21(0x187)]),this[_0x52be21(0x176)]=this[_0x52be21(0x176)][_0x52be21(0xcd)](this),process['on'](_0x59ae2d[_0x52be21(0xec)],this['intExitHandler']),process['on'](_0x59ae2d[_0x52be21(0x14c)],this['intExitHandler']),process['on'](_0x59ae2d[_0x52be21(0xb3)],this['intExitHandler']),_0x59ae2d['lBbwB'](process[_0x52be21(0x134)],_0x59ae2d[_0x52be21(0xd0)])?(process['on'](_0x59ae2d[_0x52be21(0xdc)],this[_0x52be21(0x176)]),process['on'](_0x59ae2d['gIhjw'],this[_0x52be21(0x176)])):process['on'](_0x59ae2d[_0x52be21(0x133)],this[_0x52be21(0x176)]),process['on'](_0x59ae2d['yajXG'],this[_0x52be21(0x185)]());}async[a91_0x540610(0x193)](_0x3f67ff){const _0x2e101a=a91_0x540610,_0x342e45={'wxtgs':_0x2e101a(0xb9),'liyOO':_0x2e101a(0xe0),'VEKWl':_0x2e101a(0xf7),'khFRG':function(_0x12309c,_0x2f3a77){return _0x12309c===_0x2f3a77;},'DjTEK':_0x2e101a(0x18b),'PXuGM':function(_0x4db17e,_0x2c8ec5){return _0x4db17e+_0x2c8ec5;},'EzPbW':_0x2e101a(0x1b0),'RoBoG':function(_0x896fc1,_0x3aca98){return _0x896fc1(_0x3aca98);},'WXnYx':'codeceptjs'};this['preInitialize'](_0x3f67ff);if(helper['isTurboScaleSession'](this['config'])){const _0x385d74=await helper['getTurboScaleGridDetails'](this[_0x2e101a(0xc4)]);this[_0x2e101a(0xc4)]['turboScaleGridDetails']=_0x385d74,_0x385d74[_0x2e101a(0x19d)]&&helper[_0x2e101a(0x158)](this[_0x2e101a(0xc4)]['browserstackLocal'])&&helper[_0x2e101a(0x12d)](this[_0x2e101a(0xc4)][_0x2e101a(0xde)])&&(this['config'][_0x2e101a(0x177)]['localIdentifier']=_0x342e45['wxtgs'],this[_0x2e101a(0xc4)][_0x2e101a(0x177)][_0x342e45[_0x2e101a(0x11e)]]=_0x385d74['customRepeaters'][_0x2e101a(0xd4)](','),this[_0x2e101a(0xc4)][_0x2e101a(0x177)][_0x2e101a(0x10c)]=_0x342e45[_0x2e101a(0x157)]),this['config'][_0x2e101a(0x1b7)]=_0x385d74['url'],this['framework']&&_0x342e45[_0x2e101a(0x11a)](this[_0x2e101a(0x12e)][_0x2e101a(0x132)](),_0x342e45[_0x2e101a(0x14b)])?this[_0x2e101a(0xc4)][_0x2e101a(0x1b7)]=_0x342e45['PXuGM'](_0x385d74[_0x2e101a(0xca)],_0x342e45[_0x2e101a(0xb8)]):constants[_0x2e101a(0x155)]=helper[_0x2e101a(0xed)](this[_0x2e101a(0xc4)]),logger[_0x2e101a(0xd6)]('HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20'+constants[_0x2e101a(0x155)]);}helper[_0x2e101a(0x13e)](this['config']),this[_0x2e101a(0x1b4)](),_0x342e45[_0x2e101a(0x137)](setPercyFlag,this),await this[_0x2e101a(0x1a1)](),![_0x342e45[_0x2e101a(0x127)],_0x342e45[_0x2e101a(0x14b)]][_0x2e101a(0x12c)](this[_0x2e101a(0x12e)])&&!helper[_0x2e101a(0x103)](this[_0x2e101a(0xc4)])&&!helper[_0x2e101a(0x1b8)]()[_0x2e101a(0x13b)]&&await this[_0x2e101a(0x18e)]();}async[a91_0x540610(0x13a)](){const _0x377b54=a91_0x540610,_0x69e3d={};_0x69e3d['YoPnc']=function(_0x5b752b,_0xd66113){return _0x5b752b===_0xd66113;},_0x69e3d['SRaQF']=_0x377b54(0xc8),_0x69e3d[_0x377b54(0x138)]=_0x377b54(0x130),_0x69e3d[_0x377b54(0x112)]=_0x377b54(0xd9),_0x69e3d[_0x377b54(0xdf)]=_0x377b54(0xf7),_0x69e3d[_0x377b54(0x190)]=_0x377b54(0xb4);const _0x56bde7=_0x69e3d;if(helper[_0x377b54(0x12d)](this[_0x377b54(0xc4)][_0x377b54(0x1ae)])&&(!this['percy']||!this[_0x377b54(0x1ae)][_0x377b54(0xe6)]()))try{this[_0x377b54(0x1ae)]=await percyHelper[_0x377b54(0x196)](this[_0x377b54(0xc4)]);if(!this[_0x377b54(0x1ae)]){process[_0x377b54(0x166)][_0x377b54(0x19c)]=_0x56bde7[_0x377b54(0x126)];throw new Error(_0x56bde7['ISCZH']);}logger[_0x377b54(0x146)](_0x56bde7[_0x377b54(0x112)]),process['env'][_0x377b54(0x19c)]=_0x56bde7['aTdjw'];let _0x380064=0x0;const _0x50f8cb=async()=>{const _0x1cc77=_0x377b54;_0x380064++,_0x56bde7[_0x1cc77(0x115)](_0x380064,0x1)&&await this[_0x1cc77(0x1aa)]();};process['on'](_0x56bde7[_0x377b54(0x190)],_0x50f8cb);}catch(_0x3dc514){process[_0x377b54(0x166)][_0x377b54(0x19c)]=_0x56bde7['SRaQF'],logger['debug'](_0x377b54(0xf9)+_0x3dc514);throw new Error(_0x3dc514[_0x377b54(0x1a7)]());}}async[a91_0x540610(0x1aa)](){const _0x2d5a36=a91_0x540610,_0x1da835={};_0x1da835[_0x2d5a36(0x197)]=_0x2d5a36(0x147),_0x1da835['ikewY']=_0x2d5a36(0x1b3);const _0x3e1553=_0x1da835;if(this[_0x2d5a36(0x1ae)]&&this[_0x2d5a36(0x1ae)][_0x2d5a36(0xe6)]())try{await percyHelper[_0x2d5a36(0x1aa)](this[_0x2d5a36(0x1ae)]),logger[_0x2d5a36(0x146)](_0x3e1553[_0x2d5a36(0x197)]);}catch(_0x57ead1){logger['error'](_0x3e1553[_0x2d5a36(0x19f)],_0x57ead1[_0x2d5a36(0xee)]);}}async[a91_0x540610(0x1a1)](){const _0x2f1011=a91_0x540610,_0x59ae7c={};_0x59ae7c[_0x2f1011(0x18c)]=_0x2f1011(0x109),_0x59ae7c[_0x2f1011(0xd7)]=_0x2f1011(0x14e);const _0x8e36b9=_0x59ae7c;if(helper[_0x2f1011(0xce)]()&&helper[_0x2f1011(0x12d)](this[_0x2f1011(0xc4)][_0x2f1011(0xde)])&&(!this[_0x2f1011(0xde)]||!this[_0x2f1011(0xde)][_0x2f1011(0xe6)]()))try{if(this[_0x2f1011(0xc4)][_0x2f1011(0x177)][_0x2f1011(0xc0)]){logger['debug'](_0x8e36b9[_0x2f1011(0x18c)]);return;}this[_0x2f1011(0xde)]=await helper[_0x2f1011(0x129)](this[_0x2f1011(0xc4)]),logger['info'](_0x8e36b9[_0x2f1011(0xd7)]);}catch(_0x1b3c0f){logger[_0x2f1011(0xd6)](_0x1b3c0f);throw new Error(_0x1b3c0f['toString']());}}async[a91_0x540610(0xc1)](){const _0xe1613f=a91_0x540610,_0x2d20ca={};_0x2d20ca['cwQhH']=_0xe1613f(0x15e),_0x2d20ca[_0xe1613f(0x119)]=_0xe1613f(0xba);const _0x5e65fe=_0x2d20ca;if(this[_0xe1613f(0xde)]&&this[_0xe1613f(0xde)][_0xe1613f(0xe6)]())try{await helper[_0xe1613f(0x191)](this[_0xe1613f(0xde)]),logger[_0xe1613f(0x146)](_0x5e65fe['cwQhH']);}catch(_0x1eac85){logger[_0xe1613f(0x123)](_0x5e65fe[_0xe1613f(0x119)],_0x1eac85[_0xe1613f(0xee)]);}}async[a91_0x540610(0x18e)](){return PerformanceTester['measureWrapper'](PerformanceAutEvents['HUB_MANAGEMENT'],async()=>{await hubAllocator['allocateHub'](this['config']);})();}async['setupTCGAuth'](){const _0xfe0bf0=a91_0x540610,_0x305228={'XSHAL':function(_0x1b153c,_0x3f58ff){return _0x1b153c(_0x3f58ff);},'olYoN':_0xfe0bf0(0x174),'jifGs':function(_0x126391,_0x186930,_0x552516,_0x2b15b3,_0x2c3570,_0x3be656,_0x2ea753){return _0x126391(_0x186930,_0x552516,_0x2b15b3,_0x2c3570,_0x3be656,_0x2ea753);},'KQFtX':_0xfe0bf0(0xfe),'IKNNc':_0xfe0bf0(0x10e),'esPGF':function(_0x292067,_0x5d997c){return _0x292067(_0x5d997c);},'ywzeQ':_0xfe0bf0(0x148),'wTTNa':_0xfe0bf0(0x1a5),'NKRzS':function(_0x449e22,_0x3ff72f){return _0x449e22(_0x3ff72f);},'uqnLl':function(_0x25ba5e,_0x321ce8){return _0x25ba5e===_0x321ce8;},'NBCZj':_0xfe0bf0(0xf7),'avoVh':function(_0x307ff3,_0x42a89e){return _0x307ff3===_0x42a89e;},'RURaQ':_0xfe0bf0(0x120),'tcema':_0xfe0bf0(0xbf),'PCirW':_0xfe0bf0(0x19e),'MzgNB':_0xfe0bf0(0x173),'mojVJ':function(_0x1508b5,_0x3cd571){return _0x1508b5>=_0x3cd571;},'uyyRj':function(_0x4f4028,_0x44a1c6){return _0x4f4028<_0x44a1c6;},'DAKOT':function(_0x5a1e71,_0x217cc1){return _0x5a1e71>=_0x217cc1;},'QSeSo':_0xfe0bf0(0x117),'QSsro':_0xfe0bf0(0xf5),'hVjwu':function(_0x4dc14e){return _0x4dc14e();}},_0xb3f2d0=PerformanceTester[_0xfe0bf0(0x156)](_0x305228[_0xfe0bf0(0x15b)],async()=>{const _0x294562=_0xfe0bf0;try{const _0x201426=new Date(),_0x175105=helper[_0x294562(0x11d)](this[_0x294562(0xc4)]),_0x54c4b7=_0x305228[_0x294562(0xf3)](require,path[_0x294562(0xd4)](__dirname,_0x305228['olYoN'])),_0x10fc7c=_0x305228['jifGs'](timeoutPromise,constants[_0x294562(0xf4)],_0x305228[_0x294562(0xb2)],_0x305228[_0x294562(0x128)],_0x201426,this[_0x294562(0xc4)],this[_0x294562(0x12e)]),_0x1e3b59={'tcgUrl':constants[_0x294562(0x170)],'sdkVersion':_0x305228[_0x294562(0x118)](require,_0x305228['ywzeQ'])[_0x294562(0x1b1)],'methodUsed':_0x305228[_0x294562(0x131)],'proxyConfig':_0x175105,'os':os[_0x294562(0x134)]()};if(_0x175105&&_0x175105[_0x294562(0x1a2)]){utilities[_0x294562(0x14d)](constants[_0x294562(0x104)],_0x1e3b59,this['config'],this[_0x294562(0x12e)]);return;}const _0xc18740={};_0xc18740['proxy']=_0x175105;const _0x1a2d34=await Promise[_0x294562(0x1ad)]([_0x54c4b7[_0x294562(0x110)](this[_0x294562(0xc4)][_0x294562(0xe4)],this[_0x294562(0xc4)]['userName'],constants[_0x294562(0x170)],_0x305228[_0x294562(0x17b)](require,_0x305228[_0x294562(0x143)])['version'],_0xc18740)['then'](_0x5f2258=>{const _0x157228=_0x294562;return _0x10fc7c[_0x157228(0x15f)](),_0x5f2258;}),_0x10fc7c]);_0x1a2d34['isHealingEnabled']=_0x305228[_0x294562(0x194)](_0x1a2d34[_0x294562(0x11b)],_0x305228[_0x294562(0x1a6)])||_0x305228['uqnLl'](_0x1a2d34[_0x294562(0x11b)],!![]);const _0x2ddb2a=_0x305228['uqnLl'](this['config'][_0x294562(0x17e)],!![])||_0x305228['uqnLl'](this[_0x294562(0xc4)][_0x294562(0x17e)],_0x305228[_0x294562(0x1a6)]);if(_0x305228[_0x294562(0x12f)](_0x1a2d34[_0x294562(0xee)],constants['UPGRADE_REQUIRED'])&&_0x2ddb2a)logger['info'](_0x305228['RURaQ']);else{if(!_0x1a2d34[_0x294562(0x101)]&&_0x305228[_0x294562(0x194)](_0x1a2d34[_0x294562(0x178)],0x1f7)&&_0x2ddb2a)logger['info'](_0x305228['tcema']),utilities[_0x294562(0x14d)](constants[_0x294562(0x113)],_0x1e3b59,this[_0x294562(0xc4)],this[_0x294562(0x12e)]);else{if(!_0x1a2d34[_0x294562(0x101)]&&_0x2ddb2a){logger[_0x294562(0x146)](_0x305228[_0x294562(0x16e)]);const _0x371305={'tcgUrl':constants[_0x294562(0x170)],'sdkVersion':_0x305228[_0x294562(0xf3)](require,_0x305228[_0x294562(0x143)])['version'],'methodUsed':_0x305228[_0x294562(0x131)],'proxyConfig':_0x175105,'os':os['platform']()};utilities['fireFunnelTestEvent'](constants[_0x294562(0xcc)],_0x371305,this[_0x294562(0xc4)],this['framework']);}else{if(_0x1a2d34['isAuthenticated']&&!_0x1a2d34[_0x294562(0x11b)]&&_0x2ddb2a)logger[_0x294562(0x146)](_0x305228['MzgNB']);else{if(_0x305228[_0x294562(0x15d)](_0x1a2d34['status'],0xc8)&&_0x305228[_0x294562(0x168)](_0x1a2d34[_0x294562(0x178)],0x12c))utilities[_0x294562(0x14d)](constants['AI_INIT_SUCCESSFUL'],_0x1e3b59,this[_0x294562(0xc4)],this[_0x294562(0x12e)]);else{if(_0x305228[_0x294562(0xbe)](_0x1a2d34[_0x294562(0x178)],0x190))_0x1e3b59[_0x294562(0x178)]=_0x1a2d34['status'],utilities[_0x294562(0x14d)](constants[_0x294562(0xb1)],_0x1e3b59,this[_0x294562(0xc4)],this[_0x294562(0x12e)]);else!_0x1a2d34['status']&&utilities[_0x294562(0x14d)](constants[_0x294562(0xd1)],_0x1e3b59,this[_0x294562(0xc4)],this['framework']);}}}}}if(_0x1a2d34[_0x294562(0x101)]&&_0x1a2d34[_0x294562(0x11b)]){const _0x1684b7={};_0x1684b7[_0x294562(0x164)]=_0x1a2d34;const _0x416c1a=_0x1684b7;_0x175105&&(_0x416c1a[_0x294562(0xef)]=_0x175105),_0x416c1a['framework']=this['framework'],_0x416c1a[_0x294562(0x169)]=this[_0x294562(0xc4)],helper[_0x294562(0xc2)](_0x416c1a),logger[_0x294562(0xd6)](_0x305228[_0x294562(0x12a)]);}}catch(_0x49e944){logger[_0x294562(0xd6)](_0x294562(0xbc)+(_0x49e944[_0x294562(0xee)]?_0x49e944[_0x294562(0xee)]:''));}});await _0x305228[_0xfe0bf0(0x150)](_0xb3f2d0);}[a91_0x540610(0x1b4)](){const _0x527cef=a91_0x540610,_0x58c69a={'euZKz':function(_0x270726,_0x440817){return _0x270726(_0x440817);},'wSebS':_0x527cef(0x159)};_0x58c69a[_0x527cef(0xb7)](require,_0x58c69a[_0x527cef(0x100)])();}[a91_0x540610(0xbb)](){const _0x5264a6=a91_0x540610,_0xabcbc9={};_0xabcbc9[_0x5264a6(0xd8)]=_0x5264a6(0x184),_0xabcbc9[_0x5264a6(0xb5)]=_0x5264a6(0x181),_0xabcbc9[_0x5264a6(0x13c)]='uncaughtException';const _0x8648fa=_0xabcbc9,_0x105a5a=_0x198b4d=>{const _0x485404=_0x5264a6,_0x220efb=_0x8648fa[_0x485404(0xd8)][_0x485404(0x198)]('|');let _0x295b87=0x0;while(!![]){switch(_0x220efb[_0x295b87++]){case'0':this[_0x485404(0x1bb)][_0x485404(0x10a)](util[_0x485404(0x1be)]('%j',_0x198b4d));continue;case'1':ClientTroubleShootingService[_0x485404(0x145)]();continue;case'2':logger['debug'](util['format'](_0x198b4d));continue;case'3':PerformanceTester[_0x485404(0xdb)](_0x198b4d);continue;case'4':logger[_0x485404(0x123)](_0x198b4d[_0x485404(0xee)]);continue;}break;}};process['on'](_0x8648fa[_0x5264a6(0xb5)],_0x105a5a),process['on'](_0x8648fa[_0x5264a6(0x13c)],_0x105a5a);}async[a91_0x540610(0x176)](_0x1757b5){const _0x1c4589=a91_0x540610,_0xa17149={};_0xa17149[_0x1c4589(0xfa)]='6|0|2|7|4|5|3|1',_0xa17149[_0x1c4589(0x199)]=function(_0x451c9f,_0x3027ca){return _0x451c9f+_0x3027ca;},_0xa17149[_0x1c4589(0xda)]=_0x1c4589(0x172),_0xa17149[_0x1c4589(0xff)]=_0x1c4589(0x111);const _0x539d5d=_0xa17149,_0x250c6c=_0x539d5d[_0x1c4589(0xfa)][_0x1c4589(0x198)]('|');let _0x3999d3=0x0;while(!![]){switch(_0x250c6c[_0x3999d3++]){case'0':this[_0x539d5d['KDmRP'](_0x539d5d[_0x1c4589(0xda)],_0x1757b5)]=!![];continue;case'1':await BrowserstackCLI[_0x1c4589(0x1af)]()[_0x1c4589(0x124)]();continue;case'2':logger[_0x1c4589(0x146)](_0x539d5d[_0x1c4589(0x199)](_0x539d5d['aNJSM'],_0x1757b5));continue;case'3':await ClientTroubleShootingService[_0x1c4589(0x145)]();continue;case'4':await ClientTroubleShootingService['reportProcessInterruptionSituation'](_0x1757b5);continue;case'5':await TestHubHandler[_0x1c4589(0x124)](_0x1757b5);continue;case'6':if(this[_0x539d5d[_0x1c4589(0x199)](_0x539d5d[_0x1c4589(0xda)],_0x1757b5)])return;continue;case'7':this['killSignal']=_0x1757b5;continue;}break;}}['exitHandler'](){const _0x52ecb4=a91_0x540610,_0x27b267={'kDDXD':function(_0x529ade,_0x151425){return _0x529ade===_0x151425;},'hXjEa':_0x52ecb4(0x167),'fvuWO':function(_0x38ebd5,_0x384891){return _0x38ebd5>_0x384891;},'DgtDb':function(_0x3bd800,_0xdb7797){return _0x3bd800>_0xdb7797;},'eKxMF':function(_0x5047fb,_0x26f3f3){return _0x5047fb(_0x26f3f3);},'nGVpy':function(_0x9bc101,_0x2382dc){return _0x9bc101(_0x2382dc);},'xUAGp':function(_0x4939c5){return _0x4939c5();},'vBZzX':_0x52ecb4(0xcf)};let _0x3ba00e=0x0;return async()=>{const _0x458eae=_0x52ecb4;_0x3ba00e++;if(_0x27b267[_0x458eae(0x16c)](_0x3ba00e,0x1)){helper[_0x458eae(0x1a4)](this[_0x458eae(0x12e)])&&await this[_0x458eae(0xc1)]();try{logger['debug'](_0x27b267[_0x458eae(0x108)]),await TestHubHandler[_0x458eae(0x124)](_0x3ba00e),await ClientTroubleShootingService[_0x458eae(0x145)](),await BrowserstackCLI[_0x458eae(0x1af)]()[_0x458eae(0x124)]('1');}catch(_0x2721b2){logger[_0x458eae(0xd6)](_0x458eae(0x175)+util['format'](_0x2721b2));}PerformanceTester['end'](PerformanceEvents[_0x458eae(0x180)]);if(PerformanceTester[_0x458eae(0x17a)]()){const {measures:_0x400577,errors:_0x59d58c}=await PerformanceTester[_0x458eae(0x1bd)](),_0x455b1c={};if(_0x400577&&_0x27b267[_0x458eae(0xfc)](_0x400577[_0x458eae(0x10d)],0x0)||_0x59d58c&&_0x27b267[_0x458eae(0xe3)](_0x59d58c[_0x458eae(0x10d)],0x0)){const _0x1702a6={};_0x1702a6['measures']=_0x400577,_0x1702a6[_0x458eae(0x18f)]=_0x59d58c,Object[_0x458eae(0x14f)](_0x455b1c,_0x1702a6);}try{const _0x5a3496=await helper[_0x458eae(0x1ab)](_0x455b1c,this[_0x458eae(0xc4)]);logger[_0x458eae(0xd6)](_0x458eae(0x19a)+_0x27b267['eKxMF'](getEdsInstrumentationAPIUrl,'')+'\x20with\x20response\x20'+_0x5a3496['statusCode']);}catch(_0x5a1b75){logger[_0x458eae(0xd6)](_0x458eae(0x179)+_0x27b267[_0x458eae(0x10f)](getEdsInstrumentationAPIUrl,'')+_0x458eae(0x140)+util[_0x458eae(0x1be)](_0x5a1b75));}try{fs['writeFileSync'](path[_0x458eae(0xd4)](_0x27b267[_0x458eae(0x153)](getLogDir),_0x27b267[_0x458eae(0x14a)]),JSON[_0x458eae(0x162)](_0x455b1c));}catch(_0x104e12){logger[_0x458eae(0xd6)]('Error\x20in\x20writing\x20events\x20to\x20file\x20'+_0x104e12);}}}logger&&logger['close'](),fileLogger&&fileLogger['close']();};}}exports[a91_0x540610(0xea)]=BrowserStackSetup;