const a55_0x3cdf1f=a55_0x7a8a;(function(_0x516cbe,_0x31d4dd){const _0x3a444e=a55_0x7a8a,_0x20d570=_0x516cbe();while(!![]){try{const _0x46c0b8=parseInt(_0x3a444e(0x1ff))/0x1+parseInt(_0x3a444e(0x1ab))/0x2*(parseInt(_0x3a444e(0x22a))/0x3)+-parseInt(_0x3a444e(0x26f))/0x4+parseInt(_0x3a444e(0x275))/0x5+parseInt(_0x3a444e(0x230))/0x6*(parseInt(_0x3a444e(0x217))/0x7)+parseInt(_0x3a444e(0x27e))/0x8*(-parseInt(_0x3a444e(0x1d4))/0x9)+-parseInt(_0x3a444e(0x1fe))/0xa*(-parseInt(_0x3a444e(0x1cc))/0xb);if(_0x46c0b8===_0x31d4dd)break;else _0x20d570['push'](_0x20d570['shift']());}catch(_0x1b9d67){_0x20d570['push'](_0x20d570['shift']());}}}(a55_0x26f8,0x5f99b));const util=require(a55_0x3cdf1f(0x236)),os=require('os'),path=require(a55_0x3cdf1f(0x266)),{v4:uuidv4}=require(a55_0x3cdf1f(0x254)),fs=require('fs'),constants=require('../bin/utils/constants'),{isTurboScaleSession}=require(a55_0x3cdf1f(0x1b4)),logger=require('./logger')[a55_0x3cdf1f(0x267)],{getLogDir}=require(a55_0x3cdf1f(0x215)),helper=require(a55_0x3cdf1f(0x253)),utilities=require('./utilities'),percyHelper=require(a55_0x3cdf1f(0x279)),hubAllocator=require(a55_0x3cdf1f(0x252)),PerformanceTester=require(a55_0x3cdf1f(0x25a)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a55_0x3cdf1f(0x1f5)),{setPercyFlag}=require(a55_0x3cdf1f(0x211)),TestHubHandler=require(a55_0x3cdf1f(0x247)),timeoutPromise=require(a55_0x3cdf1f(0x1dd));function a55_0x7a8a(_0x2b8ce0,_0x2e3847){const _0x26f8ce=a55_0x26f8();return a55_0x7a8a=function(_0x7a8a18,_0x13ee90){_0x7a8a18=_0x7a8a18-0x1a3;let _0x5df150=_0x26f8ce[_0x7a8a18];return _0x5df150;},a55_0x7a8a(_0x2b8ce0,_0x2e3847);}class BrowserStackSetup{constructor(_0x22b8d5,_0x5cf206){const _0x38dac4=a55_0x3cdf1f,_0x3fa4aa={'nDXjG':_0x38dac4(0x1d3),'nssJC':function(_0x517ec7){return _0x517ec7();},'cdZaE':_0x38dac4(0x214)},_0x2da5e3=_0x3fa4aa[_0x38dac4(0x232)][_0x38dac4(0x1d2)]('|');let _0x2a0d88=0x0;while(!![]){switch(_0x2da5e3[_0x2a0d88++]){case'0':this[_0x38dac4(0x243)]=helper[_0x38dac4(0x1c3)](helper[_0x38dac4(0x1be)](_0x22b8d5));continue;case'1':this[_0x38dac4(0x274)]=null;continue;case'2':this[_0x38dac4(0x1b2)]=helper['setEnvCaps']();continue;case'3':this[_0x38dac4(0x243)][_0x38dac4(0x282)][_0x38dac4(0x27d)]=!helper[_0x38dac4(0x1ad)]()||helper[_0x38dac4(0x231)](this[_0x38dac4(0x243)]['testContextOptions'][_0x38dac4(0x27d)]);continue;case'4':this['config'][_0x38dac4(0x282)][_0x38dac4(0x1fb)]=!helper['isBrowserstackInfra']()||helper[_0x38dac4(0x231)](this[_0x38dac4(0x243)][_0x38dac4(0x282)][_0x38dac4(0x1fb)]);continue;case'5':if(this[_0x38dac4(0x243)][_0x38dac4(0x20e)])throw new Error(this[_0x38dac4(0x243)][_0x38dac4(0x20e)]);continue;case'6':this[_0x38dac4(0x243)][_0x38dac4(0x282)]=this[_0x38dac4(0x243)][_0x38dac4(0x282)]||{};continue;case'7':global[_0x38dac4(0x262)]=_0x5cf206;continue;case'8':this[_0x38dac4(0x1b5)]=null;continue;case'9':helper[_0x38dac4(0x1d6)](this['config']);continue;case'10':this[_0x38dac4(0x262)]=_0x5cf206;continue;case'11':this[_0x38dac4(0x1b8)]=_0x3fa4aa['nssJC'](uuidv4);continue;case'12':helper[_0x38dac4(0x255)](this[_0x38dac4(0x243)],this[_0x38dac4(0x1f8)],this[_0x38dac4(0x1b2)]);continue;case'13':if(helper[_0x38dac4(0x1b1)](this['config']))throw new Error(_0x3fa4aa[_0x38dac4(0x1f9)]);continue;case'14':this[_0x38dac4(0x243)]['platforms']=this[_0x38dac4(0x243)][_0x38dac4(0x1cf)]||[];continue;case'15':this['errorMessage']={};continue;case'16':this[_0x38dac4(0x1f8)]=helper['setCLICaps'](_0x22b8d5);continue;case'17':helper[_0x38dac4(0x25b)](this[_0x38dac4(0x243)],this[_0x38dac4(0x1f8)]);continue;case'18':PerformanceTester[_0x38dac4(0x257)]();continue;case'19':this[_0x38dac4(0x248)]=[];continue;case'20':helper[_0x38dac4(0x22e)](this[_0x38dac4(0x243)],this[_0x38dac4(0x1f8)],this[_0x38dac4(0x1b2)]);continue;}break;}}['preInitialize'](_0x41de49){const _0x57a9b8=a55_0x3cdf1f,_0x594062={'oipex':'userName\x20or\x20accessKey\x20is\x20not\x20defined','psSfd':function(_0x34bd19,_0x159c32){return _0x34bd19===_0x159c32;},'zmsNC':_0x57a9b8(0x1dc),'PVfhz':_0x57a9b8(0x225),'BdSzR':function(_0x54fb2e,_0x5e68c1){return _0x54fb2e<_0x5e68c1;},'XlvcN':function(_0x41b37a,_0x514622){return _0x41b37a(_0x514622);},'aHoPw':_0x57a9b8(0x280),'SNLov':'4.5.0','WyFJW':_0x57a9b8(0x1e7),'faahE':_0x57a9b8(0x1e9),'bXVMI':'SIGTERM','tybRx':_0x57a9b8(0x21f),'WXKQX':_0x57a9b8(0x284),'pLHkD':function(_0x5340aa,_0x444cd1){return _0x5340aa!==_0x444cd1;},'NiPxU':_0x57a9b8(0x265),'aSLKv':'SIGABRT','IKpUx':_0x57a9b8(0x25c),'KZwfB':'SIGBREAK','PAcxo':'beforeExit'},_0x38854b=this['framework'];global[_0x57a9b8(0x243)]=this[_0x57a9b8(0x243)],helper['sanitizeCaps'](this['config']),this[_0x57a9b8(0x1b0)]=null,global[_0x57a9b8(0x1b8)]=this['sdkRunId'],logger[_0x57a9b8(0x237)](_0x57a9b8(0x218)+this[_0x57a9b8(0x1b8)]),!this[_0x57a9b8(0x243)][_0x57a9b8(0x241)]&&(this[_0x57a9b8(0x243)][_0x57a9b8(0x241)]=this[_0x57a9b8(0x243)]['localOptions']||{});if(helper['isUndefined'](helper[_0x57a9b8(0x23e)](this[_0x57a9b8(0x243)]))||helper['isUndefined'](helper[_0x57a9b8(0x242)](this['config'])))throw new Error(_0x594062['oipex']);helper['getLocalConfig'](this[_0x57a9b8(0x243)])&&helper[_0x57a9b8(0x1b1)](helper['getLocalIdentifier'](this['config']))&&(!helper[_0x57a9b8(0x1b1)](this['config']['browserStackLocalOptions'])&&_0x594062[_0x57a9b8(0x1fa)](this[_0x57a9b8(0x243)][_0x57a9b8(0x241)]['constructor'],Object)?!helper['isTrue'](this[_0x57a9b8(0x243)][_0x57a9b8(0x241)][_0x57a9b8(0x1a9)])&&(this[_0x57a9b8(0x243)][_0x57a9b8(0x241)]['localIdentifier']=helper['generateLocalIdentifier']()):this['config'][_0x57a9b8(0x241)]={'localIdentifier':helper[_0x57a9b8(0x1d1)]()});this[_0x57a9b8(0x243)][_0x57a9b8(0x241)][_0x57a9b8(0x1a9)]=helper[_0x57a9b8(0x231)](this[_0x57a9b8(0x243)][_0x57a9b8(0x241)]['skipBinaryInitialisation']),helper[_0x57a9b8(0x1b9)](this[_0x57a9b8(0x243)]);if(_0x594062['psSfd'](_0x38854b,_0x594062['zmsNC']))return;this['handleExceptions']();process['env'][_0x57a9b8(0x1c8)]&&(this[_0x57a9b8(0x243)][_0x57a9b8(0x27c)]=helper[_0x57a9b8(0x231)](process[_0x57a9b8(0x269)][_0x57a9b8(0x1c8)]),this[_0x57a9b8(0x243)][_0x57a9b8(0x22c)]=this[_0x57a9b8(0x243)]['turboScaleOptions']||{});if(!helper['isBrowserstackInfra']()){try{process[_0x57a9b8(0x269)][_0x57a9b8(0x1ee)]=_0x38854b,utilities[_0x57a9b8(0x1db)](_0x594062[_0x57a9b8(0x28a)],{},this[_0x57a9b8(0x243)],this[_0x57a9b8(0x262)]);}catch(_0x20f612){logger['debug'](_0x57a9b8(0x261)+_0x20f612);}return;}helper[_0x57a9b8(0x268)](_0x38854b)&&(_0x594062[_0x57a9b8(0x20c)](_0x594062[_0x57a9b8(0x209)](parseInt,helper[_0x57a9b8(0x289)](_0x594062[_0x57a9b8(0x1af)])),0x3)&&(this[_0x57a9b8(0x243)][_0x57a9b8(0x285)]=![]),_0x594062[_0x57a9b8(0x1fa)](helper[_0x57a9b8(0x23a)](helper[_0x57a9b8(0x289)](_0x594062[_0x57a9b8(0x1af)]),_0x594062['SNLov']),0x1)&&(this[_0x57a9b8(0x243)][_0x57a9b8(0x285)]=!![]));(helper[_0x57a9b8(0x1b1)](this[_0x57a9b8(0x243)][_0x57a9b8(0x1cf)])||helper['isUndefined'](this[_0x57a9b8(0x243)]['platforms'][_0x57a9b8(0x1ce)]))&&(helper[_0x57a9b8(0x1b1)](this[_0x57a9b8(0x243)]['parallelsPerPlatform'])?logger[_0x57a9b8(0x237)](_0x594062['WyFJW']):logger[_0x57a9b8(0x20b)](_0x594062[_0x57a9b8(0x273)]),this[_0x57a9b8(0x243)][_0x57a9b8(0x1cf)]=[]);!this[_0x57a9b8(0x243)]['testContextOptions']&&(this[_0x57a9b8(0x243)][_0x57a9b8(0x282)]={});try{process[_0x57a9b8(0x269)][_0x57a9b8(0x1ee)]=_0x41de49['_'][0x0],utilities[_0x57a9b8(0x1db)](_0x594062[_0x57a9b8(0x28a)],{},this[_0x57a9b8(0x243)],this['framework']);}catch(_0x50cad1){logger[_0x57a9b8(0x228)]('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x50cad1);}!this[_0x57a9b8(0x243)][_0x57a9b8(0x1a4)]&&logger[_0x57a9b8(0x237)](constants[_0x57a9b8(0x1e1)]),this[_0x57a9b8(0x226)]=this[_0x57a9b8(0x226)]['bind'](this),process['on'](_0x594062[_0x57a9b8(0x25f)],this[_0x57a9b8(0x226)]),process['on'](_0x594062['tybRx'],this[_0x57a9b8(0x226)]),process['on'](_0x594062[_0x57a9b8(0x1b6)],this[_0x57a9b8(0x226)]),_0x594062['pLHkD'](process[_0x57a9b8(0x263)],_0x594062[_0x57a9b8(0x1da)])?(process['on'](_0x594062[_0x57a9b8(0x224)],this[_0x57a9b8(0x226)]),process['on'](_0x594062[_0x57a9b8(0x278)],this['intExitHandler'])):process['on'](_0x594062[_0x57a9b8(0x1e8)],this[_0x57a9b8(0x226)]),process['on'](_0x594062['PAcxo'],this['exitHandler']());}async['initialize'](_0x3b9bd7){const _0x286d79=a55_0x3cdf1f,_0x599ebe={'xxxBn':function(_0x17234d,_0x4c428e){return _0x17234d(_0x4c428e);},'TptCb':_0x286d79(0x23d),'MyBne':_0x286d79(0x1eb),'DblTj':_0x286d79(0x1cd),'NtvvL':function(_0x383c3e,_0x5821a5){return _0x383c3e===_0x5821a5;},'GvlAl':_0x286d79(0x1c6),'EWEwQ':function(_0x435df1,_0x28f0b4){return _0x435df1+_0x28f0b4;},'nSCTN':'?caps=','SZaUK':'codeceptjs'};this[_0x286d79(0x23b)](_0x3b9bd7);if(_0x599ebe['xxxBn'](isTurboScaleSession,this[_0x286d79(0x243)])){const _0x5e509c=await helper[_0x286d79(0x26b)](this[_0x286d79(0x243)]);this[_0x286d79(0x243)][_0x286d79(0x1e3)]=_0x5e509c,_0x5e509c['isTrialGrid']&&(this['config']['browserstackLocal']=!![],this['config'][_0x286d79(0x241)]['localIdentifier']=_0x599ebe[_0x286d79(0x27f)],this[_0x286d79(0x243)][_0x286d79(0x241)][_0x599ebe[_0x286d79(0x272)]]=_0x5e509c[_0x286d79(0x1f1)][_0x286d79(0x1f3)](','),this[_0x286d79(0x243)][_0x286d79(0x241)][_0x286d79(0x1ec)]=_0x599ebe[_0x286d79(0x27b)]),this[_0x286d79(0x243)][_0x286d79(0x1d9)]=_0x5e509c['url'],this[_0x286d79(0x262)]&&_0x599ebe['NtvvL'](this['framework'][_0x286d79(0x1e2)](),_0x599ebe[_0x286d79(0x1c7)])&&(this['config']['turboScaleUrl']=_0x599ebe[_0x286d79(0x28b)](_0x5e509c[_0x286d79(0x208)],_0x599ebe['nSCTN'])),constants['hubUrl']=helper['getHubUrl'](this['config']),logger[_0x286d79(0x228)]('HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20'+constants[_0x286d79(0x20d)]);}helper[_0x286d79(0x25e)](this[_0x286d79(0x243)]),this[_0x286d79(0x1f6)](),_0x599ebe['xxxBn'](setPercyFlag,this),await this[_0x286d79(0x1ea)](),![_0x599ebe[_0x286d79(0x1d7)]][_0x286d79(0x1d8)](this['framework'])&&!_0x599ebe['xxxBn'](isTurboScaleSession,this[_0x286d79(0x243)])&&!helper[_0x286d79(0x205)]()[_0x286d79(0x1c9)]&&await this['setUpHubUrl']();}async[a55_0x3cdf1f(0x1df)](){const _0xdd82d4=a55_0x3cdf1f,_0x8018df={};_0x8018df['ctxgQ']=function(_0x2330ff,_0x15a507){return _0x2330ff===_0x15a507;},_0x8018df[_0xdd82d4(0x216)]='false',_0x8018df[_0xdd82d4(0x1c4)]=_0xdd82d4(0x239),_0x8018df[_0xdd82d4(0x21b)]='Percy\x20started\x20successfully',_0x8018df['gyQkh']=_0xdd82d4(0x1cd),_0x8018df[_0xdd82d4(0x277)]=_0xdd82d4(0x202);const _0x194042=_0x8018df;if(helper[_0xdd82d4(0x231)](this['config']['percy'])&&(!this[_0xdd82d4(0x274)]||!this['percy'][_0xdd82d4(0x207)]()))try{this[_0xdd82d4(0x274)]=await percyHelper[_0xdd82d4(0x258)](this[_0xdd82d4(0x243)]);if(!this[_0xdd82d4(0x274)]){process[_0xdd82d4(0x269)][_0xdd82d4(0x1fd)]=_0x194042['TDcuA'];throw new Error(_0x194042[_0xdd82d4(0x1c4)]);}logger[_0xdd82d4(0x237)](_0x194042[_0xdd82d4(0x21b)]),process[_0xdd82d4(0x269)][_0xdd82d4(0x1fd)]=_0x194042['gyQkh'];let _0x136910=0x0;const _0x387489=async()=>{const _0x18cb66=_0xdd82d4;_0x136910++,_0x194042['ctxgQ'](_0x136910,0x1)&&await this[_0x18cb66(0x22f)]();};process['on'](_0x194042[_0xdd82d4(0x277)],_0x387489);}catch(_0x5302a2){process[_0xdd82d4(0x269)][_0xdd82d4(0x1fd)]=_0x194042['TDcuA'],logger[_0xdd82d4(0x228)]('Error\x20in\x20percy\x20setup\x20'+_0x5302a2);throw new Error(_0x5302a2['toString']());}}async[a55_0x3cdf1f(0x22f)](){const _0x275238=a55_0x3cdf1f,_0x464264={};_0x464264[_0x275238(0x249)]=_0x275238(0x1ca),_0x464264[_0x275238(0x246)]=_0x275238(0x281);const _0x108121=_0x464264;if(this['percy']&&this[_0x275238(0x274)][_0x275238(0x207)]())try{await percyHelper[_0x275238(0x22f)](this[_0x275238(0x274)]),logger[_0x275238(0x237)](_0x108121[_0x275238(0x249)]);}catch(_0x43160d){logger['error'](_0x108121[_0x275238(0x246)],_0x43160d['message']);}}async[a55_0x3cdf1f(0x1ea)](){const _0x5c5fa1=a55_0x3cdf1f,_0x4a8556={};_0x4a8556[_0x5c5fa1(0x21e)]=_0x5c5fa1(0x24f),_0x4a8556[_0x5c5fa1(0x234)]='Local\x20binary\x20started\x20successfully';const _0x33928d=_0x4a8556;if(helper[_0x5c5fa1(0x1ad)]()&&helper[_0x5c5fa1(0x231)](this['config'][_0x5c5fa1(0x1b5)])&&(!this[_0x5c5fa1(0x1b5)]||!this[_0x5c5fa1(0x1b5)][_0x5c5fa1(0x207)]()))try{if(this[_0x5c5fa1(0x243)][_0x5c5fa1(0x241)][_0x5c5fa1(0x1a9)]){logger[_0x5c5fa1(0x228)](_0x33928d[_0x5c5fa1(0x21e)]);return;}this['browserstackLocal']=await helper['startLocalBinary'](this['config']),logger[_0x5c5fa1(0x237)](_0x33928d[_0x5c5fa1(0x234)]);}catch(_0x58244c){logger[_0x5c5fa1(0x228)](_0x58244c);throw new Error(_0x58244c[_0x5c5fa1(0x1f2)]());}}async[a55_0x3cdf1f(0x204)](){const _0x2ea804=a55_0x3cdf1f,_0x5db5a6={};_0x5db5a6[_0x2ea804(0x238)]='Local\x20binary\x20stopped',_0x5db5a6['juHsR']=_0x2ea804(0x245);const _0x4a6b46=_0x5db5a6;if(this['browserstackLocal']&&this['browserstackLocal'][_0x2ea804(0x207)]())try{await helper[_0x2ea804(0x1bd)](this['browserstackLocal']),logger[_0x2ea804(0x237)](_0x4a6b46[_0x2ea804(0x238)]);}catch(_0x31d3d3){logger['error'](_0x4a6b46[_0x2ea804(0x271)],_0x31d3d3[_0x2ea804(0x213)]);}}async[a55_0x3cdf1f(0x1c2)](){const _0x33dc64=a55_0x3cdf1f;return PerformanceTester[_0x33dc64(0x235)](PerformanceAutEvents[_0x33dc64(0x21a)],async()=>{const _0x449ff8=_0x33dc64;await hubAllocator[_0x449ff8(0x1e5)](this[_0x449ff8(0x243)]);})();}async[a55_0x3cdf1f(0x28c)](){const _0x36d46f=a55_0x3cdf1f,_0x1f7819={'YeGgG':function(_0x1ac073,_0x251080){return _0x1ac073(_0x251080);},'UuUph':_0x36d46f(0x1e4),'kxMjI':function(_0xc52e48,_0x1fbff7,_0x942f08,_0x1ddc66,_0x46fe63,_0x3387ec,_0x1de455){return _0xc52e48(_0x1fbff7,_0x942f08,_0x1ddc66,_0x46fe63,_0x3387ec,_0x1de455);},'dwrvb':_0x36d46f(0x287),'mshvb':_0x36d46f(0x1f0),'PPfrF':_0x36d46f(0x229),'FeapN':_0x36d46f(0x1ed),'NTWGH':function(_0xe1ffd4,_0x385ae9){return _0xe1ffd4(_0x385ae9);},'vKuSG':function(_0x1180af,_0x1149f2){return _0x1180af===_0x1149f2;},'IfrJo':_0x36d46f(0x1cd),'GvvmI':'Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','tWads':_0x36d46f(0x1a8),'HZfOL':'Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','wVduq':_0x36d46f(0x220),'WvUpy':function(_0x479344,_0x3c8527){return _0x479344>=_0x3c8527;},'THIDx':function(_0x1c6f96,_0x11ab15){return _0x1c6f96<_0x11ab15;},'SJAJt':_0x36d46f(0x24e),'VKPdv':'aiHeal:tcgAuth','RaVbK':function(_0xc72ee5){return _0xc72ee5();}},_0x22976a=PerformanceTester[_0x36d46f(0x235)](_0x1f7819[_0x36d46f(0x24c)],async()=>{const _0x5286b2=_0x36d46f;try{const _0x43e928=new Date(),_0x66ec07=helper[_0x5286b2(0x26e)](this[_0x5286b2(0x243)]),_0x3db122=_0x1f7819[_0x5286b2(0x20a)](require,path[_0x5286b2(0x1f3)](__dirname,_0x1f7819[_0x5286b2(0x22b)])),_0x5c0754=_0x1f7819['kxMjI'](timeoutPromise,constants['TCG_AUTH_TIMEOUT'],_0x1f7819[_0x5286b2(0x24d)],_0x1f7819['mshvb'],_0x43e928,this[_0x5286b2(0x243)],this['framework']),_0x2c650e={'tcgUrl':constants[_0x5286b2(0x26d)],'sdkVersion':_0x1f7819[_0x5286b2(0x20a)](require,_0x1f7819[_0x5286b2(0x1a5)])[_0x5286b2(0x21c)],'methodUsed':_0x1f7819[_0x5286b2(0x1f4)],'proxyConfig':_0x66ec07,'os':os[_0x5286b2(0x263)]()};if(_0x66ec07&&_0x66ec07['proxyUrl']){utilities['fireFunnelTestEvent'](constants[_0x5286b2(0x1b3)],_0x2c650e,this[_0x5286b2(0x243)],this[_0x5286b2(0x262)]);return;}const _0x54c4c6={};_0x54c4c6[_0x5286b2(0x203)]=_0x66ec07;const _0x6d590=await Promise['race']([_0x3db122[_0x5286b2(0x222)](this[_0x5286b2(0x243)][_0x5286b2(0x1a3)],this[_0x5286b2(0x243)][_0x5286b2(0x1fc)],constants[_0x5286b2(0x26d)],_0x1f7819[_0x5286b2(0x26c)](require,_0x1f7819[_0x5286b2(0x1a5)])[_0x5286b2(0x21c)],_0x54c4c6)['then'](_0x4be164=>{const _0x27c5ba=_0x5286b2;return _0x5c0754[_0x27c5ba(0x1e6)](),_0x4be164;}),_0x5c0754]);_0x6d590[_0x5286b2(0x1bc)]=_0x1f7819[_0x5286b2(0x1aa)](_0x6d590[_0x5286b2(0x1bc)],_0x1f7819[_0x5286b2(0x201)])||_0x1f7819['vKuSG'](_0x6d590[_0x5286b2(0x1bc)],!![]);const _0x342832=_0x1f7819[_0x5286b2(0x1aa)](this[_0x5286b2(0x243)][_0x5286b2(0x21d)],!![])||_0x1f7819[_0x5286b2(0x1aa)](this[_0x5286b2(0x243)][_0x5286b2(0x21d)],_0x1f7819[_0x5286b2(0x201)]);if(_0x1f7819[_0x5286b2(0x1aa)](_0x6d590[_0x5286b2(0x213)],constants[_0x5286b2(0x264)])&&_0x342832)logger[_0x5286b2(0x237)](_0x1f7819[_0x5286b2(0x1f7)]);else{if(!_0x6d590[_0x5286b2(0x26a)]&&_0x1f7819['vKuSG'](_0x6d590[_0x5286b2(0x1bf)],0x1f7)&&_0x342832)logger[_0x5286b2(0x237)](_0x1f7819['tWads']),utilities[_0x5286b2(0x1db)](constants[_0x5286b2(0x1b7)],_0x2c650e,this[_0x5286b2(0x243)],this['framework']);else{if(!_0x6d590[_0x5286b2(0x26a)]&&_0x342832){logger[_0x5286b2(0x237)](_0x1f7819[_0x5286b2(0x276)]);const _0x47571b={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x1f7819[_0x5286b2(0x20a)](require,_0x1f7819['PPfrF'])[_0x5286b2(0x21c)],'methodUsed':_0x1f7819[_0x5286b2(0x1f4)],'proxyConfig':_0x66ec07,'os':os[_0x5286b2(0x263)]()};utilities[_0x5286b2(0x1db)](constants['TCG_AUTH_FAILURE'],_0x47571b,this['config'],this[_0x5286b2(0x262)]);}else{if(_0x6d590[_0x5286b2(0x26a)]&&!_0x6d590[_0x5286b2(0x1bc)]&&_0x342832)logger[_0x5286b2(0x237)](_0x1f7819[_0x5286b2(0x223)]);else{if(_0x1f7819[_0x5286b2(0x23c)](_0x6d590[_0x5286b2(0x1bf)],0xc8)&&_0x1f7819[_0x5286b2(0x1a7)](_0x6d590[_0x5286b2(0x1bf)],0x12c))utilities[_0x5286b2(0x1db)](constants[_0x5286b2(0x22d)],_0x2c650e,this[_0x5286b2(0x243)],this[_0x5286b2(0x262)]);else{if(_0x1f7819[_0x5286b2(0x23c)](_0x6d590[_0x5286b2(0x1bf)],0x190))_0x2c650e[_0x5286b2(0x1bf)]=_0x6d590[_0x5286b2(0x1bf)],utilities[_0x5286b2(0x1db)](constants[_0x5286b2(0x256)],_0x2c650e,this[_0x5286b2(0x243)],this[_0x5286b2(0x262)]);else!_0x6d590['status']&&utilities[_0x5286b2(0x1db)](constants[_0x5286b2(0x1e0)],_0x2c650e,this[_0x5286b2(0x243)],this[_0x5286b2(0x262)]);}}}}}if(_0x6d590['isAuthenticated']&&_0x6d590[_0x5286b2(0x1bc)]){const _0xc53a56={};_0xc53a56['tcgAuthConfig']=_0x6d590;const _0x438a77=_0xc53a56;_0x66ec07&&(_0x438a77[_0x5286b2(0x219)]=_0x66ec07),_0x438a77[_0x5286b2(0x262)]=this[_0x5286b2(0x262)],_0x438a77[_0x5286b2(0x233)]=this[_0x5286b2(0x243)],helper['setupTcgConfigFile'](_0x438a77),logger[_0x5286b2(0x228)](_0x1f7819['SJAJt']);}}catch(_0x192ba3){logger['debug'](_0x5286b2(0x1d0)+(_0x192ba3[_0x5286b2(0x213)]?_0x192ba3[_0x5286b2(0x213)]:''));}});await _0x1f7819['RaVbK'](_0x22976a);}['setupKeepAlive'](){const _0x5eff1d=a55_0x3cdf1f,_0x2ad6b7={'UAPoy':function(_0x59f2e6,_0x307687){return _0x59f2e6(_0x307687);},'HyEVN':_0x5eff1d(0x288)};_0x2ad6b7['UAPoy'](require,_0x2ad6b7[_0x5eff1d(0x1bb)])();}[a55_0x3cdf1f(0x212)](){const _0x221b5a=a55_0x3cdf1f,_0x1d09d9={};_0x1d09d9[_0x221b5a(0x1ef)]=_0x221b5a(0x25d),_0x1d09d9['RONCr']=_0x221b5a(0x259);const _0x14f663=_0x1d09d9,_0x3e045e=_0x380331=>{const _0x2ef193=_0x221b5a;logger[_0x2ef193(0x20e)](_0x380331['message']),logger[_0x2ef193(0x228)](util['format'](_0x380331)),this[_0x2ef193(0x248)]['push'](util[_0x2ef193(0x24b)]('%j',_0x380331)),PerformanceTester[_0x2ef193(0x20f)](_0x380331);};process['on'](_0x14f663[_0x221b5a(0x1ef)],_0x3e045e),process['on'](_0x14f663['RONCr'],_0x3e045e);}async[a55_0x3cdf1f(0x226)](_0x1495d6){const _0x5843d9=a55_0x3cdf1f,_0x4c683a={};_0x4c683a[_0x5843d9(0x1cb)]='3|1|4|2|0',_0x4c683a[_0x5843d9(0x286)]=function(_0x20e961,_0x5a6c7c){return _0x20e961+_0x5a6c7c;},_0x4c683a[_0x5843d9(0x1c0)]='handled',_0x4c683a[_0x5843d9(0x283)]=function(_0x3117f3,_0x2a97d1){return _0x3117f3+_0x2a97d1;},_0x4c683a[_0x5843d9(0x250)]=_0x5843d9(0x1a6);const _0x54c2e7=_0x4c683a,_0x425e80=_0x54c2e7[_0x5843d9(0x1cb)]['split']('|');let _0x253eac=0x0;while(!![]){switch(_0x425e80[_0x253eac++]){case'0':await TestHubHandler[_0x5843d9(0x244)](_0x1495d6);continue;case'1':this[_0x54c2e7['OflyF'](_0x54c2e7[_0x5843d9(0x1c0)],_0x1495d6)]=!![];continue;case'2':this[_0x5843d9(0x1b0)]=_0x1495d6;continue;case'3':if(this[_0x54c2e7['OflyF'](_0x54c2e7[_0x5843d9(0x1c0)],_0x1495d6)])return;continue;case'4':logger[_0x5843d9(0x237)](_0x54c2e7['oMTic'](_0x54c2e7[_0x5843d9(0x250)],_0x1495d6));continue;}break;}}['exitHandler'](){const _0x8748d5=a55_0x3cdf1f,_0x10d0c3={'SBHuf':function(_0x35db01,_0xb9e516){return _0x35db01===_0xb9e516;},'EknrG':_0x8748d5(0x227),'GNAMC':function(_0x22c530,_0x577806){return _0x22c530>_0x577806;},'kdGfn':function(_0x1b9f8e,_0x55f3af){return _0x1b9f8e>_0x55f3af;},'YfaZb':function(_0x5d99b5){return _0x5d99b5();},'jECzR':'events.json'};let _0x1d562d=0x0;return async()=>{const _0x46d919=_0x8748d5;_0x1d562d++;if(_0x10d0c3[_0x46d919(0x221)](_0x1d562d,0x1)){helper[_0x46d919(0x1ba)](this[_0x46d919(0x262)])&&await this['stopBrowserstackLocal']();try{logger[_0x46d919(0x228)](_0x10d0c3['EknrG']),await TestHubHandler['stop'](_0x1d562d);}catch(_0x359b10){logger['debug']('Error\x20in\x20sending\x20testhub\x20stop:\x20'+util['format'](_0x359b10));}PerformanceTester[_0x46d919(0x270)](PerformanceEvents[_0x46d919(0x24a)]);if(PerformanceTester['isEnabled']()){const {measures:_0x429913,errors:_0x13a835}=await PerformanceTester[_0x46d919(0x1ac)](),_0x228ded={};if(_0x429913&&_0x10d0c3[_0x46d919(0x1de)](_0x429913['length'],0x0)||_0x13a835&&_0x10d0c3[_0x46d919(0x27a)](_0x13a835[_0x46d919(0x1ce)],0x0)){const _0x2dc524={};_0x2dc524[_0x46d919(0x1ae)]=_0x429913,_0x2dc524[_0x46d919(0x1c1)]=_0x13a835,Object[_0x46d919(0x251)](_0x228ded,_0x2dc524);}try{const _0x1fd363=await helper[_0x46d919(0x1d5)](_0x228ded,this[_0x46d919(0x243)]);logger[_0x46d919(0x228)](_0x46d919(0x23f)+constants['EDS_URL']+_0x46d919(0x206)+_0x1fd363['statusCode']);}catch(_0xf59485){logger[_0x46d919(0x228)](_0x46d919(0x240)+constants['EDS_URL']+_0x46d919(0x1c5)+util[_0x46d919(0x24b)](_0xf59485));}try{fs[_0x46d919(0x200)](path[_0x46d919(0x1f3)](_0x10d0c3['YfaZb'](getLogDir),_0x10d0c3[_0x46d919(0x210)]),JSON['stringify'](_0x228ded));}catch(_0x2e5be3){logger[_0x46d919(0x228)](_0x46d919(0x260)+_0x2e5be3);}}}};}}exports['default']=BrowserStackSetup;function a55_0x26f8(){const _0x5e465d=['cancel','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','KZwfB','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','setupBrowserstackLocal','custom-repeater','forceLocal','BrowserstackHealing.init','FRAMEWORK','fPGOu','BrowserstackHealingInitFailed','customRepeaters','toString','join','FeapN','./performance/constants','setupKeepAlive','GvvmI','cliConfig','cdZaE','psSfd','skipSessionName','userName','BROWSERSTACK_PERCY','3590tEtmeC','46145woHwij','writeFileSync','IfrJo','beforeExit','proxy','stopBrowserstackLocal','getCentralUser','\x20with\x20response\x20','isRunning','playwrightUrl','XlvcN','YeGgG','warn','BdSzR','hubUrl','error','captureError','jECzR','./testhub/utils','handleExceptions','message','No\x20config\x20provided.','./logger','TDcuA','28553oDlAeH','SDK\x20run\x20started\x20with\x20id:\x20','proxyConfig','HUB_MANAGEMENT','xCbqL','version','selfHeal','grTUa','SIGINT','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','SBHuf','init','wVduq','aSLKv','SDKTestAttempted','intExitHandler','Calling\x20Build\x20Stop\x20from\x20ExitHandler','debug','../../package.json','35829FQQWWY','UuUph','turboScaleOptions','AI_INIT_SUCCESSFUL','getFinalCaps','stopPercy','426kmYesI','isTrue','nDXjG','bstackConfig','MuhXm','measureWrapper','util','info','EGWKN','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','compareVersions','preInitialize','WvUpy','ats-repeater','getUserName','Data\x20sent\x20successfully\x20to\x20','Failed\x20to\x20send\x20data\x20to\x20','browserStackLocalOptions','getAccessKey','config','stop','Error\x20occured\x20while\x20stopping\x20local\x20binary','UHshL','./testhub/testhubHandler','unhandledErrors','AmdIu','SDK_CLEANUP','format','VKPdv','dwrvb','tcg\x20config\x20setup\x20successful.','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','EnDkr','assign','../hubAllocationMethods','./helper','uuid','setLogLevel','AI_INIT_FAILURE','startMonitoring','startPercy','uncaughtException','./performance/performance-tester','setBrowserstackInfraFromConfig','SIGQUIT','unhandledRejection','setProxySettings','bXVMI','Error\x20in\x20writing\x20events\x20to\x20file\x20','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','framework','platform','UPGRADE_REQUIRED','win32','path','winstonLogger','requireSeleniumWebdriverCheck','env','isAuthenticated','getTurboScaleGridDetails','NTWGH','TCG_URL','getProxyConfigForTcg','5024GgJuTS','end','juHsR','MyBne','faahE','percy','16130WzGoYK','HZfOL','NPjRV','IKpUx','./percy/utils','kdGfn','DblTj','turboScale','skipSessionStatus','16ESxyWR','TptCb','selenium-webdriver','Error\x20occured\x20while\x20stopping\x20percy','testContextOptions','oMTic','SIGHUP','useW3C','OflyF','BrowserstackHealing.init\x20method\x20timed\x20out','./setKeepAlive','getPackageVersion','PVfhz','EWEwQ','setupTCGAuth','accessKey','disableAutoCaptureLogs','PPfrF','Shutdown\x20triggered\x20by\x20','THIDx','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','skipBinaryInitialisation','vKuSG','28JVrckv','finalize','isBrowserstackInfra','measures','aHoPw','killSignal','isUndefined','envConfig','AI_PROXY_FAILURE','./ats/helper','browserstackLocal','WXKQX','TCG_DOWN','sdkRunId','setHandlePWError','checkStopLocalBinaryOnExit','HyEVN','isHealingEnabled','stopLocalBinary','getConfigPath','status','WiFbe','exceptions','setUpHubUrl','readConfig','falBw','\x20with\x20error\x20','playwright','GvlAl','BROWSERSTACK_TURBOSCALE','central_scanner','Percy\x20stopped','roFhU','20251emEpfc','true','length','platforms','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','generateLocalIdentifier','split','19|16|2|8|1|0|14|6|15|11|10|7|13|5|17|3|4|20|9|12|18','3484197nasiCc','sendToEDS','setLogDir','SZaUK','includes','turboScaleUrl','NiPxU','fireFunnelTestEvent','integrations','./timeoutPromise','GNAMC','setupPercy','INVALID_INIT_RESP_WITH_USER_IMPACT','AUTOLOGCAPTURE_NOTIFICATION','toLowerCase','turboScaleGridDetails','../ai-sdk-node/bundle','allocateHub'];a55_0x26f8=function(){return _0x5e465d;};return a55_0x26f8();}