const a55_0x1b2660=a55_0x27ad;(function(_0x493a34,_0x166cc2){const _0x14e539=a55_0x27ad,_0xae38b5=_0x493a34();while(!![]){try{const _0x4d49ee=parseInt(_0x14e539(0xe9))/0x1+parseInt(_0x14e539(0xaf))/0x2*(parseInt(_0x14e539(0x10d))/0x3)+-parseInt(_0x14e539(0x174))/0x4+parseInt(_0x14e539(0x168))/0x5*(parseInt(_0x14e539(0x188))/0x6)+-parseInt(_0x14e539(0x15d))/0x7+parseInt(_0x14e539(0xf0))/0x8*(parseInt(_0x14e539(0x194))/0x9)+-parseInt(_0x14e539(0xa6))/0xa*(-parseInt(_0x14e539(0xdd))/0xb);if(_0x4d49ee===_0x166cc2)break;else _0xae38b5['push'](_0xae38b5['shift']());}catch(_0x429d59){_0xae38b5['push'](_0xae38b5['shift']());}}}(a55_0x26fc,0xc74ba));const util=require('util'),os=require('os'),path=require(a55_0x1b2660(0xb3)),{v4:uuidv4}=require('uuid'),fs=require('fs'),constants=require(a55_0x1b2660(0x189)),{isTurboScaleSession}=require('./ats/helper'),logger=require(a55_0x1b2660(0xee))[a55_0x1b2660(0x176)],helper=require(a55_0x1b2660(0x102)),utilities=require('./utilities'),percyHelper=require(a55_0x1b2660(0x158)),hubAllocator=require(a55_0x1b2660(0x108)),PerformanceTester=require(a55_0x1b2660(0x12d)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a55_0x1b2660(0x13f)),{setPercyFlag}=require(a55_0x1b2660(0x9d)),TestHubHandler=require(a55_0x1b2660(0xf4)),timeoutPromise=require(a55_0x1b2660(0xe6));function a55_0x27ad(_0xee040f,_0x3474bd){const _0x26fcbc=a55_0x26fc();return a55_0x27ad=function(_0x27ad84,_0x116889){_0x27ad84=_0x27ad84-0x96;let _0x1224f7=_0x26fcbc[_0x27ad84];return _0x1224f7;},a55_0x27ad(_0xee040f,_0x3474bd);}function a55_0x26fc(){const _0x7b186d=['browserStackLocalOptions','AMhZW','proxyConfig','urKcH','BROWSERSTACK_TURBOSCALE','isBrowserstackInfra','SIGHUP','wWyzm','stopLocalBinary','SIGBREAK','No\x20config\x20provided.','bTYpn','fUzeY','turboScaleOptions','XHjTx','SDKTestAttempted','config','getTurboScaleGridDetails','Uboto','Data\x20sent\x20successfully\x20to\x20','RWmRz','isTrue','toLowerCase','unhandledRejection','codeceptjs','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','./performance/performance-tester','captureError','AwyYa','BwmqW','SDK\x20run\x20started\x20with\x20id:\x20','turboScale','playwrightUrl','message','toString','includes','parallelsPerPlatform','BrowserstackHealingInitFailed','stopBrowserstackLocal','RVjmf','exitHandler','../../package.json','BrowserstackHealing.init\x20method\x20timed\x20out','proxyUrl','./performance/constants','pRNMf','PKBcj','turboScaleGridDetails','SIGINT','\x20with\x20error\x20','rgTLA','debug','tcg\x20config\x20setup\x20successful.','Error\x20occured\x20while\x20stopping\x20local\x20binary','readConfig','assign','pKGlI','skipSessionStatus','initialize','4.5.0','setupBrowserstackLocal','mzSaI','AI_PROXY_FAILURE','cliConfig','mnDqt','bjCBL','turboScaleUrl','handled','getUserName','./percy/utils','SIGQUIT','false','localIdentifier','zDqKJ','6896260OhcVBn','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','then','AI_INIT_FAILURE','setCLICaps','uncaughtException','win32','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','getLocalConfig','gNGoN','Percy\x20started\x20successfully','5lurNoX','isEnabled','CizPc','lJvod','inznp','checkStopLocalBinaryOnExit','setupPercy','EDS_URL','dZiqj','YELPx','JPXXg','TCG_URL','3226372nlYRvS','UPGRADE_REQUIRED','winstonLogger','setEnvCaps','../ai-sdk-node/bundle','setUpHubUrl','isRunning','localOptions','bind','WgfNr','envConfig','testContextOptions','intExitHandler','TWpHc','format','SIGABRT','cLHlu','split','fMMKK','constructor','1238670nYXMue','../bin/utils/constants','forceLocal','rExLG','finalize','unhandledErrors','generateLocalIdentifier','BjcrG','sendToEDS','stopPercy','qNsdB','handleExceptions','9hggMfH','race','playwright','wPCwK','killSignal','push','exceptions','warn','./testhub/utils','status','platform','stop','info','sanitizeCaps','BrowserstackHealing.init','getLocalIdentifier','scipr','1782260PkkQot','vfHqQ','writeFileSync','disableAutoCaptureLogs','Error\x20in\x20writing\x20events\x20to\x20file\x20','JHfCP','startPercy','UPped','OKFJd','14vZmREQ','getPackageVersion','setBrowserstackInfraFromConfig','Calling\x20Build\x20Stop\x20from\x20ExitHandler','path','ftHZc','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','proxy','ADmvz','getAccessKey','mybMT','rPjbA','skipBinaryInitialisation','RZcrl','hubUrl','jJBNg','isUndefined','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','selfHeal','pXjSF','Ybdzk','setLogLevel','NDNxl','default','SIGTERM','stringify','XpgVj','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','tuFBJ','measures','asMXD','log/events.json','true','hrGpi','IvjRM','percy','39|35|28|3|14|30|21|27|34|31|2|6|24|42|40|4|12|25|41|5|33|10|1|17|19|0|7|16|26|43|37|13|32|18|8|22|15|23|29|36|20|38|9|11','selenium-webdriver','compareVersions','DHADa','FDCID','setProxySettings','fbicI','userName\x20or\x20accessKey\x20is\x20not\x20defined','qyhny','tzNbB','44ssDKKW','HeWlm','Error\x20in\x20percy\x20setup\x20','aEtqX','setHandlePWError','platforms','AI_INIT_SUCCESSFUL','length','isHealingEnabled','./timeoutPromise','getHubUrl','setupTcgConfigFile','629210KFECzy','Local\x20binary\x20started\x20successfully','SDK_CLEANUP','sdkRunID','ihiYq','./logger','env','8104552fiClzf','isAuthenticated','TCG_AUTH_TIMEOUT','xaebV','./testhub/testhubHandler','skipSessionName','wwKHz','YiDRt','HUB_MANAGEMENT','tqPbQ','url','\x20with\x20response\x20','framework','browserstackLocal','init','error','BROWSERSTACK_PERCY','end','./helper','Percy\x20stopped','tbPot','startLocalBinary','Local\x20binary\x20stopped','version','../hubAllocationMethods','nMjIA','measureWrapper','isTrialGrid','fireFunnelTestEvent','19911TYQLPw','tcgAuthConfig','Error\x20in\x20sending\x20testhub\x20stop:\x20','sERTB','zvhJY','Nzukh'];a55_0x26fc=function(){return _0x7b186d;};return a55_0x26fc();}class BrowserStackSetup{constructor(_0x5a2fa8,_0x8dcd49){const _0x111647=a55_0x1b2660,_0x3ee583={'rPjbA':_0x111647(0xd3),'wwKHz':function(_0x2a6157,_0x1f0a62){return _0x2a6157===_0x1f0a62;},'TWpHc':_0x111647(0xca),'wPCwK':'parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','bTYpn':function(_0x4a75ed,_0x17125a){return _0x4a75ed!==_0x17125a;},'tbPot':_0x111647(0x163),'lJvod':_0x111647(0x183),'RWmRz':_0x111647(0x159),'wWyzm':_0x111647(0x11c),'BwmqW':'beforeExit','FDCID':_0x111647(0x122),'sERTB':function(_0x50e0c8,_0x55a7a6){return _0x50e0c8<_0x55a7a6;},'cLHlu':function(_0x68d024,_0xcc9c08){return _0x68d024(_0xcc9c08);},'XHjTx':_0x111647(0xd4),'MMxQv':_0x111647(0x14e),'Nzukh':_0x111647(0xda),'hcHzj':_0x111647(0x143),'CizPc':_0x111647(0x11d),'AMhZW':_0x111647(0xc7),'hrGpi':_0x111647(0x119),'JWPaI':function(_0x4dfa97){return _0x4dfa97();},'tzNbB':'integrations'},_0x2e619e=_0x3ee583[_0x111647(0xba)]['split']('|');let _0x179c6b=0x0;while(!![]){switch(_0x2e619e[_0x179c6b++]){case'0':helper[_0x111647(0x165)](this[_0x111647(0x123)])&&helper[_0x111647(0xbf)](helper[_0x111647(0xa4)](this[_0x111647(0x123)]))&&(!helper[_0x111647(0xbf)](this[_0x111647(0x123)][_0x111647(0x113)])&&_0x3ee583[_0x111647(0xf6)](this[_0x111647(0x123)][_0x111647(0x113)][_0x111647(0x187)],Object)?!helper[_0x111647(0x128)](this[_0x111647(0x123)][_0x111647(0x113)][_0x111647(0xbb)])&&(this[_0x111647(0x123)][_0x111647(0x113)][_0x111647(0x15b)]=helper[_0x111647(0x18e)]()):this[_0x111647(0x123)][_0x111647(0x113)]={'localIdentifier':helper['generateLocalIdentifier']()});continue;case'1':helper['getFinalCaps'](this[_0x111647(0x123)],this[_0x111647(0x152)],this[_0x111647(0x17e)]);continue;case'2':global['framework']=_0x8dcd49;continue;case'3':this[_0x111647(0xfd)]=null;continue;case'4':global['sdkRunID']=this['sdkRunID'];continue;case'5':helper[_0x111647(0xb1)](this['config'],this[_0x111647(0x152)]);continue;case'6':helper[_0x111647(0xa2)](this[_0x111647(0x123)]);continue;case'7':this[_0x111647(0x123)][_0x111647(0x113)][_0x111647(0xbb)]=helper[_0x111647(0x128)](this[_0x111647(0x123)][_0x111647(0x113)][_0x111647(0xbb)]);continue;case'8':(helper[_0x111647(0xbf)](this[_0x111647(0x123)][_0x111647(0xe2)])||helper[_0x111647(0xbf)](this[_0x111647(0x123)][_0x111647(0xe2)][_0x111647(0xe4)]))&&(helper[_0x111647(0xbf)](this[_0x111647(0x123)][_0x111647(0x137)])?logger[_0x111647(0xa1)](_0x3ee583[_0x111647(0x181)]):logger[_0x111647(0x9c)](_0x3ee583[_0x111647(0x98)]),this[_0x111647(0x123)]['platforms']=[]);continue;case'9':_0x3ee583[_0x111647(0x11e)](process[_0x111647(0x9f)],_0x3ee583[_0x111647(0x104)])?(process['on'](_0x3ee583[_0x111647(0x16b)],this[_0x111647(0x180)]),process['on'](_0x3ee583[_0x111647(0x127)],this[_0x111647(0x180)])):process['on'](_0x3ee583[_0x111647(0x11a)],this[_0x111647(0x180)]);continue;case'10':this['config'][_0x111647(0x17f)][_0x111647(0xf5)]=!helper[_0x111647(0x118)]()||helper[_0x111647(0x128)](this[_0x111647(0x123)][_0x111647(0x17f)][_0x111647(0xf5)]);continue;case'11':process['on'](_0x3ee583[_0x111647(0x130)],this[_0x111647(0x13b)]());continue;case'12':logger[_0x111647(0xa1)](_0x111647(0x131)+this[_0x111647(0xec)]);continue;case'13':process['env'][_0x111647(0x117)]&&(this[_0x111647(0x123)][_0x111647(0x132)]=helper[_0x111647(0x128)](process[_0x111647(0xef)][_0x111647(0x117)]),this[_0x111647(0x123)][_0x111647(0x120)]=this[_0x111647(0x123)][_0x111647(0x120)]||{});continue;case'14':this[_0x111647(0xd2)]=null;continue;case'15':try{process[_0x111647(0xef)]['FRAMEWORK']=_0x5a2fa8['_'][0x0],utilities[_0x111647(0x10c)](_0x3ee583['FDCID'],{},this[_0x111647(0x123)],this['framework']);}catch(_0x1bd61a){logger['debug'](_0x111647(0x12c)+_0x1bd61a);}continue;case'16':helper[_0x111647(0xc4)](this[_0x111647(0x123)],this[_0x111647(0x152)],this['envConfig']);continue;case'17':!this[_0x111647(0x123)][_0x111647(0x113)]&&(this[_0x111647(0x123)][_0x111647(0x113)]=this[_0x111647(0x123)][_0x111647(0x17b)]||{});continue;case'18':helper['requireSeleniumWebdriverCheck'](_0x8dcd49)&&(_0x3ee583[_0x111647(0x110)](_0x3ee583[_0x111647(0x184)](parseInt,helper[_0x111647(0xb0)](_0x3ee583[_0x111647(0x121)])),0x3)&&(this[_0x111647(0x123)]['useW3C']=![]),_0x3ee583['wwKHz'](helper[_0x111647(0xd5)](helper[_0x111647(0xb0)](_0x3ee583[_0x111647(0x121)]),_0x3ee583['MMxQv']),0x1)&&(this[_0x111647(0x123)]['useW3C']=!![]));continue;case'19':if(helper['isUndefined'](helper[_0x111647(0x157)](this[_0x111647(0x123)]))||helper[_0x111647(0xbf)](helper[_0x111647(0xb8)](this[_0x111647(0x123)])))throw new Error(_0x3ee583[_0x111647(0x112)]);continue;case'20':process['on'](_0x3ee583['hcHzj'],this['intExitHandler']);continue;case'21':this[_0x111647(0x123)]['platforms']=this[_0x111647(0x123)][_0x111647(0xe2)]||[];continue;case'22':!this[_0x111647(0x123)]['testContextOptions']&&(this['config']['testContextOptions']={});continue;case'23':!this[_0x111647(0x123)][_0x111647(0xa9)]&&logger[_0x111647(0xa1)](constants['AUTOLOGCAPTURE_NOTIFICATION']);continue;case'24':this[_0x111647(0xfc)]=_0x8dcd49;continue;case'25':if(helper[_0x111647(0xbf)](this['config']))throw new Error(_0x3ee583[_0x111647(0x16a)]);continue;case'26':helper[_0x111647(0xe1)](this[_0x111647(0x123)]);continue;case'27':this[_0x111647(0x123)][_0x111647(0x17f)]=this[_0x111647(0x123)][_0x111647(0x17f)]||{};continue;case'28':this[_0x111647(0x17e)]=helper[_0x111647(0x177)]();continue;case'29':this[_0x111647(0x180)]=this['intExitHandler'][_0x111647(0x17c)](this);continue;case'30':this['config']=helper[_0x111647(0x149)](helper['getConfigPath'](_0x5a2fa8));continue;case'31':global[_0x111647(0x123)]=this['config'];continue;case'32':if(!helper[_0x111647(0x118)]()){try{process[_0x111647(0xef)]['FRAMEWORK']=_0x8dcd49,utilities['fireFunnelTestEvent'](_0x3ee583[_0x111647(0xd7)],{},this[_0x111647(0x123)],this[_0x111647(0xfc)]);}catch(_0x3378c0){logger[_0x111647(0x146)](_0x111647(0x12c)+_0x3378c0);}return;}continue;case'33':this['config'][_0x111647(0x17f)][_0x111647(0x14c)]=!helper['isBrowserstackInfra']()||helper[_0x111647(0x128)](this[_0x111647(0x123)]['testContextOptions'][_0x111647(0x14c)]);continue;case'34':this['errorMessage']={};continue;case'35':this[_0x111647(0x152)]=helper[_0x111647(0x161)](_0x5a2fa8);continue;case'36':process['on'](_0x3ee583[_0x111647(0x114)],this[_0x111647(0x180)]);continue;case'37':this[_0x111647(0x193)]();continue;case'38':process['on'](_0x3ee583[_0x111647(0xd0)],this[_0x111647(0x180)]);continue;case'39':this['unhandledErrors']=[];continue;case'40':this[_0x111647(0x99)]=null;continue;case'41':if(this[_0x111647(0x123)][_0x111647(0xff)])throw new Error(this[_0x111647(0x123)][_0x111647(0xff)]);continue;case'42':this[_0x111647(0xec)]=_0x3ee583['JWPaI'](uuidv4);continue;case'43':if(_0x3ee583[_0x111647(0xf6)](_0x8dcd49,_0x3ee583[_0x111647(0xdc)]))return;continue;}break;}}async[a55_0x1b2660(0x14d)](){const _0x517b44=a55_0x1b2660,_0x1db7df={'ufYxO':function(_0x1c747c,_0x37fcc9){return _0x1c747c(_0x37fcc9);},'xaebV':'ats-repeater','bjCBL':'custom-repeater','pKGlI':'true','utIBA':function(_0x13d184,_0x990d68){return _0x13d184===_0x990d68;},'RVjmf':_0x517b44(0x97),'rgTLA':function(_0x17b0af,_0x1e375b){return _0x17b0af+_0x1e375b;},'zDqKJ':'?caps=','scipr':function(_0x3b6711,_0x1f2821){return _0x3b6711(_0x1f2821);},'HeWlm':_0x517b44(0x12b),'qAYqy':function(_0x24aef0,_0x2b6dbf){return _0x24aef0(_0x2b6dbf);}};if(_0x1db7df['ufYxO'](isTurboScaleSession,this[_0x517b44(0x123)])){const _0x19c6ef=await helper[_0x517b44(0x124)](this['config']);this[_0x517b44(0x123)][_0x517b44(0x142)]=_0x19c6ef,_0x19c6ef[_0x517b44(0x10b)]&&(this[_0x517b44(0x123)][_0x517b44(0xfd)]=!![],this[_0x517b44(0x123)]['browserStackLocalOptions'][_0x517b44(0x15b)]=_0x1db7df[_0x517b44(0xf3)],this[_0x517b44(0x123)][_0x517b44(0x113)][_0x1db7df[_0x517b44(0x154)]]=_0x19c6ef['customRepeaters']['join'](','),this['config'][_0x517b44(0x113)][_0x517b44(0x18a)]=_0x1db7df[_0x517b44(0x14b)]),this['config'][_0x517b44(0x155)]=_0x19c6ef[_0x517b44(0xfa)],this['framework']&&_0x1db7df['utIBA'](this[_0x517b44(0xfc)][_0x517b44(0x129)](),_0x1db7df[_0x517b44(0x13a)])&&(this[_0x517b44(0x123)][_0x517b44(0x155)]=_0x1db7df[_0x517b44(0x145)](_0x19c6ef[_0x517b44(0x133)],_0x1db7df[_0x517b44(0x15c)])),constants[_0x517b44(0xbd)]=helper[_0x517b44(0xe7)](this[_0x517b44(0x123)]),logger[_0x517b44(0x146)]('HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20'+constants[_0x517b44(0xbd)]);}helper[_0x517b44(0xd8)](this[_0x517b44(0x123)]),this['setupKeepAlive'](),_0x1db7df[_0x517b44(0xa5)](setPercyFlag,this),await this['setupBrowserstackLocal'](),![_0x1db7df[_0x517b44(0xde)]][_0x517b44(0x136)](this[_0x517b44(0xfc)])&&!_0x1db7df['qAYqy'](isTurboScaleSession,this[_0x517b44(0x123)])&&!process[_0x517b44(0xef)]['BROWSERSTACK_CENTRAL_USER']&&await this[_0x517b44(0x179)]();}async[a55_0x1b2660(0x16e)](){const _0x7bf6a1=a55_0x1b2660,_0x3382fd={};_0x3382fd[_0x7bf6a1(0x153)]=function(_0x2e4ab2,_0xf430ef){return _0x2e4ab2===_0xf430ef;},_0x3382fd['YELPx']=_0x7bf6a1(0x15a),_0x3382fd['YiDRt']='Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.',_0x3382fd[_0x7bf6a1(0xd1)]=_0x7bf6a1(0x167),_0x3382fd['DCPno']=_0x7bf6a1(0xcf),_0x3382fd[_0x7bf6a1(0xa7)]='beforeExit';const _0x24c278=_0x3382fd;if(helper[_0x7bf6a1(0x128)](this[_0x7bf6a1(0x123)][_0x7bf6a1(0xd2)])&&(!this[_0x7bf6a1(0xd2)]||!this[_0x7bf6a1(0xd2)][_0x7bf6a1(0x17a)]()))try{this['percy']=await percyHelper[_0x7bf6a1(0xac)](this['config']);if(!this[_0x7bf6a1(0xd2)]){process[_0x7bf6a1(0xef)]['BROWSERSTACK_PERCY']=_0x24c278[_0x7bf6a1(0x171)];throw new Error(_0x24c278[_0x7bf6a1(0xf7)]);}logger[_0x7bf6a1(0xa1)](_0x24c278[_0x7bf6a1(0xd1)]),process[_0x7bf6a1(0xef)][_0x7bf6a1(0x100)]=_0x24c278['DCPno'];let _0x5ed9fc=0x0;const _0xc571e=async()=>{_0x5ed9fc++,_0x24c278['mnDqt'](_0x5ed9fc,0x1)&&await this['stopPercy']();};process['on'](_0x24c278['vfHqQ'],_0xc571e);}catch(_0x39268c){process['env'][_0x7bf6a1(0x100)]=_0x24c278[_0x7bf6a1(0x171)],logger[_0x7bf6a1(0x146)](_0x7bf6a1(0xdf)+_0x39268c);throw new Error(_0x39268c[_0x7bf6a1(0x135)]());}}async[a55_0x1b2660(0x191)](){const _0x5c06b5=a55_0x1b2660,_0x4954b2={};_0x4954b2['NDNxl']=_0x5c06b5(0x103),_0x4954b2[_0x5c06b5(0x186)]='Error\x20occured\x20while\x20stopping\x20percy';const _0x13859d=_0x4954b2;if(this[_0x5c06b5(0xd2)]&&this[_0x5c06b5(0xd2)][_0x5c06b5(0x17a)]())try{await percyHelper['stopPercy'](this[_0x5c06b5(0xd2)]),logger[_0x5c06b5(0xa1)](_0x13859d[_0x5c06b5(0xc5)]);}catch(_0x55b9ca){logger[_0x5c06b5(0xff)](_0x13859d['fMMKK'],_0x55b9ca[_0x5c06b5(0x134)]);}}async[a55_0x1b2660(0x14f)](){const _0x9ff45=a55_0x1b2660,_0x16a437={};_0x16a437[_0x9ff45(0x111)]=_0x9ff45(0x15e),_0x16a437[_0x9ff45(0xbc)]=_0x9ff45(0xea);const _0x3d9916=_0x16a437;if(helper['isBrowserstackInfra']()&&helper[_0x9ff45(0x128)](this['config']['browserstackLocal'])&&(!this[_0x9ff45(0xfd)]||!this[_0x9ff45(0xfd)][_0x9ff45(0x17a)]()))try{if(this[_0x9ff45(0x123)][_0x9ff45(0x113)][_0x9ff45(0xbb)]){logger['debug'](_0x3d9916[_0x9ff45(0x111)]);return;}this[_0x9ff45(0xfd)]=await helper[_0x9ff45(0x105)](this[_0x9ff45(0x123)]),logger[_0x9ff45(0xa1)](_0x3d9916['RZcrl']);}catch(_0x53aa6f){logger[_0x9ff45(0x146)](_0x53aa6f);throw new Error(_0x53aa6f[_0x9ff45(0x135)]());}}async[a55_0x1b2660(0x139)](){const _0x3e8405=a55_0x1b2660,_0x599bbd={};_0x599bbd[_0x3e8405(0xc3)]=_0x3e8405(0x106),_0x599bbd[_0x3e8405(0xd9)]=_0x3e8405(0x148);const _0x1e6fd3=_0x599bbd;if(this[_0x3e8405(0xfd)]&&this[_0x3e8405(0xfd)][_0x3e8405(0x17a)]())try{await helper[_0x3e8405(0x11b)](this[_0x3e8405(0xfd)]),logger[_0x3e8405(0xa1)](_0x1e6fd3[_0x3e8405(0xc3)]);}catch(_0x438392){logger[_0x3e8405(0xff)](_0x1e6fd3['fbicI'],_0x438392['message']);}}async['setUpHubUrl'](){const _0x586b0f=a55_0x1b2660;return PerformanceTester[_0x586b0f(0x10a)](PerformanceAutEvents[_0x586b0f(0xf8)],async()=>{const _0x1ba678=_0x586b0f;await hubAllocator['allocateHub'](this[_0x1ba678(0x123)]);})();}async['setupTCGAuth'](){const _0x354212=a55_0x1b2660,_0x51ece4={'OKFJd':function(_0x4a980f,_0x4f15f1){return _0x4a980f(_0x4f15f1);},'sIwQb':_0x354212(0x178),'urKcH':function(_0x1c4507,_0x282f60,_0x4f0b0a,_0x256f94,_0x562445,_0x5b43f1,_0x23c90a){return _0x1c4507(_0x282f60,_0x4f0b0a,_0x256f94,_0x562445,_0x5b43f1,_0x23c90a);},'ADmvz':_0x354212(0x13d),'rExLG':_0x354212(0x138),'Uboto':_0x354212(0x13c),'asMXD':_0x354212(0xa3),'mzSaI':function(_0x16c327,_0x45f33b){return _0x16c327(_0x45f33b);},'tuFBJ':function(_0x1f70a8,_0x4edc98){return _0x1f70a8===_0x4edc98;},'jJBNg':'true','UPped':function(_0x21f49e,_0x3ad9c4){return _0x21f49e===_0x3ad9c4;},'fUzeY':function(_0x4970b4,_0x445304){return _0x4970b4===_0x445304;},'dZiqj':function(_0x1f2a96,_0x42d109){return _0x1f2a96===_0x42d109;},'PKBcj':_0x354212(0xb5),'BjcrG':_0x354212(0xc0),'QntmU':'Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','qNsdB':_0x354212(0x164),'tqPbQ':function(_0xc82738,_0x40ae3c){return _0xc82738>=_0x40ae3c;},'cFPAU':function(_0xc9875,_0x47f417){return _0xc9875<_0x47f417;},'AbAXd':function(_0x21db21,_0x5bd3b4){return _0x21db21>=_0x5bd3b4;},'JHfCP':_0x354212(0x147),'DHADa':'aiHeal:tcgAuth','AwyYa':function(_0x599ef0){return _0x599ef0();}},_0xb3d54d=PerformanceTester['measureWrapper'](_0x51ece4[_0x354212(0xd6)],async()=>{const _0x54f7bd=_0x354212;try{const _0x1ba21e=new Date(),_0x158edb=helper['getProxyConfigForTcg'](this[_0x54f7bd(0x123)]),_0x39ad28=_0x51ece4[_0x54f7bd(0xae)](require,path['join'](__dirname,_0x51ece4['sIwQb'])),_0x47c77c=_0x51ece4[_0x54f7bd(0x116)](timeoutPromise,constants[_0x54f7bd(0xf2)],_0x51ece4[_0x54f7bd(0xb7)],_0x51ece4[_0x54f7bd(0x18b)],_0x1ba21e,this[_0x54f7bd(0x123)],this[_0x54f7bd(0xfc)]),_0x34be0c={'tcgUrl':constants[_0x54f7bd(0x173)],'sdkVersion':_0x51ece4[_0x54f7bd(0xae)](require,_0x51ece4[_0x54f7bd(0x125)])[_0x54f7bd(0x107)],'methodUsed':_0x51ece4[_0x54f7bd(0xcd)],'proxyConfig':_0x158edb,'os':os[_0x54f7bd(0x9f)]()};if(_0x158edb&&_0x158edb[_0x54f7bd(0x13e)]){utilities[_0x54f7bd(0x10c)](constants[_0x54f7bd(0x151)],_0x34be0c,this[_0x54f7bd(0x123)],this[_0x54f7bd(0xfc)]);return;}const _0x2921d9={};_0x2921d9[_0x54f7bd(0xb6)]=_0x158edb;const _0x36490c=await Promise[_0x54f7bd(0x96)]([_0x39ad28[_0x54f7bd(0xfe)](this[_0x54f7bd(0x123)]['accessKey'],this[_0x54f7bd(0x123)]['userName'],constants['TCG_URL'],_0x51ece4['mzSaI'](require,_0x51ece4[_0x54f7bd(0x125)])['version'],_0x2921d9)[_0x54f7bd(0x15f)](_0x4d7780=>{return _0x47c77c['cancel'](),_0x4d7780;}),_0x47c77c]);_0x36490c[_0x54f7bd(0xe5)]=_0x51ece4[_0x54f7bd(0xcb)](_0x36490c[_0x54f7bd(0xe5)],_0x51ece4[_0x54f7bd(0xbe)])||_0x51ece4[_0x54f7bd(0xad)](_0x36490c['isHealingEnabled'],!![]);const _0x18281e=_0x51ece4['fUzeY'](this[_0x54f7bd(0x123)][_0x54f7bd(0xc1)],!![])||_0x51ece4[_0x54f7bd(0x170)](this['config'][_0x54f7bd(0xc1)],_0x51ece4['jJBNg']);if(_0x51ece4[_0x54f7bd(0x170)](_0x36490c[_0x54f7bd(0x134)],constants[_0x54f7bd(0x175)])&&_0x18281e)logger[_0x54f7bd(0xa1)](_0x51ece4[_0x54f7bd(0x141)]);else{if(!_0x36490c[_0x54f7bd(0xf1)]&&_0x51ece4[_0x54f7bd(0x11f)](_0x36490c[_0x54f7bd(0x9e)],0x1f7)&&_0x18281e)logger[_0x54f7bd(0xa1)](_0x51ece4[_0x54f7bd(0x18f)]),utilities[_0x54f7bd(0x10c)](constants['TCG_DOWN'],_0x34be0c,this[_0x54f7bd(0x123)],this[_0x54f7bd(0xfc)]);else{if(!_0x36490c[_0x54f7bd(0xf1)]&&_0x18281e){logger[_0x54f7bd(0xa1)](_0x51ece4['QntmU']);const _0x1d7a61={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x51ece4[_0x54f7bd(0x150)](require,_0x51ece4[_0x54f7bd(0x125)])[_0x54f7bd(0x107)],'methodUsed':_0x51ece4['asMXD'],'proxyConfig':_0x158edb,'os':os[_0x54f7bd(0x9f)]()};utilities[_0x54f7bd(0x10c)](constants['TCG_AUTH_FAILURE'],_0x1d7a61,this[_0x54f7bd(0x123)],this['framework']);}else{if(_0x36490c[_0x54f7bd(0xf1)]&&!_0x36490c[_0x54f7bd(0xe5)]&&_0x18281e)logger[_0x54f7bd(0xa1)](_0x51ece4[_0x54f7bd(0x192)]);else{if(_0x51ece4[_0x54f7bd(0xf9)](_0x36490c[_0x54f7bd(0x9e)],0xc8)&&_0x51ece4['cFPAU'](_0x36490c['status'],0x12c))utilities[_0x54f7bd(0x10c)](constants[_0x54f7bd(0xe3)],_0x34be0c,this[_0x54f7bd(0x123)],this['framework']);else{if(_0x51ece4['AbAXd'](_0x36490c[_0x54f7bd(0x9e)],0x190))_0x34be0c['status']=_0x36490c[_0x54f7bd(0x9e)],utilities[_0x54f7bd(0x10c)](constants[_0x54f7bd(0x160)],_0x34be0c,this[_0x54f7bd(0x123)],this[_0x54f7bd(0xfc)]);else!_0x36490c[_0x54f7bd(0x9e)]&&utilities[_0x54f7bd(0x10c)](constants['INVALID_INIT_RESP_WITH_USER_IMPACT'],_0x34be0c,this[_0x54f7bd(0x123)],this['framework']);}}}}}if(_0x36490c[_0x54f7bd(0xf1)]&&_0x36490c[_0x54f7bd(0xe5)]){const _0x9fb71d={};_0x9fb71d[_0x54f7bd(0x10e)]=_0x36490c;const _0xa220cf=_0x9fb71d;_0x158edb&&(_0xa220cf[_0x54f7bd(0x115)]=_0x158edb),_0xa220cf[_0x54f7bd(0xfc)]=this['framework'],_0xa220cf['bstackConfig']=this['config'],helper[_0x54f7bd(0xe8)](_0xa220cf),logger[_0x54f7bd(0x146)](_0x51ece4[_0x54f7bd(0xab)]);}}catch(_0x359656){logger['debug']('Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20'+(_0x359656['message']?_0x359656[_0x54f7bd(0x134)]:''));}});await _0x51ece4[_0x354212(0x12f)](_0xb3d54d);}['setupKeepAlive'](){const _0x56165d=a55_0x1b2660,_0x39c9e7={'ftHZc':function(_0x19f450,_0xa784ba){return _0x19f450(_0xa784ba);},'pXjSF':'./setKeepAlive'};_0x39c9e7[_0x56165d(0xb4)](require,_0x39c9e7[_0x56165d(0xc2)])();}[a55_0x1b2660(0x193)](){const _0x3a4027=a55_0x1b2660,_0x59dae6={};_0x59dae6[_0x3a4027(0xb9)]=_0x3a4027(0x12a),_0x59dae6[_0x3a4027(0x166)]=_0x3a4027(0x162);const _0x5958b7=_0x59dae6,_0x134d6e=_0x4e9139=>{const _0x57a418=_0x3a4027;logger[_0x57a418(0xff)](_0x4e9139[_0x57a418(0x134)]),logger['debug'](util['format'](_0x4e9139)),this[_0x57a418(0x18d)][_0x57a418(0x9a)](util[_0x57a418(0x182)]('%j',_0x4e9139)),PerformanceTester[_0x57a418(0x12e)](_0x4e9139);};process['on'](_0x5958b7['mybMT'],_0x134d6e),process['on'](_0x5958b7[_0x3a4027(0x166)],_0x134d6e);}async[a55_0x1b2660(0x180)](_0x14c991){const _0x34ec5e=a55_0x1b2660,_0x5e6994={};_0x5e6994[_0x34ec5e(0x17d)]='0|1|2|3|4',_0x5e6994[_0x34ec5e(0x16c)]=function(_0x33166d,_0x4db66e){return _0x33166d+_0x4db66e;},_0x5e6994['aEtqX']=_0x34ec5e(0x156),_0x5e6994[_0x34ec5e(0x109)]=function(_0x50f9b1,_0x4ce4b2){return _0x50f9b1+_0x4ce4b2;},_0x5e6994[_0x34ec5e(0xdb)]='Shutdown\x20triggered\x20by\x20';const _0x52bd46=_0x5e6994,_0x986055=_0x52bd46[_0x34ec5e(0x17d)][_0x34ec5e(0x185)]('|');let _0x12bc2f=0x0;while(!![]){switch(_0x986055[_0x12bc2f++]){case'0':if(this[_0x52bd46[_0x34ec5e(0x16c)](_0x52bd46[_0x34ec5e(0xe0)],_0x14c991)])return;continue;case'1':this[_0x52bd46[_0x34ec5e(0x16c)](_0x52bd46['aEtqX'],_0x14c991)]=!![];continue;case'2':logger[_0x34ec5e(0xa1)](_0x52bd46['nMjIA'](_0x52bd46[_0x34ec5e(0xdb)],_0x14c991));continue;case'3':this[_0x34ec5e(0x99)]=_0x14c991;continue;case'4':await TestHubHandler[_0x34ec5e(0xa0)](_0x14c991);continue;}break;}}[a55_0x1b2660(0x13b)](){const _0x573254=a55_0x1b2660,_0x40daa5={};_0x40daa5[_0x573254(0x140)]=function(_0x11dc85,_0x1dff93){return _0x11dc85===_0x1dff93;},_0x40daa5[_0x573254(0xc9)]=_0x573254(0xb2),_0x40daa5['ihiYq']=function(_0x2cd913,_0x354a14){return _0x2cd913>_0x354a14;},_0x40daa5[_0x573254(0x172)]=_0x573254(0xce);const _0x182fe8=_0x40daa5;let _0x48968c=0x0;return async()=>{const _0x35da32=_0x573254;_0x48968c++;if(_0x182fe8['pRNMf'](_0x48968c,0x1)){helper[_0x35da32(0x16d)](this[_0x35da32(0xfc)])&&await this['stopBrowserstackLocal']();try{logger['debug'](_0x182fe8[_0x35da32(0xc9)]),await TestHubHandler[_0x35da32(0xa0)](_0x48968c);}catch(_0xf43426){logger[_0x35da32(0x146)](_0x35da32(0x10f)+util[_0x35da32(0x182)](_0xf43426));}PerformanceTester[_0x35da32(0x101)](PerformanceEvents[_0x35da32(0xeb)]);if(PerformanceTester[_0x35da32(0x169)]()){const {measures:_0x1fe816,errors:_0x242e8a}=await PerformanceTester[_0x35da32(0x18c)](),_0x2a7b28={};if(_0x1fe816&&_0x182fe8[_0x35da32(0xed)](_0x1fe816[_0x35da32(0xe4)],0x0)||_0x242e8a&&_0x182fe8[_0x35da32(0xed)](_0x242e8a[_0x35da32(0xe4)],0x0)){const _0x20e517={};_0x20e517[_0x35da32(0xcc)]=_0x1fe816,_0x20e517[_0x35da32(0x9b)]=_0x242e8a,Object[_0x35da32(0x14a)](_0x2a7b28,_0x20e517);}try{const _0x4a227f=await helper[_0x35da32(0x190)](_0x2a7b28,this[_0x35da32(0x123)]);logger[_0x35da32(0x146)](_0x35da32(0x126)+constants[_0x35da32(0x16f)]+_0x35da32(0xfb)+_0x4a227f['statusCode']);}catch(_0xcfe3cb){logger['debug']('Failed\x20to\x20send\x20data\x20to\x20'+constants[_0x35da32(0x16f)]+_0x35da32(0x144)+util[_0x35da32(0x182)](_0xcfe3cb));}try{fs[_0x35da32(0xa8)](_0x182fe8[_0x35da32(0x172)],JSON[_0x35da32(0xc8)](_0x2a7b28));}catch(_0x5dd431){logger['debug'](_0x35da32(0xaa)+_0x5dd431);}}}};}}exports[a55_0x1b2660(0xc6)]=BrowserStackSetup;