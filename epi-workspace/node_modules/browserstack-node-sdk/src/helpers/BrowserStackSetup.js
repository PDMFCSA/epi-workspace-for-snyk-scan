const a91_0x5981f0=a91_0x1160;(function(_0x12878b,_0x2e91c3){const _0x1a03de=a91_0x1160,_0x39cf7e=_0x12878b();while(!![]){try{const _0x478ba0=parseInt(_0x1a03de(0x23e))/0x1+-parseInt(_0x1a03de(0x17f))/0x2*(parseInt(_0x1a03de(0x1bd))/0x3)+parseInt(_0x1a03de(0x208))/0x4*(-parseInt(_0x1a03de(0x149))/0x5)+-parseInt(_0x1a03de(0x1bf))/0x6*(parseInt(_0x1a03de(0x173))/0x7)+-parseInt(_0x1a03de(0x24c))/0x8*(parseInt(_0x1a03de(0x14b))/0x9)+-parseInt(_0x1a03de(0x169))/0xa*(-parseInt(_0x1a03de(0x159))/0xb)+parseInt(_0x1a03de(0x151))/0xc;if(_0x478ba0===_0x2e91c3)break;else _0x39cf7e['push'](_0x39cf7e['shift']());}catch(_0x17a650){_0x39cf7e['push'](_0x39cf7e['shift']());}}}(a91_0x5696,0x2d9a5));const util=require(a91_0x5981f0(0x1aa)),os=require('os'),path=require(a91_0x5981f0(0x1f4)),{v4:uuidv4}=require('uuid'),fs=require('fs'),constants=require(a91_0x5981f0(0x1eb)),logger=require(a91_0x5981f0(0x177))[a91_0x5981f0(0x18f)],fileLogger=require('./logger')[a91_0x5981f0(0x17a)],{getLogDir}=require(a91_0x5981f0(0x177)),helper=require(a91_0x5981f0(0x239)),utilities=require(a91_0x5981f0(0x162)),percyHelper=require(a91_0x5981f0(0x1ea)),hubAllocator=require('../hubAllocationMethods'),PerformanceTester=require(a91_0x5981f0(0x24f)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a91_0x5981f0(0x180)),{setPercyFlag}=require(a91_0x5981f0(0x202)),TestHubHandler=require(a91_0x5981f0(0x214)),timeoutPromise=require(a91_0x5981f0(0x1f0)),BrowserstackCLI=require('../bin/v2/browserstackCLI'),{getEdsInstrumentationAPIUrl}=require(a91_0x5981f0(0x220)),ClientTroubleShootingService=require(a91_0x5981f0(0x1c8));class BrowserStackSetup{constructor(_0x144b13,_0x28b20e){const _0x2af3a9=a91_0x5981f0,_0x52ed2b={'DqXVX':_0x2af3a9(0x196),'KqJIw':function(_0xfed0df){return _0xfed0df();},'fYsBx':_0x2af3a9(0x1ab)},_0x3a391e=_0x52ed2b[_0x2af3a9(0x18c)][_0x2af3a9(0x1c1)]('|');let _0x3c89a2=0x0;while(!![]){switch(_0x3a391e[_0x3c89a2++]){case'0':this[_0x2af3a9(0x19c)]=helper[_0x2af3a9(0x163)](helper[_0x2af3a9(0x19e)](_0x144b13));continue;case'1':this['browserstackLocal']=null;continue;case'2':this[_0x2af3a9(0x1e5)]=_0x52ed2b[_0x2af3a9(0x183)](uuidv4);continue;case'3':this[_0x2af3a9(0x19c)]['platforms']=this[_0x2af3a9(0x19c)][_0x2af3a9(0x1e3)]||[];continue;case'4':this[_0x2af3a9(0x245)]={};continue;case'5':PerformanceTester[_0x2af3a9(0x1ee)]();continue;case'6':this['config'][_0x2af3a9(0x246)][_0x2af3a9(0x219)]=!helper[_0x2af3a9(0x1f5)]()||helper[_0x2af3a9(0x1b4)](this['config'][_0x2af3a9(0x246)][_0x2af3a9(0x219)]);continue;case'7':if(this[_0x2af3a9(0x19c)][_0x2af3a9(0x237)])throw new Error(this[_0x2af3a9(0x19c)][_0x2af3a9(0x237)]);continue;case'8':helper[_0x2af3a9(0x1fe)](this[_0x2af3a9(0x19c)],this[_0x2af3a9(0x1e9)]);continue;case'9':helper['setCredentialsFromYmlConfig'](this[_0x2af3a9(0x19c)]);continue;case'10':this['unhandledErrors']=[];continue;case'11':if(helper['isUndefined'](this[_0x2af3a9(0x19c)]))throw new Error(_0x52ed2b[_0x2af3a9(0x243)]);continue;case'12':this[_0x2af3a9(0x22c)]=helper[_0x2af3a9(0x150)]();continue;case'13':this[_0x2af3a9(0x1e9)]=helper[_0x2af3a9(0x21d)](_0x144b13);continue;case'14':helper[_0x2af3a9(0x226)](this[_0x2af3a9(0x19c)]);continue;case'15':helper['normalizeTestReportingEnvVars']();continue;case'16':helper[_0x2af3a9(0x19b)](this['config'],this[_0x2af3a9(0x1e9)],this[_0x2af3a9(0x22c)]);continue;case'17':this['config'][_0x2af3a9(0x246)][_0x2af3a9(0x240)]=!helper[_0x2af3a9(0x1f5)]()||helper[_0x2af3a9(0x1b4)](this[_0x2af3a9(0x19c)][_0x2af3a9(0x246)]['skipSessionStatus']);continue;case'18':global['framework']=_0x28b20e;continue;case'19':this['percy']=null;continue;case'20':this['framework']=_0x28b20e;continue;case'21':this[_0x2af3a9(0x19c)][_0x2af3a9(0x246)]=this['config'][_0x2af3a9(0x246)]||{};continue;case'22':helper[_0x2af3a9(0x1b5)](this[_0x2af3a9(0x19c)],this['cliConfig'],this[_0x2af3a9(0x22c)]);continue;}break;}}[a91_0x5981f0(0x14d)](_0x900d4a){const _0x11638c=a91_0x5981f0,_0x3aecbb={'lAgHl':_0x11638c(0x14a),'GoEll':function(_0x49bb9a,_0x20d900){return _0x49bb9a===_0x20d900;},'rcAXC':_0x11638c(0x211),'xtjtX':_0x11638c(0x1b8),'fAJKU':function(_0x119176,_0x8749f2){return _0x119176<_0x8749f2;},'TfkHC':function(_0x1bfdb7,_0x1b444d){return _0x1bfdb7(_0x1b444d);},'FpCnX':_0x11638c(0x210),'jioCt':_0x11638c(0x1d6),'KVuCd':_0x11638c(0x201),'gkwHx':'parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','RoAdV':_0x11638c(0x222),'gpTur':_0x11638c(0x22e),'GijbX':'SIGHUP','bjBvA':function(_0x27b927,_0x279e1a){return _0x27b927!==_0x279e1a;},'oKjDi':_0x11638c(0x14e),'JstXi':'SIGABRT','iJILK':_0x11638c(0x18b),'ELCkM':_0x11638c(0x1d8),'dhiYT':'beforeExit'},_0x2555d8=this['framework'];global['config']=this[_0x11638c(0x19c)],helper[_0x11638c(0x172)](this[_0x11638c(0x19c)]),this[_0x11638c(0x1a4)]=null,global[_0x11638c(0x1e5)]=this[_0x11638c(0x1e5)],logger['info'](_0x11638c(0x1e4)+this[_0x11638c(0x1e5)]),!this['config'][_0x11638c(0x1f6)]&&(this['config'][_0x11638c(0x1f6)]=this[_0x11638c(0x19c)][_0x11638c(0x236)]||{});if(helper['isUndefined'](helper[_0x11638c(0x1ec)](this['config']))||helper['isUndefined'](helper[_0x11638c(0x233)](this[_0x11638c(0x19c)])))throw new Error(_0x3aecbb[_0x11638c(0x1c6)]);helper[_0x11638c(0x21b)](this[_0x11638c(0x19c)])&&helper[_0x11638c(0x1f3)](helper[_0x11638c(0x22a)](this[_0x11638c(0x19c)]))&&(!helper[_0x11638c(0x1f3)](this['config']['browserStackLocalOptions'])&&_0x3aecbb[_0x11638c(0x192)](this[_0x11638c(0x19c)]['browserStackLocalOptions']['constructor'],Object)?!helper[_0x11638c(0x1b4)](this['config'][_0x11638c(0x1f6)][_0x11638c(0x175)])&&(this[_0x11638c(0x19c)][_0x11638c(0x1f6)][_0x11638c(0x17c)]=helper[_0x11638c(0x188)]()):this[_0x11638c(0x19c)][_0x11638c(0x1f6)]={'localIdentifier':helper[_0x11638c(0x188)]()});this[_0x11638c(0x19c)][_0x11638c(0x1f6)][_0x11638c(0x175)]=helper[_0x11638c(0x1b4)](this[_0x11638c(0x19c)][_0x11638c(0x1f6)]['skipBinaryInitialisation']),helper[_0x11638c(0x17d)](this[_0x11638c(0x19c)]);if(_0x3aecbb['GoEll'](_0x2555d8,_0x3aecbb[_0x11638c(0x199)]))return;this['handleExceptions']();process[_0x11638c(0x225)][_0x11638c(0x218)]&&(this[_0x11638c(0x19c)][_0x11638c(0x198)]=helper[_0x11638c(0x1b4)](process['env'][_0x11638c(0x218)]),this[_0x11638c(0x19c)][_0x11638c(0x19a)]=this[_0x11638c(0x19c)][_0x11638c(0x19a)]||{});helper[_0x11638c(0x17e)](this[_0x11638c(0x19c)])&&(process['env']['BROWSERSTACK_TURBOSCALE']=!![]);if(!helper[_0x11638c(0x1f5)]()){try{process[_0x11638c(0x225)][_0x11638c(0x15c)]=_0x2555d8,utilities[_0x11638c(0x1d0)](_0x3aecbb[_0x11638c(0x238)],{},this[_0x11638c(0x19c)],this[_0x11638c(0x1cd)]);}catch(_0xdb7b2){logger[_0x11638c(0x1a0)](_0x11638c(0x153)+_0xdb7b2);}return;}if(helper[_0x11638c(0x1c3)](_0x2555d8)){if(global[_0x11638c(0x15e)])return;_0x3aecbb['fAJKU'](_0x3aecbb['TfkHC'](parseInt,helper[_0x11638c(0x161)](_0x3aecbb[_0x11638c(0x23d)])),0x3)&&(this['config'][_0x11638c(0x24e)]=![]),_0x3aecbb[_0x11638c(0x192)](helper[_0x11638c(0x257)](helper['getPackageVersion'](_0x3aecbb[_0x11638c(0x23d)]),_0x3aecbb[_0x11638c(0x1ce)]),0x1)&&(this[_0x11638c(0x19c)]['useW3C']=!![]);}(helper['isUndefined'](this[_0x11638c(0x19c)][_0x11638c(0x1e3)])||helper['isUndefined'](this[_0x11638c(0x19c)][_0x11638c(0x1e3)][_0x11638c(0x17b)]))&&(helper[_0x11638c(0x1f3)](this['config'][_0x11638c(0x1d9)])?logger['info'](_0x3aecbb[_0x11638c(0x1b6)]):logger[_0x11638c(0x1d1)](_0x3aecbb[_0x11638c(0x14c)]),this[_0x11638c(0x19c)][_0x11638c(0x1e3)]=[]);!this[_0x11638c(0x19c)][_0x11638c(0x246)]&&(this[_0x11638c(0x19c)][_0x11638c(0x246)]={});try{process['env'][_0x11638c(0x15c)]=_0x900d4a['_'][0x0],utilities[_0x11638c(0x1d0)](_0x3aecbb[_0x11638c(0x238)],{},this['config'],this[_0x11638c(0x1cd)]);}catch(_0x38c826){logger[_0x11638c(0x1a0)](_0x11638c(0x153)+_0x38c826);}!this[_0x11638c(0x19c)][_0x11638c(0x21e)]&&logger[_0x11638c(0x23b)](constants[_0x11638c(0x24b)]),this[_0x11638c(0x235)]=this[_0x11638c(0x235)]['bind'](this),process['on'](_0x3aecbb['RoAdV'],this[_0x11638c(0x235)]),process['on'](_0x3aecbb['gpTur'],this['intExitHandler']),process['on'](_0x3aecbb[_0x11638c(0x1c2)],this[_0x11638c(0x235)]),_0x3aecbb[_0x11638c(0x1d2)](process['platform'],_0x3aecbb['oKjDi'])?(process['on'](_0x3aecbb[_0x11638c(0x197)],this[_0x11638c(0x235)]),process['on'](_0x3aecbb[_0x11638c(0x1b2)],this[_0x11638c(0x235)])):process['on'](_0x3aecbb['ELCkM'],this['intExitHandler']),process['on'](_0x3aecbb['dhiYT'],this[_0x11638c(0x230)]());}async[a91_0x5981f0(0x1b0)](_0x504924){const _0x4edbe5=a91_0x5981f0,_0x3f9aee={'qcquE':'ats-repeater','btUGo':_0x4edbe5(0x20f),'pqwZZ':_0x4edbe5(0x1b3),'WusXB':function(_0x20c048,_0x890f00){return _0x20c048===_0x890f00;},'FsciU':_0x4edbe5(0x216),'iUKJz':function(_0x24c87c,_0x4d410b){return _0x24c87c+_0x4d410b;},'CxeSL':'?caps=','iAJyz':function(_0x58bba4,_0x1f9f12){return _0x58bba4(_0x1f9f12);},'QoHgZ':_0x4edbe5(0x224)};this[_0x4edbe5(0x14d)](_0x504924);if(helper['isTurboScaleSession'](this[_0x4edbe5(0x19c)])){const _0x51b6c1=await helper[_0x4edbe5(0x1f9)](this[_0x4edbe5(0x19c)]);this[_0x4edbe5(0x19c)][_0x4edbe5(0x181)]=_0x51b6c1,_0x51b6c1[_0x4edbe5(0x185)]&&helper[_0x4edbe5(0x174)](this[_0x4edbe5(0x19c)]['browserstackLocal'])&&helper[_0x4edbe5(0x1b4)](this[_0x4edbe5(0x19c)]['browserstackLocal'])&&(this[_0x4edbe5(0x19c)]['browserStackLocalOptions'][_0x4edbe5(0x17c)]=_0x3f9aee[_0x4edbe5(0x186)],this['config']['browserStackLocalOptions'][_0x3f9aee['btUGo']]=_0x51b6c1[_0x4edbe5(0x14f)][_0x4edbe5(0x20a)](','),this['config'][_0x4edbe5(0x1f6)]['forceLocal']=_0x3f9aee[_0x4edbe5(0x1a7)]),this[_0x4edbe5(0x19c)][_0x4edbe5(0x1ff)]=_0x51b6c1[_0x4edbe5(0x16f)],this[_0x4edbe5(0x1cd)]&&_0x3f9aee[_0x4edbe5(0x191)](this[_0x4edbe5(0x1cd)][_0x4edbe5(0x15f)](),_0x3f9aee[_0x4edbe5(0x256)])?this[_0x4edbe5(0x19c)]['turboScaleUrl']=_0x3f9aee[_0x4edbe5(0x1a2)](_0x51b6c1[_0x4edbe5(0x189)],_0x3f9aee[_0x4edbe5(0x1cf)]):constants[_0x4edbe5(0x16d)]=helper[_0x4edbe5(0x1a3)](this[_0x4edbe5(0x19c)]),logger[_0x4edbe5(0x1a0)](_0x4edbe5(0x232)+constants['hubUrl']);}helper[_0x4edbe5(0x152)](this[_0x4edbe5(0x19c)]),this['setupKeepAlive'](),_0x3f9aee[_0x4edbe5(0x179)](setPercyFlag,this),await this[_0x4edbe5(0x1a5)](),![_0x3f9aee[_0x4edbe5(0x1de)],_0x3f9aee['FsciU']][_0x4edbe5(0x1a1)](this[_0x4edbe5(0x1cd)])&&!helper[_0x4edbe5(0x17e)](this[_0x4edbe5(0x19c)])&&!helper[_0x4edbe5(0x187)]()['central_scanner']&&await this[_0x4edbe5(0x254)]();}async[a91_0x5981f0(0x215)](){const _0x4321cd=a91_0x5981f0,_0x405d8e={};_0x405d8e[_0x4321cd(0x20e)]=function(_0x406d0b,_0x1c7f02){return _0x406d0b===_0x1c7f02;},_0x405d8e[_0x4321cd(0x155)]=_0x4321cd(0x1d7),_0x405d8e[_0x4321cd(0x19f)]='Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.',_0x405d8e[_0x4321cd(0x249)]='Percy\x20started\x20successfully',_0x405d8e[_0x4321cd(0x1fc)]=_0x4321cd(0x1b3),_0x405d8e[_0x4321cd(0x247)]='beforeExit';const _0xdc8034=_0x405d8e;if(helper[_0x4321cd(0x1b4)](this[_0x4321cd(0x19c)][_0x4321cd(0x207)])&&(!this['percy']||!this[_0x4321cd(0x207)][_0x4321cd(0x1d5)]()))try{this[_0x4321cd(0x207)]=await percyHelper[_0x4321cd(0x1dc)](this[_0x4321cd(0x19c)]);if(!this[_0x4321cd(0x207)]){process[_0x4321cd(0x225)][_0x4321cd(0x1c9)]=_0xdc8034[_0x4321cd(0x155)];throw new Error(_0xdc8034[_0x4321cd(0x19f)]);}logger['info'](_0xdc8034['QOKQV']),process[_0x4321cd(0x225)][_0x4321cd(0x1c9)]=_0xdc8034[_0x4321cd(0x1fc)];let _0x10f650=0x0;const _0x2ec5e1=async()=>{const _0xfbad3c=_0x4321cd;_0x10f650++,_0xdc8034[_0xfbad3c(0x20e)](_0x10f650,0x1)&&await this[_0xfbad3c(0x20d)]();};process['on'](_0xdc8034['rCTWn'],_0x2ec5e1);}catch(_0x5ea4bf){process['env'][_0x4321cd(0x1c9)]=_0xdc8034[_0x4321cd(0x155)],logger[_0x4321cd(0x1a0)](_0x4321cd(0x1e7)+_0x5ea4bf);throw new Error(_0x5ea4bf[_0x4321cd(0x154)]());}}async[a91_0x5981f0(0x20d)](){const _0x469e7e=a91_0x5981f0,_0x217d96={};_0x217d96[_0x469e7e(0x167)]=_0x469e7e(0x165),_0x217d96['qoyXf']=_0x469e7e(0x19d);const _0x47b12e=_0x217d96;if(this[_0x469e7e(0x207)]&&this['percy']['isRunning']())try{await percyHelper[_0x469e7e(0x20d)](this['percy']),logger[_0x469e7e(0x23b)](_0x47b12e[_0x469e7e(0x167)]);}catch(_0x2183aa){logger[_0x469e7e(0x237)](_0x47b12e[_0x469e7e(0x160)],_0x2183aa[_0x469e7e(0x1ef)]);}}async['setupBrowserstackLocal'](){const _0x6bcff3=a91_0x5981f0,_0xa2398={};_0xa2398[_0x6bcff3(0x205)]='Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled',_0xa2398[_0x6bcff3(0x1fd)]=_0x6bcff3(0x190);const _0x307cca=_0xa2398;if(helper['isBrowserstackInfra']()&&helper[_0x6bcff3(0x1b4)](this[_0x6bcff3(0x19c)][_0x6bcff3(0x1c7)])&&(!this[_0x6bcff3(0x1c7)]||!this[_0x6bcff3(0x1c7)][_0x6bcff3(0x1d5)]()))try{if(this[_0x6bcff3(0x19c)][_0x6bcff3(0x1f6)][_0x6bcff3(0x175)]){logger['debug'](_0x307cca[_0x6bcff3(0x205)]);return;}this[_0x6bcff3(0x1c7)]=await helper[_0x6bcff3(0x1af)](this[_0x6bcff3(0x19c)]),logger[_0x6bcff3(0x23b)](_0x307cca[_0x6bcff3(0x1fd)]);}catch(_0x3324a7){logger[_0x6bcff3(0x1a0)](_0x3324a7);throw new Error(_0x3324a7[_0x6bcff3(0x154)]());}}async[a91_0x5981f0(0x253)](){const _0x3ed16a=a91_0x5981f0,_0x2a5944={};_0x2a5944[_0x3ed16a(0x164)]=_0x3ed16a(0x221),_0x2a5944[_0x3ed16a(0x22b)]='Error\x20occured\x20while\x20stopping\x20local\x20binary';const _0x26341f=_0x2a5944;if(this['browserstackLocal']&&this[_0x3ed16a(0x1c7)]['isRunning']())try{await helper[_0x3ed16a(0x244)](this['browserstackLocal']),logger['info'](_0x26341f[_0x3ed16a(0x164)]);}catch(_0x40cf68){logger[_0x3ed16a(0x237)](_0x26341f['tBrQt'],_0x40cf68[_0x3ed16a(0x1ef)]);}}async[a91_0x5981f0(0x254)](){const _0x5ab28e=a91_0x5981f0;return PerformanceTester['measureWrapper'](PerformanceAutEvents[_0x5ab28e(0x1ca)],async()=>{const _0x128e71=_0x5ab28e;await hubAllocator[_0x128e71(0x168)](this[_0x128e71(0x19c)]);})();}async[a91_0x5981f0(0x18a)](){const _0x29d5ae=a91_0x5981f0,_0x1acd91={'cBGfX':function(_0x16eb6e,_0x4d756b){return _0x16eb6e(_0x4d756b);},'NvBmx':_0x29d5ae(0x193),'nBjhF':function(_0x426d38,_0x1d6e88,_0x14ffa3,_0x2773aa,_0x24142b,_0x532902,_0x3c2aa1){return _0x426d38(_0x1d6e88,_0x14ffa3,_0x2773aa,_0x24142b,_0x532902,_0x3c2aa1);},'Qkfav':'BrowserstackHealing.init\x20method\x20timed\x20out','fdoaF':_0x29d5ae(0x24d),'Uvuxw':function(_0x1f586e,_0x686f11){return _0x1f586e(_0x686f11);},'VewWX':'../../package.json','znQsT':'BrowserstackHealing.init','MPDuI':function(_0x4a2986,_0x576d64){return _0x4a2986===_0x576d64;},'gRGNe':_0x29d5ae(0x1b3),'IoEkX':function(_0xfaf2df,_0x57967d){return _0xfaf2df===_0x57967d;},'hCKYx':_0x29d5ae(0x176),'Spehs':_0x29d5ae(0x231),'BrMuH':_0x29d5ae(0x213),'sCrez':function(_0x4563cc,_0x57cc91){return _0x4563cc(_0x57cc91);},'sfyIP':_0x29d5ae(0x170),'ahlbA':function(_0x3d0a77,_0x225fda){return _0x3d0a77>=_0x225fda;},'IITae':function(_0x23522d,_0xbe09c6){return _0x23522d<_0xbe09c6;},'eOwEV':'tcg\x20config\x20setup\x20successful.','qNoOK':'aiHeal:tcgAuth','VDMcD':function(_0x1bb80c){return _0x1bb80c();}},_0x556000=PerformanceTester[_0x29d5ae(0x1ba)](_0x1acd91['qNoOK'],async()=>{const _0x548ec0=_0x29d5ae;try{const _0x2c6bd9=new Date(),_0xd99d1=helper['getProxyConfigForTcg'](this[_0x548ec0(0x19c)]),_0x5ae848=_0x1acd91[_0x548ec0(0x241)](require,path['join'](__dirname,_0x1acd91[_0x548ec0(0x1ae)])),_0x45b103=_0x1acd91[_0x548ec0(0x1ac)](timeoutPromise,constants[_0x548ec0(0x21c)],_0x1acd91[_0x548ec0(0x250)],_0x1acd91['fdoaF'],_0x2c6bd9,this[_0x548ec0(0x19c)],this[_0x548ec0(0x1cd)]),_0x1fcbb8={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x1acd91[_0x548ec0(0x23f)](require,_0x1acd91[_0x548ec0(0x251)])[_0x548ec0(0x1df)],'methodUsed':_0x1acd91[_0x548ec0(0x248)],'proxyConfig':_0xd99d1,'os':os[_0x548ec0(0x20b)]()};if(_0xd99d1&&_0xd99d1[_0x548ec0(0x23a)]){utilities['fireFunnelTestEvent'](constants['AI_PROXY_FAILURE'],_0x1fcbb8,this[_0x548ec0(0x19c)],this[_0x548ec0(0x1cd)]);return;}const _0x57157b={};_0x57157b[_0x548ec0(0x182)]=_0xd99d1;const _0x35c123=await Promise[_0x548ec0(0x16a)]([_0x5ae848['init'](this[_0x548ec0(0x19c)][_0x548ec0(0x1bb)],this[_0x548ec0(0x19c)][_0x548ec0(0x1e8)],constants[_0x548ec0(0x166)],_0x1acd91[_0x548ec0(0x23f)](require,_0x1acd91[_0x548ec0(0x251)])[_0x548ec0(0x1df)],_0x57157b)[_0x548ec0(0x212)](_0x1c674e=>{const _0x88d061=_0x548ec0;return _0x45b103[_0x88d061(0x1fa)](),_0x1c674e;}),_0x45b103]);_0x35c123[_0x548ec0(0x22f)]=_0x1acd91[_0x548ec0(0x16b)](_0x35c123['isHealingEnabled'],_0x1acd91['gRGNe'])||_0x1acd91[_0x548ec0(0x22d)](_0x35c123['isHealingEnabled'],!![]);const _0xdae2c4=_0x1acd91[_0x548ec0(0x16b)](this['config'][_0x548ec0(0x252)],!![])||_0x1acd91[_0x548ec0(0x16b)](this[_0x548ec0(0x19c)][_0x548ec0(0x252)],_0x1acd91['gRGNe']);if(_0x1acd91[_0x548ec0(0x22d)](_0x35c123[_0x548ec0(0x1ef)],constants[_0x548ec0(0x1fb)])&&_0xdae2c4)logger[_0x548ec0(0x23b)](_0x1acd91[_0x548ec0(0x1ad)]);else{if(!_0x35c123[_0x548ec0(0x18d)]&&_0x1acd91[_0x548ec0(0x22d)](_0x35c123[_0x548ec0(0x1b7)],0x1f7)&&_0xdae2c4)logger[_0x548ec0(0x23b)](_0x1acd91[_0x548ec0(0x1c5)]),utilities[_0x548ec0(0x1d0)](constants[_0x548ec0(0x171)],_0x1fcbb8,this[_0x548ec0(0x19c)],this[_0x548ec0(0x1cd)]);else{if(!_0x35c123['isAuthenticated']&&_0xdae2c4){logger['info'](_0x1acd91[_0x548ec0(0x229)]);const _0x299d77={'tcgUrl':constants[_0x548ec0(0x166)],'sdkVersion':_0x1acd91[_0x548ec0(0x157)](require,_0x1acd91[_0x548ec0(0x251)])['version'],'methodUsed':_0x1acd91['znQsT'],'proxyConfig':_0xd99d1,'os':os[_0x548ec0(0x20b)]()};utilities[_0x548ec0(0x1d0)](constants['TCG_AUTH_FAILURE'],_0x299d77,this[_0x548ec0(0x19c)],this['framework']);}else{if(_0x35c123['isAuthenticated']&&!_0x35c123[_0x548ec0(0x22f)]&&_0xdae2c4)logger['info'](_0x1acd91[_0x548ec0(0x20c)]);else{if(_0x1acd91[_0x548ec0(0x15b)](_0x35c123['status'],0xc8)&&_0x1acd91[_0x548ec0(0x1f1)](_0x35c123['status'],0x12c))utilities[_0x548ec0(0x1d0)](constants[_0x548ec0(0x203)],_0x1fcbb8,this['config'],this[_0x548ec0(0x1cd)]);else{if(_0x1acd91[_0x548ec0(0x15b)](_0x35c123[_0x548ec0(0x1b7)],0x190))_0x1fcbb8[_0x548ec0(0x1b7)]=_0x35c123['status'],utilities[_0x548ec0(0x1d0)](constants[_0x548ec0(0x15d)],_0x1fcbb8,this[_0x548ec0(0x19c)],this[_0x548ec0(0x1cd)]);else!_0x35c123[_0x548ec0(0x1b7)]&&utilities[_0x548ec0(0x1d0)](constants[_0x548ec0(0x195)],_0x1fcbb8,this[_0x548ec0(0x19c)],this[_0x548ec0(0x1cd)]);}}}}}if(_0x35c123[_0x548ec0(0x18d)]&&_0x35c123[_0x548ec0(0x22f)]){const _0x53b450={};_0x53b450[_0x548ec0(0x1a8)]=_0x35c123;const _0x1c7cb6=_0x53b450;_0xd99d1&&(_0x1c7cb6[_0x548ec0(0x234)]=_0xd99d1),_0x1c7cb6[_0x548ec0(0x1cd)]=this[_0x548ec0(0x1cd)],_0x1c7cb6['bstackConfig']=this[_0x548ec0(0x19c)],helper[_0x548ec0(0x1bc)](_0x1c7cb6),logger[_0x548ec0(0x1a0)](_0x1acd91[_0x548ec0(0x1d3)]);}}catch(_0x1002f2){logger['debug'](_0x548ec0(0x1f2)+(_0x1002f2[_0x548ec0(0x1ef)]?_0x1002f2[_0x548ec0(0x1ef)]:''));}});await _0x1acd91[_0x29d5ae(0x255)](_0x556000);}[a91_0x5981f0(0x194)](){const _0xc77c6b=a91_0x5981f0,_0x534c9c={'UbgvN':function(_0x4f8a10,_0x28eab9){return _0x4f8a10(_0x28eab9);},'yxTAu':_0xc77c6b(0x204)};_0x534c9c[_0xc77c6b(0x242)](require,_0x534c9c[_0xc77c6b(0x178)])();}[a91_0x5981f0(0x1c0)](){const _0x5bb5a5=a91_0x5981f0,_0x1bc363={};_0x1bc363[_0x5bb5a5(0x228)]=_0x5bb5a5(0x1e2),_0x1bc363['muZoH']='unhandledRejection',_0x1bc363[_0x5bb5a5(0x21a)]=_0x5bb5a5(0x206);const _0x50a0aa=_0x1bc363,_0x1715ff=_0x2f5bc4=>{const _0x1a2299=_0x5bb5a5,_0x5552c9=_0x50a0aa[_0x1a2299(0x228)][_0x1a2299(0x1c1)]('|');let _0x50c279=0x0;while(!![]){switch(_0x5552c9[_0x50c279++]){case'0':PerformanceTester[_0x1a2299(0x1e1)](_0x2f5bc4);continue;case'1':logger[_0x1a2299(0x237)](_0x2f5bc4[_0x1a2299(0x1ef)]);continue;case'2':ClientTroubleShootingService[_0x1a2299(0x16c)]();continue;case'3':logger[_0x1a2299(0x1a0)](util['format'](_0x2f5bc4));continue;case'4':this['unhandledErrors'][_0x1a2299(0x223)](util[_0x1a2299(0x24a)]('%j',_0x2f5bc4));continue;}break;}};process['on'](_0x50a0aa[_0x5bb5a5(0x1b1)],_0x1715ff),process['on'](_0x50a0aa[_0x5bb5a5(0x21a)],_0x1715ff);}async[a91_0x5981f0(0x235)](_0x2ccfa5){const _0x7acd7c=a91_0x5981f0,_0xb55476={};_0xb55476['DVUou']='0|6|5|2|1|7|4|3',_0xb55476[_0x7acd7c(0x1ed)]=function(_0x4db82f,_0x15768f){return _0x4db82f+_0x15768f;},_0xb55476[_0x7acd7c(0x1f8)]=_0x7acd7c(0x1e6),_0xb55476[_0x7acd7c(0x1a6)]='Shutdown\x20triggered\x20by\x20';const _0x22918c=_0xb55476,_0x3b7792=_0x22918c['DVUou']['split']('|');let _0x19b76b=0x0;while(!![]){switch(_0x3b7792[_0x19b76b++]){case'0':if(this[_0x22918c['KReuR'](_0x22918c['wYntp'],_0x2ccfa5)])return;continue;case'1':await ClientTroubleShootingService['reportProcessInterruptionSituation'](_0x2ccfa5);continue;case'2':this[_0x7acd7c(0x1a4)]=_0x2ccfa5;continue;case'3':await BrowserstackCLI[_0x7acd7c(0x15a)]()[_0x7acd7c(0x227)]();continue;case'4':await ClientTroubleShootingService['reportFinalDetectionState']();continue;case'5':logger[_0x7acd7c(0x23b)](_0x22918c['KReuR'](_0x22918c['VKjgo'],_0x2ccfa5));continue;case'6':this[_0x22918c[_0x7acd7c(0x1ed)](_0x22918c['wYntp'],_0x2ccfa5)]=!![];continue;case'7':await TestHubHandler['stop'](_0x2ccfa5);continue;}break;}}[a91_0x5981f0(0x230)](){const _0x217138=a91_0x5981f0,_0x3ab150={'rkwSn':function(_0x479a92,_0x1bc180){return _0x479a92===_0x1bc180;},'rPFwD':_0x217138(0x209),'xpDeJ':function(_0xfba46e,_0x322c61){return _0xfba46e>_0x322c61;},'XNXuj':function(_0x3b81c8,_0x30198f){return _0x3b81c8>_0x30198f;},'mZQzV':function(_0xc7cb70,_0x9653ca){return _0xc7cb70(_0x9653ca);},'zVnRn':function(_0x10b055){return _0x10b055();},'HGiHu':_0x217138(0x21f)};let _0x303af1=0x0;return async()=>{const _0x18f5f8=_0x217138;_0x303af1++;if(_0x3ab150[_0x18f5f8(0x156)](_0x303af1,0x1)){helper[_0x18f5f8(0x217)](this['framework'])&&await this[_0x18f5f8(0x253)]();try{logger['debug'](_0x3ab150[_0x18f5f8(0x16e)]),await TestHubHandler[_0x18f5f8(0x227)](_0x303af1),await ClientTroubleShootingService[_0x18f5f8(0x16c)](),await BrowserstackCLI[_0x18f5f8(0x15a)]()[_0x18f5f8(0x227)]('1');}catch(_0x252f83){logger[_0x18f5f8(0x1a0)](_0x18f5f8(0x1da)+util[_0x18f5f8(0x24a)](_0x252f83));}PerformanceTester[_0x18f5f8(0x200)](PerformanceEvents[_0x18f5f8(0x1db)]);if(PerformanceTester[_0x18f5f8(0x184)]()){const {measures:_0x2e2319,errors:_0x38bbd9}=await PerformanceTester['finalize'](),_0x35dffc={};if(_0x2e2319&&_0x3ab150[_0x18f5f8(0x1a9)](_0x2e2319[_0x18f5f8(0x17b)],0x0)||_0x38bbd9&&_0x3ab150['XNXuj'](_0x38bbd9[_0x18f5f8(0x17b)],0x0)){const _0x162e34={};_0x162e34[_0x18f5f8(0x1c4)]=_0x2e2319,_0x162e34[_0x18f5f8(0x1b9)]=_0x38bbd9,Object['assign'](_0x35dffc,_0x162e34);}try{const _0x4675bd=await helper[_0x18f5f8(0x23c)](_0x35dffc,this['config']);logger[_0x18f5f8(0x1a0)](_0x18f5f8(0x1be)+_0x3ab150[_0x18f5f8(0x158)](getEdsInstrumentationAPIUrl,'')+_0x18f5f8(0x18e)+_0x4675bd['statusCode']);}catch(_0x387350){logger['debug'](_0x18f5f8(0x1e0)+_0x3ab150[_0x18f5f8(0x158)](getEdsInstrumentationAPIUrl,'')+'\x20with\x20error\x20'+util[_0x18f5f8(0x24a)](_0x387350));}try{fs[_0x18f5f8(0x1cb)](path[_0x18f5f8(0x20a)](_0x3ab150[_0x18f5f8(0x1f7)](getLogDir),_0x3ab150['HGiHu']),JSON[_0x18f5f8(0x1dd)](_0x35dffc));}catch(_0x22ed76){logger[_0x18f5f8(0x1a0)]('Error\x20in\x20writing\x20events\x20to\x20file\x20'+_0x22ed76);}}}logger&&logger[_0x18f5f8(0x1d4)](),fileLogger&&fileLogger[_0x18f5f8(0x1d4)]();};}}function a91_0x1160(_0x1c93e7,_0x3f9ef9){const _0x5696d4=a91_0x5696();return a91_0x1160=function(_0x1160b2,_0x17510c){_0x1160b2=_0x1160b2-0x149;let _0x454759=_0x5696d4[_0x1160b2];return _0x454759;},a91_0x1160(_0x1c93e7,_0x3f9ef9);}exports[a91_0x5981f0(0x1cc)]=BrowserStackSetup;function a91_0x5696(){const _0x42223b=['SDKTestAttempted','exceptions','measureWrapper','accessKey','setupTcgConfigFile','27879cKEOqL','Data\x20sent\x20successfully\x20to\x20','6OIqNYN','handleExceptions','split','GijbX','requireSeleniumWebdriverCheck','measures','Spehs','lAgHl','browserstackLocal','../bin/utils/clientTroubleshootingService','BROWSERSTACK_PERCY','HUB_MANAGEMENT','writeFileSync','default','framework','jioCt','CxeSL','fireFunnelTestEvent','warn','bjBvA','eOwEV','close','isRunning','4.5.0','false','SIGBREAK','parallelsPerPlatform','Error\x20in\x20sending\x20testhub\x20stop:\x20','SDK_CLEANUP','startPercy','stringify','QoHgZ','version','Failed\x20to\x20send\x20data\x20to\x20','captureError','1|3|4|0|2','platforms','SDK\x20run\x20started\x20with\x20id:\x20','sdkRunId','handled','Error\x20in\x20percy\x20setup\x20','userName','cliConfig','./percy/utils','../bin/utils/constants','getUserName','KReuR','startMonitoring','message','./timeoutPromise','IITae','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','isUndefined','path','isBrowserstackInfra','browserStackLocalOptions','zVnRn','wYntp','getTurboScaleGridDetails','cancel','UPGRADE_REQUIRED','JOwnS','KfTnS','setBrowserstackInfraFromConfig','turboScaleUrl','end','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','./testhub/utils','AI_INIT_SUCCESSFUL','./setKeepAlive','TDueo','uncaughtException','percy','107760cpyNcS','Calling\x20Build\x20Stop\x20from\x20ExitHandler','join','platform','sfyIP','stopPercy','OaQHh','custom-repeater','selenium-webdriver','integrations','then','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','./testhub/testhubHandler','setupPercy','playwright','checkStopLocalBinaryOnExit','BROWSERSTACK_TURBOSCALE','skipSessionName','oBFDW','getLocalConfig','TCG_AUTH_TIMEOUT','setCLICaps','disableAutoCaptureLogs','events.json','../bin/utils/apiUtilityMethods','Local\x20binary\x20stopped','SIGTERM','push','codeceptjs','env','setLogDir','stop','hNBBV','BrMuH','getLocalIdentifier','tBrQt','envConfig','IoEkX','SIGINT','isHealingEnabled','exitHandler','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','getAccessKey','proxyConfig','intExitHandler','localOptions','error','xtjtX','./helper','proxyUrl','info','sendToEDS','FpCnX','276735CdQAmn','Uvuxw','skipSessionStatus','cBGfX','UbgvN','fYsBx','stopLocalBinary','errorMessage','testContextOptions','rCTWn','znQsT','QOKQV','format','AUTOLOGCAPTURE_NOTIFICATION','219368DFyTmf','BrowserstackHealingInitFailed','useW3C','./performance/performance-tester','Qkfav','VewWX','selfHeal','stopBrowserstackLocal','setUpHubUrl','VDMcD','FsciU','compareVersions','5brpONE','userName\x20or\x20accessKey\x20is\x20not\x20defined','99MNGSTn','gkwHx','preInitialize','win32','customRepeaters','setEnvCaps','6263208NumPfg','setProxySettings','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','toString','qbyFR','rkwSn','sCrez','mZQzV','22mOvhIw','getInstance','ahlbA','FRAMEWORK','AI_INIT_FAILURE','__isPlaywrightInstalled','toLowerCase','qoyXf','getPackageVersion','./utilities','readConfig','qmugg','Percy\x20stopped','TCG_URL','adJkC','allocateHub','1140590ulsrHE','race','MPDuI','reportFinalDetectionState','hubUrl','rPFwD','url','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','TCG_DOWN','sanitizeCaps','1498357cmhvNt','isNotUndefined','skipBinaryInitialisation','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','./logger','yxTAu','iAJyz','fileLogger','length','localIdentifier','setHandlePWError','isTurboScaleSession','64HLGENd','./performance/constants','turboScaleGridDetails','proxy','KqJIw','isEnabled','isTrialGrid','qcquE','getCentralUser','generateLocalIdentifier','playwrightUrl','setupTCGAuth','SIGQUIT','DqXVX','isAuthenticated','\x20with\x20response\x20','winstonLogger','Local\x20binary\x20started\x20successfully','WusXB','GoEll','../ai-sdk-node/bundle','setupKeepAlive','INVALID_INIT_RESP_WITH_USER_IMPACT','10|15|12|1|19|0|13|3|21|4|2|20|18|11|7|8|9|17|6|22|14|16|5','JstXi','turboScale','rcAXC','turboScaleOptions','setLogLevel','config','Error\x20occured\x20while\x20stopping\x20percy','getConfigPath','xbxoK','debug','includes','iUKJz','getHubUrl','killSignal','setupBrowserstackLocal','VKjgo','pqwZZ','tcgAuthConfig','xpDeJ','util','No\x20config\x20provided.','nBjhF','hCKYx','NvBmx','startLocalBinary','initialize','muZoH','iJILK','true','isTrue','getFinalCaps','KVuCd','status'];a91_0x5696=function(){return _0x42223b;};return a91_0x5696();}