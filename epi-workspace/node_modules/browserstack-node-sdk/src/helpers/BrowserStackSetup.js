const a80_0x36ec4c=a80_0x3282;(function(_0x513a15,_0x28a2f7){const _0x474a58=a80_0x3282,_0x2c7652=_0x513a15();while(!![]){try{const _0x3f43e8=parseInt(_0x474a58(0x19d))/0x1+parseInt(_0x474a58(0x1b8))/0x2+parseInt(_0x474a58(0x1a0))/0x3*(parseInt(_0x474a58(0x170))/0x4)+-parseInt(_0x474a58(0xe0))/0x5*(parseInt(_0x474a58(0xfe))/0x6)+parseInt(_0x474a58(0x1cb))/0x7*(parseInt(_0x474a58(0x173))/0x8)+-parseInt(_0x474a58(0x16e))/0x9*(-parseInt(_0x474a58(0x150))/0xa)+parseInt(_0x474a58(0x146))/0xb*(-parseInt(_0x474a58(0x191))/0xc);if(_0x3f43e8===_0x28a2f7)break;else _0x2c7652['push'](_0x2c7652['shift']());}catch(_0x4f7ba1){_0x2c7652['push'](_0x2c7652['shift']());}}}(a80_0x5964,0xcf951));function a80_0x3282(_0x4324b2,_0x3d7756){const _0x59642c=a80_0x5964();return a80_0x3282=function(_0x3282f3,_0x1fd840){_0x3282f3=_0x3282f3-0xd6;let _0x195780=_0x59642c[_0x3282f3];return _0x195780;},a80_0x3282(_0x4324b2,_0x3d7756);}const util=require(a80_0x36ec4c(0xdc)),os=require('os'),path=require(a80_0x36ec4c(0x113)),{v4:uuidv4}=require(a80_0x36ec4c(0x19e)),fs=require('fs'),constants=require(a80_0x36ec4c(0xe8)),{isTurboScaleSession}=require(a80_0x36ec4c(0xfd)),logger=require(a80_0x36ec4c(0x16d))[a80_0x36ec4c(0x184)],fileLogger=require('./logger')[a80_0x36ec4c(0x12a)],{getLogDir}=require(a80_0x36ec4c(0x16d)),helper=require(a80_0x36ec4c(0x145)),utilities=require('./utilities'),percyHelper=require(a80_0x36ec4c(0x15d)),hubAllocator=require('../hubAllocationMethods'),PerformanceTester=require('./performance/performance-tester'),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require('./performance/constants'),{setPercyFlag}=require(a80_0x36ec4c(0xe6)),TestHubHandler=require('./testhub/testhubHandler'),timeoutPromise=require(a80_0x36ec4c(0xfb)),BrowserstackCLI=require(a80_0x36ec4c(0x1a4));class BrowserStackSetup{constructor(_0x1ec5bc,_0x23c0ec){const _0x576753=a80_0x36ec4c,_0x1c8252={'DMmUd':_0x576753(0x109),'JjzMg':function(_0x34154c){return _0x34154c();},'zQvAL':_0x576753(0xec)},_0x1a3395=_0x1c8252[_0x576753(0x193)][_0x576753(0x176)]('|');let _0x580700=0x0;while(!![]){switch(_0x1a3395[_0x580700++]){case'0':this[_0x576753(0x198)]=null;continue;case'1':helper[_0x576753(0xf8)](this['config'],this[_0x576753(0x17d)]);continue;case'2':helper[_0x576753(0x18e)](this[_0x576753(0x181)],this[_0x576753(0x17d)],this[_0x576753(0x175)]);continue;case'3':global[_0x576753(0xf7)]=_0x23c0ec;continue;case'4':this[_0x576753(0x15c)]=null;continue;case'5':this['sdkRunId']=_0x1c8252[_0x576753(0x17f)](uuidv4);continue;case'6':this['config']=helper[_0x576753(0x1bc)](helper['getConfigPath'](_0x1ec5bc));continue;case'7':this['config'][_0x576753(0xe5)][_0x576753(0x114)]=!helper[_0x576753(0x186)]()||helper[_0x576753(0x189)](this['config']['testContextOptions']['skipSessionStatus']);continue;case'8':this['envConfig']=helper[_0x576753(0x148)]();continue;case'9':if(helper[_0x576753(0x158)](this['config']))throw new Error(_0x1c8252[_0x576753(0xd8)]);continue;case'10':if(this[_0x576753(0x181)]['error'])throw new Error(this[_0x576753(0x181)][_0x576753(0x1b7)]);continue;case'11':this[_0x576753(0x17d)]=helper[_0x576753(0x122)](_0x1ec5bc);continue;case'12':this['config'][_0x576753(0xe5)]['skipSessionName']=!helper[_0x576753(0x186)]()||helper[_0x576753(0x189)](this[_0x576753(0x181)][_0x576753(0xe5)][_0x576753(0xed)]);continue;case'13':helper[_0x576753(0x135)](this['config'],this[_0x576753(0x17d)],this['envConfig']);continue;case'14':this[_0x576753(0x181)][_0x576753(0xe5)]=this[_0x576753(0x181)][_0x576753(0xe5)]||{};continue;case'15':this[_0x576753(0x181)]['platforms']=this[_0x576753(0x181)][_0x576753(0xf5)]||[];continue;case'16':helper[_0x576753(0x188)](this[_0x576753(0x181)]);continue;case'17':PerformanceTester[_0x576753(0x110)]();continue;case'18':this[_0x576753(0xf7)]=_0x23c0ec;continue;case'19':this[_0x576753(0x18b)]={};continue;case'20':this[_0x576753(0xd6)]=[];continue;}break;}}[a80_0x36ec4c(0x1a2)](_0xd1a0fa){const _0x4ea3b2=a80_0x36ec4c,_0x4a9888={'FZCdv':'userName\x20or\x20accessKey\x20is\x20not\x20defined','qXaMc':function(_0x46a3d7,_0x5d7229){return _0x46a3d7===_0x5d7229;},'fLhco':'integrations','KANSf':_0x4ea3b2(0x1d1),'KcHuV':function(_0x439a35,_0x4e7d3a){return _0x439a35<_0x4e7d3a;},'MisDe':function(_0x34c22d,_0x1df928){return _0x34c22d(_0x1df928);},'zYHlf':'selenium-webdriver','sbUQC':function(_0x19531b,_0x5bc038){return _0x19531b===_0x5bc038;},'uiUaM':_0x4ea3b2(0xd9),'hbPjz':'Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','WlhyX':_0x4ea3b2(0x155),'eYHzr':_0x4ea3b2(0x1ac),'luvcl':_0x4ea3b2(0x16f),'vACDZ':'SIGHUP','tjvlx':function(_0x56f142,_0xebe1e5){return _0x56f142!==_0xebe1e5;},'UMGHk':_0x4ea3b2(0x13d),'kFTGb':_0x4ea3b2(0x185),'QSjFr':_0x4ea3b2(0x1ba),'LrPLf':_0x4ea3b2(0x174),'OCxAk':'beforeExit'},_0x21b975=this[_0x4ea3b2(0xf7)];global[_0x4ea3b2(0x181)]=this[_0x4ea3b2(0x181)],helper[_0x4ea3b2(0x13a)](this[_0x4ea3b2(0x181)]),this[_0x4ea3b2(0x15a)]=null,global['sdkRunId']=this[_0x4ea3b2(0x162)],logger[_0x4ea3b2(0x11e)](_0x4ea3b2(0x157)+this[_0x4ea3b2(0x162)]),!this[_0x4ea3b2(0x181)]['browserStackLocalOptions']&&(this[_0x4ea3b2(0x181)][_0x4ea3b2(0x195)]=this[_0x4ea3b2(0x181)][_0x4ea3b2(0x11b)]||{});if(helper['isUndefined'](helper[_0x4ea3b2(0x169)](this[_0x4ea3b2(0x181)]))||helper['isUndefined'](helper[_0x4ea3b2(0x11f)](this[_0x4ea3b2(0x181)])))throw new Error(_0x4a9888[_0x4ea3b2(0xf1)]);helper['getLocalConfig'](this[_0x4ea3b2(0x181)])&&helper[_0x4ea3b2(0x158)](helper['getLocalIdentifier'](this[_0x4ea3b2(0x181)]))&&(!helper[_0x4ea3b2(0x158)](this[_0x4ea3b2(0x181)]['browserStackLocalOptions'])&&_0x4a9888[_0x4ea3b2(0x115)](this[_0x4ea3b2(0x181)][_0x4ea3b2(0x195)][_0x4ea3b2(0x14d)],Object)?!helper[_0x4ea3b2(0x189)](this[_0x4ea3b2(0x181)][_0x4ea3b2(0x195)][_0x4ea3b2(0x16a)])&&(this[_0x4ea3b2(0x181)][_0x4ea3b2(0x195)][_0x4ea3b2(0x1cf)]=helper['generateLocalIdentifier']()):this[_0x4ea3b2(0x181)][_0x4ea3b2(0x195)]={'localIdentifier':helper[_0x4ea3b2(0x17c)]()});this[_0x4ea3b2(0x181)][_0x4ea3b2(0x195)]['skipBinaryInitialisation']=helper[_0x4ea3b2(0x189)](this[_0x4ea3b2(0x181)][_0x4ea3b2(0x195)][_0x4ea3b2(0x16a)]),helper['setHandlePWError'](this['config']);if(_0x4a9888[_0x4ea3b2(0x115)](_0x21b975,_0x4a9888['fLhco']))return;this[_0x4ea3b2(0x103)]();process[_0x4ea3b2(0x1a1)]['BROWSERSTACK_TURBOSCALE']&&(this[_0x4ea3b2(0x181)]['turboScale']=helper[_0x4ea3b2(0x189)](process[_0x4ea3b2(0x1a1)]['BROWSERSTACK_TURBOSCALE']),this['config'][_0x4ea3b2(0xff)]=this[_0x4ea3b2(0x181)][_0x4ea3b2(0xff)]||{});if(!helper[_0x4ea3b2(0x186)]()){try{process[_0x4ea3b2(0x1a1)]['FRAMEWORK']=_0x21b975,utilities['fireFunnelTestEvent'](_0x4a9888[_0x4ea3b2(0x13c)],{},this[_0x4ea3b2(0x181)],this['framework']);}catch(_0x4ab95b){logger['debug']('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x4ab95b);}return;}helper['requireSeleniumWebdriverCheck'](_0x21b975)&&(_0x4a9888['KcHuV'](_0x4a9888[_0x4ea3b2(0xda)](parseInt,helper[_0x4ea3b2(0x182)](_0x4a9888[_0x4ea3b2(0x1c3)])),0x3)&&(this[_0x4ea3b2(0x181)][_0x4ea3b2(0x16b)]=![]),_0x4a9888[_0x4ea3b2(0x12c)](helper[_0x4ea3b2(0x14f)](helper[_0x4ea3b2(0x182)](_0x4a9888[_0x4ea3b2(0x1c3)]),_0x4a9888[_0x4ea3b2(0x19a)]),0x1)&&(this['config'][_0x4ea3b2(0x16b)]=!![]));(helper[_0x4ea3b2(0x158)](this[_0x4ea3b2(0x181)][_0x4ea3b2(0xf5)])||helper[_0x4ea3b2(0x158)](this[_0x4ea3b2(0x181)][_0x4ea3b2(0xf5)][_0x4ea3b2(0x199)]))&&(helper['isUndefined'](this[_0x4ea3b2(0x181)][_0x4ea3b2(0x156)])?logger[_0x4ea3b2(0x11e)](_0x4a9888['hbPjz']):logger[_0x4ea3b2(0x1cc)](_0x4a9888[_0x4ea3b2(0x1c0)]),this['config'][_0x4ea3b2(0xf5)]=[]);!this[_0x4ea3b2(0x181)][_0x4ea3b2(0xe5)]&&(this[_0x4ea3b2(0x181)][_0x4ea3b2(0xe5)]={});try{process[_0x4ea3b2(0x1a1)][_0x4ea3b2(0x17a)]=_0xd1a0fa['_'][0x0],utilities['fireFunnelTestEvent'](_0x4a9888[_0x4ea3b2(0x13c)],{},this[_0x4ea3b2(0x181)],this[_0x4ea3b2(0xf7)]);}catch(_0x467eae){logger[_0x4ea3b2(0xee)](_0x4ea3b2(0x134)+_0x467eae);}!this[_0x4ea3b2(0x181)][_0x4ea3b2(0x1b5)]&&logger[_0x4ea3b2(0x11e)](constants['AUTOLOGCAPTURE_NOTIFICATION']),this[_0x4ea3b2(0x152)]=this[_0x4ea3b2(0x152)][_0x4ea3b2(0x18c)](this),process['on'](_0x4a9888['eYHzr'],this[_0x4ea3b2(0x152)]),process['on'](_0x4a9888['luvcl'],this['intExitHandler']),process['on'](_0x4a9888[_0x4ea3b2(0x1c4)],this[_0x4ea3b2(0x152)]),_0x4a9888[_0x4ea3b2(0x119)](process[_0x4ea3b2(0x153)],_0x4a9888[_0x4ea3b2(0x142)])?(process['on'](_0x4a9888[_0x4ea3b2(0x102)],this[_0x4ea3b2(0x152)]),process['on'](_0x4a9888[_0x4ea3b2(0x111)],this[_0x4ea3b2(0x152)])):process['on'](_0x4a9888['LrPLf'],this[_0x4ea3b2(0x152)]),process['on'](_0x4a9888[_0x4ea3b2(0x1aa)],this['exitHandler']());}async[a80_0x36ec4c(0x125)](_0x338fa4){const _0x11ea27=a80_0x36ec4c,_0x178eb9={'skwCS':function(_0x354039,_0x17db4f){return _0x354039(_0x17db4f);},'JqNtU':_0x11ea27(0x14c),'zvEpv':_0x11ea27(0x15f),'tawXR':'true','dUHTZ':function(_0x8489cf,_0xdfeea8){return _0x8489cf===_0xdfeea8;},'mhNST':_0x11ea27(0x10a),'fJfyk':function(_0x5c86bd,_0x20c886){return _0x5c86bd+_0x20c886;},'OUJwi':_0x11ea27(0x1c9),'MEAFs':_0x11ea27(0x1a6)};this[_0x11ea27(0x1a2)](_0x338fa4);if(_0x178eb9[_0x11ea27(0x11d)](isTurboScaleSession,this['config'])){const _0x2447c9=await helper[_0x11ea27(0xe7)](this[_0x11ea27(0x181)]);this['config'][_0x11ea27(0x10f)]=_0x2447c9,_0x2447c9[_0x11ea27(0x165)]&&helper['isNotUndefined'](this[_0x11ea27(0x181)][_0x11ea27(0x15c)])&&helper['isTrue'](this[_0x11ea27(0x181)][_0x11ea27(0x15c)])&&(this[_0x11ea27(0x181)]['browserStackLocalOptions'][_0x11ea27(0x1cf)]=_0x178eb9[_0x11ea27(0x1bf)],this[_0x11ea27(0x181)][_0x11ea27(0x195)][_0x178eb9[_0x11ea27(0x104)]]=_0x2447c9['customRepeaters'][_0x11ea27(0x10e)](','),this[_0x11ea27(0x181)][_0x11ea27(0x195)]['forceLocal']=_0x178eb9['tawXR']),this['config'][_0x11ea27(0x18d)]=_0x2447c9[_0x11ea27(0x137)],this[_0x11ea27(0xf7)]&&_0x178eb9[_0x11ea27(0x1b3)](this[_0x11ea27(0xf7)]['toLowerCase'](),_0x178eb9['mhNST'])&&(this[_0x11ea27(0x181)][_0x11ea27(0x18d)]=_0x178eb9['fJfyk'](_0x2447c9[_0x11ea27(0x13e)],_0x178eb9[_0x11ea27(0x171)])),constants[_0x11ea27(0x1a9)]=helper[_0x11ea27(0x192)](this['config']),logger[_0x11ea27(0xee)](_0x11ea27(0x1ad)+constants['hubUrl']);}helper['setProxySettings'](this[_0x11ea27(0x181)]),this[_0x11ea27(0x1b1)](),_0x178eb9[_0x11ea27(0x11d)](setPercyFlag,this),await this['setupBrowserstackLocal'](),![_0x178eb9[_0x11ea27(0xe1)],_0x178eb9['mhNST']][_0x11ea27(0x1b0)](this[_0x11ea27(0xf7)])&&!_0x178eb9[_0x11ea27(0x11d)](isTurboScaleSession,this[_0x11ea27(0x181)])&&!helper[_0x11ea27(0x141)]()[_0x11ea27(0x131)]&&await this[_0x11ea27(0x100)]();}async[a80_0x36ec4c(0x1b6)](){const _0x2d5e3d=a80_0x36ec4c,_0x5c7a8e={};_0x5c7a8e[_0x2d5e3d(0x15b)]=function(_0x7a3bb,_0x4c802c){return _0x7a3bb===_0x4c802c;},_0x5c7a8e['oiVsP']=_0x2d5e3d(0x1be),_0x5c7a8e[_0x2d5e3d(0xea)]=_0x2d5e3d(0x12e),_0x5c7a8e[_0x2d5e3d(0xf2)]=_0x2d5e3d(0x120),_0x5c7a8e[_0x2d5e3d(0x124)]=_0x2d5e3d(0xfc),_0x5c7a8e[_0x2d5e3d(0xdf)]=_0x2d5e3d(0x1bb);const _0x676151=_0x5c7a8e;if(helper[_0x2d5e3d(0x189)](this[_0x2d5e3d(0x181)][_0x2d5e3d(0x198)])&&(!this[_0x2d5e3d(0x198)]||!this[_0x2d5e3d(0x198)][_0x2d5e3d(0x11c)]()))try{this[_0x2d5e3d(0x198)]=await percyHelper[_0x2d5e3d(0x183)](this[_0x2d5e3d(0x181)]);if(!this[_0x2d5e3d(0x198)]){process[_0x2d5e3d(0x1a1)][_0x2d5e3d(0x19c)]=_0x676151[_0x2d5e3d(0x1cd)];throw new Error(_0x676151[_0x2d5e3d(0xea)]);}logger[_0x2d5e3d(0x11e)](_0x676151[_0x2d5e3d(0xf2)]),process[_0x2d5e3d(0x1a1)][_0x2d5e3d(0x19c)]=_0x676151[_0x2d5e3d(0x124)];let _0x579b35=0x0;const _0x557b35=async()=>{const _0x4f3492=_0x2d5e3d;_0x579b35++,_0x676151[_0x4f3492(0x15b)](_0x579b35,0x1)&&await this[_0x4f3492(0x12b)]();};process['on'](_0x676151[_0x2d5e3d(0xdf)],_0x557b35);}catch(_0x209a72){process[_0x2d5e3d(0x1a1)]['BROWSERSTACK_PERCY']=_0x676151[_0x2d5e3d(0x1cd)],logger[_0x2d5e3d(0xee)](_0x2d5e3d(0x166)+_0x209a72);throw new Error(_0x209a72[_0x2d5e3d(0xe9)]());}}async[a80_0x36ec4c(0x12b)](){const _0x266fb=a80_0x36ec4c,_0x2340c2={};_0x2340c2[_0x266fb(0xf4)]=_0x266fb(0x196),_0x2340c2[_0x266fb(0x160)]='Error\x20occured\x20while\x20stopping\x20percy';const _0x2d1ecb=_0x2340c2;if(this[_0x266fb(0x198)]&&this['percy'][_0x266fb(0x11c)]())try{await percyHelper[_0x266fb(0x12b)](this['percy']),logger[_0x266fb(0x11e)](_0x2d1ecb[_0x266fb(0xf4)]);}catch(_0x3fa631){logger['error'](_0x2d1ecb[_0x266fb(0x160)],_0x3fa631[_0x266fb(0x10c)]);}}async[a80_0x36ec4c(0x138)](){const _0x26e32a=a80_0x36ec4c,_0x9ca883={};_0x9ca883[_0x26e32a(0x167)]='Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled',_0x9ca883[_0x26e32a(0x16c)]=_0x26e32a(0x14a);const _0x4ee4a=_0x9ca883;if(helper['isBrowserstackInfra']()&&helper[_0x26e32a(0x189)](this[_0x26e32a(0x181)][_0x26e32a(0x15c)])&&(!this[_0x26e32a(0x15c)]||!this['browserstackLocal'][_0x26e32a(0x11c)]()))try{if(this[_0x26e32a(0x181)][_0x26e32a(0x195)][_0x26e32a(0x16a)]){logger[_0x26e32a(0xee)](_0x4ee4a[_0x26e32a(0x167)]);return;}this[_0x26e32a(0x15c)]=await helper[_0x26e32a(0x1c5)](this[_0x26e32a(0x181)]),logger[_0x26e32a(0x11e)](_0x4ee4a['SNpbc']);}catch(_0x59c9d9){logger[_0x26e32a(0xee)](_0x59c9d9);throw new Error(_0x59c9d9[_0x26e32a(0xe9)]());}}async[a80_0x36ec4c(0x126)](){const _0x1a7275=a80_0x36ec4c,_0x3c7882={};_0x3c7882[_0x1a7275(0x112)]='Local\x20binary\x20stopped',_0x3c7882[_0x1a7275(0x133)]=_0x1a7275(0x11a);const _0x1eddbe=_0x3c7882;if(this[_0x1a7275(0x15c)]&&this['browserstackLocal']['isRunning']())try{await helper[_0x1a7275(0xfa)](this[_0x1a7275(0x15c)]),logger[_0x1a7275(0x11e)](_0x1eddbe['iKkWn']);}catch(_0x1300d5){logger[_0x1a7275(0x1b7)](_0x1eddbe[_0x1a7275(0x133)],_0x1300d5[_0x1a7275(0x10c)]);}}async['setUpHubUrl'](){const _0x11d0be=a80_0x36ec4c;return PerformanceTester[_0x11d0be(0x132)](PerformanceAutEvents[_0x11d0be(0x151)],async()=>{const _0x532c0b=_0x11d0be;await hubAllocator[_0x532c0b(0x12f)](this[_0x532c0b(0x181)]);})();}async[a80_0x36ec4c(0x13f)](){const _0x5018b3=a80_0x36ec4c,_0x1c60a2={'AKbZQ':function(_0x33061c,_0x2e4f12){return _0x33061c(_0x2e4f12);},'qaeKK':'../ai-sdk-node/bundle','Pkcao':function(_0x1cb347,_0x2243df,_0x42db27,_0x1b6431,_0x8e7017,_0x51c41b,_0x386a2a){return _0x1cb347(_0x2243df,_0x42db27,_0x1b6431,_0x8e7017,_0x51c41b,_0x386a2a);},'TpanQ':_0x5018b3(0x123),'gpiXg':_0x5018b3(0x10b),'aUSZE':_0x5018b3(0x164),'hLrOX':_0x5018b3(0x1ce),'SIfuA':function(_0x55543e,_0x29f4ec){return _0x55543e(_0x29f4ec);},'xgKSr':function(_0x2e91d8,_0x345d24){return _0x2e91d8===_0x345d24;},'XfUiA':_0x5018b3(0xfc),'DGDTI':function(_0x257e99,_0x62564b){return _0x257e99===_0x62564b;},'NZdRp':function(_0x149d4e,_0x378e15){return _0x149d4e===_0x378e15;},'ViyVv':_0x5018b3(0x139),'OdhqL':_0x5018b3(0x149),'HGbaP':_0x5018b3(0xeb),'mqWbn':function(_0x25eb50,_0x143645){return _0x25eb50(_0x143645);},'dWOAt':_0x5018b3(0x143),'vkUBT':function(_0x24d35e,_0x2f78a9){return _0x24d35e>=_0x2f78a9;},'MONtZ':function(_0x21b80d,_0x48c9b7){return _0x21b80d<_0x48c9b7;},'UGyeP':'tcg\x20config\x20setup\x20successful.','hvQgZ':_0x5018b3(0x1a8),'ozMki':function(_0x514f91){return _0x514f91();}},_0x14f9ec=PerformanceTester[_0x5018b3(0x132)](_0x1c60a2['hvQgZ'],async()=>{const _0x4860e8=_0x5018b3;try{const _0x12c73d=new Date(),_0x221828=helper['getProxyConfigForTcg'](this['config']),_0x289961=_0x1c60a2[_0x4860e8(0x17e)](require,path[_0x4860e8(0x10e)](__dirname,_0x1c60a2['qaeKK'])),_0x5eed70=_0x1c60a2[_0x4860e8(0x172)](timeoutPromise,constants[_0x4860e8(0x1c1)],_0x1c60a2[_0x4860e8(0x107)],_0x1c60a2[_0x4860e8(0x19b)],_0x12c73d,this['config'],this[_0x4860e8(0xf7)]),_0x159b59={'tcgUrl':constants[_0x4860e8(0x129)],'sdkVersion':_0x1c60a2[_0x4860e8(0x17e)](require,_0x1c60a2[_0x4860e8(0x161)])[_0x4860e8(0xf0)],'methodUsed':_0x1c60a2[_0x4860e8(0x118)],'proxyConfig':_0x221828,'os':os[_0x4860e8(0x153)]()};if(_0x221828&&_0x221828['proxyUrl']){utilities[_0x4860e8(0x1b2)](constants[_0x4860e8(0x1c6)],_0x159b59,this[_0x4860e8(0x181)],this[_0x4860e8(0xf7)]);return;}const _0x56167a={};_0x56167a[_0x4860e8(0x127)]=_0x221828;const _0x35bf8e=await Promise[_0x4860e8(0x1af)]([_0x289961[_0x4860e8(0x108)](this[_0x4860e8(0x181)][_0x4860e8(0x116)],this['config']['userName'],constants[_0x4860e8(0x129)],_0x1c60a2[_0x4860e8(0x1a7)](require,_0x1c60a2[_0x4860e8(0x161)])['version'],_0x56167a)['then'](_0x128d36=>{return _0x5eed70['cancel'](),_0x128d36;}),_0x5eed70]);_0x35bf8e[_0x4860e8(0x18a)]=_0x1c60a2[_0x4860e8(0x180)](_0x35bf8e[_0x4860e8(0x18a)],_0x1c60a2[_0x4860e8(0x1b9)])||_0x1c60a2[_0x4860e8(0x1c8)](_0x35bf8e[_0x4860e8(0x18a)],!![]);const _0x4cacf8=_0x1c60a2[_0x4860e8(0x1c2)](this[_0x4860e8(0x181)][_0x4860e8(0x168)],!![])||_0x1c60a2[_0x4860e8(0x1c2)](this[_0x4860e8(0x181)][_0x4860e8(0x168)],_0x1c60a2['XfUiA']);if(_0x1c60a2[_0x4860e8(0x180)](_0x35bf8e[_0x4860e8(0x10c)],constants[_0x4860e8(0x19f)])&&_0x4cacf8)logger[_0x4860e8(0x11e)](_0x1c60a2[_0x4860e8(0x136)]);else{if(!_0x35bf8e[_0x4860e8(0xe4)]&&_0x1c60a2['NZdRp'](_0x35bf8e[_0x4860e8(0x18f)],0x1f7)&&_0x4cacf8)logger['info'](_0x1c60a2[_0x4860e8(0x163)]),utilities[_0x4860e8(0x1b2)](constants['TCG_DOWN'],_0x159b59,this[_0x4860e8(0x181)],this[_0x4860e8(0xf7)]);else{if(!_0x35bf8e[_0x4860e8(0xe4)]&&_0x4cacf8){logger[_0x4860e8(0x11e)](_0x1c60a2[_0x4860e8(0x130)]);const _0x1aa323={'tcgUrl':constants[_0x4860e8(0x129)],'sdkVersion':_0x1c60a2[_0x4860e8(0xe3)](require,_0x1c60a2[_0x4860e8(0x161)])[_0x4860e8(0xf0)],'methodUsed':_0x1c60a2[_0x4860e8(0x118)],'proxyConfig':_0x221828,'os':os[_0x4860e8(0x153)]()};utilities[_0x4860e8(0x1b2)](constants[_0x4860e8(0x106)],_0x1aa323,this[_0x4860e8(0x181)],this[_0x4860e8(0xf7)]);}else{if(_0x35bf8e[_0x4860e8(0xe4)]&&!_0x35bf8e['isHealingEnabled']&&_0x4cacf8)logger[_0x4860e8(0x11e)](_0x1c60a2['dWOAt']);else{if(_0x1c60a2['vkUBT'](_0x35bf8e[_0x4860e8(0x18f)],0xc8)&&_0x1c60a2[_0x4860e8(0x1a3)](_0x35bf8e['status'],0x12c))utilities[_0x4860e8(0x1b2)](constants['AI_INIT_SUCCESSFUL'],_0x159b59,this[_0x4860e8(0x181)],this[_0x4860e8(0xf7)]);else{if(_0x1c60a2[_0x4860e8(0x1b4)](_0x35bf8e['status'],0x190))_0x159b59[_0x4860e8(0x18f)]=_0x35bf8e['status'],utilities['fireFunnelTestEvent'](constants['AI_INIT_FAILURE'],_0x159b59,this['config'],this[_0x4860e8(0xf7)]);else!_0x35bf8e['status']&&utilities[_0x4860e8(0x1b2)](constants[_0x4860e8(0x12d)],_0x159b59,this['config'],this[_0x4860e8(0xf7)]);}}}}}if(_0x35bf8e[_0x4860e8(0xe4)]&&_0x35bf8e[_0x4860e8(0x18a)]){const _0x2148e2={};_0x2148e2[_0x4860e8(0x159)]=_0x35bf8e;const _0x2fc8ac=_0x2148e2;_0x221828&&(_0x2fc8ac[_0x4860e8(0x101)]=_0x221828),_0x2fc8ac['framework']=this[_0x4860e8(0xf7)],_0x2fc8ac[_0x4860e8(0x179)]=this[_0x4860e8(0x181)],helper[_0x4860e8(0xdd)](_0x2fc8ac),logger['debug'](_0x1c60a2[_0x4860e8(0xd7)]);}}catch(_0x525bab){logger['debug'](_0x4860e8(0x121)+(_0x525bab['message']?_0x525bab[_0x4860e8(0x10c)]:''));}});await _0x1c60a2['ozMki'](_0x14f9ec);}[a80_0x36ec4c(0x1b1)](){const _0x8ab868=a80_0x36ec4c,_0x4708bb={'jDvxl':function(_0x5aeef4,_0x1ac835){return _0x5aeef4(_0x1ac835);},'omddF':'./setKeepAlive'};_0x4708bb[_0x8ab868(0xf6)](require,_0x4708bb[_0x8ab868(0x117)])();}[a80_0x36ec4c(0x103)](){const _0x4ecacb=a80_0x36ec4c,_0x3ff3fb={};_0x3ff3fb[_0x4ecacb(0x144)]='unhandledRejection',_0x3ff3fb[_0x4ecacb(0x105)]=_0x4ecacb(0xe2);const _0x277206=_0x3ff3fb,_0x220aa6=_0x131b21=>{const _0x527aaa=_0x4ecacb;logger['error'](_0x131b21[_0x527aaa(0x10c)]),logger[_0x527aaa(0xee)](util[_0x527aaa(0xde)](_0x131b21)),this['unhandledErrors'][_0x527aaa(0x128)](util['format']('%j',_0x131b21)),PerformanceTester['captureError'](_0x131b21);};process['on'](_0x277206[_0x4ecacb(0x144)],_0x220aa6),process['on'](_0x277206['WYskU'],_0x220aa6);}async[a80_0x36ec4c(0x152)](_0x1ff2a5){const _0x475996=a80_0x36ec4c,_0x251136={};_0x251136['iAEPA']=_0x475996(0x13b),_0x251136[_0x475996(0xf9)]=function(_0x1e5611,_0x423153){return _0x1e5611+_0x423153;},_0x251136[_0x475996(0x154)]=_0x475996(0x194),_0x251136[_0x475996(0x1ca)]=_0x475996(0x14e),_0x251136[_0x475996(0x1c7)]=function(_0x2c0e08,_0x19c116){return _0x2c0e08+_0x19c116;};const _0x10209c=_0x251136,_0xac20c1=_0x10209c['iAEPA'][_0x475996(0x176)]('|');let _0x1a03f8=0x0;while(!![]){switch(_0xac20c1[_0x1a03f8++]){case'0':await TestHubHandler[_0x475996(0x1d0)](_0x1ff2a5);continue;case'1':fileLogger&&fileLogger[_0x475996(0x1bd)]();continue;case'2':logger[_0x475996(0x11e)](_0x10209c[_0x475996(0xf9)](_0x10209c['yGGHE'],_0x1ff2a5));continue;case'3':logger&&logger['close']();continue;case'4':if(this[_0x10209c['kmuoI'](_0x10209c[_0x475996(0x1ca)],_0x1ff2a5)])return;continue;case'5':this['killSignal']=_0x1ff2a5;continue;case'6':this[_0x10209c[_0x475996(0x1c7)](_0x10209c[_0x475996(0x1ca)],_0x1ff2a5)]=!![];continue;case'7':await BrowserstackCLI[_0x475996(0x14b)]()[_0x475996(0x1d0)]();continue;}break;}}['exitHandler'](){const _0x371296=a80_0x36ec4c,_0x50cb69={'CVLlr':function(_0x514e89,_0x31035e){return _0x514e89===_0x31035e;},'HXSwW':_0x371296(0x1ae),'yxTqy':function(_0x5156b0,_0x2d1be4){return _0x5156b0>_0x2d1be4;},'HfiXs':function(_0x5911a6,_0x560962){return _0x5911a6>_0x560962;},'SsNHP':function(_0x570deb){return _0x570deb();},'HarrJ':'events.json'};let _0x27fd59=0x0;return async()=>{const _0x4b3802=_0x371296;_0x27fd59++;if(_0x50cb69[_0x4b3802(0xf3)](_0x27fd59,0x1)){helper[_0x4b3802(0x197)](this['framework'])&&await this[_0x4b3802(0x126)]();try{logger[_0x4b3802(0xee)](_0x50cb69['HXSwW']),await BrowserstackCLI[_0x4b3802(0x14b)]()['stop']('1'),await TestHubHandler[_0x4b3802(0x1d0)](_0x27fd59);}catch(_0x56ebb6){logger['debug']('Error\x20in\x20sending\x20testhub\x20stop:\x20'+util[_0x4b3802(0xde)](_0x56ebb6));}PerformanceTester[_0x4b3802(0x15e)](PerformanceEvents['SDK_CLEANUP']);if(PerformanceTester[_0x4b3802(0x17b)]()){const {measures:_0x3f2e5d,errors:_0x4e32cd}=await PerformanceTester['finalize'](),_0xbd9ba9={};if(_0x3f2e5d&&_0x50cb69['yxTqy'](_0x3f2e5d[_0x4b3802(0x199)],0x0)||_0x4e32cd&&_0x50cb69[_0x4b3802(0x10d)](_0x4e32cd['length'],0x0)){const _0x29370f={};_0x29370f['measures']=_0x3f2e5d,_0x29370f[_0x4b3802(0x177)]=_0x4e32cd,Object[_0x4b3802(0xdb)](_0xbd9ba9,_0x29370f);}try{const _0x2d0049=await helper[_0x4b3802(0x140)](_0xbd9ba9,this[_0x4b3802(0x181)]);logger[_0x4b3802(0xee)](_0x4b3802(0x178)+constants[_0x4b3802(0xef)]+'\x20with\x20response\x20'+_0x2d0049[_0x4b3802(0x1a5)]);}catch(_0x134626){logger[_0x4b3802(0xee)]('Failed\x20to\x20send\x20data\x20to\x20'+constants[_0x4b3802(0xef)]+_0x4b3802(0x187)+util[_0x4b3802(0xde)](_0x134626));}try{fs['writeFileSync'](path[_0x4b3802(0x10e)](_0x50cb69['SsNHP'](getLogDir),_0x50cb69[_0x4b3802(0x1ab)]),JSON[_0x4b3802(0x147)](_0xbd9ba9));}catch(_0x5e88ee){logger[_0x4b3802(0xee)](_0x4b3802(0x190)+_0x5e88ee);}}}};}}function a80_0x5964(){const _0x2effe1=['getHubUrl','DMmUd','Shutdown\x20triggered\x20by\x20','browserStackLocalOptions','Percy\x20stopped','checkStopLocalBinaryOnExit','percy','length','uiUaM','gpiXg','BROWSERSTACK_PERCY','65547CtdqBt','uuid','UPGRADE_REQUIRED','6gbfQIx','env','preInitialize','MONtZ','../bin/v2/browserstackCLI','statusCode','codeceptjs','SIfuA','aiHeal:tcgAuth','hubUrl','OCxAk','HarrJ','SIGTERM','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','Calling\x20Build\x20Stop\x20from\x20ExitHandler','race','includes','setupKeepAlive','fireFunnelTestEvent','dUHTZ','vkUBT','disableAutoCaptureLogs','setupPercy','error','1617882iQPcWL','XfUiA','SIGQUIT','beforeExit','readConfig','close','false','JqNtU','WlhyX','TCG_AUTH_TIMEOUT','NZdRp','zYHlf','vACDZ','startLocalBinary','AI_PROXY_FAILURE','efNsw','DGDTI','?caps=','gucHq','9110038ldDjGW','warn','oiVsP','BrowserstackHealing.init','localIdentifier','stop','SDKTestAttempted','unhandledErrors','UGyeP','zQvAL','4.5.0','MisDe','assign','util','setupTcgConfigFile','format','vnZVm','10ftVPiK','MEAFs','uncaughtException','mqWbn','isAuthenticated','testContextOptions','./testhub/utils','getTurboScaleGridDetails','../bin/utils/constants','toString','FWFcA','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','No\x20config\x20provided.','skipSessionName','debug','EDS_URL','version','FZCdv','WZhNv','CVLlr','IcUQR','platforms','jDvxl','framework','setBrowserstackInfraFromConfig','kmuoI','stopLocalBinary','./timeoutPromise','true','./ats/helper','3518148ahPJbI','turboScaleOptions','setUpHubUrl','proxyConfig','kFTGb','handleExceptions','zvEpv','WYskU','TCG_AUTH_FAILURE','TpanQ','init','20|11|8|4|0|6|15|14|19|5|18|3|9|10|1|7|12|13|16|2|17','playwright','BrowserstackHealingInitFailed','message','HfiXs','join','turboScaleGridDetails','startMonitoring','QSjFr','iKkWn','path','skipSessionStatus','qXaMc','accessKey','omddF','hLrOX','tjvlx','Error\x20occured\x20while\x20stopping\x20local\x20binary','localOptions','isRunning','skwCS','info','getAccessKey','Percy\x20started\x20successfully','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','setCLICaps','BrowserstackHealing.init\x20method\x20timed\x20out','Vcoft','initialize','stopBrowserstackLocal','proxy','push','TCG_URL','fileLogger','stopPercy','sbUQC','INVALID_INIT_RESP_WITH_USER_IMPACT','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','allocateHub','HGbaP','central_scanner','measureWrapper','aUxSx','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','getFinalCaps','ViyVv','url','setupBrowserstackLocal','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','sanitizeCaps','3|1|4|6|2|5|7|0','KANSf','win32','playwrightUrl','setupTCGAuth','sendToEDS','getCentralUser','UMGHk','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','kkMpV','./helper','736923psMysf','stringify','setEnvCaps','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','Local\x20binary\x20started\x20successfully','getInstance','ats-repeater','constructor','handled','compareVersions','1940vsFyvL','HUB_MANAGEMENT','intExitHandler','platform','yGGHE','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','parallelsPerPlatform','SDK\x20run\x20started\x20with\x20id:\x20','isUndefined','tcgAuthConfig','killSignal','VPeRM','browserstackLocal','./percy/utils','end','custom-repeater','Tempt','aUSZE','sdkRunId','OdhqL','../../package.json','isTrialGrid','Error\x20in\x20percy\x20setup\x20','jileq','selfHeal','getUserName','skipBinaryInitialisation','useW3C','SNpbc','./logger','27099AxGbrP','SIGINT','1875484YCURgu','OUJwi','Pkcao','8pGQAjj','SIGBREAK','envConfig','split','exceptions','Data\x20sent\x20successfully\x20to\x20','bstackConfig','FRAMEWORK','isEnabled','generateLocalIdentifier','cliConfig','AKbZQ','JjzMg','xgKSr','config','getPackageVersion','startPercy','winstonLogger','SIGABRT','isBrowserstackInfra','\x20with\x20error\x20','setLogDir','isTrue','isHealingEnabled','errorMessage','bind','turboScaleUrl','setLogLevel','status','Error\x20in\x20writing\x20events\x20to\x20file\x20','300HrSzJF'];a80_0x5964=function(){return _0x2effe1;};return a80_0x5964();}exports['default']=BrowserStackSetup;