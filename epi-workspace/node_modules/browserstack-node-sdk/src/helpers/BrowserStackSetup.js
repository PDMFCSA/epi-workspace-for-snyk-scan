const a85_0xe809af=a85_0x4105;(function(_0x613a1a,_0x542f0d){const _0x83e498=a85_0x4105,_0x52c02b=_0x613a1a();while(!![]){try{const _0x360e39=parseInt(_0x83e498(0x22f))/0x1+-parseInt(_0x83e498(0x23b))/0x2+-parseInt(_0x83e498(0x272))/0x3*(-parseInt(_0x83e498(0x257))/0x4)+parseInt(_0x83e498(0x2a5))/0x5+-parseInt(_0x83e498(0x233))/0x6+-parseInt(_0x83e498(0x20a))/0x7+parseInt(_0x83e498(0x1c2))/0x8;if(_0x360e39===_0x542f0d)break;else _0x52c02b['push'](_0x52c02b['shift']());}catch(_0x504e28){_0x52c02b['push'](_0x52c02b['shift']());}}}(a85_0x2366,0xe957e));const util=require(a85_0xe809af(0x280)),os=require('os'),path=require(a85_0xe809af(0x293)),{v4:uuidv4}=require(a85_0xe809af(0x1d5)),fs=require('fs'),constants=require(a85_0xe809af(0x294)),logger=require('./logger')['winstonLogger'],fileLogger=require(a85_0xe809af(0x1dd))[a85_0xe809af(0x221)],{getLogDir}=require(a85_0xe809af(0x1dd)),helper=require('./helper'),utilities=require(a85_0xe809af(0x269)),percyHelper=require('./percy/utils'),hubAllocator=require('../hubAllocationMethods'),PerformanceTester=require(a85_0xe809af(0x248)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a85_0xe809af(0x2ab)),{setPercyFlag}=require('./testhub/utils'),TestHubHandler=require('./testhub/testhubHandler'),timeoutPromise=require('./timeoutPromise'),BrowserstackCLI=require(a85_0xe809af(0x1e1));function a85_0x4105(_0x27f193,_0xeadc3b){const _0x23665d=a85_0x2366();return a85_0x4105=function(_0x4105ff,_0x2bd1ae){_0x4105ff=_0x4105ff-0x1b2;let _0x17eb1b=_0x23665d[_0x4105ff];return _0x17eb1b;},a85_0x4105(_0x27f193,_0xeadc3b);}class BrowserStackSetup{constructor(_0x4d24aa,_0x5c4449){const _0x2180e5=a85_0xe809af,_0x536c2c={'faaEg':'15|18|9|17|12|8|21|13|4|7|14|22|19|10|11|1|16|5|2|6|0|3|20','wWgpM':_0x2180e5(0x26d),'bzNvF':function(_0x404a79){return _0x404a79();}},_0x3d26a6=_0x536c2c['faaEg'][_0x2180e5(0x289)]('|');let _0x12ee67=0x0;while(!![]){switch(_0x3d26a6[_0x12ee67++]){case'0':helper[_0x2180e5(0x1f5)](this['config']);continue;case'1':helper[_0x2180e5(0x1c0)](this[_0x2180e5(0x28e)],this[_0x2180e5(0x218)]);continue;case'2':this['config']['testContextOptions']['skipSessionName']=!helper[_0x2180e5(0x1bb)]()||helper['isTrue'](this['config'][_0x2180e5(0x23a)][_0x2180e5(0x209)]);continue;case'3':helper[_0x2180e5(0x292)](this[_0x2180e5(0x28e)],this[_0x2180e5(0x218)],this['envConfig']);continue;case'4':this['config']['testContextOptions']=this[_0x2180e5(0x28e)][_0x2180e5(0x23a)]||{};continue;case'5':this['config'][_0x2180e5(0x23a)][_0x2180e5(0x1d0)]=!helper[_0x2180e5(0x1bb)]()||helper[_0x2180e5(0x1fe)](this[_0x2180e5(0x28e)][_0x2180e5(0x23a)][_0x2180e5(0x1d0)]);continue;case'6':helper[_0x2180e5(0x29d)](this['config'],this[_0x2180e5(0x218)],this[_0x2180e5(0x2a2)]);continue;case'7':this[_0x2180e5(0x26a)]={};continue;case'8':this['config']=helper[_0x2180e5(0x206)](helper['getConfigPath'](_0x4d24aa));continue;case'9':this[_0x2180e5(0x2a2)]=helper[_0x2180e5(0x2a0)]();continue;case'10':if(helper[_0x2180e5(0x217)](this['config']))throw new Error(_0x536c2c['wWgpM']);continue;case'11':if(this[_0x2180e5(0x28e)]['error'])throw new Error(this[_0x2180e5(0x28e)]['error']);continue;case'12':this['percy']=null;continue;case'13':this[_0x2180e5(0x28e)][_0x2180e5(0x1b7)]=this['config'][_0x2180e5(0x1b7)]||[];continue;case'14':this[_0x2180e5(0x216)]=_0x536c2c['bzNvF'](uuidv4);continue;case'15':this['unhandledErrors']=[];continue;case'16':helper['setCredentialsFromYmlConfig'](this[_0x2180e5(0x28e)]);continue;case'17':this[_0x2180e5(0x21e)]=null;continue;case'18':helper['normalizeTestReportingEnvVars']();continue;case'19':global['framework']=_0x5c4449;continue;case'20':PerformanceTester[_0x2180e5(0x22e)]();continue;case'21':this[_0x2180e5(0x218)]=helper[_0x2180e5(0x1e0)](_0x4d24aa);continue;case'22':this[_0x2180e5(0x1f7)]=_0x5c4449;continue;}break;}}['preInitialize'](_0x3d55eb){const _0x47351d=a85_0xe809af,_0x48ea5f={'pyDeh':_0x47351d(0x22b),'XswUD':function(_0x182627,_0x4a0177){return _0x182627===_0x4a0177;},'saslo':_0x47351d(0x1e8),'ilfaK':_0x47351d(0x1ed),'NfwpK':function(_0x6547c5,_0x1ee0ea){return _0x6547c5<_0x1ee0ea;},'lXGQu':function(_0x24baf3,_0x1dad4c){return _0x24baf3(_0x1dad4c);},'luXpi':'selenium-webdriver','MvZxD':function(_0x46f424,_0x4b45e6){return _0x46f424===_0x4b45e6;},'Etntc':_0x47351d(0x1e2),'WcCgs':_0x47351d(0x1d1),'RVEmB':'parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','vxlSB':_0x47351d(0x297),'ycPNv':_0x47351d(0x21b),'XcfxD':_0x47351d(0x228),'lWzBW':function(_0x34713f,_0x4c8334){return _0x34713f!==_0x4c8334;},'GttTI':_0x47351d(0x215),'lwfmX':_0x47351d(0x29a),'jAPwF':_0x47351d(0x286),'lZYts':_0x47351d(0x1ce),'PMrpL':'beforeExit'},_0x3c107a=this[_0x47351d(0x1f7)];global[_0x47351d(0x28e)]=this[_0x47351d(0x28e)],helper[_0x47351d(0x1d8)](this['config']),this[_0x47351d(0x279)]=null,global['sdkRunId']=this['sdkRunId'],logger['info'](_0x47351d(0x1ff)+this[_0x47351d(0x216)]),!this[_0x47351d(0x28e)]['browserStackLocalOptions']&&(this[_0x47351d(0x28e)][_0x47351d(0x1f1)]=this['config'][_0x47351d(0x264)]||{});if(helper[_0x47351d(0x217)](helper['getUserName'](this[_0x47351d(0x28e)]))||helper[_0x47351d(0x217)](helper['getAccessKey'](this[_0x47351d(0x28e)])))throw new Error(_0x48ea5f[_0x47351d(0x253)]);helper[_0x47351d(0x274)](this[_0x47351d(0x28e)])&&helper[_0x47351d(0x217)](helper[_0x47351d(0x23c)](this[_0x47351d(0x28e)]))&&(!helper[_0x47351d(0x217)](this[_0x47351d(0x28e)][_0x47351d(0x1f1)])&&_0x48ea5f[_0x47351d(0x25f)](this[_0x47351d(0x28e)][_0x47351d(0x1f1)][_0x47351d(0x270)],Object)?!helper[_0x47351d(0x1fe)](this[_0x47351d(0x28e)]['browserStackLocalOptions'][_0x47351d(0x210)])&&(this[_0x47351d(0x28e)][_0x47351d(0x1f1)][_0x47351d(0x1be)]=helper[_0x47351d(0x1c5)]()):this['config'][_0x47351d(0x1f1)]={'localIdentifier':helper[_0x47351d(0x1c5)]()});this['config'][_0x47351d(0x1f1)][_0x47351d(0x210)]=helper[_0x47351d(0x1fe)](this['config'][_0x47351d(0x1f1)][_0x47351d(0x210)]),helper[_0x47351d(0x211)](this[_0x47351d(0x28e)]);if(_0x48ea5f[_0x47351d(0x25f)](_0x3c107a,_0x48ea5f[_0x47351d(0x22a)]))return;this[_0x47351d(0x1d9)]();process[_0x47351d(0x291)][_0x47351d(0x251)]&&(this[_0x47351d(0x28e)][_0x47351d(0x267)]=helper[_0x47351d(0x1fe)](process[_0x47351d(0x291)][_0x47351d(0x251)]),this['config'][_0x47351d(0x256)]=this['config']['turboScaleOptions']||{});helper[_0x47351d(0x28c)](this[_0x47351d(0x28e)])&&(process[_0x47351d(0x291)][_0x47351d(0x251)]=!![]);if(!helper['isBrowserstackInfra']()){try{process[_0x47351d(0x291)]['FRAMEWORK']=_0x3c107a,utilities['fireFunnelTestEvent'](_0x48ea5f['ilfaK'],{},this['config'],this[_0x47351d(0x1f7)]);}catch(_0x4d2d3e){logger['debug'](_0x47351d(0x1cf)+_0x4d2d3e);}return;}if(helper[_0x47351d(0x1fa)](_0x3c107a)){if(global[_0x47351d(0x1d4)])return;_0x48ea5f[_0x47351d(0x20e)](_0x48ea5f['lXGQu'](parseInt,helper['getPackageVersion'](_0x48ea5f[_0x47351d(0x1df)])),0x3)&&(this[_0x47351d(0x28e)][_0x47351d(0x1d3)]=![]),_0x48ea5f[_0x47351d(0x1cb)](helper[_0x47351d(0x1cd)](helper[_0x47351d(0x284)](_0x48ea5f[_0x47351d(0x1df)]),_0x48ea5f[_0x47351d(0x2aa)]),0x1)&&(this['config'][_0x47351d(0x1d3)]=!![]);}(helper[_0x47351d(0x217)](this[_0x47351d(0x28e)][_0x47351d(0x1b7)])||helper[_0x47351d(0x217)](this['config'][_0x47351d(0x1b7)][_0x47351d(0x28a)]))&&(helper[_0x47351d(0x217)](this[_0x47351d(0x28e)][_0x47351d(0x1f4)])?logger['info'](_0x48ea5f[_0x47351d(0x1c9)]):logger[_0x47351d(0x271)](_0x48ea5f[_0x47351d(0x24a)]),this[_0x47351d(0x28e)]['platforms']=[]);!this[_0x47351d(0x28e)][_0x47351d(0x23a)]&&(this[_0x47351d(0x28e)][_0x47351d(0x23a)]={});try{process[_0x47351d(0x291)]['FRAMEWORK']=_0x3d55eb['_'][0x0],utilities[_0x47351d(0x278)](_0x48ea5f['ilfaK'],{},this[_0x47351d(0x28e)],this[_0x47351d(0x1f7)]);}catch(_0x145c1c){logger[_0x47351d(0x245)](_0x47351d(0x1cf)+_0x145c1c);}!this[_0x47351d(0x28e)][_0x47351d(0x299)]&&logger[_0x47351d(0x240)](constants[_0x47351d(0x261)]),this[_0x47351d(0x1de)]=this[_0x47351d(0x1de)]['bind'](this),process['on'](_0x48ea5f[_0x47351d(0x1bc)],this['intExitHandler']),process['on'](_0x48ea5f['ycPNv'],this[_0x47351d(0x1de)]),process['on'](_0x48ea5f['XcfxD'],this[_0x47351d(0x1de)]),_0x48ea5f[_0x47351d(0x242)](process['platform'],_0x48ea5f['GttTI'])?(process['on'](_0x48ea5f[_0x47351d(0x213)],this[_0x47351d(0x1de)]),process['on'](_0x48ea5f['jAPwF'],this['intExitHandler'])):process['on'](_0x48ea5f[_0x47351d(0x29f)],this[_0x47351d(0x1de)]),process['on'](_0x48ea5f['PMrpL'],this['exitHandler']());}async[a85_0xe809af(0x1f3)](_0x5c5558){const _0x362205=a85_0xe809af,_0x4fb10e={'VHWyC':_0x362205(0x281),'ZQMGR':_0x362205(0x1b8),'aRIrZ':_0x362205(0x2ad),'tlueo':function(_0x204bc8,_0x523ac7){return _0x204bc8===_0x523ac7;},'zmaFU':_0x362205(0x288),'ouZpV':function(_0x2a4052,_0x208b75){return _0x2a4052+_0x208b75;},'MfCDR':'?caps=','tmXNq':function(_0x28ea3f,_0x106448){return _0x28ea3f(_0x106448);},'KWwBR':_0x362205(0x244)};this[_0x362205(0x1ef)](_0x5c5558);if(helper[_0x362205(0x28c)](this[_0x362205(0x28e)])){const _0x23bcb6=await helper[_0x362205(0x2ac)](this[_0x362205(0x28e)]);this[_0x362205(0x28e)][_0x362205(0x22d)]=_0x23bcb6,_0x23bcb6['isTrialGrid']&&helper[_0x362205(0x1f2)](this[_0x362205(0x28e)]['browserstackLocal'])&&helper[_0x362205(0x1fe)](this[_0x362205(0x28e)][_0x362205(0x21e)])&&(this[_0x362205(0x28e)][_0x362205(0x1f1)][_0x362205(0x1be)]=_0x4fb10e['VHWyC'],this[_0x362205(0x28e)][_0x362205(0x1f1)][_0x4fb10e[_0x362205(0x1fd)]]=_0x23bcb6[_0x362205(0x200)][_0x362205(0x25a)](','),this[_0x362205(0x28e)][_0x362205(0x1f1)][_0x362205(0x265)]=_0x4fb10e['aRIrZ']),this[_0x362205(0x28e)][_0x362205(0x20d)]=_0x23bcb6[_0x362205(0x23d)],this[_0x362205(0x1f7)]&&_0x4fb10e['tlueo'](this[_0x362205(0x1f7)][_0x362205(0x29c)](),_0x4fb10e['zmaFU'])?this[_0x362205(0x28e)]['turboScaleUrl']=_0x4fb10e[_0x362205(0x1ec)](_0x23bcb6[_0x362205(0x1f6)],_0x4fb10e[_0x362205(0x2a4)]):constants[_0x362205(0x1d6)]=helper['getHubUrl'](this[_0x362205(0x28e)]),logger[_0x362205(0x245)](_0x362205(0x2a9)+constants[_0x362205(0x1d6)]);}helper[_0x362205(0x27d)](this[_0x362205(0x28e)]),this[_0x362205(0x275)](),_0x4fb10e['tmXNq'](setPercyFlag,this),await this[_0x362205(0x295)](),![_0x4fb10e[_0x362205(0x20b)],_0x4fb10e[_0x362205(0x25e)]]['includes'](this[_0x362205(0x1f7)])&&!helper[_0x362205(0x28c)](this['config'])&&!helper['getCentralUser']()[_0x362205(0x258)]&&await this[_0x362205(0x1e3)]();}async[a85_0xe809af(0x232)](){const _0xd330a7=a85_0xe809af,_0x56b997={};_0x56b997[_0xd330a7(0x2b0)]=function(_0x586c57,_0x190f4e){return _0x586c57===_0x190f4e;},_0x56b997[_0xd330a7(0x298)]='false',_0x56b997[_0xd330a7(0x2a6)]=_0xd330a7(0x259),_0x56b997['XFqHc']=_0xd330a7(0x208),_0x56b997[_0xd330a7(0x1ee)]=_0xd330a7(0x2ad),_0x56b997[_0xd330a7(0x1c8)]=_0xd330a7(0x25d);const _0x232cf6=_0x56b997;if(helper['isTrue'](this[_0xd330a7(0x28e)][_0xd330a7(0x24f)])&&(!this[_0xd330a7(0x24f)]||!this[_0xd330a7(0x24f)][_0xd330a7(0x1e4)]()))try{this[_0xd330a7(0x24f)]=await percyHelper[_0xd330a7(0x23f)](this[_0xd330a7(0x28e)]);if(!this[_0xd330a7(0x24f)]){process[_0xd330a7(0x291)][_0xd330a7(0x282)]=_0x232cf6[_0xd330a7(0x298)];throw new Error(_0x232cf6[_0xd330a7(0x2a6)]);}logger[_0xd330a7(0x240)](_0x232cf6[_0xd330a7(0x2a8)]),process[_0xd330a7(0x291)][_0xd330a7(0x282)]=_0x232cf6[_0xd330a7(0x1ee)];let _0x523548=0x0;const _0x44efb7=async()=>{const _0x3c74d6=_0xd330a7;_0x523548++,_0x232cf6[_0x3c74d6(0x2b0)](_0x523548,0x1)&&await this['stopPercy']();};process['on'](_0x232cf6[_0xd330a7(0x1c8)],_0x44efb7);}catch(_0x148da8){process[_0xd330a7(0x291)][_0xd330a7(0x282)]=_0x232cf6[_0xd330a7(0x298)],logger[_0xd330a7(0x245)](_0xd330a7(0x1bf)+_0x148da8);throw new Error(_0x148da8[_0xd330a7(0x1c3)]());}}async[a85_0xe809af(0x1db)](){const _0x4f9300=a85_0xe809af,_0x4e6e5f={};_0x4e6e5f[_0x4f9300(0x2ae)]=_0x4f9300(0x21d),_0x4e6e5f[_0x4f9300(0x21c)]=_0x4f9300(0x277);const _0x14ad13=_0x4e6e5f;if(this[_0x4f9300(0x24f)]&&this[_0x4f9300(0x24f)][_0x4f9300(0x1e4)]())try{await percyHelper[_0x4f9300(0x1db)](this[_0x4f9300(0x24f)]),logger[_0x4f9300(0x240)](_0x14ad13[_0x4f9300(0x2ae)]);}catch(_0x2758b2){logger[_0x4f9300(0x27a)](_0x14ad13[_0x4f9300(0x21c)],_0x2758b2[_0x4f9300(0x220)]);}}async[a85_0xe809af(0x295)](){const _0x12c0b1=a85_0xe809af,_0x440275={};_0x440275[_0x12c0b1(0x237)]=_0x12c0b1(0x263),_0x440275[_0x12c0b1(0x214)]=_0x12c0b1(0x255);const _0x54de7f=_0x440275;if(helper['isBrowserstackInfra']()&&helper[_0x12c0b1(0x1fe)](this[_0x12c0b1(0x28e)][_0x12c0b1(0x21e)])&&(!this[_0x12c0b1(0x21e)]||!this[_0x12c0b1(0x21e)][_0x12c0b1(0x1e4)]()))try{if(this[_0x12c0b1(0x28e)][_0x12c0b1(0x1f1)]['skipBinaryInitialisation']){logger['debug'](_0x54de7f['kSVdd']);return;}this['browserstackLocal']=await helper['startLocalBinary'](this[_0x12c0b1(0x28e)]),logger['info'](_0x54de7f[_0x12c0b1(0x214)]);}catch(_0x1486cd){logger[_0x12c0b1(0x245)](_0x1486cd);throw new Error(_0x1486cd[_0x12c0b1(0x1c3)]());}}async[a85_0xe809af(0x212)](){const _0x425f58=a85_0xe809af,_0x41825d={};_0x41825d[_0x425f58(0x222)]=_0x425f58(0x1fc),_0x41825d[_0x425f58(0x1e5)]='Error\x20occured\x20while\x20stopping\x20local\x20binary';const _0x1c9356=_0x41825d;if(this[_0x425f58(0x21e)]&&this[_0x425f58(0x21e)][_0x425f58(0x1e4)]())try{await helper[_0x425f58(0x26b)](this[_0x425f58(0x21e)]),logger[_0x425f58(0x240)](_0x1c9356[_0x425f58(0x222)]);}catch(_0x1449e6){logger[_0x425f58(0x27a)](_0x1c9356[_0x425f58(0x1e5)],_0x1449e6[_0x425f58(0x220)]);}}async[a85_0xe809af(0x1e3)](){const _0x27615d=a85_0xe809af;return PerformanceTester[_0x27615d(0x203)](PerformanceAutEvents[_0x27615d(0x27b)],async()=>{const _0x506fdf=_0x27615d;await hubAllocator[_0x506fdf(0x231)](this[_0x506fdf(0x28e)]);})();}async['setupTCGAuth'](){const _0x12ab44=a85_0xe809af,_0x5ecc2e={'pIwic':function(_0xaa180,_0x3f92d7){return _0xaa180(_0x3f92d7);},'ymTGK':_0x12ab44(0x1ca),'ZtapU':function(_0x42192c,_0x201fae,_0x3f5c98,_0x31c673,_0x3e9e19,_0x544383,_0x390e33){return _0x42192c(_0x201fae,_0x3f5c98,_0x31c673,_0x3e9e19,_0x544383,_0x390e33);},'iheem':_0x12ab44(0x1ba),'hIZDU':'BrowserstackHealingInitFailed','vZsms':function(_0x18c2ed,_0x23858c){return _0x18c2ed(_0x23858c);},'eVUUl':_0x12ab44(0x27f),'gztEB':_0x12ab44(0x238),'nWVBz':function(_0x552f8b,_0x4a6abe){return _0x552f8b===_0x4a6abe;},'FtneQ':_0x12ab44(0x2ad),'fZihv':function(_0x4ce035,_0x43cb85){return _0x4ce035===_0x43cb85;},'EsJtb':_0x12ab44(0x1eb),'oZztE':function(_0x311bf3,_0x2ac8c0){return _0x311bf3===_0x2ac8c0;},'ygPeK':_0x12ab44(0x268),'lHElE':_0x12ab44(0x204),'CHZZN':function(_0x5dfa01,_0x5cf19a){return _0x5dfa01(_0x5cf19a);},'Fdhov':_0x12ab44(0x1c6),'jeVBm':function(_0x4882cc,_0x6afcb2){return _0x4882cc>=_0x6afcb2;},'lqObO':function(_0x5f4cd0,_0x12dd37){return _0x5f4cd0<_0x12dd37;},'GqABb':'tcg\x20config\x20setup\x20successful.','dYYCv':_0x12ab44(0x243),'yonij':function(_0x38d27){return _0x38d27();}},_0x1457e7=PerformanceTester[_0x12ab44(0x203)](_0x5ecc2e[_0x12ab44(0x276)],async()=>{const _0x41b583=_0x12ab44;try{const _0x479127=new Date(),_0x5321bb=helper[_0x41b583(0x20f)](this[_0x41b583(0x28e)]),_0x1911f5=_0x5ecc2e[_0x41b583(0x207)](require,path[_0x41b583(0x25a)](__dirname,_0x5ecc2e[_0x41b583(0x26e)])),_0x34c9f4=_0x5ecc2e[_0x41b583(0x223)](timeoutPromise,constants['TCG_AUTH_TIMEOUT'],_0x5ecc2e[_0x41b583(0x1ea)],_0x5ecc2e[_0x41b583(0x224)],_0x479127,this[_0x41b583(0x28e)],this[_0x41b583(0x1f7)]),_0x36fb96={'tcgUrl':constants[_0x41b583(0x24b)],'sdkVersion':_0x5ecc2e[_0x41b583(0x21f)](require,_0x5ecc2e[_0x41b583(0x1cc)])[_0x41b583(0x2a7)],'methodUsed':_0x5ecc2e['gztEB'],'proxyConfig':_0x5321bb,'os':os['platform']()};if(_0x5321bb&&_0x5321bb[_0x41b583(0x1b6)]){utilities[_0x41b583(0x278)](constants[_0x41b583(0x1f0)],_0x36fb96,this[_0x41b583(0x28e)],this['framework']);return;}const _0x105deb={};_0x105deb[_0x41b583(0x230)]=_0x5321bb;const _0x4d8274=await Promise[_0x41b583(0x1da)]([_0x1911f5[_0x41b583(0x287)](this[_0x41b583(0x28e)]['accessKey'],this[_0x41b583(0x28e)]['userName'],constants[_0x41b583(0x24b)],_0x5ecc2e[_0x41b583(0x21f)](require,_0x5ecc2e['eVUUl'])[_0x41b583(0x2a7)],_0x105deb)['then'](_0x45acc3=>{return _0x34c9f4['cancel'](),_0x45acc3;}),_0x34c9f4]);_0x4d8274[_0x41b583(0x249)]=_0x5ecc2e[_0x41b583(0x1b3)](_0x4d8274[_0x41b583(0x249)],_0x5ecc2e[_0x41b583(0x239)])||_0x5ecc2e['nWVBz'](_0x4d8274['isHealingEnabled'],!![]);const _0x347aec=_0x5ecc2e[_0x41b583(0x1b3)](this['config'][_0x41b583(0x2a1)],!![])||_0x5ecc2e[_0x41b583(0x273)](this[_0x41b583(0x28e)][_0x41b583(0x2a1)],_0x5ecc2e[_0x41b583(0x239)]);if(_0x5ecc2e['nWVBz'](_0x4d8274[_0x41b583(0x220)],constants[_0x41b583(0x247)])&&_0x347aec)logger[_0x41b583(0x240)](_0x5ecc2e[_0x41b583(0x235)]);else{if(!_0x4d8274[_0x41b583(0x219)]&&_0x5ecc2e[_0x41b583(0x285)](_0x4d8274[_0x41b583(0x252)],0x1f7)&&_0x347aec)logger[_0x41b583(0x240)](_0x5ecc2e[_0x41b583(0x290)]),utilities[_0x41b583(0x278)](constants[_0x41b583(0x229)],_0x36fb96,this[_0x41b583(0x28e)],this[_0x41b583(0x1f7)]);else{if(!_0x4d8274[_0x41b583(0x219)]&&_0x347aec){logger[_0x41b583(0x240)](_0x5ecc2e[_0x41b583(0x205)]);const _0x9ace02={'tcgUrl':constants[_0x41b583(0x24b)],'sdkVersion':_0x5ecc2e['CHZZN'](require,_0x5ecc2e[_0x41b583(0x1cc)])[_0x41b583(0x2a7)],'methodUsed':_0x5ecc2e[_0x41b583(0x2af)],'proxyConfig':_0x5321bb,'os':os[_0x41b583(0x1e6)]()};utilities[_0x41b583(0x278)](constants[_0x41b583(0x1c4)],_0x9ace02,this[_0x41b583(0x28e)],this[_0x41b583(0x1f7)]);}else{if(_0x4d8274[_0x41b583(0x219)]&&!_0x4d8274[_0x41b583(0x249)]&&_0x347aec)logger[_0x41b583(0x240)](_0x5ecc2e[_0x41b583(0x201)]);else{if(_0x5ecc2e[_0x41b583(0x1e7)](_0x4d8274['status'],0xc8)&&_0x5ecc2e[_0x41b583(0x23e)](_0x4d8274[_0x41b583(0x252)],0x12c))utilities[_0x41b583(0x278)](constants['AI_INIT_SUCCESSFUL'],_0x36fb96,this[_0x41b583(0x28e)],this[_0x41b583(0x1f7)]);else{if(_0x5ecc2e[_0x41b583(0x1e7)](_0x4d8274[_0x41b583(0x252)],0x190))_0x36fb96[_0x41b583(0x252)]=_0x4d8274['status'],utilities[_0x41b583(0x278)](constants[_0x41b583(0x226)],_0x36fb96,this['config'],this[_0x41b583(0x1f7)]);else!_0x4d8274[_0x41b583(0x252)]&&utilities[_0x41b583(0x278)](constants[_0x41b583(0x225)],_0x36fb96,this[_0x41b583(0x28e)],this[_0x41b583(0x1f7)]);}}}}}if(_0x4d8274[_0x41b583(0x219)]&&_0x4d8274[_0x41b583(0x249)]){const _0x5acba6={};_0x5acba6[_0x41b583(0x27e)]=_0x4d8274;const _0x103112=_0x5acba6;_0x5321bb&&(_0x103112[_0x41b583(0x24e)]=_0x5321bb),_0x103112[_0x41b583(0x1f7)]=this[_0x41b583(0x1f7)],_0x103112[_0x41b583(0x2a3)]=this[_0x41b583(0x28e)],helper[_0x41b583(0x28d)](_0x103112),logger['debug'](_0x5ecc2e[_0x41b583(0x1d2)]);}}catch(_0x1ba91e){logger['debug'](_0x41b583(0x26c)+(_0x1ba91e[_0x41b583(0x220)]?_0x1ba91e[_0x41b583(0x220)]:''));}});await _0x5ecc2e[_0x12ab44(0x250)](_0x1457e7);}[a85_0xe809af(0x275)](){const _0x33926f=a85_0xe809af,_0x73e2b5={'xDkAO':function(_0x4cbd00,_0x47e396){return _0x4cbd00(_0x47e396);},'tVmxQ':_0x33926f(0x246)};_0x73e2b5['xDkAO'](require,_0x73e2b5['tVmxQ'])();}[a85_0xe809af(0x1d9)](){const _0x2dfd49=a85_0xe809af,_0x5ce03b={};_0x5ce03b[_0x2dfd49(0x26f)]=_0x2dfd49(0x24d),_0x5ce03b[_0x2dfd49(0x28f)]=_0x2dfd49(0x27c);const _0x7555d6=_0x5ce03b,_0x5c64f8=_0x38a03c=>{const _0x279021=_0x2dfd49;logger['error'](_0x38a03c['message']),logger['debug'](util[_0x279021(0x20c)](_0x38a03c)),this[_0x279021(0x1d7)][_0x279021(0x1b4)](util[_0x279021(0x20c)]('%j',_0x38a03c)),PerformanceTester['captureError'](_0x38a03c);};process['on'](_0x7555d6[_0x2dfd49(0x26f)],_0x5c64f8),process['on'](_0x7555d6[_0x2dfd49(0x28f)],_0x5c64f8);}async['intExitHandler'](_0x11038d){const _0x236055=a85_0xe809af,_0x169f62={};_0x169f62[_0x236055(0x1b2)]='0|2|6|3|1|7|5|4',_0x169f62['OXgHQ']=function(_0x40c191,_0x520038){return _0x40c191+_0x520038;},_0x169f62['IKOAR']='Shutdown\x20triggered\x20by\x20',_0x169f62[_0x236055(0x262)]=function(_0x193c3e,_0x123295){return _0x193c3e+_0x123295;},_0x169f62[_0x236055(0x22c)]='handled';const _0x14c9b4=_0x169f62,_0xbb3b38=_0x14c9b4[_0x236055(0x1b2)]['split']('|');let _0xbca250=0x0;while(!![]){switch(_0xbb3b38[_0xbca250++]){case'0':logger&&logger[_0x236055(0x1b9)]();continue;case'1':logger['info'](_0x14c9b4[_0x236055(0x1c7)](_0x14c9b4[_0x236055(0x28b)],_0x11038d));continue;case'2':fileLogger&&fileLogger[_0x236055(0x1b9)]();continue;case'3':this[_0x14c9b4[_0x236055(0x262)](_0x14c9b4[_0x236055(0x22c)],_0x11038d)]=!![];continue;case'4':await BrowserstackCLI[_0x236055(0x266)]()[_0x236055(0x1dc)]();continue;case'5':await TestHubHandler[_0x236055(0x1dc)](_0x11038d);continue;case'6':if(this[_0x14c9b4[_0x236055(0x262)](_0x14c9b4[_0x236055(0x22c)],_0x11038d)])return;continue;case'7':this[_0x236055(0x279)]=_0x11038d;continue;}break;}}[a85_0xe809af(0x29b)](){const _0x182943=a85_0xe809af,_0x3078c4={'KEual':function(_0x389199,_0x55a081){return _0x389199===_0x55a081;},'HYiVq':_0x182943(0x260),'meZvj':function(_0x3523ea,_0x79df77){return _0x3523ea>_0x79df77;},'FLGXG':function(_0x22fc69){return _0x22fc69();},'KvXXS':'events.json'};let _0x95b900=0x0;return async()=>{const _0x276fc7=_0x182943;_0x95b900++;if(_0x3078c4[_0x276fc7(0x24c)](_0x95b900,0x1)){helper[_0x276fc7(0x25c)](this[_0x276fc7(0x1f7)])&&await this[_0x276fc7(0x212)]();try{logger[_0x276fc7(0x245)](_0x3078c4[_0x276fc7(0x1f8)]),await TestHubHandler['stop'](_0x95b900),await BrowserstackCLI['getInstance']()[_0x276fc7(0x1dc)]('1');}catch(_0xb64e0b){logger['debug'](_0x276fc7(0x1b5)+util[_0x276fc7(0x20c)](_0xb64e0b));}PerformanceTester[_0x276fc7(0x283)](PerformanceEvents[_0x276fc7(0x1bd)]);if(PerformanceTester['isEnabled']()){const {measures:_0x482bae,errors:_0x20ee93}=await PerformanceTester['finalize'](),_0x2512df={};if(_0x482bae&&_0x3078c4[_0x276fc7(0x202)](_0x482bae[_0x276fc7(0x28a)],0x0)||_0x20ee93&&_0x3078c4[_0x276fc7(0x202)](_0x20ee93[_0x276fc7(0x28a)],0x0)){const _0x25b28a={};_0x25b28a[_0x276fc7(0x1f9)]=_0x482bae,_0x25b28a[_0x276fc7(0x1c1)]=_0x20ee93,Object[_0x276fc7(0x21a)](_0x2512df,_0x25b28a);}try{const _0x501284=await helper[_0x276fc7(0x1fb)](_0x2512df,this[_0x276fc7(0x28e)]);logger[_0x276fc7(0x245)](_0x276fc7(0x227)+constants[_0x276fc7(0x29e)]+'\x20with\x20response\x20'+_0x501284[_0x276fc7(0x1e9)]);}catch(_0x2e4869){logger[_0x276fc7(0x245)](_0x276fc7(0x241)+constants[_0x276fc7(0x29e)]+'\x20with\x20error\x20'+util[_0x276fc7(0x20c)](_0x2e4869));}try{fs[_0x276fc7(0x234)](path[_0x276fc7(0x25a)](_0x3078c4[_0x276fc7(0x254)](getLogDir),_0x3078c4[_0x276fc7(0x25b)]),JSON['stringify'](_0x2512df));}catch(_0xe49503){logger[_0x276fc7(0x245)](_0x276fc7(0x296)+_0xe49503);}}}};}}exports[a85_0xe809af(0x236)]=BrowserStackSetup;function a85_0x2366(){const _0x536416=['isUndefined','cliConfig','isAuthenticated','assign','SIGINT','kbiRs','Percy\x20stopped','browserstackLocal','vZsms','message','fileLogger','yNdSA','ZtapU','hIZDU','INVALID_INIT_RESP_WITH_USER_IMPACT','AI_INIT_FAILURE','Data\x20sent\x20successfully\x20to\x20','SIGHUP','TCG_DOWN','saslo','userName\x20or\x20accessKey\x20is\x20not\x20defined','pkYhv','turboScaleGridDetails','startMonitoring','779992pJRIlE','proxy','allocateHub','setupPercy','5660646XvvaXj','writeFileSync','EsJtb','default','kSVdd','BrowserstackHealing.init','FtneQ','testContextOptions','1194670jGCTuz','getLocalIdentifier','url','lqObO','startPercy','info','Failed\x20to\x20send\x20data\x20to\x20','lWzBW','aiHeal:tcgAuth','codeceptjs','debug','./setKeepAlive','UPGRADE_REQUIRED','./performance/performance-tester','isHealingEnabled','RVEmB','TCG_URL','KEual','unhandledRejection','proxyConfig','percy','yonij','BROWSERSTACK_TURBOSCALE','status','pyDeh','FLGXG','Local\x20binary\x20started\x20successfully','turboScaleOptions','44kreVFW','central_scanner','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','join','KvXXS','checkStopLocalBinaryOnExit','beforeExit','zmaFU','XswUD','Calling\x20Build\x20Stop\x20from\x20ExitHandler','AUTOLOGCAPTURE_NOTIFICATION','mAoqH','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','localOptions','forceLocal','getInstance','turboScale','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','./utilities','errorMessage','stopLocalBinary','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','No\x20config\x20provided.','ymTGK','tEEKn','constructor','warn','218523XMtkfS','fZihv','getLocalConfig','setupKeepAlive','dYYCv','Error\x20occured\x20while\x20stopping\x20percy','fireFunnelTestEvent','killSignal','error','HUB_MANAGEMENT','uncaughtException','setProxySettings','tcgAuthConfig','../../package.json','util','ats-repeater','BROWSERSTACK_PERCY','end','getPackageVersion','oZztE','SIGQUIT','init','playwright','split','length','IKOAR','isTurboScaleSession','setupTcgConfigFile','config','ZmwPJ','ygPeK','env','setLogLevel','path','../bin/utils/constants','setupBrowserstackLocal','Error\x20in\x20writing\x20events\x20to\x20file\x20','SIGTERM','uivUc','disableAutoCaptureLogs','SIGABRT','exitHandler','toLowerCase','getFinalCaps','EDS_URL','lZYts','setEnvCaps','selfHeal','envConfig','bstackConfig','MfCDR','6606155BeEhqU','veGlV','version','XFqHc','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','Etntc','./performance/constants','getTurboScaleGridDetails','true','nAxwK','gztEB','jSPGx','QWVRI','nWVBz','push','Error\x20in\x20sending\x20testhub\x20stop:\x20','proxyUrl','platforms','custom-repeater','close','BrowserstackHealing.init\x20method\x20timed\x20out','isBrowserstackInfra','vxlSB','SDK_CLEANUP','localIdentifier','Error\x20in\x20percy\x20setup\x20','setBrowserstackInfraFromConfig','exceptions','8887816mouYct','toString','TCG_AUTH_FAILURE','generateLocalIdentifier','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','OXgHQ','UteKj','WcCgs','../ai-sdk-node/bundle','MvZxD','eVUUl','compareVersions','SIGBREAK','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','skipSessionStatus','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','GqABb','useW3C','__isPlaywrightInstalled','uuid','hubUrl','unhandledErrors','sanitizeCaps','handleExceptions','race','stopPercy','stop','./logger','intExitHandler','luXpi','setCLICaps','../bin/v2/browserstackCLI','4.5.0','setUpHubUrl','isRunning','PKAzB','platform','jeVBm','integrations','statusCode','iheem','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','ouZpV','SDKTestAttempted','PLujW','preInitialize','AI_PROXY_FAILURE','browserStackLocalOptions','isNotUndefined','initialize','parallelsPerPlatform','setLogDir','playwrightUrl','framework','HYiVq','measures','requireSeleniumWebdriverCheck','sendToEDS','Local\x20binary\x20stopped','ZQMGR','isTrue','SDK\x20run\x20started\x20with\x20id:\x20','customRepeaters','Fdhov','meZvj','measureWrapper','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','lHElE','readConfig','pIwic','Percy\x20started\x20successfully','skipSessionName','10618307AZplTK','KWwBR','format','turboScaleUrl','NfwpK','getProxyConfigForTcg','skipBinaryInitialisation','setHandlePWError','stopBrowserstackLocal','lwfmX','eNmSS','win32','sdkRunId'];a85_0x2366=function(){return _0x536416;};return a85_0x2366();}