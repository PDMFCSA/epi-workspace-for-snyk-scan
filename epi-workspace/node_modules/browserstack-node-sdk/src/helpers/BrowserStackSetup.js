function a94_0x3cff(_0x5929e7,_0x2c73b3){const _0x3577d5=a94_0x3577();return a94_0x3cff=function(_0x3cff2e,_0x591dbf){_0x3cff2e=_0x3cff2e-0x133;let _0x439e2b=_0x3577d5[_0x3cff2e];return _0x439e2b;},a94_0x3cff(_0x5929e7,_0x2c73b3);}const a94_0x308723=a94_0x3cff;function a94_0x3577(){const _0xb76efd=['startMonitoring','ikVuW','Percy\x20started\x20successfully','LzUin','./timeoutPromise','AI_INIT_SUCCESSFUL','KpHzp','AI_PROXY_FAILURE','turboScaleUrl','INVALID_INIT_RESP_WITH_USER_IMPACT','MYxGI','TaGEe','aiHeal:tcgAuth','finalize','BrowserstackHealing.init\x20method\x20timed\x20out','AGNQL','getProxyConfigForTcg','tQlQv','default','72zJjpuK','setLogLevel','killSignal','isLTSSession','join','turboScale','ueVMa','customRepeaters','BRJRq','getLocalIdentifier','tcOGO','close','reportProcessInterruptionSituation','AI_INIT_FAILURE','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','./performance/constants','testContextOptions','isTurboScaleSession','version','getLocalConfig','nopUL','toLowerCase','checkStopLocalBinaryOnExit','setUpHubUrl','handleExceptions','IZgyc','uncaughtException','qhDlT','4|5|3|0|1|7|6|2','15|21|18|6|4|16|0|5|11|13|14|19|17|12|23|1|2|9|7|8|10|3|20|22','Failed\x20to\x20send\x20data\x20to\x20','./percy/utils','url','turboScaleOptions','TASif','xLiRB','iYjwl','omeSe','571281tCzmlP','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','measures','path','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','wjajD','OWXWL','ofWoM','isEnabled','3596980HTflOK','statusCode','TCG_AUTH_TIMEOUT','race','./performance/performance-tester','xswLP','fWTxZ','isAuthenticated','custom-repeater','isUndefined','zOJyf','FRAMEWORK','errorMessage','fireFunnelTestEvent','QVqFf','compareVersions','TCG_DOWN','\x20with\x20response\x20','env','skipSessionStatus','BROWSERSTACK_TURBOSCALE','ajUWA','4|0|1|2|3','turboScaleGridDetails','BbKUm','error','reportFinalDetectionState','message','tcg\x20config\x20setup\x20successful.','parallelsPerPlatform','SIGINT','140508IcYlPE','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','setCredentialsFromYmlConfig','./helper','writeFileSync','jyXZx','unhandledRejection','SDK_CLEANUP','useW3C','end','QbEpR','readConfig','getCentralUser','info','EDizG','ElNKx','cliConfig','toString','qKFXV','__isPlaywrightInstalled','isNotUndefined','../ai-sdk-node/bundle','cAzTE','NMlZS','haDow','selenium-webdriver','gfVWk','YWiMt','requireSeleniumWebdriverCheck','./testhub/testhubHandler','EPouz','exceptions','1400610YjbXNL','tcgAuthConfig','Error\x20in\x20sending\x20testhub\x20stop:\x20','envConfig','bstackConfig','Shutdown\x20triggered\x20by\x20','KRkCC','setupPercy','proxy','stopLocalBinary','startLocalBinary','format','pXXwb','32unqWqc','../../package.json','split','configPath','setupTCGAuth','cancel','BROWSERSTACK_PERCY','PIeTh','fileLogger','central_scanner','setCLICaps','framework','ZEzjL','33250690wRaEKw','length','localIdentifier','Local\x20binary\x20stopped','../bin/utils/clientTroubleshootingService','noLUU','Ibzkd','userName\x20or\x20accessKey\x20is\x20not\x20defined','integrations','skipSessionName','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','MsgyH','VOZwI','warn','beforeExit','ZQuGC','Error\x20in\x20percy\x20setup\x20','Error\x20in\x20writing\x20events\x20to\x20file\x20','disableAutoCaptureLogs','getUserName','setLogDir','4295vxBjhk','status','../bin/v2/browserstackCLI','inmem','BrowserstackHealingInitFailed','true','SDK\x20run\x20started\x20with\x20id:\x20','getPackageVersion','wasQK','bEpSv','JwebN','tqifh','zWrsv','measureWrapper','4.5.0','setBrowserstackInfraFromConfig','ACBHJ','setHandlePWError','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','includes','push','4iyhOjr','TCG_URL','platform','./setKeepAlive','vJIWs','tlbXd','isHealingEnabled','isRunning','platforms','uuid','getInstance','events.json','selfHeal','stop','IQvdV','preInitialize','proxyUrl','accessKey','playwrightUrl','UPGRADE_REQUIRED','./utilities','percy','exitHandler','BrowserstackHealing.init','YtDtL','sdkRunId','init','sanitizeCaps','HUB_MANAGEMENT','PZltb','skipBinaryInitialisation','generateLocalIdentifier','Error\x20occured\x20while\x20stopping\x20percy','browserstackLocal','config','blLNi','EDxLm','SDKTestAttempted','BRMiB','stopBrowserstackLocal','?caps=','debug','setupBrowserstackLocal','AUTOLOGCAPTURE_NOTIFICATION','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','hubUrl','\x20with\x20error\x20','false','jIAtb','./testhub/utils','SIGTERM','forceLocal','GBjsu','stopPercy','LrMKO','KUAZR','pBGaD','2208003hxzepv','getConfigPath','Error\x20occured\x20while\x20stopping\x20local\x20binary','constructor','normalizeTestReportingEnvVars','unhandledErrors','browserStackLocalOptions','./logger','RfYjc','isBrowserstackInfra','setProxySettings','EBCwV','isTrue','setupKeepAlive','captureError','SIGHUP','PlqMJ','ats-repeater','Data\x20sent\x20successfully\x20to\x20','getAccessKey','intExitHandler','win32'];a94_0x3577=function(){return _0xb76efd;};return a94_0x3577();}(function(_0x4ed190,_0x567058){const _0x581a22=a94_0x3cff,_0x1cc8df=_0x4ed190();while(!![]){try{const _0x3b92b3=parseInt(_0x581a22(0x230))/0x1*(-parseInt(_0x581a22(0x193))/0x2)+-parseInt(_0x581a22(0x1b9))/0x3+-parseInt(_0x581a22(0x245))/0x4*(parseInt(_0x581a22(0x1c2))/0x5)+-parseInt(_0x581a22(0x201))/0x6+-parseInt(_0x581a22(0x16a))/0x7*(parseInt(_0x581a22(0x20e))/0x8)+-parseInt(_0x581a22(0x1e1))/0x9+parseInt(_0x581a22(0x21b))/0xa;if(_0x3b92b3===_0x567058)break;else _0x1cc8df['push'](_0x1cc8df['shift']());}catch(_0x284b6a){_0x1cc8df['push'](_0x1cc8df['shift']());}}}(a94_0x3577,0xb7127));const util=require('util'),os=require('os'),path=require(a94_0x308723(0x1bc)),{v4:uuidv4}=require(a94_0x308723(0x13a)),fs=require('fs'),constants=require('../bin/utils/constants'),logger=require(a94_0x308723(0x171))['winstonLogger'],fileLogger=require(a94_0x308723(0x171))[a94_0x308723(0x216)],{getLogDir}=require(a94_0x308723(0x171)),helper=require(a94_0x308723(0x1e4)),utilities=require(a94_0x308723(0x145)),percyHelper=require(a94_0x308723(0x1b2)),hubAllocator=require('../hubAllocationMethods'),PerformanceTester=require(a94_0x308723(0x1c6)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a94_0x308723(0x1a2)),{setPercyFlag}=require(a94_0x308723(0x162)),TestHubHandler=require(a94_0x308723(0x1fe)),timeoutPromise=require(a94_0x308723(0x184)),BrowserstackCLI=require(a94_0x308723(0x232)),LoadTestModule=require('../bin/v2/modules/loadTestModule'),{getEdsInstrumentationAPIUrl}=require('../bin/utils/apiUtilityMethods'),ClientTroubleShootingService=require(a94_0x308723(0x21f));class BrowserStackSetup{constructor(_0xef1427,_0x4d00b6){const _0x140093=a94_0x308723,_0x29106={'QbEpR':_0x140093(0x1b0),'oIUCD':function(_0x2809b7){return _0x2809b7();},'wjajD':'No\x20config\x20provided.'},_0x20a600=_0x29106[_0x140093(0x1eb)]['split']('|');let _0x55b18d=0x0;while(!![]){switch(_0x20a600[_0x55b18d++]){case'0':this[_0x140093(0x153)]=helper[_0x140093(0x1ec)](this[_0x140093(0x211)]);continue;case'1':if(this[_0x140093(0x153)][_0x140093(0x1db)])throw new Error(this[_0x140093(0x153)][_0x140093(0x1db)]);continue;case'2':helper[_0x140093(0x23f)](this[_0x140093(0x153)],this[_0x140093(0x1f1)]);continue;case'3':helper[_0x140093(0x22f)](this['config']);continue;case'4':this['percy']=null;continue;case'5':this[_0x140093(0x1f1)]=helper[_0x140093(0x218)](_0xef1427);continue;case'6':this[_0x140093(0x152)]=null;continue;case'7':this[_0x140093(0x153)]['testContextOptions'][_0x140093(0x1d5)]=!helper[_0x140093(0x173)]()||helper[_0x140093(0x176)](this[_0x140093(0x153)][_0x140093(0x1a3)]['skipSessionStatus']);continue;case'8':this['config'][_0x140093(0x1a3)]['skipSessionName']=!helper[_0x140093(0x173)]()||helper[_0x140093(0x176)](this[_0x140093(0x153)][_0x140093(0x1a3)][_0x140093(0x224)]);continue;case'9':helper[_0x140093(0x1e3)](this['config']);continue;case'10':helper['getFinalCaps'](this[_0x140093(0x153)],this[_0x140093(0x1f1)],this[_0x140093(0x204)]);continue;case'11':this[_0x140093(0x153)]['platforms']=this[_0x140093(0x153)][_0x140093(0x139)]||[];continue;case'12':global[_0x140093(0x219)]=_0x4d00b6;continue;case'13':this[_0x140093(0x153)][_0x140093(0x1a3)]=this[_0x140093(0x153)][_0x140093(0x1a3)]||{};continue;case'14':this[_0x140093(0x1ce)]={};continue;case'15':this[_0x140093(0x16f)]=[];continue;case'16':this[_0x140093(0x211)]=helper[_0x140093(0x16b)](_0xef1427);continue;case'17':this['framework']=_0x4d00b6;continue;case'18':this[_0x140093(0x204)]=helper['setEnvCaps']();continue;case'19':this[_0x140093(0x14a)]=_0x29106['oIUCD'](uuidv4);continue;case'20':helper[_0x140093(0x194)](this[_0x140093(0x153)],this[_0x140093(0x1f1)],this['envConfig']);continue;case'21':helper[_0x140093(0x16e)]();continue;case'22':PerformanceTester[_0x140093(0x180)]();continue;case'23':if(helper[_0x140093(0x1cb)](this[_0x140093(0x153)]))throw new Error(_0x29106[_0x140093(0x1be)]);continue;}break;}}[a94_0x308723(0x140)](_0x1290e0){const _0x31f130=a94_0x308723,_0x3d2fce={'BbKUm':_0x31f130(0x222),'inmem':function(_0x297874,_0x4d62c9){return _0x297874===_0x4d62c9;},'TASif':_0x31f130(0x223),'ofWoM':_0x31f130(0x156),'Wcvvm':function(_0x5f1203,_0x58877d){return _0x5f1203<_0x58877d;},'zWrsv':function(_0x506dfc,_0x50131c){return _0x506dfc(_0x50131c);},'jyXZx':_0x31f130(0x1fa),'uEiRO':_0x31f130(0x23e),'xswLP':'Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','LzUin':_0x31f130(0x1ba),'EBCwV':_0x31f130(0x163),'qKFXV':_0x31f130(0x1e0),'MYxGI':_0x31f130(0x179),'OWXWL':function(_0xb97d9b,_0x5b82a4){return _0xb97d9b!==_0x5b82a4;},'tlbXd':_0x31f130(0x17f),'JwebN':'SIGABRT','sjpOQ':'SIGQUIT','mdCPT':'SIGBREAK','tcOGO':_0x31f130(0x229)},_0x1e1690=this['framework'];global[_0x31f130(0x153)]=this[_0x31f130(0x153)],helper[_0x31f130(0x14c)](this['config']),this['killSignal']=null,global[_0x31f130(0x14a)]=this[_0x31f130(0x14a)],logger[_0x31f130(0x1ee)](_0x31f130(0x236)+this[_0x31f130(0x14a)]),!this[_0x31f130(0x153)][_0x31f130(0x170)]&&(this[_0x31f130(0x153)][_0x31f130(0x170)]=this[_0x31f130(0x153)]['localOptions']||{});if(helper[_0x31f130(0x1cb)](helper[_0x31f130(0x22e)](this[_0x31f130(0x153)]))||helper['isUndefined'](helper[_0x31f130(0x17d)](this[_0x31f130(0x153)])))throw new Error(_0x3d2fce[_0x31f130(0x1da)]);helper[_0x31f130(0x1a6)](this['config'])&&helper['isUndefined'](helper[_0x31f130(0x19c)](this['config']))&&(!helper['isUndefined'](this[_0x31f130(0x153)][_0x31f130(0x170)])&&_0x3d2fce['inmem'](this['config']['browserStackLocalOptions'][_0x31f130(0x16d)],Object)?!helper[_0x31f130(0x176)](this[_0x31f130(0x153)][_0x31f130(0x170)][_0x31f130(0x14f)])&&(this[_0x31f130(0x153)][_0x31f130(0x170)][_0x31f130(0x21d)]=helper[_0x31f130(0x150)]()):this[_0x31f130(0x153)][_0x31f130(0x170)]={'localIdentifier':helper[_0x31f130(0x150)]()});this[_0x31f130(0x153)]['browserStackLocalOptions'][_0x31f130(0x14f)]=helper['isTrue'](this[_0x31f130(0x153)]['browserStackLocalOptions'][_0x31f130(0x14f)]),helper[_0x31f130(0x241)](this[_0x31f130(0x153)]);if(_0x3d2fce[_0x31f130(0x233)](_0x1e1690,_0x3d2fce[_0x31f130(0x1b5)]))return;this[_0x31f130(0x1ab)]();process[_0x31f130(0x1d4)][_0x31f130(0x1d6)]&&(this[_0x31f130(0x153)][_0x31f130(0x198)]=helper[_0x31f130(0x176)](process['env'][_0x31f130(0x1d6)]),this[_0x31f130(0x153)][_0x31f130(0x1b4)]=this['config'][_0x31f130(0x1b4)]||{});helper[_0x31f130(0x1a4)](this['config'])&&(process[_0x31f130(0x1d4)]['BROWSERSTACK_TURBOSCALE']=!![]);LoadTestModule[_0x31f130(0x196)](this[_0x31f130(0x153)])&&logger[_0x31f130(0x15a)]('LTS\x20session\x20enabled\x20for\x20this\x20run.\x20SDK\x20run\x20id:\x20'+this[_0x31f130(0x14a)]);if(!helper[_0x31f130(0x173)]()){try{process[_0x31f130(0x1d4)][_0x31f130(0x1cd)]=_0x1e1690,utilities[_0x31f130(0x1cf)](_0x3d2fce[_0x31f130(0x1c0)],{},this[_0x31f130(0x153)],this[_0x31f130(0x219)]);}catch(_0x14c998){logger['debug'](_0x31f130(0x242)+_0x14c998);}return;}if(helper[_0x31f130(0x1fd)](_0x1e1690)){if(global[_0x31f130(0x1f4)])return;_0x3d2fce['Wcvvm'](_0x3d2fce[_0x31f130(0x23c)](parseInt,helper[_0x31f130(0x237)](_0x3d2fce[_0x31f130(0x1e6)])),0x3)&&(this[_0x31f130(0x153)][_0x31f130(0x1e9)]=![]),_0x3d2fce[_0x31f130(0x233)](helper[_0x31f130(0x1d1)](helper[_0x31f130(0x237)](_0x3d2fce[_0x31f130(0x1e6)]),_0x3d2fce['uEiRO']),0x1)&&(this[_0x31f130(0x153)][_0x31f130(0x1e9)]=!![]);}(helper['isUndefined'](this[_0x31f130(0x153)]['platforms'])||helper[_0x31f130(0x1cb)](this[_0x31f130(0x153)][_0x31f130(0x139)][_0x31f130(0x21c)]))&&(helper[_0x31f130(0x1cb)](this['config'][_0x31f130(0x1df)])?logger[_0x31f130(0x1ee)](_0x3d2fce[_0x31f130(0x1c7)]):logger[_0x31f130(0x228)](_0x3d2fce[_0x31f130(0x183)]),this[_0x31f130(0x153)][_0x31f130(0x139)]=[]);!this[_0x31f130(0x153)][_0x31f130(0x1a3)]&&(this[_0x31f130(0x153)][_0x31f130(0x1a3)]={});try{process['env'][_0x31f130(0x1cd)]=_0x1290e0['_'][0x0],utilities['fireFunnelTestEvent'](_0x3d2fce[_0x31f130(0x1c0)],{},this[_0x31f130(0x153)],this['framework']);}catch(_0x10624c){logger['debug']('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x10624c);}!this[_0x31f130(0x153)][_0x31f130(0x22d)]&&logger['info'](constants[_0x31f130(0x15c)]),this[_0x31f130(0x17e)]=this['intExitHandler']['bind'](this),process['on'](_0x3d2fce[_0x31f130(0x175)],this[_0x31f130(0x17e)]),process['on'](_0x3d2fce[_0x31f130(0x1f3)],this[_0x31f130(0x17e)]),process['on'](_0x3d2fce[_0x31f130(0x18a)],this[_0x31f130(0x17e)]),_0x3d2fce[_0x31f130(0x1bf)](process['platform'],_0x3d2fce[_0x31f130(0x136)])?(process['on'](_0x3d2fce[_0x31f130(0x23a)],this[_0x31f130(0x17e)]),process['on'](_0x3d2fce['sjpOQ'],this[_0x31f130(0x17e)])):process['on'](_0x3d2fce['mdCPT'],this['intExitHandler']),process['on'](_0x3d2fce[_0x31f130(0x19d)],this['exitHandler']());}async['initialize'](_0x202218){const _0x4537ec=a94_0x308723,_0x59e204={'QVqFf':_0x4537ec(0x17b),'TaGEe':_0x4537ec(0x1ca),'bEpSv':'true','PlqMJ':function(_0x25798d,_0x5547b6){return _0x25798d===_0x5547b6;},'haDow':'playwright','SxRoo':function(_0x1e98e1,_0x164cfa){return _0x1e98e1+_0x164cfa;},'ikVuW':_0x4537ec(0x159),'ACBHJ':function(_0x4866a8,_0x5a33ed){return _0x4866a8(_0x5a33ed);},'BRJRq':'codeceptjs'};this[_0x4537ec(0x140)](_0x202218);if(helper[_0x4537ec(0x1a4)](this[_0x4537ec(0x153)])){const _0x56b6e0=await helper['getTurboScaleGridDetails'](this['config']);this[_0x4537ec(0x153)][_0x4537ec(0x1d9)]=_0x56b6e0,_0x56b6e0['isTrialGrid']&&helper[_0x4537ec(0x1f5)](this[_0x4537ec(0x153)][_0x4537ec(0x152)])&&helper[_0x4537ec(0x176)](this['config']['browserstackLocal'])&&(this[_0x4537ec(0x153)][_0x4537ec(0x170)][_0x4537ec(0x21d)]=_0x59e204[_0x4537ec(0x1d0)],this['config']['browserStackLocalOptions'][_0x59e204[_0x4537ec(0x18b)]]=_0x56b6e0[_0x4537ec(0x19a)][_0x4537ec(0x197)](','),this[_0x4537ec(0x153)][_0x4537ec(0x170)][_0x4537ec(0x164)]=_0x59e204[_0x4537ec(0x239)]),this[_0x4537ec(0x153)][_0x4537ec(0x188)]=_0x56b6e0[_0x4537ec(0x1b3)],this[_0x4537ec(0x219)]&&_0x59e204[_0x4537ec(0x17a)](this[_0x4537ec(0x219)][_0x4537ec(0x1a8)](),_0x59e204[_0x4537ec(0x1f9)])?this[_0x4537ec(0x153)]['turboScaleUrl']=_0x59e204['SxRoo'](_0x56b6e0[_0x4537ec(0x143)],_0x59e204[_0x4537ec(0x181)]):constants[_0x4537ec(0x15e)]=helper['getHubUrl'](this[_0x4537ec(0x153)]),logger[_0x4537ec(0x15a)]('HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20'+constants[_0x4537ec(0x15e)]);}helper[_0x4537ec(0x174)](this[_0x4537ec(0x153)]),this[_0x4537ec(0x177)](),_0x59e204[_0x4537ec(0x240)](setPercyFlag,this),await this[_0x4537ec(0x15b)](),![_0x59e204[_0x4537ec(0x19b)],_0x59e204[_0x4537ec(0x1f9)]][_0x4537ec(0x243)](this[_0x4537ec(0x219)])&&!helper['isTurboScaleSession'](this['config'])&&!helper[_0x4537ec(0x1ed)]()[_0x4537ec(0x217)]&&await this[_0x4537ec(0x1aa)]();}async[a94_0x308723(0x208)](){const _0x30fbee=a94_0x308723,_0x4b873c={};_0x4b873c[_0x30fbee(0x1b8)]=function(_0xa1d154,_0x12e4f1){return _0xa1d154===_0x12e4f1;},_0x4b873c[_0x30fbee(0x154)]=_0x30fbee(0x160),_0x4b873c[_0x30fbee(0x207)]='Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.',_0x4b873c[_0x30fbee(0x1ac)]=_0x30fbee(0x182),_0x4b873c[_0x30fbee(0x186)]=_0x30fbee(0x235),_0x4b873c[_0x30fbee(0x226)]=_0x30fbee(0x229);const _0x5058a4=_0x4b873c;if(helper[_0x30fbee(0x176)](this[_0x30fbee(0x153)][_0x30fbee(0x146)])&&(!this[_0x30fbee(0x146)]||!this[_0x30fbee(0x146)][_0x30fbee(0x138)]()))try{this[_0x30fbee(0x146)]=await percyHelper['startPercy'](this[_0x30fbee(0x153)]);if(!this['percy']){process['env'][_0x30fbee(0x214)]=_0x5058a4[_0x30fbee(0x154)];throw new Error(_0x5058a4['KRkCC']);}logger[_0x30fbee(0x1ee)](_0x5058a4[_0x30fbee(0x1ac)]),process['env'][_0x30fbee(0x214)]=_0x5058a4[_0x30fbee(0x186)];let _0x3e0816=0x0;const _0x3c65d1=async()=>{const _0x1a42ee=_0x30fbee;_0x3e0816++,_0x5058a4[_0x1a42ee(0x1b8)](_0x3e0816,0x1)&&await this[_0x1a42ee(0x166)]();};process['on'](_0x5058a4[_0x30fbee(0x226)],_0x3c65d1);}catch(_0x4ff2ce){process[_0x30fbee(0x1d4)]['BROWSERSTACK_PERCY']=_0x5058a4[_0x30fbee(0x154)],logger[_0x30fbee(0x15a)](_0x30fbee(0x22b)+_0x4ff2ce);throw new Error(_0x4ff2ce['toString']());}}async[a94_0x308723(0x166)](){const _0x23bae2=a94_0x308723,_0x49f3fd={};_0x49f3fd['LrMKO']='Percy\x20stopped',_0x49f3fd[_0x23bae2(0x1ef)]=_0x23bae2(0x151);const _0x219160=_0x49f3fd;if(this[_0x23bae2(0x146)]&&this[_0x23bae2(0x146)][_0x23bae2(0x138)]())try{await percyHelper['stopPercy'](this[_0x23bae2(0x146)]),logger[_0x23bae2(0x1ee)](_0x219160[_0x23bae2(0x167)]);}catch(_0x13c1db){logger[_0x23bae2(0x1db)](_0x219160[_0x23bae2(0x1ef)],_0x13c1db[_0x23bae2(0x1dd)]);}}async[a94_0x308723(0x15b)](){const _0x401bec=a94_0x308723,_0x9aa560={};_0x9aa560[_0x401bec(0x157)]=_0x401bec(0x1e2),_0x9aa560[_0x401bec(0x1b7)]='Local\x20binary\x20started\x20successfully';const _0x4d4972=_0x9aa560;if(helper['isBrowserstackInfra']()&&helper[_0x401bec(0x176)](this[_0x401bec(0x153)][_0x401bec(0x152)])&&(!this['browserstackLocal']||!this[_0x401bec(0x152)]['isRunning']()))try{if(this[_0x401bec(0x153)][_0x401bec(0x170)][_0x401bec(0x14f)]){logger[_0x401bec(0x15a)](_0x4d4972[_0x401bec(0x157)]);return;}this[_0x401bec(0x152)]=await helper[_0x401bec(0x20b)](this[_0x401bec(0x153)]),logger[_0x401bec(0x1ee)](_0x4d4972[_0x401bec(0x1b7)]);}catch(_0x10c9dd){logger[_0x401bec(0x15a)](_0x10c9dd);throw new Error(_0x10c9dd[_0x401bec(0x1f2)]());}}async[a94_0x308723(0x158)](){const _0x18559d=a94_0x308723,_0x50ab57={};_0x50ab57[_0x18559d(0x1f8)]=_0x18559d(0x21e),_0x50ab57[_0x18559d(0x199)]=_0x18559d(0x16c);const _0x2c9560=_0x50ab57;if(this[_0x18559d(0x152)]&&this[_0x18559d(0x152)]['isRunning']())try{await helper[_0x18559d(0x20a)](this[_0x18559d(0x152)]),logger[_0x18559d(0x1ee)](_0x2c9560['NMlZS']);}catch(_0x56483d){logger[_0x18559d(0x1db)](_0x2c9560[_0x18559d(0x199)],_0x56483d[_0x18559d(0x1dd)]);}}async[a94_0x308723(0x1aa)](){const _0x2b6d41=a94_0x308723;return PerformanceTester['measureWrapper'](PerformanceAutEvents[_0x2b6d41(0x14d)],async()=>{await hubAllocator['allocateHub'](this['config']);})();}async[a94_0x308723(0x212)](){const _0x3747ec=a94_0x308723,_0x267baa={'noLUU':function(_0x3feb07,_0xbfabcc){return _0x3feb07(_0xbfabcc);},'ajUWA':_0x3747ec(0x1f6),'jIAtb':function(_0x338fc4,_0x1e487b,_0x1c5fc7,_0x4898f6,_0x4b357d,_0x24b593,_0x3bea00){return _0x338fc4(_0x1e487b,_0x1c5fc7,_0x4898f6,_0x4b357d,_0x24b593,_0x3bea00);},'EDxLm':_0x3747ec(0x18e),'ONsWq':_0x3747ec(0x234),'OQtRS':function(_0x4e660d,_0x2e298d){return _0x4e660d(_0x2e298d);},'cAzTE':_0x3747ec(0x20f),'INlKu':_0x3747ec(0x148),'YtDtL':function(_0x52a214,_0x273a33){return _0x52a214(_0x273a33);},'gfVWk':function(_0x5ded72,_0x2e5b3d){return _0x5ded72===_0x2e5b3d;},'fWTxZ':_0x3747ec(0x235),'qhDlT':function(_0x54f1c6,_0x358ac6){return _0x54f1c6===_0x358ac6;},'xgOSO':function(_0x30f670,_0x4db10){return _0x30f670===_0x4db10;},'wasQK':'Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','vJIWs':_0x3747ec(0x15d),'pBGaD':_0x3747ec(0x1a1),'wFgYz':_0x3747ec(0x1bd),'RfYjc':function(_0x3e6871,_0xf3cb67){return _0x3e6871>=_0xf3cb67;},'PIeTh':function(_0x3e5617,_0x3c3566){return _0x3e5617<_0x3c3566;},'nopUL':_0x3747ec(0x1de),'xLiRB':_0x3747ec(0x18c),'xmRec':function(_0xef79a2){return _0xef79a2();}},_0xdfd137=PerformanceTester[_0x3747ec(0x23d)](_0x267baa[_0x3747ec(0x1b6)],async()=>{const _0x347510=_0x3747ec;try{const _0x1628ee=new Date(),_0x492eed=helper[_0x347510(0x190)](this[_0x347510(0x153)]),_0x257933=_0x267baa[_0x347510(0x220)](require,path[_0x347510(0x197)](__dirname,_0x267baa[_0x347510(0x1d7)])),_0x474937=_0x267baa[_0x347510(0x161)](timeoutPromise,constants[_0x347510(0x1c4)],_0x267baa[_0x347510(0x155)],_0x267baa['ONsWq'],_0x1628ee,this[_0x347510(0x153)],this[_0x347510(0x219)]),_0x111816={'tcgUrl':constants[_0x347510(0x246)],'sdkVersion':_0x267baa['OQtRS'](require,_0x267baa[_0x347510(0x1f7)])[_0x347510(0x1a5)],'methodUsed':_0x267baa['INlKu'],'proxyConfig':_0x492eed,'os':os[_0x347510(0x133)]()};if(_0x492eed&&_0x492eed[_0x347510(0x141)]){utilities['fireFunnelTestEvent'](constants[_0x347510(0x187)],_0x111816,this[_0x347510(0x153)],this[_0x347510(0x219)]);return;}const _0x17d79b={};_0x17d79b[_0x347510(0x209)]=_0x492eed;const _0x4f6c84=await Promise[_0x347510(0x1c5)]([_0x257933[_0x347510(0x14b)](this['config'][_0x347510(0x142)],this[_0x347510(0x153)]['userName'],constants[_0x347510(0x246)],_0x267baa[_0x347510(0x149)](require,_0x267baa[_0x347510(0x1f7)])[_0x347510(0x1a5)],_0x17d79b)['then'](_0x3b58bc=>{const _0x5c3628=_0x347510;return _0x474937[_0x5c3628(0x213)](),_0x3b58bc;}),_0x474937]);_0x4f6c84[_0x347510(0x137)]=_0x267baa[_0x347510(0x1fb)](_0x4f6c84['isHealingEnabled'],_0x267baa[_0x347510(0x1c8)])||_0x267baa[_0x347510(0x1fb)](_0x4f6c84[_0x347510(0x137)],!![]);const _0x461e3a=_0x267baa[_0x347510(0x1ae)](this['config'][_0x347510(0x13d)],!![])||_0x267baa['qhDlT'](this['config'][_0x347510(0x13d)],_0x267baa[_0x347510(0x1c8)]);if(_0x267baa['xgOSO'](_0x4f6c84['message'],constants[_0x347510(0x144)])&&_0x461e3a)logger[_0x347510(0x1ee)](_0x267baa[_0x347510(0x238)]);else{if(!_0x4f6c84[_0x347510(0x1c9)]&&_0x267baa['xgOSO'](_0x4f6c84[_0x347510(0x231)],0x1f7)&&_0x461e3a)logger[_0x347510(0x1ee)](_0x267baa[_0x347510(0x135)]),utilities[_0x347510(0x1cf)](constants[_0x347510(0x1d2)],_0x111816,this['config'],this[_0x347510(0x219)]);else{if(!_0x4f6c84['isAuthenticated']&&_0x461e3a){logger['info'](_0x267baa[_0x347510(0x169)]);const _0x2118cb={'tcgUrl':constants[_0x347510(0x246)],'sdkVersion':_0x267baa[_0x347510(0x220)](require,_0x267baa[_0x347510(0x1f7)])[_0x347510(0x1a5)],'methodUsed':_0x267baa['INlKu'],'proxyConfig':_0x492eed,'os':os[_0x347510(0x133)]()};utilities[_0x347510(0x1cf)](constants['TCG_AUTH_FAILURE'],_0x2118cb,this[_0x347510(0x153)],this[_0x347510(0x219)]);}else{if(_0x4f6c84['isAuthenticated']&&!_0x4f6c84[_0x347510(0x137)]&&_0x461e3a)logger[_0x347510(0x1ee)](_0x267baa['wFgYz']);else{if(_0x267baa[_0x347510(0x172)](_0x4f6c84[_0x347510(0x231)],0xc8)&&_0x267baa[_0x347510(0x215)](_0x4f6c84[_0x347510(0x231)],0x12c))utilities[_0x347510(0x1cf)](constants[_0x347510(0x185)],_0x111816,this['config'],this[_0x347510(0x219)]);else{if(_0x267baa[_0x347510(0x172)](_0x4f6c84[_0x347510(0x231)],0x190))_0x111816[_0x347510(0x231)]=_0x4f6c84['status'],utilities[_0x347510(0x1cf)](constants[_0x347510(0x1a0)],_0x111816,this[_0x347510(0x153)],this[_0x347510(0x219)]);else!_0x4f6c84[_0x347510(0x231)]&&utilities[_0x347510(0x1cf)](constants[_0x347510(0x189)],_0x111816,this[_0x347510(0x153)],this['framework']);}}}}}if(_0x4f6c84[_0x347510(0x1c9)]&&_0x4f6c84[_0x347510(0x137)]){const _0x2ea1a2={};_0x2ea1a2[_0x347510(0x202)]=_0x4f6c84;const _0x33edfe=_0x2ea1a2;_0x492eed&&(_0x33edfe['proxyConfig']=_0x492eed),_0x33edfe['framework']=this[_0x347510(0x219)],_0x33edfe[_0x347510(0x205)]=this[_0x347510(0x153)],helper['setupTcgConfigFile'](_0x33edfe),logger['debug'](_0x267baa[_0x347510(0x1a7)]);}}catch(_0x495535){logger[_0x347510(0x15a)](_0x347510(0x225)+(_0x495535[_0x347510(0x1dd)]?_0x495535[_0x347510(0x1dd)]:''));}});await _0x267baa['xmRec'](_0xdfd137);}[a94_0x308723(0x177)](){const _0x223008=a94_0x308723,_0x388366={'EPouz':function(_0x52241d,_0x3746d8){return _0x52241d(_0x3746d8);},'tQlQv':_0x223008(0x134)};_0x388366[_0x223008(0x1ff)](require,_0x388366[_0x223008(0x191)])();}[a94_0x308723(0x1ab)](){const _0xf30fba=a94_0x308723,_0x4557b7={};_0x4557b7[_0xf30fba(0x21a)]=_0xf30fba(0x1d8),_0x4557b7['Ibzkd']=_0xf30fba(0x1e7),_0x4557b7['IQvdV']=_0xf30fba(0x1ad);const _0x5888ce=_0x4557b7,_0x5f4453=_0x104773=>{const _0x3b22df=_0xf30fba,_0x567ee6=_0x5888ce[_0x3b22df(0x21a)]['split']('|');let _0x2697eb=0x0;while(!![]){switch(_0x567ee6[_0x2697eb++]){case'0':logger[_0x3b22df(0x15a)](util[_0x3b22df(0x20c)](_0x104773));continue;case'1':this['unhandledErrors'][_0x3b22df(0x244)](util[_0x3b22df(0x20c)]('%j',_0x104773));continue;case'2':PerformanceTester[_0x3b22df(0x178)](_0x104773);continue;case'3':ClientTroubleShootingService[_0x3b22df(0x1dc)]();continue;case'4':logger['error'](_0x104773[_0x3b22df(0x1dd)]);continue;}break;}};process['on'](_0x5888ce[_0xf30fba(0x221)],_0x5f4453),process['on'](_0x5888ce[_0xf30fba(0x13f)],_0x5f4453);}async['intExitHandler'](_0x292e87){const _0x543773=a94_0x308723,_0x41cc66={};_0x41cc66['pXXwb']=_0x543773(0x1af),_0x41cc66['tqifh']=function(_0x332036,_0x47b0b3){return _0x332036+_0x47b0b3;},_0x41cc66['PZltb']=_0x543773(0x206),_0x41cc66[_0x543773(0x165)]='handled',_0x41cc66[_0x543773(0x227)]=function(_0x2a500d,_0x578819){return _0x2a500d+_0x578819;};const _0x2c4303=_0x41cc66,_0x295eee=_0x2c4303[_0x543773(0x20d)][_0x543773(0x210)]('|');let _0x1dcbeb=0x0;while(!![]){switch(_0x295eee[_0x1dcbeb++]){case'0':this[_0x543773(0x195)]=_0x292e87;continue;case'1':await ClientTroubleShootingService[_0x543773(0x19f)](_0x292e87);continue;case'2':await BrowserstackCLI[_0x543773(0x13b)]()[_0x543773(0x13e)]();continue;case'3':logger[_0x543773(0x1ee)](_0x2c4303['tqifh'](_0x2c4303[_0x543773(0x14e)],_0x292e87));continue;case'4':if(this[_0x2c4303[_0x543773(0x23b)](_0x2c4303[_0x543773(0x165)],_0x292e87)])return;continue;case'5':this[_0x2c4303[_0x543773(0x227)](_0x2c4303['GBjsu'],_0x292e87)]=!![];continue;case'6':await ClientTroubleShootingService[_0x543773(0x1dc)]();continue;case'7':await TestHubHandler[_0x543773(0x13e)](_0x292e87);continue;}break;}}[a94_0x308723(0x147)](){const _0x42971a=a94_0x308723,_0x1c2e69={'ZQuGC':function(_0x4a6508,_0x58e3a1){return _0x4a6508===_0x58e3a1;},'YWiMt':'Calling\x20Build\x20Stop\x20from\x20ExitHandler','KUAZR':function(_0x4808e9,_0xc5edad){return _0x4808e9>_0xc5edad;},'ElNKx':function(_0x4d62d5,_0x5d0d25){return _0x4d62d5>_0x5d0d25;},'WxTOC':function(_0x1b862a,_0x27e95e){return _0x1b862a(_0x27e95e);},'AGNQL':function(_0x2e9011){return _0x2e9011();},'zOJyf':_0x42971a(0x13c)};let _0x5d59c0=0x0;return async()=>{const _0x106658=_0x42971a;_0x5d59c0++;if(_0x1c2e69[_0x106658(0x22a)](_0x5d59c0,0x1)){helper[_0x106658(0x1a9)](this['framework'])&&await this[_0x106658(0x158)]();try{logger['debug'](_0x1c2e69[_0x106658(0x1fc)]),await TestHubHandler[_0x106658(0x13e)](_0x5d59c0),await ClientTroubleShootingService['reportFinalDetectionState'](),await BrowserstackCLI[_0x106658(0x13b)]()[_0x106658(0x13e)]('1');}catch(_0x1df545){logger[_0x106658(0x15a)](_0x106658(0x203)+util[_0x106658(0x20c)](_0x1df545));}PerformanceTester[_0x106658(0x1ea)](PerformanceEvents[_0x106658(0x1e8)]);if(PerformanceTester[_0x106658(0x1c1)]()){const {measures:_0x3879c3,errors:_0x109cae}=await PerformanceTester[_0x106658(0x18d)](),_0x946787={};if(_0x3879c3&&_0x1c2e69[_0x106658(0x168)](_0x3879c3[_0x106658(0x21c)],0x0)||_0x109cae&&_0x1c2e69[_0x106658(0x1f0)](_0x109cae['length'],0x0)){const _0x2a2286={};_0x2a2286[_0x106658(0x1bb)]=_0x3879c3,_0x2a2286[_0x106658(0x200)]=_0x109cae,Object['assign'](_0x946787,_0x2a2286);}try{const _0x45cf28=await helper['sendToEDS'](_0x946787,this[_0x106658(0x153)]);logger[_0x106658(0x15a)](_0x106658(0x17c)+_0x1c2e69['WxTOC'](getEdsInstrumentationAPIUrl,'')+_0x106658(0x1d3)+_0x45cf28[_0x106658(0x1c3)]);}catch(_0x3cb0c0){logger[_0x106658(0x15a)](_0x106658(0x1b1)+_0x1c2e69['WxTOC'](getEdsInstrumentationAPIUrl,'')+_0x106658(0x15f)+util[_0x106658(0x20c)](_0x3cb0c0));}try{fs[_0x106658(0x1e5)](path[_0x106658(0x197)](_0x1c2e69[_0x106658(0x18f)](getLogDir),_0x1c2e69[_0x106658(0x1cc)]),JSON['stringify'](_0x946787));}catch(_0x3994d0){logger[_0x106658(0x15a)](_0x106658(0x22c)+_0x3994d0);}}}logger&&logger[_0x106658(0x19e)](),fileLogger&&fileLogger['close']();};}}exports[a94_0x308723(0x192)]=BrowserStackSetup;