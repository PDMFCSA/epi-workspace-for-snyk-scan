const a55_0x2fe82e=a55_0x263b;(function(_0x4fcd46,_0x35e104){const _0x58e65f=a55_0x263b,_0x3ff935=_0x4fcd46();while(!![]){try{const _0x274a96=-parseInt(_0x58e65f(0x175))/0x1+parseInt(_0x58e65f(0x15b))/0x2*(parseInt(_0x58e65f(0x172))/0x3)+-parseInt(_0x58e65f(0x133))/0x4*(parseInt(_0x58e65f(0xc9))/0x5)+-parseInt(_0x58e65f(0x165))/0x6*(parseInt(_0x58e65f(0xc7))/0x7)+-parseInt(_0x58e65f(0x183))/0x8+-parseInt(_0x58e65f(0x192))/0x9+-parseInt(_0x58e65f(0xcc))/0xa*(-parseInt(_0x58e65f(0xd5))/0xb);if(_0x274a96===_0x35e104)break;else _0x3ff935['push'](_0x3ff935['shift']());}catch(_0x68c558){_0x3ff935['push'](_0x3ff935['shift']());}}}(a55_0x21bd,0x18da4));const util=require('util'),os=require('os'),path=require(a55_0x2fe82e(0xe5)),{v4:uuidv4}=require('uuid'),fs=require('fs'),constants=require(a55_0x2fe82e(0x17c)),{isTurboScaleSession}=require(a55_0x2fe82e(0x187)),logger=require('./logger')[a55_0x2fe82e(0x160)],{getLogDir}=require('./logger'),helper=require('./helper'),utilities=require('./utilities'),percyHelper=require('./percy/utils'),hubAllocator=require(a55_0x2fe82e(0x148)),PerformanceTester=require(a55_0x2fe82e(0x157)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a55_0x2fe82e(0x115)),{setPercyFlag}=require(a55_0x2fe82e(0x136)),TestHubHandler=require(a55_0x2fe82e(0xda)),timeoutPromise=require('./timeoutPromise');class BrowserStackSetup{constructor(_0x1311e6,_0x54ebd9){const _0x4c82fc=a55_0x2fe82e,_0x453c93={'xmzek':_0x4c82fc(0x1a4),'bhYHS':_0x4c82fc(0x18d),'ViKyC':function(_0x326a4c){return _0x326a4c();}},_0x55723f=_0x453c93[_0x4c82fc(0x140)][_0x4c82fc(0x159)]('|');let _0x1755cb=0x0;while(!![]){switch(_0x55723f[_0x1755cb++]){case'0':if(helper[_0x4c82fc(0xd8)](this[_0x4c82fc(0x16b)]))throw new Error(_0x453c93[_0x4c82fc(0x10f)]);continue;case'1':this[_0x4c82fc(0x16b)]=helper[_0x4c82fc(0x1b1)](helper[_0x4c82fc(0x18a)](_0x1311e6));continue;case'2':this[_0x4c82fc(0x100)]=_0x54ebd9;continue;case'3':this[_0x4c82fc(0xf4)]=helper[_0x4c82fc(0x128)]();continue;case'4':this[_0x4c82fc(0x16b)]['platforms']=this[_0x4c82fc(0x16b)][_0x4c82fc(0xf0)]||[];continue;case'5':this[_0x4c82fc(0x110)]=null;continue;case'6':if(this[_0x4c82fc(0x16b)][_0x4c82fc(0x142)])throw new Error(this[_0x4c82fc(0x16b)][_0x4c82fc(0x142)]);continue;case'7':this[_0x4c82fc(0x139)]={};continue;case'8':this[_0x4c82fc(0x14d)]=null;continue;case'9':global[_0x4c82fc(0x100)]=_0x54ebd9;continue;case'10':helper[_0x4c82fc(0x135)](this[_0x4c82fc(0x16b)],this[_0x4c82fc(0xd0)]);continue;case'11':PerformanceTester[_0x4c82fc(0x14c)]();continue;case'12':this['cliConfig']=helper['setCLICaps'](_0x1311e6);continue;case'13':this[_0x4c82fc(0x16b)][_0x4c82fc(0x137)][_0x4c82fc(0x122)]=!helper[_0x4c82fc(0x170)]()||helper['isTrue'](this[_0x4c82fc(0x16b)][_0x4c82fc(0x137)][_0x4c82fc(0x122)]);continue;case'14':this[_0x4c82fc(0x113)]=_0x453c93[_0x4c82fc(0x12c)](uuidv4);continue;case'15':helper['getFinalCaps'](this[_0x4c82fc(0x16b)],this['cliConfig'],this[_0x4c82fc(0xf4)]);continue;case'16':helper[_0x4c82fc(0x146)](this['config'],this['cliConfig'],this['envConfig']);continue;case'17':this[_0x4c82fc(0x144)]=[];continue;case'18':helper[_0x4c82fc(0xcb)](this[_0x4c82fc(0x16b)]);continue;case'19':this[_0x4c82fc(0x16b)][_0x4c82fc(0x137)]=this[_0x4c82fc(0x16b)][_0x4c82fc(0x137)]||{};continue;case'20':this[_0x4c82fc(0x16b)]['testContextOptions']['skipSessionName']=!helper[_0x4c82fc(0x170)]()||helper[_0x4c82fc(0xe6)](this[_0x4c82fc(0x16b)][_0x4c82fc(0x137)]['skipSessionName']);continue;}break;}}[a55_0x2fe82e(0x147)](_0x2a5b63){const _0x50ce84=a55_0x2fe82e,_0x20a2f9={'tymEK':'userName\x20or\x20accessKey\x20is\x20not\x20defined','voFUH':function(_0x4c6776,_0x2b0afb){return _0x4c6776===_0x2b0afb;},'wQSfh':function(_0x295c20,_0x28b047){return _0x295c20===_0x28b047;},'IBtfR':_0x50ce84(0x18b),'kNTwG':_0x50ce84(0x1a5),'usGyj':function(_0x158f75,_0x120441){return _0x158f75<_0x120441;},'Jmlku':function(_0x221c0c,_0x303b6c){return _0x221c0c(_0x303b6c);},'XmhKO':_0x50ce84(0xcd),'IzEcM':_0x50ce84(0xe0),'FycdU':_0x50ce84(0x15f),'iQqWH':_0x50ce84(0x16e),'aFIBV':_0x50ce84(0xe8),'FPuJz':_0x50ce84(0xdf),'Pavfh':_0x50ce84(0x1b3),'bhnwq':function(_0x530470,_0x58344){return _0x530470!==_0x58344;},'dWkTV':_0x50ce84(0x107),'WZcKZ':_0x50ce84(0x18e),'dkWPP':'SIGQUIT','NEXbW':_0x50ce84(0x18f),'aaosb':_0x50ce84(0x1a6)},_0x16909b=this['framework'];global[_0x50ce84(0x16b)]=this[_0x50ce84(0x16b)],helper['sanitizeCaps'](this[_0x50ce84(0x16b)]),this[_0x50ce84(0x14f)]=null,global['sdkRunId']=this[_0x50ce84(0x113)],logger[_0x50ce84(0x1ab)](_0x50ce84(0x11f)+this['sdkRunId']),!this['config'][_0x50ce84(0x166)]&&(this[_0x50ce84(0x16b)][_0x50ce84(0x166)]=this['config'][_0x50ce84(0x1a2)]||{});if(helper[_0x50ce84(0xd8)](helper[_0x50ce84(0x190)](this['config']))||helper[_0x50ce84(0xd8)](helper['getAccessKey'](this[_0x50ce84(0x16b)])))throw new Error(_0x20a2f9['tymEK']);helper[_0x50ce84(0x16c)](this[_0x50ce84(0x16b)])&&helper['isUndefined'](helper['getLocalIdentifier'](this[_0x50ce84(0x16b)]))&&(!helper['isUndefined'](this['config'][_0x50ce84(0x166)])&&_0x20a2f9['voFUH'](this[_0x50ce84(0x16b)][_0x50ce84(0x166)]['constructor'],Object)?!helper[_0x50ce84(0xe6)](this['config']['browserStackLocalOptions'][_0x50ce84(0x154)])&&(this[_0x50ce84(0x16b)][_0x50ce84(0x166)][_0x50ce84(0xdd)]=helper[_0x50ce84(0xdb)]()):this[_0x50ce84(0x16b)][_0x50ce84(0x166)]={'localIdentifier':helper[_0x50ce84(0xdb)]()});this[_0x50ce84(0x16b)]['browserStackLocalOptions']['skipBinaryInitialisation']=helper[_0x50ce84(0xe6)](this[_0x50ce84(0x16b)][_0x50ce84(0x166)][_0x50ce84(0x154)]),helper['setHandlePWError'](this[_0x50ce84(0x16b)]);if(_0x20a2f9[_0x50ce84(0x12a)](_0x16909b,_0x20a2f9[_0x50ce84(0xd1)]))return;this['handleExceptions']();process[_0x50ce84(0x13f)]['BROWSERSTACK_TURBOSCALE']&&(this[_0x50ce84(0x16b)][_0x50ce84(0x10e)]=helper[_0x50ce84(0xe6)](process[_0x50ce84(0x13f)]['BROWSERSTACK_TURBOSCALE']),this[_0x50ce84(0x16b)][_0x50ce84(0xd7)]=this[_0x50ce84(0x16b)][_0x50ce84(0xd7)]||{});if(!helper[_0x50ce84(0x170)]()){try{process[_0x50ce84(0x13f)][_0x50ce84(0x153)]=_0x16909b,utilities[_0x50ce84(0x1a0)](_0x20a2f9[_0x50ce84(0x1a3)],{},this[_0x50ce84(0x16b)],this[_0x50ce84(0x100)]);}catch(_0x4320f1){logger[_0x50ce84(0x15a)](_0x50ce84(0x10a)+_0x4320f1);}return;}helper[_0x50ce84(0x176)](_0x16909b)&&(_0x20a2f9[_0x50ce84(0x1ae)](_0x20a2f9[_0x50ce84(0x18c)](parseInt,helper[_0x50ce84(0x193)](_0x20a2f9[_0x50ce84(0x1a8)])),0x3)&&(this[_0x50ce84(0x16b)][_0x50ce84(0x14e)]=![]),_0x20a2f9['voFUH'](helper[_0x50ce84(0x13b)](helper[_0x50ce84(0x193)](_0x20a2f9[_0x50ce84(0x1a8)]),_0x20a2f9[_0x50ce84(0x19d)]),0x1)&&(this[_0x50ce84(0x16b)][_0x50ce84(0x14e)]=!![]));(helper[_0x50ce84(0xd8)](this['config'][_0x50ce84(0xf0)])||helper[_0x50ce84(0xd8)](this['config'][_0x50ce84(0xf0)]['length']))&&(helper[_0x50ce84(0xd8)](this['config'][_0x50ce84(0x1ad)])?logger['info'](_0x20a2f9[_0x50ce84(0x11e)]):logger[_0x50ce84(0x197)](_0x20a2f9[_0x50ce84(0x19f)]),this[_0x50ce84(0x16b)][_0x50ce84(0xf0)]=[]);!this['config'][_0x50ce84(0x137)]&&(this['config'][_0x50ce84(0x137)]={});try{process[_0x50ce84(0x13f)][_0x50ce84(0x153)]=_0x2a5b63['_'][0x0],utilities[_0x50ce84(0x1a0)](_0x20a2f9[_0x50ce84(0x1a3)],{},this[_0x50ce84(0x16b)],this['framework']);}catch(_0x5b9f7f){logger[_0x50ce84(0x15a)](_0x50ce84(0x10a)+_0x5b9f7f);}!this[_0x50ce84(0x16b)]['disableAutoCaptureLogs']&&logger['info'](constants[_0x50ce84(0x109)]),this[_0x50ce84(0x1b0)]=this['intExitHandler'][_0x50ce84(0xef)](this),process['on'](_0x20a2f9['aFIBV'],this[_0x50ce84(0x1b0)]),process['on'](_0x20a2f9['FPuJz'],this[_0x50ce84(0x1b0)]),process['on'](_0x20a2f9[_0x50ce84(0xc0)],this[_0x50ce84(0x1b0)]),_0x20a2f9[_0x50ce84(0x117)](process[_0x50ce84(0xf3)],_0x20a2f9[_0x50ce84(0xe7)])?(process['on'](_0x20a2f9[_0x50ce84(0xc8)],this[_0x50ce84(0x1b0)]),process['on'](_0x20a2f9['dkWPP'],this[_0x50ce84(0x1b0)])):process['on'](_0x20a2f9[_0x50ce84(0x130)],this['intExitHandler']),process['on'](_0x20a2f9['aaosb'],this[_0x50ce84(0x150)]());}async[a55_0x2fe82e(0x127)](_0x43c4a7){const _0x36f30a=a55_0x2fe82e,_0x1a1e02={'RMYKr':function(_0x436336,_0x423069){return _0x436336(_0x423069);},'bTuZq':'ats-repeater','UCoBc':_0x36f30a(0x106),'hIFOT':_0x36f30a(0x199),'mFhuv':function(_0x128ab3,_0x443155){return _0x128ab3===_0x443155;},'ybHYN':_0x36f30a(0x1aa),'byBjf':function(_0x2eb46a,_0x311038){return _0x2eb46a+_0x311038;},'sToCq':_0x36f30a(0x11d),'ypiEz':'codeceptjs','Dhrru':function(_0x128912,_0x11f136){return _0x128912(_0x11f136);}};this[_0x36f30a(0x147)](_0x43c4a7);if(_0x1a1e02[_0x36f30a(0x105)](isTurboScaleSession,this[_0x36f30a(0x16b)])){const _0x26da1c=await helper[_0x36f30a(0x126)](this['config']);this['config'][_0x36f30a(0x102)]=_0x26da1c,_0x26da1c[_0x36f30a(0x112)]&&helper[_0x36f30a(0xc5)](this[_0x36f30a(0x16b)][_0x36f30a(0x14d)])&&helper[_0x36f30a(0xe6)](this[_0x36f30a(0x16b)][_0x36f30a(0x14d)])&&(this[_0x36f30a(0x16b)][_0x36f30a(0x166)][_0x36f30a(0xdd)]=_0x1a1e02[_0x36f30a(0xf9)],this[_0x36f30a(0x16b)]['browserStackLocalOptions'][_0x1a1e02[_0x36f30a(0x11b)]]=_0x26da1c[_0x36f30a(0x180)]['join'](','),this[_0x36f30a(0x16b)]['browserStackLocalOptions']['forceLocal']=_0x1a1e02[_0x36f30a(0x138)]),this[_0x36f30a(0x16b)][_0x36f30a(0xde)]=_0x26da1c['url'],this[_0x36f30a(0x100)]&&_0x1a1e02['mFhuv'](this[_0x36f30a(0x100)][_0x36f30a(0x163)](),_0x1a1e02[_0x36f30a(0xea)])&&(this[_0x36f30a(0x16b)]['turboScaleUrl']=_0x1a1e02[_0x36f30a(0x104)](_0x26da1c[_0x36f30a(0x158)],_0x1a1e02['sToCq'])),constants[_0x36f30a(0x17a)]=helper[_0x36f30a(0x125)](this['config']),logger[_0x36f30a(0x15a)](_0x36f30a(0x129)+constants['hubUrl']);}helper['setProxySettings'](this[_0x36f30a(0x16b)]),this['setupKeepAlive'](),_0x1a1e02['RMYKr'](setPercyFlag,this),await this[_0x36f30a(0x19c)](),![_0x1a1e02['ypiEz']]['includes'](this[_0x36f30a(0x100)])&&!_0x1a1e02['Dhrru'](isTurboScaleSession,this['config'])&&!helper[_0x36f30a(0x101)]()['central_scanner']&&await this[_0x36f30a(0x12d)]();}async[a55_0x2fe82e(0x169)](){const _0x4cbfd3=a55_0x2fe82e,_0x36b148={};_0x36b148['gQcsb']=function(_0x528412,_0x670a54){return _0x528412===_0x670a54;},_0x36b148['QOfEK']=_0x4cbfd3(0xe3),_0x36b148['TAcDz']=_0x4cbfd3(0xed),_0x36b148[_0x4cbfd3(0x16a)]=_0x4cbfd3(0xc3),_0x36b148[_0x4cbfd3(0x151)]=_0x4cbfd3(0x199),_0x36b148[_0x4cbfd3(0x1b2)]=_0x4cbfd3(0x1a6);const _0x3edd09=_0x36b148;if(helper['isTrue'](this[_0x4cbfd3(0x16b)]['percy'])&&(!this[_0x4cbfd3(0x110)]||!this[_0x4cbfd3(0x110)][_0x4cbfd3(0x17b)]()))try{this[_0x4cbfd3(0x110)]=await percyHelper[_0x4cbfd3(0x13a)](this[_0x4cbfd3(0x16b)]);if(!this[_0x4cbfd3(0x110)]){process['env'][_0x4cbfd3(0xca)]=_0x3edd09[_0x4cbfd3(0xbd)];throw new Error(_0x3edd09[_0x4cbfd3(0xf1)]);}logger[_0x4cbfd3(0x1ab)](_0x3edd09[_0x4cbfd3(0x16a)]),process[_0x4cbfd3(0x13f)][_0x4cbfd3(0xca)]=_0x3edd09[_0x4cbfd3(0x151)];let _0x142abc=0x0;const _0x5ec1e0=async()=>{const _0x100260=_0x4cbfd3;_0x142abc++,_0x3edd09[_0x100260(0x177)](_0x142abc,0x1)&&await this[_0x100260(0x10c)]();};process['on'](_0x3edd09[_0x4cbfd3(0x1b2)],_0x5ec1e0);}catch(_0x4da925){process[_0x4cbfd3(0x13f)][_0x4cbfd3(0xca)]=_0x3edd09['QOfEK'],logger['debug'](_0x4cbfd3(0x114)+_0x4da925);throw new Error(_0x4da925[_0x4cbfd3(0xc4)]());}}async[a55_0x2fe82e(0x10c)](){const _0x4a58d6=a55_0x2fe82e,_0x7ea32b={};_0x7ea32b[_0x4a58d6(0x10b)]=_0x4a58d6(0x145),_0x7ea32b[_0x4a58d6(0xc1)]=_0x4a58d6(0xf6);const _0x59291a=_0x7ea32b;if(this[_0x4a58d6(0x110)]&&this[_0x4a58d6(0x110)][_0x4a58d6(0x17b)]())try{await percyHelper[_0x4a58d6(0x10c)](this['percy']),logger['info'](_0x59291a[_0x4a58d6(0x10b)]);}catch(_0x2fae40){logger[_0x4a58d6(0x142)](_0x59291a[_0x4a58d6(0xc1)],_0x2fae40[_0x4a58d6(0x143)]);}}async[a55_0x2fe82e(0x19c)](){const _0x51b857=a55_0x2fe82e,_0x47c38e={};_0x47c38e['SEsKH']=_0x51b857(0xbb),_0x47c38e[_0x51b857(0x1a7)]=_0x51b857(0x174);const _0x2c29cd=_0x47c38e;if(helper['isBrowserstackInfra']()&&helper[_0x51b857(0xe6)](this[_0x51b857(0x16b)][_0x51b857(0x14d)])&&(!this['browserstackLocal']||!this[_0x51b857(0x14d)]['isRunning']()))try{if(this[_0x51b857(0x16b)][_0x51b857(0x166)][_0x51b857(0x154)]){logger[_0x51b857(0x15a)](_0x2c29cd['SEsKH']);return;}this['browserstackLocal']=await helper[_0x51b857(0xc2)](this[_0x51b857(0x16b)]),logger[_0x51b857(0x1ab)](_0x2c29cd[_0x51b857(0x1a7)]);}catch(_0x3e6d4e){logger[_0x51b857(0x15a)](_0x3e6d4e);throw new Error(_0x3e6d4e[_0x51b857(0xc4)]());}}async[a55_0x2fe82e(0xf5)](){const _0x57a23b=a55_0x2fe82e,_0x5aa42f={};_0x5aa42f[_0x57a23b(0x124)]=_0x57a23b(0xe4),_0x5aa42f['uEFzg']=_0x57a23b(0xf2);const _0x4015fc=_0x5aa42f;if(this['browserstackLocal']&&this[_0x57a23b(0x14d)]['isRunning']())try{await helper[_0x57a23b(0x168)](this[_0x57a23b(0x14d)]),logger[_0x57a23b(0x1ab)](_0x4015fc['zolKt']);}catch(_0x4b9f8a){logger['error'](_0x4015fc[_0x57a23b(0x13e)],_0x4b9f8a[_0x57a23b(0x143)]);}}async[a55_0x2fe82e(0x12d)](){const _0x1b9a78=a55_0x2fe82e;return PerformanceTester[_0x1b9a78(0x17e)](PerformanceAutEvents[_0x1b9a78(0x155)],async()=>{const _0x1fcbf8=_0x1b9a78;await hubAllocator[_0x1fcbf8(0x14a)](this['config']);})();}async[a55_0x2fe82e(0x118)](){const _0xd018eb=a55_0x2fe82e,_0x4f8f63={'VuaLK':function(_0x33fbc1,_0x505c2c){return _0x33fbc1(_0x505c2c);},'xpXij':_0xd018eb(0x17f),'vTrxN':function(_0x327935,_0x3b0c48,_0x5627b7,_0x2aa7be,_0x4fbb5a,_0x5d01fb,_0x36834a){return _0x327935(_0x3b0c48,_0x5627b7,_0x2aa7be,_0x4fbb5a,_0x5d01fb,_0x36834a);},'ixLmn':'BrowserstackHealing.init\x20method\x20timed\x20out','hhbuO':'BrowserstackHealingInitFailed','DUccK':function(_0x142946,_0x446fb2){return _0x142946(_0x446fb2);},'snZyw':_0xd018eb(0x15d),'bKyNp':_0xd018eb(0xce),'zTimh':function(_0x1ea0f7,_0xd46af6){return _0x1ea0f7===_0xd46af6;},'nhODJ':_0xd018eb(0x199),'sElgP':function(_0x347633,_0x55d749){return _0x347633===_0x55d749;},'CuvYo':function(_0x244365,_0x5fbb17){return _0x244365===_0x5fbb17;},'urFxH':function(_0x546521,_0x1f6ec6){return _0x546521===_0x1f6ec6;},'PdIYI':_0xd018eb(0x134),'fwoQs':function(_0x35ec76,_0x52436d){return _0x35ec76===_0x52436d;},'lgofT':_0xd018eb(0x14b),'XRvZh':_0xd018eb(0xc6),'NgiFh':_0xd018eb(0x156),'GbZMM':function(_0x5e3729,_0x43ae42){return _0x5e3729>=_0x43ae42;},'UauZT':function(_0x5a1b0f,_0x4fe245){return _0x5a1b0f<_0x4fe245;},'ZjhxK':function(_0x266c2d,_0x40db01){return _0x266c2d>=_0x40db01;},'TjJDb':_0xd018eb(0x13d),'fIwvw':'aiHeal:tcgAuth','ghEPb':function(_0x48d5f0){return _0x48d5f0();}},_0x59cd2f=PerformanceTester[_0xd018eb(0x17e)](_0x4f8f63[_0xd018eb(0x15e)],async()=>{const _0x1c53db=_0xd018eb;try{const _0x465fd7=new Date(),_0xa79dcd=helper[_0x1c53db(0x181)](this[_0x1c53db(0x16b)]),_0x8ed01a=_0x4f8f63[_0x1c53db(0x149)](require,path[_0x1c53db(0xfb)](__dirname,_0x4f8f63['xpXij'])),_0x2d3893=_0x4f8f63[_0x1c53db(0x12b)](timeoutPromise,constants['TCG_AUTH_TIMEOUT'],_0x4f8f63[_0x1c53db(0x111)],_0x4f8f63[_0x1c53db(0xe2)],_0x465fd7,this[_0x1c53db(0x16b)],this[_0x1c53db(0x100)]),_0x47fff5={'tcgUrl':constants[_0x1c53db(0xff)],'sdkVersion':_0x4f8f63[_0x1c53db(0x1ac)](require,_0x4f8f63[_0x1c53db(0xba)])['version'],'methodUsed':_0x4f8f63[_0x1c53db(0xbf)],'proxyConfig':_0xa79dcd,'os':os['platform']()};if(_0xa79dcd&&_0xa79dcd[_0x1c53db(0x179)]){utilities[_0x1c53db(0x1a0)](constants['AI_PROXY_FAILURE'],_0x47fff5,this[_0x1c53db(0x16b)],this['framework']);return;}const _0x20ea98={};_0x20ea98['proxy']=_0xa79dcd;const _0x1b657c=await Promise['race']([_0x8ed01a[_0x1c53db(0x13c)](this[_0x1c53db(0x16b)][_0x1c53db(0xf8)],this[_0x1c53db(0x16b)][_0x1c53db(0x121)],constants[_0x1c53db(0xff)],_0x4f8f63[_0x1c53db(0x1ac)](require,_0x4f8f63[_0x1c53db(0xba)])[_0x1c53db(0x120)],_0x20ea98)[_0x1c53db(0x182)](_0x4f0960=>{const _0x3bb9d4=_0x1c53db;return _0x2d3893[_0x3bb9d4(0x12e)](),_0x4f0960;}),_0x2d3893]);_0x1b657c[_0x1c53db(0x19e)]=_0x4f8f63[_0x1c53db(0x167)](_0x1b657c[_0x1c53db(0x19e)],_0x4f8f63['nhODJ'])||_0x4f8f63[_0x1c53db(0x17d)](_0x1b657c[_0x1c53db(0x19e)],!![]);const _0x49287f=_0x4f8f63['CuvYo'](this['config'][_0x1c53db(0xd9)],!![])||_0x4f8f63['CuvYo'](this[_0x1c53db(0x16b)][_0x1c53db(0xd9)],_0x4f8f63[_0x1c53db(0x196)]);if(_0x4f8f63['urFxH'](_0x1b657c[_0x1c53db(0x143)],constants[_0x1c53db(0x152)])&&_0x49287f)logger['info'](_0x4f8f63[_0x1c53db(0x162)]);else{if(!_0x1b657c[_0x1c53db(0xf7)]&&_0x4f8f63[_0x1c53db(0x184)](_0x1b657c[_0x1c53db(0x103)],0x1f7)&&_0x49287f)logger[_0x1c53db(0x1ab)](_0x4f8f63[_0x1c53db(0x131)]),utilities['fireFunnelTestEvent'](constants[_0x1c53db(0x11a)],_0x47fff5,this[_0x1c53db(0x16b)],this[_0x1c53db(0x100)]);else{if(!_0x1b657c[_0x1c53db(0xf7)]&&_0x49287f){logger[_0x1c53db(0x1ab)](_0x4f8f63['XRvZh']);const _0x226501={'tcgUrl':constants[_0x1c53db(0xff)],'sdkVersion':_0x4f8f63[_0x1c53db(0x149)](require,_0x4f8f63[_0x1c53db(0xba)])[_0x1c53db(0x120)],'methodUsed':_0x4f8f63['bKyNp'],'proxyConfig':_0xa79dcd,'os':os[_0x1c53db(0xf3)]()};utilities[_0x1c53db(0x1a0)](constants[_0x1c53db(0x16d)],_0x226501,this[_0x1c53db(0x16b)],this[_0x1c53db(0x100)]);}else{if(_0x1b657c['isAuthenticated']&&!_0x1b657c[_0x1c53db(0x19e)]&&_0x49287f)logger['info'](_0x4f8f63[_0x1c53db(0x132)]);else{if(_0x4f8f63['GbZMM'](_0x1b657c[_0x1c53db(0x103)],0xc8)&&_0x4f8f63[_0x1c53db(0x116)](_0x1b657c[_0x1c53db(0x103)],0x12c))utilities[_0x1c53db(0x1a0)](constants[_0x1c53db(0x1a9)],_0x47fff5,this[_0x1c53db(0x16b)],this[_0x1c53db(0x100)]);else{if(_0x4f8f63[_0x1c53db(0xd3)](_0x1b657c[_0x1c53db(0x103)],0x190))_0x47fff5['status']=_0x1b657c[_0x1c53db(0x103)],utilities[_0x1c53db(0x1a0)](constants[_0x1c53db(0x19a)],_0x47fff5,this[_0x1c53db(0x16b)],this[_0x1c53db(0x100)]);else!_0x1b657c['status']&&utilities[_0x1c53db(0x1a0)](constants['INVALID_INIT_RESP_WITH_USER_IMPACT'],_0x47fff5,this[_0x1c53db(0x16b)],this['framework']);}}}}}if(_0x1b657c[_0x1c53db(0xf7)]&&_0x1b657c[_0x1c53db(0x19e)]){const _0x1b290a={};_0x1b290a[_0x1c53db(0xfa)]=_0x1b657c;const _0x19901d=_0x1b290a;_0xa79dcd&&(_0x19901d[_0x1c53db(0x141)]=_0xa79dcd),_0x19901d['framework']=this['framework'],_0x19901d['bstackConfig']=this[_0x1c53db(0x16b)],helper[_0x1c53db(0xdc)](_0x19901d),logger[_0x1c53db(0x15a)](_0x4f8f63[_0x1c53db(0xbe)]);}}catch(_0x182b20){logger[_0x1c53db(0x15a)](_0x1c53db(0x186)+(_0x182b20['message']?_0x182b20[_0x1c53db(0x143)]:''));}});await _0x4f8f63[_0xd018eb(0x198)](_0x59cd2f);}['setupKeepAlive'](){const _0x546d1a=a55_0x2fe82e,_0x101a49={'VbNOx':function(_0x528a20,_0x2249ed){return _0x528a20(_0x2249ed);},'IdMov':'./setKeepAlive'};_0x101a49['VbNOx'](require,_0x101a49[_0x546d1a(0xd4)])();}[a55_0x2fe82e(0x171)](){const _0x2b214b=a55_0x2fe82e,_0x1e39a0={};_0x1e39a0['UoXmo']=_0x2b214b(0xe1),_0x1e39a0[_0x2b214b(0x1af)]='uncaughtException';const _0x46087d=_0x1e39a0,_0x6e1063=_0x2388a5=>{const _0x58cfd2=_0x2b214b;logger[_0x58cfd2(0x142)](_0x2388a5[_0x58cfd2(0x143)]),logger[_0x58cfd2(0x15a)](util['format'](_0x2388a5)),this[_0x58cfd2(0x144)][_0x58cfd2(0xd2)](util[_0x58cfd2(0x178)]('%j',_0x2388a5)),PerformanceTester[_0x58cfd2(0x11c)](_0x2388a5);};process['on'](_0x46087d['UoXmo'],_0x6e1063),process['on'](_0x46087d[_0x2b214b(0x1af)],_0x6e1063);}async[a55_0x2fe82e(0x1b0)](_0x1b555b){const _0xce1f53=a55_0x2fe82e,_0x1da721={};_0x1da721[_0xce1f53(0x191)]='3|2|4|0|1',_0x1da721[_0xce1f53(0x10d)]=function(_0x3471a2,_0x11f561){return _0x3471a2+_0x11f561;},_0x1da721[_0xce1f53(0x19b)]='handled',_0x1da721[_0xce1f53(0xfe)]=function(_0x440169,_0xb991f6){return _0x440169+_0xb991f6;},_0x1da721[_0xce1f53(0x194)]=function(_0x3275b6,_0x49055b){return _0x3275b6+_0x49055b;},_0x1da721[_0xce1f53(0x185)]=_0xce1f53(0x119);const _0x4f528c=_0x1da721,_0x2901f1=_0x4f528c['jUDnw'][_0xce1f53(0x159)]('|');let _0x13ad17=0x0;while(!![]){switch(_0x2901f1[_0x13ad17++]){case'0':this[_0xce1f53(0x14f)]=_0x1b555b;continue;case'1':await TestHubHandler[_0xce1f53(0x108)](_0x1b555b);continue;case'2':this[_0x4f528c[_0xce1f53(0x10d)](_0x4f528c[_0xce1f53(0x19b)],_0x1b555b)]=!![];continue;case'3':if(this[_0x4f528c[_0xce1f53(0xfe)](_0x4f528c[_0xce1f53(0x19b)],_0x1b555b)])return;continue;case'4':logger[_0xce1f53(0x1ab)](_0x4f528c['TWkUU'](_0x4f528c[_0xce1f53(0x185)],_0x1b555b));continue;}break;}}[a55_0x2fe82e(0x150)](){const _0x406163=a55_0x2fe82e,_0x198d8b={'SZRow':function(_0x527cbe,_0xb5ed0){return _0x527cbe===_0xb5ed0;},'EYLGN':_0x406163(0xbc),'AhDgJ':function(_0x51619b,_0x2945af){return _0x51619b>_0x2945af;},'zkGnh':function(_0x299c07,_0xde5c22){return _0x299c07>_0xde5c22;},'Pmdlz':function(_0x358457){return _0x358457();},'WtDxB':_0x406163(0x173)};let _0x1846c3=0x0;return async()=>{const _0x28c1df=_0x406163;_0x1846c3++;if(_0x198d8b['SZRow'](_0x1846c3,0x1)){helper[_0x28c1df(0xec)](this[_0x28c1df(0x100)])&&await this[_0x28c1df(0xf5)]();try{logger[_0x28c1df(0x15a)](_0x198d8b[_0x28c1df(0xeb)]),await TestHubHandler[_0x28c1df(0x108)](_0x1846c3);}catch(_0x311b76){logger[_0x28c1df(0x15a)]('Error\x20in\x20sending\x20testhub\x20stop:\x20'+util[_0x28c1df(0x178)](_0x311b76));}PerformanceTester[_0x28c1df(0xcf)](PerformanceEvents[_0x28c1df(0x1a1)]);if(PerformanceTester['isEnabled']()){const {measures:_0x51fa7a,errors:_0x1e0f99}=await PerformanceTester[_0x28c1df(0x164)](),_0xd544e7={};if(_0x51fa7a&&_0x198d8b[_0x28c1df(0xfc)](_0x51fa7a[_0x28c1df(0x188)],0x0)||_0x1e0f99&&_0x198d8b[_0x28c1df(0x123)](_0x1e0f99[_0x28c1df(0x188)],0x0)){const _0x526c7f={};_0x526c7f[_0x28c1df(0xee)]=_0x51fa7a,_0x526c7f[_0x28c1df(0x195)]=_0x1e0f99,Object['assign'](_0xd544e7,_0x526c7f);}try{const _0x5af773=await helper[_0x28c1df(0xe9)](_0xd544e7,this[_0x28c1df(0x16b)]);logger[_0x28c1df(0x15a)](_0x28c1df(0x12f)+constants[_0x28c1df(0x15c)]+_0x28c1df(0x16f)+_0x5af773[_0x28c1df(0xd6)]);}catch(_0x25158e){logger[_0x28c1df(0x15a)]('Failed\x20to\x20send\x20data\x20to\x20'+constants[_0x28c1df(0x15c)]+_0x28c1df(0x189)+util[_0x28c1df(0x178)](_0x25158e));}try{fs['writeFileSync'](path[_0x28c1df(0xfb)](_0x198d8b['Pmdlz'](getLogDir),_0x198d8b[_0x28c1df(0xfd)]),JSON['stringify'](_0xd544e7));}catch(_0x5df1b9){logger[_0x28c1df(0x15a)](_0x28c1df(0x161)+_0x5df1b9);}}}};}}function a55_0x21bd(){const _0x30e5fe=['NUPnI','XmhKO','AI_INIT_SUCCESSFUL','playwright','info','DUccK','parallelsPerPlatform','usGyj','ibIFx','intExitHandler','readConfig','SmBIh','SIGHUP','snZyw','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','Calling\x20Build\x20Stop\x20from\x20ExitHandler','QOfEK','TjJDb','bKyNp','Pavfh','qZXUh','startLocalBinary','Percy\x20started\x20successfully','toString','isNotUndefined','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','7lsHexo','WZcKZ','1580cxLcme','BROWSERSTACK_PERCY','setLogDir','11550MURDAC','selenium-webdriver','BrowserstackHealing.init','end','cliConfig','IBtfR','push','ZjhxK','IdMov','4323WorKmT','statusCode','turboScaleOptions','isUndefined','selfHeal','./testhub/testhubHandler','generateLocalIdentifier','setupTcgConfigFile','localIdentifier','turboScaleUrl','SIGINT','4.5.0','unhandledRejection','hhbuO','false','Local\x20binary\x20stopped','path','isTrue','dWkTV','SIGTERM','sendToEDS','ybHYN','EYLGN','checkStopLocalBinaryOnExit','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','measures','bind','platforms','TAcDz','Error\x20occured\x20while\x20stopping\x20local\x20binary','platform','envConfig','stopBrowserstackLocal','Error\x20occured\x20while\x20stopping\x20percy','isAuthenticated','accessKey','bTuZq','tcgAuthConfig','join','AhDgJ','WtDxB','sZOLj','TCG_URL','framework','getCentralUser','turboScaleGridDetails','status','byBjf','RMYKr','custom-repeater','win32','stop','AUTOLOGCAPTURE_NOTIFICATION','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','TcPVc','stopPercy','SuxnU','turboScale','bhYHS','percy','ixLmn','isTrialGrid','sdkRunId','Error\x20in\x20percy\x20setup\x20','./performance/constants','UauZT','bhnwq','setupTCGAuth','Shutdown\x20triggered\x20by\x20','TCG_DOWN','UCoBc','captureError','?caps=','FycdU','SDK\x20run\x20started\x20with\x20id:\x20','version','userName','skipSessionStatus','zkGnh','zolKt','getHubUrl','getTurboScaleGridDetails','initialize','setEnvCaps','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','wQSfh','vTrxN','ViKyC','setUpHubUrl','cancel','Data\x20sent\x20successfully\x20to\x20','NEXbW','lgofT','NgiFh','796HfVUeR','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','setBrowserstackInfraFromConfig','./testhub/utils','testContextOptions','hIFOT','errorMessage','startPercy','compareVersions','init','tcg\x20config\x20setup\x20successful.','uEFzg','env','xmzek','proxyConfig','error','message','unhandledErrors','Percy\x20stopped','setLogLevel','preInitialize','../hubAllocationMethods','VuaLK','allocateHub','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','startMonitoring','browserstackLocal','useW3C','killSignal','exitHandler','EwgOy','UPGRADE_REQUIRED','FRAMEWORK','skipBinaryInitialisation','HUB_MANAGEMENT','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','./performance/performance-tester','playwrightUrl','split','debug','2hntwCm','EDS_URL','../../package.json','fIwvw','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','winstonLogger','Error\x20in\x20writing\x20events\x20to\x20file\x20','PdIYI','toLowerCase','finalize','1032990GGUBCb','browserStackLocalOptions','zTimh','stopLocalBinary','setupPercy','DXeTz','config','getLocalConfig','TCG_AUTH_FAILURE','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','\x20with\x20response\x20','isBrowserstackInfra','handleExceptions','175515PtTEUM','events.json','Local\x20binary\x20started\x20successfully','118977JeGTZl','requireSeleniumWebdriverCheck','gQcsb','format','proxyUrl','hubUrl','isRunning','../bin/utils/constants','sElgP','measureWrapper','../ai-sdk-node/bundle','customRepeaters','getProxyConfigForTcg','then','49040IepOyE','fwoQs','reeYW','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','./ats/helper','length','\x20with\x20error\x20','getConfigPath','integrations','Jmlku','No\x20config\x20provided.','SIGABRT','SIGBREAK','getUserName','jUDnw','454212uSLIlL','getPackageVersion','TWkUU','exceptions','nhODJ','warn','ghEPb','true','AI_INIT_FAILURE','rQZnr','setupBrowserstackLocal','IzEcM','isHealingEnabled','iQqWH','fireFunnelTestEvent','SDK_CLEANUP','localOptions','kNTwG','17|12|3|8|5|1|4|19|7|14|2|9|0|6|10|13|20|15|18|16|11','SDKTestAttempted','beforeExit'];a55_0x21bd=function(){return _0x30e5fe;};return a55_0x21bd();}function a55_0x263b(_0xf828af,_0x3a9c40){const _0x21bd38=a55_0x21bd();return a55_0x263b=function(_0x263bd9,_0xa18da2){_0x263bd9=_0x263bd9-0xba;let _0x329711=_0x21bd38[_0x263bd9];return _0x329711;},a55_0x263b(_0xf828af,_0x3a9c40);}exports['default']=BrowserStackSetup;