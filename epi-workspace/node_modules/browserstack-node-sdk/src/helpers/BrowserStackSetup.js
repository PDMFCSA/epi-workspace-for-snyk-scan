const a83_0x5071ca=a83_0x29e1;(function(_0x30e28d,_0x5623a7){const _0x55eb53=a83_0x29e1,_0x32350b=_0x30e28d();while(!![]){try{const _0x744a1c=parseInt(_0x55eb53(0x25c))/0x1*(parseInt(_0x55eb53(0x294))/0x2)+-parseInt(_0x55eb53(0x1d8))/0x3*(-parseInt(_0x55eb53(0x2ac))/0x4)+parseInt(_0x55eb53(0x1dc))/0x5+parseInt(_0x55eb53(0x247))/0x6+-parseInt(_0x55eb53(0x26f))/0x7+-parseInt(_0x55eb53(0x2c4))/0x8*(-parseInt(_0x55eb53(0x2c5))/0x9)+-parseInt(_0x55eb53(0x1f2))/0xa*(parseInt(_0x55eb53(0x2ae))/0xb);if(_0x744a1c===_0x5623a7)break;else _0x32350b['push'](_0x32350b['shift']());}catch(_0x4f1dc9){_0x32350b['push'](_0x32350b['shift']());}}}(a83_0x1c37,0x6c66a));function a83_0x29e1(_0x53b2f1,_0x5b13fb){const _0x1c3736=a83_0x1c37();return a83_0x29e1=function(_0x29e19a,_0x30171c){_0x29e19a=_0x29e19a-0x1cf;let _0x3730ef=_0x1c3736[_0x29e19a];return _0x3730ef;},a83_0x29e1(_0x53b2f1,_0x5b13fb);}const util=require(a83_0x5071ca(0x2a0)),os=require('os'),path=require(a83_0x5071ca(0x2c1)),{v4:uuidv4}=require(a83_0x5071ca(0x244)),fs=require('fs'),constants=require('../bin/utils/constants'),logger=require(a83_0x5071ca(0x24d))[a83_0x5071ca(0x2a4)],fileLogger=require(a83_0x5071ca(0x24d))[a83_0x5071ca(0x266)],{getLogDir}=require(a83_0x5071ca(0x24d)),helper=require('./helper'),utilities=require(a83_0x5071ca(0x285)),percyHelper=require(a83_0x5071ca(0x23a)),hubAllocator=require(a83_0x5071ca(0x237)),PerformanceTester=require(a83_0x5071ca(0x279)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a83_0x5071ca(0x272)),{setPercyFlag}=require(a83_0x5071ca(0x215)),TestHubHandler=require(a83_0x5071ca(0x2d2)),timeoutPromise=require(a83_0x5071ca(0x220)),BrowserstackCLI=require('../bin/v2/browserstackCLI');function a83_0x1c37(){const _0x120ec4=['Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','UYvMJ','11450810yyKgmP','compareVersions','kJGjC','RAAXk','allocateHub','turboScaleOptions','oNKeO','aiHeal:tcgAuth','SIGTERM','generateLocalIdentifier','end','\x20with\x20response\x20','TCG_AUTH_FAILURE','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','tqeOx','ZwjUh','BROWSERSTACK_PERCY','Percy\x20started\x20successfully','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','MFSEv','isTrue','TCG_DOWN','HotcV','ZxxAY','qXaLs','isUndefined','platforms','Error\x20in\x20sending\x20testhub\x20stop:\x20','error','gmYqe','info','skipSessionStatus','envConfig','win32','HffxX','./testhub/utils','stop','join','pGAlQ','lNXTt','assign','xxpnb','../../package.json','sdkRunId','../ai-sdk-node/bundle','sXQlU','./timeoutPromise','localIdentifier','mULuO','testContextOptions','central_scanner','platform','rUeek','GZYRw','kIipO','handled','gWrgG','turboScale','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','requireSeleniumWebdriverCheck','TCG_URL','startLocalBinary','readConfig','beforeExit','disableAutoCaptureLogs','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','RJzbT','selenium-webdriver','ZvQAU','../hubAllocationMethods','useW3C','CYAKc','./percy/utils','init','turboScaleUrl','?caps=','getUserName','Error\x20in\x20percy\x20setup\x20','cntwE','captureError','zspoH','getLocalConfig','uuid','turboScaleGridDetails','Calling\x20Build\x20Stop\x20from\x20ExitHandler','1065846jFKLml','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','AI_INIT_FAILURE','race','VopCf','aNgMQ','./logger','getConfigPath','format','stopBrowserstackLocal','playwrightUrl','Shutdown\x20triggered\x20by\x20','qhskD','GDNtC','getTurboScaleGridDetails','hubUrl','AUTOLOGCAPTURE_NOTIFICATION','unhandledErrors','setupTCGAuth','SDK_CLEANUP','vXkbT','4SLwodE','split','Data\x20sent\x20successfully\x20to\x20','EDS_URL','customRepeaters','getProxyConfigForTcg','integrations','SIGQUIT','4.5.0','getAccessKey','fileLogger','isTurboScaleSession','isBrowserstackInfra','tcg\x20config\x20setup\x20successful.','GfTlD','isHealingEnabled','FRAMEWORK','userName\x20or\x20accessKey\x20is\x20not\x20defined','BrowserstackHealingInitFailed','3961972jWxanA','isTrialGrid','stopLocalBinary','./performance/constants','stopPercy','getHubUrl','true','FSrIt','exitHandler','toString','./performance/performance-tester','bind','proxy','push','DwSbE','skipSessionName','BrowserstackHealing.init\x20method\x20timed\x20out','qLFXn','setUpHubUrl','initialize','fiBnu','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','./utilities','JxQlq','finalize','checkStopLocalBinaryOnExit','kIKgi','MQnlE','isAuthenticated','startPercy','skipBinaryInitialisation','Local\x20binary\x20stopped','hTyGI','cfYoY','browserStackLocalOptions','getFinalCaps','setLogLevel','249328TgjRGy','url','YrqCq','browserstackLocal','AI_PROXY_FAILURE','warn','setEnvCaps','config','setupKeepAlive','events.json','AJDjO','Percy\x20stopped','util','tkpez','getCentralUser','killSignal','winstonLogger','Failed\x20to\x20send\x20data\x20to\x20','close','evhXU','Error\x20in\x20writing\x20events\x20to\x20file\x20','accessKey','uksWT','status','4sWSKau','SIGABRT','11zKUsTh','getInstance','yWoZk','handleExceptions','BrowserstackHealing.init','ats-repeater','fVFLw','NfZGg','4|3|7|5|0|1|6|2','LidRC','unhandledRejection','SDK\x20run\x20started\x20with\x20id:\x20','WMVtE','selfHeal','BROWSERSTACK_TURBOSCALE','false','setupPercy','isRunning','preInitialize','path','message','XxuLv','8ljhBKW','7127739hYEUTK','cliConfig','measureWrapper','SDKTestAttempted','xURPj','EjBKg','toLowerCase','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','setHandlePWError','localOptions','percy','vWbKC','TcWhx','./testhub/testhubHandler','litpb','length','then','tcgAuthConfig','setLogDir','version','parallelsPerPlatform','intExitHandler','Ixdrm','includes','setupBrowserstackLocal','Error\x20occured\x20while\x20stopping\x20local\x20binary','./setKeepAlive','368652CJWlwV','tJfAS','env','proxyUrl','2819675LNJAyy','XalWb','mmcXQ','writeFileSync','proxyConfig','fireFunnelTestEvent','PmdIe','sendToEDS','getLocalIdentifier','debug','Error\x20occured\x20while\x20stopping\x20percy','rxTVu','getPackageVersion','setCredentialsFromYmlConfig','codeceptjs','UOKgL','hojxm','SIGINT','MFtnz','framework'];a83_0x1c37=function(){return _0x120ec4;};return a83_0x1c37();}class BrowserStackSetup{constructor(_0x9d5918,_0x1cd33a){const _0x5f0744=a83_0x5071ca,_0x40f06f={'TvadU':'21|2|13|10|17|18|1|3|14|6|7|8|12|15|19|5|9|20|0|11|16|4','FvDwM':function(_0x2d5b14){return _0x2d5b14();},'cfqeZ':'No\x20config\x20provided.'},_0x55198d=_0x40f06f['TvadU']['split']('|');let _0x1d2922=0x0;while(!![]){switch(_0x55198d[_0x1d2922++]){case'0':helper[_0x5f0744(0x292)](this[_0x5f0744(0x29b)],this['cliConfig'],this[_0x5f0744(0x212)]);continue;case'1':this[_0x5f0744(0x29b)][_0x5f0744(0x20c)]=this[_0x5f0744(0x29b)][_0x5f0744(0x20c)]||[];continue;case'2':this[_0x5f0744(0x212)]=helper[_0x5f0744(0x29a)]();continue;case'3':this[_0x5f0744(0x29b)][_0x5f0744(0x223)]=this[_0x5f0744(0x29b)][_0x5f0744(0x223)]||{};continue;case'4':PerformanceTester['startMonitoring']();continue;case'5':helper[_0x5f0744(0x1e9)](this['config']);continue;case'6':this[_0x5f0744(0x21d)]=_0x40f06f['FvDwM'](uuidv4);continue;case'7':this[_0x5f0744(0x1ef)]=_0x1cd33a;continue;case'8':global['framework']=_0x1cd33a;continue;case'9':this[_0x5f0744(0x29b)]['testContextOptions']['skipSessionStatus']=!helper[_0x5f0744(0x268)]()||helper[_0x5f0744(0x206)](this[_0x5f0744(0x29b)][_0x5f0744(0x223)][_0x5f0744(0x211)]);continue;case'10':this[_0x5f0744(0x2cf)]=null;continue;case'11':helper[_0x5f0744(0x1cf)](this[_0x5f0744(0x29b)]);continue;case'12':if(helper[_0x5f0744(0x20b)](this['config']))throw new Error(_0x40f06f['cfqeZ']);continue;case'13':this[_0x5f0744(0x297)]=null;continue;case'14':this['errorMessage']={};continue;case'15':if(this[_0x5f0744(0x29b)]['error'])throw new Error(this['config'][_0x5f0744(0x20e)]);continue;case'16':helper[_0x5f0744(0x293)](this[_0x5f0744(0x29b)],this['cliConfig'],this[_0x5f0744(0x212)]);continue;case'17':this[_0x5f0744(0x29b)]=helper[_0x5f0744(0x230)](helper[_0x5f0744(0x24e)](_0x9d5918));continue;case'18':this[_0x5f0744(0x2c6)]=helper['setCLICaps'](_0x9d5918);continue;case'19':helper['setBrowserstackInfraFromConfig'](this['config'],this[_0x5f0744(0x2c6)]);continue;case'20':this['config']['testContextOptions'][_0x5f0744(0x27e)]=!helper[_0x5f0744(0x268)]()||helper[_0x5f0744(0x206)](this[_0x5f0744(0x29b)][_0x5f0744(0x223)][_0x5f0744(0x27e)]);continue;case'21':this[_0x5f0744(0x258)]=[];continue;}break;}}[a83_0x5071ca(0x2c0)](_0x5579ce){const _0x1bb717=a83_0x5071ca,_0x2d9e51={'qhskD':_0x1bb717(0x26d),'DNCyj':function(_0x3bbfc9,_0x2fd738){return _0x3bbfc9===_0x2fd738;},'uksWT':function(_0x6b3a47,_0x5a13ad){return _0x6b3a47===_0x5a13ad;},'CYAKc':_0x1bb717(0x262),'fgZsG':_0x1bb717(0x2c8),'qLFXn':function(_0x218e99,_0x1d0b6e){return _0x218e99<_0x1d0b6e;},'QjHwX':function(_0x24e6ea,_0x57cd2c){return _0x24e6ea(_0x57cd2c);},'rxTVu':_0x1bb717(0x235),'gmYqe':_0x1bb717(0x264),'LHWvO':_0x1bb717(0x1f0),'pcTYn':_0x1bb717(0x248),'cfYoY':_0x1bb717(0x1fa),'MQnlE':_0x1bb717(0x1ed),'mmcXQ':'SIGHUP','AJDjO':function(_0x3c178b,_0xa49163){return _0x3c178b!==_0xa49163;},'XxuLv':_0x1bb717(0x213),'UYvMJ':_0x1bb717(0x2ad),'ZvQAU':_0x1bb717(0x263),'hTyGI':'SIGBREAK','elWst':'beforeExit'},_0x46eef0=this['framework'];global[_0x1bb717(0x29b)]=this[_0x1bb717(0x29b)],helper['sanitizeCaps'](this[_0x1bb717(0x29b)]),this[_0x1bb717(0x2a3)]=null,global[_0x1bb717(0x21d)]=this['sdkRunId'],logger['info'](_0x1bb717(0x2b9)+this[_0x1bb717(0x21d)]),!this[_0x1bb717(0x29b)]['browserStackLocalOptions']&&(this[_0x1bb717(0x29b)][_0x1bb717(0x291)]=this[_0x1bb717(0x29b)][_0x1bb717(0x2ce)]||{});if(helper['isUndefined'](helper[_0x1bb717(0x23e)](this[_0x1bb717(0x29b)]))||helper[_0x1bb717(0x20b)](helper[_0x1bb717(0x265)](this[_0x1bb717(0x29b)])))throw new Error(_0x2d9e51[_0x1bb717(0x253)]);helper[_0x1bb717(0x243)](this[_0x1bb717(0x29b)])&&helper[_0x1bb717(0x20b)](helper[_0x1bb717(0x1e4)](this['config']))&&(!helper['isUndefined'](this[_0x1bb717(0x29b)][_0x1bb717(0x291)])&&_0x2d9e51['DNCyj'](this['config']['browserStackLocalOptions']['constructor'],Object)?!helper[_0x1bb717(0x206)](this[_0x1bb717(0x29b)]['browserStackLocalOptions'][_0x1bb717(0x28d)])&&(this[_0x1bb717(0x29b)][_0x1bb717(0x291)]['localIdentifier']=helper[_0x1bb717(0x1fb)]()):this[_0x1bb717(0x29b)]['browserStackLocalOptions']={'localIdentifier':helper[_0x1bb717(0x1fb)]()});this['config'][_0x1bb717(0x291)][_0x1bb717(0x28d)]=helper[_0x1bb717(0x206)](this['config'][_0x1bb717(0x291)][_0x1bb717(0x28d)]),helper[_0x1bb717(0x2cd)](this[_0x1bb717(0x29b)]);if(_0x2d9e51[_0x1bb717(0x2aa)](_0x46eef0,_0x2d9e51[_0x1bb717(0x239)]))return;this[_0x1bb717(0x2b1)]();process['env']['BROWSERSTACK_TURBOSCALE']&&(this[_0x1bb717(0x29b)][_0x1bb717(0x22b)]=helper['isTrue'](process['env'][_0x1bb717(0x2bc)]),this['config'][_0x1bb717(0x1f7)]=this[_0x1bb717(0x29b)][_0x1bb717(0x1f7)]||{});helper[_0x1bb717(0x267)](this[_0x1bb717(0x29b)])&&(process[_0x1bb717(0x1da)][_0x1bb717(0x2bc)]=!![]);if(!helper[_0x1bb717(0x268)]()){try{process[_0x1bb717(0x1da)][_0x1bb717(0x26c)]=_0x46eef0,utilities[_0x1bb717(0x1e1)](_0x2d9e51['fgZsG'],{},this[_0x1bb717(0x29b)],this[_0x1bb717(0x1ef)]);}catch(_0x568c83){logger['debug'](_0x1bb717(0x1ff)+_0x568c83);}return;}helper[_0x1bb717(0x22d)](_0x46eef0)&&(_0x2d9e51[_0x1bb717(0x280)](_0x2d9e51['QjHwX'](parseInt,helper[_0x1bb717(0x1e8)](_0x2d9e51[_0x1bb717(0x1e7)])),0x3)&&(this[_0x1bb717(0x29b)][_0x1bb717(0x238)]=![]),_0x2d9e51['DNCyj'](helper[_0x1bb717(0x1f3)](helper[_0x1bb717(0x1e8)](_0x2d9e51[_0x1bb717(0x1e7)]),_0x2d9e51[_0x1bb717(0x20f)]),0x1)&&(this[_0x1bb717(0x29b)][_0x1bb717(0x238)]=!![]));(helper[_0x1bb717(0x20b)](this['config'][_0x1bb717(0x20c)])||helper[_0x1bb717(0x20b)](this['config'][_0x1bb717(0x20c)]['length']))&&(helper['isUndefined'](this[_0x1bb717(0x29b)][_0x1bb717(0x1d1)])?logger[_0x1bb717(0x210)](_0x2d9e51['LHWvO']):logger[_0x1bb717(0x299)](_0x2d9e51['pcTYn']),this[_0x1bb717(0x29b)][_0x1bb717(0x20c)]=[]);!this['config'][_0x1bb717(0x223)]&&(this['config'][_0x1bb717(0x223)]={});try{process['env']['FRAMEWORK']=_0x5579ce['_'][0x0],utilities['fireFunnelTestEvent'](_0x2d9e51['fgZsG'],{},this['config'],this[_0x1bb717(0x1ef)]);}catch(_0x4f3249){logger[_0x1bb717(0x1e5)](_0x1bb717(0x1ff)+_0x4f3249);}!this[_0x1bb717(0x29b)][_0x1bb717(0x232)]&&logger['info'](constants[_0x1bb717(0x257)]),this[_0x1bb717(0x1d2)]=this['intExitHandler'][_0x1bb717(0x27a)](this),process['on'](_0x2d9e51[_0x1bb717(0x290)],this['intExitHandler']),process['on'](_0x2d9e51[_0x1bb717(0x28a)],this[_0x1bb717(0x1d2)]),process['on'](_0x2d9e51[_0x1bb717(0x1de)],this[_0x1bb717(0x1d2)]),_0x2d9e51[_0x1bb717(0x29e)](process[_0x1bb717(0x225)],_0x2d9e51[_0x1bb717(0x2c3)])?(process['on'](_0x2d9e51[_0x1bb717(0x1f1)],this[_0x1bb717(0x1d2)]),process['on'](_0x2d9e51[_0x1bb717(0x236)],this[_0x1bb717(0x1d2)])):process['on'](_0x2d9e51[_0x1bb717(0x28f)],this[_0x1bb717(0x1d2)]),process['on'](_0x2d9e51['elWst'],this[_0x1bb717(0x277)]());}async[a83_0x5071ca(0x282)](_0x3ca5c7){const _0x164761=a83_0x5071ca,_0x54886f={'aNgMQ':_0x164761(0x2b3),'rXPVe':'custom-repeater','kIKgi':_0x164761(0x275),'BrVuB':function(_0x32980a,_0x5adb2c){return _0x32980a===_0x5adb2c;},'tJfAS':'playwright','yWoZk':function(_0x5b9386,_0x390132){return _0x5b9386+_0x390132;},'hojxm':_0x164761(0x23d),'MFtnz':function(_0x2da916,_0x33e919){return _0x2da916(_0x33e919);},'TcWhx':_0x164761(0x1ea)};this[_0x164761(0x2c0)](_0x3ca5c7);if(helper[_0x164761(0x267)](this[_0x164761(0x29b)])){const _0x158309=await helper[_0x164761(0x255)](this['config']);this['config'][_0x164761(0x245)]=_0x158309,_0x158309[_0x164761(0x270)]&&helper['isNotUndefined'](this[_0x164761(0x29b)][_0x164761(0x297)])&&helper[_0x164761(0x206)](this['config'][_0x164761(0x297)])&&(this[_0x164761(0x29b)][_0x164761(0x291)][_0x164761(0x221)]=_0x54886f[_0x164761(0x24c)],this[_0x164761(0x29b)]['browserStackLocalOptions'][_0x54886f['rXPVe']]=_0x158309[_0x164761(0x260)][_0x164761(0x217)](','),this[_0x164761(0x29b)][_0x164761(0x291)]['forceLocal']=_0x54886f[_0x164761(0x289)]),this[_0x164761(0x29b)][_0x164761(0x23c)]=_0x158309[_0x164761(0x295)],this['framework']&&_0x54886f['BrVuB'](this[_0x164761(0x1ef)][_0x164761(0x2cb)](),_0x54886f[_0x164761(0x1d9)])?this[_0x164761(0x29b)][_0x164761(0x23c)]=_0x54886f[_0x164761(0x2b0)](_0x158309[_0x164761(0x251)],_0x54886f[_0x164761(0x1ec)]):constants[_0x164761(0x256)]=helper[_0x164761(0x274)](this[_0x164761(0x29b)]),logger['debug'](_0x164761(0x204)+constants['hubUrl']);}helper['setProxySettings'](this[_0x164761(0x29b)]),this[_0x164761(0x29c)](),_0x54886f[_0x164761(0x1ee)](setPercyFlag,this),await this[_0x164761(0x1d5)](),![_0x54886f[_0x164761(0x2d1)],_0x54886f[_0x164761(0x1d9)]][_0x164761(0x1d4)](this[_0x164761(0x1ef)])&&!helper[_0x164761(0x267)](this['config'])&&!helper[_0x164761(0x2a2)]()[_0x164761(0x224)]&&await this[_0x164761(0x281)]();}async[a83_0x5071ca(0x2be)](){const _0xca8dc2=a83_0x5071ca,_0x505b4b={};_0x505b4b[_0xca8dc2(0x205)]=function(_0x3a9f9a,_0xa320cf){return _0x3a9f9a===_0xa320cf;},_0x505b4b[_0xca8dc2(0x208)]=_0xca8dc2(0x2bd),_0x505b4b[_0xca8dc2(0x2b4)]=_0xca8dc2(0x284),_0x505b4b[_0xca8dc2(0x1d3)]=_0xca8dc2(0x203),_0x505b4b['vWbKC']=_0xca8dc2(0x275),_0x505b4b[_0xca8dc2(0x201)]=_0xca8dc2(0x231);const _0x45dbdf=_0x505b4b;if(helper[_0xca8dc2(0x206)](this[_0xca8dc2(0x29b)][_0xca8dc2(0x2cf)])&&(!this[_0xca8dc2(0x2cf)]||!this[_0xca8dc2(0x2cf)][_0xca8dc2(0x2bf)]()))try{this['percy']=await percyHelper[_0xca8dc2(0x28c)](this['config']);if(!this[_0xca8dc2(0x2cf)]){process['env'][_0xca8dc2(0x202)]=_0x45dbdf[_0xca8dc2(0x208)];throw new Error(_0x45dbdf[_0xca8dc2(0x2b4)]);}logger[_0xca8dc2(0x210)](_0x45dbdf['Ixdrm']),process['env'][_0xca8dc2(0x202)]=_0x45dbdf[_0xca8dc2(0x2d0)];let _0x440b77=0x0;const _0x51fc57=async()=>{const _0xd407da=_0xca8dc2;_0x440b77++,_0x45dbdf['MFSEv'](_0x440b77,0x1)&&await this[_0xd407da(0x273)]();};process['on'](_0x45dbdf[_0xca8dc2(0x201)],_0x51fc57);}catch(_0x58b56a){process['env'][_0xca8dc2(0x202)]=_0x45dbdf[_0xca8dc2(0x208)],logger[_0xca8dc2(0x1e5)](_0xca8dc2(0x23f)+_0x58b56a);throw new Error(_0x58b56a['toString']());}}async[a83_0x5071ca(0x273)](){const _0x3360c2=a83_0x5071ca,_0x441137={};_0x441137[_0x3360c2(0x2b5)]=_0x3360c2(0x29f),_0x441137[_0x3360c2(0x209)]=_0x3360c2(0x1e6);const _0x9a9a1e=_0x441137;if(this[_0x3360c2(0x2cf)]&&this[_0x3360c2(0x2cf)]['isRunning']())try{await percyHelper['stopPercy'](this[_0x3360c2(0x2cf)]),logger['info'](_0x9a9a1e[_0x3360c2(0x2b5)]);}catch(_0x142753){logger['error'](_0x9a9a1e[_0x3360c2(0x209)],_0x142753[_0x3360c2(0x2c2)]);}}async[a83_0x5071ca(0x1d5)](){const _0x50b226=a83_0x5071ca,_0x31dc6f={};_0x31dc6f[_0x50b226(0x1dd)]='Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled',_0x31dc6f[_0x50b226(0x24b)]='Local\x20binary\x20started\x20successfully';const _0x31787a=_0x31dc6f;if(helper[_0x50b226(0x268)]()&&helper['isTrue'](this[_0x50b226(0x29b)][_0x50b226(0x297)])&&(!this[_0x50b226(0x297)]||!this[_0x50b226(0x297)][_0x50b226(0x2bf)]()))try{if(this[_0x50b226(0x29b)][_0x50b226(0x291)]['skipBinaryInitialisation']){logger[_0x50b226(0x1e5)](_0x31787a[_0x50b226(0x1dd)]);return;}this[_0x50b226(0x297)]=await helper[_0x50b226(0x22f)](this[_0x50b226(0x29b)]),logger[_0x50b226(0x210)](_0x31787a['VopCf']);}catch(_0x15cafc){logger['debug'](_0x15cafc);throw new Error(_0x15cafc[_0x50b226(0x278)]());}}async['stopBrowserstackLocal'](){const _0x3268f5=a83_0x5071ca,_0x2d14da={};_0x2d14da[_0x3268f5(0x222)]=_0x3268f5(0x28e),_0x2d14da[_0x3268f5(0x1f5)]=_0x3268f5(0x1d6);const _0x415d74=_0x2d14da;if(this[_0x3268f5(0x297)]&&this[_0x3268f5(0x297)][_0x3268f5(0x2bf)]())try{await helper[_0x3268f5(0x271)](this[_0x3268f5(0x297)]),logger[_0x3268f5(0x210)](_0x415d74[_0x3268f5(0x222)]);}catch(_0x3b7c1a){logger[_0x3268f5(0x20e)](_0x415d74[_0x3268f5(0x1f5)],_0x3b7c1a['message']);}}async[a83_0x5071ca(0x281)](){const _0xfa2534=a83_0x5071ca;return PerformanceTester[_0xfa2534(0x2c7)](PerformanceAutEvents['HUB_MANAGEMENT'],async()=>{const _0x2e9c2c=_0xfa2534;await hubAllocator[_0x2e9c2c(0x1f6)](this['config']);})();}async[a83_0x5071ca(0x259)](){const _0x1cdc6e=a83_0x5071ca,_0x3508d2={'JxQlq':function(_0x118c66,_0x1c36bd){return _0x118c66(_0x1c36bd);},'xURPj':_0x1cdc6e(0x21e),'tVWui':function(_0x1aa7e0,_0x5cf470,_0x23af02,_0xf270a8,_0x4a24fa,_0x16b8b9,_0x2b78bb){return _0x1aa7e0(_0x5cf470,_0x23af02,_0xf270a8,_0x4a24fa,_0x16b8b9,_0x2b78bb);},'WMVtE':_0x1cdc6e(0x27f),'cntwE':_0x1cdc6e(0x26e),'tqeOx':_0x1cdc6e(0x21c),'YrqCq':_0x1cdc6e(0x2b2),'qXaLs':function(_0x5551a1,_0x5c283b){return _0x5551a1===_0x5c283b;},'GZYRw':_0x1cdc6e(0x275),'mUpID':function(_0x422537,_0x2ded40){return _0x422537===_0x2ded40;},'gWrgG':function(_0x344e31,_0x86a941){return _0x344e31===_0x86a941;},'lNXTt':function(_0x138deb,_0x54dc97){return _0x138deb===_0x54dc97;},'FSrIt':_0x1cdc6e(0x22c),'LidRC':function(_0x4787a1,_0x4a5357){return _0x4787a1===_0x4a5357;},'eWMoe':'Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','kJGjC':_0x1cdc6e(0x233),'zspoH':function(_0x3036e5,_0x326268){return _0x3036e5(_0x326268);},'litpb':'Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','sXQlU':function(_0x3e3303,_0x140707){return _0x3e3303>=_0x140707;},'pGAlQ':function(_0x3cf626,_0x186e03){return _0x3cf626<_0x186e03;},'GDNtC':function(_0x402545,_0x175eeb){return _0x402545>=_0x175eeb;},'xxpnb':_0x1cdc6e(0x269),'PmdIe':_0x1cdc6e(0x1f9),'RJzbT':function(_0x11266e){return _0x11266e();}},_0x518fd1=PerformanceTester[_0x1cdc6e(0x2c7)](_0x3508d2[_0x1cdc6e(0x1e2)],async()=>{const _0x46a810=_0x1cdc6e;try{const _0x574c5c=new Date(),_0x2fa738=helper[_0x46a810(0x261)](this['config']),_0x4210eb=_0x3508d2[_0x46a810(0x286)](require,path[_0x46a810(0x217)](__dirname,_0x3508d2[_0x46a810(0x2c9)])),_0x7518d4=_0x3508d2['tVWui'](timeoutPromise,constants['TCG_AUTH_TIMEOUT'],_0x3508d2[_0x46a810(0x2ba)],_0x3508d2[_0x46a810(0x240)],_0x574c5c,this['config'],this[_0x46a810(0x1ef)]),_0x3934fd={'tcgUrl':constants[_0x46a810(0x22e)],'sdkVersion':_0x3508d2[_0x46a810(0x286)](require,_0x3508d2[_0x46a810(0x200)])[_0x46a810(0x1d0)],'methodUsed':_0x3508d2[_0x46a810(0x296)],'proxyConfig':_0x2fa738,'os':os[_0x46a810(0x225)]()};if(_0x2fa738&&_0x2fa738[_0x46a810(0x1db)]){utilities[_0x46a810(0x1e1)](constants[_0x46a810(0x298)],_0x3934fd,this[_0x46a810(0x29b)],this[_0x46a810(0x1ef)]);return;}const _0x2efac1={};_0x2efac1[_0x46a810(0x27b)]=_0x2fa738;const _0x1152ac=await Promise[_0x46a810(0x24a)]([_0x4210eb[_0x46a810(0x23b)](this[_0x46a810(0x29b)][_0x46a810(0x2a9)],this['config']['userName'],constants['TCG_URL'],_0x3508d2[_0x46a810(0x286)](require,_0x3508d2[_0x46a810(0x200)])[_0x46a810(0x1d0)],_0x2efac1)[_0x46a810(0x2d5)](_0x242a70=>{return _0x7518d4['cancel'](),_0x242a70;}),_0x7518d4]);_0x1152ac[_0x46a810(0x26b)]=_0x3508d2[_0x46a810(0x20a)](_0x1152ac[_0x46a810(0x26b)],_0x3508d2[_0x46a810(0x227)])||_0x3508d2['qXaLs'](_0x1152ac[_0x46a810(0x26b)],!![]);const _0x3a019c=_0x3508d2['mUpID'](this[_0x46a810(0x29b)]['selfHeal'],!![])||_0x3508d2[_0x46a810(0x22a)](this[_0x46a810(0x29b)][_0x46a810(0x2bb)],_0x3508d2[_0x46a810(0x227)]);if(_0x3508d2[_0x46a810(0x219)](_0x1152ac[_0x46a810(0x2c2)],constants['UPGRADE_REQUIRED'])&&_0x3a019c)logger[_0x46a810(0x210)](_0x3508d2[_0x46a810(0x276)]);else{if(!_0x1152ac['isAuthenticated']&&_0x3508d2[_0x46a810(0x2b7)](_0x1152ac[_0x46a810(0x2ab)],0x1f7)&&_0x3a019c)logger[_0x46a810(0x210)](_0x3508d2['eWMoe']),utilities['fireFunnelTestEvent'](constants[_0x46a810(0x207)],_0x3934fd,this[_0x46a810(0x29b)],this[_0x46a810(0x1ef)]);else{if(!_0x1152ac['isAuthenticated']&&_0x3a019c){logger[_0x46a810(0x210)](_0x3508d2[_0x46a810(0x1f4)]);const _0x1fff42={'tcgUrl':constants[_0x46a810(0x22e)],'sdkVersion':_0x3508d2[_0x46a810(0x242)](require,_0x3508d2[_0x46a810(0x200)])[_0x46a810(0x1d0)],'methodUsed':_0x3508d2[_0x46a810(0x296)],'proxyConfig':_0x2fa738,'os':os['platform']()};utilities[_0x46a810(0x1e1)](constants[_0x46a810(0x1fe)],_0x1fff42,this[_0x46a810(0x29b)],this[_0x46a810(0x1ef)]);}else{if(_0x1152ac[_0x46a810(0x28b)]&&!_0x1152ac[_0x46a810(0x26b)]&&_0x3a019c)logger[_0x46a810(0x210)](_0x3508d2[_0x46a810(0x2d3)]);else{if(_0x3508d2[_0x46a810(0x21f)](_0x1152ac['status'],0xc8)&&_0x3508d2[_0x46a810(0x218)](_0x1152ac[_0x46a810(0x2ab)],0x12c))utilities[_0x46a810(0x1e1)](constants['AI_INIT_SUCCESSFUL'],_0x3934fd,this['config'],this[_0x46a810(0x1ef)]);else{if(_0x3508d2[_0x46a810(0x254)](_0x1152ac[_0x46a810(0x2ab)],0x190))_0x3934fd[_0x46a810(0x2ab)]=_0x1152ac[_0x46a810(0x2ab)],utilities[_0x46a810(0x1e1)](constants[_0x46a810(0x249)],_0x3934fd,this[_0x46a810(0x29b)],this[_0x46a810(0x1ef)]);else!_0x1152ac[_0x46a810(0x2ab)]&&utilities[_0x46a810(0x1e1)](constants['INVALID_INIT_RESP_WITH_USER_IMPACT'],_0x3934fd,this['config'],this[_0x46a810(0x1ef)]);}}}}}if(_0x1152ac[_0x46a810(0x28b)]&&_0x1152ac['isHealingEnabled']){const _0x48b606={};_0x48b606[_0x46a810(0x2d6)]=_0x1152ac;const _0x1d4abb=_0x48b606;_0x2fa738&&(_0x1d4abb[_0x46a810(0x1e0)]=_0x2fa738),_0x1d4abb[_0x46a810(0x1ef)]=this['framework'],_0x1d4abb['bstackConfig']=this[_0x46a810(0x29b)],helper['setupTcgConfigFile'](_0x1d4abb),logger['debug'](_0x3508d2[_0x46a810(0x21b)]);}}catch(_0x30f152){logger[_0x46a810(0x1e5)](_0x46a810(0x2cc)+(_0x30f152['message']?_0x30f152['message']:''));}});await _0x3508d2[_0x1cdc6e(0x234)](_0x518fd1);}[a83_0x5071ca(0x29c)](){const _0x1a9ebe=a83_0x5071ca,_0x9648e0={'vlZGZ':function(_0x470ee5,_0x29f73a){return _0x470ee5(_0x29f73a);},'kIipO':_0x1a9ebe(0x1d7)};_0x9648e0['vlZGZ'](require,_0x9648e0[_0x1a9ebe(0x228)])();}[a83_0x5071ca(0x2b1)](){const _0x3ac1b3=a83_0x5071ca,_0x4fbd56={};_0x4fbd56['oNKeO']=_0x3ac1b3(0x2b8),_0x4fbd56['evhXU']='uncaughtException';const _0x9a51c9=_0x4fbd56,_0x5c0e60=_0x318c2b=>{const _0x15251d=_0x3ac1b3;logger[_0x15251d(0x20e)](_0x318c2b[_0x15251d(0x2c2)]),logger['debug'](util[_0x15251d(0x24f)](_0x318c2b)),this['unhandledErrors'][_0x15251d(0x27c)](util[_0x15251d(0x24f)]('%j',_0x318c2b)),PerformanceTester[_0x15251d(0x241)](_0x318c2b);};process['on'](_0x9a51c9[_0x3ac1b3(0x1f8)],_0x5c0e60),process['on'](_0x9a51c9[_0x3ac1b3(0x2a7)],_0x5c0e60);}async[a83_0x5071ca(0x1d2)](_0x5a5a77){const _0x13f1a6=a83_0x5071ca,_0x1c61e1={};_0x1c61e1[_0x13f1a6(0x214)]=_0x13f1a6(0x2b6),_0x1c61e1[_0x13f1a6(0x226)]=function(_0x39bba0,_0x29b94c){return _0x39bba0+_0x29b94c;},_0x1c61e1['tkpez']=_0x13f1a6(0x252),_0x1c61e1[_0x13f1a6(0x25b)]=function(_0x161971,_0x59342f){return _0x161971+_0x59342f;},_0x1c61e1[_0x13f1a6(0x26a)]=_0x13f1a6(0x229),_0x1c61e1[_0x13f1a6(0x1eb)]=function(_0x3cf485,_0x78d2f2){return _0x3cf485+_0x78d2f2;};const _0x4657eb=_0x1c61e1,_0x30de90=_0x4657eb[_0x13f1a6(0x214)][_0x13f1a6(0x25d)]('|');let _0x2be804=0x0;while(!![]){switch(_0x30de90[_0x2be804++]){case'0':logger['info'](_0x4657eb[_0x13f1a6(0x226)](_0x4657eb[_0x13f1a6(0x2a1)],_0x5a5a77));continue;case'1':this['killSignal']=_0x5a5a77;continue;case'2':await BrowserstackCLI['getInstance']()['stop']();continue;case'3':fileLogger&&fileLogger['close']();continue;case'4':logger&&logger[_0x13f1a6(0x2a6)]();continue;case'5':this[_0x4657eb[_0x13f1a6(0x25b)](_0x4657eb[_0x13f1a6(0x26a)],_0x5a5a77)]=!![];continue;case'6':await TestHubHandler[_0x13f1a6(0x216)](_0x5a5a77);continue;case'7':if(this[_0x4657eb[_0x13f1a6(0x1eb)](_0x4657eb['GfTlD'],_0x5a5a77)])return;continue;}break;}}[a83_0x5071ca(0x277)](){const _0x5c3591=a83_0x5071ca,_0x703766={'vYTeL':function(_0x76b7f3,_0x336cc9){return _0x76b7f3===_0x336cc9;},'fyHvB':_0x5c3591(0x246),'WTITa':function(_0x3edc5a,_0x365959){return _0x3edc5a>_0x365959;},'EjBKg':function(_0x1b03bf,_0xd23e01){return _0x1b03bf>_0xd23e01;},'DwSbE':function(_0x53a77d){return _0x53a77d();},'fiBnu':_0x5c3591(0x29d)};let _0x3dbf=0x0;return async()=>{const _0x1886cc=_0x5c3591;_0x3dbf++;if(_0x703766['vYTeL'](_0x3dbf,0x1)){helper[_0x1886cc(0x288)](this[_0x1886cc(0x1ef)])&&await this[_0x1886cc(0x250)]();try{logger['debug'](_0x703766['fyHvB']),await TestHubHandler[_0x1886cc(0x216)](_0x3dbf),await BrowserstackCLI[_0x1886cc(0x2af)]()[_0x1886cc(0x216)]('1');}catch(_0x1bc5b5){logger[_0x1886cc(0x1e5)](_0x1886cc(0x20d)+util[_0x1886cc(0x24f)](_0x1bc5b5));}PerformanceTester[_0x1886cc(0x1fc)](PerformanceEvents[_0x1886cc(0x25a)]);if(PerformanceTester['isEnabled']()){const {measures:_0x1fef8c,errors:_0x1e7270}=await PerformanceTester[_0x1886cc(0x287)](),_0x22aeeb={};if(_0x1fef8c&&_0x703766['WTITa'](_0x1fef8c[_0x1886cc(0x2d4)],0x0)||_0x1e7270&&_0x703766[_0x1886cc(0x2ca)](_0x1e7270['length'],0x0)){const _0x1e7e09={};_0x1e7e09['measures']=_0x1fef8c,_0x1e7e09['exceptions']=_0x1e7270,Object[_0x1886cc(0x21a)](_0x22aeeb,_0x1e7e09);}try{const _0x1a7acc=await helper[_0x1886cc(0x1e3)](_0x22aeeb,this[_0x1886cc(0x29b)]);logger[_0x1886cc(0x1e5)](_0x1886cc(0x25e)+constants[_0x1886cc(0x25f)]+_0x1886cc(0x1fd)+_0x1a7acc['statusCode']);}catch(_0x3ebdc8){logger[_0x1886cc(0x1e5)](_0x1886cc(0x2a5)+constants['EDS_URL']+'\x20with\x20error\x20'+util[_0x1886cc(0x24f)](_0x3ebdc8));}try{fs[_0x1886cc(0x1df)](path['join'](_0x703766[_0x1886cc(0x27d)](getLogDir),_0x703766[_0x1886cc(0x283)]),JSON['stringify'](_0x22aeeb));}catch(_0x413cdd){logger[_0x1886cc(0x1e5)](_0x1886cc(0x2a8)+_0x413cdd);}}}};}}exports['default']=BrowserStackSetup;