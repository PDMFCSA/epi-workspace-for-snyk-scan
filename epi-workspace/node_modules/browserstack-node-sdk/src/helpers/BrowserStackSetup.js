const a83_0x414e6c=a83_0x3b44;(function(_0x4dcdb0,_0x831d65){const _0x30b6a7=a83_0x3b44,_0x3345b5=_0x4dcdb0();while(!![]){try{const _0x1809cb=parseInt(_0x30b6a7(0x244))/0x1+parseInt(_0x30b6a7(0x202))/0x2+parseInt(_0x30b6a7(0x1a3))/0x3+-parseInt(_0x30b6a7(0x20f))/0x4+-parseInt(_0x30b6a7(0x1de))/0x5*(-parseInt(_0x30b6a7(0x23f))/0x6)+-parseInt(_0x30b6a7(0x21f))/0x7+parseInt(_0x30b6a7(0x246))/0x8*(-parseInt(_0x30b6a7(0x23c))/0x9);if(_0x1809cb===_0x831d65)break;else _0x3345b5['push'](_0x3345b5['shift']());}catch(_0x340e3a){_0x3345b5['push'](_0x3345b5['shift']());}}}(a83_0x3c71,0xe0519));const util=require('util'),os=require('os'),path=require(a83_0x414e6c(0x190)),{v4:uuidv4}=require(a83_0x414e6c(0x279)),fs=require('fs'),constants=require('../bin/utils/constants'),logger=require('./logger')[a83_0x414e6c(0x27f)],fileLogger=require('./logger')[a83_0x414e6c(0x1ea)],{getLogDir}=require('./logger'),helper=require(a83_0x414e6c(0x1dd)),utilities=require(a83_0x414e6c(0x1ce)),percyHelper=require(a83_0x414e6c(0x1ee)),hubAllocator=require(a83_0x414e6c(0x1c2)),PerformanceTester=require(a83_0x414e6c(0x278)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require('./performance/constants'),{setPercyFlag}=require(a83_0x414e6c(0x18e)),TestHubHandler=require(a83_0x414e6c(0x1f6)),timeoutPromise=require(a83_0x414e6c(0x23b)),BrowserstackCLI=require(a83_0x414e6c(0x249));function a83_0x3b44(_0x11392a,_0x43dc4e){const _0x3c7143=a83_0x3c71();return a83_0x3b44=function(_0x3b4424,_0x1a0968){_0x3b4424=_0x3b4424-0x184;let _0x49b92a=_0x3c7143[_0x3b4424];return _0x49b92a;},a83_0x3b44(_0x11392a,_0x43dc4e);}function a83_0x3c71(){const _0x7cce2=['BrowserstackHealing.init\x20method\x20timed\x20out','SDK_CLEANUP','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','selfHeal','win32','UTRTS','platforms','GEovG','central_scanner','Percy\x20started\x20successfully','uNcDE','eWqEx','url','./helper','25oalshR','debug','lFddj','YLZcF','TCG_AUTH_FAILURE','accessKey','DMsYM','CRZLG','AbjHJ','VYNMs','mXnPS','localOptions','fileLogger','message','config','opxVt','./percy/utils','fireFunnelTestEvent','turboScaleOptions','proxyConfig','BrowserstackHealing.init','TjuCa','setProxySettings','GWHfN','./testhub/testhubHandler','Fhrok','handleExceptions','setCLICaps','INVALID_INIT_RESP_WITH_USER_IMPACT','beforeExit','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','qXYqZ','customRepeaters','userName','IIgBs','Local\x20binary\x20started\x20successfully','2527228IlXJwI','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','close','getHubUrl','Error\x20occured\x20while\x20stopping\x20percy','isRunning','end','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','GwLsL','SDKTestAttempted','MajsR','EDS_URL','zMWSd','1426500lQVjkZ','KxwLn','\x20with\x20response\x20','BROWSERSTACK_PERCY','getLocalConfig','stringify','hVRxI','errorMessage','checkStopLocalBinaryOnExit','cancel','getInstance','startPercy','ITvmR','true','intExitHandler','format','6927207MnaUsE','proxy','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','turboScaleGridDetails','SIGQUIT','ahUpv','percy','sdkRunId','getUserName','setupKeepAlive','Error\x20in\x20percy\x20setup\x20','warn','initialize','env','setupTcgConfigFile','sanitizeCaps','isHealingEnabled','0|1|7|6|5|2|4|3','UPGRADE_REQUIRED','skipBinaryInitialisation','HvAFT','race','bEYwM','includes','CXeVe','ats-repeater','roQOL','info','./timeoutPromise','18852651BegFSn','bstackConfig','bind','190788pXicDK','setupTCGAuth','getPackageVersion','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','stopBrowserstackLocal','1716249LrsqDS','tyyWS','8SkSSSI','version','toLowerCase','../bin/v2/browserstackCLI','getConfigPath','SIGHUP','getFinalCaps','readConfig','toString','captureError','oOHAv','isNotUndefined','measures','LowJx','qpmPL','getCentralUser','TCG_URL','proxyUrl','sendToEDS','isEnabled','userName\x20or\x20accessKey\x20is\x20not\x20defined','SIGTERM','zApVk','uOVgO','turboScaleUrl','measureWrapper','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','JdHwg','push','writeFileSync','envConfig','browserstackLocal','status','setupBrowserstackLocal','AygfT','exitHandler','testContextOptions','RuXNj','igXni','killSignal','browserStackLocalOptions','isTrue','setHandlePWError','DuhAB','exceptions','DrNLm','BIOvL','HUB_MANAGEMENT','Failed\x20to\x20send\x20data\x20to\x20','SIGABRT','./performance/performance-tester','uuid','Calling\x20Build\x20Stop\x20from\x20ExitHandler','setLogDir','startLocalBinary','ejoRd','AI_INIT_FAILURE','winstonLogger','AotwO','hubUrl','../../package.json','split','isTrialGrid','false','Local\x20binary\x20stopped','framework','handled','platform','setEnvCaps','uXIvj','stopPercy','BROWSERSTACK_TURBOSCALE','length','MAXZn','playwrightUrl','skipSessionName','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','./testhub/utils','events.json','path','useW3C','TCG_DOWN','2|4|12|18|17|5|20|9|1|11|13|16|14|6|15|7|10|0|8|19|21|3','getAccessKey','setLogLevel','ABgKL','Ybtsa','ISWqs','unhandledRejection','bvAev','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','unhandledErrors','ANrUE','sTXtq','vihbJ','FRAMEWORK','aiHeal:tcgAuth','NdnHo','3662763tQSfOx','AcoEZ','isUndefined','playwright','constructor','Percy\x20stopped','KAYYq','YTTUf','skipSessionStatus','qTYuS','selenium-webdriver','assign','integrations','isBrowserstackInfra','wsjxj','LFURR','getProxyConfigForTcg','ePaSq','cliConfig','stop','ytQUY','custom-repeater','Data\x20sent\x20successfully\x20to\x20','generateLocalIdentifier','preInitialize','disableAutoCaptureLogs','isTurboScaleSession','FEydN','dURkE','wbPsY','isAuthenticated','../hubAllocationMethods','error','localIdentifier','cuOur','BBFOc','tcg\x20config\x20setup\x20successful.','Error\x20occured\x20while\x20stopping\x20local\x20binary','getTurboScaleGridDetails','setUpHubUrl','SDK\x20run\x20started\x20with\x20id:\x20','FMVvM','Error\x20in\x20writing\x20events\x20to\x20file\x20','./utilities','turboScale'];a83_0x3c71=function(){return _0x7cce2;};return a83_0x3c71();}class BrowserStackSetup{constructor(_0x468a61,_0x11723b){const _0x20a3b0=a83_0x414e6c,_0x4e598b={'bpEjL':_0x20a3b0(0x193),'bEYwM':function(_0x5444a7){return _0x5444a7();},'qpmPL':'No\x20config\x20provided.'},_0x1919c6=_0x4e598b['bpEjL'][_0x20a3b0(0x283)]('|');let _0x4594bd=0x0;while(!![]){switch(_0x1919c6[_0x4594bd++]){case'0':this['config'][_0x20a3b0(0x26a)][_0x20a3b0(0x18c)]=!helper[_0x20a3b0(0x1b0)]()||helper[_0x20a3b0(0x26f)](this[_0x20a3b0(0x1ec)]['testContextOptions']['skipSessionName']);continue;case'1':this[_0x20a3b0(0x216)]={};continue;case'2':this[_0x20a3b0(0x19c)]=[];continue;case'3':PerformanceTester['startMonitoring']();continue;case'4':this[_0x20a3b0(0x264)]=helper[_0x20a3b0(0x185)]();continue;case'5':this[_0x20a3b0(0x1b5)]=helper[_0x20a3b0(0x1f9)](_0x468a61);continue;case'6':if(this[_0x20a3b0(0x1ec)][_0x20a3b0(0x1c3)])throw new Error(this['config'][_0x20a3b0(0x1c3)]);continue;case'7':helper['setCredentialsFromYmlConfig'](this['config']);continue;case'8':helper[_0x20a3b0(0x24c)](this[_0x20a3b0(0x1ec)],this[_0x20a3b0(0x1b5)],this['envConfig']);continue;case'9':this[_0x20a3b0(0x1ec)][_0x20a3b0(0x26a)]=this[_0x20a3b0(0x1ec)][_0x20a3b0(0x26a)]||{};continue;case'10':this['config'][_0x20a3b0(0x26a)]['skipSessionStatus']=!helper[_0x20a3b0(0x1b0)]()||helper[_0x20a3b0(0x26f)](this[_0x20a3b0(0x1ec)]['testContextOptions'][_0x20a3b0(0x1ab)]);continue;case'11':this[_0x20a3b0(0x226)]=_0x4e598b[_0x20a3b0(0x235)](uuidv4);continue;case'12':this[_0x20a3b0(0x265)]=null;continue;case'13':this['framework']=_0x11723b;continue;case'14':if(helper[_0x20a3b0(0x1a5)](this['config']))throw new Error(_0x4e598b[_0x20a3b0(0x254)]);continue;case'15':helper['setBrowserstackInfraFromConfig'](this[_0x20a3b0(0x1ec)],this[_0x20a3b0(0x1b5)]);continue;case'16':global[_0x20a3b0(0x287)]=_0x11723b;continue;case'17':this['config']=helper[_0x20a3b0(0x24d)](helper[_0x20a3b0(0x24a)](_0x468a61));continue;case'18':this[_0x20a3b0(0x225)]=null;continue;case'19':helper[_0x20a3b0(0x27b)](this[_0x20a3b0(0x1ec)]);continue;case'20':this[_0x20a3b0(0x1ec)][_0x20a3b0(0x1d6)]=this['config'][_0x20a3b0(0x1d6)]||[];continue;case'21':helper[_0x20a3b0(0x195)](this[_0x20a3b0(0x1ec)],this[_0x20a3b0(0x1b5)],this[_0x20a3b0(0x264)]);continue;}break;}}[a83_0x414e6c(0x1bb)](_0x30f02d){const _0xd9be3c=a83_0x414e6c,_0x99d58d={'qTYuS':_0xd9be3c(0x25a),'DMsYM':function(_0x56f3e0,_0x10f262){return _0x56f3e0===_0x10f262;},'KAYYq':function(_0x33d6dc,_0x528dce){return _0x33d6dc===_0x528dce;},'MAXZn':_0xd9be3c(0x1af),'AbjHJ':_0xd9be3c(0x20b),'qXYqZ':function(_0x323508,_0x455c8e){return _0x323508<_0x455c8e;},'oOHAv':function(_0x1176a6,_0x504a39){return _0x1176a6(_0x504a39);},'roQOL':_0xd9be3c(0x1ad),'YLZcF':'4.5.0','BBFOc':'Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','LowJx':_0xd9be3c(0x1fc),'eWqEx':_0xd9be3c(0x25b),'ISWqs':'SIGINT','XeoDB':_0xd9be3c(0x24b),'DuhAB':function(_0x423361,_0x59cd5e){return _0x423361!==_0x59cd5e;},'uOVgO':_0xd9be3c(0x1d4),'ANrUE':_0xd9be3c(0x277),'mXnPS':_0xd9be3c(0x223),'uXIvj':'SIGBREAK','Qmoqf':_0xd9be3c(0x1fb)},_0x4c27ed=this['framework'];global[_0xd9be3c(0x1ec)]=this[_0xd9be3c(0x1ec)],helper[_0xd9be3c(0x22e)](this[_0xd9be3c(0x1ec)]),this['killSignal']=null,global['sdkRunId']=this['sdkRunId'],logger[_0xd9be3c(0x23a)](_0xd9be3c(0x1cb)+this[_0xd9be3c(0x226)]),!this['config'][_0xd9be3c(0x26e)]&&(this[_0xd9be3c(0x1ec)][_0xd9be3c(0x26e)]=this[_0xd9be3c(0x1ec)][_0xd9be3c(0x1e9)]||{});if(helper[_0xd9be3c(0x1a5)](helper[_0xd9be3c(0x227)](this['config']))||helper['isUndefined'](helper[_0xd9be3c(0x194)](this[_0xd9be3c(0x1ec)])))throw new Error(_0x99d58d[_0xd9be3c(0x1ac)]);helper[_0xd9be3c(0x213)](this[_0xd9be3c(0x1ec)])&&helper[_0xd9be3c(0x1a5)](helper['getLocalIdentifier'](this[_0xd9be3c(0x1ec)]))&&(!helper['isUndefined'](this[_0xd9be3c(0x1ec)][_0xd9be3c(0x26e)])&&_0x99d58d[_0xd9be3c(0x1e4)](this[_0xd9be3c(0x1ec)]['browserStackLocalOptions'][_0xd9be3c(0x1a7)],Object)?!helper['isTrue'](this['config'][_0xd9be3c(0x26e)]['skipBinaryInitialisation'])&&(this[_0xd9be3c(0x1ec)]['browserStackLocalOptions']['localIdentifier']=helper[_0xd9be3c(0x1ba)]()):this[_0xd9be3c(0x1ec)]['browserStackLocalOptions']={'localIdentifier':helper[_0xd9be3c(0x1ba)]()});this['config']['browserStackLocalOptions'][_0xd9be3c(0x232)]=helper[_0xd9be3c(0x26f)](this['config'][_0xd9be3c(0x26e)][_0xd9be3c(0x232)]),helper[_0xd9be3c(0x270)](this['config']);if(_0x99d58d[_0xd9be3c(0x1a9)](_0x4c27ed,_0x99d58d[_0xd9be3c(0x18a)]))return;this['handleExceptions']();process[_0xd9be3c(0x22c)][_0xd9be3c(0x188)]&&(this['config'][_0xd9be3c(0x1cf)]=helper[_0xd9be3c(0x26f)](process[_0xd9be3c(0x22c)][_0xd9be3c(0x188)]),this[_0xd9be3c(0x1ec)]['turboScaleOptions']=this[_0xd9be3c(0x1ec)][_0xd9be3c(0x1f0)]||{});helper[_0xd9be3c(0x1bd)](this[_0xd9be3c(0x1ec)])&&(process[_0xd9be3c(0x22c)]['BROWSERSTACK_TURBOSCALE']=!![]);if(!helper[_0xd9be3c(0x1b0)]()){try{process[_0xd9be3c(0x22c)][_0xd9be3c(0x1a0)]=_0x4c27ed,utilities[_0xd9be3c(0x1ef)](_0x99d58d[_0xd9be3c(0x1e6)],{},this['config'],this[_0xd9be3c(0x287)]);}catch(_0x211624){logger[_0xd9be3c(0x1df)]('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x211624);}return;}helper['requireSeleniumWebdriverCheck'](_0x4c27ed)&&(_0x99d58d[_0xd9be3c(0x1fd)](_0x99d58d[_0xd9be3c(0x250)](parseInt,helper[_0xd9be3c(0x241)](_0x99d58d[_0xd9be3c(0x239)])),0x3)&&(this['config'][_0xd9be3c(0x191)]=![]),_0x99d58d[_0xd9be3c(0x1a9)](helper['compareVersions'](helper[_0xd9be3c(0x241)](_0x99d58d[_0xd9be3c(0x239)]),_0x99d58d[_0xd9be3c(0x1e1)]),0x1)&&(this[_0xd9be3c(0x1ec)]['useW3C']=!![]));(helper[_0xd9be3c(0x1a5)](this[_0xd9be3c(0x1ec)][_0xd9be3c(0x1d6)])||helper[_0xd9be3c(0x1a5)](this[_0xd9be3c(0x1ec)][_0xd9be3c(0x1d6)][_0xd9be3c(0x189)]))&&(helper['isUndefined'](this[_0xd9be3c(0x1ec)]['parallelsPerPlatform'])?logger[_0xd9be3c(0x23a)](_0x99d58d[_0xd9be3c(0x1c6)]):logger[_0xd9be3c(0x22a)](_0x99d58d[_0xd9be3c(0x253)]),this[_0xd9be3c(0x1ec)][_0xd9be3c(0x1d6)]=[]);!this[_0xd9be3c(0x1ec)][_0xd9be3c(0x26a)]&&(this[_0xd9be3c(0x1ec)][_0xd9be3c(0x26a)]={});try{process[_0xd9be3c(0x22c)]['FRAMEWORK']=_0x30f02d['_'][0x0],utilities[_0xd9be3c(0x1ef)](_0x99d58d[_0xd9be3c(0x1e6)],{},this[_0xd9be3c(0x1ec)],this[_0xd9be3c(0x287)]);}catch(_0x2ea2f5){logger[_0xd9be3c(0x1df)](_0xd9be3c(0x18d)+_0x2ea2f5);}!this[_0xd9be3c(0x1ec)][_0xd9be3c(0x1bc)]&&logger[_0xd9be3c(0x23a)](constants['AUTOLOGCAPTURE_NOTIFICATION']),this[_0xd9be3c(0x21d)]=this[_0xd9be3c(0x21d)][_0xd9be3c(0x23e)](this),process['on'](_0x99d58d[_0xd9be3c(0x1db)],this[_0xd9be3c(0x21d)]),process['on'](_0x99d58d[_0xd9be3c(0x198)],this[_0xd9be3c(0x21d)]),process['on'](_0x99d58d['XeoDB'],this['intExitHandler']),_0x99d58d[_0xd9be3c(0x271)](process[_0xd9be3c(0x184)],_0x99d58d[_0xd9be3c(0x25d)])?(process['on'](_0x99d58d[_0xd9be3c(0x19d)],this[_0xd9be3c(0x21d)]),process['on'](_0x99d58d[_0xd9be3c(0x1e8)],this['intExitHandler'])):process['on'](_0x99d58d[_0xd9be3c(0x186)],this[_0xd9be3c(0x21d)]),process['on'](_0x99d58d['Qmoqf'],this[_0xd9be3c(0x269)]());}async[a83_0x414e6c(0x22b)](_0x2ee115){const _0x5d2c68=a83_0x414e6c,_0x17a1de={'YtksN':_0x5d2c68(0x238),'BIOvL':_0x5d2c68(0x1b8),'ahUpv':_0x5d2c68(0x21c),'ecOiM':function(_0x294965,_0x3e6484){return _0x294965===_0x3e6484;},'bvAev':_0x5d2c68(0x1a6),'CXeVe':function(_0x8f212b,_0x548e7b){return _0x8f212b+_0x548e7b;},'TjuCa':'?caps=','IIgBs':function(_0x4680a6,_0x24f7e2){return _0x4680a6(_0x24f7e2);},'dEfAw':'codeceptjs'};this['preInitialize'](_0x2ee115);if(helper[_0x5d2c68(0x1bd)](this[_0x5d2c68(0x1ec)])){const _0x126363=await helper[_0x5d2c68(0x1c9)](this[_0x5d2c68(0x1ec)]);this[_0x5d2c68(0x1ec)][_0x5d2c68(0x222)]=_0x126363,_0x126363[_0x5d2c68(0x284)]&&helper[_0x5d2c68(0x251)](this[_0x5d2c68(0x1ec)]['browserstackLocal'])&&helper['isTrue'](this['config'][_0x5d2c68(0x265)])&&(this['config'][_0x5d2c68(0x26e)][_0x5d2c68(0x1c4)]=_0x17a1de['YtksN'],this[_0x5d2c68(0x1ec)][_0x5d2c68(0x26e)][_0x17a1de[_0x5d2c68(0x274)]]=_0x126363[_0x5d2c68(0x1fe)]['join'](','),this['config'][_0x5d2c68(0x26e)]['forceLocal']=_0x17a1de[_0x5d2c68(0x224)]),this[_0x5d2c68(0x1ec)]['turboScaleUrl']=_0x126363[_0x5d2c68(0x1dc)],this[_0x5d2c68(0x287)]&&_0x17a1de['ecOiM'](this[_0x5d2c68(0x287)][_0x5d2c68(0x248)](),_0x17a1de[_0x5d2c68(0x19a)])?this['config'][_0x5d2c68(0x25e)]=_0x17a1de[_0x5d2c68(0x237)](_0x126363[_0x5d2c68(0x18b)],_0x17a1de[_0x5d2c68(0x1f3)]):constants[_0x5d2c68(0x281)]=helper[_0x5d2c68(0x205)](this[_0x5d2c68(0x1ec)]),logger[_0x5d2c68(0x1df)](_0x5d2c68(0x1d2)+constants[_0x5d2c68(0x281)]);}helper[_0x5d2c68(0x1f4)](this[_0x5d2c68(0x1ec)]),this[_0x5d2c68(0x228)](),_0x17a1de[_0x5d2c68(0x200)](setPercyFlag,this),await this[_0x5d2c68(0x267)](),![_0x17a1de['dEfAw'],_0x17a1de[_0x5d2c68(0x19a)]][_0x5d2c68(0x236)](this[_0x5d2c68(0x287)])&&!helper[_0x5d2c68(0x1bd)](this[_0x5d2c68(0x1ec)])&&!helper[_0x5d2c68(0x255)]()[_0x5d2c68(0x1d8)]&&await this[_0x5d2c68(0x1ca)]();}async['setupPercy'](){const _0x2520c4=a83_0x414e6c,_0x1452f7={};_0x1452f7[_0x2520c4(0x233)]=function(_0x3aaf80,_0x19a153){return _0x3aaf80===_0x19a153;},_0x1452f7[_0x2520c4(0x1bf)]=_0x2520c4(0x285),_0x1452f7[_0x2520c4(0x1d7)]=_0x2520c4(0x260),_0x1452f7[_0x2520c4(0x1f5)]=_0x2520c4(0x1d9),_0x1452f7[_0x2520c4(0x1e0)]='true',_0x1452f7[_0x2520c4(0x1f7)]=_0x2520c4(0x1fb);const _0x1342e0=_0x1452f7;if(helper[_0x2520c4(0x26f)](this[_0x2520c4(0x1ec)][_0x2520c4(0x225)])&&(!this[_0x2520c4(0x225)]||!this[_0x2520c4(0x225)][_0x2520c4(0x207)]()))try{this['percy']=await percyHelper[_0x2520c4(0x21a)](this[_0x2520c4(0x1ec)]);if(!this[_0x2520c4(0x225)]){process[_0x2520c4(0x22c)][_0x2520c4(0x212)]=_0x1342e0[_0x2520c4(0x1bf)];throw new Error(_0x1342e0[_0x2520c4(0x1d7)]);}logger[_0x2520c4(0x23a)](_0x1342e0[_0x2520c4(0x1f5)]),process[_0x2520c4(0x22c)][_0x2520c4(0x212)]=_0x1342e0[_0x2520c4(0x1e0)];let _0x596680=0x0;const _0x12e425=async()=>{const _0x343874=_0x2520c4;_0x596680++,_0x1342e0[_0x343874(0x233)](_0x596680,0x1)&&await this[_0x343874(0x187)]();};process['on'](_0x1342e0[_0x2520c4(0x1f7)],_0x12e425);}catch(_0x36f17f){process[_0x2520c4(0x22c)][_0x2520c4(0x212)]=_0x1342e0[_0x2520c4(0x1bf)],logger[_0x2520c4(0x1df)](_0x2520c4(0x229)+_0x36f17f);throw new Error(_0x36f17f[_0x2520c4(0x24e)]());}}async['stopPercy'](){const _0x488a79=a83_0x414e6c,_0x1da174={};_0x1da174[_0x488a79(0x25c)]=_0x488a79(0x1a8),_0x1da174[_0x488a79(0x26b)]=_0x488a79(0x206);const _0x5cd583=_0x1da174;if(this[_0x488a79(0x225)]&&this[_0x488a79(0x225)][_0x488a79(0x207)]())try{await percyHelper[_0x488a79(0x187)](this[_0x488a79(0x225)]),logger[_0x488a79(0x23a)](_0x5cd583[_0x488a79(0x25c)]);}catch(_0x28f858){logger['error'](_0x5cd583[_0x488a79(0x26b)],_0x28f858['message']);}}async[a83_0x414e6c(0x267)](){const _0xedfa8e=a83_0x414e6c,_0x48d3e9={};_0x48d3e9['hVRxI']=_0xedfa8e(0x209),_0x48d3e9['rqryG']=_0xedfa8e(0x201);const _0x585219=_0x48d3e9;if(helper[_0xedfa8e(0x1b0)]()&&helper[_0xedfa8e(0x26f)](this[_0xedfa8e(0x1ec)][_0xedfa8e(0x265)])&&(!this[_0xedfa8e(0x265)]||!this[_0xedfa8e(0x265)][_0xedfa8e(0x207)]()))try{if(this[_0xedfa8e(0x1ec)][_0xedfa8e(0x26e)][_0xedfa8e(0x232)]){logger[_0xedfa8e(0x1df)](_0x585219[_0xedfa8e(0x215)]);return;}this[_0xedfa8e(0x265)]=await helper[_0xedfa8e(0x27c)](this['config']),logger['info'](_0x585219['rqryG']);}catch(_0x401f01){logger[_0xedfa8e(0x1df)](_0x401f01);throw new Error(_0x401f01['toString']());}}async['stopBrowserstackLocal'](){const _0x2c9dff=a83_0x414e6c,_0x2d484a={};_0x2d484a[_0x2c9dff(0x1aa)]=_0x2c9dff(0x286),_0x2d484a[_0x2c9dff(0x245)]=_0x2c9dff(0x1c8);const _0x1b7d54=_0x2d484a;if(this[_0x2c9dff(0x265)]&&this[_0x2c9dff(0x265)][_0x2c9dff(0x207)]())try{await helper['stopLocalBinary'](this[_0x2c9dff(0x265)]),logger['info'](_0x1b7d54[_0x2c9dff(0x1aa)]);}catch(_0x4dea9d){logger['error'](_0x1b7d54[_0x2c9dff(0x245)],_0x4dea9d[_0x2c9dff(0x1eb)]);}}async[a83_0x414e6c(0x1ca)](){const _0x20be6b=a83_0x414e6c;return PerformanceTester[_0x20be6b(0x25f)](PerformanceAutEvents[_0x20be6b(0x275)],async()=>{const _0x139669=_0x20be6b;await hubAllocator['allocateHub'](this[_0x139669(0x1ec)]);})();}async[a83_0x414e6c(0x240)](){const _0x24d49a=a83_0x414e6c,_0x4f753c={'KxwLn':function(_0x2c739f,_0x3d974c){return _0x2c739f(_0x3d974c);},'ABgKL':'../ai-sdk-node/bundle','igXni':function(_0x473db1,_0x215fe6,_0x59e294,_0x570ecd,_0x2d46fc,_0x34c45f,_0x59b4b6){return _0x473db1(_0x215fe6,_0x59e294,_0x570ecd,_0x2d46fc,_0x34c45f,_0x59b4b6);},'lJfnt':_0x24d49a(0x1d0),'iLavr':'BrowserstackHealingInitFailed','AygfT':_0x24d49a(0x282),'cuOur':_0x24d49a(0x1f2),'DrNLm':function(_0x5c90e9,_0x3687c5){return _0x5c90e9(_0x3687c5);},'VYNMs':function(_0xb17a66,_0x515b0d){return _0xb17a66===_0x515b0d;},'ITvmR':'true','opxVt':function(_0x7e0e78,_0x455e15){return _0x7e0e78===_0x455e15;},'ePaSq':function(_0x4a641c,_0x272ec9){return _0x4a641c===_0x272ec9;},'GwLsL':function(_0x416f10,_0x46f7be){return _0x416f10===_0x46f7be;},'ejoRd':_0x24d49a(0x242),'MsgAe':function(_0x4d2636,_0x87e634){return _0x4d2636===_0x87e634;},'RJBji':_0x24d49a(0x221),'FEydN':'Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','NEyBH':_0x24d49a(0x203),'NdnHo':function(_0x239bd4,_0xae4b4){return _0x239bd4>=_0xae4b4;},'JdHwg':function(_0x46293a,_0x3c955c){return _0x46293a<_0x3c955c;},'sZGXI':function(_0x2c2c4a,_0x4f5ec6){return _0x2c2c4a>=_0x4f5ec6;},'FMVvM':_0x24d49a(0x1c7),'wCWzp':_0x24d49a(0x1a1),'vihbJ':function(_0x2b3729){return _0x2b3729();}},_0x1b8670=PerformanceTester[_0x24d49a(0x25f)](_0x4f753c['wCWzp'],async()=>{const _0x1408cd=_0x24d49a;try{const _0x484d13=new Date(),_0x4fe977=helper[_0x1408cd(0x1b3)](this[_0x1408cd(0x1ec)]),_0x1b4f1d=_0x4f753c[_0x1408cd(0x210)](require,path['join'](__dirname,_0x4f753c[_0x1408cd(0x196)])),_0x57372e=_0x4f753c[_0x1408cd(0x26c)](timeoutPromise,constants['TCG_AUTH_TIMEOUT'],_0x4f753c['lJfnt'],_0x4f753c['iLavr'],_0x484d13,this[_0x1408cd(0x1ec)],this[_0x1408cd(0x287)]),_0x5cb36d={'tcgUrl':constants[_0x1408cd(0x256)],'sdkVersion':_0x4f753c[_0x1408cd(0x210)](require,_0x4f753c[_0x1408cd(0x268)])[_0x1408cd(0x247)],'methodUsed':_0x4f753c[_0x1408cd(0x1c5)],'proxyConfig':_0x4fe977,'os':os['platform']()};if(_0x4fe977&&_0x4fe977[_0x1408cd(0x257)]){utilities[_0x1408cd(0x1ef)](constants['AI_PROXY_FAILURE'],_0x5cb36d,this[_0x1408cd(0x1ec)],this[_0x1408cd(0x287)]);return;}const _0x2a78ef={};_0x2a78ef[_0x1408cd(0x220)]=_0x4fe977;const _0x2931a2=await Promise[_0x1408cd(0x234)]([_0x1b4f1d['init'](this[_0x1408cd(0x1ec)][_0x1408cd(0x1e3)],this[_0x1408cd(0x1ec)][_0x1408cd(0x1ff)],constants['TCG_URL'],_0x4f753c['DrNLm'](require,_0x4f753c[_0x1408cd(0x268)])['version'],_0x2a78ef)['then'](_0x5c5633=>{const _0x8723de=_0x1408cd;return _0x57372e[_0x8723de(0x218)](),_0x5c5633;}),_0x57372e]);_0x2931a2[_0x1408cd(0x22f)]=_0x4f753c[_0x1408cd(0x1e7)](_0x2931a2['isHealingEnabled'],_0x4f753c[_0x1408cd(0x21b)])||_0x4f753c[_0x1408cd(0x1ed)](_0x2931a2[_0x1408cd(0x22f)],!![]);const _0x5c90dc=_0x4f753c[_0x1408cd(0x1b4)](this[_0x1408cd(0x1ec)][_0x1408cd(0x1d3)],!![])||_0x4f753c[_0x1408cd(0x20a)](this[_0x1408cd(0x1ec)][_0x1408cd(0x1d3)],_0x4f753c['ITvmR']);if(_0x4f753c[_0x1408cd(0x1ed)](_0x2931a2[_0x1408cd(0x1eb)],constants[_0x1408cd(0x231)])&&_0x5c90dc)logger[_0x1408cd(0x23a)](_0x4f753c[_0x1408cd(0x27d)]);else{if(!_0x2931a2[_0x1408cd(0x1c1)]&&_0x4f753c['MsgAe'](_0x2931a2['status'],0x1f7)&&_0x5c90dc)logger[_0x1408cd(0x23a)](_0x4f753c['RJBji']),utilities[_0x1408cd(0x1ef)](constants[_0x1408cd(0x192)],_0x5cb36d,this[_0x1408cd(0x1ec)],this[_0x1408cd(0x287)]);else{if(!_0x2931a2['isAuthenticated']&&_0x5c90dc){logger[_0x1408cd(0x23a)](_0x4f753c[_0x1408cd(0x1be)]);const _0xf82e0e={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x4f753c[_0x1408cd(0x273)](require,_0x4f753c[_0x1408cd(0x268)])[_0x1408cd(0x247)],'methodUsed':_0x4f753c['cuOur'],'proxyConfig':_0x4fe977,'os':os['platform']()};utilities[_0x1408cd(0x1ef)](constants[_0x1408cd(0x1e2)],_0xf82e0e,this[_0x1408cd(0x1ec)],this[_0x1408cd(0x287)]);}else{if(_0x2931a2[_0x1408cd(0x1c1)]&&!_0x2931a2[_0x1408cd(0x22f)]&&_0x5c90dc)logger['info'](_0x4f753c['NEyBH']);else{if(_0x4f753c[_0x1408cd(0x1a2)](_0x2931a2[_0x1408cd(0x266)],0xc8)&&_0x4f753c[_0x1408cd(0x261)](_0x2931a2['status'],0x12c))utilities['fireFunnelTestEvent'](constants['AI_INIT_SUCCESSFUL'],_0x5cb36d,this[_0x1408cd(0x1ec)],this['framework']);else{if(_0x4f753c['sZGXI'](_0x2931a2[_0x1408cd(0x266)],0x190))_0x5cb36d[_0x1408cd(0x266)]=_0x2931a2[_0x1408cd(0x266)],utilities['fireFunnelTestEvent'](constants[_0x1408cd(0x27e)],_0x5cb36d,this[_0x1408cd(0x1ec)],this[_0x1408cd(0x287)]);else!_0x2931a2[_0x1408cd(0x266)]&&utilities[_0x1408cd(0x1ef)](constants[_0x1408cd(0x1fa)],_0x5cb36d,this[_0x1408cd(0x1ec)],this['framework']);}}}}}if(_0x2931a2[_0x1408cd(0x1c1)]&&_0x2931a2[_0x1408cd(0x22f)]){const _0x5ea3f={};_0x5ea3f['tcgAuthConfig']=_0x2931a2;const _0x4e0086=_0x5ea3f;_0x4fe977&&(_0x4e0086[_0x1408cd(0x1f1)]=_0x4fe977),_0x4e0086['framework']=this['framework'],_0x4e0086[_0x1408cd(0x23d)]=this[_0x1408cd(0x1ec)],helper[_0x1408cd(0x22d)](_0x4e0086),logger[_0x1408cd(0x1df)](_0x4f753c[_0x1408cd(0x1cc)]);}}catch(_0x2f6cb8){logger[_0x1408cd(0x1df)](_0x1408cd(0x19b)+(_0x2f6cb8[_0x1408cd(0x1eb)]?_0x2f6cb8[_0x1408cd(0x1eb)]:''));}});await _0x4f753c[_0x24d49a(0x19f)](_0x1b8670);}[a83_0x414e6c(0x228)](){const _0x155884=a83_0x414e6c,_0x37b154={'CRZLG':function(_0x345009,_0x104f6b){return _0x345009(_0x104f6b);},'wbPsY':'./setKeepAlive'};_0x37b154[_0x155884(0x1e5)](require,_0x37b154[_0x155884(0x1c0)])();}[a83_0x414e6c(0x1f8)](){const _0x4e1035=a83_0x414e6c,_0x483b2a={};_0x483b2a[_0x4e1035(0x1b7)]=_0x4e1035(0x199),_0x483b2a[_0x4e1035(0x280)]='uncaughtException';const _0x27ea47=_0x483b2a,_0x2f3f81=_0x501e68=>{const _0x38cb45=_0x4e1035;logger[_0x38cb45(0x1c3)](_0x501e68[_0x38cb45(0x1eb)]),logger[_0x38cb45(0x1df)](util[_0x38cb45(0x21e)](_0x501e68)),this[_0x38cb45(0x19c)][_0x38cb45(0x262)](util[_0x38cb45(0x21e)]('%j',_0x501e68)),PerformanceTester[_0x38cb45(0x24f)](_0x501e68);};process['on'](_0x27ea47[_0x4e1035(0x1b7)],_0x2f3f81),process['on'](_0x27ea47[_0x4e1035(0x280)],_0x2f3f81);}async[a83_0x414e6c(0x21d)](_0x44f538){const _0x2c34dd=a83_0x414e6c,_0x187afa={};_0x187afa[_0x2c34dd(0x1b2)]=_0x2c34dd(0x230),_0x187afa[_0x2c34dd(0x19e)]=function(_0x31ff60,_0x20345b){return _0x31ff60+_0x20345b;},_0x187afa[_0x2c34dd(0x1b1)]='Shutdown\x20triggered\x20by\x20',_0x187afa[_0x2c34dd(0x1da)]=function(_0x4be8d2,_0x35f1a2){return _0x4be8d2+_0x35f1a2;},_0x187afa[_0x2c34dd(0x197)]=_0x2c34dd(0x288);const _0x45f5ed=_0x187afa,_0x1a2396=_0x45f5ed[_0x2c34dd(0x1b2)][_0x2c34dd(0x283)]('|');let _0x1cf11f=0x0;while(!![]){switch(_0x1a2396[_0x1cf11f++]){case'0':logger&&logger[_0x2c34dd(0x204)]();continue;case'1':fileLogger&&fileLogger[_0x2c34dd(0x204)]();continue;case'2':this[_0x2c34dd(0x26d)]=_0x44f538;continue;case'3':await TestHubHandler[_0x2c34dd(0x1b6)](_0x44f538);continue;case'4':await BrowserstackCLI['getInstance']()['stop']();continue;case'5':logger['info'](_0x45f5ed[_0x2c34dd(0x19e)](_0x45f5ed[_0x2c34dd(0x1b1)],_0x44f538));continue;case'6':this[_0x45f5ed[_0x2c34dd(0x1da)](_0x45f5ed[_0x2c34dd(0x197)],_0x44f538)]=!![];continue;case'7':if(this[_0x45f5ed[_0x2c34dd(0x1da)](_0x45f5ed[_0x2c34dd(0x197)],_0x44f538)])return;continue;}break;}}[a83_0x414e6c(0x269)](){const _0x4faf56=a83_0x414e6c,_0x14671e={'MajsR':function(_0x5d682d,_0x2e31bd){return _0x5d682d===_0x2e31bd;},'UTRTS':_0x4faf56(0x27a),'AcoEZ':function(_0x178457,_0x27e609){return _0x178457>_0x27e609;},'iVGEn':function(_0x12909b){return _0x12909b();},'zMWSd':_0x4faf56(0x18f)};let _0x4ff923=0x0;return async()=>{const _0x44b882=_0x4faf56;_0x4ff923++;if(_0x14671e[_0x44b882(0x20c)](_0x4ff923,0x1)){helper[_0x44b882(0x217)](this['framework'])&&await this[_0x44b882(0x243)]();try{logger[_0x44b882(0x1df)](_0x14671e[_0x44b882(0x1d5)]),await BrowserstackCLI[_0x44b882(0x219)]()[_0x44b882(0x1b6)]('1'),await TestHubHandler[_0x44b882(0x1b6)](_0x4ff923);}catch(_0x3483b6){logger[_0x44b882(0x1df)]('Error\x20in\x20sending\x20testhub\x20stop:\x20'+util['format'](_0x3483b6));}PerformanceTester[_0x44b882(0x208)](PerformanceEvents[_0x44b882(0x1d1)]);if(PerformanceTester[_0x44b882(0x259)]()){const {measures:_0x1e1ee9,errors:_0x53bde6}=await PerformanceTester['finalize'](),_0xa72748={};if(_0x1e1ee9&&_0x14671e[_0x44b882(0x1a4)](_0x1e1ee9['length'],0x0)||_0x53bde6&&_0x14671e[_0x44b882(0x1a4)](_0x53bde6[_0x44b882(0x189)],0x0)){const _0x2203c8={};_0x2203c8[_0x44b882(0x252)]=_0x1e1ee9,_0x2203c8[_0x44b882(0x272)]=_0x53bde6,Object[_0x44b882(0x1ae)](_0xa72748,_0x2203c8);}try{const _0x22cd89=await helper[_0x44b882(0x258)](_0xa72748,this[_0x44b882(0x1ec)]);logger[_0x44b882(0x1df)](_0x44b882(0x1b9)+constants[_0x44b882(0x20d)]+_0x44b882(0x211)+_0x22cd89['statusCode']);}catch(_0x12398f){logger[_0x44b882(0x1df)](_0x44b882(0x276)+constants[_0x44b882(0x20d)]+'\x20with\x20error\x20'+util['format'](_0x12398f));}try{fs[_0x44b882(0x263)](path['join'](_0x14671e['iVGEn'](getLogDir),_0x14671e[_0x44b882(0x20e)]),JSON[_0x44b882(0x214)](_0xa72748));}catch(_0x5399ce){logger['debug'](_0x44b882(0x1cd)+_0x5399ce);}}}};}}exports['default']=BrowserStackSetup;