const a83_0x19632c=a83_0x3a09;function a83_0x1c9b(){const _0xbffa70=['RzEpg','fileLogger','proxyUrl','Failed\x20to\x20send\x20data\x20to\x20','info','toLowerCase','SIGBREAK','Eqdmh','639738kLrtMw','uuid','fkpLj','Local\x20binary\x20started\x20successfully','lnfEr','getConfigPath','1527222xPAiaP','CgVqR','wTwMH','setCLICaps','OrvWp','getPackageVersion','browserstackLocal','dZHlg','userName\x20or\x20accessKey\x20is\x20not\x20defined','xXSDt','OHdaz','init','platforms','setBrowserstackInfraFromConfig','TWRBT','fireFunnelTestEvent','BROWSERSTACK_TURBOSCALE','rpOOD','wfObQ','localOptions','No\x20config\x20provided.','then','skipSessionName','localIdentifier','constructor','IWiDh','ats-repeater','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','SDK\x20run\x20started\x20with\x20id:\x20','./performance/performance-tester','writeFileSync','proxy','generateLocalIdentifier','events.json','QDYFm','rFzui','getUserName','measures','allocateHub','./testhub/utils','zLMbo','631697SYvkAh','./performance/constants','BrowserstackHealing.init\x20method\x20timed\x20out','EDS_URL','tcg\x20config\x20setup\x20successful.','message','PSzKI','skipSessionStatus','getInstance','vhfbT','initialize','4.5.0','5Lzvgqu','fuWnP','setProxySettings','format','WTPUT','PVVWi','AUTOLOGCAPTURE_NOTIFICATION','central_scanner','parallelsPerPlatform','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','BclKz','INVALID_INIT_RESP_WITH_USER_IMPACT','getTurboScaleGridDetails','toString','getProxyConfigForTcg','./logger','sXCzw','compareVersions','13fVFAKL','./setKeepAlive','70HvlegC','join','./percy/utils','./helper','rkgTo','stopPercy','length','jHXnl','Data\x20sent\x20successfully\x20to\x20','SDKTestAttempted','NGdsg','Percy\x20stopped','XLXPB','measureWrapper','ikVyq','BROWSERSTACK_PERCY','stopBrowserstackLocal','useW3C','JONKu','TCG_DOWN','5|4|7|6|1|3|0|2','18|9|12|11|2|6|14|4|5|0|3|1|17|16|13|21|8|7|19|10|15|20','../ai-sdk-node/bundle','./utilities','isEnabled','./testhub/testhubHandler','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','close','version','46hnPjeP','intExitHandler','sanitizeCaps','kzcwi','handled','getFinalCaps','captureError','getCentralUser','debug','isAuthenticated','cancel','RfNjK','stopLocalBinary','stringify','sdkRunId','error','FRAMEWORK','beforeExit','warn','Mvtws','stop','bstackConfig','isTrialGrid','setupBrowserstackLocal','skipBinaryInitialisation','kvBBU','setupKeepAlive','startMonitoring','Percy\x20started\x20successfully','AI_INIT_SUCCESSFUL','bOIsz','LpSfR','UPGRADE_REQUIRED','isHealingEnabled','userName','accessKey','../bin/v2/browserstackCLI','pOUCG','CdVVM','cliConfig','setHandlePWError','split','browserStackLocalOptions','getLocalConfig','setUpHubUrl','\x20with\x20response\x20','isBrowserstackInfra','push','dxDHw','tcgAuthConfig','BabHh','eagnW','status','testContextOptions','preInitialize','false','iNDek','PiYmx','aEoHZ','requireSeleniumWebdriverCheck','BWMcl','isNotUndefined','percy','vlHNQ','turboScaleOptions','setLogLevel','turboScale','kQvme','AI_INIT_FAILURE','integrations','default','SIGINT','../bin/utils/constants','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','isTurboScaleSession','bNVcR','forceLocal','end','env','url','Calling\x20Build\x20Stop\x20from\x20ExitHandler','mrXUZ','qLPer','setupTCGAuth','unhandledErrors','ONAse','qmRsZ','SIGHUP','proxyConfig','uncaughtException','envConfig','isTrue','IXRyZ','cbjJQ','8860476rcSbbr','disableAutoCaptureLogs','errorMessage','framework','ayCTp','11670MLEDkH','ynVUd','AhgFM','YOFNt','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','AI_PROXY_FAILURE','9ABcgyw','30NIVrTq','isUndefined','CotiB','setupPercy','AKnIG','vIpdR','win32','hubUrl','selenium-webdriver','readConfig','../hubAllocationMethods','rIgfA','Error\x20in\x20percy\x20setup\x20','handleExceptions','8607064OYcTmX','tKaOE','TCG_URL','selfHeal','3004492txJGXK','path','getHubUrl','race','rnmSP','tVEfX','GxJER','exitHandler','config','getLocalIdentifier','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','Error\x20occured\x20while\x20stopping\x20local\x20binary','turboScaleGridDetails','DoNKL','startPercy','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','YzwOt','SIGTERM','cGCjV','zvNKA','isRunning','true','RtqXK','?caps=','platform'];a83_0x1c9b=function(){return _0xbffa70;};return a83_0x1c9b();}function a83_0x3a09(_0x574e33,_0x507bf4){const _0x1c9bbb=a83_0x1c9b();return a83_0x3a09=function(_0x3a0926,_0x491783){_0x3a0926=_0x3a0926-0xcb;let _0x55b35f=_0x1c9bbb[_0x3a0926];return _0x55b35f;},a83_0x3a09(_0x574e33,_0x507bf4);}(function(_0x45cc56,_0x56d664){const _0x271bd6=a83_0x3a09,_0x23ca94=_0x45cc56();while(!![]){try{const _0x5a093c=parseInt(_0x271bd6(0x1be))/0x1*(-parseInt(_0x271bd6(0x15b))/0x2)+-parseInt(_0x271bd6(0xf5))/0x3+-parseInt(_0x271bd6(0xce))/0x4*(-parseInt(_0x271bd6(0x12a))/0x5)+-parseInt(_0x271bd6(0xef))/0x6*(parseInt(_0x271bd6(0x13e))/0x7)+parseInt(_0x271bd6(0x1d3))/0x8*(parseInt(_0x271bd6(0x1c4))/0x9)+parseInt(_0x271bd6(0x1c5))/0xa*(parseInt(_0x271bd6(0x11e))/0xb)+-parseInt(_0x271bd6(0x1b9))/0xc*(-parseInt(_0x271bd6(0x13c))/0xd);if(_0x5a093c===_0x56d664)break;else _0x23ca94['push'](_0x23ca94['shift']());}catch(_0x4c0eb1){_0x23ca94['push'](_0x23ca94['shift']());}}}(a83_0x1c9b,0xda3fa));const util=require('util'),os=require('os'),path=require(a83_0x19632c(0xcf)),{v4:uuidv4}=require(a83_0x19632c(0xf0)),fs=require('fs'),constants=require(a83_0x19632c(0x1a3)),logger=require(a83_0x19632c(0x139))['winstonLogger'],fileLogger=require(a83_0x19632c(0x139))[a83_0x19632c(0xe8)],{getLogDir}=require('./logger'),helper=require(a83_0x19632c(0x141)),utilities=require(a83_0x19632c(0x155)),percyHelper=require(a83_0x19632c(0x140)),hubAllocator=require(a83_0x19632c(0x1cf)),PerformanceTester=require(a83_0x19632c(0x112)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a83_0x19632c(0x11f)),{setPercyFlag}=require(a83_0x19632c(0x11c)),TestHubHandler=require(a83_0x19632c(0x157)),timeoutPromise=require('./timeoutPromise'),BrowserstackCLI=require(a83_0x19632c(0x17f));class BrowserStackSetup{constructor(_0x1e05a4,_0x52a6a8){const _0x5ed695=a83_0x19632c,_0xe27890={'cGCjV':_0x5ed695(0x153),'tVEfX':function(_0x1718cf){return _0x1718cf();},'rpOOD':_0x5ed695(0x109)},_0x1c48e4=_0xe27890[_0x5ed695(0xe0)][_0x5ed695(0x184)]('|');let _0x3ffd99=0x0;while(!![]){switch(_0x1c48e4[_0x3ffd99++]){case'0':this['sdkRunId']=_0xe27890[_0x5ed695(0xd3)](uuidv4);continue;case'1':global[_0x5ed695(0x1bc)]=_0x52a6a8;continue;case'2':this[_0x5ed695(0xd6)]=helper[_0x5ed695(0x1ce)](helper[_0x5ed695(0xf4)](_0x1e05a4));continue;case'3':this[_0x5ed695(0x1bc)]=_0x52a6a8;continue;case'4':this[_0x5ed695(0xd6)][_0x5ed695(0x190)]=this[_0x5ed695(0xd6)][_0x5ed695(0x190)]||{};continue;case'5':this[_0x5ed695(0x1bb)]={};continue;case'6':this[_0x5ed695(0x182)]=helper[_0x5ed695(0xf8)](_0x1e05a4);continue;case'7':this['config'][_0x5ed695(0x190)][_0x5ed695(0x10b)]=!helper[_0x5ed695(0x189)]()||helper[_0x5ed695(0x1b6)](this[_0x5ed695(0xd6)][_0x5ed695(0x190)][_0x5ed695(0x10b)]);continue;case'8':this['config'][_0x5ed695(0x190)][_0x5ed695(0x125)]=!helper[_0x5ed695(0x189)]()||helper['isTrue'](this['config'][_0x5ed695(0x190)][_0x5ed695(0x125)]);continue;case'9':this[_0x5ed695(0x1b5)]=helper['setEnvCaps']();continue;case'10':helper['setLogDir'](this[_0x5ed695(0xd6)]);continue;case'11':this['percy']=null;continue;case'12':this[_0x5ed695(0xfb)]=null;continue;case'13':helper[_0x5ed695(0x102)](this[_0x5ed695(0xd6)],this['cliConfig']);continue;case'14':this['config']['platforms']=this[_0x5ed695(0xd6)][_0x5ed695(0x101)]||[];continue;case'15':helper[_0x5ed695(0x19c)](this[_0x5ed695(0xd6)],this['cliConfig'],this['envConfig']);continue;case'16':if(this[_0x5ed695(0xd6)][_0x5ed695(0x16a)])throw new Error(this[_0x5ed695(0xd6)][_0x5ed695(0x16a)]);continue;case'17':if(helper[_0x5ed695(0x1c6)](this['config']))throw new Error(_0xe27890[_0x5ed695(0x106)]);continue;case'18':this[_0x5ed695(0x1af)]=[];continue;case'19':helper[_0x5ed695(0x160)](this[_0x5ed695(0xd6)],this[_0x5ed695(0x182)],this[_0x5ed695(0x1b5)]);continue;case'20':PerformanceTester[_0x5ed695(0x176)]();continue;case'21':helper['setCredentialsFromYmlConfig'](this[_0x5ed695(0xd6)]);continue;}break;}}[a83_0x19632c(0x191)](_0x2ff1ee){const _0x2b857d=a83_0x19632c,_0x452ea8={'kvBBU':_0x2b857d(0xfd),'NGdsg':function(_0x407e9c,_0xdb14c3){return _0x407e9c===_0xdb14c3;},'fuWnP':function(_0x581406,_0x1f5f6c){return _0x581406===_0x1f5f6c;},'OHdaz':_0x2b857d(0x1a0),'AhgFM':_0x2b857d(0x147),'dxDHw':function(_0x270a91,_0x2ad605){return _0x270a91<_0x2ad605;},'tKaOE':function(_0x30a790,_0x2a897f){return _0x30a790(_0x2a897f);},'TWRBT':_0x2b857d(0x1cd),'sXCzw':_0x2b857d(0x129),'CdVVM':_0x2b857d(0x158),'iUdTW':_0x2b857d(0x1a4),'jWVea':_0x2b857d(0xdf),'bNVcR':_0x2b857d(0x1a2),'lnfEr':_0x2b857d(0x1b2),'RAVJV':function(_0x366001,_0x1b9e89){return _0x366001!==_0x1b9e89;},'RtqXK':_0x2b857d(0x1cb),'BclKz':'SIGABRT','piBYy':'SIGQUIT','IwkMV':_0x2b857d(0xed),'xsuAF':_0x2b857d(0x16c)},_0x3c2c7e=this[_0x2b857d(0x1bc)];global[_0x2b857d(0xd6)]=this[_0x2b857d(0xd6)],helper[_0x2b857d(0x15d)](this[_0x2b857d(0xd6)]),this['killSignal']=null,global[_0x2b857d(0x169)]=this[_0x2b857d(0x169)],logger['info'](_0x2b857d(0x111)+this[_0x2b857d(0x169)]),!this[_0x2b857d(0xd6)][_0x2b857d(0x185)]&&(this[_0x2b857d(0xd6)][_0x2b857d(0x185)]=this[_0x2b857d(0xd6)][_0x2b857d(0x108)]||{});if(helper['isUndefined'](helper[_0x2b857d(0x119)](this[_0x2b857d(0xd6)]))||helper['isUndefined'](helper['getAccessKey'](this[_0x2b857d(0xd6)])))throw new Error(_0x452ea8[_0x2b857d(0x174)]);helper[_0x2b857d(0x186)](this[_0x2b857d(0xd6)])&&helper['isUndefined'](helper[_0x2b857d(0xd7)](this[_0x2b857d(0xd6)]))&&(!helper[_0x2b857d(0x1c6)](this[_0x2b857d(0xd6)][_0x2b857d(0x185)])&&_0x452ea8[_0x2b857d(0x148)](this[_0x2b857d(0xd6)][_0x2b857d(0x185)][_0x2b857d(0x10d)],Object)?!helper[_0x2b857d(0x1b6)](this[_0x2b857d(0xd6)][_0x2b857d(0x185)][_0x2b857d(0x173)])&&(this[_0x2b857d(0xd6)][_0x2b857d(0x185)][_0x2b857d(0x10c)]=helper['generateLocalIdentifier']()):this[_0x2b857d(0xd6)][_0x2b857d(0x185)]={'localIdentifier':helper[_0x2b857d(0x115)]()});this['config'][_0x2b857d(0x185)][_0x2b857d(0x173)]=helper[_0x2b857d(0x1b6)](this[_0x2b857d(0xd6)]['browserStackLocalOptions'][_0x2b857d(0x173)]),helper[_0x2b857d(0x183)](this['config']);if(_0x452ea8[_0x2b857d(0x12b)](_0x3c2c7e,_0x452ea8[_0x2b857d(0xff)]))return;this[_0x2b857d(0x1d2)]();process[_0x2b857d(0x1a9)][_0x2b857d(0x105)]&&(this[_0x2b857d(0xd6)][_0x2b857d(0x19d)]=helper['isTrue'](process[_0x2b857d(0x1a9)]['BROWSERSTACK_TURBOSCALE']),this[_0x2b857d(0xd6)]['turboScaleOptions']=this[_0x2b857d(0xd6)][_0x2b857d(0x19b)]||{});helper[_0x2b857d(0x1a5)](this['config'])&&(process[_0x2b857d(0x1a9)][_0x2b857d(0x105)]=!![]);if(!helper[_0x2b857d(0x189)]()){try{process[_0x2b857d(0x1a9)]['FRAMEWORK']=_0x3c2c7e,utilities[_0x2b857d(0x104)](_0x452ea8[_0x2b857d(0x1c0)],{},this[_0x2b857d(0xd6)],this[_0x2b857d(0x1bc)]);}catch(_0x124fab){logger[_0x2b857d(0x163)](_0x2b857d(0x1c2)+_0x124fab);}return;}helper[_0x2b857d(0x196)](_0x3c2c7e)&&(_0x452ea8[_0x2b857d(0x18b)](_0x452ea8[_0x2b857d(0xcb)](parseInt,helper[_0x2b857d(0xfa)](_0x452ea8[_0x2b857d(0x103)])),0x3)&&(this[_0x2b857d(0xd6)][_0x2b857d(0x14f)]=![]),_0x452ea8[_0x2b857d(0x148)](helper[_0x2b857d(0x13b)](helper[_0x2b857d(0xfa)](_0x452ea8[_0x2b857d(0x103)]),_0x452ea8[_0x2b857d(0x13a)]),0x1)&&(this[_0x2b857d(0xd6)][_0x2b857d(0x14f)]=!![]));(helper[_0x2b857d(0x1c6)](this[_0x2b857d(0xd6)]['platforms'])||helper[_0x2b857d(0x1c6)](this['config'][_0x2b857d(0x101)][_0x2b857d(0x144)]))&&(helper[_0x2b857d(0x1c6)](this[_0x2b857d(0xd6)][_0x2b857d(0x132)])?logger['info'](_0x452ea8[_0x2b857d(0x181)]):logger[_0x2b857d(0x16d)](_0x452ea8['iUdTW']),this[_0x2b857d(0xd6)]['platforms']=[]);!this['config'][_0x2b857d(0x190)]&&(this[_0x2b857d(0xd6)]['testContextOptions']={});try{process['env'][_0x2b857d(0x16b)]=_0x2ff1ee['_'][0x0],utilities[_0x2b857d(0x104)](_0x452ea8[_0x2b857d(0x1c0)],{},this[_0x2b857d(0xd6)],this[_0x2b857d(0x1bc)]);}catch(_0x534158){logger[_0x2b857d(0x163)](_0x2b857d(0x1c2)+_0x534158);}!this[_0x2b857d(0xd6)][_0x2b857d(0x1ba)]&&logger[_0x2b857d(0xeb)](constants[_0x2b857d(0x130)]),this[_0x2b857d(0x15c)]=this[_0x2b857d(0x15c)]['bind'](this),process['on'](_0x452ea8['jWVea'],this[_0x2b857d(0x15c)]),process['on'](_0x452ea8[_0x2b857d(0x1a6)],this[_0x2b857d(0x15c)]),process['on'](_0x452ea8[_0x2b857d(0xf3)],this[_0x2b857d(0x15c)]),_0x452ea8['RAVJV'](process[_0x2b857d(0xe6)],_0x452ea8[_0x2b857d(0xe4)])?(process['on'](_0x452ea8[_0x2b857d(0x134)],this['intExitHandler']),process['on'](_0x452ea8['piBYy'],this[_0x2b857d(0x15c)])):process['on'](_0x452ea8['IwkMV'],this['intExitHandler']),process['on'](_0x452ea8['xsuAF'],this[_0x2b857d(0xd5)]());}async[a83_0x19632c(0x128)](_0x5bd908){const _0x577fbb=a83_0x19632c,_0x1ab9b6={'aDWSI':_0x577fbb(0x10f),'oidxn':'custom-repeater','wTwMH':_0x577fbb(0xe3),'RzEpg':function(_0x88b837,_0x802911){return _0x88b837===_0x802911;},'xXSDt':'playwright','rFzui':function(_0xda97a,_0xe683c2){return _0xda97a+_0xe683c2;},'IXRyZ':_0x577fbb(0xe5),'GxJER':function(_0xf76d2c,_0x958ba3){return _0xf76d2c(_0x958ba3);},'ynVUd':'codeceptjs'};this[_0x577fbb(0x191)](_0x5bd908);if(helper[_0x577fbb(0x1a5)](this[_0x577fbb(0xd6)])){const _0x2fc846=await helper[_0x577fbb(0x136)](this['config']);this[_0x577fbb(0xd6)][_0x577fbb(0xda)]=_0x2fc846,_0x2fc846[_0x577fbb(0x171)]&&helper[_0x577fbb(0x198)](this[_0x577fbb(0xd6)][_0x577fbb(0xfb)])&&helper[_0x577fbb(0x1b6)](this['config'][_0x577fbb(0xfb)])&&(this[_0x577fbb(0xd6)][_0x577fbb(0x185)][_0x577fbb(0x10c)]=_0x1ab9b6['aDWSI'],this[_0x577fbb(0xd6)][_0x577fbb(0x185)][_0x1ab9b6['oidxn']]=_0x2fc846['customRepeaters'][_0x577fbb(0x13f)](','),this[_0x577fbb(0xd6)]['browserStackLocalOptions'][_0x577fbb(0x1a7)]=_0x1ab9b6[_0x577fbb(0xf7)]),this[_0x577fbb(0xd6)]['turboScaleUrl']=_0x2fc846[_0x577fbb(0x1aa)],this['framework']&&_0x1ab9b6[_0x577fbb(0xe7)](this[_0x577fbb(0x1bc)][_0x577fbb(0xec)](),_0x1ab9b6[_0x577fbb(0xfe)])?this[_0x577fbb(0xd6)]['turboScaleUrl']=_0x1ab9b6[_0x577fbb(0x118)](_0x2fc846['playwrightUrl'],_0x1ab9b6[_0x577fbb(0x1b7)]):constants['hubUrl']=helper[_0x577fbb(0xd0)](this[_0x577fbb(0xd6)]),logger[_0x577fbb(0x163)](_0x577fbb(0x133)+constants[_0x577fbb(0x1cc)]);}helper[_0x577fbb(0x12c)](this[_0x577fbb(0xd6)]),this[_0x577fbb(0x175)](),_0x1ab9b6[_0x577fbb(0xd4)](setPercyFlag,this),await this['setupBrowserstackLocal'](),![_0x1ab9b6[_0x577fbb(0x1bf)],_0x1ab9b6[_0x577fbb(0xfe)]]['includes'](this[_0x577fbb(0x1bc)])&&!helper['isTurboScaleSession'](this[_0x577fbb(0xd6)])&&!helper[_0x577fbb(0x162)]()[_0x577fbb(0x131)]&&await this[_0x577fbb(0x187)]();}async[a83_0x19632c(0x1c8)](){const _0x324d8e=a83_0x19632c,_0x24fd3b={};_0x24fd3b[_0x324d8e(0xf1)]=function(_0x4066c9,_0x5f345c){return _0x4066c9===_0x5f345c;},_0x24fd3b[_0x324d8e(0x150)]=_0x324d8e(0x192),_0x24fd3b[_0x324d8e(0x16e)]=_0x324d8e(0xd8),_0x24fd3b[_0x324d8e(0x1b8)]=_0x324d8e(0x177),_0x24fd3b[_0x324d8e(0x1b1)]='true',_0x24fd3b['jHXnl']=_0x324d8e(0x16c);const _0x2560aa=_0x24fd3b;if(helper[_0x324d8e(0x1b6)](this['config'][_0x324d8e(0x199)])&&(!this['percy']||!this[_0x324d8e(0x199)]['isRunning']()))try{this[_0x324d8e(0x199)]=await percyHelper[_0x324d8e(0xdc)](this[_0x324d8e(0xd6)]);if(!this[_0x324d8e(0x199)]){process[_0x324d8e(0x1a9)][_0x324d8e(0x14d)]=_0x2560aa[_0x324d8e(0x150)];throw new Error(_0x2560aa[_0x324d8e(0x16e)]);}logger[_0x324d8e(0xeb)](_0x2560aa['cbjJQ']),process[_0x324d8e(0x1a9)][_0x324d8e(0x14d)]=_0x2560aa[_0x324d8e(0x1b1)];let _0x59286d=0x0;const _0x3d391f=async()=>{const _0xa010d1=_0x324d8e;_0x59286d++,_0x2560aa[_0xa010d1(0xf1)](_0x59286d,0x1)&&await this['stopPercy']();};process['on'](_0x2560aa[_0x324d8e(0x145)],_0x3d391f);}catch(_0x1b58e4){process[_0x324d8e(0x1a9)][_0x324d8e(0x14d)]=_0x2560aa[_0x324d8e(0x150)],logger['debug'](_0x324d8e(0x1d1)+_0x1b58e4);throw new Error(_0x1b58e4[_0x324d8e(0x137)]());}}async[a83_0x19632c(0x143)](){const _0x26bfcd=a83_0x19632c,_0x2cf84b={};_0x2cf84b[_0x26bfcd(0x124)]=_0x26bfcd(0x149),_0x2cf84b['Eqdmh']='Error\x20occured\x20while\x20stopping\x20percy';const _0x5277f6=_0x2cf84b;if(this['percy']&&this[_0x26bfcd(0x199)][_0x26bfcd(0xe2)]())try{await percyHelper[_0x26bfcd(0x143)](this['percy']),logger[_0x26bfcd(0xeb)](_0x5277f6[_0x26bfcd(0x124)]);}catch(_0x2be44f){logger[_0x26bfcd(0x16a)](_0x5277f6[_0x26bfcd(0xee)],_0x2be44f[_0x26bfcd(0x123)]);}}async[a83_0x19632c(0x172)](){const _0x47c380=a83_0x19632c,_0x128b2b={};_0x128b2b['PiYmx']='Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled',_0x128b2b[_0x47c380(0x12e)]=_0x47c380(0xf2);const _0x240874=_0x128b2b;if(helper[_0x47c380(0x189)]()&&helper[_0x47c380(0x1b6)](this[_0x47c380(0xd6)][_0x47c380(0xfb)])&&(!this[_0x47c380(0xfb)]||!this[_0x47c380(0xfb)][_0x47c380(0xe2)]()))try{if(this[_0x47c380(0xd6)][_0x47c380(0x185)]['skipBinaryInitialisation']){logger[_0x47c380(0x163)](_0x240874[_0x47c380(0x194)]);return;}this[_0x47c380(0xfb)]=await helper['startLocalBinary'](this[_0x47c380(0xd6)]),logger[_0x47c380(0xeb)](_0x240874[_0x47c380(0x12e)]);}catch(_0x20d3f6){logger[_0x47c380(0x163)](_0x20d3f6);throw new Error(_0x20d3f6[_0x47c380(0x137)]());}}async[a83_0x19632c(0x14e)](){const _0x1c74e7=a83_0x19632c,_0x50c63e={};_0x50c63e[_0x1c74e7(0x179)]='Local\x20binary\x20stopped',_0x50c63e[_0x1c74e7(0x127)]=_0x1c74e7(0xd9);const _0x4f25b4=_0x50c63e;if(this['browserstackLocal']&&this[_0x1c74e7(0xfb)][_0x1c74e7(0xe2)]())try{await helper[_0x1c74e7(0x167)](this['browserstackLocal']),logger[_0x1c74e7(0xeb)](_0x4f25b4[_0x1c74e7(0x179)]);}catch(_0x481b06){logger['error'](_0x4f25b4['vhfbT'],_0x481b06[_0x1c74e7(0x123)]);}}async[a83_0x19632c(0x187)](){const _0x7ce0a=a83_0x19632c;return PerformanceTester[_0x7ce0a(0x14b)](PerformanceAutEvents['HUB_MANAGEMENT'],async()=>{const _0x1d2ccb=_0x7ce0a;await hubAllocator[_0x1d2ccb(0x11b)](this[_0x1d2ccb(0xd6)]);})();}async[a83_0x19632c(0x1ae)](){const _0x570592=a83_0x19632c,_0x20b004={'rIgfA':function(_0x2262b5,_0x418839){return _0x2262b5(_0x418839);},'ayCTp':_0x570592(0x154),'yQnsG':function(_0x8504b0,_0x5dac3f,_0x4a4ab9,_0x5a2ed5,_0x44a4ea,_0x2720f8,_0x53898e){return _0x8504b0(_0x5dac3f,_0x4a4ab9,_0x5a2ed5,_0x44a4ea,_0x2720f8,_0x53898e);},'OrvWp':_0x570592(0x120),'LpSfR':'BrowserstackHealingInitFailed','kzcwi':function(_0xd5fa6f,_0x46eda5){return _0xd5fa6f(_0x46eda5);},'BabHh':'../../package.json','zvNKA':'BrowserstackHealing.init','mrXUZ':function(_0x5ee506,_0x1990f9){return _0x5ee506(_0x1990f9);},'vIpdR':function(_0x3a91d7,_0x4eb7b7){return _0x3a91d7===_0x4eb7b7;},'YOFNt':'true','zLMbo':function(_0x46db3b,_0x50dad2){return _0x46db3b===_0x50dad2;},'BWMcl':function(_0x15c904,_0x1639cf){return _0x15c904===_0x1639cf;},'qLPer':function(_0x430883,_0x38dff1){return _0x430883===_0x38dff1;},'QDYFm':_0x570592(0x110),'AKnIG':'Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','rkgTo':'Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','pOUCG':_0x570592(0xdd),'CotiB':function(_0x4e9658,_0xf99e62){return _0x4e9658>=_0xf99e62;},'XLXPB':function(_0x387856,_0x48a394){return _0x387856<_0x48a394;},'CgVqR':_0x570592(0x122),'wfObQ':'aiHeal:tcgAuth','iNDek':function(_0x3c5edd){return _0x3c5edd();}},_0x5da92d=PerformanceTester[_0x570592(0x14b)](_0x20b004[_0x570592(0x107)],async()=>{const _0x42d134=_0x570592;try{const _0x58d475=new Date(),_0x356a0a=helper[_0x42d134(0x138)](this['config']),_0x147fa9=_0x20b004[_0x42d134(0x1d0)](require,path[_0x42d134(0x13f)](__dirname,_0x20b004[_0x42d134(0x1bd)])),_0x4dee8e=_0x20b004['yQnsG'](timeoutPromise,constants['TCG_AUTH_TIMEOUT'],_0x20b004[_0x42d134(0xf9)],_0x20b004[_0x42d134(0x17a)],_0x58d475,this[_0x42d134(0xd6)],this['framework']),_0x55f4ce={'tcgUrl':constants[_0x42d134(0xcc)],'sdkVersion':_0x20b004[_0x42d134(0x15e)](require,_0x20b004['BabHh'])[_0x42d134(0x15a)],'methodUsed':_0x20b004[_0x42d134(0xe1)],'proxyConfig':_0x356a0a,'os':os[_0x42d134(0xe6)]()};if(_0x356a0a&&_0x356a0a[_0x42d134(0xe9)]){utilities['fireFunnelTestEvent'](constants[_0x42d134(0x1c3)],_0x55f4ce,this['config'],this[_0x42d134(0x1bc)]);return;}const _0x5134f2={};_0x5134f2[_0x42d134(0x114)]=_0x356a0a;const _0x5cc4f0=await Promise[_0x42d134(0xd1)]([_0x147fa9[_0x42d134(0x100)](this['config'][_0x42d134(0x17e)],this[_0x42d134(0xd6)][_0x42d134(0x17d)],constants[_0x42d134(0xcc)],_0x20b004[_0x42d134(0x1ac)](require,_0x20b004[_0x42d134(0x18d)])[_0x42d134(0x15a)],_0x5134f2)[_0x42d134(0x10a)](_0x2a6562=>{const _0x27a0e0=_0x42d134;return _0x4dee8e[_0x27a0e0(0x165)](),_0x2a6562;}),_0x4dee8e]);_0x5cc4f0[_0x42d134(0x17c)]=_0x20b004[_0x42d134(0x1ca)](_0x5cc4f0[_0x42d134(0x17c)],_0x20b004['YOFNt'])||_0x20b004[_0x42d134(0x11d)](_0x5cc4f0[_0x42d134(0x17c)],!![]);const _0x3621f5=_0x20b004[_0x42d134(0x197)](this[_0x42d134(0xd6)]['selfHeal'],!![])||_0x20b004[_0x42d134(0x1ad)](this[_0x42d134(0xd6)][_0x42d134(0xcd)],_0x20b004[_0x42d134(0x1c1)]);if(_0x20b004[_0x42d134(0x11d)](_0x5cc4f0[_0x42d134(0x123)],constants[_0x42d134(0x17b)])&&_0x3621f5)logger['info'](_0x20b004[_0x42d134(0x117)]);else{if(!_0x5cc4f0[_0x42d134(0x164)]&&_0x20b004['BWMcl'](_0x5cc4f0['status'],0x1f7)&&_0x3621f5)logger[_0x42d134(0xeb)](_0x20b004[_0x42d134(0x1c9)]),utilities[_0x42d134(0x104)](constants[_0x42d134(0x151)],_0x55f4ce,this[_0x42d134(0xd6)],this[_0x42d134(0x1bc)]);else{if(!_0x5cc4f0[_0x42d134(0x164)]&&_0x3621f5){logger['info'](_0x20b004[_0x42d134(0x142)]);const _0x180b0d={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x20b004['kzcwi'](require,_0x20b004[_0x42d134(0x18d)])[_0x42d134(0x15a)],'methodUsed':_0x20b004[_0x42d134(0xe1)],'proxyConfig':_0x356a0a,'os':os[_0x42d134(0xe6)]()};utilities['fireFunnelTestEvent'](constants['TCG_AUTH_FAILURE'],_0x180b0d,this[_0x42d134(0xd6)],this[_0x42d134(0x1bc)]);}else{if(_0x5cc4f0[_0x42d134(0x164)]&&!_0x5cc4f0[_0x42d134(0x17c)]&&_0x3621f5)logger[_0x42d134(0xeb)](_0x20b004[_0x42d134(0x180)]);else{if(_0x20b004[_0x42d134(0x1c7)](_0x5cc4f0[_0x42d134(0x18f)],0xc8)&&_0x20b004[_0x42d134(0x14a)](_0x5cc4f0[_0x42d134(0x18f)],0x12c))utilities[_0x42d134(0x104)](constants[_0x42d134(0x178)],_0x55f4ce,this[_0x42d134(0xd6)],this[_0x42d134(0x1bc)]);else{if(_0x20b004[_0x42d134(0x1c7)](_0x5cc4f0[_0x42d134(0x18f)],0x190))_0x55f4ce[_0x42d134(0x18f)]=_0x5cc4f0[_0x42d134(0x18f)],utilities[_0x42d134(0x104)](constants[_0x42d134(0x19f)],_0x55f4ce,this[_0x42d134(0xd6)],this[_0x42d134(0x1bc)]);else!_0x5cc4f0[_0x42d134(0x18f)]&&utilities[_0x42d134(0x104)](constants[_0x42d134(0x135)],_0x55f4ce,this['config'],this[_0x42d134(0x1bc)]);}}}}}if(_0x5cc4f0[_0x42d134(0x164)]&&_0x5cc4f0[_0x42d134(0x17c)]){const _0x20cdea={};_0x20cdea[_0x42d134(0x18c)]=_0x5cc4f0;const _0x10e69c=_0x20cdea;_0x356a0a&&(_0x10e69c[_0x42d134(0x1b3)]=_0x356a0a),_0x10e69c[_0x42d134(0x1bc)]=this['framework'],_0x10e69c[_0x42d134(0x170)]=this[_0x42d134(0xd6)],helper['setupTcgConfigFile'](_0x10e69c),logger[_0x42d134(0x163)](_0x20b004[_0x42d134(0xf6)]);}}catch(_0x48818e){logger[_0x42d134(0x163)]('Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20'+(_0x48818e[_0x42d134(0x123)]?_0x48818e[_0x42d134(0x123)]:''));}});await _0x20b004[_0x570592(0x193)](_0x5da92d);}[a83_0x19632c(0x175)](){const _0x6c44b0=a83_0x19632c,_0x1974b5={'RfNjK':function(_0x58c2c7,_0x39cfd4){return _0x58c2c7(_0x39cfd4);},'aEoHZ':_0x6c44b0(0x13d)};_0x1974b5[_0x6c44b0(0x166)](require,_0x1974b5[_0x6c44b0(0x195)])();}[a83_0x19632c(0x1d2)](){const _0x418b81=a83_0x19632c,_0x585243={};_0x585243['YzwOt']='unhandledRejection',_0x585243['eagnW']=_0x418b81(0x1b4);const _0x4bab62=_0x585243,_0x5d274a=_0x564473=>{const _0x3a0366=_0x418b81;logger[_0x3a0366(0x16a)](_0x564473[_0x3a0366(0x123)]),logger[_0x3a0366(0x163)](util[_0x3a0366(0x12d)](_0x564473)),this[_0x3a0366(0x1af)][_0x3a0366(0x18a)](util['format']('%j',_0x564473)),PerformanceTester[_0x3a0366(0x161)](_0x564473);};process['on'](_0x4bab62[_0x418b81(0xde)],_0x5d274a),process['on'](_0x4bab62[_0x418b81(0x18e)],_0x5d274a);}async[a83_0x19632c(0x15c)](_0x26d25c){const _0x29244c=a83_0x19632c,_0x116e26={};_0x116e26[_0x29244c(0xfc)]=_0x29244c(0x152),_0x116e26[_0x29244c(0x12f)]=function(_0x234cb2,_0x1fc817){return _0x234cb2+_0x1fc817;},_0x116e26[_0x29244c(0x10e)]='Shutdown\x20triggered\x20by\x20',_0x116e26['DoNKL']=function(_0x563002,_0x1aa822){return _0x563002+_0x1aa822;},_0x116e26[_0x29244c(0x19a)]=_0x29244c(0x15f);const _0x4f1a45=_0x116e26,_0x5168fc=_0x4f1a45[_0x29244c(0xfc)][_0x29244c(0x184)]('|');let _0xf5df22=0x0;while(!![]){switch(_0x5168fc[_0xf5df22++]){case'0':await BrowserstackCLI[_0x29244c(0x126)]()[_0x29244c(0x16f)]();continue;case'1':logger[_0x29244c(0xeb)](_0x4f1a45[_0x29244c(0x12f)](_0x4f1a45[_0x29244c(0x10e)],_0x26d25c));continue;case'2':await TestHubHandler[_0x29244c(0x16f)](_0x26d25c);continue;case'3':this['killSignal']=_0x26d25c;continue;case'4':fileLogger&&fileLogger[_0x29244c(0x159)]();continue;case'5':logger&&logger[_0x29244c(0x159)]();continue;case'6':this[_0x4f1a45[_0x29244c(0xdb)](_0x4f1a45['vlHNQ'],_0x26d25c)]=!![];continue;case'7':if(this[_0x4f1a45[_0x29244c(0xdb)](_0x4f1a45[_0x29244c(0x19a)],_0x26d25c)])return;continue;}break;}}[a83_0x19632c(0xd5)](){const _0x36499a=a83_0x19632c,_0x52d18b={'rnmSP':function(_0x75933d,_0x2ea1aa){return _0x75933d===_0x2ea1aa;},'ikVyq':_0x36499a(0x1ab),'ONAse':function(_0x51017c,_0x495731){return _0x51017c>_0x495731;},'cZjxt':function(_0xe7bf33){return _0xe7bf33();},'kQvme':_0x36499a(0x116)};let _0x306afe=0x0;return async()=>{const _0x43e6aa=_0x36499a;_0x306afe++;if(_0x52d18b[_0x43e6aa(0xd2)](_0x306afe,0x1)){helper['checkStopLocalBinaryOnExit'](this[_0x43e6aa(0x1bc)])&&await this[_0x43e6aa(0x14e)]();try{logger[_0x43e6aa(0x163)](_0x52d18b[_0x43e6aa(0x14c)]),await BrowserstackCLI[_0x43e6aa(0x126)]()[_0x43e6aa(0x16f)]('1'),await TestHubHandler[_0x43e6aa(0x16f)](_0x306afe);}catch(_0x3508a0){logger[_0x43e6aa(0x163)]('Error\x20in\x20sending\x20testhub\x20stop:\x20'+util['format'](_0x3508a0));}PerformanceTester[_0x43e6aa(0x1a8)](PerformanceEvents['SDK_CLEANUP']);if(PerformanceTester[_0x43e6aa(0x156)]()){const {measures:_0x449159,errors:_0x470875}=await PerformanceTester['finalize'](),_0x4b53b8={};if(_0x449159&&_0x52d18b['ONAse'](_0x449159[_0x43e6aa(0x144)],0x0)||_0x470875&&_0x52d18b[_0x43e6aa(0x1b0)](_0x470875[_0x43e6aa(0x144)],0x0)){const _0xcb3716={};_0xcb3716[_0x43e6aa(0x11a)]=_0x449159,_0xcb3716['exceptions']=_0x470875,Object['assign'](_0x4b53b8,_0xcb3716);}try{const _0x5116f8=await helper['sendToEDS'](_0x4b53b8,this[_0x43e6aa(0xd6)]);logger[_0x43e6aa(0x163)](_0x43e6aa(0x146)+constants[_0x43e6aa(0x121)]+_0x43e6aa(0x188)+_0x5116f8['statusCode']);}catch(_0x197b68){logger['debug'](_0x43e6aa(0xea)+constants['EDS_URL']+'\x20with\x20error\x20'+util[_0x43e6aa(0x12d)](_0x197b68));}try{fs[_0x43e6aa(0x113)](path[_0x43e6aa(0x13f)](_0x52d18b['cZjxt'](getLogDir),_0x52d18b[_0x43e6aa(0x19e)]),JSON[_0x43e6aa(0x168)](_0x4b53b8));}catch(_0x11ac0b){logger[_0x43e6aa(0x163)]('Error\x20in\x20writing\x20events\x20to\x20file\x20'+_0x11ac0b);}}}};}}exports[a83_0x19632c(0x1a1)]=BrowserStackSetup;