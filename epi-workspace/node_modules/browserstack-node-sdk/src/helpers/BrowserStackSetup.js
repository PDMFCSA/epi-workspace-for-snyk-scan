const a81_0x5005ba=a81_0x3a40;(function(_0xa41b19,_0x599e72){const _0x5edf97=a81_0x3a40,_0x96bfe6=_0xa41b19();while(!![]){try{const _0x2ed880=parseInt(_0x5edf97(0x208))/0x1*(-parseInt(_0x5edf97(0x27b))/0x2)+-parseInt(_0x5edf97(0x29d))/0x3+parseInt(_0x5edf97(0x244))/0x4*(-parseInt(_0x5edf97(0x1c8))/0x5)+-parseInt(_0x5edf97(0x1ce))/0x6*(parseInt(_0x5edf97(0x220))/0x7)+-parseInt(_0x5edf97(0x203))/0x8*(-parseInt(_0x5edf97(0x1f5))/0x9)+parseInt(_0x5edf97(0x1b6))/0xa*(parseInt(_0x5edf97(0x2af))/0xb)+parseInt(_0x5edf97(0x27c))/0xc;if(_0x2ed880===_0x599e72)break;else _0x96bfe6['push'](_0x96bfe6['shift']());}catch(_0x158843){_0x96bfe6['push'](_0x96bfe6['shift']());}}}(a81_0x3f21,0x4f43c));const util=require(a81_0x5005ba(0x299)),os=require('os'),path=require(a81_0x5005ba(0x2a1)),{v4:uuidv4}=require(a81_0x5005ba(0x24d)),fs=require('fs'),constants=require(a81_0x5005ba(0x260)),{isTurboScaleSession}=require('./ats/helper'),logger=require(a81_0x5005ba(0x1d5))[a81_0x5005ba(0x235)],fileLogger=require(a81_0x5005ba(0x1d5))[a81_0x5005ba(0x1e3)],{getLogDir}=require('./logger'),helper=require(a81_0x5005ba(0x249)),utilities=require(a81_0x5005ba(0x217)),percyHelper=require(a81_0x5005ba(0x221)),hubAllocator=require(a81_0x5005ba(0x1f4)),PerformanceTester=require(a81_0x5005ba(0x21f)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a81_0x5005ba(0x1be)),{setPercyFlag}=require(a81_0x5005ba(0x1bc)),TestHubHandler=require(a81_0x5005ba(0x279)),timeoutPromise=require(a81_0x5005ba(0x22c)),BrowserstackCLI=require('../bin/v2/browserstackCLI');function a81_0x3a40(_0x493c0e,_0x5cc07f){const _0x3f2176=a81_0x3f21();return a81_0x3a40=function(_0x3a4070,_0x2ae835){_0x3a4070=_0x3a4070-0x1b2;let _0x2ac23a=_0x3f2176[_0x3a4070];return _0x2ac23a;},a81_0x3a40(_0x493c0e,_0x5cc07f);}function a81_0x3f21(){const _0x41970d=['BrowserstackHealingInitFailed','envConfig','aiHeal:tcgAuth','url','format','winstonLogger','measureWrapper','INVALID_INIT_RESP_WITH_USER_IMPACT','getTurboScaleGridDetails','env','dlTEV','ZZhBn','BROWSERSTACK_TURBOSCALE','accessKey','xGked','KJbMb','tcgAuthConfig','setEnvCaps','turboScaleGridDetails','startPercy','430904uFfrBf','getUserName','TPzPZ','allocateHub','rlZxr','./helper','getLocalIdentifier','handled','setupPercy','uuid','cancel','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','cliConfig','true','hubUrl','SIGABRT','stop','unhandledRejection','isAuthenticated','selenium-webdriver','aSQtz','sdkRunId','useW3C','Percy\x20stopped','central_scanner','oiidh','dFXhf','YTIZg','../bin/utils/constants','default','setupTcgConfigFile','BrowserstackHealing.init','PtUZq','getProxyConfigForTcg','custom-repeater','parallelsPerPlatform','nQcgo','disableAutoCaptureLogs','getHubUrl','4.5.0','initialize','skipSessionStatus','error','intExitHandler','jPctL','NkfSU','getCentralUser','status','setupTCGAuth','selfHeal','ggjjm','browserStackLocalOptions','lTlSl','./testhub/testhubHandler','platforms','933654tvxxMd','11728260WWNyed','PpeUn','setProxySettings','errorMessage','percy','turboScaleUrl','integrations','iGejO','Calling\x20Build\x20Stop\x20from\x20ExitHandler','SDK_CLEANUP','race','generateLocalIdentifier','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','localOptions','fireFunnelTestEvent','TCG_AUTH_FAILURE','warn','events.json','skipSessionName','framework','OTyRy','setCLICaps','Error\x20occured\x20while\x20stopping\x20local\x20binary','Shutdown\x20triggered\x20by\x20','init','SIGINT','stopPercy','setLogLevel','Local\x20binary\x20stopped','util','startLocalBinary','sendToEDS','OKAPB','419706IbYgPF','isBrowserstackInfra','assign','Error\x20in\x20sending\x20testhub\x20stop:\x20','path','Local\x20binary\x20started\x20successfully','codeceptjs','MCboL','platform','isHealingEnabled','testContextOptions','forceLocal','compareVersions','isNotUndefined','BFqCP','userName\x20or\x20accessKey\x20is\x20not\x20defined','getAccessKey','FRAMEWORK','11vforic','hWGmF','info','stringify','toString','browserstackLocal','wImjx','WxVbO','\x20with\x20error\x20','turboScaleOptions','readConfig','4056550PvfGSA','LPecS','EBeks','kKUjh','FxeuR','localIdentifier','./testhub/utils','preInitialize','./performance/constants','isUndefined','UPGRADE_REQUIRED','CMgLS','POgCr','LanvC','setHandlePWError','tIXZy','SDK\x20run\x20started\x20with\x20id:\x20','customRepeaters','15rVEOkq','LfyKm','efVYI','isEnabled','push','yTkWw','3792696iZtZFd','join','config','AI_INIT_FAILURE','abJBS','KAlRU','proxyUrl','./logger','getPackageVersion','stopBrowserstackLocal','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','muPHS','tcg\x20config\x20setup\x20successful.','YPtvN','TCG_URL','dYFzd','teChH','GGsoV','wteBM','isTrue','setUpHubUrl','fileLogger','AplVz','RLoYh','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','SIGTERM','SFZHb','statusCode','beforeExit','playwright','vgseJ','unhandledErrors','requireSeleniumWebdriverCheck','uUTgV','getInstance','8|6|5|17|4|14|20|11|10|1|16|7|2|9|18|3|12|19|0|15|21|13','false','?caps=','../hubAllocationMethods','9JFiHAo','exitHandler','../ai-sdk-node/bundle','Data\x20sent\x20successfully\x20to\x20','XGZZT','AUTOLOGCAPTURE_NOTIFICATION','uncaughtException','proxyConfig','aFakS','includes','setupBrowserstackLocal','isRunning','yhsnq','setupKeepAlive','4029448wPobRS','getFinalCaps','BBAVo','version','bstackConfig','1lhlwre','sanitizeCaps','TBljN','BROWSERSTACK_PERCY','prOUo','writeFileSync','Iujxg','playwrightUrl','Error\x20occured\x20while\x20stopping\x20percy','debug','AI_INIT_SUCCESSFUL','Error\x20in\x20writing\x20events\x20to\x20file\x20','end','setCredentialsFromYmlConfig','handleExceptions','./utilities','message','dHJuL','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','ats-repeater','xwYRT','hdIkJ','proxy','./performance/performance-tester','7lnGAvg','./percy/utils','killSignal','gUBDB','getLocalConfig','JcXRD','skipBinaryInitialisation','maHtR','yDMpM','FNLpO','rXFfO','finalize','./timeoutPromise','close','HUB_MANAGEMENT','EDS_URL'];a81_0x3f21=function(){return _0x41970d;};return a81_0x3f21();}class BrowserStackSetup{constructor(_0x24536c,_0x56ee83){const _0x544c5c=a81_0x5005ba,_0x46ca47={'RLoYh':_0x544c5c(0x1f1),'muPHS':function(_0xe0a1b3){return _0xe0a1b3();},'rhLTK':'No\x20config\x20provided.'},_0x18893f=_0x46ca47[_0x544c5c(0x1e5)]['split']('|');let _0x2a690a=0x0;while(!![]){switch(_0x18893f[_0x2a690a++]){case'0':helper[_0x544c5c(0x204)](this[_0x544c5c(0x1d0)],this[_0x544c5c(0x250)],this['envConfig']);continue;case'1':this[_0x544c5c(0x259)]=_0x46ca47[_0x544c5c(0x1d9)](uuidv4);continue;case'2':if(helper[_0x544c5c(0x1bf)](this[_0x544c5c(0x1d0)]))throw new Error(_0x46ca47['rhLTK']);continue;case'3':helper[_0x544c5c(0x215)](this[_0x544c5c(0x1d0)]);continue;case'4':this[_0x544c5c(0x280)]=null;continue;case'5':this['envConfig']=helper[_0x544c5c(0x241)]();continue;case'6':this[_0x544c5c(0x250)]=helper[_0x544c5c(0x291)](_0x24536c);continue;case'7':global[_0x544c5c(0x28f)]=_0x56ee83;continue;case'8':this[_0x544c5c(0x1ed)]=[];continue;case'9':if(this[_0x544c5c(0x1d0)][_0x544c5c(0x26e)])throw new Error(this[_0x544c5c(0x1d0)][_0x544c5c(0x26e)]);continue;case'10':this[_0x544c5c(0x27f)]={};continue;case'11':this[_0x544c5c(0x1d0)][_0x544c5c(0x2a7)]=this[_0x544c5c(0x1d0)][_0x544c5c(0x2a7)]||{};continue;case'12':this[_0x544c5c(0x1d0)][_0x544c5c(0x2a7)][_0x544c5c(0x26d)]=!helper['isBrowserstackInfra']()||helper[_0x544c5c(0x1e1)](this['config'][_0x544c5c(0x2a7)][_0x544c5c(0x26d)]);continue;case'13':PerformanceTester['startMonitoring']();continue;case'14':this[_0x544c5c(0x1d0)]=helper[_0x544c5c(0x1b5)](helper['getConfigPath'](_0x24536c));continue;case'15':helper['setLogDir'](this[_0x544c5c(0x1d0)]);continue;case'16':this[_0x544c5c(0x28f)]=_0x56ee83;continue;case'17':this[_0x544c5c(0x2b4)]=null;continue;case'18':helper['setBrowserstackInfraFromConfig'](this[_0x544c5c(0x1d0)],this[_0x544c5c(0x250)]);continue;case'19':this[_0x544c5c(0x1d0)]['testContextOptions'][_0x544c5c(0x28e)]=!helper[_0x544c5c(0x29e)]()||helper['isTrue'](this['config'][_0x544c5c(0x2a7)][_0x544c5c(0x28e)]);continue;case'20':this[_0x544c5c(0x1d0)][_0x544c5c(0x27a)]=this[_0x544c5c(0x1d0)]['platforms']||[];continue;case'21':helper[_0x544c5c(0x297)](this[_0x544c5c(0x1d0)],this[_0x544c5c(0x250)],this[_0x544c5c(0x231)]);continue;}break;}}[a81_0x5005ba(0x1bd)](_0x639181){const _0x4d4265=a81_0x5005ba,_0x43cde4={'XHfXi':_0x4d4265(0x2ac),'ZZhBn':function(_0x13b738,_0x2fd9e9){return _0x13b738===_0x2fd9e9;},'nQcgo':_0x4d4265(0x282),'PtUZq':'SDKTestAttempted','FJRVK':function(_0x5ed831,_0x2faf58){return _0x5ed831<_0x2faf58;},'dYFzd':function(_0x49a7bd,_0x1e9852){return _0x49a7bd(_0x1e9852);},'wteBM':_0x4d4265(0x257),'LanvC':function(_0x24dded,_0x48f2cb){return _0x24dded===_0x48f2cb;},'MuDEE':_0x4d4265(0x26b),'hdIkJ':'Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','SGzIf':'parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','inGRk':_0x4d4265(0x1e7),'PpeUn':_0x4d4265(0x295),'uUTgV':'SIGHUP','KJbMb':function(_0x3b0280,_0xe8ec40){return _0x3b0280!==_0xe8ec40;},'rlZxr':'win32','pAAnl':_0x4d4265(0x253),'iGejO':'SIGQUIT','OMHkg':'SIGBREAK','MCboL':_0x4d4265(0x1ea)},_0x188257=this[_0x4d4265(0x28f)];global['config']=this[_0x4d4265(0x1d0)],helper[_0x4d4265(0x209)](this['config']),this[_0x4d4265(0x222)]=null,global[_0x4d4265(0x259)]=this[_0x4d4265(0x259)],logger[_0x4d4265(0x2b1)](_0x4d4265(0x1c6)+this[_0x4d4265(0x259)]),!this[_0x4d4265(0x1d0)][_0x4d4265(0x277)]&&(this['config'][_0x4d4265(0x277)]=this[_0x4d4265(0x1d0)][_0x4d4265(0x289)]||{});if(helper[_0x4d4265(0x1bf)](helper[_0x4d4265(0x245)](this[_0x4d4265(0x1d0)]))||helper[_0x4d4265(0x1bf)](helper[_0x4d4265(0x2ad)](this['config'])))throw new Error(_0x43cde4['XHfXi']);helper[_0x4d4265(0x224)](this['config'])&&helper[_0x4d4265(0x1bf)](helper[_0x4d4265(0x24a)](this[_0x4d4265(0x1d0)]))&&(!helper[_0x4d4265(0x1bf)](this['config'][_0x4d4265(0x277)])&&_0x43cde4[_0x4d4265(0x23b)](this[_0x4d4265(0x1d0)][_0x4d4265(0x277)]['constructor'],Object)?!helper[_0x4d4265(0x1e1)](this['config'][_0x4d4265(0x277)][_0x4d4265(0x226)])&&(this[_0x4d4265(0x1d0)][_0x4d4265(0x277)][_0x4d4265(0x1bb)]=helper[_0x4d4265(0x287)]()):this[_0x4d4265(0x1d0)]['browserStackLocalOptions']={'localIdentifier':helper['generateLocalIdentifier']()});this[_0x4d4265(0x1d0)]['browserStackLocalOptions'][_0x4d4265(0x226)]=helper[_0x4d4265(0x1e1)](this[_0x4d4265(0x1d0)][_0x4d4265(0x277)][_0x4d4265(0x226)]),helper[_0x4d4265(0x1c4)](this[_0x4d4265(0x1d0)]);if(_0x43cde4[_0x4d4265(0x23b)](_0x188257,_0x43cde4[_0x4d4265(0x268)]))return;this[_0x4d4265(0x216)]();process[_0x4d4265(0x239)][_0x4d4265(0x23c)]&&(this[_0x4d4265(0x1d0)]['turboScale']=helper[_0x4d4265(0x1e1)](process['env'][_0x4d4265(0x23c)]),this[_0x4d4265(0x1d0)]['turboScaleOptions']=this['config'][_0x4d4265(0x1b4)]||{});if(!helper['isBrowserstackInfra']()){try{process[_0x4d4265(0x239)][_0x4d4265(0x2ae)]=_0x188257,utilities['fireFunnelTestEvent'](_0x43cde4[_0x4d4265(0x264)],{},this['config'],this[_0x4d4265(0x28f)]);}catch(_0x422297){logger[_0x4d4265(0x211)]('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x422297);}return;}helper[_0x4d4265(0x1ee)](_0x188257)&&(_0x43cde4['FJRVK'](_0x43cde4[_0x4d4265(0x1dd)](parseInt,helper[_0x4d4265(0x1d6)](_0x43cde4[_0x4d4265(0x1e0)])),0x3)&&(this['config'][_0x4d4265(0x25a)]=![]),_0x43cde4[_0x4d4265(0x1c3)](helper[_0x4d4265(0x2a9)](helper[_0x4d4265(0x1d6)](_0x43cde4[_0x4d4265(0x1e0)]),_0x43cde4['MuDEE']),0x1)&&(this[_0x4d4265(0x1d0)][_0x4d4265(0x25a)]=!![]));(helper[_0x4d4265(0x1bf)](this['config'][_0x4d4265(0x27a)])||helper[_0x4d4265(0x1bf)](this[_0x4d4265(0x1d0)][_0x4d4265(0x27a)]['length']))&&(helper[_0x4d4265(0x1bf)](this[_0x4d4265(0x1d0)][_0x4d4265(0x267)])?logger[_0x4d4265(0x2b1)](_0x43cde4[_0x4d4265(0x21d)]):logger[_0x4d4265(0x28c)](_0x43cde4['SGzIf']),this[_0x4d4265(0x1d0)][_0x4d4265(0x27a)]=[]);!this[_0x4d4265(0x1d0)][_0x4d4265(0x2a7)]&&(this[_0x4d4265(0x1d0)]['testContextOptions']={});try{process[_0x4d4265(0x239)][_0x4d4265(0x2ae)]=_0x639181['_'][0x0],utilities[_0x4d4265(0x28a)](_0x43cde4[_0x4d4265(0x264)],{},this[_0x4d4265(0x1d0)],this['framework']);}catch(_0x2723e8){logger[_0x4d4265(0x211)](_0x4d4265(0x288)+_0x2723e8);}!this[_0x4d4265(0x1d0)][_0x4d4265(0x269)]&&logger['info'](constants[_0x4d4265(0x1fa)]),this[_0x4d4265(0x26f)]=this['intExitHandler']['bind'](this),process['on'](_0x43cde4['inGRk'],this[_0x4d4265(0x26f)]),process['on'](_0x43cde4[_0x4d4265(0x27d)],this[_0x4d4265(0x26f)]),process['on'](_0x43cde4[_0x4d4265(0x1ef)],this['intExitHandler']),_0x43cde4[_0x4d4265(0x23f)](process['platform'],_0x43cde4[_0x4d4265(0x248)])?(process['on'](_0x43cde4['pAAnl'],this[_0x4d4265(0x26f)]),process['on'](_0x43cde4[_0x4d4265(0x283)],this[_0x4d4265(0x26f)])):process['on'](_0x43cde4['OMHkg'],this[_0x4d4265(0x26f)]),process['on'](_0x43cde4[_0x4d4265(0x2a4)],this[_0x4d4265(0x1f6)]());}async[a81_0x5005ba(0x26c)](_0x2b9677){const _0x329ab5=a81_0x5005ba,_0x13aae2={'FxeuR':function(_0x36c858,_0x333275){return _0x36c858(_0x333275);},'tIXZy':_0x329ab5(0x21b),'iRFqK':_0x329ab5(0x266),'OwvYM':_0x329ab5(0x251),'WxVbO':function(_0xf2b697,_0x389e7f){return _0xf2b697===_0x389e7f;},'uKxQv':_0x329ab5(0x1eb),'rXFfO':function(_0x27733e,_0x2e96fb){return _0x27733e+_0x2e96fb;},'FNLpO':_0x329ab5(0x1f3),'YdbPa':function(_0x599a06,_0x585ed5){return _0x599a06(_0x585ed5);},'LPecS':_0x329ab5(0x2a3),'OTyRy':function(_0x551496,_0x13baae){return _0x551496(_0x13baae);}};this[_0x329ab5(0x1bd)](_0x2b9677);if(_0x13aae2[_0x329ab5(0x1ba)](isTurboScaleSession,this[_0x329ab5(0x1d0)])){const _0x136057=await helper[_0x329ab5(0x238)](this[_0x329ab5(0x1d0)]);this['config'][_0x329ab5(0x242)]=_0x136057,_0x136057['isTrialGrid']&&helper[_0x329ab5(0x2aa)](this[_0x329ab5(0x1d0)][_0x329ab5(0x2b4)])&&helper[_0x329ab5(0x1e1)](this['config'][_0x329ab5(0x2b4)])&&(this[_0x329ab5(0x1d0)]['browserStackLocalOptions']['localIdentifier']=_0x13aae2[_0x329ab5(0x1c5)],this[_0x329ab5(0x1d0)][_0x329ab5(0x277)][_0x13aae2['iRFqK']]=_0x136057[_0x329ab5(0x1c7)][_0x329ab5(0x1cf)](','),this[_0x329ab5(0x1d0)]['browserStackLocalOptions'][_0x329ab5(0x2a8)]=_0x13aae2['OwvYM']),this['config'][_0x329ab5(0x281)]=_0x136057[_0x329ab5(0x233)],this[_0x329ab5(0x28f)]&&_0x13aae2[_0x329ab5(0x1b2)](this[_0x329ab5(0x28f)]['toLowerCase'](),_0x13aae2['uKxQv'])&&(this['config'][_0x329ab5(0x281)]=_0x13aae2[_0x329ab5(0x22a)](_0x136057[_0x329ab5(0x20f)],_0x13aae2[_0x329ab5(0x229)])),constants[_0x329ab5(0x252)]=helper[_0x329ab5(0x26a)](this[_0x329ab5(0x1d0)]),logger[_0x329ab5(0x211)]('HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20'+constants[_0x329ab5(0x252)]);}helper[_0x329ab5(0x27e)](this['config']),this[_0x329ab5(0x202)](),_0x13aae2['YdbPa'](setPercyFlag,this),await this[_0x329ab5(0x1ff)](),![_0x13aae2[_0x329ab5(0x1b7)],_0x13aae2['uKxQv']][_0x329ab5(0x1fe)](this[_0x329ab5(0x28f)])&&!_0x13aae2[_0x329ab5(0x290)](isTurboScaleSession,this[_0x329ab5(0x1d0)])&&!helper[_0x329ab5(0x272)]()[_0x329ab5(0x25c)]&&await this[_0x329ab5(0x1e2)]();}async[a81_0x5005ba(0x24c)](){const _0x4ef75c=a81_0x5005ba,_0x22a340={};_0x22a340[_0x4ef75c(0x2b0)]=function(_0x3cd29d,_0x3dc913){return _0x3cd29d===_0x3dc913;},_0x22a340[_0x4ef75c(0x25e)]=_0x4ef75c(0x1f2),_0x22a340[_0x4ef75c(0x20a)]='Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.',_0x22a340[_0x4ef75c(0x1c1)]='Percy\x20started\x20successfully',_0x22a340['maHtR']=_0x4ef75c(0x251),_0x22a340[_0x4ef75c(0x20e)]=_0x4ef75c(0x1ea);const _0x101a96=_0x22a340;if(helper[_0x4ef75c(0x1e1)](this[_0x4ef75c(0x1d0)][_0x4ef75c(0x280)])&&(!this[_0x4ef75c(0x280)]||!this[_0x4ef75c(0x280)]['isRunning']()))try{this[_0x4ef75c(0x280)]=await percyHelper[_0x4ef75c(0x243)](this[_0x4ef75c(0x1d0)]);if(!this['percy']){process[_0x4ef75c(0x239)]['BROWSERSTACK_PERCY']=_0x101a96['dFXhf'];throw new Error(_0x101a96['TBljN']);}logger[_0x4ef75c(0x2b1)](_0x101a96[_0x4ef75c(0x1c1)]),process[_0x4ef75c(0x239)][_0x4ef75c(0x20b)]=_0x101a96[_0x4ef75c(0x227)];let _0x5c02b8=0x0;const _0x1e352b=async()=>{_0x5c02b8++,_0x101a96['hWGmF'](_0x5c02b8,0x1)&&await this['stopPercy']();};process['on'](_0x101a96[_0x4ef75c(0x20e)],_0x1e352b);}catch(_0x561c92){process[_0x4ef75c(0x239)][_0x4ef75c(0x20b)]=_0x101a96[_0x4ef75c(0x25e)],logger[_0x4ef75c(0x211)]('Error\x20in\x20percy\x20setup\x20'+_0x561c92);throw new Error(_0x561c92[_0x4ef75c(0x2b3)]());}}async[a81_0x5005ba(0x296)](){const _0x4e0e71=a81_0x5005ba,_0x1326cb={};_0x1326cb[_0x4e0e71(0x1c2)]=_0x4e0e71(0x25b),_0x1326cb[_0x4e0e71(0x1de)]=_0x4e0e71(0x210);const _0x2fec7b=_0x1326cb;if(this[_0x4e0e71(0x280)]&&this[_0x4e0e71(0x280)]['isRunning']())try{await percyHelper[_0x4e0e71(0x296)](this[_0x4e0e71(0x280)]),logger[_0x4e0e71(0x2b1)](_0x2fec7b[_0x4e0e71(0x1c2)]);}catch(_0x3ea68e){logger[_0x4e0e71(0x26e)](_0x2fec7b[_0x4e0e71(0x1de)],_0x3ea68e[_0x4e0e71(0x218)]);}}async[a81_0x5005ba(0x1ff)](){const _0x38ade4=a81_0x5005ba,_0x1a75b0={};_0x1a75b0[_0x38ade4(0x23e)]=_0x38ade4(0x24f),_0x1a75b0[_0x38ade4(0x258)]=_0x38ade4(0x2a2);const _0x599305=_0x1a75b0;if(helper[_0x38ade4(0x29e)]()&&helper[_0x38ade4(0x1e1)](this['config'][_0x38ade4(0x2b4)])&&(!this[_0x38ade4(0x2b4)]||!this['browserstackLocal']['isRunning']()))try{if(this[_0x38ade4(0x1d0)][_0x38ade4(0x277)][_0x38ade4(0x226)]){logger[_0x38ade4(0x211)](_0x599305[_0x38ade4(0x23e)]);return;}this['browserstackLocal']=await helper[_0x38ade4(0x29a)](this['config']),logger['info'](_0x599305['aSQtz']);}catch(_0x445c79){logger['debug'](_0x445c79);throw new Error(_0x445c79[_0x38ade4(0x2b3)]());}}async[a81_0x5005ba(0x1d7)](){const _0x434d46=a81_0x5005ba,_0x531398={};_0x531398['BFqCP']=_0x434d46(0x298),_0x531398['yhsnq']=_0x434d46(0x292);const _0x504f93=_0x531398;if(this['browserstackLocal']&&this[_0x434d46(0x2b4)][_0x434d46(0x200)]())try{await helper['stopLocalBinary'](this[_0x434d46(0x2b4)]),logger['info'](_0x504f93[_0x434d46(0x2ab)]);}catch(_0xd9ec2e){logger[_0x434d46(0x26e)](_0x504f93[_0x434d46(0x201)],_0xd9ec2e[_0x434d46(0x218)]);}}async[a81_0x5005ba(0x1e2)](){const _0x1aedf0=a81_0x5005ba;return PerformanceTester[_0x1aedf0(0x236)](PerformanceAutEvents[_0x1aedf0(0x22e)],async()=>{const _0x5872cf=_0x1aedf0;await hubAllocator[_0x5872cf(0x247)](this[_0x5872cf(0x1d0)]);})();}async[a81_0x5005ba(0x274)](){const _0x46f707=a81_0x5005ba,_0x40688f={'BBAVo':function(_0x1b6da8,_0x108a75){return _0x1b6da8(_0x108a75);},'NkfSU':_0x46f707(0x1f7),'dHJuL':function(_0x282741,_0x52ace0,_0x5276b5,_0x420d58,_0x59ac22,_0x247490,_0x2cb50d){return _0x282741(_0x52ace0,_0x5276b5,_0x420d58,_0x59ac22,_0x247490,_0x2cb50d);},'gUBDB':'BrowserstackHealing.init\x20method\x20timed\x20out','XGZZT':_0x46f707(0x230),'dlTEV':'../../package.json','yTkWw':_0x46f707(0x263),'kKUjh':function(_0x2a73d7,_0x589402){return _0x2a73d7===_0x589402;},'SFZHb':_0x46f707(0x251),'OCmsj':function(_0x1e024c,_0x3a4b2e){return _0x1e024c===_0x3a4b2e;},'LfyKm':function(_0x137b9c,_0x41e22e){return _0x137b9c===_0x41e22e;},'OKAPB':function(_0x21895f,_0xed8aa0){return _0x21895f===_0xed8aa0;},'KAlRU':_0x46f707(0x21a),'oiidh':function(_0x4cd3c7,_0x5abad5){return _0x4cd3c7===_0x5abad5;},'lTlSl':_0x46f707(0x1d8),'efVYI':'Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','vgseJ':'Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','EBeks':function(_0x59dc41,_0x5b3d20){return _0x59dc41>=_0x5b3d20;},'GABBq':function(_0x3f3f49,_0x3cf73b){return _0x3f3f49<_0x3cf73b;},'YTIZg':_0x46f707(0x1da),'ggjjm':_0x46f707(0x232),'wImjx':function(_0x57e63f){return _0x57e63f();}},_0x58360a=PerformanceTester[_0x46f707(0x236)](_0x40688f[_0x46f707(0x276)],async()=>{const _0x2813e7=_0x46f707;try{const _0x51676c=new Date(),_0x1b10cb=helper[_0x2813e7(0x265)](this[_0x2813e7(0x1d0)]),_0x2fbeb4=_0x40688f[_0x2813e7(0x205)](require,path[_0x2813e7(0x1cf)](__dirname,_0x40688f[_0x2813e7(0x271)])),_0x14030c=_0x40688f[_0x2813e7(0x219)](timeoutPromise,constants['TCG_AUTH_TIMEOUT'],_0x40688f[_0x2813e7(0x223)],_0x40688f[_0x2813e7(0x1f9)],_0x51676c,this[_0x2813e7(0x1d0)],this[_0x2813e7(0x28f)]),_0x128b29={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x40688f[_0x2813e7(0x205)](require,_0x40688f['dlTEV'])[_0x2813e7(0x206)],'methodUsed':_0x40688f[_0x2813e7(0x1cd)],'proxyConfig':_0x1b10cb,'os':os[_0x2813e7(0x2a5)]()};if(_0x1b10cb&&_0x1b10cb[_0x2813e7(0x1d4)]){utilities[_0x2813e7(0x28a)](constants['AI_PROXY_FAILURE'],_0x128b29,this[_0x2813e7(0x1d0)],this['framework']);return;}const _0x17ff88={};_0x17ff88[_0x2813e7(0x21e)]=_0x1b10cb;const _0x2b39f3=await Promise[_0x2813e7(0x286)]([_0x2fbeb4[_0x2813e7(0x294)](this[_0x2813e7(0x1d0)][_0x2813e7(0x23d)],this[_0x2813e7(0x1d0)]['userName'],constants[_0x2813e7(0x1dc)],_0x40688f[_0x2813e7(0x205)](require,_0x40688f[_0x2813e7(0x23a)])[_0x2813e7(0x206)],_0x17ff88)['then'](_0x4f9da2=>{const _0x5590f0=_0x2813e7;return _0x14030c[_0x5590f0(0x24e)](),_0x4f9da2;}),_0x14030c]);_0x2b39f3[_0x2813e7(0x2a6)]=_0x40688f[_0x2813e7(0x1b9)](_0x2b39f3['isHealingEnabled'],_0x40688f[_0x2813e7(0x1e8)])||_0x40688f['OCmsj'](_0x2b39f3['isHealingEnabled'],!![]);const _0x41d25e=_0x40688f[_0x2813e7(0x1c9)](this[_0x2813e7(0x1d0)][_0x2813e7(0x275)],!![])||_0x40688f[_0x2813e7(0x29c)](this[_0x2813e7(0x1d0)]['selfHeal'],_0x40688f[_0x2813e7(0x1e8)]);if(_0x40688f['OKAPB'](_0x2b39f3[_0x2813e7(0x218)],constants[_0x2813e7(0x1c0)])&&_0x41d25e)logger[_0x2813e7(0x2b1)](_0x40688f[_0x2813e7(0x1d3)]);else{if(!_0x2b39f3[_0x2813e7(0x256)]&&_0x40688f[_0x2813e7(0x25d)](_0x2b39f3[_0x2813e7(0x273)],0x1f7)&&_0x41d25e)logger['info'](_0x40688f[_0x2813e7(0x278)]),utilities[_0x2813e7(0x28a)](constants['TCG_DOWN'],_0x128b29,this['config'],this[_0x2813e7(0x28f)]);else{if(!_0x2b39f3[_0x2813e7(0x256)]&&_0x41d25e){logger[_0x2813e7(0x2b1)](_0x40688f[_0x2813e7(0x1ca)]);const _0x136f76={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x40688f['BBAVo'](require,_0x40688f[_0x2813e7(0x23a)])[_0x2813e7(0x206)],'methodUsed':_0x40688f['yTkWw'],'proxyConfig':_0x1b10cb,'os':os[_0x2813e7(0x2a5)]()};utilities['fireFunnelTestEvent'](constants[_0x2813e7(0x28b)],_0x136f76,this[_0x2813e7(0x1d0)],this[_0x2813e7(0x28f)]);}else{if(_0x2b39f3['isAuthenticated']&&!_0x2b39f3[_0x2813e7(0x2a6)]&&_0x41d25e)logger[_0x2813e7(0x2b1)](_0x40688f[_0x2813e7(0x1ec)]);else{if(_0x40688f['EBeks'](_0x2b39f3[_0x2813e7(0x273)],0xc8)&&_0x40688f['GABBq'](_0x2b39f3['status'],0x12c))utilities[_0x2813e7(0x28a)](constants[_0x2813e7(0x212)],_0x128b29,this[_0x2813e7(0x1d0)],this[_0x2813e7(0x28f)]);else{if(_0x40688f[_0x2813e7(0x1b8)](_0x2b39f3[_0x2813e7(0x273)],0x190))_0x128b29[_0x2813e7(0x273)]=_0x2b39f3['status'],utilities['fireFunnelTestEvent'](constants[_0x2813e7(0x1d1)],_0x128b29,this['config'],this[_0x2813e7(0x28f)]);else!_0x2b39f3[_0x2813e7(0x273)]&&utilities['fireFunnelTestEvent'](constants[_0x2813e7(0x237)],_0x128b29,this[_0x2813e7(0x1d0)],this[_0x2813e7(0x28f)]);}}}}}if(_0x2b39f3[_0x2813e7(0x256)]&&_0x2b39f3[_0x2813e7(0x2a6)]){const _0x4321b2={};_0x4321b2[_0x2813e7(0x240)]=_0x2b39f3;const _0x661827=_0x4321b2;_0x1b10cb&&(_0x661827[_0x2813e7(0x1fc)]=_0x1b10cb),_0x661827[_0x2813e7(0x28f)]=this[_0x2813e7(0x28f)],_0x661827[_0x2813e7(0x207)]=this[_0x2813e7(0x1d0)],helper[_0x2813e7(0x262)](_0x661827),logger[_0x2813e7(0x211)](_0x40688f[_0x2813e7(0x25f)]);}}catch(_0x2373a0){logger['debug'](_0x2813e7(0x1e6)+(_0x2373a0[_0x2813e7(0x218)]?_0x2373a0[_0x2813e7(0x218)]:''));}});await _0x40688f[_0x46f707(0x2b5)](_0x58360a);}[a81_0x5005ba(0x202)](){const _0x8c19a8=a81_0x5005ba,_0x3487b2={'jPctL':function(_0x4b6b22,_0x50ea2d){return _0x4b6b22(_0x50ea2d);},'yDMpM':'./setKeepAlive'};_0x3487b2[_0x8c19a8(0x270)](require,_0x3487b2[_0x8c19a8(0x228)])();}[a81_0x5005ba(0x216)](){const _0x430493=a81_0x5005ba,_0xa107d={};_0xa107d['MjKnS']=_0x430493(0x255),_0xa107d[_0x430493(0x1e4)]=_0x430493(0x1fb);const _0x101c42=_0xa107d,_0x27b6ed=_0x46df40=>{const _0x4e9ed1=_0x430493;logger[_0x4e9ed1(0x26e)](_0x46df40[_0x4e9ed1(0x218)]),logger[_0x4e9ed1(0x211)](util[_0x4e9ed1(0x234)](_0x46df40)),this[_0x4e9ed1(0x1ed)][_0x4e9ed1(0x1cc)](util[_0x4e9ed1(0x234)]('%j',_0x46df40)),PerformanceTester['captureError'](_0x46df40);};process['on'](_0x101c42['MjKnS'],_0x27b6ed),process['on'](_0x101c42['AplVz'],_0x27b6ed);}async[a81_0x5005ba(0x26f)](_0x300ed0){const _0x4cfb07=a81_0x5005ba,_0x227119={};_0x227119[_0x4cfb07(0x246)]='2|7|5|3|4|0|6|1',_0x227119[_0x4cfb07(0x1fd)]=function(_0x6227cc,_0x4067d4){return _0x6227cc+_0x4067d4;},_0x227119[_0x4cfb07(0x1d2)]=_0x4cfb07(0x24b),_0x227119[_0x4cfb07(0x225)]=_0x4cfb07(0x293),_0x227119[_0x4cfb07(0x1df)]=function(_0x2a3006,_0x216a38){return _0x2a3006+_0x216a38;};const _0x34a4ff=_0x227119,_0x3b9213=_0x34a4ff[_0x4cfb07(0x246)]['split']('|');let _0x7d411d=0x0;while(!![]){switch(_0x3b9213[_0x7d411d++]){case'0':this[_0x4cfb07(0x222)]=_0x300ed0;continue;case'1':await TestHubHandler[_0x4cfb07(0x254)](_0x300ed0);continue;case'2':logger&&logger[_0x4cfb07(0x22d)]();continue;case'3':this[_0x34a4ff[_0x4cfb07(0x1fd)](_0x34a4ff['abJBS'],_0x300ed0)]=!![];continue;case'4':logger[_0x4cfb07(0x2b1)](_0x34a4ff[_0x4cfb07(0x1fd)](_0x34a4ff[_0x4cfb07(0x225)],_0x300ed0));continue;case'5':if(this[_0x34a4ff[_0x4cfb07(0x1df)](_0x34a4ff[_0x4cfb07(0x1d2)],_0x300ed0)])return;continue;case'6':await BrowserstackCLI[_0x4cfb07(0x1f0)]()[_0x4cfb07(0x254)]();continue;case'7':fileLogger&&fileLogger['close']();continue;}break;}}[a81_0x5005ba(0x1f6)](){const _0x5b0190=a81_0x5005ba,_0x2bfe89={'PKSvM':function(_0x2ce687,_0x5c31d4){return _0x2ce687===_0x5c31d4;},'GGlPA':_0x5b0190(0x284),'YPtvN':function(_0x36b498,_0x2b42e3){return _0x36b498>_0x2b42e3;},'xwYRT':function(_0x2dd5bd,_0xf5eeaa){return _0x2dd5bd>_0xf5eeaa;},'sWHhi':function(_0x7beab9){return _0x7beab9();},'prOUo':_0x5b0190(0x28d)};let _0x31ed36=0x0;return async()=>{const _0x28c257=_0x5b0190;_0x31ed36++;if(_0x2bfe89['PKSvM'](_0x31ed36,0x1)){helper['checkStopLocalBinaryOnExit'](this[_0x28c257(0x28f)])&&await this[_0x28c257(0x1d7)]();try{logger['debug'](_0x2bfe89['GGlPA']),await BrowserstackCLI[_0x28c257(0x1f0)]()['stop']('1'),await TestHubHandler[_0x28c257(0x254)](_0x31ed36);}catch(_0x9137c0){logger[_0x28c257(0x211)](_0x28c257(0x2a0)+util[_0x28c257(0x234)](_0x9137c0));}PerformanceTester[_0x28c257(0x214)](PerformanceEvents[_0x28c257(0x285)]);if(PerformanceTester[_0x28c257(0x1cb)]()){const {measures:_0x22638c,errors:_0xf775b}=await PerformanceTester[_0x28c257(0x22b)](),_0x48f938={};if(_0x22638c&&_0x2bfe89[_0x28c257(0x1db)](_0x22638c['length'],0x0)||_0xf775b&&_0x2bfe89[_0x28c257(0x21c)](_0xf775b['length'],0x0)){const _0x578c2b={};_0x578c2b['measures']=_0x22638c,_0x578c2b['exceptions']=_0xf775b,Object[_0x28c257(0x29f)](_0x48f938,_0x578c2b);}try{const _0x2a6c45=await helper[_0x28c257(0x29b)](_0x48f938,this[_0x28c257(0x1d0)]);logger[_0x28c257(0x211)](_0x28c257(0x1f8)+constants[_0x28c257(0x22f)]+'\x20with\x20response\x20'+_0x2a6c45[_0x28c257(0x1e9)]);}catch(_0x490a5d){logger[_0x28c257(0x211)]('Failed\x20to\x20send\x20data\x20to\x20'+constants[_0x28c257(0x22f)]+_0x28c257(0x1b3)+util['format'](_0x490a5d));}try{fs[_0x28c257(0x20d)](path['join'](_0x2bfe89['sWHhi'](getLogDir),_0x2bfe89[_0x28c257(0x20c)]),JSON[_0x28c257(0x2b2)](_0x48f938));}catch(_0x525fb5){logger[_0x28c257(0x211)](_0x28c257(0x213)+_0x525fb5);}}}};}}exports[a81_0x5005ba(0x261)]=BrowserStackSetup;