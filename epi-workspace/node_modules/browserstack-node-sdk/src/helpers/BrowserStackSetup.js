const a94_0x19b5d7=a94_0x3736;(function(_0x1f396f,_0xb041e5){const _0xb33b09=a94_0x3736,_0x22dfe9=_0x1f396f();while(!![]){try{const _0x4acb40=-parseInt(_0xb33b09(0x124))/0x1+-parseInt(_0xb33b09(0x98))/0x2+-parseInt(_0xb33b09(0x126))/0x3*(-parseInt(_0xb33b09(0xb8))/0x4)+parseInt(_0xb33b09(0x134))/0x5*(-parseInt(_0xb33b09(0x109))/0x6)+parseInt(_0xb33b09(0xd3))/0x7*(-parseInt(_0xb33b09(0xfa))/0x8)+-parseInt(_0xb33b09(0x17f))/0x9*(parseInt(_0xb33b09(0x157))/0xa)+parseInt(_0xb33b09(0x10a))/0xb*(parseInt(_0xb33b09(0xdf))/0xc);if(_0x4acb40===_0xb041e5)break;else _0x22dfe9['push'](_0x22dfe9['shift']());}catch(_0x24b0bb){_0x22dfe9['push'](_0x22dfe9['shift']());}}}(a94_0x59d0,0xd19ec));const util=require(a94_0x19b5d7(0xe2)),os=require('os'),path=require(a94_0x19b5d7(0x193)),{v4:uuidv4}=require(a94_0x19b5d7(0x151)),fs=require('fs'),constants=require('../bin/utils/constants'),logger=require(a94_0x19b5d7(0x15e))[a94_0x19b5d7(0x105)],fileLogger=require('./logger')[a94_0x19b5d7(0xa2)],{getLogDir}=require(a94_0x19b5d7(0x15e)),helper=require(a94_0x19b5d7(0x8a)),utilities=require(a94_0x19b5d7(0xe8)),percyHelper=require('./percy/utils'),hubAllocator=require(a94_0x19b5d7(0xd8)),PerformanceTester=require('./performance/performance-tester'),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a94_0x19b5d7(0x18f)),{setPercyFlag}=require('./testhub/utils'),TestHubHandler=require('./testhub/testhubHandler'),timeoutPromise=require('./timeoutPromise'),BrowserstackCLI=require(a94_0x19b5d7(0xee)),LoadTestModule=require(a94_0x19b5d7(0x104)),{getEdsInstrumentationAPIUrl}=require('../bin/utils/apiUtilityMethods'),ClientTroubleShootingService=require(a94_0x19b5d7(0xe1));function a94_0x3736(_0x30c365,_0x55c765){const _0x59d0e6=a94_0x59d0();return a94_0x3736=function(_0x37360d,_0x14447f){_0x37360d=_0x37360d-0x88;let _0x38da46=_0x59d0e6[_0x37360d];return _0x38da46;},a94_0x3736(_0x30c365,_0x55c765);}function a94_0x59d0(){const _0x18e8b8=['xkjIp','userName','xBrFl','stopBrowserstackLocal','IaPUQ','LcSFg','setupPercy','bstackConfig','HcTir','4|2|3|1|0','gspTC','setUpHubUrl','AI_PROXY_FAILURE','env','exceptions','isTrue','2|23|1|17|16|19|20|0|3|7|15|11|21|4|14|12|6|8|10|13|5|22|18|9','rmpAm','isTrialGrid','push','split','16ThTobM','LqHUn','killSignal','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','ZypVW','toLowerCase','swGKz','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','errorMessage','Rvpbo','kWVEP','turboScale','SHJfb','setBrowserstackInfraFromConfig','skipSessionStatus','custom-repeater','forceLocal','proxy','KUYSl','configPath','aiHeal:tcgAuth','cliConfig','browserStackLocalOptions','SIGQUIT','preInitialize','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','exitHandler','1603889fbYyVX','percy','message','startLocalBinary','oKgZV','../hubAllocationMethods','Local\x20binary\x20started\x20successfully','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','SIGHUP','oJJLY','QGaXH','generateLocalIdentifier','8832xMRrYY','browserstackLocal','../bin/utils/clientTroubleshootingService','util','tcgAuthConfig','aNsXF','zXZqC','qwJZJ','gsAbG','./utilities','AptVt','writeFileSync','NOwCj','setupKeepAlive','ZfPtK','../bin/v2/browserstackCLI','getProxyConfigForTcg','error','getPackageVersion','__isPlaywrightInstalled','Error\x20occured\x20while\x20stopping\x20percy','FCSxr','ydMcf','getTurboScaleGridDetails','INVALID_INIT_RESP_WITH_USER_IMPACT','localIdentifier','setLogLevel','32GvmMRa','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','ccRdW','Local\x20binary\x20stopped','msExJ','FWXux','WpHmu','platforms','isRunning','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','../bin/v2/modules/loadTestModule','winstonLogger','getFinalCaps','QFTlk','checkStopLocalBinaryOnExit','72ogcYKg','78034dYAOEK','No\x20config\x20provided.','doSkF','qzXOA','TCG_AUTH_TIMEOUT','beforeExit','SwBRD','4.5.0','HUB_MANAGEMENT','xqWXH','Error\x20in\x20sending\x20testhub\x20stop:\x20','win32','Wnhzv','NONoD','reportFinalDetectionState','0|5|3|2|1|4|7|6','isEnabled','isBrowserstackInfra','YhDwT','toString','Data\x20sent\x20successfully\x20to\x20','zUVQd','statusCode','events.json','setLogDir','kgGNp','1025453MVfjtd','framework','400593CrqbWh','version','stopPercy','length','setupTcgConfigFile','TBhal','intExitHandler','reportProcessInterruptionSituation','end','url','cwobz','BROWSERSTACK_TURBOSCALE','stop','selfHeal','321055dtVpIq','isHealingEnabled','RYUgc','eWiQz','../ai-sdk-node/bundle','sendToEDS','handleExceptions','proxyUrl','uPkep','proxyConfig','useW3C','setCLICaps','true','handled','getHubUrl','status','SDK\x20run\x20started\x20with\x20id:\x20','ofJyC','uncaughtException','XHxbq','hubUrl','codeceptjs','close','getInstance','isAuthenticated','\x20with\x20error\x20','ats-repeater','BSabN','info','uuid','qKdtT','config','KzhEq','TCG_URL','omQnv','100roFkGr','getAccessKey','initialize','envConfig','startMonitoring','normalizeTestReportingEnvVars','default','./logger','setupBrowserstackLocal','tbVVz','NtolB','fireFunnelTestEvent','isNotUndefined','ulpRl','\x20with\x20response\x20','mbwPP','fFzVN','allocateHub','turboScaleGridDetails','race','then','unhandledErrors','skipSessionName','playwrightUrl','tcg\x20config\x20setup\x20successful.','join','sGkJU','LTS\x20session\x20enabled\x20for\x20this\x20run.\x20SDK\x20run\x20id:\x20','GqqDV','setHandlePWError','AI_INIT_FAILURE','BROWSERSTACK_PERCY','wndii','setupTCGAuth','skipBinaryInitialisation','SDK_CLEANUP','sdkRunId','SIGTERM','finalize','getConfigPath','694359AjLSUs','WQOfA','format','seJzZ','DfHmZ','isTurboScaleSession','constructor','captureError','localOptions','isUndefined','kEFNb','readConfig','BrowserstackHealingInitFailed','accessKey','Percy\x20stopped','getLocalIdentifier','./performance/constants','selenium-webdriver','false','pjctc','path','iynAF','Failed\x20to\x20send\x20data\x20to\x20','./helper','uPxKm','TCG_AUTH_FAILURE','measures','platform','OzRgx','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','integrations','aeWdT','getLocalConfig','setCredentialsFromYmlConfig','startPercy','testContextOptions','central_scanner','2825402rmjJxj','getUserName','measureWrapper','SIGBREAK','setEnvCaps','SIGINT','qBzNa','cancel','Calling\x20Build\x20Stop\x20from\x20ExitHandler','debug','fileLogger'];a94_0x59d0=function(){return _0x18e8b8;};return a94_0x59d0();}class BrowserStackSetup{constructor(_0x29caf5,_0x2e840){const _0xd123e0=a94_0x19b5d7,_0x4ac488={'mbwPP':_0xd123e0(0xb3),'zXZqC':function(_0x6866c7){return _0x6866c7();},'uPkep':_0xd123e0(0x10b)},_0x1e1538=_0x4ac488[_0xd123e0(0x166)][_0xd123e0(0xb7)]('|');let _0x59bb9a=0x0;while(!![]){switch(_0x1e1538[_0x59bb9a++]){case'0':this[_0xd123e0(0xcd)]=helper[_0xd123e0(0x13f)](_0x29caf5);continue;case'1':this[_0xd123e0(0x15a)]=helper[_0xd123e0(0x9c)]();continue;case'2':this[_0xd123e0(0x16c)]=[];continue;case'3':this[_0xd123e0(0x153)]['platforms']=this['config']['platforms']||[];continue;case'4':global[_0xd123e0(0x125)]=_0x2e840;continue;case'5':helper[_0xd123e0(0x106)](this['config'],this[_0xd123e0(0xcd)],this[_0xd123e0(0x15a)]);continue;case'6':helper[_0xd123e0(0xc5)](this[_0xd123e0(0x153)],this[_0xd123e0(0xcd)]);continue;case'7':this[_0xd123e0(0x153)]['testContextOptions']=this['config'][_0xd123e0(0x96)]||{};continue;case'8':helper[_0xd123e0(0x94)](this[_0xd123e0(0x153)]);continue;case'9':PerformanceTester[_0xd123e0(0x15b)]();continue;case'10':this[_0xd123e0(0x153)][_0xd123e0(0x96)]['skipSessionStatus']=!helper['isBrowserstackInfra']()||helper[_0xd123e0(0xb2)](this[_0xd123e0(0x153)]['testContextOptions'][_0xd123e0(0xc6)]);continue;case'11':this[_0xd123e0(0x17b)]=_0x4ac488[_0xd123e0(0xe5)](uuidv4);continue;case'12':if(this['config'][_0xd123e0(0xf0)])throw new Error(this[_0xd123e0(0x153)][_0xd123e0(0xf0)]);continue;case'13':this[_0xd123e0(0x153)]['testContextOptions'][_0xd123e0(0x16d)]=!helper[_0xd123e0(0x11b)]()||helper['isTrue'](this[_0xd123e0(0x153)]['testContextOptions'][_0xd123e0(0x16d)]);continue;case'14':if(helper['isUndefined'](this[_0xd123e0(0x153)]))throw new Error(_0x4ac488[_0xd123e0(0x13c)]);continue;case'15':this[_0xd123e0(0xc0)]={};continue;case'16':this[_0xd123e0(0xd4)]=null;continue;case'17':this[_0xd123e0(0xe0)]=null;continue;case'18':helper[_0xd123e0(0xf9)](this['config'],this[_0xd123e0(0xcd)],this[_0xd123e0(0x15a)]);continue;case'19':this[_0xd123e0(0xcb)]=helper[_0xd123e0(0x17e)](_0x29caf5);continue;case'20':this[_0xd123e0(0x153)]=helper[_0xd123e0(0x18a)](this[_0xd123e0(0xcb)]);continue;case'21':this[_0xd123e0(0x125)]=_0x2e840;continue;case'22':helper[_0xd123e0(0x122)](this[_0xd123e0(0x153)]);continue;case'23':helper[_0xd123e0(0x15c)]();continue;}break;}}['preInitialize'](_0x1050e1){const _0x3a13cf=a94_0x19b5d7,_0xde0314={'SwBRD':'userName\x20or\x20accessKey\x20is\x20not\x20defined','qBzNa':function(_0x794677,_0x23a75c){return _0x794677===_0x23a75c;},'ZypVW':function(_0x141812,_0x40e126){return _0x141812===_0x40e126;},'LcSFg':_0x3a13cf(0x91),'kgGNp':'SDKTestAttempted','uiTIQ':function(_0x38b275,_0x245066){return _0x38b275<_0x245066;},'aEcIL':function(_0x5523cf,_0x512e4a){return _0x5523cf(_0x512e4a);},'qwJZJ':_0x3a13cf(0x190),'YhDwT':function(_0x5e1099,_0xf74a6c){return _0x5e1099===_0xf74a6c;},'Rvpbo':_0x3a13cf(0x111),'wndii':_0x3a13cf(0xfb),'QGaXH':_0x3a13cf(0xbf),'ARZAc':_0x3a13cf(0x17c),'zUVQd':_0x3a13cf(0x9d),'Xnjdr':_0x3a13cf(0xdb),'kEFNb':function(_0x4e8441,_0x10b0fc){return _0x4e8441!==_0x10b0fc;},'XHxbq':_0x3a13cf(0x115),'yYixT':'SIGABRT','ZfPtK':_0x3a13cf(0xcf),'PBykc':_0x3a13cf(0x9b),'fHzHr':'beforeExit'},_0x33cc8c=this['framework'];global[_0x3a13cf(0x153)]=this[_0x3a13cf(0x153)],helper['sanitizeCaps'](this['config']),this[_0x3a13cf(0xba)]=null,global[_0x3a13cf(0x17b)]=this[_0x3a13cf(0x17b)],logger[_0x3a13cf(0x150)](_0x3a13cf(0x144)+this[_0x3a13cf(0x17b)]),!this[_0x3a13cf(0x153)][_0x3a13cf(0xce)]&&(this[_0x3a13cf(0x153)][_0x3a13cf(0xce)]=this[_0x3a13cf(0x153)][_0x3a13cf(0x187)]||{});if(helper['isUndefined'](helper[_0x3a13cf(0x99)](this['config']))||helper[_0x3a13cf(0x188)](helper[_0x3a13cf(0x158)](this['config'])))throw new Error(_0xde0314[_0x3a13cf(0x110)]);helper[_0x3a13cf(0x93)](this[_0x3a13cf(0x153)])&&helper['isUndefined'](helper[_0x3a13cf(0x18e)](this['config']))&&(!helper[_0x3a13cf(0x188)](this[_0x3a13cf(0x153)][_0x3a13cf(0xce)])&&_0xde0314[_0x3a13cf(0x9e)](this['config'][_0x3a13cf(0xce)][_0x3a13cf(0x185)],Object)?!helper[_0x3a13cf(0xb2)](this[_0x3a13cf(0x153)][_0x3a13cf(0xce)][_0x3a13cf(0x179)])&&(this[_0x3a13cf(0x153)][_0x3a13cf(0xce)][_0x3a13cf(0xf8)]=helper[_0x3a13cf(0xde)]()):this['config'][_0x3a13cf(0xce)]={'localIdentifier':helper[_0x3a13cf(0xde)]()});this['config'][_0x3a13cf(0xce)][_0x3a13cf(0x179)]=helper[_0x3a13cf(0xb2)](this[_0x3a13cf(0x153)][_0x3a13cf(0xce)]['skipBinaryInitialisation']),helper[_0x3a13cf(0x174)](this['config']);if(_0xde0314[_0x3a13cf(0xbc)](_0x33cc8c,_0xde0314[_0x3a13cf(0xa8)]))return;this[_0x3a13cf(0x13a)]();process[_0x3a13cf(0xb0)][_0x3a13cf(0x131)]&&(this[_0x3a13cf(0x153)][_0x3a13cf(0xc3)]=helper[_0x3a13cf(0xb2)](process[_0x3a13cf(0xb0)]['BROWSERSTACK_TURBOSCALE']),this[_0x3a13cf(0x153)]['turboScaleOptions']=this['config']['turboScaleOptions']||{});helper['isTurboScaleSession'](this[_0x3a13cf(0x153)])&&(process[_0x3a13cf(0xb0)][_0x3a13cf(0x131)]=!![]);LoadTestModule['isLTSSession'](this['config'])&&logger[_0x3a13cf(0xa1)](_0x3a13cf(0x172)+this[_0x3a13cf(0x17b)]);if(!helper['isBrowserstackInfra']()){try{process[_0x3a13cf(0xb0)]['FRAMEWORK']=_0x33cc8c,utilities[_0x3a13cf(0x162)](_0xde0314[_0x3a13cf(0x123)],{},this[_0x3a13cf(0x153)],this[_0x3a13cf(0x125)]);}catch(_0x518288){logger['debug']('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x518288);}return;}if(helper['requireSeleniumWebdriverCheck'](_0x33cc8c)){if(global[_0x3a13cf(0xf2)])return;_0xde0314['uiTIQ'](_0xde0314['aEcIL'](parseInt,helper[_0x3a13cf(0xf1)](_0xde0314[_0x3a13cf(0xe6)])),0x3)&&(this['config'][_0x3a13cf(0x13e)]=![]),_0xde0314[_0x3a13cf(0x11c)](helper['compareVersions'](helper[_0x3a13cf(0xf1)](_0xde0314[_0x3a13cf(0xe6)]),_0xde0314[_0x3a13cf(0xc1)]),0x1)&&(this['config'][_0x3a13cf(0x13e)]=!![]);}(helper['isUndefined'](this[_0x3a13cf(0x153)][_0x3a13cf(0x101)])||helper[_0x3a13cf(0x188)](this[_0x3a13cf(0x153)][_0x3a13cf(0x101)][_0x3a13cf(0x129)]))&&(helper[_0x3a13cf(0x188)](this['config']['parallelsPerPlatform'])?logger[_0x3a13cf(0x150)](_0xde0314[_0x3a13cf(0x177)]):logger['warn'](_0xde0314[_0x3a13cf(0xdd)]),this[_0x3a13cf(0x153)][_0x3a13cf(0x101)]=[]);!this[_0x3a13cf(0x153)][_0x3a13cf(0x96)]&&(this[_0x3a13cf(0x153)][_0x3a13cf(0x96)]={});try{process[_0x3a13cf(0xb0)]['FRAMEWORK']=_0x1050e1['_'][0x0],utilities[_0x3a13cf(0x162)](_0xde0314[_0x3a13cf(0x123)],{},this[_0x3a13cf(0x153)],this[_0x3a13cf(0x125)]);}catch(_0x3c4641){logger[_0x3a13cf(0xa1)](_0x3a13cf(0xda)+_0x3c4641);}!this['config']['disableAutoCaptureLogs']&&logger[_0x3a13cf(0x150)](constants['AUTOLOGCAPTURE_NOTIFICATION']),this[_0x3a13cf(0x12c)]=this['intExitHandler']['bind'](this),process['on'](_0xde0314['ARZAc'],this[_0x3a13cf(0x12c)]),process['on'](_0xde0314[_0x3a13cf(0x11f)],this[_0x3a13cf(0x12c)]),process['on'](_0xde0314['Xnjdr'],this['intExitHandler']),_0xde0314[_0x3a13cf(0x189)](process[_0x3a13cf(0x8e)],_0xde0314[_0x3a13cf(0x147)])?(process['on'](_0xde0314['yYixT'],this[_0x3a13cf(0x12c)]),process['on'](_0xde0314[_0x3a13cf(0xed)],this[_0x3a13cf(0x12c)])):process['on'](_0xde0314['PBykc'],this[_0x3a13cf(0x12c)]),process['on'](_0xde0314['fHzHr'],this[_0x3a13cf(0xd2)]());}async[a94_0x19b5d7(0x159)](_0x52783e){const _0x689add=a94_0x19b5d7,_0x19f8da={'hiCjF':_0x689add(0x14e),'ydMcf':_0x689add(0xc7),'cwobz':'true','JzSRd':function(_0x446278,_0x4895bf){return _0x446278===_0x4895bf;},'IaPUQ':'playwright','qzXOA':function(_0x54db7c,_0x55a4ac){return _0x54db7c+_0x55a4ac;},'gspTC':'?caps=','SHJfb':function(_0x13794f,_0x5cf764){return _0x13794f(_0x5cf764);},'zOOyT':_0x689add(0x149)};this[_0x689add(0xd0)](_0x52783e);if(helper['isTurboScaleSession'](this['config'])){const _0xafafcf=await helper[_0x689add(0xf6)](this['config']);this[_0x689add(0x153)][_0x689add(0x169)]=_0xafafcf,_0xafafcf[_0x689add(0xb5)]&&helper[_0x689add(0x163)](this['config'][_0x689add(0xe0)])&&helper[_0x689add(0xb2)](this[_0x689add(0x153)][_0x689add(0xe0)])&&(this[_0x689add(0x153)][_0x689add(0xce)]['localIdentifier']=_0x19f8da['hiCjF'],this['config'][_0x689add(0xce)][_0x19f8da[_0x689add(0xf5)]]=_0xafafcf['customRepeaters'][_0x689add(0x170)](','),this['config']['browserStackLocalOptions'][_0x689add(0xc8)]=_0x19f8da[_0x689add(0x130)]),this[_0x689add(0x153)]['turboScaleUrl']=_0xafafcf[_0x689add(0x12f)],this[_0x689add(0x125)]&&_0x19f8da['JzSRd'](this['framework'][_0x689add(0xbd)](),_0x19f8da[_0x689add(0xa7)])?this[_0x689add(0x153)]['turboScaleUrl']=_0x19f8da[_0x689add(0x10d)](_0xafafcf[_0x689add(0x16e)],_0x19f8da[_0x689add(0xad)]):constants[_0x689add(0x148)]=helper[_0x689add(0x142)](this[_0x689add(0x153)]),logger[_0x689add(0xa1)](_0x689add(0xbb)+constants[_0x689add(0x148)]);}helper['setProxySettings'](this[_0x689add(0x153)]),this[_0x689add(0xec)](),_0x19f8da[_0x689add(0xc4)](setPercyFlag,this),await this[_0x689add(0x15f)](),![_0x19f8da['zOOyT'],_0x19f8da[_0x689add(0xa7)]]['includes'](this[_0x689add(0x125)])&&!helper[_0x689add(0x184)](this['config'])&&!helper['getCentralUser']()[_0x689add(0x97)]&&await this[_0x689add(0xae)]();}async[a94_0x19b5d7(0xa9)](){const _0x177832=a94_0x19b5d7,_0x1feec9={};_0x1feec9[_0x177832(0xb4)]=function(_0x3d10df,_0x44f789){return _0x3d10df===_0x44f789;},_0x1feec9[_0x177832(0x117)]=_0x177832(0x191),_0x1feec9[_0x177832(0x100)]='Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.',_0x1feec9[_0x177832(0x173)]='Percy\x20started\x20successfully',_0x1feec9[_0x177832(0x171)]=_0x177832(0x140),_0x1feec9[_0x177832(0x183)]=_0x177832(0x10f);const _0x27e154=_0x1feec9;if(helper[_0x177832(0xb2)](this[_0x177832(0x153)][_0x177832(0xd4)])&&(!this[_0x177832(0xd4)]||!this['percy'][_0x177832(0x102)]()))try{this[_0x177832(0xd4)]=await percyHelper[_0x177832(0x95)](this[_0x177832(0x153)]);if(!this[_0x177832(0xd4)]){process[_0x177832(0xb0)][_0x177832(0x176)]=_0x27e154[_0x177832(0x117)];throw new Error(_0x27e154[_0x177832(0x100)]);}logger[_0x177832(0x150)](_0x27e154['GqqDV']),process[_0x177832(0xb0)][_0x177832(0x176)]=_0x27e154[_0x177832(0x171)];let _0x3b87c9=0x0;const _0x4e5895=async()=>{const _0x1965e5=_0x177832;_0x3b87c9++,_0x27e154[_0x1965e5(0xb4)](_0x3b87c9,0x1)&&await this[_0x1965e5(0x128)]();};process['on'](_0x27e154[_0x177832(0x183)],_0x4e5895);}catch(_0x5d0590){process[_0x177832(0xb0)][_0x177832(0x176)]=_0x27e154[_0x177832(0x117)],logger[_0x177832(0xa1)]('Error\x20in\x20percy\x20setup\x20'+_0x5d0590);throw new Error(_0x5d0590['toString']());}}async[a94_0x19b5d7(0x128)](){const _0x44da97=a94_0x19b5d7,_0x4fc06c={};_0x4fc06c['oJJLY']=_0x44da97(0x18d),_0x4fc06c[_0x44da97(0xf4)]=_0x44da97(0xf3);const _0x1890eb=_0x4fc06c;if(this['percy']&&this['percy'][_0x44da97(0x102)]())try{await percyHelper[_0x44da97(0x128)](this[_0x44da97(0xd4)]),logger[_0x44da97(0x150)](_0x1890eb[_0x44da97(0xdc)]);}catch(_0x173fbc){logger['error'](_0x1890eb[_0x44da97(0xf4)],_0x173fbc[_0x44da97(0xd5)]);}}async['setupBrowserstackLocal'](){const _0x579a25=a94_0x19b5d7,_0x3dcf8d={};_0x3dcf8d[_0x579a25(0x154)]='Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled',_0x3dcf8d[_0x579a25(0xff)]=_0x579a25(0xd9);const _0x94b742=_0x3dcf8d;if(helper[_0x579a25(0x11b)]()&&helper[_0x579a25(0xb2)](this[_0x579a25(0x153)][_0x579a25(0xe0)])&&(!this[_0x579a25(0xe0)]||!this[_0x579a25(0xe0)][_0x579a25(0x102)]()))try{if(this['config'][_0x579a25(0xce)][_0x579a25(0x179)]){logger['debug'](_0x94b742[_0x579a25(0x154)]);return;}this[_0x579a25(0xe0)]=await helper[_0x579a25(0xd6)](this[_0x579a25(0x153)]),logger['info'](_0x94b742[_0x579a25(0xff)]);}catch(_0x4f93d8){logger[_0x579a25(0xa1)](_0x4f93d8);throw new Error(_0x4f93d8[_0x579a25(0x11d)]());}}async[a94_0x19b5d7(0xa6)](){const _0xa41773=a94_0x19b5d7,_0x252a6b={};_0x252a6b[_0xa41773(0x182)]=_0xa41773(0xfd),_0x252a6b[_0xa41773(0x8f)]='Error\x20occured\x20while\x20stopping\x20local\x20binary';const _0x12b46f=_0x252a6b;if(this[_0xa41773(0xe0)]&&this[_0xa41773(0xe0)]['isRunning']())try{await helper['stopLocalBinary'](this[_0xa41773(0xe0)]),logger['info'](_0x12b46f[_0xa41773(0x182)]);}catch(_0x20e793){logger[_0xa41773(0xf0)](_0x12b46f[_0xa41773(0x8f)],_0x20e793[_0xa41773(0xd5)]);}}async['setUpHubUrl'](){const _0x5f76a0=a94_0x19b5d7;return PerformanceTester[_0x5f76a0(0x9a)](PerformanceAutEvents[_0x5f76a0(0x112)],async()=>{const _0x27ace1=_0x5f76a0;await hubAllocator[_0x27ace1(0x168)](this[_0x27ace1(0x153)]);})();}async[a94_0x19b5d7(0x178)](){const _0x527168=a94_0x19b5d7,_0x1e9b3a={'aeWdT':function(_0x10e17e,_0x3c7852){return _0x10e17e(_0x3c7852);},'swGKz':_0x527168(0x138),'kWVEP':function(_0x4e1150,_0x5e9cae,_0x4d0fba,_0x1e185a,_0xf24411,_0x248f9c,_0x83524f){return _0x4e1150(_0x5e9cae,_0x4d0fba,_0x1e185a,_0xf24411,_0x248f9c,_0x83524f);},'aNsXF':'BrowserstackHealing.init\x20method\x20timed\x20out','WQOfA':_0x527168(0x18b),'TBhal':'../../package.json','RYUgc':'BrowserstackHealing.init','BSabN':function(_0x3bf7a6,_0x380a46){return _0x3bf7a6(_0x380a46);},'qKdtT':function(_0x47e55f,_0x39d413){return _0x47e55f===_0x39d413;},'msExJ':_0x527168(0x140),'eWiQz':function(_0x306f72,_0x103ada){return _0x306f72===_0x103ada;},'TfhNu':function(_0x3f57b5,_0x94779){return _0x3f57b5===_0x94779;},'AptVt':_0x527168(0x103),'NOwCj':function(_0x2932ea,_0x361ba1){return _0x2932ea===_0x361ba1;},'ofJyC':'Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','QFTlk':'Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','iynAF':_0x527168(0xd1),'HcTir':function(_0x1f850b,_0x5b4e6d){return _0x1f850b>=_0x5b4e6d;},'xkjIp':function(_0x2bfe43,_0x564a47){return _0x2bfe43<_0x564a47;},'xBrFl':function(_0x26951e,_0x5c4d73){return _0x26951e>=_0x5c4d73;},'mZbyz':_0x527168(0x16f),'ulpRl':_0x527168(0xcc),'Ggjyl':function(_0x2a19fa){return _0x2a19fa();}},_0x5863a9=PerformanceTester[_0x527168(0x9a)](_0x1e9b3a[_0x527168(0x164)],async()=>{const _0x5b0589=_0x527168;try{const _0x29d861=new Date(),_0x1f22c1=helper[_0x5b0589(0xef)](this[_0x5b0589(0x153)]),_0x586e91=_0x1e9b3a['aeWdT'](require,path[_0x5b0589(0x170)](__dirname,_0x1e9b3a[_0x5b0589(0xbe)])),_0x269398=_0x1e9b3a[_0x5b0589(0xc2)](timeoutPromise,constants[_0x5b0589(0x10e)],_0x1e9b3a[_0x5b0589(0xe4)],_0x1e9b3a[_0x5b0589(0x180)],_0x29d861,this[_0x5b0589(0x153)],this[_0x5b0589(0x125)]),_0x3d8052={'tcgUrl':constants[_0x5b0589(0x155)],'sdkVersion':_0x1e9b3a[_0x5b0589(0x92)](require,_0x1e9b3a[_0x5b0589(0x12b)])[_0x5b0589(0x127)],'methodUsed':_0x1e9b3a[_0x5b0589(0x136)],'proxyConfig':_0x1f22c1,'os':os['platform']()};if(_0x1f22c1&&_0x1f22c1[_0x5b0589(0x13b)]){utilities[_0x5b0589(0x162)](constants[_0x5b0589(0xaf)],_0x3d8052,this[_0x5b0589(0x153)],this['framework']);return;}const _0x2ab9c6={};_0x2ab9c6[_0x5b0589(0xc9)]=_0x1f22c1;const _0x1606ee=await Promise[_0x5b0589(0x16a)]([_0x586e91['init'](this['config'][_0x5b0589(0x18c)],this[_0x5b0589(0x153)][_0x5b0589(0xa4)],constants[_0x5b0589(0x155)],_0x1e9b3a[_0x5b0589(0x14f)](require,_0x1e9b3a[_0x5b0589(0x12b)])[_0x5b0589(0x127)],_0x2ab9c6)[_0x5b0589(0x16b)](_0x16dbde=>{const _0x1b4125=_0x5b0589;return _0x269398[_0x1b4125(0x9f)](),_0x16dbde;}),_0x269398]);_0x1606ee[_0x5b0589(0x135)]=_0x1e9b3a[_0x5b0589(0x152)](_0x1606ee[_0x5b0589(0x135)],_0x1e9b3a[_0x5b0589(0xfe)])||_0x1e9b3a[_0x5b0589(0x137)](_0x1606ee[_0x5b0589(0x135)],!![]);const _0x545d8b=_0x1e9b3a[_0x5b0589(0x152)](this['config'][_0x5b0589(0x133)],!![])||_0x1e9b3a['eWiQz'](this[_0x5b0589(0x153)][_0x5b0589(0x133)],_0x1e9b3a[_0x5b0589(0xfe)]);if(_0x1e9b3a['TfhNu'](_0x1606ee[_0x5b0589(0xd5)],constants['UPGRADE_REQUIRED'])&&_0x545d8b)logger[_0x5b0589(0x150)](_0x1e9b3a[_0x5b0589(0xe9)]);else{if(!_0x1606ee[_0x5b0589(0x14c)]&&_0x1e9b3a[_0x5b0589(0xeb)](_0x1606ee['status'],0x1f7)&&_0x545d8b)logger['info'](_0x1e9b3a[_0x5b0589(0x145)]),utilities[_0x5b0589(0x162)](constants['TCG_DOWN'],_0x3d8052,this[_0x5b0589(0x153)],this[_0x5b0589(0x125)]);else{if(!_0x1606ee[_0x5b0589(0x14c)]&&_0x545d8b){logger[_0x5b0589(0x150)](_0x1e9b3a[_0x5b0589(0x107)]);const _0x3f4812={'tcgUrl':constants[_0x5b0589(0x155)],'sdkVersion':_0x1e9b3a[_0x5b0589(0x92)](require,_0x1e9b3a[_0x5b0589(0x12b)])['version'],'methodUsed':_0x1e9b3a['RYUgc'],'proxyConfig':_0x1f22c1,'os':os[_0x5b0589(0x8e)]()};utilities['fireFunnelTestEvent'](constants[_0x5b0589(0x8c)],_0x3f4812,this[_0x5b0589(0x153)],this['framework']);}else{if(_0x1606ee[_0x5b0589(0x14c)]&&!_0x1606ee[_0x5b0589(0x135)]&&_0x545d8b)logger['info'](_0x1e9b3a[_0x5b0589(0x88)]);else{if(_0x1e9b3a[_0x5b0589(0xab)](_0x1606ee[_0x5b0589(0x143)],0xc8)&&_0x1e9b3a[_0x5b0589(0xa3)](_0x1606ee[_0x5b0589(0x143)],0x12c))utilities[_0x5b0589(0x162)](constants['AI_INIT_SUCCESSFUL'],_0x3d8052,this[_0x5b0589(0x153)],this[_0x5b0589(0x125)]);else{if(_0x1e9b3a[_0x5b0589(0xa5)](_0x1606ee[_0x5b0589(0x143)],0x190))_0x3d8052['status']=_0x1606ee[_0x5b0589(0x143)],utilities[_0x5b0589(0x162)](constants[_0x5b0589(0x175)],_0x3d8052,this[_0x5b0589(0x153)],this[_0x5b0589(0x125)]);else!_0x1606ee[_0x5b0589(0x143)]&&utilities[_0x5b0589(0x162)](constants[_0x5b0589(0xf7)],_0x3d8052,this[_0x5b0589(0x153)],this['framework']);}}}}}if(_0x1606ee[_0x5b0589(0x14c)]&&_0x1606ee[_0x5b0589(0x135)]){const _0x5f4ee1={};_0x5f4ee1[_0x5b0589(0xe3)]=_0x1606ee;const _0x52a1d3=_0x5f4ee1;_0x1f22c1&&(_0x52a1d3[_0x5b0589(0x13d)]=_0x1f22c1),_0x52a1d3[_0x5b0589(0x125)]=this['framework'],_0x52a1d3[_0x5b0589(0xaa)]=this[_0x5b0589(0x153)],helper[_0x5b0589(0x12a)](_0x52a1d3),logger[_0x5b0589(0xa1)](_0x1e9b3a['mZbyz']);}}catch(_0x2b6947){logger['debug'](_0x5b0589(0x90)+(_0x2b6947[_0x5b0589(0xd5)]?_0x2b6947['message']:''));}});await _0x1e9b3a['Ggjyl'](_0x5863a9);}[a94_0x19b5d7(0xec)](){const _0x11b04b=a94_0x19b5d7,_0x50f579={'doSkF':function(_0x1db18d,_0x448774){return _0x1db18d(_0x448774);},'oKgZV':'./setKeepAlive'};_0x50f579[_0x11b04b(0x10c)](require,_0x50f579[_0x11b04b(0xd7)])();}[a94_0x19b5d7(0x13a)](){const _0x5abd5f=a94_0x19b5d7,_0x50e923={};_0x50e923[_0x5abd5f(0x116)]=_0x5abd5f(0xac),_0x50e923[_0x5abd5f(0x156)]='unhandledRejection',_0x50e923[_0x5abd5f(0x192)]=_0x5abd5f(0x146);const _0x29d98e=_0x50e923,_0xec9a55=_0x14c6fd=>{const _0x4771dc=_0x5abd5f,_0x3a049f=_0x29d98e[_0x4771dc(0x116)][_0x4771dc(0xb7)]('|');let _0x3f2711=0x0;while(!![]){switch(_0x3a049f[_0x3f2711++]){case'0':ClientTroubleShootingService['reportFinalDetectionState']();continue;case'1':PerformanceTester[_0x4771dc(0x186)](_0x14c6fd);continue;case'2':logger[_0x4771dc(0xa1)](util[_0x4771dc(0x181)](_0x14c6fd));continue;case'3':this[_0x4771dc(0x16c)][_0x4771dc(0xb6)](util[_0x4771dc(0x181)]('%j',_0x14c6fd));continue;case'4':logger['error'](_0x14c6fd[_0x4771dc(0xd5)]);continue;}break;}};process['on'](_0x29d98e[_0x5abd5f(0x156)],_0xec9a55),process['on'](_0x29d98e[_0x5abd5f(0x192)],_0xec9a55);}async['intExitHandler'](_0x33d749){const _0x14b3ce=a94_0x19b5d7,_0x15e6ca={};_0x15e6ca[_0x14b3ce(0x8b)]=_0x14b3ce(0x119),_0x15e6ca[_0x14b3ce(0xe7)]=function(_0x375bc8,_0x3fea7f){return _0x375bc8+_0x3fea7f;},_0x15e6ca[_0x14b3ce(0xb9)]=_0x14b3ce(0x141),_0x15e6ca[_0x14b3ce(0x160)]='Shutdown\x20triggered\x20by\x20';const _0x290462=_0x15e6ca,_0x3c22b8=_0x290462[_0x14b3ce(0x8b)]['split']('|');let _0x339e9b=0x0;while(!![]){switch(_0x3c22b8[_0x339e9b++]){case'0':if(this[_0x290462[_0x14b3ce(0xe7)](_0x290462[_0x14b3ce(0xb9)],_0x33d749)])return;continue;case'1':await ClientTroubleShootingService[_0x14b3ce(0x12d)](_0x33d749);continue;case'2':this[_0x14b3ce(0xba)]=_0x33d749;continue;case'3':logger[_0x14b3ce(0x150)](_0x290462['gsAbG'](_0x290462[_0x14b3ce(0x160)],_0x33d749));continue;case'4':await TestHubHandler[_0x14b3ce(0x132)](_0x33d749);continue;case'5':this[_0x290462[_0x14b3ce(0xe7)](_0x290462[_0x14b3ce(0xb9)],_0x33d749)]=!![];continue;case'6':await BrowserstackCLI[_0x14b3ce(0x14b)]()['stop']();continue;case'7':await ClientTroubleShootingService['reportFinalDetectionState']();continue;}break;}}[a94_0x19b5d7(0xd2)](){const _0x4cbf6d=a94_0x19b5d7,_0x151ea1={'NtolB':function(_0x110cb9,_0x4225ff){return _0x110cb9===_0x4225ff;},'ccRdW':_0x4cbf6d(0xa0),'woXXc':function(_0x549bb5,_0xa1bade){return _0x549bb5>_0xa1bade;},'qTKGe':function(_0x126dfa,_0x4af77a){return _0x126dfa>_0x4af77a;},'fFzVN':function(_0x500347,_0x1b1e36){return _0x500347(_0x1b1e36);},'xqWXH':function(_0x216fbc){return _0x216fbc();},'KUYSl':_0x4cbf6d(0x121)};let _0x20a45e=0x0;return async()=>{const _0x769828=_0x4cbf6d;_0x20a45e++;if(_0x151ea1[_0x769828(0x161)](_0x20a45e,0x1)){helper[_0x769828(0x108)](this[_0x769828(0x125)])&&await this[_0x769828(0xa6)]();try{logger[_0x769828(0xa1)](_0x151ea1[_0x769828(0xfc)]),await TestHubHandler['stop'](_0x20a45e),await ClientTroubleShootingService[_0x769828(0x118)](),await BrowserstackCLI[_0x769828(0x14b)]()[_0x769828(0x132)]('1');}catch(_0x5aaab2){logger[_0x769828(0xa1)](_0x769828(0x114)+util[_0x769828(0x181)](_0x5aaab2));}PerformanceTester[_0x769828(0x12e)](PerformanceEvents[_0x769828(0x17a)]);if(PerformanceTester[_0x769828(0x11a)]()){const {measures:_0x3d6e81,errors:_0x6f6a9a}=await PerformanceTester[_0x769828(0x17d)](),_0x11c755={};if(_0x3d6e81&&_0x151ea1['woXXc'](_0x3d6e81[_0x769828(0x129)],0x0)||_0x6f6a9a&&_0x151ea1['qTKGe'](_0x6f6a9a['length'],0x0)){const _0x49a901={};_0x49a901[_0x769828(0x8d)]=_0x3d6e81,_0x49a901[_0x769828(0xb1)]=_0x6f6a9a,Object['assign'](_0x11c755,_0x49a901);}try{const _0x30f273=await helper[_0x769828(0x139)](_0x11c755,this[_0x769828(0x153)]);logger['debug'](_0x769828(0x11e)+_0x151ea1[_0x769828(0x167)](getEdsInstrumentationAPIUrl,'')+_0x769828(0x165)+_0x30f273[_0x769828(0x120)]);}catch(_0x50972f){logger['debug'](_0x769828(0x89)+_0x151ea1[_0x769828(0x167)](getEdsInstrumentationAPIUrl,'')+_0x769828(0x14d)+util[_0x769828(0x181)](_0x50972f));}try{fs[_0x769828(0xea)](path[_0x769828(0x170)](_0x151ea1[_0x769828(0x113)](getLogDir),_0x151ea1[_0x769828(0xca)]),JSON['stringify'](_0x11c755));}catch(_0x24ab79){logger['debug']('Error\x20in\x20writing\x20events\x20to\x20file\x20'+_0x24ab79);}}}logger&&logger[_0x769828(0x14a)](),fileLogger&&fileLogger[_0x769828(0x14a)]();};}}exports[a94_0x19b5d7(0x15d)]=BrowserStackSetup;