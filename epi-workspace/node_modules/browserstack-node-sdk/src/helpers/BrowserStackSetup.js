const a89_0x16c59b=a89_0x3683;(function(_0x5c91dc,_0xb23876){const _0x430391=a89_0x3683,_0x352725=_0x5c91dc();while(!![]){try{const _0x1e07d8=-parseInt(_0x430391(0x231))/0x1*(parseInt(_0x430391(0x272))/0x2)+-parseInt(_0x430391(0x292))/0x3+-parseInt(_0x430391(0x284))/0x4+parseInt(_0x430391(0x2e5))/0x5*(parseInt(_0x430391(0x2d4))/0x6)+parseInt(_0x430391(0x22b))/0x7*(-parseInt(_0x430391(0x210))/0x8)+parseInt(_0x430391(0x2a6))/0x9+parseInt(_0x430391(0x2f0))/0xa;if(_0x1e07d8===_0xb23876)break;else _0x352725['push'](_0x352725['shift']());}catch(_0x56c41a){_0x352725['push'](_0x352725['shift']());}}}(a89_0x391b,0x80279));function a89_0x3683(_0xbdd396,_0x27147a){const _0x391bda=a89_0x391b();return a89_0x3683=function(_0x3683ea,_0xbc8583){_0x3683ea=_0x3683ea-0x1eb;let _0xfa5c3e=_0x391bda[_0x3683ea];return _0xfa5c3e;},a89_0x3683(_0xbdd396,_0x27147a);}const util=require(a89_0x16c59b(0x2cb)),os=require('os'),path=require(a89_0x16c59b(0x2ac)),{v4:uuidv4}=require(a89_0x16c59b(0x21b)),fs=require('fs'),constants=require(a89_0x16c59b(0x2c6)),logger=require(a89_0x16c59b(0x23c))[a89_0x16c59b(0x2b0)],fileLogger=require('./logger')['fileLogger'],{getLogDir}=require('./logger'),helper=require(a89_0x16c59b(0x2c9)),utilities=require(a89_0x16c59b(0x291)),percyHelper=require(a89_0x16c59b(0x1f1)),hubAllocator=require(a89_0x16c59b(0x206)),PerformanceTester=require(a89_0x16c59b(0x1fd)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a89_0x16c59b(0x22d)),{setPercyFlag}=require(a89_0x16c59b(0x260)),TestHubHandler=require('./testhub/testhubHandler'),timeoutPromise=require(a89_0x16c59b(0x23d)),BrowserstackCLI=require(a89_0x16c59b(0x20c)),{getEdsInstrumentationAPIUrl}=require('../bin/utils/apiUtilityMethods');function a89_0x391b(){const _0x1e7e1f=['ats-repeater','playwright','SDK_CLEANUP','253736bWYOYV','TCG_DOWN','customRepeaters','kuzCR','__isPlaywrightInstalled','HYJTa','yNYon','SIGQUIT','getAccessKey','qoGPy','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','uuid','YDuyh','startMonitoring','includes','bDCeP','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','asOKF','intExitHandler','stop','events.json','platform','AdSyY','BrowserstackHealingInitFailed','BROWSERSTACK_PERCY','close','fireFunnelTestEvent','217nqXEsm','default','./performance/constants','statusCode','getLocalConfig','NrQVA','1470undHxq','./setKeepAlive','SIGINT','measureWrapper','setupBrowserstackLocal','version','integrations','kyiJA','SIGHUP','normalizeTestReportingEnvVars','init','./logger','./timeoutPromise','userName\x20or\x20accessKey\x20is\x20not\x20defined','rVmJx','jqEzP','gvRZc','getProxyConfigForTcg','killSignal','IvJwN','CBlMr','ISllB','Helnl','xAJQi','readConfig','length','turboScale','forceLocal','setEnvCaps','Gjnjr','TCG_URL','isRunning','getLocalIdentifier','UPGRADE_REQUIRED','getCentralUser','framework','KfrYd','TXJjk','isTrialGrid','YckOu','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','url','No\x20config\x20provided.','Percy\x20stopped','useW3C','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','YOdXe','./testhub/utils','mXMCx','env','Calling\x20Build\x20Stop\x20from\x20ExitHandler','Error\x20occured\x20while\x20stopping\x20percy','split','assign','tVale','selfHeal','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','requireSeleniumWebdriverCheck','playwrightUrl','BrowserstackHealing.init','nOMfQ','tcgAuthConfig','ZBbyY','ZySdv','isNotUndefined','940aXEyTr','stopLocalBinary','ooRWR','EuldJ','Local\x20binary\x20started\x20successfully','Error\x20occured\x20while\x20stopping\x20local\x20binary','unhandledRejection','checkStopLocalBinaryOnExit','ayxgJ','FRAMEWORK','CFXOn','win32','toString','SIGABRT','localOptions','then','Qqjfb','AI_INIT_FAILURE','3930276MyQZDp','\x20with\x20error\x20','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','eMPsX','getPackageVersion','NIzbo','setupTCGAuth','isTurboScaleSession','isHealingEnabled','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','zGqfY','setCLICaps','setLogLevel','./utilities','398937PlUDzS','lreqA','bind','proxyUrl','getTurboScaleGridDetails','XUsgt','0|1|2|3|5|4','oIpYO','status','fgWUC','toLowerCase','setupKeepAlive','ZnpBF','TCG_AUTH_TIMEOUT','debug','format','localIdentifier','Error\x20in\x20percy\x20setup\x20','skipBinaryInitialisation','skipSessionStatus','8826426SoKIqr','GTiTm','stopPercy','sanitizeCaps','join','custom-repeater','path','isBrowserstackInfra','exitHandler','selenium-webdriver','winstonLogger','browserStackLocalOptions','getInstance','setupTcgConfigFile','wLeNs','dJKze','info','captureError','BrowserstackHealing.init\x20method\x20timed\x20out','AI_INIT_SUCCESSFUL','setBrowserstackInfraFromConfig','TTrAW','kMVgd','message','SIGBREAK','lCwBS','UtqQR','INVALID_INIT_RESP_WITH_USER_IMPACT','SDK\x20run\x20started\x20with\x20id:\x20','unhandledErrors','getFinalCaps','IOSAO','../bin/utils/constants','handleExceptions','beforeExit','./helper','SIGTERM','util','disableAutoCaptureLogs','cancel','central_scanner','uDOWd','ZVtst','cliConfig','Failed\x20to\x20send\x20data\x20to\x20','BROWSERSTACK_TURBOSCALE','84haIRqo','Data\x20sent\x20successfully\x20to\x20','iImIl','fjtfj','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','startLocalBinary','OVURB','bstackConfig','\x20with\x20response\x20','userName','testContextOptions','browserstackLocal','turboScaleOptions','tcg\x20config\x20setup\x20successful.','grjZs','AkDZt','getHubUrl','279270jmyrno','SbDGK','isUndefined','setUpHubUrl','errorMessage','Local\x20binary\x20stopped','false','PsxCC','umvir','percy','config','15519260RsBVQz','JKvDX','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','sdkRunId','fsdRt','platforms','race','zRyQR','TPRvs','./percy/utils','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','initialize','setHandlePWError','skipSessionName','isEnabled','setLogDir','../../package.json','stopBrowserstackLocal','preInitialize','sendToEDS','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','./performance/performance-tester','isTrue','error','AYRzN','setupPercy','turboScaleUrl','BlhEi','push','true','../hubAllocationMethods','envConfig','Qotbm','parallelsPerPlatform','isAuthenticated','warn','../bin/v2/browserstackCLI'];a89_0x391b=function(){return _0x1e7e1f;};return a89_0x391b();}class BrowserStackSetup{constructor(_0x1dfaef,_0x4ab1eb){const _0x4ada37=a89_0x16c59b,_0x56380b={'tVale':'22|13|18|2|17|7|11|14|9|8|6|16|0|10|19|21|5|12|20|15|4|3|1','TXJjk':function(_0x28400d){return _0x28400d();},'wLeNs':_0x4ada37(0x25b)},_0x450052=_0x56380b[_0x4ada37(0x267)]['split']('|');let _0x7b4c6c=0x0;while(!![]){switch(_0x450052[_0x7b4c6c++]){case'0':global[_0x4ada37(0x254)]=_0x4ab1eb;continue;case'1':PerformanceTester[_0x4ada37(0x21d)]();continue;case'2':this[_0x4ada37(0x2df)]=null;continue;case'3':helper[_0x4ada37(0x290)](this[_0x4ada37(0x2ef)],this['cliConfig'],this[_0x4ada37(0x207)]);continue;case'4':helper[_0x4ada37(0x1f7)](this[_0x4ada37(0x2ef)]);continue;case'5':helper['setCredentialsFromYmlConfig'](this[_0x4ada37(0x2ef)]);continue;case'6':this['sdkRunId']=_0x56380b[_0x4ada37(0x256)](uuidv4);continue;case'7':this[_0x4ada37(0x2ef)]=helper[_0x4ada37(0x249)](helper['getConfigPath'](_0x1dfaef));continue;case'8':this[_0x4ada37(0x2e9)]={};continue;case'9':this[_0x4ada37(0x2ef)]['testContextOptions']=this[_0x4ada37(0x2ef)][_0x4ada37(0x2de)]||{};continue;case'10':if(helper['isUndefined'](this[_0x4ada37(0x2ef)]))throw new Error(_0x56380b[_0x4ada37(0x2b4)]);continue;case'11':this[_0x4ada37(0x2d1)]=helper[_0x4ada37(0x28f)](_0x1dfaef);continue;case'12':this[_0x4ada37(0x2ef)]['testContextOptions'][_0x4ada37(0x2a5)]=!helper['isBrowserstackInfra']()||helper[_0x4ada37(0x1fe)](this['config'][_0x4ada37(0x2de)][_0x4ada37(0x2a5)]);continue;case'13':helper[_0x4ada37(0x23a)]();continue;case'14':this[_0x4ada37(0x2ef)][_0x4ada37(0x1ed)]=this[_0x4ada37(0x2ef)]['platforms']||[];continue;case'15':helper[_0x4ada37(0x2c4)](this[_0x4ada37(0x2ef)],this['cliConfig'],this[_0x4ada37(0x207)]);continue;case'16':this['framework']=_0x4ab1eb;continue;case'17':this[_0x4ada37(0x2ee)]=null;continue;case'18':this[_0x4ada37(0x207)]=helper[_0x4ada37(0x24d)]();continue;case'19':if(this[_0x4ada37(0x2ef)][_0x4ada37(0x1ff)])throw new Error(this[_0x4ada37(0x2ef)][_0x4ada37(0x1ff)]);continue;case'20':this[_0x4ada37(0x2ef)]['testContextOptions'][_0x4ada37(0x1f5)]=!helper[_0x4ada37(0x2ad)]()||helper[_0x4ada37(0x1fe)](this['config']['testContextOptions'][_0x4ada37(0x1f5)]);continue;case'21':helper[_0x4ada37(0x2ba)](this[_0x4ada37(0x2ef)],this['cliConfig']);continue;case'22':this[_0x4ada37(0x2c3)]=[];continue;}break;}}[a89_0x16c59b(0x1fa)](_0x4eb425){const _0x125367=a89_0x16c59b,_0x21574c={'uDOWd':_0x125367(0x23e),'Qotbm':function(_0x520c97,_0x5bcf6f){return _0x520c97===_0x5bcf6f;},'susyK':_0x125367(0x237),'TPRvs':'SDKTestAttempted','SbDGK':function(_0x465db3,_0x8d22b7){return _0x465db3<_0x8d22b7;},'zGqfY':function(_0x2f7886,_0x104dab){return _0x2f7886(_0x104dab);},'AkDZt':_0x125367(0x2af),'dPAyI':'4.5.0','iImIl':_0x125367(0x269),'PsxCC':_0x125367(0x25e),'Qqjfb':_0x125367(0x2ca),'JKvDX':_0x125367(0x233),'feNWq':_0x125367(0x239),'EvLTc':function(_0x3f1bc2,_0x1d3525){return _0x3f1bc2!==_0x1d3525;},'YckOu':_0x125367(0x27d),'BlhEi':_0x125367(0x27f),'Dfygi':_0x125367(0x217),'EuldJ':_0x125367(0x2be),'GTiTm':_0x125367(0x2c8)},_0x1f974e=this[_0x125367(0x254)];global[_0x125367(0x2ef)]=this[_0x125367(0x2ef)],helper[_0x125367(0x2a9)](this['config']),this[_0x125367(0x243)]=null,global[_0x125367(0x1eb)]=this[_0x125367(0x1eb)],logger[_0x125367(0x2b6)](_0x125367(0x2c2)+this[_0x125367(0x1eb)]),!this[_0x125367(0x2ef)][_0x125367(0x2b1)]&&(this[_0x125367(0x2ef)][_0x125367(0x2b1)]=this[_0x125367(0x2ef)][_0x125367(0x280)]||{});if(helper[_0x125367(0x2e7)](helper['getUserName'](this['config']))||helper[_0x125367(0x2e7)](helper[_0x125367(0x218)](this[_0x125367(0x2ef)])))throw new Error(_0x21574c[_0x125367(0x2cf)]);helper[_0x125367(0x22f)](this[_0x125367(0x2ef)])&&helper['isUndefined'](helper[_0x125367(0x251)](this[_0x125367(0x2ef)]))&&(!helper['isUndefined'](this['config'][_0x125367(0x2b1)])&&_0x21574c[_0x125367(0x208)](this[_0x125367(0x2ef)][_0x125367(0x2b1)]['constructor'],Object)?!helper['isTrue'](this[_0x125367(0x2ef)][_0x125367(0x2b1)][_0x125367(0x2a4)])&&(this['config'][_0x125367(0x2b1)][_0x125367(0x2a2)]=helper['generateLocalIdentifier']()):this[_0x125367(0x2ef)][_0x125367(0x2b1)]={'localIdentifier':helper['generateLocalIdentifier']()});this[_0x125367(0x2ef)][_0x125367(0x2b1)]['skipBinaryInitialisation']=helper['isTrue'](this['config']['browserStackLocalOptions'][_0x125367(0x2a4)]),helper[_0x125367(0x1f4)](this['config']);if(_0x21574c[_0x125367(0x208)](_0x1f974e,_0x21574c['susyK']))return;this[_0x125367(0x2c7)]();process[_0x125367(0x262)][_0x125367(0x2d3)]&&(this[_0x125367(0x2ef)][_0x125367(0x24b)]=helper[_0x125367(0x1fe)](process['env'][_0x125367(0x2d3)]),this[_0x125367(0x2ef)][_0x125367(0x2e0)]=this['config'][_0x125367(0x2e0)]||{});helper['isTurboScaleSession'](this[_0x125367(0x2ef)])&&(process[_0x125367(0x262)][_0x125367(0x2d3)]=!![]);if(!helper[_0x125367(0x2ad)]()){try{process['env'][_0x125367(0x27b)]=_0x1f974e,utilities['fireFunnelTestEvent'](_0x21574c[_0x125367(0x1f0)],{},this[_0x125367(0x2ef)],this[_0x125367(0x254)]);}catch(_0x128f35){logger['debug'](_0x125367(0x286)+_0x128f35);}return;}if(helper[_0x125367(0x26a)](_0x1f974e)){if(global[_0x125367(0x214)])return;_0x21574c[_0x125367(0x2e6)](_0x21574c[_0x125367(0x28e)](parseInt,helper[_0x125367(0x288)](_0x21574c['AkDZt'])),0x3)&&(this[_0x125367(0x2ef)][_0x125367(0x25d)]=![]),_0x21574c[_0x125367(0x208)](helper['compareVersions'](helper[_0x125367(0x288)](_0x21574c[_0x125367(0x2e3)]),_0x21574c['dPAyI']),0x1)&&(this[_0x125367(0x2ef)][_0x125367(0x25d)]=!![]);}(helper['isUndefined'](this['config'][_0x125367(0x1ed)])||helper['isUndefined'](this[_0x125367(0x2ef)][_0x125367(0x1ed)][_0x125367(0x24a)]))&&(helper[_0x125367(0x2e7)](this[_0x125367(0x2ef)][_0x125367(0x209)])?logger[_0x125367(0x2b6)](_0x21574c[_0x125367(0x2d6)]):logger[_0x125367(0x20b)](_0x21574c[_0x125367(0x2ec)]),this['config'][_0x125367(0x1ed)]=[]);!this['config']['testContextOptions']&&(this['config']['testContextOptions']={});try{process['env']['FRAMEWORK']=_0x4eb425['_'][0x0],utilities['fireFunnelTestEvent'](_0x21574c['TPRvs'],{},this[_0x125367(0x2ef)],this[_0x125367(0x254)]);}catch(_0x18fe24){logger['debug']('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x18fe24);}!this['config'][_0x125367(0x2cc)]&&logger['info'](constants['AUTOLOGCAPTURE_NOTIFICATION']),this['intExitHandler']=this[_0x125367(0x222)][_0x125367(0x294)](this),process['on'](_0x21574c[_0x125367(0x282)],this[_0x125367(0x222)]),process['on'](_0x21574c[_0x125367(0x2f1)],this['intExitHandler']),process['on'](_0x21574c['feNWq'],this[_0x125367(0x222)]),_0x21574c['EvLTc'](process[_0x125367(0x225)],_0x21574c[_0x125367(0x258)])?(process['on'](_0x21574c[_0x125367(0x203)],this['intExitHandler']),process['on'](_0x21574c['Dfygi'],this['intExitHandler'])):process['on'](_0x21574c[_0x125367(0x275)],this[_0x125367(0x222)]),process['on'](_0x21574c[_0x125367(0x2a7)],this[_0x125367(0x2ae)]());}async[a89_0x16c59b(0x1f3)](_0x27093c){const _0x7d177c=a89_0x16c59b,_0x143e9c={'ZVtst':_0x7d177c(0x20d),'XUsgt':_0x7d177c(0x2ab),'PhQvG':_0x7d177c(0x205),'ISllB':function(_0x6763a3,_0x44c69c){return _0x6763a3===_0x44c69c;},'kMVgd':_0x7d177c(0x20e),'rVmJx':function(_0x1e0446,_0x46ce8e){return _0x1e0446+_0x46ce8e;},'fsdRt':'?caps=','IOSAO':function(_0x3cb824,_0x5dee65){return _0x3cb824(_0x5dee65);},'bDCeP':'codeceptjs'};this[_0x7d177c(0x1fa)](_0x27093c);if(helper[_0x7d177c(0x28b)](this[_0x7d177c(0x2ef)])){const _0x19b05e=await helper[_0x7d177c(0x296)](this['config']);this[_0x7d177c(0x2ef)]['turboScaleGridDetails']=_0x19b05e,_0x19b05e[_0x7d177c(0x257)]&&helper[_0x7d177c(0x271)](this['config'][_0x7d177c(0x2df)])&&helper['isTrue'](this[_0x7d177c(0x2ef)][_0x7d177c(0x2df)])&&(this[_0x7d177c(0x2ef)][_0x7d177c(0x2b1)][_0x7d177c(0x2a2)]=_0x143e9c[_0x7d177c(0x2d0)],this[_0x7d177c(0x2ef)][_0x7d177c(0x2b1)][_0x143e9c[_0x7d177c(0x297)]]=_0x19b05e[_0x7d177c(0x212)][_0x7d177c(0x2aa)](','),this[_0x7d177c(0x2ef)]['browserStackLocalOptions'][_0x7d177c(0x24c)]=_0x143e9c['PhQvG']),this['config'][_0x7d177c(0x202)]=_0x19b05e[_0x7d177c(0x25a)],this[_0x7d177c(0x254)]&&_0x143e9c[_0x7d177c(0x246)](this[_0x7d177c(0x254)][_0x7d177c(0x29c)](),_0x143e9c['kMVgd'])?this['config'][_0x7d177c(0x202)]=_0x143e9c[_0x7d177c(0x23f)](_0x19b05e[_0x7d177c(0x26b)],_0x143e9c[_0x7d177c(0x1ec)]):constants['hubUrl']=helper[_0x7d177c(0x2e4)](this[_0x7d177c(0x2ef)]),logger[_0x7d177c(0x2a0)](_0x7d177c(0x28d)+constants['hubUrl']);}helper['setProxySettings'](this[_0x7d177c(0x2ef)]),this[_0x7d177c(0x29d)](),_0x143e9c[_0x7d177c(0x2c5)](setPercyFlag,this),await this[_0x7d177c(0x235)](),![_0x143e9c[_0x7d177c(0x21f)],_0x143e9c[_0x7d177c(0x2bc)]][_0x7d177c(0x21e)](this[_0x7d177c(0x254)])&&!helper[_0x7d177c(0x28b)](this[_0x7d177c(0x2ef)])&&!helper[_0x7d177c(0x253)]()[_0x7d177c(0x2ce)]&&await this[_0x7d177c(0x2e8)]();}async[a89_0x16c59b(0x201)](){const _0x33937d=a89_0x16c59b,_0x27a1a0={};_0x27a1a0[_0x33937d(0x215)]=function(_0x2e39e7,_0x407a02){return _0x2e39e7===_0x407a02;},_0x27a1a0['IvJwN']=_0x33937d(0x2eb),_0x27a1a0['AcLtx']=_0x33937d(0x2d8),_0x27a1a0[_0x33937d(0x248)]='Percy\x20started\x20successfully',_0x27a1a0['umvir']=_0x33937d(0x205),_0x27a1a0[_0x33937d(0x245)]=_0x33937d(0x2c8);const _0x5d02b6=_0x27a1a0;if(helper[_0x33937d(0x1fe)](this['config'][_0x33937d(0x2ee)])&&(!this[_0x33937d(0x2ee)]||!this['percy']['isRunning']()))try{this[_0x33937d(0x2ee)]=await percyHelper['startPercy'](this['config']);if(!this[_0x33937d(0x2ee)]){process[_0x33937d(0x262)][_0x33937d(0x228)]=_0x5d02b6[_0x33937d(0x244)];throw new Error(_0x5d02b6['AcLtx']);}logger[_0x33937d(0x2b6)](_0x5d02b6['xAJQi']),process[_0x33937d(0x262)][_0x33937d(0x228)]=_0x5d02b6[_0x33937d(0x2ed)];let _0x29c1a0=0x0;const _0x1bf4da=async()=>{const _0x161d3c=_0x33937d;_0x29c1a0++,_0x5d02b6[_0x161d3c(0x215)](_0x29c1a0,0x1)&&await this[_0x161d3c(0x2a8)]();};process['on'](_0x5d02b6['CBlMr'],_0x1bf4da);}catch(_0x1e96b8){process[_0x33937d(0x262)][_0x33937d(0x228)]=_0x5d02b6['IvJwN'],logger[_0x33937d(0x2a0)](_0x33937d(0x2a3)+_0x1e96b8);throw new Error(_0x1e96b8[_0x33937d(0x27e)]());}}async[a89_0x16c59b(0x2a8)](){const _0x4f6f29=a89_0x16c59b,_0x2ee9a9={};_0x2ee9a9[_0x4f6f29(0x255)]=_0x4f6f29(0x25c),_0x2ee9a9[_0x4f6f29(0x200)]=_0x4f6f29(0x264);const _0x3d8f04=_0x2ee9a9;if(this[_0x4f6f29(0x2ee)]&&this['percy'][_0x4f6f29(0x250)]())try{await percyHelper[_0x4f6f29(0x2a8)](this['percy']),logger[_0x4f6f29(0x2b6)](_0x3d8f04[_0x4f6f29(0x255)]);}catch(_0xa5d4bc){logger[_0x4f6f29(0x1ff)](_0x3d8f04['AYRzN'],_0xa5d4bc[_0x4f6f29(0x2bd)]);}}async[a89_0x16c59b(0x235)](){const _0x78d4c6=a89_0x16c59b,_0x10ca73={};_0x10ca73[_0x78d4c6(0x299)]=_0x78d4c6(0x1fc),_0x10ca73[_0x78d4c6(0x2bf)]=_0x78d4c6(0x276);const _0x1c7d32=_0x10ca73;if(helper[_0x78d4c6(0x2ad)]()&&helper[_0x78d4c6(0x1fe)](this[_0x78d4c6(0x2ef)]['browserstackLocal'])&&(!this[_0x78d4c6(0x2df)]||!this[_0x78d4c6(0x2df)]['isRunning']()))try{if(this[_0x78d4c6(0x2ef)][_0x78d4c6(0x2b1)][_0x78d4c6(0x2a4)]){logger['debug'](_0x1c7d32['oIpYO']);return;}this[_0x78d4c6(0x2df)]=await helper[_0x78d4c6(0x2d9)](this[_0x78d4c6(0x2ef)]),logger[_0x78d4c6(0x2b6)](_0x1c7d32[_0x78d4c6(0x2bf)]);}catch(_0x536ae3){logger[_0x78d4c6(0x2a0)](_0x536ae3);throw new Error(_0x536ae3[_0x78d4c6(0x27e)]());}}async[a89_0x16c59b(0x1f9)](){const _0x41badf=a89_0x16c59b,_0x23a70f={};_0x23a70f['TBvyy']=_0x41badf(0x2ea),_0x23a70f[_0x41badf(0x219)]=_0x41badf(0x277);const _0x57b75d=_0x23a70f;if(this[_0x41badf(0x2df)]&&this['browserstackLocal'][_0x41badf(0x250)]())try{await helper[_0x41badf(0x273)](this[_0x41badf(0x2df)]),logger[_0x41badf(0x2b6)](_0x57b75d['TBvyy']);}catch(_0x373e8d){logger['error'](_0x57b75d['qoGPy'],_0x373e8d['message']);}}async['setUpHubUrl'](){const _0x5f2738=a89_0x16c59b;return PerformanceTester[_0x5f2738(0x234)](PerformanceAutEvents['HUB_MANAGEMENT'],async()=>{const _0x13d250=_0x5f2738;await hubAllocator['allocateHub'](this[_0x13d250(0x2ef)]);})();}async[a89_0x16c59b(0x28a)](){const _0xe509c1=a89_0x16c59b,_0x3954cd={'kRejm':function(_0x4c6da5,_0x37c691){return _0x4c6da5(_0x37c691);},'gvRZc':'../ai-sdk-node/bundle','kyiJA':function(_0x26e421,_0x44de21,_0x21d4a3,_0x3c7f88,_0x36248f,_0x5a89f8,_0x19feb4){return _0x26e421(_0x44de21,_0x21d4a3,_0x3c7f88,_0x36248f,_0x5a89f8,_0x19feb4);},'ayxgJ':_0xe509c1(0x2b8),'Gjnjr':_0xe509c1(0x227),'DKMJU':function(_0x526cc0,_0x255e9d){return _0x526cc0(_0x255e9d);},'YOdXe':_0xe509c1(0x1f8),'kuzCR':_0xe509c1(0x26c),'ooRWR':function(_0x2912fe,_0x556801){return _0x2912fe(_0x556801);},'UtqQR':function(_0xd86188,_0x17e6fc){return _0xd86188===_0x17e6fc;},'mXMCx':_0xe509c1(0x205),'obsCh':function(_0xddac06,_0x1916a1){return _0xddac06===_0x1916a1;},'nOMfQ':function(_0x3572c6,_0x560889){return _0x3572c6===_0x560889;},'NrQVA':function(_0x4806cc,_0x11cc1){return _0x4806cc===_0x11cc1;},'lreqA':_0xe509c1(0x21a),'ZBbyY':_0xe509c1(0x2f2),'dJKze':_0xe509c1(0x259),'OVMci':function(_0xbc58ca,_0xf7871c){return _0xbc58ca(_0xf7871c);},'XzdEu':_0xe509c1(0x1f2),'NIzbo':function(_0x41ef26,_0x49d92d){return _0x41ef26>=_0x49d92d;},'yNYon':function(_0x43cd37,_0x41ee2b){return _0x43cd37<_0x41ee2b;},'OVURB':_0xe509c1(0x2e1),'jqEzP':'aiHeal:tcgAuth','CFXOn':function(_0x2236c5){return _0x2236c5();}},_0x4bcdc4=PerformanceTester[_0xe509c1(0x234)](_0x3954cd[_0xe509c1(0x240)],async()=>{const _0x20e1be=_0xe509c1;try{const _0x2a062d=new Date(),_0x375bcb=helper[_0x20e1be(0x242)](this[_0x20e1be(0x2ef)]),_0x3a67cb=_0x3954cd['kRejm'](require,path[_0x20e1be(0x2aa)](__dirname,_0x3954cd[_0x20e1be(0x241)])),_0x52d79a=_0x3954cd[_0x20e1be(0x238)](timeoutPromise,constants[_0x20e1be(0x29f)],_0x3954cd[_0x20e1be(0x27a)],_0x3954cd[_0x20e1be(0x24e)],_0x2a062d,this[_0x20e1be(0x2ef)],this['framework']),_0x2bba9f={'tcgUrl':constants[_0x20e1be(0x24f)],'sdkVersion':_0x3954cd['DKMJU'](require,_0x3954cd['YOdXe'])[_0x20e1be(0x236)],'methodUsed':_0x3954cd[_0x20e1be(0x213)],'proxyConfig':_0x375bcb,'os':os[_0x20e1be(0x225)]()};if(_0x375bcb&&_0x375bcb[_0x20e1be(0x295)]){utilities[_0x20e1be(0x22a)](constants['AI_PROXY_FAILURE'],_0x2bba9f,this['config'],this[_0x20e1be(0x254)]);return;}const _0x343fa7={};_0x343fa7['proxy']=_0x375bcb;const _0x2e1fe9=await Promise[_0x20e1be(0x1ee)]([_0x3a67cb[_0x20e1be(0x23b)](this[_0x20e1be(0x2ef)]['accessKey'],this[_0x20e1be(0x2ef)][_0x20e1be(0x2dd)],constants['TCG_URL'],_0x3954cd[_0x20e1be(0x274)](require,_0x3954cd[_0x20e1be(0x25f)])[_0x20e1be(0x236)],_0x343fa7)[_0x20e1be(0x281)](_0x382fbe=>{const _0x484825=_0x20e1be;return _0x52d79a[_0x484825(0x2cd)](),_0x382fbe;}),_0x52d79a]);_0x2e1fe9[_0x20e1be(0x28c)]=_0x3954cd[_0x20e1be(0x2c0)](_0x2e1fe9['isHealingEnabled'],_0x3954cd[_0x20e1be(0x261)])||_0x3954cd['obsCh'](_0x2e1fe9['isHealingEnabled'],!![]);const _0x47ecef=_0x3954cd[_0x20e1be(0x26d)](this[_0x20e1be(0x2ef)][_0x20e1be(0x268)],!![])||_0x3954cd[_0x20e1be(0x2c0)](this[_0x20e1be(0x2ef)][_0x20e1be(0x268)],_0x3954cd[_0x20e1be(0x261)]);if(_0x3954cd[_0x20e1be(0x230)](_0x2e1fe9['message'],constants[_0x20e1be(0x252)])&&_0x47ecef)logger[_0x20e1be(0x2b6)](_0x3954cd[_0x20e1be(0x293)]);else{if(!_0x2e1fe9[_0x20e1be(0x20a)]&&_0x3954cd[_0x20e1be(0x230)](_0x2e1fe9[_0x20e1be(0x29a)],0x1f7)&&_0x47ecef)logger[_0x20e1be(0x2b6)](_0x3954cd[_0x20e1be(0x26f)]),utilities[_0x20e1be(0x22a)](constants[_0x20e1be(0x211)],_0x2bba9f,this[_0x20e1be(0x2ef)],this[_0x20e1be(0x254)]);else{if(!_0x2e1fe9['isAuthenticated']&&_0x47ecef){logger[_0x20e1be(0x2b6)](_0x3954cd[_0x20e1be(0x2b5)]);const _0x4951bd={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x3954cd['OVMci'](require,_0x3954cd['YOdXe'])[_0x20e1be(0x236)],'methodUsed':_0x3954cd[_0x20e1be(0x213)],'proxyConfig':_0x375bcb,'os':os['platform']()};utilities[_0x20e1be(0x22a)](constants['TCG_AUTH_FAILURE'],_0x4951bd,this[_0x20e1be(0x2ef)],this[_0x20e1be(0x254)]);}else{if(_0x2e1fe9[_0x20e1be(0x20a)]&&!_0x2e1fe9['isHealingEnabled']&&_0x47ecef)logger[_0x20e1be(0x2b6)](_0x3954cd['XzdEu']);else{if(_0x3954cd[_0x20e1be(0x289)](_0x2e1fe9[_0x20e1be(0x29a)],0xc8)&&_0x3954cd[_0x20e1be(0x216)](_0x2e1fe9[_0x20e1be(0x29a)],0x12c))utilities[_0x20e1be(0x22a)](constants[_0x20e1be(0x2b9)],_0x2bba9f,this[_0x20e1be(0x2ef)],this[_0x20e1be(0x254)]);else{if(_0x3954cd['NIzbo'](_0x2e1fe9[_0x20e1be(0x29a)],0x190))_0x2bba9f[_0x20e1be(0x29a)]=_0x2e1fe9[_0x20e1be(0x29a)],utilities[_0x20e1be(0x22a)](constants[_0x20e1be(0x283)],_0x2bba9f,this[_0x20e1be(0x2ef)],this['framework']);else!_0x2e1fe9[_0x20e1be(0x29a)]&&utilities[_0x20e1be(0x22a)](constants[_0x20e1be(0x2c1)],_0x2bba9f,this['config'],this[_0x20e1be(0x254)]);}}}}}if(_0x2e1fe9['isAuthenticated']&&_0x2e1fe9[_0x20e1be(0x28c)]){const _0x3da992={};_0x3da992[_0x20e1be(0x26e)]=_0x2e1fe9;const _0x1097ba=_0x3da992;_0x375bcb&&(_0x1097ba['proxyConfig']=_0x375bcb),_0x1097ba[_0x20e1be(0x254)]=this['framework'],_0x1097ba[_0x20e1be(0x2db)]=this[_0x20e1be(0x2ef)],helper[_0x20e1be(0x2b3)](_0x1097ba),logger[_0x20e1be(0x2a0)](_0x3954cd[_0x20e1be(0x2da)]);}}catch(_0x2ce775){logger[_0x20e1be(0x2a0)](_0x20e1be(0x220)+(_0x2ce775['message']?_0x2ce775[_0x20e1be(0x2bd)]:''));}});await _0x3954cd[_0xe509c1(0x27c)](_0x4bcdc4);}[a89_0x16c59b(0x29d)](){const _0x36f5e3=a89_0x16c59b,_0x27b836={'fgWUC':function(_0x55174c,_0x12fb9e){return _0x55174c(_0x12fb9e);},'krQHh':_0x36f5e3(0x232)};_0x27b836[_0x36f5e3(0x29b)](require,_0x27b836['krQHh'])();}['handleExceptions'](){const _0x232d3d=a89_0x16c59b,_0x3dc4b8={};_0x3dc4b8['YDuyh']=_0x232d3d(0x278),_0x3dc4b8['eMPsX']='uncaughtException';const _0x45bcf4=_0x3dc4b8,_0x38b37d=_0x1c1b1d=>{const _0x230fa0=_0x232d3d;logger[_0x230fa0(0x1ff)](_0x1c1b1d[_0x230fa0(0x2bd)]),logger[_0x230fa0(0x2a0)](util[_0x230fa0(0x2a1)](_0x1c1b1d)),this[_0x230fa0(0x2c3)][_0x230fa0(0x204)](util['format']('%j',_0x1c1b1d)),PerformanceTester[_0x230fa0(0x2b7)](_0x1c1b1d);};process['on'](_0x45bcf4[_0x232d3d(0x21c)],_0x38b37d),process['on'](_0x45bcf4[_0x232d3d(0x287)],_0x38b37d);}async[a89_0x16c59b(0x222)](_0x3e3f80){const _0x254f2d=a89_0x16c59b,_0x6f47c8={};_0x6f47c8[_0x254f2d(0x2d7)]=_0x254f2d(0x298),_0x6f47c8[_0x254f2d(0x1ef)]=function(_0xd824b5,_0xafb05a){return _0xd824b5+_0xafb05a;},_0x6f47c8['ZySdv']='handled',_0x6f47c8['AdSyY']='Shutdown\x20triggered\x20by\x20';const _0x38e148=_0x6f47c8,_0x3b6ac1=_0x38e148[_0x254f2d(0x2d7)][_0x254f2d(0x265)]('|');let _0x15b1e3=0x0;while(!![]){switch(_0x3b6ac1[_0x15b1e3++]){case'0':if(this[_0x38e148[_0x254f2d(0x1ef)](_0x38e148[_0x254f2d(0x270)],_0x3e3f80)])return;continue;case'1':this[_0x38e148[_0x254f2d(0x1ef)](_0x38e148[_0x254f2d(0x270)],_0x3e3f80)]=!![];continue;case'2':logger['info'](_0x38e148[_0x254f2d(0x1ef)](_0x38e148[_0x254f2d(0x226)],_0x3e3f80));continue;case'3':this[_0x254f2d(0x243)]=_0x3e3f80;continue;case'4':await BrowserstackCLI[_0x254f2d(0x2b2)]()[_0x254f2d(0x223)]();continue;case'5':await TestHubHandler['stop'](_0x3e3f80);continue;}break;}}[a89_0x16c59b(0x2ae)](){const _0x77df2e=a89_0x16c59b,_0x17ab07={'asOKF':function(_0x1a0734,_0x2db7b3){return _0x1a0734===_0x2db7b3;},'TTrAW':_0x77df2e(0x263),'ZnpBF':function(_0x361ade,_0x53080a){return _0x361ade>_0x53080a;},'grjZs':function(_0x26bb6d,_0x38ec82){return _0x26bb6d(_0x38ec82);},'rcQJn':function(_0x2b1207,_0x1f3a68){return _0x2b1207(_0x1f3a68);},'Helnl':function(_0x4c4ebc){return _0x4c4ebc();},'QIzZn':_0x77df2e(0x224)};let _0x412552=0x0;return async()=>{const _0x284389=_0x77df2e;_0x412552++;if(_0x17ab07[_0x284389(0x221)](_0x412552,0x1)){helper[_0x284389(0x279)](this['framework'])&&await this[_0x284389(0x1f9)]();try{logger['debug'](_0x17ab07[_0x284389(0x2bb)]),await TestHubHandler[_0x284389(0x223)](_0x412552),await BrowserstackCLI['getInstance']()[_0x284389(0x223)]('1');}catch(_0xde564b){logger[_0x284389(0x2a0)]('Error\x20in\x20sending\x20testhub\x20stop:\x20'+util[_0x284389(0x2a1)](_0xde564b));}PerformanceTester['end'](PerformanceEvents[_0x284389(0x20f)]);if(PerformanceTester[_0x284389(0x1f6)]()){const {measures:_0x29fb1d,errors:_0x11b3bc}=await PerformanceTester['finalize'](),_0x54f8b4={};if(_0x29fb1d&&_0x17ab07[_0x284389(0x29e)](_0x29fb1d['length'],0x0)||_0x11b3bc&&_0x17ab07[_0x284389(0x29e)](_0x11b3bc[_0x284389(0x24a)],0x0)){const _0x3ca6a={};_0x3ca6a['measures']=_0x29fb1d,_0x3ca6a['exceptions']=_0x11b3bc,Object[_0x284389(0x266)](_0x54f8b4,_0x3ca6a);}try{const _0x5a0f6d=await helper[_0x284389(0x1fb)](_0x54f8b4,this[_0x284389(0x2ef)]);logger[_0x284389(0x2a0)](_0x284389(0x2d5)+_0x17ab07[_0x284389(0x2e2)](getEdsInstrumentationAPIUrl,'')+_0x284389(0x2dc)+_0x5a0f6d[_0x284389(0x22e)]);}catch(_0x5994c7){logger[_0x284389(0x2a0)](_0x284389(0x2d2)+_0x17ab07['rcQJn'](getEdsInstrumentationAPIUrl,'')+_0x284389(0x285)+util['format'](_0x5994c7));}try{fs['writeFileSync'](path[_0x284389(0x2aa)](_0x17ab07[_0x284389(0x247)](getLogDir),_0x17ab07['QIzZn']),JSON['stringify'](_0x54f8b4));}catch(_0x5630e7){logger['debug']('Error\x20in\x20writing\x20events\x20to\x20file\x20'+_0x5630e7);}}}logger&&logger[_0x284389(0x229)](),fileLogger&&fileLogger[_0x284389(0x229)]();};}}exports[a89_0x16c59b(0x22c)]=BrowserStackSetup;