const a89_0x57b3d2=a89_0x499a;(function(_0x1e5c5e,_0x1542a9){const _0x2b8d2f=a89_0x499a,_0x1d1586=_0x1e5c5e();while(!![]){try{const _0x160d4f=-parseInt(_0x2b8d2f(0x13a))/0x1+-parseInt(_0x2b8d2f(0x129))/0x2+-parseInt(_0x2b8d2f(0x161))/0x3*(-parseInt(_0x2b8d2f(0x1b4))/0x4)+-parseInt(_0x2b8d2f(0x1a5))/0x5+-parseInt(_0x2b8d2f(0xd3))/0x6*(-parseInt(_0x2b8d2f(0xcf))/0x7)+-parseInt(_0x2b8d2f(0xd9))/0x8+parseInt(_0x2b8d2f(0x12f))/0x9*(parseInt(_0x2b8d2f(0x14d))/0xa);if(_0x160d4f===_0x1542a9)break;else _0x1d1586['push'](_0x1d1586['shift']());}catch(_0x3f66ef){_0x1d1586['push'](_0x1d1586['shift']());}}}(a89_0x5b7f,0x4417a));function a89_0x5b7f(){const _0x5c7299=['fileLogger','6652tlvgVU','default','qkBrq','assign','../bin/utils/constants','BrowserstackHealingInitFailed','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','SDK_CLEANUP','KkxtJ','RDeDv','getFinalCaps','fireFunnelTestEvent','skipSessionName','toString','vrTES','debug','lYgpV','HUB_MANAGEMENT','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','qECyc','TCG_URL','ntSoq','measureWrapper','uncaughtException','tcg\x20config\x20setup\x20successful.','cQeuD','tgLXF','MERuO','./performance/constants','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','setLogDir','Error\x20in\x20sending\x20testhub\x20stop:\x20','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','killSignal','setCredentialsFromYmlConfig','stopPercy','./helper','rMDmG','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','3374XLvBYV','SDKTestAttempted','uPHOW','status','4896IZXoTQ','win32','MSNUC','env','UuNae','../bin/utils/apiUtilityMethods','2397072WXLTgg','useW3C','toLowerCase','central_scanner','AI_PROXY_FAILURE','warn','false','isEnabled','Error\x20in\x20writing\x20events\x20to\x20file\x20','length','GxULF','handleExceptions','beBxY','allocateHub','preInitialize','cliConfig','SIGINT','exitHandler','compareVersions','./testhub/testhubHandler','ucQTT','exceptions','\x20with\x20error\x20','isHealingEnabled','BROWSERSTACK_TURBOSCALE','isTrialGrid','isTrue','isUndefined','BROWSERSTACK_PERCY','localOptions','zpEsl','njpIN','4.5.0','message','playwrightUrl','kKIIM','?caps=','XkgAn','VauLw','INVALID_INIT_RESP_WITH_USER_IMPACT','browserstackLocal','1|18|4|16|9|14|7|12|0|19|3|15|21|5|22|2|11|8|13|20|6|17|10','beforeExit','./utilities','vKCzJ','Error\x20occured\x20while\x20stopping\x20percy','setHandlePWError','turboScaleGridDetails','path','BbbTb','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','skipBinaryInitialisation','cBEFL','EkUtM','aiHeal:tcgAuth','uuid','AI_INIT_FAILURE','\x20with\x20response\x20','YBlwa','../../package.json','rbHUC','testContextOptions','skipSessionStatus','uNWOL','isavk','framework','version','yoHAu','platforms','Local\x20binary\x20stopped','dAbnK','statusCode','isRunning','getLocalIdentifier','bind','info','turboScale','stringify','Uzekz','TCG_DOWN','67426RtGdrn','Data\x20sent\x20successfully\x20to\x20','setupTcgConfigFile','SIGQUIT','GZfCj','SIGABRT','1158849lCQhFt','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','url','jyFFy','race','setupBrowserstackLocal','cDtEX','userName\x20or\x20accessKey\x20is\x20not\x20defined','phXEc','getLocalConfig','startLocalBinary','66902aPDRdI','proxyUrl','AksHy','readConfig','envConfig','Error\x20in\x20percy\x20setup\x20','stopBrowserstackLocal','BXviu','HLOBU','config','Failed\x20to\x20send\x20data\x20to\x20','isBrowserstackInfra','custom-repeater','setBrowserstackInfraFromConfig','winstonLogger','setupPercy','Local\x20binary\x20started\x20successfully','BrowserstackHealing.init','ytUrZ','20ZTzCSl','close','true','turboScaleUrl','JvPwS','getProxyConfigForTcg','TKbbx','format','SIGBREAK','handled','3|5|0|2|1|4','setLogLevel','./performance/performance-tester','TVfpW','setCLICaps','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','getAccessKey','UPGRADE_REQUIRED','pNynR','browserStackLocalOptions','105gksHkz','SDK\x20run\x20started\x20with\x20id:\x20','sanitizeCaps','No\x20config\x20provided.','localIdentifier','SIGTERM','setEnvCaps','codeceptjs','cancel','kTjtL','../hubAllocationMethods','GTQcr','hubUrl','wdpmZ','platform','getCentralUser','setUpHubUrl','__isPlaywrightInstalled','TCG_AUTH_TIMEOUT','playwright','./setKeepAlive','../ai-sdk-node/bundle','normalizeTestReportingEnvVars','../bin/v2/browserstackCLI','includes','LNDhl','XIISO','stop','gafmA','error','checkStopLocalBinaryOnExit','./logger','kUajL','intExitHandler','sendToEDS','isNotUndefined','unhandledRejection','selfHeal','oTocU','QlhHK','getInstance','isAuthenticated','setupKeepAlive','disableAutoCaptureLogs','join','Calling\x20Build\x20Stop\x20from\x20ExitHandler','turboScaleOptions','customRepeaters','isTurboScaleSession','nImao','SIGHUP','sdkRunId','userName','proxyConfig','setProxySettings','BrowserstackHealing.init\x20method\x20timed\x20out','pjyVH','init','startPercy','selenium-webdriver','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','OXnrt','percy','hgrdX','generateLocalIdentifier','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','wFjXX','proxy','149420qjIWYJ','IonqH','wQmcE','setupTCGAuth','LDuVV','constructor','XDJVC','WhqLe','WrfyL','getHubUrl','FRAMEWORK','getTurboScaleGridDetails','Shutdown\x20triggered\x20by\x20','TCG_AUTH_FAILURE'];a89_0x5b7f=function(){return _0x5c7299;};return a89_0x5b7f();}function a89_0x499a(_0x5198ee,_0x5829ab){const _0x5b7f9b=a89_0x5b7f();return a89_0x499a=function(_0x499ab2,_0x3f6162){_0x499ab2=_0x499ab2-0xaa;let _0x2b197c=_0x5b7f9b[_0x499ab2];return _0x2b197c;},a89_0x499a(_0x5198ee,_0x5829ab);}const util=require('util'),os=require('os'),path=require(a89_0x57b3d2(0x109)),{v4:uuidv4}=require(a89_0x57b3d2(0x110)),fs=require('fs'),constants=require(a89_0x57b3d2(0xac)),logger=require(a89_0x57b3d2(0x180))[a89_0x57b3d2(0x148)],fileLogger=require('./logger')[a89_0x57b3d2(0x1b3)],{getLogDir}=require(a89_0x57b3d2(0x180)),helper=require(a89_0x57b3d2(0xcc)),utilities=require(a89_0x57b3d2(0x104)),percyHelper=require('./percy/utils'),hubAllocator=require(a89_0x57b3d2(0x16b)),PerformanceTester=require(a89_0x57b3d2(0x159)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a89_0x57b3d2(0xc4)),{setPercyFlag}=require('./testhub/utils'),TestHubHandler=require(a89_0x57b3d2(0xec)),timeoutPromise=require('./timeoutPromise'),BrowserstackCLI=require(a89_0x57b3d2(0x178)),{getEdsInstrumentationAPIUrl}=require(a89_0x57b3d2(0xd8));class BrowserStackSetup{constructor(_0x4b7415,_0x3df0bc){const _0x2836d7=a89_0x57b3d2,_0x1ec183={'rMDmG':_0x2836d7(0x102),'ntSoq':function(_0x322ebf){return _0x322ebf();},'HLOBU':_0x2836d7(0x164)},_0x41d0db=_0x1ec183[_0x2836d7(0xcd)]['split']('|');let _0x15becd=0x0;while(!![]){switch(_0x41d0db[_0x15becd++]){case'0':this[_0x2836d7(0x143)][_0x2836d7(0x116)]=this[_0x2836d7(0x143)][_0x2836d7(0x116)]||{};continue;case'1':this['unhandledErrors']=[];continue;case'2':helper[_0x2836d7(0x147)](this[_0x2836d7(0x143)],this['cliConfig']);continue;case'3':this[_0x2836d7(0x194)]=_0x1ec183[_0x2836d7(0xbd)](uuidv4);continue;case'4':this['envConfig']=helper[_0x2836d7(0x167)]();continue;case'5':if(helper[_0x2836d7(0xf4)](this['config']))throw new Error(_0x1ec183[_0x2836d7(0x142)]);continue;case'6':helper[_0x2836d7(0xc6)](this[_0x2836d7(0x143)]);continue;case'7':this['cliConfig']=helper[_0x2836d7(0x15b)](_0x4b7415);continue;case'8':this[_0x2836d7(0x143)]['testContextOptions'][_0x2836d7(0x117)]=!helper[_0x2836d7(0x145)]()||helper['isTrue'](this[_0x2836d7(0x143)][_0x2836d7(0x116)][_0x2836d7(0x117)]);continue;case'9':this['percy']=null;continue;case'10':PerformanceTester['startMonitoring']();continue;case'11':helper[_0x2836d7(0xca)](this[_0x2836d7(0x143)]);continue;case'12':this[_0x2836d7(0x143)]['platforms']=this['config']['platforms']||[];continue;case'13':this[_0x2836d7(0x143)][_0x2836d7(0x116)]['skipSessionName']=!helper['isBrowserstackInfra']()||helper[_0x2836d7(0xf3)](this[_0x2836d7(0x143)][_0x2836d7(0x116)][_0x2836d7(0xb4)]);continue;case'14':this[_0x2836d7(0x143)]=helper[_0x2836d7(0x13d)](helper['getConfigPath'](_0x4b7415));continue;case'15':this['framework']=_0x3df0bc;continue;case'16':this[_0x2836d7(0x101)]=null;continue;case'17':helper[_0x2836d7(0x158)](this[_0x2836d7(0x143)],this['cliConfig'],this[_0x2836d7(0x13e)]);continue;case'18':helper[_0x2836d7(0x177)]();continue;case'19':this['errorMessage']={};continue;case'20':helper[_0x2836d7(0xb2)](this['config'],this[_0x2836d7(0xe8)],this[_0x2836d7(0x13e)]);continue;case'21':global[_0x2836d7(0x11a)]=_0x3df0bc;continue;case'22':if(this[_0x2836d7(0x143)][_0x2836d7(0x17e)])throw new Error(this[_0x2836d7(0x143)][_0x2836d7(0x17e)]);continue;}break;}}[a89_0x57b3d2(0xe7)](_0x1b96fe){const _0x4b6fc1=a89_0x57b3d2,_0x321dfe={'pNynR':_0x4b6fc1(0x136),'tgLXF':function(_0x398ba0,_0x1ba929){return _0x398ba0===_0x1ba929;},'rEpxJ':'integrations','ytUrZ':_0x4b6fc1(0xd0),'UuNae':function(_0x3a76b7,_0x48a493){return _0x3a76b7<_0x48a493;},'AksHy':function(_0x560e5b,_0x8620e){return _0x560e5b(_0x8620e);},'cQeuD':_0x4b6fc1(0x19c),'GZfCj':_0x4b6fc1(0xf9),'zVHMX':_0x4b6fc1(0x10b),'TKbbx':_0x4b6fc1(0xae),'oTocU':_0x4b6fc1(0x166),'vSODJ':_0x4b6fc1(0xe9),'mULCj':_0x4b6fc1(0x193),'gafmA':function(_0xa2f982,_0x4a1f08){return _0xa2f982!==_0x4a1f08;},'JvPwS':_0x4b6fc1(0xd4),'hgrdX':_0x4b6fc1(0x12e),'XIISO':_0x4b6fc1(0x12c),'zpEsl':_0x4b6fc1(0x155),'kUajL':_0x4b6fc1(0x103)},_0x433e21=this['framework'];global[_0x4b6fc1(0x143)]=this['config'],helper[_0x4b6fc1(0x163)](this[_0x4b6fc1(0x143)]),this['killSignal']=null,global['sdkRunId']=this[_0x4b6fc1(0x194)],logger[_0x4b6fc1(0x124)](_0x4b6fc1(0x162)+this['sdkRunId']),!this['config'][_0x4b6fc1(0x160)]&&(this[_0x4b6fc1(0x143)][_0x4b6fc1(0x160)]=this[_0x4b6fc1(0x143)][_0x4b6fc1(0xf6)]||{});if(helper[_0x4b6fc1(0xf4)](helper['getUserName'](this[_0x4b6fc1(0x143)]))||helper[_0x4b6fc1(0xf4)](helper[_0x4b6fc1(0x15d)](this['config'])))throw new Error(_0x321dfe[_0x4b6fc1(0x15f)]);helper[_0x4b6fc1(0x138)](this[_0x4b6fc1(0x143)])&&helper[_0x4b6fc1(0xf4)](helper[_0x4b6fc1(0x122)](this['config']))&&(!helper[_0x4b6fc1(0xf4)](this[_0x4b6fc1(0x143)][_0x4b6fc1(0x160)])&&_0x321dfe[_0x4b6fc1(0xc2)](this['config'][_0x4b6fc1(0x160)][_0x4b6fc1(0x1aa)],Object)?!helper['isTrue'](this[_0x4b6fc1(0x143)]['browserStackLocalOptions'][_0x4b6fc1(0x10c)])&&(this[_0x4b6fc1(0x143)][_0x4b6fc1(0x160)][_0x4b6fc1(0x165)]=helper[_0x4b6fc1(0x1a1)]()):this[_0x4b6fc1(0x143)][_0x4b6fc1(0x160)]={'localIdentifier':helper['generateLocalIdentifier']()});this['config'][_0x4b6fc1(0x160)][_0x4b6fc1(0x10c)]=helper[_0x4b6fc1(0xf3)](this[_0x4b6fc1(0x143)][_0x4b6fc1(0x160)]['skipBinaryInitialisation']),helper[_0x4b6fc1(0x107)](this[_0x4b6fc1(0x143)]);if(_0x321dfe[_0x4b6fc1(0xc2)](_0x433e21,_0x321dfe['rEpxJ']))return;this[_0x4b6fc1(0xe4)]();process[_0x4b6fc1(0xd6)][_0x4b6fc1(0xf1)]&&(this[_0x4b6fc1(0x143)][_0x4b6fc1(0x125)]=helper['isTrue'](process[_0x4b6fc1(0xd6)][_0x4b6fc1(0xf1)]),this[_0x4b6fc1(0x143)][_0x4b6fc1(0x18f)]=this['config'][_0x4b6fc1(0x18f)]||{});helper['isTurboScaleSession'](this[_0x4b6fc1(0x143)])&&(process[_0x4b6fc1(0xd6)][_0x4b6fc1(0xf1)]=!![]);if(!helper[_0x4b6fc1(0x145)]()){try{process[_0x4b6fc1(0xd6)][_0x4b6fc1(0x1af)]=_0x433e21,utilities[_0x4b6fc1(0xb3)](_0x321dfe[_0x4b6fc1(0x14c)],{},this[_0x4b6fc1(0x143)],this['framework']);}catch(_0xe5aae5){logger['debug'](_0x4b6fc1(0xc8)+_0xe5aae5);}return;}if(helper['requireSeleniumWebdriverCheck'](_0x433e21)){if(global[_0x4b6fc1(0x172)])return;_0x321dfe[_0x4b6fc1(0xd7)](_0x321dfe[_0x4b6fc1(0x13c)](parseInt,helper['getPackageVersion'](_0x321dfe[_0x4b6fc1(0xc1)])),0x3)&&(this['config'][_0x4b6fc1(0xda)]=![]),_0x321dfe[_0x4b6fc1(0xc2)](helper[_0x4b6fc1(0xeb)](helper['getPackageVersion'](_0x321dfe[_0x4b6fc1(0xc1)]),_0x321dfe[_0x4b6fc1(0x12d)]),0x1)&&(this['config'][_0x4b6fc1(0xda)]=!![]);}(helper[_0x4b6fc1(0xf4)](this[_0x4b6fc1(0x143)]['platforms'])||helper[_0x4b6fc1(0xf4)](this[_0x4b6fc1(0x143)][_0x4b6fc1(0x11d)][_0x4b6fc1(0xe2)]))&&(helper[_0x4b6fc1(0xf4)](this[_0x4b6fc1(0x143)]['parallelsPerPlatform'])?logger['info'](_0x321dfe['zVHMX']):logger[_0x4b6fc1(0xde)](_0x321dfe[_0x4b6fc1(0x153)]),this['config'][_0x4b6fc1(0x11d)]=[]);!this['config']['testContextOptions']&&(this[_0x4b6fc1(0x143)][_0x4b6fc1(0x116)]={});try{process[_0x4b6fc1(0xd6)][_0x4b6fc1(0x1af)]=_0x1b96fe['_'][0x0],utilities['fireFunnelTestEvent'](_0x321dfe[_0x4b6fc1(0x14c)],{},this[_0x4b6fc1(0x143)],this['framework']);}catch(_0xe0e89e){logger[_0x4b6fc1(0xb7)]('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0xe0e89e);}!this[_0x4b6fc1(0x143)][_0x4b6fc1(0x18c)]&&logger[_0x4b6fc1(0x124)](constants['AUTOLOGCAPTURE_NOTIFICATION']),this['intExitHandler']=this[_0x4b6fc1(0x182)][_0x4b6fc1(0x123)](this),process['on'](_0x321dfe[_0x4b6fc1(0x187)],this[_0x4b6fc1(0x182)]),process['on'](_0x321dfe['vSODJ'],this[_0x4b6fc1(0x182)]),process['on'](_0x321dfe['mULCj'],this[_0x4b6fc1(0x182)]),_0x321dfe[_0x4b6fc1(0x17d)](process[_0x4b6fc1(0x16f)],_0x321dfe[_0x4b6fc1(0x151)])?(process['on'](_0x321dfe[_0x4b6fc1(0x1a0)],this[_0x4b6fc1(0x182)]),process['on'](_0x321dfe[_0x4b6fc1(0x17b)],this[_0x4b6fc1(0x182)])):process['on'](_0x321dfe[_0x4b6fc1(0xf7)],this[_0x4b6fc1(0x182)]),process['on'](_0x321dfe[_0x4b6fc1(0x181)],this['exitHandler']());}async['initialize'](_0x18518d){const _0x32af01=a89_0x57b3d2,_0x575448={'jyFFy':'ats-repeater','KkxtJ':_0x32af01(0x146),'GTQcr':_0x32af01(0x14f),'LNDhl':function(_0x445939,_0x425463){return _0x445939===_0x425463;},'fMDSH':_0x32af01(0x174),'tFTjv':function(_0x52733d,_0x122a75){return _0x52733d+_0x122a75;},'WBJhG':_0x32af01(0xfd),'qECyc':function(_0x399f6c,_0x4ea72d){return _0x399f6c(_0x4ea72d);},'uNWOL':_0x32af01(0x168)};this['preInitialize'](_0x18518d);if(helper[_0x32af01(0x191)](this[_0x32af01(0x143)])){const _0x163b14=await helper[_0x32af01(0x1b0)](this[_0x32af01(0x143)]);this['config'][_0x32af01(0x108)]=_0x163b14,_0x163b14[_0x32af01(0xf2)]&&helper[_0x32af01(0x184)](this[_0x32af01(0x143)][_0x32af01(0x101)])&&helper[_0x32af01(0xf3)](this[_0x32af01(0x143)][_0x32af01(0x101)])&&(this['config'][_0x32af01(0x160)]['localIdentifier']=_0x575448[_0x32af01(0x132)],this[_0x32af01(0x143)]['browserStackLocalOptions'][_0x575448[_0x32af01(0xb0)]]=_0x163b14[_0x32af01(0x190)]['join'](','),this[_0x32af01(0x143)][_0x32af01(0x160)]['forceLocal']=_0x575448[_0x32af01(0x16c)]),this[_0x32af01(0x143)][_0x32af01(0x150)]=_0x163b14[_0x32af01(0x131)],this[_0x32af01(0x11a)]&&_0x575448[_0x32af01(0x17a)](this['framework'][_0x32af01(0xdb)](),_0x575448['fMDSH'])?this[_0x32af01(0x143)][_0x32af01(0x150)]=_0x575448['tFTjv'](_0x163b14[_0x32af01(0xfb)],_0x575448['WBJhG']):constants[_0x32af01(0x16d)]=helper[_0x32af01(0x1ae)](this[_0x32af01(0x143)]),logger[_0x32af01(0xb7)](_0x32af01(0xc5)+constants[_0x32af01(0x16d)]);}helper[_0x32af01(0x197)](this['config']),this[_0x32af01(0x18b)](),_0x575448[_0x32af01(0xbb)](setPercyFlag,this),await this[_0x32af01(0x134)](),![_0x575448[_0x32af01(0x118)],_0x575448['fMDSH']][_0x32af01(0x179)](this[_0x32af01(0x11a)])&&!helper[_0x32af01(0x191)](this[_0x32af01(0x143)])&&!helper[_0x32af01(0x170)]()[_0x32af01(0xdc)]&&await this[_0x32af01(0x171)]();}async[a89_0x57b3d2(0x149)](){const _0x5992fd=a89_0x57b3d2,_0x430efc={};_0x430efc[_0x5992fd(0xfc)]=function(_0x2f68d6,_0x3475eb){return _0x2f68d6===_0x3475eb;},_0x430efc[_0x5992fd(0xb1)]=_0x5992fd(0xdf),_0x430efc[_0x5992fd(0x1ad)]=_0x5992fd(0x130),_0x430efc['phXEc']='Percy\x20started\x20successfully',_0x430efc[_0x5992fd(0xe3)]=_0x5992fd(0x14f),_0x430efc[_0x5992fd(0xd1)]=_0x5992fd(0x103);const _0x20c901=_0x430efc;if(helper[_0x5992fd(0xf3)](this[_0x5992fd(0x143)][_0x5992fd(0x19f)])&&(!this[_0x5992fd(0x19f)]||!this[_0x5992fd(0x19f)][_0x5992fd(0x121)]()))try{this[_0x5992fd(0x19f)]=await percyHelper[_0x5992fd(0x19b)](this[_0x5992fd(0x143)]);if(!this[_0x5992fd(0x19f)]){process['env'][_0x5992fd(0xf5)]=_0x20c901[_0x5992fd(0xb1)];throw new Error(_0x20c901[_0x5992fd(0x1ad)]);}logger[_0x5992fd(0x124)](_0x20c901[_0x5992fd(0x137)]),process[_0x5992fd(0xd6)][_0x5992fd(0xf5)]=_0x20c901[_0x5992fd(0xe3)];let _0x3f80d5=0x0;const _0x226c69=async()=>{const _0x15b813=_0x5992fd;_0x3f80d5++,_0x20c901[_0x15b813(0xfc)](_0x3f80d5,0x1)&&await this[_0x15b813(0xcb)]();};process['on'](_0x20c901[_0x5992fd(0xd1)],_0x226c69);}catch(_0x56b6a6){process[_0x5992fd(0xd6)][_0x5992fd(0xf5)]=_0x20c901[_0x5992fd(0xb1)],logger['debug'](_0x5992fd(0x13f)+_0x56b6a6);throw new Error(_0x56b6a6[_0x5992fd(0xb5)]());}}async['stopPercy'](){const _0xede261=a89_0x57b3d2,_0x336925={};_0x336925['FmDof']='Percy\x20stopped',_0x336925[_0xede261(0x135)]=_0xede261(0x106);const _0x33d25e=_0x336925;if(this[_0xede261(0x19f)]&&this[_0xede261(0x19f)][_0xede261(0x121)]())try{await percyHelper[_0xede261(0xcb)](this[_0xede261(0x19f)]),logger[_0xede261(0x124)](_0x33d25e['FmDof']);}catch(_0x3e4314){logger[_0xede261(0x17e)](_0x33d25e['cDtEX'],_0x3e4314[_0xede261(0xfa)]);}}async[a89_0x57b3d2(0x134)](){const _0x30f9aa=a89_0x57b3d2,_0x501428={};_0x501428[_0x30f9aa(0x11f)]=_0x30f9aa(0x15c),_0x501428[_0x30f9aa(0x199)]=_0x30f9aa(0x14a);const _0x59ad23=_0x501428;if(helper[_0x30f9aa(0x145)]()&&helper[_0x30f9aa(0xf3)](this['config'][_0x30f9aa(0x101)])&&(!this[_0x30f9aa(0x101)]||!this[_0x30f9aa(0x101)][_0x30f9aa(0x121)]()))try{if(this['config']['browserStackLocalOptions'][_0x30f9aa(0x10c)]){logger[_0x30f9aa(0xb7)](_0x59ad23[_0x30f9aa(0x11f)]);return;}this[_0x30f9aa(0x101)]=await helper[_0x30f9aa(0x139)](this[_0x30f9aa(0x143)]),logger[_0x30f9aa(0x124)](_0x59ad23[_0x30f9aa(0x199)]);}catch(_0x1bd5a3){logger[_0x30f9aa(0xb7)](_0x1bd5a3);throw new Error(_0x1bd5a3[_0x30f9aa(0xb5)]());}}async[a89_0x57b3d2(0x140)](){const _0x113d65=a89_0x57b3d2,_0x5054ec={};_0x5054ec[_0x113d65(0x1a7)]=_0x113d65(0x11e),_0x5054ec[_0x113d65(0xb6)]='Error\x20occured\x20while\x20stopping\x20local\x20binary';const _0x33e7bd=_0x5054ec;if(this[_0x113d65(0x101)]&&this[_0x113d65(0x101)][_0x113d65(0x121)]())try{await helper['stopLocalBinary'](this['browserstackLocal']),logger[_0x113d65(0x124)](_0x33e7bd['wQmcE']);}catch(_0x305036){logger[_0x113d65(0x17e)](_0x33e7bd[_0x113d65(0xb6)],_0x305036[_0x113d65(0xfa)]);}}async[a89_0x57b3d2(0x171)](){const _0x155518=a89_0x57b3d2;return PerformanceTester['measureWrapper'](PerformanceAutEvents[_0x155518(0xb9)],async()=>{const _0x11b963=_0x155518;await hubAllocator[_0x11b963(0xe6)](this[_0x11b963(0x143)]);})();}async[a89_0x57b3d2(0x1a8)](){const _0x3fde42=a89_0x57b3d2,_0x5ab007={'WUafh':function(_0x592838,_0x3bc4bd){return _0x592838(_0x3bc4bd);},'OXnrt':_0x3fde42(0x176),'DILnQ':function(_0xaa8b42,_0xf1e335,_0x22c8d3,_0x3ceeb1,_0x30b0cf,_0x349521,_0x3c876f){return _0xaa8b42(_0xf1e335,_0x22c8d3,_0x3ceeb1,_0x30b0cf,_0x349521,_0x3c876f);},'YBlwa':_0x3fde42(0x198),'BbbTb':_0x3fde42(0xad),'ypasH':function(_0x473101,_0x306dd0){return _0x473101(_0x306dd0);},'WhqLe':_0x3fde42(0x114),'Uzekz':_0x3fde42(0x14b),'BXviu':function(_0x189a61,_0x1a12a7){return _0x189a61(_0x1a12a7);},'ucQTT':function(_0x154a18,_0x3b3d3e){return _0x154a18===_0x3b3d3e;},'rbHUC':'true','lYgpV':function(_0x55397c,_0x536d01){return _0x55397c===_0x536d01;},'wdpmZ':function(_0xbb60c9,_0x2168b0){return _0xbb60c9===_0x2168b0;},'VauLw':function(_0x5e8ff7,_0x14eb90){return _0x5e8ff7===_0x14eb90;},'iDqCh':function(_0x4128ce,_0xfba71d){return _0x4128ce===_0xfba71d;},'YrPPk':_0x3fde42(0x1a2),'qkBrq':function(_0x921a7d,_0x485b16){return _0x921a7d===_0x485b16;},'njpIN':_0x3fde42(0xba),'LDuVV':_0x3fde42(0xce),'gCtDW':function(_0x1d3358,_0x20b938){return _0x1d3358(_0x20b938);},'MSNUC':'Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','isavk':function(_0x55d55c,_0x4499c2){return _0x55d55c>=_0x4499c2;},'MERuO':function(_0x454826,_0x622efb){return _0x454826<_0x622efb;},'SaFVQ':_0x3fde42(0xc0),'yoHAu':_0x3fde42(0x10f),'kTjtL':function(_0x78d35e){return _0x78d35e();}},_0x3c4b66=PerformanceTester[_0x3fde42(0xbe)](_0x5ab007[_0x3fde42(0x11c)],async()=>{const _0x40b6d6=_0x3fde42;try{const _0x34e4f0=new Date(),_0xf29239=helper[_0x40b6d6(0x152)](this[_0x40b6d6(0x143)]),_0xabd8ea=_0x5ab007['WUafh'](require,path['join'](__dirname,_0x5ab007[_0x40b6d6(0x19e)])),_0x3b9073=_0x5ab007['DILnQ'](timeoutPromise,constants[_0x40b6d6(0x173)],_0x5ab007[_0x40b6d6(0x113)],_0x5ab007[_0x40b6d6(0x10a)],_0x34e4f0,this['config'],this[_0x40b6d6(0x11a)]),_0x1851ef={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x5ab007['ypasH'](require,_0x5ab007[_0x40b6d6(0x1ac)])[_0x40b6d6(0x11b)],'methodUsed':_0x5ab007[_0x40b6d6(0x127)],'proxyConfig':_0xf29239,'os':os[_0x40b6d6(0x16f)]()};if(_0xf29239&&_0xf29239[_0x40b6d6(0x13b)]){utilities[_0x40b6d6(0xb3)](constants[_0x40b6d6(0xdd)],_0x1851ef,this[_0x40b6d6(0x143)],this[_0x40b6d6(0x11a)]);return;}const _0x263206={};_0x263206[_0x40b6d6(0x1a4)]=_0xf29239;const _0x40d00b=await Promise[_0x40b6d6(0x133)]([_0xabd8ea[_0x40b6d6(0x19a)](this[_0x40b6d6(0x143)]['accessKey'],this[_0x40b6d6(0x143)][_0x40b6d6(0x195)],constants[_0x40b6d6(0xbc)],_0x5ab007[_0x40b6d6(0x141)](require,_0x5ab007['WhqLe'])[_0x40b6d6(0x11b)],_0x263206)['then'](_0x5679e4=>{const _0x23c4ef=_0x40b6d6;return _0x3b9073[_0x23c4ef(0x169)](),_0x5679e4;}),_0x3b9073]);_0x40d00b[_0x40b6d6(0xf0)]=_0x5ab007[_0x40b6d6(0xed)](_0x40d00b[_0x40b6d6(0xf0)],_0x5ab007[_0x40b6d6(0x115)])||_0x5ab007[_0x40b6d6(0xb8)](_0x40d00b[_0x40b6d6(0xf0)],!![]);const _0x18ccd5=_0x5ab007[_0x40b6d6(0x16e)](this[_0x40b6d6(0x143)][_0x40b6d6(0x186)],!![])||_0x5ab007[_0x40b6d6(0xff)](this[_0x40b6d6(0x143)][_0x40b6d6(0x186)],_0x5ab007[_0x40b6d6(0x115)]);if(_0x5ab007['iDqCh'](_0x40d00b['message'],constants[_0x40b6d6(0x15e)])&&_0x18ccd5)logger['info'](_0x5ab007['YrPPk']);else{if(!_0x40d00b[_0x40b6d6(0x18a)]&&_0x5ab007[_0x40b6d6(0xaa)](_0x40d00b['status'],0x1f7)&&_0x18ccd5)logger[_0x40b6d6(0x124)](_0x5ab007[_0x40b6d6(0xf8)]),utilities['fireFunnelTestEvent'](constants[_0x40b6d6(0x128)],_0x1851ef,this['config'],this['framework']);else{if(!_0x40d00b[_0x40b6d6(0x18a)]&&_0x18ccd5){logger['info'](_0x5ab007[_0x40b6d6(0x1a9)]);const _0x27b694={'tcgUrl':constants[_0x40b6d6(0xbc)],'sdkVersion':_0x5ab007['gCtDW'](require,_0x5ab007['WhqLe'])[_0x40b6d6(0x11b)],'methodUsed':_0x5ab007['Uzekz'],'proxyConfig':_0xf29239,'os':os[_0x40b6d6(0x16f)]()};utilities[_0x40b6d6(0xb3)](constants[_0x40b6d6(0x1b2)],_0x27b694,this[_0x40b6d6(0x143)],this[_0x40b6d6(0x11a)]);}else{if(_0x40d00b[_0x40b6d6(0x18a)]&&!_0x40d00b[_0x40b6d6(0xf0)]&&_0x18ccd5)logger['info'](_0x5ab007[_0x40b6d6(0xd5)]);else{if(_0x5ab007[_0x40b6d6(0x119)](_0x40d00b[_0x40b6d6(0xd2)],0xc8)&&_0x5ab007[_0x40b6d6(0xc3)](_0x40d00b[_0x40b6d6(0xd2)],0x12c))utilities[_0x40b6d6(0xb3)](constants['AI_INIT_SUCCESSFUL'],_0x1851ef,this[_0x40b6d6(0x143)],this[_0x40b6d6(0x11a)]);else{if(_0x5ab007['isavk'](_0x40d00b[_0x40b6d6(0xd2)],0x190))_0x1851ef['status']=_0x40d00b[_0x40b6d6(0xd2)],utilities[_0x40b6d6(0xb3)](constants[_0x40b6d6(0x111)],_0x1851ef,this[_0x40b6d6(0x143)],this[_0x40b6d6(0x11a)]);else!_0x40d00b[_0x40b6d6(0xd2)]&&utilities['fireFunnelTestEvent'](constants[_0x40b6d6(0x100)],_0x1851ef,this[_0x40b6d6(0x143)],this[_0x40b6d6(0x11a)]);}}}}}if(_0x40d00b['isAuthenticated']&&_0x40d00b['isHealingEnabled']){const _0x3f4553={};_0x3f4553['tcgAuthConfig']=_0x40d00b;const _0x20d445=_0x3f4553;_0xf29239&&(_0x20d445[_0x40b6d6(0x196)]=_0xf29239),_0x20d445[_0x40b6d6(0x11a)]=this[_0x40b6d6(0x11a)],_0x20d445['bstackConfig']=this[_0x40b6d6(0x143)],helper[_0x40b6d6(0x12b)](_0x20d445),logger[_0x40b6d6(0xb7)](_0x5ab007['SaFVQ']);}}catch(_0x75f227){logger[_0x40b6d6(0xb7)](_0x40b6d6(0x19d)+(_0x75f227[_0x40b6d6(0xfa)]?_0x75f227[_0x40b6d6(0xfa)]:''));}});await _0x5ab007[_0x3fde42(0x16a)](_0x3c4b66);}[a89_0x57b3d2(0x18b)](){const _0x265a5e=a89_0x57b3d2,_0x1ec8bc={'AgOOM':function(_0x389222,_0x331ce3){return _0x389222(_0x331ce3);},'DCejB':_0x265a5e(0x175)};_0x1ec8bc['AgOOM'](require,_0x1ec8bc['DCejB'])();}['handleExceptions'](){const _0x335a79=a89_0x57b3d2,_0x2848c7={};_0x2848c7[_0x335a79(0x1a3)]=_0x335a79(0x185),_0x2848c7[_0x335a79(0x1ab)]=_0x335a79(0xbf);const _0x1eb148=_0x2848c7,_0x4322e1=_0x54e912=>{const _0x5562ef=_0x335a79;logger[_0x5562ef(0x17e)](_0x54e912[_0x5562ef(0xfa)]),logger['debug'](util[_0x5562ef(0x154)](_0x54e912)),this['unhandledErrors']['push'](util[_0x5562ef(0x154)]('%j',_0x54e912)),PerformanceTester['captureError'](_0x54e912);};process['on'](_0x1eb148[_0x335a79(0x1a3)],_0x4322e1),process['on'](_0x1eb148[_0x335a79(0x1ab)],_0x4322e1);}async[a89_0x57b3d2(0x182)](_0xfe5433){const _0x26b054=a89_0x57b3d2,_0x57d2d7={};_0x57d2d7[_0x26b054(0x15a)]=_0x26b054(0x157),_0x57d2d7['XkgAn']=function(_0x2c346d,_0x597886){return _0x2c346d+_0x597886;},_0x57d2d7[_0x26b054(0x192)]=_0x26b054(0x1b1),_0x57d2d7[_0x26b054(0x188)]=_0x26b054(0x156),_0x57d2d7[_0x26b054(0x105)]=function(_0x2921d7,_0x3acd4e){return _0x2921d7+_0x3acd4e;};const _0x32b2ef=_0x57d2d7,_0x273a0c=_0x32b2ef['TVfpW']['split']('|');let _0x181d29=0x0;while(!![]){switch(_0x273a0c[_0x181d29++]){case'0':logger[_0x26b054(0x124)](_0x32b2ef['XkgAn'](_0x32b2ef[_0x26b054(0x192)],_0xfe5433));continue;case'1':await TestHubHandler['stop'](_0xfe5433);continue;case'2':this[_0x26b054(0xc9)]=_0xfe5433;continue;case'3':if(this[_0x32b2ef[_0x26b054(0xfe)](_0x32b2ef[_0x26b054(0x188)],_0xfe5433)])return;continue;case'4':await BrowserstackCLI[_0x26b054(0x189)]()[_0x26b054(0x17c)]();continue;case'5':this[_0x32b2ef[_0x26b054(0x105)](_0x32b2ef[_0x26b054(0x188)],_0xfe5433)]=!![];continue;}break;}}[a89_0x57b3d2(0xea)](){const _0x1b5263=a89_0x57b3d2,_0x14d038={'cBEFL':function(_0x335240,_0x43868b){return _0x335240===_0x43868b;},'HcnNr':_0x1b5263(0x18e),'beBxY':function(_0x5a07d6,_0x55aeef){return _0x5a07d6>_0x55aeef;},'EkUtM':function(_0x3b722d,_0x1dac5f){return _0x3b722d(_0x1dac5f);},'UwkJd':function(_0x5cc8f7){return _0x5cc8f7();},'IonqH':'events.json'};let _0x42f238=0x0;return async()=>{const _0x2d1bf7=_0x1b5263;_0x42f238++;if(_0x14d038[_0x2d1bf7(0x10d)](_0x42f238,0x1)){helper[_0x2d1bf7(0x17f)](this[_0x2d1bf7(0x11a)])&&await this['stopBrowserstackLocal']();try{logger[_0x2d1bf7(0xb7)](_0x14d038['HcnNr']),await TestHubHandler[_0x2d1bf7(0x17c)](_0x42f238),await BrowserstackCLI['getInstance']()[_0x2d1bf7(0x17c)]('1');}catch(_0x1f4bd6){logger[_0x2d1bf7(0xb7)](_0x2d1bf7(0xc7)+util[_0x2d1bf7(0x154)](_0x1f4bd6));}PerformanceTester['end'](PerformanceEvents[_0x2d1bf7(0xaf)]);if(PerformanceTester[_0x2d1bf7(0xe0)]()){const {measures:_0x3f5d3d,errors:_0x526251}=await PerformanceTester['finalize'](),_0x49e2d7={};if(_0x3f5d3d&&_0x14d038['beBxY'](_0x3f5d3d[_0x2d1bf7(0xe2)],0x0)||_0x526251&&_0x14d038[_0x2d1bf7(0xe5)](_0x526251['length'],0x0)){const _0x28b121={};_0x28b121['measures']=_0x3f5d3d,_0x28b121[_0x2d1bf7(0xee)]=_0x526251,Object[_0x2d1bf7(0xab)](_0x49e2d7,_0x28b121);}try{const _0x4c3c7e=await helper[_0x2d1bf7(0x183)](_0x49e2d7,this[_0x2d1bf7(0x143)]);logger[_0x2d1bf7(0xb7)](_0x2d1bf7(0x12a)+_0x14d038['EkUtM'](getEdsInstrumentationAPIUrl,'')+_0x2d1bf7(0x112)+_0x4c3c7e[_0x2d1bf7(0x120)]);}catch(_0x4ee0c4){logger['debug'](_0x2d1bf7(0x144)+_0x14d038[_0x2d1bf7(0x10e)](getEdsInstrumentationAPIUrl,'')+_0x2d1bf7(0xef)+util[_0x2d1bf7(0x154)](_0x4ee0c4));}try{fs['writeFileSync'](path[_0x2d1bf7(0x18d)](_0x14d038['UwkJd'](getLogDir),_0x14d038[_0x2d1bf7(0x1a6)]),JSON[_0x2d1bf7(0x126)](_0x49e2d7));}catch(_0x348ada){logger[_0x2d1bf7(0xb7)](_0x2d1bf7(0xe1)+_0x348ada);}}}logger&&logger[_0x2d1bf7(0x14e)](),fileLogger&&fileLogger['close']();};}}exports[a89_0x57b3d2(0x1b5)]=BrowserStackSetup;