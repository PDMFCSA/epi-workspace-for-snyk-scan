const a94_0x497078=a94_0x54ca;(function(_0x20218a,_0x42f445){const _0x29b839=a94_0x54ca,_0x59a9b6=_0x20218a();while(!![]){try{const _0x3eb788=-parseInt(_0x29b839(0x29c))/0x1+-parseInt(_0x29b839(0x290))/0x2+parseInt(_0x29b839(0x211))/0x3+-parseInt(_0x29b839(0x2dd))/0x4*(parseInt(_0x29b839(0x2d6))/0x5)+-parseInt(_0x29b839(0x2e0))/0x6*(-parseInt(_0x29b839(0x21d))/0x7)+-parseInt(_0x29b839(0x210))/0x8+parseInt(_0x29b839(0x1d8))/0x9;if(_0x3eb788===_0x42f445)break;else _0x59a9b6['push'](_0x59a9b6['shift']());}catch(_0x3f53c4){_0x59a9b6['push'](_0x59a9b6['shift']());}}}(a94_0x48d1,0x32fe1));const util=require(a94_0x497078(0x220)),os=require('os'),path=require(a94_0x497078(0x2c8)),{v4:uuidv4}=require('uuid'),fs=require('fs'),constants=require(a94_0x497078(0x2b1)),logger=require(a94_0x497078(0x1dd))[a94_0x497078(0x243)],fileLogger=require('./logger')[a94_0x497078(0x268)],{getLogDir}=require('./logger'),helper=require(a94_0x497078(0x24e)),utilities=require(a94_0x497078(0x242)),percyHelper=require(a94_0x497078(0x22c)),hubAllocator=require(a94_0x497078(0x1e0)),PerformanceTester=require('./performance/performance-tester'),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a94_0x497078(0x29a)),{setPercyFlag}=require(a94_0x497078(0x275)),TestHubHandler=require(a94_0x497078(0x1d1)),timeoutPromise=require(a94_0x497078(0x23e)),BrowserstackCLI=require(a94_0x497078(0x269)),LoadTestModule=require(a94_0x497078(0x1ea)),{getEdsInstrumentationAPIUrl}=require(a94_0x497078(0x28c)),ClientTroubleShootingService=require(a94_0x497078(0x27b));function a94_0x48d1(){const _0x3b60c6=['Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','BrowserstackHealingInitFailed','setupTCGAuth','uncaughtException','./performance/constants','sdkRunId','316085qIbBGQ','HUB_MANAGEMENT','getLocalConfig','KiZzP','false','VHinm','aQdPG','VBGCs','sJvFU','TCG_AUTH_FAILURE','stop','SIGABRT','FffUL','handled','initialize','TCG_DOWN','stopBrowserstackLocal','koQSD','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','Error\x20in\x20sending\x20testhub\x20stop:\x20','NcmaC','../bin/utils/constants','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','lrDun','getHubUrl','Yijbk','BGKyD','BzaKn','aiHeal:tcgAuth','getPackageVersion','GCXnO','mOBtH','tcg\x20config\x20setup\x20successful.','platforms','NJwIA','2|0|4|3|1','getFinalCaps','BPchf','AzzqH','UPGRADE_REQUIRED','constructor','UkKTn','join','version','path','measureWrapper','getProxyConfigForTcg','reportProcessInterruptionSituation','toString','generateLocalIdentifier','INVALID_INIT_RESP_WITH_USER_IMPACT','win32','custom-repeater','parallelsPerPlatform','Percy\x20started\x20successfully','JBxif','percy','Error\x20in\x20percy\x20setup\x20','10jaMkTW','fKHFG','turboScaleOptions','browserstackLocal','getConfigPath','oVQnN','SIGBREAK','648080mQHXBI','Data\x20sent\x20successfully\x20to\x20','Local\x20binary\x20started\x20successfully','6kAlePF','\x20with\x20error\x20','cliConfig','playwright','status','customRepeaters','isRunning','config','iniJZ','mQjrJ','nyrjU','isTurboScaleSession','./testhub/testhubHandler','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','AUTOLOGCAPTURE_NOTIFICATION','BrowserstackHealing.init','Failed\x20to\x20send\x20data\x20to\x20','debug','message','6588567ywUEVU','isTrue','assign','SDK_CLEANUP','getCentralUser','./logger','intExitHandler','FRAMEWORK','../hubAllocationMethods','default','Gdykf','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','setupTcgConfigFile','setEnvCaps','sanitizeCaps','isLTSSession','setupKeepAlive','0|2|4|6|7|1|3|5','../bin/v2/modules/loadTestModule','qlMXq','length','ddYUf','REIYR','mSPxd','turboScale','LIAnm','ats-repeater','hRFsy','error','AI_INIT_FAILURE','xDbxJ','nqutP','finalize','central_scanner','Fjsbq','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','eZDcF','BrowserstackHealing.init\x20method\x20timed\x20out','AI_INIT_SUCCESSFUL','getInstance','getTurboScaleGridDetails','selfHeal','GHuiK','errorMessage','Percy\x20stopped','beforeExit','SgJZp','Zalhx','setLogLevel','isUndefined','fOviz','issip','url','compareVersions','YXoux','YwTyF','2040056NiIweo','1206450QTutdp','?caps=','writeFileSync','unhandledErrors','handleExceptions','fireFunnelTestEvent','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','dSVrI','hubUrl','skipBinaryInitialisation','SIGTERM','dYMAP','2538669DWmKUQ','proxyConfig','buSib','util','\x20with\x20response\x20','TFpuQ','TLftl','warn','stopPercy','then','measures','rXETY','end','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','env','./percy/utils','proxy','UaEUR','proxyUrl','forceLocal','configPath','isAuthenticated','eNtPd','Calling\x20Build\x20Stop\x20from\x20ExitHandler','NMSGj','../ai-sdk-node/bundle','SDK\x20run\x20started\x20with\x20id:\x20','isBrowserstackInfra','userName\x20or\x20accessKey\x20is\x20not\x20defined','4.5.0','rIoCk','framework','Jkupg','./timeoutPromise','close','UayvI','EpLzC','./utilities','winstonLogger','preInitialize','events.json','sendToEDS','setLogDir','getAccessKey','OkHxk','killSignal','bRCDm','yGbum','stopLocalBinary','./helper','useW3C','skipSessionStatus','turboScaleUrl','Shutdown\x20triggered\x20by\x20','setUpHubUrl','SDKTestAttempted','GHbCA','kGHGw','format','Local\x20binary\x20stopped','testContextOptions','browserStackLocalOptions','SnUgE','SIGINT','init','selenium-webdriver','split','startPercy','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','info','isHealingEnabled','TCG_AUTH_TIMEOUT','platform','reportFinalDetectionState','bMyah','fileLogger','../bin/v2/browserstackCLI','Error\x20in\x20writing\x20events\x20to\x20file\x20','includes','getUserName','envConfig','__isPlaywrightInstalled','toLowerCase','BROWSERSTACK_PERCY','getLocalIdentifier','exceptions','bOlLr','setHandlePWError','./testhub/utils','unhandledRejection','exitHandler','gYkEF','readConfig','bind','../bin/utils/clientTroubleshootingService','skipSessionName','SIGHUP','LTS\x20session\x20enabled\x20for\x20this\x20run.\x20SDK\x20run\x20id:\x20','codeceptjs','Spbjd','cancel','startLocalBinary','../../package.json','TCG_URL','userName','isTrialGrid','tcgAuthConfig','BROWSERSTACK_TURBOSCALE','ToSFY','push','true','../bin/utils/apiUtilityMethods','xwAdb','stringify','uQUlK','785766oqrcCs','SIGQUIT','sWTgB','setupBrowserstackLocal','localIdentifier','captureError'];a94_0x48d1=function(){return _0x3b60c6;};return a94_0x48d1();}function a94_0x54ca(_0x4ce88b,_0x1bcc68){const _0x48d1f6=a94_0x48d1();return a94_0x54ca=function(_0x54ca51,_0x3a33ba){_0x54ca51=_0x54ca51-0x1c9;let _0x532feb=_0x48d1f6[_0x54ca51];return _0x532feb;},a94_0x54ca(_0x4ce88b,_0x1bcc68);}class BrowserStackSetup{constructor(_0x1170c7,_0x2be732){const _0x106010=a94_0x497078,_0x7c67e7={'buSib':'13|20|22|12|8|23|3|15|5|10|11|4|9|1|2|18|7|17|19|14|0|16|6|21','issip':'No\x20config\x20provided.','bOlLr':function(_0x221b6d){return _0x221b6d();}},_0x201fbe=_0x7c67e7[_0x106010(0x21f)]['split']('|');let _0x1a8f07=0x0;while(!![]){switch(_0x201fbe[_0x1a8f07++]){case'0':helper[_0x106010(0x2c0)](this[_0x106010(0x1cc)],this['cliConfig'],this[_0x106010(0x26d)]);continue;case'1':global[_0x106010(0x23c)]=_0x2be732;continue;case'2':if(helper[_0x106010(0x209)](this[_0x106010(0x1cc)]))throw new Error(_0x7c67e7[_0x106010(0x20b)]);continue;case'3':this[_0x106010(0x1cc)]=helper[_0x106010(0x279)](this[_0x106010(0x231)]);continue;case'4':this[_0x106010(0x29b)]=_0x7c67e7[_0x106010(0x273)](uuidv4);continue;case'5':this[_0x106010(0x1cc)]['platforms']=this['config'][_0x106010(0x2bd)]||[];continue;case'6':helper[_0x106010(0x208)](this['config'],this['cliConfig'],this['envConfig']);continue;case'7':helper['setBrowserstackInfraFromConfig'](this[_0x106010(0x1cc)],this['cliConfig']);continue;case'8':this[_0x106010(0x2d4)]=null;continue;case'9':this[_0x106010(0x23c)]=_0x2be732;continue;case'10':this[_0x106010(0x1cc)][_0x106010(0x259)]=this['config'][_0x106010(0x259)]||{};continue;case'11':this[_0x106010(0x203)]={};continue;case'12':this['browserstackLocal']=null;continue;case'13':this[_0x106010(0x214)]=[];continue;case'14':this[_0x106010(0x1cc)][_0x106010(0x259)][_0x106010(0x27c)]=!helper[_0x106010(0x238)]()||helper['isTrue'](this['config'][_0x106010(0x259)][_0x106010(0x27c)]);continue;case'15':this[_0x106010(0x2e2)]=helper['setCLICaps'](_0x1170c7);continue;case'16':helper[_0x106010(0x247)](this[_0x106010(0x1cc)]);continue;case'17':helper['setCredentialsFromYmlConfig'](this['config']);continue;case'18':if(this[_0x106010(0x1cc)][_0x106010(0x1f4)])throw new Error(this[_0x106010(0x1cc)][_0x106010(0x1f4)]);continue;case'19':this[_0x106010(0x1cc)]['testContextOptions'][_0x106010(0x250)]=!helper['isBrowserstackInfra']()||helper[_0x106010(0x1d9)](this['config']['testContextOptions'][_0x106010(0x250)]);continue;case'20':helper['normalizeTestReportingEnvVars']();continue;case'21':PerformanceTester['startMonitoring']();continue;case'22':this[_0x106010(0x26d)]=helper[_0x106010(0x1e5)]();continue;case'23':this['configPath']=helper[_0x106010(0x2da)](_0x1170c7);continue;}break;}}[a94_0x497078(0x244)](_0x259b16){const _0x56bb23=a94_0x497078,_0x573c13={'Spbjd':_0x56bb23(0x239),'Fjsbq':function(_0x2a840c,_0x3348e4){return _0x2a840c===_0x3348e4;},'fKHFG':function(_0x22616b,_0x4d7f7c){return _0x22616b===_0x4d7f7c;},'pSZNj':'integrations','XuNvH':_0x56bb23(0x254),'bMyah':function(_0x12c23a,_0x5576f0){return _0x12c23a<_0x5576f0;},'mSPxd':function(_0x56a2b9,_0x2a1843){return _0x56a2b9(_0x2a1843);},'gYkEF':_0x56bb23(0x25e),'oXFwH':function(_0x7493c3,_0x4a5671){return _0x7493c3===_0x4a5671;},'YLESV':_0x56bb23(0x23a),'qlMXq':'Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','nXhNg':_0x56bb23(0x1e3),'nOCbj':_0x56bb23(0x21b),'iniJZ':_0x56bb23(0x25c),'mOBtH':_0x56bb23(0x27d),'sJvFU':function(_0x948388,_0x5bcaa1){return _0x948388!==_0x5bcaa1;},'oVQnN':_0x56bb23(0x2cf),'Zalhx':_0x56bb23(0x2a7),'VBGCs':_0x56bb23(0x291),'AZwRH':_0x56bb23(0x2dc),'mPEMK':_0x56bb23(0x205)},_0x353ef4=this[_0x56bb23(0x23c)];global[_0x56bb23(0x1cc)]=this[_0x56bb23(0x1cc)],helper[_0x56bb23(0x1e6)](this['config']),this[_0x56bb23(0x24a)]=null,global[_0x56bb23(0x29b)]=this[_0x56bb23(0x29b)],logger['info'](_0x56bb23(0x237)+this[_0x56bb23(0x29b)]),!this[_0x56bb23(0x1cc)][_0x56bb23(0x25a)]&&(this['config']['browserStackLocalOptions']=this[_0x56bb23(0x1cc)]['localOptions']||{});if(helper['isUndefined'](helper[_0x56bb23(0x26c)](this[_0x56bb23(0x1cc)]))||helper['isUndefined'](helper[_0x56bb23(0x248)](this['config'])))throw new Error(_0x573c13[_0x56bb23(0x280)]);helper[_0x56bb23(0x29e)](this[_0x56bb23(0x1cc)])&&helper[_0x56bb23(0x209)](helper[_0x56bb23(0x271)](this[_0x56bb23(0x1cc)]))&&(!helper[_0x56bb23(0x209)](this[_0x56bb23(0x1cc)][_0x56bb23(0x25a)])&&_0x573c13[_0x56bb23(0x1fa)](this[_0x56bb23(0x1cc)]['browserStackLocalOptions'][_0x56bb23(0x2c4)],Object)?!helper[_0x56bb23(0x1d9)](this[_0x56bb23(0x1cc)][_0x56bb23(0x25a)][_0x56bb23(0x21a)])&&(this[_0x56bb23(0x1cc)]['browserStackLocalOptions']['localIdentifier']=helper['generateLocalIdentifier']()):this[_0x56bb23(0x1cc)][_0x56bb23(0x25a)]={'localIdentifier':helper[_0x56bb23(0x2cd)]()});this['config'][_0x56bb23(0x25a)][_0x56bb23(0x21a)]=helper[_0x56bb23(0x1d9)](this['config'][_0x56bb23(0x25a)][_0x56bb23(0x21a)]),helper[_0x56bb23(0x274)](this['config']);if(_0x573c13[_0x56bb23(0x2d7)](_0x353ef4,_0x573c13['pSZNj']))return;this[_0x56bb23(0x215)]();process[_0x56bb23(0x22b)][_0x56bb23(0x288)]&&(this[_0x56bb23(0x1cc)][_0x56bb23(0x1f0)]=helper[_0x56bb23(0x1d9)](process[_0x56bb23(0x22b)][_0x56bb23(0x288)]),this[_0x56bb23(0x1cc)][_0x56bb23(0x2d8)]=this[_0x56bb23(0x1cc)][_0x56bb23(0x2d8)]||{});helper[_0x56bb23(0x1d0)](this[_0x56bb23(0x1cc)])&&(process[_0x56bb23(0x22b)][_0x56bb23(0x288)]=!![]);LoadTestModule[_0x56bb23(0x1e7)](this[_0x56bb23(0x1cc)])&&logger[_0x56bb23(0x1d6)](_0x56bb23(0x27e)+this[_0x56bb23(0x29b)]);if(!helper[_0x56bb23(0x238)]()){try{process['env'][_0x56bb23(0x1df)]=_0x353ef4,utilities['fireFunnelTestEvent'](_0x573c13['XuNvH'],{},this[_0x56bb23(0x1cc)],this[_0x56bb23(0x23c)]);}catch(_0x59732d){logger[_0x56bb23(0x1d6)]('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x59732d);}return;}if(helper['requireSeleniumWebdriverCheck'](_0x353ef4)){if(global[_0x56bb23(0x26e)])return;_0x573c13[_0x56bb23(0x267)](_0x573c13[_0x56bb23(0x1ef)](parseInt,helper[_0x56bb23(0x2b9)](_0x573c13[_0x56bb23(0x278)])),0x3)&&(this['config'][_0x56bb23(0x24f)]=![]),_0x573c13['oXFwH'](helper[_0x56bb23(0x20d)](helper[_0x56bb23(0x2b9)](_0x573c13[_0x56bb23(0x278)]),_0x573c13['YLESV']),0x1)&&(this[_0x56bb23(0x1cc)][_0x56bb23(0x24f)]=!![]);}(helper[_0x56bb23(0x209)](this[_0x56bb23(0x1cc)]['platforms'])||helper[_0x56bb23(0x209)](this['config'][_0x56bb23(0x2bd)]['length']))&&(helper[_0x56bb23(0x209)](this['config'][_0x56bb23(0x2d1)])?logger[_0x56bb23(0x262)](_0x573c13[_0x56bb23(0x1eb)]):logger[_0x56bb23(0x224)](_0x573c13['nXhNg']),this[_0x56bb23(0x1cc)][_0x56bb23(0x2bd)]=[]);!this['config'][_0x56bb23(0x259)]&&(this[_0x56bb23(0x1cc)][_0x56bb23(0x259)]={});try{process[_0x56bb23(0x22b)][_0x56bb23(0x1df)]=_0x259b16['_'][0x0],utilities[_0x56bb23(0x216)](_0x573c13['XuNvH'],{},this[_0x56bb23(0x1cc)],this['framework']);}catch(_0x21aaa2){logger[_0x56bb23(0x1d6)](_0x56bb23(0x296)+_0x21aaa2);}!this[_0x56bb23(0x1cc)]['disableAutoCaptureLogs']&&logger['info'](constants[_0x56bb23(0x1d3)]),this['intExitHandler']=this[_0x56bb23(0x1de)][_0x56bb23(0x27a)](this),process['on'](_0x573c13['nOCbj'],this[_0x56bb23(0x1de)]),process['on'](_0x573c13[_0x56bb23(0x1cd)],this[_0x56bb23(0x1de)]),process['on'](_0x573c13[_0x56bb23(0x2bb)],this[_0x56bb23(0x1de)]),_0x573c13[_0x56bb23(0x2a4)](process['platform'],_0x573c13[_0x56bb23(0x2db)])?(process['on'](_0x573c13[_0x56bb23(0x207)],this[_0x56bb23(0x1de)]),process['on'](_0x573c13[_0x56bb23(0x2a3)],this[_0x56bb23(0x1de)])):process['on'](_0x573c13['AZwRH'],this['intExitHandler']),process['on'](_0x573c13['mPEMK'],this[_0x56bb23(0x277)]());}async[a94_0x497078(0x2aa)](_0x4138d3){const _0x4c3ba0=a94_0x497078,_0x40778a={'fOviz':_0x4c3ba0(0x1f2),'kGHGw':_0x4c3ba0(0x2d0),'eZDcF':_0x4c3ba0(0x28b),'dYMAP':function(_0x2b036f,_0x482365){return _0x2b036f===_0x482365;},'Yijbk':_0x4c3ba0(0x2e3),'koQSD':function(_0x485e9,_0x882099){return _0x485e9+_0x882099;},'zwnSB':_0x4c3ba0(0x212),'UkKTn':function(_0x47980b,_0x3337fb){return _0x47980b(_0x3337fb);},'rIoCk':_0x4c3ba0(0x27f)};this[_0x4c3ba0(0x244)](_0x4138d3);if(helper[_0x4c3ba0(0x1d0)](this[_0x4c3ba0(0x1cc)])){const _0x3dcd99=await helper[_0x4c3ba0(0x200)](this[_0x4c3ba0(0x1cc)]);this[_0x4c3ba0(0x1cc)]['turboScaleGridDetails']=_0x3dcd99,_0x3dcd99[_0x4c3ba0(0x286)]&&helper['isNotUndefined'](this['config']['browserstackLocal'])&&helper['isTrue'](this[_0x4c3ba0(0x1cc)]['browserstackLocal'])&&(this[_0x4c3ba0(0x1cc)][_0x4c3ba0(0x25a)][_0x4c3ba0(0x294)]=_0x40778a[_0x4c3ba0(0x20a)],this[_0x4c3ba0(0x1cc)][_0x4c3ba0(0x25a)][_0x40778a[_0x4c3ba0(0x256)]]=_0x3dcd99[_0x4c3ba0(0x1ca)]['join'](','),this[_0x4c3ba0(0x1cc)][_0x4c3ba0(0x25a)][_0x4c3ba0(0x230)]=_0x40778a[_0x4c3ba0(0x1fc)]),this['config'][_0x4c3ba0(0x251)]=_0x3dcd99[_0x4c3ba0(0x20c)],this['framework']&&_0x40778a[_0x4c3ba0(0x21c)](this['framework'][_0x4c3ba0(0x26f)](),_0x40778a['Yijbk'])?this[_0x4c3ba0(0x1cc)][_0x4c3ba0(0x251)]=_0x40778a[_0x4c3ba0(0x2ad)](_0x3dcd99['playwrightUrl'],_0x40778a['zwnSB']):constants[_0x4c3ba0(0x219)]=helper[_0x4c3ba0(0x2b4)](this[_0x4c3ba0(0x1cc)]),logger['debug'](_0x4c3ba0(0x1d2)+constants['hubUrl']);}helper['setProxySettings'](this[_0x4c3ba0(0x1cc)]),this[_0x4c3ba0(0x1e8)](),_0x40778a[_0x4c3ba0(0x2c5)](setPercyFlag,this),await this[_0x4c3ba0(0x293)](),![_0x40778a[_0x4c3ba0(0x23b)],_0x40778a[_0x4c3ba0(0x2b5)]][_0x4c3ba0(0x26b)](this[_0x4c3ba0(0x23c)])&&!helper[_0x4c3ba0(0x1d0)](this['config'])&&!helper[_0x4c3ba0(0x1dc)]()[_0x4c3ba0(0x1f9)]&&await this[_0x4c3ba0(0x253)]();}async['setupPercy'](){const _0x4ee88a=a94_0x497078,_0x1584e0={};_0x1584e0[_0x4ee88a(0x206)]=function(_0x2ff67f,_0x1e0775){return _0x2ff67f===_0x1e0775;},_0x1584e0[_0x4ee88a(0x292)]=_0x4ee88a(0x2a0),_0x1584e0['rXETY']=_0x4ee88a(0x1fb),_0x1584e0[_0x4ee88a(0x2c2)]=_0x4ee88a(0x2d2),_0x1584e0[_0x4ee88a(0x23d)]=_0x4ee88a(0x28b),_0x1584e0['nyrjU']=_0x4ee88a(0x205);const _0x4b3f06=_0x1584e0;if(helper[_0x4ee88a(0x1d9)](this[_0x4ee88a(0x1cc)]['percy'])&&(!this['percy']||!this[_0x4ee88a(0x2d4)]['isRunning']()))try{this['percy']=await percyHelper[_0x4ee88a(0x260)](this['config']);if(!this[_0x4ee88a(0x2d4)]){process[_0x4ee88a(0x22b)]['BROWSERSTACK_PERCY']=_0x4b3f06[_0x4ee88a(0x292)];throw new Error(_0x4b3f06[_0x4ee88a(0x228)]);}logger[_0x4ee88a(0x262)](_0x4b3f06[_0x4ee88a(0x2c2)]),process[_0x4ee88a(0x22b)][_0x4ee88a(0x270)]=_0x4b3f06['Jkupg'];let _0x145d7d=0x0;const _0x1f5f6b=async()=>{const _0x53f7e1=_0x4ee88a;_0x145d7d++,_0x4b3f06[_0x53f7e1(0x206)](_0x145d7d,0x1)&&await this[_0x53f7e1(0x225)]();};process['on'](_0x4b3f06[_0x4ee88a(0x1cf)],_0x1f5f6b);}catch(_0x489f00){process[_0x4ee88a(0x22b)][_0x4ee88a(0x270)]=_0x4b3f06['sWTgB'],logger[_0x4ee88a(0x1d6)](_0x4ee88a(0x2d5)+_0x489f00);throw new Error(_0x489f00[_0x4ee88a(0x2cc)]());}}async[a94_0x497078(0x225)](){const _0x46ec20=a94_0x497078,_0x5c2abf={};_0x5c2abf[_0x46ec20(0x233)]=_0x46ec20(0x204),_0x5c2abf['TFpuQ']='Error\x20occured\x20while\x20stopping\x20percy';const _0x36f6df=_0x5c2abf;if(this['percy']&&this[_0x46ec20(0x2d4)][_0x46ec20(0x1cb)]())try{await percyHelper[_0x46ec20(0x225)](this['percy']),logger[_0x46ec20(0x262)](_0x36f6df['eNtPd']);}catch(_0x3518a9){logger[_0x46ec20(0x1f4)](_0x36f6df[_0x46ec20(0x222)],_0x3518a9[_0x46ec20(0x1d7)]);}}async[a94_0x497078(0x293)](){const _0x22c211=a94_0x497078,_0x195c6b={};_0x195c6b[_0x22c211(0x20f)]=_0x22c211(0x261),_0x195c6b['BPchf']=_0x22c211(0x2df);const _0x39de22=_0x195c6b;if(helper[_0x22c211(0x238)]()&&helper[_0x22c211(0x1d9)](this[_0x22c211(0x1cc)][_0x22c211(0x2d9)])&&(!this[_0x22c211(0x2d9)]||!this[_0x22c211(0x2d9)][_0x22c211(0x1cb)]()))try{if(this[_0x22c211(0x1cc)][_0x22c211(0x25a)][_0x22c211(0x21a)]){logger[_0x22c211(0x1d6)](_0x39de22[_0x22c211(0x20f)]);return;}this['browserstackLocal']=await helper[_0x22c211(0x282)](this[_0x22c211(0x1cc)]),logger[_0x22c211(0x262)](_0x39de22[_0x22c211(0x2c1)]);}catch(_0x1057cc){logger['debug'](_0x1057cc);throw new Error(_0x1057cc[_0x22c211(0x2cc)]());}}async[a94_0x497078(0x2ac)](){const _0x49a01d=a94_0x497078,_0x560d69={};_0x560d69[_0x49a01d(0x2b6)]=_0x49a01d(0x258),_0x560d69[_0x49a01d(0x2a2)]='Error\x20occured\x20while\x20stopping\x20local\x20binary';const _0x342b33=_0x560d69;if(this[_0x49a01d(0x2d9)]&&this[_0x49a01d(0x2d9)][_0x49a01d(0x1cb)]())try{await helper[_0x49a01d(0x24d)](this['browserstackLocal']),logger[_0x49a01d(0x262)](_0x342b33[_0x49a01d(0x2b6)]);}catch(_0x28b1c1){logger[_0x49a01d(0x1f4)](_0x342b33[_0x49a01d(0x2a2)],_0x28b1c1[_0x49a01d(0x1d7)]);}}async['setUpHubUrl'](){const _0x5a762c=a94_0x497078;return PerformanceTester[_0x5a762c(0x2c9)](PerformanceAutEvents[_0x5a762c(0x29d)],async()=>{const _0x14cbc5=_0x5a762c;await hubAllocator['allocateHub'](this[_0x14cbc5(0x1cc)]);})();}async[a94_0x497078(0x298)](){const _0x4bb0c0=a94_0x497078,_0x1859e9={'VHinm':function(_0x1309b5,_0x5c9ed2){return _0x1309b5(_0x5c9ed2);},'nqutP':_0x4bb0c0(0x236),'xDbxJ':function(_0x10a31b,_0x3978e0,_0x5dee2a,_0x1a4858,_0x275897,_0x406999,_0x3ed148){return _0x10a31b(_0x3978e0,_0x5dee2a,_0x1a4858,_0x275897,_0x406999,_0x3ed148);},'EpLzC':_0x4bb0c0(0x1fd),'uQUlK':_0x4bb0c0(0x297),'NcmaC':_0x4bb0c0(0x283),'xwAdb':_0x4bb0c0(0x1d4),'BSNds':function(_0x2aa55a,_0xcfaa22){return _0x2aa55a(_0xcfaa22);},'mQjrJ':function(_0x158cd9,_0x3ce7ab){return _0x158cd9===_0x3ce7ab;},'GHbCA':_0x4bb0c0(0x28b),'yGbum':function(_0x16b960,_0x14ab03){return _0x16b960===_0x14ab03;},'GCXnO':function(_0x25d38f,_0x8df279){return _0x25d38f===_0x8df279;},'NMSGj':_0x4bb0c0(0x2b2),'ukJno':function(_0x44458f,_0x338efe){return _0x44458f===_0x338efe;},'BzaKn':_0x4bb0c0(0x2ae),'JBxif':'Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','Qifub':function(_0x33c1fd,_0x498261){return _0x33c1fd(_0x498261);},'IVihk':_0x4bb0c0(0x217),'lrDun':function(_0x1b3fe7,_0x22d775){return _0x1b3fe7>=_0x22d775;},'TLftl':function(_0x4ab2a2,_0x4a0758){return _0x4ab2a2<_0x4a0758;},'dSVrI':function(_0x4c76c5,_0xe6ba66){return _0x4c76c5>=_0xe6ba66;},'OkHxk':_0x4bb0c0(0x2bc),'ddYUf':_0x4bb0c0(0x2b8),'REIYR':function(_0xb485){return _0xb485();}},_0x4fc782=PerformanceTester[_0x4bb0c0(0x2c9)](_0x1859e9[_0x4bb0c0(0x1ed)],async()=>{const _0xbe2b21=_0x4bb0c0;try{const _0x4aaff1=new Date(),_0x32ab7a=helper[_0xbe2b21(0x2ca)](this[_0xbe2b21(0x1cc)]),_0x24f242=_0x1859e9[_0xbe2b21(0x2a1)](require,path[_0xbe2b21(0x2c6)](__dirname,_0x1859e9[_0xbe2b21(0x1f7)])),_0x52230f=_0x1859e9[_0xbe2b21(0x1f6)](timeoutPromise,constants[_0xbe2b21(0x264)],_0x1859e9[_0xbe2b21(0x241)],_0x1859e9[_0xbe2b21(0x28f)],_0x4aaff1,this[_0xbe2b21(0x1cc)],this['framework']),_0x30a097={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x1859e9[_0xbe2b21(0x2a1)](require,_0x1859e9[_0xbe2b21(0x2b0)])[_0xbe2b21(0x2c7)],'methodUsed':_0x1859e9['xwAdb'],'proxyConfig':_0x32ab7a,'os':os[_0xbe2b21(0x265)]()};if(_0x32ab7a&&_0x32ab7a[_0xbe2b21(0x22f)]){utilities['fireFunnelTestEvent'](constants['AI_PROXY_FAILURE'],_0x30a097,this['config'],this['framework']);return;}const _0x64be15={};_0x64be15[_0xbe2b21(0x22d)]=_0x32ab7a;const _0x5195e0=await Promise['race']([_0x24f242[_0xbe2b21(0x25d)](this[_0xbe2b21(0x1cc)]['accessKey'],this[_0xbe2b21(0x1cc)][_0xbe2b21(0x285)],constants['TCG_URL'],_0x1859e9['BSNds'](require,_0x1859e9['NcmaC'])[_0xbe2b21(0x2c7)],_0x64be15)[_0xbe2b21(0x226)](_0x5c67b8=>{const _0x24ae12=_0xbe2b21;return _0x52230f[_0x24ae12(0x281)](),_0x5c67b8;}),_0x52230f]);_0x5195e0[_0xbe2b21(0x263)]=_0x1859e9[_0xbe2b21(0x1ce)](_0x5195e0['isHealingEnabled'],_0x1859e9[_0xbe2b21(0x255)])||_0x1859e9[_0xbe2b21(0x24c)](_0x5195e0[_0xbe2b21(0x263)],!![]);const _0x316530=_0x1859e9[_0xbe2b21(0x1ce)](this[_0xbe2b21(0x1cc)][_0xbe2b21(0x201)],!![])||_0x1859e9['mQjrJ'](this['config'][_0xbe2b21(0x201)],_0x1859e9[_0xbe2b21(0x255)]);if(_0x1859e9[_0xbe2b21(0x2ba)](_0x5195e0[_0xbe2b21(0x1d7)],constants[_0xbe2b21(0x2c3)])&&_0x316530)logger[_0xbe2b21(0x262)](_0x1859e9[_0xbe2b21(0x235)]);else{if(!_0x5195e0['isAuthenticated']&&_0x1859e9['ukJno'](_0x5195e0['status'],0x1f7)&&_0x316530)logger[_0xbe2b21(0x262)](_0x1859e9[_0xbe2b21(0x2b7)]),utilities[_0xbe2b21(0x216)](constants[_0xbe2b21(0x2ab)],_0x30a097,this['config'],this[_0xbe2b21(0x23c)]);else{if(!_0x5195e0[_0xbe2b21(0x232)]&&_0x316530){logger[_0xbe2b21(0x262)](_0x1859e9[_0xbe2b21(0x2d3)]);const _0x3257b2={'tcgUrl':constants[_0xbe2b21(0x284)],'sdkVersion':_0x1859e9['Qifub'](require,_0x1859e9['NcmaC'])[_0xbe2b21(0x2c7)],'methodUsed':_0x1859e9[_0xbe2b21(0x28d)],'proxyConfig':_0x32ab7a,'os':os['platform']()};utilities['fireFunnelTestEvent'](constants[_0xbe2b21(0x2a5)],_0x3257b2,this[_0xbe2b21(0x1cc)],this[_0xbe2b21(0x23c)]);}else{if(_0x5195e0[_0xbe2b21(0x232)]&&!_0x5195e0[_0xbe2b21(0x263)]&&_0x316530)logger[_0xbe2b21(0x262)](_0x1859e9['IVihk']);else{if(_0x1859e9[_0xbe2b21(0x2b3)](_0x5195e0[_0xbe2b21(0x1c9)],0xc8)&&_0x1859e9[_0xbe2b21(0x223)](_0x5195e0[_0xbe2b21(0x1c9)],0x12c))utilities[_0xbe2b21(0x216)](constants[_0xbe2b21(0x1fe)],_0x30a097,this[_0xbe2b21(0x1cc)],this[_0xbe2b21(0x23c)]);else{if(_0x1859e9[_0xbe2b21(0x218)](_0x5195e0[_0xbe2b21(0x1c9)],0x190))_0x30a097[_0xbe2b21(0x1c9)]=_0x5195e0['status'],utilities[_0xbe2b21(0x216)](constants[_0xbe2b21(0x1f5)],_0x30a097,this[_0xbe2b21(0x1cc)],this[_0xbe2b21(0x23c)]);else!_0x5195e0[_0xbe2b21(0x1c9)]&&utilities[_0xbe2b21(0x216)](constants[_0xbe2b21(0x2ce)],_0x30a097,this[_0xbe2b21(0x1cc)],this['framework']);}}}}}if(_0x5195e0[_0xbe2b21(0x232)]&&_0x5195e0[_0xbe2b21(0x263)]){const _0x5cb7de={};_0x5cb7de[_0xbe2b21(0x287)]=_0x5195e0;const _0x4c13d7=_0x5cb7de;_0x32ab7a&&(_0x4c13d7[_0xbe2b21(0x21e)]=_0x32ab7a),_0x4c13d7[_0xbe2b21(0x23c)]=this[_0xbe2b21(0x23c)],_0x4c13d7['bstackConfig']=this[_0xbe2b21(0x1cc)],helper[_0xbe2b21(0x1e4)](_0x4c13d7),logger[_0xbe2b21(0x1d6)](_0x1859e9[_0xbe2b21(0x249)]);}}catch(_0x54b504){logger[_0xbe2b21(0x1d6)](_0xbe2b21(0x22a)+(_0x54b504[_0xbe2b21(0x1d7)]?_0x54b504[_0xbe2b21(0x1d7)]:''));}});await _0x1859e9[_0x4bb0c0(0x1ee)](_0x4fc782);}[a94_0x497078(0x1e8)](){const _0x495ead=a94_0x497078,_0x54e216={'Gdykf':function(_0x38cdab,_0x780a3f){return _0x38cdab(_0x780a3f);},'LIAnm':'./setKeepAlive'};_0x54e216[_0x495ead(0x1e2)](require,_0x54e216[_0x495ead(0x1f1)])();}[a94_0x497078(0x215)](){const _0xfc522a=a94_0x497078,_0x32084f={};_0x32084f[_0xfc522a(0x24b)]=_0xfc522a(0x2bf),_0x32084f[_0xfc522a(0x240)]=_0xfc522a(0x276),_0x32084f[_0xfc522a(0x22e)]=_0xfc522a(0x299);const _0x2ff549=_0x32084f,_0x504fcb=_0x43f368=>{const _0x429cb1=_0xfc522a,_0x5dc055=_0x2ff549[_0x429cb1(0x24b)][_0x429cb1(0x25f)]('|');let _0x2c9dcd=0x0;while(!![]){switch(_0x5dc055[_0x2c9dcd++]){case'0':logger[_0x429cb1(0x1d6)](util[_0x429cb1(0x257)](_0x43f368));continue;case'1':ClientTroubleShootingService['reportFinalDetectionState']();continue;case'2':logger['error'](_0x43f368[_0x429cb1(0x1d7)]);continue;case'3':PerformanceTester[_0x429cb1(0x295)](_0x43f368);continue;case'4':this[_0x429cb1(0x214)][_0x429cb1(0x28a)](util[_0x429cb1(0x257)]('%j',_0x43f368));continue;}break;}};process['on'](_0x2ff549['UayvI'],_0x504fcb),process['on'](_0x2ff549[_0xfc522a(0x22e)],_0x504fcb);}async[a94_0x497078(0x1de)](_0x16c112){const _0x599390=a94_0x497078,_0x2c3cbb={};_0x2c3cbb[_0x599390(0x2a8)]=_0x599390(0x1e9),_0x2c3cbb[_0x599390(0x202)]=function(_0x5a0789,_0x3d7eeb){return _0x5a0789+_0x3d7eeb;},_0x2c3cbb['ToSFY']=_0x599390(0x2a9),_0x2c3cbb[_0x599390(0x2be)]=function(_0x2037d0,_0x3b97d4){return _0x2037d0+_0x3b97d4;},_0x2c3cbb[_0x599390(0x25b)]=function(_0x35ca17,_0x1fdf1b){return _0x35ca17+_0x1fdf1b;},_0x2c3cbb[_0x599390(0x29f)]=_0x599390(0x252);const _0x30d506=_0x2c3cbb,_0x35222c=_0x30d506[_0x599390(0x2a8)][_0x599390(0x25f)]('|');let _0x202445=0x0;while(!![]){switch(_0x35222c[_0x202445++]){case'0':if(this[_0x30d506['GHuiK'](_0x30d506[_0x599390(0x289)],_0x16c112)])return;continue;case'1':await TestHubHandler[_0x599390(0x2a6)](_0x16c112);continue;case'2':this[_0x30d506[_0x599390(0x2be)](_0x30d506['ToSFY'],_0x16c112)]=!![];continue;case'3':await ClientTroubleShootingService[_0x599390(0x266)]();continue;case'4':logger[_0x599390(0x262)](_0x30d506[_0x599390(0x25b)](_0x30d506[_0x599390(0x29f)],_0x16c112));continue;case'5':await BrowserstackCLI[_0x599390(0x1ff)]()[_0x599390(0x2a6)]();continue;case'6':this[_0x599390(0x24a)]=_0x16c112;continue;case'7':await ClientTroubleShootingService[_0x599390(0x2cb)](_0x16c112);continue;}break;}}[a94_0x497078(0x277)](){const _0x136f7d=a94_0x497078,_0x3af160={'YXoux':function(_0x14018b,_0x304948){return _0x14018b===_0x304948;},'IQtZp':_0x136f7d(0x234),'hRFsy':function(_0x5429a0,_0x428da5){return _0x5429a0>_0x428da5;},'sVeyH':function(_0x56f49b,_0x40609b){return _0x56f49b(_0x40609b);},'jUOdh':function(_0x2a6624){return _0x2a6624();},'hzSVV':_0x136f7d(0x245)};let _0x127b4e=0x0;return async()=>{const _0x1085cc=_0x136f7d;_0x127b4e++;if(_0x3af160[_0x1085cc(0x20e)](_0x127b4e,0x1)){helper['checkStopLocalBinaryOnExit'](this[_0x1085cc(0x23c)])&&await this[_0x1085cc(0x2ac)]();try{logger[_0x1085cc(0x1d6)](_0x3af160['IQtZp']),await TestHubHandler[_0x1085cc(0x2a6)](_0x127b4e),await ClientTroubleShootingService[_0x1085cc(0x266)](),await BrowserstackCLI[_0x1085cc(0x1ff)]()[_0x1085cc(0x2a6)]('1');}catch(_0x3f99ab){logger[_0x1085cc(0x1d6)](_0x1085cc(0x2af)+util['format'](_0x3f99ab));}PerformanceTester[_0x1085cc(0x229)](PerformanceEvents[_0x1085cc(0x1db)]);if(PerformanceTester['isEnabled']()){const {measures:_0x55b130,errors:_0x4b0e59}=await PerformanceTester[_0x1085cc(0x1f8)](),_0x112413={};if(_0x55b130&&_0x3af160[_0x1085cc(0x1f3)](_0x55b130['length'],0x0)||_0x4b0e59&&_0x3af160[_0x1085cc(0x1f3)](_0x4b0e59[_0x1085cc(0x1ec)],0x0)){const _0x1d3f83={};_0x1d3f83[_0x1085cc(0x227)]=_0x55b130,_0x1d3f83[_0x1085cc(0x272)]=_0x4b0e59,Object[_0x1085cc(0x1da)](_0x112413,_0x1d3f83);}try{const _0x970f78=await helper[_0x1085cc(0x246)](_0x112413,this[_0x1085cc(0x1cc)]);logger['debug'](_0x1085cc(0x2de)+_0x3af160['sVeyH'](getEdsInstrumentationAPIUrl,'')+_0x1085cc(0x221)+_0x970f78['statusCode']);}catch(_0x3364f6){logger[_0x1085cc(0x1d6)](_0x1085cc(0x1d5)+_0x3af160['sVeyH'](getEdsInstrumentationAPIUrl,'')+_0x1085cc(0x2e1)+util[_0x1085cc(0x257)](_0x3364f6));}try{fs[_0x1085cc(0x213)](path[_0x1085cc(0x2c6)](_0x3af160['jUOdh'](getLogDir),_0x3af160['hzSVV']),JSON[_0x1085cc(0x28e)](_0x112413));}catch(_0x147491){logger[_0x1085cc(0x1d6)](_0x1085cc(0x26a)+_0x147491);}}}logger&&logger[_0x1085cc(0x23f)](),fileLogger&&fileLogger[_0x1085cc(0x23f)]();};}}exports[a94_0x497078(0x1e1)]=BrowserStackSetup;