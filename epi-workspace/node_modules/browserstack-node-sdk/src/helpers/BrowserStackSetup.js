function a94_0x418a(_0x5e5352,_0x5abfa9){const _0x138f82=a94_0x138f();return a94_0x418a=function(_0x418a24,_0x31b544){_0x418a24=_0x418a24-0xd3;let _0x5e5b20=_0x138f82[_0x418a24];return _0x5e5b20;},a94_0x418a(_0x5e5352,_0x5abfa9);}const a94_0x399810=a94_0x418a;function a94_0x138f(){const _0x37c481=['isHealingEnabled','includes','upnYH','Error\x20occured\x20while\x20stopping\x20local\x20binary','13153jviPVF','PbFZn','getPackageVersion','SIGQUIT','jLAuN','debug','nItgM','AI_INIT_SUCCESSFUL','stopBrowserstackLocal','url','TCG_URL','Calling\x20Build\x20Stop\x20from\x20ExitHandler','initialize','373128DdohVa','turboScale','exceptions','LuajV','playwrightUrl','SIGINT','AI_INIT_FAILURE','info','beforeExit','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','then','accessKey','events.json','cfsmO','4|3|0|2|1','false','setBrowserstackInfraFromConfig','cFqsc','localIdentifier','qWPyE','../../package.json','split','isBrowserstackInfra','632SSYGmL','compareVersions','close','./timeoutPromise','preInitialize','getFinalCaps','env','RNCmu','proxy','NUTqJ','forceLocal','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','platforms','fEOVI','getInstance','INVALID_INIT_RESP_WITH_USER_IMPACT','./performance/constants','cqNrX','UPGRADE_REQUIRED','IEzmx','SDKTestAttempted','JsTpA','Percy\x20started\x20successfully','Percy\x20stopped','lYhSY','central_scanner','isEnabled','exitHandler','testContextOptions','message','hubUrl','unhandledErrors','rFTRP','lhcGf','path','Shutdown\x20triggered\x20by\x20','skipBinaryInitialisation','constructor','handleExceptions','startLocalBinary','655406QwnlKk','jcdKI','fileLogger','125345ARDUZG','No\x20config\x20provided.','ampSp','AI_PROXY_FAILURE','UEgGg','custom-repeater','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','10pTvExo','Failed\x20to\x20send\x20data\x20to\x20','startPercy','cliConfig','oTIzU','./testhub/utils','wLMCC','setProxySettings','__isPlaywrightInstalled','bZznS','SIGHUP','win32','922734xFjFNU','ats-repeater','killSignal','./logger','aiHeal:tcgAuth','KHTJV','FRAMEWORK','configPath','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','nevoG','TCG_AUTH_FAILURE','vhuMb','QCgna','format','../hubAllocationMethods','join','startMonitoring','skipSessionName','bstackConfig','Error\x20in\x20sending\x20testhub\x20stop:\x20','localOptions','turboScaleUrl','20jQbEdh','setupTcgConfigFile','framework','AUTOLOGCAPTURE_NOTIFICATION','126KQLlti','fireFunnelTestEvent','acfGP','SDK_CLEANUP','./percy/utils','stopPercy','Error\x20in\x20writing\x20events\x20to\x20file\x20','WubuT','4.5.0','proxyConfig','isUndefined','browserStackLocalOptions','end','length','wewZV','turboScaleGridDetails','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','getProxyConfigForTcg','jggNV','config','./utilities','tcg\x20config\x20setup\x20successful.','GjDyI','./testhub/testhubHandler','\x20with\x20response\x20','BrowserstackHealing.init','MoYiR','isRunning','BROWSERSTACK_PERCY','userName','checkStopLocalBinaryOnExit','getAccessKey','fxvGg','mvmrB','isAuthenticated','stop','normalizeTestReportingEnvVars','race','UGxOX','setUpHubUrl','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','getLocalIdentifier','selfHeal','./setKeepAlive','zSizi','dxapn','codeceptjs','kazaD','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','measures','setupKeepAlive','toLowerCase','dhhvg','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','./helper','sYKRN','reportFinalDetectionState','browserstackLocal','YGNAb','\x20with\x20error\x20','66yqbgRx','XprTb','BGtbv','rGXej','errorMessage','allocateHub','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','assign','setEnvCaps','turboScaleOptions','intExitHandler','parallelsPerPlatform','GenPC','skipSessionStatus','DWZgV','../ai-sdk-node/bundle','thhWq','setLogLevel','fIwsl','isTurboScaleSession','SIGTERM','cancel','uncaughtException','getUserName','toString','TYzhV','userName\x20or\x20accessKey\x20is\x20not\x20defined','SIGBREAK','BROWSERSTACK_TURBOSCALE','dGdvP','OiXcT','TCG_AUTH_TIMEOUT','status','../bin/utils/clientTroubleshootingService','LTS\x20session\x20enabled\x20for\x20this\x20run.\x20SDK\x20run\x20id:\x20','setupBrowserstackLocal','uFmmM','jGvpv','Local\x20binary\x20started\x20successfully','nXHQZ','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','Error\x20in\x20percy\x20setup\x20','Hltqc','../bin/v2/browserstackCLI','isTrue','OZBeF','hzCad','zVuyh','default','envConfig','BrowserstackHealingInitFailed','handled','setHandlePWError','TErjE','version','?caps=','init','useW3C','platform','finalize','MvVyt','setupTCGAuth','bind','SIGABRT','GfoPE','sdkRunId','TCG_DOWN','ZubYd','winstonLogger','true','setCLICaps','HUB_MANAGEMENT','generateLocalIdentifier','Error\x20occured\x20while\x20stopping\x20percy','TGvVK','integrations','requireSeleniumWebdriverCheck','pRMve','6468cyVCll','error','Data\x20sent\x20successfully\x20to\x20','MaHmD','proxyUrl','1443186eNtOVd','fvaVD','vDpVj','IlIhN','tcgAuthConfig','percy'];a94_0x138f=function(){return _0x37c481;};return a94_0x138f();}(function(_0x568fad,_0x5c58a7){const _0x253c67=a94_0x418a,_0x3e2aee=_0x568fad();while(!![]){try{const _0xaccaae=parseInt(_0x253c67(0x147))/0x1+parseInt(_0x253c67(0x144))/0x2+-parseInt(_0x253c67(0x174))/0x3*(-parseInt(_0x253c67(0xe9))/0x4)+parseInt(_0x253c67(0x14e))/0x5*(parseInt(_0x253c67(0x15a))/0x6)+-parseInt(_0x253c67(0xf8))/0x7*(parseInt(_0x253c67(0x11c))/0x8)+-parseInt(_0x253c67(0xee))/0x9*(parseInt(_0x253c67(0x170))/0xa)+-parseInt(_0x253c67(0x1b0))/0xb*(parseInt(_0x253c67(0x105))/0xc);if(_0xaccaae===_0x5c58a7)break;else _0x3e2aee['push'](_0x3e2aee['shift']());}catch(_0x47c53b){_0x3e2aee['push'](_0x3e2aee['shift']());}}}(a94_0x138f,0x2a31b));const util=require('util'),os=require('os'),path=require(a94_0x399810(0x13e)),{v4:uuidv4}=require('uuid'),fs=require('fs'),constants=require('../bin/utils/constants'),logger=require(a94_0x399810(0x15d))[a94_0x399810(0xdf)],fileLogger=require(a94_0x399810(0x15d))[a94_0x399810(0x146)],{getLogDir}=require(a94_0x399810(0x15d)),helper=require(a94_0x399810(0x1aa)),utilities=require(a94_0x399810(0x188)),percyHelper=require(a94_0x399810(0x178)),hubAllocator=require(a94_0x399810(0x168)),PerformanceTester=require('./performance/performance-tester'),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a94_0x399810(0x12c)),{setPercyFlag}=require(a94_0x399810(0x153)),TestHubHandler=require(a94_0x399810(0x18b)),timeoutPromise=require(a94_0x399810(0x11f)),BrowserstackCLI=require(a94_0x399810(0x1db)),LoadTestModule=require('../bin/v2/modules/loadTestModule'),{getEdsInstrumentationAPIUrl}=require('../bin/utils/apiUtilityMethods'),ClientTroubleShootingService=require(a94_0x399810(0x1d1));class BrowserStackSetup{constructor(_0x2214ff,_0x326c50){const _0x21b1de=a94_0x399810,_0x5c2948={'sYKRN':'17|6|3|1|8|7|5|16|20|14|4|10|9|12|13|21|23|22|2|15|11|18|0|19','KHTJV':function(_0x131693){return _0x131693();},'qWPyE':_0x21b1de(0x148)},_0x4b7e3b=_0x5c2948[_0x21b1de(0x1ab)][_0x21b1de(0x11a)]('|');let _0x237277=0x0;while(!![]){switch(_0x4b7e3b[_0x237277++]){case'0':helper[_0x21b1de(0x1c1)](this[_0x21b1de(0x187)],this[_0x21b1de(0x151)],this[_0x21b1de(0x1e1)]);continue;case'1':this[_0x21b1de(0x1ad)]=null;continue;case'2':this[_0x21b1de(0x187)]['testContextOptions'][_0x21b1de(0x1bd)]=!helper['isBrowserstackInfra']()||helper['isTrue'](this[_0x21b1de(0x187)][_0x21b1de(0x138)]['skipSessionStatus']);continue;case'3':this[_0x21b1de(0x1e1)]=helper[_0x21b1de(0x1b8)]();continue;case'4':this[_0x21b1de(0x1b4)]={};continue;case'5':this['config']=helper['readConfig'](this[_0x21b1de(0x161)]);continue;case'6':helper[_0x21b1de(0x198)]();continue;case'7':this['configPath']=helper['getConfigPath'](_0x2214ff);continue;case'8':this['percy']=null;continue;case'9':this['framework']=_0x326c50;continue;case'10':this['sdkRunId']=_0x5c2948[_0x21b1de(0x15f)](uuidv4);continue;case'11':helper[_0x21b1de(0x121)](this['config'],this[_0x21b1de(0x151)],this['envConfig']);continue;case'12':global['framework']=_0x326c50;continue;case'13':if(helper[_0x21b1de(0x17e)](this['config']))throw new Error(_0x5c2948[_0x21b1de(0x118)]);continue;case'14':this[_0x21b1de(0x187)][_0x21b1de(0x138)]=this[_0x21b1de(0x187)]['testContextOptions']||{};continue;case'15':this[_0x21b1de(0x187)][_0x21b1de(0x138)][_0x21b1de(0x16b)]=!helper['isBrowserstackInfra']()||helper[_0x21b1de(0x1dc)](this[_0x21b1de(0x187)]['testContextOptions'][_0x21b1de(0x16b)]);continue;case'16':this[_0x21b1de(0x151)]=helper[_0x21b1de(0xe1)](_0x2214ff);continue;case'17':this['unhandledErrors']=[];continue;case'18':helper['setLogDir'](this[_0x21b1de(0x187)]);continue;case'19':PerformanceTester[_0x21b1de(0x16a)]();continue;case'20':this[_0x21b1de(0x187)][_0x21b1de(0x128)]=this['config'][_0x21b1de(0x128)]||[];continue;case'21':if(this[_0x21b1de(0x187)]['error'])throw new Error(this[_0x21b1de(0x187)]['error']);continue;case'22':helper['setCredentialsFromYmlConfig'](this['config']);continue;case'23':helper[_0x21b1de(0x115)](this['config'],this[_0x21b1de(0x151)]);continue;}break;}}[a94_0x399810(0x120)](_0x3523a4){const _0x4df7e4=a94_0x399810,_0x433762={'OiXcT':_0x4df7e4(0x1ca),'DWZgV':function(_0xc9bccb,_0x1532cb){return _0xc9bccb===_0x1532cb;},'mvmrB':_0x4df7e4(0xe6),'upnYH':_0x4df7e4(0x130),'thhWq':function(_0x5e1585,_0x170c79){return _0x5e1585<_0x170c79;},'rFTRP':function(_0x11f0b2,_0x4c23a0){return _0x11f0b2(_0x4c23a0);},'lYhSY':'selenium-webdriver','RNCmu':function(_0x44291f,_0x390f56){return _0x44291f===_0x390f56;},'jGvpv':_0x4df7e4(0x17c),'dxapn':'Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','TYzhV':_0x4df7e4(0x127),'xwQIq':_0x4df7e4(0x1c4),'XprTb':_0x4df7e4(0x10a),'fIwsl':_0x4df7e4(0x158),'UEgGg':function(_0x3c70e0,_0xf69d4a){return _0x3c70e0!==_0xf69d4a;},'jcdKI':_0x4df7e4(0x159),'MaHmD':_0x4df7e4(0xda),'MoYiR':_0x4df7e4(0xfb),'bZznS':_0x4df7e4(0x1cb),'ZubYd':_0x4df7e4(0x10d)},_0x35888c=this[_0x4df7e4(0x172)];global[_0x4df7e4(0x187)]=this[_0x4df7e4(0x187)],helper['sanitizeCaps'](this['config']),this['killSignal']=null,global[_0x4df7e4(0xdc)]=this[_0x4df7e4(0xdc)],logger[_0x4df7e4(0x10c)]('SDK\x20run\x20started\x20with\x20id:\x20'+this[_0x4df7e4(0xdc)]),!this['config'][_0x4df7e4(0x17f)]&&(this[_0x4df7e4(0x187)][_0x4df7e4(0x17f)]=this['config'][_0x4df7e4(0x16e)]||{});if(helper[_0x4df7e4(0x17e)](helper[_0x4df7e4(0x1c7)](this[_0x4df7e4(0x187)]))||helper[_0x4df7e4(0x17e)](helper[_0x4df7e4(0x193)](this['config'])))throw new Error(_0x433762[_0x4df7e4(0x1ce)]);helper['getLocalConfig'](this[_0x4df7e4(0x187)])&&helper['isUndefined'](helper[_0x4df7e4(0x19d)](this[_0x4df7e4(0x187)]))&&(!helper[_0x4df7e4(0x17e)](this['config']['browserStackLocalOptions'])&&_0x433762['DWZgV'](this['config'][_0x4df7e4(0x17f)][_0x4df7e4(0x141)],Object)?!helper['isTrue'](this[_0x4df7e4(0x187)][_0x4df7e4(0x17f)][_0x4df7e4(0x140)])&&(this['config']['browserStackLocalOptions'][_0x4df7e4(0x117)]=helper[_0x4df7e4(0xe3)]()):this[_0x4df7e4(0x187)]['browserStackLocalOptions']={'localIdentifier':helper[_0x4df7e4(0xe3)]()});this[_0x4df7e4(0x187)]['browserStackLocalOptions'][_0x4df7e4(0x140)]=helper[_0x4df7e4(0x1dc)](this[_0x4df7e4(0x187)][_0x4df7e4(0x17f)][_0x4df7e4(0x140)]),helper[_0x4df7e4(0x1e4)](this[_0x4df7e4(0x187)]);if(_0x433762[_0x4df7e4(0x1be)](_0x35888c,_0x433762[_0x4df7e4(0x195)]))return;this[_0x4df7e4(0x142)]();process['env'][_0x4df7e4(0x1cc)]&&(this['config'][_0x4df7e4(0x106)]=helper[_0x4df7e4(0x1dc)](process[_0x4df7e4(0x122)]['BROWSERSTACK_TURBOSCALE']),this[_0x4df7e4(0x187)]['turboScaleOptions']=this[_0x4df7e4(0x187)][_0x4df7e4(0x1b9)]||{});helper['isTurboScaleSession'](this[_0x4df7e4(0x187)])&&(process[_0x4df7e4(0x122)][_0x4df7e4(0x1cc)]=!![]);LoadTestModule['isLTSSession'](this['config'])&&logger['debug'](_0x4df7e4(0x1d2)+this[_0x4df7e4(0xdc)]);if(!helper[_0x4df7e4(0x11b)]()){try{process['env'][_0x4df7e4(0x160)]=_0x35888c,utilities[_0x4df7e4(0x175)](_0x433762[_0x4df7e4(0xf6)],{},this[_0x4df7e4(0x187)],this[_0x4df7e4(0x172)]);}catch(_0x42ae28){logger[_0x4df7e4(0xfd)](_0x4df7e4(0x1d8)+_0x42ae28);}return;}if(helper[_0x4df7e4(0xe7)](_0x35888c)){if(global[_0x4df7e4(0x156)])return;_0x433762[_0x4df7e4(0x1c0)](_0x433762[_0x4df7e4(0x13c)](parseInt,helper['getPackageVersion'](_0x433762[_0x4df7e4(0x134)])),0x3)&&(this[_0x4df7e4(0x187)]['useW3C']=![]),_0x433762[_0x4df7e4(0x123)](helper[_0x4df7e4(0x11d)](helper[_0x4df7e4(0xfa)](_0x433762[_0x4df7e4(0x134)]),_0x433762[_0x4df7e4(0x1d5)]),0x1)&&(this[_0x4df7e4(0x187)][_0x4df7e4(0xd4)]=!![]);}(helper['isUndefined'](this[_0x4df7e4(0x187)]['platforms'])||helper[_0x4df7e4(0x17e)](this[_0x4df7e4(0x187)]['platforms'][_0x4df7e4(0x181)]))&&(helper['isUndefined'](this['config'][_0x4df7e4(0x1bb)])?logger['info'](_0x433762[_0x4df7e4(0x1a1)]):logger['warn'](_0x433762[_0x4df7e4(0x1c9)]),this[_0x4df7e4(0x187)][_0x4df7e4(0x128)]=[]);!this[_0x4df7e4(0x187)][_0x4df7e4(0x138)]&&(this[_0x4df7e4(0x187)]['testContextOptions']={});try{process['env'][_0x4df7e4(0x160)]=_0x3523a4['_'][0x0],utilities['fireFunnelTestEvent'](_0x433762['upnYH'],{},this[_0x4df7e4(0x187)],this[_0x4df7e4(0x172)]);}catch(_0x147dd7){logger[_0x4df7e4(0xfd)](_0x4df7e4(0x1d8)+_0x147dd7);}!this[_0x4df7e4(0x187)]['disableAutoCaptureLogs']&&logger[_0x4df7e4(0x10c)](constants[_0x4df7e4(0x173)]),this[_0x4df7e4(0x1ba)]=this[_0x4df7e4(0x1ba)][_0x4df7e4(0xd9)](this),process['on'](_0x433762['xwQIq'],this['intExitHandler']),process['on'](_0x433762[_0x4df7e4(0x1b1)],this['intExitHandler']),process['on'](_0x433762[_0x4df7e4(0x1c2)],this[_0x4df7e4(0x1ba)]),_0x433762[_0x4df7e4(0x14b)](process['platform'],_0x433762[_0x4df7e4(0x145)])?(process['on'](_0x433762[_0x4df7e4(0xec)],this['intExitHandler']),process['on'](_0x433762[_0x4df7e4(0x18e)],this[_0x4df7e4(0x1ba)])):process['on'](_0x433762[_0x4df7e4(0x157)],this['intExitHandler']),process['on'](_0x433762[_0x4df7e4(0xde)],this[_0x4df7e4(0x137)]());}async[a94_0x399810(0x104)](_0x1e9171){const _0xc03e6a=a94_0x399810,_0x465414={'iqOnB':_0xc03e6a(0x15b),'GenPC':_0xc03e6a(0x14c),'vhuMb':_0xc03e6a(0xe0),'uIakS':function(_0x4ca33e,_0x20520e){return _0x4ca33e===_0x20520e;},'YGNAb':'playwright','TejAg':function(_0x36ac28,_0x278753){return _0x36ac28+_0x278753;},'cfsmO':_0xc03e6a(0x1e7),'ampSp':function(_0x3bcd22,_0x589ee5){return _0x3bcd22(_0x589ee5);},'OZBeF':_0xc03e6a(0x1a2)};this[_0xc03e6a(0x120)](_0x1e9171);if(helper['isTurboScaleSession'](this[_0xc03e6a(0x187)])){const _0x5a9219=await helper['getTurboScaleGridDetails'](this['config']);this['config'][_0xc03e6a(0x183)]=_0x5a9219,_0x5a9219['isTrialGrid']&&helper['isNotUndefined'](this[_0xc03e6a(0x187)]['browserstackLocal'])&&helper[_0xc03e6a(0x1dc)](this[_0xc03e6a(0x187)]['browserstackLocal'])&&(this[_0xc03e6a(0x187)][_0xc03e6a(0x17f)][_0xc03e6a(0x117)]=_0x465414['iqOnB'],this['config'][_0xc03e6a(0x17f)][_0x465414[_0xc03e6a(0x1bc)]]=_0x5a9219['customRepeaters']['join'](','),this[_0xc03e6a(0x187)][_0xc03e6a(0x17f)][_0xc03e6a(0x126)]=_0x465414[_0xc03e6a(0x165)]),this[_0xc03e6a(0x187)]['turboScaleUrl']=_0x5a9219[_0xc03e6a(0x101)],this['framework']&&_0x465414['uIakS'](this[_0xc03e6a(0x172)][_0xc03e6a(0x1a7)](),_0x465414[_0xc03e6a(0x1ae)])?this[_0xc03e6a(0x187)][_0xc03e6a(0x16f)]=_0x465414['TejAg'](_0x5a9219[_0xc03e6a(0x109)],_0x465414[_0xc03e6a(0x112)]):constants[_0xc03e6a(0x13a)]=helper['getHubUrl'](this[_0xc03e6a(0x187)]),logger['debug'](_0xc03e6a(0x19c)+constants[_0xc03e6a(0x13a)]);}helper[_0xc03e6a(0x155)](this[_0xc03e6a(0x187)]),this[_0xc03e6a(0x1a6)](),_0x465414[_0xc03e6a(0x149)](setPercyFlag,this),await this[_0xc03e6a(0x1d3)](),![_0x465414[_0xc03e6a(0x1dd)],_0x465414['YGNAb']][_0xc03e6a(0xf5)](this[_0xc03e6a(0x172)])&&!helper[_0xc03e6a(0x1c3)](this[_0xc03e6a(0x187)])&&!helper['getCentralUser']()[_0xc03e6a(0x135)]&&await this[_0xc03e6a(0x19b)]();}async['setupPercy'](){const _0x4d532d=a94_0x399810,_0xb72385={};_0xb72385[_0x4d532d(0x1b3)]=function(_0x561ed4,_0x5563b7){return _0x561ed4===_0x5563b7;},_0xb72385[_0x4d532d(0xe5)]=_0x4d532d(0x114),_0xb72385['cFqsc']=_0x4d532d(0x1a9),_0xb72385[_0x4d532d(0xfc)]=_0x4d532d(0x132),_0xb72385[_0x4d532d(0x1a3)]=_0x4d532d(0xe0),_0xb72385[_0x4d532d(0xef)]=_0x4d532d(0x10d);const _0x3e836f=_0xb72385;if(helper[_0x4d532d(0x1dc)](this[_0x4d532d(0x187)][_0x4d532d(0xf3)])&&(!this[_0x4d532d(0xf3)]||!this[_0x4d532d(0xf3)]['isRunning']()))try{this[_0x4d532d(0xf3)]=await percyHelper[_0x4d532d(0x150)](this['config']);if(!this[_0x4d532d(0xf3)]){process[_0x4d532d(0x122)][_0x4d532d(0x190)]=_0x3e836f[_0x4d532d(0xe5)];throw new Error(_0x3e836f[_0x4d532d(0x116)]);}logger[_0x4d532d(0x10c)](_0x3e836f[_0x4d532d(0xfc)]),process[_0x4d532d(0x122)][_0x4d532d(0x190)]=_0x3e836f[_0x4d532d(0x1a3)];let _0x267254=0x0;const _0x93ca49=async()=>{const _0x277d5c=_0x4d532d;_0x267254++,_0x3e836f[_0x277d5c(0x1b3)](_0x267254,0x1)&&await this['stopPercy']();};process['on'](_0x3e836f[_0x4d532d(0xef)],_0x93ca49);}catch(_0xa99a4f){process[_0x4d532d(0x122)][_0x4d532d(0x190)]=_0x3e836f['TGvVK'],logger['debug'](_0x4d532d(0x1d9)+_0xa99a4f);throw new Error(_0xa99a4f['toString']());}}async[a94_0x399810(0x179)](){const _0x5e5b33=a94_0x399810,_0x28c7fa={};_0x28c7fa[_0x5e5b33(0x1a8)]=_0x5e5b33(0x133),_0x28c7fa[_0x5e5b33(0x1de)]=_0x5e5b33(0xe4);const _0x40a4d6=_0x28c7fa;if(this[_0x5e5b33(0xf3)]&&this['percy'][_0x5e5b33(0x18f)]())try{await percyHelper[_0x5e5b33(0x179)](this[_0x5e5b33(0xf3)]),logger[_0x5e5b33(0x10c)](_0x40a4d6[_0x5e5b33(0x1a8)]);}catch(_0x26bf6e){logger[_0x5e5b33(0xea)](_0x40a4d6[_0x5e5b33(0x1de)],_0x26bf6e[_0x5e5b33(0x139)]);}}async[a94_0x399810(0x1d3)](){const _0x232337=a94_0x399810,_0x39c9d7={};_0x39c9d7[_0x232337(0x18a)]=_0x232337(0x14d),_0x39c9d7[_0x232337(0x131)]=_0x232337(0x1d6);const _0x45db58=_0x39c9d7;if(helper[_0x232337(0x11b)]()&&helper[_0x232337(0x1dc)](this[_0x232337(0x187)]['browserstackLocal'])&&(!this[_0x232337(0x1ad)]||!this['browserstackLocal'][_0x232337(0x18f)]()))try{if(this[_0x232337(0x187)][_0x232337(0x17f)][_0x232337(0x140)]){logger[_0x232337(0xfd)](_0x45db58[_0x232337(0x18a)]);return;}this[_0x232337(0x1ad)]=await helper[_0x232337(0x143)](this[_0x232337(0x187)]),logger['info'](_0x45db58[_0x232337(0x131)]);}catch(_0xc1a996){logger[_0x232337(0xfd)](_0xc1a996);throw new Error(_0xc1a996[_0x232337(0x1c8)]());}}async[a94_0x399810(0x100)](){const _0xd3fc45=a94_0x399810,_0x30b9a3={};_0x30b9a3[_0xd3fc45(0x176)]='Local\x20binary\x20stopped',_0x30b9a3[_0xd3fc45(0x1df)]=_0xd3fc45(0xf7);const _0x267898=_0x30b9a3;if(this[_0xd3fc45(0x1ad)]&&this['browserstackLocal'][_0xd3fc45(0x18f)]())try{await helper['stopLocalBinary'](this[_0xd3fc45(0x1ad)]),logger[_0xd3fc45(0x10c)](_0x267898[_0xd3fc45(0x176)]);}catch(_0x44d36f){logger['error'](_0x267898[_0xd3fc45(0x1df)],_0x44d36f[_0xd3fc45(0x139)]);}}async[a94_0x399810(0x19b)](){const _0x2a3f52=a94_0x399810;return PerformanceTester['measureWrapper'](PerformanceAutEvents[_0x2a3f52(0xe2)],async()=>{const _0x21e889=_0x2a3f52;await hubAllocator[_0x21e889(0x1b5)](this[_0x21e889(0x187)]);})();}async[a94_0x399810(0xd8)](){const _0x59ecaa=a94_0x399810,_0x305586={'UGxOX':function(_0x515f02,_0x116992){return _0x515f02(_0x116992);},'jggNV':_0x59ecaa(0x1bf),'vopmU':function(_0x80b584,_0x357b7d,_0x47139b,_0x445c2f,_0x5837ab,_0x4d1a0b,_0x22e828){return _0x80b584(_0x357b7d,_0x47139b,_0x445c2f,_0x5837ab,_0x4d1a0b,_0x22e828);},'dGdvP':'BrowserstackHealing.init\x20method\x20timed\x20out','WQzNx':_0x59ecaa(0x1e2),'vMVBG':function(_0x70bc8a,_0x72e37e){return _0x70bc8a(_0x72e37e);},'wLMCC':_0x59ecaa(0x119),'fEOVI':_0x59ecaa(0x18d),'mBJgX':function(_0x487f09,_0x30e244){return _0x487f09(_0x30e244);},'nevoG':function(_0x26de3f,_0x33883b){return _0x26de3f===_0x33883b;},'BGtbv':_0x59ecaa(0xe0),'fxvGg':function(_0x1aafe3,_0x39b563){return _0x1aafe3===_0x39b563;},'TErjE':function(_0x34f04c,_0x369c38){return _0x34f04c===_0x369c38;},'uFmmM':_0x59ecaa(0x1a4),'TLCkg':function(_0x20fbb4,_0x328818){return _0x20fbb4===_0x328818;},'pseun':_0x59ecaa(0x1b6),'giyuC':_0x59ecaa(0x184),'pRMve':function(_0x3bd6bb,_0xe37b62){return _0x3bd6bb(_0xe37b62);},'PbFZn':_0x59ecaa(0x10e),'wewZV':function(_0x3d454b,_0x9702b6){return _0x3d454b>=_0x9702b6;},'JkEjP':function(_0x1a2a68,_0x5260ae){return _0x1a2a68<_0x5260ae;},'NUTqJ':function(_0x261ea4,_0x22f54b){return _0x261ea4>=_0x22f54b;},'oTIzU':_0x59ecaa(0x189),'Hltqc':_0x59ecaa(0x15e),'kdRYK':function(_0x33632b){return _0x33632b();}},_0x11dcb0=PerformanceTester['measureWrapper'](_0x305586[_0x59ecaa(0x1da)],async()=>{const _0xe0bdd=_0x59ecaa;try{const _0x4d5846=new Date(),_0x40ca45=helper[_0xe0bdd(0x185)](this[_0xe0bdd(0x187)]),_0xa750a7=_0x305586[_0xe0bdd(0x19a)](require,path['join'](__dirname,_0x305586[_0xe0bdd(0x186)])),_0xde8f05=_0x305586['vopmU'](timeoutPromise,constants[_0xe0bdd(0x1cf)],_0x305586[_0xe0bdd(0x1cd)],_0x305586['WQzNx'],_0x4d5846,this['config'],this[_0xe0bdd(0x172)]),_0x56e84b={'tcgUrl':constants[_0xe0bdd(0x102)],'sdkVersion':_0x305586['vMVBG'](require,_0x305586[_0xe0bdd(0x154)])['version'],'methodUsed':_0x305586[_0xe0bdd(0x129)],'proxyConfig':_0x40ca45,'os':os[_0xe0bdd(0xd5)]()};if(_0x40ca45&&_0x40ca45[_0xe0bdd(0xed)]){utilities[_0xe0bdd(0x175)](constants[_0xe0bdd(0x14a)],_0x56e84b,this[_0xe0bdd(0x187)],this[_0xe0bdd(0x172)]);return;}const _0x42b022={};_0x42b022[_0xe0bdd(0x124)]=_0x40ca45;const _0x390c8d=await Promise[_0xe0bdd(0x199)]([_0xa750a7[_0xe0bdd(0xd3)](this['config'][_0xe0bdd(0x110)],this[_0xe0bdd(0x187)][_0xe0bdd(0x191)],constants[_0xe0bdd(0x102)],_0x305586['mBJgX'](require,_0x305586[_0xe0bdd(0x154)])[_0xe0bdd(0x1e6)],_0x42b022)[_0xe0bdd(0x10f)](_0x27e622=>{const _0x60be39=_0xe0bdd;return _0xde8f05[_0x60be39(0x1c5)](),_0x27e622;}),_0xde8f05]);_0x390c8d[_0xe0bdd(0xf4)]=_0x305586[_0xe0bdd(0x163)](_0x390c8d[_0xe0bdd(0xf4)],_0x305586[_0xe0bdd(0x1b2)])||_0x305586[_0xe0bdd(0x194)](_0x390c8d[_0xe0bdd(0xf4)],!![]);const _0x1daf47=_0x305586[_0xe0bdd(0x194)](this[_0xe0bdd(0x187)][_0xe0bdd(0x19e)],!![])||_0x305586['nevoG'](this[_0xe0bdd(0x187)][_0xe0bdd(0x19e)],_0x305586[_0xe0bdd(0x1b2)]);if(_0x305586[_0xe0bdd(0x1e5)](_0x390c8d[_0xe0bdd(0x139)],constants[_0xe0bdd(0x12e)])&&_0x1daf47)logger[_0xe0bdd(0x10c)](_0x305586[_0xe0bdd(0x1d4)]);else{if(!_0x390c8d[_0xe0bdd(0x196)]&&_0x305586['TLCkg'](_0x390c8d[_0xe0bdd(0x1d0)],0x1f7)&&_0x1daf47)logger[_0xe0bdd(0x10c)](_0x305586['pseun']),utilities[_0xe0bdd(0x175)](constants[_0xe0bdd(0xdd)],_0x56e84b,this[_0xe0bdd(0x187)],this[_0xe0bdd(0x172)]);else{if(!_0x390c8d[_0xe0bdd(0x196)]&&_0x1daf47){logger[_0xe0bdd(0x10c)](_0x305586['giyuC']);const _0x454d95={'tcgUrl':constants[_0xe0bdd(0x102)],'sdkVersion':_0x305586[_0xe0bdd(0xe8)](require,_0x305586[_0xe0bdd(0x154)])[_0xe0bdd(0x1e6)],'methodUsed':_0x305586['fEOVI'],'proxyConfig':_0x40ca45,'os':os[_0xe0bdd(0xd5)]()};utilities[_0xe0bdd(0x175)](constants[_0xe0bdd(0x164)],_0x454d95,this[_0xe0bdd(0x187)],this[_0xe0bdd(0x172)]);}else{if(_0x390c8d[_0xe0bdd(0x196)]&&!_0x390c8d[_0xe0bdd(0xf4)]&&_0x1daf47)logger[_0xe0bdd(0x10c)](_0x305586[_0xe0bdd(0xf9)]);else{if(_0x305586[_0xe0bdd(0x182)](_0x390c8d['status'],0xc8)&&_0x305586['JkEjP'](_0x390c8d['status'],0x12c))utilities[_0xe0bdd(0x175)](constants[_0xe0bdd(0xff)],_0x56e84b,this[_0xe0bdd(0x187)],this[_0xe0bdd(0x172)]);else{if(_0x305586[_0xe0bdd(0x125)](_0x390c8d['status'],0x190))_0x56e84b['status']=_0x390c8d[_0xe0bdd(0x1d0)],utilities[_0xe0bdd(0x175)](constants[_0xe0bdd(0x10b)],_0x56e84b,this[_0xe0bdd(0x187)],this[_0xe0bdd(0x172)]);else!_0x390c8d['status']&&utilities[_0xe0bdd(0x175)](constants[_0xe0bdd(0x12b)],_0x56e84b,this[_0xe0bdd(0x187)],this[_0xe0bdd(0x172)]);}}}}}if(_0x390c8d['isAuthenticated']&&_0x390c8d[_0xe0bdd(0xf4)]){const _0x1a5e31={};_0x1a5e31[_0xe0bdd(0xf2)]=_0x390c8d;const _0x597a8c=_0x1a5e31;_0x40ca45&&(_0x597a8c[_0xe0bdd(0x17d)]=_0x40ca45),_0x597a8c[_0xe0bdd(0x172)]=this['framework'],_0x597a8c[_0xe0bdd(0x16c)]=this[_0xe0bdd(0x187)],helper[_0xe0bdd(0x171)](_0x597a8c),logger[_0xe0bdd(0xfd)](_0x305586[_0xe0bdd(0x152)]);}}catch(_0x49ea76){logger[_0xe0bdd(0xfd)](_0xe0bdd(0x162)+(_0x49ea76[_0xe0bdd(0x139)]?_0x49ea76['message']:''));}});await _0x305586['kdRYK'](_0x11dcb0);}[a94_0x399810(0x1a6)](){const _0x47013f=a94_0x399810,_0x5077e5={'vDpVj':function(_0x5d71f5,_0x319ff9){return _0x5d71f5(_0x319ff9);},'zfNtg':_0x47013f(0x19f)};_0x5077e5[_0x47013f(0xf0)](require,_0x5077e5['zfNtg'])();}[a94_0x399810(0x142)](){const _0x53697c=a94_0x399810,_0x194710={};_0x194710[_0x53697c(0x12f)]=_0x53697c(0x113),_0x194710[_0x53697c(0x17b)]='unhandledRejection',_0x194710['qabso']=_0x53697c(0x1c6);const _0x536db7=_0x194710,_0x38d779=_0x1084a3=>{const _0x34b38a=_0x53697c,_0x2ad66d=_0x536db7['IEzmx'][_0x34b38a(0x11a)]('|');let _0x446648=0x0;while(!![]){switch(_0x2ad66d[_0x446648++]){case'0':this[_0x34b38a(0x13b)]['push'](util[_0x34b38a(0x167)]('%j',_0x1084a3));continue;case'1':ClientTroubleShootingService['reportFinalDetectionState']();continue;case'2':PerformanceTester['captureError'](_0x1084a3);continue;case'3':logger['debug'](util[_0x34b38a(0x167)](_0x1084a3));continue;case'4':logger[_0x34b38a(0xea)](_0x1084a3[_0x34b38a(0x139)]);continue;}break;}};process['on'](_0x536db7[_0x53697c(0x17b)],_0x38d779),process['on'](_0x536db7['qabso'],_0x38d779);}async[a94_0x399810(0x1ba)](_0x218c7d){const _0x807347=a94_0x399810,_0xcf8f26={};_0xcf8f26[_0x807347(0x108)]='2|6|3|4|0|7|5|1',_0xcf8f26[_0x807347(0xf1)]=function(_0x12757d,_0x2d5413){return _0x12757d+_0x2d5413;},_0xcf8f26[_0x807347(0xdb)]=_0x807347(0x1e3),_0xcf8f26[_0x807347(0xd7)]=_0x807347(0x13f),_0xcf8f26[_0x807347(0x12d)]=function(_0x22f4a5,_0x418218){return _0x22f4a5+_0x418218;};const _0x507fac=_0xcf8f26,_0x2d25c0=_0x507fac[_0x807347(0x108)][_0x807347(0x11a)]('|');let _0x168a00=0x0;while(!![]){switch(_0x2d25c0[_0x168a00++]){case'0':await ClientTroubleShootingService['reportProcessInterruptionSituation'](_0x218c7d);continue;case'1':await BrowserstackCLI[_0x807347(0x12a)]()[_0x807347(0x197)]();continue;case'2':if(this[_0x507fac['IlIhN'](_0x507fac[_0x807347(0xdb)],_0x218c7d)])return;continue;case'3':logger[_0x807347(0x10c)](_0x507fac[_0x807347(0xf1)](_0x507fac['MvVyt'],_0x218c7d));continue;case'4':this[_0x807347(0x15c)]=_0x218c7d;continue;case'5':await ClientTroubleShootingService[_0x807347(0x1ac)]();continue;case'6':this[_0x507fac[_0x807347(0x12d)](_0x507fac[_0x807347(0xdb)],_0x218c7d)]=!![];continue;case'7':await TestHubHandler[_0x807347(0x197)](_0x218c7d);continue;}break;}}['exitHandler'](){const _0x5e47c0=a94_0x399810,_0x5d9ff9={'QCgna':function(_0x494d42,_0x2702f7){return _0x494d42===_0x2702f7;},'nXHQZ':_0x5e47c0(0x103),'QpnsQ':function(_0x32ebec,_0x2d9827){return _0x32ebec>_0x2d9827;},'CkCem':function(_0x240b88,_0x39d9ce){return _0x240b88>_0x39d9ce;},'nItgM':function(_0x1137b8,_0x565844){return _0x1137b8(_0x565844);},'tybfp':function(_0x42e161,_0x33e727){return _0x42e161(_0x33e727);},'zSizi':function(_0x5ec000){return _0x5ec000();},'lhcGf':_0x5e47c0(0x111)};let _0x5c4649=0x0;return async()=>{const _0x39000d=_0x5e47c0;_0x5c4649++;if(_0x5d9ff9[_0x39000d(0x166)](_0x5c4649,0x1)){helper[_0x39000d(0x192)](this[_0x39000d(0x172)])&&await this[_0x39000d(0x100)]();try{logger[_0x39000d(0xfd)](_0x5d9ff9[_0x39000d(0x1d7)]),await TestHubHandler[_0x39000d(0x197)](_0x5c4649),await ClientTroubleShootingService[_0x39000d(0x1ac)](),await BrowserstackCLI[_0x39000d(0x12a)]()['stop']('1');}catch(_0x3ca3ea){logger[_0x39000d(0xfd)](_0x39000d(0x16d)+util[_0x39000d(0x167)](_0x3ca3ea));}PerformanceTester[_0x39000d(0x180)](PerformanceEvents[_0x39000d(0x177)]);if(PerformanceTester[_0x39000d(0x136)]()){const {measures:_0x2525f1,errors:_0x129f5e}=await PerformanceTester[_0x39000d(0xd6)](),_0x2fcc0c={};if(_0x2525f1&&_0x5d9ff9['QpnsQ'](_0x2525f1[_0x39000d(0x181)],0x0)||_0x129f5e&&_0x5d9ff9['CkCem'](_0x129f5e['length'],0x0)){const _0xcccae5={};_0xcccae5[_0x39000d(0x1a5)]=_0x2525f1,_0xcccae5[_0x39000d(0x107)]=_0x129f5e,Object[_0x39000d(0x1b7)](_0x2fcc0c,_0xcccae5);}try{const _0xfc583c=await helper['sendToEDS'](_0x2fcc0c,this['config']);logger[_0x39000d(0xfd)](_0x39000d(0xeb)+_0x5d9ff9[_0x39000d(0xfe)](getEdsInstrumentationAPIUrl,'')+_0x39000d(0x18c)+_0xfc583c['statusCode']);}catch(_0x5105af){logger[_0x39000d(0xfd)](_0x39000d(0x14f)+_0x5d9ff9['tybfp'](getEdsInstrumentationAPIUrl,'')+_0x39000d(0x1af)+util[_0x39000d(0x167)](_0x5105af));}try{fs['writeFileSync'](path[_0x39000d(0x169)](_0x5d9ff9[_0x39000d(0x1a0)](getLogDir),_0x5d9ff9[_0x39000d(0x13d)]),JSON['stringify'](_0x2fcc0c));}catch(_0x2b8c88){logger[_0x39000d(0xfd)](_0x39000d(0x17a)+_0x2b8c88);}}}logger&&logger[_0x39000d(0x11e)](),fileLogger&&fileLogger[_0x39000d(0x11e)]();};}}exports[a94_0x399810(0x1e0)]=BrowserStackSetup;