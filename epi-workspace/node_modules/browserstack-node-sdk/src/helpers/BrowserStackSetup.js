const a94_0x2115cc=a94_0xf235;function a94_0xf235(_0x4b811f,_0x488a3c){const _0x2810c1=a94_0x2810();return a94_0xf235=function(_0xf2350f,_0x44d1c1){_0xf2350f=_0xf2350f-0x108;let _0x24649b=_0x2810c1[_0xf2350f];return _0x24649b;},a94_0xf235(_0x4b811f,_0x488a3c);}(function(_0x5969b8,_0x48f660){const _0x2f9e78=a94_0xf235,_0x33f256=_0x5969b8();while(!![]){try{const _0x30dd1b=parseInt(_0x2f9e78(0x1a4))/0x1*(parseInt(_0x2f9e78(0x1ad))/0x2)+parseInt(_0x2f9e78(0x145))/0x3+-parseInt(_0x2f9e78(0x13b))/0x4*(-parseInt(_0x2f9e78(0x1ce))/0x5)+parseInt(_0x2f9e78(0x113))/0x6+parseInt(_0x2f9e78(0x115))/0x7+-parseInt(_0x2f9e78(0x20a))/0x8*(-parseInt(_0x2f9e78(0x18a))/0x9)+parseInt(_0x2f9e78(0x1ef))/0xa*(-parseInt(_0x2f9e78(0x13f))/0xb);if(_0x30dd1b===_0x48f660)break;else _0x33f256['push'](_0x33f256['shift']());}catch(_0xd8c561){_0x33f256['push'](_0x33f256['shift']());}}}(a94_0x2810,0xd86c3));function a94_0x2810(){const _0x85fc55=['Local\x20binary\x20stopped','11992rOzGub','qHYLA','handleExceptions','stringify','11TFQhMH','hubUrl','HZClQ','join','isHealingEnabled','config','1011588ZzUard','qiTep','setLogDir','mYium','CflTm','Shutdown\x20triggered\x20by\x20','./timeoutPromise','TCG_URL','tulWP','JLvIf','setupKeepAlive','isUndefined','browserStackLocalOptions','unhandledRejection','./performance/performance-tester','unhandledErrors','getHubUrl','teaBB','framework','then','setCredentialsFromYmlConfig','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','toLowerCase','FDPCV','aiHeal:tcgAuth','WsGsI','qCZQm','turboScaleOptions','GwxHz','end','dvywd','turboScaleUrl','captureError','split','false','wZHoQ','../bin/v2/browserstackCLI','BrowserstackHealing.init\x20method\x20timed\x20out','getProxyConfigForTcg','JaGWR','IwFPW','SIGHUP','LQQxJ','SDK_CLEANUP','yVAsf','bind','startLocalBinary','HqPGx','getLocalIdentifier','assign','forceLocal','selenium-webdriver','useW3C','stopLocalBinary','./logger','setBrowserstackInfraFromConfig','AUTOLOGCAPTURE_NOTIFICATION','race','DQzQx','isTurboScaleSession','ZIWgz','close','qbwkK','turboScale','LeuYQ','\x20with\x20response\x20','skipBinaryInitialisation','OakFK','codeceptjs','3015fDIacV','cancel','./testhub/testhubHandler','writeFileSync','message','skipSessionStatus','isBrowserstackInfra','turboScaleGridDetails','Error\x20in\x20writing\x20events\x20to\x20file\x20','HUB_MANAGEMENT','Error\x20in\x20percy\x20setup\x20','testContextOptions','winstonLogger','isTrialGrid','isRunning','../ai-sdk-node/bundle','LpqDR','Percy\x20started\x20successfully','nXPLI','BkNco','SIGTERM','allocateHub','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','startPercy','getPackageVersion','UPGRADE_REQUIRED','4jpmrtj','\x20with\x20error\x20','zwHHo','FRAMEWORK','yGuSK','compareVersions','MZjoP','skipSessionName','setLogLevel','273310WVdkqi','checkStopLocalBinaryOnExit','error','Error\x20in\x20sending\x20testhub\x20stop:\x20','integrations','oaPAr','generateLocalIdentifier','yKnLf','custom-repeater','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','finalize','proxyConfig','isAuthenticated','killSignal','../bin/utils/constants','AI_PROXY_FAILURE','toString','includes','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','browserstackLocal','NuuOM','setHandlePWError','../hubAllocationMethods','requireSeleniumWebdriverCheck','intExitHandler','isNotUndefined','cPhkK','pgzcN','playwrightUrl','SDK\x20run\x20started\x20with\x20id:\x20','info','readConfig','BROWSERSTACK_TURBOSCALE','475OUomcZ','getInstance','central_scanner','setupPercy','platforms','__isPlaywrightInstalled','NQIJH','VzQok','vsTgB','Local\x20binary\x20started\x20successfully','cliConfig','parallelsPerPlatform','init','errorMessage','ZAgIA','percy','TCG_AUTH_FAILURE','win32','lmgMI','env','ZokCj','measureWrapper','vafPC','statusCode','setupTcgConfigFile','getUserName','events.json','setEnvCaps','selfHeal','bjZuk','MGUck','GgnPr','format','22920950OQVwbl','preInitialize','wsjYh','yqtVa','default','status','11|23|14|19|21|9|2|15|12|8|0|3|17|10|6|5|18|22|7|20|13|1|4|16','getAccessKey','IGmYr','stop','localOptions','proxy','eiFio','gAijb','UPIqF','reportFinalDetectionState','AI_INIT_SUCCESSFUL','LoEnJ','NmvJo','SIGBREAK','platform','constructor','MEpif','SIGINT','sdkRunId','isLTSSession','version','13192VFNhDq','eOgJj','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','ftfDn','warn','initialize','duVPv','setupTCGAuth','beforeExit','JncRC','isTrue','?caps=','proxyUrl','ehXcU','exitHandler','fileLogger','ZCTaz','AENtA','Data\x20sent\x20successfully\x20to\x20','AIxHZ','JMxId','../bin/v2/modules/loadTestModule','getCentralUser','length','util','4.5.0','IZBDW','372420KCrvpH','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','9768157npYiMa','uRbJl','./helper','./percy/utils','Calling\x20Build\x20Stop\x20from\x20ExitHandler','configPath','setUpHubUrl','tcg\x20config\x20setup\x20successful.','Failed\x20to\x20send\x20data\x20to\x20','Error\x20occured\x20while\x20stopping\x20percy','getTurboScaleGridDetails','../../package.json','yeyQI','SDKTestAttempted','true','debug','envConfig','userName','GZFaf','xQrPd','push','stopPercy','SIGABRT','disableAutoCaptureLogs','exceptions','fireFunnelTestEvent','ats-repeater','userName\x20or\x20accessKey\x20is\x20not\x20defined','htHpb','stopBrowserstackLocal','setupBrowserstackLocal','BrowserstackHealingInitFailed','BROWSERSTACK_PERCY','getFinalCaps','./testhub/utils','IzKSC','customRepeaters'];a94_0x2810=function(){return _0x85fc55;};return a94_0x2810();}const util=require(a94_0x2115cc(0x110)),os=require('os'),path=require('path'),{v4:uuidv4}=require('uuid'),fs=require('fs'),constants=require(a94_0x2115cc(0x1bb)),logger=require(a94_0x2115cc(0x17b))[a94_0x2115cc(0x196)],fileLogger=require('./logger')[a94_0x2115cc(0x219)],{getLogDir}=require('./logger'),helper=require(a94_0x2115cc(0x117)),utilities=require('./utilities'),percyHelper=require(a94_0x2115cc(0x118)),hubAllocator=require(a94_0x2115cc(0x1c3)),PerformanceTester=require(a94_0x2115cc(0x153)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require('./performance/constants'),{setPercyFlag}=require(a94_0x2115cc(0x137)),TestHubHandler=require(a94_0x2115cc(0x18c)),timeoutPromise=require(a94_0x2115cc(0x14b)),BrowserstackCLI=require(a94_0x2115cc(0x169)),LoadTestModule=require(a94_0x2115cc(0x10d)),{getEdsInstrumentationAPIUrl}=require('../bin/utils/apiUtilityMethods'),ClientTroubleShootingService=require('../bin/utils/clientTroubleshootingService');class BrowserStackSetup{constructor(_0x5d2c95,_0x2a65f6){const _0x4bacb6=a94_0x2115cc,_0x312a46={'wZHoQ':_0x4bacb6(0x1f5),'yVAsf':function(_0x1c625c){return _0x1c625c();},'ipnNP':'No\x20config\x20provided.'},_0x282d31=_0x312a46[_0x4bacb6(0x168)][_0x4bacb6(0x166)]('|');let _0x109e24=0x0;while(!![]){switch(_0x282d31[_0x109e24++]){case'0':this[_0x4bacb6(0x1db)]={};continue;case'1':helper[_0x4bacb6(0x147)](this['config']);continue;case'2':this['config']=helper[_0x4bacb6(0x1cc)](this[_0x4bacb6(0x11a)]);continue;case'3':this['sdkRunId']=_0x312a46[_0x4bacb6(0x171)](uuidv4);continue;case'4':helper[_0x4bacb6(0x1ac)](this['config'],this['cliConfig'],this[_0x4bacb6(0x125)]);continue;case'5':if(this['config']['error'])throw new Error(this['config']['error']);continue;case'6':if(helper[_0x4bacb6(0x150)](this['config']))throw new Error(_0x312a46['ipnNP']);continue;case'7':this['config'][_0x4bacb6(0x195)][_0x4bacb6(0x18f)]=!helper[_0x4bacb6(0x190)]()||helper[_0x4bacb6(0x214)](this[_0x4bacb6(0x144)][_0x4bacb6(0x195)]['skipSessionStatus']);continue;case'8':this[_0x4bacb6(0x144)][_0x4bacb6(0x195)]=this[_0x4bacb6(0x144)][_0x4bacb6(0x195)]||{};continue;case'9':this['configPath']=helper['getConfigPath'](_0x5d2c95);continue;case'10':global[_0x4bacb6(0x157)]=_0x2a65f6;continue;case'11':this[_0x4bacb6(0x154)]=[];continue;case'12':this['config'][_0x4bacb6(0x1d2)]=this[_0x4bacb6(0x144)][_0x4bacb6(0x1d2)]||[];continue;case'13':helper[_0x4bacb6(0x136)](this[_0x4bacb6(0x144)],this[_0x4bacb6(0x1d8)],this[_0x4bacb6(0x125)]);continue;case'14':this[_0x4bacb6(0x125)]=helper[_0x4bacb6(0x1e9)]();continue;case'15':this[_0x4bacb6(0x1d8)]=helper['setCLICaps'](_0x5d2c95);continue;case'16':PerformanceTester['startMonitoring']();continue;case'17':this[_0x4bacb6(0x157)]=_0x2a65f6;continue;case'18':helper[_0x4bacb6(0x17c)](this[_0x4bacb6(0x144)],this[_0x4bacb6(0x1d8)]);continue;case'19':this[_0x4bacb6(0x1c0)]=null;continue;case'20':this['config'][_0x4bacb6(0x195)][_0x4bacb6(0x1ab)]=!helper[_0x4bacb6(0x190)]()||helper[_0x4bacb6(0x214)](this['config'][_0x4bacb6(0x195)][_0x4bacb6(0x1ab)]);continue;case'21':this[_0x4bacb6(0x1dd)]=null;continue;case'22':helper[_0x4bacb6(0x159)](this[_0x4bacb6(0x144)]);continue;case'23':helper['normalizeTestReportingEnvVars']();continue;}break;}}[a94_0x2115cc(0x1f0)](_0x5478e6){const _0x139ad3=a94_0x2115cc,_0x28ebd7={'BkNco':_0x139ad3(0x130),'bJGNJ':function(_0xb98e94,_0x253ed1){return _0xb98e94===_0x253ed1;},'uRbJl':function(_0xe2e143,_0x580b27){return _0xe2e143===_0x580b27;},'IGmYr':_0x139ad3(0x1b1),'MZjoP':_0x139ad3(0x122),'bISkL':function(_0x5e3d53,_0x1eb2a2){return _0x5e3d53<_0x1eb2a2;},'WQkfa':function(_0x29f3e3,_0x222589){return _0x29f3e3(_0x222589);},'CflTm':_0x139ad3(0x178),'OakFK':function(_0x13ad6f,_0x576d01){return _0x13ad6f===_0x576d01;},'ZCTaz':_0x139ad3(0x111),'AENtA':_0x139ad3(0x20c),'vNKXc':_0x139ad3(0x1bf),'htHpb':_0x139ad3(0x19e),'tulWP':_0x139ad3(0x206),'WhDSU':_0x139ad3(0x16e),'vsTgB':function(_0x4710b9,_0x2ea100){return _0x4710b9!==_0x2ea100;},'qiTep':_0x139ad3(0x1df),'duVPv':_0x139ad3(0x12b),'Jyqpl':'SIGQUIT','MGUck':_0x139ad3(0x202),'ZokCj':_0x139ad3(0x212)},_0x9682f9=this['framework'];global[_0x139ad3(0x144)]=this['config'],helper['sanitizeCaps'](this[_0x139ad3(0x144)]),this[_0x139ad3(0x1ba)]=null,global[_0x139ad3(0x207)]=this['sdkRunId'],logger[_0x139ad3(0x1cb)](_0x139ad3(0x1ca)+this[_0x139ad3(0x207)]),!this[_0x139ad3(0x144)]['browserStackLocalOptions']&&(this[_0x139ad3(0x144)][_0x139ad3(0x151)]=this[_0x139ad3(0x144)][_0x139ad3(0x1f9)]||{});if(helper[_0x139ad3(0x150)](helper[_0x139ad3(0x1e7)](this['config']))||helper[_0x139ad3(0x150)](helper[_0x139ad3(0x1f6)](this[_0x139ad3(0x144)])))throw new Error(_0x28ebd7[_0x139ad3(0x19d)]);helper['getLocalConfig'](this['config'])&&helper[_0x139ad3(0x150)](helper[_0x139ad3(0x175)](this[_0x139ad3(0x144)]))&&(!helper[_0x139ad3(0x150)](this[_0x139ad3(0x144)][_0x139ad3(0x151)])&&_0x28ebd7['bJGNJ'](this[_0x139ad3(0x144)][_0x139ad3(0x151)][_0x139ad3(0x204)],Object)?!helper[_0x139ad3(0x214)](this[_0x139ad3(0x144)][_0x139ad3(0x151)][_0x139ad3(0x187)])&&(this[_0x139ad3(0x144)][_0x139ad3(0x151)]['localIdentifier']=helper[_0x139ad3(0x1b3)]()):this[_0x139ad3(0x144)][_0x139ad3(0x151)]={'localIdentifier':helper['generateLocalIdentifier']()});this[_0x139ad3(0x144)][_0x139ad3(0x151)]['skipBinaryInitialisation']=helper['isTrue'](this['config'][_0x139ad3(0x151)][_0x139ad3(0x187)]),helper[_0x139ad3(0x1c2)](this[_0x139ad3(0x144)]);if(_0x28ebd7[_0x139ad3(0x116)](_0x9682f9,_0x28ebd7[_0x139ad3(0x1f7)]))return;this[_0x139ad3(0x13d)]();process[_0x139ad3(0x1e1)]['BROWSERSTACK_TURBOSCALE']&&(this[_0x139ad3(0x144)][_0x139ad3(0x184)]=helper[_0x139ad3(0x214)](process[_0x139ad3(0x1e1)][_0x139ad3(0x1cd)]),this[_0x139ad3(0x144)][_0x139ad3(0x160)]=this['config'][_0x139ad3(0x160)]||{});helper[_0x139ad3(0x180)](this[_0x139ad3(0x144)])&&(process[_0x139ad3(0x1e1)][_0x139ad3(0x1cd)]=!![]);LoadTestModule[_0x139ad3(0x208)](this['config'])&&logger[_0x139ad3(0x124)]('LTS\x20session\x20enabled\x20for\x20this\x20run.\x20SDK\x20run\x20id:\x20'+this[_0x139ad3(0x207)]);if(!helper[_0x139ad3(0x190)]()){try{process[_0x139ad3(0x1e1)][_0x139ad3(0x1a7)]=_0x9682f9,utilities[_0x139ad3(0x12e)](_0x28ebd7[_0x139ad3(0x1aa)],{},this[_0x139ad3(0x144)],this[_0x139ad3(0x157)]);}catch(_0x38f567){logger[_0x139ad3(0x124)](_0x139ad3(0x114)+_0x38f567);}return;}if(helper[_0x139ad3(0x1c4)](_0x9682f9)){if(global[_0x139ad3(0x1d3)])return;_0x28ebd7['bISkL'](_0x28ebd7['WQkfa'](parseInt,helper[_0x139ad3(0x1a2)](_0x28ebd7[_0x139ad3(0x149)])),0x3)&&(this[_0x139ad3(0x144)][_0x139ad3(0x179)]=![]),_0x28ebd7[_0x139ad3(0x188)](helper[_0x139ad3(0x1a9)](helper[_0x139ad3(0x1a2)](_0x28ebd7[_0x139ad3(0x149)]),_0x28ebd7[_0x139ad3(0x108)]),0x1)&&(this[_0x139ad3(0x144)][_0x139ad3(0x179)]=!![]);}(helper[_0x139ad3(0x150)](this['config'][_0x139ad3(0x1d2)])||helper[_0x139ad3(0x150)](this[_0x139ad3(0x144)][_0x139ad3(0x1d2)][_0x139ad3(0x10f)]))&&(helper[_0x139ad3(0x150)](this['config'][_0x139ad3(0x1d9)])?logger[_0x139ad3(0x1cb)](_0x28ebd7[_0x139ad3(0x109)]):logger[_0x139ad3(0x20e)](_0x28ebd7['vNKXc']),this[_0x139ad3(0x144)]['platforms']=[]);!this[_0x139ad3(0x144)][_0x139ad3(0x195)]&&(this[_0x139ad3(0x144)][_0x139ad3(0x195)]={});try{process[_0x139ad3(0x1e1)][_0x139ad3(0x1a7)]=_0x5478e6['_'][0x0],utilities[_0x139ad3(0x12e)](_0x28ebd7[_0x139ad3(0x1aa)],{},this[_0x139ad3(0x144)],this['framework']);}catch(_0x4d3f89){logger[_0x139ad3(0x124)](_0x139ad3(0x114)+_0x4d3f89);}!this['config'][_0x139ad3(0x12c)]&&logger[_0x139ad3(0x1cb)](constants[_0x139ad3(0x17d)]),this[_0x139ad3(0x1c5)]=this[_0x139ad3(0x1c5)][_0x139ad3(0x172)](this),process['on'](_0x28ebd7[_0x139ad3(0x131)],this['intExitHandler']),process['on'](_0x28ebd7[_0x139ad3(0x14d)],this['intExitHandler']),process['on'](_0x28ebd7['WhDSU'],this['intExitHandler']),_0x28ebd7[_0x139ad3(0x1d6)](process[_0x139ad3(0x203)],_0x28ebd7[_0x139ad3(0x146)])?(process['on'](_0x28ebd7[_0x139ad3(0x210)],this[_0x139ad3(0x1c5)]),process['on'](_0x28ebd7['Jyqpl'],this['intExitHandler'])):process['on'](_0x28ebd7[_0x139ad3(0x1ec)],this[_0x139ad3(0x1c5)]),process['on'](_0x28ebd7[_0x139ad3(0x1e2)],this[_0x139ad3(0x218)]());}async[a94_0x2115cc(0x20f)](_0x2f0fa7){const _0xac2df=a94_0x2115cc,_0x29afb1={'GgnPr':_0xac2df(0x12f),'teaBB':_0xac2df(0x1b5),'IzKSC':_0xac2df(0x123),'xQrPd':function(_0x584809,_0x3bf976){return _0x584809===_0x3bf976;},'JMxId':'playwright','WsGsI':function(_0x56419a,_0x2623e7){return _0x56419a+_0x2623e7;},'fQoPZ':_0xac2df(0x215),'JLvIf':function(_0x110a1c,_0x325731){return _0x110a1c(_0x325731);},'LQQxJ':_0xac2df(0x189)};this['preInitialize'](_0x2f0fa7);if(helper[_0xac2df(0x180)](this[_0xac2df(0x144)])){const _0x3d38b1=await helper[_0xac2df(0x11f)](this[_0xac2df(0x144)]);this[_0xac2df(0x144)][_0xac2df(0x191)]=_0x3d38b1,_0x3d38b1[_0xac2df(0x197)]&&helper[_0xac2df(0x1c6)](this[_0xac2df(0x144)][_0xac2df(0x1c0)])&&helper[_0xac2df(0x214)](this[_0xac2df(0x144)]['browserstackLocal'])&&(this['config'][_0xac2df(0x151)]['localIdentifier']=_0x29afb1[_0xac2df(0x1ed)],this['config'][_0xac2df(0x151)][_0x29afb1[_0xac2df(0x156)]]=_0x3d38b1[_0xac2df(0x139)]['join'](','),this[_0xac2df(0x144)][_0xac2df(0x151)][_0xac2df(0x177)]=_0x29afb1[_0xac2df(0x138)]),this[_0xac2df(0x144)]['turboScaleUrl']=_0x3d38b1['url'],this[_0xac2df(0x157)]&&_0x29afb1[_0xac2df(0x128)](this[_0xac2df(0x157)][_0xac2df(0x15b)](),_0x29afb1[_0xac2df(0x10c)])?this['config'][_0xac2df(0x164)]=_0x29afb1[_0xac2df(0x15e)](_0x3d38b1[_0xac2df(0x1c9)],_0x29afb1['fQoPZ']):constants['hubUrl']=helper[_0xac2df(0x155)](this[_0xac2df(0x144)]),logger[_0xac2df(0x124)](_0xac2df(0x1b6)+constants[_0xac2df(0x140)]);}helper['setProxySettings'](this['config']),this['setupKeepAlive'](),_0x29afb1[_0xac2df(0x14e)](setPercyFlag,this),await this[_0xac2df(0x133)](),![_0x29afb1[_0xac2df(0x16f)],_0x29afb1[_0xac2df(0x10c)]][_0xac2df(0x1be)](this[_0xac2df(0x157)])&&!helper['isTurboScaleSession'](this[_0xac2df(0x144)])&&!helper[_0xac2df(0x10e)]()[_0xac2df(0x1d0)]&&await this[_0xac2df(0x11b)]();}async[a94_0x2115cc(0x1d1)](){const _0x73c4c=a94_0x2115cc,_0x57edf2={};_0x57edf2[_0x73c4c(0x183)]=function(_0x307d1f,_0x1d96d7){return _0x307d1f===_0x1d96d7;},_0x57edf2['yqtVa']=_0x73c4c(0x167),_0x57edf2[_0x73c4c(0x217)]=_0x73c4c(0x15a),_0x57edf2['ZIWgz']=_0x73c4c(0x19b),_0x57edf2[_0x73c4c(0x1b2)]=_0x73c4c(0x123),_0x57edf2[_0x73c4c(0x163)]=_0x73c4c(0x212);const _0x4cca33=_0x57edf2;if(helper['isTrue'](this[_0x73c4c(0x144)][_0x73c4c(0x1dd)])&&(!this['percy']||!this['percy'][_0x73c4c(0x198)]()))try{this[_0x73c4c(0x1dd)]=await percyHelper[_0x73c4c(0x1a1)](this[_0x73c4c(0x144)]);if(!this[_0x73c4c(0x1dd)]){process[_0x73c4c(0x1e1)]['BROWSERSTACK_PERCY']=_0x4cca33[_0x73c4c(0x1f2)];throw new Error(_0x4cca33[_0x73c4c(0x217)]);}logger[_0x73c4c(0x1cb)](_0x4cca33[_0x73c4c(0x181)]),process['env'][_0x73c4c(0x135)]=_0x4cca33[_0x73c4c(0x1b2)];let _0x24b8a4=0x0;const _0x586adc=async()=>{const _0x303898=_0x73c4c;_0x24b8a4++,_0x4cca33[_0x303898(0x183)](_0x24b8a4,0x1)&&await this[_0x303898(0x12a)]();};process['on'](_0x4cca33[_0x73c4c(0x163)],_0x586adc);}catch(_0x8f39d6){process['env'][_0x73c4c(0x135)]=_0x4cca33[_0x73c4c(0x1f2)],logger[_0x73c4c(0x124)](_0x73c4c(0x194)+_0x8f39d6);throw new Error(_0x8f39d6[_0x73c4c(0x1bd)]());}}async[a94_0x2115cc(0x12a)](){const _0x7800cc=a94_0x2115cc,_0x1ee762={};_0x1ee762[_0x7800cc(0x1eb)]='Percy\x20stopped',_0x1ee762[_0x7800cc(0x161)]=_0x7800cc(0x11e);const _0x424991=_0x1ee762;if(this[_0x7800cc(0x1dd)]&&this[_0x7800cc(0x1dd)][_0x7800cc(0x198)]())try{await percyHelper[_0x7800cc(0x12a)](this[_0x7800cc(0x1dd)]),logger[_0x7800cc(0x1cb)](_0x424991['bjZuk']);}catch(_0x43f08d){logger['error'](_0x424991['GwxHz'],_0x43f08d[_0x7800cc(0x18e)]);}}async[a94_0x2115cc(0x133)](){const _0x2d8312=a94_0x2115cc,_0x23045b={};_0x23045b[_0x2d8312(0x1dc)]='Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled',_0x23045b[_0x2d8312(0x1a6)]=_0x2d8312(0x1d7);const _0x1322b8=_0x23045b;if(helper[_0x2d8312(0x190)]()&&helper['isTrue'](this['config'][_0x2d8312(0x1c0)])&&(!this[_0x2d8312(0x1c0)]||!this[_0x2d8312(0x1c0)]['isRunning']()))try{if(this[_0x2d8312(0x144)][_0x2d8312(0x151)][_0x2d8312(0x187)]){logger[_0x2d8312(0x124)](_0x1322b8[_0x2d8312(0x1dc)]);return;}this[_0x2d8312(0x1c0)]=await helper[_0x2d8312(0x173)](this[_0x2d8312(0x144)]),logger[_0x2d8312(0x1cb)](_0x1322b8[_0x2d8312(0x1a6)]);}catch(_0x295b52){logger[_0x2d8312(0x124)](_0x295b52);throw new Error(_0x295b52[_0x2d8312(0x1bd)]());}}async[a94_0x2115cc(0x132)](){const _0x5d33c1=a94_0x2115cc,_0x3d09a5={};_0x3d09a5[_0x5d33c1(0x20d)]=_0x5d33c1(0x13a),_0x3d09a5['gAijb']='Error\x20occured\x20while\x20stopping\x20local\x20binary';const _0x23d2ad=_0x3d09a5;if(this[_0x5d33c1(0x1c0)]&&this[_0x5d33c1(0x1c0)][_0x5d33c1(0x198)]())try{await helper[_0x5d33c1(0x17a)](this['browserstackLocal']),logger['info'](_0x23d2ad[_0x5d33c1(0x20d)]);}catch(_0x486a64){logger[_0x5d33c1(0x1af)](_0x23d2ad[_0x5d33c1(0x1fc)],_0x486a64[_0x5d33c1(0x18e)]);}}async[a94_0x2115cc(0x11b)](){const _0x41e07e=a94_0x2115cc;return PerformanceTester[_0x41e07e(0x1e3)](PerformanceAutEvents[_0x41e07e(0x193)],async()=>{const _0x16a916=_0x41e07e;await hubAllocator[_0x16a916(0x19f)](this['config']);})();}async[a94_0x2115cc(0x211)](){const _0x2d1355=a94_0x2115cc,_0x5322fb={'pgzcN':function(_0x4f10f3,_0x3ef906){return _0x4f10f3(_0x3ef906);},'GZFaf':_0x2d1355(0x199),'lmgMI':function(_0x248eff,_0x501544,_0x35f499,_0xf20c60,_0xf9c236,_0x73a2b6,_0x5af2d6){return _0x248eff(_0x501544,_0x35f499,_0xf20c60,_0xf9c236,_0x73a2b6,_0x5af2d6);},'JncRC':_0x2d1355(0x16a),'HqPGx':_0x2d1355(0x134),'NQIJH':function(_0x5abf21,_0x2a1e65){return _0x5abf21(_0x2a1e65);},'NmvJo':_0x2d1355(0x120),'LpqDR':'BrowserstackHealing.init','LeuYQ':function(_0x33fe9c,_0x2beea3){return _0x33fe9c===_0x2beea3;},'IwFPW':'true','NuuOM':function(_0x1a7a4d,_0x4fa160){return _0x1a7a4d===_0x4fa160;},'MEpif':function(_0x140aee,_0xfe3daa){return _0x140aee===_0xfe3daa;},'LoEnJ':_0x2d1355(0x1a0),'VzQok':'Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','wsjYh':'Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','AIxHZ':'Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','yKnLf':function(_0x35b9f4,_0x37865f){return _0x35b9f4>=_0x37865f;},'pLlKV':function(_0x1d5296,_0x5dee70){return _0x1d5296<_0x5dee70;},'qCZQm':_0x2d1355(0x11c),'nXPLI':_0x2d1355(0x15d),'qHYLA':function(_0x13dd87){return _0x13dd87();}},_0x5e289a=PerformanceTester['measureWrapper'](_0x5322fb[_0x2d1355(0x19c)],async()=>{const _0x3ef355=_0x2d1355;try{const _0x47d478=new Date(),_0x12d63d=helper[_0x3ef355(0x16b)](this['config']),_0x4af0c6=_0x5322fb['pgzcN'](require,path[_0x3ef355(0x142)](__dirname,_0x5322fb[_0x3ef355(0x127)])),_0x385668=_0x5322fb[_0x3ef355(0x1e0)](timeoutPromise,constants['TCG_AUTH_TIMEOUT'],_0x5322fb[_0x3ef355(0x213)],_0x5322fb[_0x3ef355(0x174)],_0x47d478,this[_0x3ef355(0x144)],this[_0x3ef355(0x157)]),_0x195293={'tcgUrl':constants[_0x3ef355(0x14c)],'sdkVersion':_0x5322fb['NQIJH'](require,_0x5322fb[_0x3ef355(0x201)])[_0x3ef355(0x209)],'methodUsed':_0x5322fb['LpqDR'],'proxyConfig':_0x12d63d,'os':os[_0x3ef355(0x203)]()};if(_0x12d63d&&_0x12d63d[_0x3ef355(0x216)]){utilities[_0x3ef355(0x12e)](constants[_0x3ef355(0x1bc)],_0x195293,this[_0x3ef355(0x144)],this[_0x3ef355(0x157)]);return;}const _0x2f35a9={};_0x2f35a9[_0x3ef355(0x1fa)]=_0x12d63d;const _0x3b45c8=await Promise[_0x3ef355(0x17e)]([_0x4af0c6[_0x3ef355(0x1da)](this['config']['accessKey'],this[_0x3ef355(0x144)][_0x3ef355(0x126)],constants[_0x3ef355(0x14c)],_0x5322fb[_0x3ef355(0x1c8)](require,_0x5322fb[_0x3ef355(0x201)])[_0x3ef355(0x209)],_0x2f35a9)[_0x3ef355(0x158)](_0xfe5f60=>{const _0xdf45e8=_0x3ef355;return _0x385668[_0xdf45e8(0x18b)](),_0xfe5f60;}),_0x385668]);_0x3b45c8[_0x3ef355(0x143)]=_0x5322fb['LeuYQ'](_0x3b45c8[_0x3ef355(0x143)],_0x5322fb[_0x3ef355(0x16d)])||_0x5322fb[_0x3ef355(0x185)](_0x3b45c8[_0x3ef355(0x143)],!![]);const _0xd32870=_0x5322fb['NuuOM'](this[_0x3ef355(0x144)][_0x3ef355(0x1ea)],!![])||_0x5322fb[_0x3ef355(0x205)](this[_0x3ef355(0x144)][_0x3ef355(0x1ea)],_0x5322fb[_0x3ef355(0x16d)]);if(_0x5322fb[_0x3ef355(0x205)](_0x3b45c8[_0x3ef355(0x18e)],constants[_0x3ef355(0x1a3)])&&_0xd32870)logger[_0x3ef355(0x1cb)](_0x5322fb[_0x3ef355(0x200)]);else{if(!_0x3b45c8[_0x3ef355(0x1b9)]&&_0x5322fb[_0x3ef355(0x1c1)](_0x3b45c8[_0x3ef355(0x1f4)],0x1f7)&&_0xd32870)logger[_0x3ef355(0x1cb)](_0x5322fb[_0x3ef355(0x1d5)]),utilities[_0x3ef355(0x12e)](constants['TCG_DOWN'],_0x195293,this[_0x3ef355(0x144)],this['framework']);else{if(!_0x3b45c8[_0x3ef355(0x1b9)]&&_0xd32870){logger[_0x3ef355(0x1cb)](_0x5322fb[_0x3ef355(0x1f1)]);const _0x5cb016={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x5322fb[_0x3ef355(0x1d4)](require,_0x5322fb[_0x3ef355(0x201)])[_0x3ef355(0x209)],'methodUsed':_0x5322fb[_0x3ef355(0x19a)],'proxyConfig':_0x12d63d,'os':os[_0x3ef355(0x203)]()};utilities[_0x3ef355(0x12e)](constants[_0x3ef355(0x1de)],_0x5cb016,this['config'],this[_0x3ef355(0x157)]);}else{if(_0x3b45c8['isAuthenticated']&&!_0x3b45c8[_0x3ef355(0x143)]&&_0xd32870)logger[_0x3ef355(0x1cb)](_0x5322fb[_0x3ef355(0x10b)]);else{if(_0x5322fb['yKnLf'](_0x3b45c8['status'],0xc8)&&_0x5322fb['pLlKV'](_0x3b45c8[_0x3ef355(0x1f4)],0x12c))utilities['fireFunnelTestEvent'](constants[_0x3ef355(0x1ff)],_0x195293,this[_0x3ef355(0x144)],this[_0x3ef355(0x157)]);else{if(_0x5322fb[_0x3ef355(0x1b4)](_0x3b45c8[_0x3ef355(0x1f4)],0x190))_0x195293['status']=_0x3b45c8[_0x3ef355(0x1f4)],utilities[_0x3ef355(0x12e)](constants['AI_INIT_FAILURE'],_0x195293,this[_0x3ef355(0x144)],this['framework']);else!_0x3b45c8[_0x3ef355(0x1f4)]&&utilities[_0x3ef355(0x12e)](constants['INVALID_INIT_RESP_WITH_USER_IMPACT'],_0x195293,this[_0x3ef355(0x144)],this[_0x3ef355(0x157)]);}}}}}if(_0x3b45c8[_0x3ef355(0x1b9)]&&_0x3b45c8[_0x3ef355(0x143)]){const _0x25aeb6={};_0x25aeb6['tcgAuthConfig']=_0x3b45c8;const _0xcc98db=_0x25aeb6;_0x12d63d&&(_0xcc98db[_0x3ef355(0x1b8)]=_0x12d63d),_0xcc98db['framework']=this[_0x3ef355(0x157)],_0xcc98db['bstackConfig']=this[_0x3ef355(0x144)],helper[_0x3ef355(0x1e6)](_0xcc98db),logger[_0x3ef355(0x124)](_0x5322fb[_0x3ef355(0x15f)]);}}catch(_0x47e485){logger[_0x3ef355(0x124)]('Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20'+(_0x47e485[_0x3ef355(0x18e)]?_0x47e485[_0x3ef355(0x18e)]:''));}});await _0x5322fb[_0x2d1355(0x13c)](_0x5e289a);}[a94_0x2115cc(0x14f)](){const _0x5a5c29=a94_0x2115cc,_0x5a7310={'wJKGb':function(_0x2f749b,_0x3804c2){return _0x2f749b(_0x3804c2);},'HZClQ':'./setKeepAlive'};_0x5a7310['wJKGb'](require,_0x5a7310[_0x5a5c29(0x141)])();}['handleExceptions'](){const _0x436616=a94_0x2115cc,_0x1ba333={};_0x1ba333[_0x436616(0x15c)]='4|0|1|2|3',_0x1ba333[_0x436616(0x17f)]=_0x436616(0x152),_0x1ba333[_0x436616(0x16c)]='uncaughtException';const _0xa172aa=_0x1ba333,_0x4f08c4=_0x36cf46=>{const _0x2ad49d=_0x436616,_0x26eba1=_0xa172aa[_0x2ad49d(0x15c)]['split']('|');let _0x2c2a1d=0x0;while(!![]){switch(_0x26eba1[_0x2c2a1d++]){case'0':logger[_0x2ad49d(0x124)](util[_0x2ad49d(0x1ee)](_0x36cf46));continue;case'1':this['unhandledErrors'][_0x2ad49d(0x129)](util['format']('%j',_0x36cf46));continue;case'2':PerformanceTester[_0x2ad49d(0x165)](_0x36cf46);continue;case'3':ClientTroubleShootingService[_0x2ad49d(0x1fe)]();continue;case'4':logger[_0x2ad49d(0x1af)](_0x36cf46[_0x2ad49d(0x18e)]);continue;}break;}};process['on'](_0xa172aa[_0x436616(0x17f)],_0x4f08c4),process['on'](_0xa172aa[_0x436616(0x16c)],_0x4f08c4);}async['intExitHandler'](_0x256b0a){const _0x11a7fe=a94_0x2115cc,_0x509d48={};_0x509d48[_0x11a7fe(0x148)]='7|1|2|3|4|5|6|0',_0x509d48[_0x11a7fe(0x112)]=function(_0x2223dd,_0x4e36e6){return _0x2223dd+_0x4e36e6;},_0x509d48['yGuSK']='handled',_0x509d48[_0x11a7fe(0x1e4)]=_0x11a7fe(0x14a);const _0x31aa3e=_0x509d48,_0x26c46c=_0x31aa3e[_0x11a7fe(0x148)][_0x11a7fe(0x166)]('|');let _0x2ab9f3=0x0;while(!![]){switch(_0x26c46c[_0x2ab9f3++]){case'0':await BrowserstackCLI[_0x11a7fe(0x1cf)]()[_0x11a7fe(0x1f8)]();continue;case'1':this[_0x31aa3e[_0x11a7fe(0x112)](_0x31aa3e[_0x11a7fe(0x1a8)],_0x256b0a)]=!![];continue;case'2':logger['info'](_0x31aa3e[_0x11a7fe(0x112)](_0x31aa3e[_0x11a7fe(0x1e4)],_0x256b0a));continue;case'3':this[_0x11a7fe(0x1ba)]=_0x256b0a;continue;case'4':await ClientTroubleShootingService['reportProcessInterruptionSituation'](_0x256b0a);continue;case'5':await TestHubHandler['stop'](_0x256b0a);continue;case'6':await ClientTroubleShootingService['reportFinalDetectionState']();continue;case'7':if(this[_0x31aa3e[_0x11a7fe(0x112)](_0x31aa3e['yGuSK'],_0x256b0a)])return;continue;}break;}}[a94_0x2115cc(0x218)](){const _0x5bb2ac=a94_0x2115cc,_0x5902fb={'LntGl':function(_0x49cb0c,_0x2f9b29){return _0x49cb0c===_0x2f9b29;},'eOgJj':_0x5bb2ac(0x119),'cPhkK':function(_0x476259,_0x32648a){return _0x476259>_0x32648a;},'eiFio':function(_0x44f33e,_0x4d5700){return _0x44f33e(_0x4d5700);},'UPIqF':function(_0x592f1d){return _0x592f1d();},'yeyQI':_0x5bb2ac(0x1e8)};let _0x5bda89=0x0;return async()=>{const _0x5433ee=_0x5bb2ac;_0x5bda89++;if(_0x5902fb['LntGl'](_0x5bda89,0x1)){helper[_0x5433ee(0x1ae)](this[_0x5433ee(0x157)])&&await this[_0x5433ee(0x132)]();try{logger['debug'](_0x5902fb[_0x5433ee(0x20b)]),await TestHubHandler['stop'](_0x5bda89),await ClientTroubleShootingService['reportFinalDetectionState'](),await BrowserstackCLI[_0x5433ee(0x1cf)]()[_0x5433ee(0x1f8)]('1');}catch(_0x3ac127){logger[_0x5433ee(0x124)](_0x5433ee(0x1b0)+util[_0x5433ee(0x1ee)](_0x3ac127));}PerformanceTester[_0x5433ee(0x162)](PerformanceEvents[_0x5433ee(0x170)]);if(PerformanceTester['isEnabled']()){const {measures:_0x23811b,errors:_0x39d788}=await PerformanceTester[_0x5433ee(0x1b7)](),_0x45d7a9={};if(_0x23811b&&_0x5902fb[_0x5433ee(0x1c7)](_0x23811b[_0x5433ee(0x10f)],0x0)||_0x39d788&&_0x5902fb[_0x5433ee(0x1c7)](_0x39d788['length'],0x0)){const _0x401732={};_0x401732['measures']=_0x23811b,_0x401732[_0x5433ee(0x12d)]=_0x39d788,Object[_0x5433ee(0x176)](_0x45d7a9,_0x401732);}try{const _0xaa41fc=await helper['sendToEDS'](_0x45d7a9,this[_0x5433ee(0x144)]);logger[_0x5433ee(0x124)](_0x5433ee(0x10a)+_0x5902fb[_0x5433ee(0x1fb)](getEdsInstrumentationAPIUrl,'')+_0x5433ee(0x186)+_0xaa41fc[_0x5433ee(0x1e5)]);}catch(_0x4fa4e0){logger[_0x5433ee(0x124)](_0x5433ee(0x11d)+_0x5902fb['eiFio'](getEdsInstrumentationAPIUrl,'')+_0x5433ee(0x1a5)+util[_0x5433ee(0x1ee)](_0x4fa4e0));}try{fs[_0x5433ee(0x18d)](path[_0x5433ee(0x142)](_0x5902fb[_0x5433ee(0x1fd)](getLogDir),_0x5902fb[_0x5433ee(0x121)]),JSON[_0x5433ee(0x13e)](_0x45d7a9));}catch(_0x258906){logger[_0x5433ee(0x124)](_0x5433ee(0x192)+_0x258906);}}}logger&&logger[_0x5433ee(0x182)](),fileLogger&&fileLogger[_0x5433ee(0x182)]();};}}exports[a94_0x2115cc(0x1f3)]=BrowserStackSetup;