const a83_0x1cc6a6=a83_0x2a5f;(function(_0x572a62,_0xebe562){const _0x1ef10e=a83_0x2a5f,_0x1880c8=_0x572a62();while(!![]){try{const _0x5b2611=parseInt(_0x1ef10e(0x147))/0x1*(-parseInt(_0x1ef10e(0x17d))/0x2)+-parseInt(_0x1ef10e(0x1d1))/0x3*(parseInt(_0x1ef10e(0x11d))/0x4)+parseInt(_0x1ef10e(0x18e))/0x5*(-parseInt(_0x1ef10e(0x1ec))/0x6)+-parseInt(_0x1ef10e(0x139))/0x7+-parseInt(_0x1ef10e(0x127))/0x8*(parseInt(_0x1ef10e(0x14e))/0x9)+-parseInt(_0x1ef10e(0x1c4))/0xa*(-parseInt(_0x1ef10e(0x1ba))/0xb)+-parseInt(_0x1ef10e(0x158))/0xc*(-parseInt(_0x1ef10e(0x1f5))/0xd);if(_0x5b2611===_0xebe562)break;else _0x1880c8['push'](_0x1880c8['shift']());}catch(_0x9e0248){_0x1880c8['push'](_0x1880c8['shift']());}}}(a83_0x4e1d,0x935c8));const util=require('util'),os=require('os'),path=require(a83_0x1cc6a6(0x113)),{v4:uuidv4}=require('uuid'),fs=require('fs'),constants=require(a83_0x1cc6a6(0x182)),logger=require(a83_0x1cc6a6(0x1e3))[a83_0x1cc6a6(0x134)],fileLogger=require(a83_0x1cc6a6(0x1e3))[a83_0x1cc6a6(0x112)],{getLogDir}=require(a83_0x1cc6a6(0x1e3)),helper=require(a83_0x1cc6a6(0x163)),utilities=require('./utilities'),percyHelper=require(a83_0x1cc6a6(0x153)),hubAllocator=require('../hubAllocationMethods'),PerformanceTester=require('./performance/performance-tester'),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a83_0x1cc6a6(0x12a)),{setPercyFlag}=require(a83_0x1cc6a6(0x1e4)),TestHubHandler=require(a83_0x1cc6a6(0x149)),timeoutPromise=require(a83_0x1cc6a6(0x1ca)),BrowserstackCLI=require(a83_0x1cc6a6(0x19e));function a83_0x4e1d(){const _0x3e19dd=['proxyUrl','SIGINT','turboScale','SqdsN','proxyConfig','isUndefined','setupPercy','stopLocalBinary','localOptions','errorMessage','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','AUTOLOGCAPTURE_NOTIFICATION','end','stopBrowserstackLocal','JWLue','userName','forceLocal','toString','Data\x20sent\x20successfully\x20to\x20','selfHeal','exitHandler','custom-repeater','framework','TCG_AUTH_TIMEOUT','gBZHe','accessKey','XMieD','HpUju','playwrightUrl','Percy\x20started\x20successfully','fileLogger','path','exceptions','qCsqc','GPRjd','../ai-sdk-node/bundle','race','stringify','message','skipSessionName','SDK\x20run\x20started\x20with\x20id:\x20','8uckZfs','4.5.0','TCG_DOWN','RauQi','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','icOTb','HUB_MANAGEMENT','WqlGz','userName\x20or\x20accessKey\x20is\x20not\x20defined','playwright','701192XfcIny','CYwBO','preInitialize','./performance/constants','bind','LcUAu','turboScaleUrl','checkStopLocalBinaryOnExit','ayXrv','Failed\x20to\x20send\x20data\x20to\x20','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','tTsiv','VxMeA','winstonLogger','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','pyzNi','qXlpf','true','5757990KavAXr','ZLxCC','aYnKM','setupBrowserstackLocal','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','intExitHandler','IGenv','status','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','stllq','generateLocalIdentifier','setupKeepAlive','isEnabled','COCvQ','1wjyvtm','skipBinaryInitialisation','./testhub/testhubHandler','setUpHubUrl','localIdentifier','killSignal','BrowserstackHealing.init\x20method\x20timed\x20out','9wvuqsk','?caps=','setLogDir','setBrowserstackInfraFromConfig','XLUqj','./percy/utils','version','getFinalCaps','tcgAuthConfig','0|7|2|5|3|1|4|6','36SCGXWC','initialize','hyzCg','getTurboScaleGridDetails','browserStackLocalOptions','turboScaleOptions','Error\x20in\x20sending\x20testhub\x20stop:\x20','bstackConfig','BzhTh','assign','getHubUrl','./helper','LjxWN','format','SnImC','percy','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','getInstance','DFZyh','cliConfig','iXLoJ','writeFileSync','BJcNh','CESeM','cUFUQ','getUserName','BROWSERSTACK_TURBOSCALE','zwBMc','fxisZ','xcWTM','proxy','fKdmS','QSmsB','SIGBREAK','isHealingEnabled','DCbOJ','init','2223068orJcoq','length','stop','Calling\x20Build\x20Stop\x20from\x20ExitHandler','split','../bin/utils/constants','IkgaO','hfihd','getAccessKey','BEvlR','isAuthenticated','BROWSERSTACK_PERCY','close','handleExceptions','allocateHub','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','QbsQE','2335965oWuSUO','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','EDS_URL','AGLnJ','browserstackLocal','CPhGB','config','UPGRADE_REQUIRED','sendToEDS','getProxyConfigForTcg','Local\x20binary\x20started\x20successfully','default','platform','customRepeaters','handled','ZWEkH','../bin/v2/browserstackCLI','skipSessionStatus','codeceptjs','startLocalBinary','isRunning','SIGQUIT','RgLht','zEXFu','Yhfyu','\x20with\x20error\x20','cancel','TRHxj','SIGHUP','Shutdown\x20triggered\x20by\x20','getLocalIdentifier','./setKeepAlive','DntqN','fNkSe','ats-repeater','compareVersions','readConfig','false','wOflK','SDKTestAttempted','jCqhJ','captureError','nghTI','testContextOptions','8502483RyTsRm','aCdPF','error','hubUrl','then','parallelsPerPlatform','hlyBn','unhandledErrors','roaqk','phDzE','10LbQxdA','isTrialGrid','platforms','cmebm','setCLICaps','Error\x20occured\x20while\x20stopping\x20percy','./timeoutPromise','isTurboScaleSession','wvRCF','SDK_CLEANUP','No\x20config\x20provided.','selenium-webdriver','BrowserstackHealingInitFailed','80046ojhfXr','setupTCGAuth','isBrowserstackInfra','startMonitoring','measures','JwiCA','setCredentialsFromYmlConfig','uvQjA','Error\x20occured\x20while\x20stopping\x20local\x20binary','yIXKC','getCentralUser','TCG_URL','Local\x20binary\x20stopped','useW3C','FWGLe','isTrue','join','ikRBz','./logger','./testhub/utils','disableAutoCaptureLogs','AI_PROXY_FAILURE','toLowerCase','sdkRunId','TCG_AUTH_FAILURE','SIGTERM','beforeExit','6UStaYl','qvEmX','NiMGd','env','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','6|20|2|7|18|21|10|1|17|15|4|12|8|19|5|13|14|11|0|9|16|3','aiHeal:tcgAuth','Error\x20in\x20percy\x20setup\x20','debug','10282779KuCuUV','fireFunnelTestEvent','EqIOG','envConfig','stopPercy','info','FRAMEWORK'];a83_0x4e1d=function(){return _0x3e19dd;};return a83_0x4e1d();}function a83_0x2a5f(_0x4d220e,_0x25c13b){const _0x4e1d76=a83_0x4e1d();return a83_0x2a5f=function(_0x2a5fbb,_0x47de27){_0x2a5fbb=_0x2a5fbb-0xf1;let _0x39e70e=_0x4e1d76[_0x2a5fbb];return _0x39e70e;},a83_0x2a5f(_0x4d220e,_0x25c13b);}class BrowserStackSetup{constructor(_0x4e42b8,_0x181da8){const _0x5ca8d8=a83_0x1cc6a6,_0x4b42ba={'uvQjA':_0x5ca8d8(0x1f1),'wvRCF':_0x5ca8d8(0x1ce),'xFVjG':function(_0x438ca9){return _0x438ca9();}},_0x2518e7=_0x4b42ba[_0x5ca8d8(0x1d8)][_0x5ca8d8(0x181)]('|');let _0x1d0218=0x0;while(!![]){switch(_0x2518e7[_0x1d0218++]){case'0':helper[_0x5ca8d8(0x155)](this[_0x5ca8d8(0x194)],this[_0x5ca8d8(0x16b)],this['envConfig']);continue;case'1':this['config'][_0x5ca8d8(0x1b9)]=this[_0x5ca8d8(0x194)][_0x5ca8d8(0x1b9)]||{};continue;case'2':this[_0x5ca8d8(0x192)]=null;continue;case'3':PerformanceTester[_0x5ca8d8(0x1d4)]();continue;case'4':this[_0x5ca8d8(0x10a)]=_0x181da8;continue;case'5':helper[_0x5ca8d8(0x151)](this[_0x5ca8d8(0x194)],this['cliConfig']);continue;case'6':this[_0x5ca8d8(0x1c1)]=[];continue;case'7':this[_0x5ca8d8(0x167)]=null;continue;case'8':if(helper[_0x5ca8d8(0xf9)](this[_0x5ca8d8(0x194)]))throw new Error(_0x4b42ba[_0x5ca8d8(0x1cc)]);continue;case'9':helper[_0x5ca8d8(0x150)](this[_0x5ca8d8(0x194)]);continue;case'10':this[_0x5ca8d8(0x194)][_0x5ca8d8(0x1c6)]=this[_0x5ca8d8(0x194)][_0x5ca8d8(0x1c6)]||[];continue;case'11':this[_0x5ca8d8(0x194)]['testContextOptions']['skipSessionName']=!helper[_0x5ca8d8(0x1d3)]()||helper[_0x5ca8d8(0x1e0)](this[_0x5ca8d8(0x194)][_0x5ca8d8(0x1b9)][_0x5ca8d8(0x11b)]);continue;case'12':global[_0x5ca8d8(0x10a)]=_0x181da8;continue;case'13':helper[_0x5ca8d8(0x1d7)](this[_0x5ca8d8(0x194)]);continue;case'14':this['config'][_0x5ca8d8(0x1b9)]['skipSessionStatus']=!helper[_0x5ca8d8(0x1d3)]()||helper[_0x5ca8d8(0x1e0)](this[_0x5ca8d8(0x194)][_0x5ca8d8(0x1b9)][_0x5ca8d8(0x19f)]);continue;case'15':this[_0x5ca8d8(0x1e8)]=_0x4b42ba['xFVjG'](uuidv4);continue;case'16':helper['setLogLevel'](this['config'],this[_0x5ca8d8(0x16b)],this[_0x5ca8d8(0x1f8)]);continue;case'17':this[_0x5ca8d8(0xfd)]={};continue;case'18':this[_0x5ca8d8(0x194)]=helper[_0x5ca8d8(0x1b2)](helper['getConfigPath'](_0x4e42b8));continue;case'19':if(this[_0x5ca8d8(0x194)][_0x5ca8d8(0x1bc)])throw new Error(this[_0x5ca8d8(0x194)][_0x5ca8d8(0x1bc)]);continue;case'20':this[_0x5ca8d8(0x1f8)]=helper['setEnvCaps']();continue;case'21':this[_0x5ca8d8(0x16b)]=helper[_0x5ca8d8(0x1c8)](_0x4e42b8);continue;}break;}}[a83_0x1cc6a6(0x129)](_0x485607){const _0x483838=a83_0x1cc6a6,_0x23a188={'HbpYQ':_0x483838(0x125),'hrrhZ':function(_0x34abb9,_0x390f4e){return _0x34abb9===_0x390f4e;},'aYnKM':function(_0x4a52d4,_0x2a9f78){return _0x4a52d4===_0x2a9f78;},'cwWiD':'integrations','DFZyh':_0x483838(0x1b5),'LcUAu':function(_0x38a3bc,_0x36be6b){return _0x38a3bc<_0x36be6b;},'TRHxj':function(_0x64253a,_0x5ab9e5){return _0x64253a(_0x5ab9e5);},'CYwBO':_0x483838(0x1cf),'HpUju':_0x483838(0x11e),'wOflK':_0x483838(0x131),'fNkSe':_0x483838(0x1f0),'stllq':_0x483838(0x1ea),'hcazw':_0x483838(0xf5),'XLUqj':_0x483838(0x1aa),'fKdmS':function(_0x3d04cf,_0x264276){return _0x3d04cf!==_0x264276;},'ZLxCC':'win32','yIXKC':'SIGABRT','iXLoJ':_0x483838(0x1a3),'AGLnJ':_0x483838(0x179),'hfihd':'beforeExit'},_0x5c2065=this[_0x483838(0x10a)];global[_0x483838(0x194)]=this[_0x483838(0x194)],helper['sanitizeCaps'](this[_0x483838(0x194)]),this[_0x483838(0x14c)]=null,global[_0x483838(0x1e8)]=this[_0x483838(0x1e8)],logger[_0x483838(0xf2)](_0x483838(0x11c)+this[_0x483838(0x1e8)]),!this[_0x483838(0x194)][_0x483838(0x15c)]&&(this[_0x483838(0x194)][_0x483838(0x15c)]=this[_0x483838(0x194)][_0x483838(0xfc)]||{});if(helper[_0x483838(0xf9)](helper[_0x483838(0x171)](this[_0x483838(0x194)]))||helper[_0x483838(0xf9)](helper[_0x483838(0x185)](this[_0x483838(0x194)])))throw new Error(_0x23a188['HbpYQ']);helper['getLocalConfig'](this[_0x483838(0x194)])&&helper['isUndefined'](helper[_0x483838(0x1ac)](this['config']))&&(!helper[_0x483838(0xf9)](this[_0x483838(0x194)][_0x483838(0x15c)])&&_0x23a188['hrrhZ'](this[_0x483838(0x194)][_0x483838(0x15c)]['constructor'],Object)?!helper[_0x483838(0x1e0)](this[_0x483838(0x194)][_0x483838(0x15c)][_0x483838(0x148)])&&(this[_0x483838(0x194)][_0x483838(0x15c)]['localIdentifier']=helper[_0x483838(0x143)]()):this[_0x483838(0x194)][_0x483838(0x15c)]={'localIdentifier':helper[_0x483838(0x143)]()});this[_0x483838(0x194)][_0x483838(0x15c)]['skipBinaryInitialisation']=helper[_0x483838(0x1e0)](this[_0x483838(0x194)][_0x483838(0x15c)]['skipBinaryInitialisation']),helper['setHandlePWError'](this[_0x483838(0x194)]);if(_0x23a188[_0x483838(0x13b)](_0x5c2065,_0x23a188['cwWiD']))return;this[_0x483838(0x18a)]();process['env']['BROWSERSTACK_TURBOSCALE']&&(this[_0x483838(0x194)][_0x483838(0xf6)]=helper[_0x483838(0x1e0)](process[_0x483838(0x1ef)][_0x483838(0x172)]),this[_0x483838(0x194)][_0x483838(0x15d)]=this[_0x483838(0x194)][_0x483838(0x15d)]||{});helper[_0x483838(0x1cb)](this[_0x483838(0x194)])&&(process[_0x483838(0x1ef)][_0x483838(0x172)]=!![]);if(!helper[_0x483838(0x1d3)]()){try{process['env'][_0x483838(0xf3)]=_0x5c2065,utilities[_0x483838(0x1f6)](_0x23a188[_0x483838(0x16a)],{},this[_0x483838(0x194)],this['framework']);}catch(_0xf2401b){logger[_0x483838(0x1f4)](_0x483838(0x13d)+_0xf2401b);}return;}helper['requireSeleniumWebdriverCheck'](_0x5c2065)&&(_0x23a188[_0x483838(0x12c)](_0x23a188[_0x483838(0x1a9)](parseInt,helper['getPackageVersion'](_0x23a188[_0x483838(0x128)])),0x3)&&(this[_0x483838(0x194)][_0x483838(0x1de)]=![]),_0x23a188[_0x483838(0x13b)](helper[_0x483838(0x1b1)](helper['getPackageVersion'](_0x23a188[_0x483838(0x128)]),_0x23a188[_0x483838(0x10f)]),0x1)&&(this[_0x483838(0x194)]['useW3C']=!![]));(helper[_0x483838(0xf9)](this['config']['platforms'])||helper[_0x483838(0xf9)](this[_0x483838(0x194)]['platforms'][_0x483838(0x17e)]))&&(helper[_0x483838(0xf9)](this[_0x483838(0x194)][_0x483838(0x1bf)])?logger[_0x483838(0xf2)](_0x23a188[_0x483838(0x1b4)]):logger['warn'](_0x23a188[_0x483838(0x1af)]),this[_0x483838(0x194)][_0x483838(0x1c6)]=[]);!this[_0x483838(0x194)]['testContextOptions']&&(this[_0x483838(0x194)][_0x483838(0x1b9)]={});try{process[_0x483838(0x1ef)]['FRAMEWORK']=_0x485607['_'][0x0],utilities[_0x483838(0x1f6)](_0x23a188[_0x483838(0x16a)],{},this['config'],this['framework']);}catch(_0x2878e2){logger['debug'](_0x483838(0x13d)+_0x2878e2);}!this['config'][_0x483838(0x1e5)]&&logger[_0x483838(0xf2)](constants[_0x483838(0xff)]),this[_0x483838(0x13e)]=this[_0x483838(0x13e)][_0x483838(0x12b)](this),process['on'](_0x23a188[_0x483838(0x142)],this['intExitHandler']),process['on'](_0x23a188['hcazw'],this['intExitHandler']),process['on'](_0x23a188[_0x483838(0x152)],this[_0x483838(0x13e)]),_0x23a188[_0x483838(0x177)](process[_0x483838(0x19a)],_0x23a188[_0x483838(0x13a)])?(process['on'](_0x23a188[_0x483838(0x1da)],this[_0x483838(0x13e)]),process['on'](_0x23a188[_0x483838(0x16c)],this[_0x483838(0x13e)])):process['on'](_0x23a188[_0x483838(0x191)],this[_0x483838(0x13e)]),process['on'](_0x23a188[_0x483838(0x184)],this['exitHandler']());}async[a83_0x1cc6a6(0x159)](_0x6bba8e){const _0x83bb39=a83_0x1cc6a6,_0x146250={'NiMGd':_0x83bb39(0x1b0),'pyzNi':_0x83bb39(0x109),'IkgaO':_0x83bb39(0x138),'zEXFu':function(_0x26bb5e,_0x5a7f78){return _0x26bb5e===_0x5a7f78;},'GPRjd':_0x83bb39(0x126),'BzhTh':function(_0x29aef6,_0x2be413){return _0x29aef6+_0x2be413;},'jCqhJ':_0x83bb39(0x14f),'DYOhn':function(_0x23d914,_0x355f87){return _0x23d914(_0x355f87);},'hlyBn':_0x83bb39(0x1a0)};this[_0x83bb39(0x129)](_0x6bba8e);if(helper['isTurboScaleSession'](this[_0x83bb39(0x194)])){const _0x457e55=await helper[_0x83bb39(0x15b)](this[_0x83bb39(0x194)]);this[_0x83bb39(0x194)]['turboScaleGridDetails']=_0x457e55,_0x457e55[_0x83bb39(0x1c5)]&&helper['isNotUndefined'](this[_0x83bb39(0x194)]['browserstackLocal'])&&helper['isTrue'](this[_0x83bb39(0x194)]['browserstackLocal'])&&(this['config'][_0x83bb39(0x15c)][_0x83bb39(0x14b)]=_0x146250[_0x83bb39(0x1ee)],this['config'][_0x83bb39(0x15c)][_0x146250[_0x83bb39(0x136)]]=_0x457e55[_0x83bb39(0x19b)][_0x83bb39(0x1e1)](','),this[_0x83bb39(0x194)][_0x83bb39(0x15c)][_0x83bb39(0x104)]=_0x146250[_0x83bb39(0x183)]),this[_0x83bb39(0x194)][_0x83bb39(0x12d)]=_0x457e55['url'],this[_0x83bb39(0x10a)]&&_0x146250[_0x83bb39(0x1a5)](this[_0x83bb39(0x10a)][_0x83bb39(0x1e7)](),_0x146250['GPRjd'])?this['config'][_0x83bb39(0x12d)]=_0x146250[_0x83bb39(0x160)](_0x457e55[_0x83bb39(0x110)],_0x146250[_0x83bb39(0x1b6)]):constants[_0x83bb39(0x1bd)]=helper[_0x83bb39(0x162)](this['config']),logger[_0x83bb39(0x1f4)](_0x83bb39(0x18c)+constants[_0x83bb39(0x1bd)]);}helper['setProxySettings'](this[_0x83bb39(0x194)]),this['setupKeepAlive'](),_0x146250['DYOhn'](setPercyFlag,this),await this[_0x83bb39(0x13c)](),![_0x146250[_0x83bb39(0x1c0)],_0x146250[_0x83bb39(0x116)]]['includes'](this[_0x83bb39(0x10a)])&&!helper[_0x83bb39(0x1cb)](this[_0x83bb39(0x194)])&&!helper[_0x83bb39(0x1db)]()['central_scanner']&&await this[_0x83bb39(0x14a)]();}async[a83_0x1cc6a6(0xfa)](){const _0x3a9640=a83_0x1cc6a6,_0x2cd867={};_0x2cd867['IGenv']=function(_0x5309cd,_0x5122dc){return _0x5309cd===_0x5122dc;},_0x2cd867[_0x3a9640(0x1c3)]=_0x3a9640(0x1b3),_0x2cd867[_0x3a9640(0x12f)]=_0x3a9640(0x121),_0x2cd867[_0x3a9640(0x124)]=_0x3a9640(0x111),_0x2cd867[_0x3a9640(0x178)]=_0x3a9640(0x138),_0x2cd867['qvEmX']=_0x3a9640(0x1eb);const _0x580503=_0x2cd867;if(helper['isTrue'](this[_0x3a9640(0x194)]['percy'])&&(!this[_0x3a9640(0x167)]||!this['percy'][_0x3a9640(0x1a2)]()))try{this[_0x3a9640(0x167)]=await percyHelper['startPercy'](this[_0x3a9640(0x194)]);if(!this[_0x3a9640(0x167)]){process[_0x3a9640(0x1ef)][_0x3a9640(0x188)]=_0x580503['phDzE'];throw new Error(_0x580503['ayXrv']);}logger[_0x3a9640(0xf2)](_0x580503[_0x3a9640(0x124)]),process[_0x3a9640(0x1ef)][_0x3a9640(0x188)]=_0x580503['QSmsB'];let _0x272a10=0x0;const _0x57a509=async()=>{const _0x5653c5=_0x3a9640;_0x272a10++,_0x580503[_0x5653c5(0x13f)](_0x272a10,0x1)&&await this[_0x5653c5(0xf1)]();};process['on'](_0x580503[_0x3a9640(0x1ed)],_0x57a509);}catch(_0x4ab51c){process[_0x3a9640(0x1ef)][_0x3a9640(0x188)]=_0x580503['phDzE'],logger[_0x3a9640(0x1f4)](_0x3a9640(0x1f3)+_0x4ab51c);throw new Error(_0x4ab51c[_0x3a9640(0x105)]());}}async[a83_0x1cc6a6(0xf1)](){const _0x3a7d19=a83_0x1cc6a6,_0x53aad3={};_0x53aad3[_0x3a7d19(0x137)]='Percy\x20stopped',_0x53aad3[_0x3a7d19(0x193)]=_0x3a7d19(0x1c9);const _0x3b4123=_0x53aad3;if(this[_0x3a7d19(0x167)]&&this[_0x3a7d19(0x167)][_0x3a7d19(0x1a2)]())try{await percyHelper['stopPercy'](this[_0x3a7d19(0x167)]),logger[_0x3a7d19(0xf2)](_0x3b4123['qXlpf']);}catch(_0x2e0de2){logger[_0x3a7d19(0x1bc)](_0x3b4123[_0x3a7d19(0x193)],_0x2e0de2[_0x3a7d19(0x11a)]);}}async[a83_0x1cc6a6(0x13c)](){const _0x442cf3=a83_0x1cc6a6,_0x521d0a={};_0x521d0a[_0x442cf3(0x10e)]=_0x442cf3(0x141),_0x521d0a[_0x442cf3(0x1e2)]=_0x442cf3(0x198);const _0x1f4843=_0x521d0a;if(helper['isBrowserstackInfra']()&&helper[_0x442cf3(0x1e0)](this['config']['browserstackLocal'])&&(!this[_0x442cf3(0x192)]||!this['browserstackLocal'][_0x442cf3(0x1a2)]()))try{if(this['config']['browserStackLocalOptions'][_0x442cf3(0x148)]){logger[_0x442cf3(0x1f4)](_0x1f4843[_0x442cf3(0x10e)]);return;}this[_0x442cf3(0x192)]=await helper[_0x442cf3(0x1a1)](this[_0x442cf3(0x194)]),logger['info'](_0x1f4843['ikRBz']);}catch(_0x54b48c){logger[_0x442cf3(0x1f4)](_0x54b48c);throw new Error(_0x54b48c['toString']());}}async[a83_0x1cc6a6(0x101)](){const _0x25c8e8=a83_0x1cc6a6,_0x41baee={};_0x41baee[_0x25c8e8(0x115)]=_0x25c8e8(0x1dd),_0x41baee['nczge']=_0x25c8e8(0x1d9);const _0x4ee78e=_0x41baee;if(this[_0x25c8e8(0x192)]&&this[_0x25c8e8(0x192)][_0x25c8e8(0x1a2)]())try{await helper[_0x25c8e8(0xfb)](this[_0x25c8e8(0x192)]),logger[_0x25c8e8(0xf2)](_0x4ee78e[_0x25c8e8(0x115)]);}catch(_0x3d8854){logger['error'](_0x4ee78e['nczge'],_0x3d8854[_0x25c8e8(0x11a)]);}}async[a83_0x1cc6a6(0x14a)](){const _0x1acd69=a83_0x1cc6a6;return PerformanceTester['measureWrapper'](PerformanceAutEvents[_0x1acd69(0x123)],async()=>{const _0x2e37cb=_0x1acd69;await hubAllocator[_0x2e37cb(0x18b)](this[_0x2e37cb(0x194)]);})();}async[a83_0x1cc6a6(0x1d2)](){const _0xd601fd=a83_0x1cc6a6,_0x878684={'DCbOJ':function(_0x47e5d5,_0x1b30c9){return _0x47e5d5(_0x1b30c9);},'zwBMc':_0xd601fd(0x117),'JWLue':function(_0x20279d,_0x543017,_0x3aa5cb,_0x313500,_0x13c995,_0x2ea6a8,_0x231211){return _0x20279d(_0x543017,_0x3aa5cb,_0x313500,_0x13c995,_0x2ea6a8,_0x231211);},'ZWEkH':_0xd601fd(0x14d),'DntqN':_0xd601fd(0x1d0),'LjxWN':'../../package.json','aCdPF':'BrowserstackHealing.init','cUFUQ':function(_0x480f57,_0xe5a4d6){return _0x480f57===_0xe5a4d6;},'roaqk':_0xd601fd(0x138),'fxisZ':function(_0x3f6d3f,_0x1ccf47){return _0x3f6d3f===_0x1ccf47;},'ivPNA':_0xd601fd(0xfe),'QbsQE':function(_0x2602d7,_0x228641){return _0x2602d7===_0x228641;},'POMMd':_0xd601fd(0x168),'gBZHe':_0xd601fd(0x135),'Yhfyu':_0xd601fd(0x18f),'SqdsN':function(_0x2f6157,_0x1f21aa){return _0x2f6157>=_0x1f21aa;},'FWGLe':function(_0x4c3ca7,_0x32c884){return _0x4c3ca7<_0x32c884;},'SnImC':'tcg\x20config\x20setup\x20successful.','icOTb':_0xd601fd(0x1f2),'COCvQ':function(_0x48ab5b){return _0x48ab5b();}},_0x3b452e=PerformanceTester['measureWrapper'](_0x878684[_0xd601fd(0x122)],async()=>{const _0x1a3818=_0xd601fd;try{const _0x1a3a7b=new Date(),_0x2f39fc=helper[_0x1a3818(0x197)](this[_0x1a3818(0x194)]),_0x35b8a0=_0x878684[_0x1a3818(0x17b)](require,path[_0x1a3818(0x1e1)](__dirname,_0x878684[_0x1a3818(0x173)])),_0x31bd9a=_0x878684[_0x1a3818(0x102)](timeoutPromise,constants[_0x1a3818(0x10b)],_0x878684[_0x1a3818(0x19d)],_0x878684[_0x1a3818(0x1ae)],_0x1a3a7b,this[_0x1a3818(0x194)],this[_0x1a3818(0x10a)]),_0x362b81={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x878684[_0x1a3818(0x17b)](require,_0x878684[_0x1a3818(0x164)])['version'],'methodUsed':_0x878684['aCdPF'],'proxyConfig':_0x2f39fc,'os':os[_0x1a3818(0x19a)]()};if(_0x2f39fc&&_0x2f39fc[_0x1a3818(0xf4)]){utilities['fireFunnelTestEvent'](constants[_0x1a3818(0x1e6)],_0x362b81,this[_0x1a3818(0x194)],this[_0x1a3818(0x10a)]);return;}const _0x19ee6a={};_0x19ee6a[_0x1a3818(0x176)]=_0x2f39fc;const _0xe8a820=await Promise[_0x1a3818(0x118)]([_0x35b8a0[_0x1a3818(0x17c)](this[_0x1a3818(0x194)][_0x1a3818(0x10d)],this['config'][_0x1a3818(0x103)],constants['TCG_URL'],_0x878684[_0x1a3818(0x17b)](require,_0x878684['LjxWN'])[_0x1a3818(0x154)],_0x19ee6a)[_0x1a3818(0x1be)](_0x66edb0=>{const _0x38a4cb=_0x1a3818;return _0x31bd9a[_0x38a4cb(0x1a8)](),_0x66edb0;}),_0x31bd9a]);_0xe8a820[_0x1a3818(0x17a)]=_0x878684['cUFUQ'](_0xe8a820[_0x1a3818(0x17a)],_0x878684[_0x1a3818(0x1c2)])||_0x878684[_0x1a3818(0x174)](_0xe8a820['isHealingEnabled'],!![]);const _0x5da7c8=_0x878684[_0x1a3818(0x170)](this[_0x1a3818(0x194)]['selfHeal'],!![])||_0x878684[_0x1a3818(0x170)](this['config'][_0x1a3818(0x107)],_0x878684[_0x1a3818(0x1c2)]);if(_0x878684[_0x1a3818(0x174)](_0xe8a820[_0x1a3818(0x11a)],constants[_0x1a3818(0x195)])&&_0x5da7c8)logger['info'](_0x878684['ivPNA']);else{if(!_0xe8a820['isAuthenticated']&&_0x878684[_0x1a3818(0x18d)](_0xe8a820['status'],0x1f7)&&_0x5da7c8)logger[_0x1a3818(0xf2)](_0x878684['POMMd']),utilities['fireFunnelTestEvent'](constants[_0x1a3818(0x11f)],_0x362b81,this[_0x1a3818(0x194)],this['framework']);else{if(!_0xe8a820['isAuthenticated']&&_0x5da7c8){logger[_0x1a3818(0xf2)](_0x878684[_0x1a3818(0x10c)]);const _0x1f9027={'tcgUrl':constants[_0x1a3818(0x1dc)],'sdkVersion':_0x878684['DCbOJ'](require,_0x878684[_0x1a3818(0x164)])[_0x1a3818(0x154)],'methodUsed':_0x878684[_0x1a3818(0x1bb)],'proxyConfig':_0x2f39fc,'os':os[_0x1a3818(0x19a)]()};utilities[_0x1a3818(0x1f6)](constants[_0x1a3818(0x1e9)],_0x1f9027,this[_0x1a3818(0x194)],this[_0x1a3818(0x10a)]);}else{if(_0xe8a820[_0x1a3818(0x187)]&&!_0xe8a820[_0x1a3818(0x17a)]&&_0x5da7c8)logger[_0x1a3818(0xf2)](_0x878684[_0x1a3818(0x1a6)]);else{if(_0x878684[_0x1a3818(0xf7)](_0xe8a820['status'],0xc8)&&_0x878684[_0x1a3818(0x1df)](_0xe8a820[_0x1a3818(0x140)],0x12c))utilities[_0x1a3818(0x1f6)](constants['AI_INIT_SUCCESSFUL'],_0x362b81,this[_0x1a3818(0x194)],this['framework']);else{if(_0x878684[_0x1a3818(0xf7)](_0xe8a820['status'],0x190))_0x362b81['status']=_0xe8a820[_0x1a3818(0x140)],utilities[_0x1a3818(0x1f6)](constants['AI_INIT_FAILURE'],_0x362b81,this[_0x1a3818(0x194)],this['framework']);else!_0xe8a820[_0x1a3818(0x140)]&&utilities[_0x1a3818(0x1f6)](constants['INVALID_INIT_RESP_WITH_USER_IMPACT'],_0x362b81,this['config'],this[_0x1a3818(0x10a)]);}}}}}if(_0xe8a820['isAuthenticated']&&_0xe8a820[_0x1a3818(0x17a)]){const _0x5ae891={};_0x5ae891[_0x1a3818(0x156)]=_0xe8a820;const _0x592948=_0x5ae891;_0x2f39fc&&(_0x592948[_0x1a3818(0xf8)]=_0x2f39fc),_0x592948[_0x1a3818(0x10a)]=this[_0x1a3818(0x10a)],_0x592948[_0x1a3818(0x15f)]=this[_0x1a3818(0x194)],helper['setupTcgConfigFile'](_0x592948),logger[_0x1a3818(0x1f4)](_0x878684[_0x1a3818(0x166)]);}}catch(_0x319308){logger[_0x1a3818(0x1f4)]('Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20'+(_0x319308[_0x1a3818(0x11a)]?_0x319308[_0x1a3818(0x11a)]:''));}});await _0x878684[_0xd601fd(0x146)](_0x3b452e);}[a83_0x1cc6a6(0x144)](){const _0x3a0e04=a83_0x1cc6a6,_0xc9ee1f={'RauQi':function(_0x5bd988,_0x494663){return _0x5bd988(_0x494663);},'VxMeA':_0x3a0e04(0x1ad)};_0xc9ee1f[_0x3a0e04(0x120)](require,_0xc9ee1f[_0x3a0e04(0x133)])();}[a83_0x1cc6a6(0x18a)](){const _0x4ea924=a83_0x1cc6a6,_0x363e30={};_0x363e30[_0x4ea924(0x1d6)]='unhandledRejection',_0x363e30['BEvlR']='uncaughtException';const _0x28a111=_0x363e30,_0x4e00af=_0x52cb5b=>{const _0x280536=_0x4ea924;logger[_0x280536(0x1bc)](_0x52cb5b['message']),logger[_0x280536(0x1f4)](util[_0x280536(0x165)](_0x52cb5b)),this['unhandledErrors']['push'](util[_0x280536(0x165)]('%j',_0x52cb5b)),PerformanceTester[_0x280536(0x1b7)](_0x52cb5b);};process['on'](_0x28a111[_0x4ea924(0x1d6)],_0x4e00af),process['on'](_0x28a111[_0x4ea924(0x186)],_0x4e00af);}async['intExitHandler'](_0x4f1237){const _0x1d0241=a83_0x1cc6a6,_0x4fa63c={};_0x4fa63c[_0x1d0241(0x16f)]=_0x1d0241(0x157),_0x4fa63c[_0x1d0241(0x1b8)]=function(_0xf0574d,_0x25712a){return _0xf0574d+_0x25712a;},_0x4fa63c[_0x1d0241(0x15a)]=_0x1d0241(0x19c),_0x4fa63c[_0x1d0241(0x1a4)]=function(_0x115f8f,_0x5dac91){return _0x115f8f+_0x5dac91;},_0x4fa63c[_0x1d0241(0x132)]=_0x1d0241(0x1ab),_0x4fa63c['EqIOG']=function(_0x333945,_0x80ff4f){return _0x333945+_0x80ff4f;};const _0x363fcc=_0x4fa63c,_0x53bfe9=_0x363fcc['CESeM'][_0x1d0241(0x181)]('|');let _0x146dd4=0x0;while(!![]){switch(_0x53bfe9[_0x146dd4++]){case'0':logger&&logger[_0x1d0241(0x189)]();continue;case'1':this['killSignal']=_0x4f1237;continue;case'2':if(this[_0x363fcc[_0x1d0241(0x1b8)](_0x363fcc[_0x1d0241(0x15a)],_0x4f1237)])return;continue;case'3':logger['info'](_0x363fcc[_0x1d0241(0x1a4)](_0x363fcc[_0x1d0241(0x132)],_0x4f1237));continue;case'4':await TestHubHandler[_0x1d0241(0x17f)](_0x4f1237);continue;case'5':this[_0x363fcc[_0x1d0241(0x1f7)](_0x363fcc[_0x1d0241(0x15a)],_0x4f1237)]=!![];continue;case'6':await BrowserstackCLI['getInstance']()[_0x1d0241(0x17f)]();continue;case'7':fileLogger&&fileLogger[_0x1d0241(0x189)]();continue;}break;}}[a83_0x1cc6a6(0x108)](){const _0x168656=a83_0x1cc6a6,_0x3d68fd={'icukQ':function(_0x309005,_0x3ad77){return _0x309005===_0x3ad77;},'cmebm':_0x168656(0x180),'xcWTM':function(_0x940a02,_0xcb4fc7){return _0x940a02>_0xcb4fc7;},'BJcNh':function(_0x104583,_0x2fa340){return _0x104583>_0x2fa340;},'SbgZo':function(_0x25aeea){return _0x25aeea();},'tcnsj':'events.json'};let _0xfd9e19=0x0;return async()=>{const _0x3c1b58=_0x168656;_0xfd9e19++;if(_0x3d68fd['icukQ'](_0xfd9e19,0x1)){helper[_0x3c1b58(0x12e)](this[_0x3c1b58(0x10a)])&&await this['stopBrowserstackLocal']();try{logger['debug'](_0x3d68fd[_0x3c1b58(0x1c7)]),await TestHubHandler['stop'](_0xfd9e19),await BrowserstackCLI[_0x3c1b58(0x169)]()[_0x3c1b58(0x17f)]('1');}catch(_0x34d582){logger[_0x3c1b58(0x1f4)](_0x3c1b58(0x15e)+util[_0x3c1b58(0x165)](_0x34d582));}PerformanceTester[_0x3c1b58(0x100)](PerformanceEvents[_0x3c1b58(0x1cd)]);if(PerformanceTester[_0x3c1b58(0x145)]()){const {measures:_0x3f82fa,errors:_0x29c024}=await PerformanceTester['finalize'](),_0xc3dcb2={};if(_0x3f82fa&&_0x3d68fd[_0x3c1b58(0x175)](_0x3f82fa['length'],0x0)||_0x29c024&&_0x3d68fd[_0x3c1b58(0x16e)](_0x29c024[_0x3c1b58(0x17e)],0x0)){const _0x11fdf0={};_0x11fdf0[_0x3c1b58(0x1d5)]=_0x3f82fa,_0x11fdf0[_0x3c1b58(0x114)]=_0x29c024,Object[_0x3c1b58(0x161)](_0xc3dcb2,_0x11fdf0);}try{const _0x493dc8=await helper[_0x3c1b58(0x196)](_0xc3dcb2,this[_0x3c1b58(0x194)]);logger[_0x3c1b58(0x1f4)](_0x3c1b58(0x106)+constants[_0x3c1b58(0x190)]+'\x20with\x20response\x20'+_0x493dc8['statusCode']);}catch(_0x13edb6){logger['debug'](_0x3c1b58(0x130)+constants[_0x3c1b58(0x190)]+_0x3c1b58(0x1a7)+util[_0x3c1b58(0x165)](_0x13edb6));}try{fs[_0x3c1b58(0x16d)](path[_0x3c1b58(0x1e1)](_0x3d68fd['SbgZo'](getLogDir),_0x3d68fd['tcnsj']),JSON[_0x3c1b58(0x119)](_0xc3dcb2));}catch(_0x3e87dc){logger[_0x3c1b58(0x1f4)]('Error\x20in\x20writing\x20events\x20to\x20file\x20'+_0x3e87dc);}}}};}}exports[a83_0x1cc6a6(0x199)]=BrowserStackSetup;