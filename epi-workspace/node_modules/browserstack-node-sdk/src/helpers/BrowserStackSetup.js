const a89_0x55a8bc=a89_0x1a59;function a89_0x1a59(_0x293188,_0x4d59dc){const _0x2ee374=a89_0x2ee3();return a89_0x1a59=function(_0x1a596d,_0x4b04a1){_0x1a596d=_0x1a596d-0x11f;let _0x10db53=_0x2ee374[_0x1a596d];return _0x10db53;},a89_0x1a59(_0x293188,_0x4d59dc);}(function(_0x46580d,_0x4b842f){const _0x3027ad=a89_0x1a59,_0x11dcd8=_0x46580d();while(!![]){try{const _0x1419e5=-parseInt(_0x3027ad(0x169))/0x1*(parseInt(_0x3027ad(0x1cb))/0x2)+-parseInt(_0x3027ad(0x217))/0x3+parseInt(_0x3027ad(0x145))/0x4*(-parseInt(_0x3027ad(0x198))/0x5)+parseInt(_0x3027ad(0x1f3))/0x6+parseInt(_0x3027ad(0x13d))/0x7+-parseInt(_0x3027ad(0x1af))/0x8+parseInt(_0x3027ad(0x17c))/0x9;if(_0x1419e5===_0x4b842f)break;else _0x11dcd8['push'](_0x11dcd8['shift']());}catch(_0x37783d){_0x11dcd8['push'](_0x11dcd8['shift']());}}}(a89_0x2ee3,0xd622a));const util=require(a89_0x55a8bc(0x13a)),os=require('os'),path=require(a89_0x55a8bc(0x203)),{v4:uuidv4}=require(a89_0x55a8bc(0x16e)),fs=require('fs'),constants=require(a89_0x55a8bc(0x20d)),logger=require(a89_0x55a8bc(0x143))['winstonLogger'],fileLogger=require(a89_0x55a8bc(0x143))[a89_0x55a8bc(0x15f)],{getLogDir}=require(a89_0x55a8bc(0x143)),helper=require(a89_0x55a8bc(0x1b8)),utilities=require(a89_0x55a8bc(0x157)),percyHelper=require(a89_0x55a8bc(0x202)),hubAllocator=require(a89_0x55a8bc(0x18b)),PerformanceTester=require('./performance/performance-tester'),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a89_0x55a8bc(0x166)),{setPercyFlag}=require(a89_0x55a8bc(0x1de)),TestHubHandler=require('./testhub/testhubHandler'),timeoutPromise=require(a89_0x55a8bc(0x150)),BrowserstackCLI=require(a89_0x55a8bc(0x222)),{getEdsInstrumentationAPIUrl}=require(a89_0x55a8bc(0x1d4));function a89_0x2ee3(){const _0x5eca58=['140kRrbja','startLocalBinary','gYJEG','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','FmOCu','uuid','startMonitoring','jKxuX','platform','visPb','turboScaleUrl','useW3C','cliConfig','Local\x20binary\x20started\x20successfully','AUTOLOGCAPTURE_NOTIFICATION','ynspv','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','FVSxM','wICLu','19975239FDUFBL','unhandledRejection','Data\x20sent\x20successfully\x20to\x20','xgopo','finalize','dWlXj','BrowserstackHealing.init','isTurboScaleSession','getUserName','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','TCG_AUTH_FAILURE','ezUEq','BlkYl','ats-repeater','SIGTERM','../hubAllocationMethods','testContextOptions','join','DSuoL','?caps=','Syffu','BrowserstackHealingInitFailed','pwasN','isTrialGrid','turboScaleOptions','isHealingEnabled','dqUsj','LAIVZ','5441115kyoAZS','yVSbv','normalizeTestReportingEnvVars','isTrue','VmKIt','xrCyB','XNAnz','../../package.json','initialize','events.json','custom-repeater','mvZVt','env','sendToEDS','bADvX','getTurboScaleGridDetails','stopBrowserstackLocal','readConfig','debug','MOfKz','NFKAr','SIGBREAK','handleExceptions','8485344FEnDHW','YdWWD','KZQsG','accessKey','default','getCentralUser','stopLocalBinary','checkStopLocalBinaryOnExit','getLocalIdentifier','./helper','jxQKs','BROWSERSTACK_PERCY','central_scanner','fireFunnelTestEvent','forceLocal','mHdbK','percy','skipSessionName','XLGzc','stopPercy','iJFTS','status','isUndefined','PhLPF','INVALID_INIT_RESP_WITH_USER_IMPACT','SIGQUIT','disableAutoCaptureLogs','setupTCGAuth','2206PjJHwk','proxy','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','setEnvCaps','FZnxW','measureWrapper','playwright','JoTvH','svfEn','../bin/utils/apiUtilityMethods','DypVc','rVxoj','FRAMEWORK','QkkXi','handled','isRunning','gMhAj','statusCode','LcHNN','./testhub/utils','format','userName','intExitHandler','veThv','setupBrowserstackLocal','url','localIdentifier','isBrowserstackInfra','generateLocalIdentifier','sdkRunId','browserstackLocal','QTeCI','mNtjq','setBrowserstackInfraFromConfig','localOptions','setUpHubUrl','isAuthenticated','info','exceptions','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','3013722xpXupg','unhandledErrors','VTGzC','QoqKs','userName\x20or\x20accessKey\x20is\x20not\x20defined','setCLICaps','aiHeal:tcgAuth','tcg\x20config\x20setup\x20successful.','setupPercy','No\x20config\x20provided.','setHandlePWError','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','12|14|20|4|19|16|5|7|9|2|22|10|0|8|21|18|3|13|17|6|1|15|11','sMZld','../ai-sdk-node/bundle','./percy/utils','path','framework','setLogLevel','beetw','Failed\x20to\x20send\x20data\x20to\x20','flZue','qplJe','UPGRADE_REQUIRED','platforms','setCredentialsFromYmlConfig','../bin/utils/constants','QCGtC','isNotUndefined','skipBinaryInitialisation','exitHandler','version','BibDf','getInstance','emYRM','TsHBL','2701203nziuqd','warn','HcqKx','Percy\x20stopped','close','stop','qKOBr','getPackageVersion','true','false','getConfigPath','../bin/v2/browserstackCLI','allocateHub','length','getHubUrl','killSignal','vGlIv','TCG_AUTH_TIMEOUT','TCG_URL','GZGHI','xoffM','startPercy','ShYSD','SIGABRT','playwrightUrl','qzdnM','envConfig','kzOrL','SDK_CLEANUP','QeAsH','getLocalConfig','assign','race','stringify','constructor','isEnabled','turboScaleGridDetails','selfHeal','toString','util','LDeuL','beforeExit','9513364jXjAkV','AI_INIT_SUCCESSFUL','mRTbQ','Error\x20occured\x20while\x20stopping\x20percy','BrowserstackHealing.init\x20method\x20timed\x20out','setupTcgConfigFile','./logger','vlQxu','4aVYOiB','SFbBP','requireSeleniumWebdriverCheck','browserStackLocalOptions','measures','GdsYx','SIGHUP','setupKeepAlive','XzoNb','bind','KuizH','./timeoutPromise','then','preInitialize','BROWSERSTACK_TURBOSCALE','push','sanitizeCaps','integrations','./utilities','ohRxf','proxyUrl','uncaughtException','error','lTIkb','captureError','compareVersions','fileLogger','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','getFinalCaps','win32','Error\x20in\x20percy\x20setup\x20','message','config','./performance/constants','qVnjn','\x20with\x20error\x20'];a89_0x2ee3=function(){return _0x5eca58;};return a89_0x2ee3();}class BrowserStackSetup{constructor(_0x109da6,_0x1c2345){const _0x7d8a3a=a89_0x55a8bc,_0xd4b1e9={'GdsYx':_0x7d8a3a(0x1ff),'QCGtC':_0x7d8a3a(0x1fc),'Syffu':function(_0x5e6c75){return _0x5e6c75();}},_0x5b2a12=_0xd4b1e9[_0x7d8a3a(0x14a)]['split']('|');let _0x13c6d3=0x0;while(!![]){switch(_0x5b2a12[_0x13c6d3++]){case'0':global[_0x7d8a3a(0x204)]=_0x1c2345;continue;case'1':helper['setLogDir'](this['config']);continue;case'2':this['errorMessage']={};continue;case'3':helper[_0x7d8a3a(0x20c)](this[_0x7d8a3a(0x165)]);continue;case'4':this[_0x7d8a3a(0x1e9)]=null;continue;case'5':this[_0x7d8a3a(0x175)]=helper[_0x7d8a3a(0x1f8)](_0x109da6);continue;case'6':helper[_0x7d8a3a(0x161)](this[_0x7d8a3a(0x165)],this[_0x7d8a3a(0x175)],this[_0x7d8a3a(0x12d)]);continue;case'7':this[_0x7d8a3a(0x165)][_0x7d8a3a(0x20b)]=this[_0x7d8a3a(0x165)][_0x7d8a3a(0x20b)]||[];continue;case'8':if(helper[_0x7d8a3a(0x1c5)](this[_0x7d8a3a(0x165)]))throw new Error(_0xd4b1e9[_0x7d8a3a(0x20e)]);continue;case'9':this[_0x7d8a3a(0x165)][_0x7d8a3a(0x18c)]=this[_0x7d8a3a(0x165)][_0x7d8a3a(0x18c)]||{};continue;case'10':this['framework']=_0x1c2345;continue;case'11':PerformanceTester[_0x7d8a3a(0x16f)]();continue;case'12':this[_0x7d8a3a(0x1f4)]=[];continue;case'13':this[_0x7d8a3a(0x165)]['testContextOptions']['skipSessionStatus']=!helper['isBrowserstackInfra']()||helper[_0x7d8a3a(0x19b)](this[_0x7d8a3a(0x165)][_0x7d8a3a(0x18c)]['skipSessionStatus']);continue;case'14':helper[_0x7d8a3a(0x19a)]();continue;case'15':helper[_0x7d8a3a(0x205)](this[_0x7d8a3a(0x165)],this[_0x7d8a3a(0x175)],this[_0x7d8a3a(0x12d)]);continue;case'16':this[_0x7d8a3a(0x165)]=helper[_0x7d8a3a(0x1a9)](helper[_0x7d8a3a(0x221)](_0x109da6));continue;case'17':this['config']['testContextOptions'][_0x7d8a3a(0x1c0)]=!helper[_0x7d8a3a(0x1e6)]()||helper[_0x7d8a3a(0x19b)](this[_0x7d8a3a(0x165)][_0x7d8a3a(0x18c)][_0x7d8a3a(0x1c0)]);continue;case'18':helper[_0x7d8a3a(0x1ec)](this[_0x7d8a3a(0x165)],this[_0x7d8a3a(0x175)]);continue;case'19':this[_0x7d8a3a(0x1bf)]=null;continue;case'20':this[_0x7d8a3a(0x12d)]=helper[_0x7d8a3a(0x1ce)]();continue;case'21':if(this[_0x7d8a3a(0x165)][_0x7d8a3a(0x15b)])throw new Error(this[_0x7d8a3a(0x165)]['error']);continue;case'22':this[_0x7d8a3a(0x1e8)]=_0xd4b1e9[_0x7d8a3a(0x190)](uuidv4);continue;}break;}}[a89_0x55a8bc(0x152)](_0xb5d667){const _0x10a752=a89_0x55a8bc,_0x2d5558={'vlQxu':_0x10a752(0x1f7),'vGlIv':function(_0x581333,_0x2c0096){return _0x581333===_0x2c0096;},'lTIkb':_0x10a752(0x156),'gYJEG':'SDKTestAttempted','WTvdF':function(_0x7aa673,_0x4be0af){return _0x7aa673<_0x4be0af;},'ezUEq':function(_0x3e9e85,_0x2e876b){return _0x3e9e85(_0x2e876b);},'FZnxW':'selenium-webdriver','yVSbv':function(_0x28303e,_0x5409be){return _0x28303e===_0x5409be;},'LAIVZ':'4.5.0','eeibB':'Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','dWlXj':'parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','NFKAr':_0x10a752(0x18a),'YdWWD':'SIGINT','LDeuL':_0x10a752(0x14b),'xoMQu':function(_0x5e6d2e,_0x2bfad8){return _0x5e6d2e!==_0x2bfad8;},'ohRxf':_0x10a752(0x162),'xrCyB':_0x10a752(0x12a),'sMZld':_0x10a752(0x1c8),'QeAsH':_0x10a752(0x1ad),'DPXQU':_0x10a752(0x13c)},_0x3987bf=this[_0x10a752(0x204)];global[_0x10a752(0x165)]=this[_0x10a752(0x165)],helper[_0x10a752(0x155)](this[_0x10a752(0x165)]),this['killSignal']=null,global[_0x10a752(0x1e8)]=this[_0x10a752(0x1e8)],logger[_0x10a752(0x1f0)]('SDK\x20run\x20started\x20with\x20id:\x20'+this[_0x10a752(0x1e8)]),!this[_0x10a752(0x165)][_0x10a752(0x148)]&&(this[_0x10a752(0x165)][_0x10a752(0x148)]=this['config'][_0x10a752(0x1ed)]||{});if(helper[_0x10a752(0x1c5)](helper[_0x10a752(0x184)](this[_0x10a752(0x165)]))||helper[_0x10a752(0x1c5)](helper['getAccessKey'](this['config'])))throw new Error(_0x2d5558[_0x10a752(0x144)]);helper[_0x10a752(0x131)](this[_0x10a752(0x165)])&&helper[_0x10a752(0x1c5)](helper[_0x10a752(0x1b7)](this[_0x10a752(0x165)]))&&(!helper['isUndefined'](this['config'][_0x10a752(0x148)])&&_0x2d5558[_0x10a752(0x123)](this[_0x10a752(0x165)][_0x10a752(0x148)][_0x10a752(0x135)],Object)?!helper[_0x10a752(0x19b)](this['config'][_0x10a752(0x148)]['skipBinaryInitialisation'])&&(this['config']['browserStackLocalOptions']['localIdentifier']=helper[_0x10a752(0x1e7)]()):this[_0x10a752(0x165)][_0x10a752(0x148)]={'localIdentifier':helper[_0x10a752(0x1e7)]()});this[_0x10a752(0x165)][_0x10a752(0x148)][_0x10a752(0x210)]=helper['isTrue'](this[_0x10a752(0x165)][_0x10a752(0x148)]['skipBinaryInitialisation']),helper[_0x10a752(0x1fd)](this[_0x10a752(0x165)]);if(_0x2d5558[_0x10a752(0x123)](_0x3987bf,_0x2d5558[_0x10a752(0x15c)]))return;this[_0x10a752(0x1ae)]();process[_0x10a752(0x1a4)][_0x10a752(0x153)]&&(this[_0x10a752(0x165)]['turboScale']=helper[_0x10a752(0x19b)](process[_0x10a752(0x1a4)]['BROWSERSTACK_TURBOSCALE']),this[_0x10a752(0x165)][_0x10a752(0x194)]=this['config'][_0x10a752(0x194)]||{});helper['isTurboScaleSession'](this['config'])&&(process[_0x10a752(0x1a4)]['BROWSERSTACK_TURBOSCALE']=!![]);if(!helper[_0x10a752(0x1e6)]()){try{process[_0x10a752(0x1a4)][_0x10a752(0x1d7)]=_0x3987bf,utilities['fireFunnelTestEvent'](_0x2d5558[_0x10a752(0x16b)],{},this[_0x10a752(0x165)],this['framework']);}catch(_0x34ebc8){logger[_0x10a752(0x1aa)](_0x10a752(0x185)+_0x34ebc8);}return;}if(helper[_0x10a752(0x147)](_0x3987bf)){if(global['__isPlaywrightInstalled'])return;_0x2d5558['WTvdF'](_0x2d5558[_0x10a752(0x187)](parseInt,helper[_0x10a752(0x21e)](_0x2d5558[_0x10a752(0x1cf)])),0x3)&&(this[_0x10a752(0x165)][_0x10a752(0x174)]=![]),_0x2d5558[_0x10a752(0x199)](helper[_0x10a752(0x15e)](helper[_0x10a752(0x21e)](_0x2d5558[_0x10a752(0x1cf)]),_0x2d5558[_0x10a752(0x197)]),0x1)&&(this['config'][_0x10a752(0x174)]=!![]);}(helper['isUndefined'](this[_0x10a752(0x165)][_0x10a752(0x20b)])||helper[_0x10a752(0x1c5)](this['config'][_0x10a752(0x20b)][_0x10a752(0x120)]))&&(helper[_0x10a752(0x1c5)](this[_0x10a752(0x165)]['parallelsPerPlatform'])?logger[_0x10a752(0x1f0)](_0x2d5558['eeibB']):logger[_0x10a752(0x218)](_0x2d5558[_0x10a752(0x181)]),this[_0x10a752(0x165)][_0x10a752(0x20b)]=[]);!this[_0x10a752(0x165)]['testContextOptions']&&(this['config'][_0x10a752(0x18c)]={});try{process[_0x10a752(0x1a4)][_0x10a752(0x1d7)]=_0xb5d667['_'][0x0],utilities[_0x10a752(0x1bc)](_0x2d5558[_0x10a752(0x16b)],{},this[_0x10a752(0x165)],this[_0x10a752(0x204)]);}catch(_0x712b31){logger['debug'](_0x10a752(0x185)+_0x712b31);}!this[_0x10a752(0x165)][_0x10a752(0x1c9)]&&logger[_0x10a752(0x1f0)](constants[_0x10a752(0x177)]),this[_0x10a752(0x1e1)]=this[_0x10a752(0x1e1)][_0x10a752(0x14e)](this),process['on'](_0x2d5558[_0x10a752(0x1ac)],this['intExitHandler']),process['on'](_0x2d5558[_0x10a752(0x1b0)],this[_0x10a752(0x1e1)]),process['on'](_0x2d5558[_0x10a752(0x13b)],this[_0x10a752(0x1e1)]),_0x2d5558['xoMQu'](process[_0x10a752(0x171)],_0x2d5558[_0x10a752(0x158)])?(process['on'](_0x2d5558[_0x10a752(0x19d)],this[_0x10a752(0x1e1)]),process['on'](_0x2d5558[_0x10a752(0x200)],this[_0x10a752(0x1e1)])):process['on'](_0x2d5558[_0x10a752(0x130)],this[_0x10a752(0x1e1)]),process['on'](_0x2d5558['DPXQU'],this['exitHandler']());}async[a89_0x55a8bc(0x1a0)](_0x4ea9b6){const _0x238b8f=a89_0x55a8bc,_0x1a2b1c={'GZGHI':_0x238b8f(0x189),'mNtjq':_0x238b8f(0x1a2),'JZGFV':_0x238b8f(0x21f),'SDNeS':function(_0x5a328f,_0x1e7ba9){return _0x5a328f===_0x1e7ba9;},'mHdbK':_0x238b8f(0x1d1),'bADvX':function(_0x196c64,_0x153f9c){return _0x196c64+_0x153f9c;},'jxQKs':_0x238b8f(0x18f),'XLGzc':function(_0x5aee29,_0x51c8ca){return _0x5aee29(_0x51c8ca);},'gMhAj':'codeceptjs'};this[_0x238b8f(0x152)](_0x4ea9b6);if(helper[_0x238b8f(0x183)](this[_0x238b8f(0x165)])){const _0x1859bd=await helper[_0x238b8f(0x1a7)](this[_0x238b8f(0x165)]);this[_0x238b8f(0x165)][_0x238b8f(0x137)]=_0x1859bd,_0x1859bd[_0x238b8f(0x193)]&&helper[_0x238b8f(0x20f)](this['config'][_0x238b8f(0x1e9)])&&helper[_0x238b8f(0x19b)](this['config'][_0x238b8f(0x1e9)])&&(this[_0x238b8f(0x165)][_0x238b8f(0x148)][_0x238b8f(0x1e5)]=_0x1a2b1c[_0x238b8f(0x126)],this[_0x238b8f(0x165)][_0x238b8f(0x148)][_0x1a2b1c[_0x238b8f(0x1eb)]]=_0x1859bd['customRepeaters']['join'](','),this[_0x238b8f(0x165)]['browserStackLocalOptions'][_0x238b8f(0x1bd)]=_0x1a2b1c['JZGFV']),this[_0x238b8f(0x165)][_0x238b8f(0x173)]=_0x1859bd[_0x238b8f(0x1e4)],this[_0x238b8f(0x204)]&&_0x1a2b1c['SDNeS'](this[_0x238b8f(0x204)]['toLowerCase'](),_0x1a2b1c[_0x238b8f(0x1be)])?this[_0x238b8f(0x165)][_0x238b8f(0x173)]=_0x1a2b1c[_0x238b8f(0x1a6)](_0x1859bd[_0x238b8f(0x12b)],_0x1a2b1c[_0x238b8f(0x1b9)]):constants['hubUrl']=helper[_0x238b8f(0x121)](this[_0x238b8f(0x165)]),logger[_0x238b8f(0x1aa)](_0x238b8f(0x160)+constants['hubUrl']);}helper['setProxySettings'](this['config']),this[_0x238b8f(0x14c)](),_0x1a2b1c[_0x238b8f(0x1c1)](setPercyFlag,this),await this[_0x238b8f(0x1e3)](),![_0x1a2b1c[_0x238b8f(0x1db)],_0x1a2b1c[_0x238b8f(0x1be)]]['includes'](this[_0x238b8f(0x204)])&&!helper[_0x238b8f(0x183)](this[_0x238b8f(0x165)])&&!helper[_0x238b8f(0x1b4)]()[_0x238b8f(0x1bb)]&&await this['setUpHubUrl']();}async[a89_0x55a8bc(0x1fb)](){const _0x311688=a89_0x55a8bc,_0xfdbda4={};_0xfdbda4[_0x311688(0x1d2)]=function(_0x14ed35,_0x3b13b9){return _0x14ed35===_0x3b13b9;},_0xfdbda4[_0x311688(0x129)]=_0x311688(0x220),_0xfdbda4[_0x311688(0x21d)]=_0x311688(0x1f2),_0xfdbda4[_0x311688(0x206)]='Percy\x20started\x20successfully',_0xfdbda4[_0x311688(0x17a)]=_0x311688(0x21f),_0xfdbda4['SFbBP']=_0x311688(0x13c);const _0x22fa25=_0xfdbda4;if(helper[_0x311688(0x19b)](this[_0x311688(0x165)][_0x311688(0x1bf)])&&(!this[_0x311688(0x1bf)]||!this[_0x311688(0x1bf)][_0x311688(0x1da)]()))try{this[_0x311688(0x1bf)]=await percyHelper[_0x311688(0x128)](this[_0x311688(0x165)]);if(!this[_0x311688(0x1bf)]){process[_0x311688(0x1a4)][_0x311688(0x1ba)]=_0x22fa25[_0x311688(0x129)];throw new Error(_0x22fa25[_0x311688(0x21d)]);}logger['info'](_0x22fa25[_0x311688(0x206)]),process[_0x311688(0x1a4)]['BROWSERSTACK_PERCY']=_0x22fa25[_0x311688(0x17a)];let _0x198901=0x0;const _0x595394=async()=>{const _0x5d9626=_0x311688;_0x198901++,_0x22fa25[_0x5d9626(0x1d2)](_0x198901,0x1)&&await this[_0x5d9626(0x1c2)]();};process['on'](_0x22fa25[_0x311688(0x146)],_0x595394);}catch(_0x4950f7){process[_0x311688(0x1a4)]['BROWSERSTACK_PERCY']=_0x22fa25[_0x311688(0x129)],logger[_0x311688(0x1aa)](_0x311688(0x163)+_0x4950f7);throw new Error(_0x4950f7[_0x311688(0x139)]());}}async['stopPercy'](){const _0x42e410=a89_0x55a8bc,_0x36f899={};_0x36f899[_0x42e410(0x16d)]=_0x42e410(0x21a),_0x36f899[_0x42e410(0x1ea)]=_0x42e410(0x140);const _0x18ab1c=_0x36f899;if(this['percy']&&this['percy'][_0x42e410(0x1da)]())try{await percyHelper[_0x42e410(0x1c2)](this[_0x42e410(0x1bf)]),logger[_0x42e410(0x1f0)](_0x18ab1c['FmOCu']);}catch(_0x11209d){logger['error'](_0x18ab1c[_0x42e410(0x1ea)],_0x11209d[_0x42e410(0x164)]);}}async[a89_0x55a8bc(0x1e3)](){const _0x171046=a89_0x55a8bc,_0x52545f={};_0x52545f[_0x171046(0x127)]=_0x171046(0x1cd),_0x52545f[_0x171046(0x188)]=_0x171046(0x176);const _0x49d01e=_0x52545f;if(helper['isBrowserstackInfra']()&&helper[_0x171046(0x19b)](this[_0x171046(0x165)][_0x171046(0x1e9)])&&(!this['browserstackLocal']||!this[_0x171046(0x1e9)][_0x171046(0x1da)]()))try{if(this[_0x171046(0x165)][_0x171046(0x148)][_0x171046(0x210)]){logger[_0x171046(0x1aa)](_0x49d01e[_0x171046(0x127)]);return;}this[_0x171046(0x1e9)]=await helper[_0x171046(0x16a)](this[_0x171046(0x165)]),logger[_0x171046(0x1f0)](_0x49d01e[_0x171046(0x188)]);}catch(_0x3865c5){logger[_0x171046(0x1aa)](_0x3865c5);throw new Error(_0x3865c5['toString']());}}async[a89_0x55a8bc(0x1a8)](){const _0x149a5d=a89_0x55a8bc,_0x25a22b={};_0x25a22b[_0x149a5d(0x1d5)]='Local\x20binary\x20stopped',_0x25a22b[_0x149a5d(0x1a3)]='Error\x20occured\x20while\x20stopping\x20local\x20binary';const _0x12c77d=_0x25a22b;if(this['browserstackLocal']&&this[_0x149a5d(0x1e9)]['isRunning']())try{await helper[_0x149a5d(0x1b5)](this['browserstackLocal']),logger['info'](_0x12c77d[_0x149a5d(0x1d5)]);}catch(_0xb3ad64){logger['error'](_0x12c77d['mvZVt'],_0xb3ad64[_0x149a5d(0x164)]);}}async[a89_0x55a8bc(0x1ee)](){const _0x6e8fea=a89_0x55a8bc;return PerformanceTester[_0x6e8fea(0x1d0)](PerformanceAutEvents['HUB_MANAGEMENT'],async()=>{const _0x501a04=_0x6e8fea;await hubAllocator[_0x501a04(0x11f)](this[_0x501a04(0x165)]);})();}async[a89_0x55a8bc(0x1ca)](){const _0x4cd1eb=a89_0x55a8bc,_0x23daca={'veThv':function(_0x38b210,_0x138ac7){return _0x38b210(_0x138ac7);},'pwasN':_0x4cd1eb(0x201),'aTUhQ':function(_0x35f00e,_0x4f519e,_0x142aed,_0x3d3286,_0x2257ab,_0x3ff51d,_0xd9dc03){return _0x35f00e(_0x4f519e,_0x142aed,_0x3d3286,_0x2257ab,_0x3ff51d,_0xd9dc03);},'qzdnM':_0x4cd1eb(0x141),'iJFTS':_0x4cd1eb(0x191),'kzOrL':_0x4cd1eb(0x19f),'flZue':_0x4cd1eb(0x182),'DirRm':function(_0xf58631,_0x2434f1){return _0xf58631(_0x2434f1);},'TsHBL':function(_0x54d5e6,_0x540891){return _0x54d5e6===_0x540891;},'HcqKx':_0x4cd1eb(0x21f),'dqUsj':function(_0x516a1a,_0x3eeab7){return _0x516a1a===_0x3eeab7;},'mRTbQ':function(_0x3ca928,_0x3119ba){return _0x3ca928===_0x3119ba;},'svfEn':_0x4cd1eb(0x179),'ynspv':function(_0x1483c6,_0x3b535b){return _0x1483c6===_0x3b535b;},'jKxuX':'Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','wICLu':_0x4cd1eb(0x1fe),'QkkXi':'Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','DSuoL':function(_0x142b37,_0x4818f1){return _0x142b37>=_0x4818f1;},'PhLPF':function(_0x4d5a09,_0xb6588c){return _0x4d5a09<_0xb6588c;},'Ybtiu':function(_0x2c5e41,_0x2e9203){return _0x2c5e41>=_0x2e9203;},'LRTwT':_0x4cd1eb(0x1fa),'KuizH':_0x4cd1eb(0x1f9),'VTGzC':function(_0x1e61f8){return _0x1e61f8();}},_0x53911c=PerformanceTester[_0x4cd1eb(0x1d0)](_0x23daca[_0x4cd1eb(0x14f)],async()=>{const _0x493b8c=_0x4cd1eb;try{const _0x49467d=new Date(),_0x4a239a=helper['getProxyConfigForTcg'](this[_0x493b8c(0x165)]),_0x17bf40=_0x23daca[_0x493b8c(0x1e2)](require,path[_0x493b8c(0x18d)](__dirname,_0x23daca[_0x493b8c(0x192)])),_0x3e68ab=_0x23daca['aTUhQ'](timeoutPromise,constants[_0x493b8c(0x124)],_0x23daca[_0x493b8c(0x12c)],_0x23daca[_0x493b8c(0x1c3)],_0x49467d,this['config'],this[_0x493b8c(0x204)]),_0x1622b1={'tcgUrl':constants[_0x493b8c(0x125)],'sdkVersion':_0x23daca['veThv'](require,_0x23daca[_0x493b8c(0x12e)])[_0x493b8c(0x212)],'methodUsed':_0x23daca[_0x493b8c(0x208)],'proxyConfig':_0x4a239a,'os':os[_0x493b8c(0x171)]()};if(_0x4a239a&&_0x4a239a[_0x493b8c(0x159)]){utilities['fireFunnelTestEvent'](constants['AI_PROXY_FAILURE'],_0x1622b1,this[_0x493b8c(0x165)],this[_0x493b8c(0x204)]);return;}const _0x269d7b={};_0x269d7b[_0x493b8c(0x1cc)]=_0x4a239a;const _0x44c850=await Promise[_0x493b8c(0x133)]([_0x17bf40['init'](this[_0x493b8c(0x165)][_0x493b8c(0x1b2)],this[_0x493b8c(0x165)][_0x493b8c(0x1e0)],constants[_0x493b8c(0x125)],_0x23daca['DirRm'](require,_0x23daca[_0x493b8c(0x12e)])[_0x493b8c(0x212)],_0x269d7b)[_0x493b8c(0x151)](_0x15b012=>{return _0x3e68ab['cancel'](),_0x15b012;}),_0x3e68ab]);_0x44c850['isHealingEnabled']=_0x23daca['TsHBL'](_0x44c850[_0x493b8c(0x195)],_0x23daca[_0x493b8c(0x219)])||_0x23daca[_0x493b8c(0x216)](_0x44c850['isHealingEnabled'],!![]);const _0x63051b=_0x23daca[_0x493b8c(0x196)](this[_0x493b8c(0x165)][_0x493b8c(0x138)],!![])||_0x23daca[_0x493b8c(0x13f)](this[_0x493b8c(0x165)]['selfHeal'],_0x23daca[_0x493b8c(0x219)]);if(_0x23daca[_0x493b8c(0x196)](_0x44c850[_0x493b8c(0x164)],constants[_0x493b8c(0x20a)])&&_0x63051b)logger['info'](_0x23daca[_0x493b8c(0x1d3)]);else{if(!_0x44c850[_0x493b8c(0x1ef)]&&_0x23daca[_0x493b8c(0x178)](_0x44c850[_0x493b8c(0x1c4)],0x1f7)&&_0x63051b)logger[_0x493b8c(0x1f0)](_0x23daca[_0x493b8c(0x170)]),utilities[_0x493b8c(0x1bc)](constants['TCG_DOWN'],_0x1622b1,this[_0x493b8c(0x165)],this[_0x493b8c(0x204)]);else{if(!_0x44c850[_0x493b8c(0x1ef)]&&_0x63051b){logger['info'](_0x23daca[_0x493b8c(0x17b)]);const _0xd12f38={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x23daca[_0x493b8c(0x1e2)](require,_0x23daca[_0x493b8c(0x12e)])[_0x493b8c(0x212)],'methodUsed':_0x23daca[_0x493b8c(0x208)],'proxyConfig':_0x4a239a,'os':os[_0x493b8c(0x171)]()};utilities[_0x493b8c(0x1bc)](constants[_0x493b8c(0x186)],_0xd12f38,this['config'],this[_0x493b8c(0x204)]);}else{if(_0x44c850[_0x493b8c(0x1ef)]&&!_0x44c850[_0x493b8c(0x195)]&&_0x63051b)logger[_0x493b8c(0x1f0)](_0x23daca[_0x493b8c(0x1d8)]);else{if(_0x23daca[_0x493b8c(0x18e)](_0x44c850['status'],0xc8)&&_0x23daca[_0x493b8c(0x1c6)](_0x44c850['status'],0x12c))utilities['fireFunnelTestEvent'](constants[_0x493b8c(0x13e)],_0x1622b1,this[_0x493b8c(0x165)],this[_0x493b8c(0x204)]);else{if(_0x23daca['Ybtiu'](_0x44c850['status'],0x190))_0x1622b1[_0x493b8c(0x1c4)]=_0x44c850['status'],utilities[_0x493b8c(0x1bc)](constants['AI_INIT_FAILURE'],_0x1622b1,this[_0x493b8c(0x165)],this[_0x493b8c(0x204)]);else!_0x44c850[_0x493b8c(0x1c4)]&&utilities[_0x493b8c(0x1bc)](constants[_0x493b8c(0x1c7)],_0x1622b1,this[_0x493b8c(0x165)],this[_0x493b8c(0x204)]);}}}}}if(_0x44c850[_0x493b8c(0x1ef)]&&_0x44c850['isHealingEnabled']){const _0x22982a={};_0x22982a['tcgAuthConfig']=_0x44c850;const _0x5800f6=_0x22982a;_0x4a239a&&(_0x5800f6['proxyConfig']=_0x4a239a),_0x5800f6[_0x493b8c(0x204)]=this['framework'],_0x5800f6['bstackConfig']=this[_0x493b8c(0x165)],helper[_0x493b8c(0x142)](_0x5800f6),logger[_0x493b8c(0x1aa)](_0x23daca['LRTwT']);}}catch(_0x420f0c){logger[_0x493b8c(0x1aa)](_0x493b8c(0x16c)+(_0x420f0c[_0x493b8c(0x164)]?_0x420f0c[_0x493b8c(0x164)]:''));}});await _0x23daca[_0x4cd1eb(0x1f5)](_0x53911c);}[a89_0x55a8bc(0x14c)](){const _0x527fb0={'uuoAr':function(_0x3322e1,_0x16bd9d){return _0x3322e1(_0x16bd9d);},'LDasf':'./setKeepAlive'};_0x527fb0['uuoAr'](require,_0x527fb0['LDasf'])();}['handleExceptions'](){const _0x29e49c=a89_0x55a8bc,_0x467896={};_0x467896[_0x29e49c(0x167)]=_0x29e49c(0x17d),_0x467896['XNAnz']=_0x29e49c(0x15a);const _0x359a77=_0x467896,_0x271de4=_0x2c35c1=>{const _0x1d3093=_0x29e49c;logger[_0x1d3093(0x15b)](_0x2c35c1[_0x1d3093(0x164)]),logger[_0x1d3093(0x1aa)](util[_0x1d3093(0x1df)](_0x2c35c1)),this[_0x1d3093(0x1f4)][_0x1d3093(0x154)](util[_0x1d3093(0x1df)]('%j',_0x2c35c1)),PerformanceTester[_0x1d3093(0x15d)](_0x2c35c1);};process['on'](_0x359a77[_0x29e49c(0x167)],_0x271de4),process['on'](_0x359a77[_0x29e49c(0x19e)],_0x271de4);}async[a89_0x55a8bc(0x1e1)](_0x4afe10){const _0xe0685e=a89_0x55a8bc,_0x3440e6={};_0x3440e6[_0xe0685e(0x1dd)]='1|0|3|4|5|2',_0x3440e6[_0xe0685e(0x172)]=function(_0x4776b3,_0x420d60){return _0x4776b3+_0x420d60;},_0x3440e6[_0xe0685e(0x17f)]=_0xe0685e(0x1d9),_0x3440e6[_0xe0685e(0x1d6)]=function(_0x20c45c,_0x5de0b9){return _0x20c45c+_0x5de0b9;},_0x3440e6['qplJe']='Shutdown\x20triggered\x20by\x20';const _0x316904=_0x3440e6,_0x458e2b=_0x316904['LcHNN']['split']('|');let _0x4f9638=0x0;while(!![]){switch(_0x458e2b[_0x4f9638++]){case'0':this[_0x316904[_0xe0685e(0x172)](_0x316904[_0xe0685e(0x17f)],_0x4afe10)]=!![];continue;case'1':if(this[_0x316904[_0xe0685e(0x172)](_0x316904['xgopo'],_0x4afe10)])return;continue;case'2':await BrowserstackCLI[_0xe0685e(0x214)]()['stop']();continue;case'3':logger['info'](_0x316904[_0xe0685e(0x1d6)](_0x316904[_0xe0685e(0x209)],_0x4afe10));continue;case'4':this[_0xe0685e(0x122)]=_0x4afe10;continue;case'5':await TestHubHandler[_0xe0685e(0x21c)](_0x4afe10);continue;}break;}}[a89_0x55a8bc(0x211)](){const _0x59014c=a89_0x55a8bc,_0x5b2de6={'XzoNb':function(_0x3f9fac,_0x429c3a){return _0x3f9fac===_0x429c3a;},'VmKIt':'Calling\x20Build\x20Stop\x20from\x20ExitHandler','KZQsG':function(_0x32537b,_0x5349cd){return _0x32537b>_0x5349cd;},'emYRM':function(_0x103a83,_0x50f7f3){return _0x103a83>_0x50f7f3;},'QoqKs':function(_0x59a114,_0x3813f2){return _0x59a114(_0x3813f2);},'MOfKz':function(_0x60fd2c){return _0x60fd2c();},'BibDf':_0x59014c(0x1a1)};let _0x2d2b18=0x0;return async()=>{const _0x4bbc63=_0x59014c;_0x2d2b18++;if(_0x5b2de6[_0x4bbc63(0x14d)](_0x2d2b18,0x1)){helper[_0x4bbc63(0x1b6)](this[_0x4bbc63(0x204)])&&await this[_0x4bbc63(0x1a8)]();try{logger[_0x4bbc63(0x1aa)](_0x5b2de6[_0x4bbc63(0x19c)]),await TestHubHandler[_0x4bbc63(0x21c)](_0x2d2b18),await BrowserstackCLI[_0x4bbc63(0x214)]()['stop']('1');}catch(_0x7d9419){logger[_0x4bbc63(0x1aa)]('Error\x20in\x20sending\x20testhub\x20stop:\x20'+util[_0x4bbc63(0x1df)](_0x7d9419));}PerformanceTester['end'](PerformanceEvents[_0x4bbc63(0x12f)]);if(PerformanceTester[_0x4bbc63(0x136)]()){const {measures:_0x28ff6a,errors:_0x5e7f2a}=await PerformanceTester[_0x4bbc63(0x180)](),_0x39465e={};if(_0x28ff6a&&_0x5b2de6[_0x4bbc63(0x1b1)](_0x28ff6a[_0x4bbc63(0x120)],0x0)||_0x5e7f2a&&_0x5b2de6[_0x4bbc63(0x215)](_0x5e7f2a['length'],0x0)){const _0x5b234f={};_0x5b234f[_0x4bbc63(0x149)]=_0x28ff6a,_0x5b234f[_0x4bbc63(0x1f1)]=_0x5e7f2a,Object[_0x4bbc63(0x132)](_0x39465e,_0x5b234f);}try{const _0x654774=await helper[_0x4bbc63(0x1a5)](_0x39465e,this[_0x4bbc63(0x165)]);logger[_0x4bbc63(0x1aa)](_0x4bbc63(0x17e)+_0x5b2de6[_0x4bbc63(0x1f6)](getEdsInstrumentationAPIUrl,'')+'\x20with\x20response\x20'+_0x654774[_0x4bbc63(0x1dc)]);}catch(_0x161c39){logger[_0x4bbc63(0x1aa)](_0x4bbc63(0x207)+_0x5b2de6['QoqKs'](getEdsInstrumentationAPIUrl,'')+_0x4bbc63(0x168)+util[_0x4bbc63(0x1df)](_0x161c39));}try{fs['writeFileSync'](path[_0x4bbc63(0x18d)](_0x5b2de6[_0x4bbc63(0x1ab)](getLogDir),_0x5b2de6[_0x4bbc63(0x213)]),JSON[_0x4bbc63(0x134)](_0x39465e));}catch(_0x545396){logger[_0x4bbc63(0x1aa)]('Error\x20in\x20writing\x20events\x20to\x20file\x20'+_0x545396);}}}logger&&logger[_0x4bbc63(0x21b)](),fileLogger&&fileLogger[_0x4bbc63(0x21b)]();};}}exports[a89_0x55a8bc(0x1b3)]=BrowserStackSetup;