const a81_0x263716=a81_0x1748;(function(_0x2e6184,_0x177e85){const _0x2b7137=a81_0x1748,_0x3db237=_0x2e6184();while(!![]){try{const _0x4a5264=parseInt(_0x2b7137(0x247))/0x1+parseInt(_0x2b7137(0x215))/0x2*(-parseInt(_0x2b7137(0x224))/0x3)+-parseInt(_0x2b7137(0x231))/0x4+-parseInt(_0x2b7137(0x279))/0x5*(parseInt(_0x2b7137(0x276))/0x6)+parseInt(_0x2b7137(0x2a0))/0x7+parseInt(_0x2b7137(0x1de))/0x8+-parseInt(_0x2b7137(0x286))/0x9*(-parseInt(_0x2b7137(0x258))/0xa);if(_0x4a5264===_0x177e85)break;else _0x3db237['push'](_0x3db237['shift']());}catch(_0x580bf0){_0x3db237['push'](_0x3db237['shift']());}}}(a81_0x2c8c,0x339d7));const util=require(a81_0x263716(0x2a6)),os=require('os'),path=require(a81_0x263716(0x1f6)),{v4:uuidv4}=require(a81_0x263716(0x2a9)),fs=require('fs'),constants=require(a81_0x263716(0x1ff)),logger=require(a81_0x263716(0x2a3))[a81_0x263716(0x207)],fileLogger=require(a81_0x263716(0x2a3))['fileLogger'],{getLogDir}=require('./logger'),helper=require('./helper'),utilities=require(a81_0x263716(0x200)),percyHelper=require('./percy/utils'),hubAllocator=require(a81_0x263716(0x292)),PerformanceTester=require(a81_0x263716(0x25e)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a81_0x263716(0x2ac)),{setPercyFlag}=require(a81_0x263716(0x246)),TestHubHandler=require(a81_0x263716(0x294)),timeoutPromise=require(a81_0x263716(0x1e7)),BrowserstackCLI=require('../bin/v2/browserstackCLI');function a81_0x1748(_0x4dfd78,_0x3a8841){const _0x2c8cd5=a81_0x2c8c();return a81_0x1748=function(_0x1748bd,_0x21ea72){_0x1748bd=_0x1748bd-0x1c3;let _0xb6870d=_0x2c8cd5[_0x1748bd];return _0xb6870d;},a81_0x1748(_0x4dfd78,_0x3a8841);}function a81_0x2c8c(){const _0x15d13f=['writeFileSync','winstonLogger','getPackageVersion','playwright','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','stopPercy','SDKTestAttempted','parallelsPerPlatform','Calling\x20Build\x20Stop\x20from\x20ExitHandler','getConfigPath','percy','false','CekNb','envConfig','FRAMEWORK','12SSzBpt','yzxXf','qQIAc','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','browserstackLocal','./setKeepAlive','measures','AonJP','LKRdQ','localIdentifier','SDK_CLEANUP','ZlEsl','rXLnr','BROWSERSTACK_TURBOSCALE','cJzFF','10860rKyudH','SIGQUIT','stringify','preInitialize','setLogDir','framework','debug','UPGRADE_REQUIRED','cliConfig','AKIDO','4.5.0','sdkRunId','ejvsa','1424720JPHFZb','kWZlM','getTurboScaleGridDetails','Shutdown\x20triggered\x20by\x20','?caps=','sMZXx','env','AI_INIT_FAILURE','KWvBD','LMled','skipSessionName','url','OgDDU','uncaughtException','PxuWT','error','setCredentialsFromYmlConfig','YiEYT','turboScaleOptions','uKbos','Local\x20binary\x20started\x20successfully','./testhub/utils','295859LBmVQy','skipSessionStatus','handleExceptions','AI_INIT_SUCCESSFUL','setUpHubUrl','BSMqw','events.json','selenium-webdriver','browserStackLocalOptions','isBrowserstackInfra','length','push','../../package.json','cLGVj','jhjdm','useW3C','custom-repeater','20onXVza','intExitHandler','SIGABRT','SIGINT','BhWBb','constructor','./performance/performance-tester','cthdF','hubUrl','getProxyConfigForTcg','then','getLocalConfig','getUserName','stop','GyqvA','HUB_MANAGEMENT','iDmXh','EjmEp','setBrowserstackInfraFromConfig','IxsEp','platform','nbNmv','startLocalBinary','skipBinaryInitialisation','../ai-sdk-node/bundle','exceptions','RJpOx','WtfjR','disableAutoCaptureLogs','version','270726FccpHo','EDS_URL','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','35DJZcBA','getCentralUser','VlVjv','join','rdthg','FqiaX','setupTCGAuth','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','setProxySettings','getAccessKey','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','toString','qMEen','478323XYMkBm','SIGTERM','requireSeleniumWebdriverCheck','measureWrapper','cjtHW','warn','testContextOptions','setupKeepAlive','xEZRd','iIdNi','exitHandler','captureError','../hubAllocationMethods','eZYpK','./testhub/testhubHandler','isRunning','startMonitoring','\x20with\x20error\x20','No\x20config\x20provided.','pItoD','BrowserstackHealing.init','handled','central_scanner','unhandledRejection','setLogLevel','QVakR','689997OuZqYg','TCG_AUTH_FAILURE','CkMHA','./logger','YWPMQ','AI_PROXY_FAILURE','util','EnLca','toLowerCase','uuid','iWBth','setCLICaps','./performance/constants','beforeExit','format','BrowserstackHealingInitFailed','OvUhP','userName\x20or\x20accessKey\x20is\x20not\x20defined','bind','isHealingEnabled','\x20with\x20response\x20','Error\x20in\x20writing\x20events\x20to\x20file\x20','setupTcgConfigFile','uqhaT','turboScaleUrl','hoXGo','customRepeaters','true','close','tgNsD','Failed\x20to\x20send\x20data\x20to\x20','getLocalIdentifier','1|6|5|7|3|4|2|0','info','init','ZJWxD','unhandledErrors','initialize','dVTCz','HfGsu','11|5|8|21|15|3|14|12|18|6|9|1|19|20|2|13|16|7|10|4|0|17','ZJbuA','rTBNQ','IKcdk','uoSoa','fireFunnelTestEvent','ebEHZ','SIGHUP','end','Data\x20sent\x20successfully\x20to\x20','checkStopLocalBinaryOnExit','oXOgz','stopBrowserstackLocal','config','compareVersions','NxqOl','Error\x20occured\x20while\x20stopping\x20percy','isTurboScaleSession','race','selfHeal','TCG_DOWN','errorMessage','proxy','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','win32','default','sanitizeCaps','Error\x20in\x20sending\x20testhub\x20stop:\x20','3235504xlEqpX','split','getFinalCaps','Error\x20occured\x20while\x20stopping\x20local\x20binary','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','BROWSERSTACK_PERCY','TCG_URL','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','FjuBM','./timeoutPromise','kJpkP','TCG_AUTH_TIMEOUT','killSignal','generateLocalIdentifier','aiHeal:tcgAuth','isAuthenticated','SCSlx','setupBrowserstackLocal','isTrue','jZWvy','isUndefined','platforms','Ozrld','cAQMr','path','QbkAw','userName','turboScaleGridDetails','status','accessKey','JSeIe','INVALID_INIT_RESP_WITH_USER_IMPACT','playwrightUrl','../bin/utils/constants','./utilities','message','getInstance','enkhw','Error\x20in\x20percy\x20setup\x20','MJrwq'];a81_0x2c8c=function(){return _0x15d13f;};return a81_0x2c8c();}class BrowserStackSetup{constructor(_0x3c4f66,_0x13e29e){const _0x2542ee=a81_0x263716,_0x19cc38={'MAjcK':_0x2542ee(0x2c8),'ejvsa':function(_0x3ce308){return _0x3ce308();},'kWZlM':_0x2542ee(0x298)},_0x58f34f=_0x19cc38['MAjcK']['split']('|');let _0x32acc7=0x0;while(!![]){switch(_0x58f34f[_0x32acc7++]){case'0':helper[_0x2542ee(0x29e)](this[_0x2542ee(0x1cf)],this['cliConfig'],this['envConfig']);continue;case'1':global[_0x2542ee(0x229)]=_0x13e29e;continue;case'2':helper[_0x2542ee(0x26a)](this['config'],this[_0x2542ee(0x22c)]);continue;case'3':this[_0x2542ee(0x1cf)]=helper['readConfig'](helper[_0x2542ee(0x20f)](_0x3c4f66));continue;case'4':helper[_0x2542ee(0x228)](this[_0x2542ee(0x1cf)]);continue;case'5':this[_0x2542ee(0x22c)]=helper[_0x2542ee(0x2ab)](_0x3c4f66);continue;case'6':this[_0x2542ee(0x22f)]=_0x19cc38[_0x2542ee(0x230)](uuidv4);continue;case'7':this[_0x2542ee(0x1cf)][_0x2542ee(0x28c)][_0x2542ee(0x23b)]=!helper[_0x2542ee(0x250)]()||helper[_0x2542ee(0x1f0)](this['config'][_0x2542ee(0x28c)]['skipSessionName']);continue;case'8':this[_0x2542ee(0x213)]=helper['setEnvCaps']();continue;case'9':this[_0x2542ee(0x229)]=_0x13e29e;continue;case'10':helper[_0x2542ee(0x1e0)](this[_0x2542ee(0x1cf)],this[_0x2542ee(0x22c)],this[_0x2542ee(0x213)]);continue;case'11':this[_0x2542ee(0x2c4)]=[];continue;case'12':this[_0x2542ee(0x1cf)][_0x2542ee(0x28c)]=this[_0x2542ee(0x1cf)][_0x2542ee(0x28c)]||{};continue;case'13':helper[_0x2542ee(0x241)](this['config']);continue;case'14':this['config'][_0x2542ee(0x1f3)]=this[_0x2542ee(0x1cf)]['platforms']||[];continue;case'15':this[_0x2542ee(0x210)]=null;continue;case'16':this[_0x2542ee(0x1cf)][_0x2542ee(0x28c)][_0x2542ee(0x248)]=!helper[_0x2542ee(0x250)]()||helper['isTrue'](this[_0x2542ee(0x1cf)][_0x2542ee(0x28c)]['skipSessionStatus']);continue;case'17':PerformanceTester[_0x2542ee(0x296)]();continue;case'18':this[_0x2542ee(0x1d7)]={};continue;case'19':if(helper[_0x2542ee(0x1f2)](this['config']))throw new Error(_0x19cc38[_0x2542ee(0x232)]);continue;case'20':if(this['config'][_0x2542ee(0x240)])throw new Error(this[_0x2542ee(0x1cf)][_0x2542ee(0x240)]);continue;case'21':this[_0x2542ee(0x219)]=null;continue;}break;}}[a81_0x263716(0x227)](_0x377e79){const _0x3e29b2=a81_0x263716,_0x2143e9={'VlVjv':_0x3e29b2(0x2b1),'cLGVj':function(_0x4d1c80,_0x7c9087){return _0x4d1c80===_0x7c9087;},'jhjdm':'integrations','OvUhP':_0x3e29b2(0x20c),'uqhaT':function(_0x3912f3,_0x22ccf5){return _0x3912f3<_0x22ccf5;},'RJpOx':function(_0x4a1d7a,_0x330845){return _0x4a1d7a(_0x330845);},'IKcdk':_0x3e29b2(0x24e),'PBHWs':function(_0x50ba75,_0x4d0d9d){return _0x50ba75===_0x4d0d9d;},'ZJbuA':_0x3e29b2(0x22e),'hdRhJ':_0x3e29b2(0x283),'QbkAw':'parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','jZWvy':_0x3e29b2(0x287),'XWnUi':_0x3e29b2(0x25b),'HzSlZ':_0x3e29b2(0x1c9),'JSeIe':function(_0x1a3d1d,_0x269fb1){return _0x1a3d1d!==_0x269fb1;},'NxqOl':_0x3e29b2(0x1da),'JNsMa':_0x3e29b2(0x25a),'iIdNi':_0x3e29b2(0x225),'FqiaX':'SIGBREAK','rXLnr':_0x3e29b2(0x2ad)},_0x566fa0=this['framework'];global['config']=this[_0x3e29b2(0x1cf)],helper[_0x3e29b2(0x1dc)](this[_0x3e29b2(0x1cf)]),this['killSignal']=null,global['sdkRunId']=this[_0x3e29b2(0x22f)],logger['info']('SDK\x20run\x20started\x20with\x20id:\x20'+this[_0x3e29b2(0x22f)]),!this[_0x3e29b2(0x1cf)][_0x3e29b2(0x24f)]&&(this[_0x3e29b2(0x1cf)][_0x3e29b2(0x24f)]=this[_0x3e29b2(0x1cf)]['localOptions']||{});if(helper[_0x3e29b2(0x1f2)](helper[_0x3e29b2(0x264)](this[_0x3e29b2(0x1cf)]))||helper['isUndefined'](helper[_0x3e29b2(0x282)](this[_0x3e29b2(0x1cf)])))throw new Error(_0x2143e9[_0x3e29b2(0x27b)]);helper[_0x3e29b2(0x263)](this[_0x3e29b2(0x1cf)])&&helper['isUndefined'](helper[_0x3e29b2(0x2bf)](this['config']))&&(!helper[_0x3e29b2(0x1f2)](this[_0x3e29b2(0x1cf)][_0x3e29b2(0x24f)])&&_0x2143e9['cLGVj'](this['config']['browserStackLocalOptions'][_0x3e29b2(0x25d)],Object)?!helper[_0x3e29b2(0x1f0)](this['config'][_0x3e29b2(0x24f)][_0x3e29b2(0x26f)])&&(this['config'][_0x3e29b2(0x24f)]['localIdentifier']=helper[_0x3e29b2(0x1eb)]()):this[_0x3e29b2(0x1cf)]['browserStackLocalOptions']={'localIdentifier':helper[_0x3e29b2(0x1eb)]()});this[_0x3e29b2(0x1cf)][_0x3e29b2(0x24f)]['skipBinaryInitialisation']=helper[_0x3e29b2(0x1f0)](this[_0x3e29b2(0x1cf)][_0x3e29b2(0x24f)][_0x3e29b2(0x26f)]),helper['setHandlePWError'](this[_0x3e29b2(0x1cf)]);if(_0x2143e9[_0x3e29b2(0x254)](_0x566fa0,_0x2143e9[_0x3e29b2(0x255)]))return;this[_0x3e29b2(0x249)]();process[_0x3e29b2(0x237)][_0x3e29b2(0x222)]&&(this[_0x3e29b2(0x1cf)]['turboScale']=helper[_0x3e29b2(0x1f0)](process[_0x3e29b2(0x237)]['BROWSERSTACK_TURBOSCALE']),this[_0x3e29b2(0x1cf)][_0x3e29b2(0x243)]=this[_0x3e29b2(0x1cf)][_0x3e29b2(0x243)]||{});helper['isTurboScaleSession'](this[_0x3e29b2(0x1cf)])&&(process[_0x3e29b2(0x237)][_0x3e29b2(0x222)]=!![]);if(!helper[_0x3e29b2(0x250)]()){try{process[_0x3e29b2(0x237)][_0x3e29b2(0x214)]=_0x566fa0,utilities[_0x3e29b2(0x1c7)](_0x2143e9[_0x3e29b2(0x2b0)],{},this[_0x3e29b2(0x1cf)],this[_0x3e29b2(0x229)]);}catch(_0x307867){logger['debug']('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x307867);}return;}helper[_0x3e29b2(0x288)](_0x566fa0)&&(_0x2143e9[_0x3e29b2(0x2b7)](_0x2143e9[_0x3e29b2(0x272)](parseInt,helper[_0x3e29b2(0x208)](_0x2143e9[_0x3e29b2(0x1c5)])),0x3)&&(this[_0x3e29b2(0x1cf)][_0x3e29b2(0x256)]=![]),_0x2143e9['PBHWs'](helper[_0x3e29b2(0x1d0)](helper[_0x3e29b2(0x208)](_0x2143e9[_0x3e29b2(0x1c5)]),_0x2143e9[_0x3e29b2(0x1c3)]),0x1)&&(this['config'][_0x3e29b2(0x256)]=!![]));(helper[_0x3e29b2(0x1f2)](this[_0x3e29b2(0x1cf)][_0x3e29b2(0x1f3)])||helper['isUndefined'](this[_0x3e29b2(0x1cf)][_0x3e29b2(0x1f3)][_0x3e29b2(0x251)]))&&(helper[_0x3e29b2(0x1f2)](this['config'][_0x3e29b2(0x20d)])?logger[_0x3e29b2(0x2c1)](_0x2143e9['hdRhJ']):logger[_0x3e29b2(0x28b)](_0x2143e9[_0x3e29b2(0x1f7)]),this[_0x3e29b2(0x1cf)]['platforms']=[]);!this[_0x3e29b2(0x1cf)]['testContextOptions']&&(this[_0x3e29b2(0x1cf)][_0x3e29b2(0x28c)]={});try{process['env'][_0x3e29b2(0x214)]=_0x377e79['_'][0x0],utilities[_0x3e29b2(0x1c7)](_0x2143e9[_0x3e29b2(0x2b0)],{},this['config'],this['framework']);}catch(_0x5cd445){logger[_0x3e29b2(0x22a)](_0x3e29b2(0x1e2)+_0x5cd445);}!this[_0x3e29b2(0x1cf)][_0x3e29b2(0x274)]&&logger['info'](constants['AUTOLOGCAPTURE_NOTIFICATION']),this[_0x3e29b2(0x259)]=this[_0x3e29b2(0x259)][_0x3e29b2(0x2b2)](this),process['on'](_0x2143e9[_0x3e29b2(0x1f1)],this[_0x3e29b2(0x259)]),process['on'](_0x2143e9['XWnUi'],this['intExitHandler']),process['on'](_0x2143e9['HzSlZ'],this['intExitHandler']),_0x2143e9[_0x3e29b2(0x1fc)](process['platform'],_0x2143e9[_0x3e29b2(0x1d1)])?(process['on'](_0x2143e9['JNsMa'],this[_0x3e29b2(0x259)]),process['on'](_0x2143e9[_0x3e29b2(0x28f)],this[_0x3e29b2(0x259)])):process['on'](_0x2143e9[_0x3e29b2(0x27e)],this[_0x3e29b2(0x259)]),process['on'](_0x2143e9[_0x3e29b2(0x221)],this[_0x3e29b2(0x290)]());}async[a81_0x263716(0x2c5)](_0x50e6b4){const _0x54936d=a81_0x263716,_0x2afa32={'xEZRd':'ats-repeater','yzxXf':_0x54936d(0x257),'qMEen':_0x54936d(0x2bb),'EnLca':function(_0xecb427,_0x134363){return _0xecb427===_0x134363;},'iWBth':_0x54936d(0x209),'dVTCz':function(_0x3f9fbf,_0x20685c){return _0x3f9fbf+_0x20685c;},'agWfl':_0x54936d(0x235),'rTBNQ':function(_0x2e22eb,_0x396e50){return _0x2e22eb(_0x396e50);},'qDEqL':'codeceptjs'};this[_0x54936d(0x227)](_0x50e6b4);if(helper['isTurboScaleSession'](this[_0x54936d(0x1cf)])){const _0x47a099=await helper[_0x54936d(0x233)](this[_0x54936d(0x1cf)]);this[_0x54936d(0x1cf)][_0x54936d(0x1f9)]=_0x47a099,_0x47a099['isTrialGrid']&&helper['isNotUndefined'](this[_0x54936d(0x1cf)][_0x54936d(0x219)])&&helper[_0x54936d(0x1f0)](this[_0x54936d(0x1cf)][_0x54936d(0x219)])&&(this[_0x54936d(0x1cf)][_0x54936d(0x24f)][_0x54936d(0x21e)]=_0x2afa32[_0x54936d(0x28e)],this[_0x54936d(0x1cf)][_0x54936d(0x24f)][_0x2afa32[_0x54936d(0x216)]]=_0x47a099[_0x54936d(0x2ba)][_0x54936d(0x27c)](','),this[_0x54936d(0x1cf)][_0x54936d(0x24f)]['forceLocal']=_0x2afa32[_0x54936d(0x285)]),this[_0x54936d(0x1cf)][_0x54936d(0x2b8)]=_0x47a099[_0x54936d(0x23c)],this[_0x54936d(0x229)]&&_0x2afa32[_0x54936d(0x2a7)](this[_0x54936d(0x229)][_0x54936d(0x2a8)](),_0x2afa32['iWBth'])?this[_0x54936d(0x1cf)][_0x54936d(0x2b8)]=_0x2afa32[_0x54936d(0x2c6)](_0x47a099[_0x54936d(0x1fe)],_0x2afa32['agWfl']):constants[_0x54936d(0x260)]=helper['getHubUrl'](this[_0x54936d(0x1cf)]),logger[_0x54936d(0x22a)](_0x54936d(0x280)+constants[_0x54936d(0x260)]);}helper[_0x54936d(0x281)](this[_0x54936d(0x1cf)]),this[_0x54936d(0x28d)](),_0x2afa32[_0x54936d(0x1c4)](setPercyFlag,this),await this[_0x54936d(0x1ef)](),![_0x2afa32['qDEqL'],_0x2afa32[_0x54936d(0x2aa)]]['includes'](this[_0x54936d(0x229)])&&!helper[_0x54936d(0x1d3)](this[_0x54936d(0x1cf)])&&!helper[_0x54936d(0x27a)]()[_0x54936d(0x29c)]&&await this[_0x54936d(0x24b)]();}async['setupPercy'](){const _0x408749=a81_0x263716,_0x50605e={};_0x50605e[_0x408749(0x2a2)]=function(_0x36991a,_0x5e3c62){return _0x36991a===_0x5e3c62;},_0x50605e[_0x408749(0x27d)]=_0x408749(0x211),_0x50605e['EjmEp']='Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.',_0x50605e[_0x408749(0x23d)]='Percy\x20started\x20successfully',_0x50605e[_0x408749(0x2c7)]=_0x408749(0x2bb),_0x50605e[_0x408749(0x21d)]='beforeExit';const _0xd072cc=_0x50605e;if(helper['isTrue'](this[_0x408749(0x1cf)]['percy'])&&(!this['percy']||!this['percy'][_0x408749(0x295)]()))try{this[_0x408749(0x210)]=await percyHelper['startPercy'](this[_0x408749(0x1cf)]);if(!this[_0x408749(0x210)]){process[_0x408749(0x237)][_0x408749(0x1e3)]=_0xd072cc[_0x408749(0x27d)];throw new Error(_0xd072cc[_0x408749(0x269)]);}logger[_0x408749(0x2c1)](_0xd072cc['OgDDU']),process[_0x408749(0x237)][_0x408749(0x1e3)]=_0xd072cc['HfGsu'];let _0x4e6ac9=0x0;const _0x2e45c8=async()=>{const _0x293a2e=_0x408749;_0x4e6ac9++,_0xd072cc[_0x293a2e(0x2a2)](_0x4e6ac9,0x1)&&await this[_0x293a2e(0x20b)]();};process['on'](_0xd072cc[_0x408749(0x21d)],_0x2e45c8);}catch(_0x234604){process[_0x408749(0x237)][_0x408749(0x1e3)]=_0xd072cc['rdthg'],logger[_0x408749(0x22a)](_0x408749(0x204)+_0x234604);throw new Error(_0x234604[_0x408749(0x284)]());}}async[a81_0x263716(0x20b)](){const _0x5ee828=a81_0x263716,_0x3b9750={};_0x3b9750['LIWQd']='Percy\x20stopped',_0x3b9750[_0x5ee828(0x21c)]=_0x5ee828(0x1d2);const _0x62cd7f=_0x3b9750;if(this[_0x5ee828(0x210)]&&this['percy']['isRunning']())try{await percyHelper['stopPercy'](this[_0x5ee828(0x210)]),logger[_0x5ee828(0x2c1)](_0x62cd7f['LIWQd']);}catch(_0x52549c){logger[_0x5ee828(0x240)](_0x62cd7f[_0x5ee828(0x21c)],_0x52549c['message']);}}async['setupBrowserstackLocal'](){const _0x5a41e1=a81_0x263716,_0x3cadd1={};_0x3cadd1[_0x5a41e1(0x205)]=_0x5a41e1(0x218),_0x3cadd1[_0x5a41e1(0x268)]=_0x5a41e1(0x245);const _0x44fbb3=_0x3cadd1;if(helper[_0x5a41e1(0x250)]()&&helper[_0x5a41e1(0x1f0)](this['config'][_0x5a41e1(0x219)])&&(!this[_0x5a41e1(0x219)]||!this['browserstackLocal'][_0x5a41e1(0x295)]()))try{if(this[_0x5a41e1(0x1cf)][_0x5a41e1(0x24f)][_0x5a41e1(0x26f)]){logger[_0x5a41e1(0x22a)](_0x44fbb3[_0x5a41e1(0x205)]);return;}this['browserstackLocal']=await helper[_0x5a41e1(0x26e)](this['config']),logger['info'](_0x44fbb3[_0x5a41e1(0x268)]);}catch(_0x2905c7){logger[_0x5a41e1(0x22a)](_0x2905c7);throw new Error(_0x2905c7['toString']());}}async[a81_0x263716(0x1ce)](){const _0x5487c8=a81_0x263716,_0x5602d9={};_0x5602d9[_0x5487c8(0x25c)]='Local\x20binary\x20stopped',_0x5602d9[_0x5487c8(0x25f)]=_0x5487c8(0x1e1);const _0x58fda5=_0x5602d9;if(this['browserstackLocal']&&this['browserstackLocal'][_0x5487c8(0x295)]())try{await helper['stopLocalBinary'](this[_0x5487c8(0x219)]),logger['info'](_0x58fda5[_0x5487c8(0x25c)]);}catch(_0x546678){logger[_0x5487c8(0x240)](_0x58fda5[_0x5487c8(0x25f)],_0x546678[_0x5487c8(0x201)]);}}async[a81_0x263716(0x24b)](){const _0x3eff50=a81_0x263716;return PerformanceTester[_0x3eff50(0x289)](PerformanceAutEvents[_0x3eff50(0x267)],async()=>{const _0x12bda1=_0x3eff50;await hubAllocator['allocateHub'](this[_0x12bda1(0x1cf)]);})();}async[a81_0x263716(0x27f)](){const _0x33c20b=a81_0x263716,_0x181d34={'kJpkP':function(_0x1e0b70,_0x4619fc){return _0x1e0b70(_0x4619fc);},'cjtHW':_0x33c20b(0x270),'rJNtQ':function(_0x47dc4d,_0x18f0b6,_0x50d66e,_0x2a1768,_0x342a93,_0x1d1403,_0x3f572c){return _0x47dc4d(_0x18f0b6,_0x50d66e,_0x2a1768,_0x342a93,_0x1d1403,_0x3f572c);},'SCSlx':'BrowserstackHealing.init\x20method\x20timed\x20out','WtfjR':_0x33c20b(0x2af),'sMZXx':_0x33c20b(0x253),'oXOgz':_0x33c20b(0x29a),'eZYpK':function(_0xb6d94c,_0x3759ba){return _0xb6d94c(_0x3759ba);},'enkhw':function(_0x1ebbb9,_0xc2878b){return _0x1ebbb9===_0xc2878b;},'cAQMr':_0x33c20b(0x2bb),'uKbos':function(_0x5592d8,_0x14bfde){return _0x5592d8===_0x14bfde;},'nbNmv':function(_0x4ea83c,_0x17b655){return _0x4ea83c===_0x17b655;},'ebEHZ':_0x33c20b(0x20a),'hoXGo':function(_0x48f79e,_0x4f2375){return _0x48f79e===_0x4f2375;},'tgNsD':_0x33c20b(0x1d9),'ZlEsl':_0x33c20b(0x278),'FjuBM':function(_0xed59f6,_0x173075){return _0xed59f6(_0x173075);},'Ozrld':_0x33c20b(0x1e5),'KWvBD':function(_0x5b65ab,_0x1835c7){return _0x5b65ab>=_0x1835c7;},'YWPMQ':function(_0x5aedca,_0x2176f4){return _0x5aedca<_0x2176f4;},'GrWdL':'tcg\x20config\x20setup\x20successful.','zwXhA':_0x33c20b(0x1ec),'cJzFF':function(_0x454aea){return _0x454aea();}},_0xac7bd5=PerformanceTester['measureWrapper'](_0x181d34['zwXhA'],async()=>{const _0x1bf433=_0x33c20b;try{const _0x273a81=new Date(),_0x3be1a2=helper[_0x1bf433(0x261)](this['config']),_0x4a3ada=_0x181d34[_0x1bf433(0x1e8)](require,path[_0x1bf433(0x27c)](__dirname,_0x181d34[_0x1bf433(0x28a)])),_0x3f21d6=_0x181d34['rJNtQ'](timeoutPromise,constants[_0x1bf433(0x1e9)],_0x181d34[_0x1bf433(0x1ee)],_0x181d34[_0x1bf433(0x273)],_0x273a81,this[_0x1bf433(0x1cf)],this[_0x1bf433(0x229)]),_0x3c1b9b={'tcgUrl':constants[_0x1bf433(0x1e4)],'sdkVersion':_0x181d34['kJpkP'](require,_0x181d34[_0x1bf433(0x236)])[_0x1bf433(0x275)],'methodUsed':_0x181d34[_0x1bf433(0x1cd)],'proxyConfig':_0x3be1a2,'os':os[_0x1bf433(0x26c)]()};if(_0x3be1a2&&_0x3be1a2['proxyUrl']){utilities[_0x1bf433(0x1c7)](constants[_0x1bf433(0x2a5)],_0x3c1b9b,this[_0x1bf433(0x1cf)],this['framework']);return;}const _0xb1c440={};_0xb1c440[_0x1bf433(0x1d8)]=_0x3be1a2;const _0x188b81=await Promise[_0x1bf433(0x1d4)]([_0x4a3ada[_0x1bf433(0x2c2)](this[_0x1bf433(0x1cf)][_0x1bf433(0x1fb)],this[_0x1bf433(0x1cf)][_0x1bf433(0x1f8)],constants[_0x1bf433(0x1e4)],_0x181d34[_0x1bf433(0x293)](require,_0x181d34[_0x1bf433(0x236)])[_0x1bf433(0x275)],_0xb1c440)[_0x1bf433(0x262)](_0x1f6f96=>{return _0x3f21d6['cancel'](),_0x1f6f96;}),_0x3f21d6]);_0x188b81[_0x1bf433(0x2b3)]=_0x181d34[_0x1bf433(0x203)](_0x188b81[_0x1bf433(0x2b3)],_0x181d34[_0x1bf433(0x1f5)])||_0x181d34[_0x1bf433(0x244)](_0x188b81[_0x1bf433(0x2b3)],!![]);const _0x276ec8=_0x181d34[_0x1bf433(0x26d)](this[_0x1bf433(0x1cf)][_0x1bf433(0x1d5)],!![])||_0x181d34[_0x1bf433(0x26d)](this[_0x1bf433(0x1cf)][_0x1bf433(0x1d5)],_0x181d34[_0x1bf433(0x1f5)]);if(_0x181d34['uKbos'](_0x188b81[_0x1bf433(0x201)],constants[_0x1bf433(0x22b)])&&_0x276ec8)logger[_0x1bf433(0x2c1)](_0x181d34[_0x1bf433(0x1c8)]);else{if(!_0x188b81[_0x1bf433(0x1ed)]&&_0x181d34[_0x1bf433(0x2b9)](_0x188b81[_0x1bf433(0x1fa)],0x1f7)&&_0x276ec8)logger[_0x1bf433(0x2c1)](_0x181d34[_0x1bf433(0x2bd)]),utilities[_0x1bf433(0x1c7)](constants[_0x1bf433(0x1d6)],_0x3c1b9b,this[_0x1bf433(0x1cf)],this[_0x1bf433(0x229)]);else{if(!_0x188b81['isAuthenticated']&&_0x276ec8){logger[_0x1bf433(0x2c1)](_0x181d34[_0x1bf433(0x220)]);const _0x2e8467={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x181d34[_0x1bf433(0x1e6)](require,_0x181d34[_0x1bf433(0x236)])[_0x1bf433(0x275)],'methodUsed':_0x181d34[_0x1bf433(0x1cd)],'proxyConfig':_0x3be1a2,'os':os[_0x1bf433(0x26c)]()};utilities[_0x1bf433(0x1c7)](constants[_0x1bf433(0x2a1)],_0x2e8467,this[_0x1bf433(0x1cf)],this[_0x1bf433(0x229)]);}else{if(_0x188b81['isAuthenticated']&&!_0x188b81[_0x1bf433(0x2b3)]&&_0x276ec8)logger[_0x1bf433(0x2c1)](_0x181d34[_0x1bf433(0x1f4)]);else{if(_0x181d34[_0x1bf433(0x239)](_0x188b81[_0x1bf433(0x1fa)],0xc8)&&_0x181d34[_0x1bf433(0x2a4)](_0x188b81['status'],0x12c))utilities[_0x1bf433(0x1c7)](constants[_0x1bf433(0x24a)],_0x3c1b9b,this[_0x1bf433(0x1cf)],this[_0x1bf433(0x229)]);else{if(_0x181d34[_0x1bf433(0x239)](_0x188b81[_0x1bf433(0x1fa)],0x190))_0x3c1b9b[_0x1bf433(0x1fa)]=_0x188b81['status'],utilities[_0x1bf433(0x1c7)](constants[_0x1bf433(0x238)],_0x3c1b9b,this[_0x1bf433(0x1cf)],this[_0x1bf433(0x229)]);else!_0x188b81[_0x1bf433(0x1fa)]&&utilities['fireFunnelTestEvent'](constants[_0x1bf433(0x1fd)],_0x3c1b9b,this[_0x1bf433(0x1cf)],this[_0x1bf433(0x229)]);}}}}}if(_0x188b81[_0x1bf433(0x1ed)]&&_0x188b81[_0x1bf433(0x2b3)]){const _0x115aa2={};_0x115aa2['tcgAuthConfig']=_0x188b81;const _0x1ec077=_0x115aa2;_0x3be1a2&&(_0x1ec077['proxyConfig']=_0x3be1a2),_0x1ec077[_0x1bf433(0x229)]=this[_0x1bf433(0x229)],_0x1ec077['bstackConfig']=this[_0x1bf433(0x1cf)],helper[_0x1bf433(0x2b6)](_0x1ec077),logger[_0x1bf433(0x22a)](_0x181d34['GrWdL']);}}catch(_0x1df0ad){logger[_0x1bf433(0x22a)]('Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20'+(_0x1df0ad[_0x1bf433(0x201)]?_0x1df0ad[_0x1bf433(0x201)]:''));}});await _0x181d34[_0x33c20b(0x223)](_0xac7bd5);}['setupKeepAlive'](){const _0xc33f51=a81_0x263716,_0x3930f7={'GyqvA':function(_0x31aa00,_0x3684d2){return _0x31aa00(_0x3684d2);},'LMled':_0xc33f51(0x21a)};_0x3930f7[_0xc33f51(0x266)](require,_0x3930f7[_0xc33f51(0x23a)])();}['handleExceptions'](){const _0x54ae29=a81_0x263716,_0x2e88a5={};_0x2e88a5[_0x54ae29(0x299)]=_0x54ae29(0x29d),_0x2e88a5['CekNb']=_0x54ae29(0x23e);const _0x2931da=_0x2e88a5,_0x23edd7=_0x1aec89=>{const _0x458342=_0x54ae29;logger['error'](_0x1aec89[_0x458342(0x201)]),logger[_0x458342(0x22a)](util['format'](_0x1aec89)),this[_0x458342(0x2c4)][_0x458342(0x252)](util[_0x458342(0x2ae)]('%j',_0x1aec89)),PerformanceTester[_0x458342(0x291)](_0x1aec89);};process['on'](_0x2931da['pItoD'],_0x23edd7),process['on'](_0x2931da[_0x54ae29(0x212)],_0x23edd7);}async[a81_0x263716(0x259)](_0xf9f8c7){const _0x7cd045=a81_0x263716,_0x5c4b36={};_0x5c4b36[_0x7cd045(0x22d)]=_0x7cd045(0x2c0),_0x5c4b36[_0x7cd045(0x217)]=function(_0x5ce62e,_0x3c4680){return _0x5ce62e+_0x3c4680;},_0x5c4b36['IxsEp']=_0x7cd045(0x234),_0x5c4b36[_0x7cd045(0x242)]=_0x7cd045(0x29b),_0x5c4b36[_0x7cd045(0x2c3)]=function(_0x4a6f70,_0x4cc61e){return _0x4a6f70+_0x4cc61e;};const _0x25eb3c=_0x5c4b36,_0xa74be0=_0x25eb3c[_0x7cd045(0x22d)][_0x7cd045(0x1df)]('|');let _0x16dd74=0x0;while(!![]){switch(_0xa74be0[_0x16dd74++]){case'0':await TestHubHandler[_0x7cd045(0x265)](_0xf9f8c7);continue;case'1':logger&&logger[_0x7cd045(0x2bc)]();continue;case'2':await BrowserstackCLI['getInstance']()[_0x7cd045(0x265)]();continue;case'3':logger[_0x7cd045(0x2c1)](_0x25eb3c[_0x7cd045(0x217)](_0x25eb3c[_0x7cd045(0x26b)],_0xf9f8c7));continue;case'4':this[_0x7cd045(0x1ea)]=_0xf9f8c7;continue;case'5':if(this[_0x25eb3c[_0x7cd045(0x217)](_0x25eb3c[_0x7cd045(0x242)],_0xf9f8c7)])return;continue;case'6':fileLogger&&fileLogger[_0x7cd045(0x2bc)]();continue;case'7':this[_0x25eb3c[_0x7cd045(0x2c3)](_0x25eb3c['YiEYT'],_0xf9f8c7)]=!![];continue;}break;}}[a81_0x263716(0x290)](){const _0x1e7db3=a81_0x263716,_0x45f5e4={'BSMqw':function(_0xedb08a,_0x28f004){return _0xedb08a===_0x28f004;},'QVakR':_0x1e7db3(0x20e),'XCBuY':function(_0xd1adb0,_0x40bc2a){return _0xd1adb0>_0x40bc2a;},'uoSoa':function(_0x34fab8,_0x54533d){return _0x34fab8>_0x54533d;},'HYLTJ':function(_0x10c04d){return _0x10c04d();},'PxuWT':_0x1e7db3(0x24d)};let _0xa0a876=0x0;return async()=>{const _0x2f558a=_0x1e7db3;_0xa0a876++;if(_0x45f5e4[_0x2f558a(0x24c)](_0xa0a876,0x1)){helper[_0x2f558a(0x1cc)](this[_0x2f558a(0x229)])&&await this[_0x2f558a(0x1ce)]();try{logger['debug'](_0x45f5e4[_0x2f558a(0x29f)]),await BrowserstackCLI[_0x2f558a(0x202)]()[_0x2f558a(0x265)]('1'),await TestHubHandler[_0x2f558a(0x265)](_0xa0a876);}catch(_0x164fcc){logger[_0x2f558a(0x22a)](_0x2f558a(0x1dd)+util[_0x2f558a(0x2ae)](_0x164fcc));}PerformanceTester[_0x2f558a(0x1ca)](PerformanceEvents[_0x2f558a(0x21f)]);if(PerformanceTester['isEnabled']()){const {measures:_0x9e536c,errors:_0x350a77}=await PerformanceTester['finalize'](),_0x6ba79c={};if(_0x9e536c&&_0x45f5e4['XCBuY'](_0x9e536c['length'],0x0)||_0x350a77&&_0x45f5e4[_0x2f558a(0x1c6)](_0x350a77[_0x2f558a(0x251)],0x0)){const _0x305ff4={};_0x305ff4[_0x2f558a(0x21b)]=_0x9e536c,_0x305ff4[_0x2f558a(0x271)]=_0x350a77,Object['assign'](_0x6ba79c,_0x305ff4);}try{const _0x1e5a60=await helper['sendToEDS'](_0x6ba79c,this[_0x2f558a(0x1cf)]);logger[_0x2f558a(0x22a)](_0x2f558a(0x1cb)+constants[_0x2f558a(0x277)]+_0x2f558a(0x2b4)+_0x1e5a60['statusCode']);}catch(_0xf84a62){logger[_0x2f558a(0x22a)](_0x2f558a(0x2be)+constants[_0x2f558a(0x277)]+_0x2f558a(0x297)+util[_0x2f558a(0x2ae)](_0xf84a62));}try{fs[_0x2f558a(0x206)](path[_0x2f558a(0x27c)](_0x45f5e4['HYLTJ'](getLogDir),_0x45f5e4[_0x2f558a(0x23f)]),JSON[_0x2f558a(0x226)](_0x6ba79c));}catch(_0x4c192c){logger[_0x2f558a(0x22a)](_0x2f558a(0x2b5)+_0x4c192c);}}}};}}exports[a81_0x263716(0x1db)]=BrowserStackSetup;