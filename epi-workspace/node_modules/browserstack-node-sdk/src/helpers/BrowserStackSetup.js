const a94_0x3995ea=a94_0x4ec9;function a94_0x4cc2(){const _0x34c314=['setupKeepAlive','arAWO','isEnabled','SIGHUP','isLTSSession','?caps=','AI_PROXY_FAILURE','INVALID_INIT_RESP_WITH_USER_IMPACT','DDXgV','generateLocalIdentifier','SIGTERM','allocateHub','TCG_DOWN','setLogDir','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','Error\x20in\x20writing\x20events\x20to\x20file\x20','forceLocal','setProxySettings','getLocalIdentifier','turboScale','format','version','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','UPGRADE_REQUIRED','codeceptjs','BVvsb','eYPHk','vkTDP','accessKey','jlHvO','setCredentialsFromYmlConfig','../ai-sdk-node/bundle','unhandledRejection','preInitialize','EcZyC','turboScaleOptions','fileLogger','customRepeaters','./timeoutPromise','getAccessKey','sanitizeCaps','stringify','status','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','proxyUrl','Local\x20binary\x20stopped','startMonitoring','../hubAllocationMethods','getHubUrl','length','beforeExit','FsmEr','proxy','../bin/utils/clientTroubleshootingService','vtkIU','TCG_URL','toString','kSOFA','LdpBD','true','rNLdo','./performance/performance-tester','TCG_AUTH_TIMEOUT','browserstackLocal','selfHeal','end','setBrowserstackInfraFromConfig','isRunning','jGato','getProxyConfigForTcg','isNotUndefined','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','isUndefined','envConfig','AI_INIT_SUCCESSFUL','assign','path','Data\x20sent\x20successfully\x20to\x20','exceptions','setUpHubUrl','XgNFv','AI_INIT_FAILURE','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','events.json','aiHeal:tcgAuth','reportFinalDetectionState','exitHandler','getFinalCaps','bind','SDK_CLEANUP','Percy\x20started\x20successfully','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','6186360VJiSQV','__isPlaywrightInstalled','\x20with\x20error\x20','setupPercy','hlKeo','isTrue','error','playwright','captureError','DjXDC','default','fireFunnelTestEvent','getPackageVersion','SDK\x20run\x20started\x20with\x20id:\x20','../../package.json','IUMbE','integrations','../bin/v2/modules/loadTestModule','split','1306068WDSxJA','./testhub/utils','isBrowserstackInfra','userName\x20or\x20accessKey\x20is\x20not\x20defined','includes','measures','bpylX','Error\x20in\x20sending\x20testhub\x20stop:\x20','setCLICaps','isTurboScaleSession','sendToEDS','./helper','foOal','pijYd','mYoZY','info','reportProcessInterruptionSituation','gKvPO','unhandledErrors','statusCode','CaTeq','FRAMEWORK','RszKP','startPercy','SIGBREAK','Error\x20occured\x20while\x20stopping\x20local\x20binary','thVoW','mZQWY','./percy/utils','constructor','env','VJIgT','skipBinaryInitialisation','AUTOLOGCAPTURE_NOTIFICATION','setEnvCaps','turboScaleUrl','Zqsrl','isTrialGrid','Error\x20in\x20percy\x20setup\x20','hubUrl','warn','yVcGa','BROWSERSTACK_TURBOSCALE','cCrJc','./utilities','initialize','getCentralUser','ChOnV','ourlf','debug','13235480ldPWOe','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','jwZDq','NiIvg','xYmRB','\x20with\x20response\x20','0|2|4|3|1','skipSessionStatus','SIGINT','tcg\x20config\x20setup\x20successful.','../bin/utils/constants','GFXEu','join','dXICH','setLogLevel','1037814oPsWgt','ihENB','stopBrowserstackLocal','testContextOptions','39MJApTj','pWpva','XiEeY','BROWSERSTACK_PERCY','tcgAuthConfig','oLBvi','selenium-webdriver','Error\x20occured\x20while\x20stopping\x20percy','sLlvC','stopPercy','killSignal','sdkRunId','qNjaN','TCG_AUTH_FAILURE','MCvFA','message','hSgvi','platform','hrncM','writeFileSync','ats-repeater','ZgPEr','UFjAN','42SMhIyc','JJVQF','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','compareVersions','setupBrowserstackLocal','xdTeX','percy','QPXGZ','startLocalBinary','intExitHandler','./performance/constants','./logger','platforms','sJZYG','useW3C','measureWrapper','15250QcaHwi','333480llSdIx','getInstance','push','browserStackLocalOptions','TDSvx','pLMkT','ZmyRB','BrowserstackHealing.init\x20method\x20timed\x20out','5638DwlkhP','zxiKN','zdYEv','./testhub/testhubHandler','qEUHz','central_scanner','isHealingEnabled','requireSeleniumWebdriverCheck','setupTcgConfigFile','BrowserstackHealingInitFailed','JwyFW','4.5.0','winstonLogger','handleExceptions','10224WNlNkK','PIcQo','getTurboScaleGridDetails','custom-repeater','userName','bstackConfig','lkCBP','kISYZ','sHcFZ','cROkC','cSoDf','setupTCGAuth','lFoAC','Calling\x20Build\x20Stop\x20from\x20ExitHandler','NvIxY','nyInM','config','playwrightUrl','framework','skipSessionName','stop','jHXRZ','../bin/utils/apiUtilityMethods','./setKeepAlive','../bin/v2/browserstackCLI'];a94_0x4cc2=function(){return _0x34c314;};return a94_0x4cc2();}(function(_0x30cd89,_0x402349){const _0x26bb08=a94_0x4ec9,_0x26d30e=_0x30cd89();while(!![]){try{const _0x2998ea=parseInt(_0x26bb08(0x26a))/0x1*(-parseInt(_0x26bb08(0x18f))/0x2)+parseInt(_0x26bb08(0x225))/0x3+parseInt(_0x26bb08(0x212))/0x4+-parseInt(_0x26bb08(0x187))/0x5+parseInt(_0x26bb08(0x266))/0x6*(-parseInt(_0x26bb08(0x176))/0x7)+-parseInt(_0x26bb08(0x257))/0x8+parseInt(_0x26bb08(0x19d))/0x9*(parseInt(_0x26bb08(0x186))/0xa);if(_0x2998ea===_0x402349)break;else _0x26d30e['push'](_0x26d30e['shift']());}catch(_0x54aa4e){_0x26d30e['push'](_0x26d30e['shift']());}}}(a94_0x4cc2,0xce694));const util=require('util'),os=require('os'),path=require(a94_0x3995ea(0x202)),{v4:uuidv4}=require('uuid'),fs=require('fs'),constants=require(a94_0x3995ea(0x261)),logger=require('./logger')[a94_0x3995ea(0x19b)],fileLogger=require('./logger')[a94_0x3995ea(0x1da)],{getLogDir}=require(a94_0x3995ea(0x181)),helper=require(a94_0x3995ea(0x230)),utilities=require(a94_0x3995ea(0x251)),percyHelper=require(a94_0x3995ea(0x241)),hubAllocator=require(a94_0x3995ea(0x1e5)),PerformanceTester=require(a94_0x3995ea(0x1f3)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a94_0x3995ea(0x180)),{setPercyFlag}=require(a94_0x3995ea(0x226)),TestHubHandler=require(a94_0x3995ea(0x192)),timeoutPromise=require(a94_0x3995ea(0x1dc)),BrowserstackCLI=require(a94_0x3995ea(0x1b5)),LoadTestModule=require(a94_0x3995ea(0x223)),{getEdsInstrumentationAPIUrl}=require(a94_0x3995ea(0x1b3)),ClientTroubleShootingService=require(a94_0x3995ea(0x1eb));function a94_0x4ec9(_0x56f378,_0x3f91eb){const _0x4cc21d=a94_0x4cc2();return a94_0x4ec9=function(_0x4ec913,_0x29688d){_0x4ec913=_0x4ec913-0x16a;let _0x3791a9=_0x4cc21d[_0x4ec913];return _0x3791a9;},a94_0x4ec9(_0x56f378,_0x3f91eb);}class BrowserStackSetup{constructor(_0x3b66b4,_0x8ef012){const _0x2d41a2=a94_0x3995ea,_0x14029e={'mieNF':'7|5|10|6|14|15|9|20|0|17|12|8|19|4|3|16|21|13|18|2|1|11|22','lFoAC':'No\x20config\x20provided.','JJVQF':function(_0xfc365b){return _0xfc365b();}},_0x448e67=_0x14029e['mieNF'][_0x2d41a2(0x224)]('|');let _0x3e862b=0x0;while(!![]){switch(_0x448e67[_0x3e862b++]){case'0':this[_0x2d41a2(0x1ad)][_0x2d41a2(0x269)]=this['config'][_0x2d41a2(0x269)]||{};continue;case'1':helper[_0x2d41a2(0x1c3)](this[_0x2d41a2(0x1ad)]);continue;case'2':helper[_0x2d41a2(0x20d)](this['config'],this['cliConfig'],this[_0x2d41a2(0x1ff)]);continue;case'3':if(this[_0x2d41a2(0x1ad)][_0x2d41a2(0x218)])throw new Error(this[_0x2d41a2(0x1ad)]['error']);continue;case'4':if(helper[_0x2d41a2(0x1fe)](this[_0x2d41a2(0x1ad)]))throw new Error(_0x14029e[_0x2d41a2(0x1a9)]);continue;case'5':helper['normalizeTestReportingEnvVars']();continue;case'6':this[_0x2d41a2(0x1f5)]=null;continue;case'7':this[_0x2d41a2(0x237)]=[];continue;case'8':this[_0x2d41a2(0x1af)]=_0x8ef012;continue;case'9':this['cliConfig']=helper[_0x2d41a2(0x22d)](_0x3b66b4);continue;case'10':this[_0x2d41a2(0x1ff)]=helper[_0x2d41a2(0x247)]();continue;case'11':helper[_0x2d41a2(0x265)](this[_0x2d41a2(0x1ad)],this['cliConfig'],this[_0x2d41a2(0x1ff)]);continue;case'12':this[_0x2d41a2(0x16a)]=_0x14029e[_0x2d41a2(0x177)](uuidv4);continue;case'13':this['config'][_0x2d41a2(0x269)][_0x2d41a2(0x25e)]=!helper[_0x2d41a2(0x227)]()||helper['isTrue'](this['config'][_0x2d41a2(0x269)][_0x2d41a2(0x25e)]);continue;case'14':this['percy']=null;continue;case'15':this[_0x2d41a2(0x1ad)]=helper['readConfig'](helper['getConfigPath'](_0x3b66b4));continue;case'16':helper[_0x2d41a2(0x1f8)](this[_0x2d41a2(0x1ad)],this['cliConfig']);continue;case'17':this['errorMessage']={};continue;case'18':this['config']['testContextOptions'][_0x2d41a2(0x1b0)]=!helper[_0x2d41a2(0x227)]()||helper['isTrue'](this[_0x2d41a2(0x1ad)][_0x2d41a2(0x269)][_0x2d41a2(0x1b0)]);continue;case'19':global[_0x2d41a2(0x1af)]=_0x8ef012;continue;case'20':this['config'][_0x2d41a2(0x182)]=this[_0x2d41a2(0x1ad)]['platforms']||[];continue;case'21':helper[_0x2d41a2(0x1d4)](this[_0x2d41a2(0x1ad)]);continue;case'22':PerformanceTester[_0x2d41a2(0x1e4)]();continue;}break;}}[a94_0x3995ea(0x1d7)](_0x317503){const _0xb12cdb=a94_0x3995ea,_0x4b5b6a={'cROkC':_0xb12cdb(0x228),'jHXRZ':function(_0x5e7a7d,_0x43ff52){return _0x5e7a7d===_0x43ff52;},'CaTeq':_0xb12cdb(0x222),'jlHvO':'SDKTestAttempted','cSoDf':function(_0x592168,_0x206634){return _0x592168<_0x206634;},'eYPHk':function(_0x52d98f,_0x3edbf0){return _0x52d98f(_0x3edbf0);},'FsmEr':_0xb12cdb(0x270),'ICQpD':function(_0x3b310f,_0x1b4a08){return _0x3b310f===_0x1b4a08;},'QPXGZ':_0xb12cdb(0x19a),'XiEeY':_0xb12cdb(0x1e1),'foOal':'parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','RszKP':_0xb12cdb(0x1c0),'XgNFv':_0xb12cdb(0x25f),'nyLEc':_0xb12cdb(0x1b9),'sLlvC':function(_0x45ebc2,_0x24d3b0){return _0x45ebc2!==_0x24d3b0;},'lkCBP':'win32','thVoW':'SIGABRT','PIcQo':'SIGQUIT','BNpzu':_0xb12cdb(0x23d),'PmBJq':_0xb12cdb(0x1e8)},_0x394573=this[_0xb12cdb(0x1af)];global[_0xb12cdb(0x1ad)]=this[_0xb12cdb(0x1ad)],helper[_0xb12cdb(0x1de)](this[_0xb12cdb(0x1ad)]),this[_0xb12cdb(0x274)]=null,global['sdkRunId']=this[_0xb12cdb(0x16a)],logger['info'](_0xb12cdb(0x21f)+this[_0xb12cdb(0x16a)]),!this['config']['browserStackLocalOptions']&&(this['config'][_0xb12cdb(0x18a)]=this['config']['localOptions']||{});if(helper[_0xb12cdb(0x1fe)](helper['getUserName'](this[_0xb12cdb(0x1ad)]))||helper[_0xb12cdb(0x1fe)](helper[_0xb12cdb(0x1dd)](this[_0xb12cdb(0x1ad)])))throw new Error(_0x4b5b6a[_0xb12cdb(0x1a6)]);helper['getLocalConfig'](this[_0xb12cdb(0x1ad)])&&helper[_0xb12cdb(0x1fe)](helper[_0xb12cdb(0x1c8)](this[_0xb12cdb(0x1ad)]))&&(!helper[_0xb12cdb(0x1fe)](this[_0xb12cdb(0x1ad)][_0xb12cdb(0x18a)])&&_0x4b5b6a[_0xb12cdb(0x1b2)](this[_0xb12cdb(0x1ad)][_0xb12cdb(0x18a)][_0xb12cdb(0x242)],Object)?!helper[_0xb12cdb(0x217)](this[_0xb12cdb(0x1ad)][_0xb12cdb(0x18a)][_0xb12cdb(0x245)])&&(this[_0xb12cdb(0x1ad)][_0xb12cdb(0x18a)]['localIdentifier']=helper[_0xb12cdb(0x1bf)]()):this['config'][_0xb12cdb(0x18a)]={'localIdentifier':helper[_0xb12cdb(0x1bf)]()});this['config'][_0xb12cdb(0x18a)][_0xb12cdb(0x245)]=helper[_0xb12cdb(0x217)](this[_0xb12cdb(0x1ad)][_0xb12cdb(0x18a)][_0xb12cdb(0x245)]),helper['setHandlePWError'](this[_0xb12cdb(0x1ad)]);if(_0x4b5b6a['jHXRZ'](_0x394573,_0x4b5b6a[_0xb12cdb(0x239)]))return;this[_0xb12cdb(0x19c)]();process[_0xb12cdb(0x243)][_0xb12cdb(0x24f)]&&(this[_0xb12cdb(0x1ad)][_0xb12cdb(0x1c9)]=helper[_0xb12cdb(0x217)](process[_0xb12cdb(0x243)][_0xb12cdb(0x24f)]),this[_0xb12cdb(0x1ad)][_0xb12cdb(0x1d9)]=this['config']['turboScaleOptions']||{});helper[_0xb12cdb(0x22e)](this[_0xb12cdb(0x1ad)])&&(process[_0xb12cdb(0x243)][_0xb12cdb(0x24f)]=!![]);LoadTestModule[_0xb12cdb(0x1ba)](this['config'])&&logger[_0xb12cdb(0x256)]('LTS\x20session\x20enabled\x20for\x20this\x20run.\x20SDK\x20run\x20id:\x20'+this[_0xb12cdb(0x16a)]);if(!helper['isBrowserstackInfra']()){try{process[_0xb12cdb(0x243)][_0xb12cdb(0x23a)]=_0x394573,utilities['fireFunnelTestEvent'](_0x4b5b6a[_0xb12cdb(0x1d3)],{},this[_0xb12cdb(0x1ad)],this['framework']);}catch(_0x2c226c){logger[_0xb12cdb(0x256)](_0xb12cdb(0x1c4)+_0x2c226c);}return;}if(helper[_0xb12cdb(0x196)](_0x394573)){if(global[_0xb12cdb(0x213)])return;_0x4b5b6a[_0xb12cdb(0x1a7)](_0x4b5b6a[_0xb12cdb(0x1d0)](parseInt,helper[_0xb12cdb(0x21e)](_0x4b5b6a[_0xb12cdb(0x1e9)])),0x3)&&(this['config'][_0xb12cdb(0x184)]=![]),_0x4b5b6a['ICQpD'](helper[_0xb12cdb(0x179)](helper[_0xb12cdb(0x21e)](_0x4b5b6a[_0xb12cdb(0x1e9)]),_0x4b5b6a[_0xb12cdb(0x17d)]),0x1)&&(this[_0xb12cdb(0x1ad)]['useW3C']=!![]);}(helper['isUndefined'](this[_0xb12cdb(0x1ad)][_0xb12cdb(0x182)])||helper['isUndefined'](this[_0xb12cdb(0x1ad)][_0xb12cdb(0x182)]['length']))&&(helper[_0xb12cdb(0x1fe)](this[_0xb12cdb(0x1ad)]['parallelsPerPlatform'])?logger[_0xb12cdb(0x234)](_0x4b5b6a[_0xb12cdb(0x26c)]):logger[_0xb12cdb(0x24d)](_0x4b5b6a[_0xb12cdb(0x231)]),this[_0xb12cdb(0x1ad)][_0xb12cdb(0x182)]=[]);!this[_0xb12cdb(0x1ad)][_0xb12cdb(0x269)]&&(this[_0xb12cdb(0x1ad)][_0xb12cdb(0x269)]={});try{process[_0xb12cdb(0x243)][_0xb12cdb(0x23a)]=_0x317503['_'][0x0],utilities[_0xb12cdb(0x21d)](_0x4b5b6a[_0xb12cdb(0x1d3)],{},this[_0xb12cdb(0x1ad)],this[_0xb12cdb(0x1af)]);}catch(_0x33a5c1){logger[_0xb12cdb(0x256)](_0xb12cdb(0x1c4)+_0x33a5c1);}!this['config']['disableAutoCaptureLogs']&&logger['info'](constants[_0xb12cdb(0x246)]),this['intExitHandler']=this[_0xb12cdb(0x17f)][_0xb12cdb(0x20e)](this),process['on'](_0x4b5b6a[_0xb12cdb(0x23b)],this[_0xb12cdb(0x17f)]),process['on'](_0x4b5b6a[_0xb12cdb(0x206)],this[_0xb12cdb(0x17f)]),process['on'](_0x4b5b6a['nyLEc'],this[_0xb12cdb(0x17f)]),_0x4b5b6a[_0xb12cdb(0x272)](process['platform'],_0x4b5b6a[_0xb12cdb(0x1a3)])?(process['on'](_0x4b5b6a[_0xb12cdb(0x23f)],this[_0xb12cdb(0x17f)]),process['on'](_0x4b5b6a[_0xb12cdb(0x19e)],this[_0xb12cdb(0x17f)])):process['on'](_0x4b5b6a['BNpzu'],this[_0xb12cdb(0x17f)]),process['on'](_0x4b5b6a['PmBJq'],this['exitHandler']());}async[a94_0x3995ea(0x252)](_0x31de6e){const _0x5b2938=a94_0x3995ea,_0x11c5ce={'pijYd':_0x5b2938(0x173),'zxiKN':_0x5b2938(0x1a0),'ihENB':_0x5b2938(0x1f1),'UFjAN':function(_0x576785,_0x587faa){return _0x576785===_0x587faa;},'cCrJc':_0x5b2938(0x219),'ZmyRB':function(_0x13105b,_0x473923){return _0x13105b+_0x473923;},'qNjaN':_0x5b2938(0x1bb),'hrncM':function(_0x296bae,_0x43535e){return _0x296bae(_0x43535e);},'qEUHz':_0x5b2938(0x1ce)};this['preInitialize'](_0x31de6e);if(helper[_0x5b2938(0x22e)](this[_0x5b2938(0x1ad)])){const _0x3b80d3=await helper[_0x5b2938(0x19f)](this[_0x5b2938(0x1ad)]);this[_0x5b2938(0x1ad)]['turboScaleGridDetails']=_0x3b80d3,_0x3b80d3[_0x5b2938(0x24a)]&&helper[_0x5b2938(0x1fc)](this[_0x5b2938(0x1ad)]['browserstackLocal'])&&helper['isTrue'](this[_0x5b2938(0x1ad)][_0x5b2938(0x1f5)])&&(this[_0x5b2938(0x1ad)][_0x5b2938(0x18a)]['localIdentifier']=_0x11c5ce[_0x5b2938(0x232)],this[_0x5b2938(0x1ad)][_0x5b2938(0x18a)][_0x11c5ce[_0x5b2938(0x190)]]=_0x3b80d3[_0x5b2938(0x1db)][_0x5b2938(0x263)](','),this['config'][_0x5b2938(0x18a)][_0x5b2938(0x1c6)]=_0x11c5ce[_0x5b2938(0x267)]),this['config'][_0x5b2938(0x248)]=_0x3b80d3['url'],this[_0x5b2938(0x1af)]&&_0x11c5ce[_0x5b2938(0x175)](this['framework']['toLowerCase'](),_0x11c5ce[_0x5b2938(0x250)])?this[_0x5b2938(0x1ad)][_0x5b2938(0x248)]=_0x11c5ce[_0x5b2938(0x18d)](_0x3b80d3[_0x5b2938(0x1ae)],_0x11c5ce[_0x5b2938(0x16b)]):constants[_0x5b2938(0x24c)]=helper[_0x5b2938(0x1e6)](this[_0x5b2938(0x1ad)]),logger['debug'](_0x5b2938(0x208)+constants[_0x5b2938(0x24c)]);}helper[_0x5b2938(0x1c7)](this['config']),this[_0x5b2938(0x1b6)](),_0x11c5ce[_0x5b2938(0x171)](setPercyFlag,this),await this['setupBrowserstackLocal'](),![_0x11c5ce[_0x5b2938(0x193)],_0x11c5ce[_0x5b2938(0x250)]][_0x5b2938(0x229)](this[_0x5b2938(0x1af)])&&!helper['isTurboScaleSession'](this['config'])&&!helper[_0x5b2938(0x253)]()[_0x5b2938(0x194)]&&await this[_0x5b2938(0x205)]();}async[a94_0x3995ea(0x215)](){const _0x358fe6=a94_0x3995ea,_0xd83c8c={};_0xd83c8c['MCvFA']=function(_0x548b14,_0x3fab10){return _0x548b14===_0x3fab10;},_0xd83c8c['pWpva']='false',_0xd83c8c[_0x358fe6(0x25b)]=_0x358fe6(0x1cc),_0xd83c8c[_0x358fe6(0x16f)]=_0x358fe6(0x210),_0xd83c8c[_0x358fe6(0x233)]=_0x358fe6(0x1f1),_0xd83c8c[_0x358fe6(0x254)]=_0x358fe6(0x1e8);const _0x46dd4a=_0xd83c8c;if(helper[_0x358fe6(0x217)](this[_0x358fe6(0x1ad)][_0x358fe6(0x17c)])&&(!this[_0x358fe6(0x17c)]||!this[_0x358fe6(0x17c)][_0x358fe6(0x1f9)]()))try{this[_0x358fe6(0x17c)]=await percyHelper[_0x358fe6(0x23c)](this[_0x358fe6(0x1ad)]);if(!this[_0x358fe6(0x17c)]){process[_0x358fe6(0x243)][_0x358fe6(0x26d)]=_0x46dd4a[_0x358fe6(0x26b)];throw new Error(_0x46dd4a[_0x358fe6(0x25b)]);}logger['info'](_0x46dd4a[_0x358fe6(0x16f)]),process['env'][_0x358fe6(0x26d)]=_0x46dd4a[_0x358fe6(0x233)];let _0x1a28dc=0x0;const _0x411a8c=async()=>{const _0x725f73=_0x358fe6;_0x1a28dc++,_0x46dd4a[_0x725f73(0x16d)](_0x1a28dc,0x1)&&await this[_0x725f73(0x273)]();};process['on'](_0x46dd4a[_0x358fe6(0x254)],_0x411a8c);}catch(_0x5caa2d){process['env'][_0x358fe6(0x26d)]=_0x46dd4a[_0x358fe6(0x26b)],logger[_0x358fe6(0x256)](_0x358fe6(0x24b)+_0x5caa2d);throw new Error(_0x5caa2d[_0x358fe6(0x1ee)]());}}async[a94_0x3995ea(0x273)](){const _0x53db44=a94_0x3995ea,_0x46311b={};_0x46311b[_0x53db44(0x183)]='Percy\x20stopped',_0x46311b[_0x53db44(0x221)]=_0x53db44(0x271);const _0x5214a5=_0x46311b;if(this[_0x53db44(0x17c)]&&this['percy'][_0x53db44(0x1f9)]())try{await percyHelper[_0x53db44(0x273)](this[_0x53db44(0x17c)]),logger['info'](_0x5214a5[_0x53db44(0x183)]);}catch(_0x346bd7){logger[_0x53db44(0x218)](_0x5214a5[_0x53db44(0x221)],_0x346bd7[_0x53db44(0x16e)]);}}async[a94_0x3995ea(0x17a)](){const _0x18a15b=a94_0x3995ea,_0x4b30c8={};_0x4b30c8[_0x18a15b(0x24e)]=_0x18a15b(0x178),_0x4b30c8[_0x18a15b(0x1ec)]='Local\x20binary\x20started\x20successfully';const _0x11850a=_0x4b30c8;if(helper['isBrowserstackInfra']()&&helper[_0x18a15b(0x217)](this[_0x18a15b(0x1ad)][_0x18a15b(0x1f5)])&&(!this[_0x18a15b(0x1f5)]||!this[_0x18a15b(0x1f5)][_0x18a15b(0x1f9)]()))try{if(this[_0x18a15b(0x1ad)][_0x18a15b(0x18a)]['skipBinaryInitialisation']){logger[_0x18a15b(0x256)](_0x11850a['yVcGa']);return;}this[_0x18a15b(0x1f5)]=await helper[_0x18a15b(0x17e)](this[_0x18a15b(0x1ad)]),logger[_0x18a15b(0x234)](_0x11850a[_0x18a15b(0x1ec)]);}catch(_0x109938){logger['debug'](_0x109938);throw new Error(_0x109938['toString']());}}async[a94_0x3995ea(0x268)](){const _0x4a3ea5=a94_0x3995ea,_0x1f7f54={};_0x1f7f54[_0x4a3ea5(0x18b)]=_0x4a3ea5(0x1e3),_0x1f7f54['NvIxY']=_0x4a3ea5(0x23e);const _0x2389b1=_0x1f7f54;if(this[_0x4a3ea5(0x1f5)]&&this[_0x4a3ea5(0x1f5)][_0x4a3ea5(0x1f9)]())try{await helper['stopLocalBinary'](this[_0x4a3ea5(0x1f5)]),logger[_0x4a3ea5(0x234)](_0x2389b1['TDSvx']);}catch(_0x554923){logger[_0x4a3ea5(0x218)](_0x2389b1[_0x4a3ea5(0x1ab)],_0x554923[_0x4a3ea5(0x16e)]);}}async[a94_0x3995ea(0x205)](){const _0x35256f=a94_0x3995ea;return PerformanceTester[_0x35256f(0x185)](PerformanceAutEvents['HUB_MANAGEMENT'],async()=>{const _0x46492f=_0x35256f;await hubAllocator[_0x46492f(0x1c1)](this[_0x46492f(0x1ad)]);})();}async[a94_0x3995ea(0x1a8)](){const _0x5c55ca=a94_0x3995ea,_0x2ccfef={'gKvPO':function(_0x2bdca1,_0x379232){return _0x2bdca1(_0x379232);},'LRLZg':_0x5c55ca(0x1d5),'DDXgV':function(_0x1f2b99,_0x325813,_0x1ee5bf,_0x452e1a,_0x987508,_0x49536a,_0x2ec7f0){return _0x1f2b99(_0x325813,_0x1ee5bf,_0x452e1a,_0x987508,_0x49536a,_0x2ec7f0);},'DWukb':_0x5c55ca(0x18e),'NiIvg':_0x5c55ca(0x198),'BVvsb':function(_0x27d867,_0x30501c){return _0x27d867(_0x30501c);},'sHcFZ':_0x5c55ca(0x220),'oLBvi':'BrowserstackHealing.init','JwyFW':function(_0xb993ab,_0x2c9e9d){return _0xb993ab===_0x2c9e9d;},'GFXEu':_0x5c55ca(0x1f1),'kISYZ':function(_0x16b68d,_0x4d0567){return _0x16b68d===_0x4d0567;},'rvviw':_0x5c55ca(0x1fd),'ZgPEr':function(_0x46f8fb,_0x4d93e4){return _0x46f8fb===_0x4d93e4;},'ourlf':_0x5c55ca(0x211),'kSOFA':_0x5c55ca(0x258),'yWXSp':function(_0x32760c,_0x13650){return _0x32760c(_0x13650);},'NIBjU':'Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','DjXDC':function(_0x2624b3,_0x5d06e3){return _0x2624b3>=_0x5d06e3;},'nyInM':function(_0x55da3a,_0x26605d){return _0x55da3a<_0x26605d;},'IsfwQ':function(_0x4559f7,_0x4b9b46){return _0x4559f7>=_0x4b9b46;},'arAWO':_0x5c55ca(0x260),'FtHMd':_0x5c55ca(0x20a),'Zqsrl':function(_0xf88044){return _0xf88044();}},_0x1f0bb5=PerformanceTester[_0x5c55ca(0x185)](_0x2ccfef['FtHMd'],async()=>{const _0x196255=_0x5c55ca;try{const _0xd4dab0=new Date(),_0x32da95=helper[_0x196255(0x1fb)](this[_0x196255(0x1ad)]),_0x3ba7cb=_0x2ccfef['gKvPO'](require,path['join'](__dirname,_0x2ccfef['LRLZg'])),_0x505628=_0x2ccfef[_0x196255(0x1be)](timeoutPromise,constants[_0x196255(0x1f4)],_0x2ccfef['DWukb'],_0x2ccfef[_0x196255(0x25a)],_0xd4dab0,this[_0x196255(0x1ad)],this[_0x196255(0x1af)]),_0x1013e5={'tcgUrl':constants[_0x196255(0x1ed)],'sdkVersion':_0x2ccfef[_0x196255(0x1cf)](require,_0x2ccfef[_0x196255(0x1a5)])[_0x196255(0x1cb)],'methodUsed':_0x2ccfef[_0x196255(0x26f)],'proxyConfig':_0x32da95,'os':os[_0x196255(0x170)]()};if(_0x32da95&&_0x32da95[_0x196255(0x1e2)]){utilities[_0x196255(0x21d)](constants[_0x196255(0x1bc)],_0x1013e5,this[_0x196255(0x1ad)],this[_0x196255(0x1af)]);return;}const _0x13dacb={};_0x13dacb[_0x196255(0x1ea)]=_0x32da95;const _0x301101=await Promise['race']([_0x3ba7cb['init'](this[_0x196255(0x1ad)][_0x196255(0x1d2)],this['config'][_0x196255(0x1a1)],constants['TCG_URL'],_0x2ccfef[_0x196255(0x236)](require,_0x2ccfef[_0x196255(0x1a5)])[_0x196255(0x1cb)],_0x13dacb)['then'](_0x59c4b2=>{return _0x505628['cancel'](),_0x59c4b2;}),_0x505628]);_0x301101[_0x196255(0x195)]=_0x2ccfef[_0x196255(0x199)](_0x301101['isHealingEnabled'],_0x2ccfef[_0x196255(0x262)])||_0x2ccfef[_0x196255(0x199)](_0x301101['isHealingEnabled'],!![]);const _0x2fe003=_0x2ccfef[_0x196255(0x1a4)](this[_0x196255(0x1ad)]['selfHeal'],!![])||_0x2ccfef[_0x196255(0x199)](this[_0x196255(0x1ad)][_0x196255(0x1f6)],_0x2ccfef[_0x196255(0x262)]);if(_0x2ccfef[_0x196255(0x1a4)](_0x301101[_0x196255(0x16e)],constants[_0x196255(0x1cd)])&&_0x2fe003)logger[_0x196255(0x234)](_0x2ccfef['rvviw']);else{if(!_0x301101['isAuthenticated']&&_0x2ccfef[_0x196255(0x174)](_0x301101[_0x196255(0x1e0)],0x1f7)&&_0x2fe003)logger[_0x196255(0x234)](_0x2ccfef[_0x196255(0x255)]),utilities['fireFunnelTestEvent'](constants[_0x196255(0x1c2)],_0x1013e5,this['config'],this[_0x196255(0x1af)]);else{if(!_0x301101['isAuthenticated']&&_0x2fe003){logger[_0x196255(0x234)](_0x2ccfef[_0x196255(0x1ef)]);const _0x72f3d7={'tcgUrl':constants[_0x196255(0x1ed)],'sdkVersion':_0x2ccfef['yWXSp'](require,_0x2ccfef[_0x196255(0x1a5)])['version'],'methodUsed':_0x2ccfef[_0x196255(0x26f)],'proxyConfig':_0x32da95,'os':os[_0x196255(0x170)]()};utilities['fireFunnelTestEvent'](constants[_0x196255(0x16c)],_0x72f3d7,this[_0x196255(0x1ad)],this[_0x196255(0x1af)]);}else{if(_0x301101['isAuthenticated']&&!_0x301101[_0x196255(0x195)]&&_0x2fe003)logger[_0x196255(0x234)](_0x2ccfef['NIBjU']);else{if(_0x2ccfef[_0x196255(0x21b)](_0x301101[_0x196255(0x1e0)],0xc8)&&_0x2ccfef[_0x196255(0x1ac)](_0x301101[_0x196255(0x1e0)],0x12c))utilities[_0x196255(0x21d)](constants[_0x196255(0x200)],_0x1013e5,this[_0x196255(0x1ad)],this[_0x196255(0x1af)]);else{if(_0x2ccfef['IsfwQ'](_0x301101[_0x196255(0x1e0)],0x190))_0x1013e5[_0x196255(0x1e0)]=_0x301101[_0x196255(0x1e0)],utilities[_0x196255(0x21d)](constants[_0x196255(0x207)],_0x1013e5,this['config'],this[_0x196255(0x1af)]);else!_0x301101['status']&&utilities[_0x196255(0x21d)](constants[_0x196255(0x1bd)],_0x1013e5,this[_0x196255(0x1ad)],this['framework']);}}}}}if(_0x301101['isAuthenticated']&&_0x301101[_0x196255(0x195)]){const _0x521b64={};_0x521b64[_0x196255(0x26e)]=_0x301101;const _0xecaaec=_0x521b64;_0x32da95&&(_0xecaaec['proxyConfig']=_0x32da95),_0xecaaec[_0x196255(0x1af)]=this['framework'],_0xecaaec[_0x196255(0x1a2)]=this[_0x196255(0x1ad)],helper[_0x196255(0x197)](_0xecaaec),logger[_0x196255(0x256)](_0x2ccfef[_0x196255(0x1b7)]);}}catch(_0x5a3083){logger[_0x196255(0x256)]('Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20'+(_0x5a3083[_0x196255(0x16e)]?_0x5a3083['message']:''));}});await _0x2ccfef[_0x5c55ca(0x249)](_0x1f0bb5);}[a94_0x3995ea(0x1b6)](){const _0x26602d=a94_0x3995ea,_0x2959f0={'ICOeZ':function(_0x1cab32,_0x175e23){return _0x1cab32(_0x175e23);},'jGato':_0x26602d(0x1b4)};_0x2959f0['ICOeZ'](require,_0x2959f0[_0x26602d(0x1fa)])();}[a94_0x3995ea(0x19c)](){const _0xdde918=a94_0x3995ea,_0x2d3dd2={};_0x2d3dd2[_0xdde918(0x1f0)]=_0xdde918(0x25d),_0x2d3dd2[_0xdde918(0x264)]=_0xdde918(0x1d6),_0x2d3dd2['rNLdo']='uncaughtException';const _0x35dc48=_0x2d3dd2,_0x2ae577=_0xab5219=>{const _0x58d697=_0xdde918,_0x44d576=_0x35dc48[_0x58d697(0x1f0)][_0x58d697(0x224)]('|');let _0x41ed88=0x0;while(!![]){switch(_0x44d576[_0x41ed88++]){case'0':logger[_0x58d697(0x218)](_0xab5219[_0x58d697(0x16e)]);continue;case'1':ClientTroubleShootingService[_0x58d697(0x20b)]();continue;case'2':logger[_0x58d697(0x256)](util[_0x58d697(0x1ca)](_0xab5219));continue;case'3':PerformanceTester[_0x58d697(0x21a)](_0xab5219);continue;case'4':this[_0x58d697(0x237)][_0x58d697(0x189)](util[_0x58d697(0x1ca)]('%j',_0xab5219));continue;}break;}};process['on'](_0x35dc48[_0xdde918(0x264)],_0x2ae577),process['on'](_0x35dc48[_0xdde918(0x1f2)],_0x2ae577);}async[a94_0x3995ea(0x17f)](_0x53cb53){const _0x365498=a94_0x3995ea,_0x376262={};_0x376262[_0x365498(0x22b)]='2|6|4|0|5|7|3|1',_0x376262[_0x365498(0x17b)]=function(_0x5e493e,_0x37598b){return _0x5e493e+_0x37598b;},_0x376262[_0x365498(0x259)]='handled',_0x376262['aGSRi']='Shutdown\x20triggered\x20by\x20',_0x376262[_0x365498(0x1d8)]=function(_0x4b31c3,_0x534274){return _0x4b31c3+_0x534274;};const _0x21463b=_0x376262,_0x59d83f=_0x21463b[_0x365498(0x22b)][_0x365498(0x224)]('|');let _0x30cf3c=0x0;while(!![]){switch(_0x59d83f[_0x30cf3c++]){case'0':this['killSignal']=_0x53cb53;continue;case'1':await BrowserstackCLI['getInstance']()['stop']();continue;case'2':if(this[_0x21463b[_0x365498(0x17b)](_0x21463b[_0x365498(0x259)],_0x53cb53)])return;continue;case'3':await ClientTroubleShootingService[_0x365498(0x20b)]();continue;case'4':logger['info'](_0x21463b[_0x365498(0x17b)](_0x21463b['aGSRi'],_0x53cb53));continue;case'5':await ClientTroubleShootingService[_0x365498(0x235)](_0x53cb53);continue;case'6':this[_0x21463b[_0x365498(0x1d8)](_0x21463b[_0x365498(0x259)],_0x53cb53)]=!![];continue;case'7':await TestHubHandler[_0x365498(0x1b1)](_0x53cb53);continue;}break;}}[a94_0x3995ea(0x20c)](){const _0x56d756=a94_0x3995ea,_0x3b0c49={'zdYEv':function(_0x1c01cd,_0x544d06){return _0x1c01cd===_0x544d06;},'pLMkT':_0x56d756(0x1aa),'VJIgT':function(_0x11ac36,_0x3fe06e){return _0x11ac36>_0x3fe06e;},'vkTDP':function(_0x5a30f3,_0x56be59){return _0x5a30f3(_0x56be59);},'hlKeo':function(_0x598e2f,_0xd76fa0){return _0x598e2f(_0xd76fa0);},'mZQWY':function(_0x3c7585){return _0x3c7585();},'KkctC':_0x56d756(0x209)};let _0xcc9168=0x0;return async()=>{const _0x4b56ec=_0x56d756;_0xcc9168++;if(_0x3b0c49[_0x4b56ec(0x191)](_0xcc9168,0x1)){helper['checkStopLocalBinaryOnExit'](this[_0x4b56ec(0x1af)])&&await this[_0x4b56ec(0x268)]();try{logger[_0x4b56ec(0x256)](_0x3b0c49[_0x4b56ec(0x18c)]),await TestHubHandler['stop'](_0xcc9168),await ClientTroubleShootingService[_0x4b56ec(0x20b)](),await BrowserstackCLI[_0x4b56ec(0x188)]()['stop']('1');}catch(_0x409d9a){logger[_0x4b56ec(0x256)](_0x4b56ec(0x22c)+util['format'](_0x409d9a));}PerformanceTester[_0x4b56ec(0x1f7)](PerformanceEvents[_0x4b56ec(0x20f)]);if(PerformanceTester[_0x4b56ec(0x1b8)]()){const {measures:_0x5bdbb9,errors:_0x433c7a}=await PerformanceTester['finalize'](),_0x337f3f={};if(_0x5bdbb9&&_0x3b0c49[_0x4b56ec(0x244)](_0x5bdbb9[_0x4b56ec(0x1e7)],0x0)||_0x433c7a&&_0x3b0c49[_0x4b56ec(0x244)](_0x433c7a[_0x4b56ec(0x1e7)],0x0)){const _0x1da783={};_0x1da783[_0x4b56ec(0x22a)]=_0x5bdbb9,_0x1da783[_0x4b56ec(0x204)]=_0x433c7a,Object[_0x4b56ec(0x201)](_0x337f3f,_0x1da783);}try{const _0x252862=await helper[_0x4b56ec(0x22f)](_0x337f3f,this[_0x4b56ec(0x1ad)]);logger[_0x4b56ec(0x256)](_0x4b56ec(0x203)+_0x3b0c49[_0x4b56ec(0x1d1)](getEdsInstrumentationAPIUrl,'')+_0x4b56ec(0x25c)+_0x252862[_0x4b56ec(0x238)]);}catch(_0x1e2e3c){logger[_0x4b56ec(0x256)]('Failed\x20to\x20send\x20data\x20to\x20'+_0x3b0c49[_0x4b56ec(0x216)](getEdsInstrumentationAPIUrl,'')+_0x4b56ec(0x214)+util[_0x4b56ec(0x1ca)](_0x1e2e3c));}try{fs[_0x4b56ec(0x172)](path[_0x4b56ec(0x263)](_0x3b0c49[_0x4b56ec(0x240)](getLogDir),_0x3b0c49['KkctC']),JSON[_0x4b56ec(0x1df)](_0x337f3f));}catch(_0x465a36){logger[_0x4b56ec(0x256)](_0x4b56ec(0x1c5)+_0x465a36);}}}logger&&logger['close'](),fileLogger&&fileLogger['close']();};}}exports[a94_0x3995ea(0x21c)]=BrowserStackSetup;