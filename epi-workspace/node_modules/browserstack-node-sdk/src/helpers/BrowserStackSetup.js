const a94_0x2d6f19=a94_0x2f5f;(function(_0x436cb6,_0x1f8555){const _0x39b318=a94_0x2f5f,_0x1491ff=_0x436cb6();while(!![]){try{const _0x10d423=parseInt(_0x39b318(0xaa))/0x1+parseInt(_0x39b318(0xe4))/0x2+parseInt(_0x39b318(0x9f))/0x3+-parseInt(_0x39b318(0xc8))/0x4+parseInt(_0x39b318(0xfe))/0x5+-parseInt(_0x39b318(0xce))/0x6*(parseInt(_0x39b318(0xde))/0x7)+parseInt(_0x39b318(0x10b))/0x8;if(_0x10d423===_0x1f8555)break;else _0x1491ff['push'](_0x1491ff['shift']());}catch(_0x2287be){_0x1491ff['push'](_0x1491ff['shift']());}}}(a94_0x5d4b,0xace2c));const util=require('util'),os=require('os'),path=require(a94_0x2d6f19(0xec)),{v4:uuidv4}=require(a94_0x2d6f19(0x15c)),fs=require('fs'),constants=require('../bin/utils/constants'),logger=require('./logger')[a94_0x2d6f19(0x95)],fileLogger=require('./logger')['fileLogger'],{getLogDir}=require('./logger'),helper=require(a94_0x2d6f19(0xa5)),utilities=require(a94_0x2d6f19(0xd5)),percyHelper=require(a94_0x2d6f19(0xfb)),hubAllocator=require(a94_0x2d6f19(0x168)),PerformanceTester=require(a94_0x2d6f19(0x17c)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a94_0x2d6f19(0x16e)),{setPercyFlag}=require(a94_0x2d6f19(0xcc)),TestHubHandler=require('./testhub/testhubHandler'),timeoutPromise=require(a94_0x2d6f19(0x140)),BrowserstackCLI=require(a94_0x2d6f19(0x154)),LoadTestModule=require(a94_0x2d6f19(0x133)),{getEdsInstrumentationAPIUrl}=require('../bin/utils/apiUtilityMethods'),ClientTroubleShootingService=require('../bin/utils/clientTroubleshootingService');class BrowserStackSetup{constructor(_0x5dccc1,_0x5bd206){const _0x14eaf3=a94_0x2d6f19,_0x88f189={'mpMqW':_0x14eaf3(0x12f),'nKzQv':function(_0x10f975){return _0x10f975();},'EcLTu':_0x14eaf3(0x15d)},_0x3a087c=_0x88f189[_0x14eaf3(0x17e)][_0x14eaf3(0x97)]('|');let _0x4688d9=0x0;while(!![]){switch(_0x3a087c[_0x4688d9++]){case'0':global[_0x14eaf3(0xa8)]=_0x5bd206;continue;case'1':this[_0x14eaf3(0x115)]={};continue;case'2':this[_0x14eaf3(0x143)]=_0x88f189[_0x14eaf3(0x170)](uuidv4);continue;case'3':this['unhandledErrors']=[];continue;case'4':this[_0x14eaf3(0xd3)]=helper['readConfig'](this['configPath']);continue;case'5':this[_0x14eaf3(0xd3)][_0x14eaf3(0xd7)]=this['config']['platforms']||[];continue;case'6':PerformanceTester[_0x14eaf3(0xf3)]();continue;case'7':helper[_0x14eaf3(0x13e)](this[_0x14eaf3(0xd3)],this[_0x14eaf3(0x101)],this['envConfig']);continue;case'8':this[_0x14eaf3(0x101)]=helper[_0x14eaf3(0xf0)](_0x5dccc1);continue;case'9':this[_0x14eaf3(0xd3)][_0x14eaf3(0xf1)][_0x14eaf3(0x10c)]=!helper[_0x14eaf3(0x91)]()||helper[_0x14eaf3(0x84)](this['config'][_0x14eaf3(0xf1)][_0x14eaf3(0x10c)]);continue;case'10':helper['setLogDir'](this[_0x14eaf3(0xd3)]);continue;case'11':this['framework']=_0x5bd206;continue;case'12':helper[_0x14eaf3(0x141)](this['config']);continue;case'13':helper[_0x14eaf3(0xf4)](this[_0x14eaf3(0xd3)],this[_0x14eaf3(0x101)]);continue;case'14':this[_0x14eaf3(0xd3)][_0x14eaf3(0xf1)]=this[_0x14eaf3(0xd3)][_0x14eaf3(0xf1)]||{};continue;case'15':this[_0x14eaf3(0xd3)][_0x14eaf3(0xf1)][_0x14eaf3(0x11f)]=!helper[_0x14eaf3(0x91)]()||helper[_0x14eaf3(0x84)](this[_0x14eaf3(0xd3)][_0x14eaf3(0xf1)][_0x14eaf3(0x11f)]);continue;case'16':this[_0x14eaf3(0x83)]=null;continue;case'17':this[_0x14eaf3(0x14b)]=helper['setEnvCaps']();continue;case'18':if(helper['isUndefined'](this[_0x14eaf3(0xd3)]))throw new Error(_0x88f189[_0x14eaf3(0x93)]);continue;case'19':if(this['config'][_0x14eaf3(0x150)])throw new Error(this['config'][_0x14eaf3(0x150)]);continue;case'20':this['configPath']=helper[_0x14eaf3(0xb1)](_0x5dccc1);continue;case'21':this[_0x14eaf3(0x109)]=null;continue;case'22':helper[_0x14eaf3(0x11d)]();continue;case'23':helper[_0x14eaf3(0x14c)](this[_0x14eaf3(0xd3)],this[_0x14eaf3(0x101)],this[_0x14eaf3(0x14b)]);continue;}break;}}['preInitialize'](_0x4b0ec5){const _0x200677=a94_0x2d6f19,_0x32d0f9={'pSMmI':'userName\x20or\x20accessKey\x20is\x20not\x20defined','ordBa':function(_0x2a9712,_0x566c34){return _0x2a9712===_0x566c34;},'CVlNf':function(_0x1c5a37,_0x2e180c){return _0x1c5a37===_0x2e180c;},'GdIlB':_0x200677(0xa0),'MAZmW':_0x200677(0xcd),'qacdk':function(_0x20cb5e,_0x2bd4fd){return _0x20cb5e<_0x2bd4fd;},'PHtmn':function(_0x5276ac,_0x3bd456){return _0x5276ac(_0x3bd456);},'KfkZq':_0x200677(0xbc),'zGBIm':_0x200677(0x149),'RBwRO':_0x200677(0xd4),'OTVKK':'parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','itAfs':_0x200677(0xc3),'IJaes':_0x200677(0x8b),'vUTgh':_0x200677(0x82),'SjbnQ':function(_0x15c7f9,_0x28adb6){return _0x15c7f9!==_0x28adb6;},'zFwVN':_0x200677(0xdf),'XZpxG':_0x200677(0x10d),'oEaCW':'SIGQUIT','kgKvt':_0x200677(0xea),'VFKhp':_0x200677(0x14d)},_0x4930ce=this['framework'];global[_0x200677(0xd3)]=this[_0x200677(0xd3)],helper[_0x200677(0x16c)](this[_0x200677(0xd3)]),this['killSignal']=null,global[_0x200677(0x143)]=this['sdkRunId'],logger[_0x200677(0xcb)](_0x200677(0x14f)+this[_0x200677(0x143)]),!this[_0x200677(0xd3)][_0x200677(0x138)]&&(this[_0x200677(0xd3)][_0x200677(0x138)]=this['config'][_0x200677(0x9b)]||{});if(helper[_0x200677(0x117)](helper['getUserName'](this[_0x200677(0xd3)]))||helper['isUndefined'](helper[_0x200677(0x139)](this[_0x200677(0xd3)])))throw new Error(_0x32d0f9[_0x200677(0xba)]);helper[_0x200677(0xff)](this[_0x200677(0xd3)])&&helper[_0x200677(0x117)](helper[_0x200677(0x156)](this[_0x200677(0xd3)]))&&(!helper[_0x200677(0x117)](this[_0x200677(0xd3)][_0x200677(0x138)])&&_0x32d0f9[_0x200677(0x14e)](this[_0x200677(0xd3)][_0x200677(0x138)]['constructor'],Object)?!helper[_0x200677(0x84)](this[_0x200677(0xd3)]['browserStackLocalOptions'][_0x200677(0x80)])&&(this[_0x200677(0xd3)]['browserStackLocalOptions'][_0x200677(0x147)]=helper['generateLocalIdentifier']()):this[_0x200677(0xd3)][_0x200677(0x138)]={'localIdentifier':helper[_0x200677(0x13f)]()});this[_0x200677(0xd3)][_0x200677(0x138)][_0x200677(0x80)]=helper[_0x200677(0x84)](this['config'][_0x200677(0x138)][_0x200677(0x80)]),helper['setHandlePWError'](this[_0x200677(0xd3)]);if(_0x32d0f9[_0x200677(0x8a)](_0x4930ce,_0x32d0f9['GdIlB']))return;this[_0x200677(0x145)]();process['env'][_0x200677(0xe2)]&&(this[_0x200677(0xd3)]['turboScale']=helper[_0x200677(0x84)](process[_0x200677(0x134)][_0x200677(0xe2)]),this[_0x200677(0xd3)][_0x200677(0xeb)]=this[_0x200677(0xd3)][_0x200677(0xeb)]||{});helper[_0x200677(0x164)](this[_0x200677(0xd3)])&&(process[_0x200677(0x134)][_0x200677(0xe2)]=!![]);LoadTestModule[_0x200677(0x7b)](this[_0x200677(0xd3)])&&logger[_0x200677(0xd6)]('LTS\x20session\x20enabled\x20for\x20this\x20run.\x20SDK\x20run\x20id:\x20'+this[_0x200677(0x143)]);if(!helper['isBrowserstackInfra']()){try{process[_0x200677(0x134)][_0x200677(0x17a)]=_0x4930ce,utilities[_0x200677(0x158)](_0x32d0f9['MAZmW'],{},this[_0x200677(0xd3)],this['framework']);}catch(_0xfec8c6){logger['debug'](_0x200677(0xda)+_0xfec8c6);}return;}if(helper[_0x200677(0xf2)](_0x4930ce)){if(global[_0x200677(0x11c)])return;_0x32d0f9[_0x200677(0x113)](_0x32d0f9[_0x200677(0x127)](parseInt,helper['getPackageVersion'](_0x32d0f9[_0x200677(0x155)])),0x3)&&(this[_0x200677(0xd3)]['useW3C']=![]),_0x32d0f9[_0x200677(0x8a)](helper[_0x200677(0x9c)](helper[_0x200677(0x161)](_0x32d0f9[_0x200677(0x155)]),_0x32d0f9[_0x200677(0x7f)]),0x1)&&(this['config'][_0x200677(0xbf)]=!![]);}(helper[_0x200677(0x117)](this[_0x200677(0xd3)][_0x200677(0xd7)])||helper[_0x200677(0x117)](this[_0x200677(0xd3)][_0x200677(0xd7)][_0x200677(0x77)]))&&(helper[_0x200677(0x117)](this['config'][_0x200677(0xb5)])?logger[_0x200677(0xcb)](_0x32d0f9['RBwRO']):logger[_0x200677(0x11a)](_0x32d0f9[_0x200677(0xe8)]),this[_0x200677(0xd3)]['platforms']=[]);!this[_0x200677(0xd3)]['testContextOptions']&&(this[_0x200677(0xd3)][_0x200677(0xf1)]={});try{process[_0x200677(0x134)]['FRAMEWORK']=_0x4b0ec5['_'][0x0],utilities[_0x200677(0x158)](_0x32d0f9['MAZmW'],{},this[_0x200677(0xd3)],this['framework']);}catch(_0x31ade0){logger[_0x200677(0xd6)](_0x200677(0xda)+_0x31ade0);}!this['config']['disableAutoCaptureLogs']&&logger[_0x200677(0xcb)](constants['AUTOLOGCAPTURE_NOTIFICATION']),this[_0x200677(0x12a)]=this[_0x200677(0x12a)][_0x200677(0xe5)](this),process['on'](_0x32d0f9[_0x200677(0x100)],this['intExitHandler']),process['on'](_0x32d0f9['IJaes'],this['intExitHandler']),process['on'](_0x32d0f9[_0x200677(0x157)],this[_0x200677(0x12a)]),_0x32d0f9[_0x200677(0x17d)](process[_0x200677(0x7d)],_0x32d0f9['zFwVN'])?(process['on'](_0x32d0f9[_0x200677(0xbd)],this[_0x200677(0x12a)]),process['on'](_0x32d0f9[_0x200677(0x178)],this[_0x200677(0x12a)])):process['on'](_0x32d0f9[_0x200677(0xa4)],this[_0x200677(0x12a)]),process['on'](_0x32d0f9[_0x200677(0x112)],this[_0x200677(0xae)]());}async[a94_0x2d6f19(0x174)](_0x23b629){const _0x3cad9e=a94_0x2d6f19,_0x53e536={'zPIap':_0x3cad9e(0x12b),'OgfAy':_0x3cad9e(0xd9),'nNMxe':_0x3cad9e(0x10a),'wBaLZ':function(_0x4d945a,_0x3edad4){return _0x4d945a===_0x3edad4;},'wWZSO':'playwright','wTYRL':function(_0x2b0c44,_0x5061e5){return _0x2b0c44+_0x5061e5;},'ElUvE':_0x3cad9e(0x153),'FYSja':function(_0x2bcc9d,_0x58d18d){return _0x2bcc9d(_0x58d18d);},'jSQrF':_0x3cad9e(0x11e)};this[_0x3cad9e(0x78)](_0x23b629);if(helper[_0x3cad9e(0x164)](this[_0x3cad9e(0xd3)])){const _0xc73f86=await helper['getTurboScaleGridDetails'](this['config']);this[_0x3cad9e(0xd3)][_0x3cad9e(0x81)]=_0xc73f86,_0xc73f86[_0x3cad9e(0x148)]&&helper[_0x3cad9e(0xdc)](this[_0x3cad9e(0xd3)][_0x3cad9e(0x83)])&&helper['isTrue'](this[_0x3cad9e(0xd3)][_0x3cad9e(0x83)])&&(this['config'][_0x3cad9e(0x138)]['localIdentifier']=_0x53e536[_0x3cad9e(0xfa)],this[_0x3cad9e(0xd3)][_0x3cad9e(0x138)][_0x53e536['OgfAy']]=_0xc73f86[_0x3cad9e(0x151)]['join'](','),this[_0x3cad9e(0xd3)][_0x3cad9e(0x138)][_0x3cad9e(0xf8)]=_0x53e536[_0x3cad9e(0xc6)]),this[_0x3cad9e(0xd3)][_0x3cad9e(0x171)]=_0xc73f86[_0x3cad9e(0xd8)],this[_0x3cad9e(0xa8)]&&_0x53e536[_0x3cad9e(0x12e)](this['framework'][_0x3cad9e(0xa1)](),_0x53e536[_0x3cad9e(0xb4)])?this[_0x3cad9e(0xd3)]['turboScaleUrl']=_0x53e536[_0x3cad9e(0x165)](_0xc73f86[_0x3cad9e(0x129)],_0x53e536[_0x3cad9e(0x9e)]):constants['hubUrl']=helper[_0x3cad9e(0xdd)](this['config']),logger[_0x3cad9e(0xd6)](_0x3cad9e(0x107)+constants['hubUrl']);}helper[_0x3cad9e(0xee)](this[_0x3cad9e(0xd3)]),this[_0x3cad9e(0xe3)](),_0x53e536[_0x3cad9e(0x13b)](setPercyFlag,this),await this[_0x3cad9e(0x8e)](),![_0x53e536[_0x3cad9e(0x16d)],_0x53e536[_0x3cad9e(0xb4)]][_0x3cad9e(0x96)](this['framework'])&&!helper['isTurboScaleSession'](this[_0x3cad9e(0xd3)])&&!helper['getCentralUser']()['central_scanner']&&await this[_0x3cad9e(0xa9)]();}async[a94_0x2d6f19(0x173)](){const _0x1d9f84=a94_0x2d6f19,_0xfc9df7={};_0xfc9df7[_0x1d9f84(0x105)]=function(_0x3daed7,_0xdf41e7){return _0x3daed7===_0xdf41e7;},_0xfc9df7[_0x1d9f84(0xa2)]=_0x1d9f84(0x126),_0xfc9df7[_0x1d9f84(0x12d)]=_0x1d9f84(0x166),_0xfc9df7[_0x1d9f84(0xc2)]=_0x1d9f84(0x103),_0xfc9df7['qsRNs']='true',_0xfc9df7['mgNwk']=_0x1d9f84(0x14d);const _0x2bf808=_0xfc9df7;if(helper[_0x1d9f84(0x84)](this['config'][_0x1d9f84(0x109)])&&(!this['percy']||!this[_0x1d9f84(0x109)][_0x1d9f84(0x163)]()))try{this[_0x1d9f84(0x109)]=await percyHelper[_0x1d9f84(0xc7)](this[_0x1d9f84(0xd3)]);if(!this['percy']){process['env'][_0x1d9f84(0xbb)]=_0x2bf808[_0x1d9f84(0xa2)];throw new Error(_0x2bf808[_0x1d9f84(0x12d)]);}logger[_0x1d9f84(0xcb)](_0x2bf808['LgXeT']),process[_0x1d9f84(0x134)]['BROWSERSTACK_PERCY']=_0x2bf808[_0x1d9f84(0x111)];let _0x658fcd=0x0;const _0x3bca41=async()=>{const _0x32ab74=_0x1d9f84;_0x658fcd++,_0x2bf808[_0x32ab74(0x105)](_0x658fcd,0x1)&&await this[_0x32ab74(0xb7)]();};process['on'](_0x2bf808[_0x1d9f84(0x124)],_0x3bca41);}catch(_0x1885e7){process[_0x1d9f84(0x134)][_0x1d9f84(0xbb)]=_0x2bf808[_0x1d9f84(0xa2)],logger['debug'](_0x1d9f84(0xad)+_0x1885e7);throw new Error(_0x1885e7['toString']());}}async[a94_0x2d6f19(0xb7)](){const _0x2772f5=a94_0x2d6f19,_0x8ac1f={};_0x8ac1f['kwHOP']='Percy\x20stopped',_0x8ac1f[_0x2772f5(0x16f)]=_0x2772f5(0xb8);const _0x3783b3=_0x8ac1f;if(this['percy']&&this[_0x2772f5(0x109)][_0x2772f5(0x163)]())try{await percyHelper[_0x2772f5(0xb7)](this[_0x2772f5(0x109)]),logger[_0x2772f5(0xcb)](_0x3783b3[_0x2772f5(0x142)]);}catch(_0x252690){logger[_0x2772f5(0x150)](_0x3783b3[_0x2772f5(0x16f)],_0x252690[_0x2772f5(0x92)]);}}async[a94_0x2d6f19(0x8e)](){const _0x44471e=a94_0x2d6f19,_0x3beaa0={};_0x3beaa0[_0x44471e(0x169)]='Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled',_0x3beaa0['FuspK']=_0x44471e(0x13d);const _0x1c52c2=_0x3beaa0;if(helper[_0x44471e(0x91)]()&&helper['isTrue'](this['config'][_0x44471e(0x83)])&&(!this[_0x44471e(0x83)]||!this[_0x44471e(0x83)][_0x44471e(0x163)]()))try{if(this[_0x44471e(0xd3)][_0x44471e(0x138)][_0x44471e(0x80)]){logger[_0x44471e(0xd6)](_0x1c52c2[_0x44471e(0x169)]);return;}this[_0x44471e(0x83)]=await helper['startLocalBinary'](this[_0x44471e(0xd3)]),logger['info'](_0x1c52c2[_0x44471e(0x94)]);}catch(_0x3cb40d){logger[_0x44471e(0xd6)](_0x3cb40d);throw new Error(_0x3cb40d[_0x44471e(0x15b)]());}}async[a94_0x2d6f19(0xb3)](){const _0x1af183=a94_0x2d6f19,_0x386b12={};_0x386b12['scSpE']='Local\x20binary\x20stopped',_0x386b12['hBKsM']=_0x1af183(0xe1);const _0x26ed1b=_0x386b12;if(this[_0x1af183(0x83)]&&this[_0x1af183(0x83)][_0x1af183(0x163)]())try{await helper[_0x1af183(0x135)](this[_0x1af183(0x83)]),logger['info'](_0x26ed1b[_0x1af183(0xac)]);}catch(_0x137eb9){logger['error'](_0x26ed1b[_0x1af183(0xbe)],_0x137eb9[_0x1af183(0x92)]);}}async[a94_0x2d6f19(0xa9)](){const _0x1ae68b=a94_0x2d6f19;return PerformanceTester[_0x1ae68b(0xcf)](PerformanceAutEvents['HUB_MANAGEMENT'],async()=>{const _0x7cbb93=_0x1ae68b;await hubAllocator['allocateHub'](this[_0x7cbb93(0xd3)]);})();}async[a94_0x2d6f19(0x85)](){const _0x35d742=a94_0x2d6f19,_0x5c0833={'dKZtZ':function(_0x20afba,_0x3cb2f7){return _0x20afba(_0x3cb2f7);},'advtk':'../ai-sdk-node/bundle','zRhrl':function(_0x100474,_0xdfd75c,_0x233276,_0x528f94,_0x5495f8,_0x527354,_0x3c3b90){return _0x100474(_0xdfd75c,_0x233276,_0x528f94,_0x5495f8,_0x527354,_0x3c3b90);},'fGceo':'BrowserstackHealing.init\x20method\x20timed\x20out','TaVEO':_0x35d742(0xc9),'LETxs':function(_0x544b6b,_0x341d82){return _0x544b6b(_0x341d82);},'beACD':_0x35d742(0x8c),'wsklp':'BrowserstackHealing.init','lRhCy':function(_0x150a63,_0x7ee69f){return _0x150a63(_0x7ee69f);},'ihUii':function(_0x2da70a,_0x232ddb){return _0x2da70a===_0x232ddb;},'TGtXq':'true','IlYjd':function(_0x63e089,_0x429320){return _0x63e089===_0x429320;},'LkUQU':function(_0x231515,_0x19244d){return _0x231515===_0x19244d;},'rJrlC':function(_0x5f3ff8,_0x3a2bac){return _0x5f3ff8===_0x3a2bac;},'RDgGC':_0x35d742(0x99),'bCJlJ':_0x35d742(0x122),'VdTuM':_0x35d742(0x128),'cPgfS':function(_0x344aaf,_0x525dd0){return _0x344aaf(_0x525dd0);},'Bawos':_0x35d742(0x104),'xEJfM':function(_0x1cbfdb,_0x5e323f){return _0x1cbfdb>=_0x5e323f;},'jqOdX':function(_0x5f1414,_0x4e43a9){return _0x5f1414<_0x4e43a9;},'VEkEp':function(_0x4b403f,_0x13d9dc){return _0x4b403f>=_0x13d9dc;},'qlghT':'tcg\x20config\x20setup\x20successful.','iJjfp':_0x35d742(0x125),'BuTfh':function(_0x3f6ade){return _0x3f6ade();}},_0x309db8=PerformanceTester[_0x35d742(0xcf)](_0x5c0833[_0x35d742(0x8d)],async()=>{const _0x3dd78f=_0x35d742;try{const _0x100753=new Date(),_0x27b876=helper['getProxyConfigForTcg'](this['config']),_0x493fd1=_0x5c0833[_0x3dd78f(0x79)](require,path[_0x3dd78f(0x17b)](__dirname,_0x5c0833[_0x3dd78f(0x98)])),_0x58ace6=_0x5c0833['zRhrl'](timeoutPromise,constants[_0x3dd78f(0x87)],_0x5c0833[_0x3dd78f(0x177)],_0x5c0833[_0x3dd78f(0xa3)],_0x100753,this[_0x3dd78f(0xd3)],this[_0x3dd78f(0xa8)]),_0x3b7792={'tcgUrl':constants[_0x3dd78f(0x7e)],'sdkVersion':_0x5c0833[_0x3dd78f(0x137)](require,_0x5c0833['beACD'])[_0x3dd78f(0x179)],'methodUsed':_0x5c0833[_0x3dd78f(0x9d)],'proxyConfig':_0x27b876,'os':os[_0x3dd78f(0x7d)]()};if(_0x27b876&&_0x27b876['proxyUrl']){utilities[_0x3dd78f(0x158)](constants['AI_PROXY_FAILURE'],_0x3b7792,this['config'],this['framework']);return;}const _0x26a2db={};_0x26a2db[_0x3dd78f(0x89)]=_0x27b876;const _0x18a0e0=await Promise[_0x3dd78f(0x13c)]([_0x493fd1[_0x3dd78f(0x11b)](this[_0x3dd78f(0xd3)][_0x3dd78f(0x15f)],this[_0x3dd78f(0xd3)]['userName'],constants[_0x3dd78f(0x7e)],_0x5c0833[_0x3dd78f(0xf5)](require,_0x5c0833[_0x3dd78f(0xd2)])[_0x3dd78f(0x179)],_0x26a2db)['then'](_0x424258=>{return _0x58ace6['cancel'](),_0x424258;}),_0x58ace6]);_0x18a0e0[_0x3dd78f(0x110)]=_0x5c0833[_0x3dd78f(0xb2)](_0x18a0e0[_0x3dd78f(0x110)],_0x5c0833['TGtXq'])||_0x5c0833['IlYjd'](_0x18a0e0[_0x3dd78f(0x110)],!![]);const _0x3409ec=_0x5c0833[_0x3dd78f(0xb2)](this[_0x3dd78f(0xd3)]['selfHeal'],!![])||_0x5c0833['LkUQU'](this[_0x3dd78f(0xd3)][_0x3dd78f(0x162)],_0x5c0833[_0x3dd78f(0x106)]);if(_0x5c0833[_0x3dd78f(0x13a)](_0x18a0e0[_0x3dd78f(0x92)],constants[_0x3dd78f(0x152)])&&_0x3409ec)logger['info'](_0x5c0833[_0x3dd78f(0xf9)]);else{if(!_0x18a0e0[_0x3dd78f(0x8f)]&&_0x5c0833['IlYjd'](_0x18a0e0[_0x3dd78f(0xc0)],0x1f7)&&_0x3409ec)logger['info'](_0x5c0833[_0x3dd78f(0x12c)]),utilities[_0x3dd78f(0x158)](constants[_0x3dd78f(0x131)],_0x3b7792,this[_0x3dd78f(0xd3)],this[_0x3dd78f(0xa8)]);else{if(!_0x18a0e0[_0x3dd78f(0x8f)]&&_0x3409ec){logger['info'](_0x5c0833[_0x3dd78f(0x176)]);const _0x3e0f57={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x5c0833['cPgfS'](require,_0x5c0833[_0x3dd78f(0xd2)])[_0x3dd78f(0x179)],'methodUsed':_0x5c0833[_0x3dd78f(0x9d)],'proxyConfig':_0x27b876,'os':os[_0x3dd78f(0x7d)]()};utilities[_0x3dd78f(0x158)](constants[_0x3dd78f(0xaf)],_0x3e0f57,this[_0x3dd78f(0xd3)],this[_0x3dd78f(0xa8)]);}else{if(_0x18a0e0[_0x3dd78f(0x8f)]&&!_0x18a0e0['isHealingEnabled']&&_0x3409ec)logger['info'](_0x5c0833[_0x3dd78f(0x7a)]);else{if(_0x5c0833['xEJfM'](_0x18a0e0[_0x3dd78f(0xc0)],0xc8)&&_0x5c0833[_0x3dd78f(0xca)](_0x18a0e0[_0x3dd78f(0xc0)],0x12c))utilities[_0x3dd78f(0x158)](constants[_0x3dd78f(0x88)],_0x3b7792,this[_0x3dd78f(0xd3)],this['framework']);else{if(_0x5c0833[_0x3dd78f(0xfc)](_0x18a0e0[_0x3dd78f(0xc0)],0x190))_0x3b7792[_0x3dd78f(0xc0)]=_0x18a0e0[_0x3dd78f(0xc0)],utilities[_0x3dd78f(0x158)](constants[_0x3dd78f(0x90)],_0x3b7792,this[_0x3dd78f(0xd3)],this[_0x3dd78f(0xa8)]);else!_0x18a0e0[_0x3dd78f(0xc0)]&&utilities[_0x3dd78f(0x158)](constants[_0x3dd78f(0x116)],_0x3b7792,this['config'],this[_0x3dd78f(0xa8)]);}}}}}if(_0x18a0e0[_0x3dd78f(0x8f)]&&_0x18a0e0['isHealingEnabled']){const _0x352513={};_0x352513['tcgAuthConfig']=_0x18a0e0;const _0x280c68=_0x352513;_0x27b876&&(_0x280c68['proxyConfig']=_0x27b876),_0x280c68['framework']=this['framework'],_0x280c68['bstackConfig']=this['config'],helper['setupTcgConfigFile'](_0x280c68),logger[_0x3dd78f(0xd6)](_0x5c0833[_0x3dd78f(0x123)]);}}catch(_0x3d6a77){logger[_0x3dd78f(0xd6)](_0x3dd78f(0x114)+(_0x3d6a77[_0x3dd78f(0x92)]?_0x3d6a77[_0x3dd78f(0x92)]:''));}});await _0x5c0833[_0x35d742(0xe7)](_0x309db8);}[a94_0x2d6f19(0xe3)](){const _0x35117f=a94_0x2d6f19,_0xec50a={'TCmIL':function(_0x574fdd,_0x5aeecc){return _0x574fdd(_0x5aeecc);},'jYluG':_0x35117f(0xdb)};_0xec50a['TCmIL'](require,_0xec50a['jYluG'])();}[a94_0x2d6f19(0x145)](){const _0x5af941=a94_0x2d6f19,_0x1d87e1={};_0x1d87e1[_0x5af941(0x159)]=_0x5af941(0x16a),_0x1d87e1['jyJJc']=_0x5af941(0x17f),_0x1d87e1[_0x5af941(0xa7)]=_0x5af941(0xe9);const _0x4f58b8=_0x1d87e1,_0x4815de=_0xfd1cde=>{const _0xc366b3=_0x5af941,_0x411928=_0x4f58b8['mCZwg'][_0xc366b3(0x97)]('|');let _0x4a2246=0x0;while(!![]){switch(_0x411928[_0x4a2246++]){case'0':logger[_0xc366b3(0xd6)](util[_0xc366b3(0x15a)](_0xfd1cde));continue;case'1':this['unhandledErrors'][_0xc366b3(0xe6)](util[_0xc366b3(0x15a)]('%j',_0xfd1cde));continue;case'2':ClientTroubleShootingService[_0xc366b3(0x108)]();continue;case'3':logger[_0xc366b3(0x150)](_0xfd1cde[_0xc366b3(0x92)]);continue;case'4':PerformanceTester[_0xc366b3(0xa6)](_0xfd1cde);continue;}break;}};process['on'](_0x4f58b8[_0x5af941(0xab)],_0x4815de),process['on'](_0x4f58b8[_0x5af941(0xa7)],_0x4815de);}async['intExitHandler'](_0x4a03e0){const _0x53d9bf=a94_0x2d6f19,_0x20ff75={};_0x20ff75[_0x53d9bf(0x7c)]=_0x53d9bf(0x136),_0x20ff75[_0x53d9bf(0x175)]=function(_0x4c08f3,_0x1b4890){return _0x4c08f3+_0x1b4890;},_0x20ff75[_0x53d9bf(0x130)]=_0x53d9bf(0x132),_0x20ff75['JMUxr']=function(_0x523bd1,_0x5cf9b5){return _0x523bd1+_0x5cf9b5;},_0x20ff75[_0x53d9bf(0xd1)]=_0x53d9bf(0xc5),_0x20ff75[_0x53d9bf(0x144)]=function(_0x4ad92d,_0x1372a8){return _0x4ad92d+_0x1372a8;};const _0x13e408=_0x20ff75,_0xdc3a37=_0x13e408[_0x53d9bf(0x7c)]['split']('|');let _0x54d604=0x0;while(!![]){switch(_0xdc3a37[_0x54d604++]){case'0':if(this[_0x13e408[_0x53d9bf(0x175)](_0x13e408['DERlc'],_0x4a03e0)])return;continue;case'1':await TestHubHandler[_0x53d9bf(0x172)](_0x4a03e0);continue;case'2':logger[_0x53d9bf(0xcb)](_0x13e408[_0x53d9bf(0x14a)](_0x13e408[_0x53d9bf(0xd1)],_0x4a03e0));continue;case'3':this[_0x13e408[_0x53d9bf(0x144)](_0x13e408[_0x53d9bf(0x130)],_0x4a03e0)]=!![];continue;case'4':this['killSignal']=_0x4a03e0;continue;case'5':await ClientTroubleShootingService[_0x53d9bf(0x167)](_0x4a03e0);continue;case'6':await ClientTroubleShootingService[_0x53d9bf(0x108)]();continue;case'7':await BrowserstackCLI[_0x53d9bf(0xb9)]()['stop']();continue;}break;}}['exitHandler'](){const _0x307ab2=a94_0x2d6f19,_0x5cc1a0={'vLJhB':function(_0x17adda,_0x4d458d){return _0x17adda===_0x4d458d;},'dlpHG':_0x307ab2(0x146),'hbHAi':function(_0x177cf2,_0x5dba1b){return _0x177cf2>_0x5dba1b;},'goXEF':function(_0x407e15,_0x539d4a){return _0x407e15(_0x539d4a);},'tRqun':function(_0x53a44c){return _0x53a44c();},'rYOwt':_0x307ab2(0x120)};let _0x5238ff=0x0;return async()=>{const _0x1f21b2=_0x307ab2;_0x5238ff++;if(_0x5cc1a0[_0x1f21b2(0xef)](_0x5238ff,0x1)){helper['checkStopLocalBinaryOnExit'](this[_0x1f21b2(0xa8)])&&await this[_0x1f21b2(0xb3)]();try{logger['debug'](_0x5cc1a0[_0x1f21b2(0x9a)]),await TestHubHandler[_0x1f21b2(0x172)](_0x5238ff),await ClientTroubleShootingService[_0x1f21b2(0x108)](),await BrowserstackCLI[_0x1f21b2(0xb9)]()['stop']('1');}catch(_0x45146a){logger[_0x1f21b2(0xd6)](_0x1f21b2(0xed)+util['format'](_0x45146a));}PerformanceTester[_0x1f21b2(0xf6)](PerformanceEvents[_0x1f21b2(0xc4)]);if(PerformanceTester[_0x1f21b2(0x118)]()){const {measures:_0x2e6594,errors:_0x2a5243}=await PerformanceTester[_0x1f21b2(0x119)](),_0x4c1121={};if(_0x2e6594&&_0x5cc1a0['hbHAi'](_0x2e6594[_0x1f21b2(0x77)],0x0)||_0x2a5243&&_0x5cc1a0['hbHAi'](_0x2a5243[_0x1f21b2(0x77)],0x0)){const _0x3b3be7={};_0x3b3be7[_0x1f21b2(0xfd)]=_0x2e6594,_0x3b3be7[_0x1f21b2(0xb0)]=_0x2a5243,Object[_0x1f21b2(0xe0)](_0x4c1121,_0x3b3be7);}try{const _0x426139=await helper[_0x1f21b2(0x86)](_0x4c1121,this[_0x1f21b2(0xd3)]);logger[_0x1f21b2(0xd6)](_0x1f21b2(0xd0)+_0x5cc1a0[_0x1f21b2(0x102)](getEdsInstrumentationAPIUrl,'')+_0x1f21b2(0xc1)+_0x426139[_0x1f21b2(0xb6)]);}catch(_0x4f9107){logger[_0x1f21b2(0xd6)](_0x1f21b2(0x10f)+_0x5cc1a0[_0x1f21b2(0x102)](getEdsInstrumentationAPIUrl,'')+_0x1f21b2(0x16b)+util[_0x1f21b2(0x15a)](_0x4f9107));}try{fs['writeFileSync'](path[_0x1f21b2(0x17b)](_0x5cc1a0[_0x1f21b2(0x121)](getLogDir),_0x5cc1a0[_0x1f21b2(0x160)]),JSON['stringify'](_0x4c1121));}catch(_0x37935c){logger[_0x1f21b2(0xd6)](_0x1f21b2(0xf7)+_0x37935c);}}}logger&&logger['close'](),fileLogger&&fileLogger[_0x1f21b2(0x15e)]();};}}function a94_0x2f5f(_0x3d7414,_0x1c0378){const _0x5d4bf5=a94_0x5d4b();return a94_0x2f5f=function(_0x2f5fcb,_0x4afecb){_0x2f5fcb=_0x2f5fcb-0x77;let _0xb8cdbe=_0x5d4bf5[_0x2f5fcb];return _0xb8cdbe;},a94_0x2f5f(_0x3d7414,_0x1c0378);}function a94_0x5d4b(){const _0x20c5ed=['RDgGC','zPIap','./percy/utils','VEkEp','measures','1230160vFtThK','getLocalConfig','itAfs','cliConfig','goXEF','Percy\x20started\x20successfully','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','rSfjs','TGtXq','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','reportFinalDetectionState','percy','true','907840sIjIIz','skipSessionStatus','SIGABRT','default','Failed\x20to\x20send\x20data\x20to\x20','isHealingEnabled','qsRNs','VFKhp','qacdk','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','errorMessage','INVALID_INIT_RESP_WITH_USER_IMPACT','isUndefined','isEnabled','finalize','warn','init','__isPlaywrightInstalled','normalizeTestReportingEnvVars','codeceptjs','skipSessionName','events.json','tRqun','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','qlghT','mgNwk','aiHeal:tcgAuth','false','PHtmn','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','playwrightUrl','intExitHandler','ats-repeater','bCJlJ','UMRVk','wBaLZ','3|22|17|16|21|20|4|8|5|14|1|2|11|0|18|19|13|12|9|15|23|10|7|6','DERlc','TCG_DOWN','handled','../bin/v2/modules/loadTestModule','env','stopLocalBinary','0|3|2|4|5|1|6|7','LETxs','browserStackLocalOptions','getAccessKey','rJrlC','FYSja','race','Local\x20binary\x20started\x20successfully','setLogLevel','generateLocalIdentifier','./timeoutPromise','setCredentialsFromYmlConfig','kwHOP','sdkRunId','pLvxd','handleExceptions','Calling\x20Build\x20Stop\x20from\x20ExitHandler','localIdentifier','isTrialGrid','4.5.0','JMUxr','envConfig','getFinalCaps','beforeExit','ordBa','SDK\x20run\x20started\x20with\x20id:\x20','error','customRepeaters','UPGRADE_REQUIRED','?caps=','../bin/v2/browserstackCLI','KfkZq','getLocalIdentifier','vUTgh','fireFunnelTestEvent','mCZwg','format','toString','uuid','No\x20config\x20provided.','close','accessKey','rYOwt','getPackageVersion','selfHeal','isRunning','isTurboScaleSession','wTYRL','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','reportProcessInterruptionSituation','../hubAllocationMethods','cGoji','3|0|1|4|2','\x20with\x20error\x20','sanitizeCaps','jSQrF','./performance/constants','PcSRt','nKzQv','turboScaleUrl','stop','setupPercy','initialize','zHqpp','VdTuM','fGceo','oEaCW','version','FRAMEWORK','join','./performance/performance-tester','SjbnQ','mpMqW','unhandledRejection','length','preInitialize','dKZtZ','Bawos','isLTSSession','QdeDY','platform','TCG_URL','zGBIm','skipBinaryInitialisation','turboScaleGridDetails','SIGHUP','browserstackLocal','isTrue','setupTCGAuth','sendToEDS','TCG_AUTH_TIMEOUT','AI_INIT_SUCCESSFUL','proxy','CVlNf','SIGINT','../../package.json','iJjfp','setupBrowserstackLocal','isAuthenticated','AI_INIT_FAILURE','isBrowserstackInfra','message','EcLTu','FuspK','winstonLogger','includes','split','advtk','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','dlpHG','localOptions','compareVersions','wsklp','ElUvE','2310453KgItOw','integrations','toLowerCase','SrxSO','TaVEO','kgKvt','./helper','captureError','iYQVy','framework','setUpHubUrl','657269qyDCyG','jyJJc','scSpE','Error\x20in\x20percy\x20setup\x20','exitHandler','TCG_AUTH_FAILURE','exceptions','getConfigPath','ihUii','stopBrowserstackLocal','wWZSO','parallelsPerPlatform','statusCode','stopPercy','Error\x20occured\x20while\x20stopping\x20percy','getInstance','pSMmI','BROWSERSTACK_PERCY','selenium-webdriver','XZpxG','hBKsM','useW3C','status','\x20with\x20response\x20','LgXeT','SIGTERM','SDK_CLEANUP','Shutdown\x20triggered\x20by\x20','nNMxe','startPercy','3176420BDyony','BrowserstackHealingInitFailed','jqOdX','info','./testhub/utils','SDKTestAttempted','450vCmlTM','measureWrapper','Data\x20sent\x20successfully\x20to\x20','nJiDZ','beACD','config','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','./utilities','debug','platforms','url','custom-repeater','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','./setKeepAlive','isNotUndefined','getHubUrl','51443bZFPHE','win32','assign','Error\x20occured\x20while\x20stopping\x20local\x20binary','BROWSERSTACK_TURBOSCALE','setupKeepAlive','532976DCMsCT','bind','push','BuTfh','OTVKK','uncaughtException','SIGBREAK','turboScaleOptions','path','Error\x20in\x20sending\x20testhub\x20stop:\x20','setProxySettings','vLJhB','setCLICaps','testContextOptions','requireSeleniumWebdriverCheck','startMonitoring','setBrowserstackInfraFromConfig','lRhCy','end','Error\x20in\x20writing\x20events\x20to\x20file\x20','forceLocal'];a94_0x5d4b=function(){return _0x20c5ed;};return a94_0x5d4b();}exports[a94_0x2d6f19(0x10e)]=BrowserStackSetup;