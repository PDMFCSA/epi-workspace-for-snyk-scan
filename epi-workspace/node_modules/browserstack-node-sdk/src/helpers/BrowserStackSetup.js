const a55_0xab2264=a55_0x4541;function a55_0x4716(){const _0x309262=['TCG_DOWN','WSugK','300766dgvjKd','turboScaleUrl','exceptions','8yFoaHQ','uuid','238190lVyoHJ','FRAMEWORK','setLogLevel','AUTOLOGCAPTURE_NOTIFICATION','checkStopLocalBinaryOnExit','writeFileSync','getTurboScaleGridDetails','ZklHi','../../package.json','BrowserstackHealing.init\x20method\x20timed\x20out','uJqhg','format','FWOkH','error','setupBrowserstackLocal','stopBrowserstackLocal','WNgwc','stopLocalBinary','OdmfD','util','INVALID_INIT_RESP_WITH_USER_IMPACT','AI_PROXY_FAILURE','./performance/constants','beforeExit','ciJzd','QfFBE','QFOfr','tcgAuthConfig','VMdml','isRunning','../bin/utils/constants','false','stop','debug','browserStackLocalOptions','AqmqN','Calling\x20Build\x20Stop\x20from\x20ExitHandler','BROWSERSTACK_PERCY','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','UEssA','sanitizeCaps','proxyConfig','kffDH','tcg\x20config\x20setup\x20successful.','setupPercy','isHealingEnabled','turboScaleOptions','version','HFFHD','init','OhjDQ','setUpHubUrl','Error\x20occured\x20while\x20stopping\x20percy','jnhUE','split','tsEFr','measureWrapper','\x20with\x20error\x20','BqbWk','codeceptjs','getLocalConfig','SDK_CLEANUP','toLowerCase','skipBinaryInitialisation','central_scanner','browserstackLocal','Local\x20binary\x20stopped','includes','race','VNJWU','UPGRADE_REQUIRED','skipSessionName','getUserName','Error\x20occured\x20while\x20stopping\x20local\x20binary','proxy','SIGINT','TCG_AUTH_TIMEOUT','localIdentifier','then','./utilities','captureError','stringify','SDK\x20run\x20started\x20with\x20id:\x20','fireFunnelTestEvent','iAmHq','BROWSERSTACK_TURBOSCALE','join','Percy\x20stopped','8054264YjbPgZ','win32','psogl','Error\x20in\x20percy\x20setup\x20','TCG_AUTH_FAILURE','parallelsPerPlatform','8953vFzrQe','integrations','toString','envConfig','setCLICaps','bstackConfig','log/events.json','accessKey','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','SDKTestAttempted','\x20with\x20response\x20','measures','winstonLogger','zuBUE','./testhub/utils','exitHandler','setHandlePWError','5mhdIFE','isTrue','../hubAllocationMethods','uwyBy','platforms','AI_INIT_SUCCESSFUL','wWMTW','framework','LuHXb','?caps=','./setKeepAlive','SIGHUP','info','readConfig','true','dDEhI','getLocalIdentifier','skipSessionStatus','hAhXy','getProxyConfigForTcg','config','handled','sEJYu','setupKeepAlive','PHMhp','kaoXd','BTQJD','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','setupTcgConfigFile','getConfigPath','cliConfig','generateLocalIdentifier','stopPercy','killSignal','platform','BiROt','selfHeal','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','./testhub/testhubHandler','SIGQUIT','setEnvCaps','3305073fowzza','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','errorMessage','12207070gYVRwZ','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','finalize','XatXZ','getPackageVersion','SIGABRT','startLocalBinary','4.5.0','eanUm','hubUrl','percy','intExitHandler','constructor','initialize','RqVhS','setupTCGAuth','laeOM','TCG_URL','allocateHub','36381961WvcxvN','CBifa','vStIo','EXTsb','UXtZC','tLiZj','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','ssGOk','yNHQl','getHubUrl','isEnabled','path','env','aoEwo','VjpcD','HWBXX','message','XncGz','Data\x20sent\x20successfully\x20to\x20','BrowserstackHealingInitFailed','eocRp','IuWwZ','sdkRunID','length','OVEuq','assign','HDqGl','WRTMu','LNJaM','testContextOptions','statusCode','isUndefined','ats-repeater','customRepeaters','useW3C','9SMRJgC','status','BGLyo','../ai-sdk-node/bundle','unhandledRejection','Lzroj','138YMtIQY','TceCx','isAuthenticated','end','forceLocal','playwrightUrl','getFinalCaps','unhandledErrors','userName','./timeoutPromise','isBrowserstackInfra','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','./performance/performance-tester','./ats/helper','Failed\x20to\x20send\x20data\x20to\x20','YSbIO','OBtAy','uncaughtException','handleExceptions','No\x20config\x20provided.','tOolB','compareVersions','9|37|15|2|38|43|22|0|27|13|10|34|6|26|31|4|14|11|35|16|41|32|7|25|3|23|18|8|33|39|12|1|28|36|30|20|29|21|42|40|19|5|24|17','warn','disableAutoCaptureLogs','Local\x20binary\x20started\x20successfully','MfeSy','ARlat'];a55_0x4716=function(){return _0x309262;};return a55_0x4716();}(function(_0x2a1a7a,_0x3ef8d9){const _0x4a8c0a=a55_0x4541,_0x3a8c51=_0x2a1a7a();while(!![]){try{const _0x5a1af2=parseInt(_0x4a8c0a(0x1e0))/0x1*(parseInt(_0x4a8c0a(0x16c))/0x2)+-parseInt(_0x4a8c0a(0x209))/0x3+-parseInt(_0x4a8c0a(0x16f))/0x4*(parseInt(_0x4a8c0a(0x171))/0x5)+-parseInt(_0x4a8c0a(0x248))/0x6*(-parseInt(_0x4a8c0a(0x1cf))/0x7)+-parseInt(_0x4a8c0a(0x1c9))/0x8+-parseInt(_0x4a8c0a(0x242))/0x9*(parseInt(_0x4a8c0a(0x20c))/0xa)+parseInt(_0x4a8c0a(0x21f))/0xb;if(_0x5a1af2===_0x3ef8d9)break;else _0x3a8c51['push'](_0x3a8c51['shift']());}catch(_0xc7d8f5){_0x3a8c51['push'](_0x3a8c51['shift']());}}}(a55_0x4716,0xa2306));function a55_0x4541(_0x8c0742,_0x426b54){const _0x471602=a55_0x4716();return a55_0x4541=function(_0x454190,_0x3146f6){_0x454190=_0x454190-0x164;let _0x12a7c8=_0x471602[_0x454190];return _0x12a7c8;},a55_0x4541(_0x8c0742,_0x426b54);}const util=require(a55_0xab2264(0x184)),os=require('os'),path=require(a55_0xab2264(0x22a)),{v4:uuidv4}=require(a55_0xab2264(0x170)),fs=require('fs'),constants=require(a55_0xab2264(0x18f)),{isTurboScaleSession}=require(a55_0xab2264(0x255)),logger=require('./logger')[a55_0xab2264(0x1db)],helper=require('./helper'),utilities=require(a55_0xab2264(0x1c0)),percyHelper=require('./percy/utils'),hubAllocator=require(a55_0xab2264(0x1e2)),PerformanceTester=require(a55_0xab2264(0x254)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a55_0xab2264(0x187)),{setPercyFlag}=require(a55_0xab2264(0x1dd)),TestHubHandler=require(a55_0xab2264(0x206)),timeoutPromise=require(a55_0xab2264(0x251));class BrowserStackSetup{constructor(_0x3373a7,_0x5d736e){const _0x45b38a=a55_0xab2264,_0x36814c={'WRTMu':_0x45b38a(0x164),'kaoXd':'userName\x20or\x20accessKey\x20is\x20not\x20defined','mlmhP':_0x45b38a(0x1eb),'ARlat':_0x45b38a(0x25b),'OVEuq':_0x45b38a(0x188),'ciJzd':_0x45b38a(0x1bc),'BiROt':function(_0x3c5496,_0x54955f){return _0x3c5496===_0x54955f;},'dDEhI':function(_0x4d457f,_0x145c84){return _0x4d457f!==_0x145c84;},'QFOfr':_0x45b38a(0x1ca),'MfeSy':_0x45b38a(0x211),'LuHXb':_0x45b38a(0x207),'HFFHD':'SIGBREAK','buWci':function(_0x58313f){return _0x58313f();},'RqVhS':_0x45b38a(0x1d8),'ZklHi':_0x45b38a(0x253),'eczpC':_0x45b38a(0x1d7),'JNoWh':function(_0x1192ea,_0x277abc){return _0x1192ea<_0x277abc;},'pIRCX':function(_0x27c61d,_0x5898a3){return _0x27c61d(_0x5898a3);},'BGLyo':'selenium-webdriver','OdmfD':_0x45b38a(0x213),'IuWwZ':_0x45b38a(0x1d0),'FWOkH':'SIGTERM'},_0x499edd=_0x36814c[_0x45b38a(0x23a)][_0x45b38a(0x1a7)]('|');let _0x2a63e2=0x0;while(!![]){switch(_0x499edd[_0x2a63e2++]){case'0':this[_0x45b38a(0x1f4)]['testContextOptions']=this[_0x45b38a(0x1f4)][_0x45b38a(0x23c)]||{};continue;case'1':process[_0x45b38a(0x22b)][_0x45b38a(0x1c6)]&&(this[_0x45b38a(0x1f4)]['turboScale']=helper['isTrue'](process[_0x45b38a(0x22b)][_0x45b38a(0x1c6)]),this[_0x45b38a(0x1f4)][_0x45b38a(0x19f)]=this['config'][_0x45b38a(0x19f)]||{});continue;case'2':this[_0x45b38a(0x1b2)]=null;continue;case'3':if(helper[_0x45b38a(0x23e)](helper[_0x45b38a(0x1b9)](this[_0x45b38a(0x1f4)]))||helper[_0x45b38a(0x23e)](helper['getAccessKey'](this['config'])))throw new Error(_0x36814c[_0x45b38a(0x1f9)]);continue;case'4':global[_0x45b38a(0x235)]=this['sdkRunID'];continue;case'5':process['on'](_0x36814c['mlmhP'],this[_0x45b38a(0x217)]);continue;case'6':this[_0x45b38a(0x1e7)]=_0x5d736e;continue;case'7':helper[_0x45b38a(0x24e)](this['config'],this['cliConfig'],this[_0x45b38a(0x1d2)]);continue;case'8':helper[_0x45b38a(0x173)](this[_0x45b38a(0x1f4)],this[_0x45b38a(0x1fe)],this['envConfig']);continue;case'9':this[_0x45b38a(0x24f)]=[];continue;case'10':global[_0x45b38a(0x1e7)]=_0x5d736e;continue;case'11':if(helper[_0x45b38a(0x23e)](this['config']))throw new Error(_0x36814c[_0x45b38a(0x169)]);continue;case'12':this['handleExceptions']();continue;case'13':global[_0x45b38a(0x1f4)]=this[_0x45b38a(0x1f4)];continue;case'14':logger['info'](_0x45b38a(0x1c3)+this[_0x45b38a(0x235)]);continue;case'15':this[_0x45b38a(0x1d2)]=helper[_0x45b38a(0x208)]();continue;case'16':helper['setBrowserstackInfraFromConfig'](this[_0x45b38a(0x1f4)],this[_0x45b38a(0x1fe)]);continue;case'17':process['on'](_0x36814c[_0x45b38a(0x237)],this['exitHandler']());continue;case'18':this[_0x45b38a(0x1f4)]['browserStackLocalOptions']['skipBinaryInitialisation']=helper[_0x45b38a(0x1e1)](this['config'][_0x45b38a(0x193)][_0x45b38a(0x1b0)]);continue;case'19':process['on'](_0x36814c[_0x45b38a(0x189)],this['intExitHandler']);continue;case'20':!this[_0x45b38a(0x1f4)][_0x45b38a(0x23c)]&&(this[_0x45b38a(0x1f4)][_0x45b38a(0x23c)]={});continue;case'21':!this[_0x45b38a(0x1f4)][_0x45b38a(0x166)]&&logger[_0x45b38a(0x1ec)](constants[_0x45b38a(0x174)]);continue;case'22':this[_0x45b38a(0x1f4)][_0x45b38a(0x1e4)]=this[_0x45b38a(0x1f4)][_0x45b38a(0x1e4)]||[];continue;case'23':helper[_0x45b38a(0x1ad)](this[_0x45b38a(0x1f4)])&&helper[_0x45b38a(0x23e)](helper[_0x45b38a(0x1f0)](this[_0x45b38a(0x1f4)]))&&(!helper[_0x45b38a(0x23e)](this[_0x45b38a(0x1f4)][_0x45b38a(0x193)])&&_0x36814c['BiROt'](this[_0x45b38a(0x1f4)][_0x45b38a(0x193)][_0x45b38a(0x218)],Object)?!helper[_0x45b38a(0x1e1)](this['config'][_0x45b38a(0x193)]['skipBinaryInitialisation'])&&(this[_0x45b38a(0x1f4)][_0x45b38a(0x193)][_0x45b38a(0x1be)]=helper[_0x45b38a(0x1ff)]()):this['config'][_0x45b38a(0x193)]={'localIdentifier':helper[_0x45b38a(0x1ff)]()});continue;case'24':_0x36814c[_0x45b38a(0x1ef)](process[_0x45b38a(0x202)],_0x36814c[_0x45b38a(0x18b)])?(process['on'](_0x36814c[_0x45b38a(0x168)],this[_0x45b38a(0x217)]),process['on'](_0x36814c[_0x45b38a(0x1e8)],this['intExitHandler'])):process['on'](_0x36814c[_0x45b38a(0x1a1)],this[_0x45b38a(0x217)]);continue;case'25':!this[_0x45b38a(0x1f4)]['browserStackLocalOptions']&&(this['config'][_0x45b38a(0x193)]=this['config']['localOptions']||{});continue;case'26':this['sdkRunID']=_0x36814c['buWci'](uuidv4);continue;case'27':this[_0x45b38a(0x20b)]={};continue;case'28':if(!helper[_0x45b38a(0x252)]()){try{process[_0x45b38a(0x22b)][_0x45b38a(0x172)]=_0x5d736e,utilities[_0x45b38a(0x1c4)](_0x36814c[_0x45b38a(0x21a)],{},this[_0x45b38a(0x1f4)],this[_0x45b38a(0x1e7)]);}catch(_0x5b9360){logger[_0x45b38a(0x192)](_0x45b38a(0x225)+_0x5b9360);}return;}continue;case'29':try{process[_0x45b38a(0x22b)][_0x45b38a(0x172)]=_0x3373a7['_'][0x0],utilities[_0x45b38a(0x1c4)](_0x36814c[_0x45b38a(0x21a)],{},this[_0x45b38a(0x1f4)],this[_0x45b38a(0x1e7)]);}catch(_0x5c757e){logger[_0x45b38a(0x192)]('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x5c757e);}continue;case'30':(helper[_0x45b38a(0x23e)](this[_0x45b38a(0x1f4)]['platforms'])||helper['isUndefined'](this[_0x45b38a(0x1f4)][_0x45b38a(0x1e4)][_0x45b38a(0x236)]))&&(helper[_0x45b38a(0x23e)](this[_0x45b38a(0x1f4)][_0x45b38a(0x1ce)])?logger[_0x45b38a(0x1ec)](_0x36814c[_0x45b38a(0x178)]):logger[_0x45b38a(0x165)](_0x36814c['eczpC']),this[_0x45b38a(0x1f4)][_0x45b38a(0x1e4)]=[]);continue;case'31':this[_0x45b38a(0x201)]=null;continue;case'32':this['config']['testContextOptions'][_0x45b38a(0x1b8)]=!helper[_0x45b38a(0x252)]()||helper[_0x45b38a(0x1e1)](this[_0x45b38a(0x1f4)][_0x45b38a(0x23c)]['skipSessionName']);continue;case'33':helper[_0x45b38a(0x1df)](this[_0x45b38a(0x1f4)]);continue;case'34':helper[_0x45b38a(0x199)](this[_0x45b38a(0x1f4)]);continue;case'35':if(this[_0x45b38a(0x1f4)][_0x45b38a(0x17e)])throw new Error(this['config']['error']);continue;case'36':helper['requireSeleniumWebdriverCheck'](_0x5d736e)&&(_0x36814c['JNoWh'](_0x36814c['pIRCX'](parseInt,helper['getPackageVersion'](_0x36814c['BGLyo'])),0x3)&&(this[_0x45b38a(0x1f4)][_0x45b38a(0x241)]=![]),_0x36814c['BiROt'](helper[_0x45b38a(0x25d)](helper[_0x45b38a(0x210)](_0x36814c[_0x45b38a(0x244)]),_0x36814c[_0x45b38a(0x183)]),0x1)&&(this[_0x45b38a(0x1f4)][_0x45b38a(0x241)]=!![]));continue;case'37':this[_0x45b38a(0x1fe)]=helper[_0x45b38a(0x1d3)](_0x3373a7);continue;case'38':this['percy']=null;continue;case'39':if(_0x36814c[_0x45b38a(0x203)](_0x5d736e,_0x36814c[_0x45b38a(0x234)]))return;continue;case'40':process['on'](_0x36814c[_0x45b38a(0x17d)],this[_0x45b38a(0x217)]);continue;case'41':this[_0x45b38a(0x1f4)]['testContextOptions'][_0x45b38a(0x1f1)]=!helper[_0x45b38a(0x252)]()||helper[_0x45b38a(0x1e1)](this[_0x45b38a(0x1f4)]['testContextOptions']['skipSessionStatus']);continue;case'42':this['intExitHandler']=this[_0x45b38a(0x217)]['bind'](this);continue;case'43':this[_0x45b38a(0x1f4)]=helper[_0x45b38a(0x1ed)](helper[_0x45b38a(0x1fd)](_0x3373a7));continue;}break;}}async[a55_0xab2264(0x219)](){const _0x4f182e=a55_0xab2264,_0x305e33={'QfFBE':function(_0x97c26,_0x267d04){return _0x97c26(_0x267d04);},'HWBXX':_0x4f182e(0x23f),'tLiZj':'custom-repeater','OhjDQ':'true','oSGXz':function(_0x474796,_0x5069b3){return _0x474796===_0x5069b3;},'biuxz':'playwright','VMdml':function(_0x4fda95,_0x57a737){return _0x4fda95+_0x57a737;},'ssGOk':_0x4f182e(0x1e9),'AqmqN':function(_0x1abd07,_0x90dbf0){return _0x1abd07(_0x90dbf0);},'WSugK':_0x4f182e(0x1ac)};if(_0x305e33[_0x4f182e(0x18a)](isTurboScaleSession,this[_0x4f182e(0x1f4)])){const _0x3bb347=await helper[_0x4f182e(0x177)](this[_0x4f182e(0x1f4)]);this[_0x4f182e(0x1f4)]['turboScaleGridDetails']=_0x3bb347,_0x3bb347['isTrialGrid']&&(this['config'][_0x4f182e(0x1b2)]=!![],this['config'][_0x4f182e(0x193)][_0x4f182e(0x1be)]=_0x305e33[_0x4f182e(0x22e)],this[_0x4f182e(0x1f4)]['browserStackLocalOptions'][_0x305e33[_0x4f182e(0x224)]]=_0x3bb347[_0x4f182e(0x240)]['join'](','),this[_0x4f182e(0x1f4)][_0x4f182e(0x193)][_0x4f182e(0x24c)]=_0x305e33[_0x4f182e(0x1a3)]),this['config'][_0x4f182e(0x16d)]=_0x3bb347['url'],this[_0x4f182e(0x1e7)]&&_0x305e33['oSGXz'](this[_0x4f182e(0x1e7)][_0x4f182e(0x1af)](),_0x305e33['biuxz'])&&(this[_0x4f182e(0x1f4)][_0x4f182e(0x16d)]=_0x305e33[_0x4f182e(0x18d)](_0x3bb347[_0x4f182e(0x24d)],_0x305e33[_0x4f182e(0x226)])),constants['hubUrl']=helper[_0x4f182e(0x228)](this[_0x4f182e(0x1f4)]),logger[_0x4f182e(0x192)](_0x4f182e(0x20d)+constants[_0x4f182e(0x215)]);}helper['setProxySettings'](this['config']),this['setupKeepAlive'](),_0x305e33['AqmqN'](setPercyFlag,this),await this[_0x4f182e(0x17f)](),![_0x305e33[_0x4f182e(0x16b)]][_0x4f182e(0x1b4)](this[_0x4f182e(0x1e7)])&&!_0x305e33[_0x4f182e(0x194)](isTurboScaleSession,this[_0x4f182e(0x1f4)])&&!helper['getCentralUser']()[_0x4f182e(0x1b1)]&&await this[_0x4f182e(0x1a4)]();}async[a55_0xab2264(0x19d)](){const _0x9c5981=a55_0xab2264,_0x1ec049={};_0x1ec049[_0x9c5981(0x1f8)]=function(_0x36fcf9,_0xfe39d){return _0x36fcf9===_0xfe39d;},_0x1ec049[_0x9c5981(0x249)]=_0x9c5981(0x190),_0x1ec049[_0x9c5981(0x227)]=_0x9c5981(0x20a),_0x1ec049[_0x9c5981(0x258)]='Percy\x20started\x20successfully',_0x1ec049['VNJWU']=_0x9c5981(0x1ee),_0x1ec049[_0x9c5981(0x21c)]=_0x9c5981(0x188);const _0x530d56=_0x1ec049;if(helper[_0x9c5981(0x1e1)](this[_0x9c5981(0x1f4)]['percy'])&&(!this['percy']||!this[_0x9c5981(0x216)][_0x9c5981(0x18e)]()))try{this[_0x9c5981(0x216)]=await percyHelper['startPercy'](this[_0x9c5981(0x1f4)]);if(!this[_0x9c5981(0x216)]){process['env'][_0x9c5981(0x196)]=_0x530d56[_0x9c5981(0x249)];throw new Error(_0x530d56['yNHQl']);}logger['info'](_0x530d56['OBtAy']),process[_0x9c5981(0x22b)][_0x9c5981(0x196)]=_0x530d56[_0x9c5981(0x1b6)];let _0x2c1172=0x0;const _0x246458=async()=>{const _0x3ca4d5=_0x9c5981;_0x2c1172++,_0x530d56[_0x3ca4d5(0x1f8)](_0x2c1172,0x1)&&await this[_0x3ca4d5(0x200)]();};process['on'](_0x530d56[_0x9c5981(0x21c)],_0x246458);}catch(_0x1db038){process[_0x9c5981(0x22b)][_0x9c5981(0x196)]=_0x530d56[_0x9c5981(0x249)],logger[_0x9c5981(0x192)](_0x9c5981(0x1cc)+_0x1db038);throw new Error(_0x1db038[_0x9c5981(0x1d1)]());}}async[a55_0xab2264(0x200)](){const _0x2a0880=a55_0xab2264,_0x2f5018={};_0x2f5018[_0x2a0880(0x247)]=_0x2a0880(0x1c8),_0x2f5018[_0x2a0880(0x223)]=_0x2a0880(0x1a5);const _0x2a759b=_0x2f5018;if(this[_0x2a0880(0x216)]&&this[_0x2a0880(0x216)][_0x2a0880(0x18e)]())try{await percyHelper[_0x2a0880(0x200)](this['percy']),logger[_0x2a0880(0x1ec)](_0x2a759b[_0x2a0880(0x247)]);}catch(_0x33048a){logger['error'](_0x2a759b[_0x2a0880(0x223)],_0x33048a[_0x2a0880(0x22f)]);}}async[a55_0xab2264(0x17f)](){const _0x67348a=a55_0xab2264,_0x49ee79={};_0x49ee79['BqbWk']=_0x67348a(0x205),_0x49ee79[_0x67348a(0x1e6)]=_0x67348a(0x167);const _0x400b69=_0x49ee79;if(helper[_0x67348a(0x252)]()&&helper[_0x67348a(0x1e1)](this[_0x67348a(0x1f4)][_0x67348a(0x1b2)])&&(!this[_0x67348a(0x1b2)]||!this['browserstackLocal'][_0x67348a(0x18e)]()))try{if(this['config'][_0x67348a(0x193)][_0x67348a(0x1b0)]){logger[_0x67348a(0x192)](_0x400b69[_0x67348a(0x1ab)]);return;}this[_0x67348a(0x1b2)]=await helper[_0x67348a(0x212)](this[_0x67348a(0x1f4)]),logger[_0x67348a(0x1ec)](_0x400b69[_0x67348a(0x1e6)]);}catch(_0x2405aa){logger['debug'](_0x2405aa);throw new Error(_0x2405aa[_0x67348a(0x1d1)]());}}async[a55_0xab2264(0x180)](){const _0x2678e9=a55_0xab2264,_0x2c8efc={};_0x2c8efc[_0x2678e9(0x181)]=_0x2678e9(0x1b3),_0x2c8efc[_0x2678e9(0x1cb)]=_0x2678e9(0x1ba);const _0x4b4d78=_0x2c8efc;if(this[_0x2678e9(0x1b2)]&&this['browserstackLocal']['isRunning']())try{await helper[_0x2678e9(0x182)](this[_0x2678e9(0x1b2)]),logger[_0x2678e9(0x1ec)](_0x4b4d78[_0x2678e9(0x181)]);}catch(_0x4f0050){logger['error'](_0x4b4d78[_0x2678e9(0x1cb)],_0x4f0050[_0x2678e9(0x22f)]);}}async[a55_0xab2264(0x1a4)](){const _0x192e94=a55_0xab2264;return PerformanceTester[_0x192e94(0x1a9)](PerformanceAutEvents['HUB_MANAGEMENT'],async()=>{const _0x4d39c0=_0x192e94;await hubAllocator[_0x4d39c0(0x21e)](this[_0x4d39c0(0x1f4)]);})();}async[a55_0xab2264(0x21b)](){const _0xf7de84=a55_0xab2264,_0x28ec9c={'jnhUE':function(_0x28c888,_0x2d0bb2){return _0x28c888(_0x2d0bb2);},'XVubX':_0xf7de84(0x245),'YLZVE':function(_0x35df41,_0x22bd5f,_0x3de011,_0x1922a7,_0x5c8003,_0x2e7885,_0x185da2){return _0x35df41(_0x22bd5f,_0x3de011,_0x1922a7,_0x5c8003,_0x2e7885,_0x185da2);},'eFSPG':_0xf7de84(0x17a),'VjpcD':_0xf7de84(0x232),'uwyBy':_0xf7de84(0x179),'BTQJD':'BrowserstackHealing.init','CBifa':function(_0x34fc4b,_0x5c9b9c){return _0x34fc4b===_0x5c9b9c;},'aoEwo':_0xf7de84(0x1ee),'uJqhg':function(_0x28410b,_0x362a8b){return _0x28410b===_0x362a8b;},'fMpTs':_0xf7de84(0x197),'iAmHq':function(_0x28f486,_0x9d3629){return _0x28f486===_0x9d3629;},'XatXZ':'Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','URMTR':'Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','QrsMO':function(_0x7437bf,_0x49e61c){return _0x7437bf(_0x49e61c);},'LNJaM':_0xf7de84(0x1fb),'TQRaX':function(_0x22d25a,_0x92f6d){return _0x22d25a>=_0x92f6d;},'YSbIO':function(_0xb8eddf,_0x5cc19f){return _0xb8eddf<_0x5cc19f;},'XncGz':function(_0x281f65,_0x4cce11){return _0x281f65>=_0x4cce11;},'eanUm':_0xf7de84(0x19c),'orNum':'aiHeal:tcgAuth','HMtvv':function(_0x9ca397){return _0x9ca397();}},_0x2952ab=PerformanceTester[_0xf7de84(0x1a9)](_0x28ec9c['orNum'],async()=>{const _0x2249f6=_0xf7de84;try{const _0x1509b1=new Date(),_0x4e54c0=helper[_0x2249f6(0x1f3)](this['config']),_0x5d32cd=_0x28ec9c['jnhUE'](require,path[_0x2249f6(0x1c7)](__dirname,_0x28ec9c['XVubX'])),_0x4d40ac=_0x28ec9c['YLZVE'](timeoutPromise,constants[_0x2249f6(0x1bd)],_0x28ec9c['eFSPG'],_0x28ec9c[_0x2249f6(0x22d)],_0x1509b1,this['config'],this[_0x2249f6(0x1e7)]),_0x59e0b1={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x28ec9c[_0x2249f6(0x1a6)](require,_0x28ec9c[_0x2249f6(0x1e3)])[_0x2249f6(0x1a0)],'methodUsed':_0x28ec9c['BTQJD'],'proxyConfig':_0x4e54c0,'os':os[_0x2249f6(0x202)]()};if(_0x4e54c0&&_0x4e54c0['proxyUrl']){utilities['fireFunnelTestEvent'](constants[_0x2249f6(0x186)],_0x59e0b1,this['config'],this['framework']);return;}const _0x51b4a3={};_0x51b4a3[_0x2249f6(0x1bb)]=_0x4e54c0;const _0x38e665=await Promise[_0x2249f6(0x1b5)]([_0x5d32cd[_0x2249f6(0x1a2)](this[_0x2249f6(0x1f4)][_0x2249f6(0x1d6)],this[_0x2249f6(0x1f4)][_0x2249f6(0x250)],constants[_0x2249f6(0x21d)],_0x28ec9c['jnhUE'](require,_0x28ec9c[_0x2249f6(0x1e3)])[_0x2249f6(0x1a0)],_0x51b4a3)[_0x2249f6(0x1bf)](_0x1e5209=>{return _0x4d40ac['cancel'](),_0x1e5209;}),_0x4d40ac]);_0x38e665[_0x2249f6(0x19e)]=_0x28ec9c[_0x2249f6(0x220)](_0x38e665[_0x2249f6(0x19e)],_0x28ec9c[_0x2249f6(0x22c)])||_0x28ec9c[_0x2249f6(0x220)](_0x38e665[_0x2249f6(0x19e)],!![]);const _0x57f1be=_0x28ec9c[_0x2249f6(0x17b)](this['config'][_0x2249f6(0x204)],!![])||_0x28ec9c[_0x2249f6(0x220)](this['config'][_0x2249f6(0x204)],_0x28ec9c[_0x2249f6(0x22c)]);if(_0x28ec9c[_0x2249f6(0x220)](_0x38e665[_0x2249f6(0x22f)],constants[_0x2249f6(0x1b7)])&&_0x57f1be)logger['info'](_0x28ec9c['fMpTs']);else{if(!_0x38e665[_0x2249f6(0x24a)]&&_0x28ec9c[_0x2249f6(0x1c5)](_0x38e665[_0x2249f6(0x243)],0x1f7)&&_0x57f1be)logger[_0x2249f6(0x1ec)](_0x28ec9c[_0x2249f6(0x20f)]),utilities[_0x2249f6(0x1c4)](constants[_0x2249f6(0x16a)],_0x59e0b1,this['config'],this[_0x2249f6(0x1e7)]);else{if(!_0x38e665[_0x2249f6(0x24a)]&&_0x57f1be){logger[_0x2249f6(0x1ec)](_0x28ec9c['URMTR']);const _0x3905fc={'tcgUrl':constants[_0x2249f6(0x21d)],'sdkVersion':_0x28ec9c['QrsMO'](require,_0x28ec9c['uwyBy'])[_0x2249f6(0x1a0)],'methodUsed':_0x28ec9c[_0x2249f6(0x1fa)],'proxyConfig':_0x4e54c0,'os':os[_0x2249f6(0x202)]()};utilities[_0x2249f6(0x1c4)](constants[_0x2249f6(0x1cd)],_0x3905fc,this[_0x2249f6(0x1f4)],this['framework']);}else{if(_0x38e665[_0x2249f6(0x24a)]&&!_0x38e665[_0x2249f6(0x19e)]&&_0x57f1be)logger[_0x2249f6(0x1ec)](_0x28ec9c[_0x2249f6(0x23b)]);else{if(_0x28ec9c['TQRaX'](_0x38e665[_0x2249f6(0x243)],0xc8)&&_0x28ec9c[_0x2249f6(0x257)](_0x38e665['status'],0x12c))utilities[_0x2249f6(0x1c4)](constants[_0x2249f6(0x1e5)],_0x59e0b1,this[_0x2249f6(0x1f4)],this[_0x2249f6(0x1e7)]);else{if(_0x28ec9c[_0x2249f6(0x230)](_0x38e665[_0x2249f6(0x243)],0x190))_0x59e0b1['status']=_0x38e665[_0x2249f6(0x243)],utilities[_0x2249f6(0x1c4)](constants['AI_INIT_FAILURE'],_0x59e0b1,this[_0x2249f6(0x1f4)],this['framework']);else!_0x38e665[_0x2249f6(0x243)]&&utilities[_0x2249f6(0x1c4)](constants[_0x2249f6(0x185)],_0x59e0b1,this['config'],this[_0x2249f6(0x1e7)]);}}}}}if(_0x38e665[_0x2249f6(0x24a)]&&_0x38e665[_0x2249f6(0x19e)]){const _0x429193={};_0x429193[_0x2249f6(0x18c)]=_0x38e665;const _0x58e562=_0x429193;_0x4e54c0&&(_0x58e562[_0x2249f6(0x19a)]=_0x4e54c0),_0x58e562['framework']=this['framework'],_0x58e562[_0x2249f6(0x1d4)]=this[_0x2249f6(0x1f4)],helper[_0x2249f6(0x1fc)](_0x58e562),logger[_0x2249f6(0x192)](_0x28ec9c[_0x2249f6(0x214)]);}}catch(_0x23b962){logger[_0x2249f6(0x192)]('Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20'+(_0x23b962[_0x2249f6(0x22f)]?_0x23b962[_0x2249f6(0x22f)]:''));}});await _0x28ec9c['HMtvv'](_0x2952ab);}[a55_0xab2264(0x1f7)](){const _0x4db76c=a55_0xab2264,_0x2da299={'kffDH':function(_0x39472c,_0x7db602){return _0x39472c(_0x7db602);},'tsEFr':_0x4db76c(0x1ea)};_0x2da299[_0x4db76c(0x19b)](require,_0x2da299[_0x4db76c(0x1a8)])();}[a55_0xab2264(0x25a)](){const _0x575d89=a55_0xab2264,_0xc5226a={};_0xc5226a['zWnaZ']=_0x575d89(0x246),_0xc5226a[_0x575d89(0x1f2)]=_0x575d89(0x259);const _0x4ca0f0=_0xc5226a,_0xb1e701=_0x110d6e=>{const _0x5b4c6a=_0x575d89;logger[_0x5b4c6a(0x17e)](_0x110d6e[_0x5b4c6a(0x22f)]),logger[_0x5b4c6a(0x192)](util['format'](_0x110d6e)),this[_0x5b4c6a(0x24f)]['push'](util[_0x5b4c6a(0x17c)]('%j',_0x110d6e)),PerformanceTester[_0x5b4c6a(0x1c1)](_0x110d6e);};process['on'](_0x4ca0f0['zWnaZ'],_0xb1e701),process['on'](_0x4ca0f0[_0x575d89(0x1f2)],_0xb1e701);}async['intExitHandler'](_0x12af96){const _0x16f259=a55_0xab2264,_0x9100d3={};_0x9100d3['EXTsb']='2|4|3|0|1',_0x9100d3[_0x16f259(0x198)]=function(_0x23bf8e,_0x5074bf){return _0x23bf8e+_0x5074bf;},_0x9100d3['sEJYu']=_0x16f259(0x1f5),_0x9100d3[_0x16f259(0x233)]=function(_0x138518,_0x4fccd2){return _0x138518+_0x4fccd2;},_0x9100d3[_0x16f259(0x25c)]='Shutdown\x20triggered\x20by\x20';const _0xce0da4=_0x9100d3,_0x135e20=_0xce0da4[_0x16f259(0x222)]['split']('|');let _0x189c9=0x0;while(!![]){switch(_0x135e20[_0x189c9++]){case'0':this[_0x16f259(0x201)]=_0x12af96;continue;case'1':await TestHubHandler[_0x16f259(0x191)](_0x12af96);continue;case'2':if(this[_0xce0da4['UEssA'](_0xce0da4[_0x16f259(0x1f6)],_0x12af96)])return;continue;case'3':logger[_0x16f259(0x1ec)](_0xce0da4[_0x16f259(0x233)](_0xce0da4[_0x16f259(0x25c)],_0x12af96));continue;case'4':this[_0xce0da4[_0x16f259(0x233)](_0xce0da4[_0x16f259(0x1f6)],_0x12af96)]=!![];continue;}break;}}[a55_0xab2264(0x1de)](){const _0x25260a=a55_0xab2264,_0x118970={};_0x118970[_0x25260a(0x239)]=function(_0x19537b,_0x1ee415){return _0x19537b===_0x1ee415;},_0x118970['zuBUE']=_0x25260a(0x195),_0x118970[_0x25260a(0x221)]=function(_0x197c83,_0x35db44){return _0x197c83>_0x35db44;},_0x118970['ziefI']=_0x25260a(0x1d5);const _0x30ed2c=_0x118970;let _0x1153d3=0x0;return async()=>{const _0x1b91fc=_0x25260a;_0x1153d3++;if(_0x30ed2c[_0x1b91fc(0x239)](_0x1153d3,0x1)){helper[_0x1b91fc(0x175)](this['framework'])&&await this['stopBrowserstackLocal']();try{logger[_0x1b91fc(0x192)](_0x30ed2c[_0x1b91fc(0x1dc)]),await TestHubHandler[_0x1b91fc(0x191)](_0x1153d3);}catch(_0xce89d){logger[_0x1b91fc(0x192)]('Error\x20in\x20sending\x20testhub\x20stop:\x20'+util[_0x1b91fc(0x17c)](_0xce89d));}PerformanceTester[_0x1b91fc(0x24b)](PerformanceEvents[_0x1b91fc(0x1ae)]);if(PerformanceTester[_0x1b91fc(0x229)]()){const {measures:_0x4175e9,errors:_0x3545e4}=await PerformanceTester[_0x1b91fc(0x20e)](),_0x1cba82={};if(_0x4175e9&&_0x30ed2c['vStIo'](_0x4175e9[_0x1b91fc(0x236)],0x0)||_0x3545e4&&_0x30ed2c[_0x1b91fc(0x221)](_0x3545e4[_0x1b91fc(0x236)],0x0)){const _0x2bff9b={};_0x2bff9b[_0x1b91fc(0x1da)]=_0x4175e9,_0x2bff9b[_0x1b91fc(0x16e)]=_0x3545e4,Object[_0x1b91fc(0x238)](_0x1cba82,_0x2bff9b);}try{const _0x5252ce=await helper['sendToEDS'](_0x1cba82,this[_0x1b91fc(0x1f4)]);logger[_0x1b91fc(0x192)](_0x1b91fc(0x231)+constants['EDS_URL']+_0x1b91fc(0x1d9)+_0x5252ce[_0x1b91fc(0x23d)]);}catch(_0x2d3fcb){logger[_0x1b91fc(0x192)](_0x1b91fc(0x256)+constants['EDS_URL']+_0x1b91fc(0x1aa)+util[_0x1b91fc(0x17c)](_0x2d3fcb));}try{fs[_0x1b91fc(0x176)](_0x30ed2c['ziefI'],JSON[_0x1b91fc(0x1c2)](_0x1cba82));}catch(_0x9ddd36){logger[_0x1b91fc(0x192)]('Error\x20in\x20writing\x20events\x20to\x20file\x20'+_0x9ddd36);}}}};}}exports['default']=BrowserStackSetup;