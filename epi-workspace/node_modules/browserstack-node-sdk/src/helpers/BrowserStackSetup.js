const a91_0x17f62c=a91_0x1173;(function(_0xf2a491,_0x5e83cc){const _0xedca4d=a91_0x1173,_0x47677e=_0xf2a491();while(!![]){try{const _0x56f350=parseInt(_0xedca4d(0x1d5))/0x1+-parseInt(_0xedca4d(0x24b))/0x2+parseInt(_0xedca4d(0x224))/0x3+-parseInt(_0xedca4d(0x21e))/0x4+parseInt(_0xedca4d(0x25f))/0x5+-parseInt(_0xedca4d(0x1d8))/0x6+parseInt(_0xedca4d(0x1ae))/0x7*(-parseInt(_0xedca4d(0x204))/0x8);if(_0x56f350===_0x5e83cc)break;else _0x47677e['push'](_0x47677e['shift']());}catch(_0x2b4add){_0x47677e['push'](_0x47677e['shift']());}}}(a91_0x19d8,0xa00bf));const util=require('util'),os=require('os'),path=require(a91_0x17f62c(0x255)),{v4:uuidv4}=require(a91_0x17f62c(0x1b9)),fs=require('fs'),constants=require('../bin/utils/constants'),logger=require(a91_0x17f62c(0x250))[a91_0x17f62c(0x273)],fileLogger=require(a91_0x17f62c(0x250))[a91_0x17f62c(0x19d)],{getLogDir}=require(a91_0x17f62c(0x250)),helper=require(a91_0x17f62c(0x238)),utilities=require(a91_0x17f62c(0x21a)),percyHelper=require(a91_0x17f62c(0x17f)),hubAllocator=require('../hubAllocationMethods'),PerformanceTester=require('./performance/performance-tester'),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a91_0x17f62c(0x188)),{setPercyFlag}=require(a91_0x17f62c(0x19f)),TestHubHandler=require(a91_0x17f62c(0x245)),timeoutPromise=require(a91_0x17f62c(0x1eb)),BrowserstackCLI=require(a91_0x17f62c(0x1f2)),{getEdsInstrumentationAPIUrl}=require(a91_0x17f62c(0x25e)),ClientTroubleShootingService=require(a91_0x17f62c(0x1df));function a91_0x1173(_0x35d296,_0x472eff){const _0x19d847=a91_0x19d8();return a91_0x1173=function(_0x11736b,_0x2128be){_0x11736b=_0x11736b-0x178;let _0x4becbe=_0x19d847[_0x11736b];return _0x4becbe;},a91_0x1173(_0x35d296,_0x472eff);}class BrowserStackSetup{constructor(_0x1e1b72,_0x23e41d){const _0x30310c=a91_0x17f62c,_0x103360={'EpsSa':_0x30310c(0x205),'llqeB':function(_0x15ed4a){return _0x15ed4a();},'mCzgs':'No\x20config\x20provided.'},_0x34b1fc=_0x103360['EpsSa'][_0x30310c(0x1ff)]('|');let _0x480d1e=0x0;while(!![]){switch(_0x34b1fc[_0x480d1e++]){case'0':helper[_0x30310c(0x232)](this[_0x30310c(0x235)],this[_0x30310c(0x226)]);continue;case'1':helper[_0x30310c(0x26d)](this[_0x30310c(0x235)],this[_0x30310c(0x226)],this[_0x30310c(0x1e8)]);continue;case'2':this['sdkRunId']=_0x103360[_0x30310c(0x263)](uuidv4);continue;case'3':if(helper['isUndefined'](this[_0x30310c(0x235)]))throw new Error(_0x103360['mCzgs']);continue;case'4':this[_0x30310c(0x226)]=helper['setCLICaps'](_0x1e1b72);continue;case'5':if(this['config'][_0x30310c(0x210)])throw new Error(this['config']['error']);continue;case'6':helper[_0x30310c(0x253)]();continue;case'7':this[_0x30310c(0x235)][_0x30310c(0x1d6)]=this[_0x30310c(0x235)][_0x30310c(0x1d6)]||[];continue;case'8':this[_0x30310c(0x1c5)]=[];continue;case'9':this[_0x30310c(0x235)][_0x30310c(0x1a5)]['skipSessionName']=!helper['isBrowserstackInfra']()||helper[_0x30310c(0x24f)](this[_0x30310c(0x235)][_0x30310c(0x1a5)]['skipSessionName']);continue;case'10':PerformanceTester[_0x30310c(0x23c)]();continue;case'11':this[_0x30310c(0x181)]=_0x23e41d;continue;case'12':helper[_0x30310c(0x1ca)](this[_0x30310c(0x235)],this[_0x30310c(0x226)],this[_0x30310c(0x1e8)]);continue;case'13':helper[_0x30310c(0x1cc)](this[_0x30310c(0x235)]);continue;case'14':this[_0x30310c(0x235)][_0x30310c(0x1a5)][_0x30310c(0x19a)]=!helper[_0x30310c(0x1ce)]()||helper[_0x30310c(0x24f)](this[_0x30310c(0x235)][_0x30310c(0x1a5)][_0x30310c(0x19a)]);continue;case'15':global['framework']=_0x23e41d;continue;case'16':this[_0x30310c(0x235)]=helper['readConfig'](helper['getConfigPath'](_0x1e1b72));continue;case'17':this[_0x30310c(0x24e)]=null;continue;case'18':this[_0x30310c(0x1c1)]={};continue;case'19':this[_0x30310c(0x235)][_0x30310c(0x1a5)]=this[_0x30310c(0x235)]['testContextOptions']||{};continue;case'20':helper[_0x30310c(0x27b)](this[_0x30310c(0x235)]);continue;case'21':this[_0x30310c(0x220)]=null;continue;case'22':this[_0x30310c(0x1e8)]=helper[_0x30310c(0x19b)]();continue;}break;}}[a91_0x17f62c(0x19e)](_0x34bcf4){const _0x3ad183=a91_0x17f62c,_0x32f241={'kbrvU':'userName\x20or\x20accessKey\x20is\x20not\x20defined','KTZQP':function(_0x20c498,_0x7ebe4f){return _0x20c498===_0x7ebe4f;},'oodoB':'integrations','oyNFx':'SDKTestAttempted','Kmcre':function(_0x2b2670,_0x1ce134){return _0x2b2670<_0x1ce134;},'PkEPB':function(_0x47be92,_0x47f9d1){return _0x47be92(_0x47f9d1);},'KYFWD':_0x3ad183(0x1b2),'sFZBJ':function(_0x3e6760,_0x4ab605){return _0x3e6760===_0x4ab605;},'MnKGq':_0x3ad183(0x1dc),'oeXCv':_0x3ad183(0x1d7),'KvKpl':_0x3ad183(0x216),'XXNdp':_0x3ad183(0x239),'PXsTW':_0x3ad183(0x1ee),'kikPz':'SIGHUP','bipil':function(_0x3e11f4,_0x37ed2a){return _0x3e11f4!==_0x37ed2a;},'dnWXz':_0x3ad183(0x211),'iyWWe':_0x3ad183(0x198),'pzoRz':_0x3ad183(0x241),'AhSSv':'SIGBREAK','eErbp':_0x3ad183(0x25a)},_0x49b9e7=this[_0x3ad183(0x181)];global[_0x3ad183(0x235)]=this['config'],helper[_0x3ad183(0x24d)](this['config']),this[_0x3ad183(0x219)]=null,global[_0x3ad183(0x1f6)]=this['sdkRunId'],logger[_0x3ad183(0x1de)](_0x3ad183(0x1ef)+this[_0x3ad183(0x1f6)]),!this[_0x3ad183(0x235)][_0x3ad183(0x271)]&&(this[_0x3ad183(0x235)][_0x3ad183(0x271)]=this[_0x3ad183(0x235)][_0x3ad183(0x247)]||{});if(helper[_0x3ad183(0x1a6)](helper[_0x3ad183(0x257)](this['config']))||helper[_0x3ad183(0x1a6)](helper[_0x3ad183(0x195)](this[_0x3ad183(0x235)])))throw new Error(_0x32f241[_0x3ad183(0x246)]);helper['getLocalConfig'](this[_0x3ad183(0x235)])&&helper['isUndefined'](helper[_0x3ad183(0x206)](this[_0x3ad183(0x235)]))&&(!helper[_0x3ad183(0x1a6)](this[_0x3ad183(0x235)][_0x3ad183(0x271)])&&_0x32f241[_0x3ad183(0x203)](this[_0x3ad183(0x235)][_0x3ad183(0x271)][_0x3ad183(0x196)],Object)?!helper[_0x3ad183(0x24f)](this[_0x3ad183(0x235)]['browserStackLocalOptions'][_0x3ad183(0x228)])&&(this[_0x3ad183(0x235)][_0x3ad183(0x271)][_0x3ad183(0x21f)]=helper[_0x3ad183(0x25c)]()):this[_0x3ad183(0x235)][_0x3ad183(0x271)]={'localIdentifier':helper[_0x3ad183(0x25c)]()});this[_0x3ad183(0x235)][_0x3ad183(0x271)][_0x3ad183(0x228)]=helper[_0x3ad183(0x24f)](this[_0x3ad183(0x235)][_0x3ad183(0x271)][_0x3ad183(0x228)]),helper[_0x3ad183(0x1bb)](this[_0x3ad183(0x235)]);if(_0x32f241['KTZQP'](_0x49b9e7,_0x32f241['oodoB']))return;this['handleExceptions']();process[_0x3ad183(0x1f8)]['BROWSERSTACK_TURBOSCALE']&&(this['config'][_0x3ad183(0x1e1)]=helper[_0x3ad183(0x24f)](process[_0x3ad183(0x1f8)][_0x3ad183(0x1e2)]),this[_0x3ad183(0x235)][_0x3ad183(0x233)]=this['config'][_0x3ad183(0x233)]||{});helper[_0x3ad183(0x229)](this[_0x3ad183(0x235)])&&(process[_0x3ad183(0x1f8)][_0x3ad183(0x1e2)]=!![]);if(!helper[_0x3ad183(0x1ce)]()){try{process['env'][_0x3ad183(0x1ed)]=_0x49b9e7,utilities['fireFunnelTestEvent'](_0x32f241[_0x3ad183(0x23a)],{},this[_0x3ad183(0x235)],this['framework']);}catch(_0x107579){logger[_0x3ad183(0x1f0)](_0x3ad183(0x1b4)+_0x107579);}return;}if(helper[_0x3ad183(0x272)](_0x49b9e7)){if(global[_0x3ad183(0x1db)])return;_0x32f241['Kmcre'](_0x32f241['PkEPB'](parseInt,helper[_0x3ad183(0x1a4)](_0x32f241[_0x3ad183(0x26c)])),0x3)&&(this[_0x3ad183(0x235)][_0x3ad183(0x1fc)]=![]),_0x32f241[_0x3ad183(0x242)](helper[_0x3ad183(0x19c)](helper[_0x3ad183(0x1a4)](_0x32f241['KYFWD']),_0x32f241[_0x3ad183(0x225)]),0x1)&&(this[_0x3ad183(0x235)][_0x3ad183(0x1fc)]=!![]);}(helper[_0x3ad183(0x1a6)](this['config'][_0x3ad183(0x1d6)])||helper[_0x3ad183(0x1a6)](this[_0x3ad183(0x235)][_0x3ad183(0x1d6)][_0x3ad183(0x1fa)]))&&(helper['isUndefined'](this['config'][_0x3ad183(0x1aa)])?logger['info'](_0x32f241[_0x3ad183(0x218)]):logger['warn'](_0x32f241['KvKpl']),this[_0x3ad183(0x235)]['platforms']=[]);!this[_0x3ad183(0x235)][_0x3ad183(0x1a5)]&&(this['config']['testContextOptions']={});try{process[_0x3ad183(0x1f8)][_0x3ad183(0x1ed)]=_0x34bcf4['_'][0x0],utilities[_0x3ad183(0x217)](_0x32f241[_0x3ad183(0x23a)],{},this['config'],this[_0x3ad183(0x181)]);}catch(_0x5c62f4){logger[_0x3ad183(0x1f0)](_0x3ad183(0x1b4)+_0x5c62f4);}!this[_0x3ad183(0x235)]['disableAutoCaptureLogs']&&logger[_0x3ad183(0x1de)](constants[_0x3ad183(0x209)]),this[_0x3ad183(0x182)]=this[_0x3ad183(0x182)][_0x3ad183(0x1ea)](this),process['on'](_0x32f241[_0x3ad183(0x20b)],this[_0x3ad183(0x182)]),process['on'](_0x32f241[_0x3ad183(0x26a)],this[_0x3ad183(0x182)]),process['on'](_0x32f241[_0x3ad183(0x1dd)],this['intExitHandler']),_0x32f241[_0x3ad183(0x223)](process['platform'],_0x32f241[_0x3ad183(0x22d)])?(process['on'](_0x32f241['iyWWe'],this[_0x3ad183(0x182)]),process['on'](_0x32f241[_0x3ad183(0x192)],this[_0x3ad183(0x182)])):process['on'](_0x32f241[_0x3ad183(0x1fb)],this[_0x3ad183(0x182)]),process['on'](_0x32f241[_0x3ad183(0x1a2)],this[_0x3ad183(0x279)]());}async[a91_0x17f62c(0x222)](_0x14de04){const _0x78444a=a91_0x17f62c,_0x4d455d={'znzaW':_0x78444a(0x187),'RlEJR':'custom-repeater','KEjAz':_0x78444a(0x1a7),'lBchy':function(_0x15f24b,_0x2fb085){return _0x15f24b===_0x2fb085;},'sDlDW':_0x78444a(0x1e4),'Rehjz':function(_0x1ba5a5,_0x14c835){return _0x1ba5a5+_0x14c835;},'hXBqu':_0x78444a(0x22e),'EPoEW':function(_0x15028b,_0x5bb055){return _0x15028b(_0x5bb055);},'IJBDt':_0x78444a(0x1f4)};this[_0x78444a(0x19e)](_0x14de04);if(helper[_0x78444a(0x229)](this[_0x78444a(0x235)])){const _0x34c051=await helper[_0x78444a(0x1c0)](this[_0x78444a(0x235)]);this[_0x78444a(0x235)][_0x78444a(0x20f)]=_0x34c051,_0x34c051[_0x78444a(0x1e9)]&&helper[_0x78444a(0x180)](this[_0x78444a(0x235)][_0x78444a(0x220)])&&helper[_0x78444a(0x24f)](this['config']['browserstackLocal'])&&(this[_0x78444a(0x235)][_0x78444a(0x271)][_0x78444a(0x21f)]=_0x4d455d[_0x78444a(0x20e)],this['config'][_0x78444a(0x271)][_0x4d455d['RlEJR']]=_0x34c051[_0x78444a(0x26e)][_0x78444a(0x190)](','),this[_0x78444a(0x235)][_0x78444a(0x271)]['forceLocal']=_0x4d455d[_0x78444a(0x1da)]),this[_0x78444a(0x235)][_0x78444a(0x1c6)]=_0x34c051[_0x78444a(0x268)],this[_0x78444a(0x181)]&&_0x4d455d['lBchy'](this['framework'][_0x78444a(0x248)](),_0x4d455d[_0x78444a(0x1cf)])?this['config'][_0x78444a(0x1c6)]=_0x4d455d[_0x78444a(0x254)](_0x34c051['playwrightUrl'],_0x4d455d['hXBqu']):constants[_0x78444a(0x262)]=helper[_0x78444a(0x23b)](this[_0x78444a(0x235)]),logger[_0x78444a(0x1f0)](_0x78444a(0x191)+constants[_0x78444a(0x262)]);}helper[_0x78444a(0x1e7)](this['config']),this[_0x78444a(0x276)](),_0x4d455d[_0x78444a(0x18c)](setPercyFlag,this),await this[_0x78444a(0x1b3)](),![_0x4d455d[_0x78444a(0x21b)],_0x4d455d[_0x78444a(0x1cf)]]['includes'](this[_0x78444a(0x181)])&&!helper[_0x78444a(0x229)](this[_0x78444a(0x235)])&&!helper[_0x78444a(0x20a)]()[_0x78444a(0x278)]&&await this['setUpHubUrl']();}async[a91_0x17f62c(0x1d3)](){const _0x2622e1=a91_0x17f62c,_0x78323={};_0x78323['XHRMw']=function(_0x5e32cb,_0x2e765b){return _0x5e32cb===_0x2e765b;},_0x78323[_0x2622e1(0x24c)]=_0x2622e1(0x22f),_0x78323[_0x2622e1(0x1c8)]=_0x2622e1(0x25d),_0x78323[_0x2622e1(0x1ba)]=_0x2622e1(0x244),_0x78323[_0x2622e1(0x221)]=_0x2622e1(0x1a7),_0x78323['dInby']='beforeExit';const _0x1ee560=_0x78323;if(helper[_0x2622e1(0x24f)](this[_0x2622e1(0x235)][_0x2622e1(0x24e)])&&(!this[_0x2622e1(0x24e)]||!this[_0x2622e1(0x24e)][_0x2622e1(0x200)]()))try{this[_0x2622e1(0x24e)]=await percyHelper[_0x2622e1(0x256)](this[_0x2622e1(0x235)]);if(!this[_0x2622e1(0x24e)]){process['env'][_0x2622e1(0x22a)]=_0x1ee560[_0x2622e1(0x24c)];throw new Error(_0x1ee560[_0x2622e1(0x1c8)]);}logger['info'](_0x1ee560[_0x2622e1(0x1ba)]),process['env']['BROWSERSTACK_PERCY']=_0x1ee560[_0x2622e1(0x221)];let _0x2d1594=0x0;const _0x166675=async()=>{const _0x1c17d0=_0x2622e1;_0x2d1594++,_0x1ee560[_0x1c17d0(0x1ec)](_0x2d1594,0x1)&&await this[_0x1c17d0(0x1c3)]();};process['on'](_0x1ee560[_0x2622e1(0x215)],_0x166675);}catch(_0x141aa3){process[_0x2622e1(0x1f8)][_0x2622e1(0x22a)]=_0x1ee560[_0x2622e1(0x24c)],logger[_0x2622e1(0x1f0)](_0x2622e1(0x194)+_0x141aa3);throw new Error(_0x141aa3[_0x2622e1(0x264)]());}}async[a91_0x17f62c(0x1c3)](){const _0x2084f0=a91_0x17f62c,_0x170466={};_0x170466[_0x2084f0(0x1b6)]='Percy\x20stopped',_0x170466[_0x2084f0(0x185)]=_0x2084f0(0x22c);const _0x7f3b05=_0x170466;if(this['percy']&&this[_0x2084f0(0x24e)]['isRunning']())try{await percyHelper[_0x2084f0(0x1c3)](this[_0x2084f0(0x24e)]),logger[_0x2084f0(0x1de)](_0x7f3b05[_0x2084f0(0x1b6)]);}catch(_0x320354){logger[_0x2084f0(0x210)](_0x7f3b05[_0x2084f0(0x185)],_0x320354[_0x2084f0(0x186)]);}}async[a91_0x17f62c(0x1b3)](){const _0x270565=a91_0x17f62c,_0xead83={};_0xead83[_0x270565(0x1ab)]='Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled',_0xead83[_0x270565(0x1b8)]='Local\x20binary\x20started\x20successfully';const _0x5d3ef2=_0xead83;if(helper[_0x270565(0x1ce)]()&&helper[_0x270565(0x24f)](this[_0x270565(0x235)][_0x270565(0x220)])&&(!this['browserstackLocal']||!this[_0x270565(0x220)][_0x270565(0x200)]()))try{if(this[_0x270565(0x235)]['browserStackLocalOptions'][_0x270565(0x228)]){logger[_0x270565(0x1f0)](_0x5d3ef2[_0x270565(0x1ab)]);return;}this['browserstackLocal']=await helper[_0x270565(0x1a0)](this['config']),logger[_0x270565(0x1de)](_0x5d3ef2[_0x270565(0x1b8)]);}catch(_0x5d23fa){logger[_0x270565(0x1f0)](_0x5d23fa);throw new Error(_0x5d23fa[_0x270565(0x264)]());}}async['stopBrowserstackLocal'](){const _0x42f35b=a91_0x17f62c,_0x260707={};_0x260707[_0x42f35b(0x275)]=_0x42f35b(0x267),_0x260707['HQKLa']=_0x42f35b(0x1e0);const _0x418359=_0x260707;if(this['browserstackLocal']&&this['browserstackLocal'][_0x42f35b(0x200)]())try{await helper[_0x42f35b(0x197)](this[_0x42f35b(0x220)]),logger[_0x42f35b(0x1de)](_0x418359[_0x42f35b(0x275)]);}catch(_0x5162de){logger[_0x42f35b(0x210)](_0x418359[_0x42f35b(0x1be)],_0x5162de[_0x42f35b(0x186)]);}}async['setUpHubUrl'](){const _0x428e2d=a91_0x17f62c;return PerformanceTester['measureWrapper'](PerformanceAutEvents[_0x428e2d(0x1b0)],async()=>{const _0x288808=_0x428e2d;await hubAllocator[_0x288808(0x1f3)](this[_0x288808(0x235)]);})();}async[a91_0x17f62c(0x1bd)](){const _0x1f3321=a91_0x17f62c,_0x11693e={'LPffA':function(_0x3f8999,_0x17effe){return _0x3f8999(_0x17effe);},'cqlsi':_0x1f3321(0x1bf),'pUlBn':function(_0x1c4bcf,_0x5230d6,_0x3cdc2a,_0x2469df,_0x27831d,_0x33d4c8,_0x212704){return _0x1c4bcf(_0x5230d6,_0x3cdc2a,_0x2469df,_0x27831d,_0x33d4c8,_0x212704);},'PXOPS':_0x1f3321(0x24a),'luumG':_0x1f3321(0x227),'gQNqD':function(_0x72b4ac,_0x41718f){return _0x72b4ac(_0x41718f);},'xOheH':'../../package.json','WXpfq':_0x1f3321(0x193),'yGTQb':function(_0x45eb31,_0x513f9c){return _0x45eb31===_0x513f9c;},'xDQSs':_0x1f3321(0x1a7),'zAHWh':function(_0x2053b8,_0x190408){return _0x2053b8===_0x190408;},'sSPhu':function(_0x41d60f,_0xf73931){return _0x41d60f===_0xf73931;},'ftWRe':_0x1f3321(0x237),'XeKDR':_0x1f3321(0x184),'uWsAJ':'Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','OnNKy':_0x1f3321(0x18b),'znASt':function(_0x277236,_0x2367ff){return _0x277236>=_0x2367ff;},'Nilod':function(_0x267b88,_0x4f17d3){return _0x267b88<_0x4f17d3;},'UZVuu':function(_0x48ade2,_0x2f06a9){return _0x48ade2>=_0x2f06a9;},'CPjWm':_0x1f3321(0x1d2),'Nrrme':'aiHeal:tcgAuth','YThRh':function(_0x44a6cd){return _0x44a6cd();}},_0x378264=PerformanceTester[_0x1f3321(0x1a9)](_0x11693e[_0x1f3321(0x1ad)],async()=>{const _0x1198e7=_0x1f3321;try{const _0x45351e=new Date(),_0x218c84=helper[_0x1198e7(0x23f)](this[_0x1198e7(0x235)]),_0x202451=_0x11693e['LPffA'](require,path['join'](__dirname,_0x11693e['cqlsi'])),_0x410e15=_0x11693e[_0x1198e7(0x1d4)](timeoutPromise,constants[_0x1198e7(0x23e)],_0x11693e['PXOPS'],_0x11693e['luumG'],_0x45351e,this['config'],this['framework']),_0x4dd069={'tcgUrl':constants[_0x1198e7(0x259)],'sdkVersion':_0x11693e[_0x1198e7(0x240)](require,_0x11693e[_0x1198e7(0x23d)])[_0x1198e7(0x277)],'methodUsed':_0x11693e[_0x1198e7(0x1a8)],'proxyConfig':_0x218c84,'os':os[_0x1198e7(0x199)]()};if(_0x218c84&&_0x218c84['proxyUrl']){utilities['fireFunnelTestEvent'](constants[_0x1198e7(0x1d9)],_0x4dd069,this[_0x1198e7(0x235)],this[_0x1198e7(0x181)]);return;}const _0x3e657a={};_0x3e657a['proxy']=_0x218c84;const _0x387592=await Promise[_0x1198e7(0x1f5)]([_0x202451['init'](this['config'][_0x1198e7(0x18d)],this[_0x1198e7(0x235)][_0x1198e7(0x243)],constants[_0x1198e7(0x259)],_0x11693e[_0x1198e7(0x240)](require,_0x11693e['xOheH'])['version'],_0x3e657a)[_0x1198e7(0x266)](_0x3ef58f=>{const _0x27e63c=_0x1198e7;return _0x410e15[_0x27e63c(0x261)](),_0x3ef58f;}),_0x410e15]);_0x387592['isHealingEnabled']=_0x11693e['yGTQb'](_0x387592[_0x1198e7(0x208)],_0x11693e[_0x1198e7(0x18e)])||_0x11693e['yGTQb'](_0x387592[_0x1198e7(0x208)],!![]);const _0x1c0f62=_0x11693e['zAHWh'](this['config']['selfHeal'],!![])||_0x11693e[_0x1198e7(0x1fe)](this[_0x1198e7(0x235)][_0x1198e7(0x1cb)],_0x11693e[_0x1198e7(0x18e)]);if(_0x11693e['sSPhu'](_0x387592[_0x1198e7(0x186)],constants[_0x1198e7(0x17b)])&&_0x1c0f62)logger['info'](_0x11693e[_0x1198e7(0x1cd)]);else{if(!_0x387592[_0x1198e7(0x1ac)]&&_0x11693e['zAHWh'](_0x387592[_0x1198e7(0x274)],0x1f7)&&_0x1c0f62)logger[_0x1198e7(0x1de)](_0x11693e[_0x1198e7(0x179)]),utilities['fireFunnelTestEvent'](constants[_0x1198e7(0x20d)],_0x4dd069,this[_0x1198e7(0x235)],this['framework']);else{if(!_0x387592['isAuthenticated']&&_0x1c0f62){logger[_0x1198e7(0x1de)](_0x11693e['uWsAJ']);const _0x563f64={'tcgUrl':constants[_0x1198e7(0x259)],'sdkVersion':_0x11693e[_0x1198e7(0x240)](require,_0x11693e['xOheH'])[_0x1198e7(0x277)],'methodUsed':_0x11693e[_0x1198e7(0x1a8)],'proxyConfig':_0x218c84,'os':os['platform']()};utilities[_0x1198e7(0x217)](constants[_0x1198e7(0x270)],_0x563f64,this[_0x1198e7(0x235)],this[_0x1198e7(0x181)]);}else{if(_0x387592[_0x1198e7(0x1ac)]&&!_0x387592[_0x1198e7(0x208)]&&_0x1c0f62)logger[_0x1198e7(0x1de)](_0x11693e[_0x1198e7(0x249)]);else{if(_0x11693e[_0x1198e7(0x21c)](_0x387592[_0x1198e7(0x274)],0xc8)&&_0x11693e[_0x1198e7(0x202)](_0x387592[_0x1198e7(0x274)],0x12c))utilities[_0x1198e7(0x217)](constants[_0x1198e7(0x1e6)],_0x4dd069,this[_0x1198e7(0x235)],this['framework']);else{if(_0x11693e[_0x1198e7(0x1f7)](_0x387592[_0x1198e7(0x274)],0x190))_0x4dd069[_0x1198e7(0x274)]=_0x387592[_0x1198e7(0x274)],utilities['fireFunnelTestEvent'](constants[_0x1198e7(0x252)],_0x4dd069,this['config'],this[_0x1198e7(0x181)]);else!_0x387592[_0x1198e7(0x274)]&&utilities[_0x1198e7(0x217)](constants[_0x1198e7(0x26f)],_0x4dd069,this[_0x1198e7(0x235)],this[_0x1198e7(0x181)]);}}}}}if(_0x387592[_0x1198e7(0x1ac)]&&_0x387592[_0x1198e7(0x208)]){const _0x41499c={};_0x41499c[_0x1198e7(0x214)]=_0x387592;const _0x51ba58=_0x41499c;_0x218c84&&(_0x51ba58[_0x1198e7(0x1b1)]=_0x218c84),_0x51ba58[_0x1198e7(0x181)]=this[_0x1198e7(0x181)],_0x51ba58['bstackConfig']=this[_0x1198e7(0x235)],helper[_0x1198e7(0x1b7)](_0x51ba58),logger[_0x1198e7(0x1f0)](_0x11693e['CPjWm']);}}catch(_0x1d439b){logger[_0x1198e7(0x1f0)](_0x1198e7(0x212)+(_0x1d439b[_0x1198e7(0x186)]?_0x1d439b[_0x1198e7(0x186)]:''));}});await _0x11693e[_0x1f3321(0x1c4)](_0x378264);}[a91_0x17f62c(0x276)](){const _0x36377e=a91_0x17f62c,_0x5c5e07={'NkPBN':function(_0x3617c1,_0x347886){return _0x3617c1(_0x347886);},'hLutO':'./setKeepAlive'};_0x5c5e07[_0x36377e(0x178)](require,_0x5c5e07[_0x36377e(0x1c2)])();}[a91_0x17f62c(0x1a1)](){const _0x4f391c=a91_0x17f62c,_0x4f1c2d={};_0x4f1c2d[_0x4f391c(0x27c)]=_0x4f391c(0x1c7),_0x4f1c2d[_0x4f391c(0x17a)]='unhandledRejection',_0x4f1c2d[_0x4f391c(0x1fd)]=_0x4f391c(0x213);const _0x41a35d=_0x4f1c2d,_0x93a11b=_0x490734=>{const _0x5b62d0=_0x4f391c,_0x3cd35e=_0x41a35d[_0x5b62d0(0x27c)][_0x5b62d0(0x1ff)]('|');let _0x3c7dae=0x0;while(!![]){switch(_0x3cd35e[_0x3c7dae++]){case'0':logger['error'](_0x490734[_0x5b62d0(0x186)]);continue;case'1':logger[_0x5b62d0(0x1f0)](util[_0x5b62d0(0x1e5)](_0x490734));continue;case'2':PerformanceTester[_0x5b62d0(0x265)](_0x490734);continue;case'3':this[_0x5b62d0(0x1c5)][_0x5b62d0(0x183)](util[_0x5b62d0(0x1e5)]('%j',_0x490734));continue;case'4':ClientTroubleShootingService[_0x5b62d0(0x17d)]();continue;}break;}};process['on'](_0x41a35d['cyslV'],_0x93a11b),process['on'](_0x41a35d[_0x4f391c(0x1fd)],_0x93a11b);}async[a91_0x17f62c(0x182)](_0x1f20a8){const _0x22c049=a91_0x17f62c,_0x107c81={};_0x107c81['GXhrO']=_0x22c049(0x230),_0x107c81[_0x22c049(0x18a)]=function(_0x5ed514,_0x3ef892){return _0x5ed514+_0x3ef892;},_0x107c81['NkOxm']=_0x22c049(0x189),_0x107c81[_0x22c049(0x27a)]=function(_0x1a61e6,_0x59cbe7){return _0x1a61e6+_0x59cbe7;},_0x107c81['NyJJI']=_0x22c049(0x231);const _0x5ab373=_0x107c81,_0x3eed7f=_0x5ab373[_0x22c049(0x1bc)][_0x22c049(0x1ff)]('|');let _0xdf7ccf=0x0;while(!![]){switch(_0x3eed7f[_0xdf7ccf++]){case'0':this[_0x22c049(0x219)]=_0x1f20a8;continue;case'1':await ClientTroubleShootingService[_0x22c049(0x17d)]();continue;case'2':await ClientTroubleShootingService['reportProcessInterruptionSituation'](_0x1f20a8);continue;case'3':this[_0x5ab373['pyuGV'](_0x5ab373[_0x22c049(0x269)],_0x1f20a8)]=!![];continue;case'4':logger[_0x22c049(0x1de)](_0x5ab373[_0x22c049(0x27a)](_0x5ab373[_0x22c049(0x1f1)],_0x1f20a8));continue;case'5':if(this[_0x5ab373[_0x22c049(0x27a)](_0x5ab373[_0x22c049(0x269)],_0x1f20a8)])return;continue;case'6':await BrowserstackCLI[_0x22c049(0x251)]()[_0x22c049(0x18f)]();continue;case'7':await TestHubHandler[_0x22c049(0x18f)](_0x1f20a8);continue;}break;}}[a91_0x17f62c(0x279)](){const _0x3ca551=a91_0x17f62c,_0x514efe={'IBczN':function(_0x20582e,_0x24ff9a){return _0x20582e===_0x24ff9a;},'CWGis':_0x3ca551(0x22b),'tZsJa':function(_0x207ac4,_0x47f4da){return _0x207ac4>_0x47f4da;},'AVHAQ':function(_0x42a405,_0x23d2b1){return _0x42a405>_0x23d2b1;},'sRhxb':function(_0x376f1e,_0x5215ab){return _0x376f1e(_0x5215ab);},'OOHUY':function(_0x4998c8,_0xa90ffc){return _0x4998c8(_0xa90ffc);},'edTlh':function(_0x5b1180){return _0x5b1180();},'ssyaQ':_0x3ca551(0x236)};let _0x1c6b7a=0x0;return async()=>{const _0xfe4f38=_0x3ca551;_0x1c6b7a++;if(_0x514efe[_0xfe4f38(0x1d0)](_0x1c6b7a,0x1)){helper[_0xfe4f38(0x1d1)](this[_0xfe4f38(0x181)])&&await this[_0xfe4f38(0x1e3)]();try{logger[_0xfe4f38(0x1f0)](_0x514efe['CWGis']),await TestHubHandler['stop'](_0x1c6b7a),await ClientTroubleShootingService[_0xfe4f38(0x17d)](),await BrowserstackCLI[_0xfe4f38(0x251)]()[_0xfe4f38(0x18f)]('1');}catch(_0x310358){logger[_0xfe4f38(0x1f0)](_0xfe4f38(0x234)+util[_0xfe4f38(0x1e5)](_0x310358));}PerformanceTester[_0xfe4f38(0x25b)](PerformanceEvents['SDK_CLEANUP']);if(PerformanceTester[_0xfe4f38(0x26b)]()){const {measures:_0x24da89,errors:_0x43556d}=await PerformanceTester['finalize'](),_0x57438a={};if(_0x24da89&&_0x514efe[_0xfe4f38(0x1a3)](_0x24da89[_0xfe4f38(0x1fa)],0x0)||_0x43556d&&_0x514efe[_0xfe4f38(0x17e)](_0x43556d[_0xfe4f38(0x1fa)],0x0)){const _0x3d2db7={};_0x3d2db7['measures']=_0x24da89,_0x3d2db7[_0xfe4f38(0x17c)]=_0x43556d,Object['assign'](_0x57438a,_0x3d2db7);}try{const _0x53c1e0=await helper[_0xfe4f38(0x201)](_0x57438a,this['config']);logger[_0xfe4f38(0x1f0)](_0xfe4f38(0x1b5)+_0x514efe['sRhxb'](getEdsInstrumentationAPIUrl,'')+'\x20with\x20response\x20'+_0x53c1e0[_0xfe4f38(0x1af)]);}catch(_0x399675){logger[_0xfe4f38(0x1f0)](_0xfe4f38(0x1f9)+_0x514efe[_0xfe4f38(0x258)](getEdsInstrumentationAPIUrl,'')+_0xfe4f38(0x20c)+util[_0xfe4f38(0x1e5)](_0x399675));}try{fs[_0xfe4f38(0x260)](path[_0xfe4f38(0x190)](_0x514efe[_0xfe4f38(0x1c9)](getLogDir),_0x514efe[_0xfe4f38(0x207)]),JSON['stringify'](_0x57438a));}catch(_0x43cae6){logger[_0xfe4f38(0x1f0)]('Error\x20in\x20writing\x20events\x20to\x20file\x20'+_0x43cae6);}}}logger&&logger['close'](),fileLogger&&fileLogger['close']();};}}function a91_0x19d8(){const _0x2ce495=['isEnabled','KYFWD','getFinalCaps','customRepeaters','INVALID_INIT_RESP_WITH_USER_IMPACT','TCG_AUTH_FAILURE','browserStackLocalOptions','requireSeleniumWebdriverCheck','winstonLogger','status','FcMoo','setupKeepAlive','version','central_scanner','exitHandler','kpRiV','setCredentialsFromYmlConfig','kxxMs','NkPBN','XeKDR','cyslV','UPGRADE_REQUIRED','exceptions','reportFinalDetectionState','AVHAQ','./percy/utils','isNotUndefined','framework','intExitHandler','push','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','RlsCV','message','ats-repeater','./performance/constants','handled','pyuGV','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','EPoEW','accessKey','xDQSs','stop','join','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','pzoRz','BrowserstackHealing.init','Error\x20in\x20percy\x20setup\x20','getAccessKey','constructor','stopLocalBinary','SIGABRT','platform','skipSessionStatus','setEnvCaps','compareVersions','fileLogger','preInitialize','./testhub/utils','startLocalBinary','handleExceptions','eErbp','tZsJa','getPackageVersion','testContextOptions','isUndefined','true','WXpfq','measureWrapper','parallelsPerPlatform','Xberq','isAuthenticated','Nrrme','1494024HJkcEq','statusCode','HUB_MANAGEMENT','proxyConfig','selenium-webdriver','setupBrowserstackLocal','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','Data\x20sent\x20successfully\x20to\x20','JulrD','setupTcgConfigFile','mPIgD','uuid','wIuMT','setHandlePWError','GXhrO','setupTCGAuth','HQKLa','../ai-sdk-node/bundle','getTurboScaleGridDetails','errorMessage','hLutO','stopPercy','YThRh','unhandledErrors','turboScaleUrl','0|1|3|2|4','kSUIV','edTlh','setLogLevel','selfHeal','setLogDir','ftWRe','isBrowserstackInfra','sDlDW','IBczN','checkStopLocalBinaryOnExit','tcg\x20config\x20setup\x20successful.','setupPercy','pUlBn','1057762bdFgbf','platforms','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','2737620kOWKsy','AI_PROXY_FAILURE','KEjAz','__isPlaywrightInstalled','4.5.0','kikPz','info','../bin/utils/clientTroubleshootingService','Error\x20occured\x20while\x20stopping\x20local\x20binary','turboScale','BROWSERSTACK_TURBOSCALE','stopBrowserstackLocal','playwright','format','AI_INIT_SUCCESSFUL','setProxySettings','envConfig','isTrialGrid','bind','./timeoutPromise','XHRMw','FRAMEWORK','SIGINT','SDK\x20run\x20started\x20with\x20id:\x20','debug','NyJJI','../bin/v2/browserstackCLI','allocateHub','codeceptjs','race','sdkRunId','UZVuu','env','Failed\x20to\x20send\x20data\x20to\x20','length','AhSSv','useW3C','HZrYJ','yGTQb','split','isRunning','sendToEDS','Nilod','KTZQP','8BojJtw','8|6|22|21|17|16|4|7|19|18|2|11|15|3|5|0|20|14|9|1|13|12|10','getLocalIdentifier','ssyaQ','isHealingEnabled','AUTOLOGCAPTURE_NOTIFICATION','getCentralUser','XXNdp','\x20with\x20error\x20','TCG_DOWN','znzaW','turboScaleGridDetails','error','win32','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','uncaughtException','tcgAuthConfig','dInby','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','fireFunnelTestEvent','oeXCv','killSignal','./utilities','IJBDt','znASt','default','3343332wNbDfF','localIdentifier','browserstackLocal','KOoAn','initialize','bipil','3263976QYmEtI','MnKGq','cliConfig','BrowserstackHealingInitFailed','skipBinaryInitialisation','isTurboScaleSession','BROWSERSTACK_PERCY','Calling\x20Build\x20Stop\x20from\x20ExitHandler','Error\x20occured\x20while\x20stopping\x20percy','dnWXz','?caps=','false','5|3|4|0|2|7|1|6','Shutdown\x20triggered\x20by\x20','setBrowserstackInfraFromConfig','turboScaleOptions','Error\x20in\x20sending\x20testhub\x20stop:\x20','config','events.json','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','./helper','SIGTERM','oyNFx','getHubUrl','startMonitoring','xOheH','TCG_AUTH_TIMEOUT','getProxyConfigForTcg','gQNqD','SIGQUIT','sFZBJ','userName','Percy\x20started\x20successfully','./testhub/testhubHandler','kbrvU','localOptions','toLowerCase','OnNKy','BrowserstackHealing.init\x20method\x20timed\x20out','870560fkgcUk','OODbE','sanitizeCaps','percy','isTrue','./logger','getInstance','AI_INIT_FAILURE','normalizeTestReportingEnvVars','Rehjz','path','startPercy','getUserName','OOHUY','TCG_URL','beforeExit','end','generateLocalIdentifier','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','../bin/utils/apiUtilityMethods','2253060ObsBMI','writeFileSync','cancel','hubUrl','llqeB','toString','captureError','then','Local\x20binary\x20stopped','url','NkOxm','PXsTW'];a91_0x19d8=function(){return _0x2ce495;};return a91_0x19d8();}exports[a91_0x17f62c(0x21d)]=BrowserStackSetup;