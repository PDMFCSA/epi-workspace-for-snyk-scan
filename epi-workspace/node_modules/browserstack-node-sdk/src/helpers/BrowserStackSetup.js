const a85_0x2cbe98=a85_0x2770;(function(_0x2e4201,_0x488bbf){const _0x492845=a85_0x2770,_0x1f38c3=_0x2e4201();while(!![]){try{const _0x446c7c=-parseInt(_0x492845(0x140))/0x1*(parseInt(_0x492845(0x1cd))/0x2)+-parseInt(_0x492845(0x1cb))/0x3*(-parseInt(_0x492845(0x1a8))/0x4)+parseInt(_0x492845(0x1ba))/0x5*(-parseInt(_0x492845(0x164))/0x6)+parseInt(_0x492845(0x215))/0x7*(parseInt(_0x492845(0x1ab))/0x8)+parseInt(_0x492845(0x20b))/0x9+parseInt(_0x492845(0x146))/0xa+-parseInt(_0x492845(0x1d5))/0xb;if(_0x446c7c===_0x488bbf)break;else _0x1f38c3['push'](_0x1f38c3['shift']());}catch(_0x5a57ec){_0x1f38c3['push'](_0x1f38c3['shift']());}}}(a85_0x8de5,0x32961));const util=require('util'),os=require('os'),path=require(a85_0x2cbe98(0x16d)),{v4:uuidv4}=require(a85_0x2cbe98(0x225)),fs=require('fs'),constants=require(a85_0x2cbe98(0x18a)),logger=require(a85_0x2cbe98(0x15c))[a85_0x2cbe98(0x197)],fileLogger=require(a85_0x2cbe98(0x15c))[a85_0x2cbe98(0x1f2)],{getLogDir}=require('./logger'),helper=require(a85_0x2cbe98(0x1eb)),utilities=require(a85_0x2cbe98(0x213)),percyHelper=require(a85_0x2cbe98(0x18c)),hubAllocator=require(a85_0x2cbe98(0x1d3)),PerformanceTester=require('./performance/performance-tester'),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a85_0x2cbe98(0x1cc)),{setPercyFlag}=require(a85_0x2cbe98(0x1d8)),TestHubHandler=require(a85_0x2cbe98(0x21e)),timeoutPromise=require(a85_0x2cbe98(0x182)),BrowserstackCLI=require(a85_0x2cbe98(0x14a));class BrowserStackSetup{constructor(_0x5ad06f,_0x2fa0a3){const _0x2bb6a1=a85_0x2cbe98,_0x343e48={'CGwbn':_0x2bb6a1(0x16f),'GhNgh':function(_0x462a75){return _0x462a75();},'IPlUW':_0x2bb6a1(0x228)},_0x10ead8=_0x343e48['CGwbn']['split']('|');let _0x1651d8=0x0;while(!![]){switch(_0x10ead8[_0x1651d8++]){case'0':helper[_0x2bb6a1(0x157)](this[_0x2bb6a1(0x1ed)],this[_0x2bb6a1(0x16a)]);continue;case'1':this[_0x2bb6a1(0x1ed)]['testContextOptions'][_0x2bb6a1(0x21f)]=!helper[_0x2bb6a1(0x217)]()||helper[_0x2bb6a1(0x1ae)](this[_0x2bb6a1(0x1ed)]['testContextOptions'][_0x2bb6a1(0x21f)]);continue;case'2':this[_0x2bb6a1(0x1ed)]=helper['readConfig'](helper[_0x2bb6a1(0x22e)](_0x5ad06f));continue;case'3':this[_0x2bb6a1(0x1ed)][_0x2bb6a1(0x224)][_0x2bb6a1(0x1d6)]=!helper[_0x2bb6a1(0x217)]()||helper['isTrue'](this[_0x2bb6a1(0x1ed)][_0x2bb6a1(0x224)][_0x2bb6a1(0x1d6)]);continue;case'4':helper[_0x2bb6a1(0x231)](this['config']);continue;case'5':helper[_0x2bb6a1(0x21b)](this[_0x2bb6a1(0x1ed)]);continue;case'6':this['percy']=null;continue;case'7':global[_0x2bb6a1(0x20a)]=_0x2fa0a3;continue;case'8':this[_0x2bb6a1(0x1e6)]=helper['setEnvCaps']();continue;case'9':this['browserstackLocal']=null;continue;case'10':this[_0x2bb6a1(0x15a)]=_0x343e48['GhNgh'](uuidv4);continue;case'11':helper[_0x2bb6a1(0x163)](this['config'],this[_0x2bb6a1(0x16a)],this[_0x2bb6a1(0x1e6)]);continue;case'12':if(helper[_0x2bb6a1(0x249)](this[_0x2bb6a1(0x1ed)]))throw new Error(_0x343e48[_0x2bb6a1(0x1ac)]);continue;case'13':this[_0x2bb6a1(0x16a)]=helper[_0x2bb6a1(0x18d)](_0x5ad06f);continue;case'14':PerformanceTester[_0x2bb6a1(0x13e)]();continue;case'15':helper[_0x2bb6a1(0x186)](this[_0x2bb6a1(0x1ed)],this[_0x2bb6a1(0x16a)],this[_0x2bb6a1(0x1e6)]);continue;case'16':helper[_0x2bb6a1(0x237)]();continue;case'17':this['config'][_0x2bb6a1(0x23a)]=this[_0x2bb6a1(0x1ed)][_0x2bb6a1(0x23a)]||[];continue;case'18':if(this['config'][_0x2bb6a1(0x172)])throw new Error(this['config'][_0x2bb6a1(0x172)]);continue;case'19':this[_0x2bb6a1(0x20a)]=_0x2fa0a3;continue;case'20':this[_0x2bb6a1(0x143)]={};continue;case'21':this[_0x2bb6a1(0x212)]=[];continue;case'22':this[_0x2bb6a1(0x1ed)]['testContextOptions']=this['config'][_0x2bb6a1(0x224)]||{};continue;}break;}}[a85_0x2cbe98(0x159)](_0x1a5e2d){const _0x4f1732=a85_0x2cbe98,_0x404456={'KYVAu':_0x4f1732(0x219),'pybZV':function(_0xbbd4c8,_0x43c98d){return _0xbbd4c8===_0x43c98d;},'FHvDH':_0x4f1732(0x1b0),'Gidiz':_0x4f1732(0x203),'Abntm':function(_0x286da8,_0x206d3c){return _0x286da8<_0x206d3c;},'vIhSn':function(_0x4abf89,_0x1fdd99){return _0x4abf89(_0x1fdd99);},'afTlm':_0x4f1732(0x1db),'fHfGo':function(_0x434e1d,_0x281d30){return _0x434e1d===_0x281d30;},'Yfxzr':'4.5.0','YjpLH':_0x4f1732(0x1fe),'CJigc':_0x4f1732(0x21a),'VUChc':_0x4f1732(0x1de),'oTzcv':'SIGINT','Vcqrp':'SIGHUP','UbdJl':function(_0x99ce0f,_0x362494){return _0x99ce0f!==_0x362494;},'kRRrB':'win32','IJfzE':'SIGABRT','OGlFF':_0x4f1732(0x19c),'iQjqa':_0x4f1732(0x20c),'TGfuE':_0x4f1732(0x1ec)},_0x120d57=this['framework'];global[_0x4f1732(0x1ed)]=this[_0x4f1732(0x1ed)],helper[_0x4f1732(0x199)](this[_0x4f1732(0x1ed)]),this['killSignal']=null,global[_0x4f1732(0x15a)]=this[_0x4f1732(0x15a)],logger['info'](_0x4f1732(0x1e4)+this[_0x4f1732(0x15a)]),!this['config'][_0x4f1732(0x184)]&&(this['config']['browserStackLocalOptions']=this[_0x4f1732(0x1ed)][_0x4f1732(0x242)]||{});if(helper[_0x4f1732(0x249)](helper[_0x4f1732(0x171)](this['config']))||helper['isUndefined'](helper[_0x4f1732(0x22d)](this[_0x4f1732(0x1ed)])))throw new Error(_0x404456[_0x4f1732(0x244)]);helper[_0x4f1732(0x1d2)](this[_0x4f1732(0x1ed)])&&helper[_0x4f1732(0x249)](helper[_0x4f1732(0x1b5)](this['config']))&&(!helper[_0x4f1732(0x249)](this[_0x4f1732(0x1ed)][_0x4f1732(0x184)])&&_0x404456[_0x4f1732(0x158)](this['config'][_0x4f1732(0x184)][_0x4f1732(0x1c1)],Object)?!helper[_0x4f1732(0x1ae)](this[_0x4f1732(0x1ed)][_0x4f1732(0x184)][_0x4f1732(0x1a7)])&&(this[_0x4f1732(0x1ed)][_0x4f1732(0x184)][_0x4f1732(0x23b)]=helper[_0x4f1732(0x1e9)]()):this[_0x4f1732(0x1ed)]['browserStackLocalOptions']={'localIdentifier':helper[_0x4f1732(0x1e9)]()});this[_0x4f1732(0x1ed)][_0x4f1732(0x184)][_0x4f1732(0x1a7)]=helper[_0x4f1732(0x1ae)](this[_0x4f1732(0x1ed)][_0x4f1732(0x184)][_0x4f1732(0x1a7)]),helper[_0x4f1732(0x1ee)](this[_0x4f1732(0x1ed)]);if(_0x404456[_0x4f1732(0x158)](_0x120d57,_0x404456[_0x4f1732(0x192)]))return;this[_0x4f1732(0x170)]();process[_0x4f1732(0x1bb)]['BROWSERSTACK_TURBOSCALE']&&(this[_0x4f1732(0x1ed)][_0x4f1732(0x18f)]=helper[_0x4f1732(0x1ae)](process[_0x4f1732(0x1bb)][_0x4f1732(0x151)]),this[_0x4f1732(0x1ed)][_0x4f1732(0x185)]=this[_0x4f1732(0x1ed)][_0x4f1732(0x185)]||{});helper[_0x4f1732(0x1b8)](this[_0x4f1732(0x1ed)])&&(process[_0x4f1732(0x1bb)][_0x4f1732(0x151)]=!![]);if(!helper['isBrowserstackInfra']()){try{process['env']['FRAMEWORK']=_0x120d57,utilities[_0x4f1732(0x1dc)](_0x404456[_0x4f1732(0x1c8)],{},this['config'],this[_0x4f1732(0x20a)]);}catch(_0x3db43a){logger[_0x4f1732(0x1c2)]('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x3db43a);}return;}if(helper[_0x4f1732(0x169)](_0x120d57)){if(global[_0x4f1732(0x1b6)])return;_0x404456[_0x4f1732(0x14f)](_0x404456[_0x4f1732(0x22c)](parseInt,helper['getPackageVersion'](_0x404456['afTlm'])),0x3)&&(this[_0x4f1732(0x1ed)][_0x4f1732(0x204)]=![]),_0x404456['fHfGo'](helper['compareVersions'](helper[_0x4f1732(0x227)](_0x404456[_0x4f1732(0x223)]),_0x404456['Yfxzr']),0x1)&&(this['config']['useW3C']=!![]);}(helper[_0x4f1732(0x249)](this[_0x4f1732(0x1ed)][_0x4f1732(0x23a)])||helper[_0x4f1732(0x249)](this[_0x4f1732(0x1ed)][_0x4f1732(0x23a)]['length']))&&(helper[_0x4f1732(0x249)](this[_0x4f1732(0x1ed)][_0x4f1732(0x149)])?logger[_0x4f1732(0x245)](_0x404456[_0x4f1732(0x1f7)]):logger['warn'](_0x404456[_0x4f1732(0x189)]),this[_0x4f1732(0x1ed)][_0x4f1732(0x23a)]=[]);!this[_0x4f1732(0x1ed)]['testContextOptions']&&(this[_0x4f1732(0x1ed)]['testContextOptions']={});try{process['env'][_0x4f1732(0x248)]=_0x1a5e2d['_'][0x0],utilities[_0x4f1732(0x1dc)](_0x404456['Gidiz'],{},this[_0x4f1732(0x1ed)],this[_0x4f1732(0x20a)]);}catch(_0x35d1c5){logger[_0x4f1732(0x1c2)](_0x4f1732(0x14c)+_0x35d1c5);}!this[_0x4f1732(0x1ed)][_0x4f1732(0x1b4)]&&logger['info'](constants[_0x4f1732(0x1fd)]),this[_0x4f1732(0x206)]=this[_0x4f1732(0x206)][_0x4f1732(0x1a2)](this),process['on'](_0x404456['VUChc'],this['intExitHandler']),process['on'](_0x404456[_0x4f1732(0x20e)],this['intExitHandler']),process['on'](_0x404456['Vcqrp'],this['intExitHandler']),_0x404456[_0x4f1732(0x1bd)](process[_0x4f1732(0x1a4)],_0x404456[_0x4f1732(0x14e)])?(process['on'](_0x404456[_0x4f1732(0x1d7)],this[_0x4f1732(0x206)]),process['on'](_0x404456['OGlFF'],this['intExitHandler'])):process['on'](_0x404456[_0x4f1732(0x243)],this['intExitHandler']),process['on'](_0x404456[_0x4f1732(0x234)],this[_0x4f1732(0x195)]());}async[a85_0x2cbe98(0x13f)](_0x15f349){const _0x161efd=a85_0x2cbe98,_0x5cac58={'WLXwx':'ats-repeater','lRFQs':_0x161efd(0x21d),'IStuo':_0x161efd(0x188),'NvwuG':function(_0x127d61,_0xa8d128){return _0x127d61===_0xa8d128;},'cCXcH':_0x161efd(0x1a6),'KIayy':function(_0x28492c,_0x2e6019){return _0x28492c+_0x2e6019;},'qZrMa':_0x161efd(0x152),'Krdau':function(_0x2054c8,_0x3ae6b8){return _0x2054c8(_0x3ae6b8);},'fjGHU':'codeceptjs'};this[_0x161efd(0x159)](_0x15f349);if(helper[_0x161efd(0x1b8)](this['config'])){const _0x3b2388=await helper[_0x161efd(0x150)](this[_0x161efd(0x1ed)]);this['config'][_0x161efd(0x177)]=_0x3b2388,_0x3b2388[_0x161efd(0x211)]&&helper[_0x161efd(0x1af)](this[_0x161efd(0x1ed)]['browserstackLocal'])&&helper[_0x161efd(0x1ae)](this[_0x161efd(0x1ed)]['browserstackLocal'])&&(this['config']['browserStackLocalOptions'][_0x161efd(0x23b)]=_0x5cac58[_0x161efd(0x1f6)],this[_0x161efd(0x1ed)][_0x161efd(0x184)][_0x5cac58[_0x161efd(0x15f)]]=_0x3b2388['customRepeaters'][_0x161efd(0x1df)](','),this['config'][_0x161efd(0x184)][_0x161efd(0x1d0)]=_0x5cac58[_0x161efd(0x1ff)]),this[_0x161efd(0x1ed)]['turboScaleUrl']=_0x3b2388[_0x161efd(0x17c)],this[_0x161efd(0x20a)]&&_0x5cac58[_0x161efd(0x1ea)](this[_0x161efd(0x20a)][_0x161efd(0x16b)](),_0x5cac58[_0x161efd(0x1c6)])?this[_0x161efd(0x1ed)][_0x161efd(0x156)]=_0x5cac58['KIayy'](_0x3b2388[_0x161efd(0x24a)],_0x5cac58[_0x161efd(0x1f1)]):constants[_0x161efd(0x1fc)]=helper[_0x161efd(0x22b)](this['config']),logger[_0x161efd(0x1c2)](_0x161efd(0x1fb)+constants[_0x161efd(0x1fc)]);}helper[_0x161efd(0x221)](this[_0x161efd(0x1ed)]),this[_0x161efd(0x180)](),_0x5cac58[_0x161efd(0x1e3)](setPercyFlag,this),await this['setupBrowserstackLocal'](),![_0x5cac58['fjGHU'],_0x5cac58[_0x161efd(0x1c6)]]['includes'](this[_0x161efd(0x20a)])&&!helper[_0x161efd(0x1b8)](this[_0x161efd(0x1ed)])&&!helper['getCentralUser']()['central_scanner']&&await this['setUpHubUrl']();}async['setupPercy'](){const _0x5a0c9a=a85_0x2cbe98,_0x40681b={};_0x40681b[_0x5a0c9a(0x19a)]=function(_0x317668,_0x4c4ecd){return _0x317668===_0x4c4ecd;},_0x40681b['lcQDB']=_0x5a0c9a(0x1e5),_0x40681b[_0x5a0c9a(0x220)]='Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.',_0x40681b[_0x5a0c9a(0x1fa)]=_0x5a0c9a(0x20f),_0x40681b[_0x5a0c9a(0x168)]=_0x5a0c9a(0x188),_0x40681b['nDpNQ']='beforeExit';const _0x5231fb=_0x40681b;if(helper[_0x5a0c9a(0x1ae)](this[_0x5a0c9a(0x1ed)][_0x5a0c9a(0x1c0)])&&(!this[_0x5a0c9a(0x1c0)]||!this[_0x5a0c9a(0x1c0)][_0x5a0c9a(0x1f0)]()))try{this[_0x5a0c9a(0x1c0)]=await percyHelper['startPercy'](this['config']);if(!this[_0x5a0c9a(0x1c0)]){process[_0x5a0c9a(0x1bb)][_0x5a0c9a(0x144)]=_0x5231fb['lcQDB'];throw new Error(_0x5231fb[_0x5a0c9a(0x220)]);}logger[_0x5a0c9a(0x245)](_0x5231fb[_0x5a0c9a(0x1fa)]),process[_0x5a0c9a(0x1bb)][_0x5a0c9a(0x144)]=_0x5231fb[_0x5a0c9a(0x168)];let _0x12c3d3=0x0;const _0x2d66c5=async()=>{const _0xaec3bb=_0x5a0c9a;_0x12c3d3++,_0x5231fb[_0xaec3bb(0x19a)](_0x12c3d3,0x1)&&await this['stopPercy']();};process['on'](_0x5231fb[_0x5a0c9a(0x179)],_0x2d66c5);}catch(_0x426d3a){process[_0x5a0c9a(0x1bb)][_0x5a0c9a(0x144)]=_0x5231fb['lcQDB'],logger[_0x5a0c9a(0x1c2)](_0x5a0c9a(0x20d)+_0x426d3a);throw new Error(_0x426d3a[_0x5a0c9a(0x14d)]());}}async['stopPercy'](){const _0x35d2b1=a85_0x2cbe98,_0x503671={};_0x503671[_0x35d2b1(0x1f9)]=_0x35d2b1(0x1c9),_0x503671[_0x35d2b1(0x22a)]='Error\x20occured\x20while\x20stopping\x20percy';const _0xd45847=_0x503671;if(this['percy']&&this[_0x35d2b1(0x1c0)][_0x35d2b1(0x1f0)]())try{await percyHelper[_0x35d2b1(0x154)](this[_0x35d2b1(0x1c0)]),logger[_0x35d2b1(0x245)](_0xd45847[_0x35d2b1(0x1f9)]);}catch(_0x27c455){logger[_0x35d2b1(0x172)](_0xd45847['mMNvk'],_0x27c455[_0x35d2b1(0x17a)]);}}async[a85_0x2cbe98(0x201)](){const _0x57ebc6=a85_0x2cbe98,_0x269de6={};_0x269de6['WRmzi']=_0x57ebc6(0x17f),_0x269de6['BQqAX']=_0x57ebc6(0x141);const _0x2a2cf8=_0x269de6;if(helper[_0x57ebc6(0x217)]()&&helper[_0x57ebc6(0x1ae)](this[_0x57ebc6(0x1ed)][_0x57ebc6(0x205)])&&(!this[_0x57ebc6(0x205)]||!this[_0x57ebc6(0x205)][_0x57ebc6(0x1f0)]()))try{if(this[_0x57ebc6(0x1ed)]['browserStackLocalOptions']['skipBinaryInitialisation']){logger[_0x57ebc6(0x1c2)](_0x2a2cf8[_0x57ebc6(0x1a3)]);return;}this[_0x57ebc6(0x205)]=await helper[_0x57ebc6(0x1ca)](this[_0x57ebc6(0x1ed)]),logger['info'](_0x2a2cf8[_0x57ebc6(0x21c)]);}catch(_0x1a085b){logger[_0x57ebc6(0x1c2)](_0x1a085b);throw new Error(_0x1a085b[_0x57ebc6(0x14d)]());}}async[a85_0x2cbe98(0x200)](){const _0x276ac4=a85_0x2cbe98,_0x325f6f={};_0x325f6f[_0x276ac4(0x147)]=_0x276ac4(0x155),_0x325f6f['boQzB']='Error\x20occured\x20while\x20stopping\x20local\x20binary';const _0x1454c5=_0x325f6f;if(this[_0x276ac4(0x205)]&&this['browserstackLocal'][_0x276ac4(0x1f0)]())try{await helper['stopLocalBinary'](this[_0x276ac4(0x205)]),logger[_0x276ac4(0x245)](_0x1454c5[_0x276ac4(0x147)]);}catch(_0x50f4e0){logger[_0x276ac4(0x172)](_0x1454c5[_0x276ac4(0x218)],_0x50f4e0[_0x276ac4(0x17a)]);}}async[a85_0x2cbe98(0x1a0)](){const _0x1bf01b=a85_0x2cbe98;return PerformanceTester[_0x1bf01b(0x1b3)](PerformanceAutEvents[_0x1bf01b(0x226)],async()=>{const _0x1417ab=_0x1bf01b;await hubAllocator[_0x1417ab(0x19d)](this[_0x1417ab(0x1ed)]);})();}async[a85_0x2cbe98(0x183)](){const _0x465586=a85_0x2cbe98,_0x30f115={'KsgGd':function(_0x4bc152,_0x1c3fc2){return _0x4bc152(_0x1c3fc2);},'WPfDw':'../ai-sdk-node/bundle','xIBRK':function(_0x4bf4e3,_0x4452e2,_0x24f429,_0x3b98a8,_0x30307d,_0x57b5cd,_0x3f912c){return _0x4bf4e3(_0x4452e2,_0x24f429,_0x3b98a8,_0x30307d,_0x57b5cd,_0x3f912c);},'wRuhF':_0x465586(0x1c3),'mQTdH':'BrowserstackHealingInitFailed','dijMP':_0x465586(0x15e),'PpnNZ':_0x465586(0x167),'QYWgx':function(_0x18e8a6,_0x7c4a83){return _0x18e8a6(_0x7c4a83);},'GSSwl':function(_0x5fa676,_0x1b7a12){return _0x5fa676===_0x1b7a12;},'MlVgm':_0x465586(0x188),'Bcaxn':function(_0x46792b,_0x208bb1){return _0x46792b===_0x208bb1;},'mtQBM':function(_0x3590c8,_0x296cc6){return _0x3590c8===_0x296cc6;},'JHLac':_0x465586(0x202),'kjFtp':'Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','sDCJx':_0x465586(0x16c),'jrJva':function(_0xe72ea6,_0x240428){return _0xe72ea6(_0x240428);},'LQvfV':_0x465586(0x236),'gyOqN':function(_0x447a79,_0x1f0457){return _0x447a79>=_0x1f0457;},'fKYOI':function(_0x217c74,_0x4c2ec7){return _0x217c74<_0x4c2ec7;},'odfRd':function(_0x531426,_0x1ce495){return _0x531426>=_0x1ce495;},'qBLDE':_0x465586(0x22f),'rtFEq':'aiHeal:tcgAuth','OFiis':function(_0x30d9d8){return _0x30d9d8();}},_0x1c6f6e=PerformanceTester[_0x465586(0x1b3)](_0x30f115[_0x465586(0x178)],async()=>{const _0x410979=_0x465586;try{const _0x1192ed=new Date(),_0x1d3b72=helper['getProxyConfigForTcg'](this['config']),_0x467cae=_0x30f115[_0x410979(0x15d)](require,path[_0x410979(0x1df)](__dirname,_0x30f115[_0x410979(0x1d4)])),_0x351cb5=_0x30f115[_0x410979(0x232)](timeoutPromise,constants[_0x410979(0x181)],_0x30f115[_0x410979(0x19e)],_0x30f115[_0x410979(0x153)],_0x1192ed,this[_0x410979(0x1ed)],this[_0x410979(0x20a)]),_0xee1376={'tcgUrl':constants[_0x410979(0x1bc)],'sdkVersion':_0x30f115[_0x410979(0x15d)](require,_0x30f115['dijMP'])[_0x410979(0x191)],'methodUsed':_0x30f115['PpnNZ'],'proxyConfig':_0x1d3b72,'os':os[_0x410979(0x1a4)]()};if(_0x1d3b72&&_0x1d3b72[_0x410979(0x23f)]){utilities[_0x410979(0x1dc)](constants[_0x410979(0x1da)],_0xee1376,this[_0x410979(0x1ed)],this[_0x410979(0x20a)]);return;}const _0x26436e={};_0x26436e[_0x410979(0x1bf)]=_0x1d3b72;const _0x3b2735=await Promise[_0x410979(0x1b9)]([_0x467cae[_0x410979(0x1b1)](this[_0x410979(0x1ed)][_0x410979(0x1a1)],this[_0x410979(0x1ed)][_0x410979(0x1dd)],constants[_0x410979(0x1bc)],_0x30f115[_0x410979(0x233)](require,_0x30f115['dijMP'])[_0x410979(0x191)],_0x26436e)[_0x410979(0x238)](_0x20fa02=>{const _0x47321d=_0x410979;return _0x351cb5[_0x47321d(0x162)](),_0x20fa02;}),_0x351cb5]);_0x3b2735[_0x410979(0x1d1)]=_0x30f115[_0x410979(0x16e)](_0x3b2735[_0x410979(0x1d1)],_0x30f115[_0x410979(0x1f5)])||_0x30f115[_0x410979(0x1a9)](_0x3b2735[_0x410979(0x1d1)],!![]);const _0x32273b=_0x30f115[_0x410979(0x19b)](this[_0x410979(0x1ed)][_0x410979(0x1c5)],!![])||_0x30f115[_0x410979(0x19b)](this['config']['selfHeal'],_0x30f115[_0x410979(0x1f5)]);if(_0x30f115[_0x410979(0x1a9)](_0x3b2735[_0x410979(0x17a)],constants[_0x410979(0x18e)])&&_0x32273b)logger['info'](_0x30f115[_0x410979(0x1f8)]);else{if(!_0x3b2735[_0x410979(0x18b)]&&_0x30f115[_0x410979(0x16e)](_0x3b2735[_0x410979(0x241)],0x1f7)&&_0x32273b)logger[_0x410979(0x245)](_0x30f115[_0x410979(0x235)]),utilities['fireFunnelTestEvent'](constants[_0x410979(0x1aa)],_0xee1376,this['config'],this[_0x410979(0x20a)]);else{if(!_0x3b2735[_0x410979(0x18b)]&&_0x32273b){logger['info'](_0x30f115['sDCJx']);const _0x50401c={'tcgUrl':constants[_0x410979(0x1bc)],'sdkVersion':_0x30f115['jrJva'](require,_0x30f115[_0x410979(0x1be)])[_0x410979(0x191)],'methodUsed':_0x30f115['PpnNZ'],'proxyConfig':_0x1d3b72,'os':os[_0x410979(0x1a4)]()};utilities[_0x410979(0x1dc)](constants[_0x410979(0x1ef)],_0x50401c,this[_0x410979(0x1ed)],this[_0x410979(0x20a)]);}else{if(_0x3b2735[_0x410979(0x18b)]&&!_0x3b2735[_0x410979(0x1d1)]&&_0x32273b)logger['info'](_0x30f115[_0x410979(0x1b7)]);else{if(_0x30f115[_0x410979(0x1d9)](_0x3b2735['status'],0xc8)&&_0x30f115[_0x410979(0x175)](_0x3b2735[_0x410979(0x241)],0x12c))utilities[_0x410979(0x1dc)](constants[_0x410979(0x23d)],_0xee1376,this[_0x410979(0x1ed)],this[_0x410979(0x20a)]);else{if(_0x30f115[_0x410979(0x1ad)](_0x3b2735[_0x410979(0x241)],0x190))_0xee1376[_0x410979(0x241)]=_0x3b2735[_0x410979(0x241)],utilities[_0x410979(0x1dc)](constants[_0x410979(0x160)],_0xee1376,this[_0x410979(0x1ed)],this[_0x410979(0x20a)]);else!_0x3b2735[_0x410979(0x241)]&&utilities[_0x410979(0x1dc)](constants[_0x410979(0x214)],_0xee1376,this[_0x410979(0x1ed)],this[_0x410979(0x20a)]);}}}}}if(_0x3b2735[_0x410979(0x18b)]&&_0x3b2735['isHealingEnabled']){const _0x1445f0={};_0x1445f0[_0x410979(0x1cf)]=_0x3b2735;const _0x2ebd22=_0x1445f0;_0x1d3b72&&(_0x2ebd22[_0x410979(0x1c4)]=_0x1d3b72),_0x2ebd22[_0x410979(0x20a)]=this[_0x410979(0x20a)],_0x2ebd22[_0x410979(0x173)]=this['config'],helper[_0x410979(0x17d)](_0x2ebd22),logger[_0x410979(0x1c2)](_0x30f115[_0x410979(0x1f4)]);}}catch(_0x1cd17e){logger['debug'](_0x410979(0x14b)+(_0x1cd17e['message']?_0x1cd17e[_0x410979(0x17a)]:''));}});await _0x30f115[_0x465586(0x240)](_0x1c6f6e);}['setupKeepAlive'](){const _0x17ee0f=a85_0x2cbe98,_0x16f6f8={'cXBuL':function(_0xb5e326,_0x1f2014){return _0xb5e326(_0x1f2014);},'DqVNU':_0x17ee0f(0x145)};_0x16f6f8[_0x17ee0f(0x15b)](require,_0x16f6f8[_0x17ee0f(0x1e0)])();}['handleExceptions'](){const _0x2e6f58=a85_0x2cbe98,_0x2a0cc4={};_0x2a0cc4['ZRVfc']=_0x2e6f58(0x229),_0x2a0cc4[_0x2e6f58(0x239)]='uncaughtException';const _0x182a91=_0x2a0cc4,_0x1b39be=_0xadf4db=>{const _0x456fb1=_0x2e6f58;logger['error'](_0xadf4db[_0x456fb1(0x17a)]),logger[_0x456fb1(0x1c2)](util['format'](_0xadf4db)),this[_0x456fb1(0x212)][_0x456fb1(0x1f3)](util[_0x456fb1(0x247)]('%j',_0xadf4db)),PerformanceTester[_0x456fb1(0x194)](_0xadf4db);};process['on'](_0x182a91['ZRVfc'],_0x1b39be),process['on'](_0x182a91[_0x2e6f58(0x239)],_0x1b39be);}async['intExitHandler'](_0x4a7225){const _0x5cb3cc=a85_0x2cbe98,_0x3b53e6={};_0x3b53e6[_0x5cb3cc(0x210)]=_0x5cb3cc(0x1e1),_0x3b53e6[_0x5cb3cc(0x1b2)]=function(_0x3d753d,_0xcd6a8e){return _0x3d753d+_0xcd6a8e;},_0x3b53e6[_0x5cb3cc(0x174)]=_0x5cb3cc(0x148),_0x3b53e6[_0x5cb3cc(0x1e7)]=function(_0x5b97cf,_0x3cabb8){return _0x5b97cf+_0x3cabb8;},_0x3b53e6[_0x5cb3cc(0x23e)]=_0x5cb3cc(0x161);const _0x2a5186=_0x3b53e6,_0x1d8104=_0x2a5186[_0x5cb3cc(0x210)]['split']('|');let _0x15eec8=0x0;while(!![]){switch(_0x1d8104[_0x15eec8++]){case'0':this[_0x2a5186[_0x5cb3cc(0x1b2)](_0x2a5186['taHVp'],_0x4a7225)]=!![];continue;case'1':fileLogger&&fileLogger[_0x5cb3cc(0x1ce)]();continue;case'2':await BrowserstackCLI[_0x5cb3cc(0x19f)]()[_0x5cb3cc(0x23c)]();continue;case'3':if(this[_0x2a5186['DfyWL'](_0x2a5186[_0x5cb3cc(0x174)],_0x4a7225)])return;continue;case'4':logger[_0x5cb3cc(0x245)](_0x2a5186['ZFikI'](_0x2a5186[_0x5cb3cc(0x23e)],_0x4a7225));continue;case'5':this[_0x5cb3cc(0x166)]=_0x4a7225;continue;case'6':logger&&logger['close']();continue;case'7':await TestHubHandler[_0x5cb3cc(0x23c)](_0x4a7225);continue;}break;}}['exitHandler'](){const _0x4c7a2a=a85_0x2cbe98,_0x38e256={'cVSyQ':function(_0x2cd293,_0x3bd493){return _0x2cd293===_0x3bd493;},'GbGGD':_0x4c7a2a(0x24c),'rlBDL':function(_0x44ad9e,_0x513527){return _0x44ad9e>_0x513527;},'bowtp':function(_0x1cade7,_0x157a96){return _0x1cade7>_0x157a96;},'lbriK':function(_0x39dc0e){return _0x39dc0e();},'vSLkd':_0x4c7a2a(0x24b)};let _0x76ebb0=0x0;return async()=>{const _0x489329=_0x4c7a2a;_0x76ebb0++;if(_0x38e256[_0x489329(0x187)](_0x76ebb0,0x1)){helper[_0x489329(0x1e8)](this[_0x489329(0x20a)])&&await this['stopBrowserstackLocal']();try{logger[_0x489329(0x1c2)](_0x38e256[_0x489329(0x216)]),await TestHubHandler[_0x489329(0x23c)](_0x76ebb0),await BrowserstackCLI[_0x489329(0x19f)]()[_0x489329(0x23c)]('1');}catch(_0x40f66c){logger[_0x489329(0x1c2)](_0x489329(0x246)+util[_0x489329(0x247)](_0x40f66c));}PerformanceTester['end'](PerformanceEvents['SDK_CLEANUP']);if(PerformanceTester['isEnabled']()){const {measures:_0x1be2e7,errors:_0x212f22}=await PerformanceTester[_0x489329(0x176)](),_0x153ad5={};if(_0x1be2e7&&_0x38e256[_0x489329(0x222)](_0x1be2e7[_0x489329(0x209)],0x0)||_0x212f22&&_0x38e256['bowtp'](_0x212f22[_0x489329(0x209)],0x0)){const _0x53364e={};_0x53364e[_0x489329(0x1e2)]=_0x1be2e7,_0x53364e[_0x489329(0x1a5)]=_0x212f22,Object['assign'](_0x153ad5,_0x53364e);}try{const _0x53a300=await helper[_0x489329(0x190)](_0x153ad5,this[_0x489329(0x1ed)]);logger[_0x489329(0x1c2)](_0x489329(0x193)+constants[_0x489329(0x230)]+_0x489329(0x17b)+_0x53a300['statusCode']);}catch(_0x2ac09a){logger['debug'](_0x489329(0x196)+constants[_0x489329(0x230)]+_0x489329(0x17e)+util[_0x489329(0x247)](_0x2ac09a));}try{fs[_0x489329(0x142)](path[_0x489329(0x1df)](_0x38e256[_0x489329(0x1c7)](getLogDir),_0x38e256[_0x489329(0x165)]),JSON[_0x489329(0x198)](_0x153ad5));}catch(_0x102b3f){logger['debug'](_0x489329(0x208)+_0x102b3f);}}}};}}function a85_0x2770(_0x63ca0f,_0x4edf49){const _0x8de5a3=a85_0x8de5();return a85_0x2770=function(_0x277057,_0x393f64){_0x277057=_0x277057-0x13e;let _0xea3616=_0x8de5a3[_0x277057];return _0xea3616;},a85_0x2770(_0x63ca0f,_0x4edf49);}function a85_0x8de5(){const _0x11ef70=['mtQBM','SIGQUIT','allocateHub','wRuhF','getInstance','setUpHubUrl','accessKey','bind','WRmzi','platform','exceptions','playwright','skipBinaryInitialisation','10892bGzprM','Bcaxn','TCG_DOWN','3736OQOYnr','IPlUW','odfRd','isTrue','isNotUndefined','integrations','init','DfyWL','measureWrapper','disableAutoCaptureLogs','getLocalIdentifier','__isPlaywrightInstalled','LQvfV','isTurboScaleSession','race','5pRyAKA','env','TCG_URL','UbdJl','dijMP','proxy','percy','constructor','debug','BrowserstackHealing.init\x20method\x20timed\x20out','proxyConfig','selfHeal','cCXcH','lbriK','Gidiz','Percy\x20stopped','startLocalBinary','147xUGpdi','./performance/constants','81842MAVmxA','close','tcgAuthConfig','forceLocal','isHealingEnabled','getLocalConfig','../hubAllocationMethods','WPfDw','2463780oknqin','skipSessionStatus','IJfzE','./testhub/utils','gyOqN','AI_PROXY_FAILURE','selenium-webdriver','fireFunnelTestEvent','userName','SIGTERM','join','DqVNU','6|1|3|0|4|5|7|2','measures','Krdau','SDK\x20run\x20started\x20with\x20id:\x20','false','envConfig','ZFikI','checkStopLocalBinaryOnExit','generateLocalIdentifier','NvwuG','./helper','beforeExit','config','setHandlePWError','TCG_AUTH_FAILURE','isRunning','qZrMa','fileLogger','push','qBLDE','MlVgm','WLXwx','YjpLH','JHLac','bfGUg','LqzOO','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','hubUrl','AUTOLOGCAPTURE_NOTIFICATION','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','IStuo','stopBrowserstackLocal','setupBrowserstackLocal','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','SDKTestAttempted','useW3C','browserstackLocal','intExitHandler','default','Error\x20in\x20writing\x20events\x20to\x20file\x20','length','framework','507825jmXuec','SIGBREAK','Error\x20in\x20percy\x20setup\x20','oTzcv','Percy\x20started\x20successfully','eqseH','isTrialGrid','unhandledErrors','./utilities','INVALID_INIT_RESP_WITH_USER_IMPACT','6209jbTDHK','GbGGD','isBrowserstackInfra','boQzB','userName\x20or\x20accessKey\x20is\x20not\x20defined','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','setCredentialsFromYmlConfig','BQqAX','custom-repeater','./testhub/testhubHandler','skipSessionName','ELfVk','setProxySettings','rlBDL','afTlm','testContextOptions','uuid','HUB_MANAGEMENT','getPackageVersion','No\x20config\x20provided.','unhandledRejection','mMNvk','getHubUrl','vIhSn','getAccessKey','getConfigPath','tcg\x20config\x20setup\x20successful.','EDS_URL','setLogDir','xIBRK','QYWgx','TGfuE','kjFtp','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','normalizeTestReportingEnvVars','then','jIlmH','platforms','localIdentifier','stop','AI_INIT_SUCCESSFUL','mvSjx','proxyUrl','OFiis','status','localOptions','iQjqa','KYVAu','info','Error\x20in\x20sending\x20testhub\x20stop:\x20','format','FRAMEWORK','isUndefined','playwrightUrl','events.json','Calling\x20Build\x20Stop\x20from\x20ExitHandler','startMonitoring','initialize','4KMnASj','Local\x20binary\x20started\x20successfully','writeFileSync','errorMessage','BROWSERSTACK_PERCY','./setKeepAlive','3743890QyZmjw','mTXWk','handled','parallelsPerPlatform','../bin/v2/browserstackCLI','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','toString','kRRrB','Abntm','getTurboScaleGridDetails','BROWSERSTACK_TURBOSCALE','?caps=','mQTdH','stopPercy','Local\x20binary\x20stopped','turboScaleUrl','setBrowserstackInfraFromConfig','pybZV','preInitialize','sdkRunId','cXBuL','./logger','KsgGd','../../package.json','lRFQs','AI_INIT_FAILURE','Shutdown\x20triggered\x20by\x20','cancel','setLogLevel','2301630sBUBZd','vSLkd','killSignal','BrowserstackHealing.init','YjFDV','requireSeleniumWebdriverCheck','cliConfig','toLowerCase','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','path','GSSwl','21|16|8|9|6|2|13|17|22|20|10|19|7|12|18|0|5|3|1|15|4|11|14','handleExceptions','getUserName','error','bstackConfig','taHVp','fKYOI','finalize','turboScaleGridDetails','rtFEq','nDpNQ','message','\x20with\x20response\x20','url','setupTcgConfigFile','\x20with\x20error\x20','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','setupKeepAlive','TCG_AUTH_TIMEOUT','./timeoutPromise','setupTCGAuth','browserStackLocalOptions','turboScaleOptions','getFinalCaps','cVSyQ','true','CJigc','../bin/utils/constants','isAuthenticated','./percy/utils','setCLICaps','UPGRADE_REQUIRED','turboScale','sendToEDS','version','FHvDH','Data\x20sent\x20successfully\x20to\x20','captureError','exitHandler','Failed\x20to\x20send\x20data\x20to\x20','winstonLogger','stringify','sanitizeCaps','ivOwX'];a85_0x8de5=function(){return _0x11ef70;};return a85_0x8de5();}exports[a85_0x2cbe98(0x207)]=BrowserStackSetup;