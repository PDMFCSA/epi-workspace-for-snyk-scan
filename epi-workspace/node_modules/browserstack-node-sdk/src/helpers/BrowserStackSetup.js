const a83_0x23177b=a83_0x4fd0;(function(_0x460f68,_0x1c6dc9){const _0x2846f4=a83_0x4fd0,_0x3539ae=_0x460f68();while(!![]){try{const _0x4e82c4=parseInt(_0x2846f4(0x210))/0x1*(parseInt(_0x2846f4(0x179))/0x2)+parseInt(_0x2846f4(0x1b5))/0x3+parseInt(_0x2846f4(0x173))/0x4*(parseInt(_0x2846f4(0x197))/0x5)+parseInt(_0x2846f4(0x1d0))/0x6+-parseInt(_0x2846f4(0x1cd))/0x7*(parseInt(_0x2846f4(0x1a8))/0x8)+parseInt(_0x2846f4(0x1b8))/0x9+parseInt(_0x2846f4(0x136))/0xa*(-parseInt(_0x2846f4(0x1e2))/0xb);if(_0x4e82c4===_0x1c6dc9)break;else _0x3539ae['push'](_0x3539ae['shift']());}catch(_0x33b3f4){_0x3539ae['push'](_0x3539ae['shift']());}}}(a83_0x5d73,0x812fe));function a83_0x5d73(){const _0x18dc10=['tdDOi','isHealingEnabled','allocateHub','VQffL','testContextOptions','cliConfig','IfvOv','nbMkF','EDS_URL','TTyqc','amcuY','getInstance','SKlXY','Error\x20in\x20sending\x20testhub\x20stop:\x20','BROWSERSTACK_PERCY','Percy\x20stopped','skipBinaryInitialisation','No\x20config\x20provided.','ipnIO','2EvQrrc','uncaughtException','TCG_AUTH_TIMEOUT','version','stringify','iOJMn','wCCLP','preInitialize','getCentralUser','assign','getLocalConfig','envConfig','setProxySettings','sdkRunId','isNotUndefined','Local\x20binary\x20stopped','url','warn','tcgAuthConfig','mlMhj','Shutdown\x20triggered\x20by\x20','SUUjv','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','close','getUserName','proxy','VwMFB','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','CypPe','turboScale','userName','aDDCk','isUndefined','./percy/utils','fireFunnelTestEvent','../ai-sdk-node/bundle','framework','33140jUTIjC','JUGdi','skipSessionName','../bin/v2/browserstackCLI','SIGTERM','selfHeal','4.5.0','setCredentialsFromYmlConfig','lCjTO','setUpHubUrl','turboScaleOptions','../hubAllocationMethods','AI_INIT_FAILURE','AI_INIT_SUCCESSFUL','oQsEU','toLowerCase','startLocalBinary','SIGABRT','browserStackLocalOptions','info','localIdentifier','./logger','HoZOw','WAQtE','isRunning','stopBrowserstackLocal','TCG_DOWN','stop','Error\x20occured\x20while\x20stopping\x20percy','aiHeal:tcgAuth','BDsvp','MUWSc','forceLocal','browserstackLocal','./performance/constants','gJrRb','PJfTY','measures','false','kqQpL','setBrowserstackInfraFromConfig','bind','SDKTestAttempted','toString','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','useW3C','setCLICaps','generateLocalIdentifier','rlSYH','checkStopLocalBinaryOnExit','YAgVd','constructor','skipSessionStatus','env','compareVersions','events.json','../bin/utils/constants','isBrowserstackInfra','xtaBj','setupKeepAlive','jLjHN','1460060zUAChw','getLocalIdentifier','gSUAc','intExitHandler','Failed\x20to\x20send\x20data\x20to\x20','status','636710rwPzmy','percy','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','error','split','length','IttAW','yGdcG','isAuthenticated','SIGBREAK','setupBrowserstackLocal','SsmvP','custom-repeater','isTurboScaleSession','isTrue','join','Error\x20in\x20writing\x20events\x20to\x20file\x20','init','dmIyf','platform','killSignal','captureError','playwright','FFBgu','GZxfV','end','FqqYY','vNQzB','uuid','tcg\x20config\x20setup\x20successful.','5DcVKuF','VIwDO','HeGAJ','readConfig','format','getConfigPath','jSsWU','RGLqr','BGJKC','initialize','Error\x20in\x20percy\x20setup\x20','measureWrapper','\x20with\x20response\x20','FTYsB','aZFuN','handled','\x20with\x20error\x20','8EOUcWd','SlaSL','util','AkpSI','./testhub/utils','then','fwDIZ','cancel','getPackageVersion','win32','true','kWyUE','exceptions','3110994dujpmu','UPGRADE_REQUIRED','setupTCGAuth','4953555ZUMuhT','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','XrzZm','Percy\x20started\x20successfully','jiKJZ','platforms','getProxyConfigForTcg','./helper','WjDSa','HUB_MANAGEMENT','BrowserstackHealing.init','debug','selenium-webdriver','INVALID_INIT_RESP_WITH_USER_IMPACT','parallelsPerPlatform','setupPercy','BROWSERSTACK_TURBOSCALE','config','localOptions','startMonitoring','proxyConfig','4709460dJhjct','beforeExit','unhandledErrors','6033120CXUzUH','eaCpF','Calling\x20Build\x20Stop\x20from\x20ExitHandler','HMQck','RPeKd','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','setupTcgConfigFile','finalize','message','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','TCG_AUTH_FAILURE','aQUrt','setLogLevel','exitHandler','BrowserstackHealing.init\x20method\x20timed\x20out','fileLogger','kOQgD','central_scanner','7942zcrgwP','TmvJM','SDK_CLEANUP','wSyhs','nRPnC','getAccessKey','Data\x20sent\x20successfully\x20to\x20','lMheS','cGwKm','./setKeepAlive','Error\x20occured\x20while\x20stopping\x20local\x20binary','LIgjb','YvcBz','stopPercy','AI_PROXY_FAILURE','SIGINT','TCG_URL','SIGHUP','eNyOI','WAHWA','handleExceptions','qrCkX','setLogDir','xkMxi','7|19|3|4|20|8|18|5|10|21|17|2|9|14|16|0|1|15|11|12|13|6','requireSeleniumWebdriverCheck','setEnvCaps'];a83_0x5d73=function(){return _0x18dc10;};return a83_0x5d73();}const util=require(a83_0x23177b(0x1aa)),os=require('os'),path=require('path'),{v4:uuidv4}=require(a83_0x23177b(0x195)),fs=require('fs'),constants=require(a83_0x23177b(0x16e)),logger=require(a83_0x23177b(0x14b))['winstonLogger'],fileLogger=require(a83_0x23177b(0x14b))[a83_0x23177b(0x1df)],{getLogDir}=require(a83_0x23177b(0x14b)),helper=require(a83_0x23177b(0x1bf)),utilities=require('./utilities'),percyHelper=require(a83_0x23177b(0x132)),hubAllocator=require(a83_0x23177b(0x141)),PerformanceTester=require('./performance/performance-tester'),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a83_0x23177b(0x158)),{setPercyFlag}=require(a83_0x23177b(0x1ac)),TestHubHandler=require('./testhub/testhubHandler'),timeoutPromise=require('./timeoutPromise'),BrowserstackCLI=require(a83_0x23177b(0x139));class BrowserStackSetup{constructor(_0x64a7b7,_0x966f51){const _0x4aea99=a83_0x23177b,_0x4df937={'FFBgu':_0x4aea99(0x1fa),'GZxfV':_0x4aea99(0x20e),'Plzcg':function(_0x2865ca){return _0x2865ca();}},_0x108b23=_0x4df937[_0x4aea99(0x190)][_0x4aea99(0x17d)]('|');let _0x4168d0=0x0;while(!![]){switch(_0x108b23[_0x4168d0++]){case'0':helper[_0x4aea99(0x13d)](this[_0x4aea99(0x1c9)]);continue;case'1':this['config']['testContextOptions'][_0x4aea99(0x16a)]=!helper['isBrowserstackInfra']()||helper[_0x4aea99(0x187)](this[_0x4aea99(0x1c9)][_0x4aea99(0x201)][_0x4aea99(0x16a)]);continue;case'2':global[_0x4aea99(0x135)]=_0x966f51;continue;case'3':this[_0x4aea99(0x157)]=null;continue;case'4':this[_0x4aea99(0x17a)]=null;continue;case'5':this[_0x4aea99(0x1c9)]['testContextOptions']=this[_0x4aea99(0x1c9)]['testContextOptions']||{};continue;case'6':PerformanceTester[_0x4aea99(0x1cb)]();continue;case'7':this['unhandledErrors']=[];continue;case'8':this['cliConfig']=helper[_0x4aea99(0x164)](_0x64a7b7);continue;case'9':if(helper['isUndefined'](this[_0x4aea99(0x1c9)]))throw new Error(_0x4df937[_0x4aea99(0x191)]);continue;case'10':this['errorMessage']={};continue;case'11':helper['getFinalCaps'](this[_0x4aea99(0x1c9)],this['cliConfig'],this['envConfig']);continue;case'12':helper[_0x4aea99(0x1f8)](this[_0x4aea99(0x1c9)]);continue;case'13':helper[_0x4aea99(0x1dc)](this['config'],this['cliConfig'],this[_0x4aea99(0x21b)]);continue;case'14':if(this[_0x4aea99(0x1c9)][_0x4aea99(0x17c)])throw new Error(this['config'][_0x4aea99(0x17c)]);continue;case'15':this[_0x4aea99(0x1c9)][_0x4aea99(0x201)][_0x4aea99(0x138)]=!helper[_0x4aea99(0x16f)]()||helper[_0x4aea99(0x187)](this['config'][_0x4aea99(0x201)][_0x4aea99(0x138)]);continue;case'16':helper[_0x4aea99(0x15e)](this['config'],this[_0x4aea99(0x202)]);continue;case'17':this[_0x4aea99(0x135)]=_0x966f51;continue;case'18':this['config'][_0x4aea99(0x1bd)]=this['config']['platforms']||[];continue;case'19':this['envConfig']=helper[_0x4aea99(0x1fc)]();continue;case'20':this[_0x4aea99(0x1c9)]=helper[_0x4aea99(0x19a)](helper[_0x4aea99(0x19c)](_0x64a7b7));continue;case'21':this[_0x4aea99(0x21d)]=_0x4df937['Plzcg'](uuidv4);continue;}break;}}[a83_0x23177b(0x217)](_0x510fb4){const _0x59aaa1=a83_0x23177b,_0x11deba={'TTyqc':'userName\x20or\x20accessKey\x20is\x20not\x20defined','alRSO':function(_0x4ed37b,_0x4667e4){return _0x4ed37b===_0x4667e4;},'IttAW':function(_0x789b71,_0x43a9fb){return _0x789b71===_0x43a9fb;},'aDDCk':'integrations','lCjTO':_0x59aaa1(0x160),'SjadD':function(_0x890dd8,_0x5a2286){return _0x890dd8<_0x5a2286;},'amcuY':function(_0x21cf81,_0x5a0011){return _0x21cf81(_0x5a0011);},'YAgVd':_0x59aaa1(0x1c4),'BGJKC':function(_0x212a2b,_0x295c7a){return _0x212a2b===_0x295c7a;},'GQXFi':_0x59aaa1(0x13c),'RGLqr':_0x59aaa1(0x17b),'FMeFE':_0x59aaa1(0x127),'oQsEU':_0x59aaa1(0x13a),'mlMhj':_0x59aaa1(0x1f1),'yGdcG':_0x59aaa1(0x1f3),'JUGdi':function(_0x55fd3b,_0x2af9f){return _0x55fd3b!==_0x2af9f;},'dCRYX':_0x59aaa1(0x1b1),'tTjwG':_0x59aaa1(0x147),'CypPe':'SIGQUIT','aZFuN':_0x59aaa1(0x182),'tzwLP':_0x59aaa1(0x1ce)},_0xa7c6f2=this[_0x59aaa1(0x135)];global[_0x59aaa1(0x1c9)]=this[_0x59aaa1(0x1c9)],helper['sanitizeCaps'](this[_0x59aaa1(0x1c9)]),this['killSignal']=null,global[_0x59aaa1(0x21d)]=this[_0x59aaa1(0x21d)],logger[_0x59aaa1(0x149)]('SDK\x20run\x20started\x20with\x20id:\x20'+this[_0x59aaa1(0x21d)]),!this[_0x59aaa1(0x1c9)][_0x59aaa1(0x148)]&&(this[_0x59aaa1(0x1c9)][_0x59aaa1(0x148)]=this[_0x59aaa1(0x1c9)][_0x59aaa1(0x1ca)]||{});if(helper[_0x59aaa1(0x131)](helper[_0x59aaa1(0x129)](this[_0x59aaa1(0x1c9)]))||helper[_0x59aaa1(0x131)](helper[_0x59aaa1(0x1e7)](this[_0x59aaa1(0x1c9)])))throw new Error(_0x11deba[_0x59aaa1(0x206)]);helper[_0x59aaa1(0x21a)](this[_0x59aaa1(0x1c9)])&&helper[_0x59aaa1(0x131)](helper[_0x59aaa1(0x174)](this['config']))&&(!helper[_0x59aaa1(0x131)](this[_0x59aaa1(0x1c9)][_0x59aaa1(0x148)])&&_0x11deba['alRSO'](this['config'][_0x59aaa1(0x148)][_0x59aaa1(0x169)],Object)?!helper[_0x59aaa1(0x187)](this[_0x59aaa1(0x1c9)][_0x59aaa1(0x148)][_0x59aaa1(0x20d)])&&(this['config'][_0x59aaa1(0x148)]['localIdentifier']=helper['generateLocalIdentifier']()):this[_0x59aaa1(0x1c9)]['browserStackLocalOptions']={'localIdentifier':helper[_0x59aaa1(0x165)]()});this[_0x59aaa1(0x1c9)][_0x59aaa1(0x148)][_0x59aaa1(0x20d)]=helper['isTrue'](this[_0x59aaa1(0x1c9)][_0x59aaa1(0x148)]['skipBinaryInitialisation']),helper['setHandlePWError'](this[_0x59aaa1(0x1c9)]);if(_0x11deba[_0x59aaa1(0x17f)](_0xa7c6f2,_0x11deba[_0x59aaa1(0x130)]))return;this[_0x59aaa1(0x1f6)]();process[_0x59aaa1(0x16b)][_0x59aaa1(0x1c8)]&&(this['config'][_0x59aaa1(0x12e)]=helper[_0x59aaa1(0x187)](process[_0x59aaa1(0x16b)][_0x59aaa1(0x1c8)]),this[_0x59aaa1(0x1c9)][_0x59aaa1(0x140)]=this['config']['turboScaleOptions']||{});helper[_0x59aaa1(0x186)](this[_0x59aaa1(0x1c9)])&&(process['env'][_0x59aaa1(0x1c8)]=!![]);if(!helper[_0x59aaa1(0x16f)]()){try{process[_0x59aaa1(0x16b)]['FRAMEWORK']=_0xa7c6f2,utilities[_0x59aaa1(0x133)](_0x11deba[_0x59aaa1(0x13e)],{},this[_0x59aaa1(0x1c9)],this[_0x59aaa1(0x135)]);}catch(_0x5323f8){logger['debug'](_0x59aaa1(0x162)+_0x5323f8);}return;}helper[_0x59aaa1(0x1fb)](_0xa7c6f2)&&(_0x11deba['SjadD'](_0x11deba[_0x59aaa1(0x207)](parseInt,helper[_0x59aaa1(0x1b0)](_0x11deba[_0x59aaa1(0x168)])),0x3)&&(this[_0x59aaa1(0x1c9)][_0x59aaa1(0x163)]=![]),_0x11deba[_0x59aaa1(0x19f)](helper[_0x59aaa1(0x16c)](helper[_0x59aaa1(0x1b0)](_0x11deba[_0x59aaa1(0x168)]),_0x11deba['GQXFi']),0x1)&&(this[_0x59aaa1(0x1c9)]['useW3C']=!![]));(helper[_0x59aaa1(0x131)](this[_0x59aaa1(0x1c9)][_0x59aaa1(0x1bd)])||helper['isUndefined'](this[_0x59aaa1(0x1c9)][_0x59aaa1(0x1bd)][_0x59aaa1(0x17e)]))&&(helper[_0x59aaa1(0x131)](this[_0x59aaa1(0x1c9)][_0x59aaa1(0x1c6)])?logger['info'](_0x11deba[_0x59aaa1(0x19e)]):logger[_0x59aaa1(0x122)](_0x11deba['FMeFE']),this[_0x59aaa1(0x1c9)][_0x59aaa1(0x1bd)]=[]);!this[_0x59aaa1(0x1c9)][_0x59aaa1(0x201)]&&(this[_0x59aaa1(0x1c9)][_0x59aaa1(0x201)]={});try{process[_0x59aaa1(0x16b)]['FRAMEWORK']=_0x510fb4['_'][0x0],utilities[_0x59aaa1(0x133)](_0x11deba[_0x59aaa1(0x13e)],{},this[_0x59aaa1(0x1c9)],this['framework']);}catch(_0x474564){logger[_0x59aaa1(0x1c3)](_0x59aaa1(0x162)+_0x474564);}!this[_0x59aaa1(0x1c9)]['disableAutoCaptureLogs']&&logger[_0x59aaa1(0x149)](constants['AUTOLOGCAPTURE_NOTIFICATION']),this[_0x59aaa1(0x176)]=this[_0x59aaa1(0x176)][_0x59aaa1(0x15f)](this),process['on'](_0x11deba[_0x59aaa1(0x144)],this['intExitHandler']),process['on'](_0x11deba[_0x59aaa1(0x124)],this[_0x59aaa1(0x176)]),process['on'](_0x11deba[_0x59aaa1(0x180)],this[_0x59aaa1(0x176)]),_0x11deba[_0x59aaa1(0x137)](process[_0x59aaa1(0x18c)],_0x11deba['dCRYX'])?(process['on'](_0x11deba['tTjwG'],this[_0x59aaa1(0x176)]),process['on'](_0x11deba[_0x59aaa1(0x12d)],this[_0x59aaa1(0x176)])):process['on'](_0x11deba[_0x59aaa1(0x1a5)],this[_0x59aaa1(0x176)]),process['on'](_0x11deba['tzwLP'],this[_0x59aaa1(0x1dd)]());}async[a83_0x23177b(0x1a0)](_0x1f0c20){const _0x89de9a=a83_0x23177b,_0x5acd26={'ipnIO':'ats-repeater','qrCkX':_0x89de9a(0x185),'WAHWA':_0x89de9a(0x1b2),'iOJMn':function(_0x2f452d,_0x1f961c){return _0x2f452d===_0x1f961c;},'tdDOi':_0x89de9a(0x18f),'jSsWU':function(_0x46d4d6,_0x1bfc12){return _0x46d4d6+_0x1bfc12;},'sINhf':'?caps=','OBQOZ':function(_0x4a0db5,_0x20e69d){return _0x4a0db5(_0x20e69d);},'SsmvP':'codeceptjs'};this[_0x89de9a(0x217)](_0x1f0c20);if(helper['isTurboScaleSession'](this[_0x89de9a(0x1c9)])){const _0x164b3a=await helper['getTurboScaleGridDetails'](this[_0x89de9a(0x1c9)]);this[_0x89de9a(0x1c9)]['turboScaleGridDetails']=_0x164b3a,_0x164b3a['isTrialGrid']&&helper[_0x89de9a(0x21e)](this['config'][_0x89de9a(0x157)])&&helper[_0x89de9a(0x187)](this[_0x89de9a(0x1c9)][_0x89de9a(0x157)])&&(this[_0x89de9a(0x1c9)][_0x89de9a(0x148)][_0x89de9a(0x14a)]=_0x5acd26[_0x89de9a(0x20f)],this[_0x89de9a(0x1c9)][_0x89de9a(0x148)][_0x5acd26[_0x89de9a(0x1f7)]]=_0x164b3a['customRepeaters'][_0x89de9a(0x188)](','),this[_0x89de9a(0x1c9)]['browserStackLocalOptions'][_0x89de9a(0x156)]=_0x5acd26[_0x89de9a(0x1f5)]),this[_0x89de9a(0x1c9)]['turboScaleUrl']=_0x164b3a[_0x89de9a(0x121)],this['framework']&&_0x5acd26[_0x89de9a(0x215)](this[_0x89de9a(0x135)][_0x89de9a(0x145)](),_0x5acd26['tdDOi'])?this['config']['turboScaleUrl']=_0x5acd26[_0x89de9a(0x19d)](_0x164b3a['playwrightUrl'],_0x5acd26['sINhf']):constants['hubUrl']=helper['getHubUrl'](this[_0x89de9a(0x1c9)]),logger[_0x89de9a(0x1c3)](_0x89de9a(0x1d9)+constants['hubUrl']);}helper[_0x89de9a(0x21c)](this[_0x89de9a(0x1c9)]),this[_0x89de9a(0x171)](),_0x5acd26['OBQOZ'](setPercyFlag,this),await this[_0x89de9a(0x183)](),![_0x5acd26[_0x89de9a(0x184)],_0x5acd26[_0x89de9a(0x1fd)]]['includes'](this[_0x89de9a(0x135)])&&!helper[_0x89de9a(0x186)](this[_0x89de9a(0x1c9)])&&!helper[_0x89de9a(0x218)]()[_0x89de9a(0x1e1)]&&await this[_0x89de9a(0x13f)]();}async[a83_0x23177b(0x1c7)](){const _0x314275=a83_0x23177b,_0x179fb1={};_0x179fb1[_0x314275(0x1a9)]=function(_0x457dbd,_0x409ce0){return _0x457dbd===_0x409ce0;},_0x179fb1[_0x314275(0x194)]=_0x314275(0x15c),_0x179fb1[_0x314275(0x1d3)]=_0x314275(0x1d5),_0x179fb1[_0x314275(0x209)]=_0x314275(0x1bb),_0x179fb1[_0x314275(0x1ea)]=_0x314275(0x1b2),_0x179fb1['DENkC']=_0x314275(0x1ce);const _0x2d1578=_0x179fb1;if(helper['isTrue'](this[_0x314275(0x1c9)][_0x314275(0x17a)])&&(!this[_0x314275(0x17a)]||!this[_0x314275(0x17a)][_0x314275(0x14e)]()))try{this[_0x314275(0x17a)]=await percyHelper['startPercy'](this[_0x314275(0x1c9)]);if(!this[_0x314275(0x17a)]){process[_0x314275(0x16b)][_0x314275(0x20b)]=_0x2d1578[_0x314275(0x194)];throw new Error(_0x2d1578[_0x314275(0x1d3)]);}logger[_0x314275(0x149)](_0x2d1578[_0x314275(0x209)]),process[_0x314275(0x16b)][_0x314275(0x20b)]=_0x2d1578[_0x314275(0x1ea)];let _0x300186=0x0;const _0x2aa7ae=async()=>{const _0x23c408=_0x314275;_0x300186++,_0x2d1578[_0x23c408(0x1a9)](_0x300186,0x1)&&await this[_0x23c408(0x1ef)]();};process['on'](_0x2d1578['DENkC'],_0x2aa7ae);}catch(_0x2815a5){process[_0x314275(0x16b)][_0x314275(0x20b)]=_0x2d1578['vNQzB'],logger[_0x314275(0x1c3)](_0x314275(0x1a1)+_0x2815a5);throw new Error(_0x2815a5['toString']());}}async['stopPercy'](){const _0x195900=a83_0x23177b,_0x2b160f={};_0x2b160f[_0x195900(0x199)]=_0x195900(0x20c),_0x2b160f[_0x195900(0x1b3)]=_0x195900(0x152);const _0x269127=_0x2b160f;if(this['percy']&&this[_0x195900(0x17a)][_0x195900(0x14e)]())try{await percyHelper[_0x195900(0x1ef)](this[_0x195900(0x17a)]),logger['info'](_0x269127[_0x195900(0x199)]);}catch(_0x2a7ed4){logger[_0x195900(0x17c)](_0x269127[_0x195900(0x1b3)],_0x2a7ed4[_0x195900(0x1d8)]);}}async[a83_0x23177b(0x183)](){const _0x35c7db=a83_0x23177b,_0x36e103={};_0x36e103[_0x35c7db(0x1ae)]='Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled',_0x36e103['nRPnC']='Local\x20binary\x20started\x20successfully';const _0x531a8f=_0x36e103;if(helper['isBrowserstackInfra']()&&helper[_0x35c7db(0x187)](this[_0x35c7db(0x1c9)][_0x35c7db(0x157)])&&(!this[_0x35c7db(0x157)]||!this[_0x35c7db(0x157)][_0x35c7db(0x14e)]()))try{if(this[_0x35c7db(0x1c9)][_0x35c7db(0x148)][_0x35c7db(0x20d)]){logger['debug'](_0x531a8f[_0x35c7db(0x1ae)]);return;}this['browserstackLocal']=await helper[_0x35c7db(0x146)](this[_0x35c7db(0x1c9)]),logger[_0x35c7db(0x149)](_0x531a8f[_0x35c7db(0x1e6)]);}catch(_0x182024){logger['debug'](_0x182024);throw new Error(_0x182024[_0x35c7db(0x161)]());}}async['stopBrowserstackLocal'](){const _0x41bf4=a83_0x23177b,_0x44931d={};_0x44931d[_0x41bf4(0x1e5)]=_0x41bf4(0x21f),_0x44931d['MlUUD']=_0x41bf4(0x1ec);const _0x296738=_0x44931d;if(this[_0x41bf4(0x157)]&&this[_0x41bf4(0x157)][_0x41bf4(0x14e)]())try{await helper['stopLocalBinary'](this[_0x41bf4(0x157)]),logger['info'](_0x296738[_0x41bf4(0x1e5)]);}catch(_0x287372){logger[_0x41bf4(0x17c)](_0x296738['MlUUD'],_0x287372['message']);}}async[a83_0x23177b(0x13f)](){const _0x19c7fa=a83_0x23177b;return PerformanceTester[_0x19c7fa(0x1a2)](PerformanceAutEvents[_0x19c7fa(0x1c1)],async()=>{const _0xab8487=_0x19c7fa;await hubAllocator[_0xab8487(0x1ff)](this['config']);})();}async[a83_0x23177b(0x1b7)](){const _0x11f869=a83_0x23177b,_0x291fac={'gSUAc':function(_0x3bc370,_0x5d43f4){return _0x3bc370(_0x5d43f4);},'LIgjb':_0x11f869(0x134),'yMtbw':function(_0x24078f,_0xdfe0b2,_0x45a999,_0x5d6dea,_0x40b4b5,_0x84e014,_0x35f59b){return _0x24078f(_0xdfe0b2,_0x45a999,_0x5d6dea,_0x40b4b5,_0x84e014,_0x35f59b);},'WAQtE':_0x11f869(0x1de),'VwMFB':'BrowserstackHealingInitFailed','MUWSc':function(_0x505877,_0x229ecf){return _0x505877(_0x229ecf);},'gJrRb':'../../package.json','XrzZm':_0x11f869(0x1c2),'RPeKd':function(_0x542185,_0x3968cd){return _0x542185(_0x3968cd);},'YvcBz':function(_0x24d110,_0x66aa5f){return _0x24d110===_0x66aa5f;},'rlSYH':'true','kOQgD':function(_0x4509c5,_0x3c8f5d){return _0x4509c5===_0x3c8f5d;},'VQffL':'Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','aQUrt':function(_0x15dc97,_0x1712c1){return _0x15dc97===_0x1712c1;},'FqqYY':'Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','VIwDO':'Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','wCCLP':_0x11f869(0x1b9),'FTYsB':function(_0x59e68d,_0x1d019d){return _0x59e68d>=_0x1d019d;},'BDsvp':function(_0x26b956,_0x273c44){return _0x26b956<_0x273c44;},'KCQiD':function(_0x34f373,_0x25e0ec){return _0x34f373>=_0x25e0ec;},'xtaBj':_0x11f869(0x196),'eNyOI':_0x11f869(0x153),'jLjHN':function(_0x529c26){return _0x529c26();}},_0x5a5b57=PerformanceTester['measureWrapper'](_0x291fac[_0x11f869(0x1f4)],async()=>{const _0x2efd79=_0x11f869;try{const _0x133252=new Date(),_0x6b2d0c=helper[_0x2efd79(0x1be)](this[_0x2efd79(0x1c9)]),_0x11b9d0=_0x291fac[_0x2efd79(0x175)](require,path[_0x2efd79(0x188)](__dirname,_0x291fac[_0x2efd79(0x1ed)])),_0x20218f=_0x291fac['yMtbw'](timeoutPromise,constants[_0x2efd79(0x212)],_0x291fac[_0x2efd79(0x14d)],_0x291fac[_0x2efd79(0x12b)],_0x133252,this[_0x2efd79(0x1c9)],this[_0x2efd79(0x135)]),_0x2411ff={'tcgUrl':constants[_0x2efd79(0x1f2)],'sdkVersion':_0x291fac[_0x2efd79(0x155)](require,_0x291fac[_0x2efd79(0x159)])[_0x2efd79(0x213)],'methodUsed':_0x291fac[_0x2efd79(0x1ba)],'proxyConfig':_0x6b2d0c,'os':os[_0x2efd79(0x18c)]()};if(_0x6b2d0c&&_0x6b2d0c['proxyUrl']){utilities[_0x2efd79(0x133)](constants[_0x2efd79(0x1f0)],_0x2411ff,this[_0x2efd79(0x1c9)],this[_0x2efd79(0x135)]);return;}const _0x6e9a63={};_0x6e9a63[_0x2efd79(0x12a)]=_0x6b2d0c;const _0x193dee=await Promise['race']([_0x11b9d0[_0x2efd79(0x18a)](this[_0x2efd79(0x1c9)]['accessKey'],this['config'][_0x2efd79(0x12f)],constants[_0x2efd79(0x1f2)],_0x291fac[_0x2efd79(0x1d4)](require,_0x291fac[_0x2efd79(0x159)])[_0x2efd79(0x213)],_0x6e9a63)[_0x2efd79(0x1ad)](_0x428aa9=>{const _0x41cf38=_0x2efd79;return _0x20218f[_0x41cf38(0x1af)](),_0x428aa9;}),_0x20218f]);_0x193dee['isHealingEnabled']=_0x291fac[_0x2efd79(0x1ee)](_0x193dee[_0x2efd79(0x1fe)],_0x291fac[_0x2efd79(0x166)])||_0x291fac[_0x2efd79(0x1ee)](_0x193dee[_0x2efd79(0x1fe)],!![]);const _0x2e4c6f=_0x291fac[_0x2efd79(0x1ee)](this[_0x2efd79(0x1c9)][_0x2efd79(0x13b)],!![])||_0x291fac['kOQgD'](this['config'][_0x2efd79(0x13b)],_0x291fac[_0x2efd79(0x166)]);if(_0x291fac[_0x2efd79(0x1e0)](_0x193dee[_0x2efd79(0x1d8)],constants[_0x2efd79(0x1b6)])&&_0x2e4c6f)logger['info'](_0x291fac[_0x2efd79(0x200)]);else{if(!_0x193dee[_0x2efd79(0x181)]&&_0x291fac[_0x2efd79(0x1db)](_0x193dee[_0x2efd79(0x178)],0x1f7)&&_0x2e4c6f)logger[_0x2efd79(0x149)](_0x291fac[_0x2efd79(0x193)]),utilities['fireFunnelTestEvent'](constants[_0x2efd79(0x150)],_0x2411ff,this[_0x2efd79(0x1c9)],this['framework']);else{if(!_0x193dee[_0x2efd79(0x181)]&&_0x2e4c6f){logger[_0x2efd79(0x149)](_0x291fac[_0x2efd79(0x198)]);const _0x101446={'tcgUrl':constants[_0x2efd79(0x1f2)],'sdkVersion':_0x291fac['RPeKd'](require,_0x291fac['gJrRb'])['version'],'methodUsed':_0x291fac[_0x2efd79(0x1ba)],'proxyConfig':_0x6b2d0c,'os':os[_0x2efd79(0x18c)]()};utilities['fireFunnelTestEvent'](constants[_0x2efd79(0x1da)],_0x101446,this[_0x2efd79(0x1c9)],this['framework']);}else{if(_0x193dee[_0x2efd79(0x181)]&&!_0x193dee[_0x2efd79(0x1fe)]&&_0x2e4c6f)logger[_0x2efd79(0x149)](_0x291fac[_0x2efd79(0x216)]);else{if(_0x291fac[_0x2efd79(0x1a4)](_0x193dee['status'],0xc8)&&_0x291fac[_0x2efd79(0x154)](_0x193dee['status'],0x12c))utilities[_0x2efd79(0x133)](constants[_0x2efd79(0x143)],_0x2411ff,this[_0x2efd79(0x1c9)],this['framework']);else{if(_0x291fac['KCQiD'](_0x193dee[_0x2efd79(0x178)],0x190))_0x2411ff[_0x2efd79(0x178)]=_0x193dee[_0x2efd79(0x178)],utilities[_0x2efd79(0x133)](constants[_0x2efd79(0x142)],_0x2411ff,this[_0x2efd79(0x1c9)],this[_0x2efd79(0x135)]);else!_0x193dee[_0x2efd79(0x178)]&&utilities[_0x2efd79(0x133)](constants[_0x2efd79(0x1c5)],_0x2411ff,this['config'],this[_0x2efd79(0x135)]);}}}}}if(_0x193dee[_0x2efd79(0x181)]&&_0x193dee[_0x2efd79(0x1fe)]){const _0x5721ad={};_0x5721ad[_0x2efd79(0x123)]=_0x193dee;const _0x441693=_0x5721ad;_0x6b2d0c&&(_0x441693[_0x2efd79(0x1cc)]=_0x6b2d0c),_0x441693[_0x2efd79(0x135)]=this['framework'],_0x441693['bstackConfig']=this[_0x2efd79(0x1c9)],helper[_0x2efd79(0x1d6)](_0x441693),logger['debug'](_0x291fac[_0x2efd79(0x170)]);}}catch(_0x305232){logger[_0x2efd79(0x1c3)](_0x2efd79(0x12c)+(_0x305232['message']?_0x305232['message']:''));}});await _0x291fac[_0x11f869(0x172)](_0x5a5b57);}['setupKeepAlive'](){const _0x4f3372=a83_0x23177b,_0x28819d={'kqQpL':function(_0x5c4421,_0x22f623){return _0x5c4421(_0x22f623);},'eaCpF':_0x4f3372(0x1eb)};_0x28819d[_0x4f3372(0x15d)](require,_0x28819d[_0x4f3372(0x1d1)])();}[a83_0x23177b(0x1f6)](){const _0x4d38a2=a83_0x23177b,_0x151268={};_0x151268['IfvOv']='unhandledRejection',_0x151268[_0x4d38a2(0x1bc)]=_0x4d38a2(0x211);const _0x16da66=_0x151268,_0x323a5c=_0x209f7f=>{const _0x729b4d=_0x4d38a2;logger[_0x729b4d(0x17c)](_0x209f7f[_0x729b4d(0x1d8)]),logger[_0x729b4d(0x1c3)](util[_0x729b4d(0x19b)](_0x209f7f)),this[_0x729b4d(0x1cf)]['push'](util['format']('%j',_0x209f7f)),PerformanceTester[_0x729b4d(0x18e)](_0x209f7f);};process['on'](_0x16da66[_0x4d38a2(0x203)],_0x323a5c),process['on'](_0x16da66[_0x4d38a2(0x1bc)],_0x323a5c);}async[a83_0x23177b(0x176)](_0xe80b6c){const _0x5d5a79=a83_0x23177b,_0x515e2a={};_0x515e2a[_0x5d5a79(0x1e3)]='0|4|6|3|2|1|5|7',_0x515e2a[_0x5d5a79(0x18b)]=function(_0x39c1e0,_0x5a6c29){return _0x39c1e0+_0x5a6c29;},_0x515e2a[_0x5d5a79(0x14c)]=_0x5d5a79(0x125),_0x515e2a[_0x5d5a79(0x204)]=_0x5d5a79(0x1a6),_0x515e2a[_0x5d5a79(0x1c0)]=function(_0x21c906,_0x6effe0){return _0x21c906+_0x6effe0;};const _0x48b9ea=_0x515e2a,_0x59b8a5=_0x48b9ea[_0x5d5a79(0x1e3)]['split']('|');let _0x3b035b=0x0;while(!![]){switch(_0x59b8a5[_0x3b035b++]){case'0':logger&&logger[_0x5d5a79(0x128)]();continue;case'1':this[_0x5d5a79(0x18d)]=_0xe80b6c;continue;case'2':logger[_0x5d5a79(0x149)](_0x48b9ea[_0x5d5a79(0x18b)](_0x48b9ea[_0x5d5a79(0x14c)],_0xe80b6c));continue;case'3':this[_0x48b9ea[_0x5d5a79(0x18b)](_0x48b9ea[_0x5d5a79(0x204)],_0xe80b6c)]=!![];continue;case'4':fileLogger&&fileLogger[_0x5d5a79(0x128)]();continue;case'5':await TestHubHandler[_0x5d5a79(0x151)](_0xe80b6c);continue;case'6':if(this[_0x48b9ea[_0x5d5a79(0x1c0)](_0x48b9ea[_0x5d5a79(0x204)],_0xe80b6c)])return;continue;case'7':await BrowserstackCLI[_0x5d5a79(0x208)]()[_0x5d5a79(0x151)]();continue;}break;}}[a83_0x23177b(0x1dd)](){const _0xf27950=a83_0x23177b,_0x594775={'SUUjv':function(_0x3d22df,_0x320cb7){return _0x3d22df===_0x320cb7;},'xkMxi':_0xf27950(0x1d2),'AkpSI':function(_0x3c2688,_0x145bdf){return _0x3c2688>_0x145bdf;},'lMheS':function(_0x4c9e73,_0x2e32d0){return _0x4c9e73>_0x2e32d0;},'PJfTY':function(_0x1c2d2a){return _0x1c2d2a();},'rpwfX':_0xf27950(0x16d)};let _0x17825c=0x0;return async()=>{const _0xfc7013=_0xf27950;_0x17825c++;if(_0x594775[_0xfc7013(0x126)](_0x17825c,0x1)){helper[_0xfc7013(0x167)](this[_0xfc7013(0x135)])&&await this[_0xfc7013(0x14f)]();try{logger[_0xfc7013(0x1c3)](_0x594775[_0xfc7013(0x1f9)]),await TestHubHandler['stop'](_0x17825c),await BrowserstackCLI[_0xfc7013(0x208)]()[_0xfc7013(0x151)]('1');}catch(_0x1a9161){logger[_0xfc7013(0x1c3)](_0xfc7013(0x20a)+util['format'](_0x1a9161));}PerformanceTester[_0xfc7013(0x192)](PerformanceEvents[_0xfc7013(0x1e4)]);if(PerformanceTester['isEnabled']()){const {measures:_0x132093,errors:_0x4cdb9f}=await PerformanceTester[_0xfc7013(0x1d7)](),_0x4a9fa7={};if(_0x132093&&_0x594775[_0xfc7013(0x1ab)](_0x132093[_0xfc7013(0x17e)],0x0)||_0x4cdb9f&&_0x594775[_0xfc7013(0x1e9)](_0x4cdb9f[_0xfc7013(0x17e)],0x0)){const _0x26a0b3={};_0x26a0b3[_0xfc7013(0x15b)]=_0x132093,_0x26a0b3[_0xfc7013(0x1b4)]=_0x4cdb9f,Object[_0xfc7013(0x219)](_0x4a9fa7,_0x26a0b3);}try{const _0xe95850=await helper['sendToEDS'](_0x4a9fa7,this[_0xfc7013(0x1c9)]);logger['debug'](_0xfc7013(0x1e8)+constants['EDS_URL']+_0xfc7013(0x1a3)+_0xe95850['statusCode']);}catch(_0x44ba3c){logger[_0xfc7013(0x1c3)](_0xfc7013(0x177)+constants[_0xfc7013(0x205)]+_0xfc7013(0x1a7)+util[_0xfc7013(0x19b)](_0x44ba3c));}try{fs['writeFileSync'](path[_0xfc7013(0x188)](_0x594775[_0xfc7013(0x15a)](getLogDir),_0x594775['rpwfX']),JSON[_0xfc7013(0x214)](_0x4a9fa7));}catch(_0x34d3b5){logger[_0xfc7013(0x1c3)](_0xfc7013(0x189)+_0x34d3b5);}}}};}}function a83_0x4fd0(_0x25a0b7,_0xfdefe9){const _0x5d73e5=a83_0x5d73();return a83_0x4fd0=function(_0x4fd079,_0x3321aa){_0x4fd079=_0x4fd079-0x121;let _0x5370af=_0x5d73e5[_0x4fd079];return _0x5370af;},a83_0x4fd0(_0x25a0b7,_0xfdefe9);}exports['default']=BrowserStackSetup;