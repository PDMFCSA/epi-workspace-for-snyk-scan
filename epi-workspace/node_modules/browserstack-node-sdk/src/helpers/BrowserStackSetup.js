const a94_0x19ff24=a94_0x255c;function a94_0x255c(_0x4e54ed,_0x5c39c6){const _0x5bc2d0=a94_0x5bc2();return a94_0x255c=function(_0x255c9c,_0x349316){_0x255c9c=_0x255c9c-0x75;let _0x6fb2d4=_0x5bc2d0[_0x255c9c];return _0x6fb2d4;},a94_0x255c(_0x4e54ed,_0x5c39c6);}(function(_0x14676e,_0x3c0181){const _0x6b507=a94_0x255c,_0x24d43b=_0x14676e();while(!![]){try{const _0x1ef0da=parseInt(_0x6b507(0x10f))/0x1+parseInt(_0x6b507(0xbd))/0x2*(-parseInt(_0x6b507(0x80))/0x3)+-parseInt(_0x6b507(0xd5))/0x4*(parseInt(_0x6b507(0xaa))/0x5)+parseInt(_0x6b507(0x8a))/0x6*(parseInt(_0x6b507(0xa2))/0x7)+parseInt(_0x6b507(0x75))/0x8*(-parseInt(_0x6b507(0xe6))/0x9)+-parseInt(_0x6b507(0x90))/0xa+parseInt(_0x6b507(0xf5))/0xb*(parseInt(_0x6b507(0x11d))/0xc);if(_0x1ef0da===_0x3c0181)break;else _0x24d43b['push'](_0x24d43b['shift']());}catch(_0x271cba){_0x24d43b['push'](_0x24d43b['shift']());}}}(a94_0x5bc2,0xa0596));const util=require(a94_0x19ff24(0xfe)),os=require('os'),path=require(a94_0x19ff24(0xa7)),{v4:uuidv4}=require(a94_0x19ff24(0x106)),fs=require('fs'),constants=require(a94_0x19ff24(0x105)),logger=require(a94_0x19ff24(0x15b))[a94_0x19ff24(0x94)],fileLogger=require(a94_0x19ff24(0x15b))[a94_0x19ff24(0x10d)],{getLogDir}=require(a94_0x19ff24(0x15b)),helper=require('./helper'),utilities=require('./utilities'),percyHelper=require(a94_0x19ff24(0x91)),hubAllocator=require('../hubAllocationMethods'),PerformanceTester=require(a94_0x19ff24(0x109)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a94_0x19ff24(0xf7)),{setPercyFlag}=require('./testhub/utils'),TestHubHandler=require(a94_0x19ff24(0x169)),timeoutPromise=require('./timeoutPromise'),BrowserstackCLI=require(a94_0x19ff24(0xae)),LoadTestModule=require('../bin/v2/modules/loadTestModule'),{getEdsInstrumentationAPIUrl}=require(a94_0x19ff24(0xb8)),ClientTroubleShootingService=require('../bin/utils/clientTroubleshootingService');class BrowserStackSetup{constructor(_0x7acd77,_0x37ae03){const _0x185128=a94_0x19ff24,_0x22d367={'GabuG':_0x185128(0x118),'XKUve':'No\x20config\x20provided.','ahVdg':function(_0x2f68a2){return _0x2f68a2();}},_0x238866=_0x22d367[_0x185128(0xed)][_0x185128(0x14f)]('|');let _0x35b195=0x0;while(!![]){switch(_0x238866[_0x35b195++]){case'0':helper['setBrowserstackInfraFromConfig'](this[_0x185128(0x179)],this['cliConfig']);continue;case'1':this['cliConfig']=helper['setCLICaps'](_0x7acd77);continue;case'2':this[_0x185128(0xdc)]=null;continue;case'3':helper[_0x185128(0x11f)]();continue;case'4':PerformanceTester[_0x185128(0xb5)]();continue;case'5':this[_0x185128(0x8c)]=null;continue;case'6':global['framework']=_0x37ae03;continue;case'7':this['config']=helper[_0x185128(0xca)](this[_0x185128(0xe0)]);continue;case'8':this['framework']=_0x37ae03;continue;case'9':if(helper[_0x185128(0x7b)](this['config']))throw new Error(_0x22d367[_0x185128(0x15f)]);continue;case'10':helper[_0x185128(0x16c)](this[_0x185128(0x179)]);continue;case'11':this[_0x185128(0x99)]=_0x22d367[_0x185128(0xd1)](uuidv4);continue;case'12':this['errorMessage']={};continue;case'13':this[_0x185128(0x179)][_0x185128(0xe1)]=this['config'][_0x185128(0xe1)]||{};continue;case'14':helper[_0x185128(0xac)](this['config']);continue;case'15':this[_0x185128(0x179)][_0x185128(0xe1)]['skipSessionName']=!helper[_0x185128(0x173)]()||helper[_0x185128(0xb0)](this[_0x185128(0x179)][_0x185128(0xe1)][_0x185128(0x114)]);continue;case'16':this[_0x185128(0x115)]=helper[_0x185128(0x17f)]();continue;case'17':helper[_0x185128(0x116)](this[_0x185128(0x179)],this[_0x185128(0xe4)],this[_0x185128(0x115)]);continue;case'18':if(this[_0x185128(0x179)]['error'])throw new Error(this['config'][_0x185128(0x13e)]);continue;case'19':this[_0x185128(0x179)][_0x185128(0xf6)]=this['config'][_0x185128(0xf6)]||[];continue;case'20':this[_0x185128(0xe0)]=helper[_0x185128(0x9c)](_0x7acd77);continue;case'21':helper[_0x185128(0x164)](this['config'],this[_0x185128(0xe4)],this['envConfig']);continue;case'22':this[_0x185128(0x179)][_0x185128(0xe1)][_0x185128(0xd7)]=!helper[_0x185128(0x173)]()||helper['isTrue'](this[_0x185128(0x179)]['testContextOptions'][_0x185128(0xd7)]);continue;case'23':this[_0x185128(0xde)]=[];continue;}break;}}[a94_0x19ff24(0x12b)](_0x4ed774){const _0x243f4f=a94_0x19ff24,_0x44be2b={'sjKMK':_0x243f4f(0x119),'JxDle':function(_0x408c73,_0x17b668){return _0x408c73===_0x17b668;},'KlIvK':'integrations','iMpjN':_0x243f4f(0xfd),'zTJrh':function(_0x1c7d75,_0x4787d4){return _0x1c7d75<_0x4787d4;},'ubTVU':function(_0x58cb12,_0x43530f){return _0x58cb12(_0x43530f);},'Jqjmc':_0x243f4f(0x135),'wEdTD':_0x243f4f(0xd4),'ZsQIF':_0x243f4f(0x129),'AvheT':_0x243f4f(0xb6),'MypoF':_0x243f4f(0x165),'JBWIf':_0x243f4f(0x170),'zNbrA':'SIGHUP','DxZZw':function(_0x1cb865,_0x3c5fe8){return _0x1cb865!==_0x3c5fe8;},'jwmhv':'win32','rwwcA':_0x243f4f(0xeb),'hTAyA':_0x243f4f(0xc9),'fLpFE':_0x243f4f(0xf4),'Yhdty':_0x243f4f(0x17e)},_0x1d8df4=this[_0x243f4f(0xb2)];global['config']=this[_0x243f4f(0x179)],helper[_0x243f4f(0x120)](this[_0x243f4f(0x179)]),this[_0x243f4f(0x10e)]=null,global['sdkRunId']=this[_0x243f4f(0x99)],logger['info'](_0x243f4f(0x130)+this[_0x243f4f(0x99)]),!this[_0x243f4f(0x179)][_0x243f4f(0x16b)]&&(this['config'][_0x243f4f(0x16b)]=this[_0x243f4f(0x179)][_0x243f4f(0x112)]||{});if(helper['isUndefined'](helper['getUserName'](this[_0x243f4f(0x179)]))||helper['isUndefined'](helper[_0x243f4f(0x11b)](this['config'])))throw new Error(_0x44be2b['sjKMK']);helper['getLocalConfig'](this[_0x243f4f(0x179)])&&helper['isUndefined'](helper[_0x243f4f(0x171)](this[_0x243f4f(0x179)]))&&(!helper[_0x243f4f(0x7b)](this[_0x243f4f(0x179)][_0x243f4f(0x16b)])&&_0x44be2b[_0x243f4f(0x8e)](this[_0x243f4f(0x179)][_0x243f4f(0x16b)][_0x243f4f(0x101)],Object)?!helper['isTrue'](this['config'][_0x243f4f(0x16b)]['skipBinaryInitialisation'])&&(this[_0x243f4f(0x179)][_0x243f4f(0x16b)]['localIdentifier']=helper[_0x243f4f(0x160)]()):this[_0x243f4f(0x179)][_0x243f4f(0x16b)]={'localIdentifier':helper['generateLocalIdentifier']()});this[_0x243f4f(0x179)]['browserStackLocalOptions'][_0x243f4f(0x17d)]=helper[_0x243f4f(0xb0)](this[_0x243f4f(0x179)][_0x243f4f(0x16b)]['skipBinaryInitialisation']),helper['setHandlePWError'](this['config']);if(_0x44be2b[_0x243f4f(0x8e)](_0x1d8df4,_0x44be2b[_0x243f4f(0x17c)]))return;this[_0x243f4f(0xec)]();process[_0x243f4f(0x110)]['BROWSERSTACK_TURBOSCALE']&&(this[_0x243f4f(0x179)][_0x243f4f(0x151)]=helper[_0x243f4f(0xb0)](process[_0x243f4f(0x110)][_0x243f4f(0xbb)]),this['config'][_0x243f4f(0x144)]=this[_0x243f4f(0x179)][_0x243f4f(0x144)]||{});helper[_0x243f4f(0x13c)](this[_0x243f4f(0x179)])&&(process['env']['BROWSERSTACK_TURBOSCALE']=!![]);LoadTestModule[_0x243f4f(0x92)](this[_0x243f4f(0x179)])&&logger[_0x243f4f(0x13d)](_0x243f4f(0x16d)+this[_0x243f4f(0x99)]);if(!helper['isBrowserstackInfra']()){try{process[_0x243f4f(0x110)][_0x243f4f(0xe5)]=_0x1d8df4,utilities[_0x243f4f(0x7a)](_0x44be2b[_0x243f4f(0xef)],{},this[_0x243f4f(0x179)],this[_0x243f4f(0xb2)]);}catch(_0x3b312d){logger[_0x243f4f(0x13d)](_0x243f4f(0x104)+_0x3b312d);}return;}if(helper['requireSeleniumWebdriverCheck'](_0x1d8df4)){if(global['__isPlaywrightInstalled'])return;_0x44be2b[_0x243f4f(0x9d)](_0x44be2b['ubTVU'](parseInt,helper['getPackageVersion'](_0x44be2b['Jqjmc'])),0x3)&&(this[_0x243f4f(0x179)][_0x243f4f(0x125)]=![]),_0x44be2b[_0x243f4f(0x8e)](helper[_0x243f4f(0x9f)](helper[_0x243f4f(0x7d)](_0x44be2b[_0x243f4f(0xa1)]),_0x44be2b[_0x243f4f(0x172)]),0x1)&&(this[_0x243f4f(0x179)][_0x243f4f(0x125)]=!![]);}(helper['isUndefined'](this[_0x243f4f(0x179)]['platforms'])||helper['isUndefined'](this[_0x243f4f(0x179)][_0x243f4f(0xf6)][_0x243f4f(0x146)]))&&(helper[_0x243f4f(0x7b)](this[_0x243f4f(0x179)][_0x243f4f(0x14d)])?logger[_0x243f4f(0x117)](_0x44be2b[_0x243f4f(0xe7)]):logger[_0x243f4f(0x15d)](_0x44be2b[_0x243f4f(0x134)]),this[_0x243f4f(0x179)][_0x243f4f(0xf6)]=[]);!this[_0x243f4f(0x179)][_0x243f4f(0xe1)]&&(this[_0x243f4f(0x179)][_0x243f4f(0xe1)]={});try{process[_0x243f4f(0x110)][_0x243f4f(0xe5)]=_0x4ed774['_'][0x0],utilities[_0x243f4f(0x7a)](_0x44be2b[_0x243f4f(0xef)],{},this[_0x243f4f(0x179)],this[_0x243f4f(0xb2)]);}catch(_0x1a78fe){logger['debug'](_0x243f4f(0x104)+_0x1a78fe);}!this['config'][_0x243f4f(0x7f)]&&logger[_0x243f4f(0x117)](constants[_0x243f4f(0xc0)]),this[_0x243f4f(0xcd)]=this[_0x243f4f(0xcd)][_0x243f4f(0x78)](this),process['on'](_0x44be2b[_0x243f4f(0x15e)],this['intExitHandler']),process['on'](_0x44be2b[_0x243f4f(0x12e)],this[_0x243f4f(0xcd)]),process['on'](_0x44be2b[_0x243f4f(0xa3)],this[_0x243f4f(0xcd)]),_0x44be2b[_0x243f4f(0x113)](process[_0x243f4f(0x153)],_0x44be2b[_0x243f4f(0x79)])?(process['on'](_0x44be2b[_0x243f4f(0xcf)],this[_0x243f4f(0xcd)]),process['on'](_0x44be2b[_0x243f4f(0xa4)],this[_0x243f4f(0xcd)])):process['on'](_0x44be2b[_0x243f4f(0x9b)],this[_0x243f4f(0xcd)]),process['on'](_0x44be2b['Yhdty'],this[_0x243f4f(0x142)]());}async[a94_0x19ff24(0x16e)](_0x3555e7){const _0x99980e=a94_0x19ff24,_0x3aa11a={'CeisN':_0x99980e(0xd9),'QrObz':_0x99980e(0xd8),'KIFYe':_0x99980e(0x10b),'innkF':function(_0x205ce5,_0x7978bf){return _0x205ce5===_0x7978bf;},'EZlNS':_0x99980e(0x136),'gcHdf':function(_0x1c9f68,_0x4eab60){return _0x1c9f68+_0x4eab60;},'UWBeJ':_0x99980e(0x16f),'bFOQb':function(_0x18c9ea,_0x22a340){return _0x18c9ea(_0x22a340);},'YZErD':_0x99980e(0x150)};this[_0x99980e(0x12b)](_0x3555e7);if(helper['isTurboScaleSession'](this[_0x99980e(0x179)])){const _0x3d6a33=await helper[_0x99980e(0x143)](this[_0x99980e(0x179)]);this[_0x99980e(0x179)][_0x99980e(0xf3)]=_0x3d6a33,_0x3d6a33[_0x99980e(0x126)]&&helper[_0x99980e(0xb1)](this['config']['browserstackLocal'])&&helper[_0x99980e(0xb0)](this[_0x99980e(0x179)][_0x99980e(0xdc)])&&(this[_0x99980e(0x179)][_0x99980e(0x16b)]['localIdentifier']=_0x3aa11a[_0x99980e(0xcc)],this['config'][_0x99980e(0x16b)][_0x3aa11a[_0x99980e(0x81)]]=_0x3d6a33[_0x99980e(0xc7)][_0x99980e(0x180)](','),this[_0x99980e(0x179)][_0x99980e(0x16b)]['forceLocal']=_0x3aa11a[_0x99980e(0x152)]),this['config'][_0x99980e(0x14b)]=_0x3d6a33[_0x99980e(0x182)],this[_0x99980e(0xb2)]&&_0x3aa11a[_0x99980e(0x8b)](this['framework'][_0x99980e(0xd3)](),_0x3aa11a['EZlNS'])?this[_0x99980e(0x179)][_0x99980e(0x14b)]=_0x3aa11a['gcHdf'](_0x3d6a33[_0x99980e(0xa5)],_0x3aa11a[_0x99980e(0x162)]):constants['hubUrl']=helper[_0x99980e(0x154)](this[_0x99980e(0x179)]),logger[_0x99980e(0x13d)](_0x99980e(0x87)+constants['hubUrl']);}helper[_0x99980e(0x161)](this['config']),this['setupKeepAlive'](),_0x3aa11a[_0x99980e(0x147)](setPercyFlag,this),await this['setupBrowserstackLocal'](),![_0x3aa11a['YZErD'],_0x3aa11a[_0x99980e(0x177)]][_0x99980e(0x107)](this[_0x99980e(0xb2)])&&!helper['isTurboScaleSession'](this[_0x99980e(0x179)])&&!helper[_0x99980e(0x137)]()[_0x99980e(0xee)]&&await this['setUpHubUrl']();}async[a94_0x19ff24(0x82)](){const _0x1cc8f7=a94_0x19ff24,_0x439063={};_0x439063[_0x1cc8f7(0x175)]=function(_0xc5df65,_0x9bcd02){return _0xc5df65===_0x9bcd02;},_0x439063[_0x1cc8f7(0x103)]=_0x1cc8f7(0xc2),_0x439063[_0x1cc8f7(0xcb)]=_0x1cc8f7(0xb9),_0x439063[_0x1cc8f7(0x10c)]=_0x1cc8f7(0x102),_0x439063[_0x1cc8f7(0x11a)]=_0x1cc8f7(0x10b),_0x439063['xfLev']=_0x1cc8f7(0x17e);const _0x4e5236=_0x439063;if(helper[_0x1cc8f7(0xb0)](this[_0x1cc8f7(0x179)]['percy'])&&(!this[_0x1cc8f7(0x8c)]||!this[_0x1cc8f7(0x8c)][_0x1cc8f7(0x10a)]()))try{this[_0x1cc8f7(0x8c)]=await percyHelper['startPercy'](this[_0x1cc8f7(0x179)]);if(!this[_0x1cc8f7(0x8c)]){process[_0x1cc8f7(0x110)][_0x1cc8f7(0x131)]=_0x4e5236[_0x1cc8f7(0x103)];throw new Error(_0x4e5236[_0x1cc8f7(0xcb)]);}logger[_0x1cc8f7(0x117)](_0x4e5236[_0x1cc8f7(0x10c)]),process[_0x1cc8f7(0x110)][_0x1cc8f7(0x131)]=_0x4e5236[_0x1cc8f7(0x11a)];let _0x217a33=0x0;const _0x4f712a=async()=>{const _0x45d38b=_0x1cc8f7;_0x217a33++,_0x4e5236[_0x45d38b(0x175)](_0x217a33,0x1)&&await this[_0x45d38b(0xa6)]();};process['on'](_0x4e5236['xfLev'],_0x4f712a);}catch(_0x369453){process[_0x1cc8f7(0x110)]['BROWSERSTACK_PERCY']=_0x4e5236[_0x1cc8f7(0x103)],logger[_0x1cc8f7(0x13d)](_0x1cc8f7(0x108)+_0x369453);throw new Error(_0x369453[_0x1cc8f7(0x176)]());}}async['stopPercy'](){const _0x235493=a94_0x19ff24,_0x4396a1={};_0x4396a1['soEHW']='Percy\x20stopped',_0x4396a1[_0x235493(0x149)]='Error\x20occured\x20while\x20stopping\x20percy';const _0x23fff2=_0x4396a1;if(this[_0x235493(0x8c)]&&this[_0x235493(0x8c)][_0x235493(0x10a)]())try{await percyHelper[_0x235493(0xa6)](this[_0x235493(0x8c)]),logger['info'](_0x23fff2[_0x235493(0x183)]);}catch(_0x1816cf){logger[_0x235493(0x13e)](_0x23fff2[_0x235493(0x149)],_0x1816cf[_0x235493(0xbf)]);}}async[a94_0x19ff24(0xb7)](){const _0x36f14f=a94_0x19ff24,_0x30bf4c={};_0x30bf4c[_0x36f14f(0xfb)]=_0x36f14f(0x8d),_0x30bf4c[_0x36f14f(0x141)]='Local\x20binary\x20started\x20successfully';const _0x286e9a=_0x30bf4c;if(helper[_0x36f14f(0x173)]()&&helper['isTrue'](this[_0x36f14f(0x179)][_0x36f14f(0xdc)])&&(!this[_0x36f14f(0xdc)]||!this[_0x36f14f(0xdc)][_0x36f14f(0x10a)]()))try{if(this[_0x36f14f(0x179)][_0x36f14f(0x16b)][_0x36f14f(0x17d)]){logger[_0x36f14f(0x13d)](_0x286e9a[_0x36f14f(0xfb)]);return;}this['browserstackLocal']=await helper[_0x36f14f(0xe2)](this[_0x36f14f(0x179)]),logger['info'](_0x286e9a['BPGAu']);}catch(_0x225d12){logger[_0x36f14f(0x13d)](_0x225d12);throw new Error(_0x225d12[_0x36f14f(0x176)]());}}async[a94_0x19ff24(0x85)](){const _0x2f1499=a94_0x19ff24,_0x26f255={};_0x26f255[_0x2f1499(0x174)]=_0x2f1499(0x127),_0x26f255[_0x2f1499(0x93)]='Error\x20occured\x20while\x20stopping\x20local\x20binary';const _0xc05926=_0x26f255;if(this['browserstackLocal']&&this[_0x2f1499(0xdc)][_0x2f1499(0x10a)]())try{await helper['stopLocalBinary'](this['browserstackLocal']),logger[_0x2f1499(0x117)](_0xc05926[_0x2f1499(0x174)]);}catch(_0xf59bcd){logger[_0x2f1499(0x13e)](_0xc05926[_0x2f1499(0x93)],_0xf59bcd['message']);}}async['setUpHubUrl'](){const _0x115eda=a94_0x19ff24;return PerformanceTester['measureWrapper'](PerformanceAutEvents[_0x115eda(0x12a)],async()=>{const _0x29cdd9=_0x115eda;await hubAllocator[_0x29cdd9(0x88)](this[_0x29cdd9(0x179)]);})();}async[a94_0x19ff24(0xda)](){const _0x2cf00d=a94_0x19ff24,_0x3dfd5c={'VXLgs':function(_0x4b84b2,_0x279b40){return _0x4b84b2(_0x279b40);},'Mlwjc':_0x2cf00d(0xb4),'KLuup':function(_0x173689,_0x2f3f73,_0x4ef496,_0x40b520,_0x431734,_0x102817,_0x7600e7){return _0x173689(_0x2f3f73,_0x4ef496,_0x40b520,_0x431734,_0x102817,_0x7600e7);},'VEDpw':'BrowserstackHealing.init\x20method\x20timed\x20out','SoXND':_0x2cf00d(0x168),'lNGtJ':function(_0x5a3eac,_0x197586){return _0x5a3eac(_0x197586);},'WdKCi':_0x2cf00d(0xdb),'nTUrY':_0x2cf00d(0x155),'ZKmPC':function(_0x47cc24,_0x15e59d){return _0x47cc24(_0x15e59d);},'vvKTw':function(_0x33b4ee,_0x3554fb){return _0x33b4ee===_0x3554fb;},'bunup':_0x2cf00d(0x10b),'XbiLu':function(_0x3b602e,_0x1cc886){return _0x3b602e===_0x1cc886;},'Ttget':function(_0x2f155c,_0x379ae1){return _0x2f155c===_0x379ae1;},'weIDy':_0x2cf00d(0x184),'hNcoo':'Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','TmDTW':_0x2cf00d(0xfc),'quloA':_0x2cf00d(0xd6),'PwMGL':function(_0x335d04,_0x282728){return _0x335d04>=_0x282728;},'iBfIi':function(_0x1a2b07,_0x2b1f4){return _0x1a2b07<_0x2b1f4;},'XEgiR':'tcg\x20config\x20setup\x20successful.','CMIpS':_0x2cf00d(0xf1),'QdVHA':function(_0x38e500){return _0x38e500();}},_0x3759db=PerformanceTester['measureWrapper'](_0x3dfd5c[_0x2cf00d(0xdd)],async()=>{const _0x2a1387=_0x2cf00d;try{const _0x5f324e=new Date(),_0x48688c=helper[_0x2a1387(0xf0)](this[_0x2a1387(0x179)]),_0x5a1ba2=_0x3dfd5c[_0x2a1387(0x133)](require,path[_0x2a1387(0x180)](__dirname,_0x3dfd5c['Mlwjc'])),_0x476246=_0x3dfd5c[_0x2a1387(0x139)](timeoutPromise,constants['TCG_AUTH_TIMEOUT'],_0x3dfd5c[_0x2a1387(0x15c)],_0x3dfd5c['SoXND'],_0x5f324e,this[_0x2a1387(0x179)],this['framework']),_0xf2b7b4={'tcgUrl':constants[_0x2a1387(0x181)],'sdkVersion':_0x3dfd5c[_0x2a1387(0x148)](require,_0x3dfd5c[_0x2a1387(0x84)])[_0x2a1387(0xf9)],'methodUsed':_0x3dfd5c[_0x2a1387(0xad)],'proxyConfig':_0x48688c,'os':os[_0x2a1387(0x153)]()};if(_0x48688c&&_0x48688c[_0x2a1387(0xdf)]){utilities['fireFunnelTestEvent'](constants[_0x2a1387(0x97)],_0xf2b7b4,this['config'],this[_0x2a1387(0xb2)]);return;}const _0x1c72ac={};_0x1c72ac[_0x2a1387(0x17b)]=_0x48688c;const _0x241c2c=await Promise['race']([_0x5a1ba2[_0x2a1387(0xfa)](this[_0x2a1387(0x179)][_0x2a1387(0x15a)],this[_0x2a1387(0x179)][_0x2a1387(0xaf)],constants[_0x2a1387(0x181)],_0x3dfd5c[_0x2a1387(0x140)](require,_0x3dfd5c['WdKCi'])['version'],_0x1c72ac)[_0x2a1387(0x95)](_0x24f631=>{const _0x400aaf=_0x2a1387;return _0x476246[_0x400aaf(0xc4)](),_0x24f631;}),_0x476246]);_0x241c2c['isHealingEnabled']=_0x3dfd5c[_0x2a1387(0xe3)](_0x241c2c[_0x2a1387(0xc6)],_0x3dfd5c[_0x2a1387(0x13b)])||_0x3dfd5c[_0x2a1387(0xe3)](_0x241c2c[_0x2a1387(0xc6)],!![]);const _0xab195c=_0x3dfd5c[_0x2a1387(0xba)](this[_0x2a1387(0x179)]['selfHeal'],!![])||_0x3dfd5c['vvKTw'](this[_0x2a1387(0x179)][_0x2a1387(0xbc)],_0x3dfd5c[_0x2a1387(0x13b)]);if(_0x3dfd5c[_0x2a1387(0x12f)](_0x241c2c[_0x2a1387(0xbf)],constants[_0x2a1387(0x89)])&&_0xab195c)logger[_0x2a1387(0x117)](_0x3dfd5c[_0x2a1387(0x8f)]);else{if(!_0x241c2c[_0x2a1387(0xc5)]&&_0x3dfd5c[_0x2a1387(0xba)](_0x241c2c[_0x2a1387(0xc8)],0x1f7)&&_0xab195c)logger['info'](_0x3dfd5c['hNcoo']),utilities['fireFunnelTestEvent'](constants['TCG_DOWN'],_0xf2b7b4,this[_0x2a1387(0x179)],this[_0x2a1387(0xb2)]);else{if(!_0x241c2c[_0x2a1387(0xc5)]&&_0xab195c){logger[_0x2a1387(0x117)](_0x3dfd5c[_0x2a1387(0x132)]);const _0xcc45c7={'tcgUrl':constants[_0x2a1387(0x181)],'sdkVersion':_0x3dfd5c['lNGtJ'](require,_0x3dfd5c[_0x2a1387(0x84)])['version'],'methodUsed':_0x3dfd5c[_0x2a1387(0xad)],'proxyConfig':_0x48688c,'os':os[_0x2a1387(0x153)]()};utilities[_0x2a1387(0x7a)](constants['TCG_AUTH_FAILURE'],_0xcc45c7,this[_0x2a1387(0x179)],this[_0x2a1387(0xb2)]);}else{if(_0x241c2c[_0x2a1387(0xc5)]&&!_0x241c2c[_0x2a1387(0xc6)]&&_0xab195c)logger[_0x2a1387(0x117)](_0x3dfd5c[_0x2a1387(0x14a)]);else{if(_0x3dfd5c[_0x2a1387(0xe8)](_0x241c2c['status'],0xc8)&&_0x3dfd5c['iBfIi'](_0x241c2c[_0x2a1387(0xc8)],0x12c))utilities['fireFunnelTestEvent'](constants['AI_INIT_SUCCESSFUL'],_0xf2b7b4,this[_0x2a1387(0x179)],this[_0x2a1387(0xb2)]);else{if(_0x3dfd5c[_0x2a1387(0xe8)](_0x241c2c[_0x2a1387(0xc8)],0x190))_0xf2b7b4[_0x2a1387(0xc8)]=_0x241c2c[_0x2a1387(0xc8)],utilities['fireFunnelTestEvent'](constants['AI_INIT_FAILURE'],_0xf2b7b4,this[_0x2a1387(0x179)],this[_0x2a1387(0xb2)]);else!_0x241c2c[_0x2a1387(0xc8)]&&utilities['fireFunnelTestEvent'](constants[_0x2a1387(0xd0)],_0xf2b7b4,this[_0x2a1387(0x179)],this[_0x2a1387(0xb2)]);}}}}}if(_0x241c2c[_0x2a1387(0xc5)]&&_0x241c2c[_0x2a1387(0xc6)]){const _0x247e4a={};_0x247e4a[_0x2a1387(0x178)]=_0x241c2c;const _0x17794f=_0x247e4a;_0x48688c&&(_0x17794f[_0x2a1387(0xc3)]=_0x48688c),_0x17794f['framework']=this[_0x2a1387(0xb2)],_0x17794f[_0x2a1387(0xa8)]=this[_0x2a1387(0x179)],helper[_0x2a1387(0x16a)](_0x17794f),logger['debug'](_0x3dfd5c[_0x2a1387(0x98)]);}}catch(_0x34a4b4){logger[_0x2a1387(0x13d)](_0x2a1387(0x138)+(_0x34a4b4['message']?_0x34a4b4[_0x2a1387(0xbf)]:''));}});await _0x3dfd5c['QdVHA'](_0x3759db);}[a94_0x19ff24(0x12c)](){const _0xc06083=a94_0x19ff24,_0x3490ee={'YZxIx':function(_0x17fae6,_0x54d90c){return _0x17fae6(_0x54d90c);},'JWxan':_0xc06083(0x166)};_0x3490ee[_0xc06083(0x11e)](require,_0x3490ee[_0xc06083(0x123)])();}['handleExceptions'](){const _0x2e67e0=a94_0x19ff24,_0x3291ea={};_0x3291ea[_0x2e67e0(0x128)]='0|3|1|2|4',_0x3291ea[_0x2e67e0(0x7e)]=_0x2e67e0(0xd2),_0x3291ea[_0x2e67e0(0xe9)]=_0x2e67e0(0x122);const _0x3c03a1=_0x3291ea,_0x5f5143=_0x31ed2e=>{const _0x4a9a60=_0x2e67e0,_0x4291e9=_0x3c03a1[_0x4a9a60(0x128)][_0x4a9a60(0x14f)]('|');let _0x260703=0x0;while(!![]){switch(_0x4291e9[_0x260703++]){case'0':logger[_0x4a9a60(0x13e)](_0x31ed2e[_0x4a9a60(0xbf)]);continue;case'1':this[_0x4a9a60(0xde)][_0x4a9a60(0x11c)](util[_0x4a9a60(0x7c)]('%j',_0x31ed2e));continue;case'2':PerformanceTester[_0x4a9a60(0x100)](_0x31ed2e);continue;case'3':logger['debug'](util['format'](_0x31ed2e));continue;case'4':ClientTroubleShootingService[_0x4a9a60(0x111)]();continue;}break;}};process['on'](_0x3c03a1['IEIlx'],_0x5f5143),process['on'](_0x3c03a1[_0x2e67e0(0xe9)],_0x5f5143);}async[a94_0x19ff24(0xcd)](_0x59761a){const _0x320a3e=a94_0x19ff24,_0x410cc2={};_0x410cc2[_0x320a3e(0x13a)]=_0x320a3e(0xff),_0x410cc2[_0x320a3e(0xce)]=function(_0x18ee81,_0x1eafb1){return _0x18ee81+_0x1eafb1;},_0x410cc2['xiAJh']=_0x320a3e(0x83),_0x410cc2[_0x320a3e(0xea)]=function(_0x2d27bd,_0x1b702b){return _0x2d27bd+_0x1b702b;},_0x410cc2[_0x320a3e(0x121)]=_0x320a3e(0xf8),_0x410cc2[_0x320a3e(0x86)]=function(_0x319166,_0x484015){return _0x319166+_0x484015;};const _0x3f6b1e=_0x410cc2,_0x4f96ba=_0x3f6b1e['vsHkn'][_0x320a3e(0x14f)]('|');let _0x552c27=0x0;while(!![]){switch(_0x4f96ba[_0x552c27++]){case'0':await ClientTroubleShootingService['reportProcessInterruptionSituation'](_0x59761a);continue;case'1':await ClientTroubleShootingService[_0x320a3e(0x111)]();continue;case'2':if(this[_0x3f6b1e[_0x320a3e(0xce)](_0x3f6b1e[_0x320a3e(0x9e)],_0x59761a)])return;continue;case'3':logger[_0x320a3e(0x117)](_0x3f6b1e[_0x320a3e(0xea)](_0x3f6b1e[_0x320a3e(0x121)],_0x59761a));continue;case'4':this[_0x3f6b1e['RJZWf'](_0x3f6b1e[_0x320a3e(0x9e)],_0x59761a)]=!![];continue;case'5':await BrowserstackCLI[_0x320a3e(0x157)]()['stop']();continue;case'6':await TestHubHandler[_0x320a3e(0x14e)](_0x59761a);continue;case'7':this['killSignal']=_0x59761a;continue;}break;}}[a94_0x19ff24(0x142)](){const _0x3a0877=a94_0x19ff24,_0x3318e6={'FXPeT':function(_0xcb106,_0x6c0a4c){return _0xcb106===_0x6c0a4c;},'BapWw':_0x3a0877(0x145),'rOlgc':function(_0x36348d,_0x3f5e10){return _0x36348d>_0x3f5e10;},'ebPaU':function(_0x2307be,_0x105d32){return _0x2307be>_0x105d32;},'KSgSL':function(_0x13f59d,_0x1fe156){return _0x13f59d(_0x1fe156);},'mriFk':function(_0x21ee19,_0x166c43){return _0x21ee19(_0x166c43);},'DupBN':function(_0x104150){return _0x104150();},'iHwbz':_0x3a0877(0xc1)};let _0x40dc9e=0x0;return async()=>{const _0x333210=_0x3a0877;_0x40dc9e++;if(_0x3318e6[_0x333210(0x12d)](_0x40dc9e,0x1)){helper['checkStopLocalBinaryOnExit'](this[_0x333210(0xb2)])&&await this[_0x333210(0x85)]();try{logger[_0x333210(0x13d)](_0x3318e6[_0x333210(0x17a)]),await TestHubHandler[_0x333210(0x14e)](_0x40dc9e),await ClientTroubleShootingService[_0x333210(0x111)](),await BrowserstackCLI[_0x333210(0x157)]()['stop']('1');}catch(_0xccabe4){logger[_0x333210(0x13d)](_0x333210(0xa0)+util[_0x333210(0x7c)](_0xccabe4));}PerformanceTester[_0x333210(0x96)](PerformanceEvents['SDK_CLEANUP']);if(PerformanceTester[_0x333210(0x13f)]()){const {measures:_0x5d205d,errors:_0x3306a2}=await PerformanceTester['finalize'](),_0x188a63={};if(_0x5d205d&&_0x3318e6[_0x333210(0xb3)](_0x5d205d[_0x333210(0x146)],0x0)||_0x3306a2&&_0x3318e6[_0x333210(0xa9)](_0x3306a2[_0x333210(0x146)],0x0)){const _0x1f8f4b={};_0x1f8f4b['measures']=_0x5d205d,_0x1f8f4b[_0x333210(0x158)]=_0x3306a2,Object[_0x333210(0x124)](_0x188a63,_0x1f8f4b);}try{const _0x462179=await helper[_0x333210(0xbe)](_0x188a63,this[_0x333210(0x179)]);logger[_0x333210(0x13d)]('Data\x20sent\x20successfully\x20to\x20'+_0x3318e6['KSgSL'](getEdsInstrumentationAPIUrl,'')+_0x333210(0x163)+_0x462179['statusCode']);}catch(_0x28579b){logger['debug'](_0x333210(0x9a)+_0x3318e6[_0x333210(0xab)](getEdsInstrumentationAPIUrl,'')+_0x333210(0x167)+util[_0x333210(0x7c)](_0x28579b));}try{fs[_0x333210(0x156)](path['join'](_0x3318e6[_0x333210(0x14c)](getLogDir),_0x3318e6[_0x333210(0x77)]),JSON[_0x333210(0x76)](_0x188a63));}catch(_0x2750ce){logger['debug'](_0x333210(0xf2)+_0x2750ce);}}}logger&&logger['close'](),fileLogger&&fileLogger['close']();};}}function a94_0x5bc2(){const _0x5339ba=['Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','4688UnULnL','stringify','iHwbz','bind','jwmhv','fireFunnelTestEvent','isUndefined','format','getPackageVersion','IEIlx','disableAutoCaptureLogs','13641nEBWVk','QrObz','setupPercy','handled','WdKCi','stopBrowserstackLocal','RJZWf','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','allocateHub','UPGRADE_REQUIRED','6Prdfqi','innkF','percy','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','JxDle','weIDy','8034620ChqYLA','./percy/utils','isLTSSession','nrjwl','winstonLogger','then','end','AI_PROXY_FAILURE','XEgiR','sdkRunId','Failed\x20to\x20send\x20data\x20to\x20','fLpFE','getConfigPath','zTJrh','xiAJh','compareVersions','Error\x20in\x20sending\x20testhub\x20stop:\x20','Jqjmc','8609895YDVywQ','zNbrA','hTAyA','playwrightUrl','stopPercy','path','bstackConfig','ebPaU','3095TWUoYs','mriFk','setLogDir','nTUrY','../bin/v2/browserstackCLI','userName','isTrue','isNotUndefined','framework','rOlgc','../ai-sdk-node/bundle','startMonitoring','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','setupBrowserstackLocal','../bin/utils/apiUtilityMethods','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','XbiLu','BROWSERSTACK_TURBOSCALE','selfHeal','386nivrLQ','sendToEDS','message','AUTOLOGCAPTURE_NOTIFICATION','events.json','false','proxyConfig','cancel','isAuthenticated','isHealingEnabled','customRepeaters','status','SIGQUIT','readConfig','VpBuF','CeisN','intExitHandler','xTWyH','rwwcA','INVALID_INIT_RESP_WITH_USER_IMPACT','ahVdg','unhandledRejection','toLowerCase','4.5.0','5008AYVZHy','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','skipSessionStatus','custom-repeater','ats-repeater','setupTCGAuth','../../package.json','browserstackLocal','CMIpS','unhandledErrors','proxyUrl','configPath','testContextOptions','startLocalBinary','vvKTw','cliConfig','FRAMEWORK','1206GhMFzG','ZsQIF','PwMGL','HZVMf','kbkgr','SIGABRT','handleExceptions','GabuG','central_scanner','iMpjN','getProxyConfigForTcg','aiHeal:tcgAuth','Error\x20in\x20writing\x20events\x20to\x20file\x20','turboScaleGridDetails','SIGBREAK','22iDsBWv','platforms','./performance/constants','Shutdown\x20triggered\x20by\x20','version','init','YCBHn','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','SDKTestAttempted','util','2|4|3|7|0|6|1|5','captureError','constructor','Percy\x20started\x20successfully','YYcLE','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','../bin/utils/constants','uuid','includes','Error\x20in\x20percy\x20setup\x20','./performance/performance-tester','isRunning','true','vYsbR','fileLogger','killSignal','698996tOjVWr','env','reportFinalDetectionState','localOptions','DxZZw','skipSessionName','envConfig','getFinalCaps','info','23|3|16|2|5|20|7|1|19|13|12|11|8|6|9|18|0|10|22|15|17|14|21|4','userName\x20or\x20accessKey\x20is\x20not\x20defined','fsvSe','getAccessKey','push','7574124kHxYjo','YZxIx','normalizeTestReportingEnvVars','sanitizeCaps','WLhkj','uncaughtException','JWxan','assign','useW3C','isTrialGrid','Local\x20binary\x20stopped','Plqfg','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','HUB_MANAGEMENT','preInitialize','setupKeepAlive','FXPeT','JBWIf','Ttget','SDK\x20run\x20started\x20with\x20id:\x20','BROWSERSTACK_PERCY','TmDTW','VXLgs','AvheT','selenium-webdriver','playwright','getCentralUser','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','KLuup','vsHkn','bunup','isTurboScaleSession','debug','error','isEnabled','ZKmPC','BPGAu','exitHandler','getTurboScaleGridDetails','turboScaleOptions','Calling\x20Build\x20Stop\x20from\x20ExitHandler','length','bFOQb','lNGtJ','xOUjz','quloA','turboScaleUrl','DupBN','parallelsPerPlatform','stop','split','codeceptjs','turboScale','KIFYe','platform','getHubUrl','BrowserstackHealing.init','writeFileSync','getInstance','exceptions','default','accessKey','./logger','VEDpw','warn','MypoF','XKUve','generateLocalIdentifier','setProxySettings','UWBeJ','\x20with\x20response\x20','setLogLevel','SIGTERM','./setKeepAlive','\x20with\x20error\x20','BrowserstackHealingInitFailed','./testhub/testhubHandler','setupTcgConfigFile','browserStackLocalOptions','setCredentialsFromYmlConfig','LTS\x20session\x20enabled\x20for\x20this\x20run.\x20SDK\x20run\x20id:\x20','initialize','?caps=','SIGINT','getLocalIdentifier','wEdTD','isBrowserstackInfra','ckRVg','uBvzR','toString','EZlNS','tcgAuthConfig','config','BapWw','proxy','KlIvK','skipBinaryInitialisation','beforeExit','setEnvCaps','join','TCG_URL','url','soEHW'];a94_0x5bc2=function(){return _0x5339ba;};return a94_0x5bc2();}exports[a94_0x19ff24(0x159)]=BrowserStackSetup;