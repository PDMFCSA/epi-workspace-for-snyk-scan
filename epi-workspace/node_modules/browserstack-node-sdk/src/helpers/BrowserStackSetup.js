const a87_0x191a9f=a87_0x16f3;(function(_0x596ba1,_0x234042){const _0x3696b0=a87_0x16f3,_0x22259f=_0x596ba1();while(!![]){try{const _0x189b15=parseInt(_0x3696b0(0x1c2))/0x1*(parseInt(_0x3696b0(0x25f))/0x2)+parseInt(_0x3696b0(0x249))/0x3+parseInt(_0x3696b0(0x24e))/0x4*(-parseInt(_0x3696b0(0x1f8))/0x5)+-parseInt(_0x3696b0(0x1e1))/0x6*(-parseInt(_0x3696b0(0x219))/0x7)+-parseInt(_0x3696b0(0x1da))/0x8*(parseInt(_0x3696b0(0x1d8))/0x9)+parseInt(_0x3696b0(0x17a))/0xa+parseInt(_0x3696b0(0x215))/0xb*(-parseInt(_0x3696b0(0x212))/0xc);if(_0x189b15===_0x234042)break;else _0x22259f['push'](_0x22259f['shift']());}catch(_0x2abda7){_0x22259f['push'](_0x22259f['shift']());}}}(a87_0x373d,0x871f7));function a87_0x16f3(_0x18cfdc,_0x4a5268){const _0x373de0=a87_0x373d();return a87_0x16f3=function(_0x16f3b6,_0x1ce234){_0x16f3b6=_0x16f3b6-0x166;let _0x52c204=_0x373de0[_0x16f3b6];return _0x52c204;},a87_0x16f3(_0x18cfdc,_0x4a5268);}const util=require(a87_0x191a9f(0x1d0)),os=require('os'),path=require(a87_0x191a9f(0x270)),{v4:uuidv4}=require('uuid'),fs=require('fs'),constants=require(a87_0x191a9f(0x16d)),logger=require('./logger')[a87_0x191a9f(0x20e)],fileLogger=require('./logger')[a87_0x191a9f(0x1fd)],{getLogDir}=require(a87_0x191a9f(0x194)),helper=require(a87_0x191a9f(0x217)),utilities=require(a87_0x191a9f(0x238)),percyHelper=require(a87_0x191a9f(0x178)),hubAllocator=require(a87_0x191a9f(0x18b)),PerformanceTester=require(a87_0x191a9f(0x1a0)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a87_0x191a9f(0x1f5)),{setPercyFlag}=require(a87_0x191a9f(0x264)),TestHubHandler=require(a87_0x191a9f(0x20c)),timeoutPromise=require(a87_0x191a9f(0x214)),BrowserstackCLI=require(a87_0x191a9f(0x1d5)),{getEdsInstrumentationAPIUrl}=require(a87_0x191a9f(0x1c6));class BrowserStackSetup{constructor(_0x190b3f,_0xc73add){const _0x4fd8d4=a87_0x191a9f,_0x582ce0={'UnmjV':_0x4fd8d4(0x16c),'iIUfl':function(_0xf5169c){return _0xf5169c();},'bVvlZ':_0x4fd8d4(0x1b2)},_0x1f2dc5=_0x582ce0[_0x4fd8d4(0x1b8)][_0x4fd8d4(0x1cb)]('|');let _0x203c2f=0x0;while(!![]){switch(_0x1f2dc5[_0x203c2f++]){case'0':this['config'][_0x4fd8d4(0x1bb)]=this[_0x4fd8d4(0x195)][_0x4fd8d4(0x1bb)]||[];continue;case'1':helper[_0x4fd8d4(0x23b)](this['config'],this[_0x4fd8d4(0x20f)],this[_0x4fd8d4(0x25e)]);continue;case'2':this[_0x4fd8d4(0x1d3)]={};continue;case'3':this[_0x4fd8d4(0x203)]=_0x582ce0[_0x4fd8d4(0x1f0)](uuidv4);continue;case'4':this['config'][_0x4fd8d4(0x262)][_0x4fd8d4(0x22b)]=!helper['isBrowserstackInfra']()||helper[_0x4fd8d4(0x1d7)](this[_0x4fd8d4(0x195)][_0x4fd8d4(0x262)]['skipSessionStatus']);continue;case'5':this[_0x4fd8d4(0x253)]=_0xc73add;continue;case'6':if(this[_0x4fd8d4(0x195)][_0x4fd8d4(0x252)])throw new Error(this['config']['error']);continue;case'7':this[_0x4fd8d4(0x218)]=null;continue;case'8':this[_0x4fd8d4(0x195)]=helper[_0x4fd8d4(0x199)](helper[_0x4fd8d4(0x19b)](_0x190b3f));continue;case'9':helper[_0x4fd8d4(0x18d)](this[_0x4fd8d4(0x195)]);continue;case'10':global['framework']=_0xc73add;continue;case'11':if(helper['isUndefined'](this['config']))throw new Error(_0x582ce0['bVvlZ']);continue;case'12':helper['setBrowserstackInfraFromConfig'](this[_0x4fd8d4(0x195)],this[_0x4fd8d4(0x20f)]);continue;case'13':this[_0x4fd8d4(0x195)][_0x4fd8d4(0x262)]['skipSessionName']=!helper[_0x4fd8d4(0x247)]()||helper['isTrue'](this['config']['testContextOptions'][_0x4fd8d4(0x1d6)]);continue;case'14':helper[_0x4fd8d4(0x1df)](this[_0x4fd8d4(0x195)]);continue;case'15':PerformanceTester['startMonitoring']();continue;case'16':this[_0x4fd8d4(0x25e)]=helper[_0x4fd8d4(0x1ca)]();continue;case'17':this['unhandledErrors']=[];continue;case'18':helper[_0x4fd8d4(0x1b1)](this[_0x4fd8d4(0x195)],this['cliConfig'],this[_0x4fd8d4(0x25e)]);continue;case'19':this['cliConfig']=helper[_0x4fd8d4(0x1ea)](_0x190b3f);continue;case'20':this[_0x4fd8d4(0x190)]=null;continue;case'21':helper[_0x4fd8d4(0x263)]();continue;case'22':this[_0x4fd8d4(0x195)][_0x4fd8d4(0x262)]=this[_0x4fd8d4(0x195)][_0x4fd8d4(0x262)]||{};continue;}break;}}[a87_0x191a9f(0x1b4)](_0x1b4c39){const _0x195b96=a87_0x191a9f,_0x1a5450={'npRyf':_0x195b96(0x1cf),'ScXwf':function(_0x48e8af,_0x4675ef){return _0x48e8af===_0x4675ef;},'oQweL':'integrations','ivcrW':_0x195b96(0x181),'KHodw':function(_0x2cb92a,_0x4e54c7){return _0x2cb92a<_0x4e54c7;},'OByzQ':function(_0x2451d9,_0x37b275){return _0x2451d9(_0x37b275);},'VjOCA':_0x195b96(0x20d),'hhxYv':_0x195b96(0x183),'jTJeJ':'Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','RJDWr':_0x195b96(0x170),'rKpVH':'SIGTERM','WbDya':_0x195b96(0x1fa),'WrQEo':_0x195b96(0x1a3),'ZspNU':function(_0x44904a,_0x37557e){return _0x44904a!==_0x37557e;},'kSkFn':_0x195b96(0x169),'KoAUv':_0x195b96(0x1ee),'QIEUm':_0x195b96(0x242),'tEWtD':_0x195b96(0x273),'kzPrK':'beforeExit'},_0x2a21a3=this[_0x195b96(0x253)];global['config']=this['config'],helper[_0x195b96(0x245)](this[_0x195b96(0x195)]),this[_0x195b96(0x200)]=null,global[_0x195b96(0x203)]=this[_0x195b96(0x203)],logger[_0x195b96(0x202)](_0x195b96(0x220)+this['sdkRunId']),!this[_0x195b96(0x195)][_0x195b96(0x21c)]&&(this[_0x195b96(0x195)]['browserStackLocalOptions']=this['config']['localOptions']||{});if(helper['isUndefined'](helper[_0x195b96(0x260)](this[_0x195b96(0x195)]))||helper[_0x195b96(0x1c5)](helper[_0x195b96(0x1b9)](this[_0x195b96(0x195)])))throw new Error(_0x1a5450[_0x195b96(0x19f)]);helper[_0x195b96(0x21a)](this[_0x195b96(0x195)])&&helper[_0x195b96(0x1c5)](helper[_0x195b96(0x22a)](this[_0x195b96(0x195)]))&&(!helper[_0x195b96(0x1c5)](this['config']['browserStackLocalOptions'])&&_0x1a5450[_0x195b96(0x22d)](this[_0x195b96(0x195)][_0x195b96(0x21c)][_0x195b96(0x240)],Object)?!helper[_0x195b96(0x1d7)](this['config'][_0x195b96(0x21c)]['skipBinaryInitialisation'])&&(this['config'][_0x195b96(0x21c)][_0x195b96(0x1dc)]=helper[_0x195b96(0x1ab)]()):this['config'][_0x195b96(0x21c)]={'localIdentifier':helper[_0x195b96(0x1ab)]()});this[_0x195b96(0x195)][_0x195b96(0x21c)][_0x195b96(0x1a8)]=helper['isTrue'](this['config']['browserStackLocalOptions'][_0x195b96(0x1a8)]),helper[_0x195b96(0x205)](this['config']);if(_0x1a5450['ScXwf'](_0x2a21a3,_0x1a5450[_0x195b96(0x1d4)]))return;this[_0x195b96(0x187)]();process[_0x195b96(0x1cd)][_0x195b96(0x1eb)]&&(this[_0x195b96(0x195)][_0x195b96(0x239)]=helper[_0x195b96(0x1d7)](process['env']['BROWSERSTACK_TURBOSCALE']),this[_0x195b96(0x195)][_0x195b96(0x208)]=this[_0x195b96(0x195)]['turboScaleOptions']||{});helper[_0x195b96(0x173)](this['config'])&&(process[_0x195b96(0x1cd)][_0x195b96(0x1eb)]=!![]);if(!helper[_0x195b96(0x247)]()){try{process[_0x195b96(0x1cd)][_0x195b96(0x22e)]=_0x2a21a3,utilities[_0x195b96(0x243)](_0x1a5450[_0x195b96(0x269)],{},this[_0x195b96(0x195)],this['framework']);}catch(_0x26ed58){logger[_0x195b96(0x24b)](_0x195b96(0x1a4)+_0x26ed58);}return;}if(helper[_0x195b96(0x18c)](_0x2a21a3)){if(global[_0x195b96(0x26b)])return;_0x1a5450[_0x195b96(0x25d)](_0x1a5450[_0x195b96(0x1f2)](parseInt,helper[_0x195b96(0x19a)](_0x1a5450['VjOCA'])),0x3)&&(this['config'][_0x195b96(0x23c)]=![]),_0x1a5450[_0x195b96(0x22d)](helper[_0x195b96(0x1c0)](helper[_0x195b96(0x19a)](_0x1a5450[_0x195b96(0x18f)]),_0x1a5450[_0x195b96(0x1c1)]),0x1)&&(this[_0x195b96(0x195)][_0x195b96(0x23c)]=!![]);}(helper['isUndefined'](this[_0x195b96(0x195)]['platforms'])||helper['isUndefined'](this[_0x195b96(0x195)]['platforms']['length']))&&(helper['isUndefined'](this[_0x195b96(0x195)]['parallelsPerPlatform'])?logger[_0x195b96(0x202)](_0x1a5450[_0x195b96(0x1e0)]):logger[_0x195b96(0x167)](_0x1a5450['RJDWr']),this[_0x195b96(0x195)][_0x195b96(0x1bb)]=[]);!this[_0x195b96(0x195)][_0x195b96(0x262)]&&(this[_0x195b96(0x195)][_0x195b96(0x262)]={});try{process[_0x195b96(0x1cd)][_0x195b96(0x22e)]=_0x1b4c39['_'][0x0],utilities[_0x195b96(0x243)](_0x1a5450[_0x195b96(0x269)],{},this[_0x195b96(0x195)],this[_0x195b96(0x253)]);}catch(_0x2facab){logger[_0x195b96(0x24b)](_0x195b96(0x1a4)+_0x2facab);}!this[_0x195b96(0x195)][_0x195b96(0x231)]&&logger['info'](constants[_0x195b96(0x1b6)]),this[_0x195b96(0x1ef)]=this[_0x195b96(0x1ef)][_0x195b96(0x235)](this),process['on'](_0x1a5450[_0x195b96(0x224)],this[_0x195b96(0x1ef)]),process['on'](_0x1a5450[_0x195b96(0x1f6)],this[_0x195b96(0x1ef)]),process['on'](_0x1a5450[_0x195b96(0x1c8)],this[_0x195b96(0x1ef)]),_0x1a5450[_0x195b96(0x175)](process[_0x195b96(0x22c)],_0x1a5450[_0x195b96(0x1fe)])?(process['on'](_0x1a5450[_0x195b96(0x1f4)],this['intExitHandler']),process['on'](_0x1a5450[_0x195b96(0x229)],this[_0x195b96(0x1ef)])):process['on'](_0x1a5450[_0x195b96(0x26f)],this[_0x195b96(0x1ef)]),process['on'](_0x1a5450['kzPrK'],this['exitHandler']());}async['initialize'](_0xdf834b){const _0x24d7e6=a87_0x191a9f,_0x49a052={'fhFaC':_0x24d7e6(0x171),'UQZyI':_0x24d7e6(0x21b),'Bmbpx':'true','fAsTr':function(_0xa9a13e,_0x44548c){return _0xa9a13e===_0x44548c;},'ZIjfX':_0x24d7e6(0x21f),'fZfVp':function(_0x49d742,_0x18a4b5){return _0x49d742+_0x18a4b5;},'fErya':_0x24d7e6(0x274),'ZcgEW':function(_0x6a5529,_0x901eb9){return _0x6a5529(_0x901eb9);},'aYXTH':'codeceptjs'};this['preInitialize'](_0xdf834b);if(helper['isTurboScaleSession'](this['config'])){const _0x2a8fb2=await helper[_0x24d7e6(0x193)](this['config']);this[_0x24d7e6(0x195)][_0x24d7e6(0x19e)]=_0x2a8fb2,_0x2a8fb2[_0x24d7e6(0x16e)]&&helper[_0x24d7e6(0x24d)](this[_0x24d7e6(0x195)]['browserstackLocal'])&&helper[_0x24d7e6(0x1d7)](this[_0x24d7e6(0x195)][_0x24d7e6(0x218)])&&(this[_0x24d7e6(0x195)][_0x24d7e6(0x21c)][_0x24d7e6(0x1dc)]=_0x49a052[_0x24d7e6(0x1d1)],this[_0x24d7e6(0x195)]['browserStackLocalOptions'][_0x49a052[_0x24d7e6(0x1be)]]=_0x2a8fb2[_0x24d7e6(0x1cc)]['join'](','),this[_0x24d7e6(0x195)][_0x24d7e6(0x21c)][_0x24d7e6(0x223)]=_0x49a052[_0x24d7e6(0x261)]),this[_0x24d7e6(0x195)][_0x24d7e6(0x1ba)]=_0x2a8fb2[_0x24d7e6(0x1de)],this[_0x24d7e6(0x253)]&&_0x49a052[_0x24d7e6(0x22f)](this[_0x24d7e6(0x253)]['toLowerCase'](),_0x49a052[_0x24d7e6(0x17c)])?this[_0x24d7e6(0x195)][_0x24d7e6(0x1ba)]=_0x49a052[_0x24d7e6(0x234)](_0x2a8fb2[_0x24d7e6(0x1ae)],_0x49a052[_0x24d7e6(0x228)]):constants['hubUrl']=helper[_0x24d7e6(0x1bc)](this[_0x24d7e6(0x195)]),logger[_0x24d7e6(0x24b)](_0x24d7e6(0x1f9)+constants[_0x24d7e6(0x1d2)]);}helper['setProxySettings'](this[_0x24d7e6(0x195)]),this[_0x24d7e6(0x198)](),_0x49a052['ZcgEW'](setPercyFlag,this),await this['setupBrowserstackLocal'](),![_0x49a052[_0x24d7e6(0x272)],_0x49a052[_0x24d7e6(0x17c)]][_0x24d7e6(0x201)](this[_0x24d7e6(0x253)])&&!helper[_0x24d7e6(0x173)](this[_0x24d7e6(0x195)])&&!helper['getCentralUser']()[_0x24d7e6(0x232)]&&await this[_0x24d7e6(0x257)]();}async[a87_0x191a9f(0x177)](){const _0x7f8835=a87_0x191a9f,_0x886d17={};_0x886d17['CXdtJ']=function(_0x1e6ecf,_0x363d4b){return _0x1e6ecf===_0x363d4b;},_0x886d17[_0x7f8835(0x206)]=_0x7f8835(0x258),_0x886d17['fOwRN']=_0x7f8835(0x186),_0x886d17[_0x7f8835(0x176)]='Percy\x20started\x20successfully',_0x886d17[_0x7f8835(0x1e2)]=_0x7f8835(0x222),_0x886d17['ppqZw']=_0x7f8835(0x266);const _0x17958=_0x886d17;if(helper['isTrue'](this[_0x7f8835(0x195)][_0x7f8835(0x190)])&&(!this['percy']||!this['percy'][_0x7f8835(0x17f)]()))try{this[_0x7f8835(0x190)]=await percyHelper[_0x7f8835(0x26e)](this[_0x7f8835(0x195)]);if(!this['percy']){process[_0x7f8835(0x1cd)]['BROWSERSTACK_PERCY']=_0x17958[_0x7f8835(0x206)];throw new Error(_0x17958[_0x7f8835(0x1a1)]);}logger['info'](_0x17958['JOBAq']),process[_0x7f8835(0x1cd)][_0x7f8835(0x26d)]=_0x17958[_0x7f8835(0x1e2)];let _0x7c730e=0x0;const _0x3f674d=async()=>{const _0x3c0bb3=_0x7f8835;_0x7c730e++,_0x17958[_0x3c0bb3(0x246)](_0x7c730e,0x1)&&await this['stopPercy']();};process['on'](_0x17958['ppqZw'],_0x3f674d);}catch(_0x2027c6){process[_0x7f8835(0x1cd)][_0x7f8835(0x26d)]=_0x17958[_0x7f8835(0x206)],logger[_0x7f8835(0x24b)](_0x7f8835(0x180)+_0x2027c6);throw new Error(_0x2027c6[_0x7f8835(0x1b0)]());}}async[a87_0x191a9f(0x1bf)](){const _0x2623d8=a87_0x191a9f,_0x1c3d87={};_0x1c3d87[_0x2623d8(0x1b7)]=_0x2623d8(0x213),_0x1c3d87['tvPoC']=_0x2623d8(0x1ac);const _0x4846ce=_0x1c3d87;if(this[_0x2623d8(0x190)]&&this['percy'][_0x2623d8(0x17f)]())try{await percyHelper[_0x2623d8(0x1bf)](this[_0x2623d8(0x190)]),logger[_0x2623d8(0x202)](_0x4846ce['asVhF']);}catch(_0x4b80d8){logger[_0x2623d8(0x252)](_0x4846ce[_0x2623d8(0x236)],_0x4b80d8[_0x2623d8(0x1bd)]);}}async[a87_0x191a9f(0x204)](){const _0x58099f=a87_0x191a9f,_0xe0745e={};_0xe0745e[_0x58099f(0x1ce)]=_0x58099f(0x24f),_0xe0745e['dGXCt']=_0x58099f(0x189);const _0x502e4e=_0xe0745e;if(helper['isBrowserstackInfra']()&&helper[_0x58099f(0x1d7)](this['config'][_0x58099f(0x218)])&&(!this[_0x58099f(0x218)]||!this['browserstackLocal']['isRunning']()))try{if(this[_0x58099f(0x195)][_0x58099f(0x21c)][_0x58099f(0x1a8)]){logger['debug'](_0x502e4e[_0x58099f(0x1ce)]);return;}this['browserstackLocal']=await helper[_0x58099f(0x1e5)](this[_0x58099f(0x195)]),logger[_0x58099f(0x202)](_0x502e4e[_0x58099f(0x1e9)]);}catch(_0x748b98){logger[_0x58099f(0x24b)](_0x748b98);throw new Error(_0x748b98['toString']());}}async[a87_0x191a9f(0x21e)](){const _0x1d4dae=a87_0x191a9f,_0x9d79f9={};_0x9d79f9[_0x1d4dae(0x227)]=_0x1d4dae(0x1a6),_0x9d79f9['hFcuR']='Error\x20occured\x20while\x20stopping\x20local\x20binary';const _0x237d6e=_0x9d79f9;if(this['browserstackLocal']&&this['browserstackLocal'][_0x1d4dae(0x17f)]())try{await helper[_0x1d4dae(0x267)](this['browserstackLocal']),logger['info'](_0x237d6e[_0x1d4dae(0x227)]);}catch(_0x305a01){logger[_0x1d4dae(0x252)](_0x237d6e['hFcuR'],_0x305a01[_0x1d4dae(0x1bd)]);}}async[a87_0x191a9f(0x257)](){const _0x32be25=a87_0x191a9f;return PerformanceTester['measureWrapper'](PerformanceAutEvents[_0x32be25(0x1f1)],async()=>{await hubAllocator['allocateHub'](this['config']);})();}async[a87_0x191a9f(0x233)](){const _0x117222=a87_0x191a9f,_0x328d79={'xCCDr':function(_0xd55811,_0xe24513){return _0xd55811(_0xe24513);},'Lfopf':_0x117222(0x179),'tWjwc':function(_0x5c8ac3,_0x5de000,_0xb4dad5,_0x5d10a4,_0xe0fde6,_0x13f31e,_0x51c45a){return _0x5c8ac3(_0x5de000,_0xb4dad5,_0x5d10a4,_0xe0fde6,_0x13f31e,_0x51c45a);},'WBvLP':'BrowserstackHealing.init\x20method\x20timed\x20out','BCZho':_0x117222(0x21d),'wfmLj':_0x117222(0x1fb),'AdiRs':_0x117222(0x216),'BuCMg':function(_0x58c9e2,_0x133c52){return _0x58c9e2(_0x133c52);},'NQMxj':function(_0x2afd29,_0x7e1e7f){return _0x2afd29===_0x7e1e7f;},'pfDCa':_0x117222(0x222),'UAOlT':function(_0x11b818,_0x5ed7d4){return _0x11b818===_0x5ed7d4;},'HDMOh':_0x117222(0x226),'EDBiX':function(_0x17683c,_0x2f2bd9){return _0x17683c===_0x2f2bd9;},'QelSV':_0x117222(0x1ad),'BmisM':_0x117222(0x1e7),'PJgXj':'Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','FtwRL':function(_0xb5edd1,_0x10675b){return _0xb5edd1>=_0x10675b;},'lGIYg':function(_0x4bd0b2,_0x4629e5){return _0x4bd0b2<_0x4629e5;},'GggTX':_0x117222(0x276),'pdLTZ':_0x117222(0x25a),'cgrZC':function(_0x4f019c){return _0x4f019c();}},_0x1a93bd=PerformanceTester[_0x117222(0x16a)](_0x328d79[_0x117222(0x265)],async()=>{const _0x36df21=_0x117222;try{const _0x17e22f=new Date(),_0x3554bc=helper[_0x36df21(0x1a2)](this[_0x36df21(0x195)]),_0xadb75a=_0x328d79['xCCDr'](require,path['join'](__dirname,_0x328d79[_0x36df21(0x185)])),_0x3efa69=_0x328d79[_0x36df21(0x255)](timeoutPromise,constants[_0x36df21(0x184)],_0x328d79[_0x36df21(0x1aa)],_0x328d79[_0x36df21(0x1b3)],_0x17e22f,this[_0x36df21(0x195)],this[_0x36df21(0x253)]),_0x1693d4={'tcgUrl':constants[_0x36df21(0x230)],'sdkVersion':_0x328d79[_0x36df21(0x1fc)](require,_0x328d79['wfmLj'])[_0x36df21(0x1c3)],'methodUsed':_0x328d79[_0x36df21(0x26a)],'proxyConfig':_0x3554bc,'os':os['platform']()};if(_0x3554bc&&_0x3554bc['proxyUrl']){utilities[_0x36df21(0x243)](constants['AI_PROXY_FAILURE'],_0x1693d4,this['config'],this['framework']);return;}const _0x3ef05e={};_0x3ef05e['proxy']=_0x3554bc;const _0x2770e5=await Promise[_0x36df21(0x188)]([_0xadb75a[_0x36df21(0x17b)](this[_0x36df21(0x195)][_0x36df21(0x1e6)],this[_0x36df21(0x195)][_0x36df21(0x241)],constants[_0x36df21(0x230)],_0x328d79[_0x36df21(0x19c)](require,_0x328d79[_0x36df21(0x23d)])['version'],_0x3ef05e)[_0x36df21(0x1c9)](_0x2b19c7=>{const _0x51f108=_0x36df21;return _0x3efa69[_0x51f108(0x251)](),_0x2b19c7;}),_0x3efa69]);_0x2770e5[_0x36df21(0x256)]=_0x328d79['NQMxj'](_0x2770e5[_0x36df21(0x256)],_0x328d79[_0x36df21(0x1db)])||_0x328d79[_0x36df21(0x1af)](_0x2770e5[_0x36df21(0x256)],!![]);const _0x18b255=_0x328d79['NQMxj'](this[_0x36df21(0x195)][_0x36df21(0x19d)],!![])||_0x328d79['UAOlT'](this[_0x36df21(0x195)][_0x36df21(0x19d)],_0x328d79[_0x36df21(0x1db)]);if(_0x328d79[_0x36df21(0x1af)](_0x2770e5['message'],constants['UPGRADE_REQUIRED'])&&_0x18b255)logger[_0x36df21(0x202)](_0x328d79[_0x36df21(0x196)]);else{if(!_0x2770e5[_0x36df21(0x1ed)]&&_0x328d79['EDBiX'](_0x2770e5[_0x36df21(0x1e4)],0x1f7)&&_0x18b255)logger[_0x36df21(0x202)](_0x328d79[_0x36df21(0x1ff)]),utilities['fireFunnelTestEvent'](constants[_0x36df21(0x1c4)],_0x1693d4,this['config'],this[_0x36df21(0x253)]);else{if(!_0x2770e5[_0x36df21(0x1ed)]&&_0x18b255){logger['info'](_0x328d79['BmisM']);const _0x549a68={'tcgUrl':constants[_0x36df21(0x230)],'sdkVersion':_0x328d79[_0x36df21(0x1fc)](require,_0x328d79['wfmLj'])[_0x36df21(0x1c3)],'methodUsed':_0x328d79[_0x36df21(0x26a)],'proxyConfig':_0x3554bc,'os':os['platform']()};utilities[_0x36df21(0x243)](constants[_0x36df21(0x23a)],_0x549a68,this['config'],this[_0x36df21(0x253)]);}else{if(_0x2770e5[_0x36df21(0x1ed)]&&!_0x2770e5['isHealingEnabled']&&_0x18b255)logger[_0x36df21(0x202)](_0x328d79[_0x36df21(0x23e)]);else{if(_0x328d79[_0x36df21(0x1f7)](_0x2770e5['status'],0xc8)&&_0x328d79[_0x36df21(0x237)](_0x2770e5['status'],0x12c))utilities[_0x36df21(0x243)](constants[_0x36df21(0x18e)],_0x1693d4,this[_0x36df21(0x195)],this[_0x36df21(0x253)]);else{if(_0x328d79['FtwRL'](_0x2770e5[_0x36df21(0x1e4)],0x190))_0x1693d4[_0x36df21(0x1e4)]=_0x2770e5[_0x36df21(0x1e4)],utilities[_0x36df21(0x243)](constants[_0x36df21(0x174)],_0x1693d4,this[_0x36df21(0x195)],this[_0x36df21(0x253)]);else!_0x2770e5[_0x36df21(0x1e4)]&&utilities['fireFunnelTestEvent'](constants[_0x36df21(0x24a)],_0x1693d4,this['config'],this[_0x36df21(0x253)]);}}}}}if(_0x2770e5[_0x36df21(0x1ed)]&&_0x2770e5[_0x36df21(0x256)]){const _0x2857ce={};_0x2857ce[_0x36df21(0x168)]=_0x2770e5;const _0xe3353f=_0x2857ce;_0x3554bc&&(_0xe3353f[_0x36df21(0x1a5)]=_0x3554bc),_0xe3353f[_0x36df21(0x253)]=this[_0x36df21(0x253)],_0xe3353f[_0x36df21(0x182)]=this[_0x36df21(0x195)],helper[_0x36df21(0x24c)](_0xe3353f),logger[_0x36df21(0x24b)](_0x328d79['GggTX']);}}catch(_0x28fde1){logger[_0x36df21(0x24b)]('Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20'+(_0x28fde1[_0x36df21(0x1bd)]?_0x28fde1[_0x36df21(0x1bd)]:''));}});await _0x328d79[_0x117222(0x1dd)](_0x1a93bd);}['setupKeepAlive'](){const _0xf21750=a87_0x191a9f,_0x68f752={'mlyaY':function(_0x47e36a,_0x2e7706){return _0x47e36a(_0x2e7706);},'OwjpN':'./setKeepAlive'};_0x68f752['mlyaY'](require,_0x68f752[_0xf21750(0x191)])();}[a87_0x191a9f(0x187)](){const _0x39e4ee=a87_0x191a9f,_0xd560b1={};_0xd560b1['bfPUX']=_0x39e4ee(0x268),_0xd560b1[_0x39e4ee(0x1ec)]=_0x39e4ee(0x259);const _0x4d3add=_0xd560b1,_0x551802=_0x4574a3=>{const _0x51c6f8=_0x39e4ee;logger[_0x51c6f8(0x252)](_0x4574a3[_0x51c6f8(0x1bd)]),logger[_0x51c6f8(0x24b)](util[_0x51c6f8(0x1c7)](_0x4574a3)),this['unhandledErrors'][_0x51c6f8(0x166)](util[_0x51c6f8(0x1c7)]('%j',_0x4574a3)),PerformanceTester[_0x51c6f8(0x17e)](_0x4574a3);};process['on'](_0x4d3add[_0x39e4ee(0x211)],_0x551802),process['on'](_0x4d3add[_0x39e4ee(0x1ec)],_0x551802);}async[a87_0x191a9f(0x1ef)](_0xb2e2a5){const _0x282af2=a87_0x191a9f,_0x466ecd={};_0x466ecd[_0x282af2(0x25b)]=_0x282af2(0x221),_0x466ecd[_0x282af2(0x1d9)]=function(_0x4f28b3,_0x21180e){return _0x4f28b3+_0x21180e;},_0x466ecd['BBrgz']=_0x282af2(0x26c),_0x466ecd[_0x282af2(0x1f3)]=function(_0x3fc51d,_0xbf59fd){return _0x3fc51d+_0xbf59fd;},_0x466ecd[_0x282af2(0x25c)]=_0x282af2(0x23f);const _0x4307fc=_0x466ecd,_0x47c1e3=_0x4307fc['vtzOx'][_0x282af2(0x1cb)]('|');let _0x406307=0x0;while(!![]){switch(_0x47c1e3[_0x406307++]){case'0':logger[_0x282af2(0x202)](_0x4307fc[_0x282af2(0x1d9)](_0x4307fc[_0x282af2(0x225)],_0xb2e2a5));continue;case'1':if(this[_0x4307fc[_0x282af2(0x1f3)](_0x4307fc['Lkohn'],_0xb2e2a5)])return;continue;case'2':this[_0x282af2(0x200)]=_0xb2e2a5;continue;case'3':await BrowserstackCLI['getInstance']()[_0x282af2(0x197)]();continue;case'4':this[_0x4307fc[_0x282af2(0x1f3)](_0x4307fc[_0x282af2(0x25c)],_0xb2e2a5)]=!![];continue;case'5':await TestHubHandler[_0x282af2(0x197)](_0xb2e2a5);continue;}break;}}[a87_0x191a9f(0x209)](){const _0x30df54=a87_0x191a9f,_0x41ade5={'NXCqB':function(_0x16c941,_0x1b0ef3){return _0x16c941===_0x1b0ef3;},'AqJcD':'Calling\x20Build\x20Stop\x20from\x20ExitHandler','FJiny':function(_0x805ae9,_0x3f3346){return _0x805ae9>_0x3f3346;},'Updtm':function(_0x46d6f6,_0x30774f){return _0x46d6f6>_0x30774f;},'zSDaw':function(_0x531ac5,_0x1b1985){return _0x531ac5(_0x1b1985);},'MBdFo':function(_0x4a0f0c,_0x22269e){return _0x4a0f0c(_0x22269e);},'bfxAO':function(_0x245095){return _0x245095();},'RcpBN':_0x30df54(0x254)};let _0x54f694=0x0;return async()=>{const _0x19f75a=_0x30df54;_0x54f694++;if(_0x41ade5[_0x19f75a(0x17d)](_0x54f694,0x1)){helper[_0x19f75a(0x210)](this[_0x19f75a(0x253)])&&await this[_0x19f75a(0x21e)]();try{logger[_0x19f75a(0x24b)](_0x41ade5[_0x19f75a(0x16b)]),await TestHubHandler[_0x19f75a(0x197)](_0x54f694),await BrowserstackCLI[_0x19f75a(0x18a)]()[_0x19f75a(0x197)]('1');}catch(_0x11c6af){logger[_0x19f75a(0x24b)]('Error\x20in\x20sending\x20testhub\x20stop:\x20'+util[_0x19f75a(0x1c7)](_0x11c6af));}PerformanceTester['end'](PerformanceEvents[_0x19f75a(0x1a7)]);if(PerformanceTester['isEnabled']()){const {measures:_0x1889a3,errors:_0x3c450f}=await PerformanceTester['finalize'](),_0x218e40={};if(_0x1889a3&&_0x41ade5['FJiny'](_0x1889a3[_0x19f75a(0x1e8)],0x0)||_0x3c450f&&_0x41ade5['Updtm'](_0x3c450f['length'],0x0)){const _0x9d1129={};_0x9d1129['measures']=_0x1889a3,_0x9d1129[_0x19f75a(0x1a9)]=_0x3c450f,Object['assign'](_0x218e40,_0x9d1129);}try{const _0xcb2d2f=await helper['sendToEDS'](_0x218e40,this[_0x19f75a(0x195)]);logger[_0x19f75a(0x24b)](_0x19f75a(0x248)+_0x41ade5[_0x19f75a(0x1b5)](getEdsInstrumentationAPIUrl,'')+_0x19f75a(0x250)+_0xcb2d2f[_0x19f75a(0x271)]);}catch(_0x50b0f8){logger[_0x19f75a(0x24b)](_0x19f75a(0x172)+_0x41ade5[_0x19f75a(0x275)](getEdsInstrumentationAPIUrl,'')+'\x20with\x20error\x20'+util[_0x19f75a(0x1c7)](_0x50b0f8));}try{fs[_0x19f75a(0x20a)](path[_0x19f75a(0x16f)](_0x41ade5[_0x19f75a(0x192)](getLogDir),_0x41ade5[_0x19f75a(0x244)]),JSON[_0x19f75a(0x1e3)](_0x218e40));}catch(_0x23127f){logger[_0x19f75a(0x24b)]('Error\x20in\x20writing\x20events\x20to\x20file\x20'+_0x23127f);}}}logger&&logger[_0x19f75a(0x20b)](),fileLogger&&fileLogger[_0x19f75a(0x20b)]();};}}function a87_0x373d(){const _0x6d3901=['VjOCA','percy','OwjpN','bfxAO','getTurboScaleGridDetails','./logger','config','HDMOh','stop','setupKeepAlive','readConfig','getPackageVersion','getConfigPath','BuCMg','selfHeal','turboScaleGridDetails','npRyf','./performance/performance-tester','fOwRN','getProxyConfigForTcg','SIGHUP','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','proxyConfig','Local\x20binary\x20stopped','SDK_CLEANUP','skipBinaryInitialisation','exceptions','WBvLP','generateLocalIdentifier','Error\x20occured\x20while\x20stopping\x20percy','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','playwrightUrl','UAOlT','toString','getFinalCaps','No\x20config\x20provided.','BCZho','preInitialize','zSDaw','AUTOLOGCAPTURE_NOTIFICATION','asVhF','UnmjV','getAccessKey','turboScaleUrl','platforms','getHubUrl','message','UQZyI','stopPercy','compareVersions','hhxYv','8kSywfo','version','TCG_DOWN','isUndefined','../bin/utils/apiUtilityMethods','format','WrQEo','then','setEnvCaps','split','customRepeaters','env','eFDWa','userName\x20or\x20accessKey\x20is\x20not\x20defined','util','fhFaC','hubUrl','errorMessage','oQweL','../bin/v2/browserstackCLI','skipSessionName','isTrue','11493mjwQCS','YyIxl','5992HoyTtr','pfDCa','localIdentifier','cgrZC','url','setLogDir','jTJeJ','18VhhLWf','bNAUh','stringify','status','startLocalBinary','accessKey','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','length','dGXCt','setCLICaps','BROWSERSTACK_TURBOSCALE','IBjEb','isAuthenticated','SIGABRT','intExitHandler','iIUfl','HUB_MANAGEMENT','OByzQ','SLvyD','KoAUv','./performance/constants','WbDya','FtwRL','5tkZJBF','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','SIGINT','../../package.json','xCCDr','fileLogger','kSkFn','QelSV','killSignal','includes','info','sdkRunId','setupBrowserstackLocal','setHandlePWError','jTfbP','default','turboScaleOptions','exitHandler','writeFileSync','close','./testhub/testhubHandler','selenium-webdriver','winstonLogger','cliConfig','checkStopLocalBinaryOnExit','bfPUX','12kKaIhI','Percy\x20stopped','./timeoutPromise','9346315jbDQkM','BrowserstackHealing.init','./helper','browserstackLocal','1652644EyXQBb','getLocalConfig','custom-repeater','browserStackLocalOptions','BrowserstackHealingInitFailed','stopBrowserstackLocal','playwright','SDK\x20run\x20started\x20with\x20id:\x20','1|4|0|2|5|3','true','forceLocal','rKpVH','BBrgz','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','CJgEH','fErya','QIEUm','getLocalIdentifier','skipSessionStatus','platform','ScXwf','FRAMEWORK','fAsTr','TCG_URL','disableAutoCaptureLogs','central_scanner','setupTCGAuth','fZfVp','bind','tvPoC','lGIYg','./utilities','turboScale','TCG_AUTH_FAILURE','setLogLevel','useW3C','wfmLj','PJgXj','handled','constructor','userName','SIGQUIT','fireFunnelTestEvent','RcpBN','sanitizeCaps','CXdtJ','isBrowserstackInfra','Data\x20sent\x20successfully\x20to\x20','2342316CxOWvJ','INVALID_INIT_RESP_WITH_USER_IMPACT','debug','setupTcgConfigFile','isNotUndefined','313148jZZqio','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','\x20with\x20response\x20','cancel','error','framework','events.json','tWjwc','isHealingEnabled','setUpHubUrl','false','uncaughtException','aiHeal:tcgAuth','vtzOx','Lkohn','KHodw','envConfig','11168aloPGp','getUserName','Bmbpx','testContextOptions','normalizeTestReportingEnvVars','./testhub/utils','pdLTZ','beforeExit','stopLocalBinary','unhandledRejection','ivcrW','AdiRs','__isPlaywrightInstalled','Shutdown\x20triggered\x20by\x20','BROWSERSTACK_PERCY','startPercy','tEWtD','path','statusCode','aYXTH','SIGBREAK','?caps=','MBdFo','tcg\x20config\x20setup\x20successful.','push','warn','tcgAuthConfig','win32','measureWrapper','AqJcD','17|21|16|7|20|8|19|0|22|2|3|5|10|11|6|12|9|4|13|18|14|1|15','../bin/utils/constants','isTrialGrid','join','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','ats-repeater','Failed\x20to\x20send\x20data\x20to\x20','isTurboScaleSession','AI_INIT_FAILURE','ZspNU','JOBAq','setupPercy','./percy/utils','../ai-sdk-node/bundle','9041680mzFNSD','init','ZIjfX','NXCqB','captureError','isRunning','Error\x20in\x20percy\x20setup\x20','SDKTestAttempted','bstackConfig','4.5.0','TCG_AUTH_TIMEOUT','Lfopf','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','handleExceptions','race','Local\x20binary\x20started\x20successfully','getInstance','../hubAllocationMethods','requireSeleniumWebdriverCheck','setCredentialsFromYmlConfig','AI_INIT_SUCCESSFUL'];a87_0x373d=function(){return _0x6d3901;};return a87_0x373d();}exports[a87_0x191a9f(0x207)]=BrowserStackSetup;