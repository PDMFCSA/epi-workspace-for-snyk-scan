const a93_0x40addd=a93_0x18fd;(function(_0x4b6ac5,_0x27ad1e){const _0x46f716=a93_0x18fd,_0x152250=_0x4b6ac5();while(!![]){try{const _0x14b114=parseInt(_0x46f716(0x1f7))/0x1+parseInt(_0x46f716(0x20c))/0x2*(-parseInt(_0x46f716(0x1e1))/0x3)+-parseInt(_0x46f716(0x20e))/0x4+parseInt(_0x46f716(0x1ca))/0x5*(-parseInt(_0x46f716(0x1d2))/0x6)+-parseInt(_0x46f716(0x204))/0x7*(parseInt(_0x46f716(0x1f6))/0x8)+-parseInt(_0x46f716(0x201))/0x9*(-parseInt(_0x46f716(0x1de))/0xa)+parseInt(_0x46f716(0x222))/0xb;if(_0x14b114===_0x27ad1e)break;else _0x152250['push'](_0x152250['shift']());}catch(_0x2db95a){_0x152250['push'](_0x152250['shift']());}}}(a93_0x51aa,0x242de));function a93_0x18fd(_0x7d4510,_0x43c434){const _0x51aa2b=a93_0x51aa();return a93_0x18fd=function(_0x18fdb0,_0x1235c8){_0x18fdb0=_0x18fdb0-0x1a7;let _0x58cf28=_0x51aa2b[_0x18fdb0];return _0x58cf28;},a93_0x18fd(_0x7d4510,_0x43c434);}const os=require('os'),util=require('util'),{getProductMap}=require('./testhub/utils'),logger=require(a93_0x40addd(0x1fa))['winstonLogger'],constants=require('../bin/utils/constants'),testHubConstants=require(a93_0x40addd(0x1d8)),{getTransformPath}=require('../bin/playwright/reporter/pwUtils'),{FUNNEL_INSTRUMENTATION_API_URL}=require(a93_0x40addd(0x1fb)),{generateCIArtifacts,printNudgeLocalNotSetError}=require('./helper'),PerformanceTester=require('./performance/performance-tester'),globals=require(a93_0x40addd(0x1df)),{isTurboScaleSession}=require(a93_0x40addd(0x1d0)),helper=require(a93_0x40addd(0x206)),{isTestObservabilitySession}=require(a93_0x40addd(0x1c0));let unhandledErrors='';function a93_0x51aa(){const _0x238ebf=['replace','hostname','unknown','sdkRunId','split','sendLogs','killSignal','Error\x20while\x20parsing\x20tests\x20errors,\x20Exception:\x20','rpMku','event_properties','parse','nAiNN','./test-observability/utils','Firing\x20SDK\x20event\x20for\x20funnel\x20data:\x20','every','type','join','globalException','ZMuEr','push','getTurboScaleBuildLink','format','788885CvmohY','error','OMSvA','cBWMr','getTestFrameworkDetails','Error\x20in\x20getting\x20framework\x20version\x20to\x20:\x20','./ats/helper','[REDACTED]','6IRKgMM','isBrowserstackInfra','info','osVersion','getUserName','selenium-webdriver','../helpers/testhub/constants','content-type','yCvuQ','Kavzr','pNdYK','XwJrt','13190ZkNaHE','./globals','MeiTY','2292YTiCXN','vaGSG','forEach','Asebt','HlTjF','AUKmj','reduce','assign','SDKTestSuccessful','errorMessage','app','yxSMD','sBRCD','Something\x20went\x20wrong\x20in\x20Final\x20Execution\x20step\x20:\x20','notifyUpdate','FUNNEL_INSTRUMENTATION_API_URL','SDK\x20run\x20ended\x20for\x20id:\x20','BROWSERSTACK_TESTHUB_UUID','unhandledErrors','browserVersion','uaOVY','8WqphpT','214527fgpsWg','GnafD','null','./logger','../bin/utils/constants','getAccessKey','nohhy','sanitizeBrowserStackConfig','ehPpI','body','909aSySph','keys','finishedMetadata','896728vKDDmb','requirePWModule','./helper','nodejs','ZCjmH','version','nodeRequest','stringify','504aEDqEk','tests','87124SkZvtO','POST','tjTkh','buildName','source','seleniumVersion','length','name','APP_AUTOMATE_PRODUCTS','AUTOMATE','framework','Error\x20in\x20firing\x20request\x20to\x20','playwrightVersion','deviceName','browser','debug',',\x20testhub\x20id:\x20','all','config','apply','3306974oOrSNI','getSessionsList','whWph','browserStackConfig','LaSon','finalExecution','fireFunnelTestEvent','RsiYo','API\x20Event\x20','values','oCvPj','sCQlL','buildIdentifier','ACWLA','sdkRunID'];a93_0x51aa=function(){return _0x238ebf;};return a93_0x51aa();}exports[a93_0x40addd(0x1ab)]=async(_0x49e22c,_0x43a93a={},_0x5d00b4,_0x3cee0b)=>{const _0x198277=a93_0x40addd,_0x27b154={'AUKmj':function(_0x101abc,_0x41719c){return _0x101abc===_0x41719c;},'hrYnp':'object','EAFiW':function(_0x4f2832,_0x405553){return _0x4f2832>_0x405553;},'YQKrs':function(_0x4c7ef1,_0x470390){return _0x4c7ef1>_0x470390;},'XwJrt':_0x198277(0x20d),'ehPpI':function(_0xe53e7e){return _0xe53e7e();},'ACWLA':function(_0x4f498e){return _0x4f498e();},'fQIgE':function(_0x458d36,_0x4b0953){return _0x458d36==_0x4b0953;},'nAiNN':_0x198277(0x1f9),'uaOVY':function(_0x3c8f92,_0x27f437){return _0x3c8f92===_0x27f437;},'cBWMr':'undefined','tjTkh':function(_0x1ea206,_0x22ff75){return _0x1ea206>_0x22ff75;},'LqYGf':'codeceptjs','vaGSG':function(_0x1101e4,_0x4e5f2a){return _0x1101e4!==_0x4e5f2a;},'yCvuQ':'Playwright','GnafD':function(_0xd026ea,_0x4c5c4d){return _0xd026ea===_0x4c5c4d;},'yxSMD':_0x198277(0x1cb),'sBRCD':function(_0x5e2834,_0x27aa98){return _0x5e2834+_0x27aa98;},'whWph':_0x198277(0x1bb),'Kavzr':'_buildHashedId','JNEZC':function(_0x46682e,_0x2f8bbf){return _0x46682e(_0x2f8bbf);},'ZCjmH':function(_0x38dab8,_0x3c9da3){return _0x38dab8(_0x3c9da3);},'oCvPj':_0x198277(0x1b6),'LaSon':_0x198277(0x207),'Asebt':'SDKTestSuccessful','XzUCY':_0x198277(0x1d7),'sCQlL':'application/json','HlTjF':_0x198277(0x1d1),'ZvXOZ':_0x198277(0x20f)};let _0x1d9aec=[];if(helper['isBrowserstackInfra']()&&_0x27b154[_0x198277(0x1ff)](isTestObservabilitySession))_0x1d9aec=_0x5d00b4[_0x198277(0x1eb)]?constants[_0x198277(0x216)]:constants['AUTOMATE_PRODUCTS'];else{if(_0x27b154[_0x198277(0x1b2)](isTestObservabilitySession))_0x1d9aec=constants['PRODUCT_IF_NOT_BROWSERSTACK_INFRA'];else helper[_0x198277(0x1d3)]()&&(_0x1d9aec=_0x5d00b4[_0x198277(0x1eb)]?constants['APP_AUTOMATE']:constants[_0x198277(0x217)]);}let _0x5f83e8=_0x5d00b4[_0x198277(0x1b1)];if(_0x27b154['fQIgE'](_0x5f83e8,null))_0x5f83e8=_0x27b154[_0x198277(0x1bf)];else _0x27b154[_0x198277(0x1f5)](_0x5f83e8,undefined)&&(_0x5f83e8=_0x27b154[_0x198277(0x1cd)]);unhandledErrors&&_0x27b154[_0x198277(0x210)](unhandledErrors[_0x198277(0x214)],0x0)&&(_0x43a93a[_0x198277(0x1c5)]=unhandledErrors);global[_0x198277(0x1b3)]&&(_0x43a93a[_0x198277(0x1b7)]=global['sdkRunID']);try{if(_0x43a93a[_0x198277(0x1cb)]){if(_0x27b154[_0x198277(0x1f5)](_0x3cee0b,_0x27b154['LqYGf'])&&_0x27b154[_0x198277(0x210)](_0x43a93a[_0x198277(0x1cb)][_0x198277(0x214)],0x0)){const _0x47e885={};_0x47e885['os']='',_0x47e885[_0x198277(0x1d5)]='',_0x47e885[_0x198277(0x21c)]='',_0x47e885['browserVersion']='';const _0x516b13=_0x47e885;let _0x9cfaff={};const _0x49d0f5=_0x43a93a[_0x198277(0x1cb)];_0x9cfaff=_0x49d0f5[_0x198277(0x1e7)]((_0x6fe4a4,_0x1fb100)=>{for(const _0xce7c77 in _0x1fb100){_0x6fe4a4[_0xce7c77]=_0x1fb100[_0xce7c77];}return _0x6fe4a4;},{});const _0x1e2602={};_0x1e2602[_0x198277(0x20d)]=_0x9cfaff,_0x43a93a[_0x198277(0x1cb)]=[Object['assign']({},_0x516b13,_0x1e2602)];}else{let _0x40f9bd=0x0;const _0x80f61b=_0x27b154[_0x198277(0x1e2)](_0x3cee0b,_0x27b154[_0x198277(0x1da)])?JSON[_0x198277(0x1be)](_0x43a93a[_0x198277(0x1cb)]):_0x43a93a[_0x198277(0x1cb)],_0x1dc35c=Object[_0x198277(0x1ae)](_0x80f61b);_0x1dc35c[_0x198277(0x1e3)](_0xc1ca8a=>{const _0x346f9e=_0x198277;if(_0x27b154[_0x346f9e(0x1e6)](typeof _0xc1ca8a,_0x27b154['hrYnp'])){const _0x202549=Object[_0x346f9e(0x1ae)](_0xc1ca8a);!_0x202549[_0x346f9e(0x1c2)](_0x507659=>_0x507659===null||_0x507659===undefined||_0x507659==='')&&(_0x40f9bd+=0x1);}});if(_0x27b154['GnafD'](_0x40f9bd,0x0))delete _0x43a93a[_0x27b154[_0x198277(0x1ec)]];else{const _0x135751=[];Object[_0x198277(0x202)](_0x80f61b)['forEach'](_0x3b5b01=>{const _0x5cd32b=_0x198277,[_0x2667df,_0xa0fca,_0x3ca3aa,_0x2a4ef6]=_0x3b5b01[_0x5cd32b(0x1b8)](',\x20');let _0x35adbc={};if(!_0x2a4ef6){const _0x21a8e4={};_0x21a8e4[_0x5cd32b(0x21b)]=_0x2667df,_0x21a8e4['osVersion']=_0xa0fca,_0x21a8e4[_0x5cd32b(0x21c)]=_0x3ca3aa,_0x35adbc=_0x21a8e4;}else{const _0x10f3c3={};_0x10f3c3['os']=_0x2667df,_0x10f3c3[_0x5cd32b(0x1d5)]=_0xa0fca,_0x10f3c3['browser']=_0x3ca3aa,_0x10f3c3[_0x5cd32b(0x1f4)]=_0x2a4ef6,_0x35adbc=_0x10f3c3;}const _0x2159f2={},_0x5b60a9=_0x80f61b[_0x3b5b01];Object['keys'](_0x5b60a9)['forEach'](_0x2e3c9c=>{const _0x205ecc=_0x5cd32b;_0x27b154['EAFiW'](_0x5b60a9[_0x2e3c9c][_0x205ecc(0x214)],0x0)&&(_0x2159f2[_0x2e3c9c]=_0x5b60a9[_0x2e3c9c]);}),_0x27b154['YQKrs'](Object[_0x5cd32b(0x202)](_0x2159f2)[_0x5cd32b(0x214)],0x0)&&(_0x35adbc[_0x27b154[_0x5cd32b(0x1dd)]]=_0x2159f2,_0x135751[_0x5cd32b(0x1c7)](_0x35adbc));}),_0x27b154[_0x198277(0x210)](_0x135751['length'],0x0)?_0x43a93a[_0x198277(0x1cb)]=_0x135751:delete _0x43a93a[_0x27b154[_0x198277(0x1ec)]];}}}}catch(_0x23838a){delete _0x43a93a[_0x27b154[_0x198277(0x1ec)]],logger[_0x198277(0x21d)](_0x27b154[_0x198277(0x1ed)](_0x27b154[_0x198277(0x1a7)],_0x23838a));}const _0x1895d0=helper[_0x198277(0x1ce)](_0x5d00b4,_0x5d00b4['framework']),_0x1785e9={'userName':helper[_0x198277(0x1d6)](_0x5d00b4),'accessKey':helper['getAccessKey'](_0x5d00b4),'event_type':_0x49e22c,'detectedFramework':_0x3cee0b,'buildHashedId':globals['getGlobal'](_0x27b154[_0x198277(0x1db)]),'optimalHubUrl':helper['getOptimalHubUrl'](),'event_properties':{'testhub_uuid':process['env'][testHubConstants['ENV_VAR'][_0x198277(0x1f2)]]||'','sdkRunId':global['sdkRunID'],'product_map':_0x27b154['JNEZC'](getProductMap,_0x5d00b4),'productMap':_0x27b154[_0x198277(0x208)](getProductMap,_0x5d00b4),'language_framework':_0x5d00b4[_0x198277(0x212)]||_0x27b154[_0x198277(0x1af)],'referrer':helper['getNodeAgent'](_0x3cee0b),'framework':_0x5d00b4[_0x198277(0x218)],'frameworkVersion':helper['getFrameworkVersion'](_0x3cee0b),'automationFramework':_0x1895d0[_0x198277(0x215)],'automationFrameworkVersion':_0x1895d0[_0x198277(0x209)],'language':_0x27b154[_0x198277(0x1a9)],'languageVersion':process[_0x198277(0x209)],'product':_0x1d9aec,'buildName':_0x5d00b4[_0x198277(0x211)]||_0x27b154[_0x198277(0x1cd)],'buildIdentifier':_0x5f83e8,'os':os[_0x198277(0x1c3)]()||_0x27b154['oCvPj'],'hostname':os[_0x198277(0x1b5)]()||_0x27b154['oCvPj'],..._0x43a93a}};try{_0x27b154[_0x198277(0x1f8)](_0x49e22c,_0x27b154[_0x198277(0x1e4)])&&(_0x1785e9[_0x198277(0x1bd)][_0x198277(0x1a8)]=helper[_0x198277(0x1fe)](_0x5d00b4)),_0x27b154['uaOVY'](_0x3cee0b,_0x27b154['yCvuQ'])?_0x1785e9[_0x198277(0x1bd)][_0x198277(0x21a)]=helper[_0x198277(0x205)][_0x198277(0x221)](null,_0x27b154[_0x198277(0x1b2)](getTransformPath),!![]):_0x1785e9[_0x198277(0x1bd)][_0x198277(0x213)]=helper['getPackageVersion'](_0x27b154['XzUCY']);}catch(_0x4aa139){logger[_0x198277(0x21d)](_0x198277(0x1cf)+_0x4aa139);}const _0x4123da={};_0x4123da[_0x198277(0x1d9)]=_0x27b154[_0x198277(0x1b0)];const _0x1226c5={'headers':_0x4123da,'body':_0x1785e9,'auth':{'user':helper[_0x198277(0x1d6)](_0x5d00b4),'pass':helper[_0x198277(0x1fc)](_0x5d00b4)},'json':!![]};logger[_0x198277(0x21d)](_0x198277(0x1c1)+JSON[_0x198277(0x20b)](_0x1226c5[_0x198277(0x200)])[_0x198277(0x1b4)](new RegExp(helper[_0x198277(0x1d6)](_0x5d00b4),'g'),_0x27b154[_0x198277(0x1e5)])[_0x198277(0x1b4)](new RegExp(helper[_0x198277(0x1fc)](_0x5d00b4),'g'),_0x27b154[_0x198277(0x1e5)]));try{const _0x210854=await helper[_0x198277(0x20a)](_0x27b154['ZvXOZ'],constants[_0x198277(0x1f0)],_0x1226c5,_0x5d00b4);logger['debug'](_0x198277(0x1ad)+_0x49e22c+'\x20response\x20-\x20'+util[_0x198277(0x1c9)]('%j',_0x210854));}catch(_0x14f508){logger[_0x198277(0x21d)](_0x198277(0x219)+FUNNEL_INSTRUMENTATION_API_URL+'\x20:\x20'+util[_0x198277(0x1c9)](_0x14f508));}},exports[a93_0x40addd(0x1aa)]=async _0x1f3ae3=>{const _0x46ee2a=a93_0x40addd,_0x4ec609={'ZMuEr':function(_0x356f6f){return _0x356f6f();},'OMSvA':_0x46ee2a(0x203),'rpMku':'user_killed','pNdYK':function(_0x5c1571,_0x2e2f00){return _0x5c1571(_0x2e2f00);},'MeiTY':_0x46ee2a(0x1e9),'bGoQM':function(_0x1d5640,_0x1560cc,_0x47518a){return _0x1d5640(_0x1560cc,_0x47518a);},'nohhy':function(_0x16e5e6,_0x3fa38b){return _0x16e5e6+_0x3fa38b;},'RsiYo':_0x46ee2a(0x1ee)};try{await _0x1f3ae3['stopPercy'](),_0x4ec609[_0x46ee2a(0x1c6)](printNudgeLocalNotSetError);const _0x43b018={};_0x43b018[_0x46ee2a(0x1cb)]=_0x1f3ae3['errorMessage']?_0x1f3ae3[_0x46ee2a(0x1ea)]:'{}';const _0x44b8ec=_0x43b018,_0x1e0b7c=Object[_0x46ee2a(0x1e8)]({},_0x44b8ec);!!_0x1f3ae3[_0x46ee2a(0x1ba)]&&(_0x1e0b7c[_0x4ec609[_0x46ee2a(0x1cc)]]={'reason':_0x4ec609[_0x46ee2a(0x1bc)],'signal':_0x1f3ae3['killSignal']});unhandledErrors=_0x1f3ae3[_0x46ee2a(0x1f3)][_0x46ee2a(0x1c4)]('\x0a');let _0x1e9398,_0xb66f6d,_0xa01eff;_0x4ec609[_0x46ee2a(0x1dc)](isTurboScaleSession,_0x1f3ae3[_0x46ee2a(0x220)])?([_0x1e9398,_0xb66f6d]=await helper[_0x46ee2a(0x1c8)](_0x1f3ae3[_0x46ee2a(0x220)]),[_0xa01eff]=await Promise[_0x46ee2a(0x21f)]([helper['getTurboScaleSessionsList'](_0x1e9398,_0x1f3ae3[_0x46ee2a(0x220)]),exports[_0x46ee2a(0x1ab)](_0x4ec609[_0x46ee2a(0x1e0)],_0x1e0b7c,_0x1f3ae3[_0x46ee2a(0x220)],_0x1f3ae3[_0x46ee2a(0x218)])])):([_0x1e9398,_0xb66f6d]=await helper['getBuildLink'](_0x1f3ae3[_0x46ee2a(0x220)]),[_0xa01eff]=await Promise[_0x46ee2a(0x21f)]([helper[_0x46ee2a(0x223)](_0x1e9398,_0x1f3ae3[_0x46ee2a(0x220)]),exports['fireFunnelTestEvent'](_0x4ec609[_0x46ee2a(0x1e0)],_0x1e0b7c,_0x1f3ae3['config'],_0x1f3ae3[_0x46ee2a(0x218)])])),_0xa01eff&&await _0x4ec609['bGoQM'](generateCIArtifacts,_0xa01eff,_0xb66f6d),logger[_0x46ee2a(0x1d4)](_0x46ee2a(0x1f1)+_0x1f3ae3[_0x46ee2a(0x1b3)]+_0x46ee2a(0x21e)+process['env'][_0x46ee2a(0x1f2)]),await helper[_0x46ee2a(0x1b9)](_0x1f3ae3['config']);}catch(_0x54a3be){logger[_0x46ee2a(0x21d)](_0x4ec609[_0x46ee2a(0x1fd)](_0x4ec609[_0x46ee2a(0x1ac)],_0x54a3be));}helper[_0x46ee2a(0x1ef)]();};