const a129_0x224d5c=a129_0x26e0;function a129_0x26e0(_0x3880fa,_0x2e8360){const _0x26ec32=a129_0x26ec();return a129_0x26e0=function(_0x26e0c2,_0x10b940){_0x26e0c2=_0x26e0c2-0xe8;let _0x208328=_0x26ec32[_0x26e0c2];return _0x208328;},a129_0x26e0(_0x3880fa,_0x2e8360);}(function(_0x3e3ea5,_0x4a646e){const _0x314d9b=a129_0x26e0,_0x31f03e=_0x3e3ea5();while(!![]){try{const _0x73b14b=parseInt(_0x314d9b(0x156))/0x1+parseInt(_0x314d9b(0x102))/0x2+parseInt(_0x314d9b(0x13a))/0x3+-parseInt(_0x314d9b(0x10b))/0x4*(-parseInt(_0x314d9b(0x16a))/0x5)+parseInt(_0x314d9b(0xfc))/0x6*(parseInt(_0x314d9b(0x132))/0x7)+parseInt(_0x314d9b(0x114))/0x8+-parseInt(_0x314d9b(0x11b))/0x9*(parseInt(_0x314d9b(0x14e))/0xa);if(_0x73b14b===_0x4a646e)break;else _0x31f03e['push'](_0x31f03e['shift']());}catch(_0x126904){_0x31f03e['push'](_0x31f03e['shift']());}}}(a129_0x26ec,0x25fdf));const os=require('os'),util=require(a129_0x224d5c(0x11e)),fs=require('fs'),{getProductMap}=require(a129_0x224d5c(0x126)),logger=require(a129_0x224d5c(0xee))['winstonLogger'],constants=require(a129_0x224d5c(0x141)),testHubConstants=require(a129_0x224d5c(0x11f)),{getTransformPath}=require('../bin/playwright/reporter/pwUtils'),{FUNNEL_INSTRUMENTATION_API_URL}=require(a129_0x224d5c(0x141)),{generateCIArtifacts,printNudgeLocalNotSetError}=require(a129_0x224d5c(0xf8)),PerformanceTester=require('./performance/performance-tester'),globals=require('./globals'),helper=require(a129_0x224d5c(0xf8)),{isTestObservabilitySession}=require('./test-observability/utils');function a129_0x26ec(){const _0x5117c1=['seleniumVersion','browser','wRXND','Error\x20while\x20parsing\x20tests\x20errors,\x20Exception:\x20','name','../bin/utils/constants','BTuxM','assign','trim','getSessionsList','error','all','getUserName','version','\x20has\x20now\x20read/write/execute\x20permissions.','QRdQj','AUTOMATE_PRODUCTS','cedVb','1850slBRwY','app','type','yXdvQ','requirePWModule','codeceptjs','tests','buildIdentifier','171459yxqXmy','Playwright','stack','rTJDA','zwpMg','isNullOrEmpty','browserVersion','info','getBuildLink','nodejs','getOptimalHubUrl','gzIcf','EJQkh','QLGnC','every',',\x20testhub\x20id:\x20','keys','PRODUCT_IF_NOT_BROWSERSTACK_INFRA','sdkRunId','IefnC','641930qeVBhB','nodeRequest','hRVCu','qsUHx','X_OK','toString','env','Something\x20went\x20wrong\x20in\x20Final\x20Execution\x20step\x20:\x20','JWZsv','isModifiable','POST','event_properties','user_killed','./logger','constants','notifyUpdate','Failed\x20to\x20set\x20directory\x20access:\x20','osVersion','format','W_OK','mITRk','VqvCl','getNodeAgent','./helper','split','Error\x20in\x20getting\x20framework\x20version\x20to\x20:\x20','sendLogs','288IVZpkB','Firing\x20SDK\x20event\x20for\x20funnel\x20data:\x20','getTurboScaleSessionsList','framework','xkRTm','config','603604dogENV','jDdSn','deviceName','UBDsj','globalException','KZyYo','stringify','SDKTestSuccessful','SDK\x20run\x20ended\x20for\x20id:\x20','8MOqyZu','browserStackConfig','buildName','LhTvM','BwfvY','content-type','null','Error\x20in\x20firing\x20request\x20to\x20','isBrowserstackInfra','295064kmBVVc','dMicr','sanitizeBrowserStackConfig','body','replace','length','getTestFrameworkDetails','39573YRcXxv','getTurboScaleBuildLink','object','util','../helpers/testhub/constants','accessSync','debug','reduce','YMbOB','ADwbd','[REDACTED]','./testhub/utils','chmodSync','getAccessKey','rCzpe','APP_AUTOMATE_PRODUCTS','vVEXL','tcFHo','KhxTa','application/json','errorMessage','\x20:\x20','values','23982sNyGeM','killSignal','APP_AUTOMATE','forEach','playwrightVersion','BROWSERSTACK_TESTHUB_UUID','getStackTraceAsString','push','113088dLpXUf','AUTOMATE'];a129_0x26ec=function(){return _0x5117c1;};return a129_0x26ec();}let unhandledErrors='';exports['fireFunnelTestEvent']=async(_0x592c51,_0x2fd8d4={},_0x57512d,_0x3a317c)=>{const _0x4be46a=a129_0x224d5c,_0x56fad9={'YyhOh':function(_0x3a32af,_0x5803a6){return _0x3a32af===_0x5803a6;},'BTuxM':_0x4be46a(0x11d),'rTJDA':function(_0x35f535,_0x47ed89){return _0x35f535>_0x47ed89;},'gzIcf':_0x4be46a(0x154),'zwpMg':function(_0x570c37){return _0x570c37();},'dUzve':function(_0x518ed8,_0x5e12ea){return _0x518ed8==_0x5e12ea;},'lNpXp':_0x4be46a(0x111),'hRVCu':function(_0x494170,_0x275c31){return _0x494170===_0x275c31;},'KhxTa':'undefined','qsUHx':function(_0x9ae73e,_0x58ea10){return _0x9ae73e>_0x58ea10;},'jDdSn':_0x4be46a(0x153),'znfML':function(_0x3e00df,_0x25aa28){return _0x3e00df>_0x25aa28;},'ZvmNx':function(_0x53dd75,_0x5b663e){return _0x53dd75!==_0x5b663e;},'BwfvY':_0x4be46a(0x157),'EJQkh':function(_0x502dc0,_0x1d5fd2){return _0x502dc0===_0x1d5fd2;},'ADwbd':'error','YMbOB':function(_0x1ba070,_0xf9e73a){return _0x1ba070>_0xf9e73a;},'PWmAQ':function(_0x31177a,_0xc0a1ed){return _0x31177a+_0xc0a1ed;},'rCzpe':_0x4be46a(0x13f),'IefnC':'_buildHashedId','gDLIE':function(_0x310011,_0x21a54b){return _0x310011(_0x21a54b);},'KZyYo':'unknown','nIZXQ':_0x4be46a(0x15f),'QRdQj':_0x4be46a(0x109),'eRxGO':function(_0x3d161a,_0x1e36c4){return _0x3d161a===_0x1e36c4;},'vVEXL':function(_0x545af9){return _0x545af9();},'xkRTm':'selenium-webdriver','soNYc':_0x4be46a(0x12e),'dMicr':_0x4be46a(0x125),'qGsxd':_0x4be46a(0xeb)};let _0x460a66=[];if(helper[_0x4be46a(0x113)]()&&_0x56fad9[_0x4be46a(0x15a)](isTestObservabilitySession))_0x460a66=_0x57512d[_0x4be46a(0x14f)]?constants[_0x4be46a(0x12a)]:constants[_0x4be46a(0x14c)];else{if(_0x56fad9['zwpMg'](isTestObservabilitySession))_0x460a66=constants[_0x4be46a(0x167)];else helper[_0x4be46a(0x113)]()&&(_0x460a66=_0x57512d[_0x4be46a(0x14f)]?constants[_0x4be46a(0x134)]:constants[_0x4be46a(0x13b)]);}let _0x4aeed1=_0x57512d[_0x4be46a(0x155)];if(_0x56fad9['dUzve'](_0x4aeed1,null))_0x4aeed1=_0x56fad9['lNpXp'];else _0x56fad9[_0x4be46a(0x16c)](_0x4aeed1,undefined)&&(_0x4aeed1=_0x56fad9[_0x4be46a(0x12d)]);unhandledErrors&&_0x56fad9[_0x4be46a(0x16d)](unhandledErrors[_0x4be46a(0x119)],0x0)&&(_0x2fd8d4[_0x4be46a(0x106)]=unhandledErrors);global[_0x4be46a(0x168)]&&(_0x2fd8d4[_0x4be46a(0x168)]=global[_0x4be46a(0x168)]);try{if(_0x2fd8d4[_0x4be46a(0x146)]){if(_0x56fad9[_0x4be46a(0x16c)](_0x3a317c,_0x56fad9[_0x4be46a(0x103)])&&_0x56fad9['znfML'](_0x2fd8d4[_0x4be46a(0x146)][_0x4be46a(0x119)],0x0)){const _0xdd83a6={};_0xdd83a6['os']='',_0xdd83a6['osVersion']='',_0xdd83a6['browser']='',_0xdd83a6[_0x4be46a(0x15c)]='';const _0x1e5d84=_0xdd83a6;let _0x511efe={};const _0x4ad14c=_0x2fd8d4[_0x4be46a(0x146)];_0x511efe=_0x4ad14c[_0x4be46a(0x122)]((_0x1d5a14,_0x8ce4b4)=>{for(const _0x25c6df in _0x8ce4b4){_0x1d5a14[_0x25c6df]=_0x8ce4b4[_0x25c6df];}return _0x1d5a14;},{});const _0x41c106={};_0x41c106[_0x4be46a(0x154)]=_0x511efe,_0x2fd8d4[_0x4be46a(0x146)]=[Object[_0x4be46a(0x143)]({},_0x1e5d84,_0x41c106)];}else{let _0x54bb61=0x0;const _0xf8ffa7=_0x56fad9['ZvmNx'](_0x3a317c,_0x56fad9[_0x4be46a(0x10f)])?JSON['parse'](_0x2fd8d4[_0x4be46a(0x146)]):_0x2fd8d4[_0x4be46a(0x146)],_0x23abde=Object[_0x4be46a(0x131)](_0xf8ffa7);_0x23abde[_0x4be46a(0x135)](_0x155982=>{const _0x198c90=_0x4be46a;if(_0x56fad9['YyhOh'](typeof _0x155982,_0x56fad9[_0x198c90(0x142)])){const _0x5b31d4=Object[_0x198c90(0x131)](_0x155982);!_0x5b31d4[_0x198c90(0x164)](_0x162b20=>_0x162b20===null||_0x162b20===undefined||_0x162b20==='')&&(_0x54bb61+=0x1);}});if(_0x56fad9[_0x4be46a(0x162)](_0x54bb61,0x0))delete _0x2fd8d4[_0x56fad9[_0x4be46a(0x124)]];else{const _0x22774e=[];Object[_0x4be46a(0x166)](_0xf8ffa7)[_0x4be46a(0x135)](_0x5477f1=>{const _0x31e9d9=_0x4be46a,[_0x3ae8a9,_0x1b4b05,_0x43c553,_0xf3b74e]=_0x5477f1[_0x31e9d9(0xf9)](',\x20');let _0x57e15d={};if(!_0xf3b74e){const _0x43ed74={};_0x43ed74[_0x31e9d9(0x104)]=_0x3ae8a9,_0x43ed74[_0x31e9d9(0xf2)]=_0x1b4b05,_0x43ed74[_0x31e9d9(0x13d)]=_0x43c553,_0x57e15d=_0x43ed74;}else{const _0x2b5042={};_0x2b5042['os']=_0x3ae8a9,_0x2b5042[_0x31e9d9(0xf2)]=_0x1b4b05,_0x2b5042[_0x31e9d9(0x13d)]=_0x43c553,_0x2b5042['browserVersion']=_0xf3b74e,_0x57e15d=_0x2b5042;}const _0x36c21c={},_0x22fe74=_0xf8ffa7[_0x5477f1];Object['keys'](_0x22fe74)['forEach'](_0x346ee4=>{const _0x193421=_0x31e9d9;_0x56fad9[_0x193421(0x159)](_0x22fe74[_0x346ee4][_0x193421(0x119)],0x0)&&(_0x36c21c[_0x346ee4]=_0x22fe74[_0x346ee4]);}),_0x56fad9['rTJDA'](Object[_0x31e9d9(0x166)](_0x36c21c)[_0x31e9d9(0x119)],0x0)&&(_0x57e15d[_0x56fad9[_0x31e9d9(0x161)]]=_0x36c21c,_0x22774e[_0x31e9d9(0x139)](_0x57e15d));}),_0x56fad9[_0x4be46a(0x123)](_0x22774e[_0x4be46a(0x119)],0x0)?_0x2fd8d4['error']=_0x22774e:delete _0x2fd8d4[_0x56fad9[_0x4be46a(0x124)]];}}}}catch(_0x31b38f){delete _0x2fd8d4[_0x56fad9['ADwbd']],logger[_0x4be46a(0x121)](_0x56fad9['PWmAQ'](_0x56fad9[_0x4be46a(0x129)],_0x31b38f));}const _0x59f6f7=helper[_0x4be46a(0x11a)](_0x57512d,_0x57512d['framework']),_0x1cefea={'userName':helper[_0x4be46a(0x148)](_0x57512d),'accessKey':helper['getAccessKey'](_0x57512d),'event_type':_0x592c51,'detectedFramework':_0x3a317c,'buildHashedId':globals['getGlobal'](_0x56fad9[_0x4be46a(0x169)]),'optimalHubUrl':helper[_0x4be46a(0x160)](),'event_properties':{'testhub_uuid':process[_0x4be46a(0x170)][testHubConstants['ENV_VAR'][_0x4be46a(0x137)]]||'','sdkRunId':global['sdkRunId'],'product_map':_0x56fad9['gDLIE'](getProductMap,_0x57512d),'productMap':_0x56fad9['gDLIE'](getProductMap,_0x57512d),'language_framework':_0x57512d['source']||_0x56fad9[_0x4be46a(0x107)],'referrer':helper[_0x4be46a(0xf7)](_0x3a317c),'framework':_0x57512d[_0x4be46a(0xff)],'frameworkVersion':helper['getFrameworkVersion'](_0x3a317c),'automationFramework':_0x59f6f7[_0x4be46a(0x140)],'automationFrameworkVersion':_0x59f6f7[_0x4be46a(0x149)],'language':_0x56fad9['nIZXQ'],'languageVersion':process['version'],'product':_0x460a66,'buildName':_0x57512d[_0x4be46a(0x10d)]||_0x56fad9['KhxTa'],'buildIdentifier':_0x4aeed1,'os':os[_0x4be46a(0x150)]()||_0x56fad9[_0x4be46a(0x107)],'hostname':os['hostname']()||_0x56fad9[_0x4be46a(0x107)],..._0x2fd8d4}};try{_0x56fad9[_0x4be46a(0x162)](_0x592c51,_0x56fad9[_0x4be46a(0x14b)])&&(_0x1cefea['event_properties'][_0x4be46a(0x10c)]=helper[_0x4be46a(0x116)](_0x57512d)),_0x56fad9['eRxGO'](_0x3a317c,_0x56fad9[_0x4be46a(0x10f)])?_0x1cefea[_0x4be46a(0xec)][_0x4be46a(0x136)]=helper[_0x4be46a(0x152)]['apply'](null,_0x56fad9[_0x4be46a(0x12b)](getTransformPath),!![]):_0x1cefea[_0x4be46a(0xec)][_0x4be46a(0x13c)]=helper['getPackageVersion'](_0x56fad9[_0x4be46a(0x100)]);}catch(_0x5e0774){logger[_0x4be46a(0x121)](_0x4be46a(0xfa)+_0x5e0774);}const _0x4c1b0d={};_0x4c1b0d[_0x4be46a(0x110)]=_0x56fad9['soNYc'];const _0x2baaff={'headers':_0x4c1b0d,'body':_0x1cefea,'auth':{'user':helper['getUserName'](_0x57512d),'pass':helper['getAccessKey'](_0x57512d)},'json':!![]};logger[_0x4be46a(0x121)](_0x4be46a(0xfd)+JSON[_0x4be46a(0x108)](_0x2baaff[_0x4be46a(0x117)])['replace'](new RegExp(helper[_0x4be46a(0x148)](_0x57512d),'g'),_0x56fad9['dMicr'])[_0x4be46a(0x118)](new RegExp(helper[_0x4be46a(0x128)](_0x57512d),'g'),_0x56fad9[_0x4be46a(0x115)]));try{const _0x4cddf3=await helper[_0x4be46a(0x16b)](_0x56fad9['qGsxd'],constants['FUNNEL_INSTRUMENTATION_API_URL'],_0x2baaff,_0x57512d);logger[_0x4be46a(0x121)]('API\x20Event\x20'+_0x592c51+'\x20response\x20-\x20'+util[_0x4be46a(0xf3)]('%j',_0x4cddf3));}catch(_0x1e34de){logger['debug'](_0x4be46a(0x112)+FUNNEL_INSTRUMENTATION_API_URL+_0x4be46a(0x130)+util[_0x4be46a(0xf3)](_0x1e34de));}},exports['finalExecution']=async _0x2d28fb=>{const _0x44a609=a129_0x224d5c,_0x4ee71b={'QLGnC':function(_0x4b7313){return _0x4b7313();},'mITRk':'finishedMetadata','JWZsv':_0x44a609(0xed),'yXdvQ':_0x44a609(0x109),'cedVb':function(_0x3f0f7c,_0x5e8b27,_0x48d6d1){return _0x3f0f7c(_0x5e8b27,_0x48d6d1);},'tcFHo':function(_0x6ff6c,_0x4d28b9){return _0x6ff6c+_0x4d28b9;},'CqZGP':_0x44a609(0xe8)};try{await _0x2d28fb['stopPercy'](),_0x4ee71b[_0x44a609(0x163)](printNudgeLocalNotSetError);const _0x4d3ace={};_0x4d3ace[_0x44a609(0x146)]=_0x2d28fb[_0x44a609(0x12f)]?_0x2d28fb[_0x44a609(0x12f)]:'{}';const _0x5c4b05=_0x4d3ace,_0x26a3fa=Object[_0x44a609(0x143)]({},_0x5c4b05);!!_0x2d28fb[_0x44a609(0x133)]&&(_0x26a3fa[_0x4ee71b[_0x44a609(0xf5)]]={'reason':_0x4ee71b[_0x44a609(0xe9)],'signal':_0x2d28fb[_0x44a609(0x133)]});unhandledErrors=_0x2d28fb['unhandledErrors']['join']('\x0a');let _0x1321c2,_0x4d3f6c,_0x250ee2;helper['isTurboScaleSession'](_0x2d28fb['config'])?([_0x1321c2,_0x4d3f6c]=await helper[_0x44a609(0x11c)](_0x2d28fb[_0x44a609(0x101)]),[_0x250ee2]=await Promise[_0x44a609(0x147)]([helper[_0x44a609(0xfe)](_0x1321c2,_0x2d28fb[_0x44a609(0x101)]),exports['fireFunnelTestEvent'](_0x4ee71b[_0x44a609(0x151)],_0x26a3fa,_0x2d28fb[_0x44a609(0x101)],_0x2d28fb[_0x44a609(0xff)])])):([_0x1321c2,_0x4d3f6c]=await helper[_0x44a609(0x15e)](_0x2d28fb['config']),[_0x250ee2]=await Promise['all']([helper[_0x44a609(0x145)](_0x1321c2,_0x2d28fb['config']),exports['fireFunnelTestEvent'](_0x4ee71b[_0x44a609(0x151)],_0x26a3fa,_0x2d28fb['config'],_0x2d28fb[_0x44a609(0xff)])])),_0x250ee2&&await _0x4ee71b[_0x44a609(0x14d)](generateCIArtifacts,_0x250ee2,_0x4d3f6c),logger[_0x44a609(0x15d)](_0x44a609(0x10a)+_0x2d28fb[_0x44a609(0x168)]+_0x44a609(0x165)+process[_0x44a609(0x170)][_0x44a609(0x137)]),await helper[_0x44a609(0xfb)](_0x2d28fb['config']);}catch(_0x50036a){logger['debug'](_0x4ee71b[_0x44a609(0x12c)](_0x4ee71b['CqZGP'],_0x50036a));}helper[_0x44a609(0xf0)]();},exports[a129_0x224d5c(0x138)]=_0x5885de=>{const _0xa5f0c2=a129_0x224d5c,_0x3ca06f={'UBDsj':function(_0xa1fb73,_0x465c69){return _0xa1fb73 instanceof _0x465c69;},'wRXND':function(_0x18e4a3,_0x4945e4){return _0x18e4a3(_0x4945e4);}};try{if(_0x3ca06f[_0xa5f0c2(0x105)](_0x5885de,Error))return _0x5885de[_0xa5f0c2(0x158)]||_0x5885de[_0xa5f0c2(0x16f)]();return _0x3ca06f[_0xa5f0c2(0x13e)](String,_0x5885de);}catch(_0x57ed30){return _0x5885de?_0x5885de[_0xa5f0c2(0x16f)]():'';}},exports[a129_0x224d5c(0x15b)]=_0x210aeb=>{const _0x3bd426=a129_0x224d5c,_0x419d70={};_0x419d70[_0x3bd426(0xf6)]=function(_0x5a9078,_0x547b54){return _0x5a9078===_0x547b54;};const _0x3277f2=_0x419d70;return!_0x210aeb||_0x3277f2['VqvCl'](_0x210aeb[_0x3bd426(0x144)](),'');},exports[a129_0x224d5c(0xea)]=_0x155155=>{const _0x1bb227=a129_0x224d5c,_0x2154ee={};_0x2154ee['LhTvM']=function(_0x35cd7b,_0x183ef4){return _0x35cd7b|_0x183ef4;};const _0x5a8a9a=_0x2154ee;try{return fs[_0x1bb227(0x120)](_0x155155,_0x5a8a9a[_0x1bb227(0x10e)](fs[_0x1bb227(0xef)][_0x1bb227(0xf4)],fs[_0x1bb227(0xef)][_0x1bb227(0x16e)])),!![];}catch(_0x396df5){return![];}},exports['setReadWriteExecuteAccess']=_0x48f5b4=>{const _0x179abe=a129_0x224d5c;try{fs[_0x179abe(0x127)](_0x48f5b4,0x1ff),logger[_0x179abe(0x121)]('Directory\x20'+_0x48f5b4+_0x179abe(0x14a));}catch(_0x336d43){logger[_0x179abe(0x146)](_0x179abe(0xf1)+exports[_0x179abe(0x138)](_0x336d43));}};