const a93_0xe22eef=a93_0x5c90;function a93_0x5c90(_0x4c46a3,_0x2ec97e){const _0x567f96=a93_0x567f();return a93_0x5c90=function(_0x5c9020,_0x347dd0){_0x5c9020=_0x5c9020-0xf5;let _0x394a07=_0x567f96[_0x5c9020];return _0x394a07;},a93_0x5c90(_0x4c46a3,_0x2ec97e);}(function(_0x623ac5,_0x2ab2c1){const _0x167d82=a93_0x5c90,_0x82e582=_0x623ac5();while(!![]){try{const _0x1ac77f=parseInt(_0x167d82(0x105))/0x1*(parseInt(_0x167d82(0x108))/0x2)+-parseInt(_0x167d82(0xfe))/0x3+-parseInt(_0x167d82(0x123))/0x4+parseInt(_0x167d82(0xfb))/0x5*(-parseInt(_0x167d82(0x158))/0x6)+parseInt(_0x167d82(0x118))/0x7*(-parseInt(_0x167d82(0x147))/0x8)+parseInt(_0x167d82(0x10d))/0x9+-parseInt(_0x167d82(0x128))/0xa*(-parseInt(_0x167d82(0x144))/0xb);if(_0x1ac77f===_0x2ab2c1)break;else _0x82e582['push'](_0x82e582['shift']());}catch(_0x4ede4e){_0x82e582['push'](_0x82e582['shift']());}}}(a93_0x567f,0x20ade));function a93_0x567f(){const _0x3ecb8b=['reduce','./testhub/utils','hekMK','getUserName','split','_buildHashedId','53382IZJymB','PRODUCT_IF_NOT_BROWSERSTACK_INFRA','SDKTestSuccessful','type','join','sendLogs','API\x20Event\x20','push','getAccessKey','./logger','winstonLogger','801380RIHqnx','errorMessage','fobRh','KtiIF','sdkRunID','20120HHNwWl','nodejs','browser','framework','buildName','MOhgS','[REDACTED]','seleniumVersion','ENV_VAR','AUTOMATE_PRODUCTS','getSessionsList','forEach','VcFPf','Something\x20went\x20wrong\x20in\x20Final\x20Execution\x20step\x20:\x20','finalExecution','getFrameworkVersion','BROWSERSTACK_TESTHUB_UUID','user_killed','kvMAv',',\x20testhub\x20id:\x20','kfSPv','replace','name','values','QftCb','./helper','rCjRB','../bin/utils/constants','1507dEhQgO','browserVersion','getGlobal','232tSMoyr','getNodeAgent','hostname','stopPercy','dQSgA','dcvpD','killSignal','./test-observability/utils','JUJLC','ZpbuJ','config','keys','lUFqf','length','FUNNEL_INSTRUMENTATION_API_URL','AUTOMATE','\x20:\x20','102oXuPTf','SDK\x20run\x20ended\x20for\x20id:\x20','isBrowserstackInfra','AtqiR','iuKUy','stringify','notifyUpdate','selenium-webdriver','object','info','tests','sanitizeBrowserStackConfig','all','null','Playwright','apply','\x20response\x20-\x20','source','env','hXwIM','fireFunnelTestEvent','unhandledErrors','getBuildLink','NXdCv','../helpers/testhub/constants','EWeMP','every','APP_AUTOMATE_PRODUCTS','content-type','Zyspg','version','kSuBC','./globals','bivaP','APP_AUTOMATE','LnVCp','application/json','pPtWS','./performance/performance-tester','getOptimalHubUrl','./ats/helper','HhBOQ','VjeiC','qoAoX','getTurboScaleBuildLink','HjRBa','8435zdZMMn','debug','undefined','284721cnABzl','error','codeceptjs','Error\x20while\x20parsing\x20tests\x20errors,\x20Exception:\x20','util','assign','POST','1gtadOy','playwrightVersion','globalException','492226bQhNMU','RSYLx','sdkRunId','getTestFrameworkDetails','event_properties','1414638pNOJmm','getTurboScaleSessionsList','osVersion','format','XrDAx'];a93_0x567f=function(){return _0x3ecb8b;};return a93_0x567f();}const os=require('os'),util=require(a93_0xe22eef(0x102)),{getProductMap}=require(a93_0xe22eef(0x113)),logger=require(a93_0xe22eef(0x121))[a93_0xe22eef(0x122)],constants=require('../bin/utils/constants'),testHubConstants=require(a93_0xe22eef(0x170)),{getTransformPath}=require('../bin/playwright/reporter/pwUtils'),{FUNNEL_INSTRUMENTATION_API_URL}=require(a93_0xe22eef(0x143)),{generateCIArtifacts,printNudgeLocalNotSetError}=require(a93_0xe22eef(0x141)),PerformanceTester=require(a93_0xe22eef(0x17e)),globals=require(a93_0xe22eef(0x178)),{isTurboScaleSession}=require(a93_0xe22eef(0xf5)),helper=require(a93_0xe22eef(0x141)),{isTestObservabilitySession}=require(a93_0xe22eef(0x14e));let unhandledErrors='';exports['fireFunnelTestEvent']=async(_0x400b2c,_0x4c7a39={},_0x5d2903,_0x4af02a)=>{const _0x403537=a93_0xe22eef,_0x2cfa50={'VcFPf':function(_0x4d05d8,_0xb73d23){return _0x4d05d8===_0xb73d23;},'iuKUy':_0x403537(0x160),'qoAoX':function(_0x2c7e9a,_0x43362d){return _0x2c7e9a>_0x43362d;},'LnVCp':function(_0x425d04,_0x2a44e1){return _0x425d04>_0x2a44e1;},'PJbTG':_0x403537(0x162),'HjRBa':function(_0x28ee36){return _0x28ee36();},'dcvpD':function(_0x3bfe88,_0x24cde8){return _0x3bfe88==_0x24cde8;},'lUFqf':_0x403537(0x165),'Zyspg':function(_0xc77b24,_0xbee6fd){return _0xc77b24===_0xbee6fd;},'bivaP':_0x403537(0xfd),'fobRh':_0x403537(0x100),'pGGLY':function(_0x57e700,_0x514f4d){return _0x57e700!==_0x514f4d;},'kfSPv':_0x403537(0x166),'NXdCv':function(_0x4c3aaa,_0x34410a){return _0x4c3aaa===_0x34410a;},'RSYLx':_0x403537(0xff),'pPtWS':function(_0x540346,_0x5a0ef5){return _0x540346+_0x5a0ef5;},'UPuKe':_0x403537(0x101),'EWeMP':_0x403537(0x117),'MOhgS':function(_0x34599e,_0x2ad1af){return _0x34599e(_0x2ad1af);},'ZpbuJ':function(_0x373f8d,_0x4f0d82){return _0x373f8d(_0x4f0d82);},'rCjRB':'unknown','HhBOQ':_0x403537(0x129),'dQSgA':function(_0x591933,_0x91d48c){return _0x591933===_0x91d48c;},'hXwIM':_0x403537(0x11a),'JUJLC':function(_0x5d6906,_0x345f06){return _0x5d6906===_0x345f06;},'hekMK':_0x403537(0x15f),'JLHcA':_0x403537(0x17c),'kSuBC':_0x403537(0x12e),'VjeiC':_0x403537(0x104)};let _0x356e75=[];if(helper[_0x403537(0x15a)]()&&_0x2cfa50[_0x403537(0xfa)](isTestObservabilitySession))_0x356e75=_0x5d2903['app']?constants[_0x403537(0x173)]:constants[_0x403537(0x131)];else{if(_0x2cfa50['HjRBa'](isTestObservabilitySession))_0x356e75=constants[_0x403537(0x119)];else helper['isBrowserstackInfra']()&&(_0x356e75=_0x5d2903['app']?constants[_0x403537(0x17a)]:constants[_0x403537(0x156)]);}let _0x3935a1=_0x5d2903['buildIdentifier'];if(_0x2cfa50[_0x403537(0x14c)](_0x3935a1,null))_0x3935a1=_0x2cfa50[_0x403537(0x153)];else _0x2cfa50[_0x403537(0x175)](_0x3935a1,undefined)&&(_0x3935a1=_0x2cfa50[_0x403537(0x179)]);unhandledErrors&&_0x2cfa50[_0x403537(0x17b)](unhandledErrors['length'],0x0)&&(_0x4c7a39[_0x403537(0x107)]=unhandledErrors);global[_0x403537(0x127)]&&(_0x4c7a39[_0x403537(0x10a)]=global[_0x403537(0x127)]);try{if(_0x4c7a39[_0x403537(0xff)]){if(_0x2cfa50['VcFPf'](_0x4af02a,_0x2cfa50[_0x403537(0x125)])&&_0x2cfa50[_0x403537(0x17b)](_0x4c7a39[_0x403537(0xff)][_0x403537(0x154)],0x0)){const _0x33d299={};_0x33d299['os']='',_0x33d299['osVersion']='',_0x33d299['browser']='',_0x33d299[_0x403537(0x145)]='';const _0x5d2970=_0x33d299;let _0x3912dd={};const _0x568f54=_0x4c7a39[_0x403537(0xff)];_0x3912dd=_0x568f54[_0x403537(0x112)]((_0x2818c6,_0x25c206)=>{for(const _0x4f003d in _0x25c206){_0x2818c6[_0x4f003d]=_0x25c206[_0x4f003d];}return _0x2818c6;},{});const _0xea16b2={};_0xea16b2[_0x403537(0x162)]=_0x3912dd,_0x4c7a39[_0x403537(0xff)]=[Object[_0x403537(0x103)]({},_0x5d2970,_0xea16b2)];}else{let _0xc5693e=0x0;const _0x462403=_0x2cfa50['pGGLY'](_0x4af02a,_0x2cfa50['kfSPv'])?JSON['parse'](_0x4c7a39[_0x403537(0xff)]):_0x4c7a39['error'],_0x5ac12f=Object[_0x403537(0x13f)](_0x462403);_0x5ac12f[_0x403537(0x133)](_0x565dd6=>{const _0x4921ac=_0x403537;if(_0x2cfa50[_0x4921ac(0x134)](typeof _0x565dd6,_0x2cfa50[_0x4921ac(0x15c)])){const _0x512c8f=Object[_0x4921ac(0x13f)](_0x565dd6);!_0x512c8f[_0x4921ac(0x172)](_0x35fc0b=>_0x35fc0b===null||_0x35fc0b===undefined||_0x35fc0b==='')&&(_0xc5693e+=0x1);}});if(_0x2cfa50[_0x403537(0x16f)](_0xc5693e,0x0))delete _0x4c7a39[_0x2cfa50[_0x403537(0x109)]];else{const _0xc0d247=[];Object[_0x403537(0x152)](_0x462403)['forEach'](_0x523675=>{const _0x5e72b0=_0x403537,[_0x40d27e,_0x38d6ce,_0x2d4805,_0x3c75bd]=_0x523675[_0x5e72b0(0x116)](',\x20');let _0x3af8c7={};if(!_0x3c75bd){const _0x2677a9={};_0x2677a9['deviceName']=_0x40d27e,_0x2677a9[_0x5e72b0(0x10f)]=_0x38d6ce,_0x2677a9[_0x5e72b0(0x12a)]=_0x2d4805,_0x3af8c7=_0x2677a9;}else{const _0x4a6b53={};_0x4a6b53['os']=_0x40d27e,_0x4a6b53[_0x5e72b0(0x10f)]=_0x38d6ce,_0x4a6b53[_0x5e72b0(0x12a)]=_0x2d4805,_0x4a6b53[_0x5e72b0(0x145)]=_0x3c75bd,_0x3af8c7=_0x4a6b53;}const _0x579a50={},_0x4c9cf4=_0x462403[_0x523675];Object[_0x5e72b0(0x152)](_0x4c9cf4)[_0x5e72b0(0x133)](_0x32d415=>{const _0xa014a2=_0x5e72b0;_0x2cfa50[_0xa014a2(0xf8)](_0x4c9cf4[_0x32d415]['length'],0x0)&&(_0x579a50[_0x32d415]=_0x4c9cf4[_0x32d415]);}),_0x2cfa50[_0x5e72b0(0x17b)](Object['keys'](_0x579a50)[_0x5e72b0(0x154)],0x0)&&(_0x3af8c7[_0x2cfa50['PJbTG']]=_0x579a50,_0xc0d247[_0x5e72b0(0x11f)](_0x3af8c7));}),_0x2cfa50['qoAoX'](_0xc0d247[_0x403537(0x154)],0x0)?_0x4c7a39[_0x403537(0xff)]=_0xc0d247:delete _0x4c7a39[_0x2cfa50[_0x403537(0x109)]];}}}}catch(_0x34a6b7){delete _0x4c7a39[_0x2cfa50['RSYLx']],logger[_0x403537(0xfc)](_0x2cfa50[_0x403537(0x17d)](_0x2cfa50['UPuKe'],_0x34a6b7));}const _0x3d6fcf=helper[_0x403537(0x10b)](_0x5d2903,_0x5d2903[_0x403537(0x12b)]),_0x5bf221={'userName':helper['getUserName'](_0x5d2903),'accessKey':helper['getAccessKey'](_0x5d2903),'event_type':_0x400b2c,'detectedFramework':_0x4af02a,'buildHashedId':globals[_0x403537(0x146)](_0x2cfa50[_0x403537(0x171)]),'optimalHubUrl':helper[_0x403537(0x17f)](),'event_properties':{'testhub_uuid':process[_0x403537(0x16a)][testHubConstants[_0x403537(0x130)][_0x403537(0x138)]]||'','sdkRunId':global[_0x403537(0x127)],'product_map':_0x2cfa50[_0x403537(0x12d)](getProductMap,_0x5d2903),'productMap':_0x2cfa50[_0x403537(0x150)](getProductMap,_0x5d2903),'language_framework':_0x5d2903[_0x403537(0x169)]||_0x2cfa50[_0x403537(0x142)],'referrer':helper[_0x403537(0x148)](_0x4af02a),'framework':_0x5d2903[_0x403537(0x12b)],'frameworkVersion':helper[_0x403537(0x137)](_0x4af02a),'automationFramework':_0x3d6fcf[_0x403537(0x13e)],'automationFrameworkVersion':_0x3d6fcf[_0x403537(0x176)],'language':_0x2cfa50[_0x403537(0xf6)],'languageVersion':process[_0x403537(0x176)],'product':_0x356e75,'buildName':_0x5d2903[_0x403537(0x12c)]||_0x2cfa50['bivaP'],'buildIdentifier':_0x3935a1,'os':os[_0x403537(0x11b)]()||_0x2cfa50[_0x403537(0x142)],'hostname':os[_0x403537(0x149)]()||_0x2cfa50['rCjRB'],..._0x4c7a39}};try{_0x2cfa50[_0x403537(0x14b)](_0x400b2c,_0x2cfa50[_0x403537(0x16b)])&&(_0x5bf221['event_properties']['browserStackConfig']=helper[_0x403537(0x163)](_0x5d2903)),_0x2cfa50[_0x403537(0x14f)](_0x4af02a,_0x2cfa50[_0x403537(0x13c)])?_0x5bf221[_0x403537(0x10c)][_0x403537(0x106)]=helper['requirePWModule'][_0x403537(0x167)](null,_0x2cfa50[_0x403537(0xfa)](getTransformPath),!![]):_0x5bf221[_0x403537(0x10c)][_0x403537(0x12f)]=helper['getPackageVersion'](_0x2cfa50[_0x403537(0x114)]);}catch(_0x50b84d){logger[_0x403537(0xfc)]('Error\x20in\x20getting\x20framework\x20version\x20to\x20:\x20'+_0x50b84d);}const _0x3b5ce3={};_0x3b5ce3[_0x403537(0x174)]=_0x2cfa50['JLHcA'];const _0xaa39a4={'headers':_0x3b5ce3,'body':_0x5bf221,'auth':{'user':helper[_0x403537(0x115)](_0x5d2903),'pass':helper[_0x403537(0x120)](_0x5d2903)},'json':!![]};logger[_0x403537(0xfc)]('Firing\x20SDK\x20event\x20for\x20funnel\x20data:\x20'+JSON[_0x403537(0x15d)](_0xaa39a4['body'])[_0x403537(0x13d)](new RegExp(helper[_0x403537(0x115)](_0x5d2903),'g'),_0x2cfa50[_0x403537(0x177)])['replace'](new RegExp(helper[_0x403537(0x120)](_0x5d2903),'g'),_0x2cfa50[_0x403537(0x177)]));try{const _0x328b07=await helper['nodeRequest'](_0x2cfa50[_0x403537(0xf7)],constants[_0x403537(0x155)],_0xaa39a4,_0x5d2903);logger[_0x403537(0xfc)](_0x403537(0x11e)+_0x400b2c+_0x403537(0x168)+util[_0x403537(0x110)]('%j',_0x328b07));}catch(_0x2a6943){logger[_0x403537(0xfc)]('Error\x20in\x20firing\x20request\x20to\x20'+FUNNEL_INSTRUMENTATION_API_URL+_0x403537(0x157)+util[_0x403537(0x110)](_0x2a6943));}},exports[a93_0xe22eef(0x136)]=async _0x591532=>{const _0x4ea601=a93_0xe22eef,_0x1eb7b9={'QftCb':function(_0xf69a05){return _0xf69a05();},'kvMAv':'finishedMetadata','BzNav':_0x4ea601(0x139),'AtqiR':function(_0x464e43,_0x4408f4){return _0x464e43(_0x4408f4);},'XrDAx':_0x4ea601(0x11a),'XvrnS':function(_0x5647f1,_0x3e1efb,_0x174546){return _0x5647f1(_0x3e1efb,_0x174546);},'QxZhn':function(_0x3e1800,_0x32b7a6){return _0x3e1800+_0x32b7a6;},'KtiIF':_0x4ea601(0x135)};try{await _0x591532[_0x4ea601(0x14a)](),_0x1eb7b9[_0x4ea601(0x140)](printNudgeLocalNotSetError);const _0x32b8c1={};_0x32b8c1[_0x4ea601(0xff)]=_0x591532[_0x4ea601(0x124)]?_0x591532[_0x4ea601(0x124)]:'{}';const _0x1024ea=_0x32b8c1,_0xe2e842=Object[_0x4ea601(0x103)]({},_0x1024ea);!!_0x591532[_0x4ea601(0x14d)]&&(_0xe2e842[_0x1eb7b9[_0x4ea601(0x13a)]]={'reason':_0x1eb7b9['BzNav'],'signal':_0x591532['killSignal']});unhandledErrors=_0x591532[_0x4ea601(0x16d)][_0x4ea601(0x11c)]('\x0a');let _0x16ff95,_0x3beb65,_0x2c5d27;_0x1eb7b9[_0x4ea601(0x15b)](isTurboScaleSession,_0x591532[_0x4ea601(0x151)])?([_0x16ff95,_0x3beb65]=await helper[_0x4ea601(0xf9)](_0x591532[_0x4ea601(0x151)]),[_0x2c5d27]=await Promise['all']([helper[_0x4ea601(0x10e)](_0x16ff95,_0x591532[_0x4ea601(0x151)]),exports[_0x4ea601(0x16c)](_0x1eb7b9['XrDAx'],_0xe2e842,_0x591532[_0x4ea601(0x151)],_0x591532[_0x4ea601(0x12b)])])):([_0x16ff95,_0x3beb65]=await helper[_0x4ea601(0x16e)](_0x591532[_0x4ea601(0x151)]),[_0x2c5d27]=await Promise[_0x4ea601(0x164)]([helper[_0x4ea601(0x132)](_0x16ff95,_0x591532[_0x4ea601(0x151)]),exports[_0x4ea601(0x16c)](_0x1eb7b9[_0x4ea601(0x111)],_0xe2e842,_0x591532[_0x4ea601(0x151)],_0x591532[_0x4ea601(0x12b)])])),_0x2c5d27&&await _0x1eb7b9['XvrnS'](generateCIArtifacts,_0x2c5d27,_0x3beb65),logger[_0x4ea601(0x161)](_0x4ea601(0x159)+_0x591532[_0x4ea601(0x127)]+_0x4ea601(0x13b)+process[_0x4ea601(0x16a)][_0x4ea601(0x138)]),await helper[_0x4ea601(0x11d)](_0x591532[_0x4ea601(0x151)]);}catch(_0x10e0c4){logger['debug'](_0x1eb7b9['QxZhn'](_0x1eb7b9[_0x4ea601(0x126)],_0x10e0c4));}helper[_0x4ea601(0x15e)]();};