const a127_0x36f7fe=a127_0x434b;(function(_0xd581d1,_0x2c77dd){const _0x1f9abd=a127_0x434b,_0x930669=_0xd581d1();while(!![]){try{const _0x3081d6=parseInt(_0x1f9abd(0x237))/0x1+-parseInt(_0x1f9abd(0x246))/0x2+parseInt(_0x1f9abd(0x24e))/0x3+parseInt(_0x1f9abd(0x270))/0x4+parseInt(_0x1f9abd(0x263))/0x5+-parseInt(_0x1f9abd(0x26c))/0x6+-parseInt(_0x1f9abd(0x20c))/0x7;if(_0x3081d6===_0x2c77dd)break;else _0x930669['push'](_0x930669['shift']());}catch(_0x50142a){_0x930669['push'](_0x930669['shift']());}}}(a127_0x3083,0x9b666));const os=require('os'),util=require(a127_0x36f7fe(0x223)),fs=require('fs'),{getProductMap}=require('./testhub/utils'),logger=require(a127_0x36f7fe(0x1fe))[a127_0x36f7fe(0x269)],constants=require(a127_0x36f7fe(0x25a)),testHubConstants=require(a127_0x36f7fe(0x24d)),{getTransformPath}=require('../bin/playwright/reporter/pwUtils'),{FUNNEL_INSTRUMENTATION_API_URL}=require('../bin/utils/constants'),{generateCIArtifacts,printNudgeLocalNotSetError}=require('./helper'),PerformanceTester=require(a127_0x36f7fe(0x23a)),globals=require('./globals'),helper=require(a127_0x36f7fe(0x252)),{isTestObservabilitySession}=require('./test-observability/utils');function a127_0x434b(_0x2b01dd,_0x22412d){const _0x3083d1=a127_0x3083();return a127_0x434b=function(_0x434bb7,_0x461e2d){_0x434bb7=_0x434bb7-0x1f0;let _0xb33ece=_0x3083d1[_0x434bb7];return _0xb33ece;},a127_0x434b(_0x2b01dd,_0x22412d);}function a127_0x3083(){const _0x4db1cc=['PbsTp','950968IpTWGM','getTurboScaleSessionsList','AUTOMATE','isNullOrEmpty','getNodeAgent','getSessionsList','jKsxZ','../helpers/testhub/constants','2894199FjvZAp','sanitizeBrowserStackConfig','sendLogs','Directory\x20','./helper','browserStackConfig','nodeRequest','osVersion','getOptimalHubUrl','getBuildLink','errorMessage','values','../bin/utils/constants','wDfIR','config','application/json','join','kTrie','toString','UhzcE','buildName','5522395WvwgAd','killSignal','length','tests','\x20response\x20-\x20','type','winstonLogger','constants','SDK\x20run\x20ended\x20for\x20id:\x20','4845090YJKnPa','gQfau','playwrightVersion','fireFunnelTestEvent','4167924CgSrPY','seleniumVersion','undefined','framework','Error\x20while\x20parsing\x20tests\x20errors,\x20Exception:\x20','apply','isBrowserstackInfra','brBgD','_buildHashedId','XJKxZ','WfFvp','GIcwI','env','stringify','browser','version','getUserName','QrsUv','error','vlnob','info','./logger','finishedMetadata','stack','PRODUCT_IF_NOT_BROWSERSTACK_INFRA','codeceptjs','debug','all','deviceName','event_properties','AUTOMATE_PRODUCTS','FUNNEL_INSTRUMENTATION_API_URL','Something\x20went\x20wrong\x20in\x20Final\x20Execution\x20step\x20:\x20','gXOnt','vPtwQ','14035560BzlkmF','zqaQS','TFeGI','VQlhk','dnOcB','EjbQK','xcbmS','browserVersion','sdkRunId','Error\x20in\x20firing\x20request\x20to\x20','replace','unknown',',\x20testhub\x20id:\x20','getFrameworkVersion','axiPz','name','hostname','tsKta','tXoOE','ENV_VAR','keys','every','buildIdentifier','util','feAHM','ygTpR','Ujuud','app','getStackTraceAsString','accessSync','object','setReadWriteAccess','ZYbtc','notifyUpdate','[REDACTED]','Error\x20in\x20getting\x20framework\x20version\x20to\x20:\x20','forEach','chmodSync','split','getAccessKey','SDKTestSuccessful','requirePWModule','QvFLU','813404gCWzOx','getGlobal','Firing\x20SDK\x20event\x20for\x20funnel\x20data:\x20','./performance/performance-tester','mkcju','push','assign','QtCnD','finalExecution','itnFk','body','globalException','zcegS','source'];a127_0x3083=function(){return _0x4db1cc;};return a127_0x3083();}let unhandledErrors='';exports[a127_0x36f7fe(0x26f)]=async(_0x470e67,_0x9cceb7={},_0x27cd13,_0x39473a)=>{const _0x51cf36=a127_0x36f7fe,_0x432314={'kTrie':function(_0x48b2c9,_0x404cdf){return _0x48b2c9===_0x404cdf;},'brBgD':_0x51cf36(0x22a),'WfFvp':function(_0x9ac72b,_0x1a2c3b){return _0x9ac72b>_0x1a2c3b;},'lDdNZ':_0x51cf36(0x266),'gQfau':function(_0x35f42b){return _0x35f42b();},'HVMYC':function(_0x39ca77,_0x522c06){return _0x39ca77==_0x522c06;},'QvFLU':'null','VQlhk':_0x51cf36(0x272),'mkcju':function(_0xbceca,_0x591711){return _0xbceca>_0x591711;},'QrsUv':_0x51cf36(0x202),'QtCnD':function(_0x2523d9,_0x4d5e64){return _0x2523d9!==_0x4d5e64;},'zcegS':'Playwright','vlnob':_0x51cf36(0x1fb),'TFeGI':function(_0x5e631e,_0x2f12d9){return _0x5e631e>_0x2f12d9;},'OnXhd':function(_0x1b819a,_0x5a750f){return _0x1b819a+_0x5a750f;},'vPtwQ':_0x51cf36(0x274),'GIcwI':_0x51cf36(0x1f1),'tXoOE':function(_0x51ef02,_0x3e83fc){return _0x51ef02(_0x3e83fc);},'Ujuud':function(_0x5ee54f,_0x38af8e){return _0x5ee54f(_0x38af8e);},'jKsxZ':_0x51cf36(0x217),'wDfIR':'nodejs','PbsTp':_0x51cf36(0x234),'xcbmS':function(_0x2bd432,_0x22a8aa){return _0x2bd432===_0x22a8aa;},'ZYbtc':function(_0x2b70d6){return _0x2b70d6();},'itnFk':'selenium-webdriver','UhzcE':_0x51cf36(0x25d),'EjbQK':_0x51cf36(0x22e),'ygTpR':'POST'};let _0x455dc9=[];if(helper[_0x51cf36(0x276)]()&&_0x432314[_0x51cf36(0x26d)](isTestObservabilitySession))_0x455dc9=_0x27cd13[_0x51cf36(0x227)]?constants['APP_AUTOMATE_PRODUCTS']:constants[_0x51cf36(0x207)];else{if(_0x432314['gQfau'](isTestObservabilitySession))_0x455dc9=constants[_0x51cf36(0x201)];else helper[_0x51cf36(0x276)]()&&(_0x455dc9=_0x27cd13['app']?constants['APP_AUTOMATE']:constants[_0x51cf36(0x248)]);}let _0x1ae331=_0x27cd13[_0x51cf36(0x222)];if(_0x432314['HVMYC'](_0x1ae331,null))_0x1ae331=_0x432314[_0x51cf36(0x236)];else _0x432314[_0x51cf36(0x25f)](_0x1ae331,undefined)&&(_0x1ae331=_0x432314[_0x51cf36(0x20f)]);unhandledErrors&&_0x432314[_0x51cf36(0x23b)](unhandledErrors[_0x51cf36(0x265)],0x0)&&(_0x9cceb7[_0x51cf36(0x242)]=unhandledErrors);global[_0x51cf36(0x214)]&&(_0x9cceb7[_0x51cf36(0x214)]=global[_0x51cf36(0x214)]);try{if(_0x9cceb7[_0x51cf36(0x1fb)]){if(_0x432314[_0x51cf36(0x25f)](_0x39473a,_0x432314[_0x51cf36(0x1fa)])&&_0x432314[_0x51cf36(0x1f3)](_0x9cceb7[_0x51cf36(0x1fb)][_0x51cf36(0x265)],0x0)){const _0x42e782={};_0x42e782['os']='',_0x42e782[_0x51cf36(0x255)]='',_0x42e782[_0x51cf36(0x1f7)]='',_0x42e782[_0x51cf36(0x213)]='';const _0x2c73c9=_0x42e782;let _0x285a70={};const _0x1bf19f=_0x9cceb7[_0x51cf36(0x1fb)];_0x285a70=_0x1bf19f['reduce']((_0x23e3a2,_0x4ceb43)=>{for(const _0x4914cb in _0x4ceb43){_0x23e3a2[_0x4914cb]=_0x4ceb43[_0x4914cb];}return _0x23e3a2;},{});const _0x24cc10={};_0x24cc10[_0x51cf36(0x266)]=_0x285a70,_0x9cceb7[_0x51cf36(0x1fb)]=[Object[_0x51cf36(0x23d)]({},_0x2c73c9,_0x24cc10)];}else{let _0x53a6b4=0x0;const _0x289742=_0x432314[_0x51cf36(0x23e)](_0x39473a,_0x432314[_0x51cf36(0x243)])?JSON['parse'](_0x9cceb7[_0x51cf36(0x1fb)]):_0x9cceb7[_0x51cf36(0x1fb)],_0x3a46cf=Object[_0x51cf36(0x259)](_0x289742);_0x3a46cf[_0x51cf36(0x230)](_0x22da8a=>{const _0x235f1a=_0x51cf36;if(_0x432314[_0x235f1a(0x25f)](typeof _0x22da8a,_0x432314[_0x235f1a(0x1f0)])){const _0x494caa=Object[_0x235f1a(0x259)](_0x22da8a);!_0x494caa[_0x235f1a(0x221)](_0x54de8b=>_0x54de8b===null||_0x54de8b===undefined||_0x54de8b==='')&&(_0x53a6b4+=0x1);}});if(_0x432314[_0x51cf36(0x25f)](_0x53a6b4,0x0))delete _0x9cceb7[_0x432314[_0x51cf36(0x1fc)]];else{const _0x38feda=[];Object[_0x51cf36(0x220)](_0x289742)[_0x51cf36(0x230)](_0x42cec8=>{const _0x1d7aca=_0x51cf36,_0x8922c4={'dnOcB':function(_0x218c49,_0x24f32d){const _0x3a395c=a127_0x434b;return _0x432314[_0x3a395c(0x1f3)](_0x218c49,_0x24f32d);}},[_0x331696,_0x29df0d,_0x402aec,_0x1df13e]=_0x42cec8[_0x1d7aca(0x232)](',\x20');let _0x2bb92d={};if(!_0x1df13e){const _0x3740e2={};_0x3740e2[_0x1d7aca(0x205)]=_0x331696,_0x3740e2[_0x1d7aca(0x255)]=_0x29df0d,_0x3740e2[_0x1d7aca(0x1f7)]=_0x402aec,_0x2bb92d=_0x3740e2;}else{const _0xa339ed={};_0xa339ed['os']=_0x331696,_0xa339ed[_0x1d7aca(0x255)]=_0x29df0d,_0xa339ed[_0x1d7aca(0x1f7)]=_0x402aec,_0xa339ed[_0x1d7aca(0x213)]=_0x1df13e,_0x2bb92d=_0xa339ed;}const _0x2d5e5c={},_0x2f9d85=_0x289742[_0x42cec8];Object['keys'](_0x2f9d85)['forEach'](_0x5a7206=>{const _0x227305=_0x1d7aca;_0x8922c4[_0x227305(0x210)](_0x2f9d85[_0x5a7206][_0x227305(0x265)],0x0)&&(_0x2d5e5c[_0x5a7206]=_0x2f9d85[_0x5a7206]);}),_0x432314[_0x1d7aca(0x1f3)](Object[_0x1d7aca(0x220)](_0x2d5e5c)[_0x1d7aca(0x265)],0x0)&&(_0x2bb92d[_0x432314['lDdNZ']]=_0x2d5e5c,_0x38feda[_0x1d7aca(0x23c)](_0x2bb92d));}),_0x432314[_0x51cf36(0x20e)](_0x38feda[_0x51cf36(0x265)],0x0)?_0x9cceb7[_0x51cf36(0x1fb)]=_0x38feda:delete _0x9cceb7[_0x432314['vlnob']];}}}}catch(_0x244511){delete _0x9cceb7[_0x432314[_0x51cf36(0x1fc)]],logger[_0x51cf36(0x203)](_0x432314['OnXhd'](_0x432314[_0x51cf36(0x20b)],_0x244511));}const _0x3781d3=helper['getTestFrameworkDetails'](_0x27cd13,_0x27cd13[_0x51cf36(0x273)]),_0x3c73e5={'userName':helper['getUserName'](_0x27cd13),'accessKey':helper[_0x51cf36(0x233)](_0x27cd13),'event_type':_0x470e67,'detectedFramework':_0x39473a,'buildHashedId':globals[_0x51cf36(0x238)](_0x432314[_0x51cf36(0x1f4)]),'optimalHubUrl':helper[_0x51cf36(0x256)](),'event_properties':{'testhub_uuid':process[_0x51cf36(0x1f5)][testHubConstants[_0x51cf36(0x21f)]['BROWSERSTACK_TESTHUB_UUID']]||'','sdkRunId':global[_0x51cf36(0x214)],'product_map':_0x432314[_0x51cf36(0x21e)](getProductMap,_0x27cd13),'productMap':_0x432314[_0x51cf36(0x226)](getProductMap,_0x27cd13),'language_framework':_0x27cd13[_0x51cf36(0x244)]||_0x432314['jKsxZ'],'referrer':helper[_0x51cf36(0x24a)](_0x39473a),'framework':_0x27cd13[_0x51cf36(0x273)],'frameworkVersion':helper[_0x51cf36(0x219)](_0x39473a),'automationFramework':_0x3781d3[_0x51cf36(0x21b)],'automationFrameworkVersion':_0x3781d3[_0x51cf36(0x1f8)],'language':_0x432314[_0x51cf36(0x25b)],'languageVersion':process[_0x51cf36(0x1f8)],'product':_0x455dc9,'buildName':_0x27cd13[_0x51cf36(0x262)]||_0x432314[_0x51cf36(0x20f)],'buildIdentifier':_0x1ae331,'os':os[_0x51cf36(0x268)]()||_0x432314[_0x51cf36(0x24c)],'hostname':os[_0x51cf36(0x21c)]()||_0x432314[_0x51cf36(0x24c)],..._0x9cceb7}};try{_0x432314['kTrie'](_0x470e67,_0x432314[_0x51cf36(0x245)])&&(_0x3c73e5[_0x51cf36(0x206)][_0x51cf36(0x253)]=helper[_0x51cf36(0x24f)](_0x27cd13)),_0x432314[_0x51cf36(0x212)](_0x39473a,_0x432314['zcegS'])?_0x3c73e5['event_properties'][_0x51cf36(0x26e)]=helper[_0x51cf36(0x235)][_0x51cf36(0x275)](null,_0x432314[_0x51cf36(0x22c)](getTransformPath),!![]):_0x3c73e5[_0x51cf36(0x206)][_0x51cf36(0x271)]=helper['getPackageVersion'](_0x432314[_0x51cf36(0x240)]);}catch(_0x3e9167){logger[_0x51cf36(0x203)](_0x51cf36(0x22f)+_0x3e9167);}const _0x52b85e={};_0x52b85e['content-type']=_0x432314[_0x51cf36(0x261)];const _0x44ddc4={'headers':_0x52b85e,'body':_0x3c73e5,'auth':{'user':helper[_0x51cf36(0x1f9)](_0x27cd13),'pass':helper[_0x51cf36(0x233)](_0x27cd13)},'json':!![]};logger[_0x51cf36(0x203)](_0x51cf36(0x239)+JSON[_0x51cf36(0x1f6)](_0x44ddc4[_0x51cf36(0x241)])[_0x51cf36(0x216)](new RegExp(helper[_0x51cf36(0x1f9)](_0x27cd13),'g'),_0x432314[_0x51cf36(0x211)])['replace'](new RegExp(helper[_0x51cf36(0x233)](_0x27cd13),'g'),_0x432314[_0x51cf36(0x211)]));try{const _0x79fdff=await helper[_0x51cf36(0x254)](_0x432314[_0x51cf36(0x225)],constants[_0x51cf36(0x208)],_0x44ddc4,_0x27cd13);logger[_0x51cf36(0x203)]('API\x20Event\x20'+_0x470e67+_0x51cf36(0x267)+util['format']('%j',_0x79fdff));}catch(_0x1731f0){logger[_0x51cf36(0x203)](_0x51cf36(0x215)+FUNNEL_INSTRUMENTATION_API_URL+'\x20:\x20'+util['format'](_0x1731f0));}},exports[a127_0x36f7fe(0x23f)]=async _0x432b4b=>{const _0x23f9b7=a127_0x36f7fe,_0x59060f={'PfWun':function(_0x196f4c){return _0x196f4c();},'feAHM':_0x23f9b7(0x1ff),'axiPz':'user_killed','zqaQS':_0x23f9b7(0x234),'tsKta':function(_0x2dd53f,_0x59d19a,_0x2ed8a6){return _0x2dd53f(_0x59d19a,_0x2ed8a6);},'DEuPg':function(_0x367712,_0x18b8a0){return _0x367712+_0x18b8a0;},'bHIWQ':_0x23f9b7(0x209)};try{await _0x432b4b['stopPercy'](),_0x59060f['PfWun'](printNudgeLocalNotSetError);const _0x3c646d={};_0x3c646d['error']=_0x432b4b['errorMessage']?_0x432b4b[_0x23f9b7(0x258)]:'{}';const _0x1a664e=_0x3c646d,_0x2e2ac6=Object[_0x23f9b7(0x23d)]({},_0x1a664e);!!_0x432b4b['killSignal']&&(_0x2e2ac6[_0x59060f[_0x23f9b7(0x224)]]={'reason':_0x59060f[_0x23f9b7(0x21a)],'signal':_0x432b4b[_0x23f9b7(0x264)]});unhandledErrors=_0x432b4b['unhandledErrors'][_0x23f9b7(0x25e)]('\x0a');let _0x1123f2,_0x31bb29,_0xcefccd;helper['isTurboScaleSession'](_0x432b4b['config'])?([_0x1123f2,_0x31bb29]=await helper['getTurboScaleBuildLink'](_0x432b4b[_0x23f9b7(0x25c)]),[_0xcefccd]=await Promise[_0x23f9b7(0x204)]([helper[_0x23f9b7(0x247)](_0x1123f2,_0x432b4b[_0x23f9b7(0x25c)]),exports[_0x23f9b7(0x26f)](_0x59060f[_0x23f9b7(0x20d)],_0x2e2ac6,_0x432b4b['config'],_0x432b4b['framework'])])):([_0x1123f2,_0x31bb29]=await helper[_0x23f9b7(0x257)](_0x432b4b[_0x23f9b7(0x25c)]),[_0xcefccd]=await Promise['all']([helper[_0x23f9b7(0x24b)](_0x1123f2,_0x432b4b[_0x23f9b7(0x25c)]),exports[_0x23f9b7(0x26f)](_0x59060f[_0x23f9b7(0x20d)],_0x2e2ac6,_0x432b4b[_0x23f9b7(0x25c)],_0x432b4b[_0x23f9b7(0x273)])])),_0xcefccd&&await _0x59060f[_0x23f9b7(0x21d)](generateCIArtifacts,_0xcefccd,_0x31bb29),logger[_0x23f9b7(0x1fd)](_0x23f9b7(0x26b)+_0x432b4b['sdkRunId']+_0x23f9b7(0x218)+process[_0x23f9b7(0x1f5)]['BROWSERSTACK_TESTHUB_UUID']),await helper[_0x23f9b7(0x250)](_0x432b4b[_0x23f9b7(0x25c)]);}catch(_0x42b486){logger['debug'](_0x59060f['DEuPg'](_0x59060f['bHIWQ'],_0x42b486));}helper[_0x23f9b7(0x22d)]();},exports[a127_0x36f7fe(0x228)]=_0x55784a=>{const _0x1e0d42=a127_0x36f7fe,_0x152ecf={'wjCDy':function(_0x4af70e,_0x3cc5cb){return _0x4af70e instanceof _0x3cc5cb;},'gXOnt':function(_0x646e4c,_0x127d47){return _0x646e4c(_0x127d47);}};try{if(_0x152ecf['wjCDy'](_0x55784a,Error))return _0x55784a[_0x1e0d42(0x200)]||_0x55784a[_0x1e0d42(0x260)]();return _0x152ecf[_0x1e0d42(0x20a)](String,_0x55784a);}catch(_0x2fb180){return _0x55784a?_0x55784a[_0x1e0d42(0x260)]():'';}},exports[a127_0x36f7fe(0x249)]=_0x1b0224=>{const _0x2c6ebc=a127_0x36f7fe,_0xaf4567={};_0xaf4567[_0x2c6ebc(0x1f2)]=function(_0xe7efe6,_0x277cd3){return _0xe7efe6===_0x277cd3;};const _0x485fed=_0xaf4567;return!_0x1b0224||_0x485fed[_0x2c6ebc(0x1f2)](_0x1b0224['trim'](),'');},exports['isWritable']=_0x4a228b=>{const _0x31496b=a127_0x36f7fe;try{return fs[_0x31496b(0x229)](_0x4a228b,fs[_0x31496b(0x26a)]['W_OK']),!![];}catch(_0x599cb2){return![];}},exports[a127_0x36f7fe(0x22b)]=_0x361a37=>{const _0x234e2b=a127_0x36f7fe;try{fs[_0x234e2b(0x231)](_0x361a37,0x1b6),logger[_0x234e2b(0x203)](_0x234e2b(0x251)+_0x361a37+'\x20is\x20now\x20read/write\x20accessible.');}catch(_0x262674){logger[_0x234e2b(0x1fb)]('Failed\x20to\x20set\x20directory\x20access:\x20'+exports[_0x234e2b(0x228)](_0x262674));}};