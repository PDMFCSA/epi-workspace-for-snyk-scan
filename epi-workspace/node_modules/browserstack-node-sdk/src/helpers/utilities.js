const a127_0x3e6798=a127_0x4c2b;(function(_0x2935e9,_0x52aa8b){const _0x19dc93=a127_0x4c2b,_0x385405=_0x2935e9();while(!![]){try{const _0x24a51f=parseInt(_0x19dc93(0x198))/0x1*(-parseInt(_0x19dc93(0x1b7))/0x2)+-parseInt(_0x19dc93(0x20a))/0x3+-parseInt(_0x19dc93(0x1c1))/0x4+-parseInt(_0x19dc93(0x1a4))/0x5*(parseInt(_0x19dc93(0x18e))/0x6)+parseInt(_0x19dc93(0x1bc))/0x7*(-parseInt(_0x19dc93(0x1d5))/0x8)+parseInt(_0x19dc93(0x1f9))/0x9+parseInt(_0x19dc93(0x1c3))/0xa;if(_0x24a51f===_0x52aa8b)break;else _0x385405['push'](_0x385405['shift']());}catch(_0x3f9c05){_0x385405['push'](_0x385405['shift']());}}}(a127_0x2d00,0x313ca));const os=require('os'),util=require(a127_0x3e6798(0x1cf)),fs=require('fs'),{getProductMap}=require('./testhub/utils'),logger=require(a127_0x3e6798(0x1b6))['winstonLogger'],constants=require(a127_0x3e6798(0x1e8)),testHubConstants=require('../helpers/testhub/constants'),{getTransformPath}=require(a127_0x3e6798(0x1c4)),{FUNNEL_INSTRUMENTATION_API_URL}=require(a127_0x3e6798(0x1e8)),{generateCIArtifacts,printNudgeLocalNotSetError}=require(a127_0x3e6798(0x1cd)),PerformanceTester=require('./performance/performance-tester'),globals=require('./globals'),{isTurboScaleSession}=require(a127_0x3e6798(0x1f2)),helper=require(a127_0x3e6798(0x1cd)),{isTestObservabilitySession}=require(a127_0x3e6798(0x1dd));function a127_0x4c2b(_0x53c5ce,_0x280eac){const _0x2d005a=a127_0x2d00();return a127_0x4c2b=function(_0x4c2bde,_0x198d3d){_0x4c2bde=_0x4c2bde-0x186;let _0x1c2236=_0x2d005a[_0x4c2bde];return _0x1c2236;},a127_0x4c2b(_0x53c5ce,_0x280eac);}function a127_0x2d00(){const _0x5a6fa1=['setReadWriteAccess','reduce','browserStackConfig','sendLogs','../bin/utils/constants','isNullOrEmpty','constants','\x20:\x20','application/json','name','KnHfZ','Directory\x20','accessSync','UaiJI','./ats/helper','PRODUCT_IF_NOT_BROWSERSTACK_INFRA','getFrameworkVersion','JvuIV','event_properties','playwrightVersion','KDVzC','2151882tcFBJy','ENV_VAR','FUNNEL_INSTRUMENTATION_API_URL','join','getUserName','hNtQg','getPackageVersion','codeceptjs','body','object','Something\x20went\x20wrong\x20in\x20Final\x20Execution\x20step\x20:\x20','BROWSERSTACK_TESTHUB_UUID','null','_buildHashedId','Firing\x20SDK\x20event\x20for\x20funnel\x20data:\x20','framework','env','357690EzLEtK','SDKTestSuccessful','getBuildLink','LymAD','POST','all','tests','sanitizeBrowserStackConfig','pGvcm','WxhwG','Error\x20in\x20getting\x20framework\x20version\x20to\x20:\x20','getTurboScaleBuildLink','RoQzD','parse','bwYJT','version','krEmc','fireFunnelTestEvent','getAccessKey','stringify','oHScx','66FhclEm','error','Error\x20in\x20firing\x20request\x20to\x20','[REDACTED]','buildIdentifier','user_killed','format','values','assign','dfRMx','233awQYws','browserVersion','iKnHD','osVersion','undefined',',\x20testhub\x20id:\x20','isWritable','content-type','toString','lnUhw','type','isBrowserstackInfra','131575QdXncn','app','Playwright','trim','getTurboScaleSessionsList','RDtPd','OwsQT','forEach','NcugS','keys','requirePWModule','ufhYb','unhandledErrors','udpth','split','killSignal','debug','getGlobal','./logger','194QQCRVW','APP_AUTOMATE_PRODUCTS','\x20response\x20-\x20','PrNJV','fecBa','64302sGHjJZ','rEUZG','stopPercy','VjOJh','config','1609668pfUhxA','replace','10994270IEZELD','../bin/playwright/reporter/pwUtils','W_OK','push','dsbcY','jpRTN','HeLRS','SDK\x20run\x20ended\x20for\x20id:\x20','getSessionsList','getStackTraceAsString','./helper','globalException','util','kpyrw','NKuNT','length','every','apply','264kogBxc','wfYOM','sdkRunId','nodeRequest','errorMessage','browser','UsDzy','source','./test-observability/utils','jVnpE','APP_AUTOMATE','unknown','nodejs','getOptimalHubUrl','EEciq'];a127_0x2d00=function(){return _0x5a6fa1;};return a127_0x2d00();}let unhandledErrors='';exports[a127_0x3e6798(0x18a)]=async(_0x3b84b1,_0x491d25={},_0x3c97d0,_0x18a252)=>{const _0x299571=a127_0x3e6798,_0x1227cb={'jVnpE':function(_0x3a9df0,_0x41b665){return _0x3a9df0===_0x41b665;},'BdlQM':_0x299571(0x202),'bwYJT':function(_0x37fd2d,_0x58f38d){return _0x37fd2d>_0x58f38d;},'RoQzD':function(_0x47a44d,_0x593353){return _0x47a44d>_0x593353;},'dfRMx':'tests','pGvcm':function(_0x2e9b9e){return _0x2e9b9e();},'poQuJ':function(_0x59f9da,_0x3623b6){return _0x59f9da==_0x3623b6;},'NcugS':_0x299571(0x205),'krEmc':_0x299571(0x19c),'WxhwG':function(_0x24aa3e,_0x31aa38){return _0x24aa3e===_0x31aa38;},'KDVzC':_0x299571(0x200),'RDtPd':function(_0x1f36ec,_0x400878){return _0x1f36ec!==_0x400878;},'lnUhw':_0x299571(0x1a6),'VjOJh':function(_0x3d6c37,_0x4af4a6){return _0x3d6c37===_0x4af4a6;},'LymAD':_0x299571(0x18f),'KnHfZ':function(_0x2adfea,_0x149a43){return _0x2adfea+_0x149a43;},'HeLRS':'Error\x20while\x20parsing\x20tests\x20errors,\x20Exception:\x20','PrNJV':_0x299571(0x206),'nvIli':function(_0xfbad81,_0x4694cf){return _0xfbad81(_0x4694cf);},'ufhYb':function(_0x9da45a,_0x404875){return _0x9da45a(_0x404875);},'udpth':_0x299571(0x1e0),'fecBa':_0x299571(0x1e1),'UaiJI':_0x299571(0x20b),'kpyrw':function(_0x53a184,_0x18725a){return _0x53a184===_0x18725a;},'NKuNT':'selenium-webdriver','nkWoD':_0x299571(0x1ec),'wfYOM':_0x299571(0x191),'dsbcY':_0x299571(0x20e)};let _0x566a2e=[];if(helper[_0x299571(0x1a3)]()&&_0x1227cb[_0x299571(0x212)](isTestObservabilitySession))_0x566a2e=_0x3c97d0['app']?constants[_0x299571(0x1b8)]:constants['AUTOMATE_PRODUCTS'];else{if(_0x1227cb['pGvcm'](isTestObservabilitySession))_0x566a2e=constants[_0x299571(0x1f3)];else helper[_0x299571(0x1a3)]()&&(_0x566a2e=_0x3c97d0[_0x299571(0x1a5)]?constants[_0x299571(0x1df)]:constants['AUTOMATE']);}let _0x34d50b=_0x3c97d0[_0x299571(0x192)];if(_0x1227cb['poQuJ'](_0x34d50b,null))_0x34d50b=_0x1227cb[_0x299571(0x1ac)];else _0x1227cb[_0x299571(0x1de)](_0x34d50b,undefined)&&(_0x34d50b=_0x1227cb['krEmc']);unhandledErrors&&_0x1227cb[_0x299571(0x216)](unhandledErrors[_0x299571(0x1d2)],0x0)&&(_0x491d25[_0x299571(0x1ce)]=unhandledErrors);global[_0x299571(0x1d7)]&&(_0x491d25['sdkRunId']=global['sdkRunId']);try{if(_0x491d25['error']){if(_0x1227cb['WxhwG'](_0x18a252,_0x1227cb[_0x299571(0x1f8)])&&_0x1227cb[_0x299571(0x216)](_0x491d25[_0x299571(0x18f)][_0x299571(0x1d2)],0x0)){const _0x29deb7={};_0x29deb7['os']='',_0x29deb7[_0x299571(0x19b)]='',_0x29deb7[_0x299571(0x1da)]='',_0x29deb7[_0x299571(0x199)]='';const _0x4537c8=_0x29deb7;let _0x22cbf2={};const _0x3e4d3e=_0x491d25['error'];_0x22cbf2=_0x3e4d3e[_0x299571(0x1e5)]((_0x49450d,_0x10b925)=>{for(const _0xb0110e in _0x10b925){_0x49450d[_0xb0110e]=_0x10b925[_0xb0110e];}return _0x49450d;},{});const _0x5208a4={};_0x5208a4[_0x299571(0x210)]=_0x22cbf2,_0x491d25[_0x299571(0x18f)]=[Object['assign']({},_0x4537c8,_0x5208a4)];}else{let _0x14fc66=0x0;const _0x26a4f1=_0x1227cb[_0x299571(0x1a9)](_0x18a252,_0x1227cb[_0x299571(0x1a1)])?JSON[_0x299571(0x186)](_0x491d25[_0x299571(0x18f)]):_0x491d25[_0x299571(0x18f)],_0x146ae9=Object[_0x299571(0x195)](_0x26a4f1);_0x146ae9[_0x299571(0x1ab)](_0xfdbb70=>{const _0x3bee70=_0x299571;if(_0x1227cb['jVnpE'](typeof _0xfdbb70,_0x1227cb['BdlQM'])){const _0x422ff8=Object[_0x3bee70(0x195)](_0xfdbb70);!_0x422ff8[_0x3bee70(0x1d3)](_0x148d5=>_0x148d5===null||_0x148d5===undefined||_0x148d5==='')&&(_0x14fc66+=0x1);}});if(_0x1227cb[_0x299571(0x1bf)](_0x14fc66,0x0))delete _0x491d25[_0x1227cb[_0x299571(0x20d)]];else{const _0x146628=[];Object[_0x299571(0x1ad)](_0x26a4f1)['forEach'](_0x51ab07=>{const _0x35fbed=_0x299571,_0x20b7d0={'jpRTN':function(_0x522f0c,_0x1fd7ad){const _0x4964af=a127_0x4c2b;return _0x1227cb[_0x4964af(0x187)](_0x522f0c,_0x1fd7ad);}},[_0xb33729,_0x5ec1fc,_0x5d76df,_0x384eb6]=_0x51ab07[_0x35fbed(0x1b2)](',\x20');let _0x5135f1={};if(!_0x384eb6){const _0x16ccf2={};_0x16ccf2['deviceName']=_0xb33729,_0x16ccf2[_0x35fbed(0x19b)]=_0x5ec1fc,_0x16ccf2[_0x35fbed(0x1da)]=_0x5d76df,_0x5135f1=_0x16ccf2;}else{const _0x2bd22c={};_0x2bd22c['os']=_0xb33729,_0x2bd22c[_0x35fbed(0x19b)]=_0x5ec1fc,_0x2bd22c[_0x35fbed(0x1da)]=_0x5d76df,_0x2bd22c[_0x35fbed(0x199)]=_0x384eb6,_0x5135f1=_0x2bd22c;}const _0xcb2152={},_0x4b087b=_0x26a4f1[_0x51ab07];Object[_0x35fbed(0x1ad)](_0x4b087b)[_0x35fbed(0x1ab)](_0x208c82=>{const _0x23e874=_0x35fbed;_0x20b7d0[_0x23e874(0x1c8)](_0x4b087b[_0x208c82]['length'],0x0)&&(_0xcb2152[_0x208c82]=_0x4b087b[_0x208c82]);}),_0x1227cb[_0x35fbed(0x216)](Object['keys'](_0xcb2152)[_0x35fbed(0x1d2)],0x0)&&(_0x5135f1[_0x1227cb[_0x35fbed(0x197)]]=_0xcb2152,_0x146628[_0x35fbed(0x1c6)](_0x5135f1));}),_0x1227cb[_0x299571(0x216)](_0x146628[_0x299571(0x1d2)],0x0)?_0x491d25['error']=_0x146628:delete _0x491d25[_0x1227cb[_0x299571(0x20d)]];}}}}catch(_0x2eb896){delete _0x491d25[_0x1227cb[_0x299571(0x20d)]],logger[_0x299571(0x1b4)](_0x1227cb[_0x299571(0x1ee)](_0x1227cb[_0x299571(0x1c9)],_0x2eb896));}const _0x298e34=helper['getTestFrameworkDetails'](_0x3c97d0,_0x3c97d0['framework']),_0x1487ac={'userName':helper[_0x299571(0x1fd)](_0x3c97d0),'accessKey':helper[_0x299571(0x18b)](_0x3c97d0),'event_type':_0x3b84b1,'detectedFramework':_0x18a252,'buildHashedId':globals[_0x299571(0x1b5)](_0x1227cb[_0x299571(0x1ba)]),'optimalHubUrl':helper[_0x299571(0x1e2)](),'event_properties':{'testhub_uuid':process[_0x299571(0x209)][testHubConstants[_0x299571(0x1fa)][_0x299571(0x204)]]||'','sdkRunId':global[_0x299571(0x1d7)],'product_map':_0x1227cb['nvIli'](getProductMap,_0x3c97d0),'productMap':_0x1227cb[_0x299571(0x1af)](getProductMap,_0x3c97d0),'language_framework':_0x3c97d0[_0x299571(0x1dc)]||_0x1227cb[_0x299571(0x1b1)],'referrer':helper['getNodeAgent'](_0x18a252),'framework':_0x3c97d0[_0x299571(0x208)],'frameworkVersion':helper[_0x299571(0x1f4)](_0x18a252),'automationFramework':_0x298e34[_0x299571(0x1ed)],'automationFrameworkVersion':_0x298e34[_0x299571(0x188)],'language':_0x1227cb[_0x299571(0x1bb)],'languageVersion':process[_0x299571(0x188)],'product':_0x566a2e,'buildName':_0x3c97d0['buildName']||_0x1227cb[_0x299571(0x189)],'buildIdentifier':_0x34d50b,'os':os[_0x299571(0x1a2)]()||_0x1227cb[_0x299571(0x1b1)],'hostname':os['hostname']()||_0x1227cb[_0x299571(0x1b1)],..._0x491d25}};try{_0x1227cb[_0x299571(0x213)](_0x3b84b1,_0x1227cb[_0x299571(0x1f1)])&&(_0x1487ac['event_properties'][_0x299571(0x1e6)]=helper[_0x299571(0x211)](_0x3c97d0)),_0x1227cb[_0x299571(0x1d0)](_0x18a252,_0x1227cb['lnUhw'])?_0x1487ac['event_properties'][_0x299571(0x1f7)]=helper[_0x299571(0x1ae)][_0x299571(0x1d4)](null,_0x1227cb[_0x299571(0x212)](getTransformPath),!![]):_0x1487ac[_0x299571(0x1f6)]['seleniumVersion']=helper[_0x299571(0x1ff)](_0x1227cb[_0x299571(0x1d1)]);}catch(_0x22addc){logger[_0x299571(0x1b4)](_0x299571(0x214)+_0x22addc);}const _0x57d2dd={};_0x57d2dd[_0x299571(0x19f)]=_0x1227cb['nkWoD'];const _0x111a8e={'headers':_0x57d2dd,'body':_0x1487ac,'auth':{'user':helper[_0x299571(0x1fd)](_0x3c97d0),'pass':helper['getAccessKey'](_0x3c97d0)},'json':!![]};logger[_0x299571(0x1b4)](_0x299571(0x207)+JSON[_0x299571(0x18c)](_0x111a8e[_0x299571(0x201)])['replace'](new RegExp(helper[_0x299571(0x1fd)](_0x3c97d0),'g'),_0x1227cb[_0x299571(0x1d6)])[_0x299571(0x1c2)](new RegExp(helper['getAccessKey'](_0x3c97d0),'g'),_0x1227cb[_0x299571(0x1d6)]));try{const _0x5e89bb=await helper[_0x299571(0x1d8)](_0x1227cb[_0x299571(0x1c7)],constants[_0x299571(0x1fb)],_0x111a8e,_0x3c97d0);logger[_0x299571(0x1b4)]('API\x20Event\x20'+_0x3b84b1+_0x299571(0x1b9)+util['format']('%j',_0x5e89bb));}catch(_0x5a19fa){logger[_0x299571(0x1b4)](_0x299571(0x190)+FUNNEL_INSTRUMENTATION_API_URL+_0x299571(0x1eb)+util[_0x299571(0x194)](_0x5a19fa));}},exports['finalExecution']=async _0x3dd0bf=>{const _0x15120f=a127_0x3e6798,_0x47107e={'JvuIV':function(_0x46fa88){return _0x46fa88();},'EEciq':'finishedMetadata','hNtQg':_0x15120f(0x193),'rEUZG':function(_0x4ac60b,_0x2865e1){return _0x4ac60b(_0x2865e1);},'iKnHD':_0x15120f(0x20b),'UsDzy':function(_0x219120,_0xebc949,_0x1890b4){return _0x219120(_0xebc949,_0x1890b4);},'UAnmH':function(_0xbd04b5,_0x4fd980){return _0xbd04b5+_0x4fd980;},'OwsQT':_0x15120f(0x203)};try{await _0x3dd0bf[_0x15120f(0x1be)](),_0x47107e[_0x15120f(0x1f5)](printNudgeLocalNotSetError);const _0x3c80ac={};_0x3c80ac[_0x15120f(0x18f)]=_0x3dd0bf['errorMessage']?_0x3dd0bf[_0x15120f(0x1d9)]:'{}';const _0x1beaa3=_0x3c80ac,_0x203adc=Object[_0x15120f(0x196)]({},_0x1beaa3);!!_0x3dd0bf[_0x15120f(0x1b3)]&&(_0x203adc[_0x47107e[_0x15120f(0x1e3)]]={'reason':_0x47107e[_0x15120f(0x1fe)],'signal':_0x3dd0bf['killSignal']});unhandledErrors=_0x3dd0bf[_0x15120f(0x1b0)][_0x15120f(0x1fc)]('\x0a');let _0x3ccfda,_0x185530,_0x10e39d;_0x47107e[_0x15120f(0x1bd)](isTurboScaleSession,_0x3dd0bf[_0x15120f(0x1c0)])?([_0x3ccfda,_0x185530]=await helper[_0x15120f(0x215)](_0x3dd0bf[_0x15120f(0x1c0)]),[_0x10e39d]=await Promise['all']([helper[_0x15120f(0x1a8)](_0x3ccfda,_0x3dd0bf[_0x15120f(0x1c0)]),exports[_0x15120f(0x18a)](_0x47107e[_0x15120f(0x19a)],_0x203adc,_0x3dd0bf[_0x15120f(0x1c0)],_0x3dd0bf[_0x15120f(0x208)])])):([_0x3ccfda,_0x185530]=await helper[_0x15120f(0x20c)](_0x3dd0bf[_0x15120f(0x1c0)]),[_0x10e39d]=await Promise[_0x15120f(0x20f)]([helper[_0x15120f(0x1cb)](_0x3ccfda,_0x3dd0bf[_0x15120f(0x1c0)]),exports[_0x15120f(0x18a)](_0x47107e['iKnHD'],_0x203adc,_0x3dd0bf[_0x15120f(0x1c0)],_0x3dd0bf[_0x15120f(0x208)])])),_0x10e39d&&await _0x47107e[_0x15120f(0x1db)](generateCIArtifacts,_0x10e39d,_0x185530),logger['info'](_0x15120f(0x1ca)+_0x3dd0bf[_0x15120f(0x1d7)]+_0x15120f(0x19d)+process['env'][_0x15120f(0x204)]),await helper[_0x15120f(0x1e7)](_0x3dd0bf['config']);}catch(_0x34b029){logger['debug'](_0x47107e['UAnmH'](_0x47107e[_0x15120f(0x1aa)],_0x34b029));}helper['notifyUpdate']();},exports[a127_0x3e6798(0x1cc)]=_0x22bca1=>{const _0x18392f=a127_0x3e6798,_0xd500cf={'BBtNN':function(_0x4b7b2a,_0x12d266){return _0x4b7b2a instanceof _0x12d266;},'rEDXq':function(_0x5dc1bb,_0xf67486){return _0x5dc1bb(_0xf67486);}};try{if(_0xd500cf['BBtNN'](_0x22bca1,Error))return _0x22bca1['stack']||_0x22bca1[_0x18392f(0x1a0)]();return _0xd500cf['rEDXq'](String,_0x22bca1);}catch(_0x114d08){return _0x22bca1?_0x22bca1['toString']():'';}},exports[a127_0x3e6798(0x1e9)]=_0x1de733=>{const _0x22abf0=a127_0x3e6798,_0x484259={};_0x484259[_0x22abf0(0x18d)]=function(_0x7c1c57,_0x1f2469){return _0x7c1c57===_0x1f2469;};const _0x3a003e=_0x484259;return!_0x1de733||_0x3a003e['oHScx'](_0x1de733[_0x22abf0(0x1a7)](),'');},exports[a127_0x3e6798(0x19e)]=_0x5ba43d=>{const _0x21d4ab=a127_0x3e6798;try{return fs[_0x21d4ab(0x1f0)](_0x5ba43d,fs[_0x21d4ab(0x1ea)][_0x21d4ab(0x1c5)]),!![];}catch(_0x4e33a8){return![];}},exports[a127_0x3e6798(0x1e4)]=_0x186eee=>{const _0x547d4c=a127_0x3e6798;try{fs['chmodSync'](_0x186eee,0x1b6),logger['debug'](_0x547d4c(0x1ef)+_0x186eee+'\x20is\x20now\x20read/write\x20accessible.');}catch(_0x218b4b){logger[_0x547d4c(0x18f)]('Failed\x20to\x20set\x20directory\x20access:\x20'+exports[_0x547d4c(0x1cc)](_0x218b4b));}};