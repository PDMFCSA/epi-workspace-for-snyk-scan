const a129_0x267770=a129_0x499e;(function(_0x2e9e03,_0x36cd33){const _0x32d006=a129_0x499e,_0x313a1e=_0x2e9e03();while(!![]){try{const _0x405e92=parseInt(_0x32d006(0x19f))/0x1+-parseInt(_0x32d006(0x190))/0x2*(parseInt(_0x32d006(0x164))/0x3)+-parseInt(_0x32d006(0x1a3))/0x4*(parseInt(_0x32d006(0x16e))/0x5)+-parseInt(_0x32d006(0x166))/0x6*(-parseInt(_0x32d006(0x1a7))/0x7)+-parseInt(_0x32d006(0x12f))/0x8*(-parseInt(_0x32d006(0x127))/0x9)+parseInt(_0x32d006(0x16a))/0xa+-parseInt(_0x32d006(0x175))/0xb;if(_0x405e92===_0x36cd33)break;else _0x313a1e['push'](_0x313a1e['shift']());}catch(_0x2be884){_0x313a1e['push'](_0x313a1e['shift']());}}}(a129_0x3fe0,0x88906));function a129_0x499e(_0x428c94,_0x7eceb4){const _0x3fe0ca=a129_0x3fe0();return a129_0x499e=function(_0x499ee5,_0x486c49){_0x499ee5=_0x499ee5-0x126;let _0x2bd45d=_0x3fe0ca[_0x499ee5];return _0x2bd45d;},a129_0x499e(_0x428c94,_0x7eceb4);}const os=require('os'),util=require('util'),fs=require('fs'),{getProductMap}=require(a129_0x267770(0x13d)),logger=require(a129_0x267770(0x15f))[a129_0x267770(0x1a0)],constants=require(a129_0x267770(0x170)),testHubConstants=require(a129_0x267770(0x154)),{getTransformPath}=require(a129_0x267770(0x182)),{FUNNEL_INSTRUMENTATION_API_URL}=require(a129_0x267770(0x170)),{generateCIArtifacts,printNudgeLocalNotSetError}=require(a129_0x267770(0x192)),PerformanceTester=require(a129_0x267770(0x12b)),globals=require('./globals'),helper=require(a129_0x267770(0x192)),{isTestObservabilitySession}=require(a129_0x267770(0x16b));let unhandledErrors='';function a129_0x3fe0(){const _0xe36589=['bPQXS','codeceptjs','config','version','Error\x20in\x20firing\x20request\x20to\x20','./testhub/utils','osVersion','AugLU','Directory\x20','zofyc','egrqr','isNullOrEmpty','apply','chmodSync','dkScc','SDKTestSuccessful','buildName','ZlbJz','getFrameworkVersion','Error\x20while\x20parsing\x20tests\x20errors,\x20Exception:\x20','unknown','fireFunnelTestEvent','qBzmP','env','finalExecution','error','Lgsli','XFdrU','../helpers/testhub/constants',',\x20testhub\x20id:\x20','Something\x20went\x20wrong\x20in\x20Final\x20Execution\x20step\x20:\x20','DXeBr','globalException','nodejs','deviceName','HhCue','browserVersion','UCjcY','getTurboScaleBuildLink','./logger','IoGAJ','NrIyg','application/json','length','150885VMwDsZ','isTurboScaleSession','6quoGtK','name','HRHTg','keys','3516550fOxMGT','./test-observability/utils','setReadWriteExecuteAccess','ferTl','5xlmdMk','body','../bin/utils/constants','every','source','Failed\x20to\x20set\x20directory\x20access:\x20','tMrbt','18535319wLjLyT','app','stack','getBuildLink','content-type','join','APP_AUTOMATE','PRODUCT_IF_NOT_BROWSERSTACK_INFRA','constants','KYskd','all','zYsgc','Firing\x20SDK\x20event\x20for\x20funnel\x20data:\x20','../bin/playwright/reporter/pwUtils','tests','user_killed','split','replace','xUGxK','event_properties','AUTOMATE','SDK\x20run\x20ended\x20for\x20id:\x20','unhandledErrors','toString','browser','HrVHP','finishedMetadata','4gNqYuS','getAccessKey','./helper','type','sdkRunId','forEach','buildIdentifier','FEKBD','API\x20Event\x20','assign','getSessionsList','AEasr','format','browserStackConfig','killSignal','181035vpLqVu','winstonLogger','VFNGN','JhHfS','962132hPjIwa','aWETK','AUTOMATE_PRODUCTS','info','7138033VLpoVB','Playwright','tmHHD','seleniumVersion','requirePWModule','parse','accessSync','framework','getGlobal','63AYlPzs','undefined','sendLogs','hostname','./performance/performance-tester','trim','debug','values','1180696SsMPXp','errorMessage','getStackTraceAsString','getPackageVersion','getUserName','push','W_OK','nodeRequest','hDGLa'];a129_0x3fe0=function(){return _0xe36589;};return a129_0x3fe0();}exports[a129_0x267770(0x14d)]=async(_0x949aba,_0x15cc12={},_0x419919,_0x2df11c)=>{const _0x413165=a129_0x267770,_0x315133={'UCjcY':function(_0x57aeb4,_0x310301){return _0x57aeb4===_0x310301;},'wZXtS':'object','tMrbt':function(_0x120165,_0x2c1d80){return _0x120165>_0x2c1d80;},'aWETK':function(_0x5b5c40,_0x23d5e4){return _0x5b5c40>_0x23d5e4;},'zYsgc':_0x413165(0x183),'idvWX':function(_0x5603b3){return _0x5603b3();},'QhwhI':function(_0x24318c,_0x85762d){return _0x24318c==_0x85762d;},'HRHTg':'null','FEKBD':function(_0x11a09e,_0x486032){return _0x11a09e===_0x486032;},'KYskd':_0x413165(0x128),'AugLU':function(_0x7dda2,_0x2a6f44){return _0x7dda2===_0x2a6f44;},'dkScc':_0x413165(0x139),'NZxIG':function(_0x4d6367,_0x591f53){return _0x4d6367!==_0x591f53;},'DXeBr':_0x413165(0x1a8),'QXhts':function(_0x2c2146,_0x3c99de){return _0x2c2146===_0x3c99de;},'tmHHD':_0x413165(0x151),'sYRRF':function(_0x2e661a,_0x3ad0f3){return _0x2e661a+_0x3ad0f3;},'zofyc':_0x413165(0x14b),'FAwlH':'_buildHashedId','ZlbJz':function(_0xf0d22f,_0x2c2ec1){return _0xf0d22f(_0x2c2ec1);},'NPBxh':function(_0x5af188,_0x27a73d){return _0x5af188(_0x27a73d);},'hDGLa':_0x413165(0x14c),'ruhTT':_0x413165(0x159),'ferTl':_0x413165(0x147),'xUGxK':function(_0x5b7533){return _0x5b7533();},'Lgsli':'selenium-webdriver','XFdrU':_0x413165(0x162),'bPQXS':'[REDACTED]','vyefX':'POST'};let _0x2ea041=[];if(helper['isBrowserstackInfra']()&&_0x315133['idvWX'](isTestObservabilitySession))_0x2ea041=_0x419919['app']?constants['APP_AUTOMATE_PRODUCTS']:constants[_0x413165(0x1a5)];else{if(_0x315133['idvWX'](isTestObservabilitySession))_0x2ea041=constants[_0x413165(0x17c)];else helper['isBrowserstackInfra']()&&(_0x2ea041=_0x419919[_0x413165(0x176)]?constants[_0x413165(0x17b)]:constants[_0x413165(0x189)]);}let _0x2a5cfb=_0x419919[_0x413165(0x196)];if(_0x315133['QhwhI'](_0x2a5cfb,null))_0x2a5cfb=_0x315133[_0x413165(0x168)];else _0x315133[_0x413165(0x197)](_0x2a5cfb,undefined)&&(_0x2a5cfb=_0x315133[_0x413165(0x17e)]);unhandledErrors&&_0x315133[_0x413165(0x174)](unhandledErrors[_0x413165(0x163)],0x0)&&(_0x15cc12[_0x413165(0x158)]=unhandledErrors);global['sdkRunId']&&(_0x15cc12[_0x413165(0x194)]=global[_0x413165(0x194)]);try{if(_0x15cc12[_0x413165(0x151)]){if(_0x315133[_0x413165(0x13f)](_0x2df11c,_0x315133[_0x413165(0x146)])&&_0x315133[_0x413165(0x1a4)](_0x15cc12['error'][_0x413165(0x163)],0x0)){const _0x49013f={};_0x49013f['os']='',_0x49013f['osVersion']='',_0x49013f['browser']='',_0x49013f[_0x413165(0x15c)]='';const _0x3c29de=_0x49013f;let _0x12e376={};const _0x1ab311=_0x15cc12[_0x413165(0x151)];_0x12e376=_0x1ab311['reduce']((_0x2d4ae8,_0x4abae6)=>{for(const _0x39a164 in _0x4abae6){_0x2d4ae8[_0x39a164]=_0x4abae6[_0x39a164];}return _0x2d4ae8;},{});const _0x3367ef={};_0x3367ef[_0x413165(0x183)]=_0x12e376,_0x15cc12[_0x413165(0x151)]=[Object[_0x413165(0x199)]({},_0x3c29de,_0x3367ef)];}else{let _0x22ff60=0x0;const _0x504f4f=_0x315133['NZxIG'](_0x2df11c,_0x315133[_0x413165(0x157)])?JSON[_0x413165(0x1ac)](_0x15cc12[_0x413165(0x151)]):_0x15cc12['error'],_0x20f563=Object[_0x413165(0x12e)](_0x504f4f);_0x20f563['forEach'](_0x2cc175=>{const _0x2957ee=_0x413165;if(_0x315133[_0x2957ee(0x15d)](typeof _0x2cc175,_0x315133['wZXtS'])){const _0x16ca17=Object[_0x2957ee(0x12e)](_0x2cc175);!_0x16ca17[_0x2957ee(0x171)](_0x1eb89e=>_0x1eb89e===null||_0x1eb89e===undefined||_0x1eb89e==='')&&(_0x22ff60+=0x1);}});if(_0x315133['QXhts'](_0x22ff60,0x0))delete _0x15cc12[_0x315133[_0x413165(0x1a9)]];else{const _0x34a085=[];Object[_0x413165(0x169)](_0x504f4f)[_0x413165(0x195)](_0x35dd3f=>{const _0x38cbc0=_0x413165,[_0x2a0fcc,_0x242364,_0x29cb2a,_0x2e3b48]=_0x35dd3f[_0x38cbc0(0x185)](',\x20');let _0x54426b={};if(!_0x2e3b48){const _0x414773={};_0x414773[_0x38cbc0(0x15a)]=_0x2a0fcc,_0x414773[_0x38cbc0(0x13e)]=_0x242364,_0x414773[_0x38cbc0(0x18d)]=_0x29cb2a,_0x54426b=_0x414773;}else{const _0x2556dc={};_0x2556dc['os']=_0x2a0fcc,_0x2556dc[_0x38cbc0(0x13e)]=_0x242364,_0x2556dc['browser']=_0x29cb2a,_0x2556dc['browserVersion']=_0x2e3b48,_0x54426b=_0x2556dc;}const _0x11da5f={},_0x18caf1=_0x504f4f[_0x35dd3f];Object[_0x38cbc0(0x169)](_0x18caf1)[_0x38cbc0(0x195)](_0x4c086a=>{const _0x1dacc3=_0x38cbc0;_0x315133[_0x1dacc3(0x174)](_0x18caf1[_0x4c086a][_0x1dacc3(0x163)],0x0)&&(_0x11da5f[_0x4c086a]=_0x18caf1[_0x4c086a]);}),_0x315133[_0x38cbc0(0x1a4)](Object[_0x38cbc0(0x169)](_0x11da5f)['length'],0x0)&&(_0x54426b[_0x315133[_0x38cbc0(0x180)]]=_0x11da5f,_0x34a085[_0x38cbc0(0x134)](_0x54426b));}),_0x315133[_0x413165(0x174)](_0x34a085['length'],0x0)?_0x15cc12['error']=_0x34a085:delete _0x15cc12[_0x315133['tmHHD']];}}}}catch(_0x4b49eb){delete _0x15cc12[_0x315133[_0x413165(0x1a9)]],logger[_0x413165(0x12d)](_0x315133['sYRRF'](_0x315133[_0x413165(0x141)],_0x4b49eb));}const _0x338c1f=helper['getTestFrameworkDetails'](_0x419919,_0x419919[_0x413165(0x1ae)]),_0x398519={'userName':helper[_0x413165(0x133)](_0x419919),'accessKey':helper[_0x413165(0x191)](_0x419919),'event_type':_0x949aba,'detectedFramework':_0x2df11c,'buildHashedId':globals[_0x413165(0x126)](_0x315133['FAwlH']),'optimalHubUrl':helper['getOptimalHubUrl'](),'event_properties':{'testhub_uuid':process[_0x413165(0x14f)][testHubConstants['ENV_VAR']['BROWSERSTACK_TESTHUB_UUID']]||'','sdkRunId':global['sdkRunId'],'product_map':_0x315133[_0x413165(0x149)](getProductMap,_0x419919),'productMap':_0x315133['NPBxh'](getProductMap,_0x419919),'language_framework':_0x419919[_0x413165(0x172)]||_0x315133[_0x413165(0x137)],'referrer':helper['getNodeAgent'](_0x2df11c),'framework':_0x419919[_0x413165(0x1ae)],'frameworkVersion':helper[_0x413165(0x14a)](_0x2df11c),'automationFramework':_0x338c1f[_0x413165(0x167)],'automationFrameworkVersion':_0x338c1f['version'],'language':_0x315133['ruhTT'],'languageVersion':process[_0x413165(0x13b)],'product':_0x2ea041,'buildName':_0x419919[_0x413165(0x148)]||_0x315133[_0x413165(0x17e)],'buildIdentifier':_0x2a5cfb,'os':os[_0x413165(0x193)]()||_0x315133['hDGLa'],'hostname':os[_0x413165(0x12a)]()||_0x315133[_0x413165(0x137)],..._0x15cc12}};try{_0x315133['UCjcY'](_0x949aba,_0x315133[_0x413165(0x16d)])&&(_0x398519['event_properties'][_0x413165(0x19d)]=helper['sanitizeBrowserStackConfig'](_0x419919)),_0x315133[_0x413165(0x13f)](_0x2df11c,_0x315133['DXeBr'])?_0x398519[_0x413165(0x188)]['playwrightVersion']=helper[_0x413165(0x1ab)][_0x413165(0x144)](null,_0x315133[_0x413165(0x187)](getTransformPath),!![]):_0x398519['event_properties'][_0x413165(0x1aa)]=helper[_0x413165(0x132)](_0x315133[_0x413165(0x152)]);}catch(_0x41f476){logger[_0x413165(0x12d)]('Error\x20in\x20getting\x20framework\x20version\x20to\x20:\x20'+_0x41f476);}const _0x502b74={};_0x502b74[_0x413165(0x179)]=_0x315133[_0x413165(0x153)];const _0x5e4b87={'headers':_0x502b74,'body':_0x398519,'auth':{'user':helper[_0x413165(0x133)](_0x419919),'pass':helper[_0x413165(0x191)](_0x419919)},'json':!![]};logger[_0x413165(0x12d)](_0x413165(0x181)+JSON['stringify'](_0x5e4b87[_0x413165(0x16f)])['replace'](new RegExp(helper['getUserName'](_0x419919),'g'),_0x315133[_0x413165(0x138)])[_0x413165(0x186)](new RegExp(helper[_0x413165(0x191)](_0x419919),'g'),_0x315133[_0x413165(0x138)]));try{const _0x43f3d5=await helper[_0x413165(0x136)](_0x315133['vyefX'],constants['FUNNEL_INSTRUMENTATION_API_URL'],_0x5e4b87,_0x419919);logger[_0x413165(0x12d)](_0x413165(0x198)+_0x949aba+'\x20response\x20-\x20'+util[_0x413165(0x19c)]('%j',_0x43f3d5));}catch(_0x3b03c1){logger[_0x413165(0x12d)](_0x413165(0x13c)+FUNNEL_INSTRUMENTATION_API_URL+'\x20:\x20'+util[_0x413165(0x19c)](_0x3b03c1));}},exports[a129_0x267770(0x150)]=async _0x29ed81=>{const _0x46688b=a129_0x267770,_0x3e87bc={'HrVHP':function(_0x6a4523){return _0x6a4523();},'pfbpn':_0x46688b(0x18f),'jaYzr':_0x46688b(0x184),'NrIyg':_0x46688b(0x147),'egrqr':function(_0x445f4f,_0x46f028,_0x4ad9d9){return _0x445f4f(_0x46f028,_0x4ad9d9);},'JhHfS':function(_0x1a503b,_0xcdfc3b){return _0x1a503b+_0xcdfc3b;},'AEasr':_0x46688b(0x156)};try{await _0x29ed81['stopPercy'](),_0x3e87bc[_0x46688b(0x18e)](printNudgeLocalNotSetError);const _0x32796d={};_0x32796d['error']=_0x29ed81[_0x46688b(0x130)]?_0x29ed81['errorMessage']:'{}';const _0xaf92c1=_0x32796d,_0x259bf4=Object['assign']({},_0xaf92c1);!!_0x29ed81[_0x46688b(0x19e)]&&(_0x259bf4[_0x3e87bc['pfbpn']]={'reason':_0x3e87bc['jaYzr'],'signal':_0x29ed81[_0x46688b(0x19e)]});unhandledErrors=_0x29ed81[_0x46688b(0x18b)][_0x46688b(0x17a)]('\x0a');let _0x252a33,_0x4e6251,_0x5bba1b;helper[_0x46688b(0x165)](_0x29ed81['config'])?([_0x252a33,_0x4e6251]=await helper[_0x46688b(0x15e)](_0x29ed81[_0x46688b(0x13a)]),[_0x5bba1b]=await Promise[_0x46688b(0x17f)]([helper['getTurboScaleSessionsList'](_0x252a33,_0x29ed81[_0x46688b(0x13a)]),exports['fireFunnelTestEvent'](_0x3e87bc['NrIyg'],_0x259bf4,_0x29ed81[_0x46688b(0x13a)],_0x29ed81[_0x46688b(0x1ae)])])):([_0x252a33,_0x4e6251]=await helper[_0x46688b(0x178)](_0x29ed81[_0x46688b(0x13a)]),[_0x5bba1b]=await Promise[_0x46688b(0x17f)]([helper[_0x46688b(0x19a)](_0x252a33,_0x29ed81[_0x46688b(0x13a)]),exports[_0x46688b(0x14d)](_0x3e87bc[_0x46688b(0x161)],_0x259bf4,_0x29ed81[_0x46688b(0x13a)],_0x29ed81[_0x46688b(0x1ae)])])),_0x5bba1b&&await _0x3e87bc[_0x46688b(0x142)](generateCIArtifacts,_0x5bba1b,_0x4e6251),logger[_0x46688b(0x1a6)](_0x46688b(0x18a)+_0x29ed81[_0x46688b(0x194)]+_0x46688b(0x155)+process[_0x46688b(0x14f)]['BROWSERSTACK_TESTHUB_UUID']),await helper[_0x46688b(0x129)](_0x29ed81['config']);}catch(_0x22b826){logger[_0x46688b(0x12d)](_0x3e87bc[_0x46688b(0x1a2)](_0x3e87bc[_0x46688b(0x19b)],_0x22b826));}helper['notifyUpdate']();},exports['getStackTraceAsString']=_0x12ff29=>{const _0x4e19ec=a129_0x267770,_0x1ac9ec={'VFNGN':function(_0x48046a,_0xcd667){return _0x48046a instanceof _0xcd667;},'qBzmP':function(_0x99ed47,_0x3ca5f2){return _0x99ed47(_0x3ca5f2);}};try{if(_0x1ac9ec[_0x4e19ec(0x1a1)](_0x12ff29,Error))return _0x12ff29[_0x4e19ec(0x177)]||_0x12ff29['toString']();return _0x1ac9ec[_0x4e19ec(0x14e)](String,_0x12ff29);}catch(_0x3bd46d){return _0x12ff29?_0x12ff29[_0x4e19ec(0x18c)]():'';}},exports[a129_0x267770(0x143)]=_0x187f5f=>{const _0x4ae548=a129_0x267770,_0x148f57={};_0x148f57['IoGAJ']=function(_0x50be29,_0x1c3146){return _0x50be29===_0x1c3146;};const _0x48268c=_0x148f57;return!_0x187f5f||_0x48268c[_0x4ae548(0x160)](_0x187f5f[_0x4ae548(0x12c)](),'');},exports['isModifiable']=_0x5e3b86=>{const _0x55d274=a129_0x267770,_0x4a2177={};_0x4a2177[_0x55d274(0x15b)]=function(_0x311a16,_0xddb485){return _0x311a16|_0xddb485;};const _0x4a837a=_0x4a2177;try{return fs[_0x55d274(0x1ad)](_0x5e3b86,_0x4a837a[_0x55d274(0x15b)](fs[_0x55d274(0x17d)][_0x55d274(0x135)],fs[_0x55d274(0x17d)]['X_OK'])),!![];}catch(_0x3a6005){return![];}},exports[a129_0x267770(0x16c)]=_0x311442=>{const _0x1f4abe=a129_0x267770;try{fs[_0x1f4abe(0x145)](_0x311442,0x1ff),logger['debug'](_0x1f4abe(0x140)+_0x311442+'\x20has\x20now\x20read/write/execute\x20permissions.');}catch(_0x1f2f9b){logger[_0x1f4abe(0x151)](_0x1f4abe(0x173)+exports[_0x1f4abe(0x131)](_0x1f2f9b));}};