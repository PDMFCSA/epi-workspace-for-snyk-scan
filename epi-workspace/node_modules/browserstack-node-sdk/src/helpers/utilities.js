const a137_0x250c6c=a137_0x5a76;(function(_0x38b5b7,_0x55afee){const _0x3b2d2e=a137_0x5a76,_0x6047b7=_0x38b5b7();while(!![]){try{const _0x3cc9d6=-parseInt(_0x3b2d2e(0xea))/0x1+-parseInt(_0x3b2d2e(0xef))/0x2+parseInt(_0x3b2d2e(0x79))/0x3+parseInt(_0x3b2d2e(0x98))/0x4*(-parseInt(_0x3b2d2e(0xa5))/0x5)+parseInt(_0x3b2d2e(0xee))/0x6*(parseInt(_0x3b2d2e(0xf8))/0x7)+parseInt(_0x3b2d2e(0xaf))/0x8+parseInt(_0x3b2d2e(0xc7))/0x9*(parseInt(_0x3b2d2e(0x99))/0xa);if(_0x3cc9d6===_0x55afee)break;else _0x6047b7['push'](_0x6047b7['shift']());}catch(_0x4285b1){_0x6047b7['push'](_0x6047b7['shift']());}}}(a137_0x2166,0x5a461));function a137_0x5a76(_0x3c2e67,_0x404e50){const _0x216681=a137_0x2166();return a137_0x5a76=function(_0x5a76ae,_0x12c8b3){_0x5a76ae=_0x5a76ae-0x6d;let _0x53ed29=_0x216681[_0x5a76ae];return _0x53ed29;},a137_0x5a76(_0x3c2e67,_0x404e50);}const os=require('os'),util=require('util'),fs=require('fs'),{getProductMap}=require('./testhub/utils'),logger=require(a137_0x250c6c(0xb1))['winstonLogger'],constants=require('../bin/utils/constants'),testHubConstants=require(a137_0x250c6c(0x77)),{getTransformPath}=require(a137_0x250c6c(0xf6)),{FUNNEL_INSTRUMENTATION_API_URL}=require('../bin/utils/constants'),{generateCIArtifacts,printNudgeLocalNotSetError}=require('./helper'),PerformanceTester=require(a137_0x250c6c(0xbe)),globals=require(a137_0x250c6c(0xd3)),helper=require(a137_0x250c6c(0xae)),{isTestObservabilitySession}=require('./test-observability/utils');let unhandledErrors='';function a137_0x2166(){const _0x4eb053=['length','getSessionsList','version','bJtvT','HSvIs','config','content-type','Error\x20in\x20firing\x20request\x20to\x20','PwtVi','hXdaE','cRhBT','\x20response\x20-\x20','push','\x20has\x20now\x20read/write/execute\x20permissions.','626700kGsZLP','isBrowserstackInfra','null','YebIG','2937054yDDLCw','61120cMFAQJ','APP_AUTOMATE_PRODUCTS','constants','framework','body','JgKaN','undefined','../bin/playwright/reporter/pwUtils','buildIdentifier','7tflkTl','source','apply','reduce','forEach','seleniumVersion','sendLogs','eNfwZ','isModifiable','zBIEP','getStackTraceAsString','BROWSERSTACK_TESTHUB_UUID','../helpers/testhub/constants','getUserName','40410CbYvVq','RmEKH','error','finalExecution','getNodeAgent','deviceName','join','FubPY','type','errorMessage','APP_AUTOMATE','nodeRequest','Error\x20while\x20parsing\x20tests\x20errors,\x20Exception:\x20','split','API\x20Event\x20','finishedMetadata','browserStackConfig','getPackageVersion','unhandledErrors','Error\x20in\x20getting\x20framework\x20version\x20to\x20:\x20','UrRPT','XeuPN','accessSync','kdJzp','rlxzl','sLBin','object',',\x20testhub\x20id:\x20','chmodSync','xsfoL','HngRN','2098696AqLsmz','315240dBAKbj','Rtpuh','SDK\x20run\x20ended\x20for\x20id:\x20','fireFunnelTestEvent','X_OK','values','keys','toString','all','name','PRODUCT_IF_NOT_BROWSERSTACK_INFRA','POST','5eVZxiQ','SDKTestSuccessful','debug','sanitizeBrowserStackConfig','nveUo','ENV_VAR','rldes','Vcwzu','setReadWriteExecuteAccess','./helper','5111232xDiwim','osVersion','./logger','[REDACTED]','info','stopPercy','notifyUpdate','user_killed','application/json','format','lryxB','killSignal','event_properties','every','getOptimalHubUrl','./performance/performance-tester','assign','buildName','getBuildLink','nHKzU','selenium-webdriver','nodejs','sdkRunId','qOICm','117yqFCGm','jCPqr','browser','isNullOrEmpty','Playwright','trim','Directory\x20','GSICw','replace','browserVersion','app','IFyIr','./globals','stack','getFrameworkVersion','getAccessKey','codeceptjs','Something\x20went\x20wrong\x20in\x20Final\x20Execution\x20step\x20:\x20','globalException','tests','FwcfN'];a137_0x2166=function(){return _0x4eb053;};return a137_0x2166();}exports[a137_0x250c6c(0x9c)]=async(_0x50d97b,_0x3220ba={},_0x3f24a3,_0x23c8d9)=>{const _0x16d86f=a137_0x250c6c,_0x102ef6={'XeuPN':function(_0x192d3b,_0x4a81ca){return _0x192d3b===_0x4a81ca;},'KRCBi':_0x16d86f(0x93),'bJtvT':function(_0x5eaf1f,_0x31f9bb){return _0x5eaf1f>_0x31f9bb;},'nveUo':'tests','jtANP':function(_0x154177){return _0x154177();},'VumpK':function(_0xfab2b4){return _0xfab2b4();},'GSICw':function(_0x44e5da,_0xf36738){return _0x44e5da==_0xf36738;},'lryxB':_0x16d86f(0xec),'cRhBT':function(_0x372702,_0x285b68){return _0x372702===_0x285b68;},'xsfoL':_0x16d86f(0xf5),'qLoRl':function(_0x4977c8,_0xb4ae50){return _0x4977c8>_0xb4ae50;},'rldes':_0x16d86f(0xd7),'RmEKH':function(_0x1922c1,_0x36137e){return _0x1922c1>_0x36137e;},'Vcwzu':function(_0x530816,_0x4ec176){return _0x530816!==_0x4ec176;},'YebIG':_0x16d86f(0xcb),'IFyIr':'error','qOICm':function(_0x1e5480,_0x4bc82e){return _0x1e5480+_0x4bc82e;},'hXdaE':_0x16d86f(0x85),'HSvIs':'_buildHashedId','FwcfN':function(_0x4b745e,_0x42f9a4){return _0x4b745e(_0x42f9a4);},'PwtVi':function(_0x578475,_0x329baa){return _0x578475(_0x329baa);},'rlxzl':'unknown','eNfwZ':_0x16d86f(0xc4),'zBIEP':function(_0x10e959,_0x502aec){return _0x10e959===_0x502aec;},'zmyaM':_0x16d86f(0xa6),'sLBin':function(_0x2b130d,_0x3c558b){return _0x2b130d===_0x3c558b;},'adAce':_0x16d86f(0xc3),'ZhAkI':_0x16d86f(0xb7),'BPGns':_0x16d86f(0xb2),'kdJzp':_0x16d86f(0xa4)};let _0x195f13=[];if(helper[_0x16d86f(0xeb)]()&&_0x102ef6['jtANP'](isTestObservabilitySession))_0x195f13=_0x3f24a3[_0x16d86f(0xd1)]?constants[_0x16d86f(0xf0)]:constants['AUTOMATE_PRODUCTS'];else{if(_0x102ef6['VumpK'](isTestObservabilitySession))_0x195f13=constants[_0x16d86f(0xa3)];else helper[_0x16d86f(0xeb)]()&&(_0x195f13=_0x3f24a3['app']?constants[_0x16d86f(0x83)]:constants['AUTOMATE']);}let _0x4d1ef3=_0x3f24a3[_0x16d86f(0xf7)];if(_0x102ef6[_0x16d86f(0xce)](_0x4d1ef3,null))_0x4d1ef3=_0x102ef6[_0x16d86f(0xb9)];else _0x102ef6[_0x16d86f(0xe6)](_0x4d1ef3,undefined)&&(_0x4d1ef3=_0x102ef6[_0x16d86f(0x96)]);unhandledErrors&&_0x102ef6['qLoRl'](unhandledErrors['length'],0x0)&&(_0x3220ba[_0x16d86f(0xd9)]=unhandledErrors);global[_0x16d86f(0xc5)]&&(_0x3220ba[_0x16d86f(0xc5)]=global[_0x16d86f(0xc5)]);try{if(_0x3220ba[_0x16d86f(0x7b)]){if(_0x102ef6['cRhBT'](_0x23c8d9,_0x102ef6[_0x16d86f(0xab)])&&_0x102ef6[_0x16d86f(0x7a)](_0x3220ba['error'][_0x16d86f(0xdc)],0x0)){const _0x38781c={};_0x38781c['os']='',_0x38781c['osVersion']='',_0x38781c[_0x16d86f(0xc9)]='',_0x38781c[_0x16d86f(0xd0)]='';const _0x4ecbac=_0x38781c;let _0x37645b={};const _0xad315e=_0x3220ba[_0x16d86f(0x7b)];_0x37645b=_0xad315e[_0x16d86f(0x6e)]((_0x28de30,_0x384917)=>{for(const _0x4f5707 in _0x384917){_0x28de30[_0x4f5707]=_0x384917[_0x4f5707];}return _0x28de30;},{});const _0x1a1c12={};_0x1a1c12[_0x16d86f(0xda)]=_0x37645b,_0x3220ba[_0x16d86f(0x7b)]=[Object[_0x16d86f(0xbf)]({},_0x4ecbac,_0x1a1c12)];}else{let _0x360e58=0x0;const _0x207b2d=_0x102ef6[_0x16d86f(0xac)](_0x23c8d9,_0x102ef6[_0x16d86f(0xed)])?JSON['parse'](_0x3220ba[_0x16d86f(0x7b)]):_0x3220ba[_0x16d86f(0x7b)],_0x3f60b0=Object[_0x16d86f(0x9e)](_0x207b2d);_0x3f60b0[_0x16d86f(0x6f)](_0x27af44=>{const _0x561f0f=_0x16d86f;if(_0x102ef6[_0x561f0f(0x8e)](typeof _0x27af44,_0x102ef6['KRCBi'])){const _0x426f13=Object[_0x561f0f(0x9e)](_0x27af44);!_0x426f13[_0x561f0f(0xbc)](_0x1e6a3b=>_0x1e6a3b===null||_0x1e6a3b===undefined||_0x1e6a3b==='')&&(_0x360e58+=0x1);}});if(_0x102ef6[_0x16d86f(0x8e)](_0x360e58,0x0))delete _0x3220ba[_0x102ef6[_0x16d86f(0xd2)]];else{const _0x4f7563=[];Object[_0x16d86f(0x9f)](_0x207b2d)[_0x16d86f(0x6f)](_0x3203d5=>{const _0x2e0e11=_0x16d86f,[_0x1757f7,_0x3f5521,_0x1d46b3,_0x4301ab]=_0x3203d5[_0x2e0e11(0x86)](',\x20');let _0x10f48f={};if(!_0x4301ab){const _0x313d4d={};_0x313d4d[_0x2e0e11(0x7e)]=_0x1757f7,_0x313d4d[_0x2e0e11(0xb0)]=_0x3f5521,_0x313d4d[_0x2e0e11(0xc9)]=_0x1d46b3,_0x10f48f=_0x313d4d;}else{const _0xdd9327={};_0xdd9327['os']=_0x1757f7,_0xdd9327[_0x2e0e11(0xb0)]=_0x3f5521,_0xdd9327[_0x2e0e11(0xc9)]=_0x1d46b3,_0xdd9327[_0x2e0e11(0xd0)]=_0x4301ab,_0x10f48f=_0xdd9327;}const _0x3af0a6={},_0x223ada=_0x207b2d[_0x3203d5];Object['keys'](_0x223ada)['forEach'](_0x52113d=>{_0x102ef6['bJtvT'](_0x223ada[_0x52113d]['length'],0x0)&&(_0x3af0a6[_0x52113d]=_0x223ada[_0x52113d]);}),_0x102ef6[_0x2e0e11(0xdf)](Object[_0x2e0e11(0x9f)](_0x3af0a6)[_0x2e0e11(0xdc)],0x0)&&(_0x10f48f[_0x102ef6[_0x2e0e11(0xa9)]]=_0x3af0a6,_0x4f7563[_0x2e0e11(0xe8)](_0x10f48f));}),_0x102ef6[_0x16d86f(0xdf)](_0x4f7563['length'],0x0)?_0x3220ba[_0x16d86f(0x7b)]=_0x4f7563:delete _0x3220ba[_0x102ef6[_0x16d86f(0xd2)]];}}}}catch(_0xf5f559){delete _0x3220ba[_0x102ef6[_0x16d86f(0xd2)]],logger[_0x16d86f(0xa7)](_0x102ef6[_0x16d86f(0xc6)](_0x102ef6[_0x16d86f(0xe5)],_0xf5f559));}const _0x3985f7=helper['getTestFrameworkDetails'](_0x3f24a3,_0x3f24a3['framework']),_0x20a539={'userName':helper[_0x16d86f(0x78)](_0x3f24a3),'accessKey':helper[_0x16d86f(0xd6)](_0x3f24a3),'event_type':_0x50d97b,'detectedFramework':_0x23c8d9,'buildHashedId':globals['getGlobal'](_0x102ef6[_0x16d86f(0xe0)]),'optimalHubUrl':helper[_0x16d86f(0xbd)](),'event_properties':{'testhub_uuid':process['env'][testHubConstants[_0x16d86f(0xaa)][_0x16d86f(0x76)]]||'','sdkRunId':global[_0x16d86f(0xc5)],'product_map':_0x102ef6[_0x16d86f(0xdb)](getProductMap,_0x3f24a3),'productMap':_0x102ef6[_0x16d86f(0xe4)](getProductMap,_0x3f24a3),'language_framework':_0x3f24a3[_0x16d86f(0xf9)]||_0x102ef6[_0x16d86f(0x91)],'referrer':helper[_0x16d86f(0x7d)](_0x23c8d9),'framework':_0x3f24a3[_0x16d86f(0xf2)],'frameworkVersion':helper[_0x16d86f(0xd5)](_0x23c8d9),'automationFramework':_0x3985f7[_0x16d86f(0xa2)],'automationFrameworkVersion':_0x3985f7[_0x16d86f(0xde)],'language':_0x102ef6[_0x16d86f(0x72)],'languageVersion':process[_0x16d86f(0xde)],'product':_0x195f13,'buildName':_0x3f24a3[_0x16d86f(0xc0)]||_0x102ef6[_0x16d86f(0x96)],'buildIdentifier':_0x4d1ef3,'os':os[_0x16d86f(0x81)]()||_0x102ef6[_0x16d86f(0x91)],'hostname':os['hostname']()||_0x102ef6[_0x16d86f(0x91)],..._0x3220ba}};try{_0x102ef6[_0x16d86f(0x74)](_0x50d97b,_0x102ef6['zmyaM'])&&(_0x20a539[_0x16d86f(0xbb)][_0x16d86f(0x89)]=helper[_0x16d86f(0xa8)](_0x3f24a3)),_0x102ef6[_0x16d86f(0x92)](_0x23c8d9,_0x102ef6[_0x16d86f(0xed)])?_0x20a539['event_properties']['playwrightVersion']=helper['requirePWModule'][_0x16d86f(0x6d)](null,_0x102ef6['VumpK'](getTransformPath),!![]):_0x20a539['event_properties'][_0x16d86f(0x70)]=helper[_0x16d86f(0x8a)](_0x102ef6['adAce']);}catch(_0x19633a){logger[_0x16d86f(0xa7)](_0x16d86f(0x8c)+_0x19633a);}const _0x4e1957={};_0x4e1957[_0x16d86f(0xe2)]=_0x102ef6['ZhAkI'];const _0x3d890e={'headers':_0x4e1957,'body':_0x20a539,'auth':{'user':helper[_0x16d86f(0x78)](_0x3f24a3),'pass':helper['getAccessKey'](_0x3f24a3)},'json':!![]};logger[_0x16d86f(0xa7)]('Firing\x20SDK\x20event\x20for\x20funnel\x20data:\x20'+JSON['stringify'](_0x3d890e[_0x16d86f(0xf3)])[_0x16d86f(0xcf)](new RegExp(helper[_0x16d86f(0x78)](_0x3f24a3),'g'),_0x102ef6['BPGns'])[_0x16d86f(0xcf)](new RegExp(helper['getAccessKey'](_0x3f24a3),'g'),_0x102ef6['BPGns']));try{const _0x2533fd=await helper[_0x16d86f(0x84)](_0x102ef6[_0x16d86f(0x90)],FUNNEL_INSTRUMENTATION_API_URL,_0x3d890e,_0x3f24a3);logger[_0x16d86f(0xa7)](_0x16d86f(0x87)+_0x50d97b+_0x16d86f(0xe7)+util['format']('%j',_0x2533fd));}catch(_0x44eba0){logger[_0x16d86f(0xa7)](_0x16d86f(0xe3)+FUNNEL_INSTRUMENTATION_API_URL+'\x20:\x20'+util[_0x16d86f(0xb8)](_0x44eba0));}},exports[a137_0x250c6c(0x7c)]=async _0x5ad7a8=>{const _0x43100f=a137_0x250c6c,_0x2cb87c={'nHKzU':function(_0x538e31){return _0x538e31();},'RxMwu':_0x43100f(0x88),'MmaBW':_0x43100f(0xb6),'Rtpuh':_0x43100f(0xa6),'UrRPT':function(_0x2d826b,_0x4d2d91,_0x4e2b0f){return _0x2d826b(_0x4d2d91,_0x4e2b0f);},'inTAn':function(_0x4aa7e4,_0x3b33a2){return _0x4aa7e4+_0x3b33a2;},'upiXc':_0x43100f(0xd8)};try{await _0x5ad7a8[_0x43100f(0xb4)](),_0x2cb87c[_0x43100f(0xc2)](printNudgeLocalNotSetError);const _0x28c5e7={};_0x28c5e7[_0x43100f(0x7b)]=_0x5ad7a8[_0x43100f(0x82)]?_0x5ad7a8['errorMessage']:'{}';const _0x1eda56=_0x28c5e7,_0x4840f5=Object['assign']({},_0x1eda56);!!_0x5ad7a8[_0x43100f(0xba)]&&(_0x4840f5[_0x2cb87c['RxMwu']]={'reason':_0x2cb87c['MmaBW'],'signal':_0x5ad7a8[_0x43100f(0xba)]});unhandledErrors=_0x5ad7a8[_0x43100f(0x8b)][_0x43100f(0x7f)]('\x0a');let _0x20ddb0,_0x547a2b,_0x4ea933;helper['isTurboScaleSession'](_0x5ad7a8[_0x43100f(0xe1)])?([_0x20ddb0,_0x547a2b]=await helper['getTurboScaleBuildLink'](_0x5ad7a8[_0x43100f(0xe1)]),[_0x4ea933]=await Promise[_0x43100f(0xa1)]([helper['getTurboScaleSessionsList'](_0x20ddb0,_0x5ad7a8[_0x43100f(0xe1)]),exports[_0x43100f(0x9c)](_0x2cb87c[_0x43100f(0x9a)],_0x4840f5,_0x5ad7a8[_0x43100f(0xe1)],_0x5ad7a8['framework'])])):([_0x20ddb0,_0x547a2b]=await helper[_0x43100f(0xc1)](_0x5ad7a8[_0x43100f(0xe1)]),[_0x4ea933]=await Promise[_0x43100f(0xa1)]([helper[_0x43100f(0xdd)](_0x20ddb0,_0x5ad7a8[_0x43100f(0xe1)]),exports['fireFunnelTestEvent'](_0x2cb87c[_0x43100f(0x9a)],_0x4840f5,_0x5ad7a8['config'],_0x5ad7a8['framework'])])),_0x4ea933&&await _0x2cb87c[_0x43100f(0x8d)](generateCIArtifacts,_0x4ea933,_0x547a2b),logger[_0x43100f(0xb3)](_0x43100f(0x9b)+_0x5ad7a8[_0x43100f(0xc5)]+_0x43100f(0x94)+process['env'][_0x43100f(0x76)]),await helper[_0x43100f(0x71)](_0x5ad7a8[_0x43100f(0xe1)]);}catch(_0x4533f8){logger['debug'](_0x2cb87c['inTAn'](_0x2cb87c['upiXc'],_0x4533f8));}helper[_0x43100f(0xb5)]();},exports['getStackTraceAsString']=_0x15b516=>{const _0x12b900=a137_0x250c6c,_0x43f68={'FubPY':function(_0x52b602,_0x42d37c){return _0x52b602 instanceof _0x42d37c;},'HngRN':function(_0x2dfbf1,_0x497a59){return _0x2dfbf1(_0x497a59);}};try{if(_0x43f68[_0x12b900(0x80)](_0x15b516,Error))return _0x15b516[_0x12b900(0xd4)]||_0x15b516['toString']();return _0x43f68[_0x12b900(0x97)](String,_0x15b516);}catch(_0x340627){return _0x15b516?_0x15b516[_0x12b900(0xa0)]():'';}},exports[a137_0x250c6c(0xca)]=_0x3f0cac=>{const _0x2f3e78=a137_0x250c6c,_0xdd7f7d={};_0xdd7f7d['jCPqr']=function(_0x2d49c8,_0x56b13c){return _0x2d49c8===_0x56b13c;};const _0x1526d8=_0xdd7f7d;return!_0x3f0cac||_0x1526d8[_0x2f3e78(0xc8)](_0x3f0cac[_0x2f3e78(0xcc)](),'');},exports[a137_0x250c6c(0x73)]=_0x483cc7=>{const _0x14d996=a137_0x250c6c,_0x2a5392={};_0x2a5392[_0x14d996(0xf4)]=function(_0xe1f2fe,_0x57deeb){return _0xe1f2fe|_0x57deeb;};const _0x21b12a=_0x2a5392;try{return fs[_0x14d996(0x8f)](_0x483cc7,_0x21b12a[_0x14d996(0xf4)](fs[_0x14d996(0xf1)]['W_OK'],fs['constants'][_0x14d996(0x9d)])),!![];}catch(_0x5cf726){return![];}},exports[a137_0x250c6c(0xad)]=_0x35fd99=>{const _0x333458=a137_0x250c6c;try{fs[_0x333458(0x95)](_0x35fd99,0x1ff),logger[_0x333458(0xa7)](_0x333458(0xcd)+_0x35fd99+_0x333458(0xe9));}catch(_0x1af108){logger[_0x333458(0x7b)]('Failed\x20to\x20set\x20directory\x20access:\x20'+exports[_0x333458(0x75)](_0x1af108));}};