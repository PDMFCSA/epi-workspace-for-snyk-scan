const a137_0xf15317=a137_0x4f2c;function a137_0x4f2c(_0x5ca974,_0x48bf75){const _0x5a4023=a137_0x5a40();return a137_0x4f2c=function(_0x4f2cdd,_0x5a2fbb){_0x4f2cdd=_0x4f2cdd-0x1d2;let _0x24f8ce=_0x5a4023[_0x4f2cdd];return _0x24f8ce;},a137_0x4f2c(_0x5ca974,_0x48bf75);}(function(_0x5356fa,_0x23936f){const _0x5a8fbd=a137_0x4f2c,_0x2c7798=_0x5356fa();while(!![]){try{const _0x44cd19=-parseInt(_0x5a8fbd(0x259))/0x1+parseInt(_0x5a8fbd(0x1ea))/0x2*(-parseInt(_0x5a8fbd(0x258))/0x3)+-parseInt(_0x5a8fbd(0x242))/0x4*(parseInt(_0x5a8fbd(0x253))/0x5)+-parseInt(_0x5a8fbd(0x1fc))/0x6+-parseInt(_0x5a8fbd(0x1d3))/0x7+-parseInt(_0x5a8fbd(0x207))/0x8*(parseInt(_0x5a8fbd(0x21a))/0x9)+parseInt(_0x5a8fbd(0x1fa))/0xa*(parseInt(_0x5a8fbd(0x24b))/0xb);if(_0x44cd19===_0x23936f)break;else _0x2c7798['push'](_0x2c7798['shift']());}catch(_0x3f47fd){_0x2c7798['push'](_0x2c7798['shift']());}}}(a137_0x5a40,0xa550b));const os=require('os'),util=require(a137_0xf15317(0x25f)),fs=require('fs'),{getProductMap}=require('./testhub/utils'),logger=require(a137_0xf15317(0x24d))['winstonLogger'],constants=require('../bin/utils/constants'),testHubConstants=require('../helpers/testhub/constants'),{getTransformPath}=require(a137_0xf15317(0x215)),{FUNNEL_INSTRUMENTATION_API_URL}=require(a137_0xf15317(0x229)),{generateCIArtifacts,printNudgeLocalNotSetError}=require('./helper'),PerformanceTester=require(a137_0xf15317(0x23c)),globals=require('./globals'),helper=require(a137_0xf15317(0x1d9)),{isTestObservabilitySession}=require(a137_0xf15317(0x1e3));function a137_0x5a40(){const _0x4e8276=['seleniumVersion','assign','event_properties','SDKTestSuccessful','vWhox','oBfBG','toString','debug',',\x20testhub\x20id:\x20','../bin/playwright/reporter/pwUtils','Firing\x20SDK\x20event\x20for\x20funnel\x20data:\x20','getTurboScaleBuildLink','jPoVI','reduce','3679587JgaMUk','_buildHashedId','browser','getFrameworkVersion','getUserName','Something\x20went\x20wrong\x20in\x20Final\x20Execution\x20step\x20:\x20','ulbtj','user_killed','unknown','getAccessKey','SWzFs','IHrmV','SrENx','osVersion','getBuildLink','../bin/utils/constants','tFygB','browserStackConfig','type','stopPercy','Error\x20while\x20parsing\x20tests\x20errors,\x20Exception:\x20','\x20response\x20-\x20','LguHW','\x20:\x20','apply','getSessionsList','YNChA','Error\x20in\x20firing\x20request\x20to\x20','PFypP','forEach','FvMtp','getPackageVersion','zYnQg','hostname','./performance/performance-tester','error','SnUEq','APP_AUTOMATE','API\x20Event\x20','env','10804NelALk','ENV_VAR','constants','browserVersion','finishedMetadata','getStackTraceAsString','DIXpL','X_OK','keys','22QKbZUp','length','./logger','YYKHL','BROWSERSTACK_TESTHUB_UUID','FabwM','nodeRequest','PgVyc','255mXOIgE','yWUlL','tests','Error\x20in\x20getting\x20framework\x20version\x20to\x20:\x20','OQmee','3EApsUV','495962KkdqNT','codeceptjs','name','TPSPx','sendLogs','killSignal','util','Failed\x20to\x20set\x20directory\x20access:\x20','8095297GqFJnx','config','mtOUI','liBUf','NklXp','setReadWriteExecuteAccess','./helper','notifyUpdate','selenium-webdriver','buildName','null','POST','app','Gpjps','body','isBrowserstackInfra','./test-observability/utils','getTurboScaleSessionsList','accessSync','source','all','parse','Mwlxj','630954KLOwIV','values','zDjrZ','stack','Playwright','every','unhandledErrors','fireFunnelTestEvent','ggBso','getOptimalHubUrl','framework','APP_AUTOMATE_PRODUCTS','Directory\x20','xxtUB','jbUDa','requirePWModule','16697750VDJbcA','errorMessage','887490stxCCn','getGlobal','AUTOMATE_PRODUCTS','SDK\x20run\x20ended\x20for\x20id:\x20','sdkRunId','chmodSync','buildIdentifier','trim','yTBRX','format','replace','8kcyfJT','\x20has\x20now\x20read/write/execute\x20permissions.','isModifiable','JhdnR','getNodeAgent'];a137_0x5a40=function(){return _0x4e8276;};return a137_0x5a40();}let unhandledErrors='';exports['fireFunnelTestEvent']=async(_0x496b43,_0x419416={},_0x37abf0,_0x42f680)=>{const _0x4dde16=a137_0xf15317,_0x3e32a8={'jbUDa':function(_0x2314e3,_0x5a52fa){return _0x2314e3===_0x5a52fa;},'tFygB':'object','ulbtj':function(_0x2423cd,_0x570e4a){return _0x2423cd>_0x570e4a;},'TPSPx':_0x4dde16(0x255),'FvMtp':function(_0x228b47){return _0x228b47();},'amJjh':function(_0x2cdbec){return _0x2cdbec();},'KsDVL':function(_0x4f8d2a,_0x553d37){return _0x4f8d2a==_0x553d37;},'yTBRX':_0x4dde16(0x1dd),'jPoVI':function(_0x46d8e9,_0x1724c7){return _0x46d8e9===_0x1724c7;},'vWhox':'undefined','PgVyc':_0x4dde16(0x25a),'FabwM':function(_0x57bef2,_0x261a9e){return _0x57bef2!==_0x261a9e;},'bpgyf':_0x4dde16(0x1ee),'JwPmp':function(_0x407893,_0x399855){return _0x407893===_0x399855;},'NklXp':'error','JhdnR':function(_0x2fddd3,_0x38dc3f){return _0x2fddd3>_0x38dc3f;},'ggBso':function(_0x8bd43e,_0x1afbd7){return _0x8bd43e+_0x1afbd7;},'sTOgx':_0x4dde16(0x22e),'SWzFs':_0x4dde16(0x21b),'mtOUI':function(_0x4f0912,_0x18b38e){return _0x4f0912(_0x18b38e);},'zYnQg':_0x4dde16(0x222),'PFypP':'nodejs','YNChA':_0x4dde16(0x20f),'oBfBG':function(_0x96da02,_0x6da672){return _0x96da02===_0x6da672;},'LguHW':_0x4dde16(0x1db),'YYKHL':'application/json','OQmee':'[REDACTED]','xxtUB':_0x4dde16(0x1de)};let _0x490d6e=[];if(helper[_0x4dde16(0x1e2)]()&&_0x3e32a8[_0x4dde16(0x238)](isTestObservabilitySession))_0x490d6e=_0x37abf0[_0x4dde16(0x1df)]?constants[_0x4dde16(0x1f5)]:constants[_0x4dde16(0x1fe)];else{if(_0x3e32a8['amJjh'](isTestObservabilitySession))_0x490d6e=constants['PRODUCT_IF_NOT_BROWSERSTACK_INFRA'];else helper[_0x4dde16(0x1e2)]()&&(_0x490d6e=_0x37abf0['app']?constants[_0x4dde16(0x23f)]:constants['AUTOMATE']);}let _0x2b71cc=_0x37abf0[_0x4dde16(0x202)];if(_0x3e32a8['KsDVL'](_0x2b71cc,null))_0x2b71cc=_0x3e32a8[_0x4dde16(0x204)];else _0x3e32a8[_0x4dde16(0x218)](_0x2b71cc,undefined)&&(_0x2b71cc=_0x3e32a8[_0x4dde16(0x210)]);unhandledErrors&&_0x3e32a8[_0x4dde16(0x220)](unhandledErrors[_0x4dde16(0x24c)],0x0)&&(_0x419416['globalException']=unhandledErrors);global['sdkRunId']&&(_0x419416[_0x4dde16(0x200)]=global[_0x4dde16(0x200)]);try{if(_0x419416[_0x4dde16(0x23d)]){if(_0x3e32a8[_0x4dde16(0x218)](_0x42f680,_0x3e32a8[_0x4dde16(0x252)])&&_0x3e32a8['ulbtj'](_0x419416[_0x4dde16(0x23d)][_0x4dde16(0x24c)],0x0)){const _0x41001a={};_0x41001a['os']='',_0x41001a['osVersion']='',_0x41001a['browser']='',_0x41001a[_0x4dde16(0x245)]='';const _0x13a5f6=_0x41001a;let _0x1e5b85={};const _0x17531b=_0x419416['error'];_0x1e5b85=_0x17531b[_0x4dde16(0x219)]((_0x1b7270,_0x565383)=>{for(const _0x354db2 in _0x565383){_0x1b7270[_0x354db2]=_0x565383[_0x354db2];}return _0x1b7270;},{});const _0x3f1844={};_0x3f1844['tests']=_0x1e5b85,_0x419416[_0x4dde16(0x23d)]=[Object[_0x4dde16(0x20d)]({},_0x13a5f6,_0x3f1844)];}else{let _0x5e0781=0x0;const _0x502306=_0x3e32a8[_0x4dde16(0x250)](_0x42f680,_0x3e32a8['bpgyf'])?JSON[_0x4dde16(0x1e8)](_0x419416[_0x4dde16(0x23d)]):_0x419416[_0x4dde16(0x23d)],_0x38d708=Object[_0x4dde16(0x1eb)](_0x502306);_0x38d708['forEach'](_0x6acde8=>{const _0x5da80b=_0x4dde16;if(_0x3e32a8[_0x5da80b(0x1f8)](typeof _0x6acde8,_0x3e32a8[_0x5da80b(0x22a)])){const _0x18b39e=Object['values'](_0x6acde8);!_0x18b39e[_0x5da80b(0x1ef)](_0x96a934=>_0x96a934===null||_0x96a934===undefined||_0x96a934==='')&&(_0x5e0781+=0x1);}});if(_0x3e32a8['JwPmp'](_0x5e0781,0x0))delete _0x419416[_0x3e32a8[_0x4dde16(0x1d7)]];else{const _0x56f5bd=[];Object[_0x4dde16(0x24a)](_0x502306)[_0x4dde16(0x237)](_0x43eced=>{const _0x20d2c6=_0x4dde16,_0x55175b={'yWUlL':function(_0x1fa489,_0x9547d1){const _0x37a14d=a137_0x4f2c;return _0x3e32a8[_0x37a14d(0x220)](_0x1fa489,_0x9547d1);}},[_0x33eca6,_0x2b6a34,_0x4fc182,_0x286fa]=_0x43eced['split'](',\x20');let _0x5415af={};if(!_0x286fa){const _0x5470f1={};_0x5470f1['deviceName']=_0x33eca6,_0x5470f1[_0x20d2c6(0x227)]=_0x2b6a34,_0x5470f1[_0x20d2c6(0x21c)]=_0x4fc182,_0x5415af=_0x5470f1;}else{const _0x391254={};_0x391254['os']=_0x33eca6,_0x391254['osVersion']=_0x2b6a34,_0x391254[_0x20d2c6(0x21c)]=_0x4fc182,_0x391254[_0x20d2c6(0x245)]=_0x286fa,_0x5415af=_0x391254;}const _0x9d2136={},_0x3044f8=_0x502306[_0x43eced];Object['keys'](_0x3044f8)[_0x20d2c6(0x237)](_0x182021=>{const _0x39ba7b=_0x20d2c6;_0x55175b[_0x39ba7b(0x254)](_0x3044f8[_0x182021][_0x39ba7b(0x24c)],0x0)&&(_0x9d2136[_0x182021]=_0x3044f8[_0x182021]);}),_0x3e32a8[_0x20d2c6(0x220)](Object[_0x20d2c6(0x24a)](_0x9d2136)[_0x20d2c6(0x24c)],0x0)&&(_0x5415af[_0x3e32a8[_0x20d2c6(0x25c)]]=_0x9d2136,_0x56f5bd['push'](_0x5415af));}),_0x3e32a8[_0x4dde16(0x20a)](_0x56f5bd[_0x4dde16(0x24c)],0x0)?_0x419416['error']=_0x56f5bd:delete _0x419416[_0x3e32a8['NklXp']];}}}}catch(_0xf1d390){delete _0x419416[_0x3e32a8[_0x4dde16(0x1d7)]],logger[_0x4dde16(0x213)](_0x3e32a8[_0x4dde16(0x1f2)](_0x3e32a8['sTOgx'],_0xf1d390));}const _0x51c22e=helper['getTestFrameworkDetails'](_0x37abf0,_0x37abf0[_0x4dde16(0x1f4)]),_0x230adb={'userName':helper['getUserName'](_0x37abf0),'accessKey':helper['getAccessKey'](_0x37abf0),'event_type':_0x496b43,'detectedFramework':_0x42f680,'buildHashedId':globals[_0x4dde16(0x1fd)](_0x3e32a8[_0x4dde16(0x224)]),'optimalHubUrl':helper[_0x4dde16(0x1f3)](),'event_properties':{'testhub_uuid':process[_0x4dde16(0x241)][testHubConstants[_0x4dde16(0x243)][_0x4dde16(0x24f)]]||'','sdkRunId':global[_0x4dde16(0x200)],'product_map':_0x3e32a8[_0x4dde16(0x1d5)](getProductMap,_0x37abf0),'productMap':_0x3e32a8[_0x4dde16(0x1d5)](getProductMap,_0x37abf0),'language_framework':_0x37abf0[_0x4dde16(0x1e6)]||_0x3e32a8[_0x4dde16(0x23a)],'referrer':helper[_0x4dde16(0x20b)](_0x42f680),'framework':_0x37abf0['framework'],'frameworkVersion':helper[_0x4dde16(0x21d)](_0x42f680),'automationFramework':_0x51c22e[_0x4dde16(0x25b)],'automationFrameworkVersion':_0x51c22e['version'],'language':_0x3e32a8[_0x4dde16(0x236)],'languageVersion':process['version'],'product':_0x490d6e,'buildName':_0x37abf0[_0x4dde16(0x1dc)]||_0x3e32a8[_0x4dde16(0x210)],'buildIdentifier':_0x2b71cc,'os':os[_0x4dde16(0x22c)]()||_0x3e32a8['zYnQg'],'hostname':os[_0x4dde16(0x23b)]()||_0x3e32a8[_0x4dde16(0x23a)],..._0x419416}};try{_0x3e32a8[_0x4dde16(0x1f8)](_0x496b43,_0x3e32a8[_0x4dde16(0x234)])&&(_0x230adb['event_properties'][_0x4dde16(0x22b)]=helper['sanitizeBrowserStackConfig'](_0x37abf0)),_0x3e32a8[_0x4dde16(0x211)](_0x42f680,_0x3e32a8['bpgyf'])?_0x230adb[_0x4dde16(0x20e)]['playwrightVersion']=helper[_0x4dde16(0x1f9)][_0x4dde16(0x232)](null,_0x3e32a8[_0x4dde16(0x238)](getTransformPath),!![]):_0x230adb[_0x4dde16(0x20e)][_0x4dde16(0x20c)]=helper[_0x4dde16(0x239)](_0x3e32a8[_0x4dde16(0x230)]);}catch(_0xffaa28){logger[_0x4dde16(0x213)](_0x4dde16(0x256)+_0xffaa28);}const _0x4fde22={};_0x4fde22['content-type']=_0x3e32a8[_0x4dde16(0x24e)];const _0x354cb6={'headers':_0x4fde22,'body':_0x230adb,'auth':{'user':helper[_0x4dde16(0x21e)](_0x37abf0),'pass':helper[_0x4dde16(0x223)](_0x37abf0)},'json':!![]};logger[_0x4dde16(0x213)](_0x4dde16(0x216)+JSON['stringify'](_0x354cb6[_0x4dde16(0x1e1)])['replace'](new RegExp(helper[_0x4dde16(0x21e)](_0x37abf0),'g'),_0x3e32a8[_0x4dde16(0x257)])[_0x4dde16(0x206)](new RegExp(helper[_0x4dde16(0x223)](_0x37abf0),'g'),_0x3e32a8[_0x4dde16(0x257)]));try{const _0x2f795b=await helper[_0x4dde16(0x251)](_0x3e32a8[_0x4dde16(0x1f7)],FUNNEL_INSTRUMENTATION_API_URL,_0x354cb6,_0x37abf0);logger[_0x4dde16(0x213)](_0x4dde16(0x240)+_0x496b43+_0x4dde16(0x22f)+util[_0x4dde16(0x205)]('%j',_0x2f795b));}catch(_0x429dc9){logger['debug'](_0x4dde16(0x235)+FUNNEL_INSTRUMENTATION_API_URL+_0x4dde16(0x231)+util[_0x4dde16(0x205)](_0x429dc9));}},exports['finalExecution']=async _0x556b49=>{const _0x4bd247=a137_0xf15317,_0x47237f={'Mwlxj':function(_0x155353){return _0x155353();},'liBUf':_0x4bd247(0x246),'IHrmV':_0x4bd247(0x221),'Gpjps':_0x4bd247(0x20f),'Pqvjg':function(_0x31e370,_0x21b1af,_0x23e3e8){return _0x31e370(_0x21b1af,_0x23e3e8);},'QBRxg':function(_0xb38e44,_0x285263){return _0xb38e44+_0x285263;},'SnUEq':_0x4bd247(0x21f)};try{await _0x556b49[_0x4bd247(0x22d)](),_0x47237f[_0x4bd247(0x1e9)](printNudgeLocalNotSetError);const _0x2a98ac={};_0x2a98ac[_0x4bd247(0x23d)]=_0x556b49[_0x4bd247(0x1fb)]?_0x556b49[_0x4bd247(0x1fb)]:'{}';const _0x2b0ea2=_0x2a98ac,_0x2b25e8=Object[_0x4bd247(0x20d)]({},_0x2b0ea2);!!_0x556b49[_0x4bd247(0x25e)]&&(_0x2b25e8[_0x47237f[_0x4bd247(0x1d6)]]={'reason':_0x47237f[_0x4bd247(0x225)],'signal':_0x556b49['killSignal']});unhandledErrors=_0x556b49[_0x4bd247(0x1f0)]['join']('\x0a');let _0x97ae00,_0x103615,_0x5da76c;helper['isTurboScaleSession'](_0x556b49['config'])?([_0x97ae00,_0x103615]=await helper[_0x4bd247(0x217)](_0x556b49[_0x4bd247(0x1d4)]),[_0x5da76c]=await Promise[_0x4bd247(0x1e7)]([helper[_0x4bd247(0x1e4)](_0x97ae00,_0x556b49[_0x4bd247(0x1d4)]),exports['fireFunnelTestEvent'](_0x47237f[_0x4bd247(0x1e0)],_0x2b25e8,_0x556b49[_0x4bd247(0x1d4)],_0x556b49[_0x4bd247(0x1f4)])])):([_0x97ae00,_0x103615]=await helper[_0x4bd247(0x228)](_0x556b49[_0x4bd247(0x1d4)]),[_0x5da76c]=await Promise[_0x4bd247(0x1e7)]([helper[_0x4bd247(0x233)](_0x97ae00,_0x556b49[_0x4bd247(0x1d4)]),exports[_0x4bd247(0x1f1)](_0x47237f[_0x4bd247(0x1e0)],_0x2b25e8,_0x556b49[_0x4bd247(0x1d4)],_0x556b49[_0x4bd247(0x1f4)])])),_0x5da76c&&await _0x47237f['Pqvjg'](generateCIArtifacts,_0x5da76c,_0x103615),logger['info'](_0x4bd247(0x1ff)+_0x556b49[_0x4bd247(0x200)]+_0x4bd247(0x214)+process[_0x4bd247(0x241)][_0x4bd247(0x24f)]),await helper[_0x4bd247(0x25d)](_0x556b49[_0x4bd247(0x1d4)]);}catch(_0x3d252b){logger[_0x4bd247(0x213)](_0x47237f['QBRxg'](_0x47237f[_0x4bd247(0x23e)],_0x3d252b));}helper[_0x4bd247(0x1da)]();},exports[a137_0xf15317(0x247)]=_0x58dbe1=>{const _0x1235cf=a137_0xf15317,_0x3ece94={'DIXpL':function(_0x10444e,_0xe808f6){return _0x10444e instanceof _0xe808f6;},'WFzJI':function(_0x3fc227,_0x2c14b4){return _0x3fc227(_0x2c14b4);}};try{if(_0x3ece94[_0x1235cf(0x248)](_0x58dbe1,Error))return _0x58dbe1[_0x1235cf(0x1ed)]||_0x58dbe1[_0x1235cf(0x212)]();return _0x3ece94['WFzJI'](String,_0x58dbe1);}catch(_0x23b75d){return _0x58dbe1?_0x58dbe1[_0x1235cf(0x212)]():'';}},exports['isNullOrEmpty']=_0x285e88=>{const _0x1b29f8=a137_0xf15317,_0x225b00={};_0x225b00[_0x1b29f8(0x226)]=function(_0x23ed53,_0x2ea449){return _0x23ed53===_0x2ea449;};const _0x45a8c6=_0x225b00;return!_0x285e88||_0x45a8c6['SrENx'](_0x285e88[_0x1b29f8(0x203)](),'');},exports[a137_0xf15317(0x209)]=_0x3a9408=>{const _0x537e79=a137_0xf15317,_0x2e3c0b={};_0x2e3c0b[_0x537e79(0x1ec)]=function(_0x46dedd,_0x4ca877){return _0x46dedd|_0x4ca877;};const _0x1a15cd=_0x2e3c0b;try{return fs[_0x537e79(0x1e5)](_0x3a9408,_0x1a15cd[_0x537e79(0x1ec)](fs[_0x537e79(0x244)]['W_OK'],fs['constants'][_0x537e79(0x249)])),!![];}catch(_0x45380c){return![];}},exports[a137_0xf15317(0x1d8)]=_0x5129f0=>{const _0x2086de=a137_0xf15317;try{fs[_0x2086de(0x201)](_0x5129f0,0x1ff),logger[_0x2086de(0x213)](_0x2086de(0x1f6)+_0x5129f0+_0x2086de(0x208));}catch(_0x12683e){logger['error'](_0x2086de(0x1d2)+exports[_0x2086de(0x247)](_0x12683e));}};