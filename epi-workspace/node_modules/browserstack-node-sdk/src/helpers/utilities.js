const a142_0x57e244=a142_0xe0e1;(function(_0x2cad45,_0x204248){const _0x52d9d8=a142_0xe0e1,_0x5f4e18=_0x2cad45();while(!![]){try{const _0x219cc8=parseInt(_0x52d9d8(0x17e))/0x1*(-parseInt(_0x52d9d8(0x16a))/0x2)+parseInt(_0x52d9d8(0x11e))/0x3*(parseInt(_0x52d9d8(0x13a))/0x4)+-parseInt(_0x52d9d8(0x171))/0x5+-parseInt(_0x52d9d8(0x121))/0x6+-parseInt(_0x52d9d8(0x189))/0x7*(parseInt(_0x52d9d8(0x14d))/0x8)+parseInt(_0x52d9d8(0x159))/0x9+parseInt(_0x52d9d8(0x137))/0xa;if(_0x219cc8===_0x204248)break;else _0x5f4e18['push'](_0x5f4e18['shift']());}catch(_0x17f792){_0x5f4e18['push'](_0x5f4e18['shift']());}}}(a142_0x3a0c,0xe4b64));const os=require('os'),util=require(a142_0x57e244(0x120)),fs=require('fs'),{getProductMap}=require(a142_0x57e244(0x16e)),logger=require(a142_0x57e244(0x12a))[a142_0x57e244(0x188)],constants=require(a142_0x57e244(0x194)),testHubConstants=require(a142_0x57e244(0x136)),{getTransformPath}=require('../bin/playwright/reporter/pwUtils'),{FUNNEL_INSTRUMENTATION_API_URL}=require('../bin/utils/constants'),{generateCIArtifacts,printNudgeLocalNotSetError}=require(a142_0x57e244(0x122)),PerformanceTester=require(a142_0x57e244(0x15e)),globals=require(a142_0x57e244(0x133)),helper=require('./helper'),{isTestObservabilitySession}=require(a142_0x57e244(0x182));function a142_0xe0e1(_0x56aa5e,_0x5c167d){const _0x3a0c44=a142_0x3a0c();return a142_0xe0e1=function(_0xe0e149,_0x488640){_0xe0e149=_0xe0e149-0x117;let _0x4e0011=_0x3a0c44[_0xe0e149];return _0x4e0011;},a142_0xe0e1(_0x56aa5e,_0x5c167d);}function a142_0x3a0c(){const _0xb43f9f=['FdXIs','reduce','X_OK','CTQuG','getUserName','UIhKG','./logger','playwrightVersion','all','errorMessage','event_properties','W_OK','Directory\x20','push','stringify','./globals','format','\x20has\x20now\x20read/write/execute\x20permissions.','../helpers/testhub/constants','20945490mzWQOV','toString','isModifiable','12524YBFOGb','seleniumVersion','Playwright','accessSync','framework','Error\x20in\x20getting\x20framework\x20version\x20to\x20:\x20','FlvSX','qxcfm','bBwnz','UKWQx','getFrameworkVersion','notifyUpdate','dDIIo','ZSzzE','sendLogs','poMOv','constants','getNodeAgent','values','8Otozmm','RSpAT','requirePWModule','browser','setReadWriteExecuteAccess','killSignal','AsbMl','POST','source','unknown','split','getOptimalHubUrl','681984jllKvE','config','WJWyX','sanitizeBrowserStackConfig','isNullOrEmpty','./performance/performance-tester','kuNqo','nodeRequest','osVersion',',\x20testhub\x20id:\x20','app','API\x20Event\x20','info','forEach','codeceptjs','isTurboScaleSession','every','12982oFRtEg','Error\x20in\x20firing\x20request\x20to\x20','WKpvt','trim','./testhub/utils','undefined','type','692865KnMpgb','replace','OVfsR','null','SDKTestSuccessful','application/json','nodejs','tTaXY','APP_AUTOMATE','isBrowserstackInfra','getBuildLink','buildIdentifier','keys','97iiptIE','AUTOMATE','ElFGV','SDK\x20run\x20ended\x20for\x20id:\x20','./test-observability/utils','ophsU','getTurboScaleBuildLink','DdzUO','getTestFrameworkDetails','version','winstonLogger','10616879jIlfmF','KeySm','chmodSync','join','hostname','EFqkC','tests','PRODUCT_IF_NOT_BROWSERSTACK_INFRA','QIFqX','VyQad','fireFunnelTestEvent','../bin/utils/constants','debug','env','xBolF','selenium-webdriver','XzgZg','APP_AUTOMATE_PRODUCTS','sdkRunId','body','_buildHashedId','error','ReshP','\x20:\x20','tApQG','Something\x20went\x20wrong\x20in\x20Final\x20Execution\x20step\x20:\x20','getAccessKey','assign','oHLun','length','getPackageVersion','[REDACTED]','parse','EVdvC','ENV_VAR','getStackTraceAsString','Error\x20while\x20parsing\x20tests\x20errors,\x20Exception:\x20','1614WqgBWs','wtaZH','util','3798612aChgVr','./helper','paqnl'];a142_0x3a0c=function(){return _0xb43f9f;};return a142_0x3a0c();}let unhandledErrors='';exports[a142_0x57e244(0x193)]=async(_0x1d2644,_0x1b032c={},_0x2ae8c1,_0x584461)=>{const _0x2d619a=a142_0x57e244,_0x5a4d59={'ElFGV':function(_0x583ee9,_0x469318){return _0x583ee9===_0x469318;},'aMADG':'object','bBwnz':function(_0x38cb67,_0x5cd45f){return _0x38cb67>_0x5cd45f;},'ZUiqO':function(_0x30218c,_0x14f6da){return _0x30218c>_0x14f6da;},'QIFqX':_0x2d619a(0x18f),'mHAtb':function(_0x159dba){return _0x159dba();},'VyQad':function(_0xe4ad31){return _0xe4ad31();},'UKWQx':function(_0x315e12,_0x187e21){return _0x315e12==_0x187e21;},'ophsU':_0x2d619a(0x174),'CTQuG':_0x2d619a(0x16f),'AsbMl':function(_0x6c23ce,_0x552078){return _0x6c23ce>_0x552078;},'oHLun':function(_0x46b6f8,_0x202a0f){return _0x46b6f8===_0x202a0f;},'qxcfm':_0x2d619a(0x167),'XzgZg':function(_0x4d7bf9,_0x4afcc4){return _0x4d7bf9>_0x4afcc4;},'tApQG':function(_0x5712e5,_0x26297a){return _0x5712e5!==_0x26297a;},'EFqkC':_0x2d619a(0x13c),'KeySm':_0x2d619a(0x19e),'WKpvt':function(_0x39640b,_0x59edc5){return _0x39640b+_0x59edc5;},'wtaZH':_0x2d619a(0x11d),'jIaMd':_0x2d619a(0x19d),'ReshP':function(_0x2185d3,_0x5e4a52){return _0x2185d3(_0x5e4a52);},'tTaXY':_0x2d619a(0x156),'RSpAT':_0x2d619a(0x177),'WJWyX':_0x2d619a(0x175),'poMOv':_0x2d619a(0x198),'paqnl':_0x2d619a(0x176),'FdXIs':_0x2d619a(0x118),'OVfsR':_0x2d619a(0x154)};let _0x26086f=[];if(helper['isBrowserstackInfra']()&&_0x5a4d59['mHAtb'](isTestObservabilitySession))_0x26086f=_0x2ae8c1['app']?constants[_0x2d619a(0x19a)]:constants['AUTOMATE_PRODUCTS'];else{if(_0x5a4d59[_0x2d619a(0x192)](isTestObservabilitySession))_0x26086f=constants[_0x2d619a(0x190)];else helper[_0x2d619a(0x17a)]()&&(_0x26086f=_0x2ae8c1[_0x2d619a(0x163)]?constants[_0x2d619a(0x179)]:constants[_0x2d619a(0x17f)]);}let _0x10f061=_0x2ae8c1[_0x2d619a(0x17c)];if(_0x5a4d59[_0x2d619a(0x143)](_0x10f061,null))_0x10f061=_0x5a4d59[_0x2d619a(0x183)];else _0x5a4d59['ElFGV'](_0x10f061,undefined)&&(_0x10f061=_0x5a4d59[_0x2d619a(0x127)]);unhandledErrors&&_0x5a4d59[_0x2d619a(0x153)](unhandledErrors['length'],0x0)&&(_0x1b032c['globalException']=unhandledErrors);global[_0x2d619a(0x19b)]&&(_0x1b032c[_0x2d619a(0x19b)]=global['sdkRunId']);try{if(_0x1b032c[_0x2d619a(0x19e)]){if(_0x5a4d59['oHLun'](_0x584461,_0x5a4d59[_0x2d619a(0x141)])&&_0x5a4d59['XzgZg'](_0x1b032c[_0x2d619a(0x19e)][_0x2d619a(0x1a6)],0x0)){const _0x1ac1ca={};_0x1ac1ca['os']='',_0x1ac1ca[_0x2d619a(0x161)]='',_0x1ac1ca[_0x2d619a(0x150)]='',_0x1ac1ca['browserVersion']='';const _0x50c91b=_0x1ac1ca;let _0xc8f0a0={};const _0x196055=_0x1b032c[_0x2d619a(0x19e)];_0xc8f0a0=_0x196055[_0x2d619a(0x125)]((_0x3299a5,_0x2fa907)=>{for(const _0x4e72ad in _0x2fa907){_0x3299a5[_0x4e72ad]=_0x2fa907[_0x4e72ad];}return _0x3299a5;},{});const _0x11abdd={};_0x11abdd['tests']=_0xc8f0a0,_0x1b032c['error']=[Object['assign']({},_0x50c91b,_0x11abdd)];}else{let _0x284faa=0x0;const _0x5cd830=_0x5a4d59[_0x2d619a(0x1a1)](_0x584461,_0x5a4d59[_0x2d619a(0x18e)])?JSON[_0x2d619a(0x119)](_0x1b032c[_0x2d619a(0x19e)]):_0x1b032c['error'],_0x1194b7=Object['values'](_0x5cd830);_0x1194b7[_0x2d619a(0x166)](_0x2b8a4f=>{const _0x164bbc=_0x2d619a;if(_0x5a4d59[_0x164bbc(0x180)](typeof _0x2b8a4f,_0x5a4d59['aMADG'])){const _0x17a8dd=Object[_0x164bbc(0x14c)](_0x2b8a4f);!_0x17a8dd[_0x164bbc(0x169)](_0x4cd00f=>_0x4cd00f===null||_0x4cd00f===undefined||_0x4cd00f==='')&&(_0x284faa+=0x1);}});if(_0x5a4d59[_0x2d619a(0x1a5)](_0x284faa,0x0))delete _0x1b032c[_0x5a4d59['KeySm']];else{const _0x489480=[];Object[_0x2d619a(0x17d)](_0x5cd830)['forEach'](_0x51bec1=>{const _0x67b69f=_0x2d619a,[_0x447a2c,_0x2ec63b,_0x545900,_0x32e878]=_0x51bec1[_0x67b69f(0x157)](',\x20');let _0x3d9d17={};if(!_0x32e878){const _0x5ddd3d={};_0x5ddd3d['deviceName']=_0x447a2c,_0x5ddd3d[_0x67b69f(0x161)]=_0x2ec63b,_0x5ddd3d[_0x67b69f(0x150)]=_0x545900,_0x3d9d17=_0x5ddd3d;}else{const _0x87ed13={};_0x87ed13['os']=_0x447a2c,_0x87ed13['osVersion']=_0x2ec63b,_0x87ed13[_0x67b69f(0x150)]=_0x545900,_0x87ed13['browserVersion']=_0x32e878,_0x3d9d17=_0x87ed13;}const _0x256924={},_0x2665ab=_0x5cd830[_0x51bec1];Object['keys'](_0x2665ab)[_0x67b69f(0x166)](_0x36a163=>{const _0x507c6b=_0x67b69f;_0x5a4d59[_0x507c6b(0x142)](_0x2665ab[_0x36a163][_0x507c6b(0x1a6)],0x0)&&(_0x256924[_0x36a163]=_0x2665ab[_0x36a163]);}),_0x5a4d59['ZUiqO'](Object[_0x67b69f(0x17d)](_0x256924)[_0x67b69f(0x1a6)],0x0)&&(_0x3d9d17[_0x5a4d59[_0x67b69f(0x191)]]=_0x256924,_0x489480[_0x67b69f(0x131)](_0x3d9d17));}),_0x5a4d59[_0x2d619a(0x199)](_0x489480[_0x2d619a(0x1a6)],0x0)?_0x1b032c['error']=_0x489480:delete _0x1b032c[_0x5a4d59[_0x2d619a(0x18a)]];}}}}catch(_0x4817af){delete _0x1b032c[_0x5a4d59['KeySm']],logger[_0x2d619a(0x195)](_0x5a4d59[_0x2d619a(0x16c)](_0x5a4d59[_0x2d619a(0x11f)],_0x4817af));}const _0x59bf05=helper[_0x2d619a(0x186)](_0x2ae8c1,_0x2ae8c1['framework']),_0x102421={'userName':helper[_0x2d619a(0x128)](_0x2ae8c1),'accessKey':helper[_0x2d619a(0x1a3)](_0x2ae8c1),'event_type':_0x1d2644,'detectedFramework':_0x584461,'buildHashedId':globals['getGlobal'](_0x5a4d59['jIaMd']),'optimalHubUrl':helper[_0x2d619a(0x158)](),'event_properties':{'testhub_uuid':process[_0x2d619a(0x196)][testHubConstants[_0x2d619a(0x11b)]['BROWSERSTACK_TESTHUB_UUID']]||'','sdkRunId':global['sdkRunId'],'product_map':_0x5a4d59[_0x2d619a(0x19f)](getProductMap,_0x2ae8c1),'productMap':_0x5a4d59[_0x2d619a(0x19f)](getProductMap,_0x2ae8c1),'language_framework':_0x2ae8c1[_0x2d619a(0x155)]||_0x5a4d59[_0x2d619a(0x178)],'referrer':helper[_0x2d619a(0x14b)](_0x584461),'framework':_0x2ae8c1[_0x2d619a(0x13e)],'frameworkVersion':helper[_0x2d619a(0x144)](_0x584461),'automationFramework':_0x59bf05['name'],'automationFrameworkVersion':_0x59bf05['version'],'language':_0x5a4d59[_0x2d619a(0x14e)],'languageVersion':process[_0x2d619a(0x187)],'product':_0x26086f,'buildName':_0x2ae8c1['buildName']||_0x5a4d59['CTQuG'],'buildIdentifier':_0x10f061,'os':os[_0x2d619a(0x170)]()||_0x5a4d59[_0x2d619a(0x178)],'hostname':os[_0x2d619a(0x18d)]()||_0x5a4d59[_0x2d619a(0x178)],..._0x1b032c}};try{_0x5a4d59['ElFGV'](_0x1d2644,_0x5a4d59[_0x2d619a(0x15b)])&&(_0x102421['event_properties']['browserStackConfig']=helper[_0x2d619a(0x15c)](_0x2ae8c1)),_0x5a4d59[_0x2d619a(0x1a5)](_0x584461,_0x5a4d59[_0x2d619a(0x18e)])?_0x102421[_0x2d619a(0x12e)][_0x2d619a(0x12b)]=helper[_0x2d619a(0x14f)]['apply'](null,_0x5a4d59[_0x2d619a(0x192)](getTransformPath),!![]):_0x102421[_0x2d619a(0x12e)][_0x2d619a(0x13b)]=helper[_0x2d619a(0x117)](_0x5a4d59[_0x2d619a(0x149)]);}catch(_0x44912c){logger['debug'](_0x2d619a(0x13f)+_0x44912c);}const _0x3e370e={};_0x3e370e['content-type']=_0x5a4d59[_0x2d619a(0x123)];const _0x2f7421={'headers':_0x3e370e,'body':_0x102421,'auth':{'user':helper[_0x2d619a(0x128)](_0x2ae8c1),'pass':helper[_0x2d619a(0x1a3)](_0x2ae8c1)},'json':!![]};logger['debug']('Firing\x20SDK\x20event\x20for\x20funnel\x20data:\x20'+JSON[_0x2d619a(0x132)](_0x2f7421[_0x2d619a(0x19c)])[_0x2d619a(0x172)](new RegExp(helper['getUserName'](_0x2ae8c1),'g'),_0x5a4d59[_0x2d619a(0x124)])[_0x2d619a(0x172)](new RegExp(helper[_0x2d619a(0x1a3)](_0x2ae8c1),'g'),_0x5a4d59[_0x2d619a(0x124)]));try{const _0x528e5c=await helper[_0x2d619a(0x160)](_0x5a4d59[_0x2d619a(0x173)],FUNNEL_INSTRUMENTATION_API_URL,_0x2f7421,_0x2ae8c1);logger[_0x2d619a(0x195)](_0x2d619a(0x164)+_0x1d2644+'\x20response\x20-\x20'+util[_0x2d619a(0x134)]('%j',_0x528e5c));}catch(_0x4ee55b){logger[_0x2d619a(0x195)](_0x2d619a(0x16b)+FUNNEL_INSTRUMENTATION_API_URL+_0x2d619a(0x1a0)+util['format'](_0x4ee55b));}},exports['finalExecution']=async _0x27268d=>{const _0x3ea322=a142_0x57e244,_0x31e55b={'tPVQY':function(_0x1a5788){return _0x1a5788();},'DdzUO':'finishedMetadata','JgpMw':'user_killed','xBolF':'SDKTestSuccessful','FlvSX':function(_0x247251,_0x2d76c0,_0x1556e5){return _0x247251(_0x2d76c0,_0x1556e5);},'ZSzzE':function(_0x30a2e9,_0x4d6c76){return _0x30a2e9+_0x4d6c76;},'kuNqo':_0x3ea322(0x1a2)};try{await _0x27268d['stopPercy'](),_0x31e55b['tPVQY'](printNudgeLocalNotSetError);const _0x5488d4={};_0x5488d4[_0x3ea322(0x19e)]=_0x27268d[_0x3ea322(0x12d)]?_0x27268d[_0x3ea322(0x12d)]:'{}';const _0x1a5037=_0x5488d4,_0x3d8a6e=Object[_0x3ea322(0x1a4)]({},_0x1a5037);!!_0x27268d[_0x3ea322(0x152)]&&(_0x3d8a6e[_0x31e55b[_0x3ea322(0x185)]]={'reason':_0x31e55b['JgpMw'],'signal':_0x27268d['killSignal']});unhandledErrors=_0x27268d['unhandledErrors'][_0x3ea322(0x18c)]('\x0a');let _0x7e5a70,_0x4958e8,_0x244bdd;helper[_0x3ea322(0x168)](_0x27268d[_0x3ea322(0x15a)])?([_0x7e5a70,_0x4958e8]=await helper[_0x3ea322(0x184)](_0x27268d[_0x3ea322(0x15a)]),[_0x244bdd]=await Promise['all']([helper['getTurboScaleSessionsList'](_0x7e5a70,_0x27268d[_0x3ea322(0x15a)]),exports[_0x3ea322(0x193)](_0x31e55b['xBolF'],_0x3d8a6e,_0x27268d[_0x3ea322(0x15a)],_0x27268d[_0x3ea322(0x13e)])])):([_0x7e5a70,_0x4958e8]=await helper[_0x3ea322(0x17b)](_0x27268d['config']),[_0x244bdd]=await Promise[_0x3ea322(0x12c)]([helper['getSessionsList'](_0x7e5a70,_0x27268d[_0x3ea322(0x15a)]),exports[_0x3ea322(0x193)](_0x31e55b[_0x3ea322(0x197)],_0x3d8a6e,_0x27268d[_0x3ea322(0x15a)],_0x27268d[_0x3ea322(0x13e)])])),_0x244bdd&&await _0x31e55b[_0x3ea322(0x140)](generateCIArtifacts,_0x244bdd,_0x4958e8),logger[_0x3ea322(0x165)](_0x3ea322(0x181)+_0x27268d[_0x3ea322(0x19b)]+_0x3ea322(0x162)+process[_0x3ea322(0x196)]['BROWSERSTACK_TESTHUB_UUID']),await helper[_0x3ea322(0x148)](_0x27268d[_0x3ea322(0x15a)]);}catch(_0x6031b0){logger['debug'](_0x31e55b[_0x3ea322(0x147)](_0x31e55b[_0x3ea322(0x15f)],_0x6031b0));}helper[_0x3ea322(0x145)]();},exports[a142_0x57e244(0x11c)]=_0x29a34a=>{const _0x8b58b6=a142_0x57e244,_0x3a28e3={'UIhKG':function(_0x4d2d41,_0x6facd6){return _0x4d2d41 instanceof _0x6facd6;},'GiCAK':function(_0x3265f7,_0x3335a4){return _0x3265f7(_0x3335a4);}};try{if(_0x3a28e3[_0x8b58b6(0x129)](_0x29a34a,Error))return _0x29a34a['stack']||_0x29a34a[_0x8b58b6(0x138)]();return _0x3a28e3['GiCAK'](String,_0x29a34a);}catch(_0x2f808e){return _0x29a34a?_0x29a34a[_0x8b58b6(0x138)]():'';}},exports[a142_0x57e244(0x15d)]=_0x3b99db=>{const _0x319a9=a142_0x57e244,_0x1eab16={};_0x1eab16['dDIIo']=function(_0x10af1e,_0x54653c){return _0x10af1e===_0x54653c;};const _0x1662cb=_0x1eab16;return!_0x3b99db||_0x1662cb[_0x319a9(0x146)](_0x3b99db[_0x319a9(0x16d)](),'');},exports[a142_0x57e244(0x139)]=_0x222d1d=>{const _0x43df6d=a142_0x57e244,_0x4df410={};_0x4df410[_0x43df6d(0x11a)]=function(_0x244b82,_0x4cc45){return _0x244b82|_0x4cc45;};const _0x54078a=_0x4df410;try{return fs[_0x43df6d(0x13d)](_0x222d1d,_0x54078a[_0x43df6d(0x11a)](fs['constants'][_0x43df6d(0x12f)],fs[_0x43df6d(0x14a)][_0x43df6d(0x126)])),!![];}catch(_0x321c37){return![];}},exports[a142_0x57e244(0x151)]=_0x539601=>{const _0x473537=a142_0x57e244;try{fs[_0x473537(0x18b)](_0x539601,0x1ff),logger[_0x473537(0x195)](_0x473537(0x130)+_0x539601+_0x473537(0x135));}catch(_0x5d5fc2){logger[_0x473537(0x19e)]('Failed\x20to\x20set\x20directory\x20access:\x20'+exports[_0x473537(0x11c)](_0x5d5fc2));}};