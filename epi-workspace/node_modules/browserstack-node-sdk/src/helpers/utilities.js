const a132_0x5a2133=a132_0x124a;(function(_0x4f4aae,_0x5ad02c){const _0xfa61c3=a132_0x124a,_0x3b3e08=_0x4f4aae();while(!![]){try{const _0x7574e4=parseInt(_0xfa61c3(0x21b))/0x1*(parseInt(_0xfa61c3(0x20a))/0x2)+-parseInt(_0xfa61c3(0x24f))/0x3*(parseInt(_0xfa61c3(0x235))/0x4)+parseInt(_0xfa61c3(0x261))/0x5*(-parseInt(_0xfa61c3(0x241))/0x6)+parseInt(_0xfa61c3(0x22f))/0x7+parseInt(_0xfa61c3(0x218))/0x8*(parseInt(_0xfa61c3(0x23c))/0x9)+-parseInt(_0xfa61c3(0x201))/0xa*(parseInt(_0xfa61c3(0x23b))/0xb)+-parseInt(_0xfa61c3(0x1f2))/0xc*(parseInt(_0xfa61c3(0x26a))/0xd);if(_0x7574e4===_0x5ad02c)break;else _0x3b3e08['push'](_0x3b3e08['shift']());}catch(_0x315c92){_0x3b3e08['push'](_0x3b3e08['shift']());}}}(a132_0x138a,0xc448b));const os=require('os'),util=require('util'),fs=require('fs'),{getProductMap}=require(a132_0x5a2133(0x275)),logger=require('./logger')['winstonLogger'],constants=require('../bin/utils/constants'),testHubConstants=require(a132_0x5a2133(0x206)),{getTransformPath}=require(a132_0x5a2133(0x217)),{FUNNEL_INSTRUMENTATION_API_URL}=require(a132_0x5a2133(0x21e)),{generateCIArtifacts,printNudgeLocalNotSetError}=require(a132_0x5a2133(0x229)),PerformanceTester=require(a132_0x5a2133(0x208)),globals=require(a132_0x5a2133(0x204)),helper=require(a132_0x5a2133(0x229)),{isTestObservabilitySession}=require(a132_0x5a2133(0x205));let unhandledErrors='';function a132_0x124a(_0x21adc9,_0x147da7){const _0x138a1e=a132_0x138a();return a132_0x124a=function(_0x124afd,_0x2f62e1){_0x124afd=_0x124afd-0x1f0;let _0x26eb0e=_0x138a1e[_0x124afd];return _0x26eb0e;},a132_0x124a(_0x21adc9,_0x147da7);}function a132_0x138a(){const _0x1b787d=['cAocs','vZgoX','./testhub/utils','framework','dGuXT','BROWSERSTACK_TESTHUB_UUID','getOptimalHubUrl','name','isNullOrEmpty','isModifiable','12684jQoNeQ','xMWyq','hostname','Directory\x20','DcAVc','replace','requirePWModule','mGHoc','ENV_VAR','isTurboScaleSession','FUNNEL_INSTRUMENTATION_API_URL','format','parse','application/json','SDKTestSuccessful','5676180SbiXPL','SjKYu','stringify','./globals','./test-observability/utils','../helpers/testhub/constants','getUserName','./performance/performance-tester','iRPfs','26fATdeG','EHOKA','NpPAu','body','codeceptjs','config','zUoDe','assign','APP_AUTOMATE_PRODUCTS','fireFunnelTestEvent','POST','browserVersion','stopPercy','../bin/playwright/reporter/pwUtils','11494008QCcbYC','vXbtM','isBrowserstackInfra','90109PPDtFJ','errorMessage','setReadWriteExecuteAccess','../bin/utils/constants','API\x20Event\x20','reduce','\x20has\x20now\x20read/write/execute\x20permissions.','getSessionsList','chmodSync','\x20response\x20-\x20','notifyUpdate','efZal','keys','length','./helper','TZSjd','error','PbNMz','osVersion','iNEbV','10186176EkrVZH','VbsOa','finishedMetadata','tests','buildName','Failed\x20to\x20set\x20directory\x20access:\x20','204PuiicM','toString','browserStackConfig','SDK\x20run\x20ended\x20for\x20id:\x20','getPackageVersion','nodeRequest','22lHrGWr','9geCbKJ','getTurboScaleSessionsList','AUTOMATE','debug','event_properties','6oFuvPr','content-type','Gkspc','values','user_killed','_buildHashedId','\x20:\x20','CLtTt','AUTOMATE_PRODUCTS','SPiAD','RivHn','sanitizeBrowserStackConfig','version','buildIdentifier','1893gnBYDd','sNIrM','join','getAccessKey','unknown','X_OK','env','Error\x20in\x20getting\x20framework\x20version\x20to\x20:\x20','null','getFrameworkVersion','getStackTraceAsString','trim','app','seleniumVersion','finalExecution','yffya','sdkRunId','PRODUCT_IF_NOT_BROWSERSTACK_INFRA','1713025SmCqWE','getNodeAgent','push','accessSync','APP_AUTOMATE','forEach','constants','oLaFj','globalException','21515gLsrAJ','browser','PTWfR','vAWtK','nodejs','eqRzI','oWztO','all','Error\x20in\x20firing\x20request\x20to\x20'];a132_0x138a=function(){return _0x1b787d;};return a132_0x138a();}exports[a132_0x5a2133(0x213)]=async(_0x1cb049,_0xfaf860={},_0x592fb8,_0x34a618)=>{const _0x51e5a6=a132_0x5a2133,_0x353da4={'nbkZG':function(_0x49b406,_0x21a236){return _0x49b406===_0x21a236;},'GlOJy':'object','cAocs':function(_0x3bdc54,_0x53bc11){return _0x3bdc54>_0x53bc11;},'TZSjd':function(_0x21ab50,_0x1c747b){return _0x21ab50>_0x1c747b;},'efZal':_0x51e5a6(0x232),'hWezQ':function(_0x1dd206){return _0x1dd206();},'SPiAD':function(_0x595dda){return _0x595dda();},'MVCGV':function(_0x516698,_0x444887){return _0x516698==_0x444887;},'PTWfR':_0x51e5a6(0x257),'oLaFj':function(_0x4515bb,_0x44ee66){return _0x4515bb===_0x44ee66;},'mGHoc':'undefined','IQnpe':function(_0x19f6fb,_0x520071){return _0x19f6fb>_0x520071;},'yffya':function(_0x4d0369,_0x4bf576){return _0x4d0369===_0x4bf576;},'OiEkv':_0x51e5a6(0x20e),'NpPAu':function(_0x42a5d2,_0x560694){return _0x42a5d2!==_0x560694;},'iNEbV':'Playwright','VbsOa':function(_0x12a0e9,_0xa499c2){return _0x12a0e9===_0xa499c2;},'iRPfs':_0x51e5a6(0x22b),'wFrmK':function(_0x5e3f3e,_0x14bda6){return _0x5e3f3e+_0x14bda6;},'zUoDe':'Error\x20while\x20parsing\x20tests\x20errors,\x20Exception:\x20','dGuXT':_0x51e5a6(0x246),'sNIrM':function(_0x41d101,_0x2dd51e){return _0x41d101(_0x2dd51e);},'CLtTt':_0x51e5a6(0x253),'SXCUg':_0x51e5a6(0x26e),'pQQnl':function(_0xc44a6c,_0x494da4){return _0xc44a6c===_0x494da4;},'DcAVc':'SDKTestSuccessful','Gkspc':function(_0x78db0c,_0x2bad3f){return _0x78db0c===_0x2bad3f;},'LxxVY':function(_0x1091cb){return _0x1091cb();},'PbNMz':'selenium-webdriver','eqRzI':_0x51e5a6(0x1ff),'SjKYu':'[REDACTED]','rprmI':_0x51e5a6(0x214)};let _0x437ac4=[];if(helper['isBrowserstackInfra']()&&_0x353da4['hWezQ'](isTestObservabilitySession))_0x437ac4=_0x592fb8['app']?constants[_0x51e5a6(0x212)]:constants[_0x51e5a6(0x249)];else{if(_0x353da4[_0x51e5a6(0x24a)](isTestObservabilitySession))_0x437ac4=constants[_0x51e5a6(0x260)];else helper[_0x51e5a6(0x21a)]()&&(_0x437ac4=_0x592fb8[_0x51e5a6(0x25b)]?constants[_0x51e5a6(0x265)]:constants[_0x51e5a6(0x23e)]);}let _0x399625=_0x592fb8[_0x51e5a6(0x24e)];if(_0x353da4['MVCGV'](_0x399625,null))_0x399625=_0x353da4[_0x51e5a6(0x26c)];else _0x353da4[_0x51e5a6(0x268)](_0x399625,undefined)&&(_0x399625=_0x353da4[_0x51e5a6(0x1f9)]);unhandledErrors&&_0x353da4['IQnpe'](unhandledErrors[_0x51e5a6(0x228)],0x0)&&(_0xfaf860[_0x51e5a6(0x269)]=unhandledErrors);global[_0x51e5a6(0x25f)]&&(_0xfaf860[_0x51e5a6(0x25f)]=global[_0x51e5a6(0x25f)]);try{if(_0xfaf860[_0x51e5a6(0x22b)]){if(_0x353da4[_0x51e5a6(0x25e)](_0x34a618,_0x353da4['OiEkv'])&&_0x353da4['TZSjd'](_0xfaf860[_0x51e5a6(0x22b)][_0x51e5a6(0x228)],0x0)){const _0x2a9303={};_0x2a9303['os']='',_0x2a9303[_0x51e5a6(0x22d)]='',_0x2a9303[_0x51e5a6(0x26b)]='',_0x2a9303[_0x51e5a6(0x215)]='';const _0x36795d=_0x2a9303;let _0x19e0d4={};const _0x1695d9=_0xfaf860[_0x51e5a6(0x22b)];_0x19e0d4=_0x1695d9[_0x51e5a6(0x220)]((_0x5c9a92,_0x4066f1)=>{for(const _0x46e484 in _0x4066f1){_0x5c9a92[_0x46e484]=_0x4066f1[_0x46e484];}return _0x5c9a92;},{});const _0x161403={};_0x161403[_0x51e5a6(0x232)]=_0x19e0d4,_0xfaf860[_0x51e5a6(0x22b)]=[Object[_0x51e5a6(0x211)]({},_0x36795d,_0x161403)];}else{let _0x12fad6=0x0;const _0x1cadcd=_0x353da4[_0x51e5a6(0x20c)](_0x34a618,_0x353da4[_0x51e5a6(0x22e)])?JSON[_0x51e5a6(0x1fe)](_0xfaf860[_0x51e5a6(0x22b)]):_0xfaf860[_0x51e5a6(0x22b)],_0xfac131=Object[_0x51e5a6(0x244)](_0x1cadcd);_0xfac131[_0x51e5a6(0x266)](_0x50a183=>{if(_0x353da4['nbkZG'](typeof _0x50a183,_0x353da4['GlOJy'])){const _0x527053=Object['values'](_0x50a183);!_0x527053['every'](_0x1cec09=>_0x1cec09===null||_0x1cec09===undefined||_0x1cec09==='')&&(_0x12fad6+=0x1);}});if(_0x353da4[_0x51e5a6(0x230)](_0x12fad6,0x0))delete _0xfaf860[_0x353da4[_0x51e5a6(0x209)]];else{const _0x41a2d0=[];Object['keys'](_0x1cadcd)[_0x51e5a6(0x266)](_0x418f5d=>{const _0x56f821=_0x51e5a6,[_0x1f666f,_0x11250d,_0x3092fe,_0x4af1f6]=_0x418f5d['split'](',\x20');let _0xa3eceb={};if(!_0x4af1f6){const _0x1aaa56={};_0x1aaa56['deviceName']=_0x1f666f,_0x1aaa56[_0x56f821(0x22d)]=_0x11250d,_0x1aaa56[_0x56f821(0x26b)]=_0x3092fe,_0xa3eceb=_0x1aaa56;}else{const _0x1758d5={};_0x1758d5['os']=_0x1f666f,_0x1758d5[_0x56f821(0x22d)]=_0x11250d,_0x1758d5[_0x56f821(0x26b)]=_0x3092fe,_0x1758d5[_0x56f821(0x215)]=_0x4af1f6,_0xa3eceb=_0x1758d5;}const _0x123c33={},_0x2da60c=_0x1cadcd[_0x418f5d];Object[_0x56f821(0x227)](_0x2da60c)['forEach'](_0x11b16f=>{const _0x4cf990=_0x56f821;_0x353da4[_0x4cf990(0x273)](_0x2da60c[_0x11b16f]['length'],0x0)&&(_0x123c33[_0x11b16f]=_0x2da60c[_0x11b16f]);}),_0x353da4[_0x56f821(0x22a)](Object['keys'](_0x123c33)[_0x56f821(0x228)],0x0)&&(_0xa3eceb[_0x353da4[_0x56f821(0x226)]]=_0x123c33,_0x41a2d0[_0x56f821(0x263)](_0xa3eceb));}),_0x353da4[_0x51e5a6(0x273)](_0x41a2d0[_0x51e5a6(0x228)],0x0)?_0xfaf860[_0x51e5a6(0x22b)]=_0x41a2d0:delete _0xfaf860[_0x353da4[_0x51e5a6(0x209)]];}}}}catch(_0x4503b6){delete _0xfaf860[_0x353da4[_0x51e5a6(0x209)]],logger['debug'](_0x353da4['wFrmK'](_0x353da4[_0x51e5a6(0x210)],_0x4503b6));}const _0x3a4c91=helper['getTestFrameworkDetails'](_0x592fb8,_0x592fb8[_0x51e5a6(0x276)]),_0x3fae5a={'userName':helper[_0x51e5a6(0x207)](_0x592fb8),'accessKey':helper['getAccessKey'](_0x592fb8),'event_type':_0x1cb049,'detectedFramework':_0x34a618,'buildHashedId':globals['getGlobal'](_0x353da4[_0x51e5a6(0x277)]),'optimalHubUrl':helper[_0x51e5a6(0x279)](),'event_properties':{'testhub_uuid':process[_0x51e5a6(0x255)][testHubConstants[_0x51e5a6(0x1fa)]['BROWSERSTACK_TESTHUB_UUID']]||'','sdkRunId':global[_0x51e5a6(0x25f)],'product_map':_0x353da4[_0x51e5a6(0x250)](getProductMap,_0x592fb8),'productMap':_0x353da4['sNIrM'](getProductMap,_0x592fb8),'language_framework':_0x592fb8['source']||_0x353da4[_0x51e5a6(0x248)],'referrer':helper[_0x51e5a6(0x262)](_0x34a618),'framework':_0x592fb8[_0x51e5a6(0x276)],'frameworkVersion':helper[_0x51e5a6(0x258)](_0x34a618),'automationFramework':_0x3a4c91[_0x51e5a6(0x27a)],'automationFrameworkVersion':_0x3a4c91[_0x51e5a6(0x24d)],'language':_0x353da4['SXCUg'],'languageVersion':process[_0x51e5a6(0x24d)],'product':_0x437ac4,'buildName':_0x592fb8[_0x51e5a6(0x233)]||_0x353da4[_0x51e5a6(0x1f9)],'buildIdentifier':_0x399625,'os':os['type']()||_0x353da4[_0x51e5a6(0x248)],'hostname':os[_0x51e5a6(0x1f4)]()||_0x353da4[_0x51e5a6(0x248)],..._0xfaf860}};try{_0x353da4['pQQnl'](_0x1cb049,_0x353da4[_0x51e5a6(0x1f6)])&&(_0x3fae5a[_0x51e5a6(0x240)][_0x51e5a6(0x237)]=helper[_0x51e5a6(0x24c)](_0x592fb8)),_0x353da4[_0x51e5a6(0x243)](_0x34a618,_0x353da4[_0x51e5a6(0x22e)])?_0x3fae5a['event_properties']['playwrightVersion']=helper[_0x51e5a6(0x1f8)]['apply'](null,_0x353da4['LxxVY'](getTransformPath),!![]):_0x3fae5a[_0x51e5a6(0x240)][_0x51e5a6(0x25c)]=helper[_0x51e5a6(0x239)](_0x353da4[_0x51e5a6(0x22c)]);}catch(_0x35f92b){logger[_0x51e5a6(0x23f)](_0x51e5a6(0x256)+_0x35f92b);}const _0x7fb21b={};_0x7fb21b[_0x51e5a6(0x242)]=_0x353da4[_0x51e5a6(0x26f)];const _0x13381c={'headers':_0x7fb21b,'body':_0x3fae5a,'auth':{'user':helper[_0x51e5a6(0x207)](_0x592fb8),'pass':helper[_0x51e5a6(0x252)](_0x592fb8)},'json':!![]};logger['debug']('Firing\x20SDK\x20event\x20for\x20funnel\x20data:\x20'+JSON[_0x51e5a6(0x203)](_0x13381c[_0x51e5a6(0x20d)])[_0x51e5a6(0x1f7)](new RegExp(helper[_0x51e5a6(0x207)](_0x592fb8),'g'),_0x353da4[_0x51e5a6(0x202)])[_0x51e5a6(0x1f7)](new RegExp(helper[_0x51e5a6(0x252)](_0x592fb8),'g'),_0x353da4['SjKYu']));try{const _0x2fead2=await helper[_0x51e5a6(0x23a)](_0x353da4['rprmI'],constants[_0x51e5a6(0x1fc)],_0x13381c,_0x592fb8);logger[_0x51e5a6(0x23f)](_0x51e5a6(0x21f)+_0x1cb049+_0x51e5a6(0x224)+util[_0x51e5a6(0x1fd)]('%j',_0x2fead2));}catch(_0x1334bf){logger['debug'](_0x51e5a6(0x272)+FUNNEL_INSTRUMENTATION_API_URL+_0x51e5a6(0x247)+util['format'](_0x1334bf));}},exports[a132_0x5a2133(0x25d)]=async _0x4a34d3=>{const _0x53ba71=a132_0x5a2133,_0x58e4af={'IVjoq':function(_0x5c6eed){return _0x5c6eed();},'xMWyq':_0x53ba71(0x231),'oWztO':_0x53ba71(0x245),'ribrW':_0x53ba71(0x200),'bvkgF':function(_0x2552dd,_0x264eb8,_0x40dbe3){return _0x2552dd(_0x264eb8,_0x40dbe3);},'vXbtM':function(_0x3a07cf,_0x28b8cc){return _0x3a07cf+_0x28b8cc;},'vAWtK':'Something\x20went\x20wrong\x20in\x20Final\x20Execution\x20step\x20:\x20'};try{await _0x4a34d3[_0x53ba71(0x216)](),_0x58e4af['IVjoq'](printNudgeLocalNotSetError);const _0x4443b4={};_0x4443b4[_0x53ba71(0x22b)]=_0x4a34d3[_0x53ba71(0x21c)]?_0x4a34d3[_0x53ba71(0x21c)]:'{}';const _0x24f917=_0x4443b4,_0x5bbc4f=Object[_0x53ba71(0x211)]({},_0x24f917);!!_0x4a34d3['killSignal']&&(_0x5bbc4f[_0x58e4af[_0x53ba71(0x1f3)]]={'reason':_0x58e4af[_0x53ba71(0x270)],'signal':_0x4a34d3['killSignal']});unhandledErrors=_0x4a34d3['unhandledErrors'][_0x53ba71(0x251)]('\x0a');let _0x43adbe,_0x1532e6,_0x477bfa;helper[_0x53ba71(0x1fb)](_0x4a34d3[_0x53ba71(0x20f)])?([_0x43adbe,_0x1532e6]=await helper['getTurboScaleBuildLink'](_0x4a34d3['config']),[_0x477bfa]=await Promise[_0x53ba71(0x271)]([helper[_0x53ba71(0x23d)](_0x43adbe,_0x4a34d3[_0x53ba71(0x20f)]),exports['fireFunnelTestEvent'](_0x58e4af['ribrW'],_0x5bbc4f,_0x4a34d3[_0x53ba71(0x20f)],_0x4a34d3['framework'])])):([_0x43adbe,_0x1532e6]=await helper['getBuildLink'](_0x4a34d3[_0x53ba71(0x20f)]),[_0x477bfa]=await Promise['all']([helper[_0x53ba71(0x222)](_0x43adbe,_0x4a34d3[_0x53ba71(0x20f)]),exports[_0x53ba71(0x213)](_0x58e4af['ribrW'],_0x5bbc4f,_0x4a34d3[_0x53ba71(0x20f)],_0x4a34d3[_0x53ba71(0x276)])])),_0x477bfa&&await _0x58e4af['bvkgF'](generateCIArtifacts,_0x477bfa,_0x1532e6),logger['info'](_0x53ba71(0x238)+_0x4a34d3[_0x53ba71(0x25f)]+',\x20testhub\x20id:\x20'+process[_0x53ba71(0x255)][_0x53ba71(0x278)]),await helper['sendLogs'](_0x4a34d3[_0x53ba71(0x20f)]);}catch(_0x1f11a1){logger[_0x53ba71(0x23f)](_0x58e4af[_0x53ba71(0x219)](_0x58e4af[_0x53ba71(0x26d)],_0x1f11a1));}helper[_0x53ba71(0x225)]();},exports[a132_0x5a2133(0x259)]=_0x3575e9=>{const _0x1312cf=a132_0x5a2133,_0x47dd1f={'vZgoX':function(_0x5a3e27,_0x1bf393){return _0x5a3e27 instanceof _0x1bf393;},'SFdGw':function(_0x216bca,_0x489262){return _0x216bca(_0x489262);}};try{if(_0x47dd1f[_0x1312cf(0x274)](_0x3575e9,Error))return _0x3575e9['stack']||_0x3575e9[_0x1312cf(0x236)]();return _0x47dd1f['SFdGw'](String,_0x3575e9);}catch(_0x2e59d7){return _0x3575e9?_0x3575e9[_0x1312cf(0x236)]():'';}},exports[a132_0x5a2133(0x1f0)]=_0x5d627e=>{const _0x2bbe52=a132_0x5a2133,_0x437135={};_0x437135[_0x2bbe52(0x20b)]=function(_0x2d95a6,_0x395481){return _0x2d95a6===_0x395481;};const _0x2b2216=_0x437135;return!_0x5d627e||_0x2b2216[_0x2bbe52(0x20b)](_0x5d627e[_0x2bbe52(0x25a)](),'');},exports[a132_0x5a2133(0x1f1)]=_0x3bc2b3=>{const _0x4a2d7e=a132_0x5a2133,_0x3d2a4e={};_0x3d2a4e[_0x4a2d7e(0x24b)]=function(_0x3ee1c1,_0x4f9fa2){return _0x3ee1c1|_0x4f9fa2;};const _0x1d63cc=_0x3d2a4e;try{return fs[_0x4a2d7e(0x264)](_0x3bc2b3,_0x1d63cc['RivHn'](fs[_0x4a2d7e(0x267)]['W_OK'],fs[_0x4a2d7e(0x267)][_0x4a2d7e(0x254)])),!![];}catch(_0x45ccba){return![];}},exports[a132_0x5a2133(0x21d)]=_0x2a566e=>{const _0x401eaf=a132_0x5a2133;try{fs[_0x401eaf(0x223)](_0x2a566e,0x1ff),logger['debug'](_0x401eaf(0x1f5)+_0x2a566e+_0x401eaf(0x221));}catch(_0x4550cf){logger[_0x401eaf(0x22b)](_0x401eaf(0x234)+exports[_0x401eaf(0x259)](_0x4550cf));}};