const a93_0x1e7169=a93_0x339b;(function(_0x258892,_0x2a9e51){const _0x2298bd=a93_0x339b,_0x290ce1=_0x258892();while(!![]){try{const _0x2d0fdc=-parseInt(_0x2298bd(0x120))/0x1+parseInt(_0x2298bd(0x12a))/0x2*(parseInt(_0x2298bd(0x111))/0x3)+-parseInt(_0x2298bd(0x186))/0x4+-parseInt(_0x2298bd(0x16e))/0x5*(parseInt(_0x2298bd(0x115))/0x6)+-parseInt(_0x2298bd(0x13c))/0x7+parseInt(_0x2298bd(0x183))/0x8*(-parseInt(_0x2298bd(0x136))/0x9)+parseInt(_0x2298bd(0x180))/0xa*(parseInt(_0x2298bd(0x17e))/0xb);if(_0x2d0fdc===_0x2a9e51)break;else _0x290ce1['push'](_0x290ce1['shift']());}catch(_0x751a4e){_0x290ce1['push'](_0x290ce1['shift']());}}}(a93_0x2dbd,0x282c6));const os=require('os'),util=require(a93_0x1e7169(0x12b)),{getProductMap}=require(a93_0x1e7169(0x11f)),logger=require('./logger')[a93_0x1e7169(0x12d)],constants=require(a93_0x1e7169(0x145)),testHubConstants=require(a93_0x1e7169(0x16d)),{getTransformPath}=require('../bin/playwright/reporter/pwUtils'),{FUNNEL_INSTRUMENTATION_API_URL}=require(a93_0x1e7169(0x145)),{generateCIArtifacts,printNudgeLocalNotSetError}=require(a93_0x1e7169(0xf9)),PerformanceTester=require('./performance/performance-tester'),globals=require(a93_0x1e7169(0x124)),{isTurboScaleSession}=require(a93_0x1e7169(0x129)),helper=require('./helper'),{isTestObservabilitySession}=require(a93_0x1e7169(0x117));function a93_0x2dbd(){const _0x3fc316=['247699pGCOiO','sTylj','PRODUCT_IF_NOT_BROWSERSTACK_INFRA','format','./globals','fireFunnelTestEvent','hostname','RVcol','getAccessKey','./ats/helper','62IBWMne','util','Firing\x20SDK\x20event\x20for\x20funnel\x20data:\x20','winstonLogger','AUTOMATE_PRODUCTS','browserVersion','BROWSERSTACK_TESTHUB_UUID','seleniumVersion','finishedMetadata','kGeLn','sendLogs','\x20:\x20','45SCEazm','SDKTestSuccessful','config','notifyUpdate','getFrameworkVersion','stopPercy','18900ogTKYT','Playwright','XFWfX','AUTOMATE','Error\x20in\x20getting\x20framework\x20version\x20to\x20:\x20','stringify','Error\x20while\x20parsing\x20tests\x20errors,\x20Exception:\x20','source','finalExecution','../bin/utils/constants','WHsuP','event_properties','getTurboScaleBuildLink','fbOyQ','EMZca','SDK\x20run\x20ended\x20for\x20id:\x20','FUNNEL_INSTRUMENTATION_API_URL','all','isBrowserstackInfra','ZKOTS','HwbiP','fCafp','getNodeAgent','QhHZw','ENV_VAR','nodeRequest','browser','tkfrc','null','NiEiu','Error\x20in\x20firing\x20request\x20to\x20','getPackageVersion','selenium-webdriver','sdkRunID','sdkRunId','type','Axaat','parse','content-type','vHSbB','env','body','API\x20Event\x20','TIfBH','CAuNz','osVersion','error','getOptimalHubUrl','reduce','../helpers/testhub/constants','81610UCmyUL','user_killed','iUBdN','wQecg','length','fPhrJ','getTurboScaleSessionsList','POST','getGlobal','forEach','codeceptjs','playwrightVersion','info','IYnaC','every','OWEUl','803neAxaW','join','70700OmlnOS','getBuildLink','MMGWq','189864boeQdi','[REDACTED]','\x20response\x20-\x20','997372mmdENX',',\x20testhub\x20id:\x20','./helper','requirePWModule','LYWuG','eglTR','xPJWH','tests','values','version','assign','framework','ulpXk','application/json','getUserName','unknown','errorMessage','split','object','Something\x20went\x20wrong\x20in\x20Final\x20Execution\x20step\x20:\x20','name','deviceName','CfBLC','getTestFrameworkDetails','unhandledErrors','MRhHd','28983RVqZUy','keys','getSessionsList','push','12GXigOq','nodejs','./test-observability/utils','killSignal','browserStackConfig','HcYxi','xVxOV','eFduY','debug','APP_AUTOMATE_PRODUCTS','./testhub/utils'];a93_0x2dbd=function(){return _0x3fc316;};return a93_0x2dbd();}function a93_0x339b(_0x43ab25,_0x56a7bb){const _0x2dbd19=a93_0x2dbd();return a93_0x339b=function(_0x339b2d,_0x2e3e5b){_0x339b2d=_0x339b2d-0xf8;let _0x20adda=_0x2dbd19[_0x339b2d];return _0x20adda;},a93_0x339b(_0x43ab25,_0x56a7bb);}let unhandledErrors='';exports['fireFunnelTestEvent']=async(_0x230395,_0x2f8f33={},_0x3b09f8,_0x4bbbfd)=>{const _0x38f62e=a93_0x1e7169,_0x27ac33={'CAuNz':function(_0xc118c5,_0x4d31e0){return _0xc118c5===_0x4d31e0;},'BUFEH':_0x38f62e(0x109),'Axaat':function(_0x3b63fb,_0x2b01aa){return _0x3b63fb>_0x2b01aa;},'NiEiu':_0x38f62e(0xfe),'xPJWH':function(_0x1192f8){return _0x1192f8();},'nZhVx':function(_0x539834){return _0x539834();},'IYnaC':function(_0x5028a7,_0x38470d){return _0x5028a7==_0x38470d;},'XFWfX':_0x38f62e(0x158),'QhHZw':'undefined','WHsuP':_0x38f62e(0x178),'ulpXk':function(_0x23ff82,_0x56860f){return _0x23ff82!==_0x56860f;},'fbOyQ':_0x38f62e(0x13d),'mtmEC':function(_0x32f08c,_0x22be31){return _0x32f08c===_0x22be31;},'MMGWq':_0x38f62e(0x16a),'pkmrq':function(_0x3c3514,_0x76e03){return _0x3c3514>_0x76e03;},'pzxTr':function(_0x1c8edd,_0xc1b622){return _0x1c8edd+_0xc1b622;},'ZKOTS':_0x38f62e(0x142),'vHSbB':'_buildHashedId','RVcol':function(_0x4fdc24,_0x5f372f){return _0x4fdc24(_0x5f372f);},'kGeLn':_0x38f62e(0x106),'xVxOV':_0x38f62e(0x116),'HcYxi':function(_0x4daf0a,_0x503a47){return _0x4daf0a===_0x503a47;},'wQecg':_0x38f62e(0x137),'LYWuG':function(_0x2adde8,_0x59e524){return _0x2adde8===_0x59e524;},'iUBdN':_0x38f62e(0x15c),'MRhHd':_0x38f62e(0x104),'fCafp':_0x38f62e(0x184),'tkfrc':_0x38f62e(0x175)};let _0x580b0d=[];if(helper[_0x38f62e(0x14e)]()&&_0x27ac33[_0x38f62e(0xfd)](isTestObservabilitySession))_0x580b0d=_0x3b09f8['app']?constants[_0x38f62e(0x11e)]:constants[_0x38f62e(0x12e)];else{if(_0x27ac33['nZhVx'](isTestObservabilitySession))_0x580b0d=constants[_0x38f62e(0x122)];else helper[_0x38f62e(0x14e)]()&&(_0x580b0d=_0x3b09f8['app']?constants['APP_AUTOMATE']:constants[_0x38f62e(0x13f)]);}let _0x286069=_0x3b09f8['buildIdentifier'];if(_0x27ac33[_0x38f62e(0x17b)](_0x286069,null))_0x286069=_0x27ac33[_0x38f62e(0x13e)];else _0x27ac33[_0x38f62e(0x168)](_0x286069,undefined)&&(_0x286069=_0x27ac33[_0x38f62e(0x153)]);unhandledErrors&&_0x27ac33[_0x38f62e(0x160)](unhandledErrors[_0x38f62e(0x172)],0x0)&&(_0x2f8f33['globalException']=unhandledErrors);global[_0x38f62e(0x15d)]&&(_0x2f8f33[_0x38f62e(0x15e)]=global[_0x38f62e(0x15d)]);try{if(_0x2f8f33[_0x38f62e(0x16a)]){if(_0x27ac33['CAuNz'](_0x4bbbfd,_0x27ac33[_0x38f62e(0x146)])&&_0x27ac33[_0x38f62e(0x160)](_0x2f8f33[_0x38f62e(0x16a)][_0x38f62e(0x172)],0x0)){const _0x348bdc={};_0x348bdc['os']='',_0x348bdc[_0x38f62e(0x169)]='',_0x348bdc[_0x38f62e(0x156)]='',_0x348bdc[_0x38f62e(0x12f)]='';const _0x12ab75=_0x348bdc;let _0x4e4516={};const _0x57f684=_0x2f8f33[_0x38f62e(0x16a)];_0x4e4516=_0x57f684[_0x38f62e(0x16c)]((_0x5e6f81,_0xe8f096)=>{for(const _0x2f274e in _0xe8f096){_0x5e6f81[_0x2f274e]=_0xe8f096[_0x2f274e];}return _0x5e6f81;},{});const _0x3954e1={};_0x3954e1[_0x38f62e(0xfe)]=_0x4e4516,_0x2f8f33['error']=[Object[_0x38f62e(0x101)]({},_0x12ab75,_0x3954e1)];}else{let _0x2c3b9b=0x0;const _0x1bdbb9=_0x27ac33[_0x38f62e(0x103)](_0x4bbbfd,_0x27ac33[_0x38f62e(0x149)])?JSON[_0x38f62e(0x161)](_0x2f8f33[_0x38f62e(0x16a)]):_0x2f8f33[_0x38f62e(0x16a)],_0x2f7976=Object[_0x38f62e(0xff)](_0x1bdbb9);_0x2f7976['forEach'](_0x1dcb8f=>{const _0x5118c6=_0x38f62e;if(_0x27ac33[_0x5118c6(0x168)](typeof _0x1dcb8f,_0x27ac33['BUFEH'])){const _0x5f5724=Object[_0x5118c6(0xff)](_0x1dcb8f);!_0x5f5724[_0x5118c6(0x17c)](_0x4ca562=>_0x4ca562===null||_0x4ca562===undefined||_0x4ca562==='')&&(_0x2c3b9b+=0x1);}});if(_0x27ac33['mtmEC'](_0x2c3b9b,0x0))delete _0x2f8f33[_0x27ac33[_0x38f62e(0x182)]];else{const _0x5f3805=[];Object['keys'](_0x1bdbb9)[_0x38f62e(0x177)](_0x45a983=>{const _0xd33f75=_0x38f62e,_0x5246c2={'sTylj':function(_0xe3f6e5,_0x48af28){return _0x27ac33['Axaat'](_0xe3f6e5,_0x48af28);}},[_0x3c7028,_0x2f78bc,_0x4492b5,_0x11c096]=_0x45a983[_0xd33f75(0x108)](',\x20');let _0x45d2b8={};if(!_0x11c096){const _0x4c4a19={};_0x4c4a19[_0xd33f75(0x10c)]=_0x3c7028,_0x4c4a19[_0xd33f75(0x169)]=_0x2f78bc,_0x4c4a19[_0xd33f75(0x156)]=_0x4492b5,_0x45d2b8=_0x4c4a19;}else{const _0x4b0b0d={};_0x4b0b0d['os']=_0x3c7028,_0x4b0b0d[_0xd33f75(0x169)]=_0x2f78bc,_0x4b0b0d[_0xd33f75(0x156)]=_0x4492b5,_0x4b0b0d[_0xd33f75(0x12f)]=_0x11c096,_0x45d2b8=_0x4b0b0d;}const _0x641990={},_0x21e1a1=_0x1bdbb9[_0x45a983];Object['keys'](_0x21e1a1)['forEach'](_0x218482=>{const _0x4f9db0=_0xd33f75;_0x5246c2[_0x4f9db0(0x121)](_0x21e1a1[_0x218482]['length'],0x0)&&(_0x641990[_0x218482]=_0x21e1a1[_0x218482]);}),_0x27ac33[_0xd33f75(0x160)](Object[_0xd33f75(0x112)](_0x641990)[_0xd33f75(0x172)],0x0)&&(_0x45d2b8[_0x27ac33[_0xd33f75(0x159)]]=_0x641990,_0x5f3805[_0xd33f75(0x114)](_0x45d2b8));}),_0x27ac33['pkmrq'](_0x5f3805[_0x38f62e(0x172)],0x0)?_0x2f8f33[_0x38f62e(0x16a)]=_0x5f3805:delete _0x2f8f33[_0x27ac33[_0x38f62e(0x182)]];}}}}catch(_0x87a2a1){delete _0x2f8f33[_0x27ac33[_0x38f62e(0x182)]],logger[_0x38f62e(0x11d)](_0x27ac33['pzxTr'](_0x27ac33[_0x38f62e(0x14f)],_0x87a2a1));}const _0x4f9b77=helper[_0x38f62e(0x10e)](_0x3b09f8,_0x3b09f8[_0x38f62e(0x102)]),_0x4bf3cf={'userName':helper[_0x38f62e(0x105)](_0x3b09f8),'accessKey':helper[_0x38f62e(0x128)](_0x3b09f8),'event_type':_0x230395,'detectedFramework':_0x4bbbfd,'buildHashedId':globals[_0x38f62e(0x176)](_0x27ac33[_0x38f62e(0x163)]),'optimalHubUrl':helper[_0x38f62e(0x16b)](),'event_properties':{'testhub_uuid':process[_0x38f62e(0x164)][testHubConstants[_0x38f62e(0x154)]['BROWSERSTACK_TESTHUB_UUID']]||'','sdkRunId':global[_0x38f62e(0x15d)],'product_map':_0x27ac33[_0x38f62e(0x127)](getProductMap,_0x3b09f8),'productMap':_0x27ac33[_0x38f62e(0x127)](getProductMap,_0x3b09f8),'language_framework':_0x3b09f8[_0x38f62e(0x143)]||_0x27ac33[_0x38f62e(0x133)],'referrer':helper[_0x38f62e(0x152)](_0x4bbbfd),'framework':_0x3b09f8[_0x38f62e(0x102)],'frameworkVersion':helper[_0x38f62e(0x13a)](_0x4bbbfd),'automationFramework':_0x4f9b77[_0x38f62e(0x10b)],'automationFrameworkVersion':_0x4f9b77[_0x38f62e(0x100)],'language':_0x27ac33[_0x38f62e(0x11b)],'languageVersion':process['version'],'product':_0x580b0d,'buildName':_0x3b09f8['buildName']||_0x27ac33[_0x38f62e(0x153)],'buildIdentifier':_0x286069,'os':os[_0x38f62e(0x15f)]()||_0x27ac33[_0x38f62e(0x133)],'hostname':os[_0x38f62e(0x126)]()||_0x27ac33['kGeLn'],..._0x2f8f33}};try{_0x27ac33[_0x38f62e(0x11a)](_0x230395,_0x27ac33[_0x38f62e(0x171)])&&(_0x4bf3cf[_0x38f62e(0x147)][_0x38f62e(0x119)]=helper['sanitizeBrowserStackConfig'](_0x3b09f8)),_0x27ac33[_0x38f62e(0xfb)](_0x4bbbfd,_0x27ac33[_0x38f62e(0x149)])?_0x4bf3cf['event_properties'][_0x38f62e(0x179)]=helper[_0x38f62e(0xfa)]['apply'](null,_0x27ac33[_0x38f62e(0xfd)](getTransformPath),!![]):_0x4bf3cf[_0x38f62e(0x147)][_0x38f62e(0x131)]=helper[_0x38f62e(0x15b)](_0x27ac33[_0x38f62e(0x170)]);}catch(_0x4a4bcd){logger[_0x38f62e(0x11d)](_0x38f62e(0x140)+_0x4a4bcd);}const _0x62405c={};_0x62405c[_0x38f62e(0x162)]=_0x27ac33[_0x38f62e(0x110)];const _0x256009={'headers':_0x62405c,'body':_0x4bf3cf,'auth':{'user':helper[_0x38f62e(0x105)](_0x3b09f8),'pass':helper[_0x38f62e(0x128)](_0x3b09f8)},'json':!![]};logger[_0x38f62e(0x11d)](_0x38f62e(0x12c)+JSON[_0x38f62e(0x141)](_0x256009[_0x38f62e(0x165)])['replace'](new RegExp(helper['getUserName'](_0x3b09f8),'g'),_0x27ac33[_0x38f62e(0x151)])['replace'](new RegExp(helper[_0x38f62e(0x128)](_0x3b09f8),'g'),_0x27ac33[_0x38f62e(0x151)]));try{const _0xbc4efa=await helper[_0x38f62e(0x155)](_0x27ac33[_0x38f62e(0x157)],constants[_0x38f62e(0x14c)],_0x256009,_0x3b09f8);logger[_0x38f62e(0x11d)](_0x38f62e(0x166)+_0x230395+_0x38f62e(0x185)+util[_0x38f62e(0x123)]('%j',_0xbc4efa));}catch(_0x28cff0){logger[_0x38f62e(0x11d)](_0x38f62e(0x15a)+FUNNEL_INSTRUMENTATION_API_URL+_0x38f62e(0x135)+util[_0x38f62e(0x123)](_0x28cff0));}},exports[a93_0x1e7169(0x144)]=async _0x5284a2=>{const _0x518b1c=a93_0x1e7169,_0x54e2a3={'TIfBH':function(_0x13cad7){return _0x13cad7();},'EMZca':_0x518b1c(0x132),'OWEUl':_0x518b1c(0x16f),'eglTR':function(_0x178501,_0x3c8d16){return _0x178501(_0x3c8d16);},'fPhrJ':_0x518b1c(0x137),'CfBLC':function(_0x3b4038,_0x2bbeb5,_0x5871fc){return _0x3b4038(_0x2bbeb5,_0x5871fc);},'HwbiP':function(_0xea3b88,_0x1871dc){return _0xea3b88+_0x1871dc;},'eFduY':_0x518b1c(0x10a)};try{await _0x5284a2[_0x518b1c(0x13b)](),_0x54e2a3[_0x518b1c(0x167)](printNudgeLocalNotSetError);const _0x28dfbd={};_0x28dfbd[_0x518b1c(0x16a)]=_0x5284a2[_0x518b1c(0x107)]?_0x5284a2[_0x518b1c(0x107)]:'{}';const _0x40ab7a=_0x28dfbd,_0x5b86c9=Object[_0x518b1c(0x101)]({},_0x40ab7a);!!_0x5284a2[_0x518b1c(0x118)]&&(_0x5b86c9[_0x54e2a3[_0x518b1c(0x14a)]]={'reason':_0x54e2a3[_0x518b1c(0x17d)],'signal':_0x5284a2[_0x518b1c(0x118)]});unhandledErrors=_0x5284a2[_0x518b1c(0x10f)][_0x518b1c(0x17f)]('\x0a');let _0x1076c2,_0x10d1e7,_0x5222c1;_0x54e2a3[_0x518b1c(0xfc)](isTurboScaleSession,_0x5284a2[_0x518b1c(0x138)])?([_0x1076c2,_0x10d1e7]=await helper[_0x518b1c(0x148)](_0x5284a2[_0x518b1c(0x138)]),[_0x5222c1]=await Promise[_0x518b1c(0x14d)]([helper[_0x518b1c(0x174)](_0x1076c2,_0x5284a2[_0x518b1c(0x138)]),exports[_0x518b1c(0x125)](_0x54e2a3[_0x518b1c(0x173)],_0x5b86c9,_0x5284a2['config'],_0x5284a2[_0x518b1c(0x102)])])):([_0x1076c2,_0x10d1e7]=await helper[_0x518b1c(0x181)](_0x5284a2[_0x518b1c(0x138)]),[_0x5222c1]=await Promise['all']([helper[_0x518b1c(0x113)](_0x1076c2,_0x5284a2[_0x518b1c(0x138)]),exports[_0x518b1c(0x125)](_0x54e2a3['fPhrJ'],_0x5b86c9,_0x5284a2[_0x518b1c(0x138)],_0x5284a2[_0x518b1c(0x102)])])),_0x5222c1&&await _0x54e2a3[_0x518b1c(0x10d)](generateCIArtifacts,_0x5222c1,_0x10d1e7),logger[_0x518b1c(0x17a)](_0x518b1c(0x14b)+_0x5284a2['sdkRunID']+_0x518b1c(0xf8)+process[_0x518b1c(0x164)][_0x518b1c(0x130)]),await helper[_0x518b1c(0x134)](_0x5284a2['config']);}catch(_0x2070e3){logger[_0x518b1c(0x11d)](_0x54e2a3[_0x518b1c(0x150)](_0x54e2a3[_0x518b1c(0x11c)],_0x2070e3));}helper[_0x518b1c(0x139)]();};