const a137_0x2a57e9=a137_0x34f4;(function(_0x26ca43,_0x220162){const _0x6c6e24=a137_0x34f4,_0x2599cd=_0x26ca43();while(!![]){try{const _0x39415d=parseInt(_0x6c6e24(0x100))/0x1*(parseInt(_0x6c6e24(0x118))/0x2)+-parseInt(_0x6c6e24(0xd7))/0x3*(-parseInt(_0x6c6e24(0xf4))/0x4)+-parseInt(_0x6c6e24(0xeb))/0x5*(parseInt(_0x6c6e24(0xe7))/0x6)+-parseInt(_0x6c6e24(0xfd))/0x7*(-parseInt(_0x6c6e24(0x11c))/0x8)+-parseInt(_0x6c6e24(0xc7))/0x9+-parseInt(_0x6c6e24(0xc5))/0xa*(parseInt(_0x6c6e24(0x107))/0xb)+parseInt(_0x6c6e24(0xd4))/0xc*(parseInt(_0x6c6e24(0x106))/0xd);if(_0x39415d===_0x220162)break;else _0x2599cd['push'](_0x2599cd['shift']());}catch(_0x37ed4e){_0x2599cd['push'](_0x2599cd['shift']());}}}(a137_0x2164,0xeb7c9));const os=require('os'),util=require(a137_0x2a57e9(0x122)),fs=require('fs'),{getProductMap}=require(a137_0x2a57e9(0xf2)),logger=require(a137_0x2a57e9(0x127))[a137_0x2a57e9(0xe9)],constants=require(a137_0x2a57e9(0x10f)),testHubConstants=require(a137_0x2a57e9(0x123)),{getTransformPath}=require('../bin/playwright/reporter/pwUtils'),{FUNNEL_INSTRUMENTATION_API_URL}=require(a137_0x2a57e9(0x10f)),{generateCIArtifacts,printNudgeLocalNotSetError}=require(a137_0x2a57e9(0x130)),PerformanceTester=require(a137_0x2a57e9(0x135)),globals=require(a137_0x2a57e9(0x12a)),helper=require(a137_0x2a57e9(0x130)),{isTestObservabilitySession}=require('./test-observability/utils');let unhandledErrors='';function a137_0x34f4(_0x112024,_0x158b34){const _0x21643b=a137_0x2164();return a137_0x34f4=function(_0x34f41e,_0x167998){_0x34f41e=_0x34f41e-0xb2;let _0x200100=_0x21643b[_0x34f41e];return _0x200100;},a137_0x34f4(_0x112024,_0x158b34);}function a137_0x2164(){const _0x524aec=['Playwright','VUTmh','1304pvkELM','seleniumVersion','unhandledErrors','trim','XdFIn','isBrowserstackInfra','util','../helpers/testhub/constants','requirePWModule','getUserName','event_properties','./logger','BgOCE','getFrameworkVersion','./globals','forEach','_buildHashedId','source','null','wHdfG','./helper','config','playwrightVersion','Cwzba','fireFunnelTestEvent','./performance/performance-tester','reduce','info','accessSync','Firing\x20SDK\x20event\x20for\x20funnel\x20data:\x20','browser','constants','app','Failed\x20to\x20set\x20directory\x20access:\x20','replace','every','framework','KSaFn','finishedMetadata','errorMessage','eBXgC','tests','getAccessKey','APP_AUTOMATE','sdkRunId','browserVersion','getNodeAgent','format','bltAk','SdOzr','isNullOrEmpty','length','stack','lmOwV','577550xBDMpr','AUTOMATE','11539872dJCnwf','apply','body','error','dHNHd','buildIdentifier','pkChT','keys','WzJRj','debug','LYUbQ','AUTOMATE_PRODUCTS','mHuzZ','24HLmyQR','ENV_VAR','name','63033AYMGhZ','DqhDW','API\x20Event\x20','LxMwT','getTurboScaleBuildLink','push','sanitizeBrowserStackConfig','aGJjo',',\x20testhub\x20id:\x20','toString','version','SDKTestSuccessful','env','globalException','codeceptjs','setReadWriteExecuteAccess','96Jvawax','getStackTraceAsString','winstonLogger','parse','181255iGbXOB','BROWSERSTACK_TESTHUB_UUID','getGlobal','isTurboScaleSession','values','\x20:\x20','split','./testhub/utils','DsSSs','344xsVsBm','user_killed','Error\x20while\x20parsing\x20tests\x20errors,\x20Exception:\x20','X_OK','all','osVersion','undefined','ETdBR','assign','46697sKkTBI','aqhKF','wCtxo','28829HTbFWN','selenium-webdriver','NfLIc','ghGDm','PRODUCT_IF_NOT_BROWSERSTACK_INFRA','\x20response\x20-\x20','11387259vykzgB','363pqgpoZ','chmodSync','nodeRequest','getSessionsList','bPTIh','buildName','[REDACTED]','Error\x20in\x20getting\x20framework\x20version\x20to\x20:\x20','../bin/utils/constants','vfbjl','qxIco','W_OK','isModifiable','iGwfq','Directory\x20','Error\x20in\x20firing\x20request\x20to\x20','getTestFrameworkDetails','6BvtVJi','POST'];a137_0x2164=function(){return _0x524aec;};return a137_0x2164();}exports['fireFunnelTestEvent']=async(_0x5785b9,_0xd7935d={},_0x318e23,_0x1ce0c9)=>{const _0x735888=a137_0x2a57e9,_0x4bb9ed={'LYUbQ':function(_0x5efbce,_0x47b2fe){return _0x5efbce===_0x47b2fe;},'XdFIn':'object','lmOwV':function(_0x94bb7d,_0x4ef1b2){return _0x94bb7d>_0x4ef1b2;},'ZPWKn':function(_0x5355f7,_0xb553f){return _0x5355f7>_0xb553f;},'SdOzr':_0x735888(0xb8),'WzJRj':function(_0x2fc092){return _0x2fc092();},'aGJjo':function(_0x1884c5,_0x39465a){return _0x1884c5==_0x39465a;},'ETdBR':_0x735888(0x12e),'bltAk':function(_0x1c3e14,_0x4ad453){return _0x1c3e14===_0x4ad453;},'vfbjl':_0x735888(0xfa),'pkChT':function(_0x37eb56,_0x10d1ba){return _0x37eb56===_0x10d1ba;},'yqfRF':_0x735888(0xe5),'eBXgC':function(_0x85a598,_0x457019){return _0x85a598!==_0x457019;},'KLMin':_0x735888(0x11a),'ilTAK':function(_0x30e624,_0xc92cb8){return _0x30e624===_0xc92cb8;},'bPTIh':_0x735888(0xca),'mHuzZ':function(_0x3cf97f,_0x2d8282){return _0x3cf97f>_0x2d8282;},'ghGDm':function(_0x391636,_0x22d731){return _0x391636+_0x22d731;},'iGwfq':_0x735888(0xf6),'DsSSs':_0x735888(0x12c),'eWQQW':function(_0x2cdb32,_0x381d8e){return _0x2cdb32(_0x381d8e);},'DqhDW':'unknown','wCtxo':'nodejs','SDucR':_0x735888(0xe2),'TWbrX':_0x735888(0x101),'BgOCE':'application/json','NfLIc':_0x735888(0x10d),'dHNHd':_0x735888(0x119)};let _0x1252f6=[];if(helper[_0x735888(0x121)]()&&_0x4bb9ed['WzJRj'](isTestObservabilitySession))_0x1252f6=_0x318e23[_0x735888(0x13c)]?constants['APP_AUTOMATE_PRODUCTS']:constants[_0x735888(0xd2)];else{if(_0x4bb9ed[_0x735888(0xcf)](isTestObservabilitySession))_0x1252f6=constants[_0x735888(0x104)];else helper[_0x735888(0x121)]()&&(_0x1252f6=_0x318e23[_0x735888(0x13c)]?constants[_0x735888(0xba)]:constants[_0x735888(0xc6)]);}let _0x5489f7=_0x318e23[_0x735888(0xcc)];if(_0x4bb9ed[_0x735888(0xde)](_0x5489f7,null))_0x5489f7=_0x4bb9ed[_0x735888(0xfb)];else _0x4bb9ed[_0x735888(0xbf)](_0x5489f7,undefined)&&(_0x5489f7=_0x4bb9ed[_0x735888(0x110)]);unhandledErrors&&_0x4bb9ed[_0x735888(0xc4)](unhandledErrors[_0x735888(0xc2)],0x0)&&(_0xd7935d[_0x735888(0xe4)]=unhandledErrors);global['sdkRunId']&&(_0xd7935d[_0x735888(0xbb)]=global[_0x735888(0xbb)]);try{if(_0xd7935d[_0x735888(0xca)]){if(_0x4bb9ed[_0x735888(0xcd)](_0x1ce0c9,_0x4bb9ed['yqfRF'])&&_0x4bb9ed[_0x735888(0xc4)](_0xd7935d['error']['length'],0x0)){const _0x1cf695={};_0x1cf695['os']='',_0x1cf695['osVersion']='',_0x1cf695['browser']='',_0x1cf695[_0x735888(0xbc)]='';const _0x3a220c=_0x1cf695;let _0xacbf45={};const _0x1c7450=_0xd7935d[_0x735888(0xca)];_0xacbf45=_0x1c7450[_0x735888(0x136)]((_0x21dc34,_0x3bd406)=>{for(const _0x1c160c in _0x3bd406){_0x21dc34[_0x1c160c]=_0x3bd406[_0x1c160c];}return _0x21dc34;},{});const _0x292431={};_0x292431[_0x735888(0xb8)]=_0xacbf45,_0xd7935d[_0x735888(0xca)]=[Object[_0x735888(0xfc)]({},_0x3a220c,_0x292431)];}else{let _0x22b1b7=0x0;const _0x411723=_0x4bb9ed[_0x735888(0xb7)](_0x1ce0c9,_0x4bb9ed['KLMin'])?JSON[_0x735888(0xea)](_0xd7935d[_0x735888(0xca)]):_0xd7935d[_0x735888(0xca)],_0x2322d3=Object[_0x735888(0xef)](_0x411723);_0x2322d3[_0x735888(0x12b)](_0x42c487=>{const _0x281666=_0x735888;if(_0x4bb9ed[_0x281666(0xd1)](typeof _0x42c487,_0x4bb9ed[_0x281666(0x120)])){const _0x5db961=Object[_0x281666(0xef)](_0x42c487);!_0x5db961[_0x281666(0xb2)](_0x159e36=>_0x159e36===null||_0x159e36===undefined||_0x159e36==='')&&(_0x22b1b7+=0x1);}});if(_0x4bb9ed['ilTAK'](_0x22b1b7,0x0))delete _0xd7935d[_0x4bb9ed[_0x735888(0x10b)]];else{const _0x3dfa41=[];Object['keys'](_0x411723)['forEach'](_0x5490a2=>{const _0x5dbb72=_0x735888,[_0x45ded5,_0x5280e4,_0x22870d,_0x407e58]=_0x5490a2[_0x5dbb72(0xf1)](',\x20');let _0x5c0294={};if(!_0x407e58){const _0x4c2caf={};_0x4c2caf['deviceName']=_0x45ded5,_0x4c2caf[_0x5dbb72(0xf9)]=_0x5280e4,_0x4c2caf['browser']=_0x22870d,_0x5c0294=_0x4c2caf;}else{const _0x17db68={};_0x17db68['os']=_0x45ded5,_0x17db68[_0x5dbb72(0xf9)]=_0x5280e4,_0x17db68[_0x5dbb72(0x13a)]=_0x22870d,_0x17db68[_0x5dbb72(0xbc)]=_0x407e58,_0x5c0294=_0x17db68;}const _0x25e53c={},_0x282f08=_0x411723[_0x5490a2];Object[_0x5dbb72(0xce)](_0x282f08)[_0x5dbb72(0x12b)](_0x27ed77=>{const _0x15848a=_0x5dbb72;_0x4bb9ed[_0x15848a(0xc4)](_0x282f08[_0x27ed77][_0x15848a(0xc2)],0x0)&&(_0x25e53c[_0x27ed77]=_0x282f08[_0x27ed77]);}),_0x4bb9ed['ZPWKn'](Object[_0x5dbb72(0xce)](_0x25e53c)[_0x5dbb72(0xc2)],0x0)&&(_0x5c0294[_0x4bb9ed[_0x5dbb72(0xc0)]]=_0x25e53c,_0x3dfa41[_0x5dbb72(0xdc)](_0x5c0294));}),_0x4bb9ed[_0x735888(0xd3)](_0x3dfa41[_0x735888(0xc2)],0x0)?_0xd7935d[_0x735888(0xca)]=_0x3dfa41:delete _0xd7935d[_0x4bb9ed[_0x735888(0x10b)]];}}}}catch(_0x35b8a9){delete _0xd7935d[_0x4bb9ed[_0x735888(0x10b)]],logger[_0x735888(0xd0)](_0x4bb9ed[_0x735888(0x103)](_0x4bb9ed[_0x735888(0x114)],_0x35b8a9));}const _0x66cbc0=helper[_0x735888(0x117)](_0x318e23,_0x318e23[_0x735888(0xb3)]),_0x2da95a={'userName':helper[_0x735888(0x125)](_0x318e23),'accessKey':helper['getAccessKey'](_0x318e23),'event_type':_0x5785b9,'detectedFramework':_0x1ce0c9,'buildHashedId':globals[_0x735888(0xed)](_0x4bb9ed[_0x735888(0xf3)]),'optimalHubUrl':helper['getOptimalHubUrl'](),'event_properties':{'testhub_uuid':process[_0x735888(0xe3)][testHubConstants[_0x735888(0xd5)]['BROWSERSTACK_TESTHUB_UUID']]||'','sdkRunId':global[_0x735888(0xbb)],'product_map':_0x4bb9ed['eWQQW'](getProductMap,_0x318e23),'productMap':_0x4bb9ed['eWQQW'](getProductMap,_0x318e23),'language_framework':_0x318e23[_0x735888(0x12d)]||_0x4bb9ed['DqhDW'],'referrer':helper[_0x735888(0xbd)](_0x1ce0c9),'framework':_0x318e23[_0x735888(0xb3)],'frameworkVersion':helper[_0x735888(0x129)](_0x1ce0c9),'automationFramework':_0x66cbc0[_0x735888(0xd6)],'automationFrameworkVersion':_0x66cbc0[_0x735888(0xe1)],'language':_0x4bb9ed[_0x735888(0xff)],'languageVersion':process[_0x735888(0xe1)],'product':_0x1252f6,'buildName':_0x318e23[_0x735888(0x10c)]||_0x4bb9ed['vfbjl'],'buildIdentifier':_0x5489f7,'os':os['type']()||_0x4bb9ed[_0x735888(0xd8)],'hostname':os['hostname']()||_0x4bb9ed[_0x735888(0xd8)],..._0xd7935d}};try{_0x4bb9ed[_0x735888(0xd1)](_0x5785b9,_0x4bb9ed['SDucR'])&&(_0x2da95a[_0x735888(0x126)]['browserStackConfig']=helper[_0x735888(0xdd)](_0x318e23)),_0x4bb9ed['bltAk'](_0x1ce0c9,_0x4bb9ed['KLMin'])?_0x2da95a[_0x735888(0x126)][_0x735888(0x132)]=helper[_0x735888(0x124)][_0x735888(0xc8)](null,_0x4bb9ed['WzJRj'](getTransformPath),!![]):_0x2da95a[_0x735888(0x126)][_0x735888(0x11d)]=helper['getPackageVersion'](_0x4bb9ed['TWbrX']);}catch(_0x232a7c){logger['debug'](_0x735888(0x10e)+_0x232a7c);}const _0x377a10={};_0x377a10['content-type']=_0x4bb9ed[_0x735888(0x128)];const _0x2aa3da={'headers':_0x377a10,'body':_0x2da95a,'auth':{'user':helper[_0x735888(0x125)](_0x318e23),'pass':helper[_0x735888(0xb9)](_0x318e23)},'json':!![]};logger['debug'](_0x735888(0x139)+JSON['stringify'](_0x2aa3da[_0x735888(0xc9)])[_0x735888(0x13e)](new RegExp(helper[_0x735888(0x125)](_0x318e23),'g'),_0x4bb9ed[_0x735888(0x102)])[_0x735888(0x13e)](new RegExp(helper[_0x735888(0xb9)](_0x318e23),'g'),_0x4bb9ed[_0x735888(0x102)]));try{const _0xd26639=await helper[_0x735888(0x109)](_0x4bb9ed[_0x735888(0xcb)],FUNNEL_INSTRUMENTATION_API_URL,_0x2aa3da,_0x318e23);logger[_0x735888(0xd0)](_0x735888(0xd9)+_0x5785b9+_0x735888(0x105)+util[_0x735888(0xbe)]('%j',_0xd26639));}catch(_0x4004ca){logger[_0x735888(0xd0)](_0x735888(0x116)+FUNNEL_INSTRUMENTATION_API_URL+_0x735888(0xf0)+util[_0x735888(0xbe)](_0x4004ca));}},exports['finalExecution']=async _0x1bdd96=>{const _0x3464cf=a137_0x2a57e9,_0x3e06ee={'mDZmA':function(_0x2b64b0){return _0x2b64b0();},'Cwzba':_0x3464cf(0xb5),'LxMwT':_0x3464cf(0xf5),'XECjK':_0x3464cf(0xe2),'VUTmh':function(_0x3f12e5,_0x158996,_0x5d4212){return _0x3f12e5(_0x158996,_0x5d4212);},'JneLS':function(_0x393caa,_0x5f5376){return _0x393caa+_0x5f5376;},'wHdfG':'Something\x20went\x20wrong\x20in\x20Final\x20Execution\x20step\x20:\x20'};try{await _0x1bdd96['stopPercy'](),_0x3e06ee['mDZmA'](printNudgeLocalNotSetError);const _0xc96fa3={};_0xc96fa3['error']=_0x1bdd96['errorMessage']?_0x1bdd96[_0x3464cf(0xb6)]:'{}';const _0x4a23e5=_0xc96fa3,_0x34441c=Object[_0x3464cf(0xfc)]({},_0x4a23e5);!!_0x1bdd96['killSignal']&&(_0x34441c[_0x3e06ee[_0x3464cf(0x133)]]={'reason':_0x3e06ee[_0x3464cf(0xda)],'signal':_0x1bdd96['killSignal']});unhandledErrors=_0x1bdd96[_0x3464cf(0x11e)]['join']('\x0a');let _0xe708ea,_0x5ed1dd,_0xa62d60;helper[_0x3464cf(0xee)](_0x1bdd96[_0x3464cf(0x131)])?([_0xe708ea,_0x5ed1dd]=await helper[_0x3464cf(0xdb)](_0x1bdd96['config']),[_0xa62d60]=await Promise[_0x3464cf(0xf8)]([helper['getTurboScaleSessionsList'](_0xe708ea,_0x1bdd96[_0x3464cf(0x131)]),exports[_0x3464cf(0x134)](_0x3e06ee['XECjK'],_0x34441c,_0x1bdd96['config'],_0x1bdd96[_0x3464cf(0xb3)])])):([_0xe708ea,_0x5ed1dd]=await helper['getBuildLink'](_0x1bdd96[_0x3464cf(0x131)]),[_0xa62d60]=await Promise[_0x3464cf(0xf8)]([helper[_0x3464cf(0x10a)](_0xe708ea,_0x1bdd96[_0x3464cf(0x131)]),exports[_0x3464cf(0x134)](_0x3e06ee['XECjK'],_0x34441c,_0x1bdd96[_0x3464cf(0x131)],_0x1bdd96[_0x3464cf(0xb3)])])),_0xa62d60&&await _0x3e06ee[_0x3464cf(0x11b)](generateCIArtifacts,_0xa62d60,_0x5ed1dd),logger[_0x3464cf(0x137)]('SDK\x20run\x20ended\x20for\x20id:\x20'+_0x1bdd96[_0x3464cf(0xbb)]+_0x3464cf(0xdf)+process[_0x3464cf(0xe3)][_0x3464cf(0xec)]),await helper['sendLogs'](_0x1bdd96[_0x3464cf(0x131)]);}catch(_0x2c0a22){logger['debug'](_0x3e06ee['JneLS'](_0x3e06ee[_0x3464cf(0x12f)],_0x2c0a22));}helper['notifyUpdate']();},exports['getStackTraceAsString']=_0x5455ab=>{const _0xaccc3c=a137_0x2a57e9,_0x5dd4d3={'aLEln':function(_0x53f67f,_0x4e7dae){return _0x53f67f instanceof _0x4e7dae;},'qxIco':function(_0x1a1e8a,_0x230ea4){return _0x1a1e8a(_0x230ea4);}};try{if(_0x5dd4d3['aLEln'](_0x5455ab,Error))return _0x5455ab[_0xaccc3c(0xc3)]||_0x5455ab[_0xaccc3c(0xe0)]();return _0x5dd4d3[_0xaccc3c(0x111)](String,_0x5455ab);}catch(_0x325273){return _0x5455ab?_0x5455ab[_0xaccc3c(0xe0)]():'';}},exports[a137_0x2a57e9(0xc1)]=_0x891791=>{const _0x4b6358=a137_0x2a57e9,_0x11adde={};_0x11adde[_0x4b6358(0xfe)]=function(_0x5446d2,_0x2c2a8a){return _0x5446d2===_0x2c2a8a;};const _0x52e0de=_0x11adde;return!_0x891791||_0x52e0de['aqhKF'](_0x891791[_0x4b6358(0x11f)](),'');},exports[a137_0x2a57e9(0x113)]=_0x5b711d=>{const _0x58269e=a137_0x2a57e9,_0x53552f={};_0x53552f[_0x58269e(0xb4)]=function(_0x36a5bb,_0x3a019b){return _0x36a5bb|_0x3a019b;};const _0x36dec0=_0x53552f;try{return fs[_0x58269e(0x138)](_0x5b711d,_0x36dec0[_0x58269e(0xb4)](fs[_0x58269e(0x13b)][_0x58269e(0x112)],fs[_0x58269e(0x13b)][_0x58269e(0xf7)])),!![];}catch(_0x5d3c6a){return![];}},exports[a137_0x2a57e9(0xe6)]=_0x5d364d=>{const _0x43091d=a137_0x2a57e9;try{fs[_0x43091d(0x108)](_0x5d364d,0x1ff),logger[_0x43091d(0xd0)](_0x43091d(0x115)+_0x5d364d+'\x20has\x20now\x20read/write/execute\x20permissions.');}catch(_0x3cfc3f){logger[_0x43091d(0xca)](_0x43091d(0x13d)+exports[_0x43091d(0xe8)](_0x3cfc3f));}};