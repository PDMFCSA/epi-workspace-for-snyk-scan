const a127_0x2c45f3=a127_0x419a;function a127_0x2aa4(){const _0x330bb6=['chmodSync','SDmWy','PrMWA','13043987ETwRHp','pFhDY','getPackageVersion','12PWCBvH','DPwUH','isBrowserstackInfra','chLIQ','fireFunnelTestEvent','killSignal','../bin/utils/constants','./logger','toString','finishedMetadata','push','apply','name','application/json','SDKTestSuccessful','format','yaDjA','join','jJEyD','AUTOMATE_PRODUCTS','wleyx','getUserName','notifyUpdate','values','\x20:\x20','nodejs','isWritable','txpRL','errorMessage','Error\x20in\x20firing\x20request\x20to\x20','262188IHkcBH','stopPercy','DspeQ','unknown','browserVersion','playwrightVersion','assign',',\x20testhub\x20id:\x20','./performance/performance-tester','./testhub/utils','getOptimalHubUrl','CSlWK','app','Playwright','160278UDjkfB','getGlobal','nodeRequest','zvcGS','browser','XoGDC','274110EbKXDB','BROWSERSTACK_TESTHUB_UUID','browserStackConfig','debug','codeceptjs','error','undefined','aaJPy','sendLogs','lVsnh','getNodeAgent','stringify','SnvFX','length','sdkRunId','68ANIQKi','body','util','replace','reduce','AUTOMATE','constants','VYzUg','API\x20Event\x20','./test-observability/utils','user_killed','10806GTBGSJ','all','tests','WyMYn','keys','deviceName','APP_AUTOMATE_PRODUCTS','parse','osVersion','Failed\x20to\x20set\x20directory\x20access:\x20','UPEko','buildName','296OeagVZ','getTestFrameworkDetails','PRODUCT_IF_NOT_BROWSERSTACK_INFRA','12045590jzYmzk','TkKDL','event_properties','getStackTraceAsString','buildIdentifier','515XQLCJp','Firing\x20SDK\x20event\x20for\x20funnel\x20data:\x20','\x20response\x20-\x20','TDmOq','piYlE','getFrameworkVersion','IUbIp','getBuildLink','\x20is\x20now\x20read/write\x20accessible.','config','unhandledErrors','kihJk','OMWEU','W_OK','version','_buildHashedId','9ibjjYx','setReadWriteAccess','rFXAY','getAccessKey','env','getTurboScaleSessionsList','289793TvQoWy','hostname','./helper','forEach','./globals','kSSTK','trim','ngCkV','POST','framework','fPQIF','getSessionsList','uHPQx','mZEoJ','source','split','bUbId'];a127_0x2aa4=function(){return _0x330bb6;};return a127_0x2aa4();}(function(_0x28e28c,_0x30b1ac){const _0x20e342=a127_0x419a,_0x538874=_0x28e28c();while(!![]){try{const _0x5bbb64=-parseInt(_0x20e342(0x1b7))/0x1*(-parseInt(_0x20e342(0x179))/0x2)+-parseInt(_0x20e342(0x173))/0x3*(-parseInt(_0x20e342(0x188))/0x4)+-parseInt(_0x20e342(0x1a7))/0x5*(-parseInt(_0x20e342(0x193))/0x6)+parseInt(_0x20e342(0x1bd))/0x7*(-parseInt(_0x20e342(0x19f))/0x8)+-parseInt(_0x20e342(0x165))/0x9+parseInt(_0x20e342(0x1a2))/0xa+parseInt(_0x20e342(0x1d1))/0xb*(-parseInt(_0x20e342(0x1d4))/0xc);if(_0x5bbb64===_0x30b1ac)break;else _0x538874['push'](_0x538874['shift']());}catch(_0x541a17){_0x538874['push'](_0x538874['shift']());}}}(a127_0x2aa4,0xbfabf));const os=require('os'),util=require(a127_0x2c45f3(0x18a)),fs=require('fs'),{getProductMap}=require(a127_0x2c45f3(0x16e)),logger=require(a127_0x2c45f3(0x1db))['winstonLogger'],constants=require(a127_0x2c45f3(0x1da)),testHubConstants=require('../helpers/testhub/constants'),{getTransformPath}=require('../bin/playwright/reporter/pwUtils'),{FUNNEL_INSTRUMENTATION_API_URL}=require(a127_0x2c45f3(0x1da)),{generateCIArtifacts,printNudgeLocalNotSetError}=require(a127_0x2c45f3(0x1bf)),PerformanceTester=require(a127_0x2c45f3(0x16d)),globals=require(a127_0x2c45f3(0x1c1)),helper=require('./helper'),{isTestObservabilitySession}=require(a127_0x2c45f3(0x191));let unhandledErrors='';function a127_0x419a(_0x32e4f3,_0x85c3cf){const _0x2aa43d=a127_0x2aa4();return a127_0x419a=function(_0x419a6f,_0x36ffd9){_0x419a6f=_0x419a6f-0x153;let _0x180cc4=_0x2aa43d[_0x419a6f];return _0x180cc4;},a127_0x419a(_0x32e4f3,_0x85c3cf);}exports[a127_0x2c45f3(0x1d8)]=async(_0x594179,_0x1e05ae={},_0x11c6f2,_0x2de547)=>{const _0x325908=a127_0x2c45f3,_0x3b9836={'kihJk':function(_0x64c102,_0x55986){return _0x64c102===_0x55986;},'kSSTK':'object','jJEyD':function(_0x42389a,_0x46754e){return _0x42389a>_0x46754e;},'pFhDY':'tests','SDmWy':function(_0x57ba38){return _0x57ba38();},'DPwUH':function(_0x3a1fca,_0x58afca){return _0x3a1fca==_0x58afca;},'mQdxK':'null','chLIQ':_0x325908(0x17f),'uHPQx':_0x325908(0x17d),'mZEoJ':function(_0x54a9b1,_0x4af7e9){return _0x54a9b1!==_0x4af7e9;},'XoGDC':_0x325908(0x172),'bUbId':function(_0xaa8d6,_0x1f3e5f){return _0xaa8d6===_0x1f3e5f;},'yaDjA':'error','aaJPy':function(_0xea6075,_0x4962c0){return _0xea6075>_0x4962c0;},'zvcGS':function(_0x5619b7,_0x26f939){return _0x5619b7+_0x26f939;},'PrMWA':'Error\x20while\x20parsing\x20tests\x20errors,\x20Exception:\x20','VYzUg':_0x325908(0x1b6),'WyMYn':function(_0xc7faf0,_0x4a0e35){return _0xc7faf0(_0x4a0e35);},'txpRL':_0x325908(0x168),'GJkOp':_0x325908(0x160),'wleyx':_0x325908(0x155),'rFXAY':'selenium-webdriver','nIoXO':_0x325908(0x154),'IUbIp':'[REDACTED]','OMWEU':_0x325908(0x1c5)};let _0x2a7961=[];if(helper['isBrowserstackInfra']()&&_0x3b9836[_0x325908(0x1cf)](isTestObservabilitySession))_0x2a7961=_0x11c6f2[_0x325908(0x171)]?constants[_0x325908(0x199)]:constants[_0x325908(0x15a)];else{if(_0x3b9836[_0x325908(0x1cf)](isTestObservabilitySession))_0x2a7961=constants[_0x325908(0x1a1)];else helper[_0x325908(0x1d6)]()&&(_0x2a7961=_0x11c6f2['app']?constants['APP_AUTOMATE']:constants[_0x325908(0x18d)]);}let _0x1c29a4=_0x11c6f2[_0x325908(0x1a6)];if(_0x3b9836[_0x325908(0x1d5)](_0x1c29a4,null))_0x1c29a4=_0x3b9836['mQdxK'];else _0x3b9836[_0x325908(0x1b2)](_0x1c29a4,undefined)&&(_0x1c29a4=_0x3b9836['chLIQ']);unhandledErrors&&_0x3b9836[_0x325908(0x159)](unhandledErrors['length'],0x0)&&(_0x1e05ae['globalException']=unhandledErrors);global[_0x325908(0x187)]&&(_0x1e05ae[_0x325908(0x187)]=global['sdkRunId']);try{if(_0x1e05ae['error']){if(_0x3b9836[_0x325908(0x1b2)](_0x2de547,_0x3b9836[_0x325908(0x1c9)])&&_0x3b9836[_0x325908(0x159)](_0x1e05ae['error'][_0x325908(0x186)],0x0)){const _0x2ac60c={};_0x2ac60c['os']='',_0x2ac60c['osVersion']='',_0x2ac60c[_0x325908(0x177)]='',_0x2ac60c[_0x325908(0x169)]='';const _0x407704=_0x2ac60c;let _0x1980f2={};const _0xb240fa=_0x1e05ae['error'];_0x1980f2=_0xb240fa[_0x325908(0x18c)]((_0x4be8c7,_0x4862fb)=>{for(const _0x2ac17f in _0x4862fb){_0x4be8c7[_0x2ac17f]=_0x4862fb[_0x2ac17f];}return _0x4be8c7;},{});const _0x11a766={};_0x11a766[_0x325908(0x195)]=_0x1980f2,_0x1e05ae[_0x325908(0x17e)]=[Object[_0x325908(0x16b)]({},_0x407704,_0x11a766)];}else{let _0x1247bf=0x0;const _0x332f9c=_0x3b9836[_0x325908(0x1ca)](_0x2de547,_0x3b9836[_0x325908(0x178)])?JSON[_0x325908(0x19a)](_0x1e05ae[_0x325908(0x17e)]):_0x1e05ae[_0x325908(0x17e)],_0xfaf7fd=Object[_0x325908(0x15e)](_0x332f9c);_0xfaf7fd[_0x325908(0x1c0)](_0x4a4c31=>{const _0x214c3e=_0x325908;if(_0x3b9836['kihJk'](typeof _0x4a4c31,_0x3b9836[_0x214c3e(0x1c2)])){const _0x10f566=Object[_0x214c3e(0x15e)](_0x4a4c31);!_0x10f566['every'](_0xda5cca=>_0xda5cca===null||_0xda5cca===undefined||_0xda5cca==='')&&(_0x1247bf+=0x1);}});if(_0x3b9836['bUbId'](_0x1247bf,0x0))delete _0x1e05ae[_0x3b9836[_0x325908(0x157)]];else{const _0x18f26a=[];Object['keys'](_0x332f9c)[_0x325908(0x1c0)](_0x60e801=>{const _0x225348=_0x325908,[_0x6528b1,_0x26e531,_0x4da853,_0x410a67]=_0x60e801[_0x225348(0x1cc)](',\x20');let _0x3a83f3={};if(!_0x410a67){const _0x16170b={};_0x16170b[_0x225348(0x198)]=_0x6528b1,_0x16170b[_0x225348(0x19b)]=_0x26e531,_0x16170b['browser']=_0x4da853,_0x3a83f3=_0x16170b;}else{const _0x15b558={};_0x15b558['os']=_0x6528b1,_0x15b558[_0x225348(0x19b)]=_0x26e531,_0x15b558[_0x225348(0x177)]=_0x4da853,_0x15b558[_0x225348(0x169)]=_0x410a67,_0x3a83f3=_0x15b558;}const _0x418677={},_0x4b8f13=_0x332f9c[_0x60e801];Object[_0x225348(0x197)](_0x4b8f13)['forEach'](_0x163d7c=>{const _0x4be8e0=_0x225348;_0x3b9836['jJEyD'](_0x4b8f13[_0x163d7c][_0x4be8e0(0x186)],0x0)&&(_0x418677[_0x163d7c]=_0x4b8f13[_0x163d7c]);}),_0x3b9836[_0x225348(0x159)](Object['keys'](_0x418677)[_0x225348(0x186)],0x0)&&(_0x3a83f3[_0x3b9836[_0x225348(0x1d2)]]=_0x418677,_0x18f26a[_0x225348(0x1de)](_0x3a83f3));}),_0x3b9836[_0x325908(0x180)](_0x18f26a[_0x325908(0x186)],0x0)?_0x1e05ae[_0x325908(0x17e)]=_0x18f26a:delete _0x1e05ae[_0x3b9836[_0x325908(0x157)]];}}}}catch(_0x5811bb){delete _0x1e05ae[_0x3b9836['yaDjA']],logger[_0x325908(0x17c)](_0x3b9836[_0x325908(0x176)](_0x3b9836[_0x325908(0x1d0)],_0x5811bb));}const _0x34d904=helper[_0x325908(0x1a0)](_0x11c6f2,_0x11c6f2[_0x325908(0x1c6)]),_0x7aec36={'userName':helper[_0x325908(0x15c)](_0x11c6f2),'accessKey':helper[_0x325908(0x1ba)](_0x11c6f2),'event_type':_0x594179,'detectedFramework':_0x2de547,'buildHashedId':globals[_0x325908(0x174)](_0x3b9836[_0x325908(0x18f)]),'optimalHubUrl':helper[_0x325908(0x16f)](),'event_properties':{'testhub_uuid':process[_0x325908(0x1bb)][testHubConstants['ENV_VAR']['BROWSERSTACK_TESTHUB_UUID']]||'','sdkRunId':global[_0x325908(0x187)],'product_map':_0x3b9836[_0x325908(0x196)](getProductMap,_0x11c6f2),'productMap':_0x3b9836[_0x325908(0x196)](getProductMap,_0x11c6f2),'language_framework':_0x11c6f2[_0x325908(0x1cb)]||_0x3b9836[_0x325908(0x162)],'referrer':helper[_0x325908(0x183)](_0x2de547),'framework':_0x11c6f2[_0x325908(0x1c6)],'frameworkVersion':helper[_0x325908(0x1ac)](_0x2de547),'automationFramework':_0x34d904[_0x325908(0x153)],'automationFrameworkVersion':_0x34d904['version'],'language':_0x3b9836['GJkOp'],'languageVersion':process[_0x325908(0x1b5)],'product':_0x2a7961,'buildName':_0x11c6f2[_0x325908(0x19e)]||_0x3b9836[_0x325908(0x1d7)],'buildIdentifier':_0x1c29a4,'os':os['type']()||_0x3b9836[_0x325908(0x162)],'hostname':os[_0x325908(0x1be)]()||_0x3b9836[_0x325908(0x162)],..._0x1e05ae}};try{_0x3b9836[_0x325908(0x1b2)](_0x594179,_0x3b9836[_0x325908(0x15b)])&&(_0x7aec36[_0x325908(0x1a4)][_0x325908(0x17b)]=helper['sanitizeBrowserStackConfig'](_0x11c6f2)),_0x3b9836[_0x325908(0x1cd)](_0x2de547,_0x3b9836[_0x325908(0x178)])?_0x7aec36[_0x325908(0x1a4)][_0x325908(0x16a)]=helper['requirePWModule'][_0x325908(0x1df)](null,_0x3b9836[_0x325908(0x1cf)](getTransformPath),!![]):_0x7aec36[_0x325908(0x1a4)]['seleniumVersion']=helper[_0x325908(0x1d3)](_0x3b9836[_0x325908(0x1b9)]);}catch(_0x1520c7){logger[_0x325908(0x17c)]('Error\x20in\x20getting\x20framework\x20version\x20to\x20:\x20'+_0x1520c7);}const _0xd4abbb={};_0xd4abbb['content-type']=_0x3b9836['nIoXO'];const _0x3e7260={'headers':_0xd4abbb,'body':_0x7aec36,'auth':{'user':helper[_0x325908(0x15c)](_0x11c6f2),'pass':helper[_0x325908(0x1ba)](_0x11c6f2)},'json':!![]};logger[_0x325908(0x17c)](_0x325908(0x1a8)+JSON[_0x325908(0x184)](_0x3e7260[_0x325908(0x189)])[_0x325908(0x18b)](new RegExp(helper[_0x325908(0x15c)](_0x11c6f2),'g'),_0x3b9836[_0x325908(0x1ad)])[_0x325908(0x18b)](new RegExp(helper[_0x325908(0x1ba)](_0x11c6f2),'g'),_0x3b9836[_0x325908(0x1ad)]));try{const _0x4763eb=await helper[_0x325908(0x175)](_0x3b9836[_0x325908(0x1b3)],constants['FUNNEL_INSTRUMENTATION_API_URL'],_0x3e7260,_0x11c6f2);logger[_0x325908(0x17c)](_0x325908(0x190)+_0x594179+_0x325908(0x1a9)+util[_0x325908(0x156)]('%j',_0x4763eb));}catch(_0x4b20d9){logger[_0x325908(0x17c)](_0x325908(0x164)+FUNNEL_INSTRUMENTATION_API_URL+_0x325908(0x15f)+util[_0x325908(0x156)](_0x4b20d9));}},exports['finalExecution']=async _0x33cf1a=>{const _0x1bc8de=a127_0x2c45f3,_0x5afded={'TDmOq':function(_0x27ef95){return _0x27ef95();},'ngCkV':_0x1bc8de(0x1dd),'DspeQ':_0x1bc8de(0x192),'TkKDL':_0x1bc8de(0x155),'lVsnh':function(_0x4b9429,_0x15f673,_0x1365c9){return _0x4b9429(_0x15f673,_0x1365c9);},'CSlWK':function(_0x25f98c,_0x4063d1){return _0x25f98c+_0x4063d1;},'UPEko':'Something\x20went\x20wrong\x20in\x20Final\x20Execution\x20step\x20:\x20'};try{await _0x33cf1a[_0x1bc8de(0x166)](),_0x5afded[_0x1bc8de(0x1aa)](printNudgeLocalNotSetError);const _0x2fe699={};_0x2fe699[_0x1bc8de(0x17e)]=_0x33cf1a['errorMessage']?_0x33cf1a[_0x1bc8de(0x163)]:'{}';const _0x4e361d=_0x2fe699,_0xb9204d=Object['assign']({},_0x4e361d);!!_0x33cf1a[_0x1bc8de(0x1d9)]&&(_0xb9204d[_0x5afded[_0x1bc8de(0x1c4)]]={'reason':_0x5afded[_0x1bc8de(0x167)],'signal':_0x33cf1a[_0x1bc8de(0x1d9)]});unhandledErrors=_0x33cf1a[_0x1bc8de(0x1b1)][_0x1bc8de(0x158)]('\x0a');let _0x3e858f,_0x59faba,_0x57f2a5;helper['isTurboScaleSession'](_0x33cf1a[_0x1bc8de(0x1b0)])?([_0x3e858f,_0x59faba]=await helper['getTurboScaleBuildLink'](_0x33cf1a[_0x1bc8de(0x1b0)]),[_0x57f2a5]=await Promise[_0x1bc8de(0x194)]([helper[_0x1bc8de(0x1bc)](_0x3e858f,_0x33cf1a['config']),exports[_0x1bc8de(0x1d8)](_0x5afded['TkKDL'],_0xb9204d,_0x33cf1a[_0x1bc8de(0x1b0)],_0x33cf1a[_0x1bc8de(0x1c6)])])):([_0x3e858f,_0x59faba]=await helper[_0x1bc8de(0x1ae)](_0x33cf1a[_0x1bc8de(0x1b0)]),[_0x57f2a5]=await Promise[_0x1bc8de(0x194)]([helper[_0x1bc8de(0x1c8)](_0x3e858f,_0x33cf1a[_0x1bc8de(0x1b0)]),exports['fireFunnelTestEvent'](_0x5afded[_0x1bc8de(0x1a3)],_0xb9204d,_0x33cf1a[_0x1bc8de(0x1b0)],_0x33cf1a[_0x1bc8de(0x1c6)])])),_0x57f2a5&&await _0x5afded[_0x1bc8de(0x182)](generateCIArtifacts,_0x57f2a5,_0x59faba),logger['info']('SDK\x20run\x20ended\x20for\x20id:\x20'+_0x33cf1a['sdkRunId']+_0x1bc8de(0x16c)+process[_0x1bc8de(0x1bb)][_0x1bc8de(0x17a)]),await helper[_0x1bc8de(0x181)](_0x33cf1a[_0x1bc8de(0x1b0)]);}catch(_0x3643a6){logger[_0x1bc8de(0x17c)](_0x5afded[_0x1bc8de(0x170)](_0x5afded[_0x1bc8de(0x19d)],_0x3643a6));}helper[_0x1bc8de(0x15d)]();},exports[a127_0x2c45f3(0x1a5)]=_0x148feb=>{const _0x435fff=a127_0x2c45f3,_0x59e87d={'SnvFX':function(_0x120d15,_0x50f524){return _0x120d15 instanceof _0x50f524;},'fPQIF':function(_0x41d09e,_0x2105b7){return _0x41d09e(_0x2105b7);}};try{if(_0x59e87d[_0x435fff(0x185)](_0x148feb,Error))return _0x148feb['stack']||_0x148feb['toString']();return _0x59e87d[_0x435fff(0x1c7)](String,_0x148feb);}catch(_0x3ab51d){return _0x148feb?_0x148feb[_0x435fff(0x1dc)]():'';}},exports['isNullOrEmpty']=_0x4341e3=>{const _0x4e79fe=a127_0x2c45f3,_0x2da4ce={};_0x2da4ce[_0x4e79fe(0x1ab)]=function(_0x4e7655,_0x41efb5){return _0x4e7655===_0x41efb5;};const _0x3676bf=_0x2da4ce;return!_0x4341e3||_0x3676bf[_0x4e79fe(0x1ab)](_0x4341e3[_0x4e79fe(0x1c3)](),'');},exports[a127_0x2c45f3(0x161)]=_0x108723=>{const _0x57ec2c=a127_0x2c45f3;try{return fs['accessSync'](_0x108723,fs[_0x57ec2c(0x18e)][_0x57ec2c(0x1b4)]),!![];}catch(_0x381605){return![];}},exports[a127_0x2c45f3(0x1b8)]=_0x93df39=>{const _0x4b9457=a127_0x2c45f3;try{fs[_0x4b9457(0x1ce)](_0x93df39,0x1b6),logger[_0x4b9457(0x17c)]('Directory\x20'+_0x93df39+_0x4b9457(0x1af));}catch(_0x1b86ea){logger['error'](_0x4b9457(0x19c)+exports[_0x4b9457(0x1a5)](_0x1b86ea));}};