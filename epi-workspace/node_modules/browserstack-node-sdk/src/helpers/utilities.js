const a129_0x306795=a129_0x5576;(function(_0x11d220,_0x258c31){const _0x3ac279=a129_0x5576,_0x3f2808=_0x11d220();while(!![]){try{const _0x1e8676=-parseInt(_0x3ac279(0x18a))/0x1+-parseInt(_0x3ac279(0x160))/0x2+parseInt(_0x3ac279(0x16d))/0x3*(parseInt(_0x3ac279(0x1a2))/0x4)+parseInt(_0x3ac279(0x152))/0x5*(parseInt(_0x3ac279(0x15f))/0x6)+-parseInt(_0x3ac279(0x1ab))/0x7*(parseInt(_0x3ac279(0x1c0))/0x8)+parseInt(_0x3ac279(0x1c1))/0x9+-parseInt(_0x3ac279(0x157))/0xa*(-parseInt(_0x3ac279(0x154))/0xb);if(_0x1e8676===_0x258c31)break;else _0x3f2808['push'](_0x3f2808['shift']());}catch(_0x5b32b0){_0x3f2808['push'](_0x3f2808['shift']());}}}(a129_0x2488,0x1a533));function a129_0x5576(_0x1335f2,_0xfc1f3a){const _0x248850=a129_0x2488();return a129_0x5576=function(_0x55768e,_0x212005){_0x55768e=_0x55768e-0x149;let _0x4ed24a=_0x248850[_0x55768e];return _0x4ed24a;},a129_0x5576(_0x1335f2,_0xfc1f3a);}function a129_0x2488(){const _0x1f16f8=['config','hostname','getSessionsList','qfegL','6dkMvxE','235866CoGQsO','values','bkJKS','getFrameworkVersion','IDvah','xHJGj','phOEn','aWtZt','getOptimalHubUrl','FQdAH','name','unhandledErrors','../bin/utils/constants','104640SnysIN','\x20:\x20','pZWMf','fireFunnelTestEvent','stack','undefined','_buildHashedId','reduce','VLxcS','buildIdentifier','YQSyF','getAccessKey','iBOkK','./testhub/utils','version','AUTOMATE_PRODUCTS','object','Error\x20in\x20firing\x20request\x20to\x20','sdsuP','SDKTestSuccessful','forEach','W_OK','Firing\x20SDK\x20event\x20for\x20funnel\x20data:\x20','finishedMetadata','xYhyV','getTurboScaleSessionsList','browser','seleniumVersion','application/json','23808IImZZo','browserVersion','getPackageVersion','dxYdR','isBrowserstackInfra','LeTqj','push','ENV_VAR','event_properties','isNullOrEmpty','AUTOMATE','replace','nodeRequest','ADEjG','isTurboScaleSession','FIjhd','content-type','constants','sendLogs','errorMessage','osVersion','ucmMW','assign','isWritable','4wbgpyx','stopPercy','APP_AUTOMATE','finalExecution','hgGtj','getBuildLink','info','type','getStackTraceAsString','14rhHpxf','sdkRunId','app','deviceName','toString','Failed\x20to\x20set\x20directory\x20access:\x20','lMaFp','\x20response\x20-\x20','env','./helper','uRSGb','length','all','XCZUi','format','vRdon','getTurboScaleBuildLink','body','trim','setReadWriteAccess','\x20is\x20now\x20read/write\x20accessible.','436680pQcYSq','420471RqDkac','cattx','getGlobal','debug','jyrvk','aKHHO','framework','getTestFrameworkDetails','DrtZN','chmodSync','RLgtv','error','tests','pbNPh','parse','Something\x20went\x20wrong\x20in\x20Final\x20Execution\x20step\x20:\x20','accessSync','kQfMf','XVxIz','getUserName','keys','stringify','join','znwTS','killSignal','GGJYN','apply','BROWSERSTACK_TESTHUB_UUID','Directory\x20','globalException','794155nSeaqO',',\x20testhub\x20id:\x20','11urRhlg','./globals','pLHsG','1183080hMePGt','EpsPQ','POST','keauC'];a129_0x2488=function(){return _0x1f16f8;};return a129_0x2488();}const os=require('os'),util=require('util'),fs=require('fs'),{getProductMap}=require(a129_0x306795(0x17a)),logger=require('./logger')['winstonLogger'],constants=require(a129_0x306795(0x16c)),testHubConstants=require('../helpers/testhub/constants'),{getTransformPath}=require('../bin/playwright/reporter/pwUtils'),{FUNNEL_INSTRUMENTATION_API_URL}=require(a129_0x306795(0x16c)),{generateCIArtifacts,printNudgeLocalNotSetError}=require(a129_0x306795(0x1b4)),PerformanceTester=require('./performance/performance-tester'),globals=require(a129_0x306795(0x155)),helper=require(a129_0x306795(0x1b4)),{isTestObservabilitySession}=require('./test-observability/utils');let unhandledErrors='';exports['fireFunnelTestEvent']=async(_0x476e38,_0x131a13={},_0x3e32b4,_0x3b7041)=>{const _0x3b9f02=a129_0x306795,_0x253069={'cattx':function(_0x5975d1,_0x2cf9cf){return _0x5975d1===_0x2cf9cf;},'FQdAH':_0x3b9f02(0x17d),'pZWMf':function(_0x457cff,_0x23168d){return _0x457cff>_0x23168d;},'DrtZN':_0x3b9f02(0x1cd),'qfegL':function(_0x37e80b){return _0x37e80b();},'keauC':function(_0x216a16,_0x1ddcf8){return _0x216a16==_0x1ddcf8;},'ucmMW':'null','uRSGb':function(_0x3fc1c6,_0x2db8d0){return _0x3fc1c6===_0x2db8d0;},'EpsPQ':_0x3b9f02(0x172),'GGJYN':'codeceptjs','aKHHO':function(_0x29add9,_0xeccb0b){return _0x29add9>_0xeccb0b;},'znwTS':function(_0x254d9b,_0x109f89){return _0x254d9b!==_0x109f89;},'lMaFp':'Playwright','pbNPh':_0x3b9f02(0x1cc),'hgGtj':function(_0x1181e0,_0x27ffcf){return _0x1181e0>_0x27ffcf;},'DXGcr':function(_0x864e91,_0x2d362a){return _0x864e91+_0x2d362a;},'kQfMf':'Error\x20while\x20parsing\x20tests\x20errors,\x20Exception:\x20','LeTqj':_0x3b9f02(0x173),'dxYdR':function(_0x433a48,_0x370ab3){return _0x433a48(_0x370ab3);},'aWtZt':'unknown','ADEjG':'nodejs','xYhyV':function(_0x4507dc,_0x3f0336){return _0x4507dc===_0x3f0336;},'XCZUi':_0x3b9f02(0x180),'YQSyF':function(_0x2325d3,_0x2c4a7f){return _0x2325d3===_0x2c4a7f;},'VLxcS':'selenium-webdriver','XVxIz':_0x3b9f02(0x189),'bkJKS':'[REDACTED]','FIjhd':_0x3b9f02(0x159)};let _0x22997e=[];if(helper[_0x3b9f02(0x18e)]()&&_0x253069['qfegL'](isTestObservabilitySession))_0x22997e=_0x3e32b4[_0x3b9f02(0x1ad)]?constants['APP_AUTOMATE_PRODUCTS']:constants[_0x3b9f02(0x17c)];else{if(_0x253069[_0x3b9f02(0x15e)](isTestObservabilitySession))_0x22997e=constants['PRODUCT_IF_NOT_BROWSERSTACK_INFRA'];else helper[_0x3b9f02(0x18e)]()&&(_0x22997e=_0x3e32b4[_0x3b9f02(0x1ad)]?constants[_0x3b9f02(0x1a4)]:constants[_0x3b9f02(0x194)]);}let _0x5055a9=_0x3e32b4[_0x3b9f02(0x176)];if(_0x253069[_0x3b9f02(0x15a)](_0x5055a9,null))_0x5055a9=_0x253069[_0x3b9f02(0x19f)];else _0x253069[_0x3b9f02(0x1b5)](_0x5055a9,undefined)&&(_0x5055a9=_0x253069[_0x3b9f02(0x158)]);unhandledErrors&&_0x253069['pZWMf'](unhandledErrors[_0x3b9f02(0x1b6)],0x0)&&(_0x131a13[_0x3b9f02(0x151)]=unhandledErrors);global[_0x3b9f02(0x1ac)]&&(_0x131a13['sdkRunId']=global[_0x3b9f02(0x1ac)]);try{if(_0x131a13[_0x3b9f02(0x1cc)]){if(_0x253069[_0x3b9f02(0x1c2)](_0x3b7041,_0x253069[_0x3b9f02(0x14d)])&&_0x253069[_0x3b9f02(0x1c6)](_0x131a13[_0x3b9f02(0x1cc)][_0x3b9f02(0x1b6)],0x0)){const _0x5e3e10={};_0x5e3e10['os']='',_0x5e3e10[_0x3b9f02(0x19e)]='',_0x5e3e10['browser']='',_0x5e3e10[_0x3b9f02(0x18b)]='';const _0x3a3fea=_0x5e3e10;let _0x303b19={};const _0x1ff0a5=_0x131a13[_0x3b9f02(0x1cc)];_0x303b19=_0x1ff0a5[_0x3b9f02(0x174)]((_0x36053a,_0xa488f3)=>{for(const _0x439d99 in _0xa488f3){_0x36053a[_0x439d99]=_0xa488f3[_0x439d99];}return _0x36053a;},{});const _0x30cfde={};_0x30cfde[_0x3b9f02(0x1cd)]=_0x303b19,_0x131a13[_0x3b9f02(0x1cc)]=[Object['assign']({},_0x3a3fea,_0x30cfde)];}else{let _0x39d287=0x0;const _0x1885d7=_0x253069[_0x3b9f02(0x14b)](_0x3b7041,_0x253069['lMaFp'])?JSON[_0x3b9f02(0x1cf)](_0x131a13[_0x3b9f02(0x1cc)]):_0x131a13['error'],_0x55b743=Object[_0x3b9f02(0x161)](_0x1885d7);_0x55b743[_0x3b9f02(0x181)](_0x33da12=>{const _0x202f6e=_0x3b9f02;if(_0x253069[_0x202f6e(0x1c2)](typeof _0x33da12,_0x253069[_0x202f6e(0x169)])){const _0x4784f6=Object[_0x202f6e(0x161)](_0x33da12);!_0x4784f6['every'](_0x348527=>_0x348527===null||_0x348527===undefined||_0x348527==='')&&(_0x39d287+=0x1);}});if(_0x253069['cattx'](_0x39d287,0x0))delete _0x131a13[_0x253069[_0x3b9f02(0x1ce)]];else{const _0x8280f5=[];Object[_0x3b9f02(0x1d5)](_0x1885d7)[_0x3b9f02(0x181)](_0x4f2067=>{const _0x3154c4=_0x3b9f02,[_0x5a821e,_0x359867,_0x199a25,_0x548023]=_0x4f2067['split'](',\x20');let _0xe5a7c9={};if(!_0x548023){const _0x1fe6b9={};_0x1fe6b9[_0x3154c4(0x1ae)]=_0x5a821e,_0x1fe6b9[_0x3154c4(0x19e)]=_0x359867,_0x1fe6b9[_0x3154c4(0x187)]=_0x199a25,_0xe5a7c9=_0x1fe6b9;}else{const _0x267cc4={};_0x267cc4['os']=_0x5a821e,_0x267cc4[_0x3154c4(0x19e)]=_0x359867,_0x267cc4['browser']=_0x199a25,_0x267cc4[_0x3154c4(0x18b)]=_0x548023,_0xe5a7c9=_0x267cc4;}const _0x38009c={},_0x19b334=_0x1885d7[_0x4f2067];Object[_0x3154c4(0x1d5)](_0x19b334)[_0x3154c4(0x181)](_0x59cb94=>{const _0x1e9485=_0x3154c4;_0x253069[_0x1e9485(0x16f)](_0x19b334[_0x59cb94]['length'],0x0)&&(_0x38009c[_0x59cb94]=_0x19b334[_0x59cb94]);}),_0x253069[_0x3154c4(0x16f)](Object[_0x3154c4(0x1d5)](_0x38009c)[_0x3154c4(0x1b6)],0x0)&&(_0xe5a7c9[_0x253069[_0x3154c4(0x1c9)]]=_0x38009c,_0x8280f5[_0x3154c4(0x190)](_0xe5a7c9));}),_0x253069[_0x3b9f02(0x1a6)](_0x8280f5[_0x3b9f02(0x1b6)],0x0)?_0x131a13['error']=_0x8280f5:delete _0x131a13[_0x253069[_0x3b9f02(0x1ce)]];}}}}catch(_0x3633fe){delete _0x131a13[_0x253069[_0x3b9f02(0x1ce)]],logger[_0x3b9f02(0x1c4)](_0x253069['DXGcr'](_0x253069[_0x3b9f02(0x1d2)],_0x3633fe));}const _0x385fc7=helper[_0x3b9f02(0x1c8)](_0x3e32b4,_0x3e32b4[_0x3b9f02(0x1c7)]),_0x295d45={'userName':helper['getUserName'](_0x3e32b4),'accessKey':helper[_0x3b9f02(0x178)](_0x3e32b4),'event_type':_0x476e38,'detectedFramework':_0x3b7041,'buildHashedId':globals[_0x3b9f02(0x1c3)](_0x253069[_0x3b9f02(0x18f)]),'optimalHubUrl':helper[_0x3b9f02(0x168)](),'event_properties':{'testhub_uuid':process[_0x3b9f02(0x1b3)][testHubConstants[_0x3b9f02(0x191)]['BROWSERSTACK_TESTHUB_UUID']]||'','sdkRunId':global[_0x3b9f02(0x1ac)],'product_map':_0x253069[_0x3b9f02(0x18d)](getProductMap,_0x3e32b4),'productMap':_0x253069[_0x3b9f02(0x18d)](getProductMap,_0x3e32b4),'language_framework':_0x3e32b4['source']||_0x253069['aWtZt'],'referrer':helper['getNodeAgent'](_0x3b7041),'framework':_0x3e32b4['framework'],'frameworkVersion':helper[_0x3b9f02(0x163)](_0x3b7041),'automationFramework':_0x385fc7[_0x3b9f02(0x16a)],'automationFrameworkVersion':_0x385fc7['version'],'language':_0x253069[_0x3b9f02(0x197)],'languageVersion':process[_0x3b9f02(0x17b)],'product':_0x22997e,'buildName':_0x3e32b4['buildName']||_0x253069[_0x3b9f02(0x158)],'buildIdentifier':_0x5055a9,'os':os[_0x3b9f02(0x1a9)]()||_0x253069[_0x3b9f02(0x167)],'hostname':os[_0x3b9f02(0x15c)]()||_0x253069[_0x3b9f02(0x167)],..._0x131a13}};try{_0x253069[_0x3b9f02(0x185)](_0x476e38,_0x253069[_0x3b9f02(0x1b8)])&&(_0x295d45[_0x3b9f02(0x192)]['browserStackConfig']=helper['sanitizeBrowserStackConfig'](_0x3e32b4)),_0x253069[_0x3b9f02(0x177)](_0x3b7041,_0x253069[_0x3b9f02(0x1b1)])?_0x295d45[_0x3b9f02(0x192)]['playwrightVersion']=helper['requirePWModule'][_0x3b9f02(0x14e)](null,_0x253069[_0x3b9f02(0x15e)](getTransformPath),!![]):_0x295d45[_0x3b9f02(0x192)][_0x3b9f02(0x188)]=helper[_0x3b9f02(0x18c)](_0x253069[_0x3b9f02(0x175)]);}catch(_0x4920a4){logger[_0x3b9f02(0x1c4)]('Error\x20in\x20getting\x20framework\x20version\x20to\x20:\x20'+_0x4920a4);}const _0x28330e={};_0x28330e[_0x3b9f02(0x19a)]=_0x253069[_0x3b9f02(0x1d3)];const _0x27fdbb={'headers':_0x28330e,'body':_0x295d45,'auth':{'user':helper[_0x3b9f02(0x1d4)](_0x3e32b4),'pass':helper['getAccessKey'](_0x3e32b4)},'json':!![]};logger[_0x3b9f02(0x1c4)](_0x3b9f02(0x183)+JSON[_0x3b9f02(0x149)](_0x27fdbb[_0x3b9f02(0x1bc)])[_0x3b9f02(0x195)](new RegExp(helper[_0x3b9f02(0x1d4)](_0x3e32b4),'g'),_0x253069[_0x3b9f02(0x162)])[_0x3b9f02(0x195)](new RegExp(helper[_0x3b9f02(0x178)](_0x3e32b4),'g'),_0x253069[_0x3b9f02(0x162)]));try{const _0x20ff14=await helper[_0x3b9f02(0x196)](_0x253069[_0x3b9f02(0x199)],constants['FUNNEL_INSTRUMENTATION_API_URL'],_0x27fdbb,_0x3e32b4);logger[_0x3b9f02(0x1c4)]('API\x20Event\x20'+_0x476e38+_0x3b9f02(0x1b2)+util[_0x3b9f02(0x1b9)]('%j',_0x20ff14));}catch(_0xee2c96){logger[_0x3b9f02(0x1c4)](_0x3b9f02(0x17e)+FUNNEL_INSTRUMENTATION_API_URL+_0x3b9f02(0x16e)+util[_0x3b9f02(0x1b9)](_0xee2c96));}},exports[a129_0x306795(0x1a5)]=async _0x5e91e3=>{const _0x3567f4=a129_0x306795,_0x4ecb30={'sdsuP':function(_0x40a2a5){return _0x40a2a5();},'phOEn':_0x3567f4(0x184),'vRdon':'user_killed','jyrvk':'SDKTestSuccessful','iBOkK':function(_0x2fb4b4,_0x405d53,_0x21a130){return _0x2fb4b4(_0x405d53,_0x21a130);},'IDvah':function(_0x31d1ce,_0x4b22d9){return _0x31d1ce+_0x4b22d9;},'RLgtv':_0x3567f4(0x1d0)};try{await _0x5e91e3[_0x3567f4(0x1a3)](),_0x4ecb30[_0x3567f4(0x17f)](printNudgeLocalNotSetError);const _0x27f825={};_0x27f825[_0x3567f4(0x1cc)]=_0x5e91e3[_0x3567f4(0x19d)]?_0x5e91e3[_0x3567f4(0x19d)]:'{}';const _0x325ad5=_0x27f825,_0x512eeb=Object[_0x3567f4(0x1a0)]({},_0x325ad5);!!_0x5e91e3['killSignal']&&(_0x512eeb[_0x4ecb30[_0x3567f4(0x166)]]={'reason':_0x4ecb30[_0x3567f4(0x1ba)],'signal':_0x5e91e3[_0x3567f4(0x14c)]});unhandledErrors=_0x5e91e3[_0x3567f4(0x16b)][_0x3567f4(0x14a)]('\x0a');let _0x495555,_0x3afd4a,_0x3a700f;helper[_0x3567f4(0x198)](_0x5e91e3[_0x3567f4(0x15b)])?([_0x495555,_0x3afd4a]=await helper[_0x3567f4(0x1bb)](_0x5e91e3[_0x3567f4(0x15b)]),[_0x3a700f]=await Promise[_0x3567f4(0x1b7)]([helper[_0x3567f4(0x186)](_0x495555,_0x5e91e3[_0x3567f4(0x15b)]),exports[_0x3567f4(0x170)](_0x4ecb30[_0x3567f4(0x1c5)],_0x512eeb,_0x5e91e3[_0x3567f4(0x15b)],_0x5e91e3['framework'])])):([_0x495555,_0x3afd4a]=await helper[_0x3567f4(0x1a7)](_0x5e91e3['config']),[_0x3a700f]=await Promise[_0x3567f4(0x1b7)]([helper[_0x3567f4(0x15d)](_0x495555,_0x5e91e3[_0x3567f4(0x15b)]),exports['fireFunnelTestEvent'](_0x4ecb30[_0x3567f4(0x1c5)],_0x512eeb,_0x5e91e3['config'],_0x5e91e3[_0x3567f4(0x1c7)])])),_0x3a700f&&await _0x4ecb30[_0x3567f4(0x179)](generateCIArtifacts,_0x3a700f,_0x3afd4a),logger[_0x3567f4(0x1a8)]('SDK\x20run\x20ended\x20for\x20id:\x20'+_0x5e91e3[_0x3567f4(0x1ac)]+_0x3567f4(0x153)+process['env'][_0x3567f4(0x14f)]),await helper[_0x3567f4(0x19c)](_0x5e91e3[_0x3567f4(0x15b)]);}catch(_0xbb82fc){logger[_0x3567f4(0x1c4)](_0x4ecb30[_0x3567f4(0x164)](_0x4ecb30[_0x3567f4(0x1cb)],_0xbb82fc));}helper['notifyUpdate']();},exports[a129_0x306795(0x1aa)]=_0x193e7e=>{const _0x4780f2=a129_0x306795,_0x35d8b3={'uhFzd':function(_0xea0d1d,_0x538ce2){return _0xea0d1d instanceof _0x538ce2;},'pLHsG':function(_0x1783e9,_0x39b8f0){return _0x1783e9(_0x39b8f0);}};try{if(_0x35d8b3['uhFzd'](_0x193e7e,Error))return _0x193e7e[_0x4780f2(0x171)]||_0x193e7e[_0x4780f2(0x1af)]();return _0x35d8b3[_0x4780f2(0x156)](String,_0x193e7e);}catch(_0x5d1e8c){return _0x193e7e?_0x193e7e[_0x4780f2(0x1af)]():'';}},exports[a129_0x306795(0x193)]=_0x3850a7=>{const _0xa89fcd=a129_0x306795,_0x484560={};_0x484560['xHJGj']=function(_0x171163,_0x405a61){return _0x171163===_0x405a61;};const _0x44b03f=_0x484560;return!_0x3850a7||_0x44b03f[_0xa89fcd(0x165)](_0x3850a7[_0xa89fcd(0x1bd)](),'');},exports[a129_0x306795(0x1a1)]=_0x14b077=>{const _0x15f23a=a129_0x306795;try{return fs[_0x15f23a(0x1d1)](_0x14b077,fs[_0x15f23a(0x19b)][_0x15f23a(0x182)]),!![];}catch(_0x18b8a1){return![];}},exports[a129_0x306795(0x1be)]=_0x2321b0=>{const _0x3415af=a129_0x306795;try{fs[_0x3415af(0x1ca)](_0x2321b0,0x1b6),logger[_0x3415af(0x1c4)](_0x3415af(0x150)+_0x2321b0+_0x3415af(0x1bf));}catch(_0x47e2fa){logger[_0x3415af(0x1cc)](_0x3415af(0x1b0)+exports['getStackTraceAsString'](_0x47e2fa));}};