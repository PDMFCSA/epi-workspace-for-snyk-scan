const a73_0x2c1c9b=a73_0x17a3;(function(_0x53a1f9,_0x972c21){const _0x409667=a73_0x17a3,_0x1f62c0=_0x53a1f9();while(!![]){try{const _0x11127d=parseInt(_0x409667(0x22f))/0x1*(parseInt(_0x409667(0x1f1))/0x2)+-parseInt(_0x409667(0x213))/0x3+parseInt(_0x409667(0x22b))/0x4+parseInt(_0x409667(0x1f0))/0x5+parseInt(_0x409667(0x1ca))/0x6*(-parseInt(_0x409667(0x229))/0x7)+-parseInt(_0x409667(0x1dd))/0x8*(parseInt(_0x409667(0x22a))/0x9)+-parseInt(_0x409667(0x1f7))/0xa*(-parseInt(_0x409667(0x1cf))/0xb);if(_0x11127d===_0x972c21)break;else _0x1f62c0['push'](_0x1f62c0['shift']());}catch(_0x1c7564){_0x1f62c0['push'](_0x1f62c0['shift']());}}}(a73_0x7246,0x4fd86));const {https}=require('follow-redirects'),url=require(a73_0x2c1c9b(0x1da)),yauzl=require(a73_0x2c1c9b(0x1eb)),fs=require('fs'),path=require(a73_0x2c1c9b(0x224)),os=require('os'),{spawn}=require(a73_0x2c1c9b(0x1ed)),HttpsProxyAgent=require(a73_0x2c1c9b(0x1c7)),logger=require('../logger')[a73_0x2c1c9b(0x1d5)];function a73_0x7246(){const _0x59590b=['X_OK','Error\x20trying\x20to\x20download\x20percy\x20binary','cwd','10IivLlr','stdout','statSync','LBjVy','sQuii','RWfDy','Got\x20Error\x20in\x20percy\x20binary\x20download\x20response','match','RfciF','end','hDhtG','Got\x20Error\x20in\x20percy\x20binary\x20downloading\x20request','win32','host','pOyMq','fileName','AxqIz','/percy-osx.zip','tmpdir','ACyBO','eijBx','oXuDC','LOGNAME','percy.exe','useCaCertificate','darwin','WAPfU','percy','586923dILAkQ','vCAHP','OePjF','KpFil','0755','oApQW','readEntry','pipe','R_OK','HOMEPATH','cXfSk','jRgnN','https://github.com/percy/cli/releases/latest/download','xWSfx','JLKaO','YgrAH','/home/','path','linux','HiESp','USER','platform','3830743hLjOHo','90GJgkKv','1480956fgVZoU','join','LNAME','ykYQJ','5BbWENF','error','QaWPr','eitEe','QvLNj','Percy\x20download\x20failed\x20to\x20read\x20cert\x20file','DxDfF','gNtru','/Users/','port','proxyPort','download','/root','HOME','.browserstack','close','adeIm','EVGHI','egoTQ','accessSync','snYrZ','lGqzi','test','acfgB','env','undefined','cFFSc','W_OK','jxYci','vDjzD','createWriteStream','rEoYV','https-proxy-agent','mkdirSync','WARyj','6LJfSgW','--version','YqvAV','HOMEDRIVE','ptYKJ','968660ErmJDY','hpTic','openReadStream','VSJpu','/percy-linux.zip','open','winstonLogger','homedir','USERNAME','function','Nvvoa','url','LTxCm','wQvsf','477320ijkVGH','ePQyY','once','length','get','mMeRO','egGSu','.zip','exports','NQMxD','validateBinary','lazyEntries','foOsM','VFGcD','yauzl','pUHUD','child_process','USERPROFILE','proxyHost','2899510aZTrcm','251354xUgvgA','tslZh','fsklO'];a73_0x7246=function(){return _0x59590b;};return a73_0x7246();}function a73_0x17a3(_0xf2f9f5,_0x285672){const _0x7246b6=a73_0x7246();return a73_0x17a3=function(_0x17a3f2,_0x6709a){_0x17a3f2=_0x17a3f2-0x1c7;let _0x46b704=_0x7246b6[_0x17a3f2];return _0x46b704;},a73_0x17a3(_0xf2f9f5,_0x285672);}class PercyBinary{#hostOS=process[a73_0x2c1c9b(0x228)];#httpPath=null;#binaryName=a73_0x2c1c9b(0x212);#orderedPaths=[path[a73_0x2c1c9b(0x22c)](this.#homedir(),a73_0x2c1c9b(0x23d)),process[a73_0x2c1c9b(0x1f6)](),os[a73_0x2c1c9b(0x209)]()];constructor(){const _0x90bcc4=a73_0x2c1c9b,_0x5cfb87={};_0x5cfb87[_0x90bcc4(0x1fc)]=_0x90bcc4(0x21f),_0x5cfb87[_0x90bcc4(0x220)]=function(_0x2a8c3,_0x222600){return _0x2a8c3+_0x222600;},_0x5cfb87[_0x90bcc4(0x1ec)]=_0x90bcc4(0x208),_0x5cfb87['cFFSc']='/percy-win.zip',_0x5cfb87['EVGHI']=_0x90bcc4(0x20e),_0x5cfb87[_0x90bcc4(0x20c)]=_0x90bcc4(0x1d3);const _0x431949=_0x5cfb87,_0x4fbf29=_0x431949[_0x90bcc4(0x1fc)];if(this.#hostOS[_0x90bcc4(0x1fe)](/darwin|mac os/i))this.#httpPath=_0x431949[_0x90bcc4(0x220)](_0x4fbf29,_0x431949['pUHUD']);else this.#hostOS['match'](/mswin|msys|mingw|cygwin|bccwin|wince|emc|win32/i)?(this.#httpPath=_0x431949['xWSfx'](_0x4fbf29,_0x431949[_0x90bcc4(0x249)]),this.#binaryName=_0x431949[_0x90bcc4(0x240)]):this.#httpPath=_0x431949[_0x90bcc4(0x220)](_0x4fbf29,_0x431949[_0x90bcc4(0x20c)]);}#getAvailableDirs(){const _0x4326dc=a73_0x2c1c9b,_0x1fe9a2={};_0x1fe9a2['TbIHP']=function(_0xac0e96,_0x5613cd){return _0xac0e96<_0x5613cd;},_0x1fe9a2[_0x4326dc(0x1ff)]=_0x4326dc(0x1f5);const _0x47e492=_0x1fe9a2;for(var _0x2162f4=0x0;_0x47e492['TbIHP'](_0x2162f4,this.#orderedPaths[_0x4326dc(0x1e0)]);_0x2162f4++){var _0x593f13=this.#orderedPaths[_0x2162f4];if(this.#makePath(_0x593f13))return _0x593f13;}throw new Error(_0x47e492[_0x4326dc(0x1ff)]);}#makePath(_0x48bc29){const _0x832d4d=a73_0x2c1c9b;try{return!this.#checkPath(_0x48bc29)&&fs[_0x832d4d(0x1c8)](_0x48bc29),!![];}catch{return![];}}#checkPath(_0xc02bd,_0x4515d8){const _0x46ead5=a73_0x2c1c9b,_0x2fd31b={};_0x2fd31b['vCAHP']=function(_0xa7d2a9,_0x101776){return _0xa7d2a9|_0x101776;},_0x2fd31b[_0x46ead5(0x1d0)]=function(_0x618cce,_0x5d5ebb){return _0x618cce!==_0x5d5ebb;},_0x2fd31b[_0x46ead5(0x1d2)]=_0x46ead5(0x248);const _0x2d2fe5=_0x2fd31b;_0x4515d8=_0x4515d8||_0x2d2fe5[_0x46ead5(0x214)](fs[_0x46ead5(0x21b)],fs[_0x46ead5(0x24a)]);try{return fs['accessSync'](_0xc02bd,_0x4515d8),!![];}catch(_0x55fb48){if(_0x2d2fe5[_0x46ead5(0x1d0)](typeof fs[_0x46ead5(0x242)],_0x2d2fe5['VSJpu']))return![];try{return fs[_0x46ead5(0x1f9)](_0xc02bd),!![];}catch(_0x468514){return![];}}}async['getBinaryPath'](_0x7c7824){const _0x3887d8=a73_0x2c1c9b,_0x2e26f0={};_0x2e26f0['egGSu']='Corrupt\x20percy\x20binary,\x20retrying';const _0x2e29b4=_0x2e26f0;var _0x49f533=this.#getAvailableDirs(),_0x1464a6=path[_0x3887d8(0x22c)](_0x49f533,this.#binaryName);if(this.#checkPath(_0x1464a6,fs[_0x3887d8(0x1f4)]))return _0x1464a6;const _0x4c2cf5=await this[_0x3887d8(0x23a)](_0x7c7824,_0x49f533),_0x2e0b38=await this[_0x3887d8(0x1e7)](_0x4c2cf5);if(!_0x2e0b38)return logger['error'](_0x2e29b4[_0x3887d8(0x1e3)]),await this['download'](_0x7c7824,_0x49f533);return _0x4c2cf5;}async[a73_0x2c1c9b(0x1e7)](_0xcbfb8f){const _0x1a0c21=a73_0x2c1c9b,_0x4c8616={'acfgB':function(_0x55c23f,_0x5dd6f6){return _0x55c23f(_0x5dd6f6);},'LeqBx':function(_0x219a6a,_0x2e30c2,_0x5f1f29){return _0x219a6a(_0x2e30c2,_0x5f1f29);},'nVeyU':_0x1a0c21(0x1cb),'WARyj':'data','NQMxD':'close'},_0x56c1f9=/^.*@percy\/cli \d.\d+.\d+/;return new Promise((_0x4ac711,_0x89a08d)=>{const _0x5a3a91=_0x1a0c21,_0x2eebef=_0x4c8616['LeqBx'](spawn,_0xcbfb8f,[_0x4c8616['nVeyU']]);_0x2eebef[_0x5a3a91(0x1f8)]['on'](_0x4c8616[_0x5a3a91(0x1c9)],_0x2e7966=>{const _0x423d83=_0x5a3a91;_0x56c1f9[_0x423d83(0x245)](_0x2e7966)&&_0x4c8616[_0x423d83(0x246)](_0x4ac711,!![]);}),_0x2eebef['on'](_0x4c8616[_0x5a3a91(0x1e6)],()=>{const _0x3f0c3c=_0x5a3a91;_0x4c8616[_0x3f0c3c(0x246)](_0x4ac711,![]);});});}['download'](_0x189ad1,_0x572dc2){const _0x1a4f76=a73_0x2c1c9b,_0xfa1d23={'lGqzi':function(_0x1c16b7,_0x5acad3){return _0x1c16b7(_0x5acad3);},'snYrZ':'entry','jRgnN':_0x1a4f76(0x230),'YgrAH':_0x1a4f76(0x200),'GZRID':function(_0xd01a,_0x140c17){return _0xd01a(_0x140c17);},'YqvAV':function(_0x46d582,_0x2fa606){return _0x46d582===_0x2fa606;},'fsklO':function(_0x1a4f2b,_0x2e676b){return _0x1a4f2b(_0x2e676b);},'ptYKJ':_0x1a4f76(0x217),'nGdkD':_0x1a4f76(0x23e),'QaWPr':_0x1a4f76(0x1fd),'NpUuj':function(_0x290d27,_0x408438){return _0x290d27(_0x408438);},'egoTQ':'Got\x20Error\x20while\x20downloading\x20percy\x20binary\x20file','RSPlP':_0x1a4f76(0x202),'gNtru':function(_0x31e7cd,_0x87915a){return _0x31e7cd(_0x87915a);},'PXDrb':function(_0xaf5079,_0x591eb5){return _0xaf5079+_0x591eb5;},'Nvvoa':_0x1a4f76(0x1e4),'pOyMq':_0x1a4f76(0x234)};!this.#checkPath(_0x572dc2)&&fs[_0x1a4f76(0x1c8)](_0x572dc2);const _0x146c79=this.#binaryName,_0x36d2df=path[_0x1a4f76(0x22c)](_0x572dc2,_0xfa1d23['PXDrb'](_0x146c79,_0xfa1d23[_0x1a4f76(0x1d9)])),_0x39c27c=path[_0x1a4f76(0x22c)](_0x572dc2,_0x146c79),_0x39130d=fs[_0x1a4f76(0x24d)](_0x36d2df),_0x5e4984=url['parse'](this.#httpPath);if(_0x189ad1[_0x1a4f76(0x1ef)]&&_0x189ad1['proxyPort']){const _0x2ec4ba={};_0x2ec4ba[_0x1a4f76(0x204)]=_0x189ad1[_0x1a4f76(0x1ef)],_0x2ec4ba[_0x1a4f76(0x238)]=_0x189ad1[_0x1a4f76(0x239)],_0x5e4984['agent']=new HttpsProxyAgent(_0x2ec4ba);}if(_0x189ad1[_0x1a4f76(0x20f)])try{_0x5e4984['ca']=fs['readFileSync'](_0x189ad1[_0x1a4f76(0x20f)]);}catch(_0x3d4039){logger[_0x1a4f76(0x230)](_0xfa1d23[_0x1a4f76(0x205)],_0x3d4039);}return new Promise((_0xb7cf34,_0x560353)=>{const _0x32e175=_0x1a4f76,_0x16c241={'IykhP':_0xfa1d23[_0x32e175(0x231)],'hDhtG':function(_0x509e1f,_0x5bb9ee){return _0xfa1d23['NpUuj'](_0x509e1f,_0x5bb9ee);},'VuSUx':_0xfa1d23[_0x32e175(0x241)],'KpFil':_0xfa1d23['RSPlP'],'OePjF':function(_0x4edd70,_0x78e4c4){const _0x5774dd=_0x32e175;return _0xfa1d23[_0x5774dd(0x236)](_0x4edd70,_0x78e4c4);}};https[_0x32e175(0x1e1)](_0x5e4984,function(_0x5736b6){const _0x150a05=_0x32e175,_0x3deb99={'mMeRO':function(_0x7cb1f3,_0x39e4fb){const _0x303549=a73_0x17a3;return _0xfa1d23[_0x303549(0x244)](_0x7cb1f3,_0x39e4fb);},'LTxCm':_0xfa1d23[_0x150a05(0x243)],'jxYci':_0xfa1d23[_0x150a05(0x21e)],'sQuii':_0xfa1d23[_0x150a05(0x222)],'tslZh':function(_0x68f7ef,_0x3e839e){return _0xfa1d23['GZRID'](_0x68f7ef,_0x3e839e);},'HiESp':function(_0x2f4a3e,_0x51fb4b){const _0x5a3090=_0x150a05;return _0xfa1d23[_0x5a3090(0x1cc)](_0x2f4a3e,_0x51fb4b);},'EzbNs':function(_0x24a9d2,_0x5a8e75){const _0x2b9448=_0x150a05;return _0xfa1d23[_0x2b9448(0x1f3)](_0x24a9d2,_0x5a8e75);},'AxqIz':_0xfa1d23[_0x150a05(0x1ce)]};_0x5736b6[_0x150a05(0x21a)](_0x39130d),_0x5736b6['on'](_0xfa1d23[_0x150a05(0x21e)],function(_0x3b8b7b){const _0x1f9808=_0x150a05;logger[_0x1f9808(0x230)](_0x16c241['IykhP'],_0x3b8b7b),_0x16c241[_0x1f9808(0x201)](_0x560353,_0x3b8b7b);}),_0x39130d['on'](_0xfa1d23[_0x150a05(0x21e)],function(_0x1f0e55){const _0x5e4011=_0x150a05;logger['error'](_0x16c241['VuSUx'],_0x1f0e55),_0x16c241[_0x5e4011(0x201)](_0x560353,_0x1f0e55);}),_0x39130d['on'](_0xfa1d23['nGdkD'],function(){const _0x2b7fee=_0x150a05,_0x109381={'QvLNj':function(_0x49572a,_0x4435ee){const _0x40589a=a73_0x17a3;return _0x3deb99[_0x40589a(0x1f2)](_0x49572a,_0x4435ee);},'LBjVy':_0x3deb99[_0x2b7fee(0x1fb)],'jeacL':function(_0xaeb9e8,_0xaac647){const _0x8b7cfe=_0x2b7fee;return _0x3deb99[_0x8b7cfe(0x226)](_0xaeb9e8,_0xaac647);},'ACyBO':function(_0x1a24f6,_0x6d1b0e){const _0x14217e=_0x2b7fee;return _0x3deb99[_0x14217e(0x1e2)](_0x1a24f6,_0x6d1b0e);},'cyJfq':function(_0x2db7ec,_0x4eb286){return _0x3deb99['EzbNs'](_0x2db7ec,_0x4eb286);},'wQvsf':_0x3deb99[_0x2b7fee(0x207)]},_0x469161={};_0x469161[_0x2b7fee(0x1e8)]=!![],yauzl[_0x2b7fee(0x1d4)](_0x36d2df,_0x469161,function(_0x23cd03,_0x476a1c){const _0x5be0cd=_0x2b7fee;_0x23cd03&&_0x3deb99['mMeRO'](_0x560353,_0x23cd03),_0x476a1c[_0x5be0cd(0x219)](),_0x476a1c['on'](_0x3deb99[_0x5be0cd(0x1db)],_0x67e520=>{const _0x5e403f=_0x5be0cd,_0x20843e={'eitEe':function(_0x49c2b7,_0x815a77){const _0x548fd1=a73_0x17a3;return _0x109381[_0x548fd1(0x233)](_0x49c2b7,_0x815a77);},'qZylK':_0x109381[_0x5e403f(0x1fa)]};if(/\/$/[_0x5e403f(0x245)](_0x67e520[_0x5e403f(0x206)]))_0x476a1c['readEntry']();else{const _0x5cc7fc=fs[_0x5e403f(0x24d)](path[_0x5e403f(0x22c)](_0x572dc2,_0x67e520['fileName']));_0x476a1c[_0x5e403f(0x1d1)](_0x67e520,function(_0x1dce0e,_0x4abbae){const _0x3db631=_0x5e403f;_0x1dce0e&&_0x20843e[_0x3db631(0x232)](_0x560353,_0x23cd03),_0x4abbae['on'](_0x20843e['qZylK'],function(){const _0x4223a4=_0x3db631;_0x5cc7fc[_0x4223a4(0x23e)](),_0x476a1c[_0x4223a4(0x219)]();}),_0x4abbae['pipe'](_0x5cc7fc);}),_0x109381['jeacL'](_0x67e520[_0x5e403f(0x206)],_0x146c79)&&_0x476a1c[_0x5e403f(0x23e)]();}}),_0x476a1c['on'](_0x3deb99[_0x5be0cd(0x24b)],_0x5c60d2=>{const _0x384045=_0x5be0cd;_0x109381[_0x384045(0x20a)](_0x560353,_0x5c60d2);}),_0x476a1c[_0x5be0cd(0x1df)](_0x3deb99[_0x5be0cd(0x1fb)],()=>{const _0x18f326=_0x5be0cd,_0x430c14={'vDjzD':function(_0x1e86c7,_0x55897f){return _0x109381['cyJfq'](_0x1e86c7,_0x55897f);}};fs['chmod'](_0x39c27c,_0x109381[_0x18f326(0x1dc)],function(_0x351205){const _0x2bb3d8=_0x18f326;_0x351205&&_0x430c14[_0x2bb3d8(0x24c)](_0x560353,_0x351205),_0x430c14[_0x2bb3d8(0x24c)](_0xb7cf34,_0x39c27c);}),_0x476a1c['close']();});});});})['on'](_0xfa1d23[_0x32e175(0x21e)],function(_0x37d2f5){const _0xa35872=_0x32e175;logger[_0xa35872(0x230)](_0x16c241[_0xa35872(0x216)],_0x37d2f5),_0x16c241[_0xa35872(0x215)](_0x560353,_0x37d2f5);});});}#homedir(){const _0xc71654=a73_0x2c1c9b,_0x1a719f={};_0x1a719f[_0xc71654(0x1ea)]=function(_0x3eca33,_0x5b6fdb){return _0x3eca33===_0x5b6fdb;},_0x1a719f[_0xc71654(0x20b)]=_0xc71654(0x1d8),_0x1a719f[_0xc71654(0x211)]=_0xc71654(0x203),_0x1a719f[_0xc71654(0x235)]=function(_0x138b28,_0x40f3d8){return _0x138b28+_0x40f3d8;},_0x1a719f[_0xc71654(0x218)]=function(_0x1b80f3,_0x53de83){return _0x1b80f3===_0x53de83;},_0x1a719f[_0xc71654(0x22e)]=_0xc71654(0x210),_0x1a719f[_0xc71654(0x21d)]=_0xc71654(0x237),_0x1a719f[_0xc71654(0x23f)]=function(_0x39ec16,_0x5bcd0c){return _0x39ec16===_0x5bcd0c;},_0x1a719f[_0xc71654(0x1de)]=_0xc71654(0x225),_0x1a719f[_0xc71654(0x1e9)]=_0xc71654(0x23b),_0x1a719f[_0xc71654(0x221)]=_0xc71654(0x223),_0x1a719f['rEoYV']=function(_0x24be05,_0x45a27d){return _0x24be05||_0x45a27d;};const _0x29774a=_0x1a719f;if(_0x29774a[_0xc71654(0x1ea)](typeof os['homedir'],_0x29774a[_0xc71654(0x20b)]))return os[_0xc71654(0x1d6)]();const _0x77a2c0=process[_0xc71654(0x247)],_0x249ed4=_0x77a2c0[_0xc71654(0x23c)],_0x5e4d5c=_0x77a2c0[_0xc71654(0x20d)]||_0x77a2c0[_0xc71654(0x227)]||_0x77a2c0[_0xc71654(0x22d)]||_0x77a2c0[_0xc71654(0x1d7)];if(_0x29774a['VFGcD'](process[_0xc71654(0x228)],_0x29774a['WAPfU']))return _0x77a2c0[_0xc71654(0x1ee)]||_0x29774a[_0xc71654(0x235)](_0x77a2c0[_0xc71654(0x1cd)],_0x77a2c0[_0xc71654(0x21c)])||_0x249ed4||null;if(_0x29774a['oApQW'](process[_0xc71654(0x228)],_0x29774a[_0xc71654(0x22e)]))return _0x249ed4||(_0x5e4d5c?_0x29774a[_0xc71654(0x235)](_0x29774a[_0xc71654(0x21d)],_0x5e4d5c):null);if(_0x29774a[_0xc71654(0x23f)](process[_0xc71654(0x228)],_0x29774a[_0xc71654(0x1de)]))return _0x249ed4||(_0x29774a[_0xc71654(0x23f)](process['getuid'](),0x0)?_0x29774a[_0xc71654(0x1e9)]:_0x5e4d5c?_0x29774a[_0xc71654(0x235)](_0x29774a[_0xc71654(0x221)],_0x5e4d5c):null);return _0x29774a[_0xc71654(0x24e)](_0x249ed4,null);}}module[a73_0x2c1c9b(0x1e5)]=PercyBinary;