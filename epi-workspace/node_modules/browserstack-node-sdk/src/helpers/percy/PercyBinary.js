const a72_0x193f47=a72_0x3884;(function(_0x5a828a,_0x299c53){const _0x14804d=a72_0x3884,_0x2a6c28=_0x5a828a();while(!![]){try{const _0x5e4b90=parseInt(_0x14804d(0x1c7))/0x1*(-parseInt(_0x14804d(0x17e))/0x2)+parseInt(_0x14804d(0x1f5))/0x3*(-parseInt(_0x14804d(0x189))/0x4)+-parseInt(_0x14804d(0x1da))/0x5*(parseInt(_0x14804d(0x1d8))/0x6)+parseInt(_0x14804d(0x1bb))/0x7+-parseInt(_0x14804d(0x1ab))/0x8+parseInt(_0x14804d(0x1ef))/0x9+parseInt(_0x14804d(0x1d1))/0xa;if(_0x5e4b90===_0x299c53)break;else _0x2a6c28['push'](_0x2a6c28['shift']());}catch(_0x24297e){_0x2a6c28['push'](_0x2a6c28['shift']());}}}(a72_0x5a77,0xa5673));function a72_0x5a77(){const _0x311a7a=['11127RWSYBr','accessSync','ijRej','vOvrm','BaWNE','percy.exe','undefined','laDsd','/percy-win.zip','W_OK','19803610XxsRTk','uHelC','FoACk','sPLbx','/home/','sJQRv','get','54gXGWZN','env','752575yuoBZQ','rdFsU','RAgjR','DXLqw','ZzqIm','CMfLC','R_OK','QGCok','LNAME','join','.browserstack','getBinaryPath','MBhUC','proxyHost','UgOQz','OFXkU','IHtwY','AHnOT','ivPtd','--version','WLhkG','5258961cdusga','USERPROFILE','download','USERNAME','tmpdir','USER','4461kOuOzL','entry','mQhse','Nxxos','/percy-osx.zip','win32','Mlbbc','url','darwin','validateBinary','https-proxy-agent','OIGIp','udNit','HOMEDRIVE','oYktx','PQqDR','16fIgfNL','platform','close','LOGNAME','giHAK','temtw','gXkom','SmXcn','wqcjX','EPPbn','yauzl','332bHsOsN','readEntry','lazyEntries','child_process','createWriteStream','useCaCertificate','pipe','gMrNF','getuid','nDxZO','/percy-linux.zip','Abdau','percy','test','GThzA','HZIip','function','CnxOS','Percy\x20download\x20failed\x20to\x20read\x20cert\x20file','fznXZ','HOME','end','uqxGn','AYzXt','Got\x20Error\x20in\x20percy\x20binary\x20downloading\x20request','AAnVL','VKZon','jCwbP','lowzH','CqbTx','ntxDs','X_OK','chmod','follow-redirects','7883376kvHsWu','homedir','once','bsrBx','Pzxlj','path','SqiqN','openReadStream','HEPVF','lqNoi','HvNDE','eqFTU','match','Error\x20trying\x20to\x20download\x20percy\x20binary','mkdirSync','linux','4657065stfNny','parse','/Users/','boOvy','error','HOMEPATH','iPHji','AFRDU','qEcQL','0755','readFileSync','JTVgW'];a72_0x5a77=function(){return _0x311a7a;};return a72_0x5a77();}function a72_0x3884(_0x23de33,_0x23cf52){const _0x5a77b8=a72_0x5a77();return a72_0x3884=function(_0x3884c9,_0x2e01ef){_0x3884c9=_0x3884c9-0x172;let _0x1e082a=_0x5a77b8[_0x3884c9];return _0x1e082a;},a72_0x3884(_0x23de33,_0x23cf52);}const {https}=require(a72_0x193f47(0x1aa)),url=require(a72_0x193f47(0x175)),yauzl=require(a72_0x193f47(0x188)),fs=require('fs'),path=require(a72_0x193f47(0x1b0)),os=require('os'),{spawn}=require(a72_0x193f47(0x18c)),HttpsProxyAgent=require(a72_0x193f47(0x178)),logger=require('../logger')['winstonLogger'];class PercyBinary{#hostOS=process[a72_0x193f47(0x17f)];#httpPath=null;#binaryName=a72_0x193f47(0x195);#orderedPaths=[path[a72_0x193f47(0x1e3)](this.#homedir(),a72_0x193f47(0x1e4)),process['cwd'](),os[a72_0x193f47(0x1f3)]()];constructor(){const _0x480de0=a72_0x193f47,_0x196c43={};_0x196c43[_0x480de0(0x1a7)]='https://github.com/percy/cli/releases/latest/download',_0x196c43[_0x480de0(0x1db)]=function(_0xda0b38,_0x132944){return _0xda0b38+_0x132944;},_0x196c43['SqiqN']=_0x480de0(0x172),_0x196c43[_0x480de0(0x1de)]=_0x480de0(0x1cf),_0x196c43['uHelC']=_0x480de0(0x1cc),_0x196c43[_0x480de0(0x198)]=_0x480de0(0x193);const _0x327bdb=_0x196c43,_0x1b0ec5=_0x327bdb[_0x480de0(0x1a7)];if(this.#hostOS[_0x480de0(0x1b7)](/darwin|mac os/i))this.#httpPath=_0x327bdb[_0x480de0(0x1db)](_0x1b0ec5,_0x327bdb[_0x480de0(0x1b1)]);else this.#hostOS[_0x480de0(0x1b7)](/mswin|msys|mingw|cygwin|bccwin|wince|emc|win32/i)?(this.#httpPath=_0x327bdb['rdFsU'](_0x1b0ec5,_0x327bdb[_0x480de0(0x1de)]),this.#binaryName=_0x327bdb[_0x480de0(0x1d2)]):this.#httpPath=_0x327bdb['rdFsU'](_0x1b0ec5,_0x327bdb[_0x480de0(0x198)]);}#getAvailableDirs(){const _0x44ff27=a72_0x193f47,_0x5bf5a2={};_0x5bf5a2[_0x44ff27(0x1dc)]=function(_0x39d289,_0x747579){return _0x39d289<_0x747579;},_0x5bf5a2[_0x44ff27(0x1e9)]=_0x44ff27(0x1b8);const _0x36e2fd=_0x5bf5a2;for(var _0x5c66e0=0x0;_0x36e2fd[_0x44ff27(0x1dc)](_0x5c66e0,this.#orderedPaths['length']);_0x5c66e0++){var _0x5664a3=this.#orderedPaths[_0x5c66e0];if(this.#makePath(_0x5664a3))return _0x5664a3;}throw new Error(_0x36e2fd['OFXkU']);}#makePath(_0x24f309){try{return!this.#checkPath(_0x24f309)&&fs['mkdirSync'](_0x24f309),!![];}catch{return![];}}#checkPath(_0x47fb4c,_0x3cb121){const _0x3a72f9=a72_0x193f47,_0x42a0ec={};_0x42a0ec[_0x3a72f9(0x19a)]=function(_0x25b5e1,_0x30c327){return _0x25b5e1|_0x30c327;},_0x42a0ec[_0x3a72f9(0x184)]=function(_0x1a5415,_0x1c7ac3){return _0x1a5415!==_0x1c7ac3;},_0x42a0ec[_0x3a72f9(0x183)]=_0x3a72f9(0x1cd);const _0x5793a6=_0x42a0ec;_0x3cb121=_0x3cb121||_0x5793a6[_0x3a72f9(0x19a)](fs[_0x3a72f9(0x1e0)],fs[_0x3a72f9(0x1d0)]);try{return fs[_0x3a72f9(0x1c8)](_0x47fb4c,_0x3cb121),!![];}catch(_0x1db507){if(_0x5793a6[_0x3a72f9(0x184)](typeof fs[_0x3a72f9(0x1c8)],_0x5793a6[_0x3a72f9(0x183)]))return![];try{return fs['statSync'](_0x47fb4c),!![];}catch(_0x3447ad){return![];}}}async[a72_0x193f47(0x1e5)](_0x220fc8){const _0x543c0a=a72_0x193f47,_0x5d8ab4={};_0x5d8ab4[_0x543c0a(0x1a6)]='Corrupt\x20percy\x20binary,\x20retrying';const _0xd697e7=_0x5d8ab4;var _0x156a24=this.#getAvailableDirs(),_0xf105d=path['join'](_0x156a24,this.#binaryName);if(this.#checkPath(_0xf105d,fs[_0x543c0a(0x1a8)]))return _0xf105d;const _0xc5378a=await this[_0x543c0a(0x1f1)](_0x220fc8,_0x156a24),_0x3514ae=await this[_0x543c0a(0x177)](_0xc5378a);if(!_0x3514ae)return logger[_0x543c0a(0x1bf)](_0xd697e7[_0x543c0a(0x1a6)]),await this[_0x543c0a(0x1f1)](_0x220fc8,_0x156a24);return _0xc5378a;}async[a72_0x193f47(0x177)](_0x12f0db){const _0x111aae=a72_0x193f47,_0x580c59={'laDsd':function(_0x477617,_0xb05e74){return _0x477617(_0xb05e74);},'yMaaO':function(_0x369e80,_0x256895,_0x3e61cd){return _0x369e80(_0x256895,_0x3e61cd);},'giHAK':_0x111aae(0x1ed),'ZrzBb':'data','Nxxos':'close'},_0x1ea200=/^.*@percy\/cli \d.\d+.\d+/;return new Promise((_0x2de572,_0x3c2697)=>{const _0x370d44=_0x111aae,_0x16b52a={'PQqDR':function(_0x2196af,_0x33a034){const _0x1affdd=a72_0x3884;return _0x580c59[_0x1affdd(0x1ce)](_0x2196af,_0x33a034);},'qEcQL':function(_0x147e82,_0x31aa66){return _0x580c59['laDsd'](_0x147e82,_0x31aa66);}},_0x36f8a5=_0x580c59['yMaaO'](spawn,_0x12f0db,[_0x580c59[_0x370d44(0x182)]]);_0x36f8a5['stdout']['on'](_0x580c59['ZrzBb'],_0x2407f5=>{const _0x39bf09=_0x370d44;_0x1ea200[_0x39bf09(0x196)](_0x2407f5)&&_0x16b52a[_0x39bf09(0x17d)](_0x2de572,!![]);}),_0x36f8a5['on'](_0x580c59[_0x370d44(0x1f8)],()=>{const _0x1c8d6d=_0x370d44;_0x16b52a[_0x1c8d6d(0x1c3)](_0x2de572,![]);});});}[a72_0x193f47(0x1f1)](_0x2eb5a5,_0x3f91cd){const _0x3bbf94=a72_0x193f47,_0x1d9635={'QGCok':'Got\x20Error\x20in\x20percy\x20binary\x20download\x20response','oYktx':function(_0x374ca2,_0x2df43f){return _0x374ca2(_0x2df43f);},'GThzA':'Got\x20Error\x20while\x20downloading\x20percy\x20binary\x20file','IHtwY':_0x3bbf94(0x19e),'SXQma':function(_0x2ec956,_0x51b1d2){return _0x2ec956===_0x51b1d2;},'lowzH':function(_0x2724a7,_0x2fe3a){return _0x2724a7(_0x2fe3a);},'FoACk':_0x3bbf94(0x1f6),'sJQRv':_0x3bbf94(0x1bf),'gbwPP':_0x3bbf94(0x180),'VKZon':_0x3bbf94(0x1a1),'SmXcn':_0x3bbf94(0x1c4),'iPHji':function(_0x1de9c3,_0x339fc6){return _0x1de9c3+_0x339fc6;},'boOvy':'.zip','OIGIp':_0x3bbf94(0x19b)};!this.#checkPath(_0x3f91cd)&&fs[_0x3bbf94(0x1b9)](_0x3f91cd);const _0x2aa681=this.#binaryName,_0x598c47=path[_0x3bbf94(0x1e3)](_0x3f91cd,_0x1d9635[_0x3bbf94(0x1c1)](_0x2aa681,_0x1d9635[_0x3bbf94(0x1be)])),_0x3d2f00=path['join'](_0x3f91cd,_0x2aa681),_0x18645b=fs[_0x3bbf94(0x18d)](_0x598c47),_0x28ceef=url[_0x3bbf94(0x1bc)](this.#httpPath);if(_0x2eb5a5[_0x3bbf94(0x1e7)]&&_0x2eb5a5['proxyPort']){const _0x12e8be={};_0x12e8be['host']=_0x2eb5a5['proxyHost'],_0x12e8be['port']=_0x2eb5a5['proxyPort'],_0x28ceef['agent']=new HttpsProxyAgent(_0x12e8be);}if(_0x2eb5a5['useCaCertificate'])try{_0x28ceef['ca']=fs[_0x3bbf94(0x1c5)](_0x2eb5a5[_0x3bbf94(0x18e)]);}catch(_0x29345c){logger['error'](_0x1d9635[_0x3bbf94(0x179)],_0x29345c);}return new Promise((_0x434641,_0x1dc922)=>{const _0x5a5eee=_0x3bbf94,_0x18931b={'ijRej':function(_0x497d94,_0x4f7764){const _0x3c5bb9=a72_0x3884;return _0x1d9635[_0x3c5bb9(0x1a5)](_0x497d94,_0x4f7764);},'Abdau':_0x1d9635[_0x5a5eee(0x185)]};https[_0x5a5eee(0x1d7)](_0x28ceef,function(_0x14ce68){const _0x25c532=_0x5a5eee,_0x342a9e={'AAnVL':_0x1d9635[_0x25c532(0x1e1)],'Mlbbc':function(_0x2d480c,_0x5328e1){return _0x1d9635['oYktx'](_0x2d480c,_0x5328e1);},'iHvUi':_0x1d9635[_0x25c532(0x197)],'vOvrm':function(_0x51216a,_0x193e9c){const _0x3ff1f7=_0x25c532;return _0x1d9635[_0x3ff1f7(0x17c)](_0x51216a,_0x193e9c);},'JTVgW':_0x1d9635[_0x25c532(0x1ea)],'MBhUC':function(_0x5d3df6,_0x22cd34){return _0x1d9635['SXQma'](_0x5d3df6,_0x22cd34);},'gMrNF':function(_0x2aba31,_0x34720c){const _0xe242=_0x25c532;return _0x1d9635[_0xe242(0x1a5)](_0x2aba31,_0x34720c);},'eqFTU':_0x1d9635[_0x25c532(0x1d3)],'EPPbn':_0x1d9635['sJQRv']};_0x14ce68['pipe'](_0x18645b),_0x14ce68['on'](_0x1d9635[_0x25c532(0x1d6)],function(_0x542a86){const _0xf32b7b=_0x25c532;logger[_0xf32b7b(0x1bf)](_0x342a9e[_0xf32b7b(0x1a2)],_0x542a86),_0x342a9e[_0xf32b7b(0x174)](_0x1dc922,_0x542a86);}),_0x18645b['on'](_0x1d9635[_0x25c532(0x1d6)],function(_0x31d526){const _0x1047af=_0x25c532;logger['error'](_0x342a9e['iHvUi'],_0x31d526),_0x342a9e[_0x1047af(0x1ca)](_0x1dc922,_0x31d526);}),_0x18645b['on'](_0x1d9635['gbwPP'],function(){const _0x181892=_0x25c532,_0x10dbe4={'nDxZO':function(_0x5857e6,_0x3bdaa8){const _0x3fc09c=a72_0x3884;return _0x18931b[_0x3fc09c(0x1c9)](_0x5857e6,_0x3bdaa8);},'DXLqw':function(_0x26ba92,_0x7b8a31){return _0x18931b['ijRej'](_0x26ba92,_0x7b8a31);},'CMfLC':_0x18931b[_0x181892(0x194)]},_0x59472a={};_0x59472a[_0x181892(0x18b)]=!![],yauzl['open'](_0x598c47,_0x59472a,function(_0x2a2b5a,_0x628a28){const _0x337860=_0x181892,_0x2a463c={'Jarwb':function(_0x4acf67,_0x561d26){const _0x3f2537=a72_0x3884;return _0x342a9e[_0x3f2537(0x174)](_0x4acf67,_0x561d26);},'udNit':_0x342a9e['JTVgW'],'WLhkG':function(_0x9e7bfa,_0x13bbcf){const _0x488398=a72_0x3884;return _0x342a9e[_0x488398(0x1e6)](_0x9e7bfa,_0x13bbcf);}};_0x2a2b5a&&_0x342a9e[_0x337860(0x190)](_0x1dc922,_0x2a2b5a),_0x628a28[_0x337860(0x18a)](),_0x628a28['on'](_0x342a9e[_0x337860(0x1b6)],_0x2e02fd=>{const _0x46ae0f=_0x337860,_0x2d8bbf={'AFRDU':function(_0x21405a,_0x3cc1ea){return _0x2a463c['Jarwb'](_0x21405a,_0x3cc1ea);},'wqcjX':_0x2a463c[_0x46ae0f(0x17a)]};if(/\/$/['test'](_0x2e02fd['fileName']))_0x628a28[_0x46ae0f(0x18a)]();else{const _0x33b283=fs[_0x46ae0f(0x18d)](path[_0x46ae0f(0x1e3)](_0x3f91cd,_0x2e02fd['fileName']));_0x628a28[_0x46ae0f(0x1b2)](_0x2e02fd,function(_0x10fc8e,_0x5a489b){const _0x45a909=_0x46ae0f;_0x10fc8e&&_0x2d8bbf[_0x45a909(0x1c2)](_0x1dc922,_0x2a2b5a),_0x5a489b['on'](_0x2d8bbf[_0x45a909(0x186)],function(){const _0x4e7eaa=_0x45a909;_0x33b283[_0x4e7eaa(0x180)](),_0x628a28[_0x4e7eaa(0x18a)]();}),_0x5a489b[_0x45a909(0x18f)](_0x33b283);}),_0x2a463c[_0x46ae0f(0x1ee)](_0x2e02fd['fileName'],_0x2aa681)&&_0x628a28[_0x46ae0f(0x180)]();}}),_0x628a28['on'](_0x342a9e[_0x337860(0x187)],_0x216100=>{const _0x9292dc=_0x337860;_0x10dbe4[_0x9292dc(0x192)](_0x1dc922,_0x216100);}),_0x628a28[_0x337860(0x1ad)](_0x342a9e[_0x337860(0x1c6)],()=>{const _0x2b79f7=_0x337860,_0x5da9e2={'HEPVF':function(_0x317216,_0x553970){const _0x4b3814=a72_0x3884;return _0x10dbe4[_0x4b3814(0x192)](_0x317216,_0x553970);},'mQhse':function(_0x14d429,_0x20f81d){const _0x46cf7e=a72_0x3884;return _0x10dbe4[_0x46cf7e(0x1dd)](_0x14d429,_0x20f81d);}};fs[_0x2b79f7(0x1a9)](_0x3d2f00,_0x10dbe4[_0x2b79f7(0x1df)],function(_0x400ff6){const _0x50d2cf=_0x2b79f7;_0x400ff6&&_0x5da9e2[_0x50d2cf(0x1b3)](_0x1dc922,_0x400ff6),_0x5da9e2[_0x50d2cf(0x1f7)](_0x434641,_0x3d2f00);}),_0x628a28['close']();});});});})['on'](_0x1d9635['sJQRv'],function(_0x372163){const _0x4ae36a=_0x5a5eee;logger[_0x4ae36a(0x1bf)](_0x1d9635[_0x4ae36a(0x1a3)],_0x372163),_0x1d9635['lowzH'](_0x1dc922,_0x372163);});});}#homedir(){const _0x24d2ac=a72_0x193f47,_0x5b4dae={};_0x5b4dae[_0x24d2ac(0x1eb)]=function(_0xbb755c,_0x5973ce){return _0xbb755c===_0x5973ce;},_0x5b4dae[_0x24d2ac(0x1b4)]=_0x24d2ac(0x199),_0x5b4dae[_0x24d2ac(0x1ae)]=_0x24d2ac(0x173),_0x5b4dae[_0x24d2ac(0x1e8)]=function(_0x946138,_0x2ee12e){return _0x946138+_0x2ee12e;},_0x5b4dae[_0x24d2ac(0x1cb)]=_0x24d2ac(0x176),_0x5b4dae[_0x24d2ac(0x1ec)]=function(_0xa48aed,_0x1e4e30){return _0xa48aed+_0x1e4e30;},_0x5b4dae[_0x24d2ac(0x19c)]=_0x24d2ac(0x1bd),_0x5b4dae[_0x24d2ac(0x1af)]=function(_0x21a53d,_0x36ca1d){return _0x21a53d===_0x36ca1d;},_0x5b4dae['uqxGn']=_0x24d2ac(0x1ba),_0x5b4dae[_0x24d2ac(0x1a0)]=function(_0x3bac8e,_0x49e713){return _0x3bac8e===_0x49e713;},_0x5b4dae[_0x24d2ac(0x1d4)]='/root',_0x5b4dae['jCwbP']=_0x24d2ac(0x1d5),_0x5b4dae[_0x24d2ac(0x1b5)]=function(_0x47ba2f,_0x5dac4c){return _0x47ba2f||_0x5dac4c;};const _0x4c573c=_0x5b4dae;if(_0x4c573c[_0x24d2ac(0x1eb)](typeof os[_0x24d2ac(0x1ac)],_0x4c573c[_0x24d2ac(0x1b4)]))return os[_0x24d2ac(0x1ac)]();const _0x1830e7=process[_0x24d2ac(0x1d9)],_0x5916c3=_0x1830e7[_0x24d2ac(0x19d)],_0x1ef560=_0x1830e7[_0x24d2ac(0x181)]||_0x1830e7[_0x24d2ac(0x1f4)]||_0x1830e7[_0x24d2ac(0x1e2)]||_0x1830e7[_0x24d2ac(0x1f2)];if(_0x4c573c[_0x24d2ac(0x1eb)](process[_0x24d2ac(0x17f)],_0x4c573c[_0x24d2ac(0x1ae)]))return _0x1830e7[_0x24d2ac(0x1f0)]||_0x4c573c[_0x24d2ac(0x1e8)](_0x1830e7[_0x24d2ac(0x17b)],_0x1830e7[_0x24d2ac(0x1c0)])||_0x5916c3||null;if(_0x4c573c[_0x24d2ac(0x1eb)](process[_0x24d2ac(0x17f)],_0x4c573c['BaWNE']))return _0x5916c3||(_0x1ef560?_0x4c573c['ivPtd'](_0x4c573c['fznXZ'],_0x1ef560):null);if(_0x4c573c[_0x24d2ac(0x1af)](process[_0x24d2ac(0x17f)],_0x4c573c[_0x24d2ac(0x19f)]))return _0x5916c3||(_0x4c573c[_0x24d2ac(0x1a0)](process[_0x24d2ac(0x191)](),0x0)?_0x4c573c[_0x24d2ac(0x1d4)]:_0x1ef560?_0x4c573c[_0x24d2ac(0x1ec)](_0x4c573c[_0x24d2ac(0x1a4)],_0x1ef560):null);return _0x4c573c[_0x24d2ac(0x1b5)](_0x5916c3,null);}}module['exports']=PercyBinary;