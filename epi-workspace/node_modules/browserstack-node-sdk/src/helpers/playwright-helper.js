const a122_0x23a148=a122_0x37fc;(function(_0x54ffd5,_0x3c8f63){const _0x7aade5=a122_0x37fc,_0x1a3fea=_0x54ffd5();while(!![]){try{const _0x48284f=parseInt(_0x7aade5(0x15e))/0x1*(parseInt(_0x7aade5(0x16e))/0x2)+parseInt(_0x7aade5(0x126))/0x3+-parseInt(_0x7aade5(0x18a))/0x4+parseInt(_0x7aade5(0x197))/0x5+parseInt(_0x7aade5(0x155))/0x6*(-parseInt(_0x7aade5(0x180))/0x7)+parseInt(_0x7aade5(0x185))/0x8+parseInt(_0x7aade5(0x19a))/0x9*(parseInt(_0x7aade5(0x179))/0xa);if(_0x48284f===_0x3c8f63)break;else _0x1a3fea['push'](_0x1a3fea['shift']());}catch(_0x485443){_0x1a3fea['push'](_0x1a3fea['shift']());}}}(a122_0x4d6d,0x874af));const path=require('path'),util=require(a122_0x23a148(0x148)),{importFileFromPWCore}=require(a122_0x23a148(0x18b)),helper=require(a122_0x23a148(0x18b)),logger=require(a122_0x23a148(0x154))[a122_0x23a148(0x136)],W3CMapping=require(a122_0x23a148(0x159))[a122_0x23a148(0x13f)](),constants=require('../bin/utils/constants'),BrowserstackCLI=require(a122_0x23a148(0x195)),CLIUtils=require('../bin/v2/cliUtils');let GrpcClient;function a122_0x37fc(_0x161c76,_0x3d90d1){const _0x4d6d2b=a122_0x4d6d();return a122_0x37fc=function(_0x37fc88,_0x5ad68b){_0x37fc88=_0x37fc88-0x125;let _0x2948bb=_0x4d6d2b[_0x37fc88];return _0x2948bb;},a122_0x37fc(_0x161c76,_0x3d90d1);}try{GrpcClient=require('../bin/v2/grpcClient');}catch(a122_0x57146e){logger['debug'](a122_0x23a148(0x18f)+a122_0x57146e[a122_0x23a148(0x134)]),GrpcClient=null;}const convertW3CToJsonWire=_0x261b66=>{const _0x471b12=a122_0x23a148,_0x3f9f41={};_0x3f9f41[_0x471b12(0x15a)]=function(_0x320d6a,_0x1d7a58){return _0x320d6a||_0x1d7a58;},_0x3f9f41[_0x471b12(0x12f)]=function(_0x22116d,_0x32b0e5){return _0x22116d===_0x32b0e5;},_0x3f9f41[_0x471b12(0x14c)]='bstack:options',_0x3f9f41[_0x471b12(0x15c)]=function(_0x29bea5,_0x28eac7){return _0x29bea5 in _0x28eac7;};const _0x4b2c79=_0x3f9f41,_0x3970e2={};for(const [_0x376afb,_0x557a54]of Object[_0x471b12(0x194)](_0x4b2c79[_0x471b12(0x15a)](_0x261b66,{}))){if(_0x4b2c79[_0x471b12(0x12f)](_0x376afb,_0x4b2c79[_0x471b12(0x14c)]))continue;let _0x51662c=![];for(const [_0x13c7e0,_0x204714]of Object['entries'](W3CMapping)){if(_0x4b2c79[_0x471b12(0x12f)](_0x376afb,_0x204714)){_0x3970e2[_0x13c7e0]=_0x557a54,_0x51662c=!![];break;}}!_0x51662c&&(_0x3970e2[_0x376afb]=_0x557a54);}const _0x408b01=_0x261b66[_0x4b2c79[_0x471b12(0x14c)]]||{};for(const [_0xae1413,_0x62c2a3]of Object[_0x471b12(0x194)](_0x408b01)){let _0xa8740b=![];for(const [_0x24be79,_0x489e7f]of Object[_0x471b12(0x194)](W3CMapping)){if(_0x4b2c79['PgSqQ'](_0xae1413,_0x489e7f)){_0x3970e2[_0x24be79]=_0x62c2a3,_0xa8740b=!![];break;}}!_0xa8740b&&!_0x4b2c79[_0x471b12(0x15c)](_0xae1413,_0x3970e2)&&(_0x3970e2[_0xae1413]=_0x62c2a3);}return logger[_0x471b12(0x16c)](_0x471b12(0x160)+JSON[_0x471b12(0x18c)](_0x3970e2)),_0x3970e2;},getModifiedConfigFromCLI=async _0x273523=>{const _0x198254=a122_0x23a148,_0x1d95bf={};_0x1d95bf[_0x198254(0x18e)]=_0x198254(0x15d),_0x1d95bf[_0x198254(0x186)]=_0x198254(0x188),_0x1d95bf['vbgYe']=_0x198254(0x151),_0x1d95bf[_0x198254(0x175)]='No\x20modified\x20config\x20received\x20from\x20gRPC',_0x1d95bf[_0x198254(0x170)]=function(_0x3abf29,_0x5a2558){return _0x3abf29>_0x5a2558;},_0x1d95bf[_0x198254(0x190)]='No\x20usable\x20capabilities\x20found\x20in\x20modified\x20config\x20response';const _0x11beff=_0x1d95bf;try{if(!GrpcClient)return logger[_0x198254(0x16c)](_0x11beff[_0x198254(0x18e)]),null;const _0x195756={};_0x195756[_0x198254(0x176)]=_0x273523,_0x195756[_0x198254(0x142)]=_0x11beff['bSjRR'],_0x195756[_0x198254(0x157)]=0x1,_0x195756['projects']=[];const _0x3a31fe=_0x195756;logger[_0x198254(0x16c)](_0x11beff['vbgYe']);const _0x526a8f={};_0x526a8f[_0x198254(0x127)]=_0x3a31fe;const _0x79ab62=await GrpcClient[_0x198254(0x17d)]()[_0x198254(0x12c)](_0x526a8f);if(!_0x79ab62[_0x198254(0x196)]())return logger[_0x198254(0x16c)](_0x11beff[_0x198254(0x175)]),null;const _0x538542=JSON['parse'](_0x79ab62[_0x198254(0x196)]());logger[_0x198254(0x16c)]('Received\x20modified\x20config\x20from\x20gRPC:\x20'+JSON[_0x198254(0x18c)](_0x538542));if(_0x538542[_0x198254(0x176)]&&Array[_0x198254(0x149)](_0x538542[_0x198254(0x176)])&&_0x11beff[_0x198254(0x170)](_0x538542[_0x198254(0x176)][_0x198254(0x146)],0x0))return _0x538542[_0x198254(0x176)][0x0];else{if(_0x538542[_0x198254(0x16a)]&&Array[_0x198254(0x149)](_0x538542['projects'])&&_0x11beff[_0x198254(0x170)](_0x538542['projects'][_0x198254(0x146)],0x0)){const _0x12414c=_0x538542[_0x198254(0x16a)][0x0];if(_0x12414c[_0x198254(0x177)]&&_0x12414c['use'][_0x198254(0x14b)])return _0x12414c[_0x198254(0x177)][_0x198254(0x14b)];}}return logger[_0x198254(0x16c)](_0x11beff[_0x198254(0x190)]),null;}catch(_0x3e0028){logger[_0x198254(0x198)](_0x198254(0x14d)+_0x3e0028[_0x198254(0x134)]);throw _0x3e0028;}},generatePlaywrightUrl=(_0x4dd1b5,_0x132897)=>{const _0x35e591=a122_0x23a148,_0x21244d={'fyMCI':function(_0xf95cd7,_0x44eae7){return _0xf95cd7!==_0x44eae7;},'WkyTq':function(_0x26bbe8,_0x433369){return _0x26bbe8!==_0x433369;},'ITyYV':function(_0x5cc581,_0x531c5a){return _0x5cc581!==_0x531c5a;},'ReNUW':function(_0x7741e1,_0x59cf0c){return _0x7741e1!==_0x59cf0c;},'gPqPJ':function(_0xf76d26,_0x79c2cc){return _0xf76d26!==_0x79c2cc;},'WwNDl':function(_0x448b92,_0x50a94a){return _0x448b92(_0x50a94a);},'KfyWf':function(_0x162ffc,_0x1b7b6b){return _0x162ffc||_0x1b7b6b;},'bukbW':_0x35e591(0x171),'EqGXD':_0x35e591(0x156),'NQlFR':function(_0x393cba,_0x4e7c25){return _0x393cba(_0x4e7c25);},'TEXLn':_0x35e591(0x16f),'GSDSf':function(_0x1d4f0a,_0x79577a){return _0x1d4f0a(_0x79577a);},'rankA':_0x35e591(0x12b),'RSDVe':_0x35e591(0x152),'pabDj':_0x35e591(0x158),'LTxBB':function(_0x35d89e,_0x4101cd){return _0x35d89e+_0x4101cd;},'NkJuf':function(_0x150371,_0x26665a){return _0x150371(_0x26665a);}},_0x210669=helper[_0x35e591(0x161)](_0x4dd1b5),_0xfa373d=_0x21244d[_0x35e591(0x137)](convertW3CToJsonWire,_0x132897);try{const _0x1736da=[_0x21244d[_0x35e591(0x15f)](_0x132897,{}),global['__launchCaps']||{},global['__platformCaps']||{},global[_0x35e591(0x19b)]||{}],_0x59296e=_0x3669a4=>{const _0x28781f=_0x35e591;if(_0x21244d[_0x28781f(0x13a)](_0xfa373d[_0x3669a4],undefined)&&_0x21244d['WkyTq'](_0xfa373d[_0x3669a4],null)&&_0x21244d[_0x28781f(0x129)](_0xfa373d[_0x3669a4],''))return;for(const _0x3b3eed of _0x1736da){if(_0x3b3eed&&_0x21244d[_0x28781f(0x164)](_0x3b3eed[_0x3669a4],undefined)&&_0x21244d[_0x28781f(0x187)](_0x3b3eed[_0x3669a4],null)&&_0x21244d[_0x28781f(0x187)](_0x3b3eed[_0x3669a4],'')){_0xfa373d[_0x3669a4]=_0x3b3eed[_0x3669a4];return;}}};_0x21244d[_0x35e591(0x137)](_0x59296e,_0x21244d['bukbW']),_0x21244d[_0x35e591(0x137)](_0x59296e,_0x21244d[_0x35e591(0x145)]),_0x21244d[_0x35e591(0x135)](_0x59296e,_0x21244d[_0x35e591(0x13b)]),_0x21244d[_0x35e591(0x178)](_0x59296e,_0x21244d[_0x35e591(0x12d)]),!_0xfa373d[_0x21244d[_0x35e591(0x199)]]&&process[_0x35e591(0x184)][_0x35e591(0x169)]&&(_0xfa373d[_0x21244d[_0x35e591(0x199)]]=process[_0x35e591(0x184)][_0x35e591(0x169)]);}catch(_0x5482ea){logger[_0x35e591(0x16c)]('Unable\x20to\x20merge\x20accessibility\x20capabilities\x20into\x20Playwright\x20URL\x20caps:\x20'+util['format'](_0x5482ea));}return _0xfa373d[_0x21244d[_0x35e591(0x133)]]=process['env'][_0x35e591(0x138)],_0xfa373d[_0x21244d[_0x35e591(0x182)]]=helper[_0x35e591(0x13d)](),_0x21244d[_0x35e591(0x150)](_0x210669,_0x21244d[_0x35e591(0x15b)](encodeURIComponent,JSON[_0x35e591(0x18c)](_0xfa373d)));},getBrowserFromCaps=_0x6e3f26=>{const _0x3f9505=a122_0x23a148,_0x2270b8={};_0x2270b8[_0x3f9505(0x193)]=_0x3f9505(0x12a);const _0x550b20=_0x2270b8;return _0x6e3f26[_0x3f9505(0x131)]||_0x6e3f26['browser']||_0x550b20[_0x3f9505(0x193)];},isPlaywrightAvailable=()=>{const _0x4c6a5e=a122_0x23a148,_0x565ffb={'BQPsK':_0x4c6a5e(0x144),'TPxOD':'client','BrAWa':_0x4c6a5e(0x189),'NUepJ':function(_0xd66d76,_0x4b009a){return _0xd66d76(_0x4b009a);}};try{const _0x1b3469=path[_0x4c6a5e(0x162)](_0x565ffb[_0x4c6a5e(0x191)],_0x565ffb[_0x4c6a5e(0x17a)],_0x565ffb[_0x4c6a5e(0x183)]),_0x5d6760=_0x565ffb[_0x4c6a5e(0x132)](importFileFromPWCore,_0x1b3469);return!!_0x5d6760;}catch(_0x56f8a3){return logger[_0x4c6a5e(0x16c)](_0x4c6a5e(0x16d)+util[_0x4c6a5e(0x174)](_0x56f8a3)),![];}},getPlaywrightBrowserType=()=>{const _0x2f6185=a122_0x23a148,_0x2d7777={'JJxeb':_0x2f6185(0x144),'JumKu':'client','erisy':_0x2f6185(0x189),'vZYYp':function(_0x156e4c,_0x183584){return _0x156e4c(_0x183584);}};try{const _0x4e5f55=path['join'](_0x2d7777[_0x2f6185(0x163)],_0x2d7777[_0x2f6185(0x172)],_0x2d7777['erisy']),_0x23b474=_0x2d7777[_0x2f6185(0x140)](importFileFromPWCore,_0x4e5f55);return _0x23b474?_0x23b474[_0x2f6185(0x14a)]:null;}catch(_0x3100c7){return logger[_0x2f6185(0x16c)](_0x2f6185(0x181)+util[_0x2f6185(0x174)](_0x3100c7)),null;}},getPlaywrightModulePath=()=>{const _0x1fc337=a122_0x23a148,_0x51b770={};_0x51b770[_0x1fc337(0x166)]=_0x1fc337(0x165);const _0x4f055a=_0x51b770;return logger[_0x1fc337(0x16c)](_0x4f055a[_0x1fc337(0x166)]),null;},getBrowserTypePath=()=>{const _0x5820bd=a122_0x23a148,_0x58c251={};_0x58c251['nlOVR']=_0x5820bd(0x147);const _0x4288ba=_0x58c251;return logger[_0x5820bd(0x16c)](_0x4288ba[_0x5820bd(0x167)]),null;},checkPwandBootstrapCli=async(_0x3e5c68,_0x2c6636,_0x351528)=>{const _0x2a01b2=a122_0x23a148,_0x89aba7={'IPdds':function(_0x3d0268,_0x464f31){return _0x3d0268(_0x464f31);},'jUvGk':_0x2a01b2(0x13c),'XXLFS':function(_0x41d748,_0xfd88ca){return _0x41d748(_0xfd88ca);}};if(_0x3e5c68){const _0x336ae8=constants[_0x2a01b2(0x13e)]['PLAYWRIGHT'];logger['debug'](_0x2a01b2(0x141)+_0x3e5c68+_0x2a01b2(0x130)+_0x2c6636+_0x2a01b2(0x12e)),CLIUtils[_0x2a01b2(0x14f)](_0x2c6636,_0x336ae8);const {getProductMap:_0x52922c}=_0x89aba7[_0x2a01b2(0x16b)](require,_0x89aba7['jUvGk']);process[_0x2a01b2(0x184)]['BROWSERSTACK_PRODUCT_MAP']=JSON[_0x2a01b2(0x18c)](_0x89aba7[_0x2a01b2(0x143)](_0x52922c,_0x351528[_0x2a01b2(0x17e)])),BrowserstackCLI['getInstance']()['setBrowserstackConfig'](_0x351528['config'],_0x351528['configPath'],_0x351528[_0x2a01b2(0x139)]),await BrowserstackCLI[_0x2a01b2(0x17d)]()[_0x2a01b2(0x192)]();}},a122_0x2a4642={};function a122_0x4d6d(){const _0x400260=['platformCaps','xphtl','Error\x20getting\x20modified\x20config\x20from\x20gRPC:\x20','exports','setFrameworkDetail','LTxBB','Requesting\x20modified\x20Playwright\x20config\x20from\x20gRPC\x20for\x20cucumberjs-pw','browserstack.testhubBuildUuid','getBrowserFromCaps','./logger','27546yXJgJr','browserstack.accessibilityOptions.wcagVersion','workers','browserstack.buildProductMap','./w3cMapping','aCCbn','NkJuf','yfEOY','GrpcClient\x20not\x20available,\x20skipping\x20modified\x20config\x20request','1rQgSwz','KfyWf','Converted\x20W3C\x20caps\x20to\x20JSONWire:\x20','getPlaywrightUrl','join','JJxeb','ReNUW','getPlaywrightModulePath\x20is\x20deprecated,\x20use\x20importFileFromPWCore\x20instead','CdpTk','nlOVR','checkPwandBootstrapCli','BS_A11Y_JWT','projects','IPdds','debug','Playwright\x20not\x20available:\x20','1572422lXpuhX','browserstack.accessibilityOptions.scannerVersion','aBVee','browserstack.accessibilityOptions.authToken','JumKu','getPlaywrightModulePath','format','Khvdn','capabilities','use','GSDSf','577580mkoACb','TPxOD','getBrowserTypePath','generatePlaywrightUrl','getInstance','config','convertW3CToJsonWire','693OunFre','Error\x20getting\x20Playwright\x20BrowserType:\x20','pabDj','BrAWa','env','6197384iSxKWS','bSjRR','gPqPJ','cucumberjs-pw','browserType.js','3863760wzCtCK','./helper','stringify','getModifiedConfigFromCLI','HAZEY','Could\x20not\x20import\x20GrpcClient:\x20','kLiZM','BQPsK','bootstrap','gMEsC','entries','../bin/v2/browserstackCLI','getConfig','181580NklhZN','error','bukbW','45lKZuiV','__accessibilityOptions','getPlaywrightBrowserType','265854mIbMwP','playwrightConfigObject','importFileFromPWCore','ITyYV','chrome','browserstack.accessibilityOptions.scannerProcessingTimeout','getPlaywrightConfig','rankA','\x20flow','PgSqQ','\x20for\x20','browserName','NUepJ','RSDVe','message','NQlFR','winstonLogger','WwNDl','BROWSERSTACK_TESTHUB_UUID','cliConfig','fyMCI','TEXLn','./testhub/utils','getBuildProductMap','FRAMEWORKS','W3CMapping','vZYYp','Detected\x20Playwright\x20version\x20','framework','XXLFS','lib','EqGXD','length','getBrowserTypePath\x20is\x20deprecated,\x20use\x20importFileFromPWCore\x20instead','util','isArray','BrowserType'];a122_0x4d6d=function(){return _0x400260;};return a122_0x4d6d();}a122_0x2a4642[a122_0x23a148(0x17f)]=convertW3CToJsonWire,a122_0x2a4642[a122_0x23a148(0x18d)]=getModifiedConfigFromCLI,a122_0x2a4642[a122_0x23a148(0x17c)]=generatePlaywrightUrl,a122_0x2a4642[a122_0x23a148(0x153)]=getBrowserFromCaps,a122_0x2a4642['isPlaywrightAvailable']=isPlaywrightAvailable,a122_0x2a4642[a122_0x23a148(0x125)]=getPlaywrightBrowserType,a122_0x2a4642[a122_0x23a148(0x173)]=getPlaywrightModulePath,a122_0x2a4642[a122_0x23a148(0x17b)]=getBrowserTypePath,a122_0x2a4642[a122_0x23a148(0x128)]=importFileFromPWCore,a122_0x2a4642[a122_0x23a148(0x168)]=checkPwandBootstrapCli,module[a122_0x23a148(0x14e)]=a122_0x2a4642;