const a122_0x25f655=a122_0x4b41;(function(_0x25b3d6,_0x385b6e){const _0x15f5b7=a122_0x4b41,_0x168e1=_0x25b3d6();while(!![]){try{const _0x57adff=parseInt(_0x15f5b7(0x11d))/0x1+-parseInt(_0x15f5b7(0xc2))/0x2+-parseInt(_0x15f5b7(0xc9))/0x3*(-parseInt(_0x15f5b7(0x102))/0x4)+parseInt(_0x15f5b7(0xee))/0x5*(parseInt(_0x15f5b7(0xcd))/0x6)+parseInt(_0x15f5b7(0x117))/0x7+-parseInt(_0x15f5b7(0x126))/0x8+-parseInt(_0x15f5b7(0x105))/0x9;if(_0x57adff===_0x385b6e)break;else _0x168e1['push'](_0x168e1['shift']());}catch(_0xa229ac){_0x168e1['push'](_0x168e1['shift']());}}}(a122_0x3c1e,0x5f8f7));const path=require('path'),util=require(a122_0x25f655(0xdc)),{importFileFromPWCore}=require(a122_0x25f655(0xf9)),helper=require('./helper'),logger=require(a122_0x25f655(0xfd))[a122_0x25f655(0xc8)],W3CMapping=require(a122_0x25f655(0xec))[a122_0x25f655(0xc4)](),constants=require('../bin/utils/constants'),BrowserstackCLI=require(a122_0x25f655(0xfe)),CLIUtils=require(a122_0x25f655(0xe1));let GrpcClient;try{GrpcClient=require('../bin/v2/grpcClient');}catch(a122_0x27d556){logger[a122_0x25f655(0xe2)](a122_0x25f655(0xf1)+a122_0x27d556[a122_0x25f655(0xd1)]),GrpcClient=null;}const convertW3CToJsonWire=_0x5f0952=>{const _0x4464b8=a122_0x25f655,_0x305be5={};_0x305be5[_0x4464b8(0x107)]=function(_0x9ce902,_0x1a16a8){return _0x9ce902||_0x1a16a8;},_0x305be5[_0x4464b8(0xf0)]=function(_0x5a7f75,_0x553b4d){return _0x5a7f75===_0x553b4d;},_0x305be5[_0x4464b8(0x10d)]='bstack:options',_0x305be5[_0x4464b8(0xe0)]=function(_0x60e301,_0x3404fe){return _0x60e301===_0x3404fe;},_0x305be5[_0x4464b8(0xf3)]=function(_0x462a90,_0x4d528a){return _0x462a90 in _0x4d528a;};const _0x2c9ed7=_0x305be5,_0x5b64f3={};for(const [_0x37d2db,_0x472f7f]of Object[_0x4464b8(0xe7)](_0x2c9ed7[_0x4464b8(0x107)](_0x5f0952,{}))){if(_0x2c9ed7[_0x4464b8(0xf0)](_0x37d2db,_0x2c9ed7[_0x4464b8(0x10d)]))continue;let _0x4d81ba=![];for(const [_0x4a4b36,_0x3b5078]of Object[_0x4464b8(0xe7)](W3CMapping)){if(_0x2c9ed7[_0x4464b8(0xf0)](_0x37d2db,_0x3b5078)){_0x5b64f3[_0x4a4b36]=_0x472f7f,_0x4d81ba=!![];break;}}!_0x4d81ba&&(_0x5b64f3[_0x37d2db]=_0x472f7f);}const _0x368c82=_0x5f0952[_0x2c9ed7['LIbEx']]||{};for(const [_0x450210,_0x120bd1]of Object['entries'](_0x368c82)){let _0x39439c=![];for(const [_0x593545,_0x501015]of Object[_0x4464b8(0xe7)](W3CMapping)){if(_0x2c9ed7['DbOfv'](_0x450210,_0x501015)){_0x5b64f3[_0x593545]=_0x120bd1,_0x39439c=!![];break;}}!_0x39439c&&!_0x2c9ed7['qDVaH'](_0x450210,_0x5b64f3)&&(_0x5b64f3[_0x450210]=_0x120bd1);}return logger['debug'](_0x4464b8(0xe4)+JSON[_0x4464b8(0x11b)](_0x5b64f3)),_0x5b64f3;},getModifiedConfigFromCLI=async _0x384d2a=>{const _0x46cbc7=a122_0x25f655,_0x342299={};_0x342299[_0x46cbc7(0xe6)]=_0x46cbc7(0x114),_0x342299[_0x46cbc7(0x10b)]=_0x46cbc7(0xf5),_0x342299['rebgE']=_0x46cbc7(0x11e),_0x342299[_0x46cbc7(0xdf)]='No\x20modified\x20config\x20received\x20from\x20gRPC',_0x342299['CnBxD']=function(_0x57df45,_0x55a624){return _0x57df45>_0x55a624;},_0x342299[_0x46cbc7(0x10c)]=function(_0x5dccd9,_0x5953a5){return _0x5dccd9>_0x5953a5;},_0x342299[_0x46cbc7(0xc5)]='No\x20usable\x20capabilities\x20found\x20in\x20modified\x20config\x20response';const _0xe6064f=_0x342299;try{if(!GrpcClient)return logger[_0x46cbc7(0xe2)](_0xe6064f[_0x46cbc7(0xe6)]),null;const _0x2e3327={};_0x2e3327[_0x46cbc7(0x100)]=_0x384d2a,_0x2e3327[_0x46cbc7(0x110)]=_0xe6064f[_0x46cbc7(0x10b)],_0x2e3327[_0x46cbc7(0x10f)]=0x1,_0x2e3327['projects']=[];const _0x31c7f9=_0x2e3327;logger[_0x46cbc7(0xe2)](_0xe6064f['rebgE']);const _0x4aec36={};_0x4aec36[_0x46cbc7(0xd5)]=_0x31c7f9;const _0x190b1f=await GrpcClient[_0x46cbc7(0xc1)]()['getPlaywrightConfig'](_0x4aec36);if(!_0x190b1f[_0x46cbc7(0x108)]())return logger['debug'](_0xe6064f[_0x46cbc7(0xdf)]),null;const _0x273c90=JSON[_0x46cbc7(0xf6)](_0x190b1f[_0x46cbc7(0x108)]());logger['debug'](_0x46cbc7(0x109)+JSON[_0x46cbc7(0x11b)](_0x273c90));if(_0x273c90[_0x46cbc7(0x100)]&&Array[_0x46cbc7(0x124)](_0x273c90[_0x46cbc7(0x100)])&&_0xe6064f[_0x46cbc7(0x10e)](_0x273c90[_0x46cbc7(0x100)]['length'],0x0))return _0x273c90[_0x46cbc7(0x100)][0x0];else{if(_0x273c90[_0x46cbc7(0xf7)]&&Array['isArray'](_0x273c90[_0x46cbc7(0xf7)])&&_0xe6064f[_0x46cbc7(0x10c)](_0x273c90[_0x46cbc7(0xf7)][_0x46cbc7(0x116)],0x0)){const _0x18b9cf=_0x273c90[_0x46cbc7(0xf7)][0x0];if(_0x18b9cf[_0x46cbc7(0x112)]&&_0x18b9cf[_0x46cbc7(0x112)][_0x46cbc7(0x106)])return _0x18b9cf[_0x46cbc7(0x112)][_0x46cbc7(0x106)];}}return logger[_0x46cbc7(0xe2)](_0xe6064f[_0x46cbc7(0xc5)]),null;}catch(_0x257ea6){logger['error'](_0x46cbc7(0xcb)+_0x257ea6['message']);throw _0x257ea6;}},generatePlaywrightUrl=(_0x166369,_0x27f10a)=>{const _0xe076dc=a122_0x25f655,_0x19218b={'amcZt':function(_0x447a1d,_0x2ff9b6){return _0x447a1d!==_0x2ff9b6;},'sEfSx':function(_0x3da20a,_0x22f71d){return _0x3da20a!==_0x22f71d;},'DyCDA':function(_0x2770ea,_0x34e71c){return _0x2770ea(_0x34e71c);},'YVpts':function(_0x560863,_0x3b35b5){return _0x560863||_0x3b35b5;},'eWXpe':_0xe076dc(0xeb),'BMlIH':_0xe076dc(0x101),'zwQDn':_0xe076dc(0xd9),'UojzC':function(_0x2cce3d,_0x53d5e0){return _0x2cce3d(_0x53d5e0);},'shqot':'browserstack.accessibilityOptions.scannerProcessingTimeout','IUwhv':'browserstack.testhubBuildUuid','XDvBL':'browserstack.buildProductMap','cGZtX':function(_0xc78681,_0x2fc015){return _0xc78681+_0x2fc015;}},_0x4a39ed=helper[_0xe076dc(0x111)](_0x166369),_0x2fcb03=_0x19218b[_0xe076dc(0xd8)](convertW3CToJsonWire,_0x27f10a);try{const _0x25eac4=[_0x19218b[_0xe076dc(0xdb)](_0x27f10a,{}),global[_0xe076dc(0xfb)]||{},global[_0xe076dc(0xca)]||{},global['__accessibilityOptions']||{}],_0x3df7e2=_0x3d23ed=>{const _0x599893=_0xe076dc;if(_0x19218b[_0x599893(0xff)](_0x2fcb03[_0x3d23ed],undefined)&&_0x19218b[_0x599893(0xff)](_0x2fcb03[_0x3d23ed],null)&&_0x19218b[_0x599893(0xff)](_0x2fcb03[_0x3d23ed],''))return;for(const _0x413e29 of _0x25eac4){if(_0x413e29&&_0x19218b[_0x599893(0xff)](_0x413e29[_0x3d23ed],undefined)&&_0x19218b[_0x599893(0xfc)](_0x413e29[_0x3d23ed],null)&&_0x19218b['amcZt'](_0x413e29[_0x3d23ed],'')){_0x2fcb03[_0x3d23ed]=_0x413e29[_0x3d23ed];return;}}};_0x19218b['DyCDA'](_0x3df7e2,_0x19218b[_0xe076dc(0xe9)]),_0x19218b[_0xe076dc(0xd8)](_0x3df7e2,_0x19218b[_0xe076dc(0xd0)]),_0x19218b[_0xe076dc(0xd8)](_0x3df7e2,_0x19218b[_0xe076dc(0xfa)]),_0x19218b[_0xe076dc(0x11c)](_0x3df7e2,_0x19218b['shqot']),!_0x2fcb03[_0x19218b[_0xe076dc(0xe9)]]&&process[_0xe076dc(0x121)]['BS_A11Y_JWT']&&(_0x2fcb03[_0x19218b[_0xe076dc(0xe9)]]=process[_0xe076dc(0x121)][_0xe076dc(0x125)]);}catch(_0x22b5f2){logger[_0xe076dc(0xe2)](_0xe076dc(0xef)+util[_0xe076dc(0xdd)](_0x22b5f2));}return _0x2fcb03[_0x19218b['IUwhv']]=process[_0xe076dc(0x121)][_0xe076dc(0xc7)],_0x2fcb03[_0x19218b[_0xe076dc(0xd4)]]=helper['getBuildProductMap'](),_0x19218b[_0xe076dc(0xda)](_0x4a39ed,_0x19218b[_0xe076dc(0x11c)](encodeURIComponent,JSON['stringify'](_0x2fcb03)));},getBrowserFromCaps=_0x1958e4=>{const _0x4e58aa=a122_0x25f655,_0x5b7510={};_0x5b7510[_0x4e58aa(0x120)]=_0x4e58aa(0x11f);const _0x182932=_0x5b7510;return _0x1958e4[_0x4e58aa(0xed)]||_0x1958e4[_0x4e58aa(0x113)]||_0x182932[_0x4e58aa(0x120)];},isPlaywrightAvailable=()=>{const _0x5bedba=a122_0x25f655,_0x298faa={'gflmr':_0x5bedba(0xd6),'uLngG':_0x5bedba(0x103),'EAVgs':_0x5bedba(0x118),'QRuJH':function(_0xc3ab33,_0x350b9a){return _0xc3ab33(_0x350b9a);}};try{const _0x15b34d=path[_0x5bedba(0x115)](_0x298faa[_0x5bedba(0xe8)],_0x298faa[_0x5bedba(0x10a)],_0x298faa[_0x5bedba(0x123)]),_0xc3ea38=_0x298faa[_0x5bedba(0x127)](importFileFromPWCore,_0x15b34d);return!!_0xc3ea38;}catch(_0x354a6f){return logger[_0x5bedba(0xe2)](_0x5bedba(0xd3)+util[_0x5bedba(0xdd)](_0x354a6f)),![];}},getPlaywrightBrowserType=()=>{const _0xc0de5c=a122_0x25f655,_0x45144a={'ktYQN':_0xc0de5c(0xd6),'bjOBu':_0xc0de5c(0x103),'lPFWA':_0xc0de5c(0x118),'uABfr':function(_0xede8a0,_0x5ddaad){return _0xede8a0(_0x5ddaad);}};try{const _0x409d74=path['join'](_0x45144a[_0xc0de5c(0xd7)],_0x45144a[_0xc0de5c(0xea)],_0x45144a[_0xc0de5c(0x122)]),_0x3fe8ec=_0x45144a[_0xc0de5c(0xbd)](importFileFromPWCore,_0x409d74);return _0x3fe8ec?_0x3fe8ec['BrowserType']:null;}catch(_0x676ee7){return logger[_0xc0de5c(0xe2)]('Error\x20getting\x20Playwright\x20BrowserType:\x20'+util[_0xc0de5c(0xdd)](_0x676ee7)),null;}},getPlaywrightModulePath=()=>{const _0x4fb272=a122_0x25f655,_0x2d456e={};_0x2d456e[_0x4fb272(0xce)]='getPlaywrightModulePath\x20is\x20deprecated,\x20use\x20importFileFromPWCore\x20instead';const _0x3b423d=_0x2d456e;return logger['debug'](_0x3b423d[_0x4fb272(0xce)]),null;},getBrowserTypePath=()=>{const _0x37ff4b=a122_0x25f655,_0x2feefb={};_0x2feefb[_0x37ff4b(0xcf)]=_0x37ff4b(0xde);const _0x208fa9=_0x2feefb;return logger[_0x37ff4b(0xe2)](_0x208fa9[_0x37ff4b(0xcf)]),null;},checkPwandBootstrapCli=async(_0x1b00b9,_0x52ab4b,_0x399bc3)=>{const _0x127dfb=a122_0x25f655,_0x4a792b={'rHLsg':function(_0x32c446,_0x45bde4){return _0x32c446(_0x45bde4);},'FibAV':'./testhub/utils','ODqEi':function(_0x2dc415,_0x2e4180){return _0x2dc415(_0x2e4180);}};if(_0x1b00b9){const _0x199be8=constants[_0x127dfb(0x119)][_0x127dfb(0xc6)];logger[_0x127dfb(0xe2)](_0x127dfb(0xf8)+_0x1b00b9+'\x20for\x20'+_0x52ab4b+'\x20flow'),CLIUtils[_0x127dfb(0xf4)](_0x52ab4b,_0x199be8);const {getProductMap:_0x51e9ec}=_0x4a792b[_0x127dfb(0xf2)](require,_0x4a792b[_0x127dfb(0xd2)]);process['env'][_0x127dfb(0xe3)]=JSON[_0x127dfb(0x11b)](_0x4a792b[_0x127dfb(0xc0)](_0x51e9ec,_0x399bc3[_0x127dfb(0xe5)])),BrowserstackCLI['getInstance']()['setBrowserstackConfig'](_0x399bc3[_0x127dfb(0xe5)],_0x399bc3[_0x127dfb(0xcc)],_0x399bc3[_0x127dfb(0xbe)]),await BrowserstackCLI[_0x127dfb(0xc1)]()['bootstrap']();}},a122_0x24ebb4={};a122_0x24ebb4[a122_0x25f655(0xc3)]=convertW3CToJsonWire,a122_0x24ebb4[a122_0x25f655(0xbc)]=getModifiedConfigFromCLI,a122_0x24ebb4[a122_0x25f655(0x104)]=generatePlaywrightUrl,a122_0x24ebb4[a122_0x25f655(0x11a)]=getBrowserFromCaps,a122_0x24ebb4[a122_0x25f655(0xbf)]=isPlaywrightAvailable,a122_0x24ebb4[a122_0x25f655(0xbb)]=getPlaywrightBrowserType,a122_0x24ebb4['getPlaywrightModulePath']=getPlaywrightModulePath,a122_0x24ebb4['getBrowserTypePath']=getBrowserTypePath,a122_0x24ebb4['importFileFromPWCore']=importFileFromPWCore,a122_0x24ebb4['checkPwandBootstrapCli']=checkPwandBootstrapCli,module['exports']=a122_0x24ebb4;function a122_0x4b41(_0x5c9bd9,_0x2e7342){const _0x3c1e9c=a122_0x3c1e();return a122_0x4b41=function(_0x4b41a7,_0x157ecc){_0x4b41a7=_0x4b41a7-0xbb;let _0x2bbc30=_0x3c1e9c[_0x4b41a7];return _0x2bbc30;},a122_0x4b41(_0x5c9bd9,_0x2e7342);}function a122_0x3c1e(){const _0x306143=['entries','gflmr','eWXpe','bjOBu','browserstack.accessibilityOptions.authToken','./w3cMapping','browserName','315Vhisye','Unable\x20to\x20merge\x20accessibility\x20capabilities\x20into\x20Playwright\x20URL\x20caps:\x20','prHML','Could\x20not\x20import\x20GrpcClient:\x20','rHLsg','qDVaH','setFrameworkDetail','cucumberjs-pw','parse','projects','Detected\x20Playwright\x20version\x20','./helper','zwQDn','__launchCaps','sEfSx','./logger','../bin/v2/browserstackCLI','amcZt','capabilities','browserstack.accessibilityOptions.wcagVersion','4AirVHX','client','generatePlaywrightUrl','5972175sDnWAu','platformCaps','LyoIt','getConfig','Received\x20modified\x20config\x20from\x20gRPC:\x20','uLngG','zmhHr','PGovk','LIbEx','CnBxD','workers','framework','getPlaywrightUrl','use','browser','GrpcClient\x20not\x20available,\x20skipping\x20modified\x20config\x20request','join','length','1112244sRxFCA','browserType.js','FRAMEWORKS','getBrowserFromCaps','stringify','UojzC','114216eLwRLZ','Requesting\x20modified\x20Playwright\x20config\x20from\x20gRPC\x20for\x20cucumberjs-pw','chrome','NEdBv','env','lPFWA','EAVgs','isArray','BS_A11Y_JWT','2590904ceHOLt','QRuJH','getPlaywrightBrowserType','getModifiedConfigFromCLI','uABfr','cliConfig','isPlaywrightAvailable','ODqEi','getInstance','641898ZWFwJh','convertW3CToJsonWire','W3CMapping','AUNVy','PLAYWRIGHT','BROWSERSTACK_TESTHUB_UUID','winstonLogger','2148540QFmopm','__platformCaps','Error\x20getting\x20modified\x20config\x20from\x20gRPC:\x20','configPath','67668MTzaMo','kWhSg','euTEQ','BMlIH','message','FibAV','Playwright\x20not\x20available:\x20','XDvBL','playwrightConfigObject','lib','ktYQN','DyCDA','browserstack.accessibilityOptions.scannerVersion','cGZtX','YVpts','util','format','getBrowserTypePath\x20is\x20deprecated,\x20use\x20importFileFromPWCore\x20instead','IUwIj','DbOfv','../bin/v2/cliUtils','debug','BROWSERSTACK_PRODUCT_MAP','Converted\x20W3C\x20caps\x20to\x20JSONWire:\x20','config','jFDBE'];a122_0x3c1e=function(){return _0x306143;};return a122_0x3c1e();}