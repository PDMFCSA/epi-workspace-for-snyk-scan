const a98_0xabdda4=a98_0x121c;(function(_0x2878f0,_0x5c52ee){const _0x536584=a98_0x121c,_0x27a1e9=_0x2878f0();while(!![]){try{const _0x1c17d3=parseInt(_0x536584(0xf9))/0x1+-parseInt(_0x536584(0x11e))/0x2*(parseInt(_0x536584(0x10c))/0x3)+-parseInt(_0x536584(0x121))/0x4*(parseInt(_0x536584(0x163))/0x5)+parseInt(_0x536584(0x109))/0x6*(-parseInt(_0x536584(0x151))/0x7)+-parseInt(_0x536584(0x11a))/0x8*(-parseInt(_0x536584(0x13f))/0x9)+-parseInt(_0x536584(0x146))/0xa+-parseInt(_0x536584(0x157))/0xb*(-parseInt(_0x536584(0xf6))/0xc);if(_0x1c17d3===_0x5c52ee)break;else _0x27a1e9['push'](_0x27a1e9['shift']());}catch(_0x4965b0){_0x27a1e9['push'](_0x27a1e9['shift']());}}}(a98_0x21e6,0x2f096));function a98_0x121c(_0x21dd86,_0x57e51d){const _0x21e6e6=a98_0x21e6();return a98_0x121c=function(_0x121cc3,_0x1e6f22){_0x121cc3=_0x121cc3-0xf5;let _0x453c35=_0x21e6e6[_0x121cc3];return _0x453c35;},a98_0x121c(_0x21dd86,_0x57e51d);}const path=require('path'),{commandRepository}=require(a98_0xabdda4(0x16c)),constants=require(a98_0xabdda4(0x116)),logger=require('../logger')[a98_0xabdda4(0x144)],globals=require(a98_0xabdda4(0x16a)),timeoutPromise=require(a98_0xabdda4(0x15b)),isUndefinedOrNull=_0x5ed766=>_0x5ed766===undefined||_0x5ed766===null||_0x5ed766==='',isNotUndefinedOrNull=_0x4a7bea=>!isUndefinedOrNull(_0x4a7bea),isString=_0x35ce48=>isNotUndefinedOrNull(_0x35ce48)&&typeof _0x35ce48===a98_0xabdda4(0x161);class AiSdkWrapper{constructor(){const _0x474c73=a98_0xabdda4,_0x5497ce={'zRgVc':function(_0x4ea24b,_0xf7d1be){return _0x4ea24b(_0xf7d1be);},'unEqI':_0x474c73(0xfb)};this[_0x474c73(0x14e)]=undefined;try{this[_0x474c73(0x14e)]=_0x5497ce[_0x474c73(0x149)](require,path[_0x474c73(0x10f)](__dirname,_0x5497ce[_0x474c73(0x11b)]));}catch(_0x577599){logger[_0x474c73(0x107)](_0x474c73(0x13a)+(_0x577599&&_0x577599[_0x474c73(0x122)]?_0x577599[_0x474c73(0x122)]:''));}}[a98_0xabdda4(0x16f)](_0x16202d){const _0x3de28b=a98_0xabdda4,_0x1c8f55={};_0x1c8f55[_0x3de28b(0x166)]=_0x3de28b(0x102),_0x1c8f55[_0x3de28b(0x106)]=function(_0x4872c9,_0x1b60b3){return _0x4872c9===_0x1b60b3;},_0x1c8f55[_0x3de28b(0x167)]=_0x3de28b(0x11f),_0x1c8f55['uDuvX']=function(_0x33b40d,_0x294a82){return _0x33b40d===_0x294a82;},_0x1c8f55['tvlWc']=_0x3de28b(0x12c),_0x1c8f55[_0x3de28b(0x12a)]=function(_0x5ad4c7,_0x3955aa){return _0x5ad4c7===_0x3955aa;},_0x1c8f55[_0x3de28b(0x113)]='safari',_0x1c8f55['umfmQ']=function(_0x13449a,_0x3bb605){return _0x13449a===_0x3bb605;},_0x1c8f55[_0x3de28b(0x10d)]=_0x3de28b(0x129),_0x1c8f55[_0x3de28b(0x143)]=function(_0x20c84e,_0x2562c3){return _0x20c84e===_0x2562c3;},_0x1c8f55[_0x3de28b(0x12f)]=_0x3de28b(0x11d);const _0x5dcb8c=_0x1c8f55;try{const _0x292cd2=this[_0x3de28b(0x14e)]['initializeCapabilities'](Object[_0x3de28b(0x175)](_0x16202d[_0x3de28b(0x11c)]()[_0x3de28b(0x120)]));console[_0x3de28b(0x123)](_0x5dcb8c['lWlba'],_0x292cd2);if(_0x5dcb8c[_0x3de28b(0x106)](_0x292cd2?.['browserName']?.['toLowerCase'](),_0x5dcb8c['ezFub']))_0x16202d[_0x3de28b(0x117)]=_0x292cd2;else{if(_0x5dcb8c[_0x3de28b(0x119)](_0x292cd2?.[_0x3de28b(0x12e)]?.[_0x3de28b(0xf7)](),_0x5dcb8c[_0x3de28b(0x126)]))_0x16202d[_0x3de28b(0x105)]=_0x292cd2;else{if(_0x5dcb8c['MKVok'](_0x292cd2?.[_0x3de28b(0x12e)]?.['toLowerCase'](),_0x5dcb8c[_0x3de28b(0x113)]))_0x16202d['safariOptions_']=_0x292cd2;else{if(_0x5dcb8c[_0x3de28b(0x16d)](_0x292cd2?.['browserName']?.[_0x3de28b(0xf7)](),_0x5dcb8c['ueVVS'])||_0x5dcb8c[_0x3de28b(0x143)](_0x292cd2?.[_0x3de28b(0x12e)]?.['toLowerCase'](),_0x5dcb8c['NKUju']))_0x16202d[_0x3de28b(0x118)]=_0x292cd2;else _0x5dcb8c['umfmQ'](_0x292cd2?.[_0x3de28b(0x12e)]?.['toLowerCase'](),'ie')&&(_0x16202d[_0x3de28b(0xfd)]=_0x292cd2);}}}Object[_0x3de28b(0x15c)](_0x292cd2)[_0x3de28b(0x16e)](_0x2d289d=>{const _0x267caa=_0x3de28b,_0x528abd=_0x16202d[_0x267caa(0x140)][_0x267caa(0x114)](_0x2d289d);_0x16202d['capabilities_']['set'](_0x2d289d,_0x292cd2[_0x2d289d]);});}catch(_0x1235a1){logger[_0x3de28b(0x107)](_0x3de28b(0x13d)+(_0x1235a1&&_0x1235a1[_0x3de28b(0x122)]?_0x1235a1[_0x3de28b(0x122)]:''));}}async['setTcgToken'](_0x5a5ca8){const _0x5defde=a98_0xabdda4,_0x466a2b={'UhUnm':function(_0x31ff3e,_0x18bf5f,_0x5251e2,_0x175f70,_0x57b8af,_0x599002,_0xc878a7){return _0x31ff3e(_0x18bf5f,_0x5251e2,_0x175f70,_0x57b8af,_0x599002,_0xc878a7);},'AdKkm':'BrowserstackHealing.setToken\x20method\x20timed\x20out','bPzNO':_0x5defde(0x141),'bQTHm':_0x5defde(0x110)},_0x1a1c1c=new Date(),_0x3cdec2=_0x466a2b[_0x5defde(0x101)](timeoutPromise,constants[_0x5defde(0x135)],_0x466a2b['AdKkm'],_0x466a2b[_0x5defde(0x112)],_0x1a1c1c,this[_0x5defde(0x100)],this[_0x5defde(0x14f)]);await Promise[_0x5defde(0x15d)]([this[_0x5defde(0x14e)][_0x5defde(0x172)](_0x5a5ca8,globals[_0x5defde(0x147)](_0x466a2b[_0x5defde(0x158)]),constants[_0x5defde(0x137)])[_0x5defde(0x14c)](()=>{_0x3cdec2['cancel']();}),_0x3cdec2]);}async[a98_0xabdda4(0x133)](_0x48111d,_0x5ba04d,_0x39493f,_0x54433f){const _0x1b4a47=a98_0xabdda4,_0x19ec71={'ZbPGt':function(_0x197a32,_0x3dad82){return _0x197a32===_0x3dad82;},'dkbYA':function(_0x49aca8,_0x145ed8){return _0x49aca8===_0x145ed8;},'DMziI':function(_0x4cab18,_0x1102b9){return _0x4cab18(_0x1102b9);},'ZrBhC':function(_0x34dd8b,_0x213808){return _0x34dd8b(_0x213808);},'PMwwM':function(_0x56641e,_0x25e1d4){return _0x56641e(_0x25e1d4);},'GTfVG':function(_0x3098fb,_0x578173){return _0x3098fb(_0x578173);},'mzvFD':function(_0x284016,_0x48c784){return _0x284016(_0x48c784);},'bVRoV':_0x1b4a47(0xf5),'RyPBX':'aiHeal_userId','atxzH':'aiHeal_groupId','FRWeQ':_0x1b4a47(0x155),'NfIDo':function(_0x1b2e09,_0x4485aa,_0x36b3c4,_0x1d0add,_0x144cd4,_0x22a259,_0x1bf6ff){return _0x1b2e09(_0x4485aa,_0x36b3c4,_0x1d0add,_0x144cd4,_0x22a259,_0x1bf6ff);},'NsAzh':_0x1b4a47(0x15a),'rwmZN':_0x1b4a47(0x10b),'ALxyq':_0x1b4a47(0x150),'dAlwj':_0x1b4a47(0x124)},_0xa6ea71=(await _0x5ba04d[_0x1b4a47(0x174)]())[_0x1b4a47(0x164)]();let _0x38424a='';if(commandRepository['isSelfHealEnabled']()&&_0x19ec71[_0x1b4a47(0x127)](_0x54433f,![])||_0x19ec71[_0x1b4a47(0x10a)](_0x54433f,!![])){const _0x22ec2e=_0x19ec71['DMziI'](isNotUndefinedOrNull,_0x39493f[_0x1b4a47(0x14b)]['using'])&&_0x19ec71['DMziI'](isString,_0x39493f[_0x1b4a47(0x14b)]['using'])?_0x39493f[_0x1b4a47(0x14b)][_0x1b4a47(0x125)][_0x1b4a47(0x13b)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'',_0x52451d=_0x19ec71[_0x1b4a47(0x10e)](isNotUndefinedOrNull,_0x39493f[_0x1b4a47(0x14b)][_0x1b4a47(0x125)])&&_0x19ec71[_0x1b4a47(0x10e)](isString,_0x39493f[_0x1b4a47(0x14b)][_0x1b4a47(0xff)])?_0x39493f[_0x1b4a47(0x14b)]['value']['replace'](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'',_0x2d5c98=_0x19ec71['ZrBhC'](isNotUndefinedOrNull,commandRepository['getProjectName']())&&_0x19ec71[_0x1b4a47(0x10e)](isString,commandRepository[_0x1b4a47(0x130)]())?commandRepository[_0x1b4a47(0x130)]()['replace'](/'/g,'\x5c\x27')[_0x1b4a47(0x13b)](/"/g,'\x5c\x22'):'';let _0x45769f=_0x19ec71[_0x1b4a47(0x10e)](isNotUndefinedOrNull,global['browserstackSessionName'])&&_0x19ec71[_0x1b4a47(0x148)](isString,global[_0x1b4a47(0x156)])?global['browserstackSessionName'][_0x1b4a47(0x13b)](/'/g,'\x5c\x27')[_0x1b4a47(0x13b)](/"/g,'\x5c\x22'):'';!_0x45769f&&(_0x45769f=_0x19ec71[_0x1b4a47(0x168)](isNotUndefinedOrNull,commandRepository[_0x1b4a47(0x15e)]())&&_0x19ec71[_0x1b4a47(0xfa)](isString,commandRepository[_0x1b4a47(0x15e)]())?commandRepository[_0x1b4a47(0x15e)]()[_0x1b4a47(0x13b)](/'/g,'\x5c\x27')[_0x1b4a47(0x13b)](/"/g,'\x5c\x22'):'');let _0x4b8830='{\x22region\x22:\x20\x22'+constants[_0x1b4a47(0x176)]+_0x1b4a47(0x111)+constants[_0x1b4a47(0x176)]+_0x1b4a47(0x13e)+constants[_0x1b4a47(0x137)][_0x1b4a47(0x108)](_0x19ec71[_0x1b4a47(0x115)])[0x1]+_0x1b4a47(0x173);_0x4b8830=_0x19ec71[_0x1b4a47(0x148)](isNotUndefinedOrNull,_0x4b8830)&&_0x19ec71[_0x1b4a47(0x10e)](isString,_0x4b8830)?_0x4b8830[_0x1b4a47(0x13b)](/'/g,'\x5c\x27')[_0x1b4a47(0x13b)](/"/g,'\x5c\x22'):'';const _0x2cc2a2=commandRepository[_0x1b4a47(0x128)](_0xa6ea71),_0x323f6e=globals['getGlobal'](_0x19ec71[_0x1b4a47(0xf8)]),_0x5a6a5f=globals[_0x1b4a47(0x147)](_0x19ec71['atxzH']),_0x4f19d7=globals[_0x1b4a47(0x147)](_0x19ec71[_0x1b4a47(0x14a)]),_0x3d3113=![],_0x3a7e64=new Date();if(_0x54433f){const _0x11f1f1=_0x19ec71['NfIDo'](timeoutPromise,constants['HEALING_LOG_DATA_TIMEOUT'],_0x19ec71[_0x1b4a47(0x16b)],_0x19ec71[_0x1b4a47(0x12b)],_0x3a7e64,this[_0x1b4a47(0x100)],this[_0x1b4a47(0x14f)]);_0x38424a=await Promise[_0x1b4a47(0x15d)]([this[_0x1b4a47(0x14e)][_0x1b4a47(0x14d)](_0x22ec2e,_0x52451d,_0x2d5c98,_0x45769f,_0x5a6a5f,_0xa6ea71,_0x2cc2a2,_0x4b8830)[_0x1b4a47(0x14c)](_0xbde645=>{const _0x428433=_0x1b4a47;return _0x11f1f1[_0x428433(0x152)](),_0xbde645;}),_0x11f1f1]);}else{if(commandRepository[_0x1b4a47(0x131)]()){const _0x3d68cb=_0x19ec71[_0x1b4a47(0x13c)](timeoutPromise,constants[_0x1b4a47(0x165)],_0x19ec71[_0x1b4a47(0x139)],_0x19ec71[_0x1b4a47(0x145)],_0x3a7e64,this[_0x1b4a47(0x100)],this[_0x1b4a47(0x14f)]);_0x38424a=await Promise[_0x1b4a47(0x15d)]([this[_0x1b4a47(0x14e)][_0x1b4a47(0x138)](_0x22ec2e,_0x52451d,_0x2d5c98,_0x45769f,_0x323f6e,_0x5a6a5f,_0xa6ea71,_0x2cc2a2,_0x3d3113,_0x4f19d7,_0x4b8830)['then'](_0x182444=>{const _0x4424cf=_0x1b4a47;return _0x3d68cb[_0x4424cf(0x152)](),_0x182444;}),_0x3d68cb]);}}_0x38424a&&await _0x5ba04d[_0x1b4a47(0x15f)](_0x38424a);}}async[a98_0xabdda4(0x169)](_0x2f44ab,_0x5400db,_0x391d83){const _0x93c08e=a98_0xabdda4;try{await this[_0x93c08e(0x133)](_0x2f44ab,_0x5400db,_0x391d83,!![]);}catch(_0xbf0aa6){return logger['error']('Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20'+(_0xbf0aa6&&_0xbf0aa6[_0x93c08e(0x122)]?_0xbf0aa6[_0x93c08e(0x122)]:'')),![];}return!![];}async[a98_0xabdda4(0xfc)](_0x247c73,_0x13bc15,_0x4b03ef){const _0x3d3762=a98_0xabdda4,_0x2c1f6b={'UQVRn':function(_0xd094a2,_0x54d49b,_0x3df09,_0xb621b3,_0x253cb0,_0x3d4ba5,_0xbaa37e){return _0xd094a2(_0x54d49b,_0x3df09,_0xb621b3,_0x253cb0,_0x3d4ba5,_0xbaa37e);},'pqALD':'BrowserstackHealing.pollResult\x20method\x20timed\x20out','FxmSf':_0x3d3762(0x103),'PBefc':_0x3d3762(0x110)};try{await this[_0x3d3762(0x133)](_0x247c73,_0x13bc15,_0x4b03ef,![]);const _0x5e44be=(await _0x13bc15[_0x3d3762(0x174)]())['getId'](),_0x3ea369=new Date(),_0x9d0ec6=_0x2c1f6b[_0x3d3762(0x159)](timeoutPromise,constants['POLL_HEALING_RESULT_TIMEOUT'],_0x2c1f6b['pqALD'],_0x2c1f6b[_0x3d3762(0x132)],_0x3ea369,this[_0x3d3762(0x100)],this[_0x3d3762(0x14f)]),_0x39251f=await Promise['race']([this[_0x3d3762(0x14e)]['pollResult'](constants['TCG_URL'],_0x5e44be,globals[_0x3d3762(0x147)](_0x2c1f6b[_0x3d3762(0x170)]))[_0x3d3762(0x14c)](_0x3c29ec=>{return _0x9d0ec6['cancel'](),_0x3c29ec;}),_0x9d0ec6]);if(_0x39251f&&_0x39251f[_0x3d3762(0x153)]&&_0x39251f['value']){const _0x31f8dd={};return _0x31f8dd[_0x3d3762(0x142)]=_0x39251f['selector'],_0x31f8dd[_0x3d3762(0x12d)]=_0x39251f['value'],_0x31f8dd['aiHealing']=!![],_0x31f8dd;}const _0x46eafb={};return _0x46eafb[_0x3d3762(0x142)]=_0x4b03ef[_0x3d3762(0x14b)][_0x3d3762(0x125)],_0x46eafb[_0x3d3762(0x12d)]=_0x39251f['value'],_0x46eafb[_0x3d3762(0x162)]=!![],_0x46eafb;}catch(_0x21d278){return logger[_0x3d3762(0xfe)](_0x3d3762(0x160)+(_0x21d278&&_0x21d278[_0x3d3762(0x122)]?_0x21d278['message']:'')),logger[_0x3d3762(0x134)](_0x3d3762(0x136)+_0x4b03ef[_0x3d3762(0x104)]+'\x20command'),_0x4b03ef;}}}exports[a98_0xabdda4(0x171)]=Object[a98_0xabdda4(0x154)](new AiSdkWrapper());function a98_0x21e6(){const _0x420187=['firefox','locatorValue','browserName','NKUju','getProjectName','isSelfHealEnabled','FxmSf','_handleEvent','info','SET_TCG_TOKEN_TIMEOUT','Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20','TCG_URL','healFailure','ALxyq','Unable\x20to\x20load\x20healing\x20module,\x20error:\x20','replace','NfIDo','Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20','\x22:\x20{\x22endpoint\x22:\x20\x22','9cXRPPz','capabilities_','BrowserstackHealingSetTcgTokenFailed','locatorType','zHXXQ','winstonLogger','dAlwj','3059520ByvhWU','getGlobal','PMwwM','zRgVc','FRWeQ','parameters_','then','logData','BrowserstackHealing','framework','BrowserstackHealing.healFailure\x20method\x20timed\x20out','7XewQzF','cancel','selector','freeze','aiHeal_isGroupAIEnabled','browserstackSessionName','22FwlDJb','bQTHm','UQVRn','BrowserstackHealing.logData\x20method\x20timed\x20out','../../helpers/timeoutPromise','keys','race','getTestName','executeScript','Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20','string','aiHealing','445ANjIVk','getId','HEALING_FAILURE_TIMEOUT','lWlba','ezFub','GTfVG','handleSuccess','../globals','NsAzh','./autoHealHelper','umfmQ','forEach','initializeHealingCapabilities','PBefc','aiSdkWrapper','setToken','\x22}}}','getSession','fromEntries','TCG_REGION','s://','4890192RIHZNT','toLowerCase','RyPBX','117642OgWBJc','mzvFD','../../ai-sdk-node/bundle','handleFailure','ieOptions_','debug','value','config','UhUnm','newCapabilities','BrowserstackHealingPollResultFailed','name_','firefoxOptions_','NODPJ','error','split','1600686XZjLjd','dkbYA','BrowserstackHealingLogDataFailed','6tWvvXA','ueVVS','DMziI','join','aiHeal_sessionToken','\x22,\x20\x22tcgUrls\x22:\x20{\x22','bPzNO','bJfbg','get','bVRoV','../../bin/utils/constants','chromeOptions_','edgeOptions_','uDuvX','2978344TIyplR','unEqI','getCapabilities','microsoftedge','338966NguABs','chrome','map_','9016XujHRt','message','log','BrowserstackHealingHealFailureFailed','using','tvlWc','ZbPGt','getCommands','edge','MKVok','rwmZN'];a98_0x21e6=function(){return _0x420187;};return a98_0x21e6();}