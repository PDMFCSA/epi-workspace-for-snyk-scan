const a87_0x1be567=a87_0x5ba4;function a87_0x37fa(){const _0x170936=['keys','NBBPp','BrowserstackHealingHealFailureFailed','xAUfc','message','BrowserstackHealingSetTcgTokenFailed','1325064lhcpqE','uOUNp','locatorValue','setToken','../../bin/utils/constants','name_','capabilities_','gSWJf','BrowserstackHealing','HEALING_LOG_DATA_TIMEOUT','then','BrowserstackHealing.logData\x20method\x20timed\x20out','aiHeal_userId','48hMJLxo','Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20','TCG_REGION','parameters_','firefox','UhWay','QTIPJ','log','getId','isSelfHealEnabled','config','firefoxOptions_','\x22}}}','VMxbj','ieOptions_','Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20','framework','32870mWaLfh','getCommands','edgeOptions_','healFailure','aiHeal_sessionToken','oCjQY','path','error','BrowserstackHealingLogDataFailed','\x20command','freeze','47285FkQtOa','../globals','BrowserstackHealing.healFailure\x20method\x20timed\x20out','../../ai-sdk-node/bundle','debug','race','get','safari','pmkXr','getCapabilities','getGlobal','aiHealing','GNZYY','LzJup','logData','OONMT','75tDJoYL','using','UVdLn','rqcZp','browserName','initializeCapabilities','HEALING_FAILURE_TIMEOUT','fiWhl','split','getTestName','mflpD','../../helpers/timeoutPromise','info','aiHeal_groupId','Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20','safariOptions_','./autoHealHelper','value','SWfDO','initializeHealingCapabilities','QMMCb','2796192dVygLj','join','Mbzbq','11219988fEsWxl','handleSuccess','forEach','BVZme','XDjdK','toLowerCase','NMyme','tdhbP','TCG_URL','Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20','aiHeal_isGroupAIEnabled','set','cancel','Unable\x20to\x20load\x20healing\x20module,\x20error:\x20','BaYpT','chrome','fIfhS','browserstackSessionName','EpGsq','VQHvo','newCapabilities','map_','27IPeAMh','SET_TCG_TOKEN_TIMEOUT','454416jUjlvJ','Xasdq','aiSdkWrapper','executeScript','selector','locatorType','s://','fromEntries','string','10AyyeGK','getSession','_handleEvent','1535479HlZMVd','NuLaF','getProjectName','replace','33vZWrkr','setTcgToken'];a87_0x37fa=function(){return _0x170936;};return a87_0x37fa();}(function(_0x33693e,_0xb88295){const _0x521bdc=a87_0x5ba4,_0x3fe1e9=_0x33693e();while(!![]){try{const _0x5cde17=parseInt(_0x521bdc(0x1b9))/0x1*(-parseInt(_0x521bdc(0x15e))/0x2)+parseInt(_0x521bdc(0x18e))/0x3+parseInt(_0x521bdc(0x1a9))/0x4*(parseInt(_0x521bdc(0x179))/0x5)+-parseInt(_0x521bdc(0x1ce))/0x6*(-parseInt(_0x521bdc(0x169))/0x7)+-parseInt(_0x521bdc(0x1c1))/0x8*(parseInt(_0x521bdc(0x1a7))/0x9)+-parseInt(_0x521bdc(0x1b2))/0xa*(-parseInt(_0x521bdc(0x1b5))/0xb)+-parseInt(_0x521bdc(0x191))/0xc;if(_0x5cde17===_0xb88295)break;else _0x3fe1e9['push'](_0x3fe1e9['shift']());}catch(_0x5c3faa){_0x3fe1e9['push'](_0x3fe1e9['shift']());}}}(a87_0x37fa,0xd0dcc));const path=require(a87_0x1be567(0x164)),{commandRepository}=require(a87_0x1be567(0x189)),constants=require(a87_0x1be567(0x1c5)),logger=require('../logger')['winstonLogger'],globals=require(a87_0x1be567(0x16a)),timeoutPromise=require(a87_0x1be567(0x184)),isUndefinedOrNull=_0x3170e4=>_0x3170e4===undefined||_0x3170e4===null||_0x3170e4==='',isNotUndefinedOrNull=_0x2ba993=>!isUndefinedOrNull(_0x2ba993),isString=_0x3cc3a3=>isNotUndefinedOrNull(_0x3cc3a3)&&typeof _0x3cc3a3===a87_0x1be567(0x1b1);class AiSdkWrapper{constructor(){const _0x322fc0=a87_0x1be567,_0x400b33={'Jgkor':function(_0x28bd5b,_0x56d3e2){return _0x28bd5b(_0x56d3e2);},'WIXXV':_0x322fc0(0x16c)};this[_0x322fc0(0x1c9)]=undefined;try{this[_0x322fc0(0x1c9)]=_0x400b33['Jgkor'](require,path[_0x322fc0(0x18f)](__dirname,_0x400b33['WIXXV']));}catch(_0x1ae21f){logger[_0x322fc0(0x165)](_0x322fc0(0x19e)+(_0x1ae21f&&_0x1ae21f['message']?_0x1ae21f[_0x322fc0(0x1bf)]:''));}}[a87_0x1be567(0x18c)](_0x52241e){const _0x17d30a=a87_0x1be567,_0xcef84={};_0xcef84[_0x17d30a(0x1d3)]=_0x17d30a(0x1a5),_0xcef84['XDjdK']=function(_0x5f5a99,_0x4f760c){return _0x5f5a99===_0x4f760c;},_0xcef84[_0x17d30a(0x180)]=_0x17d30a(0x1a0),_0xcef84[_0x17d30a(0x163)]=_0x17d30a(0x1d2),_0xcef84['SWfDO']=_0x17d30a(0x170),_0xcef84['LzJup']=function(_0x4e267f,_0x58b3b8){return _0x4e267f===_0x58b3b8;},_0xcef84['uOUNp']='edge',_0xcef84[_0x17d30a(0x1be)]='microsoftedge';const _0x5399d0=_0xcef84;try{const _0x21286e=this[_0x17d30a(0x1c9)][_0x17d30a(0x17e)](Object[_0x17d30a(0x1b0)](_0x52241e[_0x17d30a(0x172)]()[_0x17d30a(0x1a6)]));console[_0x17d30a(0x1d5)](_0x5399d0[_0x17d30a(0x1d3)],_0x21286e);if(_0x5399d0[_0x17d30a(0x195)](_0x21286e?.[_0x17d30a(0x17d)]?.[_0x17d30a(0x196)](),_0x5399d0[_0x17d30a(0x180)]))_0x52241e['chromeOptions_']=_0x21286e;else{if(_0x5399d0[_0x17d30a(0x195)](_0x21286e?.[_0x17d30a(0x17d)]?.[_0x17d30a(0x196)](),_0x5399d0[_0x17d30a(0x163)]))_0x52241e[_0x17d30a(0x158)]=_0x21286e;else{if(_0x5399d0[_0x17d30a(0x195)](_0x21286e?.[_0x17d30a(0x17d)]?.[_0x17d30a(0x196)](),_0x5399d0[_0x17d30a(0x18b)]))_0x52241e[_0x17d30a(0x188)]=_0x21286e;else{if(_0x5399d0[_0x17d30a(0x176)](_0x21286e?.[_0x17d30a(0x17d)]?.[_0x17d30a(0x196)](),_0x5399d0[_0x17d30a(0x1c2)])||_0x5399d0[_0x17d30a(0x195)](_0x21286e?.[_0x17d30a(0x17d)]?.[_0x17d30a(0x196)](),_0x5399d0[_0x17d30a(0x1be)]))_0x52241e[_0x17d30a(0x160)]=_0x21286e;else _0x5399d0['XDjdK'](_0x21286e?.[_0x17d30a(0x17d)]?.[_0x17d30a(0x196)](),'ie')&&(_0x52241e[_0x17d30a(0x15b)]=_0x21286e);}}}Object[_0x17d30a(0x1bb)](_0x21286e)[_0x17d30a(0x193)](_0x1c2dcd=>{const _0x340662=_0x17d30a,_0x4dba6b=_0x52241e[_0x340662(0x1c7)][_0x340662(0x16f)](_0x1c2dcd);_0x52241e[_0x340662(0x1c7)][_0x340662(0x19c)](_0x1c2dcd,_0x21286e[_0x1c2dcd]);});}catch(_0x3e7e32){logger[_0x17d30a(0x165)](_0x17d30a(0x15c)+(_0x3e7e32&&_0x3e7e32[_0x17d30a(0x1bf)]?_0x3e7e32[_0x17d30a(0x1bf)]:''));}}async[a87_0x1be567(0x1ba)](_0x544a79){const _0x20301b=a87_0x1be567,_0x4e8ef1={'Xasdq':function(_0x423140,_0x34ced7,_0x275479,_0x28422f,_0x2f7bfe,_0xcc339b,_0x339569){return _0x423140(_0x34ced7,_0x275479,_0x28422f,_0x2f7bfe,_0xcc339b,_0x339569);},'QBgtZ':'BrowserstackHealing.setToken\x20method\x20timed\x20out','VMxbj':_0x20301b(0x1c0),'ekGkt':'aiHeal_sessionToken'},_0x51c8a9=new Date(),_0x50bf73=_0x4e8ef1[_0x20301b(0x1aa)](timeoutPromise,constants[_0x20301b(0x1a8)],_0x4e8ef1['QBgtZ'],_0x4e8ef1[_0x20301b(0x15a)],_0x51c8a9,this[_0x20301b(0x1d8)],this[_0x20301b(0x15d)]);await Promise[_0x20301b(0x16e)]([this[_0x20301b(0x1c9)][_0x20301b(0x1c4)](_0x544a79,globals[_0x20301b(0x173)](_0x4e8ef1['ekGkt']),constants[_0x20301b(0x199)])[_0x20301b(0x1cb)](()=>{_0x50bf73['cancel']();}),_0x50bf73]);}async[a87_0x1be567(0x1b4)](_0xf37c21,_0x5bf0a2,_0x27e156,_0x48733e){const _0x1d976b=a87_0x1be567,_0x3677e1={'gSWJf':function(_0x59fc10,_0x4f8db6){return _0x59fc10===_0x4f8db6;},'NBBPp':function(_0x3c71f9,_0x25a3c5){return _0x3c71f9===_0x25a3c5;},'BVZme':function(_0x58fdc6,_0xcc3597){return _0x58fdc6(_0xcc3597);},'GNZYY':function(_0x3d1c5b,_0x44e727){return _0x3d1c5b(_0x44e727);},'Mbzbq':function(_0x565460,_0x409f27){return _0x565460(_0x409f27);},'mflpD':function(_0x1f756c,_0x19d41d){return _0x1f756c(_0x19d41d);},'pmkXr':function(_0x6155aa,_0x206fa2){return _0x6155aa(_0x206fa2);},'pGhdU':_0x1d976b(0x1af),'fIfhS':function(_0x567063,_0x47fd03){return _0x567063(_0x47fd03);},'rqcZp':_0x1d976b(0x1cd),'BaYpT':_0x1d976b(0x186),'VQHvo':_0x1d976b(0x19b),'QMMCb':function(_0x5ad270,_0x4eb0d0,_0x8c68db,_0x137943,_0x29ab23,_0x155ed5,_0x3cfe3b){return _0x5ad270(_0x4eb0d0,_0x8c68db,_0x137943,_0x29ab23,_0x155ed5,_0x3cfe3b);},'EpGsq':_0x1d976b(0x1cc),'NMyme':_0x1d976b(0x166),'QTIPJ':_0x1d976b(0x16b),'tdhbP':_0x1d976b(0x1bd)},_0x3af8dc=(await _0x5bf0a2['getSession']())[_0x1d976b(0x1d6)]();let _0x4767d3='';if(commandRepository['isSelfHealEnabled']()&&_0x3677e1[_0x1d976b(0x1c8)](_0x48733e,![])||_0x3677e1[_0x1d976b(0x1bc)](_0x48733e,!![])){const _0x43cb44=_0x3677e1['BVZme'](isNotUndefinedOrNull,_0x27e156['parameters_']['using'])&&_0x3677e1[_0x1d976b(0x175)](isString,_0x27e156[_0x1d976b(0x1d1)][_0x1d976b(0x17a)])?_0x27e156['parameters_'][_0x1d976b(0x17a)]['replace'](/'/g,'\x5c\x27')[_0x1d976b(0x1b8)](/"/g,'\x5c\x22'):'',_0x40185b=_0x3677e1[_0x1d976b(0x194)](isNotUndefinedOrNull,_0x27e156[_0x1d976b(0x1d1)][_0x1d976b(0x17a)])&&_0x3677e1[_0x1d976b(0x190)](isString,_0x27e156['parameters_'][_0x1d976b(0x18a)])?_0x27e156['parameters_']['value'][_0x1d976b(0x1b8)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'',_0x27fdd2=_0x3677e1[_0x1d976b(0x183)](isNotUndefinedOrNull,commandRepository[_0x1d976b(0x1b7)]())&&_0x3677e1[_0x1d976b(0x175)](isString,commandRepository[_0x1d976b(0x1b7)]())?commandRepository[_0x1d976b(0x1b7)]()[_0x1d976b(0x1b8)](/'/g,'\x5c\x27')[_0x1d976b(0x1b8)](/"/g,'\x5c\x22'):'';let _0x5a9dca=_0x3677e1['mflpD'](isNotUndefinedOrNull,global[_0x1d976b(0x1a2)])&&_0x3677e1['GNZYY'](isString,global['browserstackSessionName'])?global['browserstackSessionName'][_0x1d976b(0x1b8)](/'/g,'\x5c\x27')[_0x1d976b(0x1b8)](/"/g,'\x5c\x22'):'';!_0x5a9dca&&(_0x5a9dca=_0x3677e1[_0x1d976b(0x190)](isNotUndefinedOrNull,commandRepository[_0x1d976b(0x182)]())&&_0x3677e1[_0x1d976b(0x171)](isString,commandRepository[_0x1d976b(0x182)]())?commandRepository[_0x1d976b(0x182)]()[_0x1d976b(0x1b8)](/'/g,'\x5c\x27')[_0x1d976b(0x1b8)](/"/g,'\x5c\x22'):'');let _0x183b10='{\x22region\x22:\x20\x22'+constants[_0x1d976b(0x1d0)]+'\x22,\x20\x22tcgUrls\x22:\x20{\x22'+constants[_0x1d976b(0x1d0)]+'\x22:\x20{\x22endpoint\x22:\x20\x22'+constants['TCG_URL'][_0x1d976b(0x181)](_0x3677e1['pGhdU'])[0x1]+_0x1d976b(0x159);_0x183b10=_0x3677e1[_0x1d976b(0x1a1)](isNotUndefinedOrNull,_0x183b10)&&_0x3677e1[_0x1d976b(0x171)](isString,_0x183b10)?_0x183b10[_0x1d976b(0x1b8)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'';const _0x598d7d=commandRepository[_0x1d976b(0x15f)](_0x3af8dc),_0x467b3f=globals['getGlobal'](_0x3677e1[_0x1d976b(0x17c)]),_0x4f239f=globals[_0x1d976b(0x173)](_0x3677e1[_0x1d976b(0x19f)]),_0x3a73ce=globals['getGlobal'](_0x3677e1[_0x1d976b(0x1a4)]),_0x1071a4=![],_0x3740b9=new Date();if(_0x48733e){const _0x705f1f=_0x3677e1['QMMCb'](timeoutPromise,constants[_0x1d976b(0x1ca)],_0x3677e1[_0x1d976b(0x1a3)],_0x3677e1[_0x1d976b(0x197)],_0x3740b9,this[_0x1d976b(0x1d8)],this[_0x1d976b(0x15d)]);_0x4767d3=await Promise['race']([this['BrowserstackHealing'][_0x1d976b(0x177)](_0x43cb44,_0x40185b,_0x27fdd2,_0x5a9dca,_0x4f239f,_0x3af8dc,_0x598d7d,_0x183b10)[_0x1d976b(0x1cb)](_0x3deec6=>{const _0x13db1a=_0x1d976b;return _0x705f1f[_0x13db1a(0x19d)](),_0x3deec6;}),_0x705f1f]);}else{if(commandRepository[_0x1d976b(0x1d7)]()){const _0x23de0c=_0x3677e1[_0x1d976b(0x18d)](timeoutPromise,constants[_0x1d976b(0x17f)],_0x3677e1[_0x1d976b(0x1d4)],_0x3677e1[_0x1d976b(0x198)],_0x3740b9,this['config'],this['framework']);_0x4767d3=await Promise['race']([this[_0x1d976b(0x1c9)][_0x1d976b(0x161)](_0x43cb44,_0x40185b,_0x27fdd2,_0x5a9dca,_0x467b3f,_0x4f239f,_0x3af8dc,_0x598d7d,_0x1071a4,_0x3a73ce,_0x183b10)[_0x1d976b(0x1cb)](_0x185b38=>{const _0x2d27a4=_0x1d976b;return _0x23de0c[_0x2d27a4(0x19d)](),_0x185b38;}),_0x23de0c]);}}_0x4767d3&&await _0x5bf0a2[_0x1d976b(0x1ac)](_0x4767d3);}}async[a87_0x1be567(0x192)](_0x34662e,_0x20664b,_0x3f8be8){const _0x50efe5=a87_0x1be567;try{await this['_handleEvent'](_0x34662e,_0x20664b,_0x3f8be8,!![]);}catch(_0x2f94e5){return logger['error'](_0x50efe5(0x187)+(_0x2f94e5&&_0x2f94e5['message']?_0x2f94e5[_0x50efe5(0x1bf)]:'')),![];}return!![];}async['handleFailure'](_0x3ad46c,_0x19742f,_0x4257d4){const _0xe1279a=a87_0x1be567,_0x2a56c3={'UVdLn':function(_0xede3b0,_0x2d4ec5,_0x16368c,_0x4e19cd,_0x5963b0,_0x26fd0e,_0x40f61d){return _0xede3b0(_0x2d4ec5,_0x16368c,_0x4e19cd,_0x5963b0,_0x26fd0e,_0x40f61d);},'OONMT':'BrowserstackHealing.pollResult\x20method\x20timed\x20out','uEDwk':'BrowserstackHealingPollResultFailed','NuLaF':_0xe1279a(0x162)};try{await this[_0xe1279a(0x1b4)](_0x3ad46c,_0x19742f,_0x4257d4,![]);const _0x2f8ec7=(await _0x19742f[_0xe1279a(0x1b3)]())[_0xe1279a(0x1d6)](),_0x2e57c0=new Date(),_0x3f0c64=_0x2a56c3[_0xe1279a(0x17b)](timeoutPromise,constants['POLL_HEALING_RESULT_TIMEOUT'],_0x2a56c3[_0xe1279a(0x178)],_0x2a56c3['uEDwk'],_0x2e57c0,this[_0xe1279a(0x1d8)],this[_0xe1279a(0x15d)]),_0x5a82df=await Promise[_0xe1279a(0x16e)]([this['BrowserstackHealing']['pollResult'](constants[_0xe1279a(0x199)],_0x2f8ec7,globals[_0xe1279a(0x173)](_0x2a56c3[_0xe1279a(0x1b6)]))[_0xe1279a(0x1cb)](_0x2aaa62=>{const _0x210712=_0xe1279a;return _0x3f0c64[_0x210712(0x19d)](),_0x2aaa62;}),_0x3f0c64]);if(_0x5a82df&&_0x5a82df['selector']&&_0x5a82df[_0xe1279a(0x18a)]){const _0x17c523={};return _0x17c523[_0xe1279a(0x1ae)]=_0x5a82df[_0xe1279a(0x1ad)],_0x17c523[_0xe1279a(0x1c3)]=_0x5a82df[_0xe1279a(0x18a)],_0x17c523[_0xe1279a(0x174)]=!![],_0x17c523;}const _0x22fca3={};return _0x22fca3[_0xe1279a(0x1ae)]=_0x4257d4[_0xe1279a(0x1d1)]['using'],_0x22fca3['locatorValue']=_0x5a82df[_0xe1279a(0x18a)],_0x22fca3[_0xe1279a(0x174)]=!![],_0x22fca3;}catch(_0x31f410){return logger[_0xe1279a(0x16d)](_0xe1279a(0x1cf)+(_0x31f410&&_0x31f410[_0xe1279a(0x1bf)]?_0x31f410[_0xe1279a(0x1bf)]:'')),logger[_0xe1279a(0x185)](_0xe1279a(0x19a)+_0x4257d4[_0xe1279a(0x1c6)]+_0xe1279a(0x167)),_0x4257d4;}}}function a87_0x5ba4(_0x203b0f,_0x514a20){const _0x37faed=a87_0x37fa();return a87_0x5ba4=function(_0x5ba40a,_0x23afc5){_0x5ba40a=_0x5ba40a-0x158;let _0xefee8=_0x37faed[_0x5ba40a];return _0xefee8;},a87_0x5ba4(_0x203b0f,_0x514a20);}exports[a87_0x1be567(0x1ab)]=Object[a87_0x1be567(0x168)](new AiSdkWrapper());