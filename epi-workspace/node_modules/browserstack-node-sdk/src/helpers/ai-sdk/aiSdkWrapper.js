const a59_0x2cc21d=a59_0x4503;function a59_0x4503(_0x388c36,_0x198e48){const _0x13b49f=a59_0x13b4();return a59_0x4503=function(_0x450394,_0x513629){_0x450394=_0x450394-0x12b;let _0x45384c=_0x13b49f[_0x450394];return _0x45384c;},a59_0x4503(_0x388c36,_0x198e48);}function a59_0x13b4(){const _0x3fefcf=['config','executeScript','gvRom','replace','aiHeal_groupId','NzlJf','keys','getId','BrowserstackHealing.pollResult\x20method\x20timed\x20out','lmYio','s://','kxBsn','string','aiHeal_sessionToken','race','microsoftedge','BrowserstackHealing','Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20','setTcgToken','winstonLogger','forEach','parameters_','TCG_URL','handleFailure','19993830XccvBH','newCapabilities','pXIlB','isSelfHealEnabled','LdFrJ','healFailure','toLowerCase','split','BrowserstackHealing.logData\x20method\x20timed\x20out','getProjectName','XgiLo','initializeCapabilities','../../ai-sdk-node/bundle','nBPVb','cancel','\x22,\x20\x22tcgUrls\x22:\x20{\x22','732peXTZv','getSession','eAMGT','_handleEvent','pollResult','edgeOptions_','51880ZUOjAp','selector','Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20','fromEntries','locatorType','log','Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20','../logger','chrome','XVtio','framework','DLsOU','\x22:\x20{\x22endpoint\x22:\x20\x22','TCG_REGION','PhgYx','debug','safari','error','path','getCapabilities','aMVhz','getTestName','4145dfOSdO','Dgndi','eRDlc','gAgrV','1990734yHffdA','11ygvtMc','GakUi','safariOptions_','using','Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20','initializeHealingCapabilities','2273OrTIVY','794GSgSiR','lBEeC','10054962anbGFU','then','join','SBsRr','uPUUX','eioJV','WlNAR','\x22}}}','browserName','SrXyO','browserstackSessionName','2894394RHRdtv','firefox','HEALING_FAILURE_TIMEOUT','chromeOptions_','firefoxOptions_','../globals','locatorValue','phqBY','1057rvvseT','EFniA','value','aiHealing','WjkqI','message','fqIDK','BrowserstackHealingLogDataFailed','\x20command','LzuqV','freeze','ctOab','aiHeal_isGroupAIEnabled','jSGra','setToken','aiHeal_userId','BrowserstackHealing.setToken\x20method\x20timed\x20out','getGlobal','BrowserstackHealing.healFailure\x20method\x20timed\x20out','Unable\x20to\x20load\x20healing\x20module,\x20error:\x20','BrowserstackHealingHealFailureFailed'];a59_0x13b4=function(){return _0x3fefcf;};return a59_0x13b4();}(function(_0x4793a1,_0x2cb653){const _0x2d4ae7=a59_0x4503,_0x1bb1ad=_0x4793a1();while(!![]){try{const _0x371503=-parseInt(_0x2d4ae7(0x178))/0x1*(parseInt(_0x2d4ae7(0x179))/0x2)+-parseInt(_0x2d4ae7(0x186))/0x3+-parseInt(_0x2d4ae7(0x151))/0x4*(-parseInt(_0x2d4ae7(0x16d))/0x5)+parseInt(_0x2d4ae7(0x171))/0x6+-parseInt(_0x2d4ae7(0x18e))/0x7*(parseInt(_0x2d4ae7(0x157))/0x8)+parseInt(_0x2d4ae7(0x17b))/0x9+parseInt(_0x2d4ae7(0x141))/0xa*(parseInt(_0x2d4ae7(0x172))/0xb);if(_0x371503===_0x2cb653)break;else _0x1bb1ad['push'](_0x1bb1ad['shift']());}catch(_0x3c0749){_0x1bb1ad['push'](_0x1bb1ad['shift']());}}}(a59_0x13b4,0xb8013));const path=require(a59_0x2cc21d(0x169)),{commandRepository}=require('./autoHealHelper'),constants=require('../../bin/utils/constants'),logger=require(a59_0x2cc21d(0x15e))[a59_0x2cc21d(0x13c)],globals=require(a59_0x2cc21d(0x18b)),timeoutPromise=require('../../helpers/timeoutPromise'),isUndefinedOrNull=_0x33f046=>_0x33f046===undefined||_0x33f046===null||_0x33f046==='',isNotUndefinedOrNull=_0x12739d=>!isUndefinedOrNull(_0x12739d),isString=_0x484b24=>isNotUndefinedOrNull(_0x484b24)&&typeof _0x484b24===a59_0x2cc21d(0x135);class AiSdkWrapper{constructor(){const _0x183e42=a59_0x2cc21d,_0xe3e513={'ypxZm':function(_0x5ed88b,_0x508eb2){return _0x5ed88b(_0x508eb2);},'semTu':_0x183e42(0x14d)};this[_0x183e42(0x139)]=undefined;try{this[_0x183e42(0x139)]=_0xe3e513['ypxZm'](require,path[_0x183e42(0x17d)](__dirname,_0xe3e513['semTu']));}catch(_0x40a963){logger[_0x183e42(0x168)](_0x183e42(0x1a1)+(_0x40a963&&_0x40a963[_0x183e42(0x193)]?_0x40a963[_0x183e42(0x193)]:''));}}[a59_0x2cc21d(0x177)](_0x3a61ca){const _0x1a82f9=a59_0x2cc21d,_0x346eae={};_0x346eae[_0x1a82f9(0x184)]=_0x1a82f9(0x142),_0x346eae[_0x1a82f9(0x134)]=function(_0x24ade8,_0x550bf1){return _0x24ade8===_0x550bf1;},_0x346eae[_0x1a82f9(0x160)]=_0x1a82f9(0x15f),_0x346eae[_0x1a82f9(0x192)]=_0x1a82f9(0x187),_0x346eae[_0x1a82f9(0x132)]=function(_0x23cd72,_0x491373){return _0x23cd72===_0x491373;},_0x346eae[_0x1a82f9(0x18f)]=_0x1a82f9(0x167),_0x346eae[_0x1a82f9(0x18d)]='edge',_0x346eae[_0x1a82f9(0x143)]=_0x1a82f9(0x138),_0x346eae[_0x1a82f9(0x14b)]=function(_0x1cb16a,_0x1f00b0){return _0x1cb16a===_0x1f00b0;};const _0x47bff8=_0x346eae;try{const _0xb4558d=this['BrowserstackHealing'][_0x1a82f9(0x14c)](Object[_0x1a82f9(0x15a)](_0x3a61ca[_0x1a82f9(0x16a)]()['map_']));console[_0x1a82f9(0x15c)](_0x47bff8[_0x1a82f9(0x184)],_0xb4558d);if(_0x47bff8[_0x1a82f9(0x134)](_0xb4558d?.[_0x1a82f9(0x183)]?.['toLowerCase'](),_0x47bff8['XVtio']))_0x3a61ca[_0x1a82f9(0x189)]=_0xb4558d;else{if(_0x47bff8['kxBsn'](_0xb4558d?.[_0x1a82f9(0x183)]?.[_0x1a82f9(0x147)](),_0x47bff8[_0x1a82f9(0x192)]))_0x3a61ca[_0x1a82f9(0x18a)]=_0xb4558d;else{if(_0x47bff8[_0x1a82f9(0x132)](_0xb4558d?.[_0x1a82f9(0x183)]?.[_0x1a82f9(0x147)](),_0x47bff8['EFniA']))_0x3a61ca[_0x1a82f9(0x174)]=_0xb4558d;else{if(_0x47bff8['lmYio'](_0xb4558d?.[_0x1a82f9(0x183)]?.[_0x1a82f9(0x147)](),_0x47bff8['phqBY'])||_0x47bff8['kxBsn'](_0xb4558d?.[_0x1a82f9(0x183)]?.[_0x1a82f9(0x147)](),_0x47bff8[_0x1a82f9(0x143)]))_0x3a61ca[_0x1a82f9(0x156)]=_0xb4558d;else _0x47bff8[_0x1a82f9(0x14b)](_0xb4558d?.['browserName']?.[_0x1a82f9(0x147)](),'ie')&&(_0x3a61ca['ieOptions_']=_0xb4558d);}}}Object[_0x1a82f9(0x12f)](_0xb4558d)[_0x1a82f9(0x13d)](_0x1fe934=>{const _0x33f8de=_0x3a61ca['capabilities_']['get'](_0x1fe934);_0x3a61ca['capabilities_']['set'](_0x1fe934,_0xb4558d[_0x1fe934]);});}catch(_0x1e47d){logger['error'](_0x1a82f9(0x176)+(_0x1e47d&&_0x1e47d[_0x1a82f9(0x193)]?_0x1e47d[_0x1a82f9(0x193)]:''));}}async[a59_0x2cc21d(0x13b)](_0x5f4f5b){const _0x54f974=a59_0x2cc21d,_0x490751={'nBPVb':function(_0x201f6c,_0x55254b,_0x5cbcc6,_0x120344,_0x40d042,_0x4214b8,_0x1b6dc3){return _0x201f6c(_0x55254b,_0x5cbcc6,_0x120344,_0x40d042,_0x4214b8,_0x1b6dc3);},'Dgndi':_0x54f974(0x19e),'nyNhU':'BrowserstackHealingSetTcgTokenFailed','eRDlc':_0x54f974(0x136)},_0x115519=new Date(),_0x55a465=_0x490751[_0x54f974(0x14e)](timeoutPromise,constants['SET_TCG_TOKEN_TIMEOUT'],_0x490751[_0x54f974(0x16e)],_0x490751['nyNhU'],_0x115519,this[_0x54f974(0x1a3)],this[_0x54f974(0x161)]);await Promise[_0x54f974(0x137)]([this[_0x54f974(0x139)][_0x54f974(0x19c)](_0x5f4f5b,globals['getGlobal'](_0x490751[_0x54f974(0x16f)]),constants[_0x54f974(0x13f)])[_0x54f974(0x17c)](()=>{const _0x471049=_0x54f974;_0x55a465[_0x471049(0x14f)]();}),_0x55a465]);}async['_handleEvent'](_0x2d7512,_0x566931,_0x14ee08,_0x471f49){const _0x57a34c=a59_0x2cc21d,_0x346bca={'aMVhz':function(_0x5c11ea,_0x328060){return _0x5c11ea===_0x328060;},'gvRom':function(_0x23c613,_0x2f88d6){return _0x23c613===_0x2f88d6;},'WlNAR':function(_0x5f2ce1,_0x3629fa){return _0x5f2ce1(_0x3629fa);},'lBEeC':function(_0x475bba,_0xc6fbbe){return _0x475bba(_0xc6fbbe);},'gAgrV':function(_0x47aa46,_0x3992d3){return _0x47aa46(_0x3992d3);},'eioJV':function(_0x2aa4e7,_0x15e3ab){return _0x2aa4e7(_0x15e3ab);},'ctOab':function(_0x5c7e4b,_0xf154b1){return _0x5c7e4b(_0xf154b1);},'jSGra':function(_0x240285,_0x4105f9){return _0x240285(_0x4105f9);},'PhgYx':function(_0x2714d5,_0x112f3a){return _0x2714d5(_0x112f3a);},'uPUUX':_0x57a34c(0x133),'puycR':function(_0x21ce6d,_0x28b3a3){return _0x21ce6d(_0x28b3a3);},'NzlJf':_0x57a34c(0x19d),'GakUi':_0x57a34c(0x12d),'DLsOU':_0x57a34c(0x19a),'LdFrJ':function(_0x5d4832,_0xc5b33a,_0x5ea7a7,_0x2fa80f,_0x2f7ccf,_0x314d74,_0x2405b9){return _0x5d4832(_0xc5b33a,_0x5ea7a7,_0x2fa80f,_0x2f7ccf,_0x314d74,_0x2405b9);},'fqIDK':_0x57a34c(0x149),'LzuqV':_0x57a34c(0x195),'SBsRr':_0x57a34c(0x1a0),'ZDNkA':_0x57a34c(0x1a2)},_0xf8a30c=(await _0x566931[_0x57a34c(0x152)]())[_0x57a34c(0x130)]();let _0x4ea28c='';if(commandRepository[_0x57a34c(0x144)]()&&_0x346bca[_0x57a34c(0x16b)](_0x471f49,![])||_0x346bca[_0x57a34c(0x12b)](_0x471f49,!![])){const _0x1c8193=_0x346bca[_0x57a34c(0x181)](isNotUndefinedOrNull,_0x14ee08[_0x57a34c(0x13e)]['using'])&&_0x346bca[_0x57a34c(0x17a)](isString,_0x14ee08[_0x57a34c(0x13e)][_0x57a34c(0x175)])?_0x14ee08[_0x57a34c(0x13e)][_0x57a34c(0x175)][_0x57a34c(0x12c)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'',_0x4f0858=_0x346bca[_0x57a34c(0x17a)](isNotUndefinedOrNull,_0x14ee08[_0x57a34c(0x13e)][_0x57a34c(0x175)])&&_0x346bca['gAgrV'](isString,_0x14ee08[_0x57a34c(0x13e)][_0x57a34c(0x190)])?_0x14ee08[_0x57a34c(0x13e)][_0x57a34c(0x190)]['replace'](/'/g,'\x5c\x27')[_0x57a34c(0x12c)](/"/g,'\x5c\x22'):'',_0x28b870=_0x346bca[_0x57a34c(0x170)](isNotUndefinedOrNull,commandRepository[_0x57a34c(0x14a)]())&&_0x346bca[_0x57a34c(0x180)](isString,commandRepository[_0x57a34c(0x14a)]())?commandRepository[_0x57a34c(0x14a)]()[_0x57a34c(0x12c)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'';let _0x228f8c=_0x346bca[_0x57a34c(0x17a)](isNotUndefinedOrNull,global[_0x57a34c(0x185)])&&_0x346bca[_0x57a34c(0x199)](isString,global['browserstackSessionName'])?global[_0x57a34c(0x185)][_0x57a34c(0x12c)](/'/g,'\x5c\x27')[_0x57a34c(0x12c)](/"/g,'\x5c\x22'):'';!_0x228f8c&&(_0x228f8c=_0x346bca[_0x57a34c(0x19b)](isNotUndefinedOrNull,commandRepository['getTestName']())&&_0x346bca[_0x57a34c(0x165)](isString,commandRepository[_0x57a34c(0x16c)]())?commandRepository[_0x57a34c(0x16c)]()[_0x57a34c(0x12c)](/'/g,'\x5c\x27')[_0x57a34c(0x12c)](/"/g,'\x5c\x22'):'');let _0x14765d='{\x22region\x22:\x20\x22'+constants[_0x57a34c(0x164)]+_0x57a34c(0x150)+constants[_0x57a34c(0x164)]+_0x57a34c(0x163)+constants[_0x57a34c(0x13f)][_0x57a34c(0x148)](_0x346bca[_0x57a34c(0x17f)])[0x1]+_0x57a34c(0x182);_0x14765d=_0x346bca['puycR'](isNotUndefinedOrNull,_0x14765d)&&_0x346bca[_0x57a34c(0x181)](isString,_0x14765d)?_0x14765d[_0x57a34c(0x12c)](/'/g,'\x5c\x27')[_0x57a34c(0x12c)](/"/g,'\x5c\x22'):'';const _0x568a53=commandRepository['getCommands'](_0xf8a30c),_0x44801a=globals[_0x57a34c(0x19f)](_0x346bca[_0x57a34c(0x12e)]),_0x5df0a0=globals[_0x57a34c(0x19f)](_0x346bca[_0x57a34c(0x173)]),_0x11ea17=globals[_0x57a34c(0x19f)](_0x346bca[_0x57a34c(0x162)]),_0x4b8f62=![],_0x2b199d=new Date();if(_0x471f49){const _0x49853a=_0x346bca[_0x57a34c(0x145)](timeoutPromise,constants['HEALING_LOG_DATA_TIMEOUT'],_0x346bca[_0x57a34c(0x194)],_0x346bca[_0x57a34c(0x197)],_0x2b199d,this[_0x57a34c(0x1a3)],this[_0x57a34c(0x161)]);_0x4ea28c=await Promise[_0x57a34c(0x137)]([this[_0x57a34c(0x139)]['logData'](_0x1c8193,_0x4f0858,_0x28b870,_0x228f8c,_0x5df0a0,_0xf8a30c,_0x568a53,_0x14765d)['then'](_0xd53e00=>{const _0x4ff1a8=_0x57a34c;return _0x49853a[_0x4ff1a8(0x14f)](),_0xd53e00;}),_0x49853a]);}else{if(commandRepository[_0x57a34c(0x144)]()){const _0x153c76=_0x346bca['LdFrJ'](timeoutPromise,constants[_0x57a34c(0x188)],_0x346bca[_0x57a34c(0x17e)],_0x346bca['ZDNkA'],_0x2b199d,this['config'],this['framework']);_0x4ea28c=await Promise['race']([this[_0x57a34c(0x139)][_0x57a34c(0x146)](_0x1c8193,_0x4f0858,_0x28b870,_0x228f8c,_0x44801a,_0x5df0a0,_0xf8a30c,_0x568a53,_0x4b8f62,_0x11ea17,_0x14765d)[_0x57a34c(0x17c)](_0x433861=>{const _0x3b34bf=_0x57a34c;return _0x153c76[_0x3b34bf(0x14f)](),_0x433861;}),_0x153c76]);}}_0x4ea28c&&await _0x566931[_0x57a34c(0x1a4)](_0x4ea28c);}}async['handleSuccess'](_0x7e1df2,_0x5c137e,_0xf973ee){const _0x1f8fa5=a59_0x2cc21d;try{await this['_handleEvent'](_0x7e1df2,_0x5c137e,_0xf973ee,!![]);}catch(_0x18946b){return logger['error'](_0x1f8fa5(0x15d)+(_0x18946b&&_0x18946b[_0x1f8fa5(0x193)]?_0x18946b[_0x1f8fa5(0x193)]:'')),![];}return!![];}async[a59_0x2cc21d(0x140)](_0x1915fb,_0x209799,_0x40d585){const _0x2f2540=a59_0x2cc21d,_0x8a2deb={'PZlBg':function(_0x27c424,_0x26a1a0,_0x6aec49,_0x1b7296,_0xe6aa1e,_0x509945,_0x372a5d){return _0x27c424(_0x26a1a0,_0x6aec49,_0x1b7296,_0xe6aa1e,_0x509945,_0x372a5d);},'ivfYP':_0x2f2540(0x131),'jIpzZ':'BrowserstackHealingPollResultFailed','eAMGT':_0x2f2540(0x136)};try{await this[_0x2f2540(0x154)](_0x1915fb,_0x209799,_0x40d585,![]);const _0x1cf266=(await _0x209799['getSession']())[_0x2f2540(0x130)](),_0x5bd5f0=new Date(),_0x95f194=_0x8a2deb['PZlBg'](timeoutPromise,constants['POLL_HEALING_RESULT_TIMEOUT'],_0x8a2deb['ivfYP'],_0x8a2deb['jIpzZ'],_0x5bd5f0,this['config'],this[_0x2f2540(0x161)]),_0x4d7182=await Promise['race']([this[_0x2f2540(0x139)][_0x2f2540(0x155)](constants['TCG_URL'],_0x1cf266,globals[_0x2f2540(0x19f)](_0x8a2deb[_0x2f2540(0x153)]))[_0x2f2540(0x17c)](_0x3dd486=>{const _0x387be5=_0x2f2540;return _0x95f194[_0x387be5(0x14f)](),_0x3dd486;}),_0x95f194]);if(_0x4d7182&&_0x4d7182[_0x2f2540(0x158)]&&_0x4d7182[_0x2f2540(0x190)]){const _0x2c8db5={};return _0x2c8db5[_0x2f2540(0x15b)]=_0x4d7182[_0x2f2540(0x158)],_0x2c8db5[_0x2f2540(0x18c)]=_0x4d7182[_0x2f2540(0x190)],_0x2c8db5[_0x2f2540(0x191)]=!![],_0x2c8db5;}const _0x2d0ff8={};return _0x2d0ff8[_0x2f2540(0x15b)]=_0x40d585[_0x2f2540(0x13e)][_0x2f2540(0x175)],_0x2d0ff8[_0x2f2540(0x18c)]=_0x4d7182[_0x2f2540(0x190)],_0x2d0ff8[_0x2f2540(0x191)]=!![],_0x2d0ff8;}catch(_0x296786){return logger[_0x2f2540(0x166)](_0x2f2540(0x159)+(_0x296786&&_0x296786[_0x2f2540(0x193)]?_0x296786[_0x2f2540(0x193)]:'')),logger['info'](_0x2f2540(0x13a)+_0x40d585['name_']+_0x2f2540(0x196)),_0x40d585;}}}exports['aiSdkWrapper']=Object[a59_0x2cc21d(0x198)](new AiSdkWrapper());