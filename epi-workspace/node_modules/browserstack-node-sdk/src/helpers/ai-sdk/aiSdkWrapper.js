const a89_0x3d939d=a89_0x21de;function a89_0x21de(_0x598162,_0x24777a){const _0x1516fb=a89_0x1516();return a89_0x21de=function(_0x21de13,_0x33cd92){_0x21de13=_0x21de13-0x72;let _0x279e44=_0x1516fb[_0x21de13];return _0x279e44;},a89_0x21de(_0x598162,_0x24777a);}(function(_0x52ba90,_0x54eeb6){const _0x340ce3=a89_0x21de,_0x37ca8c=_0x52ba90();while(!![]){try{const _0x27cc03=parseInt(_0x340ce3(0xbe))/0x1*(parseInt(_0x340ce3(0xa8))/0x2)+parseInt(_0x340ce3(0x8b))/0x3+-parseInt(_0x340ce3(0xb5))/0x4+-parseInt(_0x340ce3(0xe5))/0x5+-parseInt(_0x340ce3(0xe9))/0x6+-parseInt(_0x340ce3(0x7b))/0x7*(-parseInt(_0x340ce3(0xd9))/0x8)+parseInt(_0x340ce3(0xac))/0x9*(parseInt(_0x340ce3(0x82))/0xa);if(_0x27cc03===_0x54eeb6)break;else _0x37ca8c['push'](_0x37ca8c['shift']());}catch(_0x456427){_0x37ca8c['push'](_0x37ca8c['shift']());}}}(a89_0x1516,0x23f86));function a89_0x1516(){const _0x250abb=['chrome','firefox','YTAKD','1174085AjzbCI','value','message','cancel','150654GGlDam','browserName','Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20','_handleEvent','browserstackSessionName','locatorType','JyFLX','handleSuccess','race','POLL_HEALING_RESULT_TIMEOUT','krKuu','nSiLT','capabilities_','getId','TCG_URL','OArxS','14JpUXuC','xkAmL','wDphV','isSelfHealEnabled','iaCPX','getCapabilities','fromEntries','922410esmpol','BrowserstackHealingLogDataFailed','fdcnJ','ndVhQ','ESBeS','map_','initializeCapabilities','config','NyscJ','382710gHFjcB','BrowserstackHealing.setToken\x20method\x20timed\x20out','chromeOptions_','NkZSs','vzVRU','using','TCG_REGION','string','erKEZ','../../helpers/timeoutPromise','vhuiW','../logger','HiXIY','../../ai-sdk-node/bundle','jjAmW','kTGWe','Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20','freeze','winstonLogger','vOVPS','OgEtS','executeScript','QgccX','kZDYS','HEALING_LOG_DATA_TIMEOUT','name_','fesYr','ieOptions_','info','2KvzfAU','{\x22region\x22:\x20\x22','../globals','BrowserstackHealingPollResultFailed','18XwJgnw','\x22:\x20{\x22endpoint\x22:\x20\x22','HEALING_FAILURE_TIMEOUT','\x22}}}','edgeOptions_','dLtQT','log','getTestName','logData','724636ZMYxtl','parameters_','locatorValue','aiHeal_sessionToken','BrowserstackHealing.healFailure\x20method\x20timed\x20out','gILbO','get','\x22,\x20\x22tcgUrls\x22:\x20{\x22','BrowserstackHealing.pollResult\x20method\x20timed\x20out','209403ZNdAlA','edge','BrowserstackHealing.logData\x20method\x20timed\x20out','getGlobal','setTcgToken','vkJaa','FNNUF','LNOwC','BrowserstackHealingSetTcgTokenFailed','FjeIC','BrowserstackHealing','aiHeal_isGroupAIEnabled','getSession','ugutC','safariOptions_','split','microsoftedge','error','ctHsH','Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20','Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20','aiHeal_groupId','handleFailure','framework','initializeHealingCapabilities','toLowerCase','qXSEo','267856SFXkpb','firefoxOptions_','upVCQ','then','getProjectName','set','ikxeg','mrxFo','replace'];a89_0x1516=function(){return _0x250abb;};return a89_0x1516();}const path=require('path'),{commandRepository}=require('./autoHealHelper'),constants=require('../../bin/utils/constants'),logger=require(a89_0x3d939d(0x96))[a89_0x3d939d(0x9d)],globals=require(a89_0x3d939d(0xaa)),timeoutPromise=require(a89_0x3d939d(0x94)),isUndefinedOrNull=_0x42a397=>_0x42a397===undefined||_0x42a397===null||_0x42a397==='',isNotUndefinedOrNull=_0x48d87f=>!isUndefinedOrNull(_0x48d87f),isString=_0x2bd967=>isNotUndefinedOrNull(_0x2bd967)&&typeof _0x2bd967===a89_0x3d939d(0x92);class AiSdkWrapper{constructor(){const _0x2d2dfc=a89_0x3d939d,_0x40baab={'krKuu':function(_0xc10f04,_0x231f13){return _0xc10f04(_0x231f13);},'ctHsH':_0x2d2dfc(0x98)};this[_0x2d2dfc(0xc8)]=undefined;try{this['BrowserstackHealing']=_0x40baab[_0x2d2dfc(0x75)](require,path['join'](__dirname,_0x40baab[_0x2d2dfc(0xd0)]));}catch(_0x28add9){logger[_0x2d2dfc(0xcf)]('Unable\x20to\x20load\x20healing\x20module,\x20error:\x20'+(_0x28add9&&_0x28add9[_0x2d2dfc(0xe7)]?_0x28add9[_0x2d2dfc(0xe7)]:''));}}[a89_0x3d939d(0xd6)](_0x28b6f2){const _0x18f2a9=a89_0x3d939d,_0x58df50={};_0x58df50['xkAmL']='newCapabilities',_0x58df50[_0x18f2a9(0xd8)]=function(_0x4dd6c9,_0x43fb75){return _0x4dd6c9===_0x43fb75;},_0x58df50['NkZSs']=_0x18f2a9(0xe2),_0x58df50[_0x18f2a9(0xc5)]=_0x18f2a9(0xe3),_0x58df50[_0x18f2a9(0xc3)]=function(_0x570bd9,_0x4bb52a){return _0x570bd9===_0x4bb52a;},_0x58df50[_0x18f2a9(0xa1)]='safari',_0x58df50[_0x18f2a9(0x7f)]=function(_0x13f8cd,_0x506817){return _0x13f8cd===_0x506817;},_0x58df50[_0x18f2a9(0xa5)]=_0x18f2a9(0xbf),_0x58df50[_0x18f2a9(0x85)]=function(_0x5e28ea,_0xb784d1){return _0x5e28ea===_0xb784d1;},_0x58df50['NyscJ']=_0x18f2a9(0xce);const _0x1e98f0=_0x58df50;try{const _0x3a78ae=this[_0x18f2a9(0xc8)][_0x18f2a9(0x88)](Object[_0x18f2a9(0x81)](_0x28b6f2[_0x18f2a9(0x80)]()[_0x18f2a9(0x87)]));console[_0x18f2a9(0xb2)](_0x1e98f0[_0x18f2a9(0x7c)],_0x3a78ae);if(_0x1e98f0[_0x18f2a9(0xd8)](_0x3a78ae?.[_0x18f2a9(0xea)]?.[_0x18f2a9(0xd7)](),_0x1e98f0[_0x18f2a9(0x8e)]))_0x28b6f2[_0x18f2a9(0x8d)]=_0x3a78ae;else{if(_0x1e98f0['qXSEo'](_0x3a78ae?.[_0x18f2a9(0xea)]?.[_0x18f2a9(0xd7)](),_0x1e98f0[_0x18f2a9(0xc5)]))_0x28b6f2[_0x18f2a9(0xda)]=_0x3a78ae;else{if(_0x1e98f0[_0x18f2a9(0xc3)](_0x3a78ae?.[_0x18f2a9(0xea)]?.['toLowerCase'](),_0x1e98f0['QgccX']))_0x28b6f2[_0x18f2a9(0xcc)]=_0x3a78ae;else{if(_0x1e98f0[_0x18f2a9(0x7f)](_0x3a78ae?.['browserName']?.[_0x18f2a9(0xd7)](),_0x1e98f0[_0x18f2a9(0xa5)])||_0x1e98f0[_0x18f2a9(0x85)](_0x3a78ae?.[_0x18f2a9(0xea)]?.[_0x18f2a9(0xd7)](),_0x1e98f0[_0x18f2a9(0x8a)]))_0x28b6f2[_0x18f2a9(0xb0)]=_0x3a78ae;else _0x1e98f0[_0x18f2a9(0x85)](_0x3a78ae?.[_0x18f2a9(0xea)]?.['toLowerCase'](),'ie')&&(_0x28b6f2[_0x18f2a9(0xa6)]=_0x3a78ae);}}}Object['keys'](_0x3a78ae)['forEach'](_0x4ebda0=>{const _0x2cb75b=_0x18f2a9,_0x366885=_0x28b6f2[_0x2cb75b(0x77)][_0x2cb75b(0xbb)](_0x4ebda0);_0x28b6f2[_0x2cb75b(0x77)][_0x2cb75b(0xde)](_0x4ebda0,_0x3a78ae[_0x4ebda0]);});}catch(_0x4e0166){logger['error'](_0x18f2a9(0x9b)+(_0x4e0166&&_0x4e0166['message']?_0x4e0166[_0x18f2a9(0xe7)]:''));}}async[a89_0x3d939d(0xc2)](_0x43af3d){const _0x32afd2=a89_0x3d939d,_0x3c83e1={'vOVPS':function(_0x26f32b,_0x4f14b5,_0x36c57d,_0x4fe4d0,_0xd13bdc,_0x14de13,_0x453b22){return _0x26f32b(_0x4f14b5,_0x36c57d,_0x4fe4d0,_0xd13bdc,_0x14de13,_0x453b22);},'ugutC':_0x32afd2(0x8c),'wDphV':_0x32afd2(0xc6),'jjAmW':'aiHeal_sessionToken'},_0x2718ef=new Date(),_0x3eb942=_0x3c83e1[_0x32afd2(0x9e)](timeoutPromise,constants['SET_TCG_TOKEN_TIMEOUT'],_0x3c83e1[_0x32afd2(0xcb)],_0x3c83e1[_0x32afd2(0x7d)],_0x2718ef,this[_0x32afd2(0x89)],this[_0x32afd2(0xd5)]);await Promise[_0x32afd2(0x73)]([this[_0x32afd2(0xc8)]['setToken'](_0x43af3d,globals[_0x32afd2(0xc1)](_0x3c83e1[_0x32afd2(0x99)]),constants['TCG_URL'])['then'](()=>{const _0x4fe992=_0x32afd2;_0x3eb942[_0x4fe992(0xe8)]();}),_0x3eb942]);}async['_handleEvent'](_0x182047,_0x353c57,_0x18c981,_0xf99bf3){const _0x38a3f0=a89_0x3d939d,_0x58e123={'vhuiW':function(_0x5d7b23,_0x3fc34e){return _0x5d7b23===_0x3fc34e;},'CKqaX':function(_0x5e8fe3,_0x3423b3){return _0x5e8fe3===_0x3423b3;},'nSiLT':function(_0x31fd04,_0xebcdd3){return _0x31fd04(_0xebcdd3);},'ESBeS':function(_0x5c8c57,_0x219e3a){return _0x5c8c57(_0x219e3a);},'gILbO':function(_0x422110,_0x33248a){return _0x422110(_0x33248a);},'YYeaj':function(_0x10777e,_0x3409fc){return _0x10777e(_0x3409fc);},'ikxeg':'s://','kTGWe':function(_0x1d5ee7,_0x56141a){return _0x1d5ee7(_0x56141a);},'erKEZ':function(_0xaa73dc,_0x274ba8){return _0xaa73dc(_0x274ba8);},'YTAKD':'aiHeal_userId','JyFLX':_0x38a3f0(0xd3),'vzVRU':_0x38a3f0(0xc9),'OArxS':function(_0x5eddcf,_0x8cd49b,_0x57f976,_0x5af723,_0x4a0c89,_0x226ad9,_0x124e9b){return _0x5eddcf(_0x8cd49b,_0x57f976,_0x5af723,_0x4a0c89,_0x226ad9,_0x124e9b);},'mrxFo':_0x38a3f0(0xc0),'OgEtS':_0x38a3f0(0x83),'kZDYS':function(_0x41bf3b,_0x243cf7,_0x3e490e,_0x491c54,_0x4064b6,_0x29dc2d,_0x3d68fc){return _0x41bf3b(_0x243cf7,_0x3e490e,_0x491c54,_0x4064b6,_0x29dc2d,_0x3d68fc);},'upVCQ':_0x38a3f0(0xb9),'FNNUF':'BrowserstackHealingHealFailureFailed'},_0x18317f=(await _0x353c57[_0x38a3f0(0xca)]())[_0x38a3f0(0x78)]();let _0x3331d4='';if(commandRepository[_0x38a3f0(0x7e)]()&&_0x58e123[_0x38a3f0(0x95)](_0xf99bf3,![])||_0x58e123['CKqaX'](_0xf99bf3,!![])){const _0x5ea48b=_0x58e123[_0x38a3f0(0x76)](isNotUndefinedOrNull,_0x18c981[_0x38a3f0(0xb6)][_0x38a3f0(0x90)])&&_0x58e123[_0x38a3f0(0x76)](isString,_0x18c981['parameters_'][_0x38a3f0(0x90)])?_0x18c981['parameters_'][_0x38a3f0(0x90)][_0x38a3f0(0xe1)](/'/g,'\x5c\x27')[_0x38a3f0(0xe1)](/"/g,'\x5c\x22'):'',_0x11007e=_0x58e123[_0x38a3f0(0x76)](isNotUndefinedOrNull,_0x18c981[_0x38a3f0(0xb6)]['using'])&&_0x58e123[_0x38a3f0(0x86)](isString,_0x18c981[_0x38a3f0(0xb6)][_0x38a3f0(0xe6)])?_0x18c981[_0x38a3f0(0xb6)][_0x38a3f0(0xe6)][_0x38a3f0(0xe1)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'',_0x28f5a9=_0x58e123[_0x38a3f0(0x86)](isNotUndefinedOrNull,commandRepository['getProjectName']())&&_0x58e123[_0x38a3f0(0x86)](isString,commandRepository['getProjectName']())?commandRepository[_0x38a3f0(0xdd)]()[_0x38a3f0(0xe1)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'';let _0x157ae5=_0x58e123[_0x38a3f0(0xba)](isNotUndefinedOrNull,global[_0x38a3f0(0xed)])&&_0x58e123['YYeaj'](isString,global[_0x38a3f0(0xed)])?global[_0x38a3f0(0xed)][_0x38a3f0(0xe1)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'';!_0x157ae5&&(_0x157ae5=_0x58e123[_0x38a3f0(0x76)](isNotUndefinedOrNull,commandRepository['getTestName']())&&_0x58e123[_0x38a3f0(0x86)](isString,commandRepository[_0x38a3f0(0xb3)]())?commandRepository['getTestName']()[_0x38a3f0(0xe1)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'');let _0x19e58c=_0x38a3f0(0xa9)+constants[_0x38a3f0(0x91)]+_0x38a3f0(0xbc)+constants[_0x38a3f0(0x91)]+_0x38a3f0(0xad)+constants['TCG_URL'][_0x38a3f0(0xcd)](_0x58e123[_0x38a3f0(0xdf)])[0x1]+_0x38a3f0(0xaf);_0x19e58c=_0x58e123[_0x38a3f0(0x9a)](isNotUndefinedOrNull,_0x19e58c)&&_0x58e123[_0x38a3f0(0x93)](isString,_0x19e58c)?_0x19e58c[_0x38a3f0(0xe1)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'';const _0x52410b=commandRepository['getCommands'](_0x18317f),_0x237b92=globals[_0x38a3f0(0xc1)](_0x58e123[_0x38a3f0(0xe4)]),_0x5d8ae4=globals['getGlobal'](_0x58e123[_0x38a3f0(0xef)]),_0x1eef70=globals[_0x38a3f0(0xc1)](_0x58e123[_0x38a3f0(0x8f)]),_0x5782c4=![],_0x2e113d=new Date();if(_0xf99bf3){const _0x4f94fb=_0x58e123[_0x38a3f0(0x7a)](timeoutPromise,constants[_0x38a3f0(0xa3)],_0x58e123[_0x38a3f0(0xe0)],_0x58e123[_0x38a3f0(0x9f)],_0x2e113d,this[_0x38a3f0(0x89)],this['framework']);_0x3331d4=await Promise[_0x38a3f0(0x73)]([this['BrowserstackHealing'][_0x38a3f0(0xb4)](_0x5ea48b,_0x11007e,_0x28f5a9,_0x157ae5,_0x5d8ae4,_0x18317f,_0x52410b,_0x19e58c)['then'](_0x2d8526=>{const _0xc1850c=_0x38a3f0;return _0x4f94fb[_0xc1850c(0xe8)](),_0x2d8526;}),_0x4f94fb]);}else{if(commandRepository['isSelfHealEnabled']()){const _0x6cf846=_0x58e123[_0x38a3f0(0xa2)](timeoutPromise,constants[_0x38a3f0(0xae)],_0x58e123[_0x38a3f0(0xdb)],_0x58e123[_0x38a3f0(0xc4)],_0x2e113d,this[_0x38a3f0(0x89)],this[_0x38a3f0(0xd5)]);_0x3331d4=await Promise[_0x38a3f0(0x73)]([this[_0x38a3f0(0xc8)]['healFailure'](_0x5ea48b,_0x11007e,_0x28f5a9,_0x157ae5,_0x237b92,_0x5d8ae4,_0x18317f,_0x52410b,_0x5782c4,_0x1eef70,_0x19e58c)[_0x38a3f0(0xdc)](_0x5b81f7=>{return _0x6cf846['cancel'](),_0x5b81f7;}),_0x6cf846]);}}_0x3331d4&&await _0x353c57[_0x38a3f0(0xa0)](_0x3331d4);}}async[a89_0x3d939d(0x72)](_0x213a50,_0xb1fd00,_0x4e4c49){const _0x3831bc=a89_0x3d939d;try{await this[_0x3831bc(0xec)](_0x213a50,_0xb1fd00,_0x4e4c49,!![]);}catch(_0x11a1f1){return logger[_0x3831bc(0xcf)](_0x3831bc(0xd1)+(_0x11a1f1&&_0x11a1f1[_0x3831bc(0xe7)]?_0x11a1f1['message']:'')),![];}return!![];}async[a89_0x3d939d(0xd4)](_0xee6ec2,_0x52e9e6,_0x3e957b){const _0x40afa5=a89_0x3d939d,_0x34ffc5={'HiXIY':function(_0x31004b,_0x2a3f5a,_0x5e356b,_0x19a93f,_0x4ba5e9,_0x45afc7,_0x4f83d0){return _0x31004b(_0x2a3f5a,_0x5e356b,_0x19a93f,_0x4ba5e9,_0x45afc7,_0x4f83d0);},'FjeIC':_0x40afa5(0xbd),'fdcnJ':_0x40afa5(0xab),'dLtQT':_0x40afa5(0xb8)};try{await this[_0x40afa5(0xec)](_0xee6ec2,_0x52e9e6,_0x3e957b,![]);const _0x434569=(await _0x52e9e6['getSession']())[_0x40afa5(0x78)](),_0x4723e3=new Date(),_0x123eab=_0x34ffc5[_0x40afa5(0x97)](timeoutPromise,constants[_0x40afa5(0x74)],_0x34ffc5[_0x40afa5(0xc7)],_0x34ffc5[_0x40afa5(0x84)],_0x4723e3,this['config'],this[_0x40afa5(0xd5)]),_0xa4c27=await Promise[_0x40afa5(0x73)]([this[_0x40afa5(0xc8)]['pollResult'](constants[_0x40afa5(0x79)],_0x434569,globals[_0x40afa5(0xc1)](_0x34ffc5[_0x40afa5(0xb1)]))[_0x40afa5(0xdc)](_0x31635c=>{const _0x3eb782=_0x40afa5;return _0x123eab[_0x3eb782(0xe8)](),_0x31635c;}),_0x123eab]);if(_0xa4c27&&_0xa4c27['selector']&&_0xa4c27['value']){const _0x3e643b={};return _0x3e643b[_0x40afa5(0xee)]=_0xa4c27['selector'],_0x3e643b[_0x40afa5(0xb7)]=_0xa4c27['value'],_0x3e643b['aiHealing']=!![],_0x3e643b;}const _0x5aab43={};return _0x5aab43[_0x40afa5(0xee)]=_0x3e957b[_0x40afa5(0xb6)][_0x40afa5(0x90)],_0x5aab43[_0x40afa5(0xb7)]=_0xa4c27[_0x40afa5(0xe6)],_0x5aab43['aiHealing']=!![],_0x5aab43;}catch(_0x5b1ea0){return logger['debug'](_0x40afa5(0xd2)+(_0x5b1ea0&&_0x5b1ea0['message']?_0x5b1ea0[_0x40afa5(0xe7)]:'')),logger[_0x40afa5(0xa7)](_0x40afa5(0xeb)+_0x3e957b[_0x40afa5(0xa4)]+'\x20command'),_0x3e957b;}}}exports['aiSdkWrapper']=Object[a89_0x3d939d(0x9c)](new AiSdkWrapper());