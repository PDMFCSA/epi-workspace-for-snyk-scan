const a87_0x54d436=a87_0x4ec6;(function(_0x1a1543,_0x4059e4){const _0x167900=a87_0x4ec6,_0x40c189=_0x1a1543();while(!![]){try{const _0x135e73=-parseInt(_0x167900(0x236))/0x1*(parseInt(_0x167900(0x1df))/0x2)+-parseInt(_0x167900(0x1f3))/0x3*(parseInt(_0x167900(0x210))/0x4)+-parseInt(_0x167900(0x200))/0x5*(parseInt(_0x167900(0x1c5))/0x6)+parseInt(_0x167900(0x1d1))/0x7*(parseInt(_0x167900(0x22b))/0x8)+parseInt(_0x167900(0x233))/0x9*(parseInt(_0x167900(0x215))/0xa)+-parseInt(_0x167900(0x1cd))/0xb*(-parseInt(_0x167900(0x209))/0xc)+parseInt(_0x167900(0x211))/0xd;if(_0x135e73===_0x4059e4)break;else _0x40c189['push'](_0x40c189['shift']());}catch(_0x4729c8){_0x40c189['push'](_0x40c189['shift']());}}}(a87_0x2756,0xb828f));const path=require(a87_0x54d436(0x21c)),{commandRepository}=require(a87_0x54d436(0x239)),constants=require(a87_0x54d436(0x202)),logger=require(a87_0x54d436(0x1e6))['winstonLogger'],globals=require('../globals'),timeoutPromise=require(a87_0x54d436(0x228)),isUndefinedOrNull=_0x1fa65c=>_0x1fa65c===undefined||_0x1fa65c===null||_0x1fa65c==='',isNotUndefinedOrNull=_0x5ee229=>!isUndefinedOrNull(_0x5ee229),isString=_0x289cb9=>isNotUndefinedOrNull(_0x289cb9)&&typeof _0x289cb9===a87_0x54d436(0x1e0);function a87_0x2756(){const _0x1cabb1=['BrowserstackHealingPollResultFailed','aiHeal_sessionToken','ABBtY','SdKuj','capabilities_','getGlobal','APsAz','locatorValue','6cCsvCP','freeze','parameters_','using','POLL_HEALING_RESULT_TIMEOUT','getTestName','sjbOh','Unable\x20to\x20load\x20healing\x20module,\x20error:\x20','kMmrO','ZujOi','aiHeal_isGroupAIEnabled','keys','microsoftedge','5EpkAQf','getProjectName','../../bin/utils/constants','isSelfHealEnabled','\x22,\x20\x22tcgUrls\x22:\x20{\x22','safariOptions_','error','value','Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20','683352oQUcYS','HEALING_FAILURE_TIMEOUT','spwzY','then','getId','TCG_URL','\x20command','2147868HaEbWT','8212282vFnYrU','Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20','_handleEvent','split','250somEYB','toLowerCase','IavaI','wihMr','healFailure','BrowserstackHealing.healFailure\x20method\x20timed\x20out','browserstackSessionName','path','cancel','message','Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20','ivEeJ','aiHeal_groupId','ohagz','BrowserstackHealing.logData\x20method\x20timed\x20out','ApqPJ','LnjRp','s://','HGiNp','../../helpers/timeoutPromise','HxSIa','handleFailure','128680OrlRba','setTcgToken','uPxkR','aOeAA','getCapabilities','firefox','xbJis','locatorType','519381MBCJhy','BrowserstackHealing.setToken\x20method\x20timed\x20out','BrowserstackHealing','1rjllOJ','setToken','BrowserstackHealingHealFailureFailed','./autoHealHelper','chromeOptions_','browserName','getCommands','TCG_REGION','QYCdq','BWnGw','UQJPN','5544270jjDhlH','HAxyh','logData','safari','join','name_','config','aiHealing','143TFspPf','../../ai-sdk-node/bundle','aiHeal_userId','ieOptions_','413pLdCOW','initializeCapabilities','map_','HEALING_LOG_DATA_TIMEOUT','yxyyl','edgeOptions_','initializeHealingCapabilities','framework','YhNrs','\x22}}}','forEach','hdypA','getSession','Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20','2022908GGmKTw','string','get','firefoxOptions_','replace','xXnUU','yeKaG','../logger','BrowserstackHealingSetTcgTokenFailed','race','MGAzB','executeScript'];a87_0x2756=function(){return _0x1cabb1;};return a87_0x2756();}function a87_0x4ec6(_0x417d50,_0x4f4245){const _0x27561e=a87_0x2756();return a87_0x4ec6=function(_0x4ec672,_0x165c8d){_0x4ec672=_0x4ec672-0x1c3;let _0x275ff5=_0x27561e[_0x4ec672];return _0x275ff5;},a87_0x4ec6(_0x417d50,_0x4f4245);}class AiSdkWrapper{constructor(){const _0x2343dc=a87_0x54d436,_0x46f0a0={'kMmrO':function(_0x7f1b9b,_0x3414eb){return _0x7f1b9b(_0x3414eb);},'YhNrs':_0x2343dc(0x1ce)};this[_0x2343dc(0x235)]=undefined;try{this[_0x2343dc(0x235)]=_0x46f0a0[_0x2343dc(0x1fb)](require,path[_0x2343dc(0x1c9)](__dirname,_0x46f0a0[_0x2343dc(0x1d9)]));}catch(_0x35aadd){logger[_0x2343dc(0x206)](_0x2343dc(0x1fa)+(_0x35aadd&&_0x35aadd[_0x2343dc(0x21e)]?_0x35aadd['message']:''));}}[a87_0x54d436(0x1d7)](_0x5f824c){const _0x142de5=a87_0x54d436,_0x327079={};_0x327079['HAxyh']='newCapabilities',_0x327079[_0x142de5(0x23e)]=function(_0x28b36f,_0x1df942){return _0x28b36f===_0x1df942;},_0x327079[_0x142de5(0x1f1)]='chrome',_0x327079['IavaI']=_0x142de5(0x230),_0x327079['UQJPN']=_0x142de5(0x1c8),_0x327079['HxSIa']=function(_0x260e2f,_0x467572){return _0x260e2f===_0x467572;},_0x327079[_0x142de5(0x20b)]='edge',_0x327079['wihMr']=function(_0x12f2ed,_0x444c59){return _0x12f2ed===_0x444c59;},_0x327079['sjbOh']=_0x142de5(0x1ff),_0x327079[_0x142de5(0x22d)]=function(_0x4558df,_0x46b945){return _0x4558df===_0x46b945;};const _0x813708=_0x327079;try{const _0x20bdbf=this['BrowserstackHealing'][_0x142de5(0x1d2)](Object['fromEntries'](_0x5f824c[_0x142de5(0x22f)]()[_0x142de5(0x1d3)]));console['log'](_0x813708[_0x142de5(0x1c6)],_0x20bdbf);if(_0x813708['QYCdq'](_0x20bdbf?.[_0x142de5(0x23b)]?.[_0x142de5(0x216)](),_0x813708[_0x142de5(0x1f1)]))_0x5f824c[_0x142de5(0x23a)]=_0x20bdbf;else{if(_0x813708[_0x142de5(0x23e)](_0x20bdbf?.['browserName']?.[_0x142de5(0x216)](),_0x813708[_0x142de5(0x217)]))_0x5f824c[_0x142de5(0x1e2)]=_0x20bdbf;else{if(_0x813708['QYCdq'](_0x20bdbf?.[_0x142de5(0x23b)]?.[_0x142de5(0x216)](),_0x813708[_0x142de5(0x1c4)]))_0x5f824c[_0x142de5(0x205)]=_0x20bdbf;else{if(_0x813708[_0x142de5(0x229)](_0x20bdbf?.[_0x142de5(0x23b)]?.['toLowerCase'](),_0x813708[_0x142de5(0x20b)])||_0x813708[_0x142de5(0x218)](_0x20bdbf?.[_0x142de5(0x23b)]?.[_0x142de5(0x216)](),_0x813708[_0x142de5(0x1f9)]))_0x5f824c[_0x142de5(0x1d6)]=_0x20bdbf;else _0x813708[_0x142de5(0x22d)](_0x20bdbf?.[_0x142de5(0x23b)]?.[_0x142de5(0x216)](),'ie')&&(_0x5f824c[_0x142de5(0x1d0)]=_0x20bdbf);}}}Object[_0x142de5(0x1fe)](_0x20bdbf)[_0x142de5(0x1db)](_0x18da91=>{const _0x32a302=_0x142de5,_0x4a14cb=_0x5f824c[_0x32a302(0x1ef)][_0x32a302(0x1e1)](_0x18da91);_0x5f824c[_0x32a302(0x1ef)]['set'](_0x18da91,_0x20bdbf[_0x18da91]);});}catch(_0x1673f6){logger[_0x142de5(0x206)](_0x142de5(0x21f)+(_0x1673f6&&_0x1673f6['message']?_0x1673f6[_0x142de5(0x21e)]:''));}}async[a87_0x54d436(0x22c)](_0x52aba5){const _0x2ddba0=a87_0x54d436,_0x4f9ce5={'hdypA':function(_0x2754a1,_0x2e776e,_0x3f6df8,_0xa9974b,_0x32908,_0x241743,_0x5a1566){return _0x2754a1(_0x2e776e,_0x3f6df8,_0xa9974b,_0x32908,_0x241743,_0x5a1566);},'FGilO':_0x2ddba0(0x234),'YsLuo':_0x2ddba0(0x1e7),'ZujOi':_0x2ddba0(0x1ec)},_0x1a41c9=new Date(),_0x130c07=_0x4f9ce5[_0x2ddba0(0x1dc)](timeoutPromise,constants['SET_TCG_TOKEN_TIMEOUT'],_0x4f9ce5['FGilO'],_0x4f9ce5['YsLuo'],_0x1a41c9,this['config'],this['framework']);await Promise[_0x2ddba0(0x1e8)]([this[_0x2ddba0(0x235)][_0x2ddba0(0x237)](_0x52aba5,globals[_0x2ddba0(0x1f0)](_0x4f9ce5[_0x2ddba0(0x1fc)]),constants[_0x2ddba0(0x20e)])['then'](()=>{const _0x54db58=_0x2ddba0;_0x130c07[_0x54db58(0x21d)]();}),_0x130c07]);}async[a87_0x54d436(0x213)](_0xc6b41f,_0x2aa50a,_0x11b4b0,_0xe27c2e){const _0x1b8604=a87_0x54d436,_0x51a183={'ohagz':function(_0x22fec2,_0x512bd6){return _0x22fec2===_0x512bd6;},'yeKaG':function(_0x145a4f,_0x3b2b17){return _0x145a4f(_0x3b2b17);},'GgEAD':function(_0x43c931,_0x458619){return _0x43c931(_0x458619);},'SdKuj':function(_0x1a0615,_0x31bb25){return _0x1a0615(_0x31bb25);},'zubjK':function(_0x3a4309,_0x2b3728){return _0x3a4309(_0x2b3728);},'qWnht':function(_0x5c36ba,_0x483576){return _0x5c36ba(_0x483576);},'xXnUU':function(_0x22e7a4,_0x1804df){return _0x22e7a4(_0x1804df);},'enMob':_0x1b8604(0x226),'yxyyl':function(_0x3cde59,_0x53a3ac){return _0x3cde59(_0x53a3ac);},'ivEeJ':_0x1b8604(0x1cf),'ApqPJ':_0x1b8604(0x221),'LnjRp':_0x1b8604(0x1fd),'aOeAA':function(_0x5209ca,_0x2deff9,_0x310dfa,_0x3b9f34,_0x4010f1,_0x525c41,_0x4bba87){return _0x5209ca(_0x2deff9,_0x310dfa,_0x3b9f34,_0x4010f1,_0x525c41,_0x4bba87);},'ABBtY':_0x1b8604(0x223),'ZlopN':'BrowserstackHealingLogDataFailed','xbJis':function(_0x2c3e75,_0x437247,_0x108558,_0x5dbba0,_0x3ba421,_0x263562,_0x31dea0){return _0x2c3e75(_0x437247,_0x108558,_0x5dbba0,_0x3ba421,_0x263562,_0x31dea0);},'VSbMe':_0x1b8604(0x21a),'oUTEy':_0x1b8604(0x238)},_0x57513d=(await _0x2aa50a[_0x1b8604(0x1dd)]())[_0x1b8604(0x20d)]();let _0x4b7c04='';if(commandRepository[_0x1b8604(0x203)]()&&_0x51a183[_0x1b8604(0x222)](_0xe27c2e,![])||_0x51a183[_0x1b8604(0x222)](_0xe27c2e,!![])){const _0x23148f=_0x51a183['yeKaG'](isNotUndefinedOrNull,_0x11b4b0[_0x1b8604(0x1f5)][_0x1b8604(0x1f6)])&&_0x51a183['GgEAD'](isString,_0x11b4b0[_0x1b8604(0x1f5)][_0x1b8604(0x1f6)])?_0x11b4b0['parameters_'][_0x1b8604(0x1f6)][_0x1b8604(0x1e3)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'',_0x4e9542=_0x51a183[_0x1b8604(0x1e5)](isNotUndefinedOrNull,_0x11b4b0['parameters_'][_0x1b8604(0x1f6)])&&_0x51a183[_0x1b8604(0x1e5)](isString,_0x11b4b0[_0x1b8604(0x1f5)][_0x1b8604(0x207)])?_0x11b4b0[_0x1b8604(0x1f5)][_0x1b8604(0x207)]['replace'](/'/g,'\x5c\x27')[_0x1b8604(0x1e3)](/"/g,'\x5c\x22'):'',_0x3b91f9=_0x51a183[_0x1b8604(0x1ee)](isNotUndefinedOrNull,commandRepository[_0x1b8604(0x201)]())&&_0x51a183['SdKuj'](isString,commandRepository[_0x1b8604(0x201)]())?commandRepository['getProjectName']()[_0x1b8604(0x1e3)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'';let _0x5c6ea3=_0x51a183['zubjK'](isNotUndefinedOrNull,global[_0x1b8604(0x21b)])&&_0x51a183['GgEAD'](isString,global[_0x1b8604(0x21b)])?global[_0x1b8604(0x21b)][_0x1b8604(0x1e3)](/'/g,'\x5c\x27')[_0x1b8604(0x1e3)](/"/g,'\x5c\x22'):'';!_0x5c6ea3&&(_0x5c6ea3=_0x51a183['qWnht'](isNotUndefinedOrNull,commandRepository['getTestName']())&&_0x51a183[_0x1b8604(0x1e4)](isString,commandRepository[_0x1b8604(0x1f8)]())?commandRepository['getTestName']()[_0x1b8604(0x1e3)](/'/g,'\x5c\x27')[_0x1b8604(0x1e3)](/"/g,'\x5c\x22'):'');let _0x362166='{\x22region\x22:\x20\x22'+constants[_0x1b8604(0x23d)]+_0x1b8604(0x204)+constants['TCG_REGION']+'\x22:\x20{\x22endpoint\x22:\x20\x22'+constants[_0x1b8604(0x20e)][_0x1b8604(0x214)](_0x51a183['enMob'])[0x1]+_0x1b8604(0x1da);_0x362166=_0x51a183[_0x1b8604(0x1d5)](isNotUndefinedOrNull,_0x362166)&&_0x51a183[_0x1b8604(0x1e4)](isString,_0x362166)?_0x362166[_0x1b8604(0x1e3)](/'/g,'\x5c\x27')[_0x1b8604(0x1e3)](/"/g,'\x5c\x22'):'';const _0x33373f=commandRepository[_0x1b8604(0x23c)](_0x57513d),_0x390e8f=globals[_0x1b8604(0x1f0)](_0x51a183[_0x1b8604(0x220)]),_0x3e8d9d=globals['getGlobal'](_0x51a183[_0x1b8604(0x224)]),_0x10e670=globals[_0x1b8604(0x1f0)](_0x51a183[_0x1b8604(0x225)]),_0x3424ff=![],_0x26a42c=new Date();if(_0xe27c2e){const _0x4757f0=_0x51a183[_0x1b8604(0x22e)](timeoutPromise,constants[_0x1b8604(0x1d4)],_0x51a183[_0x1b8604(0x1ed)],_0x51a183['ZlopN'],_0x26a42c,this[_0x1b8604(0x1cb)],this['framework']);_0x4b7c04=await Promise[_0x1b8604(0x1e8)]([this['BrowserstackHealing'][_0x1b8604(0x1c7)](_0x23148f,_0x4e9542,_0x3b91f9,_0x5c6ea3,_0x3e8d9d,_0x57513d,_0x33373f,_0x362166)[_0x1b8604(0x20c)](_0x1ff803=>{const _0x2a869c=_0x1b8604;return _0x4757f0[_0x2a869c(0x21d)](),_0x1ff803;}),_0x4757f0]);}else{if(commandRepository[_0x1b8604(0x203)]()){const _0x13ccdb=_0x51a183[_0x1b8604(0x231)](timeoutPromise,constants[_0x1b8604(0x20a)],_0x51a183['VSbMe'],_0x51a183['oUTEy'],_0x26a42c,this['config'],this[_0x1b8604(0x1d8)]);_0x4b7c04=await Promise[_0x1b8604(0x1e8)]([this[_0x1b8604(0x235)][_0x1b8604(0x219)](_0x23148f,_0x4e9542,_0x3b91f9,_0x5c6ea3,_0x390e8f,_0x3e8d9d,_0x57513d,_0x33373f,_0x3424ff,_0x10e670,_0x362166)[_0x1b8604(0x20c)](_0x16dd38=>{const _0x2a6858=_0x1b8604;return _0x13ccdb[_0x2a6858(0x21d)](),_0x16dd38;}),_0x13ccdb]);}}_0x4b7c04&&await _0x2aa50a[_0x1b8604(0x1ea)](_0x4b7c04);}}async['handleSuccess'](_0x25ab04,_0x16348e,_0x4df101){const _0x32ae95=a87_0x54d436;try{await this[_0x32ae95(0x213)](_0x25ab04,_0x16348e,_0x4df101,!![]);}catch(_0xbdaefb){return logger[_0x32ae95(0x206)](_0x32ae95(0x1de)+(_0xbdaefb&&_0xbdaefb['message']?_0xbdaefb[_0x32ae95(0x21e)]:'')),![];}return!![];}async[a87_0x54d436(0x22a)](_0x117c73,_0x3d2e60,_0xeea23a){const _0x307056=a87_0x54d436,_0x24b554={'UEXpM':function(_0x1f43f2,_0xd57eef,_0x36b9ef,_0x55ea16,_0x4e6355,_0xad176f,_0x26a785){return _0x1f43f2(_0xd57eef,_0x36b9ef,_0x55ea16,_0x4e6355,_0xad176f,_0x26a785);},'HGiNp':'BrowserstackHealing.pollResult\x20method\x20timed\x20out','MGAzB':_0x307056(0x1eb),'BWnGw':_0x307056(0x1ec)};try{await this[_0x307056(0x213)](_0x117c73,_0x3d2e60,_0xeea23a,![]);const _0x2cf2e7=(await _0x3d2e60[_0x307056(0x1dd)]())[_0x307056(0x20d)](),_0x241f91=new Date(),_0x5905ed=_0x24b554['UEXpM'](timeoutPromise,constants[_0x307056(0x1f7)],_0x24b554[_0x307056(0x227)],_0x24b554[_0x307056(0x1e9)],_0x241f91,this[_0x307056(0x1cb)],this[_0x307056(0x1d8)]),_0x55f6fd=await Promise[_0x307056(0x1e8)]([this[_0x307056(0x235)]['pollResult'](constants[_0x307056(0x20e)],_0x2cf2e7,globals[_0x307056(0x1f0)](_0x24b554[_0x307056(0x1c3)]))[_0x307056(0x20c)](_0x548dc8=>{const _0x2e8ea1=_0x307056;return _0x5905ed[_0x2e8ea1(0x21d)](),_0x548dc8;}),_0x5905ed]);if(_0x55f6fd&&_0x55f6fd['selector']&&_0x55f6fd['value']){const _0x4d7199={};return _0x4d7199[_0x307056(0x232)]=_0x55f6fd['selector'],_0x4d7199[_0x307056(0x1f2)]=_0x55f6fd[_0x307056(0x207)],_0x4d7199[_0x307056(0x1cc)]=!![],_0x4d7199;}const _0x4144d8={};return _0x4144d8['locatorType']=_0xeea23a[_0x307056(0x1f5)][_0x307056(0x1f6)],_0x4144d8[_0x307056(0x1f2)]=_0x55f6fd['value'],_0x4144d8['aiHealing']=!![],_0x4144d8;}catch(_0xcae29f){return logger['debug'](_0x307056(0x208)+(_0xcae29f&&_0xcae29f[_0x307056(0x21e)]?_0xcae29f['message']:'')),logger['info'](_0x307056(0x212)+_0xeea23a[_0x307056(0x1ca)]+_0x307056(0x20f)),_0xeea23a;}}}exports['aiSdkWrapper']=Object[a87_0x54d436(0x1f4)](new AiSdkWrapper());