const a59_0x1ffb84=a59_0x54fa;(function(_0x24297d,_0x4ac393){const _0x118fb1=a59_0x54fa,_0x35504c=_0x24297d();while(!![]){try{const _0x271e43=parseInt(_0x118fb1(0x106))/0x1+parseInt(_0x118fb1(0x15f))/0x2*(-parseInt(_0x118fb1(0xfb))/0x3)+-parseInt(_0x118fb1(0x158))/0x4+-parseInt(_0x118fb1(0x165))/0x5*(parseInt(_0x118fb1(0x138))/0x6)+-parseInt(_0x118fb1(0x13c))/0x7+parseInt(_0x118fb1(0x141))/0x8+parseInt(_0x118fb1(0x153))/0x9;if(_0x271e43===_0x4ac393)break;else _0x35504c['push'](_0x35504c['shift']());}catch(_0x440628){_0x35504c['push'](_0x35504c['shift']());}}}(a59_0x4c41,0x51cce));function a59_0x54fa(_0x558c8f,_0xa68d47){const _0x4c4117=a59_0x4c41();return a59_0x54fa=function(_0x54fab1,_0x36f8ed){_0x54fab1=_0x54fab1-0xf7;let _0x2e6140=_0x4c4117[_0x54fab1];return _0x2e6140;},a59_0x54fa(_0x558c8f,_0xa68d47);}const path=require(a59_0x1ffb84(0x133)),{commandRepository}=require(a59_0x1ffb84(0x13d)),constants=require(a59_0x1ffb84(0x14c)),logger=require('../logger')[a59_0x1ffb84(0x150)],globals=require('../globals'),timeoutPromise=require('../../helpers/timeoutPromise'),isUndefinedOrNull=_0x3c33d6=>_0x3c33d6===undefined||_0x3c33d6===null||_0x3c33d6==='',isNotUndefinedOrNull=_0x4fbc9a=>!isUndefinedOrNull(_0x4fbc9a),isString=_0x56e49a=>isNotUndefinedOrNull(_0x56e49a)&&typeof _0x56e49a==='string';class AiSdkWrapper{constructor(){const _0x54f8b5=a59_0x1ffb84,_0x2ecd83={'afGsU':function(_0x100e92,_0x3f2359){return _0x100e92(_0x3f2359);},'LebWw':_0x54f8b5(0x12d)};this[_0x54f8b5(0x149)]=undefined;try{this[_0x54f8b5(0x149)]=_0x2ecd83[_0x54f8b5(0x15b)](require,path[_0x54f8b5(0x11f)](__dirname,_0x2ecd83[_0x54f8b5(0x168)]));}catch(_0x510d42){logger[_0x54f8b5(0xfc)]('Unable\x20to\x20load\x20healing\x20module,\x20error:\x20'+(_0x510d42&&_0x510d42[_0x54f8b5(0x139)]?_0x510d42[_0x54f8b5(0x139)]:''));}}[a59_0x1ffb84(0x126)](_0xc003e9){const _0x5addc6=a59_0x1ffb84,_0x24437a={};_0x24437a[_0x5addc6(0x114)]=_0x5addc6(0x13a),_0x24437a[_0x5addc6(0x11b)]=function(_0x5d948b,_0xc7e744){return _0x5d948b===_0xc7e744;},_0x24437a[_0x5addc6(0x142)]='chrome',_0x24437a[_0x5addc6(0x156)]=_0x5addc6(0x117),_0x24437a['orUnf']=function(_0x3374d7,_0x55e1b7){return _0x3374d7===_0x55e1b7;},_0x24437a[_0x5addc6(0x151)]='safari',_0x24437a['gqjaH']=function(_0xfd1bdf,_0x5c7f77){return _0xfd1bdf===_0x5c7f77;},_0x24437a[_0x5addc6(0x10f)]=_0x5addc6(0x145),_0x24437a[_0x5addc6(0x13b)]=_0x5addc6(0x132);const _0x25a3fb=_0x24437a;try{const _0x4645bf=this['BrowserstackHealing'][_0x5addc6(0x105)](Object['fromEntries'](_0xc003e9[_0x5addc6(0x137)]()[_0x5addc6(0x135)]));console[_0x5addc6(0x159)](_0x25a3fb[_0x5addc6(0x114)],_0x4645bf);if(_0x25a3fb['bKwnf'](_0x4645bf?.[_0x5addc6(0x15d)]?.['toLowerCase'](),_0x25a3fb[_0x5addc6(0x142)]))_0xc003e9['chromeOptions_']=_0x4645bf;else{if(_0x25a3fb[_0x5addc6(0x11b)](_0x4645bf?.[_0x5addc6(0x15d)]?.['toLowerCase'](),_0x25a3fb[_0x5addc6(0x156)]))_0xc003e9[_0x5addc6(0x12b)]=_0x4645bf;else{if(_0x25a3fb[_0x5addc6(0x160)](_0x4645bf?.['browserName']?.[_0x5addc6(0xf7)](),_0x25a3fb['uQiqJ']))_0xc003e9['safariOptions_']=_0x4645bf;else{if(_0x25a3fb['gqjaH'](_0x4645bf?.['browserName']?.[_0x5addc6(0xf7)](),_0x25a3fb[_0x5addc6(0x10f)])||_0x25a3fb[_0x5addc6(0x129)](_0x4645bf?.[_0x5addc6(0x15d)]?.[_0x5addc6(0xf7)](),_0x25a3fb['TWqgd']))_0xc003e9[_0x5addc6(0x120)]=_0x4645bf;else _0x25a3fb[_0x5addc6(0x11b)](_0x4645bf?.['browserName']?.[_0x5addc6(0xf7)](),'ie')&&(_0xc003e9['ieOptions_']=_0x4645bf);}}}Object['keys'](_0x4645bf)[_0x5addc6(0x112)](_0x3ca9fc=>{const _0x574c2b=_0x5addc6,_0x400372=_0xc003e9['capabilities_'][_0x574c2b(0x11c)](_0x3ca9fc);_0xc003e9[_0x574c2b(0x161)][_0x574c2b(0x155)](_0x3ca9fc,_0x4645bf[_0x3ca9fc]);});}catch(_0x502f55){logger[_0x5addc6(0xfc)](_0x5addc6(0x12e)+(_0x502f55&&_0x502f55['message']?_0x502f55[_0x5addc6(0x139)]:''));}}async['setTcgToken'](_0x3f63eb){const _0x304727=a59_0x1ffb84,_0x49da14={'qbKIQ':function(_0x57536d,_0x2f6651,_0x4f7434,_0x5c41d7,_0x597924,_0x1122a8,_0x38bcba){return _0x57536d(_0x2f6651,_0x4f7434,_0x5c41d7,_0x597924,_0x1122a8,_0x38bcba);},'clhKr':_0x304727(0x10b),'eSFFk':'BrowserstackHealingSetTcgTokenFailed','sgqfd':_0x304727(0x102)},_0x37c2fb=new Date(),_0x181860=_0x49da14[_0x304727(0x103)](timeoutPromise,constants[_0x304727(0x13f)],_0x49da14[_0x304727(0x154)],_0x49da14[_0x304727(0x169)],_0x37c2fb,this[_0x304727(0x125)],this[_0x304727(0x148)]);await Promise[_0x304727(0x108)]([this['BrowserstackHealing'][_0x304727(0x10a)](_0x3f63eb,globals['getGlobal'](_0x49da14['sgqfd']),constants[_0x304727(0x15a)])[_0x304727(0x16c)](()=>{const _0x3a12b0=_0x304727;_0x181860[_0x3a12b0(0x12c)]();}),_0x181860]);}async[a59_0x1ffb84(0x123)](_0x1cea44,_0x1935c1,_0x1318eb,_0x469045){const _0x37e86f=a59_0x1ffb84,_0x1f7372={'tioRo':function(_0x17002d,_0x2ba054){return _0x17002d===_0x2ba054;},'JXqKy':function(_0x359c2a,_0x2a1d92){return _0x359c2a(_0x2a1d92);},'QFgPq':function(_0x431746,_0x4ba6d9){return _0x431746(_0x4ba6d9);},'zmtWr':function(_0x5d11b9,_0x50ea5b){return _0x5d11b9(_0x50ea5b);},'kijij':function(_0x5b856a,_0x11db8c){return _0x5b856a(_0x11db8c);},'bduuX':function(_0x59a761,_0x39c7a6){return _0x59a761(_0x39c7a6);},'tVGQV':function(_0x26070a,_0x24fc9f){return _0x26070a(_0x24fc9f);},'HyWJq':function(_0x3fe562,_0x19ccb4){return _0x3fe562(_0x19ccb4);},'NVECy':_0x37e86f(0xf8),'KGHIz':function(_0x5139ad,_0x299c44){return _0x5139ad(_0x299c44);},'YVenU':function(_0x275cc1,_0x19a9bc){return _0x275cc1(_0x19a9bc);},'QrpxH':'aiHeal_userId','izDRn':_0x37e86f(0x116),'moBAJ':_0x37e86f(0x13e),'fqrwQ':function(_0x129793,_0x2b0799,_0x281ff6,_0x5a6bfa,_0x19e9e8,_0x471309,_0x57a255){return _0x129793(_0x2b0799,_0x281ff6,_0x5a6bfa,_0x19e9e8,_0x471309,_0x57a255);},'yUfIB':_0x37e86f(0x124),'KQOCc':_0x37e86f(0x16b),'qeruE':function(_0x1c5176,_0xb11bd9,_0x5ec364,_0x13528c,_0x5bdd70,_0x3e2f2f,_0x2ed6df){return _0x1c5176(_0xb11bd9,_0x5ec364,_0x13528c,_0x5bdd70,_0x3e2f2f,_0x2ed6df);},'XiHyX':_0x37e86f(0xff),'EwkAu':_0x37e86f(0x163)},_0x376628=(await _0x1935c1[_0x37e86f(0x11d)]())[_0x37e86f(0x113)]();let _0x27033a='';if(commandRepository['isSelfHealEnabled']()&&_0x1f7372[_0x37e86f(0x12a)](_0x469045,![])||_0x1f7372[_0x37e86f(0x12a)](_0x469045,!![])){const _0x5c38be=_0x1f7372['JXqKy'](isNotUndefinedOrNull,_0x1318eb[_0x37e86f(0x100)][_0x37e86f(0x12f)])&&_0x1f7372['QFgPq'](isString,_0x1318eb[_0x37e86f(0x100)][_0x37e86f(0x12f)])?_0x1318eb[_0x37e86f(0x100)][_0x37e86f(0x12f)][_0x37e86f(0x115)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'',_0x260ecd=_0x1f7372[_0x37e86f(0x157)](isNotUndefinedOrNull,_0x1318eb[_0x37e86f(0x100)][_0x37e86f(0x12f)])&&_0x1f7372[_0x37e86f(0x166)](isString,_0x1318eb[_0x37e86f(0x100)][_0x37e86f(0x16a)])?_0x1318eb[_0x37e86f(0x100)][_0x37e86f(0x16a)][_0x37e86f(0x115)](/'/g,'\x5c\x27')[_0x37e86f(0x115)](/"/g,'\x5c\x22'):'',_0x362a7c=_0x1f7372[_0x37e86f(0xf9)](isNotUndefinedOrNull,commandRepository[_0x37e86f(0x162)]())&&_0x1f7372[_0x37e86f(0x14b)](isString,commandRepository[_0x37e86f(0x162)]())?commandRepository[_0x37e86f(0x162)]()[_0x37e86f(0x115)](/'/g,'\x5c\x27')[_0x37e86f(0x115)](/"/g,'\x5c\x22'):'';let _0x5e6c05=_0x1f7372['JXqKy'](isNotUndefinedOrNull,global['browserstackSessionName'])&&_0x1f7372[_0x37e86f(0x157)](isString,global[_0x37e86f(0x127)])?global[_0x37e86f(0x127)][_0x37e86f(0x115)](/'/g,'\x5c\x27')[_0x37e86f(0x115)](/"/g,'\x5c\x22'):'';!_0x5e6c05&&(_0x5e6c05=_0x1f7372['tVGQV'](isNotUndefinedOrNull,commandRepository[_0x37e86f(0x15e)]())&&_0x1f7372[_0x37e86f(0x10c)](isString,commandRepository['getTestName']())?commandRepository[_0x37e86f(0x15e)]()[_0x37e86f(0x115)](/'/g,'\x5c\x27')[_0x37e86f(0x115)](/"/g,'\x5c\x22'):'');let _0x40a3cd=_0x37e86f(0x10e)+constants[_0x37e86f(0x147)]+'\x22,\x20\x22tcgUrls\x22:\x20{\x22'+constants['TCG_REGION']+_0x37e86f(0x128)+constants['TCG_URL'][_0x37e86f(0x130)](_0x1f7372[_0x37e86f(0x101)])[0x1]+'\x22}}}';_0x40a3cd=_0x1f7372[_0x37e86f(0x107)](isNotUndefinedOrNull,_0x40a3cd)&&_0x1f7372[_0x37e86f(0x134)](isString,_0x40a3cd)?_0x40a3cd[_0x37e86f(0x115)](/'/g,'\x5c\x27')[_0x37e86f(0x115)](/"/g,'\x5c\x22'):'';const _0x3da536=commandRepository[_0x37e86f(0x109)](_0x376628),_0x3652dd=globals[_0x37e86f(0x167)](_0x1f7372[_0x37e86f(0x119)]),_0x5a8039=globals[_0x37e86f(0x167)](_0x1f7372[_0x37e86f(0xfa)]),_0x4263f7=globals[_0x37e86f(0x167)](_0x1f7372[_0x37e86f(0x14d)]),_0x51400c=![],_0x19ec2f=new Date();if(_0x469045){const _0x32a449=_0x1f7372[_0x37e86f(0xfd)](timeoutPromise,constants['HEALING_LOG_DATA_TIMEOUT'],_0x1f7372['yUfIB'],_0x1f7372['KQOCc'],_0x19ec2f,this[_0x37e86f(0x125)],this[_0x37e86f(0x148)]);_0x27033a=await Promise[_0x37e86f(0x108)]([this[_0x37e86f(0x149)][_0x37e86f(0x144)](_0x5c38be,_0x260ecd,_0x362a7c,_0x5e6c05,_0x5a8039,_0x376628,_0x3da536,_0x40a3cd)['then'](_0x1b8114=>{const _0x4f2aad=_0x37e86f;return _0x32a449[_0x4f2aad(0x12c)](),_0x1b8114;}),_0x32a449]);}else{if(commandRepository[_0x37e86f(0x104)]()){const _0x40f518=_0x1f7372[_0x37e86f(0x14e)](timeoutPromise,constants[_0x37e86f(0x146)],_0x1f7372[_0x37e86f(0x122)],_0x1f7372[_0x37e86f(0x14a)],_0x19ec2f,this[_0x37e86f(0x125)],this[_0x37e86f(0x148)]);_0x27033a=await Promise[_0x37e86f(0x108)]([this['BrowserstackHealing'][_0x37e86f(0x11a)](_0x5c38be,_0x260ecd,_0x362a7c,_0x5e6c05,_0x3652dd,_0x5a8039,_0x376628,_0x3da536,_0x51400c,_0x4263f7,_0x40a3cd)[_0x37e86f(0x16c)](_0x3f53f7=>{const _0x4e87d1=_0x37e86f;return _0x40f518[_0x4e87d1(0x12c)](),_0x3f53f7;}),_0x40f518]);}}_0x27033a&&await _0x1935c1[_0x37e86f(0x131)](_0x27033a);}}async[a59_0x1ffb84(0x10d)](_0x3f9f05,_0x3815b1,_0x25e50a){const _0xd809e9=a59_0x1ffb84;try{await this['_handleEvent'](_0x3f9f05,_0x3815b1,_0x25e50a,!![]);}catch(_0x3160d8){return logger[_0xd809e9(0xfc)]('Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20'+(_0x3160d8&&_0x3160d8[_0xd809e9(0x139)]?_0x3160d8[_0xd809e9(0x139)]:'')),![];}return!![];}async[a59_0x1ffb84(0x110)](_0xafb439,_0x20c133,_0x991a4a){const _0x514de3=a59_0x1ffb84,_0x1b7452={'VlFEC':function(_0x21f0b5,_0x59c3fa,_0x5c38d0,_0x46d31a,_0x30a9ee,_0x1c5692,_0x51cde6){return _0x21f0b5(_0x59c3fa,_0x5c38d0,_0x46d31a,_0x30a9ee,_0x1c5692,_0x51cde6);},'msAdW':'BrowserstackHealing.pollResult\x20method\x20timed\x20out','xSJYC':_0x514de3(0x111),'zhkec':_0x514de3(0x102)};try{await this[_0x514de3(0x123)](_0xafb439,_0x20c133,_0x991a4a,![]);const _0x3fb83d=(await _0x20c133[_0x514de3(0x11d)]())[_0x514de3(0x113)](),_0x2a737b=new Date(),_0x180f0d=_0x1b7452['VlFEC'](timeoutPromise,constants[_0x514de3(0x14f)],_0x1b7452['msAdW'],_0x1b7452[_0x514de3(0x140)],_0x2a737b,this[_0x514de3(0x125)],this[_0x514de3(0x148)]),_0x5a54a2=await Promise[_0x514de3(0x108)]([this[_0x514de3(0x149)][_0x514de3(0xfe)](constants[_0x514de3(0x15a)],_0x3fb83d,globals[_0x514de3(0x167)](_0x1b7452[_0x514de3(0x11e)]))[_0x514de3(0x16c)](_0x435a2a=>{const _0x39fd5d=_0x514de3;return _0x180f0d[_0x39fd5d(0x12c)](),_0x435a2a;}),_0x180f0d]);if(_0x5a54a2&&_0x5a54a2[_0x514de3(0x15c)]&&_0x5a54a2['value']){const _0x191b70={};return _0x191b70[_0x514de3(0x118)]=_0x5a54a2[_0x514de3(0x15c)],_0x191b70['locatorValue']=_0x5a54a2[_0x514de3(0x16a)],_0x191b70['aiHealing']=!![],_0x191b70;}const _0x509b0c={};return _0x509b0c[_0x514de3(0x118)]=_0x991a4a[_0x514de3(0x100)][_0x514de3(0x12f)],_0x509b0c[_0x514de3(0x136)]=_0x5a54a2[_0x514de3(0x16a)],_0x509b0c[_0x514de3(0x121)]=!![],_0x509b0c;}catch(_0x2f31a3){return logger[_0x514de3(0x143)]('Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20'+(_0x2f31a3&&_0x2f31a3[_0x514de3(0x139)]?_0x2f31a3[_0x514de3(0x139)]:'')),logger[_0x514de3(0x164)]('Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20'+_0x991a4a['name_']+_0x514de3(0x152)),_0x991a4a;}}}exports['aiSdkWrapper']=Object['freeze'](new AiSdkWrapper());function a59_0x4c41(){const _0x2f62c0=['toLowerCase','s://','JXqKy','izDRn','149301wQqTeM','error','fqrwQ','pollResult','BrowserstackHealing.healFailure\x20method\x20timed\x20out','parameters_','NVECy','aiHeal_sessionToken','qbKIQ','isSelfHealEnabled','initializeCapabilities','315738ACcAPi','KGHIz','race','getCommands','setToken','BrowserstackHealing.setToken\x20method\x20timed\x20out','HyWJq','handleSuccess','{\x22region\x22:\x20\x22','XcYjM','handleFailure','BrowserstackHealingPollResultFailed','forEach','getId','NFAqb','replace','aiHeal_groupId','firefox','locatorType','QrpxH','healFailure','bKwnf','get','getSession','zhkec','join','edgeOptions_','aiHealing','XiHyX','_handleEvent','BrowserstackHealing.logData\x20method\x20timed\x20out','config','initializeHealingCapabilities','browserstackSessionName','\x22:\x20{\x22endpoint\x22:\x20\x22','gqjaH','tioRo','firefoxOptions_','cancel','../../ai-sdk-node/bundle','Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20','using','split','executeScript','microsoftedge','path','YVenU','map_','locatorValue','getCapabilities','114jYmcjZ','message','newCapabilities','TWqgd','3080322hfolnJ','./autoHealHelper','aiHeal_isGroupAIEnabled','SET_TCG_TOKEN_TIMEOUT','xSJYC','4845120AkToTY','dxodK','debug','logData','edge','HEALING_FAILURE_TIMEOUT','TCG_REGION','framework','BrowserstackHealing','EwkAu','bduuX','../../bin/utils/constants','moBAJ','qeruE','POLL_HEALING_RESULT_TIMEOUT','winstonLogger','uQiqJ','\x20command','10486035cybgQA','clhKr','set','zYCFa','zmtWr','1028192XlqtPW','log','TCG_URL','afGsU','selector','browserName','getTestName','18FlWZyk','orUnf','capabilities_','getProjectName','BrowserstackHealingHealFailureFailed','info','159590thwxoz','kijij','getGlobal','LebWw','eSFFk','value','BrowserstackHealingLogDataFailed','then'];a59_0x4c41=function(){return _0x2f62c0;};return a59_0x4c41();}