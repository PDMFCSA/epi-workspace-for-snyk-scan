function a89_0x1608(_0x81709d,_0x1256a3){const _0x2c9956=a89_0x2c99();return a89_0x1608=function(_0x16086a,_0x4ec0a9){_0x16086a=_0x16086a-0x181;let _0x1f54de=_0x2c9956[_0x16086a];return _0x1f54de;},a89_0x1608(_0x81709d,_0x1256a3);}const a89_0x459e78=a89_0x1608;(function(_0x1b5240,_0x57e83f){const _0x54b6c7=a89_0x1608,_0x432581=_0x1b5240();while(!![]){try{const _0x2e1333=parseInt(_0x54b6c7(0x1b3))/0x1*(-parseInt(_0x54b6c7(0x1d2))/0x2)+parseInt(_0x54b6c7(0x198))/0x3+parseInt(_0x54b6c7(0x18c))/0x4+-parseInt(_0x54b6c7(0x1e7))/0x5*(-parseInt(_0x54b6c7(0x1f2))/0x6)+parseInt(_0x54b6c7(0x1e6))/0x7*(parseInt(_0x54b6c7(0x1b2))/0x8)+parseInt(_0x54b6c7(0x187))/0x9+parseInt(_0x54b6c7(0x1c9))/0xa*(-parseInt(_0x54b6c7(0x1ad))/0xb);if(_0x2e1333===_0x57e83f)break;else _0x432581['push'](_0x432581['shift']());}catch(_0x5003b9){_0x432581['push'](_0x432581['shift']());}}}(a89_0x2c99,0xae69c));const path=require(a89_0x459e78(0x1d1)),{commandRepository}=require(a89_0x459e78(0x1ac)),constants=require(a89_0x459e78(0x1ba)),logger=require(a89_0x459e78(0x1e1))[a89_0x459e78(0x1b6)],globals=require('../globals'),timeoutPromise=require(a89_0x459e78(0x1fa)),isUndefinedOrNull=_0x324bfe=>_0x324bfe===undefined||_0x324bfe===null||_0x324bfe==='',isNotUndefinedOrNull=_0x814d39=>!isUndefinedOrNull(_0x814d39),isString=_0xa99588=>isNotUndefinedOrNull(_0xa99588)&&typeof _0xa99588===a89_0x459e78(0x1d7);class AiSdkWrapper{constructor(){const _0x41f83e=a89_0x459e78,_0x4b1110={'asGlX':function(_0x5854d2,_0x361026){return _0x5854d2(_0x361026);},'BNWPs':_0x41f83e(0x181)};this['BrowserstackHealing']=undefined;try{this[_0x41f83e(0x1b9)]=_0x4b1110[_0x41f83e(0x1db)](require,path['join'](__dirname,_0x4b1110[_0x41f83e(0x1a3)]));}catch(_0x10690a){logger['error'](_0x41f83e(0x1ae)+(_0x10690a&&_0x10690a[_0x41f83e(0x1b8)]?_0x10690a[_0x41f83e(0x1b8)]:''));}}[a89_0x459e78(0x1e0)](_0x584b7e){const _0x4146c4=a89_0x459e78,_0x202a36={};_0x202a36[_0x4146c4(0x189)]=_0x4146c4(0x1ef),_0x202a36[_0x4146c4(0x1e5)]=function(_0xc00012,_0x1f18a4){return _0xc00012===_0x1f18a4;},_0x202a36[_0x4146c4(0x192)]=_0x4146c4(0x1ea),_0x202a36[_0x4146c4(0x194)]=function(_0x3aa4cf,_0x11ea6d){return _0x3aa4cf===_0x11ea6d;},_0x202a36[_0x4146c4(0x1d4)]=_0x4146c4(0x1bd),_0x202a36[_0x4146c4(0x1b0)]=function(_0x129470,_0x55ab88){return _0x129470===_0x55ab88;},_0x202a36[_0x4146c4(0x1cd)]='safari',_0x202a36['RDFEY']=function(_0x1b0257,_0x5da65f){return _0x1b0257===_0x5da65f;},_0x202a36['sYRqy']='edge',_0x202a36['OFBdZ']=function(_0x21aae7,_0x3f2237){return _0x21aae7===_0x3f2237;},_0x202a36[_0x4146c4(0x1cc)]=_0x4146c4(0x1ec),_0x202a36[_0x4146c4(0x1e2)]=function(_0x2edf1c,_0x20c775){return _0x2edf1c===_0x20c775;};const _0x32c9a7=_0x202a36;try{const _0x4bcd50=this[_0x4146c4(0x1b9)][_0x4146c4(0x1f3)](Object[_0x4146c4(0x1a8)](_0x584b7e[_0x4146c4(0x195)]()[_0x4146c4(0x1de)]));console['log'](_0x32c9a7[_0x4146c4(0x189)],_0x4bcd50);if(_0x32c9a7[_0x4146c4(0x1e5)](_0x4bcd50?.[_0x4146c4(0x1ca)]?.[_0x4146c4(0x19d)](),_0x32c9a7[_0x4146c4(0x192)]))_0x584b7e['chromeOptions_']=_0x4bcd50;else{if(_0x32c9a7[_0x4146c4(0x194)](_0x4bcd50?.[_0x4146c4(0x1ca)]?.['toLowerCase'](),_0x32c9a7['CEJzs']))_0x584b7e['firefoxOptions_']=_0x4bcd50;else{if(_0x32c9a7[_0x4146c4(0x1b0)](_0x4bcd50?.[_0x4146c4(0x1ca)]?.['toLowerCase'](),_0x32c9a7[_0x4146c4(0x1cd)]))_0x584b7e[_0x4146c4(0x1f0)]=_0x4bcd50;else{if(_0x32c9a7[_0x4146c4(0x1bf)](_0x4bcd50?.[_0x4146c4(0x1ca)]?.[_0x4146c4(0x19d)](),_0x32c9a7[_0x4146c4(0x182)])||_0x32c9a7[_0x4146c4(0x19c)](_0x4bcd50?.[_0x4146c4(0x1ca)]?.[_0x4146c4(0x19d)](),_0x32c9a7[_0x4146c4(0x1cc)]))_0x584b7e[_0x4146c4(0x1b4)]=_0x4bcd50;else _0x32c9a7[_0x4146c4(0x1e2)](_0x4bcd50?.[_0x4146c4(0x1ca)]?.[_0x4146c4(0x19d)](),'ie')&&(_0x584b7e[_0x4146c4(0x1f9)]=_0x4bcd50);}}}Object['keys'](_0x4bcd50)[_0x4146c4(0x190)](_0x117649=>{const _0x4c2df1=_0x4146c4,_0x1abba0=_0x584b7e[_0x4c2df1(0x196)][_0x4c2df1(0x1da)](_0x117649);_0x584b7e[_0x4c2df1(0x196)]['set'](_0x117649,_0x4bcd50[_0x117649]);});}catch(_0xae6a){logger[_0x4146c4(0x1d5)]('Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20'+(_0xae6a&&_0xae6a['message']?_0xae6a['message']:''));}}async[a89_0x459e78(0x1af)](_0xe03f31){const _0x49080c=a89_0x459e78,_0x364802={'IezqL':function(_0x28c0e8,_0x5be437,_0x3912f6,_0x2242c8,_0xc3a34e,_0x11f83d,_0x3ff92c){return _0x28c0e8(_0x5be437,_0x3912f6,_0x2242c8,_0xc3a34e,_0x11f83d,_0x3ff92c);},'nznPp':'BrowserstackHealing.setToken\x20method\x20timed\x20out','AVIWh':_0x49080c(0x1ee),'Iewyp':_0x49080c(0x191)},_0x28cced=new Date(),_0x1093e9=_0x364802[_0x49080c(0x18d)](timeoutPromise,constants[_0x49080c(0x1bb)],_0x364802[_0x49080c(0x1ab)],_0x364802[_0x49080c(0x1c2)],_0x28cced,this[_0x49080c(0x1c6)],this[_0x49080c(0x1f7)]);await Promise[_0x49080c(0x1df)]([this['BrowserstackHealing'][_0x49080c(0x185)](_0xe03f31,globals['getGlobal'](_0x364802['Iewyp']),constants[_0x49080c(0x1f5)])[_0x49080c(0x1d3)](()=>{_0x1093e9['cancel']();}),_0x1093e9]);}async[a89_0x459e78(0x1a2)](_0x24d2b4,_0x3d8cdb,_0x53c667,_0x5456af){const _0x55ead7=a89_0x459e78,_0xaa64bf={'XTqkI':function(_0x563bde,_0x52f7e0){return _0x563bde===_0x52f7e0;},'ZShqe':function(_0x20bc0c,_0x3c4b69){return _0x20bc0c(_0x3c4b69);},'AzaqB':function(_0x4a7798,_0x9a3e7f){return _0x4a7798(_0x9a3e7f);},'twqbj':function(_0x25166b,_0x21e526){return _0x25166b(_0x21e526);},'sGAeC':function(_0xf17aca,_0x407b79){return _0xf17aca(_0x407b79);},'rZXMj':_0x55ead7(0x19f),'XBGla':function(_0xd141cd,_0x4f69bf){return _0xd141cd(_0x4f69bf);},'RKRrW':_0x55ead7(0x1c7),'FPDnu':_0x55ead7(0x1b7),'phqJB':_0x55ead7(0x1dc),'AIApt':function(_0x32ffad,_0x1bebe9,_0x4c458a,_0x2438a1,_0x5e9054,_0x21ec51,_0x1f034){return _0x32ffad(_0x1bebe9,_0x4c458a,_0x2438a1,_0x5e9054,_0x21ec51,_0x1f034);},'EJnbJ':'BrowserstackHealing.logData\x20method\x20timed\x20out','IXYRp':_0x55ead7(0x18b),'dmjGV':_0x55ead7(0x1ce),'IHJTE':_0x55ead7(0x184)},_0x236986=(await _0x3d8cdb[_0x55ead7(0x1c0)]())['getId']();let _0x37d128='';if(commandRepository['isSelfHealEnabled']()&&_0xaa64bf[_0x55ead7(0x1be)](_0x5456af,![])||_0xaa64bf[_0x55ead7(0x1be)](_0x5456af,!![])){const _0x6559b0=_0xaa64bf[_0x55ead7(0x197)](isNotUndefinedOrNull,_0x53c667[_0x55ead7(0x1c4)][_0x55ead7(0x193)])&&_0xaa64bf[_0x55ead7(0x197)](isString,_0x53c667[_0x55ead7(0x1c4)]['using'])?_0x53c667['parameters_'][_0x55ead7(0x193)][_0x55ead7(0x19b)](/'/g,'\x5c\x27')[_0x55ead7(0x19b)](/"/g,'\x5c\x22'):'',_0x5e131e=_0xaa64bf[_0x55ead7(0x197)](isNotUndefinedOrNull,_0x53c667[_0x55ead7(0x1c4)][_0x55ead7(0x193)])&&_0xaa64bf[_0x55ead7(0x197)](isString,_0x53c667[_0x55ead7(0x1c4)][_0x55ead7(0x1f6)])?_0x53c667[_0x55ead7(0x1c4)][_0x55ead7(0x1f6)]['replace'](/'/g,'\x5c\x27')[_0x55ead7(0x19b)](/"/g,'\x5c\x22'):'',_0x298b0d=_0xaa64bf[_0x55ead7(0x197)](isNotUndefinedOrNull,commandRepository[_0x55ead7(0x1c8)]())&&_0xaa64bf['AzaqB'](isString,commandRepository['getProjectName']())?commandRepository['getProjectName']()[_0x55ead7(0x19b)](/'/g,'\x5c\x27')[_0x55ead7(0x19b)](/"/g,'\x5c\x22'):'';let _0x1390c9=_0xaa64bf['AzaqB'](isNotUndefinedOrNull,global['browserstackSessionName'])&&_0xaa64bf[_0x55ead7(0x199)](isString,global[_0x55ead7(0x1eb)])?global['browserstackSessionName']['replace'](/'/g,'\x5c\x27')[_0x55ead7(0x19b)](/"/g,'\x5c\x22'):'';!_0x1390c9&&(_0x1390c9=_0xaa64bf[_0x55ead7(0x18f)](isNotUndefinedOrNull,commandRepository[_0x55ead7(0x1d6)]())&&_0xaa64bf[_0x55ead7(0x1a5)](isString,commandRepository[_0x55ead7(0x1d6)]())?commandRepository[_0x55ead7(0x1d6)]()[_0x55ead7(0x19b)](/'/g,'\x5c\x27')[_0x55ead7(0x19b)](/"/g,'\x5c\x22'):'');let _0x209239=_0x55ead7(0x1aa)+constants['TCG_REGION']+_0x55ead7(0x1f1)+constants[_0x55ead7(0x1ed)]+_0x55ead7(0x1a1)+constants[_0x55ead7(0x1f5)][_0x55ead7(0x18a)](_0xaa64bf['rZXMj'])[0x1]+_0x55ead7(0x1e8);_0x209239=_0xaa64bf[_0x55ead7(0x199)](isNotUndefinedOrNull,_0x209239)&&_0xaa64bf[_0x55ead7(0x18e)](isString,_0x209239)?_0x209239['replace'](/'/g,'\x5c\x27')[_0x55ead7(0x19b)](/"/g,'\x5c\x22'):'';const _0x87faf1=commandRepository[_0x55ead7(0x1a0)](_0x236986),_0xd7d92d=globals['getGlobal'](_0xaa64bf[_0x55ead7(0x186)]),_0x30e3d1=globals[_0x55ead7(0x1b5)](_0xaa64bf[_0x55ead7(0x1bc)]),_0x4d98ae=globals[_0x55ead7(0x1b5)](_0xaa64bf[_0x55ead7(0x1c3)]),_0x2ed2af=![],_0x44d828=new Date();if(_0x5456af){const _0x561244=_0xaa64bf[_0x55ead7(0x1fb)](timeoutPromise,constants[_0x55ead7(0x1f4)],_0xaa64bf['EJnbJ'],_0xaa64bf[_0x55ead7(0x1fc)],_0x44d828,this[_0x55ead7(0x1c6)],this[_0x55ead7(0x1f7)]);_0x37d128=await Promise[_0x55ead7(0x1df)]([this['BrowserstackHealing'][_0x55ead7(0x19e)](_0x6559b0,_0x5e131e,_0x298b0d,_0x1390c9,_0x30e3d1,_0x236986,_0x87faf1,_0x209239)['then'](_0x2cb9ba=>{const _0x4ec96f=_0x55ead7;return _0x561244[_0x4ec96f(0x1a9)](),_0x2cb9ba;}),_0x561244]);}else{if(commandRepository[_0x55ead7(0x1c5)]()){const _0x531910=_0xaa64bf['AIApt'](timeoutPromise,constants[_0x55ead7(0x1d0)],_0xaa64bf['dmjGV'],_0xaa64bf[_0x55ead7(0x1a7)],_0x44d828,this[_0x55ead7(0x1c6)],this[_0x55ead7(0x1f7)]);_0x37d128=await Promise['race']([this[_0x55ead7(0x1b9)][_0x55ead7(0x19a)](_0x6559b0,_0x5e131e,_0x298b0d,_0x1390c9,_0xd7d92d,_0x30e3d1,_0x236986,_0x87faf1,_0x2ed2af,_0x4d98ae,_0x209239)[_0x55ead7(0x1d3)](_0x1b7a8d=>{const _0x403b3f=_0x55ead7;return _0x531910[_0x403b3f(0x1a9)](),_0x1b7a8d;}),_0x531910]);}}_0x37d128&&await _0x3d8cdb['executeScript'](_0x37d128);}}async[a89_0x459e78(0x1e3)](_0x1e5a6b,_0x476d61,_0x4b0324){const _0x35d9b7=a89_0x459e78;try{await this['_handleEvent'](_0x1e5a6b,_0x476d61,_0x4b0324,!![]);}catch(_0x5b4f48){return logger['error'](_0x35d9b7(0x1a4)+(_0x5b4f48&&_0x5b4f48['message']?_0x5b4f48['message']:'')),![];}return!![];}async[a89_0x459e78(0x1d9)](_0x50ea6d,_0x58dfe7,_0x1f8585){const _0x27b401=a89_0x459e78,_0x3cee8d={'TFtQt':function(_0x531c68,_0xa7142b,_0x206e10,_0x4784d7,_0xc4aa60,_0x329ef6,_0x7b3e16){return _0x531c68(_0xa7142b,_0x206e10,_0x4784d7,_0xc4aa60,_0x329ef6,_0x7b3e16);},'XrbsH':_0x27b401(0x1cb),'RBUkT':'BrowserstackHealingPollResultFailed','UhiBr':_0x27b401(0x191)};try{await this[_0x27b401(0x1a2)](_0x50ea6d,_0x58dfe7,_0x1f8585,![]);const _0x5aaf13=(await _0x58dfe7[_0x27b401(0x1c0)]())['getId'](),_0x475b8a=new Date(),_0x4886f2=_0x3cee8d[_0x27b401(0x1dd)](timeoutPromise,constants['POLL_HEALING_RESULT_TIMEOUT'],_0x3cee8d['XrbsH'],_0x3cee8d['RBUkT'],_0x475b8a,this['config'],this[_0x27b401(0x1f7)]),_0x245e26=await Promise[_0x27b401(0x1df)]([this[_0x27b401(0x1b9)][_0x27b401(0x1c1)](constants['TCG_URL'],_0x5aaf13,globals[_0x27b401(0x1b5)](_0x3cee8d['UhiBr']))[_0x27b401(0x1d3)](_0x3136b8=>{const _0x1030b9=_0x27b401;return _0x4886f2[_0x1030b9(0x1a9)](),_0x3136b8;}),_0x4886f2]);if(_0x245e26&&_0x245e26[_0x27b401(0x1cf)]&&_0x245e26['value']){const _0x1aab97={};return _0x1aab97[_0x27b401(0x1b1)]=_0x245e26[_0x27b401(0x1cf)],_0x1aab97[_0x27b401(0x1e4)]=_0x245e26[_0x27b401(0x1f6)],_0x1aab97[_0x27b401(0x1d8)]=!![],_0x1aab97;}const _0x1c23f6={};return _0x1c23f6[_0x27b401(0x1b1)]=_0x1f8585[_0x27b401(0x1c4)][_0x27b401(0x193)],_0x1c23f6[_0x27b401(0x1e4)]=_0x245e26['value'],_0x1c23f6['aiHealing']=!![],_0x1c23f6;}catch(_0x4c3d84){return logger['debug'](_0x27b401(0x188)+(_0x4c3d84&&_0x4c3d84[_0x27b401(0x1b8)]?_0x4c3d84[_0x27b401(0x1b8)]:'')),logger[_0x27b401(0x1e9)]('Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20'+_0x1f8585[_0x27b401(0x1f8)]+'\x20command'),_0x1f8585;}}}function a89_0x2c99(){const _0xf3d7b5=['66mmKmPH','Unable\x20to\x20load\x20healing\x20module,\x20error:\x20','setTcgToken','eXBAm','locatorType','24536RRtNZm','22459XstuRs','edgeOptions_','getGlobal','winstonLogger','aiHeal_groupId','message','BrowserstackHealing','../../bin/utils/constants','SET_TCG_TOKEN_TIMEOUT','FPDnu','firefox','XTqkI','RDFEY','getSession','pollResult','AVIWh','phqJB','parameters_','isSelfHealEnabled','config','aiHeal_userId','getProjectName','7082930IetZHM','browserName','BrowserstackHealing.pollResult\x20method\x20timed\x20out','EhAim','AlcWi','BrowserstackHealing.healFailure\x20method\x20timed\x20out','selector','HEALING_FAILURE_TIMEOUT','path','30pNhOkf','then','CEJzs','error','getTestName','string','aiHealing','handleFailure','get','asGlX','aiHeal_isGroupAIEnabled','TFtQt','map_','race','initializeHealingCapabilities','../logger','GhJgP','handleSuccess','locatorValue','IfbLs','2569moMikh','10aXjwoC','\x22}}}','info','chrome','browserstackSessionName','microsoftedge','TCG_REGION','BrowserstackHealingSetTcgTokenFailed','newCapabilities','safariOptions_','\x22,\x20\x22tcgUrls\x22:\x20{\x22','4113246dZPjpb','initializeCapabilities','HEALING_LOG_DATA_TIMEOUT','TCG_URL','value','framework','name_','ieOptions_','../../helpers/timeoutPromise','AIApt','IXYRp','../../ai-sdk-node/bundle','sYRqy','freeze','BrowserstackHealingHealFailureFailed','setToken','RKRrW','12782826sPsuZh','Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20','ZQACi','split','BrowserstackHealingLogDataFailed','821320yoPKjI','IezqL','XBGla','twqbj','forEach','aiHeal_sessionToken','HKFSn','using','YJWhc','getCapabilities','capabilities_','ZShqe','3536172SlQEqV','AzaqB','healFailure','replace','OFBdZ','toLowerCase','logData','s://','getCommands','\x22:\x20{\x22endpoint\x22:\x20\x22','_handleEvent','BNWPs','Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20','sGAeC','aiSdkWrapper','IHJTE','fromEntries','cancel','{\x22region\x22:\x20\x22','nznPp','./autoHealHelper'];a89_0x2c99=function(){return _0xf3d7b5;};return a89_0x2c99();}exports[a89_0x459e78(0x1a6)]=Object[a89_0x459e78(0x183)](new AiSdkWrapper());