const a87_0x545982=a87_0x1b66;(function(_0x5863f2,_0xf9fe9e){const _0x53b14d=a87_0x1b66,_0x2706c3=_0x5863f2();while(!![]){try{const _0xf4fbc6=-parseInt(_0x53b14d(0x171))/0x1+parseInt(_0x53b14d(0x13e))/0x2*(parseInt(_0x53b14d(0x127))/0x3)+parseInt(_0x53b14d(0x122))/0x4+parseInt(_0x53b14d(0x13c))/0x5+-parseInt(_0x53b14d(0x12e))/0x6+-parseInt(_0x53b14d(0x167))/0x7+parseInt(_0x53b14d(0x177))/0x8;if(_0xf4fbc6===_0xf9fe9e)break;else _0x2706c3['push'](_0x2706c3['shift']());}catch(_0x583e1c){_0x2706c3['push'](_0x2706c3['shift']());}}}(a87_0x4af1,0x6e09c));function a87_0x1b66(_0x423ebe,_0x3b27ac){const _0x4af11d=a87_0x4af1();return a87_0x1b66=function(_0x1b66a5,_0x28ae85){_0x1b66a5=_0x1b66a5-0x120;let _0x5513b5=_0x4af11d[_0x1b66a5];return _0x5513b5;},a87_0x1b66(_0x423ebe,_0x3b27ac);}const path=require('path'),{commandRepository}=require(a87_0x545982(0x155)),constants=require(a87_0x545982(0x174)),logger=require(a87_0x545982(0x187))['winstonLogger'],globals=require(a87_0x545982(0x15b)),timeoutPromise=require(a87_0x545982(0x14d)),isUndefinedOrNull=_0x468684=>_0x468684===undefined||_0x468684===null||_0x468684==='',isNotUndefinedOrNull=_0x8c4289=>!isUndefinedOrNull(_0x8c4289),isString=_0x5cf78e=>isNotUndefinedOrNull(_0x5cf78e)&&typeof _0x5cf78e===a87_0x545982(0x135);class AiSdkWrapper{constructor(){const _0x116633=a87_0x545982,_0x4282b8={'yWipr':function(_0x365e25,_0x289510){return _0x365e25(_0x289510);},'xDKOg':_0x116633(0x168)};this[_0x116633(0x162)]=undefined;try{this[_0x116633(0x162)]=_0x4282b8[_0x116633(0x147)](require,path[_0x116633(0x17e)](__dirname,_0x4282b8['xDKOg']));}catch(_0x51bdb5){logger[_0x116633(0x130)](_0x116633(0x191)+(_0x51bdb5&&_0x51bdb5[_0x116633(0x121)]?_0x51bdb5[_0x116633(0x121)]:''));}}[a87_0x545982(0x17b)](_0x54fe94){const _0xe1168a=a87_0x545982,_0x37be9d={};_0x37be9d[_0xe1168a(0x193)]=_0xe1168a(0x157),_0x37be9d[_0xe1168a(0x125)]=function(_0x56f54a,_0x574934){return _0x56f54a===_0x574934;},_0x37be9d[_0xe1168a(0x17f)]=_0xe1168a(0x132),_0x37be9d[_0xe1168a(0x186)]='firefox',_0x37be9d['iQjMc']=_0xe1168a(0x182),_0x37be9d['gNiTi']=_0xe1168a(0x161),_0x37be9d['kXwaW']=_0xe1168a(0x164);const _0x413b98=_0x37be9d;try{const _0x7f4d37=this['BrowserstackHealing'][_0xe1168a(0x14b)](Object[_0xe1168a(0x16a)](_0x54fe94[_0xe1168a(0x12b)]()[_0xe1168a(0x179)]));console['log'](_0x413b98[_0xe1168a(0x193)],_0x7f4d37);if(_0x413b98[_0xe1168a(0x125)](_0x7f4d37?.[_0xe1168a(0x15f)]?.[_0xe1168a(0x166)](),_0x413b98['hjOHV']))_0x54fe94[_0xe1168a(0x142)]=_0x7f4d37;else{if(_0x413b98[_0xe1168a(0x125)](_0x7f4d37?.[_0xe1168a(0x15f)]?.[_0xe1168a(0x166)](),_0x413b98[_0xe1168a(0x186)]))_0x54fe94[_0xe1168a(0x190)]=_0x7f4d37;else{if(_0x413b98[_0xe1168a(0x125)](_0x7f4d37?.['browserName']?.[_0xe1168a(0x166)](),_0x413b98[_0xe1168a(0x13f)]))_0x54fe94[_0xe1168a(0x12a)]=_0x7f4d37;else{if(_0x413b98[_0xe1168a(0x125)](_0x7f4d37?.[_0xe1168a(0x15f)]?.[_0xe1168a(0x166)](),_0x413b98[_0xe1168a(0x149)])||_0x413b98['tmJtN'](_0x7f4d37?.[_0xe1168a(0x15f)]?.[_0xe1168a(0x166)](),_0x413b98[_0xe1168a(0x136)]))_0x54fe94[_0xe1168a(0x13b)]=_0x7f4d37;else _0x413b98[_0xe1168a(0x125)](_0x7f4d37?.[_0xe1168a(0x15f)]?.[_0xe1168a(0x166)](),'ie')&&(_0x54fe94[_0xe1168a(0x175)]=_0x7f4d37);}}}Object[_0xe1168a(0x185)](_0x7f4d37)['forEach'](_0x872901=>{const _0x4ac21b=_0xe1168a,_0x5426dc=_0x54fe94[_0x4ac21b(0x126)]['get'](_0x872901);_0x54fe94[_0x4ac21b(0x126)][_0x4ac21b(0x150)](_0x872901,_0x7f4d37[_0x872901]);});}catch(_0x3287e9){logger['error'](_0xe1168a(0x194)+(_0x3287e9&&_0x3287e9[_0xe1168a(0x121)]?_0x3287e9[_0xe1168a(0x121)]:''));}}async[a87_0x545982(0x123)](_0x78277){const _0x38e8f6=a87_0x545982,_0x28ed3f={'xzNWy':function(_0xdf19eb,_0x1758ef,_0x5df4a6,_0x46c6c2,_0x57fbdf,_0x1ec0ef,_0x8c67c7){return _0xdf19eb(_0x1758ef,_0x5df4a6,_0x46c6c2,_0x57fbdf,_0x1ec0ef,_0x8c67c7);},'aZQmR':_0x38e8f6(0x148),'aAuOx':_0x38e8f6(0x16c),'QsZqM':_0x38e8f6(0x160)},_0x1352bb=new Date(),_0x3373a6=_0x28ed3f[_0x38e8f6(0x158)](timeoutPromise,constants[_0x38e8f6(0x163)],_0x28ed3f[_0x38e8f6(0x138)],_0x28ed3f['aAuOx'],_0x1352bb,this['config'],this[_0x38e8f6(0x184)]);await Promise['race']([this[_0x38e8f6(0x162)]['setToken'](_0x78277,globals[_0x38e8f6(0x15e)](_0x28ed3f['QsZqM']),constants['TCG_URL'])['then'](()=>{const _0x40ed92=_0x38e8f6;_0x3373a6[_0x40ed92(0x188)]();}),_0x3373a6]);}async[a87_0x545982(0x14c)](_0xb4c7e,_0x350bc4,_0x4fb09f,_0x356ab2){const _0x312884=a87_0x545982,_0xc5a1af={'EstOX':function(_0xee0b9a,_0x276d2f){return _0xee0b9a===_0x276d2f;},'ucaST':function(_0x1fbf4c,_0x1a8dca){return _0x1fbf4c===_0x1a8dca;},'doPay':function(_0x3ecf41,_0x5ddf66){return _0x3ecf41(_0x5ddf66);},'whPyN':function(_0x12efc6,_0x329239){return _0x12efc6(_0x329239);},'sYPvu':function(_0x245443,_0x4751a0){return _0x245443(_0x4751a0);},'BAned':function(_0xd66a84,_0x18772d){return _0xd66a84(_0x18772d);},'yjjHg':function(_0x5df4eb,_0x33759c){return _0x5df4eb(_0x33759c);},'EmiQq':_0x312884(0x180),'UKCwh':function(_0x51ec99,_0xa5ac5e){return _0x51ec99(_0xa5ac5e);},'ttGan':'aiHeal_userId','UmCsz':_0x312884(0x17a),'sCnAD':'aiHeal_isGroupAIEnabled','qJMCA':function(_0x2289e0,_0x35e8e2,_0xf487b1,_0x2b12c6,_0x4e9c7f,_0x2ac4e9,_0x17f6d8){return _0x2289e0(_0x35e8e2,_0xf487b1,_0x2b12c6,_0x4e9c7f,_0x2ac4e9,_0x17f6d8);},'tKMUO':_0x312884(0x14a),'UNqjf':_0x312884(0x17c),'OpKQS':function(_0x1f6af7,_0x1f31c7,_0x3c2b05,_0x39ee5e,_0x1ed229,_0x21886f,_0x2bee90){return _0x1f6af7(_0x1f31c7,_0x3c2b05,_0x39ee5e,_0x1ed229,_0x21886f,_0x2bee90);},'rDlJz':_0x312884(0x120),'nlDpL':_0x312884(0x134)},_0x262881=(await _0x350bc4[_0x312884(0x140)]())[_0x312884(0x13a)]();let _0x4d89f8='';if(commandRepository['isSelfHealEnabled']()&&_0xc5a1af[_0x312884(0x15c)](_0x356ab2,![])||_0xc5a1af[_0x312884(0x15a)](_0x356ab2,!![])){const _0x54ed37=_0xc5a1af[_0x312884(0x152)](isNotUndefinedOrNull,_0x4fb09f[_0x312884(0x17d)][_0x312884(0x137)])&&_0xc5a1af['doPay'](isString,_0x4fb09f['parameters_']['using'])?_0x4fb09f[_0x312884(0x17d)][_0x312884(0x137)]['replace'](/'/g,'\x5c\x27')[_0x312884(0x143)](/"/g,'\x5c\x22'):'',_0x4d98ad=_0xc5a1af[_0x312884(0x152)](isNotUndefinedOrNull,_0x4fb09f[_0x312884(0x17d)]['using'])&&_0xc5a1af[_0x312884(0x152)](isString,_0x4fb09f[_0x312884(0x17d)][_0x312884(0x18f)])?_0x4fb09f['parameters_'][_0x312884(0x18f)][_0x312884(0x143)](/'/g,'\x5c\x27')[_0x312884(0x143)](/"/g,'\x5c\x22'):'',_0x16134e=_0xc5a1af[_0x312884(0x14f)](isNotUndefinedOrNull,commandRepository[_0x312884(0x159)]())&&_0xc5a1af['whPyN'](isString,commandRepository[_0x312884(0x159)]())?commandRepository['getProjectName']()[_0x312884(0x143)](/'/g,'\x5c\x27')[_0x312884(0x143)](/"/g,'\x5c\x22'):'';let _0x69e5f4=_0xc5a1af['doPay'](isNotUndefinedOrNull,global[_0x312884(0x18a)])&&_0xc5a1af['sYPvu'](isString,global['browserstackSessionName'])?global[_0x312884(0x18a)]['replace'](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'';!_0x69e5f4&&(_0x69e5f4=_0xc5a1af['BAned'](isNotUndefinedOrNull,commandRepository[_0x312884(0x12c)]())&&_0xc5a1af['yjjHg'](isString,commandRepository[_0x312884(0x12c)]())?commandRepository[_0x312884(0x12c)]()[_0x312884(0x143)](/'/g,'\x5c\x27')[_0x312884(0x143)](/"/g,'\x5c\x22'):'');let _0x3b28d3=_0x312884(0x15d)+constants[_0x312884(0x131)]+_0x312884(0x18c)+constants['TCG_REGION']+_0x312884(0x124)+constants[_0x312884(0x146)][_0x312884(0x183)](_0xc5a1af[_0x312884(0x170)])[0x1]+'\x22}}}';_0x3b28d3=_0xc5a1af[_0x312884(0x172)](isNotUndefinedOrNull,_0x3b28d3)&&_0xc5a1af['UKCwh'](isString,_0x3b28d3)?_0x3b28d3[_0x312884(0x143)](/'/g,'\x5c\x27')[_0x312884(0x143)](/"/g,'\x5c\x22'):'';const _0x450976=commandRepository[_0x312884(0x18d)](_0x262881),_0x177f4f=globals[_0x312884(0x15e)](_0xc5a1af[_0x312884(0x165)]),_0x339edf=globals[_0x312884(0x15e)](_0xc5a1af[_0x312884(0x173)]),_0x184ad2=globals[_0x312884(0x15e)](_0xc5a1af['sCnAD']),_0x242852=![],_0x4cb41d=new Date();if(_0x356ab2){const _0x1c904b=_0xc5a1af[_0x312884(0x178)](timeoutPromise,constants['HEALING_LOG_DATA_TIMEOUT'],_0xc5a1af['tKMUO'],_0xc5a1af['UNqjf'],_0x4cb41d,this[_0x312884(0x16b)],this[_0x312884(0x184)]);_0x4d89f8=await Promise[_0x312884(0x195)]([this[_0x312884(0x162)][_0x312884(0x12f)](_0x54ed37,_0x4d98ad,_0x16134e,_0x69e5f4,_0x339edf,_0x262881,_0x450976,_0x3b28d3)[_0x312884(0x139)](_0x416bba=>{const _0x203316=_0x312884;return _0x1c904b[_0x203316(0x188)](),_0x416bba;}),_0x1c904b]);}else{if(commandRepository[_0x312884(0x151)]()){const _0x149462=_0xc5a1af[_0x312884(0x16d)](timeoutPromise,constants['HEALING_FAILURE_TIMEOUT'],_0xc5a1af[_0x312884(0x128)],_0xc5a1af[_0x312884(0x18b)],_0x4cb41d,this['config'],this[_0x312884(0x184)]);_0x4d89f8=await Promise[_0x312884(0x195)]([this['BrowserstackHealing'][_0x312884(0x129)](_0x54ed37,_0x4d98ad,_0x16134e,_0x69e5f4,_0x177f4f,_0x339edf,_0x262881,_0x450976,_0x242852,_0x184ad2,_0x3b28d3)[_0x312884(0x139)](_0x1f8fae=>{const _0x515954=_0x312884;return _0x149462[_0x515954(0x188)](),_0x1f8fae;}),_0x149462]);}}_0x4d89f8&&await _0x350bc4[_0x312884(0x169)](_0x4d89f8);}}async[a87_0x545982(0x141)](_0x51c721,_0x3a5008,_0x2ba85c){const _0x475dbc=a87_0x545982;try{await this['_handleEvent'](_0x51c721,_0x3a5008,_0x2ba85c,!![]);}catch(_0xb39336){return logger['error']('Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20'+(_0xb39336&&_0xb39336['message']?_0xb39336[_0x475dbc(0x121)]:'')),![];}return!![];}async[a87_0x545982(0x145)](_0x3fffb4,_0x3d5ac8,_0xd6db6f){const _0x20b99f=a87_0x545982,_0x3af43b={'CPbMQ':function(_0x10d30e,_0x5b61d6,_0x190c9f,_0x489b3d,_0x5f03d8,_0x3b97c5,_0xc1a04e){return _0x10d30e(_0x5b61d6,_0x190c9f,_0x489b3d,_0x5f03d8,_0x3b97c5,_0xc1a04e);},'oLdvm':'BrowserstackHealing.pollResult\x20method\x20timed\x20out','dDqaI':_0x20b99f(0x153),'KnTIc':_0x20b99f(0x160)};try{await this[_0x20b99f(0x14c)](_0x3fffb4,_0x3d5ac8,_0xd6db6f,![]);const _0x3227f9=(await _0x3d5ac8[_0x20b99f(0x140)]())[_0x20b99f(0x13a)](),_0x480da7=new Date(),_0x21ffd0=_0x3af43b[_0x20b99f(0x16e)](timeoutPromise,constants['POLL_HEALING_RESULT_TIMEOUT'],_0x3af43b['oLdvm'],_0x3af43b[_0x20b99f(0x156)],_0x480da7,this['config'],this[_0x20b99f(0x184)]),_0x366431=await Promise[_0x20b99f(0x195)]([this[_0x20b99f(0x162)][_0x20b99f(0x12d)](constants[_0x20b99f(0x146)],_0x3227f9,globals[_0x20b99f(0x15e)](_0x3af43b[_0x20b99f(0x13d)]))['then'](_0x1d55d1=>{const _0x4329eb=_0x20b99f;return _0x21ffd0[_0x4329eb(0x188)](),_0x1d55d1;}),_0x21ffd0]);if(_0x366431&&_0x366431[_0x20b99f(0x144)]&&_0x366431[_0x20b99f(0x18f)]){const _0x34ace1={};return _0x34ace1[_0x20b99f(0x181)]=_0x366431['selector'],_0x34ace1[_0x20b99f(0x192)]=_0x366431['value'],_0x34ace1['aiHealing']=!![],_0x34ace1;}const _0x201024={};return _0x201024[_0x20b99f(0x181)]=_0xd6db6f['parameters_'][_0x20b99f(0x137)],_0x201024[_0x20b99f(0x192)]=_0x366431[_0x20b99f(0x18f)],_0x201024[_0x20b99f(0x18e)]=!![],_0x201024;}catch(_0xaaca9f){return logger[_0x20b99f(0x154)](_0x20b99f(0x176)+(_0xaaca9f&&_0xaaca9f[_0x20b99f(0x121)]?_0xaaca9f[_0x20b99f(0x121)]:'')),logger['info']('Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20'+_0xd6db6f[_0x20b99f(0x189)]+_0x20b99f(0x16f)),_0xd6db6f;}}}function a87_0x4af1(){const _0x36982c=['split','framework','keys','FhbSB','../logger','cancel','name_','browserstackSessionName','nlDpL','\x22,\x20\x22tcgUrls\x22:\x20{\x22','getCommands','aiHealing','value','firefoxOptions_','Unable\x20to\x20load\x20healing\x20module,\x20error:\x20','locatorValue','TOsXC','Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20','race','BrowserstackHealing.healFailure\x20method\x20timed\x20out','message','85760CexxeJ','setTcgToken','\x22:\x20{\x22endpoint\x22:\x20\x22','tmJtN','capabilities_','474459uSrFvX','rDlJz','healFailure','safariOptions_','getCapabilities','getTestName','pollResult','412938bsSATL','logData','error','TCG_REGION','chrome','aiSdkWrapper','BrowserstackHealingHealFailureFailed','string','kXwaW','using','aZQmR','then','getId','edgeOptions_','1023045Ctpewg','KnTIc','8fnGUEm','iQjMc','getSession','handleSuccess','chromeOptions_','replace','selector','handleFailure','TCG_URL','yWipr','BrowserstackHealing.setToken\x20method\x20timed\x20out','gNiTi','BrowserstackHealing.logData\x20method\x20timed\x20out','initializeCapabilities','_handleEvent','../../helpers/timeoutPromise','freeze','whPyN','set','isSelfHealEnabled','doPay','BrowserstackHealingPollResultFailed','debug','./autoHealHelper','dDqaI','newCapabilities','xzNWy','getProjectName','ucaST','../globals','EstOX','{\x22region\x22:\x20\x22','getGlobal','browserName','aiHeal_sessionToken','edge','BrowserstackHealing','SET_TCG_TOKEN_TIMEOUT','microsoftedge','ttGan','toLowerCase','362593nxRsYL','../../ai-sdk-node/bundle','executeScript','fromEntries','config','BrowserstackHealingSetTcgTokenFailed','OpKQS','CPbMQ','\x20command','EmiQq','721966UQWYfA','sYPvu','UmCsz','../../bin/utils/constants','ieOptions_','Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20','3477144ZKdGFd','qJMCA','map_','aiHeal_groupId','initializeHealingCapabilities','BrowserstackHealingLogDataFailed','parameters_','join','hjOHV','s://','locatorType','safari'];a87_0x4af1=function(){return _0x36982c;};return a87_0x4af1();}exports[a87_0x545982(0x133)]=Object[a87_0x545982(0x14e)](new AiSdkWrapper());