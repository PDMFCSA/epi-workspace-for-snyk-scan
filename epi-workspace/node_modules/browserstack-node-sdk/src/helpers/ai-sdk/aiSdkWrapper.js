const a59_0x47f07d=a59_0x2448;(function(_0x169cd8,_0x1c4525){const _0x4dd10f=a59_0x2448,_0x283793=_0x169cd8();while(!![]){try{const _0x39d198=-parseInt(_0x4dd10f(0x1ac))/0x1+parseInt(_0x4dd10f(0x172))/0x2*(-parseInt(_0x4dd10f(0x1aa))/0x3)+parseInt(_0x4dd10f(0x162))/0x4*(-parseInt(_0x4dd10f(0x178))/0x5)+parseInt(_0x4dd10f(0x15b))/0x6*(-parseInt(_0x4dd10f(0x14f))/0x7)+parseInt(_0x4dd10f(0x1b9))/0x8+-parseInt(_0x4dd10f(0x193))/0x9+parseInt(_0x4dd10f(0x160))/0xa;if(_0x39d198===_0x1c4525)break;else _0x283793['push'](_0x283793['shift']());}catch(_0x105dc5){_0x283793['push'](_0x283793['shift']());}}}(a59_0x3274,0xbe1de));function a59_0x2448(_0x49338e,_0x2e915a){const _0x3274f1=a59_0x3274();return a59_0x2448=function(_0x24482f,_0x3372a6){_0x24482f=_0x24482f-0x148;let _0x2b1b12=_0x3274f1[_0x24482f];return _0x2b1b12;},a59_0x2448(_0x49338e,_0x2e915a);}function a59_0x3274(){const _0x208430=['ZuKhH','TlZWC','Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20','safariOptions_','cQuCZ','EJYcE','../../ai-sdk-node/bundle','aiHeal_groupId','initializeHealingCapabilities','TCG_REGION','firefox','config','XrIcf','Xbdki','race','1510606DHdRQR','hlkEF','framework','nVTdg','getProjectName','toLowerCase','1923770BlYbuI','healFailure','join','chromeOptions_','ieOptions_','lWHZM','executeScript','LHMxX','BrowserstackHealingHealFailureFailed','fgaxQ','isSelfHealEnabled','../../bin/utils/constants','capabilities_','get','_handleEvent','name_','locatorType','eLxbk','YoeSB','keys','path','split','handleSuccess','using','BrowserstackHealing','selector','ZCwZS','4734909shPxCr','Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20','freeze','KcIKy','BrowserstackHealing.pollResult\x20method\x20timed\x20out','\x22,\x20\x22tcgUrls\x22:\x20{\x22','set','UjZFQ','getId','../globals','POLL_HEALING_RESULT_TIMEOUT','firefoxOptions_','getGlobal','HPAUW','cancel','aiHeal_isGroupAIEnabled','replace','hwKwg','SlRAl','BrowserstackHealingSetTcgTokenFailed','locatorValue','YAmuQ','setTcgToken','3stJCrX','getSession','914596yuiuwI','info','aiHeal_sessionToken','BrowserstackHealingLogDataFailed','Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20','SET_TCG_TOKEN_TIMEOUT','\x22:\x20{\x22endpoint\x22:\x20\x22','value','./autoHealHelper','wnrpV','rOCyE','BrowserstackHealing.setToken\x20method\x20timed\x20out','BrowserstackHealing.logData\x20method\x20timed\x20out','2307312JypQmk','xtdJP','logData','browserstackSessionName','oUGnr','message','browserName','getTestName','Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20','\x22}}}','forEach','liEvQ','aiHeal_userId','38570XhIqdA','BrowserstackHealing.healFailure\x20method\x20timed\x20out','TTNpn','BrowserstackHealingPollResultFailed','then','TCG_URL','\x20command','setToken','chrome','qLSYF','aYmSB','parameters_','1410YzJnBh','microsoftedge','edge','McHpZ','aiHealing','43659080cTDOTb','error','4nMbXgR'];a59_0x3274=function(){return _0x208430;};return a59_0x3274();}const path=require(a59_0x47f07d(0x18c)),{commandRepository}=require(a59_0x47f07d(0x1b4)),constants=require(a59_0x47f07d(0x183)),logger=require('../logger')['winstonLogger'],globals=require(a59_0x47f07d(0x19c)),timeoutPromise=require('../../helpers/timeoutPromise'),isUndefinedOrNull=_0x42a850=>_0x42a850===undefined||_0x42a850===null||_0x42a850==='',isNotUndefinedOrNull=_0x2e6792=>!isUndefinedOrNull(_0x2e6792),isString=_0x239218=>isNotUndefinedOrNull(_0x239218)&&typeof _0x239218==='string';class AiSdkWrapper{constructor(){const _0x491b40=a59_0x47f07d,_0x2ed677={'LHMxX':function(_0x52f5ca,_0x28087f){return _0x52f5ca(_0x28087f);},'TlZWC':_0x491b40(0x169)};this[_0x491b40(0x190)]=undefined;try{this[_0x491b40(0x190)]=_0x2ed677[_0x491b40(0x17f)](require,path[_0x491b40(0x17a)](__dirname,_0x2ed677[_0x491b40(0x164)]));}catch(_0x308be8){logger[_0x491b40(0x161)]('Unable\x20to\x20load\x20healing\x20module,\x20error:\x20'+(_0x308be8&&_0x308be8['message']?_0x308be8[_0x491b40(0x1be)]:''));}}[a59_0x47f07d(0x16b)](_0x1a1b17){const _0x4908a4=a59_0x47f07d,_0x8800d5={};_0x8800d5[_0x4908a4(0x196)]='newCapabilities',_0x8800d5[_0x4908a4(0x189)]=function(_0x179829,_0x30c092){return _0x179829===_0x30c092;},_0x8800d5[_0x4908a4(0x151)]=_0x4908a4(0x157),_0x8800d5['ZuKhH']=_0x4908a4(0x16d),_0x8800d5[_0x4908a4(0x15e)]=function(_0xb48071,_0xce8d0c){return _0xb48071===_0xce8d0c;},_0x8800d5['YoeSB']='safari',_0x8800d5[_0x4908a4(0x173)]=_0x4908a4(0x15d),_0x8800d5[_0x4908a4(0x17d)]=_0x4908a4(0x15c);const _0x2356a9=_0x8800d5;try{const _0x1e689e=this[_0x4908a4(0x190)]['initializeCapabilities'](Object['fromEntries'](_0x1a1b17['getCapabilities']()['map_']));console['log'](_0x2356a9[_0x4908a4(0x196)],_0x1e689e);if(_0x2356a9[_0x4908a4(0x189)](_0x1e689e?.['browserName']?.['toLowerCase'](),_0x2356a9[_0x4908a4(0x151)]))_0x1a1b17[_0x4908a4(0x17b)]=_0x1e689e;else{if(_0x2356a9[_0x4908a4(0x189)](_0x1e689e?.[_0x4908a4(0x148)]?.[_0x4908a4(0x177)](),_0x2356a9[_0x4908a4(0x163)]))_0x1a1b17[_0x4908a4(0x19e)]=_0x1e689e;else{if(_0x2356a9['McHpZ'](_0x1e689e?.[_0x4908a4(0x148)]?.[_0x4908a4(0x177)](),_0x2356a9[_0x4908a4(0x18a)]))_0x1a1b17[_0x4908a4(0x166)]=_0x1e689e;else{if(_0x2356a9['McHpZ'](_0x1e689e?.[_0x4908a4(0x148)]?.[_0x4908a4(0x177)](),_0x2356a9[_0x4908a4(0x173)])||_0x2356a9['McHpZ'](_0x1e689e?.[_0x4908a4(0x148)]?.[_0x4908a4(0x177)](),_0x2356a9['lWHZM']))_0x1a1b17['edgeOptions_']=_0x1e689e;else _0x2356a9[_0x4908a4(0x189)](_0x1e689e?.['browserName']?.[_0x4908a4(0x177)](),'ie')&&(_0x1a1b17[_0x4908a4(0x17c)]=_0x1e689e);}}}Object[_0x4908a4(0x18b)](_0x1e689e)[_0x4908a4(0x14c)](_0x15c7b9=>{const _0x556070=_0x4908a4,_0x91bfff=_0x1a1b17[_0x556070(0x184)][_0x556070(0x185)](_0x15c7b9);_0x1a1b17['capabilities_'][_0x556070(0x199)](_0x15c7b9,_0x1e689e[_0x15c7b9]);});}catch(_0x40e640){logger[_0x4908a4(0x161)](_0x4908a4(0x165)+(_0x40e640&&_0x40e640['message']?_0x40e640['message']:''));}}async[a59_0x47f07d(0x1a9)](_0x93f833){const _0x320743=a59_0x47f07d,_0x225fe0={'XrIcf':function(_0x35fb45,_0x1c1b94,_0x108bdd,_0x5d489e,_0x41edd0,_0x4fc144,_0x4df312){return _0x35fb45(_0x1c1b94,_0x108bdd,_0x5d489e,_0x41edd0,_0x4fc144,_0x4df312);},'mKvhP':_0x320743(0x1b7),'qLSYF':_0x320743(0x1a6),'ZCwZS':_0x320743(0x1ae)},_0x537962=new Date(),_0x538f3e=_0x225fe0[_0x320743(0x16f)](timeoutPromise,constants[_0x320743(0x1b1)],_0x225fe0['mKvhP'],_0x225fe0[_0x320743(0x158)],_0x537962,this[_0x320743(0x16e)],this['framework']);await Promise[_0x320743(0x171)]([this[_0x320743(0x190)][_0x320743(0x156)](_0x93f833,globals['getGlobal'](_0x225fe0[_0x320743(0x192)]),constants[_0x320743(0x154)])[_0x320743(0x153)](()=>{const _0x4660c4=_0x320743;_0x538f3e[_0x4660c4(0x1a1)]();}),_0x538f3e]);}async[a59_0x47f07d(0x186)](_0x41bb91,_0x30971b,_0x5c72a4,_0x523ad){const _0x490fe5=a59_0x47f07d,_0x3fc99e={'TioAs':function(_0x3fb66f,_0x3cdbb6){return _0x3fb66f===_0x3cdbb6;},'SlRAl':function(_0x29892e,_0x936e40){return _0x29892e===_0x936e40;},'HPAUW':function(_0x3aec73,_0x221c83){return _0x3aec73(_0x221c83);},'oUGnr':function(_0x37640e,_0x51e8c2){return _0x37640e(_0x51e8c2);},'liEvQ':function(_0x7ec248,_0x305164){return _0x7ec248(_0x305164);},'xtdJP':function(_0x2556c5,_0x1b9c39){return _0x2556c5(_0x1b9c39);},'EJYcE':function(_0x14e82e,_0x234c75){return _0x14e82e(_0x234c75);},'cQuCZ':function(_0x27c931,_0x4ceeb8){return _0x27c931(_0x4ceeb8);},'YNOQp':function(_0x259a61,_0x4533b3){return _0x259a61(_0x4533b3);},'XofrZ':function(_0x141a0d,_0x3b54a6){return _0x141a0d(_0x3b54a6);},'XWqok':'s://','rKUDv':_0x490fe5(0x14e),'Xbdki':_0x490fe5(0x16a),'sQIJv':_0x490fe5(0x1a2),'fgaxQ':function(_0x9dd225,_0x4ed165,_0x267a72,_0x539f71,_0x1e9432,_0x39dd5a,_0x571abb){return _0x9dd225(_0x4ed165,_0x267a72,_0x539f71,_0x1e9432,_0x39dd5a,_0x571abb);},'uHxef':_0x490fe5(0x1b8),'rOCyE':_0x490fe5(0x1af),'UjZFQ':_0x490fe5(0x150),'wnrpV':_0x490fe5(0x180)},_0xd9ed97=(await _0x30971b[_0x490fe5(0x1ab)]())[_0x490fe5(0x19b)]();let _0x2e13ad='';if(commandRepository[_0x490fe5(0x182)]()&&_0x3fc99e['TioAs'](_0x523ad,![])||_0x3fc99e[_0x490fe5(0x1a5)](_0x523ad,!![])){const _0x4eff23=_0x3fc99e[_0x490fe5(0x1a0)](isNotUndefinedOrNull,_0x5c72a4['parameters_'][_0x490fe5(0x18f)])&&_0x3fc99e[_0x490fe5(0x1bd)](isString,_0x5c72a4[_0x490fe5(0x15a)]['using'])?_0x5c72a4[_0x490fe5(0x15a)]['using'][_0x490fe5(0x1a3)](/'/g,'\x5c\x27')[_0x490fe5(0x1a3)](/"/g,'\x5c\x22'):'',_0x6f4e7=_0x3fc99e['HPAUW'](isNotUndefinedOrNull,_0x5c72a4[_0x490fe5(0x15a)][_0x490fe5(0x18f)])&&_0x3fc99e['liEvQ'](isString,_0x5c72a4[_0x490fe5(0x15a)]['value'])?_0x5c72a4[_0x490fe5(0x15a)][_0x490fe5(0x1b3)][_0x490fe5(0x1a3)](/'/g,'\x5c\x27')[_0x490fe5(0x1a3)](/"/g,'\x5c\x22'):'',_0x38eccc=_0x3fc99e['oUGnr'](isNotUndefinedOrNull,commandRepository[_0x490fe5(0x176)]())&&_0x3fc99e[_0x490fe5(0x1ba)](isString,commandRepository['getProjectName']())?commandRepository[_0x490fe5(0x176)]()['replace'](/'/g,'\x5c\x27')[_0x490fe5(0x1a3)](/"/g,'\x5c\x22'):'';let _0x55ae48=_0x3fc99e[_0x490fe5(0x168)](isNotUndefinedOrNull,global[_0x490fe5(0x1bc)])&&_0x3fc99e[_0x490fe5(0x167)](isString,global['browserstackSessionName'])?global[_0x490fe5(0x1bc)][_0x490fe5(0x1a3)](/'/g,'\x5c\x27')[_0x490fe5(0x1a3)](/"/g,'\x5c\x22'):'';!_0x55ae48&&(_0x55ae48=_0x3fc99e['YNOQp'](isNotUndefinedOrNull,commandRepository[_0x490fe5(0x149)]())&&_0x3fc99e['XofrZ'](isString,commandRepository['getTestName']())?commandRepository[_0x490fe5(0x149)]()['replace'](/'/g,'\x5c\x27')[_0x490fe5(0x1a3)](/"/g,'\x5c\x22'):'');let _0x20eb5d='{\x22region\x22:\x20\x22'+constants[_0x490fe5(0x16c)]+_0x490fe5(0x198)+constants['TCG_REGION']+_0x490fe5(0x1b2)+constants[_0x490fe5(0x154)][_0x490fe5(0x18d)](_0x3fc99e['XWqok'])[0x1]+_0x490fe5(0x14b);_0x20eb5d=_0x3fc99e['liEvQ'](isNotUndefinedOrNull,_0x20eb5d)&&_0x3fc99e[_0x490fe5(0x14d)](isString,_0x20eb5d)?_0x20eb5d['replace'](/'/g,'\x5c\x27')[_0x490fe5(0x1a3)](/"/g,'\x5c\x22'):'';const _0x30ff16=commandRepository['getCommands'](_0xd9ed97),_0x2ca734=globals['getGlobal'](_0x3fc99e['rKUDv']),_0x5701ed=globals[_0x490fe5(0x19f)](_0x3fc99e[_0x490fe5(0x170)]),_0xa9198a=globals[_0x490fe5(0x19f)](_0x3fc99e['sQIJv']),_0x436068=![],_0x257e09=new Date();if(_0x523ad){const _0x51d91a=_0x3fc99e[_0x490fe5(0x181)](timeoutPromise,constants['HEALING_LOG_DATA_TIMEOUT'],_0x3fc99e['uHxef'],_0x3fc99e[_0x490fe5(0x1b6)],_0x257e09,this[_0x490fe5(0x16e)],this[_0x490fe5(0x174)]);_0x2e13ad=await Promise[_0x490fe5(0x171)]([this['BrowserstackHealing'][_0x490fe5(0x1bb)](_0x4eff23,_0x6f4e7,_0x38eccc,_0x55ae48,_0x5701ed,_0xd9ed97,_0x30ff16,_0x20eb5d)[_0x490fe5(0x153)](_0x25c72a=>{const _0x26b59f=_0x490fe5;return _0x51d91a[_0x26b59f(0x1a1)](),_0x25c72a;}),_0x51d91a]);}else{if(commandRepository['isSelfHealEnabled']()){const _0x410b6a=_0x3fc99e[_0x490fe5(0x181)](timeoutPromise,constants['HEALING_FAILURE_TIMEOUT'],_0x3fc99e[_0x490fe5(0x19a)],_0x3fc99e[_0x490fe5(0x1b5)],_0x257e09,this[_0x490fe5(0x16e)],this[_0x490fe5(0x174)]);_0x2e13ad=await Promise['race']([this[_0x490fe5(0x190)][_0x490fe5(0x179)](_0x4eff23,_0x6f4e7,_0x38eccc,_0x55ae48,_0x2ca734,_0x5701ed,_0xd9ed97,_0x30ff16,_0x436068,_0xa9198a,_0x20eb5d)[_0x490fe5(0x153)](_0x25c07b=>{const _0x2cc8a4=_0x490fe5;return _0x410b6a[_0x2cc8a4(0x1a1)](),_0x25c07b;}),_0x410b6a]);}}_0x2e13ad&&await _0x30971b[_0x490fe5(0x17e)](_0x2e13ad);}}async[a59_0x47f07d(0x18e)](_0x20b626,_0x1ff43c,_0x2fae84){const _0x2097b3=a59_0x47f07d;try{await this['_handleEvent'](_0x20b626,_0x1ff43c,_0x2fae84,!![]);}catch(_0x5e3085){return logger['error'](_0x2097b3(0x14a)+(_0x5e3085&&_0x5e3085['message']?_0x5e3085[_0x2097b3(0x1be)]:'')),![];}return!![];}async['handleFailure'](_0x5ea2bb,_0x17fd27,_0xca71c5){const _0x4ef5a7=a59_0x47f07d,_0x4bced6={'aYmSB':function(_0x33782c,_0x27dbff,_0x190d76,_0x3a9e0d,_0x505f65,_0x449077,_0x5228a2){return _0x33782c(_0x27dbff,_0x190d76,_0x3a9e0d,_0x505f65,_0x449077,_0x5228a2);},'nVTdg':_0x4ef5a7(0x197),'hwKwg':_0x4ef5a7(0x152),'YAmuQ':_0x4ef5a7(0x1ae)};try{await this['_handleEvent'](_0x5ea2bb,_0x17fd27,_0xca71c5,![]);const _0x576212=(await _0x17fd27[_0x4ef5a7(0x1ab)]())[_0x4ef5a7(0x19b)](),_0x361635=new Date(),_0x598938=_0x4bced6[_0x4ef5a7(0x159)](timeoutPromise,constants[_0x4ef5a7(0x19d)],_0x4bced6[_0x4ef5a7(0x175)],_0x4bced6[_0x4ef5a7(0x1a4)],_0x361635,this[_0x4ef5a7(0x16e)],this[_0x4ef5a7(0x174)]),_0x5d029e=await Promise[_0x4ef5a7(0x171)]([this[_0x4ef5a7(0x190)]['pollResult'](constants[_0x4ef5a7(0x154)],_0x576212,globals[_0x4ef5a7(0x19f)](_0x4bced6[_0x4ef5a7(0x1a8)]))[_0x4ef5a7(0x153)](_0x4d4847=>{return _0x598938['cancel'](),_0x4d4847;}),_0x598938]);if(_0x5d029e&&_0x5d029e[_0x4ef5a7(0x191)]&&_0x5d029e[_0x4ef5a7(0x1b3)]){const _0x5e2f90={};return _0x5e2f90[_0x4ef5a7(0x188)]=_0x5d029e[_0x4ef5a7(0x191)],_0x5e2f90[_0x4ef5a7(0x1a7)]=_0x5d029e['value'],_0x5e2f90[_0x4ef5a7(0x15f)]=!![],_0x5e2f90;}const _0x1d554a={};return _0x1d554a[_0x4ef5a7(0x188)]=_0xca71c5['parameters_'][_0x4ef5a7(0x18f)],_0x1d554a[_0x4ef5a7(0x1a7)]=_0x5d029e[_0x4ef5a7(0x1b3)],_0x1d554a[_0x4ef5a7(0x15f)]=!![],_0x1d554a;}catch(_0xfcdba8){return logger['debug'](_0x4ef5a7(0x1b0)+(_0xfcdba8&&_0xfcdba8[_0x4ef5a7(0x1be)]?_0xfcdba8[_0x4ef5a7(0x1be)]:'')),logger[_0x4ef5a7(0x1ad)](_0x4ef5a7(0x194)+_0xca71c5[_0x4ef5a7(0x187)]+_0x4ef5a7(0x155)),_0xca71c5;}}}exports['aiSdkWrapper']=Object[a59_0x47f07d(0x195)](new AiSdkWrapper());