const a59_0x3cf2be=a59_0x7147;(function(_0x393349,_0x1f91bc){const _0x376cc7=a59_0x7147,_0x21409a=_0x393349();while(!![]){try{const _0x4c5692=-parseInt(_0x376cc7(0x1f5))/0x1*(parseInt(_0x376cc7(0x20b))/0x2)+-parseInt(_0x376cc7(0x1dc))/0x3*(parseInt(_0x376cc7(0x231))/0x4)+-parseInt(_0x376cc7(0x225))/0x5*(parseInt(_0x376cc7(0x200))/0x6)+-parseInt(_0x376cc7(0x1f0))/0x7+-parseInt(_0x376cc7(0x1df))/0x8*(parseInt(_0x376cc7(0x1e0))/0x9)+parseInt(_0x376cc7(0x232))/0xa*(parseInt(_0x376cc7(0x22e))/0xb)+parseInt(_0x376cc7(0x209))/0xc*(parseInt(_0x376cc7(0x1fa))/0xd);if(_0x4c5692===_0x1f91bc)break;else _0x21409a['push'](_0x21409a['shift']());}catch(_0x4cce30){_0x21409a['push'](_0x21409a['shift']());}}}(a59_0x3b08,0x8e3c2));const path=require(a59_0x3cf2be(0x1ef)),{commandRepository}=require('./autoHealHelper'),constants=require(a59_0x3cf2be(0x1de)),logger=require(a59_0x3cf2be(0x237))[a59_0x3cf2be(0x23a)],globals=require(a59_0x3cf2be(0x21b)),timeoutPromise=require(a59_0x3cf2be(0x248)),isUndefinedOrNull=_0x1d75b4=>_0x1d75b4===undefined||_0x1d75b4===null||_0x1d75b4==='',isNotUndefinedOrNull=_0x5c5e42=>!isUndefinedOrNull(_0x5c5e42),isString=_0x457d78=>isNotUndefinedOrNull(_0x457d78)&&typeof _0x457d78===a59_0x3cf2be(0x1db);class AiSdkWrapper{constructor(){const _0x5e3b3d=a59_0x3cf2be,_0x4f8461={'ZgYYA':function(_0x2ee80c,_0x144b8a){return _0x2ee80c(_0x144b8a);},'wTzLi':_0x5e3b3d(0x22f)};this['BrowserstackHealing']=undefined;try{this[_0x5e3b3d(0x211)]=_0x4f8461[_0x5e3b3d(0x239)](require,path[_0x5e3b3d(0x205)](__dirname,_0x4f8461[_0x5e3b3d(0x1f7)]));}catch(_0x5f1885){logger[_0x5e3b3d(0x1f4)]('Unable\x20to\x20load\x20healing\x20module,\x20error:\x20'+(_0x5f1885&&_0x5f1885['message']?_0x5f1885[_0x5e3b3d(0x22d)]:''));}}[a59_0x3cf2be(0x22c)](_0xd32fa1){const _0x2cb1ee=a59_0x3cf2be,_0x55cdfb={};_0x55cdfb[_0x2cb1ee(0x1e9)]=_0x2cb1ee(0x226),_0x55cdfb[_0x2cb1ee(0x20f)]=function(_0x341890,_0x5bc147){return _0x341890===_0x5bc147;},_0x55cdfb[_0x2cb1ee(0x241)]=_0x2cb1ee(0x20c),_0x55cdfb['Ghjey']=function(_0xb2410,_0x281a8f){return _0xb2410===_0x281a8f;},_0x55cdfb[_0x2cb1ee(0x1d5)]='firefox',_0x55cdfb[_0x2cb1ee(0x23b)]=_0x2cb1ee(0x1d3),_0x55cdfb[_0x2cb1ee(0x1ed)]=function(_0x4864a2,_0x5a9355){return _0x4864a2===_0x5a9355;},_0x55cdfb['fuwop']=_0x2cb1ee(0x247),_0x55cdfb['kRgHy']=_0x2cb1ee(0x233);const _0x56d68f=_0x55cdfb;try{const _0x381441=this['BrowserstackHealing']['initializeCapabilities'](Object[_0x2cb1ee(0x213)](_0xd32fa1[_0x2cb1ee(0x249)]()[_0x2cb1ee(0x20e)]));console[_0x2cb1ee(0x22b)](_0x56d68f['QCMXq'],_0x381441);if(_0x56d68f[_0x2cb1ee(0x20f)](_0x381441?.['browserName']?.[_0x2cb1ee(0x1ee)](),_0x56d68f[_0x2cb1ee(0x241)]))_0xd32fa1['chromeOptions_']=_0x381441;else{if(_0x56d68f[_0x2cb1ee(0x1ea)](_0x381441?.[_0x2cb1ee(0x245)]?.['toLowerCase'](),_0x56d68f[_0x2cb1ee(0x1d5)]))_0xd32fa1['firefoxOptions_']=_0x381441;else{if(_0x56d68f[_0x2cb1ee(0x1ea)](_0x381441?.['browserName']?.[_0x2cb1ee(0x1ee)](),_0x56d68f[_0x2cb1ee(0x23b)]))_0xd32fa1[_0x2cb1ee(0x1f6)]=_0x381441;else{if(_0x56d68f[_0x2cb1ee(0x1ed)](_0x381441?.['browserName']?.[_0x2cb1ee(0x1ee)](),_0x56d68f[_0x2cb1ee(0x1d4)])||_0x56d68f[_0x2cb1ee(0x20f)](_0x381441?.[_0x2cb1ee(0x245)]?.[_0x2cb1ee(0x1ee)](),_0x56d68f[_0x2cb1ee(0x24b)]))_0xd32fa1['edgeOptions_']=_0x381441;else _0x56d68f[_0x2cb1ee(0x20f)](_0x381441?.[_0x2cb1ee(0x245)]?.[_0x2cb1ee(0x1ee)](),'ie')&&(_0xd32fa1[_0x2cb1ee(0x20d)]=_0x381441);}}}Object[_0x2cb1ee(0x207)](_0x381441)['forEach'](_0x5cd186=>{const _0x53410f=_0x2cb1ee,_0x45bfa7=_0xd32fa1[_0x53410f(0x23d)][_0x53410f(0x20a)](_0x5cd186);_0xd32fa1['capabilities_'][_0x53410f(0x215)](_0x5cd186,_0x381441[_0x5cd186]);});}catch(_0x59700f){logger[_0x2cb1ee(0x1f4)]('Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20'+(_0x59700f&&_0x59700f[_0x2cb1ee(0x22d)]?_0x59700f[_0x2cb1ee(0x22d)]:''));}}async['setTcgToken'](_0x45ae27){const _0x5ac162=a59_0x3cf2be,_0x30eff8={'aHXhY':function(_0x3e199a,_0x16d369,_0x2bfa70,_0x409505,_0x73df8b,_0x477439,_0x155539){return _0x3e199a(_0x16d369,_0x2bfa70,_0x409505,_0x73df8b,_0x477439,_0x155539);},'YgHjC':_0x5ac162(0x1da),'ECxtr':'BrowserstackHealingSetTcgTokenFailed','YNDdb':'aiHeal_sessionToken'},_0x4de019=new Date(),_0x57eec8=_0x30eff8[_0x5ac162(0x1d8)](timeoutPromise,constants['SET_TCG_TOKEN_TIMEOUT'],_0x30eff8[_0x5ac162(0x216)],_0x30eff8[_0x5ac162(0x204)],_0x4de019,this[_0x5ac162(0x227)],this[_0x5ac162(0x1d1)]);await Promise['race']([this[_0x5ac162(0x211)]['setToken'](_0x45ae27,globals[_0x5ac162(0x1e8)](_0x30eff8[_0x5ac162(0x21f)]),constants[_0x5ac162(0x1fc)])[_0x5ac162(0x218)](()=>{const _0x1e6b11=_0x5ac162;_0x57eec8[_0x1e6b11(0x224)]();}),_0x57eec8]);}async[a59_0x3cf2be(0x1e3)](_0x51dce5,_0xa0f632,_0x139ec3,_0x59a5a6){const _0x3b518f=a59_0x3cf2be,_0x7facbe={'qvZlL':function(_0x5b1297,_0xdfdbec){return _0x5b1297===_0xdfdbec;},'ZyREY':function(_0x291666,_0x12f739){return _0x291666===_0x12f739;},'KEkRe':function(_0x3112d3,_0x5df5b3){return _0x3112d3(_0x5df5b3);},'qLTIX':function(_0x8e3b05,_0xb13700){return _0x8e3b05(_0xb13700);},'DsMou':function(_0x38314a,_0x43b788){return _0x38314a(_0x43b788);},'RxGfV':function(_0x23d4aa,_0x47ba58){return _0x23d4aa(_0x47ba58);},'yXYXq':function(_0x411ee4,_0x3d61df){return _0x411ee4(_0x3d61df);},'KZAHz':function(_0x389412,_0x22f488){return _0x389412(_0x22f488);},'AZGUJ':_0x3b518f(0x222),'EKcrI':function(_0x1eb893,_0x2ef5a8){return _0x1eb893(_0x2ef5a8);},'MkeDc':_0x3b518f(0x1f2),'WNtNm':_0x3b518f(0x23c),'rFRVU':_0x3b518f(0x217),'GgfmW':function(_0x3aac5a,_0x285656,_0x14ea5e,_0x32e833,_0x22de64,_0x256798,_0x290585){return _0x3aac5a(_0x285656,_0x14ea5e,_0x32e833,_0x22de64,_0x256798,_0x290585);},'aUcGt':_0x3b518f(0x220),'GlCvf':_0x3b518f(0x24d),'GUpUa':function(_0x3bae76,_0x3328af,_0x1fc6d4,_0x5e9269,_0x3dc58e,_0x47e11e,_0xbfa1f9){return _0x3bae76(_0x3328af,_0x1fc6d4,_0x5e9269,_0x3dc58e,_0x47e11e,_0xbfa1f9);},'UysVg':_0x3b518f(0x1ec),'uRubc':_0x3b518f(0x1e1)},_0x196180=(await _0xa0f632[_0x3b518f(0x22a)]())['getId']();let _0x1a849f='';if(commandRepository[_0x3b518f(0x229)]()&&_0x7facbe[_0x3b518f(0x221)](_0x59a5a6,![])||_0x7facbe[_0x3b518f(0x235)](_0x59a5a6,!![])){const _0x239746=_0x7facbe[_0x3b518f(0x246)](isNotUndefinedOrNull,_0x139ec3[_0x3b518f(0x21c)][_0x3b518f(0x21a)])&&_0x7facbe[_0x3b518f(0x244)](isString,_0x139ec3[_0x3b518f(0x21c)][_0x3b518f(0x21a)])?_0x139ec3['parameters_'][_0x3b518f(0x21a)][_0x3b518f(0x202)](/'/g,'\x5c\x27')[_0x3b518f(0x202)](/"/g,'\x5c\x22'):'',_0xa3544=_0x7facbe[_0x3b518f(0x244)](isNotUndefinedOrNull,_0x139ec3[_0x3b518f(0x21c)][_0x3b518f(0x21a)])&&_0x7facbe[_0x3b518f(0x244)](isString,_0x139ec3[_0x3b518f(0x21c)][_0x3b518f(0x24c)])?_0x139ec3[_0x3b518f(0x21c)]['value']['replace'](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'',_0x388ba8=_0x7facbe[_0x3b518f(0x246)](isNotUndefinedOrNull,commandRepository[_0x3b518f(0x208)]())&&_0x7facbe['DsMou'](isString,commandRepository[_0x3b518f(0x208)]())?commandRepository[_0x3b518f(0x208)]()['replace'](/'/g,'\x5c\x27')[_0x3b518f(0x202)](/"/g,'\x5c\x22'):'';let _0x297cd3=_0x7facbe[_0x3b518f(0x223)](isNotUndefinedOrNull,global['browserstackSessionName'])&&_0x7facbe[_0x3b518f(0x242)](isString,global[_0x3b518f(0x24e)])?global[_0x3b518f(0x24e)][_0x3b518f(0x202)](/'/g,'\x5c\x27')[_0x3b518f(0x202)](/"/g,'\x5c\x22'):'';!_0x297cd3&&(_0x297cd3=_0x7facbe['yXYXq'](isNotUndefinedOrNull,commandRepository[_0x3b518f(0x228)]())&&_0x7facbe[_0x3b518f(0x203)](isString,commandRepository['getTestName']())?commandRepository[_0x3b518f(0x228)]()[_0x3b518f(0x202)](/'/g,'\x5c\x27')[_0x3b518f(0x202)](/"/g,'\x5c\x22'):'');let _0xcfd89a=_0x3b518f(0x1eb)+constants['TCG_REGION']+_0x3b518f(0x238)+constants[_0x3b518f(0x210)]+_0x3b518f(0x1e6)+constants['TCG_URL'][_0x3b518f(0x1d7)](_0x7facbe[_0x3b518f(0x1f1)])[0x1]+_0x3b518f(0x1d6);_0xcfd89a=_0x7facbe[_0x3b518f(0x203)](isNotUndefinedOrNull,_0xcfd89a)&&_0x7facbe['EKcrI'](isString,_0xcfd89a)?_0xcfd89a[_0x3b518f(0x202)](/'/g,'\x5c\x27')[_0x3b518f(0x202)](/"/g,'\x5c\x22'):'';const _0x6fbb4b=commandRepository[_0x3b518f(0x1f8)](_0x196180),_0x4ee5f5=globals[_0x3b518f(0x1e8)](_0x7facbe[_0x3b518f(0x1e4)]),_0x3f0fcd=globals[_0x3b518f(0x1e8)](_0x7facbe['WNtNm']),_0x45d14a=globals[_0x3b518f(0x1e8)](_0x7facbe[_0x3b518f(0x21d)]),_0x50d436=![],_0x1d3c5c=new Date();if(_0x59a5a6){const _0x53b9fa=_0x7facbe[_0x3b518f(0x1e7)](timeoutPromise,constants[_0x3b518f(0x201)],_0x7facbe[_0x3b518f(0x1e2)],_0x7facbe[_0x3b518f(0x1d9)],_0x1d3c5c,this[_0x3b518f(0x227)],this[_0x3b518f(0x1d1)]);_0x1a849f=await Promise[_0x3b518f(0x1e5)]([this['BrowserstackHealing'][_0x3b518f(0x243)](_0x239746,_0xa3544,_0x388ba8,_0x297cd3,_0x3f0fcd,_0x196180,_0x6fbb4b,_0xcfd89a)[_0x3b518f(0x218)](_0x5debf0=>{return _0x53b9fa['cancel'](),_0x5debf0;}),_0x53b9fa]);}else{if(commandRepository[_0x3b518f(0x229)]()){const _0x2e460=_0x7facbe[_0x3b518f(0x1ff)](timeoutPromise,constants['HEALING_FAILURE_TIMEOUT'],_0x7facbe[_0x3b518f(0x230)],_0x7facbe[_0x3b518f(0x1f3)],_0x1d3c5c,this[_0x3b518f(0x227)],this['framework']);_0x1a849f=await Promise[_0x3b518f(0x1e5)]([this[_0x3b518f(0x211)][_0x3b518f(0x1fd)](_0x239746,_0xa3544,_0x388ba8,_0x297cd3,_0x4ee5f5,_0x3f0fcd,_0x196180,_0x6fbb4b,_0x50d436,_0x45d14a,_0xcfd89a)[_0x3b518f(0x218)](_0x3bb747=>{return _0x2e460['cancel'](),_0x3bb747;}),_0x2e460]);}}_0x1a849f&&await _0xa0f632['executeScript'](_0x1a849f);}}async['handleSuccess'](_0x4bdcc5,_0x22ab3b,_0xdc53d0){const _0x321a4b=a59_0x3cf2be;try{await this[_0x321a4b(0x1e3)](_0x4bdcc5,_0x22ab3b,_0xdc53d0,!![]);}catch(_0x5f41e5){return logger[_0x321a4b(0x1f4)](_0x321a4b(0x23f)+(_0x5f41e5&&_0x5f41e5['message']?_0x5f41e5[_0x321a4b(0x22d)]:'')),![];}return!![];}async[a59_0x3cf2be(0x21e)](_0x125fb5,_0x3d692f,_0x2ba4c3){const _0x2a9930=a59_0x3cf2be,_0x37378f={'FOnLN':function(_0x39723a,_0x38b74d,_0x3b66a8,_0x2c7eb8,_0x1ac8ef,_0x3d1f20,_0x4ff9aa){return _0x39723a(_0x38b74d,_0x3b66a8,_0x2c7eb8,_0x1ac8ef,_0x3d1f20,_0x4ff9aa);},'SuSAw':_0x2a9930(0x219),'onZTz':_0x2a9930(0x236),'zSDNc':_0x2a9930(0x1fb)};try{await this[_0x2a9930(0x1e3)](_0x125fb5,_0x3d692f,_0x2ba4c3,![]);const _0x4c7cd8=(await _0x3d692f[_0x2a9930(0x22a)]())['getId'](),_0x4e1f1e=new Date(),_0x178182=_0x37378f[_0x2a9930(0x1fe)](timeoutPromise,constants['POLL_HEALING_RESULT_TIMEOUT'],_0x37378f[_0x2a9930(0x1f9)],_0x37378f[_0x2a9930(0x234)],_0x4e1f1e,this[_0x2a9930(0x227)],this[_0x2a9930(0x1d1)]),_0x16e7e9=await Promise[_0x2a9930(0x1e5)]([this['BrowserstackHealing']['pollResult'](constants[_0x2a9930(0x1fc)],_0x4c7cd8,globals[_0x2a9930(0x1e8)](_0x37378f[_0x2a9930(0x240)]))[_0x2a9930(0x218)](_0x455c7d=>{return _0x178182['cancel'](),_0x455c7d;}),_0x178182]);if(_0x16e7e9&&_0x16e7e9[_0x2a9930(0x23e)]&&_0x16e7e9[_0x2a9930(0x24c)]){const _0x1d9bb7={};return _0x1d9bb7[_0x2a9930(0x206)]=_0x16e7e9[_0x2a9930(0x23e)],_0x1d9bb7[_0x2a9930(0x1d2)]=_0x16e7e9[_0x2a9930(0x24c)],_0x1d9bb7[_0x2a9930(0x1dd)]=!![],_0x1d9bb7;}const _0x2c4491={};return _0x2c4491[_0x2a9930(0x206)]=_0x2ba4c3['parameters_'][_0x2a9930(0x21a)],_0x2c4491['locatorValue']=_0x16e7e9[_0x2a9930(0x24c)],_0x2c4491[_0x2a9930(0x1dd)]=!![],_0x2c4491;}catch(_0x1bc529){return logger['debug']('Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20'+(_0x1bc529&&_0x1bc529[_0x2a9930(0x22d)]?_0x1bc529[_0x2a9930(0x22d)]:'')),logger[_0x2a9930(0x24a)](_0x2a9930(0x212)+_0x2ba4c3[_0x2a9930(0x214)]+'\x20command'),_0x2ba4c3;}}}exports['aiSdkWrapper']=Object['freeze'](new AiSdkWrapper());function a59_0x7147(_0x212cb2,_0x3c217d){const _0x3b0859=a59_0x3b08();return a59_0x7147=function(_0x7147de,_0x28a9e7){_0x7147de=_0x7147de-0x1d1;let _0x1e61bd=_0x3b0859[_0x7147de];return _0x1e61bd;},a59_0x7147(_0x212cb2,_0x3c217d);}function a59_0x3b08(){const _0x2c4dfc=['BrowserstackHealingLogDataFailed','browserstackSessionName','framework','locatorValue','safari','fuwop','hOcIW','\x22}}}','split','aHXhY','GlCvf','BrowserstackHealing.setToken\x20method\x20timed\x20out','string','12kFcFHc','aiHealing','../../bin/utils/constants','5041392FQsQyu','9kOeyob','BrowserstackHealingHealFailureFailed','aUcGt','_handleEvent','MkeDc','race','\x22:\x20{\x22endpoint\x22:\x20\x22','GgfmW','getGlobal','QCMXq','Ghjey','{\x22region\x22:\x20\x22','BrowserstackHealing.healFailure\x20method\x20timed\x20out','YOQBa','toLowerCase','path','1907178ZYvCfR','AZGUJ','aiHeal_userId','uRubc','error','1Mvlnfu','safariOptions_','wTzLi','getCommands','SuSAw','351ubITdm','aiHeal_sessionToken','TCG_URL','healFailure','FOnLN','GUpUa','521886VdxuqE','HEALING_LOG_DATA_TIMEOUT','replace','KZAHz','ECxtr','join','locatorType','keys','getProjectName','1691892jXlbyp','get','1437416HPVwoV','chrome','ieOptions_','map_','gFUhS','TCG_REGION','BrowserstackHealing','Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20','fromEntries','name_','set','YgHjC','aiHeal_isGroupAIEnabled','then','BrowserstackHealing.pollResult\x20method\x20timed\x20out','using','../globals','parameters_','rFRVU','handleFailure','YNDdb','BrowserstackHealing.logData\x20method\x20timed\x20out','qvZlL','s://','DsMou','cancel','55QjsDev','newCapabilities','config','getTestName','isSelfHealEnabled','getSession','log','initializeHealingCapabilities','message','11RFUDCw','../../ai-sdk-node/bundle','UysVg','854312OuYPHj','2082760CoqNqA','microsoftedge','onZTz','ZyREY','BrowserstackHealingPollResultFailed','../logger','\x22,\x20\x22tcgUrls\x22:\x20{\x22','ZgYYA','winstonLogger','YmlfX','aiHeal_groupId','capabilities_','selector','Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20','zSDNc','JIWME','RxGfV','logData','qLTIX','browserName','KEkRe','edge','../../helpers/timeoutPromise','getCapabilities','info','kRgHy','value'];a59_0x3b08=function(){return _0x2c4dfc;};return a59_0x3b08();}