const a59_0x29684d=a59_0xb852;(function(_0x5010b9,_0x4ec7c9){const _0x385096=a59_0xb852,_0x3d9fad=_0x5010b9();while(!![]){try{const _0x18717d=parseInt(_0x385096(0x198))/0x1*(-parseInt(_0x385096(0x1e1))/0x2)+-parseInt(_0x385096(0x1a5))/0x3*(parseInt(_0x385096(0x1e3))/0x4)+parseInt(_0x385096(0x1f2))/0x5+-parseInt(_0x385096(0x1ef))/0x6+-parseInt(_0x385096(0x1db))/0x7+parseInt(_0x385096(0x1a7))/0x8+parseInt(_0x385096(0x1cb))/0x9;if(_0x18717d===_0x4ec7c9)break;else _0x3d9fad['push'](_0x3d9fad['shift']());}catch(_0x19484d){_0x3d9fad['push'](_0x3d9fad['shift']());}}}(a59_0x2168,0xeb427));function a59_0x2168(){const _0x2215a3=['Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20','BrowserstackHealing','aiHealing','BrowserstackHealingHealFailureFailed','8231300fnCxgm','oqCmr','aiHeal_isGroupAIEnabled','chromeOptions_','\x22:\x20{\x22endpoint\x22:\x20\x22','get','22pSOSdD','oaGjK','4bQHnSj','initializeHealingCapabilities','edgeOptions_','healFailure','setToken','EaCgy','getCommands','browserName','ohLWi','POLL_HEALING_RESULT_TIMEOUT','BrowserstackHealing.logData\x20method\x20timed\x20out','aiHeal_sessionToken','3552546PbwaRq','config','getGlobal','2467575bZASgr','toLowerCase','set','CyTUQ','BrowserstackHealing.healFailure\x20method\x20timed\x20out','TKjmg','firefoxOptions_','aiHeal_groupId','HnyHP','firefox','keys','executeScript','BrowserstackHealingLogDataFailed','getCapabilities','Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20','iBQox','s://','LQCaA','initializeCapabilities','getTestName','info','../../helpers/timeoutPromise','aiHeal_userId','TCG_URL','YMecH','Unable\x20to\x20load\x20healing\x20module,\x20error:\x20','Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20','./autoHealHelper','25481hIXLnn','dYLHK','BrowserstackHealing.setToken\x20method\x20timed\x20out','JFVjj','race','WEleE','logData','locatorValue','safariOptions_','ncfHt','\x22,\x20\x22tcgUrls\x22:\x20{\x22','unWxY','capabilities_','5118024WbZEJT','name_','9264928LmtbDt','locatorType','value','path','error','message','isSelfHealEnabled','zoJUy','BrowserstackHealing.pollResult\x20method\x20timed\x20out','browserstackSessionName','OFghk','then','BrowserstackHealingPollResultFailed','SPnuU','selector','edge','using','aiSdkWrapper','getSession','MuBsj','replace','\x22}}}','cancel','fromEntries','{\x22region\x22:\x20\x22','framework','HEALING_LOG_DATA_TIMEOUT','handleSuccess','ezOFO','debug','getId','parameters_','TCG_REGION','log','MyWrz','IPXWL','27596538QIkRTc','join','../../ai-sdk-node/bundle','NxYdo','Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20','wMhWl','ZYsfc','GTtHp','YpsWs','handleFailure','oUhMm','../globals'];a59_0x2168=function(){return _0x2215a3;};return a59_0x2168();}const path=require(a59_0x29684d(0x1aa)),{commandRepository}=require(a59_0x29684d(0x197)),constants=require('../../bin/utils/constants'),logger=require('../logger')['winstonLogger'],globals=require(a59_0x29684d(0x1d6)),timeoutPromise=require(a59_0x29684d(0x191)),isUndefinedOrNull=_0x148d8b=>_0x148d8b===undefined||_0x148d8b===null||_0x148d8b==='',isNotUndefinedOrNull=_0x5d7be9=>!isUndefinedOrNull(_0x5d7be9),isString=_0x367b2f=>isNotUndefinedOrNull(_0x367b2f)&&typeof _0x367b2f==='string';function a59_0xb852(_0x519699,_0x138cd3){const _0x216867=a59_0x2168();return a59_0xb852=function(_0xb852d1,_0x4ca4a8){_0xb852d1=_0xb852d1-0x186;let _0x4be876=_0x216867[_0xb852d1];return _0x4be876;},a59_0xb852(_0x519699,_0x138cd3);}class AiSdkWrapper{constructor(){const _0x3aba93=a59_0x29684d,_0x37db80={'SPnuU':function(_0x2d5210,_0x587906){return _0x2d5210(_0x587906);},'NxYdo':_0x3aba93(0x1cd)};this['BrowserstackHealing']=undefined;try{this[_0x3aba93(0x1d8)]=_0x37db80[_0x3aba93(0x1b4)](require,path[_0x3aba93(0x1cc)](__dirname,_0x37db80[_0x3aba93(0x1ce)]));}catch(_0x946ab4){logger[_0x3aba93(0x1ab)](_0x3aba93(0x195)+(_0x946ab4&&_0x946ab4[_0x3aba93(0x1ac)]?_0x946ab4[_0x3aba93(0x1ac)]:''));}}[a59_0x29684d(0x1e4)](_0x382163){const _0x5b016e=a59_0x29684d,_0x1ccc9c={};_0x1ccc9c[_0x5b016e(0x1ca)]='newCapabilities',_0x1ccc9c[_0x5b016e(0x1d2)]=function(_0x6d00c,_0x17ee6a){return _0x6d00c===_0x17ee6a;},_0x1ccc9c[_0x5b016e(0x1dc)]='chrome',_0x1ccc9c['LQCaA']=function(_0x14363e,_0x573127){return _0x14363e===_0x573127;},_0x1ccc9c[_0x5b016e(0x1d0)]=_0x5b016e(0x1fb),_0x1ccc9c[_0x5b016e(0x1f5)]='safari',_0x1ccc9c[_0x5b016e(0x1a3)]=function(_0x1d02aa,_0x1f31cf){return _0x1d02aa===_0x1f31cf;},_0x1ccc9c[_0x5b016e(0x1e8)]=_0x5b016e(0x1b6),_0x1ccc9c[_0x5b016e(0x1d3)]=function(_0x4012d9,_0x468108){return _0x4012d9===_0x468108;},_0x1ccc9c[_0x5b016e(0x1f7)]='microsoftedge';const _0x3b995d=_0x1ccc9c;try{const _0x1f7f41=this[_0x5b016e(0x1d8)][_0x5b016e(0x18e)](Object[_0x5b016e(0x1be)](_0x382163[_0x5b016e(0x189)]()['map_']));console[_0x5b016e(0x1c8)](_0x3b995d[_0x5b016e(0x1ca)],_0x1f7f41);if(_0x3b995d[_0x5b016e(0x1d2)](_0x1f7f41?.['browserName']?.[_0x5b016e(0x1f3)](),_0x3b995d[_0x5b016e(0x1dc)]))_0x382163[_0x5b016e(0x1de)]=_0x1f7f41;else{if(_0x3b995d[_0x5b016e(0x18d)](_0x1f7f41?.[_0x5b016e(0x1ea)]?.[_0x5b016e(0x1f3)](),_0x3b995d[_0x5b016e(0x1d0)]))_0x382163[_0x5b016e(0x1f8)]=_0x1f7f41;else{if(_0x3b995d[_0x5b016e(0x1d2)](_0x1f7f41?.['browserName']?.[_0x5b016e(0x1f3)](),_0x3b995d[_0x5b016e(0x1f5)]))_0x382163[_0x5b016e(0x1a0)]=_0x1f7f41;else{if(_0x3b995d['unWxY'](_0x1f7f41?.[_0x5b016e(0x1ea)]?.[_0x5b016e(0x1f3)](),_0x3b995d[_0x5b016e(0x1e8)])||_0x3b995d[_0x5b016e(0x1d3)](_0x1f7f41?.['browserName']?.[_0x5b016e(0x1f3)](),_0x3b995d[_0x5b016e(0x1f7)]))_0x382163[_0x5b016e(0x1e5)]=_0x1f7f41;else _0x3b995d[_0x5b016e(0x1d2)](_0x1f7f41?.[_0x5b016e(0x1ea)]?.[_0x5b016e(0x1f3)](),'ie')&&(_0x382163['ieOptions_']=_0x1f7f41);}}}Object[_0x5b016e(0x186)](_0x1f7f41)['forEach'](_0x47ce6c=>{const _0x3e58cd=_0x5b016e,_0x53abeb=_0x382163[_0x3e58cd(0x1a4)][_0x3e58cd(0x1e0)](_0x47ce6c);_0x382163[_0x3e58cd(0x1a4)][_0x3e58cd(0x1f4)](_0x47ce6c,_0x1f7f41[_0x47ce6c]);});}catch(_0x406e42){logger[_0x5b016e(0x1ab)](_0x5b016e(0x196)+(_0x406e42&&_0x406e42[_0x5b016e(0x1ac)]?_0x406e42['message']:''));}}async['setTcgToken'](_0x4647fc){const _0x5624ab=a59_0x29684d,_0x219aa3={'HZRjv':function(_0x11d978,_0x224fc8,_0x7b4321,_0x2f376e,_0x130264,_0x54c71a,_0x7b2c91){return _0x11d978(_0x224fc8,_0x7b4321,_0x2f376e,_0x130264,_0x54c71a,_0x7b2c91);},'MyWrz':_0x5624ab(0x19a),'ohLWi':'BrowserstackHealingSetTcgTokenFailed','oUhMm':_0x5624ab(0x1ee)},_0x2ac50a=new Date(),_0x4e945f=_0x219aa3['HZRjv'](timeoutPromise,constants['SET_TCG_TOKEN_TIMEOUT'],_0x219aa3[_0x5624ab(0x1c9)],_0x219aa3[_0x5624ab(0x1eb)],_0x2ac50a,this[_0x5624ab(0x1f0)],this[_0x5624ab(0x1c0)]);await Promise[_0x5624ab(0x19c)]([this[_0x5624ab(0x1d8)][_0x5624ab(0x1e7)](_0x4647fc,globals['getGlobal'](_0x219aa3[_0x5624ab(0x1d5)]),constants[_0x5624ab(0x193)])['then'](()=>{_0x4e945f['cancel']();}),_0x4e945f]);}async['_handleEvent'](_0x11e5d2,_0x19b336,_0x2c4533,_0x4fff91){const _0xaf67af=a59_0x29684d,_0x5a653e={'oaGjK':function(_0x3e9841,_0x21339d){return _0x3e9841===_0x21339d;},'HnyHP':function(_0x1af6d1,_0x3fc469){return _0x1af6d1(_0x3fc469);},'iBQox':function(_0x55a660,_0x382b14){return _0x55a660(_0x382b14);},'zoJUy':function(_0x19daf8,_0x4692fb){return _0x19daf8(_0x4692fb);},'dYLHK':function(_0x14bfda,_0x206685){return _0x14bfda(_0x206685);},'oxaeO':_0xaf67af(0x18c),'JFVjj':function(_0x4d7734,_0x1b33d0){return _0x4d7734(_0x1b33d0);},'Vdvlc':_0xaf67af(0x192),'WEleE':_0xaf67af(0x1f9),'YMecH':_0xaf67af(0x1dd),'MuBsj':function(_0x47c13b,_0x292ebe,_0x421b08,_0x15667c,_0x3f9e9d,_0x335cd4,_0xa2358){return _0x47c13b(_0x292ebe,_0x421b08,_0x15667c,_0x3f9e9d,_0x335cd4,_0xa2358);},'GUOMy':_0xaf67af(0x1ed),'PoVat':_0xaf67af(0x188),'OFghk':_0xaf67af(0x1f6),'ZYsfc':_0xaf67af(0x1da)},_0x17d400=(await _0x19b336[_0xaf67af(0x1b9)]())[_0xaf67af(0x1c5)]();let _0xb58b6f='';if(commandRepository[_0xaf67af(0x1ad)]()&&_0x5a653e[_0xaf67af(0x1e2)](_0x4fff91,![])||_0x5a653e[_0xaf67af(0x1e2)](_0x4fff91,!![])){const _0x2841c1=_0x5a653e['HnyHP'](isNotUndefinedOrNull,_0x2c4533[_0xaf67af(0x1c6)]['using'])&&_0x5a653e[_0xaf67af(0x18b)](isString,_0x2c4533[_0xaf67af(0x1c6)][_0xaf67af(0x1b7)])?_0x2c4533[_0xaf67af(0x1c6)]['using'][_0xaf67af(0x1bb)](/'/g,'\x5c\x27')[_0xaf67af(0x1bb)](/"/g,'\x5c\x22'):'',_0x1031b3=_0x5a653e[_0xaf67af(0x1fa)](isNotUndefinedOrNull,_0x2c4533['parameters_'][_0xaf67af(0x1b7)])&&_0x5a653e[_0xaf67af(0x1fa)](isString,_0x2c4533[_0xaf67af(0x1c6)][_0xaf67af(0x1a9)])?_0x2c4533[_0xaf67af(0x1c6)][_0xaf67af(0x1a9)]['replace'](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'',_0x53a650=_0x5a653e['zoJUy'](isNotUndefinedOrNull,commandRepository['getProjectName']())&&_0x5a653e[_0xaf67af(0x1fa)](isString,commandRepository['getProjectName']())?commandRepository['getProjectName']()[_0xaf67af(0x1bb)](/'/g,'\x5c\x27')[_0xaf67af(0x1bb)](/"/g,'\x5c\x22'):'';let _0x56c3cf=_0x5a653e[_0xaf67af(0x199)](isNotUndefinedOrNull,global['browserstackSessionName'])&&_0x5a653e['HnyHP'](isString,global[_0xaf67af(0x1b0)])?global['browserstackSessionName'][_0xaf67af(0x1bb)](/'/g,'\x5c\x27')[_0xaf67af(0x1bb)](/"/g,'\x5c\x22'):'';!_0x56c3cf&&(_0x56c3cf=_0x5a653e[_0xaf67af(0x1ae)](isNotUndefinedOrNull,commandRepository[_0xaf67af(0x18f)]())&&_0x5a653e['zoJUy'](isString,commandRepository[_0xaf67af(0x18f)]())?commandRepository[_0xaf67af(0x18f)]()[_0xaf67af(0x1bb)](/'/g,'\x5c\x27')[_0xaf67af(0x1bb)](/"/g,'\x5c\x22'):'');let _0x5823cf=_0xaf67af(0x1bf)+constants[_0xaf67af(0x1c7)]+_0xaf67af(0x1a2)+constants['TCG_REGION']+_0xaf67af(0x1df)+constants[_0xaf67af(0x193)]['split'](_0x5a653e['oxaeO'])[0x1]+_0xaf67af(0x1bc);_0x5823cf=_0x5a653e[_0xaf67af(0x19b)](isNotUndefinedOrNull,_0x5823cf)&&_0x5a653e['zoJUy'](isString,_0x5823cf)?_0x5823cf[_0xaf67af(0x1bb)](/'/g,'\x5c\x27')[_0xaf67af(0x1bb)](/"/g,'\x5c\x22'):'';const _0x4458f4=commandRepository[_0xaf67af(0x1e9)](_0x17d400),_0x53cb03=globals[_0xaf67af(0x1f1)](_0x5a653e['Vdvlc']),_0x3c533d=globals[_0xaf67af(0x1f1)](_0x5a653e[_0xaf67af(0x19d)]),_0x5b1692=globals[_0xaf67af(0x1f1)](_0x5a653e[_0xaf67af(0x194)]),_0x171ae9=![],_0x361b7f=new Date();if(_0x4fff91){const _0x5a550e=_0x5a653e[_0xaf67af(0x1ba)](timeoutPromise,constants[_0xaf67af(0x1c1)],_0x5a653e['GUOMy'],_0x5a653e['PoVat'],_0x361b7f,this['config'],this[_0xaf67af(0x1c0)]);_0xb58b6f=await Promise[_0xaf67af(0x19c)]([this[_0xaf67af(0x1d8)][_0xaf67af(0x19e)](_0x2841c1,_0x1031b3,_0x53a650,_0x56c3cf,_0x3c533d,_0x17d400,_0x4458f4,_0x5823cf)[_0xaf67af(0x1b2)](_0x4541b1=>{const _0x5c9310=_0xaf67af;return _0x5a550e[_0x5c9310(0x1bd)](),_0x4541b1;}),_0x5a550e]);}else{if(commandRepository['isSelfHealEnabled']()){const _0x439ac6=_0x5a653e[_0xaf67af(0x1ba)](timeoutPromise,constants['HEALING_FAILURE_TIMEOUT'],_0x5a653e[_0xaf67af(0x1b1)],_0x5a653e[_0xaf67af(0x1d1)],_0x361b7f,this[_0xaf67af(0x1f0)],this[_0xaf67af(0x1c0)]);_0xb58b6f=await Promise[_0xaf67af(0x19c)]([this[_0xaf67af(0x1d8)][_0xaf67af(0x1e6)](_0x2841c1,_0x1031b3,_0x53a650,_0x56c3cf,_0x53cb03,_0x3c533d,_0x17d400,_0x4458f4,_0x171ae9,_0x5b1692,_0x5823cf)[_0xaf67af(0x1b2)](_0x392922=>{const _0x3ea04f=_0xaf67af;return _0x439ac6[_0x3ea04f(0x1bd)](),_0x392922;}),_0x439ac6]);}}_0xb58b6f&&await _0x19b336[_0xaf67af(0x187)](_0xb58b6f);}}async[a59_0x29684d(0x1c2)](_0x51c504,_0x1c64ed,_0x5d2aff){const _0x5c5648=a59_0x29684d;try{await this['_handleEvent'](_0x51c504,_0x1c64ed,_0x5d2aff,!![]);}catch(_0x5e4952){return logger[_0x5c5648(0x1ab)](_0x5c5648(0x1d7)+(_0x5e4952&&_0x5e4952[_0x5c5648(0x1ac)]?_0x5e4952[_0x5c5648(0x1ac)]:'')),![];}return!![];}async[a59_0x29684d(0x1d4)](_0x11c9d9,_0x40b2fc,_0x9be4f0){const _0xbdd363=a59_0x29684d,_0x31f93e={'ezOFO':function(_0x476335,_0x674a22,_0x2dec43,_0xd29090,_0x2f76c5,_0x31ce7d,_0xbb4353){return _0x476335(_0x674a22,_0x2dec43,_0xd29090,_0x2f76c5,_0x31ce7d,_0xbb4353);},'YMGnS':_0xbdd363(0x1af),'ncfHt':_0xbdd363(0x1b3),'uZEJH':'aiHeal_sessionToken'};try{await this['_handleEvent'](_0x11c9d9,_0x40b2fc,_0x9be4f0,![]);const _0xebd3fa=(await _0x40b2fc[_0xbdd363(0x1b9)]())[_0xbdd363(0x1c5)](),_0x575139=new Date(),_0x227468=_0x31f93e[_0xbdd363(0x1c3)](timeoutPromise,constants[_0xbdd363(0x1ec)],_0x31f93e['YMGnS'],_0x31f93e[_0xbdd363(0x1a1)],_0x575139,this[_0xbdd363(0x1f0)],this[_0xbdd363(0x1c0)]),_0x218031=await Promise[_0xbdd363(0x19c)]([this[_0xbdd363(0x1d8)]['pollResult'](constants[_0xbdd363(0x193)],_0xebd3fa,globals[_0xbdd363(0x1f1)](_0x31f93e['uZEJH']))['then'](_0x2dbb9c=>{return _0x227468['cancel'](),_0x2dbb9c;}),_0x227468]);if(_0x218031&&_0x218031['selector']&&_0x218031[_0xbdd363(0x1a9)]){const _0x30ae3a={};return _0x30ae3a[_0xbdd363(0x1a8)]=_0x218031[_0xbdd363(0x1b5)],_0x30ae3a[_0xbdd363(0x19f)]=_0x218031[_0xbdd363(0x1a9)],_0x30ae3a[_0xbdd363(0x1d9)]=!![],_0x30ae3a;}const _0xdef78c={};return _0xdef78c[_0xbdd363(0x1a8)]=_0x9be4f0[_0xbdd363(0x1c6)][_0xbdd363(0x1b7)],_0xdef78c['locatorValue']=_0x218031['value'],_0xdef78c[_0xbdd363(0x1d9)]=!![],_0xdef78c;}catch(_0x427b95){return logger[_0xbdd363(0x1c4)](_0xbdd363(0x1cf)+(_0x427b95&&_0x427b95[_0xbdd363(0x1ac)]?_0x427b95['message']:'')),logger[_0xbdd363(0x190)](_0xbdd363(0x18a)+_0x9be4f0[_0xbdd363(0x1a6)]+'\x20command'),_0x9be4f0;}}}exports[a59_0x29684d(0x1b8)]=Object['freeze'](new AiSdkWrapper());