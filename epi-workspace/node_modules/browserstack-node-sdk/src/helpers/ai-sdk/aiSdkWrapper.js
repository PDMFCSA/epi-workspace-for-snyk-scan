const a59_0x4dd40d=a59_0x87be;(function(_0x21b185,_0x15f948){const _0x3fda03=a59_0x87be,_0x4d9ecb=_0x21b185();while(!![]){try{const _0x373e02=-parseInt(_0x3fda03(0x1c4))/0x1+-parseInt(_0x3fda03(0x1f4))/0x2*(-parseInt(_0x3fda03(0x1ba))/0x3)+-parseInt(_0x3fda03(0x1f9))/0x4+-parseInt(_0x3fda03(0x1be))/0x5*(parseInt(_0x3fda03(0x20d))/0x6)+-parseInt(_0x3fda03(0x1d2))/0x7+parseInt(_0x3fda03(0x1ec))/0x8+parseInt(_0x3fda03(0x1db))/0x9;if(_0x373e02===_0x15f948)break;else _0x4d9ecb['push'](_0x4d9ecb['shift']());}catch(_0x35dc85){_0x4d9ecb['push'](_0x4d9ecb['shift']());}}}(a59_0x3329,0x9a24c));const path=require('path'),{commandRepository}=require('./autoHealHelper'),constants=require(a59_0x4dd40d(0x20f)),logger=require(a59_0x4dd40d(0x221))[a59_0x4dd40d(0x1b8)],globals=require('../globals'),timeoutPromise=require(a59_0x4dd40d(0x1ee)),isUndefinedOrNull=_0x99d39f=>_0x99d39f===undefined||_0x99d39f===null||_0x99d39f==='',isNotUndefinedOrNull=_0x3def2d=>!isUndefinedOrNull(_0x3def2d),isString=_0x264da2=>isNotUndefinedOrNull(_0x264da2)&&typeof _0x264da2===a59_0x4dd40d(0x1ff);class AiSdkWrapper{constructor(){const _0x4ceb00=a59_0x4dd40d,_0x433d80={'DtMUk':function(_0x25603b,_0x288096){return _0x25603b(_0x288096);},'AXARO':_0x4ceb00(0x1d1)};this[_0x4ceb00(0x219)]=undefined;try{this[_0x4ceb00(0x219)]=_0x433d80['DtMUk'](require,path[_0x4ceb00(0x208)](__dirname,_0x433d80[_0x4ceb00(0x1eb)]));}catch(_0x528104){logger['error']('Unable\x20to\x20load\x20healing\x20module,\x20error:\x20'+(_0x528104&&_0x528104[_0x4ceb00(0x214)]?_0x528104[_0x4ceb00(0x214)]:''));}}[a59_0x4dd40d(0x211)](_0x488f6d){const _0x39a3ff=a59_0x4dd40d,_0x37f88b={};_0x37f88b[_0x39a3ff(0x202)]=_0x39a3ff(0x1da),_0x37f88b['NGClF']=function(_0x505050,_0x3c35e2){return _0x505050===_0x3c35e2;},_0x37f88b[_0x39a3ff(0x1e4)]=_0x39a3ff(0x1c3),_0x37f88b[_0x39a3ff(0x1c2)]=function(_0x891f65,_0x4e90bd){return _0x891f65===_0x4e90bd;},_0x37f88b[_0x39a3ff(0x212)]='firefox',_0x37f88b[_0x39a3ff(0x1bb)]=function(_0x2b1417,_0x11ac96){return _0x2b1417===_0x11ac96;},_0x37f88b[_0x39a3ff(0x1d4)]=_0x39a3ff(0x1c7),_0x37f88b[_0x39a3ff(0x1d3)]=function(_0x16d9d6,_0x104c0e){return _0x16d9d6===_0x104c0e;},_0x37f88b[_0x39a3ff(0x21a)]=_0x39a3ff(0x1c6),_0x37f88b[_0x39a3ff(0x205)]=function(_0x56e2c8,_0x1fd269){return _0x56e2c8===_0x1fd269;},_0x37f88b['hgqii']='microsoftedge',_0x37f88b['rDVNn']=function(_0x493bd9,_0x4bfc01){return _0x493bd9===_0x4bfc01;};const _0x25170a=_0x37f88b;try{const _0x406d99=this['BrowserstackHealing'][_0x39a3ff(0x213)](Object['fromEntries'](_0x488f6d['getCapabilities']()[_0x39a3ff(0x1f3)]));console[_0x39a3ff(0x204)](_0x25170a[_0x39a3ff(0x202)],_0x406d99);if(_0x25170a[_0x39a3ff(0x1c1)](_0x406d99?.[_0x39a3ff(0x201)]?.['toLowerCase'](),_0x25170a[_0x39a3ff(0x1e4)]))_0x488f6d[_0x39a3ff(0x1d0)]=_0x406d99;else{if(_0x25170a[_0x39a3ff(0x1c2)](_0x406d99?.[_0x39a3ff(0x201)]?.[_0x39a3ff(0x1bc)](),_0x25170a[_0x39a3ff(0x212)]))_0x488f6d[_0x39a3ff(0x1f6)]=_0x406d99;else{if(_0x25170a['WZyJw'](_0x406d99?.[_0x39a3ff(0x201)]?.[_0x39a3ff(0x1bc)](),_0x25170a[_0x39a3ff(0x1d4)]))_0x488f6d['safariOptions_']=_0x406d99;else{if(_0x25170a[_0x39a3ff(0x1d3)](_0x406d99?.[_0x39a3ff(0x201)]?.[_0x39a3ff(0x1bc)](),_0x25170a[_0x39a3ff(0x21a)])||_0x25170a[_0x39a3ff(0x205)](_0x406d99?.['browserName']?.[_0x39a3ff(0x1bc)](),_0x25170a['hgqii']))_0x488f6d['edgeOptions_']=_0x406d99;else _0x25170a[_0x39a3ff(0x21e)](_0x406d99?.[_0x39a3ff(0x201)]?.[_0x39a3ff(0x1bc)](),'ie')&&(_0x488f6d[_0x39a3ff(0x206)]=_0x406d99);}}}Object['keys'](_0x406d99)[_0x39a3ff(0x1ca)](_0x1708ca=>{const _0x335288=_0x39a3ff,_0x12dc2a=_0x488f6d[_0x335288(0x1f0)][_0x335288(0x1cf)](_0x1708ca);_0x488f6d['capabilities_'][_0x335288(0x1c9)](_0x1708ca,_0x406d99[_0x1708ca]);});}catch(_0x11b7ae){logger[_0x39a3ff(0x223)](_0x39a3ff(0x1c5)+(_0x11b7ae&&_0x11b7ae[_0x39a3ff(0x214)]?_0x11b7ae['message']:''));}}async[a59_0x4dd40d(0x20a)](_0x4b7dfe){const _0x557178=a59_0x4dd40d,_0x2d830b={'JJluj':function(_0xa3cb4c,_0x1bfbd0,_0x54dabf,_0x29b35a,_0x2aaa0a,_0xdca584,_0x31efb1){return _0xa3cb4c(_0x1bfbd0,_0x54dabf,_0x29b35a,_0x2aaa0a,_0xdca584,_0x31efb1);},'daPbd':'BrowserstackHealing.setToken\x20method\x20timed\x20out','MvWSh':_0x557178(0x1bf),'dtDPK':_0x557178(0x209)},_0x141966=new Date(),_0x1725f3=_0x2d830b[_0x557178(0x1e5)](timeoutPromise,constants[_0x557178(0x1e9)],_0x2d830b[_0x557178(0x1b9)],_0x2d830b['MvWSh'],_0x141966,this['config'],this['framework']);await Promise[_0x557178(0x1d7)]([this['BrowserstackHealing'][_0x557178(0x1dc)](_0x4b7dfe,globals[_0x557178(0x1cc)](_0x2d830b[_0x557178(0x207)]),constants[_0x557178(0x21f)])[_0x557178(0x1ed)](()=>{const _0x4018e2=_0x557178;_0x1725f3[_0x4018e2(0x1e1)]();}),_0x1725f3]);}async['_handleEvent'](_0x2a1a50,_0x5d3698,_0x1db967,_0x8d22f7){const _0x34cae5=a59_0x4dd40d,_0x10fb0c={'TCyrD':function(_0x209848,_0x3018e4){return _0x209848===_0x3018e4;},'KbFpu':function(_0x269e34,_0x451c69){return _0x269e34(_0x451c69);},'TuBvg':function(_0x6b3afd,_0x24dd12){return _0x6b3afd(_0x24dd12);},'rFomi':function(_0x3661dd,_0x561c01){return _0x3661dd(_0x561c01);},'mGxRS':function(_0x40b2da,_0x447c25){return _0x40b2da(_0x447c25);},'NaZmx':'s://','FbAlq':function(_0x41df5f,_0x8bf3b){return _0x41df5f(_0x8bf3b);},'GFSRr':_0x34cae5(0x1dd),'ofJGd':'aiHeal_groupId','tJkwN':_0x34cae5(0x1ef),'Wdrii':function(_0x1e1837,_0x1a3d94,_0x2afa19,_0x4b63cf,_0x56add0,_0x224782,_0x150681){return _0x1e1837(_0x1a3d94,_0x2afa19,_0x4b63cf,_0x56add0,_0x224782,_0x150681);},'SxuHi':'BrowserstackHealing.logData\x20method\x20timed\x20out','Tpdjw':'BrowserstackHealingLogDataFailed','JQNaj':function(_0x4c2020,_0x1341ba,_0x2e2d5e,_0x8507e5,_0x48c1e7,_0x588282,_0x5828d6){return _0x4c2020(_0x1341ba,_0x2e2d5e,_0x8507e5,_0x48c1e7,_0x588282,_0x5828d6);},'YUSCO':_0x34cae5(0x1d5),'cbojH':_0x34cae5(0x1e3)},_0x59d340=(await _0x5d3698[_0x34cae5(0x218)]())[_0x34cae5(0x1f2)]();let _0x2611b3='';if(commandRepository['isSelfHealEnabled']()&&_0x10fb0c['TCyrD'](_0x8d22f7,![])||_0x10fb0c[_0x34cae5(0x1c8)](_0x8d22f7,!![])){const _0x55737e=_0x10fb0c['KbFpu'](isNotUndefinedOrNull,_0x1db967[_0x34cae5(0x1e8)][_0x34cae5(0x1e7)])&&_0x10fb0c[_0x34cae5(0x20c)](isString,_0x1db967['parameters_'][_0x34cae5(0x1e7)])?_0x1db967['parameters_'][_0x34cae5(0x1e7)][_0x34cae5(0x200)](/'/g,'\x5c\x27')[_0x34cae5(0x200)](/"/g,'\x5c\x22'):'',_0x51e9ca=_0x10fb0c[_0x34cae5(0x210)](isNotUndefinedOrNull,_0x1db967[_0x34cae5(0x1e8)][_0x34cae5(0x1e7)])&&_0x10fb0c[_0x34cae5(0x210)](isString,_0x1db967[_0x34cae5(0x1e8)][_0x34cae5(0x1f1)])?_0x1db967[_0x34cae5(0x1e8)]['value'][_0x34cae5(0x200)](/'/g,'\x5c\x27')[_0x34cae5(0x200)](/"/g,'\x5c\x22'):'',_0x587714=_0x10fb0c[_0x34cae5(0x210)](isNotUndefinedOrNull,commandRepository[_0x34cae5(0x20b)]())&&_0x10fb0c['TuBvg'](isString,commandRepository[_0x34cae5(0x20b)]())?commandRepository[_0x34cae5(0x20b)]()[_0x34cae5(0x200)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'';let _0x54767a=_0x10fb0c[_0x34cae5(0x210)](isNotUndefinedOrNull,global[_0x34cae5(0x1d8)])&&_0x10fb0c['KbFpu'](isString,global[_0x34cae5(0x1d8)])?global[_0x34cae5(0x1d8)][_0x34cae5(0x200)](/'/g,'\x5c\x27')[_0x34cae5(0x200)](/"/g,'\x5c\x22'):'';!_0x54767a&&(_0x54767a=_0x10fb0c[_0x34cae5(0x1e2)](isNotUndefinedOrNull,commandRepository['getTestName']())&&_0x10fb0c['KbFpu'](isString,commandRepository[_0x34cae5(0x216)]())?commandRepository[_0x34cae5(0x216)]()['replace'](/'/g,'\x5c\x27')[_0x34cae5(0x200)](/"/g,'\x5c\x22'):'');let _0x192ebe='{\x22region\x22:\x20\x22'+constants['TCG_REGION']+_0x34cae5(0x1b5)+constants[_0x34cae5(0x1de)]+'\x22:\x20{\x22endpoint\x22:\x20\x22'+constants[_0x34cae5(0x21f)]['split'](_0x10fb0c['NaZmx'])[0x1]+_0x34cae5(0x222);_0x192ebe=_0x10fb0c[_0x34cae5(0x210)](isNotUndefinedOrNull,_0x192ebe)&&_0x10fb0c[_0x34cae5(0x220)](isString,_0x192ebe)?_0x192ebe[_0x34cae5(0x200)](/'/g,'\x5c\x27')[_0x34cae5(0x200)](/"/g,'\x5c\x22'):'';const _0x4d6766=commandRepository['getCommands'](_0x59d340),_0x14ef2e=globals['getGlobal'](_0x10fb0c[_0x34cae5(0x20e)]),_0x1c3866=globals['getGlobal'](_0x10fb0c[_0x34cae5(0x1fd)]),_0x145def=globals[_0x34cae5(0x1cc)](_0x10fb0c[_0x34cae5(0x21d)]),_0x2fef3a=![],_0x74be97=new Date();if(_0x8d22f7){const _0x4bb755=_0x10fb0c['Wdrii'](timeoutPromise,constants[_0x34cae5(0x1fb)],_0x10fb0c['SxuHi'],_0x10fb0c[_0x34cae5(0x203)],_0x74be97,this[_0x34cae5(0x1d9)],this[_0x34cae5(0x1e0)]);_0x2611b3=await Promise[_0x34cae5(0x1d7)]([this['BrowserstackHealing'][_0x34cae5(0x215)](_0x55737e,_0x51e9ca,_0x587714,_0x54767a,_0x1c3866,_0x59d340,_0x4d6766,_0x192ebe)[_0x34cae5(0x1ed)](_0x4c2aed=>{const _0x1a3516=_0x34cae5;return _0x4bb755[_0x1a3516(0x1e1)](),_0x4c2aed;}),_0x4bb755]);}else{if(commandRepository[_0x34cae5(0x1f8)]()){const _0x53ef8e=_0x10fb0c[_0x34cae5(0x1b6)](timeoutPromise,constants['HEALING_FAILURE_TIMEOUT'],_0x10fb0c[_0x34cae5(0x1fe)],_0x10fb0c[_0x34cae5(0x1f5)],_0x74be97,this[_0x34cae5(0x1d9)],this[_0x34cae5(0x1e0)]);_0x2611b3=await Promise[_0x34cae5(0x1d7)]([this[_0x34cae5(0x219)][_0x34cae5(0x1d6)](_0x55737e,_0x51e9ca,_0x587714,_0x54767a,_0x14ef2e,_0x1c3866,_0x59d340,_0x4d6766,_0x2fef3a,_0x145def,_0x192ebe)[_0x34cae5(0x1ed)](_0x2b7b88=>{const _0x425404=_0x34cae5;return _0x53ef8e[_0x425404(0x1e1)](),_0x2b7b88;}),_0x53ef8e]);}}_0x2611b3&&await _0x5d3698[_0x34cae5(0x1fc)](_0x2611b3);}}async[a59_0x4dd40d(0x1e6)](_0x496667,_0x294bae,_0x5b5729){const _0x43c4d2=a59_0x4dd40d;try{await this[_0x43c4d2(0x1cd)](_0x496667,_0x294bae,_0x5b5729,!![]);}catch(_0x21d53f){return logger[_0x43c4d2(0x223)](_0x43c4d2(0x1cb)+(_0x21d53f&&_0x21d53f['message']?_0x21d53f[_0x43c4d2(0x214)]:'')),![];}return!![];}async['handleFailure'](_0x1284df,_0x31eb9f,_0x5907d3){const _0x3ce6bd=a59_0x4dd40d,_0x5c8fbf={'MdrST':function(_0x1ba6d1,_0x5b576d,_0x490375,_0x1fbe39,_0x2422d7,_0x294aff,_0xd6a9a1){return _0x1ba6d1(_0x5b576d,_0x490375,_0x1fbe39,_0x2422d7,_0x294aff,_0xd6a9a1);},'vklmk':_0x3ce6bd(0x1b7),'dGoeO':_0x3ce6bd(0x225),'tZZWX':_0x3ce6bd(0x209)};try{await this[_0x3ce6bd(0x1cd)](_0x1284df,_0x31eb9f,_0x5907d3,![]);const _0x339be0=(await _0x31eb9f[_0x3ce6bd(0x218)]())[_0x3ce6bd(0x1f2)](),_0x2e7155=new Date(),_0x3b18c0=_0x5c8fbf[_0x3ce6bd(0x21b)](timeoutPromise,constants[_0x3ce6bd(0x21c)],_0x5c8fbf[_0x3ce6bd(0x1df)],_0x5c8fbf[_0x3ce6bd(0x217)],_0x2e7155,this[_0x3ce6bd(0x1d9)],this['framework']),_0x24ed7f=await Promise['race']([this[_0x3ce6bd(0x219)][_0x3ce6bd(0x1c0)](constants['TCG_URL'],_0x339be0,globals[_0x3ce6bd(0x1cc)](_0x5c8fbf['tZZWX']))[_0x3ce6bd(0x1ed)](_0x4e4cae=>{return _0x3b18c0['cancel'](),_0x4e4cae;}),_0x3b18c0]);if(_0x24ed7f&&_0x24ed7f['selector']&&_0x24ed7f[_0x3ce6bd(0x1f1)]){const _0x1a2da6={};return _0x1a2da6['locatorType']=_0x24ed7f['selector'],_0x1a2da6[_0x3ce6bd(0x1bd)]=_0x24ed7f[_0x3ce6bd(0x1f1)],_0x1a2da6[_0x3ce6bd(0x1b4)]=!![],_0x1a2da6;}const _0x47ad53={};return _0x47ad53[_0x3ce6bd(0x224)]=_0x5907d3[_0x3ce6bd(0x1e8)]['using'],_0x47ad53[_0x3ce6bd(0x1bd)]=_0x24ed7f['value'],_0x47ad53[_0x3ce6bd(0x1b4)]=!![],_0x47ad53;}catch(_0x1da144){return logger[_0x3ce6bd(0x1ea)]('Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20'+(_0x1da144&&_0x1da144[_0x3ce6bd(0x214)]?_0x1da144['message']:'')),logger['info'](_0x3ce6bd(0x1ce)+_0x5907d3[_0x3ce6bd(0x1f7)]+_0x3ce6bd(0x1fa)),_0x5907d3;}}}exports['aiSdkWrapper']=Object['freeze'](new AiSdkWrapper());function a59_0x87be(_0x306229,_0x457a26){const _0x3329ac=a59_0x3329();return a59_0x87be=function(_0x87be65,_0x48e0f2){_0x87be65=_0x87be65-0x1b4;let _0x24f648=_0x3329ac[_0x87be65];return _0x24f648;},a59_0x87be(_0x306229,_0x457a26);}function a59_0x3329(){const _0x279d65=['message','logData','getTestName','dGoeO','getSession','BrowserstackHealing','Ouzba','MdrST','POLL_HEALING_RESULT_TIMEOUT','tJkwN','rDVNn','TCG_URL','FbAlq','../logger','\x22}}}','error','locatorType','BrowserstackHealingPollResultFailed','aiHealing','\x22,\x20\x22tcgUrls\x22:\x20{\x22','JQNaj','BrowserstackHealing.pollResult\x20method\x20timed\x20out','winstonLogger','daPbd','624olsaNh','WZyJw','toLowerCase','locatorValue','3102145LSAcpg','BrowserstackHealingSetTcgTokenFailed','pollResult','NGClF','DxeCP','chrome','209133ljnylu','Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20','edge','safari','TCyrD','set','forEach','Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20','getGlobal','_handleEvent','Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20','get','chromeOptions_','../../ai-sdk-node/bundle','635635lFCeKE','FohVn','eBghD','BrowserstackHealing.healFailure\x20method\x20timed\x20out','healFailure','race','browserstackSessionName','config','newCapabilities','14451318lZhrZC','setToken','aiHeal_userId','TCG_REGION','vklmk','framework','cancel','mGxRS','BrowserstackHealingHealFailureFailed','ZevQt','JJluj','handleSuccess','using','parameters_','SET_TCG_TOKEN_TIMEOUT','debug','AXARO','6823416xbBHwQ','then','../../helpers/timeoutPromise','aiHeal_isGroupAIEnabled','capabilities_','value','getId','map_','3142AcNmHO','cbojH','firefoxOptions_','name_','isSelfHealEnabled','4934632GoBgQr','\x20command','HEALING_LOG_DATA_TIMEOUT','executeScript','ofJGd','YUSCO','string','replace','browserName','pdanV','Tpdjw','log','STrvK','ieOptions_','dtDPK','join','aiHeal_sessionToken','setTcgToken','getProjectName','TuBvg','6KcNmvH','GFSRr','../../bin/utils/constants','rFomi','initializeHealingCapabilities','MwUGX','initializeCapabilities'];a59_0x3329=function(){return _0x279d65;};return a59_0x3329();}