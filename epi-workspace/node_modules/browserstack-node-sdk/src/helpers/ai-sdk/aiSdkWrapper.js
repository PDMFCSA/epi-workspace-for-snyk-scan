const a99_0x3b02b2=a99_0x5f40;(function(_0x506a73,_0x2a771d){const _0x24f6de=a99_0x5f40,_0x2dadab=_0x506a73();while(!![]){try{const _0xd6bc8f=parseInt(_0x24f6de(0xd4))/0x1*(-parseInt(_0x24f6de(0xb6))/0x2)+parseInt(_0x24f6de(0x110))/0x3+parseInt(_0x24f6de(0x101))/0x4*(-parseInt(_0x24f6de(0x121))/0x5)+-parseInt(_0x24f6de(0x12b))/0x6+-parseInt(_0x24f6de(0xb5))/0x7+-parseInt(_0x24f6de(0xf7))/0x8+parseInt(_0x24f6de(0x111))/0x9*(parseInt(_0x24f6de(0xe7))/0xa);if(_0xd6bc8f===_0x2a771d)break;else _0x2dadab['push'](_0x2dadab['shift']());}catch(_0x58f489){_0x2dadab['push'](_0x2dadab['shift']());}}}(a99_0x3c80,0xc6991));function a99_0x5f40(_0x3415e9,_0x244ecc){const _0x3c8095=a99_0x3c80();return a99_0x5f40=function(_0x5f4017,_0xa5f9cc){_0x5f4017=_0x5f4017-0xb0;let _0x3c310e=_0x3c8095[_0x5f4017];return _0x3c310e;},a99_0x5f40(_0x3415e9,_0x244ecc);}const path=require(a99_0x3b02b2(0xbd)),{commandRepository}=require(a99_0x3b02b2(0xf9)),constants=require(a99_0x3b02b2(0xc8)),logger=require(a99_0x3b02b2(0x106))[a99_0x3b02b2(0xfb)],globals=require(a99_0x3b02b2(0x12c)),timeoutPromise=require(a99_0x3b02b2(0x100)),isUndefinedOrNull=_0x48491d=>_0x48491d===undefined||_0x48491d===null||_0x48491d==='',isNotUndefinedOrNull=_0x534096=>!isUndefinedOrNull(_0x534096),isString=_0x1a7dc0=>isNotUndefinedOrNull(_0x1a7dc0)&&typeof _0x1a7dc0===a99_0x3b02b2(0xb7);class AiSdkWrapper{constructor(){const _0x41162d=a99_0x3b02b2,_0x56eadb={'pFJcA':function(_0x4675c1,_0x42c160){return _0x4675c1(_0x42c160);},'Ywhxg':_0x41162d(0xf4)};this['BrowserstackHealing']=undefined;try{this[_0x41162d(0xda)]=_0x56eadb['pFJcA'](require,path[_0x41162d(0xe3)](__dirname,_0x56eadb[_0x41162d(0xe5)]));}catch(_0xb6c20e){logger[_0x41162d(0xd8)](_0x41162d(0xd9)+(_0xb6c20e&&_0xb6c20e['message']?_0xb6c20e[_0x41162d(0x126)]:''));}}[a99_0x3b02b2(0x103)](_0x3300b4){const _0x147dbc=a99_0x3b02b2,_0xc2d37d={};_0xc2d37d[_0x147dbc(0xe0)]=_0x147dbc(0x115),_0xc2d37d['wxVMX']=function(_0x1773d9,_0x3e7b8e){return _0x1773d9===_0x3e7b8e;},_0xc2d37d[_0x147dbc(0xb0)]=_0x147dbc(0xd5),_0xc2d37d[_0x147dbc(0xf2)]=function(_0x52d921,_0x5b6551){return _0x52d921===_0x5b6551;},_0xc2d37d[_0x147dbc(0x11a)]='firefox',_0xc2d37d[_0x147dbc(0xcf)]=function(_0x37cea4,_0x5ca550){return _0x37cea4===_0x5ca550;},_0xc2d37d[_0x147dbc(0x124)]=_0x147dbc(0xcb),_0xc2d37d[_0x147dbc(0x12e)]=function(_0xa4a33e,_0x48615c){return _0xa4a33e===_0x48615c;},_0xc2d37d[_0x147dbc(0x12f)]=_0x147dbc(0xed),_0xc2d37d[_0x147dbc(0xec)]='microsoftedge',_0xc2d37d[_0x147dbc(0xeb)]=function(_0x16a9f9,_0x1fff04){return _0x16a9f9===_0x1fff04;};const _0x2e9b2a=_0xc2d37d;try{const _0x51c481=this[_0x147dbc(0xda)][_0x147dbc(0xee)](Object[_0x147dbc(0xc2)](_0x3300b4['getCapabilities']()['map_']));console[_0x147dbc(0x10a)](_0x2e9b2a['JyAZW'],_0x51c481);if(_0x2e9b2a[_0x147dbc(0x128)](_0x51c481?.[_0x147dbc(0x120)]?.['toLowerCase'](),_0x2e9b2a[_0x147dbc(0xb0)]))_0x3300b4[_0x147dbc(0xb4)]=_0x51c481;else{if(_0x2e9b2a[_0x147dbc(0xf2)](_0x51c481?.[_0x147dbc(0x120)]?.[_0x147dbc(0x107)](),_0x2e9b2a['xTvHh']))_0x3300b4[_0x147dbc(0x117)]=_0x51c481;else{if(_0x2e9b2a[_0x147dbc(0xcf)](_0x51c481?.[_0x147dbc(0x120)]?.[_0x147dbc(0x107)](),_0x2e9b2a['lGUAB']))_0x3300b4[_0x147dbc(0xfc)]=_0x51c481;else{if(_0x2e9b2a[_0x147dbc(0x12e)](_0x51c481?.['browserName']?.[_0x147dbc(0x107)](),_0x2e9b2a['ygZEi'])||_0x2e9b2a[_0x147dbc(0xf2)](_0x51c481?.[_0x147dbc(0x120)]?.[_0x147dbc(0x107)](),_0x2e9b2a['wQgva']))_0x3300b4[_0x147dbc(0xc5)]=_0x51c481;else _0x2e9b2a[_0x147dbc(0xeb)](_0x51c481?.[_0x147dbc(0x120)]?.['toLowerCase'](),'ie')&&(_0x3300b4[_0x147dbc(0xe6)]=_0x51c481);}}}Object[_0x147dbc(0xcc)](_0x51c481)[_0x147dbc(0xdd)](_0x43aa00=>{const _0x3c5a54=_0x147dbc,_0xedc8cf=_0x3300b4[_0x3c5a54(0xfd)]['get'](_0x43aa00);_0x3300b4[_0x3c5a54(0xfd)]['set'](_0x43aa00,_0x51c481[_0x43aa00]);});}catch(_0x4c648b){logger['error'](_0x147dbc(0xde)+(_0x4c648b&&_0x4c648b['message']?_0x4c648b[_0x147dbc(0x126)]:''));}}async['setTcgToken'](_0x8da651){const _0x3c6c00=a99_0x3b02b2,_0x4b3847={'EFNiB':function(_0x1af37c,_0x590ece,_0x4fddc9,_0x4b3fdb,_0xdb6fff,_0x3b776a,_0x2c3f49){return _0x1af37c(_0x590ece,_0x4fddc9,_0x4b3fdb,_0xdb6fff,_0x3b776a,_0x2c3f49);},'kKHSm':_0x3c6c00(0xce),'IbnIv':_0x3c6c00(0xff),'OumdH':_0x3c6c00(0xb9)},_0x339a50=new Date(),_0x80016d=_0x4b3847[_0x3c6c00(0x12a)](timeoutPromise,constants[_0x3c6c00(0x10d)],_0x4b3847[_0x3c6c00(0xd6)],_0x4b3847[_0x3c6c00(0x11e)],_0x339a50,this[_0x3c6c00(0xca)],this['framework']);await Promise[_0x3c6c00(0x12d)]([this[_0x3c6c00(0xda)][_0x3c6c00(0xc6)](_0x8da651,globals[_0x3c6c00(0x118)](_0x4b3847[_0x3c6c00(0x11d)]),constants[_0x3c6c00(0x123)])[_0x3c6c00(0xb1)](()=>{const _0x4c49fd=_0x3c6c00;_0x80016d[_0x4c49fd(0x116)]();}),_0x80016d]);}async[a99_0x3b02b2(0xfe)](_0x56e8ac,_0x291d6e,_0x6b2338,_0x3e69dd){const _0x207402=a99_0x3b02b2,_0x48cb36={'uqryv':function(_0x33e395,_0x555add){return _0x33e395===_0x555add;},'FHcJi':function(_0x274888,_0x4330ba){return _0x274888(_0x4330ba);},'RKCMh':function(_0x3f18f3,_0xa2ffb4){return _0x3f18f3(_0xa2ffb4);},'qFioZ':function(_0x1f610e,_0x12cc8e){return _0x1f610e(_0x12cc8e);},'AsCJz':function(_0x225e14,_0x231563){return _0x225e14(_0x231563);},'SVjtm':function(_0x94238e,_0x5cf1a8){return _0x94238e(_0x5cf1a8);},'QNVnp':function(_0x3e4648,_0xe766e4){return _0x3e4648(_0xe766e4);},'mCrWn':_0x207402(0x129),'qOKPR':function(_0x203d4c,_0x17265b){return _0x203d4c(_0x17265b);},'NLZKd':_0x207402(0x102),'ntWmA':_0x207402(0xc0),'FfpSf':_0x207402(0x108),'SuMUB':function(_0xb3d748,_0x56d4df,_0x3a5f49,_0x3e6430,_0x349932,_0x49c2d7,_0x448317){return _0xb3d748(_0x56d4df,_0x3a5f49,_0x3e6430,_0x349932,_0x49c2d7,_0x448317);},'uJHsj':_0x207402(0xea),'ebsax':_0x207402(0xbc),'RZqnt':_0x207402(0xe4),'Lbzrq':'BrowserstackHealingHealFailureFailed'},_0x3b2dc0=(await _0x291d6e['getSession']())[_0x207402(0xf3)]();let _0x5d7cdb='';if(commandRepository[_0x207402(0x112)]()&&_0x48cb36[_0x207402(0xc9)](_0x3e69dd,![])||_0x48cb36[_0x207402(0xc9)](_0x3e69dd,!![])){const _0xf0879f=_0x48cb36['FHcJi'](isNotUndefinedOrNull,_0x6b2338['parameters_'][_0x207402(0xef)])&&_0x48cb36[_0x207402(0x109)](isString,_0x6b2338[_0x207402(0x11c)][_0x207402(0xef)])?_0x6b2338[_0x207402(0x11c)]['using'][_0x207402(0x122)](/'/g,'\x5c\x27')[_0x207402(0x122)](/"/g,'\x5c\x22'):'',_0x217aae=_0x48cb36[_0x207402(0x109)](isNotUndefinedOrNull,_0x6b2338['parameters_'][_0x207402(0xef)])&&_0x48cb36[_0x207402(0xf5)](isString,_0x6b2338[_0x207402(0x11c)][_0x207402(0xd7)])?_0x6b2338[_0x207402(0x11c)][_0x207402(0xd7)][_0x207402(0x122)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'',_0x11d590=_0x48cb36['qFioZ'](isNotUndefinedOrNull,commandRepository['getProjectName']())&&_0x48cb36['AsCJz'](isString,commandRepository[_0x207402(0xc1)]())?commandRepository[_0x207402(0xc1)]()[_0x207402(0x122)](/'/g,'\x5c\x27')[_0x207402(0x122)](/"/g,'\x5c\x22'):'';let _0x54d04d=_0x48cb36[_0x207402(0x131)](isNotUndefinedOrNull,global[_0x207402(0xb2)])&&_0x48cb36['QNVnp'](isString,global[_0x207402(0xb2)])?global[_0x207402(0xb2)][_0x207402(0x122)](/'/g,'\x5c\x27')[_0x207402(0x122)](/"/g,'\x5c\x22'):'';!_0x54d04d&&(_0x54d04d=_0x48cb36[_0x207402(0x109)](isNotUndefinedOrNull,commandRepository['getTestName']())&&_0x48cb36[_0x207402(0xdc)](isString,commandRepository['getTestName']())?commandRepository[_0x207402(0x104)]()[_0x207402(0x122)](/'/g,'\x5c\x27')[_0x207402(0x122)](/"/g,'\x5c\x22'):'');let _0x5735e5=_0x207402(0xf8)+constants['TCG_REGION']+'\x22,\x20\x22tcgUrls\x22:\x20{\x22'+constants['TCG_REGION']+_0x207402(0x105)+constants['TCG_URL'][_0x207402(0x119)](_0x48cb36[_0x207402(0xd3)])[0x1]+_0x207402(0x10c);_0x5735e5=_0x48cb36[_0x207402(0xcd)](isNotUndefinedOrNull,_0x5735e5)&&_0x48cb36[_0x207402(0x109)](isString,_0x5735e5)?_0x5735e5[_0x207402(0x122)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'';const _0x11892c=commandRepository['getCommands'](_0x3b2dc0),_0x16d8e4=globals[_0x207402(0x118)](_0x48cb36['NLZKd']),_0x4ee0c=globals[_0x207402(0x118)](_0x48cb36[_0x207402(0x10f)]),_0x5fccec=globals[_0x207402(0x118)](_0x48cb36[_0x207402(0xf6)]),_0x2b1148=![],_0x43503b=new Date();if(_0x3e69dd){const _0x433692=_0x48cb36[_0x207402(0xdf)](timeoutPromise,constants[_0x207402(0xd1)],_0x48cb36[_0x207402(0x11b)],_0x48cb36[_0x207402(0xdb)],_0x43503b,this[_0x207402(0xca)],this[_0x207402(0xb3)]);_0x5d7cdb=await Promise[_0x207402(0x12d)]([this[_0x207402(0xda)]['logData'](_0xf0879f,_0x217aae,_0x11d590,_0x54d04d,_0x4ee0c,_0x3b2dc0,_0x11892c,_0x5735e5)[_0x207402(0xb1)](_0xfdb479=>{return _0x433692['cancel'](),_0xfdb479;}),_0x433692]);}else{if(commandRepository[_0x207402(0x112)]()){const _0x194bf8=_0x48cb36[_0x207402(0xdf)](timeoutPromise,constants[_0x207402(0xbb)],_0x48cb36['RZqnt'],_0x48cb36[_0x207402(0xe8)],_0x43503b,this['config'],this[_0x207402(0xb3)]);_0x5d7cdb=await Promise[_0x207402(0x12d)]([this[_0x207402(0xda)][_0x207402(0xe2)](_0xf0879f,_0x217aae,_0x11d590,_0x54d04d,_0x16d8e4,_0x4ee0c,_0x3b2dc0,_0x11892c,_0x2b1148,_0x5fccec,_0x5735e5)[_0x207402(0xb1)](_0x15e6d0=>{return _0x194bf8['cancel'](),_0x15e6d0;}),_0x194bf8]);}}_0x5d7cdb&&await _0x291d6e[_0x207402(0xba)](_0x5d7cdb);}}async[a99_0x3b02b2(0x114)](_0x5ac8b8,_0x3f0181,_0x398e8a){const _0x4ceb9c=a99_0x3b02b2;try{await this[_0x4ceb9c(0xfe)](_0x5ac8b8,_0x3f0181,_0x398e8a,!![]);}catch(_0xf3320a){return logger[_0x4ceb9c(0xd8)](_0x4ceb9c(0xf1)+(_0xf3320a&&_0xf3320a['message']?_0xf3320a['message']:'')),![];}return!![];}async['handleFailure'](_0xe0d4f8,_0x2de5a9,_0x170f65){const _0x12116c=a99_0x3b02b2,_0x3ed3fd={'Yhrrt':function(_0x3804c8,_0x5537b1,_0x5245ac,_0x5411de,_0x51a784,_0x3a1c1e,_0x3ebfd2){return _0x3804c8(_0x5537b1,_0x5245ac,_0x5411de,_0x51a784,_0x3a1c1e,_0x3ebfd2);},'fGHWy':_0x12116c(0xfa),'ZDTQx':_0x12116c(0x11f),'FZuRz':'aiHeal_sessionToken'};try{await this[_0x12116c(0xfe)](_0xe0d4f8,_0x2de5a9,_0x170f65,![]);const _0x13d19c=(await _0x2de5a9[_0x12116c(0xbe)]())[_0x12116c(0xf3)](),_0x3159ad=new Date(),_0x17e7c2=_0x3ed3fd[_0x12116c(0xd0)](timeoutPromise,constants[_0x12116c(0x10b)],_0x3ed3fd[_0x12116c(0xc3)],_0x3ed3fd[_0x12116c(0xd2)],_0x3159ad,this[_0x12116c(0xca)],this[_0x12116c(0xb3)]),_0x1c60ac=await Promise[_0x12116c(0x12d)]([this[_0x12116c(0xda)][_0x12116c(0xbf)](constants[_0x12116c(0x123)],_0x13d19c,globals['getGlobal'](_0x3ed3fd[_0x12116c(0x130)]))[_0x12116c(0xb1)](_0xcd0a23=>{const _0x35cb91=_0x12116c;return _0x17e7c2[_0x35cb91(0x116)](),_0xcd0a23;}),_0x17e7c2]);if(_0x1c60ac&&_0x1c60ac[_0x12116c(0xc4)]&&_0x1c60ac[_0x12116c(0xd7)]){const _0x100ad8={};return _0x100ad8[_0x12116c(0xe1)]=_0x1c60ac[_0x12116c(0xc4)],_0x100ad8[_0x12116c(0xc7)]=_0x1c60ac['value'],_0x100ad8['aiHealing']=!![],_0x100ad8;}const _0x34791d={};return _0x34791d[_0x12116c(0xe1)]=_0x170f65[_0x12116c(0x11c)][_0x12116c(0xef)],_0x34791d[_0x12116c(0xc7)]=_0x1c60ac[_0x12116c(0xd7)],_0x34791d['aiHealing']=!![],_0x34791d;}catch(_0x2e25e5){return logger[_0x12116c(0xb8)](_0x12116c(0x113)+(_0x2e25e5&&_0x2e25e5[_0x12116c(0x126)]?_0x2e25e5[_0x12116c(0x126)]:'')),logger[_0x12116c(0x10e)](_0x12116c(0x125)+_0x170f65[_0x12116c(0x127)]+'\x20command'),_0x170f65;}}}function a99_0x3c80(){const _0x38f793=['_handleEvent','BrowserstackHealingSetTcgTokenFailed','../../helpers/timeoutPromise','1004snhhOa','aiHeal_userId','initializeHealingCapabilities','getTestName','\x22:\x20{\x22endpoint\x22:\x20\x22','../logger','toLowerCase','aiHeal_isGroupAIEnabled','FHcJi','log','POLL_HEALING_RESULT_TIMEOUT','\x22}}}','SET_TCG_TOKEN_TIMEOUT','info','ntWmA','2351088tZrigd','44989479qXtfIy','isSelfHealEnabled','Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20','handleSuccess','newCapabilities','cancel','firefoxOptions_','getGlobal','split','xTvHh','uJHsj','parameters_','OumdH','IbnIv','BrowserstackHealingPollResultFailed','browserName','25385KJvOFY','replace','TCG_URL','lGUAB','Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20','message','name_','wxVMX','s://','EFNiB','6243624PCUVSu','../globals','race','jYOTc','ygZEi','FZuRz','SVjtm','AkShv','then','browserstackSessionName','framework','chromeOptions_','391832MsUdFj','72KfbWHX','string','debug','aiHeal_sessionToken','executeScript','HEALING_FAILURE_TIMEOUT','BrowserstackHealingLogDataFailed','path','getSession','pollResult','aiHeal_groupId','getProjectName','fromEntries','fGHWy','selector','edgeOptions_','setToken','locatorValue','../../bin/utils/constants','uqryv','config','safari','keys','qOKPR','BrowserstackHealing.setToken\x20method\x20timed\x20out','UhcOc','Yhrrt','HEALING_LOG_DATA_TIMEOUT','ZDTQx','mCrWn','38333UguCDa','chrome','kKHSm','value','error','Unable\x20to\x20load\x20healing\x20module,\x20error:\x20','BrowserstackHealing','ebsax','qFioZ','forEach','Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20','SuMUB','JyAZW','locatorType','healFailure','join','BrowserstackHealing.healFailure\x20method\x20timed\x20out','Ywhxg','ieOptions_','10ISSeLZ','Lbzrq','freeze','BrowserstackHealing.logData\x20method\x20timed\x20out','CKlCA','wQgva','edge','initializeCapabilities','using','aiSdkWrapper','Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20','VNjPc','getId','../../ai-sdk-node/bundle','RKCMh','FfpSf','9745400KwPhHI','{\x22region\x22:\x20\x22','./autoHealHelper','BrowserstackHealing.pollResult\x20method\x20timed\x20out','winstonLogger','safariOptions_','capabilities_'];a99_0x3c80=function(){return _0x38f793;};return a99_0x3c80();}exports[a99_0x3b02b2(0xf0)]=Object[a99_0x3b02b2(0xe9)](new AiSdkWrapper());