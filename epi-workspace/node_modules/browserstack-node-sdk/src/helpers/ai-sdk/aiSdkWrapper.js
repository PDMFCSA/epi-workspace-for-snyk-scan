const a99_0x409a75=a99_0x469e;function a99_0x82e4(){const _0x51a2e2=['OBRnr','browserName','aiHeal_userId','291777aASXzU','FtsFK','chrome','maNyy','mtyBi','4qHVfVM','microsoftedge','hfnBG','debug','dEohV','message','handleFailure','toLowerCase','qDVbt','RmYlF','sUMMT','../../helpers/timeoutPromise','safari','BrowserstackHealing.setToken\x20method\x20timed\x20out','selector','error','2247ZAPkOr','KJXIY','getProjectName','split','framework','Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20','firefox','setTcgToken','10LfaLKR','getId','BrowserstackHealingHealFailureFailed','edgeOptions_','KUjyk','HEALING_LOG_DATA_TIMEOUT','value','yInry','log','join','BrowserstackHealing.logData\x20method\x20timed\x20out','healFailure','getTestName','safariOptions_','keys','hwGPC','../globals','POLL_HEALING_RESULT_TIMEOUT','aiHeal_groupId','zgMvV','HEALING_FAILURE_TIMEOUT','BrowserstackHealing.healFailure\x20method\x20timed\x20out','172088VeivYw','BrowserstackHealingLogDataFailed','TCSEG','mqxVD','20178468QVzkOB','freeze','./autoHealHelper','../../bin/utils/constants','get','\x22,\x20\x22tcgUrls\x22:\x20{\x22','BrowserstackHealingSetTcgTokenFailed','yxJrq','config','tQGDI','capabilities_','../logger','initializeHealingCapabilities','string','mwdAS','BrowserstackHealing','aiSdkWrapper','bQenX','cancel','IOifS','replace','executeScript','s://','gnfxY','TCG_REGION','getCapabilities','setToken','using','browserstackSessionName','11576AjWYEj','Unable\x20to\x20load\x20healing\x20module,\x20error:\x20','\x22:\x20{\x22endpoint\x22:\x20\x22','CMogt','set','Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20','aiHeal_sessionToken','../../ai-sdk-node/bundle','isSelfHealEnabled','getGlobal','aiHeal_isGroupAIEnabled','name_','edge','\x20command','TCG_URL','zPUZH','1473570JTadML','locatorType','1457088SeXHAJ','parameters_','BrowserstackHealingPollResultFailed','aiHealing','Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20','wUBIO','handleSuccess','\x22}}}','logData','zCICe','rQUmH','newCapabilities','IdWLQ','then','LweTU','initializeCapabilities','iKZZV','EQZtD','{\x22region\x22:\x20\x22','2297830uLBDrz','pollResult','dWNKa','getSession','_handleEvent','race','gJhND'];a99_0x82e4=function(){return _0x51a2e2;};return a99_0x82e4();}function a99_0x469e(_0x490553,_0x1ad9e5){const _0x82e4c3=a99_0x82e4();return a99_0x469e=function(_0x469e25,_0x4ac43e){_0x469e25=_0x469e25-0x1c9;let _0x58b9ac=_0x82e4c3[_0x469e25];return _0x58b9ac;},a99_0x469e(_0x490553,_0x1ad9e5);}(function(_0x518b73,_0x47160f){const _0x1bbdfc=a99_0x469e,_0x59a876=_0x518b73();while(!![]){try{const _0x3728ba=-parseInt(_0x1bbdfc(0x20a))/0x1+parseInt(_0x1bbdfc(0x1dc))/0x2*(-parseInt(_0x1bbdfc(0x1d7))/0x3)+-parseInt(_0x1bbdfc(0x23d))/0x4+-parseInt(_0x1bbdfc(0x1cd))/0x5+-parseInt(_0x1bbdfc(0x23b))/0x6+-parseInt(_0x1bbdfc(0x1ec))/0x7*(parseInt(_0x1bbdfc(0x22b))/0x8)+parseInt(_0x1bbdfc(0x20e))/0x9*(parseInt(_0x1bbdfc(0x1f4))/0xa);if(_0x3728ba===_0x47160f)break;else _0x59a876['push'](_0x59a876['shift']());}catch(_0x1c5913){_0x59a876['push'](_0x59a876['shift']());}}}(a99_0x82e4,0x53616));const path=require('path'),{commandRepository}=require(a99_0x409a75(0x210)),constants=require(a99_0x409a75(0x211)),logger=require(a99_0x409a75(0x219))['winstonLogger'],globals=require(a99_0x409a75(0x204)),timeoutPromise=require(a99_0x409a75(0x1e7)),isUndefinedOrNull=_0x3ebb8a=>_0x3ebb8a===undefined||_0x3ebb8a===null||_0x3ebb8a==='',isNotUndefinedOrNull=_0x3904d4=>!isUndefinedOrNull(_0x3904d4),isString=_0x36a2fc=>isNotUndefinedOrNull(_0x36a2fc)&&typeof _0x36a2fc===a99_0x409a75(0x21b);class AiSdkWrapper{constructor(){const _0x31d8db=a99_0x409a75,_0x575e22={'mtyBi':function(_0x39feae,_0x21f799){return _0x39feae(_0x21f799);},'IdWLQ':_0x31d8db(0x232)};this['BrowserstackHealing']=undefined;try{this['BrowserstackHealing']=_0x575e22[_0x31d8db(0x1db)](require,path[_0x31d8db(0x1fd)](__dirname,_0x575e22[_0x31d8db(0x249)]));}catch(_0x9652b8){logger[_0x31d8db(0x1eb)](_0x31d8db(0x22c)+(_0x9652b8&&_0x9652b8[_0x31d8db(0x1e1)]?_0x9652b8[_0x31d8db(0x1e1)]:''));}}[a99_0x409a75(0x21a)](_0x4e4ae6){const _0x395cd6=a99_0x409a75,_0xda7f04={};_0xda7f04[_0x395cd6(0x217)]=_0x395cd6(0x248),_0xda7f04[_0x395cd6(0x1d8)]=function(_0x4210de,_0x157aef){return _0x4210de===_0x157aef;},_0xda7f04[_0x395cd6(0x1da)]=_0x395cd6(0x1d9),_0xda7f04[_0x395cd6(0x1e6)]=function(_0xd460b3,_0x39d06d){return _0xd460b3===_0x39d06d;},_0xda7f04['CMogt']=_0x395cd6(0x1f2),_0xda7f04['iKZZV']=_0x395cd6(0x1e8),_0xda7f04['dEohV']=_0x395cd6(0x237),_0xda7f04[_0x395cd6(0x1d3)]=function(_0x4fca7e,_0x1afb53){return _0x4fca7e===_0x1afb53;},_0xda7f04[_0x395cd6(0x246)]=_0x395cd6(0x1dd);const _0x592e4b=_0xda7f04;try{const _0x45f646=this[_0x395cd6(0x21d)][_0x395cd6(0x1c9)](Object['fromEntries'](_0x4e4ae6[_0x395cd6(0x227)]()['map_']));console[_0x395cd6(0x1fc)](_0x592e4b['tQGDI'],_0x45f646);if(_0x592e4b[_0x395cd6(0x1d8)](_0x45f646?.['browserName']?.[_0x395cd6(0x1e3)](),_0x592e4b[_0x395cd6(0x1da)]))_0x4e4ae6['chromeOptions_']=_0x45f646;else{if(_0x592e4b['sUMMT'](_0x45f646?.['browserName']?.[_0x395cd6(0x1e3)](),_0x592e4b[_0x395cd6(0x22e)]))_0x4e4ae6['firefoxOptions_']=_0x45f646;else{if(_0x592e4b[_0x395cd6(0x1e6)](_0x45f646?.[_0x395cd6(0x1d5)]?.['toLowerCase'](),_0x592e4b[_0x395cd6(0x1ca)]))_0x4e4ae6[_0x395cd6(0x201)]=_0x45f646;else{if(_0x592e4b['sUMMT'](_0x45f646?.[_0x395cd6(0x1d5)]?.['toLowerCase'](),_0x592e4b[_0x395cd6(0x1e0)])||_0x592e4b[_0x395cd6(0x1d3)](_0x45f646?.[_0x395cd6(0x1d5)]?.['toLowerCase'](),_0x592e4b[_0x395cd6(0x246)]))_0x4e4ae6[_0x395cd6(0x1f7)]=_0x45f646;else _0x592e4b['FtsFK'](_0x45f646?.[_0x395cd6(0x1d5)]?.[_0x395cd6(0x1e3)](),'ie')&&(_0x4e4ae6['ieOptions_']=_0x45f646);}}}Object[_0x395cd6(0x202)](_0x45f646)['forEach'](_0x152bab=>{const _0x3dcbcc=_0x395cd6,_0x602252=_0x4e4ae6[_0x3dcbcc(0x218)][_0x3dcbcc(0x212)](_0x152bab);_0x4e4ae6[_0x3dcbcc(0x218)][_0x3dcbcc(0x22f)](_0x152bab,_0x45f646[_0x152bab]);});}catch(_0x1ff0e1){logger[_0x395cd6(0x1eb)](_0x395cd6(0x230)+(_0x1ff0e1&&_0x1ff0e1[_0x395cd6(0x1e1)]?_0x1ff0e1[_0x395cd6(0x1e1)]:''));}}async[a99_0x409a75(0x1f3)](_0xc2b6e5){const _0x350139=a99_0x409a75,_0x381641={'mqxVD':function(_0x276030,_0x10f762,_0x1e469a,_0x555fdb,_0x177951,_0x1c68d9,_0x59b310){return _0x276030(_0x10f762,_0x1e469a,_0x555fdb,_0x177951,_0x1c68d9,_0x59b310);},'KUjyk':_0x350139(0x1e9),'yxJrq':_0x350139(0x214),'wUBIO':_0x350139(0x231)},_0x3d64a1=new Date(),_0x4cde57=_0x381641[_0x350139(0x20d)](timeoutPromise,constants['SET_TCG_TOKEN_TIMEOUT'],_0x381641[_0x350139(0x1f8)],_0x381641[_0x350139(0x215)],_0x3d64a1,this[_0x350139(0x216)],this[_0x350139(0x1f0)]);await Promise[_0x350139(0x1d2)]([this[_0x350139(0x21d)][_0x350139(0x228)](_0xc2b6e5,globals[_0x350139(0x234)](_0x381641[_0x350139(0x242)]),constants[_0x350139(0x239)])[_0x350139(0x24a)](()=>{const _0x18aa3e=_0x350139;_0x4cde57[_0x18aa3e(0x220)]();}),_0x4cde57]);}async[a99_0x409a75(0x1d1)](_0x35aeb1,_0x33ff04,_0x155b4e,_0x1013ff){const _0x53450f=a99_0x409a75,_0x2b3301={'TCSEG':function(_0x4182ca,_0x2f3805){return _0x4182ca===_0x2f3805;},'RmYlF':function(_0x20635e,_0x4485b4){return _0x20635e===_0x4485b4;},'yInry':function(_0x28e658,_0x256e9b){return _0x28e658(_0x256e9b);},'OBRnr':function(_0x5625d2,_0x3af783){return _0x5625d2(_0x3af783);},'agGea':function(_0x326120,_0x28185c){return _0x326120(_0x28185c);},'hfnBG':function(_0xc630e5,_0x3ec1c3){return _0xc630e5(_0x3ec1c3);},'zgMvV':function(_0x5b4968,_0x19ea92){return _0x5b4968(_0x19ea92);},'qlwMP':function(_0x289b2b,_0x3d96a2){return _0x289b2b(_0x3d96a2);},'yfEDU':function(_0x4c589e,_0x4d15b0){return _0x4c589e(_0x4d15b0);},'bQenX':function(_0x12727c,_0x57ebe9){return _0x12727c(_0x57ebe9);},'QRpXi':_0x53450f(0x224),'JsFKc':function(_0x3325cd,_0x2e4a1d){return _0x3325cd(_0x2e4a1d);},'rQUmH':_0x53450f(0x1d6),'LweTU':_0x53450f(0x206),'dWNKa':_0x53450f(0x235),'hwGPC':function(_0x3bf635,_0x5574dd,_0x95520,_0x547fc0,_0xbd58,_0x2cb247,_0x3d46a0){return _0x3bf635(_0x5574dd,_0x95520,_0x547fc0,_0xbd58,_0x2cb247,_0x3d46a0);},'IOifS':_0x53450f(0x1fe),'ElimR':_0x53450f(0x20b),'mwdAS':function(_0x1a6e48,_0x3ef6c6,_0x22ef7f,_0x47280b,_0x2aaa0e,_0x144507,_0x4ee6e7){return _0x1a6e48(_0x3ef6c6,_0x22ef7f,_0x47280b,_0x2aaa0e,_0x144507,_0x4ee6e7);},'BVeJA':_0x53450f(0x209),'gnfxY':_0x53450f(0x1f6)},_0x405664=(await _0x33ff04[_0x53450f(0x1d0)]())[_0x53450f(0x1f5)]();let _0x42d132='';if(commandRepository[_0x53450f(0x233)]()&&_0x2b3301[_0x53450f(0x20c)](_0x1013ff,![])||_0x2b3301[_0x53450f(0x1e5)](_0x1013ff,!![])){const _0x41b52f=_0x2b3301[_0x53450f(0x1fb)](isNotUndefinedOrNull,_0x155b4e['parameters_'][_0x53450f(0x229)])&&_0x2b3301['OBRnr'](isString,_0x155b4e[_0x53450f(0x23e)][_0x53450f(0x229)])?_0x155b4e[_0x53450f(0x23e)][_0x53450f(0x229)][_0x53450f(0x222)](/'/g,'\x5c\x27')[_0x53450f(0x222)](/"/g,'\x5c\x22'):'',_0x3c1748=_0x2b3301[_0x53450f(0x1d4)](isNotUndefinedOrNull,_0x155b4e[_0x53450f(0x23e)]['using'])&&_0x2b3301['agGea'](isString,_0x155b4e[_0x53450f(0x23e)][_0x53450f(0x1fa)])?_0x155b4e[_0x53450f(0x23e)][_0x53450f(0x1fa)][_0x53450f(0x222)](/'/g,'\x5c\x27')[_0x53450f(0x222)](/"/g,'\x5c\x22'):'',_0x5a04f4=_0x2b3301[_0x53450f(0x1fb)](isNotUndefinedOrNull,commandRepository[_0x53450f(0x1ee)]())&&_0x2b3301[_0x53450f(0x1de)](isString,commandRepository['getProjectName']())?commandRepository[_0x53450f(0x1ee)]()[_0x53450f(0x222)](/'/g,'\x5c\x27')[_0x53450f(0x222)](/"/g,'\x5c\x22'):'';let _0x4ae2f2=_0x2b3301[_0x53450f(0x207)](isNotUndefinedOrNull,global[_0x53450f(0x22a)])&&_0x2b3301['qlwMP'](isString,global[_0x53450f(0x22a)])?global[_0x53450f(0x22a)][_0x53450f(0x222)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'';!_0x4ae2f2&&(_0x4ae2f2=_0x2b3301['yfEDU'](isNotUndefinedOrNull,commandRepository[_0x53450f(0x200)]())&&_0x2b3301['bQenX'](isString,commandRepository['getTestName']())?commandRepository[_0x53450f(0x200)]()[_0x53450f(0x222)](/'/g,'\x5c\x27')[_0x53450f(0x222)](/"/g,'\x5c\x22'):'');let _0x23b167=_0x53450f(0x1cc)+constants['TCG_REGION']+_0x53450f(0x213)+constants[_0x53450f(0x226)]+_0x53450f(0x22d)+constants[_0x53450f(0x239)][_0x53450f(0x1ef)](_0x2b3301['QRpXi'])[0x1]+_0x53450f(0x244);_0x23b167=_0x2b3301[_0x53450f(0x21f)](isNotUndefinedOrNull,_0x23b167)&&_0x2b3301['JsFKc'](isString,_0x23b167)?_0x23b167[_0x53450f(0x222)](/'/g,'\x5c\x27')[_0x53450f(0x222)](/"/g,'\x5c\x22'):'';const _0x1f152e=commandRepository['getCommands'](_0x405664),_0x39c56d=globals[_0x53450f(0x234)](_0x2b3301[_0x53450f(0x247)]),_0x5922e3=globals[_0x53450f(0x234)](_0x2b3301[_0x53450f(0x24b)]),_0x3e08d1=globals[_0x53450f(0x234)](_0x2b3301[_0x53450f(0x1cf)]),_0x15b8ea=![],_0x38d326=new Date();if(_0x1013ff){const _0xadaf24=_0x2b3301[_0x53450f(0x203)](timeoutPromise,constants[_0x53450f(0x1f9)],_0x2b3301[_0x53450f(0x221)],_0x2b3301['ElimR'],_0x38d326,this['config'],this[_0x53450f(0x1f0)]);_0x42d132=await Promise[_0x53450f(0x1d2)]([this['BrowserstackHealing'][_0x53450f(0x245)](_0x41b52f,_0x3c1748,_0x5a04f4,_0x4ae2f2,_0x5922e3,_0x405664,_0x1f152e,_0x23b167)[_0x53450f(0x24a)](_0x25a28e=>{const _0x1720bd=_0x53450f;return _0xadaf24[_0x1720bd(0x220)](),_0x25a28e;}),_0xadaf24]);}else{if(commandRepository[_0x53450f(0x233)]()){const _0xee576d=_0x2b3301[_0x53450f(0x21c)](timeoutPromise,constants[_0x53450f(0x208)],_0x2b3301['BVeJA'],_0x2b3301[_0x53450f(0x225)],_0x38d326,this[_0x53450f(0x216)],this[_0x53450f(0x1f0)]);_0x42d132=await Promise[_0x53450f(0x1d2)]([this[_0x53450f(0x21d)][_0x53450f(0x1ff)](_0x41b52f,_0x3c1748,_0x5a04f4,_0x4ae2f2,_0x39c56d,_0x5922e3,_0x405664,_0x1f152e,_0x15b8ea,_0x3e08d1,_0x23b167)[_0x53450f(0x24a)](_0x547014=>{const _0x225d67=_0x53450f;return _0xee576d[_0x225d67(0x220)](),_0x547014;}),_0xee576d]);}}_0x42d132&&await _0x33ff04[_0x53450f(0x223)](_0x42d132);}}async[a99_0x409a75(0x243)](_0x1b9105,_0x344601,_0x186337){const _0x11ab19=a99_0x409a75;try{await this['_handleEvent'](_0x1b9105,_0x344601,_0x186337,!![]);}catch(_0x26e9db){return logger[_0x11ab19(0x1eb)](_0x11ab19(0x1f1)+(_0x26e9db&&_0x26e9db[_0x11ab19(0x1e1)]?_0x26e9db['message']:'')),![];}return!![];}async[a99_0x409a75(0x1e2)](_0x74147e,_0x376fac,_0x4bf2e4){const _0x3d5653=a99_0x409a75,_0x34832d={'KJXIY':function(_0xd1433d,_0x594752,_0x4de39b,_0x40b483,_0x5f311d,_0x2baf73,_0x12c270){return _0xd1433d(_0x594752,_0x4de39b,_0x40b483,_0x5f311d,_0x2baf73,_0x12c270);},'EQZtD':'BrowserstackHealing.pollResult\x20method\x20timed\x20out','qDVbt':_0x3d5653(0x23f),'zPUZH':_0x3d5653(0x231)};try{await this[_0x3d5653(0x1d1)](_0x74147e,_0x376fac,_0x4bf2e4,![]);const _0x55c3fc=(await _0x376fac['getSession']())[_0x3d5653(0x1f5)](),_0x37e72d=new Date(),_0x3df936=_0x34832d[_0x3d5653(0x1ed)](timeoutPromise,constants[_0x3d5653(0x205)],_0x34832d[_0x3d5653(0x1cb)],_0x34832d[_0x3d5653(0x1e4)],_0x37e72d,this[_0x3d5653(0x216)],this[_0x3d5653(0x1f0)]),_0x4dc6c8=await Promise[_0x3d5653(0x1d2)]([this[_0x3d5653(0x21d)][_0x3d5653(0x1ce)](constants[_0x3d5653(0x239)],_0x55c3fc,globals[_0x3d5653(0x234)](_0x34832d[_0x3d5653(0x23a)]))[_0x3d5653(0x24a)](_0x4039bd=>{const _0x589fed=_0x3d5653;return _0x3df936[_0x589fed(0x220)](),_0x4039bd;}),_0x3df936]);if(_0x4dc6c8&&_0x4dc6c8['selector']&&_0x4dc6c8[_0x3d5653(0x1fa)]){const _0xf0d6bf={};return _0xf0d6bf[_0x3d5653(0x23c)]=_0x4dc6c8[_0x3d5653(0x1ea)],_0xf0d6bf['locatorValue']=_0x4dc6c8['value'],_0xf0d6bf[_0x3d5653(0x240)]=!![],_0xf0d6bf;}const _0x17fef9={};return _0x17fef9['locatorType']=_0x4bf2e4[_0x3d5653(0x23e)]['using'],_0x17fef9['locatorValue']=_0x4dc6c8[_0x3d5653(0x1fa)],_0x17fef9[_0x3d5653(0x240)]=!![],_0x17fef9;}catch(_0x1babc8){return logger[_0x3d5653(0x1df)](_0x3d5653(0x241)+(_0x1babc8&&_0x1babc8[_0x3d5653(0x1e1)]?_0x1babc8[_0x3d5653(0x1e1)]:'')),logger['info']('Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20'+_0x4bf2e4[_0x3d5653(0x236)]+_0x3d5653(0x238)),_0x4bf2e4;}}}exports[a99_0x409a75(0x21e)]=Object[a99_0x409a75(0x20f)](new AiSdkWrapper());