const a87_0x8f0dc5=a87_0x5f09;(function(_0x486636,_0x2d673e){const _0x34ec54=a87_0x5f09,_0xfb9982=_0x486636();while(!![]){try{const _0x45e98a=parseInt(_0x34ec54(0x238))/0x1+-parseInt(_0x34ec54(0x208))/0x2*(parseInt(_0x34ec54(0x1ea))/0x3)+-parseInt(_0x34ec54(0x233))/0x4+-parseInt(_0x34ec54(0x1e9))/0x5+parseInt(_0x34ec54(0x205))/0x6*(-parseInt(_0x34ec54(0x206))/0x7)+parseInt(_0x34ec54(0x212))/0x8+parseInt(_0x34ec54(0x1f8))/0x9*(parseInt(_0x34ec54(0x257))/0xa);if(_0x45e98a===_0x2d673e)break;else _0xfb9982['push'](_0xfb9982['shift']());}catch(_0x3b4691){_0xfb9982['push'](_0xfb9982['shift']());}}}(a87_0x31af,0x8ca7c));function a87_0x31af(){const _0x4b6afc=['BrowserstackHealingSetTcgTokenFailed','getCapabilities','locatorType','race','selector','dCydY','GJlbT','POLL_HEALING_RESULT_TIMEOUT','Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20','getGlobal','executeScript','info','pfvFR','dnQKV','_handleEvent','TCG_REGION','../../bin/utils/constants','QUWpn','edge','../../helpers/timeoutPromise','1689960KSjqPN','then','firefoxOptions_','ognsk','safari','1059523xpnaFY','mTRqF','cancel','Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20','fromEntries','EswbG','getId','Unable\x20to\x20load\x20healing\x20module,\x20error:\x20','browserstackSessionName','TCG_URL','uULbv','map_','value','CqmBJ','locatorValue','BrowserstackHealing','string','BrowserstackHealingHealFailureFailed','HEALING_FAILURE_TIMEOUT','{\x22region\x22:\x20\x22','aklwA','BrowserstackHealingPollResultFailed','./autoHealHelper','aiHeal_groupId','SET_TCG_TOKEN_TIMEOUT','getTestName','message','safariOptions_','log','getCommands','isSelfHealEnabled','11220290QTWqlQ','chrome','toLowerCase','JXMtu','../globals','path','s://','aiHealing','Uigvi','UoUkv','healFailure','LpGRl','parameters_','909995hgZawJ','112443xIgPsq','kqWPm','error','tmRen','lTSMU','logData','getProjectName','oeXxB','xZYcf','ieOptions_','handleFailure','QGGjx','getSession','BrowserstackHealing.healFailure\x20method\x20timed\x20out','9mIdWSJ','microsoftedge','aiHeal_sessionToken','WyOXe','setToken','set','aiHeal_userId','firefox','capabilities_','\x22,\x20\x22tcgUrls\x22:\x20{\x22','BrowserstackHealing.setToken\x20method\x20timed\x20out','using','config','4920492pBMqmM','7BuiKRT','NeYLV','30DjgZfW','replace','debug','ZIMvD','forEach','NSQPb','BrowserstackHealing.pollResult\x20method\x20timed\x20out','BrowserstackHealing.logData\x20method\x20timed\x20out','browserName','swywH','3050864GYuYry','jiNcg','framework','rSKkr','setTcgToken','name_','../../ai-sdk-node/bundle','MwXch','yQHkk','join','initializeCapabilities','ahBAe','Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20'];a87_0x31af=function(){return _0x4b6afc;};return a87_0x31af();}const path=require(a87_0x8f0dc5(0x1e1)),{commandRepository}=require(a87_0x8f0dc5(0x24e)),constants=require(a87_0x8f0dc5(0x22f)),logger=require('../logger')['winstonLogger'],globals=require(a87_0x8f0dc5(0x25b)),timeoutPromise=require(a87_0x8f0dc5(0x232)),isUndefinedOrNull=_0x5ba272=>_0x5ba272===undefined||_0x5ba272===null||_0x5ba272==='',isNotUndefinedOrNull=_0x1e9285=>!isUndefinedOrNull(_0x1e9285),isString=_0x402c5a=>isNotUndefinedOrNull(_0x402c5a)&&typeof _0x402c5a===a87_0x8f0dc5(0x248);class AiSdkWrapper{constructor(){const _0x44ae1c=a87_0x8f0dc5,_0x30882b={'qwMgb':function(_0xf279bc,_0x4cd833){return _0xf279bc(_0x4cd833);},'EswbG':_0x44ae1c(0x218)};this[_0x44ae1c(0x247)]=undefined;try{this[_0x44ae1c(0x247)]=_0x30882b['qwMgb'](require,path[_0x44ae1c(0x21b)](__dirname,_0x30882b[_0x44ae1c(0x23d)]));}catch(_0x45d13b){logger[_0x44ae1c(0x1ec)](_0x44ae1c(0x23f)+(_0x45d13b&&_0x45d13b[_0x44ae1c(0x252)]?_0x45d13b[_0x44ae1c(0x252)]:''));}}['initializeHealingCapabilities'](_0x536f89){const _0x650dac=a87_0x8f0dc5,_0x4a7d24={};_0x4a7d24[_0x650dac(0x236)]='newCapabilities',_0x4a7d24['yQHkk']=function(_0x24c6f7,_0x47417a){return _0x24c6f7===_0x47417a;},_0x4a7d24[_0x650dac(0x22c)]=_0x650dac(0x258),_0x4a7d24[_0x650dac(0x1fb)]=function(_0x1e4ddf,_0x470a65){return _0x1e4ddf===_0x470a65;},_0x4a7d24['pfvFR']=_0x650dac(0x1ff),_0x4a7d24[_0x650dac(0x239)]=function(_0x11fe82,_0x4b2883){return _0x11fe82===_0x4b2883;},_0x4a7d24[_0x650dac(0x1ed)]=_0x650dac(0x237),_0x4a7d24[_0x650dac(0x20d)]=_0x650dac(0x231),_0x4a7d24['ahBAe']=_0x650dac(0x1f9);const _0x56b716=_0x4a7d24;try{const _0x359c3c=this['BrowserstackHealing'][_0x650dac(0x21c)](Object[_0x650dac(0x23c)](_0x536f89[_0x650dac(0x220)]()[_0x650dac(0x243)]));console[_0x650dac(0x254)](_0x56b716['ognsk'],_0x359c3c);if(_0x56b716['yQHkk'](_0x359c3c?.['browserName']?.[_0x650dac(0x259)](),_0x56b716[_0x650dac(0x22c)]))_0x536f89['chromeOptions_']=_0x359c3c;else{if(_0x56b716[_0x650dac(0x1fb)](_0x359c3c?.[_0x650dac(0x210)]?.['toLowerCase'](),_0x56b716[_0x650dac(0x22b)]))_0x536f89[_0x650dac(0x235)]=_0x359c3c;else{if(_0x56b716[_0x650dac(0x239)](_0x359c3c?.[_0x650dac(0x210)]?.['toLowerCase'](),_0x56b716[_0x650dac(0x1ed)]))_0x536f89[_0x650dac(0x253)]=_0x359c3c;else{if(_0x56b716[_0x650dac(0x1fb)](_0x359c3c?.['browserName']?.['toLowerCase'](),_0x56b716[_0x650dac(0x20d)])||_0x56b716[_0x650dac(0x1fb)](_0x359c3c?.['browserName']?.['toLowerCase'](),_0x56b716[_0x650dac(0x21d)]))_0x536f89['edgeOptions_']=_0x359c3c;else _0x56b716[_0x650dac(0x21a)](_0x359c3c?.[_0x650dac(0x210)]?.['toLowerCase'](),'ie')&&(_0x536f89[_0x650dac(0x1f3)]=_0x359c3c);}}}Object['keys'](_0x359c3c)[_0x650dac(0x20c)](_0x115218=>{const _0x5f2b8f=_0x650dac,_0x28f0d5=_0x536f89[_0x5f2b8f(0x200)]['get'](_0x115218);_0x536f89['capabilities_'][_0x5f2b8f(0x1fd)](_0x115218,_0x359c3c[_0x115218]);});}catch(_0xccdc29){logger[_0x650dac(0x1ec)](_0x650dac(0x227)+(_0xccdc29&&_0xccdc29[_0x650dac(0x252)]?_0xccdc29[_0x650dac(0x252)]:''));}}async[a87_0x8f0dc5(0x216)](_0x3f971c){const _0x357597=a87_0x8f0dc5,_0x3b942b={'CqmBJ':function(_0x3ee9e0,_0x4994b2,_0x1675dc,_0x50ee65,_0x5587fe,_0x3151cf,_0x5eca57){return _0x3ee9e0(_0x4994b2,_0x1675dc,_0x50ee65,_0x5587fe,_0x3151cf,_0x5eca57);},'LpGRl':_0x357597(0x202),'UoUkv':_0x357597(0x21f),'jiNcg':'aiHeal_sessionToken'},_0x323ef0=new Date(),_0x518016=_0x3b942b[_0x357597(0x245)](timeoutPromise,constants[_0x357597(0x250)],_0x3b942b[_0x357597(0x1e7)],_0x3b942b[_0x357597(0x1e5)],_0x323ef0,this[_0x357597(0x204)],this[_0x357597(0x214)]);await Promise['race']([this[_0x357597(0x247)][_0x357597(0x1fc)](_0x3f971c,globals['getGlobal'](_0x3b942b[_0x357597(0x213)]),constants['TCG_URL'])[_0x357597(0x234)](()=>{const _0x5cce6c=_0x357597;_0x518016[_0x5cce6c(0x23a)]();}),_0x518016]);}async['_handleEvent'](_0x5b8174,_0x3b96bd,_0x594625,_0x2dab19){const _0x51275e=a87_0x8f0dc5,_0x10adfa={'ZIMvD':function(_0x50c313,_0x53d96f){return _0x50c313===_0x53d96f;},'oeXxB':function(_0x5e0331,_0x55cd66){return _0x5e0331===_0x55cd66;},'uULbv':function(_0x47585c,_0x5a7389){return _0x47585c(_0x5a7389);},'xZYcf':function(_0x4841dc,_0x1907e1){return _0x4841dc(_0x1907e1);},'GJlbT':function(_0x565b68,_0x1c65d2){return _0x565b68(_0x1c65d2);},'JXMtu':function(_0x17f60e,_0x52241a){return _0x17f60e(_0x52241a);},'swywH':function(_0x510e54,_0x3018fc){return _0x510e54(_0x3018fc);},'MwXch':_0x51275e(0x1e2),'nNQBj':function(_0x4614aa,_0x284835){return _0x4614aa(_0x284835);},'POBvB':_0x51275e(0x1fe),'uXzzY':_0x51275e(0x24f),'aklwA':'aiHeal_isGroupAIEnabled','lTSMU':function(_0x1b30dc,_0x87d83f,_0x259970,_0x1e3bac,_0x58959b,_0x2ca02c,_0x388231){return _0x1b30dc(_0x87d83f,_0x259970,_0x1e3bac,_0x58959b,_0x2ca02c,_0x388231);},'QUWpn':_0x51275e(0x20f),'QGGjx':'BrowserstackHealingLogDataFailed','dCydY':_0x51275e(0x1f7),'rSKkr':_0x51275e(0x249)},_0x2ee274=(await _0x3b96bd['getSession']())['getId']();let _0x469a4b='';if(commandRepository[_0x51275e(0x256)]()&&_0x10adfa[_0x51275e(0x20b)](_0x2dab19,![])||_0x10adfa[_0x51275e(0x1f1)](_0x2dab19,!![])){const _0x378111=_0x10adfa['uULbv'](isNotUndefinedOrNull,_0x594625['parameters_'][_0x51275e(0x203)])&&_0x10adfa[_0x51275e(0x242)](isString,_0x594625[_0x51275e(0x1e8)]['using'])?_0x594625[_0x51275e(0x1e8)][_0x51275e(0x203)][_0x51275e(0x209)](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'',_0x3140ce=_0x10adfa[_0x51275e(0x1f2)](isNotUndefinedOrNull,_0x594625[_0x51275e(0x1e8)][_0x51275e(0x203)])&&_0x10adfa[_0x51275e(0x242)](isString,_0x594625[_0x51275e(0x1e8)]['value'])?_0x594625[_0x51275e(0x1e8)][_0x51275e(0x244)][_0x51275e(0x209)](/'/g,'\x5c\x27')[_0x51275e(0x209)](/"/g,'\x5c\x22'):'',_0x21239c=_0x10adfa[_0x51275e(0x225)](isNotUndefinedOrNull,commandRepository[_0x51275e(0x1f0)]())&&_0x10adfa[_0x51275e(0x1f2)](isString,commandRepository[_0x51275e(0x1f0)]())?commandRepository[_0x51275e(0x1f0)]()[_0x51275e(0x209)](/'/g,'\x5c\x27')[_0x51275e(0x209)](/"/g,'\x5c\x22'):'';let _0x347394=_0x10adfa[_0x51275e(0x225)](isNotUndefinedOrNull,global[_0x51275e(0x240)])&&_0x10adfa[_0x51275e(0x225)](isString,global[_0x51275e(0x240)])?global[_0x51275e(0x240)][_0x51275e(0x209)](/'/g,'\x5c\x27')[_0x51275e(0x209)](/"/g,'\x5c\x22'):'';!_0x347394&&(_0x347394=_0x10adfa[_0x51275e(0x25a)](isNotUndefinedOrNull,commandRepository['getTestName']())&&_0x10adfa[_0x51275e(0x211)](isString,commandRepository[_0x51275e(0x251)]())?commandRepository['getTestName']()[_0x51275e(0x209)](/'/g,'\x5c\x27')[_0x51275e(0x209)](/"/g,'\x5c\x22'):'');let _0x153dad=_0x51275e(0x24b)+constants[_0x51275e(0x22e)]+_0x51275e(0x201)+constants['TCG_REGION']+'\x22:\x20{\x22endpoint\x22:\x20\x22'+constants[_0x51275e(0x241)]['split'](_0x10adfa[_0x51275e(0x219)])[0x1]+'\x22}}}';_0x153dad=_0x10adfa[_0x51275e(0x1f2)](isNotUndefinedOrNull,_0x153dad)&&_0x10adfa['nNQBj'](isString,_0x153dad)?_0x153dad[_0x51275e(0x209)](/'/g,'\x5c\x27')[_0x51275e(0x209)](/"/g,'\x5c\x22'):'';const _0x4755ed=commandRepository[_0x51275e(0x255)](_0x2ee274),_0x5f1712=globals[_0x51275e(0x228)](_0x10adfa['POBvB']),_0x462441=globals[_0x51275e(0x228)](_0x10adfa['uXzzY']),_0x1daeee=globals[_0x51275e(0x228)](_0x10adfa[_0x51275e(0x24c)]),_0xe8b036=![],_0x225f57=new Date();if(_0x2dab19){const _0x8f6bdb=_0x10adfa['lTSMU'](timeoutPromise,constants['HEALING_LOG_DATA_TIMEOUT'],_0x10adfa[_0x51275e(0x230)],_0x10adfa[_0x51275e(0x1f5)],_0x225f57,this['config'],this[_0x51275e(0x214)]);_0x469a4b=await Promise[_0x51275e(0x222)]([this['BrowserstackHealing'][_0x51275e(0x1ef)](_0x378111,_0x3140ce,_0x21239c,_0x347394,_0x462441,_0x2ee274,_0x4755ed,_0x153dad)[_0x51275e(0x234)](_0x2f369e=>{return _0x8f6bdb['cancel'](),_0x2f369e;}),_0x8f6bdb]);}else{if(commandRepository[_0x51275e(0x256)]()){const _0x4cfc41=_0x10adfa[_0x51275e(0x1ee)](timeoutPromise,constants[_0x51275e(0x24a)],_0x10adfa[_0x51275e(0x224)],_0x10adfa[_0x51275e(0x215)],_0x225f57,this[_0x51275e(0x204)],this[_0x51275e(0x214)]);_0x469a4b=await Promise['race']([this[_0x51275e(0x247)][_0x51275e(0x1e6)](_0x378111,_0x3140ce,_0x21239c,_0x347394,_0x5f1712,_0x462441,_0x2ee274,_0x4755ed,_0xe8b036,_0x1daeee,_0x153dad)['then'](_0x3cf14f=>{const _0x89472e=_0x51275e;return _0x4cfc41[_0x89472e(0x23a)](),_0x3cf14f;}),_0x4cfc41]);}}_0x469a4b&&await _0x3b96bd[_0x51275e(0x229)](_0x469a4b);}}async['handleSuccess'](_0x544ca7,_0x4333f4,_0x12eed8){const _0x245761=a87_0x8f0dc5;try{await this[_0x245761(0x22d)](_0x544ca7,_0x4333f4,_0x12eed8,!![]);}catch(_0x3e2d67){return logger['error'](_0x245761(0x21e)+(_0x3e2d67&&_0x3e2d67[_0x245761(0x252)]?_0x3e2d67[_0x245761(0x252)]:'')),![];}return!![];}async[a87_0x8f0dc5(0x1f4)](_0x194289,_0x5492e9,_0xc2cc6c){const _0x45b1bb=a87_0x8f0dc5,_0x579388={'NeYLV':function(_0x211110,_0x22d494,_0x355d98,_0xc17a2e,_0x44177c,_0x3a3147,_0x27475d){return _0x211110(_0x22d494,_0x355d98,_0xc17a2e,_0x44177c,_0x3a3147,_0x27475d);},'TXRsR':_0x45b1bb(0x20e),'kqWPm':_0x45b1bb(0x24d),'Uigvi':_0x45b1bb(0x1fa)};try{await this[_0x45b1bb(0x22d)](_0x194289,_0x5492e9,_0xc2cc6c,![]);const _0x383a8b=(await _0x5492e9[_0x45b1bb(0x1f6)]())[_0x45b1bb(0x23e)](),_0x5aa35b=new Date(),_0x87c802=_0x579388[_0x45b1bb(0x207)](timeoutPromise,constants[_0x45b1bb(0x226)],_0x579388['TXRsR'],_0x579388[_0x45b1bb(0x1eb)],_0x5aa35b,this[_0x45b1bb(0x204)],this['framework']),_0x1a7eec=await Promise[_0x45b1bb(0x222)]([this[_0x45b1bb(0x247)]['pollResult'](constants[_0x45b1bb(0x241)],_0x383a8b,globals[_0x45b1bb(0x228)](_0x579388[_0x45b1bb(0x1e4)]))[_0x45b1bb(0x234)](_0x4d3764=>{return _0x87c802['cancel'](),_0x4d3764;}),_0x87c802]);if(_0x1a7eec&&_0x1a7eec[_0x45b1bb(0x223)]&&_0x1a7eec[_0x45b1bb(0x244)]){const _0x5d7950={};return _0x5d7950[_0x45b1bb(0x221)]=_0x1a7eec['selector'],_0x5d7950[_0x45b1bb(0x246)]=_0x1a7eec[_0x45b1bb(0x244)],_0x5d7950[_0x45b1bb(0x1e3)]=!![],_0x5d7950;}const _0x1ea2c9={};return _0x1ea2c9[_0x45b1bb(0x221)]=_0xc2cc6c[_0x45b1bb(0x1e8)][_0x45b1bb(0x203)],_0x1ea2c9[_0x45b1bb(0x246)]=_0x1a7eec[_0x45b1bb(0x244)],_0x1ea2c9[_0x45b1bb(0x1e3)]=!![],_0x1ea2c9;}catch(_0x325456){return logger[_0x45b1bb(0x20a)](_0x45b1bb(0x23b)+(_0x325456&&_0x325456[_0x45b1bb(0x252)]?_0x325456[_0x45b1bb(0x252)]:'')),logger[_0x45b1bb(0x22a)]('Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20'+_0xc2cc6c[_0x45b1bb(0x217)]+'\x20command'),_0xc2cc6c;}}}function a87_0x5f09(_0x1b5e34,_0xa94ac4){const _0x31afad=a87_0x31af();return a87_0x5f09=function(_0x5f095c,_0xfdd249){_0x5f095c=_0x5f095c-0x1e1;let _0x4aa22d=_0x31afad[_0x5f095c];return _0x4aa22d;},a87_0x5f09(_0x1b5e34,_0xa94ac4);}exports['aiSdkWrapper']=Object['freeze'](new AiSdkWrapper());