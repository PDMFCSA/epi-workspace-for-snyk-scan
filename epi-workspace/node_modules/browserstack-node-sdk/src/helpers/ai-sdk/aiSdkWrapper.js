const a87_0xc42feb=a87_0x28b1;function a87_0x28b1(_0x5f49b0,_0x517e5b){const _0x844649=a87_0x8446();return a87_0x28b1=function(_0x28b15a,_0x427c8f){_0x28b15a=_0x28b15a-0x1c9;let _0x231578=_0x844649[_0x28b15a];return _0x231578;},a87_0x28b1(_0x5f49b0,_0x517e5b);}function a87_0x8446(){const _0xd3e290=['../globals','aiHeal_sessionToken','chromeOptions_','plkIa','winstonLogger','8902685boSuMl','freeze','using','309322ejqASp','pollResult','Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20','1088442BQrten','join','qzwGd','Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20','TCG_URL','toLowerCase','aiHeal_groupId','BrowserstackHealingSetTcgTokenFailed','getCapabilities','jSIgw','4504eytxTs','firefox','\x22:\x20{\x22endpoint\x22:\x20\x22','BrowserstackHealingPollResultFailed','mHZwL','BrowserstackHealingHealFailureFailed','healFailure','QtJDS','string','initializeCapabilities','isSelfHealEnabled','then','FQNRN','locatorValue','_handleEvent','\x20command','getProjectName','error','set','6FCKsHM','bVOAZ','cPCPP','parameters_','getSession','60gKrnuu','ioZSj','../logger','safariOptions_','HEALING_FAILURE_TIMEOUT','getCommands','VdHmn','getId','config','aiSdkWrapper','kfrJR','map_','iZyvC','3235928PBdBra','tYwRn','WeIxO','ieOptions_','logData','lqGYu','ZCFQP','handleFailure','2072871MWAwDc','\x22,\x20\x22tcgUrls\x22:\x20{\x22','Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20','RENFf','OiTfC','replace','fromEntries','9093LRSqVM','zBVpk','info','locatorType','3973875XRbCsb','BrowserstackHealing','setToken','UGmOj','browserName','race','executeScript','firefoxOptions_','path','cancel','getGlobal','selector','getTestName','6GVylAD','get','browserstackSessionName','KBeML','capabilities_','afcQw','value','bNRdm','BrowserstackHealing.logData\x20method\x20timed\x20out','framework','TEpah','handleSuccess','message','cjVAN','s://','{\x22region\x22:\x20\x22','edge','pleqs','HEALING_LOG_DATA_TIMEOUT','faeMU','TCG_REGION','POLL_HEALING_RESULT_TIMEOUT','viKzA','edgeOptions_','SET_TCG_TOKEN_TIMEOUT','microsoftedge','aiHealing','log','Unable\x20to\x20load\x20healing\x20module,\x20error:\x20','\x22}}}','./autoHealHelper','wkrkF'];a87_0x8446=function(){return _0xd3e290;};return a87_0x8446();}(function(_0x564111,_0x236ec5){const _0x2d899b=a87_0x28b1,_0x509967=_0x564111();while(!![]){try{const _0x26be53=parseInt(_0x2d899b(0x1e9))/0x1*(parseInt(_0x2d899b(0x23b))/0x2)+parseInt(_0x2d899b(0x223))/0x3+parseInt(_0x2d899b(0x21b))/0x4+-parseInt(_0x2d899b(0x22e))/0x5*(parseInt(_0x2d899b(0x209))/0x6)+parseInt(_0x2d899b(0x22a))/0x7*(-parseInt(_0x2d899b(0x1f6))/0x8)+-parseInt(_0x2d899b(0x1ec))/0x9*(-parseInt(_0x2d899b(0x20e))/0xa)+-parseInt(_0x2d899b(0x1e6))/0xb;if(_0x26be53===_0x236ec5)break;else _0x509967['push'](_0x509967['shift']());}catch(_0x9a58af){_0x509967['push'](_0x509967['shift']());}}}(a87_0x8446,0xc7ba6));const path=require(a87_0xc42feb(0x236)),{commandRepository}=require(a87_0xc42feb(0x1df)),constants=require('../../bin/utils/constants'),logger=require(a87_0xc42feb(0x210))[a87_0xc42feb(0x1e5)],globals=require(a87_0xc42feb(0x1e1)),timeoutPromise=require('../../helpers/timeoutPromise'),isUndefinedOrNull=_0xedeb99=>_0xedeb99===undefined||_0xedeb99===null||_0xedeb99==='',isNotUndefinedOrNull=_0x1fdac0=>!isUndefinedOrNull(_0x1fdac0),isString=_0x5edfb9=>isNotUndefinedOrNull(_0x5edfb9)&&typeof _0x5edfb9===a87_0xc42feb(0x1fe);class AiSdkWrapper{constructor(){const _0x42a11e=a87_0xc42feb,_0x38e1ea={'lqGYu':function(_0x1e9d24,_0x37c2f8){return _0x1e9d24(_0x37c2f8);},'AjpCE':'../../ai-sdk-node/bundle'};this[_0x42a11e(0x22f)]=undefined;try{this[_0x42a11e(0x22f)]=_0x38e1ea[_0x42a11e(0x220)](require,path[_0x42a11e(0x1ed)](__dirname,_0x38e1ea['AjpCE']));}catch(_0x31c251){logger[_0x42a11e(0x207)](_0x42a11e(0x1dd)+(_0x31c251&&_0x31c251[_0x42a11e(0x1cd)]?_0x31c251[_0x42a11e(0x1cd)]:''));}}['initializeHealingCapabilities'](_0x1e804a){const _0x3c4f4e=a87_0xc42feb,_0x2e38c2={};_0x2e38c2[_0x3c4f4e(0x1e0)]='newCapabilities',_0x2e38c2[_0x3c4f4e(0x20a)]=function(_0x6b5201,_0x5db5ac){return _0x6b5201===_0x5db5ac;},_0x2e38c2[_0x3c4f4e(0x1f5)]='chrome',_0x2e38c2[_0x3c4f4e(0x21a)]=_0x3c4f4e(0x1f7),_0x2e38c2[_0x3c4f4e(0x242)]=function(_0x312acd,_0x211f0b){return _0x312acd===_0x211f0b;},_0x2e38c2[_0x3c4f4e(0x1ce)]='safari',_0x2e38c2[_0x3c4f4e(0x1ee)]=_0x3c4f4e(0x1d1),_0x2e38c2['kfrJR']=_0x3c4f4e(0x1da),_0x2e38c2['FQNRN']=function(_0x506075,_0x48d006){return _0x506075===_0x48d006;};const _0x3ca8ef=_0x2e38c2;try{const _0x3704b0=this[_0x3c4f4e(0x22f)][_0x3c4f4e(0x1ff)](Object[_0x3c4f4e(0x229)](_0x1e804a[_0x3c4f4e(0x1f4)]()[_0x3c4f4e(0x219)]));console[_0x3c4f4e(0x1dc)](_0x3ca8ef[_0x3c4f4e(0x1e0)],_0x3704b0);if(_0x3ca8ef[_0x3c4f4e(0x20a)](_0x3704b0?.['browserName']?.[_0x3c4f4e(0x1f1)](),_0x3ca8ef[_0x3c4f4e(0x1f5)]))_0x1e804a[_0x3c4f4e(0x1e3)]=_0x3704b0;else{if(_0x3ca8ef['bVOAZ'](_0x3704b0?.[_0x3c4f4e(0x232)]?.[_0x3c4f4e(0x1f1)](),_0x3ca8ef[_0x3c4f4e(0x21a)]))_0x1e804a[_0x3c4f4e(0x235)]=_0x3704b0;else{if(_0x3ca8ef[_0x3c4f4e(0x242)](_0x3704b0?.[_0x3c4f4e(0x232)]?.['toLowerCase'](),_0x3ca8ef[_0x3c4f4e(0x1ce)]))_0x1e804a[_0x3c4f4e(0x211)]=_0x3704b0;else{if(_0x3ca8ef[_0x3c4f4e(0x20a)](_0x3704b0?.[_0x3c4f4e(0x232)]?.[_0x3c4f4e(0x1f1)](),_0x3ca8ef[_0x3c4f4e(0x1ee)])||_0x3ca8ef['bNRdm'](_0x3704b0?.[_0x3c4f4e(0x232)]?.[_0x3c4f4e(0x1f1)](),_0x3ca8ef[_0x3c4f4e(0x218)]))_0x1e804a[_0x3c4f4e(0x1d8)]=_0x3704b0;else _0x3ca8ef[_0x3c4f4e(0x202)](_0x3704b0?.['browserName']?.[_0x3c4f4e(0x1f1)](),'ie')&&(_0x1e804a[_0x3c4f4e(0x21e)]=_0x3704b0);}}}Object['keys'](_0x3704b0)['forEach'](_0x527a16=>{const _0x2e255b=_0x3c4f4e,_0x38a76d=_0x1e804a[_0x2e255b(0x23f)][_0x2e255b(0x23c)](_0x527a16);_0x1e804a[_0x2e255b(0x23f)][_0x2e255b(0x208)](_0x527a16,_0x3704b0[_0x527a16]);});}catch(_0x5cbf19){logger[_0x3c4f4e(0x207)]('Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20'+(_0x5cbf19&&_0x5cbf19[_0x3c4f4e(0x1cd)]?_0x5cbf19['message']:''));}}async['setTcgToken'](_0x29080c){const _0x11bd76=a87_0xc42feb,_0x57adbd={'viKzA':function(_0x26e312,_0x494f6c,_0x3cc9e4,_0x5617f0,_0x207b7c,_0x30c0e9,_0x1ce3cc){return _0x26e312(_0x494f6c,_0x3cc9e4,_0x5617f0,_0x207b7c,_0x30c0e9,_0x1ce3cc);},'BHvCx':'BrowserstackHealing.setToken\x20method\x20timed\x20out','vpxKG':_0x11bd76(0x1f3),'UnrAO':_0x11bd76(0x1e2)},_0x93cfa8=new Date(),_0x4f7705=_0x57adbd[_0x11bd76(0x1d7)](timeoutPromise,constants[_0x11bd76(0x1d9)],_0x57adbd['BHvCx'],_0x57adbd['vpxKG'],_0x93cfa8,this[_0x11bd76(0x216)],this[_0x11bd76(0x1ca)]);await Promise['race']([this[_0x11bd76(0x22f)][_0x11bd76(0x230)](_0x29080c,globals['getGlobal'](_0x57adbd['UnrAO']),constants[_0x11bd76(0x1f0)])[_0x11bd76(0x201)](()=>{_0x4f7705['cancel']();}),_0x4f7705]);}async[a87_0xc42feb(0x204)](_0x346531,_0x2a3b98,_0x435766,_0x1bf8de){const _0x336806=a87_0xc42feb,_0x1865ad={'mHZwL':function(_0x3c3743,_0x4068ab){return _0x3c3743===_0x4068ab;},'zBVpk':function(_0x870d7b,_0xd39071){return _0x870d7b===_0xd39071;},'faeMU':function(_0x1807e2,_0x337429){return _0x1807e2(_0x337429);},'tYwRn':function(_0x2387f4,_0x389ae6){return _0x2387f4(_0x389ae6);},'pleqs':function(_0x3e14ad,_0x378680){return _0x3e14ad(_0x378680);},'OiTfC':function(_0x4a579d,_0x58a815){return _0x4a579d(_0x58a815);},'KBeML':function(_0x195cb0,_0x35bad0){return _0x195cb0(_0x35bad0);},'WeIxO':_0x336806(0x1cf),'VEgzU':'aiHeal_userId','vXDQv':_0x336806(0x1f2),'VdHmn':'aiHeal_isGroupAIEnabled','plkIa':function(_0x45481a,_0x17400d,_0x4bf9b8,_0x24cfc0,_0x20d5eb,_0x4db1bc,_0x3641e7){return _0x45481a(_0x17400d,_0x4bf9b8,_0x24cfc0,_0x20d5eb,_0x4db1bc,_0x3641e7);},'QtJDS':_0x336806(0x1c9),'cPCPP':'BrowserstackHealingLogDataFailed','UGmOj':function(_0x5bff4d,_0x313440,_0x5a9be0,_0x42b179,_0x2b98e8,_0x3e1005,_0x4c04bd){return _0x5bff4d(_0x313440,_0x5a9be0,_0x42b179,_0x2b98e8,_0x3e1005,_0x4c04bd);},'ZCFQP':'BrowserstackHealing.healFailure\x20method\x20timed\x20out','ioZSj':_0x336806(0x1fb)},_0x18ac7a=(await _0x2a3b98[_0x336806(0x20d)]())[_0x336806(0x215)]();let _0x4f6e2c='';if(commandRepository[_0x336806(0x200)]()&&_0x1865ad[_0x336806(0x1fa)](_0x1bf8de,![])||_0x1865ad[_0x336806(0x22b)](_0x1bf8de,!![])){const _0x1dcac5=_0x1865ad[_0x336806(0x1d4)](isNotUndefinedOrNull,_0x435766[_0x336806(0x20c)][_0x336806(0x1e8)])&&_0x1865ad[_0x336806(0x21c)](isString,_0x435766['parameters_']['using'])?_0x435766[_0x336806(0x20c)][_0x336806(0x1e8)][_0x336806(0x228)](/'/g,'\x5c\x27')[_0x336806(0x228)](/"/g,'\x5c\x22'):'',_0x38ef32=_0x1865ad[_0x336806(0x21c)](isNotUndefinedOrNull,_0x435766[_0x336806(0x20c)][_0x336806(0x1e8)])&&_0x1865ad[_0x336806(0x1d2)](isString,_0x435766['parameters_'][_0x336806(0x241)])?_0x435766[_0x336806(0x20c)][_0x336806(0x241)]['replace'](/'/g,'\x5c\x27')[_0x336806(0x228)](/"/g,'\x5c\x22'):'',_0x1876e7=_0x1865ad[_0x336806(0x1d2)](isNotUndefinedOrNull,commandRepository['getProjectName']())&&_0x1865ad[_0x336806(0x227)](isString,commandRepository[_0x336806(0x206)]())?commandRepository[_0x336806(0x206)]()[_0x336806(0x228)](/'/g,'\x5c\x27')[_0x336806(0x228)](/"/g,'\x5c\x22'):'';let _0x5e2d2b=_0x1865ad[_0x336806(0x23e)](isNotUndefinedOrNull,global[_0x336806(0x23d)])&&_0x1865ad[_0x336806(0x227)](isString,global['browserstackSessionName'])?global['browserstackSessionName']['replace'](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'';!_0x5e2d2b&&(_0x5e2d2b=_0x1865ad[_0x336806(0x23e)](isNotUndefinedOrNull,commandRepository['getTestName']())&&_0x1865ad[_0x336806(0x227)](isString,commandRepository[_0x336806(0x23a)]())?commandRepository[_0x336806(0x23a)]()[_0x336806(0x228)](/'/g,'\x5c\x27')[_0x336806(0x228)](/"/g,'\x5c\x22'):'');let _0x2502eb=_0x336806(0x1d0)+constants[_0x336806(0x1d5)]+_0x336806(0x224)+constants[_0x336806(0x1d5)]+_0x336806(0x1f8)+constants[_0x336806(0x1f0)]['split'](_0x1865ad[_0x336806(0x21d)])[0x1]+_0x336806(0x1de);_0x2502eb=_0x1865ad[_0x336806(0x227)](isNotUndefinedOrNull,_0x2502eb)&&_0x1865ad[_0x336806(0x21c)](isString,_0x2502eb)?_0x2502eb['replace'](/'/g,'\x5c\x27')[_0x336806(0x228)](/"/g,'\x5c\x22'):'';const _0x1a4c81=commandRepository[_0x336806(0x213)](_0x18ac7a),_0x234b52=globals['getGlobal'](_0x1865ad['VEgzU']),_0x3d3f12=globals[_0x336806(0x238)](_0x1865ad['vXDQv']),_0x2a1126=globals[_0x336806(0x238)](_0x1865ad[_0x336806(0x214)]),_0x52c749=![],_0x53b11b=new Date();if(_0x1bf8de){const _0x2fc084=_0x1865ad[_0x336806(0x1e4)](timeoutPromise,constants[_0x336806(0x1d3)],_0x1865ad[_0x336806(0x1fd)],_0x1865ad[_0x336806(0x20b)],_0x53b11b,this[_0x336806(0x216)],this['framework']);_0x4f6e2c=await Promise[_0x336806(0x233)]([this[_0x336806(0x22f)][_0x336806(0x21f)](_0x1dcac5,_0x38ef32,_0x1876e7,_0x5e2d2b,_0x3d3f12,_0x18ac7a,_0x1a4c81,_0x2502eb)['then'](_0x5dec2b=>{const _0x4e2850=_0x336806;return _0x2fc084[_0x4e2850(0x237)](),_0x5dec2b;}),_0x2fc084]);}else{if(commandRepository['isSelfHealEnabled']()){const _0x2e7a75=_0x1865ad[_0x336806(0x231)](timeoutPromise,constants[_0x336806(0x212)],_0x1865ad[_0x336806(0x221)],_0x1865ad[_0x336806(0x20f)],_0x53b11b,this[_0x336806(0x216)],this[_0x336806(0x1ca)]);_0x4f6e2c=await Promise[_0x336806(0x233)]([this[_0x336806(0x22f)][_0x336806(0x1fc)](_0x1dcac5,_0x38ef32,_0x1876e7,_0x5e2d2b,_0x234b52,_0x3d3f12,_0x18ac7a,_0x1a4c81,_0x52c749,_0x2a1126,_0x2502eb)['then'](_0xd28c7a=>{return _0x2e7a75['cancel'](),_0xd28c7a;}),_0x2e7a75]);}}_0x4f6e2c&&await _0x2a3b98[_0x336806(0x234)](_0x4f6e2c);}}async[a87_0xc42feb(0x1cc)](_0x329b1a,_0x235d5d,_0x3f0788){const _0x181bf2=a87_0xc42feb;try{await this[_0x181bf2(0x204)](_0x329b1a,_0x235d5d,_0x3f0788,!![]);}catch(_0x4ee4fc){return logger[_0x181bf2(0x207)](_0x181bf2(0x1eb)+(_0x4ee4fc&&_0x4ee4fc[_0x181bf2(0x1cd)]?_0x4ee4fc[_0x181bf2(0x1cd)]:'')),![];}return!![];}async[a87_0xc42feb(0x222)](_0x25f65c,_0xa569b4,_0x4984c5){const _0x23bfda=a87_0xc42feb,_0x368f81={'RENFf':function(_0x1f403f,_0x387328,_0x5c46f0,_0x366e71,_0x23dc5a,_0x259ef6,_0x238972){return _0x1f403f(_0x387328,_0x5c46f0,_0x366e71,_0x23dc5a,_0x259ef6,_0x238972);},'inBVz':'BrowserstackHealing.pollResult\x20method\x20timed\x20out','TEpah':_0x23bfda(0x1f9),'afcQw':_0x23bfda(0x1e2)};try{await this[_0x23bfda(0x204)](_0x25f65c,_0xa569b4,_0x4984c5,![]);const _0x523bbd=(await _0xa569b4[_0x23bfda(0x20d)]())[_0x23bfda(0x215)](),_0x3ccc66=new Date(),_0x28d17f=_0x368f81[_0x23bfda(0x226)](timeoutPromise,constants[_0x23bfda(0x1d6)],_0x368f81['inBVz'],_0x368f81[_0x23bfda(0x1cb)],_0x3ccc66,this[_0x23bfda(0x216)],this[_0x23bfda(0x1ca)]),_0x21b714=await Promise[_0x23bfda(0x233)]([this[_0x23bfda(0x22f)][_0x23bfda(0x1ea)](constants['TCG_URL'],_0x523bbd,globals[_0x23bfda(0x238)](_0x368f81[_0x23bfda(0x240)]))[_0x23bfda(0x201)](_0x236192=>{const _0x1548b7=_0x23bfda;return _0x28d17f[_0x1548b7(0x237)](),_0x236192;}),_0x28d17f]);if(_0x21b714&&_0x21b714['selector']&&_0x21b714[_0x23bfda(0x241)]){const _0x20031d={};return _0x20031d['locatorType']=_0x21b714[_0x23bfda(0x239)],_0x20031d['locatorValue']=_0x21b714[_0x23bfda(0x241)],_0x20031d[_0x23bfda(0x1db)]=!![],_0x20031d;}const _0x27d0a5={};return _0x27d0a5[_0x23bfda(0x22d)]=_0x4984c5[_0x23bfda(0x20c)][_0x23bfda(0x1e8)],_0x27d0a5[_0x23bfda(0x203)]=_0x21b714[_0x23bfda(0x241)],_0x27d0a5[_0x23bfda(0x1db)]=!![],_0x27d0a5;}catch(_0x7131c6){return logger['debug'](_0x23bfda(0x225)+(_0x7131c6&&_0x7131c6[_0x23bfda(0x1cd)]?_0x7131c6[_0x23bfda(0x1cd)]:'')),logger[_0x23bfda(0x22c)](_0x23bfda(0x1ef)+_0x4984c5['name_']+_0x23bfda(0x205)),_0x4984c5;}}}exports[a87_0xc42feb(0x217)]=Object[a87_0xc42feb(0x1e7)](new AiSdkWrapper());