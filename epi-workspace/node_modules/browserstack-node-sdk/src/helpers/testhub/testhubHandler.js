function a90_0x3fe6(){const _0xfc015=['null','lcnc','ENV_VAR','setupPercy','BROWSERSTACK_TESTHUB_JWT','settings','oalMP','GjduA','basename','xlEkA','eHdeE','assign','IbnhN','getUserName','resolve','getConfig','oxGSc','lzskb','PKXAp','getFrameworkDetails','env','generateBuildUpstreamData','./utils.js','IQvXp','isBrowserstackInfra','getGitMetaData','waitForBuildStatus','Error\x20while\x20waiting\x20for\x20events:\x20','EXCEPTION\x20IN\x20stopBuildUpstream\x20REQUEST\x20TO\x20TESTHUB\x20:\x20Missing\x20authentication\x20token','logBuildError','506366FZQWMg','BROWSERSTACK_CENTRAL_SCANNER_JOBID','exports','includes','percy','RPuIS','buildIdentifier','../test-observability/utils','getCentralUser','START','BROWSERSTACK_TESTHUB_UUID','forEach','../../bin/playwright/reporter/test-details.js','api/v1/builds/','Axqkb','path','UnNUB','push','getCiInfo','measureWrapper','ZfekJ','BROWSERSTACK_RERUN','winstonLogger','framework','message','svknY','util','1401822hWfohw','7uoYXKC','BROWSERSTACK_TEST_OBSERVABILITY','ACCESSIBILITY','error','../test-observability/sessionHandler.js','BROWSERSTACK_BUILD_GROUPING_IDENTIFIER','YULrJ','config','stringify','buildName','format','uRUUz','getAccessibilityOptions','token','data','../logger','isAccessibilityEnabled','3541880oIHGOA','getAccessKey','user_killed','../../bin/playwright/reporter/pwUtils.js','false','EXCEPTION\x20IN\x20BUILD\x20START\x20EVENT\x20:\x20Missing\x20authentication\x20token','getInstance','response','250GNwYgv','2626940zxmood','getHostInfo','All\x20trace\x20zip\x20send\x20events\x20complete','debug','processTraceZips','REWhY','TESTHUB_BUILD_API','success','info','stopBuildUpstream\x20event\x20successful!','buildHashedId','stop','status','iqsxF','true','nSWDc','BROWSERSTACK_CENTRAL_SCANNER_JWT','../helper','add','authToken','STOP','BROWSERSTACK_BUILD_RUN_IDENTIFIER','setAccessibilityVariables','miVxV','OBSERVABILITY','556143ONgjgh','aliDh','vxuQI','3oAyEKa','../performance/performance-tester.js','getTraceFilePaths','3778892IKWkTn','central_scanner','isUndefined','UgZXV','GLMxs','allowScreenshot','username','accessibilityOptions','jOEIV','password','Exception\x20while\x20creating\x20test\x20run\x20for\x20BrowserStack\x20Accessibility\x20Automation:\x20Missing\x20authentication\x20token','extractDataFromResponse','buildStopSent','Testhub\x20started\x20with\x20id:\x20','RyfWw','BS_TESTOPS_BUILD_COMPLETED','Percy\x20is\x20not\x20supported\x20for\x20','84393JErIiL','checkAndSetupPercy','EXCEPTION\x20IN\x20stopBuildUpstream\x20REQUEST\x20TO\x20TESTHUB\x20:\x20','PUT'];a90_0x3fe6=function(){return _0xfc015;};return a90_0x3fe6();}const a90_0x204ada=a90_0x5272;(function(_0x2884fa,_0xa64f56){const _0x4f8683=a90_0x5272,_0x4f7f02=_0x2884fa();while(!![]){try{const _0x3f45f6=-parseInt(_0x4f8683(0x1ac))/0x1+-parseInt(_0x4f8683(0x15d))/0x2+parseInt(_0x4f8683(0x1af))/0x3*(parseInt(_0x4f8683(0x1b2))/0x4)+-parseInt(_0x4f8683(0x193))/0x5+parseInt(_0x4f8683(0x178))/0x6+parseInt(_0x4f8683(0x179))/0x7*(parseInt(_0x4f8683(0x18a))/0x8)+parseInt(_0x4f8683(0x1c3))/0x9*(parseInt(_0x4f8683(0x192))/0xa);if(_0x3f45f6===_0xa64f56)break;else _0x4f7f02['push'](_0x4f7f02['shift']());}catch(_0xe774d1){_0x4f7f02['push'](_0x4f7f02['shift']());}}}(a90_0x3fe6,0x7f266));const bsSetupHelper=require(a90_0x204ada(0x1a4)),path=require(a90_0x204ada(0x16c)),util=require(a90_0x204ada(0x177)),{getCustomTags,isTestObservabilitySession,getDefaultHeaders,nodeRequest}=require(a90_0x204ada(0x164)),testhubUtils=require(a90_0x204ada(0x155)),testHubConstants=require('./constants.js'),constants=require('../../bin/utils/constants.js'),RequestQueueHandler=require('../test-observability/requestQueueHandler.js'),logger=require(a90_0x204ada(0x188))[a90_0x204ada(0x173)],SessionHandler=require(a90_0x204ada(0x17d)),PerformanceTester=require(a90_0x204ada(0x1b0)),{TESTHUB_EVENTS:PerformanceEvents}=require('../performance/constants'),TestDetails=require(a90_0x204ada(0x169)),{uploadTraceZip}=require(a90_0x204ada(0x18d)),OngoingEvents=new Set();function a90_0x5272(_0x1fe47e,_0x4fbf53){const _0x3fe688=a90_0x3fe6();return a90_0x5272=function(_0x5272dd,_0x1a5f20){_0x5272dd=_0x5272dd-0x13c;let _0x4b3026=_0x3fe688[_0x5272dd];return _0x4b3026;},a90_0x5272(_0x1fe47e,_0x4fbf53);}let processedTraceZips=![];const addEvent=_0x2b4aed=>{const _0x32d26f=a90_0x204ada;OngoingEvents[_0x32d26f(0x1a5)](_0x2b4aed);},awaitAllEvents=async()=>{return Promise['allSettled'](OngoingEvents);};class TestHubHandler{static ['buildStopSent']=![];static async['launchBuild'](_0x3d3641,_0x261ca9){const _0x2a545b=a90_0x204ada,_0x160d6f={'Axqkb':function(_0x1437fc,_0x4780ef){return _0x1437fc||_0x4780ef;},'PKXAp':function(_0x13a30f,_0x417f04){return _0x13a30f===_0x417f04;},'UgZXV':function(_0x454105){return _0x454105();},'REWhY':_0x2a545b(0x18f),'xlEkA':'false','nSWDc':_0x2a545b(0x1bc),'gwENg':function(_0x153a30,_0x54c68c,_0x4f7d65,_0x90909f,_0x1989f7){return _0x153a30(_0x54c68c,_0x4f7d65,_0x90909f,_0x1989f7);},'RPuIS':'POST'};await PerformanceTester[_0x2a545b(0x170)](PerformanceEvents[_0x2a545b(0x166)],async()=>{const _0x4c66b9=_0x2a545b,_0xeb2f7=Object[_0x4c66b9(0x14a)]({},_0x261ca9['config'],{'root_dir_path':'','framework':_0x261ca9[_0x4c66b9(0x174)]}),_0x5d712a=bsSetupHelper[_0x4c66b9(0x14c)](_0xeb2f7),_0x16a104=bsSetupHelper[_0x4c66b9(0x18b)](_0xeb2f7),_0x440b66=_0x160d6f[_0x4c66b9(0x16b)](_0x5d712a,'')+':'+_0x160d6f[_0x4c66b9(0x16b)](_0x16a104,''),_0x56a211=testhubUtils['getProductMap'](_0xeb2f7);process[_0x4c66b9(0x153)]['BROWSERSTACK_PRODUCT_MAP']=JSON[_0x4c66b9(0x181)](_0x56a211);if(_0x160d6f[_0x4c66b9(0x151)](_0x440b66,':'))return _0x160d6f[_0x4c66b9(0x1b5)](isTestObservabilitySession)&&(logger[_0x4c66b9(0x196)](_0x160d6f[_0x4c66b9(0x198)]),process[_0x4c66b9(0x153)]['BS_TESTOPS_BUILD_COMPLETED']=_0x160d6f[_0x4c66b9(0x148)]),testhubUtils['isAccessibilityEnabled'](_0xeb2f7)&&logger['debug'](_0x160d6f[_0x4c66b9(0x1a2)]),[null,null];try{const _0x12fa1f=await this[_0x4c66b9(0x154)](_0xeb2f7,_0x3d3641),_0x141b3f=this[_0x4c66b9(0x14e)](_0x5d712a,_0x16a104),_0x3122a6=await _0x160d6f['gwENg'](nodeRequest,_0x160d6f[_0x4c66b9(0x162)],testHubConstants[_0x4c66b9(0x199)],_0x12fa1f,_0x141b3f),_0xb8c333=this[_0x4c66b9(0x1bd)](_0xeb2f7,_0x3122a6,_0x141b3f);return await this[_0x4c66b9(0x13c)](_0x261ca9,_0x3d3641),_0xb8c333;}catch(_0x36b6bd){if(_0x160d6f[_0x4c66b9(0x151)](_0x36b6bd[_0x4c66b9(0x19a)],![])){testhubUtils[_0x4c66b9(0x15c)](_0x36b6bd);return;}}})();}static async[a90_0x204ada(0x197)](){const _0x3e3dfb=a90_0x204ada,_0x12acd4={'JySqz':function(_0x54c1ff,_0x3a7ee4,_0x13407){return _0x54c1ff(_0x3a7ee4,_0x13407);},'ZfekJ':function(_0x4b141e,_0x9f2fa4){return _0x4b141e(_0x9f2fa4);},'jOEIV':function(_0x3bb93f){return _0x3bb93f();},'RyfWw':_0x3e3dfb(0x195)};if(processedTraceZips)return;const _0x41dfdc=TestDetails[_0x3e3dfb(0x1b1)]();_0x41dfdc[_0x3e3dfb(0x168)](({testUId:_0x52a602,filePath:_0x868923})=>{const _0x38b6c1=_0x3e3dfb;var _0x206c3c=_0x12acd4['JySqz'](uploadTraceZip,_0x868923,_0x52a602);_0x12acd4[_0x38b6c1(0x171)](addEvent,_0x206c3c);});try{await _0x12acd4[_0x3e3dfb(0x1ba)](awaitAllEvents),logger['debug'](_0x12acd4[_0x3e3dfb(0x1c0)]),processedTraceZips=!![];}catch(_0x4db194){logger[_0x3e3dfb(0x17c)](_0x3e3dfb(0x15a)+util[_0x3e3dfb(0x183)](_0x4db194));}}static async[a90_0x204ada(0x13c)](_0x443f06,_0x3ccd79){const _0x2bae09=a90_0x204ada;if(constants['PERCY_SUPPORTED_FRAMEWORKS'][_0x2bae09(0x160)](_0x3ccd79)){await _0x443f06[_0x2bae09(0x142)]();return;}_0x443f06[_0x2bae09(0x180)][_0x2bae09(0x161)]&&logger[_0x2bae09(0x196)](_0x2bae09(0x1c2)+_0x3ccd79+'\x20framework');}static[a90_0x204ada(0x185)](_0x106a93){const _0x4bf254=a90_0x204ada,_0x1595d3={};_0x1595d3[_0x4bf254(0x144)]=_0x106a93[_0x4bf254(0x1b9)];const _0x10cb7c=_0x1595d3;return _0x10cb7c;}static[a90_0x204ada(0x14e)](_0x12c88d,_0x435de7){const _0xf635bc=a90_0x204ada,_0x78d3e5={'iqsxF':function(_0x24e351,_0x945281){return _0x24e351(_0x945281);}},_0x4236c2={};return _0x4236c2[_0xf635bc(0x1b8)]=_0x12c88d,_0x4236c2[_0xf635bc(0x1bb)]=_0x435de7,{'auth':_0x4236c2,'headers':_0x78d3e5[_0xf635bc(0x1a0)](getDefaultHeaders,![])};}static async[a90_0x204ada(0x154)](_0x244e7e,_0x3e27d8){const _0x216eff=a90_0x204ada,_0x539fa7={'IYBfZ':function(_0x101e6d,_0x362fa0){return _0x101e6d(_0x362fa0);}},_0x548b9f={'project_name':_0x244e7e['projectName']||'','name':_0x244e7e[_0x216eff(0x182)]||path[_0x216eff(0x147)](path[_0x216eff(0x14d)](process['cwd']())),'build_identifier':_0x244e7e[_0x216eff(0x163)],'description':_0x244e7e['buildDescription']||'','started_at':new Date()['toISOString'](),'tags':_0x539fa7['IYBfZ'](getCustomTags,_0x244e7e),'host_info':bsSetupHelper[_0x216eff(0x194)](),'ci_info':bsSetupHelper[_0x216eff(0x16f)](),'build_run_identifier':process['env'][_0x216eff(0x1a8)],'failed_tests_rerun':process[_0x216eff(0x153)][_0x216eff(0x172)]||![],'version_control':await bsSetupHelper[_0x216eff(0x158)](),'accessibility':this[_0x216eff(0x185)](_0x244e7e),'framework_details':testhubUtils[_0x216eff(0x152)](_0x244e7e,_0x3e27d8),'product_map':testhubUtils['getProductMap'](_0x244e7e),'browserstackAutomation':bsSetupHelper[_0x216eff(0x157)](),'grouping_identifier':process[_0x216eff(0x153)][_0x216eff(0x17e)]};if(bsSetupHelper[_0x216eff(0x165)]()[_0x216eff(0x1b3)]||bsSetupHelper[_0x216eff(0x165)]()[_0x216eff(0x140)]){const _0x1c8986={};_0x1c8986['job_id']=process['env'][_0x216eff(0x15e)],_0x1c8986[_0x216eff(0x186)]=process[_0x216eff(0x153)][_0x216eff(0x1a3)],_0x548b9f['central_scanner']=_0x1c8986;}return _0x548b9f;}static[a90_0x204ada(0x1bd)](_0x387024,_0x576783,_0x1cfe42){const _0x45865d=a90_0x204ada,_0x5144ce={'WzODJ':function(_0x17d3aa){return _0x17d3aa();},'eHdeE':function(_0x187fe2,_0x501a46){return _0x187fe2&&_0x501a46;},'GjduA':_0x45865d(0x1a1),'oalMP':_0x45865d(0x18e),'miVxV':function(_0xbafc05,_0x9a55cb){return _0xbafc05&&_0x9a55cb;}},_0x674710={};if(_0x5144ce['WzODJ'](isTestObservabilitySession)){const [_0x482aa0,_0x17ce5f,_0x5af0f4]=testhubUtils['setTestObservabilityVariables'](_0x576783[_0x45865d(0x187)],_0x1cfe42['auth']);if(_0x5144ce[_0x45865d(0x149)](_0x482aa0,_0x17ce5f)){const _0x3e47ec={};_0x3e47ec['jwt']=_0x482aa0,_0x3e47ec[_0x45865d(0x19d)]=_0x17ce5f,_0x3e47ec[_0x45865d(0x1b7)]=_0x5af0f4,_0x674710[testHubConstants[_0x45865d(0x1ab)]]=_0x3e47ec,process['env'][_0x45865d(0x17a)]=_0x5144ce[_0x45865d(0x146)];}else _0x674710[testHubConstants[_0x45865d(0x1ab)]]={},process[_0x45865d(0x153)][_0x45865d(0x17a)]=_0x5144ce[_0x45865d(0x145)];}else process[_0x45865d(0x153)][_0x45865d(0x17a)]=_0x5144ce['oalMP'];if(testhubUtils[_0x45865d(0x189)](_0x387024)){const [_0x19977c,_0x549bb2]=testhubUtils[_0x45865d(0x1a9)](_0x576783[_0x45865d(0x187)]);if(_0x5144ce[_0x45865d(0x1aa)](_0x19977c,_0x549bb2)){const _0x347ae6={};_0x347ae6[_0x45865d(0x1a6)]=_0x19977c,_0x347ae6[_0x45865d(0x19d)]=_0x549bb2,_0x674710[testHubConstants[_0x45865d(0x17b)]]=_0x347ae6,process[_0x45865d(0x153)]['BROWSERSTACK_ACCESSIBILITY']=_0x5144ce['GjduA'];}else _0x674710[testHubConstants[_0x45865d(0x17b)]]={},process['env']['BROWSERSTACK_ACCESSIBILITY']=_0x5144ce['oalMP'];}else process[_0x45865d(0x153)]['BROWSERSTACK_ACCESSIBILITY']=_0x5144ce['oalMP'];return testhubUtils['setTestHubCommonMetaInfo'](_0x576783['data']),logger[_0x45865d(0x19b)](_0x45865d(0x1bf)+process['env'][_0x45865d(0x167)]),_0x674710;}static async[a90_0x204ada(0x19e)](_0x3e616c){const _0x1e9a75=a90_0x204ada,_0x40d2f4={'UnNUB':function(_0xf8c8e4,_0x5805a5){return _0xf8c8e4===_0x5805a5;},'GLMxs':_0x1e9a75(0x18e),'iDlJd':function(_0x59788e,_0x4d09b0){return _0x59788e===_0x4d09b0;},'YULrJ':_0x1e9a75(0x13f),'aliDh':_0x1e9a75(0x15b),'IQvXp':_0x1e9a75(0x17c),'svknY':'Token/buildID\x20is\x20undefined,\x20build\x20creation\x20might\x20have\x20failed','TtEXi':'finished_metadata','lzskb':_0x1e9a75(0x18c),'vxuQI':function(_0x4e3bd2){return _0x4e3bd2();},'oxGSc':function(_0xc4e4e9,_0x1e475f,_0x1f222d,_0xcf48fe,_0x53ee3a,_0x12078b){return _0xc4e4e9(_0x1e475f,_0x1f222d,_0xcf48fe,_0x53ee3a,_0x12078b);},'IbnhN':_0x1e9a75(0x13e),'uRUUz':_0x1e9a75(0x19c),'FyoMd':_0x1e9a75(0x19a)};await this['processTraceZips'](),await PerformanceTester[_0x1e9a75(0x170)](PerformanceEvents[_0x1e9a75(0x1a7)],async()=>{const _0x4c74e4=_0x1e9a75;if(_0x40d2f4[_0x4c74e4(0x16d)](process[_0x4c74e4(0x153)][_0x4c74e4(0x1c1)],_0x40d2f4[_0x4c74e4(0x1b6)])||TestHubHandler[_0x4c74e4(0x1be)]||bsSetupHelper[_0x4c74e4(0x1b4)](process[_0x4c74e4(0x153)][testHubConstants[_0x4c74e4(0x141)][_0x4c74e4(0x143)]]))return;TestHubHandler[_0x4c74e4(0x1be)]=!![],await RequestQueueHandler[_0x4c74e4(0x190)]()['uploadPending'](),await SessionHandler[_0x4c74e4(0x159)]();if(_0x40d2f4['iDlJd'](process[_0x4c74e4(0x153)][testHubConstants[_0x4c74e4(0x141)][_0x4c74e4(0x143)]],_0x40d2f4[_0x4c74e4(0x17f)])||_0x40d2f4[_0x4c74e4(0x16d)](process[_0x4c74e4(0x153)][testHubConstants[_0x4c74e4(0x141)]['BROWSERSTACK_TESTHUB_UUID']],_0x40d2f4['YULrJ'])){logger[_0x4c74e4(0x196)](_0x40d2f4[_0x4c74e4(0x1ad)]);const _0x193a94={};return _0x193a94[_0x4c74e4(0x19f)]=_0x40d2f4[_0x4c74e4(0x156)],_0x193a94['message']=_0x40d2f4[_0x4c74e4(0x176)],_0x193a94;}const _0x26d0f4={'finished_at':new Date()['toISOString'](),'finished_metadata':[]};!!_0x3e616c&&_0x26d0f4[_0x40d2f4['TtEXi']][_0x4c74e4(0x16e)]({'reason':_0x40d2f4[_0x4c74e4(0x150)],'signal':_0x3e616c,'failure_data':''});const _0x2babb2={'headers':_0x40d2f4[_0x4c74e4(0x1ae)](getDefaultHeaders)};try{const _0x46921b=await _0x40d2f4[_0x4c74e4(0x14f)](nodeRequest,_0x40d2f4[_0x4c74e4(0x14b)],_0x4c74e4(0x16a)+process[_0x4c74e4(0x153)][testHubConstants['ENV_VAR']['BROWSERSTACK_TESTHUB_UUID']]+'/stop',_0x26d0f4,_0x2babb2,![]);if(_0x46921b['data']&&_0x46921b[_0x4c74e4(0x187)][_0x4c74e4(0x17c)]){const _0x19d6a2={};_0x19d6a2['message']=_0x46921b[_0x4c74e4(0x187)][_0x4c74e4(0x17c)];throw _0x19d6a2;}else{logger[_0x4c74e4(0x196)](_0x40d2f4[_0x4c74e4(0x184)]);const _0x31bf87={};return _0x31bf87[_0x4c74e4(0x19f)]=_0x40d2f4['FyoMd'],_0x31bf87['message']='',_0x31bf87;}}catch(_0x37cb6d){_0x37cb6d['response']?logger[_0x4c74e4(0x196)]('EXCEPTION\x20IN\x20stopBuildUpstream\x20REQUEST\x20TO\x20TESTHUB\x20:\x20'+_0x37cb6d[_0x4c74e4(0x191)]['status']+'\x20'+_0x37cb6d[_0x4c74e4(0x191)]['statusText']+'\x20'+JSON[_0x4c74e4(0x181)](_0x37cb6d['response'][_0x4c74e4(0x187)])):logger[_0x4c74e4(0x196)](_0x4c74e4(0x13d)+(_0x37cb6d['message']||_0x37cb6d));const _0x3ee2d9={};return _0x3ee2d9['status']=_0x40d2f4[_0x4c74e4(0x156)],_0x3ee2d9['message']=_0x37cb6d[_0x4c74e4(0x175)]||_0x37cb6d[_0x4c74e4(0x191)]?_0x37cb6d[_0x4c74e4(0x191)]['status']+':'+_0x37cb6d['response']['statusText']:_0x37cb6d,_0x3ee2d9;}})();}}module[a90_0x204ada(0x15f)]=TestHubHandler;