const a121_0x23b744=a121_0x3c6b;function a121_0x1a48(){const _0x109851=['winstonLogger','appendFileSync','skipFlakyandFailed','getOrchestrationData','enabled','22YEbraG','9247iLQNym','63JHNBEW','disable','testOrchestrationOptions','abort_build_on_failure','rerunPreviouslyFailed','writeFailureToFile','_setSkipFlakyAndFailed','getFailureThreshold','isRetryEnabled','35357JCrsxu','372752jLPKwp','run_previously_failed_first','2874mtaWOe','getSkipFlakyAndFailed','enable','join','10nGRwOH','getName','skipFlakyAndFailed','getRetryCount','runPreviouslyFailedFirst','604100wLYaVc','1155242ugVZcq','isAbortBuildOnFailureEnabled','testOrdering','has','exports','isAbortBuildOnFailureSupported','_setTestOrdering','toLowerCase','_setRerunPreviouslyFailed','testOrderingEnabled','BROWSERSTACK_TESTHUB_UUID','abortBuildOnFailure','checkAbortBuildFileExists','skip_failing_and_flaky','getRerunPreviouslyFailed','UBkup','13140UmcJWl','failed_tests_','DWeYz','_setRunPreviouslyFailedFirst','.txt','env','368QznrwY','name','_instance','getRunPreviouslyFailedFirst','path','tmpdir','abort_build_','24jIMGTk','config','9287980NhyuIN'];a121_0x1a48=function(){return _0x109851;};return a121_0x1a48();}(function(_0x117e75,_0x576790){const _0x17545b=a121_0x3c6b,_0x31cfcd=_0x117e75();while(!![]){try{const _0x341947=parseInt(_0x17545b(0x19f))/0x1*(parseInt(_0x17545b(0x194))/0x2)+parseInt(_0x17545b(0x1bc))/0x3*(-parseInt(_0x17545b(0x1c2))/0x4)+parseInt(_0x17545b(0x1ab))/0x5+-parseInt(_0x17545b(0x1a2))/0x6*(parseInt(_0x17545b(0x195))/0x7)+parseInt(_0x17545b(0x1a0))/0x8*(-parseInt(_0x17545b(0x196))/0x9)+-parseInt(_0x17545b(0x1a6))/0xa*(parseInt(_0x17545b(0x1ac))/0xb)+parseInt(_0x17545b(0x1c9))/0xc*(parseInt(_0x17545b(0x18e))/0xd);if(_0x341947===_0x576790)break;else _0x31cfcd['push'](_0x31cfcd['shift']());}catch(_0x34e427){_0x31cfcd['push'](_0x31cfcd['shift']());}}}(a121_0x1a48,0x732d8));const os=require('os'),path=require(a121_0x23b744(0x1c6)),fs=require('fs'),logger=require('../logger')[a121_0x23b744(0x18f)],RETRY_TESTS_ON_FAILURE='retryTestsOnFailure',ABORT_BUILD_ON_FAILURE=a121_0x23b744(0x1b7),RUN_PREVIOUSLY_FAILED_FIRST=a121_0x23b744(0x1aa),RERUN_PREVIOUSLY_FAILED=a121_0x23b744(0x19a),SKIP_FLAKY_AND_FAILED=a121_0x23b744(0x191),ALLOWED_ORCHESTRATION_KEYS=new Set([RETRY_TESTS_ON_FAILURE,ABORT_BUILD_ON_FAILURE,RUN_PREVIOUSLY_FAILED_FIRST,RERUN_PREVIOUSLY_FAILED,SKIP_FLAKY_AND_FAILED]),ABORT_BUILD_SUPPORTED_FRAMEWORKS=new Set(['jest']);class TestOrdering{constructor(){const _0x5f3fbb=a121_0x23b744;this[_0x5f3fbb(0x193)]=![],this[_0x5f3fbb(0x1c3)]=null;}[a121_0x23b744(0x1a4)](_0x15291a){const _0x2ec28d=a121_0x23b744;this[_0x2ec28d(0x193)]=!![],this['name']=_0x15291a;}[a121_0x23b744(0x197)](){const _0x3ed959=a121_0x23b744;this[_0x3ed959(0x193)]=![],this['name']=null;}['getEnabled'](){return this['enabled'];}[a121_0x23b744(0x1a7)](){const _0x393964=a121_0x23b744;return this[_0x393964(0x1c3)];}}class OrchestrationUtils{static [a121_0x23b744(0x1c4)]=null;constructor(_0x2d0508){const _0x238e57=a121_0x23b744,_0x17802e={};_0x17802e['DWeYz']=function(_0x34364f,_0x3764da){return _0x34364f||_0x3764da;};const _0x1f9ad9=_0x17802e;this['runPreviouslyFailedFirst']=![],this[_0x238e57(0x19a)]=![],this[_0x238e57(0x1a8)]=![],this[_0x238e57(0x1ae)]=new TestOrdering(),this[_0x238e57(0x1ca)]=_0x1f9ad9[_0x238e57(0x1be)](_0x2d0508,{});const _0x380e40=_0x2d0508&&_0x2d0508[_0x238e57(0x198)]||{};this['_setRunPreviouslyFailedFirst'](_0x380e40[RUN_PREVIOUSLY_FAILED_FIRST]||![]),this[_0x238e57(0x1b4)](_0x380e40[RERUN_PREVIOUSLY_FAILED]||![]),this[_0x238e57(0x19c)](_0x380e40[SKIP_FLAKY_AND_FAILED]||![]);}static['getInstance'](_0x3aa301){const _0x36e05a=a121_0x23b744;return!OrchestrationUtils[_0x36e05a(0x1c4)]&&_0x3aa301&&(OrchestrationUtils['_instance']=new OrchestrationUtils(_0x3aa301)),OrchestrationUtils[_0x36e05a(0x1c4)];}['isRetryEnabled'](){const _0x186e8f=a121_0x23b744,_0x216fb5=(this[_0x186e8f(0x1ca)][_0x186e8f(0x198)]||{})[RETRY_TESTS_ON_FAILURE]||{};return!!_0x216fb5[_0x186e8f(0x193)];}['getRetryCount'](){const _0x560cc5=a121_0x23b744,_0x2c72f7=(this['config']['testOrchestrationOptions']||{})[RETRY_TESTS_ON_FAILURE]||{};let _0x2dbc64=0x0;return this[_0x560cc5(0x19e)](this['config'])&&(_0x2dbc64=_0x2c72f7['maxRetries']||0x1),_0x2dbc64;}[a121_0x23b744(0x192)](){const _0xef1a0=this['config']['testOrchestrationOptions']||{},_0x334ca6={};for(const _0x1f790d in _0xef1a0){ALLOWED_ORCHESTRATION_KEYS['has'](_0x1f790d)&&(_0x334ca6[_0x1f790d]=_0xef1a0[_0x1f790d]);}return _0x334ca6;}[a121_0x23b744(0x1b8)](){const _0x3f3a8d=a121_0x23b744,_0x24932b=process[_0x3f3a8d(0x1c1)]['BROWSERSTACK_TESTHUB_UUID'],_0x23a629=path[_0x3f3a8d(0x1a5)](os[_0x3f3a8d(0x1c7)](),_0x3f3a8d(0x1c8)+_0x24932b);return fs['existsSync'](_0x23a629);}[a121_0x23b744(0x19b)](_0x2be091){const _0x28bb41=a121_0x23b744,_0x3a8ac9=process[_0x28bb41(0x1c1)][_0x28bb41(0x1b6)],_0x245132=path[_0x28bb41(0x1a5)](os['tmpdir'](),_0x28bb41(0x1bd)+_0x3a8ac9+_0x28bb41(0x1c0));fs[_0x28bb41(0x190)](_0x245132,_0x2be091+'\x0a');}[a121_0x23b744(0x1b1)](_0x378e45){const _0x10104e=a121_0x23b744,_0x2f21af={};_0x2f21af[_0x10104e(0x1bb)]=function(_0x177ac6,_0x20c1be){return _0x177ac6||_0x20c1be;};const _0x5d954e=_0x2f21af;return ABORT_BUILD_SUPPORTED_FRAMEWORKS[_0x10104e(0x1af)](_0x5d954e['UBkup'](_0x378e45,'')[_0x10104e(0x1b3)]());}['isAbortBuildOnFailureEnabled'](){const _0x51b431=a121_0x23b744,_0x46b388=(this[_0x51b431(0x1ca)][_0x51b431(0x198)]||{})[ABORT_BUILD_ON_FAILURE]||{};return!!_0x46b388['enabled'];}[a121_0x23b744(0x19d)](){const _0x5e31d2=a121_0x23b744,_0x4ae73e=(this[_0x5e31d2(0x1ca)][_0x5e31d2(0x198)]||{})[ABORT_BUILD_ON_FAILURE]||{};return _0x4ae73e['maxFailures']||0x5;;}[a121_0x23b744(0x1c5)](){return this['runPreviouslyFailedFirst'];}[a121_0x23b744(0x1bf)](_0x42e650){const _0xa86523=a121_0x23b744;this[_0xa86523(0x1aa)]=!!_0x42e650,this[_0xa86523(0x1b2)]();}[a121_0x23b744(0x1ba)](){const _0x3d7d8e=a121_0x23b744;return this[_0x3d7d8e(0x19a)];}[a121_0x23b744(0x1b4)](_0x917def){const _0x574f6c=a121_0x23b744;this[_0x574f6c(0x19a)]=!!_0x917def,this[_0x574f6c(0x1b2)]();}[a121_0x23b744(0x1a3)](){const _0x3c2103=a121_0x23b744;return this[_0x3c2103(0x1a8)];}[a121_0x23b744(0x19c)](_0x572536){const _0x2ff2fe=a121_0x23b744;this[_0x2ff2fe(0x1a8)]=!!_0x572536,this[_0x2ff2fe(0x1b2)]();}['_setTestOrdering'](){const _0x1160b2=a121_0x23b744;if(this[_0x1160b2(0x1aa)])this[_0x1160b2(0x19a)]=![],this[_0x1160b2(0x1a8)]=![],this[_0x1160b2(0x1ae)][_0x1160b2(0x1a4)](RUN_PREVIOUSLY_FAILED_FIRST);else{if(this[_0x1160b2(0x19a)])this[_0x1160b2(0x1aa)]=![],this[_0x1160b2(0x1a8)]=![],this[_0x1160b2(0x1ae)][_0x1160b2(0x1a4)](RERUN_PREVIOUSLY_FAILED);else this[_0x1160b2(0x1a8)]?(this['runPreviouslyFailedFirst']=![],this[_0x1160b2(0x19a)]=![],this[_0x1160b2(0x1ae)]['enable'](SKIP_FLAKY_AND_FAILED)):this[_0x1160b2(0x1ae)]['disable']();}}[a121_0x23b744(0x1b5)](){const _0x351daa=a121_0x23b744;return this[_0x351daa(0x1ae)]['getEnabled']();}['getTestOrderingName'](){const _0x109f92=a121_0x23b744;if(this[_0x109f92(0x1ae)]['getEnabled']())return this[_0x109f92(0x1ae)][_0x109f92(0x1a7)]();return null;}['getBuildStartData'](){const _0x40d070=a121_0x23b744,_0x332f25={};return _0x332f25['rerun_previously_failed']={'enabled':this[_0x40d070(0x1ba)]()},_0x332f25[_0x40d070(0x1a1)]={'enabled':this[_0x40d070(0x1c5)]()},_0x332f25[_0x40d070(0x1b9)]={'enabled':this[_0x40d070(0x1a3)]()},this['isRetryEnabled']()&&(_0x332f25['retry_tests_on_failure']={'enabled':!![],'max_retries':this[_0x40d070(0x1a9)]()}),this[_0x40d070(0x1ad)]()&&(_0x332f25[_0x40d070(0x199)]={'enabled':!![],'max_failures':this['getFailureThreshold']()}),_0x332f25;}}function a121_0x3c6b(_0x64968b,_0x2caa42){const _0x1a48a8=a121_0x1a48();return a121_0x3c6b=function(_0x3c6b43,_0x66225c){_0x3c6b43=_0x3c6b43-0x18e;let _0x38b353=_0x1a48a8[_0x3c6b43];return _0x38b353;},a121_0x3c6b(_0x64968b,_0x2caa42);}module[a121_0x23b744(0x1b0)]=OrchestrationUtils;