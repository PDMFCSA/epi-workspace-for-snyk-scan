const a131_0x26713f=a131_0x2fe0;function a131_0x32be(){const _0x1515e6=['getRerunPreviouslyFailed','toLowerCase','_setSkipFlakyAndFailed','name','getTestOrderingName','existsSync','jest','TDSkk','testOrderingEnabled','tmpdir','maxRetries','366394FPEPMM','abort_build_on_failure','has','getEnabled','enable','checkAbortBuildFileExists','config','getOrchestrationData','abortBuildOnFailure','disable','isRetryEnabled','20CFhAYu','retryTestsOnFailure','getRunPreviouslyFailedFirst','enabled','_setRunPreviouslyFailedFirst','retry_tests_on_failure','getBuildStartData','env','sXLlW','path','_setRerunPreviouslyFailed','114lXohRq','../logger','runPreviouslyFailedFirst','isAbortBuildOnFailureEnabled','3575560fleuGp','join','testOrdering','getName','skipFlakyandFailed','getSkipFlakyAndFailed','22001705cJKjGP','10245470ZgZeiF','maxFailures','writeFailureToFile','.txt','testOrchestrationOptions','getRetryCount','1172251YyyKQV','isAbortBuildOnFailureSupported','rerunPreviouslyFailed','_instance','skipFlakyAndFailed','634444wfBraB','2ykTKOI','getInstance','3511239iRxDbx','9Feadym','_setTestOrdering','24bzYnGw','BROWSERSTACK_TESTHUB_UUID'];a131_0x32be=function(){return _0x1515e6;};return a131_0x32be();}(function(_0x2cafc8,_0x489a69){const _0x2448f9=a131_0x2fe0,_0x3d758d=_0x2cafc8();while(!![]){try{const _0x5434b4=-parseInt(_0x2448f9(0x18c))/0x1+-parseInt(_0x2448f9(0x192))/0x2*(parseInt(_0x2448f9(0x194))/0x3)+-parseInt(_0x2448f9(0x191))/0x4*(parseInt(_0x2448f9(0x170))/0x5)+parseInt(_0x2448f9(0x17b))/0x6*(-parseInt(_0x2448f9(0x1a4))/0x7)+-parseInt(_0x2448f9(0x17f))/0x8+parseInt(_0x2448f9(0x195))/0x9*(parseInt(_0x2448f9(0x186))/0xa)+-parseInt(_0x2448f9(0x185))/0xb*(-parseInt(_0x2448f9(0x197))/0xc);if(_0x5434b4===_0x489a69)break;else _0x3d758d['push'](_0x3d758d['shift']());}catch(_0x4458a0){_0x3d758d['push'](_0x3d758d['shift']());}}}(a131_0x32be,0x94062));const os=require('os'),path=require(a131_0x26713f(0x179)),fs=require('fs'),logger=require(a131_0x26713f(0x17c))['winstonLogger'],RETRY_TESTS_ON_FAILURE=a131_0x26713f(0x171),ABORT_BUILD_ON_FAILURE=a131_0x26713f(0x1ac),RUN_PREVIOUSLY_FAILED_FIRST=a131_0x26713f(0x17d),RERUN_PREVIOUSLY_FAILED=a131_0x26713f(0x18e),SKIP_FLAKY_AND_FAILED=a131_0x26713f(0x183),ALLOWED_ORCHESTRATION_KEYS=new Set([RETRY_TESTS_ON_FAILURE,ABORT_BUILD_ON_FAILURE,RUN_PREVIOUSLY_FAILED_FIRST,RERUN_PREVIOUSLY_FAILED,SKIP_FLAKY_AND_FAILED]),ABORT_BUILD_SUPPORTED_FRAMEWORKS=new Set([a131_0x26713f(0x19f)]);class TestOrdering{constructor(){const _0xa11a6e=a131_0x26713f;this[_0xa11a6e(0x173)]=![],this[_0xa11a6e(0x19c)]=null;}['enable'](_0x170628){const _0x59c5ce=a131_0x26713f;this[_0x59c5ce(0x173)]=!![],this[_0x59c5ce(0x19c)]=_0x170628;}[a131_0x26713f(0x16e)](){const _0xc87f09=a131_0x26713f;this[_0xc87f09(0x173)]=![],this[_0xc87f09(0x19c)]=null;}['getEnabled'](){const _0x14b9bc=a131_0x26713f;return this[_0x14b9bc(0x173)];}[a131_0x26713f(0x182)](){const _0x2694fb=a131_0x26713f;return this[_0x2694fb(0x19c)];}}class OrchestrationUtils{static [a131_0x26713f(0x18f)]=null;constructor(_0x1ff8cd){const _0xdf2b2c=a131_0x26713f,_0x12e586={};_0x12e586[_0xdf2b2c(0x1a0)]=function(_0x5082e6,_0x1e9f0e){return _0x5082e6||_0x1e9f0e;};const _0x4b58a9=_0x12e586;this[_0xdf2b2c(0x17d)]=![],this[_0xdf2b2c(0x18e)]=![],this[_0xdf2b2c(0x190)]=![],this[_0xdf2b2c(0x181)]=new TestOrdering(),this['config']=_0x4b58a9['TDSkk'](_0x1ff8cd,{});const _0x3ad5f1=_0x1ff8cd&&_0x1ff8cd['testOrchestrationOptions']||{};this[_0xdf2b2c(0x174)](_0x3ad5f1[RUN_PREVIOUSLY_FAILED_FIRST]||![]),this[_0xdf2b2c(0x17a)](_0x3ad5f1[RERUN_PREVIOUSLY_FAILED]||![]),this[_0xdf2b2c(0x19b)](_0x3ad5f1[SKIP_FLAKY_AND_FAILED]||![]);}static[a131_0x26713f(0x193)](_0x4768b5){const _0x374293=a131_0x26713f;return!OrchestrationUtils[_0x374293(0x18f)]&&_0x4768b5&&(OrchestrationUtils['_instance']=new OrchestrationUtils(_0x4768b5)),OrchestrationUtils['_instance'];}[a131_0x26713f(0x16f)](){const _0x4245ed=a131_0x26713f,_0x4dc871=(this[_0x4245ed(0x1aa)][_0x4245ed(0x18a)]||{})[RETRY_TESTS_ON_FAILURE]||{};return!!_0x4dc871[_0x4245ed(0x173)];}[a131_0x26713f(0x18b)](){const _0x27c19e=a131_0x26713f,_0x856528=(this['config'][_0x27c19e(0x18a)]||{})[RETRY_TESTS_ON_FAILURE]||{};let _0x177c10=0x0;return this[_0x27c19e(0x16f)](this[_0x27c19e(0x1aa)])&&(_0x177c10=_0x856528[_0x27c19e(0x1a3)]||0x1),_0x177c10;}[a131_0x26713f(0x1ab)](){const _0x42e4b1=a131_0x26713f,_0x487997=this['config'][_0x42e4b1(0x18a)]||{},_0x32363e={};for(const _0x486f61 in _0x487997){ALLOWED_ORCHESTRATION_KEYS[_0x42e4b1(0x1a6)](_0x486f61)&&(_0x32363e[_0x486f61]=_0x487997[_0x486f61]);}return _0x32363e;}[a131_0x26713f(0x1a9)](){const _0x511b0b=a131_0x26713f,_0x18d399=process['env'][_0x511b0b(0x198)],_0x177459=path['join'](os['tmpdir'](),'abort_build_'+_0x18d399);return fs[_0x511b0b(0x19e)](_0x177459);}[a131_0x26713f(0x188)](_0x3d2fc9){const _0x46c185=a131_0x26713f,_0x1875a1=process[_0x46c185(0x177)][_0x46c185(0x198)],_0x244065=path[_0x46c185(0x180)](os[_0x46c185(0x1a2)](),'failed_tests_'+_0x1875a1+_0x46c185(0x189));fs['appendFileSync'](_0x244065,_0x3d2fc9+'\x0a');}[a131_0x26713f(0x18d)](_0x3f838c){const _0x1fa5ca=a131_0x26713f,_0x42b9a9={};_0x42b9a9['sXLlW']=function(_0x97bff2,_0x58b172){return _0x97bff2||_0x58b172;};const _0x2ddd82=_0x42b9a9;return ABORT_BUILD_SUPPORTED_FRAMEWORKS[_0x1fa5ca(0x1a6)](_0x2ddd82[_0x1fa5ca(0x178)](_0x3f838c,'')[_0x1fa5ca(0x19a)]());}[a131_0x26713f(0x17e)](){const _0x3f56bc=a131_0x26713f,_0x323b5b=(this['config'][_0x3f56bc(0x18a)]||{})[ABORT_BUILD_ON_FAILURE]||{};return!!_0x323b5b[_0x3f56bc(0x173)];}['getFailureThreshold'](){const _0x23ae76=a131_0x26713f,_0x1282c7=(this[_0x23ae76(0x1aa)][_0x23ae76(0x18a)]||{})[ABORT_BUILD_ON_FAILURE]||{};return _0x1282c7[_0x23ae76(0x187)]||0x5;;}[a131_0x26713f(0x172)](){return this['runPreviouslyFailedFirst'];}[a131_0x26713f(0x174)](_0x2bcd33){const _0x4df7a0=a131_0x26713f;this[_0x4df7a0(0x17d)]=!!_0x2bcd33,this[_0x4df7a0(0x196)]();}[a131_0x26713f(0x199)](){const _0x3478b9=a131_0x26713f;return this[_0x3478b9(0x18e)];}[a131_0x26713f(0x17a)](_0x1688cc){const _0x45eca8=a131_0x26713f;this[_0x45eca8(0x18e)]=!!_0x1688cc,this['_setTestOrdering']();}[a131_0x26713f(0x184)](){const _0x1fd31b=a131_0x26713f;return this[_0x1fd31b(0x190)];}['_setSkipFlakyAndFailed'](_0x2c4212){const _0x4f130f=a131_0x26713f;this[_0x4f130f(0x190)]=!!_0x2c4212,this['_setTestOrdering']();}[a131_0x26713f(0x196)](){const _0x209378=a131_0x26713f;if(this[_0x209378(0x17d)])this[_0x209378(0x18e)]=![],this['skipFlakyAndFailed']=![],this['testOrdering'][_0x209378(0x1a8)](RUN_PREVIOUSLY_FAILED_FIRST);else{if(this['rerunPreviouslyFailed'])this[_0x209378(0x17d)]=![],this[_0x209378(0x190)]=![],this[_0x209378(0x181)][_0x209378(0x1a8)](RERUN_PREVIOUSLY_FAILED);else this[_0x209378(0x190)]?(this['runPreviouslyFailedFirst']=![],this[_0x209378(0x18e)]=![],this[_0x209378(0x181)][_0x209378(0x1a8)](SKIP_FLAKY_AND_FAILED)):this[_0x209378(0x181)][_0x209378(0x16e)]();}}[a131_0x26713f(0x1a1)](){const _0x4ad775=a131_0x26713f;return this['testOrdering'][_0x4ad775(0x1a7)]();}[a131_0x26713f(0x19d)](){const _0x1ce105=a131_0x26713f;if(this[_0x1ce105(0x181)][_0x1ce105(0x1a7)]())return this[_0x1ce105(0x181)][_0x1ce105(0x182)]();return null;}[a131_0x26713f(0x176)](){const _0x45ca8f=a131_0x26713f,_0x3a8bed={};return _0x3a8bed['rerun_previously_failed']={'enabled':this['getRerunPreviouslyFailed']()},_0x3a8bed['run_previously_failed_first']={'enabled':this['getRunPreviouslyFailedFirst']()},_0x3a8bed['skip_failing_and_flaky']={'enabled':this[_0x45ca8f(0x184)]()},this[_0x45ca8f(0x16f)]()&&(_0x3a8bed[_0x45ca8f(0x175)]={'enabled':!![],'max_retries':this[_0x45ca8f(0x18b)]()}),this['isAbortBuildOnFailureEnabled']()&&(_0x3a8bed[_0x45ca8f(0x1a5)]={'enabled':!![],'max_failures':this['getFailureThreshold']()}),_0x3a8bed;}}function a131_0x2fe0(_0x5558e1,_0x250a4e){const _0x32be1c=a131_0x32be();return a131_0x2fe0=function(_0x2fe04f,_0x810b9e){_0x2fe04f=_0x2fe04f-0x16e;let _0x2579df=_0x32be1c[_0x2fe04f];return _0x2579df;},a131_0x2fe0(_0x5558e1,_0x250a4e);}module['exports']=OrchestrationUtils;