const a134_0x58cd38=a134_0x4d02;function a134_0x1465(){const _0x38c1f2=['getRetryCount','getBuildStartData','135452BSRBmM','appendFileSync','retry_tests_on_failure','testOrchestrationOptions','config','jest','8712jZbUBN','getEnabled','existsSync','getRerunPreviouslyFailed','runPreviouslyFailedFirst','toLowerCase','getFailureThreshold','1240ovgTTN','rerun_previously_failed','97848FsPAuE','has','rerunPreviouslyFailed','isRetryEnabled','retryTestsOnFailure','maxRetries','isAbortBuildOnFailureEnabled','isAbortBuildOnFailureSupported','8XXHUUY','enable','12397528wUduyH','getOrchestrationData','_setSkipFlakyAndFailed','_setTestOrdering','abort_build_','enabled','_setRunPreviouslyFailedFirst','_instance','join','3630UuPvyD','getSkipFlakyAndFailed','_setRerunPreviouslyFailed','skipFlakyAndFailed','985135RSQSbD','skip_failing_and_flaky','writeFailureToFile','BROWSERSTACK_TESTHUB_UUID','getInstance','skipFlakyandFailed','name','getName','246687AykQiD','CJajT','abort_build_on_failure','../logger','getTestOrderingName','9hbslCU','tmpdir','env','path','4585vNCyPd','.txt','testOrderingEnabled','kyqHU','testOrdering','disable','getRunPreviouslyFailedFirst'];a134_0x1465=function(){return _0x38c1f2;};return a134_0x1465();}(function(_0x21160a,_0x3fd392){const _0x5b8baf=a134_0x4d02,_0x4e0b79=_0x21160a();while(!![]){try{const _0x3a14c1=parseInt(_0x5b8baf(0x116))/0x1*(-parseInt(_0x5b8baf(0x123))/0x2)+-parseInt(_0x5b8baf(0x111))/0x3+parseInt(_0x5b8baf(0xfa))/0x4*(parseInt(_0x5b8baf(0x109))/0x5)+-parseInt(_0x5b8baf(0x105))/0x6*(parseInt(_0x5b8baf(0x11a))/0x7)+parseInt(_0x5b8baf(0x132))/0x8+parseInt(_0x5b8baf(0x129))/0x9*(-parseInt(_0x5b8baf(0x130))/0xa)+parseInt(_0x5b8baf(0xfc))/0xb;if(_0x3a14c1===_0x3fd392)break;else _0x4e0b79['push'](_0x4e0b79['shift']());}catch(_0x5cf744){_0x4e0b79['push'](_0x4e0b79['shift']());}}}(a134_0x1465,0x4f68f));const os=require('os'),path=require(a134_0x58cd38(0x119)),fs=require('fs'),logger=require(a134_0x58cd38(0x114))['winstonLogger'],RETRY_TESTS_ON_FAILURE=a134_0x58cd38(0xf6),ABORT_BUILD_ON_FAILURE='abortBuildOnFailure',RUN_PREVIOUSLY_FAILED_FIRST=a134_0x58cd38(0x12d),RERUN_PREVIOUSLY_FAILED=a134_0x58cd38(0x134),SKIP_FLAKY_AND_FAILED=a134_0x58cd38(0x10e),ALLOWED_ORCHESTRATION_KEYS=new Set([RETRY_TESTS_ON_FAILURE,ABORT_BUILD_ON_FAILURE,RUN_PREVIOUSLY_FAILED_FIRST,RERUN_PREVIOUSLY_FAILED,SKIP_FLAKY_AND_FAILED]),ABORT_BUILD_SUPPORTED_FRAMEWORKS=new Set([a134_0x58cd38(0x128)]);function a134_0x4d02(_0x11d0a0,_0x3aa927){const _0x146528=a134_0x1465();return a134_0x4d02=function(_0x4d02bb,_0x36d406){_0x4d02bb=_0x4d02bb-0xf5;let _0x462a09=_0x146528[_0x4d02bb];return _0x462a09;},a134_0x4d02(_0x11d0a0,_0x3aa927);}class TestOrdering{constructor(){const _0x769122=a134_0x58cd38;this[_0x769122(0x101)]=![],this[_0x769122(0x10f)]=null;}['enable'](_0x43885f){const _0x131323=a134_0x58cd38;this[_0x131323(0x101)]=!![],this[_0x131323(0x10f)]=_0x43885f;}[a134_0x58cd38(0x11f)](){const _0x42111c=a134_0x58cd38;this[_0x42111c(0x101)]=![],this[_0x42111c(0x10f)]=null;}[a134_0x58cd38(0x12a)](){const _0x4c5fa3=a134_0x58cd38;return this[_0x4c5fa3(0x101)];}[a134_0x58cd38(0x110)](){return this['name'];}}class OrchestrationUtils{static ['_instance']=null;constructor(_0x5ab5e2){const _0x374273=a134_0x58cd38,_0x2c6cda={};_0x2c6cda['kyqHU']=function(_0xaaea07,_0x4d21ca){return _0xaaea07||_0x4d21ca;};const _0x2e5e40=_0x2c6cda;this[_0x374273(0x12d)]=![],this[_0x374273(0x134)]=![],this[_0x374273(0x108)]=![],this['testOrdering']=new TestOrdering(),this[_0x374273(0x127)]=_0x2e5e40[_0x374273(0x11d)](_0x5ab5e2,{});const _0x879a2=_0x5ab5e2&&_0x5ab5e2[_0x374273(0x126)]||{};this[_0x374273(0x102)](_0x879a2[RUN_PREVIOUSLY_FAILED_FIRST]||![]),this['_setRerunPreviouslyFailed'](_0x879a2[RERUN_PREVIOUSLY_FAILED]||![]),this[_0x374273(0xfe)](_0x879a2[SKIP_FLAKY_AND_FAILED]||![]);}static[a134_0x58cd38(0x10d)](_0x20d8ba){const _0x577ab9=a134_0x58cd38;return!OrchestrationUtils[_0x577ab9(0x103)]&&_0x20d8ba&&(OrchestrationUtils[_0x577ab9(0x103)]=new OrchestrationUtils(_0x20d8ba)),OrchestrationUtils['_instance'];}['isRetryEnabled'](){const _0x4b6fee=a134_0x58cd38,_0xa1bf1c=(this['config']['testOrchestrationOptions']||{})[RETRY_TESTS_ON_FAILURE]||{};return!!_0xa1bf1c[_0x4b6fee(0x101)];}[a134_0x58cd38(0x121)](){const _0x990b7=a134_0x58cd38,_0x55fbd3=(this['config'][_0x990b7(0x126)]||{})[RETRY_TESTS_ON_FAILURE]||{};let _0x367ba5=0x0;return this[_0x990b7(0xf5)](this[_0x990b7(0x127)])&&(_0x367ba5=_0x55fbd3[_0x990b7(0xf7)]||0x1),_0x367ba5;}[a134_0x58cd38(0xfd)](){const _0x485399=a134_0x58cd38,_0x335eae=this[_0x485399(0x127)][_0x485399(0x126)]||{},_0x1dfc6e={};for(const _0x3e6dee in _0x335eae){ALLOWED_ORCHESTRATION_KEYS[_0x485399(0x133)](_0x3e6dee)&&(_0x1dfc6e[_0x3e6dee]=_0x335eae[_0x3e6dee]);}return _0x1dfc6e;}['checkAbortBuildFileExists'](){const _0x5b845b=a134_0x58cd38,_0x3dad74=process[_0x5b845b(0x118)][_0x5b845b(0x10c)],_0x53d731=path['join'](os[_0x5b845b(0x117)](),_0x5b845b(0x100)+_0x3dad74);return fs[_0x5b845b(0x12b)](_0x53d731);}[a134_0x58cd38(0x10b)](_0x274e2f){const _0x51ac6a=a134_0x58cd38,_0x13f7d7=process[_0x51ac6a(0x118)][_0x51ac6a(0x10c)],_0x33ded7=path[_0x51ac6a(0x104)](os[_0x51ac6a(0x117)](),'failed_tests_'+_0x13f7d7+_0x51ac6a(0x11b));fs[_0x51ac6a(0x124)](_0x33ded7,_0x274e2f+'\x0a');}[a134_0x58cd38(0xf9)](_0x3fb7e1){const _0x11fab5=a134_0x58cd38,_0x12858d={};_0x12858d['CJajT']=function(_0x4cc700,_0x3a2383){return _0x4cc700||_0x3a2383;};const _0x1110bc=_0x12858d;return ABORT_BUILD_SUPPORTED_FRAMEWORKS[_0x11fab5(0x133)](_0x1110bc[_0x11fab5(0x112)](_0x3fb7e1,'')[_0x11fab5(0x12e)]());}[a134_0x58cd38(0xf8)](){const _0x4857d0=a134_0x58cd38,_0x45ba00=(this['config'][_0x4857d0(0x126)]||{})[ABORT_BUILD_ON_FAILURE]||{};return!!_0x45ba00[_0x4857d0(0x101)];}[a134_0x58cd38(0x12f)](){const _0x17bf20=a134_0x58cd38,_0x3b8025=(this['config'][_0x17bf20(0x126)]||{})[ABORT_BUILD_ON_FAILURE]||{};return _0x3b8025['maxFailures']||0x5;;}[a134_0x58cd38(0x120)](){const _0x3fe422=a134_0x58cd38;return this[_0x3fe422(0x12d)];}[a134_0x58cd38(0x102)](_0x3b7fc1){const _0x52fd9e=a134_0x58cd38;this[_0x52fd9e(0x12d)]=!!_0x3b7fc1,this[_0x52fd9e(0xff)]();}['getRerunPreviouslyFailed'](){const _0x2753f2=a134_0x58cd38;return this[_0x2753f2(0x134)];}[a134_0x58cd38(0x107)](_0x427b57){const _0x3f444f=a134_0x58cd38;this[_0x3f444f(0x134)]=!!_0x427b57,this[_0x3f444f(0xff)]();}[a134_0x58cd38(0x106)](){const _0xa1162d=a134_0x58cd38;return this[_0xa1162d(0x108)];}[a134_0x58cd38(0xfe)](_0x14a7a4){const _0x44ef56=a134_0x58cd38;this['skipFlakyAndFailed']=!!_0x14a7a4,this[_0x44ef56(0xff)]();}[a134_0x58cd38(0xff)](){const _0x382ec2=a134_0x58cd38;if(this[_0x382ec2(0x12d)])this[_0x382ec2(0x134)]=![],this[_0x382ec2(0x108)]=![],this[_0x382ec2(0x11e)][_0x382ec2(0xfb)](RUN_PREVIOUSLY_FAILED_FIRST);else{if(this['rerunPreviouslyFailed'])this[_0x382ec2(0x12d)]=![],this[_0x382ec2(0x108)]=![],this['testOrdering']['enable'](RERUN_PREVIOUSLY_FAILED);else this[_0x382ec2(0x108)]?(this[_0x382ec2(0x12d)]=![],this['rerunPreviouslyFailed']=![],this[_0x382ec2(0x11e)]['enable'](SKIP_FLAKY_AND_FAILED)):this['testOrdering'][_0x382ec2(0x11f)]();}}[a134_0x58cd38(0x11c)](){const _0x3ebc3a=a134_0x58cd38;return this[_0x3ebc3a(0x11e)][_0x3ebc3a(0x12a)]();}[a134_0x58cd38(0x115)](){const _0x4eb8ef=a134_0x58cd38;if(this['testOrdering'][_0x4eb8ef(0x12a)]())return this[_0x4eb8ef(0x11e)][_0x4eb8ef(0x110)]();return null;}[a134_0x58cd38(0x122)](){const _0x3996a7=a134_0x58cd38,_0x5015d7={};return _0x5015d7[_0x3996a7(0x131)]={'enabled':this[_0x3996a7(0x12c)]()},_0x5015d7['run_previously_failed_first']={'enabled':this['getRunPreviouslyFailedFirst']()},_0x5015d7[_0x3996a7(0x10a)]={'enabled':this[_0x3996a7(0x106)]()},this[_0x3996a7(0xf5)]()&&(_0x5015d7[_0x3996a7(0x125)]={'enabled':!![],'max_retries':this['getRetryCount']()}),this['isAbortBuildOnFailureEnabled']()&&(_0x5015d7[_0x3996a7(0x113)]={'enabled':!![],'max_failures':this[_0x3996a7(0x12f)]()}),_0x5015d7;}}module['exports']=OrchestrationUtils;