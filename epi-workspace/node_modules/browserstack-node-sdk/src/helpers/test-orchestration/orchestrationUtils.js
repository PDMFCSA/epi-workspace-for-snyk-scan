const a121_0xed7a99=a121_0x38a5;function a121_0x2022(){const _0x5a5831=['129588mfaoEI','maxFailures','toLowerCase','name','testOrderingEnabled','getEnabled','skip_failing_and_flaky','_instance','getTestOrderingName','getOrchestrationData','5FPBLiY','run_previously_failed_first','1063212JRugEi','abort_build_on_failure','rerun_previously_failed','tmpdir','abort_build_','config','checkAbortBuildFileExists','failed_tests_','exports','enable','1419372SVCTiq','testOrdering','10712790ygeSSq','5544mCEZqt','_setSkipFlakyAndFailed','retryTestsOnFailure','_setRerunPreviouslyFailed','enabled','1024NgCobY','BROWSERSTACK_TESTHUB_UUID','2170091awjqnP','getSkipFlakyAndFailed','_setRunPreviouslyFailedFirst','getName','LEZTf','.txt','writeFailureToFile','runPreviouslyFailedFirst','getRunPreviouslyFailedFirst','env','getRerunPreviouslyFailed','testOrchestrationOptions','jest','join','disable','isRetryEnabled','_setTestOrdering','skipFlakyAndFailed','existsSync','5JHwCZh','445251GTHYox','rerunPreviouslyFailed','getRetryCount'];a121_0x2022=function(){return _0x5a5831;};return a121_0x2022();}function a121_0x38a5(_0x139e23,_0x20f28e){const _0x2022e3=a121_0x2022();return a121_0x38a5=function(_0x38a510,_0x437758){_0x38a510=_0x38a510-0xd9;let _0x831492=_0x2022e3[_0x38a510];return _0x831492;},a121_0x38a5(_0x139e23,_0x20f28e);}(function(_0x2039dd,_0xa36d40){const _0x384bf0=a121_0x38a5,_0x37f44d=_0x2039dd();while(!![]){try{const _0x413a51=parseInt(_0x384bf0(0xff))/0x1*(-parseInt(_0x384bf0(0xf5))/0x2)+parseInt(_0x384bf0(0xf2))/0x3+-parseInt(_0x384bf0(0x101))/0x4+parseInt(_0x384bf0(0xf1))/0x5*(-parseInt(_0x384bf0(0x10b))/0x6)+-parseInt(_0x384bf0(0xde))/0x7+-parseInt(_0x384bf0(0xdc))/0x8*(-parseInt(_0x384bf0(0x10e))/0x9)+parseInt(_0x384bf0(0x10d))/0xa;if(_0x413a51===_0xa36d40)break;else _0x37f44d['push'](_0x37f44d['shift']());}catch(_0x582522){_0x37f44d['push'](_0x37f44d['shift']());}}}(a121_0x2022,0x27994));const os=require('os'),path=require('path'),fs=require('fs'),logger=require('../logger')['winstonLogger'],RETRY_TESTS_ON_FAILURE=a121_0xed7a99(0xd9),ABORT_BUILD_ON_FAILURE='abortBuildOnFailure',RUN_PREVIOUSLY_FAILED_FIRST=a121_0xed7a99(0xe5),RERUN_PREVIOUSLY_FAILED='rerunPreviouslyFailed',SKIP_FLAKY_AND_FAILED='skipFlakyandFailed',ALLOWED_ORCHESTRATION_KEYS=new Set([RETRY_TESTS_ON_FAILURE,ABORT_BUILD_ON_FAILURE,RUN_PREVIOUSLY_FAILED_FIRST,RERUN_PREVIOUSLY_FAILED,SKIP_FLAKY_AND_FAILED]),ABORT_BUILD_SUPPORTED_FRAMEWORKS=new Set([a121_0xed7a99(0xea)]);class TestOrdering{constructor(){const _0x4f83c4=a121_0xed7a99;this[_0x4f83c4(0xdb)]=![],this[_0x4f83c4(0xf8)]=null;}[a121_0xed7a99(0x10a)](_0x10015b){const _0x4249ae=a121_0xed7a99;this['enabled']=!![],this[_0x4249ae(0xf8)]=_0x10015b;}[a121_0xed7a99(0xec)](){const _0x38f50b=a121_0xed7a99;this[_0x38f50b(0xdb)]=![],this['name']=null;}[a121_0xed7a99(0xfa)](){const _0x152557=a121_0xed7a99;return this[_0x152557(0xdb)];}[a121_0xed7a99(0xe1)](){const _0x477d6f=a121_0xed7a99;return this[_0x477d6f(0xf8)];}}class OrchestrationUtils{static ['_instance']=null;constructor(_0x52cfa5){const _0x49f170=a121_0xed7a99,_0x55993b={};_0x55993b['lXprZ']=function(_0x332e97,_0x3d8882){return _0x332e97||_0x3d8882;};const _0x124577=_0x55993b;this[_0x49f170(0xe5)]=![],this['rerunPreviouslyFailed']=![],this[_0x49f170(0xef)]=![],this[_0x49f170(0x10c)]=new TestOrdering(),this[_0x49f170(0x106)]=_0x124577['lXprZ'](_0x52cfa5,{});const _0x3702de=_0x52cfa5&&_0x52cfa5[_0x49f170(0xe9)]||{};this['_setRunPreviouslyFailedFirst'](_0x3702de[RUN_PREVIOUSLY_FAILED_FIRST]||![]),this['_setRerunPreviouslyFailed'](_0x3702de[RERUN_PREVIOUSLY_FAILED]||![]),this[_0x49f170(0x10f)](_0x3702de[SKIP_FLAKY_AND_FAILED]||![]);}static['getInstance'](_0x3f71ff){const _0x5e2883=a121_0xed7a99;return!OrchestrationUtils[_0x5e2883(0xfc)]&&_0x3f71ff&&(OrchestrationUtils[_0x5e2883(0xfc)]=new OrchestrationUtils(_0x3f71ff)),OrchestrationUtils[_0x5e2883(0xfc)];}[a121_0xed7a99(0xed)](){const _0x400cb7=a121_0xed7a99,_0x19a904=(this['config']['testOrchestrationOptions']||{})[RETRY_TESTS_ON_FAILURE]||{};return!!_0x19a904[_0x400cb7(0xdb)];}[a121_0xed7a99(0xf4)](){const _0x3e8d01=a121_0xed7a99,_0x378214=(this[_0x3e8d01(0x106)][_0x3e8d01(0xe9)]||{})[RETRY_TESTS_ON_FAILURE]||{};let _0x456579=0x0;return this['isRetryEnabled'](this[_0x3e8d01(0x106)])&&(_0x456579=_0x378214['maxRetries']||0x1),_0x456579;}[a121_0xed7a99(0xfe)](){const _0xf9ebbd=a121_0xed7a99,_0x4a6832=this[_0xf9ebbd(0x106)][_0xf9ebbd(0xe9)]||{},_0x17683a={};for(const _0x3d54ef in _0x4a6832){ALLOWED_ORCHESTRATION_KEYS['has'](_0x3d54ef)&&(_0x17683a[_0x3d54ef]=_0x4a6832[_0x3d54ef]);}return _0x17683a;}[a121_0xed7a99(0x107)](){const _0x1e0acd=a121_0xed7a99,_0x5362d7=process[_0x1e0acd(0xe7)][_0x1e0acd(0xdd)],_0x4e7923=path[_0x1e0acd(0xeb)](os[_0x1e0acd(0x104)](),_0x1e0acd(0x105)+_0x5362d7);return fs[_0x1e0acd(0xf0)](_0x4e7923);}[a121_0xed7a99(0xe4)](_0x18edd6){const _0x5933c3=a121_0xed7a99,_0x24f64d=process[_0x5933c3(0xe7)][_0x5933c3(0xdd)],_0x3687f4=path[_0x5933c3(0xeb)](os[_0x5933c3(0x104)](),_0x5933c3(0x108)+_0x24f64d+_0x5933c3(0xe3));fs['appendFileSync'](_0x3687f4,_0x18edd6+'\x0a');}['isAbortBuildOnFailureSupported'](_0x3f3891){const _0x5909a8=a121_0xed7a99,_0x555aec={};_0x555aec['LEZTf']=function(_0x2f6575,_0x20ccd7){return _0x2f6575||_0x20ccd7;};const _0x14f4f1=_0x555aec;return ABORT_BUILD_SUPPORTED_FRAMEWORKS['has'](_0x14f4f1[_0x5909a8(0xe2)](_0x3f3891,'')[_0x5909a8(0xf7)]());}['isAbortBuildOnFailureEnabled'](){const _0xf7ae8=a121_0xed7a99,_0x53b6dc=(this[_0xf7ae8(0x106)][_0xf7ae8(0xe9)]||{})[ABORT_BUILD_ON_FAILURE]||{};return!!_0x53b6dc[_0xf7ae8(0xdb)];}['getFailureThreshold'](){const _0x2a6877=a121_0xed7a99,_0x318463=(this[_0x2a6877(0x106)][_0x2a6877(0xe9)]||{})[ABORT_BUILD_ON_FAILURE]||{};return _0x318463[_0x2a6877(0xf6)]||0x5;;}[a121_0xed7a99(0xe6)](){const _0x38c9c1=a121_0xed7a99;return this[_0x38c9c1(0xe5)];}[a121_0xed7a99(0xe0)](_0x473376){const _0xb7379f=a121_0xed7a99;this[_0xb7379f(0xe5)]=!!_0x473376,this[_0xb7379f(0xee)]();}[a121_0xed7a99(0xe8)](){return this['rerunPreviouslyFailed'];}[a121_0xed7a99(0xda)](_0x5eb165){const _0x406469=a121_0xed7a99;this[_0x406469(0xf3)]=!!_0x5eb165,this['_setTestOrdering']();}[a121_0xed7a99(0xdf)](){const _0x251325=a121_0xed7a99;return this[_0x251325(0xef)];}[a121_0xed7a99(0x10f)](_0x675818){const _0x2aaf3a=a121_0xed7a99;this[_0x2aaf3a(0xef)]=!!_0x675818,this['_setTestOrdering']();}['_setTestOrdering'](){const _0x27a6b2=a121_0xed7a99;if(this[_0x27a6b2(0xe5)])this[_0x27a6b2(0xf3)]=![],this[_0x27a6b2(0xef)]=![],this[_0x27a6b2(0x10c)][_0x27a6b2(0x10a)](RUN_PREVIOUSLY_FAILED_FIRST);else{if(this['rerunPreviouslyFailed'])this[_0x27a6b2(0xe5)]=![],this[_0x27a6b2(0xef)]=![],this[_0x27a6b2(0x10c)][_0x27a6b2(0x10a)](RERUN_PREVIOUSLY_FAILED);else this['skipFlakyAndFailed']?(this[_0x27a6b2(0xe5)]=![],this[_0x27a6b2(0xf3)]=![],this[_0x27a6b2(0x10c)]['enable'](SKIP_FLAKY_AND_FAILED)):this[_0x27a6b2(0x10c)]['disable']();}}[a121_0xed7a99(0xf9)](){const _0x51c3fc=a121_0xed7a99;return this[_0x51c3fc(0x10c)][_0x51c3fc(0xfa)]();}[a121_0xed7a99(0xfd)](){const _0x413c2d=a121_0xed7a99;if(this['testOrdering'][_0x413c2d(0xfa)]())return this['testOrdering'][_0x413c2d(0xe1)]();return null;}['getBuildStartData'](){const _0x257acf=a121_0xed7a99,_0x2370ef={};return _0x2370ef[_0x257acf(0x103)]={'enabled':this['getRerunPreviouslyFailed']()},_0x2370ef[_0x257acf(0x100)]={'enabled':this[_0x257acf(0xe6)]()},_0x2370ef[_0x257acf(0xfb)]={'enabled':this[_0x257acf(0xdf)]()},this[_0x257acf(0xed)]()&&(_0x2370ef['retry_tests_on_failure']={'enabled':!![],'max_retries':this['getRetryCount']()}),this['isAbortBuildOnFailureEnabled']()&&(_0x2370ef[_0x257acf(0x102)]={'enabled':!![],'max_failures':this['getFailureThreshold']()}),_0x2370ef;}}module[a121_0xed7a99(0x109)]=OrchestrationUtils;