const a124_0x49e9f3=a124_0x27a2;function a124_0x3636(){const _0x4f2d2b=['config','93978DYHvFq','appendFileSync','_instance','winstonLogger','retry_tests_on_failure','tmpdir','retryTestsOnFailure','../logger','2278520DftKCJ','jest','rerunPreviouslyFailed','getInstance','abort_build_on_failure','getBuildStartData','skipFlakyAndFailed','794618KBtfZF','3909530sObcKf','toLowerCase','existsSync','testOrdering','_setSkipFlakyAndFailed','14gugWtC','getRetryCount','1380012yWhOiI','isRetryEnabled','BROWSERSTACK_TESTHUB_UUID','.txt','testOrderingEnabled','getName','getOrchestrationData','name','failed_tests_','runPreviouslyFailedFirst','1474776ZziQzk','_setRerunPreviouslyFailed','join','getTestOrderingName','writeFailureToFile','run_previously_failed_first','getEnabled','isAbortBuildOnFailureSupported','skipFlakyandFailed','844292ZDwhGM','getRerunPreviouslyFailed','rerun_previously_failed','maxRetries','getFailureThreshold','path','_setRunPreviouslyFailedFirst','testOrchestrationOptions','isAbortBuildOnFailureEnabled','disable','QMVAk','getSkipFlakyAndFailed','abort_build_','_setTestOrdering','enable','enabled','has','9SCwtBi'];a124_0x3636=function(){return _0x4f2d2b;};return a124_0x3636();}(function(_0x179803,_0x10eb73){const _0x599719=a124_0x27a2,_0x17bfe3=_0x179803();while(!![]){try{const _0x46c2db=parseInt(_0x599719(0x185))/0x1+parseInt(_0x599719(0x1a0))/0x2*(parseInt(_0x599719(0x1b1))/0x3)+-parseInt(_0x599719(0x197))/0x4+-parseInt(_0x599719(0x186))/0x5+-parseInt(_0x599719(0x18d))/0x6*(parseInt(_0x599719(0x18b))/0x7)+parseInt(_0x599719(0x17e))/0x8+parseInt(_0x599719(0x1b3))/0x9;if(_0x46c2db===_0x10eb73)break;else _0x17bfe3['push'](_0x17bfe3['shift']());}catch(_0x64e9df){_0x17bfe3['push'](_0x17bfe3['shift']());}}}(a124_0x3636,0xb60ed));const os=require('os'),path=require(a124_0x49e9f3(0x1a5)),fs=require('fs'),logger=require(a124_0x49e9f3(0x17d))[a124_0x49e9f3(0x179)],RETRY_TESTS_ON_FAILURE=a124_0x49e9f3(0x17c),ABORT_BUILD_ON_FAILURE='abortBuildOnFailure',RUN_PREVIOUSLY_FAILED_FIRST=a124_0x49e9f3(0x196),RERUN_PREVIOUSLY_FAILED='rerunPreviouslyFailed',SKIP_FLAKY_AND_FAILED=a124_0x49e9f3(0x19f),ALLOWED_ORCHESTRATION_KEYS=new Set([RETRY_TESTS_ON_FAILURE,ABORT_BUILD_ON_FAILURE,RUN_PREVIOUSLY_FAILED_FIRST,RERUN_PREVIOUSLY_FAILED,SKIP_FLAKY_AND_FAILED]),ABORT_BUILD_SUPPORTED_FRAMEWORKS=new Set([a124_0x49e9f3(0x17f)]);class TestOrdering{constructor(){const _0x326596=a124_0x49e9f3;this[_0x326596(0x1af)]=![],this[_0x326596(0x194)]=null;}[a124_0x49e9f3(0x1ae)](_0xe6bb43){const _0x1a9c1b=a124_0x49e9f3;this[_0x1a9c1b(0x1af)]=!![],this[_0x1a9c1b(0x194)]=_0xe6bb43;}[a124_0x49e9f3(0x1a9)](){const _0x944ff5=a124_0x49e9f3;this[_0x944ff5(0x1af)]=![],this[_0x944ff5(0x194)]=null;}[a124_0x49e9f3(0x19d)](){const _0x2cf103=a124_0x49e9f3;return this[_0x2cf103(0x1af)];}[a124_0x49e9f3(0x192)](){const _0x3860f3=a124_0x49e9f3;return this[_0x3860f3(0x194)];}}class OrchestrationUtils{static ['_instance']=null;constructor(_0x51abe2){const _0x5b5d4f=a124_0x49e9f3,_0x1de881={};_0x1de881[_0x5b5d4f(0x1aa)]=function(_0x414c76,_0x4078c7){return _0x414c76||_0x4078c7;};const _0x1837fe=_0x1de881;this[_0x5b5d4f(0x196)]=![],this[_0x5b5d4f(0x180)]=![],this[_0x5b5d4f(0x184)]=![],this[_0x5b5d4f(0x189)]=new TestOrdering(),this[_0x5b5d4f(0x1b2)]=_0x1837fe['QMVAk'](_0x51abe2,{});const _0x5313fe=_0x51abe2&&_0x51abe2['testOrchestrationOptions']||{};this[_0x5b5d4f(0x1a6)](_0x5313fe[RUN_PREVIOUSLY_FAILED_FIRST]||![]),this[_0x5b5d4f(0x198)](_0x5313fe[RERUN_PREVIOUSLY_FAILED]||![]),this[_0x5b5d4f(0x18a)](_0x5313fe[SKIP_FLAKY_AND_FAILED]||![]);}static[a124_0x49e9f3(0x181)](_0x4007ea){const _0x15d2dd=a124_0x49e9f3;return!OrchestrationUtils[_0x15d2dd(0x178)]&&_0x4007ea&&(OrchestrationUtils['_instance']=new OrchestrationUtils(_0x4007ea)),OrchestrationUtils['_instance'];}[a124_0x49e9f3(0x18e)](){const _0x2fa40b=a124_0x49e9f3,_0x4aac73=(this[_0x2fa40b(0x1b2)][_0x2fa40b(0x1a7)]||{})[RETRY_TESTS_ON_FAILURE]||{};return!!_0x4aac73[_0x2fa40b(0x1af)];}[a124_0x49e9f3(0x18c)](){const _0x5ac26d=a124_0x49e9f3,_0x5b6059=(this[_0x5ac26d(0x1b2)][_0x5ac26d(0x1a7)]||{})[RETRY_TESTS_ON_FAILURE]||{};let _0x36351a=0x0;return this[_0x5ac26d(0x18e)](this['config'])&&(_0x36351a=_0x5b6059[_0x5ac26d(0x1a3)]||0x1),_0x36351a;}[a124_0x49e9f3(0x193)](){const _0x37c5d6=a124_0x49e9f3,_0x513f2f=this[_0x37c5d6(0x1b2)][_0x37c5d6(0x1a7)]||{},_0x4a35af={};for(const _0x248ff1 in _0x513f2f){ALLOWED_ORCHESTRATION_KEYS['has'](_0x248ff1)&&(_0x4a35af[_0x248ff1]=_0x513f2f[_0x248ff1]);}return _0x4a35af;}['checkAbortBuildFileExists'](){const _0x4e5824=a124_0x49e9f3,_0x57919c=process['env'][_0x4e5824(0x18f)],_0x4e8143=path[_0x4e5824(0x199)](os[_0x4e5824(0x17b)](),_0x4e5824(0x1ac)+_0x57919c);return fs[_0x4e5824(0x188)](_0x4e8143);}[a124_0x49e9f3(0x19b)](_0x4ad497){const _0x3fee5e=a124_0x49e9f3,_0x942500=process['env']['BROWSERSTACK_TESTHUB_UUID'],_0x5c35cb=path[_0x3fee5e(0x199)](os['tmpdir'](),_0x3fee5e(0x195)+_0x942500+_0x3fee5e(0x190));fs[_0x3fee5e(0x177)](_0x5c35cb,_0x4ad497+'\x0a');}[a124_0x49e9f3(0x19e)](_0x203ef1){const _0x5a6163=a124_0x49e9f3,_0x41cfda={};_0x41cfda['PLrlZ']=function(_0x444236,_0x36358e){return _0x444236||_0x36358e;};const _0x4cf402=_0x41cfda;return ABORT_BUILD_SUPPORTED_FRAMEWORKS[_0x5a6163(0x1b0)](_0x4cf402['PLrlZ'](_0x203ef1,'')[_0x5a6163(0x187)]());}[a124_0x49e9f3(0x1a8)](){const _0x2189bb=a124_0x49e9f3,_0x5dbdbd=(this[_0x2189bb(0x1b2)][_0x2189bb(0x1a7)]||{})[ABORT_BUILD_ON_FAILURE]||{};return!!_0x5dbdbd[_0x2189bb(0x1af)];}['getFailureThreshold'](){const _0x3b65bc=a124_0x49e9f3,_0xddf6d3=(this[_0x3b65bc(0x1b2)][_0x3b65bc(0x1a7)]||{})[ABORT_BUILD_ON_FAILURE]||{};return _0xddf6d3['maxFailures']||0x5;;}['getRunPreviouslyFailedFirst'](){const _0x450c30=a124_0x49e9f3;return this[_0x450c30(0x196)];}[a124_0x49e9f3(0x1a6)](_0x4e4cde){const _0x1748cd=a124_0x49e9f3;this[_0x1748cd(0x196)]=!!_0x4e4cde,this[_0x1748cd(0x1ad)]();}[a124_0x49e9f3(0x1a1)](){const _0x1b2636=a124_0x49e9f3;return this[_0x1b2636(0x180)];}['_setRerunPreviouslyFailed'](_0x2f58df){const _0x1b3552=a124_0x49e9f3;this[_0x1b3552(0x180)]=!!_0x2f58df,this[_0x1b3552(0x1ad)]();}[a124_0x49e9f3(0x1ab)](){const _0x2d6a59=a124_0x49e9f3;return this[_0x2d6a59(0x184)];}[a124_0x49e9f3(0x18a)](_0xbc5ae){const _0x3ff49c=a124_0x49e9f3;this[_0x3ff49c(0x184)]=!!_0xbc5ae,this['_setTestOrdering']();}[a124_0x49e9f3(0x1ad)](){const _0x30d9bb=a124_0x49e9f3;if(this['runPreviouslyFailedFirst'])this['rerunPreviouslyFailed']=![],this['skipFlakyAndFailed']=![],this[_0x30d9bb(0x189)][_0x30d9bb(0x1ae)](RUN_PREVIOUSLY_FAILED_FIRST);else{if(this['rerunPreviouslyFailed'])this[_0x30d9bb(0x196)]=![],this[_0x30d9bb(0x184)]=![],this['testOrdering'][_0x30d9bb(0x1ae)](RERUN_PREVIOUSLY_FAILED);else this[_0x30d9bb(0x184)]?(this['runPreviouslyFailedFirst']=![],this[_0x30d9bb(0x180)]=![],this['testOrdering'][_0x30d9bb(0x1ae)](SKIP_FLAKY_AND_FAILED)):this[_0x30d9bb(0x189)]['disable']();}}[a124_0x49e9f3(0x191)](){const _0x290d7d=a124_0x49e9f3;return this[_0x290d7d(0x189)][_0x290d7d(0x19d)]();}[a124_0x49e9f3(0x19a)](){const _0x13fda0=a124_0x49e9f3;if(this['testOrdering']['getEnabled']())return this[_0x13fda0(0x189)][_0x13fda0(0x192)]();return null;}[a124_0x49e9f3(0x183)](){const _0x21a9a9=a124_0x49e9f3,_0x5a4208={};return _0x5a4208[_0x21a9a9(0x1a2)]={'enabled':this['getRerunPreviouslyFailed']()},_0x5a4208[_0x21a9a9(0x19c)]={'enabled':this['getRunPreviouslyFailedFirst']()},_0x5a4208['skip_failing_and_flaky']={'enabled':this[_0x21a9a9(0x1ab)]()},this[_0x21a9a9(0x18e)]()&&(_0x5a4208[_0x21a9a9(0x17a)]={'enabled':!![],'max_retries':this[_0x21a9a9(0x18c)]()}),this[_0x21a9a9(0x1a8)]()&&(_0x5a4208[_0x21a9a9(0x182)]={'enabled':!![],'max_failures':this[_0x21a9a9(0x1a4)]()}),_0x5a4208;}}function a124_0x27a2(_0xf8c360,_0x5b0e28){const _0x36363e=a124_0x3636();return a124_0x27a2=function(_0x27a20f,_0x83fd8e){_0x27a20f=_0x27a20f-0x177;let _0x221b8d=_0x36363e[_0x27a20f];return _0x221b8d;},a124_0x27a2(_0xf8c360,_0x5b0e28);}module['exports']=OrchestrationUtils;