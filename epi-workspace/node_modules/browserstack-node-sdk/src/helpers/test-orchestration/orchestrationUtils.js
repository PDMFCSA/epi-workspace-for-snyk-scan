const a121_0x13ea2d=a121_0x76f8;(function(_0x59ae7d,_0x237c7d){const _0x5d237b=a121_0x76f8,_0x5a187d=_0x59ae7d();while(!![]){try{const _0x5d15ae=parseInt(_0x5d237b(0xf8))/0x1*(-parseInt(_0x5d237b(0xf1))/0x2)+-parseInt(_0x5d237b(0x109))/0x3+-parseInt(_0x5d237b(0xeb))/0x4*(parseInt(_0x5d237b(0xed))/0x5)+parseInt(_0x5d237b(0xf6))/0x6+parseInt(_0x5d237b(0xfa))/0x7*(parseInt(_0x5d237b(0x10e))/0x8)+-parseInt(_0x5d237b(0xec))/0x9*(-parseInt(_0x5d237b(0xf0))/0xa)+parseInt(_0x5d237b(0xda))/0xb;if(_0x5d15ae===_0x237c7d)break;else _0x5a187d['push'](_0x5a187d['shift']());}catch(_0x318acf){_0x5a187d['push'](_0x5a187d['shift']());}}}(a121_0xda4b,0xad7ab));function a121_0xda4b(){const _0x4f7e36=['isAbortBuildOnFailureEnabled','enable','2006148VBdBKZ','_instance','abort_build_on_failure','toLowerCase','getRunPreviouslyFailedFirst','16qNgjdY','retryTestsOnFailure','rerunPreviouslyFailed','has','getFailureThreshold','abort_build_','config','name','13118710lvguSU','enabled','getName','runPreviouslyFailedFirst','writeFailureToFile','getTestOrderingName','checkAbortBuildFileExists','maxRetries','isRetryEnabled','path','skip_failing_and_flaky','failed_tests_','existsSync','getRerunPreviouslyFailed','disable','_setSkipFlakyAndFailed','_setRunPreviouslyFailedFirst','532aeWtDT','9TVgbdu','39510UFfaIT','getEnabled','retry_tests_on_failure','7693370FeKMhs','64FpQiVn','_setRerunPreviouslyFailed','abortBuildOnFailure','sNhsc','../logger','7408008zAfcqN','getBuildStartData','24954vZNPMJ','testOrchestrationOptions','112581wXKIAL','isAbortBuildOnFailureSupported','join','getInstance','winstonLogger','tmpdir','skipFlakyAndFailed','skipFlakyandFailed','_setTestOrdering','testOrderingEnabled','.txt','jest','testOrdering'];a121_0xda4b=function(){return _0x4f7e36;};return a121_0xda4b();}const os=require('os'),path=require(a121_0x13ea2d(0xe3)),fs=require('fs'),logger=require(a121_0x13ea2d(0xf5))[a121_0x13ea2d(0xfe)],RETRY_TESTS_ON_FAILURE=a121_0x13ea2d(0x10f),ABORT_BUILD_ON_FAILURE=a121_0x13ea2d(0xf3),RUN_PREVIOUSLY_FAILED_FIRST=a121_0x13ea2d(0xdd),RERUN_PREVIOUSLY_FAILED='rerunPreviouslyFailed',SKIP_FLAKY_AND_FAILED=a121_0x13ea2d(0x101),ALLOWED_ORCHESTRATION_KEYS=new Set([RETRY_TESTS_ON_FAILURE,ABORT_BUILD_ON_FAILURE,RUN_PREVIOUSLY_FAILED_FIRST,RERUN_PREVIOUSLY_FAILED,SKIP_FLAKY_AND_FAILED]),ABORT_BUILD_SUPPORTED_FRAMEWORKS=new Set([a121_0x13ea2d(0x105)]);class TestOrdering{constructor(){const _0xb168df=a121_0x13ea2d;this[_0xb168df(0xdb)]=![],this[_0xb168df(0xd9)]=null;}[a121_0x13ea2d(0x108)](_0x326bc4){this['enabled']=!![],this['name']=_0x326bc4;}['disable'](){const _0x463437=a121_0x13ea2d;this[_0x463437(0xdb)]=![],this[_0x463437(0xd9)]=null;}[a121_0x13ea2d(0xee)](){return this['enabled'];}[a121_0x13ea2d(0xdc)](){return this['name'];}}class OrchestrationUtils{static ['_instance']=null;constructor(_0x1b1902){const _0x18adf8=a121_0x13ea2d,_0x2a8966={};_0x2a8966[_0x18adf8(0xf4)]=function(_0x5914e0,_0x3b47d0){return _0x5914e0||_0x3b47d0;};const _0x372971=_0x2a8966;this[_0x18adf8(0xdd)]=![],this[_0x18adf8(0x110)]=![],this['skipFlakyAndFailed']=![],this[_0x18adf8(0x106)]=new TestOrdering(),this['config']=_0x372971[_0x18adf8(0xf4)](_0x1b1902,{});const _0x1eaccc=_0x1b1902&&_0x1b1902[_0x18adf8(0xf9)]||{};this[_0x18adf8(0xea)](_0x1eaccc[RUN_PREVIOUSLY_FAILED_FIRST]||![]),this[_0x18adf8(0xf2)](_0x1eaccc[RERUN_PREVIOUSLY_FAILED]||![]),this[_0x18adf8(0xe9)](_0x1eaccc[SKIP_FLAKY_AND_FAILED]||![]);}static[a121_0x13ea2d(0xfd)](_0x43a9bf){const _0x35cdd5=a121_0x13ea2d;return!OrchestrationUtils[_0x35cdd5(0x10a)]&&_0x43a9bf&&(OrchestrationUtils[_0x35cdd5(0x10a)]=new OrchestrationUtils(_0x43a9bf)),OrchestrationUtils[_0x35cdd5(0x10a)];}[a121_0x13ea2d(0xe2)](){const _0x7101db=a121_0x13ea2d,_0x2b68a5=(this[_0x7101db(0xd8)]['testOrchestrationOptions']||{})[RETRY_TESTS_ON_FAILURE]||{};return!!_0x2b68a5[_0x7101db(0xdb)];}['getRetryCount'](){const _0x55f3b6=a121_0x13ea2d,_0x1506d2=(this[_0x55f3b6(0xd8)][_0x55f3b6(0xf9)]||{})[RETRY_TESTS_ON_FAILURE]||{};let _0x23d925=0x0;return this[_0x55f3b6(0xe2)](this[_0x55f3b6(0xd8)])&&(_0x23d925=_0x1506d2[_0x55f3b6(0xe1)]||0x1),_0x23d925;}['getOrchestrationData'](){const _0x12b06f=a121_0x13ea2d,_0x2eee30=this['config'][_0x12b06f(0xf9)]||{},_0x56c799={};for(const _0x367a95 in _0x2eee30){ALLOWED_ORCHESTRATION_KEYS[_0x12b06f(0x111)](_0x367a95)&&(_0x56c799[_0x367a95]=_0x2eee30[_0x367a95]);}return _0x56c799;}[a121_0x13ea2d(0xe0)](){const _0x425c10=a121_0x13ea2d,_0x6ad2c7=process['env']['BROWSERSTACK_TESTHUB_UUID'],_0x40d8c1=path['join'](os['tmpdir'](),_0x425c10(0x113)+_0x6ad2c7);return fs[_0x425c10(0xe6)](_0x40d8c1);}[a121_0x13ea2d(0xde)](_0x17adc6){const _0x51260c=a121_0x13ea2d,_0x3fc093=process['env']['BROWSERSTACK_TESTHUB_UUID'],_0x69e6d8=path[_0x51260c(0xfc)](os[_0x51260c(0xff)](),_0x51260c(0xe5)+_0x3fc093+_0x51260c(0x104));fs['appendFileSync'](_0x69e6d8,_0x17adc6+'\x0a');}[a121_0x13ea2d(0xfb)](_0x5e3f36){const _0x436431=a121_0x13ea2d,_0x382242={};_0x382242['aqzmc']=function(_0x4818f8,_0x21883c){return _0x4818f8||_0x21883c;};const _0x144820=_0x382242;return ABORT_BUILD_SUPPORTED_FRAMEWORKS['has'](_0x144820['aqzmc'](_0x5e3f36,'')[_0x436431(0x10c)]());}['isAbortBuildOnFailureEnabled'](){const _0x128e5f=a121_0x13ea2d,_0x5cf1d5=(this[_0x128e5f(0xd8)][_0x128e5f(0xf9)]||{})[ABORT_BUILD_ON_FAILURE]||{};return!!_0x5cf1d5[_0x128e5f(0xdb)];}['getFailureThreshold'](){const _0x27ef00=a121_0x13ea2d,_0x403f59=(this['config'][_0x27ef00(0xf9)]||{})[ABORT_BUILD_ON_FAILURE]||{};return _0x403f59['maxFailures']||0x5;;}[a121_0x13ea2d(0x10d)](){const _0x550fe2=a121_0x13ea2d;return this[_0x550fe2(0xdd)];}[a121_0x13ea2d(0xea)](_0xd869e7){const _0x47bc11=a121_0x13ea2d;this['runPreviouslyFailedFirst']=!!_0xd869e7,this[_0x47bc11(0x102)]();}['getRerunPreviouslyFailed'](){const _0xa815d1=a121_0x13ea2d;return this[_0xa815d1(0x110)];}['_setRerunPreviouslyFailed'](_0x5c4062){const _0x2e03a4=a121_0x13ea2d;this[_0x2e03a4(0x110)]=!!_0x5c4062,this[_0x2e03a4(0x102)]();}['getSkipFlakyAndFailed'](){const _0x2247f5=a121_0x13ea2d;return this[_0x2247f5(0x100)];}[a121_0x13ea2d(0xe9)](_0x203994){const _0x2570bb=a121_0x13ea2d;this['skipFlakyAndFailed']=!!_0x203994,this[_0x2570bb(0x102)]();}[a121_0x13ea2d(0x102)](){const _0x400bfe=a121_0x13ea2d;if(this['runPreviouslyFailedFirst'])this[_0x400bfe(0x110)]=![],this[_0x400bfe(0x100)]=![],this[_0x400bfe(0x106)][_0x400bfe(0x108)](RUN_PREVIOUSLY_FAILED_FIRST);else{if(this[_0x400bfe(0x110)])this[_0x400bfe(0xdd)]=![],this[_0x400bfe(0x100)]=![],this[_0x400bfe(0x106)]['enable'](RERUN_PREVIOUSLY_FAILED);else this[_0x400bfe(0x100)]?(this[_0x400bfe(0xdd)]=![],this[_0x400bfe(0x110)]=![],this[_0x400bfe(0x106)][_0x400bfe(0x108)](SKIP_FLAKY_AND_FAILED)):this[_0x400bfe(0x106)][_0x400bfe(0xe8)]();}}[a121_0x13ea2d(0x103)](){const _0x5a1426=a121_0x13ea2d;return this[_0x5a1426(0x106)][_0x5a1426(0xee)]();}[a121_0x13ea2d(0xdf)](){const _0x13fb9b=a121_0x13ea2d;if(this[_0x13fb9b(0x106)][_0x13fb9b(0xee)]())return this['testOrdering'][_0x13fb9b(0xdc)]();return null;}[a121_0x13ea2d(0xf7)](){const _0x52ff5a=a121_0x13ea2d,_0x52faad={};return _0x52faad['rerun_previously_failed']={'enabled':this[_0x52ff5a(0xe7)]()},_0x52faad['run_previously_failed_first']={'enabled':this[_0x52ff5a(0x10d)]()},_0x52faad[_0x52ff5a(0xe4)]={'enabled':this['getSkipFlakyAndFailed']()},this[_0x52ff5a(0xe2)]()&&(_0x52faad[_0x52ff5a(0xef)]={'enabled':!![],'max_retries':this['getRetryCount']()}),this[_0x52ff5a(0x107)]()&&(_0x52faad[_0x52ff5a(0x10b)]={'enabled':!![],'max_failures':this[_0x52ff5a(0x112)]()}),_0x52faad;}}function a121_0x76f8(_0x4ef430,_0x2ef351){const _0xda4bdd=a121_0xda4b();return a121_0x76f8=function(_0x76f861,_0x123a87){_0x76f861=_0x76f861-0xd8;let _0x2083a2=_0xda4bdd[_0x76f861];return _0x2083a2;},a121_0x76f8(_0x4ef430,_0x2ef351);}module['exports']=OrchestrationUtils;