const a134_0x573b7e=a134_0x231b;(function(_0x4060a7,_0x34f41a){const _0x69cc5=a134_0x231b,_0x1a0c31=_0x4060a7();while(!![]){try{const _0x5dfc3d=parseInt(_0x69cc5(0x7c))/0x1+parseInt(_0x69cc5(0xa7))/0x2*(parseInt(_0x69cc5(0xa2))/0x3)+-parseInt(_0x69cc5(0x89))/0x4+parseInt(_0x69cc5(0x7f))/0x5+parseInt(_0x69cc5(0x9c))/0x6*(parseInt(_0x69cc5(0x74))/0x7)+parseInt(_0x69cc5(0x9e))/0x8+-parseInt(_0x69cc5(0x77))/0x9*(parseInt(_0x69cc5(0x84))/0xa);if(_0x5dfc3d===_0x34f41a)break;else _0x1a0c31['push'](_0x1a0c31['shift']());}catch(_0x225fed){_0x1a0c31['push'](_0x1a0c31['shift']());}}}(a134_0x34db,0xb6080));function a134_0x34db(){const _0x5c0456=['_setTestOrdering','abort_build_','maxRetries','11808190inUwNy','skipFlakyAndFailed','config','jest','tmpdir','3701588ADgZNy','has','enabled','existsSync','enable','BROWSERSTACK_TESTHUB_UUID','getFailureThreshold','rerunPreviouslyFailed','retryTestsOnFailure','getBuildStartData','abortBuildOnFailure','getOrchestrationData','getRerunPreviouslyFailed','checkAbortBuildFileExists','getName','path','_instance','skipFlakyandFailed','name','3171738tjLDQs','_setRunPreviouslyFailedFirst','8004736VluEIQ','testOrdering','rLQZA','retry_tests_on_failure','1644cfPBct','join','testOrchestrationOptions','getRetryCount','failed_tests_','442xbMhkd','getTestOrderingName','abort_build_on_failure','writeFailureToFile','../logger','runPreviouslyFailedFirst','isRetryEnabled','disable','env','rerun_previously_failed','isAbortBuildOnFailureEnabled','7FZaPgQ','getRunPreviouslyFailedFirst','getEnabled','9mwbcuD','getSkipFlakyAndFailed','isAbortBuildOnFailureSupported','.txt','vtYPX','637340VjGoBd','skip_failing_and_flaky','getInstance','2820765KxjsBN','_setSkipFlakyAndFailed'];a134_0x34db=function(){return _0x5c0456;};return a134_0x34db();}const os=require('os'),path=require(a134_0x573b7e(0x98)),fs=require('fs'),logger=require(a134_0x573b7e(0xab))['winstonLogger'],RETRY_TESTS_ON_FAILURE=a134_0x573b7e(0x91),ABORT_BUILD_ON_FAILURE=a134_0x573b7e(0x93),RUN_PREVIOUSLY_FAILED_FIRST='runPreviouslyFailedFirst',RERUN_PREVIOUSLY_FAILED=a134_0x573b7e(0x90),SKIP_FLAKY_AND_FAILED=a134_0x573b7e(0x9a),ALLOWED_ORCHESTRATION_KEYS=new Set([RETRY_TESTS_ON_FAILURE,ABORT_BUILD_ON_FAILURE,RUN_PREVIOUSLY_FAILED_FIRST,RERUN_PREVIOUSLY_FAILED,SKIP_FLAKY_AND_FAILED]),ABORT_BUILD_SUPPORTED_FRAMEWORKS=new Set([a134_0x573b7e(0x87)]);class TestOrdering{constructor(){const _0x2b6211=a134_0x573b7e;this[_0x2b6211(0x8b)]=![],this[_0x2b6211(0x9b)]=null;}[a134_0x573b7e(0x8d)](_0x2c6f9b){const _0x374e29=a134_0x573b7e;this[_0x374e29(0x8b)]=!![],this[_0x374e29(0x9b)]=_0x2c6f9b;}[a134_0x573b7e(0xae)](){const _0x18948b=a134_0x573b7e;this[_0x18948b(0x8b)]=![],this['name']=null;}[a134_0x573b7e(0x76)](){const _0x288eff=a134_0x573b7e;return this[_0x288eff(0x8b)];}[a134_0x573b7e(0x97)](){const _0x513724=a134_0x573b7e;return this[_0x513724(0x9b)];}}class OrchestrationUtils{static [a134_0x573b7e(0x99)]=null;constructor(_0x4023e4){const _0x2b11fd=a134_0x573b7e,_0x6f7aa1={};_0x6f7aa1[_0x2b11fd(0x7b)]=function(_0x39d693,_0x50dd73){return _0x39d693||_0x50dd73;};const _0x5a0b8d=_0x6f7aa1;this['runPreviouslyFailedFirst']=![],this[_0x2b11fd(0x90)]=![],this['skipFlakyAndFailed']=![],this[_0x2b11fd(0x9f)]=new TestOrdering(),this['config']=_0x5a0b8d[_0x2b11fd(0x7b)](_0x4023e4,{});const _0x19792e=_0x4023e4&&_0x4023e4[_0x2b11fd(0xa4)]||{};this[_0x2b11fd(0x9d)](_0x19792e[RUN_PREVIOUSLY_FAILED_FIRST]||![]),this['_setRerunPreviouslyFailed'](_0x19792e[RERUN_PREVIOUSLY_FAILED]||![]),this[_0x2b11fd(0x80)](_0x19792e[SKIP_FLAKY_AND_FAILED]||![]);}static[a134_0x573b7e(0x7e)](_0x1f276d){const _0x2caf9d=a134_0x573b7e;return!OrchestrationUtils[_0x2caf9d(0x99)]&&_0x1f276d&&(OrchestrationUtils[_0x2caf9d(0x99)]=new OrchestrationUtils(_0x1f276d)),OrchestrationUtils['_instance'];}[a134_0x573b7e(0xad)](){const _0x248cd2=a134_0x573b7e,_0x16bc7c=(this[_0x248cd2(0x86)][_0x248cd2(0xa4)]||{})[RETRY_TESTS_ON_FAILURE]||{};return!!_0x16bc7c[_0x248cd2(0x8b)];}[a134_0x573b7e(0xa5)](){const _0x561c39=a134_0x573b7e,_0x5a389c=(this[_0x561c39(0x86)][_0x561c39(0xa4)]||{})[RETRY_TESTS_ON_FAILURE]||{};let _0x17d270=0x0;return this['isRetryEnabled'](this['config'])&&(_0x17d270=_0x5a389c[_0x561c39(0x83)]||0x1),_0x17d270;}[a134_0x573b7e(0x94)](){const _0x3e844d=a134_0x573b7e,_0x48e340=this['config'][_0x3e844d(0xa4)]||{},_0xc07a38={};for(const _0xd54c84 in _0x48e340){ALLOWED_ORCHESTRATION_KEYS['has'](_0xd54c84)&&(_0xc07a38[_0xd54c84]=_0x48e340[_0xd54c84]);}return _0xc07a38;}[a134_0x573b7e(0x96)](){const _0x1d4a51=a134_0x573b7e,_0x59d688=process[_0x1d4a51(0x71)][_0x1d4a51(0x8e)],_0x48066a=path['join'](os[_0x1d4a51(0x88)](),_0x1d4a51(0x82)+_0x59d688);return fs[_0x1d4a51(0x8c)](_0x48066a);}[a134_0x573b7e(0xaa)](_0x3e647f){const _0x1458f4=a134_0x573b7e,_0x34eb32=process[_0x1458f4(0x71)]['BROWSERSTACK_TESTHUB_UUID'],_0x5f10cb=path[_0x1458f4(0xa3)](os[_0x1458f4(0x88)](),_0x1458f4(0xa6)+_0x34eb32+_0x1458f4(0x7a));fs['appendFileSync'](_0x5f10cb,_0x3e647f+'\x0a');}[a134_0x573b7e(0x79)](_0x5b5d3d){const _0x4d2e9c=a134_0x573b7e,_0x159f9c={};_0x159f9c[_0x4d2e9c(0xa0)]=function(_0x121f78,_0x599e2d){return _0x121f78||_0x599e2d;};const _0x1f58f4=_0x159f9c;return ABORT_BUILD_SUPPORTED_FRAMEWORKS[_0x4d2e9c(0x8a)](_0x1f58f4['rLQZA'](_0x5b5d3d,'')['toLowerCase']());}[a134_0x573b7e(0x73)](){const _0x4981ed=a134_0x573b7e,_0x21059e=(this[_0x4981ed(0x86)][_0x4981ed(0xa4)]||{})[ABORT_BUILD_ON_FAILURE]||{};return!!_0x21059e[_0x4981ed(0x8b)];}['getFailureThreshold'](){const _0x1ea8ef=a134_0x573b7e,_0x1b9b33=(this[_0x1ea8ef(0x86)]['testOrchestrationOptions']||{})[ABORT_BUILD_ON_FAILURE]||{};return _0x1b9b33['maxFailures']||0x5;;}['getRunPreviouslyFailedFirst'](){return this['runPreviouslyFailedFirst'];}[a134_0x573b7e(0x9d)](_0x4005be){const _0x5e468c=a134_0x573b7e;this[_0x5e468c(0xac)]=!!_0x4005be,this[_0x5e468c(0x81)]();}[a134_0x573b7e(0x95)](){return this['rerunPreviouslyFailed'];}['_setRerunPreviouslyFailed'](_0x5d1ea1){const _0x5a5dae=a134_0x573b7e;this[_0x5a5dae(0x90)]=!!_0x5d1ea1,this[_0x5a5dae(0x81)]();}['getSkipFlakyAndFailed'](){return this['skipFlakyAndFailed'];}[a134_0x573b7e(0x80)](_0x1aca61){const _0x51b8a8=a134_0x573b7e;this[_0x51b8a8(0x85)]=!!_0x1aca61,this[_0x51b8a8(0x81)]();}[a134_0x573b7e(0x81)](){const _0x39e9ea=a134_0x573b7e;if(this[_0x39e9ea(0xac)])this[_0x39e9ea(0x90)]=![],this[_0x39e9ea(0x85)]=![],this[_0x39e9ea(0x9f)][_0x39e9ea(0x8d)](RUN_PREVIOUSLY_FAILED_FIRST);else{if(this[_0x39e9ea(0x90)])this[_0x39e9ea(0xac)]=![],this[_0x39e9ea(0x85)]=![],this[_0x39e9ea(0x9f)]['enable'](RERUN_PREVIOUSLY_FAILED);else this[_0x39e9ea(0x85)]?(this[_0x39e9ea(0xac)]=![],this[_0x39e9ea(0x90)]=![],this['testOrdering'][_0x39e9ea(0x8d)](SKIP_FLAKY_AND_FAILED)):this[_0x39e9ea(0x9f)][_0x39e9ea(0xae)]();}}['testOrderingEnabled'](){const _0x56d0a1=a134_0x573b7e;return this[_0x56d0a1(0x9f)][_0x56d0a1(0x76)]();}[a134_0x573b7e(0xa8)](){const _0x3da0d5=a134_0x573b7e;if(this['testOrdering'][_0x3da0d5(0x76)]())return this['testOrdering'][_0x3da0d5(0x97)]();return null;}[a134_0x573b7e(0x92)](){const _0x686448=a134_0x573b7e,_0x144e05={};return _0x144e05[_0x686448(0x72)]={'enabled':this[_0x686448(0x95)]()},_0x144e05['run_previously_failed_first']={'enabled':this[_0x686448(0x75)]()},_0x144e05[_0x686448(0x7d)]={'enabled':this[_0x686448(0x78)]()},this[_0x686448(0xad)]()&&(_0x144e05[_0x686448(0xa1)]={'enabled':!![],'max_retries':this['getRetryCount']()}),this[_0x686448(0x73)]()&&(_0x144e05[_0x686448(0xa9)]={'enabled':!![],'max_failures':this[_0x686448(0x8f)]()}),_0x144e05;}}function a134_0x231b(_0x4ccf53,_0x596e4e){const _0x34db09=a134_0x34db();return a134_0x231b=function(_0x231b66,_0x2f500d){_0x231b66=_0x231b66-0x71;let _0x47fbd5=_0x34db09[_0x231b66];return _0x47fbd5;},a134_0x231b(_0x4ccf53,_0x596e4e);}module['exports']=OrchestrationUtils;