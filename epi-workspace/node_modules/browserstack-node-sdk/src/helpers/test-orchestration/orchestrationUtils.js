const a121_0x404caf=a121_0x8116;(function(_0x4efa8d,_0xdce0c8){const _0x255de4=a121_0x8116,_0x123535=_0x4efa8d();while(!![]){try{const _0x5406e2=parseInt(_0x255de4(0x178))/0x1*(parseInt(_0x255de4(0x140))/0x2)+parseInt(_0x255de4(0x14f))/0x3+-parseInt(_0x255de4(0x16a))/0x4*(-parseInt(_0x255de4(0x13f))/0x5)+parseInt(_0x255de4(0x162))/0x6+parseInt(_0x255de4(0x153))/0x7*(-parseInt(_0x255de4(0x163))/0x8)+parseInt(_0x255de4(0x16d))/0x9*(-parseInt(_0x255de4(0x145))/0xa)+parseInt(_0x255de4(0x176))/0xb;if(_0x5406e2===_0xdce0c8)break;else _0x123535['push'](_0x123535['shift']());}catch(_0x454b47){_0x123535['push'](_0x123535['shift']());}}}(a121_0x4051,0x4856c));function a121_0x4051(){const _0x4c70f3=['_instance','UmGJw','enable','maxRetries','skip_failing_and_flaky','isAbortBuildOnFailureSupported','isRetryEnabled','testOrdering','run_previously_failed_first','1554204iowPZA','93152akVVxG','abortBuildOnFailure','getRetryCount','skipFlakyAndFailed','_setRunPreviouslyFailedFirst','path','_setRerunPreviouslyFailed','677188ATuhDK','rerunPreviouslyFailed','abort_build_','27yTvvHG','has','config','tmpdir','name','getRunPreviouslyFailedFirst','getBuildStartData','_setTestOrdering','appendFileSync','1796399FgkCbM','maxFailures','15ujlHsP','exports','abort_build_on_failure','isAbortBuildOnFailureEnabled','enabled','checkAbortBuildFileExists','5fsrhvq','3456qxbBeo','.txt','SiBrf','writeFailureToFile','winstonLogger','876930GuwscI','disable','getRerunPreviouslyFailed','retry_tests_on_failure','getSkipFlakyAndFailed','skipFlakyandFailed','getFailureThreshold','getInstance','failed_tests_','testOrchestrationOptions','279573YMUtnS','runPreviouslyFailedFirst','getEnabled','_setSkipFlakyAndFailed','91LMRDil','retryTestsOnFailure','env','getTestOrderingName','existsSync','join'];a121_0x4051=function(){return _0x4c70f3;};return a121_0x4051();}const os=require('os'),path=require(a121_0x404caf(0x168)),fs=require('fs'),logger=require('../logger')[a121_0x404caf(0x144)],RETRY_TESTS_ON_FAILURE=a121_0x404caf(0x154),ABORT_BUILD_ON_FAILURE=a121_0x404caf(0x164),RUN_PREVIOUSLY_FAILED_FIRST='runPreviouslyFailedFirst',RERUN_PREVIOUSLY_FAILED=a121_0x404caf(0x16b),SKIP_FLAKY_AND_FAILED=a121_0x404caf(0x14a),ALLOWED_ORCHESTRATION_KEYS=new Set([RETRY_TESTS_ON_FAILURE,ABORT_BUILD_ON_FAILURE,RUN_PREVIOUSLY_FAILED_FIRST,RERUN_PREVIOUSLY_FAILED,SKIP_FLAKY_AND_FAILED]),ABORT_BUILD_SUPPORTED_FRAMEWORKS=new Set(['jest']);class TestOrdering{constructor(){const _0x486c50=a121_0x404caf;this[_0x486c50(0x17c)]=![],this[_0x486c50(0x171)]=null;}[a121_0x404caf(0x15b)](_0x54df7d){const _0x13d5ed=a121_0x404caf;this[_0x13d5ed(0x17c)]=!![],this[_0x13d5ed(0x171)]=_0x54df7d;}[a121_0x404caf(0x146)](){this['enabled']=![],this['name']=null;}[a121_0x404caf(0x151)](){const _0x370b85=a121_0x404caf;return this[_0x370b85(0x17c)];}['getName'](){const _0xaf9513=a121_0x404caf;return this[_0xaf9513(0x171)];}}function a121_0x8116(_0x151185,_0x4c0bf7){const _0x4051de=a121_0x4051();return a121_0x8116=function(_0x81161b,_0x3d46c9){_0x81161b=_0x81161b-0x13f;let _0x4fd525=_0x4051de[_0x81161b];return _0x4fd525;},a121_0x8116(_0x151185,_0x4c0bf7);}class OrchestrationUtils{static [a121_0x404caf(0x159)]=null;constructor(_0x4071eb){const _0x3ac30f=a121_0x404caf,_0x32cd14={};_0x32cd14['SiBrf']=function(_0x1653f2,_0x18e168){return _0x1653f2||_0x18e168;};const _0x4197f8=_0x32cd14;this[_0x3ac30f(0x150)]=![],this['rerunPreviouslyFailed']=![],this['skipFlakyAndFailed']=![],this[_0x3ac30f(0x160)]=new TestOrdering(),this['config']=_0x4197f8[_0x3ac30f(0x142)](_0x4071eb,{});const _0x15e33b=_0x4071eb&&_0x4071eb[_0x3ac30f(0x14e)]||{};this[_0x3ac30f(0x167)](_0x15e33b[RUN_PREVIOUSLY_FAILED_FIRST]||![]),this['_setRerunPreviouslyFailed'](_0x15e33b[RERUN_PREVIOUSLY_FAILED]||![]),this[_0x3ac30f(0x152)](_0x15e33b[SKIP_FLAKY_AND_FAILED]||![]);}static[a121_0x404caf(0x14c)](_0x441100){const _0x1d2c8f=a121_0x404caf;return!OrchestrationUtils[_0x1d2c8f(0x159)]&&_0x441100&&(OrchestrationUtils['_instance']=new OrchestrationUtils(_0x441100)),OrchestrationUtils[_0x1d2c8f(0x159)];}[a121_0x404caf(0x15f)](){const _0x3caf92=a121_0x404caf,_0x317399=(this[_0x3caf92(0x16f)][_0x3caf92(0x14e)]||{})[RETRY_TESTS_ON_FAILURE]||{};return!!_0x317399['enabled'];}[a121_0x404caf(0x165)](){const _0x192260=a121_0x404caf,_0x237d36=(this[_0x192260(0x16f)][_0x192260(0x14e)]||{})[RETRY_TESTS_ON_FAILURE]||{};let _0x358f77=0x0;return this[_0x192260(0x15f)](this[_0x192260(0x16f)])&&(_0x358f77=_0x237d36[_0x192260(0x15c)]||0x1),_0x358f77;}['getOrchestrationData'](){const _0x5213cf=a121_0x404caf,_0x2a8027=this[_0x5213cf(0x16f)][_0x5213cf(0x14e)]||{},_0x38bd49={};for(const _0x1c8be4 in _0x2a8027){ALLOWED_ORCHESTRATION_KEYS[_0x5213cf(0x16e)](_0x1c8be4)&&(_0x38bd49[_0x1c8be4]=_0x2a8027[_0x1c8be4]);}return _0x38bd49;}[a121_0x404caf(0x17d)](){const _0x559bac=a121_0x404caf,_0x4765fe=process['env']['BROWSERSTACK_TESTHUB_UUID'],_0x510bb6=path[_0x559bac(0x158)](os[_0x559bac(0x170)](),_0x559bac(0x16c)+_0x4765fe);return fs[_0x559bac(0x157)](_0x510bb6);}[a121_0x404caf(0x143)](_0x2ca509){const _0x41e99d=a121_0x404caf,_0x6962bf=process[_0x41e99d(0x155)]['BROWSERSTACK_TESTHUB_UUID'],_0x21fb9c=path[_0x41e99d(0x158)](os['tmpdir'](),_0x41e99d(0x14d)+_0x6962bf+_0x41e99d(0x141));fs[_0x41e99d(0x175)](_0x21fb9c,_0x2ca509+'\x0a');}[a121_0x404caf(0x15e)](_0x21974f){const _0x544628=a121_0x404caf,_0x2f6854={};_0x2f6854[_0x544628(0x15a)]=function(_0x40f00a,_0x5c4a87){return _0x40f00a||_0x5c4a87;};const _0x3e65f5=_0x2f6854;return ABORT_BUILD_SUPPORTED_FRAMEWORKS[_0x544628(0x16e)](_0x3e65f5['UmGJw'](_0x21974f,'')['toLowerCase']());}[a121_0x404caf(0x17b)](){const _0x54e31a=a121_0x404caf,_0x26263d=(this['config'][_0x54e31a(0x14e)]||{})[ABORT_BUILD_ON_FAILURE]||{};return!!_0x26263d[_0x54e31a(0x17c)];}['getFailureThreshold'](){const _0x5e20d3=a121_0x404caf,_0x474677=(this[_0x5e20d3(0x16f)][_0x5e20d3(0x14e)]||{})[ABORT_BUILD_ON_FAILURE]||{};return _0x474677[_0x5e20d3(0x177)]||0x5;;}[a121_0x404caf(0x172)](){const _0x5a2ce5=a121_0x404caf;return this[_0x5a2ce5(0x150)];}[a121_0x404caf(0x167)](_0x1d1e9b){const _0x10e440=a121_0x404caf;this['runPreviouslyFailedFirst']=!!_0x1d1e9b,this[_0x10e440(0x174)]();}[a121_0x404caf(0x147)](){const _0x238426=a121_0x404caf;return this[_0x238426(0x16b)];}[a121_0x404caf(0x169)](_0x437910){const _0x183c56=a121_0x404caf;this['rerunPreviouslyFailed']=!!_0x437910,this[_0x183c56(0x174)]();}[a121_0x404caf(0x149)](){const _0x361b42=a121_0x404caf;return this[_0x361b42(0x166)];}[a121_0x404caf(0x152)](_0x5895b1){const _0x2ef8d5=a121_0x404caf;this[_0x2ef8d5(0x166)]=!!_0x5895b1,this[_0x2ef8d5(0x174)]();}[a121_0x404caf(0x174)](){const _0x1b0f50=a121_0x404caf;if(this[_0x1b0f50(0x150)])this['rerunPreviouslyFailed']=![],this[_0x1b0f50(0x166)]=![],this[_0x1b0f50(0x160)][_0x1b0f50(0x15b)](RUN_PREVIOUSLY_FAILED_FIRST);else{if(this[_0x1b0f50(0x16b)])this[_0x1b0f50(0x150)]=![],this[_0x1b0f50(0x166)]=![],this[_0x1b0f50(0x160)][_0x1b0f50(0x15b)](RERUN_PREVIOUSLY_FAILED);else this[_0x1b0f50(0x166)]?(this[_0x1b0f50(0x150)]=![],this[_0x1b0f50(0x16b)]=![],this[_0x1b0f50(0x160)][_0x1b0f50(0x15b)](SKIP_FLAKY_AND_FAILED)):this[_0x1b0f50(0x160)][_0x1b0f50(0x146)]();}}['testOrderingEnabled'](){const _0x1e90a5=a121_0x404caf;return this[_0x1e90a5(0x160)][_0x1e90a5(0x151)]();}[a121_0x404caf(0x156)](){const _0x2cddcc=a121_0x404caf;if(this[_0x2cddcc(0x160)][_0x2cddcc(0x151)]())return this[_0x2cddcc(0x160)]['getName']();return null;}[a121_0x404caf(0x173)](){const _0x6b3a68=a121_0x404caf,_0x18ab30={};return _0x18ab30['rerun_previously_failed']={'enabled':this[_0x6b3a68(0x147)]()},_0x18ab30[_0x6b3a68(0x161)]={'enabled':this[_0x6b3a68(0x172)]()},_0x18ab30[_0x6b3a68(0x15d)]={'enabled':this[_0x6b3a68(0x149)]()},this['isRetryEnabled']()&&(_0x18ab30[_0x6b3a68(0x148)]={'enabled':!![],'max_retries':this['getRetryCount']()}),this[_0x6b3a68(0x17b)]()&&(_0x18ab30[_0x6b3a68(0x17a)]={'enabled':!![],'max_failures':this[_0x6b3a68(0x14b)]()}),_0x18ab30;}}module[a121_0x404caf(0x179)]=OrchestrationUtils;