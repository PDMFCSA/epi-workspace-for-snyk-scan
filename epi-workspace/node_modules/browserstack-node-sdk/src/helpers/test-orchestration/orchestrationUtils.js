const a119_0x51df64=a119_0x24dd;(function(_0x49aeb7,_0x51c9b1){const _0x38b3f6=a119_0x24dd,_0x249aab=_0x49aeb7();while(!![]){try{const _0x1eb5ee=-parseInt(_0x38b3f6(0x149))/0x1+-parseInt(_0x38b3f6(0x138))/0x2*(-parseInt(_0x38b3f6(0x162))/0x3)+parseInt(_0x38b3f6(0x169))/0x4+parseInt(_0x38b3f6(0x16e))/0x5*(parseInt(_0x38b3f6(0x163))/0x6)+-parseInt(_0x38b3f6(0x14f))/0x7*(parseInt(_0x38b3f6(0x146))/0x8)+-parseInt(_0x38b3f6(0x134))/0x9*(-parseInt(_0x38b3f6(0x147))/0xa)+-parseInt(_0x38b3f6(0x156))/0xb;if(_0x1eb5ee===_0x51c9b1)break;else _0x249aab['push'](_0x249aab['shift']());}catch(_0x15d75c){_0x249aab['push'](_0x249aab['shift']());}}}(a119_0x59f4,0xc5fa6));const os=require('os'),path=require(a119_0x51df64(0x150)),fs=require('fs'),logger=require('../logger')['winstonLogger'],RETRY_TESTS_ON_FAILURE=a119_0x51df64(0x14b),ABORT_BUILD_ON_FAILURE=a119_0x51df64(0x15e),RUN_PREVIOUSLY_FAILED_FIRST='runPreviouslyFailedFirst',RERUN_PREVIOUSLY_FAILED=a119_0x51df64(0x14c),SKIP_FLAKY_AND_FAILED=a119_0x51df64(0x167),ALLOWED_ORCHESTRATION_KEYS=new Set([RETRY_TESTS_ON_FAILURE,ABORT_BUILD_ON_FAILURE,RUN_PREVIOUSLY_FAILED_FIRST,RERUN_PREVIOUSLY_FAILED,SKIP_FLAKY_AND_FAILED]),ABORT_BUILD_SUPPORTED_FRAMEWORKS=new Set([a119_0x51df64(0x13a)]);class TestOrdering{constructor(){const _0x2b8788=a119_0x51df64;this[_0x2b8788(0x139)]=![],this[_0x2b8788(0x14d)]=null;}[a119_0x51df64(0x151)](_0x1a88b3){const _0x4dfdfd=a119_0x51df64;this[_0x4dfdfd(0x139)]=!![],this[_0x4dfdfd(0x14d)]=_0x1a88b3;}[a119_0x51df64(0x15d)](){const _0x5767e3=a119_0x51df64;this[_0x5767e3(0x139)]=![],this['name']=null;}['getEnabled'](){const _0x19d0a9=a119_0x51df64;return this[_0x19d0a9(0x139)];}[a119_0x51df64(0x160)](){const _0x4acb80=a119_0x51df64;return this[_0x4acb80(0x14d)];}}function a119_0x24dd(_0x4e010c,_0x2301cc){const _0x59f41a=a119_0x59f4();return a119_0x24dd=function(_0x24dd9b,_0x2c01bc){_0x24dd9b=_0x24dd9b-0x131;let _0x5f5276=_0x59f41a[_0x24dd9b];return _0x5f5276;},a119_0x24dd(_0x4e010c,_0x2301cc);}function a119_0x59f4(){const _0x3ff029=['maxFailures','getOrchestrationData','disable','abortBuildOnFailure','getBuildStartData','getName','_instance','48VCXcQm','132oVpEtj','writeFailureToFile','run_previously_failed_first','getRunPreviouslyFailedFirst','skipFlakyandFailed','join','94284soUsUu','config','BROWSERSTACK_TESTHUB_UUID','HgltK','isAbortBuildOnFailureSupported','250995fxZRfk','testOrdering','appendFileSync','getEnabled','has','toLowerCase','9ODqesj','tmpdir','testOrderingEnabled','exports','132546VdaLgN','enabled','jest','failed_tests_','runPreviouslyFailedFirst','.txt','skip_failing_and_flaky','_setSkipFlakyAndFailed','isRetryEnabled','_setRerunPreviouslyFailed','getTestOrderingName','getSkipFlakyAndFailed','env','_setRunPreviouslyFailedFirst','200016dZCuuN','15999930KMSJkt','getFailureThreshold','1510078qFjCaI','_setTestOrdering','retryTestsOnFailure','rerunPreviouslyFailed','name','isAbortBuildOnFailureEnabled','238MwFLcZ','path','enable','abort_build_on_failure','skipFlakyAndFailed','getInstance','rerun_previously_failed','6789706ZMKWJg','abort_build_','testOrchestrationOptions','getRetryCount','getRerunPreviouslyFailed'];a119_0x59f4=function(){return _0x3ff029;};return a119_0x59f4();}class OrchestrationUtils{static [a119_0x51df64(0x161)]=null;constructor(_0x32853b){const _0x4bc7b0=a119_0x51df64,_0x438585={};_0x438585['hNHuQ']=function(_0x314cc5,_0x2de89){return _0x314cc5||_0x2de89;};const _0x552fca=_0x438585;this['runPreviouslyFailedFirst']=![],this[_0x4bc7b0(0x14c)]=![],this[_0x4bc7b0(0x153)]=![],this[_0x4bc7b0(0x16f)]=new TestOrdering(),this['config']=_0x552fca['hNHuQ'](_0x32853b,{});const _0x51d740=_0x32853b&&_0x32853b[_0x4bc7b0(0x158)]||{};this[_0x4bc7b0(0x145)](_0x51d740[RUN_PREVIOUSLY_FAILED_FIRST]||![]),this[_0x4bc7b0(0x141)](_0x51d740[RERUN_PREVIOUSLY_FAILED]||![]),this[_0x4bc7b0(0x13f)](_0x51d740[SKIP_FLAKY_AND_FAILED]||![]);}static[a119_0x51df64(0x154)](_0x8ac8a6){const _0x513504=a119_0x51df64;return!OrchestrationUtils[_0x513504(0x161)]&&_0x8ac8a6&&(OrchestrationUtils[_0x513504(0x161)]=new OrchestrationUtils(_0x8ac8a6)),OrchestrationUtils[_0x513504(0x161)];}[a119_0x51df64(0x140)](){const _0x404883=a119_0x51df64,_0x5c7aef=(this[_0x404883(0x16a)][_0x404883(0x158)]||{})[RETRY_TESTS_ON_FAILURE]||{};return!!_0x5c7aef[_0x404883(0x139)];}['getRetryCount'](){const _0x2b3274=a119_0x51df64,_0x4f7db9=(this[_0x2b3274(0x16a)][_0x2b3274(0x158)]||{})[RETRY_TESTS_ON_FAILURE]||{};let _0x5deaf1=0x0;return this['isRetryEnabled'](this[_0x2b3274(0x16a)])&&(_0x5deaf1=_0x4f7db9['maxRetries']||0x1),_0x5deaf1;}[a119_0x51df64(0x15c)](){const _0x56b0e4=a119_0x51df64,_0x4b1d61=this[_0x56b0e4(0x16a)][_0x56b0e4(0x158)]||{},_0x1777ab={};for(const _0x2f4f34 in _0x4b1d61){ALLOWED_ORCHESTRATION_KEYS[_0x56b0e4(0x132)](_0x2f4f34)&&(_0x1777ab[_0x2f4f34]=_0x4b1d61[_0x2f4f34]);}return _0x1777ab;}['checkAbortBuildFileExists'](){const _0x2e3f72=a119_0x51df64,_0x56dedd=process['env']['BROWSERSTACK_TESTHUB_UUID'],_0xeb4459=path[_0x2e3f72(0x168)](os['tmpdir'](),_0x2e3f72(0x157)+_0x56dedd);return fs['existsSync'](_0xeb4459);}[a119_0x51df64(0x164)](_0x2bb3aa){const _0xfee189=a119_0x51df64,_0x3f68ca=process[_0xfee189(0x144)][_0xfee189(0x16b)],_0x3b295f=path[_0xfee189(0x168)](os[_0xfee189(0x135)](),_0xfee189(0x13b)+_0x3f68ca+_0xfee189(0x13d));fs[_0xfee189(0x170)](_0x3b295f,_0x2bb3aa+'\x0a');}[a119_0x51df64(0x16d)](_0x26e45a){const _0x4055bf=a119_0x51df64,_0x404e07={};_0x404e07[_0x4055bf(0x16c)]=function(_0x51aba6,_0x10ab59){return _0x51aba6||_0x10ab59;};const _0x223d21=_0x404e07;return ABORT_BUILD_SUPPORTED_FRAMEWORKS[_0x4055bf(0x132)](_0x223d21['HgltK'](_0x26e45a,'')[_0x4055bf(0x133)]());}[a119_0x51df64(0x14e)](){const _0x1ada9e=a119_0x51df64,_0x1ca4b4=(this[_0x1ada9e(0x16a)][_0x1ada9e(0x158)]||{})[ABORT_BUILD_ON_FAILURE]||{};return!!_0x1ca4b4[_0x1ada9e(0x139)];}[a119_0x51df64(0x148)](){const _0x817a44=a119_0x51df64,_0x4f0540=(this['config'][_0x817a44(0x158)]||{})[ABORT_BUILD_ON_FAILURE]||{};return _0x4f0540[_0x817a44(0x15b)]||0x5;;}[a119_0x51df64(0x166)](){return this['runPreviouslyFailedFirst'];}['_setRunPreviouslyFailedFirst'](_0x39fe66){const _0x4a93c5=a119_0x51df64;this[_0x4a93c5(0x13c)]=!!_0x39fe66,this['_setTestOrdering']();}[a119_0x51df64(0x15a)](){const _0x254193=a119_0x51df64;return this[_0x254193(0x14c)];}[a119_0x51df64(0x141)](_0x3dac0a){const _0x514fa2=a119_0x51df64;this[_0x514fa2(0x14c)]=!!_0x3dac0a,this[_0x514fa2(0x14a)]();}[a119_0x51df64(0x143)](){const _0x50ad4b=a119_0x51df64;return this[_0x50ad4b(0x153)];}[a119_0x51df64(0x13f)](_0x3bc75a){const _0x2d771e=a119_0x51df64;this[_0x2d771e(0x153)]=!!_0x3bc75a,this[_0x2d771e(0x14a)]();}['_setTestOrdering'](){const _0x3ddfbf=a119_0x51df64;if(this[_0x3ddfbf(0x13c)])this[_0x3ddfbf(0x14c)]=![],this['skipFlakyAndFailed']=![],this['testOrdering']['enable'](RUN_PREVIOUSLY_FAILED_FIRST);else{if(this[_0x3ddfbf(0x14c)])this[_0x3ddfbf(0x13c)]=![],this[_0x3ddfbf(0x153)]=![],this[_0x3ddfbf(0x16f)][_0x3ddfbf(0x151)](RERUN_PREVIOUSLY_FAILED);else this['skipFlakyAndFailed']?(this['runPreviouslyFailedFirst']=![],this['rerunPreviouslyFailed']=![],this[_0x3ddfbf(0x16f)]['enable'](SKIP_FLAKY_AND_FAILED)):this[_0x3ddfbf(0x16f)][_0x3ddfbf(0x15d)]();}}[a119_0x51df64(0x136)](){const _0x3f8be4=a119_0x51df64;return this[_0x3f8be4(0x16f)][_0x3f8be4(0x131)]();}[a119_0x51df64(0x142)](){const _0x33e3a7=a119_0x51df64;if(this['testOrdering']['getEnabled']())return this[_0x33e3a7(0x16f)][_0x33e3a7(0x160)]();return null;}[a119_0x51df64(0x15f)](){const _0x577ab3=a119_0x51df64,_0x12e5cc={};return _0x12e5cc[_0x577ab3(0x155)]={'enabled':this[_0x577ab3(0x15a)]()},_0x12e5cc[_0x577ab3(0x165)]={'enabled':this[_0x577ab3(0x166)]()},_0x12e5cc[_0x577ab3(0x13e)]={'enabled':this['getSkipFlakyAndFailed']()},this[_0x577ab3(0x140)]()&&(_0x12e5cc['retry_tests_on_failure']={'enabled':!![],'max_retries':this[_0x577ab3(0x159)]()}),this['isAbortBuildOnFailureEnabled']()&&(_0x12e5cc[_0x577ab3(0x152)]={'enabled':!![],'max_failures':this[_0x577ab3(0x148)]()}),_0x12e5cc;}}module[a119_0x51df64(0x137)]=OrchestrationUtils;