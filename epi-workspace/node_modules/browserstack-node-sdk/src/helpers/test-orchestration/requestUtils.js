const a122_0x4bd2b1=a122_0x4d9b;(function(_0x5d903e,_0x49e1a1){const _0x286d43=a122_0x4d9b,_0x1a1ea3=_0x5d903e();while(!![]){try{const _0x1a2759=-parseInt(_0x286d43(0x13c))/0x1*(-parseInt(_0x286d43(0x113))/0x2)+-parseInt(_0x286d43(0x142))/0x3+-parseInt(_0x286d43(0x149))/0x4+-parseInt(_0x286d43(0x102))/0x5*(-parseInt(_0x286d43(0x121))/0x6)+parseInt(_0x286d43(0x137))/0x7+parseInt(_0x286d43(0x12c))/0x8+parseInt(_0x286d43(0x11f))/0x9;if(_0x1a2759===_0x49e1a1)break;else _0x1a1ea3['push'](_0x1a1ea3['shift']());}catch(_0x98ef82){_0x1a1ea3['push'](_0x1a1ea3['shift']());}}}(a122_0xd4ea,0x21fc1));const https=require(a122_0x4bd2b1(0x129)),{URL}=require(a122_0x4bd2b1(0x132)),logger=require(a122_0x4bd2b1(0x13a))['winstonLogger'],{ORCHESTRATION_API_URL,FAILED_TESTS_ENDPOINT,SPLIT_TESTS_ENDPOINT}=require('./constants'),TAG='RequestUtils';class RequestUtils{static async[a122_0x4bd2b1(0x10a)](_0x4cb15b,_0x57df39,_0x54d0ff=null){const _0x32e1ee=a122_0x4bd2b1,_0xdeb881={'HOqHa':function(_0x8e85bb,_0x546754){return _0x8e85bb(_0x546754);},'wfnGY':_0x32e1ee(0x148),'CChpu':_0x32e1ee(0x144),'GnFUB':'error','nEMNK':function(_0x3b510e,_0x263f9d){return _0x3b510e===_0x263f9d;},'hyEdg':'POST','IphWa':function(_0x4b1ab7,_0x31ed9e){return _0x4b1ab7===_0x31ed9e;},'Rtyps':_0x32e1ee(0x11b),'rbgvs':_0x32e1ee(0x11d),'RPRhl':function(_0x2fd7ae,_0x2678d1){return _0x2fd7ae+_0x2678d1;}},_0x35edf4=process[_0x32e1ee(0x12f)]['BROWSERSTACK_TESTHUB_JWT']||'',_0x13343d={};_0x13343d[_0x32e1ee(0x134)]='Bearer\x20'+_0x35edf4,_0x13343d['Content-Type']=_0xdeb881[_0x32e1ee(0x122)];const _0x811d39=_0x13343d,{hostname:_0x305e10,pathname:_0x17b03b,search:_0x1bda39}=new URL(_0x57df39),_0xf28689={'hostname':_0x305e10,'path':_0xdeb881['RPRhl'](_0x17b03b,_0x1bda39),'method':_0x4cb15b,'headers':_0x811d39};return logger[_0x32e1ee(0x140)]('['+TAG+_0x32e1ee(0x119)+_0x4cb15b+'\x20request\x20to\x20'+_0x57df39+_0x32e1ee(0x111)+JSON['stringify'](_0x811d39)+_0x32e1ee(0x108)+JSON[_0x32e1ee(0x127)](_0x54d0ff)+'\x20and\x20token:\x20'+_0x35edf4),new Promise((_0x59760c,_0x5efe31)=>{const _0x3f5472=_0x32e1ee,_0x24f9e3=https[_0x3f5472(0x136)](_0xf28689,_0x211005=>{const _0xd28265=_0x3f5472,_0x17aaa2={'lRBJP':function(_0xf8ecdb,_0x5b8e39){const _0x152dcb=a122_0x4d9b;return _0xdeb881[_0x152dcb(0x125)](_0xf8ecdb,_0x5b8e39);}};let _0x5cbabe='';_0x211005['on'](_0xdeb881[_0xd28265(0x123)],_0x26c404=>{_0x5cbabe+=_0x26c404;}),_0x211005['on'](_0xdeb881[_0xd28265(0x13f)],()=>{const _0x8fc45f=_0xd28265;try{const _0x3b6811=_0x5cbabe?JSON[_0x8fc45f(0x13d)](_0x5cbabe):{},_0x18f126={};_0x18f126[_0x8fc45f(0x13b)]=_0x211005[_0x8fc45f(0x103)],_0x18f126[_0x8fc45f(0x131)]=_0x3b6811,_0x18f126['headers']=_0x211005[_0x8fc45f(0x146)],_0x17aaa2[_0x8fc45f(0x14f)](_0x59760c,_0x18f126);}catch(_0x423f26){logger[_0x8fc45f(0x12d)]('['+TAG+_0x8fc45f(0x116)+_0x5cbabe+_0x8fc45f(0x110)+_0x423f26[_0x8fc45f(0x147)]+'\x20'+_0x423f26[_0x8fc45f(0x12e)]),_0x17aaa2[_0x8fc45f(0x14f)](_0x5efe31,new Error('Failed\x20to\x20parse\x20JSON\x20response:\x20'+_0x423f26['message']));}});});_0x24f9e3['on'](_0xdeb881[_0x3f5472(0x10d)],_0x400118=>{const _0x51a74b=_0x3f5472;logger[_0x51a74b(0x12d)]('['+TAG+_0x51a74b(0x133)+_0x4cb15b+'\x20'+_0x57df39+':\x20'+_0x400118['message']+'\x20'+_0x400118[_0x51a74b(0x12e)]),_0xdeb881[_0x51a74b(0x125)](_0x5efe31,_0x400118);}),_0x54d0ff&&(_0xdeb881['nEMNK'](_0x4cb15b,_0xdeb881['hyEdg'])||_0xdeb881[_0x3f5472(0x145)](_0x4cb15b,_0xdeb881[_0x3f5472(0x109)]))&&_0x24f9e3[_0x3f5472(0x10e)](JSON[_0x3f5472(0x127)](_0x54d0ff)),_0x24f9e3['end']();});}static async[a122_0x4bd2b1(0x120)](_0x4e91ec){const _0x3cd769=a122_0x4bd2b1,_0x304a67={};_0x304a67[_0x3cd769(0x143)]=_0x3cd769(0x11e),_0x304a67['HQhRs']=function(_0xb141e4,_0xad50b6){return _0xb141e4===_0xad50b6;};const _0x52c83d=_0x304a67,_0x5c7252=ORCHESTRATION_API_URL+'/'+SPLIT_TESTS_ENDPOINT;try{const _0x4c022c=await this['_request'](_0x52c83d[_0x3cd769(0x143)],_0x5c7252,_0x4e91ec);return _0x52c83d[_0x3cd769(0x128)](_0x4c022c[_0x3cd769(0x13b)],0xc8)?logger[_0x3cd769(0x140)]('['+TAG+_0x3cd769(0x105)+_0x5c7252):logger[_0x3cd769(0x12d)]('['+TAG+_0x3cd769(0x138)+_0x5c7252+':\x20'+JSON['stringify'](_0x4c022c[_0x3cd769(0x131)])+_0x3cd769(0x118)+_0x4c022c[_0x3cd769(0x13b)]),_0x4c022c;}catch(_0x3a0f85){logger[_0x3cd769(0x12d)]('['+TAG+_0x3cd769(0x126)+_0x3a0f85['message']+'\x20'+_0x3a0f85['stack']);const _0x575094={};_0x575094[_0x3cd769(0x147)]=_0x3a0f85['message'];const _0xe7e4ec={};return _0xe7e4ec[_0x3cd769(0x13b)]=0x1f4,_0xe7e4ec[_0x3cd769(0x131)]=_0x575094,_0xe7e4ec;}}static async[a122_0x4bd2b1(0x115)](_0x2f758d){const _0x146e9=a122_0x4bd2b1,_0x92c4d5={};_0x92c4d5[_0x146e9(0x112)]=_0x146e9(0x10f),_0x92c4d5['gNOtK']=function(_0xc9081c,_0x6b69d0){return _0xc9081c===_0x6b69d0;};const _0x44217a=_0x92c4d5;try{const _0x37b25b=await this[_0x146e9(0x10a)](_0x44217a['KBkmQ'],_0x2f758d);if(_0x44217a[_0x146e9(0x11c)](_0x37b25b[_0x146e9(0x13b)],0xc8))return _0x37b25b[_0x146e9(0x131)];return{};}catch(_0x5bb79a){return logger[_0x146e9(0x12d)]('['+TAG+_0x146e9(0x126)+_0x5bb79a['message']+'\x20'+_0x5bb79a[_0x146e9(0x12e)]),{};}}static async[a122_0x4bd2b1(0x14d)](_0x3620a9){const _0x159a02=a122_0x4bd2b1,_0x6e1da8={};_0x6e1da8['fHaXf']=_0x159a02(0x11b),_0x6e1da8[_0x159a02(0x14e)]=function(_0x62ce92,_0x32e29e){return _0x62ce92===_0x32e29e;},_0x6e1da8[_0x159a02(0x13e)]=_0x159a02(0x150);const _0x2a7007=_0x6e1da8,_0x14ff47=ORCHESTRATION_API_URL+'/'+FAILED_TESTS_ENDPOINT;try{const _0x5651e8=await this[_0x159a02(0x10a)](_0x2a7007[_0x159a02(0x12a)],_0x14ff47,_0x3620a9);if(_0x2a7007[_0x159a02(0x14e)](_0x5651e8[_0x159a02(0x13b)],0xc8)&&_0x5651e8[_0x159a02(0x131)]&&_0x2a7007['dJHSa'](_0x5651e8[_0x159a02(0x131)]['message'],_0x2a7007[_0x159a02(0x13e)]))return!![];return![];}catch(_0x59c058){logger['error']('['+TAG+_0x159a02(0x126)+_0x59c058[_0x159a02(0x147)]+'\x20'+_0x59c058[_0x159a02(0x12e)]);const _0x54fdc3={};_0x54fdc3[_0x159a02(0x147)]=_0x59c058[_0x159a02(0x147)];const _0x246c35={};return _0x246c35[_0x159a02(0x13b)]=0x1f4,_0x246c35[_0x159a02(0x131)]=_0x54fdc3,_0x246c35;}}static async[a122_0x4bd2b1(0x14a)](_0x503501){const _0x4dec89=a122_0x4bd2b1,_0x471388={'CNKJZ':function(_0x24810e,_0x43dd49){return _0x24810e||_0x43dd49;},'opxnE':_0x4dec89(0x130),'nFWGV':function(_0x51ef04,_0x409323){return _0x51ef04(_0x409323);},'VXFXo':function(_0x4cca42,_0xca5a26){return _0x4cca42(_0xca5a26);},'FkkJT':function(_0x3cd759,_0x4edfb8){return _0x3cd759(_0x4edfb8);},'vQNDX':_0x4dec89(0x10f),'xTvXS':function(_0x269b7b,_0x191251){return _0x269b7b===_0x191251;},'MwzcA':function(_0x13fd7e,_0x33e5f6){return _0x13fd7e!==_0x33e5f6;},'hSWtW':_0x4dec89(0x124),'GpqzK':function(_0x1b5478,_0x31b616){return _0x1b5478(_0x31b616);}},{buildName:_0x545d47,buildRunIdentifier:_0x391ca9,projectName:_0xd0fdf3}=_0x503501;if(_0x471388['CNKJZ'](!_0x545d47,!_0x391ca9)||!_0xd0fdf3){logger[_0x4dec89(0x12d)]('['+TAG+']\x20Missing\x20parameters\x20for\x20getFailedTestsCount:\x20buildName='+_0x545d47+',\x20buildRunIdentifier='+_0x391ca9+_0x4dec89(0x107)+_0xd0fdf3);const _0x21082a={};_0x21082a[_0x4dec89(0x147)]=_0x471388['opxnE'];const _0x2eac89={};return _0x2eac89['status']=0x190,_0x2eac89[_0x4dec89(0x131)]=_0x21082a,_0x2eac89;}const _0x4e3cfc=_0x4dec89(0x14c)+_0x471388[_0x4dec89(0x139)](encodeURIComponent,_0x545d47)+_0x4dec89(0x11a)+_0x471388[_0x4dec89(0x10c)](encodeURIComponent,_0x391ca9)+_0x4dec89(0x135)+_0x471388[_0x4dec89(0x141)](encodeURIComponent,_0xd0fdf3),_0x5e51e0=ORCHESTRATION_API_URL+'/'+FAILED_TESTS_ENDPOINT+_0x4e3cfc;try{logger['debug']('['+TAG+_0x4dec89(0x14b)+_0x5e51e0);let _0x1b2a8a=0x0;const _0x25cec5=await this['_request'](_0x471388[_0x4dec89(0x12b)],_0x5e51e0);return _0x471388[_0x4dec89(0x114)](_0x25cec5['status'],0xc8)&&_0x25cec5['body']&&_0x471388['MwzcA'](typeof _0x25cec5[_0x4dec89(0x131)][_0x4dec89(0x117)],_0x471388[_0x4dec89(0x104)])&&(_0x1b2a8a=_0x471388[_0x4dec89(0x10b)](Number,_0x25cec5[_0x4dec89(0x131)][_0x4dec89(0x117)])),_0x1b2a8a;}catch(_0x49e46e){logger[_0x4dec89(0x12d)]('['+TAG+_0x4dec89(0x106)+_0x49e46e[_0x4dec89(0x147)]+'\x20'+_0x49e46e[_0x4dec89(0x12e)]);const _0x5563ab={};_0x5563ab[_0x4dec89(0x147)]=_0x49e46e[_0x4dec89(0x147)];const _0x66505d={};return _0x66505d[_0x4dec89(0x13b)]=0x1f4,_0x66505d['body']=_0x5563ab,_0x66505d;}}}module['exports']=RequestUtils;function a122_0x4d9b(_0x29f1fc,_0xe7809c){const _0xd4ea66=a122_0xd4ea();return a122_0x4d9b=function(_0x4d9b9d,_0xb629ac){_0x4d9b9d=_0x4d9b9d-0x102;let _0x4c669d=_0xd4ea66[_0x4d9b9d];return _0x4c669d;},a122_0x4d9b(_0x29f1fc,_0xe7809c);}function a122_0xd4ea(){const _0x27faca=['postSplitFiles','589794yFLLpZ','rbgvs','wfnGY','undefined','HOqHa',']\x20Error\x20in\x20putFailedTests:\x20','stringify','HQhRs','https','fHaXf','vQNDX','636520SyzliV','error','stack','env','Missing\x20required\x20parameters:\x20buildName,\x20buildRunIdentifier,\x20projectName','body','url',']\x20Request\x20failed\x20for\x20','Authorization','&projectName=','request','385287Omonhl',']\x20Failed\x20to\x20post\x20split\x20files\x20to\x20','nFWGV','../logger','status','165iUxQvS','parse','xJgIA','CChpu','debug','FkkJT','687822MGUOQS','UdlNf','end','IphWa','headers','message','data','556664PzyIXi','getFailedTestsCount',']\x20Sending\x20GET\x20to\x20','?buildName=','putFailedTests','dJHSa','lRBJP','Test\x20added','10vhRjGw','statusCode','hSWtW',']\x20Successfully\x20posted\x20split\x20files\x20to\x20',']\x20Error\x20in\x20getFailedTestsCount:\x20',',\x20projectName=','\x20and\x20data:\x20','Rtyps','_request','GpqzK','VXFXo','GnFUB','write','GET','\x20-\x20','\x20with\x20headers:\x20','KBkmQ','1684SITePe','xTvXS','getSplitFiles',']\x20Failed\x20to\x20parse\x20JSON\x20response:\x20','failedTestsCount',',\x20status:\x20',']\x20Sending\x20','&buildRunIdentifier=','PUT','gNOtK','application/json','POST','337563yRzjgM'];a122_0xd4ea=function(){return _0x27faca;};return a122_0xd4ea();}