const a127_0x587b27=a127_0x56b2;(function(_0x241c22,_0x5edd59){const _0x498426=a127_0x56b2,_0x43cc8f=_0x241c22();while(!![]){try{const _0x39255a=parseInt(_0x498426(0x151))/0x1*(parseInt(_0x498426(0x11f))/0x2)+parseInt(_0x498426(0x140))/0x3*(-parseInt(_0x498426(0x11c))/0x4)+parseInt(_0x498426(0x159))/0x5*(parseInt(_0x498426(0x12a))/0x6)+-parseInt(_0x498426(0x12f))/0x7+-parseInt(_0x498426(0x135))/0x8*(-parseInt(_0x498426(0x147))/0x9)+-parseInt(_0x498426(0x12e))/0xa*(-parseInt(_0x498426(0x12c))/0xb)+-parseInt(_0x498426(0x156))/0xc;if(_0x39255a===_0x5edd59)break;else _0x43cc8f['push'](_0x43cc8f['shift']());}catch(_0x31a322){_0x43cc8f['push'](_0x43cc8f['shift']());}}}(a127_0x1b52,0x50f7b));const logger=require(a127_0x587b27(0x125))[a127_0x587b27(0x123)],RequestUtils=require('./requestUtils');class TestOrderingServerHandler{constructor(_0x36b452){const _0x1a31c5=a127_0x587b27;this[_0x1a31c5(0x124)]=_0x36b452,this[_0x1a31c5(0x15a)]=0x0,this['defaultTimeout']=0x3c,this[_0x1a31c5(0x155)]=0x5;}[a127_0x587b27(0x118)](){return this['splitTestsAPICallCount'];}[a127_0x587b27(0x152)](_0x53015d){const _0x34199e=a127_0x587b27,_0x42fd71={};_0x42fd71[_0x34199e(0x13d)]=_0x34199e(0x146);const _0x19c265=_0x42fd71;if(!_0x53015d)return null;const _0x325656={};return _0x325656['timeout']=_0x53015d['timeout']||this['defaultTimeout'],_0x325656[_0x34199e(0x154)]=_0x53015d[_0x34199e(0x154)]||this[_0x34199e(0x155)],_0x325656[_0x34199e(0x126)]=_0x53015d[_0x34199e(0x126)],_0x325656[_0x34199e(0x11e)]=_0x53015d[_0x34199e(0x11e)],logger[_0x34199e(0x148)](_0x34199e(0x119)+JSON[_0x34199e(0x128)](_0x53015d)),logger[_0x34199e(0x148)](_0x34199e(0x133)+_0x53015d[_0x34199e(0x13f)]+_0x34199e(0x145)+_0x53015d[_0x34199e(0x154)]+_0x34199e(0x139)+_0x53015d[_0x34199e(0x126)]+_0x34199e(0x13e)+_0x53015d[_0x34199e(0x11e)]),(!_0x53015d[_0x34199e(0x13f)]||!_0x53015d[_0x34199e(0x154)]||!_0x53015d[_0x34199e(0x11e)]||!_0x53015d['resultUrl'])&&logger[_0x34199e(0x148)](_0x19c265[_0x34199e(0x13d)]),_0x325656;}async['splitTests'](_0x230246,_0x3d9c52){const _0x5bebcb=a127_0x587b27,_0xdd951={'wCzRB':function(_0x21b047,_0x4923e3){return _0x21b047(_0x4923e3);},'uxiLQ':function(_0x695edc,_0xf42eff){return _0x695edc(_0xf42eff);}};try{const _0xfa529e=_0xdd951[_0x5bebcb(0x127)](parseInt,process[_0x5bebcb(0x14d)]['BROWSERSTACK_NODE_INDEX']||'0'),_0x145047=_0xdd951['uxiLQ'](parseInt,process['env'][_0x5bebcb(0x157)]||'1'),_0x54290e=process[_0x5bebcb(0x14d)][_0x5bebcb(0x122)],_0x4a1041={'nodeIndex':_0xfa529e,'totalNodes':_0x145047,'projectName':this['config'][_0x5bebcb(0x136)],'buildName':this[_0x5bebcb(0x124)][_0x5bebcb(0x117)],'buildRunIdentifier':_0x54290e,'orchestrationStrategy':_0x3d9c52,'hostInfo':this['_getHostInfo'](),'tests':_0x230246[_0x5bebcb(0x12b)](_0x348902=>({'filePath':_0x348902}))},_0x354a0a=await RequestUtils[_0x5bebcb(0x130)](_0x4a1041);return logger[_0x5bebcb(0x148)](_0x5bebcb(0x13c)+JSON['stringify'](_0x354a0a)),this['splitTestsAPICallCount']+=0x1,this[_0x5bebcb(0x152)](_0x354a0a['body']||{});}catch(_0x405ae9){return logger[_0x5bebcb(0x148)](_0x5bebcb(0x137)+(_0x405ae9['stack']||_0x405ae9[_0x5bebcb(0x120)]())),null;}}async[a127_0x587b27(0x121)](_0x4c257c){const _0xa1c5ae=a127_0x587b27,_0x126919={};_0x126919[_0xa1c5ae(0x158)]=_0xa1c5ae(0x142),_0x126919[_0xa1c5ae(0x14c)]=function(_0x28126f,_0x32ed7b){return _0x28126f*_0x32ed7b;},_0x126919[_0xa1c5ae(0x131)]=function(_0x54f10b,_0x56e480){return _0x54f10b&&_0x56e480;},_0x126919['RudLp']=function(_0x1c1e98,_0x40add2){return _0x1c1e98<_0x40add2;},_0x126919[_0xa1c5ae(0x11a)]=function(_0x3c0523,_0xe325dd){return _0x3c0523-_0xe325dd;},_0x126919[_0xa1c5ae(0x11d)]=_0xa1c5ae(0x141),_0x126919[_0xa1c5ae(0x129)]=function(_0x5ed60b,_0x4dbec8){return _0x5ed60b>_0x4dbec8;};const _0x19945e=_0x126919;if(!_0x4c257c)return null;try{logger[_0xa1c5ae(0x148)](_0x19945e[_0xa1c5ae(0x158)]);const _0x4fa149=_0x4c257c[_0xa1c5ae(0x154)]||this[_0xa1c5ae(0x155)],_0x44674e=_0x19945e['sGnyB'](_0x4c257c[_0xa1c5ae(0x13f)]||this[_0xa1c5ae(0x132)],0x3e8),_0x5dc509=_0x4c257c['timeoutUrl'],_0x165f51=_0x4c257c[_0xa1c5ae(0x126)];if(_0x19945e[_0xa1c5ae(0x131)](!_0x165f51,!_0x5dc509))return null;let _0xff781d=null;const _0x2e1966=Date[_0xa1c5ae(0x13b)]();while(_0x165f51&&_0x19945e['RudLp'](_0x19945e[_0xa1c5ae(0x11a)](Date[_0xa1c5ae(0x13b)](),_0x2e1966),_0x44674e)){logger[_0xa1c5ae(0x148)](_0xa1c5ae(0x12d)+_0x165f51);const _0x807358=await RequestUtils[_0xa1c5ae(0x14b)](_0x165f51);logger[_0xa1c5ae(0x148)](_0xa1c5ae(0x150)+JSON[_0xa1c5ae(0x128)](_0x807358)),this[_0xa1c5ae(0x15a)]+=0x1;if(_0x807358&&_0x807358[_0xa1c5ae(0x149)]){_0xff781d=_0x807358[_0xa1c5ae(0x149)];break;}await new Promise(_0x4ea4f4=>setTimeout(_0x4ea4f4,_0x4fa149*0x3e8)),logger[_0xa1c5ae(0x148)]('[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL\x20after\x20waiting\x20for\x20'+_0x4fa149+'\x20seconds.');}if(_0x19945e[_0xa1c5ae(0x131)](!_0xff781d,_0x5dc509)){logger[_0xa1c5ae(0x148)](_0x19945e[_0xa1c5ae(0x11d)]);const _0x1ba660=await RequestUtils[_0xa1c5ae(0x14b)](_0x5dc509);_0x1ba660&&_0x1ba660[_0xa1c5ae(0x149)]&&(_0xff781d=_0x1ba660[_0xa1c5ae(0x149)]);}if(_0xff781d&&_0x19945e['tgwhE'](_0xff781d[_0xa1c5ae(0x143)],0x0))return _0xff781d['map'](_0xeeb10a=>_0xeeb10a['filePath']);return null;}catch(_0xd461ef){return logger[_0xa1c5ae(0x148)](_0xa1c5ae(0x144)+(_0xd461ef[_0xa1c5ae(0x14f)]||_0xd461ef[_0xa1c5ae(0x120)]())),null;}}[a127_0x587b27(0x153)](){const _0x349916=a127_0x587b27,_0x1e59ea={'OnWeA':function(_0x501f96,_0x308754){return _0x501f96(_0x308754);}},_0x117825=_0x1e59ea['OnWeA'](require,'os');try{return{'hostname':_0x117825['hostname'](),'platform':_0x117825[_0x349916(0x138)](),'release':_0x117825[_0x349916(0x11b)](),'arch':_0x117825[_0x349916(0x13a)](),'totalmem':_0x117825[_0x349916(0x134)](),'freemem':_0x117825[_0x349916(0x14e)]()};}catch(_0x16d4ef){return{};}}}function a127_0x56b2(_0x537fdd,_0x5cd7d9){const _0x1b5273=a127_0x1b52();return a127_0x56b2=function(_0x56b2e0,_0x7ff2b6){_0x56b2e0=_0x56b2e0-0x117;let _0x3d7f61=_0x1b5273[_0x56b2e0];return _0x3d7f61;},a127_0x56b2(_0x537fdd,_0x5cd7d9);}module[a127_0x587b27(0x14a)]=TestOrderingServerHandler;function a127_0x1b52(){const _0x11e966=['BROWSERSTACK_BUILD_RUN_IDENTIFIER','winstonLogger','config','../logger','resultUrl','wCzRB','stringify','tgwhE','78jMOLYj','map','1277111zgsuCg','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL:\x20','10HDfHJV','3252879OGsUdm','postSplitFiles','bLzrf','defaultTimeout','[processSplitTestsResponse]\x20timeout:\x20','totalmem','16fxnLdj','projectName','[splitTests]\x20Exception\x20in\x20sending\x20test\x20files:\x20','platform',',\x20resultUrl:\x20','arch','now','[splitTests]\x20Response\x20from\x20split\x20tests\x20API:\x20','iDmEn',',\x20timeoutUrl:\x20','timeout','3wijdUC','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20timeout\x20URL','[getOrderedTestFiles]\x20Fetching\x20ordered\x20test\x20files','length','[getOrderedTestFiles]\x20Exception\x20in\x20fetching\x20ordered\x20test\x20files:\x20',',\x20timeoutInterval:\x20','[processSplitTestsResponse]\x20Received\x20null\x20value(s)\x20for\x20some\x20attributes\x20in\x20split\x20tests\x20API\x20response','2312631nSotWQ','debug','tests','exports','getSplitFiles','sGnyB','env','freemem','stack','[getOrderedTestFiles]\x20Response\x20from\x20result\x20URL:\x20','643516OWNzON','processSplitTestsResponse','_getHostInfo','timeoutInterval','defaultTimeoutInterval','12429516neAvXe','BROWSERSTACK_TOTAL_NODE_COUNT','vkQiN','219055oiCwyn','splitTestsAPICallCount','buildName','getSplitTestsAPICallCount','[processSplitTestsResponse]\x20Processing\x20response:\x20','xccPq','release','43780DrWHjz','Tkvdb','timeoutUrl','2gAPyJN','toString','getOrderedTestFiles'];a127_0x1b52=function(){return _0x11e966;};return a127_0x1b52();}