const a124_0x17f73c=a124_0x5c2c;function a124_0x5c72(){const _0x5988db=[',\x20timeoutUrl:\x20','env','resultUrl','QWKrM','575sTMUDJ','\x20seconds.','release','BROWSERSTACK_TOTAL_NODE_COUNT','[splitTests]\x20Exception\x20in\x20sending\x20test\x20files:\x20','[processSplitTestsResponse]\x20Received\x20null\x20value(s)\x20for\x20some\x20attributes\x20in\x20split\x20tests\x20API\x20response','939456tzHEfx','hostname','stringify','splitTests','BxfqI','PzGia','[getOrderedTestFiles]\x20Fetching\x20ordered\x20test\x20files','Sufng','5420088NqQoxd','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20timeout\x20URL','debug','defaultTimeout','platform','_getHostInfo','totalmem','map','postSplitFiles','30losler','20724bnERMp','timeoutUrl','splitTestsAPICallCount','VmquE','1388382yEtvHL','timeoutInterval','defaultTimeoutInterval','config','1nZudaW','getSplitFiles','winstonLogger','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL:\x20','timeout','273423DGUfzH','[getOrderedTestFiles]\x20Response\x20from\x20result\x20URL:\x20','length','stack','KkWwY','now','VVzTh','../logger','BROWSERSTACK_NODE_INDEX','2494888HdeDPI','[processSplitTestsResponse]\x20timeout:\x20','toString','FVZlv','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL\x20after\x20waiting\x20for\x20','filePath','projectName','./requestUtils','body','freemem','tests','754404QViCIz','36LkMktS','ipeZK','[getOrderedTestFiles]\x20Exception\x20in\x20fetching\x20ordered\x20test\x20files:\x20'];a124_0x5c72=function(){return _0x5988db;};return a124_0x5c72();}(function(_0x284576,_0x2a3b9a){const _0x5728d7=a124_0x5c2c,_0xe8fcf4=_0x284576();while(!![]){try{const _0x21a103=-parseInt(_0x5728d7(0x170))/0x1*(-parseInt(_0x5728d7(0x16c))/0x2)+parseInt(_0x5728d7(0x175))/0x3*(parseInt(_0x5728d7(0x18a))/0x4)+parseInt(_0x5728d7(0x150))/0x5*(parseInt(_0x5728d7(0x168))/0x6)+-parseInt(_0x5728d7(0x189))/0x7+-parseInt(_0x5728d7(0x15e))/0x8+parseInt(_0x5728d7(0x156))/0x9+parseInt(_0x5728d7(0x167))/0xa*(-parseInt(_0x5728d7(0x17e))/0xb);if(_0x21a103===_0x2a3b9a)break;else _0xe8fcf4['push'](_0xe8fcf4['shift']());}catch(_0x4e549f){_0xe8fcf4['push'](_0xe8fcf4['shift']());}}}(a124_0x5c72,0x865cb));const logger=require(a124_0x17f73c(0x17c))[a124_0x17f73c(0x172)],RequestUtils=require(a124_0x17f73c(0x185));function a124_0x5c2c(_0x426f56,_0x25082a){const _0x5c72d5=a124_0x5c72();return a124_0x5c2c=function(_0x5c2cae,_0x5e7f44){_0x5c2cae=_0x5c2cae-0x14c;let _0x3c6a5d=_0x5c72d5[_0x5c2cae];return _0x3c6a5d;},a124_0x5c2c(_0x426f56,_0x25082a);}class TestOrderingServerHandler{constructor(_0xbe215a){const _0x3d354e=a124_0x17f73c;this[_0x3d354e(0x16f)]=_0xbe215a,this[_0x3d354e(0x16a)]=0x0,this[_0x3d354e(0x161)]=0x3c,this['defaultTimeoutInterval']=0x5;}['getSplitTestsAPICallCount'](){const _0x11f3f3=a124_0x17f73c;return this[_0x11f3f3(0x16a)];}['processSplitTestsResponse'](_0x588df4){const _0x40cb80=a124_0x17f73c,_0x39f6b0={};_0x39f6b0[_0x40cb80(0x181)]=_0x40cb80(0x155);const _0x2e944c=_0x39f6b0;if(!_0x588df4)return null;const _0x3e7cc7={};return _0x3e7cc7[_0x40cb80(0x174)]=_0x588df4[_0x40cb80(0x174)]||this['defaultTimeout'],_0x3e7cc7[_0x40cb80(0x16d)]=_0x588df4[_0x40cb80(0x16d)]||this[_0x40cb80(0x16e)],_0x3e7cc7[_0x40cb80(0x14e)]=_0x588df4[_0x40cb80(0x14e)],_0x3e7cc7[_0x40cb80(0x169)]=_0x588df4[_0x40cb80(0x169)],logger[_0x40cb80(0x160)]('[processSplitTestsResponse]\x20Processing\x20response:\x20'+JSON[_0x40cb80(0x158)](_0x588df4)),logger['debug'](_0x40cb80(0x17f)+_0x588df4['timeout']+',\x20timeoutInterval:\x20'+_0x588df4[_0x40cb80(0x16d)]+',\x20resultUrl:\x20'+_0x588df4[_0x40cb80(0x14e)]+_0x40cb80(0x14c)+_0x588df4[_0x40cb80(0x169)]),(!_0x588df4[_0x40cb80(0x174)]||!_0x588df4[_0x40cb80(0x16d)]||!_0x588df4[_0x40cb80(0x169)]||!_0x588df4[_0x40cb80(0x14e)])&&logger[_0x40cb80(0x160)](_0x2e944c[_0x40cb80(0x181)]),_0x3e7cc7;}async[a124_0x17f73c(0x159)](_0x5501a9,_0x748bdd){const _0x5b6d45=a124_0x17f73c,_0x1a7f6a={'KkWwY':function(_0x2acf74,_0x26015e){return _0x2acf74(_0x26015e);}};try{const _0x2a5c10=_0x1a7f6a[_0x5b6d45(0x179)](parseInt,process['env'][_0x5b6d45(0x17d)]||'0'),_0xac01fa=_0x1a7f6a[_0x5b6d45(0x179)](parseInt,process[_0x5b6d45(0x14d)][_0x5b6d45(0x153)]||'1'),_0x96e9af=process[_0x5b6d45(0x14d)]['BROWSERSTACK_BUILD_RUN_IDENTIFIER'],_0x342739={'nodeIndex':_0x2a5c10,'totalNodes':_0xac01fa,'projectName':this[_0x5b6d45(0x16f)][_0x5b6d45(0x184)],'buildName':this['config']['buildName'],'buildRunIdentifier':_0x96e9af,'orchestrationStrategy':_0x748bdd,'hostInfo':this[_0x5b6d45(0x163)](),'tests':_0x5501a9['map'](_0x1407e3=>({'filePath':_0x1407e3}))},_0x50bcd8=await RequestUtils[_0x5b6d45(0x166)](_0x342739);return logger['debug']('[splitTests]\x20Response\x20from\x20split\x20tests\x20API:\x20'+JSON[_0x5b6d45(0x158)](_0x50bcd8)),this['splitTestsAPICallCount']+=0x1,this['processSplitTestsResponse'](_0x50bcd8[_0x5b6d45(0x186)]||{});}catch(_0x48181d){return logger[_0x5b6d45(0x160)](_0x5b6d45(0x154)+(_0x48181d[_0x5b6d45(0x178)]||_0x48181d['toString']())),null;}}async['getOrderedTestFiles'](_0x4777cd){const _0x31d074=a124_0x17f73c,_0x1c0e0f={};_0x1c0e0f[_0x31d074(0x14f)]=_0x31d074(0x15c),_0x1c0e0f['PzGia']=function(_0x3f15a3,_0x45092f){return _0x3f15a3*_0x45092f;},_0x1c0e0f['BxfqI']=function(_0x1a25e5,_0x24c6e5){return _0x1a25e5&&_0x24c6e5;},_0x1c0e0f[_0x31d074(0x15d)]=function(_0x2af307,_0x7a106){return _0x2af307<_0x7a106;},_0x1c0e0f[_0x31d074(0x17b)]=function(_0x4045a9,_0x28152c){return _0x4045a9-_0x28152c;},_0x1c0e0f[_0x31d074(0x18b)]=_0x31d074(0x15f),_0x1c0e0f[_0x31d074(0x16b)]=function(_0x13c70b,_0x51d6fa){return _0x13c70b>_0x51d6fa;};const _0x31bb02=_0x1c0e0f;if(!_0x4777cd)return null;try{logger[_0x31d074(0x160)](_0x31bb02[_0x31d074(0x14f)]);const _0x4eb8a0=_0x4777cd[_0x31d074(0x16d)]||this[_0x31d074(0x16e)],_0x532e60=_0x31bb02[_0x31d074(0x15b)](_0x4777cd[_0x31d074(0x174)]||this[_0x31d074(0x161)],0x3e8),_0x55ee3e=_0x4777cd[_0x31d074(0x169)],_0x415269=_0x4777cd['resultUrl'];if(_0x31bb02[_0x31d074(0x15a)](!_0x415269,!_0x55ee3e))return null;let _0x127444=null;const _0x47d415=Date[_0x31d074(0x17a)]();while(_0x415269&&_0x31bb02[_0x31d074(0x15d)](_0x31bb02[_0x31d074(0x17b)](Date[_0x31d074(0x17a)](),_0x47d415),_0x532e60)){logger[_0x31d074(0x160)](_0x31d074(0x173)+_0x415269);const _0x43b616=await RequestUtils['getSplitFiles'](_0x415269);logger['debug'](_0x31d074(0x176)+JSON[_0x31d074(0x158)](_0x43b616)),this[_0x31d074(0x16a)]+=0x1;if(_0x43b616&&_0x43b616[_0x31d074(0x188)]){_0x127444=_0x43b616[_0x31d074(0x188)];break;}await new Promise(_0x3c8b29=>setTimeout(_0x3c8b29,_0x4eb8a0*0x3e8)),logger[_0x31d074(0x160)](_0x31d074(0x182)+_0x4eb8a0+_0x31d074(0x151));}if(_0x31bb02[_0x31d074(0x15a)](!_0x127444,_0x55ee3e)){logger[_0x31d074(0x160)](_0x31bb02[_0x31d074(0x18b)]);const _0x38958b=await RequestUtils[_0x31d074(0x171)](_0x55ee3e);_0x38958b&&_0x38958b[_0x31d074(0x188)]&&(_0x127444=_0x38958b[_0x31d074(0x188)]);}if(_0x127444&&_0x31bb02[_0x31d074(0x16b)](_0x127444[_0x31d074(0x177)],0x0))return _0x127444[_0x31d074(0x165)](_0x1dd85a=>_0x1dd85a[_0x31d074(0x183)]);return null;}catch(_0x4417e2){return logger[_0x31d074(0x160)](_0x31d074(0x18c)+(_0x4417e2[_0x31d074(0x178)]||_0x4417e2[_0x31d074(0x180)]())),null;}}['_getHostInfo'](){const _0x298022=a124_0x17f73c,_0x4aba85={'CjmiW':function(_0x44f668,_0x400f23){return _0x44f668(_0x400f23);}},_0x1d001d=_0x4aba85['CjmiW'](require,'os');try{return{'hostname':_0x1d001d[_0x298022(0x157)](),'platform':_0x1d001d[_0x298022(0x162)](),'release':_0x1d001d[_0x298022(0x152)](),'arch':_0x1d001d['arch'](),'totalmem':_0x1d001d[_0x298022(0x164)](),'freemem':_0x1d001d[_0x298022(0x187)]()};}catch(_0x125819){return{};}}}module['exports']=TestOrderingServerHandler;