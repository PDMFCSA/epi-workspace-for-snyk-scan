const a122_0x254480=a122_0x98bb;(function(_0x5dadf4,_0x13a29e){const _0x5b6f13=a122_0x98bb,_0x29ccd5=_0x5dadf4();while(!![]){try{const _0x3fc330=-parseInt(_0x5b6f13(0x121))/0x1+-parseInt(_0x5b6f13(0x11a))/0x2+parseInt(_0x5b6f13(0x11b))/0x3+parseInt(_0x5b6f13(0x108))/0x4+parseInt(_0x5b6f13(0xf9))/0x5+parseInt(_0x5b6f13(0x10a))/0x6*(-parseInt(_0x5b6f13(0xe8))/0x7)+parseInt(_0x5b6f13(0xec))/0x8*(-parseInt(_0x5b6f13(0xf0))/0x9);if(_0x3fc330===_0x13a29e)break;else _0x29ccd5['push'](_0x29ccd5['shift']());}catch(_0x52baaf){_0x29ccd5['push'](_0x29ccd5['shift']());}}}(a122_0x56f7,0x6f091));const logger=require('../logger')['winstonLogger'],RequestUtils=require('./requestUtils');function a122_0x98bb(_0x39dc5f,_0x3c6371){const _0x56f70f=a122_0x56f7();return a122_0x98bb=function(_0x98bb02,_0x113adb){_0x98bb02=_0x98bb02-0xe5;let _0x1b1842=_0x56f70f[_0x98bb02];return _0x1b1842;},a122_0x98bb(_0x39dc5f,_0x3c6371);}class TestOrderingServerHandler{constructor(_0x4f10ad){const _0x365bc3=a122_0x98bb;this[_0x365bc3(0xe9)]=_0x4f10ad,this[_0x365bc3(0x100)]=0x0,this[_0x365bc3(0xfe)]=0x3c,this[_0x365bc3(0xfc)]=0x5;}['getSplitTestsAPICallCount'](){const _0xda46aa=a122_0x98bb;return this[_0xda46aa(0x100)];}['processSplitTestsResponse'](_0x35f854){const _0x5372b3=a122_0x98bb,_0x35376a={};_0x35376a[_0x5372b3(0xfb)]=_0x5372b3(0x11e);const _0x4f81f6=_0x35376a;if(!_0x35f854)return null;const _0x49a884={};return _0x49a884[_0x5372b3(0xf3)]=_0x35f854[_0x5372b3(0xf3)]||this[_0x5372b3(0xfe)],_0x49a884[_0x5372b3(0xef)]=_0x35f854[_0x5372b3(0xef)]||this[_0x5372b3(0xfc)],_0x49a884[_0x5372b3(0xee)]=_0x35f854[_0x5372b3(0xee)],_0x49a884[_0x5372b3(0xf2)]=_0x35f854['timeoutUrl'],logger['debug']('[processSplitTestsResponse]\x20Processing\x20response:\x20'+JSON[_0x5372b3(0xe7)](_0x35f854)),logger[_0x5372b3(0xf1)](_0x5372b3(0x120)+_0x35f854[_0x5372b3(0xf3)]+_0x5372b3(0x110)+_0x35f854[_0x5372b3(0xef)]+_0x5372b3(0x11d)+_0x35f854[_0x5372b3(0xee)]+',\x20timeoutUrl:\x20'+_0x35f854[_0x5372b3(0xf2)]),(!_0x35f854[_0x5372b3(0xf3)]||!_0x35f854[_0x5372b3(0xef)]||!_0x35f854['timeoutUrl']||!_0x35f854[_0x5372b3(0xee)])&&logger[_0x5372b3(0xf1)](_0x4f81f6['vkicU']),_0x49a884;}async[a122_0x254480(0xf5)](_0x28f3c8,_0x3ee8c4){const _0x1567eb=a122_0x254480,_0x3776f4={'yEZYU':function(_0x4f8cfe,_0x395c9c){return _0x4f8cfe(_0x395c9c);},'CgSvv':function(_0x3e884b,_0x577313){return _0x3e884b(_0x577313);}};try{const _0x558144=_0x3776f4[_0x1567eb(0x10f)](parseInt,process[_0x1567eb(0x10e)][_0x1567eb(0x113)]||'0'),_0x1fc442=_0x3776f4['CgSvv'](parseInt,process[_0x1567eb(0x10e)][_0x1567eb(0xff)]||'1'),_0x40dbe0=process['env']['BROWSERSTACK_BUILD_RUN_IDENTIFIER'],_0x45b5ac={'nodeIndex':_0x558144,'totalNodes':_0x1fc442,'projectName':this[_0x1567eb(0xe9)][_0x1567eb(0x118)],'buildName':this[_0x1567eb(0xe9)][_0x1567eb(0xfa)],'buildRunIdentifier':_0x40dbe0,'orchestrationStrategy':_0x3ee8c4,'hostInfo':this['_getHostInfo'](),'tests':_0x28f3c8['map'](_0x4ba210=>({'filePath':_0x4ba210}))},_0x1cd1ec=await RequestUtils['postSplitFiles'](_0x45b5ac);return logger[_0x1567eb(0xf1)](_0x1567eb(0xe6)+JSON['stringify'](_0x1cd1ec)),this['splitTestsAPICallCount']+=0x1,this[_0x1567eb(0x10c)](_0x1cd1ec[_0x1567eb(0xed)]||{});}catch(_0xa1cba4){return logger['debug'](_0x1567eb(0x114)+(_0xa1cba4[_0x1567eb(0xf8)]||_0xa1cba4[_0x1567eb(0x115)]())),null;}}async[a122_0x254480(0x102)](_0x3de9bb){const _0x29c7e2=a122_0x254480,_0xb929ad={};_0xb929ad[_0x29c7e2(0x116)]=_0x29c7e2(0x10d),_0xb929ad[_0x29c7e2(0xf6)]=function(_0x24f760,_0x2a959b){return _0x24f760*_0x2a959b;},_0xb929ad[_0x29c7e2(0x112)]=function(_0x62ce62,_0xcdfe9c){return _0x62ce62&&_0xcdfe9c;},_0xb929ad[_0x29c7e2(0x105)]=function(_0x15a98d,_0x3da72e){return _0x15a98d<_0x3da72e;},_0xb929ad[_0x29c7e2(0xfd)]=function(_0x32ac5a,_0x336776){return _0x32ac5a-_0x336776;},_0xb929ad['YkCnq']=_0x29c7e2(0x11f),_0xb929ad[_0x29c7e2(0x119)]=function(_0x1a5bd7,_0x291f4d){return _0x1a5bd7>_0x291f4d;};const _0x482b12=_0xb929ad;if(!_0x3de9bb)return null;try{logger[_0x29c7e2(0xf1)](_0x482b12[_0x29c7e2(0x116)]);const _0x4b2f06=_0x3de9bb[_0x29c7e2(0xef)]||this['defaultTimeoutInterval'],_0x1b2eb6=_0x482b12[_0x29c7e2(0xf6)](_0x3de9bb[_0x29c7e2(0xf3)]||this[_0x29c7e2(0xfe)],0x3e8),_0x4f5661=_0x3de9bb[_0x29c7e2(0xf2)],_0x1037ed=_0x3de9bb['resultUrl'];if(_0x482b12[_0x29c7e2(0x112)](!_0x1037ed,!_0x4f5661))return null;let _0x127f48=null;const _0xbfe8a7=Date[_0x29c7e2(0x109)]();while(_0x1037ed&&_0x482b12[_0x29c7e2(0x105)](_0x482b12[_0x29c7e2(0xfd)](Date[_0x29c7e2(0x109)](),_0xbfe8a7),_0x1b2eb6)){logger[_0x29c7e2(0xf1)](_0x29c7e2(0x101)+_0x1037ed);const _0x9b3eb2=await RequestUtils[_0x29c7e2(0x117)](_0x1037ed);logger['debug'](_0x29c7e2(0x107)+JSON[_0x29c7e2(0xe7)](_0x9b3eb2)),this[_0x29c7e2(0x100)]+=0x1;if(_0x9b3eb2&&_0x9b3eb2['tests']){_0x127f48=_0x9b3eb2[_0x29c7e2(0x103)];break;}await new Promise(_0x306bd4=>setTimeout(_0x306bd4,_0x4b2f06*0x3e8)),logger[_0x29c7e2(0xf1)](_0x29c7e2(0xf7)+_0x4b2f06+_0x29c7e2(0xe5));}if(_0x482b12[_0x29c7e2(0x112)](!_0x127f48,_0x4f5661)){logger[_0x29c7e2(0xf1)](_0x482b12[_0x29c7e2(0x104)]);const _0x456e66=await RequestUtils['getSplitFiles'](_0x4f5661);_0x456e66&&_0x456e66[_0x29c7e2(0x103)]&&(_0x127f48=_0x456e66[_0x29c7e2(0x103)]);}if(_0x127f48&&_0x482b12[_0x29c7e2(0x119)](_0x127f48[_0x29c7e2(0x106)],0x0))return _0x127f48[_0x29c7e2(0xf4)](_0x2b189f=>_0x2b189f['filePath']);return null;}catch(_0x2aa61b){return logger[_0x29c7e2(0xf1)]('[getOrderedTestFiles]\x20Exception\x20in\x20fetching\x20ordered\x20test\x20files:\x20'+(_0x2aa61b['stack']||_0x2aa61b[_0x29c7e2(0x115)]())),null;}}[a122_0x254480(0x10b)](){const _0x17134b=a122_0x254480,_0x190eb3={'GngId':function(_0x12383a,_0x29870b){return _0x12383a(_0x29870b);}},_0x4578e2=_0x190eb3['GngId'](require,'os');try{return{'hostname':_0x4578e2[_0x17134b(0x111)](),'platform':_0x4578e2[_0x17134b(0xeb)](),'release':_0x4578e2['release'](),'arch':_0x4578e2[_0x17134b(0xea)](),'totalmem':_0x4578e2['totalmem'](),'freemem':_0x4578e2[_0x17134b(0x11c)]()};}catch(_0x2695b2){return{};}}}function a122_0x56f7(){const _0x1ac308=['arch','platform','8MFsVbQ','body','resultUrl','timeoutInterval','1594773qRiMkU','debug','timeoutUrl','timeout','map','splitTests','ekMJi','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL\x20after\x20waiting\x20for\x20','stack','4185925VUZKRM','buildName','vkicU','defaultTimeoutInterval','XcPtN','defaultTimeout','BROWSERSTACK_TOTAL_NODE_COUNT','splitTestsAPICallCount','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL:\x20','getOrderedTestFiles','tests','YkCnq','nrNVz','length','[getOrderedTestFiles]\x20Response\x20from\x20result\x20URL:\x20','2313628jfqPpx','now','295206jplchA','_getHostInfo','processSplitTestsResponse','[getOrderedTestFiles]\x20Fetching\x20ordered\x20test\x20files','env','yEZYU',',\x20timeoutInterval:\x20','hostname','NUmzM','BROWSERSTACK_NODE_INDEX','[splitTests]\x20Exception\x20in\x20sending\x20test\x20files:\x20','toString','Odmiv','getSplitFiles','projectName','tsUkr','1329600FntKpy','1447758QByYJR','freemem',',\x20resultUrl:\x20','[processSplitTestsResponse]\x20Received\x20null\x20value(s)\x20for\x20some\x20attributes\x20in\x20split\x20tests\x20API\x20response','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20timeout\x20URL','[processSplitTestsResponse]\x20timeout:\x20','502978MeADHX','\x20seconds.','[splitTests]\x20Response\x20from\x20split\x20tests\x20API:\x20','stringify','14ktzGTf','config'];a122_0x56f7=function(){return _0x1ac308;};return a122_0x56f7();}module['exports']=TestOrderingServerHandler;