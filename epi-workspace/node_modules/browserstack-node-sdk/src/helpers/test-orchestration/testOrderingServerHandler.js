const a124_0x4e7137=a124_0x41e3;function a124_0x9f01(){const _0x1651ed=['env','aQqBw','34ruhaOc','length','stack','[processSplitTestsResponse]\x20Processing\x20response:\x20','../logger','[processSplitTestsResponse]\x20timeout:\x20','TpUNP',',\x20timeoutInterval:\x20','hostname','4212184ldSXep','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20timeout\x20URL','[getOrderedTestFiles]\x20Response\x20from\x20result\x20URL:\x20','processSplitTestsResponse','timeout','[getOrderedTestFiles]\x20Exception\x20in\x20fetching\x20ordered\x20test\x20files:\x20','DdfDE','getSplitFiles','WhNCs','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL:\x20','timeoutInterval','mUAcx','resultUrl','postSplitFiles','defaultTimeout','stringify','8120799zmxAqf','18184banUwA','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL\x20after\x20waiting\x20for\x20','exports','timeoutUrl','splitTestsAPICallCount','map','now','wQxYN','_getHostInfo','BROWSERSTACK_TOTAL_NODE_COUNT','release','1480VdctmE','arch','8789368YiNLZJ','BPUDI','BROWSERSTACK_NODE_INDEX','body','winstonLogger','[splitTests]\x20Response\x20from\x20split\x20tests\x20API:\x20','458728GeZdcb','config',',\x20timeoutUrl:\x20','defaultTimeoutInterval','toString','\x20seconds.','gazDv','[getOrderedTestFiles]\x20Fetching\x20ordered\x20test\x20files','debug','239523NwepZQ','buildName','getSplitTestsAPICallCount','totalmem','loIux',',\x20resultUrl:\x20','filePath','7871094BRLAHD','aiZqs','lUFdN','tests'];a124_0x9f01=function(){return _0x1651ed;};return a124_0x9f01();}function a124_0x41e3(_0x3c0704,_0x58e6e7){const _0x9f014c=a124_0x9f01();return a124_0x41e3=function(_0x41e3ff,_0x915b2){_0x41e3ff=_0x41e3ff-0xb7;let _0x52c216=_0x9f014c[_0x41e3ff];return _0x52c216;},a124_0x41e3(_0x3c0704,_0x58e6e7);}(function(_0x4dfa6e,_0x53748c){const _0x542728=a124_0x41e3,_0x540d8a=_0x4dfa6e();while(!![]){try{const _0x4ada74=parseInt(_0x542728(0xf5))/0x1+parseInt(_0x542728(0xc8))/0x2*(-parseInt(_0x542728(0xbb))/0x3)+parseInt(_0x542728(0xe2))/0x4*(-parseInt(_0x542728(0xed))/0x5)+parseInt(_0x542728(0xc2))/0x6+parseInt(_0x542728(0xef))/0x7+-parseInt(_0x542728(0xd1))/0x8+parseInt(_0x542728(0xe1))/0x9;if(_0x4ada74===_0x53748c)break;else _0x540d8a['push'](_0x540d8a['shift']());}catch(_0x44b660){_0x540d8a['push'](_0x540d8a['shift']());}}}(a124_0x9f01,0xaaac4));const logger=require(a124_0x4e7137(0xcc))[a124_0x4e7137(0xf3)],RequestUtils=require('./requestUtils');class TestOrderingServerHandler{constructor(_0x30a9c5){const _0x2518b1=a124_0x4e7137;this[_0x2518b1(0xf6)]=_0x30a9c5,this[_0x2518b1(0xe6)]=0x0,this['defaultTimeout']=0x3c,this[_0x2518b1(0xf8)]=0x5;}[a124_0x4e7137(0xbd)](){return this['splitTestsAPICallCount'];}[a124_0x4e7137(0xd4)](_0x158b84){const _0x4e7d34=a124_0x4e7137,_0x57f391={};_0x57f391['aQqBw']='[processSplitTestsResponse]\x20Received\x20null\x20value(s)\x20for\x20some\x20attributes\x20in\x20split\x20tests\x20API\x20response';const _0x31fbf0=_0x57f391;if(!_0x158b84)return null;const _0x646764={};return _0x646764['timeout']=_0x158b84['timeout']||this[_0x4e7d34(0xdf)],_0x646764['timeoutInterval']=_0x158b84[_0x4e7d34(0xdb)]||this[_0x4e7d34(0xf8)],_0x646764[_0x4e7d34(0xdd)]=_0x158b84[_0x4e7d34(0xdd)],_0x646764[_0x4e7d34(0xe5)]=_0x158b84[_0x4e7d34(0xe5)],logger[_0x4e7d34(0xba)](_0x4e7d34(0xcb)+JSON[_0x4e7d34(0xe0)](_0x158b84)),logger['debug'](_0x4e7d34(0xcd)+_0x158b84[_0x4e7d34(0xd5)]+_0x4e7d34(0xcf)+_0x158b84['timeoutInterval']+_0x4e7d34(0xc0)+_0x158b84['resultUrl']+_0x4e7d34(0xf7)+_0x158b84[_0x4e7d34(0xe5)]),(!_0x158b84[_0x4e7d34(0xd5)]||!_0x158b84[_0x4e7d34(0xdb)]||!_0x158b84[_0x4e7d34(0xe5)]||!_0x158b84[_0x4e7d34(0xdd)])&&logger[_0x4e7d34(0xba)](_0x31fbf0[_0x4e7d34(0xc7)]),_0x646764;}async['splitTests'](_0x16ebaf,_0x378b97){const _0x596a58=a124_0x4e7137,_0x34e006={'aiZqs':function(_0x37a0fa,_0x175c98){return _0x37a0fa(_0x175c98);}};try{const _0x3e48d1=_0x34e006[_0x596a58(0xc3)](parseInt,process['env'][_0x596a58(0xf1)]||'0'),_0x5878b4=_0x34e006[_0x596a58(0xc3)](parseInt,process['env'][_0x596a58(0xeb)]||'1'),_0x1ea5be=process[_0x596a58(0xc6)]['BROWSERSTACK_BUILD_RUN_IDENTIFIER'],_0x52da4c={'nodeIndex':_0x3e48d1,'totalNodes':_0x5878b4,'projectName':this[_0x596a58(0xf6)]['projectName'],'buildName':this['config'][_0x596a58(0xbc)],'buildRunIdentifier':_0x1ea5be,'orchestrationStrategy':_0x378b97,'hostInfo':this[_0x596a58(0xea)](),'tests':_0x16ebaf[_0x596a58(0xe7)](_0x13590e=>({'filePath':_0x13590e}))},_0x5006b4=await RequestUtils[_0x596a58(0xde)](_0x52da4c);return logger['debug'](_0x596a58(0xf4)+JSON[_0x596a58(0xe0)](_0x5006b4)),this[_0x596a58(0xe6)]+=0x1,this[_0x596a58(0xd4)](_0x5006b4[_0x596a58(0xf2)]||{});}catch(_0x3f201c){return logger[_0x596a58(0xba)]('[splitTests]\x20Exception\x20in\x20sending\x20test\x20files:\x20'+(_0x3f201c[_0x596a58(0xca)]||_0x3f201c[_0x596a58(0xf9)]())),null;}}async['getOrderedTestFiles'](_0x18c743){const _0x26fa7e=a124_0x4e7137,_0x452d9a={};_0x452d9a[_0x26fa7e(0xd7)]=_0x26fa7e(0xb9),_0x452d9a[_0x26fa7e(0xe9)]=function(_0x142095,_0x594a49){return _0x142095*_0x594a49;},_0x452d9a[_0x26fa7e(0xdc)]=function(_0x656257,_0x5a0a37){return _0x656257&&_0x5a0a37;},_0x452d9a['TpUNP']=function(_0xa0b360,_0x1f5ee5){return _0xa0b360<_0x1f5ee5;},_0x452d9a[_0x26fa7e(0xd9)]=function(_0x1aff96,_0x5acc76){return _0x1aff96-_0x5acc76;},_0x452d9a['gazDv']=function(_0x148833,_0x3f3c1e){return _0x148833&&_0x3f3c1e;},_0x452d9a['lUFdN']=_0x26fa7e(0xd2),_0x452d9a[_0x26fa7e(0xbf)]=function(_0x525db3,_0x481a72){return _0x525db3>_0x481a72;};const _0x60d6fa=_0x452d9a;if(!_0x18c743)return null;try{logger[_0x26fa7e(0xba)](_0x60d6fa[_0x26fa7e(0xd7)]);const _0x139858=_0x18c743['timeoutInterval']||this[_0x26fa7e(0xf8)],_0x169766=_0x60d6fa[_0x26fa7e(0xe9)](_0x18c743[_0x26fa7e(0xd5)]||this[_0x26fa7e(0xdf)],0x3e8),_0x44b0fe=_0x18c743[_0x26fa7e(0xe5)],_0x2e4b3=_0x18c743[_0x26fa7e(0xdd)];if(_0x60d6fa[_0x26fa7e(0xdc)](!_0x2e4b3,!_0x44b0fe))return null;let _0x5a0d7c=null;const _0xbdab65=Date[_0x26fa7e(0xe8)]();while(_0x2e4b3&&_0x60d6fa[_0x26fa7e(0xce)](_0x60d6fa['WhNCs'](Date[_0x26fa7e(0xe8)](),_0xbdab65),_0x169766)){logger[_0x26fa7e(0xba)](_0x26fa7e(0xda)+_0x2e4b3);const _0x3adfb3=await RequestUtils['getSplitFiles'](_0x2e4b3);logger[_0x26fa7e(0xba)](_0x26fa7e(0xd3)+JSON[_0x26fa7e(0xe0)](_0x3adfb3)),this[_0x26fa7e(0xe6)]+=0x1;if(_0x3adfb3&&_0x3adfb3[_0x26fa7e(0xc5)]){_0x5a0d7c=_0x3adfb3[_0x26fa7e(0xc5)];break;}await new Promise(_0x33bbfb=>setTimeout(_0x33bbfb,_0x139858*0x3e8)),logger[_0x26fa7e(0xba)](_0x26fa7e(0xe3)+_0x139858+_0x26fa7e(0xb7));}if(_0x60d6fa[_0x26fa7e(0xb8)](!_0x5a0d7c,_0x44b0fe)){logger[_0x26fa7e(0xba)](_0x60d6fa[_0x26fa7e(0xc4)]);const _0x11fabe=await RequestUtils[_0x26fa7e(0xd8)](_0x44b0fe);_0x11fabe&&_0x11fabe[_0x26fa7e(0xc5)]&&(_0x5a0d7c=_0x11fabe['tests']);}if(_0x5a0d7c&&_0x60d6fa['loIux'](_0x5a0d7c[_0x26fa7e(0xc9)],0x0))return _0x5a0d7c['map'](_0x470fe6=>_0x470fe6[_0x26fa7e(0xc1)]);return null;}catch(_0x535974){return logger[_0x26fa7e(0xba)](_0x26fa7e(0xd6)+(_0x535974[_0x26fa7e(0xca)]||_0x535974[_0x26fa7e(0xf9)]())),null;}}[a124_0x4e7137(0xea)](){const _0x28bc83=a124_0x4e7137,_0x306634={'BPUDI':function(_0x519e88,_0x1e396b){return _0x519e88(_0x1e396b);}},_0x21cb2c=_0x306634[_0x28bc83(0xf0)](require,'os');try{return{'hostname':_0x21cb2c[_0x28bc83(0xd0)](),'platform':_0x21cb2c['platform'](),'release':_0x21cb2c[_0x28bc83(0xec)](),'arch':_0x21cb2c[_0x28bc83(0xee)](),'totalmem':_0x21cb2c[_0x28bc83(0xbe)](),'freemem':_0x21cb2c['freemem']()};}catch(_0x1a89ea){return{};}}}module[a124_0x4e7137(0xe4)]=TestOrderingServerHandler;