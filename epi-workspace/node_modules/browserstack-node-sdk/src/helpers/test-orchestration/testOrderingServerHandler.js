const a132_0x3c131f=a132_0x1e5f;function a132_0x1e5f(_0x505657,_0x56404e){const _0x529363=a132_0x5293();return a132_0x1e5f=function(_0x1e5f03,_0x1fe6e5){_0x1e5f03=_0x1e5f03-0x122;let _0x41f0ee=_0x529363[_0x1e5f03];return _0x41f0ee;},a132_0x1e5f(_0x505657,_0x56404e);}(function(_0x1984da,_0x2f27a0){const _0x59df20=a132_0x1e5f,_0x351e1b=_0x1984da();while(!![]){try{const _0x7f456b=-parseInt(_0x59df20(0x12e))/0x1+parseInt(_0x59df20(0x155))/0x2+parseInt(_0x59df20(0x13e))/0x3*(-parseInt(_0x59df20(0x15d))/0x4)+parseInt(_0x59df20(0x14f))/0x5*(parseInt(_0x59df20(0x127))/0x6)+parseInt(_0x59df20(0x15e))/0x7+parseInt(_0x59df20(0x137))/0x8*(-parseInt(_0x59df20(0x128))/0x9)+-parseInt(_0x59df20(0x156))/0xa*(parseInt(_0x59df20(0x14d))/0xb);if(_0x7f456b===_0x2f27a0)break;else _0x351e1b['push'](_0x351e1b['shift']());}catch(_0x416efd){_0x351e1b['push'](_0x351e1b['shift']());}}}(a132_0x5293,0xd140c));const logger=require('../logger')['winstonLogger'],RequestUtils=require('./requestUtils');class TestOrderingServerHandler{constructor(_0x557842){const _0x3756f4=a132_0x1e5f;this[_0x3756f4(0x144)]=_0x557842,this[_0x3756f4(0x126)]=0x0,this['defaultTimeout']=0x3c,this[_0x3756f4(0x15b)]=0x5;}['getSplitTestsAPICallCount'](){return this['splitTestsAPICallCount'];}[a132_0x3c131f(0x14e)](_0x392f93){const _0x502109=a132_0x3c131f,_0x2be3b4={};_0x2be3b4['lceMM']=_0x502109(0x136);const _0x568ea6=_0x2be3b4;if(!_0x392f93)return null;const _0x5d69d2={};return _0x5d69d2[_0x502109(0x122)]=_0x392f93[_0x502109(0x122)]||this['defaultTimeout'],_0x5d69d2[_0x502109(0x129)]=_0x392f93['timeoutInterval']||this['defaultTimeoutInterval'],_0x5d69d2['resultUrl']=_0x392f93[_0x502109(0x150)],_0x5d69d2[_0x502109(0x14b)]=_0x392f93[_0x502109(0x14b)],logger[_0x502109(0x133)](_0x502109(0x123)+JSON[_0x502109(0x146)](_0x392f93)),logger['debug'](_0x502109(0x14a)+_0x392f93['timeout']+_0x502109(0x149)+_0x392f93[_0x502109(0x129)]+_0x502109(0x15c)+_0x392f93[_0x502109(0x150)]+_0x502109(0x154)+_0x392f93['timeoutUrl']),(!_0x392f93[_0x502109(0x122)]||!_0x392f93[_0x502109(0x129)]||!_0x392f93['timeoutUrl']||!_0x392f93[_0x502109(0x150)])&&logger[_0x502109(0x133)](_0x568ea6[_0x502109(0x158)]),_0x5d69d2;}async[a132_0x3c131f(0x135)](_0x73a567,_0x48d65a){const _0x466f22=a132_0x3c131f,_0x41fe41={'BXPeN':function(_0x4f0a8e,_0x4675ec){return _0x4f0a8e(_0x4675ec);},'poPfy':function(_0x166543,_0x4c7443){return _0x166543(_0x4c7443);}};try{const _0x32e432=_0x41fe41[_0x466f22(0x147)](parseInt,process['env']['BROWSERSTACK_NODE_INDEX']||'0'),_0x26e8f4=_0x41fe41[_0x466f22(0x14c)](parseInt,process[_0x466f22(0x140)][_0x466f22(0x157)]||'1'),_0x4d2f13=process[_0x466f22(0x140)][_0x466f22(0x134)],_0x48dc7f={'nodeIndex':_0x32e432,'totalNodes':_0x26e8f4,'projectName':this[_0x466f22(0x144)][_0x466f22(0x13b)],'buildName':this[_0x466f22(0x144)][_0x466f22(0x151)],'buildRunIdentifier':_0x4d2f13,'orchestrationStrategy':_0x48d65a,'hostInfo':this['_getHostInfo'](),'tests':_0x73a567['map'](_0x4a5354=>({'filePath':_0x4a5354}))},_0x420a79=await RequestUtils['postSplitFiles'](_0x48dc7f);return logger[_0x466f22(0x133)](_0x466f22(0x142)+JSON[_0x466f22(0x146)](_0x420a79)),this[_0x466f22(0x126)]+=0x1,this[_0x466f22(0x14e)](_0x420a79[_0x466f22(0x159)]||{});}catch(_0xf9f270){return logger[_0x466f22(0x133)](_0x466f22(0x148)+(_0xf9f270[_0x466f22(0x13c)]||_0xf9f270[_0x466f22(0x13d)]())),null;}}async['getOrderedTestFiles'](_0x5911d6){const _0x37cfbe=a132_0x3c131f,_0x30224c={};_0x30224c[_0x37cfbe(0x15a)]=_0x37cfbe(0x131),_0x30224c[_0x37cfbe(0x139)]=function(_0x1d5569,_0x7dc960){return _0x1d5569*_0x7dc960;},_0x30224c[_0x37cfbe(0x143)]=function(_0x319952,_0x15802a){return _0x319952&&_0x15802a;},_0x30224c[_0x37cfbe(0x160)]=function(_0x20ba40,_0x276808){return _0x20ba40<_0x276808;},_0x30224c[_0x37cfbe(0x145)]=function(_0x4ff40f,_0x4b47e0){return _0x4ff40f-_0x4b47e0;},_0x30224c['lAXqV']='[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20timeout\x20URL',_0x30224c[_0x37cfbe(0x12f)]=function(_0x5ae897,_0x36c6c4){return _0x5ae897>_0x36c6c4;};const _0x293aa6=_0x30224c;if(!_0x5911d6)return null;try{logger[_0x37cfbe(0x133)](_0x293aa6['dqVyd']);const _0x14b5e2=_0x5911d6[_0x37cfbe(0x129)]||this['defaultTimeoutInterval'],_0x27b219=_0x293aa6[_0x37cfbe(0x139)](_0x5911d6['timeout']||this[_0x37cfbe(0x12b)],0x3e8),_0x4790d6=_0x5911d6[_0x37cfbe(0x14b)],_0xf2b9e5=_0x5911d6[_0x37cfbe(0x150)];if(_0x293aa6[_0x37cfbe(0x143)](!_0xf2b9e5,!_0x4790d6))return null;let _0x5d0d52=null;const _0x260f26=Date[_0x37cfbe(0x138)]();while(_0xf2b9e5&&_0x293aa6[_0x37cfbe(0x160)](_0x293aa6[_0x37cfbe(0x145)](Date[_0x37cfbe(0x138)](),_0x260f26),_0x27b219)){logger[_0x37cfbe(0x133)]('[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL:\x20'+_0xf2b9e5);const _0x4db372=await RequestUtils[_0x37cfbe(0x161)](_0xf2b9e5);logger[_0x37cfbe(0x133)](_0x37cfbe(0x12d)+JSON[_0x37cfbe(0x146)](_0x4db372)),this['splitTestsAPICallCount']+=0x1;if(_0x4db372&&_0x4db372['tests']){_0x5d0d52=_0x4db372[_0x37cfbe(0x152)];break;}await new Promise(_0x22c0f2=>setTimeout(_0x22c0f2,_0x14b5e2*0x3e8)),logger['debug'](_0x37cfbe(0x15f)+_0x14b5e2+_0x37cfbe(0x125));}if(_0x293aa6[_0x37cfbe(0x143)](!_0x5d0d52,_0x4790d6)){logger['debug'](_0x293aa6['lAXqV']);const _0x30789a=await RequestUtils[_0x37cfbe(0x161)](_0x4790d6);_0x30789a&&_0x30789a[_0x37cfbe(0x152)]&&(_0x5d0d52=_0x30789a[_0x37cfbe(0x152)]);}if(_0x5d0d52&&_0x293aa6[_0x37cfbe(0x12f)](_0x5d0d52['length'],0x0))return _0x5d0d52[_0x37cfbe(0x132)](_0x2e5534=>_0x2e5534[_0x37cfbe(0x130)]);return null;}catch(_0x3e322d){return logger[_0x37cfbe(0x133)]('[getOrderedTestFiles]\x20Exception\x20in\x20fetching\x20ordered\x20test\x20files:\x20'+(_0x3e322d[_0x37cfbe(0x13c)]||_0x3e322d[_0x37cfbe(0x13d)]())),null;}}[a132_0x3c131f(0x13f)](){const _0x2ded30=a132_0x3c131f,_0x2c7530={'xJgkj':function(_0xcdf21c,_0x1302fc){return _0xcdf21c(_0x1302fc);}},_0xef2755=_0x2c7530[_0x2ded30(0x141)](require,'os');try{return{'hostname':_0xef2755['hostname'](),'platform':_0xef2755[_0x2ded30(0x13a)](),'release':_0xef2755[_0x2ded30(0x12a)](),'arch':_0xef2755[_0x2ded30(0x124)](),'totalmem':_0xef2755[_0x2ded30(0x12c)](),'freemem':_0xef2755['freemem']()};}catch(_0x24128e){return{};}}}module[a132_0x3c131f(0x153)]=TestOrderingServerHandler;function a132_0x5293(){const _0x532da7=[',\x20resultUrl:\x20','4TzBKjB','8714433TkjgrX','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL\x20after\x20waiting\x20for\x20','UeroJ','getSplitFiles','timeout','[processSplitTestsResponse]\x20Processing\x20response:\x20','arch','\x20seconds.','splitTestsAPICallCount','1374hzbhqu','9tKNZNZ','timeoutInterval','release','defaultTimeout','totalmem','[getOrderedTestFiles]\x20Response\x20from\x20result\x20URL:\x20','915452DMjKSI','GHejg','filePath','[getOrderedTestFiles]\x20Fetching\x20ordered\x20test\x20files','map','debug','BROWSERSTACK_BUILD_RUN_IDENTIFIER','splitTests','[processSplitTestsResponse]\x20Received\x20null\x20value(s)\x20for\x20some\x20attributes\x20in\x20split\x20tests\x20API\x20response','4141552efMTZy','now','jkPLX','platform','projectName','stack','toString','4672791NIUlNT','_getHostInfo','env','xJgkj','[splitTests]\x20Response\x20from\x20split\x20tests\x20API:\x20','iTyEP','config','hARks','stringify','BXPeN','[splitTests]\x20Exception\x20in\x20sending\x20test\x20files:\x20',',\x20timeoutInterval:\x20','[processSplitTestsResponse]\x20timeout:\x20','timeoutUrl','poPfy','698467FFkVfy','processSplitTestsResponse','31885lLVfuZ','resultUrl','buildName','tests','exports',',\x20timeoutUrl:\x20','2412176dZMJfn','10kUnMJO','BROWSERSTACK_TOTAL_NODE_COUNT','lceMM','body','dqVyd','defaultTimeoutInterval'];a132_0x5293=function(){return _0x532da7;};return a132_0x5293();}