const a137_0x45bdf2=a137_0x1f58;function a137_0x1f58(_0x312b0a,_0x176523){const _0x5f2178=a137_0x5f21();return a137_0x1f58=function(_0x1f58dc,_0x16e7f7){_0x1f58dc=_0x1f58dc-0x11d;let _0x55b65c=_0x5f2178[_0x1f58dc];return _0x55b65c;},a137_0x1f58(_0x312b0a,_0x176523);}(function(_0x1f34ba,_0x46d9a2){const _0xe598cf=a137_0x1f58,_0x1b0abb=_0x1f34ba();while(!![]){try{const _0x3dc1aa=parseInt(_0xe598cf(0x154))/0x1+parseInt(_0xe598cf(0x15d))/0x2+parseInt(_0xe598cf(0x150))/0x3+-parseInt(_0xe598cf(0x11f))/0x4*(-parseInt(_0xe598cf(0x160))/0x5)+-parseInt(_0xe598cf(0x14c))/0x6+parseInt(_0xe598cf(0x132))/0x7+parseInt(_0xe598cf(0x13e))/0x8*(-parseInt(_0xe598cf(0x141))/0x9);if(_0x3dc1aa===_0x46d9a2)break;else _0x1b0abb['push'](_0x1b0abb['shift']());}catch(_0x4710f0){_0x1b0abb['push'](_0x1b0abb['shift']());}}}(a137_0x5f21,0x31ec5));const logger=require('../logger')[a137_0x45bdf2(0x125)],RequestUtils=require(a137_0x45bdf2(0x12b));class TestOrderingServerHandler{constructor(_0x394d3){const _0x1b1a55=a137_0x45bdf2;this[_0x1b1a55(0x15b)]=_0x394d3,this[_0x1b1a55(0x13d)]=0x0,this['defaultTimeout']=0x3c,this[_0x1b1a55(0x155)]=0x5;}[a137_0x45bdf2(0x147)](){const _0x32731d=a137_0x45bdf2;return this[_0x32731d(0x13d)];}[a137_0x45bdf2(0x14a)](_0x4de3fd){const _0x51b32c=a137_0x45bdf2,_0x48639a={};_0x48639a[_0x51b32c(0x13f)]=_0x51b32c(0x11e);const _0x514ac8=_0x48639a;if(!_0x4de3fd)return null;const _0x5f44fa={};return _0x5f44fa[_0x51b32c(0x11d)]=_0x4de3fd[_0x51b32c(0x11d)]||this[_0x51b32c(0x13a)],_0x5f44fa[_0x51b32c(0x151)]=_0x4de3fd['timeoutInterval']||this[_0x51b32c(0x155)],_0x5f44fa[_0x51b32c(0x15c)]=_0x4de3fd['resultUrl'],_0x5f44fa['timeoutUrl']=_0x4de3fd[_0x51b32c(0x157)],logger['debug'](_0x51b32c(0x139)+JSON[_0x51b32c(0x12a)](_0x4de3fd)),logger['debug'](_0x51b32c(0x134)+_0x4de3fd[_0x51b32c(0x11d)]+_0x51b32c(0x149)+_0x4de3fd[_0x51b32c(0x151)]+_0x51b32c(0x13b)+_0x4de3fd[_0x51b32c(0x15c)]+',\x20timeoutUrl:\x20'+_0x4de3fd[_0x51b32c(0x157)]),(!_0x4de3fd[_0x51b32c(0x11d)]||!_0x4de3fd['timeoutInterval']||!_0x4de3fd['timeoutUrl']||!_0x4de3fd[_0x51b32c(0x15c)])&&logger[_0x51b32c(0x15a)](_0x514ac8[_0x51b32c(0x13f)]),_0x5f44fa;}async[a137_0x45bdf2(0x129)](_0x5017bd,_0x44976d){const _0x4b6526=a137_0x45bdf2,_0x48fb24={'gmIjj':function(_0x428ceb,_0x2de481){return _0x428ceb(_0x2de481);}};try{const _0x26cc6a=_0x48fb24['gmIjj'](parseInt,process[_0x4b6526(0x124)]['BROWSERSTACK_NODE_INDEX']||'0'),_0x1b8646=_0x48fb24['gmIjj'](parseInt,process[_0x4b6526(0x124)][_0x4b6526(0x153)]||'1'),_0x3c2a9b=process['env'][_0x4b6526(0x12c)],_0x5f1eb7={'nodeIndex':_0x26cc6a,'totalNodes':_0x1b8646,'projectName':this[_0x4b6526(0x15b)][_0x4b6526(0x14f)],'buildName':this[_0x4b6526(0x15b)][_0x4b6526(0x12e)],'buildRunIdentifier':_0x3c2a9b,'orchestrationStrategy':_0x44976d,'hostInfo':this[_0x4b6526(0x143)](),'tests':_0x5017bd[_0x4b6526(0x156)](_0x4c4bce=>({'filePath':_0x4c4bce}))},_0x5157f1=await RequestUtils[_0x4b6526(0x137)](_0x5f1eb7);return logger[_0x4b6526(0x15a)](_0x4b6526(0x128)+JSON[_0x4b6526(0x12a)](_0x5157f1)),this[_0x4b6526(0x13d)]+=0x1,this['processSplitTestsResponse'](_0x5157f1[_0x4b6526(0x159)]||{});}catch(_0x393e40){return logger[_0x4b6526(0x15a)](_0x4b6526(0x127)+(_0x393e40[_0x4b6526(0x13c)]||_0x393e40['toString']())),null;}}async[a137_0x45bdf2(0x14e)](_0x5dbe1e){const _0x38cfd3=a137_0x45bdf2,_0x12ba4a={};_0x12ba4a['EBjiL']=_0x38cfd3(0x130),_0x12ba4a[_0x38cfd3(0x126)]=function(_0x2932ec,_0x4451df){return _0x2932ec*_0x4451df;},_0x12ba4a[_0x38cfd3(0x152)]=function(_0x136ad7,_0x573805){return _0x136ad7&&_0x573805;},_0x12ba4a[_0x38cfd3(0x138)]=function(_0x26fbd9,_0x5cefaf){return _0x26fbd9<_0x5cefaf;},_0x12ba4a[_0x38cfd3(0x14d)]=function(_0x3f571a,_0x50fa19){return _0x3f571a-_0x50fa19;},_0x12ba4a[_0x38cfd3(0x14b)]=function(_0x1bf2b4,_0x58d764){return _0x1bf2b4&&_0x58d764;},_0x12ba4a['FGfVc']=_0x38cfd3(0x120),_0x12ba4a[_0x38cfd3(0x12d)]=function(_0x450b32,_0x3da8ed){return _0x450b32>_0x3da8ed;};const _0x3150bb=_0x12ba4a;if(!_0x5dbe1e)return null;try{logger['debug'](_0x3150bb[_0x38cfd3(0x136)]);const _0x5d8ea2=_0x5dbe1e[_0x38cfd3(0x151)]||this[_0x38cfd3(0x155)],_0x538a06=_0x3150bb['hQqUa'](_0x5dbe1e['timeout']||this[_0x38cfd3(0x13a)],0x3e8),_0x4f1c6f=_0x5dbe1e[_0x38cfd3(0x157)],_0x170ae6=_0x5dbe1e['resultUrl'];if(_0x3150bb[_0x38cfd3(0x152)](!_0x170ae6,!_0x4f1c6f))return null;let _0x2ab9f6=null;const _0x2a7440=Date[_0x38cfd3(0x122)]();while(_0x170ae6&&_0x3150bb['FuyfJ'](_0x3150bb['exfjz'](Date[_0x38cfd3(0x122)](),_0x2a7440),_0x538a06)){logger[_0x38cfd3(0x15a)](_0x38cfd3(0x15e)+_0x170ae6);const _0x2eda4a=await RequestUtils[_0x38cfd3(0x12f)](_0x170ae6);logger[_0x38cfd3(0x15a)]('[getOrderedTestFiles]\x20Response\x20from\x20result\x20URL:\x20'+JSON[_0x38cfd3(0x12a)](_0x2eda4a)),this[_0x38cfd3(0x13d)]+=0x1;if(_0x2eda4a&&_0x2eda4a[_0x38cfd3(0x146)]){_0x2ab9f6=_0x2eda4a[_0x38cfd3(0x146)];break;}await new Promise(_0x18a3c1=>setTimeout(_0x18a3c1,_0x5d8ea2*0x3e8)),logger[_0x38cfd3(0x15a)](_0x38cfd3(0x148)+_0x5d8ea2+_0x38cfd3(0x140));}if(_0x3150bb[_0x38cfd3(0x14b)](!_0x2ab9f6,_0x4f1c6f)){logger[_0x38cfd3(0x15a)](_0x3150bb[_0x38cfd3(0x144)]);const _0x44372c=await RequestUtils['getSplitFiles'](_0x4f1c6f);_0x44372c&&_0x44372c['tests']&&(_0x2ab9f6=_0x44372c[_0x38cfd3(0x146)]);}if(_0x2ab9f6&&_0x3150bb[_0x38cfd3(0x12d)](_0x2ab9f6[_0x38cfd3(0x15f)],0x0))return _0x2ab9f6[_0x38cfd3(0x156)](_0x385d8a=>_0x385d8a[_0x38cfd3(0x135)]);return null;}catch(_0x57d1cf){return logger['debug'](_0x38cfd3(0x131)+(_0x57d1cf[_0x38cfd3(0x13c)]||_0x57d1cf[_0x38cfd3(0x145)]())),null;}}[a137_0x45bdf2(0x143)](){const _0x3a0f7a=a137_0x45bdf2,_0x12aad2={'VLurL':function(_0x4dff91,_0x50343a){return _0x4dff91(_0x50343a);}},_0x3ba042=_0x12aad2[_0x3a0f7a(0x121)](require,'os');try{return{'hostname':_0x3ba042[_0x3a0f7a(0x142)](),'platform':_0x3ba042['platform'](),'release':_0x3ba042[_0x3a0f7a(0x158)](),'arch':_0x3ba042['arch'](),'totalmem':_0x3ba042[_0x3a0f7a(0x123)](),'freemem':_0x3ba042['freemem']()};}catch(_0x52a515){return{};}}}function a137_0x5f21(){const _0x4fa4c4=['[processSplitTestsResponse]\x20Received\x20null\x20value(s)\x20for\x20some\x20attributes\x20in\x20split\x20tests\x20API\x20response','4nobqNR','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20timeout\x20URL','VLurL','now','totalmem','env','winstonLogger','hQqUa','[splitTests]\x20Exception\x20in\x20sending\x20test\x20files:\x20','[splitTests]\x20Response\x20from\x20split\x20tests\x20API:\x20','splitTests','stringify','./requestUtils','BROWSERSTACK_BUILD_RUN_IDENTIFIER','yjVNP','buildName','getSplitFiles','[getOrderedTestFiles]\x20Fetching\x20ordered\x20test\x20files','[getOrderedTestFiles]\x20Exception\x20in\x20fetching\x20ordered\x20test\x20files:\x20','1243466HlyWuG','exports','[processSplitTestsResponse]\x20timeout:\x20','filePath','EBjiL','postSplitFiles','FuyfJ','[processSplitTestsResponse]\x20Processing\x20response:\x20','defaultTimeout',',\x20resultUrl:\x20','stack','splitTestsAPICallCount','264xDknqj','MDnNi','\x20seconds.','176643HBQiMn','hostname','_getHostInfo','FGfVc','toString','tests','getSplitTestsAPICallCount','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL\x20after\x20waiting\x20for\x20',',\x20timeoutInterval:\x20','processSplitTestsResponse','iUfdX','1795806EjJGKI','exfjz','getOrderedTestFiles','projectName','1050201FYLuNN','timeoutInterval','TwOYc','BROWSERSTACK_TOTAL_NODE_COUNT','197233VbKEiH','defaultTimeoutInterval','map','timeoutUrl','release','body','debug','config','resultUrl','722158zZJKRv','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL:\x20','length','327300JUFIOw','timeout'];a137_0x5f21=function(){return _0x4fa4c4;};return a137_0x5f21();}module[a137_0x45bdf2(0x133)]=TestOrderingServerHandler;