const a137_0x5831f7=a137_0x1ac6;(function(_0x1e8372,_0xbe17a5){const _0x4203bf=a137_0x1ac6,_0x57d099=_0x1e8372();while(!![]){try{const _0x5cc50f=parseInt(_0x4203bf(0x19f))/0x1+parseInt(_0x4203bf(0x193))/0x2+parseInt(_0x4203bf(0x1b5))/0x3+-parseInt(_0x4203bf(0x1b9))/0x4*(-parseInt(_0x4203bf(0x189))/0x5)+parseInt(_0x4203bf(0x1ad))/0x6+parseInt(_0x4203bf(0x1a5))/0x7+-parseInt(_0x4203bf(0x18a))/0x8*(parseInt(_0x4203bf(0x194))/0x9);if(_0x5cc50f===_0xbe17a5)break;else _0x57d099['push'](_0x57d099['shift']());}catch(_0x4c60b1){_0x57d099['push'](_0x57d099['shift']());}}}(a137_0xce40,0xe6c6b));const logger=require('../logger')[a137_0x5831f7(0x19e)],RequestUtils=require(a137_0x5831f7(0x18c));class TestOrderingServerHandler{constructor(_0x48da44){const _0x549291=a137_0x5831f7;this['config']=_0x48da44,this[_0x549291(0x192)]=0x0,this[_0x549291(0x18d)]=0x3c,this['defaultTimeoutInterval']=0x5;}[a137_0x5831f7(0x18e)](){const _0x2d25a8=a137_0x5831f7;return this[_0x2d25a8(0x192)];}['processSplitTestsResponse'](_0x5a6cc3){const _0x3e59af=a137_0x5831f7,_0x474181={};_0x474181[_0x3e59af(0x17f)]=_0x3e59af(0x1a2);const _0x84a36c=_0x474181;if(!_0x5a6cc3)return null;const _0x1ccbd6={};return _0x1ccbd6['timeout']=_0x5a6cc3['timeout']||this[_0x3e59af(0x18d)],_0x1ccbd6['timeoutInterval']=_0x5a6cc3[_0x3e59af(0x1b0)]||this['defaultTimeoutInterval'],_0x1ccbd6[_0x3e59af(0x1a8)]=_0x5a6cc3['resultUrl'],_0x1ccbd6[_0x3e59af(0x1a7)]=_0x5a6cc3[_0x3e59af(0x1a7)],logger[_0x3e59af(0x1a3)]('[processSplitTestsResponse]\x20Processing\x20response:\x20'+JSON[_0x3e59af(0x1ab)](_0x5a6cc3)),logger[_0x3e59af(0x1a3)](_0x3e59af(0x182)+_0x5a6cc3[_0x3e59af(0x187)]+_0x3e59af(0x190)+_0x5a6cc3[_0x3e59af(0x1b0)]+',\x20resultUrl:\x20'+_0x5a6cc3[_0x3e59af(0x1a8)]+_0x3e59af(0x196)+_0x5a6cc3['timeoutUrl']),(!_0x5a6cc3[_0x3e59af(0x187)]||!_0x5a6cc3['timeoutInterval']||!_0x5a6cc3['timeoutUrl']||!_0x5a6cc3[_0x3e59af(0x1a8)])&&logger[_0x3e59af(0x1a3)](_0x84a36c['gnbtI']),_0x1ccbd6;}async['splitTests'](_0x46a966,_0x1cb115){const _0x24970c=a137_0x5831f7,_0x350e7a={'aoziS':function(_0x313afb,_0x5ed3e9){return _0x313afb(_0x5ed3e9);},'FWdKu':function(_0x235305,_0x3c3028){return _0x235305(_0x3c3028);}};try{const _0x5a4126=_0x350e7a[_0x24970c(0x17e)](parseInt,process['env'][_0x24970c(0x1a4)]||'0'),_0x16f140=_0x350e7a[_0x24970c(0x186)](parseInt,process[_0x24970c(0x181)][_0x24970c(0x1b6)]||'1'),_0x280c20=process[_0x24970c(0x181)]['BROWSERSTACK_BUILD_RUN_IDENTIFIER'],_0x1608e6={'nodeIndex':_0x5a4126,'totalNodes':_0x16f140,'projectName':this[_0x24970c(0x18f)][_0x24970c(0x1a6)],'buildName':this[_0x24970c(0x18f)]['buildName'],'buildRunIdentifier':_0x280c20,'orchestrationStrategy':_0x1cb115,'hostInfo':this[_0x24970c(0x1b7)](),'tests':_0x46a966[_0x24970c(0x1bc)](_0x375e2d=>({'filePath':_0x375e2d}))},_0x275b10=await RequestUtils[_0x24970c(0x1af)](_0x1608e6);return logger[_0x24970c(0x1a3)](_0x24970c(0x1b1)+JSON[_0x24970c(0x1ab)](_0x275b10)),this[_0x24970c(0x192)]+=0x1,this['processSplitTestsResponse'](_0x275b10['body']||{});}catch(_0x553a08){return logger[_0x24970c(0x1a3)](_0x24970c(0x19c)+(_0x553a08[_0x24970c(0x191)]||_0x553a08['toString']())),null;}}async[a137_0x5831f7(0x184)](_0x151104){const _0x362c6c=a137_0x5831f7,_0x53f522={};_0x53f522[_0x362c6c(0x199)]=_0x362c6c(0x198),_0x53f522[_0x362c6c(0x185)]=function(_0x3c505a,_0x116ed1){return _0x3c505a*_0x116ed1;},_0x53f522[_0x362c6c(0x1ac)]=function(_0x50be0e,_0x201d64){return _0x50be0e&&_0x201d64;},_0x53f522['jdbSi']=function(_0x5b570f,_0xb03b7f){return _0x5b570f<_0xb03b7f;},_0x53f522[_0x362c6c(0x195)]=function(_0x1acac0,_0x2dbc63){return _0x1acac0-_0x2dbc63;},_0x53f522[_0x362c6c(0x197)]=function(_0xed1018,_0x427e8a){return _0xed1018&&_0x427e8a;},_0x53f522[_0x362c6c(0x1a1)]=_0x362c6c(0x188),_0x53f522[_0x362c6c(0x1a9)]=function(_0x3caab1,_0x2a5516){return _0x3caab1>_0x2a5516;};const _0x14a250=_0x53f522;if(!_0x151104)return null;try{logger[_0x362c6c(0x1a3)](_0x14a250[_0x362c6c(0x199)]);const _0x4d0fbb=_0x151104[_0x362c6c(0x1b0)]||this['defaultTimeoutInterval'],_0x4909ce=_0x14a250[_0x362c6c(0x185)](_0x151104['timeout']||this[_0x362c6c(0x18d)],0x3e8),_0x486db5=_0x151104[_0x362c6c(0x1a7)],_0x4c731a=_0x151104[_0x362c6c(0x1a8)];if(_0x14a250[_0x362c6c(0x1ac)](!_0x4c731a,!_0x486db5))return null;let _0x39a0fc=null;const _0x379034=Date['now']();while(_0x4c731a&&_0x14a250[_0x362c6c(0x180)](_0x14a250[_0x362c6c(0x195)](Date[_0x362c6c(0x1a0)](),_0x379034),_0x4909ce)){logger[_0x362c6c(0x1a3)]('[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL:\x20'+_0x4c731a);const _0x2eb9c0=await RequestUtils['getSplitFiles'](_0x4c731a);logger[_0x362c6c(0x1a3)](_0x362c6c(0x18b)+JSON[_0x362c6c(0x1ab)](_0x2eb9c0)),this['splitTestsAPICallCount']+=0x1;if(_0x2eb9c0&&_0x2eb9c0[_0x362c6c(0x1b3)]){_0x39a0fc=_0x2eb9c0[_0x362c6c(0x1b3)];break;}await new Promise(_0x16153f=>setTimeout(_0x16153f,_0x4d0fbb*0x3e8)),logger[_0x362c6c(0x1a3)](_0x362c6c(0x1bb)+_0x4d0fbb+_0x362c6c(0x1aa));}if(_0x14a250['IdVsL'](!_0x39a0fc,_0x486db5)){logger[_0x362c6c(0x1a3)](_0x14a250[_0x362c6c(0x1a1)]);const _0x4d28c6=await RequestUtils['getSplitFiles'](_0x486db5);_0x4d28c6&&_0x4d28c6[_0x362c6c(0x1b3)]&&(_0x39a0fc=_0x4d28c6[_0x362c6c(0x1b3)]);}if(_0x39a0fc&&_0x14a250[_0x362c6c(0x1a9)](_0x39a0fc[_0x362c6c(0x19a)],0x0))return _0x39a0fc['map'](_0x2b19e9=>_0x2b19e9[_0x362c6c(0x1b8)]);return null;}catch(_0x498b37){return logger['debug']('[getOrderedTestFiles]\x20Exception\x20in\x20fetching\x20ordered\x20test\x20files:\x20'+(_0x498b37[_0x362c6c(0x191)]||_0x498b37['toString']())),null;}}['_getHostInfo'](){const _0xe29b98=a137_0x5831f7,_0x2b3e30={'LFYSL':function(_0x16fc7b,_0x23f3af){return _0x16fc7b(_0x23f3af);}},_0x222b5f=_0x2b3e30['LFYSL'](require,'os');try{return{'hostname':_0x222b5f[_0xe29b98(0x19d)](),'platform':_0x222b5f[_0xe29b98(0x19b)](),'release':_0x222b5f[_0xe29b98(0x1ba)](),'arch':_0x222b5f[_0xe29b98(0x1b4)](),'totalmem':_0x222b5f[_0xe29b98(0x183)](),'freemem':_0x222b5f[_0xe29b98(0x1ae)]()};}catch(_0x494c53){return{};}}}function a137_0x1ac6(_0x3fb1e9,_0x5771c3){const _0xce4023=a137_0xce40();return a137_0x1ac6=function(_0x1ac676,_0x3d462d){_0x1ac676=_0x1ac676-0x17e;let _0x963f6=_0xce4023[_0x1ac676];return _0x963f6;},a137_0x1ac6(_0x3fb1e9,_0x5771c3);}module[a137_0x5831f7(0x1b2)]=TestOrderingServerHandler;function a137_0xce40(){const _0x2fbef2=['getSplitTestsAPICallCount','config',',\x20timeoutInterval:\x20','stack','splitTestsAPICallCount','1842454zEuYPh','68814VPvpld','raRQC',',\x20timeoutUrl:\x20','IdVsL','[getOrderedTestFiles]\x20Fetching\x20ordered\x20test\x20files','mpoYN','length','platform','[splitTests]\x20Exception\x20in\x20sending\x20test\x20files:\x20','hostname','winstonLogger','1737777ZTKTDQ','now','GjTQn','[processSplitTestsResponse]\x20Received\x20null\x20value(s)\x20for\x20some\x20attributes\x20in\x20split\x20tests\x20API\x20response','debug','BROWSERSTACK_NODE_INDEX','8404060nEmuOE','projectName','timeoutUrl','resultUrl','ejcGU','\x20seconds.','stringify','xefOF','11204220syZsAQ','freemem','postSplitFiles','timeoutInterval','[splitTests]\x20Response\x20from\x20split\x20tests\x20API:\x20','exports','tests','arch','5146146FwEPqe','BROWSERSTACK_TOTAL_NODE_COUNT','_getHostInfo','filePath','4sedNRr','release','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL\x20after\x20waiting\x20for\x20','map','aoziS','gnbtI','jdbSi','env','[processSplitTestsResponse]\x20timeout:\x20','totalmem','getOrderedTestFiles','lMerw','FWdKu','timeout','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20timeout\x20URL','6470985FQpCbr','8152uvhKfR','[getOrderedTestFiles]\x20Response\x20from\x20result\x20URL:\x20','./requestUtils','defaultTimeout'];a137_0xce40=function(){return _0x2fbef2;};return a137_0xce40();}