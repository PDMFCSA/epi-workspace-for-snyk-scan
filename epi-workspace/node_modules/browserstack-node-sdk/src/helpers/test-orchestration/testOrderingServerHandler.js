const a127_0x43ff4d=a127_0x374e;function a127_0x488c(){const _0x116282=['map',',\x20timeoutInterval:\x20','_getHostInfo','tPuRO','platform','FYCvp','timeoutUrl','timeoutInterval','1477954iCwcCX','[splitTests]\x20Exception\x20in\x20sending\x20test\x20files:\x20','totalmem','jORGm','length','5329492phknNE','defaultTimeout','exports','JqrQp','BROWSERSTACK_NODE_INDEX','tests','231576HGpZVD','splitTests','resultUrl','BROWSERSTACK_BUILD_RUN_IDENTIFIER','SOsEJ',',\x20resultUrl:\x20','splitTestsAPICallCount','env','arch','Wfayl','../logger','whdSx','freemem','postSplitFiles','4683246ajTkoj','3BNTjfQ','stack','getSplitFiles','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL:\x20','260540nlvnBK','stringify',',\x20timeoutUrl:\x20','debug','[getOrderedTestFiles]\x20Fetching\x20ordered\x20test\x20files','BROWSERSTACK_TOTAL_NODE_COUNT','processSplitTestsResponse','31214151kXGTgK','getSplitTestsAPICallCount','winstonLogger','timeout','5527288ThrHut','[splitTests]\x20Response\x20from\x20split\x20tests\x20API:\x20','now','NzVyI','buildName','toString','52iMQvYM','\x20seconds.','config','filePath','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20timeout\x20URL','lObaV','pyCwa','[getOrderedTestFiles]\x20Exception\x20in\x20fetching\x20ordered\x20test\x20files:\x20','defaultTimeoutInterval','getOrderedTestFiles','HjCca','[getOrderedTestFiles]\x20Response\x20from\x20result\x20URL:\x20'];a127_0x488c=function(){return _0x116282;};return a127_0x488c();}(function(_0x447576,_0x1fedda){const _0x1135aa=a127_0x374e,_0x1c55bd=_0x447576();while(!![]){try{const _0x4cdff4=-parseInt(_0x1135aa(0x16d))/0x1+-parseInt(_0x1135aa(0x162))/0x2*(parseInt(_0x1135aa(0x139))/0x3)+-parseInt(_0x1135aa(0x14e))/0x4*(-parseInt(_0x1135aa(0x13d))/0x5)+-parseInt(_0x1135aa(0x138))/0x6+-parseInt(_0x1135aa(0x167))/0x7+-parseInt(_0x1135aa(0x148))/0x8+parseInt(_0x1135aa(0x144))/0x9;if(_0x4cdff4===_0x1fedda)break;else _0x1c55bd['push'](_0x1c55bd['shift']());}catch(_0x3716d8){_0x1c55bd['push'](_0x1c55bd['shift']());}}}(a127_0x488c,0xe60ca));const logger=require(a127_0x43ff4d(0x134))[a127_0x43ff4d(0x146)],RequestUtils=require('./requestUtils');class TestOrderingServerHandler{constructor(_0x37bf3f){const _0x4651d6=a127_0x43ff4d;this[_0x4651d6(0x150)]=_0x37bf3f,this[_0x4651d6(0x130)]=0x0,this['defaultTimeout']=0x3c,this[_0x4651d6(0x156)]=0x5;}[a127_0x43ff4d(0x145)](){const _0xfda754=a127_0x43ff4d;return this[_0xfda754(0x130)];}[a127_0x43ff4d(0x143)](_0x3a58cf){const _0x4044df=a127_0x43ff4d,_0x34959b={};_0x34959b[_0x4044df(0x154)]='[processSplitTestsResponse]\x20Received\x20null\x20value(s)\x20for\x20some\x20attributes\x20in\x20split\x20tests\x20API\x20response';const _0x1da5ae=_0x34959b;if(!_0x3a58cf)return null;const _0x131e21={};return _0x131e21[_0x4044df(0x147)]=_0x3a58cf[_0x4044df(0x147)]||this['defaultTimeout'],_0x131e21[_0x4044df(0x161)]=_0x3a58cf[_0x4044df(0x161)]||this[_0x4044df(0x156)],_0x131e21['resultUrl']=_0x3a58cf['resultUrl'],_0x131e21['timeoutUrl']=_0x3a58cf[_0x4044df(0x160)],logger[_0x4044df(0x140)]('[processSplitTestsResponse]\x20Processing\x20response:\x20'+JSON[_0x4044df(0x13e)](_0x3a58cf)),logger[_0x4044df(0x140)]('[processSplitTestsResponse]\x20timeout:\x20'+_0x3a58cf[_0x4044df(0x147)]+_0x4044df(0x15b)+_0x3a58cf[_0x4044df(0x161)]+_0x4044df(0x12f)+_0x3a58cf[_0x4044df(0x16f)]+_0x4044df(0x13f)+_0x3a58cf[_0x4044df(0x160)]),(!_0x3a58cf[_0x4044df(0x147)]||!_0x3a58cf[_0x4044df(0x161)]||!_0x3a58cf['timeoutUrl']||!_0x3a58cf['resultUrl'])&&logger[_0x4044df(0x140)](_0x1da5ae[_0x4044df(0x154)]),_0x131e21;}async[a127_0x43ff4d(0x16e)](_0x5bd1a8,_0x4be1b0){const _0x52cebf=a127_0x43ff4d,_0x4d4fc4={'lObaV':function(_0x21b4de,_0xb46646){return _0x21b4de(_0xb46646);}};try{const _0x5eb794=_0x4d4fc4[_0x52cebf(0x153)](parseInt,process['env'][_0x52cebf(0x16b)]||'0'),_0x13d468=_0x4d4fc4[_0x52cebf(0x153)](parseInt,process[_0x52cebf(0x131)][_0x52cebf(0x142)]||'1'),_0x4e4ed9=process[_0x52cebf(0x131)][_0x52cebf(0x170)],_0x277ed9={'nodeIndex':_0x5eb794,'totalNodes':_0x13d468,'projectName':this[_0x52cebf(0x150)]['projectName'],'buildName':this[_0x52cebf(0x150)][_0x52cebf(0x14c)],'buildRunIdentifier':_0x4e4ed9,'orchestrationStrategy':_0x4be1b0,'hostInfo':this[_0x52cebf(0x15c)](),'tests':_0x5bd1a8[_0x52cebf(0x15a)](_0xc50e52=>({'filePath':_0xc50e52}))},_0x37ba5f=await RequestUtils[_0x52cebf(0x137)](_0x277ed9);return logger['debug'](_0x52cebf(0x149)+JSON['stringify'](_0x37ba5f)),this['splitTestsAPICallCount']+=0x1,this[_0x52cebf(0x143)](_0x37ba5f['body']||{});}catch(_0x43ee1a){return logger[_0x52cebf(0x140)](_0x52cebf(0x163)+(_0x43ee1a[_0x52cebf(0x13a)]||_0x43ee1a['toString']())),null;}}async[a127_0x43ff4d(0x157)](_0x3a2f38){const _0x40eea4=a127_0x43ff4d,_0x5806c1={};_0x5806c1[_0x40eea4(0x15f)]=_0x40eea4(0x141),_0x5806c1[_0x40eea4(0x16a)]=function(_0x22aa10,_0x214504){return _0x22aa10*_0x214504;},_0x5806c1[_0x40eea4(0x135)]=function(_0x42016a,_0x31710d){return _0x42016a&&_0x31710d;},_0x5806c1[_0x40eea4(0x165)]=function(_0x41c1d4,_0x566f83){return _0x41c1d4<_0x566f83;},_0x5806c1[_0x40eea4(0x15d)]=function(_0x4be669,_0x504987){return _0x4be669-_0x504987;},_0x5806c1[_0x40eea4(0x12e)]=function(_0x2491c5,_0x3414a2){return _0x2491c5&&_0x3414a2;},_0x5806c1[_0x40eea4(0x133)]=_0x40eea4(0x152),_0x5806c1[_0x40eea4(0x158)]=function(_0x163bd2,_0x3186ae){return _0x163bd2>_0x3186ae;};const _0x2180ce=_0x5806c1;if(!_0x3a2f38)return null;try{logger[_0x40eea4(0x140)](_0x2180ce[_0x40eea4(0x15f)]);const _0x5e547c=_0x3a2f38[_0x40eea4(0x161)]||this[_0x40eea4(0x156)],_0x45722e=_0x2180ce[_0x40eea4(0x16a)](_0x3a2f38['timeout']||this[_0x40eea4(0x168)],0x3e8),_0x4e94f6=_0x3a2f38[_0x40eea4(0x160)],_0x506a0b=_0x3a2f38[_0x40eea4(0x16f)];if(_0x2180ce[_0x40eea4(0x135)](!_0x506a0b,!_0x4e94f6))return null;let _0x50364d=null;const _0x3bcc38=Date[_0x40eea4(0x14a)]();while(_0x506a0b&&_0x2180ce[_0x40eea4(0x165)](_0x2180ce['tPuRO'](Date[_0x40eea4(0x14a)](),_0x3bcc38),_0x45722e)){logger[_0x40eea4(0x140)](_0x40eea4(0x13c)+_0x506a0b);const _0x126a87=await RequestUtils['getSplitFiles'](_0x506a0b);logger[_0x40eea4(0x140)](_0x40eea4(0x159)+JSON['stringify'](_0x126a87)),this['splitTestsAPICallCount']+=0x1;if(_0x126a87&&_0x126a87['tests']){_0x50364d=_0x126a87[_0x40eea4(0x16c)];break;}await new Promise(_0x37f4d9=>setTimeout(_0x37f4d9,_0x5e547c*0x3e8)),logger['debug']('[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL\x20after\x20waiting\x20for\x20'+_0x5e547c+_0x40eea4(0x14f));}if(_0x2180ce[_0x40eea4(0x12e)](!_0x50364d,_0x4e94f6)){logger[_0x40eea4(0x140)](_0x2180ce[_0x40eea4(0x133)]);const _0x27e909=await RequestUtils[_0x40eea4(0x13b)](_0x4e94f6);_0x27e909&&_0x27e909['tests']&&(_0x50364d=_0x27e909['tests']);}if(_0x50364d&&_0x2180ce['HjCca'](_0x50364d[_0x40eea4(0x166)],0x0))return _0x50364d[_0x40eea4(0x15a)](_0x26e99a=>_0x26e99a[_0x40eea4(0x151)]);return null;}catch(_0x966748){return logger['debug'](_0x40eea4(0x155)+(_0x966748[_0x40eea4(0x13a)]||_0x966748[_0x40eea4(0x14d)]())),null;}}[a127_0x43ff4d(0x15c)](){const _0xe17b6a=a127_0x43ff4d,_0x1fd781={'NzVyI':function(_0x5879f7,_0x5754c0){return _0x5879f7(_0x5754c0);}},_0x4ec7f0=_0x1fd781[_0xe17b6a(0x14b)](require,'os');try{return{'hostname':_0x4ec7f0['hostname'](),'platform':_0x4ec7f0[_0xe17b6a(0x15e)](),'release':_0x4ec7f0['release'](),'arch':_0x4ec7f0[_0xe17b6a(0x132)](),'totalmem':_0x4ec7f0[_0xe17b6a(0x164)](),'freemem':_0x4ec7f0[_0xe17b6a(0x136)]()};}catch(_0x5a0f28){return{};}}}function a127_0x374e(_0xfa55e2,_0x4e7387){const _0x488cfb=a127_0x488c();return a127_0x374e=function(_0x374e58,_0x122b5){_0x374e58=_0x374e58-0x12e;let _0x1880c3=_0x488cfb[_0x374e58];return _0x1880c3;},a127_0x374e(_0xfa55e2,_0x4e7387);}module[a127_0x43ff4d(0x169)]=TestOrderingServerHandler;