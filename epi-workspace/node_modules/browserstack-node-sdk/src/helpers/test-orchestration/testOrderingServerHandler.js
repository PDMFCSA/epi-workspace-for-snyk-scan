const a124_0xde2526=a124_0x30ab;(function(_0x490e65,_0xedca22){const _0xac66d1=a124_0x30ab,_0x5acd02=_0x490e65();while(!![]){try{const _0x4ed14c=parseInt(_0xac66d1(0xab))/0x1+-parseInt(_0xac66d1(0x91))/0x2+parseInt(_0xac66d1(0x92))/0x3+parseInt(_0xac66d1(0x9f))/0x4*(-parseInt(_0xac66d1(0xa1))/0x5)+parseInt(_0xac66d1(0xae))/0x6*(-parseInt(_0xac66d1(0x7b))/0x7)+-parseInt(_0xac66d1(0xa6))/0x8+-parseInt(_0xac66d1(0x9c))/0x9*(-parseInt(_0xac66d1(0x96))/0xa);if(_0x4ed14c===_0xedca22)break;else _0x5acd02['push'](_0x5acd02['shift']());}catch(_0x376a96){_0x5acd02['push'](_0x5acd02['shift']());}}}(a124_0x4de2,0xc6f0c));const logger=require(a124_0xde2526(0x97))['winstonLogger'],RequestUtils=require('./requestUtils');function a124_0x30ab(_0x352809,_0x50b112){const _0x4de2d5=a124_0x4de2();return a124_0x30ab=function(_0x30ab85,_0x4bfb8b){_0x30ab85=_0x30ab85-0x7b;let _0x280c21=_0x4de2d5[_0x30ab85];return _0x280c21;},a124_0x30ab(_0x352809,_0x50b112);}class TestOrderingServerHandler{constructor(_0x9a8661){const _0x5bf926=a124_0xde2526;this[_0x5bf926(0x98)]=_0x9a8661,this[_0x5bf926(0x8a)]=0x0,this[_0x5bf926(0x9e)]=0x3c,this[_0x5bf926(0xa8)]=0x5;}[a124_0xde2526(0x7d)](){const _0x2037aa=a124_0xde2526;return this[_0x2037aa(0x8a)];}[a124_0xde2526(0x81)](_0x532fd8){const _0xb4c729=a124_0xde2526,_0x477287={};_0x477287[_0xb4c729(0x8f)]=_0xb4c729(0xb2);const _0x3f1a82=_0x477287;if(!_0x532fd8)return null;const _0x895be={};return _0x895be[_0xb4c729(0xaa)]=_0x532fd8['timeout']||this[_0xb4c729(0x9e)],_0x895be[_0xb4c729(0x8c)]=_0x532fd8[_0xb4c729(0x8c)]||this[_0xb4c729(0xa8)],_0x895be[_0xb4c729(0xba)]=_0x532fd8[_0xb4c729(0xba)],_0x895be[_0xb4c729(0x99)]=_0x532fd8[_0xb4c729(0x99)],logger[_0xb4c729(0xbb)](_0xb4c729(0x7c)+JSON[_0xb4c729(0xb5)](_0x532fd8)),logger[_0xb4c729(0xbb)](_0xb4c729(0x9b)+_0x532fd8['timeout']+_0xb4c729(0x7f)+_0x532fd8['timeoutInterval']+_0xb4c729(0xa5)+_0x532fd8[_0xb4c729(0xba)]+_0xb4c729(0xa4)+_0x532fd8[_0xb4c729(0x99)]),(!_0x532fd8[_0xb4c729(0xaa)]||!_0x532fd8['timeoutInterval']||!_0x532fd8[_0xb4c729(0x99)]||!_0x532fd8[_0xb4c729(0xba)])&&logger[_0xb4c729(0xbb)](_0x3f1a82[_0xb4c729(0x8f)]),_0x895be;}async['splitTests'](_0x3cd190,_0x5285f0){const _0x4e5ee4=a124_0xde2526,_0x4c00b1={'dQiMG':function(_0x9d529f,_0xe02d17){return _0x9d529f(_0xe02d17);}};try{const _0x203563=_0x4c00b1['dQiMG'](parseInt,process[_0x4e5ee4(0xb7)][_0x4e5ee4(0xaf)]||'0'),_0x50e934=_0x4c00b1[_0x4e5ee4(0xb6)](parseInt,process[_0x4e5ee4(0xb7)][_0x4e5ee4(0xa9)]||'1'),_0x4a7daa=process[_0x4e5ee4(0xb7)][_0x4e5ee4(0xa0)],_0x1f7ea9={'nodeIndex':_0x203563,'totalNodes':_0x50e934,'projectName':this[_0x4e5ee4(0x98)][_0x4e5ee4(0x87)],'buildName':this[_0x4e5ee4(0x98)]['buildName'],'buildRunIdentifier':_0x4a7daa,'orchestrationStrategy':_0x5285f0,'hostInfo':this['_getHostInfo'](),'tests':_0x3cd190['map'](_0x4b4527=>({'filePath':_0x4b4527}))},_0x5b0922=await RequestUtils[_0x4e5ee4(0x86)](_0x1f7ea9);return logger[_0x4e5ee4(0xbb)](_0x4e5ee4(0x84)+JSON[_0x4e5ee4(0xb5)](_0x5b0922)),this[_0x4e5ee4(0x8a)]+=0x1,this[_0x4e5ee4(0x81)](_0x5b0922[_0x4e5ee4(0xa2)]||{});}catch(_0x552aef){return logger[_0x4e5ee4(0xbb)](_0x4e5ee4(0x85)+(_0x552aef[_0x4e5ee4(0x88)]||_0x552aef[_0x4e5ee4(0xac)]())),null;}}async[a124_0xde2526(0xbc)](_0x56bc70){const _0x4d4223=a124_0xde2526,_0x4747d1={};_0x4747d1[_0x4d4223(0x8d)]=_0x4d4223(0xb4),_0x4747d1['CCsEe']=function(_0x47de9f,_0x6f3453){return _0x47de9f*_0x6f3453;},_0x4747d1['fUxzA']=function(_0x421e57,_0x1e18e3){return _0x421e57&&_0x1e18e3;},_0x4747d1[_0x4d4223(0x9d)]=function(_0x24f4c8,_0x498612){return _0x24f4c8<_0x498612;},_0x4747d1[_0x4d4223(0x7e)]=function(_0x3185c0,_0xbac539){return _0x3185c0-_0xbac539;},_0x4747d1[_0x4d4223(0x8e)]=function(_0x563634,_0x2f2372){return _0x563634&&_0x2f2372;},_0x4747d1[_0x4d4223(0xa3)]='[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20timeout\x20URL',_0x4747d1[_0x4d4223(0xa7)]=function(_0x2b0059,_0x1c4852){return _0x2b0059>_0x1c4852;};const _0x210fae=_0x4747d1;if(!_0x56bc70)return null;try{logger[_0x4d4223(0xbb)](_0x210fae[_0x4d4223(0x8d)]);const _0x58672d=_0x56bc70['timeoutInterval']||this['defaultTimeoutInterval'],_0x511fea=_0x210fae['CCsEe'](_0x56bc70[_0x4d4223(0xaa)]||this[_0x4d4223(0x9e)],0x3e8),_0x4ea440=_0x56bc70[_0x4d4223(0x99)],_0x5c995d=_0x56bc70[_0x4d4223(0xba)];if(_0x210fae['fUxzA'](!_0x5c995d,!_0x4ea440))return null;let _0x55eef5=null;const _0x53f26c=Date[_0x4d4223(0xb9)]();while(_0x5c995d&&_0x210fae[_0x4d4223(0x9d)](_0x210fae[_0x4d4223(0x7e)](Date[_0x4d4223(0xb9)](),_0x53f26c),_0x511fea)){logger[_0x4d4223(0xbb)](_0x4d4223(0xb8)+_0x5c995d);const _0x2a1472=await RequestUtils['getSplitFiles'](_0x5c995d);logger[_0x4d4223(0xbb)](_0x4d4223(0x9a)+JSON[_0x4d4223(0xb5)](_0x2a1472)),this[_0x4d4223(0x8a)]+=0x1;if(_0x2a1472&&_0x2a1472[_0x4d4223(0x90)]){_0x55eef5=_0x2a1472[_0x4d4223(0x90)];break;}await new Promise(_0xb2864b=>setTimeout(_0xb2864b,_0x58672d*0x3e8)),logger[_0x4d4223(0xbb)](_0x4d4223(0xad)+_0x58672d+'\x20seconds.');}if(_0x210fae['UrXGE'](!_0x55eef5,_0x4ea440)){logger[_0x4d4223(0xbb)](_0x210fae[_0x4d4223(0xa3)]);const _0xfc5ecf=await RequestUtils[_0x4d4223(0x93)](_0x4ea440);_0xfc5ecf&&_0xfc5ecf[_0x4d4223(0x90)]&&(_0x55eef5=_0xfc5ecf[_0x4d4223(0x90)]);}if(_0x55eef5&&_0x210fae[_0x4d4223(0xa7)](_0x55eef5[_0x4d4223(0x95)],0x0))return _0x55eef5[_0x4d4223(0x80)](_0x3dd8e5=>_0x3dd8e5[_0x4d4223(0xb3)]);return null;}catch(_0x28783d){return logger[_0x4d4223(0xbb)]('[getOrderedTestFiles]\x20Exception\x20in\x20fetching\x20ordered\x20test\x20files:\x20'+(_0x28783d[_0x4d4223(0x88)]||_0x28783d[_0x4d4223(0xac)]())),null;}}[a124_0xde2526(0x83)](){const _0x76ed43=a124_0xde2526,_0x54cf0d={'iUhMI':function(_0x5d190b,_0x2d3f41){return _0x5d190b(_0x2d3f41);}},_0x576b27=_0x54cf0d[_0x76ed43(0xb1)](require,'os');try{return{'hostname':_0x576b27[_0x76ed43(0x8b)](),'platform':_0x576b27[_0x76ed43(0x89)](),'release':_0x576b27['release'](),'arch':_0x576b27['arch'](),'totalmem':_0x576b27[_0x76ed43(0x82)](),'freemem':_0x576b27[_0x76ed43(0xb0)]()};}catch(_0x24fe4f){return{};}}}module[a124_0xde2526(0x94)]=TestOrderingServerHandler;function a124_0x4de2(){const _0x3197c6=['splitTestsAPICallCount','hostname','timeoutInterval','rCbUS','UrXGE','zMRjh','tests','2019466RVQYYX','3046644rZCpqU','getSplitFiles','exports','length','6040MZbYGU','../logger','config','timeoutUrl','[getOrderedTestFiles]\x20Response\x20from\x20result\x20URL:\x20','[processSplitTestsResponse]\x20timeout:\x20','40617JztxYB','TgbMT','defaultTimeout','16828yWGwxA','BROWSERSTACK_BUILD_RUN_IDENTIFIER','695JzZmFa','body','xFSoc',',\x20timeoutUrl:\x20',',\x20resultUrl:\x20','6184720Iirozm','hvQdC','defaultTimeoutInterval','BROWSERSTACK_TOTAL_NODE_COUNT','timeout','238524xQZHSY','toString','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL\x20after\x20waiting\x20for\x20','42Jbwlvp','BROWSERSTACK_NODE_INDEX','freemem','iUhMI','[processSplitTestsResponse]\x20Received\x20null\x20value(s)\x20for\x20some\x20attributes\x20in\x20split\x20tests\x20API\x20response','filePath','[getOrderedTestFiles]\x20Fetching\x20ordered\x20test\x20files','stringify','dQiMG','env','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL:\x20','now','resultUrl','debug','getOrderedTestFiles','797468tePlle','[processSplitTestsResponse]\x20Processing\x20response:\x20','getSplitTestsAPICallCount','RYVWO',',\x20timeoutInterval:\x20','map','processSplitTestsResponse','totalmem','_getHostInfo','[splitTests]\x20Response\x20from\x20split\x20tests\x20API:\x20','[splitTests]\x20Exception\x20in\x20sending\x20test\x20files:\x20','postSplitFiles','projectName','stack','platform'];a124_0x4de2=function(){return _0x3197c6;};return a124_0x4de2();}