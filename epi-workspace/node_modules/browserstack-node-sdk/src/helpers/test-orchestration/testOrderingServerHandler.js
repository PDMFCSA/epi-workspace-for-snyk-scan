const a137_0x19992e=a137_0x55e2;(function(_0x5e4913,_0x29cf2f){const _0x261811=a137_0x55e2,_0xd8be69=_0x5e4913();while(!![]){try{const _0xc949b9=-parseInt(_0x261811(0xe6))/0x1*(-parseInt(_0x261811(0xbd))/0x2)+-parseInt(_0x261811(0xdc))/0x3*(-parseInt(_0x261811(0xc3))/0x4)+parseInt(_0x261811(0xd5))/0x5+parseInt(_0x261811(0xe4))/0x6*(parseInt(_0x261811(0xd7))/0x7)+-parseInt(_0x261811(0xb2))/0x8+-parseInt(_0x261811(0xe9))/0x9*(-parseInt(_0x261811(0xc6))/0xa)+-parseInt(_0x261811(0xe7))/0xb;if(_0xc949b9===_0x29cf2f)break;else _0xd8be69['push'](_0xd8be69['shift']());}catch(_0x38457e){_0xd8be69['push'](_0xd8be69['shift']());}}}(a137_0x5dc1,0x91f9c));const logger=require('../logger')['winstonLogger'],RequestUtils=require(a137_0x19992e(0xaf));function a137_0x55e2(_0x3ab6b8,_0x33c316){const _0x5dc16e=a137_0x5dc1();return a137_0x55e2=function(_0x55e2f5,_0x115b19){_0x55e2f5=_0x55e2f5-0xab;let _0x335333=_0x5dc16e[_0x55e2f5];return _0x335333;},a137_0x55e2(_0x3ab6b8,_0x33c316);}class TestOrderingServerHandler{constructor(_0x534b1d){const _0x1b6840=a137_0x19992e;this[_0x1b6840(0xd8)]=_0x534b1d,this[_0x1b6840(0xb6)]=0x0,this[_0x1b6840(0xd2)]=0x3c,this[_0x1b6840(0xde)]=0x5;}['getSplitTestsAPICallCount'](){const _0x5e8de1=a137_0x19992e;return this[_0x5e8de1(0xb6)];}[a137_0x19992e(0xe1)](_0x29e3c5){const _0x1c4efa=a137_0x19992e,_0x144392={};_0x144392[_0x1c4efa(0xd0)]=_0x1c4efa(0xd4);const _0x380b56=_0x144392;if(!_0x29e3c5)return null;const _0x4aefdd={};return _0x4aefdd[_0x1c4efa(0xec)]=_0x29e3c5[_0x1c4efa(0xec)]||this['defaultTimeout'],_0x4aefdd['timeoutInterval']=_0x29e3c5[_0x1c4efa(0xea)]||this[_0x1c4efa(0xde)],_0x4aefdd['resultUrl']=_0x29e3c5[_0x1c4efa(0xdd)],_0x4aefdd['timeoutUrl']=_0x29e3c5[_0x1c4efa(0xcb)],logger['debug']('[processSplitTestsResponse]\x20Processing\x20response:\x20'+JSON[_0x1c4efa(0xcf)](_0x29e3c5)),logger[_0x1c4efa(0xad)]('[processSplitTestsResponse]\x20timeout:\x20'+_0x29e3c5['timeout']+_0x1c4efa(0xcd)+_0x29e3c5['timeoutInterval']+_0x1c4efa(0xd1)+_0x29e3c5[_0x1c4efa(0xdd)]+_0x1c4efa(0xcc)+_0x29e3c5[_0x1c4efa(0xcb)]),(!_0x29e3c5[_0x1c4efa(0xec)]||!_0x29e3c5[_0x1c4efa(0xea)]||!_0x29e3c5[_0x1c4efa(0xcb)]||!_0x29e3c5[_0x1c4efa(0xdd)])&&logger[_0x1c4efa(0xad)](_0x380b56[_0x1c4efa(0xd0)]),_0x4aefdd;}async[a137_0x19992e(0xeb)](_0x112020,_0x54265e){const _0x35746e=a137_0x19992e,_0x1d75c8={'Nwxvu':function(_0x58bbcb,_0x5850c1){return _0x58bbcb(_0x5850c1);}};try{const _0x4e259d=_0x1d75c8[_0x35746e(0xc7)](parseInt,process[_0x35746e(0xac)][_0x35746e(0xbc)]||'0'),_0x8e5fe5=_0x1d75c8[_0x35746e(0xc7)](parseInt,process[_0x35746e(0xac)][_0x35746e(0xab)]||'1'),_0x5093fc=process['env'][_0x35746e(0xb3)],_0x1ae0ba={'nodeIndex':_0x4e259d,'totalNodes':_0x8e5fe5,'projectName':this[_0x35746e(0xd8)][_0x35746e(0xe8)],'buildName':this[_0x35746e(0xd8)][_0x35746e(0xda)],'buildRunIdentifier':_0x5093fc,'orchestrationStrategy':_0x54265e,'hostInfo':this[_0x35746e(0xdf)](),'tests':_0x112020[_0x35746e(0xca)](_0x50d65b=>({'filePath':_0x50d65b}))},_0x529956=await RequestUtils[_0x35746e(0xb0)](_0x1ae0ba);return logger[_0x35746e(0xad)]('[splitTests]\x20Response\x20from\x20split\x20tests\x20API:\x20'+JSON[_0x35746e(0xcf)](_0x529956)),this['splitTestsAPICallCount']+=0x1,this[_0x35746e(0xe1)](_0x529956[_0x35746e(0xdb)]||{});}catch(_0x412ebb){return logger[_0x35746e(0xad)](_0x35746e(0xe3)+(_0x412ebb[_0x35746e(0xb4)]||_0x412ebb[_0x35746e(0xc4)]())),null;}}async[a137_0x19992e(0xb8)](_0x592155){const _0x23d175=a137_0x19992e,_0xb096be={};_0xb096be[_0x23d175(0xd6)]='[getOrderedTestFiles]\x20Fetching\x20ordered\x20test\x20files',_0xb096be['bygSz']=function(_0x596ff2,_0x1feb7b){return _0x596ff2*_0x1feb7b;},_0xb096be[_0x23d175(0xb9)]=function(_0x5b07d9,_0x2972f8){return _0x5b07d9&&_0x2972f8;},_0xb096be[_0x23d175(0xe5)]=function(_0x1f9b8d,_0xebe832){return _0x1f9b8d<_0xebe832;},_0xb096be['mUdak']=function(_0xa7826d,_0xe2f6ba){return _0xa7826d-_0xe2f6ba;},_0xb096be[_0x23d175(0xc9)]=function(_0x45ca28,_0x186790){return _0x45ca28&&_0x186790;},_0xb096be[_0x23d175(0xce)]=_0x23d175(0xae),_0xb096be['TwqrE']=function(_0x1d9dea,_0x3c4436){return _0x1d9dea>_0x3c4436;};const _0x45c071=_0xb096be;if(!_0x592155)return null;try{logger[_0x23d175(0xad)](_0x45c071[_0x23d175(0xd6)]);const _0x24469a=_0x592155[_0x23d175(0xea)]||this['defaultTimeoutInterval'],_0x20fde9=_0x45c071[_0x23d175(0xbb)](_0x592155[_0x23d175(0xec)]||this[_0x23d175(0xd2)],0x3e8),_0x6045b9=_0x592155[_0x23d175(0xcb)],_0x246955=_0x592155['resultUrl'];if(_0x45c071[_0x23d175(0xb9)](!_0x246955,!_0x6045b9))return null;let _0x5aaa35=null;const _0x52b04f=Date[_0x23d175(0xc2)]();while(_0x246955&&_0x45c071[_0x23d175(0xe5)](_0x45c071[_0x23d175(0xbe)](Date[_0x23d175(0xc2)](),_0x52b04f),_0x20fde9)){logger[_0x23d175(0xad)]('[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL:\x20'+_0x246955);const _0x1c8192=await RequestUtils[_0x23d175(0xc5)](_0x246955);logger['debug'](_0x23d175(0xba)+JSON[_0x23d175(0xcf)](_0x1c8192)),this['splitTestsAPICallCount']+=0x1;if(_0x1c8192&&_0x1c8192['tests']){_0x5aaa35=_0x1c8192['tests'];break;}await new Promise(_0x5c131a=>setTimeout(_0x5c131a,_0x24469a*0x3e8)),logger[_0x23d175(0xad)]('[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL\x20after\x20waiting\x20for\x20'+_0x24469a+_0x23d175(0xb7));}if(_0x45c071[_0x23d175(0xc9)](!_0x5aaa35,_0x6045b9)){logger[_0x23d175(0xad)](_0x45c071[_0x23d175(0xce)]);const _0x17adff=await RequestUtils[_0x23d175(0xc5)](_0x6045b9);_0x17adff&&_0x17adff['tests']&&(_0x5aaa35=_0x17adff[_0x23d175(0xd9)]);}if(_0x5aaa35&&_0x45c071[_0x23d175(0xd3)](_0x5aaa35[_0x23d175(0xc1)],0x0))return _0x5aaa35[_0x23d175(0xca)](_0x361f09=>_0x361f09[_0x23d175(0xe0)]);return null;}catch(_0x497cad){return logger[_0x23d175(0xad)]('[getOrderedTestFiles]\x20Exception\x20in\x20fetching\x20ordered\x20test\x20files:\x20'+(_0x497cad['stack']||_0x497cad[_0x23d175(0xc4)]())),null;}}[a137_0x19992e(0xdf)](){const _0x5aac63=a137_0x19992e,_0x13a0ac={'hhMHT':function(_0x26cd9f,_0xdab300){return _0x26cd9f(_0xdab300);}},_0x46d3b0=_0x13a0ac[_0x5aac63(0xb5)](require,'os');try{return{'hostname':_0x46d3b0[_0x5aac63(0xc0)](),'platform':_0x46d3b0[_0x5aac63(0xb1)](),'release':_0x46d3b0[_0x5aac63(0xbf)](),'arch':_0x46d3b0[_0x5aac63(0xc8)](),'totalmem':_0x46d3b0[_0x5aac63(0xe2)](),'freemem':_0x46d3b0['freemem']()};}catch(_0x5ad987){return{};}}}module['exports']=TestOrderingServerHandler;function a137_0x5dc1(){const _0x3f0ee6=['44YBwMUJ','mUdak','release','hostname','length','now','8PQtQlZ','toString','getSplitFiles','4390MxTfNz','Nwxvu','arch','iJkyM','map','timeoutUrl',',\x20timeoutUrl:\x20',',\x20timeoutInterval:\x20','bhFWl','stringify','VHzCo',',\x20resultUrl:\x20','defaultTimeout','TwqrE','[processSplitTestsResponse]\x20Received\x20null\x20value(s)\x20for\x20some\x20attributes\x20in\x20split\x20tests\x20API\x20response','2789805lVlACZ','RhIhP','7bilGzi','config','tests','buildName','body','1638963DkwEno','resultUrl','defaultTimeoutInterval','_getHostInfo','filePath','processSplitTestsResponse','totalmem','[splitTests]\x20Exception\x20in\x20sending\x20test\x20files:\x20','2666022idjBKQ','AOwZs','49667rflBbU','25143470dAaXca','projectName','15939RxreJI','timeoutInterval','splitTests','timeout','BROWSERSTACK_TOTAL_NODE_COUNT','env','debug','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20timeout\x20URL','./requestUtils','postSplitFiles','platform','8651176VEhCwp','BROWSERSTACK_BUILD_RUN_IDENTIFIER','stack','hhMHT','splitTestsAPICallCount','\x20seconds.','getOrderedTestFiles','peOMa','[getOrderedTestFiles]\x20Response\x20from\x20result\x20URL:\x20','bygSz','BROWSERSTACK_NODE_INDEX'];a137_0x5dc1=function(){return _0x3f0ee6;};return a137_0x5dc1();}