const a137_0x488e7c=a137_0x696f;function a137_0x696f(_0x1413c5,_0x46d024){const _0x328d55=a137_0x328d();return a137_0x696f=function(_0x696fdc,_0x4ee827){_0x696fdc=_0x696fdc-0xfa;let _0x527bf3=_0x328d55[_0x696fdc];return _0x527bf3;},a137_0x696f(_0x1413c5,_0x46d024);}function a137_0x328d(){const _0x57f678=['now','7763fHIlco','length','hostname','[splitTests]\x20Response\x20from\x20split\x20tests\x20API:\x20','ICQWm','_getHostInfo','BROWSERSTACK_NODE_INDEX','259728XhtJuv','BROWSERSTACK_TOTAL_NODE_COUNT','\x20seconds.','cbQcG','QecFn','stringify','XsPQW','[getOrderedTestFiles]\x20Fetching\x20ordered\x20test\x20files','stack','fCfif','debug','filePath',',\x20timeoutInterval:\x20','nmMNf','548152qiXMhm','AuWcw','timeoutUrl','defaultTimeout','27zPQMdV','splitTestsAPICallCount','210MxfcAE','126094lOYswT','BROWSERSTACK_BUILD_RUN_IDENTIFIER','gaeoe','vFGBN','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL:\x20','BSQxQ','timeoutInterval','timeout','freemem','5642710jZZRWJ','[processSplitTestsResponse]\x20timeout:\x20','fNVDU','release','processSplitTestsResponse','projectName','env','config','tests','map','splitTests','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL\x20after\x20waiting\x20for\x20','postSplitFiles','[getOrderedTestFiles]\x20Exception\x20in\x20fetching\x20ordered\x20test\x20files:\x20','buildName','[getOrderedTestFiles]\x20Response\x20from\x20result\x20URL:\x20','[splitTests]\x20Exception\x20in\x20sending\x20test\x20files:\x20','defaultTimeoutInterval','exports','10tEDaeF','resultUrl','toString','totalmem','633937GhwqJl','body','winstonLogger','getSplitFiles','[processSplitTestsResponse]\x20Processing\x20response:\x20','72gyPfZH','517dZwpTZ','290828KEzBoX','uDBRd'];a137_0x328d=function(){return _0x57f678;};return a137_0x328d();}(function(_0x1f72b2,_0x33aa29){const _0x112a58=a137_0x696f,_0x46bb4a=_0x1f72b2();while(!![]){try{const _0x38d298=parseInt(_0x112a58(0x106))/0x1+-parseInt(_0x112a58(0x12c))/0x2*(-parseInt(_0x112a58(0x129))/0x3)+-parseInt(_0x112a58(0x10d))/0x4*(-parseInt(_0x112a58(0x102))/0x5)+-parseInt(_0x112a58(0x12b))/0x6*(-parseInt(_0x112a58(0x110))/0x7)+parseInt(_0x112a58(0x125))/0x8*(parseInt(_0x112a58(0x10b))/0x9)+-parseInt(_0x112a58(0x135))/0xa+-parseInt(_0x112a58(0x10c))/0xb*(parseInt(_0x112a58(0x117))/0xc);if(_0x38d298===_0x33aa29)break;else _0x46bb4a['push'](_0x46bb4a['shift']());}catch(_0x44eb08){_0x46bb4a['push'](_0x46bb4a['shift']());}}}(a137_0x328d,0x55fca));const logger=require('../logger')[a137_0x488e7c(0x108)],RequestUtils=require('./requestUtils');class TestOrderingServerHandler{constructor(_0xfba7dc){const _0x1c9db4=a137_0x488e7c;this[_0x1c9db4(0x13c)]=_0xfba7dc,this[_0x1c9db4(0x12a)]=0x0,this[_0x1c9db4(0x128)]=0x3c,this[_0x1c9db4(0x100)]=0x5;}['getSplitTestsAPICallCount'](){return this['splitTestsAPICallCount'];}[a137_0x488e7c(0x139)](_0xa4118c){const _0x322733=a137_0x488e7c,_0x177730={};_0x177730['QecFn']='[processSplitTestsResponse]\x20Received\x20null\x20value(s)\x20for\x20some\x20attributes\x20in\x20split\x20tests\x20API\x20response';const _0x59eb1e=_0x177730;if(!_0xa4118c)return null;const _0x317d20={};return _0x317d20[_0x322733(0x133)]=_0xa4118c[_0x322733(0x133)]||this[_0x322733(0x128)],_0x317d20[_0x322733(0x132)]=_0xa4118c[_0x322733(0x132)]||this[_0x322733(0x100)],_0x317d20[_0x322733(0x103)]=_0xa4118c[_0x322733(0x103)],_0x317d20[_0x322733(0x127)]=_0xa4118c[_0x322733(0x127)],logger[_0x322733(0x121)](_0x322733(0x10a)+JSON[_0x322733(0x11c)](_0xa4118c)),logger[_0x322733(0x121)](_0x322733(0x136)+_0xa4118c['timeout']+_0x322733(0x123)+_0xa4118c[_0x322733(0x132)]+',\x20resultUrl:\x20'+_0xa4118c[_0x322733(0x103)]+',\x20timeoutUrl:\x20'+_0xa4118c['timeoutUrl']),(!_0xa4118c[_0x322733(0x133)]||!_0xa4118c[_0x322733(0x132)]||!_0xa4118c[_0x322733(0x127)]||!_0xa4118c['resultUrl'])&&logger['debug'](_0x59eb1e[_0x322733(0x11b)]),_0x317d20;}async[a137_0x488e7c(0x13f)](_0x2cfaea,_0x24379a){const _0xb09620=a137_0x488e7c,_0x3b95b7={'AuWcw':function(_0x426fff,_0x117f19){return _0x426fff(_0x117f19);},'vFGBN':function(_0x439c6b,_0x4b5a2d){return _0x439c6b(_0x4b5a2d);}};try{const _0x31f4e0=_0x3b95b7[_0xb09620(0x126)](parseInt,process[_0xb09620(0x13b)][_0xb09620(0x116)]||'0'),_0x466687=_0x3b95b7[_0xb09620(0x12f)](parseInt,process[_0xb09620(0x13b)][_0xb09620(0x118)]||'1'),_0x556fd1=process[_0xb09620(0x13b)][_0xb09620(0x12d)],_0x41b59f={'nodeIndex':_0x31f4e0,'totalNodes':_0x466687,'projectName':this[_0xb09620(0x13c)][_0xb09620(0x13a)],'buildName':this[_0xb09620(0x13c)][_0xb09620(0xfd)],'buildRunIdentifier':_0x556fd1,'orchestrationStrategy':_0x24379a,'hostInfo':this[_0xb09620(0x115)](),'tests':_0x2cfaea[_0xb09620(0x13e)](_0x511b4f=>({'filePath':_0x511b4f}))},_0x1d333f=await RequestUtils[_0xb09620(0xfb)](_0x41b59f);return logger[_0xb09620(0x121)](_0xb09620(0x113)+JSON[_0xb09620(0x11c)](_0x1d333f)),this[_0xb09620(0x12a)]+=0x1,this[_0xb09620(0x139)](_0x1d333f[_0xb09620(0x107)]||{});}catch(_0x11d216){return logger[_0xb09620(0x121)](_0xb09620(0xff)+(_0x11d216['stack']||_0x11d216[_0xb09620(0x104)]())),null;}}async['getOrderedTestFiles'](_0x15c9ea){const _0x10d318=a137_0x488e7c,_0x35b342={};_0x35b342['BSQxQ']=_0x10d318(0x11e),_0x35b342[_0x10d318(0x120)]=function(_0x113a5f,_0x354f06){return _0x113a5f*_0x354f06;},_0x35b342[_0x10d318(0x12e)]=function(_0x47644b,_0x3be742){return _0x47644b&&_0x3be742;},_0x35b342[_0x10d318(0x10e)]=function(_0x15f318,_0x2fb149){return _0x15f318<_0x2fb149;},_0x35b342[_0x10d318(0x11a)]=function(_0x308212,_0x25aef2){return _0x308212-_0x25aef2;},_0x35b342[_0x10d318(0x11d)]=function(_0x2cd780,_0x42979d){return _0x2cd780&&_0x42979d;},_0x35b342[_0x10d318(0x124)]='[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20timeout\x20URL',_0x35b342['fNVDU']=function(_0x567ee2,_0x177760){return _0x567ee2>_0x177760;};const _0xd2a631=_0x35b342;if(!_0x15c9ea)return null;try{logger['debug'](_0xd2a631[_0x10d318(0x131)]);const _0x3a8d5a=_0x15c9ea[_0x10d318(0x132)]||this[_0x10d318(0x100)],_0x251597=_0xd2a631['fCfif'](_0x15c9ea[_0x10d318(0x133)]||this[_0x10d318(0x128)],0x3e8),_0x4883d4=_0x15c9ea[_0x10d318(0x127)],_0x446778=_0x15c9ea[_0x10d318(0x103)];if(_0xd2a631[_0x10d318(0x12e)](!_0x446778,!_0x4883d4))return null;let _0x2157fe=null;const _0x104f94=Date[_0x10d318(0x10f)]();while(_0x446778&&_0xd2a631[_0x10d318(0x10e)](_0xd2a631[_0x10d318(0x11a)](Date[_0x10d318(0x10f)](),_0x104f94),_0x251597)){logger[_0x10d318(0x121)](_0x10d318(0x130)+_0x446778);const _0x43bfd2=await RequestUtils[_0x10d318(0x109)](_0x446778);logger[_0x10d318(0x121)](_0x10d318(0xfe)+JSON[_0x10d318(0x11c)](_0x43bfd2)),this[_0x10d318(0x12a)]+=0x1;if(_0x43bfd2&&_0x43bfd2[_0x10d318(0x13d)]){_0x2157fe=_0x43bfd2[_0x10d318(0x13d)];break;}await new Promise(_0x4191c1=>setTimeout(_0x4191c1,_0x3a8d5a*0x3e8)),logger['debug'](_0x10d318(0xfa)+_0x3a8d5a+_0x10d318(0x119));}if(_0xd2a631[_0x10d318(0x11d)](!_0x2157fe,_0x4883d4)){logger[_0x10d318(0x121)](_0xd2a631[_0x10d318(0x124)]);const _0x517c20=await RequestUtils['getSplitFiles'](_0x4883d4);_0x517c20&&_0x517c20[_0x10d318(0x13d)]&&(_0x2157fe=_0x517c20[_0x10d318(0x13d)]);}if(_0x2157fe&&_0xd2a631[_0x10d318(0x137)](_0x2157fe[_0x10d318(0x111)],0x0))return _0x2157fe[_0x10d318(0x13e)](_0x4d4621=>_0x4d4621[_0x10d318(0x122)]);return null;}catch(_0x210c54){return logger[_0x10d318(0x121)](_0x10d318(0xfc)+(_0x210c54[_0x10d318(0x11f)]||_0x210c54[_0x10d318(0x104)]())),null;}}[a137_0x488e7c(0x115)](){const _0x456b3c=a137_0x488e7c,_0x2642aa={'ICQWm':function(_0x27fae5,_0x505cb7){return _0x27fae5(_0x505cb7);}},_0x92cff7=_0x2642aa[_0x456b3c(0x114)](require,'os');try{return{'hostname':_0x92cff7[_0x456b3c(0x112)](),'platform':_0x92cff7['platform'](),'release':_0x92cff7[_0x456b3c(0x138)](),'arch':_0x92cff7['arch'](),'totalmem':_0x92cff7[_0x456b3c(0x105)](),'freemem':_0x92cff7[_0x456b3c(0x134)]()};}catch(_0x553b0e){return{};}}}module[a137_0x488e7c(0x101)]=TestOrderingServerHandler;