const a134_0x55aef2=a134_0x1d98;(function(_0x3f720a,_0x972c24){const _0x4a432c=a134_0x1d98,_0x4c9231=_0x3f720a();while(!![]){try{const _0x1c9300=parseInt(_0x4a432c(0x199))/0x1+parseInt(_0x4a432c(0x19b))/0x2+parseInt(_0x4a432c(0x16c))/0x3*(parseInt(_0x4a432c(0x188))/0x4)+parseInt(_0x4a432c(0x16d))/0x5+parseInt(_0x4a432c(0x189))/0x6+parseInt(_0x4a432c(0x1a1))/0x7+-parseInt(_0x4a432c(0x180))/0x8;if(_0x1c9300===_0x972c24)break;else _0x4c9231['push'](_0x4c9231['shift']());}catch(_0x310494){_0x4c9231['push'](_0x4c9231['shift']());}}}(a134_0x5d5b,0x59a86));const logger=require(a134_0x55aef2(0x18e))['winstonLogger'],RequestUtils=require('./requestUtils');function a134_0x5d5b(){const _0x517582=['defaultTimeout','platform','config','IYGhq','tQdVV','processSplitTestsResponse','getSplitFiles','2802196FGBIMp','1466136YyJZVT','getOrderedTestFiles','stack','length','defaultTimeoutInterval','../logger','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20timeout\x20URL','[processSplitTestsResponse]\x20timeout:\x20','NsGhA','\x20seconds.','jnZmm','gBiAI','timeoutUrl','[getOrderedTestFiles]\x20Fetching\x20ordered\x20test\x20files','[splitTests]\x20Response\x20from\x20split\x20tests\x20API:\x20','_getHostInfo','524329Zlldxu',',\x20timeoutInterval:\x20','1270392CzNlAY','tests','totalmem','buildName','stringify','freemem','2168670AEzHHa','yObpm','debug','now','hostname','3LOutrw','163995uNDBRM','timeoutInterval','AjpTN','Pwhxz','[processSplitTestsResponse]\x20Processing\x20response:\x20','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL\x20after\x20waiting\x20for\x20','bbeRL','env',',\x20timeoutUrl:\x20','resultUrl','splitTestsAPICallCount','timeout','body','BROWSERSTACK_TOTAL_NODE_COUNT','toString','[getOrderedTestFiles]\x20Exception\x20in\x20fetching\x20ordered\x20test\x20files:\x20','BROWSERSTACK_NODE_INDEX',',\x20resultUrl:\x20','wbwuY','16638408XjDGYk'];a134_0x5d5b=function(){return _0x517582;};return a134_0x5d5b();}function a134_0x1d98(_0x5a4c41,_0x540280){const _0x5d5b6c=a134_0x5d5b();return a134_0x1d98=function(_0x1d9889,_0x4b8358){_0x1d9889=_0x1d9889-0x168;let _0x10f76f=_0x5d5b6c[_0x1d9889];return _0x10f76f;},a134_0x1d98(_0x5a4c41,_0x540280);}class TestOrderingServerHandler{constructor(_0x5b78b3){const _0x246d6d=a134_0x55aef2;this[_0x246d6d(0x183)]=_0x5b78b3,this[_0x246d6d(0x177)]=0x0,this[_0x246d6d(0x181)]=0x3c,this[_0x246d6d(0x18d)]=0x5;}['getSplitTestsAPICallCount'](){const _0x119343=a134_0x55aef2;return this[_0x119343(0x177)];}[a134_0x55aef2(0x186)](_0x11ef41){const _0x34970b=a134_0x55aef2,_0x24e75e={};_0x24e75e['NsGhA']='[processSplitTestsResponse]\x20Received\x20null\x20value(s)\x20for\x20some\x20attributes\x20in\x20split\x20tests\x20API\x20response';const _0x2a155f=_0x24e75e;if(!_0x11ef41)return null;const _0x46e0c8={};return _0x46e0c8[_0x34970b(0x178)]=_0x11ef41[_0x34970b(0x178)]||this['defaultTimeout'],_0x46e0c8[_0x34970b(0x16e)]=_0x11ef41[_0x34970b(0x16e)]||this[_0x34970b(0x18d)],_0x46e0c8[_0x34970b(0x176)]=_0x11ef41[_0x34970b(0x176)],_0x46e0c8[_0x34970b(0x195)]=_0x11ef41['timeoutUrl'],logger['debug'](_0x34970b(0x171)+JSON['stringify'](_0x11ef41)),logger[_0x34970b(0x169)](_0x34970b(0x190)+_0x11ef41[_0x34970b(0x178)]+_0x34970b(0x19a)+_0x11ef41[_0x34970b(0x16e)]+_0x34970b(0x17e)+_0x11ef41[_0x34970b(0x176)]+_0x34970b(0x175)+_0x11ef41[_0x34970b(0x195)]),(!_0x11ef41[_0x34970b(0x178)]||!_0x11ef41[_0x34970b(0x16e)]||!_0x11ef41[_0x34970b(0x195)]||!_0x11ef41[_0x34970b(0x176)])&&logger[_0x34970b(0x169)](_0x2a155f[_0x34970b(0x191)]),_0x46e0c8;}async['splitTests'](_0x98a933,_0x125f27){const _0x1882f6=a134_0x55aef2,_0x32e029={'nXrYQ':function(_0x5a17bd,_0x2b5213){return _0x5a17bd(_0x2b5213);}};try{const _0x17f003=_0x32e029['nXrYQ'](parseInt,process['env'][_0x1882f6(0x17d)]||'0'),_0x179f82=_0x32e029['nXrYQ'](parseInt,process[_0x1882f6(0x174)][_0x1882f6(0x17a)]||'1'),_0xa74946=process[_0x1882f6(0x174)]['BROWSERSTACK_BUILD_RUN_IDENTIFIER'],_0x23cfbb={'nodeIndex':_0x17f003,'totalNodes':_0x179f82,'projectName':this[_0x1882f6(0x183)]['projectName'],'buildName':this[_0x1882f6(0x183)][_0x1882f6(0x19e)],'buildRunIdentifier':_0xa74946,'orchestrationStrategy':_0x125f27,'hostInfo':this[_0x1882f6(0x198)](),'tests':_0x98a933['map'](_0x3a4971=>({'filePath':_0x3a4971}))},_0x2b4142=await RequestUtils['postSplitFiles'](_0x23cfbb);return logger['debug'](_0x1882f6(0x197)+JSON[_0x1882f6(0x19f)](_0x2b4142)),this[_0x1882f6(0x177)]+=0x1,this[_0x1882f6(0x186)](_0x2b4142[_0x1882f6(0x179)]||{});}catch(_0x54cd66){return logger[_0x1882f6(0x169)]('[splitTests]\x20Exception\x20in\x20sending\x20test\x20files:\x20'+(_0x54cd66[_0x1882f6(0x18b)]||_0x54cd66[_0x1882f6(0x17b)]())),null;}}async[a134_0x55aef2(0x18a)](_0x3277e3){const _0xd1d15e=a134_0x55aef2,_0x237c99={};_0x237c99[_0xd1d15e(0x16f)]=_0xd1d15e(0x196),_0x237c99['Pwhxz']=function(_0x598007,_0x18296e){return _0x598007*_0x18296e;},_0x237c99['bbeRL']=function(_0x2de255,_0x117972){return _0x2de255&&_0x117972;},_0x237c99[_0xd1d15e(0x17f)]=function(_0x1eb603,_0x82e6e){return _0x1eb603<_0x82e6e;},_0x237c99['IYGhq']=function(_0x102226,_0x48acd0){return _0x102226-_0x48acd0;},_0x237c99['gBiAI']=function(_0x3854e9,_0x1b375f){return _0x3854e9&&_0x1b375f;},_0x237c99[_0xd1d15e(0x168)]=_0xd1d15e(0x18f),_0x237c99[_0xd1d15e(0x193)]=function(_0x339101,_0x8a3921){return _0x339101>_0x8a3921;};const _0x35d120=_0x237c99;if(!_0x3277e3)return null;try{logger[_0xd1d15e(0x169)](_0x35d120[_0xd1d15e(0x16f)]);const _0x4a863c=_0x3277e3[_0xd1d15e(0x16e)]||this[_0xd1d15e(0x18d)],_0x2cf67b=_0x35d120[_0xd1d15e(0x170)](_0x3277e3['timeout']||this[_0xd1d15e(0x181)],0x3e8),_0x457210=_0x3277e3[_0xd1d15e(0x195)],_0x5d30a3=_0x3277e3[_0xd1d15e(0x176)];if(_0x35d120[_0xd1d15e(0x173)](!_0x5d30a3,!_0x457210))return null;let _0xa5a09e=null;const _0x61ca7c=Date[_0xd1d15e(0x16a)]();while(_0x5d30a3&&_0x35d120[_0xd1d15e(0x17f)](_0x35d120[_0xd1d15e(0x184)](Date['now'](),_0x61ca7c),_0x2cf67b)){logger[_0xd1d15e(0x169)]('[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL:\x20'+_0x5d30a3);const _0x3ccad3=await RequestUtils[_0xd1d15e(0x187)](_0x5d30a3);logger[_0xd1d15e(0x169)]('[getOrderedTestFiles]\x20Response\x20from\x20result\x20URL:\x20'+JSON[_0xd1d15e(0x19f)](_0x3ccad3)),this['splitTestsAPICallCount']+=0x1;if(_0x3ccad3&&_0x3ccad3[_0xd1d15e(0x19c)]){_0xa5a09e=_0x3ccad3[_0xd1d15e(0x19c)];break;}await new Promise(_0x2c11d3=>setTimeout(_0x2c11d3,_0x4a863c*0x3e8)),logger[_0xd1d15e(0x169)](_0xd1d15e(0x172)+_0x4a863c+_0xd1d15e(0x192));}if(_0x35d120[_0xd1d15e(0x194)](!_0xa5a09e,_0x457210)){logger['debug'](_0x35d120['yObpm']);const _0x508fe0=await RequestUtils['getSplitFiles'](_0x457210);_0x508fe0&&_0x508fe0[_0xd1d15e(0x19c)]&&(_0xa5a09e=_0x508fe0[_0xd1d15e(0x19c)]);}if(_0xa5a09e&&_0x35d120[_0xd1d15e(0x193)](_0xa5a09e[_0xd1d15e(0x18c)],0x0))return _0xa5a09e['map'](_0x2e445f=>_0x2e445f['filePath']);return null;}catch(_0x38e2e9){return logger[_0xd1d15e(0x169)](_0xd1d15e(0x17c)+(_0x38e2e9[_0xd1d15e(0x18b)]||_0x38e2e9[_0xd1d15e(0x17b)]())),null;}}[a134_0x55aef2(0x198)](){const _0x5d076f=a134_0x55aef2,_0x72604d={'tQdVV':function(_0x3d7865,_0x3ecfa8){return _0x3d7865(_0x3ecfa8);}},_0x1d2d6f=_0x72604d[_0x5d076f(0x185)](require,'os');try{return{'hostname':_0x1d2d6f[_0x5d076f(0x16b)](),'platform':_0x1d2d6f[_0x5d076f(0x182)](),'release':_0x1d2d6f['release'](),'arch':_0x1d2d6f['arch'](),'totalmem':_0x1d2d6f[_0x5d076f(0x19d)](),'freemem':_0x1d2d6f[_0x5d076f(0x1a0)]()};}catch(_0x3f5a16){return{};}}}module['exports']=TestOrderingServerHandler;