const a137_0x55b28c=a137_0x36a2;function a137_0x36a2(_0x4bd3ed,_0x5e33eb){const _0x11f868=a137_0x11f8();return a137_0x36a2=function(_0x36a20d,_0x1649bd){_0x36a20d=_0x36a20d-0x127;let _0x41354f=_0x11f868[_0x36a20d];return _0x41354f;},a137_0x36a2(_0x4bd3ed,_0x5e33eb);}(function(_0x1297f0,_0x188116){const _0x4ea388=a137_0x36a2,_0x2ab5bb=_0x1297f0();while(!![]){try{const _0x5cf4e7=parseInt(_0x4ea388(0x164))/0x1+parseInt(_0x4ea388(0x155))/0x2*(-parseInt(_0x4ea388(0x157))/0x3)+-parseInt(_0x4ea388(0x135))/0x4*(-parseInt(_0x4ea388(0x13c))/0x5)+parseInt(_0x4ea388(0x162))/0x6+-parseInt(_0x4ea388(0x14a))/0x7+parseInt(_0x4ea388(0x12f))/0x8*(parseInt(_0x4ea388(0x14b))/0x9)+parseInt(_0x4ea388(0x163))/0xa*(-parseInt(_0x4ea388(0x166))/0xb);if(_0x5cf4e7===_0x188116)break;else _0x2ab5bb['push'](_0x2ab5bb['shift']());}catch(_0x1f4b9e){_0x2ab5bb['push'](_0x2ab5bb['shift']());}}}(a137_0x11f8,0x37ffe));function a137_0x11f8(){const _0x50b76a=['env','now','mAdgJ','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL:\x20','defaultTimeout','fYGbP','349412EbpZeV','174690hwdfxU','cqQOg','stringify','BROWSERSTACK_BUILD_RUN_IDENTIFIER','config','[processSplitTestsResponse]\x20Received\x20null\x20value(s)\x20for\x20some\x20attributes\x20in\x20split\x20tests\x20API\x20response','tests','length',',\x20resultUrl:\x20','[getOrderedTestFiles]\x20Fetching\x20ordered\x20test\x20files','2xdRftU','getSplitTestsAPICallCount','695811ZRyvtI','map','PsZfE','stack','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL\x20after\x20waiting\x20for\x20',',\x20timeoutUrl:\x20','hostname','processSplitTestsResponse','splitTestsAPICallCount','LfuBL','[getOrderedTestFiles]\x20Exception\x20in\x20fetching\x20ordered\x20test\x20files:\x20','559716cHGivf','210410iNBFEt','382549XvgJvm','filePath','286TmXUWy','timeoutUrl','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20timeout\x20URL','erZgj','splitTests','tPCeN','resultUrl','BROWSERSTACK_NODE_INDEX','freemem','HDuiF','_getHostInfo','56NiBNNo','toString','getSplitFiles','defaultTimeoutInterval','[splitTests]\x20Exception\x20in\x20sending\x20test\x20files:\x20','debug','8hWtwki','[processSplitTestsResponse]\x20Processing\x20response:\x20','buildName','timeout','KHBbJ','BROWSERSTACK_TOTAL_NODE_COUNT','eYUNj','1116470XxnDzh','getOrderedTestFiles','timeoutInterval','platform','../logger','[getOrderedTestFiles]\x20Response\x20from\x20result\x20URL:\x20','winstonLogger','release'];a137_0x11f8=function(){return _0x50b76a;};return a137_0x11f8();}const logger=require(a137_0x55b28c(0x140))[a137_0x55b28c(0x142)],RequestUtils=require('./requestUtils');class TestOrderingServerHandler{constructor(_0x25c2aa){const _0x5e7035=a137_0x55b28c;this[_0x5e7035(0x14f)]=_0x25c2aa,this['splitTestsAPICallCount']=0x0,this[_0x5e7035(0x148)]=0x3c,this[_0x5e7035(0x132)]=0x5;}[a137_0x55b28c(0x156)](){return this['splitTestsAPICallCount'];}[a137_0x55b28c(0x15e)](_0x3eb9f0){const _0x11cac6=a137_0x55b28c,_0x21f64e={};_0x21f64e[_0x11cac6(0x160)]=_0x11cac6(0x150);const _0x4fef56=_0x21f64e;if(!_0x3eb9f0)return null;const _0x55da2f={};return _0x55da2f[_0x11cac6(0x138)]=_0x3eb9f0['timeout']||this[_0x11cac6(0x148)],_0x55da2f[_0x11cac6(0x13e)]=_0x3eb9f0[_0x11cac6(0x13e)]||this[_0x11cac6(0x132)],_0x55da2f['resultUrl']=_0x3eb9f0[_0x11cac6(0x12a)],_0x55da2f[_0x11cac6(0x167)]=_0x3eb9f0[_0x11cac6(0x167)],logger['debug'](_0x11cac6(0x136)+JSON[_0x11cac6(0x14d)](_0x3eb9f0)),logger[_0x11cac6(0x134)]('[processSplitTestsResponse]\x20timeout:\x20'+_0x3eb9f0[_0x11cac6(0x138)]+',\x20timeoutInterval:\x20'+_0x3eb9f0[_0x11cac6(0x13e)]+_0x11cac6(0x153)+_0x3eb9f0[_0x11cac6(0x12a)]+_0x11cac6(0x15c)+_0x3eb9f0[_0x11cac6(0x167)]),(!_0x3eb9f0[_0x11cac6(0x138)]||!_0x3eb9f0[_0x11cac6(0x13e)]||!_0x3eb9f0[_0x11cac6(0x167)]||!_0x3eb9f0[_0x11cac6(0x12a)])&&logger[_0x11cac6(0x134)](_0x4fef56[_0x11cac6(0x160)]),_0x55da2f;}async[a137_0x55b28c(0x128)](_0x30fa77,_0x1bd3e6){const _0x33528a=a137_0x55b28c,_0x4f86e4={'HDuiF':function(_0x19fc46,_0x4a07a7){return _0x19fc46(_0x4a07a7);},'mAdgJ':function(_0x2244d2,_0x4ad493){return _0x2244d2(_0x4ad493);}};try{const _0x47e043=_0x4f86e4[_0x33528a(0x12d)](parseInt,process[_0x33528a(0x144)][_0x33528a(0x12b)]||'0'),_0x210f63=_0x4f86e4[_0x33528a(0x146)](parseInt,process['env'][_0x33528a(0x13a)]||'1'),_0xad7e40=process[_0x33528a(0x144)][_0x33528a(0x14e)],_0x1ac655={'nodeIndex':_0x47e043,'totalNodes':_0x210f63,'projectName':this[_0x33528a(0x14f)]['projectName'],'buildName':this['config'][_0x33528a(0x137)],'buildRunIdentifier':_0xad7e40,'orchestrationStrategy':_0x1bd3e6,'hostInfo':this[_0x33528a(0x12e)](),'tests':_0x30fa77[_0x33528a(0x158)](_0x538687=>({'filePath':_0x538687}))},_0x5c8d09=await RequestUtils['postSplitFiles'](_0x1ac655);return logger[_0x33528a(0x134)]('[splitTests]\x20Response\x20from\x20split\x20tests\x20API:\x20'+JSON[_0x33528a(0x14d)](_0x5c8d09)),this['splitTestsAPICallCount']+=0x1,this[_0x33528a(0x15e)](_0x5c8d09['body']||{});}catch(_0x23af96){return logger[_0x33528a(0x134)](_0x33528a(0x133)+(_0x23af96[_0x33528a(0x15a)]||_0x23af96['toString']())),null;}}async[a137_0x55b28c(0x13d)](_0x17c8be){const _0x4840d1=a137_0x55b28c,_0x2145dd={};_0x2145dd[_0x4840d1(0x13b)]=_0x4840d1(0x154),_0x2145dd[_0x4840d1(0x14c)]=function(_0x18ded1,_0x3c1407){return _0x18ded1*_0x3c1407;},_0x2145dd['RNWsP']=function(_0x22784a,_0x6ed546){return _0x22784a&&_0x6ed546;},_0x2145dd['fYGbP']=function(_0x3de91b,_0xe9182e){return _0x3de91b<_0xe9182e;},_0x2145dd[_0x4840d1(0x129)]=function(_0x52478f,_0x36dd91){return _0x52478f-_0x36dd91;},_0x2145dd[_0x4840d1(0x139)]=function(_0x4aed64,_0x308f46){return _0x4aed64&&_0x308f46;},_0x2145dd['erZgj']=_0x4840d1(0x168),_0x2145dd['PsZfE']=function(_0x26cce5,_0x20963e){return _0x26cce5>_0x20963e;};const _0x489bfb=_0x2145dd;if(!_0x17c8be)return null;try{logger[_0x4840d1(0x134)](_0x489bfb['eYUNj']);const _0x5978a2=_0x17c8be[_0x4840d1(0x13e)]||this[_0x4840d1(0x132)],_0x2c70e4=_0x489bfb['cqQOg'](_0x17c8be[_0x4840d1(0x138)]||this[_0x4840d1(0x148)],0x3e8),_0x23c56e=_0x17c8be[_0x4840d1(0x167)],_0x57654a=_0x17c8be['resultUrl'];if(_0x489bfb['RNWsP'](!_0x57654a,!_0x23c56e))return null;let _0x37c9d0=null;const _0x475aa2=Date[_0x4840d1(0x145)]();while(_0x57654a&&_0x489bfb[_0x4840d1(0x149)](_0x489bfb[_0x4840d1(0x129)](Date[_0x4840d1(0x145)](),_0x475aa2),_0x2c70e4)){logger[_0x4840d1(0x134)](_0x4840d1(0x147)+_0x57654a);const _0x598bd2=await RequestUtils[_0x4840d1(0x131)](_0x57654a);logger[_0x4840d1(0x134)](_0x4840d1(0x141)+JSON[_0x4840d1(0x14d)](_0x598bd2)),this[_0x4840d1(0x15f)]+=0x1;if(_0x598bd2&&_0x598bd2[_0x4840d1(0x151)]){_0x37c9d0=_0x598bd2[_0x4840d1(0x151)];break;}await new Promise(_0x309a0a=>setTimeout(_0x309a0a,_0x5978a2*0x3e8)),logger[_0x4840d1(0x134)](_0x4840d1(0x15b)+_0x5978a2+'\x20seconds.');}if(_0x489bfb[_0x4840d1(0x139)](!_0x37c9d0,_0x23c56e)){logger['debug'](_0x489bfb[_0x4840d1(0x127)]);const _0x5bae21=await RequestUtils[_0x4840d1(0x131)](_0x23c56e);_0x5bae21&&_0x5bae21['tests']&&(_0x37c9d0=_0x5bae21['tests']);}if(_0x37c9d0&&_0x489bfb[_0x4840d1(0x159)](_0x37c9d0[_0x4840d1(0x152)],0x0))return _0x37c9d0['map'](_0x113d40=>_0x113d40[_0x4840d1(0x165)]);return null;}catch(_0x2df596){return logger[_0x4840d1(0x134)](_0x4840d1(0x161)+(_0x2df596[_0x4840d1(0x15a)]||_0x2df596[_0x4840d1(0x130)]())),null;}}[a137_0x55b28c(0x12e)](){const _0x2255da=a137_0x55b28c,_0x3a84a1={'AQlHa':function(_0x4f003c,_0x5f36d5){return _0x4f003c(_0x5f36d5);}},_0x373050=_0x3a84a1['AQlHa'](require,'os');try{return{'hostname':_0x373050[_0x2255da(0x15d)](),'platform':_0x373050[_0x2255da(0x13f)](),'release':_0x373050[_0x2255da(0x143)](),'arch':_0x373050['arch'](),'totalmem':_0x373050['totalmem'](),'freemem':_0x373050[_0x2255da(0x12c)]()};}catch(_0x5d3430){return{};}}}module['exports']=TestOrderingServerHandler;