const a124_0x576bbb=a124_0x592e;function a124_0x592e(_0x1f90c0,_0x1702ae){const _0x38eb17=a124_0x38eb();return a124_0x592e=function(_0x592ec7,_0xeab093){_0x592ec7=_0x592ec7-0x10a;let _0x431bd5=_0x38eb17[_0x592ec7];return _0x431bd5;},a124_0x592e(_0x1f90c0,_0x1702ae);}(function(_0xb3df00,_0x33a72a){const _0x1e3b2d=a124_0x592e,_0x3be62d=_0xb3df00();while(!![]){try{const _0x13fe99=-parseInt(_0x1e3b2d(0x116))/0x1*(-parseInt(_0x1e3b2d(0x12a))/0x2)+-parseInt(_0x1e3b2d(0x12e))/0x3+-parseInt(_0x1e3b2d(0x10f))/0x4+parseInt(_0x1e3b2d(0x129))/0x5*(parseInt(_0x1e3b2d(0x130))/0x6)+parseInt(_0x1e3b2d(0x11a))/0x7*(parseInt(_0x1e3b2d(0x121))/0x8)+parseInt(_0x1e3b2d(0x137))/0x9+-parseInt(_0x1e3b2d(0x13f))/0xa*(-parseInt(_0x1e3b2d(0x136))/0xb);if(_0x13fe99===_0x33a72a)break;else _0x3be62d['push'](_0x3be62d['shift']());}catch(_0x2a9423){_0x3be62d['push'](_0x3be62d['shift']());}}}(a124_0x38eb,0xbc00a));const logger=require(a124_0x576bbb(0x11d))[a124_0x576bbb(0x124)],RequestUtils=require(a124_0x576bbb(0x145));function a124_0x38eb(){const _0x16c943=['splitTestsAPICallCount','[getOrderedTestFiles]\x20Response\x20from\x20result\x20URL:\x20',',\x20timeoutUrl:\x20','[processSplitTestsResponse]\x20timeout:\x20','10IHUomj','resultUrl','debug','stack','getSplitTestsAPICallCount','filePath','./requestUtils','defaultTimeout','timeout','processSplitTestsResponse','_getHostInfo','CqgRp',',\x20timeoutInterval:\x20','splitTests','BROWSERSTACK_TOTAL_NODE_COUNT','MAHMs','PbCss','1609136MNlFNm','JZovc','BROWSERSTACK_NODE_INDEX','YkpYc','totalmem','hostname','[getOrderedTestFiles]\x20Exception\x20in\x20fetching\x20ordered\x20test\x20files:\x20','65005hwXmSy','timeoutInterval','length','buildName','7sSRIjf','arch','tests','../logger','[getOrderedTestFiles]\x20Fetching\x20ordered\x20test\x20files','jqklT','SDzhC','1083736OHppsL','env','[splitTests]\x20Response\x20from\x20split\x20tests\x20API:\x20','winstonLogger','vYUei','map','projectName','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL:\x20','5uyCCPW','18NdSAHc','stringify','timeoutUrl','defaultTimeoutInterval','2592270dVbpjj','toString','3520974QcfEsz','lckWp','platform','\x20seconds.','[processSplitTestsResponse]\x20Processing\x20response:\x20','getSplitFiles','5771964CeGWSE','1839303Xgqhcu','body','[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20result\x20URL\x20after\x20waiting\x20for\x20','config'];a124_0x38eb=function(){return _0x16c943;};return a124_0x38eb();}class TestOrderingServerHandler{constructor(_0x46bb49){const _0x3209ce=a124_0x576bbb;this[_0x3209ce(0x13a)]=_0x46bb49,this[_0x3209ce(0x13b)]=0x0,this[_0x3209ce(0x146)]=0x3c,this[_0x3209ce(0x12d)]=0x5;}[a124_0x576bbb(0x143)](){const _0x42f247=a124_0x576bbb;return this[_0x42f247(0x13b)];}[a124_0x576bbb(0x148)](_0x1d4b27){const _0x287910=a124_0x576bbb,_0x358a49={};_0x358a49[_0x287910(0x125)]='[processSplitTestsResponse]\x20Received\x20null\x20value(s)\x20for\x20some\x20attributes\x20in\x20split\x20tests\x20API\x20response';const _0x4cf5d2=_0x358a49;if(!_0x1d4b27)return null;const _0x2a6f52={};return _0x2a6f52['timeout']=_0x1d4b27[_0x287910(0x147)]||this[_0x287910(0x146)],_0x2a6f52['timeoutInterval']=_0x1d4b27['timeoutInterval']||this[_0x287910(0x12d)],_0x2a6f52[_0x287910(0x140)]=_0x1d4b27['resultUrl'],_0x2a6f52[_0x287910(0x12c)]=_0x1d4b27['timeoutUrl'],logger[_0x287910(0x141)](_0x287910(0x134)+JSON[_0x287910(0x12b)](_0x1d4b27)),logger[_0x287910(0x141)](_0x287910(0x13e)+_0x1d4b27[_0x287910(0x147)]+_0x287910(0x10a)+_0x1d4b27[_0x287910(0x117)]+',\x20resultUrl:\x20'+_0x1d4b27[_0x287910(0x140)]+_0x287910(0x13d)+_0x1d4b27['timeoutUrl']),(!_0x1d4b27[_0x287910(0x147)]||!_0x1d4b27[_0x287910(0x117)]||!_0x1d4b27[_0x287910(0x12c)]||!_0x1d4b27['resultUrl'])&&logger[_0x287910(0x141)](_0x4cf5d2[_0x287910(0x125)]),_0x2a6f52;}async[a124_0x576bbb(0x10b)](_0x1cd3a5,_0x45121a){const _0xd22306=a124_0x576bbb,_0x2b7594={'SDzhC':function(_0x329510,_0x439498){return _0x329510(_0x439498);}};try{const _0x7aa517=_0x2b7594[_0xd22306(0x120)](parseInt,process['env'][_0xd22306(0x111)]||'0'),_0x504b33=_0x2b7594[_0xd22306(0x120)](parseInt,process[_0xd22306(0x122)][_0xd22306(0x10c)]||'1'),_0x1fe9b3=process[_0xd22306(0x122)]['BROWSERSTACK_BUILD_RUN_IDENTIFIER'],_0xc0d4d3={'nodeIndex':_0x7aa517,'totalNodes':_0x504b33,'projectName':this['config'][_0xd22306(0x127)],'buildName':this[_0xd22306(0x13a)][_0xd22306(0x119)],'buildRunIdentifier':_0x1fe9b3,'orchestrationStrategy':_0x45121a,'hostInfo':this[_0xd22306(0x149)](),'tests':_0x1cd3a5[_0xd22306(0x126)](_0x1e031c=>({'filePath':_0x1e031c}))},_0x4c541e=await RequestUtils['postSplitFiles'](_0xc0d4d3);return logger[_0xd22306(0x141)](_0xd22306(0x123)+JSON[_0xd22306(0x12b)](_0x4c541e)),this[_0xd22306(0x13b)]+=0x1,this[_0xd22306(0x148)](_0x4c541e[_0xd22306(0x138)]||{});}catch(_0x124960){return logger[_0xd22306(0x141)]('[splitTests]\x20Exception\x20in\x20sending\x20test\x20files:\x20'+(_0x124960[_0xd22306(0x142)]||_0x124960[_0xd22306(0x12f)]())),null;}}async['getOrderedTestFiles'](_0x2b1306){const _0x2004cd=a124_0x576bbb,_0x2ca512={};_0x2ca512[_0x2004cd(0x10d)]=_0x2004cd(0x11e),_0x2ca512['lckWp']=function(_0x336c95,_0x43bbd0){return _0x336c95*_0x43bbd0;},_0x2ca512[_0x2004cd(0x11f)]=function(_0x354507,_0x4171ce){return _0x354507&&_0x4171ce;},_0x2ca512[_0x2004cd(0x10e)]=function(_0x5f2b21,_0x4d40f8){return _0x5f2b21<_0x4d40f8;},_0x2ca512[_0x2004cd(0x14a)]=function(_0x39409c,_0x3c7012){return _0x39409c-_0x3c7012;},_0x2ca512[_0x2004cd(0x110)]='[getOrderedTestFiles]\x20Fetching\x20ordered\x20tests\x20from\x20timeout\x20URL',_0x2ca512['eQslk']=function(_0x395946,_0x22c9b1){return _0x395946>_0x22c9b1;};const _0x21c667=_0x2ca512;if(!_0x2b1306)return null;try{logger[_0x2004cd(0x141)](_0x21c667['MAHMs']);const _0x2b2fc9=_0x2b1306[_0x2004cd(0x117)]||this[_0x2004cd(0x12d)],_0x374b79=_0x21c667[_0x2004cd(0x131)](_0x2b1306['timeout']||this['defaultTimeout'],0x3e8),_0xf84956=_0x2b1306[_0x2004cd(0x12c)],_0x14a2f7=_0x2b1306[_0x2004cd(0x140)];if(_0x21c667['jqklT'](!_0x14a2f7,!_0xf84956))return null;let _0x3a7f7c=null;const _0x89c496=Date['now']();while(_0x14a2f7&&_0x21c667[_0x2004cd(0x10e)](_0x21c667[_0x2004cd(0x14a)](Date['now'](),_0x89c496),_0x374b79)){logger[_0x2004cd(0x141)](_0x2004cd(0x128)+_0x14a2f7);const _0x52c40b=await RequestUtils[_0x2004cd(0x135)](_0x14a2f7);logger[_0x2004cd(0x141)](_0x2004cd(0x13c)+JSON[_0x2004cd(0x12b)](_0x52c40b)),this[_0x2004cd(0x13b)]+=0x1;if(_0x52c40b&&_0x52c40b['tests']){_0x3a7f7c=_0x52c40b[_0x2004cd(0x11c)];break;}await new Promise(_0x3048d5=>setTimeout(_0x3048d5,_0x2b2fc9*0x3e8)),logger[_0x2004cd(0x141)](_0x2004cd(0x139)+_0x2b2fc9+_0x2004cd(0x133));}if(_0x21c667[_0x2004cd(0x11f)](!_0x3a7f7c,_0xf84956)){logger[_0x2004cd(0x141)](_0x21c667[_0x2004cd(0x110)]);const _0x4846d5=await RequestUtils['getSplitFiles'](_0xf84956);_0x4846d5&&_0x4846d5[_0x2004cd(0x11c)]&&(_0x3a7f7c=_0x4846d5['tests']);}if(_0x3a7f7c&&_0x21c667['eQslk'](_0x3a7f7c[_0x2004cd(0x118)],0x0))return _0x3a7f7c[_0x2004cd(0x126)](_0x359f5d=>_0x359f5d[_0x2004cd(0x144)]);return null;}catch(_0x3d9728){return logger['debug'](_0x2004cd(0x115)+(_0x3d9728[_0x2004cd(0x142)]||_0x3d9728[_0x2004cd(0x12f)]())),null;}}['_getHostInfo'](){const _0x3de91e=a124_0x576bbb,_0x1fe978={'YkpYc':function(_0x4db435,_0x4acf18){return _0x4db435(_0x4acf18);}},_0x3ef901=_0x1fe978[_0x3de91e(0x112)](require,'os');try{return{'hostname':_0x3ef901[_0x3de91e(0x114)](),'platform':_0x3ef901[_0x3de91e(0x132)](),'release':_0x3ef901['release'](),'arch':_0x3ef901[_0x3de91e(0x11b)](),'totalmem':_0x3ef901[_0x3de91e(0x113)](),'freemem':_0x3ef901['freemem']()};}catch(_0x372ef0){return{};}}}module['exports']=TestOrderingServerHandler;