function a123_0x2e9a(_0x990146,_0xbf9354){const _0x348ac2=a123_0x348a();return a123_0x2e9a=function(_0x2e9ad0,_0x3f0dc6){_0x2e9ad0=_0x2e9ad0-0xb8;let _0x50ab66=_0x348ac2[_0x2e9ad0];return _0x50ab66;},a123_0x2e9a(_0x990146,_0xbf9354);}const a123_0x151c3a=a123_0x2e9a;(function(_0x109820,_0x455b33){const _0x52a46d=a123_0x2e9a,_0x3897ad=_0x109820();while(!![]){try{const _0x1e103c=parseInt(_0x52a46d(0xcb))/0x1*(-parseInt(_0x52a46d(0xde))/0x2)+parseInt(_0x52a46d(0xda))/0x3+-parseInt(_0x52a46d(0xd0))/0x4+-parseInt(_0x52a46d(0xb9))/0x5*(-parseInt(_0x52a46d(0xe5))/0x6)+parseInt(_0x52a46d(0xbb))/0x7*(parseInt(_0x52a46d(0xe3))/0x8)+parseInt(_0x52a46d(0xf5))/0x9+parseInt(_0x52a46d(0xc1))/0xa;if(_0x1e103c===_0x455b33)break;else _0x3897ad['push'](_0x3897ad['shift']());}catch(_0x4c8bd8){_0x3897ad['push'](_0x3897ad['shift']());}}}(a123_0x348a,0x2ed5f));const fs=require('fs'),logger=require(a123_0x151c3a(0xd1))[a123_0x151c3a(0xef)],TAG='FailFastFileHelper';function a123_0x348a(){const _0x1cd85c=['../logger','Tcael','error','sKsKl','defaultState','failFastConfig',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','uniqueFailedTests','stack','216933XFDNxJ','CUeaV','fullName',']\x20Error\x20writing\x20state\x20file:\x20','749978VGDCSZ','openSync','status','split','add','386200xGueWH','has','84756DCGguV','releaseLock','newState','ZScxO','GQNqy','stringify','MbsWc','isNewFailure','readFileSync','warn','winstonLogger',']\x20Error\x20reading\x20state\x20file:\x20','unlinkSync','utf8','failedTests','parse','1253799lRdaaJ','failed','existsSync','75DfAVCE',']\x20Error\x20releasing\x20lock:\x20','42zCzGnN','writeState',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','readState','hOymk','stateFilePath','1669090izkjmo','recordTestResult','updateAPIFailedCount','LoPgx','function','isArray','writeFileSync','enOAg','EEXIST','acquireLock','1miuoMO','lockFilePath','totalTests','message','from','1252972CauhTS'];a123_0x348a=function(){return _0x1cd85c;};return a123_0x348a();}class FileHelper{constructor(_0x553709,_0x5e4dfc,_0x5d9a39,_0x16f4a0){const _0x3c1c8c=a123_0x151c3a,_0x29b641={};_0x29b641[_0x3c1c8c(0xd2)]='4|0|2|1|3',_0x29b641[_0x3c1c8c(0xe8)]=_0x3c1c8c(0xf2);const _0x3c4463=_0x29b641,_0x3e5e6d=_0x3c4463['Tcael'][_0x3c1c8c(0xe1)]('|');let _0x288404=0x0;while(!![]){switch(_0x3e5e6d[_0x288404++]){case'0':this[_0x3c1c8c(0xc0)]=_0x5e4dfc;continue;case'1':this[_0x3c1c8c(0xd5)]=_0x16f4a0;continue;case'2':this[_0x3c1c8c(0xcc)]=_0x5d9a39;continue;case'3':if(!fs[_0x3c1c8c(0xb8)](this[_0x3c1c8c(0xc0)]))try{fs['writeFileSync'](this[_0x3c1c8c(0xc0)],'{}',_0x3c4463['ZScxO']);}catch(_0x215704){logger[_0x3c1c8c(0xd3)]('['+TAG+']\x20Error\x20creating\x20state\x20file:\x20'+_0x215704[_0x3c1c8c(0xce)]+'\x20'+_0x215704[_0x3c1c8c(0xd9)]);}continue;case'4':this[_0x3c1c8c(0xd6)]=_0x553709;continue;}break;}}async[a123_0x151c3a(0xca)](){const _0x3c632d=a123_0x151c3a,_0x4fd813={};_0x4fd813[_0x3c632d(0xeb)]=function(_0x32f369,_0x4c293c){return _0x32f369===_0x4c293c;},_0x4fd813[_0x3c632d(0xe9)]=_0x3c632d(0xc9);const _0x5e5e27=_0x4fd813;let _0x1905e6;try{return _0x1905e6=fs[_0x3c632d(0xdf)](this['lockFilePath'],'wx'),_0x1905e6;}catch(_0x385326){if(_0x5e5e27[_0x3c632d(0xeb)](_0x385326['code'],_0x5e5e27[_0x3c632d(0xe9)]))return null;throw _0x385326;}}async['releaseLock'](_0x457ab4){const _0x8d66bf=a123_0x151c3a;if(_0x457ab4)try{fs['closeSync'](_0x457ab4),fs[_0x8d66bf(0xf1)](this[_0x8d66bf(0xcc)]);}catch(_0x3b8e90){logger[_0x8d66bf(0xd3)]('['+TAG+_0x8d66bf(0xba)+_0x3b8e90[_0x8d66bf(0xce)]+'\x20'+_0x3b8e90[_0x8d66bf(0xd9)]);}}[a123_0x151c3a(0xbe)](){const _0x12aa58=a123_0x151c3a,_0x44ab67={};_0x44ab67[_0x12aa58(0xd4)]=_0x12aa58(0xf2);const _0x2df672=_0x44ab67;try{const _0x55c228=fs[_0x12aa58(0xed)](this[_0x12aa58(0xc0)],_0x2df672['sKsKl']);return JSON[_0x12aa58(0xf4)](_0x55c228);}catch(_0x29ae25){return logger[_0x12aa58(0xd3)]('['+TAG+_0x12aa58(0xf0)+_0x29ae25['message']+'\x20'+_0x29ae25[_0x12aa58(0xd9)]),null;}}async[a123_0x151c3a(0xbc)](_0x560aee){const _0x3b4643=a123_0x151c3a,_0x2615fc={..._0x560aee,'uniqueFailedTests':Array[_0x3b4643(0xc6)](_0x560aee[_0x3b4643(0xd8)])?_0x560aee['uniqueFailedTests']:Array[_0x3b4643(0xcf)](_0x560aee[_0x3b4643(0xd8)]||[])};try{fs[_0x3b4643(0xc7)](this['stateFilePath'],JSON['stringify'](_0x2615fc,null,0x2));}catch(_0x7cf525){logger[_0x3b4643(0xd3)]('['+TAG+_0x3b4643(0xdd)+_0x7cf525[_0x3b4643(0xce)]+'\x20'+_0x7cf525[_0x3b4643(0xd9)]);throw _0x7cf525;}}async[a123_0x151c3a(0xc2)](_0x4daf98,_0x3565a5){const _0x13cd10=a123_0x151c3a,_0x48eaa7={};_0x48eaa7[_0x13cd10(0xc4)]=function(_0x71e4ed,_0x2053cd){return _0x71e4ed!==_0x2053cd;},_0x48eaa7[_0x13cd10(0xdb)]=_0x13cd10(0xc5),_0x48eaa7[_0x13cd10(0xc8)]=function(_0x45a3b5,_0x17dc6a){return _0x45a3b5===_0x17dc6a;},_0x48eaa7[_0x13cd10(0xbf)]=_0x13cd10(0xf6);const _0x3accac=_0x48eaa7,_0x206fed=await this[_0x13cd10(0xca)]();if(!_0x206fed)return logger[_0x13cd10(0xee)]('['+TAG+_0x13cd10(0xbd)),{'newState':this[_0x13cd10(0xbe)]()||this[_0x13cd10(0xd5)],'isNewFailure':![]};try{let _0x41d3cc=this[_0x13cd10(0xbe)]();!_0x41d3cc&&(_0x41d3cc=JSON[_0x13cd10(0xf4)](JSON[_0x13cd10(0xea)](this[_0x13cd10(0xd5)])));if(!_0x41d3cc['uniqueFailedTests']||_0x3accac[_0x13cd10(0xc4)](typeof _0x41d3cc[_0x13cd10(0xd8)][Symbol['iterator']],_0x3accac['CUeaV']))_0x41d3cc['uniqueFailedTests']=new Set();else Array['isArray'](_0x41d3cc[_0x13cd10(0xd8)])&&(_0x41d3cc[_0x13cd10(0xd8)]=new Set(_0x41d3cc[_0x13cd10(0xd8)]));_0x41d3cc[_0x13cd10(0xcd)]=_0x3565a5;let _0x2c19c0=![];_0x3accac[_0x13cd10(0xc8)](_0x4daf98[_0x13cd10(0xe0)],_0x3accac[_0x13cd10(0xbf)])&&(_0x41d3cc[_0x13cd10(0xf3)]+=0x1,!_0x41d3cc[_0x13cd10(0xd8)][_0x13cd10(0xe4)](_0x4daf98[_0x13cd10(0xdc)])&&(_0x41d3cc['uniqueFailedTests'][_0x13cd10(0xe2)](_0x4daf98[_0x13cd10(0xdc)]),_0x2c19c0=!![]));await this[_0x13cd10(0xbc)](_0x41d3cc);const _0x33e4a9={};return _0x33e4a9[_0x13cd10(0xe7)]=_0x41d3cc,_0x33e4a9[_0x13cd10(0xec)]=_0x2c19c0,_0x33e4a9;}finally{await this[_0x13cd10(0xe6)](_0x206fed);}}async[a123_0x151c3a(0xc3)](_0x369631){const _0x14d2ed=a123_0x151c3a,_0x10f422=await this[_0x14d2ed(0xca)]();if(!_0x10f422)return logger[_0x14d2ed(0xee)]('['+TAG+_0x14d2ed(0xd7)),this['readState']()||this[_0x14d2ed(0xd5)];try{let _0x305bf0=this[_0x14d2ed(0xbe)]();return!_0x305bf0&&(_0x305bf0=JSON[_0x14d2ed(0xf4)](JSON['stringify'](this[_0x14d2ed(0xd5)]))),_0x305bf0['lastAPIFailedCount']=_0x369631,await this[_0x14d2ed(0xbc)](_0x305bf0),_0x305bf0;}finally{await this[_0x14d2ed(0xe6)](_0x10f422);}}}module['exports']=FileHelper;