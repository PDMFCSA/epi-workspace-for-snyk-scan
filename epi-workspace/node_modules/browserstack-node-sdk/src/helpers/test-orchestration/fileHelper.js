const a120_0x321de3=a120_0x5445;(function(_0x79867f,_0x1f136d){const _0x138ae7=a120_0x5445,_0x3317a7=_0x79867f();while(!![]){try{const _0x59a698=-parseInt(_0x138ae7(0x135))/0x1+-parseInt(_0x138ae7(0x130))/0x2+parseInt(_0x138ae7(0x10a))/0x3+parseInt(_0x138ae7(0x124))/0x4*(-parseInt(_0x138ae7(0xfc))/0x5)+parseInt(_0x138ae7(0x111))/0x6*(-parseInt(_0x138ae7(0x12f))/0x7)+-parseInt(_0x138ae7(0x102))/0x8*(-parseInt(_0x138ae7(0x10e))/0x9)+parseInt(_0x138ae7(0x11f))/0xa;if(_0x59a698===_0x1f136d)break;else _0x3317a7['push'](_0x3317a7['shift']());}catch(_0x46ef82){_0x3317a7['push'](_0x3317a7['shift']());}}}(a120_0x59c6,0xd303f));const fs=require('fs'),logger=require('../logger')[a120_0x321de3(0x11d)],TAG=a120_0x321de3(0x121);class FileHelper{constructor(_0x56d3fa,_0x21c1e6,_0x3bd35d,_0x123e26){const _0x4dc4b9=a120_0x321de3,_0x3a4700={};_0x3a4700[_0x4dc4b9(0x127)]=_0x4dc4b9(0x104),_0x3a4700[_0x4dc4b9(0x129)]=_0x4dc4b9(0x122);const _0x43899e=_0x3a4700,_0x573060=_0x43899e['xzHAR']['split']('|');let _0x20f7b5=0x0;while(!![]){switch(_0x573060[_0x20f7b5++]){case'0':this[_0x4dc4b9(0x10c)]=_0x3bd35d;continue;case'1':this[_0x4dc4b9(0x12a)]=_0x56d3fa;continue;case'2':this['stateFilePath']=_0x21c1e6;continue;case'3':if(!fs[_0x4dc4b9(0x10f)](this['stateFilePath']))try{fs[_0x4dc4b9(0xfb)](this[_0x4dc4b9(0x108)],'{}',_0x43899e[_0x4dc4b9(0x129)]);}catch(_0x2ea1a1){logger[_0x4dc4b9(0x131)]('['+TAG+']\x20Error\x20creating\x20state\x20file:\x20'+_0x2ea1a1[_0x4dc4b9(0x109)]+'\x20'+_0x2ea1a1[_0x4dc4b9(0x138)]);}continue;case'4':this[_0x4dc4b9(0x12c)]=_0x123e26;continue;}break;}}async[a120_0x321de3(0x136)](){const _0x50a858=a120_0x321de3,_0x3b8393={};_0x3b8393[_0x50a858(0x134)]=function(_0x100180,_0x47a2b8){return _0x100180===_0x47a2b8;},_0x3b8393['OBuFN']=_0x50a858(0x123);const _0x2cfa95=_0x3b8393;let _0xd615a;try{return _0xd615a=fs['openSync'](this['lockFilePath'],'wx'),_0xd615a;}catch(_0x42b199){if(_0x2cfa95[_0x50a858(0x134)](_0x42b199[_0x50a858(0x10b)],_0x2cfa95[_0x50a858(0x12e)]))return null;throw _0x42b199;}}async[a120_0x321de3(0x12b)](_0x1654ed){const _0x5cb273=a120_0x321de3;if(_0x1654ed)try{fs[_0x5cb273(0x11c)](_0x1654ed),fs[_0x5cb273(0x114)](this['lockFilePath']);}catch(_0x275ad6){logger['error']('['+TAG+_0x5cb273(0x113)+_0x275ad6[_0x5cb273(0x109)]+'\x20'+_0x275ad6[_0x5cb273(0x138)]);}}['readState'](){const _0x438218=a120_0x321de3,_0x450d7b={};_0x450d7b['MizDy']=_0x438218(0x122);const _0x254c77=_0x450d7b;try{const _0x680559=fs[_0x438218(0x117)](this['stateFilePath'],_0x254c77[_0x438218(0x100)]);return JSON[_0x438218(0x119)](_0x680559);}catch(_0x4ec1ff){return logger[_0x438218(0x131)]('['+TAG+_0x438218(0x126)+_0x4ec1ff[_0x438218(0x109)]+'\x20'+_0x4ec1ff[_0x438218(0x138)]),null;}}async[a120_0x321de3(0x11b)](_0x2fd94c){const _0x532699=a120_0x321de3,_0x5bec31={..._0x2fd94c,'uniqueFailedTests':Array[_0x532699(0xfe)](_0x2fd94c['uniqueFailedTests'])?_0x2fd94c['uniqueFailedTests']:Array[_0x532699(0x118)](_0x2fd94c[_0x532699(0x125)]||[])};try{fs[_0x532699(0xfb)](this[_0x532699(0x108)],JSON[_0x532699(0xfa)](_0x5bec31,null,0x2));}catch(_0x51fe04){logger[_0x532699(0x131)]('['+TAG+_0x532699(0x12d)+_0x51fe04[_0x532699(0x109)]+'\x20'+_0x51fe04[_0x532699(0x138)]);throw _0x51fe04;}}async[a120_0x321de3(0xfd)](_0x5f55b0,_0x144da9){const _0x1e2ebb=a120_0x321de3,_0x583abe={};_0x583abe['HjbNh']=function(_0x333c5c,_0x6b2655){return _0x333c5c!==_0x6b2655;},_0x583abe['BIajl']=_0x1e2ebb(0x103),_0x583abe[_0x1e2ebb(0x110)]=function(_0x874558,_0x1d1136){return _0x874558===_0x1d1136;},_0x583abe[_0x1e2ebb(0x11a)]='failed';const _0xc51b23=_0x583abe,_0x1f5fdf=await this[_0x1e2ebb(0x136)]();if(!_0x1f5fdf)return logger[_0x1e2ebb(0x106)]('['+TAG+_0x1e2ebb(0x132)),{'newState':this['readState']()||this[_0x1e2ebb(0x12c)],'isNewFailure':![]};try{let _0x581c7c=this[_0x1e2ebb(0x10d)]();!_0x581c7c&&(_0x581c7c=JSON[_0x1e2ebb(0x119)](JSON[_0x1e2ebb(0xfa)](this[_0x1e2ebb(0x12c)])));if(!_0x581c7c[_0x1e2ebb(0x125)]||_0xc51b23[_0x1e2ebb(0x107)](typeof _0x581c7c[_0x1e2ebb(0x125)][Symbol[_0x1e2ebb(0xff)]],_0xc51b23['BIajl']))_0x581c7c[_0x1e2ebb(0x125)]=new Set();else Array[_0x1e2ebb(0xfe)](_0x581c7c[_0x1e2ebb(0x125)])&&(_0x581c7c['uniqueFailedTests']=new Set(_0x581c7c[_0x1e2ebb(0x125)]));_0x581c7c['totalTests']=_0x144da9;let _0x33d7f4=![];_0xc51b23['JNCTB'](_0x5f55b0['status'],_0xc51b23[_0x1e2ebb(0x11a)])&&(_0x581c7c[_0x1e2ebb(0x112)]+=0x1,!_0x581c7c['uniqueFailedTests'][_0x1e2ebb(0x128)](_0x5f55b0[_0x1e2ebb(0x137)])&&(_0x581c7c[_0x1e2ebb(0x125)][_0x1e2ebb(0x120)](_0x5f55b0[_0x1e2ebb(0x137)]),_0x33d7f4=!![]));await this[_0x1e2ebb(0x11b)](_0x581c7c);const _0x40e56b={};return _0x40e56b[_0x1e2ebb(0x11e)]=_0x581c7c,_0x40e56b[_0x1e2ebb(0x101)]=_0x33d7f4,_0x40e56b;}finally{await this[_0x1e2ebb(0x12b)](_0x1f5fdf);}}async[a120_0x321de3(0x116)](_0x39beaf){const _0x35a0b8=a120_0x321de3,_0x5d90a1=await this[_0x35a0b8(0x136)]();if(!_0x5d90a1)return logger['warn']('['+TAG+_0x35a0b8(0x115)),this[_0x35a0b8(0x10d)]()||this['defaultState'];try{let _0x585986=this['readState']();return!_0x585986&&(_0x585986=JSON[_0x35a0b8(0x119)](JSON[_0x35a0b8(0xfa)](this['defaultState']))),_0x585986[_0x35a0b8(0x105)]=_0x39beaf,await this[_0x35a0b8(0x11b)](_0x585986),_0x585986;}finally{await this[_0x35a0b8(0x12b)](_0x5d90a1);}}}function a120_0x59c6(){const _0x2ebd39=['add','FailFastFileHelper','utf8','EEXIST','3354868GluBgj','uniqueFailedTests',']\x20Error\x20reading\x20state\x20file:\x20','xzHAR','has','yvkTB','failFastConfig','releaseLock','defaultState',']\x20Error\x20writing\x20state\x20file:\x20','OBuFN','4564vZIcjn','2320946AZSEXH','error',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','exports','WfdjS','346848gqSBQn','acquireLock','fullName','stack','stringify','writeFileSync','10gsbyPo','recordTestResult','isArray','iterator','MizDy','isNewFailure','112oEUXoq','function','1|2|0|4|3','lastAPIFailedCount','warn','HjbNh','stateFilePath','message','554721fFZLpW','code','lockFilePath','readState','383481ekbwAJ','existsSync','JNCTB','1074CiZOEC','failedTests',']\x20Error\x20releasing\x20lock:\x20','unlinkSync',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','updateAPIFailedCount','readFileSync','from','parse','QeUfJ','writeState','closeSync','winstonLogger','newState','33843490WwUGQo'];a120_0x59c6=function(){return _0x2ebd39;};return a120_0x59c6();}function a120_0x5445(_0x502d72,_0x1a3cb4){const _0x59c684=a120_0x59c6();return a120_0x5445=function(_0x544573,_0x57bbea){_0x544573=_0x544573-0xfa;let _0x14f851=_0x59c684[_0x544573];return _0x14f851;},a120_0x5445(_0x502d72,_0x1a3cb4);}module[a120_0x321de3(0x133)]=FileHelper;