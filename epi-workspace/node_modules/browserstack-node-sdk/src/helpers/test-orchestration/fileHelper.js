const a129_0x536dde=a129_0x40c8;function a129_0x40c8(_0x4370b5,_0x2cb86a){const _0x3bd978=a129_0x3bd9();return a129_0x40c8=function(_0x40c80b,_0x45bf8a){_0x40c80b=_0x40c80b-0x11c;let _0x4ff11e=_0x3bd978[_0x40c80b];return _0x4ff11e;},a129_0x40c8(_0x4370b5,_0x2cb86a);}(function(_0x3a0af0,_0x190e31){const _0x171060=a129_0x40c8,_0x5f0722=_0x3a0af0();while(!![]){try{const _0xe42188=parseInt(_0x171060(0x129))/0x1*(-parseInt(_0x171060(0x131))/0x2)+-parseInt(_0x171060(0x12e))/0x3+-parseInt(_0x171060(0x157))/0x4*(parseInt(_0x171060(0x12b))/0x5)+parseInt(_0x171060(0x154))/0x6+parseInt(_0x171060(0x14a))/0x7+parseInt(_0x171060(0x156))/0x8*(parseInt(_0x171060(0x13f))/0x9)+-parseInt(_0x171060(0x140))/0xa;if(_0xe42188===_0x190e31)break;else _0x5f0722['push'](_0x5f0722['shift']());}catch(_0x49d107){_0x5f0722['push'](_0x5f0722['shift']());}}}(a129_0x3bd9,0x7794d));const fs=require('fs'),logger=require('../logger')[a129_0x536dde(0x123)],TAG=a129_0x536dde(0x134);class FileHelper{constructor(_0x2cd81f,_0x4de9c7,_0x2815df,_0x10c890){const _0x7aa6da=a129_0x536dde,_0x199b10={};_0x199b10[_0x7aa6da(0x141)]=_0x7aa6da(0x11e),_0x199b10[_0x7aa6da(0x11f)]=_0x7aa6da(0x151);const _0x587870=_0x199b10,_0x462717=_0x587870[_0x7aa6da(0x141)][_0x7aa6da(0x121)]('|');let _0x257c8b=0x0;while(!![]){switch(_0x462717[_0x257c8b++]){case'0':this[_0x7aa6da(0x127)]=_0x2815df;continue;case'1':this[_0x7aa6da(0x152)]=_0x2cd81f;continue;case'2':if(!fs[_0x7aa6da(0x138)](this[_0x7aa6da(0x126)]))try{fs[_0x7aa6da(0x155)](this[_0x7aa6da(0x126)],'{}',_0x587870[_0x7aa6da(0x11f)]);}catch(_0x2b6931){logger['error']('['+TAG+']\x20Error\x20creating\x20state\x20file:\x20'+_0x2b6931[_0x7aa6da(0x137)]+'\x20'+_0x2b6931[_0x7aa6da(0x159)]);}continue;case'3':this[_0x7aa6da(0x12a)]=_0x10c890;continue;case'4':this[_0x7aa6da(0x126)]=_0x4de9c7;continue;}break;}}async[a129_0x536dde(0x125)](){const _0x4fc4d3=a129_0x536dde,_0x4ded7d={};_0x4ded7d[_0x4fc4d3(0x133)]=function(_0x22d17c,_0x296330){return _0x22d17c===_0x296330;},_0x4ded7d[_0x4fc4d3(0x143)]=_0x4fc4d3(0x13e);const _0x36ecf8=_0x4ded7d;let _0x4e56f4;try{return _0x4e56f4=fs[_0x4fc4d3(0x14f)](this[_0x4fc4d3(0x127)],'wx'),_0x4e56f4;}catch(_0x571c5a){if(_0x36ecf8[_0x4fc4d3(0x133)](_0x571c5a[_0x4fc4d3(0x14c)],_0x36ecf8[_0x4fc4d3(0x143)]))return null;throw _0x571c5a;}}async[a129_0x536dde(0x128)](_0x43dc01){const _0x5e2f0b=a129_0x536dde;if(_0x43dc01)try{fs[_0x5e2f0b(0x149)](_0x43dc01),fs['unlinkSync'](this[_0x5e2f0b(0x127)]);}catch(_0x58a38d){logger['error']('['+TAG+']\x20Error\x20releasing\x20lock:\x20'+_0x58a38d['message']+'\x20'+_0x58a38d[_0x5e2f0b(0x159)]);}}[a129_0x536dde(0x13d)](){const _0x3334f3=a129_0x536dde,_0x5c3f57={};_0x5c3f57[_0x3334f3(0x14e)]=_0x3334f3(0x151);const _0x27e560=_0x5c3f57;try{const _0x4af762=fs[_0x3334f3(0x144)](this['stateFilePath'],_0x27e560[_0x3334f3(0x14e)]);return JSON[_0x3334f3(0x13c)](_0x4af762);}catch(_0x1b4cb0){return logger['error']('['+TAG+_0x3334f3(0x132)+_0x1b4cb0[_0x3334f3(0x137)]+'\x20'+_0x1b4cb0[_0x3334f3(0x159)]),null;}}async[a129_0x536dde(0x14b)](_0x9fc642){const _0x2ea985=a129_0x536dde,_0x2eb298={..._0x9fc642,'uniqueFailedTests':Array['isArray'](_0x9fc642['uniqueFailedTests'])?_0x9fc642['uniqueFailedTests']:Array[_0x2ea985(0x11d)](_0x9fc642['uniqueFailedTests']||[])};try{fs[_0x2ea985(0x155)](this['stateFilePath'],JSON[_0x2ea985(0x150)](_0x2eb298,null,0x2));}catch(_0x58d704){logger[_0x2ea985(0x146)]('['+TAG+_0x2ea985(0x130)+_0x58d704[_0x2ea985(0x137)]+'\x20'+_0x58d704['stack']);throw _0x58d704;}}async[a129_0x536dde(0x120)](_0x1aebf0,_0x59b9a4){const _0x52641c=a129_0x536dde,_0x3a789c={};_0x3a789c[_0x52641c(0x136)]=function(_0x3a9067,_0x3ca2d5){return _0x3a9067!==_0x3ca2d5;},_0x3a789c['yZtXB']=_0x52641c(0x122),_0x3a789c['OQgjo']=function(_0x3e17b6,_0x368ba5){return _0x3e17b6===_0x368ba5;},_0x3a789c[_0x52641c(0x14d)]=_0x52641c(0x135);const _0xaa0d0=_0x3a789c,_0x4eca79=await this['acquireLock']();if(!_0x4eca79)return logger[_0x52641c(0x147)]('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.'),{'newState':this['readState']()||this['defaultState'],'isNewFailure':![]};try{let _0x4b1fff=this['readState']();!_0x4b1fff&&(_0x4b1fff=JSON['parse'](JSON[_0x52641c(0x150)](this[_0x52641c(0x12a)])));if(!_0x4b1fff[_0x52641c(0x145)]||_0xaa0d0[_0x52641c(0x136)](typeof _0x4b1fff['uniqueFailedTests'][Symbol[_0x52641c(0x12c)]],_0xaa0d0[_0x52641c(0x13a)]))_0x4b1fff['uniqueFailedTests']=new Set();else Array[_0x52641c(0x11c)](_0x4b1fff['uniqueFailedTests'])&&(_0x4b1fff[_0x52641c(0x145)]=new Set(_0x4b1fff[_0x52641c(0x145)]));_0x4b1fff[_0x52641c(0x12f)]=_0x59b9a4;let _0x158294=![];_0xaa0d0[_0x52641c(0x124)](_0x1aebf0[_0x52641c(0x139)],_0xaa0d0['fwIHT'])&&(_0x4b1fff['failedTests']+=0x1,!_0x4b1fff[_0x52641c(0x145)]['has'](_0x1aebf0['fullName'])&&(_0x4b1fff[_0x52641c(0x145)][_0x52641c(0x12d)](_0x1aebf0[_0x52641c(0x153)]),_0x158294=!![]));await this[_0x52641c(0x14b)](_0x4b1fff);const _0x1c1d8d={};return _0x1c1d8d['newState']=_0x4b1fff,_0x1c1d8d[_0x52641c(0x158)]=_0x158294,_0x1c1d8d;}finally{await this[_0x52641c(0x128)](_0x4eca79);}}async[a129_0x536dde(0x13b)](_0x594c7d){const _0x35bbe3=a129_0x536dde,_0x32ac59=await this[_0x35bbe3(0x125)]();if(!_0x32ac59)return logger[_0x35bbe3(0x147)]('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.'),this[_0x35bbe3(0x13d)]()||this[_0x35bbe3(0x12a)];try{let _0x4e7d0b=this[_0x35bbe3(0x13d)]();return!_0x4e7d0b&&(_0x4e7d0b=JSON[_0x35bbe3(0x13c)](JSON[_0x35bbe3(0x150)](this[_0x35bbe3(0x12a)]))),_0x4e7d0b[_0x35bbe3(0x142)]=_0x594c7d,await this[_0x35bbe3(0x14b)](_0x4e7d0b),_0x4e7d0b;}finally{await this['releaseLock'](_0x32ac59);}}}function a129_0x3bd9(){const _0x10be5e=['releaseLock','410259yoCpVj','defaultState','602030OTeplJ','iterator','add','133800UWtiWO','totalTests',']\x20Error\x20writing\x20state\x20file:\x20','2FPeJrn',']\x20Error\x20reading\x20state\x20file:\x20','zJuvc','FailFastFileHelper','failed','Okpbl','message','existsSync','status','yZtXB','updateAPIFailedCount','parse','readState','EEXIST','72GQHpLM','6588300lFAyHp','rbGgt','lastAPIFailedCount','nFeNE','readFileSync','uniqueFailedTests','error','warn','exports','closeSync','3746218FCKtFr','writeState','code','fwIHT','fHfOa','openSync','stringify','utf8','failFastConfig','fullName','3793140HUkzXB','writeFileSync','556536GqlDip','4JOXUKI','isNewFailure','stack','isArray','from','1|4|0|3|2','zKYVt','recordTestResult','split','function','winstonLogger','OQgjo','acquireLock','stateFilePath','lockFilePath'];a129_0x3bd9=function(){return _0x10be5e;};return a129_0x3bd9();}module[a129_0x536dde(0x148)]=FileHelper;