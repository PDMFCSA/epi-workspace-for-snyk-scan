const a133_0x4f8157=a133_0x21cd;function a133_0x21cd(_0xe6c35e,_0x1c0a56){const _0x3684dd=a133_0x3684();return a133_0x21cd=function(_0x21cdfc,_0x5ceded){_0x21cdfc=_0x21cdfc-0x108;let _0x5a3698=_0x3684dd[_0x21cdfc];return _0x5a3698;},a133_0x21cd(_0xe6c35e,_0x1c0a56);}(function(_0x4be9ba,_0x5e59fa){const _0x192417=a133_0x21cd,_0xc905b4=_0x4be9ba();while(!![]){try{const _0x38a260=-parseInt(_0x192417(0x12e))/0x1+parseInt(_0x192417(0x13e))/0x2*(-parseInt(_0x192417(0x12b))/0x3)+parseInt(_0x192417(0x10b))/0x4+parseInt(_0x192417(0x127))/0x5+-parseInt(_0x192417(0x12a))/0x6+parseInt(_0x192417(0x134))/0x7+parseInt(_0x192417(0x116))/0x8*(-parseInt(_0x192417(0x120))/0x9);if(_0x38a260===_0x5e59fa)break;else _0xc905b4['push'](_0xc905b4['shift']());}catch(_0x27fc20){_0xc905b4['push'](_0xc905b4['shift']());}}}(a133_0x3684,0xd8261));const fs=require('fs'),logger=require('../logger')['winstonLogger'],TAG='FailFastFileHelper';class FileHelper{constructor(_0x27c1d8,_0x579392,_0x387e15,_0x53a26d){const _0x4be267=a133_0x21cd,_0x2c394c={};_0x2c394c[_0x4be267(0x135)]='3|1|0|4|2',_0x2c394c['Qttmd']=_0x4be267(0x143);const _0x26167c=_0x2c394c,_0x2c1f8a=_0x26167c[_0x4be267(0x135)][_0x4be267(0x11a)]('|');let _0x26a483=0x0;while(!![]){switch(_0x2c1f8a[_0x26a483++]){case'0':this[_0x4be267(0x130)]=_0x387e15;continue;case'1':this[_0x4be267(0x136)]=_0x579392;continue;case'2':if(!fs[_0x4be267(0x126)](this[_0x4be267(0x136)]))try{fs[_0x4be267(0x119)](this[_0x4be267(0x136)],'{}',_0x26167c[_0x4be267(0x131)]);}catch(_0x3a73bc){logger[_0x4be267(0x13f)]('['+TAG+_0x4be267(0x12f)+_0x3a73bc[_0x4be267(0x142)]+'\x20'+_0x3a73bc[_0x4be267(0x133)]);}continue;case'3':this['failFastConfig']=_0x27c1d8;continue;case'4':this[_0x4be267(0x10a)]=_0x53a26d;continue;}break;}}async[a133_0x4f8157(0x139)](){const _0x1681a=a133_0x4f8157,_0x1473bc={};_0x1473bc[_0x1681a(0x124)]=function(_0x1aecb7,_0x3b6487){return _0x1aecb7===_0x3b6487;},_0x1473bc[_0x1681a(0x11e)]=_0x1681a(0x13a);const _0x5c52cf=_0x1473bc;let _0x5c74d3;try{return _0x5c74d3=fs[_0x1681a(0x125)](this[_0x1681a(0x130)],'wx'),_0x5c74d3;}catch(_0x19af29){if(_0x5c52cf['mLidD'](_0x19af29[_0x1681a(0x137)],_0x5c52cf['NJldf']))return null;throw _0x19af29;}}async[a133_0x4f8157(0x110)](_0x13b668){const _0x56dddd=a133_0x4f8157;if(_0x13b668)try{fs['closeSync'](_0x13b668),fs[_0x56dddd(0x132)](this['lockFilePath']);}catch(_0x29983a){logger[_0x56dddd(0x13f)]('['+TAG+_0x56dddd(0x117)+_0x29983a[_0x56dddd(0x142)]+'\x20'+_0x29983a[_0x56dddd(0x133)]);}}[a133_0x4f8157(0x13c)](){const _0x28cab6=a133_0x4f8157,_0x5b3a14={};_0x5b3a14['AjdBb']=_0x28cab6(0x143);const _0x3b5640=_0x5b3a14;try{const _0x540227=fs[_0x28cab6(0x10c)](this[_0x28cab6(0x136)],_0x3b5640[_0x28cab6(0x11d)]);return JSON[_0x28cab6(0x11f)](_0x540227);}catch(_0x457c8f){return logger[_0x28cab6(0x13f)]('['+TAG+']\x20Error\x20reading\x20state\x20file:\x20'+_0x457c8f[_0x28cab6(0x142)]+'\x20'+_0x457c8f[_0x28cab6(0x133)]),null;}}async[a133_0x4f8157(0x138)](_0x71ae7){const _0x26a9ea=a133_0x4f8157,_0xda71cb={..._0x71ae7,'uniqueFailedTests':Array[_0x26a9ea(0x129)](_0x71ae7[_0x26a9ea(0x11b)])?_0x71ae7[_0x26a9ea(0x11b)]:Array[_0x26a9ea(0x121)](_0x71ae7['uniqueFailedTests']||[])};try{fs[_0x26a9ea(0x119)](this[_0x26a9ea(0x136)],JSON['stringify'](_0xda71cb,null,0x2));}catch(_0x14bc39){logger[_0x26a9ea(0x13f)]('['+TAG+_0x26a9ea(0x111)+_0x14bc39[_0x26a9ea(0x142)]+'\x20'+_0x14bc39[_0x26a9ea(0x133)]);throw _0x14bc39;}}async['recordTestResult'](_0x5dbabd,_0x1a6aaf){const _0x28777f=a133_0x4f8157,_0x3f0746={};_0x3f0746['DdlMZ']=function(_0x320432,_0x29beaf){return _0x320432!==_0x29beaf;},_0x3f0746[_0x28777f(0x112)]=_0x28777f(0x13b),_0x3f0746[_0x28777f(0x118)]=function(_0x4422c3,_0x6cf550){return _0x4422c3===_0x6cf550;},_0x3f0746[_0x28777f(0x115)]=_0x28777f(0x114);const _0x896cc3=_0x3f0746,_0x8a672f=await this[_0x28777f(0x139)]();if(!_0x8a672f)return logger[_0x28777f(0x113)]('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.'),{'newState':this[_0x28777f(0x13c)]()||this[_0x28777f(0x10a)],'isNewFailure':![]};try{let _0x4eb825=this[_0x28777f(0x13c)]();!_0x4eb825&&(_0x4eb825=JSON[_0x28777f(0x11f)](JSON[_0x28777f(0x109)](this[_0x28777f(0x10a)])));if(!_0x4eb825[_0x28777f(0x11b)]||_0x896cc3[_0x28777f(0x10d)](typeof _0x4eb825[_0x28777f(0x11b)][Symbol[_0x28777f(0x128)]],_0x896cc3[_0x28777f(0x112)]))_0x4eb825[_0x28777f(0x11b)]=new Set();else Array[_0x28777f(0x129)](_0x4eb825['uniqueFailedTests'])&&(_0x4eb825[_0x28777f(0x11b)]=new Set(_0x4eb825[_0x28777f(0x11b)]));_0x4eb825[_0x28777f(0x108)]=_0x1a6aaf;let _0x50bcbf=![];_0x896cc3['KYdeC'](_0x5dbabd[_0x28777f(0x123)],_0x896cc3[_0x28777f(0x115)])&&(_0x4eb825[_0x28777f(0x12d)]+=0x1,!_0x4eb825[_0x28777f(0x11b)][_0x28777f(0x122)](_0x5dbabd[_0x28777f(0x10f)])&&(_0x4eb825[_0x28777f(0x11b)]['add'](_0x5dbabd[_0x28777f(0x10f)]),_0x50bcbf=!![]));await this[_0x28777f(0x138)](_0x4eb825);const _0x56ae1b={};return _0x56ae1b[_0x28777f(0x10e)]=_0x4eb825,_0x56ae1b[_0x28777f(0x11c)]=_0x50bcbf,_0x56ae1b;}finally{await this[_0x28777f(0x110)](_0x8a672f);}}async[a133_0x4f8157(0x141)](_0x9b212){const _0x3c1c00=a133_0x4f8157,_0x253142=await this[_0x3c1c00(0x139)]();if(!_0x253142)return logger[_0x3c1c00(0x113)]('['+TAG+_0x3c1c00(0x12c)),this[_0x3c1c00(0x13c)]()||this[_0x3c1c00(0x10a)];try{let _0xd39b1a=this['readState']();return!_0xd39b1a&&(_0xd39b1a=JSON[_0x3c1c00(0x11f)](JSON[_0x3c1c00(0x109)](this['defaultState']))),_0xd39b1a[_0x3c1c00(0x140)]=_0x9b212,await this['writeState'](_0xd39b1a),_0xd39b1a;}finally{await this['releaseLock'](_0x253142);}}}module[a133_0x4f8157(0x13d)]=FileHelper;function a133_0x3684(){const _0x12020f=['AjdBb','NJldf','parse','3008709Goermi','from','has','status','mLidD','openSync','existsSync','5992270MlJoln','iterator','isArray','8801616JIures','6uNJPIb',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','failedTests','248942ryijjv',']\x20Error\x20creating\x20state\x20file:\x20','lockFilePath','Qttmd','unlinkSync','stack','2953601xHkSkG','maDfx','stateFilePath','code','writeState','acquireLock','EEXIST','function','readState','exports','325522YYxXuE','error','lastAPIFailedCount','updateAPIFailedCount','message','utf8','totalTests','stringify','defaultState','6562596WEIZMq','readFileSync','DdlMZ','newState','fullName','releaseLock',']\x20Error\x20writing\x20state\x20file:\x20','XQmgS','warn','failed','fftBg','8yEgGVx',']\x20Error\x20releasing\x20lock:\x20','KYdeC','writeFileSync','split','uniqueFailedTests','isNewFailure'];a133_0x3684=function(){return _0x12020f;};return a133_0x3684();}