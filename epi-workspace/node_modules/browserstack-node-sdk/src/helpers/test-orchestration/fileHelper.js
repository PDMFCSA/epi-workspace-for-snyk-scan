const a130_0x9e0d40=a130_0x5258;(function(_0x1043f3,_0x442b55){const _0x283605=a130_0x5258,_0x36d31b=_0x1043f3();while(!![]){try{const _0x2c90c4=-parseInt(_0x283605(0x1b1))/0x1+parseInt(_0x283605(0x1b6))/0x2+-parseInt(_0x283605(0x1d9))/0x3+-parseInt(_0x283605(0x1b3))/0x4*(parseInt(_0x283605(0x1be))/0x5)+parseInt(_0x283605(0x1a7))/0x6+-parseInt(_0x283605(0x1c6))/0x7*(-parseInt(_0x283605(0x1dd))/0x8)+-parseInt(_0x283605(0x1b0))/0x9*(-parseInt(_0x283605(0x1e0))/0xa);if(_0x2c90c4===_0x442b55)break;else _0x36d31b['push'](_0x36d31b['shift']());}catch(_0x3f9815){_0x36d31b['push'](_0x36d31b['shift']());}}}(a130_0x4a33,0xd6c2e));function a130_0x4a33(){const _0x5adf8b=[']\x20Error\x20writing\x20state\x20file:\x20','lastAPIFailedCount','winstonLogger','80181xnDImV','868079DIBUgG','readFileSync','76EXXGUe','qVpkG','writeState','3222758IfWJzf','openSync','UuvMO','has','isArray','newState','EEXIST','CbOat','153865hbaTXS','AOnnb',']\x20Error\x20releasing\x20lock:\x20','recordTestResult','split','unlinkSync','acquireLock','dCLro','14MktQny','stack',']\x20Error\x20creating\x20state\x20file:\x20','parse','uniqueFailedTests','function','status','message','add','stringify',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','releaseLock','iterator','updateAPIFailedCount','closeSync','fullName','utf8','2|4|3|0|1','failFastConfig','4959444BCOquO','failedTests',']\x20Error\x20reading\x20state\x20file:\x20','code','5748016CmSXvg','RgczV','warn','10Jatvmu','isNewFailure','error','writeFileSync','existsSync','from','Cxvey','stateFilePath','5569704KJnInL','SHQAZ','defaultState','lockFilePath','readState','EIEGS'];a130_0x4a33=function(){return _0x5adf8b;};return a130_0x4a33();}const fs=require('fs'),logger=require('../logger')[a130_0x9e0d40(0x1af)],TAG='FailFastFileHelper';class FileHelper{constructor(_0x5e2439,_0x4bc770,_0x305fa2,_0x3f18c3){const _0x56b03e=a130_0x9e0d40,_0x2a2366={};_0x2a2366[_0x56b03e(0x1b8)]=_0x56b03e(0x1d7),_0x2a2366[_0x56b03e(0x1e6)]=_0x56b03e(0x1d6);const _0x4bdd92=_0x2a2366,_0x392b18=_0x4bdd92['UuvMO'][_0x56b03e(0x1c2)]('|');let _0x2709a7=0x0;while(!![]){switch(_0x392b18[_0x2709a7++]){case'0':this[_0x56b03e(0x1a9)]=_0x3f18c3;continue;case'1':if(!fs[_0x56b03e(0x1e4)](this[_0x56b03e(0x1a6)]))try{fs[_0x56b03e(0x1e3)](this[_0x56b03e(0x1a6)],'{}',_0x4bdd92[_0x56b03e(0x1e6)]);}catch(_0x5894a9){logger['error']('['+TAG+_0x56b03e(0x1c8)+_0x5894a9[_0x56b03e(0x1cd)]+'\x20'+_0x5894a9[_0x56b03e(0x1c7)]);}continue;case'2':this[_0x56b03e(0x1d8)]=_0x5e2439;continue;case'3':this['lockFilePath']=_0x305fa2;continue;case'4':this[_0x56b03e(0x1a6)]=_0x4bc770;continue;}break;}}async[a130_0x9e0d40(0x1c4)](){const _0x1e5351=a130_0x9e0d40,_0x137051={};_0x137051['AOnnb']=function(_0x1ac174,_0xae5ac1){return _0x1ac174===_0xae5ac1;},_0x137051[_0x1e5351(0x1bd)]=_0x1e5351(0x1bc);const _0x116fb5=_0x137051;let _0x5dab2c;try{return _0x5dab2c=fs[_0x1e5351(0x1b7)](this[_0x1e5351(0x1aa)],'wx'),_0x5dab2c;}catch(_0x10d99d){if(_0x116fb5[_0x1e5351(0x1bf)](_0x10d99d[_0x1e5351(0x1dc)],_0x116fb5['CbOat']))return null;throw _0x10d99d;}}async['releaseLock'](_0x2805e5){const _0x2c06df=a130_0x9e0d40;if(_0x2805e5)try{fs[_0x2c06df(0x1d4)](_0x2805e5),fs[_0x2c06df(0x1c3)](this['lockFilePath']);}catch(_0x268f97){logger[_0x2c06df(0x1e2)]('['+TAG+_0x2c06df(0x1c0)+_0x268f97['message']+'\x20'+_0x268f97['stack']);}}['readState'](){const _0x20eadb=a130_0x9e0d40,_0xe59d0d={};_0xe59d0d['RgczV']=_0x20eadb(0x1d6);const _0x507bd9=_0xe59d0d;try{const _0x369500=fs[_0x20eadb(0x1b2)](this[_0x20eadb(0x1a6)],_0x507bd9[_0x20eadb(0x1de)]);return JSON[_0x20eadb(0x1c9)](_0x369500);}catch(_0x56ad84){return logger['error']('['+TAG+_0x20eadb(0x1db)+_0x56ad84[_0x20eadb(0x1cd)]+'\x20'+_0x56ad84[_0x20eadb(0x1c7)]),null;}}async[a130_0x9e0d40(0x1b5)](_0x42c769){const _0x130929=a130_0x9e0d40,_0x34c4eb={..._0x42c769,'uniqueFailedTests':Array[_0x130929(0x1ba)](_0x42c769['uniqueFailedTests'])?_0x42c769[_0x130929(0x1ca)]:Array[_0x130929(0x1e5)](_0x42c769[_0x130929(0x1ca)]||[])};try{fs[_0x130929(0x1e3)](this[_0x130929(0x1a6)],JSON['stringify'](_0x34c4eb,null,0x2));}catch(_0x33ec91){logger[_0x130929(0x1e2)]('['+TAG+_0x130929(0x1ad)+_0x33ec91[_0x130929(0x1cd)]+'\x20'+_0x33ec91[_0x130929(0x1c7)]);throw _0x33ec91;}}async[a130_0x9e0d40(0x1c1)](_0xd10154,_0x311d25){const _0xd20cb8=a130_0x9e0d40,_0x30d981={};_0x30d981[_0xd20cb8(0x1ac)]=function(_0x5a0dd1,_0x5c6064){return _0x5a0dd1!==_0x5c6064;},_0x30d981[_0xd20cb8(0x1b4)]=_0xd20cb8(0x1cb),_0x30d981[_0xd20cb8(0x1c5)]=function(_0x3f74cb,_0x2cf4bb){return _0x3f74cb===_0x2cf4bb;},_0x30d981[_0xd20cb8(0x1a8)]='failed';const _0x4bb8ec=_0x30d981,_0x9f2bed=await this['acquireLock']();if(!_0x9f2bed)return logger['warn']('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.'),{'newState':this[_0xd20cb8(0x1ab)]()||this[_0xd20cb8(0x1a9)],'isNewFailure':![]};try{let _0x454b6e=this[_0xd20cb8(0x1ab)]();!_0x454b6e&&(_0x454b6e=JSON[_0xd20cb8(0x1c9)](JSON[_0xd20cb8(0x1cf)](this[_0xd20cb8(0x1a9)])));if(!_0x454b6e['uniqueFailedTests']||_0x4bb8ec['EIEGS'](typeof _0x454b6e['uniqueFailedTests'][Symbol[_0xd20cb8(0x1d2)]],_0x4bb8ec[_0xd20cb8(0x1b4)]))_0x454b6e[_0xd20cb8(0x1ca)]=new Set();else Array[_0xd20cb8(0x1ba)](_0x454b6e['uniqueFailedTests'])&&(_0x454b6e[_0xd20cb8(0x1ca)]=new Set(_0x454b6e[_0xd20cb8(0x1ca)]));_0x454b6e['totalTests']=_0x311d25;let _0x4e560c=![];_0x4bb8ec['dCLro'](_0xd10154[_0xd20cb8(0x1cc)],_0x4bb8ec['SHQAZ'])&&(_0x454b6e[_0xd20cb8(0x1da)]+=0x1,!_0x454b6e[_0xd20cb8(0x1ca)][_0xd20cb8(0x1b9)](_0xd10154['fullName'])&&(_0x454b6e[_0xd20cb8(0x1ca)][_0xd20cb8(0x1ce)](_0xd10154[_0xd20cb8(0x1d5)]),_0x4e560c=!![]));await this[_0xd20cb8(0x1b5)](_0x454b6e);const _0x1e3724={};return _0x1e3724[_0xd20cb8(0x1bb)]=_0x454b6e,_0x1e3724[_0xd20cb8(0x1e1)]=_0x4e560c,_0x1e3724;}finally{await this[_0xd20cb8(0x1d1)](_0x9f2bed);}}async[a130_0x9e0d40(0x1d3)](_0x493ef3){const _0x21629e=a130_0x9e0d40,_0x33196c=await this[_0x21629e(0x1c4)]();if(!_0x33196c)return logger[_0x21629e(0x1df)]('['+TAG+_0x21629e(0x1d0)),this['readState']()||this[_0x21629e(0x1a9)];try{let _0x557d6c=this[_0x21629e(0x1ab)]();return!_0x557d6c&&(_0x557d6c=JSON[_0x21629e(0x1c9)](JSON['stringify'](this[_0x21629e(0x1a9)]))),_0x557d6c[_0x21629e(0x1ae)]=_0x493ef3,await this['writeState'](_0x557d6c),_0x557d6c;}finally{await this['releaseLock'](_0x33196c);}}}function a130_0x5258(_0xc309b,_0x2a02aa){const _0x4a3322=a130_0x4a33();return a130_0x5258=function(_0x52589d,_0x158f18){_0x52589d=_0x52589d-0x1a6;let _0x239fa6=_0x4a3322[_0x52589d];return _0x239fa6;},a130_0x5258(_0xc309b,_0x2a02aa);}module['exports']=FileHelper;