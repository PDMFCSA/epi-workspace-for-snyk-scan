const a130_0x3f79f4=a130_0x3da9;(function(_0x2c6625,_0x3f1568){const _0x2e69db=a130_0x3da9,_0x4bbfb4=_0x2c6625();while(!![]){try{const _0x245ac7=parseInt(_0x2e69db(0xb2))/0x1*(-parseInt(_0x2e69db(0xc4))/0x2)+-parseInt(_0x2e69db(0xc3))/0x3+parseInt(_0x2e69db(0xbc))/0x4*(-parseInt(_0x2e69db(0xc2))/0x5)+-parseInt(_0x2e69db(0xb4))/0x6*(parseInt(_0x2e69db(0xaa))/0x7)+parseInt(_0x2e69db(0xc1))/0x8*(parseInt(_0x2e69db(0xab))/0x9)+parseInt(_0x2e69db(0x9f))/0xa+parseInt(_0x2e69db(0x90))/0xb;if(_0x245ac7===_0x3f1568)break;else _0x4bbfb4['push'](_0x4bbfb4['shift']());}catch(_0x3541e7){_0x4bbfb4['push'](_0x4bbfb4['shift']());}}}(a130_0x2d87,0xbab18));function a130_0x3da9(_0x4ac0ee,_0x8e8271){const _0x2d8730=a130_0x2d87();return a130_0x3da9=function(_0x3da9c6,_0x19dd78){_0x3da9c6=_0x3da9c6-0x89;let _0x42578c=_0x2d8730[_0x3da9c6];return _0x42578c;},a130_0x3da9(_0x4ac0ee,_0x8e8271);}function a130_0x2d87(){const _0x4527da=['failFastConfig','function','from','exports',']\x20Error\x20writing\x20state\x20file:\x20','iterator',']\x20Error\x20creating\x20state\x20file:\x20','error','gLPtr','writeFileSync','defaultState','unlinkSync','4896730tcIrFd','stack','lastAPIFailedCount','parse','qWVfE','code','message','fullName','failed','EEXIST','4|0|1|3|2','140HDfVgg','1959579xZjOWN','recordTestResult','existsSync','newState','readState','winstonLogger','stateFilePath','1163jJKQbj','JriNI','200394mhfgbK','dchfU','plyaL',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','status','stringify','acquireLock',']\x20Error\x20reading\x20state\x20file:\x20','39276gGKgNB','qfWZg','warn','lockFilePath','isArray','8NVUiDI','615LZYhiX','1942974WzhMYS','764FgLNOb','FailFastFileHelper','totalTests','split','add','has','YoJpV',']\x20Error\x20releasing\x20lock:\x20','zrNhd','writeState','utf8','33274263SHCPvD','uniqueFailedTests','MRrIW'];a130_0x2d87=function(){return _0x4527da;};return a130_0x2d87();}const fs=require('fs'),logger=require('../logger')[a130_0x3f79f4(0xb0)],TAG=a130_0x3f79f4(0xc5);class FileHelper{constructor(_0x5be2c7,_0x1c7e62,_0x55ceb4,_0x134c3c){const _0x544741=a130_0x3f79f4,_0x38f4b6={};_0x38f4b6['YoJpV']=_0x544741(0xa9),_0x38f4b6[_0x544741(0xb6)]=_0x544741(0x8f);const _0x1b4ba6=_0x38f4b6,_0x4f7a90=_0x1b4ba6[_0x544741(0x8b)][_0x544741(0xc7)]('|');let _0x1b1616=0x0;while(!![]){switch(_0x4f7a90[_0x1b1616++]){case'0':this[_0x544741(0xb1)]=_0x1c7e62;continue;case'1':this[_0x544741(0xbf)]=_0x55ceb4;continue;case'2':if(!fs[_0x544741(0xad)](this[_0x544741(0xb1)]))try{fs['writeFileSync'](this[_0x544741(0xb1)],'{}',_0x1b4ba6[_0x544741(0xb6)]);}catch(_0x472608){logger['error']('['+TAG+_0x544741(0x99)+_0x472608[_0x544741(0xa5)]+'\x20'+_0x472608['stack']);}continue;case'3':this[_0x544741(0x9d)]=_0x134c3c;continue;case'4':this[_0x544741(0x93)]=_0x5be2c7;continue;}break;}}async[a130_0x3f79f4(0xba)](){const _0x6a541f=a130_0x3f79f4,_0x2c1512={};_0x2c1512[_0x6a541f(0xbd)]=function(_0x1c0b73,_0x351129){return _0x1c0b73===_0x351129;},_0x2c1512[_0x6a541f(0x9b)]=_0x6a541f(0xa8);const _0x185c6e=_0x2c1512;let _0x32aeb5;try{return _0x32aeb5=fs['openSync'](this['lockFilePath'],'wx'),_0x32aeb5;}catch(_0x39431e){if(_0x185c6e[_0x6a541f(0xbd)](_0x39431e[_0x6a541f(0xa4)],_0x185c6e[_0x6a541f(0x9b)]))return null;throw _0x39431e;}}async['releaseLock'](_0x29aa2d){const _0x2dd873=a130_0x3f79f4;if(_0x29aa2d)try{fs['closeSync'](_0x29aa2d),fs[_0x2dd873(0x9e)](this['lockFilePath']);}catch(_0x1ec71c){logger[_0x2dd873(0x9a)]('['+TAG+_0x2dd873(0x8c)+_0x1ec71c[_0x2dd873(0xa5)]+'\x20'+_0x1ec71c[_0x2dd873(0xa0)]);}}[a130_0x3f79f4(0xaf)](){const _0x461dff=a130_0x3f79f4,_0x2d3b70={};_0x2d3b70[_0x461dff(0x8d)]=_0x461dff(0x8f);const _0x5c8345=_0x2d3b70;try{const _0x5f07bd=fs['readFileSync'](this['stateFilePath'],_0x5c8345[_0x461dff(0x8d)]);return JSON[_0x461dff(0xa2)](_0x5f07bd);}catch(_0xd249e5){return logger[_0x461dff(0x9a)]('['+TAG+_0x461dff(0xbb)+_0xd249e5['message']+'\x20'+_0xd249e5[_0x461dff(0xa0)]),null;}}async[a130_0x3f79f4(0x8e)](_0x10f331){const _0x2617ea=a130_0x3f79f4,_0x39e879={..._0x10f331,'uniqueFailedTests':Array[_0x2617ea(0xc0)](_0x10f331['uniqueFailedTests'])?_0x10f331['uniqueFailedTests']:Array[_0x2617ea(0x95)](_0x10f331['uniqueFailedTests']||[])};try{fs[_0x2617ea(0x9c)](this[_0x2617ea(0xb1)],JSON[_0x2617ea(0xb9)](_0x39e879,null,0x2));}catch(_0x249420){logger['error']('['+TAG+_0x2617ea(0x97)+_0x249420[_0x2617ea(0xa5)]+'\x20'+_0x249420['stack']);throw _0x249420;}}async[a130_0x3f79f4(0xac)](_0x3507cf,_0x36a369){const _0x2cb6b5=a130_0x3f79f4,_0x95ad4d={};_0x95ad4d['dchfU']=function(_0x1fbbe2,_0x3f4c2c){return _0x1fbbe2!==_0x3f4c2c;},_0x95ad4d[_0x2cb6b5(0x92)]=_0x2cb6b5(0x94),_0x95ad4d['qWVfE']=function(_0x4f6af6,_0xeba56a){return _0x4f6af6===_0xeba56a;},_0x95ad4d[_0x2cb6b5(0xb3)]=_0x2cb6b5(0xa7);const _0x514239=_0x95ad4d,_0x1bc74d=await this['acquireLock']();if(!_0x1bc74d)return logger[_0x2cb6b5(0xbe)]('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.'),{'newState':this[_0x2cb6b5(0xaf)]()||this['defaultState'],'isNewFailure':![]};try{let _0x575a01=this[_0x2cb6b5(0xaf)]();!_0x575a01&&(_0x575a01=JSON[_0x2cb6b5(0xa2)](JSON[_0x2cb6b5(0xb9)](this[_0x2cb6b5(0x9d)])));if(!_0x575a01[_0x2cb6b5(0x91)]||_0x514239[_0x2cb6b5(0xb5)](typeof _0x575a01[_0x2cb6b5(0x91)][Symbol[_0x2cb6b5(0x98)]],_0x514239['MRrIW']))_0x575a01[_0x2cb6b5(0x91)]=new Set();else Array[_0x2cb6b5(0xc0)](_0x575a01[_0x2cb6b5(0x91)])&&(_0x575a01[_0x2cb6b5(0x91)]=new Set(_0x575a01[_0x2cb6b5(0x91)]));_0x575a01[_0x2cb6b5(0xc6)]=_0x36a369;let _0x90ec77=![];_0x514239[_0x2cb6b5(0xa3)](_0x3507cf[_0x2cb6b5(0xb8)],_0x514239[_0x2cb6b5(0xb3)])&&(_0x575a01['failedTests']+=0x1,!_0x575a01[_0x2cb6b5(0x91)][_0x2cb6b5(0x8a)](_0x3507cf[_0x2cb6b5(0xa6)])&&(_0x575a01['uniqueFailedTests'][_0x2cb6b5(0x89)](_0x3507cf['fullName']),_0x90ec77=!![]));await this[_0x2cb6b5(0x8e)](_0x575a01);const _0x563fcc={};return _0x563fcc[_0x2cb6b5(0xae)]=_0x575a01,_0x563fcc['isNewFailure']=_0x90ec77,_0x563fcc;}finally{await this['releaseLock'](_0x1bc74d);}}async['updateAPIFailedCount'](_0x52ca4d){const _0x140330=a130_0x3f79f4,_0x218528=await this[_0x140330(0xba)]();if(!_0x218528)return logger[_0x140330(0xbe)]('['+TAG+_0x140330(0xb7)),this[_0x140330(0xaf)]()||this[_0x140330(0x9d)];try{let _0x2cc160=this['readState']();return!_0x2cc160&&(_0x2cc160=JSON['parse'](JSON['stringify'](this[_0x140330(0x9d)]))),_0x2cc160[_0x140330(0xa1)]=_0x52ca4d,await this[_0x140330(0x8e)](_0x2cc160),_0x2cc160;}finally{await this['releaseLock'](_0x218528);}}}module[a130_0x3f79f4(0x96)]=FileHelper;