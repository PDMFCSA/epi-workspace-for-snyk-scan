const a120_0x4bbc1e=a120_0x55cf;function a120_0x55cf(_0x4e4077,_0x2d2b97){const _0x1b5ab7=a120_0x1b5a();return a120_0x55cf=function(_0x55cf5c,_0x581445){_0x55cf5c=_0x55cf5c-0x68;let _0x2d46db=_0x1b5ab7[_0x55cf5c];return _0x2d46db;},a120_0x55cf(_0x4e4077,_0x2d2b97);}(function(_0x576af6,_0x629a69){const _0xacfc0b=a120_0x55cf,_0x3c79fc=_0x576af6();while(!![]){try{const _0x4c15c5=-parseInt(_0xacfc0b(0x95))/0x1+parseInt(_0xacfc0b(0x90))/0x2+parseInt(_0xacfc0b(0x9f))/0x3*(-parseInt(_0xacfc0b(0x70))/0x4)+parseInt(_0xacfc0b(0x91))/0x5*(-parseInt(_0xacfc0b(0x98))/0x6)+-parseInt(_0xacfc0b(0x9c))/0x7*(-parseInt(_0xacfc0b(0x8b))/0x8)+-parseInt(_0xacfc0b(0x6f))/0x9+parseInt(_0xacfc0b(0x97))/0xa;if(_0x4c15c5===_0x629a69)break;else _0x3c79fc['push'](_0x3c79fc['shift']());}catch(_0x45950c){_0x3c79fc['push'](_0x3c79fc['shift']());}}}(a120_0x1b5a,0x68be0));const fs=require('fs'),logger=require('../logger')[a120_0x4bbc1e(0x6d)],TAG=a120_0x4bbc1e(0x85);class FileHelper{constructor(_0x37366b,_0x236051,_0x66ad44,_0x5d5157){const _0x350099=a120_0x4bbc1e,_0x1fc968={};_0x1fc968[_0x350099(0x68)]=_0x350099(0x86),_0x1fc968[_0x350099(0xa1)]=_0x350099(0x92);const _0x562162=_0x1fc968,_0x46b5d2=_0x562162[_0x350099(0x68)][_0x350099(0x8c)]('|');let _0x4b35da=0x0;while(!![]){switch(_0x46b5d2[_0x4b35da++]){case'0':this[_0x350099(0x75)]=_0x37366b;continue;case'1':this[_0x350099(0x6b)]=_0x66ad44;continue;case'2':if(!fs[_0x350099(0x71)](this['stateFilePath']))try{fs[_0x350099(0x8d)](this[_0x350099(0x7b)],'{}',_0x562162[_0x350099(0xa1)]);}catch(_0x4a68bd){logger[_0x350099(0x81)]('['+TAG+_0x350099(0x8f)+_0x4a68bd[_0x350099(0x72)]+'\x20'+_0x4a68bd[_0x350099(0x99)]);}continue;case'3':this['stateFilePath']=_0x236051;continue;case'4':this[_0x350099(0x80)]=_0x5d5157;continue;}break;}}async[a120_0x4bbc1e(0x7f)](){const _0x41603c=a120_0x4bbc1e,_0x4c4803={};_0x4c4803[_0x41603c(0x96)]=function(_0xc49e5c,_0x19be3d){return _0xc49e5c===_0x19be3d;},_0x4c4803[_0x41603c(0x9e)]='EEXIST';const _0x45ce8d=_0x4c4803;let _0x845831;try{return _0x845831=fs[_0x41603c(0x82)](this[_0x41603c(0x6b)],'wx'),_0x845831;}catch(_0x3f11b0){if(_0x45ce8d[_0x41603c(0x96)](_0x3f11b0[_0x41603c(0x69)],_0x45ce8d[_0x41603c(0x9e)]))return null;throw _0x3f11b0;}}async[a120_0x4bbc1e(0x84)](_0xf8e4cd){const _0x839f60=a120_0x4bbc1e;if(_0xf8e4cd)try{fs[_0x839f60(0x73)](_0xf8e4cd),fs[_0x839f60(0x88)](this[_0x839f60(0x6b)]);}catch(_0x286529){logger['error']('['+TAG+_0x839f60(0x87)+_0x286529[_0x839f60(0x72)]+'\x20'+_0x286529[_0x839f60(0x99)]);}}['readState'](){const _0x3b75d6=a120_0x4bbc1e,_0xd0f363={};_0xd0f363[_0x3b75d6(0x76)]='utf8';const _0x1ff845=_0xd0f363;try{const _0x26ed4a=fs['readFileSync'](this[_0x3b75d6(0x7b)],_0x1ff845['PGWRc']);return JSON['parse'](_0x26ed4a);}catch(_0x33720f){return logger[_0x3b75d6(0x81)]('['+TAG+_0x3b75d6(0x9a)+_0x33720f[_0x3b75d6(0x72)]+'\x20'+_0x33720f[_0x3b75d6(0x99)]),null;}}async[a120_0x4bbc1e(0x7e)](_0x5b4ff6){const _0x1cec1e=a120_0x4bbc1e,_0x162147={..._0x5b4ff6,'uniqueFailedTests':Array[_0x1cec1e(0x93)](_0x5b4ff6['uniqueFailedTests'])?_0x5b4ff6[_0x1cec1e(0x8a)]:Array['from'](_0x5b4ff6['uniqueFailedTests']||[])};try{fs['writeFileSync'](this[_0x1cec1e(0x7b)],JSON['stringify'](_0x162147,null,0x2));}catch(_0xf2af55){logger['error']('['+TAG+']\x20Error\x20writing\x20state\x20file:\x20'+_0xf2af55[_0x1cec1e(0x72)]+'\x20'+_0xf2af55[_0x1cec1e(0x99)]);throw _0xf2af55;}}async[a120_0x4bbc1e(0x74)](_0x294119,_0x42d66d){const _0x452d28=a120_0x4bbc1e,_0x5382f7={};_0x5382f7['YoPdO']=function(_0x3b7d64,_0x2080f4){return _0x3b7d64!==_0x2080f4;},_0x5382f7['rHxel']=_0x452d28(0x6c),_0x5382f7['LvFdb']=function(_0x574fe3,_0x407bf5){return _0x574fe3===_0x407bf5;},_0x5382f7[_0x452d28(0x6e)]='failed';const _0xdad735=_0x5382f7,_0x36cf1f=await this[_0x452d28(0x7f)]();if(!_0x36cf1f)return logger['warn']('['+TAG+_0x452d28(0x89)),{'newState':this[_0x452d28(0x7d)]()||this[_0x452d28(0x80)],'isNewFailure':![]};try{let _0xb0f7a3=this[_0x452d28(0x7d)]();!_0xb0f7a3&&(_0xb0f7a3=JSON[_0x452d28(0x78)](JSON['stringify'](this[_0x452d28(0x80)])));if(!_0xb0f7a3[_0x452d28(0x8a)]||_0xdad735['YoPdO'](typeof _0xb0f7a3[_0x452d28(0x8a)][Symbol[_0x452d28(0x7a)]],_0xdad735[_0x452d28(0x83)]))_0xb0f7a3[_0x452d28(0x8a)]=new Set();else Array[_0x452d28(0x93)](_0xb0f7a3[_0x452d28(0x8a)])&&(_0xb0f7a3[_0x452d28(0x8a)]=new Set(_0xb0f7a3[_0x452d28(0x8a)]));_0xb0f7a3[_0x452d28(0x9b)]=_0x42d66d;let _0x1b8b4b=![];_0xdad735['LvFdb'](_0x294119['status'],_0xdad735[_0x452d28(0x6e)])&&(_0xb0f7a3[_0x452d28(0x94)]+=0x1,!_0xb0f7a3[_0x452d28(0x8a)][_0x452d28(0x77)](_0x294119[_0x452d28(0x7c)])&&(_0xb0f7a3['uniqueFailedTests']['add'](_0x294119[_0x452d28(0x7c)]),_0x1b8b4b=!![]));await this[_0x452d28(0x7e)](_0xb0f7a3);const _0x234f02={};return _0x234f02[_0x452d28(0x9d)]=_0xb0f7a3,_0x234f02[_0x452d28(0xa0)]=_0x1b8b4b,_0x234f02;}finally{await this['releaseLock'](_0x36cf1f);}}async[a120_0x4bbc1e(0x6a)](_0xa5821){const _0x449834=a120_0x4bbc1e,_0x59132f=await this['acquireLock']();if(!_0x59132f)return logger[_0x449834(0x79)]('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.'),this[_0x449834(0x7d)]()||this[_0x449834(0x80)];try{let _0x3c5b78=this[_0x449834(0x7d)]();return!_0x3c5b78&&(_0x3c5b78=JSON['parse'](JSON['stringify'](this[_0x449834(0x80)]))),_0x3c5b78[_0x449834(0x8e)]=_0xa5821,await this[_0x449834(0x7e)](_0x3c5b78),_0x3c5b78;}finally{await this[_0x449834(0x84)](_0x59132f);}}}module['exports']=FileHelper;function a120_0x1b5a(){const _0x53be68=['writeState','acquireLock','defaultState','error','openSync','rHxel','releaseLock','FailFastFileHelper','0|3|1|4|2',']\x20Error\x20releasing\x20lock:\x20','unlinkSync',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','uniqueFailedTests','29752oRdRQZ','split','writeFileSync','lastAPIFailedCount',']\x20Error\x20creating\x20state\x20file:\x20','241386utjXor','20zJygMv','utf8','isArray','failedTests','822689YyMeJh','bZkyy','32012490IXSQuC','1009512IVWgnG','stack',']\x20Error\x20reading\x20state\x20file:\x20','totalTests','35lPWkiU','newState','UZRld','3AkuhLI','isNewFailure','eSIia','vqdnQ','code','updateAPIFailedCount','lockFilePath','function','winstonLogger','fjYeQ','6269220CcstSV','2876944CjLbda','existsSync','message','closeSync','recordTestResult','failFastConfig','PGWRc','has','parse','warn','iterator','stateFilePath','fullName','readState'];a120_0x1b5a=function(){return _0x53be68;};return a120_0x1b5a();}