const a123_0x275719=a123_0x1313;(function(_0x4b4785,_0x2b5890){const _0x28a187=a123_0x1313,_0x1c9952=_0x4b4785();while(!![]){try{const _0x481b5e=-parseInt(_0x28a187(0xea))/0x1+-parseInt(_0x28a187(0xe0))/0x2+-parseInt(_0x28a187(0xe5))/0x3*(parseInt(_0x28a187(0xf3))/0x4)+parseInt(_0x28a187(0xf6))/0x5*(-parseInt(_0x28a187(0x11a))/0x6)+-parseInt(_0x28a187(0xf8))/0x7+-parseInt(_0x28a187(0xf1))/0x8+parseInt(_0x28a187(0x114))/0x9;if(_0x481b5e===_0x2b5890)break;else _0x1c9952['push'](_0x1c9952['shift']());}catch(_0x4d98b6){_0x1c9952['push'](_0x1c9952['shift']());}}}(a123_0x11a8,0xd378f));const fs=require('fs'),logger=require('../logger')[a123_0x275719(0x111)],TAG=a123_0x275719(0x112);class FileHelper{constructor(_0x434462,_0x59850b,_0x10dfa5,_0x30d664){const _0x454255=a123_0x275719,_0x14cda2={};_0x14cda2[_0x454255(0xee)]='3|4|2|1|0',_0x14cda2[_0x454255(0x104)]=_0x454255(0xfc);const _0x58881a=_0x14cda2,_0x4ed15c=_0x58881a['qUkzY'][_0x454255(0x119)]('|');let _0x56828d=0x0;while(!![]){switch(_0x4ed15c[_0x56828d++]){case'0':if(!fs[_0x454255(0xf0)](this['stateFilePath']))try{fs[_0x454255(0xde)](this['stateFilePath'],'{}',_0x58881a[_0x454255(0x104)]);}catch(_0x11fd4e){logger[_0x454255(0x107)]('['+TAG+_0x454255(0x108)+_0x11fd4e['message']+'\x20'+_0x11fd4e[_0x454255(0x110)]);}continue;case'1':this[_0x454255(0x106)]=_0x30d664;continue;case'2':this['lockFilePath']=_0x10dfa5;continue;case'3':this[_0x454255(0x109)]=_0x434462;continue;case'4':this[_0x454255(0x10d)]=_0x59850b;continue;}break;}}async['acquireLock'](){const _0x242809=a123_0x275719,_0x48b58d={};_0x48b58d[_0x242809(0xf2)]=function(_0x14d4b7,_0x3f81a8){return _0x14d4b7===_0x3f81a8;},_0x48b58d[_0x242809(0x115)]='EEXIST';const _0x391cc7=_0x48b58d;let _0x8af77e;try{return _0x8af77e=fs[_0x242809(0xfb)](this[_0x242809(0x10b)],'wx'),_0x8af77e;}catch(_0x1b1d4e){if(_0x391cc7[_0x242809(0xf2)](_0x1b1d4e[_0x242809(0xeb)],_0x391cc7[_0x242809(0x115)]))return null;throw _0x1b1d4e;}}async['releaseLock'](_0x2422dd){const _0x1c8c7a=a123_0x275719;if(_0x2422dd)try{fs[_0x1c8c7a(0x117)](_0x2422dd),fs[_0x1c8c7a(0xfd)](this['lockFilePath']);}catch(_0x342568){logger[_0x1c8c7a(0x107)]('['+TAG+_0x1c8c7a(0xf9)+_0x342568[_0x1c8c7a(0xe7)]+'\x20'+_0x342568[_0x1c8c7a(0x110)]);}}[a123_0x275719(0x10f)](){const _0x416b79=a123_0x275719,_0x16bd07={};_0x16bd07[_0x416b79(0xf7)]=_0x416b79(0xfc);const _0x5d7536=_0x16bd07;try{const _0x387446=fs['readFileSync'](this[_0x416b79(0x10d)],_0x5d7536['WColb']);return JSON[_0x416b79(0x118)](_0x387446);}catch(_0x268e59){return logger[_0x416b79(0x107)]('['+TAG+']\x20Error\x20reading\x20state\x20file:\x20'+_0x268e59[_0x416b79(0xe7)]+'\x20'+_0x268e59[_0x416b79(0x110)]),null;}}async[a123_0x275719(0x10a)](_0x11c767){const _0x46c7a9=a123_0x275719,_0x503da8={..._0x11c767,'uniqueFailedTests':Array[_0x46c7a9(0x101)](_0x11c767['uniqueFailedTests'])?_0x11c767[_0x46c7a9(0xdf)]:Array[_0x46c7a9(0x10e)](_0x11c767['uniqueFailedTests']||[])};try{fs[_0x46c7a9(0xde)](this['stateFilePath'],JSON['stringify'](_0x503da8,null,0x2));}catch(_0x14ac6c){logger[_0x46c7a9(0x107)]('['+TAG+']\x20Error\x20writing\x20state\x20file:\x20'+_0x14ac6c[_0x46c7a9(0xe7)]+'\x20'+_0x14ac6c[_0x46c7a9(0x110)]);throw _0x14ac6c;}}async[a123_0x275719(0xe1)](_0x235afc,_0x52df5b){const _0x34d139=a123_0x275719,_0xeca716={};_0xeca716[_0x34d139(0xed)]=function(_0xb94bfa,_0x4de9fd){return _0xb94bfa!==_0x4de9fd;},_0xeca716[_0x34d139(0xdd)]=_0x34d139(0xff),_0xeca716['NfeJS']=function(_0x52bc89,_0x4dffd1){return _0x52bc89===_0x4dffd1;},_0xeca716[_0x34d139(0xfa)]=_0x34d139(0xf4);const _0x416012=_0xeca716,_0x45a245=await this['acquireLock']();if(!_0x45a245)return logger[_0x34d139(0xe2)]('['+TAG+_0x34d139(0xe4)),{'newState':this['readState']()||this[_0x34d139(0x106)],'isNewFailure':![]};try{let _0x5e1223=this[_0x34d139(0x10f)]();!_0x5e1223&&(_0x5e1223=JSON[_0x34d139(0x118)](JSON[_0x34d139(0x10c)](this[_0x34d139(0x106)])));if(!_0x5e1223[_0x34d139(0xdf)]||_0x416012[_0x34d139(0xed)](typeof _0x5e1223[_0x34d139(0xdf)][Symbol[_0x34d139(0xe8)]],_0x416012[_0x34d139(0xdd)]))_0x5e1223[_0x34d139(0xdf)]=new Set();else Array[_0x34d139(0x101)](_0x5e1223[_0x34d139(0xdf)])&&(_0x5e1223['uniqueFailedTests']=new Set(_0x5e1223['uniqueFailedTests']));_0x5e1223[_0x34d139(0x102)]=_0x52df5b;let _0x2b8590=![];_0x416012['NfeJS'](_0x235afc[_0x34d139(0xe9)],_0x416012[_0x34d139(0xfa)])&&(_0x5e1223[_0x34d139(0xf5)]+=0x1,!_0x5e1223[_0x34d139(0xdf)][_0x34d139(0xe3)](_0x235afc[_0x34d139(0xec)])&&(_0x5e1223[_0x34d139(0xdf)][_0x34d139(0x105)](_0x235afc[_0x34d139(0xec)]),_0x2b8590=!![]));await this[_0x34d139(0x10a)](_0x5e1223);const _0x10f0b6={};return _0x10f0b6[_0x34d139(0xfe)]=_0x5e1223,_0x10f0b6[_0x34d139(0xef)]=_0x2b8590,_0x10f0b6;}finally{await this[_0x34d139(0x113)](_0x45a245);}}async[a123_0x275719(0x100)](_0x510dcb){const _0x3b67df=a123_0x275719,_0x5422a4=await this[_0x3b67df(0xe6)]();if(!_0x5422a4)return logger[_0x3b67df(0xe2)]('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.'),this[_0x3b67df(0x10f)]()||this[_0x3b67df(0x106)];try{let _0x4a2f03=this['readState']();return!_0x4a2f03&&(_0x4a2f03=JSON[_0x3b67df(0x118)](JSON[_0x3b67df(0x10c)](this[_0x3b67df(0x106)]))),_0x4a2f03[_0x3b67df(0x116)]=_0x510dcb,await this['writeState'](_0x4a2f03),_0x4a2f03;}finally{await this[_0x3b67df(0x113)](_0x5422a4);}}}function a123_0x11a8(){const _0x5a27af=['bwPRG','openSync','utf8','unlinkSync','newState','function','updateAPIFailedCount','isArray','totalTests','exports','NLscn','add','defaultState','error',']\x20Error\x20creating\x20state\x20file:\x20','failFastConfig','writeState','lockFilePath','stringify','stateFilePath','from','readState','stack','winstonLogger','FailFastFileHelper','releaseLock','55816956GqyXdK','PFhIg','lastAPIFailedCount','closeSync','parse','split','1666506FCZuna','rrQjo','writeFileSync','uniqueFailedTests','255350hoyvmz','recordTestResult','warn','has',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','9126GLgkaJ','acquireLock','message','iterator','status','1512396asOvXJ','code','fullName','aSWXw','qUkzY','isNewFailure','existsSync','10584352CuWEBl','NgRkk','2180wkehzX','failed','failedTests','10jYcXdu','WColb','1114302ikTlqu',']\x20Error\x20releasing\x20lock:\x20'];a123_0x11a8=function(){return _0x5a27af;};return a123_0x11a8();}function a123_0x1313(_0x17811f,_0xf748a5){const _0x11a810=a123_0x11a8();return a123_0x1313=function(_0x131301,_0xddf187){_0x131301=_0x131301-0xdd;let _0x390785=_0x11a810[_0x131301];return _0x390785;},a123_0x1313(_0x17811f,_0xf748a5);}module[a123_0x275719(0x103)]=FileHelper;