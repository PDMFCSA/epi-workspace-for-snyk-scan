const a123_0x366b73=a123_0x1cf8;function a123_0x55cf(){const _0x2e3d88=['from',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','code','updateAPIFailedCount','dyRkJ','readState','3258twWVOK','readFileSync','winstonLogger','NLUZj','38600IQvRoi','2961330rtvDTa','existsSync','ULWul','XgcOe','3506079IWxCgx','MMMwQ','utf8','lockFilePath','914711fwvXUi','31548wBKdgL',']\x20Error\x20writing\x20state\x20file:\x20','4012141bkpnnR','isNewFailure','error','failedTests','status','defaultState','lastAPIFailedCount','exports',']\x20Error\x20releasing\x20lock:\x20','has','uniqueFailedTests','isArray','EEXIST','newState','NIUNC','totalTests','recordTestResult','acquireLock','stringify','writeState','iterator','writeFileSync',']\x20Error\x20reading\x20state\x20file:\x20','function','parse','stateFilePath','4touWxV','../logger','5496007xtLccO','stack','unlinkSync','470fmXETU','fullName',']\x20Error\x20creating\x20state\x20file:\x20','message','warn','30cTndXj','vspkG','releaseLock','CNdeF','closeSync'];a123_0x55cf=function(){return _0x2e3d88;};return a123_0x55cf();}function a123_0x1cf8(_0x4c8694,_0x224ced){const _0x55cf74=a123_0x55cf();return a123_0x1cf8=function(_0x1cf8a6,_0x4ac5f7){_0x1cf8a6=_0x1cf8a6-0x150;let _0x5d4069=_0x55cf74[_0x1cf8a6];return _0x5d4069;},a123_0x1cf8(_0x4c8694,_0x224ced);}(function(_0x44520e,_0x16397a){const _0x362a0c=a123_0x1cf8,_0x31fc8c=_0x44520e();while(!![]){try{const _0x13e167=parseInt(_0x362a0c(0x182))/0x1+parseInt(_0x362a0c(0x17a))/0x2+parseInt(_0x362a0c(0x17e))/0x3*(-parseInt(_0x362a0c(0x160))/0x4)+-parseInt(_0x362a0c(0x165))/0x5*(-parseInt(_0x362a0c(0x183))/0x6)+-parseInt(_0x362a0c(0x185))/0x7+-parseInt(_0x362a0c(0x179))/0x8*(parseInt(_0x362a0c(0x175))/0x9)+parseInt(_0x362a0c(0x16a))/0xa*(parseInt(_0x362a0c(0x162))/0xb);if(_0x13e167===_0x16397a)break;else _0x31fc8c['push'](_0x31fc8c['shift']());}catch(_0x1fd0a0){_0x31fc8c['push'](_0x31fc8c['shift']());}}}(a123_0x55cf,0xdbbc1));const fs=require('fs'),logger=require(a123_0x366b73(0x161))[a123_0x366b73(0x177)],TAG='FailFastFileHelper';class FileHelper{constructor(_0x2a4777,_0x3b66ff,_0x21e6c7,_0x551107){const _0xc32895=a123_0x366b73,_0x5a7e40={};_0x5a7e40[_0xc32895(0x17f)]='0|1|2|4|3',_0x5a7e40['dynwM']=_0xc32895(0x180);const _0x40f6a6=_0x5a7e40,_0x3ad265=_0x40f6a6['MMMwQ']['split']('|');let _0x13da6a=0x0;while(!![]){switch(_0x3ad265[_0x13da6a++]){case'0':this['failFastConfig']=_0x2a4777;continue;case'1':this['stateFilePath']=_0x3b66ff;continue;case'2':this['lockFilePath']=_0x21e6c7;continue;case'3':if(!fs[_0xc32895(0x17b)](this[_0xc32895(0x15f)]))try{fs[_0xc32895(0x15b)](this['stateFilePath'],'{}',_0x40f6a6['dynwM']);}catch(_0x7bd2a5){logger[_0xc32895(0x187)]('['+TAG+_0xc32895(0x167)+_0x7bd2a5[_0xc32895(0x168)]+'\x20'+_0x7bd2a5[_0xc32895(0x163)]);}continue;case'4':this[_0xc32895(0x18a)]=_0x551107;continue;}break;}}async[a123_0x366b73(0x157)](){const _0xfff04=a123_0x366b73,_0x3c498c={};_0x3c498c[_0xfff04(0x16d)]=function(_0x8b8db4,_0x23e859){return _0x8b8db4===_0x23e859;},_0x3c498c['dyRkJ']=_0xfff04(0x152);const _0x431ed3=_0x3c498c;let _0x5a2864;try{return _0x5a2864=fs['openSync'](this['lockFilePath'],'wx'),_0x5a2864;}catch(_0x5ce7ca){if(_0x431ed3[_0xfff04(0x16d)](_0x5ce7ca[_0xfff04(0x171)],_0x431ed3[_0xfff04(0x173)]))return null;throw _0x5ce7ca;}}async[a123_0x366b73(0x16c)](_0x4fe3fa){const _0x5212fc=a123_0x366b73;if(_0x4fe3fa)try{fs[_0x5212fc(0x16e)](_0x4fe3fa),fs[_0x5212fc(0x164)](this[_0x5212fc(0x181)]);}catch(_0x30f490){logger['error']('['+TAG+_0x5212fc(0x18d)+_0x30f490[_0x5212fc(0x168)]+'\x20'+_0x30f490[_0x5212fc(0x163)]);}}[a123_0x366b73(0x174)](){const _0x32bbff=a123_0x366b73,_0x15e61b={};_0x15e61b[_0x32bbff(0x178)]=_0x32bbff(0x180);const _0x2501f2=_0x15e61b;try{const _0x45a93c=fs[_0x32bbff(0x176)](this[_0x32bbff(0x15f)],_0x2501f2[_0x32bbff(0x178)]);return JSON[_0x32bbff(0x15e)](_0x45a93c);}catch(_0x5c70ff){return logger[_0x32bbff(0x187)]('['+TAG+_0x32bbff(0x15c)+_0x5c70ff['message']+'\x20'+_0x5c70ff[_0x32bbff(0x163)]),null;}}async[a123_0x366b73(0x159)](_0x2e8e03){const _0x4c1ce3=a123_0x366b73,_0x6fc19={..._0x2e8e03,'uniqueFailedTests':Array[_0x4c1ce3(0x151)](_0x2e8e03[_0x4c1ce3(0x150)])?_0x2e8e03['uniqueFailedTests']:Array[_0x4c1ce3(0x16f)](_0x2e8e03[_0x4c1ce3(0x150)]||[])};try{fs[_0x4c1ce3(0x15b)](this[_0x4c1ce3(0x15f)],JSON[_0x4c1ce3(0x158)](_0x6fc19,null,0x2));}catch(_0x317781){logger['error']('['+TAG+_0x4c1ce3(0x184)+_0x317781[_0x4c1ce3(0x168)]+'\x20'+_0x317781[_0x4c1ce3(0x163)]);throw _0x317781;}}async[a123_0x366b73(0x156)](_0x5092fc,_0x5900c7){const _0x426295=a123_0x366b73,_0x5df7a2={};_0x5df7a2[_0x426295(0x16b)]=function(_0x7019a1,_0x288740){return _0x7019a1!==_0x288740;},_0x5df7a2[_0x426295(0x17d)]=_0x426295(0x15d),_0x5df7a2[_0x426295(0x154)]=function(_0x155aba,_0x1c27ec){return _0x155aba===_0x1c27ec;},_0x5df7a2[_0x426295(0x17c)]='failed';const _0xe3b710=_0x5df7a2,_0x4a1fac=await this[_0x426295(0x157)]();if(!_0x4a1fac)return logger[_0x426295(0x169)]('['+TAG+_0x426295(0x170)),{'newState':this[_0x426295(0x174)]()||this[_0x426295(0x18a)],'isNewFailure':![]};try{let _0x1a8ef2=this['readState']();!_0x1a8ef2&&(_0x1a8ef2=JSON[_0x426295(0x15e)](JSON['stringify'](this[_0x426295(0x18a)])));if(!_0x1a8ef2[_0x426295(0x150)]||_0xe3b710[_0x426295(0x16b)](typeof _0x1a8ef2[_0x426295(0x150)][Symbol[_0x426295(0x15a)]],_0xe3b710['XgcOe']))_0x1a8ef2[_0x426295(0x150)]=new Set();else Array[_0x426295(0x151)](_0x1a8ef2[_0x426295(0x150)])&&(_0x1a8ef2['uniqueFailedTests']=new Set(_0x1a8ef2[_0x426295(0x150)]));_0x1a8ef2[_0x426295(0x155)]=_0x5900c7;let _0x1181c=![];_0xe3b710[_0x426295(0x154)](_0x5092fc[_0x426295(0x189)],_0xe3b710[_0x426295(0x17c)])&&(_0x1a8ef2[_0x426295(0x188)]+=0x1,!_0x1a8ef2[_0x426295(0x150)][_0x426295(0x18e)](_0x5092fc[_0x426295(0x166)])&&(_0x1a8ef2[_0x426295(0x150)]['add'](_0x5092fc[_0x426295(0x166)]),_0x1181c=!![]));await this[_0x426295(0x159)](_0x1a8ef2);const _0x3914b0={};return _0x3914b0[_0x426295(0x153)]=_0x1a8ef2,_0x3914b0[_0x426295(0x186)]=_0x1181c,_0x3914b0;}finally{await this[_0x426295(0x16c)](_0x4a1fac);}}async[a123_0x366b73(0x172)](_0x49d37f){const _0x3fb372=a123_0x366b73,_0xb97815=await this[_0x3fb372(0x157)]();if(!_0xb97815)return logger[_0x3fb372(0x169)]('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.'),this['readState']()||this['defaultState'];try{let _0x2b804e=this[_0x3fb372(0x174)]();return!_0x2b804e&&(_0x2b804e=JSON['parse'](JSON[_0x3fb372(0x158)](this[_0x3fb372(0x18a)]))),_0x2b804e[_0x3fb372(0x18b)]=_0x49d37f,await this[_0x3fb372(0x159)](_0x2b804e),_0x2b804e;}finally{await this[_0x3fb372(0x16c)](_0xb97815);}}}module[a123_0x366b73(0x18c)]=FileHelper;