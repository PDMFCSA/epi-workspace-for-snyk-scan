const a120_0xbeb615=a120_0x5842;(function(_0x7332d2,_0x5bf1d2){const _0x28c7dc=a120_0x5842,_0x306fa1=_0x7332d2();while(!![]){try{const _0x1d4482=parseInt(_0x28c7dc(0xc3))/0x1+parseInt(_0x28c7dc(0xe5))/0x2+parseInt(_0x28c7dc(0xcd))/0x3*(-parseInt(_0x28c7dc(0xf2))/0x4)+-parseInt(_0x28c7dc(0xee))/0x5*(-parseInt(_0x28c7dc(0xd4))/0x6)+parseInt(_0x28c7dc(0xec))/0x7*(-parseInt(_0x28c7dc(0xc9))/0x8)+parseInt(_0x28c7dc(0xea))/0x9+-parseInt(_0x28c7dc(0xcc))/0xa;if(_0x1d4482===_0x5bf1d2)break;else _0x306fa1['push'](_0x306fa1['shift']());}catch(_0x583fcc){_0x306fa1['push'](_0x306fa1['shift']());}}}(a120_0x7403,0x5f2bb));function a120_0x7403(){const _0x3ed633=['PXTWL','SzQrw',']\x20Error\x20releasing\x20lock:\x20','status','error','dzjHq','isArray','245264XhxXoP','lockFilePath','isNewFailure','uniqueFailedTests','openSync','5899644nHLSGz','iterator','2631692toxxNS','parse','3580AzTVCs',']\x20Error\x20creating\x20state\x20file:\x20','winstonLogger','has','268FSGLwv','EEXIST','writeState','stateFilePath','kPKRy','function','741520ShOHLy','writeFileSync','message','acquireLock','totalTests','OFTdz','8VENZmw','readState','releaseLock','8839370rlDalc','23640OqpqSj','closeSync','newState','defaultState','warn','existsSync',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','5514hTUwts',']\x20Error\x20reading\x20state\x20file:\x20','OQZkt','ljIFt','lastAPIFailedCount','stack',']\x20Error\x20writing\x20state\x20file:\x20','from','fullName','readFileSync'];a120_0x7403=function(){return _0x3ed633;};return a120_0x7403();}function a120_0x5842(_0x2e1e6f,_0x12c932){const _0x74037e=a120_0x7403();return a120_0x5842=function(_0x5842fa,_0x43b2b7){_0x5842fa=_0x5842fa-0xbe;let _0xc4a8eb=_0x74037e[_0x5842fa];return _0xc4a8eb;},a120_0x5842(_0x2e1e6f,_0x12c932);}const fs=require('fs'),logger=require('../logger')[a120_0xbeb615(0xf0)],TAG='FailFastFileHelper';class FileHelper{constructor(_0x319722,_0x29e6fc,_0x204caa,_0x2cfe16){const _0x54f517=a120_0xbeb615,_0x13492f={};_0x13492f[_0x54f517(0xde)]='2|4|0|1|3',_0x13492f[_0x54f517(0xdf)]='utf8';const _0x45e949=_0x13492f,_0x1e3168=_0x45e949['PXTWL']['split']('|');let _0x49529d=0x0;while(!![]){switch(_0x1e3168[_0x49529d++]){case'0':this[_0x54f517(0xe6)]=_0x204caa;continue;case'1':this[_0x54f517(0xd0)]=_0x2cfe16;continue;case'2':this['failFastConfig']=_0x319722;continue;case'3':if(!fs[_0x54f517(0xd2)](this[_0x54f517(0xc0)]))try{fs[_0x54f517(0xc4)](this[_0x54f517(0xc0)],'{}',_0x45e949[_0x54f517(0xdf)]);}catch(_0x29fe02){logger[_0x54f517(0xe2)]('['+TAG+_0x54f517(0xef)+_0x29fe02[_0x54f517(0xc5)]+'\x20'+_0x29fe02[_0x54f517(0xd9)]);}continue;case'4':this[_0x54f517(0xc0)]=_0x29e6fc;continue;}break;}}async[a120_0xbeb615(0xc6)](){const _0x59399c=a120_0xbeb615,_0xae9490={};_0xae9490[_0x59399c(0xc8)]=function(_0xb31e0c,_0x3842f7){return _0xb31e0c===_0x3842f7;},_0xae9490[_0x59399c(0xe3)]=_0x59399c(0xbe);const _0x473f36=_0xae9490;let _0x4bc382;try{return _0x4bc382=fs[_0x59399c(0xe9)](this[_0x59399c(0xe6)],'wx'),_0x4bc382;}catch(_0x56a41b){if(_0x473f36['OFTdz'](_0x56a41b['code'],_0x473f36[_0x59399c(0xe3)]))return null;throw _0x56a41b;}}async[a120_0xbeb615(0xcb)](_0x1ecab9){const _0x47d16e=a120_0xbeb615;if(_0x1ecab9)try{fs[_0x47d16e(0xce)](_0x1ecab9),fs['unlinkSync'](this[_0x47d16e(0xe6)]);}catch(_0x4c91be){logger[_0x47d16e(0xe2)]('['+TAG+_0x47d16e(0xe0)+_0x4c91be[_0x47d16e(0xc5)]+'\x20'+_0x4c91be[_0x47d16e(0xd9)]);}}[a120_0xbeb615(0xca)](){const _0x463d22=a120_0xbeb615,_0x4dce02={};_0x4dce02[_0x463d22(0xd7)]='utf8';const _0x4fa7ff=_0x4dce02;try{const _0x165de6=fs[_0x463d22(0xdd)](this[_0x463d22(0xc0)],_0x4fa7ff[_0x463d22(0xd7)]);return JSON[_0x463d22(0xed)](_0x165de6);}catch(_0x98453c){return logger[_0x463d22(0xe2)]('['+TAG+_0x463d22(0xd5)+_0x98453c[_0x463d22(0xc5)]+'\x20'+_0x98453c[_0x463d22(0xd9)]),null;}}async[a120_0xbeb615(0xbf)](_0x45b6bc){const _0x10c4d7=a120_0xbeb615,_0x1ebcc6={..._0x45b6bc,'uniqueFailedTests':Array[_0x10c4d7(0xe4)](_0x45b6bc[_0x10c4d7(0xe8)])?_0x45b6bc[_0x10c4d7(0xe8)]:Array[_0x10c4d7(0xdb)](_0x45b6bc['uniqueFailedTests']||[])};try{fs[_0x10c4d7(0xc4)](this[_0x10c4d7(0xc0)],JSON['stringify'](_0x1ebcc6,null,0x2));}catch(_0x2f1a6c){logger['error']('['+TAG+_0x10c4d7(0xda)+_0x2f1a6c[_0x10c4d7(0xc5)]+'\x20'+_0x2f1a6c[_0x10c4d7(0xd9)]);throw _0x2f1a6c;}}async['recordTestResult'](_0x2d572e,_0x4fed6d){const _0x3a719c=a120_0xbeb615,_0x2533d9={};_0x2533d9[_0x3a719c(0xc1)]=function(_0x253eec,_0x2895af){return _0x253eec!==_0x2895af;},_0x2533d9['mvRxZ']=_0x3a719c(0xc2),_0x2533d9[_0x3a719c(0xd6)]=function(_0x1d454f,_0x2d53d5){return _0x1d454f===_0x2d53d5;},_0x2533d9['PtWdZ']='failed';const _0x3a744b=_0x2533d9,_0x14d3a7=await this[_0x3a719c(0xc6)]();if(!_0x14d3a7)return logger[_0x3a719c(0xd1)]('['+TAG+_0x3a719c(0xd3)),{'newState':this['readState']()||this[_0x3a719c(0xd0)],'isNewFailure':![]};try{let _0x598ea7=this[_0x3a719c(0xca)]();!_0x598ea7&&(_0x598ea7=JSON[_0x3a719c(0xed)](JSON['stringify'](this['defaultState'])));if(!_0x598ea7[_0x3a719c(0xe8)]||_0x3a744b[_0x3a719c(0xc1)](typeof _0x598ea7[_0x3a719c(0xe8)][Symbol[_0x3a719c(0xeb)]],_0x3a744b['mvRxZ']))_0x598ea7[_0x3a719c(0xe8)]=new Set();else Array[_0x3a719c(0xe4)](_0x598ea7[_0x3a719c(0xe8)])&&(_0x598ea7[_0x3a719c(0xe8)]=new Set(_0x598ea7[_0x3a719c(0xe8)]));_0x598ea7[_0x3a719c(0xc7)]=_0x4fed6d;let _0x46f44c=![];_0x3a744b['OQZkt'](_0x2d572e[_0x3a719c(0xe1)],_0x3a744b['PtWdZ'])&&(_0x598ea7['failedTests']+=0x1,!_0x598ea7[_0x3a719c(0xe8)][_0x3a719c(0xf1)](_0x2d572e[_0x3a719c(0xdc)])&&(_0x598ea7[_0x3a719c(0xe8)]['add'](_0x2d572e[_0x3a719c(0xdc)]),_0x46f44c=!![]));await this[_0x3a719c(0xbf)](_0x598ea7);const _0x39d2c0={};return _0x39d2c0[_0x3a719c(0xcf)]=_0x598ea7,_0x39d2c0[_0x3a719c(0xe7)]=_0x46f44c,_0x39d2c0;}finally{await this[_0x3a719c(0xcb)](_0x14d3a7);}}async['updateAPIFailedCount'](_0x4fdfed){const _0x159373=a120_0xbeb615,_0x11ded6=await this[_0x159373(0xc6)]();if(!_0x11ded6)return logger['warn']('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.'),this['readState']()||this[_0x159373(0xd0)];try{let _0x3329d2=this['readState']();return!_0x3329d2&&(_0x3329d2=JSON[_0x159373(0xed)](JSON['stringify'](this['defaultState']))),_0x3329d2[_0x159373(0xd8)]=_0x4fdfed,await this[_0x159373(0xbf)](_0x3329d2),_0x3329d2;}finally{await this[_0x159373(0xcb)](_0x11ded6);}}}module['exports']=FileHelper;