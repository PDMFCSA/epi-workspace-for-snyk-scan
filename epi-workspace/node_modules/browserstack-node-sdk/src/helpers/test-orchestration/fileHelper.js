const a118_0x1ff7cd=a118_0xe9d9;(function(_0x375dee,_0x5919f3){const _0x26ceaa=a118_0xe9d9,_0x479406=_0x375dee();while(!![]){try{const _0x5e3d42=parseInt(_0x26ceaa(0x18b))/0x1*(parseInt(_0x26ceaa(0x181))/0x2)+-parseInt(_0x26ceaa(0x199))/0x3*(parseInt(_0x26ceaa(0x186))/0x4)+parseInt(_0x26ceaa(0x1a7))/0x5+-parseInt(_0x26ceaa(0x191))/0x6*(parseInt(_0x26ceaa(0x19f))/0x7)+parseInt(_0x26ceaa(0x188))/0x8*(-parseInt(_0x26ceaa(0x18f))/0x9)+parseInt(_0x26ceaa(0x1a4))/0xa*(-parseInt(_0x26ceaa(0x172))/0xb)+parseInt(_0x26ceaa(0x1a5))/0xc;if(_0x5e3d42===_0x5919f3)break;else _0x479406['push'](_0x479406['shift']());}catch(_0x30b3d2){_0x479406['push'](_0x479406['shift']());}}}(a118_0x16c3,0x7029f));function a118_0xe9d9(_0x2ea050,_0xf63fde){const _0x16c392=a118_0x16c3();return a118_0xe9d9=function(_0xe9d993,_0x3b3d3c){_0xe9d993=_0xe9d993-0x170;let _0x28bed9=_0x16c392[_0xe9d993];return _0x28bed9;},a118_0xe9d9(_0x2ea050,_0xf63fde);}function a118_0x16c3(){const _0x10770d=['iterator','failedTests','eBDxw','99VJvWwe','isNewFailure','12804UuKWeE','tkbNf',']\x20Error\x20writing\x20state\x20file:\x20','wBzWd','code','updateAPIFailedCount','IXwtB','QbtMv','6pyMpqF','defaultState','lockFilePath','2|1|0|4|3','parse','error','1106iYtOoW','message','stack','exports','mdmMU','7615070arCVyp','21688776DWsnUf','has','433795gjreKZ','releaseLock','ePYhF','uniqueFailedTests','11vnZNFu','readState','utf8','isArray','failed','writeFileSync',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','FfDpx','totalTests','status','recordTestResult','function','newState','failFastConfig','stringify','88778LmIcht','acquireLock',']\x20Error\x20reading\x20state\x20file:\x20','cRuCi','closeSync','91264YbReuj','../logger','469480yLicGq','writeState','stateFilePath','8WgLpIm'];a118_0x16c3=function(){return _0x10770d;};return a118_0x16c3();}const fs=require('fs'),logger=require(a118_0x1ff7cd(0x187))['winstonLogger'],TAG='FailFastFileHelper';class FileHelper{constructor(_0x124ae0,_0x4a3190,_0x25aec8,_0x533742){const _0x66d700=a118_0x1ff7cd,_0x24ef04={};_0x24ef04[_0x66d700(0x170)]=_0x66d700(0x19c),_0x24ef04['FfDpx']=_0x66d700(0x174);const _0x366227=_0x24ef04,_0x19dd90=_0x366227[_0x66d700(0x170)]['split']('|');let _0x15dca6=0x0;while(!![]){switch(_0x19dd90[_0x15dca6++]){case'0':this[_0x66d700(0x19b)]=_0x25aec8;continue;case'1':this[_0x66d700(0x18a)]=_0x4a3190;continue;case'2':this[_0x66d700(0x17f)]=_0x124ae0;continue;case'3':if(!fs['existsSync'](this[_0x66d700(0x18a)]))try{fs[_0x66d700(0x177)](this['stateFilePath'],'{}',_0x366227[_0x66d700(0x179)]);}catch(_0x41c24b){logger[_0x66d700(0x19e)]('['+TAG+']\x20Error\x20creating\x20state\x20file:\x20'+_0x41c24b['message']+'\x20'+_0x41c24b[_0x66d700(0x1a1)]);}continue;case'4':this[_0x66d700(0x19a)]=_0x533742;continue;}break;}}async[a118_0x1ff7cd(0x182)](){const _0x4f814b=a118_0x1ff7cd,_0x3f7da0={};_0x3f7da0[_0x4f814b(0x197)]=function(_0x43630c,_0x3ef61a){return _0x43630c===_0x3ef61a;},_0x3f7da0[_0x4f814b(0x192)]='EEXIST';const _0x985019=_0x3f7da0;let _0x20acdd;try{return _0x20acdd=fs['openSync'](this[_0x4f814b(0x19b)],'wx'),_0x20acdd;}catch(_0x125430){if(_0x985019[_0x4f814b(0x197)](_0x125430[_0x4f814b(0x195)],_0x985019[_0x4f814b(0x192)]))return null;throw _0x125430;}}async[a118_0x1ff7cd(0x1a8)](_0x3e0198){const _0x108a0c=a118_0x1ff7cd;if(_0x3e0198)try{fs[_0x108a0c(0x185)](_0x3e0198),fs['unlinkSync'](this['lockFilePath']);}catch(_0x38296c){logger['error']('['+TAG+']\x20Error\x20releasing\x20lock:\x20'+_0x38296c[_0x108a0c(0x1a0)]+'\x20'+_0x38296c['stack']);}}[a118_0x1ff7cd(0x173)](){const _0x10de6a=a118_0x1ff7cd,_0x330ae0={};_0x330ae0[_0x10de6a(0x198)]='utf8';const _0x4cf0bd=_0x330ae0;try{const _0x84b2d4=fs['readFileSync'](this[_0x10de6a(0x18a)],_0x4cf0bd['QbtMv']);return JSON[_0x10de6a(0x19d)](_0x84b2d4);}catch(_0x18005d){return logger['error']('['+TAG+_0x10de6a(0x183)+_0x18005d[_0x10de6a(0x1a0)]+'\x20'+_0x18005d['stack']),null;}}async[a118_0x1ff7cd(0x189)](_0x4b16e3){const _0xd0f108=a118_0x1ff7cd,_0xf09c30={..._0x4b16e3,'uniqueFailedTests':Array[_0xd0f108(0x175)](_0x4b16e3[_0xd0f108(0x171)])?_0x4b16e3['uniqueFailedTests']:Array['from'](_0x4b16e3[_0xd0f108(0x171)]||[])};try{fs[_0xd0f108(0x177)](this[_0xd0f108(0x18a)],JSON[_0xd0f108(0x180)](_0xf09c30,null,0x2));}catch(_0x23c890){logger[_0xd0f108(0x19e)]('['+TAG+_0xd0f108(0x193)+_0x23c890[_0xd0f108(0x1a0)]+'\x20'+_0x23c890[_0xd0f108(0x1a1)]);throw _0x23c890;}}async[a118_0x1ff7cd(0x17c)](_0x4f8e8d,_0x2cdeaa){const _0x36aaae=a118_0x1ff7cd,_0x3d05da={};_0x3d05da[_0x36aaae(0x184)]=function(_0x21b1a5,_0x4a2993){return _0x21b1a5!==_0x4a2993;},_0x3d05da['mdmMU']=_0x36aaae(0x17d),_0x3d05da['wBzWd']=function(_0x28a62b,_0x157639){return _0x28a62b===_0x157639;},_0x3d05da[_0x36aaae(0x18e)]=_0x36aaae(0x176);const _0x383e73=_0x3d05da,_0x31bc88=await this[_0x36aaae(0x182)]();if(!_0x31bc88)return logger['warn']('['+TAG+_0x36aaae(0x178)),{'newState':this[_0x36aaae(0x173)]()||this['defaultState'],'isNewFailure':![]};try{let _0x43d495=this['readState']();!_0x43d495&&(_0x43d495=JSON[_0x36aaae(0x19d)](JSON['stringify'](this['defaultState'])));if(!_0x43d495['uniqueFailedTests']||_0x383e73[_0x36aaae(0x184)](typeof _0x43d495[_0x36aaae(0x171)][Symbol[_0x36aaae(0x18c)]],_0x383e73[_0x36aaae(0x1a3)]))_0x43d495[_0x36aaae(0x171)]=new Set();else Array['isArray'](_0x43d495[_0x36aaae(0x171)])&&(_0x43d495[_0x36aaae(0x171)]=new Set(_0x43d495[_0x36aaae(0x171)]));_0x43d495[_0x36aaae(0x17a)]=_0x2cdeaa;let _0x244365=![];_0x383e73[_0x36aaae(0x194)](_0x4f8e8d[_0x36aaae(0x17b)],_0x383e73['eBDxw'])&&(_0x43d495[_0x36aaae(0x18d)]+=0x1,!_0x43d495[_0x36aaae(0x171)][_0x36aaae(0x1a6)](_0x4f8e8d['fullName'])&&(_0x43d495['uniqueFailedTests']['add'](_0x4f8e8d['fullName']),_0x244365=!![]));await this[_0x36aaae(0x189)](_0x43d495);const _0x4de692={};return _0x4de692[_0x36aaae(0x17e)]=_0x43d495,_0x4de692[_0x36aaae(0x190)]=_0x244365,_0x4de692;}finally{await this[_0x36aaae(0x1a8)](_0x31bc88);}}async[a118_0x1ff7cd(0x196)](_0x3ee0bb){const _0x236df3=a118_0x1ff7cd,_0x55b1a9=await this[_0x236df3(0x182)]();if(!_0x55b1a9)return logger['warn']('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.'),this[_0x236df3(0x173)]()||this[_0x236df3(0x19a)];try{let _0xce55c8=this[_0x236df3(0x173)]();return!_0xce55c8&&(_0xce55c8=JSON[_0x236df3(0x19d)](JSON[_0x236df3(0x180)](this['defaultState']))),_0xce55c8['lastAPIFailedCount']=_0x3ee0bb,await this[_0x236df3(0x189)](_0xce55c8),_0xce55c8;}finally{await this[_0x236df3(0x1a8)](_0x55b1a9);}}}module[a118_0x1ff7cd(0x1a2)]=FileHelper;