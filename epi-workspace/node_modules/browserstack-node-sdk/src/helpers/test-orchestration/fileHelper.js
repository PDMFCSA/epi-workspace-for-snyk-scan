const a120_0x9bef56=a120_0x46c5;function a120_0x46c5(_0x16152c,_0x52e332){const _0x7d3fe4=a120_0x7d3f();return a120_0x46c5=function(_0x46c583,_0x4e43a8){_0x46c583=_0x46c583-0xb7;let _0x47a2fb=_0x7d3fe4[_0x46c583];return _0x47a2fb;},a120_0x46c5(_0x16152c,_0x52e332);}(function(_0x432ed0,_0x5bc9e4){const _0xd5fda2=a120_0x46c5,_0x1be068=_0x432ed0();while(!![]){try{const _0x28584b=parseInt(_0xd5fda2(0xe8))/0x1*(parseInt(_0xd5fda2(0xc0))/0x2)+-parseInt(_0xd5fda2(0xc3))/0x3*(parseInt(_0xd5fda2(0xea))/0x4)+-parseInt(_0xd5fda2(0xe3))/0x5+parseInt(_0xd5fda2(0xe7))/0x6*(-parseInt(_0xd5fda2(0xd5))/0x7)+parseInt(_0xd5fda2(0xcd))/0x8+parseInt(_0xd5fda2(0xcf))/0x9*(-parseInt(_0xd5fda2(0xcb))/0xa)+parseInt(_0xd5fda2(0xd8))/0xb*(parseInt(_0xd5fda2(0xd3))/0xc);if(_0x28584b===_0x5bc9e4)break;else _0x1be068['push'](_0x1be068['shift']());}catch(_0x5b8236){_0x1be068['push'](_0x1be068['shift']());}}}(a120_0x7d3f,0x19b35));function a120_0x7d3f(){const _0x45799a=['iterator','12RUlQsq','openSync','483bOQyJH','dwSdo','function','2345882alnTVu','newState','status','code','defaultState','fullName','FailFastFileHelper','uSJST','jHBip','lastAPIFailedCount','readFileSync','786390MmTQrT','totalTests','message','lockFilePath','1518XbabpZ','197083EQXmwy','hcftA','4bvngkf','error','writeState','unlinkSync',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','mqISH',']\x20Error\x20reading\x20state\x20file:\x20','readState','utf8','parse','3|2|0|4|1','split','writeFileSync','yqltI','stateFilePath','stack','uniqueFailedTests','failedTests','lwvpf','2fnnDgo','exports','updateAPIFailedCount','429648rcOTAp','has','failed','isNewFailure','releaseLock',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','existsSync','acquireLock','349290gUGkPJ','closeSync','1220728AKpChJ','Phkam','36sREvCH','cHgYJ','stringify'];a120_0x7d3f=function(){return _0x45799a;};return a120_0x7d3f();}const fs=require('fs'),logger=require('../logger')['winstonLogger'],TAG=a120_0x9bef56(0xde);class FileHelper{constructor(_0x89ad3e,_0x2406c1,_0x5c33a8,_0x3478d9){const _0x1d5a47=a120_0x9bef56,_0x87582a={};_0x87582a[_0x1d5a47(0xce)]=_0x1d5a47(0xb7),_0x87582a[_0x1d5a47(0xe0)]='utf8';const _0xeab9c5=_0x87582a,_0x747948=_0xeab9c5[_0x1d5a47(0xce)][_0x1d5a47(0xb8)]('|');let _0x2c9c42=0x0;while(!![]){switch(_0x747948[_0x2c9c42++]){case'0':this[_0x1d5a47(0xe6)]=_0x5c33a8;continue;case'1':if(!fs[_0x1d5a47(0xc9)](this[_0x1d5a47(0xbb)]))try{fs[_0x1d5a47(0xb9)](this[_0x1d5a47(0xbb)],'{}',_0xeab9c5['jHBip']);}catch(_0x582de9){logger[_0x1d5a47(0xeb)]('['+TAG+']\x20Error\x20creating\x20state\x20file:\x20'+_0x582de9[_0x1d5a47(0xe5)]+'\x20'+_0x582de9[_0x1d5a47(0xbc)]);}continue;case'2':this[_0x1d5a47(0xbb)]=_0x2406c1;continue;case'3':this['failFastConfig']=_0x89ad3e;continue;case'4':this[_0x1d5a47(0xdc)]=_0x3478d9;continue;}break;}}async[a120_0x9bef56(0xca)](){const _0xb2d7f0=a120_0x9bef56,_0x4fe27d={};_0x4fe27d[_0xb2d7f0(0xd0)]=function(_0x18c791,_0x3f3350){return _0x18c791===_0x3f3350;},_0x4fe27d[_0xb2d7f0(0xdf)]='EEXIST';const _0x60be77=_0x4fe27d;let _0x139b8c;try{return _0x139b8c=fs[_0xb2d7f0(0xd4)](this[_0xb2d7f0(0xe6)],'wx'),_0x139b8c;}catch(_0x521517){if(_0x60be77[_0xb2d7f0(0xd0)](_0x521517[_0xb2d7f0(0xdb)],_0x60be77[_0xb2d7f0(0xdf)]))return null;throw _0x521517;}}async[a120_0x9bef56(0xc7)](_0x2fd720){const _0x27a7de=a120_0x9bef56;if(_0x2fd720)try{fs[_0x27a7de(0xcc)](_0x2fd720),fs[_0x27a7de(0xed)](this[_0x27a7de(0xe6)]);}catch(_0x4b9038){logger[_0x27a7de(0xeb)]('['+TAG+']\x20Error\x20releasing\x20lock:\x20'+_0x4b9038[_0x27a7de(0xe5)]+'\x20'+_0x4b9038[_0x27a7de(0xbc)]);}}['readState'](){const _0x566daf=a120_0x9bef56,_0x3f3d55={};_0x3f3d55[_0x566daf(0xe9)]=_0x566daf(0xf2);const _0x22e849=_0x3f3d55;try{const _0x48744e=fs[_0x566daf(0xe2)](this[_0x566daf(0xbb)],_0x22e849[_0x566daf(0xe9)]);return JSON['parse'](_0x48744e);}catch(_0x5f0051){return logger[_0x566daf(0xeb)]('['+TAG+_0x566daf(0xf0)+_0x5f0051[_0x566daf(0xe5)]+'\x20'+_0x5f0051[_0x566daf(0xbc)]),null;}}async[a120_0x9bef56(0xec)](_0x4952af){const _0x15abe2=a120_0x9bef56,_0x5691a6={..._0x4952af,'uniqueFailedTests':Array['isArray'](_0x4952af[_0x15abe2(0xbd)])?_0x4952af[_0x15abe2(0xbd)]:Array['from'](_0x4952af['uniqueFailedTests']||[])};try{fs[_0x15abe2(0xb9)](this[_0x15abe2(0xbb)],JSON[_0x15abe2(0xd1)](_0x5691a6,null,0x2));}catch(_0x2d9217){logger['error']('['+TAG+']\x20Error\x20writing\x20state\x20file:\x20'+_0x2d9217[_0x15abe2(0xe5)]+'\x20'+_0x2d9217[_0x15abe2(0xbc)]);throw _0x2d9217;}}async['recordTestResult'](_0x1c6924,_0x1423de){const _0x20cf92=a120_0x9bef56,_0x443bd7={};_0x443bd7[_0x20cf92(0xbf)]=function(_0x3e42f3,_0x47dab1){return _0x3e42f3!==_0x47dab1;},_0x443bd7[_0x20cf92(0xd6)]=_0x20cf92(0xd7),_0x443bd7[_0x20cf92(0xba)]=function(_0x3f930a,_0x4ae5ef){return _0x3f930a===_0x4ae5ef;},_0x443bd7[_0x20cf92(0xef)]=_0x20cf92(0xc5);const _0x48eb9a=_0x443bd7,_0x219efc=await this[_0x20cf92(0xca)]();if(!_0x219efc)return logger['warn']('['+TAG+_0x20cf92(0xee)),{'newState':this[_0x20cf92(0xf1)]()||this['defaultState'],'isNewFailure':![]};try{let _0x31cc35=this['readState']();!_0x31cc35&&(_0x31cc35=JSON['parse'](JSON['stringify'](this[_0x20cf92(0xdc)])));if(!_0x31cc35[_0x20cf92(0xbd)]||_0x48eb9a['lwvpf'](typeof _0x31cc35[_0x20cf92(0xbd)][Symbol[_0x20cf92(0xd2)]],_0x48eb9a['dwSdo']))_0x31cc35[_0x20cf92(0xbd)]=new Set();else Array['isArray'](_0x31cc35[_0x20cf92(0xbd)])&&(_0x31cc35[_0x20cf92(0xbd)]=new Set(_0x31cc35[_0x20cf92(0xbd)]));_0x31cc35[_0x20cf92(0xe4)]=_0x1423de;let _0x3bed86=![];_0x48eb9a[_0x20cf92(0xba)](_0x1c6924[_0x20cf92(0xda)],_0x48eb9a[_0x20cf92(0xef)])&&(_0x31cc35[_0x20cf92(0xbe)]+=0x1,!_0x31cc35[_0x20cf92(0xbd)][_0x20cf92(0xc4)](_0x1c6924['fullName'])&&(_0x31cc35[_0x20cf92(0xbd)]['add'](_0x1c6924[_0x20cf92(0xdd)]),_0x3bed86=!![]));await this[_0x20cf92(0xec)](_0x31cc35);const _0x41ccda={};return _0x41ccda[_0x20cf92(0xd9)]=_0x31cc35,_0x41ccda[_0x20cf92(0xc6)]=_0x3bed86,_0x41ccda;}finally{await this[_0x20cf92(0xc7)](_0x219efc);}}async[a120_0x9bef56(0xc2)](_0x2e2bb9){const _0x1eb6f6=a120_0x9bef56,_0x5022f9=await this[_0x1eb6f6(0xca)]();if(!_0x5022f9)return logger['warn']('['+TAG+_0x1eb6f6(0xc8)),this[_0x1eb6f6(0xf1)]()||this['defaultState'];try{let _0x4f67b1=this[_0x1eb6f6(0xf1)]();return!_0x4f67b1&&(_0x4f67b1=JSON[_0x1eb6f6(0xf3)](JSON[_0x1eb6f6(0xd1)](this[_0x1eb6f6(0xdc)]))),_0x4f67b1[_0x1eb6f6(0xe1)]=_0x2e2bb9,await this[_0x1eb6f6(0xec)](_0x4f67b1),_0x4f67b1;}finally{await this[_0x1eb6f6(0xc7)](_0x5022f9);}}}module[a120_0x9bef56(0xc1)]=FileHelper;