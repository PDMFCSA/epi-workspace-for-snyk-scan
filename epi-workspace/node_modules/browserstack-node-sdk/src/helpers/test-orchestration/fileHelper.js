const a132_0x592a6a=a132_0x34f8;(function(_0x3ae0dd,_0x4a9475){const _0x19a590=a132_0x34f8,_0x407579=_0x3ae0dd();while(!![]){try{const _0x4e5fad=-parseInt(_0x19a590(0x11e))/0x1*(-parseInt(_0x19a590(0xf7))/0x2)+parseInt(_0x19a590(0x105))/0x3+-parseInt(_0x19a590(0x107))/0x4+-parseInt(_0x19a590(0x118))/0x5+parseInt(_0x19a590(0x104))/0x6*(parseInt(_0x19a590(0x127))/0x7)+parseInt(_0x19a590(0x12c))/0x8+-parseInt(_0x19a590(0x116))/0x9;if(_0x4e5fad===_0x4a9475)break;else _0x407579['push'](_0x407579['shift']());}catch(_0x2276da){_0x407579['push'](_0x407579['shift']());}}}(a132_0x255a,0x45364));const fs=require('fs'),logger=require('../logger')[a132_0x592a6a(0x123)],TAG=a132_0x592a6a(0x12f);class FileHelper{constructor(_0x5daf87,_0x261504,_0x3d4ce3,_0x5b28a8){const _0x20dd58=a132_0x592a6a,_0x4fc8f5={};_0x4fc8f5[_0x20dd58(0x12a)]='2|4|0|1|3',_0x4fc8f5['GbRgj']=_0x20dd58(0x125);const _0x28fbea=_0x4fc8f5,_0x5e9bc4=_0x28fbea['dlqZv'][_0x20dd58(0x100)]('|');let _0x3f524=0x0;while(!![]){switch(_0x5e9bc4[_0x3f524++]){case'0':this[_0x20dd58(0x129)]=_0x3d4ce3;continue;case'1':this['defaultState']=_0x5b28a8;continue;case'2':this[_0x20dd58(0x10a)]=_0x5daf87;continue;case'3':if(!fs['existsSync'](this[_0x20dd58(0x10b)]))try{fs[_0x20dd58(0xfb)](this[_0x20dd58(0x10b)],'{}',_0x28fbea[_0x20dd58(0x112)]);}catch(_0x46d06f){logger[_0x20dd58(0x108)]('['+TAG+_0x20dd58(0x115)+_0x46d06f[_0x20dd58(0xf9)]+'\x20'+_0x46d06f[_0x20dd58(0x122)]);}continue;case'4':this[_0x20dd58(0x10b)]=_0x261504;continue;}break;}}async[a132_0x592a6a(0x132)](){const _0x18dc10=a132_0x592a6a,_0x43a697={};_0x43a697[_0x18dc10(0x12d)]=function(_0x599f54,_0x115520){return _0x599f54===_0x115520;},_0x43a697[_0x18dc10(0x10f)]=_0x18dc10(0x12e);const _0x3774a3=_0x43a697;let _0x2a4bea;try{return _0x2a4bea=fs[_0x18dc10(0x120)](this[_0x18dc10(0x129)],'wx'),_0x2a4bea;}catch(_0x4714de){if(_0x3774a3[_0x18dc10(0x12d)](_0x4714de[_0x18dc10(0xfd)],_0x3774a3[_0x18dc10(0x10f)]))return null;throw _0x4714de;}}async[a132_0x592a6a(0xfa)](_0x209e0f){const _0x400c8a=a132_0x592a6a;if(_0x209e0f)try{fs[_0x400c8a(0x11f)](_0x209e0f),fs[_0x400c8a(0x10e)](this[_0x400c8a(0x129)]);}catch(_0x2c2d47){logger[_0x400c8a(0x108)]('['+TAG+_0x400c8a(0x128)+_0x2c2d47[_0x400c8a(0xf9)]+'\x20'+_0x2c2d47[_0x400c8a(0x122)]);}}[a132_0x592a6a(0x106)](){const _0x2c1f47=a132_0x592a6a,_0x1e6234={};_0x1e6234[_0x2c1f47(0xf8)]=_0x2c1f47(0x125);const _0x71ba8d=_0x1e6234;try{const _0x13de03=fs[_0x2c1f47(0x111)](this['stateFilePath'],_0x71ba8d[_0x2c1f47(0xf8)]);return JSON[_0x2c1f47(0xfc)](_0x13de03);}catch(_0xe7f85e){return logger[_0x2c1f47(0x108)]('['+TAG+_0x2c1f47(0x11b)+_0xe7f85e[_0x2c1f47(0xf9)]+'\x20'+_0xe7f85e['stack']),null;}}async[a132_0x592a6a(0x126)](_0x40c500){const _0x4e4aef=a132_0x592a6a,_0x55fe1a={..._0x40c500,'uniqueFailedTests':Array[_0x4e4aef(0xfe)](_0x40c500['uniqueFailedTests'])?_0x40c500['uniqueFailedTests']:Array['from'](_0x40c500['uniqueFailedTests']||[])};try{fs[_0x4e4aef(0xfb)](this[_0x4e4aef(0x10b)],JSON[_0x4e4aef(0x101)](_0x55fe1a,null,0x2));}catch(_0x5becbf){logger[_0x4e4aef(0x108)]('['+TAG+_0x4e4aef(0x11a)+_0x5becbf[_0x4e4aef(0xf9)]+'\x20'+_0x5becbf['stack']);throw _0x5becbf;}}async['recordTestResult'](_0x2bb5c3,_0x614453){const _0xb81561=a132_0x592a6a,_0xb1a0f9={};_0xb1a0f9[_0xb81561(0x12b)]=function(_0x3f6c78,_0x4b3d87){return _0x3f6c78!==_0x4b3d87;},_0xb1a0f9[_0xb81561(0x114)]=_0xb81561(0x11d),_0xb1a0f9[_0xb81561(0x124)]=function(_0x45530e,_0x29af1a){return _0x45530e===_0x29af1a;},_0xb1a0f9[_0xb81561(0x10d)]='failed';const _0x4f130c=_0xb1a0f9,_0x4babb4=await this[_0xb81561(0x132)]();if(!_0x4babb4)return logger[_0xb81561(0xff)]('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.'),{'newState':this['readState']()||this['defaultState'],'isNewFailure':![]};try{let _0x313693=this[_0xb81561(0x106)]();!_0x313693&&(_0x313693=JSON['parse'](JSON['stringify'](this[_0xb81561(0x103)])));if(!_0x313693[_0xb81561(0x113)]||_0x4f130c['NIlnT'](typeof _0x313693['uniqueFailedTests'][Symbol[_0xb81561(0x121)]],_0x4f130c['XwbYS']))_0x313693[_0xb81561(0x113)]=new Set();else Array[_0xb81561(0xfe)](_0x313693['uniqueFailedTests'])&&(_0x313693['uniqueFailedTests']=new Set(_0x313693[_0xb81561(0x113)]));_0x313693[_0xb81561(0x117)]=_0x614453;let _0x47cd57=![];_0x4f130c[_0xb81561(0x124)](_0x2bb5c3[_0xb81561(0x119)],_0x4f130c[_0xb81561(0x10d)])&&(_0x313693['failedTests']+=0x1,!_0x313693[_0xb81561(0x113)][_0xb81561(0x109)](_0x2bb5c3['fullName'])&&(_0x313693['uniqueFailedTests'][_0xb81561(0x11c)](_0x2bb5c3[_0xb81561(0x10c)]),_0x47cd57=!![]));await this['writeState'](_0x313693);const _0x452d33={};return _0x452d33[_0xb81561(0x110)]=_0x313693,_0x452d33['isNewFailure']=_0x47cd57,_0x452d33;}finally{await this[_0xb81561(0xfa)](_0x4babb4);}}async['updateAPIFailedCount'](_0x3f8684){const _0x5c9dd4=a132_0x592a6a,_0x4cd322=await this[_0x5c9dd4(0x132)]();if(!_0x4cd322)return logger[_0x5c9dd4(0xff)]('['+TAG+_0x5c9dd4(0x130)),this[_0x5c9dd4(0x106)]()||this[_0x5c9dd4(0x103)];try{let _0x356a58=this['readState']();return!_0x356a58&&(_0x356a58=JSON[_0x5c9dd4(0xfc)](JSON[_0x5c9dd4(0x101)](this['defaultState']))),_0x356a58[_0x5c9dd4(0x131)]=_0x3f8684,await this[_0x5c9dd4(0x126)](_0x356a58),_0x356a58;}finally{await this['releaseLock'](_0x4cd322);}}}function a132_0x255a(){const _0x1222dc=['XwbYS',']\x20Error\x20creating\x20state\x20file:\x20','3436110GnhSSs','totalTests','224700GQwIgf','status',']\x20Error\x20writing\x20state\x20file:\x20',']\x20Error\x20reading\x20state\x20file:\x20','add','function','286990McOaIe','closeSync','openSync','iterator','stack','winstonLogger','whsxf','utf8','writeState','623olQrKQ',']\x20Error\x20releasing\x20lock:\x20','lockFilePath','dlqZv','NIlnT','796896zPnhpv','tBvdj','EEXIST','FailFastFileHelper',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','lastAPIFailedCount','acquireLock','2HvyCDr','rwDyo','message','releaseLock','writeFileSync','parse','code','isArray','warn','split','stringify','exports','defaultState','15120NuvDdv','1275210dsaoqX','readState','1302920adFSiB','error','has','failFastConfig','stateFilePath','fullName','CLuOA','unlinkSync','WBpJG','newState','readFileSync','GbRgj','uniqueFailedTests'];a132_0x255a=function(){return _0x1222dc;};return a132_0x255a();}function a132_0x34f8(_0x13eb3f,_0x1a59f9){const _0x255a9a=a132_0x255a();return a132_0x34f8=function(_0x34f874,_0x3d5f87){_0x34f874=_0x34f874-0xf7;let _0x582f06=_0x255a9a[_0x34f874];return _0x582f06;},a132_0x34f8(_0x13eb3f,_0x1a59f9);}module[a132_0x592a6a(0x102)]=FileHelper;