const a133_0x249c0c=a133_0x2e0f;function a133_0x27f7(){const _0x5e3a7f=['20JQjcwz','message',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','failed','TxEhY','error',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','from','253671taAktB','CJVJZ','iterator','failFastConfig','writeState','failedTests','totalTests','existsSync','109749USFPkV','FailFastFileHelper','closeSync','recordTestResult','lastAPIFailedCount','426qqXMwW','openSync','add','knMcP','EEXIST','pULGU','2292TftGnY','lockFilePath','stringify','329vSiLnP','6746544nFpyFI',']\x20Error\x20creating\x20state\x20file:\x20','utf8','updateAPIFailedCount','EagOF','stateFilePath','readFileSync','1086yQJwVS','acquireLock','parse','newState','stack','defaultState','function','1|4|0|2|3','warn','161232dZvKcq','../logger',']\x20Error\x20writing\x20state\x20file:\x20','writeFileSync','readState','nvdKF','75095EawQkH','uniqueFailedTests','9000710RwtPku','releaseLock','code','isArray','sRzpf','has','status','fBWCA','fullName','2477rDxGxd',']\x20Error\x20releasing\x20lock:\x20','winstonLogger'];a133_0x27f7=function(){return _0x5e3a7f;};return a133_0x27f7();}(function(_0x50f5a2,_0x4502ce){const _0x20ac45=a133_0x2e0f,_0x5a46f3=_0x50f5a2();while(!![]){try{const _0x452c21=parseInt(_0x20ac45(0x169))/0x1*(-parseInt(_0x20ac45(0x192))/0x2)+parseInt(_0x20ac45(0x17c))/0x3*(-parseInt(_0x20ac45(0x16c))/0x4)+parseInt(_0x20ac45(0x15e))/0x5*(-parseInt(_0x20ac45(0x181))/0x6)+-parseInt(_0x20ac45(0x18a))/0x7*(parseInt(_0x20ac45(0x158))/0x8)+parseInt(_0x20ac45(0x18b))/0x9+-parseInt(_0x20ac45(0x160))/0xa+parseInt(_0x20ac45(0x174))/0xb*(parseInt(_0x20ac45(0x187))/0xc);if(_0x452c21===_0x4502ce)break;else _0x5a46f3['push'](_0x5a46f3['shift']());}catch(_0x1196ba){_0x5a46f3['push'](_0x5a46f3['shift']());}}}(a133_0x27f7,0xadfeb));const fs=require('fs'),logger=require(a133_0x249c0c(0x159))[a133_0x249c0c(0x16b)],TAG=a133_0x249c0c(0x17d);function a133_0x2e0f(_0xc7a25c,_0x403c80){const _0x27f793=a133_0x27f7();return a133_0x2e0f=function(_0x2e0f25,_0x1484d0){_0x2e0f25=_0x2e0f25-0x155;let _0x4cbd2c=_0x27f793[_0x2e0f25];return _0x4cbd2c;},a133_0x2e0f(_0xc7a25c,_0x403c80);}class FileHelper{constructor(_0x5d7266,_0x289c51,_0x1af442,_0x4a6af6){const _0x4afb76=a133_0x249c0c,_0x49a492={};_0x49a492[_0x4afb76(0x164)]=_0x4afb76(0x156),_0x49a492['knMcP']=_0x4afb76(0x18d);const _0x2b0e62=_0x49a492,_0x583cae=_0x2b0e62[_0x4afb76(0x164)]['split']('|');let _0x1a1a5c=0x0;while(!![]){switch(_0x583cae[_0x1a1a5c++]){case'0':this[_0x4afb76(0x188)]=_0x1af442;continue;case'1':this[_0x4afb76(0x177)]=_0x5d7266;continue;case'2':this[_0x4afb76(0x197)]=_0x4a6af6;continue;case'3':if(!fs[_0x4afb76(0x17b)](this[_0x4afb76(0x190)]))try{fs[_0x4afb76(0x15b)](this[_0x4afb76(0x190)],'{}',_0x2b0e62[_0x4afb76(0x184)]);}catch(_0x5ae944){logger[_0x4afb76(0x171)]('['+TAG+_0x4afb76(0x18c)+_0x5ae944[_0x4afb76(0x16d)]+'\x20'+_0x5ae944[_0x4afb76(0x196)]);}continue;case'4':this[_0x4afb76(0x190)]=_0x289c51;continue;}break;}}async[a133_0x249c0c(0x193)](){const _0x5c7296=a133_0x249c0c,_0x5c3880={};_0x5c3880[_0x5c7296(0x167)]=function(_0x4d1fb5,_0x4ac3d2){return _0x4d1fb5===_0x4ac3d2;},_0x5c3880[_0x5c7296(0x175)]=_0x5c7296(0x185);const _0x1b0036=_0x5c3880;let _0x3183f2;try{return _0x3183f2=fs[_0x5c7296(0x182)](this[_0x5c7296(0x188)],'wx'),_0x3183f2;}catch(_0x1fc23a){if(_0x1b0036['fBWCA'](_0x1fc23a[_0x5c7296(0x162)],_0x1b0036[_0x5c7296(0x175)]))return null;throw _0x1fc23a;}}async['releaseLock'](_0x258804){const _0x240f23=a133_0x249c0c;if(_0x258804)try{fs[_0x240f23(0x17e)](_0x258804),fs['unlinkSync'](this[_0x240f23(0x188)]);}catch(_0x1cd095){logger[_0x240f23(0x171)]('['+TAG+_0x240f23(0x16a)+_0x1cd095[_0x240f23(0x16d)]+'\x20'+_0x1cd095[_0x240f23(0x196)]);}}[a133_0x249c0c(0x15c)](){const _0x47ba7b=a133_0x249c0c,_0x7c017a={};_0x7c017a['EagOF']=_0x47ba7b(0x18d);const _0x3a7969=_0x7c017a;try{const _0x11e1aa=fs[_0x47ba7b(0x191)](this[_0x47ba7b(0x190)],_0x3a7969[_0x47ba7b(0x18f)]);return JSON['parse'](_0x11e1aa);}catch(_0x257974){return logger[_0x47ba7b(0x171)]('['+TAG+']\x20Error\x20reading\x20state\x20file:\x20'+_0x257974[_0x47ba7b(0x16d)]+'\x20'+_0x257974[_0x47ba7b(0x196)]),null;}}async[a133_0x249c0c(0x178)](_0x5ed577){const _0x3162f9=a133_0x249c0c,_0x20fd20={..._0x5ed577,'uniqueFailedTests':Array[_0x3162f9(0x163)](_0x5ed577[_0x3162f9(0x15f)])?_0x5ed577['uniqueFailedTests']:Array[_0x3162f9(0x173)](_0x5ed577[_0x3162f9(0x15f)]||[])};try{fs['writeFileSync'](this['stateFilePath'],JSON[_0x3162f9(0x189)](_0x20fd20,null,0x2));}catch(_0x3ddff7){logger[_0x3162f9(0x171)]('['+TAG+_0x3162f9(0x15a)+_0x3ddff7['message']+'\x20'+_0x3ddff7[_0x3162f9(0x196)]);throw _0x3ddff7;}}async[a133_0x249c0c(0x17f)](_0x595177,_0xd7594c){const _0x366949=a133_0x249c0c,_0x5cf707={};_0x5cf707[_0x366949(0x186)]=function(_0xf52d88,_0x2c6c02){return _0xf52d88!==_0x2c6c02;},_0x5cf707[_0x366949(0x170)]=_0x366949(0x155),_0x5cf707['nvdKF']=function(_0x4f66e7,_0x568d38){return _0x4f66e7===_0x568d38;},_0x5cf707['looxq']=_0x366949(0x16f);const _0x583dd4=_0x5cf707,_0x1497ce=await this['acquireLock']();if(!_0x1497ce)return logger[_0x366949(0x157)]('['+TAG+_0x366949(0x172)),{'newState':this[_0x366949(0x15c)]()||this[_0x366949(0x197)],'isNewFailure':![]};try{let _0x286fdc=this[_0x366949(0x15c)]();!_0x286fdc&&(_0x286fdc=JSON[_0x366949(0x194)](JSON['stringify'](this['defaultState'])));if(!_0x286fdc[_0x366949(0x15f)]||_0x583dd4[_0x366949(0x186)](typeof _0x286fdc['uniqueFailedTests'][Symbol[_0x366949(0x176)]],_0x583dd4[_0x366949(0x170)]))_0x286fdc['uniqueFailedTests']=new Set();else Array[_0x366949(0x163)](_0x286fdc[_0x366949(0x15f)])&&(_0x286fdc[_0x366949(0x15f)]=new Set(_0x286fdc[_0x366949(0x15f)]));_0x286fdc[_0x366949(0x17a)]=_0xd7594c;let _0x501f26=![];_0x583dd4[_0x366949(0x15d)](_0x595177[_0x366949(0x166)],_0x583dd4['looxq'])&&(_0x286fdc[_0x366949(0x179)]+=0x1,!_0x286fdc[_0x366949(0x15f)][_0x366949(0x165)](_0x595177['fullName'])&&(_0x286fdc[_0x366949(0x15f)][_0x366949(0x183)](_0x595177[_0x366949(0x168)]),_0x501f26=!![]));await this[_0x366949(0x178)](_0x286fdc);const _0x3624d5={};return _0x3624d5[_0x366949(0x195)]=_0x286fdc,_0x3624d5['isNewFailure']=_0x501f26,_0x3624d5;}finally{await this[_0x366949(0x161)](_0x1497ce);}}async[a133_0x249c0c(0x18e)](_0x34d823){const _0x1dded8=a133_0x249c0c,_0x49e866=await this[_0x1dded8(0x193)]();if(!_0x49e866)return logger[_0x1dded8(0x157)]('['+TAG+_0x1dded8(0x16e)),this['readState']()||this[_0x1dded8(0x197)];try{let _0x527d05=this['readState']();return!_0x527d05&&(_0x527d05=JSON[_0x1dded8(0x194)](JSON[_0x1dded8(0x189)](this[_0x1dded8(0x197)]))),_0x527d05[_0x1dded8(0x180)]=_0x34d823,await this[_0x1dded8(0x178)](_0x527d05),_0x527d05;}finally{await this['releaseLock'](_0x49e866);}}}module['exports']=FileHelper;