const a133_0x9479fa=a133_0x4661;(function(_0x2bc668,_0xdf7375){const _0x32444e=a133_0x4661,_0x904453=_0x2bc668();while(!![]){try{const _0x2772d4=parseInt(_0x32444e(0x207))/0x1+parseInt(_0x32444e(0x1e6))/0x2+parseInt(_0x32444e(0x1e9))/0x3*(parseInt(_0x32444e(0x1f9))/0x4)+parseInt(_0x32444e(0x20d))/0x5+parseInt(_0x32444e(0x1fb))/0x6*(-parseInt(_0x32444e(0x201))/0x7)+parseInt(_0x32444e(0x1f6))/0x8*(parseInt(_0x32444e(0x1ec))/0x9)+-parseInt(_0x32444e(0x1fa))/0xa;if(_0x2772d4===_0xdf7375)break;else _0x904453['push'](_0x904453['shift']());}catch(_0x5a5b55){_0x904453['push'](_0x904453['shift']());}}}(a133_0x8528,0xa10c1));function a133_0x4661(_0x3d988d,_0x407092){const _0x85285d=a133_0x8528();return a133_0x4661=function(_0x4661c7,_0x55b391){_0x4661c7=_0x4661c7-0x1dd;let _0x1c3219=_0x85285d[_0x4661c7];return _0x1c3219;},a133_0x4661(_0x3d988d,_0x407092);}const fs=require('fs'),logger=require('../logger')[a133_0x9479fa(0x204)],TAG=a133_0x9479fa(0x1df);class FileHelper{constructor(_0x23df9c,_0x2363b8,_0x44c720,_0x16904c){const _0x46fa3f=a133_0x9479fa,_0xa92b1d={};_0xa92b1d['apfWy']=_0x46fa3f(0x214),_0xa92b1d['XUylw']=_0x46fa3f(0x203);const _0x4c957a=_0xa92b1d,_0x1f509b=_0x4c957a[_0x46fa3f(0x205)]['split']('|');let _0x1a72b8=0x0;while(!![]){switch(_0x1f509b[_0x1a72b8++]){case'0':if(!fs[_0x46fa3f(0x217)](this[_0x46fa3f(0x202)]))try{fs[_0x46fa3f(0x1f1)](this[_0x46fa3f(0x202)],'{}',_0x4c957a['XUylw']);}catch(_0x57abc6){logger[_0x46fa3f(0x1ea)]('['+TAG+']\x20Error\x20creating\x20state\x20file:\x20'+_0x57abc6['message']+'\x20'+_0x57abc6['stack']);}continue;case'1':this[_0x46fa3f(0x202)]=_0x2363b8;continue;case'2':this[_0x46fa3f(0x20e)]=_0x44c720;continue;case'3':this[_0x46fa3f(0x215)]=_0x16904c;continue;case'4':this[_0x46fa3f(0x1e5)]=_0x23df9c;continue;}break;}}async['acquireLock'](){const _0x2e005a=a133_0x9479fa,_0x38a501={};_0x38a501[_0x2e005a(0x200)]=function(_0x162b7e,_0x375add){return _0x162b7e===_0x375add;},_0x38a501[_0x2e005a(0x1e1)]=_0x2e005a(0x208);const _0x2bb096=_0x38a501;let _0x1e5464;try{return _0x1e5464=fs['openSync'](this['lockFilePath'],'wx'),_0x1e5464;}catch(_0x108192){if(_0x2bb096[_0x2e005a(0x200)](_0x108192[_0x2e005a(0x1fd)],_0x2bb096[_0x2e005a(0x1e1)]))return null;throw _0x108192;}}async[a133_0x9479fa(0x1fe)](_0x1ae9ef){const _0x481fc9=a133_0x9479fa;if(_0x1ae9ef)try{fs[_0x481fc9(0x1f7)](_0x1ae9ef),fs[_0x481fc9(0x20c)](this[_0x481fc9(0x20e)]);}catch(_0x182880){logger[_0x481fc9(0x1ea)]('['+TAG+']\x20Error\x20releasing\x20lock:\x20'+_0x182880[_0x481fc9(0x1de)]+'\x20'+_0x182880[_0x481fc9(0x1e7)]);}}[a133_0x9479fa(0x1e2)](){const _0x4efc9c=a133_0x9479fa,_0x5bd3c9={};_0x5bd3c9[_0x4efc9c(0x1e0)]='utf8';const _0x1a7c19=_0x5bd3c9;try{const _0xe083ae=fs['readFileSync'](this[_0x4efc9c(0x202)],_0x1a7c19['AnHUc']);return JSON[_0x4efc9c(0x212)](_0xe083ae);}catch(_0x492706){return logger[_0x4efc9c(0x1ea)]('['+TAG+_0x4efc9c(0x1f4)+_0x492706[_0x4efc9c(0x1de)]+'\x20'+_0x492706['stack']),null;}}async[a133_0x9479fa(0x1eb)](_0x70e3cd){const _0x2eee41=a133_0x9479fa,_0x68697f={..._0x70e3cd,'uniqueFailedTests':Array['isArray'](_0x70e3cd['uniqueFailedTests'])?_0x70e3cd[_0x2eee41(0x1f2)]:Array[_0x2eee41(0x20b)](_0x70e3cd[_0x2eee41(0x1f2)]||[])};try{fs[_0x2eee41(0x1f1)](this['stateFilePath'],JSON['stringify'](_0x68697f,null,0x2));}catch(_0x3ab0ce){logger[_0x2eee41(0x1ea)]('['+TAG+_0x2eee41(0x20f)+_0x3ab0ce[_0x2eee41(0x1de)]+'\x20'+_0x3ab0ce[_0x2eee41(0x1e7)]);throw _0x3ab0ce;}}async[a133_0x9479fa(0x1dd)](_0x3509a2,_0x5cc9b9){const _0x5ed510=a133_0x9479fa,_0x3a8e4d={};_0x3a8e4d[_0x5ed510(0x213)]=function(_0x5bd393,_0x2afbaa){return _0x5bd393!==_0x2afbaa;},_0x3a8e4d['EDvyC']=_0x5ed510(0x216),_0x3a8e4d[_0x5ed510(0x1fc)]=function(_0x5bcad3,_0x3f7c6d){return _0x5bcad3===_0x3f7c6d;},_0x3a8e4d[_0x5ed510(0x1f3)]=_0x5ed510(0x211);const _0x474ca3=_0x3a8e4d,_0x2f474c=await this['acquireLock']();if(!_0x2f474c)return logger[_0x5ed510(0x206)]('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.'),{'newState':this[_0x5ed510(0x1e2)]()||this['defaultState'],'isNewFailure':![]};try{let _0x5814b9=this[_0x5ed510(0x1e2)]();!_0x5814b9&&(_0x5814b9=JSON[_0x5ed510(0x212)](JSON['stringify'](this[_0x5ed510(0x215)])));if(!_0x5814b9[_0x5ed510(0x1f2)]||_0x474ca3[_0x5ed510(0x213)](typeof _0x5814b9[_0x5ed510(0x1f2)][Symbol[_0x5ed510(0x1e8)]],_0x474ca3[_0x5ed510(0x1ee)]))_0x5814b9[_0x5ed510(0x1f2)]=new Set();else Array[_0x5ed510(0x209)](_0x5814b9[_0x5ed510(0x1f2)])&&(_0x5814b9[_0x5ed510(0x1f2)]=new Set(_0x5814b9['uniqueFailedTests']));_0x5814b9['totalTests']=_0x5cc9b9;let _0x1a5b65=![];_0x474ca3[_0x5ed510(0x1fc)](_0x3509a2[_0x5ed510(0x20a)],_0x474ca3[_0x5ed510(0x1f3)])&&(_0x5814b9[_0x5ed510(0x1ed)]+=0x1,!_0x5814b9[_0x5ed510(0x1f2)]['has'](_0x3509a2[_0x5ed510(0x210)])&&(_0x5814b9[_0x5ed510(0x1f2)][_0x5ed510(0x1f0)](_0x3509a2['fullName']),_0x1a5b65=!![]));await this[_0x5ed510(0x1eb)](_0x5814b9);const _0x36bb82={};return _0x36bb82['newState']=_0x5814b9,_0x36bb82[_0x5ed510(0x1e4)]=_0x1a5b65,_0x36bb82;}finally{await this[_0x5ed510(0x1fe)](_0x2f474c);}}async[a133_0x9479fa(0x1e3)](_0x330a42){const _0x3aed54=a133_0x9479fa,_0x4b4407=await this[_0x3aed54(0x1ef)]();if(!_0x4b4407)return logger['warn']('['+TAG+_0x3aed54(0x1ff)),this[_0x3aed54(0x1e2)]()||this[_0x3aed54(0x215)];try{let _0x23cf66=this[_0x3aed54(0x1e2)]();return!_0x23cf66&&(_0x23cf66=JSON['parse'](JSON['stringify'](this[_0x3aed54(0x215)]))),_0x23cf66[_0x3aed54(0x1f5)]=_0x330a42,await this[_0x3aed54(0x1eb)](_0x23cf66),_0x23cf66;}finally{await this[_0x3aed54(0x1fe)](_0x4b4407);}}}module[a133_0x9479fa(0x1f8)]=FileHelper;function a133_0x8528(){const _0x55130a=['stack','iterator','7863isRgoB','error','writeState','161613RITsdI','failedTests','EDvyC','acquireLock','add','writeFileSync','uniqueFailedTests','eklup',']\x20Error\x20reading\x20state\x20file:\x20','lastAPIFailedCount','312bLmywd','closeSync','exports','284bNDlgA','23863860QQlAra','466476dXMSiq','noddz','code','releaseLock',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','dadwe','56bLUkbt','stateFilePath','utf8','winstonLogger','apfWy','warn','1310910aekHRH','EEXIST','isArray','status','from','unlinkSync','4404780UzxxmI','lockFilePath',']\x20Error\x20writing\x20state\x20file:\x20','fullName','failed','parse','yZdez','4|1|2|3|0','defaultState','function','existsSync','recordTestResult','message','FailFastFileHelper','AnHUc','CrzzX','readState','updateAPIFailedCount','isNewFailure','failFastConfig','1179446CMZpXB'];a133_0x8528=function(){return _0x55130a;};return a133_0x8528();}