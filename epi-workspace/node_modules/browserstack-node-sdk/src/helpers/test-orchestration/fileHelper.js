function a133_0x3394(_0x1dbbc9,_0x2db2c6){const _0x1174e1=a133_0x1174();return a133_0x3394=function(_0x339456,_0x53bdd0){_0x339456=_0x339456-0x17c;let _0x286efb=_0x1174e1[_0x339456];return _0x286efb;},a133_0x3394(_0x1dbbc9,_0x2db2c6);}const a133_0x429c82=a133_0x3394;function a133_0x1174(){const _0x57ff1c=['2|3|4|0|1','newState','21yrZSsC','fullName','67172rzUXAe','5193848LZngCr','stack','lastAPIFailedCount','readState','ojWNB','utf8','status','warn','failFastConfig','writeFileSync','qISQM','from',']\x20Error\x20reading\x20state\x20file:\x20','isNewFailure','unlinkSync','defaultState','acquireLock','LmJac','198992jPyuSf','EEXIST',']\x20Error\x20creating\x20state\x20file:\x20','DvGAd','2320iwGeFB','371490AXUrtT','SbCgU','recordTestResult','code','LzPiU','NxltO','failed','message','parse','12LnyUsD','has','950550hosbRZ','function','totalTests','IldeB','releaseLock','uniqueFailedTests',']\x20Error\x20releasing\x20lock:\x20','126KmCOOV','isArray','existsSync','382RTsuKE','lockFilePath','closeSync','writeState','../logger','stateFilePath','3430380RqZAHT','IZWRR','stringify','error'];a133_0x1174=function(){return _0x57ff1c;};return a133_0x1174();}(function(_0x17822f,_0x480755){const _0x906eee=a133_0x3394,_0x303b54=_0x17822f();while(!![]){try{const _0x43d3b4=-parseInt(_0x906eee(0x17f))/0x1*(parseInt(_0x906eee(0x1a4))/0x2)+parseInt(_0x906eee(0x18b))/0x3*(-parseInt(_0x906eee(0x18d))/0x4)+parseInt(_0x906eee(0x1b0))/0x5*(-parseInt(_0x906eee(0x1ae))/0x6)+parseInt(_0x906eee(0x1a5))/0x7+parseInt(_0x906eee(0x1a0))/0x8*(parseInt(_0x906eee(0x17c))/0x9)+parseInt(_0x906eee(0x185))/0xa+parseInt(_0x906eee(0x18e))/0xb;if(_0x43d3b4===_0x480755)break;else _0x303b54['push'](_0x303b54['shift']());}catch(_0x16d151){_0x303b54['push'](_0x303b54['shift']());}}}(a133_0x1174,0x434a5));const fs=require('fs'),logger=require(a133_0x429c82(0x183))['winstonLogger'],TAG='FailFastFileHelper';class FileHelper{constructor(_0x4fed9a,_0x4620e5,_0x52adf6,_0x143e8f){const _0x533543=a133_0x429c82,_0x495c9b={};_0x495c9b[_0x533543(0x198)]=_0x533543(0x189),_0x495c9b[_0x533543(0x186)]=_0x533543(0x193);const _0x4e1f5e=_0x495c9b,_0x317153=_0x4e1f5e[_0x533543(0x198)]['split']('|');let _0x4e448b=0x0;while(!![]){switch(_0x317153[_0x4e448b++]){case'0':this[_0x533543(0x19d)]=_0x143e8f;continue;case'1':if(!fs[_0x533543(0x17e)](this[_0x533543(0x184)]))try{fs[_0x533543(0x197)](this[_0x533543(0x184)],'{}',_0x4e1f5e[_0x533543(0x186)]);}catch(_0x5c2852){logger[_0x533543(0x188)]('['+TAG+_0x533543(0x1a2)+_0x5c2852[_0x533543(0x1ac)]+'\x20'+_0x5c2852['stack']);}continue;case'2':this[_0x533543(0x196)]=_0x4fed9a;continue;case'3':this['stateFilePath']=_0x4620e5;continue;case'4':this['lockFilePath']=_0x52adf6;continue;}break;}}async[a133_0x429c82(0x19e)](){const _0x248104=a133_0x429c82,_0x45614b={};_0x45614b[_0x248104(0x1b3)]=function(_0x4fd3e5,_0x4db960){return _0x4fd3e5===_0x4db960;},_0x45614b[_0x248104(0x192)]=_0x248104(0x1a1);const _0x2aed4a=_0x45614b;let _0x274389;try{return _0x274389=fs['openSync'](this['lockFilePath'],'wx'),_0x274389;}catch(_0x3bcfc6){if(_0x2aed4a['IldeB'](_0x3bcfc6[_0x248104(0x1a8)],_0x2aed4a[_0x248104(0x192)]))return null;throw _0x3bcfc6;}}async['releaseLock'](_0x3f280){const _0x5c734e=a133_0x429c82;if(_0x3f280)try{fs[_0x5c734e(0x181)](_0x3f280),fs[_0x5c734e(0x19c)](this[_0x5c734e(0x180)]);}catch(_0x177df0){logger[_0x5c734e(0x188)]('['+TAG+_0x5c734e(0x1b6)+_0x177df0[_0x5c734e(0x1ac)]+'\x20'+_0x177df0['stack']);}}[a133_0x429c82(0x191)](){const _0x2897b7=a133_0x429c82,_0x525ea1={};_0x525ea1[_0x2897b7(0x1aa)]=_0x2897b7(0x193);const _0x1846dd=_0x525ea1;try{const _0x328e8e=fs['readFileSync'](this[_0x2897b7(0x184)],_0x1846dd[_0x2897b7(0x1aa)]);return JSON[_0x2897b7(0x1ad)](_0x328e8e);}catch(_0x256d8d){return logger[_0x2897b7(0x188)]('['+TAG+_0x2897b7(0x19a)+_0x256d8d[_0x2897b7(0x1ac)]+'\x20'+_0x256d8d[_0x2897b7(0x18f)]),null;}}async[a133_0x429c82(0x182)](_0x2d21e5){const _0x54a79f=a133_0x429c82,_0x492e16={..._0x2d21e5,'uniqueFailedTests':Array[_0x54a79f(0x17d)](_0x2d21e5[_0x54a79f(0x1b5)])?_0x2d21e5[_0x54a79f(0x1b5)]:Array[_0x54a79f(0x199)](_0x2d21e5[_0x54a79f(0x1b5)]||[])};try{fs['writeFileSync'](this[_0x54a79f(0x184)],JSON[_0x54a79f(0x187)](_0x492e16,null,0x2));}catch(_0x4a3730){logger[_0x54a79f(0x188)]('['+TAG+']\x20Error\x20writing\x20state\x20file:\x20'+_0x4a3730[_0x54a79f(0x1ac)]+'\x20'+_0x4a3730['stack']);throw _0x4a3730;}}async[a133_0x429c82(0x1a7)](_0x19fb57,_0x40f4d6){const _0x15f1ec=a133_0x429c82,_0x5796f5={};_0x5796f5[_0x15f1ec(0x1a3)]=function(_0x1c12da,_0x51ee54){return _0x1c12da!==_0x51ee54;},_0x5796f5[_0x15f1ec(0x1a9)]=_0x15f1ec(0x1b1),_0x5796f5[_0x15f1ec(0x19f)]=function(_0x5efc2d,_0x14fad9){return _0x5efc2d===_0x14fad9;},_0x5796f5[_0x15f1ec(0x1a6)]=_0x15f1ec(0x1ab);const _0x5ca55f=_0x5796f5,_0xf0ecb7=await this[_0x15f1ec(0x19e)]();if(!_0xf0ecb7)return logger[_0x15f1ec(0x195)]('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.'),{'newState':this[_0x15f1ec(0x191)]()||this[_0x15f1ec(0x19d)],'isNewFailure':![]};try{let _0x5881aa=this[_0x15f1ec(0x191)]();!_0x5881aa&&(_0x5881aa=JSON[_0x15f1ec(0x1ad)](JSON[_0x15f1ec(0x187)](this[_0x15f1ec(0x19d)])));if(!_0x5881aa[_0x15f1ec(0x1b5)]||_0x5ca55f['DvGAd'](typeof _0x5881aa[_0x15f1ec(0x1b5)][Symbol['iterator']],_0x5ca55f[_0x15f1ec(0x1a9)]))_0x5881aa[_0x15f1ec(0x1b5)]=new Set();else Array['isArray'](_0x5881aa[_0x15f1ec(0x1b5)])&&(_0x5881aa['uniqueFailedTests']=new Set(_0x5881aa[_0x15f1ec(0x1b5)]));_0x5881aa[_0x15f1ec(0x1b2)]=_0x40f4d6;let _0x2b4547=![];_0x5ca55f[_0x15f1ec(0x19f)](_0x19fb57[_0x15f1ec(0x194)],_0x5ca55f[_0x15f1ec(0x1a6)])&&(_0x5881aa['failedTests']+=0x1,!_0x5881aa['uniqueFailedTests'][_0x15f1ec(0x1af)](_0x19fb57[_0x15f1ec(0x18c)])&&(_0x5881aa[_0x15f1ec(0x1b5)]['add'](_0x19fb57[_0x15f1ec(0x18c)]),_0x2b4547=!![]));await this[_0x15f1ec(0x182)](_0x5881aa);const _0x149228={};return _0x149228[_0x15f1ec(0x18a)]=_0x5881aa,_0x149228[_0x15f1ec(0x19b)]=_0x2b4547,_0x149228;}finally{await this[_0x15f1ec(0x1b4)](_0xf0ecb7);}}async['updateAPIFailedCount'](_0x316697){const _0x4bf08c=a133_0x429c82,_0x3bb8d5=await this[_0x4bf08c(0x19e)]();if(!_0x3bb8d5)return logger[_0x4bf08c(0x195)]('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.'),this[_0x4bf08c(0x191)]()||this['defaultState'];try{let _0x5e6fb9=this[_0x4bf08c(0x191)]();return!_0x5e6fb9&&(_0x5e6fb9=JSON[_0x4bf08c(0x1ad)](JSON['stringify'](this[_0x4bf08c(0x19d)]))),_0x5e6fb9[_0x4bf08c(0x190)]=_0x316697,await this[_0x4bf08c(0x182)](_0x5e6fb9),_0x5e6fb9;}finally{await this[_0x4bf08c(0x1b4)](_0x3bb8d5);}}}module['exports']=FileHelper;