const a128_0x28eb96=a128_0x2a3b;(function(_0x4f8b44,_0x40465b){const _0x2ad78c=a128_0x2a3b,_0x215fde=_0x4f8b44();while(!![]){try{const _0x34a020=parseInt(_0x2ad78c(0x11e))/0x1*(parseInt(_0x2ad78c(0x12c))/0x2)+-parseInt(_0x2ad78c(0xf1))/0x3+-parseInt(_0x2ad78c(0xfb))/0x4*(-parseInt(_0x2ad78c(0x11b))/0x5)+parseInt(_0x2ad78c(0x107))/0x6+-parseInt(_0x2ad78c(0xff))/0x7+-parseInt(_0x2ad78c(0x113))/0x8+-parseInt(_0x2ad78c(0x116))/0x9;if(_0x34a020===_0x40465b)break;else _0x215fde['push'](_0x215fde['shift']());}catch(_0x10fbb8){_0x215fde['push'](_0x215fde['shift']());}}}(a128_0x3ac3,0xce18a));function a128_0x3ac3(){const _0x37ebfa=['newState','parse','7468895rqMKrH',']\x20Error\x20reading\x20state\x20file:\x20','recordTestResult','stateFilePath','openSync','stack','unlinkSync','hdOMr','4452252gvQCQX','existsSync','defaultState','aeJfc','WKZUm',']\x20Error\x20releasing\x20lock:\x20','acquireLock','releaseLock','warn','from','updateAPIFailedCount','FHsEj','2690648XZSQdp','add','lastAPIFailedCount','432603XlJDjV','uniqueFailedTests',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','failFastConfig','3|4|1|2|0','199905YPnmYJ','failedTests','has','13uDWZhB','FailFastFileHelper','split','stringify','PNXaG','function','isNewFailure','tlqaB','fullName','status','iterator','totalTests','message',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','182678iWnqhp','EEXIST','utf8','Kbbsy','3339579YwSUio','error','writeState','readState',']\x20Error\x20writing\x20state\x20file:\x20','isArray','gngPY','zAkoP','winstonLogger','writeFileSync','148JIlgEb','../logger'];a128_0x3ac3=function(){return _0x37ebfa;};return a128_0x3ac3();}const fs=require('fs'),logger=require(a128_0x28eb96(0xfc))[a128_0x28eb96(0xf9)],TAG=a128_0x28eb96(0x11f);function a128_0x2a3b(_0x7b64ed,_0x49e6af){const _0x3ac35b=a128_0x3ac3();return a128_0x2a3b=function(_0x2a3b27,_0x937e5a){_0x2a3b27=_0x2a3b27-0xf0;let _0x3feaa7=_0x3ac35b[_0x2a3b27];return _0x3feaa7;},a128_0x2a3b(_0x7b64ed,_0x49e6af);}class FileHelper{constructor(_0x5a3e5a,_0x5968fb,_0x463560,_0xb37dce){const _0x1a83d3=a128_0x28eb96,_0x451a0d={};_0x451a0d[_0x1a83d3(0x112)]=_0x1a83d3(0x11a),_0x451a0d['WKZUm']=_0x1a83d3(0x12e);const _0x203a34=_0x451a0d,_0x370c5d=_0x203a34[_0x1a83d3(0x112)][_0x1a83d3(0x120)]('|');let _0x1d43a2=0x0;while(!![]){switch(_0x370c5d[_0x1d43a2++]){case'0':if(!fs[_0x1a83d3(0x108)](this['stateFilePath']))try{fs[_0x1a83d3(0xfa)](this[_0x1a83d3(0x102)],'{}',_0x203a34[_0x1a83d3(0x10b)]);}catch(_0x4a62af){logger[_0x1a83d3(0xf2)]('['+TAG+']\x20Error\x20creating\x20state\x20file:\x20'+_0x4a62af['message']+'\x20'+_0x4a62af[_0x1a83d3(0x104)]);}continue;case'1':this['lockFilePath']=_0x463560;continue;case'2':this[_0x1a83d3(0x109)]=_0xb37dce;continue;case'3':this[_0x1a83d3(0x119)]=_0x5a3e5a;continue;case'4':this['stateFilePath']=_0x5968fb;continue;}break;}}async[a128_0x28eb96(0x10d)](){const _0x54b4f9=a128_0x28eb96,_0x51b8b0={};_0x51b8b0[_0x54b4f9(0x122)]=function(_0xd2363d,_0x5e48df){return _0xd2363d===_0x5e48df;},_0x51b8b0[_0x54b4f9(0xf8)]=_0x54b4f9(0x12d);const _0x19b560=_0x51b8b0;let _0x3770f2;try{return _0x3770f2=fs[_0x54b4f9(0x103)](this['lockFilePath'],'wx'),_0x3770f2;}catch(_0x1836e2){if(_0x19b560[_0x54b4f9(0x122)](_0x1836e2['code'],_0x19b560[_0x54b4f9(0xf8)]))return null;throw _0x1836e2;}}async[a128_0x28eb96(0x10e)](_0x5d7934){const _0x2a7b56=a128_0x28eb96;if(_0x5d7934)try{fs['closeSync'](_0x5d7934),fs[_0x2a7b56(0x105)](this['lockFilePath']);}catch(_0x542e95){logger[_0x2a7b56(0xf2)]('['+TAG+_0x2a7b56(0x10c)+_0x542e95[_0x2a7b56(0x12a)]+'\x20'+_0x542e95['stack']);}}[a128_0x28eb96(0xf4)](){const _0x5878f3=a128_0x28eb96,_0x78786e={};_0x78786e[_0x5878f3(0xf7)]=_0x5878f3(0x12e);const _0x420743=_0x78786e;try{const _0x1149fe=fs['readFileSync'](this[_0x5878f3(0x102)],_0x420743[_0x5878f3(0xf7)]);return JSON['parse'](_0x1149fe);}catch(_0x433b81){return logger[_0x5878f3(0xf2)]('['+TAG+_0x5878f3(0x100)+_0x433b81[_0x5878f3(0x12a)]+'\x20'+_0x433b81['stack']),null;}}async[a128_0x28eb96(0xf3)](_0x430383){const _0x5a996b=a128_0x28eb96,_0x26e487={..._0x430383,'uniqueFailedTests':Array['isArray'](_0x430383['uniqueFailedTests'])?_0x430383['uniqueFailedTests']:Array[_0x5a996b(0x110)](_0x430383[_0x5a996b(0x117)]||[])};try{fs[_0x5a996b(0xfa)](this[_0x5a996b(0x102)],JSON[_0x5a996b(0x121)](_0x26e487,null,0x2));}catch(_0x206aa9){logger['error']('['+TAG+_0x5a996b(0xf5)+_0x206aa9[_0x5a996b(0x12a)]+'\x20'+_0x206aa9[_0x5a996b(0x104)]);throw _0x206aa9;}}async[a128_0x28eb96(0x101)](_0x204c56,_0x1d13d2){const _0xd18cd9=a128_0x28eb96,_0x5c4f51={};_0x5c4f51[_0xd18cd9(0x106)]=function(_0x27f52a,_0x6f0848){return _0x27f52a!==_0x6f0848;},_0x5c4f51[_0xd18cd9(0x10a)]=_0xd18cd9(0x123),_0x5c4f51[_0xd18cd9(0xf0)]=function(_0x5a8015,_0xa239c0){return _0x5a8015===_0xa239c0;},_0x5c4f51[_0xd18cd9(0x125)]='failed';const _0x9ec148=_0x5c4f51,_0xb297f8=await this['acquireLock']();if(!_0xb297f8)return logger[_0xd18cd9(0x10f)]('['+TAG+_0xd18cd9(0x12b)),{'newState':this[_0xd18cd9(0xf4)]()||this[_0xd18cd9(0x109)],'isNewFailure':![]};try{let _0x2a6cfd=this['readState']();!_0x2a6cfd&&(_0x2a6cfd=JSON[_0xd18cd9(0xfe)](JSON[_0xd18cd9(0x121)](this[_0xd18cd9(0x109)])));if(!_0x2a6cfd['uniqueFailedTests']||_0x9ec148['hdOMr'](typeof _0x2a6cfd['uniqueFailedTests'][Symbol[_0xd18cd9(0x128)]],_0x9ec148[_0xd18cd9(0x10a)]))_0x2a6cfd[_0xd18cd9(0x117)]=new Set();else Array[_0xd18cd9(0xf6)](_0x2a6cfd[_0xd18cd9(0x117)])&&(_0x2a6cfd[_0xd18cd9(0x117)]=new Set(_0x2a6cfd['uniqueFailedTests']));_0x2a6cfd[_0xd18cd9(0x129)]=_0x1d13d2;let _0x467bce=![];_0x9ec148[_0xd18cd9(0xf0)](_0x204c56[_0xd18cd9(0x127)],_0x9ec148['tlqaB'])&&(_0x2a6cfd[_0xd18cd9(0x11c)]+=0x1,!_0x2a6cfd[_0xd18cd9(0x117)][_0xd18cd9(0x11d)](_0x204c56['fullName'])&&(_0x2a6cfd['uniqueFailedTests'][_0xd18cd9(0x114)](_0x204c56[_0xd18cd9(0x126)]),_0x467bce=!![]));await this[_0xd18cd9(0xf3)](_0x2a6cfd);const _0x37afdf={};return _0x37afdf[_0xd18cd9(0xfd)]=_0x2a6cfd,_0x37afdf[_0xd18cd9(0x124)]=_0x467bce,_0x37afdf;}finally{await this[_0xd18cd9(0x10e)](_0xb297f8);}}async[a128_0x28eb96(0x111)](_0xdd3925){const _0xee2420=a128_0x28eb96,_0x223320=await this[_0xee2420(0x10d)]();if(!_0x223320)return logger[_0xee2420(0x10f)]('['+TAG+_0xee2420(0x118)),this['readState']()||this[_0xee2420(0x109)];try{let _0x1b64d2=this[_0xee2420(0xf4)]();return!_0x1b64d2&&(_0x1b64d2=JSON['parse'](JSON[_0xee2420(0x121)](this[_0xee2420(0x109)]))),_0x1b64d2[_0xee2420(0x115)]=_0xdd3925,await this[_0xee2420(0xf3)](_0x1b64d2),_0x1b64d2;}finally{await this[_0xee2420(0x10e)](_0x223320);}}}module['exports']=FileHelper;