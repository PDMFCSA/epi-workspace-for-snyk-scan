const a133_0x4bb0f7=a133_0x15c3;function a133_0x5493(){const _0x4946af=['zileM','uxhJG','isArray','1908292tbfqWl','recordTestResult','lastAPIFailedCount',']\x20Error\x20writing\x20state\x20file:\x20',']\x20Error\x20reading\x20state\x20file:\x20','lockFilePath','fullName',']\x20Error\x20releasing\x20lock:\x20','message','uniqueFailedTests','5TXFJrr','readFileSync','utf8','winstonLogger','existsSync','stateFilePath','8690409tZzXPF','add','acquireLock','../logger','8694lojwjz','code','split','error','writeState','failed','ZYETq','iterator','function','totalTests','newState','nFJMd',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','unlinkSync','updateAPIFailedCount','PlOtP','writeFileSync','mFcXm','stringify','isNewFailure','88IPMaCA','749610eQptlO','22WxJUgV','6412092rnMryu','123CDlYZF','147051SYrGto','parse','JWwYT','AgpxH',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','stack','FailFastFileHelper','warn','46104WrGpyx','closeSync','failFastConfig',']\x20Error\x20creating\x20state\x20file:\x20','readState','openSync','pvZQj','defaultState'];a133_0x5493=function(){return _0x4946af;};return a133_0x5493();}(function(_0x33d576,_0x6b7f47){const _0x52f5ad=a133_0x15c3,_0x5c509f=_0x33d576();while(!![]){try{const _0x1ea328=parseInt(_0x52f5ad(0x126))/0x1+-parseInt(_0x52f5ad(0x145))/0x2*(-parseInt(_0x52f5ad(0x11d))/0x3)+parseInt(_0x52f5ad(0x131))/0x4*(parseInt(_0x52f5ad(0x13b))/0x5)+-parseInt(_0x52f5ad(0x11c))/0x6+parseInt(_0x52f5ad(0x141))/0x7+-parseInt(_0x52f5ad(0x119))/0x8*(parseInt(_0x52f5ad(0x11e))/0x9)+parseInt(_0x52f5ad(0x11a))/0xa*(parseInt(_0x52f5ad(0x11b))/0xb);if(_0x1ea328===_0x6b7f47)break;else _0x5c509f['push'](_0x5c509f['shift']());}catch(_0x3c78d9){_0x5c509f['push'](_0x5c509f['shift']());}}}(a133_0x5493,0xce272));const fs=require('fs'),logger=require(a133_0x4bb0f7(0x144))[a133_0x4bb0f7(0x13e)],TAG=a133_0x4bb0f7(0x124);class FileHelper{constructor(_0x538fa8,_0x3195a9,_0x2136a6,_0x105d1b){const _0x56126f=a133_0x4bb0f7,_0x10e4a7={};_0x10e4a7[_0x56126f(0x12e)]='3|1|2|0|4',_0x10e4a7['nFJMd']=_0x56126f(0x13d);const _0xb69960=_0x10e4a7,_0x100224=_0xb69960[_0x56126f(0x12e)][_0x56126f(0x147)]('|');let _0x109935=0x0;while(!![]){switch(_0x100224[_0x109935++]){case'0':this[_0x56126f(0x12d)]=_0x105d1b;continue;case'1':this['stateFilePath']=_0x3195a9;continue;case'2':this[_0x56126f(0x136)]=_0x2136a6;continue;case'3':this[_0x56126f(0x128)]=_0x538fa8;continue;case'4':if(!fs[_0x56126f(0x13f)](this[_0x56126f(0x140)]))try{fs[_0x56126f(0x155)](this[_0x56126f(0x140)],'{}',_0xb69960[_0x56126f(0x150)]);}catch(_0x2c3015){logger[_0x56126f(0x148)]('['+TAG+_0x56126f(0x129)+_0x2c3015[_0x56126f(0x139)]+'\x20'+_0x2c3015[_0x56126f(0x123)]);}continue;}break;}}async[a133_0x4bb0f7(0x143)](){const _0x234260=a133_0x4bb0f7,_0xe3e47={};_0xe3e47[_0x234260(0x14b)]=function(_0x4be950,_0x1cf4ee){return _0x4be950===_0x1cf4ee;},_0xe3e47[_0x234260(0x156)]='EEXIST';const _0x2dd318=_0xe3e47;let _0x34cd12;try{return _0x34cd12=fs[_0x234260(0x12b)](this[_0x234260(0x136)],'wx'),_0x34cd12;}catch(_0x1ca20e){if(_0x2dd318[_0x234260(0x14b)](_0x1ca20e[_0x234260(0x146)],_0x2dd318['mFcXm']))return null;throw _0x1ca20e;}}async['releaseLock'](_0x535333){const _0x578269=a133_0x4bb0f7;if(_0x535333)try{fs[_0x578269(0x127)](_0x535333),fs[_0x578269(0x152)](this[_0x578269(0x136)]);}catch(_0x3579a3){logger['error']('['+TAG+_0x578269(0x138)+_0x3579a3['message']+'\x20'+_0x3579a3[_0x578269(0x123)]);}}[a133_0x4bb0f7(0x12a)](){const _0x1bca43=a133_0x4bb0f7,_0x3ec386={};_0x3ec386['JWwYT']=_0x1bca43(0x13d);const _0x5c1744=_0x3ec386;try{const _0x227028=fs[_0x1bca43(0x13c)](this[_0x1bca43(0x140)],_0x5c1744[_0x1bca43(0x120)]);return JSON['parse'](_0x227028);}catch(_0x4cb79e){return logger[_0x1bca43(0x148)]('['+TAG+_0x1bca43(0x135)+_0x4cb79e[_0x1bca43(0x139)]+'\x20'+_0x4cb79e[_0x1bca43(0x123)]),null;}}async[a133_0x4bb0f7(0x149)](_0x55d388){const _0x3b16d8=a133_0x4bb0f7,_0x78eb12={..._0x55d388,'uniqueFailedTests':Array[_0x3b16d8(0x130)](_0x55d388['uniqueFailedTests'])?_0x55d388[_0x3b16d8(0x13a)]:Array['from'](_0x55d388['uniqueFailedTests']||[])};try{fs['writeFileSync'](this[_0x3b16d8(0x140)],JSON[_0x3b16d8(0x157)](_0x78eb12,null,0x2));}catch(_0x1934db){logger[_0x3b16d8(0x148)]('['+TAG+_0x3b16d8(0x134)+_0x1934db[_0x3b16d8(0x139)]+'\x20'+_0x1934db[_0x3b16d8(0x123)]);throw _0x1934db;}}async[a133_0x4bb0f7(0x132)](_0x117623,_0x4a1523){const _0x611521=a133_0x4bb0f7,_0x130711={};_0x130711[_0x611521(0x154)]=function(_0x110b29,_0x4505c8){return _0x110b29!==_0x4505c8;},_0x130711[_0x611521(0x12c)]=_0x611521(0x14d),_0x130711['uxhJG']=function(_0x1a8b8e,_0x45aada){return _0x1a8b8e===_0x45aada;},_0x130711['AgpxH']=_0x611521(0x14a);const _0x42e3ef=_0x130711,_0x4d579b=await this[_0x611521(0x143)]();if(!_0x4d579b)return logger[_0x611521(0x125)]('['+TAG+_0x611521(0x151)),{'newState':this['readState']()||this[_0x611521(0x12d)],'isNewFailure':![]};try{let _0x210cb8=this[_0x611521(0x12a)]();!_0x210cb8&&(_0x210cb8=JSON[_0x611521(0x11f)](JSON[_0x611521(0x157)](this[_0x611521(0x12d)])));if(!_0x210cb8[_0x611521(0x13a)]||_0x42e3ef[_0x611521(0x154)](typeof _0x210cb8[_0x611521(0x13a)][Symbol[_0x611521(0x14c)]],_0x42e3ef[_0x611521(0x12c)]))_0x210cb8[_0x611521(0x13a)]=new Set();else Array[_0x611521(0x130)](_0x210cb8[_0x611521(0x13a)])&&(_0x210cb8[_0x611521(0x13a)]=new Set(_0x210cb8[_0x611521(0x13a)]));_0x210cb8[_0x611521(0x14e)]=_0x4a1523;let _0x858f4e=![];_0x42e3ef[_0x611521(0x12f)](_0x117623['status'],_0x42e3ef[_0x611521(0x121)])&&(_0x210cb8['failedTests']+=0x1,!_0x210cb8['uniqueFailedTests']['has'](_0x117623[_0x611521(0x137)])&&(_0x210cb8['uniqueFailedTests'][_0x611521(0x142)](_0x117623[_0x611521(0x137)]),_0x858f4e=!![]));await this[_0x611521(0x149)](_0x210cb8);const _0x1575a0={};return _0x1575a0[_0x611521(0x14f)]=_0x210cb8,_0x1575a0[_0x611521(0x158)]=_0x858f4e,_0x1575a0;}finally{await this['releaseLock'](_0x4d579b);}}async[a133_0x4bb0f7(0x153)](_0x39b04a){const _0x4031b1=a133_0x4bb0f7,_0x4b8f08=await this['acquireLock']();if(!_0x4b8f08)return logger[_0x4031b1(0x125)]('['+TAG+_0x4031b1(0x122)),this[_0x4031b1(0x12a)]()||this[_0x4031b1(0x12d)];try{let _0x48e295=this[_0x4031b1(0x12a)]();return!_0x48e295&&(_0x48e295=JSON[_0x4031b1(0x11f)](JSON[_0x4031b1(0x157)](this[_0x4031b1(0x12d)]))),_0x48e295[_0x4031b1(0x133)]=_0x39b04a,await this[_0x4031b1(0x149)](_0x48e295),_0x48e295;}finally{await this['releaseLock'](_0x4b8f08);}}}function a133_0x15c3(_0x3e1c7e,_0x2be7fc){const _0x549365=a133_0x5493();return a133_0x15c3=function(_0x15c3aa,_0x5bf5e5){_0x15c3aa=_0x15c3aa-0x119;let _0x5d9c4f=_0x549365[_0x15c3aa];return _0x5d9c4f;},a133_0x15c3(_0x3e1c7e,_0x2be7fc);}module['exports']=FileHelper;