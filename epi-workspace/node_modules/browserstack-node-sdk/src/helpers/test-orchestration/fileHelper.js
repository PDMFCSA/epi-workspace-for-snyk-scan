const a130_0x2e5875=a130_0x80fb;function a130_0x32e7(){const _0x374e80=['readState','recordTestResult','openSync','parse','split','../logger','utf8',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','status','writeFileSync','totalTests','720042BTzwjK','failed','nRaBS','39521502PSkcFn','writeState','lockFilePath','SiDRh','3062028bReYJo',']\x20Error\x20writing\x20state\x20file:\x20','uniqueFailedTests','warn','stateFilePath','BgmFw','5258800IWqaUt',']\x20Error\x20releasing\x20lock:\x20','EEXIST','1931531klMryo','1567182klECnH','lastAPIFailedCount','function','5798450TSIOfS','releaseLock','fullName',']\x20Error\x20reading\x20state\x20file:\x20','stack','LJtXR','8ivJXXH','Kffql','failFastConfig','VwZXy','updateAPIFailedCount','isNewFailure','scYzA','failedTests','HtGFd','unlinkSync',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','10VYMpEi',']\x20Error\x20creating\x20state\x20file:\x20','defaultState','existsSync','closeSync','pRruS','stringify','winstonLogger','0|2|3|4|1','message','readFileSync','error','code','12mPKsCi','newState','acquireLock'];a130_0x32e7=function(){return _0x374e80;};return a130_0x32e7();}(function(_0x39a607,_0x5edb28){const _0x2e2812=a130_0x80fb,_0x31bb13=_0x39a607();while(!![]){try{const _0x105468=parseInt(_0x2e2812(0x1ca))/0x1+-parseInt(_0x2e2812(0x1eb))/0x2*(-parseInt(_0x2e2812(0x1f9))/0x3)+parseInt(_0x2e2812(0x1c6))/0x4+parseInt(_0x2e2812(0x1cd))/0x5+-parseInt(_0x2e2812(0x200))/0x6+parseInt(_0x2e2812(0x1c9))/0x7*(parseInt(_0x2e2812(0x1d3))/0x8)+parseInt(_0x2e2812(0x1fc))/0x9*(-parseInt(_0x2e2812(0x1de))/0xa);if(_0x105468===_0x5edb28)break;else _0x31bb13['push'](_0x31bb13['shift']());}catch(_0xb214a1){_0x31bb13['push'](_0x31bb13['shift']());}}}(a130_0x32e7,0xd0fa5));const fs=require('fs'),logger=require(a130_0x2e5875(0x1f3))[a130_0x2e5875(0x1e5)],TAG='FailFastFileHelper';function a130_0x80fb(_0x4a27c0,_0x1c8bf7){const _0x32e7f7=a130_0x32e7();return a130_0x80fb=function(_0x80fbdf,_0x46b79c){_0x80fbdf=_0x80fbdf-0x1c4;let _0x3f5ae7=_0x32e7f7[_0x80fbdf];return _0x3f5ae7;},a130_0x80fb(_0x4a27c0,_0x1c8bf7);}class FileHelper{constructor(_0x4a2f7d,_0xec960c,_0x1574ee,_0x535d41){const _0x14fed9=a130_0x2e5875,_0x544364={};_0x544364[_0x14fed9(0x1d6)]=_0x14fed9(0x1e6),_0x544364[_0x14fed9(0x1db)]='utf8';const _0x3695f2=_0x544364,_0x4dd902=_0x3695f2[_0x14fed9(0x1d6)][_0x14fed9(0x1f2)]('|');let _0xcbc190=0x0;while(!![]){switch(_0x4dd902[_0xcbc190++]){case'0':this[_0x14fed9(0x1d5)]=_0x4a2f7d;continue;case'1':if(!fs[_0x14fed9(0x1e1)](this[_0x14fed9(0x1c4)]))try{fs[_0x14fed9(0x1f7)](this[_0x14fed9(0x1c4)],'{}',_0x3695f2[_0x14fed9(0x1db)]);}catch(_0x3da71d){logger[_0x14fed9(0x1e9)]('['+TAG+_0x14fed9(0x1df)+_0x3da71d['message']+'\x20'+_0x3da71d['stack']);}continue;case'2':this[_0x14fed9(0x1c4)]=_0xec960c;continue;case'3':this[_0x14fed9(0x1fe)]=_0x1574ee;continue;case'4':this[_0x14fed9(0x1e0)]=_0x535d41;continue;}break;}}async[a130_0x2e5875(0x1ed)](){const _0x36afd6=a130_0x2e5875,_0x19661c={};_0x19661c[_0x36afd6(0x1ff)]=function(_0x3e3706,_0x5c77ad){return _0x3e3706===_0x5c77ad;},_0x19661c[_0x36afd6(0x1d2)]=_0x36afd6(0x1c8);const _0x51dab2=_0x19661c;let _0x3bfccf;try{return _0x3bfccf=fs[_0x36afd6(0x1f0)](this[_0x36afd6(0x1fe)],'wx'),_0x3bfccf;}catch(_0x3dd5cf){if(_0x51dab2[_0x36afd6(0x1ff)](_0x3dd5cf[_0x36afd6(0x1ea)],_0x51dab2['LJtXR']))return null;throw _0x3dd5cf;}}async[a130_0x2e5875(0x1ce)](_0x2a99e9){const _0x1a00eb=a130_0x2e5875;if(_0x2a99e9)try{fs[_0x1a00eb(0x1e2)](_0x2a99e9),fs[_0x1a00eb(0x1dc)](this[_0x1a00eb(0x1fe)]);}catch(_0x20cb3d){logger[_0x1a00eb(0x1e9)]('['+TAG+_0x1a00eb(0x1c7)+_0x20cb3d['message']+'\x20'+_0x20cb3d[_0x1a00eb(0x1d1)]);}}[a130_0x2e5875(0x1ee)](){const _0x37901b=a130_0x2e5875,_0x3b8c94={};_0x3b8c94[_0x37901b(0x1e3)]=_0x37901b(0x1f4);const _0x2d2285=_0x3b8c94;try{const _0x3bf945=fs[_0x37901b(0x1e8)](this[_0x37901b(0x1c4)],_0x2d2285[_0x37901b(0x1e3)]);return JSON['parse'](_0x3bf945);}catch(_0x4babb7){return logger[_0x37901b(0x1e9)]('['+TAG+_0x37901b(0x1d0)+_0x4babb7[_0x37901b(0x1e7)]+'\x20'+_0x4babb7['stack']),null;}}async[a130_0x2e5875(0x1fd)](_0x5984b7){const _0x2379c1=a130_0x2e5875,_0x3a758d={..._0x5984b7,'uniqueFailedTests':Array['isArray'](_0x5984b7[_0x2379c1(0x202)])?_0x5984b7[_0x2379c1(0x202)]:Array['from'](_0x5984b7[_0x2379c1(0x202)]||[])};try{fs['writeFileSync'](this[_0x2379c1(0x1c4)],JSON['stringify'](_0x3a758d,null,0x2));}catch(_0x32e884){logger['error']('['+TAG+_0x2379c1(0x201)+_0x32e884[_0x2379c1(0x1e7)]+'\x20'+_0x32e884[_0x2379c1(0x1d1)]);throw _0x32e884;}}async[a130_0x2e5875(0x1ef)](_0x3c9d55,_0x3e23a7){const _0x12617d=a130_0x2e5875,_0x3de83e={};_0x3de83e[_0x12617d(0x1d4)]=function(_0x4d4090,_0x1a84f6){return _0x4d4090!==_0x1a84f6;},_0x3de83e[_0x12617d(0x1fb)]=_0x12617d(0x1cc),_0x3de83e[_0x12617d(0x1c5)]=function(_0x136ff9,_0x4e1e31){return _0x136ff9===_0x4e1e31;},_0x3de83e[_0x12617d(0x1d9)]=_0x12617d(0x1fa);const _0x3ec347=_0x3de83e,_0x41eb38=await this[_0x12617d(0x1ed)]();if(!_0x41eb38)return logger[_0x12617d(0x203)]('['+TAG+_0x12617d(0x1f5)),{'newState':this['readState']()||this[_0x12617d(0x1e0)],'isNewFailure':![]};try{let _0x38f821=this['readState']();!_0x38f821&&(_0x38f821=JSON[_0x12617d(0x1f1)](JSON[_0x12617d(0x1e4)](this[_0x12617d(0x1e0)])));if(!_0x38f821[_0x12617d(0x202)]||_0x3ec347[_0x12617d(0x1d4)](typeof _0x38f821[_0x12617d(0x202)][Symbol['iterator']],_0x3ec347[_0x12617d(0x1fb)]))_0x38f821[_0x12617d(0x202)]=new Set();else Array['isArray'](_0x38f821[_0x12617d(0x202)])&&(_0x38f821[_0x12617d(0x202)]=new Set(_0x38f821[_0x12617d(0x202)]));_0x38f821[_0x12617d(0x1f8)]=_0x3e23a7;let _0x301d8a=![];_0x3ec347['BgmFw'](_0x3c9d55[_0x12617d(0x1f6)],_0x3ec347['scYzA'])&&(_0x38f821[_0x12617d(0x1da)]+=0x1,!_0x38f821[_0x12617d(0x202)]['has'](_0x3c9d55['fullName'])&&(_0x38f821[_0x12617d(0x202)]['add'](_0x3c9d55[_0x12617d(0x1cf)]),_0x301d8a=!![]));await this[_0x12617d(0x1fd)](_0x38f821);const _0xc73394={};return _0xc73394[_0x12617d(0x1ec)]=_0x38f821,_0xc73394[_0x12617d(0x1d8)]=_0x301d8a,_0xc73394;}finally{await this[_0x12617d(0x1ce)](_0x41eb38);}}async[a130_0x2e5875(0x1d7)](_0x43a15f){const _0x179a98=a130_0x2e5875,_0x474ce9=await this['acquireLock']();if(!_0x474ce9)return logger[_0x179a98(0x203)]('['+TAG+_0x179a98(0x1dd)),this['readState']()||this[_0x179a98(0x1e0)];try{let _0x4c5f0c=this[_0x179a98(0x1ee)]();return!_0x4c5f0c&&(_0x4c5f0c=JSON['parse'](JSON['stringify'](this[_0x179a98(0x1e0)]))),_0x4c5f0c[_0x179a98(0x1cb)]=_0x43a15f,await this[_0x179a98(0x1fd)](_0x4c5f0c),_0x4c5f0c;}finally{await this[_0x179a98(0x1ce)](_0x474ce9);}}}module['exports']=FileHelper;