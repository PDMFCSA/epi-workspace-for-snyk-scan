const a133_0x2796c1=a133_0x3e38;(function(_0x2bd984,_0x5e0e50){const _0xba41d4=a133_0x3e38,_0x244a0b=_0x2bd984();while(!![]){try{const _0x47ce72=parseInt(_0xba41d4(0x79))/0x1*(-parseInt(_0xba41d4(0xa4))/0x2)+-parseInt(_0xba41d4(0x96))/0x3*(-parseInt(_0xba41d4(0x7a))/0x4)+-parseInt(_0xba41d4(0xa5))/0x5*(-parseInt(_0xba41d4(0x8e))/0x6)+parseInt(_0xba41d4(0x9b))/0x7*(parseInt(_0xba41d4(0x84))/0x8)+parseInt(_0xba41d4(0x92))/0x9+parseInt(_0xba41d4(0x7b))/0xa*(-parseInt(_0xba41d4(0x90))/0xb)+parseInt(_0xba41d4(0x8c))/0xc*(parseInt(_0xba41d4(0xa2))/0xd);if(_0x47ce72===_0x5e0e50)break;else _0x244a0b['push'](_0x244a0b['shift']());}catch(_0x251bcc){_0x244a0b['push'](_0x244a0b['shift']());}}}(a133_0xbe42,0xe9733));const fs=require('fs'),logger=require('../logger')['winstonLogger'],TAG=a133_0x2796c1(0x91);class FileHelper{constructor(_0x483766,_0x5d7d3a,_0x5deb67,_0x37889e){const _0x59fd83=a133_0x2796c1,_0x538d8b={};_0x538d8b[_0x59fd83(0x70)]='1|2|4|0|3',_0x538d8b[_0x59fd83(0xa0)]=_0x59fd83(0x83);const _0x13fe92=_0x538d8b,_0xc2fced=_0x13fe92[_0x59fd83(0x70)][_0x59fd83(0x71)]('|');let _0x364e30=0x0;while(!![]){switch(_0xc2fced[_0x364e30++]){case'0':this[_0x59fd83(0x75)]=_0x37889e;continue;case'1':this[_0x59fd83(0x86)]=_0x483766;continue;case'2':this[_0x59fd83(0xa6)]=_0x5d7d3a;continue;case'3':if(!fs[_0x59fd83(0x88)](this[_0x59fd83(0xa6)]))try{fs['writeFileSync'](this[_0x59fd83(0xa6)],'{}',_0x13fe92[_0x59fd83(0xa0)]);}catch(_0x5aa685){logger[_0x59fd83(0xac)]('['+TAG+_0x59fd83(0xa8)+_0x5aa685[_0x59fd83(0x77)]+'\x20'+_0x5aa685['stack']);}continue;case'4':this[_0x59fd83(0x81)]=_0x5deb67;continue;}break;}}async['acquireLock'](){const _0x10e4df=a133_0x2796c1,_0xbcf250={};_0xbcf250[_0x10e4df(0xab)]=function(_0x5c2ff8,_0x2f12a9){return _0x5c2ff8===_0x2f12a9;},_0xbcf250['egTVm']=_0x10e4df(0x98);const _0x467337=_0xbcf250;let _0x1f1aad;try{return _0x1f1aad=fs[_0x10e4df(0x76)](this[_0x10e4df(0x81)],'wx'),_0x1f1aad;}catch(_0xfe7102){if(_0x467337[_0x10e4df(0xab)](_0xfe7102[_0x10e4df(0x9e)],_0x467337[_0x10e4df(0x93)]))return null;throw _0xfe7102;}}async[a133_0x2796c1(0x8a)](_0x5317be){const _0x4095f0=a133_0x2796c1;if(_0x5317be)try{fs['closeSync'](_0x5317be),fs['unlinkSync'](this[_0x4095f0(0x81)]);}catch(_0x4ed74a){logger[_0x4095f0(0xac)]('['+TAG+_0x4095f0(0x8b)+_0x4ed74a[_0x4095f0(0x77)]+'\x20'+_0x4ed74a['stack']);}}[a133_0x2796c1(0x7c)](){const _0x137000=a133_0x2796c1,_0x36ff7d={};_0x36ff7d[_0x137000(0xa3)]=_0x137000(0x83);const _0x26e064=_0x36ff7d;try{const _0x18568c=fs[_0x137000(0x99)](this[_0x137000(0xa6)],_0x26e064[_0x137000(0xa3)]);return JSON['parse'](_0x18568c);}catch(_0x16264e){return logger[_0x137000(0xac)]('['+TAG+_0x137000(0x80)+_0x16264e[_0x137000(0x77)]+'\x20'+_0x16264e['stack']),null;}}async[a133_0x2796c1(0xa7)](_0x4a2a30){const _0x1737d9=a133_0x2796c1,_0x12eec7={..._0x4a2a30,'uniqueFailedTests':Array[_0x1737d9(0x78)](_0x4a2a30[_0x1737d9(0xa9)])?_0x4a2a30[_0x1737d9(0xa9)]:Array[_0x1737d9(0x7f)](_0x4a2a30[_0x1737d9(0xa9)]||[])};try{fs[_0x1737d9(0x9d)](this[_0x1737d9(0xa6)],JSON[_0x1737d9(0x87)](_0x12eec7,null,0x2));}catch(_0x5b2eff){logger['error']('['+TAG+']\x20Error\x20writing\x20state\x20file:\x20'+_0x5b2eff['message']+'\x20'+_0x5b2eff[_0x1737d9(0x74)]);throw _0x5b2eff;}}async['recordTestResult'](_0x587fe8,_0x2336bc){const _0x3da3bc=a133_0x2796c1,_0x34e809={};_0x34e809['mjInD']=function(_0xfd46cb,_0x385113){return _0xfd46cb!==_0x385113;},_0x34e809[_0x3da3bc(0xa1)]=_0x3da3bc(0x8f),_0x34e809[_0x3da3bc(0x73)]=function(_0x33a0a0,_0x108bcb){return _0x33a0a0===_0x108bcb;},_0x34e809[_0x3da3bc(0x9a)]=_0x3da3bc(0x9c);const _0x13240a=_0x34e809,_0x37b63e=await this['acquireLock']();if(!_0x37b63e)return logger[_0x3da3bc(0x85)]('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.'),{'newState':this['readState']()||this[_0x3da3bc(0x75)],'isNewFailure':![]};try{let _0x20b162=this[_0x3da3bc(0x7c)]();!_0x20b162&&(_0x20b162=JSON['parse'](JSON[_0x3da3bc(0x87)](this[_0x3da3bc(0x75)])));if(!_0x20b162[_0x3da3bc(0xa9)]||_0x13240a[_0x3da3bc(0x95)](typeof _0x20b162[_0x3da3bc(0xa9)][Symbol['iterator']],_0x13240a[_0x3da3bc(0xa1)]))_0x20b162['uniqueFailedTests']=new Set();else Array[_0x3da3bc(0x78)](_0x20b162[_0x3da3bc(0xa9)])&&(_0x20b162[_0x3da3bc(0xa9)]=new Set(_0x20b162[_0x3da3bc(0xa9)]));_0x20b162[_0x3da3bc(0x7e)]=_0x2336bc;let _0x2f1b57=![];_0x13240a['nDJum'](_0x587fe8['status'],_0x13240a[_0x3da3bc(0x9a)])&&(_0x20b162[_0x3da3bc(0x72)]+=0x1,!_0x20b162['uniqueFailedTests'][_0x3da3bc(0x7d)](_0x587fe8[_0x3da3bc(0xaa)])&&(_0x20b162[_0x3da3bc(0xa9)]['add'](_0x587fe8[_0x3da3bc(0xaa)]),_0x2f1b57=!![]));await this[_0x3da3bc(0xa7)](_0x20b162);const _0x8deb1a={};return _0x8deb1a['newState']=_0x20b162,_0x8deb1a[_0x3da3bc(0x8d)]=_0x2f1b57,_0x8deb1a;}finally{await this['releaseLock'](_0x37b63e);}}async[a133_0x2796c1(0x89)](_0x49d8a6){const _0x27c44a=a133_0x2796c1,_0x1bffb0=await this[_0x27c44a(0x82)]();if(!_0x1bffb0)return logger[_0x27c44a(0x85)]('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.'),this[_0x27c44a(0x7c)]()||this[_0x27c44a(0x75)];try{let _0x47c45f=this[_0x27c44a(0x7c)]();return!_0x47c45f&&(_0x47c45f=JSON[_0x27c44a(0x9f)](JSON[_0x27c44a(0x87)](this[_0x27c44a(0x75)]))),_0x47c45f[_0x27c44a(0x94)]=_0x49d8a6,await this[_0x27c44a(0xa7)](_0x47c45f),_0x47c45f;}finally{await this[_0x27c44a(0x8a)](_0x1bffb0);}}}module[a133_0x2796c1(0x97)]=FileHelper;function a133_0x3e38(_0x3a68ba,_0x4f6bc4){const _0xbe4224=a133_0xbe42();return a133_0x3e38=function(_0x3e38d6,_0x5de329){_0x3e38d6=_0x3e38d6-0x70;let _0x53344f=_0xbe4224[_0x3e38d6];return _0x53344f;},a133_0x3e38(_0x3a68ba,_0x4f6bc4);}function a133_0xbe42(){const _0x263280=[']\x20Error\x20creating\x20state\x20file:\x20','uniqueFailedTests','fullName','GdXWq','error','WlXuI','split','failedTests','nDJum','stack','defaultState','openSync','message','isArray','13WVGyeH','22536oNrRaD','10rHHLom','readState','has','totalTests','from',']\x20Error\x20reading\x20state\x20file:\x20','lockFilePath','acquireLock','utf8','253384liaMhS','warn','failFastConfig','stringify','existsSync','updateAPIFailedCount','releaseLock',']\x20Error\x20releasing\x20lock:\x20','2470620dnEkAd','isNewFailure','30BffxbX','function','1644676xEpidQ','FailFastFileHelper','5648058QzwFOc','egTVm','lastAPIFailedCount','mjInD','81eujaZf','exports','EEXIST','readFileSync','acxHs','266aWXwOk','failed','writeFileSync','code','parse','yMbkC','BUxjC','13uXJlRr','vaWsN','230258YgMghg','413265rKtDRB','stateFilePath','writeState'];a133_0xbe42=function(){return _0x263280;};return a133_0xbe42();}