const a118_0x35f91b=a118_0x1123;function a118_0x1353(){const _0x25c50c=['acquireLock','isArray','osDwl','322620fjWTko','error','lockFilePath','htnSp','openSync','failFastConfig','updateAPIFailedCount','ooTTZ','writeState','XuiCw','stateFilePath','10DPDFYy','failed','stack','4|1|3|2|0','warn','6880mLvEVk','defaultState','has','36GXqcwC','302787NUCHYh',']\x20Error\x20creating\x20state\x20file:\x20','UoSnO',']\x20Error\x20reading\x20state\x20file:\x20','491568pfHweN',']\x20Error\x20releasing\x20lock:\x20','pKmkc','ExvHt','winstonLogger','../logger','failedTests','totalTests','isNewFailure','978628zOLNob','EEXIST','VPyKy','from','stringify','releaseLock','readState','exports','3726270vrJDZR','fullName','function','uniqueFailedTests','utf8','UtdxA','message','status',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','parse','4365855mPmYvV','readFileSync','2338amAhKw','writeFileSync','recordTestResult',']\x20Error\x20writing\x20state\x20file:\x20','FailFastFileHelper','code'];a118_0x1353=function(){return _0x25c50c;};return a118_0x1353();}(function(_0x488ae0,_0x39bc43){const _0x30b263=a118_0x1123,_0xf87f38=_0x488ae0();while(!![]){try{const _0x2d9987=parseInt(_0x30b263(0x144))/0x1+parseInt(_0x30b263(0x10f))/0x2+parseInt(_0x30b263(0x12c))/0x3*(-parseInt(_0x30b263(0x13f))/0x4)+parseInt(_0x30b263(0x121))/0x5+-parseInt(_0x30b263(0x117))/0x6+parseInt(_0x30b263(0x123))/0x7*(parseInt(_0x30b263(0x13c))/0x8)+-parseInt(_0x30b263(0x140))/0x9*(-parseInt(_0x30b263(0x137))/0xa);if(_0x2d9987===_0x39bc43)break;else _0xf87f38['push'](_0xf87f38['shift']());}catch(_0x54558e){_0xf87f38['push'](_0xf87f38['shift']());}}}(a118_0x1353,0x8f12f));const fs=require('fs'),logger=require(a118_0x35f91b(0x149))[a118_0x35f91b(0x148)],TAG=a118_0x35f91b(0x127);function a118_0x1123(_0x543062,_0x58c602){const _0x135362=a118_0x1353();return a118_0x1123=function(_0x112352,_0x48a967){_0x112352=_0x112352-0x10f;let _0x235801=_0x135362[_0x112352];return _0x235801;},a118_0x1123(_0x543062,_0x58c602);}class FileHelper{constructor(_0x1e45e7,_0xf0ace9,_0x12e068,_0x20a85f){const _0x2d1c75=a118_0x35f91b,_0x4e77cb={};_0x4e77cb[_0x2d1c75(0x12b)]=_0x2d1c75(0x13a),_0x4e77cb[_0x2d1c75(0x111)]=_0x2d1c75(0x11b);const _0x157963=_0x4e77cb,_0x75a653=_0x157963['osDwl']['split']('|');let _0x45ba2f=0x0;while(!![]){switch(_0x75a653[_0x45ba2f++]){case'0':if(!fs['existsSync'](this[_0x2d1c75(0x136)]))try{fs[_0x2d1c75(0x124)](this[_0x2d1c75(0x136)],'{}',_0x157963[_0x2d1c75(0x111)]);}catch(_0x1f5b56){logger['error']('['+TAG+_0x2d1c75(0x141)+_0x1f5b56[_0x2d1c75(0x11d)]+'\x20'+_0x1f5b56[_0x2d1c75(0x139)]);}continue;case'1':this[_0x2d1c75(0x136)]=_0xf0ace9;continue;case'2':this[_0x2d1c75(0x13d)]=_0x20a85f;continue;case'3':this[_0x2d1c75(0x12e)]=_0x12e068;continue;case'4':this[_0x2d1c75(0x131)]=_0x1e45e7;continue;}break;}}async['acquireLock'](){const _0x2ad2c7=a118_0x35f91b,_0x9d16ed={};_0x9d16ed['pKmkc']=function(_0x52396c,_0x30f463){return _0x52396c===_0x30f463;},_0x9d16ed[_0x2ad2c7(0x135)]=_0x2ad2c7(0x110);const _0x184b6d=_0x9d16ed;let _0x136ecd;try{return _0x136ecd=fs[_0x2ad2c7(0x130)](this[_0x2ad2c7(0x12e)],'wx'),_0x136ecd;}catch(_0xc82aee){if(_0x184b6d[_0x2ad2c7(0x146)](_0xc82aee[_0x2ad2c7(0x128)],_0x184b6d[_0x2ad2c7(0x135)]))return null;throw _0xc82aee;}}async[a118_0x35f91b(0x114)](_0x38a94c){const _0x24cc82=a118_0x35f91b;if(_0x38a94c)try{fs['closeSync'](_0x38a94c),fs['unlinkSync'](this['lockFilePath']);}catch(_0x28b891){logger[_0x24cc82(0x12d)]('['+TAG+_0x24cc82(0x145)+_0x28b891[_0x24cc82(0x11d)]+'\x20'+_0x28b891[_0x24cc82(0x139)]);}}[a118_0x35f91b(0x115)](){const _0x55a84a=a118_0x35f91b,_0x5bc479={};_0x5bc479[_0x55a84a(0x147)]=_0x55a84a(0x11b);const _0xa62b2f=_0x5bc479;try{const _0x123ddc=fs[_0x55a84a(0x122)](this['stateFilePath'],_0xa62b2f[_0x55a84a(0x147)]);return JSON[_0x55a84a(0x120)](_0x123ddc);}catch(_0x48f1b9){return logger[_0x55a84a(0x12d)]('['+TAG+_0x55a84a(0x143)+_0x48f1b9[_0x55a84a(0x11d)]+'\x20'+_0x48f1b9[_0x55a84a(0x139)]),null;}}async[a118_0x35f91b(0x134)](_0x567a9c){const _0x19a853=a118_0x35f91b,_0x3d1443={..._0x567a9c,'uniqueFailedTests':Array[_0x19a853(0x12a)](_0x567a9c['uniqueFailedTests'])?_0x567a9c[_0x19a853(0x11a)]:Array[_0x19a853(0x112)](_0x567a9c[_0x19a853(0x11a)]||[])};try{fs['writeFileSync'](this[_0x19a853(0x136)],JSON[_0x19a853(0x113)](_0x3d1443,null,0x2));}catch(_0x4ce7f1){logger['error']('['+TAG+_0x19a853(0x126)+_0x4ce7f1[_0x19a853(0x11d)]+'\x20'+_0x4ce7f1[_0x19a853(0x139)]);throw _0x4ce7f1;}}async[a118_0x35f91b(0x125)](_0x2ad1e6,_0x3aa6d5){const _0x52ace0=a118_0x35f91b,_0x11e343={};_0x11e343[_0x52ace0(0x12f)]=function(_0x356da1,_0x41d8d5){return _0x356da1!==_0x41d8d5;},_0x11e343[_0x52ace0(0x11c)]=_0x52ace0(0x119),_0x11e343[_0x52ace0(0x133)]=function(_0x518cd8,_0x1377e2){return _0x518cd8===_0x1377e2;},_0x11e343['UoSnO']=_0x52ace0(0x138);const _0x66ce4a=_0x11e343,_0x13ae28=await this[_0x52ace0(0x129)]();if(!_0x13ae28)return logger[_0x52ace0(0x13b)]('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.'),{'newState':this[_0x52ace0(0x115)]()||this[_0x52ace0(0x13d)],'isNewFailure':![]};try{let _0x27de54=this[_0x52ace0(0x115)]();!_0x27de54&&(_0x27de54=JSON[_0x52ace0(0x120)](JSON[_0x52ace0(0x113)](this[_0x52ace0(0x13d)])));if(!_0x27de54[_0x52ace0(0x11a)]||_0x66ce4a[_0x52ace0(0x12f)](typeof _0x27de54['uniqueFailedTests'][Symbol['iterator']],_0x66ce4a[_0x52ace0(0x11c)]))_0x27de54['uniqueFailedTests']=new Set();else Array[_0x52ace0(0x12a)](_0x27de54[_0x52ace0(0x11a)])&&(_0x27de54['uniqueFailedTests']=new Set(_0x27de54[_0x52ace0(0x11a)]));_0x27de54[_0x52ace0(0x14b)]=_0x3aa6d5;let _0x37f2c2=![];_0x66ce4a[_0x52ace0(0x133)](_0x2ad1e6[_0x52ace0(0x11e)],_0x66ce4a[_0x52ace0(0x142)])&&(_0x27de54[_0x52ace0(0x14a)]+=0x1,!_0x27de54[_0x52ace0(0x11a)][_0x52ace0(0x13e)](_0x2ad1e6[_0x52ace0(0x118)])&&(_0x27de54[_0x52ace0(0x11a)]['add'](_0x2ad1e6[_0x52ace0(0x118)]),_0x37f2c2=!![]));await this[_0x52ace0(0x134)](_0x27de54);const _0x598268={};return _0x598268['newState']=_0x27de54,_0x598268[_0x52ace0(0x14c)]=_0x37f2c2,_0x598268;}finally{await this[_0x52ace0(0x114)](_0x13ae28);}}async[a118_0x35f91b(0x132)](_0x16d92e){const _0x44e50b=a118_0x35f91b,_0x1612a8=await this[_0x44e50b(0x129)]();if(!_0x1612a8)return logger[_0x44e50b(0x13b)]('['+TAG+_0x44e50b(0x11f)),this[_0x44e50b(0x115)]()||this['defaultState'];try{let _0x41448d=this[_0x44e50b(0x115)]();return!_0x41448d&&(_0x41448d=JSON['parse'](JSON[_0x44e50b(0x113)](this[_0x44e50b(0x13d)]))),_0x41448d['lastAPIFailedCount']=_0x16d92e,await this[_0x44e50b(0x134)](_0x41448d),_0x41448d;}finally{await this[_0x44e50b(0x114)](_0x1612a8);}}}module[a118_0x35f91b(0x116)]=FileHelper;