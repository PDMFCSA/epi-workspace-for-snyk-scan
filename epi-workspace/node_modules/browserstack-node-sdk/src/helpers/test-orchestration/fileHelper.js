function a120_0x1faa(_0x1ce0fe,_0x1171f9){const _0x3a7d9b=a120_0x3a7d();return a120_0x1faa=function(_0x1faaae,_0x513cef){_0x1faaae=_0x1faaae-0x1da;let _0xbe7b0=_0x3a7d9b[_0x1faaae];return _0xbe7b0;},a120_0x1faa(_0x1ce0fe,_0x1171f9);}const a120_0x330a18=a120_0x1faa;(function(_0x1b0fa9,_0x44f68b){const _0x467d45=a120_0x1faa,_0x314bc8=_0x1b0fa9();while(!![]){try{const _0x5f087e=parseInt(_0x467d45(0x1ee))/0x1+parseInt(_0x467d45(0x1e2))/0x2+parseInt(_0x467d45(0x20d))/0x3+parseInt(_0x467d45(0x1f9))/0x4+-parseInt(_0x467d45(0x1f3))/0x5*(parseInt(_0x467d45(0x20c))/0x6)+parseInt(_0x467d45(0x20e))/0x7+parseInt(_0x467d45(0x1e9))/0x8*(-parseInt(_0x467d45(0x1f1))/0x9);if(_0x5f087e===_0x44f68b)break;else _0x314bc8['push'](_0x314bc8['shift']());}catch(_0x5373e7){_0x314bc8['push'](_0x314bc8['shift']());}}}(a120_0x3a7d,0xcf336));const fs=require('fs'),logger=require(a120_0x330a18(0x1f8))['winstonLogger'],TAG=a120_0x330a18(0x204);function a120_0x3a7d(){const _0x27ff6b=['stateFilePath','existsSync','../logger','1736308eWBQGu','warn','zDBJt','4|3|0|2|1','add','yDWZE','kRdZL','isArray','YjnxR','unlinkSync','defaultState','FailFastFileHelper','split','isNewFailure','kEHkE','fullName','lastAPIFailedCount','XlqAG','updateAPIFailedCount','9486FfCUFX','4540452AQVtTO','5528061ZygiQE','stack','uniqueFailedTests','readState',']\x20Error\x20creating\x20state\x20file:\x20','Pjmts','releaseLock',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','EPsqr','from','status','iterator','stringify','message','parse','1285432wYdyLA','acquireLock',']\x20Error\x20writing\x20state\x20file:\x20','totalTests',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','writeState','failFastConfig','19078112BjkrmG','EEXIST','error','lockFilePath','function','1295330iBKujx','utf8','writeFileSync','9pyWKLe','recordTestResult','4560GCSIZQ','ZmrhA','readFileSync'];a120_0x3a7d=function(){return _0x27ff6b;};return a120_0x3a7d();}class FileHelper{constructor(_0x19a967,_0x5ae9fe,_0x2566b8,_0x89181b){const _0x31eaa9=a120_0x330a18,_0x2e3c96={};_0x2e3c96[_0x31eaa9(0x207)]=_0x31eaa9(0x1fc),_0x2e3c96[_0x31eaa9(0x1f4)]='utf8';const _0x37b4da=_0x2e3c96,_0xbf4f3c=_0x37b4da[_0x31eaa9(0x207)][_0x31eaa9(0x205)]('|');let _0x2ebbb0=0x0;while(!![]){switch(_0xbf4f3c[_0x2ebbb0++]){case'0':this['lockFilePath']=_0x2566b8;continue;case'1':if(!fs[_0x31eaa9(0x1f7)](this['stateFilePath']))try{fs[_0x31eaa9(0x1f0)](this['stateFilePath'],'{}',_0x37b4da['ZmrhA']);}catch(_0x4ec61b){logger[_0x31eaa9(0x1eb)]('['+TAG+_0x31eaa9(0x212)+_0x4ec61b[_0x31eaa9(0x1e0)]+'\x20'+_0x4ec61b['stack']);}continue;case'2':this['defaultState']=_0x89181b;continue;case'3':this[_0x31eaa9(0x1f6)]=_0x5ae9fe;continue;case'4':this[_0x31eaa9(0x1e8)]=_0x19a967;continue;}break;}}async['acquireLock'](){const _0x5d222c=a120_0x330a18,_0x36b10d={};_0x36b10d[_0x5d222c(0x20a)]=function(_0x2de48c,_0x229ab3){return _0x2de48c===_0x229ab3;},_0x36b10d[_0x5d222c(0x1fb)]=_0x5d222c(0x1ea);const _0x18e718=_0x36b10d;let _0x4a95dc;try{return _0x4a95dc=fs['openSync'](this[_0x5d222c(0x1ec)],'wx'),_0x4a95dc;}catch(_0x22c91c){if(_0x18e718[_0x5d222c(0x20a)](_0x22c91c['code'],_0x18e718[_0x5d222c(0x1fb)]))return null;throw _0x22c91c;}}async['releaseLock'](_0x405905){const _0x36a9f1=a120_0x330a18;if(_0x405905)try{fs['closeSync'](_0x405905),fs[_0x36a9f1(0x202)](this[_0x36a9f1(0x1ec)]);}catch(_0x4019d3){logger[_0x36a9f1(0x1eb)]('['+TAG+']\x20Error\x20releasing\x20lock:\x20'+_0x4019d3['message']+'\x20'+_0x4019d3[_0x36a9f1(0x20f)]);}}['readState'](){const _0x39ed7a=a120_0x330a18,_0x35bc52={};_0x35bc52[_0x39ed7a(0x1fe)]=_0x39ed7a(0x1ef);const _0xc0f569=_0x35bc52;try{const _0x458cb7=fs[_0x39ed7a(0x1f5)](this[_0x39ed7a(0x1f6)],_0xc0f569['yDWZE']);return JSON[_0x39ed7a(0x1e1)](_0x458cb7);}catch(_0x1846ea){return logger[_0x39ed7a(0x1eb)]('['+TAG+']\x20Error\x20reading\x20state\x20file:\x20'+_0x1846ea[_0x39ed7a(0x1e0)]+'\x20'+_0x1846ea[_0x39ed7a(0x20f)]),null;}}async['writeState'](_0x10da60){const _0x54073a=a120_0x330a18,_0x5b5ce7={..._0x10da60,'uniqueFailedTests':Array[_0x54073a(0x200)](_0x10da60[_0x54073a(0x210)])?_0x10da60['uniqueFailedTests']:Array[_0x54073a(0x1dc)](_0x10da60[_0x54073a(0x210)]||[])};try{fs[_0x54073a(0x1f0)](this[_0x54073a(0x1f6)],JSON[_0x54073a(0x1df)](_0x5b5ce7,null,0x2));}catch(_0x14fc71){logger[_0x54073a(0x1eb)]('['+TAG+_0x54073a(0x1e4)+_0x14fc71['message']+'\x20'+_0x14fc71[_0x54073a(0x20f)]);throw _0x14fc71;}}async[a120_0x330a18(0x1f2)](_0x17a1be,_0x49d49a){const _0x2b61cc=a120_0x330a18,_0x20c1e6={};_0x20c1e6[_0x2b61cc(0x201)]=function(_0x3313eb,_0x538e66){return _0x3313eb!==_0x538e66;},_0x20c1e6['Pjmts']=_0x2b61cc(0x1ed),_0x20c1e6['kRdZL']=function(_0x4a798b,_0x21260f){return _0x4a798b===_0x21260f;},_0x20c1e6[_0x2b61cc(0x1db)]='failed';const _0x346a2b=_0x20c1e6,_0x59db17=await this['acquireLock']();if(!_0x59db17)return logger['warn']('['+TAG+_0x2b61cc(0x1e6)),{'newState':this[_0x2b61cc(0x211)]()||this[_0x2b61cc(0x203)],'isNewFailure':![]};try{let _0x599b99=this[_0x2b61cc(0x211)]();!_0x599b99&&(_0x599b99=JSON[_0x2b61cc(0x1e1)](JSON[_0x2b61cc(0x1df)](this[_0x2b61cc(0x203)])));if(!_0x599b99['uniqueFailedTests']||_0x346a2b[_0x2b61cc(0x201)](typeof _0x599b99[_0x2b61cc(0x210)][Symbol[_0x2b61cc(0x1de)]],_0x346a2b[_0x2b61cc(0x213)]))_0x599b99[_0x2b61cc(0x210)]=new Set();else Array['isArray'](_0x599b99[_0x2b61cc(0x210)])&&(_0x599b99[_0x2b61cc(0x210)]=new Set(_0x599b99[_0x2b61cc(0x210)]));_0x599b99[_0x2b61cc(0x1e5)]=_0x49d49a;let _0x378197=![];_0x346a2b[_0x2b61cc(0x1ff)](_0x17a1be[_0x2b61cc(0x1dd)],_0x346a2b[_0x2b61cc(0x1db)])&&(_0x599b99['failedTests']+=0x1,!_0x599b99[_0x2b61cc(0x210)]['has'](_0x17a1be[_0x2b61cc(0x208)])&&(_0x599b99['uniqueFailedTests'][_0x2b61cc(0x1fd)](_0x17a1be[_0x2b61cc(0x208)]),_0x378197=!![]));await this[_0x2b61cc(0x1e7)](_0x599b99);const _0x1e0842={};return _0x1e0842['newState']=_0x599b99,_0x1e0842[_0x2b61cc(0x206)]=_0x378197,_0x1e0842;}finally{await this['releaseLock'](_0x59db17);}}async[a120_0x330a18(0x20b)](_0x6ba2a5){const _0x7d390a=a120_0x330a18,_0x4b074c=await this[_0x7d390a(0x1e3)]();if(!_0x4b074c)return logger[_0x7d390a(0x1fa)]('['+TAG+_0x7d390a(0x1da)),this[_0x7d390a(0x211)]()||this[_0x7d390a(0x203)];try{let _0x4fd09a=this[_0x7d390a(0x211)]();return!_0x4fd09a&&(_0x4fd09a=JSON[_0x7d390a(0x1e1)](JSON['stringify'](this['defaultState']))),_0x4fd09a[_0x7d390a(0x209)]=_0x6ba2a5,await this[_0x7d390a(0x1e7)](_0x4fd09a),_0x4fd09a;}finally{await this[_0x7d390a(0x214)](_0x4b074c);}}}module['exports']=FileHelper;