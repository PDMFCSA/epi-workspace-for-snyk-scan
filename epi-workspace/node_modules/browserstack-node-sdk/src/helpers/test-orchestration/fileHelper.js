const a130_0x85c84b=a130_0x92af;(function(_0x27d829,_0x596f9c){const _0x151194=a130_0x92af,_0x7cfa58=_0x27d829();while(!![]){try{const _0x427a46=-parseInt(_0x151194(0x18e))/0x1*(parseInt(_0x151194(0x19f))/0x2)+-parseInt(_0x151194(0x19d))/0x3+-parseInt(_0x151194(0x1ac))/0x4*(-parseInt(_0x151194(0x19b))/0x5)+parseInt(_0x151194(0x17c))/0x6+parseInt(_0x151194(0x195))/0x7+-parseInt(_0x151194(0x191))/0x8*(parseInt(_0x151194(0x19a))/0x9)+-parseInt(_0x151194(0x1aa))/0xa*(-parseInt(_0x151194(0x17d))/0xb);if(_0x427a46===_0x596f9c)break;else _0x7cfa58['push'](_0x7cfa58['shift']());}catch(_0x29f790){_0x7cfa58['push'](_0x7cfa58['shift']());}}}(a130_0x522d,0x4e5fa));function a130_0x522d(){const _0x47fd97=['acquireLock','newState','from','utf8','JwWdP','osFKU','stateFilePath','isArray','ULIWF','winstonLogger','fullName','eKIgl','recordTestResult','readFileSync','uniqueFailedTests','iterator','183899teLVmS','FailFastFileHelper','lockFilePath','42520RbjjTq','../logger','message',']\x20Error\x20releasing\x20lock:\x20','4346909FnGFJe','TgKwM','qxpOr','failedTests','openSync','477OaKFzA','5TUPpQD','updateAPIFailedCount','1895373hdUDgI',']\x20Error\x20reading\x20state\x20file:\x20','2xgyEyc','LrAgJ','defaultState','has','EEXIST','unlinkSync','status','closeSync','writeState','stringify','GTCqv','9430Hgjxth',']\x20Error\x20writing\x20state\x20file:\x20','1833848gAuFFa','function','lastAPIFailedCount','writeFileSync','2|4|0|3|1','error','mMlcK','releaseLock','readState','isNewFailure','existsSync','stack',']\x20Error\x20creating\x20state\x20file:\x20','parse','totalTests','36450BeqzBE','3883qYQiOz'];a130_0x522d=function(){return _0x47fd97;};return a130_0x522d();}function a130_0x92af(_0x1048eb,_0x5d8538){const _0x522d48=a130_0x522d();return a130_0x92af=function(_0x92af67,_0x573893){_0x92af67=_0x92af67-0x179;let _0x3f821d=_0x522d48[_0x92af67];return _0x3f821d;},a130_0x92af(_0x1048eb,_0x5d8538);}const fs=require('fs'),logger=require(a130_0x85c84b(0x192))[a130_0x85c84b(0x187)],TAG=a130_0x85c84b(0x18f);class FileHelper{constructor(_0x40fd1a,_0x4eb653,_0x43c146,_0x57b6c6){const _0x2bdd7e=a130_0x85c84b,_0xb74704={};_0xb74704[_0x2bdd7e(0x1a9)]=_0x2bdd7e(0x1b0),_0xb74704[_0x2bdd7e(0x1a0)]=_0x2bdd7e(0x181);const _0x36b31c=_0xb74704,_0x58030a=_0x36b31c[_0x2bdd7e(0x1a9)]['split']('|');let _0x3c092d=0x0;while(!![]){switch(_0x58030a[_0x3c092d++]){case'0':this[_0x2bdd7e(0x190)]=_0x43c146;continue;case'1':if(!fs[_0x2bdd7e(0x1b6)](this[_0x2bdd7e(0x184)]))try{fs['writeFileSync'](this[_0x2bdd7e(0x184)],'{}',_0x36b31c[_0x2bdd7e(0x1a0)]);}catch(_0x500300){logger[_0x2bdd7e(0x1b1)]('['+TAG+_0x2bdd7e(0x179)+_0x500300[_0x2bdd7e(0x193)]+'\x20'+_0x500300[_0x2bdd7e(0x1b7)]);}continue;case'2':this['failFastConfig']=_0x40fd1a;continue;case'3':this[_0x2bdd7e(0x1a1)]=_0x57b6c6;continue;case'4':this['stateFilePath']=_0x4eb653;continue;}break;}}async[a130_0x85c84b(0x17e)](){const _0x163a62=a130_0x85c84b,_0xaf2553={};_0xaf2553[_0x163a62(0x183)]=function(_0x5de9b6,_0x290997){return _0x5de9b6===_0x290997;},_0xaf2553[_0x163a62(0x186)]=_0x163a62(0x1a3);const _0x5b5428=_0xaf2553;let _0x2a47ab;try{return _0x2a47ab=fs[_0x163a62(0x199)](this[_0x163a62(0x190)],'wx'),_0x2a47ab;}catch(_0x5dc4f3){if(_0x5b5428['osFKU'](_0x5dc4f3['code'],_0x5b5428[_0x163a62(0x186)]))return null;throw _0x5dc4f3;}}async[a130_0x85c84b(0x1b3)](_0x2e9ad2){const _0x283986=a130_0x85c84b;if(_0x2e9ad2)try{fs[_0x283986(0x1a6)](_0x2e9ad2),fs[_0x283986(0x1a4)](this[_0x283986(0x190)]);}catch(_0x23d479){logger[_0x283986(0x1b1)]('['+TAG+_0x283986(0x194)+_0x23d479[_0x283986(0x193)]+'\x20'+_0x23d479['stack']);}}[a130_0x85c84b(0x1b4)](){const _0x7b939a=a130_0x85c84b,_0x44c2fc={};_0x44c2fc[_0x7b939a(0x182)]=_0x7b939a(0x181);const _0x5f711a=_0x44c2fc;try{const _0x3b60ae=fs[_0x7b939a(0x18b)](this[_0x7b939a(0x184)],_0x5f711a[_0x7b939a(0x182)]);return JSON[_0x7b939a(0x17a)](_0x3b60ae);}catch(_0x4cead4){return logger[_0x7b939a(0x1b1)]('['+TAG+_0x7b939a(0x19e)+_0x4cead4[_0x7b939a(0x193)]+'\x20'+_0x4cead4[_0x7b939a(0x1b7)]),null;}}async[a130_0x85c84b(0x1a7)](_0x2da091){const _0x33b975=a130_0x85c84b,_0x55d500={..._0x2da091,'uniqueFailedTests':Array[_0x33b975(0x185)](_0x2da091[_0x33b975(0x18c)])?_0x2da091[_0x33b975(0x18c)]:Array[_0x33b975(0x180)](_0x2da091[_0x33b975(0x18c)]||[])};try{fs[_0x33b975(0x1af)](this[_0x33b975(0x184)],JSON[_0x33b975(0x1a8)](_0x55d500,null,0x2));}catch(_0x4869ed){logger[_0x33b975(0x1b1)]('['+TAG+_0x33b975(0x1ab)+_0x4869ed[_0x33b975(0x193)]+'\x20'+_0x4869ed[_0x33b975(0x1b7)]);throw _0x4869ed;}}async[a130_0x85c84b(0x18a)](_0x22efda,_0x18b640){const _0x375b4b=a130_0x85c84b,_0x324776={};_0x324776[_0x375b4b(0x196)]=function(_0x5cfa97,_0x1cc242){return _0x5cfa97!==_0x1cc242;},_0x324776[_0x375b4b(0x1b2)]=_0x375b4b(0x1ad),_0x324776[_0x375b4b(0x197)]=function(_0x34affa,_0x53854f){return _0x34affa===_0x53854f;},_0x324776[_0x375b4b(0x189)]='failed';const _0x309bd6=_0x324776,_0x53fbe2=await this[_0x375b4b(0x17e)]();if(!_0x53fbe2)return logger['warn']('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.'),{'newState':this[_0x375b4b(0x1b4)]()||this[_0x375b4b(0x1a1)],'isNewFailure':![]};try{let _0x52b192=this[_0x375b4b(0x1b4)]();!_0x52b192&&(_0x52b192=JSON[_0x375b4b(0x17a)](JSON[_0x375b4b(0x1a8)](this[_0x375b4b(0x1a1)])));if(!_0x52b192['uniqueFailedTests']||_0x309bd6[_0x375b4b(0x196)](typeof _0x52b192[_0x375b4b(0x18c)][Symbol[_0x375b4b(0x18d)]],_0x309bd6[_0x375b4b(0x1b2)]))_0x52b192['uniqueFailedTests']=new Set();else Array['isArray'](_0x52b192['uniqueFailedTests'])&&(_0x52b192[_0x375b4b(0x18c)]=new Set(_0x52b192[_0x375b4b(0x18c)]));_0x52b192[_0x375b4b(0x17b)]=_0x18b640;let _0x766a18=![];_0x309bd6[_0x375b4b(0x197)](_0x22efda[_0x375b4b(0x1a5)],_0x309bd6['eKIgl'])&&(_0x52b192[_0x375b4b(0x198)]+=0x1,!_0x52b192[_0x375b4b(0x18c)][_0x375b4b(0x1a2)](_0x22efda['fullName'])&&(_0x52b192[_0x375b4b(0x18c)]['add'](_0x22efda[_0x375b4b(0x188)]),_0x766a18=!![]));await this['writeState'](_0x52b192);const _0x21e507={};return _0x21e507[_0x375b4b(0x17f)]=_0x52b192,_0x21e507[_0x375b4b(0x1b5)]=_0x766a18,_0x21e507;}finally{await this[_0x375b4b(0x1b3)](_0x53fbe2);}}async[a130_0x85c84b(0x19c)](_0x2c20a2){const _0x432a86=a130_0x85c84b,_0x5ea9b0=await this[_0x432a86(0x17e)]();if(!_0x5ea9b0)return logger['warn']('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.'),this['readState']()||this[_0x432a86(0x1a1)];try{let _0x4a85d8=this['readState']();return!_0x4a85d8&&(_0x4a85d8=JSON[_0x432a86(0x17a)](JSON[_0x432a86(0x1a8)](this['defaultState']))),_0x4a85d8[_0x432a86(0x1ae)]=_0x2c20a2,await this[_0x432a86(0x1a7)](_0x4a85d8),_0x4a85d8;}finally{await this[_0x432a86(0x1b3)](_0x5ea9b0);}}}module['exports']=FileHelper;