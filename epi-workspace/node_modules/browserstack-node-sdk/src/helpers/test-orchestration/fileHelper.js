function a118_0x4905(){const _0x3f0ed6=['defaultState','GAksY','updateAPIFailedCount','newState','15JnuGbz','code','6181048pFjJPA',']\x20Error\x20creating\x20state\x20file:\x20','stateFilePath','../logger','error','iterator','65847lVMOQv','921630YPnsNb','from','failedTests','318678chxlDx','EEXIST','stack','uniqueFailedTests','3766288vUBsEy','writeState',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','readState','38ynpVMq','10131618bsPmnG','openSync','lockFilePath','KIauN','acquireLock','function','isArray','stringify',']\x20Error\x20releasing\x20lock:\x20','QwAgg','failed','lastAPIFailedCount','EwcbT','winstonLogger','has','existsSync','dJsls','GGUqf','fullName',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','KVdCE','recordTestResult','YHVrc','closeSync','totalTests','utf8',']\x20Error\x20reading\x20state\x20file:\x20','message','unlinkSync','warn','29784348YvZhvP'];a118_0x4905=function(){return _0x3f0ed6;};return a118_0x4905();}const a118_0x1f9fd5=a118_0x151f;(function(_0xeee504,_0x3fa34b){const _0x137ef2=a118_0x151f,_0x5e74bc=_0xeee504();while(!![]){try{const _0x5e0a4a=-parseInt(_0x137ef2(0x10d))/0x1*(-parseInt(_0x137ef2(0x119))/0x2)+parseInt(_0x137ef2(0x10e))/0x3+parseInt(_0x137ef2(0x107))/0x4+parseInt(_0x137ef2(0x105))/0x5*(parseInt(_0x137ef2(0x111))/0x6)+parseInt(_0x137ef2(0x11a))/0x7+-parseInt(_0x137ef2(0x115))/0x8+-parseInt(_0x137ef2(0x100))/0x9;if(_0x5e0a4a===_0x3fa34b)break;else _0x5e74bc['push'](_0x5e74bc['shift']());}catch(_0x2ad6d9){_0x5e74bc['push'](_0x5e74bc['shift']());}}}(a118_0x4905,0xe3148));function a118_0x151f(_0x51b2b0,_0x190210){const _0x4905f9=a118_0x4905();return a118_0x151f=function(_0x151f28,_0x25fdfa){_0x151f28=_0x151f28-0xfb;let _0x3c0135=_0x4905f9[_0x151f28];return _0x3c0135;},a118_0x151f(_0x51b2b0,_0x190210);}const fs=require('fs'),logger=require(a118_0x1f9fd5(0x10a))[a118_0x1f9fd5(0x127)],TAG='FailFastFileHelper';class FileHelper{constructor(_0x33a147,_0xdbf8ce,_0x43755b,_0x25fd78){const _0x24089e=a118_0x1f9fd5,_0x5c7586={};_0x5c7586[_0x24089e(0x12e)]='4|1|3|0|2',_0x5c7586['GGUqf']=_0x24089e(0xfb);const _0x1d7520=_0x5c7586,_0x38df69=_0x1d7520[_0x24089e(0x12e)]['split']('|');let _0xf36a6f=0x0;while(!![]){switch(_0x38df69[_0xf36a6f++]){case'0':this[_0x24089e(0x101)]=_0x25fd78;continue;case'1':this[_0x24089e(0x109)]=_0xdbf8ce;continue;case'2':if(!fs[_0x24089e(0x129)](this[_0x24089e(0x109)]))try{fs['writeFileSync'](this[_0x24089e(0x109)],'{}',_0x1d7520[_0x24089e(0x12b)]);}catch(_0x182795){logger[_0x24089e(0x10b)]('['+TAG+_0x24089e(0x108)+_0x182795[_0x24089e(0xfd)]+'\x20'+_0x182795['stack']);}continue;case'3':this['lockFilePath']=_0x43755b;continue;case'4':this['failFastConfig']=_0x33a147;continue;}break;}}async[a118_0x1f9fd5(0x11e)](){const _0x2c75aa=a118_0x1f9fd5,_0x450ebc={};_0x450ebc[_0x2c75aa(0x130)]=function(_0x2ec18c,_0x5de86f){return _0x2ec18c===_0x5de86f;},_0x450ebc['GmSBs']=_0x2c75aa(0x112);const _0x9c9b2=_0x450ebc;let _0x1ecee9;try{return _0x1ecee9=fs[_0x2c75aa(0x11b)](this[_0x2c75aa(0x11c)],'wx'),_0x1ecee9;}catch(_0x48ab3f){if(_0x9c9b2['YHVrc'](_0x48ab3f[_0x2c75aa(0x106)],_0x9c9b2['GmSBs']))return null;throw _0x48ab3f;}}async['releaseLock'](_0x564433){const _0x3b29fd=a118_0x1f9fd5;if(_0x564433)try{fs[_0x3b29fd(0x131)](_0x564433),fs[_0x3b29fd(0xfe)](this['lockFilePath']);}catch(_0x26b99f){logger[_0x3b29fd(0x10b)]('['+TAG+_0x3b29fd(0x122)+_0x26b99f[_0x3b29fd(0xfd)]+'\x20'+_0x26b99f[_0x3b29fd(0x113)]);}}[a118_0x1f9fd5(0x118)](){const _0x34258b=a118_0x1f9fd5,_0x1be7f3={};_0x1be7f3[_0x34258b(0x123)]='utf8';const _0x5eafaf=_0x1be7f3;try{const _0x894b5f=fs['readFileSync'](this[_0x34258b(0x109)],_0x5eafaf[_0x34258b(0x123)]);return JSON['parse'](_0x894b5f);}catch(_0x2aed16){return logger['error']('['+TAG+_0x34258b(0xfc)+_0x2aed16[_0x34258b(0xfd)]+'\x20'+_0x2aed16[_0x34258b(0x113)]),null;}}async['writeState'](_0x28c266){const _0x461365=a118_0x1f9fd5,_0x34ed8a={..._0x28c266,'uniqueFailedTests':Array[_0x461365(0x120)](_0x28c266['uniqueFailedTests'])?_0x28c266[_0x461365(0x114)]:Array[_0x461365(0x10f)](_0x28c266['uniqueFailedTests']||[])};try{fs['writeFileSync'](this['stateFilePath'],JSON['stringify'](_0x34ed8a,null,0x2));}catch(_0x273b4e){logger[_0x461365(0x10b)]('['+TAG+']\x20Error\x20writing\x20state\x20file:\x20'+_0x273b4e[_0x461365(0xfd)]+'\x20'+_0x273b4e[_0x461365(0x113)]);throw _0x273b4e;}}async[a118_0x1f9fd5(0x12f)](_0x44f90a,_0x15d3fd){const _0x1f285d=a118_0x1f9fd5,_0x263e71={};_0x263e71[_0x1f285d(0x126)]=function(_0x25fff0,_0x21576c){return _0x25fff0!==_0x21576c;},_0x263e71[_0x1f285d(0x102)]=_0x1f285d(0x11f),_0x263e71[_0x1f285d(0x12a)]=function(_0x48d8fd,_0x2aa34d){return _0x48d8fd===_0x2aa34d;},_0x263e71[_0x1f285d(0x11d)]=_0x1f285d(0x124);const _0x33960e=_0x263e71,_0xd811d=await this['acquireLock']();if(!_0xd811d)return logger[_0x1f285d(0xff)]('['+TAG+_0x1f285d(0x12d)),{'newState':this[_0x1f285d(0x118)]()||this[_0x1f285d(0x101)],'isNewFailure':![]};try{let _0xb63d4f=this['readState']();!_0xb63d4f&&(_0xb63d4f=JSON['parse'](JSON[_0x1f285d(0x121)](this[_0x1f285d(0x101)])));if(!_0xb63d4f['uniqueFailedTests']||_0x33960e[_0x1f285d(0x126)](typeof _0xb63d4f[_0x1f285d(0x114)][Symbol[_0x1f285d(0x10c)]],_0x33960e['GAksY']))_0xb63d4f[_0x1f285d(0x114)]=new Set();else Array[_0x1f285d(0x120)](_0xb63d4f[_0x1f285d(0x114)])&&(_0xb63d4f[_0x1f285d(0x114)]=new Set(_0xb63d4f['uniqueFailedTests']));_0xb63d4f[_0x1f285d(0x132)]=_0x15d3fd;let _0x6c844=![];_0x33960e['dJsls'](_0x44f90a['status'],_0x33960e[_0x1f285d(0x11d)])&&(_0xb63d4f[_0x1f285d(0x110)]+=0x1,!_0xb63d4f['uniqueFailedTests'][_0x1f285d(0x128)](_0x44f90a['fullName'])&&(_0xb63d4f[_0x1f285d(0x114)]['add'](_0x44f90a[_0x1f285d(0x12c)]),_0x6c844=!![]));await this[_0x1f285d(0x116)](_0xb63d4f);const _0x58a042={};return _0x58a042[_0x1f285d(0x104)]=_0xb63d4f,_0x58a042['isNewFailure']=_0x6c844,_0x58a042;}finally{await this['releaseLock'](_0xd811d);}}async[a118_0x1f9fd5(0x103)](_0x186f97){const _0x40e9eb=a118_0x1f9fd5,_0x438bd7=await this[_0x40e9eb(0x11e)]();if(!_0x438bd7)return logger[_0x40e9eb(0xff)]('['+TAG+_0x40e9eb(0x117)),this['readState']()||this[_0x40e9eb(0x101)];try{let _0x124cf9=this[_0x40e9eb(0x118)]();return!_0x124cf9&&(_0x124cf9=JSON['parse'](JSON[_0x40e9eb(0x121)](this[_0x40e9eb(0x101)]))),_0x124cf9[_0x40e9eb(0x125)]=_0x186f97,await this['writeState'](_0x124cf9),_0x124cf9;}finally{await this['releaseLock'](_0x438bd7);}}}module['exports']=FileHelper;