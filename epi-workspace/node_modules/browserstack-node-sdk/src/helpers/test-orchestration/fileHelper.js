const a128_0x5bf2d8=a128_0x2dac;(function(_0xab87ac,_0x1fe71a){const _0x4f1597=a128_0x2dac,_0x118319=_0xab87ac();while(!![]){try{const _0x56dd=parseInt(_0x4f1597(0xf5))/0x1*(-parseInt(_0x4f1597(0xec))/0x2)+-parseInt(_0x4f1597(0x11d))/0x3+parseInt(_0x4f1597(0xf2))/0x4*(-parseInt(_0x4f1597(0xf3))/0x5)+-parseInt(_0x4f1597(0x104))/0x6+parseInt(_0x4f1597(0xe9))/0x7+-parseInt(_0x4f1597(0xfc))/0x8+-parseInt(_0x4f1597(0x105))/0x9*(-parseInt(_0x4f1597(0x101))/0xa);if(_0x56dd===_0x1fe71a)break;else _0x118319['push'](_0x118319['shift']());}catch(_0x36700a){_0x118319['push'](_0x118319['shift']());}}}(a128_0x4d2c,0x5f5da));function a128_0x2dac(_0x3e9768,_0x350b23){const _0x4d2cbe=a128_0x4d2c();return a128_0x2dac=function(_0x2dac8a,_0x5cfb35){_0x2dac8a=_0x2dac8a-0xe6;let _0x454fe3=_0x4d2cbe[_0x2dac8a];return _0x454fe3;},a128_0x2dac(_0x3e9768,_0x350b23);}const fs=require('fs'),logger=require('../logger')[a128_0x5bf2d8(0x102)],TAG=a128_0x5bf2d8(0x127);function a128_0x4d2c(){const _0x149dc4=['iterator','lockFilePath','openSync','existsSync',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','stack','readFileSync','4|3|0|1|2','FailFastFileHelper','writeState','umPNZ','pAoxL','1075263NGtLWO','isNewFailure','mRiiu','664kIPehw','HzCQc','stringify','split','failed','has','1436776VbJGAj','5QXijhU','fullName','2031LOSubf','code','error','newState','AYgOO','closeSync','defaultState','3363664bGsizM','from','isArray','wdAQM','status','72860sVYrjk','winstonLogger','mpFUB','2858370hrCYnq','3339jirWVK','dnBbb',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','stateFilePath','warn','utf8','failedTests','uniqueFailedTests','ubYyA','parse','unlinkSync','readState','updateAPIFailedCount','acquireLock','totalTests','EEXIST','failFastConfig','exports','add','function',']\x20Error\x20reading\x20state\x20file:\x20',']\x20Error\x20writing\x20state\x20file:\x20','message','releaseLock','1607274zzaSMP','writeFileSync'];a128_0x4d2c=function(){return _0x149dc4;};return a128_0x4d2c();}class FileHelper{constructor(_0x4a296f,_0x10b471,_0x547de6,_0xdf4b4b){const _0x2c9b53=a128_0x5bf2d8,_0x2198cc={};_0x2198cc[_0x2c9b53(0x10d)]=_0x2c9b53(0x126),_0x2198cc[_0x2c9b53(0xed)]='utf8';const _0x55c2e6=_0x2198cc,_0x1ba352=_0x55c2e6[_0x2c9b53(0x10d)][_0x2c9b53(0xef)]('|');let _0x5d5a9e=0x0;while(!![]){switch(_0x1ba352[_0x5d5a9e++]){case'0':this[_0x2c9b53(0x120)]=_0x547de6;continue;case'1':this[_0x2c9b53(0xfb)]=_0xdf4b4b;continue;case'2':if(!fs[_0x2c9b53(0x122)](this[_0x2c9b53(0x108)]))try{fs[_0x2c9b53(0x11e)](this[_0x2c9b53(0x108)],'{}',_0x55c2e6[_0x2c9b53(0xed)]);}catch(_0x1ac895){logger['error']('['+TAG+']\x20Error\x20creating\x20state\x20file:\x20'+_0x1ac895['message']+'\x20'+_0x1ac895[_0x2c9b53(0x124)]);}continue;case'3':this[_0x2c9b53(0x108)]=_0x10b471;continue;case'4':this[_0x2c9b53(0x115)]=_0x4a296f;continue;}break;}}async['acquireLock'](){const _0x4f0992=a128_0x5bf2d8,_0x3db467={};_0x3db467['pAoxL']=function(_0x190b90,_0x45fcf9){return _0x190b90===_0x45fcf9;},_0x3db467['dnBbb']=_0x4f0992(0x114);const _0x513524=_0x3db467;let _0x52223a;try{return _0x52223a=fs[_0x4f0992(0x121)](this[_0x4f0992(0x120)],'wx'),_0x52223a;}catch(_0x48b80c){if(_0x513524[_0x4f0992(0xe8)](_0x48b80c[_0x4f0992(0xf6)],_0x513524[_0x4f0992(0x106)]))return null;throw _0x48b80c;}}async['releaseLock'](_0x316321){const _0xa77d1c=a128_0x5bf2d8;if(_0x316321)try{fs[_0xa77d1c(0xfa)](_0x316321),fs[_0xa77d1c(0x10f)](this[_0xa77d1c(0x120)]);}catch(_0xa34ecc){logger[_0xa77d1c(0xf7)]('['+TAG+']\x20Error\x20releasing\x20lock:\x20'+_0xa34ecc['message']+'\x20'+_0xa34ecc[_0xa77d1c(0x124)]);}}[a128_0x5bf2d8(0x110)](){const _0x4378a2=a128_0x5bf2d8,_0x427fc3={};_0x427fc3[_0x4378a2(0xe7)]=_0x4378a2(0x10a);const _0x57d940=_0x427fc3;try{const _0x24f13a=fs[_0x4378a2(0x125)](this[_0x4378a2(0x108)],_0x57d940[_0x4378a2(0xe7)]);return JSON[_0x4378a2(0x10e)](_0x24f13a);}catch(_0x92ab07){return logger[_0x4378a2(0xf7)]('['+TAG+_0x4378a2(0x119)+_0x92ab07[_0x4378a2(0x11b)]+'\x20'+_0x92ab07[_0x4378a2(0x124)]),null;}}async['writeState'](_0x3032d2){const _0x1aa006=a128_0x5bf2d8,_0x363fbb={..._0x3032d2,'uniqueFailedTests':Array[_0x1aa006(0xfe)](_0x3032d2[_0x1aa006(0x10c)])?_0x3032d2['uniqueFailedTests']:Array[_0x1aa006(0xfd)](_0x3032d2[_0x1aa006(0x10c)]||[])};try{fs['writeFileSync'](this[_0x1aa006(0x108)],JSON[_0x1aa006(0xee)](_0x363fbb,null,0x2));}catch(_0x5513ac){logger['error']('['+TAG+_0x1aa006(0x11a)+_0x5513ac[_0x1aa006(0x11b)]+'\x20'+_0x5513ac[_0x1aa006(0x124)]);throw _0x5513ac;}}async['recordTestResult'](_0x580cde,_0x1e85d5){const _0x1c78c4=a128_0x5bf2d8,_0x5570c6={};_0x5570c6[_0x1c78c4(0xf9)]=function(_0x3c3425,_0x475009){return _0x3c3425!==_0x475009;},_0x5570c6['wdAQM']=_0x1c78c4(0x118),_0x5570c6[_0x1c78c4(0xeb)]=function(_0x3ec683,_0x41fe19){return _0x3ec683===_0x41fe19;},_0x5570c6['mpFUB']=_0x1c78c4(0xf0);const _0x4ae239=_0x5570c6,_0xeecba5=await this[_0x1c78c4(0x112)]();if(!_0xeecba5)return logger[_0x1c78c4(0x109)]('['+TAG+_0x1c78c4(0x107)),{'newState':this[_0x1c78c4(0x110)]()||this['defaultState'],'isNewFailure':![]};try{let _0x5f4485=this[_0x1c78c4(0x110)]();!_0x5f4485&&(_0x5f4485=JSON[_0x1c78c4(0x10e)](JSON['stringify'](this[_0x1c78c4(0xfb)])));if(!_0x5f4485['uniqueFailedTests']||_0x4ae239[_0x1c78c4(0xf9)](typeof _0x5f4485[_0x1c78c4(0x10c)][Symbol[_0x1c78c4(0x11f)]],_0x4ae239[_0x1c78c4(0xff)]))_0x5f4485[_0x1c78c4(0x10c)]=new Set();else Array[_0x1c78c4(0xfe)](_0x5f4485[_0x1c78c4(0x10c)])&&(_0x5f4485[_0x1c78c4(0x10c)]=new Set(_0x5f4485[_0x1c78c4(0x10c)]));_0x5f4485[_0x1c78c4(0x113)]=_0x1e85d5;let _0x9995cc=![];_0x4ae239[_0x1c78c4(0xeb)](_0x580cde[_0x1c78c4(0x100)],_0x4ae239[_0x1c78c4(0x103)])&&(_0x5f4485[_0x1c78c4(0x10b)]+=0x1,!_0x5f4485[_0x1c78c4(0x10c)][_0x1c78c4(0xf1)](_0x580cde[_0x1c78c4(0xf4)])&&(_0x5f4485['uniqueFailedTests'][_0x1c78c4(0x117)](_0x580cde[_0x1c78c4(0xf4)]),_0x9995cc=!![]));await this[_0x1c78c4(0xe6)](_0x5f4485);const _0xacdf53={};return _0xacdf53[_0x1c78c4(0xf8)]=_0x5f4485,_0xacdf53[_0x1c78c4(0xea)]=_0x9995cc,_0xacdf53;}finally{await this[_0x1c78c4(0x11c)](_0xeecba5);}}async[a128_0x5bf2d8(0x111)](_0x48dfcd){const _0x457691=a128_0x5bf2d8,_0x172ffd=await this['acquireLock']();if(!_0x172ffd)return logger[_0x457691(0x109)]('['+TAG+_0x457691(0x123)),this[_0x457691(0x110)]()||this[_0x457691(0xfb)];try{let _0xa0fb5f=this[_0x457691(0x110)]();return!_0xa0fb5f&&(_0xa0fb5f=JSON['parse'](JSON[_0x457691(0xee)](this[_0x457691(0xfb)]))),_0xa0fb5f['lastAPIFailedCount']=_0x48dfcd,await this[_0x457691(0xe6)](_0xa0fb5f),_0xa0fb5f;}finally{await this[_0x457691(0x11c)](_0x172ffd);}}}module[a128_0x5bf2d8(0x116)]=FileHelper;