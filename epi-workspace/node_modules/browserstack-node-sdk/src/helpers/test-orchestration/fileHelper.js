const a123_0x25e90c=a123_0x4d56;(function(_0x3f29cf,_0x571c02){const _0x35cbaa=a123_0x4d56,_0x545d49=_0x3f29cf();while(!![]){try{const _0x5aff40=parseInt(_0x35cbaa(0xf0))/0x1*(-parseInt(_0x35cbaa(0xf2))/0x2)+parseInt(_0x35cbaa(0xeb))/0x3*(parseInt(_0x35cbaa(0x11c))/0x4)+parseInt(_0x35cbaa(0x128))/0x5+-parseInt(_0x35cbaa(0x119))/0x6+-parseInt(_0x35cbaa(0x109))/0x7+-parseInt(_0x35cbaa(0x110))/0x8*(-parseInt(_0x35cbaa(0xfd))/0x9)+-parseInt(_0x35cbaa(0xf5))/0xa*(-parseInt(_0x35cbaa(0x117))/0xb);if(_0x5aff40===_0x571c02)break;else _0x545d49['push'](_0x545d49['shift']());}catch(_0x282aff){_0x545d49['push'](_0x545d49['shift']());}}}(a123_0x5b75,0x5db20));function a123_0x4d56(_0x452803,_0x28a687){const _0x5b754d=a123_0x5b75();return a123_0x4d56=function(_0x4d5667,_0x28d6a5){_0x4d5667=_0x4d5667-0xe8;let _0x2f0eab=_0x5b754d[_0x4d5667];return _0x2f0eab;},a123_0x4d56(_0x452803,_0x28a687);}const fs=require('fs'),logger=require(a123_0x25e90c(0xe9))[a123_0x25e90c(0xf9)],TAG=a123_0x25e90c(0xf6);function a123_0x5b75(){const _0x171fda=['status',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','parse','defaultState','2913296RYIuhV','message','UVCIW','dIPid','function','lockFilePath','updateAPIFailedCount','11nVFpBx','failed','898794tumPpu','writeState',']\x20Error\x20writing\x20state\x20file:\x20','16700tjWYpW','add','existsSync','warn',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','YsVei','stringify','readState','stateFilePath','EEXIST','newState','lastAPIFailedCount','279395Telkam','openSync','totalTests','../logger','utf8','33BPESpi',']\x20Error\x20releasing\x20lock:\x20','isNewFailure',']\x20Error\x20reading\x20state\x20file:\x20','unlinkSync','4FSAJwJ','iterator','303436FxMXHb','isArray','releaseLock','10612090XgKegQ','FailFastFileHelper','puYdz','recordTestResult','winstonLogger','uniqueFailedTests','2|3|4|0|1','fullName','18NTicEc','readFileSync','code','error','zkgcR','MswzP','vTfKC','PpANi','LWjEY','acquireLock','writeFileSync','stack','5256230CrfIju','closeSync','failedTests'];a123_0x5b75=function(){return _0x171fda;};return a123_0x5b75();}class FileHelper{constructor(_0x29b7b2,_0xcb004f,_0x5c2e65,_0x34c745){const _0x591b01=a123_0x25e90c,_0x42cbac={};_0x42cbac[_0x591b01(0x121)]=_0x591b01(0xfb),_0x42cbac[_0x591b01(0x102)]=_0x591b01(0xea);const _0x3aef0f=_0x42cbac,_0x240bf9=_0x3aef0f[_0x591b01(0x121)]['split']('|');let _0x257dea=0x0;while(!![]){switch(_0x240bf9[_0x257dea++]){case'0':this[_0x591b01(0x10f)]=_0x34c745;continue;case'1':if(!fs[_0x591b01(0x11e)](this['stateFilePath']))try{fs['writeFileSync'](this[_0x591b01(0x124)],'{}',_0x3aef0f[_0x591b01(0x102)]);}catch(_0x377f95){logger[_0x591b01(0x100)]('['+TAG+']\x20Error\x20creating\x20state\x20file:\x20'+_0x377f95[_0x591b01(0x111)]+'\x20'+_0x377f95[_0x591b01(0x108)]);}continue;case'2':this['failFastConfig']=_0x29b7b2;continue;case'3':this[_0x591b01(0x124)]=_0xcb004f;continue;case'4':this['lockFilePath']=_0x5c2e65;continue;}break;}}async[a123_0x25e90c(0x106)](){const _0x45afdf=a123_0x25e90c,_0x231c58={};_0x231c58[_0x45afdf(0x112)]=function(_0x51f824,_0x5c510f){return _0x51f824===_0x5c510f;},_0x231c58[_0x45afdf(0x113)]=_0x45afdf(0x125);const _0x202bad=_0x231c58;let _0x5b0185;try{return _0x5b0185=fs[_0x45afdf(0x129)](this[_0x45afdf(0x115)],'wx'),_0x5b0185;}catch(_0xcd2a9d){if(_0x202bad[_0x45afdf(0x112)](_0xcd2a9d[_0x45afdf(0xff)],_0x202bad[_0x45afdf(0x113)]))return null;throw _0xcd2a9d;}}async[a123_0x25e90c(0xf4)](_0x28cdc6){const _0x4bf9dd=a123_0x25e90c;if(_0x28cdc6)try{fs[_0x4bf9dd(0x10a)](_0x28cdc6),fs[_0x4bf9dd(0xef)](this[_0x4bf9dd(0x115)]);}catch(_0x4eb6d0){logger[_0x4bf9dd(0x100)]('['+TAG+_0x4bf9dd(0xec)+_0x4eb6d0[_0x4bf9dd(0x111)]+'\x20'+_0x4eb6d0[_0x4bf9dd(0x108)]);}}[a123_0x25e90c(0x123)](){const _0x13174a=a123_0x25e90c,_0x5b84c4={};_0x5b84c4[_0x13174a(0x103)]='utf8';const _0x38ae7a=_0x5b84c4;try{const _0x13fc47=fs[_0x13174a(0xfe)](this['stateFilePath'],_0x38ae7a[_0x13174a(0x103)]);return JSON[_0x13174a(0x10e)](_0x13fc47);}catch(_0x4eb4bb){return logger[_0x13174a(0x100)]('['+TAG+_0x13174a(0xee)+_0x4eb4bb[_0x13174a(0x111)]+'\x20'+_0x4eb4bb[_0x13174a(0x108)]),null;}}async['writeState'](_0x3805d9){const _0x50fd51=a123_0x25e90c,_0x1b8f37={..._0x3805d9,'uniqueFailedTests':Array[_0x50fd51(0xf3)](_0x3805d9['uniqueFailedTests'])?_0x3805d9[_0x50fd51(0xfa)]:Array['from'](_0x3805d9['uniqueFailedTests']||[])};try{fs[_0x50fd51(0x107)](this[_0x50fd51(0x124)],JSON[_0x50fd51(0x122)](_0x1b8f37,null,0x2));}catch(_0x2ede0b){logger['error']('['+TAG+_0x50fd51(0x11b)+_0x2ede0b[_0x50fd51(0x111)]+'\x20'+_0x2ede0b['stack']);throw _0x2ede0b;}}async[a123_0x25e90c(0xf8)](_0x247e30,_0x564c83){const _0x5eba85=a123_0x25e90c,_0x128cd7={};_0x128cd7[_0x5eba85(0x101)]=function(_0x34a699,_0x50aaf5){return _0x34a699!==_0x50aaf5;},_0x128cd7[_0x5eba85(0x105)]=_0x5eba85(0x114),_0x128cd7[_0x5eba85(0x104)]=function(_0x3f716f,_0x11feca){return _0x3f716f===_0x11feca;},_0x128cd7['puYdz']=_0x5eba85(0x118);const _0x341700=_0x128cd7,_0x616c55=await this['acquireLock']();if(!_0x616c55)return logger[_0x5eba85(0x11f)]('['+TAG+_0x5eba85(0x120)),{'newState':this['readState']()||this[_0x5eba85(0x10f)],'isNewFailure':![]};try{let _0x330498=this['readState']();!_0x330498&&(_0x330498=JSON[_0x5eba85(0x10e)](JSON[_0x5eba85(0x122)](this[_0x5eba85(0x10f)])));if(!_0x330498[_0x5eba85(0xfa)]||_0x341700['zkgcR'](typeof _0x330498['uniqueFailedTests'][Symbol[_0x5eba85(0xf1)]],_0x341700[_0x5eba85(0x105)]))_0x330498[_0x5eba85(0xfa)]=new Set();else Array[_0x5eba85(0xf3)](_0x330498['uniqueFailedTests'])&&(_0x330498[_0x5eba85(0xfa)]=new Set(_0x330498[_0x5eba85(0xfa)]));_0x330498[_0x5eba85(0xe8)]=_0x564c83;let _0x49c621=![];_0x341700[_0x5eba85(0x104)](_0x247e30[_0x5eba85(0x10c)],_0x341700[_0x5eba85(0xf7)])&&(_0x330498[_0x5eba85(0x10b)]+=0x1,!_0x330498[_0x5eba85(0xfa)]['has'](_0x247e30['fullName'])&&(_0x330498[_0x5eba85(0xfa)][_0x5eba85(0x11d)](_0x247e30[_0x5eba85(0xfc)]),_0x49c621=!![]));await this[_0x5eba85(0x11a)](_0x330498);const _0x40b114={};return _0x40b114[_0x5eba85(0x126)]=_0x330498,_0x40b114[_0x5eba85(0xed)]=_0x49c621,_0x40b114;}finally{await this['releaseLock'](_0x616c55);}}async[a123_0x25e90c(0x116)](_0x2854c9){const _0x506f42=a123_0x25e90c,_0x2a6b40=await this[_0x506f42(0x106)]();if(!_0x2a6b40)return logger['warn']('['+TAG+_0x506f42(0x10d)),this[_0x506f42(0x123)]()||this[_0x506f42(0x10f)];try{let _0x42f8c6=this['readState']();return!_0x42f8c6&&(_0x42f8c6=JSON[_0x506f42(0x10e)](JSON[_0x506f42(0x122)](this[_0x506f42(0x10f)]))),_0x42f8c6[_0x506f42(0x127)]=_0x2854c9,await this[_0x506f42(0x11a)](_0x42f8c6),_0x42f8c6;}finally{await this['releaseLock'](_0x2a6b40);}}}module['exports']=FileHelper;