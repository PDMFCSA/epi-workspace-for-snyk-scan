const a123_0x1f0aa5=a123_0x1056;function a123_0x1056(_0x39d390,_0x2be9fb){const _0x11f4d1=a123_0x11f4();return a123_0x1056=function(_0x1056c4,_0x26a7ed){_0x1056c4=_0x1056c4-0x1e9;let _0x5b068e=_0x11f4d1[_0x1056c4];return _0x5b068e;},a123_0x1056(_0x39d390,_0x2be9fb);}(function(_0x15a07b,_0x2be571){const _0x3042e0=a123_0x1056,_0x5823c3=_0x15a07b();while(!![]){try{const _0x683192=parseInt(_0x3042e0(0x1ed))/0x1+-parseInt(_0x3042e0(0x1f8))/0x2+-parseInt(_0x3042e0(0x21a))/0x3+parseInt(_0x3042e0(0x1fa))/0x4*(parseInt(_0x3042e0(0x1e9))/0x5)+-parseInt(_0x3042e0(0x205))/0x6+-parseInt(_0x3042e0(0x206))/0x7*(-parseInt(_0x3042e0(0x210))/0x8)+parseInt(_0x3042e0(0x213))/0x9*(-parseInt(_0x3042e0(0x21e))/0xa);if(_0x683192===_0x2be571)break;else _0x5823c3['push'](_0x5823c3['shift']());}catch(_0x28fb64){_0x5823c3['push'](_0x5823c3['shift']());}}}(a123_0x11f4,0x581a6));const fs=require('fs'),logger=require('../logger')['winstonLogger'],TAG='FailFastFileHelper';class FileHelper{constructor(_0x59c837,_0x5c8437,_0x4a6284,_0x8ae395){const _0x39ef61=a123_0x1056,_0x50cce1={};_0x50cce1['fzOWI']='2|3|4|1|0',_0x50cce1[_0x39ef61(0x1f6)]='utf8';const _0x37490a=_0x50cce1,_0x17e280=_0x37490a[_0x39ef61(0x1f7)][_0x39ef61(0x1f4)]('|');let _0x2b7eac=0x0;while(!![]){switch(_0x17e280[_0x2b7eac++]){case'0':if(!fs[_0x39ef61(0x203)](this[_0x39ef61(0x1ff)]))try{fs[_0x39ef61(0x20a)](this[_0x39ef61(0x1ff)],'{}',_0x37490a[_0x39ef61(0x1f6)]);}catch(_0x433d84){logger[_0x39ef61(0x1fe)]('['+TAG+_0x39ef61(0x1ea)+_0x433d84[_0x39ef61(0x21b)]+'\x20'+_0x433d84['stack']);}continue;case'1':this[_0x39ef61(0x1f2)]=_0x8ae395;continue;case'2':this[_0x39ef61(0x1f9)]=_0x59c837;continue;case'3':this[_0x39ef61(0x1ff)]=_0x5c8437;continue;case'4':this[_0x39ef61(0x20f)]=_0x4a6284;continue;}break;}}async[a123_0x1f0aa5(0x20b)](){const _0x26821d=a123_0x1f0aa5,_0x1a0637={};_0x1a0637[_0x26821d(0x1fd)]=function(_0x14f450,_0xa92d99){return _0x14f450===_0xa92d99;},_0x1a0637[_0x26821d(0x214)]='EEXIST';const _0x384192=_0x1a0637;let _0x127e46;try{return _0x127e46=fs[_0x26821d(0x217)](this['lockFilePath'],'wx'),_0x127e46;}catch(_0x365de0){if(_0x384192[_0x26821d(0x1fd)](_0x365de0[_0x26821d(0x1ee)],_0x384192[_0x26821d(0x214)]))return null;throw _0x365de0;}}async[a123_0x1f0aa5(0x218)](_0xda60f8){const _0x574d94=a123_0x1f0aa5;if(_0xda60f8)try{fs['closeSync'](_0xda60f8),fs[_0x574d94(0x1ef)](this[_0x574d94(0x20f)]);}catch(_0x1c2a64){logger['error']('['+TAG+_0x574d94(0x202)+_0x1c2a64[_0x574d94(0x21b)]+'\x20'+_0x1c2a64[_0x574d94(0x1fc)]);}}['readState'](){const _0x49fedd=a123_0x1f0aa5,_0x111cec={};_0x111cec['egquV']='utf8';const _0x262645=_0x111cec;try{const _0x4c15e0=fs[_0x49fedd(0x1f3)](this[_0x49fedd(0x1ff)],_0x262645[_0x49fedd(0x200)]);return JSON[_0x49fedd(0x20c)](_0x4c15e0);}catch(_0x108df8){return logger[_0x49fedd(0x1fe)]('['+TAG+']\x20Error\x20reading\x20state\x20file:\x20'+_0x108df8[_0x49fedd(0x21b)]+'\x20'+_0x108df8[_0x49fedd(0x1fc)]),null;}}async[a123_0x1f0aa5(0x1eb)](_0x4aa3ff){const _0x11fe60=a123_0x1f0aa5,_0x403be4={..._0x4aa3ff,'uniqueFailedTests':Array['isArray'](_0x4aa3ff['uniqueFailedTests'])?_0x4aa3ff[_0x11fe60(0x204)]:Array['from'](_0x4aa3ff['uniqueFailedTests']||[])};try{fs[_0x11fe60(0x20a)](this[_0x11fe60(0x1ff)],JSON['stringify'](_0x403be4,null,0x2));}catch(_0x140ce6){logger[_0x11fe60(0x1fe)]('['+TAG+_0x11fe60(0x1ec)+_0x140ce6[_0x11fe60(0x21b)]+'\x20'+_0x140ce6['stack']);throw _0x140ce6;}}async[a123_0x1f0aa5(0x21f)](_0x9a9242,_0x18653e){const _0x2a325e=a123_0x1f0aa5,_0x40f79b={};_0x40f79b[_0x2a325e(0x1f0)]=function(_0xbd756a,_0x3afe0d){return _0xbd756a!==_0x3afe0d;},_0x40f79b['ACynH']=_0x2a325e(0x208),_0x40f79b[_0x2a325e(0x216)]=function(_0x5948ea,_0x1f7d36){return _0x5948ea===_0x1f7d36;},_0x40f79b[_0x2a325e(0x1fb)]=_0x2a325e(0x1f1);const _0x490375=_0x40f79b,_0x2b3bf0=await this[_0x2a325e(0x20b)]();if(!_0x2b3bf0)return logger['warn']('['+TAG+_0x2a325e(0x219)),{'newState':this['readState']()||this['defaultState'],'isNewFailure':![]};try{let _0x3152f6=this[_0x2a325e(0x209)]();!_0x3152f6&&(_0x3152f6=JSON['parse'](JSON[_0x2a325e(0x207)](this['defaultState'])));if(!_0x3152f6[_0x2a325e(0x204)]||_0x490375[_0x2a325e(0x1f0)](typeof _0x3152f6[_0x2a325e(0x204)][Symbol[_0x2a325e(0x20e)]],_0x490375['ACynH']))_0x3152f6[_0x2a325e(0x204)]=new Set();else Array[_0x2a325e(0x1f5)](_0x3152f6[_0x2a325e(0x204)])&&(_0x3152f6[_0x2a325e(0x204)]=new Set(_0x3152f6[_0x2a325e(0x204)]));_0x3152f6[_0x2a325e(0x201)]=_0x18653e;let _0x2411b2=![];_0x490375[_0x2a325e(0x216)](_0x9a9242['status'],_0x490375['XyAqy'])&&(_0x3152f6['failedTests']+=0x1,!_0x3152f6[_0x2a325e(0x204)]['has'](_0x9a9242[_0x2a325e(0x21d)])&&(_0x3152f6[_0x2a325e(0x204)][_0x2a325e(0x212)](_0x9a9242[_0x2a325e(0x21d)]),_0x2411b2=!![]));await this[_0x2a325e(0x1eb)](_0x3152f6);const _0x1e89cb={};return _0x1e89cb['newState']=_0x3152f6,_0x1e89cb[_0x2a325e(0x211)]=_0x2411b2,_0x1e89cb;}finally{await this[_0x2a325e(0x218)](_0x2b3bf0);}}async['updateAPIFailedCount'](_0xb001fe){const _0x2f471f=a123_0x1f0aa5,_0x13e1f2=await this['acquireLock']();if(!_0x13e1f2)return logger[_0x2f471f(0x215)]('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.'),this['readState']()||this['defaultState'];try{let _0x153881=this[_0x2f471f(0x209)]();return!_0x153881&&(_0x153881=JSON[_0x2f471f(0x20c)](JSON[_0x2f471f(0x207)](this['defaultState']))),_0x153881[_0x2f471f(0x21c)]=_0xb001fe,await this[_0x2f471f(0x1eb)](_0x153881),_0x153881;}finally{await this[_0x2f471f(0x218)](_0x13e1f2);}}}module[a123_0x1f0aa5(0x20d)]=FileHelper;function a123_0x11f4(){const _0x14db02=['totalTests',']\x20Error\x20releasing\x20lock:\x20','existsSync','uniqueFailedTests','1052862MwwWEQ','7CzPuhT','stringify','function','readState','writeFileSync','acquireLock','parse','exports','iterator','lockFilePath','5240176sPYvZj','isNewFailure','add','186669bYzlMh','WsbfT','warn','jWQUg','openSync','releaseLock',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','957744ZDqkor','message','lastAPIFailedCount','fullName','80WWYElv','recordTestResult','25455DUxLio',']\x20Error\x20creating\x20state\x20file:\x20','writeState',']\x20Error\x20writing\x20state\x20file:\x20','488000ZNjVNL','code','unlinkSync','alfHz','failed','defaultState','readFileSync','split','isArray','oyLnD','fzOWI','965920otJHye','failFastConfig','284DuRsSw','XyAqy','stack','wjxeg','error','stateFilePath','egquV'];a123_0x11f4=function(){return _0x14db02;};return a123_0x11f4();}