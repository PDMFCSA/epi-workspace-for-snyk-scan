const a128_0x59f54e=a128_0x4ce9;function a128_0x14f5(){const _0x55c29b=['../logger','exports','split','existsSync','readFileSync','fullName','readState','from','recordTestResult','125109IxDEJi','334210eOCDjl','EEXIST','updateAPIFailedCount','iterator','LowdP','Ihzke',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','failed','3001788pZgNKt','382167BrTwmI','utf8','acquireLock','add','BrAuE','has','stateFilePath','790jVnJIb','newState','isArray','code',']\x20Error\x20releasing\x20lock:\x20',']\x20Error\x20reading\x20state\x20file:\x20','493402UkYWqu','releaseLock','writeState','writeFileSync','failedTests','stack','defaultState','message','parse','fXSBX','lastAPIFailedCount','yqNxw','stringify','2950540aPrlAm','totalTests','isNewFailure','failFastConfig','error','kWNuk','2|1|0|3|4','lockFilePath','2031485WTAkxg',']\x20Error\x20creating\x20state\x20file:\x20','3tvNBLO','warn','16tBKIEM','LGmpU','uniqueFailedTests','vZSPv','openSync'];a128_0x14f5=function(){return _0x55c29b;};return a128_0x14f5();}(function(_0x299b9e,_0x235715){const _0x3dc5a6=a128_0x4ce9,_0x2c098e=_0x299b9e();while(!![]){try{const _0x1bd030=parseInt(_0x3dc5a6(0xc9))/0x1+parseInt(_0x3dc5a6(0xc0))/0x2+parseInt(_0x3dc5a6(0xaf))/0x3*(parseInt(_0x3dc5a6(0xe3))/0x4)+-parseInt(_0x3dc5a6(0xad))/0x5+parseInt(_0x3dc5a6(0xc8))/0x6+-parseInt(_0x3dc5a6(0xd6))/0x7*(-parseInt(_0x3dc5a6(0xb1))/0x8)+parseInt(_0x3dc5a6(0xbf))/0x9*(-parseInt(_0x3dc5a6(0xd0))/0xa);if(_0x1bd030===_0x235715)break;else _0x2c098e['push'](_0x2c098e['shift']());}catch(_0x486381){_0x2c098e['push'](_0x2c098e['shift']());}}}(a128_0x14f5,0x67715));const fs=require('fs'),logger=require(a128_0x59f54e(0xb6))['winstonLogger'],TAG='FailFastFileHelper';function a128_0x4ce9(_0x4faa56,_0x5dec3d){const _0x14f5c5=a128_0x14f5();return a128_0x4ce9=function(_0x4ce991,_0x14a295){_0x4ce991=_0x4ce991-0xab;let _0x68a292=_0x14f5c5[_0x4ce991];return _0x68a292;},a128_0x4ce9(_0x4faa56,_0x5dec3d);}class FileHelper{constructor(_0x3584c0,_0x2984b5,_0x52eb20,_0x296f01){const _0x4b4a81=a128_0x59f54e,_0x4788fa={};_0x4788fa['vZSPv']=_0x4b4a81(0xab),_0x4788fa[_0x4b4a81(0xe1)]=_0x4b4a81(0xca);const _0x1dc343=_0x4788fa,_0x47ad44=_0x1dc343[_0x4b4a81(0xb4)][_0x4b4a81(0xb8)]('|');let _0x3ca728=0x0;while(!![]){switch(_0x47ad44[_0x3ca728++]){case'0':this[_0x4b4a81(0xac)]=_0x52eb20;continue;case'1':this[_0x4b4a81(0xcf)]=_0x2984b5;continue;case'2':this[_0x4b4a81(0xe6)]=_0x3584c0;continue;case'3':this['defaultState']=_0x296f01;continue;case'4':if(!fs[_0x4b4a81(0xb9)](this[_0x4b4a81(0xcf)]))try{fs[_0x4b4a81(0xd9)](this['stateFilePath'],'{}',_0x1dc343[_0x4b4a81(0xe1)]);}catch(_0x1b7445){logger[_0x4b4a81(0xe7)]('['+TAG+_0x4b4a81(0xae)+_0x1b7445['message']+'\x20'+_0x1b7445[_0x4b4a81(0xdb)]);}continue;}break;}}async[a128_0x59f54e(0xcb)](){const _0x96c40e=a128_0x59f54e,_0x49f575={};_0x49f575[_0x96c40e(0xb2)]=function(_0x489078,_0x3efd81){return _0x489078===_0x3efd81;},_0x49f575[_0x96c40e(0xdf)]=_0x96c40e(0xc1);const _0x4f3208=_0x49f575;let _0x328638;try{return _0x328638=fs[_0x96c40e(0xb5)](this[_0x96c40e(0xac)],'wx'),_0x328638;}catch(_0x2ac2d7){if(_0x4f3208[_0x96c40e(0xb2)](_0x2ac2d7[_0x96c40e(0xd3)],_0x4f3208[_0x96c40e(0xdf)]))return null;throw _0x2ac2d7;}}async[a128_0x59f54e(0xd7)](_0x49ee33){const _0x3d3777=a128_0x59f54e;if(_0x49ee33)try{fs['closeSync'](_0x49ee33),fs['unlinkSync'](this['lockFilePath']);}catch(_0x22dd08){logger['error']('['+TAG+_0x3d3777(0xd4)+_0x22dd08['message']+'\x20'+_0x22dd08['stack']);}}[a128_0x59f54e(0xbc)](){const _0x505620=a128_0x59f54e,_0x3cbbf0={};_0x3cbbf0['BrAuE']=_0x505620(0xca);const _0x34c2fd=_0x3cbbf0;try{const _0x48e504=fs[_0x505620(0xba)](this[_0x505620(0xcf)],_0x34c2fd[_0x505620(0xcd)]);return JSON[_0x505620(0xde)](_0x48e504);}catch(_0x19aa0f){return logger[_0x505620(0xe7)]('['+TAG+_0x505620(0xd5)+_0x19aa0f[_0x505620(0xdd)]+'\x20'+_0x19aa0f[_0x505620(0xdb)]),null;}}async[a128_0x59f54e(0xd8)](_0x818c34){const _0x4a135f=a128_0x59f54e,_0x2d8bb2={..._0x818c34,'uniqueFailedTests':Array['isArray'](_0x818c34['uniqueFailedTests'])?_0x818c34[_0x4a135f(0xb3)]:Array[_0x4a135f(0xbd)](_0x818c34[_0x4a135f(0xb3)]||[])};try{fs[_0x4a135f(0xd9)](this[_0x4a135f(0xcf)],JSON['stringify'](_0x2d8bb2,null,0x2));}catch(_0x5459bf){logger[_0x4a135f(0xe7)]('['+TAG+']\x20Error\x20writing\x20state\x20file:\x20'+_0x5459bf[_0x4a135f(0xdd)]+'\x20'+_0x5459bf[_0x4a135f(0xdb)]);throw _0x5459bf;}}async[a128_0x59f54e(0xbe)](_0x2383d0,_0x19ce36){const _0x567e78=a128_0x59f54e,_0x1215fd={};_0x1215fd[_0x567e78(0xc4)]=function(_0x11f5f8,_0x4ec9c7){return _0x11f5f8!==_0x4ec9c7;},_0x1215fd[_0x567e78(0xe8)]='function',_0x1215fd['Ihzke']=function(_0x47af83,_0x5a986a){return _0x47af83===_0x5a986a;},_0x1215fd['flQRV']=_0x567e78(0xc7);const _0x86bdec=_0x1215fd,_0x298587=await this[_0x567e78(0xcb)]();if(!_0x298587)return logger[_0x567e78(0xb0)]('['+TAG+']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.'),{'newState':this[_0x567e78(0xbc)]()||this[_0x567e78(0xdc)],'isNewFailure':![]};try{let _0x385777=this[_0x567e78(0xbc)]();!_0x385777&&(_0x385777=JSON['parse'](JSON[_0x567e78(0xe2)](this[_0x567e78(0xdc)])));if(!_0x385777[_0x567e78(0xb3)]||_0x86bdec[_0x567e78(0xc4)](typeof _0x385777[_0x567e78(0xb3)][Symbol[_0x567e78(0xc3)]],_0x86bdec[_0x567e78(0xe8)]))_0x385777[_0x567e78(0xb3)]=new Set();else Array[_0x567e78(0xd2)](_0x385777['uniqueFailedTests'])&&(_0x385777[_0x567e78(0xb3)]=new Set(_0x385777[_0x567e78(0xb3)]));_0x385777[_0x567e78(0xe4)]=_0x19ce36;let _0x198c30=![];_0x86bdec[_0x567e78(0xc5)](_0x2383d0['status'],_0x86bdec['flQRV'])&&(_0x385777[_0x567e78(0xda)]+=0x1,!_0x385777[_0x567e78(0xb3)][_0x567e78(0xce)](_0x2383d0[_0x567e78(0xbb)])&&(_0x385777[_0x567e78(0xb3)][_0x567e78(0xcc)](_0x2383d0[_0x567e78(0xbb)]),_0x198c30=!![]));await this[_0x567e78(0xd8)](_0x385777);const _0x5171cb={};return _0x5171cb[_0x567e78(0xd1)]=_0x385777,_0x5171cb[_0x567e78(0xe5)]=_0x198c30,_0x5171cb;}finally{await this[_0x567e78(0xd7)](_0x298587);}}async[a128_0x59f54e(0xc2)](_0xce7f11){const _0x226736=a128_0x59f54e,_0x2dc696=await this[_0x226736(0xcb)]();if(!_0x2dc696)return logger[_0x226736(0xb0)]('['+TAG+_0x226736(0xc6)),this[_0x226736(0xbc)]()||this['defaultState'];try{let _0x5e102c=this['readState']();return!_0x5e102c&&(_0x5e102c=JSON['parse'](JSON[_0x226736(0xe2)](this[_0x226736(0xdc)]))),_0x5e102c[_0x226736(0xe0)]=_0xce7f11,await this[_0x226736(0xd8)](_0x5e102c),_0x5e102c;}finally{await this[_0x226736(0xd7)](_0x2dc696);}}}module[a128_0x59f54e(0xb7)]=FileHelper;