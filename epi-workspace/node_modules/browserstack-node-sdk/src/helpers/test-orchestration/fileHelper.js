const a120_0x5a985e=a120_0x3030;(function(_0x3ab40e,_0x5ba96a){const _0x171a5c=a120_0x3030,_0x2f83d6=_0x3ab40e();while(!![]){try{const _0x15b7e0=parseInt(_0x171a5c(0x1f4))/0x1+parseInt(_0x171a5c(0x1d9))/0x2+parseInt(_0x171a5c(0x1ea))/0x3*(parseInt(_0x171a5c(0x1df))/0x4)+parseInt(_0x171a5c(0x1bf))/0x5*(parseInt(_0x171a5c(0x1f3))/0x6)+parseInt(_0x171a5c(0x1f5))/0x7*(-parseInt(_0x171a5c(0x1be))/0x8)+parseInt(_0x171a5c(0x1c1))/0x9+-parseInt(_0x171a5c(0x1dc))/0xa;if(_0x15b7e0===_0x5ba96a)break;else _0x2f83d6['push'](_0x2f83d6['shift']());}catch(_0xdc196e){_0x2f83d6['push'](_0x2f83d6['shift']());}}}(a120_0x1b8d,0x5cc7b));const fs=require('fs'),logger=require('../logger')[a120_0x5a985e(0x1e5)],TAG=a120_0x5a985e(0x1bb);function a120_0x1b8d(){const _0xaa0188=[']\x20Error\x20creating\x20state\x20file:\x20','readState','ePudh','6dKHfiS','475533jloFiO','5031341ZCEYhU','message','FailFastFileHelper','writeState','NRskQ','8BjCLLy','439870gBBIar','EEXIST','3678453zAqoep','fullName','newState','iterator','existsSync',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','svhCS','uniqueFailedTests','HAJZF',']\x20Error\x20reading\x20state\x20file:\x20','failedTests','stateFilePath','Bfjvj','unlinkSync','stack',']\x20Error\x20releasing\x20lock:\x20','releaseLock','lastAPIFailedCount','QcBoH','lockFilePath','utf8','error','pSdqn','writeFileSync','805546QxMCeZ','isNewFailure','parse','9576490pnpeSu','exports',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','116RYlVtK','stringify','add','4|3|0|1|2','totalTests','has','winstonLogger','failed','sqdWl','readFileSync','isArray','70494QRHYZm','acquireLock','defaultState','closeSync','warn','split'];a120_0x1b8d=function(){return _0xaa0188;};return a120_0x1b8d();}function a120_0x3030(_0xa3005,_0x3bf334){const _0x1b8d50=a120_0x1b8d();return a120_0x3030=function(_0x3030c2,_0x559bb2){_0x3030c2=_0x3030c2-0x1ba;let _0x3dc04e=_0x1b8d50[_0x3030c2];return _0x3dc04e;},a120_0x3030(_0xa3005,_0x3bf334);}class FileHelper{constructor(_0xca150,_0x51dd99,_0x2b5174,_0xf267b3){const _0x1bf3e0=a120_0x5a985e,_0x213552={};_0x213552[_0x1bf3e0(0x1cd)]=_0x1bf3e0(0x1e2),_0x213552['sqdWl']=_0x1bf3e0(0x1d5);const _0x3a9712=_0x213552,_0x38dcae=_0x3a9712[_0x1bf3e0(0x1cd)][_0x1bf3e0(0x1ef)]('|');let _0x372f75=0x0;while(!![]){switch(_0x38dcae[_0x372f75++]){case'0':this[_0x1bf3e0(0x1d4)]=_0x2b5174;continue;case'1':this[_0x1bf3e0(0x1ec)]=_0xf267b3;continue;case'2':if(!fs[_0x1bf3e0(0x1c5)](this[_0x1bf3e0(0x1cc)]))try{fs[_0x1bf3e0(0x1d8)](this[_0x1bf3e0(0x1cc)],'{}',_0x3a9712[_0x1bf3e0(0x1e7)]);}catch(_0xb16853){logger['error']('['+TAG+_0x1bf3e0(0x1f0)+_0xb16853[_0x1bf3e0(0x1ba)]+'\x20'+_0xb16853[_0x1bf3e0(0x1cf)]);}continue;case'3':this[_0x1bf3e0(0x1cc)]=_0x51dd99;continue;case'4':this['failFastConfig']=_0xca150;continue;}break;}}async[a120_0x5a985e(0x1eb)](){const _0x4d5e62=a120_0x5a985e,_0x2c747b={};_0x2c747b[_0x4d5e62(0x1c7)]=function(_0x56c9c3,_0x24dcc4){return _0x56c9c3===_0x24dcc4;},_0x2c747b[_0x4d5e62(0x1d7)]=_0x4d5e62(0x1c0);const _0x51298b=_0x2c747b;let _0xc9a69d;try{return _0xc9a69d=fs['openSync'](this[_0x4d5e62(0x1d4)],'wx'),_0xc9a69d;}catch(_0x42a09c){if(_0x51298b[_0x4d5e62(0x1c7)](_0x42a09c['code'],_0x51298b[_0x4d5e62(0x1d7)]))return null;throw _0x42a09c;}}async['releaseLock'](_0x4ef3ff){const _0x4ec1=a120_0x5a985e;if(_0x4ef3ff)try{fs[_0x4ec1(0x1ed)](_0x4ef3ff),fs[_0x4ec1(0x1ce)](this[_0x4ec1(0x1d4)]);}catch(_0x61d5bb){logger['error']('['+TAG+_0x4ec1(0x1d0)+_0x61d5bb[_0x4ec1(0x1ba)]+'\x20'+_0x61d5bb['stack']);}}[a120_0x5a985e(0x1f1)](){const _0x4d4caf=a120_0x5a985e,_0x5b945f={};_0x5b945f['xkLNt']='utf8';const _0x3a3dce=_0x5b945f;try{const _0x3dae53=fs[_0x4d4caf(0x1e8)](this[_0x4d4caf(0x1cc)],_0x3a3dce['xkLNt']);return JSON[_0x4d4caf(0x1db)](_0x3dae53);}catch(_0x5b51a4){return logger['error']('['+TAG+_0x4d4caf(0x1ca)+_0x5b51a4['message']+'\x20'+_0x5b51a4[_0x4d4caf(0x1cf)]),null;}}async['writeState'](_0x37d57d){const _0x5bf6ef=a120_0x5a985e,_0x35a46d={..._0x37d57d,'uniqueFailedTests':Array[_0x5bf6ef(0x1e9)](_0x37d57d['uniqueFailedTests'])?_0x37d57d[_0x5bf6ef(0x1c8)]:Array['from'](_0x37d57d[_0x5bf6ef(0x1c8)]||[])};try{fs[_0x5bf6ef(0x1d8)](this[_0x5bf6ef(0x1cc)],JSON['stringify'](_0x35a46d,null,0x2));}catch(_0x1427fa){logger[_0x5bf6ef(0x1d6)]('['+TAG+']\x20Error\x20writing\x20state\x20file:\x20'+_0x1427fa[_0x5bf6ef(0x1ba)]+'\x20'+_0x1427fa[_0x5bf6ef(0x1cf)]);throw _0x1427fa;}}async['recordTestResult'](_0x56a2f4,_0x396418){const _0x39b002=a120_0x5a985e,_0x53e2a1={};_0x53e2a1['QcBoH']=function(_0x2fc239,_0x4cfad9){return _0x2fc239!==_0x4cfad9;},_0x53e2a1[_0x39b002(0x1f2)]='function',_0x53e2a1[_0x39b002(0x1c9)]=function(_0x4c82a4,_0x4ef42c){return _0x4c82a4===_0x4ef42c;},_0x53e2a1[_0x39b002(0x1bd)]=_0x39b002(0x1e6);const _0x1d66a3=_0x53e2a1,_0x113f04=await this['acquireLock']();if(!_0x113f04)return logger[_0x39b002(0x1ee)]('['+TAG+_0x39b002(0x1c6)),{'newState':this[_0x39b002(0x1f1)]()||this[_0x39b002(0x1ec)],'isNewFailure':![]};try{let _0x37d1f8=this['readState']();!_0x37d1f8&&(_0x37d1f8=JSON[_0x39b002(0x1db)](JSON[_0x39b002(0x1e0)](this[_0x39b002(0x1ec)])));if(!_0x37d1f8[_0x39b002(0x1c8)]||_0x1d66a3[_0x39b002(0x1d3)](typeof _0x37d1f8[_0x39b002(0x1c8)][Symbol[_0x39b002(0x1c4)]],_0x1d66a3[_0x39b002(0x1f2)]))_0x37d1f8[_0x39b002(0x1c8)]=new Set();else Array[_0x39b002(0x1e9)](_0x37d1f8[_0x39b002(0x1c8)])&&(_0x37d1f8[_0x39b002(0x1c8)]=new Set(_0x37d1f8[_0x39b002(0x1c8)]));_0x37d1f8[_0x39b002(0x1e3)]=_0x396418;let _0x1619fc=![];_0x1d66a3[_0x39b002(0x1c9)](_0x56a2f4['status'],_0x1d66a3[_0x39b002(0x1bd)])&&(_0x37d1f8[_0x39b002(0x1cb)]+=0x1,!_0x37d1f8[_0x39b002(0x1c8)][_0x39b002(0x1e4)](_0x56a2f4[_0x39b002(0x1c2)])&&(_0x37d1f8[_0x39b002(0x1c8)][_0x39b002(0x1e1)](_0x56a2f4[_0x39b002(0x1c2)]),_0x1619fc=!![]));await this[_0x39b002(0x1bc)](_0x37d1f8);const _0x18194c={};return _0x18194c[_0x39b002(0x1c3)]=_0x37d1f8,_0x18194c[_0x39b002(0x1da)]=_0x1619fc,_0x18194c;}finally{await this[_0x39b002(0x1d1)](_0x113f04);}}async['updateAPIFailedCount'](_0x595bd2){const _0x5c0ab9=a120_0x5a985e,_0x2a72a8=await this['acquireLock']();if(!_0x2a72a8)return logger[_0x5c0ab9(0x1ee)]('['+TAG+_0x5c0ab9(0x1de)),this[_0x5c0ab9(0x1f1)]()||this['defaultState'];try{let _0x31c14d=this[_0x5c0ab9(0x1f1)]();return!_0x31c14d&&(_0x31c14d=JSON[_0x5c0ab9(0x1db)](JSON[_0x5c0ab9(0x1e0)](this[_0x5c0ab9(0x1ec)]))),_0x31c14d[_0x5c0ab9(0x1d2)]=_0x595bd2,await this[_0x5c0ab9(0x1bc)](_0x31c14d),_0x31c14d;}finally{await this[_0x5c0ab9(0x1d1)](_0x2a72a8);}}}module[a120_0x5a985e(0x1dd)]=FileHelper;