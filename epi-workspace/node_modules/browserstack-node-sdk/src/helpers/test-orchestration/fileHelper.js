function a133_0x29d5(){const _0x15e105=['writeState','writeFileSync','EAuBz',']\x20Error\x20reading\x20state\x20file:\x20','cpNBy','vPxiM','lockFilePath','BEFrC','warn','10IiCOTs','releaseLock','2528iogDBT','163tCkvzr','error','iterator','readState','isArray','isNewFailure','openSync','utf8','stack','failFastConfig','function','failed','stateFilePath','BKSRB','fullName',']\x20Could\x20not\x20acquire\x20lock\x20to\x20record\x20test\x20result.\x20State\x20may\x20be\x20stale.','21078raLRmp','ajJaf','uniqueFailedTests','acquireLock','recordTestResult',']\x20Could\x20not\x20acquire\x20lock\x20to\x20update\x20API\x20failed\x20count.\x20State\x20may\x20be\x20stale.','6522550kOriDH','existsSync','9878TaLkyS','TKHUf','2880rhSkQB','9218MKgXao','newState','3202338vnwwVh','closeSync','6712055fikEUU','message','parse','3|4|2|0|1','EEXIST','exports','BbrvS','defaultState','FailFastFileHelper','ZvJhc','winstonLogger','100NgzqJR','has','from','stringify',']\x20Error\x20releasing\x20lock:\x20','65277pIwMlr',']\x20Error\x20writing\x20state\x20file:\x20','totalTests'];a133_0x29d5=function(){return _0x15e105;};return a133_0x29d5();}const a133_0x1b9f57=a133_0x2adc;(function(_0x241bda,_0x24051d){const _0x3017dd=a133_0x2adc,_0x6719e4=_0x241bda();while(!![]){try{const _0x26cb6f=-parseInt(_0x3017dd(0x1fc))/0x1*(parseInt(_0x3017dd(0x1d6))/0x2)+parseInt(_0x3017dd(0x1ed))/0x3*(-parseInt(_0x3017dd(0x1e8))/0x4)+parseInt(_0x3017dd(0x1f9))/0x5*(parseInt(_0x3017dd(0x1db))/0x6)+parseInt(_0x3017dd(0x1dd))/0x7+parseInt(_0x3017dd(0x1fb))/0x8*(parseInt(_0x3017dd(0x20c))/0x9)+-parseInt(_0x3017dd(0x1d4))/0xa+parseInt(_0x3017dd(0x1d9))/0xb*(parseInt(_0x3017dd(0x1d8))/0xc);if(_0x26cb6f===_0x24051d)break;else _0x6719e4['push'](_0x6719e4['shift']());}catch(_0x917574){_0x6719e4['push'](_0x6719e4['shift']());}}}(a133_0x29d5,0xebe48));function a133_0x2adc(_0x4a4345,_0x5e9e46){const _0x29d5a9=a133_0x29d5();return a133_0x2adc=function(_0x2adca2,_0xc468fe){_0x2adca2=_0x2adca2-0x1d0;let _0x57f0e4=_0x29d5a9[_0x2adca2];return _0x57f0e4;},a133_0x2adc(_0x4a4345,_0x5e9e46);}const fs=require('fs'),logger=require('../logger')[a133_0x1b9f57(0x1e7)],TAG=a133_0x1b9f57(0x1e5);class FileHelper{constructor(_0x54e72c,_0x42de5d,_0x501297,_0x54d810){const _0x5de3ec=a133_0x1b9f57,_0x3e8ad8={};_0x3e8ad8[_0x5de3ec(0x1f2)]=_0x5de3ec(0x1e0),_0x3e8ad8[_0x5de3ec(0x1f4)]=_0x5de3ec(0x203);const _0x57cbfe=_0x3e8ad8,_0x12eb91=_0x57cbfe['EAuBz']['split']('|');let _0x1dc014=0x0;while(!![]){switch(_0x12eb91[_0x1dc014++]){case'0':this[_0x5de3ec(0x1e4)]=_0x54d810;continue;case'1':if(!fs[_0x5de3ec(0x1d5)](this[_0x5de3ec(0x208)]))try{fs[_0x5de3ec(0x1f1)](this[_0x5de3ec(0x208)],'{}',_0x57cbfe[_0x5de3ec(0x1f4)]);}catch(_0x33d430){logger[_0x5de3ec(0x1fd)]('['+TAG+']\x20Error\x20creating\x20state\x20file:\x20'+_0x33d430[_0x5de3ec(0x1de)]+'\x20'+_0x33d430[_0x5de3ec(0x204)]);}continue;case'2':this[_0x5de3ec(0x1f6)]=_0x501297;continue;case'3':this[_0x5de3ec(0x205)]=_0x54e72c;continue;case'4':this['stateFilePath']=_0x42de5d;continue;}break;}}async[a133_0x1b9f57(0x1d1)](){const _0x5a23ec=a133_0x1b9f57,_0x48a1c6={};_0x48a1c6[_0x5a23ec(0x1f5)]=function(_0x2b711d,_0x4f9166){return _0x2b711d===_0x4f9166;},_0x48a1c6[_0x5a23ec(0x1e3)]=_0x5a23ec(0x1e1);const _0x2a589e=_0x48a1c6;let _0x39e492;try{return _0x39e492=fs[_0x5a23ec(0x202)](this[_0x5a23ec(0x1f6)],'wx'),_0x39e492;}catch(_0x569f0b){if(_0x2a589e[_0x5a23ec(0x1f5)](_0x569f0b['code'],_0x2a589e['BbrvS']))return null;throw _0x569f0b;}}async[a133_0x1b9f57(0x1fa)](_0x41fbcd){const _0x36f90c=a133_0x1b9f57;if(_0x41fbcd)try{fs[_0x36f90c(0x1dc)](_0x41fbcd),fs['unlinkSync'](this['lockFilePath']);}catch(_0x4572e1){logger[_0x36f90c(0x1fd)]('['+TAG+_0x36f90c(0x1ec)+_0x4572e1[_0x36f90c(0x1de)]+'\x20'+_0x4572e1[_0x36f90c(0x204)]);}}[a133_0x1b9f57(0x1ff)](){const _0x4f639c=a133_0x1b9f57,_0x5019ac={};_0x5019ac[_0x4f639c(0x1d7)]=_0x4f639c(0x203);const _0x418167=_0x5019ac;try{const _0x1a1be1=fs['readFileSync'](this['stateFilePath'],_0x418167[_0x4f639c(0x1d7)]);return JSON[_0x4f639c(0x1df)](_0x1a1be1);}catch(_0x26b1ef){return logger[_0x4f639c(0x1fd)]('['+TAG+_0x4f639c(0x1f3)+_0x26b1ef[_0x4f639c(0x1de)]+'\x20'+_0x26b1ef[_0x4f639c(0x204)]),null;}}async[a133_0x1b9f57(0x1f0)](_0x67f360){const _0x19f884=a133_0x1b9f57,_0x15fd22={..._0x67f360,'uniqueFailedTests':Array[_0x19f884(0x200)](_0x67f360[_0x19f884(0x1d0)])?_0x67f360[_0x19f884(0x1d0)]:Array[_0x19f884(0x1ea)](_0x67f360[_0x19f884(0x1d0)]||[])};try{fs[_0x19f884(0x1f1)](this[_0x19f884(0x208)],JSON[_0x19f884(0x1eb)](_0x15fd22,null,0x2));}catch(_0x5c029a){logger[_0x19f884(0x1fd)]('['+TAG+_0x19f884(0x1ee)+_0x5c029a[_0x19f884(0x1de)]+'\x20'+_0x5c029a['stack']);throw _0x5c029a;}}async[a133_0x1b9f57(0x1d2)](_0x3fe279,_0x2826f9){const _0x5dc465=a133_0x1b9f57,_0x1af937={};_0x1af937[_0x5dc465(0x209)]=function(_0x2c685e,_0x5a2b6d){return _0x2c685e!==_0x5a2b6d;},_0x1af937['ajJaf']=_0x5dc465(0x206),_0x1af937['ZvJhc']=function(_0x118803,_0x5d4acf){return _0x118803===_0x5d4acf;},_0x1af937[_0x5dc465(0x1f7)]=_0x5dc465(0x207);const _0x3cff35=_0x1af937,_0x48975c=await this[_0x5dc465(0x1d1)]();if(!_0x48975c)return logger[_0x5dc465(0x1f8)]('['+TAG+_0x5dc465(0x20b)),{'newState':this['readState']()||this[_0x5dc465(0x1e4)],'isNewFailure':![]};try{let _0x5b8135=this['readState']();!_0x5b8135&&(_0x5b8135=JSON[_0x5dc465(0x1df)](JSON['stringify'](this[_0x5dc465(0x1e4)])));if(!_0x5b8135[_0x5dc465(0x1d0)]||_0x3cff35[_0x5dc465(0x209)](typeof _0x5b8135[_0x5dc465(0x1d0)][Symbol[_0x5dc465(0x1fe)]],_0x3cff35[_0x5dc465(0x20d)]))_0x5b8135[_0x5dc465(0x1d0)]=new Set();else Array[_0x5dc465(0x200)](_0x5b8135[_0x5dc465(0x1d0)])&&(_0x5b8135[_0x5dc465(0x1d0)]=new Set(_0x5b8135['uniqueFailedTests']));_0x5b8135[_0x5dc465(0x1ef)]=_0x2826f9;let _0x4c3632=![];_0x3cff35[_0x5dc465(0x1e6)](_0x3fe279['status'],_0x3cff35[_0x5dc465(0x1f7)])&&(_0x5b8135['failedTests']+=0x1,!_0x5b8135[_0x5dc465(0x1d0)][_0x5dc465(0x1e9)](_0x3fe279['fullName'])&&(_0x5b8135[_0x5dc465(0x1d0)]['add'](_0x3fe279[_0x5dc465(0x20a)]),_0x4c3632=!![]));await this[_0x5dc465(0x1f0)](_0x5b8135);const _0x2863d1={};return _0x2863d1[_0x5dc465(0x1da)]=_0x5b8135,_0x2863d1[_0x5dc465(0x201)]=_0x4c3632,_0x2863d1;}finally{await this[_0x5dc465(0x1fa)](_0x48975c);}}async['updateAPIFailedCount'](_0x44aa6b){const _0x2c8cb3=a133_0x1b9f57,_0x5d01a6=await this['acquireLock']();if(!_0x5d01a6)return logger[_0x2c8cb3(0x1f8)]('['+TAG+_0x2c8cb3(0x1d3)),this['readState']()||this['defaultState'];try{let _0x5b0385=this[_0x2c8cb3(0x1ff)]();return!_0x5b0385&&(_0x5b0385=JSON[_0x2c8cb3(0x1df)](JSON[_0x2c8cb3(0x1eb)](this[_0x2c8cb3(0x1e4)]))),_0x5b0385['lastAPIFailedCount']=_0x44aa6b,await this[_0x2c8cb3(0x1f0)](_0x5b0385),_0x5b0385;}finally{await this[_0x2c8cb3(0x1fa)](_0x5d01a6);}}}module[a133_0x1b9f57(0x1e2)]=FileHelper;