function a121_0x5256(){const _0xf5c9c8=['./orchestrationUtils','addToOrderingInstrumentationData','toString','reorderTestFiles','setTestOrderingApplied','../logger','applied','fBOJI','KhqdW','BROWSERSTACK_NODE_INDEX','kfoUa','orchestrationUtils','19901060ZSXPGZ','enisc','nrVFx','projectName','stack','length','**/?(*.)+(spec|test).[jt]s?(x)','isTestOrderingApplied','testMatch','getOrderedTestFiles','cFxri','getOrderingInstrumentationData','gmDGq','NKNsI','1147034ehuKxt','BROWSERSTACK_BUILD_RUN_IDENTIFIER','67432QQaDlJ','orderingInstrumentationData','2565465DlSKqz','utf-8','path','tAKra','aHzzs','QarNN','logTestOrderingChecks','_initializeTestOrdering','Qfhdn','eRqxx','Test\x20Reordering\x20is\x20unavailable\x20because\x20buildName\x20or\x20projectName\x20is\x20null.\x20Please\x20set\x20a\x20non-null\x20value.','XSSaM','ignore','5798100lEBJrs','split','testPathIgnorePatterns','_shouldLogTestOrderingChecks','NpBPA','splitTestsAPICallCount','info','downloadedTestFilesCount','**/__tests__/**/*.[jt]s?(x)','qGhtB','isTestOrchestrationEnabled','stringify','KXQOu','Test\x20Reordering\x20is\x20unavailable\x20because\x20testObservability\x20is\x20disabled.\x20Please\x20enable\x20it\x20from\x20browserstack.yml\x20file.','getTestOrderingName','micromatch','getSplitTestsAPICallCount','config','isArray','iMddW','tMCiH','stdout','buildName','YNQUP','glob','testOrderingApplied','Ljywj','relative','BROWSERSTACK_TOTAL_NODE_COUNT','[reorderTestFiles]\x20Test\x20ordering\x20is\x20not\x20supported\x20or\x20enabled','splitTests','uploadedTestFilesCount','Error\x20finding\x20test\x20files:\x20','10932210jIWawK','Found\x20test\x20files:\x20','ESIPa','Filterted\x20to\x20test\x20files:\x20','[orchestrate]\x20Setting\x20buildIdentifier\x20to\x20buildRunIdentifier:\x20','UPrTK','./testOrderingServerHandler','matchBase','ALNZa','DsCww','ZIcNh','testObservability','error','nodeIndex','jest-config','3wKxLdz','OSnJo','1jxXjFz','53644VYylDp','testOrderingServerHandler','totalNodes','jest-runner','vQPRw','\x20files','env','Test\x20orchestration\x20without\x20test\x20ordering','map','EAIMR','XMvSV','EViIY','testOrderingEnabled','203QfpIEu','jest','buildIdentifier','yvKfL','rootDir','jest-util','debug'];a121_0x5256=function(){return _0xf5c9c8;};return a121_0x5256();}function a121_0x4294(_0x2f5efb,_0x484b20){const _0x5256ec=a121_0x5256();return a121_0x4294=function(_0x429492,_0x12d51e){_0x429492=_0x429492-0x125;let _0x2d5e81=_0x5256ec[_0x429492];return _0x2d5e81;},a121_0x4294(_0x2f5efb,_0x484b20);}const a121_0x1891d9=a121_0x4294;(function(_0x2f7c24,_0x21e786){const _0x74d575=a121_0x4294,_0x47b970=_0x2f7c24();while(!![]){try{const _0x534546=-parseInt(_0x74d575(0x145))/0x1*(-parseInt(_0x74d575(0x174))/0x2)+-parseInt(_0x74d575(0x143))/0x3*(-parseInt(_0x74d575(0x146))/0x4)+parseInt(_0x74d575(0x178))/0x5+-parseInt(_0x74d575(0x185))/0x6+-parseInt(_0x74d575(0x153))/0x7*(parseInt(_0x74d575(0x176))/0x8)+-parseInt(_0x74d575(0x134))/0x9+parseInt(_0x74d575(0x166))/0xa;if(_0x534546===_0x21e786)break;else _0x47b970['push'](_0x47b970['shift']());}catch(_0x5e23b6){_0x47b970['push'](_0x47b970['shift']());}}}(a121_0x5256,0xa2446));const logger=require(a121_0x1891d9(0x15f))['winstonLogger'],{isUndefined,isNotUndefined,isTrueString,sanitizedFilePath}=require('../helper'),TestOrderingServerHandler=require(a121_0x1891d9(0x13a)),OrchestrationUtils=require(a121_0x1891d9(0x15a)),path=require(a121_0x1891d9(0x17a)),{spawnSync}=require('child_process'),micromatch=require(a121_0x1891d9(0x194)),fs=require('fs');class TestOrchestrationHandler{constructor(_0x1b37f7){const _0x1045a8=a121_0x1891d9,_0x5c917b={};_0x5c917b['ALNZa']='1|3|4|2|0|5';const _0x34c623=_0x5c917b,_0x1a04ba=_0x34c623[_0x1045a8(0x13c)][_0x1045a8(0x186)]('|');let _0x8ee088=0x0;while(!![]){switch(_0x1a04ba[_0x8ee088++]){case'0':this['orchestrationUtils']=new OrchestrationUtils(_0x1b37f7);continue;case'1':this['config']=_0x1b37f7;continue;case'2':this['testOrderingServerHandler']=null;continue;case'3':this[_0x1045a8(0x177)]={};continue;case'4':this[_0x1045a8(0x12c)]=![];continue;case'5':this[_0x1045a8(0x17f)]();continue;}break;}}['isTestOrchestrationEnabled'](){const _0x354164=a121_0x1891d9,_0x34ee3e={'KXQOu':function(_0x12bca1,_0x1b262a){return _0x12bca1(_0x1b262a);},'XSSaM':function(_0x53145b,_0x6073d3){return _0x53145b(_0x6073d3);},'XFHeg':function(_0x12809c,_0x226276){return _0x12809c&&_0x226276;}},_0x3519dd=_0x34ee3e[_0x354164(0x191)](isNotUndefined,this[_0x354164(0x196)])&&(_0x34ee3e[_0x354164(0x191)](isUndefined,this[_0x354164(0x196)]['testObservability'])||_0x34ee3e[_0x354164(0x191)](isTrueString,this[_0x354164(0x196)][_0x354164(0x13f)])),_0x31e37c=this[_0x354164(0x165)][_0x354164(0x152)](),_0x273376=_0x34ee3e['XSSaM'](isNotUndefined,this[_0x354164(0x196)])&&_0x34ee3e[_0x354164(0x191)](isNotUndefined,this['config'][_0x354164(0x169)]),_0x6e794b=_0x34ee3e[_0x354164(0x191)](isNotUndefined,this[_0x354164(0x196)])&&_0x34ee3e[_0x354164(0x183)](isNotUndefined,this[_0x354164(0x196)][_0x354164(0x129)]);return _0x34ee3e['XFHeg'](_0x3519dd,_0x31e37c)&&_0x273376&&_0x6e794b;}[a121_0x1891d9(0x17f)](){const _0x446ee4=a121_0x1891d9,_0x529d3f={};_0x529d3f[_0x446ee4(0x180)]='Test\x20orchestration\x20with\x20test\x20ordering\x20enabled',_0x529d3f[_0x446ee4(0x13d)]=_0x446ee4(0x14d);const _0x4c541b=_0x529d3f;this[_0x446ee4(0x18f)]()?(this[_0x446ee4(0x147)]=new TestOrderingServerHandler(this['config']),logger[_0x446ee4(0x18b)](_0x4c541b[_0x446ee4(0x180)])):(logger[_0x446ee4(0x159)](_0x4c541b[_0x446ee4(0x13d)]),this[_0x446ee4(0x17e)]());}[a121_0x1891d9(0x17e)](){const _0x42ee2c=a121_0x1891d9,_0xf5fbab={'KhqdW':function(_0x53e8a6,_0x9af8c0){return _0x53e8a6(_0x9af8c0);},'NpBPA':function(_0x521dfa,_0x4b3f02){return _0x521dfa(_0x4b3f02);},'fBOJI':_0x42ee2c(0x182),'EViIY':function(_0x82cf52,_0x50ec95){return _0x82cf52(_0x50ec95);},'zcIqE':function(_0x39b36b,_0x1ed816){return _0x39b36b(_0x1ed816);},'EAIMR':_0x42ee2c(0x192)};if(!this['_shouldLogTestOrderingChecks']())return;(!_0xf5fbab[_0x42ee2c(0x162)](isNotUndefined,this['config'])||!_0xf5fbab[_0x42ee2c(0x189)](isNotUndefined,this[_0x42ee2c(0x196)][_0x42ee2c(0x129)])||!_0xf5fbab[_0x42ee2c(0x189)](isNotUndefined,this[_0x42ee2c(0x196)]['projectName']))&&logger['info'](_0xf5fbab[_0x42ee2c(0x161)]),_0xf5fbab[_0x42ee2c(0x151)](isNotUndefined,this[_0x42ee2c(0x196)])&&_0xf5fbab['zcIqE'](isNotUndefined,this[_0x42ee2c(0x196)]['testObservability'])&&!_0xf5fbab[_0x42ee2c(0x151)](isTrueString,this['config'][_0x42ee2c(0x13f)])&&logger[_0x42ee2c(0x18b)](_0xf5fbab[_0x42ee2c(0x14f)]);}[a121_0x1891d9(0x188)](){const _0x4f9ec6=a121_0x1891d9;return!this[_0x4f9ec6(0x18f)]()&&this['orchestrationUtils']['testOrderingEnabled']();}[a121_0x1891d9(0x16d)](){return this['testOrderingApplied'];}[a121_0x1891d9(0x15e)](_0x1a6a18){const _0x4973b0=a121_0x1891d9,_0x30c51d={};_0x30c51d['kfoUa']=_0x4973b0(0x160);const _0x2eea30=_0x30c51d;this[_0x4973b0(0x12c)]=_0x1a6a18,this[_0x4973b0(0x15b)](_0x2eea30[_0x4973b0(0x164)],_0x1a6a18);}['addToOrderingInstrumentationData'](_0x39fb98,_0x5dfc57){this['orderingInstrumentationData'][_0x39fb98]=_0x5dfc57;}[a121_0x1891d9(0x171)](){const _0xbc2b0=a121_0x1891d9;return this[_0xbc2b0(0x177)];}['updateBuildIdentifier'](){const _0x25c4f5=a121_0x1891d9,_0x4beea9={'FjGHJ':function(_0x51abfc,_0x1bfb7e){return _0x51abfc(_0x1bfb7e);},'lFkUr':function(_0x26b897,_0x4d6607){return _0x26b897>_0x4d6607;}},_0x44bddd=_0x4beea9['FjGHJ'](parseInt,process[_0x25c4f5(0x14c)][_0x25c4f5(0x12f)]||'1'),_0x428d4f=process[_0x25c4f5(0x14c)][_0x25c4f5(0x175)];_0x428d4f&&_0x4beea9['lFkUr'](_0x44bddd,0x1)&&(logger['debug'](_0x25c4f5(0x138)+_0x428d4f),this[_0x25c4f5(0x196)][_0x25c4f5(0x155)]=_0x428d4f);}async[a121_0x1891d9(0x15d)](_0x374539){const _0x46940d=a121_0x1891d9,_0x2a1d3b={'tAKra':function(_0x1f11ab,_0x1cb64d){return _0x1f11ab===_0x1cb64d;},'UPrTK':_0x46940d(0x130),'NKNsI':function(_0x6fffa6,_0x4e10ea){return _0x6fffa6===_0x4e10ea;},'enisc':function(_0x2713d5,_0x1ac018){return _0x2713d5(_0x1ac018);},'aHzzs':function(_0x570744,_0x3b739f){return _0x570744(_0x3b739f);},'gmDGq':_0x46940d(0x132),'idGfT':_0x46940d(0x141),'yvKfL':_0x46940d(0x148),'YNQUP':_0x46940d(0x18c),'ESIPa':_0x46940d(0x18a)};try{if(!_0x374539||!Array[_0x46940d(0x125)](_0x374539)||_0x2a1d3b['tAKra'](_0x374539['length'],0x0))return null;if(_0x2a1d3b[_0x46940d(0x17b)](this[_0x46940d(0x18f)](),![]))return logger[_0x46940d(0x159)](_0x2a1d3b[_0x46940d(0x139)]),null;let _0x112888=null;const _0x58c7c6=this[_0x46940d(0x165)][_0x46940d(0x193)]();if(this[_0x46940d(0x147)]){const _0x4063d4=await this[_0x46940d(0x147)][_0x46940d(0x131)](_0x374539,_0x58c7c6);if(!_0x4063d4)return null;_0x112888=await this[_0x46940d(0x147)][_0x46940d(0x16f)](_0x4063d4);}if(!_0x112888||!Array[_0x46940d(0x125)](_0x112888)||_0x2a1d3b[_0x46940d(0x173)](_0x112888[_0x46940d(0x16b)],0x0))return null;const _0x378657=_0x2a1d3b[_0x46940d(0x167)](parseInt,process[_0x46940d(0x14c)][_0x46940d(0x163)]||'0'),_0x3196cd=_0x2a1d3b[_0x46940d(0x17c)](parseInt,process[_0x46940d(0x14c)][_0x46940d(0x12f)]||'1');return this[_0x46940d(0x15b)](_0x2a1d3b[_0x46940d(0x172)],_0x374539[_0x46940d(0x16b)]),this[_0x46940d(0x15b)](_0x2a1d3b['idGfT'],_0x378657),this['addToOrderingInstrumentationData'](_0x2a1d3b[_0x46940d(0x156)],_0x3196cd),this[_0x46940d(0x15b)](_0x2a1d3b[_0x46940d(0x12a)],_0x112888[_0x46940d(0x16b)]),this[_0x46940d(0x15b)](_0x2a1d3b[_0x46940d(0x136)],this[_0x46940d(0x147)]?this[_0x46940d(0x147)][_0x46940d(0x195)]():0x0),_0x112888[_0x46940d(0x14e)](_0xa7efd=>sanitizedFilePath(_0xa7efd));}catch(_0x147898){return logger[_0x46940d(0x159)]('[reorderTestFiles]\x20Error\x20in\x20ordering\x20test\x20files:\x20'+(_0x147898[_0x46940d(0x16a)]||_0x147898[_0x46940d(0x15c)]())),null;}}async['findTestFiles'](_0x1679db,_0x54296f,_0x1e15ab){const _0x45fe21=a121_0x1891d9,_0x1c0acf={'vQPRw':function(_0x4d2839,_0x2e5223){return _0x4d2839(_0x2e5223);},'qGhtB':_0x45fe21(0x142),'nrVFx':_0x45fe21(0x158),'eRqxx':_0x45fe21(0x149),'iMddW':_0x45fe21(0x12b),'XMvSV':_0x45fe21(0x18d),'OSnJo':_0x45fe21(0x16c),'ZIcNh':function(_0x3ba15a,_0x57fbbc,_0x30f478,_0x181a30){return _0x3ba15a(_0x57fbbc,_0x30f478,_0x181a30);},'QarNN':'npx','tMCiH':_0x45fe21(0x154),'cFxri':'--config','Ljywj':'--listTests','xnwPj':_0x45fe21(0x179)};try{const {getTestPathPatterns:_0x2196e3}=_0x1c0acf[_0x45fe21(0x14a)](require,_0x1c0acf[_0x45fe21(0x18e)]),{globsToMatcher:_0x361506}=_0x1c0acf[_0x45fe21(0x14a)](require,_0x1c0acf[_0x45fe21(0x168)]),{findRelatedTests:_0x44b6f2}=_0x1c0acf[_0x45fe21(0x14a)](require,_0x1c0acf[_0x45fe21(0x181)]),_0x3ada9b=_0x1c0acf['vQPRw'](require,_0x1c0acf[_0x45fe21(0x126)]),_0x1909d6=_0x1679db[_0x45fe21(0x16e)]||[_0x1c0acf[_0x45fe21(0x150)],_0x1c0acf[_0x45fe21(0x144)]],_0xd1cfe0=_0x1679db[_0x45fe21(0x187)]||[],_0x399137=_0x1c0acf[_0x45fe21(0x13e)](spawnSync,_0x1c0acf[_0x45fe21(0x17d)],[_0x1c0acf[_0x45fe21(0x127)],_0x1c0acf[_0x45fe21(0x170)],_0x1e15ab,..._0x54296f,_0x1c0acf[_0x45fe21(0x12d)]],{'encoding':_0x1c0acf['xnwPj']});let _0x4a7c8f=[];!_0x399137[_0x45fe21(0x140)]&&(_0x4a7c8f=_0x399137[_0x45fe21(0x128)][_0x45fe21(0x186)]('\x0a')['filter'](Boolean));logger[_0x45fe21(0x159)](_0x45fe21(0x135)+JSON[_0x45fe21(0x190)](_0x4a7c8f)+_0x45fe21(0x14b));const _0x28ba70={};_0x28ba70[_0x45fe21(0x13b)]=!![],_0x28ba70[_0x45fe21(0x184)]=_0xd1cfe0;const _0x1f953f=_0x1c0acf[_0x45fe21(0x13e)](micromatch,_0x4a7c8f,_0x1909d6,_0x28ba70)[_0x45fe21(0x14e)](_0x294251=>path[_0x45fe21(0x12e)](_0x1679db[_0x45fe21(0x157)],_0x294251));return logger[_0x45fe21(0x159)](_0x45fe21(0x137)+JSON[_0x45fe21(0x190)](_0x1f953f)+'\x20files'),_0x1f953f;}catch(_0x17b432){return logger[_0x45fe21(0x159)](_0x45fe21(0x133)+_0x17b432),[];}}}module['exports']=TestOrchestrationHandler;