const a133_0x11a1fe=a133_0x52eb;function a133_0x5736(){const _0x1a8150=['PnfKm','gllKM','JtbcL','AmTSR','Found\x20test\x20files:\x20','totalNodes','539736knNVAn','UHeOz','UEmin','length','buildName','WqiAv','**/?(*.)+(spec|test).[jt]s?(x)','exports','BROWSERSTACK_TOTAL_NODE_COUNT','isArray','config','orchestrationUtils','Test\x20orchestration\x20with\x20test\x20ordering\x20enabled','jest-util','micromatch','toString','**/__tests__/**/*.[jt]s?(x)','testObservability','2hWAeFz','../logger','cAvxt','child_process','UqfQD','YPSDX','\x20files','10544103zIcfWN','PXBRM','jAByH','oytZq','DVHGX','split','glob','mkQmb','splitTestsAPICallCount','jest','3603176tkOrOD','buildIdentifier','Test\x20orchestration\x20without\x20test\x20ordering','JAPDL','KxpGK','stack','testPathIgnorePatterns','matchBase','--listTests','info','getOrderedTestFiles','findTestFiles','splitTests','map','isTestOrderingApplied','utf-8','jMeea','stdout','_shouldLogTestOrderingChecks','addToOrderingInstrumentationData','UXcWV','1556963xxADud','applied','2|0|5|1|3|4','uploadedTestFilesCount','npx','Error\x20finding\x20test\x20files:\x20','ohZEK','getSplitTestsAPICallCount','5bHeuyv','KAmGA','Test\x20Reordering\x20is\x20unavailable\x20because\x20testReporting\x20is\x20disabled.\x20Please\x20enable\x20it\x20from\x20browserstack.yml\x20file.','testOrderingEnabled','29624410pHQuJv','pekxq','miTDx','isTestOrchestrationEnabled','VwwmA','Filterted\x20to\x20test\x20files:\x20','PkKai','[orchestrate]\x20Setting\x20buildIdentifier\x20to\x20buildRunIdentifier:\x20','1208817xQZRLf','ZyYho','testOrderingApplied','jest-config','SpdTs','[reorderTestFiles]\x20Error\x20in\x20ordering\x20test\x20files:\x20','env','testOrderingServerHandler','./testOrderingServerHandler','WnYcJ','getTestOrderingName','ignore','error','downloadedTestFilesCount','updateBuildIdentifier','debug','Aczvo','[reorderTestFiles]\x20Test\x20ordering\x20is\x20not\x20supported\x20or\x20enabled','lDcUb','stringify','orderingInstrumentationData','rootDir','logTestOrderingChecks','8938506fNLYQx','jest-runner','vnqJA','tGwMH','nodeIndex','relative','setTestOrderingApplied','84WbEGpW','winstonLogger'];a133_0x5736=function(){return _0x1a8150;};return a133_0x5736();}function a133_0x52eb(_0x549739,_0x757ea3){const _0x573613=a133_0x5736();return a133_0x52eb=function(_0x52eb5a,_0x3a8212){_0x52eb5a=_0x52eb5a-0x122;let _0x33a02c=_0x573613[_0x52eb5a];return _0x33a02c;},a133_0x52eb(_0x549739,_0x757ea3);}(function(_0x3be086,_0x1dad90){const _0x43125f=a133_0x52eb,_0x1e7925=_0x3be086();while(!![]){try{const _0x46c719=-parseInt(_0x43125f(0x14a))/0x1+parseInt(_0x43125f(0x124))/0x2*(parseInt(_0x43125f(0x15e))/0x3)+parseInt(_0x43125f(0x135))/0x4+-parseInt(_0x43125f(0x152))/0x5*(parseInt(_0x43125f(0x175))/0x6)+-parseInt(_0x43125f(0x17c))/0x7*(-parseInt(_0x43125f(0x184))/0x8)+-parseInt(_0x43125f(0x12b))/0x9+parseInt(_0x43125f(0x156))/0xa;if(_0x46c719===_0x1dad90)break;else _0x1e7925['push'](_0x1e7925['shift']());}catch(_0x21a6f4){_0x1e7925['push'](_0x1e7925['shift']());}}}(a133_0x5736,0xd1599));const logger=require(a133_0x11a1fe(0x125))[a133_0x11a1fe(0x17d)],{isUndefined,isNotUndefined,isTrueString,sanitizedFilePath}=require('../helper'),TestOrderingServerHandler=require(a133_0x11a1fe(0x166)),OrchestrationUtils=require('./orchestrationUtils'),path=require('path'),{spawnSync}=require(a133_0x11a1fe(0x127)),micromatch=require(a133_0x11a1fe(0x192)),fs=require('fs');class TestOrchestrationHandler{constructor(_0x53436b){const _0x5d9c4b=a133_0x11a1fe,_0x50e347={};_0x50e347[_0x5d9c4b(0x126)]=_0x5d9c4b(0x14c);const _0x18d7af=_0x50e347,_0x40d4de=_0x18d7af[_0x5d9c4b(0x126)][_0x5d9c4b(0x130)]('|');let _0x2975f5=0x0;while(!![]){switch(_0x40d4de[_0x2975f5++]){case'0':this[_0x5d9c4b(0x172)]={};continue;case'1':this[_0x5d9c4b(0x165)]=null;continue;case'2':this[_0x5d9c4b(0x18e)]=_0x53436b;continue;case'3':this['orchestrationUtils']=new OrchestrationUtils(_0x53436b);continue;case'4':this['_initializeTestOrdering']();continue;case'5':this[_0x5d9c4b(0x160)]=![];continue;}break;}}['isTestOrchestrationEnabled'](){const _0xcefd1a=a133_0x11a1fe,_0x341321={'jAByH':function(_0xf6a785,_0x5ed186){return _0xf6a785(_0x5ed186);},'ZyYho':function(_0x12218a,_0x23b237){return _0x12218a(_0x23b237);},'VRALA':function(_0x537265,_0x35c672){return _0x537265(_0x35c672);},'vnqJA':function(_0x44ac26,_0x3a666f){return _0x44ac26(_0x3a666f);},'DVHGX':function(_0x14a724,_0x495204){return _0x14a724&&_0x495204;}},_0x37f1c9=_0x341321[_0xcefd1a(0x12d)](isNotUndefined,this[_0xcefd1a(0x18e)])&&(_0x341321[_0xcefd1a(0x12d)](isUndefined,this[_0xcefd1a(0x18e)][_0xcefd1a(0x123)])||_0x341321['jAByH'](isTrueString,this[_0xcefd1a(0x18e)][_0xcefd1a(0x123)])),_0x4c30f5=this[_0xcefd1a(0x18f)][_0xcefd1a(0x155)](),_0x12d2dc=_0x341321[_0xcefd1a(0x12d)](isNotUndefined,this[_0xcefd1a(0x18e)])&&_0x341321[_0xcefd1a(0x15f)](isNotUndefined,this[_0xcefd1a(0x18e)]['projectName']),_0x225b4f=_0x341321['VRALA'](isNotUndefined,this[_0xcefd1a(0x18e)])&&_0x341321[_0xcefd1a(0x177)](isNotUndefined,this['config']['buildName']);return _0x341321[_0xcefd1a(0x12f)](_0x37f1c9,_0x4c30f5)&&_0x12d2dc&&_0x225b4f;}['_initializeTestOrdering'](){const _0x2ae852=a133_0x11a1fe,_0x5e24f8={};_0x5e24f8[_0x2ae852(0x157)]=_0x2ae852(0x190),_0x5e24f8[_0x2ae852(0x178)]=_0x2ae852(0x137);const _0x574bb8=_0x5e24f8;this[_0x2ae852(0x159)]()?(this[_0x2ae852(0x165)]=new TestOrderingServerHandler(this[_0x2ae852(0x18e)]),logger[_0x2ae852(0x13e)](_0x574bb8[_0x2ae852(0x157)])):(logger[_0x2ae852(0x16d)](_0x574bb8[_0x2ae852(0x178)]),this['logTestOrderingChecks']());}[a133_0x11a1fe(0x174)](){const _0x40d30f=a133_0x11a1fe,_0x53ba30={'UXcWV':function(_0x12d170,_0x5859ad){return _0x12d170(_0x5859ad);},'oytZq':'Test\x20Reordering\x20is\x20unavailable\x20because\x20buildName\x20or\x20projectName\x20is\x20null.\x20Please\x20set\x20a\x20non-null\x20value.','KAmGA':function(_0x39ecf6,_0x716904){return _0x39ecf6(_0x716904);},'iJvGn':function(_0xf8ea9f,_0x2b3d78){return _0xf8ea9f(_0x2b3d78);},'PnfKm':_0x40d30f(0x154)};if(!this['_shouldLogTestOrderingChecks']())return;(!_0x53ba30[_0x40d30f(0x149)](isNotUndefined,this[_0x40d30f(0x18e)])||!_0x53ba30['UXcWV'](isNotUndefined,this[_0x40d30f(0x18e)][_0x40d30f(0x188)])||!_0x53ba30[_0x40d30f(0x149)](isNotUndefined,this['config']['projectName']))&&logger['info'](_0x53ba30[_0x40d30f(0x12e)]),_0x53ba30[_0x40d30f(0x153)](isNotUndefined,this[_0x40d30f(0x18e)])&&_0x53ba30['iJvGn'](isNotUndefined,this[_0x40d30f(0x18e)][_0x40d30f(0x123)])&&!_0x53ba30[_0x40d30f(0x153)](isTrueString,this[_0x40d30f(0x18e)][_0x40d30f(0x123)])&&logger['info'](_0x53ba30[_0x40d30f(0x17e)]);}[a133_0x11a1fe(0x147)](){return!this['isTestOrchestrationEnabled']()&&this['orchestrationUtils']['testOrderingEnabled']();}[a133_0x11a1fe(0x143)](){const _0x3c58c6=a133_0x11a1fe;return this[_0x3c58c6(0x160)];}[a133_0x11a1fe(0x17b)](_0x195936){const _0xa32603=a133_0x11a1fe,_0x1d5360={};_0x1d5360[_0xa32603(0x128)]=_0xa32603(0x14b);const _0x191833=_0x1d5360;this[_0xa32603(0x160)]=_0x195936,this['addToOrderingInstrumentationData'](_0x191833[_0xa32603(0x128)],_0x195936);}['addToOrderingInstrumentationData'](_0x1e9cf1,_0x55f627){const _0x2403c2=a133_0x11a1fe;this[_0x2403c2(0x172)][_0x1e9cf1]=_0x55f627;}['getOrderingInstrumentationData'](){return this['orderingInstrumentationData'];}[a133_0x11a1fe(0x16c)](){const _0x2bcb16=a133_0x11a1fe,_0x2dba53={'Aczvo':function(_0x131987,_0x2670b8){return _0x131987(_0x2670b8);},'jhmbx':function(_0x45bd23,_0x5ccc14){return _0x45bd23>_0x5ccc14;}},_0x500824=_0x2dba53[_0x2bcb16(0x16e)](parseInt,process[_0x2bcb16(0x164)]['BROWSERSTACK_TOTAL_NODE_COUNT']||'1'),_0x4dd669=process['env']['BROWSERSTACK_BUILD_RUN_IDENTIFIER'];_0x4dd669&&_0x2dba53['jhmbx'](_0x500824,0x1)&&(logger['debug'](_0x2bcb16(0x15d)+_0x4dd669),this[_0x2bcb16(0x18e)][_0x2bcb16(0x136)]=_0x4dd669);}async['reorderTestFiles'](_0x3651ce){const _0x327b19=a133_0x11a1fe,_0x2d753e={'JAPDL':function(_0x2c7db7,_0x47ef57){return _0x2c7db7===_0x47ef57;},'PkKai':_0x327b19(0x16f),'tHhYq':function(_0x4a3214,_0x52d55c){return _0x4a3214===_0x52d55c;},'UEmin':function(_0x5e4afb,_0x2d8155){return _0x5e4afb(_0x2d8155);},'WnYcJ':function(_0x1a2842,_0x46e5e3){return _0x1a2842(_0x46e5e3);},'jMeea':_0x327b19(0x14d),'PXBRM':_0x327b19(0x179),'tEiPi':_0x327b19(0x183),'miTDx':_0x327b19(0x16b),'SpdTs':_0x327b19(0x133)};try{if(!_0x3651ce||!Array[_0x327b19(0x18d)](_0x3651ce)||_0x2d753e[_0x327b19(0x138)](_0x3651ce[_0x327b19(0x187)],0x0))return null;if(_0x2d753e[_0x327b19(0x138)](this[_0x327b19(0x159)](),![]))return logger[_0x327b19(0x16d)](_0x2d753e[_0x327b19(0x15c)]),null;let _0x1d6efe=null;const _0x962c2a=this[_0x327b19(0x18f)][_0x327b19(0x168)]();if(this[_0x327b19(0x165)]){const _0x163804=await this['testOrderingServerHandler'][_0x327b19(0x141)](_0x3651ce,_0x962c2a);if(!_0x163804)return null;_0x1d6efe=await this[_0x327b19(0x165)][_0x327b19(0x13f)](_0x163804);}if(!_0x1d6efe||!Array[_0x327b19(0x18d)](_0x1d6efe)||_0x2d753e['tHhYq'](_0x1d6efe[_0x327b19(0x187)],0x0))return null;const _0x2dba8b=_0x2d753e[_0x327b19(0x186)](parseInt,process[_0x327b19(0x164)]['BROWSERSTACK_NODE_INDEX']||'0'),_0x38524f=_0x2d753e[_0x327b19(0x167)](parseInt,process[_0x327b19(0x164)][_0x327b19(0x18c)]||'1');return this[_0x327b19(0x148)](_0x2d753e[_0x327b19(0x145)],_0x3651ce[_0x327b19(0x187)]),this[_0x327b19(0x148)](_0x2d753e[_0x327b19(0x12c)],_0x2dba8b),this[_0x327b19(0x148)](_0x2d753e['tEiPi'],_0x38524f),this[_0x327b19(0x148)](_0x2d753e[_0x327b19(0x158)],_0x1d6efe[_0x327b19(0x187)]),this[_0x327b19(0x148)](_0x2d753e[_0x327b19(0x162)],this[_0x327b19(0x165)]?this['testOrderingServerHandler'][_0x327b19(0x151)]():0x0),_0x1d6efe['map'](_0x120d36=>sanitizedFilePath(_0x120d36));}catch(_0x53af3e){return logger[_0x327b19(0x16d)](_0x327b19(0x163)+(_0x53af3e[_0x327b19(0x13a)]||_0x53af3e[_0x327b19(0x193)]())),null;}}async[a133_0x11a1fe(0x140)](_0x6f68b4,_0x209dc8,_0x140929){const _0x568cae=a133_0x11a1fe,_0x57eb75={'mkQmb':function(_0x599bdc,_0x32c453){return _0x599bdc(_0x32c453);},'lDcUb':_0x568cae(0x161),'VwwmA':_0x568cae(0x191),'JtbcL':function(_0x2fb0ab,_0x1c887f){return _0x2fb0ab(_0x1c887f);},'ohZEK':_0x568cae(0x176),'KxpGK':_0x568cae(0x131),'NUXJi':_0x568cae(0x122),'YPSDX':_0x568cae(0x18a),'mYPxG':function(_0x37cfc0,_0x1f511e,_0x54d974,_0x5e6ffa){return _0x37cfc0(_0x1f511e,_0x54d974,_0x5e6ffa);},'RYnkL':_0x568cae(0x14e),'WqiAv':_0x568cae(0x134),'ohJfk':'--config','gllKM':_0x568cae(0x13d),'UHeOz':_0x568cae(0x144),'AmTSR':function(_0x4be7a5,_0x3762e7,_0x4ffc71,_0x2ed3ec){return _0x4be7a5(_0x3762e7,_0x4ffc71,_0x2ed3ec);}};try{const {getTestPathPatterns:_0x2ce790}=_0x57eb75[_0x568cae(0x132)](require,_0x57eb75[_0x568cae(0x170)]),{globsToMatcher:_0x5c1fb7}=_0x57eb75[_0x568cae(0x132)](require,_0x57eb75[_0x568cae(0x15a)]),{findRelatedTests:_0x21b7a2}=_0x57eb75[_0x568cae(0x180)](require,_0x57eb75[_0x568cae(0x150)]),_0x556927=_0x57eb75[_0x568cae(0x180)](require,_0x57eb75[_0x568cae(0x139)]),_0x2139cf=_0x6f68b4['testMatch']||[_0x57eb75['NUXJi'],_0x57eb75[_0x568cae(0x129)]],_0x40fd50=_0x6f68b4[_0x568cae(0x13b)]||[],_0x5ea3df=_0x57eb75['mYPxG'](spawnSync,_0x57eb75['RYnkL'],[_0x57eb75[_0x568cae(0x189)],_0x57eb75['ohJfk'],_0x140929,..._0x209dc8,_0x57eb75[_0x568cae(0x17f)]],{'encoding':_0x57eb75[_0x568cae(0x185)]});let _0x55cd54=[];!_0x5ea3df[_0x568cae(0x16a)]&&(_0x55cd54=_0x5ea3df[_0x568cae(0x146)]['split']('\x0a')['filter'](Boolean));logger[_0x568cae(0x16d)](_0x568cae(0x182)+JSON[_0x568cae(0x171)](_0x55cd54)+_0x568cae(0x12a));const _0x5b618c={};_0x5b618c[_0x568cae(0x13c)]=!![],_0x5b618c[_0x568cae(0x169)]=_0x40fd50;const _0x1e7678=_0x57eb75[_0x568cae(0x181)](micromatch,_0x55cd54,_0x2139cf,_0x5b618c)[_0x568cae(0x142)](_0x41d4c1=>path[_0x568cae(0x17a)](_0x6f68b4[_0x568cae(0x173)],_0x41d4c1));return logger[_0x568cae(0x16d)](_0x568cae(0x15b)+JSON[_0x568cae(0x171)](_0x1e7678)+_0x568cae(0x12a)),_0x1e7678;}catch(_0x5764e9){return logger['debug'](_0x568cae(0x14f)+_0x5764e9),[];}}}module[a133_0x11a1fe(0x18b)]=TestOrchestrationHandler;