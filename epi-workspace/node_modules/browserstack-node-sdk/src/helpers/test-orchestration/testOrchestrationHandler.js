const a123_0x37e5cb=a123_0x3e13;(function(_0x52231,_0x1ec414){const _0x46f908=a123_0x3e13,_0xac9f0c=_0x52231();while(!![]){try{const _0x551432=parseInt(_0x46f908(0xd1))/0x1+parseInt(_0x46f908(0xf1))/0x2+parseInt(_0x46f908(0xdc))/0x3*(parseInt(_0x46f908(0xc5))/0x4)+-parseInt(_0x46f908(0x12d))/0x5*(-parseInt(_0x46f908(0x120))/0x6)+-parseInt(_0x46f908(0xc3))/0x7+-parseInt(_0x46f908(0x12c))/0x8*(-parseInt(_0x46f908(0x118))/0x9)+-parseInt(_0x46f908(0xdd))/0xa;if(_0x551432===_0x1ec414)break;else _0xac9f0c['push'](_0xac9f0c['shift']());}catch(_0x3bb804){_0xac9f0c['push'](_0xac9f0c['shift']());}}}(a123_0x40f6,0x9c1f9));const logger=require('../logger')[a123_0x37e5cb(0xfd)],{isUndefined,isNotUndefined,isTrueString,sanitizedFilePath}=require(a123_0x37e5cb(0xde)),TestOrderingServerHandler=require(a123_0x37e5cb(0xc2)),OrchestrationUtils=require(a123_0x37e5cb(0xee)),path=require('path'),{spawnSync}=require('child_process'),micromatch=require(a123_0x37e5cb(0x111)),fs=require('fs');class TestOrchestrationHandler{constructor(_0x75f801){const _0x3fe0c3=a123_0x37e5cb,_0x1b7cb7={};_0x1b7cb7['TNSEl']='3|0|1|2|4|5';const _0x4151c4=_0x1b7cb7,_0x1a2451=_0x4151c4[_0x3fe0c3(0xed)][_0x3fe0c3(0x116)]('|');let _0x602e66=0x0;while(!![]){switch(_0x1a2451[_0x602e66++]){case'0':this['orderingInstrumentationData']={};continue;case'1':this[_0x3fe0c3(0xf2)]=![];continue;case'2':this['testOrderingServerHandler']=null;continue;case'3':this[_0x3fe0c3(0x11f)]=_0x75f801;continue;case'4':this[_0x3fe0c3(0xd9)]=new OrchestrationUtils(_0x75f801);continue;case'5':this[_0x3fe0c3(0xef)]();continue;}break;}}[a123_0x37e5cb(0xfa)](){const _0x3fd51f=a123_0x37e5cb,_0x2c8b35={'FuXWp':function(_0x2d44e5,_0x2b4248){return _0x2d44e5(_0x2b4248);},'BZpIt':function(_0x523db1,_0x413bd9){return _0x523db1(_0x413bd9);},'QrtfB':function(_0x5f3bd9,_0x7dab3d){return _0x5f3bd9&&_0x7dab3d;}},_0x13d4d3=_0x2c8b35['FuXWp'](isNotUndefined,this[_0x3fd51f(0x11f)])&&(_0x2c8b35[_0x3fd51f(0xe5)](isUndefined,this[_0x3fd51f(0x11f)][_0x3fd51f(0x12b)])||_0x2c8b35['FuXWp'](isTrueString,this[_0x3fd51f(0x11f)][_0x3fd51f(0x12b)])),_0x1ec0a8=this[_0x3fd51f(0xd9)][_0x3fd51f(0xf5)](),_0x4f4819=_0x2c8b35[_0x3fd51f(0xe5)](isNotUndefined,this[_0x3fd51f(0x11f)])&&_0x2c8b35[_0x3fd51f(0xe5)](isNotUndefined,this[_0x3fd51f(0x11f)]['projectName']),_0x4913fd=_0x2c8b35[_0x3fd51f(0xe5)](isNotUndefined,this[_0x3fd51f(0x11f)])&&_0x2c8b35[_0x3fd51f(0x12e)](isNotUndefined,this[_0x3fd51f(0x11f)][_0x3fd51f(0xf8)]);return _0x2c8b35[_0x3fd51f(0x11b)](_0x13d4d3,_0x1ec0a8)&&_0x4f4819&&_0x4913fd;}['_initializeTestOrdering'](){const _0x77a3ef=a123_0x37e5cb,_0x4a48f9={};_0x4a48f9[_0x77a3ef(0xf3)]=_0x77a3ef(0x108),_0x4a48f9[_0x77a3ef(0xda)]=_0x77a3ef(0x103);const _0x47e892=_0x4a48f9;this[_0x77a3ef(0xfa)]()?(this['testOrderingServerHandler']=new TestOrderingServerHandler(this['config']),logger[_0x77a3ef(0xf9)](_0x47e892['uqCwP'])):(logger[_0x77a3ef(0x12a)](_0x47e892[_0x77a3ef(0xda)]),this[_0x77a3ef(0xd0)]());}['logTestOrderingChecks'](){const _0x461571=a123_0x37e5cb,_0x18d899={'arzwQ':function(_0x3e09ad,_0x482ec1){return _0x3e09ad(_0x482ec1);},'jHvYl':function(_0x1c62b0,_0x1e216e){return _0x1c62b0(_0x1e216e);},'KEsDS':_0x461571(0x109),'lOMRc':function(_0x596590,_0x591bc0){return _0x596590(_0x591bc0);},'WkaCw':_0x461571(0x11c)};if(!this[_0x461571(0x10e)]())return;(!_0x18d899['arzwQ'](isNotUndefined,this[_0x461571(0x11f)])||!_0x18d899['jHvYl'](isNotUndefined,this[_0x461571(0x11f)][_0x461571(0xf8)])||!_0x18d899[_0x461571(0x123)](isNotUndefined,this[_0x461571(0x11f)][_0x461571(0x101)]))&&logger[_0x461571(0xf9)](_0x18d899[_0x461571(0x121)]),_0x18d899[_0x461571(0xce)](isNotUndefined,this['config'])&&_0x18d899[_0x461571(0xce)](isNotUndefined,this[_0x461571(0x11f)]['testObservability'])&&!_0x18d899[_0x461571(0xfe)](isTrueString,this[_0x461571(0x11f)][_0x461571(0x12b)])&&logger['info'](_0x18d899[_0x461571(0xe1)]);}[a123_0x37e5cb(0x10e)](){const _0x4e715b=a123_0x37e5cb;return!this[_0x4e715b(0xfa)]()&&this[_0x4e715b(0xd9)]['testOrderingEnabled']();}[a123_0x37e5cb(0x107)](){const _0x2a6e5e=a123_0x37e5cb;return this[_0x2a6e5e(0xf2)];}[a123_0x37e5cb(0xeb)](_0x2f6115){const _0x4e1c96=a123_0x37e5cb,_0x3af53e={};_0x3af53e['pcnUp']='applied';const _0x36f22b=_0x3af53e;this['testOrderingApplied']=_0x2f6115,this['addToOrderingInstrumentationData'](_0x36f22b[_0x4e1c96(0xd2)],_0x2f6115);}[a123_0x37e5cb(0xe0)](_0x50294b,_0x2f3e7d){const _0x430888=a123_0x37e5cb;this[_0x430888(0xc7)][_0x50294b]=_0x2f3e7d;}['getOrderingInstrumentationData'](){return this['orderingInstrumentationData'];}[a123_0x37e5cb(0x113)](){const _0x2f731b=a123_0x37e5cb,_0x3c5c84={'HDKeB':function(_0x58c72d,_0x123df3){return _0x58c72d(_0x123df3);},'ZjGJG':function(_0x2c7663,_0x22a231){return _0x2c7663>_0x22a231;}},_0x4aa405=_0x3c5c84[_0x2f731b(0xe3)](parseInt,process[_0x2f731b(0x11a)]['BROWSERSTACK_TOTAL_NODE_COUNT']||'1'),_0x34f355=process['env'][_0x2f731b(0x115)];_0x34f355&&_0x3c5c84[_0x2f731b(0x124)](_0x4aa405,0x1)&&(logger[_0x2f731b(0x12a)]('[orchestrate]\x20Setting\x20buildIdentifier\x20to\x20buildRunIdentifier:\x20'+_0x34f355),this[_0x2f731b(0x11f)][_0x2f731b(0xe6)]=_0x34f355);}async['reorderTestFiles'](_0x5e7462){const _0x16efd9=a123_0x37e5cb,_0x18df14={'tDkpX':function(_0x574ffd,_0x3a0b52){return _0x574ffd===_0x3a0b52;},'Tuyvd':function(_0xcb2dcb,_0x4dac4f){return _0xcb2dcb===_0x4dac4f;},'DwAfl':_0x16efd9(0xe4),'XXhcH':function(_0x4d657c,_0x4c258f){return _0x4d657c===_0x4c258f;},'JBGgT':function(_0x3724d9,_0x336717){return _0x3724d9(_0x336717);},'Ecbri':function(_0x3b3693,_0x332dc3){return _0x3b3693(_0x332dc3);},'Fpplf':_0x16efd9(0xc9),'GJGhr':_0x16efd9(0xfc),'whGwU':_0x16efd9(0xcf),'xHBYT':_0x16efd9(0x102),'JVABA':_0x16efd9(0x125)};try{if(!_0x5e7462||!Array['isArray'](_0x5e7462)||_0x18df14[_0x16efd9(0x119)](_0x5e7462[_0x16efd9(0x106)],0x0))return null;if(_0x18df14['Tuyvd'](this['isTestOrchestrationEnabled'](),![]))return logger[_0x16efd9(0x12a)](_0x18df14[_0x16efd9(0x112)]),null;let _0x3ef7c6=null;const _0x1a89b1=this[_0x16efd9(0xd9)][_0x16efd9(0xcb)]();if(this[_0x16efd9(0xcc)]){const _0x2ef5cc=await this[_0x16efd9(0xcc)][_0x16efd9(0xcd)](_0x5e7462,_0x1a89b1);if(!_0x2ef5cc)return null;_0x3ef7c6=await this['testOrderingServerHandler'][_0x16efd9(0xe7)](_0x2ef5cc);}if(!_0x3ef7c6||!Array[_0x16efd9(0x100)](_0x3ef7c6)||_0x18df14['XXhcH'](_0x3ef7c6[_0x16efd9(0x106)],0x0))return null;const _0x2b5e3a=_0x18df14[_0x16efd9(0x10f)](parseInt,process[_0x16efd9(0x11a)][_0x16efd9(0xc4)]||'0'),_0x5ba323=_0x18df14[_0x16efd9(0xd6)](parseInt,process[_0x16efd9(0x11a)][_0x16efd9(0xf7)]||'1');return this[_0x16efd9(0xe0)](_0x18df14[_0x16efd9(0x10c)],_0x5e7462[_0x16efd9(0x106)]),this[_0x16efd9(0xe0)](_0x18df14[_0x16efd9(0xdf)],_0x2b5e3a),this[_0x16efd9(0xe0)](_0x18df14[_0x16efd9(0x10d)],_0x5ba323),this[_0x16efd9(0xe0)](_0x18df14[_0x16efd9(0xc8)],_0x3ef7c6[_0x16efd9(0x106)]),this[_0x16efd9(0xe0)](_0x18df14[_0x16efd9(0xca)],this[_0x16efd9(0xcc)]?this[_0x16efd9(0xcc)]['getSplitTestsAPICallCount']():0x0),_0x3ef7c6[_0x16efd9(0xe9)](_0x24d8f1=>sanitizedFilePath(_0x24d8f1));}catch(_0x3dbbe7){return logger[_0x16efd9(0x12a)](_0x16efd9(0x11e)+(_0x3dbbe7['stack']||_0x3dbbe7[_0x16efd9(0xec)]())),null;}}async[a123_0x37e5cb(0xdb)](_0x3e674a,_0x312569,_0x54016d){const _0xeb70d4=a123_0x37e5cb,_0x2a5acd={'mnKGh':function(_0x4fede4,_0x18e68f){return _0x4fede4(_0x18e68f);},'PIxOF':_0xeb70d4(0xd3),'lFSeo':'jest-util','qdyLn':function(_0xaeee45,_0x2eb2f6){return _0xaeee45(_0x2eb2f6);},'NepYq':_0xeb70d4(0xd7),'XZnqI':_0xeb70d4(0x10a),'HbKsc':_0xeb70d4(0xd4),'HurML':'**/?(*.)+(spec|test).[jt]s?(x)','ruJBK':function(_0x5c27d4,_0x451a69,_0x2402bc,_0x2cf906){return _0x5c27d4(_0x451a69,_0x2402bc,_0x2cf906);},'uBvWA':_0xeb70d4(0xe8),'LRcTF':_0xeb70d4(0x117),'RQXaX':_0xeb70d4(0xf0),'heUuP':_0xeb70d4(0x10b),'JtVWl':'utf-8'};try{const {getTestPathPatterns:_0x3a4477}=_0x2a5acd[_0xeb70d4(0x122)](require,_0x2a5acd['PIxOF']),{globsToMatcher:_0x4a1336}=_0x2a5acd[_0xeb70d4(0x122)](require,_0x2a5acd['lFSeo']),{findRelatedTests:_0xcfa0f5}=_0x2a5acd['qdyLn'](require,_0x2a5acd['NepYq']),_0x3c76bf=_0x2a5acd['qdyLn'](require,_0x2a5acd[_0xeb70d4(0x104)]),_0x1edd33=_0x3e674a[_0xeb70d4(0xf4)]||[_0x2a5acd[_0xeb70d4(0xea)],_0x2a5acd[_0xeb70d4(0xff)]],_0xbe7c02=_0x3e674a['testPathIgnorePatterns']||[],_0x300305=_0x2a5acd[_0xeb70d4(0xd5)](spawnSync,_0x2a5acd[_0xeb70d4(0xd8)],[_0x2a5acd[_0xeb70d4(0x128)],_0x2a5acd[_0xeb70d4(0x127)],_0x54016d,..._0x312569,_0x2a5acd['heUuP']],{'encoding':_0x2a5acd['JtVWl']});let _0x3d79f5=[];!_0x300305['error']&&(_0x3d79f5=_0x300305['stdout'][_0xeb70d4(0x116)]('\x0a')[_0xeb70d4(0x110)](Boolean));logger[_0xeb70d4(0x12a)](_0xeb70d4(0x11d)+JSON[_0xeb70d4(0xf6)](_0x3d79f5)+_0xeb70d4(0x114));const _0x14f9a7={};_0x14f9a7[_0xeb70d4(0xc6)]=!![],_0x14f9a7[_0xeb70d4(0x105)]=_0xbe7c02;const _0x2bae7a=_0x2a5acd[_0xeb70d4(0xd5)](micromatch,_0x3d79f5,_0x1edd33,_0x14f9a7)['map'](_0x55d09b=>path[_0xeb70d4(0xe2)](_0x3e674a['rootDir'],_0x55d09b));return logger['debug'](_0xeb70d4(0x129)+JSON[_0xeb70d4(0xf6)](_0x2bae7a)+'\x20files'),_0x2bae7a;}catch(_0x5ed5fc){return logger[_0xeb70d4(0x12a)](_0xeb70d4(0xfb)+_0x5ed5fc),[];}}}function a123_0x3e13(_0x17eb86,_0x37231d){const _0x40f6a5=a123_0x40f6();return a123_0x3e13=function(_0x3e132e,_0xcd6f92){_0x3e132e=_0x3e132e-0xc2;let _0x4c7ff2=_0x40f6a5[_0x3e132e];return _0x4c7ff2;},a123_0x3e13(_0x17eb86,_0x37231d);}function a123_0x40f6(){const _0x18038d=['jest','10818MeeGMu','tDkpX','env','QrtfB','Test\x20Reordering\x20is\x20unavailable\x20because\x20testObservability\x20is\x20disabled.\x20Please\x20enable\x20it\x20from\x20browserstack.yml\x20file.','Found\x20test\x20files:\x20','[reorderTestFiles]\x20Error\x20in\x20ordering\x20test\x20files:\x20','config','2139882mTQBPj','KEsDS','mnKGh','arzwQ','ZjGJG','splitTestsAPICallCount','exports','RQXaX','LRcTF','Filterted\x20to\x20test\x20files:\x20','debug','testObservability','2688gRBOMJ','15BYrdTr','BZpIt','./testOrderingServerHandler','7702352wdyZsA','BROWSERSTACK_NODE_INDEX','4CVUFRt','matchBase','orderingInstrumentationData','xHBYT','uploadedTestFilesCount','JVABA','getTestOrderingName','testOrderingServerHandler','splitTests','lOMRc','totalNodes','logTestOrderingChecks','106377XjAEBU','pcnUp','jest-config','**/__tests__/**/*.[jt]s?(x)','ruJBK','Ecbri','jest-runner','uBvWA','orchestrationUtils','DCDpi','findTestFiles','1055529WrqNoe','6691340zijZsk','../helper','GJGhr','addToOrderingInstrumentationData','WkaCw','relative','HDKeB','[reorderTestFiles]\x20Test\x20ordering\x20is\x20not\x20supported\x20or\x20enabled','FuXWp','buildIdentifier','getOrderedTestFiles','npx','map','HbKsc','setTestOrderingApplied','toString','TNSEl','./orchestrationUtils','_initializeTestOrdering','--config','953836nGhOow','testOrderingApplied','uqCwP','testMatch','testOrderingEnabled','stringify','BROWSERSTACK_TOTAL_NODE_COUNT','buildName','info','isTestOrchestrationEnabled','Error\x20finding\x20test\x20files:\x20','nodeIndex','winstonLogger','jHvYl','HurML','isArray','projectName','downloadedTestFilesCount','Test\x20orchestration\x20without\x20test\x20ordering','XZnqI','ignore','length','isTestOrderingApplied','Test\x20orchestration\x20with\x20test\x20ordering\x20enabled','Test\x20Reordering\x20is\x20unavailable\x20because\x20buildName\x20or\x20projectName\x20is\x20null.\x20Please\x20set\x20a\x20non-null\x20value.','glob','--listTests','Fpplf','whGwU','_shouldLogTestOrderingChecks','JBGgT','filter','micromatch','DwAfl','updateBuildIdentifier','\x20files','BROWSERSTACK_BUILD_RUN_IDENTIFIER','split'];a123_0x40f6=function(){return _0x18038d;};return a123_0x40f6();}module[a123_0x37e5cb(0x126)]=TestOrchestrationHandler;