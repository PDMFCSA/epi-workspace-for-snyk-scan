const a131_0x3b6c4c=a131_0x3bdc;(function(_0x11fd3a,_0x4f91f4){const _0x528cef=a131_0x3bdc,_0x5adb9e=_0x11fd3a();while(!![]){try{const _0x1faeb6=parseInt(_0x528cef(0x183))/0x1+-parseInt(_0x528cef(0x169))/0x2*(parseInt(_0x528cef(0x17b))/0x3)+-parseInt(_0x528cef(0x135))/0x4+-parseInt(_0x528cef(0x16b))/0x5+parseInt(_0x528cef(0x151))/0x6+-parseInt(_0x528cef(0x15a))/0x7+-parseInt(_0x528cef(0x163))/0x8*(-parseInt(_0x528cef(0x133))/0x9);if(_0x1faeb6===_0x4f91f4)break;else _0x5adb9e['push'](_0x5adb9e['shift']());}catch(_0x5a1984){_0x5adb9e['push'](_0x5adb9e['shift']());}}}(a131_0x1574,0x4e90e));function a131_0x3bdc(_0x139c78,_0x1e2ca4){const _0x1574b8=a131_0x1574();return a131_0x3bdc=function(_0x3bdc15,_0x2250ac){_0x3bdc15=_0x3bdc15-0x12c;let _0x39f902=_0x1574b8[_0x3bdc15];return _0x39f902;},a131_0x3bdc(_0x139c78,_0x1e2ca4);}const logger=require(a131_0x3b6c4c(0x178))[a131_0x3b6c4c(0x17c)],{isUndefined,isNotUndefined,isTrueString,sanitizedFilePath}=require('../helper'),TestOrderingServerHandler=require(a131_0x3b6c4c(0x167)),OrchestrationUtils=require('./orchestrationUtils'),path=require('path'),{spawnSync}=require(a131_0x3b6c4c(0x15c)),micromatch=require('micromatch'),fs=require('fs');class TestOrchestrationHandler{constructor(_0xeedbc1){const _0xec341c=a131_0x3b6c4c,_0x27e2fd={};_0x27e2fd[_0xec341c(0x17f)]=_0xec341c(0x182);const _0x4d4cce=_0x27e2fd,_0xcdd705=_0x4d4cce[_0xec341c(0x17f)][_0xec341c(0x13f)]('|');let _0xb1bb36=0x0;while(!![]){switch(_0xcdd705[_0xb1bb36++]){case'0':this[_0xec341c(0x187)]=_0xeedbc1;continue;case'1':this['testOrderingServerHandler']=null;continue;case'2':this[_0xec341c(0x155)]=![];continue;case'3':this[_0xec341c(0x15f)]=new OrchestrationUtils(_0xeedbc1);continue;case'4':this[_0xec341c(0x170)]={};continue;case'5':this['_initializeTestOrdering']();continue;}break;}}[a131_0x3b6c4c(0x152)](){const _0x733689=a131_0x3b6c4c,_0x1fd27e={'irPPA':function(_0xad1cdc,_0x45e9c9){return _0xad1cdc(_0x45e9c9);},'FVWoE':function(_0x16958a,_0x222919){return _0x16958a(_0x222919);},'jJBSV':function(_0x59c1a4,_0xda094){return _0x59c1a4(_0xda094);},'OOfyR':function(_0x15d534,_0x207ddf){return _0x15d534(_0x207ddf);},'YEXzn':function(_0x1d8a86,_0x185568){return _0x1d8a86(_0x185568);},'PfcdS':function(_0x12347b,_0x298da){return _0x12347b&&_0x298da;}},_0x520771=_0x1fd27e[_0x733689(0x197)](isNotUndefined,this[_0x733689(0x187)])&&(_0x1fd27e['FVWoE'](isUndefined,this[_0x733689(0x187)][_0x733689(0x16e)])||_0x1fd27e[_0x733689(0x147)](isTrueString,this[_0x733689(0x187)][_0x733689(0x16e)])),_0x9510f9=this[_0x733689(0x15f)]['testOrderingEnabled'](),_0x113d94=_0x1fd27e[_0x733689(0x130)](isNotUndefined,this[_0x733689(0x187)])&&_0x1fd27e['jJBSV'](isNotUndefined,this[_0x733689(0x187)]['projectName']),_0x4b5c76=_0x1fd27e['YEXzn'](isNotUndefined,this[_0x733689(0x187)])&&_0x1fd27e[_0x733689(0x147)](isNotUndefined,this['config'][_0x733689(0x13d)]);return _0x1fd27e[_0x733689(0x17a)](_0x520771,_0x9510f9)&&_0x113d94&&_0x4b5c76;}['_initializeTestOrdering'](){const _0xb70dd7=a131_0x3b6c4c,_0x4f9201={};_0x4f9201[_0xb70dd7(0x157)]=_0xb70dd7(0x141),_0x4f9201[_0xb70dd7(0x13b)]=_0xb70dd7(0x18b);const _0x17269f=_0x4f9201;this[_0xb70dd7(0x152)]()?(this[_0xb70dd7(0x184)]=new TestOrderingServerHandler(this[_0xb70dd7(0x187)]),logger['info'](_0x17269f[_0xb70dd7(0x157)])):(logger[_0xb70dd7(0x12c)](_0x17269f[_0xb70dd7(0x13b)]),this['logTestOrderingChecks']());}[a131_0x3b6c4c(0x193)](){const _0x2cb9a5=a131_0x3b6c4c,_0xee8816={'nsxPF':function(_0x284607,_0x109d11){return _0x284607(_0x109d11);},'ztiuf':_0x2cb9a5(0x148),'Mniff':function(_0x58ecf9,_0x28562c){return _0x58ecf9(_0x28562c);},'kDgUc':function(_0x14e9f2,_0x2357bc){return _0x14e9f2(_0x2357bc);},'BlTTs':_0x2cb9a5(0x14d)};if(!this[_0x2cb9a5(0x18c)]())return;(!_0xee8816[_0x2cb9a5(0x156)](isNotUndefined,this[_0x2cb9a5(0x187)])||!_0xee8816[_0x2cb9a5(0x156)](isNotUndefined,this['config'][_0x2cb9a5(0x13d)])||!_0xee8816['nsxPF'](isNotUndefined,this[_0x2cb9a5(0x187)][_0x2cb9a5(0x18a)]))&&logger[_0x2cb9a5(0x150)](_0xee8816[_0x2cb9a5(0x12e)]),_0xee8816[_0x2cb9a5(0x158)](isNotUndefined,this['config'])&&_0xee8816[_0x2cb9a5(0x156)](isNotUndefined,this['config'][_0x2cb9a5(0x16e)])&&!_0xee8816['kDgUc'](isTrueString,this[_0x2cb9a5(0x187)]['testObservability'])&&logger[_0x2cb9a5(0x150)](_0xee8816[_0x2cb9a5(0x154)]);}[a131_0x3b6c4c(0x18c)](){const _0x1f8003=a131_0x3b6c4c;return!this[_0x1f8003(0x152)]()&&this[_0x1f8003(0x15f)][_0x1f8003(0x161)]();}[a131_0x3b6c4c(0x153)](){const _0x2fd455=a131_0x3b6c4c;return this[_0x2fd455(0x155)];}[a131_0x3b6c4c(0x136)](_0x5bf6be){const _0x3e1261=a131_0x3b6c4c,_0xd6924b={};_0xd6924b[_0x3e1261(0x138)]=_0x3e1261(0x14a);const _0x134aaa=_0xd6924b;this[_0x3e1261(0x155)]=_0x5bf6be,this['addToOrderingInstrumentationData'](_0x134aaa[_0x3e1261(0x138)],_0x5bf6be);}['addToOrderingInstrumentationData'](_0x322773,_0x3dda6a){const _0xce8980=a131_0x3b6c4c;this[_0xce8980(0x170)][_0x322773]=_0x3dda6a;}[a131_0x3b6c4c(0x194)](){const _0x4fe943=a131_0x3b6c4c;return this[_0x4fe943(0x170)];}[a131_0x3b6c4c(0x140)](){const _0x258b6a=a131_0x3b6c4c,_0x40afdf={'PbmMD':function(_0x2ca8e9,_0x317680){return _0x2ca8e9(_0x317680);},'KYtpW':function(_0x100813,_0x3d29bf){return _0x100813>_0x3d29bf;}},_0x519861=_0x40afdf[_0x258b6a(0x176)](parseInt,process[_0x258b6a(0x12f)][_0x258b6a(0x142)]||'1'),_0x39a716=process[_0x258b6a(0x12f)][_0x258b6a(0x18f)];_0x39a716&&_0x40afdf[_0x258b6a(0x174)](_0x519861,0x1)&&(logger['debug'](_0x258b6a(0x173)+_0x39a716),this['config']['buildIdentifier']=_0x39a716);}async[a131_0x3b6c4c(0x17d)](_0x202322){const _0x2033f5=a131_0x3b6c4c,_0x230da0={'AERyV':function(_0x14bdc8,_0x64d47b){return _0x14bdc8===_0x64d47b;},'qQiWI':_0x2033f5(0x159),'wRDdt':function(_0x2d8038,_0x39a1f8){return _0x2d8038(_0x39a1f8);},'gDmmh':'uploadedTestFilesCount','byGNW':_0x2033f5(0x181),'sLcOn':_0x2033f5(0x175),'noFRF':_0x2033f5(0x17e),'fCPer':_0x2033f5(0x15d)};try{if(!_0x202322||!Array[_0x2033f5(0x166)](_0x202322)||_0x230da0['AERyV'](_0x202322['length'],0x0))return null;if(_0x230da0['AERyV'](this[_0x2033f5(0x152)](),![]))return logger[_0x2033f5(0x12c)](_0x230da0['qQiWI']),null;let _0x43f898=null;const _0x5df079=this[_0x2033f5(0x15f)][_0x2033f5(0x16d)]();if(this[_0x2033f5(0x184)]){const _0x3ed0cd=await this[_0x2033f5(0x184)][_0x2033f5(0x13a)](_0x202322,_0x5df079);if(!_0x3ed0cd)return null;_0x43f898=await this[_0x2033f5(0x184)]['getOrderedTestFiles'](_0x3ed0cd);}if(!_0x43f898||!Array[_0x2033f5(0x166)](_0x43f898)||_0x230da0[_0x2033f5(0x139)](_0x43f898[_0x2033f5(0x14c)],0x0))return null;const _0x54b914=_0x230da0['wRDdt'](parseInt,process[_0x2033f5(0x12f)][_0x2033f5(0x188)]||'0'),_0x24b321=_0x230da0[_0x2033f5(0x14b)](parseInt,process[_0x2033f5(0x12f)][_0x2033f5(0x142)]||'1');return this['addToOrderingInstrumentationData'](_0x230da0[_0x2033f5(0x13c)],_0x202322[_0x2033f5(0x14c)]),this['addToOrderingInstrumentationData'](_0x230da0[_0x2033f5(0x189)],_0x54b914),this[_0x2033f5(0x18d)](_0x230da0[_0x2033f5(0x164)],_0x24b321),this[_0x2033f5(0x18d)](_0x230da0[_0x2033f5(0x180)],_0x43f898[_0x2033f5(0x14c)]),this['addToOrderingInstrumentationData'](_0x230da0[_0x2033f5(0x186)],this[_0x2033f5(0x184)]?this[_0x2033f5(0x184)]['getSplitTestsAPICallCount']():0x0),_0x43f898[_0x2033f5(0x162)](_0x453a65=>sanitizedFilePath(_0x453a65));}catch(_0x5607a2){return logger['debug'](_0x2033f5(0x160)+(_0x5607a2['stack']||_0x5607a2[_0x2033f5(0x165)]())),null;}}async[a131_0x3b6c4c(0x14e)](_0x19e7ac,_0x479ed2,_0x2aa8f4){const _0x312c43=a131_0x3b6c4c,_0x54f026={'apLXq':function(_0x2826c7,_0x26f3af){return _0x2826c7(_0x26f3af);},'JgUpZ':_0x312c43(0x171),'Emfwc':_0x312c43(0x195),'CEfrx':function(_0xc52612,_0x248e2f){return _0xc52612(_0x248e2f);},'jCGEG':_0x312c43(0x12d),'GosPH':_0x312c43(0x13e),'vhMCQ':'**/__tests__/**/*.[jt]s?(x)','DmlXZ':_0x312c43(0x144),'deEMD':function(_0x15009c,_0x5a688c,_0x14ff04,_0x5875f9){return _0x15009c(_0x5a688c,_0x14ff04,_0x5875f9);},'YITWj':_0x312c43(0x16f),'cypbI':'jest','oOyNY':_0x312c43(0x137),'fWYNj':'--listTests','vNVSU':_0x312c43(0x15e)};try{const {getTestPathPatterns:_0x2ff2a2}=_0x54f026[_0x312c43(0x16c)](require,_0x54f026[_0x312c43(0x179)]),{globsToMatcher:_0x144402}=_0x54f026[_0x312c43(0x16c)](require,_0x54f026[_0x312c43(0x16a)]),{findRelatedTests:_0x400346}=_0x54f026[_0x312c43(0x134)](require,_0x54f026[_0x312c43(0x146)]),_0x15caa8=_0x54f026[_0x312c43(0x134)](require,_0x54f026[_0x312c43(0x132)]),_0x2d1185=_0x19e7ac[_0x312c43(0x145)]||[_0x54f026['vhMCQ'],_0x54f026[_0x312c43(0x18e)]],_0x51e89f=_0x19e7ac[_0x312c43(0x131)]||[],_0x324d5c=_0x54f026[_0x312c43(0x196)](spawnSync,_0x54f026['YITWj'],[_0x54f026[_0x312c43(0x168)],_0x54f026['oOyNY'],_0x2aa8f4,..._0x479ed2,_0x54f026[_0x312c43(0x190)]],{'encoding':_0x54f026['vNVSU']});let _0x2dca12=[];!_0x324d5c[_0x312c43(0x192)]&&(_0x2dca12=_0x324d5c[_0x312c43(0x149)][_0x312c43(0x13f)]('\x0a')['filter'](Boolean));logger[_0x312c43(0x12c)](_0x312c43(0x172)+JSON[_0x312c43(0x185)](_0x2dca12)+_0x312c43(0x15b));const _0x421bb2={};_0x421bb2['matchBase']=!![],_0x421bb2[_0x312c43(0x191)]=_0x51e89f;const _0x347304=_0x54f026['deEMD'](micromatch,_0x2dca12,_0x2d1185,_0x421bb2)['map'](_0x45012a=>path[_0x312c43(0x14f)](_0x19e7ac['rootDir'],_0x45012a));return logger[_0x312c43(0x12c)](_0x312c43(0x143)+JSON[_0x312c43(0x185)](_0x347304)+_0x312c43(0x15b)),_0x347304;}catch(_0x245b4c){return logger[_0x312c43(0x12c)]('Error\x20finding\x20test\x20files:\x20'+_0x245b4c),[];}}}function a131_0x1574(){const _0x4bb88a=['applied','wRDdt','length','Test\x20Reordering\x20is\x20unavailable\x20because\x20testReporting\x20is\x20disabled.\x20Please\x20enable\x20it\x20from\x20browserstack.yml\x20file.','findTestFiles','relative','info','2277156pfgnkK','isTestOrchestrationEnabled','isTestOrderingApplied','BlTTs','testOrderingApplied','nsxPF','ziUJc','Mniff','[reorderTestFiles]\x20Test\x20ordering\x20is\x20not\x20supported\x20or\x20enabled','2569763WdxkFq','\x20files','child_process','splitTestsAPICallCount','utf-8','orchestrationUtils','[reorderTestFiles]\x20Error\x20in\x20ordering\x20test\x20files:\x20','testOrderingEnabled','map','260248UwgwbW','sLcOn','toString','isArray','./testOrderingServerHandler','cypbI','106682sMCHtZ','Emfwc','2942135VMEdyX','apLXq','getTestOrderingName','testObservability','npx','orderingInstrumentationData','jest-config','Found\x20test\x20files:\x20','[orchestrate]\x20Setting\x20buildIdentifier\x20to\x20buildRunIdentifier:\x20','KYtpW','totalNodes','PbmMD','exports','../logger','JgUpZ','PfcdS','9uHovjW','winstonLogger','reorderTestFiles','downloadedTestFilesCount','CYVcq','noFRF','nodeIndex','0|4|2|1|3|5','405345CSxKGA','testOrderingServerHandler','stringify','fCPer','config','BROWSERSTACK_NODE_INDEX','byGNW','projectName','Test\x20orchestration\x20without\x20test\x20ordering','_shouldLogTestOrderingChecks','addToOrderingInstrumentationData','DmlXZ','BROWSERSTACK_BUILD_RUN_IDENTIFIER','fWYNj','ignore','error','logTestOrderingChecks','getOrderingInstrumentationData','jest-util','deEMD','irPPA','debug','jest-runner','ztiuf','env','OOfyR','testPathIgnorePatterns','GosPH','333NYHJsF','CEfrx','2204612LbJdhG','setTestOrderingApplied','--config','xDxtP','AERyV','splitTests','IjizF','gDmmh','buildName','glob','split','updateBuildIdentifier','Test\x20orchestration\x20with\x20test\x20ordering\x20enabled','BROWSERSTACK_TOTAL_NODE_COUNT','Filterted\x20to\x20test\x20files:\x20','**/?(*.)+(spec|test).[jt]s?(x)','testMatch','jCGEG','jJBSV','Test\x20Reordering\x20is\x20unavailable\x20because\x20buildName\x20or\x20projectName\x20is\x20null.\x20Please\x20set\x20a\x20non-null\x20value.','stdout'];a131_0x1574=function(){return _0x4bb88a;};return a131_0x1574();}module[a131_0x3b6c4c(0x177)]=TestOrchestrationHandler;