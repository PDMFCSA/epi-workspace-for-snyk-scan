const a131_0x2821bc=a131_0x4fa5;function a131_0x2a9c(){const _0x329d29=['**/?(*.)+(spec|test).[jt]s?(x)','./testOrderingServerHandler','config','blXdg','\x20files','projectName','4303992dzAXtS','SRWeq','yUpqK','[orchestrate]\x20Setting\x20buildIdentifier\x20to\x20buildRunIdentifier:\x20','reorderTestFiles','applied','map','getSplitTestsAPICallCount','Test\x20orchestration\x20with\x20test\x20ordering\x20enabled','isTestOrchestrationEnabled','addToOrderingInstrumentationData','split','aVxTe','[reorderTestFiles]\x20Test\x20ordering\x20is\x20not\x20supported\x20or\x20enabled','ptXyi','splitTests','vOcmj','nfAhK','AKzyv','Found\x20test\x20files:\x20','BBQKt','nodeIndex','filter','testOrderingEnabled','gZCSe','UWtaI','buildName','setTestOrderingApplied','xWUjz','BROWSERSTACK_NODE_INDEX','--listTests','[reorderTestFiles]\x20Error\x20in\x20ordering\x20test\x20files:\x20','env','BROWSERSTACK_TOTAL_NODE_COUNT','EwxtS','SfadD','testMatch','length','7434WHOlYL','testObservability','getTestOrderingName','rootDir','QgbFo','AnkAS','_initializeTestOrdering','EnSkP','yGFdN','Error\x20finding\x20test\x20files:\x20','isArray','**/__tests__/**/*.[jt]s?(x)','Test\x20Reordering\x20is\x20unavailable\x20because\x20testReporting\x20is\x20disabled.\x20Please\x20enable\x20it\x20from\x20browserstack.yml\x20file.','orderingInstrumentationData','Filterted\x20to\x20test\x20files:\x20','Test\x20Reordering\x20is\x20unavailable\x20because\x20buildName\x20or\x20projectName\x20is\x20null.\x20Please\x20set\x20a\x20non-null\x20value.','info','zGLKM','matchBase','PHdAI','834cIbETA','BNHwY','jest-runner','ldSJw','5085135lpavcg','wYnwY','downloadedTestFilesCount','3|4|0|2|5|1','orchestrationUtils','debug','micromatch','stack','CSLNt','TFpqP','ejOUX','yBbDX','stringify','isTestOrderingApplied','BROWSERSTACK_BUILD_RUN_IDENTIFIER','getOrderedTestFiles','1538920apudQD','error','DhjUD','glob','4zkGtdC','testOrderingServerHandler','logTestOrderingChecks','gjCTg','../logger','totalNodes','xMerF','yXLjK','564978gEOLYV','npx','splitTestsAPICallCount','uploadedTestFilesCount','_shouldLogTestOrderingChecks','SqiQW','relative','662884pPRrBP','testOrderingApplied','buildIdentifier','LotcF','396724MTcssu','kdmQB'];a131_0x2a9c=function(){return _0x329d29;};return a131_0x2a9c();}(function(_0x2b641b,_0x59753e){const _0x24a704=a131_0x4fa5,_0x3fc8b9=_0x2b641b();while(!![]){try{const _0x36c763=parseInt(_0x24a704(0xaa))/0x1+parseInt(_0x24a704(0x97))/0x2*(-parseInt(_0x24a704(0x9f))/0x3)+parseInt(_0x24a704(0xa6))/0x4+parseInt(_0x24a704(0x93))/0x5+-parseInt(_0x24a704(0x7f))/0x6*(parseInt(_0x24a704(0x6b))/0x7)+-parseInt(_0x24a704(0xb2))/0x8+parseInt(_0x24a704(0x83))/0x9;if(_0x36c763===_0x59753e)break;else _0x3fc8b9['push'](_0x3fc8b9['shift']());}catch(_0x4cadea){_0x3fc8b9['push'](_0x3fc8b9['shift']());}}}(a131_0x2a9c,0x5b0ef));function a131_0x4fa5(_0x5304b8,_0x3cd159){const _0x2a9cd0=a131_0x2a9c();return a131_0x4fa5=function(_0x4fa52f,_0x5bb4c9){_0x4fa52f=_0x4fa52f-0x65;let _0x1b9f17=_0x2a9cd0[_0x4fa52f];return _0x1b9f17;},a131_0x4fa5(_0x5304b8,_0x3cd159);}const logger=require(a131_0x2821bc(0x9b))['winstonLogger'],{isUndefined,isNotUndefined,isTrueString,sanitizedFilePath}=require('../helper'),TestOrderingServerHandler=require(a131_0x2821bc(0xad)),OrchestrationUtils=require('./orchestrationUtils'),path=require('path'),{spawnSync}=require('child_process'),micromatch=require(a131_0x2821bc(0x89)),fs=require('fs');class TestOrchestrationHandler{constructor(_0x33ef82){const _0x3b005d=a131_0x2821bc,_0x4d71a7={};_0x4d71a7[_0x3b005d(0xab)]=_0x3b005d(0x86);const _0xa6dec6=_0x4d71a7,_0xcd33a4=_0xa6dec6['kdmQB'][_0x3b005d(0xbd)]('|');let _0x10c6d4=0x0;while(!![]){switch(_0xcd33a4[_0x10c6d4++]){case'0':this[_0x3b005d(0xa7)]=![];continue;case'1':this[_0x3b005d(0x71)]();continue;case'2':this['testOrderingServerHandler']=null;continue;case'3':this[_0x3b005d(0xae)]=_0x33ef82;continue;case'4':this[_0x3b005d(0x78)]={};continue;case'5':this[_0x3b005d(0x87)]=new OrchestrationUtils(_0x33ef82);continue;}break;}}['isTestOrchestrationEnabled'](){const _0x1ff64b=a131_0x2821bc,_0x4069d9={'QgbFo':function(_0x198c27,_0x5a6a70){return _0x198c27(_0x5a6a70);},'yGFdN':function(_0x315dab,_0x28e48e){return _0x315dab(_0x28e48e);},'yXLjK':function(_0x32f5bb,_0x43c4e8){return _0x32f5bb(_0x43c4e8);},'gZCSe':function(_0x2855a0,_0x7184c7){return _0x2855a0(_0x7184c7);},'aVxTe':function(_0x392ae7,_0x5cf931){return _0x392ae7(_0x5cf931);},'hSQgO':function(_0x472135,_0x3509fd){return _0x472135&&_0x3509fd;}},_0x218073=_0x4069d9[_0x1ff64b(0x6f)](isNotUndefined,this['config'])&&(_0x4069d9[_0x1ff64b(0x73)](isUndefined,this[_0x1ff64b(0xae)][_0x1ff64b(0x6c)])||_0x4069d9[_0x1ff64b(0x9e)](isTrueString,this[_0x1ff64b(0xae)][_0x1ff64b(0x6c)])),_0xa38523=this[_0x1ff64b(0x87)]['testOrderingEnabled'](),_0x471e4b=_0x4069d9[_0x1ff64b(0xca)](isNotUndefined,this[_0x1ff64b(0xae)])&&_0x4069d9[_0x1ff64b(0xca)](isNotUndefined,this[_0x1ff64b(0xae)][_0x1ff64b(0xb1)]),_0x334636=_0x4069d9[_0x1ff64b(0xbe)](isNotUndefined,this[_0x1ff64b(0xae)])&&_0x4069d9[_0x1ff64b(0x9e)](isNotUndefined,this['config'][_0x1ff64b(0xcc)]);return _0x4069d9['hSQgO'](_0x218073,_0xa38523)&&_0x471e4b&&_0x334636;}[a131_0x2821bc(0x71)](){const _0x3e7ef5=a131_0x2821bc,_0x2f26fe={};_0x2f26fe[_0x3e7ef5(0x67)]=_0x3e7ef5(0xba),_0x2f26fe[_0x3e7ef5(0x82)]='Test\x20orchestration\x20without\x20test\x20ordering';const _0x199ee4=_0x2f26fe;this[_0x3e7ef5(0xbb)]()?(this[_0x3e7ef5(0x98)]=new TestOrderingServerHandler(this[_0x3e7ef5(0xae)]),logger['info'](_0x199ee4['EwxtS'])):(logger['debug'](_0x199ee4[_0x3e7ef5(0x82)]),this[_0x3e7ef5(0x99)]());}[a131_0x2821bc(0x99)](){const _0x5178bb=a131_0x2821bc,_0x26b2fb={'UWtaI':function(_0x53c588,_0x4f737e){return _0x53c588(_0x4f737e);},'CSLNt':_0x5178bb(0x7a),'biBIt':function(_0x65c3c4,_0x1bccc0){return _0x65c3c4(_0x1bccc0);},'PHdAI':_0x5178bb(0x77)};if(!this['_shouldLogTestOrderingChecks']())return;(!_0x26b2fb['UWtaI'](isNotUndefined,this[_0x5178bb(0xae)])||!_0x26b2fb[_0x5178bb(0xcb)](isNotUndefined,this['config'][_0x5178bb(0xcc)])||!_0x26b2fb[_0x5178bb(0xcb)](isNotUndefined,this[_0x5178bb(0xae)][_0x5178bb(0xb1)]))&&logger[_0x5178bb(0x7b)](_0x26b2fb[_0x5178bb(0x8b)]),_0x26b2fb[_0x5178bb(0xcb)](isNotUndefined,this[_0x5178bb(0xae)])&&_0x26b2fb[_0x5178bb(0xcb)](isNotUndefined,this[_0x5178bb(0xae)][_0x5178bb(0x6c)])&&!_0x26b2fb['biBIt'](isTrueString,this[_0x5178bb(0xae)]['testObservability'])&&logger[_0x5178bb(0x7b)](_0x26b2fb[_0x5178bb(0x7e)]);}[a131_0x2821bc(0xa3)](){const _0x5015d4=a131_0x2821bc;return!this['isTestOrchestrationEnabled']()&&this[_0x5015d4(0x87)][_0x5015d4(0xc9)]();}[a131_0x2821bc(0x90)](){const _0xb623e1=a131_0x2821bc;return this[_0xb623e1(0xa7)];}[a131_0x2821bc(0xcd)](_0x25279d){const _0x4fdbd9=a131_0x2821bc,_0x2c3b56={};_0x2c3b56['ejOUX']=_0x4fdbd9(0xb7);const _0x5db492=_0x2c3b56;this[_0x4fdbd9(0xa7)]=_0x25279d,this[_0x4fdbd9(0xbc)](_0x5db492[_0x4fdbd9(0x8d)],_0x25279d);}['addToOrderingInstrumentationData'](_0xa235a4,_0xc50a63){const _0x2a1c40=a131_0x2821bc;this[_0x2a1c40(0x78)][_0xa235a4]=_0xc50a63;}['getOrderingInstrumentationData'](){const _0x1f0a1e=a131_0x2821bc;return this[_0x1f0a1e(0x78)];}['updateBuildIdentifier'](){const _0x59bc61=a131_0x2821bc,_0xf36ee5={'rdNUD':function(_0x3805be,_0x30cba0){return _0x3805be(_0x30cba0);},'BBQKt':function(_0xbfe392,_0x378012){return _0xbfe392>_0x378012;}},_0x32f124=_0xf36ee5['rdNUD'](parseInt,process[_0x59bc61(0x65)][_0x59bc61(0x66)]||'1'),_0x1c5ea3=process['env'][_0x59bc61(0x91)];_0x1c5ea3&&_0xf36ee5[_0x59bc61(0xc6)](_0x32f124,0x1)&&(logger[_0x59bc61(0x88)](_0x59bc61(0xb5)+_0x1c5ea3),this[_0x59bc61(0xae)][_0x59bc61(0xa8)]=_0x1c5ea3);}async[a131_0x2821bc(0xb6)](_0x484180){const _0x285c84=a131_0x2821bc,_0x4bcdc5={'wYnwY':function(_0x4f1e43,_0x158d0b){return _0x4f1e43===_0x158d0b;},'EnSkP':_0x285c84(0xbf),'nfAhK':function(_0x18c9e8,_0x5593e6){return _0x18c9e8===_0x5593e6;},'zGLKM':function(_0xad5aef,_0x5713fc){return _0xad5aef(_0x5713fc);},'TFpqP':function(_0x277dea,_0x2c0ef7){return _0x277dea(_0x2c0ef7);},'xVjnD':_0x285c84(0xa2),'ptXyi':_0x285c84(0xc7),'xMerF':_0x285c84(0x9c),'vOcmj':_0x285c84(0x85),'AKzyv':_0x285c84(0xa1)};try{if(!_0x484180||!Array['isArray'](_0x484180)||_0x4bcdc5['wYnwY'](_0x484180[_0x285c84(0x6a)],0x0))return null;if(_0x4bcdc5[_0x285c84(0x84)](this['isTestOrchestrationEnabled'](),![]))return logger[_0x285c84(0x88)](_0x4bcdc5[_0x285c84(0x72)]),null;let _0x553a21=null;const _0x144693=this[_0x285c84(0x87)][_0x285c84(0x6d)]();if(this[_0x285c84(0x98)]){const _0x508037=await this[_0x285c84(0x98)][_0x285c84(0xc1)](_0x484180,_0x144693);if(!_0x508037)return null;_0x553a21=await this['testOrderingServerHandler'][_0x285c84(0x92)](_0x508037);}if(!_0x553a21||!Array[_0x285c84(0x75)](_0x553a21)||_0x4bcdc5[_0x285c84(0xc3)](_0x553a21[_0x285c84(0x6a)],0x0))return null;const _0x4e7f3f=_0x4bcdc5[_0x285c84(0x7c)](parseInt,process[_0x285c84(0x65)][_0x285c84(0xcf)]||'0'),_0x1630e9=_0x4bcdc5[_0x285c84(0x8c)](parseInt,process['env'][_0x285c84(0x66)]||'1');return this[_0x285c84(0xbc)](_0x4bcdc5['xVjnD'],_0x484180[_0x285c84(0x6a)]),this['addToOrderingInstrumentationData'](_0x4bcdc5[_0x285c84(0xc0)],_0x4e7f3f),this[_0x285c84(0xbc)](_0x4bcdc5[_0x285c84(0x9d)],_0x1630e9),this[_0x285c84(0xbc)](_0x4bcdc5[_0x285c84(0xc2)],_0x553a21[_0x285c84(0x6a)]),this[_0x285c84(0xbc)](_0x4bcdc5[_0x285c84(0xc4)],this[_0x285c84(0x98)]?this[_0x285c84(0x98)][_0x285c84(0xb9)]():0x0),_0x553a21[_0x285c84(0xb8)](_0xf60014=>sanitizedFilePath(_0xf60014));}catch(_0x43b432){return logger[_0x285c84(0x88)](_0x285c84(0xd1)+(_0x43b432[_0x285c84(0x8a)]||_0x43b432['toString']())),null;}}async['findTestFiles'](_0x3ce25c,_0x47d2df,_0x119ab6){const _0xc9919e=a131_0x2821bc,_0x2a220a={'yBbDX':function(_0x499f9d,_0x43f7db){return _0x499f9d(_0x43f7db);},'ZaEQH':'jest-config','jJSsH':function(_0xb2904e,_0x42bf9a){return _0xb2904e(_0x42bf9a);},'SfadD':'jest-util','xWUjz':_0xc9919e(0x81),'gjCTg':function(_0xf3ce5e,_0x3244c4){return _0xf3ce5e(_0x3244c4);},'yUpqK':_0xc9919e(0x96),'LotcF':_0xc9919e(0x76),'SRWeq':_0xc9919e(0xac),'DhjUD':function(_0x3ddf98,_0x560566,_0x1646ab,_0xb7564e){return _0x3ddf98(_0x560566,_0x1646ab,_0xb7564e);},'TvOkV':_0xc9919e(0xa0),'BNHwY':'jest','AnkAS':'--config','blXdg':_0xc9919e(0xd0),'EqRrA':'utf-8','SqiQW':function(_0x4a03dd,_0x9ae725,_0x1205ef,_0x34b863){return _0x4a03dd(_0x9ae725,_0x1205ef,_0x34b863);}};try{const {getTestPathPatterns:_0x5bb5fa}=_0x2a220a[_0xc9919e(0x8e)](require,_0x2a220a['ZaEQH']),{globsToMatcher:_0x45fe56}=_0x2a220a['jJSsH'](require,_0x2a220a[_0xc9919e(0x68)]),{findRelatedTests:_0x209d8b}=_0x2a220a[_0xc9919e(0x8e)](require,_0x2a220a[_0xc9919e(0xce)]),_0x54362a=_0x2a220a[_0xc9919e(0x9a)](require,_0x2a220a[_0xc9919e(0xb4)]),_0x51fb48=_0x3ce25c[_0xc9919e(0x69)]||[_0x2a220a[_0xc9919e(0xa9)],_0x2a220a[_0xc9919e(0xb3)]],_0x1c101a=_0x3ce25c['testPathIgnorePatterns']||[],_0x5511e2=_0x2a220a[_0xc9919e(0x95)](spawnSync,_0x2a220a['TvOkV'],[_0x2a220a[_0xc9919e(0x80)],_0x2a220a[_0xc9919e(0x70)],_0x119ab6,..._0x47d2df,_0x2a220a[_0xc9919e(0xaf)]],{'encoding':_0x2a220a['EqRrA']});let _0x17b34a=[];!_0x5511e2[_0xc9919e(0x94)]&&(_0x17b34a=_0x5511e2['stdout'][_0xc9919e(0xbd)]('\x0a')[_0xc9919e(0xc8)](Boolean));logger[_0xc9919e(0x88)](_0xc9919e(0xc5)+JSON[_0xc9919e(0x8f)](_0x17b34a)+_0xc9919e(0xb0));const _0x2b21c0={};_0x2b21c0[_0xc9919e(0x7d)]=!![],_0x2b21c0['ignore']=_0x1c101a;const _0x117fd2=_0x2a220a[_0xc9919e(0xa4)](micromatch,_0x17b34a,_0x51fb48,_0x2b21c0)[_0xc9919e(0xb8)](_0x2560d1=>path[_0xc9919e(0xa5)](_0x3ce25c[_0xc9919e(0x6e)],_0x2560d1));return logger['debug'](_0xc9919e(0x79)+JSON[_0xc9919e(0x8f)](_0x117fd2)+_0xc9919e(0xb0)),_0x117fd2;}catch(_0x24fde2){return logger['debug'](_0xc9919e(0x74)+_0x24fde2),[];}}}module['exports']=TestOrchestrationHandler;