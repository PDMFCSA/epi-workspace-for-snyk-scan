const a136_0x512d4e=a136_0x2dae;(function(_0x55e4cc,_0x47eb05){const _0x5cb000=a136_0x2dae,_0x8f69cb=_0x55e4cc();while(!![]){try{const _0x2d6784=-parseInt(_0x5cb000(0xdf))/0x1+parseInt(_0x5cb000(0xe3))/0x2*(parseInt(_0x5cb000(0xd7))/0x3)+parseInt(_0x5cb000(0xb6))/0x4*(parseInt(_0x5cb000(0xc8))/0x5)+parseInt(_0x5cb000(0xea))/0x6*(-parseInt(_0x5cb000(0xf5))/0x7)+-parseInt(_0x5cb000(0xc6))/0x8+parseInt(_0x5cb000(0xd1))/0x9+parseInt(_0x5cb000(0xd3))/0xa*(parseInt(_0x5cb000(0xab))/0xb);if(_0x2d6784===_0x47eb05)break;else _0x8f69cb['push'](_0x8f69cb['shift']());}catch(_0x15d78a){_0x8f69cb['push'](_0x8f69cb['shift']());}}}(a136_0x310d,0x56268));function a136_0x2dae(_0x5e754c,_0x103d36){const _0x310db9=a136_0x310d();return a136_0x2dae=function(_0x2dae7d,_0x298707){_0x2dae7d=_0x2dae7d-0x9c;let _0x5a894b=_0x310db9[_0x2dae7d];return _0x5a894b;},a136_0x2dae(_0x5e754c,_0x103d36);}const logger=require('../logger')[a136_0x512d4e(0xb5)],{isUndefined,isNotUndefined,isTrueString,sanitizedFilePath}=require('../helper'),TestOrderingServerHandler=require(a136_0x512d4e(0xc3)),OrchestrationUtils=require('./orchestrationUtils'),path=require(a136_0x512d4e(0xe6)),{spawnSync}=require('child_process'),micromatch=require(a136_0x512d4e(0xc5)),fs=require('fs');function a136_0x310d(){const _0x6b05c1=['wlLhH','findTestFiles','Test\x20Reordering\x20is\x20unavailable\x20because\x20buildName\x20or\x20projectName\x20is\x20null.\x20Please\x20set\x20a\x20non-null\x20value.','QnEws','jeZHy','orchestrationUtils','BNcOJ','FycDa','qjOXt','orderingInstrumentationData','DPoDJ','env','testOrderingServerHandler','applied','eascZ','debug','zsUwb','BROWSERSTACK_BUILD_RUN_IDENTIFIER','BROWSERSTACK_TOTAL_NODE_COUNT','yamON','npx','isArray','41019bmkXTp','**/__tests__/**/*.[jt]s?(x)','wPoLO','rTQVL','map','YNQVB','length','config','Filterted\x20to\x20test\x20files:\x20','bLeTd','winstonLogger','12160oaNVOw','getOrderedTestFiles','zgKLo','wRMAG','zpkQh','jest','buildName','FLkZP','addToOrderingInstrumentationData','_initializeTestOrdering','getSplitTestsAPICallCount','info','isTestOrderingApplied','./testOrderingServerHandler','rootDir','micromatch','1321936dEeBnS','stringify','35lUUNhg','updateBuildIdentifier','QPrdz','KcLqP','--listTests','_shouldLogTestOrderingChecks','testOrderingEnabled','pKpTb','Test\x20Reordering\x20is\x20unavailable\x20because\x20testReporting\x20is\x20disabled.\x20Please\x20enable\x20it\x20from\x20browserstack.yml\x20file.','4762386btUpSO','testMatch','40nNBKzz','TTlCv','Test\x20orchestration\x20with\x20test\x20ordering\x20enabled','jest-config','6DiYeME','splitTestsAPICallCount','ZQNuy','[orchestrate]\x20Setting\x20buildIdentifier\x20to\x20buildRunIdentifier:\x20','toString','relative','TPPKc','exports','465625NpoiTm','downloadedTestFilesCount','--config','\x20files','614674gQAMfb','isTestOrchestrationEnabled','Found\x20test\x20files:\x20','path','BJCdK','ayktK','tzgxH','222tbpnoB','tiSQd','Error\x20finding\x20test\x20files:\x20','HIDRk','NZzDb','testOrderingApplied','buildIdentifier','totalNodes','iruxs','projectName','jest-runner','37135vRLwpV','reorderTestFiles','VCNRt','split','ignore','testObservability','cyTNE','CzHSS','hkrXG','[reorderTestFiles]\x20Error\x20in\x20ordering\x20test\x20files:\x20','nodeIndex','lZJJX'];a136_0x310d=function(){return _0x6b05c1;};return a136_0x310d();}class TestOrchestrationHandler{constructor(_0x57ad12){const _0x367e58=a136_0x512d4e,_0x4acaa9={};_0x4acaa9['ZTovY']='2|3|4|5|1|0';const _0x2a5da1=_0x4acaa9,_0x3e1062=_0x2a5da1['ZTovY']['split']('|');let _0x173dce=0x0;while(!![]){switch(_0x3e1062[_0x173dce++]){case'0':this[_0x367e58(0xbf)]();continue;case'1':this[_0x367e58(0x106)]=new OrchestrationUtils(_0x57ad12);continue;case'2':this[_0x367e58(0xb2)]=_0x57ad12;continue;case'3':this[_0x367e58(0x9e)]={};continue;case'4':this['testOrderingApplied']=![];continue;case'5':this[_0x367e58(0xa1)]=null;continue;}break;}}[a136_0x512d4e(0xe4)](){const _0x4872e0=a136_0x512d4e,_0x3ccade={'ayktK':function(_0x190e3c,_0x379f73){return _0x190e3c(_0x379f73);},'YNQVB':function(_0xd39d70,_0x2492d0){return _0xd39d70(_0x2492d0);},'rTQVL':function(_0x4125c8,_0x3bcf9b){return _0x4125c8(_0x3bcf9b);},'jeZHy':function(_0x2c5e31,_0x21798e){return _0x2c5e31(_0x21798e);},'DPoDJ':function(_0x25a48f,_0x7f2d46){return _0x25a48f(_0x7f2d46);},'iruxs':function(_0x16abcf,_0x3375c8){return _0x16abcf(_0x3375c8);},'zsUwb':function(_0x52236e,_0x2ab68f){return _0x52236e&&_0x2ab68f;}},_0xdd942f=_0x3ccade[_0x4872e0(0xe8)](isNotUndefined,this[_0x4872e0(0xb2)])&&(_0x3ccade[_0x4872e0(0xb0)](isUndefined,this[_0x4872e0(0xb2)][_0x4872e0(0xfa)])||_0x3ccade[_0x4872e0(0xae)](isTrueString,this[_0x4872e0(0xb2)][_0x4872e0(0xfa)])),_0x2e949c=this[_0x4872e0(0x106)][_0x4872e0(0xce)](),_0x5a723b=_0x3ccade[_0x4872e0(0x105)](isNotUndefined,this[_0x4872e0(0xb2)])&&_0x3ccade[_0x4872e0(0x9f)](isNotUndefined,this[_0x4872e0(0xb2)][_0x4872e0(0xf3)]),_0x5930da=_0x3ccade[_0x4872e0(0xf2)](isNotUndefined,this[_0x4872e0(0xb2)])&&_0x3ccade[_0x4872e0(0x105)](isNotUndefined,this[_0x4872e0(0xb2)][_0x4872e0(0xbc)]);return _0x3ccade[_0x4872e0(0xa5)](_0xdd942f,_0x2e949c)&&_0x5a723b&&_0x5930da;}[a136_0x512d4e(0xbf)](){const _0x2179aa=a136_0x512d4e,_0x3c71b5={};_0x3c71b5[_0x2179aa(0xb9)]=_0x2179aa(0xd5),_0x3c71b5['sDBfd']='Test\x20orchestration\x20without\x20test\x20ordering';const _0x3bdaa6=_0x3c71b5;this[_0x2179aa(0xe4)]()?(this[_0x2179aa(0xa1)]=new TestOrderingServerHandler(this[_0x2179aa(0xb2)]),logger['info'](_0x3bdaa6[_0x2179aa(0xb9)])):(logger['debug'](_0x3bdaa6['sDBfd']),this['logTestOrderingChecks']());}['logTestOrderingChecks'](){const _0x1b41f6=a136_0x512d4e,_0x525bbf={'QnEws':function(_0x5d2cc5,_0x42266f){return _0x5d2cc5(_0x42266f);},'zpkQh':function(_0xd9cf21,_0x3ae745){return _0xd9cf21(_0x3ae745);},'HIDRk':_0x1b41f6(0x103),'yamON':function(_0x2a727d,_0x4b23a2){return _0x2a727d(_0x4b23a2);},'pKpTb':_0x1b41f6(0xd0)};if(!this[_0x1b41f6(0xcd)]())return;(!_0x525bbf['QnEws'](isNotUndefined,this[_0x1b41f6(0xb2)])||!_0x525bbf[_0x1b41f6(0xba)](isNotUndefined,this['config'][_0x1b41f6(0xbc)])||!_0x525bbf['QnEws'](isNotUndefined,this[_0x1b41f6(0xb2)]['projectName']))&&logger[_0x1b41f6(0xc1)](_0x525bbf[_0x1b41f6(0xed)]),_0x525bbf[_0x1b41f6(0xa8)](isNotUndefined,this[_0x1b41f6(0xb2)])&&_0x525bbf[_0x1b41f6(0x104)](isNotUndefined,this[_0x1b41f6(0xb2)][_0x1b41f6(0xfa)])&&!_0x525bbf['yamON'](isTrueString,this['config'][_0x1b41f6(0xfa)])&&logger['info'](_0x525bbf[_0x1b41f6(0xcf)]);}[a136_0x512d4e(0xcd)](){const _0x194dda=a136_0x512d4e;return!this['isTestOrchestrationEnabled']()&&this[_0x194dda(0x106)][_0x194dda(0xce)]();}[a136_0x512d4e(0xc2)](){const _0xd86f29=a136_0x512d4e;return this[_0xd86f29(0xef)];}['setTestOrderingApplied'](_0x12d4b2){const _0x106e74=a136_0x512d4e,_0x1b1c74={};_0x1b1c74['tzgxH']=_0x106e74(0xa2);const _0x48d7e6=_0x1b1c74;this['testOrderingApplied']=_0x12d4b2,this[_0x106e74(0xbe)](_0x48d7e6[_0x106e74(0xe9)],_0x12d4b2);}[a136_0x512d4e(0xbe)](_0x3ebee8,_0x1ce248){const _0x57e396=a136_0x512d4e;this[_0x57e396(0x9e)][_0x3ebee8]=_0x1ce248;}['getOrderingInstrumentationData'](){const _0x5c0712=a136_0x512d4e;return this[_0x5c0712(0x9e)];}[a136_0x512d4e(0xc9)](){const _0x1d4162=a136_0x512d4e,_0x38bf22={'KcLqP':function(_0x26b152,_0x38547b){return _0x26b152(_0x38547b);},'CzHSS':function(_0x20ff33,_0x54d63f){return _0x20ff33>_0x54d63f;}},_0x5a8840=_0x38bf22[_0x1d4162(0xcb)](parseInt,process[_0x1d4162(0xa0)][_0x1d4162(0xa7)]||'1'),_0x40dee3=process[_0x1d4162(0xa0)][_0x1d4162(0xa6)];_0x40dee3&&_0x38bf22[_0x1d4162(0xfc)](_0x5a8840,0x1)&&(logger[_0x1d4162(0xa4)](_0x1d4162(0xda)+_0x40dee3),this[_0x1d4162(0xb2)][_0x1d4162(0xf0)]=_0x40dee3);}async[a136_0x512d4e(0xf6)](_0x2b7c6b){const _0x3e0361=a136_0x512d4e,_0x575941={'FLkZP':function(_0xca1489,_0x5a1fce){return _0xca1489===_0x5a1fce;},'TPPKc':'[reorderTestFiles]\x20Test\x20ordering\x20is\x20not\x20supported\x20or\x20enabled','BNcOJ':function(_0x46d6cb,_0x2d1896){return _0x46d6cb===_0x2d1896;},'bLeTd':function(_0xdbd2cc,_0x232bcf){return _0xdbd2cc(_0x232bcf);},'lZJJX':function(_0x5d953e,_0xa73e74){return _0x5d953e(_0xa73e74);},'rrhXH':'uploadedTestFilesCount','wlLhH':_0x3e0361(0xff),'TTlCv':_0x3e0361(0xf1),'NZzDb':_0x3e0361(0xe0),'qjOXt':_0x3e0361(0xd8)};try{if(!_0x2b7c6b||!Array[_0x3e0361(0xaa)](_0x2b7c6b)||_0x575941[_0x3e0361(0xbd)](_0x2b7c6b[_0x3e0361(0xb1)],0x0))return null;if(_0x575941[_0x3e0361(0xbd)](this[_0x3e0361(0xe4)](),![]))return logger['debug'](_0x575941[_0x3e0361(0xdd)]),null;let _0x17d5f4=null;const _0x2d2824=this['orchestrationUtils']['getTestOrderingName']();if(this[_0x3e0361(0xa1)]){const _0x242cf8=await this[_0x3e0361(0xa1)]['splitTests'](_0x2b7c6b,_0x2d2824);if(!_0x242cf8)return null;_0x17d5f4=await this[_0x3e0361(0xa1)][_0x3e0361(0xb7)](_0x242cf8);}if(!_0x17d5f4||!Array[_0x3e0361(0xaa)](_0x17d5f4)||_0x575941[_0x3e0361(0x107)](_0x17d5f4[_0x3e0361(0xb1)],0x0))return null;const _0x46ab79=_0x575941[_0x3e0361(0xb4)](parseInt,process['env']['BROWSERSTACK_NODE_INDEX']||'0'),_0x150e32=_0x575941[_0x3e0361(0x100)](parseInt,process[_0x3e0361(0xa0)]['BROWSERSTACK_TOTAL_NODE_COUNT']||'1');return this['addToOrderingInstrumentationData'](_0x575941['rrhXH'],_0x2b7c6b[_0x3e0361(0xb1)]),this[_0x3e0361(0xbe)](_0x575941[_0x3e0361(0x101)],_0x46ab79),this['addToOrderingInstrumentationData'](_0x575941[_0x3e0361(0xd4)],_0x150e32),this['addToOrderingInstrumentationData'](_0x575941[_0x3e0361(0xee)],_0x17d5f4[_0x3e0361(0xb1)]),this[_0x3e0361(0xbe)](_0x575941[_0x3e0361(0x9d)],this[_0x3e0361(0xa1)]?this['testOrderingServerHandler'][_0x3e0361(0xc0)]():0x0),_0x17d5f4[_0x3e0361(0xaf)](_0x12d0fe=>sanitizedFilePath(_0x12d0fe));}catch(_0x573042){return logger[_0x3e0361(0xa4)](_0x3e0361(0xfe)+(_0x573042['stack']||_0x573042[_0x3e0361(0xdb)]())),null;}}async[a136_0x512d4e(0x102)](_0x49f6a7,_0x598d16,_0x47cf63){const _0x56bdb3=a136_0x512d4e,_0x26f531={'QPrdz':function(_0x5254ef,_0x4202fb){return _0x5254ef(_0x4202fb);},'FycDa':_0x56bdb3(0xd6),'VCNRt':'jest-util','OniZb':_0x56bdb3(0xf4),'tiSQd':'glob','dTigv':_0x56bdb3(0xac),'cyTNE':'**/?(*.)+(spec|test).[jt]s?(x)','eascZ':function(_0x2d6a57,_0xe469fd,_0x4ddf8a,_0x4ede27){return _0x2d6a57(_0xe469fd,_0x4ddf8a,_0x4ede27);},'zHFZP':_0x56bdb3(0xa9),'zgKLo':_0x56bdb3(0xbb),'wPoLO':_0x56bdb3(0xe1),'BJCdK':_0x56bdb3(0xcc),'ZQNuy':'utf-8','hkrXG':function(_0x38f92f,_0x331e2f,_0x3f735a,_0x2e4c67){return _0x38f92f(_0x331e2f,_0x3f735a,_0x2e4c67);}};try{const {getTestPathPatterns:_0x1b96b3}=_0x26f531['QPrdz'](require,_0x26f531[_0x56bdb3(0x9c)]),{globsToMatcher:_0x1d5427}=_0x26f531[_0x56bdb3(0xca)](require,_0x26f531[_0x56bdb3(0xf7)]),{findRelatedTests:_0x1641ca}=_0x26f531['QPrdz'](require,_0x26f531['OniZb']),_0x522502=_0x26f531[_0x56bdb3(0xca)](require,_0x26f531[_0x56bdb3(0xeb)]),_0x34b941=_0x49f6a7[_0x56bdb3(0xd2)]||[_0x26f531['dTigv'],_0x26f531[_0x56bdb3(0xfb)]],_0x5469ba=_0x49f6a7['testPathIgnorePatterns']||[],_0x222f3b=_0x26f531[_0x56bdb3(0xa3)](spawnSync,_0x26f531['zHFZP'],[_0x26f531[_0x56bdb3(0xb8)],_0x26f531[_0x56bdb3(0xad)],_0x47cf63,..._0x598d16,_0x26f531[_0x56bdb3(0xe7)]],{'encoding':_0x26f531[_0x56bdb3(0xd9)]});let _0x1fcb7d=[];!_0x222f3b['error']&&(_0x1fcb7d=_0x222f3b['stdout'][_0x56bdb3(0xf8)]('\x0a')['filter'](Boolean));logger['debug'](_0x56bdb3(0xe5)+JSON['stringify'](_0x1fcb7d)+'\x20files');const _0x2d17ac={};_0x2d17ac['matchBase']=!![],_0x2d17ac[_0x56bdb3(0xf9)]=_0x5469ba;const _0x3675b9=_0x26f531[_0x56bdb3(0xfd)](micromatch,_0x1fcb7d,_0x34b941,_0x2d17ac)[_0x56bdb3(0xaf)](_0x5aac53=>path[_0x56bdb3(0xdc)](_0x49f6a7[_0x56bdb3(0xc4)],_0x5aac53));return logger[_0x56bdb3(0xa4)](_0x56bdb3(0xb3)+JSON[_0x56bdb3(0xc7)](_0x3675b9)+_0x56bdb3(0xe2)),_0x3675b9;}catch(_0x51ca60){return logger[_0x56bdb3(0xa4)](_0x56bdb3(0xec)+_0x51ca60),[];}}}module[a136_0x512d4e(0xde)]=TestOrchestrationHandler;