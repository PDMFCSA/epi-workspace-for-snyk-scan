const a121_0x42cd42=a121_0x1890;(function(_0x416882,_0x48c992){const _0x1f3812=a121_0x1890,_0x37b53c=_0x416882();while(!![]){try{const _0x29c220=parseInt(_0x1f3812(0xc0))/0x1+-parseInt(_0x1f3812(0xdc))/0x2+-parseInt(_0x1f3812(0xa6))/0x3*(-parseInt(_0x1f3812(0xe5))/0x4)+-parseInt(_0x1f3812(0xd2))/0x5*(parseInt(_0x1f3812(0xbf))/0x6)+-parseInt(_0x1f3812(0xe3))/0x7+parseInt(_0x1f3812(0x8c))/0x8*(-parseInt(_0x1f3812(0x93))/0x9)+parseInt(_0x1f3812(0xa0))/0xa;if(_0x29c220===_0x48c992)break;else _0x37b53c['push'](_0x37b53c['shift']());}catch(_0x4053ef){_0x37b53c['push'](_0x37b53c['shift']());}}}(a121_0x1e67,0x3c6bd));const logger=require('../logger')[a121_0x42cd42(0xce)],{isUndefined,isNotUndefined,isTrueString,sanitizedFilePath}=require('../helper'),TestOrderingServerHandler=require(a121_0x42cd42(0x95)),OrchestrationUtils=require(a121_0x42cd42(0xc7)),path=require(a121_0x42cd42(0xe0)),{spawnSync}=require(a121_0x42cd42(0x80)),micromatch=require(a121_0x42cd42(0x8e)),fs=require('fs');class TestOrchestrationHandler{constructor(_0x16808a){const _0x25b55a=a121_0x42cd42,_0x4c5a0c={};_0x4c5a0c[_0x25b55a(0xc9)]=_0x25b55a(0xd7);const _0x1583a2=_0x4c5a0c,_0x4b6de1=_0x1583a2[_0x25b55a(0xc9)][_0x25b55a(0x89)]('|');let _0x46bd7d=0x0;while(!![]){switch(_0x4b6de1[_0x46bd7d++]){case'0':this['_initializeTestOrdering']();continue;case'1':this['orderingInstrumentationData']={};continue;case'2':this['config']=_0x16808a;continue;case'3':this[_0x25b55a(0xd8)]=new OrchestrationUtils(_0x16808a);continue;case'4':this[_0x25b55a(0x91)]=![];continue;case'5':this['testOrderingServerHandler']=null;continue;}break;}}[a121_0x42cd42(0x9a)](){const _0x3f7de5=a121_0x42cd42,_0x3dc0ae={'gUfLg':function(_0xe2ed99,_0x552e45){return _0xe2ed99(_0x552e45);},'jtlYj':function(_0x2ff973,_0x266299){return _0x2ff973(_0x266299);},'bPgLc':function(_0x1f5f59,_0x24e6cb){return _0x1f5f59(_0x24e6cb);},'Fribk':function(_0x23ca5a,_0x5c3485){return _0x23ca5a(_0x5c3485);},'KcCbd':function(_0x5ba1ba,_0x3d903a){return _0x5ba1ba&&_0x3d903a;}},_0x2d2e5f=_0x3dc0ae[_0x3f7de5(0xc4)](isNotUndefined,this[_0x3f7de5(0xe1)])&&(_0x3dc0ae[_0x3f7de5(0xc4)](isUndefined,this[_0x3f7de5(0xe1)]['testObservability'])||_0x3dc0ae[_0x3f7de5(0xc4)](isTrueString,this[_0x3f7de5(0xe1)][_0x3f7de5(0xa2)])),_0x560406=this['orchestrationUtils'][_0x3f7de5(0x7f)](),_0x47f0bd=_0x3dc0ae[_0x3f7de5(0xbb)](isNotUndefined,this['config'])&&_0x3dc0ae[_0x3f7de5(0xb6)](isNotUndefined,this['config'][_0x3f7de5(0xd1)]),_0x3950e4=_0x3dc0ae[_0x3f7de5(0xb6)](isNotUndefined,this[_0x3f7de5(0xe1)])&&_0x3dc0ae[_0x3f7de5(0xc2)](isNotUndefined,this[_0x3f7de5(0xe1)][_0x3f7de5(0xdb)]);return _0x3dc0ae[_0x3f7de5(0x98)](_0x2d2e5f,_0x560406)&&_0x47f0bd&&_0x3950e4;}[a121_0x42cd42(0xcb)](){const _0x24afb5=a121_0x42cd42,_0x4e1d5f={};_0x4e1d5f[_0x24afb5(0xe8)]='Test\x20orchestration\x20with\x20test\x20ordering\x20enabled',_0x4e1d5f['AiaJd']=_0x24afb5(0x86);const _0x5a0caf=_0x4e1d5f;this[_0x24afb5(0x9a)]()?(this[_0x24afb5(0xc5)]=new TestOrderingServerHandler(this[_0x24afb5(0xe1)]),logger[_0x24afb5(0x9f)](_0x5a0caf[_0x24afb5(0xe8)])):(logger[_0x24afb5(0xa1)](_0x5a0caf[_0x24afb5(0xba)]),this[_0x24afb5(0x7d)]());}[a121_0x42cd42(0x7d)](){const _0x17ec64=a121_0x42cd42,_0x537b1f={'IDXHP':function(_0x33fa25,_0x2b56bc){return _0x33fa25(_0x2b56bc);},'GsGkS':function(_0x3b9fef,_0x4c9ccc){return _0x3b9fef(_0x4c9ccc);},'nxwHt':function(_0xa343d,_0x1f5bb7){return _0xa343d(_0x1f5bb7);},'MsACC':_0x17ec64(0xb0),'WPCGc':function(_0x1a61f8,_0x27938d){return _0x1a61f8(_0x27938d);},'KDicb':function(_0x8c3947,_0x81ba36){return _0x8c3947(_0x81ba36);},'dVwLC':_0x17ec64(0x88)};if(!this[_0x17ec64(0xb8)]())return;(!_0x537b1f[_0x17ec64(0xe2)](isNotUndefined,this[_0x17ec64(0xe1)])||!_0x537b1f[_0x17ec64(0xc6)](isNotUndefined,this['config'][_0x17ec64(0xdb)])||!_0x537b1f[_0x17ec64(0xe6)](isNotUndefined,this['config'][_0x17ec64(0xd1)]))&&logger[_0x17ec64(0x9f)](_0x537b1f[_0x17ec64(0xb1)]),_0x537b1f[_0x17ec64(0xeb)](isNotUndefined,this[_0x17ec64(0xe1)])&&_0x537b1f[_0x17ec64(0xe4)](isNotUndefined,this[_0x17ec64(0xe1)][_0x17ec64(0xa2)])&&!_0x537b1f[_0x17ec64(0xc6)](isTrueString,this['config'][_0x17ec64(0xa2)])&&logger[_0x17ec64(0x9f)](_0x537b1f[_0x17ec64(0x97)]);}[a121_0x42cd42(0xb8)](){const _0x4d62d0=a121_0x42cd42;return!this[_0x4d62d0(0x9a)]()&&this[_0x4d62d0(0xd8)][_0x4d62d0(0x7f)]();}[a121_0x42cd42(0xbc)](){return this['testOrderingApplied'];}[a121_0x42cd42(0x94)](_0x140879){const _0x3c5d30=a121_0x42cd42,_0x441e45={};_0x441e45['ijVzl']=_0x3c5d30(0xe7);const _0x52b8ea=_0x441e45;this['testOrderingApplied']=_0x140879,this[_0x3c5d30(0xa9)](_0x52b8ea[_0x3c5d30(0x87)],_0x140879);}['addToOrderingInstrumentationData'](_0x21732b,_0x3a51f5){this['orderingInstrumentationData'][_0x21732b]=_0x3a51f5;}[a121_0x42cd42(0x9d)](){return this['orderingInstrumentationData'];}[a121_0x42cd42(0xcf)](){const _0x47377=a121_0x42cd42,_0x3d5afe={'aSnvR':function(_0x27075c,_0xb197e0){return _0x27075c(_0xb197e0);},'JGWPz':function(_0x438865,_0x5be91c){return _0x438865>_0x5be91c;}},_0x33c6b8=_0x3d5afe[_0x47377(0xca)](parseInt,process[_0x47377(0xb7)]['BROWSERSTACK_TOTAL_NODE_COUNT']||'1'),_0x2a3138=process[_0x47377(0xb7)]['BROWSERSTACK_BUILD_RUN_IDENTIFIER'];_0x2a3138&&_0x3d5afe[_0x47377(0x7e)](_0x33c6b8,0x1)&&(logger[_0x47377(0xa1)]('[orchestrate]\x20Setting\x20buildIdentifier\x20to\x20buildRunIdentifier:\x20'+_0x2a3138),this[_0x47377(0xe1)][_0x47377(0xea)]=_0x2a3138);}async[a121_0x42cd42(0xd9)](_0x33c930){const _0x10b0af=a121_0x42cd42,_0x25123d={'MjFmf':function(_0x268874,_0x2b37e5){return _0x268874===_0x2b37e5;},'lKKyF':'[reorderTestFiles]\x20Test\x20ordering\x20is\x20not\x20supported\x20or\x20enabled','bwowG':function(_0xde0d96,_0x3d1d74){return _0xde0d96===_0x3d1d74;},'YOeWy':function(_0x3138e2,_0x206f04){return _0x3138e2(_0x206f04);},'Zqoaj':function(_0x16fccd,_0x24a75b){return _0x16fccd(_0x24a75b);},'DBAFy':_0x10b0af(0xcd),'gjGEf':_0x10b0af(0xb2),'Ohury':_0x10b0af(0x99),'Hsnnc':_0x10b0af(0xb3),'KyfEb':'splitTestsAPICallCount'};try{if(!_0x33c930||!Array[_0x10b0af(0xdf)](_0x33c930)||_0x25123d[_0x10b0af(0xaf)](_0x33c930['length'],0x0))return null;if(_0x25123d[_0x10b0af(0xaf)](this['isTestOrchestrationEnabled'](),![]))return logger[_0x10b0af(0xa1)](_0x25123d[_0x10b0af(0xcc)]),null;let _0x2f2180=null;const _0x3d49ac=this[_0x10b0af(0xd8)][_0x10b0af(0x82)]();if(this['testOrderingServerHandler']){const _0x3e8388=await this['testOrderingServerHandler']['splitTests'](_0x33c930,_0x3d49ac);if(!_0x3e8388)return null;_0x2f2180=await this['testOrderingServerHandler'][_0x10b0af(0xb9)](_0x3e8388);}if(!_0x2f2180||!Array['isArray'](_0x2f2180)||_0x25123d[_0x10b0af(0xda)](_0x2f2180[_0x10b0af(0xbd)],0x0))return null;const _0x1e6c6a=_0x25123d[_0x10b0af(0x83)](parseInt,process['env'][_0x10b0af(0x81)]||'0'),_0x4f2036=_0x25123d[_0x10b0af(0xc1)](parseInt,process[_0x10b0af(0xb7)]['BROWSERSTACK_TOTAL_NODE_COUNT']||'1');return this[_0x10b0af(0xa9)](_0x25123d['DBAFy'],_0x33c930['length']),this[_0x10b0af(0xa9)](_0x25123d[_0x10b0af(0xec)],_0x1e6c6a),this[_0x10b0af(0xa9)](_0x25123d[_0x10b0af(0xa7)],_0x4f2036),this['addToOrderingInstrumentationData'](_0x25123d[_0x10b0af(0xd0)],_0x2f2180['length']),this['addToOrderingInstrumentationData'](_0x25123d[_0x10b0af(0xd6)],this['testOrderingServerHandler']?this['testOrderingServerHandler'][_0x10b0af(0xd3)]():0x0),_0x2f2180[_0x10b0af(0x8a)](_0x21e0c8=>sanitizedFilePath(_0x21e0c8));}catch(_0x41a8f0){return logger[_0x10b0af(0xa1)](_0x10b0af(0x8b)+(_0x41a8f0[_0x10b0af(0xac)]||_0x41a8f0[_0x10b0af(0xed)]())),null;}}async[a121_0x42cd42(0x84)](_0x3ccfda,_0x397e27,_0x1ceee9){const _0x213bb3=a121_0x42cd42,_0x67a3bf={'jWlFF':function(_0x2ad330,_0x2dff70){return _0x2ad330(_0x2dff70);},'AOrDd':'jest-config','kmCGe':_0x213bb3(0xdd),'huIkD':_0x213bb3(0x92),'lPfjZ':function(_0x1fbd40,_0x3a3516){return _0x1fbd40(_0x3a3516);},'mbvzT':_0x213bb3(0xe9),'QSlKz':'**/__tests__/**/*.[jt]s?(x)','BDBbx':_0x213bb3(0xbe),'hhktJ':function(_0x31f030,_0x1351f1,_0x49ac2c,_0x56df36){return _0x31f030(_0x1351f1,_0x49ac2c,_0x56df36);},'dLhjQ':_0x213bb3(0x9e),'vTrZP':_0x213bb3(0xd4),'KkslM':_0x213bb3(0xb5),'TdFvb':'--listTests','WGRcf':_0x213bb3(0xde)};try{const {getTestPathPatterns:_0xe10ae5}=_0x67a3bf[_0x213bb3(0x96)](require,_0x67a3bf[_0x213bb3(0xab)]),{globsToMatcher:_0x48dbc5}=_0x67a3bf[_0x213bb3(0x96)](require,_0x67a3bf['kmCGe']),{findRelatedTests:_0x483fb5}=_0x67a3bf[_0x213bb3(0x96)](require,_0x67a3bf[_0x213bb3(0x9c)]),_0x3276a6=_0x67a3bf[_0x213bb3(0x8f)](require,_0x67a3bf['mbvzT']),_0x183d22=_0x3ccfda['testMatch']||[_0x67a3bf[_0x213bb3(0xa3)],_0x67a3bf[_0x213bb3(0xc3)]],_0x339754=_0x3ccfda[_0x213bb3(0xd5)]||[],_0x459ba4=_0x67a3bf[_0x213bb3(0xa4)](spawnSync,_0x67a3bf['dLhjQ'],[_0x67a3bf[_0x213bb3(0xad)],_0x67a3bf['KkslM'],_0x1ceee9,..._0x397e27,_0x67a3bf[_0x213bb3(0x90)]],{'encoding':_0x67a3bf[_0x213bb3(0xa8)]});let _0x308193=[];!_0x459ba4[_0x213bb3(0xaa)]&&(_0x308193=_0x459ba4[_0x213bb3(0xee)][_0x213bb3(0x89)]('\x0a')[_0x213bb3(0xae)](Boolean));logger[_0x213bb3(0xa1)]('Found\x20test\x20files:\x20'+JSON[_0x213bb3(0xc8)](_0x308193)+_0x213bb3(0xb4));const _0x565df5={};_0x565df5['matchBase']=!![],_0x565df5['ignore']=_0x339754;const _0x494807=_0x67a3bf[_0x213bb3(0xa4)](micromatch,_0x308193,_0x183d22,_0x565df5)['map'](_0xe54046=>path[_0x213bb3(0xa5)](_0x3ccfda[_0x213bb3(0x9b)],_0xe54046));return logger[_0x213bb3(0xa1)](_0x213bb3(0x8d)+JSON[_0x213bb3(0xc8)](_0x494807)+_0x213bb3(0xb4)),_0x494807;}catch(_0x39dec9){return logger[_0x213bb3(0xa1)](_0x213bb3(0x85)+_0x39dec9),[];}}}function a121_0x1e67(){const _0xeb2055=['IDXHP','995260DpatEN','KDicb','16CReyzu','nxwHt','applied','xXSmX','glob','buildIdentifier','WPCGc','gjGEf','toString','stdout','logTestOrderingChecks','JGWPz','testOrderingEnabled','child_process','BROWSERSTACK_NODE_INDEX','getTestOrderingName','YOeWy','findTestFiles','Error\x20finding\x20test\x20files:\x20','Test\x20orchestration\x20without\x20test\x20ordering','ijVzl','Test\x20Reordering\x20is\x20unavailable\x20because\x20testObservability\x20is\x20disabled.\x20Please\x20enable\x20it\x20from\x20browserstack.yml\x20file.','split','map','[reorderTestFiles]\x20Error\x20in\x20ordering\x20test\x20files:\x20','8WIfEct','Filterted\x20to\x20test\x20files:\x20','micromatch','lPfjZ','TdFvb','testOrderingApplied','jest-runner','145089xKiBao','setTestOrderingApplied','./testOrderingServerHandler','jWlFF','dVwLC','KcCbd','totalNodes','isTestOrchestrationEnabled','rootDir','huIkD','getOrderingInstrumentationData','npx','info','2038820spNvgC','debug','testObservability','QSlKz','hhktJ','relative','159687EENpas','Ohury','WGRcf','addToOrderingInstrumentationData','error','AOrDd','stack','vTrZP','filter','MjFmf','Test\x20Reordering\x20is\x20unavailable\x20because\x20buildName\x20or\x20projectName\x20is\x20null.\x20Please\x20set\x20a\x20non-null\x20value.','MsACC','nodeIndex','downloadedTestFilesCount','\x20files','--config','bPgLc','env','_shouldLogTestOrderingChecks','getOrderedTestFiles','AiaJd','jtlYj','isTestOrderingApplied','length','**/?(*.)+(spec|test).[jt]s?(x)','30JWaGhi','157119uptBCZ','Zqoaj','Fribk','BDBbx','gUfLg','testOrderingServerHandler','GsGkS','./orchestrationUtils','stringify','gvTCe','aSnvR','_initializeTestOrdering','lKKyF','uploadedTestFilesCount','winstonLogger','updateBuildIdentifier','Hsnnc','projectName','139340qnhDjY','getSplitTestsAPICallCount','jest','testPathIgnorePatterns','KyfEb','2|1|4|5|3|0','orchestrationUtils','reorderTestFiles','bwowG','buildName','57582USjRNg','jest-util','utf-8','isArray','path','config'];a121_0x1e67=function(){return _0xeb2055;};return a121_0x1e67();}function a121_0x1890(_0x15a1b2,_0x346bb0){const _0x1e6776=a121_0x1e67();return a121_0x1890=function(_0x1890cd,_0x47f9d6){_0x1890cd=_0x1890cd-0x7d;let _0x2f8804=_0x1e6776[_0x1890cd];return _0x2f8804;},a121_0x1890(_0x15a1b2,_0x346bb0);}module['exports']=TestOrchestrationHandler;