const a129_0x4cb2ee=a129_0x20f0;(function(_0x5077e1,_0x65883b){const _0x1461ad=a129_0x20f0,_0x36e6e6=_0x5077e1();while(!![]){try{const _0x3cd0f5=-parseInt(_0x1461ad(0x1e5))/0x1+-parseInt(_0x1461ad(0x229))/0x2+-parseInt(_0x1461ad(0x1fe))/0x3+-parseInt(_0x1461ad(0x232))/0x4*(-parseInt(_0x1461ad(0x239))/0x5)+-parseInt(_0x1461ad(0x1e6))/0x6+-parseInt(_0x1461ad(0x226))/0x7+parseInt(_0x1461ad(0x21a))/0x8*(parseInt(_0x1461ad(0x22f))/0x9);if(_0x3cd0f5===_0x65883b)break;else _0x36e6e6['push'](_0x36e6e6['shift']());}catch(_0x402f9f){_0x36e6e6['push'](_0x36e6e6['shift']());}}}(a129_0x59f7,0xab3a2));const logger=require(a129_0x4cb2ee(0x200))['winstonLogger'],{isUndefined,isNotUndefined,isTrueString,sanitizedFilePath}=require('../helper'),TestOrderingServerHandler=require(a129_0x4cb2ee(0x1e1)),OrchestrationUtils=require(a129_0x4cb2ee(0x1f0)),path=require(a129_0x4cb2ee(0x1fb)),{spawnSync}=require(a129_0x4cb2ee(0x231)),micromatch=require(a129_0x4cb2ee(0x208)),fs=require('fs');function a129_0x20f0(_0x363ca3,_0x2529f9){const _0x59f7dc=a129_0x59f7();return a129_0x20f0=function(_0x20f06b,_0x1adfd2){_0x20f06b=_0x20f06b-0x1d2;let _0x3d74cc=_0x59f7dc[_0x20f06b];return _0x3d74cc;},a129_0x20f0(_0x363ca3,_0x2529f9);}class TestOrchestrationHandler{constructor(_0x5a273f){const _0x308fa6=a129_0x4cb2ee,_0x57ca60={};_0x57ca60[_0x308fa6(0x1dc)]=_0x308fa6(0x1f6);const _0x2b182c=_0x57ca60,_0x43fb24=_0x2b182c[_0x308fa6(0x1dc)][_0x308fa6(0x1f1)]('|');let _0xac6de8=0x0;while(!![]){switch(_0x43fb24[_0xac6de8++]){case'0':this[_0x308fa6(0x1d6)]=null;continue;case'1':this['orchestrationUtils']=new OrchestrationUtils(_0x5a273f);continue;case'2':this[_0x308fa6(0x1f8)]=![];continue;case'3':this[_0x308fa6(0x21d)]={};continue;case'4':this[_0x308fa6(0x210)]=_0x5a273f;continue;case'5':this[_0x308fa6(0x1d2)]();continue;}break;}}[a129_0x4cb2ee(0x1d4)](){const _0x16bae3=a129_0x4cb2ee,_0x474a45={'WBurT':function(_0x58b160,_0x2cd62b){return _0x58b160(_0x2cd62b);},'LpJKq':function(_0x4b61cf,_0xa56b93){return _0x4b61cf(_0xa56b93);},'CvEQW':function(_0x1a8e89,_0xbc6fad){return _0x1a8e89(_0xbc6fad);},'tKwOf':function(_0x29e344,_0x4a6151){return _0x29e344(_0x4a6151);},'sxbno':function(_0x50c8c8,_0x293ce5){return _0x50c8c8&&_0x293ce5;}},_0x4842da=_0x474a45[_0x16bae3(0x237)](isNotUndefined,this[_0x16bae3(0x210)])&&(_0x474a45[_0x16bae3(0x237)](isUndefined,this[_0x16bae3(0x210)][_0x16bae3(0x1f9)])||_0x474a45[_0x16bae3(0x1fc)](isTrueString,this[_0x16bae3(0x210)][_0x16bae3(0x1f9)])),_0x383687=this[_0x16bae3(0x20a)][_0x16bae3(0x1e8)](),_0x23c81b=_0x474a45[_0x16bae3(0x237)](isNotUndefined,this['config'])&&_0x474a45[_0x16bae3(0x237)](isNotUndefined,this[_0x16bae3(0x210)][_0x16bae3(0x215)]),_0x34793d=_0x474a45[_0x16bae3(0x222)](isNotUndefined,this['config'])&&_0x474a45[_0x16bae3(0x225)](isNotUndefined,this[_0x16bae3(0x210)][_0x16bae3(0x227)]);return _0x474a45[_0x16bae3(0x1de)](_0x4842da,_0x383687)&&_0x23c81b&&_0x34793d;}[a129_0x4cb2ee(0x1d2)](){const _0x2ef3d0=a129_0x4cb2ee,_0x46cdc0={};_0x46cdc0[_0x2ef3d0(0x235)]=_0x2ef3d0(0x22c),_0x46cdc0[_0x2ef3d0(0x1e2)]=_0x2ef3d0(0x1fd);const _0x29c5cd=_0x46cdc0;this['isTestOrchestrationEnabled']()?(this[_0x2ef3d0(0x1d6)]=new TestOrderingServerHandler(this[_0x2ef3d0(0x210)]),logger[_0x2ef3d0(0x1ee)](_0x29c5cd['NWBlL'])):(logger[_0x2ef3d0(0x221)](_0x29c5cd[_0x2ef3d0(0x1e2)]),this['logTestOrderingChecks']());}[a129_0x4cb2ee(0x20b)](){const _0x31a307=a129_0x4cb2ee,_0x3eb371={'Iiqey':function(_0x3a3f0e,_0x1422e){return _0x3a3f0e(_0x1422e);},'bzlfY':function(_0x375f8d,_0x290b91){return _0x375f8d(_0x290b91);},'LqrxL':_0x31a307(0x1ff),'roTUL':function(_0x31690a,_0xe4f8f1){return _0x31690a(_0xe4f8f1);},'fbVOL':function(_0x2563e5,_0xbbb844){return _0x2563e5(_0xbbb844);},'ruGCN':'Test\x20Reordering\x20is\x20unavailable\x20because\x20testReporting\x20is\x20disabled.\x20Please\x20enable\x20it\x20from\x20browserstack.yml\x20file.'};if(!this['_shouldLogTestOrderingChecks']())return;(!_0x3eb371[_0x31a307(0x1fa)](isNotUndefined,this[_0x31a307(0x210)])||!_0x3eb371[_0x31a307(0x1e0)](isNotUndefined,this[_0x31a307(0x210)][_0x31a307(0x227)])||!_0x3eb371[_0x31a307(0x1e0)](isNotUndefined,this[_0x31a307(0x210)][_0x31a307(0x215)]))&&logger['info'](_0x3eb371[_0x31a307(0x211)]),_0x3eb371[_0x31a307(0x207)](isNotUndefined,this['config'])&&_0x3eb371[_0x31a307(0x207)](isNotUndefined,this[_0x31a307(0x210)][_0x31a307(0x1f9)])&&!_0x3eb371['fbVOL'](isTrueString,this['config'][_0x31a307(0x1f9)])&&logger[_0x31a307(0x1ee)](_0x3eb371[_0x31a307(0x20c)]);}['_shouldLogTestOrderingChecks'](){const _0x237065=a129_0x4cb2ee;return!this[_0x237065(0x1d4)]()&&this[_0x237065(0x20a)][_0x237065(0x1e8)]();}[a129_0x4cb2ee(0x220)](){return this['testOrderingApplied'];}['setTestOrderingApplied'](_0x208d40){const _0x37a4d0=a129_0x4cb2ee,_0x1b4223={};_0x1b4223[_0x37a4d0(0x23a)]=_0x37a4d0(0x204);const _0x18bed5=_0x1b4223;this[_0x37a4d0(0x1f8)]=_0x208d40,this[_0x37a4d0(0x206)](_0x18bed5[_0x37a4d0(0x23a)],_0x208d40);}[a129_0x4cb2ee(0x206)](_0x454d6b,_0x3ecc41){const _0x3ad9d9=a129_0x4cb2ee;this[_0x3ad9d9(0x21d)][_0x454d6b]=_0x3ecc41;}[a129_0x4cb2ee(0x21c)](){return this['orderingInstrumentationData'];}['updateBuildIdentifier'](){const _0x4416b3=a129_0x4cb2ee,_0x1f6993={'TRLPd':function(_0x493b33,_0xd136c2){return _0x493b33(_0xd136c2);},'QVPiU':function(_0x55b938,_0x4d9e7a){return _0x55b938>_0x4d9e7a;}},_0x52d768=_0x1f6993[_0x4416b3(0x1d9)](parseInt,process[_0x4416b3(0x212)][_0x4416b3(0x1f4)]||'1'),_0x66c86c=process[_0x4416b3(0x212)]['BROWSERSTACK_BUILD_RUN_IDENTIFIER'];_0x66c86c&&_0x1f6993[_0x4416b3(0x20f)](_0x52d768,0x1)&&(logger[_0x4416b3(0x221)](_0x4416b3(0x233)+_0x66c86c),this['config'][_0x4416b3(0x22a)]=_0x66c86c);}async['reorderTestFiles'](_0x22ef14){const _0x3cb95c=a129_0x4cb2ee,_0x83a472={'xYKUe':function(_0x380bb4,_0x46451a){return _0x380bb4===_0x46451a;},'Cgjhe':_0x3cb95c(0x1d5),'Hlmih':function(_0x4ebd04,_0xef395f){return _0x4ebd04(_0xef395f);},'ucKUX':'uploadedTestFilesCount','WBfDs':_0x3cb95c(0x202),'Ztwzi':_0x3cb95c(0x228),'CMBgQ':_0x3cb95c(0x22e),'umfBc':'splitTestsAPICallCount'};try{if(!_0x22ef14||!Array['isArray'](_0x22ef14)||_0x83a472[_0x3cb95c(0x236)](_0x22ef14[_0x3cb95c(0x20d)],0x0))return null;if(_0x83a472[_0x3cb95c(0x236)](this[_0x3cb95c(0x1d4)](),![]))return logger[_0x3cb95c(0x221)](_0x83a472['Cgjhe']),null;let _0xc03469=null;const _0x277438=this[_0x3cb95c(0x20a)]['getTestOrderingName']();if(this['testOrderingServerHandler']){const _0x302aff=await this[_0x3cb95c(0x1d6)][_0x3cb95c(0x22d)](_0x22ef14,_0x277438);if(!_0x302aff)return null;_0xc03469=await this[_0x3cb95c(0x1d6)][_0x3cb95c(0x1d8)](_0x302aff);}if(!_0xc03469||!Array[_0x3cb95c(0x21e)](_0xc03469)||_0x83a472['xYKUe'](_0xc03469[_0x3cb95c(0x20d)],0x0))return null;const _0x1c58b2=_0x83a472['Hlmih'](parseInt,process[_0x3cb95c(0x212)][_0x3cb95c(0x219)]||'0'),_0x1db576=_0x83a472[_0x3cb95c(0x21b)](parseInt,process[_0x3cb95c(0x212)]['BROWSERSTACK_TOTAL_NODE_COUNT']||'1');return this[_0x3cb95c(0x206)](_0x83a472['ucKUX'],_0x22ef14[_0x3cb95c(0x20d)]),this[_0x3cb95c(0x206)](_0x83a472['WBfDs'],_0x1c58b2),this[_0x3cb95c(0x206)](_0x83a472[_0x3cb95c(0x1eb)],_0x1db576),this[_0x3cb95c(0x206)](_0x83a472['CMBgQ'],_0xc03469[_0x3cb95c(0x20d)]),this[_0x3cb95c(0x206)](_0x83a472[_0x3cb95c(0x1d7)],this['testOrderingServerHandler']?this[_0x3cb95c(0x1d6)][_0x3cb95c(0x22b)]():0x0),_0xc03469[_0x3cb95c(0x1f7)](_0x3bc7cb=>sanitizedFilePath(_0x3bc7cb));}catch(_0x49fbd9){return logger[_0x3cb95c(0x221)](_0x3cb95c(0x1ef)+(_0x49fbd9[_0x3cb95c(0x1e7)]||_0x49fbd9[_0x3cb95c(0x21f)]())),null;}}async['findTestFiles'](_0x53c697,_0x12fe49,_0x3a079b){const _0x19bff1=a129_0x4cb2ee,_0x16b509={'dwZHK':function(_0x29b250,_0x14f5ee){return _0x29b250(_0x14f5ee);},'OaViF':_0x19bff1(0x213),'bgbqJ':_0x19bff1(0x214),'lqSon':function(_0x121917,_0x171ac1){return _0x121917(_0x171ac1);},'lKnKZ':_0x19bff1(0x1ea),'bchhX':function(_0x929ec0,_0x16eba9){return _0x929ec0(_0x16eba9);},'zZCtp':_0x19bff1(0x23c),'ABuyw':_0x19bff1(0x205),'JWqvq':_0x19bff1(0x234),'PKmGi':function(_0x4809d1,_0xff380e,_0x265cdc,_0x15b759){return _0x4809d1(_0xff380e,_0x265cdc,_0x15b759);},'fMpGM':_0x19bff1(0x1ec),'dyIke':'jest','UPiHe':_0x19bff1(0x217),'Lsris':_0x19bff1(0x1d3),'ujhvy':_0x19bff1(0x1f5)};try{const {getTestPathPatterns:_0x2fdbab}=_0x16b509[_0x19bff1(0x1ed)](require,_0x16b509[_0x19bff1(0x216)]),{globsToMatcher:_0x31a162}=_0x16b509[_0x19bff1(0x1ed)](require,_0x16b509[_0x19bff1(0x238)]),{findRelatedTests:_0x191e75}=_0x16b509['lqSon'](require,_0x16b509['lKnKZ']),_0x1fac3e=_0x16b509[_0x19bff1(0x1df)](require,_0x16b509[_0x19bff1(0x1e3)]),_0x24bf17=_0x53c697['testMatch']||[_0x16b509['ABuyw'],_0x16b509[_0x19bff1(0x1dd)]],_0x9bf61d=_0x53c697[_0x19bff1(0x218)]||[],_0x546efb=_0x16b509[_0x19bff1(0x201)](spawnSync,_0x16b509[_0x19bff1(0x1f3)],[_0x16b509[_0x19bff1(0x203)],_0x16b509[_0x19bff1(0x209)],_0x3a079b,..._0x12fe49,_0x16b509[_0x19bff1(0x223)]],{'encoding':_0x16b509[_0x19bff1(0x23b)]});let _0x1e1851=[];!_0x546efb[_0x19bff1(0x1e9)]&&(_0x1e1851=_0x546efb['stdout']['split']('\x0a')['filter'](Boolean));logger[_0x19bff1(0x221)](_0x19bff1(0x1da)+JSON['stringify'](_0x1e1851)+'\x20files');const _0x428a98={};_0x428a98[_0x19bff1(0x20e)]=!![],_0x428a98['ignore']=_0x9bf61d;const _0x2d0cf5=_0x16b509[_0x19bff1(0x201)](micromatch,_0x1e1851,_0x24bf17,_0x428a98)[_0x19bff1(0x1f7)](_0x26c035=>path[_0x19bff1(0x1f2)](_0x53c697[_0x19bff1(0x230)],_0x26c035));return logger['debug']('Filterted\x20to\x20test\x20files:\x20'+JSON[_0x19bff1(0x1db)](_0x2d0cf5)+_0x19bff1(0x224)),_0x2d0cf5;}catch(_0x5c15f3){return logger[_0x19bff1(0x221)](_0x19bff1(0x1e4)+_0x5c15f3),[];}}}function a129_0x59f7(){const _0x3d561c=['orchestrationUtils','logTestOrderingChecks','ruGCN','length','matchBase','QVPiU','config','LqrxL','env','jest-config','jest-util','projectName','OaViF','--config','testPathIgnorePatterns','BROWSERSTACK_NODE_INDEX','144aeLyQg','Hlmih','getOrderingInstrumentationData','orderingInstrumentationData','isArray','toString','isTestOrderingApplied','debug','CvEQW','Lsris','\x20files','tKwOf','2988909FxAvMd','buildName','totalNodes','1127908dbNRre','buildIdentifier','getSplitTestsAPICallCount','Test\x20orchestration\x20with\x20test\x20ordering\x20enabled','splitTests','downloadedTestFilesCount','1920924HLqOFK','rootDir','child_process','4TGwFol','[orchestrate]\x20Setting\x20buildIdentifier\x20to\x20buildRunIdentifier:\x20','**/?(*.)+(spec|test).[jt]s?(x)','NWBlL','xYKUe','WBurT','bgbqJ','960865rWcqMz','prriS','ujhvy','glob','_initializeTestOrdering','--listTests','isTestOrchestrationEnabled','[reorderTestFiles]\x20Test\x20ordering\x20is\x20not\x20supported\x20or\x20enabled','testOrderingServerHandler','umfBc','getOrderedTestFiles','TRLPd','Found\x20test\x20files:\x20','stringify','YPFSd','JWqvq','sxbno','bchhX','bzlfY','./testOrderingServerHandler','EwKkI','zZCtp','Error\x20finding\x20test\x20files:\x20','467865GdMRZk','7342392PNyKZA','stack','testOrderingEnabled','error','jest-runner','Ztwzi','npx','dwZHK','info','[reorderTestFiles]\x20Error\x20in\x20ordering\x20test\x20files:\x20','./orchestrationUtils','split','relative','fMpGM','BROWSERSTACK_TOTAL_NODE_COUNT','utf-8','4|3|2|0|1|5','map','testOrderingApplied','testObservability','Iiqey','path','LpJKq','Test\x20orchestration\x20without\x20test\x20ordering','1950411RnrHxV','Test\x20Reordering\x20is\x20unavailable\x20because\x20buildName\x20or\x20projectName\x20is\x20null.\x20Please\x20set\x20a\x20non-null\x20value.','../logger','PKmGi','nodeIndex','dyIke','applied','**/__tests__/**/*.[jt]s?(x)','addToOrderingInstrumentationData','roTUL','micromatch','UPiHe'];a129_0x59f7=function(){return _0x3d561c;};return a129_0x59f7();}module['exports']=TestOrchestrationHandler;