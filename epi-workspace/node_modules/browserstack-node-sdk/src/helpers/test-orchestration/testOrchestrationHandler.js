const a135_0x2f79e0=a135_0x3531;(function(_0x344441,_0x5e10f2){const _0x2f852f=a135_0x3531,_0xb399c5=_0x344441();while(!![]){try{const _0xf8051a=parseInt(_0x2f852f(0x104))/0x1+-parseInt(_0x2f852f(0x136))/0x2+-parseInt(_0x2f852f(0x122))/0x3*(parseInt(_0x2f852f(0x12d))/0x4)+-parseInt(_0x2f852f(0x100))/0x5+parseInt(_0x2f852f(0xfc))/0x6+parseInt(_0x2f852f(0x10c))/0x7*(parseInt(_0x2f852f(0xe6))/0x8)+parseInt(_0x2f852f(0x133))/0x9;if(_0xf8051a===_0x5e10f2)break;else _0xb399c5['push'](_0xb399c5['shift']());}catch(_0x2824b3){_0xb399c5['push'](_0xb399c5['shift']());}}}(a135_0xb5ff,0x37aca));const logger=require('../logger')[a135_0x2f79e0(0xd4)],{isUndefined,isNotUndefined,isTrueString,sanitizedFilePath}=require(a135_0x2f79e0(0x10b)),TestOrderingServerHandler=require('./testOrderingServerHandler'),OrchestrationUtils=require(a135_0x2f79e0(0xd6)),path=require(a135_0x2f79e0(0xf3)),{spawnSync}=require(a135_0x2f79e0(0x101)),micromatch=require(a135_0x2f79e0(0x125)),fs=require('fs');class TestOrchestrationHandler{constructor(_0x377743){const _0x43f4de=a135_0x2f79e0,_0xf34ad0={};_0xf34ad0[_0x43f4de(0x103)]='3|5|1|0|2|4';const _0x104be5=_0xf34ad0,_0x2c3c9b=_0x104be5[_0x43f4de(0x103)][_0x43f4de(0xda)]('|');let _0x227b17=0x0;while(!![]){switch(_0x2c3c9b[_0x227b17++]){case'0':this[_0x43f4de(0xe2)]=null;continue;case'1':this['testOrderingApplied']=![];continue;case'2':this[_0x43f4de(0xfd)]=new OrchestrationUtils(_0x377743);continue;case'3':this[_0x43f4de(0x11d)]=_0x377743;continue;case'4':this['_initializeTestOrdering']();continue;case'5':this['orderingInstrumentationData']={};continue;}break;}}[a135_0x2f79e0(0xf8)](){const _0x142d11=a135_0x2f79e0,_0x37812f={'VyCIM':function(_0x36fdd3,_0x57c4ac){return _0x36fdd3(_0x57c4ac);},'MSRAN':function(_0x2fdbf8,_0x405638){return _0x2fdbf8(_0x405638);},'IIpgc':function(_0x45bb54,_0x2ad4be){return _0x45bb54(_0x2ad4be);},'QLQRG':function(_0x2676a6,_0x2becd4){return _0x2676a6(_0x2becd4);},'inmQP':function(_0x4f1c7b,_0x6ff0a){return _0x4f1c7b&&_0x6ff0a;}},_0x18067f=_0x37812f[_0x142d11(0x11f)](isNotUndefined,this[_0x142d11(0x11d)])&&(_0x37812f[_0x142d11(0x106)](isUndefined,this[_0x142d11(0x11d)][_0x142d11(0x120)])||_0x37812f[_0x142d11(0x114)](isTrueString,this[_0x142d11(0x11d)]['testObservability'])),_0x7d04c=this[_0x142d11(0xfd)][_0x142d11(0xdc)](),_0x420802=_0x37812f[_0x142d11(0x106)](isNotUndefined,this[_0x142d11(0x11d)])&&_0x37812f['QLQRG'](isNotUndefined,this['config']['projectName']),_0x4f0748=_0x37812f[_0x142d11(0x106)](isNotUndefined,this['config'])&&_0x37812f['MSRAN'](isNotUndefined,this[_0x142d11(0x11d)][_0x142d11(0xdf)]);return _0x37812f[_0x142d11(0x129)](_0x18067f,_0x7d04c)&&_0x420802&&_0x4f0748;}[a135_0x2f79e0(0x11b)](){const _0x598dcd=a135_0x2f79e0,_0x21df24={};_0x21df24[_0x598dcd(0xd8)]='Test\x20orchestration\x20with\x20test\x20ordering\x20enabled',_0x21df24[_0x598dcd(0x121)]=_0x598dcd(0xff);const _0x223011=_0x21df24;this[_0x598dcd(0xf8)]()?(this[_0x598dcd(0xe2)]=new TestOrderingServerHandler(this[_0x598dcd(0x11d)]),logger[_0x598dcd(0xce)](_0x223011[_0x598dcd(0xd8)])):(logger[_0x598dcd(0xf6)](_0x223011[_0x598dcd(0x121)]),this[_0x598dcd(0xe8)]());}[a135_0x2f79e0(0xe8)](){const _0xc09075=a135_0x2f79e0,_0x2dbd13={'HhOfc':function(_0x1fa1d4,_0x111f17){return _0x1fa1d4(_0x111f17);},'flBDJ':function(_0xb32935,_0x52c3bf){return _0xb32935(_0x52c3bf);},'lTETw':function(_0x3307bc,_0x47fca6){return _0x3307bc(_0x47fca6);},'lWhHm':'Test\x20Reordering\x20is\x20unavailable\x20because\x20buildName\x20or\x20projectName\x20is\x20null.\x20Please\x20set\x20a\x20non-null\x20value.','nEFmN':function(_0x4effb6,_0x4c38f1){return _0x4effb6(_0x4c38f1);},'IZIEZ':'Test\x20Reordering\x20is\x20unavailable\x20because\x20testReporting\x20is\x20disabled.\x20Please\x20enable\x20it\x20from\x20browserstack.yml\x20file.'};if(!this[_0xc09075(0x134)]())return;(!_0x2dbd13[_0xc09075(0xfb)](isNotUndefined,this[_0xc09075(0x11d)])||!_0x2dbd13['flBDJ'](isNotUndefined,this[_0xc09075(0x11d)]['buildName'])||!_0x2dbd13[_0xc09075(0xf0)](isNotUndefined,this[_0xc09075(0x11d)][_0xc09075(0x12b)]))&&logger['info'](_0x2dbd13[_0xc09075(0xcf)]),_0x2dbd13[_0xc09075(0x126)](isNotUndefined,this[_0xc09075(0x11d)])&&_0x2dbd13[_0xc09075(0xfb)](isNotUndefined,this['config']['testObservability'])&&!_0x2dbd13[_0xc09075(0x109)](isTrueString,this['config'][_0xc09075(0x120)])&&logger[_0xc09075(0xce)](_0x2dbd13['IZIEZ']);}[a135_0x2f79e0(0x134)](){const _0x212597=a135_0x2f79e0;return!this['isTestOrchestrationEnabled']()&&this['orchestrationUtils'][_0x212597(0xdc)]();}[a135_0x2f79e0(0x105)](){return this['testOrderingApplied'];}[a135_0x2f79e0(0xe0)](_0x59e0f0){const _0x2f5a7e=a135_0x2f79e0,_0x351471={};_0x351471[_0x2f5a7e(0xf7)]='applied';const _0x170749=_0x351471;this[_0x2f5a7e(0x123)]=_0x59e0f0,this[_0x2f5a7e(0x132)](_0x170749[_0x2f5a7e(0xf7)],_0x59e0f0);}[a135_0x2f79e0(0x132)](_0x53a0cd,_0x42f0f4){const _0x69fd31=a135_0x2f79e0;this[_0x69fd31(0xfe)][_0x53a0cd]=_0x42f0f4;}[a135_0x2f79e0(0xdb)](){return this['orderingInstrumentationData'];}['updateBuildIdentifier'](){const _0x25f669=a135_0x2f79e0,_0xbae441={'tapHV':function(_0x4dd160,_0x2bf3d2){return _0x4dd160(_0x2bf3d2);},'tHrCi':function(_0x30761a,_0x1d6e1e){return _0x30761a>_0x1d6e1e;}},_0x4ede05=_0xbae441[_0x25f669(0xd2)](parseInt,process[_0x25f669(0x117)][_0x25f669(0x113)]||'1'),_0x5101ad=process[_0x25f669(0x117)]['BROWSERSTACK_BUILD_RUN_IDENTIFIER'];_0x5101ad&&_0xbae441[_0x25f669(0x135)](_0x4ede05,0x1)&&(logger[_0x25f669(0xf6)](_0x25f669(0x10f)+_0x5101ad),this[_0x25f669(0x11d)][_0x25f669(0x12a)]=_0x5101ad);}async[a135_0x2f79e0(0xeb)](_0x1c357a){const _0x10ff10=a135_0x2f79e0,_0x37d13b={'LkBLy':function(_0x3f7be9,_0x533cb1){return _0x3f7be9===_0x533cb1;},'YXIUO':function(_0x288bcf,_0x4329cc){return _0x288bcf===_0x4329cc;},'iDzNG':_0x10ff10(0xd7),'RhCUD':function(_0x274d8f,_0x3a05a5){return _0x274d8f(_0x3a05a5);},'PAGzp':_0x10ff10(0xee),'ryxcB':_0x10ff10(0x124),'JCmbM':_0x10ff10(0x118),'mDdAA':_0x10ff10(0x12e),'RDFrq':_0x10ff10(0x11c)};try{if(!_0x1c357a||!Array[_0x10ff10(0x10e)](_0x1c357a)||_0x37d13b[_0x10ff10(0xfa)](_0x1c357a[_0x10ff10(0x11a)],0x0))return null;if(_0x37d13b[_0x10ff10(0x116)](this[_0x10ff10(0xf8)](),![]))return logger[_0x10ff10(0xf6)](_0x37d13b[_0x10ff10(0xe4)]),null;let _0x3edfe5=null;const _0x3a27a8=this[_0x10ff10(0xfd)][_0x10ff10(0xde)]();if(this[_0x10ff10(0xe2)]){const _0x2c82bb=await this[_0x10ff10(0xe2)]['splitTests'](_0x1c357a,_0x3a27a8);if(!_0x2c82bb)return null;_0x3edfe5=await this[_0x10ff10(0xe2)][_0x10ff10(0x11e)](_0x2c82bb);}if(!_0x3edfe5||!Array[_0x10ff10(0x10e)](_0x3edfe5)||_0x37d13b['LkBLy'](_0x3edfe5[_0x10ff10(0x11a)],0x0))return null;const _0x42ef7b=_0x37d13b[_0x10ff10(0xd9)](parseInt,process[_0x10ff10(0x117)]['BROWSERSTACK_NODE_INDEX']||'0'),_0x37298d=_0x37d13b['RhCUD'](parseInt,process[_0x10ff10(0x117)][_0x10ff10(0x113)]||'1');return this[_0x10ff10(0x132)](_0x37d13b[_0x10ff10(0xe5)],_0x1c357a[_0x10ff10(0x11a)]),this[_0x10ff10(0x132)](_0x37d13b[_0x10ff10(0xea)],_0x42ef7b),this[_0x10ff10(0x132)](_0x37d13b[_0x10ff10(0xf4)],_0x37298d),this[_0x10ff10(0x132)](_0x37d13b[_0x10ff10(0x110)],_0x3edfe5[_0x10ff10(0x11a)]),this[_0x10ff10(0x132)](_0x37d13b[_0x10ff10(0xdd)],this[_0x10ff10(0xe2)]?this['testOrderingServerHandler']['getSplitTestsAPICallCount']():0x0),_0x3edfe5[_0x10ff10(0x12f)](_0x3f517e=>sanitizedFilePath(_0x3f517e));}catch(_0x4c8174){return logger['debug'](_0x10ff10(0xf9)+(_0x4c8174[_0x10ff10(0x128)]||_0x4c8174[_0x10ff10(0xd5)]())),null;}}async['findTestFiles'](_0x2e5c3a,_0x40cd64,_0x406633){const _0x390a74=a135_0x2f79e0,_0x45efe9={'MzYQJ':function(_0x5206a8,_0x5ed9c2){return _0x5206a8(_0x5ed9c2);},'Bcqbt':_0x390a74(0xd1),'HIdRw':_0x390a74(0xe3),'dDRlg':function(_0x326a52,_0x3fd22f){return _0x326a52(_0x3fd22f);},'SIIYh':'jest-runner','vMPZh':function(_0x304cc0,_0x576417){return _0x304cc0(_0x576417);},'GcmSP':_0x390a74(0xed),'sPEDa':'**/__tests__/**/*.[jt]s?(x)','WhQtH':_0x390a74(0xec),'EmRky':function(_0x1845b0,_0x63099b,_0x261d3e,_0x59e06c){return _0x1845b0(_0x63099b,_0x261d3e,_0x59e06c);},'gKDjx':'npx','rgQYj':_0x390a74(0x112),'yjEFC':_0x390a74(0x10d),'zsMLe':_0x390a74(0xd3),'cQcEm':'utf-8'};try{const {getTestPathPatterns:_0x40da6d}=_0x45efe9[_0x390a74(0x102)](require,_0x45efe9[_0x390a74(0xe9)]),{globsToMatcher:_0x45723b}=_0x45efe9[_0x390a74(0x102)](require,_0x45efe9[_0x390a74(0xf5)]),{findRelatedTests:_0x734248}=_0x45efe9[_0x390a74(0xf2)](require,_0x45efe9[_0x390a74(0x119)]),_0x222ae2=_0x45efe9[_0x390a74(0xf1)](require,_0x45efe9['GcmSP']),_0x541cd2=_0x2e5c3a['testMatch']||[_0x45efe9['sPEDa'],_0x45efe9[_0x390a74(0xd0)]],_0xc5473f=_0x2e5c3a[_0x390a74(0x12c)]||[],_0x4d4d6d=_0x45efe9[_0x390a74(0x130)](spawnSync,_0x45efe9[_0x390a74(0xef)],[_0x45efe9[_0x390a74(0x127)],_0x45efe9['yjEFC'],_0x406633,..._0x40cd64,_0x45efe9['zsMLe']],{'encoding':_0x45efe9['cQcEm']});let _0x25798c=[];!_0x4d4d6d[_0x390a74(0x10a)]&&(_0x25798c=_0x4d4d6d['stdout'][_0x390a74(0xda)]('\x0a')[_0x390a74(0x111)](Boolean));logger[_0x390a74(0xf6)](_0x390a74(0x108)+JSON[_0x390a74(0x131)](_0x25798c)+_0x390a74(0x107));const _0x268edc={};_0x268edc['matchBase']=!![],_0x268edc[_0x390a74(0xe1)]=_0xc5473f;const _0x367c5c=_0x45efe9[_0x390a74(0x130)](micromatch,_0x25798c,_0x541cd2,_0x268edc)[_0x390a74(0x12f)](_0x3313f7=>path[_0x390a74(0x115)](_0x2e5c3a['rootDir'],_0x3313f7));return logger[_0x390a74(0xf6)](_0x390a74(0xcd)+JSON[_0x390a74(0x131)](_0x367c5c)+_0x390a74(0x107)),_0x367c5c;}catch(_0x234876){return logger[_0x390a74(0xf6)]('Error\x20finding\x20test\x20files:\x20'+_0x234876),[];}}}function a135_0xb5ff(){const _0x1caa0b=['orderingInstrumentationData','Test\x20orchestration\x20without\x20test\x20ordering','156010ETeAnH','child_process','MzYQJ','TIeAl','142558kSVdAj','isTestOrderingApplied','MSRAN','\x20files','Found\x20test\x20files:\x20','nEFmN','error','../helper','4354fLaztL','--config','isArray','[orchestrate]\x20Setting\x20buildIdentifier\x20to\x20buildRunIdentifier:\x20','mDdAA','filter','jest','BROWSERSTACK_TOTAL_NODE_COUNT','IIpgc','relative','YXIUO','env','totalNodes','SIIYh','length','_initializeTestOrdering','splitTestsAPICallCount','config','getOrderedTestFiles','VyCIM','testObservability','HCDUV','96549kvvtax','testOrderingApplied','nodeIndex','micromatch','flBDJ','rgQYj','stack','inmQP','buildIdentifier','projectName','testPathIgnorePatterns','56QiFxDp','downloadedTestFilesCount','map','EmRky','stringify','addToOrderingInstrumentationData','2409453WvKozl','_shouldLogTestOrderingChecks','tHrCi','676518jSWXLA','Filterted\x20to\x20test\x20files:\x20','info','lWhHm','WhQtH','jest-config','tapHV','--listTests','winstonLogger','toString','./orchestrationUtils','[reorderTestFiles]\x20Test\x20ordering\x20is\x20not\x20supported\x20or\x20enabled','gosyV','RhCUD','split','getOrderingInstrumentationData','testOrderingEnabled','RDFrq','getTestOrderingName','buildName','setTestOrderingApplied','ignore','testOrderingServerHandler','jest-util','iDzNG','PAGzp','4064sXbiev','exports','logTestOrderingChecks','Bcqbt','ryxcB','reorderTestFiles','**/?(*.)+(spec|test).[jt]s?(x)','glob','uploadedTestFilesCount','gKDjx','lTETw','vMPZh','dDRlg','path','JCmbM','HIdRw','debug','kfQEX','isTestOrchestrationEnabled','[reorderTestFiles]\x20Error\x20in\x20ordering\x20test\x20files:\x20','LkBLy','HhOfc','1930884zKNaWC','orchestrationUtils'];a135_0xb5ff=function(){return _0x1caa0b;};return a135_0xb5ff();}function a135_0x3531(_0x20b9b5,_0x11f383){const _0xb5ffb=a135_0xb5ff();return a135_0x3531=function(_0x353153,_0x496552){_0x353153=_0x353153-0xcd;let _0x5a7a46=_0xb5ffb[_0x353153];return _0x5a7a46;},a135_0x3531(_0x20b9b5,_0x11f383);}module[a135_0x2f79e0(0xe7)]=TestOrchestrationHandler;