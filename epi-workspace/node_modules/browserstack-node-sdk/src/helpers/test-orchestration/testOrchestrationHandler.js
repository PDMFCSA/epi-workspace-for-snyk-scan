const a123_0x3f6163=a123_0x4104;function a123_0x14fa(){const _0x4c0768=['BROWSERSTACK_NODE_INDEX','isArray','length','106qTLEYm','\x20files','[orchestrate]\x20Setting\x20buildIdentifier\x20to\x20buildRunIdentifier:\x20','testOrderingApplied','kxHRY','Test\x20Reordering\x20is\x20unavailable\x20because\x20testObservability\x20is\x20disabled.\x20Please\x20enable\x20it\x20from\x20browserstack.yml\x20file.','yFsAx','sySVp','testMatch','jXdsd','ihpwR','setTestOrderingApplied','KIhtt','fwAiE','testPathIgnorePatterns','applied','bzyMg','sjQgh','Filterted\x20to\x20test\x20files:\x20','YhRac','isTestOrderingApplied','Error\x20finding\x20test\x20files:\x20','Test\x20Reordering\x20is\x20unavailable\x20because\x20buildName\x20or\x20projectName\x20is\x20null.\x20Please\x20set\x20a\x20non-null\x20value.','1659sAPlvG','mlVig','testOrderingEnabled','--config','matchBase','split','stringify','./orchestrationUtils','micromatch','876DqLbEH','nodeIndex','Bbttg','1199972Kbswew','relative','JsFQC','MhoiO','NezHP','npx','stdout','getTestOrderingName','buildIdentifier','vtNZH','glob','stack','5tsZmwy','addToOrderingInstrumentationData','[reorderTestFiles]\x20Test\x20ordering\x20is\x20not\x20supported\x20or\x20enabled','totalNodes','./testOrderingServerHandler','Found\x20test\x20files:\x20','hhCEt','AGufl','toString','oBwTD','2208THTpbF','IEaCr','splitTests','info','qjKbK','exports','jest-config','DMHDC','debug','buildName','sFznq','UcrDU','OPjhJ','BpBJG','testOrderingServerHandler','updateBuildIdentifier','utf-8','config','uploadedTestFilesCount','xvBwW','getOrderedTestFiles','BROWSERSTACK_TOTAL_NODE_COUNT','getSplitTestsAPICallCount','ScCuv','_shouldLogTestOrderingChecks','110QXocIP','downloadedTestFilesCount','ryCaU','UfFml','map','80839MgIwKg','2248188iyGgkb','ignore','orderingInstrumentationData','fYwvC','env','[reorderTestFiles]\x20Error\x20in\x20ordering\x20test\x20files:\x20','error','--listTests','isTestOrchestrationEnabled','4136EEqNhs','393201BsNlJZ','logTestOrderingChecks','jest-runner','454750KPBJyA','jest-util','testObservability','1|3|4|0|2|5','Test\x20orchestration\x20with\x20test\x20ordering\x20enabled','orchestrationUtils'];a123_0x14fa=function(){return _0x4c0768;};return a123_0x14fa();}function a123_0x4104(_0x5bb257,_0x5a94f3){const _0x14fa6c=a123_0x14fa();return a123_0x4104=function(_0x410465,_0x2a8ea7){_0x410465=_0x410465-0x68;let _0x426f9f=_0x14fa6c[_0x410465];return _0x426f9f;},a123_0x4104(_0x5bb257,_0x5a94f3);}(function(_0x200f67,_0x1a8ef4){const _0x4c54cf=a123_0x4104,_0x6a832e=_0x200f67();while(!![]){try{const _0x328a9e=parseInt(_0x4c54cf(0x8c))/0x1+-parseInt(_0x4c54cf(0x95))/0x2*(-parseInt(_0x4c54cf(0xce))/0x3)+parseInt(_0x4c54cf(0xb8))/0x4*(parseInt(_0x4c54cf(0xc4))/0x5)+parseInt(_0x4c54cf(0x7f))/0x6+parseInt(_0x4c54cf(0xac))/0x7*(parseInt(_0x4c54cf(0x88))/0x8)+parseInt(_0x4c54cf(0x89))/0x9*(-parseInt(_0x4c54cf(0x79))/0xa)+parseInt(_0x4c54cf(0x7e))/0xb*(-parseInt(_0x4c54cf(0xb5))/0xc);if(_0x328a9e===_0x1a8ef4)break;else _0x6a832e['push'](_0x6a832e['shift']());}catch(_0x251c4b){_0x6a832e['push'](_0x6a832e['shift']());}}}(a123_0x14fa,0x42e02));const logger=require('../logger')['winstonLogger'],{isUndefined,isNotUndefined,isTrueString,sanitizedFilePath}=require('../helper'),TestOrderingServerHandler=require(a123_0x3f6163(0xc8)),OrchestrationUtils=require(a123_0x3f6163(0xb3)),path=require('path'),{spawnSync}=require('child_process'),micromatch=require(a123_0x3f6163(0xb4)),fs=require('fs');class TestOrchestrationHandler{constructor(_0x20c986){const _0x4ed948=a123_0x3f6163,_0x564e18={};_0x564e18[_0x4ed948(0x82)]=_0x4ed948(0x8f);const _0x5b1b11=_0x564e18,_0x2a2814=_0x5b1b11[_0x4ed948(0x82)][_0x4ed948(0xb1)]('|');let _0x46bf0c=0x0;while(!![]){switch(_0x2a2814[_0x46bf0c++]){case'0':this[_0x4ed948(0x6e)]=null;continue;case'1':this[_0x4ed948(0x71)]=_0x20c986;continue;case'2':this[_0x4ed948(0x91)]=new OrchestrationUtils(_0x20c986);continue;case'3':this[_0x4ed948(0x81)]={};continue;case'4':this[_0x4ed948(0x98)]=![];continue;case'5':this['_initializeTestOrdering']();continue;}break;}}[a123_0x3f6163(0x87)](){const _0x22cf93=a123_0x3f6163,_0x3a5592={'Bbttg':function(_0x1aa07a,_0x31583c){return _0x1aa07a(_0x31583c);},'vtNZH':function(_0x1e4bfd,_0x1aa6e8){return _0x1e4bfd(_0x1aa6e8);},'Kcrqo':function(_0x4ac9af,_0x5c8c1a){return _0x4ac9af&&_0x5c8c1a;}},_0x4f393c=_0x3a5592[_0x22cf93(0xb7)](isNotUndefined,this[_0x22cf93(0x71)])&&(_0x3a5592[_0x22cf93(0xb7)](isUndefined,this[_0x22cf93(0x71)]['testObservability'])||_0x3a5592[_0x22cf93(0xb7)](isTrueString,this[_0x22cf93(0x71)][_0x22cf93(0x8e)])),_0x33c262=this['orchestrationUtils'][_0x22cf93(0xae)](),_0x51a968=_0x3a5592[_0x22cf93(0xb7)](isNotUndefined,this['config'])&&_0x3a5592['Bbttg'](isNotUndefined,this['config']['projectName']),_0x2dbe88=_0x3a5592[_0x22cf93(0xb7)](isNotUndefined,this[_0x22cf93(0x71)])&&_0x3a5592[_0x22cf93(0xc1)](isNotUndefined,this[_0x22cf93(0x71)]['buildName']);return _0x3a5592['Kcrqo'](_0x4f393c,_0x33c262)&&_0x51a968&&_0x2dbe88;}['_initializeTestOrdering'](){const _0x4ebb5e=a123_0x3f6163,_0x454fe={};_0x454fe[_0x4ebb5e(0x6c)]=_0x4ebb5e(0x90),_0x454fe[_0x4ebb5e(0x6a)]='Test\x20orchestration\x20without\x20test\x20ordering';const _0x2646a2=_0x454fe;this[_0x4ebb5e(0x87)]()?(this[_0x4ebb5e(0x6e)]=new TestOrderingServerHandler(this[_0x4ebb5e(0x71)]),logger[_0x4ebb5e(0xd1)](_0x2646a2[_0x4ebb5e(0x6c)])):(logger[_0x4ebb5e(0x68)](_0x2646a2[_0x4ebb5e(0x6a)]),this[_0x4ebb5e(0x8a)]());}[a123_0x3f6163(0x8a)](){const _0x3a62e9=a123_0x3f6163,_0xa27770={'ScCuv':function(_0x3c9868,_0x589dc6){return _0x3c9868(_0x589dc6);},'BRTjg':function(_0x506a48,_0x4ff9a6){return _0x506a48(_0x4ff9a6);},'IWHoP':_0x3a62e9(0xab),'mlVig':function(_0xdc1e4c,_0x13e057){return _0xdc1e4c(_0x13e057);},'fwAiE':function(_0x5c31c0,_0x381b6f){return _0x5c31c0(_0x381b6f);},'jXdsd':_0x3a62e9(0x9a)};if(!this[_0x3a62e9(0x78)]())return;(!_0xa27770['ScCuv'](isNotUndefined,this[_0x3a62e9(0x71)])||!_0xa27770[_0x3a62e9(0x77)](isNotUndefined,this[_0x3a62e9(0x71)][_0x3a62e9(0x69)])||!_0xa27770['BRTjg'](isNotUndefined,this[_0x3a62e9(0x71)]['projectName']))&&logger[_0x3a62e9(0xd1)](_0xa27770['IWHoP']),_0xa27770[_0x3a62e9(0xad)](isNotUndefined,this['config'])&&_0xa27770[_0x3a62e9(0x77)](isNotUndefined,this[_0x3a62e9(0x71)][_0x3a62e9(0x8e)])&&!_0xa27770[_0x3a62e9(0xa2)](isTrueString,this['config']['testObservability'])&&logger[_0x3a62e9(0xd1)](_0xa27770[_0x3a62e9(0x9e)]);}[a123_0x3f6163(0x78)](){const _0x368e2b=a123_0x3f6163;return!this[_0x368e2b(0x87)]()&&this['orchestrationUtils'][_0x368e2b(0xae)]();}[a123_0x3f6163(0xa9)](){const _0x2feefd=a123_0x3f6163;return this[_0x2feefd(0x98)];}[a123_0x3f6163(0xa0)](_0x28e66c){const _0x4693f8=a123_0x3f6163,_0x4070bf={};_0x4070bf[_0x4693f8(0x7b)]=_0x4693f8(0xa4);const _0xa547f7=_0x4070bf;this['testOrderingApplied']=_0x28e66c,this['addToOrderingInstrumentationData'](_0xa547f7['ryCaU'],_0x28e66c);}[a123_0x3f6163(0xc5)](_0x28b7f7,_0x43c863){const _0x4e3885=a123_0x3f6163;this[_0x4e3885(0x81)][_0x28b7f7]=_0x43c863;}['getOrderingInstrumentationData'](){const _0x330faa=a123_0x3f6163;return this[_0x330faa(0x81)];}[a123_0x3f6163(0x6f)](){const _0x9f0979=a123_0x3f6163,_0x3a6835={'wofBK':function(_0xc251be,_0x1bb875){return _0xc251be(_0x1bb875);},'yFsAx':function(_0x1d7516,_0xcc5531){return _0x1d7516>_0xcc5531;}},_0x2e10a3=_0x3a6835['wofBK'](parseInt,process[_0x9f0979(0x83)][_0x9f0979(0x75)]||'1'),_0x2bcc2d=process[_0x9f0979(0x83)]['BROWSERSTACK_BUILD_RUN_IDENTIFIER'];_0x2bcc2d&&_0x3a6835[_0x9f0979(0x9b)](_0x2e10a3,0x1)&&(logger[_0x9f0979(0x68)](_0x9f0979(0x97)+_0x2bcc2d),this[_0x9f0979(0x71)][_0x9f0979(0xc0)]=_0x2bcc2d);}async['reorderTestFiles'](_0x113b2f){const _0x2dc743=a123_0x3f6163,_0x2aa103={'qjKbK':function(_0x589ed8,_0x34a09f){return _0x589ed8===_0x34a09f;},'sySVp':_0x2dc743(0xc6),'kxHRY':function(_0x11b535,_0x230a10){return _0x11b535(_0x230a10);},'xvBwW':_0x2dc743(0x72),'UcrDU':_0x2dc743(0xb6),'IEaCr':_0x2dc743(0xc7),'BpBJG':_0x2dc743(0x7a),'DMHDC':'splitTestsAPICallCount'};try{if(!_0x113b2f||!Array[_0x2dc743(0x93)](_0x113b2f)||_0x2aa103[_0x2dc743(0xd2)](_0x113b2f[_0x2dc743(0x94)],0x0))return null;if(_0x2aa103[_0x2dc743(0xd2)](this[_0x2dc743(0x87)](),![]))return logger[_0x2dc743(0x68)](_0x2aa103[_0x2dc743(0x9c)]),null;let _0x4d32d7=null;const _0x572a47=this[_0x2dc743(0x91)][_0x2dc743(0xbf)]();if(this['testOrderingServerHandler']){const _0x5c941d=await this['testOrderingServerHandler'][_0x2dc743(0xd0)](_0x113b2f,_0x572a47);if(!_0x5c941d)return null;_0x4d32d7=await this[_0x2dc743(0x6e)][_0x2dc743(0x74)](_0x5c941d);}if(!_0x4d32d7||!Array[_0x2dc743(0x93)](_0x4d32d7)||_0x2aa103[_0x2dc743(0xd2)](_0x4d32d7[_0x2dc743(0x94)],0x0))return null;const _0x58bf4c=_0x2aa103[_0x2dc743(0x99)](parseInt,process[_0x2dc743(0x83)][_0x2dc743(0x92)]||'0'),_0x1e570f=_0x2aa103[_0x2dc743(0x99)](parseInt,process['env']['BROWSERSTACK_TOTAL_NODE_COUNT']||'1');return this[_0x2dc743(0xc5)](_0x2aa103[_0x2dc743(0x73)],_0x113b2f[_0x2dc743(0x94)]),this[_0x2dc743(0xc5)](_0x2aa103[_0x2dc743(0x6b)],_0x58bf4c),this[_0x2dc743(0xc5)](_0x2aa103[_0x2dc743(0xcf)],_0x1e570f),this['addToOrderingInstrumentationData'](_0x2aa103[_0x2dc743(0x6d)],_0x4d32d7[_0x2dc743(0x94)]),this[_0x2dc743(0xc5)](_0x2aa103[_0x2dc743(0xd5)],this[_0x2dc743(0x6e)]?this[_0x2dc743(0x6e)][_0x2dc743(0x76)]():0x0),_0x4d32d7['map'](_0x5f3c88=>sanitizedFilePath(_0x5f3c88));}catch(_0x418c3c){return logger[_0x2dc743(0x68)](_0x2dc743(0x84)+(_0x418c3c[_0x2dc743(0xc3)]||_0x418c3c[_0x2dc743(0xcc)]())),null;}}async['findTestFiles'](_0x12a8d4,_0x65c940,_0x2a663f){const _0x53d8b3=a123_0x3f6163,_0x4b0caa={'oBwTD':function(_0x17b3c5,_0x1fa02f){return _0x17b3c5(_0x1fa02f);},'YhRac':_0x53d8b3(0xd4),'AGufl':function(_0x4f9d0f,_0x5ee1af){return _0x4f9d0f(_0x5ee1af);},'KIhtt':_0x53d8b3(0x8d),'impHf':_0x53d8b3(0x8b),'UfFml':function(_0x2287c5,_0x4d104b){return _0x2287c5(_0x4d104b);},'MhoiO':_0x53d8b3(0xc2),'bzyMg':'**/__tests__/**/*.[jt]s?(x)','UCaAh':'**/?(*.)+(spec|test).[jt]s?(x)','NezHP':function(_0x1827dd,_0x81adaf,_0x56cfab,_0x4f2f84){return _0x1827dd(_0x81adaf,_0x56cfab,_0x4f2f84);},'SfLlq':_0x53d8b3(0xbd),'JsFQC':'jest','hhCEt':_0x53d8b3(0xaf),'ihpwR':_0x53d8b3(0x86),'sjQgh':_0x53d8b3(0x70),'OzydH':function(_0x359476,_0x25fb66,_0x4fd403,_0x346fea){return _0x359476(_0x25fb66,_0x4fd403,_0x346fea);}};try{const {getTestPathPatterns:_0x48bd6a}=_0x4b0caa[_0x53d8b3(0xcd)](require,_0x4b0caa[_0x53d8b3(0xa8)]),{globsToMatcher:_0x594f99}=_0x4b0caa[_0x53d8b3(0xcb)](require,_0x4b0caa[_0x53d8b3(0xa1)]),{findRelatedTests:_0x57c461}=_0x4b0caa[_0x53d8b3(0xcd)](require,_0x4b0caa['impHf']),_0x68e2a4=_0x4b0caa[_0x53d8b3(0x7c)](require,_0x4b0caa[_0x53d8b3(0xbb)]),_0x2ac453=_0x12a8d4[_0x53d8b3(0x9d)]||[_0x4b0caa[_0x53d8b3(0xa5)],_0x4b0caa['UCaAh']],_0x111d9b=_0x12a8d4[_0x53d8b3(0xa3)]||[],_0xb78a44=_0x4b0caa[_0x53d8b3(0xbc)](spawnSync,_0x4b0caa['SfLlq'],[_0x4b0caa[_0x53d8b3(0xba)],_0x4b0caa[_0x53d8b3(0xca)],_0x2a663f,..._0x65c940,_0x4b0caa[_0x53d8b3(0x9f)]],{'encoding':_0x4b0caa[_0x53d8b3(0xa6)]});let _0x45ff71=[];!_0xb78a44[_0x53d8b3(0x85)]&&(_0x45ff71=_0xb78a44[_0x53d8b3(0xbe)][_0x53d8b3(0xb1)]('\x0a')['filter'](Boolean));logger['debug'](_0x53d8b3(0xc9)+JSON[_0x53d8b3(0xb2)](_0x45ff71)+'\x20files');const _0x5f1249={};_0x5f1249[_0x53d8b3(0xb0)]=!![],_0x5f1249[_0x53d8b3(0x80)]=_0x111d9b;const _0x1df2b3=_0x4b0caa['OzydH'](micromatch,_0x45ff71,_0x2ac453,_0x5f1249)[_0x53d8b3(0x7d)](_0x22eb04=>path[_0x53d8b3(0xb9)](_0x12a8d4['rootDir'],_0x22eb04));return logger[_0x53d8b3(0x68)](_0x53d8b3(0xa7)+JSON[_0x53d8b3(0xb2)](_0x1df2b3)+_0x53d8b3(0x96)),_0x1df2b3;}catch(_0x15ed5f){return logger[_0x53d8b3(0x68)](_0x53d8b3(0xaa)+_0x15ed5f),[];}}}module[a123_0x3f6163(0xd3)]=TestOrchestrationHandler;