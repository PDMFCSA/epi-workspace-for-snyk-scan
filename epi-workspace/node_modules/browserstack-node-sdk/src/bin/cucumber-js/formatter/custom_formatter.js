const a6_0xeb429c=a6_0x4e84;(function(_0x46ca74,_0x21a4cc){const _0x52e2c3=a6_0x4e84,_0x19fb04=_0x46ca74();while(!![]){try{const _0x352ef7=-parseInt(_0x52e2c3(0x131))/0x1+parseInt(_0x52e2c3(0x13c))/0x2+parseInt(_0x52e2c3(0xf5))/0x3*(-parseInt(_0x52e2c3(0xe3))/0x4)+parseInt(_0x52e2c3(0xcc))/0x5*(parseInt(_0x52e2c3(0x13d))/0x6)+-parseInt(_0x52e2c3(0xef))/0x7*(parseInt(_0x52e2c3(0xeb))/0x8)+parseInt(_0x52e2c3(0xa8))/0x9*(-parseInt(_0x52e2c3(0x14b))/0xa)+parseInt(_0x52e2c3(0xb3))/0xb;if(_0x352ef7===_0x21a4cc)break;else _0x19fb04['push'](_0x19fb04['shift']());}catch(_0x1b11c7){_0x19fb04['push'](_0x19fb04['shift']());}}}(a6_0x316f,0x99bfc));function a6_0x316f(){const _0x315dd7=['children','VxOvO','INIT_TEST','../../../helpers/helper','cPTdw','testCaseAttempt','Exception\x20in\x20onTestStepStarted\x20event:\x20','hxysx','246755rKADnN','name','env','eQrYX','isCLIReady','testUUID','test','UNKNOWN','CLI\x20already\x20running\x20-\x20binSessionId:\x20','Exception\x20in\x20onTestStepFinished\x20event:\x20',',\x20binSessionId:\x20','372564XvTVtx','348ypIuaT','isRunning','LOG_REPORT','dcUSf','testCaseStarted','cwd','finished_at','PLAYWRIGHT','PASSED','toString','ydjMS','onHook','createHookData','bWpCq','44260QkDARZ','finishedAt','fDduT','find','testStepStarted','report','oWmwn','OKSgI','UXCwE','testCases','HookRunStarted','wkuLw','getTestUUID','getGherkinDocument','parse','eventDataCollector','EQcJi','pickleId','KGLGT','testRunStarted','snippetBuilder','testSteps','cliInitPromise','includes','fSqYz','FlwKj','gherkinDocument','PtyTT','LkJKE','vuuqH','failure','sendTestRunEventForCucumber','RwxEa','ghDNq','_performCLIInitialization','SdIzh','trackEvent','MvAZh','testCaseAttemptDataMap','duration','NQera','capability','1521PBTpVN','getInstance','pickle','onGherkinDocument','isCliEnabled','extractStepContainers','toISOString','setup','lEBYK','ensureCLIInitialized','lxREl','26556266zdiApf','testCaseFinished','aSsTq','background','createTestFrameworkData','PENDING','AMBIGUOUS','rppjA','pickleStepId','onTestCase','forEach','PRE','supportCodeLibrary','logTestCaseFinished','parseTestCaseAttempt','IUEjl','uri','qikqu','NKtBe','EFDfH','getTestCaseAttempt','feature','steps','cucumber','xJGzE','60085wmYLjm','TestRunFinished','scenario','../test-observability.js','../../../bin/v2/TestInfo.js','exception','assign','nYkTS','testStepResult','onTestStepFinished','../../v2/state/hookState.js','sendHook','getTestFramework','winstonLogger','UnhandledError','HookRunFinished','flat','bstack','stepDefinition','onTestRunStarted','SiffF','push','../../v2/utils/cucumber-utils.js','55852UZdsFW','testCaseStartedId','dpFLk','ExUJL','UNDEFINED','POST','fIplL','onPickle','8CtfbcJ','onTestStepStarted','format','TEST','4282467wPgecl','../../v2/state/testFrameworkState.js','../../v2/cliUtils','onTestCaseFinished','binSessionId','VLeWe','228jEVfnY','hook','jTTYi','testCaseId','result','testStepId','testStepFinished','testCaseMap','pickleMap','getGherkinStepMap','MhmWC','XHhYj','onTestCaseStarted','setFrameworkDetail','values','CONFIG','hook_type','status','message','FwcXI','type','logTestRunFinished','BROWSERSTACK_CLI_BIN_SESSION_ID','xWBBr','SKIPPED','USPjL','eventBroadcaster','tRogs','actionLocation','testCase','NYocw','hooks','Bootstrapping\x20CLI\x20in\x20formatter\x20with\x20binSessionId:\x20','onSource','JYPQU','failureType','AnnCB','DqyVF','FAILED','incrementCounter','onTestRunFinished','Okrfa','debug','description','__platform','text','split','onStepDefinition','rule','log','testRunFinished','../../playwright/reporter/test-details.js'];a6_0x316f=function(){return _0x315dd7;};return a6_0x316f();}function a6_0x4e84(_0x145df5,_0x57b963){const _0x316f25=a6_0x316f();return a6_0x4e84=function(_0x4e848b,_0x2988e2){_0x4e848b=_0x4e848b-0xa8;let _0x4c9d23=_0x316f25[_0x4e848b];return _0x4c9d23;},a6_0x4e84(_0x145df5,_0x57b963);}const {requireModule,getPlatformName,nestedKeyValue,isUndefined,isBrowserstackInfra}=require(a6_0xeb429c(0x12c)),util=require('util'),{Formatter,formatterHelpers,Status}=requireModule('@cucumber/cucumber'),TestDetails=require(a6_0xeb429c(0x128)),TestObservabilityReporter=require(a6_0xeb429c(0xcf)),{o11yClassErrorHandler}=require('../../../helpers/test-observability/error-handler'),{shouldProcessEventForTesthub}=require('../../../helpers/testhub/utils.js'),BrowserstackCLI=require('../../v2/browserstackCLI.js'),TestFrameworkState=require(a6_0xeb429c(0xf0)),HookState=require(a6_0xeb429c(0xd6)),CucumberUtils=require(a6_0xeb429c(0xe2)),TestInfo=require(a6_0xeb429c(0xd0)),testObservabilityReporter=new TestObservabilityReporter(),cucumberUtils=new CucumberUtils(),logger=require('../../../helpers/logger')[a6_0xeb429c(0xd9)],_tests={},_testCasesData={};class BrowserstackFormatter extends Formatter{constructor(_0x135908){const _0x237b7d=a6_0xeb429c,_0x3183bf={};_0x3183bf[_0x237b7d(0x140)]='envelope';const _0x3da916=_0x3183bf;super(_0x135908),this[_0x237b7d(0x150)]={},_0x135908[_0x237b7d(0x10f)]['on'](_0x3da916[_0x237b7d(0x140)],async _0x115a55=>{const _0x15aa8e=_0x237b7d;switch(!![]){case!!_0x115a55['testRunStarted']:this[_0x15aa8e(0xdf)](_0x115a55['testRunStarted']);break;case!!_0x115a55[_0x15aa8e(0x127)]:this[_0x15aa8e(0x11d)](_0x115a55[_0x15aa8e(0x127)]);break;case!!_0x115a55[_0x15aa8e(0x141)]:this[_0x15aa8e(0x101)](_0x115a55[_0x15aa8e(0x141)],_0x135908,_0x115a55);break;case!!_0x115a55['testCaseFinished']:this[_0x15aa8e(0xf2)](_0x115a55['testCaseFinished'],_0x135908,_0x115a55);break;case!!_0x115a55[_0x15aa8e(0x14f)]:this[_0x15aa8e(0xec)](_0x115a55['testStepStarted'],_0x135908);break;case!!_0x115a55[_0x15aa8e(0xfb)]:this[_0x15aa8e(0xd5)](_0x115a55[_0x15aa8e(0xfb)],_0x135908);break;case!!_0x115a55[_0x15aa8e(0xf6)]:this[_0x15aa8e(0x148)](_0x115a55['hook']);break;case!!_0x115a55[_0x15aa8e(0x112)]:this[_0x15aa8e(0xbc)](_0x115a55[_0x15aa8e(0x112)]);break;case!!_0x115a55[_0x15aa8e(0xaa)]:this[_0x15aa8e(0xea)](_0x115a55[_0x15aa8e(0xaa)]);break;case!!_0x115a55[_0x15aa8e(0x165)]:this[_0x15aa8e(0xab)](_0x115a55[_0x15aa8e(0x165)]);break;}});}[a6_0xeb429c(0x148)](_0x54bd96){const _0xe83431=a6_0xeb429c;this[_0xe83431(0x150)][_0xe83431(0x114)]=Object['assign']([],this['report']['hooks']||[]),this[_0xe83431(0x150)]['hooks'][_0xe83431(0xe1)](_0x54bd96);}[a6_0xeb429c(0xea)](_0xce878f){const _0x55ede3=a6_0xeb429c;this[_0x55ede3(0x150)][_0x55ede3(0xaa)]=Object[_0x55ede3(0xd2)]([],this['report'][_0x55ede3(0xaa)]||[],[_0xce878f]),this[_0x55ede3(0x150)][_0x55ede3(0xaa)][_0x55ede3(0xe1)](_0xce878f);}[a6_0xeb429c(0xab)](_0x3dae59){const _0x5a38e8=a6_0xeb429c;this[_0x5a38e8(0x150)][_0x5a38e8(0x165)]=Object[_0x5a38e8(0xd2)]([],this[_0x5a38e8(0x150)][_0x5a38e8(0x165)]||[],[_0x3dae59]),this['report']['gherkinDocument'][_0x5a38e8(0xe1)](_0x3dae59);}[a6_0xeb429c(0x116)](_0x334d30){const _0x2aba30=a6_0xeb429c;this[_0x2aba30(0x150)]['source']=_0x334d30;}[a6_0xeb429c(0x124)](_0x5b7922){const _0x412a2e=a6_0xeb429c;this[_0x412a2e(0x150)][_0x412a2e(0xde)]=Object[_0x412a2e(0xd2)]([],this[_0x412a2e(0x150)]['stepDefinition']||[],[_0x5b7922]),this[_0x412a2e(0x150)][_0x412a2e(0xde)][_0x412a2e(0xe1)](_0x5b7922);}[a6_0xeb429c(0xbc)](_0x56ff08){const _0xcdde84=a6_0xeb429c;this[_0xcdde84(0x150)][_0xcdde84(0x154)]=Object['assign']([],this[_0xcdde84(0x150)][_0xcdde84(0x154)]||[],[_0x56ff08]),this[_0xcdde84(0x150)][_0xcdde84(0x154)][_0xcdde84(0xe1)](_0x56ff08);}[a6_0xeb429c(0xc0)](_0x1101d7){const _0x2d1b5e=a6_0xeb429c,_0x10c473={'DqyVF':function(_0x6b2c45,_0x5175af){return _0x6b2c45!==_0x5175af;},'cPTdw':_0x2d1b5e(0xdd),'JYPQU':function(_0x568f7f,_0x53d99f){return _0x568f7f+_0x53d99f;},'lxREl':function(_0x392e56,_0x59e000){return _0x392e56+_0x59e000;},'OKSgI':function(_0xb9bfc2,_0x50a971){return _0xb9bfc2+_0x50a971;},'ExUJL':function(_0x2f3638,_0x29bc93){return _0x2f3638+_0x29bc93;},'lEBYK':'\x20\x20\x20\x20','SdIzh':'\x20-\x20','QTrXQ':function(_0x1f102d,_0x142a23){return _0x1f102d===_0x142a23;},'aSsTq':'FAILED','EQcJi':function(_0x269e19,_0x121171,_0x7b4106){return _0x269e19(_0x121171,_0x7b4106);},'Okrfa':_0x2d1b5e(0xf9),'NQera':_0x2d1b5e(0x107),'bWpCq':function(_0x49d399,_0x48272f){return _0x49d399+_0x48272f;},'EFDfH':function(_0x5b7a16,_0x4eee4b){return _0x5b7a16!==_0x4eee4b;},'IUEjl':function(_0x31aad2,_0x515555){return _0x31aad2+_0x515555;},'FwcXI':function(_0x134ea9,_0x3aea8b){return _0x134ea9+_0x3aea8b;}};_0x10c473[_0x2d1b5e(0xc6)](global[_0x2d1b5e(0x121)],undefined)&&this[_0x2d1b5e(0x126)](_0x10c473['ExUJL'](_0x10c473[_0x2d1b5e(0xe6)]('\x0a',global[_0x2d1b5e(0x121)]),'\x0a'));const _0x25d14e=this[_0x2d1b5e(0x15a)][_0x2d1b5e(0xc7)](_0x1101d7[_0x2d1b5e(0xe4)]);this[_0x2d1b5e(0x126)](_0x10c473[_0x2d1b5e(0x117)](_0x10c473[_0x2d1b5e(0xc2)](_0x10c473[_0x2d1b5e(0x108)](_0x10c473[_0x2d1b5e(0xb2)]('\x20\x20',_0x25d14e[_0x2d1b5e(0x165)][_0x2d1b5e(0xc8)][_0x2d1b5e(0x132)]),_0x10c473['SdIzh']),_0x25d14e['pickle']['name']),'\x0a'));const _0x566259={};_0x566259[_0x2d1b5e(0x142)]=this[_0x2d1b5e(0x142)],_0x566259[_0x2d1b5e(0x15f)]=this['snippetBuilder'],_0x566259['supportCodeLibrary']=this[_0x2d1b5e(0xbf)],_0x566259[_0x2d1b5e(0x12e)]=_0x25d14e;const _0x3cfce3=formatterHelpers[_0x2d1b5e(0xc1)](_0x566259);let _0x18e930=![];_0x3cfce3[_0x2d1b5e(0x160)]['forEach'](_0x56cce7=>{const _0x1c5dad=_0x2d1b5e;if(_0x10c473[_0x1c5dad(0x11a)](_0x56cce7[_0x1c5dad(0x132)],_0x10c473[_0x1c5dad(0x12d)])&&!this['isBstackHook'](_0x56cce7)){totalTests+=0x1,this[_0x1c5dad(0x126)](_0x10c473[_0x1c5dad(0x117)](_0x10c473['lxREl'](_0x10c473[_0x1c5dad(0xb2)](_0x10c473[_0x1c5dad(0x152)](_0x10c473[_0x1c5dad(0xe6)](_0x10c473[_0x1c5dad(0xb0)],_0x56cce7['keyword']),_0x56cce7[_0x1c5dad(0x122)]||''),_0x10c473[_0x1c5dad(0x16e)]),Status[_0x56cce7['result'][_0x1c5dad(0x106)]]),'\x0a')),this[_0x1c5dad(0x11c)](Status[_0x56cce7[_0x1c5dad(0xf9)][_0x1c5dad(0x106)]]);if(_0x10c473['QTrXQ'](Status[_0x56cce7[_0x1c5dad(0xf9)][_0x1c5dad(0x106)]],_0x10c473[_0x1c5dad(0xb5)])){_0x18e930=!![];const _0x31de80=_0x10c473[_0x1c5dad(0x15b)](nestedKeyValue,_0x56cce7,[_0x10c473[_0x1c5dad(0x11e)],_0x10c473[_0x1c5dad(0x173)]]);_0x31de80&&(testsErrorMessage[_0x10c473['ExUJL'](_0x10c473['JYPQU'](_0x25d14e['gherkinDocument'][_0x1c5dad(0xc8)][_0x1c5dad(0x132)],_0x10c473[_0x1c5dad(0x16e)]),_0x25d14e[_0x1c5dad(0xaa)][_0x1c5dad(0x132)])]=_0x31de80,this[_0x1c5dad(0x126)](_0x10c473[_0x1c5dad(0x14a)](_0x31de80,'\x0a')));}}}),_0x18e930&&(testSuitesFailed+=0x1),this[_0x2d1b5e(0x126)]('\x0a');}[a6_0xeb429c(0x10a)](_0x47c05c){}['isBstackHook'](_0x128956){const _0x6a147f=a6_0xeb429c,_0xbad07d={};_0xbad07d['hxysx']=function(_0x3f78a5,_0x138e6f){return _0x3f78a5!==_0x138e6f;},_0xbad07d[_0x6a147f(0x163)]='cucumber-js/test.setup.js';const _0x5e98eb=_0xbad07d;if(_0x5e98eb[_0x6a147f(0x130)](_0x128956['sourceLocation'],undefined))return![];if(_0x128956[_0x6a147f(0x111)]&&_0x128956['actionLocation'][_0x6a147f(0xc3)][_0x6a147f(0x162)](_0x5e98eb['fSqYz']))return!![];return![];}[a6_0xeb429c(0x11c)](_0x3bb817){const _0x180807=a6_0xeb429c,_0x13977a={};_0x13977a[_0x180807(0x170)]=_0x180807(0x11b),_0x13977a[_0x180807(0x110)]=_0x180807(0x145),_0x13977a[_0x180807(0xf4)]=_0x180807(0x10d),_0x13977a[_0x180807(0xe0)]=_0x180807(0xb8),_0x13977a[_0x180807(0x167)]=_0x180807(0xe7),_0x13977a[_0x180807(0x16b)]=_0x180807(0x138),_0x13977a[_0x180807(0xc5)]=_0x180807(0xb9);const _0x1db6bb=_0x13977a;switch(_0x3bb817){case _0x1db6bb[_0x180807(0x170)]:testsFailed+=0x1;break;case _0x1db6bb[_0x180807(0x110)]:testsPassed+=0x1;break;case _0x1db6bb[_0x180807(0xf4)]:testsSkipped+=0x1;break;case _0x1db6bb[_0x180807(0xe0)]:testsPending+=0x1;break;case _0x1db6bb[_0x180807(0x167)]:testsUndefined+=0x1;break;case _0x1db6bb[_0x180807(0x16b)]:testsUnknown+=0x1;break;case _0x1db6bb['NKtBe']:testsAmbiguous+=0x1;break;default:break;}}async[a6_0xeb429c(0xdf)](_0x1f09b2){const _0x5ec244=a6_0xeb429c,_0x238313={'VxOvO':function(_0x190cd3,_0x3e85c3){return _0x190cd3!==_0x3e85c3;},'MhmWC':function(_0x382e7a,_0x4ace30){return _0x382e7a!==_0x4ace30;},'NYocw':function(_0x194230){return _0x194230();},'RgcDJ':function(_0x406093,_0x26e70d){return _0x406093(_0x26e70d);},'hkVkD':function(_0x57a1fa,_0x4c63eb){return _0x57a1fa+_0x4c63eb;},'fIplL':function(_0x47b161){return _0x47b161();},'xWBBr':_0x5ec244(0xca)};let _0x5e664a;if(_0x238313[_0x5ec244(0x12a)](process[_0x5ec244(0x133)]['CONFIG'],undefined)){const _0x128959=JSON[_0x5ec244(0x159)](process[_0x5ec244(0x133)][_0x5ec244(0x104)]);_0x5e664a=_0x128959[_0x5ec244(0x174)];}_0x238313[_0x5ec244(0xff)](_0x5e664a,undefined)&&_0x238313[_0x5ec244(0x113)](isBrowserstackInfra)&&(global[_0x5ec244(0x121)]=_0x238313['RgcDJ'](getPlatformName,_0x5e664a),this[_0x5ec244(0x126)](_0x238313['hkVkD']('Executing\x20tests\x20for\x20'+global[_0x5ec244(0x121)],'\x0a'))),_0x238313[_0x5ec244(0xe9)](shouldProcessEventForTesthub)&&(TestDetails[_0x5ec244(0xaf)](),this[_0x5ec244(0x150)][_0x5ec244(0x15e)]=_0x1f09b2,BrowserstackCLI[_0x5ec244(0xa9)]()['isCliEnabled']()&&await this['isCLIReady']()&&(TestInfo['setup'](_0x238313[_0x5ec244(0x10c)]),await BrowserstackCLI[_0x5ec244(0xa9)]()[_0x5ec244(0xd8)]()[_0x5ec244(0x16f)](TestFrameworkState[_0x5ec244(0x12b)],HookState[_0x5ec244(0xbe)],{})));}[a6_0xeb429c(0x11d)](_0x2d0335){const _0x1247cf=a6_0xeb429c;this['report'][_0x1247cf(0x127)]=_0x2d0335,this[_0x1247cf(0x10a)](_0x2d0335);}async[a6_0xeb429c(0x101)](_0x28af4e,_0x82aae8,_0x3e5384){const _0x581ccb=a6_0xeb429c,_0x44593a={'vuuqH':function(_0x260ecf,_0xa19516){return _0x260ecf(_0xa19516);},'UXCwE':'TestRunStarted','fDduT':function(_0x20d5a4,_0x9310ed){return _0x20d5a4&&_0x9310ed;}};testSuites+=0x1;if(_0x44593a[_0x581ccb(0x168)](shouldProcessEventForTesthub,_0x44593a['UXCwE']))try{this[_0x581ccb(0x150)][_0x581ccb(0x141)]=this[_0x581ccb(0x150)]['testCaseStarted']||{},this[_0x581ccb(0x150)][_0x581ccb(0x141)][_0x28af4e['id']]=_0x28af4e;let _0x31067c=null;BrowserstackCLI[_0x581ccb(0xa9)]()[_0x581ccb(0xac)]()&&await this[_0x581ccb(0x135)]()?_0x31067c=TestInfo[_0x581ccb(0x157)](_0x28af4e['id']):_0x31067c=TestDetails['getTestUUID'](_0x28af4e['id']);_testCasesData[_0x28af4e['id']]=Object[_0x581ccb(0xd2)]({},_0x3e5384);const _0x1c77d8=this[_0x581ccb(0x150)],_0x183fb8=_0x28af4e[_0x581ccb(0xf8)],_0x4669fe=_0x1c77d8[_0x581ccb(0x154)][_0x581ccb(0x14e)](_0xbf8031=>_0xbf8031['id']===_0x183fb8)[_0x581ccb(0x15c)],_0x575487=_0x1c77d8[_0x581ccb(0xaa)][_0x581ccb(0x14e)](_0x5a4a0b=>_0x5a4a0b['id']===_0x4669fe),_0xf20b89=_0x1c77d8[_0x581ccb(0x165)][_0x581ccb(0x14e)](_0x59e6ee=>_0x59e6ee[_0x581ccb(0xc3)]===_0x575487['uri']),_0x5bcb17=_0xf20b89[_0x581ccb(0xc8)],_0x46e8c8={'uuid':_0x31067c,'startedAt':new Date()[_0x581ccb(0xae)]()};if(_0x575487){const _0x226c6a={};_0x226c6a['name']=_0x575487[_0x581ccb(0x132)],_0x46e8c8[_0x581ccb(0xce)]=_0x226c6a;}if(_0x44593a[_0x581ccb(0x14d)](_0xf20b89,_0x5bcb17)){const _0x3fc6f6={};_0x3fc6f6['path']=_0xf20b89['uri'],_0x3fc6f6[_0x581ccb(0x132)]=_0x5bcb17['name'],_0x3fc6f6['description']=_0x5bcb17[_0x581ccb(0x120)],_0x46e8c8[_0x581ccb(0xc8)]=_0x3fc6f6;}_tests[_0x183fb8]=_0x46e8c8;if(BrowserstackCLI[_0x581ccb(0xa9)]()[_0x581ccb(0xac)]()&&await this['isCLIReady']()){const _0x586e89=await cucumberUtils[_0x581ccb(0xb7)](_0x46e8c8,_0x575487,_0x3e5384,_0xf20b89,_0x28af4e['id'],_0x44593a[_0x581ccb(0x153)]),_0x3f49ac={};_0x3f49ac[_0x581ccb(0x137)]=_0x586e89,await BrowserstackCLI[_0x581ccb(0xa9)]()['getTestFramework']()['trackEvent'](TestFrameworkState[_0x581ccb(0xee)],HookState[_0x581ccb(0xbe)],_0x3f49ac);return;}await testObservabilityReporter[_0x581ccb(0x16a)](_0x3e5384,_0xf20b89,_0x575487,_0x44593a[_0x581ccb(0x153)],_0x46e8c8);}catch(_0x4c0777){logger[_0x581ccb(0x11f)]('Exception\x20in\x20sending\x20onTestCaseStarted:\x20'+util[_0x581ccb(0xed)](_0x4c0777)+'\x20');}}async['onTestCaseFinished'](_0x265a70,_0x45be25,_0x36be95){const _0x360390=a6_0xeb429c,_0x3e2ea6={'eQrYX':function(_0x46affc,_0x3e1eeb){return _0x46affc(_0x3e1eeb);},'FlwKj':_0x360390(0xcd),'KGLGT':_0x360390(0x137)};this[_0x360390(0xc0)](_0x265a70);if(_0x3e2ea6[_0x360390(0x134)](shouldProcessEventForTesthub,_0x3e2ea6[_0x360390(0x164)]))try{this[_0x360390(0x150)][_0x360390(0xb4)]=this[_0x360390(0x150)][_0x360390(0xb4)]||{},this[_0x360390(0x150)][_0x360390(0xb4)][_0x265a70['testCaseStartedId']]=_0x265a70,_testCasesData[_0x36be95['id']]=Object[_0x360390(0xd2)]({},_0x36be95);const _0x1923e4=_0x265a70[_0x360390(0xe4)],_0x386650=_0x45be25['eventDataCollector']['testCaseAttemptDataMap'][_0x1923e4]['testCaseId'],_0x398bc7=_0x45be25[_0x360390(0x15a)][_0x360390(0xfc)][_0x386650],_0x3379ed=_0x398bc7['pickleId'],_0x344afa=_0x45be25[_0x360390(0x15a)][_0x360390(0xfd)][_0x3379ed],_0x104ddb=this[_0x360390(0x158)](_0x45be25,_0x344afa),_0x3dbfe7=_0x104ddb[_0x360390(0xc8)],_0x46497d=_tests[_0x386650];_0x46497d&&(delete _tests[_0x386650],_0x46497d[_0x360390(0x14c)]=new Date()[_0x360390(0xae)]());if(BrowserstackCLI[_0x360390(0xa9)]()[_0x360390(0xac)]()&&await this[_0x360390(0x135)]()){const _0x314e65=await cucumberUtils[_0x360390(0xb7)](_0x46497d,_0x344afa,_0x36be95,_0x104ddb,_0x1923e4,_0x3e2ea6['FlwKj']),_0x13a6b7={};_0x13a6b7[_0x360390(0x137)]=_0x314e65,await BrowserstackCLI[_0x360390(0xa9)]()[_0x360390(0xd8)]()[_0x360390(0x16f)](TestFrameworkState[_0x360390(0xee)],HookState[_0x360390(0xe8)],_0x13a6b7);const _0x4b7b12={};_0x4b7b12[_0x360390(0x136)]=_0x265a70['testCaseStartedId'],_0x4b7b12[_0x360390(0x109)]=_0x3e2ea6[_0x360390(0x15d)],await BrowserstackCLI['getInstance']()[_0x360390(0xd8)]()[_0x360390(0x16f)](TestFrameworkState[_0x360390(0x13f)],HookState[_0x360390(0xe8)],_0x4b7b12);return;}await testObservabilityReporter[_0x360390(0x16a)](_0x36be95,_0x104ddb,_0x344afa,_0x3e2ea6['FlwKj'],_0x46497d);}catch(_0x24894e){logger['debug']('Exception\x20in\x20sending\x20onTestCaseFinished\x20event:\x20\x20'+util[_0x360390(0xed)](_0x24894e));}}async[a6_0xeb429c(0xec)](_0x39397e,_0x3a616f){const _0xe4bf72=a6_0xeb429c,_0x1d2ad7={'AnnCB':function(_0x525ca1,_0x154e93){return _0x525ca1(_0x154e93);},'ydjMS':_0xe4bf72(0x155),'EmUmV':function(_0x57ceba,_0x17814b){return _0x57ceba!==_0x17814b;},'wkuLw':'testStepId'};if(_0x1d2ad7[_0xe4bf72(0x119)](shouldProcessEventForTesthub,_0x1d2ad7[_0xe4bf72(0x147)]))try{this[_0xe4bf72(0x150)][_0xe4bf72(0x14f)]=this['report'][_0xe4bf72(0x14f)]||{},this[_0xe4bf72(0x150)][_0xe4bf72(0x14f)][_0x39397e[_0xe4bf72(0xe4)]]=_0x39397e;const _0x3526bb=_0x39397e[_0xe4bf72(0xe4)],_0x3fc499=_0x3a616f['eventDataCollector'][_0xe4bf72(0x171)][_0x3526bb][_0xe4bf72(0xf8)],_0x41af92=this[_0xe4bf72(0x150)][_0xe4bf72(0x154)][_0xe4bf72(0x14e)](_0x3d09a9=>_0x3d09a9['id']===_0x3fc499)[_0xe4bf72(0x15c)],_0x405457=this['report']['pickle'][_0xe4bf72(0x14e)](_0x488bff=>_0x488bff['id']===_0x41af92),_0x1df29d=this['report'][_0xe4bf72(0x154)][_0xe4bf72(0x14e)](_0x143a2a=>_0x143a2a['id']===_0x3fc499)[_0xe4bf72(0x160)],_0x2b6e00=this[_0xe4bf72(0x150)][_0xe4bf72(0x14f)][_0x3526bb]['testStepId'],_0x5dc44e=_0x1df29d[_0xe4bf72(0x14e)](_0x53d7cc=>_0x53d7cc['id']===_0x2b6e00)[_0xe4bf72(0xbb)],_0xc2355c=_0x405457['steps'][_0xe4bf72(0x14e)](_0x340b00=>_0x340b00['id']===_0x5dc44e);if(_0x5dc44e&&_tests[_0x3fc499]&&_0x1d2ad7['EmUmV'](_tests[_0x3fc499][_0x1d2ad7[_0xe4bf72(0x156)]],_0x2b6e00)){_tests[_0x3fc499][_0x1d2ad7[_0xe4bf72(0x156)]]=_0x2b6e00;const _0x380193={};_0x380193[_0xe4bf72(0xc9)]=[];const _0x90196b=_tests[_0x3fc499]||_0x380193;_0x90196b&&!_0x90196b[_0xe4bf72(0xc9)]&&(_0x90196b[_0xe4bf72(0xc9)]=[]),_0x90196b['steps']['push']({'id':_0xc2355c['id'],'text':_0xc2355c['text'],'started_at':new Date()[_0xe4bf72(0xae)]()}),_tests[_0x3fc499]=_0x90196b;}if(BrowserstackCLI[_0xe4bf72(0xa9)]()[_0xe4bf72(0xac)]()&&await this['isCLIReady']()){const _0x1e4a82=await cucumberUtils[_0xe4bf72(0x149)](this[_0xe4bf72(0x150)],_0x3526bb,_0x1d2ad7[_0xe4bf72(0x147)],_0x1df29d,_0x2b6e00,_tests[_0x3fc499]);_0x1e4a82&&await BrowserstackCLI[_0xe4bf72(0xa9)]()[_0xe4bf72(0xd8)]()[_0xe4bf72(0x16f)](TestFrameworkState[_0x1e4a82[_0xe4bf72(0x105)]],HookState[_0xe4bf72(0xbe)],{'hookData':_0x1e4a82,'testUUID':_0x39397e[_0xe4bf72(0xe4)]});return;}await testObservabilityReporter['sendHook'](this['report'],_0x3526bb,_0x1d2ad7[_0xe4bf72(0x147)],_0x1df29d,_0x2b6e00,_tests[_0x3fc499]);}catch(_0x193531){logger[_0xe4bf72(0x11f)](_0xe4bf72(0x12f)+util['format'](_0x193531));}}async['onTestStepFinished'](_0x2fd539,_0x48bf7e){const _0x25f6f3=a6_0xeb429c,_0x110d93={'oWmwn':function(_0x56a353,_0x45753f){return _0x56a353===_0x45753f;},'sVEEu':'0|2|3|4|1','PtyTT':function(_0x3c9589,_0x5b22d8){return _0x3c9589(_0x5b22d8);},'dpFLk':_0x25f6f3(0xdb),'ghDNq':'failed','xJGzE':function(_0x219617,_0x5d4e9d){return _0x219617===_0x5d4e9d;},'nYkTS':function(_0x3ffd4c,_0x36fd25){return _0x3ffd4c===_0x36fd25;},'vJDvB':_0x25f6f3(0xda),'XHhYj':'testStepId','rppjA':_0x25f6f3(0x155),'qikqu':_0x25f6f3(0xf6)};this[_0x25f6f3(0x150)][_0x25f6f3(0xfb)]=this[_0x25f6f3(0x150)]['testStepFinished']||{},this['report'][_0x25f6f3(0xfb)][_0x2fd539[_0x25f6f3(0xe4)]]=_0x2fd539;if(_0x110d93[_0x25f6f3(0x166)](shouldProcessEventForTesthub,_0x110d93[_0x25f6f3(0xe5)]))try{const _0xcd44f4=_0x2fd539[_0x25f6f3(0xe4)],_0x223df9=_0x48bf7e[_0x25f6f3(0x15a)]['testCaseAttemptDataMap'][_0xcd44f4][_0x25f6f3(0xf8)],_0x4121f3=_0x48bf7e['eventDataCollector'][_0x25f6f3(0xfc)][_0x223df9],_0x42d498=_0x4121f3[_0x25f6f3(0x15c)],_0x1cc874=_0x48bf7e[_0x25f6f3(0x15a)][_0x25f6f3(0xfd)][_0x42d498],_0x1bebb=_0x2fd539[_0x25f6f3(0xfa)],_0x390ecb=_0x4121f3[_0x25f6f3(0x160)],_0x5bf15d=this[_0x25f6f3(0x15a)][_0x25f6f3(0xc7)](_0xcd44f4),_0x53fa14=_0x390ecb['find'](_0x506f01=>_0x506f01['id']===_0x1bebb)[_0x25f6f3(0xbb)];let _0x26f64c,_0x135eca;_0x2fd539[_0x25f6f3(0xd4)]&&_0x110d93[_0x25f6f3(0x151)](_0x2fd539['testStepResult'][_0x25f6f3(0x106)][_0x25f6f3(0x146)]()['toLowerCase'](),_0x110d93[_0x25f6f3(0x16c)])&&(_0x26f64c=_0x110d93[_0x25f6f3(0xcb)](_0x2fd539['testStepResult'][_0x25f6f3(0xd1)],undefined)?_0x2fd539['testStepResult']['message']:_0x2fd539[_0x25f6f3(0xd4)][_0x25f6f3(0xd1)][_0x25f6f3(0x107)],_0x135eca=_0x110d93[_0x25f6f3(0xd3)](_0x2fd539[_0x25f6f3(0xd4)]['exception'],undefined)?_0x110d93['vJDvB']:_0x2fd539[_0x25f6f3(0xd4)]['message']);if(_0x53fa14&&_tests[_0x223df9][_0x110d93[_0x25f6f3(0x100)]]){const _0x18e33b=_0x1cc874[_0x25f6f3(0xc9)][_0x25f6f3(0x14e)](_0x49c959=>_0x49c959['id']===_0x53fa14),_0x496aa9={};_0x496aa9[_0x25f6f3(0xc9)]=[];const _0x384f36=_tests[_0x223df9]||_0x496aa9;!_0x384f36[_0x25f6f3(0xc9)]?_0x384f36['steps']=[{'id':_0x18e33b['id'],'text':_0x18e33b[_0x25f6f3(0x122)],'finished_at':new Date()[_0x25f6f3(0xae)](),'result':_0x2fd539['testStepResult'][_0x25f6f3(0x106)],'duration':_0x2fd539[_0x25f6f3(0xd4)][_0x25f6f3(0x172)]['seconds'],'failure':_0x26f64c,'failureType':_0x135eca}]:_0x384f36[_0x25f6f3(0xc9)][_0x25f6f3(0xbd)](_0x1ce0dd=>{const _0xa25d52=_0x25f6f3;if(_0x110d93[_0xa25d52(0x151)](_0x1ce0dd['id'],_0x18e33b['id'])){const _0x5b02b9=_0x110d93['sVEEu'][_0xa25d52(0x123)]('|');let _0x17978d=0x0;while(!![]){switch(_0x5b02b9[_0x17978d++]){case'0':_0x1ce0dd[_0xa25d52(0x143)]=new Date()[_0xa25d52(0xae)]();continue;case'1':_0x1ce0dd[_0xa25d52(0x118)]=_0x135eca;continue;case'2':_0x1ce0dd[_0xa25d52(0xf9)]=_0x2fd539[_0xa25d52(0xd4)][_0xa25d52(0x106)];continue;case'3':_0x1ce0dd[_0xa25d52(0x172)]=_0x2fd539[_0xa25d52(0xd4)]['duration']['seconds'];continue;case'4':_0x1ce0dd[_0xa25d52(0x169)]=_0x26f64c;continue;}break;}}}),_tests[_0x223df9]=_0x384f36;}delete _tests[_0x223df9][_0x110d93[_0x25f6f3(0x100)]];if(BrowserstackCLI[_0x25f6f3(0xa9)]()['isCliEnabled']()&&await this['isCLIReady']()){const _0x406bd4=await cucumberUtils[_0x25f6f3(0x149)](this[_0x25f6f3(0x150)],_0xcd44f4,_0x110d93[_0x25f6f3(0xba)],_0x390ecb,_0x1bebb,_tests[_0x223df9]);if(_0x406bd4){await BrowserstackCLI[_0x25f6f3(0xa9)]()['getTestFramework']()['trackEvent'](TestFrameworkState[_0x406bd4[_0x25f6f3(0x105)]],HookState[_0x25f6f3(0xe8)],{'hookData':_0x406bd4,'testUUID':_0x2fd539[_0x25f6f3(0xe4)]});const _0x3ceabc={};_0x3ceabc['testUUID']=_0x2fd539['testCaseStartedId'],_0x3ceabc[_0x25f6f3(0x109)]=_0x110d93[_0x25f6f3(0xc4)],await BrowserstackCLI[_0x25f6f3(0xa9)]()[_0x25f6f3(0xd8)]()[_0x25f6f3(0x16f)](TestFrameworkState['LOG_REPORT'],HookState[_0x25f6f3(0xe8)],_0x3ceabc);}return;}await testObservabilityReporter[_0x25f6f3(0xd7)](this[_0x25f6f3(0x150)],_0xcd44f4,_0x110d93[_0x25f6f3(0xe5)],_0x390ecb,_0x1bebb,_tests[_0x223df9]);}catch(_0x4a3c6e){logger[_0x25f6f3(0x11f)](_0x25f6f3(0x13a)+util[_0x25f6f3(0xed)](_0x4a3c6e));}}[a6_0xeb429c(0xfe)](_0x1c35d3){const _0x16ef62=a6_0xeb429c,_0x4b09ec={};return _0x1c35d3[_0x16ef62(0xc8)][_0x16ef62(0x129)]['map'](this[_0x16ef62(0xad)])[_0x16ef62(0xdc)]()[_0x16ef62(0xbd)](_0x26a96f=>_0x26a96f[_0x16ef62(0xc9)]['forEach'](_0x5d7309=>_0x4b09ec[_0x5d7309['id']]=_0x5d7309)),_0x4b09ec;}[a6_0xeb429c(0xad)](_0x587abe){const _0x4a1626=a6_0xeb429c,_0x164f71={'jTTYi':function(_0x3cc116,_0x2bc7c2){return _0x3cc116(_0x2bc7c2);}};if(!_0x164f71[_0x4a1626(0xf7)](isUndefined,_0x587abe[_0x4a1626(0xb6)]))return[_0x587abe['background']];else{if(!_0x164f71[_0x4a1626(0xf7)](isUndefined,_0x587abe['rule']))return _0x587abe[_0x4a1626(0x125)]['children']['map'](_0x12ffa7=>!isUndefined(_0x12ffa7[_0x4a1626(0xb6)])?_0x12ffa7[_0x4a1626(0xb6)]:_0x12ffa7['scenario']);};return[_0x587abe[_0x4a1626(0xce)]];}[a6_0xeb429c(0x158)](_0x48c090,_0x38044a){const _0x426a81=a6_0xeb429c;return Object[_0x426a81(0x103)](_0x48c090[_0x426a81(0x15a)]['gherkinDocumentMap'])['find'](_0xf6f035=>_0xf6f035[_0x426a81(0xc3)]===_0x38044a[_0x426a81(0xc3)]);}async['ensureCLIInitialized'](){const _0x2f3eee=a6_0xeb429c;if(this['cliInitPromise'])return this[_0x2f3eee(0x161)];return this[_0x2f3eee(0x161)]=this[_0x2f3eee(0x16d)](),this[_0x2f3eee(0x161)];}async['_performCLIInitialization'](){const _0x2c9341=a6_0xeb429c,_0x507678={'hJggQ':'No\x20BROWSERSTACK_CLI_BIN_SESSION_ID\x20found,\x20CLI\x20not\x20available','USPjL':function(_0x345ce3,_0x16e32b){return _0x345ce3(_0x16e32b);},'jPmhM':_0x2c9341(0xf1),'lVIbv':'../../utils/constants'};try{const _0x5e23a0=BrowserstackCLI['getInstance']();if(_0x5e23a0[_0x2c9341(0x13e)]())return logger[_0x2c9341(0x11f)](_0x2c9341(0x139)+_0x5e23a0[_0x2c9341(0xf3)]),!![];const _0x527e7f=process[_0x2c9341(0x133)][_0x2c9341(0x10b)];if(!_0x527e7f)return logger[_0x2c9341(0x11f)](_0x507678['hJggQ']),![];const _0x32bbd1=_0x507678[_0x2c9341(0x10e)](require,_0x507678['jPmhM']),{FRAMEWORKS:_0x33b2bb}=_0x507678[_0x2c9341(0x10e)](require,_0x507678['lVIbv']);return _0x32bbd1[_0x2c9341(0x102)](_0x33b2bb['CUCUMBER'],_0x33b2bb[_0x2c9341(0x144)]),logger[_0x2c9341(0x11f)](_0x2c9341(0x115)+_0x527e7f),await _0x5e23a0['bootstrap'](),logger[_0x2c9341(0x11f)]('CLI\x20bootstrap\x20completed\x20-\x20isRunning:\x20'+_0x5e23a0['isRunning']()+_0x2c9341(0x13b)+_0x5e23a0[_0x2c9341(0xf3)]),_0x5e23a0[_0x2c9341(0x13e)]();}catch(_0x218220){return logger[_0x2c9341(0x11f)]('Error\x20initializing\x20CLI\x20in\x20formatter:\x20'+util[_0x2c9341(0xed)](_0x218220)),![];}}async['isCLIReady'](){const _0x9e3027=a6_0xeb429c;try{return await this[_0x9e3027(0xb1)](),BrowserstackCLI['getInstance']()[_0x9e3027(0x13e)]();}catch(_0x4fc253){return logger[_0x9e3027(0x11f)]('isCLIReady:\x20Error\x20checking\x20CLI\x20readiness:\x20'+util['format'](_0x4fc253)),![];}}}module['exports']=o11yClassErrorHandler(BrowserstackFormatter,[a6_0xeb429c(0x101),a6_0xeb429c(0xf2),a6_0xeb429c(0xec),a6_0xeb429c(0xd5),a6_0xeb429c(0xdf),'onTestRunFinished','extractStepContainers',a6_0xeb429c(0x158),a6_0xeb429c(0xfe)]);