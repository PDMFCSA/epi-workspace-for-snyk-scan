const a6_0x50785f=a6_0x2df6;(function(_0x350748,_0x428215){const _0x120371=a6_0x2df6,_0x24f33e=_0x350748();while(!![]){try{const _0x12df82=-parseInt(_0x120371(0xa5))/0x1*(parseInt(_0x120371(0xb4))/0x2)+-parseInt(_0x120371(0xc2))/0x3+-parseInt(_0x120371(0xe3))/0x4*(-parseInt(_0x120371(0x12c))/0x5)+parseInt(_0x120371(0xdb))/0x6*(-parseInt(_0x120371(0xcf))/0x7)+-parseInt(_0x120371(0x80))/0x8*(parseInt(_0x120371(0x9b))/0x9)+-parseInt(_0x120371(0xb2))/0xa+parseInt(_0x120371(0xca))/0xb;if(_0x12df82===_0x428215)break;else _0x24f33e['push'](_0x24f33e['shift']());}catch(_0xafbe0c){_0x24f33e['push'](_0x24f33e['shift']());}}}(a6_0x14f7,0x5b8ed));const {requireModule,getPlatformName,nestedKeyValue,isUndefined,isBrowserstackInfra}=require('../../../helpers/helper'),util=require(a6_0x50785f(0xd5)),{Formatter,formatterHelpers,Status}=requireModule(a6_0x50785f(0xa2)),TestDetails=require('../../playwright/reporter/test-details.js'),TestObservabilityReporter=require('../test-observability.js'),{o11yClassErrorHandler}=require(a6_0x50785f(0xfd)),{shouldProcessEventForTesthub}=require(a6_0x50785f(0x12d)),BrowserstackCLI=require(a6_0x50785f(0x11b)),TestFrameworkState=require('../../v2/state/testFrameworkState.js'),HookState=require(a6_0x50785f(0x118)),CucumberUtils=require('../../v2/utils/cucumber-utils.js'),TestInfo=require(a6_0x50785f(0xf7)),testObservabilityReporter=new TestObservabilityReporter(),cucumberUtils=new CucumberUtils(),logger=require(a6_0x50785f(0x151))[a6_0x50785f(0xc9)],_tests={},_testCasesData={};class BrowserstackFormatter extends Formatter{constructor(_0x1e87b5){const _0x2796ef=a6_0x50785f,_0x30495b={};_0x30495b[_0x2796ef(0xd4)]=_0x2796ef(0x8e);const _0x162517=_0x30495b;super(_0x1e87b5),this[_0x2796ef(0xa4)]={},_0x1e87b5[_0x2796ef(0x145)]['on'](_0x162517[_0x2796ef(0xd4)],async _0x1e5fa3=>{const _0x2660c3=_0x2796ef;switch(!![]){case!!_0x1e5fa3[_0x2660c3(0x134)]:this[_0x2660c3(0x129)](_0x1e5fa3[_0x2660c3(0x134)]);break;case!!_0x1e5fa3[_0x2660c3(0x125)]:this['onTestRunFinished'](_0x1e5fa3[_0x2660c3(0x125)]);break;case!!_0x1e5fa3[_0x2660c3(0x13c)]:this[_0x2660c3(0xfc)](_0x1e5fa3['testCaseStarted'],_0x1e87b5,_0x1e5fa3);break;case!!_0x1e5fa3[_0x2660c3(0xa8)]:this[_0x2660c3(0x99)](_0x1e5fa3[_0x2660c3(0xa8)],_0x1e87b5,_0x1e5fa3);break;case!!_0x1e5fa3[_0x2660c3(0x10f)]:this[_0x2660c3(0xd8)](_0x1e5fa3[_0x2660c3(0x10f)],_0x1e87b5);break;case!!_0x1e5fa3[_0x2660c3(0xbe)]:this[_0x2660c3(0xb8)](_0x1e5fa3[_0x2660c3(0xbe)],_0x1e87b5);break;case!!_0x1e5fa3[_0x2660c3(0x8a)]:this[_0x2660c3(0xde)](_0x1e5fa3[_0x2660c3(0x8a)]);break;case!!_0x1e5fa3['testCase']:this['onTestCase'](_0x1e5fa3[_0x2660c3(0x106)]);break;case!!_0x1e5fa3[_0x2660c3(0x12f)]:this[_0x2660c3(0x108)](_0x1e5fa3['pickle']);break;case!!_0x1e5fa3[_0x2660c3(0x138)]:this['onGherkinDocument'](_0x1e5fa3['gherkinDocument']);break;}});}[a6_0x50785f(0xde)](_0x2594ba){const _0x181500=a6_0x50785f;this[_0x181500(0xa4)][_0x181500(0x14e)]=Object['assign']([],this['report'][_0x181500(0x14e)]||[]),this[_0x181500(0xa4)][_0x181500(0x14e)][_0x181500(0x14f)](_0x2594ba);}[a6_0x50785f(0x108)](_0x26b52e){const _0x463053=a6_0x50785f;this[_0x463053(0xa4)][_0x463053(0x12f)]=Object[_0x463053(0xa3)]([],this[_0x463053(0xa4)][_0x463053(0x12f)]||[],[_0x26b52e]),this[_0x463053(0xa4)]['pickle'][_0x463053(0x14f)](_0x26b52e);}[a6_0x50785f(0xf4)](_0x259370){const _0x3f905c=a6_0x50785f;this[_0x3f905c(0xa4)]['gherkinDocument']=Object[_0x3f905c(0xa3)]([],this[_0x3f905c(0xa4)]['gherkinDocument']||[],[_0x259370]),this[_0x3f905c(0xa4)][_0x3f905c(0x138)][_0x3f905c(0x14f)](_0x259370);}['onSource'](_0x2f5953){const _0x349191=a6_0x50785f;this[_0x349191(0xa4)][_0x349191(0xa1)]=_0x2f5953;}[a6_0x50785f(0xf1)](_0xb4d7c8){const _0x4add7d=a6_0x50785f;this['report'][_0x4add7d(0xaf)]=Object[_0x4add7d(0xa3)]([],this[_0x4add7d(0xa4)][_0x4add7d(0xaf)]||[],[_0xb4d7c8]),this['report']['stepDefinition'][_0x4add7d(0x14f)](_0xb4d7c8);}[a6_0x50785f(0x9c)](_0x5f404f){const _0x57a078=a6_0x50785f;this[_0x57a078(0xa4)][_0x57a078(0x119)]=Object[_0x57a078(0xa3)]([],this[_0x57a078(0xa4)]['testCases']||[],[_0x5f404f]),this['report'][_0x57a078(0x119)]['push'](_0x5f404f);}[a6_0x50785f(0x103)](_0x35507d){const _0x138e62=a6_0x50785f,_0x33b695={'UfSHz':function(_0x434f,_0x87c752){return _0x434f!==_0x87c752;},'XHLsO':'bstack','ygqKr':function(_0x1c97df,_0x3993cc){return _0x1c97df+_0x3993cc;},'KVUGY':function(_0x18f642,_0x1b9d35){return _0x18f642+_0x1b9d35;},'KXhvM':function(_0x41a045,_0x2ed57b){return _0x41a045+_0x2ed57b;},'IAPLw':_0x138e62(0xab),'PqWjZ':_0x138e62(0x90),'cyLNO':function(_0x354173,_0x170414){return _0x354173===_0x170414;},'HlUXq':'FAILED','dTfko':function(_0x4fcc67,_0x561a22,_0x24ccc7){return _0x4fcc67(_0x561a22,_0x24ccc7);},'jaQjA':_0x138e62(0x8d),'QAsBB':_0x138e62(0x104),'ZjqOX':function(_0x5c10f8,_0x17e239){return _0x5c10f8+_0x17e239;},'JNfGp':function(_0x36d83f,_0xe864da){return _0x36d83f!==_0xe864da;},'jOuWK':function(_0x2b21b9,_0x3f91dc){return _0x2b21b9+_0x3f91dc;},'YpppG':function(_0x346f41,_0x2ab763){return _0x346f41+_0x2ab763;},'gkQBL':function(_0x39a1ae,_0x286701){return _0x39a1ae+_0x286701;},'ipQSG':function(_0xb3c4cc,_0x1cb298){return _0xb3c4cc+_0x1cb298;},'tDnOM':function(_0x50394b,_0x3446bf){return _0x50394b+_0x3446bf;}};_0x33b695[_0x138e62(0xc6)](global[_0x138e62(0xce)],undefined)&&this[_0x138e62(0x82)](_0x33b695[_0x138e62(0xcb)](_0x33b695['YpppG']('\x0a',global[_0x138e62(0xce)]),'\x0a'));const _0x4b3a8f=this[_0x138e62(0x115)]['getTestCaseAttempt'](_0x35507d[_0x138e62(0x10d)]);this['log'](_0x33b695[_0x138e62(0x11a)](_0x33b695[_0x138e62(0xbb)](_0x33b695[_0x138e62(0xe0)](_0x33b695[_0x138e62(0xfb)]('\x20\x20',_0x4b3a8f['gherkinDocument'][_0x138e62(0x131)][_0x138e62(0xb1)]),_0x33b695[_0x138e62(0x92)]),_0x4b3a8f['pickle']['name']),'\x0a'));const _0x569789={};_0x569789['cwd']=this['cwd'],_0x569789[_0x138e62(0x97)]=this[_0x138e62(0x97)],_0x569789[_0x138e62(0xd2)]=this[_0x138e62(0xd2)],_0x569789[_0x138e62(0xdd)]=_0x4b3a8f;const _0x28b57e=formatterHelpers[_0x138e62(0x95)](_0x569789);let _0xf5f92a=![];_0x28b57e['testSteps'][_0x138e62(0x14a)](_0x4fc180=>{const _0x3744a2=_0x138e62;if(_0x33b695[_0x3744a2(0x14c)](_0x4fc180[_0x3744a2(0xb1)],_0x33b695[_0x3744a2(0x98)])&&!this['isBstackHook'](_0x4fc180)){totalTests+=0x1,this['log'](_0x33b695[_0x3744a2(0x13b)](_0x33b695[_0x3744a2(0x13b)](_0x33b695['KVUGY'](_0x33b695[_0x3744a2(0x13b)](_0x33b695[_0x3744a2(0x150)](_0x33b695[_0x3744a2(0x111)],_0x4fc180[_0x3744a2(0xd1)]),_0x4fc180[_0x3744a2(0xa0)]||''),_0x33b695[_0x3744a2(0x92)]),Status[_0x4fc180[_0x3744a2(0x8d)][_0x3744a2(0x9d)]]),'\x0a')),this[_0x3744a2(0xef)](Status[_0x4fc180[_0x3744a2(0x8d)]['status']]);if(_0x33b695[_0x3744a2(0xe1)](Status[_0x4fc180[_0x3744a2(0x8d)]['status']],_0x33b695[_0x3744a2(0x87)])){_0xf5f92a=!![];const _0x5a070c=_0x33b695[_0x3744a2(0x96)](nestedKeyValue,_0x4fc180,[_0x33b695[_0x3744a2(0xe2)],_0x33b695[_0x3744a2(0x83)]]);_0x5a070c&&(testsErrorMessage[_0x33b695[_0x3744a2(0xbb)](_0x33b695['ZjqOX'](_0x4b3a8f[_0x3744a2(0x138)]['feature'][_0x3744a2(0xb1)],_0x33b695['PqWjZ']),_0x4b3a8f[_0x3744a2(0x12f)]['name'])]=_0x5a070c,this[_0x3744a2(0x82)](_0x33b695[_0x3744a2(0x150)](_0x5a070c,'\x0a')));}}}),_0xf5f92a&&(testSuitesFailed+=0x1),this[_0x138e62(0x82)]('\x0a');}['logTestRunFinished'](_0x4b84e4){}[a6_0x50785f(0x12a)](_0x124d5e){const _0xe30d=a6_0x50785f,_0x127034={};_0x127034['OjPCj']=function(_0x50e66e,_0x552b03){return _0x50e66e!==_0x552b03;},_0x127034[_0xe30d(0xf9)]=_0xe30d(0xf8);const _0x409e4b=_0x127034;if(_0x409e4b[_0xe30d(0xbc)](_0x124d5e['sourceLocation'],undefined))return![];if(_0x124d5e['actionLocation']&&_0x124d5e['actionLocation'][_0xe30d(0xb9)][_0xe30d(0x100)](_0x409e4b[_0xe30d(0xf9)]))return!![];return![];}['incrementCounter'](_0x2c0501){const _0x280b15=a6_0x50785f,_0x287608={};_0x287608['EHEDk']=_0x280b15(0x85),_0x287608[_0x280b15(0x11e)]=_0x280b15(0xe6),_0x287608['HPeCx']=_0x280b15(0x139),_0x287608[_0x280b15(0x8c)]='PENDING',_0x287608['DuWCo']=_0x280b15(0x137),_0x287608[_0x280b15(0xb0)]=_0x280b15(0xc7),_0x287608[_0x280b15(0x91)]='AMBIGUOUS';const _0x263e25=_0x287608;switch(_0x2c0501){case _0x263e25[_0x280b15(0x120)]:testsFailed+=0x1;break;case _0x263e25['rHjTR']:testsPassed+=0x1;break;case _0x263e25[_0x280b15(0x93)]:testsSkipped+=0x1;break;case _0x263e25[_0x280b15(0x8c)]:testsPending+=0x1;break;case _0x263e25['DuWCo']:testsUndefined+=0x1;break;case _0x263e25[_0x280b15(0xb0)]:testsUnknown+=0x1;break;case _0x263e25[_0x280b15(0x91)]:testsAmbiguous+=0x1;break;default:break;}}async[a6_0x50785f(0x129)](_0x369b18){const _0x2aaa46=a6_0x50785f,_0x4c34a9={'iiBgv':function(_0x48802c,_0x5a1015){return _0x48802c!==_0x5a1015;},'dpnBX':function(_0x42c830,_0x2aa2c9){return _0x42c830!==_0x2aa2c9;},'CTuVq':function(_0x28a2d9){return _0x28a2d9();},'qjlLj':function(_0x490ae8,_0x4d591b){return _0x490ae8(_0x4d591b);},'buUUf':function(_0x1fa101,_0x84ad18){return _0x1fa101+_0x84ad18;},'JxExc':function(_0x3ad640){return _0x3ad640();},'cbRZh':'cucumber'};let _0x52a4e5;if(_0x4c34a9[_0x2aaa46(0xfe)](process[_0x2aaa46(0x123)][_0x2aaa46(0x144)],undefined)){const _0x3f6f07=JSON['parse'](process[_0x2aaa46(0x123)][_0x2aaa46(0x144)]);_0x52a4e5=_0x3f6f07[_0x2aaa46(0x14d)];}_0x4c34a9[_0x2aaa46(0xc3)](_0x52a4e5,undefined)&&_0x4c34a9[_0x2aaa46(0x124)](isBrowserstackInfra)&&(global[_0x2aaa46(0xce)]=_0x4c34a9[_0x2aaa46(0xf2)](getPlatformName,_0x52a4e5),this[_0x2aaa46(0x82)](_0x4c34a9[_0x2aaa46(0x12e)](_0x2aaa46(0xbd)+global['__platform'],'\x0a'))),_0x4c34a9[_0x2aaa46(0xa6)](shouldProcessEventForTesthub)&&(TestDetails[_0x2aaa46(0xc8)](),this[_0x2aaa46(0xa4)][_0x2aaa46(0x134)]=_0x369b18,BrowserstackCLI[_0x2aaa46(0x86)]()['isCliEnabled']()&&await this['isCLIReady']()&&(TestInfo[_0x2aaa46(0xc8)](_0x4c34a9[_0x2aaa46(0xdf)]),await BrowserstackCLI[_0x2aaa46(0x86)]()[_0x2aaa46(0x135)]()[_0x2aaa46(0x109)](TestFrameworkState['INIT_TEST'],HookState[_0x2aaa46(0xa7)],{})));}['onTestRunFinished'](_0x1cc93f){const _0x49e1bb=a6_0x50785f;this['report'][_0x49e1bb(0x125)]=_0x1cc93f,this[_0x49e1bb(0xb5)](_0x1cc93f);}async[a6_0x50785f(0xfc)](_0x114647,_0x21d3aa,_0x22cdf0){const _0x11a03a=a6_0x50785f,_0x3cbc6c={'colQA':function(_0x530ef2,_0x1189fa){return _0x530ef2(_0x1189fa);},'hsDkd':_0x11a03a(0xea),'WsEaB':function(_0x11c462,_0x141595){return _0x11c462&&_0x141595;}};testSuites+=0x1;if(_0x3cbc6c[_0x11a03a(0xba)](shouldProcessEventForTesthub,_0x3cbc6c[_0x11a03a(0xc5)]))try{this[_0x11a03a(0xa4)][_0x11a03a(0x13c)]=this['report'][_0x11a03a(0x13c)]||{},this[_0x11a03a(0xa4)]['testCaseStarted'][_0x114647['id']]=_0x114647;let _0x55ea27=null;BrowserstackCLI['getInstance']()[_0x11a03a(0xd0)]()&&await this['isCLIReady']()?_0x55ea27=TestInfo[_0x11a03a(0xad)](_0x114647['id']):_0x55ea27=TestDetails[_0x11a03a(0xad)](_0x114647['id']);_testCasesData[_0x114647['id']]=Object[_0x11a03a(0xa3)]({},_0x22cdf0);const _0x50e0e4=this[_0x11a03a(0xa4)],_0x1e72d3=_0x114647[_0x11a03a(0x133)],_0x32c971=_0x50e0e4[_0x11a03a(0x119)][_0x11a03a(0xd9)](_0x5b5893=>_0x5b5893['id']===_0x1e72d3)[_0x11a03a(0x127)],_0x12da7a=_0x50e0e4[_0x11a03a(0x12f)][_0x11a03a(0xd9)](_0x59303b=>_0x59303b['id']===_0x32c971),_0x1a35a2=_0x50e0e4[_0x11a03a(0x138)]['find'](_0x553a5c=>_0x553a5c['uri']===_0x12da7a[_0x11a03a(0xb9)]),_0x949d36=_0x1a35a2[_0x11a03a(0x131)],_0x2fe7b3={'uuid':_0x55ea27,'startedAt':new Date()[_0x11a03a(0xe9)]()};if(_0x12da7a){const _0x604c9={};_0x604c9[_0x11a03a(0xb1)]=_0x12da7a[_0x11a03a(0xb1)],_0x2fe7b3[_0x11a03a(0x10a)]=_0x604c9;}if(_0x3cbc6c[_0x11a03a(0xf3)](_0x1a35a2,_0x949d36)){const _0x61987a={};_0x61987a[_0x11a03a(0x126)]=_0x1a35a2[_0x11a03a(0xb9)],_0x61987a[_0x11a03a(0xb1)]=_0x949d36[_0x11a03a(0xb1)],_0x61987a['description']=_0x949d36['description'],_0x2fe7b3[_0x11a03a(0x131)]=_0x61987a;}_tests[_0x1e72d3]=_0x2fe7b3;if(BrowserstackCLI[_0x11a03a(0x86)]()[_0x11a03a(0xd0)]()&&await this[_0x11a03a(0x112)]()){const _0x50e003=await cucumberUtils[_0x11a03a(0xda)](_0x2fe7b3,_0x12da7a,_0x22cdf0,_0x1a35a2,_0x114647['id'],_0x3cbc6c[_0x11a03a(0xc5)]),_0x383e69={};_0x383e69[_0x11a03a(0x11d)]=_0x50e003,await BrowserstackCLI['getInstance']()[_0x11a03a(0x135)]()[_0x11a03a(0x109)](TestFrameworkState['TEST'],HookState[_0x11a03a(0xa7)],_0x383e69);return;}await testObservabilityReporter[_0x11a03a(0x102)](_0x22cdf0,_0x1a35a2,_0x12da7a,_0x3cbc6c[_0x11a03a(0xc5)],_0x2fe7b3);}catch(_0xd8d8ef){logger['debug'](_0x11a03a(0x10b)+util[_0x11a03a(0xe7)](_0xd8d8ef)+'\x20');}}async[a6_0x50785f(0x99)](_0x14d882,_0x17830c,_0x48b13d){const _0x4c6a31=a6_0x50785f,_0x3758d0={'bFGkB':function(_0x5d585f,_0x2d063f){return _0x5d585f(_0x2d063f);},'uSHPR':_0x4c6a31(0x9a),'NLTMR':_0x4c6a31(0x11d)};this[_0x4c6a31(0x103)](_0x14d882);if(_0x3758d0[_0x4c6a31(0xac)](shouldProcessEventForTesthub,_0x3758d0[_0x4c6a31(0xbf)]))try{this['report'][_0x4c6a31(0xa8)]=this['report']['testCaseFinished']||{},this['report'][_0x4c6a31(0xa8)][_0x14d882[_0x4c6a31(0x10d)]]=_0x14d882,_testCasesData[_0x48b13d['id']]=Object[_0x4c6a31(0xa3)]({},_0x48b13d);const _0x26f13c=_0x14d882['testCaseStartedId'],_0x22ed46=_0x17830c['eventDataCollector'][_0x4c6a31(0x148)][_0x26f13c]['testCaseId'],_0xfe2a2=_0x17830c[_0x4c6a31(0x115)]['testCaseMap'][_0x22ed46],_0xe23079=_0xfe2a2[_0x4c6a31(0x127)],_0x2e8827=_0x17830c[_0x4c6a31(0x115)]['pickleMap'][_0xe23079],_0x2965dd=this[_0x4c6a31(0x147)](_0x17830c,_0x2e8827),_0x484995=_0x2965dd[_0x4c6a31(0x131)],_0x3da7c2=_tests[_0x22ed46];_0x3da7c2&&(delete _tests[_0x22ed46],_0x3da7c2['finishedAt']=new Date()['toISOString']());if(BrowserstackCLI[_0x4c6a31(0x86)]()[_0x4c6a31(0xd0)]()&&await this[_0x4c6a31(0x112)]()){const _0x2a1563=await cucumberUtils[_0x4c6a31(0xda)](_0x3da7c2,_0x2e8827,_0x48b13d,_0x2965dd,_0x26f13c,_0x3758d0['uSHPR']),_0x3d1ee0={};_0x3d1ee0[_0x4c6a31(0x11d)]=_0x2a1563,await BrowserstackCLI['getInstance']()[_0x4c6a31(0x135)]()[_0x4c6a31(0x109)](TestFrameworkState[_0x4c6a31(0x140)],HookState['POST'],_0x3d1ee0);const _0x588c1e={};_0x588c1e[_0x4c6a31(0xfa)]=_0x14d882[_0x4c6a31(0x10d)],_0x588c1e[_0x4c6a31(0xeb)]=_0x3758d0['NLTMR'],await BrowserstackCLI[_0x4c6a31(0x86)]()[_0x4c6a31(0x135)]()[_0x4c6a31(0x109)](TestFrameworkState[_0x4c6a31(0xe5)],HookState[_0x4c6a31(0x9f)],_0x588c1e);return;}await testObservabilityReporter[_0x4c6a31(0x102)](_0x48b13d,_0x2965dd,_0x2e8827,_0x3758d0['uSHPR'],_0x3da7c2);}catch(_0x49dc33){logger[_0x4c6a31(0x9e)]('Exception\x20in\x20sending\x20onTestCaseFinished\x20event:\x20\x20'+util[_0x4c6a31(0xe7)](_0x49dc33));}}async[a6_0x50785f(0xd8)](_0x445a7c,_0x3d3508){const _0x1e5264=a6_0x50785f,_0x1739fe={'DrERn':function(_0x2cf192,_0x255ccd){return _0x2cf192(_0x255ccd);},'HaPoD':_0x1e5264(0xdc),'RwBhh':function(_0x1c02b3,_0x27c60d){return _0x1c02b3!==_0x27c60d;},'isITY':'testStepId'};if(_0x1739fe['DrERn'](shouldProcessEventForTesthub,_0x1739fe[_0x1e5264(0x12b)]))try{this['report'][_0x1e5264(0x10f)]=this[_0x1e5264(0xa4)][_0x1e5264(0x10f)]||{},this['report'][_0x1e5264(0x10f)][_0x445a7c['testCaseStartedId']]=_0x445a7c;const _0x57aa9e=_0x445a7c[_0x1e5264(0x10d)],_0x4c90ed=_0x3d3508[_0x1e5264(0x115)][_0x1e5264(0x148)][_0x57aa9e]['testCaseId'],_0x336149=this[_0x1e5264(0xa4)][_0x1e5264(0x119)]['find'](_0x2f9f04=>_0x2f9f04['id']===_0x4c90ed)[_0x1e5264(0x127)],_0x4e201b=this[_0x1e5264(0xa4)][_0x1e5264(0x12f)]['find'](_0x43fc79=>_0x43fc79['id']===_0x336149),_0x567fda=this[_0x1e5264(0xa4)][_0x1e5264(0x119)][_0x1e5264(0xd9)](_0x3381f7=>_0x3381f7['id']===_0x4c90ed)['testSteps'],_0x1a4dd9=this[_0x1e5264(0xa4)][_0x1e5264(0x10f)][_0x57aa9e][_0x1e5264(0x8f)],_0x4cac3b=_0x567fda[_0x1e5264(0xd9)](_0xcbb65d=>_0xcbb65d['id']===_0x1a4dd9)[_0x1e5264(0xec)],_0x1ba31a=_0x4e201b[_0x1e5264(0x136)][_0x1e5264(0xd9)](_0x3898a0=>_0x3898a0['id']===_0x4cac3b);if(_0x4cac3b&&_tests[_0x4c90ed]&&_0x1739fe[_0x1e5264(0xe4)](_tests[_0x4c90ed][_0x1739fe[_0x1e5264(0x146)]],_0x1a4dd9)){_tests[_0x4c90ed][_0x1739fe[_0x1e5264(0x146)]]=_0x1a4dd9;const _0x5a602e={};_0x5a602e[_0x1e5264(0x136)]=[];const _0x507bdf=_tests[_0x4c90ed]||_0x5a602e;_0x507bdf&&!_0x507bdf[_0x1e5264(0x136)]&&(_0x507bdf[_0x1e5264(0x136)]=[]),_0x507bdf['steps']['push']({'id':_0x1ba31a['id'],'text':_0x1ba31a['text'],'started_at':new Date()[_0x1e5264(0xe9)]()}),_tests[_0x4c90ed]=_0x507bdf;}if(BrowserstackCLI[_0x1e5264(0x86)]()[_0x1e5264(0xd0)]()&&await this[_0x1e5264(0x112)]()){const _0x37cbfb=await cucumberUtils['createHookData'](this[_0x1e5264(0xa4)],_0x57aa9e,_0x1739fe[_0x1e5264(0x12b)],_0x567fda,_0x1a4dd9,_tests[_0x4c90ed]);_0x37cbfb&&await BrowserstackCLI[_0x1e5264(0x86)]()[_0x1e5264(0x135)]()[_0x1e5264(0x109)](TestFrameworkState[_0x37cbfb['hook_type']],HookState['PRE'],{'hookData':_0x37cbfb,'testUUID':_0x445a7c[_0x1e5264(0x10d)]});return;}await testObservabilityReporter['sendHook'](this['report'],_0x57aa9e,_0x1739fe['HaPoD'],_0x567fda,_0x1a4dd9,_tests[_0x4c90ed]);}catch(_0x31c190){logger['debug']('Exception\x20in\x20onTestStepStarted\x20event:\x20'+util[_0x1e5264(0xe7)](_0x31c190));}}async[a6_0x50785f(0xb8)](_0x4c57cd,_0x39f2e7){const _0x500ff5=a6_0x50785f,_0x315065={'WxtZm':function(_0x287470,_0x31bbb4){return _0x287470===_0x31bbb4;},'MKfoV':_0x500ff5(0x14b),'YhtcA':function(_0x9ad1d5,_0x4b1902){return _0x9ad1d5(_0x4b1902);},'FplUQ':_0x500ff5(0xff),'FUjAC':function(_0x1e75ce,_0x25324c){return _0x1e75ce===_0x25324c;},'VMdMf':_0x500ff5(0x132),'ODiCB':function(_0x295995,_0x3d5f6c){return _0x295995===_0x3d5f6c;},'AirZp':function(_0x53691c,_0x2d9498){return _0x53691c===_0x2d9498;},'PTAbA':_0x500ff5(0x10c),'TUGZm':_0x500ff5(0x8f),'ETApp':'HookRunStarted','uDKas':'hook'};this[_0x500ff5(0xa4)][_0x500ff5(0xbe)]=this[_0x500ff5(0xa4)]['testStepFinished']||{},this['report'][_0x500ff5(0xbe)][_0x4c57cd[_0x500ff5(0x10d)]]=_0x4c57cd;if(_0x315065[_0x500ff5(0x13a)](shouldProcessEventForTesthub,_0x315065[_0x500ff5(0xcd)]))try{const _0x2baadf=_0x4c57cd[_0x500ff5(0x10d)],_0x81ad4e=_0x39f2e7[_0x500ff5(0x115)][_0x500ff5(0x148)][_0x2baadf][_0x500ff5(0x133)],_0x5d6e91=_0x39f2e7['eventDataCollector']['testCaseMap'][_0x81ad4e],_0x2c6e7d=_0x5d6e91[_0x500ff5(0x127)],_0x55f14a=_0x39f2e7[_0x500ff5(0x115)][_0x500ff5(0xc1)][_0x2c6e7d],_0x484396=_0x4c57cd[_0x500ff5(0x8f)],_0x39f465=_0x5d6e91['testSteps'],_0x1b2cae=this[_0x500ff5(0x115)][_0x500ff5(0x8b)](_0x2baadf),_0x40e632=_0x39f465[_0x500ff5(0xd9)](_0x128717=>_0x128717['id']===_0x484396)[_0x500ff5(0xec)];let _0xefa204,_0x26c2f0;_0x4c57cd[_0x500ff5(0x13f)]&&_0x315065[_0x500ff5(0x130)](_0x4c57cd[_0x500ff5(0x13f)][_0x500ff5(0x9d)]['toString']()['toLowerCase'](),_0x315065[_0x500ff5(0xd3)])&&(_0xefa204=_0x315065['ODiCB'](_0x4c57cd[_0x500ff5(0x13f)]['exception'],undefined)?_0x4c57cd['testStepResult'][_0x500ff5(0x104)]:_0x4c57cd[_0x500ff5(0x13f)][_0x500ff5(0x94)][_0x500ff5(0x104)],_0x26c2f0=_0x315065[_0x500ff5(0xed)](_0x4c57cd[_0x500ff5(0x13f)][_0x500ff5(0x94)],undefined)?_0x315065[_0x500ff5(0x105)]:_0x4c57cd['testStepResult'][_0x500ff5(0x104)]);if(_0x40e632&&_tests[_0x81ad4e][_0x315065[_0x500ff5(0xb7)]]){const _0x4c0b89=_0x55f14a[_0x500ff5(0x136)]['find'](_0x58b29d=>_0x58b29d['id']===_0x40e632),_0x5c86e1={};_0x5c86e1['steps']=[];const _0x51423c=_tests[_0x81ad4e]||_0x5c86e1;!_0x51423c[_0x500ff5(0x136)]?_0x51423c['steps']=[{'id':_0x4c0b89['id'],'text':_0x4c0b89[_0x500ff5(0xa0)],'finished_at':new Date()[_0x500ff5(0xe9)](),'result':_0x4c57cd[_0x500ff5(0x13f)]['status'],'duration':_0x4c57cd['testStepResult'][_0x500ff5(0x128)]['seconds'],'failure':_0xefa204,'failureType':_0x26c2f0}]:_0x51423c[_0x500ff5(0x136)][_0x500ff5(0x14a)](_0x39171a=>{const _0x426b51=_0x500ff5;if(_0x315065[_0x426b51(0xaa)](_0x39171a['id'],_0x4c0b89['id'])){const _0x1713c4=_0x315065[_0x426b51(0x11f)][_0x426b51(0xa9)]('|');let _0x3cfe70=0x0;while(!![]){switch(_0x1713c4[_0x3cfe70++]){case'0':_0x39171a[_0x426b51(0x128)]=_0x4c57cd['testStepResult'][_0x426b51(0x128)][_0x426b51(0x142)];continue;case'1':_0x39171a[_0x426b51(0xee)]=_0x26c2f0;continue;case'2':_0x39171a[_0x426b51(0xe8)]=new Date()['toISOString']();continue;case'3':_0x39171a[_0x426b51(0x8d)]=_0x4c57cd[_0x426b51(0x13f)][_0x426b51(0x9d)];continue;case'4':_0x39171a[_0x426b51(0xb3)]=_0xefa204;continue;}break;}}}),_tests[_0x81ad4e]=_0x51423c;}delete _tests[_0x81ad4e][_0x315065[_0x500ff5(0xb7)]];if(BrowserstackCLI[_0x500ff5(0x86)]()[_0x500ff5(0xd0)]()&&await this[_0x500ff5(0x112)]()){const _0x53ba0b=await cucumberUtils[_0x500ff5(0x81)](this['report'],_0x2baadf,_0x315065['ETApp'],_0x39f465,_0x484396,_tests[_0x81ad4e]);if(_0x53ba0b){await BrowserstackCLI[_0x500ff5(0x86)]()[_0x500ff5(0x135)]()[_0x500ff5(0x109)](TestFrameworkState[_0x53ba0b[_0x500ff5(0x122)]],HookState[_0x500ff5(0x9f)],{'hookData':_0x53ba0b,'testUUID':_0x4c57cd[_0x500ff5(0x10d)]});const _0x4a51b6={};_0x4a51b6['testUUID']=_0x4c57cd[_0x500ff5(0x10d)],_0x4a51b6[_0x500ff5(0xeb)]=_0x315065['uDKas'],await BrowserstackCLI[_0x500ff5(0x86)]()[_0x500ff5(0x135)]()[_0x500ff5(0x109)](TestFrameworkState['LOG_REPORT'],HookState[_0x500ff5(0x9f)],_0x4a51b6);}return;}await testObservabilityReporter['sendHook'](this[_0x500ff5(0xa4)],_0x2baadf,_0x315065[_0x500ff5(0xcd)],_0x39f465,_0x484396,_tests[_0x81ad4e]);}catch(_0x1af3c8){logger[_0x500ff5(0x9e)](_0x500ff5(0xd6)+util['format'](_0x1af3c8));}}[a6_0x50785f(0xb6)](_0x3b95cb){const _0x4055cb=a6_0x50785f,_0x5e0e72={};return _0x3b95cb[_0x4055cb(0x131)]['children']['map'](this[_0x4055cb(0x13e)])[_0x4055cb(0x114)]()['forEach'](_0x774d5d=>_0x774d5d['steps'][_0x4055cb(0x14a)](_0x26d47e=>_0x5e0e72[_0x26d47e['id']]=_0x26d47e)),_0x5e0e72;}[a6_0x50785f(0x13e)](_0x525e9d){const _0x4ceb6b=a6_0x50785f,_0x258ba3={'ZNvUL':function(_0x48d60c,_0x363d72){return _0x48d60c(_0x363d72);}};if(!_0x258ba3[_0x4ceb6b(0xd7)](isUndefined,_0x525e9d[_0x4ceb6b(0x116)]))return[_0x525e9d['background']];else{if(!_0x258ba3[_0x4ceb6b(0xd7)](isUndefined,_0x525e9d[_0x4ceb6b(0x107)]))return _0x525e9d[_0x4ceb6b(0x107)][_0x4ceb6b(0x84)][_0x4ceb6b(0x152)](_0xee6298=>!isUndefined(_0xee6298['background'])?_0xee6298[_0x4ceb6b(0x116)]:_0xee6298[_0x4ceb6b(0x10a)]);};return[_0x525e9d[_0x4ceb6b(0x10a)]];}[a6_0x50785f(0x147)](_0x125ac3,_0x439bf8){const _0x5f228a=a6_0x50785f;return Object[_0x5f228a(0x113)](_0x125ac3['eventDataCollector'][_0x5f228a(0xc4)])['find'](_0x1541a7=>_0x1541a7['uri']===_0x439bf8[_0x5f228a(0xb9)]);}async[a6_0x50785f(0xc0)](){const _0x5c366b=a6_0x50785f;if(this[_0x5c366b(0xcc)])return this[_0x5c366b(0xcc)];return this[_0x5c366b(0xcc)]=this['_performCLIInitialization'](),this[_0x5c366b(0xcc)];}async[a6_0x50785f(0xf0)](){const _0x3cb8b0=a6_0x50785f,_0x2e549f={'GHJbx':'No\x20BROWSERSTACK_CLI_BIN_SESSION_ID\x20found,\x20CLI\x20not\x20available','hoDWJ':function(_0x144a5c,_0x4acee4){return _0x144a5c(_0x4acee4);},'tWHtN':'../../v2/cliUtils','NlbaM':_0x3cb8b0(0xf6)};try{const _0x5a96ce=BrowserstackCLI[_0x3cb8b0(0x86)]();if(_0x5a96ce[_0x3cb8b0(0xae)]())return logger[_0x3cb8b0(0x9e)](_0x3cb8b0(0x88)+_0x5a96ce[_0x3cb8b0(0xf5)]),!![];const _0x513e93=process['env'][_0x3cb8b0(0x101)];if(!_0x513e93)return logger[_0x3cb8b0(0x9e)](_0x2e549f[_0x3cb8b0(0x141)]),![];const _0x195e04=_0x2e549f[_0x3cb8b0(0x117)](require,_0x2e549f[_0x3cb8b0(0x11c)]),{FRAMEWORKS:_0x5adb1f}=_0x2e549f[_0x3cb8b0(0x117)](require,_0x2e549f[_0x3cb8b0(0x10e)]);return _0x195e04['setFrameworkDetail'](_0x5adb1f[_0x3cb8b0(0x149)],_0x5adb1f[_0x3cb8b0(0x89)]),logger[_0x3cb8b0(0x9e)](_0x3cb8b0(0x143)+_0x513e93),await _0x5a96ce['bootstrap'](),logger[_0x3cb8b0(0x9e)](_0x3cb8b0(0x110)+_0x5a96ce[_0x3cb8b0(0xae)]()+',\x20binSessionId:\x20'+_0x5a96ce[_0x3cb8b0(0xf5)]),_0x5a96ce[_0x3cb8b0(0xae)]();}catch(_0x4b5c80){return logger[_0x3cb8b0(0x9e)]('Error\x20initializing\x20CLI\x20in\x20formatter:\x20'+util[_0x3cb8b0(0xe7)](_0x4b5c80)),![];}}async[a6_0x50785f(0x112)](){const _0x4e897f=a6_0x50785f;try{return await this[_0x4e897f(0xc0)](),BrowserstackCLI[_0x4e897f(0x86)]()[_0x4e897f(0xae)]();}catch(_0xabb5c1){return logger['debug'](_0x4e897f(0x13d)+util[_0x4e897f(0xe7)](_0xabb5c1)),![];}}}module[a6_0x50785f(0x121)]=o11yClassErrorHandler(BrowserstackFormatter,[a6_0x50785f(0xfc),'onTestCaseFinished',a6_0x50785f(0xd8),'onTestStepFinished',a6_0x50785f(0x129),'onTestRunFinished',a6_0x50785f(0x13e),'getGherkinDocument',a6_0x50785f(0xb6)]);function a6_0x2df6(_0x4da8f6,_0x447156){const _0x14f7e3=a6_0x14f7();return a6_0x2df6=function(_0x2df6ca,_0x5e0115){_0x2df6ca=_0x2df6ca-0x80;let _0x4ccb89=_0x14f7e3[_0x2df6ca];return _0x4ccb89;},a6_0x2df6(_0x4da8f6,_0x447156);}function a6_0x14f7(){const _0x63cf59=['background','hoDWJ','../../v2/state/hookState.js','testCases','gkQBL','../../v2/browserstackCLI.js','tWHtN','test','rHjTR','MKfoV','EHEDk','exports','hook_type','env','CTuVq','testRunFinished','path','pickleId','duration','onTestRunStarted','isBstackHook','HaPoD','5jKCQbC','../../../helpers/testhub/utils.js','buUUf','pickle','FUjAC','feature','failed','testCaseId','testRunStarted','getTestFramework','steps','UNDEFINED','gherkinDocument','SKIPPED','YhtcA','ygqKr','testCaseStarted','isCLIReady:\x20Error\x20checking\x20CLI\x20readiness:\x20','extractStepContainers','testStepResult','TEST','GHJbx','seconds','Bootstrapping\x20CLI\x20in\x20formatter\x20with\x20binSessionId:\x20','CONFIG','eventBroadcaster','isITY','getGherkinDocument','testCaseAttemptDataMap','CUCUMBER','forEach','2|3|0|4|1','UfSHz','capability','hooks','push','KXhvM','../../../helpers/logger','map','849632iNdosL','createHookData','log','QAsBB','children','FAILED','getInstance','HlUXq','CLI\x20already\x20running\x20-\x20binSessionId:\x20','PLAYWRIGHT','hook','getTestCaseAttempt','PfakB','result','envelope','testStepId','\x20-\x20','rFOPi','PqWjZ','HPeCx','exception','parseTestCaseAttempt','dTfko','snippetBuilder','XHLsO','onTestCaseFinished','TestRunFinished','18NtmqnW','onTestCase','status','debug','POST','text','source','@cucumber/cucumber','assign','report','1eoDUdk','JxExc','PRE','testCaseFinished','split','WxtZm','\x20\x20\x20\x20','bFGkB','getTestUUID','isRunning','stepDefinition','hNqWK','name','2895500lvXLOJ','failure','307896EDJTGb','logTestRunFinished','getGherkinStepMap','TUGZm','onTestStepFinished','uri','colQA','KVUGY','OjPCj','Executing\x20tests\x20for\x20','testStepFinished','uSHPR','ensureCLIInitialized','pickleMap','1985340dLxtIu','dpnBX','gherkinDocumentMap','hsDkd','JNfGp','UNKNOWN','setup','winstonLogger','17250519vxQDjd','jOuWK','cliInitPromise','FplUQ','__platform','1903223yMnQAi','isCliEnabled','keyword','supportCodeLibrary','VMdMf','Yylyp','util','Exception\x20in\x20onTestStepFinished\x20event:\x20','ZNvUL','onTestStepStarted','find','createTestFrameworkData','6tBMQcG','HookRunStarted','testCaseAttempt','onHook','cbRZh','ipQSG','cyLNO','jaQjA','1585468aHlBSP','RwBhh','LOG_REPORT','PASSED','format','finished_at','toISOString','TestRunStarted','type','pickleStepId','AirZp','failureType','incrementCounter','_performCLIInitialization','onStepDefinition','qjlLj','WsEaB','onGherkinDocument','binSessionId','../../utils/constants','../../../bin/v2/TestInfo.js','cucumber-js/test.setup.js','FWLYi','testUUID','tDnOM','onTestCaseStarted','../../../helpers/test-observability/error-handler','iiBgv','HookRunFinished','includes','BROWSERSTACK_CLI_BIN_SESSION_ID','sendTestRunEventForCucumber','logTestCaseFinished','message','PTAbA','testCase','rule','onPickle','trackEvent','scenario','Exception\x20in\x20sending\x20onTestCaseStarted:\x20','UnhandledError','testCaseStartedId','NlbaM','testStepStarted','CLI\x20bootstrap\x20completed\x20-\x20isRunning:\x20','IAPLw','isCLIReady','values','flat','eventDataCollector'];a6_0x14f7=function(){return _0x63cf59;};return a6_0x14f7();}