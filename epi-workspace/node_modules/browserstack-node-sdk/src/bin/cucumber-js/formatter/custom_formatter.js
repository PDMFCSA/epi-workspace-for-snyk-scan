const a6_0x58194d=a6_0x261e;(function(_0x14c6a7,_0x5b02ee){const _0x45b2a6=a6_0x261e,_0x1a1100=_0x14c6a7();while(!![]){try{const _0x4080b7=-parseInt(_0x45b2a6(0x289))/0x1*(parseInt(_0x45b2a6(0x2a1))/0x2)+parseInt(_0x45b2a6(0x251))/0x3*(-parseInt(_0x45b2a6(0x2c3))/0x4)+-parseInt(_0x45b2a6(0x28e))/0x5+-parseInt(_0x45b2a6(0x23a))/0x6+parseInt(_0x45b2a6(0x20d))/0x7*(-parseInt(_0x45b2a6(0x242))/0x8)+-parseInt(_0x45b2a6(0x22d))/0x9+parseInt(_0x45b2a6(0x284))/0xa;if(_0x4080b7===_0x5b02ee)break;else _0x1a1100['push'](_0x1a1100['shift']());}catch(_0x597070){_0x1a1100['push'](_0x1a1100['shift']());}}}(a6_0x4b72,0x4f0e9));const {requireModule,getPlatformName,nestedKeyValue,isUndefined,isBrowserstackInfra}=require(a6_0x58194d(0x1ff)),util=require(a6_0x58194d(0x20e)),{Formatter,formatterHelpers,Status}=requireModule(a6_0x58194d(0x2b0)),TestDetails=require(a6_0x58194d(0x23b)),TestObservabilityReporter=require(a6_0x58194d(0x240)),{o11yClassErrorHandler}=require(a6_0x58194d(0x255)),{shouldProcessEventForTesthub}=require('../../../helpers/testhub/utils.js'),BrowserstackCLI=require('../../v2/browserstackCLI.js'),TestFrameworkState=require(a6_0x58194d(0x295)),HookState=require(a6_0x58194d(0x26f)),CucumberUtils=require(a6_0x58194d(0x2bc)),TestInfo=require(a6_0x58194d(0x292)),testObservabilityReporter=new TestObservabilityReporter(),cucumberUtils=new CucumberUtils(),logger=require('../../../helpers/logger')['winstonLogger'],_tests={},_testCasesData={};function a6_0x4b72(){const _0x38be08=['46108mZujpi','includes','Bootstrapping\x20CLI\x20in\x20formatter\x20with\x20binSessionId:\x20','BJSaX','hook','keyword','eVxyT','qPuez','sendTestRunEventForCucumber','actionLocation','PLAYWRIGHT','aIxpE','Error\x20initializing\x20CLI\x20in\x20formatter:\x20','UNDEFINED','BdfdX','@cucumber/cucumber','format','pickle','FALDb','capability','dDlxH','GRpci','testCaseStartedId','finished_at','cVyiX','FXRwM','onPickle','../../v2/utils/cucumber-utils.js','description','FfMWU','gherkinDocument','eNgRw','assign','CUCUMBER','316520POhMid','isCLIReady','eventDataCollector','envelope','cliInitPromise','getTestUUID','map','snippetBuilder','_performCLIInitialization','sendHook','onTestRunStarted','onTestRunFinished','debug','getTestFramework','trackEvent','exception','FMKsR','pickleStepId','../../../helpers/helper','ayBfR','AMBIGUOUS','etEsJ','message','cucumber','onGherkinDocument','testCases','testRunStarted','zPjMr','testCaseMap','rytmV','onTestStepFinished','scenario','7CYbWBF','util','Exception\x20in\x20onTestStepStarted\x20event:\x20','toISOString','lohma','tIOVo','LOG_REPORT','onTestCaseStarted','createTestFrameworkData','dzFtD','NIWAU','PNerE','type','getTestCaseAttempt','HookRunStarted','text','Exception\x20in\x20sending\x20onTestCaseFinished\x20event:\x20\x20','steps','duration','onHook','tLcmu','onStepDefinition','vXwKy','zCMVZ','feature','testCaseStarted','UnhandledError','name','../../v2/cliUtils','setup','log','PASSED','5059521dMtYgw','push','testCaseFinished','yKJbX','onTestCase','3|0|1|4|2','testStepStarted','testCaseAttemptDataMap','rule','CoVAs','Exception\x20in\x20onTestStepFinished\x20event:\x20','test','createHookData','2601072RocONy','../../playwright/reporter/test-details.js','onTestStepStarted','Exception\x20in\x20sending\x20onTestCaseStarted:\x20','POST','isBstackHook','../test-observability.js','find','5127392HiyJWu','finishedAt','PRE','WNJsa','testStepResult','tQxAT','ZqzXw','stepDefinition','cwd','testSteps','\x20\x20\x20\x20','YMikm','fpQhd','tMHla','seconds','6CAcpKV','isRunning','mbSrE','report','../../../helpers/test-observability/error-handler','background','CLI\x20bootstrap\x20completed\x20-\x20isRunning:\x20','qgiLa','binSessionId','HieCy','FAILED','CONFIG','getGherkinStepMap','SKIPPED','isCLIReady:\x20Error\x20checking\x20CLI\x20readiness:\x20','WeIkh','TEtok','getGherkinDocument','cucumber-js/test.setup.js',',\x20binSessionId:\x20','bootstrap','jmmTn','TestRunStarted','result','ensureCLIInitialized','INIT_TEST','AjZhw','UQQkF','onTestCaseFinished','pAaPG','../../v2/state/hookState.js','env','lEPop','forEach','testCaseId','../../utils/constants','uri','gherkinDocumentMap','__platform','isCliEnabled','iHgDC','YUMnr','failure','children','bstack','CLI\x20already\x20running\x20-\x20binSessionId:\x20','xbFKP','pickleMap','wkSLL','No\x20BROWSERSTACK_CLI_BIN_SESSION_ID\x20found,\x20CLI\x20not\x20available','testRunFinished','31001130ksFTjf','flat','slwqr','logTestCaseFinished','hooks','17nqFjGd','pIGeK','hook_type','parseTestCaseAttempt','Executing\x20tests\x20for\x20','2947565uWEpbl','eventBroadcaster','testStepFinished','getInstance','../../../bin/v2/TestInfo.js','aeyQB','testCase','../../v2/state/testFrameworkState.js','yAgMS','status','extractStepContainers','toLowerCase','incrementCounter','UNKNOWN','pickleId','path','testStepId','TEST','dtJtR'];a6_0x4b72=function(){return _0x38be08;};return a6_0x4b72();}class BrowserstackFormatter extends Formatter{constructor(_0x4c927f){const _0x490b21=a6_0x58194d,_0x4099be={};_0x4099be[_0x490b21(0x27f)]=_0x490b21(0x2c6);const _0x17db6f=_0x4099be;super(_0x4c927f),this[_0x490b21(0x254)]={},_0x4c927f[_0x490b21(0x28f)]['on'](_0x17db6f['xbFKP'],async _0x35fa00=>{const _0x3d2e45=_0x490b21;switch(!![]){case!!_0x35fa00[_0x3d2e45(0x207)]:this[_0x3d2e45(0x1f7)](_0x35fa00['testRunStarted']);break;case!!_0x35fa00[_0x3d2e45(0x283)]:this[_0x3d2e45(0x1f8)](_0x35fa00['testRunFinished']);break;case!!_0x35fa00[_0x3d2e45(0x226)]:this['onTestCaseStarted'](_0x35fa00[_0x3d2e45(0x226)],_0x4c927f,_0x35fa00);break;case!!_0x35fa00['testCaseFinished']:this[_0x3d2e45(0x26d)](_0x35fa00[_0x3d2e45(0x22f)],_0x4c927f,_0x35fa00);break;case!!_0x35fa00['testStepStarted']:this[_0x3d2e45(0x23c)](_0x35fa00[_0x3d2e45(0x233)],_0x4c927f);break;case!!_0x35fa00[_0x3d2e45(0x290)]:this['onTestStepFinished'](_0x35fa00[_0x3d2e45(0x290)],_0x4c927f);break;case!!_0x35fa00[_0x3d2e45(0x2a5)]:this[_0x3d2e45(0x220)](_0x35fa00[_0x3d2e45(0x2a5)]);break;case!!_0x35fa00[_0x3d2e45(0x294)]:this[_0x3d2e45(0x231)](_0x35fa00[_0x3d2e45(0x294)]);break;case!!_0x35fa00[_0x3d2e45(0x2b2)]:this[_0x3d2e45(0x2bb)](_0x35fa00[_0x3d2e45(0x2b2)]);break;case!!_0x35fa00[_0x3d2e45(0x2bf)]:this[_0x3d2e45(0x205)](_0x35fa00[_0x3d2e45(0x2bf)]);break;}});}[a6_0x58194d(0x220)](_0x1f86a1){const _0x3f3a4d=a6_0x58194d;this['report'][_0x3f3a4d(0x288)]=Object[_0x3f3a4d(0x2c1)]([],this[_0x3f3a4d(0x254)][_0x3f3a4d(0x288)]||[]),this[_0x3f3a4d(0x254)]['hooks']['push'](_0x1f86a1);}[a6_0x58194d(0x2bb)](_0x166f9d){const _0x384c6e=a6_0x58194d;this[_0x384c6e(0x254)][_0x384c6e(0x2b2)]=Object[_0x384c6e(0x2c1)]([],this[_0x384c6e(0x254)][_0x384c6e(0x2b2)]||[],[_0x166f9d]),this[_0x384c6e(0x254)]['pickle'][_0x384c6e(0x22e)](_0x166f9d);}[a6_0x58194d(0x205)](_0x3f4daf){const _0x3ee308=a6_0x58194d;this[_0x3ee308(0x254)][_0x3ee308(0x2bf)]=Object[_0x3ee308(0x2c1)]([],this[_0x3ee308(0x254)]['gherkinDocument']||[],[_0x3f4daf]),this['report']['gherkinDocument'][_0x3ee308(0x22e)](_0x3f4daf);}['onSource'](_0x3b960e){const _0x2f0821=a6_0x58194d;this[_0x2f0821(0x254)]['source']=_0x3b960e;}[a6_0x58194d(0x222)](_0x41a5fc){const _0x2eae2c=a6_0x58194d;this['report'][_0x2eae2c(0x249)]=Object['assign']([],this[_0x2eae2c(0x254)]['stepDefinition']||[],[_0x41a5fc]),this[_0x2eae2c(0x254)][_0x2eae2c(0x249)]['push'](_0x41a5fc);}[a6_0x58194d(0x231)](_0x59acb2){const _0x5d353a=a6_0x58194d;this[_0x5d353a(0x254)][_0x5d353a(0x206)]=Object[_0x5d353a(0x2c1)]([],this[_0x5d353a(0x254)]['testCases']||[],[_0x59acb2]),this[_0x5d353a(0x254)]['testCases'][_0x5d353a(0x22e)](_0x59acb2);}[a6_0x58194d(0x287)](_0xfc6fb4){const _0xa0544a=a6_0x58194d,_0x259a0d={'etEsJ':function(_0x524aad,_0x203b6a){return _0x524aad!==_0x203b6a;},'jmmTn':_0xa0544a(0x27d),'fpQhd':function(_0x4b58a2,_0xcdfd9a){return _0x4b58a2+_0xcdfd9a;},'FXRwM':function(_0x12c1a7,_0x17ed41){return _0x12c1a7+_0x17ed41;},'lEPop':_0xa0544a(0x24c),'tLcmu':'\x20-\x20','vXwKy':function(_0x4e1ead,_0x49a280){return _0x4e1ead===_0x49a280;},'GRpci':_0xa0544a(0x25b),'BdfdX':function(_0x2f237b,_0x1401a4,_0x2f813b){return _0x2f237b(_0x1401a4,_0x2f813b);},'iHgDC':_0xa0544a(0x268),'tIOVo':_0xa0544a(0x203),'BJSaX':function(_0x1dd7c4,_0x367a83){return _0x1dd7c4+_0x367a83;},'pAaPG':function(_0x31ca60,_0xaa5862){return _0x31ca60+_0xaa5862;},'Xlzhm':function(_0x4b2bc9,_0x440bc7){return _0x4b2bc9+_0x440bc7;},'dDlxH':function(_0x510e2,_0x528aac){return _0x510e2+_0x528aac;},'TEtok':function(_0xc927b9,_0x378d99){return _0xc927b9+_0x378d99;},'YUMnr':function(_0x123210,_0x4dac8a){return _0x123210+_0x4dac8a;},'eVxyT':function(_0x498384,_0xdc85c5){return _0x498384+_0xdc85c5;},'ayBfR':function(_0x2c034b,_0x3408d2){return _0x2c034b+_0x3408d2;}};_0x259a0d[_0xa0544a(0x202)](global[_0xa0544a(0x277)],undefined)&&this[_0xa0544a(0x22b)](_0x259a0d[_0xa0544a(0x2b5)](_0x259a0d[_0xa0544a(0x261)]('\x0a',global[_0xa0544a(0x277)]),'\x0a'));const _0x3f7f62=this['eventDataCollector'][_0xa0544a(0x21a)](_0xfc6fb4[_0xa0544a(0x2b7)]);this[_0xa0544a(0x22b)](_0x259a0d[_0xa0544a(0x27a)](_0x259a0d[_0xa0544a(0x2a7)](_0x259a0d[_0xa0544a(0x200)](_0x259a0d[_0xa0544a(0x2ba)]('\x20\x20',_0x3f7f62[_0xa0544a(0x2bf)]['feature'][_0xa0544a(0x228)]),_0x259a0d[_0xa0544a(0x221)]),_0x3f7f62['pickle'][_0xa0544a(0x228)]),'\x0a'));const _0x27ac8b={};_0x27ac8b[_0xa0544a(0x24a)]=this['cwd'],_0x27ac8b['snippetBuilder']=this[_0xa0544a(0x1f4)],_0x27ac8b['supportCodeLibrary']=this['supportCodeLibrary'],_0x27ac8b['testCaseAttempt']=_0x3f7f62;const _0x469e93=formatterHelpers[_0xa0544a(0x28c)](_0x27ac8b);let _0x345d0b=![];_0x469e93[_0xa0544a(0x24b)]['forEach'](_0x2293a5=>{const _0x483676=_0xa0544a;if(_0x259a0d[_0x483676(0x202)](_0x2293a5['name'],_0x259a0d[_0x483676(0x266)])&&!this[_0x483676(0x23f)](_0x2293a5)){totalTests+=0x1,this[_0x483676(0x22b)](_0x259a0d['fpQhd'](_0x259a0d[_0x483676(0x24e)](_0x259a0d[_0x483676(0x2ba)](_0x259a0d[_0x483676(0x2ba)](_0x259a0d[_0x483676(0x2ba)](_0x259a0d[_0x483676(0x271)],_0x2293a5[_0x483676(0x2a6)]),_0x2293a5['text']||''),_0x259a0d[_0x483676(0x221)]),Status[_0x2293a5[_0x483676(0x268)]['status']]),'\x0a')),this[_0x483676(0x29a)](Status[_0x2293a5[_0x483676(0x268)][_0x483676(0x297)]]);if(_0x259a0d[_0x483676(0x223)](Status[_0x2293a5['result']['status']],_0x259a0d[_0x483676(0x2b6)])){_0x345d0b=!![];const _0x2c75c0=_0x259a0d[_0x483676(0x2af)](nestedKeyValue,_0x2293a5,[_0x259a0d[_0x483676(0x279)],_0x259a0d[_0x483676(0x212)]]);_0x2c75c0&&(testsErrorMessage[_0x259a0d[_0x483676(0x2a4)](_0x259a0d[_0x483676(0x26e)](_0x3f7f62[_0x483676(0x2bf)][_0x483676(0x225)][_0x483676(0x228)],_0x259a0d[_0x483676(0x221)]),_0x3f7f62['pickle'][_0x483676(0x228)])]=_0x2c75c0,this[_0x483676(0x22b)](_0x259a0d['Xlzhm'](_0x2c75c0,'\x0a')));}}}),_0x345d0b&&(testSuitesFailed+=0x1),this[_0xa0544a(0x22b)]('\x0a');}['logTestRunFinished'](_0x8d492f){}[a6_0x58194d(0x23f)](_0x4f26a8){const _0x55a5b1=a6_0x58194d,_0x908c3c={};_0x908c3c[_0x55a5b1(0x211)]=function(_0x1812c3,_0x404962){return _0x1812c3!==_0x404962;},_0x908c3c[_0x55a5b1(0x2be)]=_0x55a5b1(0x263);const _0x506d97=_0x908c3c;if(_0x506d97['lohma'](_0x4f26a8['sourceLocation'],undefined))return![];if(_0x4f26a8[_0x55a5b1(0x2aa)]&&_0x4f26a8[_0x55a5b1(0x2aa)][_0x55a5b1(0x275)][_0x55a5b1(0x2a2)](_0x506d97['FfMWU']))return!![];return![];}[a6_0x58194d(0x29a)](_0x3717c2){const _0x244ef7=a6_0x58194d,_0x36a81c={};_0x36a81c['ZqzXw']=_0x244ef7(0x25b),_0x36a81c[_0x244ef7(0x293)]=_0x244ef7(0x22c),_0x36a81c['WeIkh']=_0x244ef7(0x25e),_0x36a81c[_0x244ef7(0x1fd)]='PENDING',_0x36a81c[_0x244ef7(0x281)]=_0x244ef7(0x2ae),_0x36a81c['dzFtD']=_0x244ef7(0x29b),_0x36a81c[_0x244ef7(0x24d)]=_0x244ef7(0x201);const _0x1685c8=_0x36a81c;switch(_0x3717c2){case _0x1685c8[_0x244ef7(0x248)]:testsFailed+=0x1;break;case _0x1685c8[_0x244ef7(0x293)]:testsPassed+=0x1;break;case _0x1685c8[_0x244ef7(0x260)]:testsSkipped+=0x1;break;case _0x1685c8[_0x244ef7(0x1fd)]:testsPending+=0x1;break;case _0x1685c8[_0x244ef7(0x281)]:testsUndefined+=0x1;break;case _0x1685c8[_0x244ef7(0x216)]:testsUnknown+=0x1;break;case _0x1685c8[_0x244ef7(0x24d)]:testsAmbiguous+=0x1;break;default:break;}}async['onTestRunStarted'](_0x582fd2){const _0x36b423=a6_0x58194d,_0x3449da={'yYtQU':function(_0x13efca,_0xdb433e){return _0x13efca!==_0xdb433e;},'PKjDU':function(_0x2152e4,_0x2d2640){return _0x2152e4!==_0x2d2640;},'wqrqC':function(_0x353921){return _0x353921();},'yAgMS':function(_0x1a86d4,_0x33870d){return _0x1a86d4(_0x33870d);},'slwqr':function(_0x83626,_0x3116dd){return _0x83626+_0x3116dd;},'aIxpE':_0x36b423(0x204)};let _0x361ae3;if(_0x3449da['yYtQU'](process[_0x36b423(0x270)]['CONFIG'],undefined)){const _0x118535=JSON['parse'](process['env'][_0x36b423(0x25c)]);_0x361ae3=_0x118535[_0x36b423(0x2b4)];}_0x3449da['PKjDU'](_0x361ae3,undefined)&&_0x3449da['wqrqC'](isBrowserstackInfra)&&(global[_0x36b423(0x277)]=_0x3449da[_0x36b423(0x296)](getPlatformName,_0x361ae3),this['log'](_0x3449da[_0x36b423(0x286)](_0x36b423(0x28d)+global[_0x36b423(0x277)],'\x0a'))),_0x3449da['wqrqC'](shouldProcessEventForTesthub)&&(TestDetails['setup'](),this[_0x36b423(0x254)][_0x36b423(0x207)]=_0x582fd2,BrowserstackCLI[_0x36b423(0x291)]()['isCliEnabled']()&&await this[_0x36b423(0x2c4)]()&&(TestInfo[_0x36b423(0x22a)](_0x3449da[_0x36b423(0x2ac)]),await BrowserstackCLI[_0x36b423(0x291)]()[_0x36b423(0x1fa)]()[_0x36b423(0x1fb)](TestFrameworkState[_0x36b423(0x26a)],HookState[_0x36b423(0x244)],{})));}[a6_0x58194d(0x1f8)](_0x43d285){const _0x3c55a3=a6_0x58194d;this[_0x3c55a3(0x254)]['testRunFinished']=_0x43d285,this['logTestRunFinished'](_0x43d285);}async[a6_0x58194d(0x214)](_0x506399,_0x5dc753,_0x47f9c6){const _0x2c7fe7=a6_0x58194d,_0x18215d={'nvpjM':function(_0x49b6c6,_0x211a63){return _0x49b6c6(_0x211a63);},'zPjMr':_0x2c7fe7(0x267),'FALDb':function(_0x345fe3,_0x3935c3){return _0x345fe3&&_0x3935c3;}};testSuites+=0x1;if(_0x18215d['nvpjM'](shouldProcessEventForTesthub,_0x18215d['zPjMr']))try{this[_0x2c7fe7(0x254)][_0x2c7fe7(0x226)]=this[_0x2c7fe7(0x254)][_0x2c7fe7(0x226)]||{},this[_0x2c7fe7(0x254)]['testCaseStarted'][_0x506399['id']]=_0x506399;let _0x5560bc=null;BrowserstackCLI[_0x2c7fe7(0x291)]()[_0x2c7fe7(0x278)]()&&await this[_0x2c7fe7(0x2c4)]()?_0x5560bc=TestInfo[_0x2c7fe7(0x1f2)](_0x506399['id']):_0x5560bc=TestDetails[_0x2c7fe7(0x1f2)](_0x506399['id']);_testCasesData[_0x506399['id']]=Object[_0x2c7fe7(0x2c1)]({},_0x47f9c6);const _0x44f1e3=this[_0x2c7fe7(0x254)],_0x1039eb=_0x506399[_0x2c7fe7(0x273)],_0x44e004=_0x44f1e3['testCases']['find'](_0x3b7e41=>_0x3b7e41['id']===_0x1039eb)[_0x2c7fe7(0x29c)],_0x5b7f2a=_0x44f1e3[_0x2c7fe7(0x2b2)][_0x2c7fe7(0x241)](_0x5a8b6f=>_0x5a8b6f['id']===_0x44e004),_0x48e619=_0x44f1e3[_0x2c7fe7(0x2bf)][_0x2c7fe7(0x241)](_0x3f5093=>_0x3f5093[_0x2c7fe7(0x275)]===_0x5b7f2a[_0x2c7fe7(0x275)]),_0x5da209=_0x48e619[_0x2c7fe7(0x225)],_0x1be144={'uuid':_0x5560bc,'startedAt':new Date()[_0x2c7fe7(0x210)]()};if(_0x5b7f2a){const _0x24b18f={};_0x24b18f[_0x2c7fe7(0x228)]=_0x5b7f2a[_0x2c7fe7(0x228)],_0x1be144[_0x2c7fe7(0x20c)]=_0x24b18f;}if(_0x18215d[_0x2c7fe7(0x2b3)](_0x48e619,_0x5da209)){const _0x4979da={};_0x4979da[_0x2c7fe7(0x29d)]=_0x48e619[_0x2c7fe7(0x275)],_0x4979da[_0x2c7fe7(0x228)]=_0x5da209[_0x2c7fe7(0x228)],_0x4979da[_0x2c7fe7(0x2bd)]=_0x5da209[_0x2c7fe7(0x2bd)],_0x1be144[_0x2c7fe7(0x225)]=_0x4979da;}_tests[_0x1039eb]=_0x1be144;if(BrowserstackCLI[_0x2c7fe7(0x291)]()['isCliEnabled']()&&await this[_0x2c7fe7(0x2c4)]()){const _0x2286ec=await cucumberUtils[_0x2c7fe7(0x215)](_0x1be144,_0x5b7f2a,_0x47f9c6,_0x48e619,_0x506399['id'],_0x18215d[_0x2c7fe7(0x208)]),_0x427522={};_0x427522[_0x2c7fe7(0x238)]=_0x2286ec,await BrowserstackCLI[_0x2c7fe7(0x291)]()[_0x2c7fe7(0x1fa)]()[_0x2c7fe7(0x1fb)](TestFrameworkState['TEST'],HookState[_0x2c7fe7(0x244)],_0x427522);return;}await testObservabilityReporter[_0x2c7fe7(0x2a9)](_0x47f9c6,_0x48e619,_0x5b7f2a,_0x18215d[_0x2c7fe7(0x208)],_0x1be144);}catch(_0x2a4a1d){logger[_0x2c7fe7(0x1f9)](_0x2c7fe7(0x23d)+util[_0x2c7fe7(0x2b1)](_0x2a4a1d)+'\x20');}}async['onTestCaseFinished'](_0x4cf839,_0x47a5ec,_0x3af52f){const _0xbf94f8=a6_0x58194d,_0x2977d7={'yKJbX':function(_0xbab954,_0x1ea7d4){return _0xbab954(_0x1ea7d4);},'HieCy':'TestRunFinished','qgiLa':_0xbf94f8(0x238)};this[_0xbf94f8(0x287)](_0x4cf839);if(_0x2977d7[_0xbf94f8(0x230)](shouldProcessEventForTesthub,_0x2977d7[_0xbf94f8(0x25a)]))try{this[_0xbf94f8(0x254)][_0xbf94f8(0x22f)]=this[_0xbf94f8(0x254)][_0xbf94f8(0x22f)]||{},this[_0xbf94f8(0x254)][_0xbf94f8(0x22f)][_0x4cf839['testCaseStartedId']]=_0x4cf839,_testCasesData[_0x3af52f['id']]=Object[_0xbf94f8(0x2c1)]({},_0x3af52f);const _0x12b240=_0x4cf839['testCaseStartedId'],_0x5a1fb4=_0x47a5ec['eventDataCollector'][_0xbf94f8(0x234)][_0x12b240][_0xbf94f8(0x273)],_0x2f755c=_0x47a5ec[_0xbf94f8(0x2c5)][_0xbf94f8(0x209)][_0x5a1fb4],_0x4953b0=_0x2f755c[_0xbf94f8(0x29c)],_0x5341fa=_0x47a5ec['eventDataCollector'][_0xbf94f8(0x280)][_0x4953b0],_0x46fbfc=this[_0xbf94f8(0x262)](_0x47a5ec,_0x5341fa),_0x51a693=_0x46fbfc[_0xbf94f8(0x225)],_0x531696=_tests[_0x5a1fb4];_0x531696&&(delete _tests[_0x5a1fb4],_0x531696[_0xbf94f8(0x243)]=new Date()['toISOString']());if(BrowserstackCLI[_0xbf94f8(0x291)]()[_0xbf94f8(0x278)]()&&await this[_0xbf94f8(0x2c4)]()){const _0x5a6b3c=await cucumberUtils[_0xbf94f8(0x215)](_0x531696,_0x5341fa,_0x3af52f,_0x46fbfc,_0x12b240,_0x2977d7[_0xbf94f8(0x25a)]),_0x467d95={};_0x467d95[_0xbf94f8(0x238)]=_0x5a6b3c,await BrowserstackCLI[_0xbf94f8(0x291)]()[_0xbf94f8(0x1fa)]()[_0xbf94f8(0x1fb)](TestFrameworkState[_0xbf94f8(0x29f)],HookState[_0xbf94f8(0x23e)],_0x467d95);const _0x9c8a14={};_0x9c8a14['testUUID']=_0x4cf839[_0xbf94f8(0x2b7)],_0x9c8a14[_0xbf94f8(0x219)]=_0x2977d7[_0xbf94f8(0x258)],await BrowserstackCLI[_0xbf94f8(0x291)]()['getTestFramework']()[_0xbf94f8(0x1fb)](TestFrameworkState[_0xbf94f8(0x213)],HookState['POST'],_0x9c8a14);return;}await testObservabilityReporter[_0xbf94f8(0x2a9)](_0x3af52f,_0x46fbfc,_0x5341fa,_0x2977d7[_0xbf94f8(0x25a)],_0x531696);}catch(_0x5003c7){logger[_0xbf94f8(0x1f9)](_0xbf94f8(0x21d)+util[_0xbf94f8(0x2b1)](_0x5003c7));}}async[a6_0x58194d(0x23c)](_0x3de81b,_0x5d59e6){const _0xdd9313=a6_0x58194d,_0x125ec1={'qPuez':function(_0x45716c,_0xf54bf7){return _0x45716c(_0xf54bf7);},'UQQkF':_0xdd9313(0x21b),'pIGeK':function(_0x327c3a,_0x38d715){return _0x327c3a!==_0x38d715;},'dtJtR':_0xdd9313(0x29e)};if(_0x125ec1[_0xdd9313(0x2a8)](shouldProcessEventForTesthub,_0x125ec1[_0xdd9313(0x26c)]))try{this[_0xdd9313(0x254)][_0xdd9313(0x233)]=this['report']['testStepStarted']||{},this['report']['testStepStarted'][_0x3de81b[_0xdd9313(0x2b7)]]=_0x3de81b;const _0x26de43=_0x3de81b[_0xdd9313(0x2b7)],_0x5976e0=_0x5d59e6[_0xdd9313(0x2c5)][_0xdd9313(0x234)][_0x26de43][_0xdd9313(0x273)],_0x52b093=this[_0xdd9313(0x254)][_0xdd9313(0x206)][_0xdd9313(0x241)](_0x4bab79=>_0x4bab79['id']===_0x5976e0)[_0xdd9313(0x29c)],_0x237797=this[_0xdd9313(0x254)][_0xdd9313(0x2b2)][_0xdd9313(0x241)](_0x467dec=>_0x467dec['id']===_0x52b093),_0x2c6a5d=this[_0xdd9313(0x254)][_0xdd9313(0x206)][_0xdd9313(0x241)](_0x4a7199=>_0x4a7199['id']===_0x5976e0)['testSteps'],_0xc3367e=this['report'][_0xdd9313(0x233)][_0x26de43][_0xdd9313(0x29e)],_0x41014b=_0x2c6a5d[_0xdd9313(0x241)](_0x4c8e73=>_0x4c8e73['id']===_0xc3367e)[_0xdd9313(0x1fe)],_0x424f7c=_0x237797[_0xdd9313(0x21e)][_0xdd9313(0x241)](_0x54f16c=>_0x54f16c['id']===_0x41014b);if(_0x41014b&&_tests[_0x5976e0]&&_0x125ec1[_0xdd9313(0x28a)](_tests[_0x5976e0][_0x125ec1[_0xdd9313(0x2a0)]],_0xc3367e)){_tests[_0x5976e0][_0x125ec1[_0xdd9313(0x2a0)]]=_0xc3367e;const _0x2c5754={};_0x2c5754[_0xdd9313(0x21e)]=[];const _0x5edce4=_tests[_0x5976e0]||_0x2c5754;_0x5edce4&&!_0x5edce4[_0xdd9313(0x21e)]&&(_0x5edce4[_0xdd9313(0x21e)]=[]),_0x5edce4[_0xdd9313(0x21e)]['push']({'id':_0x424f7c['id'],'text':_0x424f7c[_0xdd9313(0x21c)],'started_at':new Date()[_0xdd9313(0x210)]()}),_tests[_0x5976e0]=_0x5edce4;}if(BrowserstackCLI['getInstance']()['isCliEnabled']()&&await this[_0xdd9313(0x2c4)]()){const _0x353fe1=await cucumberUtils[_0xdd9313(0x239)](this[_0xdd9313(0x254)],_0x26de43,_0x125ec1['UQQkF'],_0x2c6a5d,_0xc3367e,_tests[_0x5976e0]);_0x353fe1&&await BrowserstackCLI['getInstance']()[_0xdd9313(0x1fa)]()[_0xdd9313(0x1fb)](TestFrameworkState[_0x353fe1[_0xdd9313(0x28b)]],HookState[_0xdd9313(0x244)],{'hookData':_0x353fe1,'testUUID':_0x3de81b[_0xdd9313(0x2b7)]});return;}await testObservabilityReporter[_0xdd9313(0x1f6)](this['report'],_0x26de43,_0x125ec1[_0xdd9313(0x26c)],_0x2c6a5d,_0xc3367e,_tests[_0x5976e0]);}catch(_0x50a049){logger['debug'](_0xdd9313(0x20f)+util[_0xdd9313(0x2b1)](_0x50a049));}}async[a6_0x58194d(0x20b)](_0x42793c,_0x1c3374){const _0x211279=a6_0x58194d,_0x39c536={'cVyiX':function(_0x48370a,_0xf51c00){return _0x48370a===_0xf51c00;},'eUZcV':_0x211279(0x232),'WNJsa':function(_0x5b83de,_0x13110c){return _0x5b83de(_0x13110c);},'mbSrE':'HookRunFinished','CoVAs':function(_0x2c1a1e,_0x438292){return _0x2c1a1e===_0x438292;},'NIWAU':'failed','tbksB':_0x211279(0x227),'hgbku':_0x211279(0x29e),'zCMVZ':'HookRunStarted','PNerE':_0x211279(0x2a5)};this['report'][_0x211279(0x290)]=this[_0x211279(0x254)]['testStepFinished']||{},this[_0x211279(0x254)][_0x211279(0x290)][_0x42793c[_0x211279(0x2b7)]]=_0x42793c;if(_0x39c536[_0x211279(0x245)](shouldProcessEventForTesthub,_0x39c536[_0x211279(0x253)]))try{const _0x40f5a6=_0x42793c[_0x211279(0x2b7)],_0x330916=_0x1c3374['eventDataCollector'][_0x211279(0x234)][_0x40f5a6][_0x211279(0x273)],_0x132b66=_0x1c3374['eventDataCollector'][_0x211279(0x209)][_0x330916],_0x28b4fb=_0x132b66[_0x211279(0x29c)],_0x2376d7=_0x1c3374['eventDataCollector'][_0x211279(0x280)][_0x28b4fb],_0x1d52f0=_0x42793c[_0x211279(0x29e)],_0x2f96ee=_0x132b66['testSteps'],_0x928c98=this[_0x211279(0x2c5)][_0x211279(0x21a)](_0x40f5a6),_0x1d0aa2=_0x2f96ee[_0x211279(0x241)](_0x4bcd59=>_0x4bcd59['id']===_0x1d52f0)[_0x211279(0x1fe)];let _0x4b6eca,_0x18c994;_0x42793c['testStepResult']&&_0x39c536[_0x211279(0x236)](_0x42793c[_0x211279(0x246)][_0x211279(0x297)]['toString']()[_0x211279(0x299)](),_0x39c536[_0x211279(0x217)])&&(_0x4b6eca=_0x39c536[_0x211279(0x2b9)](_0x42793c[_0x211279(0x246)]['exception'],undefined)?_0x42793c[_0x211279(0x246)][_0x211279(0x203)]:_0x42793c[_0x211279(0x246)][_0x211279(0x1fc)]['message'],_0x18c994=_0x39c536[_0x211279(0x2b9)](_0x42793c[_0x211279(0x246)][_0x211279(0x1fc)],undefined)?_0x39c536['tbksB']:_0x42793c[_0x211279(0x246)]['message']);if(_0x1d0aa2&&_tests[_0x330916][_0x39c536['hgbku']]){const _0x2af1e0=_0x2376d7[_0x211279(0x21e)][_0x211279(0x241)](_0x1ec224=>_0x1ec224['id']===_0x1d0aa2),_0x27b449={};_0x27b449[_0x211279(0x21e)]=[];const _0x1df2ff=_tests[_0x330916]||_0x27b449;!_0x1df2ff['steps']?_0x1df2ff[_0x211279(0x21e)]=[{'id':_0x2af1e0['id'],'text':_0x2af1e0[_0x211279(0x21c)],'finished_at':new Date()[_0x211279(0x210)](),'result':_0x42793c[_0x211279(0x246)][_0x211279(0x297)],'duration':_0x42793c[_0x211279(0x246)][_0x211279(0x21f)][_0x211279(0x250)],'failure':_0x4b6eca,'failureType':_0x18c994}]:_0x1df2ff['steps'][_0x211279(0x272)](_0x653f0c=>{const _0x17073a=_0x211279;if(_0x39c536[_0x17073a(0x2b9)](_0x653f0c['id'],_0x2af1e0['id'])){const _0x2d811c=_0x39c536['eUZcV']['split']('|');let _0x6264df=0x0;while(!![]){switch(_0x2d811c[_0x6264df++]){case'0':_0x653f0c[_0x17073a(0x268)]=_0x42793c['testStepResult']['status'];continue;case'1':_0x653f0c[_0x17073a(0x21f)]=_0x42793c[_0x17073a(0x246)][_0x17073a(0x21f)][_0x17073a(0x250)];continue;case'2':_0x653f0c['failureType']=_0x18c994;continue;case'3':_0x653f0c[_0x17073a(0x2b8)]=new Date()['toISOString']();continue;case'4':_0x653f0c[_0x17073a(0x27b)]=_0x4b6eca;continue;}break;}}}),_tests[_0x330916]=_0x1df2ff;}delete _tests[_0x330916][_0x39c536['hgbku']];if(BrowserstackCLI[_0x211279(0x291)]()[_0x211279(0x278)]()&&await this[_0x211279(0x2c4)]()){const _0x104d16=await cucumberUtils['createHookData'](this['report'],_0x40f5a6,_0x39c536[_0x211279(0x224)],_0x2f96ee,_0x1d52f0,_tests[_0x330916]);if(_0x104d16){await BrowserstackCLI[_0x211279(0x291)]()[_0x211279(0x1fa)]()[_0x211279(0x1fb)](TestFrameworkState[_0x104d16[_0x211279(0x28b)]],HookState['POST'],{'hookData':_0x104d16,'testUUID':_0x42793c[_0x211279(0x2b7)]});const _0xaa7e41={};_0xaa7e41['testUUID']=_0x42793c[_0x211279(0x2b7)],_0xaa7e41[_0x211279(0x219)]=_0x39c536[_0x211279(0x218)],await BrowserstackCLI[_0x211279(0x291)]()[_0x211279(0x1fa)]()['trackEvent'](TestFrameworkState[_0x211279(0x213)],HookState['POST'],_0xaa7e41);}return;}await testObservabilityReporter[_0x211279(0x1f6)](this[_0x211279(0x254)],_0x40f5a6,_0x39c536[_0x211279(0x253)],_0x2f96ee,_0x1d52f0,_tests[_0x330916]);}catch(_0x27a037){logger[_0x211279(0x1f9)](_0x211279(0x237)+util['format'](_0x27a037));}}['getGherkinStepMap'](_0x343679){const _0x4d7de6=a6_0x58194d,_0x5af474={};return _0x343679[_0x4d7de6(0x225)][_0x4d7de6(0x27c)]['map'](this[_0x4d7de6(0x298)])[_0x4d7de6(0x285)]()[_0x4d7de6(0x272)](_0x40d1ab=>_0x40d1ab[_0x4d7de6(0x21e)][_0x4d7de6(0x272)](_0x3c39e3=>_0x5af474[_0x3c39e3['id']]=_0x3c39e3)),_0x5af474;}[a6_0x58194d(0x298)](_0x5c23d1){const _0x47ec2e=a6_0x58194d,_0x2576d5={'AjZhw':function(_0x4580e7,_0x52fb31){return _0x4580e7(_0x52fb31);},'vFEye':function(_0x11b0ce,_0x46d514){return _0x11b0ce(_0x46d514);}};if(!_0x2576d5[_0x47ec2e(0x26b)](isUndefined,_0x5c23d1[_0x47ec2e(0x256)]))return[_0x5c23d1['background']];else{if(!_0x2576d5['vFEye'](isUndefined,_0x5c23d1[_0x47ec2e(0x235)]))return _0x5c23d1[_0x47ec2e(0x235)][_0x47ec2e(0x27c)][_0x47ec2e(0x1f3)](_0xa220e=>!isUndefined(_0xa220e[_0x47ec2e(0x256)])?_0xa220e[_0x47ec2e(0x256)]:_0xa220e[_0x47ec2e(0x20c)]);};return[_0x5c23d1[_0x47ec2e(0x20c)]];}[a6_0x58194d(0x262)](_0x1a1b0c,_0x1691e2){const _0x2c537f=a6_0x58194d;return Object['values'](_0x1a1b0c[_0x2c537f(0x2c5)][_0x2c537f(0x276)])[_0x2c537f(0x241)](_0x4c8d3a=>_0x4c8d3a[_0x2c537f(0x275)]===_0x1691e2['uri']);}async[a6_0x58194d(0x269)](){const _0xe1183a=a6_0x58194d;if(this[_0xe1183a(0x2c7)])return this[_0xe1183a(0x2c7)];return this[_0xe1183a(0x2c7)]=this['_performCLIInitialization'](),this[_0xe1183a(0x2c7)];}async[a6_0x58194d(0x1f5)](){const _0x45e012=a6_0x58194d,_0x197f75={'tQxAT':_0x45e012(0x282),'eNgRw':function(_0x5888fd,_0x3a3604){return _0x5888fd(_0x3a3604);},'tMHla':_0x45e012(0x229),'rytmV':_0x45e012(0x274)};try{const _0x2b825f=BrowserstackCLI[_0x45e012(0x291)]();if(_0x2b825f[_0x45e012(0x252)]())return logger[_0x45e012(0x1f9)](_0x45e012(0x27e)+_0x2b825f[_0x45e012(0x259)]),!![];const _0xce8728=process[_0x45e012(0x270)]['BROWSERSTACK_CLI_BIN_SESSION_ID'];if(!_0xce8728)return logger[_0x45e012(0x1f9)](_0x197f75[_0x45e012(0x247)]),![];const _0x2dbbe6=_0x197f75[_0x45e012(0x2c0)](require,_0x197f75[_0x45e012(0x24f)]),{FRAMEWORKS:_0x59a75e}=_0x197f75[_0x45e012(0x2c0)](require,_0x197f75[_0x45e012(0x20a)]);return _0x2dbbe6['setFrameworkDetail'](_0x59a75e[_0x45e012(0x2c2)],_0x59a75e[_0x45e012(0x2ab)]),logger[_0x45e012(0x1f9)](_0x45e012(0x2a3)+_0xce8728),await _0x2b825f[_0x45e012(0x265)](),logger[_0x45e012(0x1f9)](_0x45e012(0x257)+_0x2b825f[_0x45e012(0x252)]()+_0x45e012(0x264)+_0x2b825f[_0x45e012(0x259)]),_0x2b825f[_0x45e012(0x252)]();}catch(_0x1e1574){return logger[_0x45e012(0x1f9)](_0x45e012(0x2ad)+util['format'](_0x1e1574)),![];}}async[a6_0x58194d(0x2c4)](){const _0x125614=a6_0x58194d;try{return await this[_0x125614(0x269)](),BrowserstackCLI['getInstance']()['isRunning']();}catch(_0x108e82){return logger['debug'](_0x125614(0x25f)+util[_0x125614(0x2b1)](_0x108e82)),![];}}}function a6_0x261e(_0x51e267,_0x34835e){const _0x4b72b4=a6_0x4b72();return a6_0x261e=function(_0x261e00,_0xdc2305){_0x261e00=_0x261e00-0x1f2;let _0x269d22=_0x4b72b4[_0x261e00];return _0x269d22;},a6_0x261e(_0x51e267,_0x34835e);}module['exports']=o11yClassErrorHandler(BrowserstackFormatter,[a6_0x58194d(0x214),'onTestCaseFinished',a6_0x58194d(0x23c),a6_0x58194d(0x20b),'onTestRunStarted',a6_0x58194d(0x1f8),a6_0x58194d(0x298),a6_0x58194d(0x262),a6_0x58194d(0x25d)]);