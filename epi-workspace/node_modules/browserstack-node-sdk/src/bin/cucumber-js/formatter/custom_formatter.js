function a6_0xeb98(_0x1dbf08,_0x35fa09){const _0x54ce51=a6_0x54ce();return a6_0xeb98=function(_0xeb9821,_0x3040fe){_0xeb9821=_0xeb9821-0x1e9;let _0x32d96a=_0x54ce51[_0xeb9821];return _0x32d96a;},a6_0xeb98(_0x1dbf08,_0x35fa09);}const a6_0x66d8b2=a6_0xeb98;(function(_0x1fa010,_0x28e82f){const _0x2d7153=a6_0xeb98,_0xd697f6=_0x1fa010();while(!![]){try{const _0x28e2ca=parseInt(_0x2d7153(0x202))/0x1*(-parseInt(_0x2d7153(0x21b))/0x2)+-parseInt(_0x2d7153(0x244))/0x3*(-parseInt(_0x2d7153(0x1fd))/0x4)+parseInt(_0x2d7153(0x254))/0x5*(-parseInt(_0x2d7153(0x2a1))/0x6)+parseInt(_0x2d7153(0x2ae))/0x7+parseInt(_0x2d7153(0x2b2))/0x8*(-parseInt(_0x2d7153(0x2aa))/0x9)+parseInt(_0x2d7153(0x207))/0xa+parseInt(_0x2d7153(0x250))/0xb;if(_0x28e2ca===_0x28e82f)break;else _0xd697f6['push'](_0xd697f6['shift']());}catch(_0x214b76){_0xd697f6['push'](_0xd697f6['shift']());}}}(a6_0x54ce,0x75d53));const {requireModule,getPlatformName,nestedKeyValue,isUndefined,isBrowserstackInfra}=require('../../../helpers/helper'),util=require(a6_0x66d8b2(0x24c)),{Formatter,formatterHelpers,Status}=requireModule(a6_0x66d8b2(0x268)),TestDetails=require('../../playwright/reporter/test-details.js'),TestObservabilityReporter=require('../test-observability.js'),{o11yClassErrorHandler}=require(a6_0x66d8b2(0x2c3)),{shouldProcessEventForTesthub}=require(a6_0x66d8b2(0x213)),BrowserstackCLI=require(a6_0x66d8b2(0x22a)),TestFrameworkState=require(a6_0x66d8b2(0x27c)),HookState=require(a6_0x66d8b2(0x229)),CucumberUtils=require(a6_0x66d8b2(0x28d)),TestInfo=require(a6_0x66d8b2(0x29c)),testObservabilityReporter=new TestObservabilityReporter(),cucumberUtils=new CucumberUtils(),logger=require(a6_0x66d8b2(0x2b5))[a6_0x66d8b2(0x20a)],_tests={},_testCasesData={};class BrowserstackFormatter extends Formatter{constructor(_0x12ef0c){const _0x24aa08=a6_0x66d8b2,_0x573636={};_0x573636[_0x24aa08(0x2a2)]=_0x24aa08(0x22e);const _0x14d75c=_0x573636;super(_0x12ef0c),this['report']={},_0x12ef0c[_0x24aa08(0x232)]['on'](_0x14d75c[_0x24aa08(0x2a2)],async _0x582618=>{const _0x3fc3e8=_0x24aa08;switch(!![]){case!!_0x582618[_0x3fc3e8(0x266)]:this[_0x3fc3e8(0x222)](_0x582618[_0x3fc3e8(0x266)]);break;case!!_0x582618[_0x3fc3e8(0x205)]:this[_0x3fc3e8(0x1f3)](_0x582618[_0x3fc3e8(0x205)]);break;case!!_0x582618[_0x3fc3e8(0x1f5)]:this[_0x3fc3e8(0x2a8)](_0x582618[_0x3fc3e8(0x1f5)],_0x12ef0c,_0x582618);break;case!!_0x582618['testCaseFinished']:this[_0x3fc3e8(0x22b)](_0x582618[_0x3fc3e8(0x1ea)],_0x12ef0c,_0x582618);break;case!!_0x582618[_0x3fc3e8(0x27e)]:this[_0x3fc3e8(0x2b1)](_0x582618['testStepStarted'],_0x12ef0c);break;case!!_0x582618[_0x3fc3e8(0x225)]:this[_0x3fc3e8(0x27a)](_0x582618[_0x3fc3e8(0x225)],_0x12ef0c);break;case!!_0x582618['hook']:this[_0x3fc3e8(0x273)](_0x582618['hook']);break;case!!_0x582618[_0x3fc3e8(0x275)]:this[_0x3fc3e8(0x239)](_0x582618[_0x3fc3e8(0x275)]);break;case!!_0x582618[_0x3fc3e8(0x201)]:this[_0x3fc3e8(0x2a3)](_0x582618[_0x3fc3e8(0x201)]);break;case!!_0x582618[_0x3fc3e8(0x22c)]:this['onGherkinDocument'](_0x582618[_0x3fc3e8(0x22c)]);break;}});}[a6_0x66d8b2(0x273)](_0x69048a){const _0x2b8713=a6_0x66d8b2;this[_0x2b8713(0x2be)]['hooks']=Object['assign']([],this[_0x2b8713(0x2be)][_0x2b8713(0x263)]||[]),this[_0x2b8713(0x2be)][_0x2b8713(0x263)][_0x2b8713(0x26e)](_0x69048a);}[a6_0x66d8b2(0x2a3)](_0xff2e7e){const _0x23a3a9=a6_0x66d8b2;this[_0x23a3a9(0x2be)][_0x23a3a9(0x201)]=Object['assign']([],this[_0x23a3a9(0x2be)][_0x23a3a9(0x201)]||[],[_0xff2e7e]),this[_0x23a3a9(0x2be)]['pickle']['push'](_0xff2e7e);}[a6_0x66d8b2(0x1f1)](_0x573957){const _0x374049=a6_0x66d8b2;this[_0x374049(0x2be)][_0x374049(0x22c)]=Object[_0x374049(0x253)]([],this[_0x374049(0x2be)][_0x374049(0x22c)]||[],[_0x573957]),this['report']['gherkinDocument'][_0x374049(0x26e)](_0x573957);}[a6_0x66d8b2(0x1f8)](_0x9d857d){const _0x1b7bec=a6_0x66d8b2;this[_0x1b7bec(0x2be)][_0x1b7bec(0x216)]=_0x9d857d;}[a6_0x66d8b2(0x200)](_0xed94d5){const _0x1bde5b=a6_0x66d8b2;this[_0x1bde5b(0x2be)]['stepDefinition']=Object[_0x1bde5b(0x253)]([],this[_0x1bde5b(0x2be)][_0x1bde5b(0x278)]||[],[_0xed94d5]),this[_0x1bde5b(0x2be)][_0x1bde5b(0x278)][_0x1bde5b(0x26e)](_0xed94d5);}['onTestCase'](_0x49684d){const _0x2eff28=a6_0x66d8b2;this['report'][_0x2eff28(0x212)]=Object[_0x2eff28(0x253)]([],this[_0x2eff28(0x2be)]['testCases']||[],[_0x49684d]),this[_0x2eff28(0x2be)][_0x2eff28(0x212)]['push'](_0x49684d);}['logTestCaseFinished'](_0x7f7ebe){const _0x3a8954=a6_0x66d8b2,_0x1aaa19={'LMAtD':function(_0x2dae67,_0x1385c9){return _0x2dae67!==_0x1385c9;},'WrkvQ':_0x3a8954(0x2b9),'cmevW':function(_0x3dfba3,_0x42b082){return _0x3dfba3+_0x42b082;},'KmptW':function(_0x1ac88d,_0x43024e){return _0x1ac88d+_0x43024e;},'DvBIH':function(_0x398b9d,_0x406bbc){return _0x398b9d+_0x406bbc;},'kFCHo':_0x3a8954(0x296),'wqASY':_0x3a8954(0x26a),'KXxbq':function(_0x218f89,_0x23441b){return _0x218f89===_0x23441b;},'LyaxZ':_0x3a8954(0x270),'HuFEb':function(_0x57482c,_0x1874e6,_0x57318c){return _0x57482c(_0x1874e6,_0x57318c);},'htGtQ':'result','TeTfM':_0x3a8954(0x277),'qUxgA':function(_0xad4462,_0x4aa3cc){return _0xad4462+_0x4aa3cc;},'DwTYg':function(_0x3872a2,_0x1e66fd){return _0x3872a2+_0x1e66fd;},'wpdyq':function(_0x34b387,_0x4f3149){return _0x34b387+_0x4f3149;},'SKwDg':function(_0x54ac00,_0x528dbf){return _0x54ac00+_0x528dbf;}};_0x1aaa19['LMAtD'](global[_0x3a8954(0x21d)],undefined)&&this[_0x3a8954(0x267)](_0x1aaa19['DvBIH'](_0x1aaa19['KmptW']('\x0a',global[_0x3a8954(0x21d)]),'\x0a'));const _0x506a0b=this['eventDataCollector'][_0x3a8954(0x22d)](_0x7f7ebe[_0x3a8954(0x23a)]);this['log'](_0x1aaa19[_0x3a8954(0x286)](_0x1aaa19[_0x3a8954(0x20f)](_0x1aaa19[_0x3a8954(0x2b0)](_0x1aaa19[_0x3a8954(0x24e)]('\x20\x20',_0x506a0b['gherkinDocument'][_0x3a8954(0x221)][_0x3a8954(0x259)]),_0x1aaa19[_0x3a8954(0x284)]),_0x506a0b[_0x3a8954(0x201)][_0x3a8954(0x259)]),'\x0a'));const _0x221efe={};_0x221efe[_0x3a8954(0x255)]=this['cwd'],_0x221efe[_0x3a8954(0x25c)]=this[_0x3a8954(0x25c)],_0x221efe[_0x3a8954(0x1f9)]=this[_0x3a8954(0x1f9)],_0x221efe[_0x3a8954(0x269)]=_0x506a0b;const _0x3f5789=formatterHelpers['parseTestCaseAttempt'](_0x221efe);let _0x346497=![];_0x3f5789[_0x3a8954(0x291)][_0x3a8954(0x226)](_0x51cd81=>{const _0x386842=_0x3a8954;if(_0x1aaa19[_0x386842(0x2ba)](_0x51cd81[_0x386842(0x259)],_0x1aaa19['WrkvQ'])&&!this[_0x386842(0x224)](_0x51cd81)){totalTests+=0x1,this['log'](_0x1aaa19[_0x386842(0x2a0)](_0x1aaa19[_0x386842(0x2b0)](_0x1aaa19[_0x386842(0x2b0)](_0x1aaa19['KmptW'](_0x1aaa19['DvBIH'](_0x1aaa19[_0x386842(0x261)],_0x51cd81[_0x386842(0x258)]),_0x51cd81['text']||''),_0x1aaa19[_0x386842(0x284)]),Status[_0x51cd81[_0x386842(0x1fc)][_0x386842(0x243)]]),'\x0a')),this['incrementCounter'](Status[_0x51cd81[_0x386842(0x1fc)][_0x386842(0x243)]]);if(_0x1aaa19[_0x386842(0x1fa)](Status[_0x51cd81[_0x386842(0x1fc)][_0x386842(0x243)]],_0x1aaa19[_0x386842(0x247)])){_0x346497=!![];const _0x2762d5=_0x1aaa19[_0x386842(0x298)](nestedKeyValue,_0x51cd81,[_0x1aaa19[_0x386842(0x25d)],_0x1aaa19[_0x386842(0x2c5)]]);_0x2762d5&&(testsErrorMessage[_0x1aaa19['qUxgA'](_0x1aaa19[_0x386842(0x204)](_0x506a0b[_0x386842(0x22c)][_0x386842(0x221)][_0x386842(0x259)],_0x1aaa19[_0x386842(0x284)]),_0x506a0b['pickle'][_0x386842(0x259)])]=_0x2762d5,this[_0x386842(0x267)](_0x1aaa19[_0x386842(0x2a0)](_0x2762d5,'\x0a')));}}}),_0x346497&&(testSuitesFailed+=0x1),this['log']('\x0a');}[a6_0x66d8b2(0x28c)](_0x2903fb){}[a6_0x66d8b2(0x224)](_0x5af5a2){const _0x34bfb2=a6_0x66d8b2,_0x2a394f={};_0x2a394f['IUlwr']=function(_0x48ffed,_0x5dfe6a){return _0x48ffed!==_0x5dfe6a;},_0x2a394f['wIcto']=_0x34bfb2(0x1eb);const _0x57341d=_0x2a394f;if(_0x57341d[_0x34bfb2(0x1ec)](_0x5af5a2[_0x34bfb2(0x2a7)],undefined))return![];if(_0x5af5a2[_0x34bfb2(0x245)]&&_0x5af5a2['actionLocation'][_0x34bfb2(0x1f6)][_0x34bfb2(0x262)](_0x57341d[_0x34bfb2(0x293)]))return!![];return![];}['incrementCounter'](_0x33fce9){const _0x177b3f=a6_0x66d8b2,_0x20826c={};_0x20826c[_0x177b3f(0x233)]=_0x177b3f(0x270),_0x20826c['hdENo']=_0x177b3f(0x27f),_0x20826c[_0x177b3f(0x23e)]='SKIPPED',_0x20826c[_0x177b3f(0x26c)]='PENDING',_0x20826c[_0x177b3f(0x271)]=_0x177b3f(0x1f4),_0x20826c[_0x177b3f(0x287)]=_0x177b3f(0x1ee),_0x20826c[_0x177b3f(0x2c1)]=_0x177b3f(0x281);const _0x19d548=_0x20826c;switch(_0x33fce9){case _0x19d548[_0x177b3f(0x233)]:testsFailed+=0x1;break;case _0x19d548[_0x177b3f(0x28b)]:testsPassed+=0x1;break;case _0x19d548[_0x177b3f(0x23e)]:testsSkipped+=0x1;break;case _0x19d548[_0x177b3f(0x26c)]:testsPending+=0x1;break;case _0x19d548[_0x177b3f(0x271)]:testsUndefined+=0x1;break;case _0x19d548['AQTAV']:testsUnknown+=0x1;break;case _0x19d548[_0x177b3f(0x2c1)]:testsAmbiguous+=0x1;break;default:break;}}async[a6_0x66d8b2(0x222)](_0x5e8ded){const _0x4913c0=a6_0x66d8b2,_0x210825={'Nhhed':function(_0x405eed,_0x2fa4bf){return _0x405eed!==_0x2fa4bf;},'MdJau':function(_0x197b92){return _0x197b92();},'znoHL':function(_0x1b5f90,_0x1d9816){return _0x1b5f90(_0x1d9816);},'hPwCS':function(_0xa5d57,_0x2b933c){return _0xa5d57+_0x2b933c;},'eIDSf':_0x4913c0(0x20c)};let _0x26ec63;if(_0x210825[_0x4913c0(0x276)](process[_0x4913c0(0x203)]['CONFIG'],undefined)){const _0x8392b=JSON[_0x4913c0(0x25e)](process['env'][_0x4913c0(0x28e)]);_0x26ec63=_0x8392b[_0x4913c0(0x1ef)];}_0x210825['Nhhed'](_0x26ec63,undefined)&&_0x210825[_0x4913c0(0x26b)](isBrowserstackInfra)&&(global[_0x4913c0(0x21d)]=_0x210825[_0x4913c0(0x2bc)](getPlatformName,_0x26ec63),this[_0x4913c0(0x267)](_0x210825[_0x4913c0(0x241)](_0x4913c0(0x235)+global[_0x4913c0(0x21d)],'\x0a'))),_0x210825[_0x4913c0(0x26b)](shouldProcessEventForTesthub)&&(TestDetails['setup'](),this[_0x4913c0(0x2be)][_0x4913c0(0x266)]=_0x5e8ded,BrowserstackCLI[_0x4913c0(0x211)]()[_0x4913c0(0x209)]()&&await this['isCLIReady']()&&(TestInfo[_0x4913c0(0x23b)](_0x210825[_0x4913c0(0x210)]),await BrowserstackCLI[_0x4913c0(0x211)]()['getTestFramework']()[_0x4913c0(0x2af)](TestFrameworkState[_0x4913c0(0x214)],HookState[_0x4913c0(0x23c)],{})));}[a6_0x66d8b2(0x1f3)](_0x51c1f8){const _0x37eafa=a6_0x66d8b2;this[_0x37eafa(0x2be)][_0x37eafa(0x205)]=_0x51c1f8,this[_0x37eafa(0x28c)](_0x51c1f8);}async[a6_0x66d8b2(0x2a8)](_0xd19450,_0x1217b0,_0x25b38b){const _0x42ab78=a6_0x66d8b2,_0x55f250={'qaKrg':function(_0x398046,_0xbf28fc){return _0x398046(_0xbf28fc);},'TLTzU':'TestRunStarted','DvIxb':function(_0x31f561,_0x412f5a){return _0x31f561&&_0x412f5a;}};testSuites+=0x1;if(_0x55f250[_0x42ab78(0x265)](shouldProcessEventForTesthub,_0x55f250['TLTzU']))try{this[_0x42ab78(0x2be)]['testCaseStarted']=this['report'][_0x42ab78(0x1f5)]||{},this[_0x42ab78(0x2be)][_0x42ab78(0x1f5)][_0xd19450['id']]=_0xd19450;let _0x5a70a6=null;BrowserstackCLI[_0x42ab78(0x211)]()[_0x42ab78(0x209)]()&&await this['isCLIReady']()?_0x5a70a6=TestInfo['getTestUUID'](_0xd19450['id']):_0x5a70a6=TestDetails['getTestUUID'](_0xd19450['id']);_testCasesData[_0xd19450['id']]=Object[_0x42ab78(0x253)]({},_0x25b38b);const _0x386749=this['report'],_0x20c68d=_0xd19450[_0x42ab78(0x2bb)],_0x3d3524=_0x386749[_0x42ab78(0x212)][_0x42ab78(0x256)](_0x33bb9d=>_0x33bb9d['id']===_0x20c68d)[_0x42ab78(0x260)],_0x546053=_0x386749[_0x42ab78(0x201)][_0x42ab78(0x256)](_0x468591=>_0x468591['id']===_0x3d3524),_0x128553=_0x386749[_0x42ab78(0x22c)][_0x42ab78(0x256)](_0x436d11=>_0x436d11['uri']===_0x546053[_0x42ab78(0x1f6)]),_0x49d535=_0x128553[_0x42ab78(0x221)],_0xbdc3a5={'uuid':_0x5a70a6,'startedAt':new Date()['toISOString']()};if(_0x546053){const _0x593b0b={};_0x593b0b['name']=_0x546053[_0x42ab78(0x259)],_0xbdc3a5['scenario']=_0x593b0b;}if(_0x55f250[_0x42ab78(0x228)](_0x128553,_0x49d535)){const _0xfb3ca4={};_0xfb3ca4[_0x42ab78(0x290)]=_0x128553['uri'],_0xfb3ca4[_0x42ab78(0x259)]=_0x49d535['name'],_0xfb3ca4[_0x42ab78(0x2b3)]=_0x49d535[_0x42ab78(0x2b3)],_0xbdc3a5[_0x42ab78(0x221)]=_0xfb3ca4;}_tests[_0x20c68d]=_0xbdc3a5;if(BrowserstackCLI[_0x42ab78(0x211)]()['isCliEnabled']()&&await this[_0x42ab78(0x24a)]()){const _0x17fba3=await cucumberUtils[_0x42ab78(0x25a)](_0xbdc3a5,_0x546053,_0x25b38b,_0x128553,_0xd19450['id'],_0x55f250['TLTzU']),_0x1721fb={};_0x1721fb[_0x42ab78(0x2a4)]=_0x17fba3,await BrowserstackCLI[_0x42ab78(0x211)]()['getTestFramework']()['trackEvent'](TestFrameworkState[_0x42ab78(0x22f)],HookState['PRE'],_0x1721fb);return;}await testObservabilityReporter['sendTestRunEventForCucumber'](_0x25b38b,_0x128553,_0x546053,_0x55f250[_0x42ab78(0x285)],_0xbdc3a5);}catch(_0x312054){logger[_0x42ab78(0x288)]('Exception\x20in\x20sending\x20onTestCaseStarted:\x20'+util[_0x42ab78(0x237)](_0x312054)+'\x20');}}async['onTestCaseFinished'](_0x560a89,_0x3b15bf,_0x447de0){const _0x1bdab3=a6_0x66d8b2,_0x13ae60={'OwGCA':function(_0xc7ba79,_0x33ce44){return _0xc7ba79(_0x33ce44);},'wvMsm':_0x1bdab3(0x294),'fUAiV':_0x1bdab3(0x2a4)};this[_0x1bdab3(0x1f2)](_0x560a89);if(_0x13ae60[_0x1bdab3(0x1ff)](shouldProcessEventForTesthub,_0x13ae60['wvMsm']))try{this['report'][_0x1bdab3(0x1ea)]=this[_0x1bdab3(0x2be)]['testCaseFinished']||{},this[_0x1bdab3(0x2be)][_0x1bdab3(0x1ea)][_0x560a89[_0x1bdab3(0x23a)]]=_0x560a89,_testCasesData[_0x447de0['id']]=Object[_0x1bdab3(0x253)]({},_0x447de0);const _0x57cdff=_0x560a89['testCaseStartedId'],_0x2ed4a9=_0x3b15bf[_0x1bdab3(0x299)][_0x1bdab3(0x24b)][_0x57cdff]['testCaseId'],_0x519e33=_0x3b15bf[_0x1bdab3(0x299)][_0x1bdab3(0x219)][_0x2ed4a9],_0x2b463d=_0x519e33[_0x1bdab3(0x260)],_0x3cc549=_0x3b15bf['eventDataCollector'][_0x1bdab3(0x26d)][_0x2b463d],_0x45b9e5=this[_0x1bdab3(0x292)](_0x3b15bf,_0x3cc549),_0x4f4ade=_0x45b9e5[_0x1bdab3(0x221)],_0x139197=_tests[_0x2ed4a9];_0x139197&&(delete _tests[_0x2ed4a9],_0x139197[_0x1bdab3(0x240)]=new Date()[_0x1bdab3(0x1f0)]());if(BrowserstackCLI['getInstance']()[_0x1bdab3(0x209)]()&&await this['isCLIReady']()){const _0x21113e=await cucumberUtils['createTestFrameworkData'](_0x139197,_0x3cc549,_0x447de0,_0x45b9e5,_0x57cdff,_0x13ae60[_0x1bdab3(0x264)]),_0x3aea8f={};_0x3aea8f[_0x1bdab3(0x2a4)]=_0x21113e,await BrowserstackCLI['getInstance']()[_0x1bdab3(0x26f)]()[_0x1bdab3(0x2af)](TestFrameworkState['TEST'],HookState['POST'],_0x3aea8f);const _0x11051d={};_0x11051d[_0x1bdab3(0x280)]=_0x560a89['testCaseStartedId'],_0x11051d[_0x1bdab3(0x289)]=_0x13ae60[_0x1bdab3(0x297)],await BrowserstackCLI[_0x1bdab3(0x211)]()[_0x1bdab3(0x26f)]()[_0x1bdab3(0x2af)](TestFrameworkState[_0x1bdab3(0x236)],HookState[_0x1bdab3(0x1fb)],_0x11051d);return;}await testObservabilityReporter[_0x1bdab3(0x24d)](_0x447de0,_0x45b9e5,_0x3cc549,_0x13ae60[_0x1bdab3(0x264)],_0x139197);}catch(_0x50d0cf){logger['debug'](_0x1bdab3(0x2bf)+util['format'](_0x50d0cf));}}async[a6_0x66d8b2(0x2b1)](_0x5e5121,_0x2fb26e){const _0x4f94d3=a6_0x66d8b2,_0x560d90={'LpQoC':function(_0x1497a6,_0x8bd8ca){return _0x1497a6(_0x8bd8ca);},'nySJb':_0x4f94d3(0x251),'OUcxO':function(_0x515857,_0x3b3af6){return _0x515857!==_0x3b3af6;},'hffUe':_0x4f94d3(0x1f7)};if(_0x560d90['LpQoC'](shouldProcessEventForTesthub,_0x560d90['nySJb']))try{this[_0x4f94d3(0x2be)][_0x4f94d3(0x27e)]=this[_0x4f94d3(0x2be)]['testStepStarted']||{},this[_0x4f94d3(0x2be)][_0x4f94d3(0x27e)][_0x5e5121[_0x4f94d3(0x23a)]]=_0x5e5121;const _0x5e8b2f=_0x5e5121['testCaseStartedId'],_0xe9be03=_0x2fb26e[_0x4f94d3(0x299)][_0x4f94d3(0x24b)][_0x5e8b2f][_0x4f94d3(0x2bb)],_0x18e57c=this[_0x4f94d3(0x2be)]['testCases'][_0x4f94d3(0x256)](_0x293a22=>_0x293a22['id']===_0xe9be03)['pickleId'],_0x2948d7=this[_0x4f94d3(0x2be)][_0x4f94d3(0x201)][_0x4f94d3(0x256)](_0x412af1=>_0x412af1['id']===_0x18e57c),_0x4800b7=this[_0x4f94d3(0x2be)][_0x4f94d3(0x212)][_0x4f94d3(0x256)](_0xa50e2c=>_0xa50e2c['id']===_0xe9be03)['testSteps'],_0x57c4a5=this[_0x4f94d3(0x2be)]['testStepStarted'][_0x5e8b2f][_0x4f94d3(0x1f7)],_0x4b994f=_0x4800b7[_0x4f94d3(0x256)](_0x56cbb1=>_0x56cbb1['id']===_0x57c4a5)[_0x4f94d3(0x227)],_0x24ca1c=_0x2948d7[_0x4f94d3(0x272)][_0x4f94d3(0x256)](_0x227c5e=>_0x227c5e['id']===_0x4b994f);if(_0x4b994f&&_tests[_0xe9be03]&&_0x560d90[_0x4f94d3(0x2c2)](_tests[_0xe9be03][_0x560d90[_0x4f94d3(0x29b)]],_0x57c4a5)){_tests[_0xe9be03][_0x560d90[_0x4f94d3(0x29b)]]=_0x57c4a5;const _0x4da24e={};_0x4da24e['steps']=[];const _0x58f4c7=_tests[_0xe9be03]||_0x4da24e;_0x58f4c7&&!_0x58f4c7['steps']&&(_0x58f4c7[_0x4f94d3(0x272)]=[]),_0x58f4c7[_0x4f94d3(0x272)][_0x4f94d3(0x26e)]({'id':_0x24ca1c['id'],'text':_0x24ca1c['text'],'started_at':new Date()[_0x4f94d3(0x1f0)]()}),_tests[_0xe9be03]=_0x58f4c7;}if(BrowserstackCLI['getInstance']()['isCliEnabled']()&&await this[_0x4f94d3(0x24a)]()){const _0x37ef93=await cucumberUtils['createHookData'](this[_0x4f94d3(0x2be)],_0x5e8b2f,_0x560d90['nySJb'],_0x4800b7,_0x57c4a5,_tests[_0xe9be03]);_0x37ef93&&await BrowserstackCLI[_0x4f94d3(0x211)]()[_0x4f94d3(0x26f)]()[_0x4f94d3(0x2af)](TestFrameworkState[_0x37ef93[_0x4f94d3(0x21c)]],HookState[_0x4f94d3(0x23c)],{'hookData':_0x37ef93,'testUUID':_0x5e5121[_0x4f94d3(0x23a)]});return;}await testObservabilityReporter[_0x4f94d3(0x279)](this['report'],_0x5e8b2f,_0x560d90[_0x4f94d3(0x25b)],_0x4800b7,_0x57c4a5,_tests[_0xe9be03]);}catch(_0x1d6606){logger[_0x4f94d3(0x288)](_0x4f94d3(0x1ed)+util['format'](_0x1d6606));}}async[a6_0x66d8b2(0x27a)](_0xb02bd9,_0x50b5ed){const _0x57fe59=a6_0x66d8b2,_0xcea851={'JsaRe':function(_0x19ddf4,_0x3382b4){return _0x19ddf4===_0x3382b4;},'WzUwl':'1|4|3|0|2','DLNvC':function(_0x3ee305,_0x2b8c43){return _0x3ee305(_0x2b8c43);},'GLXtD':_0x57fe59(0x24f),'LOsdi':function(_0x52a887,_0x484f7a){return _0x52a887===_0x484f7a;},'hwzXs':_0x57fe59(0x283),'kqdCK':function(_0x301c20,_0x16b9b9){return _0x301c20===_0x16b9b9;},'llinX':_0x57fe59(0x2b6),'XJMmL':'testStepId','cRBqI':_0x57fe59(0x251),'ZShQi':_0x57fe59(0x2a6)};this[_0x57fe59(0x2be)][_0x57fe59(0x225)]=this['report'][_0x57fe59(0x225)]||{},this[_0x57fe59(0x2be)][_0x57fe59(0x225)][_0xb02bd9['testCaseStartedId']]=_0xb02bd9;if(_0xcea851[_0x57fe59(0x29e)](shouldProcessEventForTesthub,_0xcea851['GLXtD']))try{const _0x5f113c=_0xb02bd9['testCaseStartedId'],_0x26c3a3=_0x50b5ed[_0x57fe59(0x299)]['testCaseAttemptDataMap'][_0x5f113c][_0x57fe59(0x2bb)],_0x1ff65f=_0x50b5ed[_0x57fe59(0x299)][_0x57fe59(0x219)][_0x26c3a3],_0x48ae1e=_0x1ff65f[_0x57fe59(0x260)],_0x478000=_0x50b5ed[_0x57fe59(0x299)][_0x57fe59(0x26d)][_0x48ae1e],_0x2ddec6=_0xb02bd9[_0x57fe59(0x1f7)],_0x47f194=_0x1ff65f['testSteps'],_0x505eb0=this[_0x57fe59(0x299)][_0x57fe59(0x22d)](_0x5f113c),_0x4f5a0d=_0x47f194['find'](_0x4b6dd7=>_0x4b6dd7['id']===_0x2ddec6)['pickleStepId'];let _0x368456,_0x4e2aeb;_0xb02bd9[_0x57fe59(0x231)]&&_0xcea851['LOsdi'](_0xb02bd9[_0x57fe59(0x231)][_0x57fe59(0x243)][_0x57fe59(0x29a)]()[_0x57fe59(0x2ab)](),_0xcea851[_0x57fe59(0x295)])&&(_0x368456=_0xcea851['kqdCK'](_0xb02bd9[_0x57fe59(0x231)][_0x57fe59(0x1fe)],undefined)?_0xb02bd9[_0x57fe59(0x231)][_0x57fe59(0x277)]:_0xb02bd9[_0x57fe59(0x231)]['exception'][_0x57fe59(0x277)],_0x4e2aeb=_0xcea851[_0x57fe59(0x2a5)](_0xb02bd9[_0x57fe59(0x231)]['exception'],undefined)?_0xcea851[_0x57fe59(0x21e)]:_0xb02bd9[_0x57fe59(0x231)][_0x57fe59(0x277)]);if(_0x4f5a0d&&_tests[_0x26c3a3][_0xcea851['XJMmL']]){const _0x3e5f99=_0x478000['steps'][_0x57fe59(0x256)](_0x1ef5c6=>_0x1ef5c6['id']===_0x4f5a0d),_0x30b051={};_0x30b051[_0x57fe59(0x272)]=[];const _0xbd08af=_tests[_0x26c3a3]||_0x30b051;!_0xbd08af[_0x57fe59(0x272)]?_0xbd08af['steps']=[{'id':_0x3e5f99['id'],'text':_0x3e5f99[_0x57fe59(0x257)],'finished_at':new Date()['toISOString'](),'result':_0xb02bd9['testStepResult'][_0x57fe59(0x243)],'duration':_0xb02bd9[_0x57fe59(0x231)]['duration'][_0x57fe59(0x206)],'failure':_0x368456,'failureType':_0x4e2aeb}]:_0xbd08af[_0x57fe59(0x272)][_0x57fe59(0x226)](_0x45bec9=>{const _0x1c6298=_0x57fe59;if(_0xcea851[_0x1c6298(0x2b7)](_0x45bec9['id'],_0x3e5f99['id'])){const _0x50989f=_0xcea851['WzUwl'][_0x1c6298(0x27b)]('|');let _0x44cc5b=0x0;while(!![]){switch(_0x50989f[_0x44cc5b++]){case'0':_0x45bec9[_0x1c6298(0x218)]=_0x368456;continue;case'1':_0x45bec9[_0x1c6298(0x248)]=new Date()[_0x1c6298(0x1f0)]();continue;case'2':_0x45bec9['failureType']=_0x4e2aeb;continue;case'3':_0x45bec9[_0x1c6298(0x29f)]=_0xb02bd9[_0x1c6298(0x231)][_0x1c6298(0x29f)][_0x1c6298(0x206)];continue;case'4':_0x45bec9['result']=_0xb02bd9[_0x1c6298(0x231)][_0x1c6298(0x243)];continue;}break;}}}),_tests[_0x26c3a3]=_0xbd08af;}delete _tests[_0x26c3a3][_0xcea851[_0x57fe59(0x2bd)]];if(BrowserstackCLI[_0x57fe59(0x211)]()[_0x57fe59(0x209)]()&&await this[_0x57fe59(0x24a)]()){const _0x246306=await cucumberUtils[_0x57fe59(0x2b8)](this[_0x57fe59(0x2be)],_0x5f113c,_0xcea851[_0x57fe59(0x20b)],_0x47f194,_0x2ddec6,_tests[_0x26c3a3]);if(_0x246306){await BrowserstackCLI['getInstance']()['getTestFramework']()[_0x57fe59(0x2af)](TestFrameworkState[_0x246306[_0x57fe59(0x21c)]],HookState[_0x57fe59(0x1fb)],{'hookData':_0x246306,'testUUID':_0xb02bd9[_0x57fe59(0x23a)]});const _0x5ba9a8={};_0x5ba9a8[_0x57fe59(0x280)]=_0xb02bd9[_0x57fe59(0x23a)],_0x5ba9a8['type']=_0xcea851[_0x57fe59(0x215)],await BrowserstackCLI[_0x57fe59(0x211)]()[_0x57fe59(0x26f)]()['trackEvent'](TestFrameworkState['LOG_REPORT'],HookState[_0x57fe59(0x1fb)],_0x5ba9a8);}return;}await testObservabilityReporter[_0x57fe59(0x279)](this['report'],_0x5f113c,_0xcea851[_0x57fe59(0x2ac)],_0x47f194,_0x2ddec6,_tests[_0x26c3a3]);}catch(_0x3a431d){logger['debug'](_0x57fe59(0x234)+util[_0x57fe59(0x237)](_0x3a431d));}}[a6_0x66d8b2(0x252)](_0x5183b6){const _0x141c57=a6_0x66d8b2,_0x3e47d2={};return _0x5183b6[_0x141c57(0x221)][_0x141c57(0x208)]['map'](this['extractStepContainers'])[_0x141c57(0x2a9)]()[_0x141c57(0x226)](_0x4088bd=>_0x4088bd[_0x141c57(0x272)][_0x141c57(0x226)](_0x4d8308=>_0x3e47d2[_0x4d8308['id']]=_0x4d8308)),_0x3e47d2;}[a6_0x66d8b2(0x282)](_0x1f580a){const _0x59965d=a6_0x66d8b2,_0x21258b={'TUjko':function(_0x4717da,_0x44fa15){return _0x4717da(_0x44fa15);}};if(!_0x21258b[_0x59965d(0x274)](isUndefined,_0x1f580a[_0x59965d(0x2c0)]))return[_0x1f580a[_0x59965d(0x2c0)]];else{if(!_0x21258b[_0x59965d(0x274)](isUndefined,_0x1f580a['rule']))return _0x1f580a['rule'][_0x59965d(0x208)][_0x59965d(0x21f)](_0x466231=>!isUndefined(_0x466231[_0x59965d(0x2c0)])?_0x466231['background']:_0x466231['scenario']);};return[_0x1f580a[_0x59965d(0x2c4)]];}[a6_0x66d8b2(0x292)](_0x4828e5,_0x8864b5){const _0x56b12b=a6_0x66d8b2;return Object['values'](_0x4828e5[_0x56b12b(0x299)]['gherkinDocumentMap'])[_0x56b12b(0x256)](_0xee982b=>_0xee982b[_0x56b12b(0x1f6)]===_0x8864b5[_0x56b12b(0x1f6)]);}async[a6_0x66d8b2(0x242)](){const _0x53700c=a6_0x66d8b2;if(this[_0x53700c(0x27d)])return this[_0x53700c(0x27d)];return this['cliInitPromise']=this['_performCLIInitialization'](),this['cliInitPromise'];}async[a6_0x66d8b2(0x1e9)](){const _0x1b0123=a6_0x66d8b2,_0x5b4044={'DjuJH':_0x1b0123(0x249),'CqeYR':function(_0x346b58,_0x36744d){return _0x346b58(_0x36744d);},'ilAQN':_0x1b0123(0x220),'EXSTA':function(_0x44c64d,_0xb6e8ca){return _0x44c64d(_0xb6e8ca);},'PvJMX':'../../utils/constants'};try{const _0x3bef03=BrowserstackCLI[_0x1b0123(0x211)]();if(_0x3bef03[_0x1b0123(0x230)]())return logger[_0x1b0123(0x288)](_0x1b0123(0x29d)+_0x3bef03['binSessionId']),!![];const _0xc697=process['env'][_0x1b0123(0x217)];if(!_0xc697)return logger[_0x1b0123(0x288)](_0x5b4044[_0x1b0123(0x23d)]),![];const _0x1f5e12=_0x5b4044[_0x1b0123(0x223)](require,_0x5b4044['ilAQN']),{FRAMEWORKS:_0x1f0ebf}=_0x5b4044['EXSTA'](require,_0x5b4044[_0x1b0123(0x28a)]);return _0x1f5e12[_0x1b0123(0x21a)](_0x1f0ebf[_0x1b0123(0x25f)],_0x1f0ebf[_0x1b0123(0x238)]),logger['debug'](_0x1b0123(0x20e)+_0xc697),await _0x3bef03[_0x1b0123(0x23f)](),logger[_0x1b0123(0x288)](_0x1b0123(0x28f)+_0x3bef03['isRunning']()+',\x20binSessionId:\x20'+_0x3bef03[_0x1b0123(0x2b4)]),_0x3bef03[_0x1b0123(0x230)]();}catch(_0x5333f5){return logger[_0x1b0123(0x288)](_0x1b0123(0x2ad)+util[_0x1b0123(0x237)](_0x5333f5)),![];}}async['isCLIReady'](){const _0x3f594e=a6_0x66d8b2;try{return await this[_0x3f594e(0x242)](),BrowserstackCLI['getInstance']()[_0x3f594e(0x230)]();}catch(_0xcf9b15){return logger[_0x3f594e(0x288)](_0x3f594e(0x246)+util[_0x3f594e(0x237)](_0xcf9b15)),![];}}}function a6_0x54ce(){const _0x33fe2e=['testCaseStarted','uri','testStepId','onSource','supportCodeLibrary','KXxbq','POST','result','4rNAOIV','exception','OwGCA','onStepDefinition','pickle','939045LrMqUw','env','DwTYg','testRunFinished','seconds','1853540aZGWMZ','children','isCliEnabled','winstonLogger','cRBqI','cucumber','exports','Bootstrapping\x20CLI\x20in\x20formatter\x20with\x20binSessionId:\x20','qUxgA','eIDSf','getInstance','testCases','../../../helpers/testhub/utils.js','INIT_TEST','ZShQi','source','BROWSERSTACK_CLI_BIN_SESSION_ID','failure','testCaseMap','setFrameworkDetail','2jGEMxP','hook_type','__platform','llinX','map','../../v2/cliUtils','feature','onTestRunStarted','CqeYR','isBstackHook','testStepFinished','forEach','pickleStepId','DvIxb','../../v2/state/hookState.js','../../v2/browserstackCLI.js','onTestCaseFinished','gherkinDocument','getTestCaseAttempt','envelope','TEST','isRunning','testStepResult','eventBroadcaster','xPLPX','Exception\x20in\x20onTestStepFinished\x20event:\x20','Executing\x20tests\x20for\x20','LOG_REPORT','format','PLAYWRIGHT','onTestCase','testCaseStartedId','setup','PRE','DjuJH','QSbuK','bootstrap','finishedAt','hPwCS','ensureCLIInitialized','status','1072908WPAfzF','actionLocation','isCLIReady:\x20Error\x20checking\x20CLI\x20readiness:\x20','LyaxZ','finished_at','No\x20BROWSERSTACK_CLI_BIN_SESSION_ID\x20found,\x20CLI\x20not\x20available','isCLIReady','testCaseAttemptDataMap','util','sendTestRunEventForCucumber','SKwDg','HookRunFinished','23504734jFlQzF','HookRunStarted','getGherkinStepMap','assign','9110HwxCNs','cwd','find','text','keyword','name','createTestFrameworkData','nySJb','snippetBuilder','htGtQ','parse','CUCUMBER','pickleId','kFCHo','includes','hooks','wvMsm','qaKrg','testRunStarted','log','@cucumber/cucumber','testCaseAttempt','\x20-\x20','MdJau','ylTUD','pickleMap','push','getTestFramework','FAILED','tUXgU','steps','onHook','TUjko','testCase','Nhhed','message','stepDefinition','sendHook','onTestStepFinished','split','../../v2/state/testFrameworkState.js','cliInitPromise','testStepStarted','PASSED','testUUID','AMBIGUOUS','extractStepContainers','failed','wqASY','TLTzU','wpdyq','AQTAV','debug','type','PvJMX','hdENo','logTestRunFinished','../../v2/utils/cucumber-utils.js','CONFIG','CLI\x20bootstrap\x20completed\x20-\x20isRunning:\x20','path','testSteps','getGherkinDocument','wIcto','TestRunFinished','hwzXs','\x20\x20\x20\x20','fUAiV','HuFEb','eventDataCollector','toString','hffUe','../../../bin/v2/TestInfo.js','CLI\x20already\x20running\x20-\x20binSessionId:\x20','DLNvC','duration','cmevW','2244trvLLm','GrXAK','onPickle','test','kqdCK','hook','sourceLocation','onTestCaseStarted','flat','9KPiSAD','toLowerCase','GLXtD','Error\x20initializing\x20CLI\x20in\x20formatter:\x20','741265KIQEeT','trackEvent','KmptW','onTestStepStarted','5460504AFdMCu','description','binSessionId','../../../helpers/logger','UnhandledError','JsaRe','createHookData','bstack','LMAtD','testCaseId','znoHL','XJMmL','report','Exception\x20in\x20sending\x20onTestCaseFinished\x20event:\x20\x20','background','tYhov','OUcxO','../../../helpers/test-observability/error-handler','scenario','TeTfM','_performCLIInitialization','testCaseFinished','cucumber-js/test.setup.js','IUlwr','Exception\x20in\x20onTestStepStarted\x20event:\x20','UNKNOWN','capability','toISOString','onGherkinDocument','logTestCaseFinished','onTestRunFinished','UNDEFINED'];a6_0x54ce=function(){return _0x33fe2e;};return a6_0x54ce();}module[a6_0x66d8b2(0x20d)]=o11yClassErrorHandler(BrowserstackFormatter,[a6_0x66d8b2(0x2a8),a6_0x66d8b2(0x22b),a6_0x66d8b2(0x2b1),a6_0x66d8b2(0x27a),'onTestRunStarted','onTestRunFinished',a6_0x66d8b2(0x282),a6_0x66d8b2(0x292),'getGherkinStepMap']);