const a6_0x5d645d=a6_0x4c8a;function a6_0x4168(){const _0x14314b=['\x20-\x20','Exception\x20in\x20onTestStepFinished\x20event:\x20','166IoIcTA','report','cucumber','PRE','getTestFramework','uri','forEach','EuEHT','UnhandledError','SKIPPED','HookRunStarted','Swlcr','SXaAX','hiqVT','duration','aDFem','pickleStepId','PASSED','toISOString','testCases','uLinc','testUUID','onSource','isCLIReady:\x20Error\x20checking\x20CLI\x20readiness:\x20','exception','trackEvent','tfbMv','testCaseFinished','onTestCaseStarted','gherkinDocument','Brqwr','getGherkinStepMap','__platform','bstack','debug','GIvFz','tnXYj','IojkR','../../../helpers/testhub/utils.js','FAILED','format','114HdcpYb','llFAt','LfksX','pickleMap','hTMkT','winstonLogger','onTestRunStarted','BWyyR','seconds','uIMiP','find','actionLocation','ensureCLIInitialized','message','failed','GwzNN','../../v2/browserstackCLI.js','TestRunFinished','testStepStarted','getTestUUID','UNDEFINED','../../../helpers/helper','uCaEF','testSteps','isBstackHook','testStepId','testRunFinished','EphFf','sYCAf','UYBvj','LOG_REPORT','sfLyx','TestRunStarted','testCase','onTestRunFinished','BROWSERSTACK_CLI_BIN_SESSION_ID','getGherkinDocument','description','kiYut','11301110yMYmJf','HGtIo','rule','failure','xtusA','pickleId','../../v2/state/hookState.js','TNaSi','push','hook','scenario','env','../../v2/utils/cucumber-utils.js','BOcVO','eventDataCollector','\x20\x20\x20\x20','Exception\x20in\x20sending\x20onTestCaseFinished\x20event:\x20\x20','testStepFinished','capability','sourceLocation','Exception\x20in\x20onTestStepStarted\x20event:\x20','cucumber-js/test.setup.js','parse','isCLIReady','RaAiO','hEauc','GrAAD','toString','HookRunFinished','children','_performCLIInitialization','../../utils/constants','onStepDefinition','path','../../playwright/reporter/test-details.js','UNKNOWN','isCliEnabled','test','CRENJ','getTestCaseAttempt','KRFOh','steps','result','../../../helpers/logger','xNgZD','PLAYWRIGHT','cliInitPromise','zBqjM','isRunning','onTestCaseFinished','sendTestRunEventForCucumber','binSessionId','extractStepContainers','LkzwH','logTestCaseFinished','260995OOlgdm','feature','nhNAn','onTestStepFinished','INIT_TEST','getInstance','MLlGb','hook_type','SZexA','KyICg','CONFIG',',\x20binSessionId:\x20','map','CLI\x20already\x20running\x20-\x20binSessionId:\x20','sendHook','1127959ZvAvPT','log','4755632VFwAFh','POST','exports','gherkinDocumentMap','testCaseId','JDpTj','1368608hbTBXP','TEST','../../../bin/v2/TestInfo.js','assign','HqnuO','eventBroadcaster','4647pzFjTb','name','5086161AKqYyN','text','1|2|3|0|4','background','snippetBuilder','../../v2/state/testFrameworkState.js','testCaseMap','onPickle','lsTFd','toLowerCase','onTestStepStarted','finished_at','No\x20BROWSERSTACK_CLI_BIN_SESSION_ID\x20found,\x20CLI\x20not\x20available','parseTestCaseAttempt','testCaseStartedId','createTestFrameworkData','stepDefinition','Executing\x20tests\x20for\x20','bootstrap','values','util','status','mbuHA','onTestCase','mNsyG','testCaseStarted','../../../helpers/test-observability/error-handler','vBWQQ','PENDING','qiWqT','testRunStarted','hooks','testCaseAttemptDataMap','testStepResult','onHook','TRVUG','envelope','pickle','includes','OFqib','split','24qlSsOu','supportCodeLibrary','SoZcv','logTestRunFinished'];a6_0x4168=function(){return _0x14314b;};return a6_0x4168();}(function(_0x14d175,_0x1086dd){const _0x47fb9d=a6_0x4c8a,_0x58fa9e=_0x14d175();while(!![]){try{const _0x2cd0e7=-parseInt(_0x47fb9d(0x129))/0x1+-parseInt(_0x47fb9d(0x160))/0x2*(-parseInt(_0x47fb9d(0x12f))/0x3)+parseInt(_0x47fb9d(0x123))/0x4+parseInt(_0x47fb9d(0x112))/0x5*(parseInt(_0x47fb9d(0x189))/0x6)+parseInt(_0x47fb9d(0x121))/0x7*(parseInt(_0x47fb9d(0x15a))/0x8)+parseInt(_0x47fb9d(0x131))/0x9+-parseInt(_0x47fb9d(0x1b0))/0xa;if(_0x2cd0e7===_0x1086dd)break;else _0x58fa9e['push'](_0x58fa9e['shift']());}catch(_0x58fb6a){_0x58fa9e['push'](_0x58fa9e['shift']());}}}(a6_0x4168,0xd1bc5));const {requireModule,getPlatformName,nestedKeyValue,isUndefined,isBrowserstackInfra}=require(a6_0x5d645d(0x19e)),util=require(a6_0x5d645d(0x145)),{Formatter,formatterHelpers,Status}=requireModule('@cucumber/cucumber'),TestDetails=require(a6_0x5d645d(0x1d2)),TestObservabilityReporter=require('../test-observability.js'),{o11yClassErrorHandler}=require(a6_0x5d645d(0x14b)),{shouldProcessEventForTesthub}=require(a6_0x5d645d(0x186)),BrowserstackCLI=require(a6_0x5d645d(0x199)),TestFrameworkState=require(a6_0x5d645d(0x136)),HookState=require(a6_0x5d645d(0x1b6)),CucumberUtils=require(a6_0x5d645d(0x1bc)),TestInfo=require(a6_0x5d645d(0x12b)),testObservabilityReporter=new TestObservabilityReporter(),cucumberUtils=new CucumberUtils(),logger=require(a6_0x5d645d(0x1db))[a6_0x5d645d(0x18e)],_tests={},_testCasesData={};class BrowserstackFormatter extends Formatter{constructor(_0xabddbe){const _0x2612c6=a6_0x5d645d,_0x207916={};_0x207916[_0x2612c6(0x17a)]=_0x2612c6(0x155);const _0x5313a1=_0x207916;super(_0xabddbe),this[_0x2612c6(0x161)]={},_0xabddbe[_0x2612c6(0x12e)]['on'](_0x5313a1[_0x2612c6(0x17a)],async _0xacfad6=>{const _0x5b0ceb=_0x2612c6;switch(!![]){case!!_0xacfad6[_0x5b0ceb(0x14f)]:this[_0x5b0ceb(0x18f)](_0xacfad6[_0x5b0ceb(0x14f)]);break;case!!_0xacfad6[_0x5b0ceb(0x1a3)]:this[_0x5b0ceb(0x1ab)](_0xacfad6[_0x5b0ceb(0x1a3)]);break;case!!_0xacfad6[_0x5b0ceb(0x14a)]:this[_0x5b0ceb(0x17c)](_0xacfad6[_0x5b0ceb(0x14a)],_0xabddbe,_0xacfad6);break;case!!_0xacfad6[_0x5b0ceb(0x17b)]:this[_0x5b0ceb(0x1e1)](_0xacfad6['testCaseFinished'],_0xabddbe,_0xacfad6);break;case!!_0xacfad6[_0x5b0ceb(0x19b)]:this[_0x5b0ceb(0x13b)](_0xacfad6[_0x5b0ceb(0x19b)],_0xabddbe);break;case!!_0xacfad6[_0x5b0ceb(0x1c1)]:this['onTestStepFinished'](_0xacfad6[_0x5b0ceb(0x1c1)],_0xabddbe);break;case!!_0xacfad6[_0x5b0ceb(0x1b9)]:this[_0x5b0ceb(0x153)](_0xacfad6['hook']);break;case!!_0xacfad6[_0x5b0ceb(0x1aa)]:this[_0x5b0ceb(0x148)](_0xacfad6['testCase']);break;case!!_0xacfad6[_0x5b0ceb(0x156)]:this[_0x5b0ceb(0x138)](_0xacfad6[_0x5b0ceb(0x156)]);break;case!!_0xacfad6[_0x5b0ceb(0x17d)]:this['onGherkinDocument'](_0xacfad6[_0x5b0ceb(0x17d)]);break;}});}[a6_0x5d645d(0x153)](_0x44a5c6){const _0x2b039b=a6_0x5d645d;this['report']['hooks']=Object[_0x2b039b(0x12c)]([],this['report'][_0x2b039b(0x150)]||[]),this[_0x2b039b(0x161)][_0x2b039b(0x150)]['push'](_0x44a5c6);}[a6_0x5d645d(0x138)](_0x5100e6){const _0x2cfb86=a6_0x5d645d;this[_0x2cfb86(0x161)]['pickle']=Object[_0x2cfb86(0x12c)]([],this['report']['pickle']||[],[_0x5100e6]),this[_0x2cfb86(0x161)][_0x2cfb86(0x156)]['push'](_0x5100e6);}['onGherkinDocument'](_0x5807fb){const _0x1ba5f8=a6_0x5d645d;this[_0x1ba5f8(0x161)][_0x1ba5f8(0x17d)]=Object[_0x1ba5f8(0x12c)]([],this['report'][_0x1ba5f8(0x17d)]||[],[_0x5807fb]),this[_0x1ba5f8(0x161)][_0x1ba5f8(0x17d)][_0x1ba5f8(0x1b8)](_0x5807fb);}[a6_0x5d645d(0x176)](_0x2e879){const _0x36dee8=a6_0x5d645d;this[_0x36dee8(0x161)]['source']=_0x2e879;}[a6_0x5d645d(0x1d0)](_0xe62509){const _0x50911e=a6_0x5d645d;this['report'][_0x50911e(0x141)]=Object[_0x50911e(0x12c)]([],this[_0x50911e(0x161)][_0x50911e(0x141)]||[],[_0xe62509]),this[_0x50911e(0x161)][_0x50911e(0x141)][_0x50911e(0x1b8)](_0xe62509);}['onTestCase'](_0x563808){const _0x48c3c1=a6_0x5d645d;this[_0x48c3c1(0x161)][_0x48c3c1(0x173)]=Object['assign']([],this[_0x48c3c1(0x161)][_0x48c3c1(0x173)]||[],[_0x563808]),this[_0x48c3c1(0x161)]['testCases'][_0x48c3c1(0x1b8)](_0x563808);}[a6_0x5d645d(0x111)](_0x2e58a4){const _0xa50f78=a6_0x5d645d,_0x31add4={'llFAt':function(_0x409d27,_0x43cd76){return _0x409d27!==_0x43cd76;},'EphFf':_0xa50f78(0x181),'zBqjM':function(_0x2d46c3,_0x237e0c){return _0x2d46c3+_0x237e0c;},'NCYNM':function(_0x2895c4,_0x510652){return _0x2895c4+_0x510652;},'TRVUG':function(_0x337208,_0x5ad641){return _0x337208+_0x5ad641;},'CRENJ':_0xa50f78(0x1bf),'HGtIo':_0xa50f78(0x15e),'KyICg':function(_0x13daf0,_0x1e4fd7){return _0x13daf0===_0x1e4fd7;},'SXaAX':_0xa50f78(0x187),'hTMkT':function(_0x2e0640,_0x3a85c0,_0x3199cc){return _0x2e0640(_0x3a85c0,_0x3199cc);},'PLtkZ':_0xa50f78(0x1da),'Swlcr':'message','NvwKF':function(_0x4800fe,_0x3468f6){return _0x4800fe+_0x3468f6;},'RaAiO':function(_0x465f1d,_0x3ee573){return _0x465f1d+_0x3ee573;},'BWyyR':function(_0xfcd591,_0x47e602){return _0xfcd591+_0x47e602;},'HqnuO':function(_0x37a2f0,_0x283084){return _0x37a2f0+_0x283084;},'uCaEF':function(_0x2a5b4b,_0x51da58){return _0x2a5b4b+_0x51da58;},'GIvFz':function(_0x45acfb,_0x424ca2){return _0x45acfb+_0x424ca2;}};_0x31add4[_0xa50f78(0x18a)](global[_0xa50f78(0x180)],undefined)&&this['log'](_0x31add4[_0xa50f78(0x1c8)](_0x31add4['HqnuO']('\x0a',global[_0xa50f78(0x180)]),'\x0a'));const _0x122a6c=this[_0xa50f78(0x1be)][_0xa50f78(0x1d7)](_0x2e58a4['testCaseStartedId']);this[_0xa50f78(0x122)](_0x31add4[_0xa50f78(0x12d)](_0x31add4[_0xa50f78(0x19f)](_0x31add4[_0xa50f78(0x183)](_0x31add4[_0xa50f78(0x183)]('\x20\x20',_0x122a6c[_0xa50f78(0x17d)][_0xa50f78(0x113)][_0xa50f78(0x130)]),_0x31add4['HGtIo']),_0x122a6c[_0xa50f78(0x156)][_0xa50f78(0x130)]),'\x0a'));const _0x4d5176={};_0x4d5176['cwd']=this['cwd'],_0x4d5176[_0xa50f78(0x135)]=this[_0xa50f78(0x135)],_0x4d5176[_0xa50f78(0x15b)]=this[_0xa50f78(0x15b)],_0x4d5176['testCaseAttempt']=_0x122a6c;const _0x2aa9dc=formatterHelpers[_0xa50f78(0x13e)](_0x4d5176);let _0x5666bd=![];_0x2aa9dc['testSteps'][_0xa50f78(0x166)](_0x34e73b=>{const _0x3220c4=_0xa50f78;if(_0x31add4[_0x3220c4(0x18a)](_0x34e73b[_0x3220c4(0x130)],_0x31add4[_0x3220c4(0x1a4)])&&!this[_0x3220c4(0x1a1)](_0x34e73b)){totalTests+=0x1,this[_0x3220c4(0x122)](_0x31add4[_0x3220c4(0x1df)](_0x31add4[_0x3220c4(0x1df)](_0x31add4['zBqjM'](_0x31add4['NCYNM'](_0x31add4[_0x3220c4(0x154)](_0x31add4[_0x3220c4(0x1d6)],_0x34e73b['keyword']),_0x34e73b[_0x3220c4(0x132)]||''),_0x31add4[_0x3220c4(0x1b1)]),Status[_0x34e73b[_0x3220c4(0x1da)]['status']]),'\x0a')),this['incrementCounter'](Status[_0x34e73b[_0x3220c4(0x1da)][_0x3220c4(0x146)]]);if(_0x31add4[_0x3220c4(0x11b)](Status[_0x34e73b[_0x3220c4(0x1da)][_0x3220c4(0x146)]],_0x31add4[_0x3220c4(0x16c)])){_0x5666bd=!![];const _0x58df84=_0x31add4[_0x3220c4(0x18d)](nestedKeyValue,_0x34e73b,[_0x31add4['PLtkZ'],_0x31add4[_0x3220c4(0x16b)]]);_0x58df84&&(testsErrorMessage[_0x31add4['NvwKF'](_0x31add4[_0x3220c4(0x1c8)](_0x122a6c[_0x3220c4(0x17d)][_0x3220c4(0x113)][_0x3220c4(0x130)],_0x31add4[_0x3220c4(0x1b1)]),_0x122a6c[_0x3220c4(0x156)][_0x3220c4(0x130)])]=_0x58df84,this[_0x3220c4(0x122)](_0x31add4[_0x3220c4(0x190)](_0x58df84,'\x0a')));}}}),_0x5666bd&&(testSuitesFailed+=0x1),this[_0xa50f78(0x122)]('\x0a');}[a6_0x5d645d(0x15d)](_0x45d84d){}[a6_0x5d645d(0x1a1)](_0x399e86){const _0x14a7c9=a6_0x5d645d,_0x2b1822={};_0x2b1822[_0x14a7c9(0x1af)]=function(_0x44d0d9,_0x5b029f){return _0x44d0d9!==_0x5b029f;},_0x2b1822['cdQnY']=_0x14a7c9(0x1c5);const _0x195149=_0x2b1822;if(_0x195149[_0x14a7c9(0x1af)](_0x399e86[_0x14a7c9(0x1c3)],undefined))return![];if(_0x399e86[_0x14a7c9(0x194)]&&_0x399e86[_0x14a7c9(0x194)][_0x14a7c9(0x165)][_0x14a7c9(0x157)](_0x195149['cdQnY']))return!![];return![];}['incrementCounter'](_0xaaeb9f){const _0x4ecd88=a6_0x5d645d,_0x1a32d7={};_0x1a32d7[_0x4ecd88(0x17e)]='FAILED',_0x1a32d7[_0x4ecd88(0x149)]=_0x4ecd88(0x171),_0x1a32d7['xtusA']=_0x4ecd88(0x169),_0x1a32d7[_0x4ecd88(0x118)]=_0x4ecd88(0x14d),_0x1a32d7[_0x4ecd88(0x128)]=_0x4ecd88(0x19d),_0x1a32d7[_0x4ecd88(0x1dc)]=_0x4ecd88(0x1d3),_0x1a32d7[_0x4ecd88(0x15c)]='AMBIGUOUS';const _0xb00310=_0x1a32d7;switch(_0xaaeb9f){case _0xb00310[_0x4ecd88(0x17e)]:testsFailed+=0x1;break;case _0xb00310[_0x4ecd88(0x149)]:testsPassed+=0x1;break;case _0xb00310[_0x4ecd88(0x1b4)]:testsSkipped+=0x1;break;case _0xb00310[_0x4ecd88(0x118)]:testsPending+=0x1;break;case _0xb00310[_0x4ecd88(0x128)]:testsUndefined+=0x1;break;case _0xb00310['xNgZD']:testsUnknown+=0x1;break;case _0xb00310[_0x4ecd88(0x15c)]:testsAmbiguous+=0x1;break;default:break;}}async[a6_0x5d645d(0x18f)](_0x42a827){const _0x2fedb5=a6_0x5d645d,_0x5033af={'RfRAn':function(_0x3b5244,_0x3c60e1){return _0x3b5244!==_0x3c60e1;},'mbuHA':function(_0x1370a5,_0x4a991f){return _0x1370a5!==_0x4a991f;},'GwzNN':function(_0x44e745){return _0x44e745();},'KRFOh':function(_0x494c4f,_0x459d26){return _0x494c4f(_0x459d26);},'ULUCM':function(_0x4cd6b8,_0x55a497){return _0x4cd6b8+_0x55a497;},'OFqib':_0x2fedb5(0x162)};let _0x424898;if(_0x5033af['RfRAn'](process[_0x2fedb5(0x1bb)][_0x2fedb5(0x11c)],undefined)){const _0x3fb86e=JSON[_0x2fedb5(0x1c6)](process['env']['CONFIG']);_0x424898=_0x3fb86e[_0x2fedb5(0x1c2)];}_0x5033af[_0x2fedb5(0x147)](_0x424898,undefined)&&_0x5033af['GwzNN'](isBrowserstackInfra)&&(global[_0x2fedb5(0x180)]=_0x5033af[_0x2fedb5(0x1d8)](getPlatformName,_0x424898),this[_0x2fedb5(0x122)](_0x5033af['ULUCM'](_0x2fedb5(0x142)+global[_0x2fedb5(0x180)],'\x0a'))),_0x5033af[_0x2fedb5(0x198)](shouldProcessEventForTesthub)&&(TestDetails['setup'](),this[_0x2fedb5(0x161)]['testRunStarted']=_0x42a827,BrowserstackCLI[_0x2fedb5(0x117)]()[_0x2fedb5(0x1d4)]()&&await this[_0x2fedb5(0x1c7)]()&&(TestInfo['setup'](_0x5033af[_0x2fedb5(0x158)]),await BrowserstackCLI['getInstance']()[_0x2fedb5(0x164)]()[_0x2fedb5(0x179)](TestFrameworkState[_0x2fedb5(0x116)],HookState[_0x2fedb5(0x163)],{})));}[a6_0x5d645d(0x1ab)](_0x4a38db){const _0x5d7a71=a6_0x5d645d;this[_0x5d7a71(0x161)][_0x5d7a71(0x1a3)]=_0x4a38db,this['logTestRunFinished'](_0x4a38db);}async[a6_0x5d645d(0x17c)](_0x3129be,_0x5c6216,_0x38cac1){const _0x44a64c=a6_0x5d645d,_0x26f162={'EuEHT':function(_0xd8f84b,_0x3a9514){return _0xd8f84b(_0x3a9514);},'SZexA':_0x44a64c(0x1a9),'uLinc':function(_0x44c3aa,_0x3c5c99){return _0x44c3aa&&_0x3c5c99;}};testSuites+=0x1;if(_0x26f162[_0x44a64c(0x167)](shouldProcessEventForTesthub,_0x26f162['SZexA']))try{this[_0x44a64c(0x161)][_0x44a64c(0x14a)]=this[_0x44a64c(0x161)][_0x44a64c(0x14a)]||{},this['report'][_0x44a64c(0x14a)][_0x3129be['id']]=_0x3129be;let _0x2e60f0=null;BrowserstackCLI[_0x44a64c(0x117)]()['isCliEnabled']()&&await this['isCLIReady']()?_0x2e60f0=TestInfo[_0x44a64c(0x19c)](_0x3129be['id']):_0x2e60f0=TestDetails['getTestUUID'](_0x3129be['id']);_testCasesData[_0x3129be['id']]=Object[_0x44a64c(0x12c)]({},_0x38cac1);const _0x335c44=this['report'],_0x14a6c6=_0x3129be[_0x44a64c(0x127)],_0x5c945a=_0x335c44[_0x44a64c(0x173)]['find'](_0x3b0c60=>_0x3b0c60['id']===_0x14a6c6)[_0x44a64c(0x1b5)],_0x19b61e=_0x335c44['pickle']['find'](_0x53d307=>_0x53d307['id']===_0x5c945a),_0xbd675e=_0x335c44[_0x44a64c(0x17d)][_0x44a64c(0x193)](_0x277ec6=>_0x277ec6['uri']===_0x19b61e['uri']),_0x2dec00=_0xbd675e['feature'],_0x2113d6={'uuid':_0x2e60f0,'startedAt':new Date()['toISOString']()};if(_0x19b61e){const _0x2dfa9e={};_0x2dfa9e[_0x44a64c(0x130)]=_0x19b61e[_0x44a64c(0x130)],_0x2113d6['scenario']=_0x2dfa9e;}if(_0x26f162[_0x44a64c(0x174)](_0xbd675e,_0x2dec00)){const _0x1f61fd={};_0x1f61fd[_0x44a64c(0x1d1)]=_0xbd675e['uri'],_0x1f61fd['name']=_0x2dec00['name'],_0x1f61fd['description']=_0x2dec00[_0x44a64c(0x1ae)],_0x2113d6['feature']=_0x1f61fd;}_tests[_0x14a6c6]=_0x2113d6;if(BrowserstackCLI[_0x44a64c(0x117)]()[_0x44a64c(0x1d4)]()&&await this[_0x44a64c(0x1c7)]()){const _0x2271e9=await cucumberUtils['createTestFrameworkData'](_0x2113d6,_0x19b61e,_0x38cac1,_0xbd675e,_0x3129be['id'],_0x26f162[_0x44a64c(0x11a)]),_0x951d34={};_0x951d34[_0x44a64c(0x1d5)]=_0x2271e9,await BrowserstackCLI[_0x44a64c(0x117)]()[_0x44a64c(0x164)]()['trackEvent'](TestFrameworkState['TEST'],HookState['PRE'],_0x951d34);return;}await testObservabilityReporter[_0x44a64c(0x1e2)](_0x38cac1,_0xbd675e,_0x19b61e,_0x26f162[_0x44a64c(0x11a)],_0x2113d6);}catch(_0x57754e){logger['debug']('Exception\x20in\x20sending\x20onTestCaseStarted:\x20'+util['format'](_0x57754e)+'\x20');}}async[a6_0x5d645d(0x1e1)](_0x161a66,_0x2d1ceb,_0x2408e4){const _0x1105ce=a6_0x5d645d,_0x310802={'OVHjv':function(_0x45f67f,_0x21974a){return _0x45f67f(_0x21974a);},'UYBvj':_0x1105ce(0x19a),'sYCAf':'test'};this[_0x1105ce(0x111)](_0x161a66);if(_0x310802['OVHjv'](shouldProcessEventForTesthub,_0x310802[_0x1105ce(0x1a6)]))try{this['report'][_0x1105ce(0x17b)]=this['report'][_0x1105ce(0x17b)]||{},this['report'][_0x1105ce(0x17b)][_0x161a66[_0x1105ce(0x13f)]]=_0x161a66,_testCasesData[_0x2408e4['id']]=Object[_0x1105ce(0x12c)]({},_0x2408e4);const _0x2d4ee7=_0x161a66[_0x1105ce(0x13f)],_0x408809=_0x2d1ceb['eventDataCollector']['testCaseAttemptDataMap'][_0x2d4ee7][_0x1105ce(0x127)],_0x551881=_0x2d1ceb[_0x1105ce(0x1be)]['testCaseMap'][_0x408809],_0x4acb38=_0x551881[_0x1105ce(0x1b5)],_0x693c6a=_0x2d1ceb[_0x1105ce(0x1be)]['pickleMap'][_0x4acb38],_0x348084=this[_0x1105ce(0x1ad)](_0x2d1ceb,_0x693c6a),_0x4b32e1=_0x348084['feature'],_0x4c0bef=_tests[_0x408809];_0x4c0bef&&(delete _tests[_0x408809],_0x4c0bef['finishedAt']=new Date()[_0x1105ce(0x172)]());if(BrowserstackCLI[_0x1105ce(0x117)]()[_0x1105ce(0x1d4)]()&&await this[_0x1105ce(0x1c7)]()){const _0x4fb049=await cucumberUtils[_0x1105ce(0x140)](_0x4c0bef,_0x693c6a,_0x2408e4,_0x348084,_0x2d4ee7,_0x310802[_0x1105ce(0x1a6)]),_0x28c920={};_0x28c920[_0x1105ce(0x1d5)]=_0x4fb049,await BrowserstackCLI[_0x1105ce(0x117)]()[_0x1105ce(0x164)]()[_0x1105ce(0x179)](TestFrameworkState[_0x1105ce(0x12a)],HookState['POST'],_0x28c920);const _0x52ac9={};_0x52ac9[_0x1105ce(0x175)]=_0x161a66[_0x1105ce(0x13f)],_0x52ac9['type']=_0x310802[_0x1105ce(0x1a5)],await BrowserstackCLI[_0x1105ce(0x117)]()[_0x1105ce(0x164)]()['trackEvent'](TestFrameworkState[_0x1105ce(0x1a7)],HookState['POST'],_0x52ac9);return;}await testObservabilityReporter[_0x1105ce(0x1e2)](_0x2408e4,_0x348084,_0x693c6a,_0x310802['UYBvj'],_0x4c0bef);}catch(_0x53431e){logger[_0x1105ce(0x182)](_0x1105ce(0x1c0)+util['format'](_0x53431e));}}async[a6_0x5d645d(0x13b)](_0x359e5d,_0x19b7e7){const _0x5100ab=a6_0x5d645d,_0x1dbef8={'vrKnP':function(_0x485ff7,_0x4291d8){return _0x485ff7(_0x4291d8);},'LkzwH':_0x5100ab(0x16a),'nhNAn':function(_0x111808,_0x12ab0f){return _0x111808!==_0x12ab0f;},'TNaSi':'testStepId'};if(_0x1dbef8['vrKnP'](shouldProcessEventForTesthub,_0x1dbef8[_0x5100ab(0x110)]))try{this[_0x5100ab(0x161)][_0x5100ab(0x19b)]=this[_0x5100ab(0x161)][_0x5100ab(0x19b)]||{},this[_0x5100ab(0x161)][_0x5100ab(0x19b)][_0x359e5d[_0x5100ab(0x13f)]]=_0x359e5d;const _0x4ad56a=_0x359e5d[_0x5100ab(0x13f)],_0x1d6d00=_0x19b7e7[_0x5100ab(0x1be)][_0x5100ab(0x151)][_0x4ad56a][_0x5100ab(0x127)],_0x2cf822=this[_0x5100ab(0x161)]['testCases'][_0x5100ab(0x193)](_0x3fbb13=>_0x3fbb13['id']===_0x1d6d00)[_0x5100ab(0x1b5)],_0x52e27e=this[_0x5100ab(0x161)][_0x5100ab(0x156)][_0x5100ab(0x193)](_0x3233f3=>_0x3233f3['id']===_0x2cf822),_0x5aeed7=this[_0x5100ab(0x161)]['testCases'][_0x5100ab(0x193)](_0x44eedf=>_0x44eedf['id']===_0x1d6d00)[_0x5100ab(0x1a0)],_0x3df066=this[_0x5100ab(0x161)][_0x5100ab(0x19b)][_0x4ad56a]['testStepId'],_0x9c8dab=_0x5aeed7['find'](_0x4fd929=>_0x4fd929['id']===_0x3df066)['pickleStepId'],_0x3473b1=_0x52e27e['steps']['find'](_0x37a160=>_0x37a160['id']===_0x9c8dab);if(_0x9c8dab&&_tests[_0x1d6d00]&&_0x1dbef8[_0x5100ab(0x114)](_tests[_0x1d6d00][_0x1dbef8[_0x5100ab(0x1b7)]],_0x3df066)){_tests[_0x1d6d00][_0x1dbef8[_0x5100ab(0x1b7)]]=_0x3df066;const _0x26254f={};_0x26254f[_0x5100ab(0x1d9)]=[];const _0x1b26fa=_tests[_0x1d6d00]||_0x26254f;_0x1b26fa&&!_0x1b26fa['steps']&&(_0x1b26fa[_0x5100ab(0x1d9)]=[]),_0x1b26fa[_0x5100ab(0x1d9)][_0x5100ab(0x1b8)]({'id':_0x3473b1['id'],'text':_0x3473b1[_0x5100ab(0x132)],'started_at':new Date()[_0x5100ab(0x172)]()}),_tests[_0x1d6d00]=_0x1b26fa;}if(BrowserstackCLI[_0x5100ab(0x117)]()['isCliEnabled']()&&await this['isCLIReady']()){const _0x5d2867=await cucumberUtils['createHookData'](this[_0x5100ab(0x161)],_0x4ad56a,_0x1dbef8[_0x5100ab(0x110)],_0x5aeed7,_0x3df066,_tests[_0x1d6d00]);_0x5d2867&&await BrowserstackCLI['getInstance']()['getTestFramework']()[_0x5100ab(0x179)](TestFrameworkState[_0x5d2867[_0x5100ab(0x119)]],HookState[_0x5100ab(0x163)],{'hookData':_0x5d2867,'testUUID':_0x359e5d[_0x5100ab(0x13f)]});return;}await testObservabilityReporter[_0x5100ab(0x120)](this[_0x5100ab(0x161)],_0x4ad56a,_0x1dbef8['LkzwH'],_0x5aeed7,_0x3df066,_tests[_0x1d6d00]);}catch(_0x30f0b2){logger[_0x5100ab(0x182)](_0x5100ab(0x1c4)+util[_0x5100ab(0x188)](_0x30f0b2));}}async['onTestStepFinished'](_0x39f1c1,_0x5c15c9){const _0x36bbf5=a6_0x5d645d,_0x447ed9={'hiqVT':function(_0x2da3ab,_0x586d60){return _0x2da3ab===_0x586d60;},'GrAAD':_0x36bbf5(0x133),'RTKRA':function(_0x3accc1,_0x3d267f){return _0x3accc1(_0x3d267f);},'LfksX':_0x36bbf5(0x1cc),'qiWqT':function(_0x3cee5f,_0x1aea15){return _0x3cee5f===_0x1aea15;},'lsTFd':_0x36bbf5(0x197),'xorvE':_0x36bbf5(0x168),'uIMiP':_0x36bbf5(0x1a2),'aDFem':_0x36bbf5(0x16a),'hEauc':'hook'};this[_0x36bbf5(0x161)]['testStepFinished']=this[_0x36bbf5(0x161)][_0x36bbf5(0x1c1)]||{},this['report'][_0x36bbf5(0x1c1)][_0x39f1c1[_0x36bbf5(0x13f)]]=_0x39f1c1;if(_0x447ed9['RTKRA'](shouldProcessEventForTesthub,_0x447ed9['LfksX']))try{const _0x795d6b=_0x39f1c1['testCaseStartedId'],_0x503951=_0x5c15c9[_0x36bbf5(0x1be)]['testCaseAttemptDataMap'][_0x795d6b][_0x36bbf5(0x127)],_0x45ca30=_0x5c15c9['eventDataCollector'][_0x36bbf5(0x137)][_0x503951],_0x255e55=_0x45ca30[_0x36bbf5(0x1b5)],_0x4c197f=_0x5c15c9[_0x36bbf5(0x1be)][_0x36bbf5(0x18c)][_0x255e55],_0x23eef9=_0x39f1c1[_0x36bbf5(0x1a2)],_0x1dd7e2=_0x45ca30[_0x36bbf5(0x1a0)],_0x4e578f=this[_0x36bbf5(0x1be)][_0x36bbf5(0x1d7)](_0x795d6b),_0x510645=_0x1dd7e2['find'](_0x2d3773=>_0x2d3773['id']===_0x23eef9)[_0x36bbf5(0x170)];let _0x31e21e,_0x587eaa;_0x39f1c1[_0x36bbf5(0x152)]&&_0x447ed9[_0x36bbf5(0x14e)](_0x39f1c1[_0x36bbf5(0x152)]['status'][_0x36bbf5(0x1cb)]()[_0x36bbf5(0x13a)](),_0x447ed9[_0x36bbf5(0x139)])&&(_0x31e21e=_0x447ed9[_0x36bbf5(0x16d)](_0x39f1c1[_0x36bbf5(0x152)][_0x36bbf5(0x178)],undefined)?_0x39f1c1[_0x36bbf5(0x152)][_0x36bbf5(0x196)]:_0x39f1c1[_0x36bbf5(0x152)][_0x36bbf5(0x178)][_0x36bbf5(0x196)],_0x587eaa=_0x447ed9[_0x36bbf5(0x14e)](_0x39f1c1['testStepResult'][_0x36bbf5(0x178)],undefined)?_0x447ed9['xorvE']:_0x39f1c1[_0x36bbf5(0x152)][_0x36bbf5(0x196)]);if(_0x510645&&_tests[_0x503951][_0x447ed9[_0x36bbf5(0x192)]]){const _0x4fd5b3=_0x4c197f[_0x36bbf5(0x1d9)][_0x36bbf5(0x193)](_0x376165=>_0x376165['id']===_0x510645),_0xc9bd2c={};_0xc9bd2c[_0x36bbf5(0x1d9)]=[];const _0x467058=_tests[_0x503951]||_0xc9bd2c;!_0x467058[_0x36bbf5(0x1d9)]?_0x467058[_0x36bbf5(0x1d9)]=[{'id':_0x4fd5b3['id'],'text':_0x4fd5b3[_0x36bbf5(0x132)],'finished_at':new Date()[_0x36bbf5(0x172)](),'result':_0x39f1c1[_0x36bbf5(0x152)][_0x36bbf5(0x146)],'duration':_0x39f1c1[_0x36bbf5(0x152)][_0x36bbf5(0x16e)][_0x36bbf5(0x191)],'failure':_0x31e21e,'failureType':_0x587eaa}]:_0x467058['steps'][_0x36bbf5(0x166)](_0x555736=>{const _0x2cc1fb=_0x36bbf5;if(_0x447ed9[_0x2cc1fb(0x16d)](_0x555736['id'],_0x4fd5b3['id'])){const _0x96db22=_0x447ed9[_0x2cc1fb(0x1ca)][_0x2cc1fb(0x159)]('|');let _0x420481=0x0;while(!![]){switch(_0x96db22[_0x420481++]){case'0':_0x555736[_0x2cc1fb(0x1b3)]=_0x31e21e;continue;case'1':_0x555736[_0x2cc1fb(0x13c)]=new Date()[_0x2cc1fb(0x172)]();continue;case'2':_0x555736[_0x2cc1fb(0x1da)]=_0x39f1c1[_0x2cc1fb(0x152)]['status'];continue;case'3':_0x555736[_0x2cc1fb(0x16e)]=_0x39f1c1[_0x2cc1fb(0x152)][_0x2cc1fb(0x16e)][_0x2cc1fb(0x191)];continue;case'4':_0x555736['failureType']=_0x587eaa;continue;}break;}}}),_tests[_0x503951]=_0x467058;}delete _tests[_0x503951][_0x447ed9[_0x36bbf5(0x192)]];if(BrowserstackCLI[_0x36bbf5(0x117)]()[_0x36bbf5(0x1d4)]()&&await this[_0x36bbf5(0x1c7)]()){const _0x54240b=await cucumberUtils['createHookData'](this[_0x36bbf5(0x161)],_0x795d6b,_0x447ed9[_0x36bbf5(0x16f)],_0x1dd7e2,_0x23eef9,_tests[_0x503951]);if(_0x54240b){await BrowserstackCLI[_0x36bbf5(0x117)]()['getTestFramework']()[_0x36bbf5(0x179)](TestFrameworkState[_0x54240b['hook_type']],HookState[_0x36bbf5(0x124)],{'hookData':_0x54240b,'testUUID':_0x39f1c1[_0x36bbf5(0x13f)]});const _0x7b1c96={};_0x7b1c96['testUUID']=_0x39f1c1[_0x36bbf5(0x13f)],_0x7b1c96['type']=_0x447ed9[_0x36bbf5(0x1c9)],await BrowserstackCLI[_0x36bbf5(0x117)]()['getTestFramework']()['trackEvent'](TestFrameworkState[_0x36bbf5(0x1a7)],HookState[_0x36bbf5(0x124)],_0x7b1c96);}return;}await testObservabilityReporter[_0x36bbf5(0x120)](this[_0x36bbf5(0x161)],_0x795d6b,_0x447ed9[_0x36bbf5(0x18b)],_0x1dd7e2,_0x23eef9,_tests[_0x503951]);}catch(_0x4a2978){logger[_0x36bbf5(0x182)](_0x36bbf5(0x15f)+util[_0x36bbf5(0x188)](_0x4a2978));}}[a6_0x5d645d(0x17f)](_0x44d597){const _0x2798d4=a6_0x5d645d,_0x1ea44f={};return _0x44d597[_0x2798d4(0x113)]['children'][_0x2798d4(0x11e)](this['extractStepContainers'])['flat']()[_0x2798d4(0x166)](_0x5515b4=>_0x5515b4[_0x2798d4(0x1d9)][_0x2798d4(0x166)](_0x2b4a6e=>_0x1ea44f[_0x2b4a6e['id']]=_0x2b4a6e)),_0x1ea44f;}[a6_0x5d645d(0x1e4)](_0x186daf){const _0x129cca=a6_0x5d645d,_0x2534a1={'sfLyx':function(_0x500888,_0x34adf8){return _0x500888(_0x34adf8);}};if(!_0x2534a1['sfLyx'](isUndefined,_0x186daf[_0x129cca(0x134)]))return[_0x186daf[_0x129cca(0x134)]];else{if(!_0x2534a1[_0x129cca(0x1a8)](isUndefined,_0x186daf['rule']))return _0x186daf[_0x129cca(0x1b2)][_0x129cca(0x1cd)][_0x129cca(0x11e)](_0x2f46b9=>!isUndefined(_0x2f46b9[_0x129cca(0x134)])?_0x2f46b9['background']:_0x2f46b9[_0x129cca(0x1ba)]);};return[_0x186daf[_0x129cca(0x1ba)]];}['getGherkinDocument'](_0x19aa16,_0x538d09){const _0xc08e7f=a6_0x5d645d;return Object[_0xc08e7f(0x144)](_0x19aa16[_0xc08e7f(0x1be)][_0xc08e7f(0x126)])[_0xc08e7f(0x193)](_0xe92b98=>_0xe92b98[_0xc08e7f(0x165)]===_0x538d09[_0xc08e7f(0x165)]);}async[a6_0x5d645d(0x195)](){const _0x259bf3=a6_0x5d645d;if(this[_0x259bf3(0x1de)])return this[_0x259bf3(0x1de)];return this['cliInitPromise']=this['_performCLIInitialization'](),this[_0x259bf3(0x1de)];}async[a6_0x5d645d(0x1ce)](){const _0x5778e2=a6_0x5d645d,_0x248b1b={'tnXYj':_0x5778e2(0x13d),'BOcVO':function(_0x13eee5,_0x33153d){return _0x13eee5(_0x33153d);},'IojkR':'../../v2/cliUtils','vBWQQ':_0x5778e2(0x1cf)};try{const _0x2a3dd5=BrowserstackCLI[_0x5778e2(0x117)]();if(_0x2a3dd5[_0x5778e2(0x1e0)]())return logger[_0x5778e2(0x182)](_0x5778e2(0x11f)+_0x2a3dd5[_0x5778e2(0x1e3)]),!![];const _0x3d19fd=process['env'][_0x5778e2(0x1ac)];if(!_0x3d19fd)return logger[_0x5778e2(0x182)](_0x248b1b[_0x5778e2(0x184)]),![];const _0x3948e1=_0x248b1b[_0x5778e2(0x1bd)](require,_0x248b1b[_0x5778e2(0x185)]),{FRAMEWORKS:_0x473f14}=_0x248b1b['BOcVO'](require,_0x248b1b[_0x5778e2(0x14c)]);return _0x3948e1['setFrameworkDetail'](_0x473f14['CUCUMBER'],_0x473f14[_0x5778e2(0x1dd)]),logger['debug']('Bootstrapping\x20CLI\x20in\x20formatter\x20with\x20binSessionId:\x20'+_0x3d19fd),await _0x2a3dd5[_0x5778e2(0x143)](),logger[_0x5778e2(0x182)]('CLI\x20bootstrap\x20completed\x20-\x20isRunning:\x20'+_0x2a3dd5[_0x5778e2(0x1e0)]()+_0x5778e2(0x11d)+_0x2a3dd5[_0x5778e2(0x1e3)]),_0x2a3dd5[_0x5778e2(0x1e0)]();}catch(_0x4e0248){return logger[_0x5778e2(0x182)]('Error\x20initializing\x20CLI\x20in\x20formatter:\x20'+util['format'](_0x4e0248)),![];}}async[a6_0x5d645d(0x1c7)](){const _0x5bfb9a=a6_0x5d645d;try{return await this[_0x5bfb9a(0x195)](),BrowserstackCLI[_0x5bfb9a(0x117)]()['isRunning']();}catch(_0x2beba9){return logger[_0x5bfb9a(0x182)](_0x5bfb9a(0x177)+util[_0x5bfb9a(0x188)](_0x2beba9)),![];}}}function a6_0x4c8a(_0x51a3ab,_0x52f65c){const _0x4168eb=a6_0x4168();return a6_0x4c8a=function(_0x4c8af7,_0x1c5c3e){_0x4c8af7=_0x4c8af7-0x110;let _0x1df758=_0x4168eb[_0x4c8af7];return _0x1df758;},a6_0x4c8a(_0x51a3ab,_0x52f65c);}module[a6_0x5d645d(0x125)]=o11yClassErrorHandler(BrowserstackFormatter,[a6_0x5d645d(0x17c),'onTestCaseFinished',a6_0x5d645d(0x13b),a6_0x5d645d(0x115),a6_0x5d645d(0x18f),'onTestRunFinished',a6_0x5d645d(0x1e4),a6_0x5d645d(0x1ad),a6_0x5d645d(0x17f)]);