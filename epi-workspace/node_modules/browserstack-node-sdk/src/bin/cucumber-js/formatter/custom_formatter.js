const a6_0x1df254=a6_0x2e11;(function(_0x30af2d,_0x4a75f2){const _0x4d9273=a6_0x2e11,_0x4fff95=_0x30af2d();while(!![]){try{const _0x1c8f24=parseInt(_0x4d9273(0x2be))/0x1*(-parseInt(_0x4d9273(0x2b7))/0x2)+parseInt(_0x4d9273(0x23d))/0x3*(parseInt(_0x4d9273(0x276))/0x4)+-parseInt(_0x4d9273(0x235))/0x5+-parseInt(_0x4d9273(0x206))/0x6*(parseInt(_0x4d9273(0x299))/0x7)+-parseInt(_0x4d9273(0x214))/0x8*(-parseInt(_0x4d9273(0x243))/0x9)+parseInt(_0x4d9273(0x266))/0xa+parseInt(_0x4d9273(0x23e))/0xb;if(_0x1c8f24===_0x4a75f2)break;else _0x4fff95['push'](_0x4fff95['shift']());}catch(_0x44747a){_0x4fff95['push'](_0x4fff95['shift']());}}}(a6_0x4b36,0x89af3));const {requireModule,getPlatformName,nestedKeyValue,isUndefined,isBrowserstackInfra}=require('../../../helpers/helper'),util=require(a6_0x1df254(0x1fa)),{Formatter,formatterHelpers,Status}=requireModule(a6_0x1df254(0x285)),TestDetails=require(a6_0x1df254(0x213)),TestObservabilityReporter=require(a6_0x1df254(0x21e)),{o11yClassErrorHandler}=require('../../../helpers/test-observability/error-handler'),{shouldProcessEventForTesthub}=require('../../../helpers/testhub/utils.js'),BrowserstackCLI=require(a6_0x1df254(0x203)),TestFrameworkState=require(a6_0x1df254(0x288)),HookState=require(a6_0x1df254(0x23c)),CucumberUtils=require(a6_0x1df254(0x296)),TestInfo=require('../../../bin/v2/TestInfo.js'),testObservabilityReporter=new TestObservabilityReporter(),cucumberUtils=new CucumberUtils(),logger=require('../../../helpers/logger')[a6_0x1df254(0x241)],_tests={},_testCasesData={};function a6_0x2e11(_0x4f87ef,_0x4bf7a7){const _0x4b360c=a6_0x4b36();return a6_0x2e11=function(_0x2e11a6,_0x23411c){_0x2e11a6=_0x2e11a6-0x1ef;let _0x5ce84e=_0x4b360c[_0x2e11a6];return _0x5ce84e;},a6_0x2e11(_0x4f87ef,_0x4bf7a7);}class BrowserstackFormatter extends Formatter{constructor(_0xac1473){const _0x191385=a6_0x1df254,_0x3590b2={};_0x3590b2[_0x191385(0x20a)]=_0x191385(0x275);const _0x4d6a41=_0x3590b2;super(_0xac1473),this[_0x191385(0x240)]={},_0xac1473[_0x191385(0x28f)]['on'](_0x4d6a41[_0x191385(0x20a)],async _0x45cc98=>{const _0x1433bc=_0x191385;switch(!![]){case!!_0x45cc98[_0x1433bc(0x1fe)]:this[_0x1433bc(0x280)](_0x45cc98['testRunStarted']);break;case!!_0x45cc98['testRunFinished']:this[_0x1433bc(0x216)](_0x45cc98[_0x1433bc(0x21f)]);break;case!!_0x45cc98[_0x1433bc(0x29e)]:this['onTestCaseStarted'](_0x45cc98[_0x1433bc(0x29e)],_0xac1473,_0x45cc98);break;case!!_0x45cc98[_0x1433bc(0x200)]:this[_0x1433bc(0x221)](_0x45cc98[_0x1433bc(0x200)],_0xac1473,_0x45cc98);break;case!!_0x45cc98[_0x1433bc(0x24b)]:this[_0x1433bc(0x29b)](_0x45cc98[_0x1433bc(0x24b)],_0xac1473);break;case!!_0x45cc98[_0x1433bc(0x294)]:this[_0x1433bc(0x28a)](_0x45cc98[_0x1433bc(0x294)],_0xac1473);break;case!!_0x45cc98[_0x1433bc(0x27c)]:this[_0x1433bc(0x22d)](_0x45cc98['hook']);break;case!!_0x45cc98[_0x1433bc(0x26a)]:this[_0x1433bc(0x20d)](_0x45cc98[_0x1433bc(0x26a)]);break;case!!_0x45cc98[_0x1433bc(0x1f4)]:this[_0x1433bc(0x238)](_0x45cc98['pickle']);break;case!!_0x45cc98[_0x1433bc(0x29c)]:this['onGherkinDocument'](_0x45cc98['gherkinDocument']);break;}});}[a6_0x1df254(0x22d)](_0x194438){const _0x4d525d=a6_0x1df254;this[_0x4d525d(0x240)][_0x4d525d(0x205)]=Object[_0x4d525d(0x290)]([],this[_0x4d525d(0x240)]['hooks']||[]),this['report']['hooks']['push'](_0x194438);}[a6_0x1df254(0x238)](_0x42ec0d){const _0x322f8e=a6_0x1df254;this[_0x322f8e(0x240)]['pickle']=Object[_0x322f8e(0x290)]([],this[_0x322f8e(0x240)][_0x322f8e(0x1f4)]||[],[_0x42ec0d]),this[_0x322f8e(0x240)][_0x322f8e(0x1f4)][_0x322f8e(0x202)](_0x42ec0d);}[a6_0x1df254(0x20f)](_0x39a018){const _0x18e020=a6_0x1df254;this[_0x18e020(0x240)][_0x18e020(0x29c)]=Object[_0x18e020(0x290)]([],this[_0x18e020(0x240)][_0x18e020(0x29c)]||[],[_0x39a018]),this[_0x18e020(0x240)][_0x18e020(0x29c)][_0x18e020(0x202)](_0x39a018);}[a6_0x1df254(0x2ad)](_0x9339c7){const _0x15a857=a6_0x1df254;this[_0x15a857(0x240)]['source']=_0x9339c7;}['onStepDefinition'](_0x300c03){const _0x5dc4b5=a6_0x1df254;this['report']['stepDefinition']=Object[_0x5dc4b5(0x290)]([],this[_0x5dc4b5(0x240)]['stepDefinition']||[],[_0x300c03]),this['report'][_0x5dc4b5(0x25a)][_0x5dc4b5(0x202)](_0x300c03);}[a6_0x1df254(0x20d)](_0x377f47){const _0x636817=a6_0x1df254;this[_0x636817(0x240)][_0x636817(0x230)]=Object[_0x636817(0x290)]([],this[_0x636817(0x240)][_0x636817(0x230)]||[],[_0x377f47]),this[_0x636817(0x240)][_0x636817(0x230)][_0x636817(0x202)](_0x377f47);}[a6_0x1df254(0x201)](_0x5e82c9){const _0x575e91=a6_0x1df254,_0x36c81b={'rhnrw':function(_0xc26599,_0x10a40a){return _0xc26599!==_0x10a40a;},'Bxsze':'bstack','DvCQq':function(_0x12dc1e,_0x15bf9e){return _0x12dc1e+_0x15bf9e;},'wzlCW':function(_0x36dca8,_0xf82f8d){return _0x36dca8+_0xf82f8d;},'gCaVm':function(_0xff9f53,_0x4d9791){return _0xff9f53+_0x4d9791;},'oErAU':function(_0x2c30fa,_0x16426b){return _0x2c30fa+_0x16426b;},'hkKSn':_0x575e91(0x2a7),'dAzvE':_0x575e91(0x2ba),'nwHFH':function(_0x317bd2,_0x12999d){return _0x317bd2===_0x12999d;},'xqLUj':_0x575e91(0x2a9),'qAoMI':function(_0x2db854,_0x2ed4e7,_0x479523){return _0x2db854(_0x2ed4e7,_0x479523);},'lOAhn':_0x575e91(0x281),'YVRUF':_0x575e91(0x245),'DyeTB':function(_0x354f86,_0x4e8f82){return _0x354f86+_0x4e8f82;},'bRWgD':function(_0x56c4ad,_0x4c7746){return _0x56c4ad+_0x4c7746;},'uTzXY':function(_0x1c22a6,_0x7a7df6){return _0x1c22a6+_0x7a7df6;}};_0x36c81b[_0x575e91(0x2b2)](global['__platform'],undefined)&&this[_0x575e91(0x246)](_0x36c81b[_0x575e91(0x231)](_0x36c81b[_0x575e91(0x2b6)]('\x0a',global[_0x575e91(0x2bf)]),'\x0a'));const _0x2b7d20=this[_0x575e91(0x255)][_0x575e91(0x22c)](_0x5e82c9['testCaseStartedId']);this['log'](_0x36c81b[_0x575e91(0x2ab)](_0x36c81b[_0x575e91(0x231)](_0x36c81b['DvCQq'](_0x36c81b[_0x575e91(0x247)]('\x20\x20',_0x2b7d20['gherkinDocument'][_0x575e91(0x24a)][_0x575e91(0x224)]),_0x36c81b[_0x575e91(0x292)]),_0x2b7d20[_0x575e91(0x1f4)][_0x575e91(0x224)]),'\x0a'));const _0x12e485={};_0x12e485[_0x575e91(0x2b5)]=this[_0x575e91(0x2b5)],_0x12e485['snippetBuilder']=this[_0x575e91(0x291)],_0x12e485[_0x575e91(0x28e)]=this[_0x575e91(0x28e)],_0x12e485[_0x575e91(0x273)]=_0x2b7d20;const _0x4da6bf=formatterHelpers['parseTestCaseAttempt'](_0x12e485);let _0xf33f37=![];_0x4da6bf['testSteps']['forEach'](_0x4dbee4=>{const _0x5cf776=_0x575e91;if(_0x36c81b['rhnrw'](_0x4dbee4[_0x5cf776(0x224)],_0x36c81b[_0x5cf776(0x1f9)])&&!this[_0x5cf776(0x252)](_0x4dbee4)){totalTests+=0x1,this[_0x5cf776(0x246)](_0x36c81b[_0x5cf776(0x22f)](_0x36c81b[_0x5cf776(0x236)](_0x36c81b[_0x5cf776(0x247)](_0x36c81b[_0x5cf776(0x2b6)](_0x36c81b['wzlCW'](_0x36c81b[_0x5cf776(0x24c)],_0x4dbee4[_0x5cf776(0x2bd)]),_0x4dbee4[_0x5cf776(0x268)]||''),_0x36c81b['dAzvE']),Status[_0x4dbee4[_0x5cf776(0x281)][_0x5cf776(0x25d)]]),'\x0a')),this[_0x5cf776(0x25e)](Status[_0x4dbee4['result']['status']]);if(_0x36c81b['nwHFH'](Status[_0x4dbee4['result'][_0x5cf776(0x25d)]],_0x36c81b['xqLUj'])){_0xf33f37=!![];const _0x41957d=_0x36c81b[_0x5cf776(0x220)](nestedKeyValue,_0x4dbee4,[_0x36c81b[_0x5cf776(0x27d)],_0x36c81b[_0x5cf776(0x2a5)]]);_0x41957d&&(testsErrorMessage[_0x36c81b['DyeTB'](_0x36c81b[_0x5cf776(0x247)](_0x2b7d20[_0x5cf776(0x29c)][_0x5cf776(0x24a)][_0x5cf776(0x224)],_0x36c81b[_0x5cf776(0x292)]),_0x2b7d20[_0x5cf776(0x1f4)][_0x5cf776(0x224)])]=_0x41957d,this[_0x5cf776(0x246)](_0x36c81b[_0x5cf776(0x247)](_0x41957d,'\x0a')));}}}),_0xf33f37&&(testSuitesFailed+=0x1),this[_0x575e91(0x246)]('\x0a');}[a6_0x1df254(0x2af)](_0x325da8){}[a6_0x1df254(0x252)](_0x3a8212){const _0x4c72d3=a6_0x1df254,_0x5d455b={};_0x5d455b[_0x4c72d3(0x293)]=function(_0x2bbadd,_0x24a0e1){return _0x2bbadd!==_0x24a0e1;},_0x5d455b[_0x4c72d3(0x27e)]=_0x4c72d3(0x1ff);const _0x4c4746=_0x5d455b;if(_0x4c4746[_0x4c72d3(0x293)](_0x3a8212['sourceLocation'],undefined))return![];if(_0x3a8212[_0x4c72d3(0x1ef)]&&_0x3a8212['actionLocation'][_0x4c72d3(0x25b)][_0x4c72d3(0x264)](_0x4c4746[_0x4c72d3(0x27e)]))return!![];return![];}[a6_0x1df254(0x25e)](_0x2a9ef3){const _0x303710=a6_0x1df254,_0x20b05e={};_0x20b05e[_0x303710(0x2bb)]=_0x303710(0x2a9),_0x20b05e[_0x303710(0x297)]='PASSED',_0x20b05e[_0x303710(0x233)]=_0x303710(0x250),_0x20b05e[_0x303710(0x232)]=_0x303710(0x222),_0x20b05e[_0x303710(0x283)]=_0x303710(0x265),_0x20b05e[_0x303710(0x271)]='UNKNOWN',_0x20b05e[_0x303710(0x1f1)]=_0x303710(0x242);const _0x259e0e=_0x20b05e;switch(_0x2a9ef3){case _0x259e0e[_0x303710(0x2bb)]:testsFailed+=0x1;break;case _0x259e0e[_0x303710(0x297)]:testsPassed+=0x1;break;case _0x259e0e[_0x303710(0x233)]:testsSkipped+=0x1;break;case _0x259e0e[_0x303710(0x232)]:testsPending+=0x1;break;case _0x259e0e[_0x303710(0x283)]:testsUndefined+=0x1;break;case _0x259e0e[_0x303710(0x271)]:testsUnknown+=0x1;break;case _0x259e0e['rzWtx']:testsAmbiguous+=0x1;break;default:break;}}async[a6_0x1df254(0x280)](_0x2f1fc5){const _0x5874f3=a6_0x1df254,_0x26ec56={'nTEKH':function(_0x545efe,_0x187968){return _0x545efe!==_0x187968;},'hjrNg':function(_0x1c3d1c,_0x16d209){return _0x1c3d1c!==_0x16d209;},'rTbHY':function(_0x48738d){return _0x48738d();},'DmkNl':function(_0x3418f0,_0x36e3fb){return _0x3418f0(_0x36e3fb);},'iZTXj':function(_0x29750b,_0x128410){return _0x29750b+_0x128410;},'OsrxY':function(_0x5ed8f0){return _0x5ed8f0();},'whrLp':_0x5874f3(0x229)};let _0x27c48f;if(_0x26ec56[_0x5874f3(0x2a3)](process[_0x5874f3(0x29a)][_0x5874f3(0x212)],undefined)){const _0x23f763=JSON[_0x5874f3(0x298)](process[_0x5874f3(0x29a)]['CONFIG']);_0x27c48f=_0x23f763[_0x5874f3(0x26e)];}_0x26ec56[_0x5874f3(0x269)](_0x27c48f,undefined)&&_0x26ec56['rTbHY'](isBrowserstackInfra)&&(global[_0x5874f3(0x2bf)]=_0x26ec56[_0x5874f3(0x237)](getPlatformName,_0x27c48f),this['log'](_0x26ec56['iZTXj']('Executing\x20tests\x20for\x20'+global['__platform'],'\x0a'))),_0x26ec56['OsrxY'](shouldProcessEventForTesthub)&&(TestDetails[_0x5874f3(0x26c)](),this['report'][_0x5874f3(0x1fe)]=_0x2f1fc5,BrowserstackCLI['getInstance']()['isCliEnabled']()&&await this[_0x5874f3(0x20c)]()&&(TestInfo[_0x5874f3(0x26c)](_0x26ec56[_0x5874f3(0x25f)]),await BrowserstackCLI['getInstance']()[_0x5874f3(0x259)]()[_0x5874f3(0x2a8)](TestFrameworkState[_0x5874f3(0x251)],HookState[_0x5874f3(0x262)],{})));}[a6_0x1df254(0x216)](_0x1cb2f7){const _0x3b722b=a6_0x1df254;this['report'][_0x3b722b(0x21f)]=_0x1cb2f7,this[_0x3b722b(0x2af)](_0x1cb2f7);}async['onTestCaseStarted'](_0x32f343,_0x45e48d,_0x431d84){const _0xf03b06=a6_0x1df254,_0x43b280={'plKbY':function(_0x556bcf,_0x1cc38a){return _0x556bcf(_0x1cc38a);},'WfVfH':_0xf03b06(0x272),'WNnaa':function(_0x436ffe,_0x49ec5c){return _0x436ffe&&_0x49ec5c;}};testSuites+=0x1;if(_0x43b280[_0xf03b06(0x1f6)](shouldProcessEventForTesthub,_0x43b280[_0xf03b06(0x26f)]))try{this[_0xf03b06(0x240)]['testCaseStarted']=this[_0xf03b06(0x240)][_0xf03b06(0x29e)]||{},this[_0xf03b06(0x240)][_0xf03b06(0x29e)][_0x32f343['id']]=_0x32f343;let _0x56b743=null;BrowserstackCLI[_0xf03b06(0x279)]()['isCliEnabled']()&&await this['isCLIReady']()?_0x56b743=TestInfo[_0xf03b06(0x226)](_0x32f343['id']):_0x56b743=TestDetails[_0xf03b06(0x226)](_0x32f343['id']);_testCasesData[_0x32f343['id']]=Object[_0xf03b06(0x290)]({},_0x431d84);const _0x4a1adc=this[_0xf03b06(0x240)],_0x261371=_0x32f343[_0xf03b06(0x2a6)],_0x34c0b2=_0x4a1adc[_0xf03b06(0x230)][_0xf03b06(0x1f2)](_0x12a5eb=>_0x12a5eb['id']===_0x261371)['pickleId'],_0x253246=_0x4a1adc[_0xf03b06(0x1f4)][_0xf03b06(0x1f2)](_0x110ac1=>_0x110ac1['id']===_0x34c0b2),_0x2f6014=_0x4a1adc[_0xf03b06(0x29c)][_0xf03b06(0x1f2)](_0x150b9c=>_0x150b9c[_0xf03b06(0x25b)]===_0x253246[_0xf03b06(0x25b)]),_0x39ec25=_0x2f6014[_0xf03b06(0x24a)],_0x4373e1={'uuid':_0x56b743,'startedAt':new Date()[_0xf03b06(0x20b)]()};if(_0x253246){const _0xce1013={};_0xce1013[_0xf03b06(0x224)]=_0x253246[_0xf03b06(0x224)],_0x4373e1[_0xf03b06(0x24f)]=_0xce1013;}if(_0x43b280[_0xf03b06(0x25c)](_0x2f6014,_0x39ec25)){const _0x1f21e8={};_0x1f21e8[_0xf03b06(0x29f)]=_0x2f6014[_0xf03b06(0x25b)],_0x1f21e8['name']=_0x39ec25[_0xf03b06(0x224)],_0x1f21e8[_0xf03b06(0x24d)]=_0x39ec25[_0xf03b06(0x24d)],_0x4373e1[_0xf03b06(0x24a)]=_0x1f21e8;}_tests[_0x261371]=_0x4373e1;if(BrowserstackCLI[_0xf03b06(0x279)]()[_0xf03b06(0x208)]()&&await this[_0xf03b06(0x20c)]()){const _0x488e31=await cucumberUtils['createTestFrameworkData'](_0x4373e1,_0x253246,_0x431d84,_0x2f6014,_0x32f343['id'],_0x43b280['WfVfH']),_0x417daa={};_0x417daa[_0xf03b06(0x1f7)]=_0x488e31,await BrowserstackCLI['getInstance']()[_0xf03b06(0x259)]()[_0xf03b06(0x2a8)](TestFrameworkState[_0xf03b06(0x209)],HookState[_0xf03b06(0x262)],_0x417daa);return;}await testObservabilityReporter[_0xf03b06(0x278)](_0x431d84,_0x2f6014,_0x253246,_0x43b280[_0xf03b06(0x26f)],_0x4373e1);}catch(_0x1f1a72){logger[_0xf03b06(0x1f5)]('Exception\x20in\x20sending\x20onTestCaseStarted:\x20'+util[_0xf03b06(0x1f8)](_0x1f1a72)+'\x20');}}async[a6_0x1df254(0x221)](_0x44f19e,_0xcf6a80,_0x561b5c){const _0x3f7090=a6_0x1df254,_0x272f1b={'XjqXc':function(_0x57314f,_0x47ed23){return _0x57314f(_0x47ed23);},'mCvTn':_0x3f7090(0x2a0),'PWMKy':_0x3f7090(0x1f7)};this['logTestCaseFinished'](_0x44f19e);if(_0x272f1b[_0x3f7090(0x1f0)](shouldProcessEventForTesthub,_0x272f1b[_0x3f7090(0x249)]))try{this[_0x3f7090(0x240)]['testCaseFinished']=this[_0x3f7090(0x240)]['testCaseFinished']||{},this[_0x3f7090(0x240)]['testCaseFinished'][_0x44f19e['testCaseStartedId']]=_0x44f19e,_testCasesData[_0x561b5c['id']]=Object['assign']({},_0x561b5c);const _0x110b70=_0x44f19e[_0x3f7090(0x22a)],_0x3738f0=_0xcf6a80[_0x3f7090(0x255)][_0x3f7090(0x2b3)][_0x110b70][_0x3f7090(0x2a6)],_0x3c2b01=_0xcf6a80['eventDataCollector'][_0x3f7090(0x28c)][_0x3738f0],_0x23093b=_0x3c2b01[_0x3f7090(0x28b)],_0x2c6579=_0xcf6a80[_0x3f7090(0x255)][_0x3f7090(0x287)][_0x23093b],_0x2c5e0d=this[_0x3f7090(0x2ac)](_0xcf6a80,_0x2c6579),_0x120fac=_0x2c5e0d['feature'],_0x1dc975=_tests[_0x3738f0];_0x1dc975&&(delete _tests[_0x3738f0],_0x1dc975['finishedAt']=new Date()['toISOString']());if(BrowserstackCLI['getInstance']()[_0x3f7090(0x208)]()&&await this[_0x3f7090(0x20c)]()){const _0x2b5a1a=await cucumberUtils['createTestFrameworkData'](_0x1dc975,_0x2c6579,_0x561b5c,_0x2c5e0d,_0x110b70,_0x272f1b[_0x3f7090(0x249)]),_0xd54a83={};_0xd54a83['test']=_0x2b5a1a,await BrowserstackCLI[_0x3f7090(0x279)]()[_0x3f7090(0x259)]()[_0x3f7090(0x2a8)](TestFrameworkState['TEST'],HookState[_0x3f7090(0x286)],_0xd54a83);const _0x2f7d7={};_0x2f7d7[_0x3f7090(0x204)]=_0x44f19e['testCaseStartedId'],_0x2f7d7[_0x3f7090(0x28d)]=_0x272f1b['PWMKy'],await BrowserstackCLI[_0x3f7090(0x279)]()[_0x3f7090(0x259)]()[_0x3f7090(0x2a8)](TestFrameworkState[_0x3f7090(0x261)],HookState[_0x3f7090(0x286)],_0x2f7d7);return;}await testObservabilityReporter[_0x3f7090(0x278)](_0x561b5c,_0x2c5e0d,_0x2c6579,_0x272f1b[_0x3f7090(0x249)],_0x1dc975);}catch(_0x589444){logger[_0x3f7090(0x1f5)](_0x3f7090(0x29d)+util[_0x3f7090(0x1f8)](_0x589444));}}async[a6_0x1df254(0x29b)](_0x285a7c,_0x5d1a63){const _0x1df98b=a6_0x1df254,_0x2ee409={'GdLRx':function(_0x54e446,_0x34749d){return _0x54e446(_0x34749d);},'ZwOYm':_0x1df98b(0x218),'aWCom':function(_0x3a625b,_0x3509a1){return _0x3a625b!==_0x3509a1;},'hsVLt':_0x1df98b(0x267)};if(_0x2ee409[_0x1df98b(0x256)](shouldProcessEventForTesthub,_0x2ee409[_0x1df98b(0x217)]))try{this[_0x1df98b(0x240)]['testStepStarted']=this[_0x1df98b(0x240)]['testStepStarted']||{},this[_0x1df98b(0x240)][_0x1df98b(0x24b)][_0x285a7c[_0x1df98b(0x22a)]]=_0x285a7c;const _0x43757e=_0x285a7c[_0x1df98b(0x22a)],_0x2e05b3=_0x5d1a63[_0x1df98b(0x255)][_0x1df98b(0x2b3)][_0x43757e][_0x1df98b(0x2a6)],_0x265750=this[_0x1df98b(0x240)][_0x1df98b(0x230)]['find'](_0x428687=>_0x428687['id']===_0x2e05b3)[_0x1df98b(0x28b)],_0x2f38db=this['report'][_0x1df98b(0x1f4)][_0x1df98b(0x1f2)](_0x156673=>_0x156673['id']===_0x265750),_0x4cf1a9=this[_0x1df98b(0x240)]['testCases'][_0x1df98b(0x1f2)](_0x3a5238=>_0x3a5238['id']===_0x2e05b3)[_0x1df98b(0x227)],_0x2cfb49=this[_0x1df98b(0x240)][_0x1df98b(0x24b)][_0x43757e]['testStepId'],_0x382f99=_0x4cf1a9[_0x1df98b(0x1f2)](_0x3182a4=>_0x3182a4['id']===_0x2cfb49)[_0x1df98b(0x1fb)],_0x394a25=_0x2f38db[_0x1df98b(0x2ae)][_0x1df98b(0x1f2)](_0x2f9052=>_0x2f9052['id']===_0x382f99);if(_0x382f99&&_tests[_0x2e05b3]&&_0x2ee409['aWCom'](_tests[_0x2e05b3][_0x2ee409['hsVLt']],_0x2cfb49)){_tests[_0x2e05b3][_0x2ee409[_0x1df98b(0x21a)]]=_0x2cfb49;const _0x3dfad0={};_0x3dfad0[_0x1df98b(0x2ae)]=[];const _0x32211c=_tests[_0x2e05b3]||_0x3dfad0;_0x32211c&&!_0x32211c['steps']&&(_0x32211c[_0x1df98b(0x2ae)]=[]),_0x32211c[_0x1df98b(0x2ae)]['push']({'id':_0x394a25['id'],'text':_0x394a25[_0x1df98b(0x268)],'started_at':new Date()[_0x1df98b(0x20b)]()}),_tests[_0x2e05b3]=_0x32211c;}if(BrowserstackCLI[_0x1df98b(0x279)]()[_0x1df98b(0x208)]()&&await this[_0x1df98b(0x20c)]()){const _0x5be550=await cucumberUtils[_0x1df98b(0x274)](this[_0x1df98b(0x240)],_0x43757e,_0x2ee409[_0x1df98b(0x217)],_0x4cf1a9,_0x2cfb49,_tests[_0x2e05b3]);_0x5be550&&await BrowserstackCLI[_0x1df98b(0x279)]()['getTestFramework']()[_0x1df98b(0x2a8)](TestFrameworkState[_0x5be550[_0x1df98b(0x21d)]],HookState[_0x1df98b(0x262)],{'hookData':_0x5be550,'testUUID':_0x285a7c[_0x1df98b(0x22a)]});return;}await testObservabilityReporter['sendHook'](this['report'],_0x43757e,_0x2ee409['ZwOYm'],_0x4cf1a9,_0x2cfb49,_tests[_0x2e05b3]);}catch(_0x4babf7){logger[_0x1df98b(0x1f5)](_0x1df98b(0x2a4)+util['format'](_0x4babf7));}}async[a6_0x1df254(0x28a)](_0x32a00f,_0x163720){const _0x56a1f4=a6_0x1df254,_0x413a0a={'quXhd':function(_0x81d3f0,_0x2477e4){return _0x81d3f0===_0x2477e4;},'jUyDG':_0x56a1f4(0x2aa),'SZOZX':function(_0x2b902e,_0x321038){return _0x2b902e(_0x321038);},'MKDTN':_0x56a1f4(0x27b),'rpScc':_0x56a1f4(0x1f3),'MUwpY':function(_0x574089,_0x4cb859){return _0x574089===_0x4cb859;},'WBtlf':_0x56a1f4(0x289),'lvNPQ':_0x56a1f4(0x267),'kSElK':_0x56a1f4(0x218),'EHgLa':'hook'};this[_0x56a1f4(0x240)]['testStepFinished']=this[_0x56a1f4(0x240)][_0x56a1f4(0x294)]||{},this['report'][_0x56a1f4(0x294)][_0x32a00f[_0x56a1f4(0x22a)]]=_0x32a00f;if(_0x413a0a['SZOZX'](shouldProcessEventForTesthub,_0x413a0a[_0x56a1f4(0x277)]))try{const _0x8df79a=_0x32a00f[_0x56a1f4(0x22a)],_0xb1cd50=_0x163720[_0x56a1f4(0x255)][_0x56a1f4(0x2b3)][_0x8df79a][_0x56a1f4(0x2a6)],_0x3a2de2=_0x163720[_0x56a1f4(0x255)][_0x56a1f4(0x28c)][_0xb1cd50],_0x4eadd4=_0x3a2de2[_0x56a1f4(0x28b)],_0x21b4bb=_0x163720[_0x56a1f4(0x255)][_0x56a1f4(0x287)][_0x4eadd4],_0x44edda=_0x32a00f[_0x56a1f4(0x267)],_0xc0334d=_0x3a2de2[_0x56a1f4(0x227)],_0x28654b=this[_0x56a1f4(0x255)][_0x56a1f4(0x22c)](_0x8df79a),_0x268b37=_0xc0334d[_0x56a1f4(0x1f2)](_0x29bae1=>_0x29bae1['id']===_0x44edda)['pickleStepId'];let _0x10a93b,_0x3f2e18;_0x32a00f['testStepResult']&&_0x413a0a['quXhd'](_0x32a00f[_0x56a1f4(0x254)][_0x56a1f4(0x25d)][_0x56a1f4(0x26b)]()[_0x56a1f4(0x2b0)](),_0x413a0a[_0x56a1f4(0x23b)])&&(_0x10a93b=_0x413a0a[_0x56a1f4(0x20e)](_0x32a00f[_0x56a1f4(0x254)][_0x56a1f4(0x2a1)],undefined)?_0x32a00f[_0x56a1f4(0x254)][_0x56a1f4(0x245)]:_0x32a00f[_0x56a1f4(0x254)][_0x56a1f4(0x2a1)][_0x56a1f4(0x245)],_0x3f2e18=_0x413a0a[_0x56a1f4(0x2a2)](_0x32a00f['testStepResult'][_0x56a1f4(0x2a1)],undefined)?_0x413a0a[_0x56a1f4(0x219)]:_0x32a00f[_0x56a1f4(0x254)][_0x56a1f4(0x245)]);if(_0x268b37&&_tests[_0xb1cd50][_0x413a0a[_0x56a1f4(0x27a)]]){const _0x19da82=_0x21b4bb[_0x56a1f4(0x2ae)][_0x56a1f4(0x1f2)](_0x26f306=>_0x26f306['id']===_0x268b37),_0x2fc0bc={};_0x2fc0bc[_0x56a1f4(0x2ae)]=[];const _0x111a0f=_tests[_0xb1cd50]||_0x2fc0bc;!_0x111a0f[_0x56a1f4(0x2ae)]?_0x111a0f['steps']=[{'id':_0x19da82['id'],'text':_0x19da82[_0x56a1f4(0x268)],'finished_at':new Date()[_0x56a1f4(0x20b)](),'result':_0x32a00f['testStepResult'][_0x56a1f4(0x25d)],'duration':_0x32a00f[_0x56a1f4(0x254)][_0x56a1f4(0x248)][_0x56a1f4(0x284)],'failure':_0x10a93b,'failureType':_0x3f2e18}]:_0x111a0f[_0x56a1f4(0x2ae)][_0x56a1f4(0x21b)](_0xcdf416=>{const _0x3b23ac=_0x56a1f4;if(_0x413a0a[_0x3b23ac(0x20e)](_0xcdf416['id'],_0x19da82['id'])){const _0x2d179b=_0x413a0a['jUyDG']['split']('|');let _0x28c9fa=0x0;while(!![]){switch(_0x2d179b[_0x28c9fa++]){case'0':_0xcdf416['failureType']=_0x3f2e18;continue;case'1':_0xcdf416[_0x3b23ac(0x257)]=new Date()['toISOString']();continue;case'2':_0xcdf416[_0x3b23ac(0x23a)]=_0x10a93b;continue;case'3':_0xcdf416[_0x3b23ac(0x281)]=_0x32a00f[_0x3b23ac(0x254)][_0x3b23ac(0x25d)];continue;case'4':_0xcdf416[_0x3b23ac(0x248)]=_0x32a00f[_0x3b23ac(0x254)][_0x3b23ac(0x248)][_0x3b23ac(0x284)];continue;}break;}}}),_tests[_0xb1cd50]=_0x111a0f;}delete _tests[_0xb1cd50][_0x413a0a[_0x56a1f4(0x27a)]];if(BrowserstackCLI[_0x56a1f4(0x279)]()[_0x56a1f4(0x208)]()&&await this[_0x56a1f4(0x20c)]()){const _0xfa6fce=await cucumberUtils[_0x56a1f4(0x274)](this[_0x56a1f4(0x240)],_0x8df79a,_0x413a0a['kSElK'],_0xc0334d,_0x44edda,_tests[_0xb1cd50]);if(_0xfa6fce){await BrowserstackCLI[_0x56a1f4(0x279)]()['getTestFramework']()[_0x56a1f4(0x2a8)](TestFrameworkState[_0xfa6fce[_0x56a1f4(0x21d)]],HookState[_0x56a1f4(0x286)],{'hookData':_0xfa6fce,'testUUID':_0x32a00f[_0x56a1f4(0x22a)]});const _0x56aa96={};_0x56aa96[_0x56a1f4(0x204)]=_0x32a00f[_0x56a1f4(0x22a)],_0x56aa96[_0x56a1f4(0x28d)]=_0x413a0a[_0x56a1f4(0x1fc)],await BrowserstackCLI[_0x56a1f4(0x279)]()[_0x56a1f4(0x259)]()[_0x56a1f4(0x2a8)](TestFrameworkState[_0x56a1f4(0x261)],HookState[_0x56a1f4(0x286)],_0x56aa96);}return;}await testObservabilityReporter[_0x56a1f4(0x228)](this[_0x56a1f4(0x240)],_0x8df79a,_0x413a0a[_0x56a1f4(0x277)],_0xc0334d,_0x44edda,_tests[_0xb1cd50]);}catch(_0x32117f){logger[_0x56a1f4(0x1f5)](_0x56a1f4(0x295)+util[_0x56a1f4(0x1f8)](_0x32117f));}}[a6_0x1df254(0x223)](_0x416329){const _0x172588=a6_0x1df254,_0x50b7e1={};return _0x416329[_0x172588(0x24a)][_0x172588(0x23f)]['map'](this[_0x172588(0x2b9)])['flat']()[_0x172588(0x21b)](_0x5836f2=>_0x5836f2['steps']['forEach'](_0x3f27ae=>_0x50b7e1[_0x3f27ae['id']]=_0x3f27ae)),_0x50b7e1;}[a6_0x1df254(0x2b9)](_0x2322f5){const _0x5d6a36=a6_0x1df254,_0x45738b={'gdfdB':function(_0x22030f,_0x18fcc7){return _0x22030f(_0x18fcc7);}};if(!_0x45738b[_0x5d6a36(0x2b1)](isUndefined,_0x2322f5[_0x5d6a36(0x263)]))return[_0x2322f5[_0x5d6a36(0x263)]];else{if(!_0x45738b[_0x5d6a36(0x2b1)](isUndefined,_0x2322f5[_0x5d6a36(0x2b8)]))return _0x2322f5[_0x5d6a36(0x2b8)][_0x5d6a36(0x23f)][_0x5d6a36(0x258)](_0x25bb2a=>!isUndefined(_0x25bb2a[_0x5d6a36(0x263)])?_0x25bb2a[_0x5d6a36(0x263)]:_0x25bb2a['scenario']);};return[_0x2322f5[_0x5d6a36(0x24f)]];}['getGherkinDocument'](_0x4faab4,_0x92897a){const _0x4a5487=a6_0x1df254;return Object[_0x4a5487(0x210)](_0x4faab4[_0x4a5487(0x255)]['gherkinDocumentMap'])[_0x4a5487(0x1f2)](_0x57d366=>_0x57d366[_0x4a5487(0x25b)]===_0x92897a[_0x4a5487(0x25b)]);}async['ensureCLIInitialized'](){const _0x2d2362=a6_0x1df254;if(this[_0x2d2362(0x26d)])return this[_0x2d2362(0x26d)];return this['cliInitPromise']=this[_0x2d2362(0x22b)](),this['cliInitPromise'];}async[a6_0x1df254(0x22b)](){const _0x1ecb81=a6_0x1df254,_0x12fe96={'sRaXP':_0x1ecb81(0x1fd),'GuYzH':function(_0x2b2b28,_0x547126){return _0x2b2b28(_0x547126);},'tKgIG':_0x1ecb81(0x239),'GbWlp':function(_0x49c1cd,_0x2d752f){return _0x49c1cd(_0x2d752f);},'LJPHu':_0x1ecb81(0x211)};try{const _0x3684cf=BrowserstackCLI[_0x1ecb81(0x279)]();if(_0x3684cf[_0x1ecb81(0x260)]())return logger[_0x1ecb81(0x1f5)]('CLI\x20already\x20running\x20-\x20binSessionId:\x20'+_0x3684cf['binSessionId']),!![];const _0x38bf5c=process[_0x1ecb81(0x29a)]['BROWSERSTACK_CLI_BIN_SESSION_ID'];if(!_0x38bf5c)return logger[_0x1ecb81(0x1f5)](_0x12fe96[_0x1ecb81(0x22e)]),![];const _0x56da2a=_0x12fe96[_0x1ecb81(0x207)](require,_0x12fe96['tKgIG']),{FRAMEWORKS:_0x3c1e15}=_0x12fe96[_0x1ecb81(0x24e)](require,_0x12fe96[_0x1ecb81(0x225)]);return _0x56da2a[_0x1ecb81(0x253)](_0x3c1e15[_0x1ecb81(0x234)],_0x3c1e15[_0x1ecb81(0x244)]),logger['debug'](_0x1ecb81(0x215)+_0x38bf5c),await _0x3684cf[_0x1ecb81(0x270)](),logger[_0x1ecb81(0x1f5)]('CLI\x20bootstrap\x20completed\x20-\x20isRunning:\x20'+_0x3684cf[_0x1ecb81(0x260)]()+_0x1ecb81(0x2b4)+_0x3684cf[_0x1ecb81(0x282)]),_0x3684cf[_0x1ecb81(0x260)]();}catch(_0x961c28){return logger[_0x1ecb81(0x1f5)]('Error\x20initializing\x20CLI\x20in\x20formatter:\x20'+util[_0x1ecb81(0x1f8)](_0x961c28)),![];}}async[a6_0x1df254(0x20c)](){const _0x62f9e4=a6_0x1df254;try{return await this[_0x62f9e4(0x2bc)](),BrowserstackCLI[_0x62f9e4(0x279)]()[_0x62f9e4(0x260)]();}catch(_0x391a4d){return logger[_0x62f9e4(0x1f5)](_0x62f9e4(0x21c)+util['format'](_0x391a4d)),![];}}}function a6_0x4b36(){const _0x4666e8=['nTEKH','Exception\x20in\x20onTestStepStarted\x20event:\x20','YVRUF','testCaseId','\x20\x20\x20\x20','trackEvent','FAILED','1|3|4|2|0','uTzXY','getGherkinDocument','onSource','steps','logTestRunFinished','toLowerCase','gdfdB','rhnrw','testCaseAttemptDataMap',',\x20binSessionId:\x20','cwd','oErAU','25142Mgdtfw','rule','extractStepContainers','\x20-\x20','UyclH','ensureCLIInitialized','keyword','79KNyWIa','__platform','actionLocation','XjqXc','rzWtx','find','failed','pickle','debug','plKbY','test','format','Bxsze','util','pickleStepId','EHgLa','No\x20BROWSERSTACK_CLI_BIN_SESSION_ID\x20found,\x20CLI\x20not\x20available','testRunStarted','cucumber-js/test.setup.js','testCaseFinished','logTestCaseFinished','push','../../v2/browserstackCLI.js','testUUID','hooks','1876278kDnTPd','GuYzH','isCliEnabled','TEST','hZZkp','toISOString','isCLIReady','onTestCase','quXhd','onGherkinDocument','values','../../utils/constants','CONFIG','../../playwright/reporter/test-details.js','8KPTcra','Bootstrapping\x20CLI\x20in\x20formatter\x20with\x20binSessionId:\x20','onTestRunFinished','ZwOYm','HookRunStarted','WBtlf','hsVLt','forEach','isCLIReady:\x20Error\x20checking\x20CLI\x20readiness:\x20','hook_type','../test-observability.js','testRunFinished','qAoMI','onTestCaseFinished','PENDING','getGherkinStepMap','name','LJPHu','getTestUUID','testSteps','sendHook','cucumber','testCaseStartedId','_performCLIInitialization','getTestCaseAttempt','onHook','sRaXP','DvCQq','testCases','bRWgD','WmiMj','jqKRL','CUCUMBER','3289350KAmkCH','wzlCW','DmkNl','onPickle','../../v2/cliUtils','failure','rpScc','../../v2/state/hookState.js','6QrjMaN','19474972tEWeZw','children','report','winstonLogger','AMBIGUOUS','2522727CwrKDn','PLAYWRIGHT','message','log','gCaVm','duration','mCvTn','feature','testStepStarted','hkKSn','description','GbWlp','scenario','SKIPPED','INIT_TEST','isBstackHook','setFrameworkDetail','testStepResult','eventDataCollector','GdLRx','finished_at','map','getTestFramework','stepDefinition','uri','WNnaa','status','incrementCounter','whrLp','isRunning','LOG_REPORT','PRE','background','includes','UNDEFINED','8648560ZYjmeS','testStepId','text','hjrNg','testCase','toString','setup','cliInitPromise','capability','WfVfH','bootstrap','dtaXI','TestRunStarted','testCaseAttempt','createHookData','envelope','474924zigLws','MKDTN','sendTestRunEventForCucumber','getInstance','lvNPQ','HookRunFinished','hook','lOAhn','qKvfE','exports','onTestRunStarted','result','binSessionId','VaJgT','seconds','@cucumber/cucumber','POST','pickleMap','../../v2/state/testFrameworkState.js','UnhandledError','onTestStepFinished','pickleId','testCaseMap','type','supportCodeLibrary','eventBroadcaster','assign','snippetBuilder','dAzvE','JqoAw','testStepFinished','Exception\x20in\x20onTestStepFinished\x20event:\x20','../../v2/utils/cucumber-utils.js','qkXQT','parse','21gcYkBR','env','onTestStepStarted','gherkinDocument','Exception\x20in\x20sending\x20onTestCaseFinished\x20event:\x20\x20','testCaseStarted','path','TestRunFinished','exception','MUwpY'];a6_0x4b36=function(){return _0x4666e8;};return a6_0x4b36();}module[a6_0x1df254(0x27f)]=o11yClassErrorHandler(BrowserstackFormatter,['onTestCaseStarted',a6_0x1df254(0x221),a6_0x1df254(0x29b),a6_0x1df254(0x28a),'onTestRunStarted',a6_0x1df254(0x216),'extractStepContainers','getGherkinDocument',a6_0x1df254(0x223)]);