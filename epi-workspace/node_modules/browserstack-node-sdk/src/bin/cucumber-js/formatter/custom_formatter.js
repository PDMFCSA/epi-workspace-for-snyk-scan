const a6_0x2d8deb=a6_0x1a81;function a6_0x1a81(_0x359f5e,_0x42d361){const _0x5a1d82=a6_0x5a1d();return a6_0x1a81=function(_0x1a8122,_0x557c6c){_0x1a8122=_0x1a8122-0x12d;let _0x38316b=_0x5a1d82[_0x1a8122];return _0x38316b;},a6_0x1a81(_0x359f5e,_0x42d361);}(function(_0x4ea76a,_0x45a634){const _0x4bfcaf=a6_0x1a81,_0x4754d8=_0x4ea76a();while(!![]){try{const _0x372f1a=parseInt(_0x4bfcaf(0x1e1))/0x1*(-parseInt(_0x4bfcaf(0x14f))/0x2)+parseInt(_0x4bfcaf(0x178))/0x3*(parseInt(_0x4bfcaf(0x1ec))/0x4)+-parseInt(_0x4bfcaf(0x131))/0x5*(-parseInt(_0x4bfcaf(0x1a9))/0x6)+parseInt(_0x4bfcaf(0x155))/0x7+parseInt(_0x4bfcaf(0x1d0))/0x8*(-parseInt(_0x4bfcaf(0x161))/0x9)+parseInt(_0x4bfcaf(0x137))/0xa*(parseInt(_0x4bfcaf(0x1b8))/0xb)+parseInt(_0x4bfcaf(0x19d))/0xc;if(_0x372f1a===_0x45a634)break;else _0x4754d8['push'](_0x4754d8['shift']());}catch(_0x1e64d8){_0x4754d8['push'](_0x4754d8['shift']());}}}(a6_0x5a1d,0xa5d8a));const {requireModule,getPlatformName,nestedKeyValue,isUndefined,isBrowserstackInfra}=require(a6_0x2d8deb(0x1ee)),util=require('util'),{Formatter,formatterHelpers,Status}=requireModule(a6_0x2d8deb(0x1bd)),TestDetails=require(a6_0x2d8deb(0x1d6)),TestObservabilityReporter=require(a6_0x2d8deb(0x16c)),{o11yClassErrorHandler}=require(a6_0x2d8deb(0x1e8)),{shouldProcessEventForTesthub}=require(a6_0x2d8deb(0x136)),BrowserstackCLI=require('../../v2/browserstackCLI.js'),TestFrameworkState=require(a6_0x2d8deb(0x1f4)),HookState=require(a6_0x2d8deb(0x181)),CucumberUtils=require(a6_0x2d8deb(0x174)),TestInfo=require('../../../bin/v2/TestInfo.js'),testObservabilityReporter=new TestObservabilityReporter(),cucumberUtils=new CucumberUtils(),logger=require(a6_0x2d8deb(0x1f8))[a6_0x2d8deb(0x1af)],_tests={},_testCasesData={};function a6_0x5a1d(){const _0x7b7af2=['No\x20BROWSERSTACK_CLI_BIN_SESSION_ID\x20found,\x20CLI\x20not\x20available','hook','getTestCaseAttempt','../../../helpers/testhub/utils.js','447130NLMUxe','TestRunFinished','finished_at','uWNIN','rRcQT','logTestRunFinished','sendHook','testStepStarted','cliInitPromise','description','exports','includes','testStepFinished','AlbET','skJBc','PENDING','AMBIGUOUS','cVOsS','background','mqgfn','log','HRHnh','eventBroadcaster','gyXqL','2MTSLgO','testCaseStarted','WVAjr','onHook','UNKNOWN','onTestRunStarted','2184105bWgvZB','parseTestCaseAttempt','PLAYWRIGHT','createHookData','getInstance','CFODG','tNpoL','BROWSERSTACK_CLI_BIN_SESSION_ID','push','exception','CLI\x20bootstrap\x20completed\x20-\x20isRunning:\x20','onTestStepFinished','112896knqmXN','\x20-\x20','onSource','iyTWY','keyword','ZJxYj','failureType','tqjZo','Bootstrapping\x20CLI\x20in\x20formatter\x20with\x20binSessionId:\x20','isCliEnabled','testStepResult','../test-observability.js','getGherkinDocument','sendTestRunEventForCucumber','onPickle','getTestFramework','vSlPU','binSessionId','uri','../../v2/utils/cucumber-utils.js','YDoUE','finishedAt','testRunFinished','249567RcpXjq','onStepDefinition','testRunStarted','INIT_TEST','toISOString','children','scenario','_performCLIInitialization','\x20\x20\x20\x20','../../v2/state/hookState.js','kqfqz','testCaseId','BwnQt','HookRunFinished','Wkggu','QPhcC','testStepId','env','testCaseStartedId','toLowerCase','stepDefinition','VLWwJ','name','onTestCaseFinished','find','LOG_REPORT','testSteps','ScaSF','format','seconds','status','testCaseMap','CONFIG','toString','test','vIlTO','pickleMap','5146836cDnCHb','waipg','testUUID','report','hooks','EAKfv','debug','assign','gherkinDocumentMap','failed','ugUPR','onTestStepStarted','79428MCsOEn','snippetBuilder','TEST','fZyyp','PRE','tbRdI','winstonLogger','DdSnR','KSjTJ','map','aLwPq','sourceLocation','AGAiR','feature','isBstackHook','66LHbWSs','tkOXZ','POST','testCaseFinished','CLI\x20already\x20running\x20-\x20binSessionId:\x20','@cucumber/cucumber','Orzft','type','gherkinDocument','setup','rrAkw','duration','HookRunStarted','kFWUp','testCaseAttemptDataMap','Exception\x20in\x20sending\x20onTestCaseStarted:\x20','eventDataCollector','forEach','ddIEL','flat','testCases','__platform','text','trackEvent','584jaFdcH','createTestFrameworkData','CUCUMBER','BLnXN','ArGeG','steps','../../playwright/reporter/test-details.js','cPyde','4|2|0|1|3','result','eLNBE','fKldg','cwd','UNDEFINED','TGflz','ebTHh','parse','945727nslFoj','bkbyC','BvhET','isRunning','cucumber-js/test.setup.js','logTestCaseFinished','supportCodeLibrary','../../../helpers/test-observability/error-handler','UnhandledError','MdxTb','source','52BhgarQ','onTestCaseStarted','../../../helpers/helper','onGherkinDocument','../../v2/cliUtils','pickleStepId','getGherkinStepMap','setFrameworkDetail','../../v2/state/testFrameworkState.js','extractStepContainers','pickle','VXEzF','../../../helpers/logger','SKIPPED','message','pickleId','pGyGW','lsvMN','onTestRunFinished','envelope','Xnuao','FAILED','hook_type','../../utils/constants','Exception\x20in\x20onTestStepStarted\x20event:\x20','testCaseAttempt','170DfTRIY','isCLIReady'];a6_0x5a1d=function(){return _0x7b7af2;};return a6_0x5a1d();}class BrowserstackFormatter extends Formatter{constructor(_0xbfbdab){const _0x7c5cef=a6_0x2d8deb,_0x1829c6={};_0x1829c6[_0x7c5cef(0x145)]=_0x7c5cef(0x1ff);const _0x124517=_0x1829c6;super(_0xbfbdab),this[_0x7c5cef(0x1a0)]={},_0xbfbdab[_0x7c5cef(0x14d)]['on'](_0x124517[_0x7c5cef(0x145)],async _0x2ae3b=>{const _0x5eb6e8=_0x7c5cef;switch(!![]){case!!_0x2ae3b['testRunStarted']:this[_0x5eb6e8(0x154)](_0x2ae3b[_0x5eb6e8(0x17a)]);break;case!!_0x2ae3b[_0x5eb6e8(0x177)]:this[_0x5eb6e8(0x1fe)](_0x2ae3b[_0x5eb6e8(0x177)]);break;case!!_0x2ae3b[_0x5eb6e8(0x150)]:this[_0x5eb6e8(0x1ed)](_0x2ae3b['testCaseStarted'],_0xbfbdab,_0x2ae3b);break;case!!_0x2ae3b[_0x5eb6e8(0x1bb)]:this[_0x5eb6e8(0x18f)](_0x2ae3b[_0x5eb6e8(0x1bb)],_0xbfbdab,_0x2ae3b);break;case!!_0x2ae3b[_0x5eb6e8(0x13e)]:this['onTestStepStarted'](_0x2ae3b[_0x5eb6e8(0x13e)],_0xbfbdab);break;case!!_0x2ae3b[_0x5eb6e8(0x143)]:this[_0x5eb6e8(0x160)](_0x2ae3b[_0x5eb6e8(0x143)],_0xbfbdab);break;case!!_0x2ae3b[_0x5eb6e8(0x134)]:this[_0x5eb6e8(0x152)](_0x2ae3b[_0x5eb6e8(0x134)]);break;case!!_0x2ae3b['testCase']:this['onTestCase'](_0x2ae3b['testCase']);break;case!!_0x2ae3b[_0x5eb6e8(0x1f6)]:this['onPickle'](_0x2ae3b['pickle']);break;case!!_0x2ae3b['gherkinDocument']:this[_0x5eb6e8(0x1ef)](_0x2ae3b[_0x5eb6e8(0x1c0)]);break;}});}[a6_0x2d8deb(0x152)](_0x130fff){const _0x22953a=a6_0x2d8deb;this[_0x22953a(0x1a0)][_0x22953a(0x1a1)]=Object['assign']([],this['report'][_0x22953a(0x1a1)]||[]),this['report'][_0x22953a(0x1a1)][_0x22953a(0x15d)](_0x130fff);}[a6_0x2d8deb(0x16f)](_0x2abd31){const _0x42bf99=a6_0x2d8deb;this['report'][_0x42bf99(0x1f6)]=Object[_0x42bf99(0x1a4)]([],this['report'][_0x42bf99(0x1f6)]||[],[_0x2abd31]),this[_0x42bf99(0x1a0)][_0x42bf99(0x1f6)][_0x42bf99(0x15d)](_0x2abd31);}[a6_0x2d8deb(0x1ef)](_0x54217b){const _0x4fe1ba=a6_0x2d8deb;this[_0x4fe1ba(0x1a0)][_0x4fe1ba(0x1c0)]=Object['assign']([],this[_0x4fe1ba(0x1a0)][_0x4fe1ba(0x1c0)]||[],[_0x54217b]),this[_0x4fe1ba(0x1a0)][_0x4fe1ba(0x1c0)]['push'](_0x54217b);}[a6_0x2d8deb(0x163)](_0x5a243b){const _0x51bbd1=a6_0x2d8deb;this[_0x51bbd1(0x1a0)][_0x51bbd1(0x1eb)]=_0x5a243b;}[a6_0x2d8deb(0x179)](_0x2d90e5){const _0x184521=a6_0x2d8deb;this['report'][_0x184521(0x18c)]=Object[_0x184521(0x1a4)]([],this[_0x184521(0x1a0)]['stepDefinition']||[],[_0x2d90e5]),this['report'][_0x184521(0x18c)][_0x184521(0x15d)](_0x2d90e5);}['onTestCase'](_0x5ea1ce){const _0x58527a=a6_0x2d8deb;this[_0x58527a(0x1a0)][_0x58527a(0x1cc)]=Object[_0x58527a(0x1a4)]([],this['report'][_0x58527a(0x1cc)]||[],[_0x5ea1ce]),this['report'][_0x58527a(0x1cc)][_0x58527a(0x15d)](_0x5ea1ce);}[a6_0x2d8deb(0x1e6)](_0x618c4){const _0x5b089c=a6_0x2d8deb,_0x53abdf={'fZyyp':function(_0x10762a,_0x56eaf0){return _0x10762a!==_0x56eaf0;},'tNpoL':'bstack','WVAjr':function(_0xfe2e11,_0x27ea42){return _0xfe2e11+_0x27ea42;},'BvhET':function(_0x220ba6,_0xa3fc78){return _0x220ba6+_0xa3fc78;},'TGflz':function(_0x2c7560,_0x408613){return _0x2c7560+_0x408613;},'vIlTO':_0x5b089c(0x180),'tkOXZ':_0x5b089c(0x162),'fKldg':function(_0x38505e,_0x41f7a1){return _0x38505e===_0x41f7a1;},'Mjmzr':'FAILED','eLNBE':function(_0x447736,_0x593ada,_0x3e3487){return _0x447736(_0x593ada,_0x3e3487);},'ArGeG':_0x5b089c(0x1d9),'EAKfv':_0x5b089c(0x1fa),'fkMOi':function(_0x53f223,_0x5b12a7){return _0x53f223+_0x5b12a7;},'kfpNH':function(_0x3032ce,_0x3153fb){return _0x3032ce!==_0x3153fb;},'shdiB':function(_0x11adac,_0x5093d0){return _0x11adac+_0x5093d0;},'bkbyC':function(_0xd4f068,_0x35884f){return _0xd4f068+_0x35884f;},'hKpRn':function(_0x535e29,_0x20fc8b){return _0x535e29+_0x20fc8b;}};_0x53abdf['kfpNH'](global[_0x5b089c(0x1cd)],undefined)&&this[_0x5b089c(0x14b)](_0x53abdf['shdiB'](_0x53abdf['bkbyC']('\x0a',global[_0x5b089c(0x1cd)]),'\x0a'));const _0x22b871=this['eventDataCollector'][_0x5b089c(0x135)](_0x618c4[_0x5b089c(0x18a)]);this[_0x5b089c(0x14b)](_0x53abdf[_0x5b089c(0x1de)](_0x53abdf[_0x5b089c(0x1de)](_0x53abdf[_0x5b089c(0x1e2)](_0x53abdf['hKpRn']('\x20\x20',_0x22b871[_0x5b089c(0x1c0)][_0x5b089c(0x1b6)][_0x5b089c(0x18e)]),_0x53abdf[_0x5b089c(0x1b9)]),_0x22b871[_0x5b089c(0x1f6)]['name']),'\x0a'));const _0x362ac8={};_0x362ac8[_0x5b089c(0x1dc)]=this[_0x5b089c(0x1dc)],_0x362ac8[_0x5b089c(0x1aa)]=this['snippetBuilder'],_0x362ac8[_0x5b089c(0x1e7)]=this[_0x5b089c(0x1e7)],_0x362ac8[_0x5b089c(0x130)]=_0x22b871;const _0x52b4fd=formatterHelpers[_0x5b089c(0x156)](_0x362ac8);let _0x285ff2=![];_0x52b4fd[_0x5b089c(0x192)][_0x5b089c(0x1c9)](_0x5d5af9=>{const _0x5c0161=_0x5b089c;if(_0x53abdf[_0x5c0161(0x1ac)](_0x5d5af9[_0x5c0161(0x18e)],_0x53abdf[_0x5c0161(0x15b)])&&!this[_0x5c0161(0x1b7)](_0x5d5af9)){totalTests+=0x1,this['log'](_0x53abdf[_0x5c0161(0x151)](_0x53abdf[_0x5c0161(0x151)](_0x53abdf['WVAjr'](_0x53abdf[_0x5c0161(0x1e3)](_0x53abdf[_0x5c0161(0x1de)](_0x53abdf[_0x5c0161(0x19b)],_0x5d5af9[_0x5c0161(0x165)]),_0x5d5af9['text']||''),_0x53abdf[_0x5c0161(0x1b9)]),Status[_0x5d5af9[_0x5c0161(0x1d9)]['status']]),'\x0a')),this['incrementCounter'](Status[_0x5d5af9[_0x5c0161(0x1d9)][_0x5c0161(0x196)]]);if(_0x53abdf[_0x5c0161(0x1db)](Status[_0x5d5af9[_0x5c0161(0x1d9)][_0x5c0161(0x196)]],_0x53abdf['Mjmzr'])){_0x285ff2=!![];const _0x19c533=_0x53abdf[_0x5c0161(0x1da)](nestedKeyValue,_0x5d5af9,[_0x53abdf[_0x5c0161(0x1d4)],_0x53abdf[_0x5c0161(0x1a2)]]);_0x19c533&&(testsErrorMessage[_0x53abdf['fkMOi'](_0x53abdf[_0x5c0161(0x1e3)](_0x22b871[_0x5c0161(0x1c0)]['feature'][_0x5c0161(0x18e)],_0x53abdf['tkOXZ']),_0x22b871[_0x5c0161(0x1f6)][_0x5c0161(0x18e)])]=_0x19c533,this['log'](_0x53abdf[_0x5c0161(0x151)](_0x19c533,'\x0a')));}}}),_0x285ff2&&(testSuitesFailed+=0x1),this[_0x5b089c(0x14b)]('\x0a');}[a6_0x2d8deb(0x13c)](_0x1619f2){}['isBstackHook'](_0x3d6c94){const _0x18cdc3=a6_0x2d8deb,_0x339b09={};_0x339b09[_0x18cdc3(0x193)]=function(_0x3762f0,_0x516586){return _0x3762f0!==_0x516586;},_0x339b09[_0x18cdc3(0x1ae)]=_0x18cdc3(0x1e5);const _0x56260c=_0x339b09;if(_0x56260c[_0x18cdc3(0x193)](_0x3d6c94[_0x18cdc3(0x1b4)],undefined))return![];if(_0x3d6c94['actionLocation']&&_0x3d6c94['actionLocation'][_0x18cdc3(0x173)][_0x18cdc3(0x142)](_0x56260c['tbRdI']))return!![];return![];}['incrementCounter'](_0x51a48b){const _0x1c61f5=a6_0x2d8deb,_0x15bd2f={};_0x15bd2f[_0x1c61f5(0x1ea)]=_0x1c61f5(0x201),_0x15bd2f[_0x1c61f5(0x184)]='PASSED',_0x15bd2f[_0x1c61f5(0x175)]=_0x1c61f5(0x1f9),_0x15bd2f[_0x1c61f5(0x187)]=_0x1c61f5(0x146),_0x15bd2f[_0x1c61f5(0x18d)]=_0x1c61f5(0x1dd),_0x15bd2f[_0x1c61f5(0x1b5)]=_0x1c61f5(0x153),_0x15bd2f[_0x1c61f5(0x1a7)]=_0x1c61f5(0x147);const _0xa96e89=_0x15bd2f;switch(_0x51a48b){case _0xa96e89['MdxTb']:testsFailed+=0x1;break;case _0xa96e89[_0x1c61f5(0x184)]:testsPassed+=0x1;break;case _0xa96e89[_0x1c61f5(0x175)]:testsSkipped+=0x1;break;case _0xa96e89[_0x1c61f5(0x187)]:testsPending+=0x1;break;case _0xa96e89[_0x1c61f5(0x18d)]:testsUndefined+=0x1;break;case _0xa96e89['AGAiR']:testsUnknown+=0x1;break;case _0xa96e89[_0x1c61f5(0x1a7)]:testsAmbiguous+=0x1;break;default:break;}}async[a6_0x2d8deb(0x154)](_0x45a8ae){const _0x49efb2=a6_0x2d8deb,_0xff4254={'vSlPU':function(_0x38427e,_0x1f1e95){return _0x38427e!==_0x1f1e95;},'mqgfn':function(_0x11a6af){return _0x11a6af();},'waipg':function(_0x362fe2,_0x1622a9){return _0x362fe2(_0x1622a9);},'KBJPx':function(_0x599bfb,_0x9b8e0d){return _0x599bfb+_0x9b8e0d;},'KSjTJ':function(_0x417bca){return _0x417bca();},'HRHnh':'cucumber'};let _0x1bb75d;if(_0xff4254[_0x49efb2(0x171)](process[_0x49efb2(0x189)][_0x49efb2(0x198)],undefined)){const _0x5421e3=JSON[_0x49efb2(0x1e0)](process['env'][_0x49efb2(0x198)]);_0x1bb75d=_0x5421e3['capability'];}_0xff4254[_0x49efb2(0x171)](_0x1bb75d,undefined)&&_0xff4254[_0x49efb2(0x14a)](isBrowserstackInfra)&&(global['__platform']=_0xff4254[_0x49efb2(0x19e)](getPlatformName,_0x1bb75d),this[_0x49efb2(0x14b)](_0xff4254['KBJPx']('Executing\x20tests\x20for\x20'+global['__platform'],'\x0a'))),_0xff4254[_0x49efb2(0x1b1)](shouldProcessEventForTesthub)&&(TestDetails[_0x49efb2(0x1c1)](),this['report'][_0x49efb2(0x17a)]=_0x45a8ae,BrowserstackCLI['getInstance']()['isCliEnabled']()&&await this[_0x49efb2(0x132)]()&&(TestInfo[_0x49efb2(0x1c1)](_0xff4254[_0x49efb2(0x14c)]),await BrowserstackCLI[_0x49efb2(0x159)]()[_0x49efb2(0x170)]()[_0x49efb2(0x1cf)](TestFrameworkState[_0x49efb2(0x17b)],HookState[_0x49efb2(0x1ad)],{})));}[a6_0x2d8deb(0x1fe)](_0x5df2be){const _0x226182=a6_0x2d8deb;this[_0x226182(0x1a0)][_0x226182(0x177)]=_0x5df2be,this[_0x226182(0x13c)](_0x5df2be);}async[a6_0x2d8deb(0x1ed)](_0x53e157,_0x592a6d,_0x32ef9f){const _0x58f69e=a6_0x2d8deb,_0x747246={'Orzft':function(_0x8f41d0,_0x1e8420){return _0x8f41d0(_0x1e8420);},'rRcQT':'TestRunStarted','DdSnR':function(_0x406b1e,_0x36147d){return _0x406b1e&&_0x36147d;}};testSuites+=0x1;if(_0x747246[_0x58f69e(0x1be)](shouldProcessEventForTesthub,_0x747246['rRcQT']))try{this[_0x58f69e(0x1a0)]['testCaseStarted']=this[_0x58f69e(0x1a0)][_0x58f69e(0x150)]||{},this[_0x58f69e(0x1a0)][_0x58f69e(0x150)][_0x53e157['id']]=_0x53e157;let _0x139039=null;BrowserstackCLI[_0x58f69e(0x159)]()[_0x58f69e(0x16a)]()&&await this[_0x58f69e(0x132)]()?_0x139039=TestInfo['getTestUUID'](_0x53e157['id']):_0x139039=TestDetails['getTestUUID'](_0x53e157['id']);_testCasesData[_0x53e157['id']]=Object[_0x58f69e(0x1a4)]({},_0x32ef9f);const _0x4e8e9c=this[_0x58f69e(0x1a0)],_0x4e6999=_0x53e157[_0x58f69e(0x183)],_0x219ff4=_0x4e8e9c['testCases']['find'](_0x3afb85=>_0x3afb85['id']===_0x4e6999)['pickleId'],_0x3c8cf3=_0x4e8e9c[_0x58f69e(0x1f6)][_0x58f69e(0x190)](_0x297a41=>_0x297a41['id']===_0x219ff4),_0x1efa48=_0x4e8e9c['gherkinDocument']['find'](_0x2bf2f0=>_0x2bf2f0[_0x58f69e(0x173)]===_0x3c8cf3[_0x58f69e(0x173)]),_0x4da41e=_0x1efa48[_0x58f69e(0x1b6)],_0x1ca432={'uuid':_0x139039,'startedAt':new Date()[_0x58f69e(0x17c)]()};if(_0x3c8cf3){const _0x59ad92={};_0x59ad92['name']=_0x3c8cf3['name'],_0x1ca432[_0x58f69e(0x17e)]=_0x59ad92;}if(_0x747246[_0x58f69e(0x1b0)](_0x1efa48,_0x4da41e)){const _0x7e4b8d={};_0x7e4b8d['path']=_0x1efa48[_0x58f69e(0x173)],_0x7e4b8d[_0x58f69e(0x18e)]=_0x4da41e['name'],_0x7e4b8d[_0x58f69e(0x140)]=_0x4da41e[_0x58f69e(0x140)],_0x1ca432[_0x58f69e(0x1b6)]=_0x7e4b8d;}_tests[_0x4e6999]=_0x1ca432;if(BrowserstackCLI['getInstance']()[_0x58f69e(0x16a)]()&&await this[_0x58f69e(0x132)]()){const _0x565891=await cucumberUtils[_0x58f69e(0x1d1)](_0x1ca432,_0x3c8cf3,_0x32ef9f,_0x1efa48,_0x53e157['id'],_0x747246[_0x58f69e(0x13b)]),_0x5267d6={};_0x5267d6[_0x58f69e(0x19a)]=_0x565891,await BrowserstackCLI[_0x58f69e(0x159)]()[_0x58f69e(0x170)]()['trackEvent'](TestFrameworkState[_0x58f69e(0x1ab)],HookState[_0x58f69e(0x1ad)],_0x5267d6);return;}await testObservabilityReporter[_0x58f69e(0x16e)](_0x32ef9f,_0x1efa48,_0x3c8cf3,_0x747246['rRcQT'],_0x1ca432);}catch(_0x502701){logger[_0x58f69e(0x1a3)](_0x58f69e(0x1c7)+util['format'](_0x502701)+'\x20');}}async[a6_0x2d8deb(0x18f)](_0x11e433,_0x4b1ce4,_0x11fb84){const _0x57330c=a6_0x2d8deb,_0x514baa={'rrAkw':function(_0x254af9,_0x13df64){return _0x254af9(_0x13df64);},'uWNIN':_0x57330c(0x138),'pGyGW':_0x57330c(0x19a)};this[_0x57330c(0x1e6)](_0x11e433);if(_0x514baa[_0x57330c(0x1c2)](shouldProcessEventForTesthub,_0x514baa[_0x57330c(0x13a)]))try{this[_0x57330c(0x1a0)]['testCaseFinished']=this[_0x57330c(0x1a0)][_0x57330c(0x1bb)]||{},this[_0x57330c(0x1a0)]['testCaseFinished'][_0x11e433[_0x57330c(0x18a)]]=_0x11e433,_testCasesData[_0x11fb84['id']]=Object[_0x57330c(0x1a4)]({},_0x11fb84);const _0x2e6b4b=_0x11e433[_0x57330c(0x18a)],_0x5edef1=_0x4b1ce4[_0x57330c(0x1c8)][_0x57330c(0x1c6)][_0x2e6b4b]['testCaseId'],_0x5d0e89=_0x4b1ce4[_0x57330c(0x1c8)][_0x57330c(0x197)][_0x5edef1],_0x28d1f2=_0x5d0e89[_0x57330c(0x1fb)],_0x1e1587=_0x4b1ce4[_0x57330c(0x1c8)][_0x57330c(0x19c)][_0x28d1f2],_0x406e2f=this[_0x57330c(0x16d)](_0x4b1ce4,_0x1e1587),_0xe73cc5=_0x406e2f[_0x57330c(0x1b6)],_0x1fcc20=_tests[_0x5edef1];_0x1fcc20&&(delete _tests[_0x5edef1],_0x1fcc20[_0x57330c(0x176)]=new Date()[_0x57330c(0x17c)]());if(BrowserstackCLI[_0x57330c(0x159)]()['isCliEnabled']()&&await this['isCLIReady']()){const _0x499b55=await cucumberUtils[_0x57330c(0x1d1)](_0x1fcc20,_0x1e1587,_0x11fb84,_0x406e2f,_0x2e6b4b,_0x514baa[_0x57330c(0x13a)]),_0x151473={};_0x151473['test']=_0x499b55,await BrowserstackCLI[_0x57330c(0x159)]()['getTestFramework']()[_0x57330c(0x1cf)](TestFrameworkState[_0x57330c(0x1ab)],HookState[_0x57330c(0x1ba)],_0x151473);const _0x3df169={};_0x3df169['testUUID']=_0x11e433[_0x57330c(0x18a)],_0x3df169[_0x57330c(0x1bf)]=_0x514baa[_0x57330c(0x1fc)],await BrowserstackCLI[_0x57330c(0x159)]()['getTestFramework']()[_0x57330c(0x1cf)](TestFrameworkState[_0x57330c(0x191)],HookState['POST'],_0x3df169);return;}await testObservabilityReporter[_0x57330c(0x16e)](_0x11fb84,_0x406e2f,_0x1e1587,_0x514baa[_0x57330c(0x13a)],_0x1fcc20);}catch(_0x4c1985){logger[_0x57330c(0x1a3)]('Exception\x20in\x20sending\x20onTestCaseFinished\x20event:\x20\x20'+util[_0x57330c(0x194)](_0x4c1985));}}async['onTestStepStarted'](_0x4011f8,_0xe846da){const _0x4a5336=a6_0x2d8deb,_0x1ffd3a={'kFWUp':function(_0x21ba30,_0x5a9586){return _0x21ba30(_0x5a9586);},'aLwPq':_0x4a5336(0x1c4),'cVOsS':function(_0x20d864,_0x8922b6){return _0x20d864!==_0x8922b6;},'ebTHh':_0x4a5336(0x188)};if(_0x1ffd3a[_0x4a5336(0x1c5)](shouldProcessEventForTesthub,_0x1ffd3a[_0x4a5336(0x1b3)]))try{this[_0x4a5336(0x1a0)][_0x4a5336(0x13e)]=this[_0x4a5336(0x1a0)][_0x4a5336(0x13e)]||{},this[_0x4a5336(0x1a0)]['testStepStarted'][_0x4011f8[_0x4a5336(0x18a)]]=_0x4011f8;const _0x132211=_0x4011f8[_0x4a5336(0x18a)],_0x5ee051=_0xe846da[_0x4a5336(0x1c8)][_0x4a5336(0x1c6)][_0x132211]['testCaseId'],_0x5e179a=this[_0x4a5336(0x1a0)]['testCases'][_0x4a5336(0x190)](_0x3bf05d=>_0x3bf05d['id']===_0x5ee051)[_0x4a5336(0x1fb)],_0x11c56=this[_0x4a5336(0x1a0)][_0x4a5336(0x1f6)][_0x4a5336(0x190)](_0x5d144e=>_0x5d144e['id']===_0x5e179a),_0x5f10da=this['report'][_0x4a5336(0x1cc)][_0x4a5336(0x190)](_0x28a9b2=>_0x28a9b2['id']===_0x5ee051)['testSteps'],_0x29a401=this[_0x4a5336(0x1a0)][_0x4a5336(0x13e)][_0x132211]['testStepId'],_0x6b643c=_0x5f10da['find'](_0x4287b0=>_0x4287b0['id']===_0x29a401)[_0x4a5336(0x1f1)],_0x421ac8=_0x11c56[_0x4a5336(0x1d5)][_0x4a5336(0x190)](_0x26abff=>_0x26abff['id']===_0x6b643c);if(_0x6b643c&&_tests[_0x5ee051]&&_0x1ffd3a[_0x4a5336(0x148)](_tests[_0x5ee051][_0x1ffd3a[_0x4a5336(0x1df)]],_0x29a401)){_tests[_0x5ee051][_0x1ffd3a[_0x4a5336(0x1df)]]=_0x29a401;const _0x1cb507={};_0x1cb507[_0x4a5336(0x1d5)]=[];const _0x1e388d=_tests[_0x5ee051]||_0x1cb507;_0x1e388d&&!_0x1e388d[_0x4a5336(0x1d5)]&&(_0x1e388d[_0x4a5336(0x1d5)]=[]),_0x1e388d[_0x4a5336(0x1d5)][_0x4a5336(0x15d)]({'id':_0x421ac8['id'],'text':_0x421ac8[_0x4a5336(0x1ce)],'started_at':new Date()[_0x4a5336(0x17c)]()}),_tests[_0x5ee051]=_0x1e388d;}if(BrowserstackCLI['getInstance']()[_0x4a5336(0x16a)]()&&await this[_0x4a5336(0x132)]()){const _0x12a14e=await cucumberUtils[_0x4a5336(0x158)](this['report'],_0x132211,_0x1ffd3a['aLwPq'],_0x5f10da,_0x29a401,_tests[_0x5ee051]);_0x12a14e&&await BrowserstackCLI[_0x4a5336(0x159)]()[_0x4a5336(0x170)]()['trackEvent'](TestFrameworkState[_0x12a14e[_0x4a5336(0x12d)]],HookState[_0x4a5336(0x1ad)],{'hookData':_0x12a14e,'testUUID':_0x4011f8[_0x4a5336(0x18a)]});return;}await testObservabilityReporter[_0x4a5336(0x13d)](this[_0x4a5336(0x1a0)],_0x132211,_0x1ffd3a['aLwPq'],_0x5f10da,_0x29a401,_tests[_0x5ee051]);}catch(_0x26b648){logger['debug'](_0x4a5336(0x12f)+util[_0x4a5336(0x194)](_0x26b648));}}async[a6_0x2d8deb(0x160)](_0x1e49e1,_0xc1bd){const _0x496848=a6_0x2d8deb,_0xb8bff0={'Xnuao':function(_0x1d22c9,_0x15f9c1){return _0x1d22c9===_0x15f9c1;},'CFODG':_0x496848(0x1d8),'XbjhD':function(_0x762bb6,_0x31ca85){return _0x762bb6(_0x31ca85);},'iyTWY':_0x496848(0x185),'tqjZo':function(_0x125931,_0x27ade6){return _0x125931===_0x27ade6;},'ddIEL':_0x496848(0x1a6),'awnFQ':function(_0x54aef6,_0x24fd67){return _0x54aef6===_0x24fd67;},'ZJxYj':function(_0x4bf1ce,_0x372249){return _0x4bf1ce===_0x372249;},'Wkggu':_0x496848(0x1e9),'BLnXN':_0x496848(0x188),'cPyde':_0x496848(0x1c4),'gyXqL':_0x496848(0x134)};this['report'][_0x496848(0x143)]=this['report'][_0x496848(0x143)]||{},this[_0x496848(0x1a0)]['testStepFinished'][_0x1e49e1[_0x496848(0x18a)]]=_0x1e49e1;if(_0xb8bff0['XbjhD'](shouldProcessEventForTesthub,_0xb8bff0[_0x496848(0x164)]))try{const _0x5edb1a=_0x1e49e1[_0x496848(0x18a)],_0x55d61e=_0xc1bd[_0x496848(0x1c8)][_0x496848(0x1c6)][_0x5edb1a][_0x496848(0x183)],_0x3920fa=_0xc1bd[_0x496848(0x1c8)][_0x496848(0x197)][_0x55d61e],_0x12f65f=_0x3920fa[_0x496848(0x1fb)],_0x221757=_0xc1bd[_0x496848(0x1c8)]['pickleMap'][_0x12f65f],_0x22dbdd=_0x1e49e1['testStepId'],_0x51b6e9=_0x3920fa['testSteps'],_0x4e8d7f=this[_0x496848(0x1c8)][_0x496848(0x135)](_0x5edb1a),_0x559e15=_0x51b6e9[_0x496848(0x190)](_0x33d6ea=>_0x33d6ea['id']===_0x22dbdd)[_0x496848(0x1f1)];let _0xc2bccb,_0x34143c;_0x1e49e1[_0x496848(0x16b)]&&_0xb8bff0[_0x496848(0x168)](_0x1e49e1[_0x496848(0x16b)][_0x496848(0x196)][_0x496848(0x199)]()[_0x496848(0x18b)](),_0xb8bff0[_0x496848(0x1ca)])&&(_0xc2bccb=_0xb8bff0['awnFQ'](_0x1e49e1[_0x496848(0x16b)][_0x496848(0x15e)],undefined)?_0x1e49e1[_0x496848(0x16b)][_0x496848(0x1fa)]:_0x1e49e1[_0x496848(0x16b)][_0x496848(0x15e)][_0x496848(0x1fa)],_0x34143c=_0xb8bff0[_0x496848(0x166)](_0x1e49e1[_0x496848(0x16b)][_0x496848(0x15e)],undefined)?_0xb8bff0[_0x496848(0x186)]:_0x1e49e1[_0x496848(0x16b)]['message']);if(_0x559e15&&_tests[_0x55d61e][_0xb8bff0[_0x496848(0x1d3)]]){const _0x505825=_0x221757[_0x496848(0x1d5)][_0x496848(0x190)](_0x1c682b=>_0x1c682b['id']===_0x559e15),_0x20c2ae={};_0x20c2ae[_0x496848(0x1d5)]=[];const _0x31049b=_tests[_0x55d61e]||_0x20c2ae;!_0x31049b[_0x496848(0x1d5)]?_0x31049b[_0x496848(0x1d5)]=[{'id':_0x505825['id'],'text':_0x505825['text'],'finished_at':new Date()['toISOString'](),'result':_0x1e49e1[_0x496848(0x16b)][_0x496848(0x196)],'duration':_0x1e49e1[_0x496848(0x16b)]['duration'][_0x496848(0x195)],'failure':_0xc2bccb,'failureType':_0x34143c}]:_0x31049b['steps'][_0x496848(0x1c9)](_0x5e3d76=>{const _0x5a9df8=_0x496848;if(_0xb8bff0[_0x5a9df8(0x200)](_0x5e3d76['id'],_0x505825['id'])){const _0x2e569c=_0xb8bff0[_0x5a9df8(0x15a)]['split']('|');let _0x4d9bfe=0x0;while(!![]){switch(_0x2e569c[_0x4d9bfe++]){case'0':_0x5e3d76[_0x5a9df8(0x1c3)]=_0x1e49e1[_0x5a9df8(0x16b)]['duration'][_0x5a9df8(0x195)];continue;case'1':_0x5e3d76['failure']=_0xc2bccb;continue;case'2':_0x5e3d76[_0x5a9df8(0x1d9)]=_0x1e49e1[_0x5a9df8(0x16b)][_0x5a9df8(0x196)];continue;case'3':_0x5e3d76[_0x5a9df8(0x167)]=_0x34143c;continue;case'4':_0x5e3d76[_0x5a9df8(0x139)]=new Date()[_0x5a9df8(0x17c)]();continue;}break;}}}),_tests[_0x55d61e]=_0x31049b;}delete _tests[_0x55d61e][_0xb8bff0[_0x496848(0x1d3)]];if(BrowserstackCLI[_0x496848(0x159)]()[_0x496848(0x16a)]()&&await this['isCLIReady']()){const _0x2a081e=await cucumberUtils[_0x496848(0x158)](this[_0x496848(0x1a0)],_0x5edb1a,_0xb8bff0[_0x496848(0x1d7)],_0x51b6e9,_0x22dbdd,_tests[_0x55d61e]);if(_0x2a081e){await BrowserstackCLI['getInstance']()[_0x496848(0x170)]()[_0x496848(0x1cf)](TestFrameworkState[_0x2a081e[_0x496848(0x12d)]],HookState['POST'],{'hookData':_0x2a081e,'testUUID':_0x1e49e1[_0x496848(0x18a)]});const _0x22763f={};_0x22763f[_0x496848(0x19f)]=_0x1e49e1[_0x496848(0x18a)],_0x22763f[_0x496848(0x1bf)]=_0xb8bff0[_0x496848(0x14e)],await BrowserstackCLI[_0x496848(0x159)]()[_0x496848(0x170)]()['trackEvent'](TestFrameworkState[_0x496848(0x191)],HookState[_0x496848(0x1ba)],_0x22763f);}return;}await testObservabilityReporter[_0x496848(0x13d)](this[_0x496848(0x1a0)],_0x5edb1a,_0xb8bff0[_0x496848(0x164)],_0x51b6e9,_0x22dbdd,_tests[_0x55d61e]);}catch(_0x2e22b5){logger['debug']('Exception\x20in\x20onTestStepFinished\x20event:\x20'+util[_0x496848(0x194)](_0x2e22b5));}}[a6_0x2d8deb(0x1f2)](_0x1bf2d1){const _0x5695d4=a6_0x2d8deb,_0xa7a2e7={};return _0x1bf2d1['feature'][_0x5695d4(0x17d)][_0x5695d4(0x1b2)](this['extractStepContainers'])[_0x5695d4(0x1cb)]()['forEach'](_0x171d10=>_0x171d10['steps']['forEach'](_0x2df588=>_0xa7a2e7[_0x2df588['id']]=_0x2df588)),_0xa7a2e7;}[a6_0x2d8deb(0x1f5)](_0x4a2cae){const _0x5482df=a6_0x2d8deb,_0x4eaff0={'lsvMN':function(_0x5edf36,_0x44f2a0){return _0x5edf36(_0x44f2a0);}};if(!_0x4eaff0['lsvMN'](isUndefined,_0x4a2cae[_0x5482df(0x149)]))return[_0x4a2cae[_0x5482df(0x149)]];else{if(!_0x4eaff0[_0x5482df(0x1fd)](isUndefined,_0x4a2cae['rule']))return _0x4a2cae['rule'][_0x5482df(0x17d)]['map'](_0x15a827=>!isUndefined(_0x15a827[_0x5482df(0x149)])?_0x15a827[_0x5482df(0x149)]:_0x15a827[_0x5482df(0x17e)]);};return[_0x4a2cae[_0x5482df(0x17e)]];}[a6_0x2d8deb(0x16d)](_0xc8c3ba,_0x390534){const _0x2a6f6d=a6_0x2d8deb;return Object['values'](_0xc8c3ba[_0x2a6f6d(0x1c8)][_0x2a6f6d(0x1a5)])[_0x2a6f6d(0x190)](_0x86da21=>_0x86da21[_0x2a6f6d(0x173)]===_0x390534[_0x2a6f6d(0x173)]);}async['ensureCLIInitialized'](){const _0x550206=a6_0x2d8deb;if(this['cliInitPromise'])return this['cliInitPromise'];return this[_0x550206(0x13f)]=this[_0x550206(0x17f)](),this[_0x550206(0x13f)];}async[a6_0x2d8deb(0x17f)](){const _0xbcd15c=a6_0x2d8deb,_0x5c705e={'AlbET':_0xbcd15c(0x133),'VXEzF':function(_0x499a81,_0x132cfe){return _0x499a81(_0x132cfe);},'kqfqz':_0xbcd15c(0x1f0),'oPVWX':function(_0x350096,_0x414cc8){return _0x350096(_0x414cc8);},'EHIFW':_0xbcd15c(0x12e)};try{const _0x50c687=BrowserstackCLI[_0xbcd15c(0x159)]();if(_0x50c687[_0xbcd15c(0x1e4)]())return logger[_0xbcd15c(0x1a3)](_0xbcd15c(0x1bc)+_0x50c687[_0xbcd15c(0x172)]),!![];const _0x231e6a=process[_0xbcd15c(0x189)][_0xbcd15c(0x15c)];if(!_0x231e6a)return logger['debug'](_0x5c705e[_0xbcd15c(0x144)]),![];const _0x2a23ac=_0x5c705e[_0xbcd15c(0x1f7)](require,_0x5c705e[_0xbcd15c(0x182)]),{FRAMEWORKS:_0x5738f1}=_0x5c705e['oPVWX'](require,_0x5c705e['EHIFW']);return _0x2a23ac[_0xbcd15c(0x1f3)](_0x5738f1[_0xbcd15c(0x1d2)],_0x5738f1[_0xbcd15c(0x157)]),logger[_0xbcd15c(0x1a3)](_0xbcd15c(0x169)+_0x231e6a),await _0x50c687['bootstrap'](),logger[_0xbcd15c(0x1a3)](_0xbcd15c(0x15f)+_0x50c687['isRunning']()+',\x20binSessionId:\x20'+_0x50c687['binSessionId']),_0x50c687[_0xbcd15c(0x1e4)]();}catch(_0x462e60){return logger['debug']('Error\x20initializing\x20CLI\x20in\x20formatter:\x20'+util['format'](_0x462e60)),![];}}async[a6_0x2d8deb(0x132)](){const _0x30a432=a6_0x2d8deb;try{return await this['ensureCLIInitialized'](),BrowserstackCLI[_0x30a432(0x159)]()[_0x30a432(0x1e4)]();}catch(_0x556dd8){return logger[_0x30a432(0x1a3)]('isCLIReady:\x20Error\x20checking\x20CLI\x20readiness:\x20'+util[_0x30a432(0x194)](_0x556dd8)),![];}}}module[a6_0x2d8deb(0x141)]=o11yClassErrorHandler(BrowserstackFormatter,['onTestCaseStarted',a6_0x2d8deb(0x18f),a6_0x2d8deb(0x1a8),'onTestStepFinished','onTestRunStarted',a6_0x2d8deb(0x1fe),a6_0x2d8deb(0x1f5),a6_0x2d8deb(0x16d),'getGherkinStepMap']);