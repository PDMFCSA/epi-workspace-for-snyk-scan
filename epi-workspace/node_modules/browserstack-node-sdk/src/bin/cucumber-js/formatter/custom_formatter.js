const a6_0x49a83e=a6_0xdd7e;(function(_0x46c64d,_0x38d24c){const _0x59aa2d=a6_0xdd7e,_0xab7a24=_0x46c64d();while(!![]){try{const _0x2eec91=-parseInt(_0x59aa2d(0x192))/0x1*(parseInt(_0x59aa2d(0x10c))/0x2)+-parseInt(_0x59aa2d(0x16c))/0x3*(parseInt(_0x59aa2d(0x19b))/0x4)+parseInt(_0x59aa2d(0x17e))/0x5+-parseInt(_0x59aa2d(0xe9))/0x6+-parseInt(_0x59aa2d(0xda))/0x7*(parseInt(_0x59aa2d(0x184))/0x8)+parseInt(_0x59aa2d(0x124))/0x9*(-parseInt(_0x59aa2d(0x170))/0xa)+parseInt(_0x59aa2d(0x13c))/0xb;if(_0x2eec91===_0x38d24c)break;else _0xab7a24['push'](_0xab7a24['shift']());}catch(_0x44c817){_0xab7a24['push'](_0xab7a24['shift']());}}}(a6_0x377a,0x9ddbf));const {requireModule,getPlatformName,nestedKeyValue,isUndefined,isBrowserstackInfra}=require(a6_0x49a83e(0x1a5)),util=require('util'),{Formatter,formatterHelpers,Status}=requireModule(a6_0x49a83e(0x150)),TestDetails=require(a6_0x49a83e(0x168)),TestObservabilityReporter=require('../test-observability.js'),{o11yClassErrorHandler}=require(a6_0x49a83e(0xe1)),{shouldProcessEventForTesthub}=require('../../../helpers/testhub/utils.js'),BrowserstackCLI=require(a6_0x49a83e(0xf0)),TestFrameworkState=require(a6_0x49a83e(0x106)),HookState=require(a6_0x49a83e(0x102)),CucumberUtils=require(a6_0x49a83e(0x15b)),TestInfo=require(a6_0x49a83e(0x155)),testObservabilityReporter=new TestObservabilityReporter(),cucumberUtils=new CucumberUtils(),logger=require(a6_0x49a83e(0x160))[a6_0x49a83e(0x118)],_tests={},_testCasesData={};class BrowserstackFormatter extends Formatter{constructor(_0x2295a1){const _0xced86e=a6_0x49a83e,_0x568b5e={};_0x568b5e['ZigFn']=_0xced86e(0xfd);const _0x3bacd9=_0x568b5e;super(_0x2295a1),this[_0xced86e(0xe7)]={},_0x2295a1['eventBroadcaster']['on'](_0x3bacd9[_0xced86e(0x136)],async _0x26676d=>{const _0x27ea9b=_0xced86e;switch(!![]){case!!_0x26676d[_0x27ea9b(0x144)]:this[_0x27ea9b(0xf1)](_0x26676d[_0x27ea9b(0x144)]);break;case!!_0x26676d[_0x27ea9b(0x130)]:this['onTestRunFinished'](_0x26676d['testRunFinished']);break;case!!_0x26676d[_0x27ea9b(0x1ab)]:this['onTestCaseStarted'](_0x26676d[_0x27ea9b(0x1ab)],_0x2295a1,_0x26676d);break;case!!_0x26676d[_0x27ea9b(0x176)]:this[_0x27ea9b(0x13d)](_0x26676d[_0x27ea9b(0x176)],_0x2295a1,_0x26676d);break;case!!_0x26676d[_0x27ea9b(0x143)]:this[_0x27ea9b(0xed)](_0x26676d['testStepStarted'],_0x2295a1);break;case!!_0x26676d['testStepFinished']:this['onTestStepFinished'](_0x26676d[_0x27ea9b(0xde)],_0x2295a1);break;case!!_0x26676d[_0x27ea9b(0x12d)]:this[_0x27ea9b(0xf6)](_0x26676d['hook']);break;case!!_0x26676d[_0x27ea9b(0x18f)]:this['onTestCase'](_0x26676d[_0x27ea9b(0x18f)]);break;case!!_0x26676d['pickle']:this[_0x27ea9b(0x145)](_0x26676d['pickle']);break;case!!_0x26676d[_0x27ea9b(0x19e)]:this['onGherkinDocument'](_0x26676d[_0x27ea9b(0x19e)]);break;}});}[a6_0x49a83e(0xf6)](_0x21c336){const _0x3e4ee8=a6_0x49a83e;this[_0x3e4ee8(0xe7)][_0x3e4ee8(0x129)]=Object[_0x3e4ee8(0xd9)]([],this[_0x3e4ee8(0xe7)][_0x3e4ee8(0x129)]||[]),this[_0x3e4ee8(0xe7)][_0x3e4ee8(0x129)][_0x3e4ee8(0x148)](_0x21c336);}[a6_0x49a83e(0x145)](_0x86ee44){const _0x13adb0=a6_0x49a83e;this['report']['pickle']=Object[_0x13adb0(0xd9)]([],this[_0x13adb0(0xe7)][_0x13adb0(0x111)]||[],[_0x86ee44]),this[_0x13adb0(0xe7)][_0x13adb0(0x111)]['push'](_0x86ee44);}[a6_0x49a83e(0x16b)](_0x3fea87){const _0x187e29=a6_0x49a83e;this[_0x187e29(0xe7)][_0x187e29(0x19e)]=Object[_0x187e29(0xd9)]([],this[_0x187e29(0xe7)]['gherkinDocument']||[],[_0x3fea87]),this[_0x187e29(0xe7)][_0x187e29(0x19e)][_0x187e29(0x148)](_0x3fea87);}[a6_0x49a83e(0x126)](_0x5eb8f2){const _0x1e1055=a6_0x49a83e;this[_0x1e1055(0xe7)][_0x1e1055(0x173)]=_0x5eb8f2;}[a6_0x49a83e(0x154)](_0x5ae6c0){const _0x535042=a6_0x49a83e;this[_0x535042(0xe7)][_0x535042(0xdf)]=Object[_0x535042(0xd9)]([],this[_0x535042(0xe7)]['stepDefinition']||[],[_0x5ae6c0]),this[_0x535042(0xe7)][_0x535042(0xdf)][_0x535042(0x148)](_0x5ae6c0);}['onTestCase'](_0xaa5906){const _0x327692=a6_0x49a83e;this[_0x327692(0xe7)][_0x327692(0xe8)]=Object[_0x327692(0xd9)]([],this[_0x327692(0xe7)][_0x327692(0xe8)]||[],[_0xaa5906]),this[_0x327692(0xe7)]['testCases'][_0x327692(0x148)](_0xaa5906);}[a6_0x49a83e(0x128)](_0x4a2478){const _0x34ce4a=a6_0x49a83e,_0x3e894a={'RqMzH':function(_0x5f0d46,_0x52dea){return _0x5f0d46!==_0x52dea;},'rDkvs':'bstack','bscHf':function(_0x23a3f2,_0x4788b2){return _0x23a3f2+_0x4788b2;},'VlTDh':function(_0x5ecaa5,_0xeb5c93){return _0x5ecaa5+_0xeb5c93;},'rKIAh':function(_0x360a4b,_0x5d9b9f){return _0x360a4b+_0x5d9b9f;},'ryqFj':_0x34ce4a(0x17b),'SMHir':_0x34ce4a(0x198),'mpcvr':function(_0x527337,_0x4e75c2){return _0x527337===_0x4e75c2;},'fLDgI':_0x34ce4a(0x11d),'ghToQ':function(_0x44b7ba,_0x2eb345,_0x359e8a){return _0x44b7ba(_0x2eb345,_0x359e8a);},'lqogp':_0x34ce4a(0xfa),'BxWpp':_0x34ce4a(0x190),'fsEnQ':function(_0x55eb19,_0x570027){return _0x55eb19+_0x570027;},'fsFbN':function(_0x4a43f9,_0x1af4ae){return _0x4a43f9+_0x1af4ae;},'qwzgo':function(_0x33558d,_0xf4633e){return _0x33558d+_0xf4633e;},'DMCSK':function(_0x41fbf0,_0x2e9b10){return _0x41fbf0+_0x2e9b10;}};_0x3e894a[_0x34ce4a(0xee)](global[_0x34ce4a(0x103)],undefined)&&this[_0x34ce4a(0xf8)](_0x3e894a['fsFbN'](_0x3e894a[_0x34ce4a(0xdb)]('\x0a',global[_0x34ce4a(0x103)]),'\x0a'));const _0x214789=this[_0x34ce4a(0x120)][_0x34ce4a(0x13a)](_0x4a2478[_0x34ce4a(0x158)]);this[_0x34ce4a(0xf8)](_0x3e894a[_0x34ce4a(0x11c)](_0x3e894a[_0x34ce4a(0x188)](_0x3e894a[_0x34ce4a(0x1aa)](_0x3e894a[_0x34ce4a(0x161)]('\x20\x20',_0x214789[_0x34ce4a(0x19e)][_0x34ce4a(0x174)]['name']),_0x3e894a[_0x34ce4a(0xf7)]),_0x214789[_0x34ce4a(0x111)]['name']),'\x0a'));const _0x316d26={};_0x316d26['cwd']=this[_0x34ce4a(0x14c)],_0x316d26[_0x34ce4a(0x10a)]=this['snippetBuilder'],_0x316d26['supportCodeLibrary']=this[_0x34ce4a(0x1a4)],_0x316d26[_0x34ce4a(0x146)]=_0x214789;const _0x3ab1b1=formatterHelpers['parseTestCaseAttempt'](_0x316d26);let _0x67ec6b=![];_0x3ab1b1[_0x34ce4a(0x195)]['forEach'](_0x1d9bac=>{const _0x11fc16=_0x34ce4a;if(_0x3e894a['RqMzH'](_0x1d9bac[_0x11fc16(0x189)],_0x3e894a['rDkvs'])&&!this[_0x11fc16(0x18b)](_0x1d9bac)){totalTests+=0x1,this[_0x11fc16(0xf8)](_0x3e894a[_0x11fc16(0x11c)](_0x3e894a['bscHf'](_0x3e894a[_0x11fc16(0x11c)](_0x3e894a[_0x11fc16(0x188)](_0x3e894a['rKIAh'](_0x3e894a[_0x11fc16(0x142)],_0x1d9bac[_0x11fc16(0x19c)]),_0x1d9bac[_0x11fc16(0x104)]||''),_0x3e894a[_0x11fc16(0xf7)]),Status[_0x1d9bac[_0x11fc16(0xfa)][_0x11fc16(0xe5)]]),'\x0a')),this[_0x11fc16(0x107)](Status[_0x1d9bac['result'][_0x11fc16(0xe5)]]);if(_0x3e894a['mpcvr'](Status[_0x1d9bac[_0x11fc16(0xfa)][_0x11fc16(0xe5)]],_0x3e894a[_0x11fc16(0x1a9)])){_0x67ec6b=!![];const _0x6352c9=_0x3e894a[_0x11fc16(0x13f)](nestedKeyValue,_0x1d9bac,[_0x3e894a[_0x11fc16(0xef)],_0x3e894a[_0x11fc16(0x141)]]);_0x6352c9&&(testsErrorMessage[_0x3e894a[_0x11fc16(0x1aa)](_0x3e894a[_0x11fc16(0x11e)](_0x214789['gherkinDocument'][_0x11fc16(0x174)][_0x11fc16(0x189)],_0x3e894a[_0x11fc16(0xf7)]),_0x214789['pickle'][_0x11fc16(0x189)])]=_0x6352c9,this[_0x11fc16(0xf8)](_0x3e894a[_0x11fc16(0x11e)](_0x6352c9,'\x0a')));}}}),_0x67ec6b&&(testSuitesFailed+=0x1),this[_0x34ce4a(0xf8)]('\x0a');}[a6_0x49a83e(0x127)](_0x4760e7){}['isBstackHook'](_0x27e5c9){const _0x5ca1b4=a6_0x49a83e,_0xec8957={};_0xec8957['qMNLy']=function(_0x36e5e7,_0x47e64b){return _0x36e5e7!==_0x47e64b;},_0xec8957[_0x5ca1b4(0xdd)]=_0x5ca1b4(0x1af);const _0x2da3d4=_0xec8957;if(_0x2da3d4[_0x5ca1b4(0x125)](_0x27e5c9[_0x5ca1b4(0x131)],undefined))return![];if(_0x27e5c9[_0x5ca1b4(0x16d)]&&_0x27e5c9[_0x5ca1b4(0x16d)][_0x5ca1b4(0x15f)][_0x5ca1b4(0x191)](_0x2da3d4['aOiTB']))return!![];return![];}['incrementCounter'](_0x190464){const _0x3a61de=a6_0x49a83e,_0x9827bb={};_0x9827bb[_0x3a61de(0xf3)]=_0x3a61de(0x11d),_0x9827bb['QYcVC']=_0x3a61de(0x182),_0x9827bb['ozuQI']=_0x3a61de(0x100),_0x9827bb[_0x3a61de(0x116)]=_0x3a61de(0x147),_0x9827bb['Dmzcs']=_0x3a61de(0x15c),_0x9827bb[_0x3a61de(0x122)]='UNKNOWN',_0x9827bb[_0x3a61de(0x17d)]=_0x3a61de(0x197);const _0x1443d5=_0x9827bb;switch(_0x190464){case _0x1443d5[_0x3a61de(0xf3)]:testsFailed+=0x1;break;case _0x1443d5[_0x3a61de(0x17a)]:testsPassed+=0x1;break;case _0x1443d5['ozuQI']:testsSkipped+=0x1;break;case _0x1443d5[_0x3a61de(0x116)]:testsPending+=0x1;break;case _0x1443d5[_0x3a61de(0x17f)]:testsUndefined+=0x1;break;case _0x1443d5['hLZPo']:testsUnknown+=0x1;break;case _0x1443d5['wgPSb']:testsAmbiguous+=0x1;break;default:break;}}async[a6_0x49a83e(0xf1)](_0x27d831){const _0x4e0a05=a6_0x49a83e,_0xbdee95={'WHEJq':function(_0x12238d,_0x323a15){return _0x12238d!==_0x323a15;},'NexJu':function(_0x1eaef5,_0x5dacfd){return _0x1eaef5!==_0x5dacfd;},'anxDB':function(_0x4c7d64){return _0x4c7d64();},'tSzRP':function(_0x35e626,_0x3a4cd8){return _0x35e626(_0x3a4cd8);},'GnUwe':function(_0x5d9f72,_0x428349){return _0x5d9f72+_0x428349;},'yGqnd':function(_0x2975ce){return _0x2975ce();},'MYwnW':_0x4e0a05(0x199)};let _0xef85e1;if(_0xbdee95[_0x4e0a05(0x149)](process[_0x4e0a05(0xf2)][_0x4e0a05(0x196)],undefined)){const _0x1d74a4=JSON[_0x4e0a05(0x110)](process[_0x4e0a05(0xf2)][_0x4e0a05(0x196)]);_0xef85e1=_0x1d74a4[_0x4e0a05(0x18a)];}_0xbdee95['NexJu'](_0xef85e1,undefined)&&_0xbdee95[_0x4e0a05(0x113)](isBrowserstackInfra)&&(global['__platform']=_0xbdee95[_0x4e0a05(0x14e)](getPlatformName,_0xef85e1),this[_0x4e0a05(0xf8)](_0xbdee95[_0x4e0a05(0xff)]('Executing\x20tests\x20for\x20'+global[_0x4e0a05(0x103)],'\x0a'))),_0xbdee95[_0x4e0a05(0x12b)](shouldProcessEventForTesthub)&&(TestDetails[_0x4e0a05(0x19a)](),this['report'][_0x4e0a05(0x144)]=_0x27d831,BrowserstackCLI[_0x4e0a05(0x159)]()[_0x4e0a05(0xeb)]()&&await this[_0x4e0a05(0x121)]()&&(TestInfo['setup'](_0xbdee95[_0x4e0a05(0x16a)]),await BrowserstackCLI[_0x4e0a05(0x159)]()[_0x4e0a05(0x153)]()['trackEvent'](TestFrameworkState[_0x4e0a05(0x139)],HookState[_0x4e0a05(0x15e)],{})));}[a6_0x49a83e(0x117)](_0x5de9b0){const _0x59c83d=a6_0x49a83e;this['report'][_0x59c83d(0x130)]=_0x5de9b0,this[_0x59c83d(0x127)](_0x5de9b0);}async['onTestCaseStarted'](_0x232db5,_0x29e485,_0x137449){const _0x2fe4e4=a6_0x49a83e,_0x5652e8={'BEaTH':function(_0x2a9315,_0x5cdff8){return _0x2a9315(_0x5cdff8);},'kjveA':_0x2fe4e4(0x16f),'CZUQj':function(_0x5d20c8,_0x41aa5c){return _0x5d20c8&&_0x41aa5c;}};testSuites+=0x1;if(_0x5652e8[_0x2fe4e4(0x133)](shouldProcessEventForTesthub,_0x5652e8['kjveA']))try{this[_0x2fe4e4(0xe7)][_0x2fe4e4(0x1ab)]=this[_0x2fe4e4(0xe7)][_0x2fe4e4(0x1ab)]||{},this[_0x2fe4e4(0xe7)][_0x2fe4e4(0x1ab)][_0x232db5['id']]=_0x232db5;let _0x11be9e=null;BrowserstackCLI['getInstance']()['isCliEnabled']()&&await this[_0x2fe4e4(0x121)]()?_0x11be9e=TestInfo[_0x2fe4e4(0x13b)](_0x232db5['id']):_0x11be9e=TestDetails[_0x2fe4e4(0x13b)](_0x232db5['id']);_testCasesData[_0x232db5['id']]=Object[_0x2fe4e4(0xd9)]({},_0x137449);const _0x575c0a=this[_0x2fe4e4(0xe7)],_0x390034=_0x232db5[_0x2fe4e4(0x119)],_0x47caaf=_0x575c0a[_0x2fe4e4(0xe8)][_0x2fe4e4(0x12a)](_0x3310ef=>_0x3310ef['id']===_0x390034)[_0x2fe4e4(0x164)],_0x4c1536=_0x575c0a[_0x2fe4e4(0x111)][_0x2fe4e4(0x12a)](_0x28a75e=>_0x28a75e['id']===_0x47caaf),_0x3e71bb=_0x575c0a['gherkinDocument'][_0x2fe4e4(0x12a)](_0x42f93f=>_0x42f93f[_0x2fe4e4(0x15f)]===_0x4c1536[_0x2fe4e4(0x15f)]),_0xffa8e1=_0x3e71bb['feature'],_0x3694c8={'uuid':_0x11be9e,'startedAt':new Date()[_0x2fe4e4(0x194)]()};if(_0x4c1536){const _0x36f7c2={};_0x36f7c2['name']=_0x4c1536[_0x2fe4e4(0x189)],_0x3694c8['scenario']=_0x36f7c2;}if(_0x5652e8[_0x2fe4e4(0x151)](_0x3e71bb,_0xffa8e1)){const _0x5ef157={};_0x5ef157[_0x2fe4e4(0x134)]=_0x3e71bb[_0x2fe4e4(0x15f)],_0x5ef157[_0x2fe4e4(0x189)]=_0xffa8e1[_0x2fe4e4(0x189)],_0x5ef157[_0x2fe4e4(0xe0)]=_0xffa8e1[_0x2fe4e4(0xe0)],_0x3694c8[_0x2fe4e4(0x174)]=_0x5ef157;}_tests[_0x390034]=_0x3694c8;if(BrowserstackCLI['getInstance']()[_0x2fe4e4(0xeb)]()&&await this[_0x2fe4e4(0x121)]()){const _0x546389=await cucumberUtils[_0x2fe4e4(0x186)](_0x3694c8,_0x4c1536,_0x137449,_0x3e71bb,_0x232db5['id'],_0x5652e8[_0x2fe4e4(0x12c)]),_0x4908b0={};_0x4908b0[_0x2fe4e4(0x10d)]=_0x546389,await BrowserstackCLI['getInstance']()['getTestFramework']()[_0x2fe4e4(0x1a7)](TestFrameworkState[_0x2fe4e4(0xe4)],HookState[_0x2fe4e4(0x15e)],_0x4908b0);return;}await testObservabilityReporter['sendTestRunEventForCucumber'](_0x137449,_0x3e71bb,_0x4c1536,_0x5652e8[_0x2fe4e4(0x12c)],_0x3694c8);}catch(_0x4a232e){logger[_0x2fe4e4(0x1a8)](_0x2fe4e4(0x14b)+util[_0x2fe4e4(0x10e)](_0x4a232e)+'\x20');}}async['onTestCaseFinished'](_0x40b943,_0x25b7a5,_0x194ada){const _0x2f7a05=a6_0x49a83e,_0xc30f55={'JVXdH':function(_0x5f1db9,_0xe6bdd8){return _0x5f1db9(_0xe6bdd8);},'EMYWs':'TestRunFinished','oSGVz':_0x2f7a05(0x10d)};this[_0x2f7a05(0x128)](_0x40b943);if(_0xc30f55[_0x2f7a05(0x11f)](shouldProcessEventForTesthub,_0xc30f55[_0x2f7a05(0x1a2)]))try{this[_0x2f7a05(0xe7)][_0x2f7a05(0x176)]=this[_0x2f7a05(0xe7)][_0x2f7a05(0x176)]||{},this[_0x2f7a05(0xe7)][_0x2f7a05(0x176)][_0x40b943[_0x2f7a05(0x158)]]=_0x40b943,_testCasesData[_0x194ada['id']]=Object[_0x2f7a05(0xd9)]({},_0x194ada);const _0x1648e5=_0x40b943[_0x2f7a05(0x158)],_0x4d3fb2=_0x25b7a5[_0x2f7a05(0x120)][_0x2f7a05(0xdc)][_0x1648e5]['testCaseId'],_0x5eca8f=_0x25b7a5[_0x2f7a05(0x120)][_0x2f7a05(0xd8)][_0x4d3fb2],_0x79923=_0x5eca8f['pickleId'],_0x4e779e=_0x25b7a5[_0x2f7a05(0x120)]['pickleMap'][_0x79923],_0x49bc5b=this[_0x2f7a05(0x14d)](_0x25b7a5,_0x4e779e),_0x2f3ee6=_0x49bc5b[_0x2f7a05(0x174)],_0x542853=_tests[_0x4d3fb2];_0x542853&&(delete _tests[_0x4d3fb2],_0x542853[_0x2f7a05(0x140)]=new Date()[_0x2f7a05(0x194)]());if(BrowserstackCLI[_0x2f7a05(0x159)]()['isCliEnabled']()&&await this[_0x2f7a05(0x121)]()){const _0x1f55c1=await cucumberUtils['createTestFrameworkData'](_0x542853,_0x4e779e,_0x194ada,_0x49bc5b,_0x1648e5,_0xc30f55['EMYWs']),_0x57ffbc={};_0x57ffbc[_0x2f7a05(0x10d)]=_0x1f55c1,await BrowserstackCLI[_0x2f7a05(0x159)]()[_0x2f7a05(0x153)]()[_0x2f7a05(0x1a7)](TestFrameworkState['TEST'],HookState['POST'],_0x57ffbc);const _0xb2414f={};_0xb2414f[_0x2f7a05(0x123)]=_0x40b943[_0x2f7a05(0x158)],_0xb2414f[_0x2f7a05(0x171)]=_0xc30f55[_0x2f7a05(0x16e)],await BrowserstackCLI[_0x2f7a05(0x159)]()[_0x2f7a05(0x153)]()[_0x2f7a05(0x1a7)](TestFrameworkState[_0x2f7a05(0x177)],HookState[_0x2f7a05(0xea)],_0xb2414f);return;}await testObservabilityReporter[_0x2f7a05(0x105)](_0x194ada,_0x49bc5b,_0x4e779e,_0xc30f55[_0x2f7a05(0x1a2)],_0x542853);}catch(_0x1a171c){logger[_0x2f7a05(0x1a8)](_0x2f7a05(0x109)+util['format'](_0x1a171c));}}async[a6_0x49a83e(0xed)](_0x3b0379,_0x559aef){const _0xf84f93=a6_0x49a83e,_0x159f45={'jXABI':function(_0x72f458,_0xec730b){return _0x72f458(_0xec730b);},'jchsI':_0xf84f93(0xfe),'IyOsm':function(_0x2270d3,_0x33e3d1){return _0x2270d3!==_0x33e3d1;},'CrLzb':_0xf84f93(0x172)};if(_0x159f45[_0xf84f93(0x175)](shouldProcessEventForTesthub,_0x159f45[_0xf84f93(0x15d)]))try{this['report'][_0xf84f93(0x143)]=this[_0xf84f93(0xe7)][_0xf84f93(0x143)]||{},this['report']['testStepStarted'][_0x3b0379[_0xf84f93(0x158)]]=_0x3b0379;const _0x13b7c2=_0x3b0379['testCaseStartedId'],_0x1da1a0=_0x559aef[_0xf84f93(0x120)][_0xf84f93(0xdc)][_0x13b7c2][_0xf84f93(0x119)],_0x4d9f4f=this['report'][_0xf84f93(0xe8)][_0xf84f93(0x12a)](_0x427052=>_0x427052['id']===_0x1da1a0)[_0xf84f93(0x164)],_0x2b50e0=this[_0xf84f93(0xe7)][_0xf84f93(0x111)]['find'](_0x1b1cff=>_0x1b1cff['id']===_0x4d9f4f),_0x410377=this['report']['testCases'][_0xf84f93(0x12a)](_0x5eb699=>_0x5eb699['id']===_0x1da1a0)[_0xf84f93(0x195)],_0x5e3deb=this['report'][_0xf84f93(0x143)][_0x13b7c2][_0xf84f93(0x172)],_0x27ac55=_0x410377[_0xf84f93(0x12a)](_0x2969b1=>_0x2969b1['id']===_0x5e3deb)[_0xf84f93(0x166)],_0x56e338=_0x2b50e0[_0xf84f93(0x17c)][_0xf84f93(0x12a)](_0x5af029=>_0x5af029['id']===_0x27ac55);if(_0x27ac55&&_tests[_0x1da1a0]&&_0x159f45[_0xf84f93(0x1b0)](_tests[_0x1da1a0][_0x159f45[_0xf84f93(0x180)]],_0x5e3deb)){_tests[_0x1da1a0][_0x159f45['CrLzb']]=_0x5e3deb;const _0x29240f={};_0x29240f[_0xf84f93(0x17c)]=[];const _0x39b5b6=_tests[_0x1da1a0]||_0x29240f;_0x39b5b6&&!_0x39b5b6[_0xf84f93(0x17c)]&&(_0x39b5b6[_0xf84f93(0x17c)]=[]),_0x39b5b6['steps'][_0xf84f93(0x148)]({'id':_0x56e338['id'],'text':_0x56e338['text'],'started_at':new Date()[_0xf84f93(0x194)]()}),_tests[_0x1da1a0]=_0x39b5b6;}if(BrowserstackCLI[_0xf84f93(0x159)]()[_0xf84f93(0xeb)]()&&await this[_0xf84f93(0x121)]()){const _0x3b1dec=await cucumberUtils['createHookData'](this[_0xf84f93(0xe7)],_0x13b7c2,_0x159f45[_0xf84f93(0x15d)],_0x410377,_0x5e3deb,_tests[_0x1da1a0]);_0x3b1dec&&await BrowserstackCLI['getInstance']()[_0xf84f93(0x153)]()[_0xf84f93(0x1a7)](TestFrameworkState[_0x3b1dec[_0xf84f93(0x1ac)]],HookState[_0xf84f93(0x15e)],{'hookData':_0x3b1dec,'testUUID':_0x3b0379[_0xf84f93(0x158)]});return;}await testObservabilityReporter['sendHook'](this[_0xf84f93(0xe7)],_0x13b7c2,_0x159f45['jchsI'],_0x410377,_0x5e3deb,_tests[_0x1da1a0]);}catch(_0x5f2faf){logger[_0xf84f93(0x1a8)](_0xf84f93(0x1a1)+util[_0xf84f93(0x10e)](_0x5f2faf));}}async[a6_0x49a83e(0x162)](_0x3df87f,_0xdd8604){const _0xcabe8a=a6_0x49a83e,_0x13a1ac={'rvNsM':function(_0x36eb68,_0x1de849){return _0x36eb68===_0x1de849;},'rTcFT':_0xcabe8a(0x114),'QRFsv':function(_0x8bbe65,_0x2e13f4){return _0x8bbe65(_0x2e13f4);},'aEFmm':'HookRunFinished','HUulX':'failed','IlHPd':function(_0x1635e1,_0x1d7070){return _0x1635e1===_0x1d7070;},'dPNai':_0xcabe8a(0x167),'QaPDB':_0xcabe8a(0x172),'PjeZr':'HookRunStarted','bKQfo':_0xcabe8a(0x12d)};this['report'][_0xcabe8a(0xde)]=this[_0xcabe8a(0xe7)][_0xcabe8a(0xde)]||{},this[_0xcabe8a(0xe7)][_0xcabe8a(0xde)][_0x3df87f['testCaseStartedId']]=_0x3df87f;if(_0x13a1ac[_0xcabe8a(0xf4)](shouldProcessEventForTesthub,_0x13a1ac['aEFmm']))try{const _0x469d6e=_0x3df87f[_0xcabe8a(0x158)],_0x2172c9=_0xdd8604[_0xcabe8a(0x120)][_0xcabe8a(0xdc)][_0x469d6e][_0xcabe8a(0x119)],_0x21c6a8=_0xdd8604[_0xcabe8a(0x120)][_0xcabe8a(0xd8)][_0x2172c9],_0x5b9135=_0x21c6a8[_0xcabe8a(0x164)],_0x21a19f=_0xdd8604[_0xcabe8a(0x120)][_0xcabe8a(0x135)][_0x5b9135],_0x4bcc0b=_0x3df87f[_0xcabe8a(0x172)],_0x44ebd2=_0x21c6a8['testSteps'],_0x1e689a=this[_0xcabe8a(0x120)][_0xcabe8a(0x13a)](_0x469d6e),_0x1e488c=_0x44ebd2[_0xcabe8a(0x12a)](_0x21de4c=>_0x21de4c['id']===_0x4bcc0b)[_0xcabe8a(0x166)];let _0x25b720,_0x502d5d;_0x3df87f[_0xcabe8a(0x156)]&&_0x13a1ac[_0xcabe8a(0x1ae)](_0x3df87f['testStepResult']['status'][_0xcabe8a(0x115)]()[_0xcabe8a(0xfc)](),_0x13a1ac[_0xcabe8a(0xd7)])&&(_0x25b720=_0x13a1ac[_0xcabe8a(0xe6)](_0x3df87f[_0xcabe8a(0x156)][_0xcabe8a(0x1a6)],undefined)?_0x3df87f[_0xcabe8a(0x156)][_0xcabe8a(0x190)]:_0x3df87f[_0xcabe8a(0x156)][_0xcabe8a(0x1a6)][_0xcabe8a(0x190)],_0x502d5d=_0x13a1ac['IlHPd'](_0x3df87f[_0xcabe8a(0x156)][_0xcabe8a(0x1a6)],undefined)?_0x13a1ac[_0xcabe8a(0x1a3)]:_0x3df87f[_0xcabe8a(0x156)]['message']);if(_0x1e488c&&_tests[_0x2172c9][_0x13a1ac[_0xcabe8a(0x14f)]]){const _0x13aacc=_0x21a19f[_0xcabe8a(0x17c)]['find'](_0x380f0b=>_0x380f0b['id']===_0x1e488c),_0x396ef9={};_0x396ef9[_0xcabe8a(0x17c)]=[];const _0x5d377a=_tests[_0x2172c9]||_0x396ef9;!_0x5d377a['steps']?_0x5d377a[_0xcabe8a(0x17c)]=[{'id':_0x13aacc['id'],'text':_0x13aacc[_0xcabe8a(0x104)],'finished_at':new Date()[_0xcabe8a(0x194)](),'result':_0x3df87f[_0xcabe8a(0x156)][_0xcabe8a(0xe5)],'duration':_0x3df87f['testStepResult'][_0xcabe8a(0x14a)][_0xcabe8a(0x181)],'failure':_0x25b720,'failureType':_0x502d5d}]:_0x5d377a[_0xcabe8a(0x17c)][_0xcabe8a(0xf9)](_0x55a8c1=>{const _0x1ac290=_0xcabe8a;if(_0x13a1ac['rvNsM'](_0x55a8c1['id'],_0x13aacc['id'])){const _0x58b6a4=_0x13a1ac['rTcFT'][_0x1ac290(0x19f)]('|');let _0x42abd4=0x0;while(!![]){switch(_0x58b6a4[_0x42abd4++]){case'0':_0x55a8c1['duration']=_0x3df87f[_0x1ac290(0x156)][_0x1ac290(0x14a)]['seconds'];continue;case'1':_0x55a8c1[_0x1ac290(0xfa)]=_0x3df87f[_0x1ac290(0x156)]['status'];continue;case'2':_0x55a8c1['failure']=_0x25b720;continue;case'3':_0x55a8c1[_0x1ac290(0xec)]=new Date()[_0x1ac290(0x194)]();continue;case'4':_0x55a8c1[_0x1ac290(0x137)]=_0x502d5d;continue;}break;}}}),_tests[_0x2172c9]=_0x5d377a;}delete _tests[_0x2172c9][_0x13a1ac[_0xcabe8a(0x14f)]];if(BrowserstackCLI[_0xcabe8a(0x159)]()[_0xcabe8a(0xeb)]()&&await this[_0xcabe8a(0x121)]()){const _0x4496c7=await cucumberUtils[_0xcabe8a(0x10f)](this[_0xcabe8a(0xe7)],_0x469d6e,_0x13a1ac[_0xcabe8a(0x19d)],_0x44ebd2,_0x4bcc0b,_tests[_0x2172c9]);if(_0x4496c7){await BrowserstackCLI['getInstance']()['getTestFramework']()[_0xcabe8a(0x1a7)](TestFrameworkState[_0x4496c7[_0xcabe8a(0x1ac)]],HookState[_0xcabe8a(0xea)],{'hookData':_0x4496c7,'testUUID':_0x3df87f[_0xcabe8a(0x158)]});const _0x882786={};_0x882786['testUUID']=_0x3df87f[_0xcabe8a(0x158)],_0x882786['type']=_0x13a1ac[_0xcabe8a(0xfb)],await BrowserstackCLI[_0xcabe8a(0x159)]()['getTestFramework']()[_0xcabe8a(0x1a7)](TestFrameworkState[_0xcabe8a(0x177)],HookState[_0xcabe8a(0xea)],_0x882786);}return;}await testObservabilityReporter[_0xcabe8a(0x183)](this['report'],_0x469d6e,_0x13a1ac[_0xcabe8a(0x163)],_0x44ebd2,_0x4bcc0b,_tests[_0x2172c9]);}catch(_0x3edd3a){logger[_0xcabe8a(0x1a8)]('Exception\x20in\x20onTestStepFinished\x20event:\x20'+util[_0xcabe8a(0x10e)](_0x3edd3a));}}['getGherkinStepMap'](_0x2b0be1){const _0x5f4cdb=a6_0x49a83e,_0x1d82a8={};return _0x2b0be1['feature']['children'][_0x5f4cdb(0x179)](this[_0x5f4cdb(0x10b)])[_0x5f4cdb(0x1a0)]()['forEach'](_0x52b1cf=>_0x52b1cf[_0x5f4cdb(0x17c)][_0x5f4cdb(0xf9)](_0xdb2951=>_0x1d82a8[_0xdb2951['id']]=_0xdb2951)),_0x1d82a8;}[a6_0x49a83e(0x10b)](_0xa50ece){const _0xa04e9c=a6_0x49a83e,_0x15e4bc={'ulEeY':function(_0x17a8b9,_0x3a5e5d){return _0x17a8b9(_0x3a5e5d);},'ViNiL':function(_0x455c6e,_0x4ac3f1){return _0x455c6e(_0x4ac3f1);}};if(!_0x15e4bc[_0xa04e9c(0x12e)](isUndefined,_0xa50ece[_0xa04e9c(0x112)]))return[_0xa50ece[_0xa04e9c(0x112)]];else{if(!_0x15e4bc['ViNiL'](isUndefined,_0xa50ece[_0xa04e9c(0x11a)]))return _0xa50ece[_0xa04e9c(0x11a)][_0xa04e9c(0x152)]['map'](_0x2fce09=>!isUndefined(_0x2fce09[_0xa04e9c(0x112)])?_0x2fce09[_0xa04e9c(0x112)]:_0x2fce09[_0xa04e9c(0x165)]);};return[_0xa50ece[_0xa04e9c(0x165)]];}[a6_0x49a83e(0x14d)](_0x773fa5,_0x513914){const _0x3b8100=a6_0x49a83e;return Object[_0x3b8100(0xe3)](_0x773fa5[_0x3b8100(0x120)][_0x3b8100(0x18e)])['find'](_0x48c6b0=>_0x48c6b0[_0x3b8100(0x15f)]===_0x513914[_0x3b8100(0x15f)]);}async[a6_0x49a83e(0xf5)](){const _0x1b541a=a6_0x49a83e;if(this[_0x1b541a(0x187)])return this[_0x1b541a(0x187)];return this[_0x1b541a(0x187)]=this[_0x1b541a(0x178)](),this[_0x1b541a(0x187)];}async[a6_0x49a83e(0x178)](){const _0xfa4b75=a6_0x49a83e,_0x29d552={'CyBwJ':_0xfa4b75(0x13e),'WePGR':function(_0x58b50d,_0x5c10f9){return _0x58b50d(_0x5c10f9);},'fmOoY':'../../v2/cliUtils','ldmVi':function(_0x3e2617,_0x11a47){return _0x3e2617(_0x11a47);},'UuwwC':_0xfa4b75(0x12f)};try{const _0x5b4a54=BrowserstackCLI[_0xfa4b75(0x159)]();if(_0x5b4a54['isRunning']())return logger[_0xfa4b75(0x1a8)]('CLI\x20already\x20running\x20-\x20binSessionId:\x20'+_0x5b4a54[_0xfa4b75(0x108)]),!![];const _0x56d8f5=process[_0xfa4b75(0xf2)][_0xfa4b75(0x18d)];if(!_0x56d8f5)return logger[_0xfa4b75(0x1a8)](_0x29d552[_0xfa4b75(0x193)]),![];const _0x155209=_0x29d552[_0xfa4b75(0x132)](require,_0x29d552['fmOoY']),{FRAMEWORKS:_0x40e1e5}=_0x29d552[_0xfa4b75(0x11b)](require,_0x29d552[_0xfa4b75(0x101)]);return _0x155209[_0xfa4b75(0x1ad)](_0x40e1e5['CUCUMBER'],_0x40e1e5[_0xfa4b75(0x185)]),logger[_0xfa4b75(0x1a8)]('Bootstrapping\x20CLI\x20in\x20formatter\x20with\x20binSessionId:\x20'+_0x56d8f5),await _0x5b4a54['bootstrap'](),logger['debug'](_0xfa4b75(0x15a)+_0x5b4a54[_0xfa4b75(0x157)]()+',\x20binSessionId:\x20'+_0x5b4a54[_0xfa4b75(0x108)]),_0x5b4a54[_0xfa4b75(0x157)]();}catch(_0x3570b0){return logger[_0xfa4b75(0x1a8)]('Error\x20initializing\x20CLI\x20in\x20formatter:\x20'+util[_0xfa4b75(0x10e)](_0x3570b0)),![];}}async[a6_0x49a83e(0x121)](){const _0x4cd549=a6_0x49a83e;try{return await this[_0x4cd549(0xf5)](),BrowserstackCLI[_0x4cd549(0x159)]()['isRunning']();}catch(_0x57c2e1){return logger[_0x4cd549(0x1a8)](_0x4cd549(0x169)+util['format'](_0x57c2e1)),![];}}}function a6_0xdd7e(_0x3d2881,_0xc49eba){const _0x377a21=a6_0x377a();return a6_0xdd7e=function(_0xdd7ea7,_0x23912b){_0xdd7ea7=_0xdd7ea7-0xd7;let _0x5cf6d2=_0x377a21[_0xdd7ea7];return _0x5cf6d2;},a6_0xdd7e(_0x3d2881,_0xc49eba);}module[a6_0x49a83e(0xe2)]=o11yClassErrorHandler(BrowserstackFormatter,[a6_0x49a83e(0x138),a6_0x49a83e(0x13d),a6_0x49a83e(0xed),'onTestStepFinished',a6_0x49a83e(0xf1),'onTestRunFinished',a6_0x49a83e(0x10b),a6_0x49a83e(0x14d),a6_0x49a83e(0x18c)]);function a6_0x377a(){const _0x1c5741=['oSGVz','TestRunStarted','10dvlRhs','type','testStepId','source','feature','jXABI','testCaseFinished','LOG_REPORT','_performCLIInitialization','map','QYcVC','\x20\x20\x20\x20','steps','wgPSb','4809185DweYrL','Dmzcs','CrLzb','seconds','PASSED','sendHook','1568gWbyNn','PLAYWRIGHT','createTestFrameworkData','cliInitPromise','VlTDh','name','capability','isBstackHook','getGherkinStepMap','BROWSERSTACK_CLI_BIN_SESSION_ID','gherkinDocumentMap','testCase','message','includes','15845xgIwph','CyBwJ','toISOString','testSteps','CONFIG','AMBIGUOUS','\x20-\x20','cucumber','setup','12EpLCCE','keyword','PjeZr','gherkinDocument','split','flat','Exception\x20in\x20onTestStepStarted\x20event:\x20','EMYWs','dPNai','supportCodeLibrary','../../../helpers/helper','exception','trackEvent','debug','fLDgI','rKIAh','testCaseStarted','hook_type','setFrameworkDetail','rvNsM','cucumber-js/test.setup.js','IyOsm','HUulX','testCaseMap','assign','16758qnVuBj','qwzgo','testCaseAttemptDataMap','aOiTB','testStepFinished','stepDefinition','description','../../../helpers/test-observability/error-handler','exports','values','TEST','status','IlHPd','report','testCases','6384216aCQjJi','POST','isCliEnabled','finished_at','onTestStepStarted','RqMzH','lqogp','../../v2/browserstackCLI.js','onTestRunStarted','env','rxITO','QRFsv','ensureCLIInitialized','onHook','SMHir','log','forEach','result','bKQfo','toLowerCase','envelope','HookRunStarted','GnUwe','SKIPPED','UuwwC','../../v2/state/hookState.js','__platform','text','sendTestRunEventForCucumber','../../v2/state/testFrameworkState.js','incrementCounter','binSessionId','Exception\x20in\x20sending\x20onTestCaseFinished\x20event:\x20\x20','snippetBuilder','extractStepContainers','44kIFEsO','test','format','createHookData','parse','pickle','background','anxDB','3|1|0|2|4','toString','uuzcE','onTestRunFinished','winstonLogger','testCaseId','rule','ldmVi','bscHf','FAILED','fsEnQ','JVXdH','eventDataCollector','isCLIReady','hLZPo','testUUID','3724119CHxAYW','qMNLy','onSource','logTestRunFinished','logTestCaseFinished','hooks','find','yGqnd','kjveA','hook','ulEeY','../../utils/constants','testRunFinished','sourceLocation','WePGR','BEaTH','path','pickleMap','ZigFn','failureType','onTestCaseStarted','INIT_TEST','getTestCaseAttempt','getTestUUID','25667026uhBwLy','onTestCaseFinished','No\x20BROWSERSTACK_CLI_BIN_SESSION_ID\x20found,\x20CLI\x20not\x20available','ghToQ','finishedAt','BxWpp','ryqFj','testStepStarted','testRunStarted','onPickle','testCaseAttempt','PENDING','push','WHEJq','duration','Exception\x20in\x20sending\x20onTestCaseStarted:\x20','cwd','getGherkinDocument','tSzRP','QaPDB','@cucumber/cucumber','CZUQj','children','getTestFramework','onStepDefinition','../../../bin/v2/TestInfo.js','testStepResult','isRunning','testCaseStartedId','getInstance','CLI\x20bootstrap\x20completed\x20-\x20isRunning:\x20','../../v2/utils/cucumber-utils.js','UNDEFINED','jchsI','PRE','uri','../../../helpers/logger','DMCSK','onTestStepFinished','aEFmm','pickleId','scenario','pickleStepId','UnhandledError','../../playwright/reporter/test-details.js','isCLIReady:\x20Error\x20checking\x20CLI\x20readiness:\x20','MYwnW','onGherkinDocument','352971OukEbk','actionLocation'];a6_0x377a=function(){return _0x1c5741;};return a6_0x377a();}