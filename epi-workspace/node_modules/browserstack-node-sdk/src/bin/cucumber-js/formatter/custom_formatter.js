const a7_0xd9b09f=a7_0x542d;(function(_0x36cfac,_0x8c1ddb){const _0x539857=a7_0x542d,_0x4acba4=_0x36cfac();while(!![]){try{const _0x2e9d94=-parseInt(_0x539857(0x19a))/0x1+parseInt(_0x539857(0x1e3))/0x2*(-parseInt(_0x539857(0x1da))/0x3)+parseInt(_0x539857(0x1f5))/0x4+-parseInt(_0x539857(0x1a2))/0x5+parseInt(_0x539857(0x246))/0x6*(-parseInt(_0x539857(0x235))/0x7)+parseInt(_0x539857(0x1e1))/0x8+parseInt(_0x539857(0x1d0))/0x9*(parseInt(_0x539857(0x263))/0xa);if(_0x2e9d94===_0x8c1ddb)break;else _0x4acba4['push'](_0x4acba4['shift']());}catch(_0x1b9d8c){_0x4acba4['push'](_0x4acba4['shift']());}}}(a7_0x43e9,0x98497));const {requireModule,getPlatformName,nestedKeyValue,isUndefined,isBrowserstackInfra}=require(a7_0xd9b09f(0x20a)),util=require(a7_0xd9b09f(0x24d)),{Formatter,formatterHelpers,Status}=requireModule('@cucumber/cucumber'),TestDetails=require(a7_0xd9b09f(0x21a)),TestObservabilityReporter=require('../test-observability.js'),{o11yClassErrorHandler}=require(a7_0xd9b09f(0x23f)),{shouldProcessEventForTesthub}=require(a7_0xd9b09f(0x204)),BrowserstackCLI=require('../../v2/browserstackCLI.js'),TestFrameworkState=require(a7_0xd9b09f(0x264)),HookState=require(a7_0xd9b09f(0x26a)),CucumberUtils=require(a7_0xd9b09f(0x249)),TestInfo=require('../../../bin/v2/TestInfo.js'),testObservabilityReporter=new TestObservabilityReporter(),cucumberUtils=new CucumberUtils(),logger=require('../../../helpers/logger')[a7_0xd9b09f(0x1df)],_tests={},_testCasesData={};class BrowserstackFormatter extends Formatter{constructor(_0x15d092){const _0x1443b2=a7_0xd9b09f,_0x3fb589={};_0x3fb589[_0x1443b2(0x1b8)]=_0x1443b2(0x1a9);const _0x24d422=_0x3fb589;super(_0x15d092),this[_0x1443b2(0x192)]={},_0x15d092['eventBroadcaster']['on'](_0x24d422[_0x1443b2(0x1b8)],async _0x915f0b=>{const _0x58517f=_0x1443b2;switch(!![]){case!!_0x915f0b[_0x58517f(0x1e5)]:this[_0x58517f(0x237)](_0x915f0b['testRunStarted']);break;case!!_0x915f0b[_0x58517f(0x26d)]:this[_0x58517f(0x1ae)](_0x915f0b['testRunFinished']);break;case!!_0x915f0b[_0x58517f(0x1d4)]:this[_0x58517f(0x1e9)](_0x915f0b['testCaseStarted'],_0x15d092,_0x915f0b);break;case!!_0x915f0b[_0x58517f(0x245)]:this[_0x58517f(0x223)](_0x915f0b[_0x58517f(0x245)],_0x15d092,_0x915f0b);break;case!!_0x915f0b[_0x58517f(0x20d)]:this[_0x58517f(0x197)](_0x915f0b[_0x58517f(0x20d)],_0x15d092);break;case!!_0x915f0b[_0x58517f(0x1cd)]:this[_0x58517f(0x1eb)](_0x915f0b[_0x58517f(0x1cd)],_0x15d092);break;case!!_0x915f0b[_0x58517f(0x250)]:this[_0x58517f(0x1fd)](_0x915f0b[_0x58517f(0x250)]);break;case!!_0x915f0b[_0x58517f(0x1be)]:this[_0x58517f(0x239)](_0x915f0b[_0x58517f(0x1be)]);break;case!!_0x915f0b['pickle']:this[_0x58517f(0x1b1)](_0x915f0b['pickle']);break;case!!_0x915f0b['gherkinDocument']:this[_0x58517f(0x193)](_0x915f0b[_0x58517f(0x215)]);break;}});}[a7_0xd9b09f(0x1fd)](_0x30fbfe){const _0xfed89a=a7_0xd9b09f;this[_0xfed89a(0x192)]['hooks']=Object[_0xfed89a(0x1c3)]([],this[_0xfed89a(0x192)][_0xfed89a(0x1fc)]||[]),this[_0xfed89a(0x192)]['hooks'][_0xfed89a(0x1dc)](_0x30fbfe);}['onPickle'](_0x47b2c9){const _0x56bbc4=a7_0xd9b09f;this[_0x56bbc4(0x192)][_0x56bbc4(0x1cf)]=Object[_0x56bbc4(0x1c3)]([],this['report'][_0x56bbc4(0x1cf)]||[],[_0x47b2c9]),this[_0x56bbc4(0x192)][_0x56bbc4(0x1cf)]['push'](_0x47b2c9);}[a7_0xd9b09f(0x193)](_0x12a3fe){const _0x14b201=a7_0xd9b09f;this[_0x14b201(0x192)][_0x14b201(0x215)]=Object[_0x14b201(0x1c3)]([],this['report'][_0x14b201(0x215)]||[],[_0x12a3fe]),this['report']['gherkinDocument'][_0x14b201(0x1dc)](_0x12a3fe);}[a7_0xd9b09f(0x268)](_0x5debfb){const _0x26d2e9=a7_0xd9b09f;this['report'][_0x26d2e9(0x1fe)]=_0x5debfb;}[a7_0xd9b09f(0x1b2)](_0x43b0b1){const _0xca0c3f=a7_0xd9b09f;this[_0xca0c3f(0x192)][_0xca0c3f(0x211)]=Object[_0xca0c3f(0x1c3)]([],this['report'][_0xca0c3f(0x211)]||[],[_0x43b0b1]),this[_0xca0c3f(0x192)][_0xca0c3f(0x211)][_0xca0c3f(0x1dc)](_0x43b0b1);}[a7_0xd9b09f(0x239)](_0x3db734){const _0x45e039=a7_0xd9b09f;this[_0x45e039(0x192)][_0x45e039(0x1c1)]=Object[_0x45e039(0x1c3)]([],this[_0x45e039(0x192)][_0x45e039(0x1c1)]||[],[_0x3db734]),this[_0x45e039(0x192)][_0x45e039(0x1c1)]['push'](_0x3db734);}[a7_0xd9b09f(0x236)](_0x256fd0){const _0x4bdb19=a7_0xd9b09f,_0x4a1f86={'IzUrQ':function(_0x4513c5,_0x479677){return _0x4513c5!==_0x479677;},'yyRHu':_0x4bdb19(0x1ba),'kNTCi':function(_0x44bb59,_0x24dbfb){return _0x44bb59+_0x24dbfb;},'nXeZC':function(_0x4e64a4,_0x33629e){return _0x4e64a4+_0x33629e;},'MxOQp':function(_0x52ae81,_0x2f8838){return _0x52ae81+_0x2f8838;},'LanWr':function(_0x48f93a,_0x236b82){return _0x48f93a+_0x236b82;},'oCaAD':function(_0xedc84b,_0x55ce24){return _0xedc84b+_0x55ce24;},'hTvtZ':_0x4bdb19(0x230),'srcJq':_0x4bdb19(0x227),'BIUxP':function(_0x24f47c,_0x2026de){return _0x24f47c===_0x2026de;},'XNcJv':_0x4bdb19(0x252),'Pvpfj':function(_0x259505,_0x527a2e,_0x4f3b31){return _0x259505(_0x527a2e,_0x4f3b31);},'YyPxK':'result','cBKPy':'message','Dmbeu':function(_0x56b413,_0x71d8d){return _0x56b413!==_0x71d8d;},'wIFqS':function(_0x149e55,_0x3b9969){return _0x149e55+_0x3b9969;},'kLFVL':function(_0x333878,_0x21ca69){return _0x333878+_0x21ca69;},'RcBLZ':function(_0x2be27d,_0x37e723){return _0x2be27d+_0x37e723;},'ZfZXj':function(_0x37a7e3,_0xf290c5){return _0x37a7e3+_0xf290c5;}};_0x4a1f86[_0x4bdb19(0x1d7)](global['__platform'],undefined)&&this[_0x4bdb19(0x1ad)](_0x4a1f86[_0x4bdb19(0x1d8)](_0x4a1f86[_0x4bdb19(0x213)]('\x0a',global[_0x4bdb19(0x25d)]),'\x0a'));const _0x3eea91=this[_0x4bdb19(0x19c)]['getTestCaseAttempt'](_0x256fd0[_0x4bdb19(0x1a3)]);this[_0x4bdb19(0x1ad)](_0x4a1f86[_0x4bdb19(0x1a8)](_0x4a1f86[_0x4bdb19(0x1c2)](_0x4a1f86['RcBLZ'](_0x4a1f86[_0x4bdb19(0x1a7)]('\x20\x20',_0x3eea91[_0x4bdb19(0x215)][_0x4bdb19(0x262)][_0x4bdb19(0x1b7)]),_0x4a1f86[_0x4bdb19(0x206)]),_0x3eea91[_0x4bdb19(0x1cf)][_0x4bdb19(0x1b7)]),'\x0a'));const _0x11f39a={};_0x11f39a[_0x4bdb19(0x21c)]=this[_0x4bdb19(0x21c)],_0x11f39a['snippetBuilder']=this[_0x4bdb19(0x1f4)],_0x11f39a[_0x4bdb19(0x1d6)]=this[_0x4bdb19(0x1d6)],_0x11f39a[_0x4bdb19(0x1f0)]=_0x3eea91;const _0x2c3b58=formatterHelpers[_0x4bdb19(0x1f7)](_0x11f39a);let _0x2c464d=![];_0x2c3b58[_0x4bdb19(0x269)][_0x4bdb19(0x1d5)](_0x22661f=>{const _0x64a978=_0x4bdb19;if(_0x4a1f86[_0x64a978(0x1e6)](_0x22661f['name'],_0x4a1f86[_0x64a978(0x256)])&&!this['isBstackHook'](_0x22661f)){totalTests+=0x1,this[_0x64a978(0x1ad)](_0x4a1f86['kNTCi'](_0x4a1f86[_0x64a978(0x213)](_0x4a1f86[_0x64a978(0x21d)](_0x4a1f86[_0x64a978(0x209)](_0x4a1f86[_0x64a978(0x20e)](_0x4a1f86[_0x64a978(0x20b)],_0x22661f[_0x64a978(0x194)]),_0x22661f[_0x64a978(0x1d3)]||''),_0x4a1f86[_0x64a978(0x206)]),Status[_0x22661f[_0x64a978(0x225)][_0x64a978(0x253)]]),'\x0a')),this['incrementCounter'](Status[_0x22661f[_0x64a978(0x225)][_0x64a978(0x253)]]);if(_0x4a1f86[_0x64a978(0x1fb)](Status[_0x22661f['result']['status']],_0x4a1f86['XNcJv'])){_0x2c464d=!![];const _0x44927c=_0x4a1f86[_0x64a978(0x1a0)](nestedKeyValue,_0x22661f,[_0x4a1f86[_0x64a978(0x221)],_0x4a1f86[_0x64a978(0x26b)]]);_0x44927c&&(testsErrorMessage[_0x4a1f86[_0x64a978(0x209)](_0x4a1f86[_0x64a978(0x209)](_0x3eea91[_0x64a978(0x215)]['feature']['name'],_0x4a1f86['srcJq']),_0x3eea91['pickle'][_0x64a978(0x1b7)])]=_0x44927c,this[_0x64a978(0x1ad)](_0x4a1f86[_0x64a978(0x209)](_0x44927c,'\x0a')));}}}),_0x2c464d&&(testSuitesFailed+=0x1),this[_0x4bdb19(0x1ad)]('\x0a');}[a7_0xd9b09f(0x25a)](_0xd3f299){}[a7_0xd9b09f(0x226)](_0xf3c13a){const _0x1b277e=a7_0xd9b09f,_0xf547ed={};_0xf547ed[_0x1b277e(0x1aa)]=function(_0x451116,_0x9f7d98){return _0x451116!==_0x9f7d98;},_0xf547ed['DTPuM']=_0x1b277e(0x219);const _0x4d8aae=_0xf547ed;if(_0x4d8aae[_0x1b277e(0x1aa)](_0xf3c13a['sourceLocation'],undefined))return![];if(_0xf3c13a['actionLocation']&&_0xf3c13a[_0x1b277e(0x22f)][_0x1b277e(0x1fa)]['includes'](_0x4d8aae[_0x1b277e(0x200)]))return!![];return![];}[a7_0xd9b09f(0x1b4)](_0x21ee4e){const _0x29ff1f=a7_0xd9b09f,_0x200554={};_0x200554[_0x29ff1f(0x222)]='FAILED',_0x200554[_0x29ff1f(0x24a)]=_0x29ff1f(0x1f6),_0x200554[_0x29ff1f(0x21b)]=_0x29ff1f(0x228),_0x200554['tnGVt']=_0x29ff1f(0x217),_0x200554['mQfjO']=_0x29ff1f(0x22a),_0x200554[_0x29ff1f(0x233)]=_0x29ff1f(0x1ec),_0x200554[_0x29ff1f(0x242)]=_0x29ff1f(0x23b);const _0x4225bf=_0x200554;switch(_0x21ee4e){case _0x4225bf[_0x29ff1f(0x222)]:testsFailed+=0x1;break;case _0x4225bf[_0x29ff1f(0x24a)]:testsPassed+=0x1;break;case _0x4225bf[_0x29ff1f(0x21b)]:testsSkipped+=0x1;break;case _0x4225bf['tnGVt']:testsPending+=0x1;break;case _0x4225bf['mQfjO']:testsUndefined+=0x1;break;case _0x4225bf['qLPZf']:testsUnknown+=0x1;break;case _0x4225bf['IxFbg']:testsAmbiguous+=0x1;break;default:break;}}async['onTestRunStarted'](_0x1f0db4){const _0x309cf4=a7_0xd9b09f,_0x1fea8a={'tdGdI':function(_0x1f9f26,_0x459006){return _0x1f9f26!==_0x459006;},'wdnPR':function(_0x536a3f,_0x4db2f7){return _0x536a3f!==_0x4db2f7;},'VxFdF':function(_0x4e7f3a){return _0x4e7f3a();},'ErUxv':function(_0x252cbb,_0x271857){return _0x252cbb(_0x271857);},'WQwTl':function(_0x364c54,_0x5ecb63){return _0x364c54+_0x5ecb63;},'bfMiU':function(_0x2b9b01){return _0x2b9b01();},'KxQDL':_0x309cf4(0x255)};let _0xcafaae;if(_0x1fea8a[_0x309cf4(0x23e)](process[_0x309cf4(0x265)][_0x309cf4(0x24f)],undefined)){const _0x53a984=JSON[_0x309cf4(0x25e)](process[_0x309cf4(0x265)][_0x309cf4(0x24f)]);_0xcafaae=_0x53a984[_0x309cf4(0x1c0)];}_0x1fea8a[_0x309cf4(0x1d1)](_0xcafaae,undefined)&&_0x1fea8a[_0x309cf4(0x24c)](isBrowserstackInfra)&&(global[_0x309cf4(0x25d)]=_0x1fea8a[_0x309cf4(0x241)](getPlatformName,_0xcafaae),this[_0x309cf4(0x1ad)](_0x1fea8a[_0x309cf4(0x25b)](_0x309cf4(0x1ef)+global['__platform'],'\x0a'))),_0x1fea8a[_0x309cf4(0x240)](shouldProcessEventForTesthub)&&(TestDetails['setup'](),this[_0x309cf4(0x192)][_0x309cf4(0x1e5)]=_0x1f0db4,BrowserstackCLI[_0x309cf4(0x26c)]()[_0x309cf4(0x248)]()&&await this[_0x309cf4(0x19b)]()&&(TestInfo[_0x309cf4(0x1cc)](_0x1fea8a[_0x309cf4(0x1ed)]),await BrowserstackCLI[_0x309cf4(0x26c)]()[_0x309cf4(0x208)]()[_0x309cf4(0x1c8)](TestFrameworkState[_0x309cf4(0x220)],HookState[_0x309cf4(0x1ab)],{})));}['onTestRunFinished'](_0x1d74ef){const _0x351f34=a7_0xd9b09f;this[_0x351f34(0x192)][_0x351f34(0x26d)]=_0x1d74ef,this['logTestRunFinished'](_0x1d74ef);}async[a7_0xd9b09f(0x1e9)](_0x3ad2e4,_0x59c7d6,_0x561a42){const _0xf0528f=a7_0xd9b09f,_0x4a5a4a={'MqEPQ':function(_0x3bdfa9,_0x13e93d){return _0x3bdfa9(_0x13e93d);},'KPmzO':'TestRunStarted','pBDjb':function(_0x3a5e39,_0x51a2c3){return _0x3a5e39&&_0x51a2c3;}};testSuites+=0x1;if(_0x4a5a4a['MqEPQ'](shouldProcessEventForTesthub,_0x4a5a4a[_0xf0528f(0x1b0)]))try{this[_0xf0528f(0x192)][_0xf0528f(0x1d4)]=this[_0xf0528f(0x192)]['testCaseStarted']||{},this[_0xf0528f(0x192)][_0xf0528f(0x1d4)][_0x3ad2e4['id']]=_0x3ad2e4;let _0x495211=null;BrowserstackCLI['getInstance']()[_0xf0528f(0x248)]()&&await this[_0xf0528f(0x19b)]()?_0x495211=TestInfo[_0xf0528f(0x247)](_0x3ad2e4['id']):_0x495211=TestDetails['getTestUUID'](_0x3ad2e4['id']);_testCasesData[_0x3ad2e4['id']]=Object[_0xf0528f(0x1c3)]({},_0x561a42);const _0x75b7be=this[_0xf0528f(0x192)],_0x4ee797=_0x3ad2e4['testCaseId'],_0x16102d=_0x75b7be[_0xf0528f(0x1c1)][_0xf0528f(0x266)](_0x244164=>_0x244164['id']===_0x4ee797)[_0xf0528f(0x1c6)],_0x297cd2=_0x75b7be['pickle'][_0xf0528f(0x266)](_0x203a2b=>_0x203a2b['id']===_0x16102d),_0xbb7dff=_0x75b7be['gherkinDocument']['find'](_0x2eaf1f=>_0x2eaf1f['uri']===_0x297cd2[_0xf0528f(0x1fa)]),_0x37f275=_0xbb7dff[_0xf0528f(0x262)],_0x137d63={'uuid':_0x495211,'startedAt':new Date()[_0xf0528f(0x1b6)]()};if(_0x297cd2){const _0x297606={};_0x297606[_0xf0528f(0x1b7)]=_0x297cd2[_0xf0528f(0x1b7)],_0x137d63[_0xf0528f(0x22d)]=_0x297606;}if(_0x4a5a4a[_0xf0528f(0x201)](_0xbb7dff,_0x37f275)){const _0xb3afbd={};_0xb3afbd[_0xf0528f(0x261)]=_0xbb7dff[_0xf0528f(0x1fa)],_0xb3afbd[_0xf0528f(0x1b7)]=_0x37f275[_0xf0528f(0x1b7)],_0xb3afbd['description']=_0x37f275['description'],_0x137d63[_0xf0528f(0x262)]=_0xb3afbd;}_tests[_0x4ee797]=_0x137d63;if(BrowserstackCLI[_0xf0528f(0x26c)]()[_0xf0528f(0x248)]()&&await this[_0xf0528f(0x19b)]()){const _0x227ba9=await cucumberUtils[_0xf0528f(0x258)](_0x137d63,_0x297cd2,_0x561a42,_0xbb7dff,_0x3ad2e4['id'],_0x4a5a4a[_0xf0528f(0x1b0)]),_0x237ed3={};_0x237ed3['test']=_0x227ba9,await BrowserstackCLI['getInstance']()[_0xf0528f(0x208)]()[_0xf0528f(0x1c8)](TestFrameworkState[_0xf0528f(0x1c7)],HookState[_0xf0528f(0x1ab)],_0x237ed3);return;}await testObservabilityReporter[_0xf0528f(0x1c9)](_0x561a42,_0xbb7dff,_0x297cd2,_0x4a5a4a[_0xf0528f(0x1b0)],_0x137d63);}catch(_0x25273e){logger[_0xf0528f(0x19e)](_0xf0528f(0x1c5)+util[_0xf0528f(0x202)](_0x25273e)+'\x20');}}async[a7_0xd9b09f(0x223)](_0xbc60e9,_0x448fe2,_0x1de9d1){const _0x253a6b=a7_0xd9b09f,_0x21b592={'JUJwY':function(_0x4d0a24,_0x20a01){return _0x4d0a24(_0x20a01);},'LDNiQ':_0x253a6b(0x1dd),'NBKEK':_0x253a6b(0x26e)};this['logTestCaseFinished'](_0xbc60e9);if(_0x21b592['JUJwY'](shouldProcessEventForTesthub,_0x21b592['LDNiQ']))try{this[_0x253a6b(0x192)][_0x253a6b(0x245)]=this['report'][_0x253a6b(0x245)]||{},this['report'][_0x253a6b(0x245)][_0xbc60e9[_0x253a6b(0x1a3)]]=_0xbc60e9,_testCasesData[_0x1de9d1['id']]=Object[_0x253a6b(0x1c3)]({},_0x1de9d1);const _0x3a6dcb=_0xbc60e9[_0x253a6b(0x1a3)],_0x453361=_0x448fe2[_0x253a6b(0x19c)][_0x253a6b(0x224)][_0x3a6dcb][_0x253a6b(0x1f2)],_0x46fb06=_0x448fe2[_0x253a6b(0x19c)][_0x253a6b(0x251)][_0x453361],_0x4d2bb9=_0x46fb06[_0x253a6b(0x1c6)],_0x1d24fe=_0x448fe2[_0x253a6b(0x19c)]['pickleMap'][_0x4d2bb9],_0x6ebaea=this['getGherkinDocument'](_0x448fe2,_0x1d24fe),_0x539ba7=_0x6ebaea[_0x253a6b(0x262)],_0x405188=_tests[_0x453361];_0x405188&&(delete _tests[_0x453361],_0x405188[_0x253a6b(0x231)]=new Date()['toISOString']());if(BrowserstackCLI[_0x253a6b(0x26c)]()[_0x253a6b(0x248)]()&&await this[_0x253a6b(0x19b)]()){const _0x134037=await cucumberUtils[_0x253a6b(0x258)](_0x405188,_0x1d24fe,_0x1de9d1,_0x6ebaea,_0x3a6dcb,_0x21b592[_0x253a6b(0x1ce)]),_0x4434e1={};_0x4434e1[_0x253a6b(0x26e)]=_0x134037,await BrowserstackCLI[_0x253a6b(0x26c)]()[_0x253a6b(0x208)]()[_0x253a6b(0x1c8)](TestFrameworkState[_0x253a6b(0x1c7)],HookState['POST'],_0x4434e1);const _0x4f7a5f={};_0x4f7a5f['testUUID']=_0xbc60e9[_0x253a6b(0x1a3)],_0x4f7a5f[_0x253a6b(0x257)]=_0x21b592[_0x253a6b(0x260)],await BrowserstackCLI['getInstance']()[_0x253a6b(0x208)]()[_0x253a6b(0x1c8)](TestFrameworkState[_0x253a6b(0x232)],HookState['POST'],_0x4f7a5f);return;}await testObservabilityReporter[_0x253a6b(0x1c9)](_0x1de9d1,_0x6ebaea,_0x1d24fe,_0x21b592[_0x253a6b(0x1ce)],_0x405188);}catch(_0x2cf774){logger[_0x253a6b(0x19e)]('Exception\x20in\x20sending\x20onTestCaseFinished\x20event:\x20\x20'+util[_0x253a6b(0x202)](_0x2cf774));}}async[a7_0xd9b09f(0x197)](_0x5d7951,_0x56969b){const _0x582a47=a7_0xd9b09f,_0x5e4f23={'quFYz':function(_0x50f5e4,_0x46b428){return _0x50f5e4(_0x46b428);},'zuuWO':'HookRunStarted','trBFG':function(_0x250d60,_0xa731e9){return _0x250d60!==_0xa731e9;},'tRpDA':_0x582a47(0x1e2)};if(_0x5e4f23[_0x582a47(0x23d)](shouldProcessEventForTesthub,_0x5e4f23['zuuWO']))try{this[_0x582a47(0x192)][_0x582a47(0x20d)]=this[_0x582a47(0x192)][_0x582a47(0x20d)]||{},this[_0x582a47(0x192)]['testStepStarted'][_0x5d7951[_0x582a47(0x1a3)]]=_0x5d7951;const _0x82cba8=_0x5d7951[_0x582a47(0x1a3)],_0x123169=_0x56969b[_0x582a47(0x19c)][_0x582a47(0x224)][_0x82cba8]['testCaseId'],_0x133536=this[_0x582a47(0x192)][_0x582a47(0x1c1)][_0x582a47(0x266)](_0x4ef255=>_0x4ef255['id']===_0x123169)[_0x582a47(0x1c6)],_0x42bb53=this[_0x582a47(0x192)][_0x582a47(0x1cf)][_0x582a47(0x266)](_0x45744e=>_0x45744e['id']===_0x133536),_0x79007e=this['report'][_0x582a47(0x1c1)][_0x582a47(0x266)](_0x10b74c=>_0x10b74c['id']===_0x123169)[_0x582a47(0x269)],_0x3e36be=this['report']['testStepStarted'][_0x82cba8]['testStepId'],_0x5e3a35=_0x79007e[_0x582a47(0x266)](_0x1193c0=>_0x1193c0['id']===_0x3e36be)['pickleStepId'],_0x8a6cd5=_0x42bb53[_0x582a47(0x22c)]['find'](_0x54b5f7=>_0x54b5f7['id']===_0x5e3a35);if(_0x5e3a35&&_tests[_0x123169]&&_0x5e4f23[_0x582a47(0x238)](_tests[_0x123169][_0x5e4f23['tRpDA']],_0x3e36be)){_tests[_0x123169][_0x5e4f23[_0x582a47(0x19d)]]=_0x3e36be;const _0x5399ca={};_0x5399ca[_0x582a47(0x22c)]=[];const _0x445b03=_tests[_0x123169]||_0x5399ca;_0x445b03&&!_0x445b03[_0x582a47(0x22c)]&&(_0x445b03[_0x582a47(0x22c)]=[]),_0x445b03[_0x582a47(0x22c)][_0x582a47(0x1dc)]({'id':_0x8a6cd5['id'],'text':_0x8a6cd5[_0x582a47(0x1d3)],'started_at':new Date()[_0x582a47(0x1b6)]()}),_tests[_0x123169]=_0x445b03;}if(BrowserstackCLI['getInstance']()[_0x582a47(0x248)]()&&await this[_0x582a47(0x19b)]()){const _0x32c7fc=await cucumberUtils[_0x582a47(0x1bf)](this[_0x582a47(0x192)],_0x82cba8,_0x5e4f23[_0x582a47(0x229)],_0x79007e,_0x3e36be,_tests[_0x123169]);_0x32c7fc&&await BrowserstackCLI[_0x582a47(0x26c)]()[_0x582a47(0x208)]()[_0x582a47(0x1c8)](TestFrameworkState[_0x32c7fc['hook_type']],HookState[_0x582a47(0x1ab)],{'hookData':_0x32c7fc,'testUUID':_0x5d7951[_0x582a47(0x1a3)]});return;}await testObservabilityReporter[_0x582a47(0x1f9)](this[_0x582a47(0x192)],_0x82cba8,_0x5e4f23[_0x582a47(0x229)],_0x79007e,_0x3e36be,_tests[_0x123169]);}catch(_0x2bb4f9){logger[_0x582a47(0x19e)](_0x582a47(0x218)+util[_0x582a47(0x202)](_0x2bb4f9));}}async[a7_0xd9b09f(0x1eb)](_0x4378f3,_0x4d649c){const _0x25ba71=a7_0xd9b09f,_0x42632c={'rYsTP':function(_0x3fa740,_0x37edfa){return _0x3fa740===_0x37edfa;},'YZQdJ':'1|4|3|0|2','umWEZ':function(_0x24f83e,_0x5c5f73){return _0x24f83e(_0x5c5f73);},'rnjvj':_0x25ba71(0x1e4),'RzLjC':_0x25ba71(0x23c),'MmJxi':function(_0x5a17c9,_0x37e645){return _0x5a17c9===_0x37e645;},'vyDXC':_0x25ba71(0x22b),'eZPQK':_0x25ba71(0x1e2),'OMRpE':_0x25ba71(0x1a5),'Rixdb':_0x25ba71(0x250)};this[_0x25ba71(0x192)][_0x25ba71(0x1cd)]=this[_0x25ba71(0x192)][_0x25ba71(0x1cd)]||{},this[_0x25ba71(0x192)]['testStepFinished'][_0x4378f3[_0x25ba71(0x1a3)]]=_0x4378f3;if(_0x42632c['umWEZ'](shouldProcessEventForTesthub,_0x42632c[_0x25ba71(0x212)]))try{const _0x3cda70=_0x4378f3[_0x25ba71(0x1a3)],_0x4b151f=_0x4d649c[_0x25ba71(0x19c)][_0x25ba71(0x224)][_0x3cda70]['testCaseId'],_0x3ed237=_0x4d649c['eventDataCollector'][_0x25ba71(0x251)][_0x4b151f],_0x2a0837=_0x3ed237[_0x25ba71(0x1c6)],_0x51ec49=_0x4d649c['eventDataCollector'][_0x25ba71(0x1cb)][_0x2a0837],_0x1694f3=_0x4378f3[_0x25ba71(0x1e2)],_0x31d4ab=_0x3ed237[_0x25ba71(0x269)],_0x19da2d=this['eventDataCollector'][_0x25ba71(0x196)](_0x3cda70),_0xa2a4bb=_0x31d4ab[_0x25ba71(0x266)](_0x5ba4cf=>_0x5ba4cf['id']===_0x1694f3)[_0x25ba71(0x210)];let _0x47497c,_0x53ac16;_0x4378f3[_0x25ba71(0x244)]&&_0x42632c['rYsTP'](_0x4378f3[_0x25ba71(0x244)][_0x25ba71(0x253)][_0x25ba71(0x1d2)]()[_0x25ba71(0x1b9)](),_0x42632c[_0x25ba71(0x1ee)])&&(_0x47497c=_0x42632c[_0x25ba71(0x214)](_0x4378f3[_0x25ba71(0x244)][_0x25ba71(0x20c)],undefined)?_0x4378f3[_0x25ba71(0x244)][_0x25ba71(0x24b)]:_0x4378f3['testStepResult'][_0x25ba71(0x20c)]['message'],_0x53ac16=_0x42632c[_0x25ba71(0x24e)](_0x4378f3['testStepResult'][_0x25ba71(0x20c)],undefined)?_0x42632c['vyDXC']:_0x4378f3[_0x25ba71(0x244)][_0x25ba71(0x24b)]);if(_0xa2a4bb&&_tests[_0x4b151f][_0x42632c[_0x25ba71(0x1f1)]]){const _0x2d63b2=_0x51ec49['steps'][_0x25ba71(0x266)](_0x7488f3=>_0x7488f3['id']===_0xa2a4bb),_0x3b4c89={};_0x3b4c89['steps']=[];const _0x4ac7fb=_tests[_0x4b151f]||_0x3b4c89;!_0x4ac7fb[_0x25ba71(0x22c)]?_0x4ac7fb[_0x25ba71(0x22c)]=[{'id':_0x2d63b2['id'],'text':_0x2d63b2['text'],'finished_at':new Date()[_0x25ba71(0x1b6)](),'result':_0x4378f3[_0x25ba71(0x244)][_0x25ba71(0x253)],'duration':_0x4378f3[_0x25ba71(0x244)][_0x25ba71(0x207)][_0x25ba71(0x1f3)],'failure':_0x47497c,'failureType':_0x53ac16}]:_0x4ac7fb[_0x25ba71(0x22c)][_0x25ba71(0x1d5)](_0x81168a=>{const _0x38c2d7=_0x25ba71;if(_0x42632c[_0x38c2d7(0x214)](_0x81168a['id'],_0x2d63b2['id'])){const _0x220aef=_0x42632c['YZQdJ'][_0x38c2d7(0x21e)]('|');let _0x5a3165=0x0;while(!![]){switch(_0x220aef[_0x5a3165++]){case'0':_0x81168a[_0x38c2d7(0x1ca)]=_0x47497c;continue;case'1':_0x81168a[_0x38c2d7(0x21f)]=new Date()[_0x38c2d7(0x1b6)]();continue;case'2':_0x81168a[_0x38c2d7(0x19f)]=_0x53ac16;continue;case'3':_0x81168a[_0x38c2d7(0x207)]=_0x4378f3[_0x38c2d7(0x244)][_0x38c2d7(0x207)][_0x38c2d7(0x1f3)];continue;case'4':_0x81168a[_0x38c2d7(0x225)]=_0x4378f3[_0x38c2d7(0x244)][_0x38c2d7(0x253)];continue;}break;}}}),_tests[_0x4b151f]=_0x4ac7fb;}delete _tests[_0x4b151f][_0x42632c[_0x25ba71(0x1f1)]];if(BrowserstackCLI[_0x25ba71(0x26c)]()[_0x25ba71(0x248)]()&&await this[_0x25ba71(0x19b)]()){const _0x496b28=await cucumberUtils[_0x25ba71(0x1bf)](this['report'],_0x3cda70,_0x42632c[_0x25ba71(0x25c)],_0x31d4ab,_0x1694f3,_tests[_0x4b151f]);if(_0x496b28){await BrowserstackCLI[_0x25ba71(0x26c)]()['getTestFramework']()[_0x25ba71(0x1c8)](TestFrameworkState[_0x496b28['hook_type']],HookState[_0x25ba71(0x1bd)],{'hookData':_0x496b28,'testUUID':_0x4378f3[_0x25ba71(0x1a3)]});const _0x322a18={};_0x322a18[_0x25ba71(0x234)]=_0x4378f3[_0x25ba71(0x1a3)],_0x322a18[_0x25ba71(0x257)]=_0x42632c[_0x25ba71(0x1db)],await BrowserstackCLI[_0x25ba71(0x26c)]()[_0x25ba71(0x208)]()[_0x25ba71(0x1c8)](TestFrameworkState[_0x25ba71(0x232)],HookState[_0x25ba71(0x1bd)],_0x322a18);}return;}await testObservabilityReporter[_0x25ba71(0x1f9)](this[_0x25ba71(0x192)],_0x3cda70,_0x42632c['rnjvj'],_0x31d4ab,_0x1694f3,_tests[_0x4b151f]);}catch(_0x1aae90){logger['debug'](_0x25ba71(0x1a6)+util[_0x25ba71(0x202)](_0x1aae90));}}[a7_0xd9b09f(0x1b3)](_0x3a32c4){const _0x45220c=a7_0xd9b09f,_0x4f9636={};return _0x3a32c4[_0x45220c(0x262)]['children'][_0x45220c(0x1bc)](this[_0x45220c(0x216)])['flat']()[_0x45220c(0x1d5)](_0x4278c7=>_0x4278c7['steps'][_0x45220c(0x1d5)](_0x191c78=>_0x4f9636[_0x191c78['id']]=_0x191c78)),_0x4f9636;}['extractStepContainers'](_0x51af32){const _0x22cc25=a7_0xd9b09f,_0x4935b8={'GTVwq':function(_0x2ca0b8,_0xdf4ed5){return _0x2ca0b8(_0xdf4ed5);},'qCNgi':function(_0x12eedb,_0x5e3329){return _0x12eedb(_0x5e3329);}};if(!_0x4935b8[_0x22cc25(0x25f)](isUndefined,_0x51af32[_0x22cc25(0x203)]))return[_0x51af32[_0x22cc25(0x203)]];else{if(!_0x4935b8[_0x22cc25(0x22e)](isUndefined,_0x51af32['rule']))return _0x51af32['rule'][_0x22cc25(0x1e7)][_0x22cc25(0x1bc)](_0x1beb26=>!isUndefined(_0x1beb26['background'])?_0x1beb26[_0x22cc25(0x203)]:_0x1beb26[_0x22cc25(0x22d)]);};return[_0x51af32[_0x22cc25(0x22d)]];}['getGherkinDocument'](_0x59af72,_0x306c4e){const _0x1e471b=a7_0xd9b09f;return Object[_0x1e471b(0x1e8)](_0x59af72[_0x1e471b(0x19c)]['gherkinDocumentMap'])[_0x1e471b(0x266)](_0x359e8f=>_0x359e8f['uri']===_0x306c4e[_0x1e471b(0x1fa)]);}async[a7_0xd9b09f(0x199)](){const _0x2b5145=a7_0xd9b09f;if(this['cliInitPromise'])return this[_0x2b5145(0x1c4)];return this[_0x2b5145(0x1c4)]=this['_performCLIInitialization'](),this[_0x2b5145(0x1c4)];}async['_performCLIInitialization'](){const _0x53c4ee=a7_0xd9b09f,_0x21f684={'SKJRE':_0x53c4ee(0x1ac),'QvJIz':function(_0x2c6561,_0x11549f){return _0x2c6561(_0x11549f);},'AmJJU':'../../v2/cliUtils','CuuPy':function(_0x337758,_0x411703){return _0x337758(_0x411703);},'AldCC':_0x53c4ee(0x1de)};try{const _0x22c4b0=BrowserstackCLI[_0x53c4ee(0x26c)]();if(_0x22c4b0[_0x53c4ee(0x259)]())return logger[_0x53c4ee(0x19e)](_0x53c4ee(0x1a4)+_0x22c4b0[_0x53c4ee(0x1ea)]),!![];const _0x418834=process['env'][_0x53c4ee(0x1f8)];if(!_0x418834)return logger['debug'](_0x21f684[_0x53c4ee(0x1af)]),![];const _0x243527=_0x21f684[_0x53c4ee(0x1e0)](require,_0x21f684[_0x53c4ee(0x1a1)]),{FRAMEWORKS:_0x97428c}=_0x21f684[_0x53c4ee(0x1d9)](require,_0x21f684[_0x53c4ee(0x267)]);return _0x243527[_0x53c4ee(0x195)](_0x97428c[_0x53c4ee(0x23a)],_0x97428c[_0x53c4ee(0x1bb)]),logger[_0x53c4ee(0x19e)](_0x53c4ee(0x1b5)+_0x418834),await _0x22c4b0[_0x53c4ee(0x1ff)](),logger[_0x53c4ee(0x19e)](_0x53c4ee(0x243)+_0x22c4b0[_0x53c4ee(0x259)]()+_0x53c4ee(0x205)+_0x22c4b0['binSessionId']),_0x22c4b0[_0x53c4ee(0x259)]();}catch(_0x122a79){return logger['debug'](_0x53c4ee(0x198)+util[_0x53c4ee(0x202)](_0x122a79)),![];}}async['isCLIReady'](){const _0x1f6e05=a7_0xd9b09f;try{return await this[_0x1f6e05(0x199)](),BrowserstackCLI[_0x1f6e05(0x26c)]()[_0x1f6e05(0x259)]();}catch(_0x7883fb){return logger[_0x1f6e05(0x19e)](_0x1f6e05(0x254)+util[_0x1f6e05(0x202)](_0x7883fb)),![];}}}function a7_0x542d(_0x2883c1,_0x2ce9c1){const _0x43e94d=a7_0x43e9();return a7_0x542d=function(_0x542d2e,_0xf15d31){_0x542d2e=_0x542d2e-0x192;let _0x4b4cf0=_0x43e94d[_0x542d2e];return _0x4b4cf0;},a7_0x542d(_0x2883c1,_0x2ce9c1);}module[a7_0xd9b09f(0x20f)]=o11yClassErrorHandler(BrowserstackFormatter,[a7_0xd9b09f(0x1e9),a7_0xd9b09f(0x223),'onTestStepStarted',a7_0xd9b09f(0x1eb),'onTestRunStarted',a7_0xd9b09f(0x1ae),a7_0xd9b09f(0x216),'getGherkinDocument','getGherkinStepMap']);function a7_0x43e9(){const _0x48acf6=['SKJRE','KPmzO','onPickle','onStepDefinition','getGherkinStepMap','incrementCounter','Bootstrapping\x20CLI\x20in\x20formatter\x20with\x20binSessionId:\x20','toISOString','name','EGeZD','toLowerCase','bstack','PLAYWRIGHT','map','POST','testCase','createHookData','capability','testCases','kNTCi','assign','cliInitPromise','Exception\x20in\x20sending\x20onTestCaseStarted:\x20','pickleId','TEST','trackEvent','sendTestRunEventForCucumber','failure','pickleMap','setup','testStepFinished','LDNiQ','pickle','12528306IeljVX','wdnPR','toString','text','testCaseStarted','forEach','supportCodeLibrary','Dmbeu','wIFqS','CuuPy','1646184kgmkOO','Rixdb','push','TestRunFinished','../../utils/constants','winstonLogger','QvJIz','5233088bgUlMI','testStepId','2njJIra','HookRunFinished','testRunStarted','IzUrQ','children','values','onTestCaseStarted','binSessionId','onTestStepFinished','UNKNOWN','KxQDL','RzLjC','Executing\x20tests\x20for\x20','testCaseAttempt','eZPQK','testCaseId','seconds','snippetBuilder','4388152CPbJtG','PASSED','parseTestCaseAttempt','BROWSERSTACK_CLI_BIN_SESSION_ID','sendHook','uri','BIUxP','hooks','onHook','source','bootstrap','DTPuM','pBDjb','format','background','../../../helpers/testhub/utils.js',',\x20binSessionId:\x20','srcJq','duration','getTestFramework','LanWr','../../../helpers/helper','hTvtZ','exception','testStepStarted','oCaAD','exports','pickleStepId','stepDefinition','rnjvj','nXeZC','rYsTP','gherkinDocument','extractStepContainers','PENDING','Exception\x20in\x20onTestStepStarted\x20event:\x20','cucumber-js/test.setup.js','../../playwright/reporter/test-details.js','XLZmj','cwd','MxOQp','split','finished_at','INIT_TEST','YyPxK','tUbSR','onTestCaseFinished','testCaseAttemptDataMap','result','isBstackHook','\x20-\x20','SKIPPED','zuuWO','UNDEFINED','UnhandledError','steps','scenario','qCNgi','actionLocation','\x20\x20\x20\x20','finishedAt','LOG_REPORT','qLPZf','testUUID','56WPpUrY','logTestCaseFinished','onTestRunStarted','trBFG','onTestCase','CUCUMBER','AMBIGUOUS','failed','quFYz','tdGdI','../../../helpers/test-observability/error-handler','bfMiU','ErUxv','IxFbg','CLI\x20bootstrap\x20completed\x20-\x20isRunning:\x20','testStepResult','testCaseFinished','588486LoSste','getTestUUID','isCliEnabled','../../v2/utils/cucumber-utils.js','YoOOj','message','VxFdF','util','MmJxi','CONFIG','hook','testCaseMap','FAILED','status','isCLIReady:\x20Error\x20checking\x20CLI\x20readiness:\x20','cucumber','yyRHu','type','createTestFrameworkData','isRunning','logTestRunFinished','WQwTl','OMRpE','__platform','parse','GTVwq','NBKEK','path','feature','10PxPLJy','../../v2/state/testFrameworkState.js','env','find','AldCC','onSource','testSteps','../../v2/state/hookState.js','cBKPy','getInstance','testRunFinished','test','report','onGherkinDocument','keyword','setFrameworkDetail','getTestCaseAttempt','onTestStepStarted','Error\x20initializing\x20CLI\x20in\x20formatter:\x20','ensureCLIInitialized','803634BjoRSl','isCLIReady','eventDataCollector','tRpDA','debug','failureType','Pvpfj','AmJJU','1912155LbxedK','testCaseStartedId','CLI\x20already\x20running\x20-\x20binSessionId:\x20','HookRunStarted','Exception\x20in\x20onTestStepFinished\x20event:\x20','ZfZXj','kLFVL','envelope','ONvYp','PRE','No\x20BROWSERSTACK_CLI_BIN_SESSION_ID\x20found,\x20CLI\x20not\x20available','log','onTestRunFinished'];a7_0x43e9=function(){return _0x48acf6;};return a7_0x43e9();}