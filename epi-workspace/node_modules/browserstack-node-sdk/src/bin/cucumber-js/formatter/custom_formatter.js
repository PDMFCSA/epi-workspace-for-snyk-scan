const a7_0x5d79b6=a7_0x4575;(function(_0x518f0b,_0x2f6b69){const _0x1a2ad3=a7_0x4575,_0x533642=_0x518f0b();while(!![]){try{const _0x1a2c32=-parseInt(_0x1a2ad3(0x16f))/0x1*(-parseInt(_0x1a2ad3(0xee))/0x2)+-parseInt(_0x1a2ad3(0x174))/0x3*(parseInt(_0x1a2ad3(0x198))/0x4)+-parseInt(_0x1a2ad3(0x193))/0x5+parseInt(_0x1a2ad3(0x15d))/0x6*(-parseInt(_0x1a2ad3(0x11b))/0x7)+parseInt(_0x1a2ad3(0x116))/0x8*(-parseInt(_0x1a2ad3(0x1b0))/0x9)+-parseInt(_0x1a2ad3(0x141))/0xa*(-parseInt(_0x1a2ad3(0x167))/0xb)+parseInt(_0x1a2ad3(0x156))/0xc;if(_0x1a2c32===_0x2f6b69)break;else _0x533642['push'](_0x533642['shift']());}catch(_0x3854e1){_0x533642['push'](_0x533642['shift']());}}}(a7_0x3c92,0x92e6e));const {requireModule,getPlatformName,nestedKeyValue,isUndefined,isBrowserstackInfra}=require('../../../helpers/helper'),util=require(a7_0x5d79b6(0x194)),{Formatter,formatterHelpers,Status}=requireModule(a7_0x5d79b6(0x10f)),TestDetails=require(a7_0x5d79b6(0x155)),TestObservabilityReporter=require('../test-observability.js'),{o11yClassErrorHandler}=require('../../../helpers/test-observability/error-handler'),{shouldProcessEventForTesthub}=require(a7_0x5d79b6(0xf0)),BrowserstackCLI=require(a7_0x5d79b6(0xe7)),TestFrameworkState=require(a7_0x5d79b6(0x19b)),HookState=require(a7_0x5d79b6(0x1a4)),CucumberUtils=require(a7_0x5d79b6(0x152)),TestInfo=require(a7_0x5d79b6(0x195)),testObservabilityReporter=new TestObservabilityReporter(),cucumberUtils=new CucumberUtils(),logger=require(a7_0x5d79b6(0x15f))[a7_0x5d79b6(0x13b)],_tests={},_testCasesData={};function a7_0x4575(_0x477a7d,_0x5c6fc6){const _0x3c92aa=a7_0x3c92();return a7_0x4575=function(_0x45751e,_0x9fbcf){_0x45751e=_0x45751e-0xe0;let _0x1a043d=_0x3c92aa[_0x45751e];return _0x1a043d;},a7_0x4575(_0x477a7d,_0x5c6fc6);}class BrowserstackFormatter extends Formatter{constructor(_0x41ab8b){const _0x3c1e47=a7_0x5d79b6,_0xd2920b={};_0xd2920b[_0x3c1e47(0x15c)]=_0x3c1e47(0x115);const _0x2c8367=_0xd2920b;super(_0x41ab8b),this[_0x3c1e47(0x1a1)]={},_0x41ab8b[_0x3c1e47(0xe2)]['on'](_0x2c8367[_0x3c1e47(0x15c)],async _0x3751b1=>{const _0x18daa6=_0x3c1e47;switch(!![]){case!!_0x3751b1['testRunStarted']:this[_0x18daa6(0x112)](_0x3751b1[_0x18daa6(0x121)]);break;case!!_0x3751b1[_0x18daa6(0xe6)]:this[_0x18daa6(0x1a3)](_0x3751b1[_0x18daa6(0xe6)]);break;case!!_0x3751b1['testCaseStarted']:this[_0x18daa6(0x117)](_0x3751b1[_0x18daa6(0x190)],_0x41ab8b,_0x3751b1);break;case!!_0x3751b1['testCaseFinished']:this[_0x18daa6(0x19c)](_0x3751b1['testCaseFinished'],_0x41ab8b,_0x3751b1);break;case!!_0x3751b1[_0x18daa6(0x183)]:this[_0x18daa6(0x143)](_0x3751b1[_0x18daa6(0x183)],_0x41ab8b);break;case!!_0x3751b1[_0x18daa6(0x132)]:this[_0x18daa6(0x10d)](_0x3751b1['testStepFinished'],_0x41ab8b);break;case!!_0x3751b1[_0x18daa6(0x14a)]:this[_0x18daa6(0x19f)](_0x3751b1['hook']);break;case!!_0x3751b1[_0x18daa6(0x17a)]:this['onTestCase'](_0x3751b1[_0x18daa6(0x17a)]);break;case!!_0x3751b1[_0x18daa6(0x148)]:this['onPickle'](_0x3751b1[_0x18daa6(0x148)]);break;case!!_0x3751b1[_0x18daa6(0x133)]:this['onGherkinDocument'](_0x3751b1['gherkinDocument']);break;}});}[a7_0x5d79b6(0x19f)](_0x52c4e2){const _0x57a670=a7_0x5d79b6;this[_0x57a670(0x1a1)]['hooks']=Object[_0x57a670(0x10b)]([],this[_0x57a670(0x1a1)][_0x57a670(0x191)]||[]),this[_0x57a670(0x1a1)][_0x57a670(0x191)][_0x57a670(0xff)](_0x52c4e2);}['onPickle'](_0x6a691a){const _0x29deb2=a7_0x5d79b6;this[_0x29deb2(0x1a1)][_0x29deb2(0x148)]=Object[_0x29deb2(0x10b)]([],this[_0x29deb2(0x1a1)][_0x29deb2(0x148)]||[],[_0x6a691a]),this[_0x29deb2(0x1a1)]['pickle']['push'](_0x6a691a);}[a7_0x5d79b6(0xf6)](_0xf15054){const _0x3cbc13=a7_0x5d79b6;this[_0x3cbc13(0x1a1)]['gherkinDocument']=Object[_0x3cbc13(0x10b)]([],this['report'][_0x3cbc13(0x133)]||[],[_0xf15054]),this[_0x3cbc13(0x1a1)][_0x3cbc13(0x133)][_0x3cbc13(0xff)](_0xf15054);}[a7_0x5d79b6(0x100)](_0x322d7d){const _0x462e3b=a7_0x5d79b6;this['report'][_0x462e3b(0x11a)]=_0x322d7d;}[a7_0x5d79b6(0x171)](_0x12d202){const _0x4cb62b=a7_0x5d79b6;this['report'][_0x4cb62b(0x15a)]=Object[_0x4cb62b(0x10b)]([],this[_0x4cb62b(0x1a1)][_0x4cb62b(0x15a)]||[],[_0x12d202]),this[_0x4cb62b(0x1a1)][_0x4cb62b(0x15a)][_0x4cb62b(0xff)](_0x12d202);}['onTestCase'](_0x343444){const _0x5f27f3=a7_0x5d79b6;this[_0x5f27f3(0x1a1)][_0x5f27f3(0x154)]=Object[_0x5f27f3(0x10b)]([],this[_0x5f27f3(0x1a1)][_0x5f27f3(0x154)]||[],[_0x343444]),this[_0x5f27f3(0x1a1)]['testCases']['push'](_0x343444);}[a7_0x5d79b6(0x17d)](_0x2d6f18){const _0x434ab0=a7_0x5d79b6,_0x1a5737={'iztxa':function(_0x5ba19f,_0x2f6e34){return _0x5ba19f!==_0x2f6e34;},'FykFD':'bstack','uscRY':function(_0x2501ee,_0x16c1ca){return _0x2501ee+_0x16c1ca;},'lLCDU':function(_0x5f1a1e,_0x5cbfe3){return _0x5f1a1e+_0x5cbfe3;},'QWcDM':function(_0x5cb28a,_0x2bd1ee){return _0x5cb28a+_0x2bd1ee;},'rNgjN':_0x434ab0(0x185),'otVHN':'\x20-\x20','cZADW':function(_0x58df6a,_0x1d725e){return _0x58df6a===_0x1d725e;},'DOtEb':_0x434ab0(0x13a),'ZazJt':function(_0x35c747,_0x5e278a,_0x202cc4){return _0x35c747(_0x5e278a,_0x202cc4);},'WYycl':_0x434ab0(0x10a),'iizpV':_0x434ab0(0x188),'vjMbc':function(_0x175895,_0x15141c){return _0x175895+_0x15141c;},'vgsLn':function(_0x382ef4,_0x16b5d8){return _0x382ef4+_0x16b5d8;},'SwIQK':function(_0x2cfb24,_0x3c3756){return _0x2cfb24!==_0x3c3756;},'tMEDD':function(_0x39722a,_0x3562c1){return _0x39722a+_0x3562c1;},'ZvMOD':function(_0x123103,_0x32f5e7){return _0x123103+_0x32f5e7;},'cPrfR':function(_0x2972d6,_0x3f1ffd){return _0x2972d6+_0x3f1ffd;}};_0x1a5737['SwIQK'](global[_0x434ab0(0x11e)],undefined)&&this[_0x434ab0(0x14f)](_0x1a5737['vjMbc'](_0x1a5737[_0x434ab0(0x145)]('\x0a',global[_0x434ab0(0x11e)]),'\x0a'));const _0x2df181=this[_0x434ab0(0x128)][_0x434ab0(0x151)](_0x2d6f18[_0x434ab0(0x14d)]);this[_0x434ab0(0x14f)](_0x1a5737[_0x434ab0(0x1a8)](_0x1a5737[_0x434ab0(0x139)](_0x1a5737['ZvMOD'](_0x1a5737[_0x434ab0(0x18c)]('\x20\x20',_0x2df181[_0x434ab0(0x133)][_0x434ab0(0x106)][_0x434ab0(0x19d)]),_0x1a5737[_0x434ab0(0x1af)]),_0x2df181[_0x434ab0(0x148)][_0x434ab0(0x19d)]),'\x0a'));const _0x55d44e={};_0x55d44e[_0x434ab0(0x103)]=this['cwd'],_0x55d44e[_0x434ab0(0x130)]=this[_0x434ab0(0x130)],_0x55d44e[_0x434ab0(0xea)]=this[_0x434ab0(0xea)],_0x55d44e[_0x434ab0(0xec)]=_0x2df181;const _0x37b8c2=formatterHelpers['parseTestCaseAttempt'](_0x55d44e);let _0x53f6fc=![];_0x37b8c2['testSteps'][_0x434ab0(0x164)](_0xd0032f=>{const _0x3486ab=_0x434ab0;if(_0x1a5737[_0x3486ab(0x180)](_0xd0032f[_0x3486ab(0x19d)],_0x1a5737[_0x3486ab(0x1a7)])&&!this['isBstackHook'](_0xd0032f)){totalTests+=0x1,this[_0x3486ab(0x14f)](_0x1a5737['uscRY'](_0x1a5737['uscRY'](_0x1a5737['lLCDU'](_0x1a5737[_0x3486ab(0xef)](_0x1a5737['uscRY'](_0x1a5737[_0x3486ab(0x13e)],_0xd0032f[_0x3486ab(0x14e)]),_0xd0032f[_0x3486ab(0x1a0)]||''),_0x1a5737[_0x3486ab(0x1af)]),Status[_0xd0032f[_0x3486ab(0x10a)]['status']]),'\x0a')),this['incrementCounter'](Status[_0xd0032f[_0x3486ab(0x10a)][_0x3486ab(0x129)]]);if(_0x1a5737[_0x3486ab(0x18b)](Status[_0xd0032f[_0x3486ab(0x10a)][_0x3486ab(0x129)]],_0x1a5737[_0x3486ab(0x137)])){_0x53f6fc=!![];const _0x529266=_0x1a5737['ZazJt'](nestedKeyValue,_0xd0032f,[_0x1a5737['WYycl'],_0x1a5737[_0x3486ab(0x13f)]]);_0x529266&&(testsErrorMessage[_0x1a5737[_0x3486ab(0x1a8)](_0x1a5737[_0x3486ab(0xef)](_0x2df181[_0x3486ab(0x133)]['feature'][_0x3486ab(0x19d)],_0x1a5737[_0x3486ab(0x1af)]),_0x2df181['pickle'][_0x3486ab(0x19d)])]=_0x529266,this[_0x3486ab(0x14f)](_0x1a5737[_0x3486ab(0x139)](_0x529266,'\x0a')));}}}),_0x53f6fc&&(testSuitesFailed+=0x1),this['log']('\x0a');}['logTestRunFinished'](_0x941cc6){}['isBstackHook'](_0x1441cd){const _0x20b5d1=a7_0x5d79b6,_0x72e516={};_0x72e516[_0x20b5d1(0x135)]=function(_0x14f185,_0x9df651){return _0x14f185!==_0x9df651;},_0x72e516[_0x20b5d1(0x18a)]=_0x20b5d1(0x125);const _0x495c51=_0x72e516;if(_0x495c51[_0x20b5d1(0x135)](_0x1441cd[_0x20b5d1(0x1ad)],undefined))return![];if(_0x1441cd[_0x20b5d1(0x16c)]&&_0x1441cd['actionLocation'][_0x20b5d1(0x17c)][_0x20b5d1(0xe0)](_0x495c51['xfOjb']))return!![];return![];}['incrementCounter'](_0x5a8396){const _0x4417e3=a7_0x5d79b6,_0x562501={};_0x562501['IWHSE']=_0x4417e3(0x13a),_0x562501['CFjdG']=_0x4417e3(0xf9),_0x562501[_0x4417e3(0x187)]=_0x4417e3(0x107),_0x562501[_0x4417e3(0x189)]='PENDING',_0x562501['KaROs']=_0x4417e3(0x102),_0x562501['HFPib']=_0x4417e3(0x142),_0x562501[_0x4417e3(0x119)]=_0x4417e3(0xf2);const _0x10f9de=_0x562501;switch(_0x5a8396){case _0x10f9de[_0x4417e3(0x1a9)]:testsFailed+=0x1;break;case _0x10f9de[_0x4417e3(0xfc)]:testsPassed+=0x1;break;case _0x10f9de['yghAP']:testsSkipped+=0x1;break;case _0x10f9de[_0x4417e3(0x189)]:testsPending+=0x1;break;case _0x10f9de[_0x4417e3(0x18e)]:testsUndefined+=0x1;break;case _0x10f9de[_0x4417e3(0x13d)]:testsUnknown+=0x1;break;case _0x10f9de['tknTv']:testsAmbiguous+=0x1;break;default:break;}}async['onTestRunStarted'](_0x534d7b){const _0x185090=a7_0x5d79b6,_0x520381={'WmHtm':function(_0x3bbcd9,_0x1bdbdc){return _0x3bbcd9!==_0x1bdbdc;},'CTmIa':function(_0x1757ad){return _0x1757ad();},'EhQoc':function(_0x26bb9a,_0x4a065e){return _0x26bb9a(_0x4a065e);},'KhAvC':function(_0x42856e,_0x400789){return _0x42856e+_0x400789;},'Wnzbf':_0x185090(0x170)};let _0x130907;if(_0x520381[_0x185090(0x16d)](process[_0x185090(0x104)]['CONFIG'],undefined)){const _0x2cc419=JSON[_0x185090(0x10e)](process[_0x185090(0x104)][_0x185090(0x16a)]);_0x130907=_0x2cc419['capability'];}_0x520381[_0x185090(0x16d)](_0x130907,undefined)&&_0x520381['CTmIa'](isBrowserstackInfra)&&(global[_0x185090(0x11e)]=_0x520381['EhQoc'](getPlatformName,_0x130907),this[_0x185090(0x14f)](_0x520381['KhAvC'](_0x185090(0x165)+global[_0x185090(0x11e)],'\x0a'))),_0x520381[_0x185090(0x126)](shouldProcessEventForTesthub)&&(TestDetails[_0x185090(0x175)](),this[_0x185090(0x1a1)][_0x185090(0x121)]=_0x534d7b,BrowserstackCLI['getInstance']()['isCliEnabled']()&&await this[_0x185090(0xf4)]()&&(TestInfo[_0x185090(0x175)](_0x520381['Wnzbf']),await BrowserstackCLI[_0x185090(0x140)]()[_0x185090(0x122)]()[_0x185090(0x15e)](TestFrameworkState[_0x185090(0xf7)],HookState[_0x185090(0x110)],{})));}[a7_0x5d79b6(0x1a3)](_0x30a137){const _0x4f5278=a7_0x5d79b6;this[_0x4f5278(0x1a1)][_0x4f5278(0xe6)]=_0x30a137,this['logTestRunFinished'](_0x30a137);}async[a7_0x5d79b6(0x117)](_0x1288a7,_0x3bf112,_0x42c805){const _0x2b92eb=a7_0x5d79b6,_0x29d3a5={'xhHms':function(_0x1b604f,_0x303480){return _0x1b604f(_0x303480);},'lrYyP':'TestRunStarted','BSptM':function(_0x29c385,_0x21deee){return _0x29c385&&_0x21deee;}};testSuites+=0x1;if(_0x29d3a5['xhHms'](shouldProcessEventForTesthub,_0x29d3a5['lrYyP']))try{this['report']['testCaseStarted']=this[_0x2b92eb(0x1a1)][_0x2b92eb(0x190)]||{},this[_0x2b92eb(0x1a1)][_0x2b92eb(0x190)][_0x1288a7['id']]=_0x1288a7;let _0x39504c=null;BrowserstackCLI[_0x2b92eb(0x140)]()[_0x2b92eb(0xf5)]()&&await this[_0x2b92eb(0xf4)]()?_0x39504c=TestInfo['getTestUUID'](_0x1288a7['id']):_0x39504c=TestDetails[_0x2b92eb(0x12e)](_0x1288a7['id']);_testCasesData[_0x1288a7['id']]=Object[_0x2b92eb(0x10b)]({},_0x42c805);const _0x11cd49=this[_0x2b92eb(0x1a1)],_0x578c62=_0x1288a7[_0x2b92eb(0x11f)],_0x3a3128=_0x11cd49[_0x2b92eb(0x154)]['find'](_0xe1f5da=>_0xe1f5da['id']===_0x578c62)[_0x2b92eb(0x159)],_0x2b6753=_0x11cd49[_0x2b92eb(0x148)]['find'](_0x5f2865=>_0x5f2865['id']===_0x3a3128),_0x316779=_0x11cd49[_0x2b92eb(0x133)]['find'](_0x305ec7=>_0x305ec7['uri']===_0x2b6753[_0x2b92eb(0x17c)]),_0x5b4014=_0x316779[_0x2b92eb(0x106)],_0x63066e={'uuid':_0x39504c,'startedAt':new Date()[_0x2b92eb(0x19a)]()};if(_0x2b6753){const _0xfa3069={};_0xfa3069[_0x2b92eb(0x19d)]=_0x2b6753[_0x2b92eb(0x19d)],_0x63066e[_0x2b92eb(0xe8)]=_0xfa3069;}if(_0x29d3a5[_0x2b92eb(0x15b)](_0x316779,_0x5b4014)){const _0x5220a2={};_0x5220a2['path']=_0x316779[_0x2b92eb(0x17c)],_0x5220a2[_0x2b92eb(0x19d)]=_0x5b4014[_0x2b92eb(0x19d)],_0x5220a2[_0x2b92eb(0x161)]=_0x5b4014[_0x2b92eb(0x161)],_0x63066e[_0x2b92eb(0x106)]=_0x5220a2;}_tests[_0x578c62]=_0x63066e;if(BrowserstackCLI[_0x2b92eb(0x140)]()[_0x2b92eb(0xf5)]()&&await this[_0x2b92eb(0xf4)]()){const _0x30ffad=await cucumberUtils[_0x2b92eb(0x146)](_0x63066e,_0x2b6753,_0x42c805,_0x316779,_0x1288a7['id'],_0x29d3a5[_0x2b92eb(0x196)]),_0x176024={};_0x176024[_0x2b92eb(0x124)]=_0x30ffad,await BrowserstackCLI['getInstance']()[_0x2b92eb(0x122)]()[_0x2b92eb(0x15e)](TestFrameworkState[_0x2b92eb(0x192)],HookState[_0x2b92eb(0x110)],_0x176024);return;}await testObservabilityReporter['sendTestRunEventForCucumber'](_0x42c805,_0x316779,_0x2b6753,_0x29d3a5['lrYyP'],_0x63066e);}catch(_0x4fa2fb){logger['debug'](_0x2b92eb(0x184)+util[_0x2b92eb(0xe9)](_0x4fa2fb)+'\x20');}}async[a7_0x5d79b6(0x19c)](_0x37082d,_0x409c9a,_0x43f384){const _0x5740a3=a7_0x5d79b6,_0x3b1744={'PxRVO':function(_0x180005,_0x54d895){return _0x180005(_0x54d895);},'TjbKG':_0x5740a3(0xe4),'mEEzX':_0x5740a3(0x124)};this['logTestCaseFinished'](_0x37082d);if(_0x3b1744['PxRVO'](shouldProcessEventForTesthub,_0x3b1744[_0x5740a3(0x178)]))try{this[_0x5740a3(0x1a1)]['testCaseFinished']=this['report']['testCaseFinished']||{},this[_0x5740a3(0x1a1)][_0x5740a3(0x101)][_0x37082d['testCaseStartedId']]=_0x37082d,_testCasesData[_0x43f384['id']]=Object['assign']({},_0x43f384);const _0x48324d=_0x37082d['testCaseStartedId'],_0x5197f4=_0x409c9a['eventDataCollector'][_0x5740a3(0x17e)][_0x48324d][_0x5740a3(0x11f)],_0x3d5d21=_0x409c9a[_0x5740a3(0x128)][_0x5740a3(0x197)][_0x5197f4],_0x4690d4=_0x3d5d21['pickleId'],_0x398b99=_0x409c9a[_0x5740a3(0x128)]['pickleMap'][_0x4690d4],_0x216103=this['getGherkinDocument'](_0x409c9a,_0x398b99),_0x5205a4=_0x216103['feature'],_0x248592=_tests[_0x5197f4];_0x248592&&(delete _tests[_0x5197f4],_0x248592[_0x5740a3(0x168)]=new Date()[_0x5740a3(0x19a)]());if(BrowserstackCLI['getInstance']()[_0x5740a3(0xf5)]()&&await this['isCLIReady']()){const _0x368dff=await cucumberUtils[_0x5740a3(0x146)](_0x248592,_0x398b99,_0x43f384,_0x216103,_0x48324d,_0x3b1744['TjbKG']),_0x4c4909={};_0x4c4909[_0x5740a3(0x124)]=_0x368dff,await BrowserstackCLI['getInstance']()[_0x5740a3(0x122)]()[_0x5740a3(0x15e)](TestFrameworkState['TEST'],HookState[_0x5740a3(0xf3)],_0x4c4909);const _0x263518={};_0x263518[_0x5740a3(0x186)]=_0x37082d[_0x5740a3(0x14d)],_0x263518[_0x5740a3(0x1a5)]=_0x3b1744[_0x5740a3(0x1a2)],await BrowserstackCLI['getInstance']()['getTestFramework']()['trackEvent'](TestFrameworkState[_0x5740a3(0x120)],HookState[_0x5740a3(0xf3)],_0x263518);return;}await testObservabilityReporter[_0x5740a3(0x134)](_0x43f384,_0x216103,_0x398b99,_0x3b1744[_0x5740a3(0x178)],_0x248592);}catch(_0x3913b9){logger['debug'](_0x5740a3(0x131)+util[_0x5740a3(0xe9)](_0x3913b9));}}async[a7_0x5d79b6(0x143)](_0x3bf9fe,_0x2da701){const _0x43e33e=a7_0x5d79b6,_0x1aff78={'fsvkX':function(_0x1b5dca,_0x9d2ade){return _0x1b5dca(_0x9d2ade);},'oRPTG':_0x43e33e(0x13c),'dNnMv':function(_0x1b5b1b,_0x114866){return _0x1b5b1b!==_0x114866;},'ZZjuO':_0x43e33e(0x166)};if(_0x1aff78[_0x43e33e(0x114)](shouldProcessEventForTesthub,_0x1aff78[_0x43e33e(0x12f)]))try{this[_0x43e33e(0x1a1)]['testStepStarted']=this[_0x43e33e(0x1a1)][_0x43e33e(0x183)]||{},this['report'][_0x43e33e(0x183)][_0x3bf9fe['testCaseStartedId']]=_0x3bf9fe;const _0x29480c=_0x3bf9fe[_0x43e33e(0x14d)],_0x14da9f=_0x2da701[_0x43e33e(0x128)][_0x43e33e(0x17e)][_0x29480c][_0x43e33e(0x11f)],_0x4d9a02=this[_0x43e33e(0x1a1)][_0x43e33e(0x154)][_0x43e33e(0x108)](_0x14ac1c=>_0x14ac1c['id']===_0x14da9f)[_0x43e33e(0x159)],_0x57c926=this['report'][_0x43e33e(0x148)][_0x43e33e(0x108)](_0x16dab7=>_0x16dab7['id']===_0x4d9a02),_0x5c99b1=this[_0x43e33e(0x1a1)][_0x43e33e(0x154)][_0x43e33e(0x108)](_0x5af39f=>_0x5af39f['id']===_0x14da9f)[_0x43e33e(0x163)],_0x2726f7=this[_0x43e33e(0x1a1)][_0x43e33e(0x183)][_0x29480c][_0x43e33e(0x166)],_0x38c21c=_0x5c99b1[_0x43e33e(0x108)](_0x2aaa1c=>_0x2aaa1c['id']===_0x2726f7)[_0x43e33e(0x19e)],_0x29010f=_0x57c926[_0x43e33e(0x17b)][_0x43e33e(0x108)](_0x1478e8=>_0x1478e8['id']===_0x38c21c);if(_0x38c21c&&_tests[_0x14da9f]&&_0x1aff78['dNnMv'](_tests[_0x14da9f][_0x1aff78[_0x43e33e(0x16b)]],_0x2726f7)){_tests[_0x14da9f][_0x1aff78[_0x43e33e(0x16b)]]=_0x2726f7;const _0x2f1728={};_0x2f1728[_0x43e33e(0x17b)]=[];const _0x3ec707=_tests[_0x14da9f]||_0x2f1728;_0x3ec707&&!_0x3ec707['steps']&&(_0x3ec707[_0x43e33e(0x17b)]=[]),_0x3ec707[_0x43e33e(0x17b)]['push']({'id':_0x29010f['id'],'text':_0x29010f[_0x43e33e(0x1a0)],'started_at':new Date()[_0x43e33e(0x19a)]()}),_tests[_0x14da9f]=_0x3ec707;}if(BrowserstackCLI['getInstance']()[_0x43e33e(0xf5)]()&&await this[_0x43e33e(0xf4)]()){const _0x578343=await cucumberUtils[_0x43e33e(0x14b)](this['report'],_0x29480c,_0x1aff78['oRPTG'],_0x5c99b1,_0x2726f7,_tests[_0x14da9f]);_0x578343&&await BrowserstackCLI['getInstance']()[_0x43e33e(0x122)]()[_0x43e33e(0x15e)](TestFrameworkState[_0x578343[_0x43e33e(0x12d)]],HookState['PRE'],{'hookData':_0x578343,'testUUID':_0x3bf9fe[_0x43e33e(0x14d)]});return;}await testObservabilityReporter[_0x43e33e(0x12b)](this[_0x43e33e(0x1a1)],_0x29480c,_0x1aff78[_0x43e33e(0x12f)],_0x5c99b1,_0x2726f7,_tests[_0x14da9f]);}catch(_0x2a5f9c){logger[_0x43e33e(0xeb)]('Exception\x20in\x20onTestStepStarted\x20event:\x20'+util['format'](_0x2a5f9c));}}async[a7_0x5d79b6(0x10d)](_0x2465ce,_0xa71128){const _0x1ede32=a7_0x5d79b6,_0x473d90={'lxblH':function(_0x330e4d,_0x56a869){return _0x330e4d===_0x56a869;},'uRPuY':_0x1ede32(0x160),'WxumN':function(_0x555c04,_0x131212){return _0x555c04(_0x131212);},'qGAgc':_0x1ede32(0xe1),'xbFSt':function(_0x276307,_0x1aec3a){return _0x276307===_0x1aec3a;},'ayxmA':_0x1ede32(0xe3),'xzEuL':function(_0x1e9482,_0x3b5f06){return _0x1e9482===_0x3b5f06;},'NlhFN':_0x1ede32(0x177),'BYPfQ':_0x1ede32(0x166),'Jtkxt':'HookRunStarted','ClVhO':_0x1ede32(0x14a)};this[_0x1ede32(0x1a1)][_0x1ede32(0x132)]=this[_0x1ede32(0x1a1)][_0x1ede32(0x132)]||{},this[_0x1ede32(0x1a1)][_0x1ede32(0x132)][_0x2465ce[_0x1ede32(0x14d)]]=_0x2465ce;if(_0x473d90['WxumN'](shouldProcessEventForTesthub,_0x473d90[_0x1ede32(0x162)]))try{const _0x2d243e=_0x2465ce['testCaseStartedId'],_0x11e2a4=_0xa71128[_0x1ede32(0x128)][_0x1ede32(0x17e)][_0x2d243e]['testCaseId'],_0x94865c=_0xa71128[_0x1ede32(0x128)][_0x1ede32(0x197)][_0x11e2a4],_0x5eb1dc=_0x94865c['pickleId'],_0x5e7589=_0xa71128[_0x1ede32(0x128)]['pickleMap'][_0x5eb1dc],_0x5c2fe9=_0x2465ce['testStepId'],_0x4a4030=_0x94865c[_0x1ede32(0x163)],_0x16855f=this['eventDataCollector'][_0x1ede32(0x151)](_0x2d243e),_0x2cbb94=_0x4a4030[_0x1ede32(0x108)](_0x8599a3=>_0x8599a3['id']===_0x5c2fe9)['pickleStepId'];let _0x461126,_0x7743eb;_0x2465ce[_0x1ede32(0x199)]&&_0x473d90['xbFSt'](_0x2465ce[_0x1ede32(0x199)][_0x1ede32(0x129)][_0x1ede32(0x136)]()[_0x1ede32(0x16e)](),_0x473d90[_0x1ede32(0x113)])&&(_0x461126=_0x473d90[_0x1ede32(0x18f)](_0x2465ce[_0x1ede32(0x199)][_0x1ede32(0x12c)],undefined)?_0x2465ce[_0x1ede32(0x199)][_0x1ede32(0x188)]:_0x2465ce['testStepResult'][_0x1ede32(0x12c)][_0x1ede32(0x188)],_0x7743eb=_0x473d90[_0x1ede32(0x18f)](_0x2465ce['testStepResult'][_0x1ede32(0x12c)],undefined)?_0x473d90[_0x1ede32(0x138)]:_0x2465ce[_0x1ede32(0x199)]['message']);if(_0x2cbb94&&_tests[_0x11e2a4][_0x473d90['BYPfQ']]){const _0x4044e5=_0x5e7589['steps'][_0x1ede32(0x108)](_0x297067=>_0x297067['id']===_0x2cbb94),_0x556597={};_0x556597[_0x1ede32(0x17b)]=[];const _0x1df2e0=_tests[_0x11e2a4]||_0x556597;!_0x1df2e0['steps']?_0x1df2e0[_0x1ede32(0x17b)]=[{'id':_0x4044e5['id'],'text':_0x4044e5[_0x1ede32(0x1a0)],'finished_at':new Date()[_0x1ede32(0x19a)](),'result':_0x2465ce[_0x1ede32(0x199)][_0x1ede32(0x129)],'duration':_0x2465ce[_0x1ede32(0x199)][_0x1ede32(0x157)][_0x1ede32(0x17f)],'failure':_0x461126,'failureType':_0x7743eb}]:_0x1df2e0[_0x1ede32(0x17b)]['forEach'](_0x491ae1=>{const _0x1cc74d=_0x1ede32;if(_0x473d90[_0x1cc74d(0x1aa)](_0x491ae1['id'],_0x4044e5['id'])){const _0x36d58b=_0x473d90[_0x1cc74d(0xfb)][_0x1cc74d(0x11d)]('|');let _0xdeb922=0x0;while(!![]){switch(_0x36d58b[_0xdeb922++]){case'0':_0x491ae1[_0x1cc74d(0x181)]=new Date()['toISOString']();continue;case'1':_0x491ae1[_0x1cc74d(0x10a)]=_0x2465ce[_0x1cc74d(0x199)]['status'];continue;case'2':_0x491ae1[_0x1cc74d(0x118)]=_0x7743eb;continue;case'3':_0x491ae1[_0x1cc74d(0x153)]=_0x461126;continue;case'4':_0x491ae1[_0x1cc74d(0x157)]=_0x2465ce['testStepResult'][_0x1cc74d(0x157)][_0x1cc74d(0x17f)];continue;}break;}}}),_tests[_0x11e2a4]=_0x1df2e0;}delete _tests[_0x11e2a4][_0x473d90[_0x1ede32(0x12a)]];if(BrowserstackCLI[_0x1ede32(0x140)]()[_0x1ede32(0xf5)]()&&await this[_0x1ede32(0xf4)]()){const _0x2fccc7=await cucumberUtils[_0x1ede32(0x14b)](this[_0x1ede32(0x1a1)],_0x2d243e,_0x473d90[_0x1ede32(0xf8)],_0x4a4030,_0x5c2fe9,_tests[_0x11e2a4]);if(_0x2fccc7){await BrowserstackCLI['getInstance']()[_0x1ede32(0x122)]()[_0x1ede32(0x15e)](TestFrameworkState[_0x2fccc7['hook_type']],HookState['POST'],{'hookData':_0x2fccc7,'testUUID':_0x2465ce[_0x1ede32(0x14d)]});const _0x2f173a={};_0x2f173a[_0x1ede32(0x186)]=_0x2465ce[_0x1ede32(0x14d)],_0x2f173a[_0x1ede32(0x1a5)]=_0x473d90[_0x1ede32(0x147)],await BrowserstackCLI[_0x1ede32(0x140)]()[_0x1ede32(0x122)]()[_0x1ede32(0x15e)](TestFrameworkState[_0x1ede32(0x120)],HookState[_0x1ede32(0xf3)],_0x2f173a);}return;}await testObservabilityReporter[_0x1ede32(0x12b)](this[_0x1ede32(0x1a1)],_0x2d243e,_0x473d90['qGAgc'],_0x4a4030,_0x5c2fe9,_tests[_0x11e2a4]);}catch(_0x50b7ba){logger['debug'](_0x1ede32(0xfd)+util[_0x1ede32(0xe9)](_0x50b7ba));}}[a7_0x5d79b6(0xed)](_0xc4f185){const _0x36ef50=a7_0x5d79b6,_0x3b0ff8={};return _0xc4f185[_0x36ef50(0x106)]['children']['map'](this['extractStepContainers'])[_0x36ef50(0x158)]()['forEach'](_0x5eb03d=>_0x5eb03d[_0x36ef50(0x17b)][_0x36ef50(0x164)](_0x4bb631=>_0x3b0ff8[_0x4bb631['id']]=_0x4bb631)),_0x3b0ff8;}[a7_0x5d79b6(0x18d)](_0x32ab07){const _0x79155e=a7_0x5d79b6,_0xe48da6={'FyzBy':function(_0x434b28,_0x3cd4c6){return _0x434b28(_0x3cd4c6);},'EqDrU':function(_0x4f63ab,_0x29a0b6){return _0x4f63ab(_0x29a0b6);}};if(!_0xe48da6[_0x79155e(0x149)](isUndefined,_0x32ab07[_0x79155e(0x173)]))return[_0x32ab07['background']];else{if(!_0xe48da6['EqDrU'](isUndefined,_0x32ab07[_0x79155e(0x176)]))return _0x32ab07[_0x79155e(0x176)][_0x79155e(0xe5)][_0x79155e(0x123)](_0x12225e=>!isUndefined(_0x12225e['background'])?_0x12225e[_0x79155e(0x173)]:_0x12225e['scenario']);};return[_0x32ab07[_0x79155e(0xe8)]];}[a7_0x5d79b6(0xf1)](_0x3d1445,_0x2a94dd){const _0x5a2225=a7_0x5d79b6;return Object['values'](_0x3d1445[_0x5a2225(0x128)][_0x5a2225(0x182)])[_0x5a2225(0x108)](_0x142851=>_0x142851[_0x5a2225(0x17c)]===_0x2a94dd[_0x5a2225(0x17c)]);}async[a7_0x5d79b6(0x1ae)](){const _0x59a3b6=a7_0x5d79b6;if(this[_0x59a3b6(0x127)])return this[_0x59a3b6(0x127)];return this[_0x59a3b6(0x127)]=this[_0x59a3b6(0x169)](),this[_0x59a3b6(0x127)];}async[a7_0x5d79b6(0x169)](){const _0x55e77a=a7_0x5d79b6,_0xd35390={'tvaHZ':_0x55e77a(0x14c),'jPDGW':function(_0x2e4caa,_0x26ede5){return _0x2e4caa(_0x26ede5);},'tIvcd':_0x55e77a(0xfa),'HRRnF':'../../utils/constants'};try{const _0x691299=BrowserstackCLI['getInstance']();if(_0x691299[_0x55e77a(0x172)]())return logger[_0x55e77a(0xeb)](_0x55e77a(0x105)+_0x691299[_0x55e77a(0x144)]),!![];const _0x32d229=process[_0x55e77a(0x104)][_0x55e77a(0x11c)];if(!_0x32d229)return logger[_0x55e77a(0xeb)](_0xd35390['tvaHZ']),![];const _0x492fc1=_0xd35390[_0x55e77a(0x1ab)](require,_0xd35390['tIvcd']),{FRAMEWORKS:_0x521637}=_0xd35390[_0x55e77a(0x1ab)](require,_0xd35390[_0x55e77a(0x1ac)]);return _0x492fc1[_0x55e77a(0x111)](_0x521637[_0x55e77a(0x1a6)],_0x521637[_0x55e77a(0xfe)]),logger[_0x55e77a(0xeb)]('Bootstrapping\x20CLI\x20in\x20formatter\x20with\x20binSessionId:\x20'+_0x32d229),await _0x691299[_0x55e77a(0x10c)](),logger[_0x55e77a(0xeb)]('CLI\x20bootstrap\x20completed\x20-\x20isRunning:\x20'+_0x691299[_0x55e77a(0x172)]()+_0x55e77a(0x179)+_0x691299['binSessionId']),_0x691299[_0x55e77a(0x172)]();}catch(_0x24c028){return logger['debug']('Error\x20initializing\x20CLI\x20in\x20formatter:\x20'+util[_0x55e77a(0xe9)](_0x24c028)),![];}}async[a7_0x5d79b6(0xf4)](){const _0x5240ff=a7_0x5d79b6;try{return await this['ensureCLIInitialized'](),BrowserstackCLI['getInstance']()[_0x5240ff(0x172)]();}catch(_0x40f7ef){return logger[_0x5240ff(0xeb)](_0x5240ff(0x109)+util[_0x5240ff(0xe9)](_0x40f7ef)),![];}}}module[a7_0x5d79b6(0x150)]=o11yClassErrorHandler(BrowserstackFormatter,[a7_0x5d79b6(0x117),a7_0x5d79b6(0x19c),a7_0x5d79b6(0x143),'onTestStepFinished',a7_0x5d79b6(0x112),'onTestRunFinished',a7_0x5d79b6(0x18d),a7_0x5d79b6(0xf1),a7_0x5d79b6(0xed)]);function a7_0x3c92(){const _0x10d5d9=['children','testRunFinished','../../v2/browserstackCLI.js','scenario','format','supportCodeLibrary','debug','testCaseAttempt','getGherkinStepMap','2HWGshF','QWcDM','../../../helpers/testhub/utils.js','getGherkinDocument','AMBIGUOUS','POST','isCLIReady','isCliEnabled','onGherkinDocument','INIT_TEST','Jtkxt','PASSED','../../v2/cliUtils','uRPuY','CFjdG','Exception\x20in\x20onTestStepFinished\x20event:\x20','PLAYWRIGHT','push','onSource','testCaseFinished','UNDEFINED','cwd','env','CLI\x20already\x20running\x20-\x20binSessionId:\x20','feature','SKIPPED','find','isCLIReady:\x20Error\x20checking\x20CLI\x20readiness:\x20','result','assign','bootstrap','onTestStepFinished','parse','@cucumber/cucumber','PRE','setFrameworkDetail','onTestRunStarted','ayxmA','fsvkX','envelope','4072YUvczj','onTestCaseStarted','failureType','tknTv','source','238371NhiQcE','BROWSERSTACK_CLI_BIN_SESSION_ID','split','__platform','testCaseId','LOG_REPORT','testRunStarted','getTestFramework','map','test','cucumber-js/test.setup.js','CTmIa','cliInitPromise','eventDataCollector','status','BYPfQ','sendHook','exception','hook_type','getTestUUID','oRPTG','snippetBuilder','Exception\x20in\x20sending\x20onTestCaseFinished\x20event:\x20\x20','testStepFinished','gherkinDocument','sendTestRunEventForCucumber','BWdzq','toString','DOtEb','NlhFN','vgsLn','FAILED','winstonLogger','HookRunStarted','HFPib','rNgjN','iizpV','getInstance','40ijoMAY','UNKNOWN','onTestStepStarted','binSessionId','tMEDD','createTestFrameworkData','ClVhO','pickle','FyzBy','hook','createHookData','No\x20BROWSERSTACK_CLI_BIN_SESSION_ID\x20found,\x20CLI\x20not\x20available','testCaseStartedId','keyword','log','exports','getTestCaseAttempt','../../v2/utils/cucumber-utils.js','failure','testCases','../../playwright/reporter/test-details.js','34486524QrUpQf','duration','flat','pickleId','stepDefinition','BSptM','RLTFp','204lamaeb','trackEvent','../../../helpers/logger','0|1|4|3|2','description','qGAgc','testSteps','forEach','Executing\x20tests\x20for\x20','testStepId','171116qfUfvA','finishedAt','_performCLIInitialization','CONFIG','ZZjuO','actionLocation','WmHtm','toLowerCase','635167dLeqEo','cucumber','onStepDefinition','isRunning','background','749397NCCVjW','setup','rule','UnhandledError','TjbKG',',\x20binSessionId:\x20','testCase','steps','uri','logTestCaseFinished','testCaseAttemptDataMap','seconds','iztxa','finished_at','gherkinDocumentMap','testStepStarted','Exception\x20in\x20sending\x20onTestCaseStarted:\x20','\x20\x20\x20\x20','testUUID','yghAP','message','kjzBl','xfOjb','cZADW','cPrfR','extractStepContainers','KaROs','xzEuL','testCaseStarted','hooks','TEST','4021480gkHMDG','util','../../../bin/v2/TestInfo.js','lrYyP','testCaseMap','12PUiTfk','testStepResult','toISOString','../../v2/state/testFrameworkState.js','onTestCaseFinished','name','pickleStepId','onHook','text','report','mEEzX','onTestRunFinished','../../v2/state/hookState.js','type','CUCUMBER','FykFD','vjMbc','IWHSE','lxblH','jPDGW','HRRnF','sourceLocation','ensureCLIInitialized','otVHN','4563yDwEvk','includes','HookRunFinished','eventBroadcaster','failed','TestRunFinished'];a7_0x3c92=function(){return _0x10d5d9;};return a7_0x3c92();}