const a6_0xe8e942=a6_0xfa5f;(function(_0x2455f4,_0x2c0895){const _0x3e7684=a6_0xfa5f,_0x4b6be5=_0x2455f4();while(!![]){try{const _0x45e116=-parseInt(_0x3e7684(0xdd))/0x1+parseInt(_0x3e7684(0xd9))/0x2+-parseInt(_0x3e7684(0x64))/0x3*(parseInt(_0x3e7684(0x128))/0x4)+-parseInt(_0x3e7684(0x119))/0x5*(-parseInt(_0x3e7684(0x104))/0x6)+-parseInt(_0x3e7684(0xad))/0x7+-parseInt(_0x3e7684(0x12e))/0x8+parseInt(_0x3e7684(0xdc))/0x9;if(_0x45e116===_0x2c0895)break;else _0x4b6be5['push'](_0x4b6be5['shift']());}catch(_0x1656b6){_0x4b6be5['push'](_0x4b6be5['shift']());}}}(a6_0x1618,0x77a07));const {requireModule,getPlatformName,nestedKeyValue,isUndefined,isBrowserstackInfra}=require('../../../helpers/helper'),util=require('util'),{Formatter,formatterHelpers,Status}=requireModule(a6_0xe8e942(0x11e)),TestDetails=require(a6_0xe8e942(0x67)),TestObservabilityReporter=require(a6_0xe8e942(0x6c)),{o11yClassErrorHandler}=require(a6_0xe8e942(0xce)),{shouldProcessEventForTesthub}=require(a6_0xe8e942(0xf2)),BrowserstackCLI=require(a6_0xe8e942(0xb7)),TestFrameworkState=require(a6_0xe8e942(0xc4)),HookState=require(a6_0xe8e942(0x9d)),CucumberUtils=require(a6_0xe8e942(0x7d)),TestInfo=require(a6_0xe8e942(0x76)),testObservabilityReporter=new TestObservabilityReporter(),cucumberUtils=new CucumberUtils(),logger=require('../../../helpers/logger')[a6_0xe8e942(0xe8)],_tests={},_testCasesData={};class BrowserstackFormatter extends Formatter{constructor(_0x4e6628){const _0x121495=a6_0xe8e942,_0x39342c={};_0x39342c[_0x121495(0xe3)]=_0x121495(0xa2);const _0x1f61dc=_0x39342c;super(_0x4e6628),this[_0x121495(0x9b)]={},_0x4e6628[_0x121495(0x129)]['on'](_0x1f61dc[_0x121495(0xe3)],async _0xe0490c=>{const _0x3f4b57=_0x121495;switch(!![]){case!!_0xe0490c[_0x3f4b57(0xc1)]:this[_0x3f4b57(0x6a)](_0xe0490c[_0x3f4b57(0xc1)]);break;case!!_0xe0490c[_0x3f4b57(0xc3)]:this[_0x3f4b57(0x124)](_0xe0490c[_0x3f4b57(0xc3)]);break;case!!_0xe0490c[_0x3f4b57(0x92)]:this['onTestCaseStarted'](_0xe0490c[_0x3f4b57(0x92)],_0x4e6628,_0xe0490c);break;case!!_0xe0490c['testCaseFinished']:this[_0x3f4b57(0x107)](_0xe0490c[_0x3f4b57(0xd6)],_0x4e6628,_0xe0490c);break;case!!_0xe0490c[_0x3f4b57(0xe5)]:this[_0x3f4b57(0xd5)](_0xe0490c[_0x3f4b57(0xe5)],_0x4e6628);break;case!!_0xe0490c['testStepFinished']:this[_0x3f4b57(0xef)](_0xe0490c[_0x3f4b57(0xfd)],_0x4e6628);break;case!!_0xe0490c[_0x3f4b57(0x117)]:this[_0x3f4b57(0x135)](_0xe0490c['hook']);break;case!!_0xe0490c[_0x3f4b57(0x120)]:this[_0x3f4b57(0x65)](_0xe0490c[_0x3f4b57(0x120)]);break;case!!_0xe0490c[_0x3f4b57(0x72)]:this[_0x3f4b57(0x98)](_0xe0490c[_0x3f4b57(0x72)]);break;case!!_0xe0490c[_0x3f4b57(0x79)]:this[_0x3f4b57(0x71)](_0xe0490c[_0x3f4b57(0x79)]);break;}});}[a6_0xe8e942(0x135)](_0x1b9a73){const _0x5f544a=a6_0xe8e942;this['report']['hooks']=Object[_0x5f544a(0x89)]([],this['report']['hooks']||[]),this[_0x5f544a(0x9b)][_0x5f544a(0xf4)][_0x5f544a(0xf8)](_0x1b9a73);}[a6_0xe8e942(0x98)](_0x5bd7ec){const _0x5a8cb4=a6_0xe8e942;this[_0x5a8cb4(0x9b)][_0x5a8cb4(0x72)]=Object['assign']([],this[_0x5a8cb4(0x9b)]['pickle']||[],[_0x5bd7ec]),this['report']['pickle']['push'](_0x5bd7ec);}[a6_0xe8e942(0x71)](_0x27c03f){const _0x4e67c=a6_0xe8e942;this[_0x4e67c(0x9b)]['gherkinDocument']=Object[_0x4e67c(0x89)]([],this[_0x4e67c(0x9b)][_0x4e67c(0x79)]||[],[_0x27c03f]),this[_0x4e67c(0x9b)][_0x4e67c(0x79)][_0x4e67c(0xf8)](_0x27c03f);}['onSource'](_0x385721){this['report']['source']=_0x385721;}[a6_0xe8e942(0xb0)](_0x413aca){const _0x4730c8=a6_0xe8e942;this['report']['stepDefinition']=Object[_0x4730c8(0x89)]([],this['report'][_0x4730c8(0x6e)]||[],[_0x413aca]),this[_0x4730c8(0x9b)]['stepDefinition'][_0x4730c8(0xf8)](_0x413aca);}[a6_0xe8e942(0x65)](_0x37be21){const _0x5a8c1d=a6_0xe8e942;this[_0x5a8c1d(0x9b)][_0x5a8c1d(0x84)]=Object[_0x5a8c1d(0x89)]([],this[_0x5a8c1d(0x9b)][_0x5a8c1d(0x84)]||[],[_0x37be21]),this[_0x5a8c1d(0x9b)][_0x5a8c1d(0x84)]['push'](_0x37be21);}[a6_0xe8e942(0x8e)](_0x1263c1){const _0x401384=a6_0xe8e942,_0x58d29e={'NRDJS':function(_0x165637,_0x2c56a2){return _0x165637!==_0x2c56a2;},'HZwdb':_0x401384(0x102),'cDGBW':function(_0x5829c7,_0x2493b7){return _0x5829c7+_0x2493b7;},'tqKim':function(_0x5d3702,_0x590763){return _0x5d3702+_0x590763;},'RFnDp':function(_0x51d038,_0x54c37c){return _0x51d038+_0x54c37c;},'CgrvI':function(_0x25908a,_0x3ec616){return _0x25908a+_0x3ec616;},'hjfFB':_0x401384(0xbf),'GEXSC':_0x401384(0xaf),'LKVPP':function(_0x255507,_0x41613c){return _0x255507===_0x41613c;},'TFEZr':_0x401384(0xe4),'GNfmE':function(_0xb5ec65,_0x2e2a00,_0x52b94b){return _0xb5ec65(_0x2e2a00,_0x52b94b);},'USBKn':'result','vzuVA':_0x401384(0xb4),'kyeoG':function(_0x5338c2,_0x2db458){return _0x5338c2+_0x2db458;},'dSOph':function(_0x232123,_0x2baaec){return _0x232123+_0x2baaec;},'BWLwK':function(_0x390d44,_0x461c5c){return _0x390d44+_0x461c5c;},'RTAxR':function(_0x5c73c9,_0x11818b){return _0x5c73c9+_0x11818b;},'ejXuE':function(_0x5bd831,_0x1f9c9d){return _0x5bd831+_0x1f9c9d;},'wbSVC':function(_0x374a80,_0x4c3981){return _0x374a80+_0x4c3981;},'QPnwW':function(_0x4024f8,_0x1ead55){return _0x4024f8+_0x1ead55;}};_0x58d29e[_0x401384(0x12b)](global['__platform'],undefined)&&this[_0x401384(0xae)](_0x58d29e[_0x401384(0xd8)](_0x58d29e[_0x401384(0x116)]('\x0a',global[_0x401384(0xc0)]),'\x0a'));const _0x2c5958=this[_0x401384(0xa9)]['getTestCaseAttempt'](_0x1263c1[_0x401384(0xf1)]);this['log'](_0x58d29e[_0x401384(0xeb)](_0x58d29e[_0x401384(0xb1)](_0x58d29e[_0x401384(0xd3)](_0x58d29e[_0x401384(0xdf)]('\x20\x20',_0x2c5958['gherkinDocument'][_0x401384(0x90)]['name']),_0x58d29e['GEXSC']),_0x2c5958[_0x401384(0x72)][_0x401384(0x75)]),'\x0a'));const _0x1c8399={};_0x1c8399[_0x401384(0xed)]=this[_0x401384(0xed)],_0x1c8399['snippetBuilder']=this[_0x401384(0x7a)],_0x1c8399[_0x401384(0x82)]=this[_0x401384(0x82)],_0x1c8399[_0x401384(0x11b)]=_0x2c5958;const _0x3bcf7f=formatterHelpers[_0x401384(0xa5)](_0x1c8399);let _0x3d2b89=![];_0x3bcf7f['testSteps']['forEach'](_0x20bba4=>{const _0x2abf0f=_0x401384;if(_0x58d29e[_0x2abf0f(0x12b)](_0x20bba4[_0x2abf0f(0x75)],_0x58d29e[_0x2abf0f(0x74)])&&!this[_0x2abf0f(0xc9)](_0x20bba4)){totalTests+=0x1,this[_0x2abf0f(0xae)](_0x58d29e['cDGBW'](_0x58d29e[_0x2abf0f(0x138)](_0x58d29e[_0x2abf0f(0xd3)](_0x58d29e[_0x2abf0f(0x115)](_0x58d29e[_0x2abf0f(0x7c)](_0x58d29e[_0x2abf0f(0x77)],_0x20bba4[_0x2abf0f(0xea)]),_0x20bba4['text']||''),_0x58d29e[_0x2abf0f(0xf5)]),Status[_0x20bba4[_0x2abf0f(0xfe)][_0x2abf0f(0xc8)]]),'\x0a')),this[_0x2abf0f(0x6b)](Status[_0x20bba4[_0x2abf0f(0xfe)][_0x2abf0f(0xc8)]]);if(_0x58d29e['LKVPP'](Status[_0x20bba4[_0x2abf0f(0xfe)][_0x2abf0f(0xc8)]],_0x58d29e[_0x2abf0f(0x12c)])){_0x3d2b89=!![];const _0x2c3ef1=_0x58d29e[_0x2abf0f(0xf7)](nestedKeyValue,_0x20bba4,[_0x58d29e[_0x2abf0f(0x9c)],_0x58d29e[_0x2abf0f(0x66)]]);_0x2c3ef1&&(testsErrorMessage[_0x58d29e[_0x2abf0f(0xb1)](_0x58d29e['dSOph'](_0x2c5958['gherkinDocument'][_0x2abf0f(0x90)]['name'],_0x58d29e[_0x2abf0f(0xf5)]),_0x2c5958[_0x2abf0f(0x72)][_0x2abf0f(0x75)])]=_0x2c3ef1,this[_0x2abf0f(0xae)](_0x58d29e[_0x2abf0f(0xb2)](_0x2c3ef1,'\x0a')));}}}),_0x3d2b89&&(testSuitesFailed+=0x1),this['log']('\x0a');}[a6_0xe8e942(0x70)](_0x5031b4){}[a6_0xe8e942(0xc9)](_0x3e1497){const _0x5196d4=a6_0xe8e942,_0x4a9330={};_0x4a9330[_0x5196d4(0xbe)]=function(_0x529efd,_0x5585a7){return _0x529efd!==_0x5585a7;},_0x4a9330[_0x5196d4(0xda)]=_0x5196d4(0xee);const _0x428685=_0x4a9330;if(_0x428685[_0x5196d4(0xbe)](_0x3e1497['sourceLocation'],undefined))return![];if(_0x3e1497[_0x5196d4(0xf6)]&&_0x3e1497[_0x5196d4(0xf6)][_0x5196d4(0xca)][_0x5196d4(0x78)](_0x428685[_0x5196d4(0xda)]))return!![];return![];}['incrementCounter'](_0x5d2060){const _0x5c0332=a6_0xe8e942,_0x4a74ad={};_0x4a74ad[_0x5c0332(0xc5)]=_0x5c0332(0xe4),_0x4a74ad['htYmd']=_0x5c0332(0x9a),_0x4a74ad[_0x5c0332(0x134)]=_0x5c0332(0x68),_0x4a74ad[_0x5c0332(0x11d)]=_0x5c0332(0x12d),_0x4a74ad[_0x5c0332(0xa4)]='UNDEFINED',_0x4a74ad['hKmsE']=_0x5c0332(0xbd),_0x4a74ad[_0x5c0332(0x86)]=_0x5c0332(0xd2);const _0x1367d4=_0x4a74ad;switch(_0x5d2060){case _0x1367d4[_0x5c0332(0xc5)]:testsFailed+=0x1;break;case _0x1367d4[_0x5c0332(0xd0)]:testsPassed+=0x1;break;case _0x1367d4[_0x5c0332(0x134)]:testsSkipped+=0x1;break;case _0x1367d4[_0x5c0332(0x11d)]:testsPending+=0x1;break;case _0x1367d4[_0x5c0332(0xa4)]:testsUndefined+=0x1;break;case _0x1367d4[_0x5c0332(0x7b)]:testsUnknown+=0x1;break;case _0x1367d4[_0x5c0332(0x86)]:testsAmbiguous+=0x1;break;default:break;}}async[a6_0xe8e942(0x6a)](_0x53d9ae){const _0x56eb93=a6_0xe8e942,_0xa83da9={'PZGLE':function(_0x15eb74,_0x2afa7b){return _0x15eb74!==_0x2afa7b;},'QluDu':function(_0x5d9ecb){return _0x5d9ecb();},'KwpOD':function(_0x1617e4,_0x2d218d){return _0x1617e4(_0x2d218d);},'OoJme':function(_0x12fdda,_0x33101e){return _0x12fdda+_0x33101e;},'mwsad':'cucumber'};let _0x1920a7;if(_0xa83da9['PZGLE'](process[_0x56eb93(0x127)][_0x56eb93(0xe0)],undefined)){const _0x3b14d2=JSON['parse'](process[_0x56eb93(0x127)][_0x56eb93(0xe0)]);_0x1920a7=_0x3b14d2[_0x56eb93(0x10d)];}_0xa83da9[_0x56eb93(0xcb)](_0x1920a7,undefined)&&_0xa83da9[_0x56eb93(0x106)](isBrowserstackInfra)&&(global[_0x56eb93(0xc0)]=_0xa83da9[_0x56eb93(0x12a)](getPlatformName,_0x1920a7),this[_0x56eb93(0xae)](_0xa83da9['OoJme']('Executing\x20tests\x20for\x20'+global[_0x56eb93(0xc0)],'\x0a'))),_0xa83da9['QluDu'](shouldProcessEventForTesthub)&&(TestDetails['setup'](),this[_0x56eb93(0x9b)][_0x56eb93(0xc1)]=_0x53d9ae,BrowserstackCLI['getInstance']()[_0x56eb93(0x87)]()&&await this[_0x56eb93(0x96)]()&&(TestInfo[_0x56eb93(0xec)](_0xa83da9['mwsad']),await BrowserstackCLI[_0x56eb93(0x88)]()[_0x56eb93(0xa7)]()[_0x56eb93(0x69)](TestFrameworkState[_0x56eb93(0x136)],HookState[_0x56eb93(0xe7)],{})));}[a6_0xe8e942(0x124)](_0x4de604){const _0x2b1922=a6_0xe8e942;this[_0x2b1922(0x9b)][_0x2b1922(0xc3)]=_0x4de604,this['logTestRunFinished'](_0x4de604);}async[a6_0xe8e942(0x7e)](_0x1d9586,_0x4afbd7,_0x3fe585){const _0xd46efb=a6_0xe8e942,_0x16e491={'iFeiD':function(_0x59f008,_0x521a44){return _0x59f008(_0x521a44);},'SqDDa':'TestRunStarted','qEzOU':function(_0x3c6c8b,_0x5818cf){return _0x3c6c8b&&_0x5818cf;}};testSuites+=0x1;if(_0x16e491[_0xd46efb(0x6d)](shouldProcessEventForTesthub,_0x16e491[_0xd46efb(0x8f)]))try{this[_0xd46efb(0x9b)][_0xd46efb(0x92)]=this['report']['testCaseStarted']||{},this[_0xd46efb(0x9b)][_0xd46efb(0x92)][_0x1d9586['id']]=_0x1d9586;let _0x552a0e=null;BrowserstackCLI[_0xd46efb(0x88)]()[_0xd46efb(0x87)]()&&await this[_0xd46efb(0x96)]()?_0x552a0e=TestInfo[_0xd46efb(0x7f)](_0x1d9586['id']):_0x552a0e=TestDetails['getTestUUID'](_0x1d9586['id']);_testCasesData[_0x1d9586['id']]=Object[_0xd46efb(0x89)]({},_0x3fe585);const _0xe1455b=this[_0xd46efb(0x9b)],_0x2cad32=_0x1d9586[_0xd46efb(0xe9)],_0x552148=_0xe1455b[_0xd46efb(0x84)]['find'](_0x38b957=>_0x38b957['id']===_0x2cad32)['pickleId'],_0x450243=_0xe1455b[_0xd46efb(0x72)][_0xd46efb(0xf0)](_0x3cb2c9=>_0x3cb2c9['id']===_0x552148),_0x130872=_0xe1455b[_0xd46efb(0x79)][_0xd46efb(0xf0)](_0x338948=>_0x338948[_0xd46efb(0xca)]===_0x450243['uri']),_0xbac78d=_0x130872[_0xd46efb(0x90)],_0xcbaa94={'uuid':_0x552a0e,'startedAt':new Date()[_0xd46efb(0x11f)]()};if(_0x450243){const _0x260713={};_0x260713[_0xd46efb(0x75)]=_0x450243['name'],_0xcbaa94[_0xd46efb(0xa0)]=_0x260713;}if(_0x16e491[_0xd46efb(0x101)](_0x130872,_0xbac78d)){const _0x34c1ef={};_0x34c1ef['path']=_0x130872[_0xd46efb(0xca)],_0x34c1ef[_0xd46efb(0x75)]=_0xbac78d[_0xd46efb(0x75)],_0x34c1ef[_0xd46efb(0xc2)]=_0xbac78d[_0xd46efb(0xc2)],_0xcbaa94[_0xd46efb(0x90)]=_0x34c1ef;}_tests[_0x2cad32]=_0xcbaa94;if(BrowserstackCLI[_0xd46efb(0x88)]()[_0xd46efb(0x87)]()&&await this[_0xd46efb(0x96)]()){const _0xcb455c=await cucumberUtils[_0xd46efb(0x10b)](_0xcbaa94,_0x450243,_0x3fe585,_0x130872,_0x1d9586['id'],_0x16e491[_0xd46efb(0x8f)]),_0x1eee08={};_0x1eee08[_0xd46efb(0x111)]=_0xcb455c,await BrowserstackCLI[_0xd46efb(0x88)]()[_0xd46efb(0xa7)]()[_0xd46efb(0x69)](TestFrameworkState['TEST'],HookState[_0xd46efb(0xe7)],_0x1eee08);return;}await testObservabilityReporter[_0xd46efb(0x10c)](_0x3fe585,_0x130872,_0x450243,_0x16e491[_0xd46efb(0x8f)],_0xcbaa94);}catch(_0x3e4423){logger[_0xd46efb(0x8d)](_0xd46efb(0xe2)+util[_0xd46efb(0x131)](_0x3e4423)+'\x20');}}async[a6_0xe8e942(0x107)](_0xc78c1a,_0x3f9244,_0x38ee85){const _0x1e45cf=a6_0xe8e942,_0x1c3bd3={'bJhYw':function(_0x3ea405,_0x14be81){return _0x3ea405(_0x14be81);},'VBONT':_0x1e45cf(0xd1),'jOAvM':_0x1e45cf(0x111)};this['logTestCaseFinished'](_0xc78c1a);if(_0x1c3bd3[_0x1e45cf(0x83)](shouldProcessEventForTesthub,_0x1c3bd3['VBONT']))try{this['report'][_0x1e45cf(0xd6)]=this[_0x1e45cf(0x9b)][_0x1e45cf(0xd6)]||{},this[_0x1e45cf(0x9b)]['testCaseFinished'][_0xc78c1a[_0x1e45cf(0xf1)]]=_0xc78c1a,_testCasesData[_0x38ee85['id']]=Object[_0x1e45cf(0x89)]({},_0x38ee85);const _0x1d9f38=_0xc78c1a[_0x1e45cf(0xf1)],_0x7ab090=_0x3f9244[_0x1e45cf(0xa9)][_0x1e45cf(0xc6)][_0x1d9f38][_0x1e45cf(0xe9)],_0x25e356=_0x3f9244[_0x1e45cf(0xa9)]['testCaseMap'][_0x7ab090],_0x2f37c3=_0x25e356['pickleId'],_0x3c1737=_0x3f9244[_0x1e45cf(0xa9)][_0x1e45cf(0x94)][_0x2f37c3],_0x454b82=this['getGherkinDocument'](_0x3f9244,_0x3c1737),_0x54eb3e=_0x454b82[_0x1e45cf(0x90)],_0x3463e8=_tests[_0x7ab090];_0x3463e8&&(delete _tests[_0x7ab090],_0x3463e8[_0x1e45cf(0x133)]=new Date()[_0x1e45cf(0x11f)]());if(BrowserstackCLI[_0x1e45cf(0x88)]()[_0x1e45cf(0x87)]()&&await this['isCLIReady']()){const _0x55d10c=await cucumberUtils['createTestFrameworkData'](_0x3463e8,_0x3c1737,_0x38ee85,_0x454b82,_0x1d9f38,_0x1c3bd3[_0x1e45cf(0x73)]),_0x414b5c={};_0x414b5c[_0x1e45cf(0x111)]=_0x55d10c,await BrowserstackCLI[_0x1e45cf(0x88)]()['getTestFramework']()[_0x1e45cf(0x69)](TestFrameworkState[_0x1e45cf(0x8a)],HookState[_0x1e45cf(0x103)],_0x414b5c);const _0x153f85={};_0x153f85['testUUID']=_0xc78c1a[_0x1e45cf(0xf1)],_0x153f85[_0x1e45cf(0xb5)]=_0x1c3bd3[_0x1e45cf(0x91)],await BrowserstackCLI['getInstance']()['getTestFramework']()[_0x1e45cf(0x69)](TestFrameworkState[_0x1e45cf(0xf3)],HookState[_0x1e45cf(0x103)],_0x153f85);return;}await testObservabilityReporter['sendTestRunEventForCucumber'](_0x38ee85,_0x454b82,_0x3c1737,_0x1c3bd3[_0x1e45cf(0x73)],_0x3463e8);}catch(_0x296768){logger[_0x1e45cf(0x8d)](_0x1e45cf(0xac)+util[_0x1e45cf(0x131)](_0x296768));}}async['onTestStepStarted'](_0x24830b,_0x4dbdce){const _0x33db51=a6_0xe8e942,_0xda027b={'sAjEm':function(_0x6804e1,_0x11b138){return _0x6804e1(_0x11b138);},'vaFls':_0x33db51(0xfa),'iEtXg':function(_0x73d532,_0x10c5c8){return _0x73d532!==_0x10c5c8;},'yWmit':_0x33db51(0xbb)};if(_0xda027b[_0x33db51(0xa1)](shouldProcessEventForTesthub,_0xda027b[_0x33db51(0x123)]))try{this['report'][_0x33db51(0xe5)]=this[_0x33db51(0x9b)][_0x33db51(0xe5)]||{},this['report'][_0x33db51(0xe5)][_0x24830b[_0x33db51(0xf1)]]=_0x24830b;const _0x3d276d=_0x24830b[_0x33db51(0xf1)],_0x57e358=_0x4dbdce[_0x33db51(0xa9)][_0x33db51(0xc6)][_0x3d276d][_0x33db51(0xe9)],_0x35f6a2=this[_0x33db51(0x9b)]['testCases']['find'](_0x1e0908=>_0x1e0908['id']===_0x57e358)[_0x33db51(0x11c)],_0x175086=this[_0x33db51(0x9b)][_0x33db51(0x72)][_0x33db51(0xf0)](_0x5772fb=>_0x5772fb['id']===_0x35f6a2),_0x312be3=this[_0x33db51(0x9b)]['testCases']['find'](_0x22166d=>_0x22166d['id']===_0x57e358)[_0x33db51(0xb6)],_0x5c5fba=this[_0x33db51(0x9b)][_0x33db51(0xe5)][_0x3d276d]['testStepId'],_0x27635b=_0x312be3[_0x33db51(0xf0)](_0x5dfd02=>_0x5dfd02['id']===_0x5c5fba)[_0x33db51(0x118)],_0x1c354=_0x175086[_0x33db51(0xd7)][_0x33db51(0xf0)](_0x62c436=>_0x62c436['id']===_0x27635b);if(_0x27635b&&_tests[_0x57e358]&&_0xda027b[_0x33db51(0x93)](_tests[_0x57e358][_0xda027b['yWmit']],_0x5c5fba)){_tests[_0x57e358][_0xda027b[_0x33db51(0x113)]]=_0x5c5fba;const _0x1b2ff9={};_0x1b2ff9[_0x33db51(0xd7)]=[];const _0x2fdccd=_tests[_0x57e358]||_0x1b2ff9;_0x2fdccd&&!_0x2fdccd[_0x33db51(0xd7)]&&(_0x2fdccd[_0x33db51(0xd7)]=[]),_0x2fdccd[_0x33db51(0xd7)][_0x33db51(0xf8)]({'id':_0x1c354['id'],'text':_0x1c354[_0x33db51(0x105)],'started_at':new Date()[_0x33db51(0x11f)]()}),_tests[_0x57e358]=_0x2fdccd;}if(BrowserstackCLI[_0x33db51(0x88)]()['isCliEnabled']()&&await this['isCLIReady']()){const _0x42918d=await cucumberUtils['createHookData'](this[_0x33db51(0x9b)],_0x3d276d,_0xda027b[_0x33db51(0x123)],_0x312be3,_0x5c5fba,_tests[_0x57e358]);_0x42918d&&await BrowserstackCLI['getInstance']()[_0x33db51(0xa7)]()[_0x33db51(0x69)](TestFrameworkState[_0x42918d[_0x33db51(0x8c)]],HookState[_0x33db51(0xe7)],{'hookData':_0x42918d,'testUUID':_0x24830b[_0x33db51(0xf1)]});return;}await testObservabilityReporter['sendHook'](this[_0x33db51(0x9b)],_0x3d276d,_0xda027b[_0x33db51(0x123)],_0x312be3,_0x5c5fba,_tests[_0x57e358]);}catch(_0x960f6b){logger['debug'](_0x33db51(0xb9)+util[_0x33db51(0x131)](_0x960f6b));}}async[a6_0xe8e942(0xef)](_0x3bd0ba,_0x120bf3){const _0x12d2d2=a6_0xe8e942,_0x27d824={'XCQYv':function(_0x50ae45,_0x2033b0){return _0x50ae45===_0x2033b0;},'IFjfs':'2|1|0|4|3','DMfzT':function(_0x4e9589,_0x1bdb33){return _0x4e9589(_0x1bdb33);},'Zxzfo':_0x12d2d2(0x130),'JUKid':_0x12d2d2(0x9e),'WFQMN':function(_0xef7ac4,_0x29adb2){return _0xef7ac4===_0x29adb2;},'ptezP':_0x12d2d2(0x11a),'BTCMf':_0x12d2d2(0xbb),'ZTWYf':_0x12d2d2(0xfa),'CmLZP':_0x12d2d2(0x117)};this[_0x12d2d2(0x9b)]['testStepFinished']=this['report']['testStepFinished']||{},this[_0x12d2d2(0x9b)]['testStepFinished'][_0x3bd0ba[_0x12d2d2(0xf1)]]=_0x3bd0ba;if(_0x27d824['DMfzT'](shouldProcessEventForTesthub,_0x27d824[_0x12d2d2(0xa6)]))try{const _0x3ba0ea=_0x3bd0ba['testCaseStartedId'],_0x4ac0c7=_0x120bf3[_0x12d2d2(0xa9)][_0x12d2d2(0xc6)][_0x3ba0ea][_0x12d2d2(0xe9)],_0x1b26d9=_0x120bf3[_0x12d2d2(0xa9)][_0x12d2d2(0xa3)][_0x4ac0c7],_0x1938ed=_0x1b26d9[_0x12d2d2(0x11c)],_0x22eded=_0x120bf3[_0x12d2d2(0xa9)][_0x12d2d2(0x94)][_0x1938ed],_0x467c52=_0x3bd0ba[_0x12d2d2(0xbb)],_0x49db4c=_0x1b26d9['testSteps'],_0x3829fb=this[_0x12d2d2(0xa9)][_0x12d2d2(0x97)](_0x3ba0ea),_0x1446c7=_0x49db4c['find'](_0xd2369e=>_0xd2369e['id']===_0x467c52)[_0x12d2d2(0x118)];let _0x5e3535,_0x4b8340;_0x3bd0ba[_0x12d2d2(0x110)]&&_0x27d824[_0x12d2d2(0xd4)](_0x3bd0ba['testStepResult']['status'][_0x12d2d2(0xa8)]()[_0x12d2d2(0x81)](),_0x27d824['JUKid'])&&(_0x5e3535=_0x27d824[_0x12d2d2(0xba)](_0x3bd0ba['testStepResult'][_0x12d2d2(0xcf)],undefined)?_0x3bd0ba[_0x12d2d2(0x110)][_0x12d2d2(0xb4)]:_0x3bd0ba['testStepResult']['exception'][_0x12d2d2(0xb4)],_0x4b8340=_0x27d824[_0x12d2d2(0xd4)](_0x3bd0ba['testStepResult'][_0x12d2d2(0xcf)],undefined)?_0x27d824[_0x12d2d2(0x132)]:_0x3bd0ba['testStepResult'][_0x12d2d2(0xb4)]);if(_0x1446c7&&_tests[_0x4ac0c7][_0x27d824['BTCMf']]){const _0x227271=_0x22eded['steps'][_0x12d2d2(0xf0)](_0x26eb7a=>_0x26eb7a['id']===_0x1446c7),_0x56b686={};_0x56b686['steps']=[];const _0x5e3291=_tests[_0x4ac0c7]||_0x56b686;!_0x5e3291[_0x12d2d2(0xd7)]?_0x5e3291[_0x12d2d2(0xd7)]=[{'id':_0x227271['id'],'text':_0x227271[_0x12d2d2(0x105)],'finished_at':new Date()[_0x12d2d2(0x11f)](),'result':_0x3bd0ba[_0x12d2d2(0x110)][_0x12d2d2(0xc8)],'duration':_0x3bd0ba[_0x12d2d2(0x110)][_0x12d2d2(0x137)][_0x12d2d2(0x112)],'failure':_0x5e3535,'failureType':_0x4b8340}]:_0x5e3291[_0x12d2d2(0xd7)]['forEach'](_0x59505c=>{const _0x21586b=_0x12d2d2;if(_0x27d824[_0x21586b(0xd4)](_0x59505c['id'],_0x227271['id'])){const _0x2830a3=_0x27d824[_0x21586b(0xdb)]['split']('|');let _0x308813=0x0;while(!![]){switch(_0x2830a3[_0x308813++]){case'0':_0x59505c[_0x21586b(0x137)]=_0x3bd0ba[_0x21586b(0x110)]['duration'][_0x21586b(0x112)];continue;case'1':_0x59505c[_0x21586b(0xfe)]=_0x3bd0ba['testStepResult'][_0x21586b(0xc8)];continue;case'2':_0x59505c[_0x21586b(0x99)]=new Date()[_0x21586b(0x11f)]();continue;case'3':_0x59505c['failureType']=_0x4b8340;continue;case'4':_0x59505c['failure']=_0x5e3535;continue;}break;}}}),_tests[_0x4ac0c7]=_0x5e3291;}delete _tests[_0x4ac0c7][_0x27d824[_0x12d2d2(0x10a)]];if(BrowserstackCLI['getInstance']()['isCliEnabled']()&&await this[_0x12d2d2(0x96)]()){const _0x133996=await cucumberUtils[_0x12d2d2(0xff)](this[_0x12d2d2(0x9b)],_0x3ba0ea,_0x27d824[_0x12d2d2(0xcc)],_0x49db4c,_0x467c52,_tests[_0x4ac0c7]);if(_0x133996){await BrowserstackCLI[_0x12d2d2(0x88)]()[_0x12d2d2(0xa7)]()[_0x12d2d2(0x69)](TestFrameworkState[_0x133996[_0x12d2d2(0x8c)]],HookState[_0x12d2d2(0x103)],{'hookData':_0x133996,'testUUID':_0x3bd0ba['testCaseStartedId']});const _0xcd739e={};_0xcd739e[_0x12d2d2(0xc7)]=_0x3bd0ba[_0x12d2d2(0xf1)],_0xcd739e['type']=_0x27d824[_0x12d2d2(0xcd)],await BrowserstackCLI[_0x12d2d2(0x88)]()['getTestFramework']()[_0x12d2d2(0x69)](TestFrameworkState['LOG_REPORT'],HookState[_0x12d2d2(0x103)],_0xcd739e);}return;}await testObservabilityReporter[_0x12d2d2(0x100)](this[_0x12d2d2(0x9b)],_0x3ba0ea,_0x27d824[_0x12d2d2(0xa6)],_0x49db4c,_0x467c52,_tests[_0x4ac0c7]);}catch(_0x5805c8){logger['debug'](_0x12d2d2(0xde)+util[_0x12d2d2(0x131)](_0x5805c8));}}[a6_0xe8e942(0xf9)](_0x5b22ef){const _0x41dca6=a6_0xe8e942,_0x3095f8={};return _0x5b22ef[_0x41dca6(0x90)]['children']['map'](this['extractStepContainers'])['flat']()[_0x41dca6(0x85)](_0x217e16=>_0x217e16['steps'][_0x41dca6(0x85)](_0x37e514=>_0x3095f8[_0x37e514['id']]=_0x37e514)),_0x3095f8;}[a6_0xe8e942(0xb3)](_0x662575){const _0x497795=a6_0xe8e942,_0x595b27={'riZtw':function(_0x20c277,_0x44710a){return _0x20c277(_0x44710a);},'mgzHw':function(_0x43910f,_0x2e37e3){return _0x43910f(_0x2e37e3);}};if(!_0x595b27[_0x497795(0x8b)](isUndefined,_0x662575[_0x497795(0xbc)]))return[_0x662575[_0x497795(0xbc)]];else{if(!_0x595b27[_0x497795(0x6f)](isUndefined,_0x662575['rule']))return _0x662575[_0x497795(0x108)][_0x497795(0x126)][_0x497795(0x9f)](_0x5e06db=>!isUndefined(_0x5e06db['background'])?_0x5e06db[_0x497795(0xbc)]:_0x5e06db[_0x497795(0xa0)]);};return[_0x662575[_0x497795(0xa0)]];}[a6_0xe8e942(0x121)](_0x24ed11,_0x8e20e){const _0x4341c9=a6_0xe8e942;return Object[_0x4341c9(0x80)](_0x24ed11[_0x4341c9(0xa9)][_0x4341c9(0x125)])[_0x4341c9(0xf0)](_0x441c3d=>_0x441c3d[_0x4341c9(0xca)]===_0x8e20e[_0x4341c9(0xca)]);}async[a6_0xe8e942(0x10e)](){const _0x4bd19c=a6_0xe8e942;if(this[_0x4bd19c(0xfc)])return this[_0x4bd19c(0xfc)];return this['cliInitPromise']=this[_0x4bd19c(0x109)](),this[_0x4bd19c(0xfc)];}async[a6_0xe8e942(0x109)](){const _0x4ac500=a6_0xe8e942,_0xcf4939={'ZrGOg':_0x4ac500(0x122),'QolVW':function(_0x1a5c0b,_0x7197b2){return _0x1a5c0b(_0x7197b2);},'llXRD':'../../v2/cliUtils','KVdiC':'../../utils/constants'};try{const _0x313bed=BrowserstackCLI[_0x4ac500(0x88)]();if(_0x313bed['isRunning']())return logger[_0x4ac500(0x8d)](_0x4ac500(0x12f)+_0x313bed['binSessionId']),!![];const _0x4698ba=process[_0x4ac500(0x127)][_0x4ac500(0xab)];if(!_0x4698ba)return logger['debug'](_0xcf4939['ZrGOg']),![];const _0x1da9b2=_0xcf4939[_0x4ac500(0xfb)](require,_0xcf4939['llXRD']),{FRAMEWORKS:_0x483735}=_0xcf4939[_0x4ac500(0xfb)](require,_0xcf4939['KVdiC']);return _0x1da9b2['setFrameworkDetail'](_0x483735[_0x4ac500(0xe1)],_0x483735['PLAYWRIGHT']),logger[_0x4ac500(0x8d)](_0x4ac500(0xe6)+_0x4698ba),await _0x313bed['bootstrap'](),logger[_0x4ac500(0x8d)](_0x4ac500(0xaa)+_0x313bed[_0x4ac500(0xb8)]()+_0x4ac500(0x95)+_0x313bed['binSessionId']),_0x313bed[_0x4ac500(0xb8)]();}catch(_0x486193){return logger[_0x4ac500(0x8d)](_0x4ac500(0x10f)+util[_0x4ac500(0x131)](_0x486193)),![];}}async['isCLIReady'](){const _0x164470=a6_0xe8e942;try{return await this[_0x164470(0x10e)](),BrowserstackCLI[_0x164470(0x88)]()[_0x164470(0xb8)]();}catch(_0x403b3d){return logger[_0x164470(0x8d)]('isCLIReady:\x20Error\x20checking\x20CLI\x20readiness:\x20'+util['format'](_0x403b3d)),![];}}}function a6_0xfa5f(_0x4d8262,_0x1e9980){const _0x1618f1=a6_0x1618();return a6_0xfa5f=function(_0xfa5f6f,_0x46a083){_0xfa5f6f=_0xfa5f6f-0x64;let _0x3228ea=_0x1618f1[_0xfa5f6f];return _0x3228ea;},a6_0xfa5f(_0x4d8262,_0x1e9980);}module[a6_0xe8e942(0x114)]=o11yClassErrorHandler(BrowserstackFormatter,[a6_0xe8e942(0x7e),a6_0xe8e942(0x107),a6_0xe8e942(0xd5),a6_0xe8e942(0xef),a6_0xe8e942(0x6a),'onTestRunFinished',a6_0xe8e942(0xb3),a6_0xe8e942(0x121),'getGherkinStepMap']);function a6_0x1618(){const _0x563f1c=['testCaseId','keyword','wbSVC','setup','cwd','cucumber-js/test.setup.js','onTestStepFinished','find','testCaseStartedId','../../../helpers/testhub/utils.js','LOG_REPORT','hooks','GEXSC','actionLocation','GNfmE','push','getGherkinStepMap','HookRunStarted','QolVW','cliInitPromise','testStepFinished','result','createHookData','sendHook','qEzOU','bstack','POST','1038qJQOhB','text','QluDu','onTestCaseFinished','rule','_performCLIInitialization','BTCMf','createTestFrameworkData','sendTestRunEventForCucumber','capability','ensureCLIInitialized','Error\x20initializing\x20CLI\x20in\x20formatter:\x20','testStepResult','test','seconds','yWmit','exports','CgrvI','ejXuE','hook','pickleStepId','3110LeItyq','UnhandledError','testCaseAttempt','pickleId','dZGKT','@cucumber/cucumber','toISOString','testCase','getGherkinDocument','No\x20BROWSERSTACK_CLI_BIN_SESSION_ID\x20found,\x20CLI\x20not\x20available','vaFls','onTestRunFinished','gherkinDocumentMap','children','env','20QhBbgx','eventBroadcaster','KwpOD','NRDJS','TFEZr','PENDING','2639720YQkHGO','CLI\x20already\x20running\x20-\x20binSessionId:\x20','HookRunFinished','format','ptezP','finishedAt','YuAwY','onHook','INIT_TEST','duration','tqKim','32421prZCki','onTestCase','vzuVA','../../playwright/reporter/test-details.js','SKIPPED','trackEvent','onTestRunStarted','incrementCounter','../test-observability.js','iFeiD','stepDefinition','mgzHw','logTestRunFinished','onGherkinDocument','pickle','VBONT','HZwdb','name','../../../bin/v2/TestInfo.js','hjfFB','includes','gherkinDocument','snippetBuilder','hKmsE','cDGBW','../../v2/utils/cucumber-utils.js','onTestCaseStarted','getTestUUID','values','toLowerCase','supportCodeLibrary','bJhYw','testCases','forEach','LyqnJ','isCliEnabled','getInstance','assign','TEST','riZtw','hook_type','debug','logTestCaseFinished','SqDDa','feature','jOAvM','testCaseStarted','iEtXg','pickleMap',',\x20binSessionId:\x20','isCLIReady','getTestCaseAttempt','onPickle','finished_at','PASSED','report','USBKn','../../v2/state/hookState.js','failed','map','scenario','sAjEm','envelope','testCaseMap','ZNKRN','parseTestCaseAttempt','Zxzfo','getTestFramework','toString','eventDataCollector','CLI\x20bootstrap\x20completed\x20-\x20isRunning:\x20','BROWSERSTACK_CLI_BIN_SESSION_ID','Exception\x20in\x20sending\x20onTestCaseFinished\x20event:\x20\x20','5130132weiIxA','log','\x20-\x20','onStepDefinition','kyeoG','BWLwK','extractStepContainers','message','type','testSteps','../../v2/browserstackCLI.js','isRunning','Exception\x20in\x20onTestStepStarted\x20event:\x20','WFQMN','testStepId','background','UNKNOWN','DsqrY','\x20\x20\x20\x20','__platform','testRunStarted','description','testRunFinished','../../v2/state/testFrameworkState.js','BmeqT','testCaseAttemptDataMap','testUUID','status','isBstackHook','uri','PZGLE','ZTWYf','CmLZP','../../../helpers/test-observability/error-handler','exception','htYmd','TestRunFinished','AMBIGUOUS','RFnDp','XCQYv','onTestStepStarted','testCaseFinished','steps','RTAxR','548134xalNkX','jEWpW','IFjfs','13844385LiXzdG','313071YJxTFS','Exception\x20in\x20onTestStepFinished\x20event:\x20','QPnwW','CONFIG','CUCUMBER','Exception\x20in\x20sending\x20onTestCaseStarted:\x20','cRXyt','FAILED','testStepStarted','Bootstrapping\x20CLI\x20in\x20formatter\x20with\x20binSessionId:\x20','PRE','winstonLogger'];a6_0x1618=function(){return _0x563f1c;};return a6_0x1618();}