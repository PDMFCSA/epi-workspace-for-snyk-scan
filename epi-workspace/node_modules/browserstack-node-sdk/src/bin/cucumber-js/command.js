#!/usr/bin/env node
'use strict';const a5_0x49bd87=a5_0x320f;function a5_0x320f(_0x436922,_0x18502a){const _0x2a0116=a5_0x2a01();return a5_0x320f=function(_0x320f9e,_0x22a328){_0x320f9e=_0x320f9e-0x116;let _0x34be81=_0x2a0116[_0x320f9e];return _0x34be81;},a5_0x320f(_0x436922,_0x18502a);}function a5_0x2a01(){const _0x43ec5c=['../../helpers/utilities','../test-runner','getHubUrl','error\x20removing\x20tcg\x20config\x20file','cucumber-js','jfzgX','Awlsr','stepsUndefined','../../helpers/test-observability/utils','skipSessionStatus','unlinkSync','env','path','../../helpers/performance/performance-tester','stepsUnknown','\x20failed','handleApp','stepsPassed','stepsAmbiguous','SDK_CLEANUP','accessibilityOptions','oRcpI','yellow','\x20ambiguous','format','exports','EVENTS','rmdirSync','QTlal','913006oBVnks','\x20steps','Removing\x20tmp\x20directory\x20created\x20for\x20reports','push','useW3C','scenarios','xBYlH','parallelsPerPlatform','util','DHVoN','CUCUMBER','stepsPending','ASMqE','gNTsB','Generating\x20consolidated\x20report...','wUFgx','8349880eGpwwS','chalk','gXpxV','\x20pending','52563nFOMvv','stringify','40376ZXxBxN','skipSessionName','argv','prepareCapabilities','getPlatformName','launchBuild','cwd','2143746vkIEUt','exitCode','../../helpers/testhub/testhubHandler','TSVaI','setupTCGAuth','errorMessage','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','9PiNBfp','isUndefined','processSuccess','cyan','join','config','../../helpers/logger','bold','../../helpers/performance/constants','GpOFe','cucumber','log','zpHxO','parseFormatters','SDK_SETUP','scenariosFailed','pLgNJ','green','6BzWrET','length','120LGYMEN','BROWSERSTACK_TEST_OBSERVABILITY_YML','setUserConfigPath','true','\x20passed','start','tmp','debug','152500QZsrUm','getErrorMessageFromResults','FRAMEWORKS','proxySettings','JpCFn','374ctnEuL','dKTNv','splice','1342960AgizJp','framework','\x20skipped','\x20scenarios','mergeOutputFiles','red','logLevel','cpIxe','wwdmi','rtpzb','stepsSkipped','forEach','finalExecution'];a5_0x2a01=function(){return _0x43ec5c;};return a5_0x2a01();}(function(_0x1074e4,_0x1ad92c){const _0x41a42b=a5_0x320f,_0x458ef7=_0x1074e4();while(!![]){try{const _0x28cd29=-parseInt(_0x41a42b(0x144))/0x1+-parseInt(_0x41a42b(0x161))/0x2+-parseInt(_0x41a42b(0x158))/0x3+parseInt(_0x41a42b(0x17c))/0x4*(-parseInt(_0x41a42b(0x184))/0x5)+-parseInt(_0x41a42b(0x17a))/0x6*(-parseInt(_0x41a42b(0x15a))/0x7)+parseInt(_0x41a42b(0x154))/0x8*(-parseInt(_0x41a42b(0x168))/0x9)+parseInt(_0x41a42b(0x11a))/0xa*(parseInt(_0x41a42b(0x117))/0xb);if(_0x28cd29===_0x1ad92c)break;else _0x458ef7['push'](_0x458ef7['shift']());}catch(_0x85e736){_0x458ef7['push'](_0x458ef7['shift']());}}}(a5_0x2a01,0x95189));const fs=require('fs'),path=require(a5_0x49bd87(0x133)),util=require(a5_0x49bd87(0x14c)),logger=require(a5_0x49bd87(0x16e))['winstonLogger'],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require('../../helpers/helper'),utilities=require(a5_0x49bd87(0x127)),constants=require('../utils/constants'),{parallelCucumberRun}=require(a5_0x49bd87(0x128)),TestHubHandler=require(a5_0x49bd87(0x163)),testOpsHelper=require(a5_0x49bd87(0x12f)),chalk=require(a5_0x49bd87(0x155)),PerformanceTester=require(a5_0x49bd87(0x134)),PerformanceEvents=require(a5_0x49bd87(0x170))[a5_0x49bd87(0x141)];function printCucumberStats(_0x3bba4e){const _0x314262=a5_0x49bd87,_0x3ff416={};_0x3ff416[_0x314262(0x174)]=function(_0x17d327,_0x82c17e){return _0x17d327>_0x82c17e;},_0x3ff416[_0x314262(0x153)]=function(_0x4cba4e,_0xff52fa){return _0x4cba4e-_0xff52fa;},_0x3ff416[_0x314262(0x118)]=function(_0x4de771,_0x28c0fb){return _0x4de771>_0x28c0fb;},_0x3ff416[_0x314262(0x14a)]=function(_0x598e43,_0x534028){return _0x598e43>_0x534028;},_0x3ff416[_0x314262(0x156)]=function(_0x5a7f64,_0x408ee9){return _0x5a7f64>_0x408ee9;},_0x3ff416[_0x314262(0x116)]=function(_0x2fbe1c,_0xc8056c){return _0x2fbe1c>_0xc8056c;},_0x3ff416[_0x314262(0x122)]=function(_0x2a3e0e,_0x2ac7b4){return _0x2a3e0e>_0x2ac7b4;},_0x3ff416[_0x314262(0x121)]=function(_0x52965c,_0x594d9e){return _0x52965c+_0x594d9e;},_0x3ff416[_0x314262(0x13c)]=function(_0x2a953c,_0x4d5f75){return _0x2a953c+_0x4d5f75;},_0x3ff416['QTlal']=function(_0x12e9b5,_0x44664b){return _0x12e9b5===_0x44664b;},_0x3ff416[_0x314262(0x14d)]='****\x20RESULTS\x20****';const _0x538cca=_0x3ff416;let _0xc6448d=0x0;if(_0x538cca[_0x314262(0x143)](_0x3bba4e[_0x314262(0x17b)],0x0))return _0xc6448d;return console[_0x314262(0x173)](chalk['bold']['bgWhite'](_0x538cca[_0x314262(0x14d)])),_0x3bba4e[_0x314262(0x125)](_0x5af4b9=>{const _0xd774d4=_0x314262,_0x1ad3bd=_0x5af4b9[0x0],_0x3721a5=_0x5af4b9[0x1];console[_0xd774d4(0x173)]('\x0a'+chalk[_0xd774d4(0x16f)][_0xd774d4(0x13d)](''+helper[_0xd774d4(0x15e)](_0x1ad3bd)));const _0x1f45b8=_0x3721a5[_0xd774d4(0x149)],_0x2a1c2b=_0x3721a5['steps'],_0x18ad7b=_0x3721a5[_0xd774d4(0x177)],_0x1d5b2a=_0x3721a5['stepsFailed'],_0x231ac5=_0x3721a5[_0xd774d4(0x138)],_0x29f86e=_0x3721a5[_0xd774d4(0x124)],_0x5f0c64=_0x3721a5[_0xd774d4(0x14f)],_0x123e93=_0x3721a5[_0xd774d4(0x12e)],_0x550bb9=_0x3721a5[_0xd774d4(0x135)],_0x3803c5=_0x3721a5[_0xd774d4(0x139)],_0x1c4d42=_0x3721a5[_0xd774d4(0x16a)];let _0x583872=_0x1f45b8+_0xd774d4(0x11d);const _0x47961a=_0x538cca[_0xd774d4(0x174)](_0x538cca[_0xd774d4(0x153)](_0x1f45b8,_0x18ad7b),0x0)?_0x538cca[_0xd774d4(0x153)](_0x1f45b8,_0x18ad7b):0x0;if(_0x538cca[_0xd774d4(0x118)](_0x18ad7b,0x0)&&_0x538cca[_0xd774d4(0x118)](_0x47961a,0x0))_0x583872+='\x20('+chalk[_0xd774d4(0x16f)]['red'](_0x18ad7b+_0xd774d4(0x136))+',\x20'+chalk[_0xd774d4(0x16f)][_0xd774d4(0x179)](_0x47961a+_0xd774d4(0x180))+')';else(_0x538cca[_0xd774d4(0x118)](_0x18ad7b,0x0)||_0x538cca[_0xd774d4(0x118)](_0x47961a,0x0))&&(_0x583872+=_0x538cca[_0xd774d4(0x14a)](_0x18ad7b,0x0)?'\x20('+chalk[_0xd774d4(0x16f)][_0xd774d4(0x11f)](_0x18ad7b+_0xd774d4(0x136))+')':'\x20('+chalk[_0xd774d4(0x16f)][_0xd774d4(0x179)](_0x47961a+_0xd774d4(0x180))+')');const _0x218ed3=_0x2a1c2b+_0xd774d4(0x145),_0x2389b4=[];_0x538cca[_0xd774d4(0x118)](_0x3803c5,0x0)&&_0x2389b4[_0xd774d4(0x147)](''+chalk[_0xd774d4(0x16f)][_0xd774d4(0x11f)](_0x3803c5+_0xd774d4(0x13e)));_0x538cca[_0xd774d4(0x174)](_0x1d5b2a,0x0)&&_0x2389b4['push'](''+chalk['bold'][_0xd774d4(0x11f)](_0x1d5b2a+_0xd774d4(0x136)));_0x538cca[_0xd774d4(0x14a)](_0x231ac5,0x0)&&_0x2389b4[_0xd774d4(0x147)](''+chalk[_0xd774d4(0x16f)][_0xd774d4(0x179)](_0x231ac5+_0xd774d4(0x180)));_0x538cca['gXpxV'](_0x5f0c64,0x0)&&_0x2389b4[_0xd774d4(0x147)](''+chalk[_0xd774d4(0x16f)][_0xd774d4(0x13d)](_0x5f0c64+_0xd774d4(0x157)));_0x538cca[_0xd774d4(0x116)](_0x29f86e,0x0)&&_0x2389b4[_0xd774d4(0x147)](''+chalk['bold'][_0xd774d4(0x16b)](_0x29f86e+_0xd774d4(0x11c)));_0x538cca['zpHxO'](_0x123e93,0x0)&&_0x2389b4[_0xd774d4(0x147)](''+chalk[_0xd774d4(0x16f)]['yellow'](_0x123e93+'\x20undefined'));_0x538cca[_0xd774d4(0x122)](_0x550bb9,0x0)&&_0x2389b4[_0xd774d4(0x147)](''+chalk['bold'][_0xd774d4(0x13d)](_0x550bb9+_0xd774d4(0x11c)));const _0x238e43=_0x538cca[_0xd774d4(0x121)](_0x538cca[_0xd774d4(0x121)](_0x538cca[_0xd774d4(0x121)](_0x218ed3,'('),_0x2389b4[_0xd774d4(0x16c)](',\x20')),')');console['log'](_0x538cca[_0xd774d4(0x13c)](_0x538cca[_0xd774d4(0x121)](_0x538cca[_0xd774d4(0x121)](_0x538cca[_0xd774d4(0x121)]('\x0a',_0x583872),'\x0a'),_0x238e43),'\x0a')),_0x538cca[_0xd774d4(0x143)](_0x1c4d42,![])&&(_0xc6448d=0x1);}),_0xc6448d;}async function run(_0x2ebb70,_0x40b881){const _0x34a451=a5_0x49bd87,_0x3aff57={'gJKhH':function(_0x5d55c7,_0x4f5cfe){return _0x5d55c7(_0x4f5cfe);},'GpOFe':function(_0x4d8559,_0x3f4c3e){return _0x4d8559>_0x3f4c3e;},'pLgNJ':_0x34a451(0x152),'TSVaI':_0x34a451(0x146),'rtpzb':_0x34a451(0x172),'meUmr':_0x34a451(0x12a),'HAQAc':_0x34a451(0x12b),'jfzgX':_0x34a451(0x182),'Awlsr':function(_0x4c99e6,_0x368935){return _0x4c99e6-_0x368935;},'gNTsB':function(_0x4bb451,_0x3842d3){return _0x4bb451>=_0x3842d3;},'dCumQ':function(_0x181b42,_0x5556ba){return _0x181b42!=_0x5556ba;},'CtHmp':_0x34a451(0x17f),'ASMqE':function(_0x52aac1,_0x2967d3,_0x1ac8e2,_0x377cf9,_0x404c6d,_0x26069e){return _0x52aac1(_0x2967d3,_0x1ac8e2,_0x377cf9,_0x404c6d,_0x26069e);}},_0xc593b=new BrowserStackSetup(_0x2ebb70,_0x3aff57['HAQAc']);await _0xc593b['initialize'](),helper[_0x34a451(0x17e)](_0xc593b[_0x34a451(0x11b)],_0x2ebb70);!helper['isBrowserstackInfra']()&&await _0xc593b[_0x34a451(0x165)]();await helper[_0x34a451(0x137)](_0xc593b[_0x34a451(0x16d)]);const _0x3d0245=helper[_0x34a451(0x148)](_0xc593b['config']),_0x12c8cd=helper[_0x34a451(0x15d)](_0xc593b[_0x34a451(0x16d)],_0x3d0245,constants[_0x34a451(0x186)][_0x34a451(0x14e)]);if(!_0xc593b['config'])return;const _0x2b06cc=_0xc593b[_0x34a451(0x16d)][_0x34a451(0x14b)]||helper['getUserWorkerCount'](_0x2ebb70,_0x40b881,_0xc593b[_0x34a451(0x16d)],constants[_0x34a451(0x186)][_0x34a451(0x14e)])||0x1,_0x5d9be2={'server':helper[_0x34a451(0x129)](_0xc593b[_0x34a451(0x16d)]),'proxySettings':_0xc593b[_0x34a451(0x16d)][_0x34a451(0x187)],'maxWorkers':_0x2b06cc,'browserStackLogLevel':_0xc593b[_0x34a451(0x16d)][_0x34a451(0x120)],'skipSessionName':_0xc593b[_0x34a451(0x16d)]['testContextOptions'][_0x34a451(0x15b)],'skipSessionStatus':_0xc593b[_0x34a451(0x16d)]['testContextOptions'][_0x34a451(0x130)],'turboScaleUrl':_0xc593b[_0x34a451(0x16d)]['turboScaleUrl']},_0x354f47=process[_0x34a451(0x15c)],[_0x5b6369,_0x2ed69b]=helper[_0x34a451(0x175)](_0x354f47),_0x43ba87=path[_0x34a451(0x16c)](process[_0x34a451(0x160)](),_0x3aff57[_0x34a451(0x12c)]);if(_0x3aff57[_0x34a451(0x171)](_0x2ed69b[_0x34a451(0x17b)],0x0)){helper['createDir'](_0x43ba87);for(let _0x19bd37=_0x3aff57[_0x34a451(0x12d)](_0x5b6369[_0x34a451(0x17b)],0x1);_0x3aff57[_0x34a451(0x151)](_0x19bd37,0x0);_0x19bd37--){_0x354f47[_0x34a451(0x119)](_0x5b6369[_0x19bd37],0x2);}}!helper[_0x34a451(0x169)](_0xc593b[_0x34a451(0x16d)]['accessibilityOptions'])&&(process[_0x34a451(0x132)][_0x34a451(0x167)]=JSON[_0x34a451(0x159)](_0xc593b[_0x34a451(0x16d)][_0x34a451(0x13b)]));_0x3aff57['dCumQ'](_0xc593b['config']['testObservability'],null)?process[_0x34a451(0x132)][_0x34a451(0x17d)]=_0xc593b['config']['testObservability']:process[_0x34a451(0x132)][_0x34a451(0x17d)]=_0x3aff57['CtHmp'];const _0x155950=await TestHubHandler[_0x34a451(0x15f)](constants[_0x34a451(0x186)][_0x34a451(0x14e)],_0xc593b);PerformanceTester['end'](PerformanceEvents[_0x34a451(0x176)]);let _0xebc1e0;_0x3aff57[_0x34a451(0x150)](parallelCucumberRun,_0x12c8cd,_0x5d9be2,_0xc593b[_0x34a451(0x16d)],_0x354f47,_0x2ed69b)['then'](async _0x46967c=>{const _0x467c0b=_0x34a451;PerformanceTester[_0x467c0b(0x181)](PerformanceEvents[_0x467c0b(0x13a)]),_0xebc1e0=_0x46967c;const _0x3b8298=_0x3aff57['gJKhH'](printCucumberStats,_0x46967c);process[_0x467c0b(0x162)]=_0x3b8298,_0x3aff57[_0x467c0b(0x171)](_0x2ed69b[_0x467c0b(0x17b)],0x0)&&(logger[_0x467c0b(0x183)](_0x3aff57[_0x467c0b(0x178)]),helper[_0x467c0b(0x11e)](_0x43ba87,_0x2ed69b),logger[_0x467c0b(0x183)](_0x3aff57[_0x467c0b(0x164)]),helper['removeDir'](_0x43ba87));})['finally'](async()=>{const _0xba6bc5=_0x34a451;PerformanceTester[_0xba6bc5(0x181)](PerformanceEvents['SDK_CLEANUP']),_0xc593b[_0xba6bc5(0x166)]=helper[_0xba6bc5(0x185)](_0xebc1e0,_0x3aff57[_0xba6bc5(0x123)]),testOpsHelper['printBuildLink']();try{await TestHubHandler['stop']();}catch(_0x286c90){logger[_0xba6bc5(0x183)]('Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20'+util[_0xba6bc5(0x13f)](_0x286c90));}try{const {browserstackFolderPath:_0x5a44f5,tcgConfigPath:_0x4d839e}=helper['getTCGConfigFilePaths']();fs[_0xba6bc5(0x131)](_0x4d839e),fs[_0xba6bc5(0x142)](_0x5a44f5);}catch(_0xae9cc){logger[_0xba6bc5(0x183)](_0x3aff57['meUmr'],_0xae9cc);}await utilities[_0xba6bc5(0x126)](_0xc593b);});}module[a5_0x49bd87(0x140)]=run;