#!/usr/bin/env node
'use strict';const a5_0x3fe6b2=a5_0x575b;function a5_0x575b(_0x75e211,_0xc58aa9){const _0x4890d7=a5_0x4890();return a5_0x575b=function(_0x575b8f,_0x210586){_0x575b8f=_0x575b8f-0x1d3;let _0x5b788a=_0x4890d7[_0x575b8f];return _0x5b788a;},a5_0x575b(_0x75e211,_0xc58aa9);}(function(_0x4227d7,_0x7281eb){const _0x6947c1=a5_0x575b,_0x1e67dd=_0x4227d7();while(!![]){try{const _0x196e2a=parseInt(_0x6947c1(0x218))/0x1+parseInt(_0x6947c1(0x1e8))/0x2+parseInt(_0x6947c1(0x21e))/0x3+-parseInt(_0x6947c1(0x21f))/0x4+-parseInt(_0x6947c1(0x22f))/0x5*(parseInt(_0x6947c1(0x1f3))/0x6)+-parseInt(_0x6947c1(0x1f9))/0x7+parseInt(_0x6947c1(0x1e0))/0x8;if(_0x196e2a===_0x7281eb)break;else _0x1e67dd['push'](_0x1e67dd['shift']());}catch(_0xe6bf35){_0x1e67dd['push'](_0x1e67dd['shift']());}}}(a5_0x4890,0xd1d91));const fs=require('fs'),path=require(a5_0x3fe6b2(0x231)),util=require('util'),logger=require('../../helpers/logger')[a5_0x3fe6b2(0x1d7)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a5_0x3fe6b2(0x22c)),utilities=require(a5_0x3fe6b2(0x1ef)),constants=require(a5_0x3fe6b2(0x235)),{parallelCucumberRun}=require(a5_0x3fe6b2(0x1e9)),TestHubHandler=require(a5_0x3fe6b2(0x21d)),testOpsHelper=require('../../helpers/test-observability/utils'),chalk=require(a5_0x3fe6b2(0x1f8)),PerformanceTester=require(a5_0x3fe6b2(0x239)),PerformanceEvents=require(a5_0x3fe6b2(0x23c))[a5_0x3fe6b2(0x1ff)];function a5_0x4890(){const _0x1003fc=['InEPp','green','vHqXt','env','then','EVENTS','unlinkSync','getUserWorkerCount','mergeOutputFiles','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','\x20ambiguous','logLevel','cucumber','steps','splice','processSuccess','\x20skipped','log','yellow','BROWSERSTACK_TEST_OBSERVABILITY_YML','scenariosFailed','errorMessage','Removing\x20tmp\x20directory\x20created\x20for\x20reports','RdexK','finally','framework','assign','\x20failed','setUserConfigPath','vvbbv','1217223cgugti','turboScaleUrl','NCmvn','sJyen','debug','../../helpers/testhub/testhubHandler','114549CfESQd','6532860hecrIY','\x20steps','testContextOptions','config','skipSessionName','stepsUndefined','CUCUMBER','getHubUrl','stepsSkipped','cwd','parseFormatters','end','gazyh','../../helpers/helper','stepsPending','start','7692415RRtRSx','stepsPassed','path','initialize','FTVWI','xTPzb','../utils/constants','****\x20RESULTS\x20****','platforms','nElql','../../helpers/performance/performance-tester','stepsAmbiguous','accessibilityOptions','../../helpers/performance/constants','join','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','getTCGConfigFilePaths','xUnEe','tmp','scenarios','yRMMy','isBrowserstackInfra','removeDir','cyan','tODWu','Hytjg','\x20passed','red','bold','true','winstonLogger','skipSessionStatus','setupTCGAuth','format','RTtBH','rmdirSync','useW3C','\x20scenarios','HPeyH','20392808XfSmkW','length','SDK_SETUP','OnCAc','SUjYk','FRAMEWORKS','getErrorMessageFromResults','forEach','2032844MobehZ','../test-runner','IuBrM','exitCode','getPlatformName','notba','finalExecution','../../helpers/utilities','stringify','lZLWp','launchBuild','6DDHhlV','SDK_CLEANUP','push','testObservability','prepareCapabilities','chalk','5527858EGXTfG'];a5_0x4890=function(){return _0x1003fc;};return a5_0x4890();}function printCucumberStats(_0x104f68){const _0x41bfee=a5_0x3fe6b2,_0x24c630={};_0x24c630['lZLWp']=function(_0xc4806f,_0x1a941f){return _0xc4806f>_0x1a941f;},_0x24c630[_0x41bfee(0x21b)]=function(_0x3fbe04,_0x281904){return _0x3fbe04-_0x281904;},_0x24c630[_0x41bfee(0x1e4)]=function(_0x421dc1,_0x33396b){return _0x421dc1-_0x33396b;},_0x24c630[_0x41bfee(0x21a)]=function(_0x3ef6ba,_0x260222){return _0x3ef6ba>_0x260222;},_0x24c630['InEPp']=function(_0x33ac11,_0x264efe){return _0x33ac11>_0x264efe;},_0x24c630[_0x41bfee(0x247)]=function(_0x45e7bb,_0x2fedf5){return _0x45e7bb>_0x2fedf5;},_0x24c630[_0x41bfee(0x238)]=function(_0x3568ac,_0x1dcf3e){return _0x3568ac>_0x1dcf3e;},_0x24c630['Hytjg']=function(_0x52d800,_0x585ad8){return _0x52d800>_0x585ad8;},_0x24c630[_0x41bfee(0x22b)]=function(_0x4a3227,_0x1b8f1f){return _0x4a3227+_0x1b8f1f;},_0x24c630[_0x41bfee(0x243)]=function(_0x6f05ad,_0x3e0570){return _0x6f05ad+_0x3e0570;},_0x24c630[_0x41bfee(0x211)]=function(_0x20a463,_0x154f66){return _0x20a463+_0x154f66;},_0x24c630[_0x41bfee(0x1df)]=function(_0x33fe88,_0x252692){return _0x33fe88+_0x252692;},_0x24c630['vHqXt']=function(_0x94e6d4,_0x5cc518){return _0x94e6d4===_0x5cc518;},_0x24c630['FTVWI']=_0x41bfee(0x236);const _0x4b2538=_0x24c630;let _0x389848=0x0;if(_0x4b2538[_0x41bfee(0x1fc)](_0x104f68[_0x41bfee(0x1e1)],0x0))return _0x389848;return console[_0x41bfee(0x20b)](chalk[_0x41bfee(0x1d5)]['bgWhite'](_0x4b2538[_0x41bfee(0x233)])),_0x104f68[_0x41bfee(0x1e7)](_0x473345=>{const _0x22a3a3=_0x41bfee,_0x3cb987=_0x473345[0x0],_0x8e4133=_0x473345[0x1];helper['isBrowserstackInfra']()&&console[_0x22a3a3(0x20b)]('\x0a'+chalk[_0x22a3a3(0x1d5)]['yellow'](''+helper[_0x22a3a3(0x1ec)](_0x3cb987)));const _0x4c85b2=_0x8e4133[_0x22a3a3(0x242)],_0x11d8ba=_0x8e4133[_0x22a3a3(0x207)],_0x3cb0b1=_0x8e4133[_0x22a3a3(0x20e)],_0x54edef=_0x8e4133['stepsFailed'],_0x5d1026=_0x8e4133[_0x22a3a3(0x230)],_0x47afd6=_0x8e4133[_0x22a3a3(0x227)],_0x2e3ea9=_0x8e4133[_0x22a3a3(0x22d)],_0x2fb9df=_0x8e4133[_0x22a3a3(0x224)],_0x156006=_0x8e4133['stepsUnknown'],_0x1d78fb=_0x8e4133[_0x22a3a3(0x23a)],_0x2535ad=_0x8e4133[_0x22a3a3(0x209)];let _0xe66bf1=_0x4c85b2+_0x22a3a3(0x1de);const _0x1b3532=_0x4b2538['lZLWp'](_0x4b2538['sJyen'](_0x4c85b2,_0x3cb0b1),0x0)?_0x4b2538['SUjYk'](_0x4c85b2,_0x3cb0b1):0x0;if(_0x4b2538['NCmvn'](_0x3cb0b1,0x0)&&_0x4b2538[_0x22a3a3(0x21a)](_0x1b3532,0x0))_0xe66bf1+='\x20('+chalk[_0x22a3a3(0x1d5)][_0x22a3a3(0x1d4)](_0x3cb0b1+_0x22a3a3(0x215))+',\x20'+chalk[_0x22a3a3(0x1d5)][_0x22a3a3(0x1fb)](_0x1b3532+_0x22a3a3(0x1d3))+')';else(_0x4b2538[_0x22a3a3(0x1fa)](_0x3cb0b1,0x0)||_0x4b2538['InEPp'](_0x1b3532,0x0))&&(_0xe66bf1+=_0x4b2538[_0x22a3a3(0x1f1)](_0x3cb0b1,0x0)?'\x20('+chalk[_0x22a3a3(0x1d5)][_0x22a3a3(0x1d4)](_0x3cb0b1+_0x22a3a3(0x215))+')':'\x20('+chalk[_0x22a3a3(0x1d5)][_0x22a3a3(0x1fb)](_0x1b3532+_0x22a3a3(0x1d3))+')');const _0x173d1e=_0x11d8ba+_0x22a3a3(0x220),_0x1ab692=[];_0x4b2538[_0x22a3a3(0x1f1)](_0x1d78fb,0x0)&&_0x1ab692[_0x22a3a3(0x1f5)](''+chalk[_0x22a3a3(0x1d5)][_0x22a3a3(0x1d4)](_0x1d78fb+_0x22a3a3(0x204)));_0x4b2538[_0x22a3a3(0x21a)](_0x54edef,0x0)&&_0x1ab692[_0x22a3a3(0x1f5)](''+chalk[_0x22a3a3(0x1d5)][_0x22a3a3(0x1d4)](_0x54edef+_0x22a3a3(0x215)));_0x4b2538['tODWu'](_0x5d1026,0x0)&&_0x1ab692['push'](''+chalk[_0x22a3a3(0x1d5)]['green'](_0x5d1026+'\x20passed'));_0x4b2538['lZLWp'](_0x2e3ea9,0x0)&&_0x1ab692[_0x22a3a3(0x1f5)](''+chalk[_0x22a3a3(0x1d5)][_0x22a3a3(0x20c)](_0x2e3ea9+'\x20pending'));_0x4b2538[_0x22a3a3(0x238)](_0x47afd6,0x0)&&_0x1ab692['push'](''+chalk[_0x22a3a3(0x1d5)][_0x22a3a3(0x246)](_0x47afd6+_0x22a3a3(0x20a)));_0x4b2538[_0x22a3a3(0x248)](_0x2fb9df,0x0)&&_0x1ab692[_0x22a3a3(0x1f5)](''+chalk[_0x22a3a3(0x1d5)][_0x22a3a3(0x20c)](_0x2fb9df+'\x20undefined'));_0x4b2538[_0x22a3a3(0x248)](_0x156006,0x0)&&_0x1ab692[_0x22a3a3(0x1f5)](''+chalk['bold']['yellow'](_0x156006+'\x20skipped'));const _0x530c14=_0x4b2538[_0x22a3a3(0x22b)](_0x4b2538[_0x22a3a3(0x22b)](_0x4b2538[_0x22a3a3(0x22b)](_0x173d1e,'('),_0x1ab692[_0x22a3a3(0x23d)](',\x20')),')');console[_0x22a3a3(0x20b)](_0x4b2538['yRMMy'](_0x4b2538['RdexK'](_0x4b2538[_0x22a3a3(0x1df)](_0x4b2538[_0x22a3a3(0x243)]('\x0a',_0xe66bf1),'\x0a'),_0x530c14),'\x0a')),_0x4b2538['vHqXt'](_0x2535ad,![])&&(_0x389848=0x1);}),_0x389848;}async function run(_0x3a5343,_0x2768b6,_0x4386f3){const _0x17ba4a=a5_0x3fe6b2,_0x3bb5da={'IuBrM':function(_0x2fdce8,_0x1cf519){return _0x2fdce8(_0x1cf519);},'RTtBH':function(_0x5b6e92,_0x1ec51b){return _0x5b6e92>_0x1ec51b;},'qnKkJ':'Generating\x20consolidated\x20report...','ZqvKV':_0x17ba4a(0x210),'OnCAc':_0x17ba4a(0x206),'qPnqb':'error\x20removing\x20tcg\x20config\x20file','xUnEe':_0x17ba4a(0x241),'notba':function(_0x57b9f7,_0x2fff4d){return _0x57b9f7-_0x2fff4d;},'vvbbv':function(_0x537499,_0x3f19c0){return _0x537499>=_0x3f19c0;},'PSWwP':function(_0xc764ab,_0x39d98a){return _0xc764ab!=_0x39d98a;},'xTPzb':_0x17ba4a(0x1d6),'koqvi':function(_0x431db4,_0x4c49e1,_0x427940,_0x1aa795,_0x348557,_0x22b12d){return _0x431db4(_0x4c49e1,_0x427940,_0x1aa795,_0x348557,_0x22b12d);}};await _0x4386f3[_0x17ba4a(0x232)](_0x3a5343),helper[_0x17ba4a(0x216)](_0x4386f3[_0x17ba4a(0x213)],_0x3a5343);!helper[_0x17ba4a(0x244)]()&&await _0x4386f3[_0x17ba4a(0x1d9)]();await helper['handleApp'](_0x4386f3[_0x17ba4a(0x222)]);const _0x16413e=helper[_0x17ba4a(0x1dd)](_0x4386f3[_0x17ba4a(0x222)]);!helper['isUndefined'](_0x4386f3[_0x17ba4a(0x222)][_0x17ba4a(0x23b)])&&(process[_0x17ba4a(0x1fd)][_0x17ba4a(0x23e)]=JSON[_0x17ba4a(0x1f0)](_0x4386f3[_0x17ba4a(0x222)]['accessibilityOptions']));const _0x575d9d=await TestHubHandler[_0x17ba4a(0x1f2)](constants[_0x17ba4a(0x1e5)][_0x17ba4a(0x225)],_0x4386f3);let _0xfba2c5=[];if(!helper['isBrowserstackInfra']()){const _0x4d72a7={};_0x4d72a7[_0x17ba4a(0x237)]=[],_0xfba2c5=helper[_0x17ba4a(0x1f7)](Object[_0x17ba4a(0x214)]({},_0x4386f3[_0x17ba4a(0x222)],_0x4d72a7),_0x16413e,constants[_0x17ba4a(0x1e5)]['CUCUMBER']);}else _0xfba2c5=helper['prepareCapabilities'](_0x4386f3[_0x17ba4a(0x222)],_0x16413e,constants['FRAMEWORKS'][_0x17ba4a(0x225)]);if(!_0x4386f3[_0x17ba4a(0x222)])return;const _0x144046=_0x4386f3['config']['parallelsPerPlatform']||helper[_0x17ba4a(0x201)](_0x3a5343,_0x2768b6,_0x4386f3[_0x17ba4a(0x222)],constants[_0x17ba4a(0x1e5)][_0x17ba4a(0x225)])||0x1,_0x1a3b14={'server':helper[_0x17ba4a(0x226)](_0x4386f3[_0x17ba4a(0x222)]),'proxySettings':_0x4386f3[_0x17ba4a(0x222)]['proxySettings'],'maxWorkers':_0x144046,'browserStackLogLevel':_0x4386f3[_0x17ba4a(0x222)][_0x17ba4a(0x205)],'skipSessionName':_0x4386f3[_0x17ba4a(0x222)][_0x17ba4a(0x221)][_0x17ba4a(0x223)],'skipSessionStatus':_0x4386f3['config']['testContextOptions'][_0x17ba4a(0x1d8)],'turboScaleUrl':_0x4386f3[_0x17ba4a(0x222)][_0x17ba4a(0x219)]},_0x2fe460=process['argv'],[_0x5800dc,_0x1b1300]=helper[_0x17ba4a(0x229)](_0x2fe460),_0x4377a7=path['join'](process[_0x17ba4a(0x228)](),_0x3bb5da[_0x17ba4a(0x240)]);if(_0x3bb5da[_0x17ba4a(0x1db)](_0x1b1300[_0x17ba4a(0x1e1)],0x0)){helper['createDir'](_0x4377a7);for(let _0x3ba266=_0x3bb5da[_0x17ba4a(0x1ed)](_0x5800dc[_0x17ba4a(0x1e1)],0x1);_0x3bb5da[_0x17ba4a(0x217)](_0x3ba266,0x0);_0x3ba266--){_0x2fe460[_0x17ba4a(0x208)](_0x5800dc[_0x3ba266],0x2);}}_0x3bb5da['PSWwP'](_0x4386f3['config']['testObservability'],null)?process[_0x17ba4a(0x1fd)][_0x17ba4a(0x20d)]=_0x4386f3[_0x17ba4a(0x222)][_0x17ba4a(0x1f6)]:process['env'][_0x17ba4a(0x20d)]=_0x3bb5da[_0x17ba4a(0x234)];PerformanceTester[_0x17ba4a(0x22a)](PerformanceEvents[_0x17ba4a(0x1e2)]);let _0x5c7935;_0x3bb5da['koqvi'](parallelCucumberRun,_0xfba2c5,_0x1a3b14,_0x4386f3['config'],_0x2fe460,_0x1b1300)[_0x17ba4a(0x1fe)](async _0x45e2c4=>{const _0x493b01=_0x17ba4a;PerformanceTester[_0x493b01(0x22e)](PerformanceEvents[_0x493b01(0x1f4)]),_0x5c7935=_0x45e2c4;const _0x6d5d7e=_0x3bb5da[_0x493b01(0x1ea)](printCucumberStats,_0x45e2c4);process[_0x493b01(0x1eb)]=_0x6d5d7e,_0x3bb5da[_0x493b01(0x1db)](_0x1b1300['length'],0x0)&&(logger[_0x493b01(0x21c)](_0x3bb5da['qnKkJ']),helper[_0x493b01(0x202)](_0x4377a7,_0x1b1300),logger[_0x493b01(0x21c)](_0x3bb5da['ZqvKV']),helper[_0x493b01(0x245)](_0x4377a7));})[_0x17ba4a(0x212)](async()=>{const _0x27e72e=_0x17ba4a;PerformanceTester['start'](PerformanceEvents[_0x27e72e(0x1f4)]),_0x4386f3[_0x27e72e(0x20f)]=helper[_0x27e72e(0x1e6)](_0x5c7935,_0x3bb5da[_0x27e72e(0x1e3)]),testOpsHelper['printBuildLink']();try{await TestHubHandler['stop']();}catch(_0x2ee6c9){logger[_0x27e72e(0x21c)](_0x27e72e(0x203)+util[_0x27e72e(0x1da)](_0x2ee6c9));}try{const {browserstackFolderPath:_0x5f59ca,tcgConfigPath:_0x3698c5}=helper[_0x27e72e(0x23f)]();fs[_0x27e72e(0x200)](_0x3698c5),fs[_0x27e72e(0x1dc)](_0x5f59ca);}catch(_0x38ccdf){logger[_0x27e72e(0x21c)](_0x3bb5da['qPnqb'],_0x38ccdf);}await utilities[_0x27e72e(0x1ee)](_0x4386f3);});}module['exports']=run;