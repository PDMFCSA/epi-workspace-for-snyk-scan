#!/usr/bin/env node
'use strict';function a5_0x5528(_0x5c72ea,_0x340ebf){const _0x2f7e63=a5_0x2f7e();return a5_0x5528=function(_0x552881,_0x174f80){_0x552881=_0x552881-0xca;let _0x1f5ad9=_0x2f7e63[_0x552881];return _0x1f5ad9;},a5_0x5528(_0x5c72ea,_0x340ebf);}const a5_0x327b1b=a5_0x5528;(function(_0xc66593,_0x4e500d){const _0x2cc925=a5_0x5528,_0x36adae=_0xc66593();while(!![]){try{const _0x25422e=-parseInt(_0x2cc925(0x107))/0x1+parseInt(_0x2cc925(0xd2))/0x2*(-parseInt(_0x2cc925(0xdd))/0x3)+parseInt(_0x2cc925(0xf6))/0x4*(-parseInt(_0x2cc925(0x104))/0x5)+parseInt(_0x2cc925(0x125))/0x6+-parseInt(_0x2cc925(0xd0))/0x7+-parseInt(_0x2cc925(0x121))/0x8*(parseInt(_0x2cc925(0x112))/0x9)+parseInt(_0x2cc925(0x12c))/0xa;if(_0x25422e===_0x4e500d)break;else _0x36adae['push'](_0x36adae['shift']());}catch(_0x5ef3b1){_0x36adae['push'](_0x36adae['shift']());}}}(a5_0x2f7e,0xd1f27));const fs=require('fs'),path=require(a5_0x327b1b(0xe6)),util=require(a5_0x327b1b(0xca)),logger=require('../../helpers/logger')[a5_0x327b1b(0x135)],{default:BrowserStackSetup}=require(a5_0x327b1b(0x108)),helper=require(a5_0x327b1b(0xf0)),utilities=require('../../helpers/utilities'),constants=require(a5_0x327b1b(0xd9)),{parallelCucumberRun}=require(a5_0x327b1b(0xd3)),TestHubHandler=require(a5_0x327b1b(0x116)),testOpsHelper=require(a5_0x327b1b(0xef)),chalk=require(a5_0x327b1b(0xd6)),PerformanceTester=require(a5_0x327b1b(0xf8)),PerformanceEvents=require(a5_0x327b1b(0xe5))['EVENTS'];function printCucumberStats(_0xd833bc){const _0x131da3=a5_0x327b1b,_0x1180e8={};_0x1180e8[_0x131da3(0x115)]=function(_0x93063e,_0x4ab8a4){return _0x93063e>_0x4ab8a4;},_0x1180e8[_0x131da3(0xfa)]=function(_0x548eaf,_0x347343){return _0x548eaf-_0x347343;},_0x1180e8['apyBL']=function(_0x29b16b,_0x968e88){return _0x29b16b>_0x968e88;},_0x1180e8['ZtPho']=function(_0x5a8805,_0x585301){return _0x5a8805>_0x585301;},_0x1180e8[_0x131da3(0xe2)]=function(_0x4c9c61,_0x598912){return _0x4c9c61>_0x598912;},_0x1180e8['KDHkM']=function(_0x2afc9c,_0x24cfdc){return _0x2afc9c>_0x24cfdc;},_0x1180e8[_0x131da3(0xcb)]=function(_0x566723,_0x42f98a){return _0x566723>_0x42f98a;},_0x1180e8[_0x131da3(0xd8)]=function(_0x1a68c1,_0x91b475){return _0x1a68c1>_0x91b475;},_0x1180e8[_0x131da3(0x12f)]=function(_0x31716a,_0x17608e){return _0x31716a+_0x17608e;},_0x1180e8[_0x131da3(0xcc)]=function(_0x1f72df,_0x229658){return _0x1f72df+_0x229658;},_0x1180e8['dXtJj']=function(_0xe33829,_0xee3583){return _0xe33829+_0xee3583;},_0x1180e8[_0x131da3(0x136)]=function(_0x472258,_0x362d3f){return _0x472258+_0x362d3f;},_0x1180e8['XjuSO']=function(_0x45b058,_0x59f05d){return _0x45b058+_0x59f05d;},_0x1180e8[_0x131da3(0xf7)]=function(_0x3131dd,_0x440539){return _0x3131dd===_0x440539;},_0x1180e8[_0x131da3(0x10b)]=function(_0x557ed2,_0x8936ea){return _0x557ed2===_0x8936ea;},_0x1180e8[_0x131da3(0x124)]=_0x131da3(0x113);const _0x1fa6cc=_0x1180e8;let _0x3d87c5=0x0;if(_0x1fa6cc[_0x131da3(0x10b)](_0xd833bc['length'],0x0))return _0x3d87c5;return console['log'](chalk[_0x131da3(0x130)][_0x131da3(0xf9)](_0x1fa6cc[_0x131da3(0x124)])),_0xd833bc['forEach'](_0x575a7b=>{const _0x514c71=_0x131da3,_0x3aa744=_0x575a7b[0x0],_0xd623a=_0x575a7b[0x1];console[_0x514c71(0x105)]('\x0a'+chalk[_0x514c71(0x130)][_0x514c71(0xf4)](''+helper[_0x514c71(0x129)](_0x3aa744)));const _0x3b433b=_0xd623a[_0x514c71(0xd1)],_0xd367f9=_0xd623a[_0x514c71(0xf3)],_0x1a6ef2=_0xd623a[_0x514c71(0xeb)],_0x789a88=_0xd623a['stepsFailed'],_0x36c602=_0xd623a[_0x514c71(0xf5)],_0x106004=_0xd623a[_0x514c71(0xf1)],_0x52f6e6=_0xd623a['stepsPending'],_0xff6b45=_0xd623a['stepsUndefined'],_0x43de28=_0xd623a[_0x514c71(0x100)],_0x4eb042=_0xd623a['stepsAmbiguous'],_0x5b8cf5=_0xd623a[_0x514c71(0x122)];let _0x4e6955=_0x3b433b+_0x514c71(0x120);const _0x415afc=_0x1fa6cc['wSySv'](_0x1fa6cc['lAZMI'](_0x3b433b,_0x1a6ef2),0x0)?_0x1fa6cc[_0x514c71(0xfa)](_0x3b433b,_0x1a6ef2):0x0;if(_0x1fa6cc[_0x514c71(0x106)](_0x1a6ef2,0x0)&&_0x1fa6cc[_0x514c71(0x115)](_0x415afc,0x0))_0x4e6955+='\x20('+chalk[_0x514c71(0x130)][_0x514c71(0x10d)](_0x1a6ef2+_0x514c71(0xe1))+',\x20'+chalk[_0x514c71(0x130)][_0x514c71(0x138)](_0x415afc+_0x514c71(0xe8))+')';else(_0x1fa6cc[_0x514c71(0x106)](_0x1a6ef2,0x0)||_0x1fa6cc[_0x514c71(0x106)](_0x415afc,0x0))&&(_0x4e6955+=_0x1fa6cc[_0x514c71(0x106)](_0x1a6ef2,0x0)?'\x20('+chalk['bold'][_0x514c71(0x10d)](_0x1a6ef2+_0x514c71(0xe1))+')':'\x20('+chalk[_0x514c71(0x130)][_0x514c71(0x138)](_0x415afc+_0x514c71(0xe8))+')');const _0x1bd641=_0xd367f9+_0x514c71(0x10e),_0x2e062e=[];_0x1fa6cc[_0x514c71(0x115)](_0x4eb042,0x0)&&_0x2e062e[_0x514c71(0x10c)](''+chalk['bold'][_0x514c71(0x10d)](_0x4eb042+'\x20ambiguous'));_0x1fa6cc['ZtPho'](_0x789a88,0x0)&&_0x2e062e['push'](''+chalk['bold']['red'](_0x789a88+_0x514c71(0xe1)));_0x1fa6cc[_0x514c71(0x106)](_0x36c602,0x0)&&_0x2e062e['push'](''+chalk[_0x514c71(0x130)][_0x514c71(0x138)](_0x36c602+_0x514c71(0xe8)));_0x1fa6cc[_0x514c71(0xe2)](_0x52f6e6,0x0)&&_0x2e062e['push'](''+chalk[_0x514c71(0x130)]['yellow'](_0x52f6e6+'\x20pending'));_0x1fa6cc[_0x514c71(0x11d)](_0x106004,0x0)&&_0x2e062e['push'](''+chalk[_0x514c71(0x130)][_0x514c71(0xe3)](_0x106004+_0x514c71(0xcd)));_0x1fa6cc[_0x514c71(0xcb)](_0xff6b45,0x0)&&_0x2e062e[_0x514c71(0x10c)](''+chalk[_0x514c71(0x130)]['yellow'](_0xff6b45+_0x514c71(0xe0)));_0x1fa6cc[_0x514c71(0xd8)](_0x43de28,0x0)&&_0x2e062e[_0x514c71(0x10c)](''+chalk['bold']['yellow'](_0x43de28+_0x514c71(0xcd)));const _0x4c4ccd=_0x1fa6cc['YjHck'](_0x1fa6cc['YjHck'](_0x1fa6cc[_0x514c71(0xcc)](_0x1bd641,'('),_0x2e062e[_0x514c71(0x131)](',\x20')),')');console[_0x514c71(0x105)](_0x1fa6cc[_0x514c71(0xda)](_0x1fa6cc[_0x514c71(0x136)](_0x1fa6cc[_0x514c71(0x11e)](_0x1fa6cc[_0x514c71(0xcc)]('\x0a',_0x4e6955),'\x0a'),_0x4c4ccd),'\x0a')),_0x1fa6cc[_0x514c71(0xf7)](_0x5b8cf5,![])&&(_0x3d87c5=0x1);}),_0x3d87c5;}async function run(_0x562b55,_0x40ad62,_0x779706){const _0x4ce4eb=a5_0x327b1b,_0x313d43={'QLdqd':function(_0x2e9d11,_0x589a0d){return _0x2e9d11(_0x589a0d);},'DYIlR':function(_0x2872bf,_0x3bf8ab){return _0x2872bf>_0x3bf8ab;},'SJpiO':_0x4ce4eb(0xed),'TvxNa':'Removing\x20tmp\x20directory\x20created\x20for\x20reports','fEYQG':_0x4ce4eb(0x114),'BhdHj':_0x4ce4eb(0x12e),'DtjXR':_0x4ce4eb(0xe7),'NIrCL':function(_0xd9c72e,_0x4ad0d9){return _0xd9c72e-_0x4ad0d9;},'Beszm':function(_0x53e14f,_0x1bac0d){return _0x53e14f>=_0x1bac0d;},'lHlme':function(_0x2f84a5,_0x41aa2e){return _0x2f84a5!=_0x41aa2e;},'WQyBn':'true','KWuMH':function(_0x146df2,_0x30426a,_0x4b443e,_0x25b2ac,_0x266c90,_0x275b0e){return _0x146df2(_0x30426a,_0x4b443e,_0x25b2ac,_0x266c90,_0x275b0e);}};await _0x779706['initialize'](_0x562b55),helper['setUserConfigPath'](_0x779706[_0x4ce4eb(0x13c)],_0x562b55);!helper[_0x4ce4eb(0xdf)]()&&await _0x779706[_0x4ce4eb(0x119)]();await helper[_0x4ce4eb(0x118)](_0x779706[_0x4ce4eb(0x117)]);const _0x3104ee=helper[_0x4ce4eb(0xff)](_0x779706['config']);!helper[_0x4ce4eb(0xee)](_0x779706[_0x4ce4eb(0x117)][_0x4ce4eb(0xdb)])&&(process[_0x4ce4eb(0x103)][_0x4ce4eb(0x12b)]=JSON[_0x4ce4eb(0x11b)](_0x779706[_0x4ce4eb(0x117)][_0x4ce4eb(0xdb)]));const _0x471cac=await TestHubHandler[_0x4ce4eb(0x132)](constants['FRAMEWORKS']['CUCUMBER'],_0x779706),_0x46530a=helper[_0x4ce4eb(0xcf)](_0x779706[_0x4ce4eb(0x117)],_0x3104ee,constants['FRAMEWORKS']['CUCUMBER']);if(!_0x779706[_0x4ce4eb(0x117)])return;const _0x3e1382=_0x779706[_0x4ce4eb(0x117)]['parallelsPerPlatform']||helper[_0x4ce4eb(0xfc)](_0x562b55,_0x40ad62,_0x779706['config'],constants[_0x4ce4eb(0xd4)][_0x4ce4eb(0xdc)])||0x1,_0x1216d8={'server':helper[_0x4ce4eb(0xec)](_0x779706[_0x4ce4eb(0x117)]),'proxySettings':_0x779706[_0x4ce4eb(0x117)][_0x4ce4eb(0xd5)],'maxWorkers':_0x3e1382,'browserStackLogLevel':_0x779706[_0x4ce4eb(0x117)][_0x4ce4eb(0x123)],'skipSessionName':_0x779706[_0x4ce4eb(0x117)][_0x4ce4eb(0x133)][_0x4ce4eb(0x10a)],'skipSessionStatus':_0x779706[_0x4ce4eb(0x117)][_0x4ce4eb(0x133)]['skipSessionStatus'],'turboScaleUrl':_0x779706['config'][_0x4ce4eb(0x139)]},_0x569e58=process[_0x4ce4eb(0x102)],[_0x193585,_0x167097]=helper['parseFormatters'](_0x569e58),_0x401a13=path[_0x4ce4eb(0x131)](process[_0x4ce4eb(0x12d)](),_0x313d43[_0x4ce4eb(0xe4)]);if(_0x313d43[_0x4ce4eb(0xfd)](_0x167097[_0x4ce4eb(0x110)],0x0)){helper['createDir'](_0x401a13);for(let _0x271d91=_0x313d43[_0x4ce4eb(0x101)](_0x193585[_0x4ce4eb(0x110)],0x1);_0x313d43[_0x4ce4eb(0xe9)](_0x271d91,0x0);_0x271d91--){_0x569e58[_0x4ce4eb(0xd7)](_0x193585[_0x271d91],0x2);}}_0x313d43[_0x4ce4eb(0xea)](_0x779706[_0x4ce4eb(0x117)][_0x4ce4eb(0xde)],null)?process['env']['BROWSERSTACK_TEST_OBSERVABILITY_YML']=_0x779706[_0x4ce4eb(0x117)]['testObservability']:process['env'][_0x4ce4eb(0x10f)]=_0x313d43['WQyBn'];PerformanceTester[_0x4ce4eb(0xf2)](PerformanceEvents['SDK_SETUP']);let _0x3cb8e3;_0x313d43[_0x4ce4eb(0xce)](parallelCucumberRun,_0x46530a,_0x1216d8,_0x779706[_0x4ce4eb(0x117)],_0x569e58,_0x167097)[_0x4ce4eb(0x127)](async _0xc1e57c=>{const _0x3670d0=_0x4ce4eb;PerformanceTester['start'](PerformanceEvents[_0x3670d0(0x13b)]),_0x3cb8e3=_0xc1e57c;const _0x2a769b=_0x313d43[_0x3670d0(0xfb)](printCucumberStats,_0xc1e57c);process[_0x3670d0(0x137)]=_0x2a769b,_0x313d43['DYIlR'](_0x167097['length'],0x0)&&(logger[_0x3670d0(0x134)](_0x313d43['SJpiO']),helper['mergeOutputFiles'](_0x401a13,_0x167097),logger[_0x3670d0(0x134)](_0x313d43[_0x3670d0(0x13a)]),helper['removeDir'](_0x401a13));})[_0x4ce4eb(0x11c)](async()=>{const _0x58d0ee=_0x4ce4eb;PerformanceTester[_0x58d0ee(0x109)](PerformanceEvents[_0x58d0ee(0x13b)]),_0x779706[_0x58d0ee(0xfe)]=helper[_0x58d0ee(0x12a)](_0x3cb8e3,_0x313d43[_0x58d0ee(0x128)]),testOpsHelper['printBuildLink']();try{await TestHubHandler['stop']();}catch(_0x545ac0){logger[_0x58d0ee(0x134)](_0x58d0ee(0x126)+util['format'](_0x545ac0));}try{const {browserstackFolderPath:_0x1251c8,tcgConfigPath:_0x1a4b24}=helper['getTCGConfigFilePaths']();fs[_0x58d0ee(0x11f)](_0x1a4b24),fs['rmdirSync'](_0x1251c8);}catch(_0x56e1f2){logger[_0x58d0ee(0x134)](_0x313d43[_0x58d0ee(0x11a)],_0x56e1f2);}await utilities[_0x58d0ee(0x13d)](_0x779706);});}module[a5_0x327b1b(0x111)]=run;function a5_0x2f7e(){const _0x104b87=['scenariosFailed','getHubUrl','Generating\x20consolidated\x20report...','isUndefined','../../helpers/test-observability/utils','../../helpers/helper','stepsSkipped','end','steps','yellow','stepsPassed','1217604HGFwMv','AtFZu','../../helpers/performance/performance-tester','bgWhite','lAZMI','QLdqd','getUserWorkerCount','DYIlR','errorMessage','useW3C','stepsUnknown','NIrCL','argv','env','5PmBlzA','log','apyBL','1050072YPsLNL','../../helpers/BrowserStackSetup','start','skipSessionName','WmXlR','push','red','\x20steps','BROWSERSTACK_TEST_OBSERVABILITY_YML','length','exports','857817zVMhrc','****\x20RESULTS\x20****','cucumber','wSySv','../../helpers/testhub/testhubHandler','config','handleApp','setupTCGAuth','BhdHj','stringify','finally','KDHkM','XjuSO','unlinkSync','\x20scenarios','120KPfzbY','processSuccess','logLevel','knriH','444864OAKriQ','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','then','fEYQG','getPlatformName','getErrorMessageFromResults','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','59024030ZYiBpq','cwd','error\x20removing\x20tcg\x20config\x20file','YjHck','bold','join','launchBuild','testContextOptions','debug','winstonLogger','qYbtg','exitCode','green','turboScaleUrl','TvxNa','SDK_CLEANUP','framework','finalExecution','util','mmDbP','ZBqTk','\x20skipped','KWuMH','prepareCapabilities','10471944NQIKjP','scenarios','119492hZrTUa','../test-runner','FRAMEWORKS','proxySettings','chalk','splice','qDdqj','../utils/constants','dXtJj','accessibilityOptions','CUCUMBER','42RYeEMB','testObservability','isBrowserstackInfra','\x20undefined','\x20failed','QURbM','cyan','DtjXR','../../helpers/performance/constants','path','tmp','\x20passed','Beszm','lHlme'];a5_0x2f7e=function(){return _0x104b87;};return a5_0x2f7e();}