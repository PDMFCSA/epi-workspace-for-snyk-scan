#!/usr/bin/env node
'use strict';const a5_0x3b0af2=a5_0x2c81;(function(_0x2ce6e0,_0x94a01e){const _0x5bc827=a5_0x2c81,_0x1aad0c=_0x2ce6e0();while(!![]){try{const _0x2d3dd6=parseInt(_0x5bc827(0x1d9))/0x1+-parseInt(_0x5bc827(0x1b4))/0x2+-parseInt(_0x5bc827(0x1db))/0x3+-parseInt(_0x5bc827(0x19b))/0x4+parseInt(_0x5bc827(0x200))/0x5*(-parseInt(_0x5bc827(0x1cc))/0x6)+-parseInt(_0x5bc827(0x1f6))/0x7*(parseInt(_0x5bc827(0x1a9))/0x8)+parseInt(_0x5bc827(0x1c5))/0x9;if(_0x2d3dd6===_0x94a01e)break;else _0x1aad0c['push'](_0x1aad0c['shift']());}catch(_0x1f4b0a){_0x1aad0c['push'](_0x1aad0c['shift']());}}}(a5_0x2d8c,0xb43d3));const fs=require('fs'),path=require(a5_0x3b0af2(0x1ed)),util=require(a5_0x3b0af2(0x193)),logger=require(a5_0x3b0af2(0x1bd))['winstonLogger'],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a5_0x3b0af2(0x1f7)),utilities=require(a5_0x3b0af2(0x194)),constants=require('../utils/constants'),{parallelCucumberRun}=require(a5_0x3b0af2(0x1a5)),TestHubHandler=require('../../helpers/testhub/testhubHandler'),testOpsHelper=require('../../helpers/test-observability/utils'),chalk=require(a5_0x3b0af2(0x1f0)),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require(a5_0x3b0af2(0x1de))[a5_0x3b0af2(0x196)];function a5_0x2c81(_0x5f5a1b,_0x20d135){const _0x2d8cb2=a5_0x2d8c();return a5_0x2c81=function(_0x2c81a9,_0x17cc5b){_0x2c81a9=_0x2c81a9-0x191;let _0x2a87ea=_0x2d8cb2[_0x2c81a9];return _0x2a87ea;},a5_0x2c81(_0x5f5a1b,_0x20d135);}function printCucumberStats(_0x5db2d0){const _0x2a105d=a5_0x3b0af2,_0x4e1d01={};_0x4e1d01['Jluim']=function(_0xa48ca8,_0x45ce8c){return _0xa48ca8>_0x45ce8c;},_0x4e1d01[_0x2a105d(0x1cb)]=function(_0x191de1,_0x5b46f4){return _0x191de1-_0x5b46f4;},_0x4e1d01[_0x2a105d(0x1ba)]=function(_0x2cfa35,_0x4cce7e){return _0x2cfa35-_0x4cce7e;},_0x4e1d01[_0x2a105d(0x1b9)]=function(_0x4df2ef,_0x2a402b){return _0x4df2ef>_0x2a402b;},_0x4e1d01['rHoQy']=function(_0x15fc81,_0x3d5500){return _0x15fc81>_0x3d5500;},_0x4e1d01[_0x2a105d(0x1aa)]=function(_0x33a675,_0x4fb531){return _0x33a675>_0x4fb531;},_0x4e1d01['fXtcl']=function(_0x3953f2,_0x264609){return _0x3953f2>_0x264609;},_0x4e1d01[_0x2a105d(0x1dc)]=function(_0xc783c,_0x26f878){return _0xc783c>_0x26f878;},_0x4e1d01[_0x2a105d(0x195)]=function(_0xbffe05,_0x194515){return _0xbffe05>_0x194515;},_0x4e1d01[_0x2a105d(0x1c7)]=function(_0x4efe21,_0x9f2f9e){return _0x4efe21+_0x9f2f9e;},_0x4e1d01[_0x2a105d(0x19a)]=function(_0x4efb9e,_0x5bcaa3){return _0x4efb9e+_0x5bcaa3;},_0x4e1d01[_0x2a105d(0x1f5)]=function(_0x12dc8a,_0xc22e82){return _0x12dc8a+_0xc22e82;},_0x4e1d01['nXOVx']=function(_0x1d57eb,_0x11e58c){return _0x1d57eb+_0x11e58c;},_0x4e1d01[_0x2a105d(0x1a7)]=function(_0x22f2bd,_0x1e64f2){return _0x22f2bd===_0x1e64f2;},_0x4e1d01['pwYAi']=function(_0x266577,_0x455969){return _0x266577===_0x455969;},_0x4e1d01[_0x2a105d(0x1fe)]=_0x2a105d(0x1ab);const _0x50cea3=_0x4e1d01;let _0x4c35ae=0x0;if(_0x50cea3[_0x2a105d(0x1cf)](_0x5db2d0[_0x2a105d(0x1f3)],0x0))return _0x4c35ae;return console[_0x2a105d(0x198)](chalk[_0x2a105d(0x1b8)]['bgWhite'](_0x50cea3[_0x2a105d(0x1fe)])),_0x5db2d0[_0x2a105d(0x1da)](_0x4f96a3=>{const _0x3955da=_0x2a105d,_0x373b23=_0x4f96a3[0x0],_0x1298b0=_0x4f96a3[0x1];console[_0x3955da(0x198)]('\x0a'+chalk[_0x3955da(0x1b8)][_0x3955da(0x1ac)](''+helper['getPlatformName'](_0x373b23)));const _0x43a5e4=_0x1298b0[_0x3955da(0x1c3)],_0x332fff=_0x1298b0['steps'],_0x524203=_0x1298b0[_0x3955da(0x1c2)],_0x3ddde7=_0x1298b0[_0x3955da(0x1e9)],_0x2440b7=_0x1298b0[_0x3955da(0x1e2)],_0x4de657=_0x1298b0[_0x3955da(0x1a4)],_0x3a650a=_0x1298b0['stepsPending'],_0x2044c0=_0x1298b0[_0x3955da(0x1b1)],_0x1b15d6=_0x1298b0[_0x3955da(0x191)],_0x5de381=_0x1298b0[_0x3955da(0x19d)],_0x5ece0a=_0x1298b0['processSuccess'];let _0x2aff89=_0x43a5e4+_0x3955da(0x1d2);const _0x19cf25=_0x50cea3['Jluim'](_0x50cea3[_0x3955da(0x1cb)](_0x43a5e4,_0x524203),0x0)?_0x50cea3[_0x3955da(0x1ba)](_0x43a5e4,_0x524203):0x0;if(_0x50cea3['DyTdJ'](_0x524203,0x0)&&_0x50cea3['rHoQy'](_0x19cf25,0x0))_0x2aff89+='\x20('+chalk[_0x3955da(0x1b8)][_0x3955da(0x1b3)](_0x524203+_0x3955da(0x1a8))+',\x20'+chalk[_0x3955da(0x1b8)]['green'](_0x19cf25+_0x3955da(0x1fa))+')';else(_0x50cea3[_0x3955da(0x1c8)](_0x524203,0x0)||_0x50cea3['rXIUn'](_0x19cf25,0x0))&&(_0x2aff89+=_0x50cea3[_0x3955da(0x1e3)](_0x524203,0x0)?'\x20('+chalk['bold']['red'](_0x524203+'\x20failed')+')':'\x20('+chalk[_0x3955da(0x1b8)][_0x3955da(0x1b5)](_0x19cf25+'\x20passed')+')');const _0x13d546=_0x332fff+_0x3955da(0x1ee),_0x5d94b4=[];_0x50cea3[_0x3955da(0x1c8)](_0x5de381,0x0)&&_0x5d94b4[_0x3955da(0x1a1)](''+chalk['bold'][_0x3955da(0x1b3)](_0x5de381+_0x3955da(0x1ce)));_0x50cea3[_0x3955da(0x1b9)](_0x3ddde7,0x0)&&_0x5d94b4[_0x3955da(0x1a1)](''+chalk[_0x3955da(0x1b8)][_0x3955da(0x1b3)](_0x3ddde7+_0x3955da(0x1a8)));_0x50cea3['rXIUn'](_0x2440b7,0x0)&&_0x5d94b4[_0x3955da(0x1a1)](''+chalk[_0x3955da(0x1b8)][_0x3955da(0x1b5)](_0x2440b7+_0x3955da(0x1fa)));_0x50cea3[_0x3955da(0x1e3)](_0x3a650a,0x0)&&_0x5d94b4[_0x3955da(0x1a1)](''+chalk[_0x3955da(0x1b8)][_0x3955da(0x1ac)](_0x3a650a+_0x3955da(0x1ca)));_0x50cea3[_0x3955da(0x1c8)](_0x4de657,0x0)&&_0x5d94b4[_0x3955da(0x1a1)](''+chalk[_0x3955da(0x1b8)][_0x3955da(0x1fc)](_0x4de657+_0x3955da(0x197)));_0x50cea3[_0x3955da(0x1dc)](_0x2044c0,0x0)&&_0x5d94b4['push'](''+chalk['bold'][_0x3955da(0x1ac)](_0x2044c0+_0x3955da(0x19f)));_0x50cea3['YisvC'](_0x1b15d6,0x0)&&_0x5d94b4['push'](''+chalk['bold'][_0x3955da(0x1ac)](_0x1b15d6+'\x20skipped'));const _0x21a4ed=_0x50cea3['ijpAa'](_0x50cea3[_0x3955da(0x19a)](_0x50cea3[_0x3955da(0x1c7)](_0x13d546,'('),_0x5d94b4[_0x3955da(0x1a6)](',\x20')),')');console[_0x3955da(0x198)](_0x50cea3['eSajx'](_0x50cea3[_0x3955da(0x1ef)](_0x50cea3[_0x3955da(0x1f5)](_0x50cea3[_0x3955da(0x1f5)]('\x0a',_0x2aff89),'\x0a'),_0x21a4ed),'\x0a')),_0x50cea3[_0x3955da(0x1a7)](_0x5ece0a,![])&&(_0x4c35ae=0x1);}),_0x4c35ae;}async function run(_0x21b434,_0x49154b,_0x4c5ba6){const _0x2fc016=a5_0x3b0af2,_0x1fe23e={'baIey':function(_0x4e96f3,_0x5f588b){return _0x4e96f3(_0x5f588b);},'fACSs':function(_0x20bf6a,_0x5a48ed){return _0x20bf6a>_0x5a48ed;},'HJfAi':_0x2fc016(0x1ea),'APXHs':'Removing\x20tmp\x20directory\x20created\x20for\x20reports','xMSyq':_0x2fc016(0x1d6),'wpiCX':_0x2fc016(0x1d4),'IwgXL':_0x2fc016(0x1d0),'FezkD':function(_0x5c1a89,_0x8a781b){return _0x5c1a89-_0x8a781b;},'VCbWG':function(_0x10d829,_0xbb0fd9){return _0x10d829>=_0xbb0fd9;},'mnecJ':function(_0x5387ed,_0x35410b){return _0x5387ed!=_0x35410b;},'yeRQv':_0x2fc016(0x1bc),'XDVSh':function(_0x544e89,_0xb537ce,_0x4a5992,_0x270af1,_0x20d6da,_0x5435ff){return _0x544e89(_0xb537ce,_0x4a5992,_0x270af1,_0x20d6da,_0x5435ff);}};await _0x4c5ba6['initialize'](_0x21b434),helper['setUserConfigPath'](_0x4c5ba6[_0x2fc016(0x1be)],_0x21b434);!helper[_0x2fc016(0x1c4)]()&&await _0x4c5ba6['setupTCGAuth']();await helper[_0x2fc016(0x1a3)](_0x4c5ba6[_0x2fc016(0x1af)]);const _0x4e2285=helper['useW3C'](_0x4c5ba6[_0x2fc016(0x1af)]);!helper['isUndefined'](_0x4c5ba6[_0x2fc016(0x1af)][_0x2fc016(0x1b0)])&&(process['env'][_0x2fc016(0x1d5)]=JSON['stringify'](_0x4c5ba6[_0x2fc016(0x1af)][_0x2fc016(0x1b0)]));const _0x51ed2f=await TestHubHandler[_0x2fc016(0x1f1)](constants[_0x2fc016(0x1c6)]['CUCUMBER'],_0x4c5ba6),_0x4c71b0=helper[_0x2fc016(0x1fd)](_0x4c5ba6[_0x2fc016(0x1af)],_0x4e2285,constants[_0x2fc016(0x1c6)][_0x2fc016(0x1e6)]);if(!_0x4c5ba6[_0x2fc016(0x1af)])return;const _0x5b2b48=_0x4c5ba6['config']['parallelsPerPlatform']||helper['getUserWorkerCount'](_0x21b434,_0x49154b,_0x4c5ba6['config'],constants[_0x2fc016(0x1c6)]['CUCUMBER'])||0x1,_0x3816ac={'server':helper[_0x2fc016(0x1d7)](_0x4c5ba6[_0x2fc016(0x1af)]),'proxySettings':_0x4c5ba6['config'][_0x2fc016(0x1d3)],'maxWorkers':_0x5b2b48,'browserStackLogLevel':_0x4c5ba6[_0x2fc016(0x1af)]['logLevel'],'skipSessionName':_0x4c5ba6[_0x2fc016(0x1af)]['testContextOptions'][_0x2fc016(0x1d8)],'skipSessionStatus':_0x4c5ba6['config'][_0x2fc016(0x1a2)]['skipSessionStatus'],'turboScaleUrl':_0x4c5ba6[_0x2fc016(0x1af)][_0x2fc016(0x1f8)]},_0x2b8fbb=process[_0x2fc016(0x1ec)],[_0x4feed1,_0x2dfdda]=helper['parseFormatters'](_0x2b8fbb),_0x4b434b=path[_0x2fc016(0x1a6)](process[_0x2fc016(0x1b7)](),_0x1fe23e[_0x2fc016(0x1e5)]);if(_0x1fe23e['fACSs'](_0x2dfdda[_0x2fc016(0x1f3)],0x0)){helper['createDir'](_0x4b434b);for(let _0x51e6dc=_0x1fe23e[_0x2fc016(0x1f4)](_0x4feed1[_0x2fc016(0x1f3)],0x1);_0x1fe23e['VCbWG'](_0x51e6dc,0x0);_0x51e6dc--){_0x2b8fbb[_0x2fc016(0x1b2)](_0x4feed1[_0x51e6dc],0x2);}}_0x1fe23e[_0x2fc016(0x1a0)](_0x4c5ba6['config']['testObservability'],null)?process[_0x2fc016(0x1c1)][_0x2fc016(0x1d1)]=_0x4c5ba6[_0x2fc016(0x1af)][_0x2fc016(0x201)]:process[_0x2fc016(0x1c1)][_0x2fc016(0x1d1)]=_0x1fe23e[_0x2fc016(0x1fb)];PerformanceTester[_0x2fc016(0x1b6)](PerformanceEvents[_0x2fc016(0x1e0)]);let _0x5e5bfa;_0x1fe23e[_0x2fc016(0x1ad)](parallelCucumberRun,_0x4c71b0,_0x3816ac,_0x4c5ba6[_0x2fc016(0x1af)],_0x2b8fbb,_0x2dfdda)['then'](async _0x28381c=>{const _0x316017=_0x2fc016;PerformanceTester[_0x316017(0x1cd)](PerformanceEvents[_0x316017(0x1e4)]),_0x5e5bfa=_0x28381c;const _0x11aeea=_0x1fe23e[_0x316017(0x1bb)](printCucumberStats,_0x28381c);process[_0x316017(0x1eb)]=_0x11aeea,_0x1fe23e['fACSs'](_0x2dfdda[_0x316017(0x1f3)],0x0)&&(logger[_0x316017(0x19e)](_0x1fe23e[_0x316017(0x1ae)]),helper[_0x316017(0x1bf)](_0x4b434b,_0x2dfdda),logger[_0x316017(0x19e)](_0x1fe23e[_0x316017(0x199)]),helper[_0x316017(0x1dd)](_0x4b434b));})['finally'](async()=>{const _0x53544d=_0x2fc016;PerformanceTester[_0x53544d(0x1cd)](PerformanceEvents['SDK_CLEANUP']),_0x4c5ba6[_0x53544d(0x1df)]=helper[_0x53544d(0x192)](_0x5e5bfa,_0x1fe23e[_0x53544d(0x1e7)]),testOpsHelper[_0x53544d(0x1e1)]();try{await TestHubHandler[_0x53544d(0x1c9)]();}catch(_0x325837){logger[_0x53544d(0x19e)]('Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20'+util[_0x53544d(0x1ff)](_0x325837));}try{const {browserstackFolderPath:_0x17c596,tcgConfigPath:_0x30e5f4}=helper[_0x53544d(0x19c)]();fs['unlinkSync'](_0x30e5f4),fs[_0x53544d(0x1f2)](_0x17c596);}catch(_0x51a6a0){logger[_0x53544d(0x19e)](_0x1fe23e[_0x53544d(0x1e8)],_0x51a6a0);}await utilities[_0x53544d(0x1c0)](_0x4c5ba6);});}function a5_0x2d8c(){const _0xbbaff3=['5621244iSpCrx','getTCGConfigFilePaths','stepsAmbiguous','debug','\x20undefined','mnecJ','push','testContextOptions','handleApp','stepsSkipped','../test-runner','join','VdKNG','\x20failed','16ZyIARK','rXIUn','****\x20RESULTS\x20****','yellow','XDVSh','HJfAi','config','accessibilityOptions','stepsUndefined','splice','red','129758vLlWDv','green','end','cwd','bold','DyTdJ','jOXAp','baIey','true','../../helpers/logger','framework','mergeOutputFiles','finalExecution','env','scenariosFailed','scenarios','isBrowserstackInfra','25055856FKDtEF','FRAMEWORKS','ijpAa','Jluim','stop','\x20pending','zGiEW','3222sXZLGr','start','\x20ambiguous','pwYAi','tmp','BROWSERSTACK_TEST_OBSERVABILITY_YML','\x20scenarios','proxySettings','error\x20removing\x20tcg\x20config\x20file','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','cucumber','getHubUrl','skipSessionName','827254rLZCoe','forEach','45936cvFgud','XrvKE','removeDir','../../helpers/performance/constants','errorMessage','SDK_SETUP','printBuildLink','stepsPassed','fXtcl','SDK_CLEANUP','IwgXL','CUCUMBER','xMSyq','wpiCX','stepsFailed','Generating\x20consolidated\x20report...','exitCode','argv','path','\x20steps','nXOVx','chalk','launchBuild','rmdirSync','length','FezkD','eSajx','1350902OuZYPG','../../helpers/helper','turboScaleUrl','exports','\x20passed','yeRQv','cyan','prepareCapabilities','AVIMt','format','9325WWfwKL','testObservability','stepsUnknown','getErrorMessageFromResults','util','../../helpers/utilities','YisvC','EVENTS','\x20skipped','log','APXHs','HmqDo'];a5_0x2d8c=function(){return _0xbbaff3;};return a5_0x2d8c();}module[a5_0x3b0af2(0x1f9)]=run;