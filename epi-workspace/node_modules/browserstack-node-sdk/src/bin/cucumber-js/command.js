#!/usr/bin/env node
'use strict';function a5_0x2887(_0x5cdbba,_0x1de83a){const _0x44a310=a5_0x44a3();return a5_0x2887=function(_0x2887dd,_0x257666){_0x2887dd=_0x2887dd-0x9e;let _0x42426e=_0x44a310[_0x2887dd];return _0x42426e;},a5_0x2887(_0x5cdbba,_0x1de83a);}const a5_0x6c1fa3=a5_0x2887;(function(_0x5c4150,_0x161b47){const _0xb19fcf=a5_0x2887,_0xde668d=_0x5c4150();while(!![]){try{const _0x1279ee=-parseInt(_0xb19fcf(0x124))/0x1*(-parseInt(_0xb19fcf(0xc8))/0x2)+parseInt(_0xb19fcf(0xe1))/0x3*(parseInt(_0xb19fcf(0xc9))/0x4)+parseInt(_0xb19fcf(0xec))/0x5+-parseInt(_0xb19fcf(0xb6))/0x6*(-parseInt(_0xb19fcf(0x118))/0x7)+parseInt(_0xb19fcf(0xc6))/0x8*(-parseInt(_0xb19fcf(0xa8))/0x9)+parseInt(_0xb19fcf(0xe8))/0xa+-parseInt(_0xb19fcf(0xc2))/0xb*(parseInt(_0xb19fcf(0xbd))/0xc);if(_0x1279ee===_0x161b47)break;else _0xde668d['push'](_0xde668d['shift']());}catch(_0x50d35c){_0xde668d['push'](_0xde668d['shift']());}}}(a5_0x44a3,0xeed21));const fs=require('fs'),path=require(a5_0x6c1fa3(0x10f)),util=require(a5_0x6c1fa3(0xc0)),logger=require(a5_0x6c1fa3(0xdb))[a5_0x6c1fa3(0xf8)],{default:BrowserStackSetup}=require(a5_0x6c1fa3(0xa2)),helper=require(a5_0x6c1fa3(0xea)),utilities=require(a5_0x6c1fa3(0xb9)),constants=require(a5_0x6c1fa3(0xeb)),{parallelCucumberRun}=require('../test-runner'),TestHubHandler=require(a5_0x6c1fa3(0x122)),testOpsHelper=require(a5_0x6c1fa3(0xc1)),chalk=require('chalk'),PerformanceTester=require(a5_0x6c1fa3(0xe2)),PerformanceEvents=require(a5_0x6c1fa3(0xa9))[a5_0x6c1fa3(0xbf)];function a5_0x44a3(){const _0x4040b3=['stepsFailed','skipSessionStatus','\x20skipped','winstonLogger','xwEyG','ISbTp','then','steps','\x20steps','parallelsPerPlatform','kHfqN','oiqfy','nXXwq','ANfaJ','stepsPassed','tmp','red','start','turboScaleUrl','length','ofzwI','bold','scenariosFailed','wbrLu','hBntD','testContextOptions','path','green','debug','ZNmzN','getPlatformName','prepareCapabilities','splice','printBuildLink','parseFormatters','6388879yDKYIa','cucumber','setupTCGAuth','DIfWG','oUWFZ','****\x20RESULTS\x20****','true','Removing\x20tmp\x20directory\x20created\x20for\x20reports','stepsPending','RJBtS','../../helpers/testhub/testhubHandler','Generating\x20consolidated\x20report...','50442uhpLWz','stepsUndefined','unlinkSync','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','cwd','getHubUrl','../../helpers/BrowserStackSetup','scenarios','getErrorMessageFromResults','LQsvW','forEach','hnqDJ','17163ejjUUM','../../helpers/performance/constants','processSuccess','rnqio','stringify','bSupo','accessibilityOptions','\x20ambiguous','KlRWE','push','CUCUMBER','uSSnL','join','handleApp','6NyKLhS','stop','error\x20removing\x20tcg\x20config\x20file','../../helpers/utilities','testObservability','format','launchBuild','24xPXTcV','ugnpe','EVENTS','util','../../helpers/test-observability/utils','26419162DJfukx','config','SDK_SETUP','aTwQr','184NmwoJw','cucumber-js','70vfyGPv','65656JUPrpx','stepsSkipped','\x20passed','finalExecution','createDir','EChgN','OHUeV','\x20scenarios','SDK_CLEANUP','BROWSERSTACK_TEST_OBSERVABILITY_YML','finally','env','log','AczPp','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','errorMessage','initialize','getUserWorkerCount','../../helpers/logger','cyan','setUserConfigPath','naSXA','isUndefined','exports','189xOVBos','../../helpers/performance/performance-tester','EzHee','exitCode','isBrowserstackInfra','liNZv','TSNUX','5036190hMmqJK','yellow','../../helpers/helper','../utils/constants','8048430QGgULS','stepsUnknown','stepsAmbiguous','framework','\x20failed','hMMMt','end','useW3C','DWIuA'];a5_0x44a3=function(){return _0x4040b3;};return a5_0x44a3();}function printCucumberStats(_0x5ccec4){const _0x46c2bc=a5_0x6c1fa3,_0x2ecf55={};_0x2ecf55[_0x46c2bc(0xf4)]=function(_0x5b31be,_0x4fe42a){return _0x5b31be>_0x4fe42a;},_0x2ecf55[_0x46c2bc(0xce)]=function(_0xc7ab1f,_0x2b1b9d){return _0xc7ab1f-_0x2b1b9d;},_0x2ecf55['aTwQr']=function(_0x413b1b,_0x26b264){return _0x413b1b-_0x26b264;},_0x2ecf55[_0x46c2bc(0xde)]=function(_0x317bad,_0x40e894){return _0x317bad>_0x40e894;},_0x2ecf55[_0x46c2bc(0xff)]=function(_0x4e3487,_0x31fc72){return _0x4e3487>_0x31fc72;},_0x2ecf55['hBntD']=function(_0x9b34c3,_0x445481){return _0x9b34c3>_0x445481;},_0x2ecf55[_0x46c2bc(0x109)]=function(_0x132c01,_0x3cdacf){return _0x132c01>_0x3cdacf;},_0x2ecf55[_0x46c2bc(0xa5)]=function(_0x51c1b7,_0x5b124e){return _0x51c1b7>_0x5b124e;},_0x2ecf55[_0x46c2bc(0xe3)]=function(_0x489575,_0x20f6cb){return _0x489575>_0x20f6cb;},_0x2ecf55['OHUeV']=function(_0x1785ba,_0x4a62dc){return _0x1785ba>_0x4a62dc;},_0x2ecf55[_0x46c2bc(0xe6)]=function(_0x81dd67,_0x49311c){return _0x81dd67>_0x49311c;},_0x2ecf55[_0x46c2bc(0x11b)]=function(_0xa4dfb0,_0xf4e6ab){return _0xa4dfb0+_0xf4e6ab;},_0x2ecf55[_0x46c2bc(0xab)]=function(_0x36118b,_0xa1792e){return _0x36118b+_0xa1792e;},_0x2ecf55['TSNUX']=function(_0x48a057,_0x5c500b){return _0x48a057+_0x5c500b;},_0x2ecf55[_0x46c2bc(0xf1)]=function(_0x5c7135,_0x530820){return _0x5c7135+_0x530820;},_0x2ecf55['KlRWE']=function(_0x10465c,_0x20f121){return _0x10465c+_0x20f121;},_0x2ecf55[_0x46c2bc(0x10c)]=function(_0x3a5da7,_0x17d846){return _0x3a5da7+_0x17d846;},_0x2ecf55[_0x46c2bc(0xf9)]=function(_0x4c1f16,_0x59036b){return _0x4c1f16===_0x59036b;},_0x2ecf55[_0x46c2bc(0x112)]=_0x46c2bc(0x11d);const _0x145fb5=_0x2ecf55;let _0xe3c032=0x0;if(_0x145fb5[_0x46c2bc(0xf9)](_0x5ccec4['length'],0x0))return _0xe3c032;return console[_0x46c2bc(0xd5)](chalk[_0x46c2bc(0x10a)]['bgWhite'](_0x145fb5[_0x46c2bc(0x112)])),_0x5ccec4[_0x46c2bc(0xa6)](_0x2739b5=>{const _0x309059=_0x46c2bc,_0x34d8a7=_0x2739b5[0x0],_0x2668b8=_0x2739b5[0x1];console['log']('\x0a'+chalk['bold'][_0x309059(0xe9)](''+helper[_0x309059(0x113)](_0x34d8a7)));const _0x475c4e=_0x2668b8[_0x309059(0xa3)],_0x4bbe2e=_0x2668b8[_0x309059(0xfc)],_0x2574a6=_0x2668b8[_0x309059(0x10b)],_0x1733b4=_0x2668b8[_0x309059(0xf5)],_0xe8b5f3=_0x2668b8[_0x309059(0x103)],_0x21b942=_0x2668b8[_0x309059(0xca)],_0x2e6656=_0x2668b8[_0x309059(0x120)],_0x254890=_0x2668b8[_0x309059(0x125)],_0x15cd3f=_0x2668b8[_0x309059(0xed)],_0x4dd2be=_0x2668b8[_0x309059(0xee)],_0x410efe=_0x2668b8[_0x309059(0xaa)];let _0x3852e4=_0x475c4e+_0x309059(0xd0);const _0x228a3a=_0x145fb5[_0x309059(0xf4)](_0x145fb5[_0x309059(0xce)](_0x475c4e,_0x2574a6),0x0)?_0x145fb5[_0x309059(0xc5)](_0x475c4e,_0x2574a6):0x0;if(_0x145fb5['DWIuA'](_0x2574a6,0x0)&&_0x145fb5[_0x309059(0xde)](_0x228a3a,0x0))_0x3852e4+='\x20('+chalk['bold'][_0x309059(0x105)](_0x2574a6+_0x309059(0xf0))+',\x20'+chalk[_0x309059(0x10a)][_0x309059(0x110)](_0x228a3a+_0x309059(0xcb))+')';else(_0x145fb5[_0x309059(0xde)](_0x2574a6,0x0)||_0x145fb5[_0x309059(0xde)](_0x228a3a,0x0))&&(_0x3852e4+=_0x145fb5[_0x309059(0xff)](_0x2574a6,0x0)?'\x20('+chalk['bold'][_0x309059(0x105)](_0x2574a6+_0x309059(0xf0))+')':'\x20('+chalk[_0x309059(0x10a)][_0x309059(0x110)](_0x228a3a+_0x309059(0xcb))+')');const _0x56e1e5=_0x4bbe2e+_0x309059(0xfd),_0x6b171=[];_0x145fb5[_0x309059(0x10d)](_0x4dd2be,0x0)&&_0x6b171['push'](''+chalk[_0x309059(0x10a)][_0x309059(0x105)](_0x4dd2be+_0x309059(0xaf)));_0x145fb5[_0x309059(0x109)](_0x1733b4,0x0)&&_0x6b171['push'](''+chalk[_0x309059(0x10a)][_0x309059(0x105)](_0x1733b4+_0x309059(0xf0)));_0x145fb5[_0x309059(0x109)](_0xe8b5f3,0x0)&&_0x6b171[_0x309059(0xb1)](''+chalk[_0x309059(0x10a)][_0x309059(0x110)](_0xe8b5f3+'\x20passed'));_0x145fb5[_0x309059(0xa5)](_0x2e6656,0x0)&&_0x6b171['push'](''+chalk[_0x309059(0x10a)][_0x309059(0xe9)](_0x2e6656+'\x20pending'));_0x145fb5[_0x309059(0xe3)](_0x21b942,0x0)&&_0x6b171['push'](''+chalk['bold'][_0x309059(0xdc)](_0x21b942+'\x20skipped'));_0x145fb5[_0x309059(0xcf)](_0x254890,0x0)&&_0x6b171['push'](''+chalk[_0x309059(0x10a)][_0x309059(0xe9)](_0x254890+'\x20undefined'));_0x145fb5[_0x309059(0xe6)](_0x15cd3f,0x0)&&_0x6b171[_0x309059(0xb1)](''+chalk[_0x309059(0x10a)][_0x309059(0xe9)](_0x15cd3f+_0x309059(0xf7)));const _0x57fc91=_0x145fb5[_0x309059(0x11b)](_0x145fb5['rnqio'](_0x145fb5[_0x309059(0xe7)](_0x56e1e5,'('),_0x6b171[_0x309059(0xb4)](',\x20')),')');console['log'](_0x145fb5[_0x309059(0xab)](_0x145fb5['hMMMt'](_0x145fb5[_0x309059(0xb0)](_0x145fb5[_0x309059(0x10c)]('\x0a',_0x3852e4),'\x0a'),_0x57fc91),'\x0a')),_0x145fb5['xwEyG'](_0x410efe,![])&&(_0xe3c032=0x1);}),_0xe3c032;}async function run(_0x2858bd,_0x1886be){const _0x17feda=a5_0x6c1fa3,_0x4887b0={'uSSnL':function(_0xbfd328,_0xd921b){return _0xbfd328(_0xd921b);},'oUWFZ':function(_0x1920fe,_0x171702){return _0x1920fe>_0x171702;},'oiqfy':_0x17feda(0x123),'ISbTp':_0x17feda(0x11f),'AczPp':_0x17feda(0x119),'RJBtS':_0x17feda(0xb8),'ugnpe':_0x17feda(0xc7),'elMkn':_0x17feda(0x104),'bSupo':function(_0x473db9,_0x4428b6){return _0x473db9-_0x4428b6;},'nXXwq':function(_0x25c784,_0x2411e8){return _0x25c784>=_0x2411e8;},'xGbEn':function(_0x3ccbcf,_0x1e2f2a){return _0x3ccbcf!=_0x1e2f2a;},'hnqDJ':_0x17feda(0x11e),'ANfaJ':function(_0x2664a5,_0x5144f8,_0x5acc15,_0xbad1d1,_0x4ebdff,_0x21015b){return _0x2664a5(_0x5144f8,_0x5acc15,_0xbad1d1,_0x4ebdff,_0x21015b);}},_0x447538=new BrowserStackSetup(_0x2858bd,_0x4887b0[_0x17feda(0xbe)]);await _0x447538[_0x17feda(0xd9)](),helper[_0x17feda(0xdd)](_0x447538[_0x17feda(0xef)],_0x2858bd);!helper[_0x17feda(0xe5)]()&&await _0x447538[_0x17feda(0x11a)]();await helper[_0x17feda(0xb5)](_0x447538['config']);const _0x349d29=helper[_0x17feda(0xf3)](_0x447538[_0x17feda(0xc3)]),_0xc22add=helper[_0x17feda(0x114)](_0x447538['config'],_0x349d29,constants['FRAMEWORKS'][_0x17feda(0xb2)]);if(!_0x447538[_0x17feda(0xc3)])return;const _0x51049f=_0x447538[_0x17feda(0xc3)][_0x17feda(0xfe)]||helper[_0x17feda(0xda)](_0x2858bd,_0x1886be,_0x447538[_0x17feda(0xc3)],constants['FRAMEWORKS'][_0x17feda(0xb2)])||0x1,_0x1c4e04={'server':helper[_0x17feda(0xa1)](_0x447538[_0x17feda(0xc3)]),'proxySettings':_0x447538['config']['proxySettings'],'maxWorkers':_0x51049f,'browserStackLogLevel':_0x447538[_0x17feda(0xc3)]['logLevel'],'skipSessionName':_0x447538[_0x17feda(0xc3)][_0x17feda(0x10e)]['skipSessionName'],'skipSessionStatus':_0x447538[_0x17feda(0xc3)][_0x17feda(0x10e)][_0x17feda(0xf6)],'turboScaleUrl':_0x447538[_0x17feda(0xc3)][_0x17feda(0x107)]},_0xdc8715=process['argv'],[_0x500faa,_0x354948]=helper[_0x17feda(0x117)](_0xdc8715),_0x4644c9=path[_0x17feda(0xb4)](process[_0x17feda(0xa0)](),_0x4887b0['elMkn']);if(_0x4887b0[_0x17feda(0x11c)](_0x354948['length'],0x0)){helper[_0x17feda(0xcd)](_0x4644c9);for(let _0x41a7fa=_0x4887b0[_0x17feda(0xad)](_0x500faa[_0x17feda(0x108)],0x1);_0x4887b0[_0x17feda(0x101)](_0x41a7fa,0x0);_0x41a7fa--){_0xdc8715[_0x17feda(0x115)](_0x500faa[_0x41a7fa],0x2);}}!helper[_0x17feda(0xdf)](_0x447538[_0x17feda(0xc3)][_0x17feda(0xae)])&&(process[_0x17feda(0xd4)][_0x17feda(0xd7)]=JSON[_0x17feda(0xac)](_0x447538[_0x17feda(0xc3)][_0x17feda(0xae)]));_0x4887b0['xGbEn'](_0x447538['config']['testObservability'],null)?process[_0x17feda(0xd4)][_0x17feda(0xd2)]=_0x447538[_0x17feda(0xc3)][_0x17feda(0xba)]:process['env'][_0x17feda(0xd2)]=_0x4887b0[_0x17feda(0xa7)];const _0x55f7e3=await TestHubHandler[_0x17feda(0xbc)](constants['FRAMEWORKS']['CUCUMBER'],_0x447538);PerformanceTester[_0x17feda(0xf2)](PerformanceEvents[_0x17feda(0xc4)]);let _0x364739;_0x4887b0[_0x17feda(0x102)](parallelCucumberRun,_0xc22add,_0x1c4e04,_0x447538['config'],_0xdc8715,_0x354948)[_0x17feda(0xfb)](async _0x1b488e=>{const _0x18d0b1=_0x17feda;PerformanceTester[_0x18d0b1(0x106)](PerformanceEvents[_0x18d0b1(0xd1)]),_0x364739=_0x1b488e;const _0xa75dfb=_0x4887b0[_0x18d0b1(0xb3)](printCucumberStats,_0x1b488e);process[_0x18d0b1(0xe4)]=_0xa75dfb,_0x4887b0['oUWFZ'](_0x354948[_0x18d0b1(0x108)],0x0)&&(logger[_0x18d0b1(0x111)](_0x4887b0[_0x18d0b1(0x100)]),helper['mergeOutputFiles'](_0x4644c9,_0x354948),logger['debug'](_0x4887b0[_0x18d0b1(0xfa)]),helper['removeDir'](_0x4644c9));})[_0x17feda(0xd3)](async()=>{const _0x1d649c=_0x17feda;PerformanceTester['start'](PerformanceEvents[_0x1d649c(0xd1)]),_0x447538[_0x1d649c(0xd8)]=helper[_0x1d649c(0xa4)](_0x364739,_0x4887b0[_0x1d649c(0xd6)]),testOpsHelper[_0x1d649c(0x116)]();try{await TestHubHandler[_0x1d649c(0xb7)]();}catch(_0x345778){logger[_0x1d649c(0x111)](_0x1d649c(0x9f)+util[_0x1d649c(0xbb)](_0x345778));}try{const {browserstackFolderPath:_0xd12ce2,tcgConfigPath:_0x4314c1}=helper['getTCGConfigFilePaths']();fs[_0x1d649c(0x9e)](_0x4314c1),fs['rmdirSync'](_0xd12ce2);}catch(_0x1b1b3c){logger['debug'](_0x4887b0[_0x1d649c(0x121)],_0x1b1b3c);}await utilities[_0x1d649c(0xcc)](_0x447538);});}module[a5_0x6c1fa3(0xe0)]=run;