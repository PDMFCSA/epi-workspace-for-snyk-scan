#!/usr/bin/env node
'use strict';const a5_0x3e40f9=a5_0x2f94;(function(_0x109409,_0x2a8ebc){const _0x1e8fc7=a5_0x2f94,_0x50e69b=_0x109409();while(!![]){try{const _0x3d2d02=parseInt(_0x1e8fc7(0x178))/0x1+-parseInt(_0x1e8fc7(0x1c2))/0x2+-parseInt(_0x1e8fc7(0x199))/0x3+-parseInt(_0x1e8fc7(0x1ae))/0x4+-parseInt(_0x1e8fc7(0x194))/0x5+-parseInt(_0x1e8fc7(0x1c7))/0x6+parseInt(_0x1e8fc7(0x192))/0x7;if(_0x3d2d02===_0x2a8ebc)break;else _0x50e69b['push'](_0x50e69b['shift']());}catch(_0xcb8f5e){_0x50e69b['push'](_0x50e69b['shift']());}}}(a5_0x3f18,0x63639));function a5_0x2f94(_0x498f45,_0x14d59e){const _0x3f184b=a5_0x3f18();return a5_0x2f94=function(_0x2f94fb,_0x427232){_0x2f94fb=_0x2f94fb-0x165;let _0x1623a3=_0x3f184b[_0x2f94fb];return _0x1623a3;},a5_0x2f94(_0x498f45,_0x14d59e);}const fs=require('fs'),path=require(a5_0x3e40f9(0x16d)),util=require('util'),logger=require(a5_0x3e40f9(0x1cd))[a5_0x3e40f9(0x1b1)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a5_0x3e40f9(0x196)),utilities=require(a5_0x3e40f9(0x18f)),constants=require(a5_0x3e40f9(0x181)),{parallelCucumberRun}=require(a5_0x3e40f9(0x1b2)),TestHubHandler=require(a5_0x3e40f9(0x19a)),testOpsHelper=require(a5_0x3e40f9(0x1b6)),chalk=require(a5_0x3e40f9(0x1a7)),PerformanceTester=require(a5_0x3e40f9(0x1a3)),PerformanceEvents=require(a5_0x3e40f9(0x19f))[a5_0x3e40f9(0x177)];function a5_0x3f18(){const _0x4baee8=['platforms','unlinkSync','\x20pending','length','isUndefined','scenariosFailed','EXHEz','config','bold','SDK_SETUP','\x20undefined','cyan','Generating\x20consolidated\x20report...','pkEUo','path','accessibilityOptions','mergeOutputFiles','jkbxC','log','forEach','YEsId','FiDuO','push','HvepV','EVENTS','421500aAdWab','CUCUMBER','useW3C','skipSessionStatus','debug','prepareCapabilities','ETbnv','getPlatformName','getErrorMessageFromResults','../utils/constants','getTCGConfigFilePaths','stepsSkipped','true','stringify','kYkFr','cwd','stepsPending','UZbYL','stepsFailed','getUserWorkerCount','ibesw','yfgjF','pkjPB','../../helpers/utilities','XRhPt','start','10263799atSxkR','KtoZT','2166925fSWzDK','Wnzmg','../../helpers/helper','SDK_CLEANUP','format','1749078KFzFwj','../../helpers/testhub/testhubHandler','exitCode','cucumber','testContextOptions','\x20skipped','../../helpers/performance/constants','****\x20RESULTS\x20****','isBrowserstackInfra','red','../../helpers/performance/performance-tester','end','wNtuP','BROWSERSTACK_TEST_OBSERVABILITY_YML','chalk','\x20passed','setupTCGAuth','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','CIQUK','CEaIA','stepsAmbiguous','18472ywCiXq','launchBuild','processSuccess','winstonLogger','../test-runner','\x20scenarios','testObservability','setUserConfigPath','../../helpers/test-observability/utils','\x20failed','initialize','yellow','rmdirSync','assign','ZMfgn','proxySettings','env','logLevel','turboScaleUrl','JOTgT','786864HqEgKY','join','FRAMEWORKS','OZLlD','tmp','397194qtmbdT','splice','exports','CnsTJ','OdgdA','getHubUrl','../../helpers/logger','\x20steps','parseFormatters','green'];a5_0x3f18=function(){return _0x4baee8;};return a5_0x3f18();}function printCucumberStats(_0x2c85b3){const _0xf47e22=a5_0x3e40f9,_0x2a3219={};_0x2a3219[_0xf47e22(0x1ca)]=function(_0x543d41,_0x3bc65c){return _0x543d41>_0x3bc65c;},_0x2a3219[_0xf47e22(0x16c)]=function(_0x4228e3,_0x29999f){return _0x4228e3-_0x29999f;},_0x2a3219[_0xf47e22(0x1a5)]=function(_0x3da2d6,_0x4852de){return _0x3da2d6>_0x4852de;},_0x2a3219[_0xf47e22(0x173)]=function(_0x23fc26,_0x544d8c){return _0x23fc26>_0x544d8c;},_0x2a3219[_0xf47e22(0x1cb)]=function(_0x27a7ab,_0x4c8375){return _0x27a7ab>_0x4c8375;},_0x2a3219[_0xf47e22(0x18c)]=function(_0x4eee05,_0x16ebf4){return _0x4eee05>_0x16ebf4;},_0x2a3219[_0xf47e22(0x18d)]=function(_0x2b5cd4,_0x19c612){return _0x2b5cd4>_0x19c612;},_0x2a3219[_0xf47e22(0x189)]=function(_0x4eefb,_0x579786){return _0x4eefb>_0x579786;},_0x2a3219[_0xf47e22(0x165)]=function(_0x59c3c5,_0x523298){return _0x59c3c5>_0x523298;},_0x2a3219[_0xf47e22(0x176)]=function(_0x17bac4,_0x568ca3){return _0x17bac4+_0x568ca3;},_0x2a3219[_0xf47e22(0x186)]=function(_0x594982,_0x267984){return _0x594982+_0x267984;},_0x2a3219[_0xf47e22(0x18e)]=function(_0x446bf6,_0x47fc05){return _0x446bf6+_0x47fc05;},_0x2a3219[_0xf47e22(0x195)]=function(_0x1230c6,_0x17e532){return _0x1230c6+_0x17e532;},_0x2a3219[_0xf47e22(0x193)]=function(_0x1f50af,_0x3d949e){return _0x1f50af===_0x3d949e;},_0x2a3219[_0xf47e22(0x1bc)]=function(_0x34d564,_0x26aa6f){return _0x34d564===_0x26aa6f;},_0x2a3219['FiDuO']=_0xf47e22(0x1a0);const _0x271df3=_0x2a3219;let _0xaee895=0x0;if(_0x271df3['ZMfgn'](_0x2c85b3[_0xf47e22(0x1d4)],0x0))return _0xaee895;return console[_0xf47e22(0x171)](chalk[_0xf47e22(0x167)]['bgWhite'](_0x271df3[_0xf47e22(0x174)])),_0x2c85b3[_0xf47e22(0x172)](_0x292649=>{const _0x90b368=_0xf47e22,_0x595e9a=_0x292649[0x0],_0x3f8774=_0x292649[0x1];helper[_0x90b368(0x1a1)]()&&console[_0x90b368(0x171)]('\x0a'+chalk[_0x90b368(0x167)][_0x90b368(0x1b9)](''+helper[_0x90b368(0x17f)](_0x595e9a)));const _0x1c5dbe=_0x3f8774['scenarios'],_0x214802=_0x3f8774['steps'],_0x1b5de9=_0x3f8774[_0x90b368(0x1d6)],_0x4ba355=_0x3f8774[_0x90b368(0x18a)],_0x831845=_0x3f8774['stepsPassed'],_0x386af4=_0x3f8774[_0x90b368(0x183)],_0x497949=_0x3f8774[_0x90b368(0x188)],_0x2e91fb=_0x3f8774['stepsUndefined'],_0x47e352=_0x3f8774['stepsUnknown'],_0x524599=_0x3f8774[_0x90b368(0x1ad)],_0x2f63d0=_0x3f8774[_0x90b368(0x1b0)];let _0xf2abcc=_0x1c5dbe+_0x90b368(0x1b3);const _0x4c275e=_0x271df3[_0x90b368(0x1ca)](_0x271df3[_0x90b368(0x16c)](_0x1c5dbe,_0x1b5de9),0x0)?_0x271df3[_0x90b368(0x16c)](_0x1c5dbe,_0x1b5de9):0x0;if(_0x271df3[_0x90b368(0x1a5)](_0x1b5de9,0x0)&&_0x271df3[_0x90b368(0x173)](_0x4c275e,0x0))_0xf2abcc+='\x20('+chalk['bold']['red'](_0x1b5de9+'\x20failed')+',\x20'+chalk[_0x90b368(0x167)][_0x90b368(0x1d0)](_0x4c275e+'\x20passed')+')';else(_0x271df3[_0x90b368(0x1cb)](_0x1b5de9,0x0)||_0x271df3[_0x90b368(0x18c)](_0x4c275e,0x0))&&(_0xf2abcc+=_0x271df3['YEsId'](_0x1b5de9,0x0)?'\x20('+chalk['bold'][_0x90b368(0x1a2)](_0x1b5de9+_0x90b368(0x1b7))+')':'\x20('+chalk[_0x90b368(0x167)][_0x90b368(0x1d0)](_0x4c275e+'\x20passed')+')');const _0x122a05=_0x214802+_0x90b368(0x1ce),_0x1e9c5b=[];_0x271df3[_0x90b368(0x18d)](_0x524599,0x0)&&_0x1e9c5b['push'](''+chalk[_0x90b368(0x167)][_0x90b368(0x1a2)](_0x524599+'\x20ambiguous'));_0x271df3[_0x90b368(0x189)](_0x4ba355,0x0)&&_0x1e9c5b[_0x90b368(0x175)](''+chalk[_0x90b368(0x167)]['red'](_0x4ba355+_0x90b368(0x1b7)));_0x271df3[_0x90b368(0x165)](_0x831845,0x0)&&_0x1e9c5b['push'](''+chalk[_0x90b368(0x167)][_0x90b368(0x1d0)](_0x831845+_0x90b368(0x1a8)));_0x271df3[_0x90b368(0x165)](_0x497949,0x0)&&_0x1e9c5b[_0x90b368(0x175)](''+chalk[_0x90b368(0x167)][_0x90b368(0x1b9)](_0x497949+_0x90b368(0x1d3)));_0x271df3[_0x90b368(0x18d)](_0x386af4,0x0)&&_0x1e9c5b[_0x90b368(0x175)](''+chalk['bold'][_0x90b368(0x16a)](_0x386af4+'\x20skipped'));_0x271df3['EXHEz'](_0x2e91fb,0x0)&&_0x1e9c5b['push'](''+chalk[_0x90b368(0x167)][_0x90b368(0x1b9)](_0x2e91fb+_0x90b368(0x169)));_0x271df3[_0x90b368(0x189)](_0x47e352,0x0)&&_0x1e9c5b[_0x90b368(0x175)](''+chalk[_0x90b368(0x167)][_0x90b368(0x1b9)](_0x47e352+_0x90b368(0x19e)));const _0x47eb2c=_0x271df3[_0x90b368(0x176)](_0x271df3[_0x90b368(0x176)](_0x271df3[_0x90b368(0x176)](_0x122a05,'('),_0x1e9c5b['join'](',\x20')),')');console[_0x90b368(0x171)](_0x271df3[_0x90b368(0x186)](_0x271df3['pkjPB'](_0x271df3[_0x90b368(0x195)](_0x271df3[_0x90b368(0x195)]('\x0a',_0xf2abcc),'\x0a'),_0x47eb2c),'\x0a')),_0x271df3['KtoZT'](_0x2f63d0,![])&&(_0xaee895=0x1);}),_0xaee895;}async function run(_0x1c56eb,_0x2677de,_0x4123f2){const _0x50a1c8=a5_0x3e40f9,_0x2c82fe={'jkbxC':function(_0x39abf4,_0x416d1f){return _0x39abf4(_0x416d1f);},'uptzb':function(_0x3a2ded,_0x3ea824){return _0x3a2ded>_0x3ea824;},'mbvWN':_0x50a1c8(0x16b),'eklRh':'Removing\x20tmp\x20directory\x20created\x20for\x20reports','CEaIA':_0x50a1c8(0x19c),'pAFCf':'error\x20removing\x20tcg\x20config\x20file','XRhPt':_0x50a1c8(0x1c6),'CIQUK':function(_0x2b2e91,_0x15a8ab){return _0x2b2e91>_0x15a8ab;},'ETbnv':function(_0xdf0bc6,_0x461bd6){return _0xdf0bc6-_0x461bd6;},'OZLlD':function(_0xa0f5e2,_0x3816b9){return _0xa0f5e2>=_0x3816b9;},'JOTgT':function(_0x523c67,_0x3b77ee){return _0x523c67!=_0x3b77ee;},'bSDjK':_0x50a1c8(0x184),'rLIWe':function(_0x318623,_0x18a7da,_0x5b887c,_0xb631fb,_0x326207,_0x572f6a){return _0x318623(_0x18a7da,_0x5b887c,_0xb631fb,_0x326207,_0x572f6a);}};await _0x4123f2[_0x50a1c8(0x1b8)](_0x1c56eb),helper[_0x50a1c8(0x1b5)](_0x4123f2['framework'],_0x1c56eb);!helper[_0x50a1c8(0x1a1)]()&&await _0x4123f2[_0x50a1c8(0x1a9)]();await helper['handleApp'](_0x4123f2[_0x50a1c8(0x166)]);const _0x26bed1=helper[_0x50a1c8(0x17a)](_0x4123f2[_0x50a1c8(0x166)]);!helper[_0x50a1c8(0x1d5)](_0x4123f2[_0x50a1c8(0x166)][_0x50a1c8(0x16e)])&&(process[_0x50a1c8(0x1be)]['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON[_0x50a1c8(0x185)](_0x4123f2['config'][_0x50a1c8(0x16e)]));const _0x11421f=await TestHubHandler[_0x50a1c8(0x1af)](constants[_0x50a1c8(0x1c4)][_0x50a1c8(0x179)],_0x4123f2);let _0xa67f39=[];if(!helper[_0x50a1c8(0x1a1)]()){const _0x490866={};_0x490866[_0x50a1c8(0x1d1)]=[],_0xa67f39=helper[_0x50a1c8(0x17d)](Object[_0x50a1c8(0x1bb)]({},_0x4123f2[_0x50a1c8(0x166)],_0x490866),_0x26bed1,constants[_0x50a1c8(0x1c4)][_0x50a1c8(0x179)]);}else _0xa67f39=helper[_0x50a1c8(0x17d)](_0x4123f2['config'],_0x26bed1,constants[_0x50a1c8(0x1c4)][_0x50a1c8(0x179)]);if(!_0x4123f2[_0x50a1c8(0x166)])return;const _0x10a4da=_0x4123f2[_0x50a1c8(0x166)]['parallelsPerPlatform']||helper[_0x50a1c8(0x18b)](_0x1c56eb,_0x2677de,_0x4123f2[_0x50a1c8(0x166)],constants[_0x50a1c8(0x1c4)][_0x50a1c8(0x179)])||0x1,_0x293230={'server':helper[_0x50a1c8(0x1cc)](_0x4123f2['config']),'proxySettings':_0x4123f2[_0x50a1c8(0x166)][_0x50a1c8(0x1bd)],'maxWorkers':_0x10a4da,'browserStackLogLevel':_0x4123f2[_0x50a1c8(0x166)][_0x50a1c8(0x1bf)],'skipSessionName':_0x4123f2['config'][_0x50a1c8(0x19d)]['skipSessionName'],'skipSessionStatus':_0x4123f2[_0x50a1c8(0x166)]['testContextOptions'][_0x50a1c8(0x17b)],'turboScaleUrl':_0x4123f2[_0x50a1c8(0x166)][_0x50a1c8(0x1c0)]},_0x46d3b1=process['argv'],[_0x438871,_0x3fde8c]=helper[_0x50a1c8(0x1cf)](_0x46d3b1),_0x19e255=path[_0x50a1c8(0x1c3)](process[_0x50a1c8(0x187)](),_0x2c82fe[_0x50a1c8(0x190)]);if(_0x2c82fe[_0x50a1c8(0x1ab)](_0x3fde8c[_0x50a1c8(0x1d4)],0x0)){helper['createDir'](_0x19e255);for(let _0x439a07=_0x2c82fe[_0x50a1c8(0x17e)](_0x438871[_0x50a1c8(0x1d4)],0x1);_0x2c82fe[_0x50a1c8(0x1c5)](_0x439a07,0x0);_0x439a07--){_0x46d3b1[_0x50a1c8(0x1c8)](_0x438871[_0x439a07],0x2);}}_0x2c82fe[_0x50a1c8(0x1c1)](_0x4123f2[_0x50a1c8(0x166)][_0x50a1c8(0x1b4)],null)?process[_0x50a1c8(0x1be)][_0x50a1c8(0x1a6)]=_0x4123f2[_0x50a1c8(0x166)][_0x50a1c8(0x1b4)]:process[_0x50a1c8(0x1be)][_0x50a1c8(0x1a6)]=_0x2c82fe['bSDjK'];PerformanceTester[_0x50a1c8(0x1a4)](PerformanceEvents[_0x50a1c8(0x168)]);let _0x5624f8;_0x2c82fe['rLIWe'](parallelCucumberRun,_0xa67f39,_0x293230,_0x4123f2[_0x50a1c8(0x166)],_0x46d3b1,_0x3fde8c)['then'](async _0x46cf55=>{const _0x41e20a=_0x50a1c8;PerformanceTester[_0x41e20a(0x191)](PerformanceEvents[_0x41e20a(0x197)]),_0x5624f8=_0x46cf55;const _0x1f71da=_0x2c82fe[_0x41e20a(0x170)](printCucumberStats,_0x46cf55);process[_0x41e20a(0x19b)]=_0x1f71da,_0x2c82fe['uptzb'](_0x3fde8c['length'],0x0)&&(logger[_0x41e20a(0x17c)](_0x2c82fe['mbvWN']),helper[_0x41e20a(0x16f)](_0x19e255,_0x3fde8c),logger[_0x41e20a(0x17c)](_0x2c82fe['eklRh']),helper['removeDir'](_0x19e255));})['finally'](async()=>{const _0x4cbcd6=_0x50a1c8;PerformanceTester[_0x4cbcd6(0x191)](PerformanceEvents[_0x4cbcd6(0x197)]),_0x4123f2['errorMessage']=helper[_0x4cbcd6(0x180)](_0x5624f8,_0x2c82fe[_0x4cbcd6(0x1ac)]),testOpsHelper['printBuildLink']();try{await TestHubHandler['stop']();}catch(_0x568662){logger[_0x4cbcd6(0x17c)](_0x4cbcd6(0x1aa)+util[_0x4cbcd6(0x198)](_0x568662));}try{const {browserstackFolderPath:_0x3eef60,tcgConfigPath:_0x24b364}=helper[_0x4cbcd6(0x182)]();fs[_0x4cbcd6(0x1d2)](_0x24b364),fs[_0x4cbcd6(0x1ba)](_0x3eef60);}catch(_0x53848c){logger['debug'](_0x2c82fe['pAFCf'],_0x53848c);}await utilities['finalExecution'](_0x4123f2);});}module[a5_0x3e40f9(0x1c9)]=run;