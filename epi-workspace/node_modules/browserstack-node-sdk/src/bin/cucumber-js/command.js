#!/usr/bin/env node
'use strict';const a5_0x451b00=a5_0x4084;(function(_0x3c8b01,_0x450849){const _0x1688f6=a5_0x4084,_0x29fad8=_0x3c8b01();while(!![]){try{const _0x1e7d81=-parseInt(_0x1688f6(0x19d))/0x1+parseInt(_0x1688f6(0x1a9))/0x2+-parseInt(_0x1688f6(0x1c1))/0x3+parseInt(_0x1688f6(0x196))/0x4+-parseInt(_0x1688f6(0x19f))/0x5+-parseInt(_0x1688f6(0x1aa))/0x6+parseInt(_0x1688f6(0x1b3))/0x7*(parseInt(_0x1688f6(0x1c5))/0x8);if(_0x1e7d81===_0x450849)break;else _0x29fad8['push'](_0x29fad8['shift']());}catch(_0x432829){_0x29fad8['push'](_0x29fad8['shift']());}}}(a5_0x2fdc,0x3eb4f));function a5_0x4084(_0x4de537,_0x25dc28){const _0x2fdc0b=a5_0x2fdc();return a5_0x4084=function(_0x4084f1,_0x482784){_0x4084f1=_0x4084f1-0x17c;let _0x2a2e8f=_0x2fdc0b[_0x4084f1];return _0x2a2e8f;},a5_0x4084(_0x4de537,_0x25dc28);}const fs=require('fs'),path=require(a5_0x451b00(0x19c)),util=require('util'),logger=require('../../helpers/logger')[a5_0x451b00(0x189)],{default:BrowserStackSetup}=require(a5_0x451b00(0x1cf)),helper=require('../../helpers/helper'),utilities=require(a5_0x451b00(0x197)),constants=require(a5_0x451b00(0x1c9)),{parallelCucumberRun}=require(a5_0x451b00(0x1ec)),TestHubHandler=require(a5_0x451b00(0x1ca)),testOpsHelper=require(a5_0x451b00(0x19a)),chalk=require(a5_0x451b00(0x199)),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require(a5_0x451b00(0x186))[a5_0x451b00(0x194)];function a5_0x2fdc(){const _0x13423a=['stringify','cyan','skipSessionStatus','push','../../helpers/BrowserStackSetup','uCGZm','forEach','handleApp','mergeOutputFiles','errorMessage','txfJg','XdwXK','parseFormatters','aOkif','green','CJDnl','processSuccess','printBuildLink','env','oVmyd','ZPGzq','testContextOptions','steps','ROQzK','config','BROWSERSTACK_TEST_OBSERVABILITY_YML','CUCUMBER','log','testObservability','accessibilityOptions','isBrowserstackInfra','ohkrf','getHubUrl','../test-runner','isUndefined','removeDir','stepsUndefined','length','prepareCapabilities','ApLQh','exitCode','finalExecution','stop','****\x20RESULTS\x20****','yellow','format','eYqJw','cucumber','RJOGI','bold','unlinkSync','eSKbd','../../helpers/performance/constants','debug','rTLeq','winstonLogger','createDir','\x20skipped','getUserWorkerCount','tmp','splice','start','HSHgH','lWUes','red','stepsUnknown','EVENTS','scenariosFailed','601244QfqZIO','../../helpers/utilities','IHEgW','chalk','../../helpers/test-observability/utils','JmYnY','path','15771IszAtf','getErrorMessageFromResults','2068775tokAjN','stepsPassed','\x20pending','initialize','pBLtv','stepsAmbiguous','skipSessionName','finally','bgWhite','true','141480Ljolka','2549814FmLXxh','stepsFailed','\x20ambiguous','SDK_CLEANUP','join','bkeFM','SDK_SETUP','\x20failed','ymbQa','2541ztTsCv','turboScaleUrl','Removing\x20tmp\x20directory\x20created\x20for\x20reports','\x20undefined','logLevel','saMdn','setupTCGAuth','FRAMEWORKS','\x20passed','cucumber-js','useW3C','eNJfD','proxySettings','then','258537JbedTt','exports','misrg','eUwFw','21520kqNGgR','\x20scenarios','YAaZM','SUnkX','../utils/constants','../../helpers/testhub/testhubHandler'];a5_0x2fdc=function(){return _0x13423a;};return a5_0x2fdc();}function printCucumberStats(_0x4db886){const _0x17c5d5=a5_0x451b00,_0x225b66={};_0x225b66[_0x17c5d5(0x1de)]=function(_0x195d55,_0x33fdd8){return _0x195d55>_0x33fdd8;},_0x225b66[_0x17c5d5(0x1ea)]=function(_0x150b18,_0x5e0fc1){return _0x150b18-_0x5e0fc1;},_0x225b66[_0x17c5d5(0x1e2)]=function(_0x5a1f29,_0x4de865){return _0x5a1f29-_0x4de865;},_0x225b66['lWUes']=function(_0x273e76,_0x325fa0){return _0x273e76>_0x325fa0;},_0x225b66[_0x17c5d5(0x1da)]=function(_0x1d1718,_0x18d9c1){return _0x1d1718>_0x18d9c1;},_0x225b66['xoyHf']=function(_0x38e1b4,_0x11627d){return _0x38e1b4>_0x11627d;},_0x225b66[_0x17c5d5(0x1d5)]=function(_0x50d6e8,_0x4ee7d3){return _0x50d6e8>_0x4ee7d3;},_0x225b66[_0x17c5d5(0x188)]=function(_0x4d0c93,_0x518920){return _0x4d0c93>_0x518920;},_0x225b66[_0x17c5d5(0x1be)]=function(_0x4b7445,_0x364964){return _0x4b7445>_0x364964;},_0x225b66[_0x17c5d5(0x1d0)]=function(_0x1f1170,_0x2683b6){return _0x1f1170>_0x2683b6;},_0x225b66[_0x17c5d5(0x1c8)]=function(_0x238350,_0x126bd5){return _0x238350>_0x126bd5;},_0x225b66[_0x17c5d5(0x1a3)]=function(_0x55b7b5,_0x24f33d){return _0x55b7b5+_0x24f33d;},_0x225b66['misrg']=function(_0x2b676f,_0x2b334f){return _0x2b676f+_0x2b334f;},_0x225b66['eSKbd']=function(_0x5e7c56,_0xadbc7d){return _0x5e7c56+_0xadbc7d;},_0x225b66['ApLQh']=function(_0x532bca,_0x2aae4f){return _0x532bca+_0x2aae4f;},_0x225b66['aOkif']=function(_0x158edd,_0x3afa4b){return _0x158edd+_0x3afa4b;},_0x225b66[_0x17c5d5(0x198)]=function(_0x14fa75,_0x939d86){return _0x14fa75+_0x939d86;},_0x225b66[_0x17c5d5(0x180)]=function(_0x189a35,_0x4874fe){return _0x189a35===_0x4874fe;},_0x225b66['ZPGzq']=_0x17c5d5(0x17d);const _0x28f8fe=_0x225b66;let _0x47215b=0x0;if(_0x28f8fe[_0x17c5d5(0x180)](_0x4db886[_0x17c5d5(0x1f0)],0x0))return _0x47215b;return console[_0x17c5d5(0x1e6)](chalk[_0x17c5d5(0x183)][_0x17c5d5(0x1a7)](_0x28f8fe[_0x17c5d5(0x1df)])),_0x4db886[_0x17c5d5(0x1d1)](_0x45339a=>{const _0x5d2ce3=_0x17c5d5,_0x30c79f=_0x45339a[0x0],_0xc8c918=_0x45339a[0x1];console[_0x5d2ce3(0x1e6)]('\x0a'+chalk['bold'][_0x5d2ce3(0x17e)](''+helper['getPlatformName'](_0x30c79f)));const _0xa4fa9d=_0xc8c918['scenarios'],_0x2591e0=_0xc8c918[_0x5d2ce3(0x1e1)],_0x4d44e1=_0xc8c918[_0x5d2ce3(0x195)],_0xd825fa=_0xc8c918[_0x5d2ce3(0x1ab)],_0x204394=_0xc8c918[_0x5d2ce3(0x1a0)],_0x18a7a6=_0xc8c918['stepsSkipped'],_0x48ef5d=_0xc8c918['stepsPending'],_0x4902d2=_0xc8c918[_0x5d2ce3(0x1ef)],_0x571df2=_0xc8c918[_0x5d2ce3(0x193)],_0x4830ee=_0xc8c918[_0x5d2ce3(0x1a4)],_0x47e06d=_0xc8c918[_0x5d2ce3(0x1db)];let _0x2f97e2=_0xa4fa9d+_0x5d2ce3(0x1c6);const _0x4cd47d=_0x28f8fe[_0x5d2ce3(0x1de)](_0x28f8fe[_0x5d2ce3(0x1ea)](_0xa4fa9d,_0x4d44e1),0x0)?_0x28f8fe[_0x5d2ce3(0x1e2)](_0xa4fa9d,_0x4d44e1):0x0;if(_0x28f8fe[_0x5d2ce3(0x191)](_0x4d44e1,0x0)&&_0x28f8fe[_0x5d2ce3(0x1da)](_0x4cd47d,0x0))_0x2f97e2+='\x20('+chalk[_0x5d2ce3(0x183)][_0x5d2ce3(0x192)](_0x4d44e1+_0x5d2ce3(0x1b1))+',\x20'+chalk[_0x5d2ce3(0x183)][_0x5d2ce3(0x1d9)](_0x4cd47d+_0x5d2ce3(0x1bb))+')';else(_0x28f8fe['xoyHf'](_0x4d44e1,0x0)||_0x28f8fe[_0x5d2ce3(0x1da)](_0x4cd47d,0x0))&&(_0x2f97e2+=_0x28f8fe[_0x5d2ce3(0x1da)](_0x4d44e1,0x0)?'\x20('+chalk[_0x5d2ce3(0x183)]['red'](_0x4d44e1+_0x5d2ce3(0x1b1))+')':'\x20('+chalk[_0x5d2ce3(0x183)][_0x5d2ce3(0x1d9)](_0x4cd47d+_0x5d2ce3(0x1bb))+')');const _0x530b9a=_0x2591e0+'\x20steps',_0x20c9a9=[];_0x28f8fe[_0x5d2ce3(0x1d5)](_0x4830ee,0x0)&&_0x20c9a9['push'](''+chalk[_0x5d2ce3(0x183)][_0x5d2ce3(0x192)](_0x4830ee+_0x5d2ce3(0x1ac)));_0x28f8fe[_0x5d2ce3(0x188)](_0xd825fa,0x0)&&_0x20c9a9[_0x5d2ce3(0x1ce)](''+chalk[_0x5d2ce3(0x183)][_0x5d2ce3(0x192)](_0xd825fa+'\x20failed'));_0x28f8fe[_0x5d2ce3(0x1be)](_0x204394,0x0)&&_0x20c9a9[_0x5d2ce3(0x1ce)](''+chalk[_0x5d2ce3(0x183)][_0x5d2ce3(0x1d9)](_0x204394+_0x5d2ce3(0x1bb)));_0x28f8fe['xoyHf'](_0x48ef5d,0x0)&&_0x20c9a9['push'](''+chalk[_0x5d2ce3(0x183)]['yellow'](_0x48ef5d+_0x5d2ce3(0x1a1)));_0x28f8fe['eNJfD'](_0x18a7a6,0x0)&&_0x20c9a9[_0x5d2ce3(0x1ce)](''+chalk[_0x5d2ce3(0x183)][_0x5d2ce3(0x1cc)](_0x18a7a6+_0x5d2ce3(0x18b)));_0x28f8fe[_0x5d2ce3(0x1d0)](_0x4902d2,0x0)&&_0x20c9a9[_0x5d2ce3(0x1ce)](''+chalk[_0x5d2ce3(0x183)][_0x5d2ce3(0x17e)](_0x4902d2+_0x5d2ce3(0x1b6)));_0x28f8fe[_0x5d2ce3(0x1c8)](_0x571df2,0x0)&&_0x20c9a9[_0x5d2ce3(0x1ce)](''+chalk[_0x5d2ce3(0x183)][_0x5d2ce3(0x17e)](_0x571df2+_0x5d2ce3(0x18b)));const _0x1902dc=_0x28f8fe[_0x5d2ce3(0x1a3)](_0x28f8fe[_0x5d2ce3(0x1c3)](_0x28f8fe[_0x5d2ce3(0x185)](_0x530b9a,'('),_0x20c9a9['join'](',\x20')),')');console[_0x5d2ce3(0x1e6)](_0x28f8fe[_0x5d2ce3(0x1f2)](_0x28f8fe[_0x5d2ce3(0x1d8)](_0x28f8fe[_0x5d2ce3(0x198)](_0x28f8fe[_0x5d2ce3(0x1f2)]('\x0a',_0x2f97e2),'\x0a'),_0x1902dc),'\x0a')),_0x28f8fe[_0x5d2ce3(0x180)](_0x47e06d,![])&&(_0x47215b=0x1);}),_0x47215b;}async function run(_0x3680b0,_0x647a68){const _0x228e42=a5_0x451b00,_0x5bfb08={'HSHgH':function(_0x1c4291,_0x2dcf30){return _0x1c4291(_0x2dcf30);},'XdwXK':function(_0x53b211,_0x205c76){return _0x53b211>_0x205c76;},'qTASg':'Generating\x20consolidated\x20report...','saMdn':_0x228e42(0x1b5),'wFyzz':_0x228e42(0x181),'bkeFM':'error\x20removing\x20tcg\x20config\x20file','RJOGI':_0x228e42(0x1bc),'JmYnY':_0x228e42(0x18d),'eUwFw':function(_0x4391c4,_0x488df8){return _0x4391c4-_0x488df8;},'YAaZM':function(_0x3ce373,_0x26253c){return _0x3ce373>=_0x26253c;},'tppCj':function(_0x126beb,_0x4a0762){return _0x126beb!=_0x4a0762;},'JYiSE':_0x228e42(0x1a8),'ymbQa':function(_0x1fd433,_0x7016ce,_0x3339c8,_0x408517,_0x27cfcb,_0x578551){return _0x1fd433(_0x7016ce,_0x3339c8,_0x408517,_0x27cfcb,_0x578551);}},_0x38ab95=new BrowserStackSetup(_0x3680b0,_0x5bfb08[_0x228e42(0x182)]);await _0x38ab95[_0x228e42(0x1a2)](),helper['setUserConfigPath'](_0x38ab95['framework'],_0x3680b0);!helper[_0x228e42(0x1e9)]()&&await _0x38ab95[_0x228e42(0x1b9)]();await helper[_0x228e42(0x1d2)](_0x38ab95[_0x228e42(0x1e3)]);const _0x287fb0=helper[_0x228e42(0x1bd)](_0x38ab95['config']),_0x4d4394=helper[_0x228e42(0x1f1)](_0x38ab95['config'],_0x287fb0,constants['FRAMEWORKS']['CUCUMBER']);if(!_0x38ab95['config'])return;const _0xd7231d=_0x38ab95[_0x228e42(0x1e3)]['parallelsPerPlatform']||helper[_0x228e42(0x18c)](_0x3680b0,_0x647a68,_0x38ab95[_0x228e42(0x1e3)],constants['FRAMEWORKS'][_0x228e42(0x1e5)])||0x1,_0x3cb18a={'server':helper[_0x228e42(0x1eb)](_0x38ab95[_0x228e42(0x1e3)]),'proxySettings':_0x38ab95[_0x228e42(0x1e3)][_0x228e42(0x1bf)],'maxWorkers':_0xd7231d,'browserStackLogLevel':_0x38ab95[_0x228e42(0x1e3)][_0x228e42(0x1b7)],'skipSessionName':_0x38ab95[_0x228e42(0x1e3)][_0x228e42(0x1e0)][_0x228e42(0x1a5)],'skipSessionStatus':_0x38ab95['config'][_0x228e42(0x1e0)][_0x228e42(0x1cd)],'turboScaleUrl':_0x38ab95[_0x228e42(0x1e3)][_0x228e42(0x1b4)]},_0x54a4e1=process['argv'],[_0x3bde9c,_0x53b3a0]=helper[_0x228e42(0x1d7)](_0x54a4e1),_0x9b17cf=path[_0x228e42(0x1ae)](process['cwd'](),_0x5bfb08[_0x228e42(0x19b)]);if(_0x5bfb08[_0x228e42(0x1d6)](_0x53b3a0[_0x228e42(0x1f0)],0x0)){helper[_0x228e42(0x18a)](_0x9b17cf);for(let _0x5a0cd1=_0x5bfb08[_0x228e42(0x1c4)](_0x3bde9c[_0x228e42(0x1f0)],0x1);_0x5bfb08[_0x228e42(0x1c7)](_0x5a0cd1,0x0);_0x5a0cd1--){_0x54a4e1[_0x228e42(0x18e)](_0x3bde9c[_0x5a0cd1],0x2);}}!helper[_0x228e42(0x1ed)](_0x38ab95['config'][_0x228e42(0x1e8)])&&(process[_0x228e42(0x1dd)]['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON[_0x228e42(0x1cb)](_0x38ab95[_0x228e42(0x1e3)]['accessibilityOptions']));_0x5bfb08['tppCj'](_0x38ab95[_0x228e42(0x1e3)][_0x228e42(0x1e7)],null)?process[_0x228e42(0x1dd)][_0x228e42(0x1e4)]=_0x38ab95[_0x228e42(0x1e3)]['testObservability']:process['env'][_0x228e42(0x1e4)]=_0x5bfb08['JYiSE'];const _0x9b1590=await TestHubHandler['launchBuild'](constants[_0x228e42(0x1ba)]['CUCUMBER'],_0x38ab95);PerformanceTester['end'](PerformanceEvents[_0x228e42(0x1b0)]);let _0x263fd5;_0x5bfb08[_0x228e42(0x1b2)](parallelCucumberRun,_0x4d4394,_0x3cb18a,_0x38ab95[_0x228e42(0x1e3)],_0x54a4e1,_0x53b3a0)[_0x228e42(0x1c0)](async _0x1d2ebb=>{const _0x281937=_0x228e42;PerformanceTester['start'](PerformanceEvents[_0x281937(0x1ad)]),_0x263fd5=_0x1d2ebb;const _0x55f489=_0x5bfb08[_0x281937(0x190)](printCucumberStats,_0x1d2ebb);process[_0x281937(0x1f3)]=_0x55f489,_0x5bfb08[_0x281937(0x1d6)](_0x53b3a0[_0x281937(0x1f0)],0x0)&&(logger[_0x281937(0x187)](_0x5bfb08['qTASg']),helper[_0x281937(0x1d3)](_0x9b17cf,_0x53b3a0),logger[_0x281937(0x187)](_0x5bfb08[_0x281937(0x1b8)]),helper[_0x281937(0x1ee)](_0x9b17cf));})[_0x228e42(0x1a6)](async()=>{const _0xaf4923=_0x228e42;PerformanceTester[_0xaf4923(0x18f)](PerformanceEvents[_0xaf4923(0x1ad)]),_0x38ab95[_0xaf4923(0x1d4)]=helper[_0xaf4923(0x19e)](_0x263fd5,_0x5bfb08['wFyzz']),testOpsHelper[_0xaf4923(0x1dc)]();try{await TestHubHandler[_0xaf4923(0x17c)]();}catch(_0x58f178){logger[_0xaf4923(0x187)]('Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20'+util[_0xaf4923(0x17f)](_0x58f178));}try{const {browserstackFolderPath:_0x46aa9d,tcgConfigPath:_0x388ff8}=helper['getTCGConfigFilePaths']();fs[_0xaf4923(0x184)](_0x388ff8),fs['rmdirSync'](_0x46aa9d);}catch(_0x49f40f){logger['debug'](_0x5bfb08[_0xaf4923(0x1af)],_0x49f40f);}await utilities[_0xaf4923(0x1f4)](_0x38ab95);});}module[a5_0x451b00(0x1c2)]=run;