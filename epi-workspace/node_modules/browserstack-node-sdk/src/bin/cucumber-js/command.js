#!/usr/bin/env node
'use strict';const a5_0x22c724=a5_0x52e6;(function(_0xfffac4,_0x6bab0e){const _0x1af516=a5_0x52e6,_0x8a6481=_0xfffac4();while(!![]){try{const _0x436d3a=-parseInt(_0x1af516(0x142))/0x1+-parseInt(_0x1af516(0x156))/0x2+parseInt(_0x1af516(0x131))/0x3*(-parseInt(_0x1af516(0xf9))/0x4)+parseInt(_0x1af516(0x129))/0x5*(parseInt(_0x1af516(0x105))/0x6)+parseInt(_0x1af516(0x14f))/0x7*(parseInt(_0x1af516(0x146))/0x8)+parseInt(_0x1af516(0x14d))/0x9+-parseInt(_0x1af516(0x124))/0xa*(parseInt(_0x1af516(0x10c))/0xb);if(_0x436d3a===_0x6bab0e)break;else _0x8a6481['push'](_0x8a6481['shift']());}catch(_0x467a9b){_0x8a6481['push'](_0x8a6481['shift']());}}}(a5_0xe09b,0xef6a9));const fs=require('fs'),path=require('path'),util=require(a5_0x22c724(0x150)),logger=require(a5_0x22c724(0x10a))['winstonLogger'],{default:BrowserStackSetup}=require(a5_0x22c724(0x120)),helper=require(a5_0x22c724(0x119)),utilities=require(a5_0x22c724(0x10d)),constants=require(a5_0x22c724(0x14e)),{parallelCucumberRun}=require(a5_0x22c724(0x12f)),TestHubHandler=require(a5_0x22c724(0x123)),testOpsHelper=require('../../helpers/test-observability/utils'),chalk=require('chalk'),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require('../../helpers/performance/constants')[a5_0x22c724(0x147)];function printCucumberStats(_0x1f9e48){const _0x2b2893=a5_0x22c724,_0x237ede={};_0x237ede['MzGqh']=function(_0x5cef79,_0x339253){return _0x5cef79>_0x339253;},_0x237ede['tzvxf']=function(_0x4fb5d4,_0x5430b2){return _0x4fb5d4-_0x5430b2;},_0x237ede[_0x2b2893(0x115)]=function(_0x3fc9e3,_0x181a77){return _0x3fc9e3>_0x181a77;},_0x237ede[_0x2b2893(0x145)]=function(_0x2a1488,_0x3018da){return _0x2a1488>_0x3018da;},_0x237ede[_0x2b2893(0x107)]=function(_0x5472ba,_0x234721){return _0x5472ba>_0x234721;},_0x237ede[_0x2b2893(0x155)]=function(_0x400e5e,_0xe884cc){return _0x400e5e>_0xe884cc;},_0x237ede['iQQoM']=function(_0x34f8f8,_0xf9b7b3){return _0x34f8f8>_0xf9b7b3;},_0x237ede['eCXyC']=function(_0x133f4c,_0x5722fa){return _0x133f4c>_0x5722fa;},_0x237ede[_0x2b2893(0x143)]=function(_0x2d552a,_0xae8830){return _0x2d552a+_0xae8830;},_0x237ede['Ikbxt']=function(_0x215623,_0x76406d){return _0x215623+_0x76406d;},_0x237ede[_0x2b2893(0x15e)]=function(_0x40ee39,_0x346bfe){return _0x40ee39+_0x346bfe;},_0x237ede[_0x2b2893(0x127)]=function(_0x2fc34d,_0x12f761){return _0x2fc34d+_0x12f761;},_0x237ede[_0x2b2893(0x13c)]=function(_0x501924,_0x1a46db){return _0x501924===_0x1a46db;},_0x237ede['rmAYb']=function(_0x1a2083,_0x2c932f){return _0x1a2083===_0x2c932f;},_0x237ede[_0x2b2893(0x13e)]=_0x2b2893(0x153);const _0x1cd4c7=_0x237ede;let _0x5e3bc3=0x0;if(_0x1cd4c7['rmAYb'](_0x1f9e48[_0x2b2893(0x15b)],0x0))return _0x5e3bc3;return console[_0x2b2893(0x158)](chalk['bold']['bgWhite'](_0x1cd4c7['aGQlu'])),_0x1f9e48[_0x2b2893(0x102)](_0x3d2265=>{const _0x3d7850=_0x2b2893,_0x2fbeca=_0x3d2265[0x0],_0x73207a=_0x3d2265[0x1];console[_0x3d7850(0x158)]('\x0a'+chalk[_0x3d7850(0x12b)][_0x3d7850(0x11c)](''+helper[_0x3d7850(0x110)](_0x2fbeca)));const _0x5e59da=_0x73207a[_0x3d7850(0xf8)],_0x16999d=_0x73207a['steps'],_0x32a6f7=_0x73207a[_0x3d7850(0x12c)],_0x17afed=_0x73207a[_0x3d7850(0x12e)],_0x3bf147=_0x73207a['stepsPassed'],_0x1f2ece=_0x73207a[_0x3d7850(0x101)],_0x5112e4=_0x73207a[_0x3d7850(0x149)],_0x1d4a14=_0x73207a[_0x3d7850(0x13b)],_0x138d92=_0x73207a[_0x3d7850(0x117)],_0x1a59bd=_0x73207a[_0x3d7850(0x104)],_0xb0dcab=_0x73207a[_0x3d7850(0x137)];let _0x4a026d=_0x5e59da+_0x3d7850(0x118);const _0x316d56=_0x1cd4c7[_0x3d7850(0x135)](_0x1cd4c7[_0x3d7850(0x15c)](_0x5e59da,_0x32a6f7),0x0)?_0x1cd4c7['tzvxf'](_0x5e59da,_0x32a6f7):0x0;if(_0x1cd4c7['ystSR'](_0x32a6f7,0x0)&&_0x1cd4c7[_0x3d7850(0x145)](_0x316d56,0x0))_0x4a026d+='\x20('+chalk[_0x3d7850(0x12b)][_0x3d7850(0x159)](_0x32a6f7+_0x3d7850(0x125))+',\x20'+chalk['bold']['green'](_0x316d56+_0x3d7850(0x10b))+')';else(_0x1cd4c7[_0x3d7850(0x115)](_0x32a6f7,0x0)||_0x1cd4c7[_0x3d7850(0x107)](_0x316d56,0x0))&&(_0x4a026d+=_0x1cd4c7['MzGqh'](_0x32a6f7,0x0)?'\x20('+chalk[_0x3d7850(0x12b)][_0x3d7850(0x159)](_0x32a6f7+'\x20failed')+')':'\x20('+chalk[_0x3d7850(0x12b)]['green'](_0x316d56+_0x3d7850(0x10b))+')');const _0xad4acf=_0x16999d+'\x20steps',_0x198292=[];_0x1cd4c7[_0x3d7850(0x155)](_0x1a59bd,0x0)&&_0x198292[_0x3d7850(0xf4)](''+chalk['bold'][_0x3d7850(0x159)](_0x1a59bd+_0x3d7850(0x151)));_0x1cd4c7[_0x3d7850(0x115)](_0x17afed,0x0)&&_0x198292[_0x3d7850(0xf4)](''+chalk[_0x3d7850(0x12b)][_0x3d7850(0x159)](_0x17afed+_0x3d7850(0x125)));_0x1cd4c7[_0x3d7850(0x155)](_0x3bf147,0x0)&&_0x198292[_0x3d7850(0xf4)](''+chalk[_0x3d7850(0x12b)]['green'](_0x3bf147+'\x20passed'));_0x1cd4c7[_0x3d7850(0x135)](_0x5112e4,0x0)&&_0x198292[_0x3d7850(0xf4)](''+chalk[_0x3d7850(0x12b)][_0x3d7850(0x11c)](_0x5112e4+_0x3d7850(0xfb)));_0x1cd4c7[_0x3d7850(0x141)](_0x1f2ece,0x0)&&_0x198292[_0x3d7850(0xf4)](''+chalk['bold']['cyan'](_0x1f2ece+'\x20skipped'));_0x1cd4c7[_0x3d7850(0x155)](_0x1d4a14,0x0)&&_0x198292['push'](''+chalk[_0x3d7850(0x12b)][_0x3d7850(0x11c)](_0x1d4a14+_0x3d7850(0x14a)));_0x1cd4c7['eCXyC'](_0x138d92,0x0)&&_0x198292[_0x3d7850(0xf4)](''+chalk[_0x3d7850(0x12b)][_0x3d7850(0x11c)](_0x138d92+_0x3d7850(0x122)));const _0x12ea8a=_0x1cd4c7[_0x3d7850(0x143)](_0x1cd4c7['Ikbxt'](_0x1cd4c7[_0x3d7850(0x15e)](_0xad4acf,'('),_0x198292[_0x3d7850(0x144)](',\x20')),')');console['log'](_0x1cd4c7[_0x3d7850(0x121)](_0x1cd4c7[_0x3d7850(0x121)](_0x1cd4c7['FrcST'](_0x1cd4c7['ASYPw']('\x0a',_0x4a026d),'\x0a'),_0x12ea8a),'\x0a')),_0x1cd4c7[_0x3d7850(0x13c)](_0xb0dcab,![])&&(_0x5e3bc3=0x1);}),_0x5e3bc3;}function a5_0x52e6(_0x1ea7f7,_0x1216e9){const _0xe09bce=a5_0xe09b();return a5_0x52e6=function(_0x52e67a,_0x45d7c4){_0x52e67a=_0x52e67a-0xef;let _0x100078=_0xe09bce[_0x52e67a];return _0x100078;},a5_0x52e6(_0x1ea7f7,_0x1216e9);}function a5_0xe09b(){const _0x287416=['\x20scenarios','../../helpers/helper','config','dZAqK','yellow','getHubUrl','skipSessionStatus','TSVQj','../../helpers/BrowserStackSetup','Ikbxt','\x20skipped','../../helpers/testhub/testhubHandler','105790ybgIQh','\x20failed','argv','ASYPw','removeDir','7186670fZgVHs','true','bold','scenariosFailed','MFtuF','stepsFailed','../test-runner','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','9gJlIIx','FRAMEWORKS','testContextOptions','VKwYE','MzGqh','stop','processSuccess','mergeOutputFiles','tmp','handleApp','stepsUndefined','GmzAU','setUserConfigPath','aGQlu','isBrowserstackInfra','SDK_CLEANUP','iQQoM','362297eBRMlC','bBqKM','join','LNQZR','15408pdyCwR','EVENTS','LAnoX','stepsPending','\x20undefined','start','stringify','16610886nVLZIs','../utils/constants','5516ByuZDR','util','\x20ambiguous','Removing\x20tmp\x20directory\x20created\x20for\x20reports','****\x20RESULTS\x20****','proxySettings','hLMDQ','3517660ZmZpuI','initialize','log','red','createDir','length','tzvxf','finally','FrcST','parallelsPerPlatform','unlinkSync','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','getTCGConfigFilePaths','turboScaleUrl','push','testObservability','BROWSERSTACK_TEST_OBSERVABILITY_YML','cucumber','scenarios','1884356vwSUXI','TgsJS','\x20pending','nHsgl','debug','env','prepareCapabilities','logLevel','stepsSkipped','forEach','then','stepsAmbiguous','6rLqRIM','Generating\x20consolidated\x20report...','qAiCE','cIpKT','cwd','../../helpers/logger','\x20passed','297UeXCsC','../../helpers/utilities','exports','launchBuild','getPlatformName','rmdirSync','error\x20removing\x20tcg\x20config\x20file','accessibilityOptions','setupTCGAuth','ystSR','isUndefined','stepsUnknown'];a5_0xe09b=function(){return _0x287416;};return a5_0xe09b();}async function run(_0x1b81d9,_0xc4505f,_0x403ce0){const _0x141171=a5_0x22c724,_0x3d6623={'TgsJS':function(_0x49766b,_0x3b1cc3){return _0x49766b(_0x3b1cc3);},'TSVQj':function(_0x1a25f6,_0x33e271){return _0x1a25f6>_0x33e271;},'dZAqK':_0x141171(0x106),'LAnoX':_0x141171(0x152),'VKwYE':_0x141171(0xf7),'MFtuF':_0x141171(0x112),'nHsgl':_0x141171(0x139),'cIpKT':function(_0x4c0a62,_0x25dc6f){return _0x4c0a62-_0x25dc6f;},'QNGjz':function(_0x5e703b,_0x351a45){return _0x5e703b>=_0x351a45;},'jQZlS':function(_0x1d3e9b,_0x3d14b5){return _0x1d3e9b!=_0x3d14b5;},'CLuQX':_0x141171(0x12a),'fagrR':function(_0x5f28f5,_0x1cb2bb,_0x50fb33,_0x2f4d9b,_0x5bc51b,_0x33a9b3){return _0x5f28f5(_0x1cb2bb,_0x50fb33,_0x2f4d9b,_0x5bc51b,_0x33a9b3);}};await _0x403ce0[_0x141171(0x157)](_0x1b81d9),helper[_0x141171(0x13d)](_0x403ce0['framework'],_0x1b81d9);!helper[_0x141171(0x13f)]()&&await _0x403ce0[_0x141171(0x114)]();await helper[_0x141171(0x13a)](_0x403ce0[_0x141171(0x11a)]);const _0x44a947=helper['useW3C'](_0x403ce0['config']);!helper[_0x141171(0x116)](_0x403ce0[_0x141171(0x11a)][_0x141171(0x113)])&&(process[_0x141171(0xfe)][_0x141171(0xf1)]=JSON[_0x141171(0x14c)](_0x403ce0[_0x141171(0x11a)][_0x141171(0x113)]));const _0x4cc6ce=await TestHubHandler[_0x141171(0x10f)](constants['FRAMEWORKS']['CUCUMBER'],_0x403ce0),_0x10e136=helper[_0x141171(0xff)](_0x403ce0[_0x141171(0x11a)],_0x44a947,constants[_0x141171(0x132)]['CUCUMBER']);if(!_0x403ce0['config'])return;const _0x49ec52=_0x403ce0[_0x141171(0x11a)][_0x141171(0xef)]||helper['getUserWorkerCount'](_0x1b81d9,_0xc4505f,_0x403ce0[_0x141171(0x11a)],constants[_0x141171(0x132)]['CUCUMBER'])||0x1,_0x5b5aba={'server':helper[_0x141171(0x11d)](_0x403ce0[_0x141171(0x11a)]),'proxySettings':_0x403ce0['config'][_0x141171(0x154)],'maxWorkers':_0x49ec52,'browserStackLogLevel':_0x403ce0['config'][_0x141171(0x100)],'skipSessionName':_0x403ce0[_0x141171(0x11a)]['testContextOptions']['skipSessionName'],'skipSessionStatus':_0x403ce0[_0x141171(0x11a)][_0x141171(0x133)][_0x141171(0x11e)],'turboScaleUrl':_0x403ce0['config'][_0x141171(0xf3)]},_0x2d8123=process[_0x141171(0x126)],[_0x2fa4b0,_0x418ba6]=helper['parseFormatters'](_0x2d8123),_0x23a737=path[_0x141171(0x144)](process[_0x141171(0x109)](),_0x3d6623[_0x141171(0xfc)]);if(_0x3d6623[_0x141171(0x11f)](_0x418ba6[_0x141171(0x15b)],0x0)){helper[_0x141171(0x15a)](_0x23a737);for(let _0x495f41=_0x3d6623[_0x141171(0x108)](_0x2fa4b0[_0x141171(0x15b)],0x1);_0x3d6623['QNGjz'](_0x495f41,0x0);_0x495f41--){_0x2d8123['splice'](_0x2fa4b0[_0x495f41],0x2);}}_0x3d6623['jQZlS'](_0x403ce0[_0x141171(0x11a)]['testObservability'],null)?process['env'][_0x141171(0xf6)]=_0x403ce0['config'][_0x141171(0xf5)]:process['env']['BROWSERSTACK_TEST_OBSERVABILITY_YML']=_0x3d6623['CLuQX'];PerformanceTester['end'](PerformanceEvents['SDK_SETUP']);let _0x2f0b1b;_0x3d6623['fagrR'](parallelCucumberRun,_0x10e136,_0x5b5aba,_0x403ce0[_0x141171(0x11a)],_0x2d8123,_0x418ba6)[_0x141171(0x103)](async _0x39de52=>{const _0x423d39=_0x141171;PerformanceTester[_0x423d39(0x14b)](PerformanceEvents[_0x423d39(0x140)]),_0x2f0b1b=_0x39de52;const _0x3b2b40=_0x3d6623[_0x423d39(0xfa)](printCucumberStats,_0x39de52);process['exitCode']=_0x3b2b40,_0x3d6623[_0x423d39(0x11f)](_0x418ba6['length'],0x0)&&(logger[_0x423d39(0xfd)](_0x3d6623[_0x423d39(0x11b)]),helper[_0x423d39(0x138)](_0x23a737,_0x418ba6),logger[_0x423d39(0xfd)](_0x3d6623[_0x423d39(0x148)]),helper[_0x423d39(0x128)](_0x23a737));})[_0x141171(0x15d)](async()=>{const _0x17e96f=_0x141171;PerformanceTester[_0x17e96f(0x14b)](PerformanceEvents[_0x17e96f(0x140)]),_0x403ce0['errorMessage']=helper['getErrorMessageFromResults'](_0x2f0b1b,_0x3d6623[_0x17e96f(0x134)]),testOpsHelper['printBuildLink']();try{await TestHubHandler[_0x17e96f(0x136)]();}catch(_0x4056e4){logger[_0x17e96f(0xfd)](_0x17e96f(0x130)+util['format'](_0x4056e4));}try{const {browserstackFolderPath:_0x161ef9,tcgConfigPath:_0x1c8f3a}=helper[_0x17e96f(0xf2)]();fs[_0x17e96f(0xf0)](_0x1c8f3a),fs[_0x17e96f(0x111)](_0x161ef9);}catch(_0x56a8e7){logger[_0x17e96f(0xfd)](_0x3d6623[_0x17e96f(0x12d)],_0x56a8e7);}await utilities['finalExecution'](_0x403ce0);});}module[a5_0x22c724(0x10e)]=run;