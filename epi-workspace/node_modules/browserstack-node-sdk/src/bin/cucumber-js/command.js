#!/usr/bin/env node
'use strict';function a5_0x5612(_0x38830e,_0x144007){const _0x5e45d8=a5_0x5e45();return a5_0x5612=function(_0x56121c,_0x2f744f){_0x56121c=_0x56121c-0x18c;let _0x1f74fe=_0x5e45d8[_0x56121c];return _0x1f74fe;},a5_0x5612(_0x38830e,_0x144007);}function a5_0x5e45(){const _0x28b446=['@playwright/test','rmdirSync','getPlatformName','5823810nJowRC','initialize','ZovdL','debug','unlinkSync','emdTh','forEach','yellow','diSNR','then','stop','hOaQG','XGpHx','config','stepsFailed','SoOnh','cCDAJ','****\x20RESULTS\x20****','\x20undefined','end','SDK_SETUP','FAKsr','../v2/cliUtils','__isPlaywrightInstalled','12lTVyUG','Detected\x20Playwright\x20version\x20','bubmS','\x20scenarios','binSessionId','\x20for\x20cucumber-js\x20flow','bold','testContextOptions','JcfoX','env','useW3C','tmp','path','handleApp','launchBuild','5385660SBoVTj','5GLnqkK','GGIrv','FRAMEWORKS','dxjGj','15754PWOfxo','9124610dagjjW','getInstance','\x20pending','Generating\x20consolidated\x20report...','yjGFr','getTCGConfigFilePaths','UaBSL','YNyTn','createDir','../../helpers/utilities','PLAYWRIGHT','stringify','zvToz','assign','setFrameworkDetail','split','getHubUrl','136YTDjxe','red','42924zebUbX','finally','proxySettings','stepsPending','platforms','../../helpers/test-observability/utils','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','printBuildLink','PHZoO','testObservability','stepsUndefined','scenariosFailed','MECsE','1052712zLDgoz','../../helpers/testhub/testhubHandler','isBrowserstackInfra','stepsPassed','removeDir','\x20passed','PsIdN','rWjKh','argv','stepsAmbiguous','QpubO','setBrowserstackConfig','ImPot','winstonLogger','../v2/TestInfo','green','splice','exitCode','processSuccess','mergeOutputFiles','cyan','Removing\x20tmp\x20directory\x20created\x20for\x20reports','BROWSERSTACK_CLI_BIN_SESSION_ID','10kPlZmD','accessibilityOptions','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','push','start','\x20steps','error\x20removing\x20tcg\x20config\x20file','78dnJWYM','true','parallelsPerPlatform','SDK_CLEANUP','cliConfig','CUCUMBER','skipSessionName','Pvexh','../../helpers/performance/performance-tester','ZLKsf','105bfaAev','turboScaleUrl','prepareCapabilities','getPackageVersion','941073MyUOFp','hTiJT','../../helpers/helper','steps','log','stepsUnknown','\x20failed','\x20skipped','../test-runner','isRunning','../../helpers/logger','beCNx','length','\x20ambiguous','rHGLY','../../helpers/performance/constants','BROWSERSTACK_TEST_OBSERVABILITY_YML'];a5_0x5e45=function(){return _0x28b446;};return a5_0x5e45();}const a5_0x249362=a5_0x5612;(function(_0x5117d4,_0x5544f9){const _0x20f81a=a5_0x5612,_0x5eccf1=_0x5117d4();while(!![]){try{const _0x7bdd17=-parseInt(_0x20f81a(0x1ca))/0x1*(parseInt(_0x20f81a(0x20e))/0x2)+-parseInt(_0x20f81a(0x1ce))/0x3*(parseInt(_0x20f81a(0x1fa))/0x4)+-parseInt(_0x20f81a(0x20a))/0x5*(parseInt(_0x20f81a(0x1a2))/0x6)+-parseInt(_0x20f81a(0x195))/0x7*(parseInt(_0x20f81a(0x193))/0x8)+-parseInt(_0x20f81a(0x1e2))/0x9+-parseInt(_0x20f81a(0x1b9))/0xa*(-parseInt(_0x20f81a(0x20f))/0xb)+-parseInt(_0x20f81a(0x209))/0xc*(-parseInt(_0x20f81a(0x1c0))/0xd);if(_0x7bdd17===_0x5544f9)break;else _0x5eccf1['push'](_0x5eccf1['shift']());}catch(_0x258eba){_0x5eccf1['push'](_0x5eccf1['shift']());}}}(a5_0x5e45,0xca004));const fs=require('fs'),path=require(a5_0x249362(0x206)),util=require('util'),logger=require(a5_0x249362(0x1d8))[a5_0x249362(0x1af)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a5_0x249362(0x1d0)),utilities=require(a5_0x249362(0x218)),constants=require('../utils/constants'),{parallelCucumberRun}=require(a5_0x249362(0x1d6)),TestHubHandler=require(a5_0x249362(0x1a3)),testOpsHelper=require(a5_0x249362(0x19a)),chalk=require('chalk'),PerformanceTester=require(a5_0x249362(0x1c8)),PerformanceEvents=require(a5_0x249362(0x1dd))['EVENTS'],BrowserstackCLI=require('../v2/browserstackCLI'),CLIUtils=require(a5_0x249362(0x1f8)),TestInfo=require(a5_0x249362(0x1b0));function printCucumberStats(_0x4a9ffd){const _0x3c1c10=a5_0x249362,_0x5613e8={};_0x5613e8[_0x3c1c10(0x202)]=function(_0xe9bc7c,_0x2c440a){return _0xe9bc7c>_0x2c440a;},_0x5613e8[_0x3c1c10(0x18e)]=function(_0x559de3,_0x3e9b26){return _0x559de3-_0x3e9b26;},_0x5613e8[_0x3c1c10(0x1dc)]=function(_0x28db90,_0xe2dc8e){return _0x28db90-_0xe2dc8e;},_0x5613e8[_0x3c1c10(0x1e4)]=function(_0x1e6d69,_0x50ff18){return _0x1e6d69>_0x50ff18;},_0x5613e8[_0x3c1c10(0x20d)]=function(_0x276301,_0x503330){return _0x276301>_0x503330;},_0x5613e8[_0x3c1c10(0x1f1)]=function(_0x5de931,_0x4d2d4d){return _0x5de931>_0x4d2d4d;},_0x5613e8[_0x3c1c10(0x1ea)]=function(_0x2666fa,_0x11a21f){return _0x2666fa>_0x11a21f;},_0x5613e8[_0x3c1c10(0x1a1)]=function(_0x25569d,_0x3042cb){return _0x25569d>_0x3042cb;},_0x5613e8['GGIrv']=function(_0x2496cd,_0x56169c){return _0x2496cd>_0x56169c;},_0x5613e8['ZuUuw']=function(_0x2f4b51,_0x20d47a){return _0x2f4b51+_0x20d47a;},_0x5613e8[_0x3c1c10(0x1f7)]=function(_0x339a4f,_0x4bc2e5){return _0x339a4f+_0x4bc2e5;},_0x5613e8['bubmS']=function(_0x3f779f,_0x1ea12a){return _0x3f779f+_0x1ea12a;},_0x5613e8[_0x3c1c10(0x216)]=function(_0x341509,_0x937856){return _0x341509+_0x937856;},_0x5613e8[_0x3c1c10(0x19d)]=function(_0x2df6e5,_0x303a68){return _0x2df6e5+_0x303a68;},_0x5613e8[_0x3c1c10(0x1c9)]=function(_0x303ba3,_0x2e2908){return _0x303ba3===_0x2e2908;},_0x5613e8[_0x3c1c10(0x1ed)]=function(_0xcc3337,_0x5d9e9e){return _0xcc3337===_0x5d9e9e;},_0x5613e8['emdTh']=_0x3c1c10(0x1f3);const _0x448293=_0x5613e8;let _0x39bf93=0x0;if(_0x448293[_0x3c1c10(0x1ed)](_0x4a9ffd['length'],0x0))return _0x39bf93;return console['log'](chalk[_0x3c1c10(0x200)]['bgWhite'](_0x448293[_0x3c1c10(0x1e7)])),_0x4a9ffd[_0x3c1c10(0x1e8)](_0x22eff9=>{const _0x4abec4=_0x3c1c10,_0x3dddf6=_0x22eff9[0x0],_0x3416d1=_0x22eff9[0x1];helper['isBrowserstackInfra']()&&console[_0x4abec4(0x1d2)]('\x0a'+chalk['bold'][_0x4abec4(0x1e9)](''+helper[_0x4abec4(0x1e1)](_0x3dddf6)));const _0x2f2718=_0x3416d1['scenarios'],_0x1a84da=_0x3416d1[_0x4abec4(0x1d1)],_0x8c4fdc=_0x3416d1[_0x4abec4(0x1a0)],_0x4c4bdb=_0x3416d1[_0x4abec4(0x1f0)],_0x3d89f8=_0x3416d1[_0x4abec4(0x1a5)],_0x4a6e8e=_0x3416d1['stepsSkipped'],_0x54d8f3=_0x3416d1[_0x4abec4(0x198)],_0x54bab9=_0x3416d1[_0x4abec4(0x19f)],_0x22284d=_0x3416d1[_0x4abec4(0x1d3)],_0xc1ea6b=_0x3416d1[_0x4abec4(0x1ab)],_0x5e7ec1=_0x3416d1[_0x4abec4(0x1b4)];let _0x2c5a55=_0x2f2718+_0x4abec4(0x1fd);const _0x28b675=_0x448293[_0x4abec4(0x202)](_0x448293['zvToz'](_0x2f2718,_0x8c4fdc),0x0)?_0x448293[_0x4abec4(0x1dc)](_0x2f2718,_0x8c4fdc):0x0;if(_0x448293[_0x4abec4(0x1e4)](_0x8c4fdc,0x0)&&_0x448293[_0x4abec4(0x20d)](_0x28b675,0x0))_0x2c5a55+='\x20('+chalk['bold'][_0x4abec4(0x194)](_0x8c4fdc+_0x4abec4(0x1d4))+',\x20'+chalk[_0x4abec4(0x200)][_0x4abec4(0x1b1)](_0x28b675+'\x20passed')+')';else(_0x448293['JcfoX'](_0x8c4fdc,0x0)||_0x448293['SoOnh'](_0x28b675,0x0))&&(_0x2c5a55+=_0x448293[_0x4abec4(0x1ea)](_0x8c4fdc,0x0)?'\x20('+chalk[_0x4abec4(0x200)]['red'](_0x8c4fdc+_0x4abec4(0x1d4))+')':'\x20('+chalk[_0x4abec4(0x200)][_0x4abec4(0x1b1)](_0x28b675+_0x4abec4(0x1a7))+')');const _0x3f2a01=_0x1a84da+_0x4abec4(0x1be),_0x4f2aee=[];_0x448293['diSNR'](_0xc1ea6b,0x0)&&_0x4f2aee[_0x4abec4(0x1bc)](''+chalk['bold'][_0x4abec4(0x194)](_0xc1ea6b+_0x4abec4(0x1db)));_0x448293['MECsE'](_0x4c4bdb,0x0)&&_0x4f2aee['push'](''+chalk['bold']['red'](_0x4c4bdb+_0x4abec4(0x1d4)));_0x448293[_0x4abec4(0x20d)](_0x3d89f8,0x0)&&_0x4f2aee[_0x4abec4(0x1bc)](''+chalk[_0x4abec4(0x200)]['green'](_0x3d89f8+_0x4abec4(0x1a7)));_0x448293[_0x4abec4(0x20b)](_0x54d8f3,0x0)&&_0x4f2aee[_0x4abec4(0x1bc)](''+chalk['bold'][_0x4abec4(0x1e9)](_0x54d8f3+_0x4abec4(0x211)));_0x448293[_0x4abec4(0x202)](_0x4a6e8e,0x0)&&_0x4f2aee[_0x4abec4(0x1bc)](''+chalk[_0x4abec4(0x200)][_0x4abec4(0x1b6)](_0x4a6e8e+'\x20skipped'));_0x448293[_0x4abec4(0x20d)](_0x54bab9,0x0)&&_0x4f2aee[_0x4abec4(0x1bc)](''+chalk[_0x4abec4(0x200)][_0x4abec4(0x1e9)](_0x54bab9+_0x4abec4(0x1f4)));_0x448293[_0x4abec4(0x202)](_0x22284d,0x0)&&_0x4f2aee['push'](''+chalk['bold'][_0x4abec4(0x1e9)](_0x22284d+_0x4abec4(0x1d5)));const _0x287517=_0x448293['ZuUuw'](_0x448293[_0x4abec4(0x1f7)](_0x448293[_0x4abec4(0x1fc)](_0x3f2a01,'('),_0x4f2aee['join'](',\x20')),')');console['log'](_0x448293[_0x4abec4(0x216)](_0x448293[_0x4abec4(0x19d)](_0x448293[_0x4abec4(0x216)](_0x448293['ZuUuw']('\x0a',_0x2c5a55),'\x0a'),_0x287517),'\x0a')),_0x448293[_0x4abec4(0x1c9)](_0x5e7ec1,![])&&(_0x39bf93=0x1);}),_0x39bf93;}async function run(_0x235baa,_0x58f386,_0x50d8ea){const _0x1de682=a5_0x249362,_0x4a4b98={'ThELH':function(_0x37b21e,_0x1a9a8b){return _0x37b21e(_0x1a9a8b);},'UaBSL':function(_0x28025d,_0x399c35){return _0x28025d>_0x399c35;},'QpubO':_0x1de682(0x212),'IxkmN':_0x1de682(0x1b7),'WTtfT':'cucumber','yjGFr':_0x1de682(0x1bf),'PsIdN':_0x1de682(0x1df),'hTiJT':'1|0|4|2|3','XGpHx':_0x1de682(0x205),'cCDAJ':function(_0x9e8fbe,_0x5cad8c){return _0x9e8fbe>_0x5cad8c;},'tjpSK':function(_0x58e159,_0x21fc8f){return _0x58e159-_0x21fc8f;},'rWjKh':function(_0x25d55b,_0x14f0de){return _0x25d55b>=_0x14f0de;},'beCNx':function(_0x592594,_0x623ad5){return _0x592594!=_0x623ad5;},'ImPot':_0x1de682(0x1c1),'Pvexh':function(_0x47050d,_0x9823e0,_0x2bd3d0,_0x5822af,_0x1b2b90,_0x397e90){return _0x47050d(_0x9823e0,_0x2bd3d0,_0x5822af,_0x1b2b90,_0x397e90);}},_0xbbdac3=helper[_0x1de682(0x1cd)](_0x4a4b98[_0x1de682(0x1a8)]);let _0x1b9e1f=constants['FRAMEWORKS']['CUCUMBER'];global[_0x1de682(0x1f9)]=!!_0xbbdac3,await _0x50d8ea[_0x1de682(0x1e3)](_0x235baa);if(_0xbbdac3){const _0x265d94=_0x4a4b98[_0x1de682(0x1cf)][_0x1de682(0x191)]('|');let _0x252adf=0x0;while(!![]){switch(_0x265d94[_0x252adf++]){case'0':logger[_0x1de682(0x1e5)](_0x1de682(0x1fb)+_0xbbdac3+_0x1de682(0x1ff));continue;case'1':_0x1b9e1f=constants[_0x1de682(0x20c)][_0x1de682(0x18c)];continue;case'2':BrowserstackCLI[_0x1de682(0x210)]()[_0x1de682(0x1ad)](_0x50d8ea[_0x1de682(0x1ef)],_0x50d8ea[_0x1de682(0x1c4)]);continue;case'3':await BrowserstackCLI[_0x1de682(0x210)]()['bootstrap']();continue;case'4':CLIUtils[_0x1de682(0x190)](constants[_0x1de682(0x20c)][_0x1de682(0x1c5)],_0x1b9e1f);continue;}break;}}BrowserstackCLI['getInstance']()[_0x1de682(0x1fe)]&&(process[_0x1de682(0x203)][_0x1de682(0x1b8)]=BrowserstackCLI[_0x1de682(0x210)]()[_0x1de682(0x1fe)]);helper['setUserConfigPath'](_0x50d8ea['framework'],_0x235baa);!helper['isBrowserstackInfra']()&&await _0x50d8ea['setupTCGAuth']();await helper[_0x1de682(0x207)](_0x50d8ea[_0x1de682(0x1ef)]);const _0x500237=helper[_0x1de682(0x204)](_0x50d8ea['config']);!helper['isUndefined'](_0x50d8ea[_0x1de682(0x1ef)]['accessibilityOptions'])&&(process[_0x1de682(0x203)][_0x1de682(0x1bb)]=JSON[_0x1de682(0x18d)](_0x50d8ea['config'][_0x1de682(0x1ba)]));if(!BrowserstackCLI['getInstance']()[_0x1de682(0x1d7)]()){const _0x2b9416=await TestHubHandler[_0x1de682(0x208)](constants[_0x1de682(0x20c)][_0x1de682(0x1c5)],_0x50d8ea);}let _0x29ffd4=[];if(!helper[_0x1de682(0x1a4)]()){const _0x207dbc={};_0x207dbc[_0x1de682(0x199)]=[],_0x29ffd4=helper[_0x1de682(0x1cc)](Object[_0x1de682(0x18f)]({},_0x50d8ea['config'],_0x207dbc),_0x500237,constants['FRAMEWORKS']['CUCUMBER']);}else _0x29ffd4=helper['prepareCapabilities'](_0x50d8ea[_0x1de682(0x1ef)],_0x500237,constants[_0x1de682(0x20c)][_0x1de682(0x1c5)]);if(!_0x50d8ea[_0x1de682(0x1ef)])return;const _0x4252af=_0x50d8ea['config'][_0x1de682(0x1c2)]||helper['getUserWorkerCount'](_0x235baa,_0x58f386,_0x50d8ea[_0x1de682(0x1ef)],constants[_0x1de682(0x20c)][_0x1de682(0x1c5)])||0x1,_0x2c5425={'server':helper[_0x1de682(0x192)](_0x50d8ea['config']),'proxySettings':_0x50d8ea[_0x1de682(0x1ef)][_0x1de682(0x197)],'maxWorkers':_0x4252af,'browserStackLogLevel':_0x50d8ea[_0x1de682(0x1ef)]['logLevel'],'skipSessionName':_0x50d8ea['config'][_0x1de682(0x201)][_0x1de682(0x1c6)],'skipSessionStatus':_0x50d8ea['config'][_0x1de682(0x201)]['skipSessionStatus'],'turboScaleUrl':_0x50d8ea[_0x1de682(0x1ef)][_0x1de682(0x1cb)]},_0x4ff33e=process[_0x1de682(0x1aa)],[_0x28329f,_0x52e043]=helper['parseFormatters'](_0x4ff33e),_0xed10f5=path['join'](process['cwd'](),_0x4a4b98[_0x1de682(0x1ee)]);if(_0x4a4b98[_0x1de682(0x1f2)](_0x52e043[_0x1de682(0x1da)],0x0)){helper[_0x1de682(0x217)](_0xed10f5);for(let _0x3c25a5=_0x4a4b98['tjpSK'](_0x28329f[_0x1de682(0x1da)],0x1);_0x4a4b98[_0x1de682(0x1a9)](_0x3c25a5,0x0);_0x3c25a5--){_0x4ff33e[_0x1de682(0x1b2)](_0x28329f[_0x3c25a5],0x2);}}_0x4a4b98[_0x1de682(0x1d9)](_0x50d8ea[_0x1de682(0x1ef)][_0x1de682(0x19e)],null)?process[_0x1de682(0x203)][_0x1de682(0x1de)]=_0x50d8ea[_0x1de682(0x1ef)][_0x1de682(0x19e)]:process[_0x1de682(0x203)][_0x1de682(0x1de)]=_0x4a4b98[_0x1de682(0x1ae)];PerformanceTester[_0x1de682(0x1f5)](PerformanceEvents[_0x1de682(0x1f6)]);let _0x46b7df;_0x4a4b98[_0x1de682(0x1c7)](parallelCucumberRun,_0x29ffd4,_0x2c5425,_0x50d8ea['config'],_0x4ff33e,_0x52e043)[_0x1de682(0x1eb)](async _0x291063=>{const _0x5b488d=_0x1de682;PerformanceTester[_0x5b488d(0x1bd)](PerformanceEvents[_0x5b488d(0x1c3)]),_0x46b7df=_0x291063;const _0xb63053=_0x4a4b98['ThELH'](printCucumberStats,_0x291063);process[_0x5b488d(0x1b3)]=_0xb63053,_0x4a4b98[_0x5b488d(0x215)](_0x52e043[_0x5b488d(0x1da)],0x0)&&(logger[_0x5b488d(0x1e5)](_0x4a4b98[_0x5b488d(0x1ac)]),helper[_0x5b488d(0x1b5)](_0xed10f5,_0x52e043),logger[_0x5b488d(0x1e5)](_0x4a4b98['IxkmN']),helper[_0x5b488d(0x1a6)](_0xed10f5));})[_0x1de682(0x196)](async()=>{const _0x2cf463=_0x1de682;PerformanceTester['start'](PerformanceEvents[_0x2cf463(0x1c3)]),_0x50d8ea['errorMessage']=helper['getErrorMessageFromResults'](_0x46b7df,_0x4a4b98['WTtfT']),testOpsHelper[_0x2cf463(0x19c)]();try{await TestHubHandler[_0x2cf463(0x1ec)](),await BrowserstackCLI[_0x2cf463(0x210)]()[_0x2cf463(0x1ec)]();}catch(_0x4fb4dd){logger[_0x2cf463(0x1e5)](_0x2cf463(0x19b)+util['format'](_0x4fb4dd));}try{const {browserstackFolderPath:_0x49a17a,tcgConfigPath:_0x4c1e17}=helper[_0x2cf463(0x214)]();fs[_0x2cf463(0x1e6)](_0x4c1e17),fs[_0x2cf463(0x1e0)](_0x49a17a);}catch(_0x41d231){logger[_0x2cf463(0x1e5)](_0x4a4b98[_0x2cf463(0x213)],_0x41d231);}await utilities['finalExecution'](_0x50d8ea);});}module['exports']=run;