#!/usr/bin/env node
'use strict';const a5_0x33d4cc=a5_0x53c6;function a5_0x53c6(_0x49eeb5,_0x5a9570){const _0x5decec=a5_0x5dec();return a5_0x53c6=function(_0x53c6b7,_0x54186b){_0x53c6b7=_0x53c6b7-0x18f;let _0x1db626=_0x5decec[_0x53c6b7];return _0x1db626;},a5_0x53c6(_0x49eeb5,_0x5a9570);}(function(_0x8f4082,_0x4ac828){const _0x141040=a5_0x53c6,_0x40007f=_0x8f4082();while(!![]){try{const _0x233498=parseInt(_0x141040(0x1c0))/0x1*(parseInt(_0x141040(0x20f))/0x2)+-parseInt(_0x141040(0x1c8))/0x3+-parseInt(_0x141040(0x213))/0x4*(-parseInt(_0x141040(0x1b6))/0x5)+-parseInt(_0x141040(0x1f0))/0x6+-parseInt(_0x141040(0x194))/0x7+parseInt(_0x141040(0x1ba))/0x8*(parseInt(_0x141040(0x1fb))/0x9)+-parseInt(_0x141040(0x1b3))/0xa*(parseInt(_0x141040(0x216))/0xb);if(_0x233498===_0x4ac828)break;else _0x40007f['push'](_0x40007f['shift']());}catch(_0x544874){_0x40007f['push'](_0x40007f['shift']());}}}(a5_0x5dec,0x2af97));const fs=require('fs'),path=require('path'),util=require(a5_0x33d4cc(0x1eb)),logger=require(a5_0x33d4cc(0x21b))['winstonLogger'],{default:BrowserStackSetup}=require(a5_0x33d4cc(0x209)),helper=require(a5_0x33d4cc(0x1f2)),utilities=require(a5_0x33d4cc(0x1db)),constants=require(a5_0x33d4cc(0x1ee)),{parallelCucumberRun}=require(a5_0x33d4cc(0x19c)),TestHubHandler=require('../../helpers/testhub/testhubHandler'),testOpsHelper=require(a5_0x33d4cc(0x1a8)),chalk=require('chalk'),PerformanceTester=require(a5_0x33d4cc(0x1e0)),PerformanceEvents=require('../../helpers/performance/constants')[a5_0x33d4cc(0x1b0)],BrowserstackCLI=require(a5_0x33d4cc(0x1ff)),CLIUtils=require(a5_0x33d4cc(0x1fc)),TestInfo=require(a5_0x33d4cc(0x1a4));function printCucumberStats(_0x471573){const _0x302f1b=a5_0x33d4cc,_0x3e5f50={};_0x3e5f50[_0x302f1b(0x1d6)]=function(_0x1487a7,_0x445898){return _0x1487a7>_0x445898;},_0x3e5f50['omlAi']=function(_0x55e992,_0xbdb4ec){return _0x55e992-_0xbdb4ec;},_0x3e5f50[_0x302f1b(0x1d5)]=function(_0x38aa7d,_0x194eca){return _0x38aa7d-_0x194eca;},_0x3e5f50[_0x302f1b(0x193)]=function(_0x315704,_0x1be1cb){return _0x315704>_0x1be1cb;},_0x3e5f50[_0x302f1b(0x1b9)]=function(_0x442883,_0x1d8c94){return _0x442883>_0x1d8c94;},_0x3e5f50[_0x302f1b(0x20b)]=function(_0x35bb75,_0x54ded2){return _0x35bb75>_0x54ded2;},_0x3e5f50[_0x302f1b(0x1f3)]=function(_0xf32455,_0xaf821a){return _0xf32455>_0xaf821a;},_0x3e5f50[_0x302f1b(0x198)]=function(_0x1a8d4b,_0x39c2db){return _0x1a8d4b>_0x39c2db;},_0x3e5f50['WNcyA']=function(_0x3fbb77,_0x45232c){return _0x3fbb77>_0x45232c;},_0x3e5f50[_0x302f1b(0x1d4)]=function(_0x44ff5c,_0x5c7606){return _0x44ff5c+_0x5c7606;},_0x3e5f50['JcBJR']=function(_0x5cce84,_0x4e6094){return _0x5cce84+_0x4e6094;},_0x3e5f50[_0x302f1b(0x19d)]=function(_0x50276b,_0x85dfa0){return _0x50276b+_0x85dfa0;},_0x3e5f50[_0x302f1b(0x19f)]=function(_0x544b57,_0x2bc295){return _0x544b57+_0x2bc295;},_0x3e5f50[_0x302f1b(0x1e6)]=function(_0x1f3303,_0x4711fa){return _0x1f3303+_0x4711fa;},_0x3e5f50[_0x302f1b(0x1c1)]=function(_0x5a0822,_0x1f32be){return _0x5a0822===_0x1f32be;},_0x3e5f50['uRCWv']=function(_0x2011ab,_0x439b70){return _0x2011ab===_0x439b70;},_0x3e5f50[_0x302f1b(0x1ed)]=_0x302f1b(0x1c3);const _0x34395f=_0x3e5f50;let _0x179fcd=0x0;if(_0x34395f[_0x302f1b(0x1ce)](_0x471573[_0x302f1b(0x21c)],0x0))return _0x179fcd;return console[_0x302f1b(0x205)](chalk[_0x302f1b(0x1b1)][_0x302f1b(0x1c4)](_0x34395f[_0x302f1b(0x1ed)])),_0x471573[_0x302f1b(0x219)](_0x208733=>{const _0x52cae7=_0x302f1b,_0x9d62e2=_0x208733[0x0],_0x5c7b02=_0x208733[0x1];helper[_0x52cae7(0x1d0)]()&&console[_0x52cae7(0x205)]('\x0a'+chalk[_0x52cae7(0x1b1)][_0x52cae7(0x1de)](''+helper[_0x52cae7(0x1e4)](_0x9d62e2)));const _0x57c1a2=_0x5c7b02[_0x52cae7(0x195)],_0x3a3930=_0x5c7b02[_0x52cae7(0x1f8)],_0x357db5=_0x5c7b02['scenariosFailed'],_0x3b3c90=_0x5c7b02[_0x52cae7(0x20a)],_0x5337da=_0x5c7b02[_0x52cae7(0x1d1)],_0x375790=_0x5c7b02[_0x52cae7(0x214)],_0x22aff2=_0x5c7b02[_0x52cae7(0x18f)],_0x33b7d1=_0x5c7b02['stepsUndefined'],_0x503603=_0x5c7b02[_0x52cae7(0x212)],_0x500839=_0x5c7b02[_0x52cae7(0x1cf)],_0x1038d2=_0x5c7b02[_0x52cae7(0x1bf)];let _0x1d2966=_0x57c1a2+'\x20scenarios';const _0x2caf15=_0x34395f[_0x52cae7(0x1d6)](_0x34395f[_0x52cae7(0x1a5)](_0x57c1a2,_0x357db5),0x0)?_0x34395f['yibiZ'](_0x57c1a2,_0x357db5):0x0;if(_0x34395f[_0x52cae7(0x193)](_0x357db5,0x0)&&_0x34395f[_0x52cae7(0x1d6)](_0x2caf15,0x0))_0x1d2966+='\x20('+chalk[_0x52cae7(0x1b1)][_0x52cae7(0x1f4)](_0x357db5+_0x52cae7(0x202))+',\x20'+chalk['bold']['green'](_0x2caf15+'\x20passed')+')';else(_0x34395f[_0x52cae7(0x1b9)](_0x357db5,0x0)||_0x34395f[_0x52cae7(0x20b)](_0x2caf15,0x0))&&(_0x1d2966+=_0x34395f['essZk'](_0x357db5,0x0)?'\x20('+chalk[_0x52cae7(0x1b1)][_0x52cae7(0x1f4)](_0x357db5+_0x52cae7(0x202))+')':'\x20('+chalk[_0x52cae7(0x1b1)][_0x52cae7(0x1be)](_0x2caf15+'\x20passed')+')');const _0x310cc6=_0x3a3930+'\x20steps',_0x4c01cd=[];_0x34395f['ONRmc'](_0x500839,0x0)&&_0x4c01cd['push'](''+chalk['bold'][_0x52cae7(0x1f4)](_0x500839+'\x20ambiguous'));_0x34395f[_0x52cae7(0x198)](_0x3b3c90,0x0)&&_0x4c01cd[_0x52cae7(0x201)](''+chalk['bold'][_0x52cae7(0x1f4)](_0x3b3c90+_0x52cae7(0x202)));_0x34395f[_0x52cae7(0x1f1)](_0x5337da,0x0)&&_0x4c01cd[_0x52cae7(0x201)](''+chalk[_0x52cae7(0x1b1)][_0x52cae7(0x1be)](_0x5337da+_0x52cae7(0x1ec)));_0x34395f[_0x52cae7(0x198)](_0x22aff2,0x0)&&_0x4c01cd[_0x52cae7(0x201)](''+chalk['bold']['yellow'](_0x22aff2+'\x20pending'));_0x34395f[_0x52cae7(0x1f3)](_0x375790,0x0)&&_0x4c01cd[_0x52cae7(0x201)](''+chalk[_0x52cae7(0x1b1)][_0x52cae7(0x196)](_0x375790+'\x20skipped'));_0x34395f[_0x52cae7(0x1f1)](_0x33b7d1,0x0)&&_0x4c01cd[_0x52cae7(0x201)](''+chalk[_0x52cae7(0x1b1)][_0x52cae7(0x1de)](_0x33b7d1+_0x52cae7(0x1cb)));_0x34395f[_0x52cae7(0x1d6)](_0x503603,0x0)&&_0x4c01cd[_0x52cae7(0x201)](''+chalk['bold'][_0x52cae7(0x1de)](_0x503603+_0x52cae7(0x1f6)));const _0x425e68=_0x34395f[_0x52cae7(0x1d4)](_0x34395f[_0x52cae7(0x1fd)](_0x34395f[_0x52cae7(0x1fd)](_0x310cc6,'('),_0x4c01cd[_0x52cae7(0x1ad)](',\x20')),')');console[_0x52cae7(0x205)](_0x34395f['GPFnN'](_0x34395f[_0x52cae7(0x19d)](_0x34395f[_0x52cae7(0x19f)](_0x34395f['tgUrz']('\x0a',_0x1d2966),'\x0a'),_0x425e68),'\x0a')),_0x34395f[_0x52cae7(0x1c1)](_0x1038d2,![])&&(_0x179fcd=0x1);}),_0x179fcd;}function a5_0x5dec(){const _0x104f77=['start','getPlatformName','@playwright/test','tgUrz','Detected\x20Playwright\x20version\x20','OWnPV','EvHXF','iqYnW','util','\x20passed','RjQxC','../utils/constants','cucumber','772722hudObW','WNcyA','../../helpers/helper','ONRmc','red','mkhfK','\x20skipped','errorMessage','steps','binSessionId','setupTCGAuth','18Wsjupc','../v2/cliUtils','JcBJR','testObservability','../v2/browserstackCLI','isUndefined','push','\x20failed','prepareCapabilities','finally','log','gsVsk','PLAYWRIGHT','Removing\x20tmp\x20directory\x20created\x20for\x20reports','../../helpers/BrowserStackSetup','stepsFailed','YugCP','getInstance','\x20for\x20cucumber-js\x20flow','mergeOutputFiles','2ChbfJW','format','parallelsPerPlatform','stepsUnknown','8VtKeZP','stepsSkipped','cwd','13585xCxmZO','useW3C','rmdirSync','forEach','foJGu','../../helpers/logger','length','stepsPending','removeDir','BROWSERSTACK_TEST_OBSERVABILITY_YML','logLevel','SkDrP','960764XOLszh','scenarios','cyan','isRunning','sYGFA','env','getErrorMessageFromResults','ScGbT','../test-runner','ejlMF','skipSessionName','dvjnP','error\x20removing\x20tcg\x20config\x20file','accessibilityOptions','skipSessionStatus','setUserConfigPath','../v2/TestInfo','omlAi','FRAMEWORKS','sNHQp','../../helpers/test-observability/utils','4|2|1|3|0','initialize','framework','splice','join','launchBuild','jaMwR','EVENTS','bold','config','450IHRJjP','szJiL','unlinkSync','226150knDkdl','proxySettings','__isPlaywrightInstalled','essZk','509728dUasnv','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','createDir','urPaI','green','processSuccess','338135rdxvYQ','uJCFN','VsiXY','****\x20RESULTS\x20****','bgWhite','tmp','stop','stringify','175170ZpnZuR','getTCGConfigFilePaths','VUgGD','\x20undefined','parseFormatters','CUCUMBER','uRCWv','stepsAmbiguous','isBrowserstackInfra','stepsPassed','SDK_SETUP','debug','GPFnN','yibiZ','invTd','bootstrap','turboScaleUrl','testContextOptions','BROWSERSTACK_CLI_BIN_SESSION_ID','../../helpers/utilities','exports','finalExecution','yellow','end','../../helpers/performance/performance-tester','platforms','RxDMe'];a5_0x5dec=function(){return _0x104f77;};return a5_0x5dec();}async function run(_0x128d50,_0x43e3e7,_0x4be38f){const _0x481eaa=a5_0x33d4cc,_0x46fbe9={'OWnPV':function(_0x42c19b,_0x2618a7){return _0x42c19b(_0x2618a7);},'RxDMe':function(_0x10d815,_0x52f0bd){return _0x10d815>_0x52f0bd;},'EvHXF':'Generating\x20consolidated\x20report...','iqYnW':_0x481eaa(0x208),'mkhfK':_0x481eaa(0x1ef),'foJGu':_0x481eaa(0x1a0),'szJiL':_0x481eaa(0x1e5),'VUgGD':_0x481eaa(0x1a9),'jaMwR':_0x481eaa(0x1c5),'ScGbT':function(_0x1c7f6c,_0xa48ba8){return _0x1c7f6c-_0xa48ba8;},'gsVsk':function(_0x4b9752,_0x417116){return _0x4b9752>=_0x417116;},'sNHQp':function(_0x22b9a5,_0x321f10){return _0x22b9a5!=_0x321f10;},'VsiXY':'true','urPaI':function(_0x3d7586,_0x129fd6,_0x919498,_0x2a4980,_0x81b44d,_0x104edd){return _0x3d7586(_0x129fd6,_0x919498,_0x2a4980,_0x81b44d,_0x104edd);}},_0x422d8f=helper['getPackageVersion'](_0x46fbe9[_0x481eaa(0x1b4)]);let _0x16422c=constants['FRAMEWORKS']['CUCUMBER'];global[_0x481eaa(0x1b8)]=!!_0x422d8f,await _0x4be38f[_0x481eaa(0x1aa)](_0x128d50);if(_0x422d8f){const _0x3c6e9a=_0x46fbe9[_0x481eaa(0x1ca)]['split']('|');let _0x356439=0x0;while(!![]){switch(_0x3c6e9a[_0x356439++]){case'0':await BrowserstackCLI[_0x481eaa(0x20c)]()[_0x481eaa(0x1d7)]();continue;case'1':CLIUtils['setFrameworkDetail'](constants['FRAMEWORKS'][_0x481eaa(0x1cd)],_0x16422c);continue;case'2':logger[_0x481eaa(0x1d3)](_0x481eaa(0x1e7)+_0x422d8f+_0x481eaa(0x20d));continue;case'3':BrowserstackCLI['getInstance']()['setBrowserstackConfig'](_0x4be38f['config'],_0x4be38f['cliConfig']);continue;case'4':_0x16422c=constants[_0x481eaa(0x1a6)][_0x481eaa(0x207)];continue;}break;}}BrowserstackCLI['getInstance']()[_0x481eaa(0x1f9)]&&(process[_0x481eaa(0x199)][_0x481eaa(0x1da)]=BrowserstackCLI[_0x481eaa(0x20c)]()[_0x481eaa(0x1f9)]);helper[_0x481eaa(0x1a3)](_0x4be38f[_0x481eaa(0x1ab)],_0x128d50);!helper[_0x481eaa(0x1d0)]()&&await _0x4be38f[_0x481eaa(0x1fa)]();await helper['handleApp'](_0x4be38f[_0x481eaa(0x1b2)]);const _0x422789=helper[_0x481eaa(0x217)](_0x4be38f[_0x481eaa(0x1b2)]);!helper[_0x481eaa(0x200)](_0x4be38f[_0x481eaa(0x1b2)][_0x481eaa(0x1a1)])&&(process['env'][_0x481eaa(0x1bb)]=JSON[_0x481eaa(0x1c7)](_0x4be38f[_0x481eaa(0x1b2)][_0x481eaa(0x1a1)]));if(!BrowserstackCLI[_0x481eaa(0x20c)]()[_0x481eaa(0x197)]()){const _0x87405c=await TestHubHandler[_0x481eaa(0x1ae)](constants['FRAMEWORKS'][_0x481eaa(0x1cd)],_0x4be38f);}let _0x503680=[];if(!helper['isBrowserstackInfra']()){const _0xde2be1={};_0xde2be1[_0x481eaa(0x1e1)]=[],_0x503680=helper['prepareCapabilities'](Object['assign']({},_0x4be38f[_0x481eaa(0x1b2)],_0xde2be1),_0x422789,constants[_0x481eaa(0x1a6)]['CUCUMBER']);}else _0x503680=helper[_0x481eaa(0x203)](_0x4be38f['config'],_0x422789,constants['FRAMEWORKS'][_0x481eaa(0x1cd)]);if(!_0x4be38f[_0x481eaa(0x1b2)])return;const _0x2c3a9a=_0x4be38f['config'][_0x481eaa(0x211)]||helper['getUserWorkerCount'](_0x128d50,_0x43e3e7,_0x4be38f[_0x481eaa(0x1b2)],constants[_0x481eaa(0x1a6)]['CUCUMBER'])||0x1,_0x27d2de={'server':helper['getHubUrl'](_0x4be38f[_0x481eaa(0x1b2)]),'proxySettings':_0x4be38f[_0x481eaa(0x1b2)][_0x481eaa(0x1b7)],'maxWorkers':_0x2c3a9a,'browserStackLogLevel':_0x4be38f[_0x481eaa(0x1b2)][_0x481eaa(0x192)],'skipSessionName':_0x4be38f['config'][_0x481eaa(0x1d9)][_0x481eaa(0x19e)],'skipSessionStatus':_0x4be38f[_0x481eaa(0x1b2)][_0x481eaa(0x1d9)][_0x481eaa(0x1a2)],'turboScaleUrl':_0x4be38f[_0x481eaa(0x1b2)][_0x481eaa(0x1d8)]},_0x42e054=process['argv'],[_0x3c56c1,_0x197d9f]=helper[_0x481eaa(0x1cc)](_0x42e054),_0x3e8e15=path[_0x481eaa(0x1ad)](process[_0x481eaa(0x215)](),_0x46fbe9[_0x481eaa(0x1af)]);if(_0x46fbe9[_0x481eaa(0x1e2)](_0x197d9f['length'],0x0)){helper[_0x481eaa(0x1bc)](_0x3e8e15);for(let _0x4e068d=_0x46fbe9[_0x481eaa(0x19b)](_0x3c56c1[_0x481eaa(0x21c)],0x1);_0x46fbe9[_0x481eaa(0x206)](_0x4e068d,0x0);_0x4e068d--){_0x42e054[_0x481eaa(0x1ac)](_0x3c56c1[_0x4e068d],0x2);}}_0x46fbe9[_0x481eaa(0x1a7)](_0x4be38f[_0x481eaa(0x1b2)][_0x481eaa(0x1fe)],null)?process['env'][_0x481eaa(0x191)]=_0x4be38f[_0x481eaa(0x1b2)][_0x481eaa(0x1fe)]:process[_0x481eaa(0x199)][_0x481eaa(0x191)]=_0x46fbe9[_0x481eaa(0x1c2)];PerformanceTester[_0x481eaa(0x1df)](PerformanceEvents[_0x481eaa(0x1d2)]);let _0x2a9fc3;_0x46fbe9[_0x481eaa(0x1bd)](parallelCucumberRun,_0x503680,_0x27d2de,_0x4be38f[_0x481eaa(0x1b2)],_0x42e054,_0x197d9f)['then'](async _0x3e3d7a=>{const _0x424aa3=_0x481eaa;PerformanceTester['start'](PerformanceEvents['SDK_CLEANUP']),_0x2a9fc3=_0x3e3d7a;const _0x2f6827=_0x46fbe9[_0x424aa3(0x1e8)](printCucumberStats,_0x3e3d7a);process['exitCode']=_0x2f6827,_0x46fbe9[_0x424aa3(0x1e2)](_0x197d9f['length'],0x0)&&(logger[_0x424aa3(0x1d3)](_0x46fbe9[_0x424aa3(0x1e9)]),helper[_0x424aa3(0x20e)](_0x3e8e15,_0x197d9f),logger[_0x424aa3(0x1d3)](_0x46fbe9[_0x424aa3(0x1ea)]),helper[_0x424aa3(0x190)](_0x3e8e15));})[_0x481eaa(0x204)](async()=>{const _0x5e025e=_0x481eaa;PerformanceTester[_0x5e025e(0x1e3)](PerformanceEvents['SDK_CLEANUP']),_0x4be38f[_0x5e025e(0x1f7)]=helper[_0x5e025e(0x19a)](_0x2a9fc3,_0x46fbe9[_0x5e025e(0x1f5)]),testOpsHelper['printBuildLink']();try{await TestHubHandler[_0x5e025e(0x1c6)](),await BrowserstackCLI[_0x5e025e(0x20c)]()['stop']();}catch(_0x336e59){logger[_0x5e025e(0x1d3)]('Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20'+util[_0x5e025e(0x210)](_0x336e59));}try{const {browserstackFolderPath:_0x2d93e1,tcgConfigPath:_0x25871a}=helper[_0x5e025e(0x1c9)]();fs[_0x5e025e(0x1b5)](_0x25871a),fs[_0x5e025e(0x218)](_0x2d93e1);}catch(_0x937d7c){logger['debug'](_0x46fbe9[_0x5e025e(0x21a)],_0x937d7c);}await utilities[_0x5e025e(0x1dd)](_0x4be38f);});}module[a5_0x33d4cc(0x1dc)]=run;