#!/usr/bin/env node
'use strict';const a5_0x1295bb=a5_0x3c0b;function a5_0x1619(){const _0x22b1e7=['yUtka','BROWSERSTACK_TEST_OBSERVABILITY_YML','removeDir','\x20passed','rmdirSync','log','6653640WnkKCw','length','format','prepareCapabilities','wzGsS','tmp','isBrowserstackInfra','env','nhVaD','972740xnvTiJ','skipSessionStatus','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','platforms','ZSeno','lCdxN','testObservability','errorMessage','ufVHh','kiWCa','getHubUrl','\x20failed','63RxCcCu','stepsFailed','MXwAX','finalExecution','framework','KOFEE','nuTuT','3843396tfNVWW','unlinkSync','yellow','processSuccess','exitCode','parallelsPerPlatform','initialize','../../helpers/performance/constants','green','../../helpers/testhub/testhubHandler','../../helpers/utilities','debug','getTCGConfigFilePaths','stringify','\x20pending','mergeOutputFiles','840632srASga','490576oUOIQg','KGOkq','start','useW3C','stepsSkipped','EXmTo','red','jBwAc','forEach','6xxEqYR','stepsAmbiguous','CUCUMBER','\x20scenarios','../../helpers/BrowserStackSetup','util','end','steps','path','EfKNl','config','accessibilityOptions','error\x20removing\x20tcg\x20config\x20file','../../helpers/test-observability/utils','bold','jRHmW','join','35754QpigFO','turboScaleUrl','../test-runner','stepsUndefined','push','finally','getPlatformName','ojuvM','../../helpers/logger','830OaySQf','../../helpers/helper','parseFormatters','cwd','testContextOptions','splice','SDK_SETUP','YHPgD','then','chalk','setupTCGAuth','getUserWorkerCount','logLevel','proxySettings','printBuildLink','assign','stepsPending','exports','pTwoI','qUdsc','dtVDe','UhauX','RxJLz','SDK_CLEANUP','Generating\x20consolidated\x20report...','OQVKY','FRAMEWORKS','\x20skipped','****\x20RESULTS\x20****','nVSZt','scenariosFailed','cyan','284328BSSZBZ'];a5_0x1619=function(){return _0x22b1e7;};return a5_0x1619();}(function(_0x17dba4,_0x18cc77){const _0x5e4fe2=a5_0x3c0b,_0x1499e3=_0x17dba4();while(!![]){try{const _0x51507f=parseInt(_0x5e4fe2(0x14e))/0x1+parseInt(_0x5e4fe2(0x172))/0x2+-parseInt(_0x5e4fe2(0x104))/0x3*(-parseInt(_0x5e4fe2(0x171))/0x4)+parseInt(_0x5e4fe2(0x11e))/0x5*(-parseInt(_0x5e4fe2(0x115))/0x6)+-parseInt(_0x5e4fe2(0x15a))/0x7*(-parseInt(_0x5e4fe2(0x13e))/0x8)+parseInt(_0x5e4fe2(0x161))/0x9+-parseInt(_0x5e4fe2(0x145))/0xa;if(_0x51507f===_0x18cc77)break;else _0x1499e3['push'](_0x1499e3['shift']());}catch(_0x429d52){_0x1499e3['push'](_0x1499e3['shift']());}}}(a5_0x1619,0xb264b));const fs=require('fs'),path=require(a5_0x1295bb(0x10c)),util=require(a5_0x1295bb(0x109)),logger=require(a5_0x1295bb(0x11d))['winstonLogger'],{default:BrowserStackSetup}=require(a5_0x1295bb(0x108)),helper=require(a5_0x1295bb(0x11f)),utilities=require(a5_0x1295bb(0x16b)),constants=require('../utils/constants'),{parallelCucumberRun}=require(a5_0x1295bb(0x117)),TestHubHandler=require(a5_0x1295bb(0x16a)),testOpsHelper=require(a5_0x1295bb(0x111)),chalk=require(a5_0x1295bb(0x127)),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require(a5_0x1295bb(0x168))['EVENTS'];function printCucumberStats(_0x26e464){const _0x24d1cf=a5_0x1295bb,_0x684535={};_0x684535[_0x24d1cf(0x11c)]=function(_0x4c0d7c,_0x2c3ce2){return _0x4c0d7c>_0x2c3ce2;},_0x684535['nhVaD']=function(_0x49ea77,_0x543e4a){return _0x49ea77-_0x543e4a;},_0x684535[_0x24d1cf(0x133)]=function(_0x2f70eb,_0x3813b7){return _0x2f70eb>_0x3813b7;},_0x684535[_0x24d1cf(0x134)]=function(_0x311811,_0x256bd5){return _0x311811>_0x256bd5;},_0x684535[_0x24d1cf(0x137)]=function(_0x15df59,_0x67ef13){return _0x15df59>_0x67ef13;},_0x684535['jBwAc']=function(_0xb04a76,_0x44fc0c){return _0xb04a76>_0x44fc0c;},_0x684535[_0x24d1cf(0x132)]=function(_0x1e8932,_0x11f1eb){return _0x1e8932>_0x11f1eb;},_0x684535[_0x24d1cf(0x160)]=function(_0x4dd56e,_0x5e7837){return _0x4dd56e>_0x5e7837;},_0x684535['EfKNl']=function(_0x2ac2e5,_0x23af96){return _0x2ac2e5>_0x23af96;},_0x684535['KOFEE']=function(_0x263af2,_0x3bc3e6){return _0x263af2+_0x3bc3e6;},_0x684535[_0x24d1cf(0x100)]=function(_0x5838f0,_0x7da1a8){return _0x5838f0+_0x7da1a8;},_0x684535[_0x24d1cf(0x131)]=function(_0x5aff36,_0xdeb8f8){return _0x5aff36+_0xdeb8f8;},_0x684535[_0x24d1cf(0x15c)]=function(_0x1f4168,_0x228522){return _0x1f4168===_0x228522;},_0x684535['KGOkq']=function(_0x1608bd,_0x4a98cb){return _0x1608bd===_0x4a98cb;},_0x684535[_0x24d1cf(0x13b)]=_0x24d1cf(0x13a);const _0x1ce457=_0x684535;let _0x1eccf4=0x0;if(_0x1ce457[_0x24d1cf(0x173)](_0x26e464[_0x24d1cf(0x146)],0x0))return _0x1eccf4;return console['log'](chalk[_0x24d1cf(0x112)]['bgWhite'](_0x1ce457['nVSZt'])),_0x26e464[_0x24d1cf(0x103)](_0x336b39=>{const _0x452003=_0x24d1cf,_0x1c79be=_0x336b39[0x0],_0x205aa2=_0x336b39[0x1];helper[_0x452003(0x14b)]()&&console[_0x452003(0x144)]('\x0a'+chalk[_0x452003(0x112)]['yellow'](''+helper[_0x452003(0x11b)](_0x1c79be)));const _0x5b42d0=_0x205aa2['scenarios'],_0x4483f7=_0x205aa2[_0x452003(0x10b)],_0x2ff928=_0x205aa2[_0x452003(0x13c)],_0x165bc5=_0x205aa2[_0x452003(0x15b)],_0x2e7052=_0x205aa2['stepsPassed'],_0x3bc90e=_0x205aa2[_0x452003(0xff)],_0x395d49=_0x205aa2[_0x452003(0x12e)],_0x3698cc=_0x205aa2[_0x452003(0x118)],_0x497e86=_0x205aa2['stepsUnknown'],_0xed3b7d=_0x205aa2[_0x452003(0x105)],_0x1d9270=_0x205aa2[_0x452003(0x164)];let _0x270785=_0x5b42d0+_0x452003(0x107);const _0x4bca33=_0x1ce457[_0x452003(0x11c)](_0x1ce457[_0x452003(0x14d)](_0x5b42d0,_0x2ff928),0x0)?_0x1ce457['nhVaD'](_0x5b42d0,_0x2ff928):0x0;if(_0x1ce457[_0x452003(0x133)](_0x2ff928,0x0)&&_0x1ce457[_0x452003(0x134)](_0x4bca33,0x0))_0x270785+='\x20('+chalk[_0x452003(0x112)]['red'](_0x2ff928+'\x20failed')+',\x20'+chalk[_0x452003(0x112)]['green'](_0x4bca33+_0x452003(0x142))+')';else(_0x1ce457[_0x452003(0x137)](_0x2ff928,0x0)||_0x1ce457[_0x452003(0x134)](_0x4bca33,0x0))&&(_0x270785+=_0x1ce457[_0x452003(0x137)](_0x2ff928,0x0)?'\x20('+chalk[_0x452003(0x112)][_0x452003(0x101)](_0x2ff928+'\x20failed')+')':'\x20('+chalk[_0x452003(0x112)][_0x452003(0x169)](_0x4bca33+_0x452003(0x142))+')');const _0x2abda6=_0x4483f7+'\x20steps',_0x40632f=[];_0x1ce457['UhauX'](_0xed3b7d,0x0)&&_0x40632f[_0x452003(0x119)](''+chalk[_0x452003(0x112)]['red'](_0xed3b7d+'\x20ambiguous'));_0x1ce457[_0x452003(0x102)](_0x165bc5,0x0)&&_0x40632f['push'](''+chalk[_0x452003(0x112)]['red'](_0x165bc5+_0x452003(0x159)));_0x1ce457['OQVKY'](_0x2e7052,0x0)&&_0x40632f[_0x452003(0x119)](''+chalk[_0x452003(0x112)][_0x452003(0x169)](_0x2e7052+_0x452003(0x142)));_0x1ce457[_0x452003(0x133)](_0x395d49,0x0)&&_0x40632f[_0x452003(0x119)](''+chalk[_0x452003(0x112)][_0x452003(0x163)](_0x395d49+_0x452003(0x16f)));_0x1ce457['dtVDe'](_0x3bc90e,0x0)&&_0x40632f['push'](''+chalk[_0x452003(0x112)][_0x452003(0x13d)](_0x3bc90e+_0x452003(0x139)));_0x1ce457[_0x452003(0x160)](_0x3698cc,0x0)&&_0x40632f[_0x452003(0x119)](''+chalk['bold']['yellow'](_0x3698cc+'\x20undefined'));_0x1ce457[_0x452003(0x10d)](_0x497e86,0x0)&&_0x40632f[_0x452003(0x119)](''+chalk[_0x452003(0x112)][_0x452003(0x163)](_0x497e86+_0x452003(0x139)));const _0x473261=_0x1ce457[_0x452003(0x15f)](_0x1ce457['KOFEE'](_0x1ce457[_0x452003(0x100)](_0x2abda6,'('),_0x40632f[_0x452003(0x114)](',\x20')),')');console['log'](_0x1ce457[_0x452003(0x100)](_0x1ce457['EXmTo'](_0x1ce457[_0x452003(0x100)](_0x1ce457[_0x452003(0x131)]('\x0a',_0x270785),'\x0a'),_0x473261),'\x0a')),_0x1ce457[_0x452003(0x15c)](_0x1d9270,![])&&(_0x1eccf4=0x1);}),_0x1eccf4;}function a5_0x3c0b(_0x294efd,_0x1afda7){const _0x16198d=a5_0x1619();return a5_0x3c0b=function(_0x3c0bd6,_0x14afaf){_0x3c0bd6=_0x3c0bd6-0xfd;let _0x3f318b=_0x16198d[_0x3c0bd6];return _0x3f318b;},a5_0x3c0b(_0x294efd,_0x1afda7);}async function run(_0x245097,_0x178c39,_0x5ba9cc){const _0x4bb702=a5_0x1295bb,_0x139a97={'czxbe':function(_0x24695f,_0x54ceb0){return _0x24695f(_0x54ceb0);},'pTwoI':function(_0x41ed17,_0x36961f){return _0x41ed17>_0x36961f;},'kiWCa':_0x4bb702(0x136),'ZSeno':'Removing\x20tmp\x20directory\x20created\x20for\x20reports','YHPgD':'cucumber','ufVHh':_0x4bb702(0x110),'bgHME':_0x4bb702(0x14a),'yUtka':function(_0x55a0b8,_0x1ff1b4){return _0x55a0b8-_0x1ff1b4;},'wzGsS':function(_0x35fae8,_0x1b4de9){return _0x35fae8>=_0x1b4de9;},'jRHmW':function(_0x42d6c0,_0x6d58f3){return _0x42d6c0!=_0x6d58f3;},'lCdxN':'true','rUPcS':function(_0x222cae,_0x4c685e,_0x1810d9,_0x5d29ab,_0x33bd24,_0x14bdf3){return _0x222cae(_0x4c685e,_0x1810d9,_0x5d29ab,_0x33bd24,_0x14bdf3);}};await _0x5ba9cc[_0x4bb702(0x167)](_0x245097),helper['setUserConfigPath'](_0x5ba9cc[_0x4bb702(0x15e)],_0x245097);!helper[_0x4bb702(0x14b)]()&&await _0x5ba9cc[_0x4bb702(0x128)]();await helper['handleApp'](_0x5ba9cc[_0x4bb702(0x10e)]);const _0x4f3d31=helper[_0x4bb702(0xfe)](_0x5ba9cc[_0x4bb702(0x10e)]);!helper['isUndefined'](_0x5ba9cc[_0x4bb702(0x10e)]['accessibilityOptions'])&&(process[_0x4bb702(0x14c)]['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON[_0x4bb702(0x16e)](_0x5ba9cc[_0x4bb702(0x10e)][_0x4bb702(0x10f)]));const _0x304119=await TestHubHandler['launchBuild'](constants['FRAMEWORKS'][_0x4bb702(0x106)],_0x5ba9cc);let _0x4636c2=[];if(!helper[_0x4bb702(0x14b)]()){const _0x113703={};_0x113703[_0x4bb702(0x151)]=[],_0x4636c2=helper[_0x4bb702(0x148)](Object[_0x4bb702(0x12d)]({},_0x5ba9cc[_0x4bb702(0x10e)],_0x113703),_0x4f3d31,constants[_0x4bb702(0x138)][_0x4bb702(0x106)]);}else _0x4636c2=helper['prepareCapabilities'](_0x5ba9cc[_0x4bb702(0x10e)],_0x4f3d31,constants[_0x4bb702(0x138)]['CUCUMBER']);if(!_0x5ba9cc[_0x4bb702(0x10e)])return;const _0x2bbbe9=_0x5ba9cc[_0x4bb702(0x10e)][_0x4bb702(0x166)]||helper[_0x4bb702(0x129)](_0x245097,_0x178c39,_0x5ba9cc[_0x4bb702(0x10e)],constants['FRAMEWORKS'][_0x4bb702(0x106)])||0x1,_0x58d3e8={'server':helper[_0x4bb702(0x158)](_0x5ba9cc[_0x4bb702(0x10e)]),'proxySettings':_0x5ba9cc[_0x4bb702(0x10e)][_0x4bb702(0x12b)],'maxWorkers':_0x2bbbe9,'browserStackLogLevel':_0x5ba9cc[_0x4bb702(0x10e)][_0x4bb702(0x12a)],'skipSessionName':_0x5ba9cc['config'][_0x4bb702(0x122)]['skipSessionName'],'skipSessionStatus':_0x5ba9cc[_0x4bb702(0x10e)]['testContextOptions'][_0x4bb702(0x14f)],'turboScaleUrl':_0x5ba9cc[_0x4bb702(0x10e)][_0x4bb702(0x116)]},_0x4d2860=process['argv'],[_0x3304cc,_0x2d5264]=helper[_0x4bb702(0x120)](_0x4d2860),_0x3b8979=path['join'](process[_0x4bb702(0x121)](),_0x139a97['bgHME']);if(_0x139a97[_0x4bb702(0x130)](_0x2d5264['length'],0x0)){helper['createDir'](_0x3b8979);for(let _0x5d9166=_0x139a97[_0x4bb702(0x13f)](_0x3304cc[_0x4bb702(0x146)],0x1);_0x139a97[_0x4bb702(0x149)](_0x5d9166,0x0);_0x5d9166--){_0x4d2860[_0x4bb702(0x123)](_0x3304cc[_0x5d9166],0x2);}}_0x139a97[_0x4bb702(0x113)](_0x5ba9cc[_0x4bb702(0x10e)][_0x4bb702(0x154)],null)?process[_0x4bb702(0x14c)][_0x4bb702(0x140)]=_0x5ba9cc['config'][_0x4bb702(0x154)]:process['env'][_0x4bb702(0x140)]=_0x139a97[_0x4bb702(0x153)];PerformanceTester[_0x4bb702(0x10a)](PerformanceEvents[_0x4bb702(0x124)]);let _0x651489;_0x139a97['rUPcS'](parallelCucumberRun,_0x4636c2,_0x58d3e8,_0x5ba9cc[_0x4bb702(0x10e)],_0x4d2860,_0x2d5264)[_0x4bb702(0x126)](async _0x135eef=>{const _0x3657eb=_0x4bb702;PerformanceTester[_0x3657eb(0xfd)](PerformanceEvents[_0x3657eb(0x135)]),_0x651489=_0x135eef;const _0x161b02=_0x139a97['czxbe'](printCucumberStats,_0x135eef);process[_0x3657eb(0x165)]=_0x161b02,_0x139a97[_0x3657eb(0x130)](_0x2d5264[_0x3657eb(0x146)],0x0)&&(logger[_0x3657eb(0x16c)](_0x139a97[_0x3657eb(0x157)]),helper[_0x3657eb(0x170)](_0x3b8979,_0x2d5264),logger[_0x3657eb(0x16c)](_0x139a97[_0x3657eb(0x152)]),helper[_0x3657eb(0x141)](_0x3b8979));})[_0x4bb702(0x11a)](async()=>{const _0xf1a821=_0x4bb702;PerformanceTester['start'](PerformanceEvents[_0xf1a821(0x135)]),_0x5ba9cc[_0xf1a821(0x155)]=helper['getErrorMessageFromResults'](_0x651489,_0x139a97[_0xf1a821(0x125)]),testOpsHelper[_0xf1a821(0x12c)]();try{await TestHubHandler['stop']();}catch(_0x3475b3){logger[_0xf1a821(0x16c)](_0xf1a821(0x150)+util[_0xf1a821(0x147)](_0x3475b3));}try{const {browserstackFolderPath:_0x68322c,tcgConfigPath:_0x16453e}=helper[_0xf1a821(0x16d)]();fs[_0xf1a821(0x162)](_0x16453e),fs[_0xf1a821(0x143)](_0x68322c);}catch(_0x255214){logger['debug'](_0x139a97[_0xf1a821(0x156)],_0x255214);}await utilities[_0xf1a821(0x15d)](_0x5ba9cc);});}module[a5_0x1295bb(0x12f)]=run;