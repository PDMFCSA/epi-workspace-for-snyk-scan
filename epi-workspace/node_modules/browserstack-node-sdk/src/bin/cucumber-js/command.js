#!/usr/bin/env node
'use strict';function a5_0x1942(_0x2296fd,_0x17cc13){const _0x2465d6=a5_0x2465();return a5_0x1942=function(_0x1942a5,_0x7660e){_0x1942a5=_0x1942a5-0x1e3;let _0x5e859e=_0x2465d6[_0x1942a5];return _0x5e859e;},a5_0x1942(_0x2296fd,_0x17cc13);}const a5_0x45048b=a5_0x1942;function a5_0x2465(){const _0x103d2b=['../../helpers/testhub/testhubHandler','EqyfP','printBuildLink','\x20failed','80181WeRDoU','1091790CnZFfl','mergeOutputFiles','splice','logLevel','KFqvX','removeDir','cwd','util','setUserConfigPath','4zLFgcC','debug','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','stringify','tmp','stepsPending','CyGNy','parallelsPerPlatform','QnGmb','****\x20RESULTS\x20****','puOvE','BROWSERSTACK_TEST_OBSERVABILITY_YML','FmfEJ','14tWxAyQ','stepsUndefined','\x20ambiguous','2396480qdDRyr','true','createDir','scenarios','env','isUndefined','BzZcj','prepareCapabilities','parseFormatters','green','unlinkSync','start','cyan','../../helpers/performance/performance-tester','end','../../helpers/performance/constants','exports','6855130pDPsCu','meuqe','bold','BSaoE','SDK_SETUP','steps','CUCUMBER','4652pGqmcv','stepsFailed','\x20steps','error\x20removing\x20tcg\x20config\x20file','../test-runner','../utils/constants','framework','getHubUrl','then','ghZvG','807828LpPbrs','finalExecution','getTCGConfigFilePaths','finally','forEach','aTPqb','exitCode','Removing\x20tmp\x20directory\x20created\x20for\x20reports','accessibilityOptions','pkifR','red','mApot','setupTCGAuth','../../helpers/logger','join','scenariosFailed','804QaAwhL','path','Generating\x20consolidated\x20report...','yellow','yBxub','getUserWorkerCount','handleApp','kkUAK','FRAMEWORKS','mxaHR','push','../../helpers/helper','winstonLogger','config','chalk','testContextOptions','getErrorMessageFromResults','isBrowserstackInfra','JaMQl','argv','mevJQ','stop','SDK_CLEANUP','avnCl','length','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','log','cucumber','jnkRR','\x20passed','testObservability','FPvIf','\x20scenarios','stepsSkipped','proxySettings','rmdirSync','bgWhite','../../helpers/BrowserStackSetup','\x20undefined','\x20skipped','\x20pending','1507014UdBZur','initialize','launchBuild','../../helpers/utilities'];a5_0x2465=function(){return _0x103d2b;};return a5_0x2465();}(function(_0x3d22c9,_0x5b8383){const _0x5b3a14=a5_0x1942,_0x3b6921=_0x3d22c9();while(!![]){try{const _0x5e6b3f=parseInt(_0x5b3a14(0x1e7))/0x1+parseInt(_0x5b3a14(0x219))/0x2*(parseInt(_0x5b3a14(0x233))/0x3)+parseInt(_0x5b3a14(0x1f1))/0x4*(parseInt(_0x5b3a14(0x1e8))/0x5)+-parseInt(_0x5b3a14(0x223))/0x6*(-parseInt(_0x5b3a14(0x1fe))/0x7)+-parseInt(_0x5b3a14(0x201))/0x8+parseInt(_0x5b3a14(0x25c))/0x9+-parseInt(_0x5b3a14(0x212))/0xa;if(_0x5e6b3f===_0x5b8383)break;else _0x3b6921['push'](_0x3b6921['shift']());}catch(_0x469e63){_0x3b6921['push'](_0x3b6921['shift']());}}}(a5_0x2465,0x5b334));const fs=require('fs'),path=require(a5_0x45048b(0x234)),util=require(a5_0x45048b(0x1ef)),logger=require(a5_0x45048b(0x230))[a5_0x45048b(0x23f)],{default:BrowserStackSetup}=require(a5_0x45048b(0x258)),helper=require(a5_0x45048b(0x23e)),utilities=require(a5_0x45048b(0x25f)),constants=require(a5_0x45048b(0x21e)),{parallelCucumberRun}=require(a5_0x45048b(0x21d)),TestHubHandler=require(a5_0x45048b(0x1e3)),testOpsHelper=require('../../helpers/test-observability/utils'),chalk=require(a5_0x45048b(0x241)),PerformanceTester=require(a5_0x45048b(0x20e)),PerformanceEvents=require(a5_0x45048b(0x210))['EVENTS'];function printCucumberStats(_0x4cc2ff){const _0x2d9294=a5_0x45048b,_0x6c26a1={};_0x6c26a1[_0x2d9294(0x228)]=function(_0x2641ed,_0x4e789e){return _0x2641ed>_0x4e789e;},_0x6c26a1[_0x2d9294(0x22c)]=function(_0x20f697,_0x22a9dd){return _0x20f697-_0x22a9dd;},_0x6c26a1[_0x2d9294(0x1f9)]=function(_0x3b0e0e,_0x1674a4){return _0x3b0e0e-_0x1674a4;},_0x6c26a1[_0x2d9294(0x1fb)]=function(_0x21d3aa,_0x15ad55){return _0x21d3aa>_0x15ad55;},_0x6c26a1['kkUAK']=function(_0x5e6881,_0x15b73f){return _0x5e6881>_0x15b73f;},_0x6c26a1[_0x2d9294(0x252)]=function(_0x5545be,_0x459bb9){return _0x5545be>_0x459bb9;},_0x6c26a1[_0x2d9294(0x1f7)]=function(_0x9f341b,_0x75eed8){return _0x9f341b>_0x75eed8;},_0x6c26a1[_0x2d9294(0x247)]=function(_0x29f765,_0x5d8e1e){return _0x29f765>_0x5d8e1e;},_0x6c26a1[_0x2d9294(0x237)]=function(_0x558c02,_0xf289d4){return _0x558c02+_0xf289d4;},_0x6c26a1[_0x2d9294(0x215)]=function(_0x3389d7,_0xe8493a){return _0x3389d7+_0xe8493a;},_0x6c26a1[_0x2d9294(0x24f)]=function(_0x5685a4,_0x17e619){return _0x5685a4+_0x17e619;},_0x6c26a1[_0x2d9294(0x213)]=function(_0x51fd77,_0x5c7305){return _0x51fd77===_0x5c7305;},_0x6c26a1[_0x2d9294(0x222)]=_0x2d9294(0x1fa);const _0x1fc179=_0x6c26a1;let _0x1d0c46=0x0;if(_0x1fc179[_0x2d9294(0x213)](_0x4cc2ff[_0x2d9294(0x24b)],0x0))return _0x1d0c46;return console[_0x2d9294(0x24d)](chalk[_0x2d9294(0x214)][_0x2d9294(0x257)](_0x1fc179['ghZvG'])),_0x4cc2ff[_0x2d9294(0x227)](_0x80e521=>{const _0xc587de=_0x2d9294,_0x29b738=_0x80e521[0x0],_0x96bacc=_0x80e521[0x1];console['log']('\x0a'+chalk[_0xc587de(0x214)][_0xc587de(0x236)](''+helper['getPlatformName'](_0x29b738)));const _0x650408=_0x96bacc[_0xc587de(0x204)],_0x1c36da=_0x96bacc[_0xc587de(0x217)],_0x5a06d1=_0x96bacc[_0xc587de(0x232)],_0x273461=_0x96bacc[_0xc587de(0x21a)],_0x22d227=_0x96bacc['stepsPassed'],_0x46b637=_0x96bacc[_0xc587de(0x254)],_0x16edef=_0x96bacc[_0xc587de(0x1f6)],_0x126ba7=_0x96bacc[_0xc587de(0x1ff)],_0x4d9503=_0x96bacc['stepsUnknown'],_0x116fd4=_0x96bacc['stepsAmbiguous'],_0x58c091=_0x96bacc['processSuccess'];let _0x2cef07=_0x650408+_0xc587de(0x253);const _0x402dc0=_0x1fc179[_0xc587de(0x228)](_0x1fc179[_0xc587de(0x22c)](_0x650408,_0x5a06d1),0x0)?_0x1fc179['QnGmb'](_0x650408,_0x5a06d1):0x0;if(_0x1fc179[_0xc587de(0x1fb)](_0x5a06d1,0x0)&&_0x1fc179[_0xc587de(0x228)](_0x402dc0,0x0))_0x2cef07+='\x20('+chalk[_0xc587de(0x214)][_0xc587de(0x22d)](_0x5a06d1+'\x20failed')+',\x20'+chalk[_0xc587de(0x214)][_0xc587de(0x20a)](_0x402dc0+'\x20passed')+')';else(_0x1fc179[_0xc587de(0x23a)](_0x5a06d1,0x0)||_0x1fc179[_0xc587de(0x23a)](_0x402dc0,0x0))&&(_0x2cef07+=_0x1fc179[_0xc587de(0x228)](_0x5a06d1,0x0)?'\x20('+chalk[_0xc587de(0x214)][_0xc587de(0x22d)](_0x5a06d1+_0xc587de(0x1e6))+')':'\x20('+chalk['bold'][_0xc587de(0x20a)](_0x402dc0+'\x20passed')+')');const _0x1d80a9=_0x1c36da+_0xc587de(0x21b),_0x366a82=[];_0x1fc179[_0xc587de(0x228)](_0x116fd4,0x0)&&_0x366a82['push'](''+chalk[_0xc587de(0x214)]['red'](_0x116fd4+_0xc587de(0x200)));_0x1fc179[_0xc587de(0x252)](_0x273461,0x0)&&_0x366a82[_0xc587de(0x23d)](''+chalk['bold'][_0xc587de(0x22d)](_0x273461+_0xc587de(0x1e6)));_0x1fc179[_0xc587de(0x228)](_0x22d227,0x0)&&_0x366a82[_0xc587de(0x23d)](''+chalk[_0xc587de(0x214)]['green'](_0x22d227+_0xc587de(0x250)));_0x1fc179[_0xc587de(0x1f7)](_0x16edef,0x0)&&_0x366a82['push'](''+chalk[_0xc587de(0x214)]['yellow'](_0x16edef+_0xc587de(0x25b)));_0x1fc179[_0xc587de(0x247)](_0x46b637,0x0)&&_0x366a82['push'](''+chalk[_0xc587de(0x214)][_0xc587de(0x20d)](_0x46b637+'\x20skipped'));_0x1fc179['mevJQ'](_0x126ba7,0x0)&&_0x366a82['push'](''+chalk['bold'][_0xc587de(0x236)](_0x126ba7+_0xc587de(0x259)));_0x1fc179[_0xc587de(0x247)](_0x4d9503,0x0)&&_0x366a82[_0xc587de(0x23d)](''+chalk[_0xc587de(0x214)][_0xc587de(0x236)](_0x4d9503+_0xc587de(0x25a)));const _0x55b4ba=_0x1fc179[_0xc587de(0x237)](_0x1fc179[_0xc587de(0x237)](_0x1fc179[_0xc587de(0x215)](_0x1d80a9,'('),_0x366a82[_0xc587de(0x231)](',\x20')),')');console[_0xc587de(0x24d)](_0x1fc179[_0xc587de(0x24f)](_0x1fc179[_0xc587de(0x24f)](_0x1fc179[_0xc587de(0x215)](_0x1fc179[_0xc587de(0x215)]('\x0a',_0x2cef07),'\x0a'),_0x55b4ba),'\x0a')),_0x1fc179[_0xc587de(0x213)](_0x58c091,![])&&(_0x1d0c46=0x1);}),_0x1d0c46;}async function run(_0x38feb9,_0x4259dc,_0x256597){const _0x4ce247=a5_0x45048b,_0x5adc92={'FmfEJ':function(_0x4f6e74,_0x44d295){return _0x4f6e74(_0x44d295);},'BzZcj':function(_0x313f7e,_0x58450a){return _0x313f7e>_0x58450a;},'mxaHR':_0x4ce247(0x235),'EqyfP':_0x4ce247(0x22a),'JvFub':_0x4ce247(0x24e),'mApot':_0x4ce247(0x21c),'avnCl':_0x4ce247(0x1f5),'hLpvX':function(_0x2cbb55,_0x224b09){return _0x2cbb55-_0x224b09;},'KFqvX':function(_0x1d6ff8,_0x2000d5){return _0x1d6ff8>=_0x2000d5;},'JaMQl':function(_0x3214d2,_0x4cfbb3){return _0x3214d2!=_0x4cfbb3;},'AURmV':_0x4ce247(0x202),'fdnYK':function(_0x4b5078,_0x355ba0,_0x6083ab,_0x1d398e,_0x39cf44,_0x464f7a){return _0x4b5078(_0x355ba0,_0x6083ab,_0x1d398e,_0x39cf44,_0x464f7a);}};await _0x256597[_0x4ce247(0x25d)](_0x38feb9),helper[_0x4ce247(0x1f0)](_0x256597[_0x4ce247(0x21f)],_0x38feb9);!helper[_0x4ce247(0x244)]()&&await _0x256597[_0x4ce247(0x22f)]();await helper[_0x4ce247(0x239)](_0x256597['config']);const _0x31fc21=helper['useW3C'](_0x256597[_0x4ce247(0x240)]);!helper[_0x4ce247(0x206)](_0x256597['config']['accessibilityOptions'])&&(process[_0x4ce247(0x205)][_0x4ce247(0x1f3)]=JSON[_0x4ce247(0x1f4)](_0x256597[_0x4ce247(0x240)][_0x4ce247(0x22b)]));const _0x1fef97=await TestHubHandler[_0x4ce247(0x25e)](constants[_0x4ce247(0x23b)][_0x4ce247(0x218)],_0x256597),_0x3ea514=helper[_0x4ce247(0x208)](_0x256597[_0x4ce247(0x240)],_0x31fc21,constants[_0x4ce247(0x23b)][_0x4ce247(0x218)]);if(!_0x256597[_0x4ce247(0x240)])return;const _0x293e7e=_0x256597[_0x4ce247(0x240)][_0x4ce247(0x1f8)]||helper[_0x4ce247(0x238)](_0x38feb9,_0x4259dc,_0x256597['config'],constants['FRAMEWORKS'][_0x4ce247(0x218)])||0x1,_0x501a2e={'server':helper[_0x4ce247(0x220)](_0x256597['config']),'proxySettings':_0x256597[_0x4ce247(0x240)][_0x4ce247(0x255)],'maxWorkers':_0x293e7e,'browserStackLogLevel':_0x256597[_0x4ce247(0x240)][_0x4ce247(0x1eb)],'skipSessionName':_0x256597[_0x4ce247(0x240)][_0x4ce247(0x242)]['skipSessionName'],'skipSessionStatus':_0x256597[_0x4ce247(0x240)][_0x4ce247(0x242)]['skipSessionStatus'],'turboScaleUrl':_0x256597[_0x4ce247(0x240)]['turboScaleUrl']},_0x44d11b=process[_0x4ce247(0x246)],[_0x2369ff,_0x2d453a]=helper[_0x4ce247(0x209)](_0x44d11b),_0x4bbf9b=path['join'](process[_0x4ce247(0x1ee)](),_0x5adc92[_0x4ce247(0x24a)]);if(_0x5adc92[_0x4ce247(0x207)](_0x2d453a[_0x4ce247(0x24b)],0x0)){helper[_0x4ce247(0x203)](_0x4bbf9b);for(let _0x4a055a=_0x5adc92['hLpvX'](_0x2369ff[_0x4ce247(0x24b)],0x1);_0x5adc92[_0x4ce247(0x1ec)](_0x4a055a,0x0);_0x4a055a--){_0x44d11b[_0x4ce247(0x1ea)](_0x2369ff[_0x4a055a],0x2);}}_0x5adc92[_0x4ce247(0x245)](_0x256597[_0x4ce247(0x240)][_0x4ce247(0x251)],null)?process[_0x4ce247(0x205)][_0x4ce247(0x1fc)]=_0x256597[_0x4ce247(0x240)][_0x4ce247(0x251)]:process[_0x4ce247(0x205)]['BROWSERSTACK_TEST_OBSERVABILITY_YML']=_0x5adc92['AURmV'];PerformanceTester[_0x4ce247(0x20f)](PerformanceEvents[_0x4ce247(0x216)]);let _0x2dc3a7;_0x5adc92['fdnYK'](parallelCucumberRun,_0x3ea514,_0x501a2e,_0x256597[_0x4ce247(0x240)],_0x44d11b,_0x2d453a)[_0x4ce247(0x221)](async _0x25b1f6=>{const _0x56a07e=_0x4ce247;PerformanceTester[_0x56a07e(0x20c)](PerformanceEvents[_0x56a07e(0x249)]),_0x2dc3a7=_0x25b1f6;const _0x5a2b28=_0x5adc92[_0x56a07e(0x1fd)](printCucumberStats,_0x25b1f6);process[_0x56a07e(0x229)]=_0x5a2b28,_0x5adc92[_0x56a07e(0x207)](_0x2d453a[_0x56a07e(0x24b)],0x0)&&(logger[_0x56a07e(0x1f2)](_0x5adc92[_0x56a07e(0x23c)]),helper[_0x56a07e(0x1e9)](_0x4bbf9b,_0x2d453a),logger[_0x56a07e(0x1f2)](_0x5adc92[_0x56a07e(0x1e4)]),helper[_0x56a07e(0x1ed)](_0x4bbf9b));})[_0x4ce247(0x226)](async()=>{const _0x561bed=_0x4ce247;PerformanceTester[_0x561bed(0x20c)](PerformanceEvents['SDK_CLEANUP']),_0x256597['errorMessage']=helper[_0x561bed(0x243)](_0x2dc3a7,_0x5adc92['JvFub']),testOpsHelper[_0x561bed(0x1e5)]();try{await TestHubHandler[_0x561bed(0x248)]();}catch(_0x16d6ed){logger[_0x561bed(0x1f2)](_0x561bed(0x24c)+util['format'](_0x16d6ed));}try{const {browserstackFolderPath:_0x13ce1e,tcgConfigPath:_0x13877c}=helper[_0x561bed(0x225)]();fs[_0x561bed(0x20b)](_0x13877c),fs[_0x561bed(0x256)](_0x13ce1e);}catch(_0x3a5b00){logger[_0x561bed(0x1f2)](_0x5adc92[_0x561bed(0x22e)],_0x3a5b00);}await utilities[_0x561bed(0x224)](_0x256597);});}module[a5_0x45048b(0x211)]=run;