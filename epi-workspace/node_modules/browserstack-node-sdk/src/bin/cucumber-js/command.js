#!/usr/bin/env node
'use strict';const a5_0x42646e=a5_0x18a1;(function(_0x479eb3,_0x1f10be){const _0x7f80b7=a5_0x18a1,_0x1bbbf9=_0x479eb3();while(!![]){try{const _0xad891e=parseInt(_0x7f80b7(0x178))/0x1+-parseInt(_0x7f80b7(0x168))/0x2+parseInt(_0x7f80b7(0x141))/0x3+-parseInt(_0x7f80b7(0x157))/0x4*(-parseInt(_0x7f80b7(0x147))/0x5)+-parseInt(_0x7f80b7(0x14b))/0x6*(-parseInt(_0x7f80b7(0x14a))/0x7)+parseInt(_0x7f80b7(0x150))/0x8+-parseInt(_0x7f80b7(0x13f))/0x9;if(_0xad891e===_0x1f10be)break;else _0x1bbbf9['push'](_0x1bbbf9['shift']());}catch(_0x1be3e6){_0x1bbbf9['push'](_0x1bbbf9['shift']());}}}(a5_0x30e8,0x3cf4e));const fs=require('fs'),path=require(a5_0x42646e(0x155)),util=require(a5_0x42646e(0x197)),logger=require(a5_0x42646e(0x13d))[a5_0x42646e(0x165)],{default:BrowserStackSetup}=require(a5_0x42646e(0x131)),helper=require(a5_0x42646e(0x170)),utilities=require('../../helpers/utilities'),constants=require(a5_0x42646e(0x148)),{parallelCucumberRun}=require('../test-runner'),TestHubHandler=require(a5_0x42646e(0x129)),testOpsHelper=require(a5_0x42646e(0x152)),chalk=require(a5_0x42646e(0x146)),PerformanceTester=require(a5_0x42646e(0x11d)),PerformanceEvents=require('../../helpers/performance/constants')[a5_0x42646e(0x13c)];function a5_0x18a1(_0xc4424b,_0x1568a9){const _0x30e8ff=a5_0x30e8();return a5_0x18a1=function(_0x18a11f,_0x45f474){_0x18a11f=_0x18a11f-0x11b;let _0x9b8c3=_0x30e8ff[_0x18a11f];return _0x9b8c3;},a5_0x18a1(_0xc4424b,_0x1568a9);}function printCucumberStats(_0x4fbda6){const _0x2640e9=a5_0x42646e,_0x5caac1={};_0x5caac1[_0x2640e9(0x184)]=function(_0x4b04ff,_0x376ad8){return _0x4b04ff>_0x376ad8;},_0x5caac1['kWNOo']=function(_0x8c3804,_0x2d7adb){return _0x8c3804-_0x2d7adb;},_0x5caac1['iScFC']=function(_0x3ff432,_0x173d17){return _0x3ff432-_0x173d17;},_0x5caac1[_0x2640e9(0x194)]=function(_0x311454,_0x234b89){return _0x311454>_0x234b89;},_0x5caac1[_0x2640e9(0x134)]=function(_0x488e8a,_0x403077){return _0x488e8a>_0x403077;},_0x5caac1[_0x2640e9(0x188)]=function(_0x2d630f,_0x38dee1){return _0x2d630f>_0x38dee1;},_0x5caac1[_0x2640e9(0x138)]=function(_0xd886ac,_0xaf0013){return _0xd886ac>_0xaf0013;},_0x5caac1[_0x2640e9(0x142)]=function(_0x4a284c,_0x22f88c){return _0x4a284c>_0x22f88c;},_0x5caac1[_0x2640e9(0x16c)]=function(_0x129f86,_0x4dcf3c){return _0x129f86>_0x4dcf3c;},_0x5caac1[_0x2640e9(0x17f)]=function(_0x5b6c40,_0x155e7a){return _0x5b6c40>_0x155e7a;},_0x5caac1[_0x2640e9(0x122)]=function(_0x2b69b1,_0x1e11c3){return _0x2b69b1>_0x1e11c3;},_0x5caac1['ijMJM']=function(_0x1f2d6f,_0x795b9a){return _0x1f2d6f+_0x795b9a;},_0x5caac1[_0x2640e9(0x16a)]=function(_0x18bc9f,_0x250e8a){return _0x18bc9f+_0x250e8a;},_0x5caac1['MEdoQ']=function(_0x154642,_0x33decb){return _0x154642+_0x33decb;},_0x5caac1[_0x2640e9(0x143)]=function(_0x336294,_0x1aecae){return _0x336294===_0x1aecae;},_0x5caac1[_0x2640e9(0x16d)]=function(_0x2cc8a6,_0x9c4c44){return _0x2cc8a6===_0x9c4c44;},_0x5caac1[_0x2640e9(0x195)]=_0x2640e9(0x144);const _0x4a5de8=_0x5caac1;let _0x50a4b4=0x0;if(_0x4a5de8['ASQGA'](_0x4fbda6[_0x2640e9(0x133)],0x0))return _0x50a4b4;return console[_0x2640e9(0x180)](chalk['bold'][_0x2640e9(0x18c)](_0x4a5de8[_0x2640e9(0x195)])),_0x4fbda6[_0x2640e9(0x139)](_0x2f46b4=>{const _0x57178d=_0x2640e9,_0x55a43c=_0x2f46b4[0x0],_0x98d560=_0x2f46b4[0x1];console[_0x57178d(0x180)]('\x0a'+chalk[_0x57178d(0x166)][_0x57178d(0x11c)](''+helper['getPlatformName'](_0x55a43c)));const _0x1a1b25=_0x98d560['scenarios'],_0x21a945=_0x98d560[_0x57178d(0x186)],_0x51cc36=_0x98d560[_0x57178d(0x187)],_0x5b89d7=_0x98d560[_0x57178d(0x15e)],_0x20dc30=_0x98d560[_0x57178d(0x17b)],_0x3f3941=_0x98d560[_0x57178d(0x172)],_0xbac289=_0x98d560['stepsPending'],_0x1e7ed1=_0x98d560[_0x57178d(0x145)],_0x54808e=_0x98d560[_0x57178d(0x12d)],_0x148d4f=_0x98d560[_0x57178d(0x15c)],_0x352fe0=_0x98d560['processSuccess'];let _0x307b22=_0x1a1b25+_0x57178d(0x128);const _0x211e9f=_0x4a5de8[_0x57178d(0x184)](_0x4a5de8[_0x57178d(0x135)](_0x1a1b25,_0x51cc36),0x0)?_0x4a5de8[_0x57178d(0x17e)](_0x1a1b25,_0x51cc36):0x0;if(_0x4a5de8[_0x57178d(0x194)](_0x51cc36,0x0)&&_0x4a5de8[_0x57178d(0x134)](_0x211e9f,0x0))_0x307b22+='\x20('+chalk[_0x57178d(0x166)][_0x57178d(0x153)](_0x51cc36+_0x57178d(0x154))+',\x20'+chalk[_0x57178d(0x166)][_0x57178d(0x127)](_0x211e9f+_0x57178d(0x11b))+')';else(_0x4a5de8['otsKS'](_0x51cc36,0x0)||_0x4a5de8[_0x57178d(0x138)](_0x211e9f,0x0))&&(_0x307b22+=_0x4a5de8[_0x57178d(0x138)](_0x51cc36,0x0)?'\x20('+chalk[_0x57178d(0x166)]['red'](_0x51cc36+_0x57178d(0x154))+')':'\x20('+chalk[_0x57178d(0x166)][_0x57178d(0x127)](_0x211e9f+'\x20passed')+')');const _0x43a99d=_0x21a945+_0x57178d(0x11e),_0x41b19d=[];_0x4a5de8[_0x57178d(0x188)](_0x148d4f,0x0)&&_0x41b19d[_0x57178d(0x137)](''+chalk['bold'][_0x57178d(0x153)](_0x148d4f+_0x57178d(0x171)));_0x4a5de8['otsKS'](_0x5b89d7,0x0)&&_0x41b19d[_0x57178d(0x137)](''+chalk[_0x57178d(0x166)]['red'](_0x5b89d7+'\x20failed'));_0x4a5de8['PHNTI'](_0x20dc30,0x0)&&_0x41b19d[_0x57178d(0x137)](''+chalk[_0x57178d(0x166)][_0x57178d(0x127)](_0x20dc30+_0x57178d(0x11b)));_0x4a5de8['NHalv'](_0xbac289,0x0)&&_0x41b19d[_0x57178d(0x137)](''+chalk['bold'][_0x57178d(0x11c)](_0xbac289+_0x57178d(0x11f)));_0x4a5de8['XFxTJ'](_0x3f3941,0x0)&&_0x41b19d[_0x57178d(0x137)](''+chalk[_0x57178d(0x166)][_0x57178d(0x182)](_0x3f3941+_0x57178d(0x123)));_0x4a5de8[_0x57178d(0x142)](_0x1e7ed1,0x0)&&_0x41b19d[_0x57178d(0x137)](''+chalk[_0x57178d(0x166)][_0x57178d(0x11c)](_0x1e7ed1+_0x57178d(0x158)));_0x4a5de8[_0x57178d(0x122)](_0x54808e,0x0)&&_0x41b19d[_0x57178d(0x137)](''+chalk[_0x57178d(0x166)][_0x57178d(0x11c)](_0x54808e+_0x57178d(0x123)));const _0x39b91e=_0x4a5de8['ijMJM'](_0x4a5de8[_0x57178d(0x18e)](_0x4a5de8[_0x57178d(0x16a)](_0x43a99d,'('),_0x41b19d['join'](',\x20')),')');console[_0x57178d(0x180)](_0x4a5de8[_0x57178d(0x164)](_0x4a5de8[_0x57178d(0x164)](_0x4a5de8[_0x57178d(0x164)](_0x4a5de8[_0x57178d(0x16a)]('\x0a',_0x307b22),'\x0a'),_0x39b91e),'\x0a')),_0x4a5de8[_0x57178d(0x143)](_0x352fe0,![])&&(_0x50a4b4=0x1);}),_0x50a4b4;}function a5_0x30e8(){const _0x53122e=['debug','SDK_CLEANUP','kFtqm','bgWhite','getUserWorkerCount','ijMJM','testObservability','true','argv','UNYHX','getHubUrl','oXMOQ','xnwdT','config','util','\x20passed','yellow','../../helpers/performance/performance-tester','\x20steps','\x20pending','errorMessage','cwd','Guxxl','\x20skipped','parallelsPerPlatform','getTCGConfigFilePaths','start','green','\x20scenarios','../../helpers/testhub/testhubHandler','setUserConfigPath','join','dtoyB','stepsUnknown','xGpoe','isBrowserstackInfra','FRAMEWORKS','../../helpers/BrowserStackSetup','dLHKK','length','NoMEQ','kWNOo','WemGW','push','PhYCu','forEach','fTVEe','tmp','EVENTS','../../helpers/logger','removeDir','7238394QrvlFq','mergeOutputFiles','1098816OPNDQD','PHNTI','XAiWw','****\x20RESULTS\x20****','stepsUndefined','chalk','1629280eiRlvE','../utils/constants','cihsu','1829681gaWBVk','6GFQBrE','finalExecution','format','Removing\x20tmp\x20directory\x20created\x20for\x20reports','QFGPx','1837264oBBMmm','prepareCapabilities','../../helpers/test-observability/utils','red','\x20failed','path','createDir','4xCqWFa','\x20undefined','turboScaleUrl','logLevel','launchBuild','stepsAmbiguous','printBuildLink','stepsFailed','unlinkSync','error\x20removing\x20tcg\x20config\x20file','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','skipSessionStatus','accessibilityOptions','MEdoQ','winstonLogger','bold','RlAuw','820006UqTRcn','env','WRCnz','XVZwz','NHalv','ASQGA','getErrorMessageFromResults','BROWSERSTACK_TEST_OBSERVABILITY_YML','../../helpers/helper','\x20ambiguous','stepsSkipped','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','yLYNS','setupTCGAuth','proxySettings','handleApp','280778ctCvjt','initialize','exports','stepsPassed','CUCUMBER','RSmpX','iScFC','XFxTJ','log','stop','cyan','splice','yMlPK','testContextOptions','steps','scenariosFailed','otsKS'];a5_0x30e8=function(){return _0x53122e;};return a5_0x30e8();}async function run(_0x371ff3,_0xb327cc){const _0xbaed6b=a5_0x42646e,_0x128f07={'cihsu':function(_0x5b49c0,_0x3f6bc6){return _0x5b49c0(_0x3f6bc6);},'WemGW':function(_0x50fbba,_0x3089e7){return _0x50fbba>_0x3089e7;},'xGpoe':'Generating\x20consolidated\x20report...','QFGPx':_0xbaed6b(0x14e),'UNYHX':'cucumber','fTVEe':_0xbaed6b(0x160),'RSmpX':'cucumber-js','RlAuw':_0xbaed6b(0x13b),'XVZwz':function(_0x262e39,_0x366af6){return _0x262e39-_0x366af6;},'dtoyB':function(_0x8dbf5b,_0x2163a6){return _0x8dbf5b>=_0x2163a6;},'dLHKK':function(_0x539e84,_0x488f5c){return _0x539e84!=_0x488f5c;},'yLYNS':_0xbaed6b(0x190),'kFtqm':function(_0x26f43b,_0x47e896,_0x25ac18,_0x151f56,_0x5c3cb5,_0x215c3d){return _0x26f43b(_0x47e896,_0x25ac18,_0x151f56,_0x5c3cb5,_0x215c3d);}},_0x744367=new BrowserStackSetup(_0x371ff3,_0x128f07[_0xbaed6b(0x17d)]);await _0x744367[_0xbaed6b(0x179)](),helper[_0xbaed6b(0x12a)](_0x744367['framework'],_0x371ff3);!helper[_0xbaed6b(0x12f)]()&&await _0x744367[_0xbaed6b(0x175)]();await helper[_0xbaed6b(0x177)](_0x744367[_0xbaed6b(0x196)]);const _0x16fd84=helper['useW3C'](_0x744367['config']),_0x55f5c6=helper[_0xbaed6b(0x151)](_0x744367[_0xbaed6b(0x196)],_0x16fd84,constants[_0xbaed6b(0x130)][_0xbaed6b(0x17c)]);if(!_0x744367['config'])return;const _0x513bdc=_0x744367[_0xbaed6b(0x196)][_0xbaed6b(0x124)]||helper[_0xbaed6b(0x18d)](_0x371ff3,_0xb327cc,_0x744367[_0xbaed6b(0x196)],constants[_0xbaed6b(0x130)][_0xbaed6b(0x17c)])||0x1,_0x184d70={'server':helper[_0xbaed6b(0x193)](_0x744367[_0xbaed6b(0x196)]),'proxySettings':_0x744367[_0xbaed6b(0x196)][_0xbaed6b(0x176)],'maxWorkers':_0x513bdc,'browserStackLogLevel':_0x744367[_0xbaed6b(0x196)][_0xbaed6b(0x15a)],'skipSessionName':_0x744367[_0xbaed6b(0x196)][_0xbaed6b(0x185)]['skipSessionName'],'skipSessionStatus':_0x744367[_0xbaed6b(0x196)][_0xbaed6b(0x185)][_0xbaed6b(0x162)],'turboScaleUrl':_0x744367['config'][_0xbaed6b(0x159)]},_0x53c8f5=process[_0xbaed6b(0x191)],[_0x19d72c,_0x446d5c]=helper['parseFormatters'](_0x53c8f5),_0x10966c=path[_0xbaed6b(0x12b)](process[_0xbaed6b(0x121)](),_0x128f07[_0xbaed6b(0x167)]);if(_0x128f07[_0xbaed6b(0x136)](_0x446d5c['length'],0x0)){helper[_0xbaed6b(0x156)](_0x10966c);for(let _0x1b951e=_0x128f07[_0xbaed6b(0x16b)](_0x19d72c[_0xbaed6b(0x133)],0x1);_0x128f07[_0xbaed6b(0x12c)](_0x1b951e,0x0);_0x1b951e--){_0x53c8f5[_0xbaed6b(0x183)](_0x19d72c[_0x1b951e],0x2);}}!helper['isUndefined'](_0x744367[_0xbaed6b(0x196)][_0xbaed6b(0x163)])&&(process['env'][_0xbaed6b(0x161)]=JSON['stringify'](_0x744367[_0xbaed6b(0x196)][_0xbaed6b(0x163)]));_0x128f07[_0xbaed6b(0x132)](_0x744367[_0xbaed6b(0x196)][_0xbaed6b(0x18f)],null)?process[_0xbaed6b(0x169)][_0xbaed6b(0x16f)]=_0x744367[_0xbaed6b(0x196)][_0xbaed6b(0x18f)]:process['env'][_0xbaed6b(0x16f)]=_0x128f07[_0xbaed6b(0x174)];const _0x258cae=await TestHubHandler[_0xbaed6b(0x15b)](constants[_0xbaed6b(0x130)][_0xbaed6b(0x17c)],_0x744367);PerformanceTester['end'](PerformanceEvents['SDK_SETUP']);let _0x3b7e8c;_0x128f07[_0xbaed6b(0x18b)](parallelCucumberRun,_0x55f5c6,_0x184d70,_0x744367[_0xbaed6b(0x196)],_0x53c8f5,_0x446d5c)['then'](async _0x14d6a7=>{const _0x2f3703=_0xbaed6b;PerformanceTester[_0x2f3703(0x126)](PerformanceEvents[_0x2f3703(0x18a)]),_0x3b7e8c=_0x14d6a7;const _0x363c9d=_0x128f07[_0x2f3703(0x149)](printCucumberStats,_0x14d6a7);process['exitCode']=_0x363c9d,_0x128f07[_0x2f3703(0x136)](_0x446d5c[_0x2f3703(0x133)],0x0)&&(logger[_0x2f3703(0x189)](_0x128f07[_0x2f3703(0x12e)]),helper[_0x2f3703(0x140)](_0x10966c,_0x446d5c),logger['debug'](_0x128f07[_0x2f3703(0x14f)]),helper[_0x2f3703(0x13e)](_0x10966c));})['finally'](async()=>{const _0x114ad5=_0xbaed6b;PerformanceTester[_0x114ad5(0x126)](PerformanceEvents['SDK_CLEANUP']),_0x744367[_0x114ad5(0x120)]=helper[_0x114ad5(0x16e)](_0x3b7e8c,_0x128f07[_0x114ad5(0x192)]),testOpsHelper[_0x114ad5(0x15d)]();try{await TestHubHandler[_0x114ad5(0x181)]();}catch(_0x4a58a5){logger[_0x114ad5(0x189)](_0x114ad5(0x173)+util[_0x114ad5(0x14d)](_0x4a58a5));}try{const {browserstackFolderPath:_0x59fa78,tcgConfigPath:_0x1f1e73}=helper[_0x114ad5(0x125)]();fs[_0x114ad5(0x15f)](_0x1f1e73),fs['rmdirSync'](_0x59fa78);}catch(_0x18ba06){logger['debug'](_0x128f07[_0x114ad5(0x13a)],_0x18ba06);}await utilities[_0x114ad5(0x14c)](_0x744367);});}module[a5_0x42646e(0x17a)]=run;