#!/usr/bin/env node
'use strict';const a5_0x2cbf89=a5_0x40f1;(function(_0x8bbb2b,_0x2994bb){const _0x4d5323=a5_0x40f1,_0x565d56=_0x8bbb2b();while(!![]){try{const _0x1815f0=-parseInt(_0x4d5323(0x1e9))/0x1+-parseInt(_0x4d5323(0x1ac))/0x2+-parseInt(_0x4d5323(0x1dc))/0x3*(parseInt(_0x4d5323(0x1a4))/0x4)+-parseInt(_0x4d5323(0x1c4))/0x5*(parseInt(_0x4d5323(0x20e))/0x6)+parseInt(_0x4d5323(0x1d3))/0x7*(parseInt(_0x4d5323(0x1d1))/0x8)+-parseInt(_0x4d5323(0x1bc))/0x9*(-parseInt(_0x4d5323(0x1d8))/0xa)+-parseInt(_0x4d5323(0x1f7))/0xb*(-parseInt(_0x4d5323(0x1fd))/0xc);if(_0x1815f0===_0x2994bb)break;else _0x565d56['push'](_0x565d56['shift']());}catch(_0x25911a){_0x565d56['push'](_0x565d56['shift']());}}}(a5_0x51c8,0x9646d));const fs=require('fs'),path=require(a5_0x2cbf89(0x1a6)),util=require(a5_0x2cbf89(0x19c)),logger=require(a5_0x2cbf89(0x201))[a5_0x2cbf89(0x1bf)],{default:BrowserStackSetup}=require(a5_0x2cbf89(0x1f5)),helper=require('../../helpers/helper'),utilities=require(a5_0x2cbf89(0x1b3)),constants=require('../utils/constants'),{parallelCucumberRun}=require('../test-runner'),TestHubHandler=require(a5_0x2cbf89(0x1e3)),testOpsHelper=require(a5_0x2cbf89(0x1a8)),chalk=require('chalk'),PerformanceTester=require(a5_0x2cbf89(0x1d2)),PerformanceEvents=require(a5_0x2cbf89(0x1ee))[a5_0x2cbf89(0x1e2)],BrowserstackCLI=require('../v2/browserstackCLI'),CLIUtils=require('../v2/cliUtils'),TestInfo=require(a5_0x2cbf89(0x20c));function a5_0x40f1(_0x500ac3,_0x27a6c5){const _0x51c848=a5_0x51c8();return a5_0x40f1=function(_0x40f1f7,_0x251494){_0x40f1f7=_0x40f1f7-0x195;let _0x402428=_0x51c848[_0x40f1f7];return _0x402428;},a5_0x40f1(_0x500ac3,_0x27a6c5);}function a5_0x51c8(){const _0x546c39=['stepsUndefined','qfxeo','../../helpers/utilities','isRunning','framework','setupTCGAuth','green','EtIZz','owbvL','scenariosFailed','rmdirSync','9zZPHVu','stepsPending','BROWSERSTACK_TEST_OBSERVABILITY_YML','winstonLogger','argv','join','error\x20removing\x20tcg\x20config\x20file','\x20passed','185QLZwIF','ZqBgW','cucumber','start','testObservability','push','cwd','stop','config','steps','\x20scenarios','initialize','XzCZq','7579928aihAHN','../../helpers/performance/performance-tester','7jfVzti','env','\x20undefined','KlyeD','useW3C','505130ZvrcLu','\x20for\x20cucumber-js\x20flow','Jkbuz','printBuildLink','3243108RkKyQT','cyan','bgWhite','end','then','eWTmA','EVENTS','../../helpers/testhub/testhubHandler','BROWSERSTACK_CLI_BIN_SESSION_ID','skipSessionName','Generating\x20consolidated\x20report...','stepsFailed','removeDir','1169559ThEYoJ','CaHxe','Detected\x20Playwright\x20version\x20','bold','stepsAmbiguous','../../helpers/performance/constants','accessibilityOptions','mergeOutputFiles','stepsUnknown','qkrYo','CUCUMBER','SDK_CLEANUP','../../helpers/BrowserStackSetup','auubm','43922065dxzwpD','izlDq','binSessionId','Removing\x20tmp\x20directory\x20created\x20for\x20reports','\x20skipped','red','12jlqWhg','log','finally','getErrorMessageFromResults','../../helpers/logger','testContextOptions','qDBAE','getHubUrl','RlJWN','FRAMEWORKS','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','beiXm','debug','isBrowserstackInfra','fOvkd','../v2/TestInfo','\x20steps','182856kYQzqi','parallelsPerPlatform','nIBFz','scenarios','bootstrap','@playwright/test','length','ehCUu','hQvMt','splice','handleApp','split','****\x20RESULTS\x20****','finalExecution','assign','cnCOb','skipSessionStatus','getUserWorkerCount','exitCode','NOGgj','cliConfig','getInstance','rvEPQ','util','NYMEI','NNYro','jmdfC','forEach','processSuccess','getPlatformName','\x20pending','4zXDmZJ','TdkzR','path','bncAk','../../helpers/test-observability/utils','tmp','prepareCapabilities','\x20failed','1994358aMimfq','zAKzu','yellow','ZproJ','egrVH'];a5_0x51c8=function(){return _0x546c39;};return a5_0x51c8();}function printCucumberStats(_0x2aab41){const _0x23f0bb=a5_0x2cbf89,_0x1a8c3b={};_0x1a8c3b[_0x23f0bb(0x1b8)]=function(_0x3f9d4f,_0x2f24bd){return _0x3f9d4f>_0x2f24bd;},_0x1a8c3b[_0x23f0bb(0x1ad)]=function(_0x25b097,_0x48e56a){return _0x25b097-_0x48e56a;},_0x1a8c3b['fOvkd']=function(_0x32d0bc,_0x5bf91d){return _0x32d0bc-_0x5bf91d;},_0x1a8c3b[_0x23f0bb(0x1b9)]=function(_0x5060f5,_0x48e524){return _0x5060f5>_0x48e524;},_0x1a8c3b['nIBFz']=function(_0x2c267a,_0x55eb70){return _0x2c267a>_0x55eb70;},_0x1a8c3b[_0x23f0bb(0x1d6)]=function(_0x1a4d45,_0xbc3391){return _0x1a4d45>_0xbc3391;},_0x1a8c3b[_0x23f0bb(0x1f8)]=function(_0x285e63,_0x141a60){return _0x285e63>_0x141a60;},_0x1a8c3b[_0x23f0bb(0x21d)]=function(_0x401d9d,_0x28ec9b){return _0x401d9d>_0x28ec9b;},_0x1a8c3b[_0x23f0bb(0x208)]=function(_0x4d7c4d,_0x10f130){return _0x4d7c4d>_0x10f130;},_0x1a8c3b[_0x23f0bb(0x198)]=function(_0x515c55,_0xea3ee1){return _0x515c55>_0xea3ee1;},_0x1a8c3b['ehCUu']=function(_0x478e61,_0x1d4979){return _0x478e61>_0x1d4979;},_0x1a8c3b[_0x23f0bb(0x216)]=function(_0xbdfee4,_0x2816c3){return _0xbdfee4+_0x2816c3;},_0x1a8c3b[_0x23f0bb(0x1af)]=function(_0x34b51b,_0x142f4e){return _0x34b51b+_0x142f4e;},_0x1a8c3b[_0x23f0bb(0x1a7)]=function(_0x3c6672,_0xc3d182){return _0x3c6672+_0xc3d182;},_0x1a8c3b[_0x23f0bb(0x203)]=function(_0x14fdc7,_0x6d96cf){return _0x14fdc7+_0x6d96cf;},_0x1a8c3b['jmdfC']=function(_0x2afb45,_0x562337){return _0x2afb45+_0x562337;},_0x1a8c3b[_0x23f0bb(0x205)]=function(_0x2e05c6,_0x12eedb){return _0x2e05c6+_0x12eedb;},_0x1a8c3b[_0x23f0bb(0x1b0)]=function(_0x4ff899,_0x4e7126){return _0x4ff899===_0x4e7126;},_0x1a8c3b['NYMEI']=_0x23f0bb(0x21a);const _0x21fbb0=_0x1a8c3b;let _0x4cccec=0x0;if(_0x21fbb0[_0x23f0bb(0x1b0)](_0x2aab41[_0x23f0bb(0x214)],0x0))return _0x4cccec;return console[_0x23f0bb(0x1fe)](chalk[_0x23f0bb(0x1ec)][_0x23f0bb(0x1de)](_0x21fbb0[_0x23f0bb(0x19d)])),_0x2aab41[_0x23f0bb(0x1a0)](_0xd0e4e=>{const _0x254880=_0x23f0bb,_0x5a3480=_0xd0e4e[0x0],_0x3d0c57=_0xd0e4e[0x1];helper[_0x254880(0x20a)]()&&console[_0x254880(0x1fe)]('\x0a'+chalk[_0x254880(0x1ec)][_0x254880(0x1ae)](''+helper[_0x254880(0x1a2)](_0x5a3480)));const _0x304ad6=_0x3d0c57[_0x254880(0x211)],_0x409745=_0x3d0c57[_0x254880(0x1cd)],_0x44c2af=_0x3d0c57[_0x254880(0x1ba)],_0x5e5fb1=_0x3d0c57[_0x254880(0x1e7)],_0x19d10c=_0x3d0c57['stepsPassed'],_0x2ab999=_0x3d0c57['stepsSkipped'],_0x1c3c0d=_0x3d0c57[_0x254880(0x1bd)],_0x32e803=_0x3d0c57[_0x254880(0x1b1)],_0x460eaa=_0x3d0c57[_0x254880(0x1f1)],_0x1a8433=_0x3d0c57[_0x254880(0x1ed)],_0x3bf623=_0x3d0c57[_0x254880(0x1a1)];let _0x3e8451=_0x304ad6+_0x254880(0x1ce);const _0x37121a=_0x21fbb0[_0x254880(0x1b8)](_0x21fbb0[_0x254880(0x1ad)](_0x304ad6,_0x44c2af),0x0)?_0x21fbb0[_0x254880(0x20b)](_0x304ad6,_0x44c2af):0x0;if(_0x21fbb0[_0x254880(0x1b9)](_0x44c2af,0x0)&&_0x21fbb0[_0x254880(0x1b8)](_0x37121a,0x0))_0x3e8451+='\x20('+chalk[_0x254880(0x1ec)][_0x254880(0x1fc)](_0x44c2af+_0x254880(0x1ab))+',\x20'+chalk[_0x254880(0x1ec)]['green'](_0x37121a+_0x254880(0x1c3))+')';else(_0x21fbb0[_0x254880(0x210)](_0x44c2af,0x0)||_0x21fbb0[_0x254880(0x1d6)](_0x37121a,0x0))&&(_0x3e8451+=_0x21fbb0['izlDq'](_0x44c2af,0x0)?'\x20('+chalk['bold'][_0x254880(0x1fc)](_0x44c2af+_0x254880(0x1ab))+')':'\x20('+chalk[_0x254880(0x1ec)][_0x254880(0x1b7)](_0x37121a+_0x254880(0x1c3))+')');const _0x1c50d4=_0x409745+_0x254880(0x20d),_0x3501dd=[];_0x21fbb0[_0x254880(0x1b9)](_0x1a8433,0x0)&&_0x3501dd[_0x254880(0x1c9)](''+chalk[_0x254880(0x1ec)][_0x254880(0x1fc)](_0x1a8433+'\x20ambiguous'));_0x21fbb0[_0x254880(0x1b8)](_0x5e5fb1,0x0)&&_0x3501dd[_0x254880(0x1c9)](''+chalk[_0x254880(0x1ec)][_0x254880(0x1fc)](_0x5e5fb1+_0x254880(0x1ab)));_0x21fbb0['cnCOb'](_0x19d10c,0x0)&&_0x3501dd[_0x254880(0x1c9)](''+chalk[_0x254880(0x1ec)]['green'](_0x19d10c+_0x254880(0x1c3)));_0x21fbb0[_0x254880(0x1d6)](_0x1c3c0d,0x0)&&_0x3501dd['push'](''+chalk['bold'][_0x254880(0x1ae)](_0x1c3c0d+_0x254880(0x1a3)));_0x21fbb0[_0x254880(0x208)](_0x2ab999,0x0)&&_0x3501dd[_0x254880(0x1c9)](''+chalk[_0x254880(0x1ec)][_0x254880(0x1dd)](_0x2ab999+_0x254880(0x1fb)));_0x21fbb0[_0x254880(0x198)](_0x32e803,0x0)&&_0x3501dd[_0x254880(0x1c9)](''+chalk['bold'][_0x254880(0x1ae)](_0x32e803+_0x254880(0x1d5)));_0x21fbb0[_0x254880(0x215)](_0x460eaa,0x0)&&_0x3501dd[_0x254880(0x1c9)](''+chalk[_0x254880(0x1ec)]['yellow'](_0x460eaa+_0x254880(0x1fb)));const _0x3426a6=_0x21fbb0[_0x254880(0x216)](_0x21fbb0[_0x254880(0x216)](_0x21fbb0[_0x254880(0x1af)](_0x1c50d4,'('),_0x3501dd[_0x254880(0x1c1)](',\x20')),')');console[_0x254880(0x1fe)](_0x21fbb0[_0x254880(0x1a7)](_0x21fbb0['qDBAE'](_0x21fbb0[_0x254880(0x19f)](_0x21fbb0[_0x254880(0x205)]('\x0a',_0x3e8451),'\x0a'),_0x3426a6),'\x0a')),_0x21fbb0[_0x254880(0x1b0)](_0x3bf623,![])&&(_0x4cccec=0x1);}),_0x4cccec;}async function run(_0x4352f8,_0x16e470,_0x44fee2){const _0x8a16d6=a5_0x2cbf89,_0x65e35e={'rvEPQ':function(_0x5921a5,_0x58a390){return _0x5921a5(_0x58a390);},'TdkzR':function(_0x52d1a3,_0x2f57f8){return _0x52d1a3>_0x2f57f8;},'qfxeo':_0x8a16d6(0x1e6),'ZqBgW':_0x8a16d6(0x1fa),'XzCZq':_0x8a16d6(0x1c6),'vbBzB':_0x8a16d6(0x1c2),'phRmX':_0x8a16d6(0x213),'NNYro':'0|4|3|1|2','qkrYo':_0x8a16d6(0x1a9),'LQiwD':function(_0x480252,_0x543e5c){return _0x480252>_0x543e5c;},'auubm':function(_0x41ea6d,_0x56e08a){return _0x41ea6d-_0x56e08a;},'CaHxe':function(_0x479cb9,_0x4ac216){return _0x479cb9>=_0x4ac216;},'eWTmA':function(_0x350b3e,_0xd2e22e){return _0x350b3e!=_0xd2e22e;},'pCBTi':'true','Jkbuz':function(_0x545eda,_0xc3ca67,_0x5c9b9a,_0x55e008,_0x1ad802,_0xddd7fe){return _0x545eda(_0xc3ca67,_0x5c9b9a,_0x55e008,_0x1ad802,_0xddd7fe);}},_0x497a83=helper['getPackageVersion'](_0x65e35e['phRmX']);let _0x1f6705=constants[_0x8a16d6(0x206)][_0x8a16d6(0x1f3)];global['__isPlaywrightInstalled']=!!_0x497a83,await _0x44fee2[_0x8a16d6(0x1cf)](_0x4352f8);if(_0x497a83){const _0x2b5fcb=_0x65e35e[_0x8a16d6(0x19e)][_0x8a16d6(0x219)]('|');let _0x3ee0ac=0x0;while(!![]){switch(_0x2b5fcb[_0x3ee0ac++]){case'0':_0x1f6705=constants[_0x8a16d6(0x206)]['PLAYWRIGHT'];continue;case'1':BrowserstackCLI[_0x8a16d6(0x19a)]()['setBrowserstackConfig'](_0x44fee2[_0x8a16d6(0x1cc)],_0x44fee2[_0x8a16d6(0x199)]);continue;case'2':await BrowserstackCLI[_0x8a16d6(0x19a)]()[_0x8a16d6(0x212)]();continue;case'3':CLIUtils['setFrameworkDetail'](constants[_0x8a16d6(0x206)][_0x8a16d6(0x1f3)],_0x1f6705);continue;case'4':logger['debug'](_0x8a16d6(0x1eb)+_0x497a83+_0x8a16d6(0x1d9));continue;}break;}}BrowserstackCLI[_0x8a16d6(0x19a)]()['binSessionId']&&(process[_0x8a16d6(0x1d4)][_0x8a16d6(0x1e4)]=BrowserstackCLI[_0x8a16d6(0x19a)]()[_0x8a16d6(0x1f9)]);helper['setUserConfigPath'](_0x44fee2[_0x8a16d6(0x1b5)],_0x4352f8);!helper[_0x8a16d6(0x20a)]()&&await _0x44fee2[_0x8a16d6(0x1b6)]();await helper[_0x8a16d6(0x218)](_0x44fee2['config']);const _0x3e0f02=helper[_0x8a16d6(0x1d7)](_0x44fee2[_0x8a16d6(0x1cc)]);!helper['isUndefined'](_0x44fee2[_0x8a16d6(0x1cc)][_0x8a16d6(0x1ef)])&&(process[_0x8a16d6(0x1d4)]['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON['stringify'](_0x44fee2[_0x8a16d6(0x1cc)][_0x8a16d6(0x1ef)]));if(!BrowserstackCLI[_0x8a16d6(0x19a)]()[_0x8a16d6(0x1b4)]()){const _0x4f9ff9=await TestHubHandler['launchBuild'](constants['FRAMEWORKS'][_0x8a16d6(0x1f3)],_0x44fee2);}let _0x3bbc32=[];if(!helper[_0x8a16d6(0x20a)]()){const _0x134f32={};_0x134f32['platforms']=[],_0x3bbc32=helper[_0x8a16d6(0x1aa)](Object[_0x8a16d6(0x21c)]({},_0x44fee2[_0x8a16d6(0x1cc)],_0x134f32),_0x3e0f02,constants[_0x8a16d6(0x206)]['CUCUMBER']);}else _0x3bbc32=helper[_0x8a16d6(0x1aa)](_0x44fee2[_0x8a16d6(0x1cc)],_0x3e0f02,constants['FRAMEWORKS'][_0x8a16d6(0x1f3)]);if(!_0x44fee2['config'])return;const _0x2b3ba5=_0x44fee2[_0x8a16d6(0x1cc)][_0x8a16d6(0x20f)]||helper[_0x8a16d6(0x196)](_0x4352f8,_0x16e470,_0x44fee2[_0x8a16d6(0x1cc)],constants[_0x8a16d6(0x206)][_0x8a16d6(0x1f3)])||0x1,_0x281a96={'server':helper[_0x8a16d6(0x204)](_0x44fee2[_0x8a16d6(0x1cc)]),'proxySettings':_0x44fee2[_0x8a16d6(0x1cc)]['proxySettings'],'maxWorkers':_0x2b3ba5,'browserStackLogLevel':_0x44fee2[_0x8a16d6(0x1cc)]['logLevel'],'skipSessionName':_0x44fee2[_0x8a16d6(0x1cc)][_0x8a16d6(0x202)][_0x8a16d6(0x1e5)],'skipSessionStatus':_0x44fee2[_0x8a16d6(0x1cc)][_0x8a16d6(0x202)][_0x8a16d6(0x195)],'turboScaleUrl':_0x44fee2['config']['turboScaleUrl']},_0x42b823=process[_0x8a16d6(0x1c0)],[_0x56502d,_0x256b4e]=helper['parseFormatters'](_0x42b823),_0x5369a4=path[_0x8a16d6(0x1c1)](process[_0x8a16d6(0x1ca)](),_0x65e35e[_0x8a16d6(0x1f2)]);if(_0x65e35e['LQiwD'](_0x256b4e['length'],0x0)){helper['createDir'](_0x5369a4);for(let _0x210aae=_0x65e35e[_0x8a16d6(0x1f6)](_0x56502d[_0x8a16d6(0x214)],0x1);_0x65e35e[_0x8a16d6(0x1ea)](_0x210aae,0x0);_0x210aae--){_0x42b823[_0x8a16d6(0x217)](_0x56502d[_0x210aae],0x2);}}_0x65e35e[_0x8a16d6(0x1e1)](_0x44fee2['config'][_0x8a16d6(0x1c8)],null)?process['env'][_0x8a16d6(0x1be)]=_0x44fee2[_0x8a16d6(0x1cc)]['testObservability']:process[_0x8a16d6(0x1d4)][_0x8a16d6(0x1be)]=_0x65e35e['pCBTi'];PerformanceTester[_0x8a16d6(0x1df)](PerformanceEvents['SDK_SETUP']);let _0xacbf6e;_0x65e35e[_0x8a16d6(0x1da)](parallelCucumberRun,_0x3bbc32,_0x281a96,_0x44fee2[_0x8a16d6(0x1cc)],_0x42b823,_0x256b4e)[_0x8a16d6(0x1e0)](async _0xf1d121=>{const _0x20e38d=_0x8a16d6;PerformanceTester[_0x20e38d(0x1c7)](PerformanceEvents[_0x20e38d(0x1f4)]),_0xacbf6e=_0xf1d121;const _0x4038b8=_0x65e35e[_0x20e38d(0x19b)](printCucumberStats,_0xf1d121);process[_0x20e38d(0x197)]=_0x4038b8,_0x65e35e[_0x20e38d(0x1a5)](_0x256b4e[_0x20e38d(0x214)],0x0)&&(logger[_0x20e38d(0x209)](_0x65e35e[_0x20e38d(0x1b2)]),helper[_0x20e38d(0x1f0)](_0x5369a4,_0x256b4e),logger[_0x20e38d(0x209)](_0x65e35e[_0x20e38d(0x1c5)]),helper[_0x20e38d(0x1e8)](_0x5369a4));})[_0x8a16d6(0x1ff)](async()=>{const _0x4206c2=_0x8a16d6;PerformanceTester[_0x4206c2(0x1c7)](PerformanceEvents[_0x4206c2(0x1f4)]),_0x44fee2['errorMessage']=helper[_0x4206c2(0x200)](_0xacbf6e,_0x65e35e[_0x4206c2(0x1d0)]),testOpsHelper[_0x4206c2(0x1db)]();try{await TestHubHandler['stop'](),await BrowserstackCLI[_0x4206c2(0x19a)]()[_0x4206c2(0x1cb)]();}catch(_0x4cf854){logger[_0x4206c2(0x209)](_0x4206c2(0x207)+util['format'](_0x4cf854));}try{const {browserstackFolderPath:_0x3b31cd,tcgConfigPath:_0x4249df}=helper['getTCGConfigFilePaths']();fs['unlinkSync'](_0x4249df),fs[_0x4206c2(0x1bb)](_0x3b31cd);}catch(_0x2ddd08){logger['debug'](_0x65e35e['vbBzB'],_0x2ddd08);}await utilities[_0x4206c2(0x21b)](_0x44fee2);});}module['exports']=run;