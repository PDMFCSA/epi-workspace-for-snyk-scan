#!/usr/bin/env node
'use strict';const a5_0x3483a1=a5_0x234e;(function(_0x1d178d,_0xcd856f){const _0x1d6b1=a5_0x234e,_0x4420a1=_0x1d178d();while(!![]){try{const _0xae6e97=parseInt(_0x1d6b1(0xd9))/0x1*(parseInt(_0x1d6b1(0x105))/0x2)+parseInt(_0x1d6b1(0xef))/0x3*(-parseInt(_0x1d6b1(0xc0))/0x4)+-parseInt(_0x1d6b1(0x106))/0x5+-parseInt(_0x1d6b1(0xb2))/0x6*(parseInt(_0x1d6b1(0x110))/0x7)+parseInt(_0x1d6b1(0xbe))/0x8+-parseInt(_0x1d6b1(0x10a))/0x9*(parseInt(_0x1d6b1(0xb5))/0xa)+parseInt(_0x1d6b1(0xec))/0xb*(parseInt(_0x1d6b1(0xb4))/0xc);if(_0xae6e97===_0xcd856f)break;else _0x4420a1['push'](_0x4420a1['shift']());}catch(_0x322f3f){_0x4420a1['push'](_0x4420a1['shift']());}}}(a5_0x37cb,0x7db33));function a5_0x234e(_0xb94f89,_0x4c33dc){const _0x37cb2e=a5_0x37cb();return a5_0x234e=function(_0x234eca,_0x114750){_0x234eca=_0x234eca-0xaa;let _0x1f23bd=_0x37cb2e[_0x234eca];return _0x1f23bd;},a5_0x234e(_0xb94f89,_0x4c33dc);}const fs=require('fs'),path=require(a5_0x3483a1(0xb7)),util=require(a5_0x3483a1(0x118)),logger=require(a5_0x3483a1(0xbd))[a5_0x3483a1(0xc6)],{default:BrowserStackSetup}=require(a5_0x3483a1(0xac)),helper=require(a5_0x3483a1(0xe1)),utilities=require('../../helpers/utilities'),constants=require(a5_0x3483a1(0xc1)),{parallelCucumberRun}=require(a5_0x3483a1(0x111)),TestHubHandler=require(a5_0x3483a1(0x11b)),testOpsHelper=require(a5_0x3483a1(0x129)),chalk=require('chalk'),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require(a5_0x3483a1(0xd7))[a5_0x3483a1(0xbc)];function a5_0x37cb(){const _0x12b601=['6mQrjHP','turboScaleUrl','132RnQhdx','670peaekn','dKnAB','path','SDK_CLEANUP','skipSessionStatus','CUCUMBER','length','EVENTS','../../helpers/logger','1039336gTGEIe','logLevel','2268wBxiMP','../utils/constants','bgWhite','VIYPV','platforms','then','winstonLogger','scenarios','useW3C','cucumber','BROWSERSTACK_TEST_OBSERVABILITY_YML','log','KaWAz','exports','getPlatformName','rmdirSync','proxySettings','finally','ohvXT','JpqMo','cwd','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','yellow','../../helpers/performance/constants','scenariosFailed','85037gwTarC','stepsFailed','SwAkN','****\x20RESULTS\x20****','cZxfg','xUQeR','mlFBF','\x20steps','../../helpers/helper','argv','env','assign','stepsPending','waraE','getHubUrl','forEach','SDK_SETUP','bold','TcQXg','1070443jReEts','finalExecution','green','2883tZcGTJ','push','ZFTYK','stepsSkipped','stepsAmbiguous','eAZvF','parallelsPerPlatform','\x20scenarios','setUserConfigPath','jFDXd','isBrowserstackInfra','steps','start','format','getErrorMessageFromResults','cCfXP','config','initialize','cyan','Removing\x20tmp\x20directory\x20created\x20for\x20reports','printBuildLink','\x20undefined','20dHSViw','2956685jgAeld','rTSxN','exitCode','bzuhI','5247ppswgl','true','Generating\x20consolidated\x20report...','stepsPassed','FUKKr','createDir','2524046AtKlwo','../test-runner','VxxwE','\x20ambiguous','GhrpA','stepsUndefined','QHWMJ','ddrhG','util','sQysH','getTCGConfigFilePaths','../../helpers/testhub/testhubHandler','testObservability','parseFormatters','processSuccess','prepareCapabilities','isUndefined','debug','framework','\x20passed','handleApp','FRAMEWORKS','\x20failed','QgiOh','testContextOptions','../../helpers/test-observability/utils','join','CpbjF','\x20skipped','red','DrZpv','\x20pending','../../helpers/BrowserStackSetup','setupTCGAuth','accessibilityOptions','unlinkSync','skipSessionName','errorMessage'];a5_0x37cb=function(){return _0x12b601;};return a5_0x37cb();}function printCucumberStats(_0x215489){const _0x477e37=a5_0x3483a1,_0x15d206={};_0x15d206[_0x477e37(0x12b)]=function(_0x30db40,_0x58e7cc){return _0x30db40>_0x58e7cc;},_0x15d206[_0x477e37(0xfe)]=function(_0x6113bd,_0x4ecaab){return _0x6113bd-_0x4ecaab;},_0x15d206['KaWAz']=function(_0x46166a,_0x587480){return _0x46166a-_0x587480;},_0x15d206[_0x477e37(0x114)]=function(_0x4f8fa8,_0x2e6d9a){return _0x4f8fa8>_0x2e6d9a;},_0x15d206[_0x477e37(0x117)]=function(_0x4ae4b0,_0x3be771){return _0x4ae4b0>_0x3be771;},_0x15d206['ZFTYK']=function(_0x106299,_0x2b1751){return _0x106299>_0x2b1751;},_0x15d206[_0x477e37(0x112)]=function(_0x386ed2,_0x4e200a){return _0x386ed2>_0x4e200a;},_0x15d206[_0x477e37(0xde)]=function(_0xb06653,_0x4d08bd){return _0xb06653>_0x4d08bd;},_0x15d206['zKsXD']=function(_0x1737ab,_0x2ec67a){return _0x1737ab>_0x2ec67a;},_0x15d206[_0x477e37(0xc3)]=function(_0x2d302a,_0x40d8ff){return _0x2d302a>_0x40d8ff;},_0x15d206[_0x477e37(0xb6)]=function(_0x1e63b8,_0x5d4411){return _0x1e63b8+_0x5d4411;},_0x15d206[_0x477e37(0x10e)]=function(_0x2e22e7,_0x3e6113){return _0x2e22e7+_0x3e6113;},_0x15d206[_0x477e37(0x109)]=function(_0x5da6dc,_0x1ae80a){return _0x5da6dc+_0x1ae80a;},_0x15d206['TcQXg']=function(_0x45113d,_0x84cf3b){return _0x45113d+_0x84cf3b;},_0x15d206[_0x477e37(0x107)]=function(_0x26902d,_0x555049){return _0x26902d===_0x555049;},_0x15d206['JpqMo']=function(_0x56e04a,_0x532dbc){return _0x56e04a===_0x532dbc;},_0x15d206['DrZpv']=_0x477e37(0xdc);const _0x215601=_0x15d206;let _0x37d514=0x0;if(_0x215601[_0x477e37(0xd3)](_0x215489[_0x477e37(0xbb)],0x0))return _0x37d514;return console[_0x477e37(0xcb)](chalk[_0x477e37(0xea)][_0x477e37(0xc2)](_0x215601[_0x477e37(0xaa)])),_0x215489[_0x477e37(0xe8)](_0x244dbb=>{const _0xbcc6fe=_0x477e37,_0x25f665=_0x244dbb[0x0],_0x1460b5=_0x244dbb[0x1];helper[_0xbcc6fe(0xf9)]()&&console[_0xbcc6fe(0xcb)]('\x0a'+chalk['bold'][_0xbcc6fe(0xd6)](''+helper[_0xbcc6fe(0xce)](_0x25f665)));const _0x5a1e37=_0x1460b5[_0xbcc6fe(0xc7)],_0xea7b0a=_0x1460b5[_0xbcc6fe(0xfa)],_0x4957de=_0x1460b5[_0xbcc6fe(0xd8)],_0x48f832=_0x1460b5[_0xbcc6fe(0xda)],_0x3b60de=_0x1460b5[_0xbcc6fe(0x10d)],_0x3b7260=_0x1460b5[_0xbcc6fe(0xf2)],_0x40260a=_0x1460b5[_0xbcc6fe(0xe5)],_0x3d2b0e=_0x1460b5[_0xbcc6fe(0x115)],_0x2e32ff=_0x1460b5['stepsUnknown'],_0x24f448=_0x1460b5[_0xbcc6fe(0xf3)],_0x29e137=_0x1460b5[_0xbcc6fe(0x11e)];let _0x2c5d9d=_0x5a1e37+_0xbcc6fe(0xf6);const _0x2f389b=_0x215601[_0xbcc6fe(0x12b)](_0x215601[_0xbcc6fe(0xfe)](_0x5a1e37,_0x4957de),0x0)?_0x215601[_0xbcc6fe(0xcc)](_0x5a1e37,_0x4957de):0x0;if(_0x215601[_0xbcc6fe(0x114)](_0x4957de,0x0)&&_0x215601[_0xbcc6fe(0x114)](_0x2f389b,0x0))_0x2c5d9d+='\x20('+chalk[_0xbcc6fe(0xea)][_0xbcc6fe(0x12d)](_0x4957de+_0xbcc6fe(0x126))+',\x20'+chalk[_0xbcc6fe(0xea)][_0xbcc6fe(0xee)](_0x2f389b+_0xbcc6fe(0x123))+')';else(_0x215601[_0xbcc6fe(0x12b)](_0x4957de,0x0)||_0x215601[_0xbcc6fe(0x117)](_0x2f389b,0x0))&&(_0x2c5d9d+=_0x215601['GhrpA'](_0x4957de,0x0)?'\x20('+chalk[_0xbcc6fe(0xea)][_0xbcc6fe(0x12d)](_0x4957de+'\x20failed')+')':'\x20('+chalk[_0xbcc6fe(0xea)][_0xbcc6fe(0xee)](_0x2f389b+_0xbcc6fe(0x123))+')');const _0x5b7737=_0xea7b0a+_0xbcc6fe(0xe0),_0x1a2dab=[];_0x215601[_0xbcc6fe(0xf1)](_0x24f448,0x0)&&_0x1a2dab[_0xbcc6fe(0xf0)](''+chalk['bold'][_0xbcc6fe(0x12d)](_0x24f448+_0xbcc6fe(0x113)));_0x215601[_0xbcc6fe(0x112)](_0x48f832,0x0)&&_0x1a2dab[_0xbcc6fe(0xf0)](''+chalk[_0xbcc6fe(0xea)][_0xbcc6fe(0x12d)](_0x48f832+'\x20failed'));_0x215601[_0xbcc6fe(0x112)](_0x3b60de,0x0)&&_0x1a2dab['push'](''+chalk[_0xbcc6fe(0xea)][_0xbcc6fe(0xee)](_0x3b60de+_0xbcc6fe(0x123)));_0x215601[_0xbcc6fe(0xde)](_0x40260a,0x0)&&_0x1a2dab[_0xbcc6fe(0xf0)](''+chalk[_0xbcc6fe(0xea)][_0xbcc6fe(0xd6)](_0x40260a+_0xbcc6fe(0xab)));_0x215601['zKsXD'](_0x3b7260,0x0)&&_0x1a2dab[_0xbcc6fe(0xf0)](''+chalk['bold'][_0xbcc6fe(0x101)](_0x3b7260+'\x20skipped'));_0x215601[_0xbcc6fe(0xc3)](_0x3d2b0e,0x0)&&_0x1a2dab[_0xbcc6fe(0xf0)](''+chalk[_0xbcc6fe(0xea)][_0xbcc6fe(0xd6)](_0x3d2b0e+_0xbcc6fe(0x104)));_0x215601[_0xbcc6fe(0x112)](_0x2e32ff,0x0)&&_0x1a2dab['push'](''+chalk[_0xbcc6fe(0xea)][_0xbcc6fe(0xd6)](_0x2e32ff+_0xbcc6fe(0x12c)));const _0x1819f1=_0x215601[_0xbcc6fe(0xb6)](_0x215601[_0xbcc6fe(0x10e)](_0x215601['FUKKr'](_0x5b7737,'('),_0x1a2dab[_0xbcc6fe(0x12a)](',\x20')),')');console[_0xbcc6fe(0xcb)](_0x215601[_0xbcc6fe(0x109)](_0x215601[_0xbcc6fe(0x109)](_0x215601[_0xbcc6fe(0x109)](_0x215601[_0xbcc6fe(0xeb)]('\x0a',_0x2c5d9d),'\x0a'),_0x1819f1),'\x0a')),_0x215601['rTSxN'](_0x29e137,![])&&(_0x37d514=0x1);}),_0x37d514;}async function run(_0x3b13c0,_0x2c4079,_0x4d4159){const _0x83e117=a5_0x3483a1,_0x3e93cc={'viivS':function(_0x1262fb,_0x3e4fc2){return _0x1262fb(_0x3e4fc2);},'sQysH':function(_0x48e028,_0x5d6dea){return _0x48e028>_0x5d6dea;},'jFDXd':_0x83e117(0x10c),'NAVmo':_0x83e117(0x102),'cZxfg':_0x83e117(0xc9),'QHWMJ':'error\x20removing\x20tcg\x20config\x20file','waraE':'tmp','ohvXT':function(_0x2ef466,_0x21fbf4){return _0x2ef466>_0x21fbf4;},'QgiOh':function(_0x30b9b9,_0x22dd33){return _0x30b9b9-_0x22dd33;},'bDMTx':function(_0x644044,_0x3dc451){return _0x644044>=_0x3dc451;},'SwAkN':function(_0x166d18,_0x3afe47){return _0x166d18!=_0x3afe47;},'mlFBF':_0x83e117(0x10b),'eAZvF':function(_0x25eed5,_0x1323d5,_0x98b991,_0x187e54,_0xbb0131,_0xec3738){return _0x25eed5(_0x1323d5,_0x98b991,_0x187e54,_0xbb0131,_0xec3738);}};await _0x4d4159[_0x83e117(0x100)](_0x3b13c0),helper[_0x83e117(0xf7)](_0x4d4159[_0x83e117(0x122)],_0x3b13c0);!helper[_0x83e117(0xf9)]()&&await _0x4d4159[_0x83e117(0xad)]();await helper[_0x83e117(0x124)](_0x4d4159['config']);const _0x53c8e4=helper[_0x83e117(0xc8)](_0x4d4159[_0x83e117(0xff)]);!helper[_0x83e117(0x120)](_0x4d4159['config'][_0x83e117(0xae)])&&(process[_0x83e117(0xe3)]['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON['stringify'](_0x4d4159[_0x83e117(0xff)][_0x83e117(0xae)]));const _0x541bc6=await TestHubHandler['launchBuild'](constants[_0x83e117(0x125)][_0x83e117(0xba)],_0x4d4159);let _0x37d588=[];if(!helper[_0x83e117(0xf9)]()){const _0x383e87={};_0x383e87[_0x83e117(0xc4)]=[],_0x37d588=helper[_0x83e117(0x11f)](Object[_0x83e117(0xe4)]({},_0x4d4159[_0x83e117(0xff)],_0x383e87),_0x53c8e4,constants[_0x83e117(0x125)]['CUCUMBER']);}else _0x37d588=helper[_0x83e117(0x11f)](_0x4d4159[_0x83e117(0xff)],_0x53c8e4,constants[_0x83e117(0x125)][_0x83e117(0xba)]);if(!_0x4d4159[_0x83e117(0xff)])return;const _0xeadec0=_0x4d4159[_0x83e117(0xff)][_0x83e117(0xf5)]||helper['getUserWorkerCount'](_0x3b13c0,_0x2c4079,_0x4d4159[_0x83e117(0xff)],constants[_0x83e117(0x125)][_0x83e117(0xba)])||0x1,_0x39e818={'server':helper[_0x83e117(0xe7)](_0x4d4159[_0x83e117(0xff)]),'proxySettings':_0x4d4159[_0x83e117(0xff)][_0x83e117(0xd0)],'maxWorkers':_0xeadec0,'browserStackLogLevel':_0x4d4159[_0x83e117(0xff)][_0x83e117(0xbf)],'skipSessionName':_0x4d4159[_0x83e117(0xff)][_0x83e117(0x128)][_0x83e117(0xb0)],'skipSessionStatus':_0x4d4159[_0x83e117(0xff)][_0x83e117(0x128)][_0x83e117(0xb9)],'turboScaleUrl':_0x4d4159[_0x83e117(0xff)][_0x83e117(0xb3)]},_0x3ca384=process[_0x83e117(0xe2)],[_0x39e471,_0x3cf4db]=helper[_0x83e117(0x11d)](_0x3ca384),_0x5d6f24=path['join'](process[_0x83e117(0xd4)](),_0x3e93cc[_0x83e117(0xe6)]);if(_0x3e93cc[_0x83e117(0xd2)](_0x3cf4db[_0x83e117(0xbb)],0x0)){helper[_0x83e117(0x10f)](_0x5d6f24);for(let _0x179c13=_0x3e93cc[_0x83e117(0x127)](_0x39e471[_0x83e117(0xbb)],0x1);_0x3e93cc['bDMTx'](_0x179c13,0x0);_0x179c13--){_0x3ca384['splice'](_0x39e471[_0x179c13],0x2);}}_0x3e93cc[_0x83e117(0xdb)](_0x4d4159[_0x83e117(0xff)][_0x83e117(0x11c)],null)?process[_0x83e117(0xe3)][_0x83e117(0xca)]=_0x4d4159[_0x83e117(0xff)][_0x83e117(0x11c)]:process['env'][_0x83e117(0xca)]=_0x3e93cc[_0x83e117(0xdf)];PerformanceTester['end'](PerformanceEvents[_0x83e117(0xe9)]);let _0xf589fe;_0x3e93cc[_0x83e117(0xf4)](parallelCucumberRun,_0x37d588,_0x39e818,_0x4d4159[_0x83e117(0xff)],_0x3ca384,_0x3cf4db)[_0x83e117(0xc5)](async _0x435c09=>{const _0x4955d3=_0x83e117;PerformanceTester['start'](PerformanceEvents[_0x4955d3(0xb8)]),_0xf589fe=_0x435c09;const _0x260d56=_0x3e93cc['viivS'](printCucumberStats,_0x435c09);process[_0x4955d3(0x108)]=_0x260d56,_0x3e93cc[_0x4955d3(0x119)](_0x3cf4db[_0x4955d3(0xbb)],0x0)&&(logger[_0x4955d3(0x121)](_0x3e93cc[_0x4955d3(0xf8)]),helper['mergeOutputFiles'](_0x5d6f24,_0x3cf4db),logger['debug'](_0x3e93cc['NAVmo']),helper['removeDir'](_0x5d6f24));})[_0x83e117(0xd1)](async()=>{const _0x531b85=_0x83e117;PerformanceTester[_0x531b85(0xfb)](PerformanceEvents[_0x531b85(0xb8)]),_0x4d4159[_0x531b85(0xb1)]=helper[_0x531b85(0xfd)](_0xf589fe,_0x3e93cc[_0x531b85(0xdd)]),testOpsHelper[_0x531b85(0x103)]();try{await TestHubHandler['stop']();}catch(_0x360179){logger[_0x531b85(0x121)](_0x531b85(0xd5)+util[_0x531b85(0xfc)](_0x360179));}try{const {browserstackFolderPath:_0x1091b2,tcgConfigPath:_0x4935d5}=helper[_0x531b85(0x11a)]();fs[_0x531b85(0xaf)](_0x4935d5),fs[_0x531b85(0xcf)](_0x1091b2);}catch(_0x5af13a){logger[_0x531b85(0x121)](_0x3e93cc[_0x531b85(0x116)],_0x5af13a);}await utilities[_0x531b85(0xed)](_0x4d4159);});}module[a5_0x3483a1(0xcd)]=run;