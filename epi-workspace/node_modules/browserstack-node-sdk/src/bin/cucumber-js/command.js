#!/usr/bin/env node
'use strict';const a5_0x36229f=a5_0x4b93;(function(_0x114759,_0xdfd8df){const _0x234a74=a5_0x4b93,_0x1d6889=_0x114759();while(!![]){try{const _0x5af3e6=parseInt(_0x234a74(0x12b))/0x1*(parseInt(_0x234a74(0x168))/0x2)+-parseInt(_0x234a74(0x159))/0x3*(parseInt(_0x234a74(0x12e))/0x4)+-parseInt(_0x234a74(0x133))/0x5+parseInt(_0x234a74(0x152))/0x6+parseInt(_0x234a74(0x155))/0x7+parseInt(_0x234a74(0x15c))/0x8*(parseInt(_0x234a74(0x149))/0x9)+-parseInt(_0x234a74(0x141))/0xa;if(_0x5af3e6===_0xdfd8df)break;else _0x1d6889['push'](_0x1d6889['shift']());}catch(_0x31cda9){_0x1d6889['push'](_0x1d6889['shift']());}}}(a5_0x11c5,0xcf0a9));function a5_0x4b93(_0x1b12a8,_0x5a80eb){const _0x11c551=a5_0x11c5();return a5_0x4b93=function(_0x4b9389,_0x4d14c6){_0x4b9389=_0x4b9389-0x118;let _0x4afe1a=_0x11c551[_0x4b9389];return _0x4afe1a;},a5_0x4b93(_0x1b12a8,_0x5a80eb);}const fs=require('fs'),path=require(a5_0x36229f(0x184)),util=require(a5_0x36229f(0x125)),logger=require(a5_0x36229f(0x150))[a5_0x36229f(0x136)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a5_0x36229f(0x16b)),utilities=require('../../helpers/utilities'),constants=require(a5_0x36229f(0x11a)),{parallelCucumberRun}=require(a5_0x36229f(0x177)),TestHubHandler=require(a5_0x36229f(0x186)),testOpsHelper=require(a5_0x36229f(0x18e)),chalk=require(a5_0x36229f(0x171)),PerformanceTester=require(a5_0x36229f(0x14d)),PerformanceEvents=require('../../helpers/performance/constants')[a5_0x36229f(0x14b)];function printCucumberStats(_0x3efbd3){const _0x166ce8=a5_0x36229f,_0x106e20={};_0x106e20[_0x166ce8(0x129)]=function(_0x385a7d,_0x1c6201){return _0x385a7d>_0x1c6201;},_0x106e20[_0x166ce8(0x120)]=function(_0x2ae0c5,_0x1875fa){return _0x2ae0c5-_0x1875fa;},_0x106e20['lPBoW']=function(_0x45fb3d,_0x5e03b7){return _0x45fb3d>_0x5e03b7;},_0x106e20[_0x166ce8(0x17d)]=function(_0x4c1794,_0x20c99f){return _0x4c1794>_0x20c99f;},_0x106e20['VhVEa']=function(_0x50c3f0,_0x10b91a){return _0x50c3f0>_0x10b91a;},_0x106e20[_0x166ce8(0x121)]=function(_0x1b31e2,_0xd531dd){return _0x1b31e2>_0xd531dd;},_0x106e20[_0x166ce8(0x13e)]=function(_0x12a2be,_0x58cf3a){return _0x12a2be>_0x58cf3a;},_0x106e20[_0x166ce8(0x148)]=function(_0x39dccf,_0x4b9877){return _0x39dccf>_0x4b9877;},_0x106e20[_0x166ce8(0x161)]=function(_0x15fd1c,_0x5d1d47){return _0x15fd1c+_0x5d1d47;},_0x106e20['JfUjd']=function(_0x159482,_0x213190){return _0x159482+_0x213190;},_0x106e20[_0x166ce8(0x17b)]=function(_0x1a5640,_0x1b21f5){return _0x1a5640===_0x1b21f5;},_0x106e20[_0x166ce8(0x175)]=_0x166ce8(0x163);const _0x4f0b81=_0x106e20;let _0x596307=0x0;if(_0x4f0b81[_0x166ce8(0x17b)](_0x3efbd3['length'],0x0))return _0x596307;return console[_0x166ce8(0x16f)](chalk['bold'][_0x166ce8(0x158)](_0x4f0b81[_0x166ce8(0x175)])),_0x3efbd3[_0x166ce8(0x188)](_0x1b682c=>{const _0x2af53e=_0x166ce8,_0x29035c=_0x1b682c[0x0],_0x49104f=_0x1b682c[0x1];helper[_0x2af53e(0x127)]()&&console[_0x2af53e(0x16f)]('\x0a'+chalk[_0x2af53e(0x172)][_0x2af53e(0x144)](''+helper['getPlatformName'](_0x29035c)));const _0x118f26=_0x49104f[_0x2af53e(0x18b)],_0x507de8=_0x49104f[_0x2af53e(0x140)],_0x711cdd=_0x49104f[_0x2af53e(0x13d)],_0x5e5e97=_0x49104f['stepsFailed'],_0x4f1973=_0x49104f[_0x2af53e(0x187)],_0x139f90=_0x49104f[_0x2af53e(0x162)],_0x26ff8c=_0x49104f[_0x2af53e(0x181)],_0x8ce802=_0x49104f['stepsUndefined'],_0x32b065=_0x49104f[_0x2af53e(0x178)],_0x556816=_0x49104f[_0x2af53e(0x122)],_0x2827e0=_0x49104f[_0x2af53e(0x182)];let _0x21470c=_0x118f26+_0x2af53e(0x118);const _0x1d7905=_0x4f0b81['arnnZ'](_0x4f0b81[_0x2af53e(0x120)](_0x118f26,_0x711cdd),0x0)?_0x4f0b81[_0x2af53e(0x120)](_0x118f26,_0x711cdd):0x0;if(_0x4f0b81[_0x2af53e(0x165)](_0x711cdd,0x0)&&_0x4f0b81[_0x2af53e(0x129)](_0x1d7905,0x0))_0x21470c+='\x20('+chalk[_0x2af53e(0x172)][_0x2af53e(0x160)](_0x711cdd+_0x2af53e(0x119))+',\x20'+chalk[_0x2af53e(0x172)][_0x2af53e(0x142)](_0x1d7905+_0x2af53e(0x17f))+')';else(_0x4f0b81[_0x2af53e(0x165)](_0x711cdd,0x0)||_0x4f0b81[_0x2af53e(0x129)](_0x1d7905,0x0))&&(_0x21470c+=_0x4f0b81['lPBoW'](_0x711cdd,0x0)?'\x20('+chalk[_0x2af53e(0x172)][_0x2af53e(0x160)](_0x711cdd+'\x20failed')+')':'\x20('+chalk[_0x2af53e(0x172)][_0x2af53e(0x142)](_0x1d7905+_0x2af53e(0x17f))+')');const _0x4e8bc3=_0x507de8+_0x2af53e(0x11f),_0x402d84=[];_0x4f0b81[_0x2af53e(0x17d)](_0x556816,0x0)&&_0x402d84[_0x2af53e(0x17c)](''+chalk[_0x2af53e(0x172)]['red'](_0x556816+_0x2af53e(0x169)));_0x4f0b81[_0x2af53e(0x176)](_0x5e5e97,0x0)&&_0x402d84[_0x2af53e(0x17c)](''+chalk['bold'][_0x2af53e(0x160)](_0x5e5e97+_0x2af53e(0x119)));_0x4f0b81[_0x2af53e(0x129)](_0x4f1973,0x0)&&_0x402d84[_0x2af53e(0x17c)](''+chalk[_0x2af53e(0x172)]['green'](_0x4f1973+_0x2af53e(0x17f)));_0x4f0b81['hfaOK'](_0x26ff8c,0x0)&&_0x402d84['push'](''+chalk[_0x2af53e(0x172)]['yellow'](_0x26ff8c+_0x2af53e(0x189)));_0x4f0b81[_0x2af53e(0x13e)](_0x139f90,0x0)&&_0x402d84[_0x2af53e(0x17c)](''+chalk[_0x2af53e(0x172)][_0x2af53e(0x180)](_0x139f90+_0x2af53e(0x154)));_0x4f0b81[_0x2af53e(0x17d)](_0x8ce802,0x0)&&_0x402d84[_0x2af53e(0x17c)](''+chalk['bold'][_0x2af53e(0x144)](_0x8ce802+_0x2af53e(0x18a)));_0x4f0b81[_0x2af53e(0x148)](_0x32b065,0x0)&&_0x402d84[_0x2af53e(0x17c)](''+chalk[_0x2af53e(0x172)][_0x2af53e(0x144)](_0x32b065+'\x20skipped'));const _0x122ac8=_0x4f0b81[_0x2af53e(0x161)](_0x4f0b81[_0x2af53e(0x151)](_0x4f0b81[_0x2af53e(0x161)](_0x4e8bc3,'('),_0x402d84['join'](',\x20')),')');console[_0x2af53e(0x16f)](_0x4f0b81[_0x2af53e(0x161)](_0x4f0b81[_0x2af53e(0x151)](_0x4f0b81[_0x2af53e(0x151)](_0x4f0b81['cagIS']('\x0a',_0x21470c),'\x0a'),_0x122ac8),'\x0a')),_0x4f0b81['XGjgs'](_0x2827e0,![])&&(_0x596307=0x1);}),_0x596307;}async function run(_0x46dc3b,_0x1f2d3d,_0x517271){const _0x1298c7=a5_0x36229f,_0x4122fb={'pUuBq':function(_0x3717b5,_0x46d915){return _0x3717b5(_0x46d915);},'XkHJJ':function(_0x252e1e,_0x5aa64a){return _0x252e1e>_0x5aa64a;},'cYVrt':_0x1298c7(0x16e),'WoPmZ':'Removing\x20tmp\x20directory\x20created\x20for\x20reports','GsZYV':_0x1298c7(0x183),'HSYay':_0x1298c7(0x18d),'riBLK':'tmp','gbCWE':function(_0xb3e7b4,_0x2b66de){return _0xb3e7b4>_0x2b66de;},'YYPlU':function(_0xe634af,_0x3d3a84){return _0xe634af-_0x3d3a84;},'OBuyp':function(_0x19c72e,_0x29e1b7){return _0x19c72e>=_0x29e1b7;},'QyVSr':function(_0x5316f5,_0x32a285){return _0x5316f5!=_0x32a285;},'oJMGJ':_0x1298c7(0x11b),'oLNaO':function(_0x25efa6,_0x1ecac1,_0x4086bc,_0x5d1674,_0x5c230a,_0x4d4aa4){return _0x25efa6(_0x1ecac1,_0x4086bc,_0x5d1674,_0x5c230a,_0x4d4aa4);}};await _0x517271[_0x1298c7(0x15b)](_0x46dc3b),helper[_0x1298c7(0x130)](_0x517271[_0x1298c7(0x15f)],_0x46dc3b);!helper[_0x1298c7(0x127)]()&&await _0x517271[_0x1298c7(0x18c)]();await helper[_0x1298c7(0x13b)](_0x517271[_0x1298c7(0x179)]);const _0x124bbd=helper['useW3C'](_0x517271[_0x1298c7(0x179)]);!helper[_0x1298c7(0x18f)](_0x517271[_0x1298c7(0x179)][_0x1298c7(0x132)])&&(process[_0x1298c7(0x137)]['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON[_0x1298c7(0x16d)](_0x517271[_0x1298c7(0x179)][_0x1298c7(0x132)]));const _0x276568=await TestHubHandler['launchBuild'](constants[_0x1298c7(0x14c)][_0x1298c7(0x135)],_0x517271);let _0x1bbd78=[];if(!helper[_0x1298c7(0x127)]()){const _0x2557af={};_0x2557af[_0x1298c7(0x16c)]=[],_0x1bbd78=helper['prepareCapabilities'](Object['assign']({},_0x517271['config'],_0x2557af),_0x124bbd,constants[_0x1298c7(0x14c)][_0x1298c7(0x135)]);}else _0x1bbd78=helper[_0x1298c7(0x126)](_0x517271[_0x1298c7(0x179)],_0x124bbd,constants['FRAMEWORKS'][_0x1298c7(0x135)]);if(!_0x517271['config'])return;const _0x518585=_0x517271['config']['parallelsPerPlatform']||helper[_0x1298c7(0x134)](_0x46dc3b,_0x1f2d3d,_0x517271[_0x1298c7(0x179)],constants['FRAMEWORKS'][_0x1298c7(0x135)])||0x1,_0x27c7e5={'server':helper[_0x1298c7(0x153)](_0x517271[_0x1298c7(0x179)]),'proxySettings':_0x517271[_0x1298c7(0x179)][_0x1298c7(0x123)],'maxWorkers':_0x518585,'browserStackLogLevel':_0x517271[_0x1298c7(0x179)][_0x1298c7(0x11c)],'skipSessionName':_0x517271[_0x1298c7(0x179)][_0x1298c7(0x12f)][_0x1298c7(0x12c)],'skipSessionStatus':_0x517271[_0x1298c7(0x179)][_0x1298c7(0x12f)]['skipSessionStatus'],'turboScaleUrl':_0x517271[_0x1298c7(0x179)][_0x1298c7(0x146)]},_0x4bd7af=process[_0x1298c7(0x170)],[_0x4db7cd,_0x25159c]=helper[_0x1298c7(0x147)](_0x4bd7af),_0x37b788=path[_0x1298c7(0x192)](process[_0x1298c7(0x13c)](),_0x4122fb[_0x1298c7(0x14f)]);if(_0x4122fb[_0x1298c7(0x138)](_0x25159c['length'],0x0)){helper[_0x1298c7(0x11e)](_0x37b788);for(let _0x5a2c30=_0x4122fb[_0x1298c7(0x15e)](_0x4db7cd[_0x1298c7(0x12a)],0x1);_0x4122fb[_0x1298c7(0x128)](_0x5a2c30,0x0);_0x5a2c30--){_0x4bd7af[_0x1298c7(0x193)](_0x4db7cd[_0x5a2c30],0x2);}}_0x4122fb[_0x1298c7(0x14a)](_0x517271[_0x1298c7(0x179)]['testObservability'],null)?process[_0x1298c7(0x137)]['BROWSERSTACK_TEST_OBSERVABILITY_YML']=_0x517271[_0x1298c7(0x179)][_0x1298c7(0x145)]:process['env'][_0x1298c7(0x139)]=_0x4122fb[_0x1298c7(0x164)];PerformanceTester[_0x1298c7(0x194)](PerformanceEvents[_0x1298c7(0x11d)]);let _0x2faf3f;_0x4122fb[_0x1298c7(0x190)](parallelCucumberRun,_0x1bbd78,_0x27c7e5,_0x517271[_0x1298c7(0x179)],_0x4bd7af,_0x25159c)[_0x1298c7(0x157)](async _0x1dcb4f=>{const _0x46abd7=_0x1298c7;PerformanceTester[_0x46abd7(0x17e)](PerformanceEvents[_0x46abd7(0x174)]),_0x2faf3f=_0x1dcb4f;const _0x2cdd2c=_0x4122fb[_0x46abd7(0x12d)](printCucumberStats,_0x1dcb4f);process['exitCode']=_0x2cdd2c,_0x4122fb[_0x46abd7(0x17a)](_0x25159c[_0x46abd7(0x12a)],0x0)&&(logger[_0x46abd7(0x124)](_0x4122fb[_0x46abd7(0x156)]),helper[_0x46abd7(0x16a)](_0x37b788,_0x25159c),logger['debug'](_0x4122fb[_0x46abd7(0x173)]),helper[_0x46abd7(0x15a)](_0x37b788));})[_0x1298c7(0x185)](async()=>{const _0x365ef8=_0x1298c7;PerformanceTester[_0x365ef8(0x17e)](PerformanceEvents[_0x365ef8(0x174)]),_0x517271[_0x365ef8(0x15d)]=helper['getErrorMessageFromResults'](_0x2faf3f,_0x4122fb[_0x365ef8(0x131)]),testOpsHelper['printBuildLink']();try{await TestHubHandler[_0x365ef8(0x166)]();}catch(_0x493bf5){logger[_0x365ef8(0x124)](_0x365ef8(0x191)+util['format'](_0x493bf5));}try{const {browserstackFolderPath:_0x162aa8,tcgConfigPath:_0x2f62f4}=helper['getTCGConfigFilePaths']();fs[_0x365ef8(0x167)](_0x2f62f4),fs[_0x365ef8(0x143)](_0x162aa8);}catch(_0xcef383){logger[_0x365ef8(0x124)](_0x4122fb[_0x365ef8(0x13a)],_0xcef383);}await utilities[_0x365ef8(0x14e)](_0x517271);});}module[a5_0x36229f(0x13f)]=run;function a5_0x11c5(){const _0x1ab015=['getUserWorkerCount','CUCUMBER','winstonLogger','env','gbCWE','BROWSERSTACK_TEST_OBSERVABILITY_YML','HSYay','handleApp','cwd','scenariosFailed','lsWju','exports','steps','11440470ByUCGm','green','rmdirSync','yellow','testObservability','turboScaleUrl','parseFormatters','TnbWa','64107LpJEZD','QyVSr','EVENTS','FRAMEWORKS','../../helpers/performance/performance-tester','finalExecution','riBLK','../../helpers/logger','JfUjd','9029544qwGUJP','getHubUrl','\x20skipped','1517432ammPQy','cYVrt','then','bgWhite','12OgAncQ','removeDir','initialize','1392LprZUs','errorMessage','YYPlU','framework','red','cagIS','stepsSkipped','****\x20RESULTS\x20****','oJMGJ','lPBoW','stop','unlinkSync','6tXLDZX','\x20ambiguous','mergeOutputFiles','../../helpers/helper','platforms','stringify','Generating\x20consolidated\x20report...','log','argv','chalk','bold','WoPmZ','SDK_CLEANUP','OgQiw','VhVEa','../test-runner','stepsUnknown','config','XkHJJ','XGjgs','push','nzKyg','start','\x20passed','cyan','stepsPending','processSuccess','cucumber','path','finally','../../helpers/testhub/testhubHandler','stepsPassed','forEach','\x20pending','\x20undefined','scenarios','setupTCGAuth','error\x20removing\x20tcg\x20config\x20file','../../helpers/test-observability/utils','isUndefined','oLNaO','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','join','splice','end','\x20scenarios','\x20failed','../utils/constants','true','logLevel','SDK_SETUP','createDir','\x20steps','UCdMf','hfaOK','stepsAmbiguous','proxySettings','debug','util','prepareCapabilities','isBrowserstackInfra','OBuyp','arnnZ','length','329254AIywii','skipSessionName','pUuBq','987004amBIBN','testContextOptions','setUserConfigPath','GsZYV','accessibilityOptions','4848860wTvMko'];a5_0x11c5=function(){return _0x1ab015;};return a5_0x11c5();}