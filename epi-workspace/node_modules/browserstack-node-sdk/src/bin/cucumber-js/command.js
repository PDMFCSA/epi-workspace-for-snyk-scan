#!/usr/bin/env node
'use strict';const a5_0x3c0abb=a5_0x2371;(function(_0x17d5b7,_0x4efdc4){const _0x44c5a0=a5_0x2371,_0x4c90c9=_0x17d5b7();while(!![]){try{const _0x566c7a=-parseInt(_0x44c5a0(0xb5))/0x1+parseInt(_0x44c5a0(0xbf))/0x2*(-parseInt(_0x44c5a0(0xbb))/0x3)+parseInt(_0x44c5a0(0xd3))/0x4*(-parseInt(_0x44c5a0(0xa6))/0x5)+parseInt(_0x44c5a0(0xd9))/0x6+parseInt(_0x44c5a0(0xc1))/0x7*(parseInt(_0x44c5a0(0x124))/0x8)+-parseInt(_0x44c5a0(0xd7))/0x9+parseInt(_0x44c5a0(0xb3))/0xa;if(_0x566c7a===_0x4efdc4)break;else _0x4c90c9['push'](_0x4c90c9['shift']());}catch(_0x3498f1){_0x4c90c9['push'](_0x4c90c9['shift']());}}}(a5_0x41a9,0x22346));const fs=require('fs'),path=require(a5_0x3c0abb(0xb9)),util=require(a5_0x3c0abb(0x104)),logger=require(a5_0x3c0abb(0xd8))[a5_0x3c0abb(0xd5)],{default:BrowserStackSetup}=require(a5_0x3c0abb(0xaa)),helper=require(a5_0x3c0abb(0xfd)),utilities=require(a5_0x3c0abb(0xc5)),constants=require('../utils/constants'),{parallelCucumberRun}=require(a5_0x3c0abb(0x115)),TestHubHandler=require(a5_0x3c0abb(0xe3)),testOpsHelper=require('../../helpers/test-observability/utils'),chalk=require(a5_0x3c0abb(0xae)),PerformanceTester=require(a5_0x3c0abb(0x10c)),PerformanceEvents=require(a5_0x3c0abb(0xfc))[a5_0x3c0abb(0xb0)],BrowserstackCLI=require(a5_0x3c0abb(0x121)),CLIUtils=require(a5_0x3c0abb(0x9f)),TestInfo=require(a5_0x3c0abb(0xa0));function printCucumberStats(_0x4f4be2){const _0x145a14=a5_0x3c0abb,_0x192c9d={};_0x192c9d['gXKkP']=function(_0x210ef4,_0x41ad11){return _0x210ef4>_0x41ad11;},_0x192c9d[_0x145a14(0xbe)]=function(_0x63456d,_0x3890d9){return _0x63456d-_0x3890d9;},_0x192c9d[_0x145a14(0x10a)]=function(_0x5f5459,_0x908dd8){return _0x5f5459>_0x908dd8;},_0x192c9d[_0x145a14(0x10b)]=function(_0x52e3e9,_0x5c7f9d){return _0x52e3e9>_0x5c7f9d;},_0x192c9d['BghTf']=function(_0x3a7b19,_0x246fb1){return _0x3a7b19>_0x246fb1;},_0x192c9d['hJXgm']=function(_0x540e6f,_0x4f8db6){return _0x540e6f>_0x4f8db6;},_0x192c9d[_0x145a14(0x9a)]=function(_0x315375,_0x9be12f){return _0x315375>_0x9be12f;},_0x192c9d[_0x145a14(0xfe)]=function(_0x4d636a,_0x19e79f){return _0x4d636a>_0x19e79f;},_0x192c9d[_0x145a14(0xd6)]=function(_0x390562,_0x373771){return _0x390562>_0x373771;},_0x192c9d[_0x145a14(0x125)]=function(_0x4798d1,_0x4083a2){return _0x4798d1+_0x4083a2;},_0x192c9d['TMlsd']=function(_0x3aa640,_0x51b952){return _0x3aa640+_0x51b952;},_0x192c9d['vGIpI']=function(_0x4b318e,_0xc6faf5){return _0x4b318e+_0xc6faf5;},_0x192c9d[_0x145a14(0xcf)]=function(_0x11bab0,_0x3207d3){return _0x11bab0+_0x3207d3;},_0x192c9d[_0x145a14(0x122)]=function(_0x23dae9,_0x1ba17d){return _0x23dae9===_0x1ba17d;},_0x192c9d[_0x145a14(0xb8)]=_0x145a14(0xb1);const _0x293f00=_0x192c9d;let _0x2d3dba=0x0;if(_0x293f00['JrDkA'](_0x4f4be2['length'],0x0))return _0x2d3dba;return console[_0x145a14(0xf5)](chalk[_0x145a14(0xb2)][_0x145a14(0x118)](_0x293f00['pCZau'])),_0x4f4be2[_0x145a14(0xcc)](_0x4d7546=>{const _0x219b63=_0x145a14,_0x3007a2=_0x4d7546[0x0],_0x473de2=_0x4d7546[0x1];helper[_0x219b63(0xf4)]()&&console['log']('\x0a'+chalk[_0x219b63(0xb2)][_0x219b63(0xf8)](''+helper[_0x219b63(0x9e)](_0x3007a2)));const _0x5eb63d=_0x473de2['scenarios'],_0x35c963=_0x473de2['steps'],_0xfef378=_0x473de2[_0x219b63(0x11d)],_0x4974e3=_0x473de2[_0x219b63(0xf1)],_0x34e58e=_0x473de2['stepsPassed'],_0x37a5fe=_0x473de2[_0x219b63(0x108)],_0x531538=_0x473de2[_0x219b63(0x127)],_0x42df43=_0x473de2[_0x219b63(0x102)],_0x177bb9=_0x473de2[_0x219b63(0xc4)],_0x29ae8b=_0x473de2[_0x219b63(0xeb)],_0x282225=_0x473de2[_0x219b63(0xf7)];let _0x148b40=_0x5eb63d+_0x219b63(0xe4);const _0x1787a1=_0x293f00[_0x219b63(0x11c)](_0x293f00[_0x219b63(0xbe)](_0x5eb63d,_0xfef378),0x0)?_0x293f00['UcISb'](_0x5eb63d,_0xfef378):0x0;if(_0x293f00[_0x219b63(0x10a)](_0xfef378,0x0)&&_0x293f00[_0x219b63(0x10a)](_0x1787a1,0x0))_0x148b40+='\x20('+chalk[_0x219b63(0xb2)][_0x219b63(0x99)](_0xfef378+'\x20failed')+',\x20'+chalk[_0x219b63(0xb2)][_0x219b63(0xc0)](_0x1787a1+_0x219b63(0xed))+')';else(_0x293f00['gXKkP'](_0xfef378,0x0)||_0x293f00[_0x219b63(0x10b)](_0x1787a1,0x0))&&(_0x148b40+=_0x293f00[_0x219b63(0xf3)](_0xfef378,0x0)?'\x20('+chalk[_0x219b63(0xb2)]['red'](_0xfef378+_0x219b63(0xcd))+')':'\x20('+chalk[_0x219b63(0xb2)][_0x219b63(0xc0)](_0x1787a1+_0x219b63(0xed))+')');const _0x232d27=_0x35c963+_0x219b63(0x109),_0x47997c=[];_0x293f00[_0x219b63(0xf9)](_0x29ae8b,0x0)&&_0x47997c['push'](''+chalk['bold']['red'](_0x29ae8b+_0x219b63(0x106)));_0x293f00[_0x219b63(0xf9)](_0x4974e3,0x0)&&_0x47997c[_0x219b63(0xdf)](''+chalk[_0x219b63(0xb2)][_0x219b63(0x99)](_0x4974e3+'\x20failed'));_0x293f00['ogzhV'](_0x34e58e,0x0)&&_0x47997c[_0x219b63(0xdf)](''+chalk['bold'][_0x219b63(0xc0)](_0x34e58e+_0x219b63(0xed)));_0x293f00[_0x219b63(0x10a)](_0x531538,0x0)&&_0x47997c[_0x219b63(0xdf)](''+chalk[_0x219b63(0xb2)]['yellow'](_0x531538+_0x219b63(0x10e)));_0x293f00[_0x219b63(0xfe)](_0x37a5fe,0x0)&&_0x47997c[_0x219b63(0xdf)](''+chalk[_0x219b63(0xb2)][_0x219b63(0x9b)](_0x37a5fe+_0x219b63(0xff)));_0x293f00[_0x219b63(0xd6)](_0x42df43,0x0)&&_0x47997c[_0x219b63(0xdf)](''+chalk[_0x219b63(0xb2)][_0x219b63(0xf8)](_0x42df43+_0x219b63(0x11a)));_0x293f00[_0x219b63(0xfe)](_0x177bb9,0x0)&&_0x47997c['push'](''+chalk[_0x219b63(0xb2)][_0x219b63(0xf8)](_0x177bb9+'\x20skipped'));const _0x1bb6d0=_0x293f00[_0x219b63(0x125)](_0x293f00['axAiq'](_0x293f00['TMlsd'](_0x232d27,'('),_0x47997c[_0x219b63(0xd0)](',\x20')),')');console[_0x219b63(0xf5)](_0x293f00['vGIpI'](_0x293f00[_0x219b63(0xda)](_0x293f00['vGIpI'](_0x293f00[_0x219b63(0xcf)]('\x0a',_0x148b40),'\x0a'),_0x1bb6d0),'\x0a')),_0x293f00[_0x219b63(0x122)](_0x282225,![])&&(_0x2d3dba=0x1);}),_0x2d3dba;}async function run(_0x1793cc,_0xd61db1,_0x25f7a6){const _0x3c04b7=a5_0x3c0abb,_0x53b5fd={'Pnipu':function(_0x3a4b18,_0x3773f3){return _0x3a4b18(_0x3773f3);},'DGweh':function(_0x40adac,_0x11a56a){return _0x40adac>_0x11a56a;},'CBJxp':'Generating\x20consolidated\x20report...','rGOvY':_0x3c04b7(0x100),'Fyixx':_0x3c04b7(0xe5),'QBrbz':_0x3c04b7(0x103),'nuInH':_0x3c04b7(0x113),'bgzDq':_0x3c04b7(0xe7),'pZvoi':'tmp','mrqIm':function(_0x234a0f,_0xd34dfb){return _0x234a0f-_0xd34dfb;},'DJBtj':function(_0x82b937,_0x177b54){return _0x82b937>=_0x177b54;},'UgFmP':function(_0x60aa6c,_0x5b85ca){return _0x60aa6c!=_0x5b85ca;},'GSqsK':_0x3c04b7(0xea),'PzDyE':function(_0x4477ec,_0x4bdc37,_0x2cac8f,_0x218c31,_0x13871e,_0xce02f5){return _0x4477ec(_0x4bdc37,_0x2cac8f,_0x218c31,_0x13871e,_0xce02f5);}},_0x4650e3=helper[_0x3c04b7(0x10f)](_0x53b5fd[_0x3c04b7(0xdb)]);let _0x54b4bb=constants[_0x3c04b7(0xc7)]['CUCUMBER'];global[_0x3c04b7(0xf2)]=!!_0x4650e3,await _0x25f7a6[_0x3c04b7(0xa8)](_0x1793cc);if(_0x4650e3){const _0x5b69df=_0x53b5fd['bgzDq'][_0x3c04b7(0xfa)]('|');let _0x1bc91f=0x0;while(!![]){switch(_0x5b69df[_0x1bc91f++]){case'0':await BrowserstackCLI[_0x3c04b7(0x114)]()[_0x3c04b7(0xb7)]();continue;case'1':BrowserstackCLI['getInstance']()['setBrowserstackConfig'](_0x25f7a6[_0x3c04b7(0xc2)],_0x25f7a6[_0x3c04b7(0xb4)]);continue;case'2':CLIUtils['setFrameworkDetail'](constants[_0x3c04b7(0xc7)][_0x3c04b7(0xe9)],_0x54b4bb);continue;case'3':_0x54b4bb=constants[_0x3c04b7(0xc7)][_0x3c04b7(0xee)];continue;case'4':logger[_0x3c04b7(0x120)](_0x3c04b7(0x9d)+_0x4650e3+'\x20for\x20cucumber-js\x20flow');continue;}break;}}BrowserstackCLI[_0x3c04b7(0x114)]()[_0x3c04b7(0xe1)]&&(process[_0x3c04b7(0x116)][_0x3c04b7(0xa5)]=BrowserstackCLI['getInstance']()[_0x3c04b7(0xe1)]);helper['setUserConfigPath'](_0x25f7a6[_0x3c04b7(0xa3)],_0x1793cc);!helper[_0x3c04b7(0xf4)]()&&await _0x25f7a6[_0x3c04b7(0xce)]();await helper[_0x3c04b7(0xac)](_0x25f7a6['config']);const _0x34dbe5=helper[_0x3c04b7(0x12a)](_0x25f7a6[_0x3c04b7(0xc2)]);!helper[_0x3c04b7(0x10d)](_0x25f7a6[_0x3c04b7(0xc2)][_0x3c04b7(0xa9)])&&(process[_0x3c04b7(0x116)][_0x3c04b7(0xec)]=JSON[_0x3c04b7(0xcb)](_0x25f7a6[_0x3c04b7(0xc2)][_0x3c04b7(0xa9)]));if(!BrowserstackCLI[_0x3c04b7(0x114)]()[_0x3c04b7(0xc9)]()){const _0x5e78ef=await TestHubHandler[_0x3c04b7(0x126)](constants[_0x3c04b7(0xc7)][_0x3c04b7(0xe9)],_0x25f7a6);}let _0x234d67=[];if(!helper[_0x3c04b7(0xf4)]()){const _0x30ca43={};_0x30ca43[_0x3c04b7(0xef)]=[],_0x234d67=helper[_0x3c04b7(0x119)](Object[_0x3c04b7(0xa1)]({},_0x25f7a6['config'],_0x30ca43),_0x34dbe5,constants[_0x3c04b7(0xc7)][_0x3c04b7(0xe9)]);}else _0x234d67=helper[_0x3c04b7(0x119)](_0x25f7a6[_0x3c04b7(0xc2)],_0x34dbe5,constants[_0x3c04b7(0xc7)]['CUCUMBER']);if(!_0x25f7a6['config'])return;const _0x29f2a0=_0x25f7a6['config'][_0x3c04b7(0xbc)]||helper[_0x3c04b7(0xad)](_0x1793cc,_0xd61db1,_0x25f7a6['config'],constants[_0x3c04b7(0xc7)][_0x3c04b7(0xe9)])||0x1,_0x4a29fd={'server':helper[_0x3c04b7(0xbd)](_0x25f7a6[_0x3c04b7(0xc2)]),'proxySettings':_0x25f7a6[_0x3c04b7(0xc2)][_0x3c04b7(0x11b)],'maxWorkers':_0x29f2a0,'browserStackLogLevel':_0x25f7a6[_0x3c04b7(0xc2)][_0x3c04b7(0xa7)],'skipSessionName':_0x25f7a6[_0x3c04b7(0xc2)][_0x3c04b7(0xdc)]['skipSessionName'],'skipSessionStatus':_0x25f7a6[_0x3c04b7(0xc2)][_0x3c04b7(0xdc)][_0x3c04b7(0x101)],'turboScaleUrl':_0x25f7a6['config'][_0x3c04b7(0xde)]},_0x4568e0=process['argv'],[_0x1181b6,_0x445d55]=helper['parseFormatters'](_0x4568e0),_0x516184=path[_0x3c04b7(0xd0)](process[_0x3c04b7(0x105)](),_0x53b5fd[_0x3c04b7(0x111)]);if(_0x53b5fd[_0x3c04b7(0xd4)](_0x445d55['length'],0x0)){helper[_0x3c04b7(0x129)](_0x516184);for(let _0x341351=_0x53b5fd[_0x3c04b7(0xe8)](_0x1181b6[_0x3c04b7(0xe6)],0x1);_0x53b5fd[_0x3c04b7(0x12b)](_0x341351,0x0);_0x341351--){_0x4568e0[_0x3c04b7(0xd1)](_0x1181b6[_0x341351],0x2);}}_0x53b5fd[_0x3c04b7(0x123)](_0x25f7a6[_0x3c04b7(0xc2)][_0x3c04b7(0xaf)],null)?process[_0x3c04b7(0x116)][_0x3c04b7(0xfb)]=_0x25f7a6[_0x3c04b7(0xc2)][_0x3c04b7(0xaf)]:process[_0x3c04b7(0x116)][_0x3c04b7(0xfb)]=_0x53b5fd[_0x3c04b7(0x107)];PerformanceTester[_0x3c04b7(0xc3)](PerformanceEvents[_0x3c04b7(0xa4)]);let _0x34d8e8;_0x53b5fd['PzDyE'](parallelCucumberRun,_0x234d67,_0x4a29fd,_0x25f7a6['config'],_0x4568e0,_0x445d55)[_0x3c04b7(0xe0)](async _0x2822f8=>{const _0x3aca53=_0x3c04b7;PerformanceTester[_0x3aca53(0x11e)](PerformanceEvents[_0x3aca53(0xab)]),_0x34d8e8=_0x2822f8;const _0xaa8bda=_0x53b5fd['Pnipu'](printCucumberStats,_0x2822f8);process[_0x3aca53(0x110)]=_0xaa8bda,_0x53b5fd[_0x3aca53(0xd4)](_0x445d55[_0x3aca53(0xe6)],0x0)&&(logger[_0x3aca53(0x120)](_0x53b5fd[_0x3aca53(0xf0)]),helper[_0x3aca53(0x112)](_0x516184,_0x445d55),logger[_0x3aca53(0x120)](_0x53b5fd[_0x3aca53(0x128)]),helper[_0x3aca53(0xba)](_0x516184));})[_0x3c04b7(0xf6)](async()=>{const _0x59b9b7=_0x3c04b7;PerformanceTester[_0x59b9b7(0x11e)](PerformanceEvents[_0x59b9b7(0xab)]),_0x25f7a6['errorMessage']=helper[_0x59b9b7(0xe2)](_0x34d8e8,_0x53b5fd['Fyixx']),testOpsHelper[_0x59b9b7(0xdd)]();try{await TestHubHandler[_0x59b9b7(0xd2)](),await BrowserstackCLI[_0x59b9b7(0x114)]()['stop']();}catch(_0xed9842){logger[_0x59b9b7(0x120)](_0x59b9b7(0xc6)+util[_0x59b9b7(0xca)](_0xed9842));}try{const {browserstackFolderPath:_0x8181dd,tcgConfigPath:_0x29d2de}=helper[_0x59b9b7(0xb6)]();fs[_0x59b9b7(0x117)](_0x29d2de),fs[_0x59b9b7(0x11f)](_0x8181dd);}catch(_0x349632){logger['debug'](_0x53b5fd[_0x59b9b7(0xa2)],_0x349632);}await utilities[_0x59b9b7(0xc8)](_0x25f7a6);});}function a5_0x41a9(){const _0x9864f8=['parallelsPerPlatform','getHubUrl','UcISb','2BuXCQM','green','13069FNDpvY','config','end','stepsUnknown','../../helpers/utilities','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','FRAMEWORKS','finalExecution','isRunning','format','stringify','forEach','\x20failed','setupTCGAuth','RtPkC','join','splice','stop','718728GKEWUp','DGweh','winstonLogger','JAAtN','1644849PmvYzu','../../helpers/logger','364452ueRfuu','TMlsd','nuInH','testContextOptions','printBuildLink','turboScaleUrl','push','then','binSessionId','getErrorMessageFromResults','../../helpers/testhub/testhubHandler','\x20scenarios','cucumber','length','3|4|2|1|0','mrqIm','CUCUMBER','true','stepsAmbiguous','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','\x20passed','PLAYWRIGHT','platforms','CBJxp','stepsFailed','__isPlaywrightInstalled','BghTf','isBrowserstackInfra','log','finally','processSuccess','yellow','hJXgm','split','BROWSERSTACK_TEST_OBSERVABILITY_YML','../../helpers/performance/constants','../../helpers/helper','fzDWL','\x20skipped','Removing\x20tmp\x20directory\x20created\x20for\x20reports','skipSessionStatus','stepsUndefined','error\x20removing\x20tcg\x20config\x20file','util','cwd','\x20ambiguous','GSqsK','stepsSkipped','\x20steps','yLxNT','lrtik','../../helpers/performance/performance-tester','isUndefined','\x20pending','getPackageVersion','exitCode','pZvoi','mergeOutputFiles','@playwright/test','getInstance','../test-runner','env','unlinkSync','bgWhite','prepareCapabilities','\x20undefined','proxySettings','gXKkP','scenariosFailed','start','rmdirSync','debug','../v2/browserstackCLI','JrDkA','UgFmP','608GndWrM','axAiq','launchBuild','stepsPending','rGOvY','createDir','useW3C','DJBtj','red','ogzhV','cyan','exports','Detected\x20Playwright\x20version\x20','getPlatformName','../v2/cliUtils','../v2/TestInfo','assign','QBrbz','framework','SDK_SETUP','BROWSERSTACK_CLI_BIN_SESSION_ID','5tRRUVZ','logLevel','initialize','accessibilityOptions','../../helpers/BrowserStackSetup','SDK_CLEANUP','handleApp','getUserWorkerCount','chalk','testObservability','EVENTS','****\x20RESULTS\x20****','bold','6681360OxrxJe','cliConfig','182479EYzHWs','getTCGConfigFilePaths','bootstrap','pCZau','path','removeDir','557238prKGRR'];a5_0x41a9=function(){return _0x9864f8;};return a5_0x41a9();}function a5_0x2371(_0xce9cea,_0x4191d7){const _0x41a955=a5_0x41a9();return a5_0x2371=function(_0x23711f,_0x5611a9){_0x23711f=_0x23711f-0x99;let _0x1c2053=_0x41a955[_0x23711f];return _0x1c2053;},a5_0x2371(_0xce9cea,_0x4191d7);}module[a5_0x3c0abb(0x9c)]=run;