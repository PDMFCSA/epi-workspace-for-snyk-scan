#!/usr/bin/env node
'use strict';const a5_0x5f1c8e=a5_0xf223;function a5_0xf223(_0x2ec413,_0x2fc470){const _0xe0b6ee=a5_0xe0b6();return a5_0xf223=function(_0xf223cb,_0x5862d4){_0xf223cb=_0xf223cb-0x107;let _0xd48c79=_0xe0b6ee[_0xf223cb];return _0xd48c79;},a5_0xf223(_0x2ec413,_0x2fc470);}(function(_0x1dc3d2,_0x51b9cb){const _0x51346b=a5_0xf223,_0x747002=_0x1dc3d2();while(!![]){try{const _0x8eebc9=-parseInt(_0x51346b(0x14b))/0x1+-parseInt(_0x51346b(0x12c))/0x2+-parseInt(_0x51346b(0x128))/0x3*(parseInt(_0x51346b(0x171))/0x4)+parseInt(_0x51346b(0x136))/0x5+parseInt(_0x51346b(0x14e))/0x6+-parseInt(_0x51346b(0x12e))/0x7*(-parseInt(_0x51346b(0x14d))/0x8)+parseInt(_0x51346b(0x15a))/0x9;if(_0x8eebc9===_0x51b9cb)break;else _0x747002['push'](_0x747002['shift']());}catch(_0x5b3c28){_0x747002['push'](_0x747002['shift']());}}}(a5_0xe0b6,0x7ded0));const fs=require('fs'),path=require('path'),util=require(a5_0x5f1c8e(0x17b)),logger=require(a5_0x5f1c8e(0x13f))[a5_0x5f1c8e(0x119)],{default:BrowserStackSetup}=require(a5_0x5f1c8e(0x11f)),helper=require(a5_0x5f1c8e(0x120)),utilities=require('../../helpers/utilities'),constants=require(a5_0x5f1c8e(0x10a)),{parallelCucumberRun}=require(a5_0x5f1c8e(0x13b)),TestHubHandler=require(a5_0x5f1c8e(0x160)),testOpsHelper=require(a5_0x5f1c8e(0x13d)),chalk=require(a5_0x5f1c8e(0x111)),PerformanceTester=require(a5_0x5f1c8e(0x17d)),PerformanceEvents=require(a5_0x5f1c8e(0x168))[a5_0x5f1c8e(0x163)];function printCucumberStats(_0x3231bb){const _0x11b0dd=a5_0x5f1c8e,_0x1a40f6={};_0x1a40f6['cWWtF']=function(_0x46c00a,_0x5bd5a6){return _0x46c00a>_0x5bd5a6;},_0x1a40f6['dZBBU']=function(_0x573a4e,_0x30e266){return _0x573a4e-_0x30e266;},_0x1a40f6['Eniln']=function(_0x378ea4,_0x5a2fc1){return _0x378ea4-_0x5a2fc1;},_0x1a40f6['ykBYj']=function(_0x8d60cc,_0x4464ff){return _0x8d60cc>_0x4464ff;},_0x1a40f6[_0x11b0dd(0x114)]=function(_0x5405b9,_0x2e3e50){return _0x5405b9>_0x2e3e50;},_0x1a40f6[_0x11b0dd(0x176)]=function(_0x43efae,_0x1d63a5){return _0x43efae>_0x1d63a5;},_0x1a40f6['dOMsA']=function(_0x59dd98,_0x1dc267){return _0x59dd98>_0x1dc267;},_0x1a40f6[_0x11b0dd(0x110)]=function(_0x1d09d0,_0x26539e){return _0x1d09d0>_0x26539e;},_0x1a40f6[_0x11b0dd(0x124)]=function(_0x55545f,_0x552e4f){return _0x55545f>_0x552e4f;},_0x1a40f6[_0x11b0dd(0x154)]=function(_0x43b8d3,_0x18aaa1){return _0x43b8d3>_0x18aaa1;},_0x1a40f6['MLylo']=function(_0x32031e,_0x48bf7f){return _0x32031e+_0x48bf7f;},_0x1a40f6['FqAgX']=function(_0xcdcb93,_0x506f49){return _0xcdcb93+_0x506f49;},_0x1a40f6[_0x11b0dd(0x115)]=function(_0x110eb7,_0x1ded4c){return _0x110eb7+_0x1ded4c;},_0x1a40f6[_0x11b0dd(0x178)]=function(_0x296c0c,_0x2e6c16){return _0x296c0c+_0x2e6c16;},_0x1a40f6['auaLH']=function(_0x19ac9f,_0x16ca8b){return _0x19ac9f+_0x16ca8b;},_0x1a40f6[_0x11b0dd(0x17f)]=function(_0xc8c35d,_0x5a8854){return _0xc8c35d===_0x5a8854;},_0x1a40f6['XPWzs']=_0x11b0dd(0x17e);const _0xf36ddb=_0x1a40f6;let _0x1c6588=0x0;if(_0xf36ddb[_0x11b0dd(0x17f)](_0x3231bb[_0x11b0dd(0x108)],0x0))return _0x1c6588;return console[_0x11b0dd(0x12b)](chalk[_0x11b0dd(0x166)][_0x11b0dd(0x14c)](_0xf36ddb[_0x11b0dd(0x15d)])),_0x3231bb[_0x11b0dd(0x126)](_0x2160b1=>{const _0x13539c=_0x11b0dd,_0x2047c9=_0x2160b1[0x0],_0x15bc84=_0x2160b1[0x1];helper['isBrowserstackInfra']()&&console[_0x13539c(0x12b)]('\x0a'+chalk[_0x13539c(0x166)][_0x13539c(0x175)](''+helper['getPlatformName'](_0x2047c9)));const _0x5baa74=_0x15bc84[_0x13539c(0x174)],_0x361802=_0x15bc84[_0x13539c(0x12f)],_0x5dd613=_0x15bc84['scenariosFailed'],_0x3e5417=_0x15bc84['stepsFailed'],_0x17570c=_0x15bc84['stepsPassed'],_0x8d88b5=_0x15bc84[_0x13539c(0x121)],_0x1ce042=_0x15bc84['stepsPending'],_0x3f3b2e=_0x15bc84[_0x13539c(0x11d)],_0x416ad1=_0x15bc84[_0x13539c(0x170)],_0x27029f=_0x15bc84[_0x13539c(0x17a)],_0x404ba7=_0x15bc84['processSuccess'];let _0x1d988b=_0x5baa74+_0x13539c(0x14a);const _0x2727b2=_0xf36ddb[_0x13539c(0x16e)](_0xf36ddb[_0x13539c(0x12a)](_0x5baa74,_0x5dd613),0x0)?_0xf36ddb[_0x13539c(0x135)](_0x5baa74,_0x5dd613):0x0;if(_0xf36ddb[_0x13539c(0x16e)](_0x5dd613,0x0)&&_0xf36ddb[_0x13539c(0x16e)](_0x2727b2,0x0))_0x1d988b+='\x20('+chalk['bold'][_0x13539c(0x155)](_0x5dd613+_0x13539c(0x109))+',\x20'+chalk[_0x13539c(0x166)][_0x13539c(0x132)](_0x2727b2+_0x13539c(0x137))+')';else(_0xf36ddb[_0x13539c(0x158)](_0x5dd613,0x0)||_0xf36ddb['gBRXI'](_0x2727b2,0x0))&&(_0x1d988b+=_0xf36ddb['QzQXe'](_0x5dd613,0x0)?'\x20('+chalk[_0x13539c(0x166)][_0x13539c(0x155)](_0x5dd613+_0x13539c(0x109))+')':'\x20('+chalk[_0x13539c(0x166)][_0x13539c(0x132)](_0x2727b2+_0x13539c(0x137))+')');const _0x438c76=_0x361802+_0x13539c(0x152),_0x30ad94=[];_0xf36ddb['QzQXe'](_0x27029f,0x0)&&_0x30ad94[_0x13539c(0x10b)](''+chalk[_0x13539c(0x166)]['red'](_0x27029f+_0x13539c(0x139)));_0xf36ddb[_0x13539c(0x13a)](_0x3e5417,0x0)&&_0x30ad94['push'](''+chalk[_0x13539c(0x166)][_0x13539c(0x155)](_0x3e5417+_0x13539c(0x109)));_0xf36ddb[_0x13539c(0x114)](_0x17570c,0x0)&&_0x30ad94[_0x13539c(0x10b)](''+chalk[_0x13539c(0x166)][_0x13539c(0x132)](_0x17570c+_0x13539c(0x137)));_0xf36ddb[_0x13539c(0x110)](_0x1ce042,0x0)&&_0x30ad94[_0x13539c(0x10b)](''+chalk[_0x13539c(0x166)][_0x13539c(0x175)](_0x1ce042+_0x13539c(0x10c)));_0xf36ddb[_0x13539c(0x124)](_0x8d88b5,0x0)&&_0x30ad94[_0x13539c(0x10b)](''+chalk[_0x13539c(0x166)][_0x13539c(0x148)](_0x8d88b5+'\x20skipped'));_0xf36ddb[_0x13539c(0x154)](_0x3f3b2e,0x0)&&_0x30ad94['push'](''+chalk[_0x13539c(0x166)][_0x13539c(0x175)](_0x3f3b2e+'\x20undefined'));_0xf36ddb[_0x13539c(0x158)](_0x416ad1,0x0)&&_0x30ad94['push'](''+chalk[_0x13539c(0x166)][_0x13539c(0x175)](_0x416ad1+_0x13539c(0x129)));const _0x2833a3=_0xf36ddb[_0x13539c(0x140)](_0xf36ddb[_0x13539c(0x140)](_0xf36ddb['FqAgX'](_0x438c76,'('),_0x30ad94['join'](',\x20')),')');console[_0x13539c(0x12b)](_0xf36ddb[_0x13539c(0x130)](_0xf36ddb['olveV'](_0xf36ddb['ZZCRY'](_0xf36ddb[_0x13539c(0x15b)]('\x0a',_0x1d988b),'\x0a'),_0x2833a3),'\x0a')),_0xf36ddb[_0x13539c(0x17f)](_0x404ba7,![])&&(_0x1c6588=0x1);}),_0x1c6588;}async function run(_0x4ec2d9,_0x492972,_0x330811){const _0x1449d0=a5_0x5f1c8e,_0x2d2137={'NGoas':function(_0xb47de7,_0x40343f){return _0xb47de7(_0x40343f);},'uKIyR':function(_0x27298f,_0x129f3b){return _0x27298f>_0x129f3b;},'Hbvpd':_0x1449d0(0x165),'gjYdE':_0x1449d0(0x10e),'CtmAL':_0x1449d0(0x131),'NCReV':_0x1449d0(0x153),'eRpra':_0x1449d0(0x156),'iLrmP':function(_0x2fec84,_0x17c127){return _0x2fec84-_0x17c127;},'mTVFQ':function(_0xb71670,_0x419d5f){return _0xb71670>=_0x419d5f;},'rQWuX':function(_0x569096,_0x2bcb59){return _0x569096!=_0x2bcb59;},'dUUNq':_0x1449d0(0x123),'eUJjO':function(_0x500914,_0x6d59aa,_0x230968,_0x177724,_0x2a55b9,_0x23549f){return _0x500914(_0x6d59aa,_0x230968,_0x177724,_0x2a55b9,_0x23549f);}};await _0x330811['initialize'](_0x4ec2d9),helper[_0x1449d0(0x159)](_0x330811[_0x1449d0(0x11e)],_0x4ec2d9);!helper[_0x1449d0(0x157)]()&&await _0x330811['setupTCGAuth']();await helper[_0x1449d0(0x169)](_0x330811['config']);const _0x10a5d5=helper[_0x1449d0(0x162)](_0x330811['config']);!helper[_0x1449d0(0x15f)](_0x330811['config']['accessibilityOptions'])&&(process[_0x1449d0(0x16c)]['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON[_0x1449d0(0x144)](_0x330811[_0x1449d0(0x164)][_0x1449d0(0x112)]));const _0x548ace=await TestHubHandler['launchBuild'](constants['FRAMEWORKS'][_0x1449d0(0x149)],_0x330811);let _0xd22e02=[];if(!helper[_0x1449d0(0x157)]()){const _0x3d57c7={};_0x3d57c7['platforms']=[],_0xd22e02=helper[_0x1449d0(0x13e)](Object[_0x1449d0(0x151)]({},_0x330811['config'],_0x3d57c7),_0x10a5d5,constants[_0x1449d0(0x150)][_0x1449d0(0x149)]);}else _0xd22e02=helper[_0x1449d0(0x13e)](_0x330811[_0x1449d0(0x164)],_0x10a5d5,constants[_0x1449d0(0x150)][_0x1449d0(0x149)]);if(!_0x330811[_0x1449d0(0x164)])return;const _0x1ebe72=_0x330811[_0x1449d0(0x164)][_0x1449d0(0x113)]||helper[_0x1449d0(0x145)](_0x4ec2d9,_0x492972,_0x330811[_0x1449d0(0x164)],constants[_0x1449d0(0x150)][_0x1449d0(0x149)])||0x1,_0x400079={'server':helper['getHubUrl'](_0x330811[_0x1449d0(0x164)]),'proxySettings':_0x330811[_0x1449d0(0x164)][_0x1449d0(0x11b)],'maxWorkers':_0x1ebe72,'browserStackLogLevel':_0x330811[_0x1449d0(0x164)][_0x1449d0(0x146)],'skipSessionName':_0x330811[_0x1449d0(0x164)][_0x1449d0(0x172)][_0x1449d0(0x11a)],'skipSessionStatus':_0x330811[_0x1449d0(0x164)][_0x1449d0(0x172)][_0x1449d0(0x116)],'turboScaleUrl':_0x330811[_0x1449d0(0x164)][_0x1449d0(0x117)]},_0x5e0985=process['argv'],[_0x13e855,_0x227b13]=helper[_0x1449d0(0x122)](_0x5e0985),_0x2eddd6=path[_0x1449d0(0x173)](process[_0x1449d0(0x14f)](),_0x2d2137[_0x1449d0(0x167)]);if(_0x2d2137['uKIyR'](_0x227b13['length'],0x0)){helper[_0x1449d0(0x11c)](_0x2eddd6);for(let _0x3858f0=_0x2d2137['iLrmP'](_0x13e855[_0x1449d0(0x108)],0x1);_0x2d2137['mTVFQ'](_0x3858f0,0x0);_0x3858f0--){_0x5e0985['splice'](_0x13e855[_0x3858f0],0x2);}}_0x2d2137[_0x1449d0(0x125)](_0x330811[_0x1449d0(0x164)]['testObservability'],null)?process[_0x1449d0(0x16c)][_0x1449d0(0x12d)]=_0x330811['config'][_0x1449d0(0x118)]:process[_0x1449d0(0x16c)][_0x1449d0(0x12d)]=_0x2d2137[_0x1449d0(0x177)];PerformanceTester[_0x1449d0(0x16f)](PerformanceEvents[_0x1449d0(0x138)]);let _0x37d260;_0x2d2137[_0x1449d0(0x17c)](parallelCucumberRun,_0xd22e02,_0x400079,_0x330811[_0x1449d0(0x164)],_0x5e0985,_0x227b13)['then'](async _0x524502=>{const _0x31d72e=_0x1449d0;PerformanceTester[_0x31d72e(0x107)](PerformanceEvents[_0x31d72e(0x16a)]),_0x37d260=_0x524502;const _0xdcc498=_0x2d2137['NGoas'](printCucumberStats,_0x524502);process[_0x31d72e(0x16d)]=_0xdcc498,_0x2d2137[_0x31d72e(0x142)](_0x227b13[_0x31d72e(0x108)],0x0)&&(logger[_0x31d72e(0x134)](_0x2d2137['Hbvpd']),helper[_0x31d72e(0x10d)](_0x2eddd6,_0x227b13),logger[_0x31d72e(0x134)](_0x2d2137[_0x31d72e(0x15e)]),helper[_0x31d72e(0x179)](_0x2eddd6));})[_0x1449d0(0x16b)](async()=>{const _0x2a153d=_0x1449d0;PerformanceTester[_0x2a153d(0x107)](PerformanceEvents[_0x2a153d(0x16a)]),_0x330811['errorMessage']=helper[_0x2a153d(0x147)](_0x37d260,_0x2d2137[_0x2a153d(0x10f)]),testOpsHelper[_0x2a153d(0x15c)]();try{await TestHubHandler[_0x2a153d(0x13c)]();}catch(_0x54ae4c){logger[_0x2a153d(0x134)](_0x2a153d(0x143)+util[_0x2a153d(0x127)](_0x54ae4c));}try{const {browserstackFolderPath:_0x4c6fb9,tcgConfigPath:_0x8e5745}=helper['getTCGConfigFilePaths']();fs[_0x2a153d(0x133)](_0x8e5745),fs['rmdirSync'](_0x4c6fb9);}catch(_0x5cb3a4){logger['debug'](_0x2d2137[_0x2a153d(0x161)],_0x5cb3a4);}await utilities[_0x2a153d(0x141)](_0x330811);});}module['exports']=run;function a5_0xe0b6(){const _0x40db63=['vaAZu','chalk','accessibilityOptions','parallelsPerPlatform','gBRXI','olveV','skipSessionStatus','turboScaleUrl','testObservability','winstonLogger','skipSessionName','proxySettings','createDir','stepsUndefined','framework','../../helpers/BrowserStackSetup','../../helpers/helper','stepsSkipped','parseFormatters','true','OnZud','rQWuX','forEach','format','25119HjYLSe','\x20skipped','dZBBU','log','598586ydqtAh','BROWSERSTACK_TEST_OBSERVABILITY_YML','511kUyvbg','steps','FqAgX','cucumber','green','unlinkSync','debug','Eniln','248285cLRBLq','\x20passed','SDK_SETUP','\x20ambiguous','dOMsA','../test-runner','stop','../../helpers/test-observability/utils','prepareCapabilities','../../helpers/logger','MLylo','finalExecution','uKIyR','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','stringify','getUserWorkerCount','logLevel','getErrorMessageFromResults','cyan','CUCUMBER','\x20scenarios','703361DZkAMN','bgWhite','75592tabZDD','1933218VUQUPL','cwd','FRAMEWORKS','assign','\x20steps','error\x20removing\x20tcg\x20config\x20file','Rjeql','red','tmp','isBrowserstackInfra','ykBYj','setUserConfigPath','13380192VnTLRF','auaLH','printBuildLink','XPWzs','gjYdE','isUndefined','../../helpers/testhub/testhubHandler','NCReV','useW3C','EVENTS','config','Generating\x20consolidated\x20report...','bold','eRpra','../../helpers/performance/constants','handleApp','SDK_CLEANUP','finally','env','exitCode','cWWtF','end','stepsUnknown','492DiTrsM','testContextOptions','join','scenarios','yellow','QzQXe','dUUNq','ZZCRY','removeDir','stepsAmbiguous','util','eUJjO','../../helpers/performance/performance-tester','****\x20RESULTS\x20****','FrkSb','start','length','\x20failed','../utils/constants','push','\x20pending','mergeOutputFiles','Removing\x20tmp\x20directory\x20created\x20for\x20reports','CtmAL'];a5_0xe0b6=function(){return _0x40db63;};return a5_0xe0b6();}