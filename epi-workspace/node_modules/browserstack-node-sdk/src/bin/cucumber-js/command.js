#!/usr/bin/env node
'use strict';const a5_0x59e36f=a5_0x3644;function a5_0x3644(_0x4e9b44,_0xc4ca9){const _0x2a30fb=a5_0x2a30();return a5_0x3644=function(_0x364442,_0x78e818){_0x364442=_0x364442-0x9b;let _0x2cb99e=_0x2a30fb[_0x364442];return _0x2cb99e;},a5_0x3644(_0x4e9b44,_0xc4ca9);}(function(_0x25b621,_0x12bc02){const _0x39006a=a5_0x3644,_0x5305a5=_0x25b621();while(!![]){try{const _0xe10955=parseInt(_0x39006a(0x106))/0x1*(-parseInt(_0x39006a(0xa9))/0x2)+-parseInt(_0x39006a(0xae))/0x3+parseInt(_0x39006a(0xe8))/0x4+parseInt(_0x39006a(0xea))/0x5*(-parseInt(_0x39006a(0xa1))/0x6)+parseInt(_0x39006a(0x101))/0x7*(parseInt(_0x39006a(0x113))/0x8)+parseInt(_0x39006a(0xa0))/0x9*(parseInt(_0x39006a(0xa6))/0xa)+-parseInt(_0x39006a(0x102))/0xb;if(_0xe10955===_0x12bc02)break;else _0x5305a5['push'](_0x5305a5['shift']());}catch(_0x5adacd){_0x5305a5['push'](_0x5305a5['shift']());}}}(a5_0x2a30,0x31c99));function a5_0x2a30(){const _0x2bc083=['sgitH','1MQcCqh','FRAMEWORKS','processSuccess','config','dhJmE','getUserWorkerCount','red','useW3C','setUserConfigPath','then','VOfzD','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','start','152Gktbfz','initialize','error\x20removing\x20tcg\x20config\x20file','platforms','length','tmp','unlinkSync','DNrMu','54MAbUsl','88692pIhTxZ','testObservability','CUCUMBER','scenariosFailed','../../helpers/performance/constants','298460TsZhEX','debug','createDir','307698JGBEkV','SDK_CLEANUP','util','DOxTF','\x20pending','698538mquAek','steps','getPlatformName','join','parallelsPerPlatform','isUndefined','qdOKP','stepsPending','assign','qZuCe','true','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','finalExecution','testContextOptions','green','\x20undefined','../../helpers/utilities','\x20passed','errorMessage','yellow','jBhHo','../../helpers/test-observability/utils','getErrorMessageFromResults','env','skipSessionStatus','logLevel','MdtnU','parseFormatters','QiazV','stepsPassed','mergeOutputFiles','xwVhH','YnGMu','stop','bold','stepsFailed','../../helpers/testhub/testhubHandler','bgWhite','accessibilityOptions','SDK_SETUP','isBrowserstackInfra','../../helpers/BrowserStackSetup','\x20scenarios','fEdRA','getTCGConfigFilePaths','EVENTS','splice','forEach','\x20skipped','stepsAmbiguous','../test-runner','rmdirSync','scenarios','cyan','launchBuild','skipSessionName','\x20failed','eWqtM','473912TUafFd','Generating\x20consolidated\x20report...','5gOfxFi','HGFhr','winstonLogger','\x20ambiguous','****\x20RESULTS\x20****','UUVRX','Removing\x20tmp\x20directory\x20created\x20for\x20reports','prepareCapabilities','OuKID','removeDir','setupTCGAuth','fHvFw','push','pUqTn','proxySettings','exports','log','path','finally','VBwvh','cwd','NZseW','cucumber','148428ndiEhX','1045264SJeJHQ','turboScaleUrl','BROWSERSTACK_TEST_OBSERVABILITY_YML'];a5_0x2a30=function(){return _0x2bc083;};return a5_0x2a30();}const fs=require('fs'),path=require(a5_0x59e36f(0xfb)),util=require(a5_0x59e36f(0xab)),logger=require('../../helpers/logger')[a5_0x59e36f(0xec)],{default:BrowserStackSetup}=require(a5_0x59e36f(0xd7)),helper=require('../../helpers/helper'),utilities=require(a5_0x59e36f(0xbe)),constants=require('../utils/constants'),{parallelCucumberRun}=require(a5_0x59e36f(0xe0)),TestHubHandler=require(a5_0x59e36f(0xd2)),testOpsHelper=require(a5_0x59e36f(0xc3)),chalk=require('chalk'),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require(a5_0x59e36f(0xa5))[a5_0x59e36f(0xdb)];function printCucumberStats(_0x1e79b9){const _0x5252e7=a5_0x59e36f,_0x5547fe={};_0x5547fe[_0x5252e7(0xfd)]=function(_0x4fa5f5,_0x2b089e){return _0x4fa5f5>_0x2b089e;},_0x5547fe[_0x5252e7(0xeb)]=function(_0x50de32,_0x127864){return _0x50de32-_0x127864;},_0x5547fe['fGXAn']=function(_0x228dde,_0x1fc0b3){return _0x228dde>_0x1fc0b3;},_0x5547fe[_0x5252e7(0xef)]=function(_0xd9c8c,_0x3d4fa3){return _0xd9c8c>_0x3d4fa3;},_0x5547fe[_0x5252e7(0x105)]=function(_0x194047,_0x5c518c){return _0x194047>_0x5c518c;},_0x5547fe[_0x5252e7(0xb7)]=function(_0x328fb7,_0x16c6f8){return _0x328fb7>_0x16c6f8;},_0x5547fe[_0x5252e7(0xd9)]=function(_0x5ae066,_0x3bc123){return _0x5ae066>_0x3bc123;},_0x5547fe[_0x5252e7(0xc8)]=function(_0x49f906,_0x2f6e6d){return _0x49f906+_0x2f6e6d;},_0x5547fe[_0x5252e7(0xf5)]=function(_0x2b8b05,_0x22b69a){return _0x2b8b05+_0x22b69a;},_0x5547fe['xwVhH']=function(_0x1812a5,_0x302a3f){return _0x1812a5+_0x302a3f;},_0x5547fe[_0x5252e7(0xff)]=function(_0x498bed,_0x271af7){return _0x498bed+_0x271af7;},_0x5547fe[_0x5252e7(0xe7)]=function(_0x497355,_0x1d5c4){return _0x497355+_0x1d5c4;},_0x5547fe['qdOKP']=function(_0x3c2538,_0x2c299b){return _0x3c2538===_0x2c299b;},_0x5547fe[_0x5252e7(0x110)]=_0x5252e7(0xee);const _0x1b4c84=_0x5547fe;let _0x3efe63=0x0;if(_0x1b4c84[_0x5252e7(0xb4)](_0x1e79b9[_0x5252e7(0x9c)],0x0))return _0x3efe63;return console['log'](chalk[_0x5252e7(0xd0)][_0x5252e7(0xd3)](_0x1b4c84['VOfzD'])),_0x1e79b9[_0x5252e7(0xdd)](_0x45ee9c=>{const _0x4c80e1=_0x5252e7,_0x4d98fb=_0x45ee9c[0x0],_0x3eb329=_0x45ee9c[0x1];helper[_0x4c80e1(0xd6)]()&&console[_0x4c80e1(0xfa)]('\x0a'+chalk[_0x4c80e1(0xd0)][_0x4c80e1(0xc1)](''+helper[_0x4c80e1(0xb0)](_0x4d98fb)));const _0x3c4dba=_0x3eb329[_0x4c80e1(0xe2)],_0x141878=_0x3eb329[_0x4c80e1(0xaf)],_0x4570bb=_0x3eb329[_0x4c80e1(0xa4)],_0x2b4a2c=_0x3eb329[_0x4c80e1(0xd1)],_0x52a3de=_0x3eb329[_0x4c80e1(0xcb)],_0x3fdd66=_0x3eb329['stepsSkipped'],_0x567e8f=_0x3eb329[_0x4c80e1(0xb5)],_0xfc4eaa=_0x3eb329['stepsUndefined'],_0x2c60c4=_0x3eb329['stepsUnknown'],_0x260abf=_0x3eb329[_0x4c80e1(0xdf)],_0x232868=_0x3eb329[_0x4c80e1(0x108)];let _0xb9372c=_0x3c4dba+_0x4c80e1(0xd8);const _0x4e99bd=_0x1b4c84[_0x4c80e1(0xfd)](_0x1b4c84[_0x4c80e1(0xeb)](_0x3c4dba,_0x4570bb),0x0)?_0x1b4c84[_0x4c80e1(0xeb)](_0x3c4dba,_0x4570bb):0x0;if(_0x1b4c84['fGXAn'](_0x4570bb,0x0)&&_0x1b4c84[_0x4c80e1(0xef)](_0x4e99bd,0x0))_0xb9372c+='\x20('+chalk[_0x4c80e1(0xd0)][_0x4c80e1(0x10c)](_0x4570bb+'\x20failed')+',\x20'+chalk[_0x4c80e1(0xd0)]['green'](_0x4e99bd+_0x4c80e1(0xbf))+')';else(_0x1b4c84[_0x4c80e1(0x105)](_0x4570bb,0x0)||_0x1b4c84[_0x4c80e1(0xfd)](_0x4e99bd,0x0))&&(_0xb9372c+=_0x1b4c84[_0x4c80e1(0x105)](_0x4570bb,0x0)?'\x20('+chalk['bold'][_0x4c80e1(0x10c)](_0x4570bb+_0x4c80e1(0xe6))+')':'\x20('+chalk[_0x4c80e1(0xd0)][_0x4c80e1(0xbc)](_0x4e99bd+_0x4c80e1(0xbf))+')');const _0xf2cfc=_0x141878+'\x20steps',_0xd01ba5=[];_0x1b4c84[_0x4c80e1(0xfd)](_0x260abf,0x0)&&_0xd01ba5['push'](''+chalk['bold'][_0x4c80e1(0x10c)](_0x260abf+_0x4c80e1(0xed)));_0x1b4c84[_0x4c80e1(0x105)](_0x2b4a2c,0x0)&&_0xd01ba5[_0x4c80e1(0xf6)](''+chalk['bold']['red'](_0x2b4a2c+_0x4c80e1(0xe6)));_0x1b4c84[_0x4c80e1(0xb7)](_0x52a3de,0x0)&&_0xd01ba5[_0x4c80e1(0xf6)](''+chalk[_0x4c80e1(0xd0)][_0x4c80e1(0xbc)](_0x52a3de+_0x4c80e1(0xbf)));_0x1b4c84[_0x4c80e1(0xd9)](_0x567e8f,0x0)&&_0xd01ba5[_0x4c80e1(0xf6)](''+chalk['bold'][_0x4c80e1(0xc1)](_0x567e8f+_0x4c80e1(0xad)));_0x1b4c84[_0x4c80e1(0xef)](_0x3fdd66,0x0)&&_0xd01ba5['push'](''+chalk[_0x4c80e1(0xd0)][_0x4c80e1(0xe3)](_0x3fdd66+_0x4c80e1(0xde)));_0x1b4c84['UUVRX'](_0xfc4eaa,0x0)&&_0xd01ba5[_0x4c80e1(0xf6)](''+chalk[_0x4c80e1(0xd0)][_0x4c80e1(0xc1)](_0xfc4eaa+_0x4c80e1(0xbd)));_0x1b4c84[_0x4c80e1(0x105)](_0x2c60c4,0x0)&&_0xd01ba5[_0x4c80e1(0xf6)](''+chalk[_0x4c80e1(0xd0)][_0x4c80e1(0xc1)](_0x2c60c4+'\x20skipped'));const _0x47664d=_0x1b4c84[_0x4c80e1(0xc8)](_0x1b4c84[_0x4c80e1(0xf5)](_0x1b4c84[_0x4c80e1(0xcd)](_0xf2cfc,'('),_0xd01ba5[_0x4c80e1(0xb1)](',\x20')),')');console[_0x4c80e1(0xfa)](_0x1b4c84[_0x4c80e1(0xff)](_0x1b4c84[_0x4c80e1(0xe7)](_0x1b4c84[_0x4c80e1(0xff)](_0x1b4c84[_0x4c80e1(0xff)]('\x0a',_0xb9372c),'\x0a'),_0x47664d),'\x0a')),_0x1b4c84['qdOKP'](_0x232868,![])&&(_0x3efe63=0x1);}),_0x3efe63;}async function run(_0x3e8da5,_0x4bf3e4,_0x406d9e){const _0xa9ced6=a5_0x59e36f,_0x514856={'pUqTn':function(_0x2ef32c,_0x4d43b4){return _0x2ef32c(_0x4d43b4);},'OuKID':function(_0x2abde6,_0x22364c){return _0x2abde6>_0x22364c;},'YnGMu':_0xa9ced6(0xe9),'dhJmE':_0xa9ced6(0xf0),'lvThv':_0xa9ced6(0x100),'YQXDN':_0xa9ced6(0x115),'jBhHo':_0xa9ced6(0x9d),'QiazV':function(_0x506e3e,_0x215593){return _0x506e3e-_0x215593;},'DOxTF':function(_0x122b34,_0x56ad9b){return _0x122b34>=_0x56ad9b;},'vSDbO':function(_0x302438,_0x6d5594){return _0x302438!=_0x6d5594;},'NRXrA':_0xa9ced6(0xb8),'DNrMu':function(_0x3a6ada,_0x3cd156,_0x256583,_0x5c03e1,_0xaf24b3,_0x48d109){return _0x3a6ada(_0x3cd156,_0x256583,_0x5c03e1,_0xaf24b3,_0x48d109);}};await _0x406d9e[_0xa9ced6(0x114)](_0x3e8da5),helper[_0xa9ced6(0x10e)](_0x406d9e['framework'],_0x3e8da5);!helper[_0xa9ced6(0xd6)]()&&await _0x406d9e[_0xa9ced6(0xf4)]();await helper['handleApp'](_0x406d9e['config']);const _0x488f28=helper[_0xa9ced6(0x10d)](_0x406d9e[_0xa9ced6(0x109)]);!helper[_0xa9ced6(0xb3)](_0x406d9e[_0xa9ced6(0x109)]['accessibilityOptions'])&&(process[_0xa9ced6(0xc5)][_0xa9ced6(0x111)]=JSON['stringify'](_0x406d9e[_0xa9ced6(0x109)][_0xa9ced6(0xd4)]));const _0x121ee4=await TestHubHandler[_0xa9ced6(0xe4)](constants[_0xa9ced6(0x107)][_0xa9ced6(0xa3)],_0x406d9e);let _0xecfd0f=[];if(!helper['isBrowserstackInfra']()){const _0x11a3d7={};_0x11a3d7[_0xa9ced6(0x9b)]=[],_0xecfd0f=helper[_0xa9ced6(0xf1)](Object[_0xa9ced6(0xb6)]({},_0x406d9e[_0xa9ced6(0x109)],_0x11a3d7),_0x488f28,constants['FRAMEWORKS']['CUCUMBER']);}else _0xecfd0f=helper[_0xa9ced6(0xf1)](_0x406d9e[_0xa9ced6(0x109)],_0x488f28,constants['FRAMEWORKS'][_0xa9ced6(0xa3)]);if(!_0x406d9e[_0xa9ced6(0x109)])return;const _0x23ecd2=_0x406d9e[_0xa9ced6(0x109)][_0xa9ced6(0xb2)]||helper[_0xa9ced6(0x10b)](_0x3e8da5,_0x4bf3e4,_0x406d9e[_0xa9ced6(0x109)],constants[_0xa9ced6(0x107)][_0xa9ced6(0xa3)])||0x1,_0xca11b1={'server':helper['getHubUrl'](_0x406d9e[_0xa9ced6(0x109)]),'proxySettings':_0x406d9e[_0xa9ced6(0x109)][_0xa9ced6(0xf8)],'maxWorkers':_0x23ecd2,'browserStackLogLevel':_0x406d9e[_0xa9ced6(0x109)][_0xa9ced6(0xc7)],'skipSessionName':_0x406d9e[_0xa9ced6(0x109)][_0xa9ced6(0xbb)][_0xa9ced6(0xe5)],'skipSessionStatus':_0x406d9e[_0xa9ced6(0x109)][_0xa9ced6(0xbb)][_0xa9ced6(0xc6)],'turboScaleUrl':_0x406d9e['config'][_0xa9ced6(0x103)]},_0x427797=process['argv'],[_0x137538,_0x256d35]=helper[_0xa9ced6(0xc9)](_0x427797),_0x3d3c07=path[_0xa9ced6(0xb1)](process[_0xa9ced6(0xfe)](),_0x514856[_0xa9ced6(0xc2)]);if(_0x514856[_0xa9ced6(0xf2)](_0x256d35[_0xa9ced6(0x9c)],0x0)){helper[_0xa9ced6(0xa8)](_0x3d3c07);for(let _0xfcf318=_0x514856[_0xa9ced6(0xca)](_0x137538[_0xa9ced6(0x9c)],0x1);_0x514856[_0xa9ced6(0xac)](_0xfcf318,0x0);_0xfcf318--){_0x427797[_0xa9ced6(0xdc)](_0x137538[_0xfcf318],0x2);}}_0x514856['vSDbO'](_0x406d9e[_0xa9ced6(0x109)]['testObservability'],null)?process[_0xa9ced6(0xc5)]['BROWSERSTACK_TEST_OBSERVABILITY_YML']=_0x406d9e[_0xa9ced6(0x109)][_0xa9ced6(0xa2)]:process['env'][_0xa9ced6(0x104)]=_0x514856['NRXrA'];PerformanceTester['end'](PerformanceEvents[_0xa9ced6(0xd5)]);let _0x13715d;_0x514856[_0xa9ced6(0x9f)](parallelCucumberRun,_0xecfd0f,_0xca11b1,_0x406d9e[_0xa9ced6(0x109)],_0x427797,_0x256d35)[_0xa9ced6(0x10f)](async _0x3df70b=>{const _0x32cde1=_0xa9ced6;PerformanceTester[_0x32cde1(0x112)](PerformanceEvents[_0x32cde1(0xaa)]),_0x13715d=_0x3df70b;const _0x2d7b7f=_0x514856[_0x32cde1(0xf7)](printCucumberStats,_0x3df70b);process['exitCode']=_0x2d7b7f,_0x514856[_0x32cde1(0xf2)](_0x256d35[_0x32cde1(0x9c)],0x0)&&(logger[_0x32cde1(0xa7)](_0x514856[_0x32cde1(0xce)]),helper[_0x32cde1(0xcc)](_0x3d3c07,_0x256d35),logger[_0x32cde1(0xa7)](_0x514856[_0x32cde1(0x10a)]),helper[_0x32cde1(0xf3)](_0x3d3c07));})[_0xa9ced6(0xfc)](async()=>{const _0x363129=_0xa9ced6;PerformanceTester[_0x363129(0x112)](PerformanceEvents['SDK_CLEANUP']),_0x406d9e[_0x363129(0xc0)]=helper[_0x363129(0xc4)](_0x13715d,_0x514856['lvThv']),testOpsHelper['printBuildLink']();try{await TestHubHandler[_0x363129(0xcf)]();}catch(_0xa826fd){logger[_0x363129(0xa7)](_0x363129(0xb9)+util['format'](_0xa826fd));}try{const {browserstackFolderPath:_0x5b694e,tcgConfigPath:_0x1abf48}=helper[_0x363129(0xda)]();fs[_0x363129(0x9e)](_0x1abf48),fs[_0x363129(0xe1)](_0x5b694e);}catch(_0x54e584){logger['debug'](_0x514856['YQXDN'],_0x54e584);}await utilities[_0x363129(0xba)](_0x406d9e);});}module[a5_0x59e36f(0xf9)]=run;