#!/usr/bin/env node
'use strict';function a5_0x489c(_0x2cd012,_0x222be7){const _0x126189=a5_0x1261();return a5_0x489c=function(_0x489c6e,_0x49e3b5){_0x489c6e=_0x489c6e-0x143;let _0x5b8125=_0x126189[_0x489c6e];return _0x5b8125;},a5_0x489c(_0x2cd012,_0x222be7);}const a5_0x254683=a5_0x489c;function a5_0x1261(){const _0x4178aa=['QIEUX','3|4|2|1|0','../../helpers/testhub/testhubHandler','green','getHubUrl','rAdHV','5lBtHIe','turboScaleUrl','../../helpers/utilities','then','cyan','length','Generating\x20consolidated\x20report...','../v2/TestInfo','env','logLevel','lIQqL','\x20undefined','QjYAg','../../helpers/helper','true','6159228EPlmUy','red','removeDir','lQouV','stop','getInstance','eYVlx','\x20for\x20cucumber-js\x20flow','11193994jqujZz','SDK_CLEANUP','Yhitm','rmdirSync','argv','wmdrm','\x20skipped','../utils/constants','\x20pending','getTCGConfigFilePaths','exports','8vYujVx','MJIWT','****\x20RESULTS\x20****','1369644nzsJhb','stringify','SDK_SETUP','@playwright/test','debug','useW3C','cwd','XRmtQ','FRAMEWORKS','errorMessage','finalExecution','qGqoe','util','push','stepsFailed','prepareCapabilities','cucumber','stepsPending','format','createDir','lAsyz','winstonLogger','split','RHdSl','XcFpc','cliConfig','../v2/cliUtils','5026146RWxlvW','end','binSessionId','\x20scenarios','Removing\x20tmp\x20directory\x20created\x20for\x20reports','789yCOqUS','\x20failed','stepsPassed','printBuildLink','setFrameworkDetail','BROWSERSTACK_CLI_BIN_SESSION_ID','initialize','CuMeS','skipSessionStatus','37935414jdxRTE','CUCUMBER','scenariosFailed','handleApp','../../helpers/performance/constants','avIeT','\x20ambiguous','testContextOptions','790lhkDoZ','tmp','config','IoqPr','getPackageVersion','steps','vbMzv','yellow','Detected\x20Playwright\x20version\x20','pXGxy','stepsSkipped','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','\x20passed','mergeOutputFiles','ctNGh','PLAYWRIGHT','log','setBrowserstackConfig','parseFormatters','1280MZgRhg','../../helpers/logger','isBrowserstackInfra','launchBuild','chalk','start','QYjFD','BDAsS','135747purqBS','BROWSERSTACK_TEST_OBSERVABILITY_YML','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','XrOls','accessibilityOptions','bold','splice','mmGXg','../v2/browserstackCLI','join','testObservability','bootstrap','assign','../../helpers/performance/performance-tester','bgWhite','stepsAmbiguous'];a5_0x1261=function(){return _0x4178aa;};return a5_0x1261();}(function(_0x2cff76,_0x3ec636){const _0x467974=a5_0x489c,_0x414c73=_0x2cff76();while(!![]){try{const _0x35fb7c=-parseInt(_0x467974(0x161))/0x1+-parseInt(_0x467974(0x1a5))/0x2*(parseInt(_0x467974(0x181))/0x3)+-parseInt(_0x467974(0x14b))/0x4*(parseInt(_0x467974(0x1c3))/0x5)+parseInt(_0x467974(0x17c))/0x6+-parseInt(_0x467974(0x153))/0x7*(parseInt(_0x467974(0x15e))/0x8)+parseInt(_0x467974(0x1ad))/0x9*(parseInt(_0x467974(0x192))/0xa)+parseInt(_0x467974(0x18a))/0xb;if(_0x35fb7c===_0x3ec636)break;else _0x414c73['push'](_0x414c73['shift']());}catch(_0x48e8c3){_0x414c73['push'](_0x414c73['shift']());}}}(a5_0x1261,0xc38f1));const fs=require('fs'),path=require('path'),util=require(a5_0x254683(0x16d)),logger=require(a5_0x254683(0x1a6))[a5_0x254683(0x176)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a5_0x254683(0x149)),utilities=require(a5_0x254683(0x1c5)),constants=require(a5_0x254683(0x15a)),{parallelCucumberRun}=require('../test-runner'),TestHubHandler=require(a5_0x254683(0x1bf)),testOpsHelper=require('../../helpers/test-observability/utils'),chalk=require(a5_0x254683(0x1a9)),PerformanceTester=require(a5_0x254683(0x1ba)),PerformanceEvents=require(a5_0x254683(0x18e))['EVENTS'],BrowserstackCLI=require(a5_0x254683(0x1b5)),CLIUtils=require(a5_0x254683(0x17b)),TestInfo=require(a5_0x254683(0x143));function printCucumberStats(_0x436d87){const _0x3144a2=a5_0x254683,_0x41233e={};_0x41233e['QjYAg']=function(_0x51da06,_0x347310){return _0x51da06>_0x347310;},_0x41233e[_0x3144a2(0x198)]=function(_0x586e55,_0x482fcc){return _0x586e55-_0x482fcc;},_0x41233e[_0x3144a2(0x1c2)]=function(_0x136935,_0x5d53a1){return _0x136935>_0x5d53a1;},_0x41233e[_0x3144a2(0x1bd)]=function(_0x1d6c9e,_0x58f815){return _0x1d6c9e>_0x58f815;},_0x41233e[_0x3144a2(0x1a0)]=function(_0x55c06c,_0xc80ec4){return _0x55c06c>_0xc80ec4;},_0x41233e['pXGxy']=function(_0x34037f,_0x11a074){return _0x34037f>_0x11a074;},_0x41233e['BDAsS']=function(_0x370918,_0xadd215){return _0x370918>_0xadd215;},_0x41233e['avIeT']=function(_0x46bc9a,_0x593002){return _0x46bc9a+_0x593002;},_0x41233e['MJIWT']=function(_0x3ffb0f,_0x3640e4){return _0x3ffb0f+_0x3640e4;},_0x41233e[_0x3144a2(0x16c)]=function(_0x5cd5b2,_0x5c1f60){return _0x5cd5b2+_0x5c1f60;},_0x41233e[_0x3144a2(0x1b4)]=function(_0xe1610b,_0x176ac1){return _0xe1610b+_0x176ac1;},_0x41233e[_0x3144a2(0x168)]=function(_0x23f8c2,_0x4ba485){return _0x23f8c2===_0x4ba485;},_0x41233e['UNgWl']=function(_0x3bf0da,_0x1ce5a1){return _0x3bf0da===_0x1ce5a1;},_0x41233e[_0x3144a2(0x1b0)]=_0x3144a2(0x160);const _0x2ca3db=_0x41233e;let _0x43e09a=0x0;if(_0x2ca3db['UNgWl'](_0x436d87[_0x3144a2(0x1c8)],0x0))return _0x43e09a;return console[_0x3144a2(0x1a2)](chalk[_0x3144a2(0x1b2)][_0x3144a2(0x1bb)](_0x2ca3db[_0x3144a2(0x1b0)])),_0x436d87['forEach'](_0x52d9d9=>{const _0x1a8ba8=_0x3144a2,_0x4dafd2=_0x52d9d9[0x0],_0x16275c=_0x52d9d9[0x1];helper[_0x1a8ba8(0x1a7)]()&&console['log']('\x0a'+chalk[_0x1a8ba8(0x1b2)][_0x1a8ba8(0x199)](''+helper['getPlatformName'](_0x4dafd2)));const _0x434312=_0x16275c['scenarios'],_0x4b4c05=_0x16275c[_0x1a8ba8(0x197)],_0x1ebb1e=_0x16275c[_0x1a8ba8(0x18c)],_0x243013=_0x16275c[_0x1a8ba8(0x16f)],_0x1ee034=_0x16275c[_0x1a8ba8(0x183)],_0xc270d6=_0x16275c[_0x1a8ba8(0x19c)],_0x57cb77=_0x16275c[_0x1a8ba8(0x172)],_0x5bc324=_0x16275c['stepsUndefined'],_0x3365f3=_0x16275c['stepsUnknown'],_0x5e4b90=_0x16275c[_0x1a8ba8(0x1bc)],_0x2272e7=_0x16275c['processSuccess'];let _0x5117f5=_0x434312+_0x1a8ba8(0x17f);const _0x2e3569=_0x2ca3db[_0x1a8ba8(0x148)](_0x2ca3db[_0x1a8ba8(0x198)](_0x434312,_0x1ebb1e),0x0)?_0x2ca3db['vbMzv'](_0x434312,_0x1ebb1e):0x0;if(_0x2ca3db['QjYAg'](_0x1ebb1e,0x0)&&_0x2ca3db[_0x1a8ba8(0x148)](_0x2e3569,0x0))_0x5117f5+='\x20('+chalk['bold'][_0x1a8ba8(0x14c)](_0x1ebb1e+'\x20failed')+',\x20'+chalk[_0x1a8ba8(0x1b2)][_0x1a8ba8(0x1c0)](_0x2e3569+'\x20passed')+')';else(_0x2ca3db[_0x1a8ba8(0x1c2)](_0x1ebb1e,0x0)||_0x2ca3db['rAdHV'](_0x2e3569,0x0))&&(_0x5117f5+=_0x2ca3db[_0x1a8ba8(0x1bd)](_0x1ebb1e,0x0)?'\x20('+chalk[_0x1a8ba8(0x1b2)]['red'](_0x1ebb1e+_0x1a8ba8(0x182))+')':'\x20('+chalk[_0x1a8ba8(0x1b2)][_0x1a8ba8(0x1c0)](_0x2e3569+'\x20passed')+')');const _0x3ccc65=_0x4b4c05+'\x20steps',_0x181c20=[];_0x2ca3db[_0x1a8ba8(0x148)](_0x5e4b90,0x0)&&_0x181c20['push'](''+chalk[_0x1a8ba8(0x1b2)][_0x1a8ba8(0x14c)](_0x5e4b90+_0x1a8ba8(0x190)));_0x2ca3db['ctNGh'](_0x243013,0x0)&&_0x181c20[_0x1a8ba8(0x16e)](''+chalk['bold'][_0x1a8ba8(0x14c)](_0x243013+_0x1a8ba8(0x182)));_0x2ca3db[_0x1a8ba8(0x1a0)](_0x1ee034,0x0)&&_0x181c20['push'](''+chalk[_0x1a8ba8(0x1b2)]['green'](_0x1ee034+_0x1a8ba8(0x19e)));_0x2ca3db[_0x1a8ba8(0x1c2)](_0x57cb77,0x0)&&_0x181c20[_0x1a8ba8(0x16e)](''+chalk[_0x1a8ba8(0x1b2)]['yellow'](_0x57cb77+_0x1a8ba8(0x15b)));_0x2ca3db[_0x1a8ba8(0x19b)](_0xc270d6,0x0)&&_0x181c20[_0x1a8ba8(0x16e)](''+chalk[_0x1a8ba8(0x1b2)][_0x1a8ba8(0x1c7)](_0xc270d6+_0x1a8ba8(0x159)));_0x2ca3db[_0x1a8ba8(0x1ac)](_0x5bc324,0x0)&&_0x181c20['push'](''+chalk['bold'][_0x1a8ba8(0x199)](_0x5bc324+_0x1a8ba8(0x147)));_0x2ca3db[_0x1a8ba8(0x19b)](_0x3365f3,0x0)&&_0x181c20['push'](''+chalk[_0x1a8ba8(0x1b2)][_0x1a8ba8(0x199)](_0x3365f3+_0x1a8ba8(0x159)));const _0x5db82a=_0x2ca3db[_0x1a8ba8(0x18f)](_0x2ca3db[_0x1a8ba8(0x18f)](_0x2ca3db[_0x1a8ba8(0x15f)](_0x3ccc65,'('),_0x181c20[_0x1a8ba8(0x1b6)](',\x20')),')');console['log'](_0x2ca3db['qGqoe'](_0x2ca3db['mmGXg'](_0x2ca3db[_0x1a8ba8(0x1b4)](_0x2ca3db[_0x1a8ba8(0x16c)]('\x0a',_0x5117f5),'\x0a'),_0x5db82a),'\x0a')),_0x2ca3db['XRmtQ'](_0x2272e7,![])&&(_0x43e09a=0x1);}),_0x43e09a;}async function run(_0x3c4cd2,_0x214b20,_0x4cf5ca){const _0x1111b8=a5_0x254683,_0x37a7e4={'vNVQC':function(_0x6403f2,_0x19cd74){return _0x6403f2(_0x19cd74);},'XcFpc':function(_0x5129cc,_0x219e80){return _0x5129cc>_0x219e80;},'RHdSl':_0x1111b8(0x1c9),'GEqgN':_0x1111b8(0x180),'lAsyz':_0x1111b8(0x171),'wmdrm':'error\x20removing\x20tcg\x20config\x20file','CPwWE':_0x1111b8(0x164),'IoqPr':_0x1111b8(0x1be),'Yhitm':_0x1111b8(0x193),'QYjFD':function(_0x58e848,_0x4c8c94){return _0x58e848>_0x4c8c94;},'lIQqL':function(_0x484c9e,_0x5dd712){return _0x484c9e-_0x5dd712;},'vrlei':function(_0x9cdc0a,_0x20e8e8){return _0x9cdc0a>=_0x20e8e8;},'lQouV':function(_0x1356ab,_0x323ad6){return _0x1356ab!=_0x323ad6;},'eYVlx':_0x1111b8(0x14a),'CuMeS':function(_0x1934e9,_0x261238,_0x4ceb77,_0x5b2d1f,_0x49ce0e,_0x592396){return _0x1934e9(_0x261238,_0x4ceb77,_0x5b2d1f,_0x49ce0e,_0x592396);}},_0x2d7b32=helper[_0x1111b8(0x196)](_0x37a7e4['CPwWE']);let _0xc42b7=constants[_0x1111b8(0x169)][_0x1111b8(0x18b)];global['__isPlaywrightInstalled']=!!_0x2d7b32,await _0x4cf5ca[_0x1111b8(0x187)](_0x3c4cd2);if(_0x2d7b32){const _0x3f0241=_0x37a7e4[_0x1111b8(0x195)][_0x1111b8(0x177)]('|');let _0x21fead=0x0;while(!![]){switch(_0x3f0241[_0x21fead++]){case'0':await BrowserstackCLI[_0x1111b8(0x150)]()[_0x1111b8(0x1b8)]();continue;case'1':BrowserstackCLI[_0x1111b8(0x150)]()[_0x1111b8(0x1a3)](_0x4cf5ca[_0x1111b8(0x194)],_0x4cf5ca[_0x1111b8(0x17a)]);continue;case'2':CLIUtils[_0x1111b8(0x185)](constants[_0x1111b8(0x169)][_0x1111b8(0x18b)],_0xc42b7);continue;case'3':_0xc42b7=constants[_0x1111b8(0x169)][_0x1111b8(0x1a1)];continue;case'4':logger[_0x1111b8(0x165)](_0x1111b8(0x19a)+_0x2d7b32+_0x1111b8(0x152));continue;}break;}}BrowserstackCLI[_0x1111b8(0x150)]()['binSessionId']&&(process[_0x1111b8(0x144)][_0x1111b8(0x186)]=BrowserstackCLI['getInstance']()[_0x1111b8(0x17e)]);helper['setUserConfigPath'](_0x4cf5ca['framework'],_0x3c4cd2);!helper['isBrowserstackInfra']()&&await _0x4cf5ca['setupTCGAuth']();await helper[_0x1111b8(0x18d)](_0x4cf5ca[_0x1111b8(0x194)]);const _0x2499a7=helper[_0x1111b8(0x166)](_0x4cf5ca[_0x1111b8(0x194)]);!helper['isUndefined'](_0x4cf5ca[_0x1111b8(0x194)][_0x1111b8(0x1b1)])&&(process[_0x1111b8(0x144)][_0x1111b8(0x1af)]=JSON[_0x1111b8(0x162)](_0x4cf5ca[_0x1111b8(0x194)][_0x1111b8(0x1b1)]));if(!BrowserstackCLI[_0x1111b8(0x150)]()['isRunning']()){const _0x59ebc3=await TestHubHandler[_0x1111b8(0x1a8)](constants[_0x1111b8(0x169)][_0x1111b8(0x18b)],_0x4cf5ca);}let _0x5b9672=[];if(!helper[_0x1111b8(0x1a7)]()){const _0x26d075={};_0x26d075['platforms']=[],_0x5b9672=helper[_0x1111b8(0x170)](Object[_0x1111b8(0x1b9)]({},_0x4cf5ca['config'],_0x26d075),_0x2499a7,constants[_0x1111b8(0x169)][_0x1111b8(0x18b)]);}else _0x5b9672=helper['prepareCapabilities'](_0x4cf5ca['config'],_0x2499a7,constants[_0x1111b8(0x169)][_0x1111b8(0x18b)]);if(!_0x4cf5ca[_0x1111b8(0x194)])return;const _0x5d9a26=_0x4cf5ca[_0x1111b8(0x194)]['parallelsPerPlatform']||helper['getUserWorkerCount'](_0x3c4cd2,_0x214b20,_0x4cf5ca['config'],constants[_0x1111b8(0x169)]['CUCUMBER'])||0x1,_0x15006f={'server':helper[_0x1111b8(0x1c1)](_0x4cf5ca['config']),'proxySettings':_0x4cf5ca[_0x1111b8(0x194)]['proxySettings'],'maxWorkers':_0x5d9a26,'browserStackLogLevel':_0x4cf5ca[_0x1111b8(0x194)][_0x1111b8(0x145)],'skipSessionName':_0x4cf5ca[_0x1111b8(0x194)][_0x1111b8(0x191)]['skipSessionName'],'skipSessionStatus':_0x4cf5ca[_0x1111b8(0x194)][_0x1111b8(0x191)][_0x1111b8(0x189)],'turboScaleUrl':_0x4cf5ca['config'][_0x1111b8(0x1c4)]},_0x4e5943=process[_0x1111b8(0x157)],[_0x1a67cb,_0x14b330]=helper[_0x1111b8(0x1a4)](_0x4e5943),_0x241a48=path[_0x1111b8(0x1b6)](process[_0x1111b8(0x167)](),_0x37a7e4[_0x1111b8(0x155)]);if(_0x37a7e4[_0x1111b8(0x1ab)](_0x14b330[_0x1111b8(0x1c8)],0x0)){helper[_0x1111b8(0x174)](_0x241a48);for(let _0x3c2185=_0x37a7e4[_0x1111b8(0x146)](_0x1a67cb[_0x1111b8(0x1c8)],0x1);_0x37a7e4['vrlei'](_0x3c2185,0x0);_0x3c2185--){_0x4e5943[_0x1111b8(0x1b3)](_0x1a67cb[_0x3c2185],0x2);}}_0x37a7e4[_0x1111b8(0x14e)](_0x4cf5ca[_0x1111b8(0x194)][_0x1111b8(0x1b7)],null)?process[_0x1111b8(0x144)][_0x1111b8(0x1ae)]=_0x4cf5ca[_0x1111b8(0x194)]['testObservability']:process[_0x1111b8(0x144)]['BROWSERSTACK_TEST_OBSERVABILITY_YML']=_0x37a7e4[_0x1111b8(0x151)];PerformanceTester[_0x1111b8(0x17d)](PerformanceEvents[_0x1111b8(0x163)]);let _0x3d5560;_0x37a7e4[_0x1111b8(0x188)](parallelCucumberRun,_0x5b9672,_0x15006f,_0x4cf5ca['config'],_0x4e5943,_0x14b330)[_0x1111b8(0x1c6)](async _0x64267e=>{const _0x2bb53a=_0x1111b8;PerformanceTester[_0x2bb53a(0x1aa)](PerformanceEvents[_0x2bb53a(0x154)]),_0x3d5560=_0x64267e;const _0x2d56dc=_0x37a7e4['vNVQC'](printCucumberStats,_0x64267e);process['exitCode']=_0x2d56dc,_0x37a7e4[_0x2bb53a(0x179)](_0x14b330[_0x2bb53a(0x1c8)],0x0)&&(logger[_0x2bb53a(0x165)](_0x37a7e4[_0x2bb53a(0x178)]),helper[_0x2bb53a(0x19f)](_0x241a48,_0x14b330),logger[_0x2bb53a(0x165)](_0x37a7e4['GEqgN']),helper[_0x2bb53a(0x14d)](_0x241a48));})['finally'](async()=>{const _0x29317f=_0x1111b8;PerformanceTester['start'](PerformanceEvents[_0x29317f(0x154)]),_0x4cf5ca[_0x29317f(0x16a)]=helper['getErrorMessageFromResults'](_0x3d5560,_0x37a7e4[_0x29317f(0x175)]),testOpsHelper[_0x29317f(0x184)]();try{await TestHubHandler[_0x29317f(0x14f)](),await BrowserstackCLI['getInstance']()[_0x29317f(0x14f)]();}catch(_0x320aab){logger[_0x29317f(0x165)](_0x29317f(0x19d)+util[_0x29317f(0x173)](_0x320aab));}try{const {browserstackFolderPath:_0x39eb33,tcgConfigPath:_0x33497e}=helper[_0x29317f(0x15c)]();fs['unlinkSync'](_0x33497e),fs[_0x29317f(0x156)](_0x39eb33);}catch(_0x48cb88){logger[_0x29317f(0x165)](_0x37a7e4[_0x29317f(0x158)],_0x48cb88);}await utilities[_0x29317f(0x16b)](_0x4cf5ca);});}module[a5_0x254683(0x15d)]=run;