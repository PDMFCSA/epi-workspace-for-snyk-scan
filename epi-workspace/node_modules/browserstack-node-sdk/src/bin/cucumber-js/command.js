#!/usr/bin/env node
'use strict';const a5_0x2ad0d1=a5_0x1f75;function a5_0x1f75(_0x355546,_0x3d343e){const _0x2a4c3c=a5_0x2a4c();return a5_0x1f75=function(_0x1f758c,_0x10e0b9){_0x1f758c=_0x1f758c-0x8b;let _0x2aab29=_0x2a4c3c[_0x1f758c];return _0x2aab29;},a5_0x1f75(_0x355546,_0x3d343e);}(function(_0x50820c,_0x88f321){const _0x348b48=a5_0x1f75,_0x47f857=_0x50820c();while(!![]){try{const _0x5e7e58=-parseInt(_0x348b48(0xf0))/0x1*(-parseInt(_0x348b48(0xe5))/0x2)+parseInt(_0x348b48(0xf4))/0x3+parseInt(_0x348b48(0xc1))/0x4*(parseInt(_0x348b48(0x9e))/0x5)+parseInt(_0x348b48(0xc8))/0x6+parseInt(_0x348b48(0xd5))/0x7+-parseInt(_0x348b48(0xb6))/0x8*(-parseInt(_0x348b48(0xd9))/0x9)+parseInt(_0x348b48(0x99))/0xa*(-parseInt(_0x348b48(0x93))/0xb);if(_0x5e7e58===_0x88f321)break;else _0x47f857['push'](_0x47f857['shift']());}catch(_0x466f06){_0x47f857['push'](_0x47f857['shift']());}}}(a5_0x2a4c,0xe641e));function a5_0x2a4c(){const _0x58c03a=['tmp','unlinkSync','finalExecution','../../helpers/logger','GuzCe','setupTCGAuth','40wGKCxE','splice','****\x20RESULTS\x20****','scenariosFailed','stepsPending','testContextOptions','bold','useW3C','isUndefined','nDBNO','elsgY','4FtPVQu','forEach','prepareCapabilities','error\x20removing\x20tcg\x20config\x20file','\x20undefined','finally','yellow','10416654nMsvqy','getErrorMessageFromResults','\x20skipped','start','env','Removing\x20tmp\x20directory\x20created\x20for\x20reports','../../helpers/helper','OTySL','length','\x20failed','skipSessionStatus','framework','launchBuild','6218394MDfUOa','SDK_CLEANUP','turboScaleUrl','util','2802879sEGRLM','setUserConfigPath','scenarios','gGZZh','CUCUMBER','../../helpers/BrowserStackSetup','../../helpers/testhub/testhubHandler','clYQm','exports','green','CmdAT','push','2RfxHki','stepsUndefined','Generating\x20consolidated\x20report...','logLevel','accessibilityOptions','log','format','true','skipSessionName','join','\x20passed','720319aejRWW','getTCGConfigFilePaths','zptxg','rFsEh','3867705LUHuDm','getUserWorkerCount','mergeOutputFiles','removeDir','../utils/constants','UhUMh','dLguR','createDir','FRAMEWORKS','FFqtk','cWWLB','stepsFailed','cwd','stop','cucumber','getPlatformName','../../helpers/performance/performance-tester','EVENTS','end','PJDNm','path','config','\x20steps','121vzQvJA','bgWhite','TLxPe','parallelsPerPlatform','../../helpers/utilities','vpdfv','5036690NjDVbW','printBuildLink','argv','BROWSERSTACK_TEST_OBSERVABILITY_YML','getHubUrl','1461665ZTdvaE','exitCode','red','proxySettings','YFwQx','wmXcW','SDK_SETUP','testObservability','winstonLogger','sITkU','hGCXK','eAVLq','BPrzd','cucumber-js','pFUMb','kDnvy','stringify','rmdirSync'];a5_0x2a4c=function(){return _0x58c03a;};return a5_0x2a4c();}const fs=require('fs'),path=require(a5_0x2ad0d1(0x90)),util=require(a5_0x2ad0d1(0xd8)),logger=require(a5_0x2ad0d1(0xb3))[a5_0x2ad0d1(0xa6)],{default:BrowserStackSetup}=require(a5_0x2ad0d1(0xde)),helper=require(a5_0x2ad0d1(0xce)),utilities=require(a5_0x2ad0d1(0x97)),constants=require(a5_0x2ad0d1(0xf8)),{parallelCucumberRun}=require('../test-runner'),TestHubHandler=require(a5_0x2ad0d1(0xdf)),testOpsHelper=require('../../helpers/test-observability/utils'),chalk=require('chalk'),PerformanceTester=require(a5_0x2ad0d1(0x8c)),PerformanceEvents=require('../../helpers/performance/constants')[a5_0x2ad0d1(0x8d)];function printCucumberStats(_0x494de6){const _0x52a21a=a5_0x2ad0d1,_0x3c620d={};_0x3c620d[_0x52a21a(0xa2)]=function(_0x14011e,_0x183784){return _0x14011e>_0x183784;},_0x3c620d[_0x52a21a(0xe3)]=function(_0x26597f,_0x31d301){return _0x26597f-_0x31d301;},_0x3c620d[_0x52a21a(0xa7)]=function(_0x50777b,_0x51c188){return _0x50777b-_0x51c188;},_0x3c620d[_0x52a21a(0xaa)]=function(_0x39ac0a,_0x1f2998){return _0x39ac0a>_0x1f2998;},_0x3c620d[_0x52a21a(0xc0)]=function(_0x6b6cd4,_0x2fefcc){return _0x6b6cd4>_0x2fefcc;},_0x3c620d[_0x52a21a(0x8f)]=function(_0x441e13,_0x5b3ad7){return _0x441e13>_0x5b3ad7;},_0x3c620d[_0x52a21a(0xa8)]=function(_0x17f35c,_0x48fb70){return _0x17f35c>_0x48fb70;},_0x3c620d[_0x52a21a(0xe0)]=function(_0x2b414d,_0x5bd965){return _0x2b414d>_0x5bd965;},_0x3c620d[_0x52a21a(0xa9)]=function(_0x3dce98,_0x203cd3){return _0x3dce98>_0x203cd3;},_0x3c620d[_0x52a21a(0xf3)]=function(_0x2015ed,_0x3eeab7){return _0x2015ed+_0x3eeab7;},_0x3c620d[_0x52a21a(0xf2)]=function(_0x3fe489,_0x8532a2){return _0x3fe489+_0x8532a2;},_0x3c620d[_0x52a21a(0xfa)]=function(_0x10aca6,_0x11c65){return _0x10aca6===_0x11c65;},_0x3c620d[_0x52a21a(0xbf)]=_0x52a21a(0xb8);const _0x3fbc73=_0x3c620d;let _0xa81f47=0x0;if(_0x3fbc73[_0x52a21a(0xfa)](_0x494de6[_0x52a21a(0xd0)],0x0))return _0xa81f47;return console[_0x52a21a(0xea)](chalk[_0x52a21a(0xbc)][_0x52a21a(0x94)](_0x3fbc73['nDBNO'])),_0x494de6[_0x52a21a(0xc2)](_0x3c74cf=>{const _0x3b2510=_0x52a21a,_0x2f118a=_0x3c74cf[0x0],_0x473785=_0x3c74cf[0x1];console[_0x3b2510(0xea)]('\x0a'+chalk[_0x3b2510(0xbc)]['yellow'](''+helper[_0x3b2510(0x8b)](_0x2f118a)));const _0xbf2aec=_0x473785[_0x3b2510(0xdb)],_0x16ce9a=_0x473785['steps'],_0x43ab54=_0x473785[_0x3b2510(0xb9)],_0x4da9b8=_0x473785[_0x3b2510(0xff)],_0x1115a3=_0x473785['stepsPassed'],_0xb2189f=_0x473785['stepsSkipped'],_0x22024d=_0x473785[_0x3b2510(0xba)],_0x9316e9=_0x473785[_0x3b2510(0xe6)],_0x23ad67=_0x473785['stepsUnknown'],_0x315b1a=_0x473785['stepsAmbiguous'],_0x3bb491=_0x473785['processSuccess'];let _0x5477a9=_0xbf2aec+'\x20scenarios';const _0x5a3a3b=_0x3fbc73[_0x3b2510(0xa2)](_0x3fbc73[_0x3b2510(0xe3)](_0xbf2aec,_0x43ab54),0x0)?_0x3fbc73[_0x3b2510(0xa7)](_0xbf2aec,_0x43ab54):0x0;if(_0x3fbc73[_0x3b2510(0xaa)](_0x43ab54,0x0)&&_0x3fbc73[_0x3b2510(0xc0)](_0x5a3a3b,0x0))_0x5477a9+='\x20('+chalk['bold'][_0x3b2510(0xa0)](_0x43ab54+_0x3b2510(0xd1))+',\x20'+chalk[_0x3b2510(0xbc)][_0x3b2510(0xe2)](_0x5a3a3b+'\x20passed')+')';else(_0x3fbc73[_0x3b2510(0xa2)](_0x43ab54,0x0)||_0x3fbc73[_0x3b2510(0x8f)](_0x5a3a3b,0x0))&&(_0x5477a9+=_0x3fbc73[_0x3b2510(0xa2)](_0x43ab54,0x0)?'\x20('+chalk[_0x3b2510(0xbc)][_0x3b2510(0xa0)](_0x43ab54+_0x3b2510(0xd1))+')':'\x20('+chalk[_0x3b2510(0xbc)]['green'](_0x5a3a3b+_0x3b2510(0xef))+')');const _0x2763d3=_0x16ce9a+_0x3b2510(0x92),_0x2fd9f1=[];_0x3fbc73[_0x3b2510(0xa8)](_0x315b1a,0x0)&&_0x2fd9f1[_0x3b2510(0xe4)](''+chalk[_0x3b2510(0xbc)][_0x3b2510(0xa0)](_0x315b1a+'\x20ambiguous'));_0x3fbc73[_0x3b2510(0xc0)](_0x4da9b8,0x0)&&_0x2fd9f1[_0x3b2510(0xe4)](''+chalk[_0x3b2510(0xbc)]['red'](_0x4da9b8+'\x20failed'));_0x3fbc73[_0x3b2510(0xa2)](_0x1115a3,0x0)&&_0x2fd9f1['push'](''+chalk[_0x3b2510(0xbc)][_0x3b2510(0xe2)](_0x1115a3+_0x3b2510(0xef)));_0x3fbc73[_0x3b2510(0xe0)](_0x22024d,0x0)&&_0x2fd9f1[_0x3b2510(0xe4)](''+chalk[_0x3b2510(0xbc)][_0x3b2510(0xc7)](_0x22024d+'\x20pending'));_0x3fbc73[_0x3b2510(0xa9)](_0xb2189f,0x0)&&_0x2fd9f1[_0x3b2510(0xe4)](''+chalk[_0x3b2510(0xbc)]['cyan'](_0xb2189f+_0x3b2510(0xca)));_0x3fbc73[_0x3b2510(0xc0)](_0x9316e9,0x0)&&_0x2fd9f1[_0x3b2510(0xe4)](''+chalk[_0x3b2510(0xbc)][_0x3b2510(0xc7)](_0x9316e9+_0x3b2510(0xc5)));_0x3fbc73[_0x3b2510(0xa8)](_0x23ad67,0x0)&&_0x2fd9f1['push'](''+chalk[_0x3b2510(0xbc)]['yellow'](_0x23ad67+_0x3b2510(0xca)));const _0x247d6e=_0x3fbc73[_0x3b2510(0xf3)](_0x3fbc73[_0x3b2510(0xf3)](_0x3fbc73[_0x3b2510(0xf2)](_0x2763d3,'('),_0x2fd9f1[_0x3b2510(0xee)](',\x20')),')');console[_0x3b2510(0xea)](_0x3fbc73['zptxg'](_0x3fbc73[_0x3b2510(0xf2)](_0x3fbc73[_0x3b2510(0xf3)](_0x3fbc73[_0x3b2510(0xf2)]('\x0a',_0x5477a9),'\x0a'),_0x247d6e),'\x0a')),_0x3fbc73[_0x3b2510(0xfa)](_0x3bb491,![])&&(_0xa81f47=0x1);}),_0xa81f47;}async function run(_0x274def,_0x4989ed){const _0x464c14=a5_0x2ad0d1,_0xbee0f0={'kRLPO':function(_0x157571,_0x3367d9){return _0x157571(_0x3367d9);},'gGZZh':function(_0x3b2621,_0x368e12){return _0x3b2621>_0x368e12;},'kDnvy':_0x464c14(0xe7),'OTySL':_0x464c14(0xcd),'UhUMh':_0x464c14(0x102),'pFUMb':_0x464c14(0xc4),'TLxPe':_0x464c14(0xab),'vpdfv':_0x464c14(0xb0),'ZFmqQ':function(_0xdc28b6,_0x2e059a){return _0xdc28b6-_0x2e059a;},'cWWLB':function(_0x46b21d,_0x14c88b){return _0x46b21d>=_0x14c88b;},'wmXcW':function(_0x19ba74,_0x1790e7){return _0x19ba74!=_0x1790e7;},'GuzCe':_0x464c14(0xec),'FFqtk':function(_0x4945bd,_0x16c4c1,_0x54e28d,_0x36bb5e,_0x55ecb0,_0x495a44){return _0x4945bd(_0x16c4c1,_0x54e28d,_0x36bb5e,_0x55ecb0,_0x495a44);}},_0x48ff51=new BrowserStackSetup(_0x274def,_0xbee0f0[_0x464c14(0x95)]);await _0x48ff51['initialize'](),helper[_0x464c14(0xda)](_0x48ff51[_0x464c14(0xd3)],_0x274def);!helper['isBrowserstackInfra']()&&await _0x48ff51[_0x464c14(0xb5)]();await helper['handleApp'](_0x48ff51['config']);const _0x588993=helper[_0x464c14(0xbd)](_0x48ff51['config']),_0x3c7fec=helper[_0x464c14(0xc3)](_0x48ff51[_0x464c14(0x91)],_0x588993,constants[_0x464c14(0xfc)][_0x464c14(0xdd)]);if(!_0x48ff51['config'])return;const _0x2061b8=_0x48ff51[_0x464c14(0x91)][_0x464c14(0x96)]||helper[_0x464c14(0xf5)](_0x274def,_0x4989ed,_0x48ff51[_0x464c14(0x91)],constants[_0x464c14(0xfc)][_0x464c14(0xdd)])||0x1,_0xa5d52e={'server':helper[_0x464c14(0x9d)](_0x48ff51['config']),'proxySettings':_0x48ff51[_0x464c14(0x91)][_0x464c14(0xa1)],'maxWorkers':_0x2061b8,'browserStackLogLevel':_0x48ff51[_0x464c14(0x91)][_0x464c14(0xe8)],'skipSessionName':_0x48ff51['config'][_0x464c14(0xbb)][_0x464c14(0xed)],'skipSessionStatus':_0x48ff51[_0x464c14(0x91)]['testContextOptions'][_0x464c14(0xd2)],'turboScaleUrl':_0x48ff51[_0x464c14(0x91)][_0x464c14(0xd7)]},_0x183a42=process[_0x464c14(0x9b)],[_0x111d06,_0x31f40c]=helper['parseFormatters'](_0x183a42),_0x22d984=path[_0x464c14(0xee)](process[_0x464c14(0x100)](),_0xbee0f0[_0x464c14(0x98)]);if(_0xbee0f0['gGZZh'](_0x31f40c[_0x464c14(0xd0)],0x0)){helper[_0x464c14(0xfb)](_0x22d984);for(let _0x5d6ead=_0xbee0f0['ZFmqQ'](_0x111d06['length'],0x1);_0xbee0f0[_0x464c14(0xfe)](_0x5d6ead,0x0);_0x5d6ead--){_0x183a42[_0x464c14(0xb7)](_0x111d06[_0x5d6ead],0x2);}}!helper[_0x464c14(0xbe)](_0x48ff51['config'][_0x464c14(0xe9)])&&(process[_0x464c14(0xcc)]['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON[_0x464c14(0xae)](_0x48ff51[_0x464c14(0x91)][_0x464c14(0xe9)]));_0xbee0f0[_0x464c14(0xa3)](_0x48ff51[_0x464c14(0x91)]['testObservability'],null)?process['env'][_0x464c14(0x9c)]=_0x48ff51[_0x464c14(0x91)][_0x464c14(0xa5)]:process[_0x464c14(0xcc)][_0x464c14(0x9c)]=_0xbee0f0[_0x464c14(0xb4)];const _0x4abd1a=await TestHubHandler[_0x464c14(0xd4)](constants[_0x464c14(0xfc)][_0x464c14(0xdd)],_0x48ff51);PerformanceTester[_0x464c14(0x8e)](PerformanceEvents[_0x464c14(0xa4)]);let _0x446154;_0xbee0f0[_0x464c14(0xfd)](parallelCucumberRun,_0x3c7fec,_0xa5d52e,_0x48ff51[_0x464c14(0x91)],_0x183a42,_0x31f40c)['then'](async _0xab9fd5=>{const _0x3c368d=_0x464c14;PerformanceTester[_0x3c368d(0xcb)](PerformanceEvents[_0x3c368d(0xd6)]),_0x446154=_0xab9fd5;const _0x452345=_0xbee0f0['kRLPO'](printCucumberStats,_0xab9fd5);process[_0x3c368d(0x9f)]=_0x452345,_0xbee0f0[_0x3c368d(0xdc)](_0x31f40c[_0x3c368d(0xd0)],0x0)&&(logger['debug'](_0xbee0f0[_0x3c368d(0xad)]),helper[_0x3c368d(0xf6)](_0x22d984,_0x31f40c),logger['debug'](_0xbee0f0[_0x3c368d(0xcf)]),helper[_0x3c368d(0xf7)](_0x22d984));})[_0x464c14(0xc6)](async()=>{const _0x5c02b5=_0x464c14;PerformanceTester['start'](PerformanceEvents[_0x5c02b5(0xd6)]),_0x48ff51['errorMessage']=helper[_0x5c02b5(0xc9)](_0x446154,_0xbee0f0[_0x5c02b5(0xf9)]),testOpsHelper[_0x5c02b5(0x9a)]();try{await TestHubHandler[_0x5c02b5(0x101)]();}catch(_0x24b260){logger['debug']('Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20'+util[_0x5c02b5(0xeb)](_0x24b260));}try{const {browserstackFolderPath:_0x2c6453,tcgConfigPath:_0x4d1fbd}=helper[_0x5c02b5(0xf1)]();fs[_0x5c02b5(0xb1)](_0x4d1fbd),fs[_0x5c02b5(0xaf)](_0x2c6453);}catch(_0x76a98f){logger['debug'](_0xbee0f0[_0x5c02b5(0xac)],_0x76a98f);}await utilities[_0x5c02b5(0xb2)](_0x48ff51);});}module[a5_0x2ad0d1(0xe1)]=run;