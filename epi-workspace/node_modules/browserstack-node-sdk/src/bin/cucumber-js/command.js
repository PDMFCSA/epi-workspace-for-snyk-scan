#!/usr/bin/env node
'use strict';const a5_0x3f2e86=a5_0x3dff;(function(_0x40d9f9,_0x1a3bbb){const _0x18d675=a5_0x3dff,_0x3ab821=_0x40d9f9();while(!![]){try{const _0x1cde72=parseInt(_0x18d675(0x1a7))/0x1*(parseInt(_0x18d675(0x1ae))/0x2)+parseInt(_0x18d675(0x17f))/0x3+parseInt(_0x18d675(0x1b6))/0x4+parseInt(_0x18d675(0x19e))/0x5+-parseInt(_0x18d675(0x1b0))/0x6*(-parseInt(_0x18d675(0x162))/0x7)+parseInt(_0x18d675(0x155))/0x8+-parseInt(_0x18d675(0x179))/0x9;if(_0x1cde72===_0x1a3bbb)break;else _0x3ab821['push'](_0x3ab821['shift']());}catch(_0x20fa85){_0x3ab821['push'](_0x3ab821['shift']());}}}(a5_0x31bb,0x6c0ad));function a5_0x3dff(_0x127e35,_0x292e14){const _0x31bb6e=a5_0x31bb();return a5_0x3dff=function(_0x3dffa8,_0x49dfa0){_0x3dffa8=_0x3dffa8-0x140;let _0x2e54cb=_0x31bb6e[_0x3dffa8];return _0x2e54cb;},a5_0x3dff(_0x127e35,_0x292e14);}const fs=require('fs'),path=require(a5_0x3f2e86(0x1b1)),util=require(a5_0x3f2e86(0x15b)),logger=require(a5_0x3f2e86(0x15f))[a5_0x3f2e86(0x1a4)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a5_0x3f2e86(0x164)),utilities=require(a5_0x3f2e86(0x19f)),constants=require(a5_0x3f2e86(0x1af)),{parallelCucumberRun}=require(a5_0x3f2e86(0x140)),TestHubHandler=require(a5_0x3f2e86(0x173)),testOpsHelper=require(a5_0x3f2e86(0x16f)),chalk=require(a5_0x3f2e86(0x16d)),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require(a5_0x3f2e86(0x195))[a5_0x3f2e86(0x1a2)];function printCucumberStats(_0x426007){const _0x27c0b7=a5_0x3f2e86,_0x5751fe={};_0x5751fe[_0x27c0b7(0x169)]=function(_0xbca603,_0x3d7a14){return _0xbca603>_0x3d7a14;},_0x5751fe['NZgmG']=function(_0x427e1c,_0x28ba50){return _0x427e1c-_0x28ba50;},_0x5751fe['fQFnw']=function(_0x250a25,_0xd9703b){return _0x250a25>_0xd9703b;},_0x5751fe['zhjeE']=function(_0x669334,_0xe8a935){return _0x669334>_0xe8a935;},_0x5751fe[_0x27c0b7(0x1aa)]=function(_0x51972b,_0x43e04){return _0x51972b>_0x43e04;},_0x5751fe[_0x27c0b7(0x17e)]=function(_0x209691,_0x2d9d2e){return _0x209691>_0x2d9d2e;},_0x5751fe[_0x27c0b7(0x148)]=function(_0x4cb77b,_0x4b8fac){return _0x4cb77b>_0x4b8fac;},_0x5751fe[_0x27c0b7(0x18f)]=function(_0x365d17,_0x3b71d6){return _0x365d17>_0x3b71d6;},_0x5751fe[_0x27c0b7(0x157)]=function(_0x3800d3,_0x280502){return _0x3800d3+_0x280502;},_0x5751fe['qNVDP']=function(_0x5dd31c,_0x3d9b88){return _0x5dd31c+_0x3d9b88;},_0x5751fe[_0x27c0b7(0x154)]=function(_0xdb7240,_0x3428b5){return _0xdb7240+_0x3428b5;},_0x5751fe[_0x27c0b7(0x174)]=function(_0x986c09,_0x33c82d){return _0x986c09+_0x33c82d;},_0x5751fe[_0x27c0b7(0x190)]=function(_0x166aad,_0x5dcd75){return _0x166aad===_0x5dcd75;},_0x5751fe[_0x27c0b7(0x141)]=function(_0x2e8346,_0x170059){return _0x2e8346===_0x170059;},_0x5751fe[_0x27c0b7(0x166)]=_0x27c0b7(0x142);const _0x518312=_0x5751fe;let _0x2043a9=0x0;if(_0x518312[_0x27c0b7(0x141)](_0x426007[_0x27c0b7(0x17b)],0x0))return _0x2043a9;return console['log'](chalk[_0x27c0b7(0x17c)][_0x27c0b7(0x1a9)](_0x518312[_0x27c0b7(0x166)])),_0x426007[_0x27c0b7(0x16e)](_0x600199=>{const _0x392247=_0x27c0b7,_0x145aac=_0x600199[0x0],_0x25df0b=_0x600199[0x1];console[_0x392247(0x18a)]('\x0a'+chalk[_0x392247(0x17c)]['yellow'](''+helper[_0x392247(0x158)](_0x145aac)));const _0x43e207=_0x25df0b[_0x392247(0x19d)],_0x110dde=_0x25df0b[_0x392247(0x152)],_0xc932c6=_0x25df0b['scenariosFailed'],_0xaf010=_0x25df0b[_0x392247(0x161)],_0x453572=_0x25df0b[_0x392247(0x198)],_0x29467e=_0x25df0b[_0x392247(0x176)],_0x48cf5c=_0x25df0b[_0x392247(0x189)],_0x202cb7=_0x25df0b[_0x392247(0x18e)],_0x4fdb7f=_0x25df0b['stepsUnknown'],_0x3a0ce7=_0x25df0b['stepsAmbiguous'],_0x3adcbc=_0x25df0b[_0x392247(0x18b)];let _0x65aef=_0x43e207+_0x392247(0x17a);const _0x992fab=_0x518312[_0x392247(0x169)](_0x518312['NZgmG'](_0x43e207,_0xc932c6),0x0)?_0x518312[_0x392247(0x1a0)](_0x43e207,_0xc932c6):0x0;if(_0x518312[_0x392247(0x169)](_0xc932c6,0x0)&&_0x518312['ojPQC'](_0x992fab,0x0))_0x65aef+='\x20('+chalk[_0x392247(0x17c)][_0x392247(0x153)](_0xc932c6+_0x392247(0x1ac))+',\x20'+chalk[_0x392247(0x17c)]['green'](_0x992fab+_0x392247(0x185))+')';else(_0x518312[_0x392247(0x143)](_0xc932c6,0x0)||_0x518312[_0x392247(0x15d)](_0x992fab,0x0))&&(_0x65aef+=_0x518312[_0x392247(0x1aa)](_0xc932c6,0x0)?'\x20('+chalk['bold'][_0x392247(0x153)](_0xc932c6+'\x20failed')+')':'\x20('+chalk[_0x392247(0x17c)][_0x392247(0x168)](_0x992fab+_0x392247(0x185))+')');const _0x2950aa=_0x110dde+_0x392247(0x165),_0x15a4ea=[];_0x518312[_0x392247(0x15d)](_0x3a0ce7,0x0)&&_0x15a4ea[_0x392247(0x151)](''+chalk[_0x392247(0x17c)]['red'](_0x3a0ce7+_0x392247(0x1ab)));_0x518312[_0x392247(0x17e)](_0xaf010,0x0)&&_0x15a4ea['push'](''+chalk[_0x392247(0x17c)][_0x392247(0x153)](_0xaf010+_0x392247(0x1ac)));_0x518312[_0x392247(0x143)](_0x453572,0x0)&&_0x15a4ea[_0x392247(0x151)](''+chalk[_0x392247(0x17c)][_0x392247(0x168)](_0x453572+_0x392247(0x185)));_0x518312['sPxRJ'](_0x48cf5c,0x0)&&_0x15a4ea['push'](''+chalk['bold']['yellow'](_0x48cf5c+_0x392247(0x144)));_0x518312[_0x392247(0x18f)](_0x29467e,0x0)&&_0x15a4ea['push'](''+chalk['bold']['cyan'](_0x29467e+_0x392247(0x177)));_0x518312[_0x392247(0x169)](_0x202cb7,0x0)&&_0x15a4ea[_0x392247(0x151)](''+chalk[_0x392247(0x17c)]['yellow'](_0x202cb7+'\x20undefined'));_0x518312['sPxRJ'](_0x4fdb7f,0x0)&&_0x15a4ea[_0x392247(0x151)](''+chalk[_0x392247(0x17c)][_0x392247(0x160)](_0x4fdb7f+_0x392247(0x177)));const _0x2a57bd=_0x518312[_0x392247(0x157)](_0x518312[_0x392247(0x157)](_0x518312[_0x392247(0x157)](_0x2950aa,'('),_0x15a4ea[_0x392247(0x18c)](',\x20')),')');console[_0x392247(0x18a)](_0x518312[_0x392247(0x1b4)](_0x518312[_0x392247(0x154)](_0x518312[_0x392247(0x157)](_0x518312[_0x392247(0x174)]('\x0a',_0x65aef),'\x0a'),_0x2a57bd),'\x0a')),_0x518312[_0x392247(0x190)](_0x3adcbc,![])&&(_0x2043a9=0x1);}),_0x2043a9;}async function run(_0xe54b25,_0x4d66c8,_0x554084){const _0x5444b9=a5_0x3f2e86,_0x28d438={'sHWSW':function(_0x3dc1b0,_0x15ecfa){return _0x3dc1b0(_0x15ecfa);},'OcaLV':function(_0x5cbecd,_0x5c8dfd){return _0x5cbecd>_0x5c8dfd;},'vQdRM':_0x5444b9(0x150),'YrMdB':_0x5444b9(0x14a),'rvOEm':_0x5444b9(0x180),'vhgou':_0x5444b9(0x14c),'EKRHK':_0x5444b9(0x19c),'vQvBv':function(_0x3d58d4,_0x86873){return _0x3d58d4-_0x86873;},'YsLQH':function(_0x164120,_0x493032){return _0x164120>=_0x493032;},'rEkpa':function(_0x5ee36e,_0x235446){return _0x5ee36e!=_0x235446;},'ADdQK':'true','xgePL':function(_0xa55dc4,_0x38ddd4,_0xb8279d,_0xbdae8f,_0x32e2ac,_0xfaa9e8){return _0xa55dc4(_0x38ddd4,_0xb8279d,_0xbdae8f,_0x32e2ac,_0xfaa9e8);}};await _0x554084[_0x5444b9(0x186)](_0xe54b25),helper[_0x5444b9(0x191)](_0x554084[_0x5444b9(0x15a)],_0xe54b25);!helper['isBrowserstackInfra']()&&await _0x554084[_0x5444b9(0x199)]();await helper[_0x5444b9(0x145)](_0x554084[_0x5444b9(0x1a1)]);const _0x2031ce=helper['useW3C'](_0x554084['config']);!helper['isUndefined'](_0x554084[_0x5444b9(0x1a1)][_0x5444b9(0x15e)])&&(process[_0x5444b9(0x183)][_0x5444b9(0x170)]=JSON['stringify'](_0x554084[_0x5444b9(0x1a1)][_0x5444b9(0x15e)]));const _0xb4d726=await TestHubHandler[_0x5444b9(0x18d)](constants['FRAMEWORKS'][_0x5444b9(0x163)],_0x554084),_0x49ce48=helper[_0x5444b9(0x15c)](_0x554084[_0x5444b9(0x1a1)],_0x2031ce,constants[_0x5444b9(0x14d)]['CUCUMBER']);if(!_0x554084['config'])return;const _0x5d6260=_0x554084[_0x5444b9(0x1a1)][_0x5444b9(0x171)]||helper['getUserWorkerCount'](_0xe54b25,_0x4d66c8,_0x554084[_0x5444b9(0x1a1)],constants[_0x5444b9(0x14d)][_0x5444b9(0x163)])||0x1,_0x559dc8={'server':helper[_0x5444b9(0x1a5)](_0x554084[_0x5444b9(0x1a1)]),'proxySettings':_0x554084[_0x5444b9(0x1a1)][_0x5444b9(0x159)],'maxWorkers':_0x5d6260,'browserStackLogLevel':_0x554084[_0x5444b9(0x1a1)][_0x5444b9(0x14f)],'skipSessionName':_0x554084[_0x5444b9(0x1a1)][_0x5444b9(0x193)][_0x5444b9(0x14e)],'skipSessionStatus':_0x554084['config'][_0x5444b9(0x193)][_0x5444b9(0x16b)],'turboScaleUrl':_0x554084[_0x5444b9(0x1a1)][_0x5444b9(0x146)]},_0x4ce2cf=process['argv'],[_0x40cafb,_0x294f64]=helper[_0x5444b9(0x192)](_0x4ce2cf),_0x4b0b81=path[_0x5444b9(0x18c)](process[_0x5444b9(0x19b)](),_0x28d438[_0x5444b9(0x178)]);if(_0x28d438['OcaLV'](_0x294f64[_0x5444b9(0x17b)],0x0)){helper[_0x5444b9(0x149)](_0x4b0b81);for(let _0x2c330b=_0x28d438['vQvBv'](_0x40cafb[_0x5444b9(0x17b)],0x1);_0x28d438['YsLQH'](_0x2c330b,0x0);_0x2c330b--){_0x4ce2cf[_0x5444b9(0x175)](_0x40cafb[_0x2c330b],0x2);}}_0x28d438[_0x5444b9(0x1ad)](_0x554084['config'][_0x5444b9(0x14b)],null)?process[_0x5444b9(0x183)][_0x5444b9(0x181)]=_0x554084[_0x5444b9(0x1a1)][_0x5444b9(0x14b)]:process[_0x5444b9(0x183)][_0x5444b9(0x181)]=_0x28d438[_0x5444b9(0x1b3)];PerformanceTester[_0x5444b9(0x147)](PerformanceEvents[_0x5444b9(0x182)]);let _0x41e5de;_0x28d438[_0x5444b9(0x196)](parallelCucumberRun,_0x49ce48,_0x559dc8,_0x554084[_0x5444b9(0x1a1)],_0x4ce2cf,_0x294f64)['then'](async _0x7982fd=>{const _0x5a5b14=_0x5444b9;PerformanceTester[_0x5a5b14(0x167)](PerformanceEvents[_0x5a5b14(0x184)]),_0x41e5de=_0x7982fd;const _0x27753c=_0x28d438['sHWSW'](printCucumberStats,_0x7982fd);process['exitCode']=_0x27753c,_0x28d438['OcaLV'](_0x294f64[_0x5a5b14(0x17b)],0x0)&&(logger['debug'](_0x28d438[_0x5a5b14(0x188)]),helper[_0x5a5b14(0x1b5)](_0x4b0b81,_0x294f64),logger['debug'](_0x28d438['YrMdB']),helper[_0x5a5b14(0x1a6)](_0x4b0b81));})[_0x5444b9(0x194)](async()=>{const _0x3f8899=_0x5444b9;PerformanceTester[_0x3f8899(0x167)](PerformanceEvents['SDK_CLEANUP']),_0x554084[_0x3f8899(0x197)]=helper[_0x3f8899(0x17d)](_0x41e5de,_0x28d438[_0x3f8899(0x19a)]),testOpsHelper[_0x3f8899(0x1a8)]();try{await TestHubHandler[_0x3f8899(0x187)]();}catch(_0x23c03c){logger[_0x3f8899(0x172)](_0x3f8899(0x1a3)+util[_0x3f8899(0x1b2)](_0x23c03c));}try{const {browserstackFolderPath:_0x55c171,tcgConfigPath:_0xef953a}=helper['getTCGConfigFilePaths']();fs[_0x3f8899(0x156)](_0xef953a),fs[_0x3f8899(0x16a)](_0x55c171);}catch(_0x291d31){logger[_0x3f8899(0x172)](_0x28d438['vhgou'],_0x291d31);}await utilities[_0x3f8899(0x16c)](_0x554084);});}function a5_0x31bb(){const _0x5073d8=['oauRc','GBqvW','setUserConfigPath','parseFormatters','testContextOptions','finally','../../helpers/performance/constants','xgePL','errorMessage','stepsPassed','setupTCGAuth','rvOEm','cwd','tmp','scenarios','705960gVaFpD','../../helpers/utilities','NZgmG','config','EVENTS','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','winstonLogger','getHubUrl','removeDir','18731Ssmdoh','printBuildLink','bgWhite','XEGMh','\x20ambiguous','\x20failed','rEkpa','82MmEkbK','../utils/constants','152238BHcAqt','path','format','ADdQK','qNVDP','mergeOutputFiles','2392456KtLNyK','../test-runner','eZUty','****\x20RESULTS\x20****','fQFnw','\x20pending','handleApp','turboScaleUrl','end','sPxRJ','createDir','Removing\x20tmp\x20directory\x20created\x20for\x20reports','testObservability','error\x20removing\x20tcg\x20config\x20file','FRAMEWORKS','skipSessionName','logLevel','Generating\x20consolidated\x20report...','push','steps','red','NUbKO','6545320KtLbYi','unlinkSync','HEoSk','getPlatformName','proxySettings','framework','util','prepareCapabilities','zhjeE','accessibilityOptions','../../helpers/logger','yellow','stepsFailed','14EFpiNe','CUCUMBER','../../helpers/helper','\x20steps','nZnhC','start','green','ojPQC','rmdirSync','skipSessionStatus','finalExecution','chalk','forEach','../../helpers/test-observability/utils','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','parallelsPerPlatform','debug','../../helpers/testhub/testhubHandler','aOMde','splice','stepsSkipped','\x20skipped','EKRHK','19812276yGFfEn','\x20scenarios','length','bold','getErrorMessageFromResults','dUZMI','803151pTuwGK','cucumber','BROWSERSTACK_TEST_OBSERVABILITY_YML','SDK_SETUP','env','SDK_CLEANUP','\x20passed','initialize','stop','vQdRM','stepsPending','log','processSuccess','join','launchBuild','stepsUndefined'];a5_0x31bb=function(){return _0x5073d8;};return a5_0x31bb();}module['exports']=run;