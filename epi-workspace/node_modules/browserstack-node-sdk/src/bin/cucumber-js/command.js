#!/usr/bin/env node
'use strict';const a5_0x5445c4=a5_0x42c6;(function(_0x4847ac,_0x24a2c0){const _0x11672a=a5_0x42c6,_0x5421d7=_0x4847ac();while(!![]){try{const _0x5d2200=parseInt(_0x11672a(0x134))/0x1*(-parseInt(_0x11672a(0x103))/0x2)+-parseInt(_0x11672a(0x15a))/0x3*(parseInt(_0x11672a(0x143))/0x4)+parseInt(_0x11672a(0x124))/0x5+-parseInt(_0x11672a(0x162))/0x6+parseInt(_0x11672a(0xf5))/0x7*(parseInt(_0x11672a(0xef))/0x8)+-parseInt(_0x11672a(0x12e))/0x9*(parseInt(_0x11672a(0x10c))/0xa)+parseInt(_0x11672a(0x13b))/0xb;if(_0x5d2200===_0x24a2c0)break;else _0x5421d7['push'](_0x5421d7['shift']());}catch(_0x323ed5){_0x5421d7['push'](_0x5421d7['shift']());}}}(a5_0x2d3a,0x50c5e));function a5_0x42c6(_0x5c1198,_0x26c111){const _0x2d3a56=a5_0x2d3a();return a5_0x42c6=function(_0x42c6d6,_0x55efa3){_0x42c6d6=_0x42c6d6-0xec;let _0x1145f5=_0x2d3a56[_0x42c6d6];return _0x1145f5;},a5_0x42c6(_0x5c1198,_0x26c111);}const fs=require('fs'),path=require(a5_0x5445c4(0x148)),util=require(a5_0x5445c4(0x15e)),logger=require(a5_0x5445c4(0x128))['winstonLogger'],{default:BrowserStackSetup}=require(a5_0x5445c4(0x136)),helper=require(a5_0x5445c4(0x10b)),utilities=require(a5_0x5445c4(0x120)),constants=require('../utils/constants'),{parallelCucumberRun}=require(a5_0x5445c4(0x117)),TestHubHandler=require(a5_0x5445c4(0x130)),testOpsHelper=require('../../helpers/test-observability/utils'),chalk=require(a5_0x5445c4(0x155)),PerformanceTester=require(a5_0x5445c4(0xfa)),PerformanceEvents=require(a5_0x5445c4(0x151))[a5_0x5445c4(0x15c)];function printCucumberStats(_0x26418e){const _0xff059d=a5_0x5445c4,_0x50ede7={};_0x50ede7[_0xff059d(0x122)]=function(_0x21b0fb,_0x8ee23e){return _0x21b0fb>_0x8ee23e;},_0x50ede7[_0xff059d(0x146)]=function(_0x184cd9,_0x4ef050){return _0x184cd9-_0x4ef050;},_0x50ede7[_0xff059d(0x11d)]=function(_0x2bc797,_0x3a83de){return _0x2bc797>_0x3a83de;},_0x50ede7[_0xff059d(0x125)]=function(_0x44e138,_0x51a231){return _0x44e138>_0x51a231;},_0x50ede7[_0xff059d(0xfb)]=function(_0x37b081,_0xceeeb3){return _0x37b081>_0xceeeb3;},_0x50ede7[_0xff059d(0x13e)]=function(_0x4ec7d3,_0x3851ef){return _0x4ec7d3>_0x3851ef;},_0x50ede7['JZkbC']=function(_0x317e13,_0x364381){return _0x317e13+_0x364381;},_0x50ede7[_0xff059d(0x159)]=function(_0x122c5b,_0x491edb){return _0x122c5b+_0x491edb;},_0x50ede7[_0xff059d(0xf8)]=function(_0x5c2ca7,_0x2f15d5){return _0x5c2ca7+_0x2f15d5;},_0x50ede7[_0xff059d(0x121)]=function(_0x2270a3,_0x19982e){return _0x2270a3===_0x19982e;},_0x50ede7['yCrQz']=_0xff059d(0xfd);const _0x4c7c31=_0x50ede7;let _0x579246=0x0;if(_0x4c7c31[_0xff059d(0x121)](_0x26418e['length'],0x0))return _0x579246;return console['log'](chalk[_0xff059d(0x154)][_0xff059d(0xff)](_0x4c7c31[_0xff059d(0x135)])),_0x26418e['forEach'](_0x49611c=>{const _0x5a7736=_0xff059d,_0x71d24e=_0x49611c[0x0],_0xae1bf4=_0x49611c[0x1];console['log']('\x0a'+chalk['bold'][_0x5a7736(0x163)](''+helper[_0x5a7736(0x119)](_0x71d24e)));const _0x3420b7=_0xae1bf4[_0x5a7736(0x114)],_0x37946b=_0xae1bf4[_0x5a7736(0x129)],_0x3f79ac=_0xae1bf4['scenariosFailed'],_0x3db343=_0xae1bf4[_0x5a7736(0x106)],_0x2fc6cc=_0xae1bf4[_0x5a7736(0x14f)],_0x270efe=_0xae1bf4[_0x5a7736(0x15b)],_0x189d2f=_0xae1bf4['stepsPending'],_0x7db30e=_0xae1bf4[_0x5a7736(0x110)],_0x4d9c54=_0xae1bf4['stepsUnknown'],_0x58fa13=_0xae1bf4['stepsAmbiguous'],_0xcce40b=_0xae1bf4[_0x5a7736(0x145)];let _0x32c577=_0x3420b7+'\x20scenarios';const _0x14f1fb=_0x4c7c31[_0x5a7736(0x122)](_0x4c7c31[_0x5a7736(0x146)](_0x3420b7,_0x3f79ac),0x0)?_0x4c7c31['jBcMV'](_0x3420b7,_0x3f79ac):0x0;if(_0x4c7c31[_0x5a7736(0x122)](_0x3f79ac,0x0)&&_0x4c7c31[_0x5a7736(0x11d)](_0x14f1fb,0x0))_0x32c577+='\x20('+chalk[_0x5a7736(0x154)][_0x5a7736(0x132)](_0x3f79ac+_0x5a7736(0xee))+',\x20'+chalk[_0x5a7736(0x154)][_0x5a7736(0x138)](_0x14f1fb+'\x20passed')+')';else(_0x4c7c31[_0x5a7736(0x125)](_0x3f79ac,0x0)||_0x4c7c31[_0x5a7736(0x125)](_0x14f1fb,0x0))&&(_0x32c577+=_0x4c7c31['otPpA'](_0x3f79ac,0x0)?'\x20('+chalk[_0x5a7736(0x154)]['red'](_0x3f79ac+_0x5a7736(0xee))+')':'\x20('+chalk[_0x5a7736(0x154)]['green'](_0x14f1fb+_0x5a7736(0x101))+')');const _0x23f350=_0x37946b+_0x5a7736(0x118),_0x6b26c4=[];_0x4c7c31[_0x5a7736(0xfb)](_0x58fa13,0x0)&&_0x6b26c4['push'](''+chalk[_0x5a7736(0x154)][_0x5a7736(0x132)](_0x58fa13+_0x5a7736(0x10f)));_0x4c7c31[_0x5a7736(0xfb)](_0x3db343,0x0)&&_0x6b26c4[_0x5a7736(0x11c)](''+chalk[_0x5a7736(0x154)]['red'](_0x3db343+_0x5a7736(0xee)));_0x4c7c31[_0x5a7736(0x11d)](_0x2fc6cc,0x0)&&_0x6b26c4['push'](''+chalk['bold'][_0x5a7736(0x138)](_0x2fc6cc+_0x5a7736(0x101)));_0x4c7c31[_0x5a7736(0x125)](_0x189d2f,0x0)&&_0x6b26c4[_0x5a7736(0x11c)](''+chalk[_0x5a7736(0x154)][_0x5a7736(0x163)](_0x189d2f+_0x5a7736(0x139)));_0x4c7c31[_0x5a7736(0x125)](_0x270efe,0x0)&&_0x6b26c4['push'](''+chalk[_0x5a7736(0x154)][_0x5a7736(0x13d)](_0x270efe+_0x5a7736(0x123)));_0x4c7c31[_0x5a7736(0x13e)](_0x7db30e,0x0)&&_0x6b26c4[_0x5a7736(0x11c)](''+chalk[_0x5a7736(0x154)]['yellow'](_0x7db30e+_0x5a7736(0x113)));_0x4c7c31[_0x5a7736(0x11d)](_0x4d9c54,0x0)&&_0x6b26c4[_0x5a7736(0x11c)](''+chalk['bold'][_0x5a7736(0x163)](_0x4d9c54+_0x5a7736(0x123)));const _0x7c12ae=_0x4c7c31[_0x5a7736(0x153)](_0x4c7c31['JZkbC'](_0x4c7c31[_0x5a7736(0x153)](_0x23f350,'('),_0x6b26c4['join'](',\x20')),')');console[_0x5a7736(0xf3)](_0x4c7c31['JZkbC'](_0x4c7c31['JZkbC'](_0x4c7c31[_0x5a7736(0x159)](_0x4c7c31['BUZEr']('\x0a',_0x32c577),'\x0a'),_0x7c12ae),'\x0a')),_0x4c7c31[_0x5a7736(0x121)](_0xcce40b,![])&&(_0x579246=0x1);}),_0x579246;}function a5_0x2d3a(){const _0x4d4c94=['../test-runner','\x20steps','getPlatformName','useW3C','mYCeK','push','aNztm','framework','ZgzeW','../../helpers/utilities','YWrlj','otPpA','\x20skipped','2432520SYcjnr','TWdjM','testContextOptions','stringify','../../helpers/logger','steps','cucumber','parseFormatters','true','getHubUrl','9ZqdDHg','proxySettings','../../helpers/testhub/testhubHandler','parallelsPerPlatform','red','finalExecution','58634QcAFKw','yCrQz','../../helpers/BrowserStackSetup','finally','green','\x20pending','end','6823047KpqgCQ','createDir','cyan','ifRmx','testObservability','isBrowserstackInfra','removeDir','SDK_CLEANUP','32dArIFc','start','processSuccess','jBcMV','argv','path','Removing\x20tmp\x20directory\x20created\x20for\x20reports','mSyUO','errorMessage','getTCGConfigFilePaths','length','HgTUx','stepsPassed','vHedi','../../helpers/performance/constants','ozKEB','JZkbC','bold','chalk','handleApp','SDK_SETUP','accessibilityOptions','sRMSa','70086ePwjYS','stepsSkipped','EVENTS','hubqn','util','jYvjf','prepareCapabilities','printBuildLink','1715964BtInNk','yellow','splice','skipSessionStatus','\x20failed','445008heMAbV','exports','TdRYD','cucumber-js','log','join','35RRamVl','KgMYu','getUserWorkerCount','BUZEr','Generating\x20consolidated\x20report...','../../helpers/performance/performance-tester','EVhwV','BROWSERSTACK_TEST_OBSERVABILITY_YML','****\x20RESULTS\x20****','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','bgWhite','env','\x20passed','FRAMEWORKS','10ZNCPph','format','stop','stepsFailed','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','mergeOutputFiles','bhDvZ','debug','../../helpers/helper','2880050dHAtoV','launchBuild','error\x20removing\x20tcg\x20config\x20file','\x20ambiguous','stepsUndefined','getErrorMessageFromResults','AVuxe','\x20undefined','scenarios','config','CUCUMBER'];a5_0x2d3a=function(){return _0x4d4c94;};return a5_0x2d3a();}async function run(_0xa82673,_0x5bfd5f){const _0x2badb4=a5_0x5445c4,_0x12831={'mSyUO':function(_0x2c9679,_0x3350c5){return _0x2c9679(_0x3350c5);},'hubqn':function(_0x475d7d,_0x526a77){return _0x475d7d>_0x526a77;},'IZbvF':_0x2badb4(0xf9),'HgTUx':_0x2badb4(0x149),'TdRYD':_0x2badb4(0x12a),'KgMYu':_0x2badb4(0x10e),'AVuxe':_0x2badb4(0xf2),'ZgzeW':'tmp','jYvjf':function(_0x17b5bd,_0x4a60fd){return _0x17b5bd>_0x4a60fd;},'ozKEB':function(_0xe2f73e,_0x7feafc){return _0xe2f73e-_0x7feafc;},'cWwql':function(_0x39bbaa,_0x54c466){return _0x39bbaa>=_0x54c466;},'bhDvZ':function(_0x1783be,_0x3d4260){return _0x1783be!=_0x3d4260;},'mYCeK':_0x2badb4(0x12c),'vHedi':function(_0x4b14dc,_0x36cb09,_0xa2caab,_0x46d360,_0x4725d4,_0x573102){return _0x4b14dc(_0x36cb09,_0xa2caab,_0x46d360,_0x4725d4,_0x573102);}},_0x42591c=new BrowserStackSetup(_0xa82673,_0x12831[_0x2badb4(0x112)]);await _0x42591c['initialize'](),helper['setUserConfigPath'](_0x42591c[_0x2badb4(0x11e)],_0xa82673);!helper[_0x2badb4(0x140)]()&&await _0x42591c['setupTCGAuth']();await helper[_0x2badb4(0x156)](_0x42591c['config']);const _0x2aceb5=helper[_0x2badb4(0x11a)](_0x42591c[_0x2badb4(0x115)]),_0xb81ecb=helper[_0x2badb4(0x160)](_0x42591c[_0x2badb4(0x115)],_0x2aceb5,constants[_0x2badb4(0x102)]['CUCUMBER']);if(!_0x42591c[_0x2badb4(0x115)])return;const _0x30ab3a=_0x42591c['config'][_0x2badb4(0x131)]||helper[_0x2badb4(0xf7)](_0xa82673,_0x5bfd5f,_0x42591c['config'],constants['FRAMEWORKS'][_0x2badb4(0x116)])||0x1,_0x3a72c9={'server':helper[_0x2badb4(0x12d)](_0x42591c['config']),'proxySettings':_0x42591c['config'][_0x2badb4(0x12f)],'maxWorkers':_0x30ab3a,'browserStackLogLevel':_0x42591c[_0x2badb4(0x115)]['logLevel'],'skipSessionName':_0x42591c[_0x2badb4(0x115)][_0x2badb4(0x126)]['skipSessionName'],'skipSessionStatus':_0x42591c[_0x2badb4(0x115)]['testContextOptions'][_0x2badb4(0xed)],'turboScaleUrl':_0x42591c['config']['turboScaleUrl']},_0x1340cc=process[_0x2badb4(0x147)],[_0x5e99ab,_0x3c4412]=helper[_0x2badb4(0x12b)](_0x1340cc),_0x2c4226=path[_0x2badb4(0xf4)](process['cwd'](),_0x12831[_0x2badb4(0x11f)]);if(_0x12831[_0x2badb4(0x15f)](_0x3c4412[_0x2badb4(0x14d)],0x0)){helper[_0x2badb4(0x13c)](_0x2c4226);for(let _0x54ee8c=_0x12831[_0x2badb4(0x152)](_0x5e99ab[_0x2badb4(0x14d)],0x1);_0x12831['cWwql'](_0x54ee8c,0x0);_0x54ee8c--){_0x1340cc[_0x2badb4(0xec)](_0x5e99ab[_0x54ee8c],0x2);}}!helper['isUndefined'](_0x42591c[_0x2badb4(0x115)][_0x2badb4(0x158)])&&(process['env'][_0x2badb4(0x107)]=JSON[_0x2badb4(0x127)](_0x42591c[_0x2badb4(0x115)][_0x2badb4(0x158)]));_0x12831[_0x2badb4(0x109)](_0x42591c[_0x2badb4(0x115)][_0x2badb4(0x13f)],null)?process[_0x2badb4(0x100)]['BROWSERSTACK_TEST_OBSERVABILITY_YML']=_0x42591c[_0x2badb4(0x115)][_0x2badb4(0x13f)]:process[_0x2badb4(0x100)][_0x2badb4(0xfc)]=_0x12831[_0x2badb4(0x11b)];const _0x132fbc=await TestHubHandler[_0x2badb4(0x10d)](constants[_0x2badb4(0x102)][_0x2badb4(0x116)],_0x42591c);PerformanceTester[_0x2badb4(0x13a)](PerformanceEvents[_0x2badb4(0x157)]);let _0xee9f7d;_0x12831[_0x2badb4(0x150)](parallelCucumberRun,_0xb81ecb,_0x3a72c9,_0x42591c[_0x2badb4(0x115)],_0x1340cc,_0x3c4412)['then'](async _0x10aaf4=>{const _0x51bffb=_0x2badb4;PerformanceTester[_0x51bffb(0x144)](PerformanceEvents['SDK_CLEANUP']),_0xee9f7d=_0x10aaf4;const _0x3f2eb3=_0x12831[_0x51bffb(0x14a)](printCucumberStats,_0x10aaf4);process['exitCode']=_0x3f2eb3,_0x12831[_0x51bffb(0x15d)](_0x3c4412[_0x51bffb(0x14d)],0x0)&&(logger[_0x51bffb(0x10a)](_0x12831['IZbvF']),helper[_0x51bffb(0x108)](_0x2c4226,_0x3c4412),logger[_0x51bffb(0x10a)](_0x12831[_0x51bffb(0x14e)]),helper[_0x51bffb(0x141)](_0x2c4226));})[_0x2badb4(0x137)](async()=>{const _0x97d7cd=_0x2badb4;PerformanceTester[_0x97d7cd(0x144)](PerformanceEvents[_0x97d7cd(0x142)]),_0x42591c[_0x97d7cd(0x14b)]=helper[_0x97d7cd(0x111)](_0xee9f7d,_0x12831[_0x97d7cd(0xf1)]),testOpsHelper[_0x97d7cd(0x161)]();try{await TestHubHandler[_0x97d7cd(0x105)]();}catch(_0x663cf9){logger[_0x97d7cd(0x10a)](_0x97d7cd(0xfe)+util[_0x97d7cd(0x104)](_0x663cf9));}try{const {browserstackFolderPath:_0x5ad689,tcgConfigPath:_0x4bf853}=helper[_0x97d7cd(0x14c)]();fs['unlinkSync'](_0x4bf853),fs['rmdirSync'](_0x5ad689);}catch(_0x24656b){logger[_0x97d7cd(0x10a)](_0x12831[_0x97d7cd(0xf6)],_0x24656b);}await utilities[_0x97d7cd(0x133)](_0x42591c);});}module[a5_0x5445c4(0xf0)]=run;