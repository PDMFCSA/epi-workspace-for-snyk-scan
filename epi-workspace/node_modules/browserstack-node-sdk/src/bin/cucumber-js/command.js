#!/usr/bin/env node
'use strict';const a5_0x37d3e0=a5_0x1097;function a5_0xd49b(){const _0x505a0e=['stepsFailed','push','errorMessage','splice','CUCUMBER','\x20pending','yellow','../../helpers/utilities','15113nvPJle','9hnnEpk','bnvxI','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','exports','\x20skipped','error\x20removing\x20tcg\x20config\x20file','QAuXR','getUserWorkerCount','skipSessionStatus','cwd','isBrowserstackInfra','true','logLevel','lZFwz','red','prepareCapabilities','createDir','WHOKe','getPlatformName','useW3C','stop','path','****\x20RESULTS\x20****','isUndefined','QgUKj','handleApp','../test-runner','turboScaleUrl','end','tmp','SDK_SETUP','\x20undefined','178xactxQ','EdXeH','accessibilityOptions','../../helpers/BrowserStackSetup','bgWhite','Jkovj','411152kElbZI','exitCode','\x20failed','initialize','tLdFg','3437148QVSMve','../../helpers/testhub/testhubHandler','stepsPending','61527BBorEz','unlinkSync','bold','Removing\x20tmp\x20directory\x20created\x20for\x20reports','EVENTS','../../helpers/performance/constants','2335730SHshSh','util','scenarios','CJLyc','BROWSERSTACK_TEST_OBSERVABILITY_YML','8jGIEFT','then','debug','cucumber-js','length','HCgUa','4591BRYevO','gBrWi','start','scenariosFailed','euWcy','tmHAv','stringify','cucumber','WkFOZ','testContextOptions','FRAMEWORKS','stepsAmbiguous','env','winstonLogger','1684870sTuUYI','../../helpers/performance/performance-tester','argv','setupTCGAuth','stepsUndefined','removeDir','\x20passed','KVoPa','framework','VlkSo','skipSessionName','tBiOt','SDK_CLEANUP','nbWMw','gxnyi','BkyHi','config','printBuildLink','testObservability','cyan','green','\x20scenarios','zPcCn','getTCGConfigFilePaths','log','AOIMZ','390wZTVsQ','stepsUnknown','jKhRY','proxySettings','rbdOe','OxtzZ'];a5_0xd49b=function(){return _0x505a0e;};return a5_0xd49b();}(function(_0x5df4b5,_0x4be14e){const _0x3120ca=a5_0x1097,_0x1179ad=_0x5df4b5();while(!![]){try{const _0x1ce67a=-parseInt(_0x3120ca(0x181))/0x1*(-parseInt(_0x3120ca(0x162))/0x2)+-parseInt(_0x3120ca(0x170))/0x3*(-parseInt(_0x3120ca(0x17b))/0x4)+-parseInt(_0x3120ca(0x18f))/0x5+-parseInt(_0x3120ca(0x1a9))/0x6*(-parseInt(_0x3120ca(0x1b7))/0x7)+parseInt(_0x3120ca(0x168))/0x8*(parseInt(_0x3120ca(0x1b8))/0x9)+parseInt(_0x3120ca(0x176))/0xa+-parseInt(_0x3120ca(0x16d))/0xb;if(_0x1ce67a===_0x4be14e)break;else _0x1179ad['push'](_0x1179ad['shift']());}catch(_0xba590c){_0x1179ad['push'](_0x1179ad['shift']());}}}(a5_0xd49b,0x370c5));function a5_0x1097(_0x2b632e,_0x5373ad){const _0xd49b6b=a5_0xd49b();return a5_0x1097=function(_0x10970b,_0x3d730a){_0x10970b=_0x10970b-0x15f;let _0x35e4a7=_0xd49b6b[_0x10970b];return _0x35e4a7;},a5_0x1097(_0x2b632e,_0x5373ad);}const fs=require('fs'),path=require(a5_0x37d3e0(0x1cd)),util=require(a5_0x37d3e0(0x177)),logger=require('../../helpers/logger')[a5_0x37d3e0(0x18e)],{default:BrowserStackSetup}=require(a5_0x37d3e0(0x165)),helper=require('../../helpers/helper'),utilities=require(a5_0x37d3e0(0x1b6)),constants=require('../utils/constants'),{parallelCucumberRun}=require(a5_0x37d3e0(0x1d2)),TestHubHandler=require(a5_0x37d3e0(0x16e)),testOpsHelper=require('../../helpers/test-observability/utils'),chalk=require('chalk'),PerformanceTester=require(a5_0x37d3e0(0x190)),PerformanceEvents=require(a5_0x37d3e0(0x175))[a5_0x37d3e0(0x174)];function printCucumberStats(_0x14ec18){const _0x3b612c=a5_0x37d3e0,_0x59900f={};_0x59900f['tBiOt']=function(_0x1cf32d,_0x50dbff){return _0x1cf32d>_0x50dbff;},_0x59900f[_0x3b612c(0x186)]=function(_0x408449,_0x5a15a7){return _0x408449-_0x5a15a7;},_0x59900f[_0x3b612c(0x185)]=function(_0x212c6a,_0x34e84c){return _0x212c6a-_0x34e84c;},_0x59900f[_0x3b612c(0x198)]=function(_0x3fcd47,_0x2a53e3){return _0x3fcd47>_0x2a53e3;},_0x59900f['AimNy']=function(_0x458978,_0xf8ac9e){return _0x458978>_0xf8ac9e;},_0x59900f[_0x3b612c(0x1c9)]=function(_0xaecdc6,_0x575c97){return _0xaecdc6>_0x575c97;},_0x59900f[_0x3b612c(0x19d)]=function(_0xdcf636,_0x23b982){return _0xdcf636>_0x23b982;},_0x59900f[_0x3b612c(0x1b9)]=function(_0x4cc1a5,_0x3f84fd){return _0x4cc1a5>_0x3f84fd;},_0x59900f[_0x3b612c(0x19e)]=function(_0x5655dd,_0x4fa966){return _0x5655dd>_0x4fa966;},_0x59900f[_0x3b612c(0x16c)]=function(_0x8d4f2a,_0x203bab){return _0x8d4f2a>_0x203bab;},_0x59900f['uDMny']=function(_0x3a30a3,_0x63b945){return _0x3a30a3>_0x63b945;},_0x59900f[_0x3b612c(0x196)]=function(_0x3499ee,_0x26f8ea){return _0x3499ee+_0x26f8ea;},_0x59900f[_0x3b612c(0x1c5)]=function(_0xcc3686,_0x2f3bae){return _0xcc3686+_0x2f3bae;},_0x59900f[_0x3b612c(0x179)]=function(_0x82052d,_0x194d97){return _0x82052d+_0x194d97;},_0x59900f[_0x3b612c(0x1ae)]=function(_0xa1704f,_0x3e0b52){return _0xa1704f===_0x3e0b52;},_0x59900f[_0x3b612c(0x1d0)]=_0x3b612c(0x1ce);const _0x4b9c04=_0x59900f;let _0xc8662b=0x0;if(_0x4b9c04[_0x3b612c(0x1ae)](_0x14ec18['length'],0x0))return _0xc8662b;return console[_0x3b612c(0x1a7)](chalk[_0x3b612c(0x172)][_0x3b612c(0x166)](_0x4b9c04[_0x3b612c(0x1d0)])),_0x14ec18['forEach'](_0x14d554=>{const _0x3e54dd=_0x3b612c,_0x1b2b3d=_0x14d554[0x0],_0x8d8f23=_0x14d554[0x1];console[_0x3e54dd(0x1a7)]('\x0a'+chalk['bold'][_0x3e54dd(0x1b5)](''+helper[_0x3e54dd(0x1ca)](_0x1b2b3d)));const _0x716d26=_0x8d8f23[_0x3e54dd(0x178)],_0x45d0de=_0x8d8f23['steps'],_0x902dd4=_0x8d8f23[_0x3e54dd(0x184)],_0x3f6572=_0x8d8f23[_0x3e54dd(0x1af)],_0x53fdd9=_0x8d8f23['stepsPassed'],_0x342db2=_0x8d8f23['stepsSkipped'],_0x2c82a6=_0x8d8f23[_0x3e54dd(0x16f)],_0x7641b4=_0x8d8f23[_0x3e54dd(0x193)],_0x207590=_0x8d8f23[_0x3e54dd(0x1aa)],_0x117edc=_0x8d8f23[_0x3e54dd(0x18c)],_0x23f73b=_0x8d8f23['processSuccess'];let _0x263300=_0x716d26+_0x3e54dd(0x1a4);const _0x25cb9c=_0x4b9c04['tBiOt'](_0x4b9c04[_0x3e54dd(0x186)](_0x716d26,_0x902dd4),0x0)?_0x4b9c04[_0x3e54dd(0x185)](_0x716d26,_0x902dd4):0x0;if(_0x4b9c04[_0x3e54dd(0x198)](_0x902dd4,0x0)&&_0x4b9c04['AimNy'](_0x25cb9c,0x0))_0x263300+='\x20('+chalk['bold'][_0x3e54dd(0x1c6)](_0x902dd4+_0x3e54dd(0x16a))+',\x20'+chalk[_0x3e54dd(0x172)][_0x3e54dd(0x1a3)](_0x25cb9c+_0x3e54dd(0x195))+')';else(_0x4b9c04[_0x3e54dd(0x19a)](_0x902dd4,0x0)||_0x4b9c04[_0x3e54dd(0x1c9)](_0x25cb9c,0x0))&&(_0x263300+=_0x4b9c04['VlkSo'](_0x902dd4,0x0)?'\x20('+chalk[_0x3e54dd(0x172)][_0x3e54dd(0x1c6)](_0x902dd4+_0x3e54dd(0x16a))+')':'\x20('+chalk[_0x3e54dd(0x172)]['green'](_0x25cb9c+'\x20passed')+')');const _0xa1a4c7=_0x45d0de+'\x20steps',_0x5bcc22=[];_0x4b9c04[_0x3e54dd(0x198)](_0x117edc,0x0)&&_0x5bcc22[_0x3e54dd(0x1b0)](''+chalk[_0x3e54dd(0x172)][_0x3e54dd(0x1c6)](_0x117edc+'\x20ambiguous'));_0x4b9c04[_0x3e54dd(0x19d)](_0x3f6572,0x0)&&_0x5bcc22[_0x3e54dd(0x1b0)](''+chalk[_0x3e54dd(0x172)][_0x3e54dd(0x1c6)](_0x3f6572+_0x3e54dd(0x16a)));_0x4b9c04['AimNy'](_0x53fdd9,0x0)&&_0x5bcc22['push'](''+chalk[_0x3e54dd(0x172)][_0x3e54dd(0x1a3)](_0x53fdd9+_0x3e54dd(0x195)));_0x4b9c04['bnvxI'](_0x2c82a6,0x0)&&_0x5bcc22[_0x3e54dd(0x1b0)](''+chalk[_0x3e54dd(0x172)][_0x3e54dd(0x1b5)](_0x2c82a6+_0x3e54dd(0x1b4)));_0x4b9c04[_0x3e54dd(0x19e)](_0x342db2,0x0)&&_0x5bcc22['push'](''+chalk[_0x3e54dd(0x172)][_0x3e54dd(0x1a2)](_0x342db2+_0x3e54dd(0x1bc)));_0x4b9c04[_0x3e54dd(0x16c)](_0x7641b4,0x0)&&_0x5bcc22[_0x3e54dd(0x1b0)](''+chalk[_0x3e54dd(0x172)][_0x3e54dd(0x1b5)](_0x7641b4+_0x3e54dd(0x161)));_0x4b9c04['uDMny'](_0x207590,0x0)&&_0x5bcc22['push'](''+chalk['bold']['yellow'](_0x207590+_0x3e54dd(0x1bc)));const _0x28607d=_0x4b9c04[_0x3e54dd(0x196)](_0x4b9c04[_0x3e54dd(0x196)](_0x4b9c04[_0x3e54dd(0x196)](_0xa1a4c7,'('),_0x5bcc22['join'](',\x20')),')');console[_0x3e54dd(0x1a7)](_0x4b9c04['lZFwz'](_0x4b9c04[_0x3e54dd(0x1c5)](_0x4b9c04[_0x3e54dd(0x179)](_0x4b9c04[_0x3e54dd(0x196)]('\x0a',_0x263300),'\x0a'),_0x28607d),'\x0a')),_0x4b9c04[_0x3e54dd(0x1ae)](_0x23f73b,![])&&(_0xc8662b=0x1);}),_0xc8662b;}async function run(_0x3b21d5,_0x265a98){const _0x2aacd2=a5_0x37d3e0,_0x539f6a={'nbWMw':function(_0x50f5b1,_0x2ede70){return _0x50f5b1(_0x2ede70);},'rbdOe':function(_0x4c5d59,_0x53a038){return _0x4c5d59>_0x53a038;},'Jkovj':'Generating\x20consolidated\x20report...','sjYok':_0x2aacd2(0x173),'AhCef':_0x2aacd2(0x188),'uflKo':_0x2aacd2(0x1bd),'AOIMZ':_0x2aacd2(0x17e),'gBrWi':_0x2aacd2(0x15f),'WkFOZ':function(_0x229084,_0x1e006d){return _0x229084>_0x1e006d;},'HCgUa':function(_0x36674d,_0x44ef76){return _0x36674d-_0x44ef76;},'zPcCn':function(_0x40f961,_0x58c7de){return _0x40f961>=_0x58c7de;},'QAuXR':function(_0x1afb1f,_0x41689a){return _0x1afb1f!=_0x41689a;},'EdXeH':_0x2aacd2(0x1c3),'jKhRY':function(_0x2bed07,_0x1f586c,_0x4a3dab,_0x4a21ac,_0x384351,_0x42a1dd){return _0x2bed07(_0x1f586c,_0x4a3dab,_0x4a21ac,_0x384351,_0x42a1dd);}},_0x2008ea=new BrowserStackSetup(_0x3b21d5,_0x539f6a[_0x2aacd2(0x1a8)]);await _0x2008ea[_0x2aacd2(0x16b)](),helper['setUserConfigPath'](_0x2008ea[_0x2aacd2(0x197)],_0x3b21d5);!helper[_0x2aacd2(0x1c2)]()&&await _0x2008ea[_0x2aacd2(0x192)]();await helper[_0x2aacd2(0x1d1)](_0x2008ea[_0x2aacd2(0x19f)]);const _0x5df627=helper[_0x2aacd2(0x1cb)](_0x2008ea[_0x2aacd2(0x19f)]),_0x53c68a=helper[_0x2aacd2(0x1c7)](_0x2008ea[_0x2aacd2(0x19f)],_0x5df627,constants[_0x2aacd2(0x18b)][_0x2aacd2(0x1b3)]);if(!_0x2008ea['config'])return;const _0x2b4f38=_0x2008ea[_0x2aacd2(0x19f)]['parallelsPerPlatform']||helper[_0x2aacd2(0x1bf)](_0x3b21d5,_0x265a98,_0x2008ea[_0x2aacd2(0x19f)],constants[_0x2aacd2(0x18b)][_0x2aacd2(0x1b3)])||0x1,_0x119126={'server':helper['getHubUrl'](_0x2008ea[_0x2aacd2(0x19f)]),'proxySettings':_0x2008ea[_0x2aacd2(0x19f)][_0x2aacd2(0x1ac)],'maxWorkers':_0x2b4f38,'browserStackLogLevel':_0x2008ea['config'][_0x2aacd2(0x1c4)],'skipSessionName':_0x2008ea[_0x2aacd2(0x19f)]['testContextOptions'][_0x2aacd2(0x199)],'skipSessionStatus':_0x2008ea[_0x2aacd2(0x19f)][_0x2aacd2(0x18a)][_0x2aacd2(0x1c0)],'turboScaleUrl':_0x2008ea[_0x2aacd2(0x19f)][_0x2aacd2(0x1d3)]},_0x90b526=process[_0x2aacd2(0x191)],[_0x25857e,_0x3abd48]=helper['parseFormatters'](_0x90b526),_0x3bbb99=path['join'](process[_0x2aacd2(0x1c1)](),_0x539f6a[_0x2aacd2(0x182)]);if(_0x539f6a[_0x2aacd2(0x189)](_0x3abd48['length'],0x0)){helper[_0x2aacd2(0x1c8)](_0x3bbb99);for(let _0x5c81c1=_0x539f6a[_0x2aacd2(0x180)](_0x25857e[_0x2aacd2(0x17f)],0x1);_0x539f6a[_0x2aacd2(0x1a5)](_0x5c81c1,0x0);_0x5c81c1--){_0x90b526[_0x2aacd2(0x1b2)](_0x25857e[_0x5c81c1],0x2);}}!helper[_0x2aacd2(0x1cf)](_0x2008ea[_0x2aacd2(0x19f)][_0x2aacd2(0x164)])&&(process[_0x2aacd2(0x18d)][_0x2aacd2(0x1ba)]=JSON[_0x2aacd2(0x187)](_0x2008ea['config']['accessibilityOptions']));_0x539f6a[_0x2aacd2(0x1be)](_0x2008ea[_0x2aacd2(0x19f)][_0x2aacd2(0x1a1)],null)?process[_0x2aacd2(0x18d)][_0x2aacd2(0x17a)]=_0x2008ea[_0x2aacd2(0x19f)][_0x2aacd2(0x1a1)]:process[_0x2aacd2(0x18d)][_0x2aacd2(0x17a)]=_0x539f6a[_0x2aacd2(0x163)];const _0x397437=await TestHubHandler['launchBuild'](constants[_0x2aacd2(0x18b)][_0x2aacd2(0x1b3)],_0x2008ea);PerformanceTester[_0x2aacd2(0x1d4)](PerformanceEvents[_0x2aacd2(0x160)]);let _0x26ea63;_0x539f6a[_0x2aacd2(0x1ab)](parallelCucumberRun,_0x53c68a,_0x119126,_0x2008ea[_0x2aacd2(0x19f)],_0x90b526,_0x3abd48)[_0x2aacd2(0x17c)](async _0x5b2d2d=>{const _0x4cc6cb=_0x2aacd2;PerformanceTester[_0x4cc6cb(0x183)](PerformanceEvents['SDK_CLEANUP']),_0x26ea63=_0x5b2d2d;const _0x3533ee=_0x539f6a[_0x4cc6cb(0x19c)](printCucumberStats,_0x5b2d2d);process[_0x4cc6cb(0x169)]=_0x3533ee,_0x539f6a[_0x4cc6cb(0x1ad)](_0x3abd48['length'],0x0)&&(logger[_0x4cc6cb(0x17d)](_0x539f6a[_0x4cc6cb(0x167)]),helper['mergeOutputFiles'](_0x3bbb99,_0x3abd48),logger[_0x4cc6cb(0x17d)](_0x539f6a['sjYok']),helper[_0x4cc6cb(0x194)](_0x3bbb99));})['finally'](async()=>{const _0x13640a=_0x2aacd2;PerformanceTester['start'](PerformanceEvents[_0x13640a(0x19b)]),_0x2008ea[_0x13640a(0x1b1)]=helper['getErrorMessageFromResults'](_0x26ea63,_0x539f6a['AhCef']),testOpsHelper[_0x13640a(0x1a0)]();try{await TestHubHandler[_0x13640a(0x1cc)]();}catch(_0x598a10){logger[_0x13640a(0x17d)]('Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20'+util['format'](_0x598a10));}try{const {browserstackFolderPath:_0x5bf98d,tcgConfigPath:_0x3d5375}=helper[_0x13640a(0x1a6)]();fs[_0x13640a(0x171)](_0x3d5375),fs['rmdirSync'](_0x5bf98d);}catch(_0xefb9a){logger[_0x13640a(0x17d)](_0x539f6a['uflKo'],_0xefb9a);}await utilities['finalExecution'](_0x2008ea);});}module[a5_0x37d3e0(0x1bb)]=run;