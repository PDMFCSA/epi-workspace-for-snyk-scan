#!/usr/bin/env node
'use strict';const a5_0x211517=a5_0x20dc;function a5_0x20dc(_0x3319cd,_0x5d3b89){const _0x5a3b70=a5_0x5a3b();return a5_0x20dc=function(_0x20dc3a,_0xdaabed){_0x20dc3a=_0x20dc3a-0xf0;let _0x1f3d1b=_0x5a3b70[_0x20dc3a];return _0x1f3d1b;},a5_0x20dc(_0x3319cd,_0x5d3b89);}(function(_0x9b2600,_0x1624d1){const _0x14fe80=a5_0x20dc,_0x46eac7=_0x9b2600();while(!![]){try{const _0x1b9a8d=-parseInt(_0x14fe80(0x166))/0x1+parseInt(_0x14fe80(0x143))/0x2*(parseInt(_0x14fe80(0x15a))/0x3)+-parseInt(_0x14fe80(0x138))/0x4*(parseInt(_0x14fe80(0x127))/0x5)+parseInt(_0x14fe80(0x12b))/0x6*(parseInt(_0x14fe80(0x101))/0x7)+-parseInt(_0x14fe80(0x174))/0x8+-parseInt(_0x14fe80(0x16b))/0x9+-parseInt(_0x14fe80(0x13c))/0xa*(-parseInt(_0x14fe80(0x126))/0xb);if(_0x1b9a8d===_0x1624d1)break;else _0x46eac7['push'](_0x46eac7['shift']());}catch(_0x7b31a){_0x46eac7['push'](_0x46eac7['shift']());}}}(a5_0x5a3b,0xf3999));const fs=require('fs'),path=require(a5_0x211517(0x131)),util=require(a5_0x211517(0x137)),logger=require(a5_0x211517(0x158))[a5_0x211517(0x11e)],{default:BrowserStackSetup}=require(a5_0x211517(0xfe)),helper=require(a5_0x211517(0xff)),utilities=require('../../helpers/utilities'),constants=require(a5_0x211517(0x100)),{parallelCucumberRun}=require(a5_0x211517(0x169)),TestHubHandler=require(a5_0x211517(0x15d)),testOpsHelper=require(a5_0x211517(0xf3)),chalk=require('chalk'),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require('../../helpers/performance/constants')[a5_0x211517(0x153)],BrowserstackCLI=require(a5_0x211517(0x144)),CLIUtils=require(a5_0x211517(0x161)),TestInfo=require('../v2/TestInfo');function a5_0x5a3b(){const _0x3384f1=['getTCGConfigFilePaths','stepsUndefined','setUserConfigPath','YyAFP','Xuaab','rCbIa','getUserWorkerCount','aAXjT','2355968aWeERf','launchBuild','format','stringify','bold','\x20scenarios','stepsSkipped','stepsFailed','true','kruhl','../../helpers/test-observability/utils','cyan','SDK_CLEANUP','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','\x20ambiguous','byTEk','stepsAmbiguous','env','join','isUndefined','then','../../helpers/BrowserStackSetup','../../helpers/helper','../utils/constants','196nUCVmn','BROWSERSTACK_CLI_BIN_SESSION_ID','processSuccess','setupTCGAuth','\x20passed','tmp','rmdirSync','JXgSp','start','sgIMy','\x20skipped','TbKOt','log','turboScaleUrl','testContextOptions','@playwright/test','initialize','assign','UOxEk','exports','steps','yellow','platforms','handleApp','isBrowserstackInfra','debug','finally','setBrowserstackConfig','\x20undefined','winstonLogger','parallelsPerPlatform','xKZAt','accessibilityOptions','Azgxu','testObservability','FRAMEWORKS','length','11znjrms','5uoiwgR','scenarios','BROWSERSTACK_TEST_OBSERVABILITY_YML','4|1|2|3|0','225102WmFiJa','qiRFF','argv','prepareCapabilities','skipSessionStatus','SDK_SETUP','path','\x20pending','mergeOutputFiles','getInstance','config','getErrorMessageFromResults','util','4606468FKFJAD','TWvgn','proxySettings','parseFormatters','23379540CLNVyQ','framework','****\x20RESULTS\x20****','FVNWK','stop','IQpZC','nFrsl','20hXrwDi','../v2/browserstackCLI','__isPlaywrightInstalled','scenariosFailed','dLJXx','ytDLu','getHubUrl','useW3C','Detected\x20Playwright\x20version\x20','push','binSessionId','bgWhite','end','PJOzx','PLAYWRIGHT','finalExecution','EVENTS','\x20for\x20cucumber-js\x20flow','EzVaj','red','ttvqD','../../helpers/logger','stepsPassed','103533EEkSPa','\x20failed','green','../../helpers/testhub/testhubHandler','bootstrap','GWazj','CUCUMBER','../v2/cliUtils','splice','HiVxR','removeDir','logLevel','969044VXLSTY','tmebg','setFrameworkDetail','../test-runner','ookYS','2885382FgUIOM'];a5_0x5a3b=function(){return _0x3384f1;};return a5_0x5a3b();}function printCucumberStats(_0x5d22a1){const _0x5ce3b9=a5_0x211517,_0x2c1aad={};_0x2c1aad[_0x5ce3b9(0x173)]=function(_0x149165,_0xd7caeb){return _0x149165>_0xd7caeb;},_0x2c1aad[_0x5ce3b9(0x141)]=function(_0x405cae,_0x40208c){return _0x405cae-_0x40208c;},_0x2c1aad[_0x5ce3b9(0xf2)]=function(_0x5b71fe,_0x305074){return _0x5b71fe>_0x305074;},_0x2c1aad[_0x5ce3b9(0x171)]=function(_0x3effb5,_0x1f6994){return _0x3effb5>_0x1f6994;},_0x2c1aad[_0x5ce3b9(0x16a)]=function(_0xee95c9,_0x14bb69){return _0xee95c9>_0x14bb69;},_0x2c1aad['YyAFP']=function(_0x5707b8,_0xe9b106){return _0x5707b8>_0xe9b106;},_0x2c1aad[_0x5ce3b9(0x150)]=function(_0x460abe,_0x473b3e){return _0x460abe+_0x473b3e;},_0x2c1aad['byTEk']=function(_0x2cab3b,_0x544d33){return _0x2cab3b+_0x544d33;},_0x2c1aad[_0x5ce3b9(0x108)]=function(_0x69be6e,_0x462e06){return _0x69be6e+_0x462e06;},_0x2c1aad[_0x5ce3b9(0x15f)]=function(_0x35e1e3,_0x425ac6){return _0x35e1e3+_0x425ac6;},_0x2c1aad[_0x5ce3b9(0x142)]=function(_0x5342ad,_0x4a81f6){return _0x5342ad+_0x4a81f6;},_0x2c1aad[_0x5ce3b9(0x10c)]=function(_0x2fa8f1,_0x1ba2fc){return _0x2fa8f1+_0x1ba2fc;},_0x2c1aad[_0x5ce3b9(0x13f)]=function(_0x4a57a9,_0x51ff83){return _0x4a57a9+_0x51ff83;},_0x2c1aad[_0x5ce3b9(0x122)]=function(_0x1bf299,_0x3bc9f1){return _0x1bf299===_0x3bc9f1;},_0x2c1aad[_0x5ce3b9(0x157)]=function(_0x4643f5,_0x52dee2){return _0x4643f5===_0x52dee2;},_0x2c1aad[_0x5ce3b9(0x155)]=_0x5ce3b9(0x13e);const _0x459e18=_0x2c1aad;let _0x236812=0x0;if(_0x459e18[_0x5ce3b9(0x157)](_0x5d22a1[_0x5ce3b9(0x125)],0x0))return _0x236812;return console['log'](chalk[_0x5ce3b9(0x178)][_0x5ce3b9(0x14e)](_0x459e18[_0x5ce3b9(0x155)])),_0x5d22a1['forEach'](_0x116dea=>{const _0x1f7793=_0x5ce3b9,_0x44a51a=_0x116dea[0x0],_0x5a1b12=_0x116dea[0x1];helper[_0x1f7793(0x119)]()&&console[_0x1f7793(0x10d)]('\x0a'+chalk[_0x1f7793(0x178)]['yellow'](''+helper['getPlatformName'](_0x44a51a)));const _0x169f65=_0x5a1b12[_0x1f7793(0x128)],_0x12ebb3=_0x5a1b12[_0x1f7793(0x115)],_0x332060=_0x5a1b12[_0x1f7793(0x146)],_0x4631fd=_0x5a1b12[_0x1f7793(0xf0)],_0x42adea=_0x5a1b12[_0x1f7793(0x159)],_0x538994=_0x5a1b12[_0x1f7793(0x17a)],_0x30a1e6=_0x5a1b12['stepsPending'],_0x25f68a=_0x5a1b12[_0x1f7793(0x16d)],_0x51ad23=_0x5a1b12['stepsUnknown'],_0x1b2429=_0x5a1b12[_0x1f7793(0xf9)],_0x4276b4=_0x5a1b12[_0x1f7793(0x103)];let _0x2d021b=_0x169f65+_0x1f7793(0x179);const _0x4214c0=_0x459e18[_0x1f7793(0x173)](_0x459e18['IQpZC'](_0x169f65,_0x332060),0x0)?_0x459e18[_0x1f7793(0x141)](_0x169f65,_0x332060):0x0;if(_0x459e18['kruhl'](_0x332060,0x0)&&_0x459e18[_0x1f7793(0x171)](_0x4214c0,0x0))_0x2d021b+='\x20('+chalk[_0x1f7793(0x178)][_0x1f7793(0x156)](_0x332060+_0x1f7793(0x15b))+',\x20'+chalk[_0x1f7793(0x178)][_0x1f7793(0x15c)](_0x4214c0+_0x1f7793(0x105))+')';else(_0x459e18[_0x1f7793(0x171)](_0x332060,0x0)||_0x459e18[_0x1f7793(0x173)](_0x4214c0,0x0))&&(_0x2d021b+=_0x459e18[_0x1f7793(0xf2)](_0x332060,0x0)?'\x20('+chalk[_0x1f7793(0x178)][_0x1f7793(0x156)](_0x332060+_0x1f7793(0x15b))+')':'\x20('+chalk[_0x1f7793(0x178)][_0x1f7793(0x15c)](_0x4214c0+_0x1f7793(0x105))+')');const _0x5431fe=_0x12ebb3+'\x20steps',_0x5c7b3d=[];_0x459e18[_0x1f7793(0x173)](_0x1b2429,0x0)&&_0x5c7b3d[_0x1f7793(0x14c)](''+chalk['bold']['red'](_0x1b2429+_0x1f7793(0xf7)));_0x459e18['kruhl'](_0x4631fd,0x0)&&_0x5c7b3d[_0x1f7793(0x14c)](''+chalk[_0x1f7793(0x178)][_0x1f7793(0x156)](_0x4631fd+_0x1f7793(0x15b)));_0x459e18[_0x1f7793(0x173)](_0x42adea,0x0)&&_0x5c7b3d[_0x1f7793(0x14c)](''+chalk['bold'][_0x1f7793(0x15c)](_0x42adea+_0x1f7793(0x105)));_0x459e18[_0x1f7793(0xf2)](_0x30a1e6,0x0)&&_0x5c7b3d[_0x1f7793(0x14c)](''+chalk[_0x1f7793(0x178)][_0x1f7793(0x116)](_0x30a1e6+_0x1f7793(0x132)));_0x459e18[_0x1f7793(0x173)](_0x538994,0x0)&&_0x5c7b3d[_0x1f7793(0x14c)](''+chalk[_0x1f7793(0x178)][_0x1f7793(0xf4)](_0x538994+_0x1f7793(0x10b)));_0x459e18[_0x1f7793(0x16a)](_0x25f68a,0x0)&&_0x5c7b3d[_0x1f7793(0x14c)](''+chalk[_0x1f7793(0x178)][_0x1f7793(0x116)](_0x25f68a+_0x1f7793(0x11d)));_0x459e18[_0x1f7793(0x16f)](_0x51ad23,0x0)&&_0x5c7b3d[_0x1f7793(0x14c)](''+chalk[_0x1f7793(0x178)][_0x1f7793(0x116)](_0x51ad23+'\x20skipped'));const _0x5b4e14=_0x459e18[_0x1f7793(0x150)](_0x459e18[_0x1f7793(0xf8)](_0x459e18[_0x1f7793(0x108)](_0x5431fe,'('),_0x5c7b3d[_0x1f7793(0xfb)](',\x20')),')');console[_0x1f7793(0x10d)](_0x459e18['GWazj'](_0x459e18[_0x1f7793(0x142)](_0x459e18[_0x1f7793(0x10c)](_0x459e18[_0x1f7793(0x13f)]('\x0a',_0x2d021b),'\x0a'),_0x5b4e14),'\x0a')),_0x459e18['Azgxu'](_0x4276b4,![])&&(_0x236812=0x1);}),_0x236812;}async function run(_0x4328ad,_0x32d9d2,_0x17cb8d){const _0x550f80=a5_0x211517,_0x268d13={'TWvgn':function(_0x5df23b,_0x34094d){return _0x5df23b(_0x34094d);},'sgIMy':function(_0x11aa4b,_0x58df1c){return _0x11aa4b>_0x58df1c;},'dLJXx':'Generating\x20consolidated\x20report...','EPeXb':'Removing\x20tmp\x20directory\x20created\x20for\x20reports','Xuaab':'cucumber','ytDLu':'error\x20removing\x20tcg\x20config\x20file','tmebg':_0x550f80(0x110),'lHNPp':_0x550f80(0x12a),'ERTxB':_0x550f80(0x106),'HiVxR':function(_0x556046,_0x3a658a){return _0x556046-_0x3a658a;},'gQAkY':function(_0x41cc62,_0x51f8ce){return _0x41cc62>=_0x51f8ce;},'xKZAt':function(_0xdbad1,_0x3e8127){return _0xdbad1!=_0x3e8127;},'UOxEk':_0x550f80(0xf1),'qiRFF':function(_0x5e3bb0,_0x18d8da,_0x494eee,_0x439a68,_0x53eb7a,_0x5f32b1){return _0x5e3bb0(_0x18d8da,_0x494eee,_0x439a68,_0x53eb7a,_0x5f32b1);}},_0x5295b8=helper['getPackageVersion'](_0x268d13[_0x550f80(0x167)]);let _0x3e2951=constants[_0x550f80(0x124)][_0x550f80(0x160)];global[_0x550f80(0x145)]=!!_0x5295b8,await _0x17cb8d[_0x550f80(0x111)](_0x4328ad);if(_0x5295b8){const _0x341b44=_0x268d13['lHNPp']['split']('|');let _0x39edbf=0x0;while(!![]){switch(_0x341b44[_0x39edbf++]){case'0':await BrowserstackCLI[_0x550f80(0x134)]()[_0x550f80(0x15e)]();continue;case'1':logger['debug'](_0x550f80(0x14b)+_0x5295b8+_0x550f80(0x154));continue;case'2':CLIUtils[_0x550f80(0x168)](constants[_0x550f80(0x124)]['CUCUMBER'],_0x3e2951);continue;case'3':BrowserstackCLI[_0x550f80(0x134)]()[_0x550f80(0x11c)](_0x17cb8d[_0x550f80(0x135)],_0x17cb8d['cliConfig']);continue;case'4':_0x3e2951=constants[_0x550f80(0x124)][_0x550f80(0x151)];continue;}break;}}BrowserstackCLI[_0x550f80(0x134)]()['binSessionId']&&(process[_0x550f80(0xfa)][_0x550f80(0x102)]=BrowserstackCLI['getInstance']()[_0x550f80(0x14d)]);helper[_0x550f80(0x16e)](_0x17cb8d[_0x550f80(0x13d)],_0x4328ad);!helper[_0x550f80(0x119)]()&&await _0x17cb8d[_0x550f80(0x104)]();await helper[_0x550f80(0x118)](_0x17cb8d[_0x550f80(0x135)]);const _0x55de5a=helper[_0x550f80(0x14a)](_0x17cb8d[_0x550f80(0x135)]);!helper[_0x550f80(0xfc)](_0x17cb8d[_0x550f80(0x135)][_0x550f80(0x121)])&&(process[_0x550f80(0xfa)]['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON[_0x550f80(0x177)](_0x17cb8d[_0x550f80(0x135)][_0x550f80(0x121)]));if(!BrowserstackCLI[_0x550f80(0x134)]()['isRunning']()){const _0x4dc238=await TestHubHandler[_0x550f80(0x175)](constants[_0x550f80(0x124)][_0x550f80(0x160)],_0x17cb8d);}let _0x5c79b7=[];if(!helper[_0x550f80(0x119)]()){const _0x118f0e={};_0x118f0e[_0x550f80(0x117)]=[],_0x5c79b7=helper[_0x550f80(0x12e)](Object[_0x550f80(0x112)]({},_0x17cb8d[_0x550f80(0x135)],_0x118f0e),_0x55de5a,constants[_0x550f80(0x124)][_0x550f80(0x160)]);}else _0x5c79b7=helper[_0x550f80(0x12e)](_0x17cb8d[_0x550f80(0x135)],_0x55de5a,constants['FRAMEWORKS'][_0x550f80(0x160)]);if(!_0x17cb8d['config'])return;const _0x24f43d=_0x17cb8d[_0x550f80(0x135)][_0x550f80(0x11f)]||helper[_0x550f80(0x172)](_0x4328ad,_0x32d9d2,_0x17cb8d['config'],constants[_0x550f80(0x124)][_0x550f80(0x160)])||0x1,_0x9cace1={'server':helper[_0x550f80(0x149)](_0x17cb8d[_0x550f80(0x135)]),'proxySettings':_0x17cb8d[_0x550f80(0x135)][_0x550f80(0x13a)],'maxWorkers':_0x24f43d,'browserStackLogLevel':_0x17cb8d[_0x550f80(0x135)][_0x550f80(0x165)],'skipSessionName':_0x17cb8d[_0x550f80(0x135)][_0x550f80(0x10f)]['skipSessionName'],'skipSessionStatus':_0x17cb8d['config'][_0x550f80(0x10f)][_0x550f80(0x12f)],'turboScaleUrl':_0x17cb8d['config'][_0x550f80(0x10e)]},_0x3e82f3=process[_0x550f80(0x12d)],[_0x1119a8,_0x379117]=helper[_0x550f80(0x13b)](_0x3e82f3),_0x56410f=path['join'](process['cwd'](),_0x268d13['ERTxB']);if(_0x268d13[_0x550f80(0x10a)](_0x379117[_0x550f80(0x125)],0x0)){helper['createDir'](_0x56410f);for(let _0x490948=_0x268d13[_0x550f80(0x163)](_0x1119a8[_0x550f80(0x125)],0x1);_0x268d13['gQAkY'](_0x490948,0x0);_0x490948--){_0x3e82f3[_0x550f80(0x162)](_0x1119a8[_0x490948],0x2);}}_0x268d13[_0x550f80(0x120)](_0x17cb8d[_0x550f80(0x135)][_0x550f80(0x123)],null)?process[_0x550f80(0xfa)][_0x550f80(0x129)]=_0x17cb8d[_0x550f80(0x135)][_0x550f80(0x123)]:process['env'][_0x550f80(0x129)]=_0x268d13[_0x550f80(0x113)];PerformanceTester[_0x550f80(0x14f)](PerformanceEvents[_0x550f80(0x130)]);let _0x1d652a;_0x268d13[_0x550f80(0x12c)](parallelCucumberRun,_0x5c79b7,_0x9cace1,_0x17cb8d['config'],_0x3e82f3,_0x379117)[_0x550f80(0xfd)](async _0x3e828c=>{const _0x404a93=_0x550f80;PerformanceTester[_0x404a93(0x109)](PerformanceEvents[_0x404a93(0xf5)]),_0x1d652a=_0x3e828c;const _0x9dfe70=_0x268d13[_0x404a93(0x139)](printCucumberStats,_0x3e828c);process['exitCode']=_0x9dfe70,_0x268d13[_0x404a93(0x10a)](_0x379117[_0x404a93(0x125)],0x0)&&(logger['debug'](_0x268d13[_0x404a93(0x147)]),helper[_0x404a93(0x133)](_0x56410f,_0x379117),logger['debug'](_0x268d13['EPeXb']),helper[_0x404a93(0x164)](_0x56410f));})[_0x550f80(0x11b)](async()=>{const _0x2526ec=_0x550f80;PerformanceTester['start'](PerformanceEvents[_0x2526ec(0xf5)]),_0x17cb8d['errorMessage']=helper[_0x2526ec(0x136)](_0x1d652a,_0x268d13[_0x2526ec(0x170)]),testOpsHelper['printBuildLink']();try{await TestHubHandler[_0x2526ec(0x140)](),await BrowserstackCLI[_0x2526ec(0x134)]()[_0x2526ec(0x140)]();}catch(_0x80dc3f){logger[_0x2526ec(0x11a)](_0x2526ec(0xf6)+util[_0x2526ec(0x176)](_0x80dc3f));}try{const {browserstackFolderPath:_0x529da3,tcgConfigPath:_0x1ee1be}=helper[_0x2526ec(0x16c)]();fs['unlinkSync'](_0x1ee1be),fs[_0x2526ec(0x107)](_0x529da3);}catch(_0x523426){logger['debug'](_0x268d13[_0x2526ec(0x148)],_0x523426);}await utilities[_0x2526ec(0x152)](_0x17cb8d);});}module[a5_0x211517(0x114)]=run;