#!/usr/bin/env node
'use strict';const a5_0xa70bfa=a5_0x5037;(function(_0x36081a,_0x2ac6d0){const _0x384983=a5_0x5037,_0x130e6a=_0x36081a();while(!![]){try{const _0x200c62=-parseInt(_0x384983(0x1a9))/0x1*(parseInt(_0x384983(0x1a7))/0x2)+-parseInt(_0x384983(0x158))/0x3*(-parseInt(_0x384983(0x1af))/0x4)+parseInt(_0x384983(0x193))/0x5+parseInt(_0x384983(0x19d))/0x6+-parseInt(_0x384983(0x163))/0x7*(-parseInt(_0x384983(0x152))/0x8)+parseInt(_0x384983(0x17a))/0x9*(parseInt(_0x384983(0x1b8))/0xa)+parseInt(_0x384983(0x168))/0xb*(-parseInt(_0x384983(0x16b))/0xc);if(_0x200c62===_0x2ac6d0)break;else _0x130e6a['push'](_0x130e6a['shift']());}catch(_0x2b5f45){_0x130e6a['push'](_0x130e6a['shift']());}}}(a5_0x55d2,0xf22ac));function a5_0x5037(_0x28a45c,_0x779fac){const _0x55d25a=a5_0x55d2();return a5_0x5037=function(_0x503771,_0x3954a5){_0x503771=_0x503771-0x146;let _0x3e23f1=_0x55d25a[_0x503771];return _0x3e23f1;},a5_0x5037(_0x28a45c,_0x779fac);}const fs=require('fs'),path=require('path'),util=require(a5_0xa70bfa(0x173)),logger=require(a5_0xa70bfa(0x175))['winstonLogger'],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a5_0xa70bfa(0x162)),utilities=require(a5_0xa70bfa(0x191)),constants=require(a5_0xa70bfa(0x184)),{parallelCucumberRun}=require(a5_0xa70bfa(0x14b)),TestHubHandler=require('../../helpers/testhub/testhubHandler'),testOpsHelper=require('../../helpers/test-observability/utils'),chalk=require(a5_0xa70bfa(0x15b)),PerformanceTester=require(a5_0xa70bfa(0x180)),PerformanceEvents=require(a5_0xa70bfa(0x1b3))[a5_0xa70bfa(0x181)];function a5_0x55d2(){const _0x1b714e=['stepsUndefined','\x20skipped','util','julLo','../../helpers/logger','splice','handleApp','FzPBz','green','675oiqeNH','tmp','skipSessionStatus','turboScaleUrl','cucumber-js','\x20failed','../../helpers/performance/performance-tester','EVENTS','rmdirSync','format','../utils/constants','config','\x20scenarios','exports','UrwBw','getTCGConfigFilePaths','launchBuild','testObservability','lAIUg','parseFormatters','XCthX','AdJyY','stepsAmbiguous','../../helpers/utilities','losEk','4939380sGVnyD','LlIWg','bold','SDK_CLEANUP','WWgZY','processSuccess','testContextOptions','debug','BROWSERSTACK_TEST_OBSERVABILITY_YML','useW3C','3943410TjiDTh','finally','Removing\x20tmp\x20directory\x20created\x20for\x20reports','logLevel','getPlatformName','push','log','errorMessage','\x20steps','start','1108IpbTCz','initialize','892XtzajU','scenarios','bgWhite','FRAMEWORKS','true','getHubUrl','16yQteIB','stepsUnknown','cwd','exitCode','../../helpers/performance/constants','\x20passed','then','FqrfX','getUserWorkerCount','7970fANoIv','AJiEn','prepareCapabilities','setupTCGAuth','removeDir','\x20pending','../test-runner','stepsPassed','yellow','join','CcdZI','steps','stepsSkipped','12681624gbnvFz','createDir','IuYAQ','kXUNo','length','getErrorMessageFromResults','527064WLtiZW','accessibilityOptions','proxySettings','chalk','env','AmtBA','CUCUMBER','****\x20RESULTS\x20****','skipSessionName','red','../../helpers/helper','7XPiafB','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','PyAAp','BNxLt','argv','2506757IFjGKC','mergeOutputFiles','YoAXH','132MfyIGX','stepsPending','stepsFailed','\x20ambiguous','framework','parallelsPerPlatform'];a5_0x55d2=function(){return _0x1b714e;};return a5_0x55d2();}function printCucumberStats(_0x58347e){const _0x4fd260=a5_0xa70bfa,_0x440dfb={};_0x440dfb[_0x4fd260(0x178)]=function(_0x5f3b50,_0x5b4009){return _0x5f3b50>_0x5b4009;},_0x440dfb[_0x4fd260(0x18e)]=function(_0x39e2d6,_0x577820){return _0x39e2d6-_0x577820;},_0x440dfb[_0x4fd260(0x155)]=function(_0x52df5,_0xdc1327){return _0x52df5>_0xdc1327;},_0x440dfb['YoAXH']=function(_0x292fb0,_0x2c2d4d){return _0x292fb0>_0x2c2d4d;},_0x440dfb[_0x4fd260(0x14f)]=function(_0x454bb5,_0x5c4e6f){return _0x454bb5+_0x5c4e6f;},_0x440dfb['IuYAQ']=function(_0x3c2c61,_0x43f1e9){return _0x3c2c61+_0x43f1e9;},_0x440dfb['PyAAp']=function(_0x441c33,_0x3094d9){return _0x441c33+_0x3094d9;},_0x440dfb[_0x4fd260(0x192)]=function(_0x5aed36,_0x5b389a){return _0x5aed36+_0x5b389a;},_0x440dfb[_0x4fd260(0x146)]=function(_0x4e74c2,_0x2b6121){return _0x4e74c2===_0x2b6121;},_0x440dfb['wrkMB']=function(_0x36792a,_0x301bf0){return _0x36792a===_0x301bf0;},_0x440dfb[_0x4fd260(0x194)]=_0x4fd260(0x15f);const _0x341c60=_0x440dfb;let _0x374aa2=0x0;if(_0x341c60['wrkMB'](_0x58347e[_0x4fd260(0x156)],0x0))return _0x374aa2;return console[_0x4fd260(0x1a3)](chalk['bold'][_0x4fd260(0x1ab)](_0x341c60[_0x4fd260(0x194)])),_0x58347e['forEach'](_0x562823=>{const _0x23e263=_0x4fd260,_0x10220f=_0x562823[0x0],_0x35ca57=_0x562823[0x1];console[_0x23e263(0x1a3)]('\x0a'+chalk[_0x23e263(0x195)][_0x23e263(0x14d)](''+helper[_0x23e263(0x1a1)](_0x10220f)));const _0x19e649=_0x35ca57[_0x23e263(0x1aa)],_0x11e149=_0x35ca57[_0x23e263(0x150)],_0x48c423=_0x35ca57['scenariosFailed'],_0x1af310=_0x35ca57[_0x23e263(0x16d)],_0x8bee02=_0x35ca57[_0x23e263(0x14c)],_0x3bdbba=_0x35ca57[_0x23e263(0x151)],_0x5ba74b=_0x35ca57[_0x23e263(0x16c)],_0x5547f8=_0x35ca57[_0x23e263(0x171)],_0x7778ed=_0x35ca57[_0x23e263(0x1b0)],_0x20c893=_0x35ca57[_0x23e263(0x190)],_0xfd977=_0x35ca57[_0x23e263(0x198)];let _0x51390a=_0x19e649+_0x23e263(0x186);const _0x4cc97d=_0x341c60['FzPBz'](_0x341c60[_0x23e263(0x18e)](_0x19e649,_0x48c423),0x0)?_0x341c60['XCthX'](_0x19e649,_0x48c423):0x0;if(_0x341c60[_0x23e263(0x155)](_0x48c423,0x0)&&_0x341c60[_0x23e263(0x16a)](_0x4cc97d,0x0))_0x51390a+='\x20('+chalk[_0x23e263(0x195)][_0x23e263(0x161)](_0x48c423+_0x23e263(0x17f))+',\x20'+chalk[_0x23e263(0x195)]['green'](_0x4cc97d+_0x23e263(0x1b4))+')';else(_0x341c60[_0x23e263(0x16a)](_0x48c423,0x0)||_0x341c60[_0x23e263(0x16a)](_0x4cc97d,0x0))&&(_0x51390a+=_0x341c60[_0x23e263(0x178)](_0x48c423,0x0)?'\x20('+chalk[_0x23e263(0x195)][_0x23e263(0x161)](_0x48c423+_0x23e263(0x17f))+')':'\x20('+chalk[_0x23e263(0x195)][_0x23e263(0x179)](_0x4cc97d+_0x23e263(0x1b4))+')');const _0x539ee3=_0x11e149+_0x23e263(0x1a5),_0x1dcf4e=[];_0x341c60[_0x23e263(0x16a)](_0x20c893,0x0)&&_0x1dcf4e['push'](''+chalk[_0x23e263(0x195)][_0x23e263(0x161)](_0x20c893+_0x23e263(0x16e)));_0x341c60['kXUNo'](_0x1af310,0x0)&&_0x1dcf4e[_0x23e263(0x1a2)](''+chalk[_0x23e263(0x195)][_0x23e263(0x161)](_0x1af310+_0x23e263(0x17f)));_0x341c60['kXUNo'](_0x8bee02,0x0)&&_0x1dcf4e[_0x23e263(0x1a2)](''+chalk[_0x23e263(0x195)][_0x23e263(0x179)](_0x8bee02+_0x23e263(0x1b4)));_0x341c60['kXUNo'](_0x5ba74b,0x0)&&_0x1dcf4e[_0x23e263(0x1a2)](''+chalk[_0x23e263(0x195)]['yellow'](_0x5ba74b+_0x23e263(0x14a)));_0x341c60[_0x23e263(0x155)](_0x3bdbba,0x0)&&_0x1dcf4e[_0x23e263(0x1a2)](''+chalk[_0x23e263(0x195)]['cyan'](_0x3bdbba+_0x23e263(0x172)));_0x341c60['FzPBz'](_0x5547f8,0x0)&&_0x1dcf4e[_0x23e263(0x1a2)](''+chalk[_0x23e263(0x195)][_0x23e263(0x14d)](_0x5547f8+'\x20undefined'));_0x341c60[_0x23e263(0x16a)](_0x7778ed,0x0)&&_0x1dcf4e['push'](''+chalk['bold'][_0x23e263(0x14d)](_0x7778ed+_0x23e263(0x172)));const _0x816825=_0x341c60[_0x23e263(0x14f)](_0x341c60[_0x23e263(0x154)](_0x341c60[_0x23e263(0x14f)](_0x539ee3,'('),_0x1dcf4e['join'](',\x20')),')');console[_0x23e263(0x1a3)](_0x341c60[_0x23e263(0x154)](_0x341c60[_0x23e263(0x165)](_0x341c60[_0x23e263(0x192)](_0x341c60[_0x23e263(0x192)]('\x0a',_0x51390a),'\x0a'),_0x816825),'\x0a')),_0x341c60[_0x23e263(0x146)](_0xfd977,![])&&(_0x374aa2=0x1);}),_0x374aa2;}async function run(_0x154749,_0x3d3927){const _0x4089fe=a5_0xa70bfa,_0x47d73c={'dtHvP':function(_0x4cc7bf,_0x5c38dc){return _0x4cc7bf(_0x5c38dc);},'AdJyY':function(_0x3c6489,_0x14ee33){return _0x3c6489>_0x14ee33;},'FqrfX':'Generating\x20consolidated\x20report...','lAIUg':_0x4089fe(0x19f),'OuElX':'cucumber','WWgZY':'error\x20removing\x20tcg\x20config\x20file','julLo':_0x4089fe(0x17e),'AmtBA':_0x4089fe(0x17b),'BNxLt':function(_0x1266fe,_0x4623c6){return _0x1266fe>_0x4623c6;},'jpUpq':function(_0x4e617d,_0x294e6a){return _0x4e617d-_0x294e6a;},'GIgpf':function(_0x2225d6,_0x815457){return _0x2225d6>=_0x815457;},'uyqBL':function(_0x306b45,_0x13bd82){return _0x306b45!=_0x13bd82;},'UrwBw':_0x4089fe(0x1ad),'MhEVM':function(_0x230c4e,_0x343e29,_0x1be9b5,_0x5dfa80,_0x46eb01,_0x4ebdb3){return _0x230c4e(_0x343e29,_0x1be9b5,_0x5dfa80,_0x46eb01,_0x4ebdb3);}},_0x20bbf0=new BrowserStackSetup(_0x154749,_0x47d73c[_0x4089fe(0x174)]);await _0x20bbf0[_0x4089fe(0x1a8)](),helper['setUserConfigPath'](_0x20bbf0[_0x4089fe(0x16f)],_0x154749);!helper['isBrowserstackInfra']()&&await _0x20bbf0[_0x4089fe(0x148)]();await helper[_0x4089fe(0x177)](_0x20bbf0[_0x4089fe(0x185)]);const _0x217ee0=helper[_0x4089fe(0x19c)](_0x20bbf0['config']),_0x1aadbd=helper[_0x4089fe(0x147)](_0x20bbf0[_0x4089fe(0x185)],_0x217ee0,constants['FRAMEWORKS']['CUCUMBER']);if(!_0x20bbf0['config'])return;const _0x5288f0=_0x20bbf0[_0x4089fe(0x185)][_0x4089fe(0x170)]||helper[_0x4089fe(0x1b7)](_0x154749,_0x3d3927,_0x20bbf0['config'],constants[_0x4089fe(0x1ac)][_0x4089fe(0x15e)])||0x1,_0x48538c={'server':helper[_0x4089fe(0x1ae)](_0x20bbf0[_0x4089fe(0x185)]),'proxySettings':_0x20bbf0['config'][_0x4089fe(0x15a)],'maxWorkers':_0x5288f0,'browserStackLogLevel':_0x20bbf0['config'][_0x4089fe(0x1a0)],'skipSessionName':_0x20bbf0[_0x4089fe(0x185)][_0x4089fe(0x199)][_0x4089fe(0x160)],'skipSessionStatus':_0x20bbf0['config'][_0x4089fe(0x199)][_0x4089fe(0x17c)],'turboScaleUrl':_0x20bbf0[_0x4089fe(0x185)][_0x4089fe(0x17d)]},_0x560939=process[_0x4089fe(0x167)],[_0x3ebafd,_0x1b6cf7]=helper[_0x4089fe(0x18d)](_0x560939),_0x93e08d=path[_0x4089fe(0x14e)](process[_0x4089fe(0x1b1)](),_0x47d73c[_0x4089fe(0x15d)]);if(_0x47d73c[_0x4089fe(0x166)](_0x1b6cf7[_0x4089fe(0x156)],0x0)){helper[_0x4089fe(0x153)](_0x93e08d);for(let _0x407e60=_0x47d73c['jpUpq'](_0x3ebafd[_0x4089fe(0x156)],0x1);_0x47d73c['GIgpf'](_0x407e60,0x0);_0x407e60--){_0x560939[_0x4089fe(0x176)](_0x3ebafd[_0x407e60],0x2);}}!helper['isUndefined'](_0x20bbf0[_0x4089fe(0x185)][_0x4089fe(0x159)])&&(process['env']['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON['stringify'](_0x20bbf0['config'][_0x4089fe(0x159)]));_0x47d73c['uyqBL'](_0x20bbf0[_0x4089fe(0x185)][_0x4089fe(0x18b)],null)?process[_0x4089fe(0x15c)]['BROWSERSTACK_TEST_OBSERVABILITY_YML']=_0x20bbf0[_0x4089fe(0x185)][_0x4089fe(0x18b)]:process['env'][_0x4089fe(0x19b)]=_0x47d73c[_0x4089fe(0x188)];const _0x2ed2ff=await TestHubHandler[_0x4089fe(0x18a)](constants[_0x4089fe(0x1ac)]['CUCUMBER'],_0x20bbf0);PerformanceTester['end'](PerformanceEvents['SDK_SETUP']);let _0x380df6;_0x47d73c['MhEVM'](parallelCucumberRun,_0x1aadbd,_0x48538c,_0x20bbf0[_0x4089fe(0x185)],_0x560939,_0x1b6cf7)[_0x4089fe(0x1b5)](async _0x5adcc8=>{const _0x503121=_0x4089fe;PerformanceTester[_0x503121(0x1a6)](PerformanceEvents[_0x503121(0x196)]),_0x380df6=_0x5adcc8;const _0x38b139=_0x47d73c['dtHvP'](printCucumberStats,_0x5adcc8);process[_0x503121(0x1b2)]=_0x38b139,_0x47d73c[_0x503121(0x18f)](_0x1b6cf7[_0x503121(0x156)],0x0)&&(logger['debug'](_0x47d73c[_0x503121(0x1b6)]),helper[_0x503121(0x169)](_0x93e08d,_0x1b6cf7),logger['debug'](_0x47d73c[_0x503121(0x18c)]),helper[_0x503121(0x149)](_0x93e08d));})[_0x4089fe(0x19e)](async()=>{const _0x29a1a0=_0x4089fe;PerformanceTester['start'](PerformanceEvents['SDK_CLEANUP']),_0x20bbf0[_0x29a1a0(0x1a4)]=helper[_0x29a1a0(0x157)](_0x380df6,_0x47d73c['OuElX']),testOpsHelper['printBuildLink']();try{await TestHubHandler['stop']();}catch(_0x270988){logger[_0x29a1a0(0x19a)](_0x29a1a0(0x164)+util[_0x29a1a0(0x183)](_0x270988));}try{const {browserstackFolderPath:_0xd28280,tcgConfigPath:_0x42094f}=helper[_0x29a1a0(0x189)]();fs['unlinkSync'](_0x42094f),fs[_0x29a1a0(0x182)](_0xd28280);}catch(_0x1912de){logger[_0x29a1a0(0x19a)](_0x47d73c[_0x29a1a0(0x197)],_0x1912de);}await utilities['finalExecution'](_0x20bbf0);});}module[a5_0xa70bfa(0x187)]=run;