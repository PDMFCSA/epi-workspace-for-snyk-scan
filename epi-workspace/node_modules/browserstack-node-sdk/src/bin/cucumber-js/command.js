#!/usr/bin/env node
'use strict';const a5_0xac4392=a5_0x17ec;(function(_0x37f03d,_0x501efc){const _0x1952c0=a5_0x17ec,_0x3077ca=_0x37f03d();while(!![]){try{const _0x34a0cb=parseInt(_0x1952c0(0x15c))/0x1*(parseInt(_0x1952c0(0xf1))/0x2)+-parseInt(_0x1952c0(0x11c))/0x3+-parseInt(_0x1952c0(0x11a))/0x4+parseInt(_0x1952c0(0x148))/0x5+parseInt(_0x1952c0(0x131))/0x6+-parseInt(_0x1952c0(0x125))/0x7*(-parseInt(_0x1952c0(0x163))/0x8)+parseInt(_0x1952c0(0x164))/0x9*(-parseInt(_0x1952c0(0x110))/0xa);if(_0x34a0cb===_0x501efc)break;else _0x3077ca['push'](_0x3077ca['shift']());}catch(_0x1336f0){_0x3077ca['push'](_0x3077ca['shift']());}}}(a5_0x599c,0x77afd));function a5_0x599c(){const _0x1ad9c4=['rmdirSync','CMdxP','BROWSERSTACK_TEST_OBSERVABILITY_YML','\x20failed','nWLex','../../helpers/helper','createDir','useW3C','log','exports','accessibilityOptions','50zrUimV','LYzxW','stepsUndefined','finalExecution','bold','util','\x20scenarios','tOzyq','launchBuild','stop','1749408lmybuk','cwd','1275156HfQrhJ','removeDir','thLFX','bootstrap','zDTLC','\x20ambiguous','../utils/constants','handleApp','@playwright/test','42LBZtVB','setFrameworkDetail','kdNuf','error\x20removing\x20tcg\x20config\x20file','parallelsPerPlatform','assign','tmp','OsEjY','stringify','stepsPassed','initialize','argv','2352672MricAd','logLevel','viwRQ','Generating\x20consolidated\x20report...','TXowI','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','../../helpers/test-observability/utils','path','binSessionId','Removing\x20tmp\x20directory\x20created\x20for\x20reports','stepsUnknown','getUserWorkerCount','testObservability','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','stepsFailed','Detected\x20Playwright\x20version\x20','\x20pending','getPlatformName','../v2/TestInfo','getInstance','length','../../helpers/BrowserStackSetup','CwqwO','3652700vOnaqn','\x20passed','mergeOutputFiles','FRAMEWORKS','red','then','Luinl','\x20skipped','CUCUMBER','dFQVD','swmjK','isBrowserstackInfra','VyCvm','cliConfig','isUndefined','start','yellow','RZJuw','bWfAd','end','12458fxYGYI','getErrorMessageFromResults','../v2/cliUtils','skipSessionStatus','forEach','TdLLN','bgWhite','246184rImXeh','299583JxUJfa','IALYk','1|0|4|3|2','exitCode','SDK_SETUP','getTCGConfigFilePaths','EVENTS','setBrowserstackConfig','KPpTY','iDKKL','debug','green','parseFormatters','****\x20RESULTS\x20****','KLDuD','\x20undefined','PLAYWRIGHT','cyan','config','platforms','unlinkSync','testContextOptions','skipSessionName','34NqtkeU','../../helpers/performance/performance-tester','AKJlU','processSuccess','join','true','setUserConfigPath','prepareCapabilities','../../helpers/testhub/testhubHandler','SDK_CLEANUP','PtBKv','ozsWG','env','PbUNY','../v2/browserstackCLI','stepsSkipped','push','split','scenarios','proxySettings'];a5_0x599c=function(){return _0x1ad9c4;};return a5_0x599c();}function a5_0x17ec(_0x309064,_0x40185f){const _0x599cd6=a5_0x599c();return a5_0x17ec=function(_0x17ec73,_0x5a6403){_0x17ec73=_0x17ec73-0xe5;let _0x5695e0=_0x599cd6[_0x17ec73];return _0x5695e0;},a5_0x17ec(_0x309064,_0x40185f);}const fs=require('fs'),path=require(a5_0xac4392(0x138)),util=require(a5_0xac4392(0x115)),logger=require('../../helpers/logger')['winstonLogger'],{default:BrowserStackSetup}=require(a5_0xac4392(0x146)),helper=require(a5_0xac4392(0x10a)),utilities=require('../../helpers/utilities'),constants=require(a5_0xac4392(0x122)),{parallelCucumberRun}=require('../test-runner'),TestHubHandler=require(a5_0xac4392(0xf9)),testOpsHelper=require(a5_0xac4392(0x137)),chalk=require('chalk'),PerformanceTester=require(a5_0xac4392(0xf2)),PerformanceEvents=require('../../helpers/performance/constants')[a5_0xac4392(0x16a)],BrowserstackCLI=require(a5_0xac4392(0xff)),CLIUtils=require(a5_0xac4392(0x15e)),TestInfo=require(a5_0xac4392(0x143));function printCucumberStats(_0x516666){const _0x59372e=a5_0xac4392,_0x322aa8={};_0x322aa8[_0x59372e(0x14e)]=function(_0x3585a3,_0x11e496){return _0x3585a3>_0x11e496;},_0x322aa8['tOzyq']=function(_0x29469f,_0x4a8eda){return _0x29469f-_0x4a8eda;},_0x322aa8[_0x59372e(0x165)]=function(_0x2fe8f5,_0x276f0b){return _0x2fe8f5-_0x276f0b;},_0x322aa8[_0x59372e(0xe8)]=function(_0x26d556,_0x5a2e97){return _0x26d556>_0x5a2e97;},_0x322aa8[_0x59372e(0xfc)]=function(_0x538d80,_0x81896f){return _0x538d80>_0x81896f;},_0x322aa8[_0x59372e(0x16c)]=function(_0x13bc16,_0x517a70){return _0x13bc16>_0x517a70;},_0x322aa8['VyCvm']=function(_0x5759e7,_0x3fc336){return _0x5759e7>_0x3fc336;},_0x322aa8['CMdxP']=function(_0x4766f9,_0x5760cb){return _0x4766f9>_0x5760cb;},_0x322aa8[_0x59372e(0x11e)]=function(_0x46b01e,_0x13b35c){return _0x46b01e+_0x13b35c;},_0x322aa8['PbUNY']=function(_0x303c1d,_0x1f824c){return _0x303c1d+_0x1f824c;},_0x322aa8['PtBKv']=function(_0x49d5da,_0x523eed){return _0x49d5da+_0x523eed;},_0x322aa8[_0x59372e(0x109)]=function(_0x472eba,_0xfdb3d4){return _0x472eba+_0xfdb3d4;},_0x322aa8['LYzxW']=function(_0x580755,_0x56ac6a){return _0x580755+_0x56ac6a;},_0x322aa8[_0x59372e(0xf3)]=function(_0x3c8dd4,_0x51d4fe){return _0x3c8dd4===_0x51d4fe;},_0x322aa8[_0x59372e(0x12c)]=function(_0x55cfd3,_0xd5f953){return _0x55cfd3===_0xd5f953;},_0x322aa8['viwRQ']=_0x59372e(0xe7);const _0xbddbb4=_0x322aa8;let _0x51a0a2=0x0;if(_0xbddbb4[_0x59372e(0x12c)](_0x516666[_0x59372e(0x145)],0x0))return _0x51a0a2;return console[_0x59372e(0x10d)](chalk[_0x59372e(0x114)][_0x59372e(0x162)](_0xbddbb4[_0x59372e(0x133)])),_0x516666[_0x59372e(0x160)](_0x4cec8e=>{const _0x1ed2f0=_0x59372e,_0xe236f0=_0x4cec8e[0x0],_0x63278e=_0x4cec8e[0x1];helper['isBrowserstackInfra']()&&console[_0x1ed2f0(0x10d)]('\x0a'+chalk[_0x1ed2f0(0x114)][_0x1ed2f0(0x158)](''+helper[_0x1ed2f0(0x142)](_0xe236f0)));const _0x3cb1cc=_0x63278e[_0x1ed2f0(0x103)],_0x17d49e=_0x63278e['steps'],_0x3a8011=_0x63278e['scenariosFailed'],_0x5a242c=_0x63278e[_0x1ed2f0(0x13f)],_0x1f0e0b=_0x63278e[_0x1ed2f0(0x12e)],_0xcd876a=_0x63278e[_0x1ed2f0(0x100)],_0x46ac41=_0x63278e['stepsPending'],_0x52d75a=_0x63278e[_0x1ed2f0(0x112)],_0x4993aa=_0x63278e[_0x1ed2f0(0x13b)],_0x30c066=_0x63278e['stepsAmbiguous'],_0x121b05=_0x63278e[_0x1ed2f0(0xf4)];let _0x46a8e4=_0x3cb1cc+_0x1ed2f0(0x116);const _0xd10f66=_0xbddbb4['Luinl'](_0xbddbb4[_0x1ed2f0(0x117)](_0x3cb1cc,_0x3a8011),0x0)?_0xbddbb4[_0x1ed2f0(0x165)](_0x3cb1cc,_0x3a8011):0x0;if(_0xbddbb4[_0x1ed2f0(0x14e)](_0x3a8011,0x0)&&_0xbddbb4[_0x1ed2f0(0x14e)](_0xd10f66,0x0))_0x46a8e4+='\x20('+chalk[_0x1ed2f0(0x114)][_0x1ed2f0(0x14c)](_0x3a8011+'\x20failed')+',\x20'+chalk[_0x1ed2f0(0x114)]['green'](_0xd10f66+_0x1ed2f0(0x149))+')';else(_0xbddbb4[_0x1ed2f0(0x14e)](_0x3a8011,0x0)||_0xbddbb4['KLDuD'](_0xd10f66,0x0))&&(_0x46a8e4+=_0xbddbb4[_0x1ed2f0(0xfc)](_0x3a8011,0x0)?'\x20('+chalk[_0x1ed2f0(0x114)][_0x1ed2f0(0x14c)](_0x3a8011+_0x1ed2f0(0x108))+')':'\x20('+chalk['bold'][_0x1ed2f0(0xe5)](_0xd10f66+_0x1ed2f0(0x149))+')');const _0x347f2b=_0x17d49e+'\x20steps',_0x8f0642=[];_0xbddbb4[_0x1ed2f0(0xe8)](_0x30c066,0x0)&&_0x8f0642[_0x1ed2f0(0x101)](''+chalk[_0x1ed2f0(0x114)][_0x1ed2f0(0x14c)](_0x30c066+_0x1ed2f0(0x121)));_0xbddbb4[_0x1ed2f0(0x16c)](_0x5a242c,0x0)&&_0x8f0642[_0x1ed2f0(0x101)](''+chalk[_0x1ed2f0(0x114)][_0x1ed2f0(0x14c)](_0x5a242c+_0x1ed2f0(0x108)));_0xbddbb4['KLDuD'](_0x1f0e0b,0x0)&&_0x8f0642[_0x1ed2f0(0x101)](''+chalk[_0x1ed2f0(0x114)]['green'](_0x1f0e0b+_0x1ed2f0(0x149)));_0xbddbb4[_0x1ed2f0(0x14e)](_0x46ac41,0x0)&&_0x8f0642[_0x1ed2f0(0x101)](''+chalk['bold']['yellow'](_0x46ac41+_0x1ed2f0(0x141)));_0xbddbb4[_0x1ed2f0(0x154)](_0xcd876a,0x0)&&_0x8f0642[_0x1ed2f0(0x101)](''+chalk['bold'][_0x1ed2f0(0xeb)](_0xcd876a+_0x1ed2f0(0x14f)));_0xbddbb4[_0x1ed2f0(0x106)](_0x52d75a,0x0)&&_0x8f0642[_0x1ed2f0(0x101)](''+chalk['bold'][_0x1ed2f0(0x158)](_0x52d75a+_0x1ed2f0(0xe9)));_0xbddbb4[_0x1ed2f0(0x106)](_0x4993aa,0x0)&&_0x8f0642[_0x1ed2f0(0x101)](''+chalk[_0x1ed2f0(0x114)]['yellow'](_0x4993aa+_0x1ed2f0(0x14f)));const _0x4050f9=_0xbddbb4['thLFX'](_0xbddbb4[_0x1ed2f0(0x11e)](_0xbddbb4['PbUNY'](_0x347f2b,'('),_0x8f0642['join'](',\x20')),')');console['log'](_0xbddbb4[_0x1ed2f0(0xfe)](_0xbddbb4[_0x1ed2f0(0xfb)](_0xbddbb4[_0x1ed2f0(0x109)](_0xbddbb4[_0x1ed2f0(0x111)]('\x0a',_0x46a8e4),'\x0a'),_0x4050f9),'\x0a')),_0xbddbb4[_0x1ed2f0(0xf3)](_0x121b05,![])&&(_0x51a0a2=0x1);}),_0x51a0a2;}async function run(_0xa18d33,_0x2018b6,_0x3107d6){const _0x19f584=a5_0xac4392,_0x5adb9d={'iDKKL':function(_0x46b230,_0x47ce70){return _0x46b230(_0x47ce70);},'bWfAd':function(_0x3c99d8,_0x30425d){return _0x3c99d8>_0x30425d;},'TXowI':_0x19f584(0x134),'xrbAE':_0x19f584(0x13a),'CwqwO':'cucumber','kdNuf':_0x19f584(0x128),'swmjK':_0x19f584(0x124),'lxfrB':_0x19f584(0x166),'QLyuM':_0x19f584(0x12b),'viRaz':function(_0x3bf184,_0x211ac0){return _0x3bf184>_0x211ac0;},'vctnR':function(_0x3de738,_0x485d85){return _0x3de738-_0x485d85;},'RZJuw':function(_0x4dee6e,_0x4b9079){return _0x4dee6e>=_0x4b9079;},'TdLLN':function(_0x212f58,_0x426a89){return _0x212f58!=_0x426a89;},'zDTLC':_0x19f584(0xf6),'dFQVD':function(_0x3e6554,_0xada203,_0x5e3b20,_0x104d11,_0x8106df,_0x349636){return _0x3e6554(_0xada203,_0x5e3b20,_0x104d11,_0x8106df,_0x349636);}},_0x53e3cf=helper['getPackageVersion'](_0x5adb9d[_0x19f584(0x152)]);let _0x42ae5b=constants[_0x19f584(0x14b)][_0x19f584(0x150)];global['__isPlaywrightInstalled']=!!_0x53e3cf,await _0x3107d6[_0x19f584(0x12f)](_0xa18d33);if(_0x53e3cf){const _0xaf21f6=_0x5adb9d['lxfrB'][_0x19f584(0x102)]('|');let _0x423f65=0x0;while(!![]){switch(_0xaf21f6[_0x423f65++]){case'0':logger[_0x19f584(0x16e)](_0x19f584(0x140)+_0x53e3cf+'\x20for\x20cucumber-js\x20flow');continue;case'1':_0x42ae5b=constants[_0x19f584(0x14b)][_0x19f584(0xea)];continue;case'2':await BrowserstackCLI[_0x19f584(0x144)]()[_0x19f584(0x11f)]();continue;case'3':BrowserstackCLI[_0x19f584(0x144)]()[_0x19f584(0x16b)](_0x3107d6['config'],_0x3107d6[_0x19f584(0x155)]);continue;case'4':CLIUtils[_0x19f584(0x126)](constants['FRAMEWORKS'][_0x19f584(0x150)],_0x42ae5b);continue;}break;}}BrowserstackCLI['getInstance']()[_0x19f584(0x139)]&&(process['env']['BROWSERSTACK_CLI_BIN_SESSION_ID']=BrowserstackCLI['getInstance']()[_0x19f584(0x139)]);helper[_0x19f584(0xf7)](_0x3107d6['framework'],_0xa18d33);!helper[_0x19f584(0x153)]()&&await _0x3107d6['setupTCGAuth']();await helper[_0x19f584(0x123)](_0x3107d6[_0x19f584(0xec)]);const _0x4120c8=helper[_0x19f584(0x10c)](_0x3107d6[_0x19f584(0xec)]);!helper[_0x19f584(0x156)](_0x3107d6[_0x19f584(0xec)][_0x19f584(0x10f)])&&(process[_0x19f584(0xfd)][_0x19f584(0x13e)]=JSON[_0x19f584(0x12d)](_0x3107d6[_0x19f584(0xec)][_0x19f584(0x10f)]));if(!BrowserstackCLI['getInstance']()['isRunning']()){const _0x1d1244=await TestHubHandler[_0x19f584(0x118)](constants[_0x19f584(0x14b)][_0x19f584(0x150)],_0x3107d6);}let _0x5112c5=[];if(!helper[_0x19f584(0x153)]()){const _0x5e0a7b={};_0x5e0a7b[_0x19f584(0xed)]=[],_0x5112c5=helper[_0x19f584(0xf8)](Object[_0x19f584(0x12a)]({},_0x3107d6[_0x19f584(0xec)],_0x5e0a7b),_0x4120c8,constants[_0x19f584(0x14b)][_0x19f584(0x150)]);}else _0x5112c5=helper[_0x19f584(0xf8)](_0x3107d6[_0x19f584(0xec)],_0x4120c8,constants[_0x19f584(0x14b)][_0x19f584(0x150)]);if(!_0x3107d6['config'])return;const _0x3b6949=_0x3107d6[_0x19f584(0xec)][_0x19f584(0x129)]||helper[_0x19f584(0x13c)](_0xa18d33,_0x2018b6,_0x3107d6['config'],constants[_0x19f584(0x14b)][_0x19f584(0x150)])||0x1,_0x5f4ecf={'server':helper['getHubUrl'](_0x3107d6[_0x19f584(0xec)]),'proxySettings':_0x3107d6[_0x19f584(0xec)][_0x19f584(0x104)],'maxWorkers':_0x3b6949,'browserStackLogLevel':_0x3107d6[_0x19f584(0xec)][_0x19f584(0x132)],'skipSessionName':_0x3107d6['config'][_0x19f584(0xef)][_0x19f584(0xf0)],'skipSessionStatus':_0x3107d6[_0x19f584(0xec)]['testContextOptions'][_0x19f584(0x15f)],'turboScaleUrl':_0x3107d6[_0x19f584(0xec)]['turboScaleUrl']},_0x45ef18=process[_0x19f584(0x130)],[_0x5de545,_0x2632b8]=helper[_0x19f584(0xe6)](_0x45ef18),_0x5aa248=path[_0x19f584(0xf5)](process[_0x19f584(0x11b)](),_0x5adb9d['QLyuM']);if(_0x5adb9d['viRaz'](_0x2632b8[_0x19f584(0x145)],0x0)){helper[_0x19f584(0x10b)](_0x5aa248);for(let _0x257d32=_0x5adb9d['vctnR'](_0x5de545[_0x19f584(0x145)],0x1);_0x5adb9d[_0x19f584(0x159)](_0x257d32,0x0);_0x257d32--){_0x45ef18['splice'](_0x5de545[_0x257d32],0x2);}}_0x5adb9d[_0x19f584(0x161)](_0x3107d6[_0x19f584(0xec)][_0x19f584(0x13d)],null)?process[_0x19f584(0xfd)]['BROWSERSTACK_TEST_OBSERVABILITY_YML']=_0x3107d6[_0x19f584(0xec)][_0x19f584(0x13d)]:process[_0x19f584(0xfd)][_0x19f584(0x107)]=_0x5adb9d[_0x19f584(0x120)];PerformanceTester[_0x19f584(0x15b)](PerformanceEvents[_0x19f584(0x168)]);let _0xa7e365;_0x5adb9d[_0x19f584(0x151)](parallelCucumberRun,_0x5112c5,_0x5f4ecf,_0x3107d6[_0x19f584(0xec)],_0x45ef18,_0x2632b8)[_0x19f584(0x14d)](async _0x3a9024=>{const _0x120910=_0x19f584;PerformanceTester[_0x120910(0x157)](PerformanceEvents[_0x120910(0xfa)]),_0xa7e365=_0x3a9024;const _0x5c1041=_0x5adb9d[_0x120910(0x16d)](printCucumberStats,_0x3a9024);process[_0x120910(0x167)]=_0x5c1041,_0x5adb9d[_0x120910(0x15a)](_0x2632b8[_0x120910(0x145)],0x0)&&(logger['debug'](_0x5adb9d[_0x120910(0x135)]),helper[_0x120910(0x14a)](_0x5aa248,_0x2632b8),logger[_0x120910(0x16e)](_0x5adb9d['xrbAE']),helper[_0x120910(0x11d)](_0x5aa248));})['finally'](async()=>{const _0x219ad6=_0x19f584;PerformanceTester['start'](PerformanceEvents[_0x219ad6(0xfa)]),_0x3107d6['errorMessage']=helper[_0x219ad6(0x15d)](_0xa7e365,_0x5adb9d[_0x219ad6(0x147)]),testOpsHelper['printBuildLink']();try{await TestHubHandler[_0x219ad6(0x119)](),await BrowserstackCLI[_0x219ad6(0x144)]()[_0x219ad6(0x119)]();}catch(_0x39dca){logger['debug'](_0x219ad6(0x136)+util['format'](_0x39dca));}try{const {browserstackFolderPath:_0x5c4d81,tcgConfigPath:_0x5c594e}=helper[_0x219ad6(0x169)]();fs[_0x219ad6(0xee)](_0x5c594e),fs[_0x219ad6(0x105)](_0x5c4d81);}catch(_0x5820f3){logger[_0x219ad6(0x16e)](_0x5adb9d[_0x219ad6(0x127)],_0x5820f3);}await utilities[_0x219ad6(0x113)](_0x3107d6);});}module[a5_0xac4392(0x10e)]=run;