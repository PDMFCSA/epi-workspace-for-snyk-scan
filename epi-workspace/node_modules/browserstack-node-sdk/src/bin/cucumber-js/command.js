#!/usr/bin/env node
'use strict';function a5_0x5bbe(){const _0x136659=['KVwvl','24ToVKug','turboScaleUrl','isUndefined','SDK_CLEANUP','SfovS','setBrowserstackConfig','testContextOptions','config','argv','11828BzTWJD','../../helpers/utilities','bRXni','length','../utils/constants','stepsFailed','CUCUMBER','@playwright/test','start','binSessionId','\x20failed','../../helpers/helper','15324eqEQoI','1522325Bcikhx','50499WLqQup','jtvBZ','tPVvl','xFIsr','assign','stop','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','end','format','BROWSERSTACK_CLI_BIN_SESSION_ID','8470536mZvXgu','yellow','exports','steps','bold','\x20passed','BROWSERSTACK_TEST_OBSERVABILITY_YML','scenariosFailed','\x20skipped','stepsUnknown','processSuccess','../../helpers/logger','skipSessionStatus','\x20scenarios','6KPpHhQ','prepareCapabilities','__isPlaywrightInstalled','lWACB','setUserConfigPath','unlinkSync','stepsPassed','biCan','printBuildLink','getUserWorkerCount','stepsSkipped','ZPmfc','1730850ULlfjY','green','skcKu','TXQiG','../../helpers/performance/constants','../test-runner','mkHXN','../v2/TestInfo','90LiplEM','testObservability','scenarios','../v2/browserstackCLI','stepsAmbiguous','\x20undefined','exitCode','bgWhite','Detected\x20Playwright\x20version\x20','chalk','OwZAL','winstonLogger','Removing\x20tmp\x20directory\x20created\x20for\x20reports','EVENTS','split','push','MKdMQ','258561ayyDSL','TZweM','getErrorMessageFromResults','join','log','true','ebAhk','RoYFl','../v2/cliUtils','parallelsPerPlatform','bootstrap','finalExecution','219rWCKbe','isRunning','env','handleApp','debug','skipSessionName','getInstance','setFrameworkDetail','stepsPending','idJOL','qgHuP','rjMok','splice','removeDir','SDK_SETUP','IMLts','getPackageVersion','cwd','red','FRAMEWORKS','yXlQE','framework','cliConfig','260IqWobM','PLAYWRIGHT','then','SNbCa','finally','\x20for\x20cucumber-js\x20flow','platforms','path','mergeOutputFiles','stringify','isBrowserstackInfra','tmp','rlSto','3|4|2|0|1','initialize','../../helpers/test-observability/utils','mFXVE','createDir'];a5_0x5bbe=function(){return _0x136659;};return a5_0x5bbe();}const a5_0x347280=a5_0x3813;(function(_0x28fd6b,_0x494205){const _0x217ab5=a5_0x3813,_0x49d8cb=_0x28fd6b();while(!![]){try{const _0x41c8ee=parseInt(_0x217ab5(0x1cf))/0x1*(-parseInt(_0x217ab5(0x1aa))/0x2)+-parseInt(_0x217ab5(0x151))/0x3*(parseInt(_0x217ab5(0x184))/0x4)+parseInt(_0x217ab5(0x168))/0x5*(parseInt(_0x217ab5(0x190))/0x6)+-parseInt(_0x217ab5(0x191))/0x7*(-parseInt(_0x217ab5(0x17b))/0x8)+-parseInt(_0x217ab5(0x192))/0x9*(-parseInt(_0x217ab5(0x1be))/0xa)+-parseInt(_0x217ab5(0x1b6))/0xb+parseInt(_0x217ab5(0x19c))/0xc;if(_0x41c8ee===_0x494205)break;else _0x49d8cb['push'](_0x49d8cb['shift']());}catch(_0xf09d6){_0x49d8cb['push'](_0x49d8cb['shift']());}}}(a5_0x5bbe,0x5fe0c));function a5_0x3813(_0x421d84,_0x5d88a2){const _0x5bbe3b=a5_0x5bbe();return a5_0x3813=function(_0x3813dd,_0x5c0b62){_0x3813dd=_0x3813dd-0x14f;let _0x362e56=_0x5bbe3b[_0x3813dd];return _0x362e56;},a5_0x3813(_0x421d84,_0x5d88a2);}const fs=require('fs'),path=require(a5_0x347280(0x16f)),util=require('util'),logger=require(a5_0x347280(0x1a7))[a5_0x347280(0x1c9)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a5_0x347280(0x18f)),utilities=require(a5_0x347280(0x185)),constants=require(a5_0x347280(0x188)),{parallelCucumberRun}=require(a5_0x347280(0x1bb)),TestHubHandler=require('../../helpers/testhub/testhubHandler'),testOpsHelper=require(a5_0x347280(0x177)),chalk=require(a5_0x347280(0x1c7)),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require(a5_0x347280(0x1ba))[a5_0x347280(0x1cb)],BrowserstackCLI=require(a5_0x347280(0x1c1)),CLIUtils=require(a5_0x347280(0x1d7)),TestInfo=require(a5_0x347280(0x1bd));function printCucumberStats(_0x43b640){const _0x349c89=a5_0x347280,_0x459d61={};_0x459d61[_0x349c89(0x1b9)]=function(_0x4a471e,_0x1efc93){return _0x4a471e>_0x1efc93;},_0x459d61[_0x349c89(0x17f)]=function(_0x56c752,_0x12ade0){return _0x56c752-_0x12ade0;},_0x459d61[_0x349c89(0x160)]=function(_0x52ed50,_0x279b1b){return _0x52ed50-_0x279b1b;},_0x459d61['TZweM']=function(_0x3208f6,_0x3a138f){return _0x3208f6>_0x3a138f;},_0x459d61['lWACB']=function(_0x159e1e,_0x47dc8c){return _0x159e1e>_0x47dc8c;},_0x459d61[_0x349c89(0x1b5)]=function(_0x4c5dc4,_0x592fc1){return _0x4c5dc4>_0x592fc1;},_0x459d61[_0x349c89(0x17a)]=function(_0x657c9e,_0x41caa8){return _0x657c9e>_0x41caa8;},_0x459d61[_0x349c89(0x1c8)]=function(_0xeffc6b,_0x3dac19){return _0xeffc6b>_0x3dac19;},_0x459d61[_0x349c89(0x1b1)]=function(_0x2544cb,_0x25928e){return _0x2544cb>_0x25928e;},_0x459d61['rlSto']=function(_0x2febba,_0x3a3927){return _0x2febba+_0x3a3927;},_0x459d61['jtvBZ']=function(_0x4d249f,_0x2dba02){return _0x4d249f+_0x2dba02;},_0x459d61[_0x349c89(0x15a)]=function(_0x384438,_0x37f194){return _0x384438===_0x37f194;},_0x459d61['xFIsr']='****\x20RESULTS\x20****';const _0x32cf44=_0x459d61;let _0x44c757=0x0;if(_0x32cf44[_0x349c89(0x15a)](_0x43b640[_0x349c89(0x187)],0x0))return _0x44c757;return console[_0x349c89(0x1d3)](chalk[_0x349c89(0x1a0)][_0x349c89(0x1c5)](_0x32cf44[_0x349c89(0x195)])),_0x43b640['forEach'](_0x4b7bcb=>{const _0x347c82=_0x349c89,_0x1302b2=_0x4b7bcb[0x0],_0x2c1d51=_0x4b7bcb[0x1];helper[_0x347c82(0x172)]()&&console['log']('\x0a'+chalk[_0x347c82(0x1a0)][_0x347c82(0x19d)](''+helper['getPlatformName'](_0x1302b2)));const _0x6606e=_0x2c1d51[_0x347c82(0x1c0)],_0x27376a=_0x2c1d51[_0x347c82(0x19f)],_0x37edae=_0x2c1d51[_0x347c82(0x1a3)],_0x4ffb8d=_0x2c1d51[_0x347c82(0x189)],_0x2e2c5b=_0x2c1d51[_0x347c82(0x1b0)],_0x30e229=_0x2c1d51[_0x347c82(0x1b4)],_0x35fc6a=_0x2c1d51[_0x347c82(0x159)],_0x377fb6=_0x2c1d51['stepsUndefined'],_0x3d778e=_0x2c1d51[_0x347c82(0x1a5)],_0x3bcb4f=_0x2c1d51[_0x347c82(0x1c2)],_0x59d6f1=_0x2c1d51[_0x347c82(0x1a6)];let _0xd8c5fa=_0x6606e+_0x347c82(0x1a9);const _0x4823f5=_0x32cf44[_0x347c82(0x1b9)](_0x32cf44['SfovS'](_0x6606e,_0x37edae),0x0)?_0x32cf44['IMLts'](_0x6606e,_0x37edae):0x0;if(_0x32cf44['TZweM'](_0x37edae,0x0)&&_0x32cf44[_0x347c82(0x1ad)](_0x4823f5,0x0))_0xd8c5fa+='\x20('+chalk[_0x347c82(0x1a0)][_0x347c82(0x163)](_0x37edae+'\x20failed')+',\x20'+chalk['bold'][_0x347c82(0x1b7)](_0x4823f5+_0x347c82(0x1a1))+')';else(_0x32cf44[_0x347c82(0x1ad)](_0x37edae,0x0)||_0x32cf44[_0x347c82(0x1ad)](_0x4823f5,0x0))&&(_0xd8c5fa+=_0x32cf44[_0x347c82(0x1b5)](_0x37edae,0x0)?'\x20('+chalk[_0x347c82(0x1a0)][_0x347c82(0x163)](_0x37edae+_0x347c82(0x18e))+')':'\x20('+chalk['bold'][_0x347c82(0x1b7)](_0x4823f5+_0x347c82(0x1a1))+')');const _0x175724=_0x27376a+'\x20steps',_0x10cc35=[];_0x32cf44[_0x347c82(0x1ad)](_0x3bcb4f,0x0)&&_0x10cc35[_0x347c82(0x1cd)](''+chalk['bold'][_0x347c82(0x163)](_0x3bcb4f+'\x20ambiguous'));_0x32cf44[_0x347c82(0x1b9)](_0x4ffb8d,0x0)&&_0x10cc35[_0x347c82(0x1cd)](''+chalk[_0x347c82(0x1a0)][_0x347c82(0x163)](_0x4ffb8d+_0x347c82(0x18e)));_0x32cf44[_0x347c82(0x1d0)](_0x2e2c5b,0x0)&&_0x10cc35[_0x347c82(0x1cd)](''+chalk['bold'][_0x347c82(0x1b7)](_0x2e2c5b+'\x20passed'));_0x32cf44[_0x347c82(0x17a)](_0x35fc6a,0x0)&&_0x10cc35[_0x347c82(0x1cd)](''+chalk['bold'][_0x347c82(0x19d)](_0x35fc6a+'\x20pending'));_0x32cf44[_0x347c82(0x1b5)](_0x30e229,0x0)&&_0x10cc35[_0x347c82(0x1cd)](''+chalk['bold']['cyan'](_0x30e229+_0x347c82(0x1a4)));_0x32cf44[_0x347c82(0x1c8)](_0x377fb6,0x0)&&_0x10cc35[_0x347c82(0x1cd)](''+chalk['bold'][_0x347c82(0x19d)](_0x377fb6+_0x347c82(0x1c3)));_0x32cf44['biCan'](_0x3d778e,0x0)&&_0x10cc35[_0x347c82(0x1cd)](''+chalk['bold'][_0x347c82(0x19d)](_0x3d778e+'\x20skipped'));const _0x5d7d78=_0x32cf44[_0x347c82(0x174)](_0x32cf44[_0x347c82(0x174)](_0x32cf44[_0x347c82(0x174)](_0x175724,'('),_0x10cc35[_0x347c82(0x1d2)](',\x20')),')');console[_0x347c82(0x1d3)](_0x32cf44['rlSto'](_0x32cf44[_0x347c82(0x174)](_0x32cf44[_0x347c82(0x193)](_0x32cf44['jtvBZ']('\x0a',_0xd8c5fa),'\x0a'),_0x5d7d78),'\x0a')),_0x32cf44[_0x347c82(0x15a)](_0x59d6f1,![])&&(_0x44c757=0x1);}),_0x44c757;}async function run(_0x99b2f3,_0x38733f,_0x50d656){const _0x46ed9a=a5_0x347280,_0x15b4e4={'GNUyx':function(_0x47c3d1,_0x38c24d){return _0x47c3d1(_0x38c24d);},'MKdMQ':function(_0x5c505b,_0x5b76ed){return _0x5c505b>_0x5b76ed;},'qgHuP':'Generating\x20consolidated\x20report...','bRXni':_0x46ed9a(0x1ca),'skcKu':'cucumber','tPVvl':'error\x20removing\x20tcg\x20config\x20file','ebAhk':_0x46ed9a(0x18b),'rjMok':_0x46ed9a(0x175),'fjbig':_0x46ed9a(0x173),'RoYFl':function(_0x29d9db,_0x536287){return _0x29d9db>_0x536287;},'SNbCa':function(_0x145a4a,_0x12b7c7){return _0x145a4a-_0x12b7c7;},'mkHXN':function(_0xe86452,_0x4a3337){return _0xe86452>=_0x4a3337;},'mFXVE':function(_0x4f7393,_0x5392ce){return _0x4f7393!=_0x5392ce;},'yXlQE':_0x46ed9a(0x1d4),'BTULQ':function(_0x39123c,_0xb099e7,_0x5743a1,_0x4fb529,_0x279b79,_0x203c34){return _0x39123c(_0xb099e7,_0x5743a1,_0x4fb529,_0x279b79,_0x203c34);}},_0x527a01=helper[_0x46ed9a(0x161)](_0x15b4e4[_0x46ed9a(0x1d5)]);let _0x234688=constants[_0x46ed9a(0x164)][_0x46ed9a(0x18a)];global[_0x46ed9a(0x1ac)]=!!_0x527a01,await _0x50d656[_0x46ed9a(0x176)](_0x99b2f3);if(_0x527a01){const _0x1d9a79=_0x15b4e4[_0x46ed9a(0x15c)][_0x46ed9a(0x1cc)]('|');let _0x9fdde9=0x0;while(!![]){switch(_0x1d9a79[_0x9fdde9++]){case'0':BrowserstackCLI[_0x46ed9a(0x157)]()[_0x46ed9a(0x180)](_0x50d656['config'],_0x50d656[_0x46ed9a(0x167)]);continue;case'1':await BrowserstackCLI[_0x46ed9a(0x157)]()[_0x46ed9a(0x14f)]();continue;case'2':CLIUtils[_0x46ed9a(0x158)](constants[_0x46ed9a(0x164)][_0x46ed9a(0x18a)],_0x234688);continue;case'3':_0x234688=constants[_0x46ed9a(0x164)][_0x46ed9a(0x169)];continue;case'4':logger[_0x46ed9a(0x155)](_0x46ed9a(0x1c6)+_0x527a01+_0x46ed9a(0x16d));continue;}break;}}BrowserstackCLI[_0x46ed9a(0x157)]()[_0x46ed9a(0x18d)]&&(process[_0x46ed9a(0x153)][_0x46ed9a(0x19b)]=BrowserstackCLI[_0x46ed9a(0x157)]()[_0x46ed9a(0x18d)]);helper[_0x46ed9a(0x1ae)](_0x50d656[_0x46ed9a(0x166)],_0x99b2f3);!helper[_0x46ed9a(0x172)]()&&await _0x50d656['setupTCGAuth']();await helper[_0x46ed9a(0x154)](_0x50d656[_0x46ed9a(0x182)]);const _0x597ecb=helper['useW3C'](_0x50d656[_0x46ed9a(0x182)]);!helper[_0x46ed9a(0x17d)](_0x50d656['config']['accessibilityOptions'])&&(process[_0x46ed9a(0x153)]['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON[_0x46ed9a(0x171)](_0x50d656[_0x46ed9a(0x182)]['accessibilityOptions']));if(!BrowserstackCLI[_0x46ed9a(0x157)]()[_0x46ed9a(0x152)]()){const _0x360c45=await TestHubHandler['launchBuild'](constants[_0x46ed9a(0x164)][_0x46ed9a(0x18a)],_0x50d656);}let _0x447ba5=[];if(!helper[_0x46ed9a(0x172)]()){const _0x19f72a={};_0x19f72a[_0x46ed9a(0x16e)]=[],_0x447ba5=helper[_0x46ed9a(0x1ab)](Object[_0x46ed9a(0x196)]({},_0x50d656[_0x46ed9a(0x182)],_0x19f72a),_0x597ecb,constants[_0x46ed9a(0x164)][_0x46ed9a(0x18a)]);}else _0x447ba5=helper[_0x46ed9a(0x1ab)](_0x50d656['config'],_0x597ecb,constants['FRAMEWORKS']['CUCUMBER']);if(!_0x50d656[_0x46ed9a(0x182)])return;const _0x49cbf4=_0x50d656['config'][_0x46ed9a(0x1d8)]||helper[_0x46ed9a(0x1b3)](_0x99b2f3,_0x38733f,_0x50d656[_0x46ed9a(0x182)],constants[_0x46ed9a(0x164)]['CUCUMBER'])||0x1,_0x21716b={'server':helper['getHubUrl'](_0x50d656[_0x46ed9a(0x182)]),'proxySettings':_0x50d656['config']['proxySettings'],'maxWorkers':_0x49cbf4,'browserStackLogLevel':_0x50d656[_0x46ed9a(0x182)]['logLevel'],'skipSessionName':_0x50d656['config'][_0x46ed9a(0x181)][_0x46ed9a(0x156)],'skipSessionStatus':_0x50d656['config'][_0x46ed9a(0x181)][_0x46ed9a(0x1a8)],'turboScaleUrl':_0x50d656[_0x46ed9a(0x182)][_0x46ed9a(0x17c)]},_0x1fbf29=process[_0x46ed9a(0x183)],[_0xbef035,_0x4e9096]=helper['parseFormatters'](_0x1fbf29),_0x576308=path['join'](process[_0x46ed9a(0x162)](),_0x15b4e4['fjbig']);if(_0x15b4e4[_0x46ed9a(0x1d6)](_0x4e9096['length'],0x0)){helper[_0x46ed9a(0x179)](_0x576308);for(let _0x413b58=_0x15b4e4[_0x46ed9a(0x16b)](_0xbef035[_0x46ed9a(0x187)],0x1);_0x15b4e4[_0x46ed9a(0x1bc)](_0x413b58,0x0);_0x413b58--){_0x1fbf29[_0x46ed9a(0x15d)](_0xbef035[_0x413b58],0x2);}}_0x15b4e4[_0x46ed9a(0x178)](_0x50d656[_0x46ed9a(0x182)][_0x46ed9a(0x1bf)],null)?process['env'][_0x46ed9a(0x1a2)]=_0x50d656[_0x46ed9a(0x182)][_0x46ed9a(0x1bf)]:process[_0x46ed9a(0x153)][_0x46ed9a(0x1a2)]=_0x15b4e4[_0x46ed9a(0x165)];PerformanceTester[_0x46ed9a(0x199)](PerformanceEvents[_0x46ed9a(0x15f)]);let _0x5a252a;_0x15b4e4['BTULQ'](parallelCucumberRun,_0x447ba5,_0x21716b,_0x50d656[_0x46ed9a(0x182)],_0x1fbf29,_0x4e9096)[_0x46ed9a(0x16a)](async _0x2ec322=>{const _0x4528e5=_0x46ed9a;PerformanceTester[_0x4528e5(0x18c)](PerformanceEvents[_0x4528e5(0x17e)]),_0x5a252a=_0x2ec322;const _0x2c0c47=_0x15b4e4['GNUyx'](printCucumberStats,_0x2ec322);process[_0x4528e5(0x1c4)]=_0x2c0c47,_0x15b4e4[_0x4528e5(0x1ce)](_0x4e9096[_0x4528e5(0x187)],0x0)&&(logger[_0x4528e5(0x155)](_0x15b4e4[_0x4528e5(0x15b)]),helper[_0x4528e5(0x170)](_0x576308,_0x4e9096),logger[_0x4528e5(0x155)](_0x15b4e4[_0x4528e5(0x186)]),helper[_0x4528e5(0x15e)](_0x576308));})[_0x46ed9a(0x16c)](async()=>{const _0x2b734e=_0x46ed9a;PerformanceTester[_0x2b734e(0x18c)](PerformanceEvents[_0x2b734e(0x17e)]),_0x50d656['errorMessage']=helper[_0x2b734e(0x1d1)](_0x5a252a,_0x15b4e4[_0x2b734e(0x1b8)]),testOpsHelper[_0x2b734e(0x1b2)]();try{await TestHubHandler[_0x2b734e(0x197)](),await BrowserstackCLI['getInstance']()[_0x2b734e(0x197)]();}catch(_0x277be6){logger[_0x2b734e(0x155)](_0x2b734e(0x198)+util[_0x2b734e(0x19a)](_0x277be6));}try{const {browserstackFolderPath:_0x22a146,tcgConfigPath:_0x162743}=helper['getTCGConfigFilePaths']();fs[_0x2b734e(0x1af)](_0x162743),fs['rmdirSync'](_0x22a146);}catch(_0x4f35c0){logger[_0x2b734e(0x155)](_0x15b4e4[_0x2b734e(0x194)],_0x4f35c0);}await utilities[_0x2b734e(0x150)](_0x50d656);});}module[a5_0x347280(0x19e)]=run;