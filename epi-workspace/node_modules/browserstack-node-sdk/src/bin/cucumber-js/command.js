#!/usr/bin/env node
'use strict';const a5_0x5f1b25=a5_0x22f0;(function(_0x9ee350,_0x45d13f){const _0xaeb23a=a5_0x22f0,_0x25af84=_0x9ee350();while(!![]){try{const _0x40b27f=-parseInt(_0xaeb23a(0xdd))/0x1*(-parseInt(_0xaeb23a(0x13d))/0x2)+parseInt(_0xaeb23a(0xff))/0x3*(parseInt(_0xaeb23a(0x11f))/0x4)+parseInt(_0xaeb23a(0xe3))/0x5+parseInt(_0xaeb23a(0x100))/0x6+-parseInt(_0xaeb23a(0x123))/0x7+-parseInt(_0xaeb23a(0x10e))/0x8*(parseInt(_0xaeb23a(0x105))/0x9)+-parseInt(_0xaeb23a(0x128))/0xa*(parseInt(_0xaeb23a(0x102))/0xb);if(_0x40b27f===_0x45d13f)break;else _0x25af84['push'](_0x25af84['shift']());}catch(_0x319113){_0x25af84['push'](_0x25af84['shift']());}}}(a5_0x1606,0x9b524));function a5_0x22f0(_0x78b6a8,_0x31ef71){const _0x1606ac=a5_0x1606();return a5_0x22f0=function(_0x22f0a1,_0x5dc296){_0x22f0a1=_0x22f0a1-0xc9;let _0x52ed8a=_0x1606ac[_0x22f0a1];return _0x52ed8a;},a5_0x22f0(_0x78b6a8,_0x31ef71);}const fs=require('fs'),path=require(a5_0x5f1b25(0x122)),util=require(a5_0x5f1b25(0xd3)),logger=require(a5_0x5f1b25(0xfb))[a5_0x5f1b25(0x120)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a5_0x5f1b25(0xe1)),utilities=require(a5_0x5f1b25(0xd8)),constants=require(a5_0x5f1b25(0x110)),{parallelCucumberRun}=require(a5_0x5f1b25(0x11b)),TestHubHandler=require(a5_0x5f1b25(0x10c)),testOpsHelper=require(a5_0x5f1b25(0x107)),chalk=require(a5_0x5f1b25(0x117)),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require(a5_0x5f1b25(0x101))[a5_0x5f1b25(0x137)];function a5_0x1606(){const _0x1a8ba5=['378216lPxvpQ','\x20ambiguous','../utils/constants','GrVEK','Removing\x20tmp\x20directory\x20created\x20for\x20reports','isBrowserstackInfra','debug','\x20undefined','XhMTI','chalk','length','red','mergeOutputFiles','../test-runner','KxUxT','mRwLq','true','3148756yaVEln','winstonLogger','format','path','5286967xqHMdf','setupTCGAuth','stepsUndefined','wqEbf','stepsAmbiguous','2325710pdkfVX','\x20steps','CUCUMBER','NZBoS','vLiZL','logLevel','start','error\x20removing\x20tcg\x20config\x20file','unlinkSync','steps','KMffD','\x20passed','exports','log','framework','EVENTS','cMIUU','bgWhite','config','errorMessage','VXxFR','10lfYQVh','parseFormatters','testContextOptions','SDK_SETUP','createDir','zRmWi','getTCGConfigFilePaths','green','\x20pending','stepsFailed','GPjPl','bold','cwd','stepsSkipped','PcunM','Generating\x20consolidated\x20report...','join','Unymd','xYlZd','util','LUdGW','useW3C','launchBuild','scenariosFailed','../../helpers/utilities','rmdirSync','xeppR','QvwdU','exitCode','227011WRmCUa','cyan','processSuccess','stepsPassed','../../helpers/helper','initialize','1754475oMhkpT','testObservability','VQnAU','\x20skipped','stringify','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','printBuildLink','getUserWorkerCount','then','env','BROWSERSTACK_TEST_OBSERVABILITY_YML','finalExecution','UbzbM','accessibilityOptions','splice','stepsUnknown','Erwyw','sYaHH','FRAMEWORKS','yellow','QSRVU','\x20failed','LvCcG','../../helpers/logger','skipSessionStatus','assign','prepareCapabilities','3ngbqPM','6271518HGkRUR','../../helpers/performance/constants','33xebLWD','push','scenarios','234DDsVjG','forEach','../../helpers/test-observability/utils','turboScaleUrl','isUndefined','mpHJY','stop','../../helpers/testhub/testhubHandler','tmp'];a5_0x1606=function(){return _0x1a8ba5;};return a5_0x1606();}function printCucumberStats(_0x37d44a){const _0x346443=a5_0x5f1b25,_0x5997cd={};_0x5997cd[_0x346443(0xdb)]=function(_0x6d1718,_0x126ea9){return _0x6d1718>_0x126ea9;},_0x5997cd['Erwyw']=function(_0x3f36d3,_0xb20249){return _0x3f36d3-_0xb20249;},_0x5997cd[_0x346443(0x132)]=function(_0xe6c20e,_0x8c008a){return _0xe6c20e-_0x8c008a;},_0x5997cd[_0x346443(0x10a)]=function(_0x2a401b,_0x30663b){return _0x2a401b>_0x30663b;},_0x5997cd[_0x346443(0xe5)]=function(_0x228ef5,_0x5c05bf){return _0x228ef5>_0x5c05bf;},_0x5997cd['NZBoS']=function(_0x3d40bf,_0x5bba0a){return _0x3d40bf>_0x5bba0a;},_0x5997cd[_0x346443(0x11d)]=function(_0x44d5d7,_0x116aae){return _0x44d5d7>_0x116aae;},_0x5997cd['VXxFR']=function(_0x14dfa4,_0x4d618b){return _0x14dfa4>_0x4d618b;},_0x5997cd[_0x346443(0x142)]=function(_0x27a66b,_0x45b7d5){return _0x27a66b>_0x45b7d5;},_0x5997cd['yTleM']=function(_0x530758,_0x489282){return _0x530758+_0x489282;},_0x5997cd['yQRyF']=function(_0x115ded,_0x11d711){return _0x115ded+_0x11d711;},_0x5997cd[_0x346443(0x126)]=function(_0xc51fa,_0x43e548){return _0xc51fa+_0x43e548;},_0x5997cd[_0x346443(0xf0)]=function(_0x2a0c70,_0x1573a4){return _0x2a0c70+_0x1573a4;},_0x5997cd['sYaHH']=function(_0x4d7037,_0x28a5cf){return _0x4d7037+_0x28a5cf;},_0x5997cd[_0x346443(0xfa)]=function(_0x1fdcf9,_0x557211){return _0x1fdcf9+_0x557211;},_0x5997cd['Unymd']=function(_0x16c2f0,_0x377173){return _0x16c2f0===_0x377173;},_0x5997cd[_0x346443(0xd2)]='****\x20RESULTS\x20****';const _0xb34c5b=_0x5997cd;let _0x5190de=0x0;if(_0xb34c5b[_0x346443(0xd1)](_0x37d44a[_0x346443(0x118)],0x0))return _0x5190de;return console[_0x346443(0x135)](chalk[_0x346443(0xcb)][_0x346443(0x139)](_0xb34c5b['xYlZd'])),_0x37d44a[_0x346443(0x106)](_0xd158f8=>{const _0x39867e=_0x346443,_0x4cbf82=_0xd158f8[0x0],_0x18f371=_0xd158f8[0x1];helper[_0x39867e(0x113)]()&&console['log']('\x0a'+chalk['bold'][_0x39867e(0xf7)](''+helper['getPlatformName'](_0x4cbf82)));const _0x2096a5=_0x18f371[_0x39867e(0x104)],_0x1c06ff=_0x18f371[_0x39867e(0x131)],_0x37040f=_0x18f371[_0x39867e(0xd7)],_0x5f3758=_0x18f371[_0x39867e(0xc9)],_0x44e3ed=_0x18f371[_0x39867e(0xe0)],_0x36955b=_0x18f371[_0x39867e(0xcd)],_0x4d174f=_0x18f371['stepsPending'],_0x1a0504=_0x18f371[_0x39867e(0x125)],_0x361795=_0x18f371[_0x39867e(0xf3)],_0x241fc0=_0x18f371[_0x39867e(0x127)],_0x2e5862=_0x18f371[_0x39867e(0xdf)];let _0x166caa=_0x2096a5+'\x20scenarios';const _0x5c8dbb=_0xb34c5b[_0x39867e(0xdb)](_0xb34c5b[_0x39867e(0xf4)](_0x2096a5,_0x37040f),0x0)?_0xb34c5b[_0x39867e(0x132)](_0x2096a5,_0x37040f):0x0;if(_0xb34c5b[_0x39867e(0xdb)](_0x37040f,0x0)&&_0xb34c5b[_0x39867e(0x10a)](_0x5c8dbb,0x0))_0x166caa+='\x20('+chalk[_0x39867e(0xcb)][_0x39867e(0x119)](_0x37040f+'\x20failed')+',\x20'+chalk['bold'][_0x39867e(0x144)](_0x5c8dbb+_0x39867e(0x133))+')';else(_0xb34c5b[_0x39867e(0xe5)](_0x37040f,0x0)||_0xb34c5b[_0x39867e(0x12b)](_0x5c8dbb,0x0))&&(_0x166caa+=_0xb34c5b[_0x39867e(0x10a)](_0x37040f,0x0)?'\x20('+chalk[_0x39867e(0xcb)]['red'](_0x37040f+_0x39867e(0xf9))+')':'\x20('+chalk['bold']['green'](_0x5c8dbb+'\x20passed')+')');const _0x190f82=_0x1c06ff+_0x39867e(0x129),_0x28a3dd=[];_0xb34c5b[_0x39867e(0x10a)](_0x241fc0,0x0)&&_0x28a3dd[_0x39867e(0x103)](''+chalk[_0x39867e(0xcb)][_0x39867e(0x119)](_0x241fc0+_0x39867e(0x10f)));_0xb34c5b[_0x39867e(0x12b)](_0x5f3758,0x0)&&_0x28a3dd[_0x39867e(0x103)](''+chalk[_0x39867e(0xcb)][_0x39867e(0x119)](_0x5f3758+_0x39867e(0xf9)));_0xb34c5b[_0x39867e(0x11d)](_0x44e3ed,0x0)&&_0x28a3dd[_0x39867e(0x103)](''+chalk[_0x39867e(0xcb)][_0x39867e(0x144)](_0x44e3ed+_0x39867e(0x133)));_0xb34c5b[_0x39867e(0x12b)](_0x4d174f,0x0)&&_0x28a3dd[_0x39867e(0x103)](''+chalk[_0x39867e(0xcb)][_0x39867e(0xf7)](_0x4d174f+_0x39867e(0x145)));_0xb34c5b[_0x39867e(0x13c)](_0x36955b,0x0)&&_0x28a3dd[_0x39867e(0x103)](''+chalk['bold'][_0x39867e(0xde)](_0x36955b+_0x39867e(0xe6)));_0xb34c5b[_0x39867e(0x12b)](_0x1a0504,0x0)&&_0x28a3dd[_0x39867e(0x103)](''+chalk[_0x39867e(0xcb)]['yellow'](_0x1a0504+_0x39867e(0x115)));_0xb34c5b['zRmWi'](_0x361795,0x0)&&_0x28a3dd[_0x39867e(0x103)](''+chalk[_0x39867e(0xcb)][_0x39867e(0xf7)](_0x361795+_0x39867e(0xe6)));const _0x13a4ca=_0xb34c5b['yTleM'](_0xb34c5b['yTleM'](_0xb34c5b['yQRyF'](_0x190f82,'('),_0x28a3dd[_0x39867e(0xd0)](',\x20')),')');console[_0x39867e(0x135)](_0xb34c5b['wqEbf'](_0xb34c5b[_0x39867e(0xf0)](_0xb34c5b[_0x39867e(0xf5)](_0xb34c5b[_0x39867e(0xfa)]('\x0a',_0x166caa),'\x0a'),_0x13a4ca),'\x0a')),_0xb34c5b[_0x39867e(0xd1)](_0x2e5862,![])&&(_0x5190de=0x1);}),_0x5190de;}async function run(_0x5699ea,_0x3715e9,_0x511ed4){const _0x42ed17=a5_0x5f1b25,_0x5a50dd={'xeppR':function(_0x2e0686,_0xbc1691){return _0x2e0686(_0xbc1691);},'LUdGW':function(_0x18199e,_0x392a0d){return _0x18199e>_0x392a0d;},'PcunM':_0x42ed17(0xcf),'QWtSZ':_0x42ed17(0x112),'GPjPl':'cucumber','XhMTI':_0x42ed17(0x12f),'cMIUU':_0x42ed17(0x10d),'QSRVU':function(_0xdfe678,_0x32e056){return _0xdfe678-_0x32e056;},'KxUxT':function(_0x423439,_0xba8673){return _0x423439>=_0xba8673;},'OqjEk':function(_0x10527e,_0x145765){return _0x10527e!=_0x145765;},'vLiZL':_0x42ed17(0x11e),'GrVEK':function(_0x38198e,_0x207374,_0x1a6815,_0x474e54,_0x4cbe5b,_0x39e511){return _0x38198e(_0x207374,_0x1a6815,_0x474e54,_0x4cbe5b,_0x39e511);}};await _0x511ed4[_0x42ed17(0xe2)](_0x5699ea),helper['setUserConfigPath'](_0x511ed4[_0x42ed17(0x136)],_0x5699ea);!helper[_0x42ed17(0x113)]()&&await _0x511ed4[_0x42ed17(0x124)]();await helper['handleApp'](_0x511ed4[_0x42ed17(0x13a)]);const _0x5733c1=helper[_0x42ed17(0xd5)](_0x511ed4[_0x42ed17(0x13a)]);!helper[_0x42ed17(0x109)](_0x511ed4['config'][_0x42ed17(0xf1)])&&(process[_0x42ed17(0xed)][_0x42ed17(0xe9)]=JSON[_0x42ed17(0xe7)](_0x511ed4[_0x42ed17(0x13a)][_0x42ed17(0xf1)]));const _0x2c0366=await TestHubHandler[_0x42ed17(0xd6)](constants[_0x42ed17(0xf6)][_0x42ed17(0x12a)],_0x511ed4);let _0x5284b3=[];if(!helper[_0x42ed17(0x113)]()){const _0x398c05={};_0x398c05['platforms']=[],_0x5284b3=helper[_0x42ed17(0xfe)](Object[_0x42ed17(0xfd)]({},_0x511ed4[_0x42ed17(0x13a)],_0x398c05),_0x5733c1,constants[_0x42ed17(0xf6)][_0x42ed17(0x12a)]);}else _0x5284b3=helper[_0x42ed17(0xfe)](_0x511ed4[_0x42ed17(0x13a)],_0x5733c1,constants[_0x42ed17(0xf6)]['CUCUMBER']);if(!_0x511ed4[_0x42ed17(0x13a)])return;const _0x51c232=_0x511ed4[_0x42ed17(0x13a)]['parallelsPerPlatform']||helper[_0x42ed17(0xeb)](_0x5699ea,_0x3715e9,_0x511ed4[_0x42ed17(0x13a)],constants['FRAMEWORKS'][_0x42ed17(0x12a)])||0x1,_0x1cd90d={'server':helper['getHubUrl'](_0x511ed4[_0x42ed17(0x13a)]),'proxySettings':_0x511ed4[_0x42ed17(0x13a)]['proxySettings'],'maxWorkers':_0x51c232,'browserStackLogLevel':_0x511ed4[_0x42ed17(0x13a)][_0x42ed17(0x12d)],'skipSessionName':_0x511ed4[_0x42ed17(0x13a)][_0x42ed17(0x13f)]['skipSessionName'],'skipSessionStatus':_0x511ed4['config'][_0x42ed17(0x13f)][_0x42ed17(0xfc)],'turboScaleUrl':_0x511ed4['config'][_0x42ed17(0x108)]},_0x5c719f=process['argv'],[_0x4b43b4,_0x2515d9]=helper[_0x42ed17(0x13e)](_0x5c719f),_0xbecce9=path[_0x42ed17(0xd0)](process[_0x42ed17(0xcc)](),_0x5a50dd[_0x42ed17(0x138)]);if(_0x5a50dd[_0x42ed17(0xd4)](_0x2515d9['length'],0x0)){helper[_0x42ed17(0x141)](_0xbecce9);for(let _0x1371ab=_0x5a50dd[_0x42ed17(0xf8)](_0x4b43b4[_0x42ed17(0x118)],0x1);_0x5a50dd[_0x42ed17(0x11c)](_0x1371ab,0x0);_0x1371ab--){_0x5c719f[_0x42ed17(0xf2)](_0x4b43b4[_0x1371ab],0x2);}}_0x5a50dd['OqjEk'](_0x511ed4[_0x42ed17(0x13a)]['testObservability'],null)?process[_0x42ed17(0xed)]['BROWSERSTACK_TEST_OBSERVABILITY_YML']=_0x511ed4['config'][_0x42ed17(0xe4)]:process[_0x42ed17(0xed)][_0x42ed17(0xee)]=_0x5a50dd[_0x42ed17(0x12c)];PerformanceTester['end'](PerformanceEvents[_0x42ed17(0x140)]);let _0x26792e;_0x5a50dd[_0x42ed17(0x111)](parallelCucumberRun,_0x5284b3,_0x1cd90d,_0x511ed4[_0x42ed17(0x13a)],_0x5c719f,_0x2515d9)[_0x42ed17(0xec)](async _0x2489d1=>{const _0x4eace1=_0x42ed17;PerformanceTester[_0x4eace1(0x12e)](PerformanceEvents['SDK_CLEANUP']),_0x26792e=_0x2489d1;const _0x5ae983=_0x5a50dd[_0x4eace1(0xda)](printCucumberStats,_0x2489d1);process[_0x4eace1(0xdc)]=_0x5ae983,_0x5a50dd[_0x4eace1(0xd4)](_0x2515d9['length'],0x0)&&(logger[_0x4eace1(0x114)](_0x5a50dd[_0x4eace1(0xce)]),helper[_0x4eace1(0x11a)](_0xbecce9,_0x2515d9),logger['debug'](_0x5a50dd['QWtSZ']),helper['removeDir'](_0xbecce9));})['finally'](async()=>{const _0x257e68=_0x42ed17;PerformanceTester[_0x257e68(0x12e)](PerformanceEvents['SDK_CLEANUP']),_0x511ed4[_0x257e68(0x13b)]=helper['getErrorMessageFromResults'](_0x26792e,_0x5a50dd[_0x257e68(0xca)]),testOpsHelper[_0x257e68(0xea)]();try{await TestHubHandler[_0x257e68(0x10b)]();}catch(_0x39b209){logger['debug'](_0x257e68(0xe8)+util[_0x257e68(0x121)](_0x39b209));}try{const {browserstackFolderPath:_0x4ba7d0,tcgConfigPath:_0x26dd34}=helper[_0x257e68(0x143)]();fs[_0x257e68(0x130)](_0x26dd34),fs[_0x257e68(0xd9)](_0x4ba7d0);}catch(_0x8545fd){logger[_0x257e68(0x114)](_0x5a50dd[_0x257e68(0x116)],_0x8545fd);}await utilities[_0x257e68(0xef)](_0x511ed4);});}module[a5_0x5f1b25(0x134)]=run;