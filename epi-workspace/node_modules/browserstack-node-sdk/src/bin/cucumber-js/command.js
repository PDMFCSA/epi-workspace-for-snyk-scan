#!/usr/bin/env node
'use strict';const a5_0x4a3b40=a5_0x9628;(function(_0x138ece,_0x37daff){const _0x2ea28e=a5_0x9628,_0x2f89f2=_0x138ece();while(!![]){try{const _0x26e2a5=parseInt(_0x2ea28e(0x13b))/0x1+parseInt(_0x2ea28e(0x12d))/0x2*(-parseInt(_0x2ea28e(0x140))/0x3)+-parseInt(_0x2ea28e(0x187))/0x4*(parseInt(_0x2ea28e(0x157))/0x5)+parseInt(_0x2ea28e(0x167))/0x6+-parseInt(_0x2ea28e(0x16a))/0x7*(parseInt(_0x2ea28e(0x156))/0x8)+-parseInt(_0x2ea28e(0x1a3))/0x9+parseInt(_0x2ea28e(0x1b2))/0xa*(parseInt(_0x2ea28e(0x17c))/0xb);if(_0x26e2a5===_0x37daff)break;else _0x2f89f2['push'](_0x2f89f2['shift']());}catch(_0x4fdd60){_0x2f89f2['push'](_0x2f89f2['shift']());}}}(a5_0x4d26,0x4b972));const fs=require('fs'),path=require(a5_0x4a3b40(0x178)),util=require('util'),logger=require('../../helpers/logger')[a5_0x4a3b40(0x154)],{default:BrowserStackSetup}=require(a5_0x4a3b40(0x1ab)),helper=require(a5_0x4a3b40(0x181)),utilities=require('../../helpers/utilities'),constants=require(a5_0x4a3b40(0x1b6)),{parallelCucumberRun}=require(a5_0x4a3b40(0x12f)),TestHubHandler=require(a5_0x4a3b40(0x13a)),testOpsHelper=require(a5_0x4a3b40(0x132)),chalk=require(a5_0x4a3b40(0x134)),PerformanceTester=require(a5_0x4a3b40(0x1b5)),PerformanceEvents=require(a5_0x4a3b40(0x153))[a5_0x4a3b40(0x15a)],BrowserstackCLI=require(a5_0x4a3b40(0x1bb)),CLIUtils=require('../v2/cliUtils'),TestInfo=require(a5_0x4a3b40(0x17d));function printCucumberStats(_0x58b0f1){const _0x190ac5=a5_0x4a3b40,_0x5c4419={};_0x5c4419[_0x190ac5(0x163)]=function(_0x1d07ae,_0x35b53a){return _0x1d07ae>_0x35b53a;},_0x5c4419[_0x190ac5(0x190)]=function(_0x1b1e70,_0xe9da77){return _0x1b1e70-_0xe9da77;},_0x5c4419[_0x190ac5(0x185)]=function(_0x4d1624,_0x25b314){return _0x4d1624-_0x25b314;},_0x5c4419['pSGMH']=function(_0x5ed27e,_0xd0efab){return _0x5ed27e>_0xd0efab;},_0x5c4419[_0x190ac5(0x184)]=function(_0xb73801,_0x500597){return _0xb73801>_0x500597;},_0x5c4419[_0x190ac5(0x19a)]=function(_0x28c01e,_0x38b144){return _0x28c01e>_0x38b144;},_0x5c4419[_0x190ac5(0x138)]=function(_0x316651,_0x2fa5b4){return _0x316651>_0x2fa5b4;},_0x5c4419['ylBhz']=function(_0x185781,_0x3cf212){return _0x185781>_0x3cf212;},_0x5c4419[_0x190ac5(0x159)]=function(_0x233cea,_0x1d0b70){return _0x233cea>_0x1d0b70;},_0x5c4419[_0x190ac5(0x1ac)]=function(_0x2e077e,_0x3eec69){return _0x2e077e>_0x3eec69;},_0x5c4419['BFAev']=function(_0x5e9867,_0x4779d8){return _0x5e9867+_0x4779d8;},_0x5c4419['dgaXd']=function(_0x304bf9,_0x36683e){return _0x304bf9+_0x36683e;},_0x5c4419[_0x190ac5(0x188)]=function(_0x5b60b8,_0x10cf87){return _0x5b60b8+_0x10cf87;},_0x5c4419[_0x190ac5(0x131)]=function(_0x33b14b,_0x466ff8){return _0x33b14b===_0x466ff8;},_0x5c4419[_0x190ac5(0x17f)]=function(_0x5a3e2d,_0x4e1f2b){return _0x5a3e2d===_0x4e1f2b;},_0x5c4419['Meyim']=_0x190ac5(0x19b);const _0x25657c=_0x5c4419;let _0x5d3ec2=0x0;if(_0x25657c['llEGN'](_0x58b0f1[_0x190ac5(0x143)],0x0))return _0x5d3ec2;return console[_0x190ac5(0x15b)](chalk[_0x190ac5(0x1a5)][_0x190ac5(0x161)](_0x25657c[_0x190ac5(0x174)])),_0x58b0f1[_0x190ac5(0x15c)](_0x358f4e=>{const _0x35acb2=_0x190ac5,_0x3a5d96=_0x358f4e[0x0],_0x32375a=_0x358f4e[0x1];helper[_0x35acb2(0x13f)]()&&console[_0x35acb2(0x15b)]('\x0a'+chalk[_0x35acb2(0x1a5)]['yellow'](''+helper['getPlatformName'](_0x3a5d96)));const _0x183658=_0x32375a[_0x35acb2(0x19e)],_0x4726d6=_0x32375a[_0x35acb2(0x14b)],_0x2beb8c=_0x32375a[_0x35acb2(0x196)],_0x326577=_0x32375a[_0x35acb2(0x1a2)],_0x2b53fb=_0x32375a[_0x35acb2(0x135)],_0x2ecda2=_0x32375a[_0x35acb2(0x155)],_0x12b587=_0x32375a[_0x35acb2(0x137)],_0x18a8d0=_0x32375a[_0x35acb2(0x192)],_0xc931aa=_0x32375a[_0x35acb2(0x160)],_0xcb9e8c=_0x32375a['stepsAmbiguous'],_0xbcc9a3=_0x32375a[_0x35acb2(0x172)];let _0x498033=_0x183658+_0x35acb2(0x1ba);const _0x3b05e5=_0x25657c[_0x35acb2(0x163)](_0x25657c['ybobL'](_0x183658,_0x2beb8c),0x0)?_0x25657c['NiBUT'](_0x183658,_0x2beb8c):0x0;if(_0x25657c[_0x35acb2(0x163)](_0x2beb8c,0x0)&&_0x25657c['MomXd'](_0x3b05e5,0x0))_0x498033+='\x20('+chalk[_0x35acb2(0x1a5)]['red'](_0x2beb8c+'\x20failed')+',\x20'+chalk[_0x35acb2(0x1a5)][_0x35acb2(0x19d)](_0x3b05e5+_0x35acb2(0x194))+')';else(_0x25657c[_0x35acb2(0x18f)](_0x2beb8c,0x0)||_0x25657c['agunl'](_0x3b05e5,0x0))&&(_0x498033+=_0x25657c[_0x35acb2(0x18f)](_0x2beb8c,0x0)?'\x20('+chalk[_0x35acb2(0x1a5)][_0x35acb2(0x1a8)](_0x2beb8c+_0x35acb2(0x17a))+')':'\x20('+chalk['bold']['green'](_0x3b05e5+'\x20passed')+')');const _0x49cd5f=_0x4726d6+_0x35acb2(0x136),_0x216381=[];_0x25657c[_0x35acb2(0x19a)](_0xcb9e8c,0x0)&&_0x216381[_0x35acb2(0x169)](''+chalk[_0x35acb2(0x1a5)][_0x35acb2(0x1a8)](_0xcb9e8c+'\x20ambiguous'));_0x25657c[_0x35acb2(0x138)](_0x326577,0x0)&&_0x216381[_0x35acb2(0x169)](''+chalk[_0x35acb2(0x1a5)][_0x35acb2(0x1a8)](_0x326577+'\x20failed'));_0x25657c[_0x35acb2(0x1aa)](_0x2b53fb,0x0)&&_0x216381[_0x35acb2(0x169)](''+chalk[_0x35acb2(0x1a5)]['green'](_0x2b53fb+_0x35acb2(0x194)));_0x25657c[_0x35acb2(0x159)](_0x12b587,0x0)&&_0x216381[_0x35acb2(0x169)](''+chalk[_0x35acb2(0x1a5)][_0x35acb2(0x177)](_0x12b587+_0x35acb2(0x19c)));_0x25657c[_0x35acb2(0x18f)](_0x2ecda2,0x0)&&_0x216381[_0x35acb2(0x169)](''+chalk[_0x35acb2(0x1a5)][_0x35acb2(0x149)](_0x2ecda2+_0x35acb2(0x195)));_0x25657c[_0x35acb2(0x159)](_0x18a8d0,0x0)&&_0x216381[_0x35acb2(0x169)](''+chalk[_0x35acb2(0x1a5)][_0x35acb2(0x177)](_0x18a8d0+'\x20undefined'));_0x25657c[_0x35acb2(0x1ac)](_0xc931aa,0x0)&&_0x216381[_0x35acb2(0x169)](''+chalk[_0x35acb2(0x1a5)][_0x35acb2(0x177)](_0xc931aa+_0x35acb2(0x195)));const _0x2dabfa=_0x25657c[_0x35acb2(0x180)](_0x25657c['dgaXd'](_0x25657c['dgaXd'](_0x49cd5f,'('),_0x216381[_0x35acb2(0x186)](',\x20')),')');console[_0x35acb2(0x15b)](_0x25657c[_0x35acb2(0x189)](_0x25657c[_0x35acb2(0x188)](_0x25657c[_0x35acb2(0x189)](_0x25657c[_0x35acb2(0x180)]('\x0a',_0x498033),'\x0a'),_0x2dabfa),'\x0a')),_0x25657c[_0x35acb2(0x131)](_0xbcc9a3,![])&&(_0x5d3ec2=0x1);}),_0x5d3ec2;}function a5_0x4d26(){const _0x253f52=['skipSessionName','start','Detected\x20Playwright\x20version\x20','\x20scenarios','../v2/browserstackCLI','6matpRd','bootstrap','../test-runner','turboScaleUrl','VONPL','../../helpers/test-observability/utils','setBrowserstackConfig','chalk','stepsPassed','\x20steps','stepsPending','tdzLc','HLWMW','../../helpers/testhub/testhubHandler','489332oEIYZc','proxySettings','useW3C','removeDir','isBrowserstackInfra','257034OJHiyV','BROWSERSTACK_TEST_OBSERVABILITY_YML','errorMessage','length','splice','prepareCapabilities','IKTSv','logLevel','tmp','cyan','stop','steps','pxZnY','Removing\x20tmp\x20directory\x20created\x20for\x20reports','Pahds','getPackageVersion','rmdirSync','FRAMEWORKS','PLAYWRIGHT','../../helpers/performance/constants','winstonLogger','stepsSkipped','8PXsybs','10SNSspn','error\x20removing\x20tcg\x20config\x20file','YYkss','EVENTS','log','forEach','end','launchBuild','xYPlC','stepsUnknown','bgWhite','true','MomXd','stringify','getInstance','createDir','712230YHYpEX','SDK_SETUP','push','1810879xduWgC','getHubUrl','SDK_CLEANUP','binSessionId','0|3|1|4|2','argv','isRunning','finalExecution','processSuccess','debug','Meyim','exports','sBvhh','yellow','path','framework','\x20failed','handleApp','18392toHQPv','../v2/TestInfo','accessibilityOptions','llEGN','BFAev','../../helpers/helper','skipSessionStatus','cliConfig','agunl','NiBUT','join','1073492nMxCQA','AdfVo','dgaXd','getErrorMessageFromResults','setFrameworkDetail','jYqAB','finally','testContextOptions','pSGMH','ybobL','unlinkSync','stepsUndefined','Gjuow','\x20passed','\x20skipped','scenariosFailed','initialize','tXZjy','assign','FNemp','****\x20RESULTS\x20****','\x20pending','green','scenarios','parallelsPerPlatform','fdgeA','CUCUMBER','stepsFailed','1474830EeHcvi','config','bold','setupTCGAuth','mfCZX','red','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','ylBhz','../../helpers/BrowserStackSetup','yrUYs','__isPlaywrightInstalled','exitCode','setUserConfigPath','cwd','Generating\x20consolidated\x20report...','5490AwnPYO','env','mergeOutputFiles','../../helpers/performance/performance-tester','../utils/constants'];a5_0x4d26=function(){return _0x253f52;};return a5_0x4d26();}function a5_0x9628(_0x36def7,_0x5a934a){const _0x4d26e1=a5_0x4d26();return a5_0x9628=function(_0x9628f7,_0x530c87){_0x9628f7=_0x9628f7-0x12d;let _0x387c7f=_0x4d26e1[_0x9628f7];return _0x387c7f;},a5_0x9628(_0x36def7,_0x5a934a);}async function run(_0x18ff34,_0x1184ec,_0x84aa40){const _0x4ce4af=a5_0x4a3b40,_0x5c7348={'pxZnY':function(_0x7eda0d,_0x14c349){return _0x7eda0d(_0x14c349);},'fdgeA':function(_0x5e8054,_0x501f6b){return _0x5e8054>_0x501f6b;},'MuNvy':_0x4ce4af(0x1b1),'sBvhh':_0x4ce4af(0x14d),'IKTSv':'cucumber','tXZjy':_0x4ce4af(0x158),'Ctmme':'@playwright/test','mfCZX':_0x4ce4af(0x16e),'Pahds':_0x4ce4af(0x148),'HLWMW':function(_0x29db91,_0x223d07){return _0x29db91>_0x223d07;},'xYPlC':function(_0x4353a8,_0x8742b4){return _0x4353a8-_0x8742b4;},'jYqAB':function(_0x4e40fa,_0x482792){return _0x4e40fa>=_0x482792;},'ajxPG':function(_0x4ec342,_0xd3e7b7){return _0x4ec342!=_0xd3e7b7;},'Gjuow':_0x4ce4af(0x162),'ekdcu':function(_0x176031,_0x530dc6,_0x522951,_0x7ef715,_0x3a9ccc,_0xc3017){return _0x176031(_0x530dc6,_0x522951,_0x7ef715,_0x3a9ccc,_0xc3017);}},_0x3b2653=helper[_0x4ce4af(0x14f)](_0x5c7348['Ctmme']);let _0x4c368b=constants['FRAMEWORKS']['CUCUMBER'];global[_0x4ce4af(0x1ad)]=!!_0x3b2653,await _0x84aa40[_0x4ce4af(0x197)](_0x18ff34);if(_0x3b2653){const _0x44d0e3=_0x5c7348[_0x4ce4af(0x1a7)]['split']('|');let _0x4ceb6e=0x0;while(!![]){switch(_0x44d0e3[_0x4ceb6e++]){case'0':_0x4c368b=constants[_0x4ce4af(0x151)][_0x4ce4af(0x152)];continue;case'1':CLIUtils[_0x4ce4af(0x18b)](constants['FRAMEWORKS'][_0x4ce4af(0x1a1)],_0x4c368b);continue;case'2':await BrowserstackCLI[_0x4ce4af(0x165)]()[_0x4ce4af(0x12e)]();continue;case'3':logger[_0x4ce4af(0x173)](_0x4ce4af(0x1b9)+_0x3b2653+'\x20for\x20cucumber-js\x20flow');continue;case'4':BrowserstackCLI['getInstance']()[_0x4ce4af(0x133)](_0x84aa40[_0x4ce4af(0x1a4)],_0x84aa40[_0x4ce4af(0x183)]);continue;}break;}}BrowserstackCLI['getInstance']()[_0x4ce4af(0x16d)]&&(process['env']['BROWSERSTACK_CLI_BIN_SESSION_ID']=BrowserstackCLI[_0x4ce4af(0x165)]()[_0x4ce4af(0x16d)]);helper[_0x4ce4af(0x1af)](_0x84aa40[_0x4ce4af(0x179)],_0x18ff34);!helper[_0x4ce4af(0x13f)]()&&await _0x84aa40[_0x4ce4af(0x1a6)]();await helper[_0x4ce4af(0x17b)](_0x84aa40['config']);const _0x5c833e=helper[_0x4ce4af(0x13d)](_0x84aa40['config']);!helper['isUndefined'](_0x84aa40[_0x4ce4af(0x1a4)][_0x4ce4af(0x17e)])&&(process[_0x4ce4af(0x1b3)]['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON[_0x4ce4af(0x164)](_0x84aa40[_0x4ce4af(0x1a4)]['accessibilityOptions']));if(!BrowserstackCLI[_0x4ce4af(0x165)]()[_0x4ce4af(0x170)]()){const _0x3fc847=await TestHubHandler[_0x4ce4af(0x15e)](constants[_0x4ce4af(0x151)][_0x4ce4af(0x1a1)],_0x84aa40);}let _0x388ad7=[];if(!helper['isBrowserstackInfra']()){const _0xe09630={};_0xe09630['platforms']=[],_0x388ad7=helper[_0x4ce4af(0x145)](Object[_0x4ce4af(0x199)]({},_0x84aa40[_0x4ce4af(0x1a4)],_0xe09630),_0x5c833e,constants[_0x4ce4af(0x151)][_0x4ce4af(0x1a1)]);}else _0x388ad7=helper['prepareCapabilities'](_0x84aa40[_0x4ce4af(0x1a4)],_0x5c833e,constants[_0x4ce4af(0x151)][_0x4ce4af(0x1a1)]);if(!_0x84aa40[_0x4ce4af(0x1a4)])return;const _0x249425=_0x84aa40['config'][_0x4ce4af(0x19f)]||helper['getUserWorkerCount'](_0x18ff34,_0x1184ec,_0x84aa40['config'],constants[_0x4ce4af(0x151)][_0x4ce4af(0x1a1)])||0x1,_0x4bcfdf={'server':helper[_0x4ce4af(0x16b)](_0x84aa40[_0x4ce4af(0x1a4)]),'proxySettings':_0x84aa40['config'][_0x4ce4af(0x13c)],'maxWorkers':_0x249425,'browserStackLogLevel':_0x84aa40[_0x4ce4af(0x1a4)][_0x4ce4af(0x147)],'skipSessionName':_0x84aa40[_0x4ce4af(0x1a4)][_0x4ce4af(0x18e)][_0x4ce4af(0x1b7)],'skipSessionStatus':_0x84aa40['config']['testContextOptions'][_0x4ce4af(0x182)],'turboScaleUrl':_0x84aa40[_0x4ce4af(0x1a4)][_0x4ce4af(0x130)]},_0x29aa3a=process[_0x4ce4af(0x16f)],[_0x4eccc9,_0x5d3b61]=helper['parseFormatters'](_0x29aa3a),_0x584742=path[_0x4ce4af(0x186)](process[_0x4ce4af(0x1b0)](),_0x5c7348[_0x4ce4af(0x14e)]);if(_0x5c7348[_0x4ce4af(0x139)](_0x5d3b61['length'],0x0)){helper[_0x4ce4af(0x166)](_0x584742);for(let _0x21c5c5=_0x5c7348[_0x4ce4af(0x15f)](_0x4eccc9[_0x4ce4af(0x143)],0x1);_0x5c7348[_0x4ce4af(0x18c)](_0x21c5c5,0x0);_0x21c5c5--){_0x29aa3a[_0x4ce4af(0x144)](_0x4eccc9[_0x21c5c5],0x2);}}_0x5c7348['ajxPG'](_0x84aa40[_0x4ce4af(0x1a4)]['testObservability'],null)?process[_0x4ce4af(0x1b3)]['BROWSERSTACK_TEST_OBSERVABILITY_YML']=_0x84aa40['config']['testObservability']:process['env'][_0x4ce4af(0x141)]=_0x5c7348[_0x4ce4af(0x193)];PerformanceTester[_0x4ce4af(0x15d)](PerformanceEvents[_0x4ce4af(0x168)]);let _0x1d1263;_0x5c7348['ekdcu'](parallelCucumberRun,_0x388ad7,_0x4bcfdf,_0x84aa40[_0x4ce4af(0x1a4)],_0x29aa3a,_0x5d3b61)['then'](async _0x5900b2=>{const _0x3441d0=_0x4ce4af;PerformanceTester[_0x3441d0(0x1b8)](PerformanceEvents[_0x3441d0(0x16c)]),_0x1d1263=_0x5900b2;const _0x1217f1=_0x5c7348[_0x3441d0(0x14c)](printCucumberStats,_0x5900b2);process[_0x3441d0(0x1ae)]=_0x1217f1,_0x5c7348[_0x3441d0(0x1a0)](_0x5d3b61[_0x3441d0(0x143)],0x0)&&(logger[_0x3441d0(0x173)](_0x5c7348['MuNvy']),helper[_0x3441d0(0x1b4)](_0x584742,_0x5d3b61),logger[_0x3441d0(0x173)](_0x5c7348[_0x3441d0(0x176)]),helper[_0x3441d0(0x13e)](_0x584742));})[_0x4ce4af(0x18d)](async()=>{const _0x23a8b1=_0x4ce4af;PerformanceTester[_0x23a8b1(0x1b8)](PerformanceEvents[_0x23a8b1(0x16c)]),_0x84aa40[_0x23a8b1(0x142)]=helper[_0x23a8b1(0x18a)](_0x1d1263,_0x5c7348[_0x23a8b1(0x146)]),testOpsHelper['printBuildLink']();try{await TestHubHandler['stop'](),await BrowserstackCLI['getInstance']()[_0x23a8b1(0x14a)]();}catch(_0x30a3c4){logger['debug'](_0x23a8b1(0x1a9)+util['format'](_0x30a3c4));}try{const {browserstackFolderPath:_0x31f443,tcgConfigPath:_0x5f583e}=helper['getTCGConfigFilePaths']();fs[_0x23a8b1(0x191)](_0x5f583e),fs[_0x23a8b1(0x150)](_0x31f443);}catch(_0x33f75f){logger[_0x23a8b1(0x173)](_0x5c7348[_0x23a8b1(0x198)],_0x33f75f);}await utilities[_0x23a8b1(0x171)](_0x84aa40);});}module[a5_0x4a3b40(0x175)]=run;