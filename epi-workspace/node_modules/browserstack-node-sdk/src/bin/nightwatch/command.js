#!/usr/bin/env node
'use strict';function a36_0xa6e3(_0x277d10,_0x576d19){const _0x87b8fe=a36_0x87b8();return a36_0xa6e3=function(_0xa6e38a,_0x210574){_0xa6e38a=_0xa6e38a-0x1a8;let _0x51aaaa=_0x87b8fe[_0xa6e38a];return _0x51aaaa;},a36_0xa6e3(_0x277d10,_0x576d19);}const a36_0x33b4cf=a36_0xa6e3;(function(_0x45a643,_0x31b790){const _0x5b8cc7=a36_0xa6e3,_0x1a1a6d=_0x45a643();while(!![]){try{const _0x14356a=-parseInt(_0x5b8cc7(0x1b5))/0x1*(-parseInt(_0x5b8cc7(0x1f3))/0x2)+-parseInt(_0x5b8cc7(0x1e4))/0x3+parseInt(_0x5b8cc7(0x1ce))/0x4+parseInt(_0x5b8cc7(0x1ec))/0x5*(-parseInt(_0x5b8cc7(0x1da))/0x6)+-parseInt(_0x5b8cc7(0x1f5))/0x7*(-parseInt(_0x5b8cc7(0x1c2))/0x8)+parseInt(_0x5b8cc7(0x1bd))/0x9*(parseInt(_0x5b8cc7(0x1ee))/0xa)+-parseInt(_0x5b8cc7(0x1d8))/0xb;if(_0x14356a===_0x31b790)break;else _0x1a1a6d['push'](_0x1a1a6d['shift']());}catch(_0x581bcc){_0x1a1a6d['push'](_0x1a1a6d['shift']());}}}(a36_0x87b8,0x5a0de));function a36_0x87b8(){const _0x46be8a=['ipmDv','SEsHG','nightwatch.conf.js','nightwatch.json','hub.browserstack.com','platforms','isUndefined','desiredCapabilities','host','winstonLogger','Swwpx','slice','329591bYIWMS','--env','test','exports','test_settings','config','push','Deleting\x20','72HxFILx','mergeDeep','IYwkV','nightwatch','HtVyP','9944BWkIbT','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','inherit','nightwatch.cmd','XHNfB','--config','../../helpers/BrowserStackSetup','existsSync','path','stringify','forEach','join','744784UvNTho','selenium','env','QctND','now','irZSH','debug','map','UDXjC','port','2729925sUSFra','lZVSU','333012wXYFHu','cwd','platform','HbhUg','info','filter','trim','peMmx','start_process','Mxvvk','469131mycsbB','getPlatformName','splice','unlinkSync','dpWjy','nightwatch-browserstack.json','length','close','40wzOZbq','IrNwB','142130nMiNWW','split','FtufO','child\x20process\x20exited\x20with\x20code\x20','findIndex','2ugtiYX','VwlnH','3311QdEnmq','../utils/constants'];a36_0x87b8=function(){return _0x46be8a;};return a36_0x87b8();}const fs=require('fs'),path=require(a36_0x33b4cf(0x1ca)),{spawn}=require('child_process'),logger=require('../../helpers/logger')[a36_0x33b4cf(0x1b2)],{default:BrowserStackSetup}=require(a36_0x33b4cf(0x1c8)),helper=require('../../helpers/helper'),constants=require(a36_0x33b4cf(0x1a8)),getUserNightwatchConfigs=(_0x97ac7f,_0x44b461)=>{const _0x4a7717=a36_0x33b4cf,_0x3245ea={'peMmx':_0x4a7717(0x1ab),'IrNwB':_0x4a7717(0x1ac),'SEsHG':function(_0x5e26fa,_0x8672e3){return _0x5e26fa(_0x8672e3);},'VwlnH':'Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file'};let _0x5b5ed8=null,_0x36b272={};const _0xe4fcd5=_0x44b461[_0x4a7717(0x1f2)](_0x284bea=>_0x284bea==='--config');if(!helper[_0x4a7717(0x1af)](_0x97ac7f[_0x4a7717(0x1ba)])&&fs[_0x4a7717(0x1c9)](path['join'](process[_0x4a7717(0x1db)](),_0x97ac7f['config'])))_0x5b5ed8=path[_0x4a7717(0x1cd)](process['cwd'](),_0x97ac7f[_0x4a7717(0x1ba)]),_0x44b461[_0x4a7717(0x1e6)](_0xe4fcd5,0x2);else{if(fs[_0x4a7717(0x1c9)](path['join'](process[_0x4a7717(0x1db)](),_0x3245ea[_0x4a7717(0x1e1)])))_0x5b5ed8=path['join'](process[_0x4a7717(0x1db)](),_0x3245ea[_0x4a7717(0x1e1)]);else fs[_0x4a7717(0x1c9)](path['join'](process[_0x4a7717(0x1db)](),_0x3245ea['IrNwB']))&&(_0x5b5ed8=path[_0x4a7717(0x1cd)](process[_0x4a7717(0x1db)](),_0x3245ea[_0x4a7717(0x1ed)]));}return _0x5b5ed8?(logger[_0x4a7717(0x1de)]('Getting\x20your\x20nightwatch\x20configs\x20from\x20'+_0x5b5ed8),_0x36b272=_0x3245ea[_0x4a7717(0x1aa)](require,_0x5b5ed8)):logger[_0x4a7717(0x1de)](_0x3245ea[_0x4a7717(0x1f4)]),_0x36b272;},removeExistingEnvs=_0x43097f=>{const _0x521583=a36_0x33b4cf,_0x18b20d={};_0x18b20d[_0x521583(0x1d6)]=function(_0x562afd,_0x41bd57){return _0x562afd>_0x41bd57;};const _0x435465=_0x18b20d;let _0x46fa97=_0x43097f[_0x521583(0x1f2)](_0x1c6fae=>_0x1c6fae===_0x521583(0x1b6));_0x435465[_0x521583(0x1d6)](_0x46fa97,-0x1)&&_0x43097f[_0x521583(0x1e6)](_0x46fa97,0x2),_0x46fa97=_0x43097f[_0x521583(0x1f2)](_0x349996=>_0x349996==='-e'),_0x435465[_0x521583(0x1d6)](_0x46fa97,-0x1)&&_0x43097f['splice'](_0x46fa97,0x2);};function run(_0x39109f,_0x5e5fb3,_0x20eeb7){const _0x54157e=a36_0x33b4cf,_0x5a9d50={'IYwkV':_0x54157e(0x1c0),'FtufO':function(_0x3d28f5,_0x279039){return _0x3d28f5+_0x279039;},'QctND':_0x54157e(0x1b9),'YURzc':function(_0xc78e11,_0x35d03b,_0x5cf9d3){return _0xc78e11(_0x35d03b,_0x5cf9d3);},'XHNfB':_0x54157e(0x1ad),'ipmDv':_0x54157e(0x1c3),'lZVSU':function(_0x14326f,_0x251f22){return _0x14326f===_0x251f22;},'Swwpx':_0x54157e(0x1e9),'RUmNZ':function(_0x280a2f,_0x2163a7){return _0x280a2f(_0x2163a7);},'irZSH':function(_0x39f827,_0x3e7437,_0x4cbf31,_0x13fbcd){return _0x39f827(_0x3e7437,_0x4cbf31,_0x13fbcd);},'VetEb':_0x54157e(0x1c5),'Mxvvk':_0x54157e(0x1c7),'dpWjy':_0x54157e(0x1b6),'HbhUg':_0x54157e(0x1c4),'HtVyP':_0x54157e(0x1eb)};if(!_0x20eeb7[_0x54157e(0x1ba)])return;const _0x55cff4=_0x5a9d50['YURzc'](getUserNightwatchConfigs,_0x39109f,_0x5e5fb3),_0x506913={};_0x506913[_0x54157e(0x1e2)]=![];const _0x2acbe8={};_0x2acbe8[_0x54157e(0x1b1)]=_0x5a9d50[_0x54157e(0x1c6)],_0x2acbe8[_0x54157e(0x1d7)]=0x1bb;const _0x54c36d={};_0x54c36d['webdriver']=_0x506913,_0x54c36d[_0x54157e(0x1cf)]=_0x2acbe8;const _0x43a91f=_0x54c36d;logger['info'](_0x5a9d50[_0x54157e(0x1a9)]);const _0x5a74ad={..._0x55cff4},_0x416555=_0x5a74ad,_0x5779c3=helper['useW3C'](_0x20eeb7[_0x54157e(0x1ba)]),_0x2cec64=[];_0x20eeb7['config'][_0x54157e(0x1ae)][_0x54157e(0x1cc)]((_0x3b3fe4,_0x5d57c7)=>{const _0x53d7bf=_0x54157e;_0x5779c3?_0x2cec64['push'](helper['modifyBrowserStackW3CCaps'](_0x20eeb7['config'],_0x5a9d50['IYwkV'],_0x5d57c7)):_0x2cec64[_0x53d7bf(0x1bb)](helper['modifyBrowserStackCaps'](_0x20eeb7[_0x53d7bf(0x1ba)],_0x5a9d50[_0x53d7bf(0x1bf)],_0x5d57c7));});const _0x1dc190={},_0x3e50e2=[];_0x39109f[_0x54157e(0x1d0)]=_0x39109f[_0x54157e(0x1d0)]||_0x39109f['e'];const _0x4ac5de=_0x39109f[_0x54157e(0x1d0)]?_0x39109f[_0x54157e(0x1d0)][_0x54157e(0x1e0)]()[_0x54157e(0x1ef)](',')[_0x54157e(0x1d5)](_0x4acbad=>_0x4acbad[_0x54157e(0x1e0)]())[_0x54157e(0x1df)](_0x2cb135=>_0x2cb135!==''):[''];_0x5a9d50[_0x54157e(0x1d9)](_0x4ac5de[_0x54157e(0x1ea)],0x0)&&_0x4ac5de['push']('');_0x4ac5de[_0x54157e(0x1cc)](_0x48aeba=>{const _0x27965b=_0x54157e;_0x2cec64[_0x27965b(0x1cc)](_0x853ba0=>{const _0x78eb57=_0x27965b;let _0x4f71a7=_0x5a9d50[_0x78eb57(0x1f0)](helper[_0x78eb57(0x1e5)](_0x853ba0,'_'),'_'+Date[_0x78eb57(0x1d2)]());_0x48aeba&&(_0x4f71a7+='_'+_0x48aeba);if(_0x48aeba&&(!_0x55cff4[_0x5a9d50['QctND']]||!_0x55cff4[_0x5a9d50[_0x78eb57(0x1d1)]][_0x48aeba]))return;const _0x2e1fde={..._0x43a91f};_0x2e1fde[_0x78eb57(0x1b0)]=_0x853ba0;const _0x2f436b=_0x2e1fde;_0x1dc190[_0x4f71a7]=_0x48aeba?helper[_0x78eb57(0x1be)](_0x55cff4[_0x5a9d50[_0x78eb57(0x1d1)]][_0x48aeba],_0x2f436b):_0x2f436b,_0x3e50e2[_0x78eb57(0x1bb)](_0x4f71a7);});});!_0x416555['test_settings']&&(_0x416555[_0x54157e(0x1b9)]={});_0x416555[_0x54157e(0x1b9)]={..._0x416555[_0x54157e(0x1b9)],..._0x1dc190};const _0x27fde5=path[_0x54157e(0x1cd)](__dirname,_0x5a9d50[_0x54157e(0x1b3)]);fs['writeFileSync'](_0x27fde5,JSON[_0x54157e(0x1cb)](_0x416555)),_0x5a9d50['RUmNZ'](removeExistingEnvs,_0x5e5fb3);const _0x5760c2=_0x5a9d50[_0x54157e(0x1d3)](spawn,/^win/[_0x54157e(0x1b7)](process[_0x54157e(0x1dc)])?_0x5a9d50['VetEb']:_0x5a9d50[_0x54157e(0x1bf)],[_0x5a9d50[_0x54157e(0x1e3)],_0x27fde5,..._0x5e5fb3[_0x54157e(0x1b4)](0x1),_0x5a9d50[_0x54157e(0x1e8)],_0x3e50e2[_0x54157e(0x1cd)](',')],{'stdio':_0x5a9d50[_0x54157e(0x1dd)]});_0x5760c2['on'](_0x5a9d50[_0x54157e(0x1c1)],async _0x4e6a93=>{const _0x295181=_0x54157e;logger[_0x295181(0x1d4)](_0x295181(0x1f1)+_0x4e6a93),logger[_0x295181(0x1de)](_0x295181(0x1bc)+_0x27fde5),fs[_0x295181(0x1e7)](_0x27fde5);});}module[a36_0x33b4cf(0x1b8)]=run;