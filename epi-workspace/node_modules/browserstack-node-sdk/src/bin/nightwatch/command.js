#!/usr/bin/env node
'use strict';const a33_0xa0fcb6=a33_0x45ed;function a33_0x1da5(){const _0x427a82=['platform','map','36798YBrsPi','now','8293638UuPfkU','slice','platforms','23sSSIcj','env','Deleting\x20','webdriver','isUndefined','length','nightwatch-browserstack.json','info','../utils/constants','stringify','existsSync','pqHIn','child\x20process\x20exited\x20with\x20code\x20','exports','UTglE','703560xJSxWl','ZqkcD','cwd','findIndex','../../helpers/logger','Getting\x20your\x20nightwatch\x20configs\x20from\x20','filter','test_settings','605HRNjyn','modifyBrowserStackW3CCaps','sjsRn','CURvS','77lnhhMa','hub.browserstack.com','desiredCapabilities','423cVxAVx','nightwatch.cmd','selenium','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','test','config','forEach','ejuJW','host','TgVfg','unlinkSync','trim','winstonLogger','child_process','7424mgXzId','writeFileSync','OjHya','mergeDeep','fxZtL','push','--config','modifyBrowserStackCaps','EPnUC','gcYdt','XlEnT','getPlatformName','--env','933112GzROBg','RmKtP','splice','join','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','34739804olFOiM','82030LaYtzY','useW3C','debug','nightwatch.json'];a33_0x1da5=function(){return _0x427a82;};return a33_0x1da5();}(function(_0x49bd04,_0x2dcc80){const _0x4e92a5=a33_0x45ed,_0x248ca8=_0x49bd04();while(!![]){try{const _0x1f6ac7=-parseInt(_0x4e92a5(0x1c2))/0x1*(-parseInt(_0x4e92a5(0x1bd))/0x2)+parseInt(_0x4e92a5(0x1d1))/0x3+-parseInt(_0x4e92a5(0x1ee))/0x4*(-parseInt(_0x4e92a5(0x1d9))/0x5)+parseInt(_0x4e92a5(0x1bf))/0x6+parseInt(_0x4e92a5(0x1dd))/0x7*(parseInt(_0x4e92a5(0x1fb))/0x8)+-parseInt(_0x4e92a5(0x1e0))/0x9*(-parseInt(_0x4e92a5(0x201))/0xa)+-parseInt(_0x4e92a5(0x200))/0xb;if(_0x1f6ac7===_0x2dcc80)break;else _0x248ca8['push'](_0x248ca8['shift']());}catch(_0x4731a0){_0x248ca8['push'](_0x248ca8['shift']());}}}(a33_0x1da5,0xbd328));function a33_0x45ed(_0x195bca,_0x210be1){const _0x1da53f=a33_0x1da5();return a33_0x45ed=function(_0x45ed72,_0x38e6a5){_0x45ed72=_0x45ed72-0x1ba;let _0xb79b2=_0x1da53f[_0x45ed72];return _0xb79b2;},a33_0x45ed(_0x195bca,_0x210be1);}const fs=require('fs'),path=require('path'),{spawn}=require(a33_0xa0fcb6(0x1ed)),logger=require(a33_0xa0fcb6(0x1d5))[a33_0xa0fcb6(0x1ec)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require('../../helpers/helper'),constants=require(a33_0xa0fcb6(0x1ca)),getUserNightwatchConfigs=(_0x209fbb,_0x4edfba)=>{const _0x1e95e9=a33_0xa0fcb6,_0x188f25={'CURvS':'nightwatch.conf.js','TgVfg':_0x1e95e9(0x1ba),'fxZtL':function(_0x49f7b4,_0x593da4){return _0x49f7b4(_0x593da4);},'UTglE':_0x1e95e9(0x1ff)};let _0xaa03fa=null,_0x34d979={};const _0x21f48c=_0x4edfba[_0x1e95e9(0x1d4)](_0x21e388=>_0x21e388==='--config');if(!helper[_0x1e95e9(0x1c6)](_0x209fbb[_0x1e95e9(0x1e5)])&&fs[_0x1e95e9(0x1cc)](path[_0x1e95e9(0x1fe)](process[_0x1e95e9(0x1d3)](),_0x209fbb[_0x1e95e9(0x1e5)])))_0xaa03fa=path['join'](process[_0x1e95e9(0x1d3)](),_0x209fbb[_0x1e95e9(0x1e5)]),_0x4edfba['splice'](_0x21f48c,0x2);else{if(fs['existsSync'](path[_0x1e95e9(0x1fe)](process[_0x1e95e9(0x1d3)](),_0x188f25['CURvS'])))_0xaa03fa=path[_0x1e95e9(0x1fe)](process['cwd'](),_0x188f25[_0x1e95e9(0x1dc)]);else fs['existsSync'](path[_0x1e95e9(0x1fe)](process['cwd'](),_0x188f25[_0x1e95e9(0x1e9)]))&&(_0xaa03fa=path[_0x1e95e9(0x1fe)](process['cwd'](),_0x188f25[_0x1e95e9(0x1e9)]));}return _0xaa03fa?(logger[_0x1e95e9(0x1c9)](_0x1e95e9(0x1d6)+_0xaa03fa),_0x34d979=_0x188f25[_0x1e95e9(0x1f2)](require,_0xaa03fa)):logger[_0x1e95e9(0x1c9)](_0x188f25[_0x1e95e9(0x1d0)]),_0x34d979;},removeExistingEnvs=_0x3fc0eb=>{const _0x1bec9d=a33_0xa0fcb6,_0x5af736={};_0x5af736[_0x1bec9d(0x1f7)]=function(_0x162d06,_0x9a79b9){return _0x162d06>_0x9a79b9;};const _0x533ec4=_0x5af736;let _0x810df0=_0x3fc0eb[_0x1bec9d(0x1d4)](_0x20f7a3=>_0x20f7a3===_0x1bec9d(0x1fa));_0x533ec4[_0x1bec9d(0x1f7)](_0x810df0,-0x1)&&_0x3fc0eb[_0x1bec9d(0x1fd)](_0x810df0,0x2),_0x810df0=_0x3fc0eb[_0x1bec9d(0x1d4)](_0x48f455=>_0x48f455==='-e'),_0x533ec4[_0x1bec9d(0x1f7)](_0x810df0,-0x1)&&_0x3fc0eb['splice'](_0x810df0,0x2);};function run(_0x36e912,_0xd835cd,_0xa50a3b){const _0x60960c=a33_0xa0fcb6,_0x4e18f5={'XlEnT':'nightwatch','ZqkcD':function(_0x181d2f,_0x16eef3){return _0x181d2f+_0x16eef3;},'ujHQW':_0x60960c(0x1d8),'EPnUC':function(_0x346231,_0x2dcc07,_0x3633f2){return _0x346231(_0x2dcc07,_0x3633f2);},'ejuJW':_0x60960c(0x1de),'sjsRn':_0x60960c(0x1e3),'ynjuS':function(_0x313cc3,_0x3c9d60){return _0x313cc3===_0x3c9d60;},'UQhPd':_0x60960c(0x1c8),'USQKU':function(_0x2fee9b,_0x5ec421){return _0x2fee9b(_0x5ec421);},'kPtpX':function(_0x20472a,_0x1f5fde,_0x47cd13,_0xf217f6){return _0x20472a(_0x1f5fde,_0x47cd13,_0xf217f6);},'NUhVs':_0x60960c(0x1e1),'leZIn':_0x60960c(0x1f4),'RmKtP':'--env','sBDLP':'inherit','pqHIn':'close'};if(!_0xa50a3b[_0x60960c(0x1e5)])return;const _0x5cb4ed=_0x4e18f5[_0x60960c(0x1f6)](getUserNightwatchConfigs,_0x36e912,_0xd835cd),_0x216745={};_0x216745['start_process']=![];const _0x5dcb4f={};_0x5dcb4f[_0x60960c(0x1e8)]=_0x4e18f5[_0x60960c(0x1e7)],_0x5dcb4f['port']=0x1bb;const _0x277759={};_0x277759[_0x60960c(0x1c5)]=_0x216745,_0x277759[_0x60960c(0x1e2)]=_0x5dcb4f;const _0x4fda84=_0x277759;logger['info'](_0x4e18f5[_0x60960c(0x1db)]);const _0x2dbc8c={..._0x5cb4ed},_0x3d7e6f=_0x2dbc8c,_0x2ddd0f=helper[_0x60960c(0x202)](_0xa50a3b[_0x60960c(0x1e5)]),_0x14dd90=[];_0xa50a3b[_0x60960c(0x1e5)][_0x60960c(0x1c1)][_0x60960c(0x1e6)]((_0x4a9fd9,_0x5af3ee)=>{const _0x5ea509=_0x60960c;_0x2ddd0f?_0x14dd90['push'](helper[_0x5ea509(0x1da)](_0xa50a3b[_0x5ea509(0x1e5)],_0x4e18f5['XlEnT'],_0x5af3ee)):_0x14dd90[_0x5ea509(0x1f3)](helper[_0x5ea509(0x1f5)](_0xa50a3b['config'],_0x4e18f5[_0x5ea509(0x1f8)],_0x5af3ee));});const _0x4e69a5={},_0x1c032f=[];_0x36e912['env']=_0x36e912[_0x60960c(0x1c3)]||_0x36e912['e'];const _0x4a855d=_0x36e912['env']?_0x36e912['env']['trim']()['split'](',')[_0x60960c(0x1bc)](_0x633b51=>_0x633b51[_0x60960c(0x1eb)]())[_0x60960c(0x1d7)](_0x13bf07=>_0x13bf07!==''):[''];_0x4e18f5['ynjuS'](_0x4a855d[_0x60960c(0x1c7)],0x0)&&_0x4a855d[_0x60960c(0x1f3)]('');_0x4a855d[_0x60960c(0x1e6)](_0x1e55b6=>{const _0x4fe7e6={'LVEUS':function(_0x2024fc,_0x14732f){const _0x5633da=a33_0x45ed;return _0x4e18f5[_0x5633da(0x1d2)](_0x2024fc,_0x14732f);},'OjHya':_0x4e18f5['ujHQW']};_0x14dd90['forEach'](_0x19ced1=>{const _0x48d842=a33_0x45ed;let _0x5f3554=_0x4fe7e6['LVEUS'](helper[_0x48d842(0x1f9)](_0x19ced1,'_'),'_'+Date[_0x48d842(0x1be)]());_0x1e55b6&&(_0x5f3554+='_'+_0x1e55b6);if(_0x1e55b6&&(!_0x5cb4ed[_0x4fe7e6[_0x48d842(0x1f0)]]||!_0x5cb4ed[_0x4fe7e6[_0x48d842(0x1f0)]][_0x1e55b6]))return;const _0x2f5986={..._0x4fda84};_0x2f5986[_0x48d842(0x1df)]=_0x19ced1;const _0x99c7d4=_0x2f5986;_0x4e69a5[_0x5f3554]=_0x1e55b6?helper[_0x48d842(0x1f1)](_0x5cb4ed[_0x4fe7e6[_0x48d842(0x1f0)]][_0x1e55b6],_0x99c7d4):_0x99c7d4,_0x1c032f[_0x48d842(0x1f3)](_0x5f3554);});});!_0x3d7e6f[_0x60960c(0x1d8)]&&(_0x3d7e6f[_0x60960c(0x1d8)]={});_0x3d7e6f[_0x60960c(0x1d8)]={..._0x3d7e6f[_0x60960c(0x1d8)],..._0x4e69a5};const _0x2f2974=path[_0x60960c(0x1fe)](__dirname,_0x4e18f5['UQhPd']);fs[_0x60960c(0x1ef)](_0x2f2974,JSON[_0x60960c(0x1cb)](_0x3d7e6f)),_0x4e18f5['USQKU'](removeExistingEnvs,_0xd835cd);const _0x521d24=_0x4e18f5['kPtpX'](spawn,/^win/[_0x60960c(0x1e4)](process[_0x60960c(0x1bb)])?_0x4e18f5['NUhVs']:_0x4e18f5[_0x60960c(0x1f8)],[_0x4e18f5['leZIn'],_0x2f2974,..._0xd835cd[_0x60960c(0x1c0)](0x1),_0x4e18f5[_0x60960c(0x1fc)],_0x1c032f[_0x60960c(0x1fe)](',')],{'stdio':_0x4e18f5['sBDLP']});_0x521d24['on'](_0x4e18f5[_0x60960c(0x1cd)],async _0x186c64=>{const _0x1866fe=_0x60960c;logger[_0x1866fe(0x203)](_0x1866fe(0x1ce)+_0x186c64),logger[_0x1866fe(0x1c9)](_0x1866fe(0x1c4)+_0x2f2974),fs[_0x1866fe(0x1ea)](_0x2f2974);});}module[a33_0xa0fcb6(0x1cf)]=run;