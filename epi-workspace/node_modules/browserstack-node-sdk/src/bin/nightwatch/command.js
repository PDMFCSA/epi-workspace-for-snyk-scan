#!/usr/bin/env node
'use strict';const a37_0x2a42dc=a37_0x4296;(function(_0xe59495,_0x298ffd){const _0x1d0131=a37_0x4296,_0x4d5d1e=_0xe59495();while(!![]){try{const _0x1c4c49=parseInt(_0x1d0131(0x161))/0x1*(-parseInt(_0x1d0131(0x14c))/0x2)+parseInt(_0x1d0131(0x125))/0x3*(-parseInt(_0x1d0131(0x12f))/0x4)+parseInt(_0x1d0131(0x129))/0x5+parseInt(_0x1d0131(0x133))/0x6+-parseInt(_0x1d0131(0x13a))/0x7*(-parseInt(_0x1d0131(0x15e))/0x8)+-parseInt(_0x1d0131(0x152))/0x9*(-parseInt(_0x1d0131(0x153))/0xa)+-parseInt(_0x1d0131(0x13e))/0xb;if(_0x1c4c49===_0x298ffd)break;else _0x4d5d1e['push'](_0x4d5d1e['shift']());}catch(_0x3273ff){_0x4d5d1e['push'](_0x4d5d1e['shift']());}}}(a37_0x535b,0xc2f9b));function a37_0x4296(_0x2b01e9,_0x59b8c1){const _0x535bcf=a37_0x535b();return a37_0x4296=function(_0x4296c3,_0xa2279d){_0x4296c3=_0x4296c3-0x125;let _0x109cbb=_0x535bcf[_0x4296c3];return _0x109cbb;},a37_0x4296(_0x2b01e9,_0x59b8c1);}function a37_0x535b(){const _0x18a71a=['9scpfoN','KCjoD','writeFileSync','trim','4902315IzfItU','host','../../helpers/logger','join','forEach','modifyBrowserStackW3CCaps','1140780zHmtER','child_process','slice','inherit','5095596vFRhpA','env','sPaWz','HWUgU','IfLXc','cNIVe','isUndefined','3368113BOfIxu','PAlMN','findIndex','YfZXb','23134848FUJzuG','existsSync','VcKAF','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','map','split','test_settings','../../helpers/helper','--config','wAQtn','nightwatch.cmd','nightwatch-browserstack.json','BuOBD','fhVXY','4OsSRee','getPlatformName','Getting\x20your\x20nightwatch\x20configs\x20from\x20','modifyBrowserStackCaps','info','useW3C','1502379rmFPIE','80bvrZpC','CYGIE','platform','push','winstonLogger','desiredCapabilities','qrYdo','wqtMe','cwd','--env','child\x20process\x20exited\x20with\x20code\x20','24JVzdPR','hub.browserstack.com','test','425641yrVHvb','dDyhg','../utils/constants','path','Rxdwz','close','AByCc','now','config','splice','YsqbV','Deleting\x20'];a37_0x535b=function(){return _0x18a71a;};return a37_0x535b();}const fs=require('fs'),path=require(a37_0x2a42dc(0x164)),{spawn}=require(a37_0x2a42dc(0x130)),logger=require(a37_0x2a42dc(0x12b))[a37_0x2a42dc(0x157)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a37_0x2a42dc(0x145)),constants=require(a37_0x2a42dc(0x163)),getUserNightwatchConfigs=(_0x29f6fd,_0x8bc829)=>{const _0x246423=a37_0x2a42dc,_0x27277a={'sPaWz':'nightwatch.conf.js','YsqbV':'nightwatch.json','PAlMN':function(_0x5e89f0,_0x5674a4){return _0x5e89f0(_0x5674a4);},'YfZXb':_0x246423(0x141)};let _0x248a7a=null,_0x4b4f42={};const _0x398b4f=_0x8bc829[_0x246423(0x13c)](_0x455cd6=>_0x455cd6===_0x246423(0x146));if(!helper[_0x246423(0x139)](_0x29f6fd[_0x246423(0x169)])&&fs[_0x246423(0x13f)](path[_0x246423(0x12c)](process[_0x246423(0x15b)](),_0x29f6fd[_0x246423(0x169)])))_0x248a7a=path[_0x246423(0x12c)](process[_0x246423(0x15b)](),_0x29f6fd['config']),_0x8bc829['splice'](_0x398b4f,0x2);else{if(fs['existsSync'](path[_0x246423(0x12c)](process['cwd'](),_0x27277a[_0x246423(0x135)])))_0x248a7a=path[_0x246423(0x12c)](process[_0x246423(0x15b)](),_0x27277a['sPaWz']);else fs[_0x246423(0x13f)](path[_0x246423(0x12c)](process['cwd'](),_0x27277a[_0x246423(0x16b)]))&&(_0x248a7a=path['join'](process['cwd'](),_0x27277a[_0x246423(0x16b)]));}return _0x248a7a?(logger[_0x246423(0x150)](_0x246423(0x14e)+_0x248a7a),_0x4b4f42=_0x27277a[_0x246423(0x13b)](require,_0x248a7a)):logger[_0x246423(0x150)](_0x27277a[_0x246423(0x13d)]),_0x4b4f42;},removeExistingEnvs=_0x2654f=>{const _0x36f020=a37_0x2a42dc,_0x499ffc={};_0x499ffc['dDyhg']=function(_0x584b85,_0x537e49){return _0x584b85>_0x537e49;};const _0x344be6=_0x499ffc;let _0x530326=_0x2654f[_0x36f020(0x13c)](_0x13e70b=>_0x13e70b==='--env');_0x344be6[_0x36f020(0x162)](_0x530326,-0x1)&&_0x2654f[_0x36f020(0x16a)](_0x530326,0x2),_0x530326=_0x2654f['findIndex'](_0x3b177f=>_0x3b177f==='-e'),_0x344be6[_0x36f020(0x162)](_0x530326,-0x1)&&_0x2654f['splice'](_0x530326,0x2);};function run(_0x1a811e,_0x175d55,_0x9915c1){const _0xc77b97=a37_0x2a42dc,_0x22a91d={'KCjoD':'nightwatch','IfLXc':function(_0x4d6044,_0x1bd7bd){return _0x4d6044+_0x1bd7bd;},'mkqXu':'test_settings','cNIVe':function(_0x59a0a3,_0x53a2d1,_0x469269){return _0x59a0a3(_0x53a2d1,_0x469269);},'wqtMe':_0xc77b97(0x15f),'HWUgU':'Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','jTzws':function(_0x37d9f2,_0x57a83d){return _0x37d9f2===_0x57a83d;},'qrYdo':_0xc77b97(0x149),'GLhqJ':function(_0x405a4a,_0x41f494){return _0x405a4a(_0x41f494);},'Rxdwz':function(_0x25f3bc,_0x41a54d,_0x4d311d,_0x2503d7){return _0x25f3bc(_0x41a54d,_0x4d311d,_0x2503d7);},'fhVXY':_0xc77b97(0x148),'AByCc':_0xc77b97(0x146),'CYGIE':_0xc77b97(0x15c),'wAQtn':_0xc77b97(0x132),'uaxfE':_0xc77b97(0x166)};if(!_0x9915c1[_0xc77b97(0x169)])return;const _0x2d53be=_0x22a91d[_0xc77b97(0x138)](getUserNightwatchConfigs,_0x1a811e,_0x175d55),_0xc7c650={};_0xc7c650['start_process']=![];const _0x40824e={};_0x40824e[_0xc77b97(0x12a)]=_0x22a91d[_0xc77b97(0x15a)],_0x40824e['port']=0x1bb;const _0x2ed26a={};_0x2ed26a['webdriver']=_0xc7c650,_0x2ed26a['selenium']=_0x40824e;const _0x125757=_0x2ed26a;logger['info'](_0x22a91d[_0xc77b97(0x136)]);const _0x339660={..._0x2d53be},_0x3c1e7a=_0x339660,_0x74fb9b=helper[_0xc77b97(0x151)](_0x9915c1['config']),_0x240d43=[];_0x9915c1[_0xc77b97(0x169)]['platforms']['forEach']((_0xcd374,_0x264793)=>{const _0x3a5fb7=_0xc77b97;_0x74fb9b?_0x240d43[_0x3a5fb7(0x156)](helper[_0x3a5fb7(0x12e)](_0x9915c1[_0x3a5fb7(0x169)],_0x22a91d[_0x3a5fb7(0x126)],_0x264793)):_0x240d43[_0x3a5fb7(0x156)](helper[_0x3a5fb7(0x14f)](_0x9915c1[_0x3a5fb7(0x169)],_0x22a91d['KCjoD'],_0x264793));});const _0x2ecc9a={},_0x4a4481=[];_0x1a811e['env']=_0x1a811e[_0xc77b97(0x134)]||_0x1a811e['e'];const _0x26bedd=_0x1a811e[_0xc77b97(0x134)]?_0x1a811e[_0xc77b97(0x134)][_0xc77b97(0x128)]()[_0xc77b97(0x143)](',')[_0xc77b97(0x142)](_0x2f59d9=>_0x2f59d9[_0xc77b97(0x128)]())['filter'](_0x2d54cb=>_0x2d54cb!==''):[''];_0x22a91d['jTzws'](_0x26bedd['length'],0x0)&&_0x26bedd[_0xc77b97(0x156)]('');_0x26bedd[_0xc77b97(0x12d)](_0x383681=>{const _0x11a84a=_0xc77b97,_0x49c05a={'VcKAF':function(_0x122d7e,_0x1704ad){const _0x41a0bf=a37_0x4296;return _0x22a91d[_0x41a0bf(0x137)](_0x122d7e,_0x1704ad);},'BuOBD':_0x22a91d['mkqXu']};_0x240d43[_0x11a84a(0x12d)](_0x5b2877=>{const _0x508ed9=_0x11a84a;let _0x49d4bf=_0x49c05a[_0x508ed9(0x140)](helper[_0x508ed9(0x14d)](_0x5b2877,'_'),'_'+Date[_0x508ed9(0x168)]());_0x383681&&(_0x49d4bf+='_'+_0x383681);if(_0x383681&&(!_0x2d53be[_0x49c05a['BuOBD']]||!_0x2d53be[_0x49c05a[_0x508ed9(0x14a)]][_0x383681]))return;const _0x3c2fe6={..._0x125757};_0x3c2fe6[_0x508ed9(0x158)]=_0x5b2877;const _0x424957=_0x3c2fe6;_0x2ecc9a[_0x49d4bf]=_0x383681?helper['mergeDeep'](_0x2d53be[_0x49c05a[_0x508ed9(0x14a)]][_0x383681],_0x424957):_0x424957,_0x4a4481[_0x508ed9(0x156)](_0x49d4bf);});});!_0x3c1e7a['test_settings']&&(_0x3c1e7a[_0xc77b97(0x144)]={});_0x3c1e7a[_0xc77b97(0x144)]={..._0x3c1e7a[_0xc77b97(0x144)],..._0x2ecc9a};const _0x3618c1=path[_0xc77b97(0x12c)](__dirname,_0x22a91d[_0xc77b97(0x159)]);fs[_0xc77b97(0x127)](_0x3618c1,JSON['stringify'](_0x3c1e7a)),_0x22a91d['GLhqJ'](removeExistingEnvs,_0x175d55);const _0x3fcf06=_0x22a91d[_0xc77b97(0x165)](spawn,/^win/[_0xc77b97(0x160)](process[_0xc77b97(0x155)])?_0x22a91d[_0xc77b97(0x14b)]:_0x22a91d[_0xc77b97(0x126)],[_0x22a91d[_0xc77b97(0x167)],_0x3618c1,..._0x175d55[_0xc77b97(0x131)](0x1),_0x22a91d[_0xc77b97(0x154)],_0x4a4481[_0xc77b97(0x12c)](',')],{'stdio':_0x22a91d[_0xc77b97(0x147)]});_0x3fcf06['on'](_0x22a91d['uaxfE'],async _0xbcc19f=>{const _0x5308f6=_0xc77b97;logger['debug'](_0x5308f6(0x15d)+_0xbcc19f),logger['info'](_0x5308f6(0x16c)+_0x3618c1),fs['unlinkSync'](_0x3618c1);});}module['exports']=run;