#!/usr/bin/env node
'use strict';const a36_0x159265=a36_0x625c;(function(_0x274485,_0x485303){const _0x3226b1=a36_0x625c,_0x1d427c=_0x274485();while(!![]){try{const _0x3d0768=parseInt(_0x3226b1(0x1dd))/0x1+-parseInt(_0x3226b1(0x1ed))/0x2+-parseInt(_0x3226b1(0x1d7))/0x3*(-parseInt(_0x3226b1(0x1af))/0x4)+parseInt(_0x3226b1(0x1d8))/0x5+-parseInt(_0x3226b1(0x1cc))/0x6*(parseInt(_0x3226b1(0x1db))/0x7)+-parseInt(_0x3226b1(0x1c4))/0x8*(-parseInt(_0x3226b1(0x1a8))/0x9)+-parseInt(_0x3226b1(0x1de))/0xa*(parseInt(_0x3226b1(0x1b3))/0xb);if(_0x3d0768===_0x485303)break;else _0x1d427c['push'](_0x1d427c['shift']());}catch(_0x3ae930){_0x1d427c['push'](_0x1d427c['shift']());}}}(a36_0x4ed6,0xf3a17));const fs=require('fs'),path=require(a36_0x159265(0x1c8)),{spawn}=require(a36_0x159265(0x1d9)),logger=require('../../helpers/logger')[a36_0x159265(0x1c6)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a36_0x159265(0x1b9)),constants=require('../utils/constants'),getUserNightwatchConfigs=(_0x5b6acb,_0x29f7f5)=>{const _0xfff6e7=a36_0x159265,_0x191a1d={'WoRjc':_0xfff6e7(0x1b4),'DWfiT':_0xfff6e7(0x1ca),'HLxTW':function(_0x31d1cc,_0x120466){return _0x31d1cc(_0x120466);},'khyaN':_0xfff6e7(0x1bd)};let _0x1798d4=null,_0x5d7426={};const _0x3fdc7b=_0x29f7f5[_0xfff6e7(0x1be)](_0x3bb266=>_0x3bb266===_0xfff6e7(0x1aa));if(!helper['isUndefined'](_0x5b6acb[_0xfff6e7(0x1a4)])&&fs['existsSync'](path['join'](process[_0xfff6e7(0x1e2)](),_0x5b6acb[_0xfff6e7(0x1a4)])))_0x1798d4=path[_0xfff6e7(0x1b0)](process[_0xfff6e7(0x1e2)](),_0x5b6acb[_0xfff6e7(0x1a4)]),_0x29f7f5[_0xfff6e7(0x1d2)](_0x3fdc7b,0x2);else{if(fs[_0xfff6e7(0x1bc)](path['join'](process[_0xfff6e7(0x1e2)](),_0x191a1d[_0xfff6e7(0x1ec)])))_0x1798d4=path[_0xfff6e7(0x1b0)](process[_0xfff6e7(0x1e2)](),_0x191a1d[_0xfff6e7(0x1ec)]);else fs['existsSync'](path['join'](process['cwd'](),_0x191a1d[_0xfff6e7(0x1c5)]))&&(_0x1798d4=path[_0xfff6e7(0x1b0)](process[_0xfff6e7(0x1e2)](),_0x191a1d['DWfiT']));}return _0x1798d4?(logger[_0xfff6e7(0x1ce)](_0xfff6e7(0x1ab)+_0x1798d4),_0x5d7426=_0x191a1d[_0xfff6e7(0x1ac)](require,_0x1798d4)):logger[_0xfff6e7(0x1ce)](_0x191a1d['khyaN']),_0x5d7426;},removeExistingEnvs=_0x51f1da=>{const _0x57e318=a36_0x159265,_0x28453a={};_0x28453a[_0x57e318(0x1c2)]=function(_0x281b8e,_0x1b1b04){return _0x281b8e>_0x1b1b04;};const _0x1fd4a6=_0x28453a;let _0x36a0a6=_0x51f1da[_0x57e318(0x1be)](_0x60c510=>_0x60c510===_0x57e318(0x1c9));_0x1fd4a6[_0x57e318(0x1c2)](_0x36a0a6,-0x1)&&_0x51f1da['splice'](_0x36a0a6,0x2),_0x36a0a6=_0x51f1da[_0x57e318(0x1be)](_0x58ae8c=>_0x58ae8c==='-e'),_0x1fd4a6['bUINx'](_0x36a0a6,-0x1)&&_0x51f1da[_0x57e318(0x1d2)](_0x36a0a6,0x2);};function a36_0x4ed6(){const _0x2c45ec=['kSzLc','splice','bLzuF','Ujwba','Deleting\x20','nightwatch','1338ZsNOwK','4037645AsmwuL','child_process','split','64939EFLwuq','close','1611993rNIqQp','910XfKMEx','platforms','CUwHp','trim','cwd','YbhbI','ieQms','host','now','push','webdriver','test_settings','dugvd','VKDfu','WoRjc','3868780JlyGsV','config','PREQz','forEach','platform','117BSanfZ','getPlatformName','--config','Getting\x20your\x20nightwatch\x20configs\x20from\x20','HLxTW','child\x20process\x20exited\x20with\x20code\x20','port','668ePohjY','join','nightwatch-browserstack.json','test','17039VsvOXr','nightwatch.conf.js','haagI','stringify','exports','vIAbH','../../helpers/helper','length','writeFileSync','existsSync','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','findIndex','aSJhH','ktrIL','URPqq','bUINx','unlinkSync','1041536sekSDL','DWfiT','winstonLogger','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','path','--env','nightwatch.json','hub.browserstack.com','720WgdRod','start_process','info','env','tYpjZ'];a36_0x4ed6=function(){return _0x2c45ec;};return a36_0x4ed6();}function a36_0x625c(_0xe7e737,_0xc6404){const _0x4ed664=a36_0x4ed6();return a36_0x625c=function(_0x625c5d,_0x975252){_0x625c5d=_0x625c5d-0x1a4;let _0x2f48c0=_0x4ed664[_0x625c5d];return _0x2f48c0;},a36_0x625c(_0xe7e737,_0xc6404);}function run(_0x1e2645,_0x148588,_0x3f5f6f){const _0x5e9fd9=a36_0x159265,_0x183d98={'bLzuF':_0x5e9fd9(0x1d6),'PREQz':function(_0x3bd0f5,_0x22b9a2){return _0x3bd0f5+_0x22b9a2;},'ieQms':_0x5e9fd9(0x1e9),'Ujwba':function(_0xd173ee,_0x5c5827,_0x57f4fe){return _0xd173ee(_0x5c5827,_0x57f4fe);},'ktrIL':_0x5e9fd9(0x1cb),'VKDfu':_0x5e9fd9(0x1c7),'aSJhH':function(_0x174ba8,_0x231ab7){return _0x174ba8===_0x231ab7;},'tYpjZ':_0x5e9fd9(0x1b1),'CUwHp':function(_0x5b6d38,_0x4a1fdf){return _0x5b6d38(_0x4a1fdf);},'vIAbH':function(_0xcdd10c,_0x808b80,_0x310d31,_0xf532e9){return _0xcdd10c(_0x808b80,_0x310d31,_0xf532e9);},'dugvd':'nightwatch.cmd','kSzLc':_0x5e9fd9(0x1aa),'URPqq':_0x5e9fd9(0x1c9),'YbhbI':'inherit','haagI':_0x5e9fd9(0x1dc)};if(!_0x3f5f6f[_0x5e9fd9(0x1a4)])return;const _0x17b381=_0x183d98[_0x5e9fd9(0x1d4)](getUserNightwatchConfigs,_0x1e2645,_0x148588),_0x1a7dc4={};_0x1a7dc4[_0x5e9fd9(0x1cd)]=![];const _0x2c5385={};_0x2c5385[_0x5e9fd9(0x1e5)]=_0x183d98[_0x5e9fd9(0x1c0)],_0x2c5385[_0x5e9fd9(0x1ae)]=0x1bb;const _0x1197e6={};_0x1197e6[_0x5e9fd9(0x1e8)]=_0x1a7dc4,_0x1197e6['selenium']=_0x2c5385;const _0x253bb2=_0x1197e6;logger['info'](_0x183d98[_0x5e9fd9(0x1eb)]);const _0xe4ca5f={..._0x17b381},_0x16e77e=_0xe4ca5f,_0x53d176=helper['useW3C'](_0x3f5f6f[_0x5e9fd9(0x1a4)]),_0x2f38c5=[];_0x3f5f6f['config'][_0x5e9fd9(0x1df)]['forEach']((_0x49a684,_0x8621bc)=>{const _0x20f905=_0x5e9fd9;_0x53d176?_0x2f38c5[_0x20f905(0x1e7)](helper['modifyBrowserStackW3CCaps'](_0x3f5f6f[_0x20f905(0x1a4)],_0x183d98[_0x20f905(0x1d3)],_0x8621bc)):_0x2f38c5['push'](helper['modifyBrowserStackCaps'](_0x3f5f6f[_0x20f905(0x1a4)],_0x183d98[_0x20f905(0x1d3)],_0x8621bc));});const _0x381087={},_0x423366=[];_0x1e2645[_0x5e9fd9(0x1cf)]=_0x1e2645[_0x5e9fd9(0x1cf)]||_0x1e2645['e'];const _0x48fc05=_0x1e2645['env']?_0x1e2645[_0x5e9fd9(0x1cf)][_0x5e9fd9(0x1e1)]()[_0x5e9fd9(0x1da)](',')['map'](_0x32fca8=>_0x32fca8[_0x5e9fd9(0x1e1)]())['filter'](_0x16a3ce=>_0x16a3ce!==''):[''];_0x183d98[_0x5e9fd9(0x1bf)](_0x48fc05[_0x5e9fd9(0x1ba)],0x0)&&_0x48fc05[_0x5e9fd9(0x1e7)]('');_0x48fc05['forEach'](_0x1065c3=>{const _0x57f0cc=_0x5e9fd9;_0x2f38c5[_0x57f0cc(0x1a6)](_0x28c208=>{const _0x11d61d=_0x57f0cc;let _0x28de5a=_0x183d98[_0x11d61d(0x1a5)](helper[_0x11d61d(0x1a9)](_0x28c208,'_'),'_'+Date[_0x11d61d(0x1e6)]());_0x1065c3&&(_0x28de5a+='_'+_0x1065c3);if(_0x1065c3&&(!_0x17b381[_0x183d98[_0x11d61d(0x1e4)]]||!_0x17b381[_0x183d98[_0x11d61d(0x1e4)]][_0x1065c3]))return;const _0x435ae2={..._0x253bb2};_0x435ae2['desiredCapabilities']=_0x28c208;const _0x1bba8e=_0x435ae2;_0x381087[_0x28de5a]=_0x1065c3?helper['mergeDeep'](_0x17b381[_0x183d98[_0x11d61d(0x1e4)]][_0x1065c3],_0x1bba8e):_0x1bba8e,_0x423366[_0x11d61d(0x1e7)](_0x28de5a);});});!_0x16e77e[_0x5e9fd9(0x1e9)]&&(_0x16e77e[_0x5e9fd9(0x1e9)]={});_0x16e77e[_0x5e9fd9(0x1e9)]={..._0x16e77e[_0x5e9fd9(0x1e9)],..._0x381087};const _0x15875c=path[_0x5e9fd9(0x1b0)](__dirname,_0x183d98[_0x5e9fd9(0x1d0)]);fs[_0x5e9fd9(0x1bb)](_0x15875c,JSON[_0x5e9fd9(0x1b6)](_0x16e77e)),_0x183d98[_0x5e9fd9(0x1e0)](removeExistingEnvs,_0x148588);const _0x57c0b3=_0x183d98[_0x5e9fd9(0x1b8)](spawn,/^win/[_0x5e9fd9(0x1b2)](process[_0x5e9fd9(0x1a7)])?_0x183d98[_0x5e9fd9(0x1ea)]:_0x183d98[_0x5e9fd9(0x1d3)],[_0x183d98[_0x5e9fd9(0x1d1)],_0x15875c,..._0x148588['slice'](0x1),_0x183d98[_0x5e9fd9(0x1c1)],_0x423366[_0x5e9fd9(0x1b0)](',')],{'stdio':_0x183d98[_0x5e9fd9(0x1e3)]});_0x57c0b3['on'](_0x183d98[_0x5e9fd9(0x1b5)],async _0x36a4a1=>{const _0x4d780f=_0x5e9fd9;logger['debug'](_0x4d780f(0x1ad)+_0x36a4a1),logger[_0x4d780f(0x1ce)](_0x4d780f(0x1d5)+_0x15875c),fs[_0x4d780f(0x1c3)](_0x15875c);});}module[a36_0x159265(0x1b7)]=run;