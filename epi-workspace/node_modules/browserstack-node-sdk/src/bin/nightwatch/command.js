#!/usr/bin/env node
'use strict';const a37_0x1e8aa3=a37_0x41a0;function a37_0x41a0(_0x420011,_0x1fe90c){const _0x566342=a37_0x5663();return a37_0x41a0=function(_0x41a084,_0x1aa6e8){_0x41a084=_0x41a084-0x1af;let _0x3d1ac7=_0x566342[_0x41a084];return _0x3d1ac7;},a37_0x41a0(_0x420011,_0x1fe90c);}(function(_0x639154,_0x3ca904){const _0xf92e97=a37_0x41a0,_0x130901=_0x639154();while(!![]){try{const _0x378c24=parseInt(_0xf92e97(0x1c0))/0x1*(-parseInt(_0xf92e97(0x1db))/0x2)+parseInt(_0xf92e97(0x1eb))/0x3+-parseInt(_0xf92e97(0x1ee))/0x4*(-parseInt(_0xf92e97(0x1e5))/0x5)+-parseInt(_0xf92e97(0x1e0))/0x6*(parseInt(_0xf92e97(0x1c8))/0x7)+-parseInt(_0xf92e97(0x1bf))/0x8+parseInt(_0xf92e97(0x1bc))/0x9+parseInt(_0xf92e97(0x1b0))/0xa;if(_0x378c24===_0x3ca904)break;else _0x130901['push'](_0x130901['shift']());}catch(_0x495826){_0x130901['push'](_0x130901['shift']());}}}(a37_0x5663,0x7ae4c));function a37_0x5663(){const _0x213670=['nightwatch.cmd','trim','Getting\x20your\x20nightwatch\x20configs\x20from\x20','36slKmkQ','close','info','webdriver','start_process','15LHDtOh','CfnoA','GQGxp','child\x20process\x20exited\x20with\x20code\x20','eGLJJ','Qmeah','432288ZhMCiw','jOPxE','filter','1207964RLdNxU','exports','isUndefined','stringify','jaUYN','path','selenium','useW3C','yOxOq','nightwatch-browserstack.json','../../helpers/BrowserStackSetup','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','15968990KspowU','modifyBrowserStackW3CCaps','SMdER','config','XdOPL','nightwatch.conf.js','now','rFtEZ','cwd','map','env','nWlOB','102915SFJeXk','test_settings','Qkllr','7110536cRWUtR','1XqoDNS','writeFileSync','splice','existsSync','cLyhy','--env','test','mergeDeep','1106602EOQfst','port','length','hub.browserstack.com','join','winstonLogger','host','GPeoD','push','pSFfR','findIndex','split','unlinkSync','forEach','../../helpers/logger','rzpyW','nightwatch.json','../../helpers/helper','--config','635396jvZqTR','platforms'];a37_0x5663=function(){return _0x213670;};return a37_0x5663();}const fs=require('fs'),path=require(a37_0x1e8aa3(0x1f3)),{spawn}=require('child_process'),logger=require(a37_0x1e8aa3(0x1d6))[a37_0x1e8aa3(0x1cd)],{default:BrowserStackSetup}=require(a37_0x1e8aa3(0x1f8)),helper=require(a37_0x1e8aa3(0x1d9)),constants=require('../utils/constants'),getUserNightwatchConfigs=(_0x49209e,_0x52556f)=>{const _0x49c46e=a37_0x1e8aa3,_0x565e32={'Qmeah':_0x49c46e(0x1b5),'nWlOB':_0x49c46e(0x1d8),'rzpyW':function(_0x5b4153,_0x2b8af3){return _0x5b4153(_0x2b8af3);},'GQGxp':'Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file'};let _0x55752d=null,_0xb9fc54={};const _0xd52a39=_0x52556f['findIndex'](_0x5c2f1d=>_0x5c2f1d===_0x49c46e(0x1da));if(!helper[_0x49c46e(0x1f0)](_0x49209e[_0x49c46e(0x1b3)])&&fs[_0x49c46e(0x1c3)](path[_0x49c46e(0x1cc)](process['cwd'](),_0x49209e[_0x49c46e(0x1b3)])))_0x55752d=path[_0x49c46e(0x1cc)](process[_0x49c46e(0x1b8)](),_0x49209e['config']),_0x52556f[_0x49c46e(0x1c2)](_0xd52a39,0x2);else{if(fs[_0x49c46e(0x1c3)](path[_0x49c46e(0x1cc)](process[_0x49c46e(0x1b8)](),_0x565e32[_0x49c46e(0x1ea)])))_0x55752d=path[_0x49c46e(0x1cc)](process[_0x49c46e(0x1b8)](),_0x565e32[_0x49c46e(0x1ea)]);else fs['existsSync'](path[_0x49c46e(0x1cc)](process['cwd'](),_0x565e32['nWlOB']))&&(_0x55752d=path[_0x49c46e(0x1cc)](process[_0x49c46e(0x1b8)](),_0x565e32[_0x49c46e(0x1bb)]));}return _0x55752d?(logger['info'](_0x49c46e(0x1df)+_0x55752d),_0xb9fc54=_0x565e32[_0x49c46e(0x1d7)](require,_0x55752d)):logger[_0x49c46e(0x1e2)](_0x565e32[_0x49c46e(0x1e7)]),_0xb9fc54;},removeExistingEnvs=_0x27a285=>{const _0x27af43=a37_0x1e8aa3,_0x7bf163={};_0x7bf163['jOPxE']=function(_0x776ddb,_0x4b9a26){return _0x776ddb>_0x4b9a26;},_0x7bf163[_0x27af43(0x1b2)]=function(_0x4e25da,_0x82a74a){return _0x4e25da>_0x82a74a;};const _0x2e3794=_0x7bf163;let _0x38acdc=_0x27a285[_0x27af43(0x1d2)](_0x143ed0=>_0x143ed0===_0x27af43(0x1c5));_0x2e3794[_0x27af43(0x1ec)](_0x38acdc,-0x1)&&_0x27a285['splice'](_0x38acdc,0x2),_0x38acdc=_0x27a285[_0x27af43(0x1d2)](_0x174b54=>_0x174b54==='-e'),_0x2e3794[_0x27af43(0x1b2)](_0x38acdc,-0x1)&&_0x27a285['splice'](_0x38acdc,0x2);};function run(_0x1da230,_0x1cb9d3,_0x3e8fb7){const _0x3ad5ad=a37_0x1e8aa3,_0x31861e={'pSFfR':'nightwatch','yOxOq':function(_0x498ecc,_0x5545ab){return _0x498ecc+_0x5545ab;},'jaUYN':_0x3ad5ad(0x1bd),'CfnoA':function(_0x50a6e8,_0x2cc17e,_0x2b1066){return _0x50a6e8(_0x2cc17e,_0x2b1066);},'dOhgK':_0x3ad5ad(0x1cb),'cLyhy':_0x3ad5ad(0x1af),'rFtEZ':function(_0x1ede81,_0x4f5075){return _0x1ede81===_0x4f5075;},'eGLJJ':_0x3ad5ad(0x1f7),'MtkOR':function(_0x22d98e,_0x2bc24f){return _0x22d98e(_0x2bc24f);},'Qkllr':function(_0x52edbe,_0x3df211,_0x19f341,_0x71b9b7){return _0x52edbe(_0x3df211,_0x19f341,_0x71b9b7);},'fIOeH':_0x3ad5ad(0x1dd),'XdOPL':_0x3ad5ad(0x1da),'GPeoD':_0x3ad5ad(0x1c5),'jjASe':'inherit','SiVac':_0x3ad5ad(0x1e1)};if(!_0x3e8fb7[_0x3ad5ad(0x1b3)])return;const _0x252991=_0x31861e[_0x3ad5ad(0x1e6)](getUserNightwatchConfigs,_0x1da230,_0x1cb9d3),_0x38714f={};_0x38714f[_0x3ad5ad(0x1e4)]=![];const _0x29fa73={};_0x29fa73[_0x3ad5ad(0x1ce)]=_0x31861e['dOhgK'],_0x29fa73[_0x3ad5ad(0x1c9)]=0x1bb;const _0x4b9f82={};_0x4b9f82[_0x3ad5ad(0x1e3)]=_0x38714f,_0x4b9f82[_0x3ad5ad(0x1f4)]=_0x29fa73;const _0x122685=_0x4b9f82;logger[_0x3ad5ad(0x1e2)](_0x31861e[_0x3ad5ad(0x1c4)]);const _0x260322={..._0x252991},_0x5a77ca=_0x260322,_0x45f696=helper[_0x3ad5ad(0x1f5)](_0x3e8fb7[_0x3ad5ad(0x1b3)]),_0x363b61=[];_0x3e8fb7[_0x3ad5ad(0x1b3)][_0x3ad5ad(0x1dc)][_0x3ad5ad(0x1d5)]((_0x222bec,_0x1a3d5e)=>{const _0x2eda5d=_0x3ad5ad;_0x45f696?_0x363b61[_0x2eda5d(0x1d0)](helper[_0x2eda5d(0x1b1)](_0x3e8fb7[_0x2eda5d(0x1b3)],_0x31861e[_0x2eda5d(0x1d1)],_0x1a3d5e)):_0x363b61[_0x2eda5d(0x1d0)](helper['modifyBrowserStackCaps'](_0x3e8fb7['config'],_0x31861e[_0x2eda5d(0x1d1)],_0x1a3d5e));});const _0x26309d={},_0x45e9fb=[];_0x1da230[_0x3ad5ad(0x1ba)]=_0x1da230[_0x3ad5ad(0x1ba)]||_0x1da230['e'];const _0x580b2f=_0x1da230['env']?_0x1da230[_0x3ad5ad(0x1ba)][_0x3ad5ad(0x1de)]()[_0x3ad5ad(0x1d3)](',')[_0x3ad5ad(0x1b9)](_0x56e830=>_0x56e830[_0x3ad5ad(0x1de)]())[_0x3ad5ad(0x1ed)](_0x167b4c=>_0x167b4c!==''):[''];_0x31861e[_0x3ad5ad(0x1b7)](_0x580b2f[_0x3ad5ad(0x1ca)],0x0)&&_0x580b2f[_0x3ad5ad(0x1d0)]('');_0x580b2f['forEach'](_0x363492=>{const _0x1eafd6=_0x3ad5ad;_0x363b61[_0x1eafd6(0x1d5)](_0x2423cb=>{const _0x5aed6b=_0x1eafd6;let _0x5c3994=_0x31861e[_0x5aed6b(0x1f6)](helper['getPlatformName'](_0x2423cb,'_'),'_'+Date[_0x5aed6b(0x1b6)]());_0x363492&&(_0x5c3994+='_'+_0x363492);if(_0x363492&&(!_0x252991[_0x31861e[_0x5aed6b(0x1f2)]]||!_0x252991[_0x31861e[_0x5aed6b(0x1f2)]][_0x363492]))return;const _0x12b35e={..._0x122685};_0x12b35e['desiredCapabilities']=_0x2423cb;const _0x3f7dac=_0x12b35e;_0x26309d[_0x5c3994]=_0x363492?helper[_0x5aed6b(0x1c7)](_0x252991[_0x31861e[_0x5aed6b(0x1f2)]][_0x363492],_0x3f7dac):_0x3f7dac,_0x45e9fb['push'](_0x5c3994);});});!_0x5a77ca[_0x3ad5ad(0x1bd)]&&(_0x5a77ca[_0x3ad5ad(0x1bd)]={});_0x5a77ca[_0x3ad5ad(0x1bd)]={..._0x5a77ca['test_settings'],..._0x26309d};const _0x2a98c9=path[_0x3ad5ad(0x1cc)](__dirname,_0x31861e[_0x3ad5ad(0x1e9)]);fs[_0x3ad5ad(0x1c1)](_0x2a98c9,JSON[_0x3ad5ad(0x1f1)](_0x5a77ca)),_0x31861e['MtkOR'](removeExistingEnvs,_0x1cb9d3);const _0x3e8ee7=_0x31861e[_0x3ad5ad(0x1be)](spawn,/^win/[_0x3ad5ad(0x1c6)](process['platform'])?_0x31861e['fIOeH']:_0x31861e[_0x3ad5ad(0x1d1)],[_0x31861e[_0x3ad5ad(0x1b4)],_0x2a98c9,..._0x1cb9d3['slice'](0x1),_0x31861e[_0x3ad5ad(0x1cf)],_0x45e9fb['join'](',')],{'stdio':_0x31861e['jjASe']});_0x3e8ee7['on'](_0x31861e['SiVac'],async _0xc553a7=>{const _0x164932=_0x3ad5ad;logger['debug'](_0x164932(0x1e8)+_0xc553a7),logger[_0x164932(0x1e2)]('Deleting\x20'+_0x2a98c9),fs[_0x164932(0x1d4)](_0x2a98c9);});}module[a37_0x1e8aa3(0x1ef)]=run;