#!/usr/bin/env node
'use strict';const a37_0x145cac=a37_0x2e77;(function(_0x3b6ce0,_0x223322){const _0x13acba=a37_0x2e77,_0xf91f01=_0x3b6ce0();while(!![]){try{const _0x5e83d6=parseInt(_0x13acba(0x12d))/0x1*(parseInt(_0x13acba(0x162))/0x2)+-parseInt(_0x13acba(0x151))/0x3+parseInt(_0x13acba(0x15d))/0x4*(parseInt(_0x13acba(0x168))/0x5)+-parseInt(_0x13acba(0x13e))/0x6*(-parseInt(_0x13acba(0x140))/0x7)+parseInt(_0x13acba(0x15f))/0x8+parseInt(_0x13acba(0x158))/0x9*(parseInt(_0x13acba(0x137))/0xa)+-parseInt(_0x13acba(0x14d))/0xb*(parseInt(_0x13acba(0x166))/0xc);if(_0x5e83d6===_0x223322)break;else _0xf91f01['push'](_0xf91f01['shift']());}catch(_0x1b365f){_0xf91f01['push'](_0xf91f01['shift']());}}}(a37_0x332f,0x3f394));function a37_0x2e77(_0x4918e7,_0x20037f){const _0x332f62=a37_0x332f();return a37_0x2e77=function(_0x2e77c0,_0x1434da){_0x2e77c0=_0x2e77c0-0x121;let _0x21a6a7=_0x332f62[_0x2e77c0];return _0x21a6a7;},a37_0x2e77(_0x4918e7,_0x20037f);}const fs=require('fs'),path=require('path'),{spawn}=require(a37_0x145cac(0x135)),logger=require('../../helpers/logger')[a37_0x145cac(0x132)],{default:BrowserStackSetup}=require(a37_0x145cac(0x13a)),helper=require('../../helpers/helper'),constants=require(a37_0x145cac(0x134)),getUserNightwatchConfigs=(_0x4ac0fe,_0x5e842e)=>{const _0x458f2d=a37_0x145cac,_0xa53b11={'tKJzu':_0x458f2d(0x129),'UbUaa':_0x458f2d(0x141),'yQhtA':function(_0xbcc454,_0x25945c){return _0xbcc454(_0x25945c);},'zCcgN':_0x458f2d(0x160)};let _0x1aba05=null,_0x56cedf={};const _0x59c096=_0x5e842e[_0x458f2d(0x155)](_0x204872=>_0x204872===_0x458f2d(0x165));if(!helper[_0x458f2d(0x14e)](_0x4ac0fe['config'])&&fs[_0x458f2d(0x125)](path['join'](process[_0x458f2d(0x128)](),_0x4ac0fe[_0x458f2d(0x123)])))_0x1aba05=path[_0x458f2d(0x121)](process[_0x458f2d(0x128)](),_0x4ac0fe['config']),_0x5e842e[_0x458f2d(0x15b)](_0x59c096,0x2);else{if(fs['existsSync'](path['join'](process[_0x458f2d(0x128)](),_0xa53b11[_0x458f2d(0x127)])))_0x1aba05=path[_0x458f2d(0x121)](process[_0x458f2d(0x128)](),_0xa53b11[_0x458f2d(0x127)]);else fs[_0x458f2d(0x125)](path[_0x458f2d(0x121)](process['cwd'](),_0xa53b11[_0x458f2d(0x159)]))&&(_0x1aba05=path[_0x458f2d(0x121)](process[_0x458f2d(0x128)](),_0xa53b11[_0x458f2d(0x159)]));}return _0x1aba05?(logger[_0x458f2d(0x131)](_0x458f2d(0x16a)+_0x1aba05),_0x56cedf=_0xa53b11[_0x458f2d(0x138)](require,_0x1aba05)):logger['info'](_0xa53b11['zCcgN']),_0x56cedf;},removeExistingEnvs=_0x4c007c=>{const _0x565c5b=a37_0x145cac,_0x2c047e={};_0x2c047e[_0x565c5b(0x130)]=function(_0x472be0,_0x29dcd1){return _0x472be0>_0x29dcd1;},_0x2c047e[_0x565c5b(0x146)]=function(_0xef3f9c,_0x3f65a9){return _0xef3f9c>_0x3f65a9;};const _0x57250c=_0x2c047e;let _0xe667ad=_0x4c007c['findIndex'](_0x41e4a2=>_0x41e4a2===_0x565c5b(0x145));_0x57250c[_0x565c5b(0x130)](_0xe667ad,-0x1)&&_0x4c007c[_0x565c5b(0x15b)](_0xe667ad,0x2),_0xe667ad=_0x4c007c[_0x565c5b(0x155)](_0x1445a0=>_0x1445a0==='-e'),_0x57250c[_0x565c5b(0x146)](_0xe667ad,-0x1)&&_0x4c007c[_0x565c5b(0x15b)](_0xe667ad,0x2);};function a37_0x332f(){const _0x5071e6=['4028304IfLiof','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','ykOzk','11366XqDuZz','inherit','desiredCapabilities','--config','384CdqJtc','nightwatch-browserstack.json','10DVhPJs','nightwatch','Getting\x20your\x20nightwatch\x20configs\x20from\x20','FkZUJ','child\x20process\x20exited\x20with\x20code\x20','join','FDZph','config','modifyBrowserStackCaps','existsSync','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','tKJzu','cwd','nightwatch.conf.js','platform','AaAfq','selenium','29psaBCI','hub.browserstack.com','map','fvrZZ','info','winstonLogger','length','../utils/constants','child_process','filter','2160LEVjXQ','yQhtA','mergeDeep','../../helpers/BrowserStackSetup','push','EphQe','kiabL','180PuYaiX','writeFileSync','11403TtDAys','nightwatch.json','useW3C','feuuB','webdriver','--env','qIkas','debug','Deleting\x20','LAqsQ','test_settings','stringify','exports','229834RPlIJu','isUndefined','Pyqix','forEach','588423DzUhqx','trim','OfzVB','platforms','findIndex','mwNMR','env','3735vuGCNF','UbUaa','getPlatformName','splice','modifyBrowserStackW3CCaps','633716kCkSje','hkAQw'];a37_0x332f=function(){return _0x5071e6;};return a37_0x332f();}function run(_0xf209b,_0x2fbd27,_0x3efd26){const _0xd79f17=a37_0x145cac,_0x366997={'ykOzk':_0xd79f17(0x169),'FDbAL':function(_0x5f1713,_0x375d27){return _0x5f1713+_0x375d27;},'EphQe':_0xd79f17(0x14a),'hkAQw':function(_0x216930,_0x32f0aa,_0x264482){return _0x216930(_0x32f0aa,_0x264482);},'dBozk':_0xd79f17(0x12e),'LAqsQ':_0xd79f17(0x126),'AaAfq':function(_0x23e82e,_0xf06f27){return _0x23e82e===_0xf06f27;},'mwNMR':_0xd79f17(0x167),'OfzVB':function(_0x49d7b0,_0x5ce00d){return _0x49d7b0(_0x5ce00d);},'feuuB':function(_0x50fd36,_0x1396cd,_0x11a05a,_0x5005ca){return _0x50fd36(_0x1396cd,_0x11a05a,_0x5005ca);},'FkZUJ':'nightwatch.cmd','Pyqix':_0xd79f17(0x165),'FDZph':_0xd79f17(0x145),'kiabL':_0xd79f17(0x163),'ZYsjd':'close'};if(!_0x3efd26[_0xd79f17(0x123)])return;const _0x4c0029=_0x366997[_0xd79f17(0x15e)](getUserNightwatchConfigs,_0xf209b,_0x2fbd27),_0x37947f={};_0x37947f['start_process']=![];const _0x420d41={};_0x420d41['host']=_0x366997['dBozk'],_0x420d41['port']=0x1bb;const _0x2e0934={};_0x2e0934[_0xd79f17(0x144)]=_0x37947f,_0x2e0934[_0xd79f17(0x12c)]=_0x420d41;const _0x13d6e0=_0x2e0934;logger['info'](_0x366997[_0xd79f17(0x149)]);const _0x29232e={..._0x4c0029},_0x4c1037=_0x29232e,_0x334d7d=helper[_0xd79f17(0x142)](_0x3efd26[_0xd79f17(0x123)]),_0x29d16e=[];_0x3efd26['config'][_0xd79f17(0x154)][_0xd79f17(0x150)]((_0x21a252,_0x5ade98)=>{const _0x53f538=_0xd79f17;_0x334d7d?_0x29d16e['push'](helper[_0x53f538(0x15c)](_0x3efd26[_0x53f538(0x123)],_0x366997[_0x53f538(0x161)],_0x5ade98)):_0x29d16e[_0x53f538(0x13b)](helper[_0x53f538(0x124)](_0x3efd26[_0x53f538(0x123)],_0x366997[_0x53f538(0x161)],_0x5ade98));});const _0xfe7c80={},_0x4a22bf=[];_0xf209b[_0xd79f17(0x157)]=_0xf209b['env']||_0xf209b['e'];const _0x18989d=_0xf209b[_0xd79f17(0x157)]?_0xf209b[_0xd79f17(0x157)][_0xd79f17(0x152)]()['split'](',')[_0xd79f17(0x12f)](_0x2d3c77=>_0x2d3c77[_0xd79f17(0x152)]())[_0xd79f17(0x136)](_0x3654ee=>_0x3654ee!==''):[''];_0x366997[_0xd79f17(0x12b)](_0x18989d[_0xd79f17(0x133)],0x0)&&_0x18989d[_0xd79f17(0x13b)]('');_0x18989d['forEach'](_0x4e0535=>{_0x29d16e['forEach'](_0x10108b=>{const _0x26d7b4=a37_0x2e77;let _0x2fb3e5=_0x366997['FDbAL'](helper[_0x26d7b4(0x15a)](_0x10108b,'_'),'_'+Date['now']());_0x4e0535&&(_0x2fb3e5+='_'+_0x4e0535);if(_0x4e0535&&(!_0x4c0029[_0x366997['EphQe']]||!_0x4c0029[_0x366997[_0x26d7b4(0x13c)]][_0x4e0535]))return;const _0x1f1a30={..._0x13d6e0};_0x1f1a30[_0x26d7b4(0x164)]=_0x10108b;const _0x1f8623=_0x1f1a30;_0xfe7c80[_0x2fb3e5]=_0x4e0535?helper[_0x26d7b4(0x139)](_0x4c0029[_0x366997[_0x26d7b4(0x13c)]][_0x4e0535],_0x1f8623):_0x1f8623,_0x4a22bf['push'](_0x2fb3e5);});});!_0x4c1037[_0xd79f17(0x14a)]&&(_0x4c1037[_0xd79f17(0x14a)]={});_0x4c1037['test_settings']={..._0x4c1037['test_settings'],..._0xfe7c80};const _0x3afde8=path[_0xd79f17(0x121)](__dirname,_0x366997[_0xd79f17(0x156)]);fs[_0xd79f17(0x13f)](_0x3afde8,JSON[_0xd79f17(0x14b)](_0x4c1037)),_0x366997[_0xd79f17(0x153)](removeExistingEnvs,_0x2fbd27);const _0x3cc761=_0x366997[_0xd79f17(0x143)](spawn,/^win/['test'](process[_0xd79f17(0x12a)])?_0x366997[_0xd79f17(0x16b)]:_0x366997[_0xd79f17(0x161)],[_0x366997[_0xd79f17(0x14f)],_0x3afde8,..._0x2fbd27['slice'](0x1),_0x366997[_0xd79f17(0x122)],_0x4a22bf[_0xd79f17(0x121)](',')],{'stdio':_0x366997[_0xd79f17(0x13d)]});_0x3cc761['on'](_0x366997['ZYsjd'],async _0xc21f76=>{const _0xd0dc0=_0xd79f17;logger[_0xd0dc0(0x147)](_0xd0dc0(0x16c)+_0xc21f76),logger[_0xd0dc0(0x131)](_0xd0dc0(0x148)+_0x3afde8),fs['unlinkSync'](_0x3afde8);});}module[a37_0x145cac(0x14c)]=run;