#!/usr/bin/env node
'use strict';const a36_0x364fd9=a36_0x3650;(function(_0x134cae,_0x19f81d){const _0x14d497=a36_0x3650,_0x413d61=_0x134cae();while(!![]){try{const _0x4c718b=-parseInt(_0x14d497(0xc5))/0x1*(parseInt(_0x14d497(0xd1))/0x2)+parseInt(_0x14d497(0xe0))/0x3*(parseInt(_0x14d497(0xba))/0x4)+parseInt(_0x14d497(0xca))/0x5*(-parseInt(_0x14d497(0xac))/0x6)+parseInt(_0x14d497(0xce))/0x7+parseInt(_0x14d497(0xbc))/0x8*(-parseInt(_0x14d497(0xb4))/0x9)+parseInt(_0x14d497(0xa9))/0xa+parseInt(_0x14d497(0xe1))/0xb;if(_0x4c718b===_0x19f81d)break;else _0x413d61['push'](_0x413d61['shift']());}catch(_0xb87d3){_0x413d61['push'](_0x413d61['shift']());}}}(a36_0x6b96,0x6cef4));function a36_0x3650(_0x242948,_0x28ae49){const _0x6b9658=a36_0x6b96();return a36_0x3650=function(_0x365019,_0x4c1021){_0x365019=_0x365019-0xa5;let _0x35d80c=_0x6b9658[_0x365019];return _0x35d80c;},a36_0x3650(_0x242948,_0x28ae49);}const fs=require('fs'),path=require('path'),{spawn}=require(a36_0x364fd9(0xab)),logger=require(a36_0x364fd9(0xc7))[a36_0x364fd9(0xcb)],{default:BrowserStackSetup}=require(a36_0x364fd9(0xd6)),helper=require('../../helpers/helper'),constants=require(a36_0x364fd9(0xda)),getUserNightwatchConfigs=(_0x45553c,_0x31cede)=>{const _0xcee46=a36_0x364fd9,_0x278f1b={'DTuhj':'nightwatch.conf.js','bafYG':_0xcee46(0xc0),'Acqnd':function(_0x404a81,_0x3a2e53){return _0x404a81(_0x3a2e53);},'UDfJc':_0xcee46(0xbf)};let _0xf9c6ae=null,_0x4f1182={};const _0x18a12b=_0x31cede[_0xcee46(0xea)](_0x523c2b=>_0x523c2b==='--config');if(!helper[_0xcee46(0xa8)](_0x45553c['config'])&&fs['existsSync'](path[_0xcee46(0xe8)](process[_0xcee46(0xbb)](),_0x45553c[_0xcee46(0xde)])))_0xf9c6ae=path[_0xcee46(0xe8)](process[_0xcee46(0xbb)](),_0x45553c['config']),_0x31cede[_0xcee46(0xec)](_0x18a12b,0x2);else{if(fs['existsSync'](path[_0xcee46(0xe8)](process['cwd'](),_0x278f1b[_0xcee46(0xbd)])))_0xf9c6ae=path[_0xcee46(0xe8)](process[_0xcee46(0xbb)](),_0x278f1b[_0xcee46(0xbd)]);else fs[_0xcee46(0xe7)](path['join'](process[_0xcee46(0xbb)](),_0x278f1b[_0xcee46(0xb0)]))&&(_0xf9c6ae=path[_0xcee46(0xe8)](process['cwd'](),_0x278f1b['bafYG']));}return _0xf9c6ae?(logger[_0xcee46(0xdf)](_0xcee46(0xa5)+_0xf9c6ae),_0x4f1182=_0x278f1b['Acqnd'](require,_0xf9c6ae)):logger[_0xcee46(0xdf)](_0x278f1b['UDfJc']),_0x4f1182;},removeExistingEnvs=_0x1a67b3=>{const _0x1c946e=a36_0x364fd9,_0x5378a0={};_0x5378a0[_0x1c946e(0xaa)]=function(_0x593515,_0x3e5a52){return _0x593515>_0x3e5a52;},_0x5378a0[_0x1c946e(0xcc)]=function(_0x1f2900,_0x3dd49f){return _0x1f2900>_0x3dd49f;};const _0x4ee672=_0x5378a0;let _0x54fa6f=_0x1a67b3['findIndex'](_0x143479=>_0x143479===_0x1c946e(0xd5));_0x4ee672[_0x1c946e(0xaa)](_0x54fa6f,-0x1)&&_0x1a67b3['splice'](_0x54fa6f,0x2),_0x54fa6f=_0x1a67b3[_0x1c946e(0xea)](_0x54c63c=>_0x54c63c==='-e'),_0x4ee672[_0x1c946e(0xcc)](_0x54fa6f,-0x1)&&_0x1a67b3[_0x1c946e(0xec)](_0x54fa6f,0x2);};function a36_0x6b96(){const _0x1ff264=['qCXMn','689665eWkznE','WJBYt','../../helpers/logger','length','hub.browserstack.com','1945bKqEDK','winstonLogger','TvcEL','slice','828583rudEat','YLNzu','useW3C','2LKmDLq','split','env','WOjXR','--env','../../helpers/BrowserStackSetup','modifyBrowserStackW3CCaps','debug','close','../utils/constants','mergeDeep','yNPbE','ApcLg','config','info','3AuEfEX','1803901EhsXYD','nightwatch-browserstack.json','unlinkSync','desiredCapabilities','webdriver','bkXxK','existsSync','join','forEach','findIndex','stringify','splice','Getting\x20your\x20nightwatch\x20configs\x20from\x20','selenium','--config','isUndefined','8718580NjgBFc','WbPlD','child_process','714OVUsFt','xUQZv','test_settings','filter','bafYG','tllVq','test','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','18ljAweI','child\x20process\x20exited\x20with\x20code\x20','map','trim','platform','push','228328QnRQyg','cwd','116592eIHpPe','DTuhj','writeFileSync','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','nightwatch.json','UdUnW','nightwatch.cmd','nightwatch'];a36_0x6b96=function(){return _0x1ff264;};return a36_0x6b96();}function run(_0x1dcb5a,_0x381967,_0x24dd09){const _0x1d1517=a36_0x364fd9,_0x81ed81={'xUQZv':_0x1d1517(0xc3),'ripjf':function(_0xa07027,_0x5102c1){return _0xa07027+_0x5102c1;},'tllVq':'test_settings','EfHiA':function(_0x1878a3,_0x382628,_0xfeea64){return _0x1878a3(_0x382628,_0xfeea64);},'yNPbE':_0x1d1517(0xc9),'Nndnx':_0x1d1517(0xb3),'xYadX':function(_0x4a4043,_0x3d802f){return _0x4a4043===_0x3d802f;},'UdUnW':_0x1d1517(0xe2),'bkXxK':function(_0x486b0c,_0x454c57){return _0x486b0c(_0x454c57);},'WOjXR':function(_0x5aa9df,_0x30f10e,_0x135395,_0x331d45){return _0x5aa9df(_0x30f10e,_0x135395,_0x331d45);},'qCXMn':_0x1d1517(0xc2),'ApcLg':_0x1d1517(0xa7),'xZuBH':_0x1d1517(0xd5),'WJBYt':'inherit','YLNzu':_0x1d1517(0xd9)};if(!_0x24dd09['config'])return;const _0xe2ec46=_0x81ed81['EfHiA'](getUserNightwatchConfigs,_0x1dcb5a,_0x381967),_0x26b608={};_0x26b608['start_process']=![];const _0x12a34d={};_0x12a34d['host']=_0x81ed81[_0x1d1517(0xdc)],_0x12a34d['port']=0x1bb;const _0x1a37c3={};_0x1a37c3[_0x1d1517(0xe5)]=_0x26b608,_0x1a37c3[_0x1d1517(0xa6)]=_0x12a34d;const _0x45a2c6=_0x1a37c3;logger[_0x1d1517(0xdf)](_0x81ed81['Nndnx']);const _0x282658={..._0xe2ec46},_0x1b7ae5=_0x282658,_0x174b57=helper[_0x1d1517(0xd0)](_0x24dd09[_0x1d1517(0xde)]),_0x4de1d7=[];_0x24dd09[_0x1d1517(0xde)]['platforms'][_0x1d1517(0xe9)]((_0x48239b,_0x1ca06d)=>{const _0xde891=_0x1d1517;_0x174b57?_0x4de1d7[_0xde891(0xb9)](helper[_0xde891(0xd7)](_0x24dd09['config'],_0x81ed81[_0xde891(0xad)],_0x1ca06d)):_0x4de1d7[_0xde891(0xb9)](helper['modifyBrowserStackCaps'](_0x24dd09['config'],_0x81ed81[_0xde891(0xad)],_0x1ca06d));});const _0x519a42={},_0x44b65f=[];_0x1dcb5a['env']=_0x1dcb5a[_0x1d1517(0xd3)]||_0x1dcb5a['e'];const _0x251fec=_0x1dcb5a['env']?_0x1dcb5a[_0x1d1517(0xd3)][_0x1d1517(0xb7)]()[_0x1d1517(0xd2)](',')[_0x1d1517(0xb6)](_0x3242f7=>_0x3242f7['trim']())[_0x1d1517(0xaf)](_0x2a208e=>_0x2a208e!==''):[''];_0x81ed81['xYadX'](_0x251fec[_0x1d1517(0xc8)],0x0)&&_0x251fec['push']('');_0x251fec[_0x1d1517(0xe9)](_0x2bdd80=>{const _0x31a3fb=_0x1d1517;_0x4de1d7[_0x31a3fb(0xe9)](_0x4f7678=>{const _0x3f7586=_0x31a3fb;let _0x2fb237=_0x81ed81['ripjf'](helper['getPlatformName'](_0x4f7678,'_'),'_'+Date['now']());_0x2bdd80&&(_0x2fb237+='_'+_0x2bdd80);if(_0x2bdd80&&(!_0xe2ec46[_0x81ed81[_0x3f7586(0xb1)]]||!_0xe2ec46[_0x81ed81[_0x3f7586(0xb1)]][_0x2bdd80]))return;const _0xd739e5={..._0x45a2c6};_0xd739e5[_0x3f7586(0xe4)]=_0x4f7678;const _0x83f0ff=_0xd739e5;_0x519a42[_0x2fb237]=_0x2bdd80?helper[_0x3f7586(0xdb)](_0xe2ec46[_0x81ed81[_0x3f7586(0xb1)]][_0x2bdd80],_0x83f0ff):_0x83f0ff,_0x44b65f[_0x3f7586(0xb9)](_0x2fb237);});});!_0x1b7ae5[_0x1d1517(0xae)]&&(_0x1b7ae5[_0x1d1517(0xae)]={});_0x1b7ae5[_0x1d1517(0xae)]={..._0x1b7ae5['test_settings'],..._0x519a42};const _0x1b96dc=path[_0x1d1517(0xe8)](__dirname,_0x81ed81[_0x1d1517(0xc1)]);fs[_0x1d1517(0xbe)](_0x1b96dc,JSON[_0x1d1517(0xeb)](_0x1b7ae5)),_0x81ed81[_0x1d1517(0xe6)](removeExistingEnvs,_0x381967);const _0x59e078=_0x81ed81[_0x1d1517(0xd4)](spawn,/^win/[_0x1d1517(0xb2)](process[_0x1d1517(0xb8)])?_0x81ed81[_0x1d1517(0xc4)]:_0x81ed81['xUQZv'],[_0x81ed81[_0x1d1517(0xdd)],_0x1b96dc,..._0x381967[_0x1d1517(0xcd)](0x1),_0x81ed81['xZuBH'],_0x44b65f['join'](',')],{'stdio':_0x81ed81[_0x1d1517(0xc6)]});_0x59e078['on'](_0x81ed81[_0x1d1517(0xcf)],async _0x1123b2=>{const _0x584bb4=_0x1d1517;logger[_0x584bb4(0xd8)](_0x584bb4(0xb5)+_0x1123b2),logger['info']('Deleting\x20'+_0x1b96dc),fs[_0x584bb4(0xe3)](_0x1b96dc);});}module['exports']=run;