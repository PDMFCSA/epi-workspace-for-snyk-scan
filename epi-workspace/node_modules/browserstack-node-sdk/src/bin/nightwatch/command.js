#!/usr/bin/env node
'use strict';function a36_0x11ca(_0x16ab1d,_0x40b362){const _0x456eb9=a36_0x456e();return a36_0x11ca=function(_0x11ca40,_0x2aabfc){_0x11ca40=_0x11ca40-0x71;let _0x486b5a=_0x456eb9[_0x11ca40];return _0x486b5a;},a36_0x11ca(_0x16ab1d,_0x40b362);}const a36_0x431395=a36_0x11ca;(function(_0x278c8d,_0x369828){const _0x5ab372=a36_0x11ca,_0x5efed4=_0x278c8d();while(!![]){try{const _0x5a7728=parseInt(_0x5ab372(0x9d))/0x1+parseInt(_0x5ab372(0x8f))/0x2+parseInt(_0x5ab372(0x8c))/0x3+parseInt(_0x5ab372(0xbd))/0x4+parseInt(_0x5ab372(0xa0))/0x5*(-parseInt(_0x5ab372(0x92))/0x6)+-parseInt(_0x5ab372(0xad))/0x7*(-parseInt(_0x5ab372(0x98))/0x8)+-parseInt(_0x5ab372(0x8b))/0x9;if(_0x5a7728===_0x369828)break;else _0x5efed4['push'](_0x5efed4['shift']());}catch(_0x4491f4){_0x5efed4['push'](_0x5efed4['shift']());}}}(a36_0x456e,0x4edff));const fs=require('fs'),path=require(a36_0x431395(0x9a)),{spawn}=require(a36_0x431395(0x81)),logger=require(a36_0x431395(0xab))['winstonLogger'],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require('../../helpers/helper'),constants=require('../utils/constants'),getUserNightwatchConfigs=(_0x1f8f15,_0xa2d95d)=>{const _0x7a2e0f=a36_0x431395,_0x51bcf1={'vxxOx':_0x7a2e0f(0x74),'CiPAl':_0x7a2e0f(0x83),'Gjxzt':function(_0x2c9176,_0x1e90f0){return _0x2c9176(_0x1e90f0);},'DrSbv':_0x7a2e0f(0x91)};let _0x406a13=null,_0x4996c8={};const _0x10b1d3=_0xa2d95d[_0x7a2e0f(0xb7)](_0x18b245=>_0x18b245===_0x7a2e0f(0x88));if(!helper[_0x7a2e0f(0x7e)](_0x1f8f15['config'])&&fs[_0x7a2e0f(0x87)](path[_0x7a2e0f(0x77)](process[_0x7a2e0f(0x8e)](),_0x1f8f15['config'])))_0x406a13=path['join'](process[_0x7a2e0f(0x8e)](),_0x1f8f15[_0x7a2e0f(0xb9)]),_0xa2d95d[_0x7a2e0f(0x7b)](_0x10b1d3,0x2);else{if(fs['existsSync'](path[_0x7a2e0f(0x77)](process[_0x7a2e0f(0x8e)](),_0x51bcf1['vxxOx'])))_0x406a13=path[_0x7a2e0f(0x77)](process[_0x7a2e0f(0x8e)](),_0x51bcf1[_0x7a2e0f(0x99)]);else fs[_0x7a2e0f(0x87)](path[_0x7a2e0f(0x77)](process[_0x7a2e0f(0x8e)](),_0x51bcf1[_0x7a2e0f(0x7f)]))&&(_0x406a13=path[_0x7a2e0f(0x77)](process[_0x7a2e0f(0x8e)](),_0x51bcf1['CiPAl']));}return _0x406a13?(logger[_0x7a2e0f(0x84)](_0x7a2e0f(0xb5)+_0x406a13),_0x4996c8=_0x51bcf1[_0x7a2e0f(0xb6)](require,_0x406a13)):logger[_0x7a2e0f(0x84)](_0x51bcf1[_0x7a2e0f(0xa5)]),_0x4996c8;},removeExistingEnvs=_0x2f2574=>{const _0xc18fe7=a36_0x431395,_0x34c822={};_0x34c822[_0xc18fe7(0x76)]=function(_0x505896,_0x16f2b8){return _0x505896>_0x16f2b8;},_0x34c822[_0xc18fe7(0xa7)]=function(_0x53dd69,_0xe62360){return _0x53dd69>_0xe62360;};const _0x57d3a1=_0x34c822;let _0x2cbf7a=_0x2f2574[_0xc18fe7(0xb7)](_0x4816ae=>_0x4816ae===_0xc18fe7(0x94));_0x57d3a1[_0xc18fe7(0x76)](_0x2cbf7a,-0x1)&&_0x2f2574[_0xc18fe7(0x7b)](_0x2cbf7a,0x2),_0x2cbf7a=_0x2f2574[_0xc18fe7(0xb7)](_0x332da0=>_0x332da0==='-e'),_0x57d3a1[_0xc18fe7(0xa7)](_0x2cbf7a,-0x1)&&_0x2f2574[_0xc18fe7(0x7b)](_0x2cbf7a,0x2);};function run(_0xa79d79,_0x5a7365,_0x218d15){const _0x5d4d01=a36_0x431395,_0x28a9cd={'Rlzju':_0x5d4d01(0xaf),'FITmx':function(_0x2f015c,_0x34d637){return _0x2f015c+_0x34d637;},'FjYwz':'test_settings','KbTeZ':function(_0x4474fb,_0x34311a,_0xf9a284){return _0x4474fb(_0x34311a,_0xf9a284);},'lzyXO':_0x5d4d01(0xbc),'VSIPr':_0x5d4d01(0xa6),'OcWgw':function(_0x5cb6e0,_0x1e5c78){return _0x5cb6e0===_0x1e5c78;},'ccJCy':_0x5d4d01(0xb3),'ZPIdY':function(_0x2a8598,_0x51c4ce){return _0x2a8598(_0x51c4ce);},'Bowxp':function(_0x4fa1f1,_0x3c7bd6,_0x8923e1,_0x521b18){return _0x4fa1f1(_0x3c7bd6,_0x8923e1,_0x521b18);},'JwPgw':'nightwatch.cmd','RHNrY':_0x5d4d01(0x88),'XSSPU':'--env','pDIjq':'inherit','vNqji':_0x5d4d01(0xb2)};if(!_0x218d15[_0x5d4d01(0xb9)])return;const _0x5f1c7f=_0x28a9cd[_0x5d4d01(0x8d)](getUserNightwatchConfigs,_0xa79d79,_0x5a7365),_0x56736d={};_0x56736d[_0x5d4d01(0x73)]=![];const _0x48e1ef={};_0x48e1ef[_0x5d4d01(0x9c)]=_0x28a9cd[_0x5d4d01(0xa8)],_0x48e1ef[_0x5d4d01(0xbb)]=0x1bb;const _0x5b88aa={};_0x5b88aa[_0x5d4d01(0x82)]=_0x56736d,_0x5b88aa[_0x5d4d01(0xb4)]=_0x48e1ef;const _0x3e2fd8=_0x5b88aa;logger[_0x5d4d01(0x84)](_0x28a9cd[_0x5d4d01(0x7a)]);const _0x4d1c8f={..._0x5f1c7f},_0xb81944=_0x4d1c8f,_0x28b864=helper[_0x5d4d01(0x79)](_0x218d15[_0x5d4d01(0xb9)]),_0x21fea9=[];_0x218d15['config'][_0x5d4d01(0x85)][_0x5d4d01(0x9b)]((_0x149e96,_0xd1385d)=>{const _0x5b6fe7=_0x5d4d01;_0x28b864?_0x21fea9[_0x5b6fe7(0x7c)](helper['modifyBrowserStackW3CCaps'](_0x218d15[_0x5b6fe7(0xb9)],_0x28a9cd[_0x5b6fe7(0x7d)],_0xd1385d)):_0x21fea9[_0x5b6fe7(0x7c)](helper[_0x5b6fe7(0x97)](_0x218d15[_0x5b6fe7(0xb9)],_0x28a9cd['Rlzju'],_0xd1385d));});const _0x2f157f={},_0x5a93bf=[];_0xa79d79[_0x5d4d01(0xb0)]=_0xa79d79['env']||_0xa79d79['e'];const _0xe8121f=_0xa79d79['env']?_0xa79d79[_0x5d4d01(0xb0)][_0x5d4d01(0x95)]()['split'](',')[_0x5d4d01(0x90)](_0x1aac36=>_0x1aac36[_0x5d4d01(0x95)]())[_0x5d4d01(0x93)](_0x40763a=>_0x40763a!==''):[''];_0x28a9cd[_0x5d4d01(0x80)](_0xe8121f[_0x5d4d01(0x75)],0x0)&&_0xe8121f[_0x5d4d01(0x7c)]('');_0xe8121f[_0x5d4d01(0x9b)](_0x2eacec=>{const _0x1220b1=_0x5d4d01,_0x21cfff={'zIrUx':function(_0x560a04,_0x20ff91){return _0x28a9cd['FITmx'](_0x560a04,_0x20ff91);},'arCDh':_0x28a9cd[_0x1220b1(0x89)]};_0x21fea9[_0x1220b1(0x9b)](_0x19ffd2=>{const _0x4fec53=_0x1220b1;let _0x4e9796=_0x21cfff[_0x4fec53(0x9e)](helper['getPlatformName'](_0x19ffd2,'_'),'_'+Date['now']());_0x2eacec&&(_0x4e9796+='_'+_0x2eacec);if(_0x2eacec&&(!_0x5f1c7f[_0x21cfff[_0x4fec53(0xaa)]]||!_0x5f1c7f[_0x21cfff['arCDh']][_0x2eacec]))return;const _0x2fe440={..._0x3e2fd8};_0x2fe440[_0x4fec53(0x8a)]=_0x19ffd2;const _0x196b19=_0x2fe440;_0x2f157f[_0x4e9796]=_0x2eacec?helper[_0x4fec53(0xb8)](_0x5f1c7f[_0x21cfff[_0x4fec53(0xaa)]][_0x2eacec],_0x196b19):_0x196b19,_0x5a93bf[_0x4fec53(0x7c)](_0x4e9796);});});!_0xb81944[_0x5d4d01(0xb1)]&&(_0xb81944[_0x5d4d01(0xb1)]={});_0xb81944[_0x5d4d01(0xb1)]={..._0xb81944[_0x5d4d01(0xb1)],..._0x2f157f};const _0x55379f=path[_0x5d4d01(0x77)](__dirname,_0x28a9cd[_0x5d4d01(0x96)]);fs['writeFileSync'](_0x55379f,JSON[_0x5d4d01(0xa3)](_0xb81944)),_0x28a9cd[_0x5d4d01(0xba)](removeExistingEnvs,_0x5a7365);const _0x38ce67=_0x28a9cd[_0x5d4d01(0xa9)](spawn,/^win/[_0x5d4d01(0x9f)](process[_0x5d4d01(0x78)])?_0x28a9cd['JwPgw']:_0x28a9cd[_0x5d4d01(0x7d)],[_0x28a9cd[_0x5d4d01(0x86)],_0x55379f,..._0x5a7365['slice'](0x1),_0x28a9cd[_0x5d4d01(0xa1)],_0x5a93bf['join'](',')],{'stdio':_0x28a9cd[_0x5d4d01(0xbe)]});_0x38ce67['on'](_0x28a9cd[_0x5d4d01(0xae)],async _0x14a867=>{const _0x5f2331=_0x5d4d01;logger[_0x5f2331(0x72)](_0x5f2331(0xac)+_0x14a867),logger['info'](_0x5f2331(0xa2)+_0x55379f),fs[_0x5f2331(0x71)](_0x55379f);});}function a36_0x456e(){const _0x8fa55=['Getting\x20your\x20nightwatch\x20configs\x20from\x20','Gjxzt','findIndex','mergeDeep','config','ZPIdY','port','hub.browserstack.com','2267964gHDGUw','pDIjq','unlinkSync','debug','start_process','nightwatch.conf.js','length','WJGMB','join','platform','useW3C','VSIPr','splice','push','Rlzju','isUndefined','CiPAl','OcWgw','child_process','webdriver','nightwatch.json','info','platforms','RHNrY','existsSync','--config','FjYwz','desiredCapabilities','9308115nBIgHP','1024125tooVqV','KbTeZ','cwd','640998Tpbuvz','map','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','296214HZEnkF','filter','--env','trim','ccJCy','modifyBrowserStackCaps','367176DaOhgx','vxxOx','path','forEach','host','293908TejJGI','zIrUx','test','40IitnUa','XSSPU','Deleting\x20','stringify','exports','DrSbv','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','RtkLa','lzyXO','Bowxp','arCDh','../../helpers/logger','child\x20process\x20exited\x20with\x20code\x20','35AvqRxL','vNqji','nightwatch','env','test_settings','close','nightwatch-browserstack.json','selenium'];a36_0x456e=function(){return _0x8fa55;};return a36_0x456e();}module[a36_0x431395(0xa4)]=run;