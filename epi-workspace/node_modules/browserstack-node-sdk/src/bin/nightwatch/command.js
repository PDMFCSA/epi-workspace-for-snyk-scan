#!/usr/bin/env node
'use strict';const a38_0x1e70da=a38_0x58e2;(function(_0x778a2b,_0x4dcac5){const _0xaa5a3d=a38_0x58e2,_0x20d51c=_0x778a2b();while(!![]){try{const _0xdcbc75=-parseInt(_0xaa5a3d(0x1a0))/0x1+-parseInt(_0xaa5a3d(0x1a3))/0x2+-parseInt(_0xaa5a3d(0x1d6))/0x3*(-parseInt(_0xaa5a3d(0x1b2))/0x4)+-parseInt(_0xaa5a3d(0x1ea))/0x5*(parseInt(_0xaa5a3d(0x1db))/0x6)+parseInt(_0xaa5a3d(0x1d5))/0x7+parseInt(_0xaa5a3d(0x1bc))/0x8*(-parseInt(_0xaa5a3d(0x1b3))/0x9)+parseInt(_0xaa5a3d(0x1ab))/0xa;if(_0xdcbc75===_0x4dcac5)break;else _0x20d51c['push'](_0x20d51c['shift']());}catch(_0x24d36e){_0x20d51c['push'](_0x20d51c['shift']());}}}(a38_0x4fe1,0x9a4e1));const fs=require('fs'),path=require('path'),{spawn}=require(a38_0x1e70da(0x1c3)),logger=require('../../helpers/logger')['winstonLogger'],{default:BrowserStackSetup}=require(a38_0x1e70da(0x1e0)),helper=require(a38_0x1e70da(0x1df)),constants=require(a38_0x1e70da(0x1c9)),getUserNightwatchConfigs=(_0x2a1400,_0x5908c2)=>{const _0x4a8248=a38_0x1e70da,_0x7c8fbf={'coliH':_0x4a8248(0x1a8),'DxZJs':_0x4a8248(0x1aa),'YpCHn':function(_0x37e6a8,_0x46ab29){return _0x37e6a8(_0x46ab29);},'WVWtx':'Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file'};let _0x183ae7=null,_0xffd56c={};const _0x4d1213=_0x5908c2[_0x4a8248(0x1b1)](_0x37250a=>_0x37250a===_0x4a8248(0x1e4));if(!helper[_0x4a8248(0x1d9)](_0x2a1400['config'])&&fs[_0x4a8248(0x1b8)](path[_0x4a8248(0x1b7)](process[_0x4a8248(0x1af)](),_0x2a1400[_0x4a8248(0x1c2)])))_0x183ae7=path[_0x4a8248(0x1b7)](process[_0x4a8248(0x1af)](),_0x2a1400['config']),_0x5908c2[_0x4a8248(0x1c1)](_0x4d1213,0x2);else{if(fs[_0x4a8248(0x1b8)](path['join'](process[_0x4a8248(0x1af)](),_0x7c8fbf[_0x4a8248(0x1be)])))_0x183ae7=path[_0x4a8248(0x1b7)](process[_0x4a8248(0x1af)](),_0x7c8fbf['coliH']);else fs['existsSync'](path[_0x4a8248(0x1b7)](process[_0x4a8248(0x1af)](),_0x7c8fbf[_0x4a8248(0x1bd)]))&&(_0x183ae7=path['join'](process[_0x4a8248(0x1af)](),_0x7c8fbf[_0x4a8248(0x1bd)]));}return _0x183ae7?(logger[_0x4a8248(0x1ad)](_0x4a8248(0x1da)+_0x183ae7),_0xffd56c=_0x7c8fbf[_0x4a8248(0x1a2)](require,_0x183ae7)):logger[_0x4a8248(0x1ad)](_0x7c8fbf[_0x4a8248(0x1c7)]),_0xffd56c;},removeExistingEnvs=_0x400dc6=>{const _0x481925=a38_0x1e70da,_0x202195={};_0x202195[_0x481925(0x1d3)]=function(_0x53eb57,_0x28f4bc){return _0x53eb57>_0x28f4bc;},_0x202195[_0x481925(0x1e9)]=function(_0x430e2c,_0x170808){return _0x430e2c>_0x170808;};const _0x3494ee=_0x202195;let _0x2b0a4e=_0x400dc6['findIndex'](_0x57cc19=>_0x57cc19===_0x481925(0x1d1));_0x3494ee['HajRp'](_0x2b0a4e,-0x1)&&_0x400dc6[_0x481925(0x1c1)](_0x2b0a4e,0x2),_0x2b0a4e=_0x400dc6['findIndex'](_0xf6a432=>_0xf6a432==='-e'),_0x3494ee[_0x481925(0x1e9)](_0x2b0a4e,-0x1)&&_0x400dc6[_0x481925(0x1c1)](_0x2b0a4e,0x2);};function a38_0x58e2(_0x4b2d63,_0x490e71){const _0x4fe173=a38_0x4fe1();return a38_0x58e2=function(_0x58e2fa,_0x287cf4){_0x58e2fa=_0x58e2fa-0x1a0;let _0x486b89=_0x4fe173[_0x58e2fa];return _0x486b89;},a38_0x58e2(_0x4b2d63,_0x490e71);}function a38_0x4fe1(){const _0x3b79fe=['Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','WQaTl','--env','env','HajRp','test','1053234NYmoog','1852302EsZwaG','child\x20process\x20exited\x20with\x20code\x20','lmlsI','isUndefined','Getting\x20your\x20nightwatch\x20configs\x20from\x20','194958ckaivu','exports','host','slice','../../helpers/helper','../../helpers/BrowserStackSetup','map','debug','filter','--config','ftViQ','close','webdriver','ScVeW','dHsBG','170pAuzES','508347VyHKBi','hub.browserstack.com','YpCHn','1240806ZusLsB','getPlatformName','nightwatch-browserstack.json','test_settings','cFwWC','nightwatch.conf.js','stringify','nightwatch.json','29083390EgWPrD','inherit','info','KGnsK','cwd','start_process','findIndex','4ROgkOg','5490bPkCTQ','mergeDeep','desiredCapabilities','writeFileSync','join','existsSync','now','IQniN','push','10632KhnjPT','DxZJs','coliH','platform','forEach','splice','config','child_process','platforms','port','split','WVWtx','SnTJS','../utils/constants','nightwatch','bFfKu','unlinkSync','trim','IRfvz'];a38_0x4fe1=function(){return _0x3b79fe;};return a38_0x4fe1();}function run(_0x448b55,_0x1951c0,_0x5f0c44){const _0x40af52=a38_0x1e70da,_0x59422f={'ftViQ':_0x40af52(0x1ca),'ArVQC':function(_0x1b73a1,_0x3bb2ad){return _0x1b73a1+_0x3bb2ad;},'SnTJS':'test_settings','aPrHl':function(_0x3a8e2e,_0x10ab9e,_0x3fa0e5){return _0x3a8e2e(_0x10ab9e,_0x3fa0e5);},'HWIfq':_0x40af52(0x1a1),'fUcso':_0x40af52(0x1cf),'WQaTl':function(_0x402a51,_0x2b69c3){return _0x402a51===_0x2b69c3;},'cFwWC':_0x40af52(0x1a5),'gQJpT':function(_0x5f3312,_0x4342b6){return _0x5f3312(_0x4342b6);},'iXvEz':function(_0x12da32,_0x4f59d3,_0x144260,_0x56d5c4){return _0x12da32(_0x4f59d3,_0x144260,_0x56d5c4);},'tXlUa':'nightwatch.cmd','IQniN':_0x40af52(0x1e4),'lmlsI':_0x40af52(0x1d1),'bFfKu':_0x40af52(0x1ac),'KGnsK':_0x40af52(0x1e6)};if(!_0x5f0c44[_0x40af52(0x1c2)])return;const _0xc4dee6=_0x59422f['aPrHl'](getUserNightwatchConfigs,_0x448b55,_0x1951c0),_0x4688c9={};_0x4688c9[_0x40af52(0x1b0)]=![];const _0x4e81f6={};_0x4e81f6[_0x40af52(0x1dd)]=_0x59422f['HWIfq'],_0x4e81f6[_0x40af52(0x1c5)]=0x1bb;const _0x3bbaac={};_0x3bbaac[_0x40af52(0x1e7)]=_0x4688c9,_0x3bbaac['selenium']=_0x4e81f6;const _0x29182e=_0x3bbaac;logger[_0x40af52(0x1ad)](_0x59422f['fUcso']);const _0x4ae2e6={..._0xc4dee6},_0x4dd11c=_0x4ae2e6,_0x57d864=helper['useW3C'](_0x5f0c44[_0x40af52(0x1c2)]),_0x27c4e7=[];_0x5f0c44['config'][_0x40af52(0x1c4)][_0x40af52(0x1c0)]((_0x26df30,_0x4c7b9d)=>{const _0x2ef249=_0x40af52;_0x57d864?_0x27c4e7[_0x2ef249(0x1bb)](helper['modifyBrowserStackW3CCaps'](_0x5f0c44[_0x2ef249(0x1c2)],_0x59422f['ftViQ'],_0x4c7b9d)):_0x27c4e7[_0x2ef249(0x1bb)](helper['modifyBrowserStackCaps'](_0x5f0c44[_0x2ef249(0x1c2)],_0x59422f['ftViQ'],_0x4c7b9d));});const _0x46ee2d={},_0x39b45a=[];_0x448b55[_0x40af52(0x1d2)]=_0x448b55[_0x40af52(0x1d2)]||_0x448b55['e'];const _0x27c961=_0x448b55[_0x40af52(0x1d2)]?_0x448b55[_0x40af52(0x1d2)]['trim']()[_0x40af52(0x1c6)](',')[_0x40af52(0x1e1)](_0x4ffec6=>_0x4ffec6[_0x40af52(0x1cd)]())[_0x40af52(0x1e3)](_0x36fea0=>_0x36fea0!==''):[''];_0x59422f[_0x40af52(0x1d0)](_0x27c961['length'],0x0)&&_0x27c961[_0x40af52(0x1bb)]('');_0x27c961['forEach'](_0x53188c=>{const _0x22c699=_0x40af52,_0x5d27a6={'IRfvz':function(_0x33cdf8,_0x54e481){return _0x59422f['ArVQC'](_0x33cdf8,_0x54e481);},'ScVeW':_0x59422f[_0x22c699(0x1c8)]};_0x27c4e7[_0x22c699(0x1c0)](_0x1751f5=>{const _0x51d3b6=_0x22c699;let _0x563a4b=_0x5d27a6[_0x51d3b6(0x1ce)](helper[_0x51d3b6(0x1a4)](_0x1751f5,'_'),'_'+Date[_0x51d3b6(0x1b9)]());_0x53188c&&(_0x563a4b+='_'+_0x53188c);if(_0x53188c&&(!_0xc4dee6[_0x5d27a6[_0x51d3b6(0x1e8)]]||!_0xc4dee6[_0x5d27a6[_0x51d3b6(0x1e8)]][_0x53188c]))return;const _0x249ae8={..._0x29182e};_0x249ae8[_0x51d3b6(0x1b5)]=_0x1751f5;const _0x2f3be3=_0x249ae8;_0x46ee2d[_0x563a4b]=_0x53188c?helper[_0x51d3b6(0x1b4)](_0xc4dee6[_0x5d27a6['ScVeW']][_0x53188c],_0x2f3be3):_0x2f3be3,_0x39b45a[_0x51d3b6(0x1bb)](_0x563a4b);});});!_0x4dd11c[_0x40af52(0x1a6)]&&(_0x4dd11c[_0x40af52(0x1a6)]={});_0x4dd11c['test_settings']={..._0x4dd11c['test_settings'],..._0x46ee2d};const _0x51dd8b=path[_0x40af52(0x1b7)](__dirname,_0x59422f[_0x40af52(0x1a7)]);fs[_0x40af52(0x1b6)](_0x51dd8b,JSON[_0x40af52(0x1a9)](_0x4dd11c)),_0x59422f['gQJpT'](removeExistingEnvs,_0x1951c0);const _0x45697b=_0x59422f['iXvEz'](spawn,/^win/[_0x40af52(0x1d4)](process[_0x40af52(0x1bf)])?_0x59422f['tXlUa']:_0x59422f[_0x40af52(0x1e5)],[_0x59422f[_0x40af52(0x1ba)],_0x51dd8b,..._0x1951c0[_0x40af52(0x1de)](0x1),_0x59422f[_0x40af52(0x1d8)],_0x39b45a[_0x40af52(0x1b7)](',')],{'stdio':_0x59422f[_0x40af52(0x1cb)]});_0x45697b['on'](_0x59422f[_0x40af52(0x1ae)],async _0x38cbf6=>{const _0x4bc692=_0x40af52;logger[_0x4bc692(0x1e2)](_0x4bc692(0x1d7)+_0x38cbf6),logger[_0x4bc692(0x1ad)]('Deleting\x20'+_0x51dd8b),fs[_0x4bc692(0x1cc)](_0x51dd8b);});}module[a38_0x1e70da(0x1dc)]=run;