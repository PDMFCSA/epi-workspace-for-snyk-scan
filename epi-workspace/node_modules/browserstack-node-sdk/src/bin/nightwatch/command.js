#!/usr/bin/env node
'use strict';function a36_0x2ca4(){const _0x4205e1=['trim','LrFyr','close','--config','split','desiredCapabilities','host','338904wuSyfp','port','eOCCp','../utils/constants','unlinkSync','TdSda','../../helpers/logger','2btfQeh','169392UgapHQ','Deleting\x20','test','child_process','GxspI','findIndex','kgMfd','existsSync','--env','info','forEach','zPpbZ','18AFQMdC','6qwJzYY','map','hub.browserstack.com','3043520sVfukg','OIUhb','LfHly','351810osnzfA','SheEN','modifyBrowserStackCaps','start_process','join','path','106805pARwrd','JahfH','env','config','OsycE','modifyBrowserStackW3CCaps','DUtdo','../../helpers/BrowserStackSetup','nightwatch.conf.js','slice','mergeDeep','splice','gMreK','mfrRE','platforms','39563iNcikm','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','push','child\x20process\x20exited\x20with\x20code\x20','97930LBRoAP','isUndefined','cwd','inherit','debug','test_settings','kencw','stringify','dWffr'];a36_0x2ca4=function(){return _0x4205e1;};return a36_0x2ca4();}function a36_0x1e13(_0x253e2e,_0x531527){const _0x2ca45d=a36_0x2ca4();return a36_0x1e13=function(_0x1e13f4,_0x32cf83){_0x1e13f4=_0x1e13f4-0xc1;let _0x2a48e2=_0x2ca45d[_0x1e13f4];return _0x2a48e2;},a36_0x1e13(_0x253e2e,_0x531527);}const a36_0x359d73=a36_0x1e13;(function(_0x5010cb,_0x5bf07b){const _0x3348e7=a36_0x1e13,_0x40ce2b=_0x5010cb();while(!![]){try{const _0x11a0e6=parseInt(_0x3348e7(0xca))/0x1*(parseInt(_0x3348e7(0xe6))/0x2)+parseInt(_0x3348e7(0xf4))/0x3*(-parseInt(_0x3348e7(0xe7))/0x4)+parseInt(_0x3348e7(0x100))/0x5+-parseInt(_0x3348e7(0xfa))/0x6+parseInt(_0x3348e7(0xcf))/0x7+-parseInt(_0x3348e7(0xdf))/0x8*(parseInt(_0x3348e7(0xf3))/0x9)+parseInt(_0x3348e7(0xf7))/0xa;if(_0x11a0e6===_0x5bf07b)break;else _0x40ce2b['push'](_0x40ce2b['shift']());}catch(_0xdc7a4a){_0x40ce2b['push'](_0x40ce2b['shift']());}}}(a36_0x2ca4,0x24ea9));const fs=require('fs'),path=require(a36_0x359d73(0xff)),{spawn}=require(a36_0x359d73(0xea)),logger=require(a36_0x359d73(0xe5))['winstonLogger'],{default:BrowserStackSetup}=require(a36_0x359d73(0xc2)),helper=require('../../helpers/helper'),constants=require(a36_0x359d73(0xe2)),getUserNightwatchConfigs=(_0x3bc1fd,_0x2b608f)=>{const _0x3e85f3=a36_0x359d73,_0x25bd32={'eOCCp':_0x3e85f3(0xc3),'GxspI':'nightwatch.json','LrFyr':function(_0x53736a,_0x154532){return _0x53736a(_0x154532);},'DUtdo':_0x3e85f3(0xcc)};let _0xbc218a=null,_0x206778={};const _0x58dec5=_0x2b608f[_0x3e85f3(0xec)](_0x1b8f4f=>_0x1b8f4f===_0x3e85f3(0xdb));if(!helper[_0x3e85f3(0xd0)](_0x3bc1fd[_0x3e85f3(0x103)])&&fs[_0x3e85f3(0xee)](path['join'](process[_0x3e85f3(0xd1)](),_0x3bc1fd['config'])))_0xbc218a=path['join'](process['cwd'](),_0x3bc1fd[_0x3e85f3(0x103)]),_0x2b608f['splice'](_0x58dec5,0x2);else{if(fs['existsSync'](path[_0x3e85f3(0xfe)](process[_0x3e85f3(0xd1)](),_0x25bd32[_0x3e85f3(0xe1)])))_0xbc218a=path[_0x3e85f3(0xfe)](process[_0x3e85f3(0xd1)](),_0x25bd32[_0x3e85f3(0xe1)]);else fs[_0x3e85f3(0xee)](path[_0x3e85f3(0xfe)](process[_0x3e85f3(0xd1)](),_0x25bd32[_0x3e85f3(0xeb)]))&&(_0xbc218a=path[_0x3e85f3(0xfe)](process['cwd'](),_0x25bd32[_0x3e85f3(0xeb)]));}return _0xbc218a?(logger[_0x3e85f3(0xf0)]('Getting\x20your\x20nightwatch\x20configs\x20from\x20'+_0xbc218a),_0x206778=_0x25bd32[_0x3e85f3(0xd9)](require,_0xbc218a)):logger[_0x3e85f3(0xf0)](_0x25bd32[_0x3e85f3(0xc1)]),_0x206778;},removeExistingEnvs=_0xaeb11a=>{const _0x25e074=a36_0x359d73,_0x4e68a9={};_0x4e68a9[_0x25e074(0x104)]=function(_0x42c325,_0x8fed63){return _0x42c325>_0x8fed63;};const _0x298c53=_0x4e68a9;let _0xdeff01=_0xaeb11a[_0x25e074(0xec)](_0xae0cfd=>_0xae0cfd===_0x25e074(0xef));_0x298c53[_0x25e074(0x104)](_0xdeff01,-0x1)&&_0xaeb11a[_0x25e074(0xc6)](_0xdeff01,0x2),_0xdeff01=_0xaeb11a[_0x25e074(0xec)](_0x206c04=>_0x206c04==='-e'),_0x298c53[_0x25e074(0x104)](_0xdeff01,-0x1)&&_0xaeb11a[_0x25e074(0xc6)](_0xdeff01,0x2);};function run(_0xd22def,_0x537f55,_0x5044b6){const _0x5c70b7=a36_0x359d73,_0x3b6198={'JahfH':'nightwatch','zPpbZ':function(_0x3f272d,_0xb3e999){return _0x3f272d+_0xb3e999;},'ttwEt':_0x5c70b7(0xd4),'SheEN':function(_0x27db96,_0x52adad,_0x5a344b){return _0x27db96(_0x52adad,_0x5a344b);},'IzYmX':_0x5c70b7(0xf6),'kencw':_0x5c70b7(0xcb),'gtJWZ':function(_0x2a807b,_0x559edc){return _0x2a807b===_0x559edc;},'TdSda':'nightwatch-browserstack.json','gMreK':function(_0x5e8804,_0x3818f6){return _0x5e8804(_0x3818f6);},'ajQuP':function(_0x3bc22d,_0x24e573,_0x4c8b0e,_0xf11c5c){return _0x3bc22d(_0x24e573,_0x4c8b0e,_0xf11c5c);},'OIUhb':'nightwatch.cmd','kgMfd':_0x5c70b7(0xdb),'INbSW':_0x5c70b7(0xef),'bonqJ':_0x5c70b7(0xd2),'mfrRE':_0x5c70b7(0xda)};if(!_0x5044b6['config'])return;const _0x2d76c3=_0x3b6198[_0x5c70b7(0xfb)](getUserNightwatchConfigs,_0xd22def,_0x537f55),_0x40ae9f={};_0x40ae9f[_0x5c70b7(0xfd)]=![];const _0x28897b={};_0x28897b[_0x5c70b7(0xde)]=_0x3b6198['IzYmX'],_0x28897b[_0x5c70b7(0xe0)]=0x1bb;const _0x5c2f23={};_0x5c2f23['webdriver']=_0x40ae9f,_0x5c2f23['selenium']=_0x28897b;const _0x553169=_0x5c2f23;logger['info'](_0x3b6198[_0x5c70b7(0xd5)]);const _0x118259={..._0x2d76c3},_0x14172d=_0x118259,_0x4c6b42=helper['useW3C'](_0x5044b6['config']),_0x5e95db=[];_0x5044b6[_0x5c70b7(0x103)][_0x5c70b7(0xc9)][_0x5c70b7(0xf1)]((_0x3f2cc1,_0x1a040c)=>{const _0x2c467c=_0x5c70b7;_0x4c6b42?_0x5e95db['push'](helper[_0x2c467c(0x105)](_0x5044b6[_0x2c467c(0x103)],_0x3b6198[_0x2c467c(0x101)],_0x1a040c)):_0x5e95db['push'](helper[_0x2c467c(0xfc)](_0x5044b6[_0x2c467c(0x103)],_0x3b6198['JahfH'],_0x1a040c));});const _0x3bf409={},_0x37f0ca=[];_0xd22def['env']=_0xd22def[_0x5c70b7(0x102)]||_0xd22def['e'];const _0x1a2dfd=_0xd22def['env']?_0xd22def[_0x5c70b7(0x102)][_0x5c70b7(0xd8)]()[_0x5c70b7(0xdc)](',')[_0x5c70b7(0xf5)](_0x26bc9f=>_0x26bc9f['trim']())['filter'](_0x14e48d=>_0x14e48d!==''):[''];_0x3b6198['gtJWZ'](_0x1a2dfd['length'],0x0)&&_0x1a2dfd[_0x5c70b7(0xcd)]('');_0x1a2dfd[_0x5c70b7(0xf1)](_0x176070=>{const _0x2bbc1b={'LfHly':function(_0x52fdfd,_0x35eccf){const _0x441fe4=a36_0x1e13;return _0x3b6198[_0x441fe4(0xf2)](_0x52fdfd,_0x35eccf);},'dWffr':_0x3b6198['ttwEt']};_0x5e95db['forEach'](_0x3361c0=>{const _0x1c44e1=a36_0x1e13;let _0xec3f6c=_0x2bbc1b[_0x1c44e1(0xf9)](helper['getPlatformName'](_0x3361c0,'_'),'_'+Date['now']());_0x176070&&(_0xec3f6c+='_'+_0x176070);if(_0x176070&&(!_0x2d76c3[_0x2bbc1b['dWffr']]||!_0x2d76c3[_0x2bbc1b[_0x1c44e1(0xd7)]][_0x176070]))return;const _0x2a9484={..._0x553169};_0x2a9484[_0x1c44e1(0xdd)]=_0x3361c0;const _0x54f1ff=_0x2a9484;_0x3bf409[_0xec3f6c]=_0x176070?helper[_0x1c44e1(0xc5)](_0x2d76c3[_0x2bbc1b[_0x1c44e1(0xd7)]][_0x176070],_0x54f1ff):_0x54f1ff,_0x37f0ca[_0x1c44e1(0xcd)](_0xec3f6c);});});!_0x14172d[_0x5c70b7(0xd4)]&&(_0x14172d[_0x5c70b7(0xd4)]={});_0x14172d[_0x5c70b7(0xd4)]={..._0x14172d['test_settings'],..._0x3bf409};const _0x13a25f=path[_0x5c70b7(0xfe)](__dirname,_0x3b6198[_0x5c70b7(0xe4)]);fs['writeFileSync'](_0x13a25f,JSON[_0x5c70b7(0xd6)](_0x14172d)),_0x3b6198[_0x5c70b7(0xc7)](removeExistingEnvs,_0x537f55);const _0x19fa5c=_0x3b6198['ajQuP'](spawn,/^win/[_0x5c70b7(0xe9)](process['platform'])?_0x3b6198[_0x5c70b7(0xf8)]:_0x3b6198['JahfH'],[_0x3b6198[_0x5c70b7(0xed)],_0x13a25f,..._0x537f55[_0x5c70b7(0xc4)](0x1),_0x3b6198['INbSW'],_0x37f0ca[_0x5c70b7(0xfe)](',')],{'stdio':_0x3b6198['bonqJ']});_0x19fa5c['on'](_0x3b6198[_0x5c70b7(0xc8)],async _0x45ff97=>{const _0x448653=_0x5c70b7;logger[_0x448653(0xd3)](_0x448653(0xce)+_0x45ff97),logger[_0x448653(0xf0)](_0x448653(0xe8)+_0x13a25f),fs[_0x448653(0xe3)](_0x13a25f);});}module['exports']=run;