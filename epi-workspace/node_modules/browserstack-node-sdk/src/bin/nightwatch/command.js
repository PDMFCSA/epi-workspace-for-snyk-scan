#!/usr/bin/env node
'use strict';const a33_0x4795bd=a33_0x1d83;(function(_0x5cd472,_0x32c04d){const _0x1bf92a=a33_0x1d83,_0x168f60=_0x5cd472();while(!![]){try{const _0x168e4a=parseInt(_0x1bf92a(0x141))/0x1*(-parseInt(_0x1bf92a(0x166))/0x2)+parseInt(_0x1bf92a(0x178))/0x3*(parseInt(_0x1bf92a(0x16a))/0x4)+parseInt(_0x1bf92a(0x16f))/0x5*(parseInt(_0x1bf92a(0x15f))/0x6)+parseInt(_0x1bf92a(0x156))/0x7*(parseInt(_0x1bf92a(0x13b))/0x8)+-parseInt(_0x1bf92a(0x168))/0x9*(parseInt(_0x1bf92a(0x182))/0xa)+parseInt(_0x1bf92a(0x174))/0xb+-parseInt(_0x1bf92a(0x162))/0xc;if(_0x168e4a===_0x32c04d)break;else _0x168f60['push'](_0x168f60['shift']());}catch(_0x146be2){_0x168f60['push'](_0x168f60['shift']());}}}(a33_0x877e,0x3caec));function a33_0x877e(){const _0x16a30d=['winstonLogger','filter','20694jUsQOh','webdriver','child\x20process\x20exited\x20with\x20code\x20','3291060UNDeRE','--env','inherit','writeFileSync','150utbXOK','findIndex','53451JsfMUr','env','20frZKEf','RJBXR','now','PczRd','nightwatch','155mYuhxw','OtzJB','DnzlT','Getting\x20your\x20nightwatch\x20configs\x20from\x20','splice','5275941xBxTwl','isUndefined','hIHhv','zDDnq','279753uTWFZd','exports','platform','info','getPlatformName','../utils/constants','yTPOR','length','stringify','zYyJx','310fyMIYF','hub.browserstack.com','3824JJLyUG','iMOrN','existsSync','start_process','../../helpers/logger','forEach','5281txJLGW','VKPSE','mergeDeep','cwd','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','nightwatch-browserstack.json','modifyBrowserStackW3CCaps','join','split','LGAXw','test_settings','close','../../helpers/helper','FslEl','desiredCapabilities','test','xosxb','nightwatch.conf.js','slice','map','push','735NCTTgl','config','Deleting\x20','--config','modifyBrowserStackCaps','qTcJX','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack'];a33_0x877e=function(){return _0x16a30d;};return a33_0x877e();}function a33_0x1d83(_0xf0f668,_0x3bdad8){const _0x877e83=a33_0x877e();return a33_0x1d83=function(_0x1d8386,_0x5dcd79){_0x1d8386=_0x1d8386-0x13a;let _0x158427=_0x877e83[_0x1d8386];return _0x158427;},a33_0x1d83(_0xf0f668,_0x3bdad8);}const fs=require('fs'),path=require('path'),{spawn}=require('child_process'),logger=require(a33_0x4795bd(0x13f))[a33_0x4795bd(0x15d)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a33_0x4795bd(0x14d)),constants=require(a33_0x4795bd(0x17d)),getUserNightwatchConfigs=(_0x584ddb,_0x446108)=>{const _0x282cdf=a33_0x4795bd,_0x5ca4d6={'sHfCU':_0x282cdf(0x152),'PczRd':'nightwatch.json','vlMOC':function(_0x2d38f0,_0x4974ba){return _0x2d38f0(_0x4974ba);},'LGAXw':_0x282cdf(0x145)};let _0x3661dc=null,_0x4722cc={};const _0x44aa45=_0x446108['findIndex'](_0x547b18=>_0x547b18===_0x282cdf(0x159));if(!helper[_0x282cdf(0x175)](_0x584ddb[_0x282cdf(0x157)])&&fs['existsSync'](path[_0x282cdf(0x148)](process[_0x282cdf(0x144)](),_0x584ddb[_0x282cdf(0x157)])))_0x3661dc=path[_0x282cdf(0x148)](process[_0x282cdf(0x144)](),_0x584ddb[_0x282cdf(0x157)]),_0x446108['splice'](_0x44aa45,0x2);else{if(fs[_0x282cdf(0x13d)](path['join'](process['cwd'](),_0x5ca4d6['sHfCU'])))_0x3661dc=path[_0x282cdf(0x148)](process['cwd'](),_0x5ca4d6['sHfCU']);else fs['existsSync'](path['join'](process[_0x282cdf(0x144)](),_0x5ca4d6[_0x282cdf(0x16d)]))&&(_0x3661dc=path[_0x282cdf(0x148)](process[_0x282cdf(0x144)](),_0x5ca4d6[_0x282cdf(0x16d)]));}return _0x3661dc?(logger['info'](_0x282cdf(0x172)+_0x3661dc),_0x4722cc=_0x5ca4d6['vlMOC'](require,_0x3661dc)):logger[_0x282cdf(0x17b)](_0x5ca4d6[_0x282cdf(0x14a)]),_0x4722cc;},removeExistingEnvs=_0x53ae05=>{const _0x379f9e=a33_0x4795bd,_0x7ccfd4={};_0x7ccfd4[_0x379f9e(0x176)]=function(_0x6ac46b,_0x3824d6){return _0x6ac46b>_0x3824d6;};const _0x3e8ac2=_0x7ccfd4;let _0x2e3867=_0x53ae05[_0x379f9e(0x167)](_0xfda515=>_0xfda515===_0x379f9e(0x163));_0x3e8ac2[_0x379f9e(0x176)](_0x2e3867,-0x1)&&_0x53ae05[_0x379f9e(0x173)](_0x2e3867,0x2),_0x2e3867=_0x53ae05[_0x379f9e(0x167)](_0x30790f=>_0x30790f==='-e'),_0x3e8ac2[_0x379f9e(0x176)](_0x2e3867,-0x1)&&_0x53ae05[_0x379f9e(0x173)](_0x2e3867,0x2);};function run(_0x5490ff,_0x34576d){const _0xb81e1b=a33_0x4795bd,_0x47b5a9={'yTPOR':_0xb81e1b(0x16e),'yDcrx':function(_0x473f83,_0x2e555e){return _0x473f83+_0x2e555e;},'DnzlT':'test_settings','VKPSE':function(_0x3be0a8,_0x5ca038,_0x41157a){return _0x3be0a8(_0x5ca038,_0x41157a);},'RJBXR':_0xb81e1b(0x13a),'iMOrN':_0xb81e1b(0x15c),'XGFAj':function(_0x5a22f8,_0x7e6420){return _0x5a22f8===_0x7e6420;},'OtzJB':_0xb81e1b(0x146),'XJemt':function(_0xdde833,_0x5bd78e){return _0xdde833(_0x5bd78e);},'JTPPe':function(_0x64d7a,_0x55f681,_0x38f969,_0x450a6b){return _0x64d7a(_0x55f681,_0x38f969,_0x450a6b);},'FslEl':'nightwatch.cmd','xosxb':_0xb81e1b(0x159),'zYyJx':'--env','cJBcS':_0xb81e1b(0x164),'zDDnq':_0xb81e1b(0x14c)},_0x518b00=new BrowserStackSetup(_0x5490ff);if(!_0x518b00[_0xb81e1b(0x157)])return;const _0x5791d4=_0x47b5a9[_0xb81e1b(0x142)](getUserNightwatchConfigs,_0x5490ff,_0x34576d),_0x3dd0df={};_0x3dd0df[_0xb81e1b(0x13e)]=![];const _0x33c007={};_0x33c007['host']=_0x47b5a9[_0xb81e1b(0x16b)],_0x33c007['port']=0x1bb;const _0x1afc6a={};_0x1afc6a[_0xb81e1b(0x160)]=_0x3dd0df,_0x1afc6a['selenium']=_0x33c007;const _0x5477c7=_0x1afc6a;logger['info'](_0x47b5a9[_0xb81e1b(0x13c)]);const _0x16338e={..._0x5791d4},_0x9ff4c3=_0x16338e,_0x124abd=helper['useW3C'](_0x518b00[_0xb81e1b(0x157)]),_0xd7bb0a=[];_0x518b00[_0xb81e1b(0x157)]['platforms']['forEach']((_0x4776b9,_0x1cd199)=>{const _0x3d393e=_0xb81e1b;_0x124abd?_0xd7bb0a[_0x3d393e(0x155)](helper[_0x3d393e(0x147)](_0x518b00[_0x3d393e(0x157)],_0x47b5a9[_0x3d393e(0x17e)],_0x1cd199)):_0xd7bb0a[_0x3d393e(0x155)](helper[_0x3d393e(0x15a)](_0x518b00[_0x3d393e(0x157)],_0x47b5a9['yTPOR'],_0x1cd199));});const _0xe1715={},_0x3b3d38=[];_0x5490ff[_0xb81e1b(0x169)]=_0x5490ff['env']||_0x5490ff['e'];const _0x6e60c9=_0x5490ff[_0xb81e1b(0x169)]?_0x5490ff['env']['trim']()[_0xb81e1b(0x149)](',')[_0xb81e1b(0x154)](_0x11dc87=>_0x11dc87['trim']())[_0xb81e1b(0x15e)](_0x549dd1=>_0x549dd1!==''):[''];_0x47b5a9['XGFAj'](_0x6e60c9[_0xb81e1b(0x17f)],0x0)&&_0x6e60c9[_0xb81e1b(0x155)]('');_0x6e60c9[_0xb81e1b(0x140)](_0x3cb9c2=>{const _0x31b731=_0xb81e1b,_0x127d8c={'KIWCu':function(_0x204811,_0x530be1){return _0x47b5a9['yDcrx'](_0x204811,_0x530be1);},'qTcJX':_0x47b5a9[_0x31b731(0x171)]};_0xd7bb0a[_0x31b731(0x140)](_0x2e3a7d=>{const _0x4be89f=_0x31b731;let _0x7eb832=_0x127d8c['KIWCu'](helper[_0x4be89f(0x17c)](_0x2e3a7d,'_'),'_'+Date[_0x4be89f(0x16c)]());_0x3cb9c2&&(_0x7eb832+='_'+_0x3cb9c2);if(_0x3cb9c2&&(!_0x5791d4[_0x127d8c[_0x4be89f(0x15b)]]||!_0x5791d4[_0x127d8c[_0x4be89f(0x15b)]][_0x3cb9c2]))return;const _0x538435={..._0x5477c7};_0x538435[_0x4be89f(0x14f)]=_0x2e3a7d;const _0x28329f=_0x538435;_0xe1715[_0x7eb832]=_0x3cb9c2?helper[_0x4be89f(0x143)](_0x5791d4[_0x127d8c['qTcJX']][_0x3cb9c2],_0x28329f):_0x28329f,_0x3b3d38[_0x4be89f(0x155)](_0x7eb832);});});!_0x9ff4c3['test_settings']&&(_0x9ff4c3[_0xb81e1b(0x14b)]={});_0x9ff4c3[_0xb81e1b(0x14b)]={..._0x9ff4c3[_0xb81e1b(0x14b)],..._0xe1715};const _0x4565ca=path['join'](__dirname,_0x47b5a9[_0xb81e1b(0x170)]);fs[_0xb81e1b(0x165)](_0x4565ca,JSON[_0xb81e1b(0x180)](_0x9ff4c3)),_0x47b5a9['XJemt'](removeExistingEnvs,_0x34576d);const _0x52f351=_0x47b5a9['JTPPe'](spawn,/^win/[_0xb81e1b(0x150)](process[_0xb81e1b(0x17a)])?_0x47b5a9[_0xb81e1b(0x14e)]:_0x47b5a9[_0xb81e1b(0x17e)],[_0x47b5a9[_0xb81e1b(0x151)],_0x4565ca,..._0x34576d[_0xb81e1b(0x153)](0x1),_0x47b5a9[_0xb81e1b(0x181)],_0x3b3d38[_0xb81e1b(0x148)](',')],{'stdio':_0x47b5a9['cJBcS']});_0x52f351['on'](_0x47b5a9[_0xb81e1b(0x177)],async _0x56e968=>{const _0x1f44a1=_0xb81e1b;logger['debug'](_0x1f44a1(0x161)+_0x56e968),logger[_0x1f44a1(0x17b)](_0x1f44a1(0x158)+_0x4565ca),fs['unlinkSync'](_0x4565ca);});}module[a33_0x4795bd(0x179)]=run;