#!/usr/bin/env node
'use strict';function a38_0x3df9(_0x5a37c4,_0x4a1392){const _0x5e3c38=a38_0x5e3c();return a38_0x3df9=function(_0x3df9eb,_0x25bf07){_0x3df9eb=_0x3df9eb-0x17a;let _0x20c9c9=_0x5e3c38[_0x3df9eb];return _0x20c9c9;},a38_0x3df9(_0x5a37c4,_0x4a1392);}const a38_0x4f275c=a38_0x3df9;(function(_0x4f4d37,_0x437011){const _0x1ddd7c=a38_0x3df9,_0x5ce4a2=_0x4f4d37();while(!![]){try{const _0x2b67b1=parseInt(_0x1ddd7c(0x196))/0x1+-parseInt(_0x1ddd7c(0x180))/0x2+-parseInt(_0x1ddd7c(0x19b))/0x3+-parseInt(_0x1ddd7c(0x18d))/0x4+-parseInt(_0x1ddd7c(0x18e))/0x5+parseInt(_0x1ddd7c(0x1c0))/0x6*(-parseInt(_0x1ddd7c(0x1ad))/0x7)+parseInt(_0x1ddd7c(0x1a7))/0x8;if(_0x2b67b1===_0x437011)break;else _0x5ce4a2['push'](_0x5ce4a2['shift']());}catch(_0x4b9f14){_0x5ce4a2['push'](_0x5ce4a2['shift']());}}}(a38_0x5e3c,0x62b1c));const fs=require('fs'),path=require(a38_0x4f275c(0x19c)),{spawn}=require('child_process'),logger=require(a38_0x4f275c(0x1a0))[a38_0x4f275c(0x192)],{default:BrowserStackSetup}=require(a38_0x4f275c(0x19a)),helper=require('../../helpers/helper'),constants=require('../utils/constants'),getUserNightwatchConfigs=(_0x16b9cc,_0x13c35b)=>{const _0x58dd26=a38_0x4f275c,_0x15621c={'LPpeb':_0x58dd26(0x187),'JOpDn':_0x58dd26(0x1a8),'VXmkc':function(_0x2f0b7c,_0x4cd2b6){return _0x2f0b7c(_0x4cd2b6);},'isAWO':_0x58dd26(0x1be)};let _0x3e2e0a=null,_0x10ee6f={};const _0x5e0b50=_0x13c35b[_0x58dd26(0x184)](_0x1443b3=>_0x1443b3===_0x58dd26(0x1aa));if(!helper['isUndefined'](_0x16b9cc[_0x58dd26(0x17b)])&&fs[_0x58dd26(0x193)](path['join'](process[_0x58dd26(0x1b0)](),_0x16b9cc[_0x58dd26(0x17b)])))_0x3e2e0a=path[_0x58dd26(0x198)](process[_0x58dd26(0x1b0)](),_0x16b9cc[_0x58dd26(0x17b)]),_0x13c35b[_0x58dd26(0x191)](_0x5e0b50,0x2);else{if(fs[_0x58dd26(0x193)](path[_0x58dd26(0x198)](process['cwd'](),_0x15621c['LPpeb'])))_0x3e2e0a=path[_0x58dd26(0x198)](process[_0x58dd26(0x1b0)](),_0x15621c[_0x58dd26(0x1bf)]);else fs[_0x58dd26(0x193)](path[_0x58dd26(0x198)](process['cwd'](),_0x15621c[_0x58dd26(0x190)]))&&(_0x3e2e0a=path[_0x58dd26(0x198)](process[_0x58dd26(0x1b0)](),_0x15621c[_0x58dd26(0x190)]));}return _0x3e2e0a?(logger[_0x58dd26(0x194)](_0x58dd26(0x1b8)+_0x3e2e0a),_0x10ee6f=_0x15621c['VXmkc'](require,_0x3e2e0a)):logger['info'](_0x15621c[_0x58dd26(0x1bc)]),_0x10ee6f;},removeExistingEnvs=_0x8fa3e0=>{const _0x3dd1e4=a38_0x4f275c,_0x54e647={};_0x54e647['CpQut']=function(_0x21ea0d,_0x2a50ac){return _0x21ea0d>_0x2a50ac;},_0x54e647[_0x3dd1e4(0x188)]=function(_0x4b1cb6,_0x52e0f6){return _0x4b1cb6>_0x52e0f6;};const _0x12df70=_0x54e647;let _0x24fecc=_0x8fa3e0[_0x3dd1e4(0x184)](_0x45e544=>_0x45e544==='--env');_0x12df70[_0x3dd1e4(0x1ae)](_0x24fecc,-0x1)&&_0x8fa3e0[_0x3dd1e4(0x191)](_0x24fecc,0x2),_0x24fecc=_0x8fa3e0[_0x3dd1e4(0x184)](_0xb20267=>_0xb20267==='-e'),_0x12df70[_0x3dd1e4(0x188)](_0x24fecc,-0x1)&&_0x8fa3e0[_0x3dd1e4(0x191)](_0x24fecc,0x2);};function run(_0x2990cd,_0x5849d0,_0xb784d4){const _0x180b35=a38_0x4f275c,_0x33a049={'JgjKA':'nightwatch','XGehL':function(_0x82db82,_0x5671ae){return _0x82db82+_0x5671ae;},'mstDv':'test_settings','ldRmE':function(_0x3ff0eb,_0x50ee31,_0xc7cd5e){return _0x3ff0eb(_0x50ee31,_0xc7cd5e);},'oxdNN':_0x180b35(0x186),'mVjEP':'Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','ezgAl':function(_0x460f4b,_0x5065ca){return _0x460f4b===_0x5065ca;},'dhaHS':'nightwatch-browserstack.json','wAhSU':function(_0x50454e,_0x59f249){return _0x50454e(_0x59f249);},'Kwppf':function(_0x135e0d,_0x279955,_0x9fe509,_0x1172a9){return _0x135e0d(_0x279955,_0x9fe509,_0x1172a9);},'GSTap':_0x180b35(0x1b5),'UdgbV':_0x180b35(0x1aa),'zfoPa':_0x180b35(0x17f),'oTLpV':_0x180b35(0x1a6),'fhODl':'close'};if(!_0xb784d4['config'])return;const _0x18d550=_0x33a049[_0x180b35(0x1a4)](getUserNightwatchConfigs,_0x2990cd,_0x5849d0),_0xdda644={};_0xdda644['start_process']=![];const _0x24eac4={};_0x24eac4[_0x180b35(0x199)]=_0x33a049[_0x180b35(0x185)],_0x24eac4[_0x180b35(0x1a5)]=0x1bb;const _0x7bdee8={};_0x7bdee8[_0x180b35(0x189)]=_0xdda644,_0x7bdee8['selenium']=_0x24eac4;const _0x291459=_0x7bdee8;logger[_0x180b35(0x194)](_0x33a049[_0x180b35(0x1b9)]);const _0x155dcd={..._0x18d550},_0x8946a4=_0x155dcd,_0x20d4a7=helper[_0x180b35(0x1ac)](_0xb784d4[_0x180b35(0x17b)]),_0x26a5a2=[];_0xb784d4[_0x180b35(0x17b)]['platforms']['forEach']((_0x4dd570,_0x42be58)=>{const _0x50c070=_0x180b35;_0x20d4a7?_0x26a5a2[_0x50c070(0x1b7)](helper['modifyBrowserStackW3CCaps'](_0xb784d4[_0x50c070(0x17b)],_0x33a049[_0x50c070(0x1b2)],_0x42be58)):_0x26a5a2[_0x50c070(0x1b7)](helper[_0x50c070(0x18f)](_0xb784d4[_0x50c070(0x17b)],_0x33a049['JgjKA'],_0x42be58));});const _0x51262c={},_0x429101=[];_0x2990cd[_0x180b35(0x17c)]=_0x2990cd[_0x180b35(0x17c)]||_0x2990cd['e'];const _0x4d315d=_0x2990cd[_0x180b35(0x17c)]?_0x2990cd[_0x180b35(0x17c)][_0x180b35(0x18b)]()['split'](',')[_0x180b35(0x18a)](_0x1a17c4=>_0x1a17c4[_0x180b35(0x18b)]())[_0x180b35(0x1b3)](_0x547d05=>_0x547d05!==''):[''];_0x33a049['ezgAl'](_0x4d315d[_0x180b35(0x1b1)],0x0)&&_0x4d315d['push']('');_0x4d315d[_0x180b35(0x19d)](_0x42f57e=>{const _0x5e8dcf=_0x180b35;_0x26a5a2[_0x5e8dcf(0x19d)](_0x379e37=>{const _0x305e39=_0x5e8dcf;let _0x28278f=_0x33a049[_0x305e39(0x1af)](helper[_0x305e39(0x195)](_0x379e37,'_'),'_'+Date['now']());_0x42f57e&&(_0x28278f+='_'+_0x42f57e);if(_0x42f57e&&(!_0x18d550[_0x33a049['mstDv']]||!_0x18d550[_0x33a049[_0x305e39(0x19f)]][_0x42f57e]))return;const _0x138b9d={..._0x291459};_0x138b9d[_0x305e39(0x197)]=_0x379e37;const _0x219c7c=_0x138b9d;_0x51262c[_0x28278f]=_0x42f57e?helper[_0x305e39(0x17d)](_0x18d550[_0x33a049[_0x305e39(0x19f)]][_0x42f57e],_0x219c7c):_0x219c7c,_0x429101[_0x305e39(0x1b7)](_0x28278f);});});!_0x8946a4[_0x180b35(0x1a2)]&&(_0x8946a4[_0x180b35(0x1a2)]={});_0x8946a4['test_settings']={..._0x8946a4[_0x180b35(0x1a2)],..._0x51262c};const _0x34ed81=path['join'](__dirname,_0x33a049[_0x180b35(0x1ab)]);fs[_0x180b35(0x182)](_0x34ed81,JSON[_0x180b35(0x1bd)](_0x8946a4)),_0x33a049[_0x180b35(0x183)](removeExistingEnvs,_0x5849d0);const _0x40fad9=_0x33a049[_0x180b35(0x17e)](spawn,/^win/[_0x180b35(0x1ba)](process[_0x180b35(0x1a1)])?_0x33a049[_0x180b35(0x1b4)]:_0x33a049[_0x180b35(0x1b2)],[_0x33a049[_0x180b35(0x19e)],_0x34ed81,..._0x5849d0[_0x180b35(0x181)](0x1),_0x33a049['zfoPa'],_0x429101[_0x180b35(0x198)](',')],{'stdio':_0x33a049[_0x180b35(0x1a9)]});_0x40fad9['on'](_0x33a049[_0x180b35(0x1b6)],async _0x1edc42=>{const _0x5c350b=_0x180b35;logger[_0x5c350b(0x17a)](_0x5c350b(0x18c)+_0x1edc42),logger[_0x5c350b(0x194)](_0x5c350b(0x1a3)+_0x34ed81),fs[_0x5c350b(0x1bb)](_0x34ed81);});}function a38_0x5e3c(){const _0x27fe97=['stringify','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','LPpeb','42qZibym','debug','config','env','mergeDeep','Kwppf','--env','616466YBqFIS','slice','writeFileSync','wAhSU','findIndex','oxdNN','hub.browserstack.com','nightwatch.conf.js','UHgMJ','webdriver','map','trim','child\x20process\x20exited\x20with\x20code\x20','1834016bXlOus','2562170PUPhNz','modifyBrowserStackCaps','JOpDn','splice','winstonLogger','existsSync','info','getPlatformName','684652qyWdpq','desiredCapabilities','join','host','../../helpers/BrowserStackSetup','1602018PNMByI','path','forEach','UdgbV','mstDv','../../helpers/logger','platform','test_settings','Deleting\x20','ldRmE','port','inherit','14396992VpIQJz','nightwatch.json','oTLpV','--config','dhaHS','useW3C','266847XFjOLp','CpQut','XGehL','cwd','length','JgjKA','filter','GSTap','nightwatch.cmd','fhODl','push','Getting\x20your\x20nightwatch\x20configs\x20from\x20','mVjEP','test','unlinkSync','isAWO'];a38_0x5e3c=function(){return _0x27fe97;};return a38_0x5e3c();}module['exports']=run;