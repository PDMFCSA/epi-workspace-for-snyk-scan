#!/usr/bin/env node
'use strict';const a33_0x181927=a33_0x30d7;(function(_0x151a94,_0x3c61ca){const _0x1a1123=a33_0x30d7,_0x44cfdb=_0x151a94();while(!![]){try{const _0x4896f4=parseInt(_0x1a1123(0x77))/0x1*(-parseInt(_0x1a1123(0x82))/0x2)+parseInt(_0x1a1123(0xb2))/0x3+parseInt(_0x1a1123(0x90))/0x4*(-parseInt(_0x1a1123(0x86))/0x5)+-parseInt(_0x1a1123(0xaa))/0x6*(parseInt(_0x1a1123(0x91))/0x7)+-parseInt(_0x1a1123(0x97))/0x8+-parseInt(_0x1a1123(0xac))/0x9*(parseInt(_0x1a1123(0xba))/0xa)+parseInt(_0x1a1123(0x9f))/0xb*(parseInt(_0x1a1123(0x7b))/0xc);if(_0x4896f4===_0x3c61ca)break;else _0x44cfdb['push'](_0x44cfdb['shift']());}catch(_0x16b169){_0x44cfdb['push'](_0x44cfdb['shift']());}}}(a33_0x1a51,0xc809e));const fs=require('fs'),path=require(a33_0x181927(0x85)),{spawn}=require(a33_0x181927(0x6b)),logger=require('../../helpers/logger')[a33_0x181927(0x70)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a33_0x181927(0xb7)),constants=require(a33_0x181927(0xb0)),getUserNightwatchConfigs=(_0x3b58ed,_0x2f294e)=>{const _0x128a12=a33_0x181927,_0x1a25dd={'WUlhA':_0x128a12(0x6e),'LhPRu':'nightwatch.json','afkfE':function(_0x4ba81c,_0x20cca0){return _0x4ba81c(_0x20cca0);},'tgUgE':_0x128a12(0x98)};let _0x3eddd7=null,_0x43d2d0={};const _0x3a161a=_0x2f294e[_0x128a12(0xb6)](_0x211756=>_0x211756===_0x128a12(0xb3));if(!helper[_0x128a12(0x6c)](_0x3b58ed[_0x128a12(0x92)])&&fs['existsSync'](path[_0x128a12(0xa3)](process[_0x128a12(0x71)](),_0x3b58ed['config'])))_0x3eddd7=path[_0x128a12(0xa3)](process[_0x128a12(0x71)](),_0x3b58ed[_0x128a12(0x92)]),_0x2f294e[_0x128a12(0x99)](_0x3a161a,0x2);else{if(fs[_0x128a12(0x9e)](path['join'](process[_0x128a12(0x71)](),_0x1a25dd[_0x128a12(0x94)])))_0x3eddd7=path[_0x128a12(0xa3)](process[_0x128a12(0x71)](),_0x1a25dd[_0x128a12(0x94)]);else fs['existsSync'](path[_0x128a12(0xa3)](process[_0x128a12(0x71)](),_0x1a25dd['LhPRu']))&&(_0x3eddd7=path[_0x128a12(0xa3)](process[_0x128a12(0x71)](),_0x1a25dd['LhPRu']));}return _0x3eddd7?(logger[_0x128a12(0x8a)](_0x128a12(0x9a)+_0x3eddd7),_0x43d2d0=_0x1a25dd[_0x128a12(0xaf)](require,_0x3eddd7)):logger['info'](_0x1a25dd[_0x128a12(0x7c)]),_0x43d2d0;},removeExistingEnvs=_0x4646b4=>{const _0x378a10=a33_0x181927,_0x20d751={};_0x20d751[_0x378a10(0x80)]=function(_0x526607,_0x46ea80){return _0x526607>_0x46ea80;},_0x20d751[_0x378a10(0x89)]=function(_0x59cf25,_0x2bea45){return _0x59cf25>_0x2bea45;};const _0xb30b71=_0x20d751;let _0x19b7aa=_0x4646b4['findIndex'](_0x40745b=>_0x40745b===_0x378a10(0xb9));_0xb30b71[_0x378a10(0x80)](_0x19b7aa,-0x1)&&_0x4646b4[_0x378a10(0x99)](_0x19b7aa,0x2),_0x19b7aa=_0x4646b4[_0x378a10(0xb6)](_0x218495=>_0x218495==='-e'),_0xb30b71[_0x378a10(0x89)](_0x19b7aa,-0x1)&&_0x4646b4[_0x378a10(0x99)](_0x19b7aa,0x2);};function a33_0x30d7(_0x299151,_0x3b37e1){const _0x1a51b2=a33_0x1a51();return a33_0x30d7=function(_0x30d755,_0x362143){_0x30d755=_0x30d755-0x69;let _0xb2bdec=_0x1a51b2[_0x30d755];return _0xb2bdec;},a33_0x30d7(_0x299151,_0x3b37e1);}function run(_0x34b260,_0x41d4f8){const _0x1c17c0=a33_0x181927,_0x159fab={'XxzRR':_0x1c17c0(0x75),'ELNTS':function(_0x3e1ac7,_0x2c8470){return _0x3e1ac7+_0x2c8470;},'PTYxy':'test_settings','EgGbl':function(_0x1662c7,_0x2064c2,_0x93d87){return _0x1662c7(_0x2064c2,_0x93d87);},'SlmIV':'hub.browserstack.com','fXZao':_0x1c17c0(0x9b),'SaKXf':function(_0x116cd1,_0x5f463a){return _0x116cd1===_0x5f463a;},'CCcXH':_0x1c17c0(0x83),'EJvdY':function(_0x54480f,_0x9185f2){return _0x54480f(_0x9185f2);},'qfBEU':function(_0x1950fe,_0x525785,_0x511e3f,_0x4ff443){return _0x1950fe(_0x525785,_0x511e3f,_0x4ff443);},'IvTqW':_0x1c17c0(0x6f),'YONxO':_0x1c17c0(0xb3),'wrLLW':_0x1c17c0(0xb9),'YGUIh':_0x1c17c0(0x78),'hPWUN':_0x1c17c0(0x73)},_0x57a4ff=new BrowserStackSetup(_0x34b260);if(!_0x57a4ff[_0x1c17c0(0x92)])return;const _0x17d5e5=_0x159fab[_0x1c17c0(0x7d)](getUserNightwatchConfigs,_0x34b260,_0x41d4f8),_0xccb269={};_0xccb269[_0x1c17c0(0xad)]=![];const _0x4384fa={};_0x4384fa[_0x1c17c0(0xb4)]=_0x159fab['SlmIV'],_0x4384fa['port']=0x1bb;const _0x16d9dd={};_0x16d9dd[_0x1c17c0(0x9c)]=_0xccb269,_0x16d9dd[_0x1c17c0(0xa8)]=_0x4384fa;const _0x41491c=_0x16d9dd;logger['info'](_0x159fab[_0x1c17c0(0x7f)]);const _0x1e9a97={..._0x17d5e5},_0x13ef42=_0x1e9a97,_0x4a758f=helper[_0x1c17c0(0x8f)](_0x57a4ff[_0x1c17c0(0x92)]),_0x585eb6=[];_0x57a4ff['config'][_0x1c17c0(0x6d)][_0x1c17c0(0x84)]((_0x4eec8b,_0x317dc8)=>{const _0x42dc34=_0x1c17c0;_0x4a758f?_0x585eb6['push'](helper[_0x42dc34(0x88)](_0x57a4ff['config'],_0x159fab['XxzRR'],_0x317dc8)):_0x585eb6['push'](helper[_0x42dc34(0x72)](_0x57a4ff[_0x42dc34(0x92)],_0x159fab['XxzRR'],_0x317dc8));});const _0x20f1c7={},_0xb337a1=[];_0x34b260[_0x1c17c0(0x76)]=_0x34b260[_0x1c17c0(0x76)]||_0x34b260['e'];const _0x4dce54=_0x34b260[_0x1c17c0(0x76)]?_0x34b260[_0x1c17c0(0x76)][_0x1c17c0(0x8c)]()[_0x1c17c0(0x7a)](',')['map'](_0x30df93=>_0x30df93['trim']())['filter'](_0x579b1e=>_0x579b1e!==''):[''];_0x159fab[_0x1c17c0(0xa9)](_0x4dce54[_0x1c17c0(0x8e)],0x0)&&_0x4dce54[_0x1c17c0(0x79)]('');_0x4dce54['forEach'](_0x2ad0bd=>{const _0x2c7490=_0x1c17c0;_0x585eb6[_0x2c7490(0x84)](_0x4780f9=>{const _0x2b63b8=_0x2c7490;let _0x353b16=_0x159fab[_0x2b63b8(0x96)](helper[_0x2b63b8(0xa4)](_0x4780f9,'_'),'_'+Date['now']());_0x2ad0bd&&(_0x353b16+='_'+_0x2ad0bd);if(_0x2ad0bd&&(!_0x17d5e5[_0x159fab[_0x2b63b8(0x74)]]||!_0x17d5e5[_0x159fab[_0x2b63b8(0x74)]][_0x2ad0bd]))return;const _0x41246a={..._0x41491c};_0x41246a[_0x2b63b8(0xab)]=_0x4780f9;const _0x2b6c99=_0x41246a;_0x20f1c7[_0x353b16]=_0x2ad0bd?helper[_0x2b63b8(0x81)](_0x17d5e5[_0x159fab[_0x2b63b8(0x74)]][_0x2ad0bd],_0x2b6c99):_0x2b6c99,_0xb337a1['push'](_0x353b16);});});!_0x13ef42['test_settings']&&(_0x13ef42[_0x1c17c0(0xb1)]={});_0x13ef42[_0x1c17c0(0xb1)]={..._0x13ef42[_0x1c17c0(0xb1)],..._0x20f1c7};const _0x4eaad7=path['join'](__dirname,_0x159fab[_0x1c17c0(0x8d)]);fs[_0x1c17c0(0x7e)](_0x4eaad7,JSON[_0x1c17c0(0x6a)](_0x13ef42)),_0x159fab[_0x1c17c0(0xb8)](removeExistingEnvs,_0x41d4f8);const _0x58fa4d=_0x159fab[_0x1c17c0(0xa1)](spawn,/^win/[_0x1c17c0(0x69)](process[_0x1c17c0(0xb5)])?_0x159fab[_0x1c17c0(0xae)]:_0x159fab[_0x1c17c0(0x8b)],[_0x159fab[_0x1c17c0(0xa0)],_0x4eaad7,..._0x41d4f8[_0x1c17c0(0x95)](0x1),_0x159fab[_0x1c17c0(0x87)],_0xb337a1[_0x1c17c0(0xa3)](',')],{'stdio':_0x159fab['YGUIh']});_0x58fa4d['on'](_0x159fab[_0x1c17c0(0xa6)],async _0x213a7f=>{const _0x22713c=_0x1c17c0;logger[_0x22713c(0x9d)](_0x22713c(0xa5)+_0x213a7f),logger['info'](_0x22713c(0x93)+_0x4eaad7),fs[_0x22713c(0xa2)](_0x4eaad7);});}function a33_0x1a51(){const _0x2c58a7=['debug','existsSync','1419AZohkR','YONxO','qfBEU','unlinkSync','join','getPlatformName','child\x20process\x20exited\x20with\x20code\x20','hPWUN','exports','selenium','SaKXf','102eGaspJ','desiredCapabilities','8973emPTvw','start_process','IvTqW','afkfE','../utils/constants','test_settings','3799575QeWxFw','--config','host','platform','findIndex','../../helpers/helper','EJvdY','--env','6340hnKVUs','test','stringify','child_process','isUndefined','platforms','nightwatch.conf.js','nightwatch.cmd','winstonLogger','cwd','modifyBrowserStackCaps','close','PTYxy','nightwatch','env','66517jxhJQp','inherit','push','split','352068uCuKkW','tgUgE','EgGbl','writeFileSync','fXZao','PaSAX','mergeDeep','24nqeoEp','nightwatch-browserstack.json','forEach','path','255IWWzhv','wrLLW','modifyBrowserStackW3CCaps','PWwZV','info','XxzRR','trim','CCcXH','length','useW3C','126536HdetJs','63077ZTVxNC','config','Deleting\x20','WUlhA','slice','ELNTS','8280600dzzQNU','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','splice','Getting\x20your\x20nightwatch\x20configs\x20from\x20','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','webdriver'];a33_0x1a51=function(){return _0x2c58a7;};return a33_0x1a51();}module[a33_0x181927(0xa7)]=run;