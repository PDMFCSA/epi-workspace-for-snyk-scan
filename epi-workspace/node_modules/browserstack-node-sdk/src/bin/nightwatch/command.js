#!/usr/bin/env node
'use strict';const a33_0x3cabff=a33_0x462d;function a33_0x462d(_0x3749ab,_0x292500){const _0x4df2e4=a33_0x4df2();return a33_0x462d=function(_0x462dac,_0x38328e){_0x462dac=_0x462dac-0x197;let _0x58149b=_0x4df2e4[_0x462dac];return _0x58149b;},a33_0x462d(_0x3749ab,_0x292500);}(function(_0x4cfc69,_0x5e7bf6){const _0x3b7d9b=a33_0x462d,_0x197315=_0x4cfc69();while(!![]){try{const _0x5c8770=parseInt(_0x3b7d9b(0x1b6))/0x1+parseInt(_0x3b7d9b(0x1a2))/0x2+parseInt(_0x3b7d9b(0x1c6))/0x3*(-parseInt(_0x3b7d9b(0x1b2))/0x4)+-parseInt(_0x3b7d9b(0x1d6))/0x5*(parseInt(_0x3b7d9b(0x1d0))/0x6)+parseInt(_0x3b7d9b(0x1b7))/0x7+-parseInt(_0x3b7d9b(0x1c3))/0x8+parseInt(_0x3b7d9b(0x1a5))/0x9;if(_0x5c8770===_0x5e7bf6)break;else _0x197315['push'](_0x197315['shift']());}catch(_0x2faa80){_0x197315['push'](_0x197315['shift']());}}}(a33_0x4df2,0xa1484));function a33_0x4df2(){const _0x2c1114=['hub.browserstack.com','mOrKO','--env','UYZiE','../../helpers/helper','uAlPD','inherit','push','splice','YKgtF','1896496TLnBTw','URiAB','FVRGa','3664575NCQryA','nightwatch.conf.js','iWRQf','info','host','env','child\x20process\x20exited\x20with\x20code\x20','--config','findIndex','Ztohd','isUndefined','nightwatch.json','ukyrn','4qABkLJ','nightwatch.cmd','XkKkP','sYzdr','335684eTuvfS','7205051ijFOhb','../../helpers/BrowserStackSetup','VbGMQ','cwd','child_process','length','../../helpers/logger','platform','Getting\x20your\x20nightwatch\x20configs\x20from\x20','debug','map','config','9384280vhfVyt','unlinkSync','test_settings','47991UuYwnH','mergeDeep','NGJwU','jQeVH','now','close','trim','test','wvUfY','GHFVE','6pLdtBW','getPlatformName','PjIhA','../utils/constants','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','slice','4353780XRqZjP','useW3C','fSeHe','join','existsSync','writeFileSync','ctFYl'];a33_0x4df2=function(){return _0x2c1114;};return a33_0x4df2();}const fs=require('fs'),path=require('path'),{spawn}=require(a33_0x3cabff(0x1bb)),logger=require(a33_0x3cabff(0x1bd))['winstonLogger'],{default:BrowserStackSetup}=require(a33_0x3cabff(0x1b8)),helper=require(a33_0x3cabff(0x19c)),constants=require(a33_0x3cabff(0x1d3)),getUserNightwatchConfigs=(_0x53217a,_0x56a607)=>{const _0x595da9=a33_0x3cabff,_0x734bb4={'jQeVH':_0x595da9(0x1a6),'uAlPD':_0x595da9(0x1b0),'iWRQf':function(_0x3c879a,_0x3c1ea4){return _0x3c879a(_0x3c1ea4);},'fSeHe':'Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file'};let _0x1dd3b1=null,_0x4f5ae1={};const _0x4ac0e3=_0x56a607['findIndex'](_0x8884a1=>_0x8884a1===_0x595da9(0x1ac));if(!helper[_0x595da9(0x1af)](_0x53217a[_0x595da9(0x1c2)])&&fs['existsSync'](path[_0x595da9(0x1d9)](process['cwd'](),_0x53217a[_0x595da9(0x1c2)])))_0x1dd3b1=path[_0x595da9(0x1d9)](process[_0x595da9(0x1ba)](),_0x53217a['config']),_0x56a607[_0x595da9(0x1a0)](_0x4ac0e3,0x2);else{if(fs[_0x595da9(0x1da)](path[_0x595da9(0x1d9)](process[_0x595da9(0x1ba)](),_0x734bb4['jQeVH'])))_0x1dd3b1=path[_0x595da9(0x1d9)](process[_0x595da9(0x1ba)](),_0x734bb4[_0x595da9(0x1c9)]);else fs['existsSync'](path['join'](process['cwd'](),_0x734bb4[_0x595da9(0x19d)]))&&(_0x1dd3b1=path[_0x595da9(0x1d9)](process[_0x595da9(0x1ba)](),_0x734bb4[_0x595da9(0x19d)]));}return _0x1dd3b1?(logger[_0x595da9(0x1a8)](_0x595da9(0x1bf)+_0x1dd3b1),_0x4f5ae1=_0x734bb4[_0x595da9(0x1a7)](require,_0x1dd3b1)):logger[_0x595da9(0x1a8)](_0x734bb4[_0x595da9(0x1d8)]),_0x4f5ae1;},removeExistingEnvs=_0x267ac9=>{const _0x315d76=a33_0x3cabff,_0x18b2cd={};_0x18b2cd['CwUDI']=function(_0x138dd1,_0x2638e9){return _0x138dd1>_0x2638e9;},_0x18b2cd[_0x315d76(0x1b9)]=function(_0x2484b7,_0x39cb6f){return _0x2484b7>_0x39cb6f;};const _0xd162fe=_0x18b2cd;let _0x2bdb21=_0x267ac9[_0x315d76(0x1ad)](_0x2899d6=>_0x2899d6==='--env');_0xd162fe['CwUDI'](_0x2bdb21,-0x1)&&_0x267ac9[_0x315d76(0x1a0)](_0x2bdb21,0x2),_0x2bdb21=_0x267ac9[_0x315d76(0x1ad)](_0x454a72=>_0x454a72==='-e'),_0xd162fe['VbGMQ'](_0x2bdb21,-0x1)&&_0x267ac9[_0x315d76(0x1a0)](_0x2bdb21,0x2);};function run(_0x20a6ff,_0x4fd4f0,_0x18e0f3){const _0x878c46=a33_0x3cabff,_0x7b1ab3={'URiAB':'nightwatch','XkKkP':function(_0x4ae30f,_0x37e523){return _0x4ae30f+_0x37e523;},'wvUfY':_0x878c46(0x1c5),'mOrKO':function(_0x47b758,_0x38018c,_0x153f38){return _0x47b758(_0x38018c,_0x153f38);},'ctFYl':_0x878c46(0x198),'YKgtF':_0x878c46(0x1d4),'Ztohd':function(_0x5a9284,_0x16d567){return _0x5a9284===_0x16d567;},'PjIhA':'nightwatch-browserstack.json','sYzdr':function(_0x5d1118,_0x1ce7b1){return _0x5d1118(_0x1ce7b1);},'NGJwU':function(_0x922435,_0x4e606d,_0x310180,_0x191087){return _0x922435(_0x4e606d,_0x310180,_0x191087);},'rpCxT':_0x878c46(0x1b3),'FVRGa':_0x878c46(0x1ac),'JMLkh':_0x878c46(0x19a),'ukyrn':_0x878c46(0x19e),'DIExl':_0x878c46(0x1cb)};if(!_0x18e0f3[_0x878c46(0x1c2)])return;const _0x3a8508=_0x7b1ab3[_0x878c46(0x199)](getUserNightwatchConfigs,_0x20a6ff,_0x4fd4f0),_0x2cf2e1={};_0x2cf2e1['start_process']=![];const _0x4f10a3={};_0x4f10a3[_0x878c46(0x1a9)]=_0x7b1ab3[_0x878c46(0x197)],_0x4f10a3['port']=0x1bb;const _0x4c0bd1={};_0x4c0bd1['webdriver']=_0x2cf2e1,_0x4c0bd1['selenium']=_0x4f10a3;const _0xfa33db=_0x4c0bd1;logger[_0x878c46(0x1a8)](_0x7b1ab3[_0x878c46(0x1a1)]);const _0x31f84c={..._0x3a8508},_0x2e0bdb=_0x31f84c,_0x7610bd=helper[_0x878c46(0x1d7)](_0x18e0f3['config']),_0x4b36d5=[];_0x18e0f3[_0x878c46(0x1c2)]['platforms']['forEach']((_0xff10f6,_0x48cef5)=>{const _0x367ff4=_0x878c46;_0x7610bd?_0x4b36d5['push'](helper['modifyBrowserStackW3CCaps'](_0x18e0f3['config'],_0x7b1ab3['URiAB'],_0x48cef5)):_0x4b36d5[_0x367ff4(0x19f)](helper['modifyBrowserStackCaps'](_0x18e0f3[_0x367ff4(0x1c2)],_0x7b1ab3[_0x367ff4(0x1a3)],_0x48cef5));});const _0x1289a3={},_0x3d72ef=[];_0x20a6ff[_0x878c46(0x1aa)]=_0x20a6ff[_0x878c46(0x1aa)]||_0x20a6ff['e'];const _0x1f48ad=_0x20a6ff[_0x878c46(0x1aa)]?_0x20a6ff[_0x878c46(0x1aa)][_0x878c46(0x1cc)]()['split'](',')[_0x878c46(0x1c1)](_0xcc4d9e=>_0xcc4d9e[_0x878c46(0x1cc)]())['filter'](_0x537db3=>_0x537db3!==''):[''];_0x7b1ab3[_0x878c46(0x1ae)](_0x1f48ad[_0x878c46(0x1bc)],0x0)&&_0x1f48ad[_0x878c46(0x19f)]('');_0x1f48ad['forEach'](_0x58b3df=>{const _0x4c0dee=_0x878c46,_0x4af9df={'GHFVE':function(_0x340463,_0x21381d){const _0x191261=a33_0x462d;return _0x7b1ab3[_0x191261(0x1b4)](_0x340463,_0x21381d);},'UYZiE':_0x7b1ab3[_0x4c0dee(0x1ce)]};_0x4b36d5['forEach'](_0x430e62=>{const _0x2d1953=_0x4c0dee;let _0x1905a4=_0x4af9df[_0x2d1953(0x1cf)](helper[_0x2d1953(0x1d1)](_0x430e62,'_'),'_'+Date[_0x2d1953(0x1ca)]());_0x58b3df&&(_0x1905a4+='_'+_0x58b3df);if(_0x58b3df&&(!_0x3a8508[_0x4af9df[_0x2d1953(0x19b)]]||!_0x3a8508[_0x4af9df[_0x2d1953(0x19b)]][_0x58b3df]))return;const _0x4b3017={..._0xfa33db};_0x4b3017['desiredCapabilities']=_0x430e62;const _0xb6bc67=_0x4b3017;_0x1289a3[_0x1905a4]=_0x58b3df?helper[_0x2d1953(0x1c7)](_0x3a8508[_0x4af9df['UYZiE']][_0x58b3df],_0xb6bc67):_0xb6bc67,_0x3d72ef['push'](_0x1905a4);});});!_0x2e0bdb[_0x878c46(0x1c5)]&&(_0x2e0bdb[_0x878c46(0x1c5)]={});_0x2e0bdb['test_settings']={..._0x2e0bdb['test_settings'],..._0x1289a3};const _0x533438=path[_0x878c46(0x1d9)](__dirname,_0x7b1ab3[_0x878c46(0x1d2)]);fs[_0x878c46(0x1db)](_0x533438,JSON['stringify'](_0x2e0bdb)),_0x7b1ab3[_0x878c46(0x1b5)](removeExistingEnvs,_0x4fd4f0);const _0x2124c7=_0x7b1ab3[_0x878c46(0x1c8)](spawn,/^win/[_0x878c46(0x1cd)](process[_0x878c46(0x1be)])?_0x7b1ab3['rpCxT']:_0x7b1ab3['URiAB'],[_0x7b1ab3[_0x878c46(0x1a4)],_0x533438,..._0x4fd4f0[_0x878c46(0x1d5)](0x1),_0x7b1ab3['JMLkh'],_0x3d72ef['join'](',')],{'stdio':_0x7b1ab3[_0x878c46(0x1b1)]});_0x2124c7['on'](_0x7b1ab3['DIExl'],async _0x4a375b=>{const _0x2eab5c=_0x878c46;logger[_0x2eab5c(0x1c0)](_0x2eab5c(0x1ab)+_0x4a375b),logger[_0x2eab5c(0x1a8)]('Deleting\x20'+_0x533438),fs[_0x2eab5c(0x1c4)](_0x533438);});}module['exports']=run;