#!/usr/bin/env node
'use strict';function a38_0x331a(){const _0x38b320=['HLGbJ','port','map','76833EPiUjN','config','../../helpers/BrowserStackSetup','filter','aKDJA','existsSync','HcZAy','selenium','desiredCapabilities','path','pmWMT','nightwatch.conf.js','nightwatch-browserstack.json','nightwatch.cmd','--env','txsXX','AyOra','wmliO','124248jCVKJw','modifyBrowserStackW3CCaps','4710596zichLf','close','kgFZB','info','srbOg','test','810SkzZaR','LAEfS','writeFileSync','isUndefined','getPlatformName','--config','push','FabqW','winstonLogger','modifyBrowserStackCaps','439360ajxNcM','5171982HdkeUk','DfhaI','host','mtPpZ','7XHWuqr','join','start_process','env','182930GcTXfR','wDIAZ','../../helpers/logger','findIndex','Getting\x20your\x20nightwatch\x20configs\x20from\x20','../utils/constants','inherit','length','child_process','stringify','splice','trim','XQbRR','2SEzGbK','RfWrv','2488528OYJHyn','cwd','GRbsz','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','platforms','test_settings','30vAtftV','ZvXbq','slice','forEach'];a38_0x331a=function(){return _0x38b320;};return a38_0x331a();}const a38_0xefe041=a38_0x3647;function a38_0x3647(_0x2008e8,_0x1eed99){const _0x331a2b=a38_0x331a();return a38_0x3647=function(_0x364753,_0x565ed5){_0x364753=_0x364753-0x13b;let _0x21684d=_0x331a2b[_0x364753];return _0x21684d;},a38_0x3647(_0x2008e8,_0x1eed99);}(function(_0x2d88d5,_0x4fba03){const _0x3a821b=a38_0x3647,_0x48e708=_0x2d88d5();while(!![]){try{const _0x488ca5=parseInt(_0x3a821b(0x17c))/0x1+parseInt(_0x3a821b(0x140))/0x2*(-parseInt(_0x3a821b(0x161))/0x3)+-parseInt(_0x3a821b(0x173))/0x4*(-parseInt(_0x3a821b(0x148))/0x5)+-parseInt(_0x3a821b(0x174))/0x6*(parseInt(_0x3a821b(0x178))/0x7)+-parseInt(_0x3a821b(0x142))/0x8+parseInt(_0x3a821b(0x14f))/0x9*(parseInt(_0x3a821b(0x169))/0xa)+parseInt(_0x3a821b(0x163))/0xb;if(_0x488ca5===_0x4fba03)break;else _0x48e708['push'](_0x48e708['shift']());}catch(_0x40c1ae){_0x48e708['push'](_0x48e708['shift']());}}}(a38_0x331a,0xb66d8));const fs=require('fs'),path=require(a38_0xefe041(0x158)),{spawn}=require(a38_0xefe041(0x13b)),logger=require(a38_0xefe041(0x17e))[a38_0xefe041(0x171)],{default:BrowserStackSetup}=require(a38_0xefe041(0x151)),helper=require('../../helpers/helper'),constants=require(a38_0xefe041(0x181)),getUserNightwatchConfigs=(_0x4d2c8a,_0x2208f5)=>{const _0x2b0283=a38_0xefe041,_0x25c764={'wDIAZ':_0x2b0283(0x15a),'FabqW':'nightwatch.json','GRbsz':function(_0x9dead1,_0x21776e){return _0x9dead1(_0x21776e);},'wmliO':'Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file'};let _0x588aad=null,_0x39e09e={};const _0x23640b=_0x2208f5[_0x2b0283(0x17f)](_0x2c9257=>_0x2c9257===_0x2b0283(0x16e));if(!helper[_0x2b0283(0x16c)](_0x4d2c8a['config'])&&fs[_0x2b0283(0x154)](path[_0x2b0283(0x179)](process[_0x2b0283(0x143)](),_0x4d2c8a[_0x2b0283(0x150)])))_0x588aad=path[_0x2b0283(0x179)](process[_0x2b0283(0x143)](),_0x4d2c8a[_0x2b0283(0x150)]),_0x2208f5[_0x2b0283(0x13d)](_0x23640b,0x2);else{if(fs['existsSync'](path['join'](process['cwd'](),_0x25c764[_0x2b0283(0x17d)])))_0x588aad=path[_0x2b0283(0x179)](process[_0x2b0283(0x143)](),_0x25c764['wDIAZ']);else fs[_0x2b0283(0x154)](path['join'](process[_0x2b0283(0x143)](),_0x25c764[_0x2b0283(0x170)]))&&(_0x588aad=path['join'](process[_0x2b0283(0x143)](),_0x25c764[_0x2b0283(0x170)]));}return _0x588aad?(logger[_0x2b0283(0x166)](_0x2b0283(0x180)+_0x588aad),_0x39e09e=_0x25c764[_0x2b0283(0x144)](require,_0x588aad)):logger[_0x2b0283(0x166)](_0x25c764[_0x2b0283(0x160)]),_0x39e09e;},removeExistingEnvs=_0xf85896=>{const _0x138498=a38_0xefe041,_0x30aadf={};_0x30aadf['ZvXbq']=function(_0x3efb12,_0x4b32aa){return _0x3efb12>_0x4b32aa;};const _0x3082bb=_0x30aadf;let _0x340618=_0xf85896[_0x138498(0x17f)](_0x41b3cc=>_0x41b3cc===_0x138498(0x15d));_0x3082bb['ZvXbq'](_0x340618,-0x1)&&_0xf85896[_0x138498(0x13d)](_0x340618,0x2),_0x340618=_0xf85896[_0x138498(0x17f)](_0x224aa3=>_0x224aa3==='-e'),_0x3082bb[_0x138498(0x149)](_0x340618,-0x1)&&_0xf85896['splice'](_0x340618,0x2);};function run(_0x5844c3,_0x1b02ab,_0x1697cf){const _0x32a96a=a38_0xefe041,_0x3416dc={'pmWMT':'nightwatch','jkMgl':function(_0x137c03,_0xb87676){return _0x137c03+_0xb87676;},'txsXX':'test_settings','AyOra':function(_0x205f22,_0x343ed3,_0xf139aa){return _0x205f22(_0x343ed3,_0xf139aa);},'RfWrv':'hub.browserstack.com','lZLEx':_0x32a96a(0x145),'LAEfS':function(_0x46baf2,_0x59b796){return _0x46baf2===_0x59b796;},'HLGbJ':_0x32a96a(0x15b),'aKDJA':function(_0xd8f7a4,_0xa400df){return _0xd8f7a4(_0xa400df);},'mtPpZ':function(_0x1e0584,_0x230ecc,_0x2a89e9,_0x1530c8){return _0x1e0584(_0x230ecc,_0x2a89e9,_0x1530c8);},'tBzPd':_0x32a96a(0x15c),'cbjLe':'--config','XQbRR':_0x32a96a(0x15d),'HcZAy':_0x32a96a(0x182),'srbOg':_0x32a96a(0x164)};if(!_0x1697cf[_0x32a96a(0x150)])return;const _0x1c6d73=_0x3416dc[_0x32a96a(0x15f)](getUserNightwatchConfigs,_0x5844c3,_0x1b02ab),_0xa1e6e9={};_0xa1e6e9[_0x32a96a(0x17a)]=![];const _0x338fdc={};_0x338fdc[_0x32a96a(0x176)]=_0x3416dc[_0x32a96a(0x141)],_0x338fdc[_0x32a96a(0x14d)]=0x1bb;const _0x2511fb={};_0x2511fb['webdriver']=_0xa1e6e9,_0x2511fb[_0x32a96a(0x156)]=_0x338fdc;const _0x392ce3=_0x2511fb;logger['info'](_0x3416dc['lZLEx']);const _0x227cfe={..._0x1c6d73},_0x1945de=_0x227cfe,_0x32c0f6=helper['useW3C'](_0x1697cf[_0x32a96a(0x150)]),_0x5b875d=[];_0x1697cf[_0x32a96a(0x150)][_0x32a96a(0x146)][_0x32a96a(0x14b)]((_0x522203,_0x3bad33)=>{const _0x5df724=_0x32a96a;_0x32c0f6?_0x5b875d[_0x5df724(0x16f)](helper[_0x5df724(0x162)](_0x1697cf[_0x5df724(0x150)],_0x3416dc['pmWMT'],_0x3bad33)):_0x5b875d[_0x5df724(0x16f)](helper[_0x5df724(0x172)](_0x1697cf[_0x5df724(0x150)],_0x3416dc[_0x5df724(0x159)],_0x3bad33));});const _0x52ea1b={},_0x13daa4=[];_0x5844c3[_0x32a96a(0x17b)]=_0x5844c3[_0x32a96a(0x17b)]||_0x5844c3['e'];const _0x332965=_0x5844c3[_0x32a96a(0x17b)]?_0x5844c3[_0x32a96a(0x17b)][_0x32a96a(0x13e)]()['split'](',')[_0x32a96a(0x14e)](_0x30c51a=>_0x30c51a[_0x32a96a(0x13e)]())[_0x32a96a(0x152)](_0x102509=>_0x102509!==''):[''];_0x3416dc[_0x32a96a(0x16a)](_0x332965[_0x32a96a(0x183)],0x0)&&_0x332965['push']('');_0x332965[_0x32a96a(0x14b)](_0x462cd=>{const _0x58bff1=_0x32a96a,_0x111cbe={'kgFZB':function(_0x175c6d,_0x2cd4d3){return _0x3416dc['jkMgl'](_0x175c6d,_0x2cd4d3);},'DfhaI':_0x3416dc[_0x58bff1(0x15e)]};_0x5b875d[_0x58bff1(0x14b)](_0x233d16=>{const _0x184a94=_0x58bff1;let _0xb85968=_0x111cbe[_0x184a94(0x165)](helper[_0x184a94(0x16d)](_0x233d16,'_'),'_'+Date['now']());_0x462cd&&(_0xb85968+='_'+_0x462cd);if(_0x462cd&&(!_0x1c6d73[_0x111cbe[_0x184a94(0x175)]]||!_0x1c6d73[_0x111cbe['DfhaI']][_0x462cd]))return;const _0x2e01e1={..._0x392ce3};_0x2e01e1[_0x184a94(0x157)]=_0x233d16;const _0x4e3c72=_0x2e01e1;_0x52ea1b[_0xb85968]=_0x462cd?helper['mergeDeep'](_0x1c6d73[_0x111cbe[_0x184a94(0x175)]][_0x462cd],_0x4e3c72):_0x4e3c72,_0x13daa4['push'](_0xb85968);});});!_0x1945de['test_settings']&&(_0x1945de[_0x32a96a(0x147)]={});_0x1945de[_0x32a96a(0x147)]={..._0x1945de[_0x32a96a(0x147)],..._0x52ea1b};const _0x5a14f3=path[_0x32a96a(0x179)](__dirname,_0x3416dc[_0x32a96a(0x14c)]);fs[_0x32a96a(0x16b)](_0x5a14f3,JSON[_0x32a96a(0x13c)](_0x1945de)),_0x3416dc[_0x32a96a(0x153)](removeExistingEnvs,_0x1b02ab);const _0x42e771=_0x3416dc[_0x32a96a(0x177)](spawn,/^win/[_0x32a96a(0x168)](process['platform'])?_0x3416dc['tBzPd']:_0x3416dc['pmWMT'],[_0x3416dc['cbjLe'],_0x5a14f3,..._0x1b02ab[_0x32a96a(0x14a)](0x1),_0x3416dc[_0x32a96a(0x13f)],_0x13daa4[_0x32a96a(0x179)](',')],{'stdio':_0x3416dc[_0x32a96a(0x155)]});_0x42e771['on'](_0x3416dc[_0x32a96a(0x167)],async _0x1e57ab=>{logger['debug']('child\x20process\x20exited\x20with\x20code\x20'+_0x1e57ab),logger['info']('Deleting\x20'+_0x5a14f3),fs['unlinkSync'](_0x5a14f3);});}module['exports']=run;