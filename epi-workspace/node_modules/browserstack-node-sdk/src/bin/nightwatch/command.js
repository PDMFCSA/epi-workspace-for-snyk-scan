#!/usr/bin/env node
'use strict';const a33_0x22a72a=a33_0xea45;(function(_0xb126c5,_0xb493ab){const _0x14d033=a33_0xea45,_0x2fd509=_0xb126c5();while(!![]){try{const _0x1b6790=parseInt(_0x14d033(0x156))/0x1+parseInt(_0x14d033(0x126))/0x2+-parseInt(_0x14d033(0x161))/0x3+parseInt(_0x14d033(0x12d))/0x4*(parseInt(_0x14d033(0x146))/0x5)+-parseInt(_0x14d033(0x12a))/0x6*(parseInt(_0x14d033(0x127))/0x7)+-parseInt(_0x14d033(0x145))/0x8+parseInt(_0x14d033(0x164))/0x9*(parseInt(_0x14d033(0x121))/0xa);if(_0x1b6790===_0xb493ab)break;else _0x2fd509['push'](_0x2fd509['shift']());}catch(_0x4b0747){_0x2fd509['push'](_0x2fd509['shift']());}}}(a33_0x49ee,0x19578));const fs=require('fs'),path=require('path'),{spawn}=require('child_process'),logger=require(a33_0x22a72a(0x155))[a33_0x22a72a(0x15e)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a33_0x22a72a(0x13d)),constants=require(a33_0x22a72a(0x137)),getUserNightwatchConfigs=(_0x2b6d83,_0x825ede)=>{const _0x4b3a61=a33_0x22a72a,_0x55e56a={'cTxAM':_0x4b3a61(0x134),'Kcgzb':_0x4b3a61(0x12b),'QvVou':function(_0x65a4e,_0x121f76){return _0x65a4e(_0x121f76);},'BCoks':_0x4b3a61(0x13c)};let _0x37dad8=null,_0x10b252={};const _0x34d74a=_0x825ede[_0x4b3a61(0x150)](_0x8fe31d=>_0x8fe31d===_0x4b3a61(0x167));if(!helper[_0x4b3a61(0x15d)](_0x2b6d83[_0x4b3a61(0x154)])&&fs[_0x4b3a61(0x165)](path['join'](process[_0x4b3a61(0x130)](),_0x2b6d83[_0x4b3a61(0x154)])))_0x37dad8=path[_0x4b3a61(0x131)](process[_0x4b3a61(0x130)](),_0x2b6d83[_0x4b3a61(0x154)]),_0x825ede[_0x4b3a61(0x124)](_0x34d74a,0x2);else{if(fs[_0x4b3a61(0x165)](path[_0x4b3a61(0x131)](process[_0x4b3a61(0x130)](),_0x55e56a[_0x4b3a61(0x162)])))_0x37dad8=path[_0x4b3a61(0x131)](process['cwd'](),_0x55e56a['cTxAM']);else fs[_0x4b3a61(0x165)](path[_0x4b3a61(0x131)](process[_0x4b3a61(0x130)](),_0x55e56a[_0x4b3a61(0x14c)]))&&(_0x37dad8=path[_0x4b3a61(0x131)](process[_0x4b3a61(0x130)](),_0x55e56a[_0x4b3a61(0x14c)]));}return _0x37dad8?(logger[_0x4b3a61(0x140)](_0x4b3a61(0x12f)+_0x37dad8),_0x10b252=_0x55e56a[_0x4b3a61(0x132)](require,_0x37dad8)):logger['info'](_0x55e56a[_0x4b3a61(0x133)]),_0x10b252;},removeExistingEnvs=_0x2fbfa8=>{const _0x6252ce=a33_0x22a72a,_0x2a1df0={};_0x2a1df0[_0x6252ce(0x12c)]=function(_0x56eb55,_0x4e6a6f){return _0x56eb55>_0x4e6a6f;};const _0x97f980=_0x2a1df0;let _0x32ce4e=_0x2fbfa8[_0x6252ce(0x150)](_0x4ac115=>_0x4ac115===_0x6252ce(0x15a));_0x97f980[_0x6252ce(0x12c)](_0x32ce4e,-0x1)&&_0x2fbfa8[_0x6252ce(0x124)](_0x32ce4e,0x2),_0x32ce4e=_0x2fbfa8['findIndex'](_0x27f7f9=>_0x27f7f9==='-e'),_0x97f980[_0x6252ce(0x12c)](_0x32ce4e,-0x1)&&_0x2fbfa8[_0x6252ce(0x124)](_0x32ce4e,0x2);};function a33_0xea45(_0x16856b,_0x2a0409){const _0x49eeb9=a33_0x49ee();return a33_0xea45=function(_0xea450f,_0xaf29e6){_0xea450f=_0xea450f-0x11f;let _0x3f7bbe=_0x49eeb9[_0xea450f];return _0x3f7bbe;},a33_0xea45(_0x16856b,_0x2a0409);}function a33_0x49ee(){const _0x40f6c7=['writeFileSync','slice','DjSRV','--env','platforms','forEach','isUndefined','winstonLogger','cQBRq','platform','274722eJkLnP','cTxAM','test','7263twfZWz','existsSync','map','--config','length','FyNUC','test_settings','ZWSoZ','2340nXWkAz','nightwatch-browserstack.json','child\x20process\x20exited\x20with\x20code\x20','splice','host','200518KSKnyD','3619hJJYDV','filter','tGIrN','2256ptBnNH','nightwatch.json','iAkrF','11044bfXdZf','kRBMp','Getting\x20your\x20nightwatch\x20configs\x20from\x20','cwd','join','QvVou','BCoks','nightwatch.conf.js','split','JveWQ','../utils/constants','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','modifyBrowserStackCaps','getPlatformName','OQAFR','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','../../helpers/helper','trim','debug','info','modifyBrowserStackW3CCaps','UozsV','webdriver','push','461280bdOzCI','70mszuwu','useW3C','close','hub.browserstack.com','eCDwh','WVote','Kcgzb','desiredCapabilities','selenium','rSygV','findIndex','start_process','BXLqb','env','config','../../helpers/logger','119675QHmrFF'];a33_0x49ee=function(){return _0x40f6c7;};return a33_0x49ee();}function run(_0x45951f,_0x563114){const _0xa37ff0=a33_0x22a72a,_0x5888c6={'cQBRq':'nightwatch','ZWSoZ':function(_0x493a20,_0x48fe83){return _0x493a20+_0x48fe83;},'FyNUC':'test_settings','eCDwh':function(_0x3403af,_0x1aaa8c,_0xc2a01b){return _0x3403af(_0x1aaa8c,_0xc2a01b);},'JveWQ':_0xa37ff0(0x149),'UozsV':_0xa37ff0(0x138),'kRBMp':function(_0x2d1fd0,_0x442197){return _0x2d1fd0===_0x442197;},'ovYFR':_0xa37ff0(0x122),'OQAFR':function(_0xa5e637,_0x860e72){return _0xa5e637(_0x860e72);},'vtHTt':function(_0x2323cc,_0x1ee837,_0x378b4f,_0x429faf){return _0x2323cc(_0x1ee837,_0x378b4f,_0x429faf);},'DNzqf':'nightwatch.cmd','DjSRV':_0xa37ff0(0x167),'lQcld':_0xa37ff0(0x15a),'BXLqb':'inherit','WVote':_0xa37ff0(0x148)},_0x42d365=new BrowserStackSetup(_0x45951f);if(!_0x42d365[_0xa37ff0(0x154)])return;const _0x56ef3e=_0x5888c6[_0xa37ff0(0x14a)](getUserNightwatchConfigs,_0x45951f,_0x563114),_0x5e07eb={};_0x5e07eb[_0xa37ff0(0x151)]=![];const _0x29ba07={};_0x29ba07[_0xa37ff0(0x125)]=_0x5888c6[_0xa37ff0(0x136)],_0x29ba07['port']=0x1bb;const _0x33c0f1={};_0x33c0f1[_0xa37ff0(0x143)]=_0x5e07eb,_0x33c0f1[_0xa37ff0(0x14e)]=_0x29ba07;const _0x1968e3=_0x33c0f1;logger['info'](_0x5888c6[_0xa37ff0(0x142)]);const _0x4fb13b={..._0x56ef3e},_0x2162d0=_0x4fb13b,_0x4f7222=helper[_0xa37ff0(0x147)](_0x42d365['config']),_0x2ac1aa=[];_0x42d365[_0xa37ff0(0x154)][_0xa37ff0(0x15b)][_0xa37ff0(0x15c)]((_0x2608ef,_0x5b0cac)=>{const _0x3dc539=_0xa37ff0;_0x4f7222?_0x2ac1aa[_0x3dc539(0x144)](helper[_0x3dc539(0x141)](_0x42d365[_0x3dc539(0x154)],_0x5888c6[_0x3dc539(0x15f)],_0x5b0cac)):_0x2ac1aa[_0x3dc539(0x144)](helper[_0x3dc539(0x139)](_0x42d365['config'],_0x5888c6['cQBRq'],_0x5b0cac));});const _0x12104e={},_0x41a10f=[];_0x45951f[_0xa37ff0(0x153)]=_0x45951f[_0xa37ff0(0x153)]||_0x45951f['e'];const _0x46d6ba=_0x45951f[_0xa37ff0(0x153)]?_0x45951f['env'][_0xa37ff0(0x13e)]()[_0xa37ff0(0x135)](',')[_0xa37ff0(0x166)](_0xe6598e=>_0xe6598e[_0xa37ff0(0x13e)]())[_0xa37ff0(0x128)](_0xa0fae9=>_0xa0fae9!==''):[''];_0x5888c6[_0xa37ff0(0x12e)](_0x46d6ba[_0xa37ff0(0x168)],0x0)&&_0x46d6ba[_0xa37ff0(0x144)]('');_0x46d6ba['forEach'](_0x9d581c=>{const _0x24a84a=_0xa37ff0,_0x3a9a4b={'tGIrN':function(_0x2f0a50,_0x31962f){const _0x3bd42f=a33_0xea45;return _0x5888c6[_0x3bd42f(0x120)](_0x2f0a50,_0x31962f);},'rSygV':_0x5888c6[_0x24a84a(0x169)]};_0x2ac1aa[_0x24a84a(0x15c)](_0xbf58c9=>{const _0x23cb01=_0x24a84a;let _0x5ccdcf=_0x3a9a4b[_0x23cb01(0x129)](helper[_0x23cb01(0x13a)](_0xbf58c9,'_'),'_'+Date['now']());_0x9d581c&&(_0x5ccdcf+='_'+_0x9d581c);if(_0x9d581c&&(!_0x56ef3e[_0x3a9a4b[_0x23cb01(0x14f)]]||!_0x56ef3e[_0x3a9a4b[_0x23cb01(0x14f)]][_0x9d581c]))return;const _0x32c177={..._0x1968e3};_0x32c177[_0x23cb01(0x14d)]=_0xbf58c9;const _0x5884ca=_0x32c177;_0x12104e[_0x5ccdcf]=_0x9d581c?helper['mergeDeep'](_0x56ef3e[_0x3a9a4b[_0x23cb01(0x14f)]][_0x9d581c],_0x5884ca):_0x5884ca,_0x41a10f[_0x23cb01(0x144)](_0x5ccdcf);});});!_0x2162d0[_0xa37ff0(0x11f)]&&(_0x2162d0[_0xa37ff0(0x11f)]={});_0x2162d0[_0xa37ff0(0x11f)]={..._0x2162d0[_0xa37ff0(0x11f)],..._0x12104e};const _0x153d78=path['join'](__dirname,_0x5888c6['ovYFR']);fs[_0xa37ff0(0x157)](_0x153d78,JSON['stringify'](_0x2162d0)),_0x5888c6[_0xa37ff0(0x13b)](removeExistingEnvs,_0x563114);const _0x1d5b12=_0x5888c6['vtHTt'](spawn,/^win/[_0xa37ff0(0x163)](process[_0xa37ff0(0x160)])?_0x5888c6['DNzqf']:_0x5888c6['cQBRq'],[_0x5888c6[_0xa37ff0(0x159)],_0x153d78,..._0x563114[_0xa37ff0(0x158)](0x1),_0x5888c6['lQcld'],_0x41a10f[_0xa37ff0(0x131)](',')],{'stdio':_0x5888c6[_0xa37ff0(0x152)]});_0x1d5b12['on'](_0x5888c6[_0xa37ff0(0x14b)],async _0x2617a5=>{const _0x349161=_0xa37ff0;logger[_0x349161(0x13f)](_0x349161(0x123)+_0x2617a5),logger[_0x349161(0x140)]('Deleting\x20'+_0x153d78),fs['unlinkSync'](_0x153d78);});}module['exports']=run;