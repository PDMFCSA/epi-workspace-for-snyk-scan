#!/usr/bin/env node
'use strict';function a33_0x45dc(){const _0x28417a=['KySXp','../../helpers/BrowserStackSetup','platforms','--config','../../helpers/logger','5007975ljNnCX','modifyBrowserStackW3CCaps','unlinkSync','mergeDeep','start_process','ncpws','isUndefined','info','filter','UsgVm','close','EUiNc','writeFileSync','coQWb','existsSync','lKyxh','desiredCapabilities','useW3C','Getting\x20your\x20nightwatch\x20configs\x20from\x20','platform','env','Deleting\x20','cwd','aengI','child\x20process\x20exited\x20with\x20code\x20','exports','debug','../../helpers/helper','nightwatch.cmd','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','splice','jLgvd','nightwatch','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','jhJsj','trim','624sSvBpN','280666CtSYMH','bouuK','length','lkGaF','2125304SsvEgX','579168KQZlZB','nightwatch.json','port','2292BOLCXN','1381285zBlsrK','forEach','--env','selenium','split','join','hub.browserstack.com','RKvEd','xzXVN','test','getPlatformName','cRgLJ','../utils/constants','5308173zBXsCH','rXoMy','config','push','modifyBrowserStackCaps','findIndex','8qErzBE','NBuDA','test_settings'];a33_0x45dc=function(){return _0x28417a;};return a33_0x45dc();}const a33_0x1857a6=a33_0x19b1;(function(_0x1c0a22,_0x1286ce){const _0x4d25e0=a33_0x19b1,_0x24e020=_0x1c0a22();while(!![]){try{const _0x161d70=-parseInt(_0x4d25e0(0x165))/0x1+parseInt(_0x4d25e0(0x164))/0x2*(parseInt(_0x4d25e0(0x16d))/0x3)+-parseInt(_0x4d25e0(0x169))/0x4+-parseInt(_0x4d25e0(0x16e))/0x5+-parseInt(_0x4d25e0(0x16a))/0x6+parseInt(_0x4d25e0(0x140))/0x7+-parseInt(_0x4d25e0(0x181))/0x8*(-parseInt(_0x4d25e0(0x17b))/0x9);if(_0x161d70===_0x1286ce)break;else _0x24e020['push'](_0x24e020['shift']());}catch(_0x24db79){_0x24e020['push'](_0x24e020['shift']());}}}(a33_0x45dc,0x5799d));function a33_0x19b1(_0x8f6763,_0xd92803){const _0x45dc01=a33_0x45dc();return a33_0x19b1=function(_0x19b148,_0x1ab231){_0x19b148=_0x19b148-0x13e;let _0x260dda=_0x45dc01[_0x19b148];return _0x260dda;},a33_0x19b1(_0x8f6763,_0xd92803);}const fs=require('fs'),path=require('path'),{spawn}=require('child_process'),logger=require(a33_0x1857a6(0x13f))['winstonLogger'],{default:BrowserStackSetup}=require(a33_0x1857a6(0x185)),helper=require(a33_0x1857a6(0x15b)),constants=require(a33_0x1857a6(0x17a)),getUserNightwatchConfigs=(_0x4d048c,_0x3f4818)=>{const _0x1de8ed=a33_0x1857a6,_0x45d964={'dsuia':'nightwatch.conf.js','aengI':_0x1de8ed(0x16b),'NBuDA':function(_0x59ad46,_0x3f5beb){return _0x59ad46(_0x3f5beb);},'UsgVm':_0x1de8ed(0x15d)};let _0x5cbf5e=null,_0x20001d={};const _0x1e55c9=_0x3f4818[_0x1de8ed(0x180)](_0xce9aa8=>_0xce9aa8===_0x1de8ed(0x13e));if(!helper[_0x1de8ed(0x146)](_0x4d048c[_0x1de8ed(0x17d)])&&fs[_0x1de8ed(0x14e)](path[_0x1de8ed(0x173)](process[_0x1de8ed(0x156)](),_0x4d048c[_0x1de8ed(0x17d)])))_0x5cbf5e=path[_0x1de8ed(0x173)](process[_0x1de8ed(0x156)](),_0x4d048c['config']),_0x3f4818[_0x1de8ed(0x15e)](_0x1e55c9,0x2);else{if(fs['existsSync'](path['join'](process[_0x1de8ed(0x156)](),_0x45d964['dsuia'])))_0x5cbf5e=path['join'](process[_0x1de8ed(0x156)](),_0x45d964['dsuia']);else fs[_0x1de8ed(0x14e)](path['join'](process[_0x1de8ed(0x156)](),_0x45d964[_0x1de8ed(0x157)]))&&(_0x5cbf5e=path[_0x1de8ed(0x173)](process[_0x1de8ed(0x156)](),_0x45d964[_0x1de8ed(0x157)]));}return _0x5cbf5e?(logger[_0x1de8ed(0x147)](_0x1de8ed(0x152)+_0x5cbf5e),_0x20001d=_0x45d964[_0x1de8ed(0x182)](require,_0x5cbf5e)):logger[_0x1de8ed(0x147)](_0x45d964[_0x1de8ed(0x149)]),_0x20001d;},removeExistingEnvs=_0x2a60f8=>{const _0x31e62b=a33_0x1857a6,_0x4b0d49={};_0x4b0d49['bouuK']=function(_0x5d5ca4,_0x502491){return _0x5d5ca4>_0x502491;},_0x4b0d49[_0x31e62b(0x175)]=function(_0x1f5d70,_0x50e16e){return _0x1f5d70>_0x50e16e;};const _0x21cd82=_0x4b0d49;let _0x46a3d7=_0x2a60f8[_0x31e62b(0x180)](_0x3f2f6e=>_0x3f2f6e==='--env');_0x21cd82[_0x31e62b(0x166)](_0x46a3d7,-0x1)&&_0x2a60f8[_0x31e62b(0x15e)](_0x46a3d7,0x2),_0x46a3d7=_0x2a60f8[_0x31e62b(0x180)](_0x15b077=>_0x15b077==='-e'),_0x21cd82[_0x31e62b(0x175)](_0x46a3d7,-0x1)&&_0x2a60f8[_0x31e62b(0x15e)](_0x46a3d7,0x2);};function run(_0x1ba165,_0x4e0227){const _0x4bd394=a33_0x1857a6,_0x5f05e0={'lKyxh':_0x4bd394(0x160),'cRgLJ':function(_0x7ae312,_0x170ffc){return _0x7ae312+_0x170ffc;},'KySXp':_0x4bd394(0x183),'vCzGy':function(_0x876313,_0x462b9a,_0x45a611){return _0x876313(_0x462b9a,_0x45a611);},'jLgvd':_0x4bd394(0x174),'coQWb':_0x4bd394(0x161),'lkGaF':function(_0x2c087a,_0x320868){return _0x2c087a===_0x320868;},'xzXVN':'nightwatch-browserstack.json','jhJsj':function(_0x39fc23,_0x47a599){return _0x39fc23(_0x47a599);},'ErTjs':function(_0x587a6e,_0x5c0fbc,_0x3364a0,_0x265bff){return _0x587a6e(_0x5c0fbc,_0x3364a0,_0x265bff);},'ncpws':_0x4bd394(0x15c),'qfcQn':_0x4bd394(0x13e),'EUiNc':_0x4bd394(0x170),'rXoMy':'inherit','lGfdc':_0x4bd394(0x14a)},_0x18c2c0=new BrowserStackSetup(_0x1ba165);if(!_0x18c2c0[_0x4bd394(0x17d)])return;const _0x56d555=_0x5f05e0['vCzGy'](getUserNightwatchConfigs,_0x1ba165,_0x4e0227),_0x219147={};_0x219147[_0x4bd394(0x144)]=![];const _0x402df6={};_0x402df6['host']=_0x5f05e0[_0x4bd394(0x15f)],_0x402df6[_0x4bd394(0x16c)]=0x1bb;const _0x2a4581={};_0x2a4581['webdriver']=_0x219147,_0x2a4581[_0x4bd394(0x171)]=_0x402df6;const _0x25ea93=_0x2a4581;logger[_0x4bd394(0x147)](_0x5f05e0[_0x4bd394(0x14d)]);const _0x2e2663={..._0x56d555},_0x19ca40=_0x2e2663,_0x28c024=helper[_0x4bd394(0x151)](_0x18c2c0[_0x4bd394(0x17d)]),_0x2b2464=[];_0x18c2c0[_0x4bd394(0x17d)][_0x4bd394(0x186)][_0x4bd394(0x16f)]((_0x1fb3d7,_0x243ef2)=>{const _0x1ec314=_0x4bd394;_0x28c024?_0x2b2464[_0x1ec314(0x17e)](helper[_0x1ec314(0x141)](_0x18c2c0['config'],_0x5f05e0[_0x1ec314(0x14f)],_0x243ef2)):_0x2b2464[_0x1ec314(0x17e)](helper[_0x1ec314(0x17f)](_0x18c2c0[_0x1ec314(0x17d)],_0x5f05e0[_0x1ec314(0x14f)],_0x243ef2));});const _0xdd6a6e={},_0x4bd9bb=[];_0x1ba165[_0x4bd394(0x154)]=_0x1ba165[_0x4bd394(0x154)]||_0x1ba165['e'];const _0x1fc404=_0x1ba165[_0x4bd394(0x154)]?_0x1ba165[_0x4bd394(0x154)][_0x4bd394(0x163)]()[_0x4bd394(0x172)](',')['map'](_0x1e3792=>_0x1e3792[_0x4bd394(0x163)]())[_0x4bd394(0x148)](_0x4439c6=>_0x4439c6!==''):[''];_0x5f05e0[_0x4bd394(0x168)](_0x1fc404[_0x4bd394(0x167)],0x0)&&_0x1fc404[_0x4bd394(0x17e)]('');_0x1fc404['forEach'](_0x23922a=>{const _0x1718da=_0x4bd394;_0x2b2464[_0x1718da(0x16f)](_0x3b65a9=>{const _0x3f8a3f=_0x1718da;let _0x12b02d=_0x5f05e0[_0x3f8a3f(0x179)](helper[_0x3f8a3f(0x178)](_0x3b65a9,'_'),'_'+Date['now']());_0x23922a&&(_0x12b02d+='_'+_0x23922a);if(_0x23922a&&(!_0x56d555[_0x5f05e0[_0x3f8a3f(0x184)]]||!_0x56d555[_0x5f05e0['KySXp']][_0x23922a]))return;const _0x3683cf={..._0x25ea93};_0x3683cf[_0x3f8a3f(0x150)]=_0x3b65a9;const _0x243d33=_0x3683cf;_0xdd6a6e[_0x12b02d]=_0x23922a?helper[_0x3f8a3f(0x143)](_0x56d555[_0x5f05e0[_0x3f8a3f(0x184)]][_0x23922a],_0x243d33):_0x243d33,_0x4bd9bb[_0x3f8a3f(0x17e)](_0x12b02d);});});!_0x19ca40[_0x4bd394(0x183)]&&(_0x19ca40[_0x4bd394(0x183)]={});_0x19ca40['test_settings']={..._0x19ca40[_0x4bd394(0x183)],..._0xdd6a6e};const _0x6eb7e4=path[_0x4bd394(0x173)](__dirname,_0x5f05e0[_0x4bd394(0x176)]);fs[_0x4bd394(0x14c)](_0x6eb7e4,JSON['stringify'](_0x19ca40)),_0x5f05e0[_0x4bd394(0x162)](removeExistingEnvs,_0x4e0227);const _0x49d04c=_0x5f05e0['ErTjs'](spawn,/^win/[_0x4bd394(0x177)](process[_0x4bd394(0x153)])?_0x5f05e0[_0x4bd394(0x145)]:_0x5f05e0[_0x4bd394(0x14f)],[_0x5f05e0['qfcQn'],_0x6eb7e4,..._0x4e0227['slice'](0x1),_0x5f05e0[_0x4bd394(0x14b)],_0x4bd9bb[_0x4bd394(0x173)](',')],{'stdio':_0x5f05e0[_0x4bd394(0x17c)]});_0x49d04c['on'](_0x5f05e0['lGfdc'],async _0x3c9f4b=>{const _0x155653=_0x4bd394;logger[_0x155653(0x15a)](_0x155653(0x158)+_0x3c9f4b),logger['info'](_0x155653(0x155)+_0x6eb7e4),fs[_0x155653(0x142)](_0x6eb7e4);});}module[a33_0x1857a6(0x159)]=run;