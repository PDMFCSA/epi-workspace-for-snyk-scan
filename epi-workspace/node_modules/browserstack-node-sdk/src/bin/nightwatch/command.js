#!/usr/bin/env node
'use strict';const a38_0x568b21=a38_0x30dc;(function(_0x2a5db0,_0x5c5df5){const _0x5d039b=a38_0x30dc,_0x32e254=_0x2a5db0();while(!![]){try{const _0x6e47da=parseInt(_0x5d039b(0xfa))/0x1*(-parseInt(_0x5d039b(0x11c))/0x2)+-parseInt(_0x5d039b(0xf3))/0x3+parseInt(_0x5d039b(0x105))/0x4+parseInt(_0x5d039b(0x133))/0x5*(-parseInt(_0x5d039b(0x11d))/0x6)+parseInt(_0x5d039b(0xf5))/0x7*(-parseInt(_0x5d039b(0x115))/0x8)+parseInt(_0x5d039b(0xef))/0x9*(-parseInt(_0x5d039b(0x135))/0xa)+parseInt(_0x5d039b(0x122))/0xb*(parseInt(_0x5d039b(0x139))/0xc);if(_0x6e47da===_0x5c5df5)break;else _0x32e254['push'](_0x32e254['shift']());}catch(_0x11b59f){_0x32e254['push'](_0x32e254['shift']());}}}(a38_0x1ec2,0x7eb09));const fs=require('fs'),path=require(a38_0x568b21(0xf6)),{spawn}=require(a38_0x568b21(0x12e)),logger=require(a38_0x568b21(0x111))[a38_0x568b21(0xf4)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a38_0x568b21(0x10b)),constants=require(a38_0x568b21(0x12f)),getUserNightwatchConfigs=(_0x42aa22,_0x1791a3)=>{const _0x42e856=a38_0x568b21,_0x3b37ec={'NYOWb':'nightwatch.conf.js','wokIb':_0x42e856(0x11f),'AzxCa':function(_0x4e1332,_0x24b05e){return _0x4e1332(_0x24b05e);},'sByDA':_0x42e856(0x104)};let _0x58ddd3=null,_0x371900={};const _0xd180f0=_0x1791a3[_0x42e856(0x12d)](_0x3d57b7=>_0x3d57b7===_0x42e856(0x101));if(!helper[_0x42e856(0x131)](_0x42aa22[_0x42e856(0xec)])&&fs[_0x42e856(0x108)](path[_0x42e856(0x103)](process[_0x42e856(0xfd)](),_0x42aa22[_0x42e856(0xec)])))_0x58ddd3=path[_0x42e856(0x103)](process[_0x42e856(0xfd)](),_0x42aa22[_0x42e856(0xec)]),_0x1791a3[_0x42e856(0x114)](_0xd180f0,0x2);else{if(fs[_0x42e856(0x108)](path[_0x42e856(0x103)](process['cwd'](),_0x3b37ec[_0x42e856(0x12b)])))_0x58ddd3=path['join'](process[_0x42e856(0xfd)](),_0x3b37ec['NYOWb']);else fs[_0x42e856(0x108)](path['join'](process[_0x42e856(0xfd)](),_0x3b37ec[_0x42e856(0x113)]))&&(_0x58ddd3=path[_0x42e856(0x103)](process[_0x42e856(0xfd)](),_0x3b37ec[_0x42e856(0x113)]));}return _0x58ddd3?(logger['info'](_0x42e856(0x107)+_0x58ddd3),_0x371900=_0x3b37ec[_0x42e856(0xed)](require,_0x58ddd3)):logger[_0x42e856(0x132)](_0x3b37ec[_0x42e856(0xf7)]),_0x371900;},removeExistingEnvs=_0x5e78e6=>{const _0x131b69=a38_0x568b21,_0x5e6486={};_0x5e6486[_0x131b69(0x106)]=function(_0x37f5e5,_0x1c8964){return _0x37f5e5>_0x1c8964;},_0x5e6486['QtrYN']=function(_0xe23368,_0x20e3aa){return _0xe23368>_0x20e3aa;};const _0x1bfbc9=_0x5e6486;let _0x19c204=_0x5e78e6[_0x131b69(0x12d)](_0x122e51=>_0x122e51===_0x131b69(0x137));_0x1bfbc9[_0x131b69(0x106)](_0x19c204,-0x1)&&_0x5e78e6['splice'](_0x19c204,0x2),_0x19c204=_0x5e78e6[_0x131b69(0x12d)](_0x5c7e09=>_0x5c7e09==='-e'),_0x1bfbc9[_0x131b69(0x138)](_0x19c204,-0x1)&&_0x5e78e6['splice'](_0x19c204,0x2);};function run(_0x3a8f4c,_0x4a3cd4,_0x214e88){const _0x454d43=a38_0x568b21,_0x444a90={'TGDFb':_0x454d43(0xfb),'utbtf':function(_0x42956c,_0x1169e2){return _0x42956c+_0x1169e2;},'oMYWg':_0x454d43(0x136),'saIvm':function(_0x27060e,_0x45a7b2,_0x4ba0f2){return _0x27060e(_0x45a7b2,_0x4ba0f2);},'jfDki':_0x454d43(0x123),'LqFMi':'Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','KiRuk':function(_0x183906,_0x3368bb){return _0x183906===_0x3368bb;},'Ujxvt':'nightwatch-browserstack.json','lRNEo':function(_0x3588a2,_0x1450c2){return _0x3588a2(_0x1450c2);},'tJqdV':function(_0x17e6f2,_0x1abbc9,_0x4cec77,_0xc12ba){return _0x17e6f2(_0x1abbc9,_0x4cec77,_0xc12ba);},'IUMnl':_0x454d43(0x100),'raETS':_0x454d43(0x101),'aOrEk':'--env','fbxkB':_0x454d43(0x116),'DVont':'close'};if(!_0x214e88[_0x454d43(0xec)])return;const _0x236429=_0x444a90[_0x454d43(0x10e)](getUserNightwatchConfigs,_0x3a8f4c,_0x4a3cd4),_0x21af93={};_0x21af93['start_process']=![];const _0x1373e0={};_0x1373e0[_0x454d43(0x125)]=_0x444a90[_0x454d43(0x118)],_0x1373e0['port']=0x1bb;const _0x43cb58={};_0x43cb58[_0x454d43(0x10c)]=_0x21af93,_0x43cb58[_0x454d43(0x10a)]=_0x1373e0;const _0x274faa=_0x43cb58;logger[_0x454d43(0x132)](_0x444a90[_0x454d43(0x11e)]);const _0xfefe9e={..._0x236429},_0x4cb74e=_0xfefe9e,_0x511118=helper[_0x454d43(0x12a)](_0x214e88[_0x454d43(0xec)]),_0x39e0b4=[];_0x214e88[_0x454d43(0xec)][_0x454d43(0xfc)][_0x454d43(0x109)]((_0x14e669,_0x208606)=>{const _0x15b0a7=_0x454d43;_0x511118?_0x39e0b4[_0x15b0a7(0x134)](helper[_0x15b0a7(0x121)](_0x214e88[_0x15b0a7(0xec)],_0x444a90[_0x15b0a7(0xf0)],_0x208606)):_0x39e0b4[_0x15b0a7(0x134)](helper['modifyBrowserStackCaps'](_0x214e88['config'],_0x444a90[_0x15b0a7(0xf0)],_0x208606));});const _0x25055c={},_0x5403e2=[];_0x3a8f4c[_0x454d43(0x10d)]=_0x3a8f4c['env']||_0x3a8f4c['e'];const _0x567fe8=_0x3a8f4c[_0x454d43(0x10d)]?_0x3a8f4c['env'][_0x454d43(0xea)]()[_0x454d43(0x119)](',')[_0x454d43(0x126)](_0x2d959a=>_0x2d959a[_0x454d43(0xea)]())[_0x454d43(0x110)](_0x3ca6b6=>_0x3ca6b6!==''):[''];_0x444a90[_0x454d43(0x10f)](_0x567fe8['length'],0x0)&&_0x567fe8[_0x454d43(0x134)]('');_0x567fe8['forEach'](_0x1cdddf=>{const _0x2f9c53=_0x454d43;_0x39e0b4[_0x2f9c53(0x109)](_0x1ef8e8=>{const _0x5d0270=_0x2f9c53;let _0x536d0c=_0x444a90[_0x5d0270(0xeb)](helper[_0x5d0270(0xf8)](_0x1ef8e8,'_'),'_'+Date[_0x5d0270(0x112)]());_0x1cdddf&&(_0x536d0c+='_'+_0x1cdddf);if(_0x1cdddf&&(!_0x236429[_0x444a90[_0x5d0270(0x129)]]||!_0x236429[_0x444a90[_0x5d0270(0x129)]][_0x1cdddf]))return;const _0x2873cb={..._0x274faa};_0x2873cb[_0x5d0270(0x117)]=_0x1ef8e8;const _0x5280d4=_0x2873cb;_0x25055c[_0x536d0c]=_0x1cdddf?helper[_0x5d0270(0x11b)](_0x236429[_0x444a90['oMYWg']][_0x1cdddf],_0x5280d4):_0x5280d4,_0x5403e2[_0x5d0270(0x134)](_0x536d0c);});});!_0x4cb74e[_0x454d43(0x136)]&&(_0x4cb74e['test_settings']={});_0x4cb74e[_0x454d43(0x136)]={..._0x4cb74e[_0x454d43(0x136)],..._0x25055c};const _0x28f0b8=path[_0x454d43(0x103)](__dirname,_0x444a90[_0x454d43(0xf1)]);fs['writeFileSync'](_0x28f0b8,JSON[_0x454d43(0xee)](_0x4cb74e)),_0x444a90[_0x454d43(0xfe)](removeExistingEnvs,_0x4a3cd4);const _0x48f508=_0x444a90[_0x454d43(0x130)](spawn,/^win/[_0x454d43(0xff)](process[_0x454d43(0xf2)])?_0x444a90[_0x454d43(0x12c)]:_0x444a90[_0x454d43(0xf0)],[_0x444a90['raETS'],_0x28f0b8,..._0x4a3cd4['slice'](0x1),_0x444a90['aOrEk'],_0x5403e2['join'](',')],{'stdio':_0x444a90[_0x454d43(0x120)]});_0x48f508['on'](_0x444a90[_0x454d43(0x128)],async _0x138ffc=>{const _0x3ceb6e=_0x454d43;logger[_0x3ceb6e(0x102)](_0x3ceb6e(0x127)+_0x138ffc),logger[_0x3ceb6e(0x132)](_0x3ceb6e(0x124)+_0x28f0b8),fs[_0x3ceb6e(0x11a)](_0x28f0b8);});}function a38_0x1ec2(){const _0x1f015e=['test_settings','--env','QtrYN','1164FmfOqo','trim','utbtf','config','AzxCa','stringify','972XzGhKD','TGDFb','Ujxvt','platform','472188TtKsOT','winstonLogger','7gIsCym','path','sByDA','getPlatformName','exports','5TwuydG','nightwatch','platforms','cwd','lRNEo','test','nightwatch.cmd','--config','debug','join','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','3818344HLrEqY','nRZAk','Getting\x20your\x20nightwatch\x20configs\x20from\x20','existsSync','forEach','selenium','../../helpers/helper','webdriver','env','saIvm','KiRuk','filter','../../helpers/logger','now','wokIb','splice','2605792JAWBiZ','inherit','desiredCapabilities','jfDki','split','unlinkSync','mergeDeep','246650XhWwCn','241134ZAILhc','LqFMi','nightwatch.json','fbxkB','modifyBrowserStackW3CCaps','171589bfZiuT','hub.browserstack.com','Deleting\x20','host','map','child\x20process\x20exited\x20with\x20code\x20','DVont','oMYWg','useW3C','NYOWb','IUMnl','findIndex','child_process','../utils/constants','tJqdV','isUndefined','info','55yUxzFF','push','37680PUsFBE'];a38_0x1ec2=function(){return _0x1f015e;};return a38_0x1ec2();}function a38_0x30dc(_0x2b01c7,_0x31b0f1){const _0x1ec20d=a38_0x1ec2();return a38_0x30dc=function(_0x30dc14,_0x4f59ae){_0x30dc14=_0x30dc14-0xea;let _0x5595d8=_0x1ec20d[_0x30dc14];return _0x5595d8;},a38_0x30dc(_0x2b01c7,_0x31b0f1);}module[a38_0x568b21(0xf9)]=run;