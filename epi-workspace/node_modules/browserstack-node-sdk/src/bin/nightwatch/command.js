#!/usr/bin/env node
'use strict';const a33_0x57306f=a33_0x46fd;(function(_0x557f87,_0x4a3de3){const _0x51acd8=a33_0x46fd,_0x41c6c1=_0x557f87();while(!![]){try{const _0x1711b4=parseInt(_0x51acd8(0x1c8))/0x1+-parseInt(_0x51acd8(0x1db))/0x2*(-parseInt(_0x51acd8(0x1ea))/0x3)+-parseInt(_0x51acd8(0x204))/0x4*(parseInt(_0x51acd8(0x206))/0x5)+-parseInt(_0x51acd8(0x1d3))/0x6+parseInt(_0x51acd8(0x201))/0x7+-parseInt(_0x51acd8(0x1fa))/0x8*(-parseInt(_0x51acd8(0x202))/0x9)+-parseInt(_0x51acd8(0x1d8))/0xa;if(_0x1711b4===_0x4a3de3)break;else _0x41c6c1['push'](_0x41c6c1['shift']());}catch(_0xd1ed24){_0x41c6c1['push'](_0x41c6c1['shift']());}}}(a33_0x542b,0xc075b));const fs=require('fs'),path=require(a33_0x57306f(0x1d6)),{spawn}=require(a33_0x57306f(0x207)),logger=require('../../helpers/logger')[a33_0x57306f(0x1f5)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a33_0x57306f(0x1e2)),constants=require(a33_0x57306f(0x1f0)),getUserNightwatchConfigs=(_0x2be7a6,_0x3daac8)=>{const _0xed5f7a=a33_0x57306f,_0x3c868f={'pCcLt':_0xed5f7a(0x1fb),'QwvEe':_0xed5f7a(0x205),'fWdbX':function(_0x4b1729,_0x384a77){return _0x4b1729(_0x384a77);},'DsVoW':'Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file'};let _0x832c9a=null,_0x2830b7={};const _0x5de667=_0x3daac8[_0xed5f7a(0x1f8)](_0x1b9148=>_0x1b9148===_0xed5f7a(0x1cf));if(!helper['isUndefined'](_0x2be7a6[_0xed5f7a(0x200)])&&fs['existsSync'](path[_0xed5f7a(0x1dc)](process['cwd'](),_0x2be7a6[_0xed5f7a(0x200)])))_0x832c9a=path[_0xed5f7a(0x1dc)](process['cwd'](),_0x2be7a6[_0xed5f7a(0x200)]),_0x3daac8['splice'](_0x5de667,0x2);else{if(fs[_0xed5f7a(0x209)](path[_0xed5f7a(0x1dc)](process[_0xed5f7a(0x1e0)](),_0x3c868f['pCcLt'])))_0x832c9a=path[_0xed5f7a(0x1dc)](process['cwd'](),_0x3c868f[_0xed5f7a(0x203)]);else fs[_0xed5f7a(0x209)](path[_0xed5f7a(0x1dc)](process[_0xed5f7a(0x1e0)](),_0x3c868f[_0xed5f7a(0x1e6)]))&&(_0x832c9a=path['join'](process[_0xed5f7a(0x1e0)](),_0x3c868f[_0xed5f7a(0x1e6)]));}return _0x832c9a?(logger[_0xed5f7a(0x1f2)]('Getting\x20your\x20nightwatch\x20configs\x20from\x20'+_0x832c9a),_0x2830b7=_0x3c868f[_0xed5f7a(0x1f1)](require,_0x832c9a)):logger['info'](_0x3c868f['DsVoW']),_0x2830b7;},removeExistingEnvs=_0x35af70=>{const _0x2a35cb=a33_0x57306f,_0x33e45a={};_0x33e45a[_0x2a35cb(0x1c9)]=function(_0x595484,_0x5096d6){return _0x595484>_0x5096d6;},_0x33e45a[_0x2a35cb(0x1d9)]=function(_0xfc8b5a,_0x28d6e7){return _0xfc8b5a>_0x28d6e7;};const _0x396632=_0x33e45a;let _0x627f26=_0x35af70['findIndex'](_0x27dc53=>_0x27dc53===_0x2a35cb(0x1cc));_0x396632[_0x2a35cb(0x1c9)](_0x627f26,-0x1)&&_0x35af70[_0x2a35cb(0x1f6)](_0x627f26,0x2),_0x627f26=_0x35af70[_0x2a35cb(0x1f8)](_0x34ae91=>_0x34ae91==='-e'),_0x396632['vbypr'](_0x627f26,-0x1)&&_0x35af70['splice'](_0x627f26,0x2);};function run(_0x4fddf5,_0x33ef92){const _0x569016=a33_0x57306f,_0x7be4a1={'wRzPC':_0x569016(0x1eb),'fyWyU':function(_0x5ec36a,_0x28554e){return _0x5ec36a+_0x28554e;},'GpMam':'test_settings','LsvcH':function(_0x4ef2e5,_0x36c502,_0x5a192a){return _0x4ef2e5(_0x36c502,_0x5a192a);},'PPwwG':_0x569016(0x1f3),'CMKXw':_0x569016(0x1f9),'RGVPk':function(_0xc36625,_0x589602){return _0xc36625===_0x589602;},'OrviA':_0x569016(0x1e7),'VVfRa':function(_0x9c5173,_0x23906c){return _0x9c5173(_0x23906c);},'FlQDK':function(_0x2a0373,_0x59bb45,_0x24b6de,_0x149bb0){return _0x2a0373(_0x59bb45,_0x24b6de,_0x149bb0);},'mncUI':_0x569016(0x1dd),'oHdVB':_0x569016(0x1cf),'dgUAG':_0x569016(0x1cc),'CSiAz':'inherit','YULsn':_0x569016(0x1e4)},_0x6ee85f=new BrowserStackSetup(_0x4fddf5);if(!_0x6ee85f[_0x569016(0x200)])return;const _0x3ba3e5=_0x7be4a1[_0x569016(0x1ee)](getUserNightwatchConfigs,_0x4fddf5,_0x33ef92),_0x234fb9={};_0x234fb9[_0x569016(0x1cd)]=![];const _0x3c1d46={};_0x3c1d46['host']=_0x7be4a1[_0x569016(0x1df)],_0x3c1d46[_0x569016(0x1fe)]=0x1bb;const _0x46123b={};_0x46123b[_0x569016(0x20a)]=_0x234fb9,_0x46123b['selenium']=_0x3c1d46;const _0x17092f=_0x46123b;logger[_0x569016(0x1f2)](_0x7be4a1[_0x569016(0x208)]);const _0x161feb={..._0x3ba3e5},_0x82301a=_0x161feb,_0x7babd8=helper[_0x569016(0x1fc)](_0x6ee85f[_0x569016(0x200)]),_0x344ef5=[];_0x6ee85f[_0x569016(0x200)][_0x569016(0x1e5)][_0x569016(0x1d5)]((_0x56bcad,_0x34641a)=>{const _0x1720cd=_0x569016;_0x7babd8?_0x344ef5[_0x1720cd(0x1f4)](helper['modifyBrowserStackW3CCaps'](_0x6ee85f['config'],_0x7be4a1['wRzPC'],_0x34641a)):_0x344ef5[_0x1720cd(0x1f4)](helper[_0x1720cd(0x1fd)](_0x6ee85f[_0x1720cd(0x200)],_0x7be4a1[_0x1720cd(0x1da)],_0x34641a));});const _0x4bcc7f={},_0x38e6b9=[];_0x4fddf5['env']=_0x4fddf5[_0x569016(0x1e1)]||_0x4fddf5['e'];const _0x3ae1ee=_0x4fddf5[_0x569016(0x1e1)]?_0x4fddf5[_0x569016(0x1e1)][_0x569016(0x1f7)]()[_0x569016(0x1de)](',')['map'](_0x5b609e=>_0x5b609e['trim']())['filter'](_0x437dce=>_0x437dce!==''):[''];_0x7be4a1[_0x569016(0x1cb)](_0x3ae1ee['length'],0x0)&&_0x3ae1ee[_0x569016(0x1f4)]('');_0x3ae1ee[_0x569016(0x1d5)](_0x376416=>{const _0x34eb26=_0x569016,_0x5be65c={'CzEhG':function(_0x2731cb,_0x15edde){return _0x7be4a1['fyWyU'](_0x2731cb,_0x15edde);},'QuaGl':_0x7be4a1[_0x34eb26(0x1e9)]};_0x344ef5['forEach'](_0xbb8332=>{const _0x437c5a=_0x34eb26;let _0x543bee=_0x5be65c['CzEhG'](helper[_0x437c5a(0x1d4)](_0xbb8332,'_'),'_'+Date[_0x437c5a(0x1e3)]());_0x376416&&(_0x543bee+='_'+_0x376416);if(_0x376416&&(!_0x3ba3e5[_0x5be65c[_0x437c5a(0x1d1)]]||!_0x3ba3e5[_0x5be65c['QuaGl']][_0x376416]))return;const _0x54a567={..._0x17092f};_0x54a567['desiredCapabilities']=_0xbb8332;const _0xed2c51=_0x54a567;_0x4bcc7f[_0x543bee]=_0x376416?helper[_0x437c5a(0x1ca)](_0x3ba3e5[_0x5be65c[_0x437c5a(0x1d1)]][_0x376416],_0xed2c51):_0xed2c51,_0x38e6b9['push'](_0x543bee);});});!_0x82301a[_0x569016(0x1ed)]&&(_0x82301a['test_settings']={});_0x82301a[_0x569016(0x1ed)]={..._0x82301a[_0x569016(0x1ed)],..._0x4bcc7f};const _0x38b9ae=path[_0x569016(0x1dc)](__dirname,_0x7be4a1[_0x569016(0x1ff)]);fs['writeFileSync'](_0x38b9ae,JSON[_0x569016(0x1d0)](_0x82301a)),_0x7be4a1['VVfRa'](removeExistingEnvs,_0x33ef92);const _0x2e86d6=_0x7be4a1[_0x569016(0x1ec)](spawn,/^win/['test'](process['platform'])?_0x7be4a1['mncUI']:_0x7be4a1[_0x569016(0x1da)],[_0x7be4a1[_0x569016(0x1d2)],_0x38b9ae,..._0x33ef92['slice'](0x1),_0x7be4a1['dgUAG'],_0x38e6b9[_0x569016(0x1dc)](',')],{'stdio':_0x7be4a1['CSiAz']});_0x2e86d6['on'](_0x7be4a1[_0x569016(0x1ce)],async _0x225c41=>{const _0x19fe51=_0x569016;logger['debug'](_0x19fe51(0x1d7)+_0x225c41),logger[_0x19fe51(0x1f2)](_0x19fe51(0x1ef)+_0x38b9ae),fs[_0x19fe51(0x1e8)](_0x38b9ae);});}function a33_0x46fd(_0xf8a65e,_0x5652ec){const _0x542b22=a33_0x542b();return a33_0x46fd=function(_0x46fd87,_0xdf5018){_0x46fd87=_0x46fd87-0x1c8;let _0x11fc5c=_0x542b22[_0x46fd87];return _0x11fc5c;},a33_0x46fd(_0xf8a65e,_0x5652ec);}module['exports']=run;function a33_0x542b(){const _0x11f37b=['nightwatch.cmd','split','PPwwG','cwd','env','../../helpers/helper','now','close','platforms','QwvEe','nightwatch-browserstack.json','unlinkSync','GpMam','18717pFbmTq','nightwatch','FlQDK','test_settings','LsvcH','Deleting\x20','../utils/constants','fWdbX','info','hub.browserstack.com','push','winstonLogger','splice','trim','findIndex','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','2248264bijzuR','nightwatch.conf.js','useW3C','modifyBrowserStackCaps','port','OrviA','config','7471422lcKgHS','18JoHmks','pCcLt','29972Dxvakd','nightwatch.json','580BdJiYO','child_process','CMKXw','existsSync','webdriver','127268EDCjhe','ouTPV','mergeDeep','RGVPk','--env','start_process','YULsn','--config','stringify','QuaGl','oHdVB','1003032yXMhxM','getPlatformName','forEach','path','child\x20process\x20exited\x20with\x20code\x20','14979940WBdNGG','vbypr','wRzPC','502nKcVUG','join'];a33_0x542b=function(){return _0x11f37b;};return a33_0x542b();}