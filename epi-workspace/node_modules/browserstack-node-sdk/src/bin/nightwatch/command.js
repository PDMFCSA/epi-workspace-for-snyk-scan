#!/usr/bin/env node
'use strict';const a37_0x3eaa26=a37_0x1ee5;(function(_0x2b4990,_0x5269d0){const _0x818483=a37_0x1ee5,_0x456834=_0x2b4990();while(!![]){try{const _0x6d0b57=-parseInt(_0x818483(0x118))/0x1+parseInt(_0x818483(0xef))/0x2+-parseInt(_0x818483(0x116))/0x3*(parseInt(_0x818483(0x110))/0x4)+-parseInt(_0x818483(0x111))/0x5*(parseInt(_0x818483(0x117))/0x6)+parseInt(_0x818483(0x115))/0x7+parseInt(_0x818483(0xe7))/0x8+parseInt(_0x818483(0x105))/0x9;if(_0x6d0b57===_0x5269d0)break;else _0x456834['push'](_0x456834['shift']());}catch(_0x474377){_0x456834['push'](_0x456834['shift']());}}}(a37_0x3c00,0x43cb3));function a37_0x1ee5(_0xe541aa,_0x47ddc1){const _0x3c00f9=a37_0x3c00();return a37_0x1ee5=function(_0x1ee515,_0x4422f2){_0x1ee515=_0x1ee515-0xe1;let _0x4b3be1=_0x3c00f9[_0x1ee515];return _0x4b3be1;},a37_0x1ee5(_0xe541aa,_0x47ddc1);}const fs=require('fs'),path=require(a37_0x3eaa26(0xf8)),{spawn}=require(a37_0x3eaa26(0xfa)),logger=require(a37_0x3eaa26(0x11b))[a37_0x3eaa26(0xe6)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require('../../helpers/helper'),constants=require(a37_0x3eaa26(0x125)),getUserNightwatchConfigs=(_0x1af122,_0x1b7039)=>{const _0x3a0f8d=a37_0x3eaa26,_0x2302f2={'TCjeq':_0x3a0f8d(0x100),'NAZhd':_0x3a0f8d(0xe2),'HJnkO':function(_0x35bb92,_0xdb16be){return _0x35bb92(_0xdb16be);},'paKPT':_0x3a0f8d(0xf2)};let _0xb32b60=null,_0x39b161={};const _0x4b4f10=_0x1b7039[_0x3a0f8d(0x10a)](_0x26033a=>_0x26033a===_0x3a0f8d(0x11a));if(!helper['isUndefined'](_0x1af122[_0x3a0f8d(0xfb)])&&fs[_0x3a0f8d(0x10f)](path[_0x3a0f8d(0x11d)](process['cwd'](),_0x1af122[_0x3a0f8d(0xfb)])))_0xb32b60=path[_0x3a0f8d(0x11d)](process[_0x3a0f8d(0xea)](),_0x1af122[_0x3a0f8d(0xfb)]),_0x1b7039['splice'](_0x4b4f10,0x2);else{if(fs['existsSync'](path[_0x3a0f8d(0x11d)](process[_0x3a0f8d(0xea)](),_0x2302f2[_0x3a0f8d(0xeb)])))_0xb32b60=path['join'](process[_0x3a0f8d(0xea)](),_0x2302f2[_0x3a0f8d(0xeb)]);else fs[_0x3a0f8d(0x10f)](path[_0x3a0f8d(0x11d)](process['cwd'](),_0x2302f2['NAZhd']))&&(_0xb32b60=path[_0x3a0f8d(0x11d)](process['cwd'](),_0x2302f2[_0x3a0f8d(0xfc)]));}return _0xb32b60?(logger['info'](_0x3a0f8d(0xe8)+_0xb32b60),_0x39b161=_0x2302f2[_0x3a0f8d(0x108)](require,_0xb32b60)):logger[_0x3a0f8d(0x11c)](_0x2302f2[_0x3a0f8d(0x10e)]),_0x39b161;},removeExistingEnvs=_0x3f0af9=>{const _0x2a4ddc=a37_0x3eaa26,_0x26643d={};_0x26643d['iANig']=function(_0x7a6d10,_0x34eb85){return _0x7a6d10>_0x34eb85;},_0x26643d['mGUFs']=function(_0x5ad045,_0x5cb98a){return _0x5ad045>_0x5cb98a;};const _0x346abf=_0x26643d;let _0x3e99db=_0x3f0af9[_0x2a4ddc(0x10a)](_0x49ed97=>_0x49ed97===_0x2a4ddc(0xfe));_0x346abf[_0x2a4ddc(0x113)](_0x3e99db,-0x1)&&_0x3f0af9[_0x2a4ddc(0xe3)](_0x3e99db,0x2),_0x3e99db=_0x3f0af9[_0x2a4ddc(0x10a)](_0x313e95=>_0x313e95==='-e'),_0x346abf['mGUFs'](_0x3e99db,-0x1)&&_0x3f0af9[_0x2a4ddc(0xe3)](_0x3e99db,0x2);};function a37_0x3c00(){const _0x3f86fd=['nightwatch','platforms','HJnkO','mRfxC','findIndex','XCgGm','getPlatformName','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','paKPT','existsSync','33692TLfzQP','722135VvxDqx','platform','iANig','exports','1572060KGYyBo','27Qdlwkg','6fsDHYF','96030SwqNSz','vMyAs','--config','../../helpers/logger','info','join','map','inherit','close','forEach','stringify','host','mergeDeep','../utils/constants','QdXOu','nightwatch.json','splice','vryBh','xZGGs','winstonLogger','551520LtEbVn','Getting\x20your\x20nightwatch\x20configs\x20from\x20','slice','cwd','TCjeq','env','filter','uTDCq','39204QtVDGB','push','UunuQ','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','xmpYC','qhdIL','length','nightwatch-browserstack.json','child\x20process\x20exited\x20with\x20code\x20','path','useW3C','child_process','config','NAZhd','webdriver','--env','Deleting\x20','nightwatch.conf.js','debug','BRmzO','selenium','test_settings','2527425kuWFWC'];a37_0x3c00=function(){return _0x3f86fd;};return a37_0x3c00();}function run(_0x3eb71e,_0xfb5f82,_0xd91580){const _0x459104=a37_0x3eaa26,_0x3d2491={'xZGGs':_0x459104(0x106),'FGHsF':function(_0x35575b,_0x10cf9b){return _0x35575b+_0x10cf9b;},'XCgGm':_0x459104(0x104),'eYYDa':function(_0xaa55d,_0x4fccd3,_0x1653aa){return _0xaa55d(_0x4fccd3,_0x1653aa);},'qhdIL':'hub.browserstack.com','UunuQ':_0x459104(0x10d),'vryBh':function(_0x4fca26,_0x30499f){return _0x4fca26===_0x30499f;},'vMyAs':_0x459104(0xf6),'QdXOu':function(_0x9f4176,_0x543a2b){return _0x9f4176(_0x543a2b);},'xmpYC':function(_0x528e71,_0x221a7a,_0x6fadfa,_0x11d844){return _0x528e71(_0x221a7a,_0x6fadfa,_0x11d844);},'BRmzO':'nightwatch.cmd','uTDCq':_0x459104(0x11a),'ZbESG':_0x459104(0xfe),'mRfxC':_0x459104(0x11f),'uWRTW':_0x459104(0x120)};if(!_0xd91580[_0x459104(0xfb)])return;const _0x449b30=_0x3d2491['eYYDa'](getUserNightwatchConfigs,_0x3eb71e,_0xfb5f82),_0x42f46c={};_0x42f46c['start_process']=![];const _0x84f1d2={};_0x84f1d2[_0x459104(0x123)]=_0x3d2491[_0x459104(0xf4)],_0x84f1d2['port']=0x1bb;const _0x59afa3={};_0x59afa3[_0x459104(0xfd)]=_0x42f46c,_0x59afa3[_0x459104(0x103)]=_0x84f1d2;const _0x162468=_0x59afa3;logger[_0x459104(0x11c)](_0x3d2491[_0x459104(0xf1)]);const _0x43aadb={..._0x449b30},_0x58ada3=_0x43aadb,_0x521216=helper[_0x459104(0xf9)](_0xd91580[_0x459104(0xfb)]),_0x4b9ad1=[];_0xd91580[_0x459104(0xfb)][_0x459104(0x107)][_0x459104(0x121)]((_0x2ce363,_0x5b3089)=>{const _0x30bb27=_0x459104;_0x521216?_0x4b9ad1[_0x30bb27(0xf0)](helper['modifyBrowserStackW3CCaps'](_0xd91580['config'],_0x3d2491[_0x30bb27(0xe5)],_0x5b3089)):_0x4b9ad1['push'](helper['modifyBrowserStackCaps'](_0xd91580['config'],_0x3d2491[_0x30bb27(0xe5)],_0x5b3089));});const _0x5199e8={},_0x5a09b6=[];_0x3eb71e['env']=_0x3eb71e['env']||_0x3eb71e['e'];const _0x576a43=_0x3eb71e['env']?_0x3eb71e[_0x459104(0xec)]['trim']()['split'](',')[_0x459104(0x11e)](_0x22e942=>_0x22e942['trim']())[_0x459104(0xed)](_0x59c595=>_0x59c595!==''):[''];_0x3d2491[_0x459104(0xe4)](_0x576a43[_0x459104(0xf5)],0x0)&&_0x576a43['push']('');_0x576a43[_0x459104(0x121)](_0x3d6baf=>{const _0xe1296a=_0x459104;_0x4b9ad1[_0xe1296a(0x121)](_0x1b2df8=>{const _0x4ab17e=_0xe1296a;let _0x127ab2=_0x3d2491['FGHsF'](helper[_0x4ab17e(0x10c)](_0x1b2df8,'_'),'_'+Date['now']());_0x3d6baf&&(_0x127ab2+='_'+_0x3d6baf);if(_0x3d6baf&&(!_0x449b30[_0x3d2491[_0x4ab17e(0x10b)]]||!_0x449b30[_0x3d2491[_0x4ab17e(0x10b)]][_0x3d6baf]))return;const _0x1b6b3a={..._0x162468};_0x1b6b3a['desiredCapabilities']=_0x1b2df8;const _0x4fbf9c=_0x1b6b3a;_0x5199e8[_0x127ab2]=_0x3d6baf?helper[_0x4ab17e(0x124)](_0x449b30[_0x3d2491[_0x4ab17e(0x10b)]][_0x3d6baf],_0x4fbf9c):_0x4fbf9c,_0x5a09b6[_0x4ab17e(0xf0)](_0x127ab2);});});!_0x58ada3[_0x459104(0x104)]&&(_0x58ada3['test_settings']={});_0x58ada3[_0x459104(0x104)]={..._0x58ada3[_0x459104(0x104)],..._0x5199e8};const _0x1fdded=path[_0x459104(0x11d)](__dirname,_0x3d2491[_0x459104(0x119)]);fs['writeFileSync'](_0x1fdded,JSON[_0x459104(0x122)](_0x58ada3)),_0x3d2491[_0x459104(0xe1)](removeExistingEnvs,_0xfb5f82);const _0x1f1768=_0x3d2491[_0x459104(0xf3)](spawn,/^win/['test'](process[_0x459104(0x112)])?_0x3d2491[_0x459104(0x102)]:_0x3d2491[_0x459104(0xe5)],[_0x3d2491[_0x459104(0xee)],_0x1fdded,..._0xfb5f82[_0x459104(0xe9)](0x1),_0x3d2491['ZbESG'],_0x5a09b6['join'](',')],{'stdio':_0x3d2491[_0x459104(0x109)]});_0x1f1768['on'](_0x3d2491['uWRTW'],async _0xc06cb5=>{const _0x18a788=_0x459104;logger[_0x18a788(0x101)](_0x18a788(0xf7)+_0xc06cb5),logger[_0x18a788(0x11c)](_0x18a788(0xff)+_0x1fdded),fs['unlinkSync'](_0x1fdded);});}module[a37_0x3eaa26(0x114)]=run;