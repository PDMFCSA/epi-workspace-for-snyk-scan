#!/usr/bin/env node
'use strict';const a36_0x42d49f=a36_0x5102;(function(_0x3047e7,_0x5eda49){const _0x5e027e=a36_0x5102,_0x10dcf3=_0x3047e7();while(!![]){try{const _0x43ec63=parseInt(_0x5e027e(0x98))/0x1+parseInt(_0x5e027e(0xab))/0x2*(parseInt(_0x5e027e(0x87))/0x3)+parseInt(_0x5e027e(0xa5))/0x4+-parseInt(_0x5e027e(0x9a))/0x5+parseInt(_0x5e027e(0x7b))/0x6+-parseInt(_0x5e027e(0x79))/0x7*(-parseInt(_0x5e027e(0x84))/0x8)+-parseInt(_0x5e027e(0x7f))/0x9*(parseInt(_0x5e027e(0x77))/0xa);if(_0x43ec63===_0x5eda49)break;else _0x10dcf3['push'](_0x10dcf3['shift']());}catch(_0x18b72e){_0x10dcf3['push'](_0x10dcf3['shift']());}}}(a36_0x2da5,0xe5df8));function a36_0x5102(_0xe09fd,_0x440075){const _0x2da57f=a36_0x2da5();return a36_0x5102=function(_0x510202,_0x181cd5){_0x510202=_0x510202-0x77;let _0xb76621=_0x2da57f[_0x510202];return _0xb76621;},a36_0x5102(_0xe09fd,_0x440075);}const fs=require('fs'),path=require(a36_0x42d49f(0x93)),{spawn}=require('child_process'),logger=require('../../helpers/logger')[a36_0x42d49f(0xad)],{default:BrowserStackSetup}=require(a36_0x42d49f(0xa7)),helper=require(a36_0x42d49f(0xac)),constants=require(a36_0x42d49f(0xa3)),getUserNightwatchConfigs=(_0x18f31d,_0x49d911)=>{const _0x321c4d=a36_0x42d49f,_0x5f2dd5={'yLLwi':_0x321c4d(0xb4),'pHvVm':'nightwatch.json','aTldc':function(_0x30ff90,_0x1167f1){return _0x30ff90(_0x1167f1);},'yRlEQ':_0x321c4d(0xa8)};let _0x4e70fa=null,_0x4d4346={};const _0x3d5ebe=_0x49d911[_0x321c4d(0x80)](_0x50fa3f=>_0x50fa3f==='--config');if(!helper[_0x321c4d(0xae)](_0x18f31d[_0x321c4d(0x89)])&&fs[_0x321c4d(0xb9)](path[_0x321c4d(0xb3)](process['cwd'](),_0x18f31d['config'])))_0x4e70fa=path['join'](process[_0x321c4d(0x85)](),_0x18f31d[_0x321c4d(0x89)]),_0x49d911['splice'](_0x3d5ebe,0x2);else{if(fs[_0x321c4d(0xb9)](path[_0x321c4d(0xb3)](process['cwd'](),_0x5f2dd5['yLLwi'])))_0x4e70fa=path[_0x321c4d(0xb3)](process['cwd'](),_0x5f2dd5[_0x321c4d(0x8d)]);else fs['existsSync'](path['join'](process[_0x321c4d(0x85)](),_0x5f2dd5[_0x321c4d(0x78)]))&&(_0x4e70fa=path[_0x321c4d(0xb3)](process[_0x321c4d(0x85)](),_0x5f2dd5[_0x321c4d(0x78)]));}return _0x4e70fa?(logger['info'](_0x321c4d(0xbd)+_0x4e70fa),_0x4d4346=_0x5f2dd5[_0x321c4d(0x81)](require,_0x4e70fa)):logger[_0x321c4d(0x9d)](_0x5f2dd5[_0x321c4d(0xa6)]),_0x4d4346;},removeExistingEnvs=_0x26b750=>{const _0x23f58d=a36_0x42d49f,_0x1ffdd3={};_0x1ffdd3[_0x23f58d(0x8f)]=function(_0xcfe292,_0x40001b){return _0xcfe292>_0x40001b;},_0x1ffdd3[_0x23f58d(0xaa)]=function(_0x29a165,_0x1b9c9e){return _0x29a165>_0x1b9c9e;};const _0xf55cae=_0x1ffdd3;let _0x13ada1=_0x26b750[_0x23f58d(0x80)](_0x116d2e=>_0x116d2e==='--env');_0xf55cae[_0x23f58d(0x8f)](_0x13ada1,-0x1)&&_0x26b750['splice'](_0x13ada1,0x2),_0x13ada1=_0x26b750[_0x23f58d(0x80)](_0x22a4ab=>_0x22a4ab==='-e'),_0xf55cae[_0x23f58d(0xaa)](_0x13ada1,-0x1)&&_0x26b750[_0x23f58d(0x8a)](_0x13ada1,0x2);};function a36_0x2da5(){const _0x54d553=['now','yLLwi','trim','WCvgK','modifyBrowserStackW3CCaps','env','port','path','forEach','desiredCapabilities','VgfjB','start_process','1410877EEliNb','split','5641645FPuQKk','webdriver','filter','info','platform','--config','VTNvC','msMQB','getPlatformName','../utils/constants','test','3311236pkuLGw','yRlEQ','../../helpers/BrowserStackSetup','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','child\x20process\x20exited\x20with\x20code\x20','kTzOL','2158nyHRVm','../../helpers/helper','winstonLogger','isUndefined','selenium','modifyBrowserStackCaps','YqmUh','nightwatch-browserstack.json','join','nightwatch.conf.js','writeFileSync','length','host','push','existsSync','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','jzVPH','mergeDeep','Getting\x20your\x20nightwatch\x20configs\x20from\x20','RJUMN','17476090nTEKXB','pHvVm','279181uCPDZE','close','571842lqpCBN','slice','HibEh','nightwatch','9WCrlUE','findIndex','aTldc','UfbpJ','uSeBA','24iPOCzY','cwd','inherit','3792DVISNd','platforms','config','splice','test_settings'];a36_0x2da5=function(){return _0x54d553;};return a36_0x2da5();}function run(_0x5cd92a,_0x47e6f7,_0x37b986){const _0x436dee=a36_0x42d49f,_0x276d35={'UfbpJ':_0x436dee(0x7e),'FzeNb':function(_0x20a498,_0x51748a){return _0x20a498+_0x51748a;},'uSeBA':_0x436dee(0x8b),'Mielp':function(_0x5cc5f6,_0x4a53ca,_0x93295b){return _0x5cc5f6(_0x4a53ca,_0x93295b);},'VgfjB':'hub.browserstack.com','GsZyy':_0x436dee(0xba),'ZcEBr':function(_0x13ec21,_0x21f2ca){return _0x13ec21===_0x21f2ca;},'QGMjw':_0x436dee(0xb2),'GaIuW':function(_0x222626,_0x291887){return _0x222626(_0x291887);},'ukNNg':function(_0x346752,_0x292969,_0x852662,_0x5a0abe){return _0x346752(_0x292969,_0x852662,_0x5a0abe);},'jzVPH':'nightwatch.cmd','RJUMN':_0x436dee(0x9f),'HibEh':'--env','YqmUh':_0x436dee(0x86),'msMQB':_0x436dee(0x7a)};if(!_0x37b986[_0x436dee(0x89)])return;const _0x496b0d=_0x276d35['Mielp'](getUserNightwatchConfigs,_0x5cd92a,_0x47e6f7),_0x2f84a9={};_0x2f84a9[_0x436dee(0x97)]=![];const _0x58bd4d={};_0x58bd4d[_0x436dee(0xb7)]=_0x276d35[_0x436dee(0x96)],_0x58bd4d[_0x436dee(0x92)]=0x1bb;const _0x1d4899={};_0x1d4899[_0x436dee(0x9b)]=_0x2f84a9,_0x1d4899[_0x436dee(0xaf)]=_0x58bd4d;const _0x8c001c=_0x1d4899;logger[_0x436dee(0x9d)](_0x276d35['GsZyy']);const _0x9d3a14={..._0x496b0d},_0x25f806=_0x9d3a14,_0x1d4771=helper['useW3C'](_0x37b986[_0x436dee(0x89)]),_0x3bb60b=[];_0x37b986[_0x436dee(0x89)][_0x436dee(0x88)][_0x436dee(0x94)]((_0x1454b7,_0x919dba)=>{const _0x565053=_0x436dee;_0x1d4771?_0x3bb60b['push'](helper[_0x565053(0x90)](_0x37b986[_0x565053(0x89)],_0x276d35[_0x565053(0x82)],_0x919dba)):_0x3bb60b[_0x565053(0xb8)](helper[_0x565053(0xb0)](_0x37b986[_0x565053(0x89)],_0x276d35[_0x565053(0x82)],_0x919dba));});const _0x4c59c0={},_0x3a7d29=[];_0x5cd92a['env']=_0x5cd92a[_0x436dee(0x91)]||_0x5cd92a['e'];const _0xcec3e3=_0x5cd92a[_0x436dee(0x91)]?_0x5cd92a[_0x436dee(0x91)][_0x436dee(0x8e)]()[_0x436dee(0x99)](',')['map'](_0x431091=>_0x431091[_0x436dee(0x8e)]())[_0x436dee(0x9c)](_0x3af89f=>_0x3af89f!==''):[''];_0x276d35['ZcEBr'](_0xcec3e3[_0x436dee(0xb6)],0x0)&&_0xcec3e3[_0x436dee(0xb8)]('');_0xcec3e3[_0x436dee(0x94)](_0x2939c5=>{const _0x459b12=_0x436dee,_0x2dd123={'Aorst':function(_0x2d4158,_0x4e859f){return _0x276d35['FzeNb'](_0x2d4158,_0x4e859f);},'VTNvC':_0x276d35[_0x459b12(0x83)]};_0x3bb60b['forEach'](_0x10c5ae=>{const _0xe62cd=_0x459b12;let _0xf77b44=_0x2dd123['Aorst'](helper[_0xe62cd(0xa2)](_0x10c5ae,'_'),'_'+Date[_0xe62cd(0x8c)]());_0x2939c5&&(_0xf77b44+='_'+_0x2939c5);if(_0x2939c5&&(!_0x496b0d[_0x2dd123[_0xe62cd(0xa0)]]||!_0x496b0d[_0x2dd123['VTNvC']][_0x2939c5]))return;const _0x26352f={..._0x8c001c};_0x26352f[_0xe62cd(0x95)]=_0x10c5ae;const _0x8ac154=_0x26352f;_0x4c59c0[_0xf77b44]=_0x2939c5?helper[_0xe62cd(0xbc)](_0x496b0d[_0x2dd123[_0xe62cd(0xa0)]][_0x2939c5],_0x8ac154):_0x8ac154,_0x3a7d29[_0xe62cd(0xb8)](_0xf77b44);});});!_0x25f806[_0x436dee(0x8b)]&&(_0x25f806[_0x436dee(0x8b)]={});_0x25f806[_0x436dee(0x8b)]={..._0x25f806['test_settings'],..._0x4c59c0};const _0x18c3fa=path[_0x436dee(0xb3)](__dirname,_0x276d35['QGMjw']);fs[_0x436dee(0xb5)](_0x18c3fa,JSON['stringify'](_0x25f806)),_0x276d35['GaIuW'](removeExistingEnvs,_0x47e6f7);const _0x426c68=_0x276d35['ukNNg'](spawn,/^win/[_0x436dee(0xa4)](process[_0x436dee(0x9e)])?_0x276d35[_0x436dee(0xbb)]:_0x276d35['UfbpJ'],[_0x276d35[_0x436dee(0xbe)],_0x18c3fa,..._0x47e6f7[_0x436dee(0x7c)](0x1),_0x276d35[_0x436dee(0x7d)],_0x3a7d29[_0x436dee(0xb3)](',')],{'stdio':_0x276d35[_0x436dee(0xb1)]});_0x426c68['on'](_0x276d35[_0x436dee(0xa1)],async _0x2c65f6=>{const _0x553384=_0x436dee;logger['debug'](_0x553384(0xa9)+_0x2c65f6),logger['info']('Deleting\x20'+_0x18c3fa),fs['unlinkSync'](_0x18c3fa);});}module['exports']=run;