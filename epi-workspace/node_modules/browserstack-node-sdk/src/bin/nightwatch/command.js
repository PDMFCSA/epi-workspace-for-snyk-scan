#!/usr/bin/env node
'use strict';const a36_0x235d72=a36_0x5018;(function(_0x54592d,_0x375c7b){const _0x278682=a36_0x5018,_0x4a1bad=_0x54592d();while(!![]){try{const _0x2c4597=parseInt(_0x278682(0x1e2))/0x1*(-parseInt(_0x278682(0x1fa))/0x2)+-parseInt(_0x278682(0x1e9))/0x3+parseInt(_0x278682(0x1ef))/0x4*(-parseInt(_0x278682(0x1e3))/0x5)+parseInt(_0x278682(0x223))/0x6*(-parseInt(_0x278682(0x21c))/0x7)+-parseInt(_0x278682(0x220))/0x8*(parseInt(_0x278682(0x204))/0x9)+parseInt(_0x278682(0x203))/0xa+parseInt(_0x278682(0x21d))/0xb*(parseInt(_0x278682(0x210))/0xc);if(_0x2c4597===_0x375c7b)break;else _0x4a1bad['push'](_0x4a1bad['shift']());}catch(_0x43e9cf){_0x4a1bad['push'](_0x4a1bad['shift']());}}}(a36_0x3d67,0x53325));function a36_0x3d67(){const _0x47b7d8=['TLLSL','useW3C','forEach','mergeDeep','tgpRb','env','nightwatch-browserstack.json','399gGBbJr','154dGlfUp','zozpf','YwTRe','1525464pbycKC','iMTgV','length','38118ZzBHVo','info','close','desiredCapabilities','newbZ','unlinkSync','bwzdq','test_settings','../utils/constants','split','146294zMINXs','50JpMvUB','XumlQ','filter','yyZYZ','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','findIndex','1446333NnCZfT','CyyCV','cwd','stringify','nightwatch.cmd','push','173256FFwLdz','port','--env','child\x20process\x20exited\x20with\x20code\x20','selenium','join','../../helpers/logger','now','slice','rnJqR','HBpKq','4FisGJW','webdriver','debug','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','winstonLogger','child_process','ReqgI','test','modifyBrowserStackW3CCaps','646460BjibpN','27TxkIZB','config','platform','inherit','trim','zrRNs','--config','fquNs','splice','nightwatch.json','Getting\x20your\x20nightwatch\x20configs\x20from\x20','zFLAG','2072688mFlvCr','path','modifyBrowserStackCaps','ngpzp','existsSync'];a36_0x3d67=function(){return _0x47b7d8;};return a36_0x3d67();}const fs=require('fs'),path=require(a36_0x235d72(0x211)),{spawn}=require(a36_0x235d72(0x1ff)),logger=require(a36_0x235d72(0x1f5))[a36_0x235d72(0x1fe)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require('../../helpers/helper'),constants=require(a36_0x235d72(0x1e0)),getUserNightwatchConfigs=(_0x1855c8,_0x42cc88)=>{const _0x3e5424=a36_0x235d72,_0x37b745={'TLLSL':'nightwatch.conf.js','fquNs':_0x3e5424(0x20d),'btIBW':function(_0x519495,_0x4bdf61){return _0x519495(_0x4bdf61);},'XumlQ':_0x3e5424(0x1fd)};let _0x4a35ee=null,_0xd4470c={};const _0x2e3383=_0x42cc88[_0x3e5424(0x1e8)](_0xc60895=>_0xc60895===_0x3e5424(0x20a));if(!helper['isUndefined'](_0x1855c8[_0x3e5424(0x205)])&&fs['existsSync'](path[_0x3e5424(0x1f4)](process[_0x3e5424(0x1eb)](),_0x1855c8[_0x3e5424(0x205)])))_0x4a35ee=path['join'](process[_0x3e5424(0x1eb)](),_0x1855c8[_0x3e5424(0x205)]),_0x42cc88['splice'](_0x2e3383,0x2);else{if(fs[_0x3e5424(0x214)](path[_0x3e5424(0x1f4)](process[_0x3e5424(0x1eb)](),_0x37b745[_0x3e5424(0x215)])))_0x4a35ee=path[_0x3e5424(0x1f4)](process[_0x3e5424(0x1eb)](),_0x37b745[_0x3e5424(0x215)]);else fs['existsSync'](path[_0x3e5424(0x1f4)](process['cwd'](),_0x37b745['fquNs']))&&(_0x4a35ee=path[_0x3e5424(0x1f4)](process[_0x3e5424(0x1eb)](),_0x37b745[_0x3e5424(0x20b)]));}return _0x4a35ee?(logger[_0x3e5424(0x224)](_0x3e5424(0x20e)+_0x4a35ee),_0xd4470c=_0x37b745['btIBW'](require,_0x4a35ee)):logger['info'](_0x37b745[_0x3e5424(0x1e4)]),_0xd4470c;},removeExistingEnvs=_0x4504cc=>{const _0x423fb6=a36_0x235d72,_0x492113={};_0x492113['zozpf']=function(_0x1f64b0,_0x35d282){return _0x1f64b0>_0x35d282;},_0x492113['CyyCV']=function(_0x11b787,_0x44c14a){return _0x11b787>_0x44c14a;};const _0x21f1fd=_0x492113;let _0x4668b3=_0x4504cc['findIndex'](_0x4b252c=>_0x4b252c===_0x423fb6(0x1f1));_0x21f1fd[_0x423fb6(0x21e)](_0x4668b3,-0x1)&&_0x4504cc['splice'](_0x4668b3,0x2),_0x4668b3=_0x4504cc[_0x423fb6(0x1e8)](_0x4084ca=>_0x4084ca==='-e'),_0x21f1fd[_0x423fb6(0x1ea)](_0x4668b3,-0x1)&&_0x4504cc[_0x423fb6(0x20c)](_0x4668b3,0x2);};function a36_0x5018(_0x5084d9,_0x448182){const _0x3d675e=a36_0x3d67();return a36_0x5018=function(_0x50180d,_0x4f6d1e){_0x50180d=_0x50180d-0x1df;let _0x1f994e=_0x3d675e[_0x50180d];return _0x1f994e;},a36_0x5018(_0x5084d9,_0x448182);}function run(_0x53c16b,_0x463ac1,_0x101ce6){const _0x49c611=a36_0x235d72,_0x27f154={'rnJqR':'nightwatch','mDHgJ':function(_0x403936,_0x2f3a2e){return _0x403936+_0x2f3a2e;},'HBpKq':'test_settings','newbZ':function(_0x1cdaf7,_0x189465,_0x589f2b){return _0x1cdaf7(_0x189465,_0x589f2b);},'ngpzp':'hub.browserstack.com','YwTRe':_0x49c611(0x1e7),'ReqgI':function(_0x27aed0,_0x2769b1){return _0x27aed0===_0x2769b1;},'zrRNs':_0x49c611(0x21b),'bwzdq':function(_0x135d0d,_0x1e85b5){return _0x135d0d(_0x1e85b5);},'PPJur':function(_0x41fccc,_0x449cc5,_0x5663eb,_0x1b5670){return _0x41fccc(_0x449cc5,_0x5663eb,_0x1b5670);},'yyZYZ':_0x49c611(0x1ed),'zFLAG':_0x49c611(0x20a),'tgpRb':'--env','iMTgV':_0x49c611(0x207),'ANXvO':_0x49c611(0x225)};if(!_0x101ce6['config'])return;const _0x45927a=_0x27f154[_0x49c611(0x227)](getUserNightwatchConfigs,_0x53c16b,_0x463ac1),_0x4aa705={};_0x4aa705['start_process']=![];const _0x35cc76={};_0x35cc76['host']=_0x27f154[_0x49c611(0x213)],_0x35cc76[_0x49c611(0x1f0)]=0x1bb;const _0x42aaa7={};_0x42aaa7[_0x49c611(0x1fb)]=_0x4aa705,_0x42aaa7[_0x49c611(0x1f3)]=_0x35cc76;const _0x3d6216=_0x42aaa7;logger['info'](_0x27f154[_0x49c611(0x21f)]);const _0x1cba47={..._0x45927a},_0x51b24d=_0x1cba47,_0x428983=helper[_0x49c611(0x216)](_0x101ce6['config']),_0x34261b=[];_0x101ce6[_0x49c611(0x205)]['platforms'][_0x49c611(0x217)]((_0x26b0e3,_0x4aa9c1)=>{const _0x1a39ec=_0x49c611;_0x428983?_0x34261b['push'](helper[_0x1a39ec(0x202)](_0x101ce6[_0x1a39ec(0x205)],_0x27f154[_0x1a39ec(0x1f8)],_0x4aa9c1)):_0x34261b[_0x1a39ec(0x1ee)](helper[_0x1a39ec(0x212)](_0x101ce6['config'],_0x27f154[_0x1a39ec(0x1f8)],_0x4aa9c1));});const _0x2179d3={},_0x30871d=[];_0x53c16b[_0x49c611(0x21a)]=_0x53c16b['env']||_0x53c16b['e'];const _0x244a95=_0x53c16b[_0x49c611(0x21a)]?_0x53c16b[_0x49c611(0x21a)][_0x49c611(0x208)]()[_0x49c611(0x1e1)](',')['map'](_0x40557f=>_0x40557f[_0x49c611(0x208)]())[_0x49c611(0x1e5)](_0x1eaaf8=>_0x1eaaf8!==''):[''];_0x27f154[_0x49c611(0x200)](_0x244a95[_0x49c611(0x222)],0x0)&&_0x244a95['push']('');_0x244a95[_0x49c611(0x217)](_0x46330c=>{_0x34261b['forEach'](_0x460e72=>{const _0x373e3c=a36_0x5018;let _0x446433=_0x27f154['mDHgJ'](helper['getPlatformName'](_0x460e72,'_'),'_'+Date[_0x373e3c(0x1f6)]());_0x46330c&&(_0x446433+='_'+_0x46330c);if(_0x46330c&&(!_0x45927a[_0x27f154[_0x373e3c(0x1f9)]]||!_0x45927a[_0x27f154['HBpKq']][_0x46330c]))return;const _0x17776f={..._0x3d6216};_0x17776f[_0x373e3c(0x226)]=_0x460e72;const _0x2cdc10=_0x17776f;_0x2179d3[_0x446433]=_0x46330c?helper[_0x373e3c(0x218)](_0x45927a[_0x27f154[_0x373e3c(0x1f9)]][_0x46330c],_0x2cdc10):_0x2cdc10,_0x30871d['push'](_0x446433);});});!_0x51b24d[_0x49c611(0x1df)]&&(_0x51b24d['test_settings']={});_0x51b24d[_0x49c611(0x1df)]={..._0x51b24d[_0x49c611(0x1df)],..._0x2179d3};const _0x20fb85=path[_0x49c611(0x1f4)](__dirname,_0x27f154[_0x49c611(0x209)]);fs['writeFileSync'](_0x20fb85,JSON[_0x49c611(0x1ec)](_0x51b24d)),_0x27f154[_0x49c611(0x229)](removeExistingEnvs,_0x463ac1);const _0x5a65fb=_0x27f154['PPJur'](spawn,/^win/[_0x49c611(0x201)](process[_0x49c611(0x206)])?_0x27f154[_0x49c611(0x1e6)]:_0x27f154[_0x49c611(0x1f8)],[_0x27f154[_0x49c611(0x20f)],_0x20fb85,..._0x463ac1[_0x49c611(0x1f7)](0x1),_0x27f154[_0x49c611(0x219)],_0x30871d[_0x49c611(0x1f4)](',')],{'stdio':_0x27f154[_0x49c611(0x221)]});_0x5a65fb['on'](_0x27f154['ANXvO'],async _0x2927ea=>{const _0x6ab7be=_0x49c611;logger[_0x6ab7be(0x1fc)](_0x6ab7be(0x1f2)+_0x2927ea),logger[_0x6ab7be(0x224)]('Deleting\x20'+_0x20fb85),fs[_0x6ab7be(0x228)](_0x20fb85);});}module['exports']=run;