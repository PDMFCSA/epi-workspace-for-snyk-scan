#!/usr/bin/env node
'use strict';const a33_0x4bd795=a33_0x16a8;(function(_0x17a03b,_0x118e74){const _0x51e682=a33_0x16a8,_0x3f5ba6=_0x17a03b();while(!![]){try{const _0x1e49d4=-parseInt(_0x51e682(0xe7))/0x1+parseInt(_0x51e682(0xe8))/0x2+-parseInt(_0x51e682(0x10e))/0x3+-parseInt(_0x51e682(0xe4))/0x4+-parseInt(_0x51e682(0xfa))/0x5+parseInt(_0x51e682(0xe3))/0x6+parseInt(_0x51e682(0x11e))/0x7*(parseInt(_0x51e682(0xe1))/0x8);if(_0x1e49d4===_0x118e74)break;else _0x3f5ba6['push'](_0x3f5ba6['shift']());}catch(_0xf464d0){_0x3f5ba6['push'](_0x3f5ba6['shift']());}}}(a33_0x192d,0x7e910));const fs=require('fs'),path=require(a33_0x4bd795(0xf1)),{spawn}=require('child_process'),logger=require(a33_0x4bd795(0xec))['winstonLogger'],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a33_0x4bd795(0x116)),constants=require(a33_0x4bd795(0xf9)),getUserNightwatchConfigs=(_0x15b9c6,_0x57d54c)=>{const _0x46b57c=a33_0x4bd795,_0x35099c={'RMVmR':'nightwatch.conf.js','kUGGS':'nightwatch.json','WUPLg':function(_0x486c9c,_0x5916cb){return _0x486c9c(_0x5916cb);},'bnIjh':_0x46b57c(0x124)};let _0x2d10c8=null,_0x5630d9={};const _0x5ae6e1=_0x57d54c[_0x46b57c(0x10b)](_0x4bf349=>_0x4bf349===_0x46b57c(0xfb));if(!helper['isUndefined'](_0x15b9c6['config'])&&fs['existsSync'](path[_0x46b57c(0xf0)](process[_0x46b57c(0xea)](),_0x15b9c6[_0x46b57c(0x104)])))_0x2d10c8=path['join'](process[_0x46b57c(0xea)](),_0x15b9c6['config']),_0x57d54c[_0x46b57c(0x107)](_0x5ae6e1,0x2);else{if(fs[_0x46b57c(0x118)](path[_0x46b57c(0xf0)](process[_0x46b57c(0xea)](),_0x35099c[_0x46b57c(0xf2)])))_0x2d10c8=path[_0x46b57c(0xf0)](process[_0x46b57c(0xea)](),_0x35099c['RMVmR']);else fs[_0x46b57c(0x118)](path[_0x46b57c(0xf0)](process[_0x46b57c(0xea)](),_0x35099c[_0x46b57c(0x109)]))&&(_0x2d10c8=path[_0x46b57c(0xf0)](process[_0x46b57c(0xea)](),_0x35099c['kUGGS']));}return _0x2d10c8?(logger[_0x46b57c(0xfd)]('Getting\x20your\x20nightwatch\x20configs\x20from\x20'+_0x2d10c8),_0x5630d9=_0x35099c[_0x46b57c(0xe5)](require,_0x2d10c8)):logger[_0x46b57c(0xfd)](_0x35099c[_0x46b57c(0x106)]),_0x5630d9;},removeExistingEnvs=_0x2b106b=>{const _0x45a26b=a33_0x4bd795,_0x5c1562={};_0x5c1562['ydlIl']=function(_0x227a42,_0x309f94){return _0x227a42>_0x309f94;},_0x5c1562['bxuTV']=function(_0x20cfc3,_0x3f1354){return _0x20cfc3>_0x3f1354;};const _0x2157df=_0x5c1562;let _0x2b1491=_0x2b106b['findIndex'](_0x149361=>_0x149361===_0x45a26b(0xeb));_0x2157df['ydlIl'](_0x2b1491,-0x1)&&_0x2b106b[_0x45a26b(0x107)](_0x2b1491,0x2),_0x2b1491=_0x2b106b[_0x45a26b(0x10b)](_0xd03a45=>_0xd03a45==='-e'),_0x2157df[_0x45a26b(0x127)](_0x2b1491,-0x1)&&_0x2b106b[_0x45a26b(0x107)](_0x2b1491,0x2);};function run(_0x4758f4,_0x4449e5){const _0x3e4a8f=a33_0x4bd795,_0x35545f={'GDAZi':_0x3e4a8f(0x11c),'KhtLx':function(_0x5110f3,_0xef7e1e){return _0x5110f3+_0xef7e1e;},'VLave':'test_settings','TEsbl':function(_0x504827,_0x215a9a,_0x3ccc3a){return _0x504827(_0x215a9a,_0x3ccc3a);},'rqPEI':'hub.browserstack.com','SEKjy':_0x3e4a8f(0x11d),'bIBsy':function(_0x23ef6a,_0x476a7e){return _0x23ef6a===_0x476a7e;},'ICyKg':'nightwatch-browserstack.json','aKmor':function(_0x520410,_0x1a84c8){return _0x520410(_0x1a84c8);},'yyCXA':function(_0x3d4eb9,_0x3ff41f,_0x6f28ea,_0x416377){return _0x3d4eb9(_0x3ff41f,_0x6f28ea,_0x416377);},'dSKfc':_0x3e4a8f(0xed),'AGPND':_0x3e4a8f(0xfb),'bDBZw':_0x3e4a8f(0xeb),'czLLN':_0x3e4a8f(0xef),'cwnzg':_0x3e4a8f(0x11b)},_0x241e3c=new BrowserStackSetup(_0x4758f4);if(!_0x241e3c[_0x3e4a8f(0x104)])return;const _0x116d13=_0x35545f[_0x3e4a8f(0x122)](getUserNightwatchConfigs,_0x4758f4,_0x4449e5),_0x4c0b3c={};_0x4c0b3c[_0x3e4a8f(0xf7)]=![];const _0x26079b={};_0x26079b[_0x3e4a8f(0x120)]=_0x35545f[_0x3e4a8f(0x11f)],_0x26079b['port']=0x1bb;const _0x2cca75={};_0x2cca75['webdriver']=_0x4c0b3c,_0x2cca75['selenium']=_0x26079b;const _0x329880=_0x2cca75;logger['info'](_0x35545f['SEKjy']);const _0x4cdd79={..._0x116d13},_0x1f2ee3=_0x4cdd79,_0x4bc7c4=helper['useW3C'](_0x241e3c[_0x3e4a8f(0x104)]),_0x315cb3=[];_0x241e3c[_0x3e4a8f(0x104)][_0x3e4a8f(0xe9)][_0x3e4a8f(0xe6)]((_0x304e1d,_0x170ce1)=>{const _0x4d31ba=_0x3e4a8f;_0x4bc7c4?_0x315cb3[_0x4d31ba(0x110)](helper['modifyBrowserStackW3CCaps'](_0x241e3c['config'],_0x35545f[_0x4d31ba(0x114)],_0x170ce1)):_0x315cb3[_0x4d31ba(0x110)](helper[_0x4d31ba(0x11a)](_0x241e3c[_0x4d31ba(0x104)],_0x35545f['GDAZi'],_0x170ce1));});const _0x491b99={},_0x23479b=[];_0x4758f4[_0x3e4a8f(0xe2)]=_0x4758f4['env']||_0x4758f4['e'];const _0x407f74=_0x4758f4[_0x3e4a8f(0xe2)]?_0x4758f4['env']['trim']()[_0x3e4a8f(0x10c)](',')[_0x3e4a8f(0x102)](_0xa14666=>_0xa14666[_0x3e4a8f(0x10a)]())[_0x3e4a8f(0x125)](_0x18429a=>_0x18429a!==''):[''];_0x35545f['bIBsy'](_0x407f74[_0x3e4a8f(0x10d)],0x0)&&_0x407f74[_0x3e4a8f(0x110)]('');_0x407f74[_0x3e4a8f(0xe6)](_0x5696ea=>{const _0x58869b=_0x3e4a8f,_0x3f5166={'nCmUn':function(_0x8ee149,_0xfb14b){const _0x49059f=a33_0x16a8;return _0x35545f[_0x49059f(0xfc)](_0x8ee149,_0xfb14b);},'jARfG':_0x35545f[_0x58869b(0xe0)]};_0x315cb3['forEach'](_0x1136f5=>{const _0x464b46=_0x58869b;let _0x2f1163=_0x3f5166[_0x464b46(0xf3)](helper[_0x464b46(0x105)](_0x1136f5,'_'),'_'+Date['now']());_0x5696ea&&(_0x2f1163+='_'+_0x5696ea);if(_0x5696ea&&(!_0x116d13[_0x3f5166[_0x464b46(0xf8)]]||!_0x116d13[_0x3f5166[_0x464b46(0xf8)]][_0x5696ea]))return;const _0x371e43={..._0x329880};_0x371e43[_0x464b46(0xff)]=_0x1136f5;const _0x174f5a=_0x371e43;_0x491b99[_0x2f1163]=_0x5696ea?helper[_0x464b46(0xf4)](_0x116d13[_0x3f5166[_0x464b46(0xf8)]][_0x5696ea],_0x174f5a):_0x174f5a,_0x23479b[_0x464b46(0x110)](_0x2f1163);});});!_0x1f2ee3[_0x3e4a8f(0xf5)]&&(_0x1f2ee3[_0x3e4a8f(0xf5)]={});_0x1f2ee3['test_settings']={..._0x1f2ee3[_0x3e4a8f(0xf5)],..._0x491b99};const _0x38638d=path[_0x3e4a8f(0xf0)](__dirname,_0x35545f[_0x3e4a8f(0x121)]);fs[_0x3e4a8f(0x111)](_0x38638d,JSON[_0x3e4a8f(0x115)](_0x1f2ee3)),_0x35545f[_0x3e4a8f(0xee)](removeExistingEnvs,_0x4449e5);const _0x54e922=_0x35545f[_0x3e4a8f(0x100)](spawn,/^win/[_0x3e4a8f(0x126)](process[_0x3e4a8f(0x128)])?_0x35545f[_0x3e4a8f(0x119)]:_0x35545f[_0x3e4a8f(0x114)],[_0x35545f[_0x3e4a8f(0x117)],_0x38638d,..._0x4449e5[_0x3e4a8f(0x101)](0x1),_0x35545f[_0x3e4a8f(0x113)],_0x23479b['join'](',')],{'stdio':_0x35545f[_0x3e4a8f(0x10f)]});_0x54e922['on'](_0x35545f[_0x3e4a8f(0x103)],async _0x5789b1=>{const _0x303a84=_0x3e4a8f;logger[_0x303a84(0x112)](_0x303a84(0x108)+_0x5789b1),logger[_0x303a84(0xfd)](_0x303a84(0xf6)+_0x38638d),fs[_0x303a84(0x123)](_0x38638d);});}function a33_0x192d(){const _0x1d9be4=['TEsbl','unlinkSync','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','filter','test','bxuTV','platform','VLave','48eWAnFN','env','2320860ZjDxNM','1157840kQJjQR','WUPLg','forEach','988372qrUsIQ','1159144ZLiYPn','platforms','cwd','--env','../../helpers/logger','nightwatch.cmd','aKmor','inherit','join','path','RMVmR','nCmUn','mergeDeep','test_settings','Deleting\x20','start_process','jARfG','../utils/constants','1379200IjTMwS','--config','KhtLx','info','exports','desiredCapabilities','yyCXA','slice','map','cwnzg','config','getPlatformName','bnIjh','splice','child\x20process\x20exited\x20with\x20code\x20','kUGGS','trim','findIndex','split','length','1228278BodqgL','czLLN','push','writeFileSync','debug','bDBZw','GDAZi','stringify','../../helpers/helper','AGPND','existsSync','dSKfc','modifyBrowserStackCaps','close','nightwatch','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','1767654bxbBlC','rqPEI','host','ICyKg'];a33_0x192d=function(){return _0x1d9be4;};return a33_0x192d();}function a33_0x16a8(_0x42ddb8,_0x1fa85b){const _0x192d24=a33_0x192d();return a33_0x16a8=function(_0x16a8d6,_0x4b3cd7){_0x16a8d6=_0x16a8d6-0xe0;let _0x2fbb12=_0x192d24[_0x16a8d6];return _0x2fbb12;},a33_0x16a8(_0x42ddb8,_0x1fa85b);}module[a33_0x4bd795(0xfe)]=run;