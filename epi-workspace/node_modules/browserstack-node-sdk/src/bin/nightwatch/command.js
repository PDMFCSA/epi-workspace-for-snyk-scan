#!/usr/bin/env node
'use strict';const a36_0x233aae=a36_0x147e;function a36_0x147e(_0x42d7e9,_0x244950){const _0x5ec3b3=a36_0x5ec3();return a36_0x147e=function(_0x147efb,_0x2f0c18){_0x147efb=_0x147efb-0x15b;let _0xf43fc1=_0x5ec3b3[_0x147efb];return _0xf43fc1;},a36_0x147e(_0x42d7e9,_0x244950);}(function(_0x800344,_0x530fab){const _0x443f25=a36_0x147e,_0x2104d7=_0x800344();while(!![]){try{const _0x5cb80e=-parseInt(_0x443f25(0x18c))/0x1*(-parseInt(_0x443f25(0x17e))/0x2)+parseInt(_0x443f25(0x178))/0x3+-parseInt(_0x443f25(0x1a2))/0x4*(parseInt(_0x443f25(0x1a9))/0x5)+-parseInt(_0x443f25(0x182))/0x6+-parseInt(_0x443f25(0x176))/0x7*(parseInt(_0x443f25(0x16e))/0x8)+-parseInt(_0x443f25(0x198))/0x9*(parseInt(_0x443f25(0x169))/0xa)+-parseInt(_0x443f25(0x193))/0xb;if(_0x5cb80e===_0x530fab)break;else _0x2104d7['push'](_0x2104d7['shift']());}catch(_0xa2c89f){_0x2104d7['push'](_0x2104d7['shift']());}}}(a36_0x5ec3,0xc1354));function a36_0x5ec3(){const _0x495d4a=['slice','nightwatch.conf.js','nightwatch','558468ZzRrct','nightwatch-browserstack.json','eFjiB','existsSync','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','wuSDv','OLvWs','15AcvsdF','start_process','config','info','port','push','--env','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','--config','host','yZTSR','length','getPlatformName','cOfzr','splice','../../helpers/helper','WGXuE','30PzBEjU','isUndefined','env','useW3C','nightwatch.cmd','112dIidGC','winstonLogger','forEach','MHxen','Ivwkk','modifyBrowserStackW3CCaps','cESia','close','146559iboVuA','stringify','3837561XzeDlA','Deleting\x20','mergeDeep','HEcMG','desiredCapabilities','RkUba','42yRfdOk','test','exports','findIndex','2101806FslvGK','test_settings','hub.browserstack.com','inherit','XeqZI','kQKJW','UFaNE','ehJfd','trim','unlinkSync','63913fdzLYN','webdriver','ogbXQ','hYxfJ','zxiBL','cwd','join','2532497XKLJpI','child\x20process\x20exited\x20with\x20code\x20','yXYys','Getting\x20your\x20nightwatch\x20configs\x20from\x20','writeFileSync','1612449VAEwPd','nightwatch.json','cOwkG','oXRNF','map','path','split'];a36_0x5ec3=function(){return _0x495d4a;};return a36_0x5ec3();}const fs=require('fs'),path=require(a36_0x233aae(0x19d)),{spawn}=require('child_process'),logger=require('../../helpers/logger')[a36_0x233aae(0x16f)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a36_0x233aae(0x167)),constants=require('../utils/constants'),getUserNightwatchConfigs=(_0x439e35,_0xddc314)=>{const _0xfcbc71=a36_0x233aae,_0x1be6ad={'oXRNF':_0xfcbc71(0x1a0),'ogbXQ':_0xfcbc71(0x199),'wuSDv':function(_0x40a6bc,_0x22d812){return _0x40a6bc(_0x22d812);},'WGXuE':_0xfcbc71(0x15f)};let _0xa24171=null,_0x16dbdf={};const _0x2e1f57=_0xddc314[_0xfcbc71(0x181)](_0x35568e=>_0x35568e===_0xfcbc71(0x160));if(!helper[_0xfcbc71(0x16a)](_0x439e35[_0xfcbc71(0x1ab)])&&fs['existsSync'](path['join'](process['cwd'](),_0x439e35[_0xfcbc71(0x1ab)])))_0xa24171=path[_0xfcbc71(0x192)](process[_0xfcbc71(0x191)](),_0x439e35[_0xfcbc71(0x1ab)]),_0xddc314[_0xfcbc71(0x166)](_0x2e1f57,0x2);else{if(fs['existsSync'](path['join'](process[_0xfcbc71(0x191)](),_0x1be6ad[_0xfcbc71(0x19b)])))_0xa24171=path[_0xfcbc71(0x192)](process[_0xfcbc71(0x191)](),_0x1be6ad['oXRNF']);else fs[_0xfcbc71(0x1a5)](path['join'](process['cwd'](),_0x1be6ad[_0xfcbc71(0x18e)]))&&(_0xa24171=path['join'](process[_0xfcbc71(0x191)](),_0x1be6ad[_0xfcbc71(0x18e)]));}return _0xa24171?(logger[_0xfcbc71(0x15b)](_0xfcbc71(0x196)+_0xa24171),_0x16dbdf=_0x1be6ad[_0xfcbc71(0x1a7)](require,_0xa24171)):logger[_0xfcbc71(0x15b)](_0x1be6ad[_0xfcbc71(0x168)]),_0x16dbdf;},removeExistingEnvs=_0x114578=>{const _0x4af424=a36_0x233aae,_0x4293db={};_0x4293db[_0x4af424(0x190)]=function(_0x4684dc,_0x196d8b){return _0x4684dc>_0x196d8b;},_0x4293db['RkUba']=function(_0x58abd8,_0x4f0e3c){return _0x58abd8>_0x4f0e3c;};const _0x4944b5=_0x4293db;let _0x12d323=_0x114578[_0x4af424(0x181)](_0x4aa7c5=>_0x4aa7c5===_0x4af424(0x15e));_0x4944b5[_0x4af424(0x190)](_0x12d323,-0x1)&&_0x114578[_0x4af424(0x166)](_0x12d323,0x2),_0x12d323=_0x114578[_0x4af424(0x181)](_0x566d75=>_0x566d75==='-e'),_0x4944b5[_0x4af424(0x17d)](_0x12d323,-0x1)&&_0x114578['splice'](_0x12d323,0x2);};function run(_0x249560,_0x5868b3,_0x38f0f0){const _0x243583=a36_0x233aae,_0x414dea={'cOfzr':_0x243583(0x1a1),'yXYys':function(_0x292548,_0x340dd5){return _0x292548+_0x340dd5;},'UFaNE':_0x243583(0x183),'yZTSR':function(_0x8df95,_0xd39343,_0x48c89){return _0x8df95(_0xd39343,_0x48c89);},'kQKJW':_0x243583(0x184),'ehJfd':_0x243583(0x1a6),'YxTvP':function(_0x29dc16,_0x5911dc){return _0x29dc16===_0x5911dc;},'MHxen':_0x243583(0x1a3),'cESia':function(_0x1310ac,_0x3dc002){return _0x1310ac(_0x3dc002);},'cOwkG':function(_0x49a484,_0x3ea686,_0xed3641,_0x290554){return _0x49a484(_0x3ea686,_0xed3641,_0x290554);},'HEcMG':_0x243583(0x16d),'XeqZI':_0x243583(0x160),'HYEJU':_0x243583(0x15e),'hYxfJ':_0x243583(0x185),'Ivwkk':_0x243583(0x175)};if(!_0x38f0f0[_0x243583(0x1ab)])return;const _0x1f5715=_0x414dea[_0x243583(0x162)](getUserNightwatchConfigs,_0x249560,_0x5868b3),_0x5b784b={};_0x5b784b[_0x243583(0x1aa)]=![];const _0x458c1a={};_0x458c1a[_0x243583(0x161)]=_0x414dea[_0x243583(0x187)],_0x458c1a[_0x243583(0x15c)]=0x1bb;const _0x205211={};_0x205211[_0x243583(0x18d)]=_0x5b784b,_0x205211['selenium']=_0x458c1a;const _0x2f51e1=_0x205211;logger['info'](_0x414dea[_0x243583(0x189)]);const _0x230d31={..._0x1f5715},_0x3ac1c5=_0x230d31,_0x22385f=helper[_0x243583(0x16c)](_0x38f0f0[_0x243583(0x1ab)]),_0x1ad327=[];_0x38f0f0[_0x243583(0x1ab)]['platforms'][_0x243583(0x170)]((_0x7bcfec,_0x82c138)=>{const _0x9e8f78=_0x243583;_0x22385f?_0x1ad327[_0x9e8f78(0x15d)](helper[_0x9e8f78(0x173)](_0x38f0f0['config'],_0x414dea[_0x9e8f78(0x165)],_0x82c138)):_0x1ad327[_0x9e8f78(0x15d)](helper['modifyBrowserStackCaps'](_0x38f0f0['config'],_0x414dea[_0x9e8f78(0x165)],_0x82c138));});const _0x129361={},_0x19ff5a=[];_0x249560['env']=_0x249560[_0x243583(0x16b)]||_0x249560['e'];const _0x441d3b=_0x249560[_0x243583(0x16b)]?_0x249560[_0x243583(0x16b)][_0x243583(0x18a)]()[_0x243583(0x19e)](',')[_0x243583(0x19c)](_0x4c5efc=>_0x4c5efc['trim']())['filter'](_0x12b88d=>_0x12b88d!==''):[''];_0x414dea['YxTvP'](_0x441d3b[_0x243583(0x163)],0x0)&&_0x441d3b[_0x243583(0x15d)]('');_0x441d3b[_0x243583(0x170)](_0x2c51cf=>{const _0x195dab=_0x243583,_0x43e2be={'OLvWs':function(_0x149be7,_0x34e9c5){const _0x4dafa3=a36_0x147e;return _0x414dea[_0x4dafa3(0x195)](_0x149be7,_0x34e9c5);},'eFjiB':_0x414dea[_0x195dab(0x188)]};_0x1ad327['forEach'](_0x388862=>{const _0x5ab8fa=_0x195dab;let _0x241627=_0x43e2be[_0x5ab8fa(0x1a8)](helper[_0x5ab8fa(0x164)](_0x388862,'_'),'_'+Date['now']());_0x2c51cf&&(_0x241627+='_'+_0x2c51cf);if(_0x2c51cf&&(!_0x1f5715[_0x43e2be[_0x5ab8fa(0x1a4)]]||!_0x1f5715[_0x43e2be['eFjiB']][_0x2c51cf]))return;const _0xd7e0ca={..._0x2f51e1};_0xd7e0ca[_0x5ab8fa(0x17c)]=_0x388862;const _0x2db28e=_0xd7e0ca;_0x129361[_0x241627]=_0x2c51cf?helper[_0x5ab8fa(0x17a)](_0x1f5715[_0x43e2be[_0x5ab8fa(0x1a4)]][_0x2c51cf],_0x2db28e):_0x2db28e,_0x19ff5a['push'](_0x241627);});});!_0x3ac1c5['test_settings']&&(_0x3ac1c5[_0x243583(0x183)]={});_0x3ac1c5[_0x243583(0x183)]={..._0x3ac1c5['test_settings'],..._0x129361};const _0x12d87c=path[_0x243583(0x192)](__dirname,_0x414dea[_0x243583(0x171)]);fs[_0x243583(0x197)](_0x12d87c,JSON[_0x243583(0x177)](_0x3ac1c5)),_0x414dea[_0x243583(0x174)](removeExistingEnvs,_0x5868b3);const _0x4611f1=_0x414dea[_0x243583(0x19a)](spawn,/^win/[_0x243583(0x17f)](process['platform'])?_0x414dea[_0x243583(0x17b)]:_0x414dea[_0x243583(0x165)],[_0x414dea[_0x243583(0x186)],_0x12d87c,..._0x5868b3[_0x243583(0x19f)](0x1),_0x414dea['HYEJU'],_0x19ff5a[_0x243583(0x192)](',')],{'stdio':_0x414dea[_0x243583(0x18f)]});_0x4611f1['on'](_0x414dea[_0x243583(0x172)],async _0x4e2b7d=>{const _0xe8f4fd=_0x243583;logger['debug'](_0xe8f4fd(0x194)+_0x4e2b7d),logger[_0xe8f4fd(0x15b)](_0xe8f4fd(0x179)+_0x12d87c),fs[_0xe8f4fd(0x18b)](_0x12d87c);});}module[a36_0x233aae(0x180)]=run;