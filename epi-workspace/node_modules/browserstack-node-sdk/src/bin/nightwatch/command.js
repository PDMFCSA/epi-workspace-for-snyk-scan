#!/usr/bin/env node
'use strict';const a33_0x1192bb=a33_0x24e6;function a33_0x46e0(){const _0x5a48ea=['nightwatch','isUndefined','5256216dyfmNW','inherit','test_settings','../../helpers/logger','getPlatformName','join','splice','34vCHpNL','child\x20process\x20exited\x20with\x20code\x20','JmfUy','winstonLogger','map','UIbPs','hub.browserstack.com','69939dmTkvY','forEach','test','POcLq','cwd','aKPCi','filter','../../helpers/BrowserStackSetup','NCufO','env','close','eQAvI','--env','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','GLDLj','3667385comLNv','fUtJp','5840rnbtce','nightwatch.cmd','modifyBrowserStackCaps','../../helpers/helper','unlinkSync','child_process','Nregx','findIndex','trim','existsSync','nightwatch.conf.js','qMYtn','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','--config','xrEmR','mergeDeep','writeFileSync','Getting\x20your\x20nightwatch\x20configs\x20from\x20','useW3C','xIhXP','4ltPeoa','Deleting\x20','path','length','25680140hjRVJU','platform','lIUpX','1271172PFIOCo','10051272MnGDuu','push','info','sXvCi','cKFgQ','3409zkwNbM','fdMrY','stringify','config','modifyBrowserStackW3CCaps','platforms','hthrR','nightwatch.json','start_process'];a33_0x46e0=function(){return _0x5a48ea;};return a33_0x46e0();}(function(_0x171afc,_0x4a85ce){const _0xcd3152=a33_0x24e6,_0x4142f0=_0x171afc();while(!![]){try{const _0x10c9ce=parseInt(_0xcd3152(0x1dc))/0x1+-parseInt(_0xcd3152(0x1f4))/0x2*(-parseInt(_0xcd3152(0x1fb))/0x3)+-parseInt(_0xcd3152(0x1d5))/0x4*(parseInt(_0xcd3152(0x20a))/0x5)+parseInt(_0xcd3152(0x1dd))/0x6+-parseInt(_0xcd3152(0x1e2))/0x7*(-parseInt(_0xcd3152(0x20c))/0x8)+parseInt(_0xcd3152(0x1ed))/0x9+-parseInt(_0xcd3152(0x1d9))/0xa;if(_0x10c9ce===_0x4a85ce)break;else _0x4142f0['push'](_0x4142f0['shift']());}catch(_0x5bed4c){_0x4142f0['push'](_0x4142f0['shift']());}}}(a33_0x46e0,0xef70c));function a33_0x24e6(_0x298fcd,_0x40b151){const _0x46e0e6=a33_0x46e0();return a33_0x24e6=function(_0x24e696,_0x473867){_0x24e696=_0x24e696-0x1c9;let _0x4272c9=_0x46e0e6[_0x24e696];return _0x4272c9;},a33_0x24e6(_0x298fcd,_0x40b151);}const fs=require('fs'),path=require(a33_0x1192bb(0x1d7)),{spawn}=require(a33_0x1192bb(0x211)),logger=require(a33_0x1192bb(0x1f0))[a33_0x1192bb(0x1f7)],{default:BrowserStackSetup}=require(a33_0x1192bb(0x202)),helper=require(a33_0x1192bb(0x20f)),constants=require('../utils/constants'),getUserNightwatchConfigs=(_0x52a90,_0x48aaa8)=>{const _0x500e69=a33_0x1192bb,_0x357617={'sXvCi':_0x500e69(0x1cb),'NCufO':_0x500e69(0x1e9),'xIhXP':function(_0x5d86e9,_0x31caf5){return _0x5d86e9(_0x31caf5);},'lIUpX':_0x500e69(0x1cd)};let _0x310e5b=null,_0x26fd58={};const _0x4c3d1b=_0x48aaa8[_0x500e69(0x213)](_0x215e80=>_0x215e80==='--config');if(!helper[_0x500e69(0x1ec)](_0x52a90[_0x500e69(0x1e5)])&&fs[_0x500e69(0x1ca)](path[_0x500e69(0x1f2)](process['cwd'](),_0x52a90[_0x500e69(0x1e5)])))_0x310e5b=path[_0x500e69(0x1f2)](process[_0x500e69(0x1ff)](),_0x52a90['config']),_0x48aaa8['splice'](_0x4c3d1b,0x2);else{if(fs['existsSync'](path['join'](process[_0x500e69(0x1ff)](),_0x357617[_0x500e69(0x1e0)])))_0x310e5b=path[_0x500e69(0x1f2)](process[_0x500e69(0x1ff)](),_0x357617[_0x500e69(0x1e0)]);else fs[_0x500e69(0x1ca)](path[_0x500e69(0x1f2)](process['cwd'](),_0x357617['NCufO']))&&(_0x310e5b=path['join'](process[_0x500e69(0x1ff)](),_0x357617[_0x500e69(0x203)]));}return _0x310e5b?(logger[_0x500e69(0x1df)](_0x500e69(0x1d2)+_0x310e5b),_0x26fd58=_0x357617[_0x500e69(0x1d4)](require,_0x310e5b)):logger['info'](_0x357617[_0x500e69(0x1db)]),_0x26fd58;},removeExistingEnvs=_0x565d3b=>{const _0x42bc48=a33_0x1192bb,_0xf005bc={};_0xf005bc[_0x42bc48(0x1f6)]=function(_0x7458a7,_0x130b54){return _0x7458a7>_0x130b54;},_0xf005bc[_0x42bc48(0x212)]=function(_0x40c1cc,_0x229683){return _0x40c1cc>_0x229683;};const _0x46e656=_0xf005bc;let _0x54d94e=_0x565d3b[_0x42bc48(0x213)](_0x2afb26=>_0x2afb26===_0x42bc48(0x207));_0x46e656[_0x42bc48(0x1f6)](_0x54d94e,-0x1)&&_0x565d3b['splice'](_0x54d94e,0x2),_0x54d94e=_0x565d3b[_0x42bc48(0x213)](_0xe89f37=>_0xe89f37==='-e'),_0x46e656[_0x42bc48(0x212)](_0x54d94e,-0x1)&&_0x565d3b[_0x42bc48(0x1f3)](_0x54d94e,0x2);};function run(_0x36c60a,_0x2ff311,_0x51ba48){const _0x44e94d=a33_0x1192bb,_0x50481e={'fUtJp':_0x44e94d(0x1eb),'uhNiI':function(_0x292216,_0x32872a){return _0x292216+_0x32872a;},'xrEmR':_0x44e94d(0x1ef),'kpfvh':function(_0x1e00d3,_0x2cda56,_0x47be18){return _0x1e00d3(_0x2cda56,_0x47be18);},'gwFhV':_0x44e94d(0x1fa),'GLDLj':_0x44e94d(0x208),'qMYtn':function(_0x319e4d,_0x3381fa){return _0x319e4d===_0x3381fa;},'UIbPs':'nightwatch-browserstack.json','eQAvI':function(_0x169bb6,_0x565602){return _0x169bb6(_0x565602);},'hthrR':function(_0x1e071f,_0x4d3c85,_0xecefcb,_0x405642){return _0x1e071f(_0x4d3c85,_0xecefcb,_0x405642);},'aKPCi':_0x44e94d(0x20d),'sWTBE':_0x44e94d(0x1ce),'fdMrY':_0x44e94d(0x207),'POcLq':_0x44e94d(0x1ee),'cKFgQ':_0x44e94d(0x205)};if(!_0x51ba48[_0x44e94d(0x1e5)])return;const _0x354bec=_0x50481e['kpfvh'](getUserNightwatchConfigs,_0x36c60a,_0x2ff311),_0x4038a9={};_0x4038a9[_0x44e94d(0x1ea)]=![];const _0x4e9c39={};_0x4e9c39['host']=_0x50481e['gwFhV'],_0x4e9c39['port']=0x1bb;const _0x189fc9={};_0x189fc9['webdriver']=_0x4038a9,_0x189fc9['selenium']=_0x4e9c39;const _0x5a5cef=_0x189fc9;logger[_0x44e94d(0x1df)](_0x50481e[_0x44e94d(0x209)]);const _0x2a3dca={..._0x354bec},_0x17b8a4=_0x2a3dca,_0xc8a75f=helper[_0x44e94d(0x1d3)](_0x51ba48['config']),_0x22ef23=[];_0x51ba48[_0x44e94d(0x1e5)][_0x44e94d(0x1e7)][_0x44e94d(0x1fc)]((_0xebd249,_0x56938b)=>{const _0x3e0ae3=_0x44e94d;_0xc8a75f?_0x22ef23[_0x3e0ae3(0x1de)](helper[_0x3e0ae3(0x1e6)](_0x51ba48[_0x3e0ae3(0x1e5)],_0x50481e[_0x3e0ae3(0x20b)],_0x56938b)):_0x22ef23[_0x3e0ae3(0x1de)](helper[_0x3e0ae3(0x20e)](_0x51ba48['config'],_0x50481e[_0x3e0ae3(0x20b)],_0x56938b));});const _0x1cc819={},_0x3b8173=[];_0x36c60a[_0x44e94d(0x204)]=_0x36c60a[_0x44e94d(0x204)]||_0x36c60a['e'];const _0x177fc7=_0x36c60a[_0x44e94d(0x204)]?_0x36c60a[_0x44e94d(0x204)][_0x44e94d(0x1c9)]()['split'](',')[_0x44e94d(0x1f8)](_0x25e49b=>_0x25e49b[_0x44e94d(0x1c9)]())[_0x44e94d(0x201)](_0x340522=>_0x340522!==''):[''];_0x50481e[_0x44e94d(0x1cc)](_0x177fc7[_0x44e94d(0x1d8)],0x0)&&_0x177fc7[_0x44e94d(0x1de)]('');_0x177fc7['forEach'](_0x3e8c80=>{const _0x1ba319=_0x44e94d;_0x22ef23[_0x1ba319(0x1fc)](_0xbf9f02=>{const _0x5b44ca=_0x1ba319;let _0x3e3a6a=_0x50481e['uhNiI'](helper[_0x5b44ca(0x1f1)](_0xbf9f02,'_'),'_'+Date['now']());_0x3e8c80&&(_0x3e3a6a+='_'+_0x3e8c80);if(_0x3e8c80&&(!_0x354bec[_0x50481e[_0x5b44ca(0x1cf)]]||!_0x354bec[_0x50481e[_0x5b44ca(0x1cf)]][_0x3e8c80]))return;const _0x28917a={..._0x5a5cef};_0x28917a['desiredCapabilities']=_0xbf9f02;const _0x4a7799=_0x28917a;_0x1cc819[_0x3e3a6a]=_0x3e8c80?helper[_0x5b44ca(0x1d0)](_0x354bec[_0x50481e[_0x5b44ca(0x1cf)]][_0x3e8c80],_0x4a7799):_0x4a7799,_0x3b8173['push'](_0x3e3a6a);});});!_0x17b8a4[_0x44e94d(0x1ef)]&&(_0x17b8a4[_0x44e94d(0x1ef)]={});_0x17b8a4[_0x44e94d(0x1ef)]={..._0x17b8a4[_0x44e94d(0x1ef)],..._0x1cc819};const _0x1dd886=path[_0x44e94d(0x1f2)](__dirname,_0x50481e[_0x44e94d(0x1f9)]);fs[_0x44e94d(0x1d1)](_0x1dd886,JSON[_0x44e94d(0x1e4)](_0x17b8a4)),_0x50481e[_0x44e94d(0x206)](removeExistingEnvs,_0x2ff311);const _0x18cc38=_0x50481e[_0x44e94d(0x1e8)](spawn,/^win/[_0x44e94d(0x1fd)](process[_0x44e94d(0x1da)])?_0x50481e[_0x44e94d(0x200)]:_0x50481e[_0x44e94d(0x20b)],[_0x50481e['sWTBE'],_0x1dd886,..._0x2ff311['slice'](0x1),_0x50481e[_0x44e94d(0x1e3)],_0x3b8173[_0x44e94d(0x1f2)](',')],{'stdio':_0x50481e[_0x44e94d(0x1fe)]});_0x18cc38['on'](_0x50481e[_0x44e94d(0x1e1)],async _0x5aaa59=>{const _0x38e4b3=_0x44e94d;logger['debug'](_0x38e4b3(0x1f5)+_0x5aaa59),logger[_0x38e4b3(0x1df)](_0x38e4b3(0x1d6)+_0x1dd886),fs[_0x38e4b3(0x210)](_0x1dd886);});}module['exports']=run;