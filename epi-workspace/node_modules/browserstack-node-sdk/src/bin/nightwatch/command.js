#!/usr/bin/env node
'use strict';function a38_0x42c4(){const _0x3aebaa=['nightwatch.cmd','nightwatch.conf.js','child\x20process\x20exited\x20with\x20code\x20','config','now','debug','nightwatch','start_process','490530DRLnec','NFhAm','join','../../helpers/logger','hub.browserstack.com','qSaTs','trim','selenium','../utils/constants','pSpHS','--env','278274wbevTC','stringify','cwd','modifyBrowserStackCaps','test','ouPlw','1950248znUpmO','useW3C','kKJpN','rxDfH','test_settings','2517005utPnXY','env','nightwatch.json','port','vFFEv','shINY','webdriver','FqFzp','27kAWFzF','185599nXfSCb','1031492jBKnVp','slice','push','Getting\x20your\x20nightwatch\x20configs\x20from\x20','findIndex','filter','exports','--config','JMEJZ','uiwMf','../../helpers/helper','nightwatch-browserstack.json','whErE','map','RDoIL','ahSUJ','forEach','info','801471AMjqjn','splice','getPlatformName','isUndefined','POmXL','host','jJheF','split','existsSync','unlinkSync','platform','length','iTjWs','35wvbyji'];a38_0x42c4=function(){return _0x3aebaa;};return a38_0x42c4();}const a38_0x231d46=a38_0x232e;(function(_0x21edc6,_0x509327){const _0x3dd812=a38_0x232e,_0x305a04=_0x21edc6();while(!![]){try{const _0xa2ee54=parseInt(_0x3dd812(0x1b8))/0x1+parseInt(_0x3dd812(0x199))/0x2+-parseInt(_0x3dd812(0x183))/0x3+-parseInt(_0x3dd812(0x1b9))/0x4+-parseInt(_0x3dd812(0x1af))/0x5+parseInt(_0x3dd812(0x1a4))/0x6*(parseInt(_0x3dd812(0x190))/0x7)+parseInt(_0x3dd812(0x1aa))/0x8*(parseInt(_0x3dd812(0x1b7))/0x9);if(_0xa2ee54===_0x509327)break;else _0x305a04['push'](_0x305a04['shift']());}catch(_0x4e3333){_0x305a04['push'](_0x305a04['shift']());}}}(a38_0x42c4,0x59467));function a38_0x232e(_0xe9828e,_0x5e79de){const _0x42c47c=a38_0x42c4();return a38_0x232e=function(_0x232e6f,_0x2b3137){_0x232e6f=_0x232e6f-0x182;let _0x2ecd63=_0x42c47c[_0x232e6f];return _0x2ecd63;},a38_0x232e(_0xe9828e,_0x5e79de);}const fs=require('fs'),path=require('path'),{spawn}=require('child_process'),logger=require(a38_0x231d46(0x19c))['winstonLogger'],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a38_0x231d46(0x1c3)),constants=require(a38_0x231d46(0x1a1)),getUserNightwatchConfigs=(_0x54dbd9,_0x53073a)=>{const _0x2ebd06=a38_0x231d46,_0x28c1a8={'uiwMf':_0x2ebd06(0x192),'kKJpN':_0x2ebd06(0x1b1),'ahSUJ':function(_0xfe1513,_0x30af82){return _0xfe1513(_0x30af82);},'whErE':'Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file'};let _0x42026d=null,_0xc76013={};const _0x3f8433=_0x53073a[_0x2ebd06(0x1bd)](_0x5e5e86=>_0x5e5e86===_0x2ebd06(0x1c0));if(!helper[_0x2ebd06(0x186)](_0x54dbd9[_0x2ebd06(0x194)])&&fs[_0x2ebd06(0x18b)](path['join'](process[_0x2ebd06(0x1a6)](),_0x54dbd9[_0x2ebd06(0x194)])))_0x42026d=path[_0x2ebd06(0x19b)](process[_0x2ebd06(0x1a6)](),_0x54dbd9[_0x2ebd06(0x194)]),_0x53073a[_0x2ebd06(0x184)](_0x3f8433,0x2);else{if(fs['existsSync'](path[_0x2ebd06(0x19b)](process[_0x2ebd06(0x1a6)](),_0x28c1a8[_0x2ebd06(0x1c2)])))_0x42026d=path[_0x2ebd06(0x19b)](process[_0x2ebd06(0x1a6)](),_0x28c1a8[_0x2ebd06(0x1c2)]);else fs[_0x2ebd06(0x18b)](path[_0x2ebd06(0x19b)](process[_0x2ebd06(0x1a6)](),_0x28c1a8[_0x2ebd06(0x1ac)]))&&(_0x42026d=path[_0x2ebd06(0x19b)](process[_0x2ebd06(0x1a6)](),_0x28c1a8['kKJpN']));}return _0x42026d?(logger['info'](_0x2ebd06(0x1bc)+_0x42026d),_0xc76013=_0x28c1a8[_0x2ebd06(0x1c8)](require,_0x42026d)):logger[_0x2ebd06(0x182)](_0x28c1a8[_0x2ebd06(0x1c5)]),_0xc76013;},removeExistingEnvs=_0x30c7b7=>{const _0x22f276=a38_0x231d46,_0x4378b9={};_0x4378b9['ouPlw']=function(_0xdf5f4d,_0x27757f){return _0xdf5f4d>_0x27757f;};const _0x26a470=_0x4378b9;let _0x29bbf5=_0x30c7b7[_0x22f276(0x1bd)](_0x1cfea6=>_0x1cfea6==='--env');_0x26a470[_0x22f276(0x1a9)](_0x29bbf5,-0x1)&&_0x30c7b7['splice'](_0x29bbf5,0x2),_0x29bbf5=_0x30c7b7['findIndex'](_0x37c222=>_0x37c222==='-e'),_0x26a470[_0x22f276(0x1a9)](_0x29bbf5,-0x1)&&_0x30c7b7['splice'](_0x29bbf5,0x2);};function run(_0x101142,_0x5aab6b,_0xdbe0b9){const _0x469b59=a38_0x231d46,_0xf5c2d6={'rxDfH':_0x469b59(0x197),'FqFzp':function(_0x58dc39,_0x5029ad){return _0x58dc39+_0x5029ad;},'POmXL':'test_settings','NFhAm':function(_0x844a44,_0xb432c9,_0x282502){return _0x844a44(_0xb432c9,_0x282502);},'JMEJZ':_0x469b59(0x19d),'vFFEv':'Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','shINY':function(_0x5c2c3d,_0xca1848){return _0x5c2c3d===_0xca1848;},'iTjWs':_0x469b59(0x1c4),'qSaTs':function(_0x31928e,_0x1df59c){return _0x31928e(_0x1df59c);},'pSpHS':function(_0x5466f6,_0x51b319,_0x452bc1,_0x4618f8){return _0x5466f6(_0x51b319,_0x452bc1,_0x4618f8);},'RDoIL':_0x469b59(0x191),'mPXPJ':_0x469b59(0x1c0),'Xqpji':_0x469b59(0x1a3),'uUian':'inherit','jJheF':'close'};if(!_0xdbe0b9['config'])return;const _0x132f9f=_0xf5c2d6[_0x469b59(0x19a)](getUserNightwatchConfigs,_0x101142,_0x5aab6b),_0x345fc7={};_0x345fc7[_0x469b59(0x198)]=![];const _0xcef5c9={};_0xcef5c9[_0x469b59(0x188)]=_0xf5c2d6[_0x469b59(0x1c1)],_0xcef5c9[_0x469b59(0x1b2)]=0x1bb;const _0x11a2f0={};_0x11a2f0[_0x469b59(0x1b5)]=_0x345fc7,_0x11a2f0[_0x469b59(0x1a0)]=_0xcef5c9;const _0x428ce7=_0x11a2f0;logger[_0x469b59(0x182)](_0xf5c2d6[_0x469b59(0x1b3)]);const _0x2adea7={..._0x132f9f},_0x554dca=_0x2adea7,_0x294e07=helper[_0x469b59(0x1ab)](_0xdbe0b9['config']),_0x249e99=[];_0xdbe0b9['config']['platforms']['forEach']((_0x53a927,_0xc54052)=>{const _0x2eeef0=_0x469b59;_0x294e07?_0x249e99['push'](helper['modifyBrowserStackW3CCaps'](_0xdbe0b9[_0x2eeef0(0x194)],_0xf5c2d6[_0x2eeef0(0x1ad)],_0xc54052)):_0x249e99[_0x2eeef0(0x1bb)](helper[_0x2eeef0(0x1a7)](_0xdbe0b9[_0x2eeef0(0x194)],_0xf5c2d6['rxDfH'],_0xc54052));});const _0x40b3b2={},_0x221bd1=[];_0x101142[_0x469b59(0x1b0)]=_0x101142['env']||_0x101142['e'];const _0x302379=_0x101142[_0x469b59(0x1b0)]?_0x101142['env']['trim']()[_0x469b59(0x18a)](',')[_0x469b59(0x1c6)](_0x4ac51c=>_0x4ac51c[_0x469b59(0x19f)]())[_0x469b59(0x1be)](_0x70322b=>_0x70322b!==''):[''];_0xf5c2d6[_0x469b59(0x1b4)](_0x302379[_0x469b59(0x18e)],0x0)&&_0x302379['push']('');_0x302379[_0x469b59(0x1c9)](_0x4d4e82=>{const _0x198ec6=_0x469b59;_0x249e99[_0x198ec6(0x1c9)](_0x38912a=>{const _0x267019=_0x198ec6;let _0x3bf2e1=_0xf5c2d6[_0x267019(0x1b6)](helper[_0x267019(0x185)](_0x38912a,'_'),'_'+Date[_0x267019(0x195)]());_0x4d4e82&&(_0x3bf2e1+='_'+_0x4d4e82);if(_0x4d4e82&&(!_0x132f9f[_0xf5c2d6['POmXL']]||!_0x132f9f[_0xf5c2d6['POmXL']][_0x4d4e82]))return;const _0x12c14f={..._0x428ce7};_0x12c14f['desiredCapabilities']=_0x38912a;const _0xc81a20=_0x12c14f;_0x40b3b2[_0x3bf2e1]=_0x4d4e82?helper['mergeDeep'](_0x132f9f[_0xf5c2d6[_0x267019(0x187)]][_0x4d4e82],_0xc81a20):_0xc81a20,_0x221bd1[_0x267019(0x1bb)](_0x3bf2e1);});});!_0x554dca['test_settings']&&(_0x554dca[_0x469b59(0x1ae)]={});_0x554dca['test_settings']={..._0x554dca['test_settings'],..._0x40b3b2};const _0x17f118=path[_0x469b59(0x19b)](__dirname,_0xf5c2d6[_0x469b59(0x18f)]);fs['writeFileSync'](_0x17f118,JSON[_0x469b59(0x1a5)](_0x554dca)),_0xf5c2d6[_0x469b59(0x19e)](removeExistingEnvs,_0x5aab6b);const _0x48ff05=_0xf5c2d6[_0x469b59(0x1a2)](spawn,/^win/[_0x469b59(0x1a8)](process[_0x469b59(0x18d)])?_0xf5c2d6[_0x469b59(0x1c7)]:_0xf5c2d6[_0x469b59(0x1ad)],[_0xf5c2d6['mPXPJ'],_0x17f118,..._0x5aab6b[_0x469b59(0x1ba)](0x1),_0xf5c2d6['Xqpji'],_0x221bd1['join'](',')],{'stdio':_0xf5c2d6['uUian']});_0x48ff05['on'](_0xf5c2d6[_0x469b59(0x189)],async _0x16031b=>{const _0x8f3f41=_0x469b59;logger[_0x8f3f41(0x196)](_0x8f3f41(0x193)+_0x16031b),logger[_0x8f3f41(0x182)]('Deleting\x20'+_0x17f118),fs[_0x8f3f41(0x18c)](_0x17f118);});}module[a38_0x231d46(0x1bf)]=run;