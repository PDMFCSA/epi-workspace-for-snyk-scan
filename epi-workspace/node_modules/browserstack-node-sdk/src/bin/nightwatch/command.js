#!/usr/bin/env node
'use strict';const a38_0x152db5=a38_0x3552;(function(_0xa958e3,_0x460d99){const _0x264c17=a38_0x3552,_0x3b2237=_0xa958e3();while(!![]){try{const _0x5eb418=parseInt(_0x264c17(0xc2))/0x1+-parseInt(_0x264c17(0xb6))/0x2*(parseInt(_0x264c17(0xaa))/0x3)+-parseInt(_0x264c17(0xc1))/0x4*(parseInt(_0x264c17(0xd3))/0x5)+-parseInt(_0x264c17(0xe5))/0x6+parseInt(_0x264c17(0xa9))/0x7+-parseInt(_0x264c17(0xd1))/0x8*(parseInt(_0x264c17(0xd2))/0x9)+parseInt(_0x264c17(0xd9))/0xa;if(_0x5eb418===_0x460d99)break;else _0x3b2237['push'](_0x3b2237['shift']());}catch(_0x31a897){_0x3b2237['push'](_0x3b2237['shift']());}}}(a38_0x460f,0xd532a));function a38_0x460f(){const _0x680aa4=['config','existsSync','TfVze','stringify','GUgco','push','host','vBKdZ','now','forEach','6qMZxqh','findIndex','writeFileSync','start_process','QtRii','platform','modifyBrowserStackW3CCaps','Cnvcz','exports','child_process','nightwatch.json','16012HajfZr','522717OXXJUV','filter','close','test_settings','debug','mergeDeep','Deleting\x20','cwd','cSJtP','wotle','DUAmo','nightwatch','rfiwu','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','YJVVE','17144IFMenR','3492ipFxwh','835fgCYcC','../utils/constants','HxCEd','hub.browserstack.com','child\x20process\x20exited\x20with\x20code\x20','selenium','25501380miYRaT','TzknZ','env','splice','BTqBR','gNkvm','webdriver','slice','--config','Getting\x20your\x20nightwatch\x20configs\x20from\x20','nightwatch.cmd','inherit','5207802HjHPGo','split','vCDvd','length','desiredCapabilities','info','getPlatformName','PxSyj','1948198lijGhm','109959oajnDU','join'];a38_0x460f=function(){return _0x680aa4;};return a38_0x460f();}const fs=require('fs'),path=require('path'),{spawn}=require(a38_0x152db5(0xbf)),logger=require('../../helpers/logger')['winstonLogger'],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require('../../helpers/helper'),constants=require(a38_0x152db5(0xd4)),getUserNightwatchConfigs=(_0x291351,_0x2187e1)=>{const _0x53a417=a38_0x152db5,_0x1652c9={'QtRii':'nightwatch.conf.js','rfiwu':_0x53a417(0xc0),'vCDvd':function(_0x466d4a,_0x489b71){return _0x466d4a(_0x489b71);},'vBKdZ':'Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file'};let _0x57208b=null,_0x535102={};const _0x335c8c=_0x2187e1[_0x53a417(0xb7)](_0x28d289=>_0x28d289===_0x53a417(0xe1));if(!helper['isUndefined'](_0x291351[_0x53a417(0xac)])&&fs[_0x53a417(0xad)](path[_0x53a417(0xab)](process['cwd'](),_0x291351[_0x53a417(0xac)])))_0x57208b=path[_0x53a417(0xab)](process[_0x53a417(0xc9)](),_0x291351['config']),_0x2187e1[_0x53a417(0xdc)](_0x335c8c,0x2);else{if(fs['existsSync'](path['join'](process[_0x53a417(0xc9)](),_0x1652c9[_0x53a417(0xba)])))_0x57208b=path[_0x53a417(0xab)](process[_0x53a417(0xc9)](),_0x1652c9[_0x53a417(0xba)]);else fs[_0x53a417(0xad)](path['join'](process[_0x53a417(0xc9)](),_0x1652c9[_0x53a417(0xce)]))&&(_0x57208b=path[_0x53a417(0xab)](process['cwd'](),_0x1652c9[_0x53a417(0xce)]));}return _0x57208b?(logger[_0x53a417(0xa6)](_0x53a417(0xe2)+_0x57208b),_0x535102=_0x1652c9[_0x53a417(0xe7)](require,_0x57208b)):logger['info'](_0x1652c9[_0x53a417(0xb3)]),_0x535102;},removeExistingEnvs=_0x16f54f=>{const _0x514180=a38_0x152db5,_0x394f45={};_0x394f45['OiSih']=function(_0x2051fa,_0x50842a){return _0x2051fa>_0x50842a;};const _0x561f4c=_0x394f45;let _0x332f1c=_0x16f54f[_0x514180(0xb7)](_0x50f8cb=>_0x50f8cb==='--env');_0x561f4c['OiSih'](_0x332f1c,-0x1)&&_0x16f54f['splice'](_0x332f1c,0x2),_0x332f1c=_0x16f54f['findIndex'](_0x5abc39=>_0x5abc39==='-e'),_0x561f4c['OiSih'](_0x332f1c,-0x1)&&_0x16f54f['splice'](_0x332f1c,0x2);};function a38_0x3552(_0x6bc7f3,_0x48e7ef){const _0x460f3a=a38_0x460f();return a38_0x3552=function(_0x3552b5,_0xf5feec){_0x3552b5=_0x3552b5-0xa4;let _0x2ad7f5=_0x460f3a[_0x3552b5];return _0x2ad7f5;},a38_0x3552(_0x6bc7f3,_0x48e7ef);}function run(_0x260809,_0xbccd6c,_0x236ed4){const _0x2a8873=a38_0x152db5,_0x198db7={'TzknZ':_0x2a8873(0xcd),'PxSyj':function(_0x3019c2,_0x3a9464){return _0x3019c2+_0x3a9464;},'wotle':_0x2a8873(0xc5),'gNkvm':function(_0x2f3d7d,_0x56fc05,_0x377e26){return _0x2f3d7d(_0x56fc05,_0x377e26);},'GUgco':_0x2a8873(0xd6),'HxCEd':_0x2a8873(0xcf),'YJVVE':function(_0x50c50c,_0x4c5963){return _0x50c50c===_0x4c5963;},'sdVvr':'nightwatch-browserstack.json','fnXLe':function(_0x1c88ef,_0x253303){return _0x1c88ef(_0x253303);},'Cnvcz':function(_0x2ca1a2,_0x59b670,_0x1a79b1,_0x72280a){return _0x2ca1a2(_0x59b670,_0x1a79b1,_0x72280a);},'DUAmo':_0x2a8873(0xe3),'TfVze':_0x2a8873(0xe1),'qRCHT':'--env','BTqBR':_0x2a8873(0xe4),'cSJtP':_0x2a8873(0xc4)};if(!_0x236ed4[_0x2a8873(0xac)])return;const _0x53cab2=_0x198db7[_0x2a8873(0xde)](getUserNightwatchConfigs,_0x260809,_0xbccd6c),_0x1143a8={};_0x1143a8[_0x2a8873(0xb9)]=![];const _0x56fd38={};_0x56fd38[_0x2a8873(0xb2)]=_0x198db7[_0x2a8873(0xb0)],_0x56fd38['port']=0x1bb;const _0x15d97a={};_0x15d97a[_0x2a8873(0xdf)]=_0x1143a8,_0x15d97a[_0x2a8873(0xd8)]=_0x56fd38;const _0x53c328=_0x15d97a;logger[_0x2a8873(0xa6)](_0x198db7[_0x2a8873(0xd5)]);const _0xed45f7={..._0x53cab2},_0x1fa9ea=_0xed45f7,_0xd5d7dc=helper['useW3C'](_0x236ed4['config']),_0x41143a=[];_0x236ed4[_0x2a8873(0xac)]['platforms'][_0x2a8873(0xb5)]((_0x304562,_0x95d21d)=>{const _0x3f1741=_0x2a8873;_0xd5d7dc?_0x41143a[_0x3f1741(0xb1)](helper[_0x3f1741(0xbc)](_0x236ed4['config'],_0x198db7['TzknZ'],_0x95d21d)):_0x41143a[_0x3f1741(0xb1)](helper['modifyBrowserStackCaps'](_0x236ed4[_0x3f1741(0xac)],_0x198db7[_0x3f1741(0xda)],_0x95d21d));});const _0xdfac6d={},_0x2d5726=[];_0x260809[_0x2a8873(0xdb)]=_0x260809[_0x2a8873(0xdb)]||_0x260809['e'];const _0x1774e8=_0x260809[_0x2a8873(0xdb)]?_0x260809[_0x2a8873(0xdb)]['trim']()[_0x2a8873(0xe6)](',')['map'](_0xbee284=>_0xbee284['trim']())[_0x2a8873(0xc3)](_0x38cf20=>_0x38cf20!==''):[''];_0x198db7[_0x2a8873(0xd0)](_0x1774e8[_0x2a8873(0xa4)],0x0)&&_0x1774e8[_0x2a8873(0xb1)]('');_0x1774e8[_0x2a8873(0xb5)](_0x47bb01=>{_0x41143a['forEach'](_0x4a94ef=>{const _0x16f40d=a38_0x3552;let _0x1eb5e8=_0x198db7[_0x16f40d(0xa8)](helper[_0x16f40d(0xa7)](_0x4a94ef,'_'),'_'+Date[_0x16f40d(0xb4)]());_0x47bb01&&(_0x1eb5e8+='_'+_0x47bb01);if(_0x47bb01&&(!_0x53cab2[_0x198db7[_0x16f40d(0xcb)]]||!_0x53cab2[_0x198db7[_0x16f40d(0xcb)]][_0x47bb01]))return;const _0x61eea4={..._0x53c328};_0x61eea4[_0x16f40d(0xa5)]=_0x4a94ef;const _0x258397=_0x61eea4;_0xdfac6d[_0x1eb5e8]=_0x47bb01?helper[_0x16f40d(0xc7)](_0x53cab2[_0x198db7[_0x16f40d(0xcb)]][_0x47bb01],_0x258397):_0x258397,_0x2d5726['push'](_0x1eb5e8);});});!_0x1fa9ea[_0x2a8873(0xc5)]&&(_0x1fa9ea[_0x2a8873(0xc5)]={});_0x1fa9ea['test_settings']={..._0x1fa9ea[_0x2a8873(0xc5)],..._0xdfac6d};const _0x579793=path[_0x2a8873(0xab)](__dirname,_0x198db7['sdVvr']);fs[_0x2a8873(0xb8)](_0x579793,JSON[_0x2a8873(0xaf)](_0x1fa9ea)),_0x198db7['fnXLe'](removeExistingEnvs,_0xbccd6c);const _0x46c807=_0x198db7[_0x2a8873(0xbd)](spawn,/^win/['test'](process[_0x2a8873(0xbb)])?_0x198db7[_0x2a8873(0xcc)]:_0x198db7['TzknZ'],[_0x198db7[_0x2a8873(0xae)],_0x579793,..._0xbccd6c[_0x2a8873(0xe0)](0x1),_0x198db7['qRCHT'],_0x2d5726['join'](',')],{'stdio':_0x198db7[_0x2a8873(0xdd)]});_0x46c807['on'](_0x198db7[_0x2a8873(0xca)],async _0x861111=>{const _0x57fef1=_0x2a8873;logger[_0x57fef1(0xc6)](_0x57fef1(0xd7)+_0x861111),logger[_0x57fef1(0xa6)](_0x57fef1(0xc8)+_0x579793),fs['unlinkSync'](_0x579793);});}module[a38_0x152db5(0xbe)]=run;