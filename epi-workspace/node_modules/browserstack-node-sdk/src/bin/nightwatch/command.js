#!/usr/bin/env node
'use strict';const a38_0x1b5ad1=a38_0x5a87;(function(_0x5060fb,_0x5e44d1){const _0x36c1be=a38_0x5a87,_0x53447e=_0x5060fb();while(!![]){try{const _0x4f5630=-parseInt(_0x36c1be(0xa7))/0x1*(parseInt(_0x36c1be(0x88))/0x2)+parseInt(_0x36c1be(0xc5))/0x3*(-parseInt(_0x36c1be(0xb7))/0x4)+-parseInt(_0x36c1be(0x8a))/0x5*(-parseInt(_0x36c1be(0x8b))/0x6)+-parseInt(_0x36c1be(0x9f))/0x7*(-parseInt(_0x36c1be(0xd5))/0x8)+-parseInt(_0x36c1be(0xaa))/0x9+-parseInt(_0x36c1be(0xc3))/0xa+parseInt(_0x36c1be(0xa1))/0xb*(parseInt(_0x36c1be(0xa0))/0xc);if(_0x4f5630===_0x5e44d1)break;else _0x53447e['push'](_0x53447e['shift']());}catch(_0x294d7b){_0x53447e['push'](_0x53447e['shift']());}}}(a38_0x499e,0xb7d5a));function a38_0x5a87(_0x2f061e,_0x204ac5){const _0x499e43=a38_0x499e();return a38_0x5a87=function(_0x5a87ea,_0x22eac5){_0x5a87ea=_0x5a87ea-0x87;let _0x27284a=_0x499e43[_0x5a87ea];return _0x27284a;},a38_0x5a87(_0x2f061e,_0x204ac5);}function a38_0x499e(){const _0x3fb583=['winstonLogger','stringify','MUqOc','hub.browserstack.com','split','test_settings','4cSRZqL','test','child\x20process\x20exited\x20with\x20code\x20','cwd','now','path','Qnmoy','inherit','close','xbNcb','getPlatformName','DhTcO','11873780qeukmT','atOrx','402228YIIdKk','exports','platform','push','--env','OYkFr','uAiJY','host','nightwatch.conf.js','govMA','useW3C','findIndex','NqTMP','join','../utils/constants','splice','16712AAObPW','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','info','../../helpers/BrowserStackSetup','config','existsSync','2615516TvTsEY','--config','5fbVtUH','7260222kAbThT','csbeX','writeFileSync','length','OIKZX','nightwatch.cmd','env','../../helpers/helper','forEach','HPJwE','unlinkSync','debug','trim','webdriver','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','mergeDeep','platforms','nightwatch','SFtOy','CnYqT','1890RJxJoc','2896788qeeTPI','121xSTZku','wSZzn','WOVrV','slice','yhQOp','selenium','1CFZJoc','iOGiF','dJyXy','9425322RMNevC','map','modifyBrowserStackCaps','GgbKI','start_process','caQvc','child_process'];a38_0x499e=function(){return _0x3fb583;};return a38_0x499e();}const fs=require('fs'),path=require(a38_0x1b5ad1(0xbc)),{spawn}=require(a38_0x1b5ad1(0xb0)),logger=require('../../helpers/logger')[a38_0x1b5ad1(0xb1)],{default:BrowserStackSetup}=require(a38_0x1b5ad1(0xd8)),helper=require(a38_0x1b5ad1(0x92)),constants=require(a38_0x1b5ad1(0xd3)),getUserNightwatchConfigs=(_0x80407b,_0x1bd5fa)=>{const _0x4745a8=a38_0x1b5ad1,_0x3e9fc3={'Qnmoy':_0x4745a8(0xcd),'DhTcO':'nightwatch.json','xbNcb':function(_0x38a3ad,_0x4f8ddd){return _0x38a3ad(_0x4f8ddd);},'HPJwE':_0x4745a8(0x99)};let _0x1eb354=null,_0x51879b={};const _0x33dde9=_0x1bd5fa[_0x4745a8(0xd0)](_0x1cdc9c=>_0x1cdc9c===_0x4745a8(0x89));if(!helper['isUndefined'](_0x80407b[_0x4745a8(0xd9)])&&fs[_0x4745a8(0x87)](path['join'](process['cwd'](),_0x80407b[_0x4745a8(0xd9)])))_0x1eb354=path[_0x4745a8(0xd2)](process[_0x4745a8(0xba)](),_0x80407b[_0x4745a8(0xd9)]),_0x1bd5fa['splice'](_0x33dde9,0x2);else{if(fs['existsSync'](path[_0x4745a8(0xd2)](process[_0x4745a8(0xba)](),_0x3e9fc3[_0x4745a8(0xbd)])))_0x1eb354=path[_0x4745a8(0xd2)](process[_0x4745a8(0xba)](),_0x3e9fc3['Qnmoy']);else fs[_0x4745a8(0x87)](path[_0x4745a8(0xd2)](process[_0x4745a8(0xba)](),_0x3e9fc3[_0x4745a8(0xc2)]))&&(_0x1eb354=path[_0x4745a8(0xd2)](process['cwd'](),_0x3e9fc3['DhTcO']));}return _0x1eb354?(logger[_0x4745a8(0xd7)]('Getting\x20your\x20nightwatch\x20configs\x20from\x20'+_0x1eb354),_0x51879b=_0x3e9fc3[_0x4745a8(0xc0)](require,_0x1eb354)):logger['info'](_0x3e9fc3[_0x4745a8(0x94)]),_0x51879b;},removeExistingEnvs=_0x21aa88=>{const _0x3bc81c=a38_0x1b5ad1,_0x3cf58e={};_0x3cf58e['cBNSJ']=function(_0x10a43e,_0x2940cc){return _0x10a43e>_0x2940cc;},_0x3cf58e[_0x3bc81c(0xa5)]=function(_0x400d88,_0x4349a9){return _0x400d88>_0x4349a9;};const _0x504269=_0x3cf58e;let _0x227251=_0x21aa88[_0x3bc81c(0xd0)](_0x38ce7d=>_0x38ce7d===_0x3bc81c(0xc9));_0x504269['cBNSJ'](_0x227251,-0x1)&&_0x21aa88['splice'](_0x227251,0x2),_0x227251=_0x21aa88[_0x3bc81c(0xd0)](_0x5b2906=>_0x5b2906==='-e'),_0x504269[_0x3bc81c(0xa5)](_0x227251,-0x1)&&_0x21aa88[_0x3bc81c(0xd4)](_0x227251,0x2);};function run(_0x25e03e,_0x32360d,_0x109f25){const _0x5eadde=a38_0x1b5ad1,_0xd0df09={'NqTMP':_0x5eadde(0x9c),'uAiJY':function(_0x217775,_0x450c8a){return _0x217775+_0x450c8a;},'OIKZX':_0x5eadde(0xb6),'WOVrV':function(_0xabf07c,_0x5e3d5e,_0x4d60c4){return _0xabf07c(_0x5e3d5e,_0x4d60c4);},'dJyXy':_0x5eadde(0xb4),'SFtOy':_0x5eadde(0xd6),'govMA':function(_0x3ccf07,_0x101f5a){return _0x3ccf07===_0x101f5a;},'mVGuY':'nightwatch-browserstack.json','csbeX':function(_0x245b0d,_0x4a9606){return _0x245b0d(_0x4a9606);},'atOrx':function(_0x3d33d5,_0x162b76,_0x3979f0,_0x14adc6){return _0x3d33d5(_0x162b76,_0x3979f0,_0x14adc6);},'GgbKI':_0x5eadde(0x90),'OYkFr':_0x5eadde(0x89),'CnYqT':_0x5eadde(0xc9),'iOGiF':_0x5eadde(0xbe),'MUqOc':_0x5eadde(0xbf)};if(!_0x109f25[_0x5eadde(0xd9)])return;const _0x3f30cf=_0xd0df09[_0x5eadde(0xa3)](getUserNightwatchConfigs,_0x25e03e,_0x32360d),_0x51b6a4={};_0x51b6a4[_0x5eadde(0xae)]=![];const _0x5c6278={};_0x5c6278[_0x5eadde(0xcc)]=_0xd0df09[_0x5eadde(0xa9)],_0x5c6278['port']=0x1bb;const _0x44c968={};_0x44c968[_0x5eadde(0x98)]=_0x51b6a4,_0x44c968[_0x5eadde(0xa6)]=_0x5c6278;const _0x5b5575=_0x44c968;logger[_0x5eadde(0xd7)](_0xd0df09[_0x5eadde(0x9d)]);const _0x481ef={..._0x3f30cf},_0x86d273=_0x481ef,_0x57ee02=helper[_0x5eadde(0xcf)](_0x109f25['config']),_0x4148d7=[];_0x109f25[_0x5eadde(0xd9)][_0x5eadde(0x9b)][_0x5eadde(0x93)]((_0x130600,_0x5237ea)=>{const _0x261761=_0x5eadde;_0x57ee02?_0x4148d7[_0x261761(0xc8)](helper['modifyBrowserStackW3CCaps'](_0x109f25[_0x261761(0xd9)],_0xd0df09[_0x261761(0xd1)],_0x5237ea)):_0x4148d7[_0x261761(0xc8)](helper[_0x261761(0xac)](_0x109f25[_0x261761(0xd9)],_0xd0df09[_0x261761(0xd1)],_0x5237ea));});const _0x5591af={},_0x3c4a4a=[];_0x25e03e[_0x5eadde(0x91)]=_0x25e03e[_0x5eadde(0x91)]||_0x25e03e['e'];const _0x39f68c=_0x25e03e[_0x5eadde(0x91)]?_0x25e03e['env']['trim']()[_0x5eadde(0xb5)](',')[_0x5eadde(0xab)](_0x534adb=>_0x534adb[_0x5eadde(0x97)]())['filter'](_0x47c49f=>_0x47c49f!==''):[''];_0xd0df09[_0x5eadde(0xce)](_0x39f68c[_0x5eadde(0x8e)],0x0)&&_0x39f68c[_0x5eadde(0xc8)]('');_0x39f68c[_0x5eadde(0x93)](_0x49e547=>{const _0x3074f7=_0x5eadde,_0x34befe={'caQvc':function(_0x2de553,_0x1c697b){const _0x86364d=a38_0x5a87;return _0xd0df09[_0x86364d(0xcb)](_0x2de553,_0x1c697b);},'wSZzn':_0xd0df09[_0x3074f7(0x8f)]};_0x4148d7[_0x3074f7(0x93)](_0x47847f=>{const _0x3fd449=_0x3074f7;let _0xf08d6b=_0x34befe[_0x3fd449(0xaf)](helper[_0x3fd449(0xc1)](_0x47847f,'_'),'_'+Date[_0x3fd449(0xbb)]());_0x49e547&&(_0xf08d6b+='_'+_0x49e547);if(_0x49e547&&(!_0x3f30cf[_0x34befe[_0x3fd449(0xa2)]]||!_0x3f30cf[_0x34befe['wSZzn']][_0x49e547]))return;const _0x5a3c0c={..._0x5b5575};_0x5a3c0c['desiredCapabilities']=_0x47847f;const _0x5cc042=_0x5a3c0c;_0x5591af[_0xf08d6b]=_0x49e547?helper[_0x3fd449(0x9a)](_0x3f30cf[_0x34befe[_0x3fd449(0xa2)]][_0x49e547],_0x5cc042):_0x5cc042,_0x3c4a4a[_0x3fd449(0xc8)](_0xf08d6b);});});!_0x86d273[_0x5eadde(0xb6)]&&(_0x86d273[_0x5eadde(0xb6)]={});_0x86d273[_0x5eadde(0xb6)]={..._0x86d273[_0x5eadde(0xb6)],..._0x5591af};const _0x55584d=path['join'](__dirname,_0xd0df09['mVGuY']);fs[_0x5eadde(0x8d)](_0x55584d,JSON[_0x5eadde(0xb2)](_0x86d273)),_0xd0df09[_0x5eadde(0x8c)](removeExistingEnvs,_0x32360d);const _0x42a6a2=_0xd0df09[_0x5eadde(0xc4)](spawn,/^win/[_0x5eadde(0xb8)](process[_0x5eadde(0xc7)])?_0xd0df09[_0x5eadde(0xad)]:_0xd0df09[_0x5eadde(0xd1)],[_0xd0df09[_0x5eadde(0xca)],_0x55584d,..._0x32360d[_0x5eadde(0xa4)](0x1),_0xd0df09[_0x5eadde(0x9e)],_0x3c4a4a[_0x5eadde(0xd2)](',')],{'stdio':_0xd0df09[_0x5eadde(0xa8)]});_0x42a6a2['on'](_0xd0df09[_0x5eadde(0xb3)],async _0x4b5a78=>{const _0x380d74=_0x5eadde;logger[_0x380d74(0x96)](_0x380d74(0xb9)+_0x4b5a78),logger[_0x380d74(0xd7)]('Deleting\x20'+_0x55584d),fs[_0x380d74(0x95)](_0x55584d);});}module[a38_0x1b5ad1(0xc6)]=run;