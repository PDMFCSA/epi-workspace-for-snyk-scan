#!/usr/bin/env node
'use strict';const a37_0x3d240d=a37_0x1db3;function a37_0x1db3(_0x42d179,_0x210661){const _0x15e625=a37_0x15e6();return a37_0x1db3=function(_0x1db349,_0x2c08eb){_0x1db349=_0x1db349-0x142;let _0x1b727c=_0x15e625[_0x1db349];return _0x1b727c;},a37_0x1db3(_0x42d179,_0x210661);}(function(_0x3e4d19,_0x1ebd4d){const _0x44e431=a37_0x1db3,_0x55b3c6=_0x3e4d19();while(!![]){try{const _0x5446da=-parseInt(_0x44e431(0x16b))/0x1*(-parseInt(_0x44e431(0x161))/0x2)+-parseInt(_0x44e431(0x14a))/0x3+parseInt(_0x44e431(0x14d))/0x4+-parseInt(_0x44e431(0x15c))/0x5+parseInt(_0x44e431(0x17c))/0x6+-parseInt(_0x44e431(0x177))/0x7*(parseInt(_0x44e431(0x165))/0x8)+parseInt(_0x44e431(0x16e))/0x9;if(_0x5446da===_0x1ebd4d)break;else _0x55b3c6['push'](_0x55b3c6['shift']());}catch(_0x4bb071){_0x55b3c6['push'](_0x55b3c6['shift']());}}}(a37_0x15e6,0xc8d0b));function a37_0x15e6(){const _0x49163b=['4814268bYTAYL','platform','Deleting\x20','2218424goPVYA','existsSync','NXvDR','DkSdL','debug','length','writeFileSync','forEach','map','nightwatch.cmd','RnlSh','config','test_settings','GFMWv','webdriver','4043430KWjbzF','cwd','isUndefined','trim','splice','1733108sFSqdx','aYmGj','useW3C','../../helpers/helper','24WnBbhc','unlinkSync','nightwatch','inherit','UBRhk','KYRuk','1aQzeyj','VOhkW','--config','21497805hOjeKP','push','nightwatch.conf.js','port','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','../utils/constants','exports','--env','2295783yFNYbl','donKv','Xlrbv','filter','slice','2460498nBVVFL','winstonLogger','findIndex','info','qPkTQ','Hyimh','host','fTFQg','join','env','Getting\x20your\x20nightwatch\x20configs\x20from\x20','UjmGS','child\x20process\x20exited\x20with\x20code\x20','kAbya','nightwatch.json','child_process','KvEZv','JwYTA','modifyBrowserStackW3CCaps','close','start_process','gRrFz','XkaIx','../../helpers/logger','nightwatch-browserstack.json','JvJkC','dpuAQ','selenium'];a37_0x15e6=function(){return _0x49163b;};return a37_0x15e6();}const fs=require('fs'),path=require('path'),{spawn}=require(a37_0x3d240d(0x18b)),logger=require(a37_0x3d240d(0x145))[a37_0x3d240d(0x17d)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a37_0x3d240d(0x164)),constants=require(a37_0x3d240d(0x174)),getUserNightwatchConfigs=(_0x2fb8a7,_0x35a6f9)=>{const _0x383e56=a37_0x3d240d,_0x3c9cb3={'Xlrbv':_0x383e56(0x170),'hdXfR':_0x383e56(0x18a),'donKv':function(_0x4173b7,_0x291fb1){return _0x4173b7(_0x291fb1);},'gRrFz':_0x383e56(0x173)};let _0x348d19=null,_0x315e66={};const _0x1cf247=_0x35a6f9[_0x383e56(0x17e)](_0x55550b=>_0x55550b===_0x383e56(0x16d));if(!helper[_0x383e56(0x15e)](_0x2fb8a7['config'])&&fs[_0x383e56(0x14e)](path[_0x383e56(0x184)](process['cwd'](),_0x2fb8a7['config'])))_0x348d19=path[_0x383e56(0x184)](process['cwd'](),_0x2fb8a7[_0x383e56(0x158)]),_0x35a6f9[_0x383e56(0x160)](_0x1cf247,0x2);else{if(fs[_0x383e56(0x14e)](path[_0x383e56(0x184)](process[_0x383e56(0x15d)](),_0x3c9cb3[_0x383e56(0x179)])))_0x348d19=path[_0x383e56(0x184)](process['cwd'](),_0x3c9cb3[_0x383e56(0x179)]);else fs[_0x383e56(0x14e)](path[_0x383e56(0x184)](process[_0x383e56(0x15d)](),_0x3c9cb3['hdXfR']))&&(_0x348d19=path['join'](process[_0x383e56(0x15d)](),_0x3c9cb3['hdXfR']));}return _0x348d19?(logger['info'](_0x383e56(0x186)+_0x348d19),_0x315e66=_0x3c9cb3[_0x383e56(0x178)](require,_0x348d19)):logger[_0x383e56(0x17f)](_0x3c9cb3[_0x383e56(0x143)]),_0x315e66;},removeExistingEnvs=_0x18ec73=>{const _0x107b68=a37_0x3d240d,_0x3330ae={};_0x3330ae[_0x107b68(0x181)]=function(_0xa073af,_0x54441c){return _0xa073af>_0x54441c;},_0x3330ae[_0x107b68(0x183)]=function(_0xe70bc2,_0x541970){return _0xe70bc2>_0x541970;};const _0x5a2c54=_0x3330ae;let _0x46ea12=_0x18ec73[_0x107b68(0x17e)](_0x12b573=>_0x12b573===_0x107b68(0x176));_0x5a2c54[_0x107b68(0x181)](_0x46ea12,-0x1)&&_0x18ec73[_0x107b68(0x160)](_0x46ea12,0x2),_0x46ea12=_0x18ec73[_0x107b68(0x17e)](_0xeba56=>_0xeba56==='-e'),_0x5a2c54[_0x107b68(0x183)](_0x46ea12,-0x1)&&_0x18ec73[_0x107b68(0x160)](_0x46ea12,0x2);};function run(_0x262151,_0x32f2e8,_0x1d7a1e){const _0x5d3a1b=a37_0x3d240d,_0x3bc6cb={'UjmGS':_0x5d3a1b(0x167),'XkaIx':function(_0x35c2b8,_0x31ff5a){return _0x35c2b8+_0x31ff5a;},'aYmGj':'test_settings','GFMWv':function(_0x326416,_0x1e5e5c,_0x40e80e){return _0x326416(_0x1e5e5c,_0x40e80e);},'RnlSh':'hub.browserstack.com','dpuAQ':_0x5d3a1b(0x172),'JvJkC':function(_0x32fbc7,_0x409d7a){return _0x32fbc7===_0x409d7a;},'JwYTA':_0x5d3a1b(0x146),'qPkTQ':function(_0x79d12a,_0x3bc5c7){return _0x79d12a(_0x3bc5c7);},'DkSdL':function(_0x200dee,_0x6c6bc3,_0x34cc33,_0x1b3038){return _0x200dee(_0x6c6bc3,_0x34cc33,_0x1b3038);},'UBRhk':_0x5d3a1b(0x156),'VOhkW':_0x5d3a1b(0x16d),'KzqDk':_0x5d3a1b(0x176),'NXvDR':_0x5d3a1b(0x168),'KvEZv':_0x5d3a1b(0x18f)};if(!_0x1d7a1e['config'])return;const _0x3a919c=_0x3bc6cb[_0x5d3a1b(0x15a)](getUserNightwatchConfigs,_0x262151,_0x32f2e8),_0x125831={};_0x125831[_0x5d3a1b(0x142)]=![];const _0x461da1={};_0x461da1[_0x5d3a1b(0x182)]=_0x3bc6cb[_0x5d3a1b(0x157)],_0x461da1[_0x5d3a1b(0x171)]=0x1bb;const _0x13a1e4={};_0x13a1e4[_0x5d3a1b(0x15b)]=_0x125831,_0x13a1e4[_0x5d3a1b(0x149)]=_0x461da1;const _0x49de24=_0x13a1e4;logger[_0x5d3a1b(0x17f)](_0x3bc6cb[_0x5d3a1b(0x148)]);const _0x31fa7d={..._0x3a919c},_0x3682b7=_0x31fa7d,_0x3c4f4c=helper[_0x5d3a1b(0x163)](_0x1d7a1e[_0x5d3a1b(0x158)]),_0x18a824=[];_0x1d7a1e['config']['platforms'][_0x5d3a1b(0x154)]((_0x3437b2,_0x4777f6)=>{const _0x150c84=_0x5d3a1b;_0x3c4f4c?_0x18a824[_0x150c84(0x16f)](helper[_0x150c84(0x18e)](_0x1d7a1e[_0x150c84(0x158)],_0x3bc6cb['UjmGS'],_0x4777f6)):_0x18a824['push'](helper['modifyBrowserStackCaps'](_0x1d7a1e[_0x150c84(0x158)],_0x3bc6cb[_0x150c84(0x187)],_0x4777f6));});const _0x4d431d={},_0x480444=[];_0x262151[_0x5d3a1b(0x185)]=_0x262151['env']||_0x262151['e'];const _0x2db3a1=_0x262151[_0x5d3a1b(0x185)]?_0x262151[_0x5d3a1b(0x185)][_0x5d3a1b(0x15f)]()['split'](',')[_0x5d3a1b(0x155)](_0x1aca7f=>_0x1aca7f[_0x5d3a1b(0x15f)]())[_0x5d3a1b(0x17a)](_0xf3606f=>_0xf3606f!==''):[''];_0x3bc6cb[_0x5d3a1b(0x147)](_0x2db3a1[_0x5d3a1b(0x152)],0x0)&&_0x2db3a1[_0x5d3a1b(0x16f)]('');_0x2db3a1[_0x5d3a1b(0x154)](_0xdfd65d=>{const _0x375618=_0x5d3a1b,_0x38233f={'KYRuk':function(_0x599b75,_0x10d80f){const _0x637cf=a37_0x1db3;return _0x3bc6cb[_0x637cf(0x144)](_0x599b75,_0x10d80f);},'kAbya':_0x3bc6cb[_0x375618(0x162)]};_0x18a824[_0x375618(0x154)](_0x198a75=>{const _0x5c6e6f=_0x375618;let _0x572358=_0x38233f[_0x5c6e6f(0x16a)](helper['getPlatformName'](_0x198a75,'_'),'_'+Date['now']());_0xdfd65d&&(_0x572358+='_'+_0xdfd65d);if(_0xdfd65d&&(!_0x3a919c[_0x38233f['kAbya']]||!_0x3a919c[_0x38233f[_0x5c6e6f(0x189)]][_0xdfd65d]))return;const _0xd58fbf={..._0x49de24};_0xd58fbf['desiredCapabilities']=_0x198a75;const _0x36f83d=_0xd58fbf;_0x4d431d[_0x572358]=_0xdfd65d?helper['mergeDeep'](_0x3a919c[_0x38233f['kAbya']][_0xdfd65d],_0x36f83d):_0x36f83d,_0x480444[_0x5c6e6f(0x16f)](_0x572358);});});!_0x3682b7[_0x5d3a1b(0x159)]&&(_0x3682b7[_0x5d3a1b(0x159)]={});_0x3682b7[_0x5d3a1b(0x159)]={..._0x3682b7['test_settings'],..._0x4d431d};const _0x3b0c1d=path[_0x5d3a1b(0x184)](__dirname,_0x3bc6cb[_0x5d3a1b(0x18d)]);fs[_0x5d3a1b(0x153)](_0x3b0c1d,JSON['stringify'](_0x3682b7)),_0x3bc6cb[_0x5d3a1b(0x180)](removeExistingEnvs,_0x32f2e8);const _0x4e0320=_0x3bc6cb[_0x5d3a1b(0x150)](spawn,/^win/['test'](process[_0x5d3a1b(0x14b)])?_0x3bc6cb[_0x5d3a1b(0x169)]:_0x3bc6cb['UjmGS'],[_0x3bc6cb[_0x5d3a1b(0x16c)],_0x3b0c1d,..._0x32f2e8[_0x5d3a1b(0x17b)](0x1),_0x3bc6cb['KzqDk'],_0x480444[_0x5d3a1b(0x184)](',')],{'stdio':_0x3bc6cb[_0x5d3a1b(0x14f)]});_0x4e0320['on'](_0x3bc6cb[_0x5d3a1b(0x18c)],async _0x490448=>{const _0x3200e1=_0x5d3a1b;logger[_0x3200e1(0x151)](_0x3200e1(0x188)+_0x490448),logger[_0x3200e1(0x17f)](_0x3200e1(0x14c)+_0x3b0c1d),fs[_0x3200e1(0x166)](_0x3b0c1d);});}module[a37_0x3d240d(0x175)]=run;