#!/usr/bin/env node
'use strict';const a33_0x1dc1b7=a33_0x5263;function a33_0x5263(_0x4d811e,_0x2c7b31){const _0x189c2b=a33_0x189c();return a33_0x5263=function(_0x5263bf,_0x31eba3){_0x5263bf=_0x5263bf-0x8b;let _0x5644f2=_0x189c2b[_0x5263bf];return _0x5644f2;},a33_0x5263(_0x4d811e,_0x2c7b31);}(function(_0x28ae09,_0x2f1800){const _0x1764e2=a33_0x5263,_0x45a82e=_0x28ae09();while(!![]){try{const _0x4290d3=-parseInt(_0x1764e2(0xc1))/0x1+-parseInt(_0x1764e2(0x9f))/0x2*(parseInt(_0x1764e2(0xcb))/0x3)+parseInt(_0x1764e2(0xa9))/0x4+parseInt(_0x1764e2(0xcd))/0x5*(parseInt(_0x1764e2(0xbd))/0x6)+-parseInt(_0x1764e2(0xd1))/0x7+-parseInt(_0x1764e2(0xad))/0x8*(-parseInt(_0x1764e2(0xca))/0x9)+-parseInt(_0x1764e2(0xb9))/0xa*(-parseInt(_0x1764e2(0x8c))/0xb);if(_0x4290d3===_0x2f1800)break;else _0x45a82e['push'](_0x45a82e['shift']());}catch(_0x235be0){_0x45a82e['push'](_0x45a82e['shift']());}}}(a33_0x189c,0xdbf45));function a33_0x189c(){const _0xb331fd=['unlinkSync','../utils/constants','KnntT','config','filter','length','writeFileSync','Getting\x20your\x20nightwatch\x20configs\x20from\x20','GoVOg','EwGXU','Ewauh','mMlTR','TFzju','test','35736UPbuPY','YHufW','forEach','../../helpers/logger','UIwpb','hub.browserstack.com','winstonLogger','XmHSD','nightwatch.conf.js','debug','1718848EUIOAX','../../helpers/helper','DnElW','EUBEl','16648qEYiQL','test_settings','nightwatch','nightwatch-browserstack.json','port','info','LGotB','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','slice','SyFFZ','UpIpP','stringify','10rgpBgS','nightwatch.cmd','useW3C','cwd','206994bsFgjg','start_process','ECFFi','--env','337354aejkft','host','map','selenium','close','NINnP','xolYq','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','inherit','585AybxmM','147mOaaeB','--config','80BlqbHv','findIndex','split','join','1035272XJYPUV','splice','env','RjUuf','12592294eagXBl','platform','existsSync','now','QlxrK'];a33_0x189c=function(){return _0xb331fd;};return a33_0x189c();}const fs=require('fs'),path=require('path'),{spawn}=require('child_process'),logger=require(a33_0x1dc1b7(0xa2))[a33_0x1dc1b7(0xa5)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a33_0x1dc1b7(0xaa)),constants=require(a33_0x1dc1b7(0x92)),getUserNightwatchConfigs=(_0x3a0763,_0x205ae8)=>{const _0x325881=a33_0x1dc1b7,_0x21f1b8={'RjUuf':_0x325881(0xa7),'QlxrK':'nightwatch.json','TFzju':function(_0x583ad3,_0x3b8b7f){return _0x583ad3(_0x3b8b7f);},'blQmJ':_0x325881(0xc8)};let _0x1ac97e=null,_0x222503={};const _0x187028=_0x205ae8[_0x325881(0xce)](_0x512277=>_0x512277===_0x325881(0xcc));if(!helper['isUndefined'](_0x3a0763['config'])&&fs[_0x325881(0x8e)](path[_0x325881(0xd0)](process[_0x325881(0xbc)](),_0x3a0763[_0x325881(0x94)])))_0x1ac97e=path[_0x325881(0xd0)](process[_0x325881(0xbc)](),_0x3a0763[_0x325881(0x94)]),_0x205ae8['splice'](_0x187028,0x2);else{if(fs['existsSync'](path[_0x325881(0xd0)](process[_0x325881(0xbc)](),_0x21f1b8['RjUuf'])))_0x1ac97e=path[_0x325881(0xd0)](process['cwd'](),_0x21f1b8[_0x325881(0x8b)]);else fs[_0x325881(0x8e)](path[_0x325881(0xd0)](process['cwd'](),_0x21f1b8['QlxrK']))&&(_0x1ac97e=path['join'](process[_0x325881(0xbc)](),_0x21f1b8[_0x325881(0x90)]));}return _0x1ac97e?(logger[_0x325881(0xb2)](_0x325881(0x98)+_0x1ac97e),_0x222503=_0x21f1b8[_0x325881(0x9d)](require,_0x1ac97e)):logger[_0x325881(0xb2)](_0x21f1b8['blQmJ']),_0x222503;},removeExistingEnvs=_0x191869=>{const _0x2e7b1e=a33_0x1dc1b7,_0x2f4e6a={};_0x2f4e6a[_0x2e7b1e(0xa3)]=function(_0x38c196,_0x378c60){return _0x38c196>_0x378c60;},_0x2f4e6a[_0x2e7b1e(0xbf)]=function(_0x51b91a,_0x14d8a7){return _0x51b91a>_0x14d8a7;};const _0x4805fc=_0x2f4e6a;let _0x3132a5=_0x191869[_0x2e7b1e(0xce)](_0x4eb5ce=>_0x4eb5ce===_0x2e7b1e(0xc0));_0x4805fc[_0x2e7b1e(0xa3)](_0x3132a5,-0x1)&&_0x191869[_0x2e7b1e(0xd2)](_0x3132a5,0x2),_0x3132a5=_0x191869[_0x2e7b1e(0xce)](_0x27aad6=>_0x27aad6==='-e'),_0x4805fc[_0x2e7b1e(0xbf)](_0x3132a5,-0x1)&&_0x191869[_0x2e7b1e(0xd2)](_0x3132a5,0x2);};function run(_0x41dc18,_0x21d38,_0x1bfdb5){const _0x135bd0=a33_0x1dc1b7,_0x168576={'SyFFZ':_0x135bd0(0xaf),'xolYq':function(_0x344796,_0x608c9f){return _0x344796+_0x608c9f;},'YHufW':_0x135bd0(0xae),'UpIpP':function(_0x5db435,_0x23a101,_0x1f756c){return _0x5db435(_0x23a101,_0x1f756c);},'GoVOg':_0x135bd0(0xa4),'EUBEl':_0x135bd0(0xb4),'LGotB':function(_0x411f06,_0x47aad7){return _0x411f06===_0x47aad7;},'NINnP':_0x135bd0(0xb0),'KnntT':function(_0x110ad6,_0x2f70c2){return _0x110ad6(_0x2f70c2);},'mMlTR':function(_0x498129,_0x195810,_0x4ea0f8,_0x59327d){return _0x498129(_0x195810,_0x4ea0f8,_0x59327d);},'GrXFe':_0x135bd0(0xba),'Ewauh':'--config','XmHSD':_0x135bd0(0xc0),'DnElW':_0x135bd0(0xc9),'EwGXU':_0x135bd0(0xc5)};if(!_0x1bfdb5[_0x135bd0(0x94)])return;const _0x381f51=_0x168576[_0x135bd0(0xb7)](getUserNightwatchConfigs,_0x41dc18,_0x21d38),_0x62fac7={};_0x62fac7[_0x135bd0(0xbe)]=![];const _0x5e09fa={};_0x5e09fa[_0x135bd0(0xc2)]=_0x168576[_0x135bd0(0x99)],_0x5e09fa[_0x135bd0(0xb1)]=0x1bb;const _0x4eef91={};_0x4eef91['webdriver']=_0x62fac7,_0x4eef91[_0x135bd0(0xc4)]=_0x5e09fa;const _0x41537d=_0x4eef91;logger[_0x135bd0(0xb2)](_0x168576[_0x135bd0(0xac)]);const _0x3dafe0={..._0x381f51},_0x4f2584=_0x3dafe0,_0x44249e=helper[_0x135bd0(0xbb)](_0x1bfdb5[_0x135bd0(0x94)]),_0x3bf80d=[];_0x1bfdb5[_0x135bd0(0x94)]['platforms'][_0x135bd0(0xa1)]((_0x4f9f25,_0x265993)=>{const _0x20b778=_0x135bd0;_0x44249e?_0x3bf80d['push'](helper['modifyBrowserStackW3CCaps'](_0x1bfdb5[_0x20b778(0x94)],_0x168576[_0x20b778(0xb6)],_0x265993)):_0x3bf80d['push'](helper['modifyBrowserStackCaps'](_0x1bfdb5[_0x20b778(0x94)],_0x168576[_0x20b778(0xb6)],_0x265993));});const _0x198889={},_0x27acbc=[];_0x41dc18[_0x135bd0(0xd3)]=_0x41dc18[_0x135bd0(0xd3)]||_0x41dc18['e'];const _0x34a96c=_0x41dc18[_0x135bd0(0xd3)]?_0x41dc18[_0x135bd0(0xd3)]['trim']()[_0x135bd0(0xcf)](',')[_0x135bd0(0xc3)](_0x47dd09=>_0x47dd09['trim']())[_0x135bd0(0x95)](_0x5a0612=>_0x5a0612!==''):[''];_0x168576[_0x135bd0(0xb3)](_0x34a96c[_0x135bd0(0x96)],0x0)&&_0x34a96c['push']('');_0x34a96c[_0x135bd0(0xa1)](_0x16eab7=>{_0x3bf80d['forEach'](_0x54842d=>{const _0x2c02d6=a33_0x5263;let _0x2e9319=_0x168576[_0x2c02d6(0xc7)](helper['getPlatformName'](_0x54842d,'_'),'_'+Date[_0x2c02d6(0x8f)]());_0x16eab7&&(_0x2e9319+='_'+_0x16eab7);if(_0x16eab7&&(!_0x381f51[_0x168576[_0x2c02d6(0xa0)]]||!_0x381f51[_0x168576['YHufW']][_0x16eab7]))return;const _0x2dc849={..._0x41537d};_0x2dc849['desiredCapabilities']=_0x54842d;const _0x17401a=_0x2dc849;_0x198889[_0x2e9319]=_0x16eab7?helper['mergeDeep'](_0x381f51[_0x168576[_0x2c02d6(0xa0)]][_0x16eab7],_0x17401a):_0x17401a,_0x27acbc['push'](_0x2e9319);});});!_0x4f2584[_0x135bd0(0xae)]&&(_0x4f2584[_0x135bd0(0xae)]={});_0x4f2584[_0x135bd0(0xae)]={..._0x4f2584[_0x135bd0(0xae)],..._0x198889};const _0x16080d=path[_0x135bd0(0xd0)](__dirname,_0x168576[_0x135bd0(0xc6)]);fs[_0x135bd0(0x97)](_0x16080d,JSON[_0x135bd0(0xb8)](_0x4f2584)),_0x168576[_0x135bd0(0x93)](removeExistingEnvs,_0x21d38);const _0x1fcfa4=_0x168576[_0x135bd0(0x9c)](spawn,/^win/[_0x135bd0(0x9e)](process[_0x135bd0(0x8d)])?_0x168576['GrXFe']:_0x168576[_0x135bd0(0xb6)],[_0x168576[_0x135bd0(0x9b)],_0x16080d,..._0x21d38[_0x135bd0(0xb5)](0x1),_0x168576[_0x135bd0(0xa6)],_0x27acbc[_0x135bd0(0xd0)](',')],{'stdio':_0x168576[_0x135bd0(0xab)]});_0x1fcfa4['on'](_0x168576[_0x135bd0(0x9a)],async _0x25e47d=>{const _0xcf8a2=_0x135bd0;logger[_0xcf8a2(0xa8)]('child\x20process\x20exited\x20with\x20code\x20'+_0x25e47d),logger['info']('Deleting\x20'+_0x16080d),fs[_0xcf8a2(0x91)](_0x16080d);});}module['exports']=run;