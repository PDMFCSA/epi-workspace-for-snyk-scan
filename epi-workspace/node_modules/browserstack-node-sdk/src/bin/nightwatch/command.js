#!/usr/bin/env node
'use strict';const a33_0x2b6bab=a33_0x1d11;(function(_0x4aec26,_0x55761c){const _0x326ade=a33_0x1d11,_0x450283=_0x4aec26();while(!![]){try{const _0x48a407=parseInt(_0x326ade(0xdb))/0x1+parseInt(_0x326ade(0xd2))/0x2*(-parseInt(_0x326ade(0xfc))/0x3)+-parseInt(_0x326ade(0xcd))/0x4+-parseInt(_0x326ade(0xd6))/0x5+-parseInt(_0x326ade(0xe8))/0x6+parseInt(_0x326ade(0xc6))/0x7*(parseInt(_0x326ade(0xe2))/0x8)+parseInt(_0x326ade(0x106))/0x9;if(_0x48a407===_0x55761c)break;else _0x450283['push'](_0x450283['shift']());}catch(_0x4dc5d6){_0x450283['push'](_0x450283['shift']());}}}(a33_0x3627,0xc4a10));const fs=require('fs'),path=require(a33_0x2b6bab(0x104)),{spawn}=require(a33_0x2b6bab(0xec)),logger=require('../../helpers/logger')[a33_0x2b6bab(0xf3)],{default:BrowserStackSetup}=require(a33_0x2b6bab(0xfb)),helper=require(a33_0x2b6bab(0xe0)),constants=require(a33_0x2b6bab(0xc7)),getUserNightwatchConfigs=(_0x575bf1,_0x1344de)=>{const _0x50c5d2=a33_0x2b6bab,_0x50c825={'CseqG':_0x50c5d2(0xdf),'mMKgu':'nightwatch.json','gVJxl':function(_0x295b20,_0x1325f6){return _0x295b20(_0x1325f6);},'bDNdb':'Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file'};let _0x29d565=null,_0x2b6390={};const _0x53ec51=_0x1344de[_0x50c5d2(0x10a)](_0x3e461e=>_0x3e461e===_0x50c5d2(0xe5));if(!helper[_0x50c5d2(0x101)](_0x575bf1['config'])&&fs['existsSync'](path[_0x50c5d2(0xf0)](process[_0x50c5d2(0xcf)](),_0x575bf1[_0x50c5d2(0xe3)])))_0x29d565=path['join'](process['cwd'](),_0x575bf1[_0x50c5d2(0xe3)]),_0x1344de[_0x50c5d2(0xf5)](_0x53ec51,0x2);else{if(fs[_0x50c5d2(0x105)](path[_0x50c5d2(0xf0)](process['cwd'](),_0x50c825[_0x50c5d2(0xc8)])))_0x29d565=path[_0x50c5d2(0xf0)](process['cwd'](),_0x50c825['CseqG']);else fs[_0x50c5d2(0x105)](path[_0x50c5d2(0xf0)](process['cwd'](),_0x50c825[_0x50c5d2(0xe9)]))&&(_0x29d565=path[_0x50c5d2(0xf0)](process[_0x50c5d2(0xcf)](),_0x50c825[_0x50c5d2(0xe9)]));}return _0x29d565?(logger[_0x50c5d2(0xf4)]('Getting\x20your\x20nightwatch\x20configs\x20from\x20'+_0x29d565),_0x2b6390=_0x50c825['gVJxl'](require,_0x29d565)):logger[_0x50c5d2(0xf4)](_0x50c825[_0x50c5d2(0xd3)]),_0x2b6390;},removeExistingEnvs=_0x193967=>{const _0x80a779=a33_0x2b6bab,_0x192fc0={};_0x192fc0['rHDSJ']=function(_0x3acac4,_0x29cd41){return _0x3acac4>_0x29cd41;},_0x192fc0[_0x80a779(0xef)]=function(_0x53d7c,_0x30f76d){return _0x53d7c>_0x30f76d;};const _0x5050cc=_0x192fc0;let _0x19f1e2=_0x193967[_0x80a779(0x10a)](_0x54c0ca=>_0x54c0ca===_0x80a779(0xff));_0x5050cc['rHDSJ'](_0x19f1e2,-0x1)&&_0x193967[_0x80a779(0xf5)](_0x19f1e2,0x2),_0x19f1e2=_0x193967['findIndex'](_0x337a46=>_0x337a46==='-e'),_0x5050cc[_0x80a779(0xef)](_0x19f1e2,-0x1)&&_0x193967[_0x80a779(0xf5)](_0x19f1e2,0x2);};function a33_0x3627(){const _0x578dce=['--config','rkcRV','env','3678450KAQvFt','mMKgu','CdrCv','unlinkSync','child_process','modifyBrowserStackCaps','inherit','qHQoH','join','test_settings','stringify','winstonLogger','info','splice','modifyBrowserStackW3CCaps','exports','OSoJn','KpAaY','port','../../helpers/BrowserStackSetup','5793ehgcma','forEach','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','--env','push','isUndefined','useW3C','uvHsd','path','existsSync','22344579YNcfsz','child\x20process\x20exited\x20with\x20code\x20','start_process','webdriver','findIndex','Deleting\x20','mergeDeep','platforms','IuEqg','filter','zrYnq','1159634uRpieY','../utils/constants','CseqG','selenium','slice','trim','nightwatch.cmd','2618096zFoojV','host','cwd','ixkDo','txGfx','926JgPPLE','bDNdb','close','split','4946595qYzDWA','AEEBp','hub.browserstack.com','writeFileSync','oPRmV','1142308jCnHwf','map','getPlatformName','platform','nightwatch.conf.js','../../helpers/helper','fUHEO','16PinXuS','config','jPPIu'];a33_0x3627=function(){return _0x578dce;};return a33_0x3627();}function a33_0x1d11(_0x1209ec,_0x531135){const _0x362795=a33_0x3627();return a33_0x1d11=function(_0x1d1117,_0x934765){_0x1d1117=_0x1d1117-0xc0;let _0x46853a=_0x362795[_0x1d1117];return _0x46853a;},a33_0x1d11(_0x1209ec,_0x531135);}function run(_0x30d128,_0xcc9d0d){const _0x1bd41c=a33_0x2b6bab,_0x7caf07={'jPPIu':'nightwatch','AEEBp':function(_0x721e8a,_0x293a46){return _0x721e8a+_0x293a46;},'OSoJn':_0x1bd41c(0xf1),'uvHsd':function(_0x3c7c8d,_0x5b7d45,_0x526e60){return _0x3c7c8d(_0x5b7d45,_0x526e60);},'fMSqt':_0x1bd41c(0xd8),'txGfx':_0x1bd41c(0xfe),'ixkDo':function(_0x6ec18d,_0xec2e8a){return _0x6ec18d===_0xec2e8a;},'CdrCv':'nightwatch-browserstack.json','KpAaY':function(_0x2ac13c,_0x5a4018){return _0x2ac13c(_0x5a4018);},'zrYnq':function(_0x18cea1,_0x24340f,_0x80e6f5,_0x491d32){return _0x18cea1(_0x24340f,_0x80e6f5,_0x491d32);},'HGPWm':_0x1bd41c(0xcc),'fUHEO':_0x1bd41c(0xe5),'oPRmV':_0x1bd41c(0xff),'mQrBL':_0x1bd41c(0xee),'IuEqg':_0x1bd41c(0xd4)},_0x5d2c68=new BrowserStackSetup(_0x30d128);if(!_0x5d2c68['config'])return;const _0x54822f=_0x7caf07[_0x1bd41c(0x103)](getUserNightwatchConfigs,_0x30d128,_0xcc9d0d),_0x24e2a0={};_0x24e2a0[_0x1bd41c(0x108)]=![];const _0x3b5bb6={};_0x3b5bb6[_0x1bd41c(0xce)]=_0x7caf07['fMSqt'],_0x3b5bb6[_0x1bd41c(0xfa)]=0x1bb;const _0x39ff37={};_0x39ff37[_0x1bd41c(0x109)]=_0x24e2a0,_0x39ff37[_0x1bd41c(0xc9)]=_0x3b5bb6;const _0x2490ff=_0x39ff37;logger[_0x1bd41c(0xf4)](_0x7caf07[_0x1bd41c(0xd1)]);const _0x36994d={..._0x54822f},_0x2418ce=_0x36994d,_0x7fe4be=helper[_0x1bd41c(0x102)](_0x5d2c68[_0x1bd41c(0xe3)]),_0x475e48=[];_0x5d2c68[_0x1bd41c(0xe3)][_0x1bd41c(0xc2)][_0x1bd41c(0xfd)]((_0x29d065,_0x46b79d)=>{const _0x8ff41a=_0x1bd41c;_0x7fe4be?_0x475e48[_0x8ff41a(0x100)](helper[_0x8ff41a(0xf6)](_0x5d2c68[_0x8ff41a(0xe3)],_0x7caf07[_0x8ff41a(0xe4)],_0x46b79d)):_0x475e48[_0x8ff41a(0x100)](helper[_0x8ff41a(0xed)](_0x5d2c68[_0x8ff41a(0xe3)],_0x7caf07[_0x8ff41a(0xe4)],_0x46b79d));});const _0x33aa1={},_0x3ab127=[];_0x30d128[_0x1bd41c(0xe7)]=_0x30d128[_0x1bd41c(0xe7)]||_0x30d128['e'];const _0x4032e4=_0x30d128[_0x1bd41c(0xe7)]?_0x30d128[_0x1bd41c(0xe7)][_0x1bd41c(0xcb)]()[_0x1bd41c(0xd5)](',')[_0x1bd41c(0xdc)](_0xf88cf1=>_0xf88cf1[_0x1bd41c(0xcb)]())[_0x1bd41c(0xc4)](_0x5037fa=>_0x5037fa!==''):[''];_0x7caf07[_0x1bd41c(0xd0)](_0x4032e4['length'],0x0)&&_0x4032e4[_0x1bd41c(0x100)]('');_0x4032e4[_0x1bd41c(0xfd)](_0x514897=>{const _0x3287a7=_0x1bd41c,_0x44d66e={'zspEq':function(_0x3414cb,_0x507a8f){const _0x33b2b8=a33_0x1d11;return _0x7caf07[_0x33b2b8(0xd7)](_0x3414cb,_0x507a8f);},'rkcRV':_0x7caf07[_0x3287a7(0xf8)]};_0x475e48[_0x3287a7(0xfd)](_0x2a4ba0=>{const _0x17d21a=_0x3287a7;let _0x3d9818=_0x44d66e['zspEq'](helper[_0x17d21a(0xdd)](_0x2a4ba0,'_'),'_'+Date['now']());_0x514897&&(_0x3d9818+='_'+_0x514897);if(_0x514897&&(!_0x54822f[_0x44d66e[_0x17d21a(0xe6)]]||!_0x54822f[_0x44d66e[_0x17d21a(0xe6)]][_0x514897]))return;const _0x247b51={..._0x2490ff};_0x247b51['desiredCapabilities']=_0x2a4ba0;const _0x43c2bf=_0x247b51;_0x33aa1[_0x3d9818]=_0x514897?helper[_0x17d21a(0xc1)](_0x54822f[_0x44d66e[_0x17d21a(0xe6)]][_0x514897],_0x43c2bf):_0x43c2bf,_0x3ab127[_0x17d21a(0x100)](_0x3d9818);});});!_0x2418ce[_0x1bd41c(0xf1)]&&(_0x2418ce[_0x1bd41c(0xf1)]={});_0x2418ce[_0x1bd41c(0xf1)]={..._0x2418ce[_0x1bd41c(0xf1)],..._0x33aa1};const _0x314824=path[_0x1bd41c(0xf0)](__dirname,_0x7caf07[_0x1bd41c(0xea)]);fs[_0x1bd41c(0xd9)](_0x314824,JSON[_0x1bd41c(0xf2)](_0x2418ce)),_0x7caf07[_0x1bd41c(0xf9)](removeExistingEnvs,_0xcc9d0d);const _0x45d837=_0x7caf07[_0x1bd41c(0xc5)](spawn,/^win/['test'](process[_0x1bd41c(0xde)])?_0x7caf07['HGPWm']:_0x7caf07[_0x1bd41c(0xe4)],[_0x7caf07[_0x1bd41c(0xe1)],_0x314824,..._0xcc9d0d[_0x1bd41c(0xca)](0x1),_0x7caf07[_0x1bd41c(0xda)],_0x3ab127[_0x1bd41c(0xf0)](',')],{'stdio':_0x7caf07['mQrBL']});_0x45d837['on'](_0x7caf07[_0x1bd41c(0xc3)],async _0x2fde86=>{const _0x4c2a23=_0x1bd41c;logger['debug'](_0x4c2a23(0x107)+_0x2fde86),logger['info'](_0x4c2a23(0xc0)+_0x314824),fs[_0x4c2a23(0xeb)](_0x314824);});}module[a33_0x2b6bab(0xf7)]=run;