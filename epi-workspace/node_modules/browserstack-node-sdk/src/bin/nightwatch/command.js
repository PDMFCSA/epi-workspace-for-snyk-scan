#!/usr/bin/env node
'use strict';const a37_0x42f76=a37_0x9352;function a37_0x1f5e(){const _0x1d64ff=['filter','close','3567200gdZWle','XedAK','wNbUD','7512395hFbjgk','split','config','rAVdP','--config','trim','length','nightwatch.cmd','UvFbr','desiredCapabilities','path','isUndefined','2160711BfKatB','cwd','Deleting\x20','push','child\x20process\x20exited\x20with\x20code\x20','293PQGkdu','nightwatch.conf.js','findIndex','Pogrc','../../helpers/helper','MxlCv','hub.browserstack.com','10786epFSbx','JcpaT','child_process','nightwatch-browserstack.json','hEKIA','join','mergeDeep','nightwatch.json','map','92076MuUqUv','FfSyZ','4652055JUEdCp','510XiGhtK','nightwatch','info','vbJPs','host','../../helpers/BrowserStackSetup','forEach','webdriver','--env','env','platform','inherit','splice','119567pCIevn','selenium','existsSync','useW3C','xihAG','BzNsY','ELPQa','modifyBrowserStackW3CCaps','QuwIa','GgcGW','modifyBrowserStackCaps','yzEYo','XJgJf','ouWmD','winstonLogger','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','getPlatformName','unlinkSync','test_settings','stringify','PIplV'];a37_0x1f5e=function(){return _0x1d64ff;};return a37_0x1f5e();}(function(_0x36d795,_0x5ebb51){const _0x227809=a37_0x9352,_0xd25f8f=_0x36d795();while(!![]){try{const _0x11fea8=-parseInt(_0x227809(0x171))/0x1*(-parseInt(_0x227809(0x178))/0x2)+-parseInt(_0x227809(0x16c))/0x3+-parseInt(_0x227809(0x181))/0x4+parseInt(_0x227809(0x160))/0x5+parseInt(_0x227809(0x184))/0x6*(-parseInt(_0x227809(0x191))/0x7)+parseInt(_0x227809(0x15d))/0x8+-parseInt(_0x227809(0x183))/0x9;if(_0x11fea8===_0x5ebb51)break;else _0xd25f8f['push'](_0xd25f8f['shift']());}catch(_0x11e036){_0xd25f8f['push'](_0xd25f8f['shift']());}}}(a37_0x1f5e,0xc756c));function a37_0x9352(_0xb711b9,_0x581d1c){const _0x1f5e9f=a37_0x1f5e();return a37_0x9352=function(_0x935273,_0x1f9a07){_0x935273=_0x935273-0x159;let _0x13c583=_0x1f5e9f[_0x935273];return _0x13c583;},a37_0x9352(_0xb711b9,_0x581d1c);}const fs=require('fs'),path=require(a37_0x42f76(0x16a)),{spawn}=require(a37_0x42f76(0x17a)),logger=require('../../helpers/logger')[a37_0x42f76(0x19f)],{default:BrowserStackSetup}=require(a37_0x42f76(0x189)),helper=require(a37_0x42f76(0x175)),constants=require('../utils/constants'),getUserNightwatchConfigs=(_0x5ca125,_0x1b83eb)=>{const _0x131c42=a37_0x42f76,_0x3f2ada={'XJgJf':_0x131c42(0x172),'ELPQa':_0x131c42(0x17f),'wNbUD':function(_0x509fd8,_0x2b4d84){return _0x509fd8(_0x2b4d84);},'OVIcg':'Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file'};let _0x134906=null,_0x5c20f0={};const _0x636ec7=_0x1b83eb[_0x131c42(0x173)](_0x10fd16=>_0x10fd16==='--config');if(!helper[_0x131c42(0x16b)](_0x5ca125[_0x131c42(0x162)])&&fs[_0x131c42(0x193)](path['join'](process[_0x131c42(0x16d)](),_0x5ca125[_0x131c42(0x162)])))_0x134906=path[_0x131c42(0x17d)](process[_0x131c42(0x16d)](),_0x5ca125[_0x131c42(0x162)]),_0x1b83eb['splice'](_0x636ec7,0x2);else{if(fs[_0x131c42(0x193)](path[_0x131c42(0x17d)](process[_0x131c42(0x16d)](),_0x3f2ada['XJgJf'])))_0x134906=path['join'](process[_0x131c42(0x16d)](),_0x3f2ada[_0x131c42(0x19d)]);else fs[_0x131c42(0x193)](path['join'](process[_0x131c42(0x16d)](),_0x3f2ada[_0x131c42(0x197)]))&&(_0x134906=path[_0x131c42(0x17d)](process[_0x131c42(0x16d)](),_0x3f2ada[_0x131c42(0x197)]));}return _0x134906?(logger['info']('Getting\x20your\x20nightwatch\x20configs\x20from\x20'+_0x134906),_0x5c20f0=_0x3f2ada[_0x131c42(0x15f)](require,_0x134906)):logger[_0x131c42(0x186)](_0x3f2ada['OVIcg']),_0x5c20f0;},removeExistingEnvs=_0x32ec52=>{const _0x27901a=a37_0x42f76,_0x46e907={};_0x46e907[_0x27901a(0x176)]=function(_0x36afbe,_0x27b9ba){return _0x36afbe>_0x27b9ba;};const _0x267dbf=_0x46e907;let _0x45bc45=_0x32ec52['findIndex'](_0x1f6139=>_0x1f6139===_0x27901a(0x18c));_0x267dbf[_0x27901a(0x176)](_0x45bc45,-0x1)&&_0x32ec52[_0x27901a(0x190)](_0x45bc45,0x2),_0x45bc45=_0x32ec52[_0x27901a(0x173)](_0x530439=>_0x530439==='-e'),_0x267dbf[_0x27901a(0x176)](_0x45bc45,-0x1)&&_0x32ec52[_0x27901a(0x190)](_0x45bc45,0x2);};function run(_0x11755b,_0x35517d,_0x39a9f1){const _0x5d6990=a37_0x42f76,_0x115a1e={'QuwIa':_0x5d6990(0x185),'rAVdP':function(_0x52e3fa,_0x31434f){return _0x52e3fa+_0x31434f;},'FfSyZ':'test_settings','GgcGW':function(_0x3e7515,_0x2d77c0,_0x1ad1b7){return _0x3e7515(_0x2d77c0,_0x1ad1b7);},'ouWmD':_0x5d6990(0x177),'vbJPs':_0x5d6990(0x1a0),'hEKIA':function(_0x136a85,_0x33e25e){return _0x136a85===_0x33e25e;},'BzNsY':_0x5d6990(0x17b),'RqjEB':function(_0x4d0009,_0x7c188b){return _0x4d0009(_0x7c188b);},'xihAG':function(_0x59e3b0,_0x2e2952,_0x379a55,_0x39345c){return _0x59e3b0(_0x2e2952,_0x379a55,_0x39345c);},'PIplV':_0x5d6990(0x167),'Pogrc':_0x5d6990(0x164),'yzEYo':_0x5d6990(0x18c),'UvFbr':_0x5d6990(0x18f),'nHxqF':_0x5d6990(0x15c)};if(!_0x39a9f1[_0x5d6990(0x162)])return;const _0x3547ad=_0x115a1e[_0x5d6990(0x19a)](getUserNightwatchConfigs,_0x11755b,_0x35517d),_0x3ffbd4={};_0x3ffbd4['start_process']=![];const _0x34706f={};_0x34706f[_0x5d6990(0x188)]=_0x115a1e[_0x5d6990(0x19e)],_0x34706f['port']=0x1bb;const _0x53f40a={};_0x53f40a[_0x5d6990(0x18b)]=_0x3ffbd4,_0x53f40a[_0x5d6990(0x192)]=_0x34706f;const _0xaeebe0=_0x53f40a;logger['info'](_0x115a1e[_0x5d6990(0x187)]);const _0x4f958c={..._0x3547ad},_0x25404e=_0x4f958c,_0x52232b=helper[_0x5d6990(0x194)](_0x39a9f1[_0x5d6990(0x162)]),_0x45578b=[];_0x39a9f1[_0x5d6990(0x162)]['platforms'][_0x5d6990(0x18a)]((_0x22c8aa,_0x2c0150)=>{const _0x5e9db1=_0x5d6990;_0x52232b?_0x45578b['push'](helper[_0x5e9db1(0x198)](_0x39a9f1[_0x5e9db1(0x162)],_0x115a1e[_0x5e9db1(0x199)],_0x2c0150)):_0x45578b[_0x5e9db1(0x16f)](helper[_0x5e9db1(0x19b)](_0x39a9f1[_0x5e9db1(0x162)],_0x115a1e[_0x5e9db1(0x199)],_0x2c0150));});const _0x468988={},_0x38ec2e=[];_0x11755b[_0x5d6990(0x18d)]=_0x11755b[_0x5d6990(0x18d)]||_0x11755b['e'];const _0x11312f=_0x11755b[_0x5d6990(0x18d)]?_0x11755b['env']['trim']()[_0x5d6990(0x161)](',')[_0x5d6990(0x180)](_0x2d9828=>_0x2d9828[_0x5d6990(0x165)]())[_0x5d6990(0x15b)](_0x13a41d=>_0x13a41d!==''):[''];_0x115a1e[_0x5d6990(0x17c)](_0x11312f[_0x5d6990(0x166)],0x0)&&_0x11312f[_0x5d6990(0x16f)]('');_0x11312f[_0x5d6990(0x18a)](_0x4942ed=>{const _0x5b3575=_0x5d6990,_0x34ad43={'XedAK':function(_0x509ebb,_0xf8e966){const _0x12e727=a37_0x9352;return _0x115a1e[_0x12e727(0x163)](_0x509ebb,_0xf8e966);},'JcpaT':_0x115a1e[_0x5b3575(0x182)]};_0x45578b[_0x5b3575(0x18a)](_0x265149=>{const _0x27caab=_0x5b3575;let _0x561510=_0x34ad43[_0x27caab(0x15e)](helper[_0x27caab(0x1a1)](_0x265149,'_'),'_'+Date['now']());_0x4942ed&&(_0x561510+='_'+_0x4942ed);if(_0x4942ed&&(!_0x3547ad[_0x34ad43[_0x27caab(0x179)]]||!_0x3547ad[_0x34ad43[_0x27caab(0x179)]][_0x4942ed]))return;const _0x3e3e55={..._0xaeebe0};_0x3e3e55[_0x27caab(0x169)]=_0x265149;const _0x4dda01=_0x3e3e55;_0x468988[_0x561510]=_0x4942ed?helper[_0x27caab(0x17e)](_0x3547ad[_0x34ad43[_0x27caab(0x179)]][_0x4942ed],_0x4dda01):_0x4dda01,_0x38ec2e[_0x27caab(0x16f)](_0x561510);});});!_0x25404e['test_settings']&&(_0x25404e[_0x5d6990(0x1a3)]={});_0x25404e['test_settings']={..._0x25404e[_0x5d6990(0x1a3)],..._0x468988};const _0x21609c=path[_0x5d6990(0x17d)](__dirname,_0x115a1e[_0x5d6990(0x196)]);fs['writeFileSync'](_0x21609c,JSON[_0x5d6990(0x159)](_0x25404e)),_0x115a1e['RqjEB'](removeExistingEnvs,_0x35517d);const _0x4cf3c5=_0x115a1e[_0x5d6990(0x195)](spawn,/^win/['test'](process[_0x5d6990(0x18e)])?_0x115a1e[_0x5d6990(0x15a)]:_0x115a1e[_0x5d6990(0x199)],[_0x115a1e[_0x5d6990(0x174)],_0x21609c,..._0x35517d['slice'](0x1),_0x115a1e[_0x5d6990(0x19c)],_0x38ec2e['join'](',')],{'stdio':_0x115a1e[_0x5d6990(0x168)]});_0x4cf3c5['on'](_0x115a1e['nHxqF'],async _0x2f02c1=>{const _0x26f8f5=_0x5d6990;logger['debug'](_0x26f8f5(0x170)+_0x2f02c1),logger[_0x26f8f5(0x186)](_0x26f8f5(0x16e)+_0x21609c),fs[_0x26f8f5(0x1a2)](_0x21609c);});}module['exports']=run;