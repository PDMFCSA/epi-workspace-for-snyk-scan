const a65_0x3acb85=a65_0x4793;function a65_0x2c8d(){const _0x8731fc=['size','getTestFrameworksVersions','isArray','KEY_TEST_ID','10tZAvwN','err','KEY_CUSTOM_TAGS','KEY_EVENT_STARTED_AT','TEST','TUZhc','test','axUdO','KEY_TEST_FAILURE_TYPE','KEY_HOOK_LAST_FINISHED','runHooks','KEY_TEST_TAGS','KEY_TEST_LOGS','AAXQG','../../playwright/reporter/pwUtils','filter','\x20instanceId=','4327116khtLyL','oMScl','PUgfS','XBytA','lNVyQ','lNcvq','KEY_TEST_FAILURE','getAllData','debug','filePath','yBCZj','LwxQj','Error\x20in\x20sendLogCreatedEvent:\x20','KEY_HOOK_RESULT',',\x20testFrameworkState=','flShw','sendLogCreatedEvent:\x20testId=','cqRKX','pop','KEY_TEST_FRAMEWORK_VERSION','uKcuG','testUId','bwUEO','POST','status','title','3865092nlPBjH','zqOIO','../instances/trackedInstance.js','error','uxLMe','KEY_TEST_STARTED_AT','116769UKYvKd','IErvR','parsePlaywrightTestResult:\x20testId=','169572atObfC','trackPlaywrightInstance','Hook\x20List\x20in\x20Post\x20','KEY_TEST_ATTACHMENTS','resolveInstance','steps','NONE','NjrHc','annotations','result','wpoDc','KEY_HOOKS_FINISHED','EyHVV','uspTm','KEY_TEST_FILE_PATH','NXYsp','JSdhI','cHDEJ','../../utils/constants','forEach','setTestDetails','getTrackedInstance','DUzIn','../state/hookState.js','timedOut','trim','\x20hookState=','map','hook','KEY_HOOK_FAILURE','ssFWJ','logCreatedEvent','length','9yhMKyu','getRef','../grpcClient','LwgHp','getCurrentInstanceName','KEY_HOOKS_STARTED','toISOString','AxdHx','KEY_LOGS','getTime','ePNGo','instance','getInstance','KEY_TEST_RESULT_AT','uuid','OWuzV','sendLogCreatedEvent','split','addMultipleEntries','BMYli','7883821CarjOv','Hook\x20Started\x20in\x20PRE\x20key\x20=\x20','INIT_TEST','duration','basename','gwWQe','parsePlaywrightTestResult','path','sendLogCreatedEvent\x20for\x20testId:\x20','PRE','get','\x20and\x20args\x20=\x20','info','results','toString','statSync','KEY_TEST_NAME','KEY_HOOK_LAST_STARTED','\x20\x20and\x20args\x20=\x20','field_type','\x20from\x20TestDetails:\x20','HUalo','725789uSWyDT','52wwdWMi','DEFAULT_TEST_RESULT','3620280vTQDOj','AVECx','step','../state/testFrameworkState.js','xisvs','multi_dropdown','KEY_EVENT_ENDED_AT','NCiXX','KEY_HOOK_LOGS','getTraceFilePaths','Iquly','stack','afdDD','\x20&\x20hook\x20=\x20','../../../../src/helpers/helper','dtaiR','kFLUW','SsQeC','message','KEY_TEST_RERUN_NAME','some','ZmjRv','startTime','inspect','push','xLKRB','format','No\x20reason\x20provided','expectedStatus','KEY_TEST_ENDED_AT','trackEvent\x20loading\x20testResults\x20for\x20testId:\x20','KEY_TEST_LOCATION','getTestDetails','KEY_TEST_RESULT','./constants/testFrameworkConstants.js','file_name','trackEvent','jqaru','trackPlaywrightInstance:\x20saved\x20instance\x20contextId=','lAqpe','WRCFo','../../../helpers/helper.js','KEY_TEST_CODE','errors','values','trackHookEvent','KEY_HOOK_NAME','\x20payload=','KEY_HOOK_FAILURE_REASON','../../../helpers/classLogger.js','oYvbv','Expected\x20to\x20fail,\x20but\x20passed.','mXCGL','gpDtk','getTestFrameworks','createContext','skipped','setTrackedInstance','../TestInfo.js','../instances/testFrameworkInstance.js','KEY_TEST_UUID','140pEZBoi','hpvEb','../../../helpers/test-observability/utils','\x20instance=','failed','KEY_TEST_SCOPE','KEY_TEST_FRAMEWORK_NAME','KEY_HOOK_ID'];a65_0x2c8d=function(){return _0x8731fc;};return a65_0x2c8d();}(function(_0x5989df,_0x534604){const _0x8d12f7=a65_0x4793,_0x4e994e=_0x5989df();while(!![]){try{const _0x11ca1e=-parseInt(_0x8d12f7(0xf1))/0x1+parseInt(_0x8d12f7(0xf2))/0x2*(parseInt(_0x8d12f7(0xa3))/0x3)+-parseInt(_0x8d12f7(0x83))/0x4+-parseInt(_0x8d12f7(0x131))/0x5*(-parseInt(_0x8d12f7(0xa6))/0x6)+-parseInt(_0x8d12f7(0x9d))/0x7+-parseInt(_0x8d12f7(0xf4))/0x8*(-parseInt(_0x8d12f7(0xc7))/0x9)+parseInt(_0x8d12f7(0x72))/0xa*(parseInt(_0x8d12f7(0xdb))/0xb);if(_0x11ca1e===_0x534604)break;else _0x4e994e['push'](_0x4e994e['shift']());}catch(_0x502827){_0x4e994e['push'](_0x4e994e['shift']());}}}(a65_0x2c8d,0x959f8));function a65_0x4793(_0x1ea00c,_0x2b47c4){const _0x2c8ddc=a65_0x2c8d();return a65_0x4793=function(_0x4793ad,_0x5b4a5c){_0x4793ad=_0x4793ad-0x69;let _0x2d23a4=_0x2c8ddc[_0x4793ad];return _0x2d23a4;},a65_0x4793(_0x1ea00c,_0x2b47c4);}const TestFramework=require('./testFramework'),TestFrameworkState=require(a65_0x3acb85(0xf7)),HookState=require(a65_0x3acb85(0xbd)),{createClassLogger}=require(a65_0x3acb85(0x125)),TestFrameworkInstance=require(a65_0x3acb85(0x12f)),CLIUtils=require('../cliUtils.js'),TrackedInstance=require(a65_0x3acb85(0x9f)),TestFrameworkConstants=require(a65_0x3acb85(0x116)),logger=createClassLogger('PlaywrightTestFramework'),{v4:uuidv4}=require(a65_0x3acb85(0xd5)),util=require('util'),{getPlaywrightSessionName,getPlaywrightTestFilePath,getPlaywrightTestId,getPlaywrightTestTitle,getPlaywrightTestLocation,getPlaywrightTestTags,getPlaywrightTestCode,getPlaywrightTestScope,getPlaywrightTestScopes,getStepsAndLogs,getScreenshots,getPlaywrightCustomRerunParam,getMediaArtifactsLogs,getManualUploadLogs,updatePayloadForTraceLogs}=require(a65_0x3acb85(0x11d)),TestInfo=require(a65_0x3acb85(0x12e)),GrpcClient=require(a65_0x3acb85(0xc9)),{removeAnsiColors,getFailureType,failureData}=require(a65_0x3acb85(0x133)),{getFailureData,getTestTags}=require(a65_0x3acb85(0x80)),{findNestedKey,sendTraceZip,validateFilePath}=require(a65_0x3acb85(0x80)),path=require(a65_0x3acb85(0xe2)),fs=require('fs'),helper=require(a65_0x3acb85(0x102)),{PLAYWRIGHT_TRACE_LOGS}=require(a65_0x3acb85(0xb8));class PlaywrightTestFramework extends TestFramework{constructor(_0x118edb,_0x5732b0,_0x2b4354){super(_0x118edb,_0x5732b0,_0x2b4354);}async['trackEvent'](_0x2f50e8,_0x8fb641,_0x3ecf2d={}){const _0x1411ef=a65_0x3acb85,_0x4e3862={};_0x4e3862[_0x1411ef(0x109)]=function(_0x5d2a43,_0x488db9){return _0x5d2a43===_0x488db9;},_0x4e3862[_0x1411ef(0xb0)]=_0x1411ef(0x78),_0x4e3862['uspTm']='trackEvent:\x20Exception\x20in\x20event\x20tracking,\x20testFrameworkState=%s\x20hookState=%s\x20argsLength=%s,\x20exception=%s';const _0x1a61b3=_0x4e3862;await super[_0x1411ef(0x118)](_0x2f50e8,_0x8fb641,_0x3ecf2d);const _0x399d1d=this[_0x1411ef(0xaa)](_0x2f50e8,_0x8fb641,_0x3ecf2d);if(!_0x399d1d)return;logger[_0x1411ef(0x8b)]('trackEvent:\x20found\x20instance,\x20testFrameworkState='+_0x2f50e8+_0x1411ef(0xc0)+_0x8fb641+_0x1411ef(0x82)+_0x399d1d[_0x1411ef(0xc8)]());try{if(_0x1a61b3[_0x1411ef(0x109)](_0x8fb641,HookState['PRE'])&&_0x1a61b3[_0x1411ef(0x109)](_0x2f50e8,TestFrameworkState[_0x1411ef(0x76)])){const _0x117bcb=_0x3ecf2d['test'];logger[_0x1411ef(0x8b)]('trackEvent\x20loading\x20testData\x20for\x20testId:\x20'+_0x117bcb['id']+'}');const _0x3373ec=TestInfo['getTestUUID'](_0x117bcb['id']);_0x399d1d[_0x1411ef(0xd9)](this['parsePlaywrightTest'](_0x3373ec,_0x117bcb)),logger[_0x1411ef(0x8b)]('trackEvent:\x20loaded\x20testData\x20for\x20testId:\x20'+_0x117bcb['id']+_0x1411ef(0x91)+_0x2f50e8+'\x20testHookState='+_0x8fb641+_0x1411ef(0x69)+_0x399d1d['getRef']());}if(_0x1a61b3[_0x1411ef(0x109)](_0x8fb641,HookState[_0x1411ef(0x9a)])&&_0x1a61b3[_0x1411ef(0x109)](_0x2f50e8,TestFrameworkState['TEST'])){const _0x2583a9=_0x3ecf2d[_0x1411ef(0x78)],_0x130e5c=_0x3ecf2d[_0x1411ef(0xaf)];logger[_0x1411ef(0x8b)](_0x1411ef(0x112)+_0x2583a9['id']),_0x399d1d[_0x1411ef(0xd9)](this[_0x1411ef(0xe1)](_0x2583a9['id'],_0x130e5c,_0x2583a9)),this[_0x1411ef(0xd7)](_0x399d1d,_0x2f50e8,_0x8fb641,_0x1a61b3[_0x1411ef(0xb0)],_0x3ecf2d);}if(CLIUtils['matchHookRegex'](_0x2f50e8['toString']()[_0x1411ef(0xd8)]('.')[0x1])){const _0x1ef22c=await this[_0x1411ef(0x121)](_0x399d1d,_0x2f50e8,_0x8fb641,_0x3ecf2d);_0x399d1d['addMultipleEntries'](_0x1ef22c);}}catch(_0x2db76c){logger[_0x1411ef(0xa0)](util['format'](_0x1a61b3[_0x1411ef(0xb3)],_0x2f50e8,_0x8fb641,_0x3ecf2d['length'],_0x2db76c));}_0x3ecf2d[_0x1411ef(0xd2)]=_0x399d1d,await this[_0x1411ef(0x7c)](_0x399d1d,_0x2f50e8,_0x8fb641,_0x3ecf2d);}['resolveInstance'](_0xceadf9,_0x12e706,_0x10d8b3={}){const _0x46c0fc=a65_0x3acb85,_0x215ab2={};_0x215ab2[_0x46c0fc(0xc4)]=function(_0x15fb15,_0x183cc6){return _0x15fb15===_0x183cc6;},_0x215ab2[_0x46c0fc(0xb2)]=function(_0x45c267,_0x2d5ed4){return _0x45c267===_0x2d5ed4;};const _0x548dfa=_0x215ab2;let _0x48fa59=null;return(_0x548dfa['ssFWJ'](_0xceadf9,TestFrameworkState[_0x46c0fc(0xdd)])||_0x548dfa['EyHVV'](_0xceadf9,TestFrameworkState[_0x46c0fc(0xac)]))&&this[_0x46c0fc(0xa7)](_0xceadf9,_0x10d8b3),_0x48fa59=TestFramework[_0x46c0fc(0xbb)](),_0x48fa59;}['trackPlaywrightInstance'](_0x35ae34,_0x1d17ba){const _0x384954=a65_0x3acb85,_0x872aa7=CLIUtils[_0x384954(0xcb)](),_0x11a98e=TrackedInstance[_0x384954(0x12b)](_0x872aa7);let _0x5e94d=null;logger[_0x384954(0xe7)]('trackPlaywrightInstance:\x20created\x20instance\x20for\x20target='+_0x872aa7+',\x20state='+_0x35ae34),_0x5e94d=new TestFrameworkInstance(_0x11a98e,this['getTestFrameworks'](),this['getTestFrameworksVersions'](),_0x35ae34,HookState[_0x384954(0xac)]),TestFramework[_0x384954(0x12d)](_0x11a98e,_0x5e94d),logger[_0x384954(0xe7)](_0x384954(0x11a)+_0x11a98e['getId']()+'\x20target='+_0x872aa7);}['parsePlaywrightTest'](_0x536b00,_0x3d0b4c){const _0x3a63cb=a65_0x3acb85,_0x1611be={'AVECx':function(_0x3abdd3,_0x389365){return _0x3abdd3(_0x389365);},'Iquly':function(_0x258417,_0x4549f0){return _0x258417(_0x4549f0);},'jqaru':function(_0x35ba8b,_0x10969e){return _0x35ba8b(_0x10969e);},'kFLUW':function(_0x2d65bb,_0x4763aa){return _0x2d65bb(_0x4763aa);},'ePNGo':function(_0x4dfa08,_0x3a9f55){return _0x4dfa08(_0x3a9f55);},'uxLMe':function(_0x50a447,_0x14a9bd){return _0x50a447(_0x14a9bd);}},_0x597f25=_0x1611be['AVECx'](getPlaywrightTestId,_0x3d0b4c),_0x43d534=_0x1611be[_0x3a63cb(0xfe)](getPlaywrightTestTitle,_0x3d0b4c),_0xc96a5b=_0x1611be[_0x3a63cb(0x119)](getTestTags,_0x3d0b4c),_0x2532d1=_0x1611be[_0x3a63cb(0x104)](getPlaywrightTestCode,_0x3d0b4c),_0x7512e2=_0x1611be[_0x3a63cb(0x119)](getPlaywrightTestFilePath,_0x3d0b4c),_0x524b03=_0x7512e2+':'+_0x1611be[_0x3a63cb(0xf5)](getPlaywrightTestLocation,_0x3d0b4c),_0x3c7ba9=_0x1611be['AVECx'](getPlaywrightTestScope,_0x3d0b4c),_0x5e769b=_0x1611be[_0x3a63cb(0xd1)](getPlaywrightTestScopes,_0x3d0b4c),_0x5e071d=_0x1611be[_0x3a63cb(0xa1)](getPlaywrightSessionName,_0x3d0b4c),_0x2fa256=this[_0x3a63cb(0x12a)]()[0x0],_0x16bb85={[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x2fa256,[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]:this[_0x3a63cb(0x6f)]()[_0x2fa256],[TestFrameworkConstants[_0x3a63cb(0x7e)]]:[],[TestFrameworkConstants['KEY_HOOKS_FINISHED']]:{},[TestFrameworkConstants[_0x3a63cb(0xcc)]]:{},[TestFrameworkConstants[_0x3a63cb(0x130)]]:_0x536b00,[TestFrameworkConstants[_0x3a63cb(0x115)]]:TestFrameworkConstants[_0x3a63cb(0xf3)],[TestFrameworkConstants['KEY_AUTOMATE_SESSION_NAME']]:_0x5e071d,[TestFrameworkConstants[_0x3a63cb(0xb4)]]:_0x7512e2,[TestFrameworkConstants[_0x3a63cb(0x71)]]:_0x597f25,[TestFrameworkConstants[_0x3a63cb(0xeb)]]:_0x43d534,[TestFrameworkConstants[_0x3a63cb(0x113)]]:_0x524b03,[TestFrameworkConstants[_0x3a63cb(0x11e)]]:_0x2532d1,[TestFrameworkConstants[_0x3a63cb(0x7d)]]:_0xc96a5b,[TestFrameworkConstants[_0x3a63cb(0xa2)]]:_0x3d0b4c[_0x3a63cb(0xe8)][0x0][_0x3a63cb(0x10a)],[TestFrameworkConstants[_0x3a63cb(0x6b)]]:_0x3c7ba9,[TestFrameworkConstants['KEY_TEST_SCOPES']]:_0x5e769b,[TestFrameworkConstants[_0x3a63cb(0x107)]]:_0x1611be['kFLUW'](getPlaywrightCustomRerunParam,_0x3d0b4c)};TestInfo[_0x3a63cb(0xba)](_0x3d0b4c['id'],_0x16bb85);const _0x41b443={};return _0x41b443[_0x597f25]=_0x16bb85,_0x41b443;}[a65_0x3acb85(0xe1)](_0x651c90,_0x3452ec,_0x2fa8bd){const _0x528a12=a65_0x3acb85,_0xea3880={'cqRKX':function(_0x62ac08,_0x2a75b6){return _0x62ac08(_0x2a75b6);},'lAqpe':'TEST_ATTACHMENT','yBCZj':function(_0x2d3811,_0x42706b){return _0x2d3811===_0x42706b;},'WTSMy':function(_0x4a4fdb,_0xe67a64){return _0x4a4fdb===_0xe67a64;},'cHDEJ':function(_0x3ed3ce,_0x279faf){return _0x3ed3ce===_0x279faf;},'LwgHp':_0x528a12(0x10f),'oMScl':_0x528a12(0xf9),'lNVyQ':function(_0x44c709,_0x244fa8){return _0x44c709(_0x244fa8);},'TZXBa':function(_0x50ed63,_0x5b8efd){return _0x50ed63+_0x5b8efd;},'uKcuG':function(_0x4d8691,_0x3259aa){return _0x4d8691===_0x3259aa;},'WRCFo':_0x528a12(0x12c),'IErvR':'passed','USaPG':function(_0x4addfd,_0xe5f52d){return _0x4addfd===_0xe5f52d;},'HUalo':_0x528a12(0x6a),'SsQeC':function(_0xe99ad2,_0x51dbc6){return _0xe99ad2===_0x51dbc6;},'afdDD':_0x528a12(0xbe),'AAXQG':_0x528a12(0x127),'tOMXG':function(_0x48118c,_0x8c0938,_0x3d1796){return _0x48118c(_0x8c0938,_0x3d1796);},'UNwYt':function(_0x4416f9,_0xd29be8){return _0x4416f9||_0xd29be8;},'BMYli':function(_0x8d8b56,_0x3f211a){return _0x8d8b56(_0x3f211a);},'mXCGL':_0x528a12(0xe2),'gwWQe':function(_0x426d4f,_0x16b23b){return _0x426d4f(_0x16b23b);},'lNcvq':function(_0x5abd78,_0x1d6383){return _0x5abd78>_0x1d6383;},'gpDtk':function(_0x44946a,_0x1525ae,_0x45274d){return _0x44946a(_0x1525ae,_0x45274d);}};logger[_0x528a12(0x8b)](_0x528a12(0xa5)+_0x651c90);const _0x44f292=new Date(_0x3452ec[_0x528a12(0x10a)]),_0x26b174=_0x3452ec[_0x528a12(0xde)],_0x26610f=new Date(_0xea3880['TZXBa'](_0x44f292[_0x528a12(0xd0)](),_0x26b174)),_0x4609fb=_0x3452ec[_0x528a12(0x9b)],_0x5568aa=TestInfo[_0x528a12(0x114)](_0x651c90)[TestFrameworkConstants[_0x528a12(0x74)]]||{};let _0x327012=_0x4609fb;if(_0xea3880[_0x528a12(0x97)](_0x3452ec[_0x528a12(0x9b)],_0x2fa8bd[_0x528a12(0x110)]))_0x327012=_0xea3880['cHDEJ'](_0x3452ec['status'],_0xea3880[_0x528a12(0x11c)])?_0xea3880[_0x528a12(0x11c)]:_0xea3880[_0x528a12(0xa4)];else{(_0xea3880['USaPG'](_0x327012,_0xea3880['IErvR'])||_0xea3880[_0x528a12(0x97)](_0x327012,_0xea3880['HUalo'])||_0xea3880[_0x528a12(0x105)](_0x327012,_0xea3880[_0x528a12(0x100)]))&&(_0x327012=_0xea3880[_0x528a12(0xf0)]);if(_0xea3880[_0x528a12(0xb7)](_0x3452ec[_0x528a12(0x9b)],_0xea3880[_0x528a12(0xa4)])&&_0xea3880['WTSMy'](_0x2fa8bd['expectedStatus'],_0xea3880[_0x528a12(0xf0)])){const _0x3c1c32={};_0x3c1c32[_0x528a12(0x106)]=_0xea3880[_0x528a12(0x7f)],_0x3c1c32[_0x528a12(0xff)]=_0xea3880['AAXQG'],_0x3452ec['error']=_0x3c1c32,_0x3452ec['errors']=[_0x3452ec[_0x528a12(0xa0)]];}}const {failureData:_0x167613,logs:_0x7877f8}=_0xea3880['tOMXG'](getFailureData,_0x3452ec?.[_0x528a12(0x11f)],{}),_0x80918e={[TestFrameworkConstants[_0x528a12(0x89)]]:_0xea3880['UNwYt'](_0x167613,null),[TestFrameworkConstants[_0x528a12(0x7a)]]:_0x3452ec?.[_0x528a12(0xa0)]&&_0xea3880[_0x528a12(0xda)](getFailureType,_0x3452ec[_0x528a12(0xa0)][_0x528a12(0x106)]),[TestFrameworkConstants['KEY_TEST_FAILURE_REASON']]:_0x3452ec?.[_0x528a12(0xa0)]&&_0xea3880[_0x528a12(0x87)](removeAnsiColors,_0x3452ec[_0x528a12(0xa0)][_0x528a12(0x106)]),[TestFrameworkConstants['KEY_LOGS']]:[],[TestFrameworkConstants[_0x528a12(0x115)]]:_0x327012,[TestFrameworkConstants[_0x528a12(0x111)]]:_0x26610f[_0x528a12(0xcd)](),[TestFrameworkConstants[_0x528a12(0xd4)]]:new Date()[_0x528a12(0xcd)](),[TestFrameworkConstants['KEY_CUSTOM_TAGS']]:_0x5568aa},_0x3f0407={};_0x3f0407[_0x528a12(0x78)]=_0x2fa8bd;const _0x4253ae=this['resolveInstance'](TestFrameworkState[_0x528a12(0x76)],HookState[_0x528a12(0x9a)],_0x3f0407),_0x136fdb=_0x4253ae['getAllData']()[_0x528a12(0xe5)](_0x651c90)[TestFrameworkConstants[_0x528a12(0x130)]],_0x4ef426=[],_0x966d46=_0xea3880['tOMXG'](findNestedKey,_0x3452ec,_0xea3880[_0x528a12(0x128)]);if(_0x966d46&&_0xea3880[_0x528a12(0xe0)](validateFilePath,_0x966d46))try{_0x4ef426[_0x528a12(0x10c)]({'kind':_0xea3880['lAqpe'],'timestamp':new Date()['toISOString'](),'test_run_uuid':_0x136fdb,'file_name':path[_0x528a12(0xdf)](_0x966d46),'file_size':fs['statSync'](_0x966d46)[_0x528a12(0x6e)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x31776b){logger['error']('Error\x20processing\x20direct\x20trace\x20file\x20'+_0x966d46+':\x20'+_0x31776b['message']);}const _0xfda783=TestInfo[_0x528a12(0xfd)](),_0x21e991=_0xfda783[_0x528a12(0x81)](_0xf41f61=>_0xf41f61[_0x528a12(0x98)]===_0x136fdb);_0x21e991[_0x528a12(0xb9)](_0x127076=>{const _0x59ff4d=_0x528a12;if(_0x127076['filePath']&&_0xea3880[_0x59ff4d(0x94)](validateFilePath,_0x127076[_0x59ff4d(0x8c)])&&!_0x4ef426[_0x59ff4d(0x108)](_0x2edb1d=>_0x2edb1d[_0x59ff4d(0x117)]===path[_0x59ff4d(0xdf)](_0x127076[_0x59ff4d(0x8c)])))try{_0x4ef426[_0x59ff4d(0x10c)]({'kind':_0xea3880[_0x59ff4d(0x11b)],'timestamp':new Date()[_0x59ff4d(0xcd)](),'test_run_uuid':_0x136fdb,'file_name':path[_0x59ff4d(0xdf)](_0x127076['filePath']),'file_size':fs[_0x59ff4d(0xea)](_0x127076[_0x59ff4d(0x8c)])['size'],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x53f9c8){logger[_0x59ff4d(0xa0)]('Error\x20processing\x20trace\x20file\x20'+_0x127076[_0x59ff4d(0x8c)]+_0x59ff4d(0xef)+_0x53f9c8[_0x59ff4d(0x106)]);}});if(_0xea3880[_0x528a12(0x88)](_0x4ef426[_0x528a12(0xc6)],0x0)){const _0x565e78=_0x80918e[TestFrameworkConstants[_0x528a12(0xcf)]]||[];_0x80918e[TestFrameworkConstants[_0x528a12(0xcf)]]=[..._0x565e78,..._0x4ef426];}const _0x3bc431=TestInfo[_0x528a12(0x114)](_0x651c90)[TestFrameworkConstants[_0x528a12(0xa9)]]||{},_0x92a60b=_0xea3880[_0x528a12(0x129)](getManualUploadLogs,_0x3bc431,_0x4253ae[_0x528a12(0x8a)]()['get'](_0x651c90)[TestFrameworkConstants[_0x528a12(0x130)]]);if(_0xea3880[_0x528a12(0x88)](_0x92a60b[_0x528a12(0xc6)],0x0)){const _0x527e86=_0x80918e[TestFrameworkConstants[_0x528a12(0xcf)]]||[];_0x80918e[TestFrameworkConstants[_0x528a12(0xcf)]]=[..._0x527e86,..._0x92a60b];}const _0x4e47a4=_0x2fa8bd[_0x528a12(0xae)]||[],_0x22c02b=_0x80918e[TestFrameworkConstants[_0x528a12(0x74)]]||{};_0x4e47a4[_0x528a12(0xb9)](_0x5e31da=>{const _0x59841f=_0x528a12,{type:_0x278eaf}=_0x5e31da;let _0x3cf161=_0x5e31da['description'];if(!_0x278eaf)return;(_0xea3880[_0x59841f(0x8d)](_0x3cf161,undefined)||_0xea3880['WTSMy'](_0x3cf161,null)||_0xea3880[_0x59841f(0xb7)](_0xea3880[_0x59841f(0x94)](String,_0x3cf161)[_0x59841f(0xbf)](),''))&&(_0x3cf161=_0xea3880[_0x59841f(0xca)]);if(!_0x22c02b[_0x278eaf]){const _0x5221fb={};_0x5221fb[_0x59841f(0xee)]=_0xea3880[_0x59841f(0x84)],_0x5221fb['values']=[],_0x22c02b[_0x278eaf]=_0x5221fb;}else!_0x22c02b[_0x278eaf][_0x59841f(0xee)]&&(_0x22c02b[_0x278eaf][_0x59841f(0xee)]=_0xea3880[_0x59841f(0x84)]),!Array[_0x59841f(0x70)](_0x22c02b[_0x278eaf][_0x59841f(0x120)])&&(_0x22c02b[_0x278eaf][_0x59841f(0x120)]=[]);const _0x5b75f4=_0xea3880['lNVyQ'](String,_0x3cf161)[_0x59841f(0xd8)](',')[_0x59841f(0xc1)](_0x345eae=>_0x345eae[_0x59841f(0xbf)]());_0x22c02b[_0x278eaf][_0x59841f(0x120)]=[...new Set([..._0x22c02b[_0x278eaf][_0x59841f(0x120)],..._0x5b75f4])];}),_0x80918e[TestFrameworkConstants[_0x528a12(0x74)]]=_0x22c02b,TestInfo[_0x528a12(0xba)](_0x651c90,_0x80918e);const _0x42fdae={};return _0x42fdae[_0x651c90]=_0x80918e,_0x42fdae;}async['trackHookEvent'](_0x5999b2,_0x57de3d,_0x49f629,_0x3dfc22){const _0x1e0b28=a65_0x3acb85,_0x45a7c5={'NXYsp':function(_0x25a18e,_0xf31cfb){return _0x25a18e in _0xf31cfb;},'LwxQj':function(_0xeb40c2,_0x30e672){return _0xeb40c2(_0x30e672);},'CzKrA':function(_0x5cbdeb,_0x9ccf8b){return _0x5cbdeb(_0x9ccf8b);},'oYvbv':function(_0x103512,_0x1a80bb){return _0x103512===_0x1a80bb;},'hpvEb':function(_0x53cc6d){return _0x53cc6d();},'JSdhI':function(_0x1b9879,_0x23cbf9){return _0x1b9879===_0x23cbf9;},'KvWms':function(_0x23aa13,_0x1ed280){return _0x23aa13>_0x1ed280;},'xisvs':function(_0x1d33d0,_0xc5407f,_0xa7ff08){return _0x1d33d0(_0xc5407f,_0xa7ff08);},'NiasY':_0x1e0b28(0x73),'PUgfS':function(_0x514e97,_0x2139b0){return _0x514e97(_0x2139b0);},'OWuzV':function(_0xb90655,_0x5d3820){return _0xb90655(_0x5d3820);},'NCiXX':'failed','bwUEO':'passed','axUdO':function(_0x1cd39e,_0x22f906){return _0x1cd39e!==_0x22f906;},'AxdHx':function(_0x202f07,_0x4ca60f){return _0x202f07+_0x4ca60f;},'ybuMR':_0x1e0b28(0xc2)},_0x5350e1=_0x3dfc22['test'],_0x53bfe1=_0x3dfc22[_0x1e0b28(0xf6)],_0x5a008b=_0x3dfc22[_0x1e0b28(0x78)]['id'],_0x1168f1=_0x57de3d['toString']()['split']('.')[0x1];let _0x348eca=_0x5999b2[_0x1e0b28(0x8a)]()[_0x1e0b28(0xe5)](_0x5a008b)[TestFrameworkConstants[_0x1e0b28(0xcc)]];!_0x348eca&&(_0x348eca={});!_0x45a7c5['NXYsp'](_0x1168f1,_0x348eca)&&(_0x348eca[_0x1168f1]=[]);let _0x2ff46b=_0x5999b2[_0x1e0b28(0x8a)]()['get'](_0x5a008b)[TestFrameworkConstants[_0x1e0b28(0xb1)]];!_0x2ff46b&&(_0x2ff46b={});!_0x45a7c5[_0x1e0b28(0xb5)](_0x1168f1,_0x2ff46b)&&(_0x2ff46b[_0x1168f1]=[]);const _0x20d55f={[TestFrameworkConstants[_0x1e0b28(0xcc)]]:_0x348eca,[TestFrameworkConstants[_0x1e0b28(0xb1)]]:_0x2ff46b},_0x41e8c6={};_0x41e8c6[_0x5a008b]=_0x20d55f;const _0xc839a0=_0x41e8c6,_0x4856e7=_0x45a7c5[_0x1e0b28(0x8e)](getPlaywrightTestFilePath,_0x5350e1),_0x47cf45=_0x4856e7+':'+_0x45a7c5['CzKrA'](getPlaywrightTestLocation,_0x5350e1),_0x26c88e=TestInfo[_0x1e0b28(0x114)](_0x5a008b)[TestFrameworkConstants[_0x1e0b28(0x74)]]||{};if(_0x45a7c5[_0x1e0b28(0x126)](_0x49f629,HookState[_0x1e0b28(0xe4)])){const _0x11bb4b={'key':_0x1168f1,[TestFrameworkConstants[_0x1e0b28(0x6d)]]:_0x45a7c5[_0x1e0b28(0x132)](uuidv4),[TestFrameworkConstants['KEY_HOOK_RESULT']]:TestFrameworkConstants['DEFAULT_HOOK_RESULT'],[TestFrameworkConstants[_0x1e0b28(0x75)]]:_0x53bfe1[_0x1e0b28(0x10a)],[TestFrameworkConstants[_0x1e0b28(0xfc)]]:[],[TestFrameworkConstants[_0x1e0b28(0x122)]]:_0x53bfe1[_0x1e0b28(0x9c)],[TestFrameworkConstants['KEY_TEST_FILE_PATH']]:_0x4856e7,[TestFrameworkConstants[_0x1e0b28(0x113)]]:_0x47cf45,[TestFrameworkConstants['KEY_CUSTOM_TAGS']]:_0x26c88e};_0x348eca[_0x1168f1][_0x1e0b28(0x10c)](_0x11bb4b),_0xc839a0[_0x5a008b][TestFrameworkConstants[_0x1e0b28(0xec)]]=_0x1168f1,logger[_0x1e0b28(0x8b)](_0x1e0b28(0xdc)+_0x1168f1+_0x1e0b28(0x101)+_0x11bb4b+_0x1e0b28(0xed)+_0x3dfc22);}else{if(_0x45a7c5[_0x1e0b28(0xb6)](_0x49f629,HookState[_0x1e0b28(0x9a)])){const _0x158147=await _0x3dfc22[_0x1e0b28(0xaf)],_0x1fe0fe=_0x348eca[_0x1168f1]||[],_0x2fca03=_0x3dfc22[_0x1e0b28(0xf6)];logger[_0x1e0b28(0x8b)](_0x1e0b28(0xa8)+_0x1fe0fe+_0x1e0b28(0xe6)+_0x3dfc22);if(_0x45a7c5['KvWms'](_0x1fe0fe['length'],0x0)){const _0x564a9b=_0x1fe0fe[_0x1e0b28(0x95)]();if(_0x2fca03['error']){const _0x4fbaaf=_0x45a7c5[_0x1e0b28(0xf8)](failureData,_0x2fca03['error'],_0x45a7c5['NiasY']);_0x564a9b[TestFrameworkConstants['KEY_HOOK_FAILURE_TYPE']]=_0x45a7c5[_0x1e0b28(0x85)](getFailureType,_0x2fca03?.[_0x1e0b28(0xa0)][_0x1e0b28(0x106)]),_0x564a9b[TestFrameworkConstants[_0x1e0b28(0x124)]]=_0x45a7c5[_0x1e0b28(0xd6)](removeAnsiColors,_0x2fca03?.[_0x1e0b28(0xa0)][_0x1e0b28(0x106)]),_0x564a9b[TestFrameworkConstants['KEY_HOOK_RESULT']]=_0x45a7c5[_0x1e0b28(0xfb)],_0x564a9b[TestFrameworkConstants[_0x1e0b28(0xc3)]]=_0x4fbaaf;}else _0x564a9b[TestFrameworkConstants[_0x1e0b28(0x90)]]=_0x45a7c5['bwUEO'];_0x45a7c5[_0x1e0b28(0x79)](_0x158147,TestFrameworkConstants['DEFAULT_HOOK_RESULT'])&&(_0x564a9b[TestFrameworkConstants[_0x1e0b28(0x90)]]=!_0x2fca03[_0x1e0b28(0xa0)]?_0x45a7c5[_0x1e0b28(0x99)]:_0x45a7c5[_0x1e0b28(0xfb)]);const _0x19ddf2=new Date(_0x2fca03['startTime']),_0x11aadf=new Date(_0x45a7c5[_0x1e0b28(0xce)](_0x19ddf2['getTime'](),_0x2fca03[_0x1e0b28(0xde)]));_0x564a9b[TestFrameworkConstants[_0x1e0b28(0xfa)]]=_0x11aadf['toISOString'](),_0x564a9b[TestFrameworkConstants[_0x1e0b28(0x74)]]=_0x26c88e;const _0x2b786a=_0x564a9b[TestFrameworkConstants['KEY_HOOK_ID']];await this[_0x1e0b28(0xd7)](_0x5999b2,_0x57de3d,_0x2b786a,_0x45a7c5['ybuMR'],_0x3dfc22),!_0x2ff46b[_0x1168f1]&&(_0x2ff46b[_0x1168f1]=[]),_0x2ff46b[_0x1168f1][_0x1e0b28(0x10c)](_0x564a9b),_0xc839a0[_0x5a008b][TestFrameworkConstants[_0x1e0b28(0x7b)]]=_0x1168f1;}}}return _0xc839a0;}async[a65_0x3acb85(0xd7)](_0x586819,_0x36d052,_0x114b69,_0x589c9b,_0x5e0f3a){const _0x816ae=a65_0x3acb85,_0x1b870b={'flShw':function(_0x34c754,_0x503d61){return _0x34c754===_0x503d61;},'XBytA':_0x816ae(0x78),'DUzIn':function(_0x5d76f9,_0x3c6cf4,_0x55e998){return _0x5d76f9(_0x3c6cf4,_0x55e998);},'dtaiR':function(_0x5a18cc,_0x40faa2,_0x12c10d,_0x345fa3){return _0x5a18cc(_0x40faa2,_0x12c10d,_0x345fa3);},'TUZhc':function(_0x4c4e93,_0x1995dd,_0xadb7f3){return _0x4c4e93(_0x1995dd,_0xadb7f3);},'qzUFO':function(_0xafe849,_0x384ca6,_0x308a3d){return _0xafe849(_0x384ca6,_0x308a3d);},'NjrHc':function(_0x4681cf,_0x3972c6,_0x46d8d1,_0x532bda,_0x17b22c){return _0x4681cf(_0x3972c6,_0x46d8d1,_0x532bda,_0x17b22c);},'xLKRB':_0x816ae(0xc2),'zqOIO':function(_0x426995,_0x3a59d7,_0xab600b,_0xad81f3,_0x53b1e7){return _0x426995(_0x3a59d7,_0xab600b,_0xad81f3,_0x53b1e7);}};try{if(_0x1b870b[_0x816ae(0x92)](_0x589c9b,_0x1b870b['XBytA'])){const _0x33374a=await _0x5e0f3a[_0x816ae(0xaf)],_0x943f9=_0x5e0f3a[_0x816ae(0x78)]['id'],_0x11e6c6=_0x5e0f3a['test'];logger[_0x816ae(0x8b)](_0x816ae(0x93)+_0x943f9);const _0x427e60=_0x586819[_0x816ae(0x8a)]()[_0x816ae(0xe5)](_0x943f9)[TestFrameworkConstants[_0x816ae(0x130)]];await _0x1b870b[_0x816ae(0xbc)](sendTraceZip,_0x33374a,_0x427e60);const {steps:_0x4914b3,logs:_0x1b69e5}=_0x1b870b[_0x816ae(0x103)](getStepsAndLogs,_0x33374a[_0x816ae(0xab)],_0x586819[_0x816ae(0x8a)]()['get'](_0x943f9)[TestFrameworkConstants[_0x816ae(0x130)]],_0x1b870b[_0x816ae(0x86)]),_0x40610a=_0x1b870b[_0x816ae(0x77)](getScreenshots,_0x33374a,_0x586819[_0x816ae(0x8a)]()[_0x816ae(0xe5)](_0x943f9)[TestFrameworkConstants['KEY_TEST_UUID']]),{_:_0xdbcc1e,logs:_0x801907}=_0x1b870b[_0x816ae(0xbc)](getFailureData,_0x33374a['errors'],{'test_run_uuid':_0x586819[_0x816ae(0x8a)]()[_0x816ae(0xe5)](_0x943f9)[TestFrameworkConstants[_0x816ae(0x130)]]}),_0x38aa38=TestInfo[_0x816ae(0x114)](_0x943f9)[TestFrameworkConstants[_0x816ae(0xa9)]]||{},_0x622fd3=_0x1b870b['qzUFO'](getMediaArtifactsLogs,_0x38aa38,_0x586819[_0x816ae(0x8a)]()['get'](_0x943f9)[TestFrameworkConstants[_0x816ae(0x130)]]),_0x5e8347=_0x586819[_0x816ae(0x8a)]()[_0x816ae(0xe5)](_0x943f9),{[TestFrameworkConstants[_0x816ae(0x6c)]]:_0x306549='',[TestFrameworkConstants[_0x816ae(0x96)]]:_0x34ab40=''}=_0x5e8347,_0x5b1c58={'platformIndex':'0','logs':[..._0x1b69e5||[],..._0x40610a||[],..._0x801907||[],..._0x622fd3||[]],'testFrameworkName':_0x306549,'testFrameworkVersion':_0x34ab40,'testFrameworkState':_0x36d052[_0x816ae(0xe9)]()['split']('.')[0x1]};_0x1b870b[_0x816ae(0xad)](updatePayloadForTraceLogs,_0x5b1c58,_0x5e0f3a,_0x943f9,_0x586819),logger[_0x816ae(0x8b)](_0x816ae(0xe3)+_0x943f9+'\x20payload='+util[_0x816ae(0x10b)](_0x5b1c58));const _0x5084d9=await GrpcClient[_0x816ae(0xd3)]()[_0x816ae(0xc5)](_0x5b1c58);}else{const {steps:_0x598979,logs:_0x1af370}=_0x1b870b[_0x816ae(0x103)](getStepsAndLogs,_0x5e0f3a[_0x816ae(0xf6)]['steps'],_0x114b69,_0x1b870b[_0x816ae(0x10d)]),_0x297d84=_0x5e0f3a[_0x816ae(0x78)]['id'];logger[_0x816ae(0x8b)](_0x816ae(0x93)+_0x297d84);const _0x35cd44=_0x586819[_0x816ae(0x8a)]()[_0x816ae(0xe5)](_0x297d84),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x26461c='',[TestFrameworkConstants[_0x816ae(0x96)]]:_0x428bc8=''}=_0x35cd44,_0x1cff95={'platformIndex':'0','logs':_0x1af370,'testFrameworkName':_0x26461c,'testFrameworkVersion':_0x428bc8,'testFrameworkState':_0x36d052[_0x816ae(0xe9)]()['split']('.')[0x1]};_0x1b870b[_0x816ae(0x9e)](updatePayloadForTraceLogs,_0x1cff95,_0x5e0f3a,_0x297d84,_0x586819),logger[_0x816ae(0x8b)](_0x816ae(0xe3)+_0x297d84+_0x816ae(0x123)+util['inspect'](_0x1cff95));const _0xf36fd8=await GrpcClient['getInstance']()[_0x816ae(0xc5)](_0x1cff95);}}catch(_0x32e5da){logger[_0x816ae(0xa0)](_0x816ae(0x8f)+util[_0x816ae(0x10e)](_0x32e5da));}}}module['exports']=PlaywrightTestFramework;