const a67_0x42d178=a67_0x263d;(function(_0x58f0c6,_0x1361dd){const _0x245cac=a67_0x263d,_0x1ebf33=_0x58f0c6();while(!![]){try{const _0x36c3d1=parseInt(_0x245cac(0x1b7))/0x1+parseInt(_0x245cac(0x1be))/0x2*(-parseInt(_0x245cac(0x1bf))/0x3)+-parseInt(_0x245cac(0x1e9))/0x4+-parseInt(_0x245cac(0x20a))/0x5*(parseInt(_0x245cac(0x23e))/0x6)+-parseInt(_0x245cac(0x1a3))/0x7*(parseInt(_0x245cac(0x24c))/0x8)+parseInt(_0x245cac(0x1d4))/0x9*(parseInt(_0x245cac(0x23d))/0xa)+parseInt(_0x245cac(0x1d2))/0xb*(parseInt(_0x245cac(0x24a))/0xc);if(_0x36c3d1===_0x1361dd)break;else _0x1ebf33['push'](_0x1ebf33['shift']());}catch(_0xbf5d9){_0x1ebf33['push'](_0x1ebf33['shift']());}}}(a67_0x1a04,0x2c02a));const TestFramework=require(a67_0x42d178(0x23a)),TestFrameworkState=require('../state/testFrameworkState.js'),HookState=require('../state/hookState.js'),{createClassLogger}=require('../../../helpers/classLogger.js'),TestFrameworkInstance=require(a67_0x42d178(0x1a7)),CLIUtils=require('../cliUtils.js'),TrackedInstance=require(a67_0x42d178(0x1ac)),TestFrameworkConstants=require(a67_0x42d178(0x1f4)),logger=createClassLogger(a67_0x42d178(0x206)),{v4:uuidv4}=require(a67_0x42d178(0x1e6)),util=require(a67_0x42d178(0x1ea)),{getPlaywrightSessionName,getPlaywrightTestFilePath,getPlaywrightTestId,getPlaywrightTestTitle,getPlaywrightTestLocation,getPlaywrightTestTags,getPlaywrightTestCode,getPlaywrightTestScope,getPlaywrightTestScopes,getStepsAndLogs,getScreenshots,getVideos,getPlaywrightCustomRerunParam,getMediaArtifactsLogs,getManualUploadLogs,updatePayloadForTraceLogs}=require(a67_0x42d178(0x257)),TestInfo=require(a67_0x42d178(0x24e)),GrpcClient=require(a67_0x42d178(0x1e4)),{removeAnsiColors,getFailureType,failureData}=require(a67_0x42d178(0x1db)),{getFailureData,getTestTags,getTestRunIdentifier}=require(a67_0x42d178(0x1d5)),{findNestedKey,sendTraceZip,validateFilePath}=require('../../playwright/reporter/pwUtils'),path=require(a67_0x42d178(0x21d)),fs=require('fs'),helper=require('../../../../src/helpers/helper'),{PLAYWRIGHT_TRACE_LOGS}=require(a67_0x42d178(0x1e7));function a67_0x263d(_0x58de5f,_0x459043){const _0x1a049c=a67_0x1a04();return a67_0x263d=function(_0x263df1,_0x2e0d34){_0x263df1=_0x263df1-0x184;let _0x4a6eb3=_0x1a049c[_0x263df1];return _0x4a6eb3;},a67_0x263d(_0x58de5f,_0x459043);}class PlaywrightTestFramework extends TestFramework{constructor(_0x330045,_0x3c65a9,_0x2880d7){super(_0x330045,_0x3c65a9,_0x2880d7);}async[a67_0x42d178(0x1e2)](_0x7f8c19,_0x4f39f1,_0x398719={}){const _0x211a7b=a67_0x42d178,_0x421590={'vGeIe':function(_0x21467b,_0x1c264a){return _0x21467b===_0x1c264a;},'wnLbo':function(_0x252932,_0x4107b6,_0x570788){return _0x252932(_0x4107b6,_0x570788);},'fvame':function(_0x3394bb,_0x19b33c){return _0x3394bb===_0x19b33c;},'ITGCx':function(_0x29fac1,_0x22994d){return _0x29fac1===_0x22994d;},'qUpvI':'test','HFGJP':_0x211a7b(0x217)};super['trackEvent'](_0x7f8c19,_0x4f39f1,_0x398719);if(_0x421590[_0x211a7b(0x202)](_0x7f8c19,TestFrameworkState[_0x211a7b(0x1fb)])){const _0x598f36=TestInfo[_0x211a7b(0x22c)](_0x398719[_0x211a7b(0x19e)],_0x398719['test']['retry']);TestInfo['setTestDetails'](_0x598f36,_0x398719[_0x211a7b(0x236)],!![]);}const _0x3e5863=this[_0x211a7b(0x241)](_0x7f8c19,_0x4f39f1,_0x398719);if(!_0x3e5863)return;logger[_0x211a7b(0x247)](_0x211a7b(0x226)+_0x7f8c19+_0x211a7b(0x1fa)+_0x4f39f1+'\x20instanceId='+_0x3e5863[_0x211a7b(0x189)]());try{if(_0x421590[_0x211a7b(0x202)](_0x4f39f1,HookState[_0x211a7b(0x23b)])&&_0x421590['vGeIe'](_0x7f8c19,TestFrameworkState[_0x211a7b(0x256)])){const _0x1bc96d=_0x398719[_0x211a7b(0x19e)];logger[_0x211a7b(0x247)]('trackEvent\x20loading\x20testData\x20for\x20testId:\x20'+_0x1bc96d['id']+'}');const _0x4d08de=TestInfo['getTestUUID'](_0x421590['wnLbo'](getTestRunIdentifier,_0x1bc96d,_0x398719[_0x211a7b(0x236)][_0x211a7b(0x21f)]));_0x3e5863[_0x211a7b(0x196)](this[_0x211a7b(0x1c8)](_0x4d08de,_0x1bc96d,_0x398719[_0x211a7b(0x236)])),logger['debug'](_0x211a7b(0x185)+_0x1bc96d['id']+_0x211a7b(0x22d)+_0x7f8c19+_0x211a7b(0x1fd)+_0x4f39f1+_0x211a7b(0x21a)+_0x3e5863[_0x211a7b(0x189)]());}if(_0x421590[_0x211a7b(0x233)](_0x4f39f1,HookState[_0x211a7b(0x1e3)])&&_0x421590[_0x211a7b(0x1ae)](_0x7f8c19,TestFrameworkState[_0x211a7b(0x256)])){const _0x1e9168=_0x398719[_0x211a7b(0x19e)],_0x9d6db=_0x398719[_0x211a7b(0x236)];logger[_0x211a7b(0x247)]('trackEvent\x20loading\x20testResults\x20for\x20testId:\x20'+_0x1e9168['id']),_0x3e5863[_0x211a7b(0x196)](this[_0x211a7b(0x232)](_0x1e9168['id'],_0x9d6db,_0x1e9168)),await this[_0x211a7b(0x1f5)](_0x3e5863,_0x7f8c19,_0x4f39f1,_0x421590[_0x211a7b(0x212)],_0x398719);}if(CLIUtils[_0x211a7b(0x1cc)](_0x7f8c19[_0x211a7b(0x1c5)]()['split']('.')[0x1])){const _0x9e971d=await this[_0x211a7b(0x190)](_0x3e5863,_0x7f8c19,_0x4f39f1,_0x398719);_0x3e5863[_0x211a7b(0x196)](_0x9e971d);}}catch(_0x13c78d){logger[_0x211a7b(0x223)](util['format'](_0x421590[_0x211a7b(0x187)],_0x7f8c19,_0x4f39f1,_0x398719['length'],_0x13c78d));}_0x398719['instance']=_0x3e5863,await this[_0x211a7b(0x1dd)](_0x3e5863,_0x7f8c19,_0x4f39f1,_0x398719);}[a67_0x42d178(0x241)](_0x5d8318,_0x126bf4,_0x1b0aac={}){const _0x38bd65=a67_0x42d178,_0x44ff0d={};_0x44ff0d[_0x38bd65(0x1d3)]=function(_0x159257,_0x256381){return _0x159257===_0x256381;},_0x44ff0d[_0x38bd65(0x1aa)]=function(_0x4144e6,_0x5df164){return _0x4144e6===_0x5df164;};const _0x19d84f=_0x44ff0d;let _0x1817f9=null;return(_0x19d84f[_0x38bd65(0x1d3)](_0x5d8318,TestFrameworkState[_0x38bd65(0x1c6)])||_0x19d84f[_0x38bd65(0x1aa)](_0x5d8318,TestFrameworkState[_0x38bd65(0x1a4)]))&&this['trackPlaywrightInstance'](_0x5d8318,_0x1b0aac),_0x1817f9=TestFramework[_0x38bd65(0x1bb)](),_0x1817f9;}['trackPlaywrightInstance'](_0x2af0e7,_0x5556f6){const _0x3880dd=a67_0x42d178,_0x438036=CLIUtils['getCurrentInstanceName'](),_0x452d20=TrackedInstance[_0x3880dd(0x23c)](_0x438036);let _0x3acd3c=null;logger[_0x3880dd(0x19b)](_0x3880dd(0x207)+_0x438036+',\x20state='+_0x2af0e7),_0x3acd3c=new TestFrameworkInstance(_0x452d20,this['getTestFrameworks'](),this[_0x3880dd(0x194)](),_0x2af0e7,HookState[_0x3880dd(0x1a4)]),TestFramework[_0x3880dd(0x1fc)](_0x452d20,_0x3acd3c),logger[_0x3880dd(0x19b)](_0x3880dd(0x243)+_0x452d20[_0x3880dd(0x1c4)]()+_0x3880dd(0x1b9)+_0x438036);}[a67_0x42d178(0x1c8)](_0x359e0a,_0x15a7b0,_0x2ee746){const _0x67ed8=a67_0x42d178,_0x1c8f4a={'UFWHM':function(_0x5a334d,_0x15138f){return _0x5a334d(_0x15138f);},'TrHEs':function(_0x53b19d,_0x34db01){return _0x53b19d(_0x34db01);},'KJQXO':function(_0x5194c5,_0x4e682c){return _0x5194c5(_0x4e682c);},'fzWwn':function(_0xa4821d,_0x196fe3){return _0xa4821d(_0x196fe3);},'ZkgVh':function(_0x3e167c,_0x39e4e7){return _0x3e167c(_0x39e4e7);},'hROwX':function(_0x2341cf,_0x5dceff){return _0x2341cf(_0x5dceff);},'KbEcf':function(_0x470662,_0x53058f){return _0x470662(_0x53058f);},'WiTXc':function(_0xfa0da4,_0x539109,_0x35d6c6){return _0xfa0da4(_0x539109,_0x35d6c6);}},_0x379a7b=_0x1c8f4a[_0x67ed8(0x1a5)](getPlaywrightTestId,_0x15a7b0),_0x55150c=_0x1c8f4a[_0x67ed8(0x1a5)](getPlaywrightTestTitle,_0x15a7b0),_0x24b70e=_0x1c8f4a[_0x67ed8(0x1d6)](getTestTags,_0x15a7b0),_0x4187a6=_0x1c8f4a[_0x67ed8(0x1dc)](getPlaywrightTestCode,_0x15a7b0),_0xc4d987=_0x1c8f4a['fzWwn'](getPlaywrightTestFilePath,_0x15a7b0),_0xa66f00=_0xc4d987+':'+_0x1c8f4a[_0x67ed8(0x21b)](getPlaywrightTestLocation,_0x15a7b0),_0x1a305a=_0x1c8f4a[_0x67ed8(0x1ce)](getPlaywrightTestScope,_0x15a7b0),_0x69665f=_0x1c8f4a[_0x67ed8(0x218)](getPlaywrightTestScopes,_0x15a7b0),_0xd88b64=_0x1c8f4a[_0x67ed8(0x218)](getPlaywrightSessionName,_0x15a7b0),_0x11f340=this[_0x67ed8(0x249)]()[0x0],_0x56f5cd=_0x1c8f4a[_0x67ed8(0x1f2)](getTestRunIdentifier,_0x15a7b0,_0x2ee746['retry']),_0x28a895={[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x11f340,[TestFrameworkConstants[_0x67ed8(0x20d)]]:this[_0x67ed8(0x194)]()[_0x11f340],[TestFrameworkConstants[_0x67ed8(0x216)]]:[],[TestFrameworkConstants[_0x67ed8(0x231)]]:{},[TestFrameworkConstants[_0x67ed8(0x209)]]:{},[TestFrameworkConstants[_0x67ed8(0x229)]]:_0x359e0a,[TestFrameworkConstants[_0x67ed8(0x1b5)]]:TestFrameworkConstants['DEFAULT_TEST_RESULT'],[TestFrameworkConstants[_0x67ed8(0x1d1)]]:_0xd88b64,[TestFrameworkConstants['KEY_TEST_FILE_PATH']]:_0xc4d987,[TestFrameworkConstants[_0x67ed8(0x1a0)]]:_0x379a7b,[TestFrameworkConstants['KEY_TEST_NAME']]:_0x55150c,[TestFrameworkConstants[_0x67ed8(0x1f3)]]:_0xa66f00,[TestFrameworkConstants['KEY_TEST_CODE']]:_0x4187a6,[TestFrameworkConstants[_0x67ed8(0x246)]]:_0x24b70e,[TestFrameworkConstants[_0x67ed8(0x24d)]]:_0x15a7b0[_0x67ed8(0x1d9)][0x0][_0x67ed8(0x1c7)],[TestFrameworkConstants['KEY_TEST_SCOPE']]:_0x1a305a,[TestFrameworkConstants['KEY_TEST_SCOPES']]:_0x69665f,[TestFrameworkConstants[_0x67ed8(0x242)]]:_0x1c8f4a['fzWwn'](getPlaywrightCustomRerunParam,_0x15a7b0)};TestInfo['setTestDetails'](_0x56f5cd,_0x28a895);const _0x3ab8b5={};return _0x3ab8b5[_0x56f5cd]=_0x28a895,_0x3ab8b5;}[a67_0x42d178(0x232)](_0x262ed9,_0x4864f8,_0x45f4a3){const _0x528590=a67_0x42d178,_0xf11e42={'ErSBg':function(_0x3c063c,_0x473e9c){return _0x3c063c(_0x473e9c);},'WDjtH':_0x528590(0x184),'ajJBJ':function(_0x32778d,_0x5aa88d){return _0x32778d===_0x5aa88d;},'hdBzA':function(_0x330051,_0x163f05){return _0x330051===_0x163f05;},'xVeCn':function(_0x41f2d0,_0x12a97c){return _0x41f2d0===_0x12a97c;},'ingTh':function(_0x592cb5,_0x29cfd8){return _0x592cb5(_0x29cfd8);},'hTHmT':_0x528590(0x19d),'cmpgh':'multi_dropdown','XCdQd':function(_0x4d5a61,_0x2325c0){return _0x4d5a61(_0x2325c0);},'MKXqA':function(_0x3d1efe,_0x15330c,_0x2ef3c2){return _0x3d1efe(_0x15330c,_0x2ef3c2);},'CzJPy':function(_0x2b0c96,_0x2bfb97){return _0x2b0c96+_0x2bfb97;},'rlBBs':_0x528590(0x1c2),'UExGN':_0x528590(0x1f8),'Wxqgi':function(_0x55e713,_0x512ac9){return _0x55e713===_0x512ac9;},'rPUce':_0x528590(0x214),'aAvRG':function(_0x53b4a3,_0x1e363a){return _0x53b4a3===_0x1e363a;},'TJGwq':_0x528590(0x1b2),'vRERA':function(_0x107479,_0xfe1b0d){return _0x107479===_0xfe1b0d;},'GYLFD':_0x528590(0x1bc),'gCoGo':function(_0x25edeb,_0x2d8a7c,_0x319005){return _0x25edeb(_0x2d8a7c,_0x319005);},'FCpMK':function(_0x288227,_0xc482b5){return _0x288227||_0xc482b5;},'Qqcye':function(_0x8bce1e,_0x5ed607){return _0x8bce1e(_0x5ed607);},'wyhIn':function(_0xe52386,_0x4f713d){return _0xe52386(_0x4f713d);},'lcaNi':function(_0x3a3685,_0x334b58){return _0x3a3685>_0x334b58;},'iblTZ':function(_0x4b19e2,_0xefe815){return _0x4b19e2-_0xefe815;},'CQORX':function(_0x451f86,_0x651bb7,_0x2e842){return _0x451f86(_0x651bb7,_0x2e842);},'gfXyI':_0x528590(0x21d),'gfEnB':function(_0x95b093,_0x2dfc9c){return _0x95b093(_0x2dfc9c);},'dmvsO':function(_0x45d647,_0x126515,_0x2a24ec){return _0x45d647(_0x126515,_0x2a24ec);}};logger['debug'](_0x528590(0x193)+_0x262ed9);const _0x55c7e8=_0xf11e42[_0x528590(0x1da)](getTestRunIdentifier,_0x45f4a3,_0x4864f8[_0x528590(0x21f)]),_0x5cc643=new Date(_0x4864f8['startTime']),_0x47439d=_0x4864f8[_0x528590(0x222)],_0x1327eb=new Date(_0xf11e42[_0x528590(0x245)](_0x5cc643[_0x528590(0x244)](),_0x47439d)),_0x296ff7=_0x4864f8[_0x528590(0x1b6)],_0x1b634d=TestInfo[_0x528590(0x1ec)](_0x55c7e8)[TestFrameworkConstants[_0x528590(0x1b1)]]||{};let _0x880f52=_0x296ff7;if(_0xf11e42['xVeCn'](_0x4864f8[_0x528590(0x1b6)],_0x45f4a3['expectedStatus']))_0x880f52=_0xf11e42[_0x528590(0x250)](_0x4864f8[_0x528590(0x1b6)],_0xf11e42[_0x528590(0x255)])?_0xf11e42[_0x528590(0x255)]:_0xf11e42[_0x528590(0x215)];else{(_0xf11e42[_0x528590(0x1e5)](_0x880f52,_0xf11e42[_0x528590(0x215)])||_0xf11e42[_0x528590(0x237)](_0x880f52,_0xf11e42[_0x528590(0x1cd)])||_0xf11e42['aAvRG'](_0x880f52,_0xf11e42[_0x528590(0x1a2)]))&&(_0x880f52=_0xf11e42['rPUce']);if(_0xf11e42['vRERA'](_0x4864f8['status'],_0xf11e42[_0x528590(0x215)])&&_0xf11e42[_0x528590(0x1ee)](_0x45f4a3[_0x528590(0x219)],_0xf11e42[_0x528590(0x1cd)])){const _0x4fe4ed={};_0x4fe4ed[_0x528590(0x1ab)]=_0xf11e42[_0x528590(0x192)],_0x4fe4ed[_0x528590(0x20f)]=_0xf11e42[_0x528590(0x192)],_0x4864f8[_0x528590(0x223)]=_0x4fe4ed,_0x4864f8[_0x528590(0x1f0)]=[_0x4864f8[_0x528590(0x223)]];}}const {failureData:_0x1c3e6f,logs:_0x53adda}=_0xf11e42[_0x528590(0x1b0)](getFailureData,_0x4864f8?.[_0x528590(0x1f0)],{}),_0x33b916={[TestFrameworkConstants[_0x528590(0x1af)]]:_0xf11e42['FCpMK'](_0x1c3e6f,null),[TestFrameworkConstants[_0x528590(0x21c)]]:_0x4864f8?.[_0x528590(0x223)]&&_0xf11e42['Qqcye'](getFailureType,_0x4864f8['error']['message']),[TestFrameworkConstants[_0x528590(0x186)]]:_0x4864f8?.['error']&&_0xf11e42['wyhIn'](removeAnsiColors,_0x4864f8[_0x528590(0x223)]['message']),[TestFrameworkConstants[_0x528590(0x1cb)]]:[],[TestFrameworkConstants['KEY_TEST_RESULT']]:_0x880f52,[TestFrameworkConstants[_0x528590(0x254)]]:_0x1327eb[_0x528590(0x208)](),[TestFrameworkConstants['KEY_TEST_RESULT_AT']]:new Date()[_0x528590(0x208)](),[TestFrameworkConstants[_0x528590(0x1b1)]]:_0x1b634d};if(_0x4864f8&&_0xf11e42[_0x528590(0x1c9)](_0x4864f8[_0x528590(0x21f)],0x0)){const _0x592d00=TestInfo['getTestUUID'](_0xf11e42[_0x528590(0x1b0)](getTestRunIdentifier,_0x45f4a3,_0xf11e42[_0x528590(0x18b)](_0x4864f8[_0x528590(0x21f)],0x1)));_0x33b916[TestFrameworkConstants[_0x528590(0x1f9)]]=_0x592d00;}const _0xf1b8e7={};_0xf1b8e7['test']=_0x45f4a3;const _0x47f213=this[_0x528590(0x241)](TestFrameworkState[_0x528590(0x256)],HookState[_0x528590(0x1e3)],_0xf1b8e7),_0x2d8c68=_0x47f213[_0x528590(0x1c0)]()['get'](_0x55c7e8)[TestFrameworkConstants[_0x528590(0x229)]],_0x55ef6c=[],_0x22bb6f=_0xf11e42[_0x528590(0x22f)](findNestedKey,_0x4864f8,_0xf11e42[_0x528590(0x1de)]);if(_0x22bb6f&&_0xf11e42[_0x528590(0x240)](validateFilePath,_0x22bb6f))try{_0x55ef6c[_0x528590(0x1eb)]({'kind':_0xf11e42[_0x528590(0x1ad)],'timestamp':new Date()[_0x528590(0x208)](),'test_run_uuid':_0x2d8c68,'file_name':path['basename'](_0x22bb6f),'file_size':fs[_0x528590(0x1fe)](_0x22bb6f)['size'],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x4ffca0){logger[_0x528590(0x223)](_0x528590(0x1c3)+_0x22bb6f+':\x20'+_0x4ffca0[_0x528590(0x1ab)]);}const _0x4da653=TestInfo['getTraceFilePaths'](),_0x3a62a9=_0x4da653['filter'](_0x5bb718=>_0x5bb718['testUId']===_0x2d8c68);_0x3a62a9['forEach'](_0x762094=>{const _0x7436dc=_0x528590;if(_0x762094['filePath']&&_0xf11e42[_0x7436dc(0x20c)](validateFilePath,_0x762094['filePath'])&&!_0x55ef6c[_0x7436dc(0x1a9)](_0x1ae05b=>_0x1ae05b[_0x7436dc(0x19f)]===path[_0x7436dc(0x1ca)](_0x762094[_0x7436dc(0x225)])))try{_0x55ef6c[_0x7436dc(0x1eb)]({'kind':_0xf11e42[_0x7436dc(0x1ad)],'timestamp':new Date()['toISOString'](),'test_run_uuid':_0x2d8c68,'file_name':path[_0x7436dc(0x1ca)](_0x762094[_0x7436dc(0x225)]),'file_size':fs['statSync'](_0x762094[_0x7436dc(0x225)])['size'],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x3a60de){logger['error']('Error\x20processing\x20trace\x20file\x20'+_0x762094[_0x7436dc(0x225)]+_0x7436dc(0x24f)+_0x3a60de[_0x7436dc(0x1ab)]);}});if(_0xf11e42['lcaNi'](_0x55ef6c['length'],0x0)){const _0x6dd551=_0x33b916[TestFrameworkConstants[_0x528590(0x1cb)]]||[];_0x33b916[TestFrameworkConstants[_0x528590(0x1cb)]]=[..._0x6dd551,..._0x55ef6c];}const _0x23764a=TestInfo[_0x528590(0x1ec)](_0x55c7e8)[TestFrameworkConstants[_0x528590(0x21e)]]||{},_0x30751e=_0xf11e42['dmvsO'](getManualUploadLogs,_0x23764a,_0x47f213['getAllData']()[_0x528590(0x191)](_0x55c7e8)[TestFrameworkConstants[_0x528590(0x229)]]);if(_0xf11e42[_0x528590(0x1c9)](_0x30751e['length'],0x0)){const _0x3028c2=_0x33b916[TestFrameworkConstants[_0x528590(0x1cb)]]||[];_0x33b916[TestFrameworkConstants['KEY_LOGS']]=[..._0x3028c2,..._0x30751e];}const _0x1b29ac=_0x45f4a3['annotations']||[],_0x3727f0=_0x33b916[TestFrameworkConstants['KEY_CUSTOM_TAGS']]||{};_0x1b29ac[_0x528590(0x200)](_0x41242f=>{const _0x39925e=_0x528590,{type:_0xb5c9d1}=_0x41242f;let _0xaff827=_0x41242f['description'];if(!_0xb5c9d1)return;(_0xf11e42['ajJBJ'](_0xaff827,undefined)||_0xf11e42[_0x39925e(0x237)](_0xaff827,null)||_0xf11e42[_0x39925e(0x250)](_0xf11e42[_0x39925e(0x1d7)](String,_0xaff827)['trim'](),''))&&(_0xaff827=_0xf11e42[_0x39925e(0x1ef)]);if(!_0x3727f0[_0xb5c9d1]){const _0x580f9b={};_0x580f9b[_0x39925e(0x199)]=_0xf11e42[_0x39925e(0x195)],_0x580f9b['values']=[],_0x3727f0[_0xb5c9d1]=_0x580f9b;}else!_0x3727f0[_0xb5c9d1][_0x39925e(0x199)]&&(_0x3727f0[_0xb5c9d1][_0x39925e(0x199)]=_0xf11e42[_0x39925e(0x195)]),!Array[_0x39925e(0x19c)](_0x3727f0[_0xb5c9d1][_0x39925e(0x18f)])&&(_0x3727f0[_0xb5c9d1]['values']=[]);const _0x354710=_0xf11e42['XCdQd'](String,_0xaff827)[_0x39925e(0x1ba)](',')[_0x39925e(0x1a6)](_0x35a6a5=>_0x35a6a5['trim']());_0x3727f0[_0xb5c9d1][_0x39925e(0x18f)]=[...new Set([..._0x3727f0[_0xb5c9d1]['values'],..._0x354710])];}),_0x33b916[TestFrameworkConstants[_0x528590(0x1b1)]]=_0x3727f0,TestInfo[_0x528590(0x1b8)](_0x55c7e8,_0x33b916);const _0x4c8c72={};return _0x4c8c72[_0x55c7e8]=_0x33b916,_0x4c8c72;}async[a67_0x42d178(0x190)](_0x813222,_0x178c2d,_0x492b41,_0x2ae089){const _0x39fddb=a67_0x42d178,_0x3ffbe3={'dnXVm':function(_0x356b70,_0x5add68,_0x21410c){return _0x356b70(_0x5add68,_0x21410c);},'KzmZZ':function(_0x103efe,_0x50fea7){return _0x103efe in _0x50fea7;},'RqXxJ':function(_0x30d98b,_0x37a2d6){return _0x30d98b(_0x37a2d6);},'npRLQ':function(_0x41033a,_0x4897cf){return _0x41033a===_0x4897cf;},'ldkZy':function(_0xe8c2b4){return _0xe8c2b4();},'UoyXK':function(_0xa91ae8,_0x51d340){return _0xa91ae8>_0x51d340;},'mWQmF':function(_0x54898b,_0x4f68fc,_0x47afa5){return _0x54898b(_0x4f68fc,_0x47afa5);},'kUFcL':_0x39fddb(0x198),'BzVsN':_0x39fddb(0x214),'ylCyr':_0x39fddb(0x1f8),'BGvOJ':function(_0x28d5e3,_0x47a187){return _0x28d5e3!==_0x47a187;},'VwmLo':function(_0x1973ae,_0x2da24a){return _0x1973ae+_0x2da24a;},'WeojT':_0x39fddb(0x20e)},_0x49dc44=_0x2ae089[_0x39fddb(0x19e)],_0x55a80a=_0x2ae089[_0x39fddb(0x197)],_0x4d963d=_0x3ffbe3[_0x39fddb(0x210)](getTestRunIdentifier,_0x49dc44,_0x2ae089[_0x39fddb(0x236)][_0x39fddb(0x21f)]),_0x1731c3=_0x178c2d[_0x39fddb(0x1c5)]()[_0x39fddb(0x1ba)]('.')[0x1];let _0x46e3f5=_0x813222[_0x39fddb(0x1c0)]()[_0x39fddb(0x191)](_0x4d963d)[TestFrameworkConstants[_0x39fddb(0x209)]];!_0x46e3f5&&(_0x46e3f5={});!_0x3ffbe3[_0x39fddb(0x1ff)](_0x1731c3,_0x46e3f5)&&(_0x46e3f5[_0x1731c3]=[]);let _0x266679=_0x813222['getAllData']()[_0x39fddb(0x191)](_0x4d963d)[TestFrameworkConstants['KEY_HOOKS_FINISHED']];!_0x266679&&(_0x266679={});!_0x3ffbe3[_0x39fddb(0x1ff)](_0x1731c3,_0x266679)&&(_0x266679[_0x1731c3]=[]);const _0x4147a7={[TestFrameworkConstants[_0x39fddb(0x209)]]:_0x46e3f5,[TestFrameworkConstants[_0x39fddb(0x231)]]:_0x266679},_0x11841d={};_0x11841d[_0x4d963d]=_0x4147a7;const _0x5836e9=_0x11841d,_0x111383=_0x3ffbe3['RqXxJ'](getPlaywrightTestFilePath,_0x49dc44),_0xb108b=_0x111383+':'+_0x3ffbe3[_0x39fddb(0x1b3)](getPlaywrightTestLocation,_0x49dc44),_0xc50673=TestInfo[_0x39fddb(0x1ec)](_0x4d963d)[TestFrameworkConstants[_0x39fddb(0x1b1)]]||{};if(_0x3ffbe3[_0x39fddb(0x188)](_0x492b41,HookState[_0x39fddb(0x23b)])){const _0x9579aa={'key':_0x1731c3,[TestFrameworkConstants[_0x39fddb(0x1f7)]]:_0x3ffbe3['ldkZy'](uuidv4),[TestFrameworkConstants[_0x39fddb(0x211)]]:TestFrameworkConstants[_0x39fddb(0x230)],[TestFrameworkConstants[_0x39fddb(0x1f1)]]:_0x55a80a[_0x39fddb(0x1c7)],[TestFrameworkConstants[_0x39fddb(0x235)]]:[],[TestFrameworkConstants[_0x39fddb(0x1a1)]]:_0x55a80a[_0x39fddb(0x1d8)],[TestFrameworkConstants[_0x39fddb(0x224)]]:_0x111383,[TestFrameworkConstants['KEY_TEST_LOCATION']]:_0xb108b,[TestFrameworkConstants[_0x39fddb(0x1b1)]]:_0xc50673};_0x46e3f5[_0x1731c3][_0x39fddb(0x1eb)](_0x9579aa),_0x5836e9[_0x4d963d][TestFrameworkConstants[_0x39fddb(0x23f)]]=_0x1731c3,logger[_0x39fddb(0x247)]('Hook\x20Started\x20in\x20PRE\x20key\x20=\x20'+_0x1731c3+_0x39fddb(0x1a8)+_0x9579aa+_0x39fddb(0x227)+_0x2ae089);}else{if(_0x3ffbe3[_0x39fddb(0x188)](_0x492b41,HookState[_0x39fddb(0x1e3)])){const _0x37663e=await _0x2ae089[_0x39fddb(0x236)],_0x3b923a=_0x46e3f5[_0x1731c3]||[],_0x14d36e=_0x2ae089[_0x39fddb(0x197)];logger[_0x39fddb(0x247)]('Hook\x20List\x20in\x20Post\x20'+_0x3b923a+'\x20and\x20args\x20=\x20'+_0x2ae089);if(_0x3ffbe3['UoyXK'](_0x3b923a['length'],0x0)){const _0x44262a=_0x3b923a[_0x39fddb(0x1e8)]();if(_0x14d36e[_0x39fddb(0x223)]){const _0x570076=_0x3ffbe3['mWQmF'](failureData,_0x14d36e[_0x39fddb(0x223)],_0x3ffbe3[_0x39fddb(0x253)]);_0x44262a[TestFrameworkConstants[_0x39fddb(0x1c1)]]=_0x3ffbe3[_0x39fddb(0x1b3)](getFailureType,_0x14d36e?.[_0x39fddb(0x223)][_0x39fddb(0x1ab)]),_0x44262a[TestFrameworkConstants[_0x39fddb(0x22b)]]=_0x3ffbe3[_0x39fddb(0x1b3)](removeAnsiColors,_0x14d36e?.[_0x39fddb(0x223)][_0x39fddb(0x1ab)]),_0x44262a[TestFrameworkConstants['KEY_HOOK_RESULT']]=_0x3ffbe3['BzVsN'],_0x44262a[TestFrameworkConstants[_0x39fddb(0x19a)]]=_0x570076;}else _0x44262a[TestFrameworkConstants[_0x39fddb(0x211)]]=_0x3ffbe3['ylCyr'];_0x3ffbe3[_0x39fddb(0x18c)](_0x37663e,TestFrameworkConstants[_0x39fddb(0x230)])&&(_0x44262a[TestFrameworkConstants[_0x39fddb(0x211)]]=!_0x14d36e[_0x39fddb(0x223)]?_0x3ffbe3[_0x39fddb(0x203)]:_0x3ffbe3['BzVsN']);const _0x25b3b1=new Date(_0x14d36e[_0x39fddb(0x1c7)]),_0x492c65=new Date(_0x3ffbe3[_0x39fddb(0x18a)](_0x25b3b1['getTime'](),_0x14d36e[_0x39fddb(0x222)]));_0x44262a[TestFrameworkConstants[_0x39fddb(0x22a)]]=_0x492c65[_0x39fddb(0x208)](),_0x44262a[TestFrameworkConstants[_0x39fddb(0x1b1)]]=_0xc50673;const _0x2b2610=_0x44262a[TestFrameworkConstants[_0x39fddb(0x1f7)]];await this['sendLogCreatedEvent'](_0x813222,_0x178c2d,_0x2b2610,_0x3ffbe3['WeojT'],_0x2ae089),!_0x266679[_0x1731c3]&&(_0x266679[_0x1731c3]=[]),_0x266679[_0x1731c3]['push'](_0x44262a),_0x5836e9[_0x4d963d][TestFrameworkConstants[_0x39fddb(0x22e)]]=_0x1731c3;}}}return _0x5836e9;}async[a67_0x42d178(0x1f5)](_0x50869f,_0x30133d,_0x75227e,_0x1ee2af,_0xf69522){const _0xbf3981=a67_0x42d178,_0x3a0d91={'tvdzE':function(_0x37097d,_0x3d7462){return _0x37097d===_0x3d7462;},'KcUki':_0xbf3981(0x19e),'FoeHW':function(_0x17a634,_0x41e17e,_0x36d263){return _0x17a634(_0x41e17e,_0x36d263);},'tHKwQ':function(_0x35ec43,_0x23b26b,_0x5d167c){return _0x35ec43(_0x23b26b,_0x5d167c);},'GKXwJ':_0xbf3981(0x221),'CsaNv':function(_0xfb90c2,_0x1bfec8,_0x530606,_0x404086){return _0xfb90c2(_0x1bfec8,_0x530606,_0x404086);},'rnhie':function(_0x3bdb47,_0x45925b,_0x1f15de){return _0x3bdb47(_0x45925b,_0x1f15de);},'THDcH':function(_0x3c904f,_0x52fc54,_0x3461b2){return _0x3c904f(_0x52fc54,_0x3461b2);},'mMoYs':function(_0x34303d,_0x2f4e37){return _0x34303d/_0x2f4e37;},'TfKMb':function(_0x1dea96,_0x33dffc){return _0x1dea96<_0x33dffc;},'rvdMf':function(_0x14a46c,_0x2d0c3f){return _0x14a46c*_0x2d0c3f;},'zBqfz':function(_0x874da7,_0x290833){return _0x874da7+_0x290833;},'Fcxmt':function(_0x201ae7,_0x315da9,_0x407610,_0x11f3a5,_0x138632){return _0x201ae7(_0x315da9,_0x407610,_0x11f3a5,_0x138632);},'ewOIA':function(_0x2a26a1,_0x506b1b){return _0x2a26a1+_0x506b1b;},'ipOPF':function(_0x5b2f7e,_0x323f33,_0x2fd0c9,_0x86dbdc){return _0x5b2f7e(_0x323f33,_0x2fd0c9,_0x86dbdc);},'HYQKx':_0xbf3981(0x20e)};try{if(_0x3a0d91['tvdzE'](_0x1ee2af,_0x3a0d91[_0xbf3981(0x238)])){const _0xd7b477=await _0xf69522[_0xbf3981(0x236)],_0x320171=_0x3a0d91['FoeHW'](getTestRunIdentifier,_0xf69522[_0xbf3981(0x19e)],_0xf69522[_0xbf3981(0x236)][_0xbf3981(0x21f)]),_0x4b60f8=_0xf69522['test'];logger['debug'](_0xbf3981(0x201)+_0x320171+_0xbf3981(0x1bd)+util[_0xbf3981(0x228)](_0xd7b477));const _0x53afad=_0x50869f[_0xbf3981(0x1c0)]()['get'](_0x320171)[TestFrameworkConstants['KEY_TEST_UUID']];await _0x3a0d91[_0xbf3981(0x248)](sendTraceZip,_0xd7b477,_0x53afad);const _0x2942a2=TestInfo['getTestDetails'](_0x320171)[_0x3a0d91[_0xbf3981(0x220)]];if(_0x2942a2){!_0xd7b477[_0xbf3981(0x221)]&&(_0xd7b477[_0xbf3981(0x221)]=[]);Object[_0xbf3981(0x213)](_0xd7b477[_0xbf3981(0x221)],_0xd7b477[_0xbf3981(0x221)][_0xbf3981(0x1e1)](_0x2942a2));const _0x57afd2=TestInfo[_0xbf3981(0x1ec)](_0x320171);delete _0x57afd2[_0x3a0d91[_0xbf3981(0x220)]],TestInfo[_0xbf3981(0x1b8)](_0x320171,_0x57afd2);}const {steps:_0x37d0ed,logs:_0x509369}=_0x3a0d91['CsaNv'](getStepsAndLogs,_0xd7b477[_0xbf3981(0x1df)],_0x50869f[_0xbf3981(0x1c0)]()['get'](_0x320171)[TestFrameworkConstants[_0xbf3981(0x229)]],_0x3a0d91[_0xbf3981(0x238)]),_0x445365=_0x3a0d91[_0xbf3981(0x204)](getScreenshots,_0xd7b477,_0x50869f[_0xbf3981(0x1c0)]()['get'](_0x320171)[TestFrameworkConstants[_0xbf3981(0x229)]]),_0xd1cdb7=_0x3a0d91[_0xbf3981(0x204)](getVideos,_0xd7b477,_0x50869f['getAllData']()['get'](_0x320171)[TestFrameworkConstants[_0xbf3981(0x229)]]),{_:_0x454567,logs:_0x9e709b}=_0x3a0d91[_0xbf3981(0x248)](getFailureData,_0xd7b477[_0xbf3981(0x1f0)],{'test_run_uuid':_0x50869f[_0xbf3981(0x1c0)]()[_0xbf3981(0x191)](_0x320171)[TestFrameworkConstants[_0xbf3981(0x229)]]}),_0x3f5398=TestInfo['getTestDetails'](_0x320171)[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{},_0x472200=_0x3a0d91[_0xbf3981(0x1b4)](getMediaArtifactsLogs,_0x3f5398,_0x50869f['getAllData']()[_0xbf3981(0x191)](_0x320171)[TestFrameworkConstants['KEY_TEST_UUID']]),_0x372ae5=_0x50869f[_0xbf3981(0x1c0)]()[_0xbf3981(0x191)](_0x320171),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0xf68396='',[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]:_0x1f0ada=''}=_0x372ae5,_0x1fa506=(_0x509369||[])[_0xbf3981(0x1e1)](_0x445365||[])['concat'](_0x9e709b||[])[_0xbf3981(0x1e1)](_0xd1cdb7||[])[_0xbf3981(0x1e1)](_0x472200||[]),_0x2fbd4b=0x28,_0x4028da=Math[_0xbf3981(0x1f6)](_0x3a0d91[_0xbf3981(0x239)](_0x1fa506[_0xbf3981(0x24b)],_0x2fbd4b));for(let _0xe3f1c3=0x0;_0x3a0d91['TfKMb'](_0xe3f1c3,_0x4028da);_0xe3f1c3++){const _0x4cb7dc=_0x3a0d91[_0xbf3981(0x1d0)](_0xe3f1c3,_0x2fbd4b),_0x30cfcc=_0x3a0d91[_0xbf3981(0x20b)](_0x4cb7dc,_0x2fbd4b),_0x24f966=_0x1fa506['slice'](_0x4cb7dc,_0x30cfcc),_0x21e586={'platformIndex':'0','logs':_0x24f966,'testFrameworkName':_0xf68396,'testFrameworkVersion':_0x1f0ada,'testFrameworkState':_0x30133d[_0xbf3981(0x1c5)]()[_0xbf3981(0x1ba)]('.')[0x1]};_0x3a0d91['Fcxmt'](updatePayloadForTraceLogs,_0x21e586,_0xf69522,_0x320171,_0x50869f),logger['debug'](_0xbf3981(0x252)+_0x320171+_0xbf3981(0x1e0)+_0x3a0d91[_0xbf3981(0x20b)](_0xe3f1c3,0x1)+'/'+_0x4028da+_0xbf3981(0x1ed)+util[_0xbf3981(0x228)](_0x21e586));const _0x36ec66=await GrpcClient[_0xbf3981(0x251)]()[_0xbf3981(0x18e)](_0x21e586);logger[_0xbf3981(0x247)]('sendLogCreatedEvent\x20for\x20testId:\x20'+_0x320171+_0xbf3981(0x1e0)+_0x3a0d91['ewOIA'](_0xe3f1c3,0x1)+'/'+_0x4028da+_0xbf3981(0x234)+util[_0xbf3981(0x228)](_0x36ec66));}}else{const {steps:_0x3e49fc,logs:_0x1fdd6b}=_0x3a0d91['ipOPF'](getStepsAndLogs,_0xf69522[_0xbf3981(0x197)][_0xbf3981(0x1df)],_0x75227e,_0x3a0d91[_0xbf3981(0x1cf)]),_0x530073=_0x3a0d91[_0xbf3981(0x248)](getTestRunIdentifier,_0xf69522[_0xbf3981(0x19e)],_0xf69522[_0xbf3981(0x236)][_0xbf3981(0x21f)]);logger['debug'](_0xbf3981(0x201)+_0x530073);const _0x2563a6=_0x50869f[_0xbf3981(0x1c0)]()[_0xbf3981(0x191)](_0x530073),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x3c8682='',[TestFrameworkConstants[_0xbf3981(0x20d)]]:_0x37faba=''}=_0x2563a6,_0x532b38={'platformIndex':'0','logs':_0x1fdd6b,'testFrameworkName':_0x3c8682,'testFrameworkVersion':_0x37faba,'testFrameworkState':_0x30133d['toString']()[_0xbf3981(0x1ba)]('.')[0x1]};_0x3a0d91[_0xbf3981(0x205)](updatePayloadForTraceLogs,_0x532b38,_0xf69522,_0x530073,_0x50869f),logger[_0xbf3981(0x247)](_0xbf3981(0x252)+_0x530073+_0xbf3981(0x1ed)+util[_0xbf3981(0x228)](_0x532b38));const _0x40d7da=await GrpcClient['getInstance']()['logCreatedEvent'](_0x532b38);}}catch(_0x11fe58){logger['error']('Error\x20in\x20sendLogCreatedEvent:\x20'+util['format'](_0x11fe58));}}}module[a67_0x42d178(0x18d)]=PlaywrightTestFramework;function a67_0x1a04(){const _0x4b504a=['retry','GKXwJ','attachments','duration','error','KEY_TEST_FILE_PATH','filePath','trackEvent:\x20found\x20instance,\x20testFrameworkState=','\x20\x20and\x20args\x20=\x20','inspect','KEY_TEST_UUID','KEY_EVENT_ENDED_AT','KEY_HOOK_FAILURE_REASON','getTestIdentifierFromTestInfo',',\x20testFrameworkState=','KEY_HOOK_LAST_FINISHED','CQORX','DEFAULT_HOOK_RESULT','KEY_HOOKS_FINISHED','parsePlaywrightTestResult','fvame','\x20response=','KEY_HOOK_LOGS','result','hdBzA','KcUki','mMoYs','./testFramework','PRE','createContext','20YiwGtF','56328lMKigf','KEY_HOOK_LAST_STARTED','gfEnB','resolveInstance','KEY_TEST_RERUN_NAME','trackPlaywrightInstance:\x20saved\x20instance\x20contextId=','getTime','CzJPy','KEY_TEST_TAGS','debug','tHKwQ','getTestFrameworks','12PARbVT','length','289112jaaCxp','KEY_TEST_STARTED_AT','../TestInfo.js','\x20from\x20TestDetails:\x20','xVeCn','getInstance','sendLogCreatedEvent\x20for\x20testId:\x20','kUFcL','KEY_TEST_ENDED_AT','rlBBs','TEST','../../../helpers/helper.js','TEST_ATTACHMENT','trackEvent:\x20loaded\x20testData\x20for\x20testId:\x20','KEY_TEST_FAILURE_REASON','HFGJP','npRLQ','getRef','VwmLo','iblTZ','BGvOJ','exports','logCreatedEvent','values','trackHookEvent','get','GYLFD','parsePlaywrightTestResult:\x20testId=','getTestFrameworksVersions','cmpgh','addMultipleEntries','step','err','field_type','KEY_HOOK_FAILURE','info','isArray','No\x20reason\x20provided','test','file_name','KEY_TEST_ID','KEY_HOOK_NAME','TJGwq','7BtymiF','NONE','UFWHM','map','../instances/testFrameworkInstance.js','\x20&\x20hook\x20=\x20','some','TudfC','message','../instances/trackedInstance.js','WDjtH','ITGCx','KEY_TEST_FAILURE','gCoGo','KEY_CUSTOM_TAGS','timedOut','RqXxJ','THDcH','KEY_TEST_RESULT','status','232288Dowrje','setTestDetails','\x20target=','split','getTrackedInstance','Expected\x20to\x20fail,\x20but\x20passed.','\x20result=','2UcyxVS','520587UbdbMi','getAllData','KEY_HOOK_FAILURE_TYPE','skipped','Error\x20processing\x20direct\x20trace\x20file\x20','getId','toString','INIT_TEST','startTime','parsePlaywrightTest','lcaNi','basename','KEY_LOGS','matchHookRegex','rPUce','hROwX','HYQKx','rvdMf','KEY_AUTOMATE_SESSION_NAME','5146196zsQsQp','SUzqN','1133901jfQqcu','../../playwright/reporter/pwUtils','TrHEs','ingTh','title','results','MKXqA','../../../helpers/test-observability/utils','KJQXO','runHooks','gfXyI','steps','\x20batch\x20','concat','trackEvent','POST','../grpcClient','Wxqgi','uuid','../../utils/constants','pop','1422528hIbsTX','util','push','getTestDetails','\x20payload=','aAvRG','hTHmT','errors','KEY_EVENT_STARTED_AT','WiTXc','KEY_TEST_LOCATION','./constants/testFrameworkConstants.js','sendLogCreatedEvent','ceil','KEY_HOOK_ID','passed','KEY_TEST_RETRY_OF','\x20hookState=','TEST_SCREENSHOT','setTrackedInstance','\x20testHookState=','statSync','KzmZZ','forEach','sendLogCreatedEvent:\x20testId=','vGeIe','ylCyr','rnhie','Fcxmt','PlaywrightTestFramework','trackPlaywrightInstance:\x20created\x20instance\x20for\x20target=','toISOString','KEY_HOOKS_STARTED','110yGkGDa','zBqfz','ErSBg','KEY_TEST_FRAMEWORK_VERSION','hook','stack','dnXVm','KEY_HOOK_RESULT','qUpvI','assign','failed','UExGN','KEY_TEST_LOGS','trackEvent:\x20Exception\x20in\x20event\x20tracking,\x20testFrameworkState=%s\x20hookState=%s\x20argsLength=%s,\x20exception=%s','KbEcf','expectedStatus','\x20instance=','ZkgVh','KEY_TEST_FAILURE_TYPE','path','KEY_TEST_ATTACHMENTS'];a67_0x1a04=function(){return _0x4b504a;};return a67_0x1a04();}