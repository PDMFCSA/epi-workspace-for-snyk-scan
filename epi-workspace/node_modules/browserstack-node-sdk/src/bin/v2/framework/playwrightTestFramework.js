const a65_0x2ca228=a65_0x4be4;(function(_0x5b4aa8,_0x3979cf){const _0x1e04c6=a65_0x4be4,_0x30f3c0=_0x5b4aa8();while(!![]){try{const _0xf93b44=parseInt(_0x1e04c6(0x11e))/0x1*(-parseInt(_0x1e04c6(0x19c))/0x2)+-parseInt(_0x1e04c6(0x1a7))/0x3+-parseInt(_0x1e04c6(0x168))/0x4+parseInt(_0x1e04c6(0x19f))/0x5+parseInt(_0x1e04c6(0x17d))/0x6*(-parseInt(_0x1e04c6(0x15d))/0x7)+parseInt(_0x1e04c6(0x132))/0x8+parseInt(_0x1e04c6(0x13f))/0x9;if(_0xf93b44===_0x3979cf)break;else _0x30f3c0['push'](_0x30f3c0['shift']());}catch(_0x251dcf){_0x30f3c0['push'](_0x30f3c0['shift']());}}}(a65_0x58cf,0x2e700));const TestFramework=require('./testFramework'),TestFrameworkState=require(a65_0x2ca228(0x101)),HookState=require(a65_0x2ca228(0x117)),{createClassLogger}=require(a65_0x2ca228(0xed)),TestFrameworkInstance=require(a65_0x2ca228(0x174)),CLIUtils=require(a65_0x2ca228(0x107)),TrackedInstance=require(a65_0x2ca228(0x10a)),TestFrameworkConstants=require('./constants/testFrameworkConstants.js'),logger=createClassLogger(a65_0x2ca228(0x180)),{v4:uuidv4}=require('uuid'),util=require(a65_0x2ca228(0x167)),{getPlaywrightSessionName,getPlaywrightTestFilePath,getPlaywrightTestId,getPlaywrightTestTitle,getPlaywrightTestLocation,getPlaywrightTestTags,getPlaywrightTestCode,getPlaywrightTestScope,getPlaywrightTestScopes,getStepsAndLogs,getScreenshots,getPlaywrightCustomRerunParam,getMediaArtifactsLogs,getManualUploadLogs,updatePayloadForTraceLogs}=require(a65_0x2ca228(0x193)),TestInfo=require('../TestInfo.js'),GrpcClient=require(a65_0x2ca228(0x14d)),{removeAnsiColors,getFailureType,failureData}=require(a65_0x2ca228(0x11d)),{getFailureData,getTestTags}=require(a65_0x2ca228(0x1aa)),{findNestedKey,sendTraceZip,validateFilePath}=require(a65_0x2ca228(0x1aa)),path=require('path'),fs=require('fs'),helper=require(a65_0x2ca228(0x143)),{PLAYWRIGHT_TRACE_LOGS}=require(a65_0x2ca228(0x1ab));function a65_0x4be4(_0x26b35b,_0x59f55e){const _0x58cfcf=a65_0x58cf();return a65_0x4be4=function(_0x4be405,_0x1454f9){_0x4be405=_0x4be405-0xe8;let _0x13842b=_0x58cfcf[_0x4be405];return _0x13842b;},a65_0x4be4(_0x26b35b,_0x59f55e);}function a65_0x58cf(){const _0x4c99e5=['jaIBM','Fvaqv','OKbct','timedOut','jFgqf','matchHookRegex','KEY_EVENT_ENDED_AT','length','runHooks','errors','XnToW',',\x20state=','info','err','\x20\x20and\x20args\x20=\x20','2597208XuvsOK','step','getRef','pop','ULUeo','GfUsN','sendLogCreatedEvent:\x20testId=','NDrsQ','RtWBV','passed','QgSxo','trackEvent\x20loading\x20testResults\x20for\x20testId:\x20','parsePlaywrightTestResult:\x20testId=','5493915lrKNRO','KEY_TEST_FILE_PATH','GcFGg','Wjbtf','../../../../src/helpers/helper','parsePlaywrightTestResult','Hook\x20Started\x20in\x20PRE\x20key\x20=\x20','trackHookEvent','ZtGQo',',\x20testFrameworkState=','startTime','\x20and\x20args\x20=\x20','KEY_TEST_LOGS','ddIjV','../grpcClient','field_type','lQKMW','resolveInstance','exports','No\x20reason\x20provided','sZiIU','KEY_TEST_NAME','Error\x20processing\x20trace\x20file\x20','POST','forEach','getTestFrameworksVersions','KEY_EVENT_STARTED_AT','push','filter','NLwSC','91dKwmBJ','format','KEY_TEST_STARTED_AT','PRE','getId','\x20&\x20hook\x20=\x20','hdszk','\x20target=','get','KEY_HOOK_LAST_FINISHED','util','282844YbXTUn','KEY_TEST_FAILURE_TYPE','parsePlaywrightTest','KEY_TEST_RESULT_AT','yFtQW','jPsGh','trackPlaywrightInstance','getTrackedInstance','WhpUr','mLShi','\x20hookState=','sendLogCreatedEvent\x20for\x20testId:\x20','../instances/testFrameworkInstance.js','KEY_TEST_FRAMEWORK_NAME','KEY_TEST_FRAMEWORK_VERSION','AnJzl','KEY_HOOK_RESULT','RhagM','KEY_TEST_ATTACHMENTS','getCurrentInstanceName','\x20instanceId=','77712IunRTI','\x20from\x20TestDetails:\x20','NONE','PlaywrightTestFramework','getAllData','zeVcp','trackEvent:\x20found\x20instance,\x20testFrameworkState=','DEFAULT_TEST_RESULT','KEY_HOOK_FAILURE_TYPE','KEY_HOOK_FAILURE','setTestDetails','KEY_CUSTOM_TAGS','message','AKLss','DpAbF','TEST','steps','getTraceFilePaths','duration','KEY_TEST_ID','debug','file_name','../../../helpers/helper.js','KEY_HOOKS_STARTED','KEY_TEST_RESULT','multi_dropdown','JeFnt','HPOrT','status','uundb','trackEvent','197798dGkpTa','vNrhu','inspect','596980plcJPO','toISOString','trim','map','filePath','createContext','Hook\x20List\x20in\x20Post\x20','test','985470tSDxgI','XSZEi','toString','../../playwright/reporter/pwUtils','../../utils/constants','dFwFT','getTestDetails','split','KEY_HOOK_LOGS','failed','expectedStatus','title','trackEvent\x20loading\x20testData\x20for\x20testId:\x20','result','../../../helpers/classLogger.js','statSync','PPcUK','KEY_LOGS','some','jvyVM','KEY_TEST_LOCATION','testUId','KEY_HOOK_ID','FqDzn','KEY_HOOKS_FINISHED','size','sendLogCreatedEvent','rMIYz','Error\x20processing\x20direct\x20trace\x20file\x20','trackEvent:\x20Exception\x20in\x20event\x20tracking,\x20testFrameworkState=%s\x20hookState=%s\x20argsLength=%s,\x20exception=%s','TEST_ATTACHMENT','hook','KEY_TEST_SCOPE','setTrackedInstance','../state/testFrameworkState.js','getTime','Error\x20in\x20sendLogCreatedEvent:\x20','Hsbxw','\x20instance=','gyIJi','../cliUtils.js','KEY_HOOK_LAST_STARTED','path','../instances/trackedInstance.js','instance','getInstance','KEY_AUTOMATE_SESSION_NAME','logCreatedEvent','xIKMp','addMultipleEntries','wpMLf','values','hlLQd','CXGaH','bxlCV','QiGhs','../state/hookState.js','izGJq','KEY_TEST_UUID','basename','error','CmLPC','../../../helpers/test-observability/utils','3wzTlZA','trackPlaywrightInstance:\x20created\x20instance\x20for\x20target=','\x20payload=','DEFAULT_HOOK_RESULT','getTestFrameworks'];a65_0x58cf=function(){return _0x4c99e5;};return a65_0x58cf();}class PlaywrightTestFramework extends TestFramework{constructor(_0x6ea0b6,_0x2ada8e,_0x3f83a6){super(_0x6ea0b6,_0x2ada8e,_0x3f83a6);}async[a65_0x2ca228(0x19b)](_0x29f8f8,_0x41449b,_0x3ba6f4={}){const _0x93f995=a65_0x2ca228,_0x28a38e={};_0x28a38e['rMIYz']=function(_0x3bf855,_0x5c1acd){return _0x3bf855===_0x5c1acd;},_0x28a38e[_0x93f995(0x16d)]=function(_0x5a4371,_0xd0a570){return _0x5a4371===_0xd0a570;},_0x28a38e[_0x93f995(0x123)]=function(_0xfe7b3d,_0x6b76c4){return _0xfe7b3d===_0x6b76c4;},_0x28a38e[_0x93f995(0x136)]=_0x93f995(0x1a6),_0x28a38e[_0x93f995(0x137)]=_0x93f995(0xfc);const _0x3b13f0=_0x28a38e;await super[_0x93f995(0x19b)](_0x29f8f8,_0x41449b,_0x3ba6f4);const _0x171a63=this['resolveInstance'](_0x29f8f8,_0x41449b,_0x3ba6f4);if(!_0x171a63)return;logger['debug'](_0x93f995(0x183)+_0x29f8f8+_0x93f995(0x172)+_0x41449b+_0x93f995(0x17c)+_0x171a63[_0x93f995(0x134)]());try{if(_0x3b13f0[_0x93f995(0xfa)](_0x41449b,HookState[_0x93f995(0x160)])&&_0x3b13f0[_0x93f995(0xfa)](_0x29f8f8,TestFrameworkState[_0x93f995(0x18c)])){const _0xeee384=_0x3ba6f4[_0x93f995(0x1a6)];logger[_0x93f995(0x191)](_0x93f995(0xeb)+_0xeee384['id']+'}');const _0x51c452=TestInfo['getTestUUID'](_0xeee384['id']);_0x171a63[_0x93f995(0x110)](this[_0x93f995(0x16a)](_0x51c452,_0xeee384)),logger['debug']('trackEvent:\x20loaded\x20testData\x20for\x20testId:\x20'+_0xeee384['id']+_0x93f995(0x148)+_0x29f8f8+'\x20testHookState='+_0x41449b+_0x93f995(0x105)+_0x171a63[_0x93f995(0x134)]());}if(_0x3b13f0[_0x93f995(0x16d)](_0x41449b,HookState[_0x93f995(0x156)])&&_0x3b13f0[_0x93f995(0x123)](_0x29f8f8,TestFrameworkState['TEST'])){const _0x3b1513=_0x3ba6f4['test'],_0x5a87d=_0x3ba6f4[_0x93f995(0xec)];logger[_0x93f995(0x191)](_0x93f995(0x13d)+_0x3b1513['id']),_0x171a63[_0x93f995(0x110)](this['parsePlaywrightTestResult'](_0x3b1513['id'],_0x5a87d,_0x3b1513)),this['sendLogCreatedEvent'](_0x171a63,_0x29f8f8,_0x41449b,_0x3b13f0[_0x93f995(0x136)],_0x3ba6f4);}if(CLIUtils[_0x93f995(0x128)](_0x29f8f8['toString']()[_0x93f995(0x1ae)]('.')[0x1])){const _0x40a894=await this[_0x93f995(0x146)](_0x171a63,_0x29f8f8,_0x41449b,_0x3ba6f4);_0x171a63[_0x93f995(0x110)](_0x40a894);}}catch(_0x27d8ba){logger[_0x93f995(0x11b)](util['format'](_0x3b13f0[_0x93f995(0x137)],_0x29f8f8,_0x41449b,_0x3ba6f4[_0x93f995(0x12a)],_0x27d8ba));}_0x3ba6f4[_0x93f995(0x10b)]=_0x171a63,await this[_0x93f995(0x12b)](_0x171a63,_0x29f8f8,_0x41449b,_0x3ba6f4);}[a65_0x2ca228(0x150)](_0x386181,_0x470dea,_0x447d72={}){const _0x59919a=a65_0x2ca228,_0x1f951f={};_0x1f951f[_0x59919a(0x153)]=function(_0x4a16f1,_0x3b88b8){return _0x4a16f1===_0x3b88b8;};const _0x1adde3=_0x1f951f;let _0x20ff43=null;return(_0x1adde3[_0x59919a(0x153)](_0x386181,TestFrameworkState['INIT_TEST'])||_0x1adde3[_0x59919a(0x153)](_0x386181,TestFrameworkState[_0x59919a(0x17f)]))&&this[_0x59919a(0x16e)](_0x386181,_0x447d72),_0x20ff43=TestFramework[_0x59919a(0x16f)](),_0x20ff43;}[a65_0x2ca228(0x16e)](_0x83716,_0x24356c){const _0x466402=a65_0x2ca228,_0x56df=CLIUtils[_0x466402(0x17b)](),_0x554079=TrackedInstance[_0x466402(0x1a4)](_0x56df);let _0x36b059=null;logger[_0x466402(0x12f)](_0x466402(0x11f)+_0x56df+_0x466402(0x12e)+_0x83716),_0x36b059=new TestFrameworkInstance(_0x554079,this[_0x466402(0x122)](),this[_0x466402(0x158)](),_0x83716,HookState[_0x466402(0x17f)]),TestFramework[_0x466402(0x100)](_0x554079,_0x36b059),logger[_0x466402(0x12f)]('trackPlaywrightInstance:\x20saved\x20instance\x20contextId='+_0x554079[_0x466402(0x161)]()+_0x466402(0x164)+_0x56df);}['parsePlaywrightTest'](_0x2226c8,_0x1d1fec){const _0x48fc81=a65_0x2ca228,_0x1b3abf={'izGJq':function(_0x3bbcdf,_0x1a4ee3){return _0x3bbcdf(_0x1a4ee3);},'QiGhs':function(_0x152fd4,_0x1dce66){return _0x152fd4(_0x1dce66);},'RtWBV':function(_0x51b666,_0x5c501e){return _0x51b666(_0x5c501e);},'Fvaqv':function(_0x2f2403,_0x445153){return _0x2f2403(_0x445153);},'AKLss':function(_0x27edd6,_0x28193f){return _0x27edd6(_0x28193f);},'mLShi':function(_0x3d6293,_0x540581){return _0x3d6293(_0x540581);}},_0x543b6e=_0x1b3abf[_0x48fc81(0x118)](getPlaywrightTestId,_0x1d1fec),_0x2a0ac7=_0x1b3abf[_0x48fc81(0x116)](getPlaywrightTestTitle,_0x1d1fec),_0x112d88=_0x1b3abf[_0x48fc81(0x13a)](getTestTags,_0x1d1fec),_0x2185cd=_0x1b3abf['Fvaqv'](getPlaywrightTestCode,_0x1d1fec),_0x450d1a=_0x1b3abf[_0x48fc81(0x118)](getPlaywrightTestFilePath,_0x1d1fec),_0x54a678=_0x450d1a+':'+_0x1b3abf[_0x48fc81(0x18a)](getPlaywrightTestLocation,_0x1d1fec),_0x3f2974=_0x1b3abf[_0x48fc81(0x124)](getPlaywrightTestScope,_0x1d1fec),_0x48cc0a=_0x1b3abf[_0x48fc81(0x118)](getPlaywrightTestScopes,_0x1d1fec),_0x47d1a8=_0x1b3abf[_0x48fc81(0x171)](getPlaywrightSessionName,_0x1d1fec),_0x31554c=this[_0x48fc81(0x122)]()[0x0],_0xfff61={[TestFrameworkConstants[_0x48fc81(0x175)]]:_0x31554c,[TestFrameworkConstants[_0x48fc81(0x176)]]:this[_0x48fc81(0x158)]()[_0x31554c],[TestFrameworkConstants[_0x48fc81(0x14b)]]:[],[TestFrameworkConstants[_0x48fc81(0xf7)]]:{},[TestFrameworkConstants[_0x48fc81(0x194)]]:{},[TestFrameworkConstants[_0x48fc81(0x119)]]:_0x2226c8,[TestFrameworkConstants[_0x48fc81(0x195)]]:TestFrameworkConstants[_0x48fc81(0x184)],[TestFrameworkConstants[_0x48fc81(0x10d)]]:_0x47d1a8,[TestFrameworkConstants[_0x48fc81(0x140)]]:_0x450d1a,[TestFrameworkConstants[_0x48fc81(0x190)]]:_0x543b6e,[TestFrameworkConstants[_0x48fc81(0x154)]]:_0x2a0ac7,[TestFrameworkConstants[_0x48fc81(0xf3)]]:_0x54a678,[TestFrameworkConstants['KEY_TEST_CODE']]:_0x2185cd,[TestFrameworkConstants['KEY_TEST_TAGS']]:_0x112d88,[TestFrameworkConstants[_0x48fc81(0x15f)]]:_0x1d1fec['results'][0x0][_0x48fc81(0x149)],[TestFrameworkConstants[_0x48fc81(0xff)]]:_0x3f2974,[TestFrameworkConstants['KEY_TEST_SCOPES']]:_0x48cc0a,[TestFrameworkConstants['KEY_TEST_RERUN_NAME']]:_0x1b3abf[_0x48fc81(0x13a)](getPlaywrightCustomRerunParam,_0x1d1fec)};TestInfo[_0x48fc81(0x187)](_0x1d1fec['id'],_0xfff61);const _0x3f5151={};return _0x3f5151[_0x543b6e]=_0xfff61,_0x3f5151;}[a65_0x2ca228(0x144)](_0x54399d,_0x8a43d0,_0x317c54){const _0x3d5f2b=a65_0x2ca228,_0xda748b={'xIKMp':function(_0x5c750e,_0x4584fc){return _0x5c750e(_0x4584fc);},'CmLPC':_0x3d5f2b(0xfd),'ddIjV':function(_0x156adf,_0x2d345a){return _0x156adf===_0x2d345a;},'AnJzl':function(_0x234545,_0x29b001){return _0x234545(_0x29b001);},'QgSxo':_0x3d5f2b(0x152),'jFgqf':_0x3d5f2b(0x196),'Wjbtf':function(_0x2e1226,_0x455dc7){return _0x2e1226(_0x455dc7);},'IgQIS':function(_0x443457,_0xedd037){return _0x443457+_0xedd037;},'dFwFT':'skipped','HPOrT':_0x3d5f2b(0x13b),'wpMLf':function(_0x5c7909,_0xb618a0){return _0x5c7909===_0xb618a0;},'CXGaH':_0x3d5f2b(0xe8),'XnToW':_0x3d5f2b(0x126),'GcFGg':function(_0x3351ef,_0x583539){return _0x3351ef===_0x583539;},'mQCbI':function(_0x58586c,_0x2c82bb){return _0x58586c===_0x2c82bb;},'XSZEi':'Expected\x20to\x20fail,\x20but\x20passed.','OKbct':function(_0x5a7ba2,_0xc8f5d5,_0x25358d){return _0x5a7ba2(_0xc8f5d5,_0x25358d);},'FqDzn':function(_0x1392e6,_0x473445){return _0x1392e6||_0x473445;},'nzYiM':_0x3d5f2b(0x109),'Hsbxw':function(_0xa54e0e,_0x5e8615){return _0xa54e0e(_0x5e8615);},'zedNN':function(_0x31c3ef,_0x46db31){return _0x31c3ef>_0x46db31;},'WhpUr':function(_0x273f3c,_0x4eea76){return _0x273f3c>_0x4eea76;}};logger[_0x3d5f2b(0x191)](_0x3d5f2b(0x13e)+_0x54399d);const _0x199f71=new Date(_0x8a43d0[_0x3d5f2b(0x149)]),_0x4f68bb=_0x8a43d0[_0x3d5f2b(0x18f)],_0x474a72=new Date(_0xda748b['IgQIS'](_0x199f71['getTime'](),_0x4f68bb)),_0x21a08d=_0x8a43d0['status'],_0xaae36d=TestInfo[_0x3d5f2b(0x1ad)](_0x54399d)[TestFrameworkConstants[_0x3d5f2b(0x188)]]||{};let _0x17d4e4=_0x21a08d;if(_0xda748b[_0x3d5f2b(0x14c)](_0x8a43d0[_0x3d5f2b(0x199)],_0x317c54[_0x3d5f2b(0xe9)]))_0x17d4e4=_0xda748b[_0x3d5f2b(0x14c)](_0x8a43d0[_0x3d5f2b(0x199)],_0xda748b[_0x3d5f2b(0x1ac)])?_0xda748b[_0x3d5f2b(0x1ac)]:_0xda748b[_0x3d5f2b(0x198)];else{(_0xda748b[_0x3d5f2b(0x111)](_0x17d4e4,_0xda748b[_0x3d5f2b(0x198)])||_0xda748b[_0x3d5f2b(0x14c)](_0x17d4e4,_0xda748b['CXGaH'])||_0xda748b['ddIjV'](_0x17d4e4,_0xda748b[_0x3d5f2b(0x12d)]))&&(_0x17d4e4=_0xda748b['CXGaH']);if(_0xda748b[_0x3d5f2b(0x141)](_0x8a43d0[_0x3d5f2b(0x199)],_0xda748b['HPOrT'])&&_0xda748b['mQCbI'](_0x317c54[_0x3d5f2b(0xe9)],_0xda748b[_0x3d5f2b(0x114)])){const _0x545056={};_0x545056[_0x3d5f2b(0x189)]=_0xda748b['XSZEi'],_0x545056['stack']=_0xda748b[_0x3d5f2b(0x1a8)],_0x8a43d0[_0x3d5f2b(0x11b)]=_0x545056,_0x8a43d0['errors']=[_0x8a43d0[_0x3d5f2b(0x11b)]];}}const {failureData:_0x22b24f,logs:_0x4d2138}=_0xda748b[_0x3d5f2b(0x125)](getFailureData,_0x8a43d0?.[_0x3d5f2b(0x12c)],{}),_0x2a749e={[TestFrameworkConstants['KEY_TEST_FAILURE']]:_0xda748b[_0x3d5f2b(0xf6)](_0x22b24f,null),[TestFrameworkConstants[_0x3d5f2b(0x169)]]:_0x8a43d0?.[_0x3d5f2b(0x11b)]&&_0xda748b['AnJzl'](getFailureType,_0x8a43d0[_0x3d5f2b(0x11b)][_0x3d5f2b(0x189)]),[TestFrameworkConstants['KEY_TEST_FAILURE_REASON']]:_0x8a43d0?.[_0x3d5f2b(0x11b)]&&_0xda748b[_0x3d5f2b(0x10f)](removeAnsiColors,_0x8a43d0[_0x3d5f2b(0x11b)][_0x3d5f2b(0x189)]),[TestFrameworkConstants['KEY_LOGS']]:[],[TestFrameworkConstants[_0x3d5f2b(0x195)]]:_0x17d4e4,[TestFrameworkConstants['KEY_TEST_ENDED_AT']]:_0x474a72[_0x3d5f2b(0x1a0)](),[TestFrameworkConstants[_0x3d5f2b(0x16b)]]:new Date()[_0x3d5f2b(0x1a0)](),[TestFrameworkConstants[_0x3d5f2b(0x188)]]:_0xaae36d},_0x1f247f={};_0x1f247f[_0x3d5f2b(0x1a6)]=_0x317c54;const _0x54a582=this[_0x3d5f2b(0x150)](TestFrameworkState[_0x3d5f2b(0x18c)],HookState['POST'],_0x1f247f),_0x37bc99=_0x54a582['getAllData']()['get'](_0x54399d)[TestFrameworkConstants[_0x3d5f2b(0x119)]],_0x67c680=[],_0x2948f2=_0xda748b[_0x3d5f2b(0x125)](findNestedKey,_0x8a43d0,_0xda748b['nzYiM']);if(_0x2948f2&&_0xda748b[_0x3d5f2b(0x104)](validateFilePath,_0x2948f2))try{_0x67c680[_0x3d5f2b(0x15a)]({'kind':_0xda748b[_0x3d5f2b(0x11c)],'timestamp':new Date()[_0x3d5f2b(0x1a0)](),'test_run_uuid':_0x37bc99,'file_name':path[_0x3d5f2b(0x11a)](_0x2948f2),'file_size':fs[_0x3d5f2b(0xee)](_0x2948f2)[_0x3d5f2b(0xf8)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x3848e0){logger[_0x3d5f2b(0x11b)](_0x3d5f2b(0xfb)+_0x2948f2+':\x20'+_0x3848e0[_0x3d5f2b(0x189)]);}const _0x4b8e90=TestInfo[_0x3d5f2b(0x18e)](),_0x10a716=_0x4b8e90[_0x3d5f2b(0x15b)](_0x3554a2=>_0x3554a2[_0x3d5f2b(0xf4)]===_0x37bc99);_0x10a716[_0x3d5f2b(0x157)](_0x934be7=>{const _0x137ad3=_0x3d5f2b;if(_0x934be7['filePath']&&_0xda748b[_0x137ad3(0x10f)](validateFilePath,_0x934be7['filePath'])&&!_0x67c680[_0x137ad3(0xf1)](_0x55672b=>_0x55672b[_0x137ad3(0x192)]===path[_0x137ad3(0x11a)](_0x934be7[_0x137ad3(0x1a3)])))try{_0x67c680[_0x137ad3(0x15a)]({'kind':_0xda748b[_0x137ad3(0x11c)],'timestamp':new Date()['toISOString'](),'test_run_uuid':_0x37bc99,'file_name':path['basename'](_0x934be7[_0x137ad3(0x1a3)]),'file_size':fs[_0x137ad3(0xee)](_0x934be7[_0x137ad3(0x1a3)])[_0x137ad3(0xf8)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x1ec49c){logger[_0x137ad3(0x11b)](_0x137ad3(0x155)+_0x934be7[_0x137ad3(0x1a3)]+_0x137ad3(0x17e)+_0x1ec49c[_0x137ad3(0x189)]);}});if(_0xda748b['zedNN'](_0x67c680['length'],0x0)){const _0x21a915=_0x2a749e[TestFrameworkConstants[_0x3d5f2b(0xf0)]]||[];_0x2a749e[TestFrameworkConstants[_0x3d5f2b(0xf0)]]=[..._0x21a915,..._0x67c680];}const _0x2ea7aa=TestInfo[_0x3d5f2b(0x1ad)](_0x54399d)[TestFrameworkConstants[_0x3d5f2b(0x17a)]]||{},_0x515c28=_0xda748b[_0x3d5f2b(0x125)](getManualUploadLogs,_0x2ea7aa,_0x54a582[_0x3d5f2b(0x181)]()[_0x3d5f2b(0x165)](_0x54399d)[TestFrameworkConstants['KEY_TEST_UUID']]);if(_0xda748b[_0x3d5f2b(0x170)](_0x515c28['length'],0x0)){const _0x165dd1=_0x2a749e[TestFrameworkConstants[_0x3d5f2b(0xf0)]]||[];_0x2a749e[TestFrameworkConstants[_0x3d5f2b(0xf0)]]=[..._0x165dd1,..._0x515c28];}const _0x25eb36=_0x317c54['annotations']||[],_0x593094=_0x2a749e[TestFrameworkConstants[_0x3d5f2b(0x188)]]||{};_0x25eb36[_0x3d5f2b(0x157)](_0x14e1bd=>{const _0x41dbfd=_0x3d5f2b,{type:_0x9182a3}=_0x14e1bd;let _0x2415db=_0x14e1bd['description'];if(!_0x9182a3)return;(_0xda748b[_0x41dbfd(0x14c)](_0x2415db,undefined)||_0xda748b['ddIjV'](_0x2415db,null)||_0xda748b[_0x41dbfd(0x14c)](_0xda748b[_0x41dbfd(0x177)](String,_0x2415db)[_0x41dbfd(0x1a1)](),''))&&(_0x2415db=_0xda748b[_0x41dbfd(0x13c)]);if(!_0x593094[_0x9182a3]){const _0x31834c={};_0x31834c[_0x41dbfd(0x14e)]=_0xda748b[_0x41dbfd(0x127)],_0x31834c[_0x41dbfd(0x112)]=[],_0x593094[_0x9182a3]=_0x31834c;}else!_0x593094[_0x9182a3][_0x41dbfd(0x14e)]&&(_0x593094[_0x9182a3]['field_type']=_0xda748b[_0x41dbfd(0x127)]),!Array['isArray'](_0x593094[_0x9182a3][_0x41dbfd(0x112)])&&(_0x593094[_0x9182a3][_0x41dbfd(0x112)]=[]);const _0x18e3cf=_0xda748b[_0x41dbfd(0x142)](String,_0x2415db)[_0x41dbfd(0x1ae)](',')[_0x41dbfd(0x1a2)](_0xef5c4b=>_0xef5c4b[_0x41dbfd(0x1a1)]());_0x593094[_0x9182a3][_0x41dbfd(0x112)]=[...new Set([..._0x593094[_0x9182a3][_0x41dbfd(0x112)],..._0x18e3cf])];}),_0x2a749e[TestFrameworkConstants[_0x3d5f2b(0x188)]]=_0x593094,TestInfo['setTestDetails'](_0x54399d,_0x2a749e);const _0x3c7c25={};return _0x3c7c25[_0x54399d]=_0x2a749e,_0x3c7c25;}async[a65_0x2ca228(0x146)](_0x60dc07,_0x54fb41,_0x4769f4,_0x4749b4){const _0x5740e7=a65_0x2ca228,_0x2f2f1d={'lQKMW':function(_0x133558,_0x64ca6b){return _0x133558 in _0x64ca6b;},'DpAbF':function(_0x44c0fa,_0x5c3130){return _0x44c0fa(_0x5c3130);},'JeFnt':function(_0x4c061f,_0x12979f){return _0x4c061f===_0x12979f;},'NDrsQ':function(_0x2bed8c){return _0x2bed8c();},'PPcUK':function(_0x5120ca,_0x3f415a){return _0x5120ca>_0x3f415a;},'XOEUE':function(_0x529157,_0x41661a,_0x4fd59f){return _0x529157(_0x41661a,_0x4fd59f);},'vpLJl':_0x5740e7(0x130),'RhagM':function(_0x5d90ab,_0x28475e){return _0x5d90ab(_0x28475e);},'yFtQW':_0x5740e7(0xe8),'jvyVM':_0x5740e7(0x13b),'gyIJi':function(_0x3f2c50,_0x113b42){return _0x3f2c50!==_0x113b42;},'ZtGQo':function(_0x33d857,_0x21b6a2){return _0x33d857+_0x21b6a2;},'hlLQd':_0x5740e7(0xfe)},_0x4545a8=_0x4749b4[_0x5740e7(0x1a6)],_0x1cfe98=_0x4749b4[_0x5740e7(0x133)],_0x83583a=_0x4749b4[_0x5740e7(0x1a6)]['id'],_0x305cbe=_0x54fb41[_0x5740e7(0x1a9)]()['split']('.')[0x1];let _0x34a535=_0x60dc07['getAllData']()[_0x5740e7(0x165)](_0x83583a)[TestFrameworkConstants[_0x5740e7(0x194)]];!_0x34a535&&(_0x34a535={});!_0x2f2f1d[_0x5740e7(0x14f)](_0x305cbe,_0x34a535)&&(_0x34a535[_0x305cbe]=[]);let _0xb2173d=_0x60dc07['getAllData']()[_0x5740e7(0x165)](_0x83583a)[TestFrameworkConstants['KEY_HOOKS_FINISHED']];!_0xb2173d&&(_0xb2173d={});!_0x2f2f1d['lQKMW'](_0x305cbe,_0xb2173d)&&(_0xb2173d[_0x305cbe]=[]);const _0x3fa07c={[TestFrameworkConstants[_0x5740e7(0x194)]]:_0x34a535,[TestFrameworkConstants['KEY_HOOKS_FINISHED']]:_0xb2173d},_0x445e1f={};_0x445e1f[_0x83583a]=_0x3fa07c;const _0x7ac4ad=_0x445e1f,_0x249cbc=_0x2f2f1d['DpAbF'](getPlaywrightTestFilePath,_0x4545a8),_0x3366a9=_0x249cbc+':'+_0x2f2f1d[_0x5740e7(0x18b)](getPlaywrightTestLocation,_0x4545a8),_0x2cb291=TestInfo[_0x5740e7(0x1ad)](_0x83583a)[TestFrameworkConstants[_0x5740e7(0x188)]]||{};if(_0x2f2f1d['JeFnt'](_0x4769f4,HookState[_0x5740e7(0x160)])){const _0x39b53b={'key':_0x305cbe,[TestFrameworkConstants[_0x5740e7(0xf5)]]:_0x2f2f1d[_0x5740e7(0x139)](uuidv4),[TestFrameworkConstants[_0x5740e7(0x178)]]:TestFrameworkConstants[_0x5740e7(0x121)],[TestFrameworkConstants[_0x5740e7(0x159)]]:_0x1cfe98[_0x5740e7(0x149)],[TestFrameworkConstants[_0x5740e7(0x1af)]]:[],[TestFrameworkConstants['KEY_HOOK_NAME']]:_0x1cfe98[_0x5740e7(0xea)],[TestFrameworkConstants[_0x5740e7(0x140)]]:_0x249cbc,[TestFrameworkConstants['KEY_TEST_LOCATION']]:_0x3366a9,[TestFrameworkConstants['KEY_CUSTOM_TAGS']]:_0x2cb291};_0x34a535[_0x305cbe][_0x5740e7(0x15a)](_0x39b53b),_0x7ac4ad[_0x83583a][TestFrameworkConstants[_0x5740e7(0x108)]]=_0x305cbe,logger['debug'](_0x5740e7(0x145)+_0x305cbe+_0x5740e7(0x162)+_0x39b53b+_0x5740e7(0x131)+_0x4749b4);}else{if(_0x2f2f1d[_0x5740e7(0x197)](_0x4769f4,HookState[_0x5740e7(0x156)])){const _0x493680=await _0x4749b4['result'],_0x13b1ad=_0x34a535[_0x305cbe]||[],_0x54a2f0=_0x4749b4[_0x5740e7(0x133)];logger[_0x5740e7(0x191)](_0x5740e7(0x1a5)+_0x13b1ad+_0x5740e7(0x14a)+_0x4749b4);if(_0x2f2f1d[_0x5740e7(0xef)](_0x13b1ad[_0x5740e7(0x12a)],0x0)){const _0x2ecebe=_0x13b1ad[_0x5740e7(0x135)]();if(_0x54a2f0['error']){const _0x15dddc=_0x2f2f1d['XOEUE'](failureData,_0x54a2f0[_0x5740e7(0x11b)],_0x2f2f1d['vpLJl']);_0x2ecebe[TestFrameworkConstants[_0x5740e7(0x185)]]=_0x2f2f1d[_0x5740e7(0x179)](getFailureType,_0x54a2f0?.[_0x5740e7(0x11b)][_0x5740e7(0x189)]),_0x2ecebe[TestFrameworkConstants['KEY_HOOK_FAILURE_REASON']]=_0x2f2f1d[_0x5740e7(0x179)](removeAnsiColors,_0x54a2f0?.['error'][_0x5740e7(0x189)]),_0x2ecebe[TestFrameworkConstants[_0x5740e7(0x178)]]=_0x2f2f1d[_0x5740e7(0x16c)],_0x2ecebe[TestFrameworkConstants[_0x5740e7(0x186)]]=_0x15dddc;}else _0x2ecebe[TestFrameworkConstants[_0x5740e7(0x178)]]=_0x2f2f1d[_0x5740e7(0xf2)];_0x2f2f1d[_0x5740e7(0x106)](_0x493680,TestFrameworkConstants[_0x5740e7(0x121)])&&(_0x2ecebe[TestFrameworkConstants[_0x5740e7(0x178)]]=!_0x54a2f0[_0x5740e7(0x11b)]?_0x2f2f1d['jvyVM']:_0x2f2f1d[_0x5740e7(0x16c)]);const _0x48bd83=new Date(_0x54a2f0[_0x5740e7(0x149)]),_0x48ae81=new Date(_0x2f2f1d[_0x5740e7(0x147)](_0x48bd83[_0x5740e7(0x102)](),_0x54a2f0[_0x5740e7(0x18f)]));_0x2ecebe[TestFrameworkConstants[_0x5740e7(0x129)]]=_0x48ae81[_0x5740e7(0x1a0)](),_0x2ecebe[TestFrameworkConstants[_0x5740e7(0x188)]]=_0x2cb291;const _0x474c70=_0x2ecebe[TestFrameworkConstants[_0x5740e7(0xf5)]];await this[_0x5740e7(0xf9)](_0x60dc07,_0x54fb41,_0x474c70,_0x2f2f1d[_0x5740e7(0x113)],_0x4749b4),!_0xb2173d[_0x305cbe]&&(_0xb2173d[_0x305cbe]=[]),_0xb2173d[_0x305cbe][_0x5740e7(0x15a)](_0x2ecebe),_0x7ac4ad[_0x83583a][TestFrameworkConstants[_0x5740e7(0x166)]]=_0x305cbe;}}}return _0x7ac4ad;}async['sendLogCreatedEvent'](_0x9b4875,_0x10cc0a,_0x20162d,_0x201147,_0x11cb7b){const _0x1b58bf=a65_0x2ca228,_0x3e7525={'fVJOf':function(_0x3bc073,_0x2cbd8e){return _0x3bc073===_0x2cbd8e;},'bxlCV':_0x1b58bf(0x1a6),'hdszk':function(_0x3d83e2,_0x1466c2,_0x1094c9){return _0x3d83e2(_0x1466c2,_0x1094c9);},'NLwSC':function(_0x52d589,_0x4088d2,_0x2ae1aa,_0x311d6d){return _0x52d589(_0x4088d2,_0x2ae1aa,_0x311d6d);},'vNrhu':function(_0x261480,_0x371301,_0x515c0a){return _0x261480(_0x371301,_0x515c0a);},'uundb':function(_0x24473e,_0x345f4f,_0x27db7d,_0x1c8de0,_0x2ee6ae){return _0x24473e(_0x345f4f,_0x27db7d,_0x1c8de0,_0x2ee6ae);},'zeVcp':_0x1b58bf(0xfe),'nmTOg':function(_0xa12d4,_0x252488,_0x52a220,_0x39cd35,_0x239b04){return _0xa12d4(_0x252488,_0x52a220,_0x39cd35,_0x239b04);}};try{if(_0x3e7525['fVJOf'](_0x201147,_0x3e7525[_0x1b58bf(0x115)])){const _0x2e5c80=await _0x11cb7b[_0x1b58bf(0xec)],_0xe8635a=_0x11cb7b[_0x1b58bf(0x1a6)]['id'],_0x3721ba=_0x11cb7b[_0x1b58bf(0x1a6)];logger[_0x1b58bf(0x191)](_0x1b58bf(0x138)+_0xe8635a);const _0x58cc9c=_0x9b4875[_0x1b58bf(0x181)]()['get'](_0xe8635a)[TestFrameworkConstants[_0x1b58bf(0x119)]];await _0x3e7525['hdszk'](sendTraceZip,_0x2e5c80,_0x58cc9c);const {steps:_0x3b3b1e,logs:_0x2370f2}=_0x3e7525['NLwSC'](getStepsAndLogs,_0x2e5c80[_0x1b58bf(0x18d)],_0x9b4875[_0x1b58bf(0x181)]()[_0x1b58bf(0x165)](_0xe8635a)[TestFrameworkConstants[_0x1b58bf(0x119)]],_0x3e7525[_0x1b58bf(0x115)]),_0x283ab1=_0x3e7525[_0x1b58bf(0x163)](getScreenshots,_0x2e5c80,_0x9b4875[_0x1b58bf(0x181)]()[_0x1b58bf(0x165)](_0xe8635a)[TestFrameworkConstants[_0x1b58bf(0x119)]]),{_:_0x3ca209,logs:_0x53d181}=_0x3e7525[_0x1b58bf(0x19d)](getFailureData,_0x2e5c80[_0x1b58bf(0x12c)],{'test_run_uuid':_0x9b4875['getAllData']()[_0x1b58bf(0x165)](_0xe8635a)[TestFrameworkConstants['KEY_TEST_UUID']]}),_0x496ff4=TestInfo['getTestDetails'](_0xe8635a)[TestFrameworkConstants[_0x1b58bf(0x17a)]]||{},_0x1a4d6f=_0x3e7525[_0x1b58bf(0x19d)](getMediaArtifactsLogs,_0x496ff4,_0x9b4875[_0x1b58bf(0x181)]()['get'](_0xe8635a)[TestFrameworkConstants[_0x1b58bf(0x119)]]),_0x2fc2e8=_0x9b4875[_0x1b58bf(0x181)]()[_0x1b58bf(0x165)](_0xe8635a),{[TestFrameworkConstants[_0x1b58bf(0x175)]]:_0x3180e5='',[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]:_0x189661=''}=_0x2fc2e8,_0x31c1d6={'platformIndex':'0','logs':[..._0x2370f2||[],..._0x283ab1||[],..._0x53d181||[],..._0x1a4d6f||[]],'testFrameworkName':_0x3180e5,'testFrameworkVersion':_0x189661,'testFrameworkState':_0x10cc0a[_0x1b58bf(0x1a9)]()[_0x1b58bf(0x1ae)]('.')[0x1]};_0x3e7525[_0x1b58bf(0x19a)](updatePayloadForTraceLogs,_0x31c1d6,_0x11cb7b,_0xe8635a,_0x9b4875),logger['debug']('sendLogCreatedEvent\x20for\x20testId:\x20'+_0xe8635a+_0x1b58bf(0x120)+util[_0x1b58bf(0x19e)](_0x31c1d6));const _0x5f52ee=await GrpcClient[_0x1b58bf(0x10c)]()[_0x1b58bf(0x10e)](_0x31c1d6);}else{const {steps:_0x330800,logs:_0x30c76e}=_0x3e7525[_0x1b58bf(0x15c)](getStepsAndLogs,_0x11cb7b[_0x1b58bf(0x133)][_0x1b58bf(0x18d)],_0x20162d,_0x3e7525[_0x1b58bf(0x182)]),_0x3a2eea=_0x11cb7b[_0x1b58bf(0x1a6)]['id'];logger[_0x1b58bf(0x191)](_0x1b58bf(0x138)+_0x3a2eea);const _0x53ad37=_0x9b4875[_0x1b58bf(0x181)]()['get'](_0x3a2eea),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x20c5e8='',[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]:_0x109e0d=''}=_0x53ad37,_0x4bce4f={'platformIndex':'0','logs':_0x30c76e,'testFrameworkName':_0x20c5e8,'testFrameworkVersion':_0x109e0d,'testFrameworkState':_0x10cc0a[_0x1b58bf(0x1a9)]()['split']('.')[0x1]};_0x3e7525['nmTOg'](updatePayloadForTraceLogs,_0x4bce4f,_0x11cb7b,_0x3a2eea,_0x9b4875),logger['debug'](_0x1b58bf(0x173)+_0x3a2eea+_0x1b58bf(0x120)+util['inspect'](_0x4bce4f));const _0x459300=await GrpcClient['getInstance']()[_0x1b58bf(0x10e)](_0x4bce4f);}}catch(_0x1aaa72){logger[_0x1b58bf(0x11b)](_0x1b58bf(0x103)+util[_0x1b58bf(0x15e)](_0x1aaa72));}}}module[a65_0x2ca228(0x151)]=PlaywrightTestFramework;