const a65_0x2b555f=a65_0x5669;(function(_0x533594,_0x3ebcd7){const _0x51a751=a65_0x5669,_0x7a5e55=_0x533594();while(!![]){try{const _0x511105=parseInt(_0x51a751(0x148))/0x1+-parseInt(_0x51a751(0x189))/0x2+parseInt(_0x51a751(0x1fb))/0x3+parseInt(_0x51a751(0x18d))/0x4*(parseInt(_0x51a751(0x1a5))/0x5)+-parseInt(_0x51a751(0x19b))/0x6*(-parseInt(_0x51a751(0x1f0))/0x7)+-parseInt(_0x51a751(0x165))/0x8+parseInt(_0x51a751(0x197))/0x9*(-parseInt(_0x51a751(0x198))/0xa);if(_0x511105===_0x3ebcd7)break;else _0x7a5e55['push'](_0x7a5e55['shift']());}catch(_0x2892f5){_0x7a5e55['push'](_0x7a5e55['shift']());}}}(a65_0x4d59,0x6d44b));function a65_0x4d59(){const _0xf6c9bb=['DNqeq','KEY_HOOK_RESULT','KEY_HOOK_FAILURE','KEY_EVENT_ENDED_AT',',\x20state=','1099165YPwWXo','multi_dropdown','NONE','\x20instance=','\x20\x20and\x20args\x20=\x20',',\x20testFrameworkState=','KEY_TEST_SCOPE','duration','Error\x20processing\x20trace\x20file\x20','fJwvy','parsePlaywrightTestResult:\x20testId=','\x20payload=','getTestDetails','TEST','trackEvent','trackEvent\x20loading\x20testResults\x20for\x20testId:\x20','KEY_TEST_FAILURE_TYPE','WNYVG','nXknG','trackHookEvent','CrqvK','DEFAULT_TEST_RESULT','KEY_HOOKS_FINISHED','format','setTestDetails','PRE','KieoE','getTime','mfRZT','field_type','status','KEY_TEST_CODE','errors','err','results','../instances/trackedInstance.js','title','annotations','split','TcXln','OLeWW','yYQxp','vGUXQ','KEY_AUTOMATE_SESSION_NAME','JdfbA','values','KEY_TEST_FRAMEWORK_NAME','error','KEY_HOOK_FAILURE_TYPE','step','tseWf','KEY_TEST_UUID','neThr','map','info','file_name','KEY_TEST_LOCATION','passed','getCurrentInstanceName','KEY_LOGS','UcTCb','KEY_TEST_FILE_PATH','DEFAULT_HOOK_RESULT','OEwCj','IZYZQ','KEY_TEST_LOGS','KEY_TEST_SCOPES','KEY_TEST_ATTACHMENTS','IkwCe','GOLZh','../state/testFrameworkState.js','../state/hookState.js','hook','trackEvent:\x20loaded\x20testData\x20for\x20testId:\x20','xldvs','151543rQTmDy','debug','WAirj','expectedStatus','basename','\x20instanceId=','trackPlaywrightInstance:\x20saved\x20instance\x20contextId=','pMvOE','owstN','\x20&\x20hook\x20=\x20','matchHookRegex','2344677XbDUyy','yAMHo','length','../../playwright/reporter/pwUtils','isArray','pop','resolveInstance','sendLogCreatedEvent:\x20testId=','KEY_TEST_STARTED_AT','toISOString','size','NDUOn','XbOHS','testUId','imFvB','AWite','test','KEY_TEST_RERUN_NAME','trZyf','getTestFrameworks','../TestInfo.js','getInstance','388274GqrcuV','../instances/testFrameworkInstance.js','statSync','./constants/testFrameworkConstants.js','getTraceFilePaths','PlaywrightTestFramework','filePath','KEY_TEST_FAILURE','KEY_TEST_FRAMEWORK_VERSION','get','KEY_HOOK_NAME','../grpcClient','../cliUtils.js','KEY_TEST_ID','KEY_HOOK_FAILURE_REASON','timedOut','parsePlaywrightTestResult','sendLogCreatedEvent','Hook\x20List\x20in\x20Post\x20','FGBcw','stack','trackEvent:\x20found\x20instance,\x20testFrameworkState=','../../../helpers/helper.js','util','jDrRX','qrzkI','\x20and\x20args\x20=\x20','../../utils/constants','KEY_CUSTOM_TAGS','536912mcNtuY','\x20target=','message','getAllData','failed','mHXta','KEY_HOOK_LOGS','./testFramework','forEach','kCRvL','skipped','KEY_HOOKS_STARTED','exports','No\x20reason\x20provided','startTime','steps','push','parsePlaywrightTest','result','trackPlaywrightInstance','HsZVr','inspect','iFJyl','trackPlaywrightInstance:\x20created\x20instance\x20for\x20target=','createContext','\x20testHookState=','toString','logCreatedEvent','sendLogCreatedEvent\x20for\x20testId:\x20','instance','getId','POST','uxdLj','KEY_TEST_TAGS','elIYX','RJMWR','1120288wSWLJf','uyosw','UswrY','addMultipleEntries','4CPkBIJ','trackEvent\x20loading\x20testData\x20for\x20testId:\x20','\x20hookState=','getRef','dTrSg','EyjTN','setTrackedInstance','path','trim','filter','122076ltodzS','280whNkfd','qaScb','KGRaQ','18qlapwD','uuid','KEY_TEST_NAME','getTestFrameworksVersions','KEY_HOOK_ID'];a65_0x4d59=function(){return _0xf6c9bb;};return a65_0x4d59();}function a65_0x5669(_0x2449c2,_0x438583){const _0x4d598f=a65_0x4d59();return a65_0x5669=function(_0x566916,_0x551d3c){_0x566916=_0x566916-0x13e;let _0x96df5b=_0x4d598f[_0x566916];return _0x96df5b;},a65_0x5669(_0x2449c2,_0x438583);}const TestFramework=require(a65_0x2b555f(0x16c)),TestFrameworkState=require(a65_0x2b555f(0x1eb)),HookState=require(a65_0x2b555f(0x1ec)),{createClassLogger}=require('../../../helpers/classLogger.js'),TestFrameworkInstance=require(a65_0x2b555f(0x149)),CLIUtils=require(a65_0x2b555f(0x154)),TrackedInstance=require(a65_0x2b555f(0x1c8)),TestFrameworkConstants=require(a65_0x2b555f(0x14b)),logger=createClassLogger(a65_0x2b555f(0x14d)),{v4:uuidv4}=require(a65_0x2b555f(0x19c)),util=require(a65_0x2b555f(0x15f)),{getPlaywrightSessionName,getPlaywrightTestFilePath,getPlaywrightTestId,getPlaywrightTestTitle,getPlaywrightTestLocation,getPlaywrightTestTags,getPlaywrightTestCode,getPlaywrightTestScope,getPlaywrightTestScopes,getStepsAndLogs,getScreenshots,getPlaywrightCustomRerunParam,getMediaArtifactsLogs,getManualUploadLogs,updatePayloadForTraceLogs}=require(a65_0x2b555f(0x15e)),TestInfo=require(a65_0x2b555f(0x146)),GrpcClient=require(a65_0x2b555f(0x153)),{removeAnsiColors,getFailureType,failureData}=require('../../../helpers/test-observability/utils'),{getFailureData,getTestTags}=require(a65_0x2b555f(0x1fe)),{findNestedKey,sendTraceZip,validateFilePath}=require(a65_0x2b555f(0x1fe)),path=require(a65_0x2b555f(0x194)),fs=require('fs'),helper=require('../../../../src/helpers/helper'),{PLAYWRIGHT_TRACE_LOGS}=require(a65_0x2b555f(0x163));class PlaywrightTestFramework extends TestFramework{constructor(_0x3cf043,_0x3e76bf,_0x3e6eb7){super(_0x3cf043,_0x3e76bf,_0x3e6eb7);}async[a65_0x2b555f(0x1b3)](_0x43ca11,_0x102b18,_0x3386e3={}){const _0x3446df=a65_0x2b555f,_0x4a9fe9={};_0x4a9fe9[_0x3446df(0x1e1)]=function(_0x38a47c,_0x1b29a2){return _0x38a47c===_0x1b29a2;},_0x4a9fe9[_0x3446df(0x13e)]=function(_0x1fbd0a,_0x14286e){return _0x1fbd0a===_0x14286e;},_0x4a9fe9[_0x3446df(0x1cd)]=function(_0x288fd6,_0x515644){return _0x288fd6===_0x515644;},_0x4a9fe9[_0x3446df(0x1d1)]=function(_0x5bb481,_0x164127){return _0x5bb481===_0x164127;},_0x4a9fe9[_0x3446df(0x185)]=_0x3446df(0x142),_0x4a9fe9[_0x3446df(0x1f8)]='trackEvent:\x20Exception\x20in\x20event\x20tracking,\x20testFrameworkState=%s\x20hookState=%s\x20argsLength=%s,\x20exception=%s';const _0x3101d6=_0x4a9fe9;await super[_0x3446df(0x1b3)](_0x43ca11,_0x102b18,_0x3386e3);const _0x554928=this['resolveInstance'](_0x43ca11,_0x102b18,_0x3386e3);if(!_0x554928)return;logger[_0x3446df(0x1f1)](_0x3446df(0x15d)+_0x43ca11+_0x3446df(0x18f)+_0x102b18+_0x3446df(0x1f5)+_0x554928['getRef']());try{if(_0x3101d6[_0x3446df(0x1e1)](_0x102b18,HookState[_0x3446df(0x1be)])&&_0x3101d6[_0x3446df(0x13e)](_0x43ca11,TestFrameworkState[_0x3446df(0x1b2)])){const _0x21dbda=_0x3386e3['test'];logger[_0x3446df(0x1f1)](_0x3446df(0x18e)+_0x21dbda['id']+'}');const _0x4784e3=TestInfo['getTestUUID'](_0x21dbda['id']);_0x554928[_0x3446df(0x18c)](this[_0x3446df(0x176)](_0x4784e3,_0x21dbda)),logger[_0x3446df(0x1f1)](_0x3446df(0x1ee)+_0x21dbda['id']+_0x3446df(0x1aa)+_0x43ca11+_0x3446df(0x17e)+_0x102b18+_0x3446df(0x1a8)+_0x554928[_0x3446df(0x190)]());}if(_0x3101d6[_0x3446df(0x1cd)](_0x102b18,HookState[_0x3446df(0x184)])&&_0x3101d6[_0x3446df(0x1d1)](_0x43ca11,TestFrameworkState[_0x3446df(0x1b2)])){const _0x750cd0=_0x3386e3[_0x3446df(0x142)],_0x42ad78=_0x3386e3[_0x3446df(0x177)];logger[_0x3446df(0x1f1)](_0x3446df(0x1b4)+_0x750cd0['id']),_0x554928[_0x3446df(0x18c)](this['parsePlaywrightTestResult'](_0x750cd0['id'],_0x42ad78,_0x750cd0)),this[_0x3446df(0x159)](_0x554928,_0x43ca11,_0x102b18,_0x3101d6[_0x3446df(0x185)],_0x3386e3);}if(CLIUtils[_0x3446df(0x1fa)](_0x43ca11['toString']()[_0x3446df(0x1cb)]('.')[0x1])){const _0x5e0b11=await this[_0x3446df(0x1b8)](_0x554928,_0x43ca11,_0x102b18,_0x3386e3);_0x554928[_0x3446df(0x18c)](_0x5e0b11);}}catch(_0x587e61){logger[_0x3446df(0x1d4)](util[_0x3446df(0x1bc)](_0x3101d6[_0x3446df(0x1f8)],_0x43ca11,_0x102b18,_0x3386e3['length'],_0x587e61));}_0x3386e3[_0x3446df(0x182)]=_0x554928,await this['runHooks'](_0x554928,_0x43ca11,_0x102b18,_0x3386e3);}[a65_0x2b555f(0x201)](_0x1c36c8,_0x43e8e7,_0x289f95={}){const _0x26419d=a65_0x2b555f,_0x150e04={};_0x150e04[_0x26419d(0x1b7)]=function(_0x4cd5b1,_0x3e90f6){return _0x4cd5b1===_0x3e90f6;};const _0x37f545=_0x150e04;let _0x558de9=null;return(_0x37f545[_0x26419d(0x1b7)](_0x1c36c8,TestFrameworkState['INIT_TEST'])||_0x37f545[_0x26419d(0x1b7)](_0x1c36c8,TestFrameworkState['NONE']))&&this[_0x26419d(0x178)](_0x1c36c8,_0x289f95),_0x558de9=TestFramework['getTrackedInstance'](),_0x558de9;}['trackPlaywrightInstance'](_0x56b05c,_0x69877e){const _0x18ad3e=a65_0x2b555f,_0x373c6f=CLIUtils[_0x18ad3e(0x1df)](),_0x3a1bf7=TrackedInstance[_0x18ad3e(0x17d)](_0x373c6f);let _0x217d70=null;logger[_0x18ad3e(0x1db)](_0x18ad3e(0x17c)+_0x373c6f+_0x18ad3e(0x1a4)+_0x56b05c),_0x217d70=new TestFrameworkInstance(_0x3a1bf7,this[_0x18ad3e(0x145)](),this['getTestFrameworksVersions'](),_0x56b05c,HookState[_0x18ad3e(0x1a7)]),TestFramework[_0x18ad3e(0x193)](_0x3a1bf7,_0x217d70),logger['info'](_0x18ad3e(0x1f6)+_0x3a1bf7[_0x18ad3e(0x183)]()+_0x18ad3e(0x166)+_0x373c6f);}['parsePlaywrightTest'](_0xf824,_0x117957){const _0xdecad=a65_0x2b555f,_0x494cb5={'yAMHo':function(_0x3e458f,_0x27f566){return _0x3e458f(_0x27f566);},'xldvs':function(_0x18cc01,_0x45d867){return _0x18cc01(_0x45d867);},'NDUOn':function(_0x44534b,_0x433023){return _0x44534b(_0x433023);},'DNqeq':function(_0x2bb3f7,_0x2317b8){return _0x2bb3f7(_0x2317b8);}},_0x1db6c1=_0x494cb5['yAMHo'](getPlaywrightTestId,_0x117957),_0x4e2852=_0x494cb5[_0xdecad(0x1fc)](getPlaywrightTestTitle,_0x117957),_0xa49988=_0x494cb5[_0xdecad(0x1fc)](getTestTags,_0x117957),_0x27f6d4=_0x494cb5[_0xdecad(0x1fc)](getPlaywrightTestCode,_0x117957),_0x2de754=_0x494cb5[_0xdecad(0x1ef)](getPlaywrightTestFilePath,_0x117957),_0xab61ee=_0x2de754+':'+_0x494cb5[_0xdecad(0x206)](getPlaywrightTestLocation,_0x117957),_0x1b418a=_0x494cb5[_0xdecad(0x1ef)](getPlaywrightTestScope,_0x117957),_0x7d7e8a=_0x494cb5[_0xdecad(0x1a0)](getPlaywrightTestScopes,_0x117957),_0x53469f=_0x494cb5[_0xdecad(0x206)](getPlaywrightSessionName,_0x117957),_0x410a8a=this[_0xdecad(0x145)]()[0x0],_0x6cc3b0={[TestFrameworkConstants[_0xdecad(0x1d3)]]:_0x410a8a,[TestFrameworkConstants[_0xdecad(0x150)]]:this[_0xdecad(0x19e)]()[_0x410a8a],[TestFrameworkConstants[_0xdecad(0x1e6)]]:[],[TestFrameworkConstants[_0xdecad(0x1bb)]]:{},[TestFrameworkConstants[_0xdecad(0x170)]]:{},[TestFrameworkConstants[_0xdecad(0x1d8)]]:_0xf824,[TestFrameworkConstants['KEY_TEST_RESULT']]:TestFrameworkConstants[_0xdecad(0x1ba)],[TestFrameworkConstants[_0xdecad(0x1d0)]]:_0x53469f,[TestFrameworkConstants[_0xdecad(0x1e2)]]:_0x2de754,[TestFrameworkConstants[_0xdecad(0x155)]]:_0x1db6c1,[TestFrameworkConstants[_0xdecad(0x19d)]]:_0x4e2852,[TestFrameworkConstants[_0xdecad(0x1dd)]]:_0xab61ee,[TestFrameworkConstants[_0xdecad(0x1c4)]]:_0x27f6d4,[TestFrameworkConstants[_0xdecad(0x186)]]:_0xa49988,[TestFrameworkConstants[_0xdecad(0x203)]]:_0x117957[_0xdecad(0x1c7)][0x0][_0xdecad(0x173)],[TestFrameworkConstants[_0xdecad(0x1ab)]]:_0x1b418a,[TestFrameworkConstants[_0xdecad(0x1e7)]]:_0x7d7e8a,[TestFrameworkConstants[_0xdecad(0x143)]]:_0x494cb5[_0xdecad(0x1fc)](getPlaywrightCustomRerunParam,_0x117957)};TestInfo['setTestDetails'](_0x117957['id'],_0x6cc3b0);const _0x29a8ed={};return _0x29a8ed[_0x1db6c1]=_0x6cc3b0,_0x29a8ed;}[a65_0x2b555f(0x158)](_0x3a1a7b,_0x5be7af,_0x1791dc){const _0xf97992=a65_0x2b555f,_0x3866bd={'WAirj':function(_0x59b7ed,_0x26bb9e){return _0x59b7ed(_0x26bb9e);},'IkwCe':'TEST_ATTACHMENT','ZZnRY':function(_0x3adb1e,_0xd76eca){return _0x3adb1e===_0xd76eca;},'UswrY':function(_0x8f1ce1,_0xbd3961){return _0x8f1ce1===_0xbd3961;},'imFvB':_0xf97992(0x172),'kCRvL':_0xf97992(0x1a6),'Rlvpy':function(_0xdc1fe8,_0x1c8698){return _0xdc1fe8(_0x1c8698);},'IZYZQ':function(_0x171657,_0x4e39c2){return _0x171657+_0x4e39c2;},'Bhadl':function(_0x3ea5fb,_0x596ea7){return _0x3ea5fb===_0x596ea7;},'HsZVr':function(_0x25360c,_0x589b33){return _0x25360c===_0x589b33;},'vGUXQ':_0xf97992(0x16f),'EyjTN':_0xf97992(0x1de),'OPoHB':function(_0x141f12,_0x36be48){return _0x141f12===_0x36be48;},'AWite':_0xf97992(0x169),'qaScb':function(_0x3e3ef3,_0x5584db){return _0x3e3ef3===_0x5584db;},'xEEPl':_0xf97992(0x157),'qrzkI':'Expected\x20to\x20fail,\x20but\x20passed.','trZyf':function(_0x14ed3f,_0x2e66b5,_0x473889){return _0x14ed3f(_0x2e66b5,_0x473889);},'tRpAh':function(_0x2bdc32,_0x3f0962){return _0x2bdc32||_0x3f0962;},'RJMWR':function(_0x4e63f0,_0x22162d){return _0x4e63f0(_0x22162d);},'TcXln':function(_0x259624,_0x2fcf26,_0x2e8748){return _0x259624(_0x2fcf26,_0x2e8748);},'OEwCj':_0xf97992(0x194),'KGRaQ':function(_0x10f653,_0x5827cd){return _0x10f653>_0x5827cd;},'pMvOE':function(_0x1292a0,_0x1a7fe6){return _0x1292a0>_0x1a7fe6;}};logger[_0xf97992(0x1f1)](_0xf97992(0x1af)+_0x3a1a7b);const _0x2ae044=new Date(_0x5be7af['startTime']),_0x4a5c3e=_0x5be7af['duration'],_0x2538ad=new Date(_0x3866bd[_0xf97992(0x1e5)](_0x2ae044[_0xf97992(0x1c0)](),_0x4a5c3e)),_0x277920=_0x5be7af['status'],_0x461b28=TestInfo[_0xf97992(0x1b1)](_0x3a1a7b)[TestFrameworkConstants[_0xf97992(0x164)]]||{};let _0x45ae6f=_0x277920;if(_0x3866bd['Bhadl'](_0x5be7af['status'],_0x1791dc[_0xf97992(0x1f3)]))_0x45ae6f=_0x3866bd[_0xf97992(0x179)](_0x5be7af['status'],_0x3866bd[_0xf97992(0x1cf)])?_0x3866bd[_0xf97992(0x1cf)]:_0x3866bd[_0xf97992(0x192)];else{(_0x3866bd['OPoHB'](_0x45ae6f,_0x3866bd['EyjTN'])||_0x3866bd[_0xf97992(0x179)](_0x45ae6f,_0x3866bd[_0xf97992(0x141)])||_0x3866bd[_0xf97992(0x199)](_0x45ae6f,_0x3866bd['xEEPl']))&&(_0x45ae6f=_0x3866bd[_0xf97992(0x141)]);if(_0x3866bd[_0xf97992(0x179)](_0x5be7af[_0xf97992(0x1c3)],_0x3866bd['EyjTN'])&&_0x3866bd[_0xf97992(0x199)](_0x1791dc[_0xf97992(0x1f3)],_0x3866bd[_0xf97992(0x141)])){const _0x4e5f1c={};_0x4e5f1c[_0xf97992(0x167)]=_0x3866bd[_0xf97992(0x161)],_0x4e5f1c[_0xf97992(0x15c)]=_0x3866bd[_0xf97992(0x161)],_0x5be7af[_0xf97992(0x1d4)]=_0x4e5f1c,_0x5be7af[_0xf97992(0x1c5)]=[_0x5be7af[_0xf97992(0x1d4)]];}}const {failureData:_0x41778a,logs:_0x502f56}=_0x3866bd[_0xf97992(0x144)](getFailureData,_0x5be7af?.['errors'],{}),_0x3eb235={[TestFrameworkConstants[_0xf97992(0x14f)]]:_0x3866bd['tRpAh'](_0x41778a,null),[TestFrameworkConstants[_0xf97992(0x1b5)]]:_0x5be7af?.[_0xf97992(0x1d4)]&&_0x3866bd['RJMWR'](getFailureType,_0x5be7af[_0xf97992(0x1d4)]['message']),[TestFrameworkConstants['KEY_TEST_FAILURE_REASON']]:_0x5be7af?.['error']&&_0x3866bd[_0xf97992(0x188)](removeAnsiColors,_0x5be7af[_0xf97992(0x1d4)]['message']),[TestFrameworkConstants[_0xf97992(0x1e0)]]:[],[TestFrameworkConstants['KEY_TEST_RESULT']]:_0x45ae6f,[TestFrameworkConstants['KEY_TEST_ENDED_AT']]:_0x2538ad[_0xf97992(0x204)](),[TestFrameworkConstants['KEY_TEST_RESULT_AT']]:new Date()[_0xf97992(0x204)](),[TestFrameworkConstants['KEY_CUSTOM_TAGS']]:_0x461b28},_0x381d24={};_0x381d24[_0xf97992(0x142)]=_0x1791dc;const _0x445cfd=this[_0xf97992(0x201)](TestFrameworkState[_0xf97992(0x1b2)],HookState[_0xf97992(0x184)],_0x381d24),_0x2c2f25=_0x445cfd[_0xf97992(0x168)]()[_0xf97992(0x151)](_0x3a1a7b)[TestFrameworkConstants[_0xf97992(0x1d8)]],_0x5ed6f1=[],_0x4c0c7f=_0x3866bd[_0xf97992(0x1cc)](findNestedKey,_0x5be7af,_0x3866bd[_0xf97992(0x1e4)]);if(_0x4c0c7f&&_0x3866bd['WAirj'](validateFilePath,_0x4c0c7f))try{_0x5ed6f1['push']({'kind':_0x3866bd[_0xf97992(0x1e9)],'timestamp':new Date()[_0xf97992(0x204)](),'test_run_uuid':_0x2c2f25,'file_name':path[_0xf97992(0x1f4)](_0x4c0c7f),'file_size':fs['statSync'](_0x4c0c7f)[_0xf97992(0x205)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x50574d){logger[_0xf97992(0x1d4)]('Error\x20processing\x20direct\x20trace\x20file\x20'+_0x4c0c7f+':\x20'+_0x50574d[_0xf97992(0x167)]);}const _0x1dd91e=TestInfo[_0xf97992(0x14c)](),_0x1e9ba6=_0x1dd91e[_0xf97992(0x196)](_0x650581=>_0x650581[_0xf97992(0x13f)]===_0x2c2f25);_0x1e9ba6['forEach'](_0xc776d3=>{const _0x108ae7=_0xf97992;if(_0xc776d3[_0x108ae7(0x14e)]&&_0x3866bd[_0x108ae7(0x1f2)](validateFilePath,_0xc776d3['filePath'])&&!_0x5ed6f1['some'](_0xd81451=>_0xd81451[_0x108ae7(0x1dc)]===path['basename'](_0xc776d3[_0x108ae7(0x14e)])))try{_0x5ed6f1[_0x108ae7(0x175)]({'kind':_0x3866bd[_0x108ae7(0x1e9)],'timestamp':new Date()[_0x108ae7(0x204)](),'test_run_uuid':_0x2c2f25,'file_name':path[_0x108ae7(0x1f4)](_0xc776d3['filePath']),'file_size':fs[_0x108ae7(0x14a)](_0xc776d3[_0x108ae7(0x14e)])[_0x108ae7(0x205)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x26a090){logger['error'](_0x108ae7(0x1ad)+_0xc776d3[_0x108ae7(0x14e)]+'\x20from\x20TestDetails:\x20'+_0x26a090[_0x108ae7(0x167)]);}});if(_0x3866bd[_0xf97992(0x19a)](_0x5ed6f1[_0xf97992(0x1fd)],0x0)){const _0x1871e0=_0x3eb235[TestFrameworkConstants[_0xf97992(0x1e0)]]||[];_0x3eb235[TestFrameworkConstants[_0xf97992(0x1e0)]]=[..._0x1871e0,..._0x5ed6f1];}const _0x2da0b4=TestInfo[_0xf97992(0x1b1)](_0x3a1a7b)[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{},_0x3f62bc=_0x3866bd[_0xf97992(0x144)](getManualUploadLogs,_0x2da0b4,_0x445cfd[_0xf97992(0x168)]()[_0xf97992(0x151)](_0x3a1a7b)[TestFrameworkConstants['KEY_TEST_UUID']]);if(_0x3866bd[_0xf97992(0x1f7)](_0x3f62bc['length'],0x0)){const _0x51dd9f=_0x3eb235[TestFrameworkConstants['KEY_LOGS']]||[];_0x3eb235[TestFrameworkConstants[_0xf97992(0x1e0)]]=[..._0x51dd9f,..._0x3f62bc];}const _0x1bc54b=_0x1791dc[_0xf97992(0x1ca)]||[],_0x4bf86d=_0x3eb235[TestFrameworkConstants[_0xf97992(0x164)]]||{};_0x1bc54b[_0xf97992(0x16d)](_0x9c26bd=>{const _0x133e1c=_0xf97992,{type:_0x59ad21}=_0x9c26bd;let _0x5e3c45=_0x9c26bd['description'];if(!_0x59ad21)return;(_0x3866bd['ZZnRY'](_0x5e3c45,undefined)||_0x3866bd[_0x133e1c(0x18b)](_0x5e3c45,null)||_0x3866bd[_0x133e1c(0x18b)](_0x3866bd[_0x133e1c(0x1f2)](String,_0x5e3c45)[_0x133e1c(0x195)](),''))&&(_0x5e3c45=_0x3866bd[_0x133e1c(0x140)]);if(!_0x4bf86d[_0x59ad21]){const _0x345f89={};_0x345f89['field_type']=_0x3866bd[_0x133e1c(0x16e)],_0x345f89[_0x133e1c(0x1d2)]=[],_0x4bf86d[_0x59ad21]=_0x345f89;}else!_0x4bf86d[_0x59ad21][_0x133e1c(0x1c2)]&&(_0x4bf86d[_0x59ad21]['field_type']=_0x3866bd[_0x133e1c(0x16e)]),!Array[_0x133e1c(0x1ff)](_0x4bf86d[_0x59ad21]['values'])&&(_0x4bf86d[_0x59ad21][_0x133e1c(0x1d2)]=[]);const _0x638279=_0x3866bd['Rlvpy'](String,_0x5e3c45)[_0x133e1c(0x1cb)](',')[_0x133e1c(0x1da)](_0x2e8db7=>_0x2e8db7[_0x133e1c(0x195)]());_0x4bf86d[_0x59ad21]['values']=[...new Set([..._0x4bf86d[_0x59ad21][_0x133e1c(0x1d2)],..._0x638279])];}),_0x3eb235[TestFrameworkConstants[_0xf97992(0x164)]]=_0x4bf86d,TestInfo[_0xf97992(0x1bd)](_0x3a1a7b,_0x3eb235);const _0x136986={};return _0x136986[_0x3a1a7b]=_0x3eb235,_0x136986;}async[a65_0x2b555f(0x1b8)](_0x1858ec,_0x5258b9,_0x163885,_0x4fa79c){const _0x146339=a65_0x2b555f,_0x1ce4dd={'elIYX':function(_0x1552a7,_0x1806ac){return _0x1552a7 in _0x1806ac;},'uyosw':function(_0x17bf90,_0x5f536a){return _0x17bf90(_0x5f536a);},'GOLZh':function(_0x50c902,_0x2b69ba){return _0x50c902(_0x2b69ba);},'yYQxp':function(_0x2de566,_0x35166a){return _0x2de566===_0x35166a;},'uAlSk':function(_0x491a37){return _0x491a37();},'WNYVG':function(_0x2a78e0,_0xf60a15){return _0x2a78e0===_0xf60a15;},'jDrRX':function(_0x12e8f6,_0x1942f0){return _0x12e8f6>_0x1942f0;},'mfRZT':function(_0x372d1b,_0x3733aa,_0x585f2d){return _0x372d1b(_0x3733aa,_0x585f2d);},'dTrSg':_0x146339(0x1c6),'zqngT':_0x146339(0x169),'FGBcw':_0x146339(0x1de),'fmqSx':function(_0x3c7a3e,_0xac05ef){return _0x3c7a3e!==_0xac05ef;},'iFJyl':function(_0x222cde,_0x233c1c){return _0x222cde+_0x233c1c;},'mHXta':_0x146339(0x1ed)},_0x128fff=_0x4fa79c['test'],_0x5207a5=_0x4fa79c['step'],_0x24c707=_0x4fa79c[_0x146339(0x142)]['id'],_0x124e01=_0x5258b9['toString']()[_0x146339(0x1cb)]('.')[0x1];let _0xa6a036=_0x1858ec['getAllData']()['get'](_0x24c707)[TestFrameworkConstants[_0x146339(0x170)]];!_0xa6a036&&(_0xa6a036={});!_0x1ce4dd[_0x146339(0x187)](_0x124e01,_0xa6a036)&&(_0xa6a036[_0x124e01]=[]);let _0x5936eb=_0x1858ec['getAllData']()[_0x146339(0x151)](_0x24c707)[TestFrameworkConstants['KEY_HOOKS_FINISHED']];!_0x5936eb&&(_0x5936eb={});!_0x1ce4dd[_0x146339(0x187)](_0x124e01,_0x5936eb)&&(_0x5936eb[_0x124e01]=[]);const _0x114c78={[TestFrameworkConstants['KEY_HOOKS_STARTED']]:_0xa6a036,[TestFrameworkConstants[_0x146339(0x1bb)]]:_0x5936eb},_0x19d4d4={};_0x19d4d4[_0x24c707]=_0x114c78;const _0x1b71ef=_0x19d4d4,_0x5bb787=_0x1ce4dd[_0x146339(0x18a)](getPlaywrightTestFilePath,_0x128fff),_0x4ce9ad=_0x5bb787+':'+_0x1ce4dd[_0x146339(0x1ea)](getPlaywrightTestLocation,_0x128fff),_0x58589b=TestInfo[_0x146339(0x1b1)](_0x24c707)[TestFrameworkConstants[_0x146339(0x164)]]||{};if(_0x1ce4dd[_0x146339(0x1ce)](_0x163885,HookState[_0x146339(0x1be)])){const _0x47d0d1={'key':_0x124e01,[TestFrameworkConstants[_0x146339(0x19f)]]:_0x1ce4dd['uAlSk'](uuidv4),[TestFrameworkConstants['KEY_HOOK_RESULT']]:TestFrameworkConstants[_0x146339(0x1e3)],[TestFrameworkConstants['KEY_EVENT_STARTED_AT']]:_0x5207a5[_0x146339(0x173)],[TestFrameworkConstants[_0x146339(0x16b)]]:[],[TestFrameworkConstants[_0x146339(0x152)]]:_0x5207a5[_0x146339(0x1c9)],[TestFrameworkConstants[_0x146339(0x1e2)]]:_0x5bb787,[TestFrameworkConstants[_0x146339(0x1dd)]]:_0x4ce9ad,[TestFrameworkConstants[_0x146339(0x164)]]:_0x58589b};_0xa6a036[_0x124e01][_0x146339(0x175)](_0x47d0d1),_0x1b71ef[_0x24c707][TestFrameworkConstants['KEY_HOOK_LAST_STARTED']]=_0x124e01,logger['debug']('Hook\x20Started\x20in\x20PRE\x20key\x20=\x20'+_0x124e01+_0x146339(0x1f9)+_0x47d0d1+_0x146339(0x1a9)+_0x4fa79c);}else{if(_0x1ce4dd[_0x146339(0x1b6)](_0x163885,HookState['POST'])){const _0x2a1650=await _0x4fa79c[_0x146339(0x177)],_0x122c30=_0xa6a036[_0x124e01]||[],_0x2e0d0e=_0x4fa79c[_0x146339(0x1d6)];logger[_0x146339(0x1f1)](_0x146339(0x15a)+_0x122c30+_0x146339(0x162)+_0x4fa79c);if(_0x1ce4dd[_0x146339(0x160)](_0x122c30[_0x146339(0x1fd)],0x0)){const _0x1e24e0=_0x122c30[_0x146339(0x200)]();if(_0x2e0d0e[_0x146339(0x1d4)]){const _0x4bb985=_0x1ce4dd[_0x146339(0x1c1)](failureData,_0x2e0d0e[_0x146339(0x1d4)],_0x1ce4dd[_0x146339(0x191)]);_0x1e24e0[TestFrameworkConstants[_0x146339(0x1d5)]]=_0x1ce4dd['uyosw'](getFailureType,_0x2e0d0e?.['error']['message']),_0x1e24e0[TestFrameworkConstants[_0x146339(0x156)]]=_0x1ce4dd[_0x146339(0x1ea)](removeAnsiColors,_0x2e0d0e?.[_0x146339(0x1d4)]['message']),_0x1e24e0[TestFrameworkConstants[_0x146339(0x1a1)]]=_0x1ce4dd['zqngT'],_0x1e24e0[TestFrameworkConstants[_0x146339(0x1a2)]]=_0x4bb985;}else _0x1e24e0[TestFrameworkConstants['KEY_HOOK_RESULT']]=_0x1ce4dd[_0x146339(0x15b)];_0x1ce4dd['fmqSx'](_0x2a1650,TestFrameworkConstants['DEFAULT_HOOK_RESULT'])&&(_0x1e24e0[TestFrameworkConstants[_0x146339(0x1a1)]]=!_0x2e0d0e['error']?_0x1ce4dd[_0x146339(0x15b)]:_0x1ce4dd['zqngT']);const _0x4ad6a5=new Date(_0x2e0d0e[_0x146339(0x173)]),_0x5e22cb=new Date(_0x1ce4dd[_0x146339(0x17b)](_0x4ad6a5[_0x146339(0x1c0)](),_0x2e0d0e[_0x146339(0x1ac)]));_0x1e24e0[TestFrameworkConstants[_0x146339(0x1a3)]]=_0x5e22cb[_0x146339(0x204)](),_0x1e24e0[TestFrameworkConstants[_0x146339(0x164)]]=_0x58589b;const _0x1ac59e=_0x1e24e0[TestFrameworkConstants[_0x146339(0x19f)]];await this[_0x146339(0x159)](_0x1858ec,_0x5258b9,_0x1ac59e,_0x1ce4dd[_0x146339(0x16a)],_0x4fa79c),!_0x5936eb[_0x124e01]&&(_0x5936eb[_0x124e01]=[]),_0x5936eb[_0x124e01][_0x146339(0x175)](_0x1e24e0),_0x1b71ef[_0x24c707][TestFrameworkConstants['KEY_HOOK_LAST_FINISHED']]=_0x124e01;}}}return _0x1b71ef;}async[a65_0x2b555f(0x159)](_0x143248,_0x7cff4a,_0x44747e,_0x31c3fc,_0x68b1a6){const _0x36be7c=a65_0x2b555f,_0x422cbd={'fJwvy':function(_0x13a120,_0x30ec7b){return _0x13a120===_0x30ec7b;},'tseWf':_0x36be7c(0x142),'JGgKQ':function(_0x5cef7c,_0x1d4707,_0x492cfd){return _0x5cef7c(_0x1d4707,_0x492cfd);},'wTuld':function(_0x1a7871,_0x5963d5,_0x10c4a9,_0x1a9393){return _0x1a7871(_0x5963d5,_0x10c4a9,_0x1a9393);},'neThr':function(_0x3d9aca,_0x117946,_0xc5a82e){return _0x3d9aca(_0x117946,_0xc5a82e);},'uUhYE':function(_0x569fac,_0x3d94b3,_0x169ccf){return _0x569fac(_0x3d94b3,_0x169ccf);},'jZXXV':function(_0x1383e0,_0x3af9f5,_0x507b93,_0x3fc15a,_0x4a8f1f){return _0x1383e0(_0x3af9f5,_0x507b93,_0x3fc15a,_0x4a8f1f);},'KieoE':function(_0xd339ea,_0x51158c,_0x309f67,_0x5c4016){return _0xd339ea(_0x51158c,_0x309f67,_0x5c4016);},'CrqvK':'hook','oEZTb':function(_0x294289,_0x54c02d,_0x3e0c03,_0x489b65,_0x4ba0f6){return _0x294289(_0x54c02d,_0x3e0c03,_0x489b65,_0x4ba0f6);}};try{if(_0x422cbd[_0x36be7c(0x1ae)](_0x31c3fc,_0x422cbd['tseWf'])){const _0x4e60d4=await _0x68b1a6[_0x36be7c(0x177)],_0x219bd6=_0x68b1a6['test']['id'],_0x28ccf0=_0x68b1a6[_0x36be7c(0x142)];logger['debug'](_0x36be7c(0x202)+_0x219bd6);const _0x304b6d=_0x143248[_0x36be7c(0x168)]()[_0x36be7c(0x151)](_0x219bd6)[TestFrameworkConstants['KEY_TEST_UUID']];await _0x422cbd['JGgKQ'](sendTraceZip,_0x4e60d4,_0x304b6d);const {steps:_0x3b0b58,logs:_0x437e71}=_0x422cbd['wTuld'](getStepsAndLogs,_0x4e60d4[_0x36be7c(0x174)],_0x143248[_0x36be7c(0x168)]()['get'](_0x219bd6)[TestFrameworkConstants[_0x36be7c(0x1d8)]],_0x422cbd[_0x36be7c(0x1d7)]),_0x5a0b0c=_0x422cbd[_0x36be7c(0x1d9)](getScreenshots,_0x4e60d4,_0x143248[_0x36be7c(0x168)]()['get'](_0x219bd6)[TestFrameworkConstants[_0x36be7c(0x1d8)]]),{_:_0x20c656,logs:_0x1e192b}=_0x422cbd['uUhYE'](getFailureData,_0x4e60d4[_0x36be7c(0x1c5)],{'test_run_uuid':_0x143248[_0x36be7c(0x168)]()[_0x36be7c(0x151)](_0x219bd6)[TestFrameworkConstants[_0x36be7c(0x1d8)]]}),_0x734bf7=TestInfo[_0x36be7c(0x1b1)](_0x219bd6)[TestFrameworkConstants[_0x36be7c(0x1e8)]]||{},_0xfc2f5e=_0x422cbd[_0x36be7c(0x1d9)](getMediaArtifactsLogs,_0x734bf7,_0x143248[_0x36be7c(0x168)]()[_0x36be7c(0x151)](_0x219bd6)[TestFrameworkConstants[_0x36be7c(0x1d8)]]),_0x4c3fd1=_0x143248[_0x36be7c(0x168)]()[_0x36be7c(0x151)](_0x219bd6),{[TestFrameworkConstants[_0x36be7c(0x1d3)]]:_0x808093='',[TestFrameworkConstants[_0x36be7c(0x150)]]:_0x33aadf=''}=_0x4c3fd1,_0x3d9af6={'platformIndex':'0','logs':[..._0x437e71||[],..._0x5a0b0c||[],..._0x1e192b||[],..._0xfc2f5e||[]],'testFrameworkName':_0x808093,'testFrameworkVersion':_0x33aadf,'testFrameworkState':_0x7cff4a[_0x36be7c(0x17f)]()[_0x36be7c(0x1cb)]('.')[0x1]};_0x422cbd['jZXXV'](updatePayloadForTraceLogs,_0x3d9af6,_0x68b1a6,_0x219bd6,_0x143248),logger['debug'](_0x36be7c(0x181)+_0x219bd6+_0x36be7c(0x1b0)+util[_0x36be7c(0x17a)](_0x3d9af6));const _0x47757e=await GrpcClient[_0x36be7c(0x147)]()[_0x36be7c(0x180)](_0x3d9af6);}else{const {steps:_0x57c309,logs:_0x3fab44}=_0x422cbd[_0x36be7c(0x1bf)](getStepsAndLogs,_0x68b1a6[_0x36be7c(0x1d6)][_0x36be7c(0x174)],_0x44747e,_0x422cbd[_0x36be7c(0x1b9)]),_0x55ebb7=_0x68b1a6[_0x36be7c(0x142)]['id'];logger['debug'](_0x36be7c(0x202)+_0x55ebb7);const _0x7b273d=_0x143248[_0x36be7c(0x168)]()[_0x36be7c(0x151)](_0x55ebb7),{[TestFrameworkConstants[_0x36be7c(0x1d3)]]:_0x177b41='',[TestFrameworkConstants[_0x36be7c(0x150)]]:_0x3ea067=''}=_0x7b273d,_0x1d5084={'platformIndex':'0','logs':_0x3fab44,'testFrameworkName':_0x177b41,'testFrameworkVersion':_0x3ea067,'testFrameworkState':_0x7cff4a[_0x36be7c(0x17f)]()['split']('.')[0x1]};_0x422cbd['oEZTb'](updatePayloadForTraceLogs,_0x1d5084,_0x68b1a6,_0x55ebb7,_0x143248),logger['debug'](_0x36be7c(0x181)+_0x55ebb7+_0x36be7c(0x1b0)+util[_0x36be7c(0x17a)](_0x1d5084));const _0x2b3f2e=await GrpcClient[_0x36be7c(0x147)]()[_0x36be7c(0x180)](_0x1d5084);}}catch(_0x4790ef){logger[_0x36be7c(0x1d4)]('Error\x20in\x20sendLogCreatedEvent:\x20'+util[_0x36be7c(0x1bc)](_0x4790ef));}}}module[a65_0x2b555f(0x171)]=PlaywrightTestFramework;