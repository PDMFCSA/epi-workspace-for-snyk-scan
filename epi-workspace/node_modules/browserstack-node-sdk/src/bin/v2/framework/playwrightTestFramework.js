const a69_0x1c999f=a69_0x2b5e;(function(_0x138303,_0x200434){const _0x2cf26a=a69_0x2b5e,_0x2f1cfe=_0x138303();while(!![]){try{const _0x143756=-parseInt(_0x2cf26a(0x1e4))/0x1*(parseInt(_0x2cf26a(0x177))/0x2)+parseInt(_0x2cf26a(0x1c0))/0x3*(-parseInt(_0x2cf26a(0x1ea))/0x4)+parseInt(_0x2cf26a(0x19f))/0x5*(-parseInt(_0x2cf26a(0x1a8))/0x6)+parseInt(_0x2cf26a(0x1ed))/0x7+-parseInt(_0x2cf26a(0x21e))/0x8+-parseInt(_0x2cf26a(0x224))/0x9*(parseInt(_0x2cf26a(0x195))/0xa)+-parseInt(_0x2cf26a(0x1ef))/0xb*(-parseInt(_0x2cf26a(0x226))/0xc);if(_0x143756===_0x200434)break;else _0x2f1cfe['push'](_0x2f1cfe['shift']());}catch(_0x34570e){_0x2f1cfe['push'](_0x2f1cfe['shift']());}}}(a69_0x4fdc,0x6bb5f));function a69_0x4fdc(){const _0x6c1eec=['TEST_SCREENSHOT','aRbFr','errors','Error\x20processing\x20trace\x20file\x20','../grpcClient','../../../helpers/classLogger.js','trackEvent:\x20Exception\x20in\x20event\x20tracking,\x20testFrameworkState=%s\x20hookState=%s\x20argsLength=%s,\x20exception=%s','ZlorV','../instances/testFrameworkInstance.js','basename','result','gpiyG','zXKDK','toISOString','bOuGs','steps','retry','SwouV','KEY_EVENT_ENDED_AT','qeSFp','trackPlaywrightInstance:\x20created\x20instance\x20for\x20target=','testUId','ruSzB','expectedStatus','split','HElyc','1610904CiIDls','size','EdsZy','Hook\x20List\x20in\x20Post\x20','status','trackPlaywrightInstance','9yJhtLF','EryzU','461976gkCcNi','../../../helpers/helper.js','KEY_TEST_LOGS','KEY_TEST_FILE_PATH','TEST_ATTACHMENT','description','annotations','xRPwm','FrGXg','err','KEY_TEST_FAILURE_TYPE','ihbyk','xoZPQ','uEwus','vfdIC','bMlle','trackPlaywrightInstance:\x20saved\x20instance\x20contextId=','KEY_TEST_UUID','../TestInfo.js','title','KEY_HOOK_LAST_FINISHED','inspect','\x20batch\x20','getTestUUID','LYNMi','KEY_HOOK_ID','KEY_TEST_SCOPE','getId','../../../helpers/test-observability/utils','KEY_TEST_TAGS','\x20hookState=','\x20payload=','trackHookEvent','Expected\x20to\x20fail,\x20but\x20passed.','KEY_HOOKS_FINISHED','concat','Hook\x20Started\x20in\x20PRE\x20key\x20=\x20','get','AUNAG','ceil','slice','EiboB','getRef','1626364CUKhtO','./constants/testFrameworkConstants.js','yQShX','Prsyn','../state/testFrameworkState.js','UHDPw','error','push','matchHookRegex','KEY_HOOK_RESULT','exports','getTestDetails','trackEvent','logCreatedEvent','setTestDetails','getTestFrameworksVersions','message','DEFAULT_HOOK_RESULT','runHooks','getAllData','instance','wQpAj','filePath','setTrackedInstance','KEY_TEST_RESULT_AT','values','TEST','../instances/trackedInstance.js','QZVRg','addMultipleEntries','3569010KMXbdk','trackEvent\x20loading\x20testData\x20for\x20testId:\x20','\x20and\x20args\x20=\x20','getTestIdentifierFromTestInfo','SMkpa','OARUG','XMeTD','FNwtj','\x20instance=','parsePlaywrightTestResult','4130925JKONNO','getTestFrameworks','sendLogCreatedEvent','hook','jYdlI','CJvpN','INIT_TEST','pLkni','PRE','6pUmvKj','NONE','../../playwright/reporter/pwUtils','trackEvent:\x20loaded\x20testData\x20for\x20testId:\x20','createContext','isArray','FtPwc','XVMeT','attachments','\x20\x20and\x20args\x20=\x20','rtSCP','KEY_TEST_ATTACHMENTS','length','KEY_TEST_RERUN_NAME','GjLQN','QQgKn','toString','KEY_TEST_NAME','KEY_AUTOMATE_SESSION_NAME','uuid','stack','Error\x20in\x20sendLogCreatedEvent:\x20','pMoUZ','KEY_TEST_ENDED_AT','2955fLvCxe','KEY_TEST_RETRY_OF','startTime','field_type','vzMFJ','statSync','KEY_TEST_RESULT','getTrackedInstance','\x20result=','filter','maOKE','trackEvent:\x20found\x20instance,\x20testFrameworkState=','forEach','./testFramework','getInstance','XLmzO','trim','multi_dropdown',',\x20state=','WkLMv','XxiHf',',\x20testFrameworkState=','trackEvent\x20loading\x20testResults\x20for\x20testId:\x20','KEY_TEST_FAILURE','raOqY','passed','getCurrentInstanceName','qWgcg','DEFAULT_TEST_RESULT','DzpkB','KEY_TEST_FRAMEWORK_NAME','Oftdg','KEY_TEST_STARTED_AT','KEY_HOOK_FAILURE_REASON','\x20target=','KEY_TEST_FRAMEWORK_VERSION','1viPpAf','KEY_HOOK_LAST_STARTED','step','POST','uFFHQ','failed','212YSDCJa','some','file_name','1859515gXAeFV','parsePlaywrightTest','693nstSIc','\x20testHookState=','\x20&\x20hook\x20=\x20','khoxl','info','sendLogCreatedEvent\x20for\x20testId:\x20','NCdXl','oYNsH','../state/hookState.js','KEY_CUSTOM_TAGS','Error\x20processing\x20direct\x20trace\x20file\x20','KEY_LOGS','No\x20reason\x20provided','KEY_TEST_SCOPES','test','getTime','KEY_HOOKS_STARTED','VmEcU','debug','results','../../utils/constants'];a69_0x4fdc=function(){return _0x6c1eec;};return a69_0x4fdc();}const TestFramework=require(a69_0x1c999f(0x1cd)),TestFrameworkState=require(a69_0x1c999f(0x17b)),HookState=require(a69_0x1c999f(0x1f7)),{createClassLogger}=require(a69_0x1c999f(0x209)),TestFrameworkInstance=require(a69_0x1c999f(0x20c)),CLIUtils=require('../cliUtils.js'),TrackedInstance=require(a69_0x1c999f(0x192)),TestFrameworkConstants=require(a69_0x1c999f(0x178)),logger=createClassLogger('PlaywrightTestFramework'),{v4:uuidv4}=require(a69_0x1c999f(0x1bb)),util=require('util'),{getPlaywrightSessionName,getPlaywrightTestFilePath,getPlaywrightTestId,getPlaywrightTestTitle,getPlaywrightTestLocation,getPlaywrightTestTags,getPlaywrightTestCode,getPlaywrightTestScope,getPlaywrightTestScopes,getStepsAndLogs,getScreenshots,getVideos,getPlaywrightCustomRerunParam,getMediaArtifactsLogs,getManualUploadLogs,updatePayloadForTraceLogs}=require(a69_0x1c999f(0x227)),TestInfo=require(a69_0x1c999f(0x238)),GrpcClient=require(a69_0x1c999f(0x208)),{removeAnsiColors,getFailureType,failureData}=require(a69_0x1c999f(0x242)),{getFailureData,getTestTags,getTestRunIdentifier}=require(a69_0x1c999f(0x1aa)),{findNestedKey,sendTraceZip,validateFilePath}=require(a69_0x1c999f(0x1aa)),path=require('path'),fs=require('fs'),helper=require('../../../../src/helpers/helper'),{PLAYWRIGHT_TRACE_LOGS}=require(a69_0x1c999f(0x203));class PlaywrightTestFramework extends TestFramework{constructor(_0x256ecd,_0x5bb6b0,_0x386157){super(_0x256ecd,_0x5bb6b0,_0x386157);}async[a69_0x1c999f(0x183)](_0x5b04fb,_0x3b8bac,_0x5deb66={}){const _0x364953=a69_0x1c999f,_0xbee8f9={'pLkni':function(_0x2749d5,_0x6ec48b){return _0x2749d5===_0x6ec48b;},'bOuGs':function(_0xdf1a4b,_0x215699){return _0xdf1a4b===_0x215699;},'vzMFJ':function(_0x4b2f9d,_0x3d295e){return _0x4b2f9d===_0x3d295e;},'UHDPw':function(_0x44a5ac,_0xead2e2,_0x12614b){return _0x44a5ac(_0xead2e2,_0x12614b);},'qWgcg':function(_0x73a18f,_0x4c5916){return _0x73a18f===_0x4c5916;},'zexnD':_0x364953(0x1fd),'Oftdg':_0x364953(0x20a)};super[_0x364953(0x183)](_0x5b04fb,_0x3b8bac,_0x5deb66);if(_0xbee8f9[_0x364953(0x1a6)](_0x5b04fb,TestFrameworkState[_0x364953(0x204)])){const _0x3e6634=TestInfo[_0x364953(0x198)](_0x5deb66[_0x364953(0x1fd)],_0x5deb66['test'][_0x364953(0x214)]);TestInfo[_0x364953(0x185)](_0x3e6634,_0x5deb66[_0x364953(0x20e)],!![]);}const _0x382535=this['resolveInstance'](_0x5b04fb,_0x3b8bac,_0x5deb66);if(!_0x382535)return;logger['debug'](_0x364953(0x1cb)+_0x5b04fb+_0x364953(0x244)+_0x3b8bac+'\x20instanceId='+_0x382535[_0x364953(0x176)]());try{if(_0xbee8f9[_0x364953(0x212)](_0x3b8bac,HookState[_0x364953(0x1a7)])&&_0xbee8f9[_0x364953(0x1c4)](_0x5b04fb,TestFrameworkState['TEST'])){const _0x28029b=_0x5deb66[_0x364953(0x1fd)];logger[_0x364953(0x201)](_0x364953(0x196)+_0x28029b['id']+'}');const _0x216175=TestInfo['getTestUUID'](_0xbee8f9[_0x364953(0x17c)](getTestRunIdentifier,_0x28029b,_0x5deb66[_0x364953(0x20e)]['retry']));_0x382535[_0x364953(0x194)](this[_0x364953(0x1ee)](_0x216175,_0x28029b,_0x5deb66[_0x364953(0x20e)])),logger[_0x364953(0x201)](_0x364953(0x1ab)+_0x28029b['id']+_0x364953(0x1d5)+_0x5b04fb+_0x364953(0x1f0)+_0x3b8bac+_0x364953(0x19d)+_0x382535[_0x364953(0x176)]());}if(_0xbee8f9[_0x364953(0x1c4)](_0x3b8bac,HookState[_0x364953(0x1e7)])&&_0xbee8f9[_0x364953(0x1db)](_0x5b04fb,TestFrameworkState['TEST'])){const _0x5c313a=_0x5deb66[_0x364953(0x1fd)],_0x2dee11=_0x5deb66[_0x364953(0x20e)];logger[_0x364953(0x201)](_0x364953(0x1d6)+_0x5c313a['id']),_0x382535[_0x364953(0x194)](this[_0x364953(0x19e)](_0x5c313a['id'],_0x2dee11,_0x5c313a)),await this[_0x364953(0x1a1)](_0x382535,_0x5b04fb,_0x3b8bac,_0xbee8f9['zexnD'],_0x5deb66);}if(CLIUtils[_0x364953(0x17f)](_0x5b04fb[_0x364953(0x1b8)]()[_0x364953(0x21c)]('.')[0x1])){const _0x20f576=await this[_0x364953(0x246)](_0x382535,_0x5b04fb,_0x3b8bac,_0x5deb66);_0x382535['addMultipleEntries'](_0x20f576);}}catch(_0x5c8ab4){logger[_0x364953(0x17d)](util['format'](_0xbee8f9[_0x364953(0x1df)],_0x5b04fb,_0x3b8bac,_0x5deb66[_0x364953(0x1b4)],_0x5c8ab4));}_0x5deb66[_0x364953(0x18b)]=_0x382535,await this[_0x364953(0x189)](_0x382535,_0x5b04fb,_0x3b8bac,_0x5deb66);}['resolveInstance'](_0x1cc153,_0x405f40,_0x2a08bf={}){const _0x36c58b=a69_0x1c999f,_0x486943={};_0x486943['raOqY']=function(_0x1f29da,_0x1526ac){return _0x1f29da===_0x1526ac;},_0x486943['ihbyk']=function(_0x388cca,_0x4250de){return _0x388cca===_0x4250de;};const _0x3efb53=_0x486943;let _0x1e3961=null;return(_0x3efb53[_0x36c58b(0x1d8)](_0x1cc153,TestFrameworkState[_0x36c58b(0x1a5)])||_0x3efb53[_0x36c58b(0x231)](_0x1cc153,TestFrameworkState[_0x36c58b(0x1a9)]))&&this['trackPlaywrightInstance'](_0x1cc153,_0x2a08bf),_0x1e3961=TestFramework[_0x36c58b(0x1c7)](),_0x1e3961;}[a69_0x1c999f(0x223)](_0x38a1ca,_0x283063){const _0x28e087=a69_0x1c999f,_0x1735b6=CLIUtils[_0x28e087(0x1da)](),_0x85341f=TrackedInstance[_0x28e087(0x1ac)](_0x1735b6);let _0xc81504=null;logger[_0x28e087(0x1f3)](_0x28e087(0x218)+_0x1735b6+_0x28e087(0x1d2)+_0x38a1ca),_0xc81504=new TestFrameworkInstance(_0x85341f,this[_0x28e087(0x1a0)](),this[_0x28e087(0x186)](),_0x38a1ca,HookState[_0x28e087(0x1a9)]),TestFramework[_0x28e087(0x18e)](_0x85341f,_0xc81504),logger[_0x28e087(0x1f3)](_0x28e087(0x236)+_0x85341f[_0x28e087(0x241)]()+_0x28e087(0x1e2)+_0x1735b6);}['parsePlaywrightTest'](_0x59a685,_0x3a7d53,_0x2e7ce4){const _0x44be4c=a69_0x1c999f,_0x1ce5ef={'uEwus':function(_0x4b3e02,_0x2d90fb){return _0x4b3e02(_0x2d90fb);},'jYdlI':function(_0x3f4279,_0x1f853f){return _0x3f4279(_0x1f853f);},'DzpkB':function(_0x327e54,_0x2adfd3){return _0x327e54(_0x2adfd3);},'FrGXg':function(_0x355ae6,_0xeb7257){return _0x355ae6(_0xeb7257);},'XMeTD':function(_0x564872,_0x4ca2d2){return _0x564872(_0x4ca2d2);},'VmEcU':function(_0x59a4d7,_0x44edbd,_0x5462dd){return _0x59a4d7(_0x44edbd,_0x5462dd);}},_0x3e5238=_0x1ce5ef[_0x44be4c(0x233)](getPlaywrightTestId,_0x3a7d53),_0x281c2e=_0x1ce5ef[_0x44be4c(0x233)](getPlaywrightTestTitle,_0x3a7d53),_0x284222=_0x1ce5ef[_0x44be4c(0x1a3)](getTestTags,_0x3a7d53),_0x409a94=_0x1ce5ef[_0x44be4c(0x233)](getPlaywrightTestCode,_0x3a7d53),_0x3ff2de=_0x1ce5ef[_0x44be4c(0x1dd)](getPlaywrightTestFilePath,_0x3a7d53),_0x112efb=_0x3ff2de+':'+_0x1ce5ef[_0x44be4c(0x22e)](getPlaywrightTestLocation,_0x3a7d53),_0x585974=_0x1ce5ef['uEwus'](getPlaywrightTestScope,_0x3a7d53),_0x1e16f3=_0x1ce5ef[_0x44be4c(0x19b)](getPlaywrightTestScopes,_0x3a7d53),_0xe369ed=_0x1ce5ef[_0x44be4c(0x233)](getPlaywrightSessionName,_0x3a7d53),_0x1cd432=this[_0x44be4c(0x1a0)]()[0x0],_0x15e387=_0x1ce5ef[_0x44be4c(0x200)](getTestRunIdentifier,_0x3a7d53,_0x2e7ce4[_0x44be4c(0x214)]),_0x40b956={[TestFrameworkConstants[_0x44be4c(0x1de)]]:_0x1cd432,[TestFrameworkConstants[_0x44be4c(0x1e3)]]:this[_0x44be4c(0x186)]()[_0x1cd432],[TestFrameworkConstants[_0x44be4c(0x228)]]:[],[TestFrameworkConstants[_0x44be4c(0x248)]]:{},[TestFrameworkConstants['KEY_HOOKS_STARTED']]:{},[TestFrameworkConstants['KEY_TEST_UUID']]:_0x59a685,[TestFrameworkConstants[_0x44be4c(0x1c6)]]:TestFrameworkConstants[_0x44be4c(0x1dc)],[TestFrameworkConstants[_0x44be4c(0x1ba)]]:_0xe369ed,[TestFrameworkConstants['KEY_TEST_FILE_PATH']]:_0x3ff2de,[TestFrameworkConstants['KEY_TEST_ID']]:_0x3e5238,[TestFrameworkConstants[_0x44be4c(0x1b9)]]:_0x281c2e,[TestFrameworkConstants['KEY_TEST_LOCATION']]:_0x112efb,[TestFrameworkConstants['KEY_TEST_CODE']]:_0x409a94,[TestFrameworkConstants[_0x44be4c(0x243)]]:_0x284222,[TestFrameworkConstants[_0x44be4c(0x1e0)]]:_0x3a7d53[_0x44be4c(0x202)][0x0][_0x44be4c(0x1c2)],[TestFrameworkConstants[_0x44be4c(0x240)]]:_0x585974,[TestFrameworkConstants[_0x44be4c(0x1fc)]]:_0x1e16f3,[TestFrameworkConstants[_0x44be4c(0x1b5)]]:_0x1ce5ef['FrGXg'](getPlaywrightCustomRerunParam,_0x3a7d53)};TestInfo[_0x44be4c(0x185)](_0x15e387,_0x40b956);const _0x3e7d4b={};return _0x3e7d4b[_0x15e387]=_0x40b956,_0x3e7d4b;}[a69_0x1c999f(0x19e)](_0x2631de,_0x49b81f,_0x451558){const _0x259ea8=a69_0x1c999f,_0x30de6e={'mrhfM':function(_0x3b16dc,_0x27a8e9){return _0x3b16dc(_0x27a8e9);},'ZlorV':_0x259ea8(0x22a),'zXKDK':function(_0x3a9097,_0x1fe615){return _0x3a9097===_0x1fe615;},'QZVRg':function(_0xfcd072,_0x4512a3){return _0xfcd072===_0x4512a3;},'maOKE':_0x259ea8(0x1fb),'LYNMi':_0x259ea8(0x1d1),'XxiHf':function(_0x223d5f,_0x37d039){return _0x223d5f(_0x37d039);},'TQEFQ':function(_0x54d230,_0xe8402b,_0x8d27b3){return _0x54d230(_0xe8402b,_0x8d27b3);},'CJvpN':function(_0x1acea6,_0x322049){return _0x1acea6+_0x322049;},'NCdXl':'skipped','SwouV':_0x259ea8(0x1d9),'wQpAj':function(_0x20b4e3,_0x3223b9){return _0x20b4e3===_0x3223b9;},'SMkpa':_0x259ea8(0x1e9),'baUPo':'timedOut','HElyc':_0x259ea8(0x247),'XLmzO':function(_0x36ce54,_0x2c6b36,_0x4ea067){return _0x36ce54(_0x2c6b36,_0x4ea067);},'qpOzY':function(_0x2cf6c5,_0x57aa7d){return _0x2cf6c5||_0x57aa7d;},'pMoUZ':function(_0xc3486d,_0x3d4435){return _0xc3486d(_0x3d4435);},'gpiyG':function(_0x4f281a,_0x5e1993){return _0x4f281a>_0x5e1993;},'aNGoe':function(_0xf73476,_0x4fe327){return _0xf73476-_0x4fe327;},'khoxl':function(_0x5042cc,_0x19b12d,_0x4e3331){return _0x5042cc(_0x19b12d,_0x4e3331);},'GjAkh':'path','OARUG':function(_0x35f13f,_0x396d1b){return _0x35f13f>_0x396d1b;}};logger['debug']('parsePlaywrightTestResult:\x20testId='+_0x2631de);const _0x27be30=_0x30de6e['TQEFQ'](getTestRunIdentifier,_0x451558,_0x49b81f[_0x259ea8(0x214)]),_0x5cd56f=new Date(_0x49b81f[_0x259ea8(0x1c2)]),_0x54c500=_0x49b81f['duration'],_0x236e1b=new Date(_0x30de6e[_0x259ea8(0x1a4)](_0x5cd56f[_0x259ea8(0x1fe)](),_0x54c500)),_0x2452f7=_0x49b81f[_0x259ea8(0x222)],_0xc22c16=TestInfo[_0x259ea8(0x182)](_0x27be30)[TestFrameworkConstants[_0x259ea8(0x1f8)]]||{};let _0x4cfd45=_0x2452f7;if(_0x30de6e['QZVRg'](_0x49b81f['status'],_0x451558[_0x259ea8(0x21b)]))_0x4cfd45=_0x30de6e[_0x259ea8(0x210)](_0x49b81f[_0x259ea8(0x222)],_0x30de6e['NCdXl'])?_0x30de6e[_0x259ea8(0x1f5)]:_0x30de6e[_0x259ea8(0x215)];else{(_0x30de6e[_0x259ea8(0x193)](_0x4cfd45,_0x30de6e['SwouV'])||_0x30de6e[_0x259ea8(0x18c)](_0x4cfd45,_0x30de6e[_0x259ea8(0x199)])||_0x30de6e[_0x259ea8(0x193)](_0x4cfd45,_0x30de6e['baUPo']))&&(_0x4cfd45=_0x30de6e[_0x259ea8(0x199)]);if(_0x30de6e[_0x259ea8(0x193)](_0x49b81f[_0x259ea8(0x222)],_0x30de6e[_0x259ea8(0x215)])&&_0x30de6e[_0x259ea8(0x193)](_0x451558[_0x259ea8(0x21b)],_0x30de6e[_0x259ea8(0x199)])){const _0x5da543={};_0x5da543[_0x259ea8(0x187)]=_0x30de6e[_0x259ea8(0x21d)],_0x5da543[_0x259ea8(0x1bc)]=_0x30de6e[_0x259ea8(0x21d)],_0x49b81f[_0x259ea8(0x17d)]=_0x5da543,_0x49b81f[_0x259ea8(0x206)]=[_0x49b81f[_0x259ea8(0x17d)]];}}const {failureData:_0xd555ce,logs:_0xa6ffe1}=_0x30de6e['XLmzO'](getFailureData,_0x49b81f?.[_0x259ea8(0x206)],{}),_0xbc9409={[TestFrameworkConstants[_0x259ea8(0x1d7)]]:_0x30de6e['qpOzY'](_0xd555ce,null),[TestFrameworkConstants[_0x259ea8(0x230)]]:_0x49b81f?.[_0x259ea8(0x17d)]&&_0x30de6e[_0x259ea8(0x1be)](getFailureType,_0x49b81f['error']['message']),[TestFrameworkConstants['KEY_TEST_FAILURE_REASON']]:_0x49b81f?.[_0x259ea8(0x17d)]&&_0x30de6e['pMoUZ'](removeAnsiColors,_0x49b81f[_0x259ea8(0x17d)][_0x259ea8(0x187)]),[TestFrameworkConstants[_0x259ea8(0x1fa)]]:[],[TestFrameworkConstants[_0x259ea8(0x1c6)]]:_0x4cfd45,[TestFrameworkConstants[_0x259ea8(0x1bf)]]:_0x236e1b[_0x259ea8(0x211)](),[TestFrameworkConstants[_0x259ea8(0x18f)]]:new Date()['toISOString'](),[TestFrameworkConstants[_0x259ea8(0x1f8)]]:_0xc22c16};if(_0x49b81f&&_0x30de6e[_0x259ea8(0x20f)](_0x49b81f[_0x259ea8(0x214)],0x0)){const _0x255f97=TestInfo[_0x259ea8(0x23d)](_0x30de6e[_0x259ea8(0x1cf)](getTestRunIdentifier,_0x451558,_0x30de6e['aNGoe'](_0x49b81f['retry'],0x1)));_0xbc9409[TestFrameworkConstants[_0x259ea8(0x1c1)]]=_0x255f97;}const _0x3d0c9d={};_0x3d0c9d[_0x259ea8(0x1fd)]=_0x451558;const _0x3f3305=this['resolveInstance'](TestFrameworkState[_0x259ea8(0x191)],HookState[_0x259ea8(0x1e7)],_0x3d0c9d),_0x51fde2=_0x3f3305[_0x259ea8(0x18a)]()[_0x259ea8(0x171)](_0x27be30)[TestFrameworkConstants[_0x259ea8(0x237)]],_0x5ccde2=[],_0x137522=_0x30de6e[_0x259ea8(0x1f2)](findNestedKey,_0x49b81f,_0x30de6e['GjAkh']);if(_0x137522&&_0x30de6e[_0x259ea8(0x1d4)](validateFilePath,_0x137522))try{_0x5ccde2[_0x259ea8(0x17e)]({'kind':_0x30de6e[_0x259ea8(0x20b)],'timestamp':new Date()[_0x259ea8(0x211)](),'test_run_uuid':_0x51fde2,'file_name':path[_0x259ea8(0x20d)](_0x137522),'file_size':fs[_0x259ea8(0x1c5)](_0x137522)[_0x259ea8(0x21f)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x14330f){logger[_0x259ea8(0x17d)](_0x259ea8(0x1f9)+_0x137522+':\x20'+_0x14330f[_0x259ea8(0x187)]);}const _0x5c8212=TestInfo['getTraceFilePaths'](),_0x1fe1fe=_0x5c8212[_0x259ea8(0x1c9)](_0x2d53a7=>_0x2d53a7[_0x259ea8(0x219)]===_0x51fde2);_0x1fe1fe[_0x259ea8(0x1cc)](_0xb64cd3=>{const _0x21a743=_0x259ea8;if(_0xb64cd3[_0x21a743(0x18d)]&&_0x30de6e['mrhfM'](validateFilePath,_0xb64cd3['filePath'])&&!_0x5ccde2[_0x21a743(0x1eb)](_0x5ac99b=>_0x5ac99b[_0x21a743(0x1ec)]===path['basename'](_0xb64cd3[_0x21a743(0x18d)])))try{_0x5ccde2['push']({'kind':_0x30de6e[_0x21a743(0x20b)],'timestamp':new Date()[_0x21a743(0x211)](),'test_run_uuid':_0x51fde2,'file_name':path['basename'](_0xb64cd3[_0x21a743(0x18d)]),'file_size':fs[_0x21a743(0x1c5)](_0xb64cd3['filePath'])[_0x21a743(0x21f)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x438bb4){logger[_0x21a743(0x17d)](_0x21a743(0x207)+_0xb64cd3[_0x21a743(0x18d)]+'\x20from\x20TestDetails:\x20'+_0x438bb4[_0x21a743(0x187)]);}});if(_0x30de6e[_0x259ea8(0x20f)](_0x5ccde2[_0x259ea8(0x1b4)],0x0)){const _0x26ef9a=_0xbc9409[TestFrameworkConstants[_0x259ea8(0x1fa)]]||[];_0xbc9409[TestFrameworkConstants[_0x259ea8(0x1fa)]]=[..._0x26ef9a,..._0x5ccde2];}const _0xccf058=TestInfo['getTestDetails'](_0x27be30)[TestFrameworkConstants[_0x259ea8(0x1b3)]]||{},_0x1df837=_0x30de6e[_0x259ea8(0x1cf)](getManualUploadLogs,_0xccf058,_0x3f3305['getAllData']()[_0x259ea8(0x171)](_0x27be30)[TestFrameworkConstants['KEY_TEST_UUID']]);if(_0x30de6e[_0x259ea8(0x19a)](_0x1df837['length'],0x0)){const _0x26825a=_0xbc9409[TestFrameworkConstants[_0x259ea8(0x1fa)]]||[];_0xbc9409[TestFrameworkConstants[_0x259ea8(0x1fa)]]=[..._0x26825a,..._0x1df837];}const _0x1b822f=_0x451558[_0x259ea8(0x22c)]||[],_0x5c46b1=_0xbc9409[TestFrameworkConstants[_0x259ea8(0x1f8)]]||{};_0x1b822f[_0x259ea8(0x1cc)](_0x23742d=>{const _0x49adad=_0x259ea8,{type:_0x3335b7}=_0x23742d;let _0x2d01b7=_0x23742d[_0x49adad(0x22b)];if(!_0x3335b7)return;(_0x30de6e[_0x49adad(0x210)](_0x2d01b7,undefined)||_0x30de6e[_0x49adad(0x193)](_0x2d01b7,null)||_0x30de6e[_0x49adad(0x193)](_0x30de6e['mrhfM'](String,_0x2d01b7)[_0x49adad(0x1d0)](),''))&&(_0x2d01b7=_0x30de6e[_0x49adad(0x1ca)]);if(!_0x5c46b1[_0x3335b7]){const _0x334978={};_0x334978[_0x49adad(0x1c3)]=_0x30de6e[_0x49adad(0x23e)],_0x334978[_0x49adad(0x190)]=[],_0x5c46b1[_0x3335b7]=_0x334978;}else!_0x5c46b1[_0x3335b7][_0x49adad(0x1c3)]&&(_0x5c46b1[_0x3335b7][_0x49adad(0x1c3)]=_0x30de6e[_0x49adad(0x23e)]),!Array[_0x49adad(0x1ad)](_0x5c46b1[_0x3335b7]['values'])&&(_0x5c46b1[_0x3335b7][_0x49adad(0x190)]=[]);const _0x1b9a4f=_0x30de6e[_0x49adad(0x1d4)](String,_0x2d01b7)[_0x49adad(0x21c)](',')['map'](_0x537c4d=>_0x537c4d[_0x49adad(0x1d0)]());_0x5c46b1[_0x3335b7][_0x49adad(0x190)]=[...new Set([..._0x5c46b1[_0x3335b7][_0x49adad(0x190)],..._0x1b9a4f])];}),_0xbc9409[TestFrameworkConstants[_0x259ea8(0x1f8)]]=_0x5c46b1,TestInfo[_0x259ea8(0x185)](_0x27be30,_0xbc9409);const _0x45e063={};return _0x45e063[_0x27be30]=_0xbc9409,_0x45e063;}async[a69_0x1c999f(0x246)](_0xd72536,_0x403797,_0x974b8d,_0x3e0f0e){const _0x5a6001=a69_0x1c999f,_0x27fa99={'yQShX':function(_0x28f727,_0x48c1c1,_0x21caac){return _0x28f727(_0x48c1c1,_0x21caac);},'WkLMv':function(_0xf2715a,_0x174ffe){return _0xf2715a in _0x174ffe;},'FNwtj':function(_0x3e5e7b,_0x48057f){return _0x3e5e7b(_0x48057f);},'FYhKi':function(_0x37d5f5,_0x568a12){return _0x37d5f5===_0x568a12;},'snhVM':function(_0x2c88a7){return _0x2c88a7();},'aRbFr':function(_0x5212f2,_0x3fe1d9){return _0x5212f2>_0x3fe1d9;},'xNlJJ':_0x5a6001(0x22f),'Prsyn':function(_0x271760,_0xed6bb){return _0x271760(_0xed6bb);},'bHgdu':_0x5a6001(0x1e9),'rtSCP':_0x5a6001(0x1d9),'wIXqD':function(_0x289753,_0x4dcf0a){return _0x289753!==_0x4dcf0a;},'EryzU':function(_0x462330,_0x60b318){return _0x462330+_0x60b318;},'AUNAG':_0x5a6001(0x1a2)},_0xd19c20=_0x3e0f0e[_0x5a6001(0x1fd)],_0x1c51de=_0x3e0f0e['step'],_0x4b2ad2=_0x27fa99[_0x5a6001(0x179)](getTestRunIdentifier,_0xd19c20,_0x3e0f0e[_0x5a6001(0x20e)][_0x5a6001(0x214)]),_0x2ff2b1=_0x403797['toString']()[_0x5a6001(0x21c)]('.')[0x1];let _0x338a9c=_0xd72536[_0x5a6001(0x18a)]()['get'](_0x4b2ad2)[TestFrameworkConstants[_0x5a6001(0x1ff)]];!_0x338a9c&&(_0x338a9c={});!_0x27fa99['WkLMv'](_0x2ff2b1,_0x338a9c)&&(_0x338a9c[_0x2ff2b1]=[]);let _0x59b445=_0xd72536[_0x5a6001(0x18a)]()['get'](_0x4b2ad2)[TestFrameworkConstants[_0x5a6001(0x248)]];!_0x59b445&&(_0x59b445={});!_0x27fa99[_0x5a6001(0x1d3)](_0x2ff2b1,_0x59b445)&&(_0x59b445[_0x2ff2b1]=[]);const _0x1ac354={[TestFrameworkConstants[_0x5a6001(0x1ff)]]:_0x338a9c,[TestFrameworkConstants[_0x5a6001(0x248)]]:_0x59b445},_0x279b33={};_0x279b33[_0x4b2ad2]=_0x1ac354;const _0x58b60e=_0x279b33,_0x5e8f77=_0x27fa99['FNwtj'](getPlaywrightTestFilePath,_0xd19c20),_0x4f9870=_0x5e8f77+':'+_0x27fa99[_0x5a6001(0x19c)](getPlaywrightTestLocation,_0xd19c20),_0x16f1e5=TestInfo[_0x5a6001(0x182)](_0x4b2ad2)[TestFrameworkConstants[_0x5a6001(0x1f8)]]||{};if(_0x27fa99['FYhKi'](_0x974b8d,HookState['PRE'])){const _0x4ac46b={'key':_0x2ff2b1,[TestFrameworkConstants['KEY_HOOK_ID']]:_0x27fa99['snhVM'](uuidv4),[TestFrameworkConstants[_0x5a6001(0x180)]]:TestFrameworkConstants[_0x5a6001(0x188)],[TestFrameworkConstants['KEY_EVENT_STARTED_AT']]:_0x1c51de[_0x5a6001(0x1c2)],[TestFrameworkConstants['KEY_HOOK_LOGS']]:[],[TestFrameworkConstants['KEY_HOOK_NAME']]:_0x1c51de[_0x5a6001(0x239)],[TestFrameworkConstants[_0x5a6001(0x229)]]:_0x5e8f77,[TestFrameworkConstants['KEY_TEST_LOCATION']]:_0x4f9870,[TestFrameworkConstants['KEY_CUSTOM_TAGS']]:_0x16f1e5};_0x338a9c[_0x2ff2b1][_0x5a6001(0x17e)](_0x4ac46b),_0x58b60e[_0x4b2ad2][TestFrameworkConstants[_0x5a6001(0x1e5)]]=_0x2ff2b1,logger[_0x5a6001(0x201)](_0x5a6001(0x170)+_0x2ff2b1+_0x5a6001(0x1f1)+_0x4ac46b+_0x5a6001(0x1b1)+_0x3e0f0e);}else{if(_0x27fa99['FYhKi'](_0x974b8d,HookState['POST'])){const _0x194b19=await _0x3e0f0e[_0x5a6001(0x20e)],_0x558a74=_0x338a9c[_0x2ff2b1]||[],_0x48d057=_0x3e0f0e[_0x5a6001(0x1e6)];logger['debug'](_0x5a6001(0x221)+_0x558a74+_0x5a6001(0x197)+_0x3e0f0e);if(_0x27fa99[_0x5a6001(0x205)](_0x558a74[_0x5a6001(0x1b4)],0x0)){const _0xf5287d=_0x558a74['pop']();if(_0x48d057[_0x5a6001(0x17d)]){const _0x3de249=_0x27fa99[_0x5a6001(0x179)](failureData,_0x48d057[_0x5a6001(0x17d)],_0x27fa99['xNlJJ']);_0xf5287d[TestFrameworkConstants['KEY_HOOK_FAILURE_TYPE']]=_0x27fa99['FNwtj'](getFailureType,_0x48d057?.[_0x5a6001(0x17d)][_0x5a6001(0x187)]),_0xf5287d[TestFrameworkConstants[_0x5a6001(0x1e1)]]=_0x27fa99[_0x5a6001(0x17a)](removeAnsiColors,_0x48d057?.['error']['message']),_0xf5287d[TestFrameworkConstants['KEY_HOOK_RESULT']]=_0x27fa99['bHgdu'],_0xf5287d[TestFrameworkConstants['KEY_HOOK_FAILURE']]=_0x3de249;}else _0xf5287d[TestFrameworkConstants['KEY_HOOK_RESULT']]=_0x27fa99[_0x5a6001(0x1b2)];_0x27fa99['wIXqD'](_0x194b19,TestFrameworkConstants[_0x5a6001(0x188)])&&(_0xf5287d[TestFrameworkConstants[_0x5a6001(0x180)]]=!_0x48d057[_0x5a6001(0x17d)]?_0x27fa99['rtSCP']:_0x27fa99['bHgdu']);const _0x1bf2c2=new Date(_0x48d057[_0x5a6001(0x1c2)]),_0x388e8b=new Date(_0x27fa99[_0x5a6001(0x225)](_0x1bf2c2[_0x5a6001(0x1fe)](),_0x48d057['duration']));_0xf5287d[TestFrameworkConstants[_0x5a6001(0x216)]]=_0x388e8b[_0x5a6001(0x211)](),_0xf5287d[TestFrameworkConstants[_0x5a6001(0x1f8)]]=_0x16f1e5;const _0x337487=_0xf5287d[TestFrameworkConstants[_0x5a6001(0x23f)]];await this[_0x5a6001(0x1a1)](_0xd72536,_0x403797,_0x337487,_0x27fa99[_0x5a6001(0x172)],_0x3e0f0e),!_0x59b445[_0x2ff2b1]&&(_0x59b445[_0x2ff2b1]=[]),_0x59b445[_0x2ff2b1][_0x5a6001(0x17e)](_0xf5287d),_0x58b60e[_0x4b2ad2][TestFrameworkConstants[_0x5a6001(0x23a)]]=_0x2ff2b1;}}}return _0x58b60e;}async[a69_0x1c999f(0x1a1)](_0x268721,_0x37f657,_0x4f370a,_0x473fab,_0x47bebe){const _0x2d8ca8=a69_0x1c999f,_0x1565db={'EdsZy':function(_0x4cede8,_0x30babf){return _0x4cede8===_0x30babf;},'GjLQN':_0x2d8ca8(0x1fd),'qeSFp':function(_0x24f9cf,_0x1d9e65,_0x3b489f){return _0x24f9cf(_0x1d9e65,_0x3b489f);},'QQgKn':function(_0x3d3b73,_0x4ede55,_0x1fd7ea){return _0x3d3b73(_0x4ede55,_0x1fd7ea);},'EiboB':_0x2d8ca8(0x1b0),'xoqPg':function(_0x36b6b6,_0x51a842,_0x3e8f34,_0x2b3780){return _0x36b6b6(_0x51a842,_0x3e8f34,_0x2b3780);},'ruSzB':function(_0xfac04a,_0xe47744,_0x232194){return _0xfac04a(_0xe47744,_0x232194);},'oYNsH':function(_0x18564f,_0x11529a,_0x16222e){return _0x18564f(_0x11529a,_0x16222e);},'xRPwm':function(_0x7b88cc,_0x1f35d4,_0x4cbef2){return _0x7b88cc(_0x1f35d4,_0x4cbef2);},'xoZPQ':function(_0x26f40f,_0x4d884){return _0x26f40f/_0x4d884;},'XVMeT':function(_0x32864e,_0x4d43c7){return _0x32864e<_0x4d43c7;},'pXqrv':function(_0x705a15,_0x19efe8){return _0x705a15*_0x19efe8;},'vfdIC':function(_0x5540bb,_0xc9668a){return _0x5540bb+_0xc9668a;},'bMlle':function(_0x5908f0,_0x34a266,_0xbfa148,_0x5ab5af,_0x232292){return _0x5908f0(_0x34a266,_0xbfa148,_0x5ab5af,_0x232292);},'FtPwc':function(_0x236ce1,_0x1b2d86){return _0x236ce1+_0x1b2d86;},'uFFHQ':function(_0x3acdfc,_0x2aea4f,_0x32668f,_0x3fdd1f){return _0x3acdfc(_0x2aea4f,_0x32668f,_0x3fdd1f);},'uWLxp':_0x2d8ca8(0x1a2)};try{if(_0x1565db[_0x2d8ca8(0x220)](_0x473fab,_0x1565db[_0x2d8ca8(0x1b6)])){const _0x284535=await _0x47bebe[_0x2d8ca8(0x20e)],_0x29a6ce=_0x1565db[_0x2d8ca8(0x217)](getTestRunIdentifier,_0x47bebe[_0x2d8ca8(0x1fd)],_0x47bebe[_0x2d8ca8(0x20e)][_0x2d8ca8(0x214)]),_0xa38963=_0x47bebe[_0x2d8ca8(0x1fd)];logger['debug']('sendLogCreatedEvent:\x20testId='+_0x29a6ce+_0x2d8ca8(0x1c8)+util[_0x2d8ca8(0x23b)](_0x284535));const _0xdd0a0=_0x268721['getAllData']()[_0x2d8ca8(0x171)](_0x29a6ce)[TestFrameworkConstants[_0x2d8ca8(0x237)]];await _0x1565db[_0x2d8ca8(0x1b7)](sendTraceZip,_0x284535,_0xdd0a0);const _0x4527e7=TestInfo[_0x2d8ca8(0x182)](_0x29a6ce)[_0x1565db[_0x2d8ca8(0x175)]],_0x429fa7={};if(_0x4527e7){!_0x284535[_0x2d8ca8(0x1b0)]&&(_0x284535['attachments']=[]);_0x429fa7[_0x2d8ca8(0x1b0)]=_0x284535[_0x2d8ca8(0x1b0)]['concat'](_0x4527e7||[]);const _0x492760=TestInfo['getTestDetails'](_0x29a6ce);delete _0x492760[_0x1565db[_0x2d8ca8(0x175)]],TestInfo[_0x2d8ca8(0x185)](_0x29a6ce,_0x492760);}const {steps:_0x37ccdd,logs:_0x14cba3}=_0x1565db['xoqPg'](getStepsAndLogs,_0x284535[_0x2d8ca8(0x213)],_0x268721[_0x2d8ca8(0x18a)]()[_0x2d8ca8(0x171)](_0x29a6ce)[TestFrameworkConstants['KEY_TEST_UUID']],_0x1565db[_0x2d8ca8(0x1b6)]),_0x31f731=_0x1565db[_0x2d8ca8(0x217)](getScreenshots,_0x429fa7,_0x268721[_0x2d8ca8(0x18a)]()[_0x2d8ca8(0x171)](_0x29a6ce)[TestFrameworkConstants[_0x2d8ca8(0x237)]]),_0x1409ee=_0x1565db[_0x2d8ca8(0x21a)](getVideos,_0x284535,_0x268721[_0x2d8ca8(0x18a)]()['get'](_0x29a6ce)[TestFrameworkConstants[_0x2d8ca8(0x237)]]),{_:_0x223ee5,logs:_0x33bd2a}=_0x1565db[_0x2d8ca8(0x1f6)](getFailureData,_0x284535[_0x2d8ca8(0x206)],{'test_run_uuid':_0x268721['getAllData']()[_0x2d8ca8(0x171)](_0x29a6ce)[TestFrameworkConstants[_0x2d8ca8(0x237)]]}),_0x24409f=TestInfo['getTestDetails'](_0x29a6ce)[TestFrameworkConstants[_0x2d8ca8(0x1b3)]]||{},_0xa0bdad=_0x1565db[_0x2d8ca8(0x22d)](getMediaArtifactsLogs,_0x24409f,_0x268721[_0x2d8ca8(0x18a)]()[_0x2d8ca8(0x171)](_0x29a6ce)[TestFrameworkConstants[_0x2d8ca8(0x237)]]),_0x36079a=_0x268721['getAllData']()[_0x2d8ca8(0x171)](_0x29a6ce),{[TestFrameworkConstants[_0x2d8ca8(0x1de)]]:_0xdac511='',[TestFrameworkConstants[_0x2d8ca8(0x1e3)]]:_0x5593a5=''}=_0x36079a,_0x10cefa=(_0x14cba3||[])['concat'](_0x31f731||[])['concat'](_0x33bd2a||[])[_0x2d8ca8(0x249)](_0x1409ee||[])[_0x2d8ca8(0x249)](_0xa0bdad||[]),_0x59adc9=0x28,_0x8efa11=Math[_0x2d8ca8(0x173)](_0x1565db[_0x2d8ca8(0x232)](_0x10cefa['length'],_0x59adc9));for(let _0x1fe8be=0x0;_0x1565db[_0x2d8ca8(0x1af)](_0x1fe8be,_0x8efa11);_0x1fe8be++){const _0x4f90fc=_0x1565db['pXqrv'](_0x1fe8be,_0x59adc9),_0x35d258=_0x1565db[_0x2d8ca8(0x234)](_0x4f90fc,_0x59adc9),_0x1331d9=_0x10cefa[_0x2d8ca8(0x174)](_0x4f90fc,_0x35d258),_0x5e0dae={'platformIndex':'0','logs':_0x1331d9,'testFrameworkName':_0xdac511,'testFrameworkVersion':_0x5593a5,'testFrameworkState':_0x37f657[_0x2d8ca8(0x1b8)]()[_0x2d8ca8(0x21c)]('.')[0x1]};_0x1565db[_0x2d8ca8(0x235)](updatePayloadForTraceLogs,_0x5e0dae,_0x47bebe,_0x29a6ce,_0x268721),logger['debug'](_0x2d8ca8(0x1f4)+_0x29a6ce+_0x2d8ca8(0x23c)+_0x1565db['FtPwc'](_0x1fe8be,0x1)+'/'+_0x8efa11+_0x2d8ca8(0x245)+util['inspect'](_0x5e0dae));const _0x37338f=await GrpcClient[_0x2d8ca8(0x1ce)]()[_0x2d8ca8(0x184)](_0x5e0dae);logger[_0x2d8ca8(0x201)](_0x2d8ca8(0x1f4)+_0x29a6ce+_0x2d8ca8(0x23c)+_0x1565db[_0x2d8ca8(0x1ae)](_0x1fe8be,0x1)+'/'+_0x8efa11+'\x20response='+util[_0x2d8ca8(0x23b)](_0x37338f));}}else{const {steps:_0x8f090c,logs:_0x147f22}=_0x1565db[_0x2d8ca8(0x1e8)](getStepsAndLogs,_0x47bebe[_0x2d8ca8(0x1e6)]['steps'],_0x4f370a,_0x1565db['uWLxp']),_0x4d0c4a=_0x1565db[_0x2d8ca8(0x1f6)](getTestRunIdentifier,_0x47bebe['test'],_0x47bebe[_0x2d8ca8(0x20e)][_0x2d8ca8(0x214)]);logger[_0x2d8ca8(0x201)]('sendLogCreatedEvent:\x20testId='+_0x4d0c4a);const _0x858e79=_0x268721[_0x2d8ca8(0x18a)]()[_0x2d8ca8(0x171)](_0x4d0c4a),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x4fecdc='',[TestFrameworkConstants[_0x2d8ca8(0x1e3)]]:_0x23329f=''}=_0x858e79,_0x276034={'platformIndex':'0','logs':_0x147f22,'testFrameworkName':_0x4fecdc,'testFrameworkVersion':_0x23329f,'testFrameworkState':_0x37f657[_0x2d8ca8(0x1b8)]()[_0x2d8ca8(0x21c)]('.')[0x1]};_0x1565db[_0x2d8ca8(0x235)](updatePayloadForTraceLogs,_0x276034,_0x47bebe,_0x4d0c4a,_0x268721),logger['debug'](_0x2d8ca8(0x1f4)+_0x4d0c4a+_0x2d8ca8(0x245)+util[_0x2d8ca8(0x23b)](_0x276034));const _0x32915c=await GrpcClient[_0x2d8ca8(0x1ce)]()[_0x2d8ca8(0x184)](_0x276034);}}catch(_0x44d7ca){logger['error'](_0x2d8ca8(0x1bd)+util['format'](_0x44d7ca));}}}function a69_0x2b5e(_0x54b11c,_0x2afe7e){const _0x4fdc6b=a69_0x4fdc();return a69_0x2b5e=function(_0x2b5e3d,_0x1bb807){_0x2b5e3d=_0x2b5e3d-0x170;let _0x37883c=_0x4fdc6b[_0x2b5e3d];return _0x37883c;},a69_0x2b5e(_0x54b11c,_0x2afe7e);}module[a69_0x1c999f(0x181)]=PlaywrightTestFramework;