function a67_0x1200(_0x1c641f,_0x4f23fb){const _0xe08d35=a67_0xe08d();return a67_0x1200=function(_0x120056,_0x2db000){_0x120056=_0x120056-0x86;let _0x11bbc2=_0xe08d35[_0x120056];return _0x11bbc2;},a67_0x1200(_0x1c641f,_0x4f23fb);}const a67_0x3686a4=a67_0x1200;(function(_0x567b1d,_0x362879){const _0x42fbc9=a67_0x1200,_0xcf1f0c=_0x567b1d();while(!![]){try{const _0x1d6ec1=parseInt(_0x42fbc9(0xa7))/0x1*(parseInt(_0x42fbc9(0xab))/0x2)+-parseInt(_0x42fbc9(0xce))/0x3+parseInt(_0x42fbc9(0xf9))/0x4*(parseInt(_0x42fbc9(0xfd))/0x5)+-parseInt(_0x42fbc9(0xdc))/0x6+-parseInt(_0x42fbc9(0xdd))/0x7*(parseInt(_0x42fbc9(0x11f))/0x8)+-parseInt(_0x42fbc9(0xfa))/0x9+-parseInt(_0x42fbc9(0xfe))/0xa*(-parseInt(_0x42fbc9(0xb5))/0xb);if(_0x1d6ec1===_0x362879)break;else _0xcf1f0c['push'](_0xcf1f0c['shift']());}catch(_0x33a336){_0xcf1f0c['push'](_0xcf1f0c['shift']());}}}(a67_0xe08d,0x8edbf));const TestFramework=require(a67_0x3686a4(0x15a)),TestFrameworkState=require('../state/testFrameworkState.js'),HookState=require(a67_0x3686a4(0xaf)),{createClassLogger}=require(a67_0x3686a4(0x127)),TestFrameworkInstance=require('../instances/testFrameworkInstance.js'),CLIUtils=require(a67_0x3686a4(0x138)),TrackedInstance=require(a67_0x3686a4(0x107)),TestFrameworkConstants=require(a67_0x3686a4(0x15b)),logger=createClassLogger('PlaywrightTestFramework'),{v4:uuidv4}=require(a67_0x3686a4(0x115)),util=require(a67_0x3686a4(0xf0)),{getPlaywrightSessionName,getPlaywrightTestFilePath,getPlaywrightTestId,getPlaywrightTestTitle,getPlaywrightTestLocation,getPlaywrightTestTags,getPlaywrightTestCode,getPlaywrightTestScope,getPlaywrightTestScopes,getStepsAndLogs,getScreenshots,getVideos,getPlaywrightCustomRerunParam,getMediaArtifactsLogs,getManualUploadLogs,updatePayloadForTraceLogs}=require(a67_0x3686a4(0xbd)),TestInfo=require(a67_0x3686a4(0x8b)),GrpcClient=require('../grpcClient'),{removeAnsiColors,getFailureType,failureData}=require(a67_0x3686a4(0x10f)),{getFailureData,getTestTags,getTestRunIdentifier}=require(a67_0x3686a4(0x126)),{findNestedKey,sendTraceZip,validateFilePath}=require('../../playwright/reporter/pwUtils'),path=require(a67_0x3686a4(0xd3)),fs=require('fs'),helper=require(a67_0x3686a4(0xd5)),{PLAYWRIGHT_TRACE_LOGS}=require(a67_0x3686a4(0x9f));class PlaywrightTestFramework extends TestFramework{constructor(_0xbb3c33,_0x472e40,_0x4efd18){super(_0xbb3c33,_0x472e40,_0x4efd18);}async[a67_0x3686a4(0x13a)](_0x44d718,_0x4b6641,_0x32b4aa={}){const _0x874a38=a67_0x3686a4,_0x4564d3={'BLejL':function(_0x5ca4fb,_0x1176a5){return _0x5ca4fb===_0x1176a5;},'fTGgj':function(_0x140ab4,_0x3b0d95){return _0x140ab4===_0x3b0d95;},'eYpiZ':function(_0x1338af,_0x33dd82){return _0x1338af===_0x33dd82;},'gMUCs':function(_0x3c29fb,_0x2ff5fb,_0x373a87){return _0x3c29fb(_0x2ff5fb,_0x373a87);},'JcHbq':function(_0x46e317,_0x438970){return _0x46e317===_0x438970;},'gkjTL':_0x874a38(0xea),'iJhcT':_0x874a38(0x147)};super[_0x874a38(0x13a)](_0x44d718,_0x4b6641,_0x32b4aa);if(_0x4564d3['BLejL'](_0x44d718,TestFrameworkState[_0x874a38(0xe9)])){const _0x453772=TestInfo['getTestIdentifierFromTestInfo'](_0x32b4aa['test'],_0x32b4aa[_0x874a38(0xea)][_0x874a38(0x93)]);TestInfo[_0x874a38(0x122)](_0x453772,_0x32b4aa['result'],!![]);}const _0x4aacb0=this[_0x874a38(0x98)](_0x44d718,_0x4b6641,_0x32b4aa);if(!_0x4aacb0)return;logger[_0x874a38(0x91)](_0x874a38(0xb0)+_0x44d718+'\x20hookState='+_0x4b6641+_0x874a38(0xc4)+_0x4aacb0['getRef']());try{if(_0x4564d3[_0x874a38(0x12b)](_0x4b6641,HookState[_0x874a38(0xd4)])&&_0x4564d3[_0x874a38(0x15d)](_0x44d718,TestFrameworkState[_0x874a38(0x86)])){const _0x380f1d=_0x32b4aa[_0x874a38(0xea)];logger[_0x874a38(0x91)]('trackEvent\x20loading\x20testData\x20for\x20testId:\x20'+_0x380f1d['id']+'}');const _0x3e0578=TestInfo['getTestUUID'](_0x4564d3['gMUCs'](getTestRunIdentifier,_0x380f1d,_0x32b4aa[_0x874a38(0xdb)][_0x874a38(0x93)]));_0x4aacb0[_0x874a38(0xfb)](this[_0x874a38(0xb1)](_0x3e0578,_0x380f1d,_0x32b4aa['result'])),logger[_0x874a38(0x91)]('trackEvent:\x20loaded\x20testData\x20for\x20testId:\x20'+_0x380f1d['id']+_0x874a38(0x11b)+_0x44d718+_0x874a38(0x12d)+_0x4b6641+'\x20instance='+_0x4aacb0['getRef']());}if(_0x4564d3[_0x874a38(0x157)](_0x4b6641,HookState[_0x874a38(0x8c)])&&_0x4564d3[_0x874a38(0x15d)](_0x44d718,TestFrameworkState[_0x874a38(0x86)])){const _0x479aaa=_0x32b4aa[_0x874a38(0xea)],_0x5d8c88=_0x32b4aa[_0x874a38(0xdb)];logger[_0x874a38(0x91)](_0x874a38(0x160)+_0x479aaa['id']),_0x4aacb0[_0x874a38(0xfb)](this[_0x874a38(0x130)](_0x479aaa['id'],_0x5d8c88,_0x479aaa)),await this[_0x874a38(0x12a)](_0x4aacb0,_0x44d718,_0x4b6641,_0x4564d3[_0x874a38(0xed)],_0x32b4aa);}if(CLIUtils[_0x874a38(0x124)](_0x44d718[_0x874a38(0xc6)]()['split']('.')[0x1])){const _0x52c871=await this[_0x874a38(0x116)](_0x4aacb0,_0x44d718,_0x4b6641,_0x32b4aa);_0x4aacb0['addMultipleEntries'](_0x52c871);}}catch(_0x520a5c){logger[_0x874a38(0x97)](util[_0x874a38(0xeb)](_0x4564d3[_0x874a38(0x14e)],_0x44d718,_0x4b6641,_0x32b4aa[_0x874a38(0x101)],_0x520a5c));}_0x32b4aa[_0x874a38(0xad)]=_0x4aacb0,await this[_0x874a38(0x120)](_0x4aacb0,_0x44d718,_0x4b6641,_0x32b4aa);}[a67_0x3686a4(0x98)](_0x29b51b,_0x34287c,_0x560124={}){const _0x43fbbc=a67_0x3686a4,_0x4a5580={};_0x4a5580[_0x43fbbc(0x112)]=function(_0x4dce0d,_0x5e5e1e){return _0x4dce0d===_0x5e5e1e;},_0x4a5580[_0x43fbbc(0xb7)]=function(_0x4e742f,_0x219d7f){return _0x4e742f===_0x219d7f;};const _0x26f157=_0x4a5580;let _0x605597=null;return(_0x26f157['rimXE'](_0x29b51b,TestFrameworkState[_0x43fbbc(0xb8)])||_0x26f157[_0x43fbbc(0xb7)](_0x29b51b,TestFrameworkState[_0x43fbbc(0x108)]))&&this[_0x43fbbc(0xc2)](_0x29b51b,_0x560124),_0x605597=TestFramework[_0x43fbbc(0xd6)](),_0x605597;}[a67_0x3686a4(0xc2)](_0x13ad06,_0x31cbb1){const _0x2629a1=a67_0x3686a4,_0x507b83=CLIUtils[_0x2629a1(0x133)](),_0x1f21ca=TrackedInstance[_0x2629a1(0x89)](_0x507b83);let _0x48f7ff=null;logger[_0x2629a1(0xd7)](_0x2629a1(0x11a)+_0x507b83+_0x2629a1(0xf6)+_0x13ad06),_0x48f7ff=new TestFrameworkInstance(_0x1f21ca,this[_0x2629a1(0xc0)](),this[_0x2629a1(0x103)](),_0x13ad06,HookState['NONE']),TestFramework[_0x2629a1(0xa0)](_0x1f21ca,_0x48f7ff),logger[_0x2629a1(0xd7)](_0x2629a1(0xac)+_0x1f21ca[_0x2629a1(0x10b)]()+'\x20target='+_0x507b83);}['parsePlaywrightTest'](_0x1dc34a,_0x1d90f8,_0x24c8d4){const _0x226312=a67_0x3686a4,_0x4e226f={'LJTxr':function(_0x36c5d7,_0x5c8d89){return _0x36c5d7(_0x5c8d89);},'boNxE':function(_0x34559e,_0x59ced8){return _0x34559e(_0x59ced8);},'VAMmB':function(_0x42dd4f,_0x222285){return _0x42dd4f(_0x222285);},'JLFiH':function(_0x13d694,_0x15a9b5,_0x33bb82){return _0x13d694(_0x15a9b5,_0x33bb82);},'EYfDF':function(_0x4ee23d,_0x3dc3a6){return _0x4ee23d(_0x3dc3a6);}},_0x31ce6c=_0x4e226f[_0x226312(0x12e)](getPlaywrightTestId,_0x1d90f8),_0x230ae5=_0x4e226f['LJTxr'](getPlaywrightTestTitle,_0x1d90f8),_0x3166e5=_0x4e226f[_0x226312(0x12e)](getTestTags,_0x1d90f8),_0x29ced8=_0x4e226f[_0x226312(0x11c)](getPlaywrightTestCode,_0x1d90f8),_0x1c5547=_0x4e226f[_0x226312(0x11c)](getPlaywrightTestFilePath,_0x1d90f8),_0xa0f60e=_0x1c5547+':'+_0x4e226f['boNxE'](getPlaywrightTestLocation,_0x1d90f8),_0x42809e=_0x4e226f[_0x226312(0xc5)](getPlaywrightTestScope,_0x1d90f8),_0x2561ac=_0x4e226f[_0x226312(0x11c)](getPlaywrightTestScopes,_0x1d90f8),_0x4de443=_0x4e226f[_0x226312(0x11c)](getPlaywrightSessionName,_0x1d90f8),_0x30fff0=this[_0x226312(0xc0)]()[0x0],_0x4a9242=_0x4e226f[_0x226312(0x15f)](getTestRunIdentifier,_0x1d90f8,_0x24c8d4[_0x226312(0x93)]),_0x23976c={[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x30fff0,[TestFrameworkConstants[_0x226312(0xe6)]]:this[_0x226312(0x103)]()[_0x30fff0],[TestFrameworkConstants[_0x226312(0x13f)]]:[],[TestFrameworkConstants[_0x226312(0xd9)]]:{},[TestFrameworkConstants[_0x226312(0x13c)]]:{},[TestFrameworkConstants[_0x226312(0xa4)]]:_0x1dc34a,[TestFrameworkConstants[_0x226312(0x146)]]:TestFrameworkConstants['DEFAULT_TEST_RESULT'],[TestFrameworkConstants[_0x226312(0xa8)]]:_0x4de443,[TestFrameworkConstants['KEY_TEST_FILE_PATH']]:_0x1c5547,[TestFrameworkConstants['KEY_TEST_ID']]:_0x31ce6c,[TestFrameworkConstants[_0x226312(0x159)]]:_0x230ae5,[TestFrameworkConstants[_0x226312(0xa9)]]:_0xa0f60e,[TestFrameworkConstants[_0x226312(0x136)]]:_0x29ced8,[TestFrameworkConstants[_0x226312(0x137)]]:_0x3166e5,[TestFrameworkConstants['KEY_TEST_STARTED_AT']]:_0x1d90f8[_0x226312(0x128)][0x0][_0x226312(0xe4)],[TestFrameworkConstants[_0x226312(0x10e)]]:_0x42809e,[TestFrameworkConstants[_0x226312(0xa3)]]:_0x2561ac,[TestFrameworkConstants['KEY_TEST_RERUN_NAME']]:_0x4e226f['EYfDF'](getPlaywrightCustomRerunParam,_0x1d90f8)};TestInfo['setTestDetails'](_0x4a9242,_0x23976c);const _0x52595e={};return _0x52595e[_0x4a9242]=_0x23976c,_0x52595e;}[a67_0x3686a4(0x130)](_0x447589,_0x5ea2f8,_0x1b191f){const _0x2d4123=a67_0x3686a4,_0x16a7a5={'LVSNy':function(_0x5c2f2a,_0x428b3d){return _0x5c2f2a(_0x428b3d);},'JkwRA':_0x2d4123(0xc9),'fpFsT':function(_0x651985,_0x953710){return _0x651985===_0x953710;},'DctnC':function(_0x2583f8,_0x4c5d4c){return _0x2583f8(_0x4c5d4c);},'uCJtU':_0x2d4123(0x8d),'YTxqt':_0x2d4123(0x114),'AXLmB':function(_0x38885e,_0x576615,_0x53caae){return _0x38885e(_0x576615,_0x53caae);},'WHJhl':function(_0x342a03,_0xf1315b){return _0x342a03+_0xf1315b;},'Wkfbf':function(_0x58c615,_0x3139b4){return _0x58c615===_0x3139b4;},'LmLbm':function(_0x46fbce,_0xf03160){return _0x46fbce===_0xf03160;},'QVMSY':_0x2d4123(0xbb),'NQXdU':'passed','BGmmd':function(_0x4941a8,_0x1facd6){return _0x4941a8===_0x1facd6;},'MIrSn':_0x2d4123(0x13d),'pVHlk':function(_0x1e12f7,_0x24d1c4){return _0x1e12f7===_0x24d1c4;},'dWMcP':_0x2d4123(0xcd),'HYRpU':function(_0x1347ae,_0x1cf55d){return _0x1347ae===_0x1cf55d;},'jEBfV':_0x2d4123(0xcf),'fQgLy':function(_0x4b7f86,_0x31ddf0,_0x5eac5f){return _0x4b7f86(_0x31ddf0,_0x5eac5f);},'EORaK':function(_0x1725d2,_0x28f9bf){return _0x1725d2||_0x28f9bf;},'qVrOk':function(_0x2b7be0,_0x17e763){return _0x2b7be0(_0x17e763);},'smYxu':function(_0x593030,_0x2558dc){return _0x593030>_0x2558dc;},'vyzYb':function(_0x3c4dae,_0x33b655,_0x594a43){return _0x3c4dae(_0x33b655,_0x594a43);},'lRkHi':function(_0x2f377f,_0x83427b){return _0x2f377f-_0x83427b;},'tfiXx':function(_0x16619e,_0x2556f1,_0x4e8a68){return _0x16619e(_0x2556f1,_0x4e8a68);},'UPykN':_0x2d4123(0xd3),'Doeci':function(_0x277cdc,_0x58bc10){return _0x277cdc>_0x58bc10;}};logger[_0x2d4123(0x91)](_0x2d4123(0x104)+_0x447589);const _0x4d9088=_0x16a7a5[_0x2d4123(0x99)](getTestRunIdentifier,_0x1b191f,_0x5ea2f8[_0x2d4123(0x93)]),_0x5b21ea=new Date(_0x5ea2f8[_0x2d4123(0xe4)]),_0x3f249e=_0x5ea2f8[_0x2d4123(0xbc)],_0x4a9b08=new Date(_0x16a7a5[_0x2d4123(0xba)](_0x5b21ea[_0x2d4123(0xe1)](),_0x3f249e)),_0x19e710=_0x5ea2f8[_0x2d4123(0xe7)],_0x33387c=TestInfo[_0x2d4123(0x9d)](_0x4d9088)[TestFrameworkConstants[_0x2d4123(0xca)]]||{};let _0x2c1b7=_0x19e710;if(_0x16a7a5['Wkfbf'](_0x5ea2f8[_0x2d4123(0xe7)],_0x1b191f['expectedStatus']))_0x2c1b7=_0x16a7a5[_0x2d4123(0x8a)](_0x5ea2f8[_0x2d4123(0xe7)],_0x16a7a5[_0x2d4123(0x143)])?_0x16a7a5['QVMSY']:_0x16a7a5['NQXdU'];else{(_0x16a7a5[_0x2d4123(0x131)](_0x2c1b7,_0x16a7a5[_0x2d4123(0x14b)])||_0x16a7a5[_0x2d4123(0xbf)](_0x2c1b7,_0x16a7a5[_0x2d4123(0xb2)])||_0x16a7a5[_0x2d4123(0x96)](_0x2c1b7,_0x16a7a5[_0x2d4123(0xf7)]))&&(_0x2c1b7=_0x16a7a5['MIrSn']);if(_0x16a7a5[_0x2d4123(0xae)](_0x5ea2f8[_0x2d4123(0xe7)],_0x16a7a5[_0x2d4123(0x14b)])&&_0x16a7a5['BGmmd'](_0x1b191f['expectedStatus'],_0x16a7a5[_0x2d4123(0xb2)])){const _0x5cd7c0={};_0x5cd7c0[_0x2d4123(0x92)]=_0x16a7a5['jEBfV'],_0x5cd7c0[_0x2d4123(0x150)]=_0x16a7a5[_0x2d4123(0xf1)],_0x5ea2f8[_0x2d4123(0x97)]=_0x5cd7c0,_0x5ea2f8[_0x2d4123(0x145)]=[_0x5ea2f8['error']];}}const {failureData:_0x2429d4,logs:_0x4866b3}=_0x16a7a5[_0x2d4123(0x110)](getFailureData,_0x5ea2f8?.['errors'],{}),_0x158dc4={[TestFrameworkConstants[_0x2d4123(0xe0)]]:_0x16a7a5[_0x2d4123(0xdf)](_0x2429d4,null),[TestFrameworkConstants[_0x2d4123(0x109)]]:_0x5ea2f8?.['error']&&_0x16a7a5['DctnC'](getFailureType,_0x5ea2f8[_0x2d4123(0x97)][_0x2d4123(0x92)]),[TestFrameworkConstants[_0x2d4123(0x151)]]:_0x5ea2f8?.[_0x2d4123(0x97)]&&_0x16a7a5['qVrOk'](removeAnsiColors,_0x5ea2f8[_0x2d4123(0x97)]['message']),[TestFrameworkConstants['KEY_LOGS']]:[],[TestFrameworkConstants[_0x2d4123(0x146)]]:_0x2c1b7,[TestFrameworkConstants['KEY_TEST_ENDED_AT']]:_0x4a9b08[_0x2d4123(0xf3)](),[TestFrameworkConstants[_0x2d4123(0x111)]]:new Date()[_0x2d4123(0xf3)](),[TestFrameworkConstants['KEY_CUSTOM_TAGS']]:_0x33387c};if(_0x5ea2f8&&_0x16a7a5[_0x2d4123(0x13e)](_0x5ea2f8[_0x2d4123(0x93)],0x0)){const _0x307ce3=TestInfo['getTestUUID'](_0x16a7a5['vyzYb'](getTestRunIdentifier,_0x1b191f,_0x16a7a5[_0x2d4123(0x94)](_0x5ea2f8[_0x2d4123(0x93)],0x1)));_0x158dc4[TestFrameworkConstants['KEY_TEST_RETRY_OF']]=_0x307ce3;}const _0x54b9ad={};_0x54b9ad[_0x2d4123(0xea)]=_0x1b191f;const _0x15f575=this[_0x2d4123(0x98)](TestFrameworkState['TEST'],HookState['POST'],_0x54b9ad),_0x4b8e6d=_0x15f575[_0x2d4123(0x14a)]()[_0x2d4123(0x154)](_0x4d9088)[TestFrameworkConstants['KEY_TEST_UUID']],_0x310b22=[],_0x4e374b=_0x16a7a5[_0x2d4123(0x117)](findNestedKey,_0x5ea2f8,_0x16a7a5[_0x2d4123(0x14c)]);if(_0x4e374b&&_0x16a7a5[_0x2d4123(0xc7)](validateFilePath,_0x4e374b))try{_0x310b22[_0x2d4123(0x13b)]({'kind':_0x16a7a5['JkwRA'],'timestamp':new Date()[_0x2d4123(0xf3)](),'test_run_uuid':_0x4b8e6d,'file_name':path[_0x2d4123(0x12c)](_0x4e374b),'file_size':fs[_0x2d4123(0x102)](_0x4e374b)[_0x2d4123(0xd8)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x17150b){logger[_0x2d4123(0x97)](_0x2d4123(0xf4)+_0x4e374b+':\x20'+_0x17150b[_0x2d4123(0x92)]);}const _0x199b00=TestInfo[_0x2d4123(0x9a)](),_0x510c9e=_0x199b00[_0x2d4123(0xc8)](_0x31ace1=>_0x31ace1[_0x2d4123(0xde)]===_0x4b8e6d);_0x510c9e[_0x2d4123(0x10c)](_0x32630f=>{const _0x1e46ba=_0x2d4123;if(_0x32630f[_0x1e46ba(0x9b)]&&_0x16a7a5[_0x1e46ba(0xd0)](validateFilePath,_0x32630f['filePath'])&&!_0x310b22['some'](_0x295f45=>_0x295f45['file_name']===path[_0x1e46ba(0x12c)](_0x32630f[_0x1e46ba(0x9b)])))try{_0x310b22[_0x1e46ba(0x13b)]({'kind':_0x16a7a5['JkwRA'],'timestamp':new Date()[_0x1e46ba(0xf3)](),'test_run_uuid':_0x4b8e6d,'file_name':path[_0x1e46ba(0x12c)](_0x32630f[_0x1e46ba(0x9b)]),'file_size':fs[_0x1e46ba(0x102)](_0x32630f['filePath'])[_0x1e46ba(0xd8)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x8d5852){logger['error']('Error\x20processing\x20trace\x20file\x20'+_0x32630f['filePath']+'\x20from\x20TestDetails:\x20'+_0x8d5852[_0x1e46ba(0x92)]);}});if(_0x16a7a5['smYxu'](_0x310b22[_0x2d4123(0x101)],0x0)){const _0x1eeca2=_0x158dc4[TestFrameworkConstants['KEY_LOGS']]||[];_0x158dc4[TestFrameworkConstants[_0x2d4123(0x140)]]=[..._0x1eeca2,..._0x310b22];}const _0x3bf58b=TestInfo[_0x2d4123(0x9d)](_0x4d9088)[TestFrameworkConstants[_0x2d4123(0x113)]]||{},_0x3e50df=_0x16a7a5[_0x2d4123(0x99)](getManualUploadLogs,_0x3bf58b,_0x15f575[_0x2d4123(0x14a)]()[_0x2d4123(0x154)](_0x4d9088)[TestFrameworkConstants['KEY_TEST_UUID']]);if(_0x16a7a5[_0x2d4123(0x134)](_0x3e50df[_0x2d4123(0x101)],0x0)){const _0x44847e=_0x158dc4[TestFrameworkConstants[_0x2d4123(0x140)]]||[];_0x158dc4[TestFrameworkConstants[_0x2d4123(0x140)]]=[..._0x44847e,..._0x3e50df];}const _0x526f38=_0x1b191f['annotations']||[],_0x2cb830=_0x158dc4[TestFrameworkConstants[_0x2d4123(0xca)]]||{};_0x526f38[_0x2d4123(0x10c)](_0x5a5dfb=>{const _0x54e8bb=_0x2d4123,{type:_0xc99ad}=_0x5a5dfb;let _0x57f632=_0x5a5dfb[_0x54e8bb(0x12f)];if(!_0xc99ad)return;(_0x16a7a5[_0x54e8bb(0x118)](_0x57f632,undefined)||_0x16a7a5[_0x54e8bb(0x118)](_0x57f632,null)||_0x16a7a5[_0x54e8bb(0x118)](_0x16a7a5[_0x54e8bb(0xc7)](String,_0x57f632)[_0x54e8bb(0xee)](),''))&&(_0x57f632=_0x16a7a5[_0x54e8bb(0x123)]);if(!_0x2cb830[_0xc99ad]){const _0x22f312={};_0x22f312['field_type']=_0x16a7a5[_0x54e8bb(0x14d)],_0x22f312['values']=[],_0x2cb830[_0xc99ad]=_0x22f312;}else!_0x2cb830[_0xc99ad][_0x54e8bb(0x156)]&&(_0x2cb830[_0xc99ad]['field_type']=_0x16a7a5[_0x54e8bb(0x14d)]),!Array[_0x54e8bb(0x9e)](_0x2cb830[_0xc99ad][_0x54e8bb(0x106)])&&(_0x2cb830[_0xc99ad][_0x54e8bb(0x106)]=[]);const _0x399cae=_0x16a7a5[_0x54e8bb(0xd0)](String,_0x57f632)['split'](',')['map'](_0x134909=>_0x134909[_0x54e8bb(0xee)]());_0x2cb830[_0xc99ad]['values']=[...new Set([..._0x2cb830[_0xc99ad][_0x54e8bb(0x106)],..._0x399cae])];}),_0x158dc4[TestFrameworkConstants[_0x2d4123(0xca)]]=_0x2cb830,TestInfo[_0x2d4123(0x122)](_0x4d9088,_0x158dc4);const _0x1955f1={};return _0x1955f1[_0x4d9088]=_0x158dc4,_0x1955f1;}async[a67_0x3686a4(0x116)](_0x3835df,_0x1cd680,_0x1c2aa2,_0x6c5f4d){const _0x565426=a67_0x3686a4,_0x38afa2={'PDMdr':function(_0x1cd679,_0x5dd596,_0x85a97b){return _0x1cd679(_0x5dd596,_0x85a97b);},'gwhkO':function(_0x1cf629,_0x3f068e){return _0x1cf629 in _0x3f068e;},'Cdkwm':function(_0x1a70ee,_0x7c71f6){return _0x1a70ee in _0x7c71f6;},'joWOL':function(_0x5e27e9,_0x59b258){return _0x5e27e9(_0x59b258);},'jEgVa':function(_0x267b5a,_0x46561e){return _0x267b5a===_0x46561e;},'eJwPJ':function(_0x17b568){return _0x17b568();},'cKyqj':function(_0x3f5d30,_0x3a1861){return _0x3f5d30>_0x3a1861;},'MliVs':function(_0x1d4bfc,_0x52de54,_0x8ef616){return _0x1d4bfc(_0x52de54,_0x8ef616);},'YsPXm':_0x565426(0x144),'WPwtr':_0x565426(0x13d),'OVtxL':_0x565426(0xb4),'EtIHc':function(_0x214db7,_0x5dd080){return _0x214db7!==_0x5dd080;},'TlVAh':function(_0x302b50,_0x42ddde){return _0x302b50+_0x42ddde;},'ypihn':_0x565426(0x10a)},_0x31fcb1=_0x6c5f4d[_0x565426(0xea)],_0x194ab4=_0x6c5f4d[_0x565426(0x141)],_0x47f356=_0x38afa2['PDMdr'](getTestRunIdentifier,_0x31fcb1,_0x6c5f4d['result'][_0x565426(0x93)]),_0x5a7fdf=_0x1cd680[_0x565426(0xc6)]()['split']('.')[0x1];let _0x52fc36=_0x3835df[_0x565426(0x14a)]()['get'](_0x47f356)[TestFrameworkConstants[_0x565426(0x13c)]];!_0x52fc36&&(_0x52fc36={});!_0x38afa2[_0x565426(0x88)](_0x5a7fdf,_0x52fc36)&&(_0x52fc36[_0x5a7fdf]=[]);let _0x93e8f3=_0x3835df[_0x565426(0x14a)]()[_0x565426(0x154)](_0x47f356)[TestFrameworkConstants[_0x565426(0xd9)]];!_0x93e8f3&&(_0x93e8f3={});!_0x38afa2[_0x565426(0x148)](_0x5a7fdf,_0x93e8f3)&&(_0x93e8f3[_0x5a7fdf]=[]);const _0x164b50={[TestFrameworkConstants[_0x565426(0x13c)]]:_0x52fc36,[TestFrameworkConstants[_0x565426(0xd9)]]:_0x93e8f3},_0x1a4b8c={};_0x1a4b8c[_0x47f356]=_0x164b50;const _0x22b65c=_0x1a4b8c,_0x553098=_0x38afa2[_0x565426(0xf2)](getPlaywrightTestFilePath,_0x31fcb1),_0x427387=_0x553098+':'+_0x38afa2['joWOL'](getPlaywrightTestLocation,_0x31fcb1),_0x56ccd9=TestInfo[_0x565426(0x9d)](_0x47f356)[TestFrameworkConstants['KEY_CUSTOM_TAGS']]||{};if(_0x38afa2[_0x565426(0xb3)](_0x1c2aa2,HookState[_0x565426(0xd4)])){const _0x2168e6={'key':_0x5a7fdf,[TestFrameworkConstants['KEY_HOOK_ID']]:_0x38afa2[_0x565426(0xb9)](uuidv4),[TestFrameworkConstants[_0x565426(0x14f)]]:TestFrameworkConstants[_0x565426(0x152)],[TestFrameworkConstants[_0x565426(0xc1)]]:_0x194ab4[_0x565426(0xe4)],[TestFrameworkConstants[_0x565426(0x149)]]:[],[TestFrameworkConstants[_0x565426(0xe8)]]:_0x194ab4[_0x565426(0x125)],[TestFrameworkConstants['KEY_TEST_FILE_PATH']]:_0x553098,[TestFrameworkConstants['KEY_TEST_LOCATION']]:_0x427387,[TestFrameworkConstants[_0x565426(0xca)]]:_0x56ccd9};_0x52fc36[_0x5a7fdf][_0x565426(0x13b)](_0x2168e6),_0x22b65c[_0x47f356][TestFrameworkConstants[_0x565426(0xb6)]]=_0x5a7fdf,logger[_0x565426(0x91)](_0x565426(0x10d)+_0x5a7fdf+_0x565426(0x129)+_0x2168e6+_0x565426(0x161)+_0x6c5f4d);}else{if(_0x38afa2[_0x565426(0xb3)](_0x1c2aa2,HookState['POST'])){const _0x488215=await _0x6c5f4d[_0x565426(0xdb)],_0x5b53e5=_0x52fc36[_0x5a7fdf]||[],_0x1a4eab=_0x6c5f4d[_0x565426(0x141)];logger[_0x565426(0x91)](_0x565426(0xe5)+_0x5b53e5+_0x565426(0xd1)+_0x6c5f4d);if(_0x38afa2[_0x565426(0x135)](_0x5b53e5[_0x565426(0x101)],0x0)){const _0x2499ff=_0x5b53e5[_0x565426(0xbe)]();if(_0x1a4eab[_0x565426(0x97)]){const _0x3712c6=_0x38afa2['MliVs'](failureData,_0x1a4eab[_0x565426(0x97)],_0x38afa2[_0x565426(0x132)]);_0x2499ff[TestFrameworkConstants[_0x565426(0x90)]]=_0x38afa2[_0x565426(0xf2)](getFailureType,_0x1a4eab?.[_0x565426(0x97)][_0x565426(0x92)]),_0x2499ff[TestFrameworkConstants[_0x565426(0x11e)]]=_0x38afa2[_0x565426(0xf2)](removeAnsiColors,_0x1a4eab?.[_0x565426(0x97)][_0x565426(0x92)]),_0x2499ff[TestFrameworkConstants[_0x565426(0x14f)]]=_0x38afa2['WPwtr'],_0x2499ff[TestFrameworkConstants['KEY_HOOK_FAILURE']]=_0x3712c6;}else _0x2499ff[TestFrameworkConstants[_0x565426(0x14f)]]=_0x38afa2['OVtxL'];_0x38afa2[_0x565426(0xcb)](_0x488215,TestFrameworkConstants['DEFAULT_HOOK_RESULT'])&&(_0x2499ff[TestFrameworkConstants['KEY_HOOK_RESULT']]=!_0x1a4eab[_0x565426(0x97)]?_0x38afa2[_0x565426(0x119)]:_0x38afa2['WPwtr']);const _0x18114e=new Date(_0x1a4eab[_0x565426(0xe4)]),_0x3f2f57=new Date(_0x38afa2[_0x565426(0xef)](_0x18114e[_0x565426(0xe1)](),_0x1a4eab[_0x565426(0xbc)]));_0x2499ff[TestFrameworkConstants[_0x565426(0xa2)]]=_0x3f2f57[_0x565426(0xf3)](),_0x2499ff[TestFrameworkConstants['KEY_CUSTOM_TAGS']]=_0x56ccd9;const _0x163a0b=_0x2499ff[TestFrameworkConstants[_0x565426(0xff)]];await this[_0x565426(0x12a)](_0x3835df,_0x1cd680,_0x163a0b,_0x38afa2[_0x565426(0x121)],_0x6c5f4d),!_0x93e8f3[_0x5a7fdf]&&(_0x93e8f3[_0x5a7fdf]=[]),_0x93e8f3[_0x5a7fdf][_0x565426(0x13b)](_0x2499ff),_0x22b65c[_0x47f356][TestFrameworkConstants['KEY_HOOK_LAST_FINISHED']]=_0x5a7fdf;}}}return _0x22b65c;}async[a67_0x3686a4(0x12a)](_0x221633,_0x35e12f,_0x1b4c85,_0x1dd7af,_0xf1a91a){const _0x266be4=a67_0x3686a4,_0x30e89f={'AzlEx':function(_0x35fdd7,_0x517020){return _0x35fdd7===_0x517020;},'wqMsv':_0x266be4(0xea),'ujXLW':function(_0x55d640,_0x13822b,_0x44bb9c){return _0x55d640(_0x13822b,_0x44bb9c);},'zCLjd':'attachments','TKluq':function(_0x2c35e9,_0x1ce173,_0x5a74af,_0x4d0e5c){return _0x2c35e9(_0x1ce173,_0x5a74af,_0x4d0e5c);},'ZVOel':function(_0x1a929f,_0x47729c){return _0x1a929f/_0x47729c;},'kndZz':function(_0x8d90f1,_0xab7cfc){return _0x8d90f1<_0xab7cfc;},'GSmqn':function(_0x28a248,_0x284efd){return _0x28a248*_0x284efd;},'zOKHL':function(_0xe85dbc,_0x23fc3d){return _0xe85dbc+_0x23fc3d;},'CZPav':function(_0x535980,_0x44ed49,_0x442293,_0x567269,_0x38f6a1){return _0x535980(_0x44ed49,_0x442293,_0x567269,_0x38f6a1);},'lnBnd':function(_0x571ba5,_0x68a70a){return _0x571ba5+_0x68a70a;},'vCbpK':_0x266be4(0x10a),'bGEff':function(_0x2fbda,_0x5abecc,_0x269b24){return _0x2fbda(_0x5abecc,_0x269b24);},'fPdeJ':function(_0x161713,_0x1592a5,_0x36c53f,_0x12e93d,_0x4725d2){return _0x161713(_0x1592a5,_0x36c53f,_0x12e93d,_0x4725d2);}};try{if(_0x30e89f[_0x266be4(0xd2)](_0x1dd7af,_0x30e89f[_0x266be4(0x95)])){const _0x16cf98=await _0xf1a91a['result'],_0x581449=_0x30e89f[_0x266be4(0xf5)](getTestRunIdentifier,_0xf1a91a['test'],_0xf1a91a['result'][_0x266be4(0x93)]),_0x54829b=_0xf1a91a[_0x266be4(0xea)];logger['debug'](_0x266be4(0xe2)+_0x581449+_0x266be4(0x11d)+util[_0x266be4(0xc3)](_0x16cf98));const _0x1e7f57=_0x221633[_0x266be4(0x14a)]()[_0x266be4(0x154)](_0x581449)[TestFrameworkConstants['KEY_TEST_UUID']];await _0x30e89f['ujXLW'](sendTraceZip,_0x16cf98,_0x1e7f57);const _0xb2ce4e=TestInfo[_0x266be4(0x9d)](_0x581449)[_0x30e89f[_0x266be4(0x155)]];if(_0xb2ce4e){!_0x16cf98[_0x266be4(0x8e)]&&(_0x16cf98['attachments']=[]);Object[_0x266be4(0x15c)](_0x16cf98['attachments'],_0x16cf98[_0x266be4(0x8e)][_0x266be4(0xcc)](_0xb2ce4e));const _0x21b086=TestInfo[_0x266be4(0x9d)](_0x581449);delete _0x21b086[_0x30e89f[_0x266be4(0x155)]],TestInfo[_0x266be4(0x122)](_0x581449,_0x21b086);}const {steps:_0x3e5327,logs:_0x2e3c37}=_0x30e89f[_0x266be4(0xe3)](getStepsAndLogs,_0x16cf98[_0x266be4(0x153)],_0x221633['getAllData']()['get'](_0x581449)[TestFrameworkConstants[_0x266be4(0xa4)]],_0x30e89f[_0x266be4(0x95)]),_0x5456a3=_0x30e89f[_0x266be4(0xf5)](getScreenshots,_0x16cf98,_0x221633['getAllData']()['get'](_0x581449)[TestFrameworkConstants['KEY_TEST_UUID']]),_0x6698b4=_0x30e89f[_0x266be4(0xf5)](getVideos,_0x16cf98,_0x221633[_0x266be4(0x14a)]()[_0x266be4(0x154)](_0x581449)[TestFrameworkConstants['KEY_TEST_UUID']]),{_:_0x1df528,logs:_0x2ec785}=_0x30e89f[_0x266be4(0xf5)](getFailureData,_0x16cf98[_0x266be4(0x145)],{'test_run_uuid':_0x221633[_0x266be4(0x14a)]()[_0x266be4(0x154)](_0x581449)[TestFrameworkConstants['KEY_TEST_UUID']]}),_0x452649=TestInfo[_0x266be4(0x9d)](_0x581449)[TestFrameworkConstants[_0x266be4(0x113)]]||{},_0x4a6c0a=_0x30e89f[_0x266be4(0xf5)](getMediaArtifactsLogs,_0x452649,_0x221633[_0x266be4(0x14a)]()[_0x266be4(0x154)](_0x581449)[TestFrameworkConstants[_0x266be4(0xa4)]]),_0x168f6b=_0x221633[_0x266be4(0x14a)]()[_0x266be4(0x154)](_0x581449),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0xc3d09='',[TestFrameworkConstants[_0x266be4(0xe6)]]:_0x43a4b8=''}=_0x168f6b,_0x12023a=(_0x2e3c37||[])[_0x266be4(0xcc)](_0x5456a3||[])[_0x266be4(0xcc)](_0x2ec785||[])[_0x266be4(0xcc)](_0x6698b4||[])['concat'](_0x4a6c0a||[]),_0x5ea917=0x28,_0x118e06=Math[_0x266be4(0xda)](_0x30e89f[_0x266be4(0xa5)](_0x12023a['length'],_0x5ea917));for(let _0x20d4ef=0x0;_0x30e89f[_0x266be4(0xaa)](_0x20d4ef,_0x118e06);_0x20d4ef++){const _0x22a5ff=_0x30e89f['GSmqn'](_0x20d4ef,_0x5ea917),_0x27826b=_0x30e89f['zOKHL'](_0x22a5ff,_0x5ea917),_0x403105=_0x12023a[_0x266be4(0x105)](_0x22a5ff,_0x27826b),_0x37c889={'platformIndex':'0','logs':_0x403105,'testFrameworkName':_0xc3d09,'testFrameworkVersion':_0x43a4b8,'testFrameworkState':_0x35e12f[_0x266be4(0xc6)]()[_0x266be4(0x142)]('.')[0x1]};_0x30e89f[_0x266be4(0xa1)](updatePayloadForTraceLogs,_0x37c889,_0xf1a91a,_0x581449,_0x221633),logger[_0x266be4(0x91)](_0x266be4(0x87)+_0x581449+'\x20batch\x20'+_0x30e89f[_0x266be4(0xfc)](_0x20d4ef,0x1)+'/'+_0x118e06+_0x266be4(0xa6)+util[_0x266be4(0xc3)](_0x37c889));const _0x4944dd=await GrpcClient['getInstance']()[_0x266be4(0x8f)](_0x37c889);logger[_0x266be4(0x91)](_0x266be4(0x87)+_0x581449+_0x266be4(0xec)+_0x30e89f['lnBnd'](_0x20d4ef,0x1)+'/'+_0x118e06+_0x266be4(0x15e)+util[_0x266be4(0xc3)](_0x4944dd));}}else{const {steps:_0x4dc17b,logs:_0x1a0478}=_0x30e89f['TKluq'](getStepsAndLogs,_0xf1a91a[_0x266be4(0x141)][_0x266be4(0x153)],_0x1b4c85,_0x30e89f[_0x266be4(0x158)]),_0x40e4cd=_0x30e89f[_0x266be4(0x9c)](getTestRunIdentifier,_0xf1a91a['test'],_0xf1a91a[_0x266be4(0xdb)]['retry']);logger['debug'](_0x266be4(0xe2)+_0x40e4cd);const _0x49e1a8=_0x221633[_0x266be4(0x14a)]()[_0x266be4(0x154)](_0x40e4cd),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x13a7bd='',[TestFrameworkConstants[_0x266be4(0xe6)]]:_0x1af066=''}=_0x49e1a8,_0x55ad1b={'platformIndex':'0','logs':_0x1a0478,'testFrameworkName':_0x13a7bd,'testFrameworkVersion':_0x1af066,'testFrameworkState':_0x35e12f[_0x266be4(0xc6)]()[_0x266be4(0x142)]('.')[0x1]};_0x30e89f[_0x266be4(0xf8)](updatePayloadForTraceLogs,_0x55ad1b,_0xf1a91a,_0x40e4cd,_0x221633),logger['debug'](_0x266be4(0x87)+_0x40e4cd+_0x266be4(0xa6)+util[_0x266be4(0xc3)](_0x55ad1b));const _0x4eb1af=await GrpcClient[_0x266be4(0x100)]()['logCreatedEvent'](_0x55ad1b);}}catch(_0x437da7){logger['error'](_0x266be4(0x139)+util[_0x266be4(0xeb)](_0x437da7));}}}module['exports']=PlaywrightTestFramework;function a67_0xe08d(){const _0x15c250=['./testFramework','./constants/testFrameworkConstants.js','assign','eYpiZ','\x20response=','JLFiH','trackEvent\x20loading\x20testResults\x20for\x20testId:\x20','\x20\x20and\x20args\x20=\x20','TEST','sendLogCreatedEvent\x20for\x20testId:\x20','gwhkO','createContext','LmLbm','../TestInfo.js','POST','No\x20reason\x20provided','attachments','logCreatedEvent','KEY_HOOK_FAILURE_TYPE','debug','message','retry','lRkHi','wqMsv','pVHlk','error','resolveInstance','AXLmB','getTraceFilePaths','filePath','bGEff','getTestDetails','isArray','../../utils/constants','setTrackedInstance','CZPav','KEY_EVENT_ENDED_AT','KEY_TEST_SCOPES','KEY_TEST_UUID','ZVOel','\x20payload=','647470hQfPaw','KEY_AUTOMATE_SESSION_NAME','KEY_TEST_LOCATION','kndZz','2hihvex','trackPlaywrightInstance:\x20saved\x20instance\x20contextId=','instance','HYRpU','../state/hookState.js','trackEvent:\x20found\x20instance,\x20testFrameworkState=','parsePlaywrightTest','MIrSn','jEgVa','passed','2590764hyQdOm','KEY_HOOK_LAST_STARTED','ozYJA','INIT_TEST','eJwPJ','WHJhl','skipped','duration','../../../helpers/helper.js','pop','BGmmd','getTestFrameworks','KEY_EVENT_STARTED_AT','trackPlaywrightInstance','inspect','\x20instanceId=','VAMmB','toString','DctnC','filter','TEST_ATTACHMENT','KEY_CUSTOM_TAGS','EtIHc','concat','timedOut','1311357IreSUK','Expected\x20to\x20fail,\x20but\x20passed.','LVSNy','\x20and\x20args\x20=\x20','AzlEx','path','PRE','../../../../src/helpers/helper','getTrackedInstance','info','size','KEY_HOOKS_FINISHED','ceil','result','4950270bAPiNR','7BfYdrG','testUId','EORaK','KEY_TEST_FAILURE','getTime','sendLogCreatedEvent:\x20testId=','TKluq','startTime','Hook\x20List\x20in\x20Post\x20','KEY_TEST_FRAMEWORK_VERSION','status','KEY_HOOK_NAME','TEST_SCREENSHOT','test','format','\x20batch\x20','gkjTL','trim','TlVAh','util','jEBfV','joWOL','toISOString','Error\x20processing\x20direct\x20trace\x20file\x20','ujXLW',',\x20state=','dWMcP','fPdeJ','127924OdvvOU','3203325JOGBFZ','addMultipleEntries','zOKHL','95zPVzrA','70FLWucy','KEY_HOOK_ID','getInstance','length','statSync','getTestFrameworksVersions','parsePlaywrightTestResult:\x20testId=','slice','values','../instances/trackedInstance.js','NONE','KEY_TEST_FAILURE_TYPE','hook','getId','forEach','Hook\x20Started\x20in\x20PRE\x20key\x20=\x20','KEY_TEST_SCOPE','../../../helpers/test-observability/utils','fQgLy','KEY_TEST_RESULT_AT','rimXE','KEY_TEST_ATTACHMENTS','multi_dropdown','uuid','trackHookEvent','tfiXx','fpFsT','OVtxL','trackPlaywrightInstance:\x20created\x20instance\x20for\x20target=',',\x20testFrameworkState=','boNxE','\x20result=','KEY_HOOK_FAILURE_REASON','5604296fxRALa','runHooks','ypihn','setTestDetails','uCJtU','matchHookRegex','title','../../playwright/reporter/pwUtils','../../../helpers/classLogger.js','results','\x20&\x20hook\x20=\x20','sendLogCreatedEvent','fTGgj','basename','\x20testHookState=','LJTxr','description','parsePlaywrightTestResult','Wkfbf','YsPXm','getCurrentInstanceName','Doeci','cKyqj','KEY_TEST_CODE','KEY_TEST_TAGS','../cliUtils.js','Error\x20in\x20sendLogCreatedEvent:\x20','trackEvent','push','KEY_HOOKS_STARTED','failed','smYxu','KEY_TEST_LOGS','KEY_LOGS','step','split','QVMSY','err','errors','KEY_TEST_RESULT','trackEvent:\x20Exception\x20in\x20event\x20tracking,\x20testFrameworkState=%s\x20hookState=%s\x20argsLength=%s,\x20exception=%s','Cdkwm','KEY_HOOK_LOGS','getAllData','NQXdU','UPykN','YTxqt','iJhcT','KEY_HOOK_RESULT','stack','KEY_TEST_FAILURE_REASON','DEFAULT_HOOK_RESULT','steps','get','zCLjd','field_type','JcHbq','vCbpK','KEY_TEST_NAME'];a67_0xe08d=function(){return _0x15c250;};return a67_0xe08d();}