const a65_0x2b1191=a65_0x5fc3;(function(_0xa9fbdd,_0x56ed4f){const _0xe9f8a4=a65_0x5fc3,_0x17c7e3=_0xa9fbdd();while(!![]){try{const _0x431033=-parseInt(_0xe9f8a4(0x1ff))/0x1+parseInt(_0xe9f8a4(0x22e))/0x2+-parseInt(_0xe9f8a4(0x21a))/0x3+-parseInt(_0xe9f8a4(0x1ab))/0x4+-parseInt(_0xe9f8a4(0x18b))/0x5+-parseInt(_0xe9f8a4(0x185))/0x6+parseInt(_0xe9f8a4(0x17d))/0x7*(parseInt(_0xe9f8a4(0x179))/0x8);if(_0x431033===_0x56ed4f)break;else _0x17c7e3['push'](_0x17c7e3['shift']());}catch(_0x13959a){_0x17c7e3['push'](_0x17c7e3['shift']());}}}(a65_0x52d1,0x75ad6));function a65_0x52d1(){const _0x19c81d=['KBfeg','trackEvent:\x20Exception\x20in\x20event\x20tracking,\x20testFrameworkState=%s\x20hookState=%s\x20argsLength=%s,\x20exception=%s','filePath','KEY_HOOK_LAST_STARTED','getTime','toISOString','debug','map','logCreatedEvent','KEY_TEST_NAME','KEY_TEST_UUID','KEY_TEST_RERUN_NAME','aSsDL','parsePlaywrightTest','KEY_TEST_FRAMEWORK_NAME','runHooks','LvCxu','qsVtK','526678TXgyJx','UdDAk','\x20hookState=','KEY_HOOK_FAILURE_TYPE','getAllData','split','Expected\x20to\x20fail,\x20but\x20passed.','zjmJZ','PlaywrightTestFramework','80Gfasxv','KEY_CUSTOM_TAGS','passed','VGrOX','2221471bhionE','KEY_TEST_RESULT_AT','BzCSs','trackEvent:\x20found\x20instance,\x20testFrameworkState=','\x20and\x20args\x20=\x20','size','trackHookEvent','KEY_TEST_TAGS','4671258jINZzT','OIwIl','statSync','format','bjXwp','sendLogCreatedEvent:\x20testId=','3033490DFrXJD','zzNMv','getId','WtsAn','steps','qOVjx','Error\x20processing\x20trace\x20file\x20','pop','KEY_TEST_SCOPES','KEY_TEST_RESULT','tXupI','Error\x20in\x20sendLogCreatedEvent:\x20','KEY_TEST_STARTED_AT','KEY_HOOK_FAILURE_REASON','KEY_HOOK_LOGS','NuhOB','KEY_EVENT_STARTED_AT','KEY_HOOKS_STARTED','eUUSW','some','addMultipleEntries','util','vQNMj','faatu','fwOPQ','get','KEY_TEST_ENDED_AT','basename','KEY_TEST_FRAMEWORK_VERSION','SnGhx','\x20instance=','wAaZM','3034300MJoxJk','testUId','status','trackPlaywrightInstance','field_type','error','values','message','CtPix','Hook\x20List\x20in\x20Post\x20','path','info','parsePlaywrightTestResult:\x20testId=','HBtRN','multi_dropdown','getTraceFilePaths','trackEvent\x20loading\x20testResults\x20for\x20testId:\x20','trackEvent\x20loading\x20testData\x20for\x20testId:\x20','trim','getTrackedInstance','KEY_TEST_FILE_PATH','sendLogCreatedEvent','./constants/testFrameworkConstants.js','matchHookRegex','filter','MCFYg','getTestFrameworksVersions','toString','getTestDetails','forEach','trackEvent','sendLogCreatedEvent\x20for\x20testId:\x20','FgaeX','POST','../../utils/constants','stack','push','LhbEP','result','No\x20reason\x20provided','KEY_HOOK_FAILURE','nYhbB','inspect','INIT_TEST','setTrackedInstance','./testFramework','expectedStatus','ftiSj','getRef','cywRo','\x20&\x20hook\x20=\x20','TEST','KEY_TEST_ID','YZNUb','isArray','Hook\x20Started\x20in\x20PRE\x20key\x20=\x20','../../../helpers/classLogger.js','annotations','BMlGR','trackPlaywrightInstance:\x20saved\x20instance\x20contextId=','SylEa','setTestDetails',',\x20state=','\x20payload=','vvnqn','KEY_LOGS','resolveInstance','vHKoE','failed','../state/testFrameworkState.js','vUini','NONE','step','startTime','trackEvent:\x20loaded\x20testData\x20for\x20testId:\x20','KEY_HOOK_ID','KEY_TEST_SCOPE',',\x20testFrameworkState=','duration','vxHHn','length','../instances/testFrameworkInstance.js','../cliUtils.js','trackPlaywrightInstance:\x20created\x20instance\x20for\x20target=','124250FFvoTW','OqsDT','\x20testHookState=','ABXOI','teXpV','uuid','aIWTm','SZzPr','KEY_AUTOMATE_SESSION_NAME','hook','errors','ODMpJ','KEY_HOOKS_FINISHED','\x20\x20and\x20args\x20=\x20','../../playwright/reporter/pwUtils','timedOut','fbrgI','KEIsJ','Error\x20processing\x20direct\x20trace\x20file\x20','KEY_HOOK_RESULT','wnZaw','test','getInstance','../instances/trackedInstance.js','Oprlq','bTzMh','exports','2060391JTdlaK','KEY_TEST_LOGS'];a65_0x52d1=function(){return _0x19c81d;};return a65_0x52d1();}const TestFramework=require(a65_0x2b1191(0x1d8)),TestFrameworkState=require(a65_0x2b1191(0x1f0)),HookState=require('../state/hookState.js'),{createClassLogger}=require(a65_0x2b1191(0x1e3)),TestFrameworkInstance=require(a65_0x2b1191(0x1fc)),CLIUtils=require(a65_0x2b1191(0x1fd)),TrackedInstance=require(a65_0x2b1191(0x216)),TestFrameworkConstants=require(a65_0x2b1191(0x1c1)),logger=createClassLogger(a65_0x2b1191(0x178)),{v4:uuidv4}=require(a65_0x2b1191(0x204)),util=require(a65_0x2b1191(0x1a0)),{getPlaywrightSessionName,getPlaywrightTestFilePath,getPlaywrightTestId,getPlaywrightTestTitle,getPlaywrightTestLocation,getPlaywrightTestTags,getPlaywrightTestCode,getPlaywrightTestScope,getPlaywrightTestScopes,getStepsAndLogs,getScreenshots,getPlaywrightCustomRerunParam,getMediaArtifactsLogs,getManualUploadLogs,updatePayloadForTraceLogs}=require('../../../helpers/helper.js'),TestInfo=require('../TestInfo.js'),GrpcClient=require('../grpcClient'),{removeAnsiColors,getFailureType,failureData}=require('../../../helpers/test-observability/utils'),{getFailureData,getTestTags}=require(a65_0x2b1191(0x20d)),{findNestedKey,sendTraceZip,validateFilePath}=require(a65_0x2b1191(0x20d)),path=require('path'),fs=require('fs'),helper=require('../../../../src/helpers/helper'),{PLAYWRIGHT_TRACE_LOGS}=require(a65_0x2b1191(0x1cd));function a65_0x5fc3(_0x54fb6,_0x1a6688){const _0x52d12b=a65_0x52d1();return a65_0x5fc3=function(_0x5fc37c,_0x530ad5){_0x5fc37c=_0x5fc37c-0x175;let _0x33c407=_0x52d12b[_0x5fc37c];return _0x33c407;},a65_0x5fc3(_0x54fb6,_0x1a6688);}class PlaywrightTestFramework extends TestFramework{constructor(_0x467432,_0x3052d9,_0x437524){super(_0x467432,_0x3052d9,_0x437524);}async[a65_0x2b1191(0x1c9)](_0x22d06f,_0x3cb371,_0xfa8ec8={}){const _0x42a93b=a65_0x2b1191,_0x5260bf={};_0x5260bf[_0x42a93b(0x1da)]=function(_0x40e443,_0x21b7b0){return _0x40e443===_0x21b7b0;},_0x5260bf[_0x42a93b(0x1cb)]=function(_0x3edfb5,_0x45241d){return _0x3edfb5===_0x45241d;},_0x5260bf[_0x42a93b(0x1a1)]='test',_0x5260bf[_0x42a93b(0x18c)]=_0x42a93b(0x21d);const _0x4f6e39=_0x5260bf;await super[_0x42a93b(0x1c9)](_0x22d06f,_0x3cb371,_0xfa8ec8);const _0x33f7bc=this['resolveInstance'](_0x22d06f,_0x3cb371,_0xfa8ec8);if(!_0x33f7bc)return;logger[_0x42a93b(0x222)](_0x42a93b(0x180)+_0x22d06f+_0x42a93b(0x230)+_0x3cb371+'\x20instanceId='+_0x33f7bc[_0x42a93b(0x1db)]());try{if(_0x4f6e39[_0x42a93b(0x1da)](_0x3cb371,HookState['PRE'])&&_0x4f6e39[_0x42a93b(0x1cb)](_0x22d06f,TestFrameworkState[_0x42a93b(0x1de)])){const _0x2079ae=_0xfa8ec8[_0x42a93b(0x214)];logger[_0x42a93b(0x222)](_0x42a93b(0x1bc)+_0x2079ae['id']+'}');const _0x2aeafb=TestInfo['getTestUUID'](_0x2079ae['id']);_0x33f7bc['addMultipleEntries'](this[_0x42a93b(0x229)](_0x2aeafb,_0x2079ae)),logger['debug'](_0x42a93b(0x1f5)+_0x2079ae['id']+_0x42a93b(0x1f8)+_0x22d06f+_0x42a93b(0x201)+_0x3cb371+_0x42a93b(0x1a9)+_0x33f7bc[_0x42a93b(0x1db)]());}if(_0x4f6e39['FgaeX'](_0x3cb371,HookState[_0x42a93b(0x1cc)])&&_0x4f6e39[_0x42a93b(0x1da)](_0x22d06f,TestFrameworkState[_0x42a93b(0x1de)])){const _0x4e6c2d=_0xfa8ec8[_0x42a93b(0x214)],_0x393efd=_0xfa8ec8['result'];logger[_0x42a93b(0x222)](_0x42a93b(0x1bb)+_0x4e6c2d['id']),_0x33f7bc[_0x42a93b(0x19f)](this['parsePlaywrightTestResult'](_0x4e6c2d['id'],_0x393efd,_0x4e6c2d)),this[_0x42a93b(0x1c0)](_0x33f7bc,_0x22d06f,_0x3cb371,_0x4f6e39['vQNMj'],_0xfa8ec8);}if(CLIUtils[_0x42a93b(0x1c2)](_0x22d06f[_0x42a93b(0x1c6)]()['split']('.')[0x1])){const _0x10bdb1=await this[_0x42a93b(0x183)](_0x33f7bc,_0x22d06f,_0x3cb371,_0xfa8ec8);_0x33f7bc['addMultipleEntries'](_0x10bdb1);}}catch(_0x25f29e){logger[_0x42a93b(0x1b0)](util[_0x42a93b(0x188)](_0x4f6e39[_0x42a93b(0x18c)],_0x22d06f,_0x3cb371,_0xfa8ec8[_0x42a93b(0x1fb)],_0x25f29e));}_0xfa8ec8['instance']=_0x33f7bc,await this[_0x42a93b(0x22b)](_0x33f7bc,_0x22d06f,_0x3cb371,_0xfa8ec8);}[a65_0x2b1191(0x1ed)](_0x578123,_0x180b94,_0x304426={}){const _0x1b7d76=a65_0x2b1191,_0xe9e1a5={};_0xe9e1a5[_0x1b7d76(0x202)]=function(_0x59f9c2,_0x28ccdc){return _0x59f9c2===_0x28ccdc;};const _0x5b1ad1=_0xe9e1a5;let _0x52d0f8=null;return(_0x5b1ad1[_0x1b7d76(0x202)](_0x578123,TestFrameworkState[_0x1b7d76(0x1d6)])||_0x5b1ad1['ABXOI'](_0x578123,TestFrameworkState[_0x1b7d76(0x1f2)]))&&this['trackPlaywrightInstance'](_0x578123,_0x304426),_0x52d0f8=TestFramework[_0x1b7d76(0x1be)](),_0x52d0f8;}[a65_0x2b1191(0x1ae)](_0x2e5f29,_0x3a7498){const _0x2bcbab=a65_0x2b1191,_0x3c0903=CLIUtils['getCurrentInstanceName'](),_0x175c7a=TrackedInstance['createContext'](_0x3c0903);let _0x447381=null;logger[_0x2bcbab(0x1b6)](_0x2bcbab(0x1fe)+_0x3c0903+_0x2bcbab(0x1e9)+_0x2e5f29),_0x447381=new TestFrameworkInstance(_0x175c7a,this['getTestFrameworks'](),this['getTestFrameworksVersions'](),_0x2e5f29,HookState[_0x2bcbab(0x1f2)]),TestFramework[_0x2bcbab(0x1d7)](_0x175c7a,_0x447381),logger[_0x2bcbab(0x1b6)](_0x2bcbab(0x1e6)+_0x175c7a[_0x2bcbab(0x18d)]()+'\x20target='+_0x3c0903);}[a65_0x2b1191(0x229)](_0x528c68,_0x172ae2){const _0x17890f=a65_0x2b1191,_0x3eedb4={'ZQsRz':function(_0x50bb4a,_0x22c084){return _0x50bb4a(_0x22c084);},'faatu':function(_0x37f72c,_0x1ce1ed){return _0x37f72c(_0x1ce1ed);},'tXupI':function(_0x51c55c,_0x52b481){return _0x51c55c(_0x52b481);},'KBfeg':function(_0x14b23a,_0x5080d7){return _0x14b23a(_0x5080d7);},'YqIRm':function(_0x2b7ea3,_0x58e410){return _0x2b7ea3(_0x58e410);},'fwOPQ':function(_0x577994,_0x595707){return _0x577994(_0x595707);},'aSsDL':function(_0x372235,_0x17a043){return _0x372235(_0x17a043);},'CPxbw':function(_0x420f72,_0x4a44d1){return _0x420f72(_0x4a44d1);}},_0x32d656=_0x3eedb4['ZQsRz'](getPlaywrightTestId,_0x172ae2),_0x319b1d=_0x3eedb4['ZQsRz'](getPlaywrightTestTitle,_0x172ae2),_0x5e8cd5=_0x3eedb4[_0x17890f(0x1a2)](getTestTags,_0x172ae2),_0x131f5a=_0x3eedb4[_0x17890f(0x195)](getPlaywrightTestCode,_0x172ae2),_0x20519d=_0x3eedb4[_0x17890f(0x21c)](getPlaywrightTestFilePath,_0x172ae2),_0x20e65a=_0x20519d+':'+_0x3eedb4['YqIRm'](getPlaywrightTestLocation,_0x172ae2),_0x45307a=_0x3eedb4[_0x17890f(0x1a3)](getPlaywrightTestScope,_0x172ae2),_0x22229c=_0x3eedb4[_0x17890f(0x228)](getPlaywrightTestScopes,_0x172ae2),_0x4e90fd=_0x3eedb4['CPxbw'](getPlaywrightSessionName,_0x172ae2),_0x48d04a=this['getTestFrameworks']()[0x0],_0x383315={[TestFrameworkConstants[_0x17890f(0x22a)]]:_0x48d04a,[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]:this[_0x17890f(0x1c5)]()[_0x48d04a],[TestFrameworkConstants[_0x17890f(0x21b)]]:[],[TestFrameworkConstants[_0x17890f(0x20b)]]:{},[TestFrameworkConstants[_0x17890f(0x19c)]]:{},[TestFrameworkConstants['KEY_TEST_UUID']]:_0x528c68,[TestFrameworkConstants[_0x17890f(0x194)]]:TestFrameworkConstants['DEFAULT_TEST_RESULT'],[TestFrameworkConstants[_0x17890f(0x207)]]:_0x4e90fd,[TestFrameworkConstants[_0x17890f(0x1bf)]]:_0x20519d,[TestFrameworkConstants[_0x17890f(0x1df)]]:_0x32d656,[TestFrameworkConstants[_0x17890f(0x225)]]:_0x319b1d,[TestFrameworkConstants['KEY_TEST_LOCATION']]:_0x20e65a,[TestFrameworkConstants['KEY_TEST_CODE']]:_0x131f5a,[TestFrameworkConstants[_0x17890f(0x184)]]:_0x5e8cd5,[TestFrameworkConstants[_0x17890f(0x197)]]:_0x172ae2['results'][0x0]['startTime'],[TestFrameworkConstants[_0x17890f(0x1f7)]]:_0x45307a,[TestFrameworkConstants[_0x17890f(0x193)]]:_0x22229c,[TestFrameworkConstants[_0x17890f(0x227)]]:_0x3eedb4['faatu'](getPlaywrightCustomRerunParam,_0x172ae2)};TestInfo[_0x17890f(0x1e8)](_0x172ae2['id'],_0x383315);const _0x20cd65={};return _0x20cd65[_0x32d656]=_0x383315,_0x20cd65;}['parsePlaywrightTestResult'](_0xb548e0,_0x4abcb4,_0x12ee64){const _0x5eb232=a65_0x2b1191,_0xb16bc7={'OqsDT':function(_0x4c26d1,_0x575912){return _0x4c26d1(_0x575912);},'BMlGR':'TEST_ATTACHMENT','YZNUb':function(_0x26eb71,_0x59fb9c){return _0x26eb71===_0x59fb9c;},'LvCxu':function(_0x5250fc,_0x49e83e){return _0x5250fc===_0x49e83e;},'eUUSW':function(_0x17dd06,_0x5342a2){return _0x17dd06===_0x5342a2;},'RGUdn':function(_0x138b77,_0x72d2c){return _0x138b77(_0x72d2c);},'pzwCL':_0x5eb232(0x1d2),'qsVtK':_0x5eb232(0x1b9),'SnGhx':function(_0x2de00e,_0x47ede5){return _0x2de00e+_0x47ede5;},'SylEa':'skipped','bTzMh':'passed','MCFYg':function(_0x688697,_0x53a50b){return _0x688697===_0x53a50b;},'bjXwp':_0x5eb232(0x1ef),'ODMpJ':_0x5eb232(0x20e),'OIwIl':_0x5eb232(0x176),'aIWTm':function(_0x1d6404,_0x2afb4e,_0x20f7ed){return _0x1d6404(_0x2afb4e,_0x20f7ed);},'aUdNs':function(_0xef0ed3,_0x1ff4d7){return _0xef0ed3||_0x1ff4d7;},'VGrOX':function(_0x5679d3,_0x2b2a18){return _0x5679d3(_0x2b2a18);},'SZzPr':_0x5eb232(0x1b5),'zjmJZ':function(_0x52eced,_0x4304c2){return _0x52eced>_0x4304c2;},'vvnqn':function(_0x32f2c3,_0xf0b59d,_0x131875){return _0x32f2c3(_0xf0b59d,_0x131875);},'ixdcP':function(_0x599052,_0x5728cb){return _0x599052>_0x5728cb;}};logger[_0x5eb232(0x222)](_0x5eb232(0x1b7)+_0xb548e0);const _0x56d5f4=new Date(_0x4abcb4[_0x5eb232(0x1f4)]),_0x211bc3=_0x4abcb4[_0x5eb232(0x1f9)],_0x4225fb=new Date(_0xb16bc7[_0x5eb232(0x1a8)](_0x56d5f4[_0x5eb232(0x220)](),_0x211bc3)),_0x37c18d=_0x4abcb4[_0x5eb232(0x1ad)],_0x2f0d7d=TestInfo[_0x5eb232(0x1c7)](_0xb548e0)[TestFrameworkConstants['KEY_CUSTOM_TAGS']]||{};let _0x131a0e=_0x37c18d;if(_0xb16bc7[_0x5eb232(0x22c)](_0x4abcb4['status'],_0x12ee64['expectedStatus']))_0x131a0e=_0xb16bc7[_0x5eb232(0x22c)](_0x4abcb4[_0x5eb232(0x1ad)],_0xb16bc7[_0x5eb232(0x1e7)])?_0xb16bc7['SylEa']:_0xb16bc7[_0x5eb232(0x218)];else{(_0xb16bc7[_0x5eb232(0x1c4)](_0x131a0e,_0xb16bc7[_0x5eb232(0x218)])||_0xb16bc7[_0x5eb232(0x1c4)](_0x131a0e,_0xb16bc7[_0x5eb232(0x189)])||_0xb16bc7[_0x5eb232(0x1e0)](_0x131a0e,_0xb16bc7[_0x5eb232(0x20a)]))&&(_0x131a0e=_0xb16bc7['bjXwp']);if(_0xb16bc7[_0x5eb232(0x22c)](_0x4abcb4['status'],_0xb16bc7[_0x5eb232(0x218)])&&_0xb16bc7[_0x5eb232(0x22c)](_0x12ee64[_0x5eb232(0x1d9)],_0xb16bc7[_0x5eb232(0x189)])){const _0x68a36c={};_0x68a36c[_0x5eb232(0x1b2)]=_0xb16bc7[_0x5eb232(0x186)],_0x68a36c[_0x5eb232(0x1ce)]=_0xb16bc7['OIwIl'],_0x4abcb4[_0x5eb232(0x1b0)]=_0x68a36c,_0x4abcb4['errors']=[_0x4abcb4[_0x5eb232(0x1b0)]];}}const {failureData:_0x327a32,logs:_0x502608}=_0xb16bc7[_0x5eb232(0x205)](getFailureData,_0x4abcb4?.[_0x5eb232(0x209)],{}),_0x27ed9a={[TestFrameworkConstants['KEY_TEST_FAILURE']]:_0xb16bc7['aUdNs'](_0x327a32,null),[TestFrameworkConstants['KEY_TEST_FAILURE_TYPE']]:_0x4abcb4?.[_0x5eb232(0x1b0)]&&_0xb16bc7['VGrOX'](getFailureType,_0x4abcb4['error'][_0x5eb232(0x1b2)]),[TestFrameworkConstants['KEY_TEST_FAILURE_REASON']]:_0x4abcb4?.['error']&&_0xb16bc7[_0x5eb232(0x17c)](removeAnsiColors,_0x4abcb4['error'][_0x5eb232(0x1b2)]),[TestFrameworkConstants[_0x5eb232(0x1ec)]]:[],[TestFrameworkConstants[_0x5eb232(0x194)]]:_0x131a0e,[TestFrameworkConstants[_0x5eb232(0x1a5)]]:_0x4225fb[_0x5eb232(0x221)](),[TestFrameworkConstants[_0x5eb232(0x17e)]]:new Date()['toISOString'](),[TestFrameworkConstants[_0x5eb232(0x17a)]]:_0x2f0d7d},_0x45266b={};_0x45266b['test']=_0x12ee64;const _0x5be3c0=this[_0x5eb232(0x1ed)](TestFrameworkState[_0x5eb232(0x1de)],HookState[_0x5eb232(0x1cc)],_0x45266b),_0x289177=_0x5be3c0[_0x5eb232(0x232)]()[_0x5eb232(0x1a4)](_0xb548e0)[TestFrameworkConstants[_0x5eb232(0x226)]],_0x2c070a=[],_0x1524bc=_0xb16bc7['aIWTm'](findNestedKey,_0x4abcb4,_0xb16bc7[_0x5eb232(0x206)]);if(_0x1524bc&&_0xb16bc7[_0x5eb232(0x200)](validateFilePath,_0x1524bc))try{_0x2c070a[_0x5eb232(0x1cf)]({'kind':_0xb16bc7[_0x5eb232(0x1e5)],'timestamp':new Date()['toISOString'](),'test_run_uuid':_0x289177,'file_name':path['basename'](_0x1524bc),'file_size':fs[_0x5eb232(0x187)](_0x1524bc)['size'],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x2d83d3){logger[_0x5eb232(0x1b0)](_0x5eb232(0x211)+_0x1524bc+':\x20'+_0x2d83d3[_0x5eb232(0x1b2)]);}const _0x3f12a8=TestInfo[_0x5eb232(0x1ba)](),_0x40059b=_0x3f12a8[_0x5eb232(0x1c3)](_0x157c8c=>_0x157c8c[_0x5eb232(0x1ac)]===_0x289177);_0x40059b[_0x5eb232(0x1c8)](_0x29cffb=>{const _0x3d81a7=_0x5eb232;if(_0x29cffb[_0x3d81a7(0x21e)]&&_0xb16bc7['OqsDT'](validateFilePath,_0x29cffb[_0x3d81a7(0x21e)])&&!_0x2c070a[_0x3d81a7(0x19e)](_0x46d479=>_0x46d479['file_name']===path[_0x3d81a7(0x1a6)](_0x29cffb[_0x3d81a7(0x21e)])))try{_0x2c070a[_0x3d81a7(0x1cf)]({'kind':_0xb16bc7[_0x3d81a7(0x1e5)],'timestamp':new Date()['toISOString'](),'test_run_uuid':_0x289177,'file_name':path[_0x3d81a7(0x1a6)](_0x29cffb[_0x3d81a7(0x21e)]),'file_size':fs['statSync'](_0x29cffb[_0x3d81a7(0x21e)])[_0x3d81a7(0x182)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x18096a){logger['error'](_0x3d81a7(0x191)+_0x29cffb[_0x3d81a7(0x21e)]+'\x20from\x20TestDetails:\x20'+_0x18096a[_0x3d81a7(0x1b2)]);}});if(_0xb16bc7[_0x5eb232(0x177)](_0x2c070a['length'],0x0)){const _0x86c982=_0x27ed9a[TestFrameworkConstants[_0x5eb232(0x1ec)]]||[];_0x27ed9a[TestFrameworkConstants[_0x5eb232(0x1ec)]]=[..._0x86c982,..._0x2c070a];}const _0x26028c=TestInfo[_0x5eb232(0x1c7)](_0xb548e0)[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{},_0x4d9561=_0xb16bc7[_0x5eb232(0x1eb)](getManualUploadLogs,_0x26028c,_0x5be3c0[_0x5eb232(0x232)]()['get'](_0xb548e0)[TestFrameworkConstants[_0x5eb232(0x226)]]);if(_0xb16bc7['ixdcP'](_0x4d9561[_0x5eb232(0x1fb)],0x0)){const _0x2f8dcc=_0x27ed9a[TestFrameworkConstants[_0x5eb232(0x1ec)]]||[];_0x27ed9a[TestFrameworkConstants[_0x5eb232(0x1ec)]]=[..._0x2f8dcc,..._0x4d9561];}const _0x545565=_0x12ee64[_0x5eb232(0x1e4)]||[],_0x343cf2=_0x27ed9a[TestFrameworkConstants[_0x5eb232(0x17a)]]||{};_0x545565[_0x5eb232(0x1c8)](_0x1ff238=>{const _0x456357=_0x5eb232,{type:_0x3f39e0}=_0x1ff238;let _0x457621=_0x1ff238['description'];if(!_0x3f39e0)return;(_0xb16bc7[_0x456357(0x1e0)](_0x457621,undefined)||_0xb16bc7[_0x456357(0x22c)](_0x457621,null)||_0xb16bc7[_0x456357(0x19d)](_0xb16bc7['RGUdn'](String,_0x457621)[_0x456357(0x1bd)](),''))&&(_0x457621=_0xb16bc7['pzwCL']);if(!_0x343cf2[_0x3f39e0]){const _0x20a06c={};_0x20a06c[_0x456357(0x1af)]=_0xb16bc7[_0x456357(0x22d)],_0x20a06c[_0x456357(0x1b1)]=[],_0x343cf2[_0x3f39e0]=_0x20a06c;}else!_0x343cf2[_0x3f39e0][_0x456357(0x1af)]&&(_0x343cf2[_0x3f39e0][_0x456357(0x1af)]=_0xb16bc7['qsVtK']),!Array[_0x456357(0x1e1)](_0x343cf2[_0x3f39e0][_0x456357(0x1b1)])&&(_0x343cf2[_0x3f39e0][_0x456357(0x1b1)]=[]);const _0x18048d=_0xb16bc7['RGUdn'](String,_0x457621)[_0x456357(0x175)](',')[_0x456357(0x223)](_0x3151f9=>_0x3151f9[_0x456357(0x1bd)]());_0x343cf2[_0x3f39e0]['values']=[...new Set([..._0x343cf2[_0x3f39e0][_0x456357(0x1b1)],..._0x18048d])];}),_0x27ed9a[TestFrameworkConstants['KEY_CUSTOM_TAGS']]=_0x343cf2,TestInfo[_0x5eb232(0x1e8)](_0xb548e0,_0x27ed9a);const _0x5f4725={};return _0x5f4725[_0xb548e0]=_0x27ed9a,_0x5f4725;}async['trackHookEvent'](_0x193755,_0x7ba48c,_0x12e876,_0xd36c67){const _0x3f1c46=a65_0x2b1191,_0x2b8174={'WtsAn':function(_0x29379d,_0x52cf34){return _0x29379d in _0x52cf34;},'wAaZM':function(_0x14cf5a,_0xd74b9f){return _0x14cf5a(_0xd74b9f);},'Oprlq':function(_0x316e72,_0x543787){return _0x316e72===_0x543787;},'jAhEI':function(_0x1d38b7){return _0x1d38b7();},'xqNch':function(_0x306de1,_0x4908eb){return _0x306de1===_0x4908eb;},'vxHHn':function(_0x3c5840,_0x599990){return _0x3c5840>_0x599990;},'vHKoE':function(_0x39d489,_0x213b72,_0x39c7f9){return _0x39d489(_0x213b72,_0x39c7f9);},'UdDAk':'err','kTQkN':_0x3f1c46(0x1ef),'nYhbB':_0x3f1c46(0x17b),'vUini':function(_0x6dfb7c,_0x323f24){return _0x6dfb7c!==_0x323f24;},'YoJfo':function(_0x412d8f,_0xe411e9){return _0x412d8f+_0xe411e9;},'CtPix':_0x3f1c46(0x208)},_0x244f45=_0xd36c67[_0x3f1c46(0x214)],_0x56b430=_0xd36c67[_0x3f1c46(0x1f3)],_0x427878=_0xd36c67['test']['id'],_0x5bb76c=_0x7ba48c[_0x3f1c46(0x1c6)]()['split']('.')[0x1];let _0x4012d2=_0x193755['getAllData']()['get'](_0x427878)[TestFrameworkConstants[_0x3f1c46(0x19c)]];!_0x4012d2&&(_0x4012d2={});!_0x2b8174[_0x3f1c46(0x18e)](_0x5bb76c,_0x4012d2)&&(_0x4012d2[_0x5bb76c]=[]);let _0x233d84=_0x193755[_0x3f1c46(0x232)]()[_0x3f1c46(0x1a4)](_0x427878)[TestFrameworkConstants[_0x3f1c46(0x20b)]];!_0x233d84&&(_0x233d84={});!_0x2b8174[_0x3f1c46(0x18e)](_0x5bb76c,_0x233d84)&&(_0x233d84[_0x5bb76c]=[]);const _0x339fc0={[TestFrameworkConstants[_0x3f1c46(0x19c)]]:_0x4012d2,[TestFrameworkConstants[_0x3f1c46(0x20b)]]:_0x233d84},_0x2bbea2={};_0x2bbea2[_0x427878]=_0x339fc0;const _0x3a5781=_0x2bbea2,_0xb12570=_0x2b8174[_0x3f1c46(0x1aa)](getPlaywrightTestFilePath,_0x244f45),_0x1ed961=_0xb12570+':'+_0x2b8174['wAaZM'](getPlaywrightTestLocation,_0x244f45),_0xd0a23a=TestInfo[_0x3f1c46(0x1c7)](_0x427878)[TestFrameworkConstants['KEY_CUSTOM_TAGS']]||{};if(_0x2b8174[_0x3f1c46(0x217)](_0x12e876,HookState['PRE'])){const _0x2f9765={'key':_0x5bb76c,[TestFrameworkConstants[_0x3f1c46(0x1f6)]]:_0x2b8174['jAhEI'](uuidv4),[TestFrameworkConstants[_0x3f1c46(0x212)]]:TestFrameworkConstants['DEFAULT_HOOK_RESULT'],[TestFrameworkConstants[_0x3f1c46(0x19b)]]:_0x56b430[_0x3f1c46(0x1f4)],[TestFrameworkConstants[_0x3f1c46(0x199)]]:[],[TestFrameworkConstants['KEY_HOOK_NAME']]:_0x56b430['title'],[TestFrameworkConstants[_0x3f1c46(0x1bf)]]:_0xb12570,[TestFrameworkConstants['KEY_TEST_LOCATION']]:_0x1ed961,[TestFrameworkConstants[_0x3f1c46(0x17a)]]:_0xd0a23a};_0x4012d2[_0x5bb76c][_0x3f1c46(0x1cf)](_0x2f9765),_0x3a5781[_0x427878][TestFrameworkConstants[_0x3f1c46(0x21f)]]=_0x5bb76c,logger[_0x3f1c46(0x222)](_0x3f1c46(0x1e2)+_0x5bb76c+_0x3f1c46(0x1dd)+_0x2f9765+_0x3f1c46(0x20c)+_0xd36c67);}else{if(_0x2b8174['xqNch'](_0x12e876,HookState[_0x3f1c46(0x1cc)])){const _0xcd06fc=await _0xd36c67[_0x3f1c46(0x1d1)],_0x22ab32=_0x4012d2[_0x5bb76c]||[],_0x40fea3=_0xd36c67[_0x3f1c46(0x1f3)];logger['debug'](_0x3f1c46(0x1b4)+_0x22ab32+_0x3f1c46(0x181)+_0xd36c67);if(_0x2b8174[_0x3f1c46(0x1fa)](_0x22ab32[_0x3f1c46(0x1fb)],0x0)){const _0x4ffdf7=_0x22ab32[_0x3f1c46(0x192)]();if(_0x40fea3[_0x3f1c46(0x1b0)]){const _0x2a77f8=_0x2b8174[_0x3f1c46(0x1ee)](failureData,_0x40fea3[_0x3f1c46(0x1b0)],_0x2b8174[_0x3f1c46(0x22f)]);_0x4ffdf7[TestFrameworkConstants[_0x3f1c46(0x231)]]=_0x2b8174['wAaZM'](getFailureType,_0x40fea3?.[_0x3f1c46(0x1b0)]['message']),_0x4ffdf7[TestFrameworkConstants[_0x3f1c46(0x198)]]=_0x2b8174[_0x3f1c46(0x1aa)](removeAnsiColors,_0x40fea3?.[_0x3f1c46(0x1b0)][_0x3f1c46(0x1b2)]),_0x4ffdf7[TestFrameworkConstants[_0x3f1c46(0x212)]]=_0x2b8174['kTQkN'],_0x4ffdf7[TestFrameworkConstants[_0x3f1c46(0x1d3)]]=_0x2a77f8;}else _0x4ffdf7[TestFrameworkConstants[_0x3f1c46(0x212)]]=_0x2b8174[_0x3f1c46(0x1d4)];_0x2b8174[_0x3f1c46(0x1f1)](_0xcd06fc,TestFrameworkConstants['DEFAULT_HOOK_RESULT'])&&(_0x4ffdf7[TestFrameworkConstants['KEY_HOOK_RESULT']]=!_0x40fea3['error']?_0x2b8174[_0x3f1c46(0x1d4)]:_0x2b8174['kTQkN']);const _0x51b14c=new Date(_0x40fea3[_0x3f1c46(0x1f4)]),_0x246ba6=new Date(_0x2b8174['YoJfo'](_0x51b14c[_0x3f1c46(0x220)](),_0x40fea3[_0x3f1c46(0x1f9)]));_0x4ffdf7[TestFrameworkConstants['KEY_EVENT_ENDED_AT']]=_0x246ba6[_0x3f1c46(0x221)](),_0x4ffdf7[TestFrameworkConstants['KEY_CUSTOM_TAGS']]=_0xd0a23a;const _0x288b4a=_0x4ffdf7[TestFrameworkConstants['KEY_HOOK_ID']];await this['sendLogCreatedEvent'](_0x193755,_0x7ba48c,_0x288b4a,_0x2b8174[_0x3f1c46(0x1b3)],_0xd36c67),!_0x233d84[_0x5bb76c]&&(_0x233d84[_0x5bb76c]=[]),_0x233d84[_0x5bb76c][_0x3f1c46(0x1cf)](_0x4ffdf7),_0x3a5781[_0x427878][TestFrameworkConstants['KEY_HOOK_LAST_FINISHED']]=_0x5bb76c;}}}return _0x3a5781;}async['sendLogCreatedEvent'](_0x48ad17,_0x13555a,_0x777522,_0x4179eb,_0x2e038f){const _0x11b67d=a65_0x2b1191,_0x1bab40={'NuhOB':function(_0x477b64,_0x4f332c){return _0x477b64===_0x4f332c;},'cywRo':_0x11b67d(0x214),'BzCSs':function(_0xabee75,_0x54ad3d,_0x30a22e){return _0xabee75(_0x54ad3d,_0x30a22e);},'KEIsJ':function(_0xac7fae,_0x387e6c,_0x41e117,_0x2da74e){return _0xac7fae(_0x387e6c,_0x41e117,_0x2da74e);},'HBtRN':function(_0x16808f,_0x4b369d,_0x1af3c4){return _0x16808f(_0x4b369d,_0x1af3c4);},'teXpV':function(_0x315d43,_0x2dfaf6,_0x3d5b6e){return _0x315d43(_0x2dfaf6,_0x3d5b6e);},'wnZaw':function(_0x5b70e7,_0x3f3658,_0xcb7933){return _0x5b70e7(_0x3f3658,_0xcb7933);},'fbrgI':function(_0x8e2879,_0x526272,_0x5d23d3,_0x4a5403,_0x117e5e){return _0x8e2879(_0x526272,_0x5d23d3,_0x4a5403,_0x117e5e);},'qOVjx':_0x11b67d(0x208),'LhbEP':function(_0x2240be,_0x14e80f,_0x127937,_0x1476d3,_0x3f4f76){return _0x2240be(_0x14e80f,_0x127937,_0x1476d3,_0x3f4f76);}};try{if(_0x1bab40[_0x11b67d(0x19a)](_0x4179eb,_0x1bab40['cywRo'])){const _0x1c494a=await _0x2e038f[_0x11b67d(0x1d1)],_0x305574=_0x2e038f[_0x11b67d(0x214)]['id'],_0x4277fe=_0x2e038f['test'];logger[_0x11b67d(0x222)](_0x11b67d(0x18a)+_0x305574);const _0x445275=_0x48ad17[_0x11b67d(0x232)]()[_0x11b67d(0x1a4)](_0x305574)[TestFrameworkConstants[_0x11b67d(0x226)]];await _0x1bab40[_0x11b67d(0x17f)](sendTraceZip,_0x1c494a,_0x445275);const {steps:_0x1f4ff2,logs:_0xce961e}=_0x1bab40[_0x11b67d(0x210)](getStepsAndLogs,_0x1c494a['steps'],_0x48ad17[_0x11b67d(0x232)]()[_0x11b67d(0x1a4)](_0x305574)[TestFrameworkConstants[_0x11b67d(0x226)]],_0x1bab40[_0x11b67d(0x1dc)]),_0x12a5d4=_0x1bab40[_0x11b67d(0x1b8)](getScreenshots,_0x1c494a,_0x48ad17[_0x11b67d(0x232)]()['get'](_0x305574)[TestFrameworkConstants['KEY_TEST_UUID']]),{_:_0x5cf7af,logs:_0x408da4}=_0x1bab40[_0x11b67d(0x203)](getFailureData,_0x1c494a[_0x11b67d(0x209)],{'test_run_uuid':_0x48ad17[_0x11b67d(0x232)]()[_0x11b67d(0x1a4)](_0x305574)[TestFrameworkConstants[_0x11b67d(0x226)]]}),_0x406ba4=TestInfo[_0x11b67d(0x1c7)](_0x305574)[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{},_0x5ef5e6=_0x1bab40[_0x11b67d(0x213)](getMediaArtifactsLogs,_0x406ba4,_0x48ad17['getAllData']()[_0x11b67d(0x1a4)](_0x305574)[TestFrameworkConstants[_0x11b67d(0x226)]]),_0x19f170=_0x48ad17[_0x11b67d(0x232)]()[_0x11b67d(0x1a4)](_0x305574),{[TestFrameworkConstants[_0x11b67d(0x22a)]]:_0x5c9bb0='',[TestFrameworkConstants[_0x11b67d(0x1a7)]]:_0x2b2b36=''}=_0x19f170,_0x24b12f={'platformIndex':'0','logs':[..._0xce961e||[],..._0x12a5d4||[],..._0x408da4||[],..._0x5ef5e6||[]],'testFrameworkName':_0x5c9bb0,'testFrameworkVersion':_0x2b2b36,'testFrameworkState':_0x13555a[_0x11b67d(0x1c6)]()[_0x11b67d(0x175)]('.')[0x1]};_0x1bab40[_0x11b67d(0x20f)](updatePayloadForTraceLogs,_0x24b12f,_0x2e038f,_0x305574,_0x48ad17),logger[_0x11b67d(0x222)](_0x11b67d(0x1ca)+_0x305574+_0x11b67d(0x1ea)+util[_0x11b67d(0x1d5)](_0x24b12f));const _0x4e00cc=await GrpcClient[_0x11b67d(0x215)]()[_0x11b67d(0x224)](_0x24b12f);}else{const {steps:_0x231a65,logs:_0x13db82}=_0x1bab40['KEIsJ'](getStepsAndLogs,_0x2e038f['step'][_0x11b67d(0x18f)],_0x777522,_0x1bab40[_0x11b67d(0x190)]),_0x4b104e=_0x2e038f[_0x11b67d(0x214)]['id'];logger[_0x11b67d(0x222)]('sendLogCreatedEvent:\x20testId='+_0x4b104e);const _0x28c46c=_0x48ad17[_0x11b67d(0x232)]()[_0x11b67d(0x1a4)](_0x4b104e),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x154d16='',[TestFrameworkConstants[_0x11b67d(0x1a7)]]:_0x4afc28=''}=_0x28c46c,_0x30b66b={'platformIndex':'0','logs':_0x13db82,'testFrameworkName':_0x154d16,'testFrameworkVersion':_0x4afc28,'testFrameworkState':_0x13555a[_0x11b67d(0x1c6)]()[_0x11b67d(0x175)]('.')[0x1]};_0x1bab40[_0x11b67d(0x1d0)](updatePayloadForTraceLogs,_0x30b66b,_0x2e038f,_0x4b104e,_0x48ad17),logger[_0x11b67d(0x222)](_0x11b67d(0x1ca)+_0x4b104e+_0x11b67d(0x1ea)+util[_0x11b67d(0x1d5)](_0x30b66b));const _0x59ede6=await GrpcClient[_0x11b67d(0x215)]()[_0x11b67d(0x224)](_0x30b66b);}}catch(_0xb9de9){logger[_0x11b67d(0x1b0)](_0x11b67d(0x196)+util[_0x11b67d(0x188)](_0xb9de9));}}}module[a65_0x2b1191(0x219)]=PlaywrightTestFramework;