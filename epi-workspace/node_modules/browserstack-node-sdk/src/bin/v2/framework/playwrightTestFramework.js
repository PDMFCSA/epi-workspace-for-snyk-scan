const a67_0x446ec9=a67_0x469a;function a67_0x22ab(){const _0x428ebf=['error','description','pWHIC','2930soKcMB','bjkIp','KEY_TEST_ID','KEY_HOOK_FAILURE_TYPE','Expected\x20to\x20fail,\x20but\x20passed.','PzzUW','startTime','KEY_HOOK_RESULT','getRef','KEY_TEST_FAILURE_REASON','trackPlaywrightInstance:\x20saved\x20instance\x20contextId=','logCreatedEvent','phHCs','basename','Error\x20processing\x20direct\x20trace\x20file\x20','ZAgvI','JeLoz','KEY_TEST_ATTACHMENTS','step','skipped','length','setTrackedInstance','../../../helpers/helper.js','debug','KEY_TEST_SCOPE','trackEvent:\x20Exception\x20in\x20event\x20tracking,\x20testFrameworkState=%s\x20hookState=%s\x20argsLength=%s,\x20exception=%s','KEY_HOOKS_STARTED','YrHmg','./testFramework','map','CwdRI','vtuBs','KEY_TEST_LOGS','zFUWw','NONE','testUId','steps','yLLnm','KEY_HOOK_FAILURE_REASON','KEY_CUSTOM_TAGS','getId','XJEyk','KEY_TEST_RESULT_AT','KEY_TEST_RERUN_NAME','err','filePath','TEST_ATTACHMENT','instance','\x20hookState=','JbDoz','statSync','size','ikEwU','field_type','errors','get','KEY_HOOK_LAST_FINISHED','results','trackPlaywrightInstance','KEY_TEST_FILE_PATH','5686820vcTqXQ','Zyzgi','\x20batch\x20','KEY_TEST_UUID','slice','ddpAD','wrfbf','sendLogCreatedEvent\x20for\x20testId:\x20','2598wKXFZm','getTime','values','../state/testFrameworkState.js','sendLogCreatedEvent','\x20from\x20TestDetails:\x20','../instances/testFrameworkInstance.js','KEY_HOOK_LAST_STARTED','path','ceil','util','dZxAK','vyxuP','toISOString','Ghqfx','../../../helpers/classLogger.js','\x20response=','trackEvent\x20loading\x20testResults\x20for\x20testId:\x20','multi_dropdown','TEST','DEFAULT_TEST_RESULT','getAllData','858752ZnoPVb','sendLogCreatedEvent:\x20testId=','uuid','6994890jFVjse','exports','runHooks','AnSzI','BKTPT','parsePlaywrightTestResult','eixth','PRE','aRUkB','35477160jjkwUo','paonm','Error\x20processing\x20trace\x20file\x20',',\x20state=','format','../TestInfo.js','jWiDY','parsePlaywrightTest','test','KEY_TEST_RESULT','passed','\x20instance=','aLvcG','POST','failed','KEY_AUTOMATE_SESSION_NAME','toString','\x20payload=','concat','trackPlaywrightInstance:\x20created\x20instance\x20for\x20target=','getTestFrameworks','KEY_HOOKS_FINISHED','SqeIM','trackEvent:\x20found\x20instance,\x20testFrameworkState=','TQsXj','split','../cliUtils.js','../../../helpers/test-observability/utils','filter','trackEvent\x20loading\x20testData\x20for\x20testId:\x20','trackEvent:\x20loaded\x20testData\x20for\x20testId:\x20','getTestFrameworksVersions','some','title','XIoQJ','Hook\x20List\x20in\x20Post\x20','KEY_TEST_FRAMEWORK_NAME','addMultipleEntries','trackHookEvent','trackEvent','INIT_TEST','push','LeITo','SURId','abBiC','createContext','Hook\x20Started\x20in\x20PRE\x20key\x20=\x20','forEach','stack','info','frgZQ','hook','KEY_HOOK_FAILURE','KEY_TEST_NAME','LZCIV','DEFAULT_HOOK_RESULT','file_name','sMUCT','../../playwright/reporter/pwUtils','../state/hookState.js','testId','cuuPD','KEY_HOOK_ID','attachments','Iogzx','resolveInstance','fNsVZ','parsePlaywrightTestResult:\x20testId=','nZNeX','kXSiw','../../../../src/helpers/helper','KEY_LOGS','KiWlg','ryycs','Bqccp','631444YgqFaS','MpgCB','KEY_TEST_FRAMEWORK_VERSION','RHjJX','jCVuQ','matchHookRegex','zbwuW','KEY_TEST_LOCATION','bWeTt','getTrackedInstance','status','inspect','PlaywrightTestFramework','trim','EHbLC','PxnXM','\x20testHookState=','getTestDetails','duration','BRJRW','./constants/testFrameworkConstants.js','4415358xszYaF','KEY_TEST_STARTED_AT','setTestDetails','\x20and\x20args\x20=\x20','getInstance','\x20\x20and\x20args\x20=\x20','result','../../utils/constants','pop','message','dddIw'];a67_0x22ab=function(){return _0x428ebf;};return a67_0x22ab();}(function(_0x4845a5,_0x32a5e5){const _0x197ff0=a67_0x469a,_0x54f95f=_0x4845a5();while(!![]){try{const _0x5eb7fb=-parseInt(_0x197ff0(0x1f4))/0x1+parseInt(_0x197ff0(0x19a))/0x2*(-parseInt(_0x197ff0(0x1de))/0x3)+-parseInt(_0x197ff0(0x24b))/0x4+-parseInt(_0x197ff0(0x1d6))/0x5+parseInt(_0x197ff0(0x260))/0x6+-parseInt(_0x197ff0(0x1f7))/0x7+parseInt(_0x197ff0(0x200))/0x8;if(_0x5eb7fb===_0x32a5e5)break;else _0x54f95f['push'](_0x54f95f['shift']());}catch(_0x527216){_0x54f95f['push'](_0x54f95f['shift']());}}}(a67_0x22ab,0xb6c39));function a67_0x469a(_0x59ab40,_0x3cc0a6){const _0x22ab55=a67_0x22ab();return a67_0x469a=function(_0x469a0d,_0x330186){_0x469a0d=_0x469a0d-0x19a;let _0x16beda=_0x22ab55[_0x469a0d];return _0x16beda;},a67_0x469a(_0x59ab40,_0x3cc0a6);}const TestFramework=require(a67_0x446ec9(0x1b6)),TestFrameworkState=require(a67_0x446ec9(0x1e1)),HookState=require(a67_0x446ec9(0x23b)),{createClassLogger}=require(a67_0x446ec9(0x1ed)),TestFrameworkInstance=require(a67_0x446ec9(0x1e4)),CLIUtils=require(a67_0x446ec9(0x21a)),TrackedInstance=require('../instances/trackedInstance.js'),TestFrameworkConstants=require(a67_0x446ec9(0x25f)),logger=createClassLogger(a67_0x446ec9(0x257)),{v4:uuidv4}=require(a67_0x446ec9(0x1f6)),util=require(a67_0x446ec9(0x1e8)),{getPlaywrightSessionName,getPlaywrightTestFilePath,getPlaywrightTestId,getPlaywrightTestTitle,getPlaywrightTestLocation,getPlaywrightTestTags,getPlaywrightTestCode,getPlaywrightTestScope,getPlaywrightTestScopes,getStepsAndLogs,getScreenshots,getVideos,getPlaywrightCustomRerunParam,getMediaArtifactsLogs,getManualUploadLogs,updatePayloadForTraceLogs}=require(a67_0x446ec9(0x1b0)),TestInfo=require(a67_0x446ec9(0x205)),GrpcClient=require('../grpcClient'),{removeAnsiColors,getFailureType,failureData}=require(a67_0x446ec9(0x21b)),{getFailureData,getTestTags}=require(a67_0x446ec9(0x23a)),{findNestedKey,sendTraceZip,validateFilePath}=require(a67_0x446ec9(0x23a)),path=require(a67_0x446ec9(0x1e6)),fs=require('fs'),helper=require(a67_0x446ec9(0x246)),{PLAYWRIGHT_TRACE_LOGS}=require(a67_0x446ec9(0x267));class PlaywrightTestFramework extends TestFramework{constructor(_0x294e03,_0x15aa8f,_0x53b362){super(_0x294e03,_0x15aa8f,_0x53b362);}async[a67_0x446ec9(0x227)](_0x379b9e,_0x51ebe2,_0x586bd5={}){const _0x4dc9af=a67_0x446ec9,_0x4213d2={};_0x4213d2[_0x4dc9af(0x1d7)]=function(_0x4c81e2,_0x813167){return _0x4c81e2===_0x813167;},_0x4213d2['yLLnm']=_0x4dc9af(0x208),_0x4213d2[_0x4dc9af(0x249)]=_0x4dc9af(0x1b3);const _0xd9012d=_0x4213d2;super[_0x4dc9af(0x227)](_0x379b9e,_0x51ebe2,_0x586bd5);_0xd9012d[_0x4dc9af(0x1d7)](_0x379b9e,TestFrameworkState['TEST_SCREENSHOT'])&&TestInfo[_0x4dc9af(0x262)](_0x586bd5[_0x4dc9af(0x208)][_0x4dc9af(0x23c)],_0x586bd5[_0x4dc9af(0x266)],!![]);const _0x109ab5=this[_0x4dc9af(0x241)](_0x379b9e,_0x51ebe2,_0x586bd5);if(!_0x109ab5)return;logger[_0x4dc9af(0x1b1)](_0x4dc9af(0x217)+_0x379b9e+_0x4dc9af(0x1ca)+_0x51ebe2+'\x20instanceId='+_0x109ab5['getRef']());try{if(_0xd9012d[_0x4dc9af(0x1d7)](_0x51ebe2,HookState[_0x4dc9af(0x1fe)])&&_0xd9012d[_0x4dc9af(0x1d7)](_0x379b9e,TestFrameworkState['TEST'])){const _0x1d6f32=_0x586bd5['test'];logger[_0x4dc9af(0x1b1)](_0x4dc9af(0x21d)+_0x1d6f32['id']+'}');const _0x3c3bca=TestInfo['getTestUUID'](_0x1d6f32['id']);_0x109ab5['addMultipleEntries'](this['parsePlaywrightTest'](_0x3c3bca,_0x1d6f32)),logger[_0x4dc9af(0x1b1)](_0x4dc9af(0x21e)+_0x1d6f32['id']+',\x20testFrameworkState='+_0x379b9e+_0x4dc9af(0x25b)+_0x51ebe2+_0x4dc9af(0x20b)+_0x109ab5[_0x4dc9af(0x1a2)]());}if(_0xd9012d[_0x4dc9af(0x1d7)](_0x51ebe2,HookState['POST'])&&_0xd9012d[_0x4dc9af(0x1d7)](_0x379b9e,TestFrameworkState[_0x4dc9af(0x1f1)])){const _0x40b2c8=_0x586bd5[_0x4dc9af(0x208)],_0x58d383=_0x586bd5[_0x4dc9af(0x266)];logger[_0x4dc9af(0x1b1)](_0x4dc9af(0x1ef)+_0x40b2c8['id']),_0x109ab5[_0x4dc9af(0x225)](this['parsePlaywrightTestResult'](_0x40b2c8['id'],_0x58d383,_0x40b2c8)),await this['sendLogCreatedEvent'](_0x109ab5,_0x379b9e,_0x51ebe2,_0xd9012d[_0x4dc9af(0x1bf)],_0x586bd5);}if(CLIUtils[_0x4dc9af(0x250)](_0x379b9e[_0x4dc9af(0x210)]()[_0x4dc9af(0x219)]('.')[0x1])){const _0x57ed7e=await this[_0x4dc9af(0x226)](_0x109ab5,_0x379b9e,_0x51ebe2,_0x586bd5);_0x109ab5['addMultipleEntries'](_0x57ed7e);}}catch(_0x4016b4){logger[_0x4dc9af(0x26b)](util[_0x4dc9af(0x204)](_0xd9012d['ryycs'],_0x379b9e,_0x51ebe2,_0x586bd5[_0x4dc9af(0x1ae)],_0x4016b4));}_0x586bd5[_0x4dc9af(0x1c9)]=_0x109ab5,await this[_0x4dc9af(0x1f9)](_0x109ab5,_0x379b9e,_0x51ebe2,_0x586bd5);}[a67_0x446ec9(0x241)](_0x19011f,_0x19f9f1,_0x52864a={}){const _0x18b3ee=a67_0x446ec9,_0x3eff03={};_0x3eff03[_0x18b3ee(0x19b)]=function(_0x144d82,_0x4b3d83){return _0x144d82===_0x4b3d83;};const _0x310f22=_0x3eff03;let _0x246202=null;return(_0x310f22[_0x18b3ee(0x19b)](_0x19011f,TestFrameworkState[_0x18b3ee(0x228)])||_0x310f22[_0x18b3ee(0x19b)](_0x19011f,TestFrameworkState[_0x18b3ee(0x1bc)]))&&this[_0x18b3ee(0x1d4)](_0x19011f,_0x52864a),_0x246202=TestFramework[_0x18b3ee(0x254)](),_0x246202;}[a67_0x446ec9(0x1d4)](_0x692ecd,_0x242e00){const _0x4ffa3d=a67_0x446ec9,_0x3650b3=CLIUtils['getCurrentInstanceName'](),_0x4659b0=TrackedInstance[_0x4ffa3d(0x22d)](_0x3650b3);let _0x462a4c=null;logger[_0x4ffa3d(0x231)](_0x4ffa3d(0x213)+_0x3650b3+_0x4ffa3d(0x203)+_0x692ecd),_0x462a4c=new TestFrameworkInstance(_0x4659b0,this[_0x4ffa3d(0x214)](),this[_0x4ffa3d(0x21f)](),_0x692ecd,HookState[_0x4ffa3d(0x1bc)]),TestFramework[_0x4ffa3d(0x1af)](_0x4659b0,_0x462a4c),logger[_0x4ffa3d(0x231)](_0x4ffa3d(0x1a4)+_0x4659b0[_0x4ffa3d(0x1c2)]()+'\x20target='+_0x3650b3);}[a67_0x446ec9(0x207)](_0x4e6dd1,_0x25f874){const _0x4f6442=a67_0x446ec9,_0x19310f={'nZNeX':function(_0x4dd0ce,_0x44da95){return _0x4dd0ce(_0x44da95);},'XIoQJ':function(_0x1533fa,_0xec8fcb){return _0x1533fa(_0xec8fcb);},'kXSiw':function(_0x49e198,_0x4df356){return _0x49e198(_0x4df356);},'XJEyk':function(_0x10a133,_0x2e7587){return _0x10a133(_0x2e7587);},'pWHIC':function(_0x2702a6,_0x7a0c69){return _0x2702a6(_0x7a0c69);}},_0xf5e846=_0x19310f[_0x4f6442(0x244)](getPlaywrightTestId,_0x25f874),_0x5c7087=_0x19310f['nZNeX'](getPlaywrightTestTitle,_0x25f874),_0x1747c8=_0x19310f['XIoQJ'](getTestTags,_0x25f874),_0x50dea5=_0x19310f[_0x4f6442(0x222)](getPlaywrightTestCode,_0x25f874),_0x2d3bad=_0x19310f[_0x4f6442(0x245)](getPlaywrightTestFilePath,_0x25f874),_0x592b9d=_0x2d3bad+':'+_0x19310f[_0x4f6442(0x245)](getPlaywrightTestLocation,_0x25f874),_0x210c9b=_0x19310f[_0x4f6442(0x1c3)](getPlaywrightTestScope,_0x25f874),_0x19bb3e=_0x19310f[_0x4f6442(0x244)](getPlaywrightTestScopes,_0x25f874),_0x89d764=_0x19310f[_0x4f6442(0x245)](getPlaywrightSessionName,_0x25f874),_0x24217e=this[_0x4f6442(0x214)]()[0x0],_0x1bdd37={[TestFrameworkConstants[_0x4f6442(0x224)]]:_0x24217e,[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]:this[_0x4f6442(0x21f)]()[_0x24217e],[TestFrameworkConstants[_0x4f6442(0x1ba)]]:[],[TestFrameworkConstants[_0x4f6442(0x215)]]:{},[TestFrameworkConstants[_0x4f6442(0x1b4)]]:{},[TestFrameworkConstants[_0x4f6442(0x1d9)]]:_0x4e6dd1,[TestFrameworkConstants[_0x4f6442(0x209)]]:TestFrameworkConstants[_0x4f6442(0x1f2)],[TestFrameworkConstants[_0x4f6442(0x20f)]]:_0x89d764,[TestFrameworkConstants['KEY_TEST_FILE_PATH']]:_0x2d3bad,[TestFrameworkConstants[_0x4f6442(0x19c)]]:_0xf5e846,[TestFrameworkConstants[_0x4f6442(0x235)]]:_0x5c7087,[TestFrameworkConstants['KEY_TEST_LOCATION']]:_0x592b9d,[TestFrameworkConstants['KEY_TEST_CODE']]:_0x50dea5,[TestFrameworkConstants['KEY_TEST_TAGS']]:_0x1747c8,[TestFrameworkConstants[_0x4f6442(0x261)]]:_0x25f874[_0x4f6442(0x1d3)][0x0][_0x4f6442(0x1a0)],[TestFrameworkConstants[_0x4f6442(0x1b2)]]:_0x210c9b,[TestFrameworkConstants['KEY_TEST_SCOPES']]:_0x19bb3e,[TestFrameworkConstants[_0x4f6442(0x1c5)]]:_0x19310f[_0x4f6442(0x26d)](getPlaywrightCustomRerunParam,_0x25f874)};TestInfo[_0x4f6442(0x262)](_0x25f874['id'],_0x1bdd37);const _0x2f3065={};return _0x2f3065[_0xf5e846]=_0x1bdd37,_0x2f3065;}[a67_0x446ec9(0x1fc)](_0x1bf54f,_0x3e1c42,_0x3801ce){const _0x50928b=a67_0x446ec9,_0x147cba={'paonm':function(_0x319de6,_0x3b15e0){return _0x319de6(_0x3b15e0);},'dZxAK':_0x50928b(0x1c8),'LeITo':function(_0x169ca2,_0x1928c1){return _0x169ca2===_0x1928c1;},'KiWlg':function(_0x3cd07b,_0x2b454d){return _0x3cd07b===_0x2b454d;},'PzzUW':function(_0x424d34,_0x3f6951){return _0x424d34(_0x3f6951);},'ZAgvI':'No\x20reason\x20provided','RHjJX':_0x50928b(0x1f0),'GivUY':function(_0x57e52f,_0x121978){return _0x57e52f(_0x121978);},'EHbLC':function(_0x32ab31,_0x52b22c){return _0x32ab31+_0x52b22c;},'Iogzx':_0x50928b(0x1ad),'aRUkB':'passed','sMUCT':function(_0x20e132,_0x415db8){return _0x20e132===_0x415db8;},'vyxuP':function(_0xd7be84,_0x9e0e89){return _0xd7be84===_0x9e0e89;},'SURId':_0x50928b(0x20e),'NgrjP':'timedOut','AnSzI':function(_0x1f58a6,_0x5e6332){return _0x1f58a6===_0x5e6332;},'jCVuQ':_0x50928b(0x19e),'JbDoz':function(_0x3e7e1b,_0x2dc59a,_0xef652e){return _0x3e7e1b(_0x2dc59a,_0xef652e);},'ddpAD':function(_0x1b9ab7,_0x332c5f){return _0x1b9ab7||_0x332c5f;},'SqeIM':function(_0x595614,_0x23a841,_0x3eb189){return _0x595614(_0x23a841,_0x3eb189);},'ikEwU':_0x50928b(0x1e6),'zbwuW':function(_0x191450,_0x1c539a){return _0x191450>_0x1c539a;}};logger[_0x50928b(0x1b1)](_0x50928b(0x243)+_0x1bf54f);const _0x2fc0b5=new Date(_0x3e1c42[_0x50928b(0x1a0)]),_0x3e883f=_0x3e1c42[_0x50928b(0x25d)],_0x14479d=new Date(_0x147cba[_0x50928b(0x259)](_0x2fc0b5[_0x50928b(0x1df)](),_0x3e883f)),_0x991dbc=_0x3e1c42['status'],_0x8e08c9=TestInfo[_0x50928b(0x25c)](_0x1bf54f)[TestFrameworkConstants['KEY_CUSTOM_TAGS']]||{};let _0x34ad87=_0x991dbc;if(_0x147cba[_0x50928b(0x22a)](_0x3e1c42[_0x50928b(0x255)],_0x3801ce['expectedStatus']))_0x34ad87=_0x147cba[_0x50928b(0x248)](_0x3e1c42[_0x50928b(0x255)],_0x147cba['Iogzx'])?_0x147cba[_0x50928b(0x240)]:_0x147cba[_0x50928b(0x1ff)];else{(_0x147cba[_0x50928b(0x239)](_0x34ad87,_0x147cba['aRUkB'])||_0x147cba['vyxuP'](_0x34ad87,_0x147cba[_0x50928b(0x22b)])||_0x147cba[_0x50928b(0x1ea)](_0x34ad87,_0x147cba['NgrjP']))&&(_0x34ad87=_0x147cba[_0x50928b(0x22b)]);if(_0x147cba[_0x50928b(0x1fa)](_0x3e1c42[_0x50928b(0x255)],_0x147cba[_0x50928b(0x1ff)])&&_0x147cba['LeITo'](_0x3801ce['expectedStatus'],_0x147cba[_0x50928b(0x22b)])){const _0x2ad389={};_0x2ad389[_0x50928b(0x269)]=_0x147cba['jCVuQ'],_0x2ad389[_0x50928b(0x230)]=_0x147cba[_0x50928b(0x24f)],_0x3e1c42[_0x50928b(0x26b)]=_0x2ad389,_0x3e1c42[_0x50928b(0x1d0)]=[_0x3e1c42[_0x50928b(0x26b)]];}}const {failureData:_0x10d026,logs:_0x5d36b1}=_0x147cba[_0x50928b(0x1cb)](getFailureData,_0x3e1c42?.[_0x50928b(0x1d0)],{}),_0x269448={[TestFrameworkConstants['KEY_TEST_FAILURE']]:_0x147cba[_0x50928b(0x1db)](_0x10d026,null),[TestFrameworkConstants['KEY_TEST_FAILURE_TYPE']]:_0x3e1c42?.[_0x50928b(0x26b)]&&_0x147cba[_0x50928b(0x201)](getFailureType,_0x3e1c42[_0x50928b(0x26b)][_0x50928b(0x269)]),[TestFrameworkConstants[_0x50928b(0x1a3)]]:_0x3e1c42?.[_0x50928b(0x26b)]&&_0x147cba[_0x50928b(0x19f)](removeAnsiColors,_0x3e1c42[_0x50928b(0x26b)][_0x50928b(0x269)]),[TestFrameworkConstants[_0x50928b(0x247)]]:[],[TestFrameworkConstants[_0x50928b(0x209)]]:_0x34ad87,[TestFrameworkConstants['KEY_TEST_ENDED_AT']]:_0x14479d[_0x50928b(0x1eb)](),[TestFrameworkConstants[_0x50928b(0x1c4)]]:new Date()['toISOString'](),[TestFrameworkConstants[_0x50928b(0x1c1)]]:_0x8e08c9},_0x21dcc8={};_0x21dcc8['test']=_0x3801ce;const _0x187a1e=this[_0x50928b(0x241)](TestFrameworkState[_0x50928b(0x1f1)],HookState[_0x50928b(0x20d)],_0x21dcc8),_0x540f74=_0x187a1e[_0x50928b(0x1f3)]()[_0x50928b(0x1d1)](_0x1bf54f)[TestFrameworkConstants['KEY_TEST_UUID']],_0x525d15=[],_0x4b30d7=_0x147cba[_0x50928b(0x216)](findNestedKey,_0x3e1c42,_0x147cba[_0x50928b(0x1ce)]);if(_0x4b30d7&&_0x147cba[_0x50928b(0x19f)](validateFilePath,_0x4b30d7))try{_0x525d15[_0x50928b(0x229)]({'kind':_0x147cba[_0x50928b(0x1e9)],'timestamp':new Date()[_0x50928b(0x1eb)](),'test_run_uuid':_0x540f74,'file_name':path[_0x50928b(0x1a7)](_0x4b30d7),'file_size':fs[_0x50928b(0x1cc)](_0x4b30d7)[_0x50928b(0x1cd)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x122bc5){logger[_0x50928b(0x26b)](_0x50928b(0x1a8)+_0x4b30d7+':\x20'+_0x122bc5[_0x50928b(0x269)]);}const _0xf501c6=TestInfo['getTraceFilePaths'](),_0x506430=_0xf501c6[_0x50928b(0x21c)](_0xaf2f16=>_0xaf2f16[_0x50928b(0x1bd)]===_0x540f74);_0x506430[_0x50928b(0x22f)](_0xc4a5b4=>{const _0x3be713=_0x50928b;if(_0xc4a5b4[_0x3be713(0x1c7)]&&_0x147cba[_0x3be713(0x201)](validateFilePath,_0xc4a5b4[_0x3be713(0x1c7)])&&!_0x525d15[_0x3be713(0x220)](_0x4ed322=>_0x4ed322[_0x3be713(0x238)]===path[_0x3be713(0x1a7)](_0xc4a5b4[_0x3be713(0x1c7)])))try{_0x525d15['push']({'kind':_0x147cba[_0x3be713(0x1e9)],'timestamp':new Date()[_0x3be713(0x1eb)](),'test_run_uuid':_0x540f74,'file_name':path['basename'](_0xc4a5b4[_0x3be713(0x1c7)]),'file_size':fs['statSync'](_0xc4a5b4[_0x3be713(0x1c7)])[_0x3be713(0x1cd)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x4655ce){logger[_0x3be713(0x26b)](_0x3be713(0x202)+_0xc4a5b4[_0x3be713(0x1c7)]+_0x3be713(0x1e3)+_0x4655ce[_0x3be713(0x269)]);}});if(_0x147cba[_0x50928b(0x251)](_0x525d15['length'],0x0)){const _0x332c23=_0x269448[TestFrameworkConstants[_0x50928b(0x247)]]||[];_0x269448[TestFrameworkConstants['KEY_LOGS']]=[..._0x332c23,..._0x525d15];}const _0x2802ff=TestInfo['getTestDetails'](_0x1bf54f)[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{},_0x18d16e=_0x147cba[_0x50928b(0x216)](getManualUploadLogs,_0x2802ff,_0x187a1e[_0x50928b(0x1f3)]()[_0x50928b(0x1d1)](_0x1bf54f)[TestFrameworkConstants[_0x50928b(0x1d9)]]);if(_0x147cba[_0x50928b(0x251)](_0x18d16e[_0x50928b(0x1ae)],0x0)){const _0x403ea1=_0x269448[TestFrameworkConstants[_0x50928b(0x247)]]||[];_0x269448[TestFrameworkConstants[_0x50928b(0x247)]]=[..._0x403ea1,..._0x18d16e];}const _0x2d4ea9=_0x3801ce['annotations']||[],_0xda2149=_0x269448[TestFrameworkConstants[_0x50928b(0x1c1)]]||{};_0x2d4ea9[_0x50928b(0x22f)](_0x4e3ead=>{const _0x135954=_0x50928b,{type:_0x40d6c3}=_0x4e3ead;let _0x4e07d9=_0x4e3ead[_0x135954(0x26c)];if(!_0x40d6c3)return;(_0x147cba[_0x135954(0x22a)](_0x4e07d9,undefined)||_0x147cba[_0x135954(0x22a)](_0x4e07d9,null)||_0x147cba[_0x135954(0x248)](_0x147cba[_0x135954(0x19f)](String,_0x4e07d9)[_0x135954(0x258)](),''))&&(_0x4e07d9=_0x147cba[_0x135954(0x1a9)]);if(!_0xda2149[_0x40d6c3]){const _0x5f9e7b={};_0x5f9e7b[_0x135954(0x1cf)]=_0x147cba[_0x135954(0x24e)],_0x5f9e7b[_0x135954(0x1e0)]=[],_0xda2149[_0x40d6c3]=_0x5f9e7b;}else!_0xda2149[_0x40d6c3]['field_type']&&(_0xda2149[_0x40d6c3][_0x135954(0x1cf)]=_0x147cba['RHjJX']),!Array['isArray'](_0xda2149[_0x40d6c3][_0x135954(0x1e0)])&&(_0xda2149[_0x40d6c3][_0x135954(0x1e0)]=[]);const _0x2f7142=_0x147cba['GivUY'](String,_0x4e07d9)[_0x135954(0x219)](',')[_0x135954(0x1b7)](_0x8d46f3=>_0x8d46f3[_0x135954(0x258)]());_0xda2149[_0x40d6c3][_0x135954(0x1e0)]=[...new Set([..._0xda2149[_0x40d6c3][_0x135954(0x1e0)],..._0x2f7142])];}),_0x269448[TestFrameworkConstants[_0x50928b(0x1c1)]]=_0xda2149,TestInfo[_0x50928b(0x262)](_0x1bf54f,_0x269448);const _0x1163ff={};return _0x1163ff[_0x1bf54f]=_0x269448,_0x1163ff;}async['trackHookEvent'](_0xb90f3e,_0x4e01d3,_0x1132e7,_0x3b3cae){const _0x18f50a=a67_0x446ec9,_0x527c18={'BRJRW':function(_0x23cab7,_0x526e8f){return _0x23cab7 in _0x526e8f;},'YrHmg':function(_0x2b0dc8,_0x32603f){return _0x2b0dc8 in _0x32603f;},'JeLoz':function(_0x18b86e,_0x17c7ab){return _0x18b86e(_0x17c7ab);},'zFUWw':function(_0x48785f,_0x149296){return _0x48785f===_0x149296;},'frgZQ':function(_0x57bc39){return _0x57bc39();},'abBiC':function(_0x194e59,_0xc99726){return _0x194e59>_0xc99726;},'ZkUyS':function(_0x178984,_0x1ba2b0,_0x575e23){return _0x178984(_0x1ba2b0,_0x575e23);},'dddIw':_0x18f50a(0x1c6),'jWiDY':_0x18f50a(0x20e),'CwdRI':_0x18f50a(0x20a),'MpgCB':function(_0x5beb0f,_0x1f1d9f){return _0x5beb0f!==_0x1f1d9f;},'TQsXj':function(_0xdf28d4,_0x2d2be5){return _0xdf28d4+_0x2d2be5;},'fNsVZ':_0x18f50a(0x233)},_0x547fa3=_0x3b3cae['test'],_0x3eef16=_0x3b3cae[_0x18f50a(0x1ac)],_0x12fca8=_0x3b3cae[_0x18f50a(0x208)]['id'],_0x46b546=_0x4e01d3[_0x18f50a(0x210)]()[_0x18f50a(0x219)]('.')[0x1];let _0x362d79=_0xb90f3e[_0x18f50a(0x1f3)]()[_0x18f50a(0x1d1)](_0x12fca8)[TestFrameworkConstants[_0x18f50a(0x1b4)]];!_0x362d79&&(_0x362d79={});!_0x527c18[_0x18f50a(0x25e)](_0x46b546,_0x362d79)&&(_0x362d79[_0x46b546]=[]);let _0x33fdf6=_0xb90f3e[_0x18f50a(0x1f3)]()[_0x18f50a(0x1d1)](_0x12fca8)[TestFrameworkConstants[_0x18f50a(0x215)]];!_0x33fdf6&&(_0x33fdf6={});!_0x527c18[_0x18f50a(0x1b5)](_0x46b546,_0x33fdf6)&&(_0x33fdf6[_0x46b546]=[]);const _0x8b2f2f={[TestFrameworkConstants['KEY_HOOKS_STARTED']]:_0x362d79,[TestFrameworkConstants['KEY_HOOKS_FINISHED']]:_0x33fdf6},_0x577dca={};_0x577dca[_0x12fca8]=_0x8b2f2f;const _0x38b40d=_0x577dca,_0x32e4a4=_0x527c18['JeLoz'](getPlaywrightTestFilePath,_0x547fa3),_0x4549b4=_0x32e4a4+':'+_0x527c18[_0x18f50a(0x1aa)](getPlaywrightTestLocation,_0x547fa3),_0x5a6453=TestInfo[_0x18f50a(0x25c)](_0x12fca8)[TestFrameworkConstants[_0x18f50a(0x1c1)]]||{};if(_0x527c18[_0x18f50a(0x1bb)](_0x1132e7,HookState[_0x18f50a(0x1fe)])){const _0x199fcd={'key':_0x46b546,[TestFrameworkConstants[_0x18f50a(0x23e)]]:_0x527c18[_0x18f50a(0x232)](uuidv4),[TestFrameworkConstants['KEY_HOOK_RESULT']]:TestFrameworkConstants[_0x18f50a(0x237)],[TestFrameworkConstants['KEY_EVENT_STARTED_AT']]:_0x3eef16['startTime'],[TestFrameworkConstants['KEY_HOOK_LOGS']]:[],[TestFrameworkConstants['KEY_HOOK_NAME']]:_0x3eef16[_0x18f50a(0x221)],[TestFrameworkConstants[_0x18f50a(0x1d5)]]:_0x32e4a4,[TestFrameworkConstants[_0x18f50a(0x252)]]:_0x4549b4,[TestFrameworkConstants[_0x18f50a(0x1c1)]]:_0x5a6453};_0x362d79[_0x46b546][_0x18f50a(0x229)](_0x199fcd),_0x38b40d[_0x12fca8][TestFrameworkConstants[_0x18f50a(0x1e5)]]=_0x46b546,logger[_0x18f50a(0x1b1)](_0x18f50a(0x22e)+_0x46b546+'\x20&\x20hook\x20=\x20'+_0x199fcd+_0x18f50a(0x265)+_0x3b3cae);}else{if(_0x527c18[_0x18f50a(0x1bb)](_0x1132e7,HookState[_0x18f50a(0x20d)])){const _0xc8d38e=await _0x3b3cae[_0x18f50a(0x266)],_0x8b61c7=_0x362d79[_0x46b546]||[],_0x3740f1=_0x3b3cae['step'];logger['debug'](_0x18f50a(0x223)+_0x8b61c7+_0x18f50a(0x263)+_0x3b3cae);if(_0x527c18[_0x18f50a(0x22c)](_0x8b61c7['length'],0x0)){const _0x141077=_0x8b61c7[_0x18f50a(0x268)]();if(_0x3740f1[_0x18f50a(0x26b)]){const _0x394690=_0x527c18['ZkUyS'](failureData,_0x3740f1[_0x18f50a(0x26b)],_0x527c18[_0x18f50a(0x26a)]);_0x141077[TestFrameworkConstants[_0x18f50a(0x19d)]]=_0x527c18[_0x18f50a(0x1aa)](getFailureType,_0x3740f1?.[_0x18f50a(0x26b)][_0x18f50a(0x269)]),_0x141077[TestFrameworkConstants[_0x18f50a(0x1c0)]]=_0x527c18[_0x18f50a(0x1aa)](removeAnsiColors,_0x3740f1?.[_0x18f50a(0x26b)][_0x18f50a(0x269)]),_0x141077[TestFrameworkConstants[_0x18f50a(0x1a1)]]=_0x527c18[_0x18f50a(0x206)],_0x141077[TestFrameworkConstants[_0x18f50a(0x234)]]=_0x394690;}else _0x141077[TestFrameworkConstants[_0x18f50a(0x1a1)]]=_0x527c18[_0x18f50a(0x1b8)];_0x527c18[_0x18f50a(0x24c)](_0xc8d38e,TestFrameworkConstants[_0x18f50a(0x237)])&&(_0x141077[TestFrameworkConstants['KEY_HOOK_RESULT']]=!_0x3740f1[_0x18f50a(0x26b)]?_0x527c18[_0x18f50a(0x1b8)]:_0x527c18[_0x18f50a(0x206)]);const _0x334cac=new Date(_0x3740f1['startTime']),_0x319794=new Date(_0x527c18[_0x18f50a(0x218)](_0x334cac[_0x18f50a(0x1df)](),_0x3740f1[_0x18f50a(0x25d)]));_0x141077[TestFrameworkConstants['KEY_EVENT_ENDED_AT']]=_0x319794[_0x18f50a(0x1eb)](),_0x141077[TestFrameworkConstants['KEY_CUSTOM_TAGS']]=_0x5a6453;const _0x5424cf=_0x141077[TestFrameworkConstants[_0x18f50a(0x23e)]];await this['sendLogCreatedEvent'](_0xb90f3e,_0x4e01d3,_0x5424cf,_0x527c18[_0x18f50a(0x242)],_0x3b3cae),!_0x33fdf6[_0x46b546]&&(_0x33fdf6[_0x46b546]=[]),_0x33fdf6[_0x46b546][_0x18f50a(0x229)](_0x141077),_0x38b40d[_0x12fca8][TestFrameworkConstants[_0x18f50a(0x1d2)]]=_0x46b546;}}}return _0x38b40d;}async[a67_0x446ec9(0x1e2)](_0x50d2e5,_0x4f2754,_0x57e5d4,_0xd91dc1,_0x58d9c5){const _0x288d93=a67_0x446ec9,_0x498a53={'JyTue':function(_0x4a6c63,_0x3f5c45){return _0x4a6c63===_0x3f5c45;},'wrfbf':_0x288d93(0x208),'vtuBs':function(_0x4ba131,_0x413f00,_0x2c1c2e){return _0x4ba131(_0x413f00,_0x2c1c2e);},'eixth':_0x288d93(0x23f),'Bqccp':function(_0x516ae0,_0x4674db,_0x239475,_0x256e2f){return _0x516ae0(_0x4674db,_0x239475,_0x256e2f);},'Ghqfx':function(_0xa5c2ee,_0x2117e1,_0x48292f){return _0xa5c2ee(_0x2117e1,_0x48292f);},'fSerw':function(_0x1dedec,_0x3aeabd,_0x2e8805){return _0x1dedec(_0x3aeabd,_0x2e8805);},'aLvcG':function(_0x3dd070,_0x18ba82,_0x49eecf){return _0x3dd070(_0x18ba82,_0x49eecf);},'PPiVI':function(_0xd75f69,_0x393b74){return _0xd75f69/_0x393b74;},'QsqqT':function(_0xed3cbf,_0x2c488b){return _0xed3cbf<_0x2c488b;},'bWeTt':function(_0x3ffe5a,_0x4bfa3f){return _0x3ffe5a*_0x4bfa3f;},'BKTPT':function(_0x5afd0d,_0x125c8d){return _0x5afd0d+_0x125c8d;},'phHCs':function(_0x461e91,_0x4948e2,_0x22a45f,_0x52b54d,_0x170340){return _0x461e91(_0x4948e2,_0x22a45f,_0x52b54d,_0x170340);},'PxnXM':function(_0x27e1ac,_0x3eebcc){return _0x27e1ac+_0x3eebcc;},'KTkCK':function(_0x20838c,_0x554ac3){return _0x20838c+_0x554ac3;},'LZCIV':function(_0x185485,_0x2fce90,_0x10c86f,_0x5d5af0){return _0x185485(_0x2fce90,_0x10c86f,_0x5d5af0);},'cuuPD':_0x288d93(0x233)};try{if(_0x498a53['JyTue'](_0xd91dc1,_0x498a53[_0x288d93(0x1dc)])){const _0x5a3ed3=await _0x58d9c5[_0x288d93(0x266)],_0x10518c=_0x58d9c5[_0x288d93(0x208)]['id'],_0x2aa793=_0x58d9c5['test'];logger['debug'](_0x288d93(0x1f5)+_0x10518c+'\x20result='+util['inspect'](_0x5a3ed3));const _0x1938e6=_0x50d2e5[_0x288d93(0x1f3)]()[_0x288d93(0x1d1)](_0x10518c)[TestFrameworkConstants['KEY_TEST_UUID']];await _0x498a53[_0x288d93(0x1b9)](sendTraceZip,_0x5a3ed3,_0x1938e6);const _0x20384e=TestInfo[_0x288d93(0x25c)](_0x10518c)[_0x498a53[_0x288d93(0x1fd)]];if(_0x20384e){!_0x5a3ed3['attachments']&&(_0x5a3ed3[_0x288d93(0x23f)]=[]);Object['assign'](_0x5a3ed3[_0x288d93(0x23f)],_0x5a3ed3['attachments'][_0x288d93(0x212)](_0x20384e));const _0x426fa4=TestInfo['getTestDetails'](_0x10518c);delete _0x426fa4[_0x498a53[_0x288d93(0x1fd)]],TestInfo[_0x288d93(0x262)](_0x10518c,_0x426fa4);}const {steps:_0x4f8fe4,logs:_0x3927b0}=_0x498a53[_0x288d93(0x24a)](getStepsAndLogs,_0x5a3ed3[_0x288d93(0x1be)],_0x50d2e5[_0x288d93(0x1f3)]()[_0x288d93(0x1d1)](_0x10518c)[TestFrameworkConstants['KEY_TEST_UUID']],_0x498a53[_0x288d93(0x1dc)]),_0x28ef33=_0x498a53[_0x288d93(0x1ec)](getScreenshots,_0x5a3ed3,_0x50d2e5[_0x288d93(0x1f3)]()[_0x288d93(0x1d1)](_0x10518c)[TestFrameworkConstants[_0x288d93(0x1d9)]]),_0x1e334c=_0x498a53['fSerw'](getVideos,_0x5a3ed3,_0x50d2e5[_0x288d93(0x1f3)]()[_0x288d93(0x1d1)](_0x10518c)[TestFrameworkConstants[_0x288d93(0x1d9)]]),{_:_0x4fd823,logs:_0x111929}=_0x498a53[_0x288d93(0x1b9)](getFailureData,_0x5a3ed3[_0x288d93(0x1d0)],{'test_run_uuid':_0x50d2e5[_0x288d93(0x1f3)]()['get'](_0x10518c)[TestFrameworkConstants[_0x288d93(0x1d9)]]}),_0x4a3b19=TestInfo[_0x288d93(0x25c)](_0x10518c)[TestFrameworkConstants[_0x288d93(0x1ab)]]||{},_0x5ae02e=_0x498a53[_0x288d93(0x20c)](getMediaArtifactsLogs,_0x4a3b19,_0x50d2e5['getAllData']()['get'](_0x10518c)[TestFrameworkConstants[_0x288d93(0x1d9)]]),_0xb04a2=_0x50d2e5[_0x288d93(0x1f3)]()[_0x288d93(0x1d1)](_0x10518c),{[TestFrameworkConstants[_0x288d93(0x224)]]:_0x11891f='',[TestFrameworkConstants[_0x288d93(0x24d)]]:_0x1663be=''}=_0xb04a2,_0x4ecded=(_0x3927b0||[])[_0x288d93(0x212)](_0x28ef33||[])['concat'](_0x111929||[])[_0x288d93(0x212)](_0x1e334c||[])['concat'](_0x5ae02e||[]),_0x27255a=0x28,_0x56c2cf=Math[_0x288d93(0x1e7)](_0x498a53['PPiVI'](_0x4ecded['length'],_0x27255a));for(let _0x369788=0x0;_0x498a53['QsqqT'](_0x369788,_0x56c2cf);_0x369788++){const _0xdad363=_0x498a53[_0x288d93(0x253)](_0x369788,_0x27255a),_0x223f01=_0x498a53[_0x288d93(0x1fb)](_0xdad363,_0x27255a),_0x59356b=_0x4ecded[_0x288d93(0x1da)](_0xdad363,_0x223f01),_0x2d0f8b={'platformIndex':'0','logs':_0x59356b,'testFrameworkName':_0x11891f,'testFrameworkVersion':_0x1663be,'testFrameworkState':_0x4f2754[_0x288d93(0x210)]()[_0x288d93(0x219)]('.')[0x1]};_0x498a53[_0x288d93(0x1a6)](updatePayloadForTraceLogs,_0x2d0f8b,_0x58d9c5,_0x10518c,_0x50d2e5),logger[_0x288d93(0x1b1)](_0x288d93(0x1dd)+_0x10518c+_0x288d93(0x1d8)+_0x498a53[_0x288d93(0x25a)](_0x369788,0x1)+'/'+_0x56c2cf+_0x288d93(0x211)+util[_0x288d93(0x256)](_0x2d0f8b));const _0x31b9f2=await GrpcClient[_0x288d93(0x264)]()[_0x288d93(0x1a5)](_0x2d0f8b);logger[_0x288d93(0x1b1)](_0x288d93(0x1dd)+_0x10518c+_0x288d93(0x1d8)+_0x498a53['KTkCK'](_0x369788,0x1)+'/'+_0x56c2cf+_0x288d93(0x1ee)+util[_0x288d93(0x256)](_0x31b9f2));}}else{const {steps:_0x5e6b36,logs:_0x3a8e35}=_0x498a53[_0x288d93(0x236)](getStepsAndLogs,_0x58d9c5['step']['steps'],_0x57e5d4,_0x498a53[_0x288d93(0x23d)]),_0x2fa1d7=_0x58d9c5[_0x288d93(0x208)]['id'];logger[_0x288d93(0x1b1)](_0x288d93(0x1f5)+_0x2fa1d7);const _0x4a0b81=_0x50d2e5[_0x288d93(0x1f3)]()[_0x288d93(0x1d1)](_0x2fa1d7),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0xd97085='',[TestFrameworkConstants[_0x288d93(0x24d)]]:_0x3cd642=''}=_0x4a0b81,_0x27f204={'platformIndex':'0','logs':_0x3a8e35,'testFrameworkName':_0xd97085,'testFrameworkVersion':_0x3cd642,'testFrameworkState':_0x4f2754[_0x288d93(0x210)]()[_0x288d93(0x219)]('.')[0x1]};_0x498a53['phHCs'](updatePayloadForTraceLogs,_0x27f204,_0x58d9c5,_0x2fa1d7,_0x50d2e5),logger[_0x288d93(0x1b1)](_0x288d93(0x1dd)+_0x2fa1d7+_0x288d93(0x211)+util[_0x288d93(0x256)](_0x27f204));const _0x50e9ba=await GrpcClient[_0x288d93(0x264)]()[_0x288d93(0x1a5)](_0x27f204);}}catch(_0x3cab93){logger[_0x288d93(0x26b)]('Error\x20in\x20sendLogCreatedEvent:\x20'+util[_0x288d93(0x204)](_0x3cab93));}}}module[a67_0x446ec9(0x1f8)]=PlaywrightTestFramework;