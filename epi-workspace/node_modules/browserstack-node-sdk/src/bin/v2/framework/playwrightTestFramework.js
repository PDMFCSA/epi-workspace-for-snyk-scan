const a65_0x1cdc5=a65_0x3d39;function a65_0x3d39(_0x4c16c6,_0x20c4a0){const _0x37e408=a65_0x37e4();return a65_0x3d39=function(_0x3d3984,_0x49929a){_0x3d3984=_0x3d3984-0x79;let _0x32084a=_0x37e408[_0x3d3984];return _0x32084a;},a65_0x3d39(_0x4c16c6,_0x20c4a0);}(function(_0x12cb45,_0xd0c654){const _0x134113=a65_0x3d39,_0x508853=_0x12cb45();while(!![]){try{const _0x24a7a0=parseInt(_0x134113(0x116))/0x1+parseInt(_0x134113(0x109))/0x2*(parseInt(_0x134113(0x136))/0x3)+-parseInt(_0x134113(0x96))/0x4+parseInt(_0x134113(0xde))/0x5+parseInt(_0x134113(0xe2))/0x6+parseInt(_0x134113(0xd3))/0x7*(parseInt(_0x134113(0x9e))/0x8)+parseInt(_0x134113(0xdb))/0x9*(-parseInt(_0x134113(0xff))/0xa);if(_0x24a7a0===_0xd0c654)break;else _0x508853['push'](_0x508853['shift']());}catch(_0x43143c){_0x508853['push'](_0x508853['shift']());}}}(a65_0x37e4,0xbae84));const TestFramework=require(a65_0x1cdc5(0xf1)),TestFrameworkState=require('../state/testFrameworkState.js'),HookState=require(a65_0x1cdc5(0xae)),{createClassLogger}=require(a65_0x1cdc5(0xd6)),TestFrameworkInstance=require(a65_0x1cdc5(0x97)),CLIUtils=require(a65_0x1cdc5(0x8d)),TrackedInstance=require(a65_0x1cdc5(0xa1)),TestFrameworkConstants=require(a65_0x1cdc5(0xd4)),logger=createClassLogger(a65_0x1cdc5(0x104)),{v4:uuidv4}=require(a65_0x1cdc5(0xbf)),util=require('util'),{getPlaywrightSessionName,getPlaywrightTestFilePath,getPlaywrightTestId,getPlaywrightTestTitle,getPlaywrightTestLocation,getPlaywrightTestTags,getPlaywrightTestCode,getPlaywrightTestScope,getPlaywrightTestScopes,getStepsAndLogs,getScreenshots,getPlaywrightCustomRerunParam,getMediaArtifactsLogs,getManualUploadLogs,updatePayloadForTraceLogs}=require(a65_0x1cdc5(0x87)),TestInfo=require('../TestInfo.js'),GrpcClient=require(a65_0x1cdc5(0xbc)),{removeAnsiColors,getFailureType,failureData}=require(a65_0x1cdc5(0x7c)),{getFailureData,getTestTags}=require(a65_0x1cdc5(0xee)),{findNestedKey,sendTraceZip,validateFilePath}=require(a65_0x1cdc5(0xee)),path=require(a65_0x1cdc5(0x105)),fs=require('fs'),helper=require(a65_0x1cdc5(0x89)),{PLAYWRIGHT_TRACE_LOGS}=require(a65_0x1cdc5(0x126));function a65_0x37e4(){const _0x3452d7=['filePath','message','ycvyb','LKSXt','KEY_HOOKS_STARTED','getAllData','getRef','description','toISOString','tQqEW','passed','../state/hookState.js','status','QjGIN','error','GDboE','getInstance','trackEvent\x20loading\x20testData\x20for\x20testId:\x20','KEY_HOOK_ID','CQFhA','vKKOK','KEY_HOOK_FAILURE_REASON','KEY_HOOK_NAME','trackPlaywrightInstance','file_name','../grpcClient','TEST_ATTACHMENT','yFCSw','uuid','parsePlaywrightTest','getTestFrameworks','NONE','DEFAULT_TEST_RESULT','\x20testHookState=','errors','length','exports','\x20&\x20hook\x20=\x20','wUjcc','forEach','brPWN','steps','failed','getTestUUID','KEY_TEST_FILE_PATH','zGgRv','LYpGO','xLnDB','152992MfkvQM','./constants/testFrameworkConstants.js','ShmNw','../../../helpers/classLogger.js','format','title','No\x20reason\x20provided','trackEvent\x20loading\x20testResults\x20for\x20testId:\x20','1461312laoMVe','gPrRI','setTrackedInstance','3297010IVfdoG','some','stack','KEY_AUTOMATE_SESSION_NAME','8642154qFzCBa','KEY_TEST_FRAMEWORK_VERSION','KEY_HOOK_LOGS','info','KEY_TEST_UUID','XQJbC','KEY_TEST_RESULT','swXjl','KEY_TEST_SCOPE','Hook\x20Started\x20in\x20PRE\x20key\x20=\x20','wWsnK','sendLogCreatedEvent:\x20testId=','../../playwright/reporter/pwUtils','Error\x20processing\x20trace\x20file\x20','statSync','./testFramework','trim','iHYRY','fHbHm','timedOut','DsNQY','field_type','pPpnf','rqrXs','RChBe','nGnLm','Xnbuw','trackEvent:\x20found\x20instance,\x20testFrameworkState=','TGqsk','170sHaBPw','Hook\x20List\x20in\x20Post\x20','createContext','JMZCV','KEY_TEST_CODE','PlaywrightTestFramework','path','size','parsePlaywrightTestResult','push','2WpaiGV','KEY_HOOKS_FINISHED','OHtcI','\x20target=','KEY_HOOK_LAST_STARTED','KEY_TEST_FAILURE','WWTRA','KEY_TEST_ENDED_AT','startTime','AaZTK','pryBp','\x20instance=','Nlvtz','872790GKbFuo','expectedStatus','resolveInstance','DEFAULT_HOOK_RESULT','KEY_TEST_FAILURE_TYPE','skipped','LORDd','testUId','getTrackedInstance','getTime','UkvvP','Error\x20in\x20sendLogCreatedEvent:\x20','EZRWk','trackHookEvent','annotations','results','../../utils/constants','INIT_TEST','Expected\x20to\x20fail,\x20but\x20passed.','wgoCT','QZlaJ','\x20\x20and\x20args\x20=\x20','sendLogCreatedEvent\x20for\x20testId:\x20','KEY_EVENT_ENDED_AT','\x20from\x20TestDetails:\x20','trackPlaywrightInstance:\x20saved\x20instance\x20contextId=','pIQlC','step','\x20and\x20args\x20=\x20','KEY_TEST_STARTED_AT','yaZQQ','KEY_LOGS','1689549Doibwh','oRgPi','map','get','test','dMkjQ','hook','sHsnE','filter','setTestDetails','KEY_HOOK_FAILURE_TYPE','matchHookRegex','vfrCU','runHooks','TEST','getTestFrameworksVersions','ldqkU','KEY_CUSTOM_TAGS','getTestDetails','qeAnT','trackEvent:\x20Exception\x20in\x20event\x20tracking,\x20testFrameworkState=%s\x20hookState=%s\x20argsLength=%s,\x20exception=%s','debug','logCreatedEvent','toString','NSMnr','pnTCI','err','trackEvent','KBqbn','aCinf','UpYHk','../../../helpers/test-observability/utils','pop','zGCjq','PRE','parsePlaywrightTestResult:\x20testId=','KEY_TEST_ATTACHMENTS','multi_dropdown','basename','UOlzP','KEY_HOOK_LAST_FINISHED','values','../../../helpers/helper.js','KEY_TEST_RERUN_NAME','../../../../src/helpers/helper','trackPlaywrightInstance:\x20created\x20instance\x20for\x20target=','sendLogCreatedEvent','\x20hookState=','../cliUtils.js','\x20payload=','POST','XQKfa','getCurrentInstanceName','KEY_TEST_FRAMEWORK_NAME','\x20instanceId=','split','result','3624008BOXuZB','../instances/testFrameworkInstance.js','addMultipleEntries','KEY_TEST_FAILURE_REASON','KEY_HOOK_RESULT','duration','sDqYn','isArray','328KzQZXw','getTraceFilePaths','instance','../instances/trackedInstance.js','inspect'];a65_0x37e4=function(){return _0x3452d7;};return a65_0x37e4();}class PlaywrightTestFramework extends TestFramework{constructor(_0x599e2a,_0x22f2ca,_0x1ce647){super(_0x599e2a,_0x22f2ca,_0x1ce647);}async[a65_0x1cdc5(0x151)](_0x2ee361,_0x96bca7,_0x3d8541={}){const _0x1acf5a=a65_0x1cdc5,_0x21758e={};_0x21758e[_0x1acf5a(0xbe)]=function(_0x2dcfd4,_0x3e9322){return _0x2dcfd4===_0x3e9322;},_0x21758e[_0x1acf5a(0xd5)]=function(_0x12a5e4,_0x1cedc0){return _0x12a5e4===_0x1cedc0;},_0x21758e[_0x1acf5a(0x112)]=function(_0x378081,_0x3317d6){return _0x378081===_0x3317d6;},_0x21758e[_0x1acf5a(0xfc)]=_0x1acf5a(0x13a),_0x21758e[_0x1acf5a(0xa6)]=_0x1acf5a(0x14a);const _0x4c5518=_0x21758e;await super[_0x1acf5a(0x151)](_0x2ee361,_0x96bca7,_0x3d8541);const _0x10f181=this[_0x1acf5a(0x118)](_0x2ee361,_0x96bca7,_0x3d8541);if(!_0x10f181)return;logger[_0x1acf5a(0x14b)](_0x1acf5a(0xfd)+_0x2ee361+_0x1acf5a(0x8c)+_0x96bca7+_0x1acf5a(0x93)+_0x10f181[_0x1acf5a(0xa9)]());try{if(_0x4c5518['yFCSw'](_0x96bca7,HookState[_0x1acf5a(0x7f)])&&_0x4c5518[_0x1acf5a(0xd5)](_0x2ee361,TestFrameworkState[_0x1acf5a(0x144)])){const _0x382dbf=_0x3d8541[_0x1acf5a(0x13a)];logger[_0x1acf5a(0x14b)](_0x1acf5a(0xb4)+_0x382dbf['id']+'}');const _0x300c6d=TestInfo[_0x1acf5a(0xce)](_0x382dbf['id']);_0x10f181[_0x1acf5a(0x98)](this[_0x1acf5a(0xc0)](_0x300c6d,_0x382dbf)),logger[_0x1acf5a(0x14b)]('trackEvent:\x20loaded\x20testData\x20for\x20testId:\x20'+_0x382dbf['id']+',\x20testFrameworkState='+_0x2ee361+_0x1acf5a(0xc4)+_0x96bca7+_0x1acf5a(0x114)+_0x10f181[_0x1acf5a(0xa9)]());}if(_0x4c5518['yFCSw'](_0x96bca7,HookState[_0x1acf5a(0x8f)])&&_0x4c5518[_0x1acf5a(0x112)](_0x2ee361,TestFrameworkState[_0x1acf5a(0x144)])){const _0x2035b0=_0x3d8541[_0x1acf5a(0x13a)],_0x10aa3b=_0x3d8541[_0x1acf5a(0x95)];logger['debug'](_0x1acf5a(0xda)+_0x2035b0['id']),_0x10f181[_0x1acf5a(0x98)](this[_0x1acf5a(0x107)](_0x2035b0['id'],_0x10aa3b,_0x2035b0)),this[_0x1acf5a(0x8b)](_0x10f181,_0x2ee361,_0x96bca7,_0x4c5518['Xnbuw'],_0x3d8541);}if(CLIUtils[_0x1acf5a(0x141)](_0x2ee361[_0x1acf5a(0x14d)]()['split']('.')[0x1])){const _0x24f643=await this[_0x1acf5a(0x123)](_0x10f181,_0x2ee361,_0x96bca7,_0x3d8541);_0x10f181['addMultipleEntries'](_0x24f643);}}catch(_0x4a4938){logger['error'](util[_0x1acf5a(0xd7)](_0x4c5518['LKSXt'],_0x2ee361,_0x96bca7,_0x3d8541[_0x1acf5a(0xc6)],_0x4a4938));}_0x3d8541[_0x1acf5a(0xa0)]=_0x10f181,await this[_0x1acf5a(0x143)](_0x10f181,_0x2ee361,_0x96bca7,_0x3d8541);}[a65_0x1cdc5(0x118)](_0x335564,_0x866dbf,_0x8aacad={}){const _0x2d7673=a65_0x1cdc5,_0x469efc={};_0x469efc[_0x2d7673(0xfe)]=function(_0x417677,_0x2abbc9){return _0x417677===_0x2abbc9;};const _0x2ecab5=_0x469efc;let _0x48c58f=null;return(_0x2ecab5[_0x2d7673(0xfe)](_0x335564,TestFrameworkState[_0x2d7673(0x127)])||_0x2ecab5[_0x2d7673(0xfe)](_0x335564,TestFrameworkState[_0x2d7673(0xc2)]))&&this['trackPlaywrightInstance'](_0x335564,_0x8aacad),_0x48c58f=TestFramework[_0x2d7673(0x11e)](),_0x48c58f;}[a65_0x1cdc5(0xba)](_0x35bab0,_0x283b22){const _0x160ecf=a65_0x1cdc5,_0x377f68=CLIUtils[_0x160ecf(0x91)](),_0x3cb176=TrackedInstance[_0x160ecf(0x101)](_0x377f68);let _0x29d54c=null;logger[_0x160ecf(0xe5)](_0x160ecf(0x8a)+_0x377f68+',\x20state='+_0x35bab0),_0x29d54c=new TestFrameworkInstance(_0x3cb176,this['getTestFrameworks'](),this[_0x160ecf(0x145)](),_0x35bab0,HookState['NONE']),TestFramework[_0x160ecf(0xdd)](_0x3cb176,_0x29d54c),logger[_0x160ecf(0xe5)](_0x160ecf(0x12f)+_0x3cb176['getId']()+_0x160ecf(0x10c)+_0x377f68);}[a65_0x1cdc5(0xc0)](_0x5dea6e,_0x3e6354){const _0x594963=a65_0x1cdc5,_0x512123={'wWsnK':function(_0x22bfae,_0x214952){return _0x22bfae(_0x214952);},'QjGIN':function(_0x179398,_0x19b2a6){return _0x179398(_0x19b2a6);},'pryBp':function(_0x560c07,_0x4ed96e){return _0x560c07(_0x4ed96e);},'cNrOs':function(_0x36ba5c,_0x3a4122){return _0x36ba5c(_0x3a4122);},'NqVXB':function(_0x51f24d,_0x1c5362){return _0x51f24d(_0x1c5362);},'vKKOK':function(_0x5abaae,_0x197048){return _0x5abaae(_0x197048);},'sHsnE':function(_0x424545,_0x2682ed){return _0x424545(_0x2682ed);}},_0x21a965=_0x512123[_0x594963(0xec)](getPlaywrightTestId,_0x3e6354),_0x21a11d=_0x512123[_0x594963(0xb0)](getPlaywrightTestTitle,_0x3e6354),_0x2b99ee=_0x512123[_0x594963(0xb0)](getTestTags,_0x3e6354),_0x3f94ff=_0x512123['wWsnK'](getPlaywrightTestCode,_0x3e6354),_0x19362f=_0x512123[_0x594963(0x113)](getPlaywrightTestFilePath,_0x3e6354),_0x4c033f=_0x19362f+':'+_0x512123['cNrOs'](getPlaywrightTestLocation,_0x3e6354),_0x1aa984=_0x512123['pryBp'](getPlaywrightTestScope,_0x3e6354),_0x3c1e8c=_0x512123['NqVXB'](getPlaywrightTestScopes,_0x3e6354),_0x39cdd9=_0x512123[_0x594963(0xb7)](getPlaywrightSessionName,_0x3e6354),_0x53c8da=this[_0x594963(0xc1)]()[0x0],_0x187434={[TestFrameworkConstants[_0x594963(0x92)]]:_0x53c8da,[TestFrameworkConstants[_0x594963(0xe3)]]:this['getTestFrameworksVersions']()[_0x53c8da],[TestFrameworkConstants['KEY_TEST_LOGS']]:[],[TestFrameworkConstants[_0x594963(0x10a)]]:{},[TestFrameworkConstants['KEY_HOOKS_STARTED']]:{},[TestFrameworkConstants[_0x594963(0xe6)]]:_0x5dea6e,[TestFrameworkConstants[_0x594963(0xe8)]]:TestFrameworkConstants[_0x594963(0xc3)],[TestFrameworkConstants[_0x594963(0xe1)]]:_0x39cdd9,[TestFrameworkConstants[_0x594963(0xcf)]]:_0x19362f,[TestFrameworkConstants['KEY_TEST_ID']]:_0x21a965,[TestFrameworkConstants['KEY_TEST_NAME']]:_0x21a11d,[TestFrameworkConstants['KEY_TEST_LOCATION']]:_0x4c033f,[TestFrameworkConstants[_0x594963(0x103)]]:_0x3f94ff,[TestFrameworkConstants['KEY_TEST_TAGS']]:_0x2b99ee,[TestFrameworkConstants[_0x594963(0x133)]]:_0x3e6354[_0x594963(0x125)][0x0][_0x594963(0x111)],[TestFrameworkConstants[_0x594963(0xea)]]:_0x1aa984,[TestFrameworkConstants['KEY_TEST_SCOPES']]:_0x3c1e8c,[TestFrameworkConstants[_0x594963(0x88)]]:_0x512123[_0x594963(0x13d)](getPlaywrightCustomRerunParam,_0x3e6354)};TestInfo[_0x594963(0x13f)](_0x3e6354['id'],_0x187434);const _0x175101={};return _0x175101[_0x21a965]=_0x187434,_0x175101;}['parsePlaywrightTestResult'](_0x2a7e36,_0x73fb1c,_0x2e1cd5){const _0x5e438e=a65_0x1cdc5,_0x13061a={'pIQlC':function(_0x3e3cb3,_0x4a1743){return _0x3e3cb3(_0x4a1743);},'OHtcI':_0x5e438e(0xbd),'aCinf':function(_0x52ee5f,_0x37cb43){return _0x52ee5f===_0x37cb43;},'vfrCU':function(_0x3ea462,_0x37a33d){return _0x3ea462===_0x37a33d;},'nGnLm':function(_0x1dc8f9,_0x49e997){return _0x1dc8f9===_0x49e997;},'Nlvtz':_0x5e438e(0xd9),'EZRWk':_0x5e438e(0x82),'UkvvP':function(_0x2f38fd,_0x5930ec){return _0x2f38fd(_0x5930ec);},'pnTCI':function(_0x206254,_0x2c3164){return _0x206254+_0x2c3164;},'DsNQY':function(_0x7432bd,_0x5e7320){return _0x7432bd===_0x5e7320;},'zGgRv':_0x5e438e(0x11b),'wUjcc':_0x5e438e(0xad),'UOlzP':function(_0x11cd6a,_0x4cd097){return _0x11cd6a===_0x4cd097;},'fHbHm':function(_0x3bbe5b,_0x2735df){return _0x3bbe5b===_0x2735df;},'JMZCV':_0x5e438e(0xcd),'NSMnr':function(_0x21192b,_0x2c6509){return _0x21192b===_0x2c6509;},'tQqEW':_0x5e438e(0xf5),'ldqkU':function(_0x8fedaa,_0x12d0a5){return _0x8fedaa===_0x12d0a5;},'UpYHk':function(_0x1db3e5,_0x62b9){return _0x1db3e5===_0x62b9;},'KBqbn':_0x5e438e(0x128),'yaZQQ':function(_0x2943eb,_0x23e7bd,_0x49b336){return _0x2943eb(_0x23e7bd,_0x49b336);},'WWTRA':function(_0x48f24f,_0x258df2){return _0x48f24f||_0x258df2;},'zGCjq':function(_0x35df16,_0x3e16a9){return _0x35df16(_0x3e16a9);},'CQFhA':function(_0x59880a,_0x232bbc,_0x29880d){return _0x59880a(_0x232bbc,_0x29880d);},'LYpGO':_0x5e438e(0x105),'oRgPi':function(_0x5d931b,_0x317d4d){return _0x5d931b(_0x317d4d);},'iGfuv':function(_0x179b25,_0x4e0354){return _0x179b25>_0x4e0354;},'ycvyb':function(_0x28c29f,_0x478900){return _0x28c29f>_0x478900;}};logger[_0x5e438e(0x14b)](_0x5e438e(0x80)+_0x2a7e36);const _0xa46df5=new Date(_0x73fb1c[_0x5e438e(0x111)]),_0x495e67=_0x73fb1c[_0x5e438e(0x9b)],_0x465ade=new Date(_0x13061a[_0x5e438e(0x14f)](_0xa46df5['getTime'](),_0x495e67)),_0x54787b=_0x73fb1c[_0x5e438e(0xaf)],_0xc99962=TestInfo[_0x5e438e(0x148)](_0x2a7e36)[TestFrameworkConstants[_0x5e438e(0x147)]]||{};let _0x290f33=_0x54787b;if(_0x13061a[_0x5e438e(0xf6)](_0x73fb1c['status'],_0x2e1cd5[_0x5e438e(0x117)]))_0x290f33=_0x13061a['aCinf'](_0x73fb1c[_0x5e438e(0xaf)],_0x13061a['zGgRv'])?_0x13061a[_0x5e438e(0xd0)]:_0x13061a[_0x5e438e(0xc9)];else{(_0x13061a[_0x5e438e(0x84)](_0x290f33,_0x13061a[_0x5e438e(0xc9)])||_0x13061a[_0x5e438e(0xf4)](_0x290f33,_0x13061a[_0x5e438e(0x102)])||_0x13061a[_0x5e438e(0x14e)](_0x290f33,_0x13061a[_0x5e438e(0xac)]))&&(_0x290f33=_0x13061a[_0x5e438e(0x102)]);if(_0x13061a[_0x5e438e(0x146)](_0x73fb1c[_0x5e438e(0xaf)],_0x13061a[_0x5e438e(0xc9)])&&_0x13061a[_0x5e438e(0x7b)](_0x2e1cd5[_0x5e438e(0x117)],_0x13061a[_0x5e438e(0x102)])){const _0x15dd57={};_0x15dd57[_0x5e438e(0xa4)]=_0x13061a['KBqbn'],_0x15dd57[_0x5e438e(0xe0)]=_0x13061a[_0x5e438e(0x79)],_0x73fb1c['error']=_0x15dd57,_0x73fb1c[_0x5e438e(0xc5)]=[_0x73fb1c[_0x5e438e(0xb1)]];}}const {failureData:_0x36a200,logs:_0x4775a9}=_0x13061a[_0x5e438e(0x134)](getFailureData,_0x73fb1c?.[_0x5e438e(0xc5)],{}),_0x124812={[TestFrameworkConstants[_0x5e438e(0x10e)]]:_0x13061a[_0x5e438e(0x10f)](_0x36a200,null),[TestFrameworkConstants[_0x5e438e(0x11a)]]:_0x73fb1c?.[_0x5e438e(0xb1)]&&_0x13061a[_0x5e438e(0x7e)](getFailureType,_0x73fb1c[_0x5e438e(0xb1)][_0x5e438e(0xa4)]),[TestFrameworkConstants[_0x5e438e(0x99)]]:_0x73fb1c?.['error']&&_0x13061a['pIQlC'](removeAnsiColors,_0x73fb1c['error'][_0x5e438e(0xa4)]),[TestFrameworkConstants['KEY_LOGS']]:[],[TestFrameworkConstants[_0x5e438e(0xe8)]]:_0x290f33,[TestFrameworkConstants[_0x5e438e(0x110)]]:_0x465ade[_0x5e438e(0xab)](),[TestFrameworkConstants['KEY_TEST_RESULT_AT']]:new Date()[_0x5e438e(0xab)](),[TestFrameworkConstants[_0x5e438e(0x147)]]:_0xc99962},_0x238442={};_0x238442[_0x5e438e(0x13a)]=_0x2e1cd5;const _0x48c29c=this['resolveInstance'](TestFrameworkState[_0x5e438e(0x144)],HookState[_0x5e438e(0x8f)],_0x238442),_0x1d719e=_0x48c29c[_0x5e438e(0xa8)]()[_0x5e438e(0x139)](_0x2a7e36)[TestFrameworkConstants[_0x5e438e(0xe6)]],_0x1b73b5=[],_0xa1166=_0x13061a[_0x5e438e(0xb6)](findNestedKey,_0x73fb1c,_0x13061a[_0x5e438e(0xd1)]);if(_0xa1166&&_0x13061a[_0x5e438e(0x137)](validateFilePath,_0xa1166))try{_0x1b73b5[_0x5e438e(0x108)]({'kind':_0x13061a[_0x5e438e(0x10b)],'timestamp':new Date()[_0x5e438e(0xab)](),'test_run_uuid':_0x1d719e,'file_name':path[_0x5e438e(0x83)](_0xa1166),'file_size':fs[_0x5e438e(0xf0)](_0xa1166)[_0x5e438e(0x106)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x342e8f){logger[_0x5e438e(0xb1)]('Error\x20processing\x20direct\x20trace\x20file\x20'+_0xa1166+':\x20'+_0x342e8f[_0x5e438e(0xa4)]);}const _0x20b79c=TestInfo[_0x5e438e(0x9f)](),_0x40210b=_0x20b79c[_0x5e438e(0x13e)](_0x4cfb21=>_0x4cfb21[_0x5e438e(0x11d)]===_0x1d719e);_0x40210b[_0x5e438e(0xca)](_0x1dfb4f=>{const _0x25d300=_0x5e438e;if(_0x1dfb4f[_0x25d300(0xa3)]&&_0x13061a[_0x25d300(0x130)](validateFilePath,_0x1dfb4f['filePath'])&&!_0x1b73b5[_0x25d300(0xdf)](_0xf8091e=>_0xf8091e[_0x25d300(0xbb)]===path['basename'](_0x1dfb4f[_0x25d300(0xa3)])))try{_0x1b73b5[_0x25d300(0x108)]({'kind':_0x13061a[_0x25d300(0x10b)],'timestamp':new Date()[_0x25d300(0xab)](),'test_run_uuid':_0x1d719e,'file_name':path[_0x25d300(0x83)](_0x1dfb4f[_0x25d300(0xa3)]),'file_size':fs[_0x25d300(0xf0)](_0x1dfb4f[_0x25d300(0xa3)])[_0x25d300(0x106)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x32fcd9){logger[_0x25d300(0xb1)](_0x25d300(0xef)+_0x1dfb4f[_0x25d300(0xa3)]+_0x25d300(0x12e)+_0x32fcd9[_0x25d300(0xa4)]);}});if(_0x13061a['iGfuv'](_0x1b73b5[_0x5e438e(0xc6)],0x0)){const _0xe35d14=_0x124812[TestFrameworkConstants[_0x5e438e(0x135)]]||[];_0x124812[TestFrameworkConstants[_0x5e438e(0x135)]]=[..._0xe35d14,..._0x1b73b5];}const _0x3bac38=TestInfo[_0x5e438e(0x148)](_0x2a7e36)[TestFrameworkConstants[_0x5e438e(0x81)]]||{},_0x1fa2cb=_0x13061a[_0x5e438e(0xb6)](getManualUploadLogs,_0x3bac38,_0x48c29c[_0x5e438e(0xa8)]()[_0x5e438e(0x139)](_0x2a7e36)[TestFrameworkConstants['KEY_TEST_UUID']]);if(_0x13061a[_0x5e438e(0xa5)](_0x1fa2cb[_0x5e438e(0xc6)],0x0)){const _0x464eda=_0x124812[TestFrameworkConstants['KEY_LOGS']]||[];_0x124812[TestFrameworkConstants[_0x5e438e(0x135)]]=[..._0x464eda,..._0x1fa2cb];}const _0x4ec19f=_0x2e1cd5[_0x5e438e(0x124)]||[],_0x236673=_0x124812[TestFrameworkConstants[_0x5e438e(0x147)]]||{};_0x4ec19f[_0x5e438e(0xca)](_0x16643a=>{const _0x57b0f2=_0x5e438e,{type:_0x8d92f0}=_0x16643a;let _0x760c0d=_0x16643a[_0x57b0f2(0xaa)];if(!_0x8d92f0)return;(_0x13061a[_0x57b0f2(0x7a)](_0x760c0d,undefined)||_0x13061a[_0x57b0f2(0x142)](_0x760c0d,null)||_0x13061a[_0x57b0f2(0xfb)](_0x13061a[_0x57b0f2(0x130)](String,_0x760c0d)['trim'](),''))&&(_0x760c0d=_0x13061a[_0x57b0f2(0x115)]);if(!_0x236673[_0x8d92f0]){const _0x42fd61={};_0x42fd61[_0x57b0f2(0xf7)]=_0x13061a['EZRWk'],_0x42fd61['values']=[],_0x236673[_0x8d92f0]=_0x42fd61;}else!_0x236673[_0x8d92f0][_0x57b0f2(0xf7)]&&(_0x236673[_0x8d92f0][_0x57b0f2(0xf7)]=_0x13061a[_0x57b0f2(0x122)]),!Array[_0x57b0f2(0x9d)](_0x236673[_0x8d92f0][_0x57b0f2(0x86)])&&(_0x236673[_0x8d92f0]['values']=[]);const _0x285444=_0x13061a[_0x57b0f2(0x120)](String,_0x760c0d)[_0x57b0f2(0x94)](',')[_0x57b0f2(0x138)](_0x26f379=>_0x26f379[_0x57b0f2(0xf2)]());_0x236673[_0x8d92f0][_0x57b0f2(0x86)]=[...new Set([..._0x236673[_0x8d92f0][_0x57b0f2(0x86)],..._0x285444])];}),_0x124812[TestFrameworkConstants[_0x5e438e(0x147)]]=_0x236673,TestInfo[_0x5e438e(0x13f)](_0x2a7e36,_0x124812);const _0x5817f3={};return _0x5817f3[_0x2a7e36]=_0x124812,_0x5817f3;}async['trackHookEvent'](_0x577cf5,_0x13069d,_0x175bbd,_0x271067){const _0x260d5d=a65_0x1cdc5,_0x5a423d={'METih':function(_0x3a6f59,_0x436256){return _0x3a6f59 in _0x436256;},'dMkjQ':function(_0x3e4115,_0x4fa74b){return _0x3e4115 in _0x4fa74b;},'vvUui':function(_0x2484ec,_0x4ded85){return _0x2484ec(_0x4ded85);},'gbhDz':function(_0x3699dd,_0x134c80){return _0x3699dd(_0x134c80);},'xLnDB':function(_0xd37c54,_0x4f6940){return _0xd37c54===_0x4f6940;},'brPWN':function(_0x50f073){return _0x50f073();},'XQJbC':function(_0x4de43e,_0x29114e){return _0x4de43e===_0x29114e;},'LORDd':function(_0x528e1d,_0x19dd6a){return _0x528e1d>_0x19dd6a;},'gPrRI':function(_0x356a07,_0x5ce9a0,_0x58a437){return _0x356a07(_0x5ce9a0,_0x58a437);},'WZrZC':_0x260d5d(0x150),'RChBe':function(_0x3a889b,_0x7f2d7a){return _0x3a889b(_0x7f2d7a);},'OLYeH':function(_0x5d5e20,_0x583c59){return _0x5d5e20(_0x583c59);},'pPpnf':_0x260d5d(0xcd),'sDqYn':_0x260d5d(0xad),'rqrXs':function(_0x2e98c3,_0x2898cb){return _0x2e98c3!==_0x2898cb;},'qeAnT':function(_0x5066ef,_0x9847d5){return _0x5066ef+_0x9847d5;},'WbBvd':'hook'},_0x513467=_0x271067[_0x260d5d(0x13a)],_0x4ce357=_0x271067[_0x260d5d(0x131)],_0x336b48=_0x271067[_0x260d5d(0x13a)]['id'],_0x1619ac=_0x13069d['toString']()['split']('.')[0x1];let _0xbe7d89=_0x577cf5[_0x260d5d(0xa8)]()[_0x260d5d(0x139)](_0x336b48)[TestFrameworkConstants['KEY_HOOKS_STARTED']];!_0xbe7d89&&(_0xbe7d89={});!_0x5a423d['METih'](_0x1619ac,_0xbe7d89)&&(_0xbe7d89[_0x1619ac]=[]);let _0xbb2e8=_0x577cf5[_0x260d5d(0xa8)]()[_0x260d5d(0x139)](_0x336b48)[TestFrameworkConstants[_0x260d5d(0x10a)]];!_0xbb2e8&&(_0xbb2e8={});!_0x5a423d[_0x260d5d(0x13b)](_0x1619ac,_0xbb2e8)&&(_0xbb2e8[_0x1619ac]=[]);const _0x2a4b64={[TestFrameworkConstants[_0x260d5d(0xa7)]]:_0xbe7d89,[TestFrameworkConstants['KEY_HOOKS_FINISHED']]:_0xbb2e8},_0x325ca5={};_0x325ca5[_0x336b48]=_0x2a4b64;const _0x4501a5=_0x325ca5,_0x55e609=_0x5a423d['vvUui'](getPlaywrightTestFilePath,_0x513467),_0x5c91e7=_0x55e609+':'+_0x5a423d['gbhDz'](getPlaywrightTestLocation,_0x513467),_0x2fbfd6=TestInfo[_0x260d5d(0x148)](_0x336b48)[TestFrameworkConstants[_0x260d5d(0x147)]]||{};if(_0x5a423d[_0x260d5d(0xd2)](_0x175bbd,HookState[_0x260d5d(0x7f)])){const _0x4b720c={'key':_0x1619ac,[TestFrameworkConstants[_0x260d5d(0xb5)]]:_0x5a423d[_0x260d5d(0xcb)](uuidv4),[TestFrameworkConstants[_0x260d5d(0x9a)]]:TestFrameworkConstants[_0x260d5d(0x119)],[TestFrameworkConstants['KEY_EVENT_STARTED_AT']]:_0x4ce357[_0x260d5d(0x111)],[TestFrameworkConstants[_0x260d5d(0xe4)]]:[],[TestFrameworkConstants[_0x260d5d(0xb9)]]:_0x4ce357[_0x260d5d(0xd8)],[TestFrameworkConstants[_0x260d5d(0xcf)]]:_0x55e609,[TestFrameworkConstants['KEY_TEST_LOCATION']]:_0x5c91e7,[TestFrameworkConstants[_0x260d5d(0x147)]]:_0x2fbfd6};_0xbe7d89[_0x1619ac]['push'](_0x4b720c),_0x4501a5[_0x336b48][TestFrameworkConstants[_0x260d5d(0x10d)]]=_0x1619ac,logger[_0x260d5d(0x14b)](_0x260d5d(0xeb)+_0x1619ac+_0x260d5d(0xc8)+_0x4b720c+_0x260d5d(0x12b)+_0x271067);}else{if(_0x5a423d[_0x260d5d(0xe7)](_0x175bbd,HookState[_0x260d5d(0x8f)])){const _0x299326=await _0x271067[_0x260d5d(0x95)],_0x5994e6=_0xbe7d89[_0x1619ac]||[],_0xd76cdb=_0x271067['step'];logger['debug'](_0x260d5d(0x100)+_0x5994e6+_0x260d5d(0x132)+_0x271067);if(_0x5a423d[_0x260d5d(0x11c)](_0x5994e6[_0x260d5d(0xc6)],0x0)){const _0x527cc7=_0x5994e6[_0x260d5d(0x7d)]();if(_0xd76cdb[_0x260d5d(0xb1)]){const _0x4c4d8d=_0x5a423d[_0x260d5d(0xdc)](failureData,_0xd76cdb[_0x260d5d(0xb1)],_0x5a423d['WZrZC']);_0x527cc7[TestFrameworkConstants[_0x260d5d(0x140)]]=_0x5a423d[_0x260d5d(0xfa)](getFailureType,_0xd76cdb?.['error']['message']),_0x527cc7[TestFrameworkConstants[_0x260d5d(0xb8)]]=_0x5a423d['OLYeH'](removeAnsiColors,_0xd76cdb?.[_0x260d5d(0xb1)][_0x260d5d(0xa4)]),_0x527cc7[TestFrameworkConstants[_0x260d5d(0x9a)]]=_0x5a423d[_0x260d5d(0xf8)],_0x527cc7[TestFrameworkConstants['KEY_HOOK_FAILURE']]=_0x4c4d8d;}else _0x527cc7[TestFrameworkConstants[_0x260d5d(0x9a)]]=_0x5a423d[_0x260d5d(0x9c)];_0x5a423d[_0x260d5d(0xf9)](_0x299326,TestFrameworkConstants[_0x260d5d(0x119)])&&(_0x527cc7[TestFrameworkConstants[_0x260d5d(0x9a)]]=!_0xd76cdb[_0x260d5d(0xb1)]?_0x5a423d['sDqYn']:_0x5a423d[_0x260d5d(0xf8)]);const _0x17f017=new Date(_0xd76cdb[_0x260d5d(0x111)]),_0x4413c9=new Date(_0x5a423d[_0x260d5d(0x149)](_0x17f017[_0x260d5d(0x11f)](),_0xd76cdb[_0x260d5d(0x9b)]));_0x527cc7[TestFrameworkConstants[_0x260d5d(0x12d)]]=_0x4413c9[_0x260d5d(0xab)](),_0x527cc7[TestFrameworkConstants[_0x260d5d(0x147)]]=_0x2fbfd6;const _0xea942c=_0x527cc7[TestFrameworkConstants[_0x260d5d(0xb5)]];await this[_0x260d5d(0x8b)](_0x577cf5,_0x13069d,_0xea942c,_0x5a423d['WbBvd'],_0x271067),!_0xbb2e8[_0x1619ac]&&(_0xbb2e8[_0x1619ac]=[]),_0xbb2e8[_0x1619ac][_0x260d5d(0x108)](_0x527cc7),_0x4501a5[_0x336b48][TestFrameworkConstants[_0x260d5d(0x85)]]=_0x1619ac;}}}return _0x4501a5;}async[a65_0x1cdc5(0x8b)](_0x2876c2,_0x3dc5b2,_0x47ef28,_0x55bdaf,_0x2770f8){const _0x511799=a65_0x1cdc5,_0x253e66={'oUIfM':function(_0x14a872,_0xfe38ee){return _0x14a872===_0xfe38ee;},'XQKfa':_0x511799(0x13a),'QZlaJ':function(_0x384d83,_0xdac0fd,_0x280450){return _0x384d83(_0xdac0fd,_0x280450);},'iHYRY':function(_0x5a48d2,_0xa3664d,_0xbe3817,_0x75bdfc){return _0x5a48d2(_0xa3664d,_0xbe3817,_0x75bdfc);},'swXjl':function(_0xdfca75,_0x147d3b,_0x36ffc4){return _0xdfca75(_0x147d3b,_0x36ffc4);},'GDboE':function(_0x28bf88,_0x186a48,_0x2261c9){return _0x28bf88(_0x186a48,_0x2261c9);},'wgoCT':function(_0x25b8b1,_0x15d6c1,_0x20a804){return _0x25b8b1(_0x15d6c1,_0x20a804);},'FTEEu':function(_0x3d0c39,_0x44426a,_0x2e027a,_0x52279e,_0x19973f){return _0x3d0c39(_0x44426a,_0x2e027a,_0x52279e,_0x19973f);},'XgFAt':_0x511799(0x13c),'YCjdW':function(_0x169b71,_0x65b213,_0x40f81b,_0x542eeb,_0x1c180b){return _0x169b71(_0x65b213,_0x40f81b,_0x542eeb,_0x1c180b);}};try{if(_0x253e66['oUIfM'](_0x55bdaf,_0x253e66['XQKfa'])){const _0xbe3507=await _0x2770f8[_0x511799(0x95)],_0x3f68b7=_0x2770f8[_0x511799(0x13a)]['id'],_0x586da2=_0x2770f8[_0x511799(0x13a)];logger[_0x511799(0x14b)](_0x511799(0xed)+_0x3f68b7);const _0x341df9=_0x2876c2[_0x511799(0xa8)]()[_0x511799(0x139)](_0x3f68b7)[TestFrameworkConstants['KEY_TEST_UUID']];await _0x253e66[_0x511799(0x12a)](sendTraceZip,_0xbe3507,_0x341df9);const {steps:_0x442230,logs:_0x4bf5ac}=_0x253e66[_0x511799(0xf3)](getStepsAndLogs,_0xbe3507[_0x511799(0xcc)],_0x2876c2[_0x511799(0xa8)]()[_0x511799(0x139)](_0x3f68b7)[TestFrameworkConstants[_0x511799(0xe6)]],_0x253e66[_0x511799(0x90)]),_0x3a8a9d=_0x253e66[_0x511799(0xe9)](getScreenshots,_0xbe3507,_0x2876c2[_0x511799(0xa8)]()[_0x511799(0x139)](_0x3f68b7)[TestFrameworkConstants[_0x511799(0xe6)]]),{_:_0x4a43f7,logs:_0x3fb4fb}=_0x253e66[_0x511799(0xb2)](getFailureData,_0xbe3507['errors'],{'test_run_uuid':_0x2876c2[_0x511799(0xa8)]()[_0x511799(0x139)](_0x3f68b7)[TestFrameworkConstants['KEY_TEST_UUID']]}),_0x334ce5=TestInfo[_0x511799(0x148)](_0x3f68b7)[TestFrameworkConstants[_0x511799(0x81)]]||{},_0x48c083=_0x253e66[_0x511799(0x129)](getMediaArtifactsLogs,_0x334ce5,_0x2876c2['getAllData']()[_0x511799(0x139)](_0x3f68b7)[TestFrameworkConstants[_0x511799(0xe6)]]),_0x32742c=_0x2876c2[_0x511799(0xa8)]()[_0x511799(0x139)](_0x3f68b7),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x31ab22='',[TestFrameworkConstants[_0x511799(0xe3)]]:_0x5a2104=''}=_0x32742c,_0x3c040a={'platformIndex':'0','logs':[..._0x4bf5ac||[],..._0x3a8a9d||[],..._0x3fb4fb||[],..._0x48c083||[]],'testFrameworkName':_0x31ab22,'testFrameworkVersion':_0x5a2104,'testFrameworkState':_0x3dc5b2[_0x511799(0x14d)]()['split']('.')[0x1]};_0x253e66['FTEEu'](updatePayloadForTraceLogs,_0x3c040a,_0x2770f8,_0x3f68b7,_0x2876c2),logger[_0x511799(0x14b)](_0x511799(0x12c)+_0x3f68b7+_0x511799(0x8e)+util[_0x511799(0xa2)](_0x3c040a));const _0x393857=await GrpcClient[_0x511799(0xb3)]()['logCreatedEvent'](_0x3c040a);}else{const {steps:_0x2e67ae,logs:_0xba38e3}=_0x253e66[_0x511799(0xf3)](getStepsAndLogs,_0x2770f8['step'][_0x511799(0xcc)],_0x47ef28,_0x253e66['XgFAt']),_0x38d595=_0x2770f8[_0x511799(0x13a)]['id'];logger[_0x511799(0x14b)](_0x511799(0xed)+_0x38d595);const _0x5b3202=_0x2876c2[_0x511799(0xa8)]()[_0x511799(0x139)](_0x38d595),{[TestFrameworkConstants[_0x511799(0x92)]]:_0x178e75='',[TestFrameworkConstants[_0x511799(0xe3)]]:_0xd00171=''}=_0x5b3202,_0x455993={'platformIndex':'0','logs':_0xba38e3,'testFrameworkName':_0x178e75,'testFrameworkVersion':_0xd00171,'testFrameworkState':_0x3dc5b2[_0x511799(0x14d)]()[_0x511799(0x94)]('.')[0x1]};_0x253e66['YCjdW'](updatePayloadForTraceLogs,_0x455993,_0x2770f8,_0x38d595,_0x2876c2),logger['debug']('sendLogCreatedEvent\x20for\x20testId:\x20'+_0x38d595+_0x511799(0x8e)+util[_0x511799(0xa2)](_0x455993));const _0x290afe=await GrpcClient[_0x511799(0xb3)]()[_0x511799(0x14c)](_0x455993);}}catch(_0x2dc600){logger['error'](_0x511799(0x121)+util[_0x511799(0xd7)](_0x2dc600));}}}module[a65_0x1cdc5(0xc7)]=PlaywrightTestFramework;