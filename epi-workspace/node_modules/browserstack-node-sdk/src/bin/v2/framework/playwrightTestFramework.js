const a67_0xdd234f=a67_0x3225;(function(_0x55fdc,_0x5eb772){const _0x4b7a96=a67_0x3225,_0x46aef5=_0x55fdc();while(!![]){try{const _0x20ceae=-parseInt(_0x4b7a96(0x184))/0x1*(-parseInt(_0x4b7a96(0x15d))/0x2)+-parseInt(_0x4b7a96(0x158))/0x3*(parseInt(_0x4b7a96(0x1de))/0x4)+parseInt(_0x4b7a96(0x161))/0x5*(-parseInt(_0x4b7a96(0x18f))/0x6)+parseInt(_0x4b7a96(0x15a))/0x7+-parseInt(_0x4b7a96(0x1d7))/0x8+-parseInt(_0x4b7a96(0x177))/0x9*(-parseInt(_0x4b7a96(0x15e))/0xa)+parseInt(_0x4b7a96(0x1ba))/0xb*(-parseInt(_0x4b7a96(0x162))/0xc);if(_0x20ceae===_0x5eb772)break;else _0x46aef5['push'](_0x46aef5['shift']());}catch(_0xc80545){_0x46aef5['push'](_0x46aef5['shift']());}}}(a67_0x4355,0xafcfe));const TestFramework=require(a67_0xdd234f(0x1cb)),TestFrameworkState=require('../state/testFrameworkState.js'),HookState=require(a67_0xdd234f(0x147)),{createClassLogger}=require('../../../helpers/classLogger.js'),TestFrameworkInstance=require(a67_0xdd234f(0x1b8)),CLIUtils=require('../cliUtils.js'),TrackedInstance=require(a67_0xdd234f(0x175)),TestFrameworkConstants=require('./constants/testFrameworkConstants.js'),logger=createClassLogger(a67_0xdd234f(0x17e)),{v4:uuidv4}=require('uuid'),util=require(a67_0xdd234f(0x174)),{getPlaywrightSessionName,getPlaywrightTestFilePath,getPlaywrightTestId,getPlaywrightTestTitle,getPlaywrightTestLocation,getPlaywrightTestTags,getPlaywrightTestCode,getPlaywrightTestScope,getPlaywrightTestScopes,getStepsAndLogs,getScreenshots,getVideos,getPlaywrightCustomRerunParam,getMediaArtifactsLogs,getManualUploadLogs,updatePayloadForTraceLogs}=require(a67_0xdd234f(0x173)),TestInfo=require(a67_0xdd234f(0x1c5)),GrpcClient=require(a67_0xdd234f(0x1b6)),{removeAnsiColors,getFailureType,failureData}=require(a67_0xdd234f(0x1cf)),{getFailureData,getTestTags}=require(a67_0xdd234f(0x13c)),{findNestedKey,sendTraceZip,validateFilePath}=require('../../playwright/reporter/pwUtils'),path=require(a67_0xdd234f(0x189)),fs=require('fs'),helper=require(a67_0xdd234f(0x14e)),{PLAYWRIGHT_TRACE_LOGS}=require(a67_0xdd234f(0x154));function a67_0x3225(_0xcc0978,_0x143957){const _0x43550e=a67_0x4355();return a67_0x3225=function(_0x32253c,_0x21942f){_0x32253c=_0x32253c-0x123;let _0x2edc0f=_0x43550e[_0x32253c];return _0x2edc0f;},a67_0x3225(_0xcc0978,_0x143957);}function a67_0x4355(){const _0x57a160=['../state/hookState.js','KEY_TEST_RESULT_AT','getInstance','lRjhn','HVcjO','step','NkRiD','../../../../src/helpers/helper','exports','KEY_TEST_FILE_PATH','toISOString','EhwPn','format','../../utils/constants','KEY_TEST_FAILURE','getTestFrameworksVersions','Error\x20in\x20sendLogCreatedEvent:\x20','12hQcPzb','KEY_CUSTOM_TAGS','7546371nKYQzs','getId',',\x20state=','16466Ogthih','13474220hgisLl','CRiFn','KEY_HOOK_NAME','2855ANhpBj','8244eRaORA','fZdrt','KEY_TEST_CODE','HzUXq','Expected\x20to\x20fail,\x20but\x20passed.','testUId','KEY_TEST_FRAMEWORK_NAME','\x20payload=','multi_dropdown','skipped','sendLogCreatedEvent:\x20testId=','\x20and\x20args\x20=\x20','status','LPhAm','createContext','KEY_TEST_SCOPES','getRef','../../../helpers/helper.js','util','../instances/trackedInstance.js','HNfnk','9aIfswb','hook','debug','aaBqM','KEY_TEST_LOGS','ECzvF','assign','PlaywrightTestFramework','XxUjB','info','parsePlaywrightTest','trim','TEST','157ckxeOD','IIFxg','SDQNO','matchHookRegex','KEY_TEST_FRAMEWORK_VERSION','path','failed','KEY_HOOK_LOGS','KEY_TEST_STARTED_AT','dorvd','err','5982mRaHDX','mQgbT','setTrackedInstance','expectedStatus','\x20testHookState=','trackPlaywrightInstance:\x20created\x20instance\x20for\x20target=','KEY_TEST_ID','WiPvn','KfGyz','\x20batch\x20','KEY_HOOK_ID','test','ceil','KEY_TEST_RERUN_NAME','startTime','DnnBy','dKrGu','description','RiPTr','KEY_HOOKS_STARTED','uiVPm','Hook\x20List\x20in\x20Post\x20','error','MEoii','getTraceFilePaths','KEY_LOGS','XeXsF','MbzmH','length','values','KEY_TEST_ATTACHMENTS','basename','aVIvf','TEST_SCREENSHOT','SSqjL','getAllData','gJUKA','KEY_EVENT_STARTED_AT','KEY_HOOK_LAST_FINISHED','../grpcClient','KEY_TEST_SCOPE','../instances/testFrameworkInstance.js','ydaZf','8899vDJYKQ','duration','sendLogCreatedEvent','WsRFt','LMXKo','addMultipleEntries','KEY_TEST_UUID','passed','JFXOD','trackPlaywrightInstance','get','../TestInfo.js','annotations','statSync','steps','KPPIR','map','./testFramework','forEach','ySXDl','errors','../../../helpers/test-observability/utils','gpBAm','resolveInstance','cVvTU','attachments','concat','getTestFrameworks','KEY_HOOK_FAILURE_TYPE','11154688EkxhTw','POST','\x20\x20and\x20args\x20=\x20','split','slice','KEY_HOOK_FAILURE','KhqvA','478524VKICwD','PyBjr','KEY_EVENT_ENDED_AT','setTestDetails','qsujx','isArray','size','NjTIS','trackHookEvent','filter','KKXnZ','yWdxr','DEFAULT_TEST_RESULT','getCurrentInstanceName','AyojE','uLNOn','ZasMj','rYyqp','stack','field_type','logCreatedEvent','rUiKQ','KEY_HOOK_FAILURE_REASON','KEY_TEST_TAGS','trackEvent','WgXsw','TEST_ATTACHMENT','timedOut','cyZYF','result','instance','parsePlaywrightTestResult','egCEX','LrveW','inspect','getTime','getTrackedInstance','dauIq','toString','rHNzB','message','DEFAULT_HOOK_RESULT','fjoxN','KEY_HOOK_LAST_STARTED','filePath','\x20from\x20TestDetails:\x20','XUqqZ','aVOic','KEY_HOOKS_FINISHED','getTestDetails','QQkYr','push','gittU','trackPlaywrightInstance:\x20saved\x20instance\x20contextId=','INIT_TEST','../../playwright/reporter/pwUtils','KEY_AUTOMATE_SESSION_NAME','PXjuH','NONE','sendLogCreatedEvent\x20for\x20testId:\x20','title','KEY_TEST_LOCATION','KEY_HOOK_RESULT','sBTec','trackEvent\x20loading\x20testResults\x20for\x20testId:\x20','file_name'];a67_0x4355=function(){return _0x57a160;};return a67_0x4355();}class PlaywrightTestFramework extends TestFramework{constructor(_0x26f46b,_0x492604,_0x20b49d){super(_0x26f46b,_0x492604,_0x20b49d);}async['trackEvent'](_0x4cb3ef,_0xa95f13,_0x224b1e={}){const _0x2be177=a67_0xdd234f,_0xc96d4c={};_0xc96d4c[_0x2be177(0x1bd)]=function(_0x4ad7ab,_0x2de025){return _0x4ad7ab===_0x2de025;},_0xc96d4c[_0x2be177(0x196)]=function(_0x50b8fc,_0xe41e3e){return _0x50b8fc===_0xe41e3e;},_0xc96d4c[_0x2be177(0x1a1)]=function(_0x13c89c,_0xeac263){return _0x13c89c===_0xeac263;},_0xc96d4c[_0x2be177(0x165)]=function(_0x43fd5a,_0x1620a4){return _0x43fd5a===_0x1620a4;},_0xc96d4c[_0x2be177(0x1e8)]=function(_0x5e9719,_0x22ad8f){return _0x5e9719===_0x22ad8f;},_0xc96d4c['LMXKo']=_0x2be177(0x19a),_0xc96d4c[_0x2be177(0x1a3)]='trackEvent:\x20Exception\x20in\x20event\x20tracking,\x20testFrameworkState=%s\x20hookState=%s\x20argsLength=%s,\x20exception=%s';const _0x38fb1b=_0xc96d4c;super[_0x2be177(0x1f6)](_0x4cb3ef,_0xa95f13,_0x224b1e);_0x38fb1b[_0x2be177(0x1bd)](_0x4cb3ef,TestFrameworkState[_0x2be177(0x1b0)])&&TestInfo[_0x2be177(0x1e1)](_0x224b1e['test']['testId'],_0x224b1e[_0x2be177(0x1fb)],!![]);const _0xa05be9=this['resolveInstance'](_0x4cb3ef,_0xa95f13,_0x224b1e);if(!_0xa05be9)return;logger['debug']('trackEvent:\x20found\x20instance,\x20testFrameworkState='+_0x4cb3ef+'\x20hookState='+_0xa95f13+'\x20instanceId='+_0xa05be9[_0x2be177(0x172)]());try{if(_0x38fb1b[_0x2be177(0x196)](_0xa95f13,HookState['PRE'])&&_0x38fb1b['RiPTr'](_0x4cb3ef,TestFrameworkState[_0x2be177(0x183)])){const _0x79ffcd=_0x224b1e[_0x2be177(0x19a)];logger[_0x2be177(0x179)]('trackEvent\x20loading\x20testData\x20for\x20testId:\x20'+_0x79ffcd['id']+'}');const _0x389f35=TestInfo['getTestUUID'](_0x79ffcd['id']);_0xa05be9[_0x2be177(0x1bf)](this['parsePlaywrightTest'](_0x389f35,_0x79ffcd)),logger[_0x2be177(0x179)]('trackEvent:\x20loaded\x20testData\x20for\x20testId:\x20'+_0x79ffcd['id']+',\x20testFrameworkState='+_0x4cb3ef+_0x2be177(0x193)+_0xa95f13+'\x20instance='+_0xa05be9[_0x2be177(0x172)]());}if(_0x38fb1b[_0x2be177(0x165)](_0xa95f13,HookState[_0x2be177(0x1d8)])&&_0x38fb1b[_0x2be177(0x1e8)](_0x4cb3ef,TestFrameworkState[_0x2be177(0x183)])){const _0x13ad57=_0x224b1e[_0x2be177(0x19a)],_0x5a9774=_0x224b1e[_0x2be177(0x1fb)];logger[_0x2be177(0x179)](_0x2be177(0x145)+_0x13ad57['id']),_0xa05be9[_0x2be177(0x1bf)](this[_0x2be177(0x124)](_0x13ad57['id'],_0x5a9774,_0x13ad57)),await this['sendLogCreatedEvent'](_0xa05be9,_0x4cb3ef,_0xa95f13,_0x38fb1b[_0x2be177(0x1be)],_0x224b1e);}if(CLIUtils[_0x2be177(0x187)](_0x4cb3ef[_0x2be177(0x12b)]()[_0x2be177(0x1da)]('.')[0x1])){const _0x5bea44=await this[_0x2be177(0x1e6)](_0xa05be9,_0x4cb3ef,_0xa95f13,_0x224b1e);_0xa05be9[_0x2be177(0x1bf)](_0x5bea44);}}catch(_0x43912e){logger[_0x2be177(0x1a5)](util[_0x2be177(0x153)](_0x38fb1b[_0x2be177(0x1a3)],_0x4cb3ef,_0xa95f13,_0x224b1e['length'],_0x43912e));}_0x224b1e[_0x2be177(0x123)]=_0xa05be9,await this['runHooks'](_0xa05be9,_0x4cb3ef,_0xa95f13,_0x224b1e);}['resolveInstance'](_0x34ce58,_0x281a71,_0x2354a5={}){const _0x1f1899=a67_0xdd234f,_0x58d324={};_0x58d324[_0x1f1899(0x1b9)]=function(_0x4f53b3,_0x33116d){return _0x4f53b3===_0x33116d;};const _0x1c7ab3=_0x58d324;let _0x15243a=null;return(_0x1c7ab3[_0x1f1899(0x1b9)](_0x34ce58,TestFrameworkState[_0x1f1899(0x13b)])||_0x1c7ab3[_0x1f1899(0x1b9)](_0x34ce58,TestFrameworkState[_0x1f1899(0x13f)]))&&this['trackPlaywrightInstance'](_0x34ce58,_0x2354a5),_0x15243a=TestFramework[_0x1f1899(0x129)](),_0x15243a;}[a67_0xdd234f(0x1c3)](_0x28295a,_0x1941b0){const _0x29fbb3=a67_0xdd234f,_0x1684d1=CLIUtils[_0x29fbb3(0x1eb)](),_0x4b76b3=TrackedInstance[_0x29fbb3(0x170)](_0x1684d1);let _0x2d3c85=null;logger[_0x29fbb3(0x180)](_0x29fbb3(0x194)+_0x1684d1+_0x29fbb3(0x15c)+_0x28295a),_0x2d3c85=new TestFrameworkInstance(_0x4b76b3,this[_0x29fbb3(0x1d5)](),this[_0x29fbb3(0x156)](),_0x28295a,HookState[_0x29fbb3(0x13f)]),TestFramework[_0x29fbb3(0x191)](_0x4b76b3,_0x2d3c85),logger[_0x29fbb3(0x180)](_0x29fbb3(0x13a)+_0x4b76b3[_0x29fbb3(0x15b)]()+'\x20target='+_0x1684d1);}[a67_0xdd234f(0x181)](_0x19c896,_0x9ec575){const _0x111b4f=a67_0xdd234f,_0x3162dd={'gpBAm':function(_0x39aab8,_0x1516b){return _0x39aab8(_0x1516b);},'cVvTU':function(_0x53adef,_0x3f1d8a){return _0x53adef(_0x3f1d8a);},'gJUKA':function(_0x49d140,_0x2c518a){return _0x49d140(_0x2c518a);},'fjoxN':function(_0x9e6a96,_0xb77d73){return _0x9e6a96(_0xb77d73);},'HVcjO':function(_0x54cc9a,_0x2b6b82){return _0x54cc9a(_0x2b6b82);}},_0xaa72c9=_0x3162dd['gpBAm'](getPlaywrightTestId,_0x9ec575),_0x27a30c=_0x3162dd[_0x111b4f(0x1d0)](getPlaywrightTestTitle,_0x9ec575),_0x338c4f=_0x3162dd[_0x111b4f(0x1d2)](getTestTags,_0x9ec575),_0x1c9d3e=_0x3162dd[_0x111b4f(0x1b3)](getPlaywrightTestCode,_0x9ec575),_0x2953df=_0x3162dd[_0x111b4f(0x12f)](getPlaywrightTestFilePath,_0x9ec575),_0x55664b=_0x2953df+':'+_0x3162dd[_0x111b4f(0x12f)](getPlaywrightTestLocation,_0x9ec575),_0x3b2dad=_0x3162dd[_0x111b4f(0x1d0)](getPlaywrightTestScope,_0x9ec575),_0x5f0e08=_0x3162dd[_0x111b4f(0x14b)](getPlaywrightTestScopes,_0x9ec575),_0x2a649f=_0x3162dd[_0x111b4f(0x14b)](getPlaywrightSessionName,_0x9ec575),_0x5926a1=this['getTestFrameworks']()[0x0],_0x25fc5f={[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x5926a1,[TestFrameworkConstants[_0x111b4f(0x188)]]:this[_0x111b4f(0x156)]()[_0x5926a1],[TestFrameworkConstants[_0x111b4f(0x17b)]]:[],[TestFrameworkConstants[_0x111b4f(0x135)]]:{},[TestFrameworkConstants[_0x111b4f(0x1a2)]]:{},[TestFrameworkConstants['KEY_TEST_UUID']]:_0x19c896,[TestFrameworkConstants['KEY_TEST_RESULT']]:TestFrameworkConstants[_0x111b4f(0x1ea)],[TestFrameworkConstants[_0x111b4f(0x13d)]]:_0x2a649f,[TestFrameworkConstants[_0x111b4f(0x150)]]:_0x2953df,[TestFrameworkConstants[_0x111b4f(0x195)]]:_0xaa72c9,[TestFrameworkConstants['KEY_TEST_NAME']]:_0x27a30c,[TestFrameworkConstants['KEY_TEST_LOCATION']]:_0x55664b,[TestFrameworkConstants[_0x111b4f(0x164)]]:_0x1c9d3e,[TestFrameworkConstants[_0x111b4f(0x1f5)]]:_0x338c4f,[TestFrameworkConstants[_0x111b4f(0x18c)]]:_0x9ec575['results'][0x0]['startTime'],[TestFrameworkConstants[_0x111b4f(0x1b7)]]:_0x3b2dad,[TestFrameworkConstants[_0x111b4f(0x171)]]:_0x5f0e08,[TestFrameworkConstants[_0x111b4f(0x19c)]]:_0x3162dd[_0x111b4f(0x1d2)](getPlaywrightCustomRerunParam,_0x9ec575)};TestInfo['setTestDetails'](_0x9ec575['id'],_0x25fc5f);const _0x2c502b={};return _0x2c502b[_0xaa72c9]=_0x25fc5f,_0x2c502b;}['parsePlaywrightTestResult'](_0x5af671,_0x28b7f4,_0x2209c5){const _0x2afe73=a67_0xdd234f,_0x261420={'XUqqZ':function(_0x5effa2,_0x1a940e){return _0x5effa2(_0x1a940e);},'IIFxg':_0x2afe73(0x1f8),'fZdrt':function(_0x5cd646,_0x54a71){return _0x5cd646===_0x54a71;},'dKrGu':function(_0x201d44,_0x24e01d){return _0x201d44===_0x24e01d;},'PyBjr':function(_0x19a4b2,_0x1daf82){return _0x19a4b2===_0x1daf82;},'HNfnk':'No\x20reason\x20provided','NjTIS':_0x2afe73(0x16a),'gittU':function(_0x13b755,_0xdc7a9d){return _0x13b755(_0xdc7a9d);},'foses':function(_0x1415a6,_0x480e14){return _0x1415a6+_0x480e14;},'AyojE':_0x2afe73(0x16b),'KPPIR':_0x2afe73(0x1c1),'cyZYF':function(_0x385688,_0x5b807d){return _0x385688===_0x5b807d;},'lRjhn':_0x2afe73(0x18a),'aaBqM':_0x2afe73(0x1f9),'LrveW':_0x2afe73(0x166),'SSqjL':function(_0x53fda1,_0x37742,_0x572c5f){return _0x53fda1(_0x37742,_0x572c5f);},'EhwPn':function(_0x2e0fc2,_0x119b2c){return _0x2e0fc2||_0x119b2c;},'FsMDJ':function(_0x4ea4f2,_0x234582){return _0x4ea4f2(_0x234582);},'LPhAm':function(_0x13d85e,_0x173b1b){return _0x13d85e(_0x173b1b);},'aVIvf':function(_0x1b3b2f,_0x4a4b9d,_0x5a115c){return _0x1b3b2f(_0x4a4b9d,_0x5a115c);},'CRiFn':'path','dorvd':function(_0x4a665a,_0x4a1439){return _0x4a665a>_0x4a1439;},'SDQNO':function(_0x44e5e7,_0x4cb327,_0x484672){return _0x44e5e7(_0x4cb327,_0x484672);},'JFXOD':function(_0x4b5832,_0x612f2){return _0x4b5832>_0x612f2;}};logger[_0x2afe73(0x179)]('parsePlaywrightTestResult:\x20testId='+_0x5af671);const _0x59fa5d=new Date(_0x28b7f4[_0x2afe73(0x19d)]),_0x4642ca=_0x28b7f4[_0x2afe73(0x1bb)],_0x69ab55=new Date(_0x261420['foses'](_0x59fa5d[_0x2afe73(0x128)](),_0x4642ca)),_0x4ddc77=_0x28b7f4[_0x2afe73(0x16e)],_0x27baba=TestInfo[_0x2afe73(0x136)](_0x5af671)[TestFrameworkConstants['KEY_CUSTOM_TAGS']]||{};let _0x228b91=_0x4ddc77;if(_0x261420[_0x2afe73(0x163)](_0x28b7f4['status'],_0x2209c5['expectedStatus']))_0x228b91=_0x261420[_0x2afe73(0x1df)](_0x28b7f4[_0x2afe73(0x16e)],_0x261420[_0x2afe73(0x1ec)])?_0x261420[_0x2afe73(0x1ec)]:_0x261420['KPPIR'];else{(_0x261420[_0x2afe73(0x1df)](_0x228b91,_0x261420[_0x2afe73(0x1c9)])||_0x261420[_0x2afe73(0x1fa)](_0x228b91,_0x261420[_0x2afe73(0x14a)])||_0x261420[_0x2afe73(0x1df)](_0x228b91,_0x261420[_0x2afe73(0x17a)]))&&(_0x228b91=_0x261420['lRjhn']);if(_0x261420['cyZYF'](_0x28b7f4['status'],_0x261420[_0x2afe73(0x1c9)])&&_0x261420['dKrGu'](_0x2209c5[_0x2afe73(0x192)],_0x261420[_0x2afe73(0x14a)])){const _0x1c54ce={};_0x1c54ce[_0x2afe73(0x12d)]=_0x261420[_0x2afe73(0x126)],_0x1c54ce[_0x2afe73(0x1f0)]=_0x261420[_0x2afe73(0x126)],_0x28b7f4['error']=_0x1c54ce,_0x28b7f4['errors']=[_0x28b7f4[_0x2afe73(0x1a5)]];}}const {failureData:_0x1c1893,logs:_0x13a90a}=_0x261420[_0x2afe73(0x1b1)](getFailureData,_0x28b7f4?.[_0x2afe73(0x1ce)],{}),_0x5ff7b4={[TestFrameworkConstants[_0x2afe73(0x155)]]:_0x261420[_0x2afe73(0x152)](_0x1c1893,null),[TestFrameworkConstants['KEY_TEST_FAILURE_TYPE']]:_0x28b7f4?.[_0x2afe73(0x1a5)]&&_0x261420['FsMDJ'](getFailureType,_0x28b7f4[_0x2afe73(0x1a5)][_0x2afe73(0x12d)]),[TestFrameworkConstants['KEY_TEST_FAILURE_REASON']]:_0x28b7f4?.[_0x2afe73(0x1a5)]&&_0x261420[_0x2afe73(0x16f)](removeAnsiColors,_0x28b7f4['error'][_0x2afe73(0x12d)]),[TestFrameworkConstants[_0x2afe73(0x1a8)]]:[],[TestFrameworkConstants['KEY_TEST_RESULT']]:_0x228b91,[TestFrameworkConstants['KEY_TEST_ENDED_AT']]:_0x69ab55[_0x2afe73(0x151)](),[TestFrameworkConstants[_0x2afe73(0x148)]]:new Date()[_0x2afe73(0x151)](),[TestFrameworkConstants[_0x2afe73(0x159)]]:_0x27baba},_0x42d652={};_0x42d652[_0x2afe73(0x19a)]=_0x2209c5;const _0x40fea0=this[_0x2afe73(0x1d1)](TestFrameworkState[_0x2afe73(0x183)],HookState[_0x2afe73(0x1d8)],_0x42d652),_0x1bc435=_0x40fea0[_0x2afe73(0x1b2)]()[_0x2afe73(0x1c4)](_0x5af671)[TestFrameworkConstants['KEY_TEST_UUID']],_0x2ca35d=[],_0x4c1397=_0x261420[_0x2afe73(0x1af)](findNestedKey,_0x28b7f4,_0x261420[_0x2afe73(0x15f)]);if(_0x4c1397&&_0x261420[_0x2afe73(0x139)](validateFilePath,_0x4c1397))try{_0x2ca35d[_0x2afe73(0x138)]({'kind':_0x261420[_0x2afe73(0x185)],'timestamp':new Date()[_0x2afe73(0x151)](),'test_run_uuid':_0x1bc435,'file_name':path[_0x2afe73(0x1ae)](_0x4c1397),'file_size':fs[_0x2afe73(0x1c7)](_0x4c1397)[_0x2afe73(0x1e4)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x280651){logger['error']('Error\x20processing\x20direct\x20trace\x20file\x20'+_0x4c1397+':\x20'+_0x280651[_0x2afe73(0x12d)]);}const _0x449eb0=TestInfo[_0x2afe73(0x1a7)](),_0x3b1dfc=_0x449eb0[_0x2afe73(0x1e7)](_0x5d85c4=>_0x5d85c4[_0x2afe73(0x167)]===_0x1bc435);_0x3b1dfc['forEach'](_0x16359f=>{const _0x1c5422=_0x2afe73;if(_0x16359f['filePath']&&_0x261420[_0x1c5422(0x133)](validateFilePath,_0x16359f[_0x1c5422(0x131)])&&!_0x2ca35d['some'](_0x303693=>_0x303693[_0x1c5422(0x146)]===path[_0x1c5422(0x1ae)](_0x16359f[_0x1c5422(0x131)])))try{_0x2ca35d[_0x1c5422(0x138)]({'kind':_0x261420[_0x1c5422(0x185)],'timestamp':new Date()[_0x1c5422(0x151)](),'test_run_uuid':_0x1bc435,'file_name':path[_0x1c5422(0x1ae)](_0x16359f[_0x1c5422(0x131)]),'file_size':fs[_0x1c5422(0x1c7)](_0x16359f[_0x1c5422(0x131)])[_0x1c5422(0x1e4)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x584e5e){logger[_0x1c5422(0x1a5)]('Error\x20processing\x20trace\x20file\x20'+_0x16359f[_0x1c5422(0x131)]+_0x1c5422(0x132)+_0x584e5e['message']);}});if(_0x261420[_0x2afe73(0x18d)](_0x2ca35d[_0x2afe73(0x1ab)],0x0)){const _0x117a84=_0x5ff7b4[TestFrameworkConstants['KEY_LOGS']]||[];_0x5ff7b4[TestFrameworkConstants[_0x2afe73(0x1a8)]]=[..._0x117a84,..._0x2ca35d];}const _0x123451=TestInfo[_0x2afe73(0x136)](_0x5af671)[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{},_0x417fe9=_0x261420[_0x2afe73(0x186)](getManualUploadLogs,_0x123451,_0x40fea0['getAllData']()['get'](_0x5af671)[TestFrameworkConstants[_0x2afe73(0x1c0)]]);if(_0x261420[_0x2afe73(0x1c2)](_0x417fe9[_0x2afe73(0x1ab)],0x0)){const _0x3aa836=_0x5ff7b4[TestFrameworkConstants[_0x2afe73(0x1a8)]]||[];_0x5ff7b4[TestFrameworkConstants[_0x2afe73(0x1a8)]]=[..._0x3aa836,..._0x417fe9];}const _0x8c69a1=_0x2209c5[_0x2afe73(0x1c6)]||[],_0x4fbbd0=_0x5ff7b4[TestFrameworkConstants['KEY_CUSTOM_TAGS']]||{};_0x8c69a1[_0x2afe73(0x1cc)](_0x4afcf6=>{const _0x2f0d55=_0x2afe73,{type:_0xbb74f0}=_0x4afcf6;let _0xd86fea=_0x4afcf6[_0x2f0d55(0x1a0)];if(!_0xbb74f0)return;(_0x261420[_0x2f0d55(0x163)](_0xd86fea,undefined)||_0x261420[_0x2f0d55(0x19f)](_0xd86fea,null)||_0x261420['PyBjr'](_0x261420[_0x2f0d55(0x133)](String,_0xd86fea)[_0x2f0d55(0x182)](),''))&&(_0xd86fea=_0x261420[_0x2f0d55(0x176)]);if(!_0x4fbbd0[_0xbb74f0]){const _0x584777={};_0x584777[_0x2f0d55(0x1f1)]=_0x261420[_0x2f0d55(0x1e5)],_0x584777['values']=[],_0x4fbbd0[_0xbb74f0]=_0x584777;}else!_0x4fbbd0[_0xbb74f0][_0x2f0d55(0x1f1)]&&(_0x4fbbd0[_0xbb74f0][_0x2f0d55(0x1f1)]=_0x261420[_0x2f0d55(0x1e5)]),!Array[_0x2f0d55(0x1e3)](_0x4fbbd0[_0xbb74f0][_0x2f0d55(0x1ac)])&&(_0x4fbbd0[_0xbb74f0]['values']=[]);const _0x4212db=_0x261420[_0x2f0d55(0x139)](String,_0xd86fea)[_0x2f0d55(0x1da)](',')[_0x2f0d55(0x1ca)](_0x12a8f4=>_0x12a8f4[_0x2f0d55(0x182)]());_0x4fbbd0[_0xbb74f0][_0x2f0d55(0x1ac)]=[...new Set([..._0x4fbbd0[_0xbb74f0][_0x2f0d55(0x1ac)],..._0x4212db])];}),_0x5ff7b4[TestFrameworkConstants[_0x2afe73(0x159)]]=_0x4fbbd0,TestInfo['setTestDetails'](_0x5af671,_0x5ff7b4);const _0x6524c6={};return _0x6524c6[_0x5af671]=_0x5ff7b4,_0x6524c6;}async[a67_0xdd234f(0x1e6)](_0x5a1ca9,_0x2ea4b7,_0x515035,_0x5ed35a){const _0xc5e7b3=a67_0xdd234f,_0xed47cc={'xrSak':function(_0x4d5688,_0x13f472){return _0x4d5688 in _0x13f472;},'NkRiD':function(_0x5d00ce,_0x523c1f){return _0x5d00ce in _0x523c1f;},'uLNOn':function(_0x1af884,_0x3e825f){return _0x1af884(_0x3e825f);},'QbRnC':function(_0xcd9c67,_0x4c2635){return _0xcd9c67(_0x4c2635);},'XxUjB':function(_0x51efb0,_0xe6112d){return _0x51efb0===_0xe6112d;},'PXjuH':function(_0x2bef68){return _0x2bef68();},'QQkYr':function(_0x5c9cb4,_0x22bb30){return _0x5c9cb4===_0x22bb30;},'dauIq':function(_0x571102,_0x195e42){return _0x571102>_0x195e42;},'ZasMj':function(_0x20aa0d,_0x2e0d2e,_0x2b5a5b){return _0x20aa0d(_0x2e0d2e,_0x2b5a5b);},'ECzvF':_0xc5e7b3(0x18e),'kpszC':function(_0x1bb4f0,_0x1c4e99){return _0x1bb4f0(_0x1c4e99);},'sBTec':_0xc5e7b3(0x18a),'MEoii':_0xc5e7b3(0x1c1),'mQgbT':function(_0x405268,_0xccf7c0){return _0x405268!==_0xccf7c0;},'aVOic':function(_0x4fa664,_0x823743){return _0x4fa664+_0x823743;},'MbzmH':_0xc5e7b3(0x178)},_0x5b2655=_0x5ed35a[_0xc5e7b3(0x19a)],_0x551dff=_0x5ed35a['step'],_0x552363=_0x5ed35a['test']['id'],_0xc2be04=_0x2ea4b7[_0xc5e7b3(0x12b)]()[_0xc5e7b3(0x1da)]('.')[0x1];let _0xc716fd=_0x5a1ca9[_0xc5e7b3(0x1b2)]()[_0xc5e7b3(0x1c4)](_0x552363)[TestFrameworkConstants[_0xc5e7b3(0x1a2)]];!_0xc716fd&&(_0xc716fd={});!_0xed47cc['xrSak'](_0xc2be04,_0xc716fd)&&(_0xc716fd[_0xc2be04]=[]);let _0x45f6de=_0x5a1ca9[_0xc5e7b3(0x1b2)]()['get'](_0x552363)[TestFrameworkConstants[_0xc5e7b3(0x135)]];!_0x45f6de&&(_0x45f6de={});!_0xed47cc[_0xc5e7b3(0x14d)](_0xc2be04,_0x45f6de)&&(_0x45f6de[_0xc2be04]=[]);const _0x1a1343={[TestFrameworkConstants[_0xc5e7b3(0x1a2)]]:_0xc716fd,[TestFrameworkConstants[_0xc5e7b3(0x135)]]:_0x45f6de},_0x501909={};_0x501909[_0x552363]=_0x1a1343;const _0x308223=_0x501909,_0x1667b6=_0xed47cc[_0xc5e7b3(0x1ed)](getPlaywrightTestFilePath,_0x5b2655),_0x3de85e=_0x1667b6+':'+_0xed47cc['QbRnC'](getPlaywrightTestLocation,_0x5b2655),_0x495c7e=TestInfo[_0xc5e7b3(0x136)](_0x552363)[TestFrameworkConstants['KEY_CUSTOM_TAGS']]||{};if(_0xed47cc[_0xc5e7b3(0x17f)](_0x515035,HookState['PRE'])){const _0x2b49ea={'key':_0xc2be04,[TestFrameworkConstants[_0xc5e7b3(0x199)]]:_0xed47cc[_0xc5e7b3(0x13e)](uuidv4),[TestFrameworkConstants[_0xc5e7b3(0x143)]]:TestFrameworkConstants[_0xc5e7b3(0x12e)],[TestFrameworkConstants[_0xc5e7b3(0x1b4)]]:_0x551dff['startTime'],[TestFrameworkConstants[_0xc5e7b3(0x18b)]]:[],[TestFrameworkConstants[_0xc5e7b3(0x160)]]:_0x551dff[_0xc5e7b3(0x141)],[TestFrameworkConstants[_0xc5e7b3(0x150)]]:_0x1667b6,[TestFrameworkConstants[_0xc5e7b3(0x142)]]:_0x3de85e,[TestFrameworkConstants[_0xc5e7b3(0x159)]]:_0x495c7e};_0xc716fd[_0xc2be04]['push'](_0x2b49ea),_0x308223[_0x552363][TestFrameworkConstants[_0xc5e7b3(0x130)]]=_0xc2be04,logger[_0xc5e7b3(0x179)]('Hook\x20Started\x20in\x20PRE\x20key\x20=\x20'+_0xc2be04+'\x20&\x20hook\x20=\x20'+_0x2b49ea+_0xc5e7b3(0x1d9)+_0x5ed35a);}else{if(_0xed47cc[_0xc5e7b3(0x137)](_0x515035,HookState[_0xc5e7b3(0x1d8)])){const _0x4f492b=await _0x5ed35a[_0xc5e7b3(0x1fb)],_0x17d272=_0xc716fd[_0xc2be04]||[],_0x4face9=_0x5ed35a[_0xc5e7b3(0x14c)];logger[_0xc5e7b3(0x179)](_0xc5e7b3(0x1a4)+_0x17d272+_0xc5e7b3(0x16d)+_0x5ed35a);if(_0xed47cc[_0xc5e7b3(0x12a)](_0x17d272[_0xc5e7b3(0x1ab)],0x0)){const _0x3d623c=_0x17d272['pop']();if(_0x4face9['error']){const _0x351dea=_0xed47cc[_0xc5e7b3(0x1ee)](failureData,_0x4face9[_0xc5e7b3(0x1a5)],_0xed47cc[_0xc5e7b3(0x17c)]);_0x3d623c[TestFrameworkConstants[_0xc5e7b3(0x1d6)]]=_0xed47cc['kpszC'](getFailureType,_0x4face9?.['error'][_0xc5e7b3(0x12d)]),_0x3d623c[TestFrameworkConstants[_0xc5e7b3(0x1f4)]]=_0xed47cc[_0xc5e7b3(0x1ed)](removeAnsiColors,_0x4face9?.[_0xc5e7b3(0x1a5)][_0xc5e7b3(0x12d)]),_0x3d623c[TestFrameworkConstants[_0xc5e7b3(0x143)]]=_0xed47cc[_0xc5e7b3(0x144)],_0x3d623c[TestFrameworkConstants[_0xc5e7b3(0x1dc)]]=_0x351dea;}else _0x3d623c[TestFrameworkConstants[_0xc5e7b3(0x143)]]=_0xed47cc[_0xc5e7b3(0x1a6)];_0xed47cc[_0xc5e7b3(0x190)](_0x4f492b,TestFrameworkConstants['DEFAULT_HOOK_RESULT'])&&(_0x3d623c[TestFrameworkConstants['KEY_HOOK_RESULT']]=!_0x4face9['error']?_0xed47cc[_0xc5e7b3(0x1a6)]:_0xed47cc['sBTec']);const _0x23cbca=new Date(_0x4face9['startTime']),_0x20e34c=new Date(_0xed47cc[_0xc5e7b3(0x134)](_0x23cbca[_0xc5e7b3(0x128)](),_0x4face9['duration']));_0x3d623c[TestFrameworkConstants[_0xc5e7b3(0x1e0)]]=_0x20e34c[_0xc5e7b3(0x151)](),_0x3d623c[TestFrameworkConstants[_0xc5e7b3(0x159)]]=_0x495c7e;const _0x51a17b=_0x3d623c[TestFrameworkConstants[_0xc5e7b3(0x199)]];await this['sendLogCreatedEvent'](_0x5a1ca9,_0x2ea4b7,_0x51a17b,_0xed47cc[_0xc5e7b3(0x1aa)],_0x5ed35a),!_0x45f6de[_0xc2be04]&&(_0x45f6de[_0xc2be04]=[]),_0x45f6de[_0xc2be04][_0xc5e7b3(0x138)](_0x3d623c),_0x308223[_0x552363][TestFrameworkConstants[_0xc5e7b3(0x1b5)]]=_0xc2be04;}}}return _0x308223;}async[a67_0xdd234f(0x1bc)](_0x54660d,_0x1f914d,_0x418833,_0x233240,_0x53fafa){const _0x18ca48=a67_0xdd234f,_0x46b15a={'KhqvA':function(_0x11818e,_0x1f87df){return _0x11818e===_0x1f87df;},'XeXsF':'test','yWdxr':function(_0x328c42,_0x464d7b,_0x255a14){return _0x328c42(_0x464d7b,_0x255a14);},'rHNzB':'attachments','egCEX':function(_0x3b3975,_0x4aef30,_0x17fb95,_0x3b6e4e){return _0x3b3975(_0x4aef30,_0x17fb95,_0x3b6e4e);},'ySXDl':function(_0xca0e93,_0x1537b8,_0x388713){return _0xca0e93(_0x1537b8,_0x388713);},'legMI':function(_0x7ec7fd,_0x4f2d7e){return _0x7ec7fd/_0x4f2d7e;},'KfGyz':function(_0x8828b2,_0x5eaf73){return _0x8828b2<_0x5eaf73;},'DnnBy':function(_0xf498d2,_0x29834d){return _0xf498d2*_0x29834d;},'qsujx':function(_0x20adbb,_0x1f67a1){return _0x20adbb+_0x1f67a1;},'rUiKQ':function(_0x298e70,_0x15a393,_0x909d4a,_0x2a091c,_0x438624){return _0x298e70(_0x15a393,_0x909d4a,_0x2a091c,_0x438624);},'WgXsw':function(_0x5951df,_0x279eca){return _0x5951df+_0x279eca;},'rYyqp':_0x18ca48(0x178)};try{if(_0x46b15a[_0x18ca48(0x1dd)](_0x233240,_0x46b15a[_0x18ca48(0x1a9)])){const _0x391513=await _0x53fafa['result'],_0x168ada=_0x53fafa['test']['id'],_0x38ca57=_0x53fafa[_0x18ca48(0x19a)];logger[_0x18ca48(0x179)]('sendLogCreatedEvent:\x20testId='+_0x168ada+'\x20result='+util[_0x18ca48(0x127)](_0x391513));const _0x1ebdc0=_0x54660d[_0x18ca48(0x1b2)]()[_0x18ca48(0x1c4)](_0x168ada)[TestFrameworkConstants[_0x18ca48(0x1c0)]];await _0x46b15a[_0x18ca48(0x1e9)](sendTraceZip,_0x391513,_0x1ebdc0);const _0x41a27d=TestInfo[_0x18ca48(0x136)](_0x168ada)[_0x46b15a['rHNzB']];if(_0x41a27d){!_0x391513['attachments']&&(_0x391513[_0x18ca48(0x1d3)]=[]);Object[_0x18ca48(0x17d)](_0x391513[_0x18ca48(0x1d3)],_0x391513[_0x18ca48(0x1d3)][_0x18ca48(0x1d4)](_0x41a27d));const _0x3c700e=TestInfo[_0x18ca48(0x136)](_0x168ada);delete _0x3c700e[_0x46b15a[_0x18ca48(0x12c)]],TestInfo[_0x18ca48(0x1e1)](_0x168ada,_0x3c700e);}const {steps:_0x43a133,logs:_0x5a7559}=_0x46b15a['egCEX'](getStepsAndLogs,_0x391513['steps'],_0x54660d[_0x18ca48(0x1b2)]()[_0x18ca48(0x1c4)](_0x168ada)[TestFrameworkConstants[_0x18ca48(0x1c0)]],_0x46b15a['XeXsF']),_0x3b98ad=_0x46b15a[_0x18ca48(0x1cd)](getScreenshots,_0x391513,_0x54660d[_0x18ca48(0x1b2)]()[_0x18ca48(0x1c4)](_0x168ada)[TestFrameworkConstants[_0x18ca48(0x1c0)]]),_0x9bc77e=_0x46b15a[_0x18ca48(0x1e9)](getVideos,_0x391513,_0x54660d[_0x18ca48(0x1b2)]()[_0x18ca48(0x1c4)](_0x168ada)[TestFrameworkConstants[_0x18ca48(0x1c0)]]),{_:_0x1b46f6,logs:_0x49f32d}=_0x46b15a['yWdxr'](getFailureData,_0x391513['errors'],{'test_run_uuid':_0x54660d['getAllData']()[_0x18ca48(0x1c4)](_0x168ada)[TestFrameworkConstants[_0x18ca48(0x1c0)]]}),_0x4bc205=TestInfo[_0x18ca48(0x136)](_0x168ada)[TestFrameworkConstants[_0x18ca48(0x1ad)]]||{},_0x49f06c=_0x46b15a[_0x18ca48(0x1cd)](getMediaArtifactsLogs,_0x4bc205,_0x54660d[_0x18ca48(0x1b2)]()[_0x18ca48(0x1c4)](_0x168ada)[TestFrameworkConstants[_0x18ca48(0x1c0)]]),_0x15e658=_0x54660d[_0x18ca48(0x1b2)]()[_0x18ca48(0x1c4)](_0x168ada),{[TestFrameworkConstants[_0x18ca48(0x168)]]:_0x3550d1='',[TestFrameworkConstants[_0x18ca48(0x188)]]:_0x479509=''}=_0x15e658,_0x2b8292=(_0x5a7559||[])[_0x18ca48(0x1d4)](_0x3b98ad||[])[_0x18ca48(0x1d4)](_0x49f32d||[])['concat'](_0x9bc77e||[])[_0x18ca48(0x1d4)](_0x49f06c||[]),_0x5863aa=0x28,_0x1ccfdc=Math[_0x18ca48(0x19b)](_0x46b15a['legMI'](_0x2b8292['length'],_0x5863aa));for(let _0x2d1674=0x0;_0x46b15a[_0x18ca48(0x197)](_0x2d1674,_0x1ccfdc);_0x2d1674++){const _0x8b6ac1=_0x46b15a[_0x18ca48(0x19e)](_0x2d1674,_0x5863aa),_0x38cb50=_0x46b15a[_0x18ca48(0x1e2)](_0x8b6ac1,_0x5863aa),_0x4dcb9d=_0x2b8292[_0x18ca48(0x1db)](_0x8b6ac1,_0x38cb50),_0x20739b={'platformIndex':'0','logs':_0x4dcb9d,'testFrameworkName':_0x3550d1,'testFrameworkVersion':_0x479509,'testFrameworkState':_0x1f914d['toString']()[_0x18ca48(0x1da)]('.')[0x1]};_0x46b15a['rUiKQ'](updatePayloadForTraceLogs,_0x20739b,_0x53fafa,_0x168ada,_0x54660d),logger[_0x18ca48(0x179)](_0x18ca48(0x140)+_0x168ada+_0x18ca48(0x198)+_0x46b15a[_0x18ca48(0x1f7)](_0x2d1674,0x1)+'/'+_0x1ccfdc+_0x18ca48(0x169)+util[_0x18ca48(0x127)](_0x20739b));const _0x431d85=await GrpcClient[_0x18ca48(0x149)]()[_0x18ca48(0x1f2)](_0x20739b);logger[_0x18ca48(0x179)](_0x18ca48(0x140)+_0x168ada+_0x18ca48(0x198)+_0x46b15a[_0x18ca48(0x1f7)](_0x2d1674,0x1)+'/'+_0x1ccfdc+'\x20response='+util['inspect'](_0x431d85));}}else{const {steps:_0x43ed3a,logs:_0x56f935}=_0x46b15a[_0x18ca48(0x125)](getStepsAndLogs,_0x53fafa[_0x18ca48(0x14c)][_0x18ca48(0x1c8)],_0x418833,_0x46b15a[_0x18ca48(0x1ef)]),_0x4658d1=_0x53fafa['test']['id'];logger[_0x18ca48(0x179)](_0x18ca48(0x16c)+_0x4658d1);const _0x1cfa36=_0x54660d[_0x18ca48(0x1b2)]()[_0x18ca48(0x1c4)](_0x4658d1),{[TestFrameworkConstants[_0x18ca48(0x168)]]:_0x4afed2='',[TestFrameworkConstants[_0x18ca48(0x188)]]:_0x505d0b=''}=_0x1cfa36,_0x1ceba7={'platformIndex':'0','logs':_0x56f935,'testFrameworkName':_0x4afed2,'testFrameworkVersion':_0x505d0b,'testFrameworkState':_0x1f914d[_0x18ca48(0x12b)]()[_0x18ca48(0x1da)]('.')[0x1]};_0x46b15a[_0x18ca48(0x1f3)](updatePayloadForTraceLogs,_0x1ceba7,_0x53fafa,_0x4658d1,_0x54660d),logger[_0x18ca48(0x179)](_0x18ca48(0x140)+_0x4658d1+_0x18ca48(0x169)+util[_0x18ca48(0x127)](_0x1ceba7));const _0x5380ac=await GrpcClient['getInstance']()[_0x18ca48(0x1f2)](_0x1ceba7);}}catch(_0xac6fa1){logger[_0x18ca48(0x1a5)](_0x18ca48(0x157)+util[_0x18ca48(0x153)](_0xac6fa1));}}}module[a67_0xdd234f(0x14f)]=PlaywrightTestFramework;