const a67_0x210ce5=a67_0x4b68;(function(_0x17c0c9,_0x964dab){const _0x34d03c=a67_0x4b68,_0x5c4969=_0x17c0c9();while(!![]){try{const _0xda4de=-parseInt(_0x34d03c(0x11d))/0x1*(-parseInt(_0x34d03c(0xb0))/0x2)+-parseInt(_0x34d03c(0x9b))/0x3*(-parseInt(_0x34d03c(0xe4))/0x4)+-parseInt(_0x34d03c(0x156))/0x5+parseInt(_0x34d03c(0xf2))/0x6*(-parseInt(_0x34d03c(0xf0))/0x7)+parseInt(_0x34d03c(0x90))/0x8+parseInt(_0x34d03c(0x8d))/0x9+-parseInt(_0x34d03c(0xbb))/0xa*(-parseInt(_0x34d03c(0xed))/0xb);if(_0xda4de===_0x964dab)break;else _0x5c4969['push'](_0x5c4969['shift']());}catch(_0x3fc38b){_0x5c4969['push'](_0x5c4969['shift']());}}}(a67_0x2b49,0xc2d4c));const TestFramework=require('./testFramework'),TestFrameworkState=require('../state/testFrameworkState.js'),HookState=require(a67_0x210ce5(0x143)),{createClassLogger}=require(a67_0x210ce5(0x11b)),TestFrameworkInstance=require('../instances/testFrameworkInstance.js'),CLIUtils=require(a67_0x210ce5(0x150)),TrackedInstance=require('../instances/trackedInstance.js'),TestFrameworkConstants=require(a67_0x210ce5(0xa7)),logger=createClassLogger(a67_0x210ce5(0x138)),{v4:uuidv4}=require(a67_0x210ce5(0xe7)),util=require(a67_0x210ce5(0xd8)),{getPlaywrightSessionName,getPlaywrightTestFilePath,getPlaywrightTestId,getPlaywrightTestTitle,getPlaywrightTestLocation,getPlaywrightTestTags,getPlaywrightTestCode,getPlaywrightTestScope,getPlaywrightTestScopes,getStepsAndLogs,getScreenshots,getVideos,getPlaywrightCustomRerunParam,getMediaArtifactsLogs,getManualUploadLogs,updatePayloadForTraceLogs}=require(a67_0x210ce5(0xe2)),TestInfo=require('../TestInfo.js'),GrpcClient=require(a67_0x210ce5(0xf5)),{removeAnsiColors,getFailureType,failureData}=require(a67_0x210ce5(0x11c)),{getFailureData,getTestTags,getTestRunIdentifier}=require('../../playwright/reporter/pwUtils'),{findNestedKey,sendTraceZip,validateFilePath}=require(a67_0x210ce5(0x118)),path=require(a67_0x210ce5(0x121)),fs=require('fs'),helper=require('../../../../src/helpers/helper'),{PLAYWRIGHT_TRACE_LOGS}=require('../../utils/constants');class PlaywrightTestFramework extends TestFramework{constructor(_0x76b9de,_0x1199be,_0x211c32){super(_0x76b9de,_0x1199be,_0x211c32);}async[a67_0x210ce5(0xd0)](_0x209daf,_0xe76eae,_0x3c17a6={}){const _0x691734=a67_0x210ce5,_0x1e0caa={'lfMVz':function(_0x58a331,_0xe06c2c){return _0x58a331===_0xe06c2c;},'fggqD':function(_0x1d6639,_0xac5f78,_0x5071cd){return _0x1d6639(_0xac5f78,_0x5071cd);},'XLKZi':function(_0x55dfb3,_0x5d8005){return _0x55dfb3===_0x5d8005;},'ChmEO':_0x691734(0x13b),'uuMBj':_0x691734(0x9d)};super[_0x691734(0xd0)](_0x209daf,_0xe76eae,_0x3c17a6);if(_0x1e0caa[_0x691734(0xdb)](_0x209daf,TestFrameworkState[_0x691734(0xaf)])){const _0x26ea48=TestInfo[_0x691734(0x91)](_0x3c17a6[_0x691734(0x13b)],_0x3c17a6[_0x691734(0x13b)][_0x691734(0x16c)]);TestInfo[_0x691734(0xba)](_0x26ea48,_0x3c17a6[_0x691734(0x16a)],!![]);}const _0x461250=this[_0x691734(0xc0)](_0x209daf,_0xe76eae,_0x3c17a6);if(!_0x461250)return;logger[_0x691734(0x16d)]('trackEvent:\x20found\x20instance,\x20testFrameworkState='+_0x209daf+_0x691734(0x134)+_0xe76eae+'\x20instanceId='+_0x461250[_0x691734(0xaa)]());try{if(_0x1e0caa['lfMVz'](_0xe76eae,HookState[_0x691734(0xf4)])&&_0x1e0caa[_0x691734(0xdb)](_0x209daf,TestFrameworkState[_0x691734(0x13e)])){const _0x4cb19b=_0x3c17a6[_0x691734(0x13b)];logger[_0x691734(0x16d)](_0x691734(0x92)+_0x4cb19b['id']+'}');const _0x3b5701=TestInfo[_0x691734(0x10c)](_0x1e0caa[_0x691734(0xf3)](getTestRunIdentifier,_0x4cb19b,_0x3c17a6[_0x691734(0x16a)]['retry']));_0x461250[_0x691734(0x103)](this['parsePlaywrightTest'](_0x3b5701,_0x4cb19b,_0x3c17a6[_0x691734(0x16a)])),logger[_0x691734(0x16d)](_0x691734(0xad)+_0x4cb19b['id']+_0x691734(0x164)+_0x209daf+_0x691734(0x127)+_0xe76eae+'\x20instance='+_0x461250[_0x691734(0xaa)]());}if(_0x1e0caa[_0x691734(0xdb)](_0xe76eae,HookState[_0x691734(0xd6)])&&_0x1e0caa[_0x691734(0x9a)](_0x209daf,TestFrameworkState[_0x691734(0x13e)])){const _0x31c7d3=_0x3c17a6['test'],_0x4cfb30=_0x3c17a6[_0x691734(0x16a)];logger[_0x691734(0x16d)]('trackEvent\x20loading\x20testResults\x20for\x20testId:\x20'+_0x31c7d3['id']),_0x461250[_0x691734(0x103)](this[_0x691734(0x8f)](_0x31c7d3['id'],_0x4cfb30,_0x31c7d3)),await this[_0x691734(0x13c)](_0x461250,_0x209daf,_0xe76eae,_0x1e0caa[_0x691734(0x116)],_0x3c17a6);}if(CLIUtils[_0x691734(0x8e)](_0x209daf[_0x691734(0x112)]()[_0x691734(0x162)]('.')[0x1])){const _0x490ffe=await this[_0x691734(0x14a)](_0x461250,_0x209daf,_0xe76eae,_0x3c17a6);_0x461250['addMultipleEntries'](_0x490ffe);}}catch(_0x287487){logger[_0x691734(0x102)](util[_0x691734(0xd4)](_0x1e0caa[_0x691734(0x14d)],_0x209daf,_0xe76eae,_0x3c17a6[_0x691734(0xd1)],_0x287487));}_0x3c17a6[_0x691734(0xef)]=_0x461250,await this['runHooks'](_0x461250,_0x209daf,_0xe76eae,_0x3c17a6);}[a67_0x210ce5(0xc0)](_0x40151b,_0x264734,_0xd3bae5={}){const _0x3ae3f5=a67_0x210ce5,_0x40f8cd={};_0x40f8cd['kfKeN']=function(_0x116a37,_0x4de3ac){return _0x116a37===_0x4de3ac;};const _0x16988c=_0x40f8cd;let _0x12f3f5=null;return(_0x16988c[_0x3ae3f5(0xc4)](_0x40151b,TestFrameworkState[_0x3ae3f5(0xcc)])||_0x16988c[_0x3ae3f5(0xc4)](_0x40151b,TestFrameworkState[_0x3ae3f5(0xa9)]))&&this[_0x3ae3f5(0x128)](_0x40151b,_0xd3bae5),_0x12f3f5=TestFramework[_0x3ae3f5(0x141)](),_0x12f3f5;}[a67_0x210ce5(0x128)](_0x4793f9,_0x404d4c){const _0x2e5626=a67_0x210ce5,_0x5df549=CLIUtils[_0x2e5626(0x12f)](),_0xaa3c26=TrackedInstance[_0x2e5626(0x123)](_0x5df549);let _0x246208=null;logger[_0x2e5626(0x13f)](_0x2e5626(0x167)+_0x5df549+_0x2e5626(0xfd)+_0x4793f9),_0x246208=new TestFrameworkInstance(_0xaa3c26,this['getTestFrameworks'](),this[_0x2e5626(0x110)](),_0x4793f9,HookState[_0x2e5626(0xa9)]),TestFramework[_0x2e5626(0x148)](_0xaa3c26,_0x246208),logger['info'](_0x2e5626(0x168)+_0xaa3c26[_0x2e5626(0xdc)]()+_0x2e5626(0x124)+_0x5df549);}[a67_0x210ce5(0x139)](_0x3b6f1f,_0x3e2bc4,_0x1fd476){const _0x401a63=a67_0x210ce5,_0x49f25e={'HKDNu':function(_0x23f7ad,_0x538e40){return _0x23f7ad(_0x538e40);},'DnVsr':function(_0x401124,_0x3750ae){return _0x401124(_0x3750ae);},'TcwIS':function(_0x1facc8,_0x4dcb1c){return _0x1facc8(_0x4dcb1c);},'YafFl':function(_0x44f5e2,_0x5beedf){return _0x44f5e2(_0x5beedf);},'qlfGE':function(_0x395c2a,_0x39c964){return _0x395c2a(_0x39c964);},'gGUjs':function(_0x22621e,_0x4d00ae){return _0x22621e(_0x4d00ae);},'vfYhh':function(_0x357481,_0x3cde8f){return _0x357481(_0x3cde8f);},'WvkXy':function(_0x42093f,_0x18ae54){return _0x42093f(_0x18ae54);},'bwlLZ':function(_0x30c0ab,_0x2b6c7c,_0x2c14ff){return _0x30c0ab(_0x2b6c7c,_0x2c14ff);},'qlmeP':function(_0x2e9696,_0x3e7c63){return _0x2e9696(_0x3e7c63);}},_0x302f3d=_0x49f25e[_0x401a63(0x146)](getPlaywrightTestId,_0x3e2bc4),_0x92954=_0x49f25e['DnVsr'](getPlaywrightTestTitle,_0x3e2bc4),_0x5f59eb=_0x49f25e[_0x401a63(0x101)](getTestTags,_0x3e2bc4),_0x13c97a=_0x49f25e[_0x401a63(0x142)](getPlaywrightTestCode,_0x3e2bc4),_0x1be2ac=_0x49f25e[_0x401a63(0xe5)](getPlaywrightTestFilePath,_0x3e2bc4),_0x47b8e5=_0x1be2ac+':'+_0x49f25e[_0x401a63(0xf7)](getPlaywrightTestLocation,_0x3e2bc4),_0x1ece42=_0x49f25e['DnVsr'](getPlaywrightTestScope,_0x3e2bc4),_0x416995=_0x49f25e[_0x401a63(0x96)](getPlaywrightTestScopes,_0x3e2bc4),_0x5b192b=_0x49f25e[_0x401a63(0xe8)](getPlaywrightSessionName,_0x3e2bc4),_0x4e9a00=this[_0x401a63(0x163)]()[0x0],_0x3a7c75=_0x49f25e[_0x401a63(0x155)](getTestRunIdentifier,_0x3e2bc4,_0x1fd476[_0x401a63(0x16c)]),_0x347bf1={[TestFrameworkConstants[_0x401a63(0xc8)]]:_0x4e9a00,[TestFrameworkConstants[_0x401a63(0xbf)]]:this[_0x401a63(0x110)]()[_0x4e9a00],[TestFrameworkConstants[_0x401a63(0x12a)]]:[],[TestFrameworkConstants['KEY_HOOKS_FINISHED']]:{},[TestFrameworkConstants[_0x401a63(0xdd)]]:{},[TestFrameworkConstants['KEY_TEST_UUID']]:_0x3b6f1f,[TestFrameworkConstants[_0x401a63(0x130)]]:TestFrameworkConstants[_0x401a63(0x140)],[TestFrameworkConstants[_0x401a63(0xd2)]]:_0x5b192b,[TestFrameworkConstants[_0x401a63(0x135)]]:_0x1be2ac,[TestFrameworkConstants['KEY_TEST_ID']]:_0x302f3d,[TestFrameworkConstants[_0x401a63(0xb8)]]:_0x92954,[TestFrameworkConstants[_0x401a63(0x115)]]:_0x47b8e5,[TestFrameworkConstants['KEY_TEST_CODE']]:_0x13c97a,[TestFrameworkConstants[_0x401a63(0x15b)]]:_0x5f59eb,[TestFrameworkConstants[_0x401a63(0xe6)]]:_0x3e2bc4[_0x401a63(0x98)][0x0]['startTime'],[TestFrameworkConstants[_0x401a63(0x107)]]:_0x1ece42,[TestFrameworkConstants[_0x401a63(0xd9)]]:_0x416995,[TestFrameworkConstants[_0x401a63(0x16b)]]:_0x49f25e[_0x401a63(0xb6)](getPlaywrightCustomRerunParam,_0x3e2bc4)};TestInfo[_0x401a63(0xba)](_0x3a7c75,_0x347bf1);const _0x219b22={};return _0x219b22[_0x3a7c75]=_0x347bf1,_0x219b22;}['parsePlaywrightTestResult'](_0x43e21d,_0x439ce3,_0x2f2732){const _0x193600=a67_0x210ce5,_0x4b1a40={'IeOHu':function(_0xf09371,_0x123e80){return _0xf09371(_0x123e80);},'zAnqM':'TEST_ATTACHMENT','uPjOK':function(_0x47577e,_0x3581de){return _0x47577e===_0x3581de;},'HPlAz':function(_0x411472,_0x17d0ef){return _0x411472===_0x17d0ef;},'DblAs':function(_0x59579d,_0x1279ab){return _0x59579d(_0x1279ab);},'SgpaX':'No\x20reason\x20provided','OmYoW':_0x193600(0x99),'fdLHc':function(_0x452770,_0x5be555){return _0x452770(_0x5be555);},'eMYLo':function(_0x4dfcfd,_0x1cfcbc,_0x58eabd){return _0x4dfcfd(_0x1cfcbc,_0x58eabd);},'JDrtD':function(_0x27b3c0,_0x171bd5){return _0x27b3c0+_0x171bd5;},'qOzUO':function(_0x555ea3,_0x263a36){return _0x555ea3===_0x263a36;},'qICVU':_0x193600(0x14e),'JoZYX':_0x193600(0x8c),'TjUSA':function(_0x8fcf8d,_0x50f091){return _0x8fcf8d===_0x50f091;},'FvbeE':function(_0x390f5b,_0x303064){return _0x390f5b===_0x303064;},'eUzsZ':_0x193600(0xa2),'RqYwQ':_0x193600(0xa3),'emyxc':function(_0xf9ecd8,_0x112df6){return _0xf9ecd8===_0x112df6;},'SvkiI':_0x193600(0x97),'Cbtvj':function(_0x34873e,_0x55cae2,_0x492089){return _0x34873e(_0x55cae2,_0x492089);},'KEODd':function(_0xe5da71,_0x533e1f){return _0xe5da71||_0x533e1f;},'dscfW':function(_0x12b92d,_0xe9405a){return _0x12b92d(_0xe9405a);},'MUOpI':function(_0xecb7e8,_0x6c386e){return _0xecb7e8>_0x6c386e;},'zMgZn':function(_0x4a447c,_0x59cebd,_0x43a2ba){return _0x4a447c(_0x59cebd,_0x43a2ba);},'LsEft':function(_0x3a7878,_0x175c38){return _0x3a7878-_0x175c38;},'VcUIq':_0x193600(0x121),'OLiNF':function(_0x4424b8,_0xc25e70){return _0x4424b8(_0xc25e70);},'LqNrt':function(_0x3ebda7,_0x6a0b9,_0x3aa875){return _0x3ebda7(_0x6a0b9,_0x3aa875);}};logger[_0x193600(0x16d)](_0x193600(0xf6)+_0x43e21d);const _0x41064e=_0x4b1a40[_0x193600(0x15d)](getTestRunIdentifier,_0x2f2732,_0x439ce3[_0x193600(0x16c)]),_0x8b36fd=new Date(_0x439ce3[_0x193600(0xda)]),_0x2d38c1=_0x439ce3[_0x193600(0x111)],_0x157cc6=new Date(_0x4b1a40['JDrtD'](_0x8b36fd[_0x193600(0xf8)](),_0x2d38c1)),_0x538baa=_0x439ce3[_0x193600(0xec)],_0x30c464=TestInfo[_0x193600(0xdf)](_0x41064e)[TestFrameworkConstants[_0x193600(0xde)]]||{};let _0x4517bf=_0x538baa;if(_0x4b1a40[_0x193600(0xc9)](_0x439ce3['status'],_0x2f2732['expectedStatus']))_0x4517bf=_0x4b1a40[_0x193600(0xb9)](_0x439ce3['status'],_0x4b1a40[_0x193600(0xa5)])?_0x4b1a40[_0x193600(0xa5)]:_0x4b1a40[_0x193600(0x15e)];else{(_0x4b1a40['TjUSA'](_0x4517bf,_0x4b1a40[_0x193600(0x15e)])||_0x4b1a40[_0x193600(0x149)](_0x4517bf,_0x4b1a40[_0x193600(0x11f)])||_0x4b1a40[_0x193600(0x158)](_0x4517bf,_0x4b1a40[_0x193600(0xac)]))&&(_0x4517bf=_0x4b1a40['eUzsZ']);if(_0x4b1a40[_0x193600(0xb4)](_0x439ce3[_0x193600(0xec)],_0x4b1a40[_0x193600(0x15e)])&&_0x4b1a40[_0x193600(0xc9)](_0x2f2732[_0x193600(0x8b)],_0x4b1a40[_0x193600(0x11f)])){const _0x40fd51={};_0x40fd51[_0x193600(0x166)]=_0x4b1a40[_0x193600(0xc2)],_0x40fd51[_0x193600(0xa4)]=_0x4b1a40[_0x193600(0xc2)],_0x439ce3[_0x193600(0x102)]=_0x40fd51,_0x439ce3[_0x193600(0xb7)]=[_0x439ce3[_0x193600(0x102)]];}}const {failureData:_0x18a7bf,logs:_0x3a82b0}=_0x4b1a40['Cbtvj'](getFailureData,_0x439ce3?.[_0x193600(0xb7)],{}),_0x1f1744={[TestFrameworkConstants[_0x193600(0xc3)]]:_0x4b1a40[_0x193600(0x14f)](_0x18a7bf,null),[TestFrameworkConstants[_0x193600(0x137)]]:_0x439ce3?.['error']&&_0x4b1a40['dscfW'](getFailureType,_0x439ce3['error'][_0x193600(0x166)]),[TestFrameworkConstants[_0x193600(0xab)]]:_0x439ce3?.['error']&&_0x4b1a40[_0x193600(0xe9)](removeAnsiColors,_0x439ce3[_0x193600(0x102)]['message']),[TestFrameworkConstants['KEY_LOGS']]:[],[TestFrameworkConstants[_0x193600(0x130)]]:_0x4517bf,[TestFrameworkConstants[_0x193600(0x136)]]:_0x157cc6[_0x193600(0x14c)](),[TestFrameworkConstants['KEY_TEST_RESULT_AT']]:new Date()['toISOString'](),[TestFrameworkConstants[_0x193600(0xde)]]:_0x30c464};if(_0x439ce3&&_0x4b1a40['MUOpI'](_0x439ce3[_0x193600(0x16c)],0x0)){const _0x3caeb9=TestInfo[_0x193600(0x10c)](_0x4b1a40['zMgZn'](getTestRunIdentifier,_0x2f2732,_0x4b1a40[_0x193600(0x104)](_0x439ce3[_0x193600(0x16c)],0x1)));_0x1f1744[TestFrameworkConstants[_0x193600(0x145)]]=_0x3caeb9;}const _0x178963={};_0x178963[_0x193600(0x13b)]=_0x2f2732;const _0x5323b2=this['resolveInstance'](TestFrameworkState[_0x193600(0x13e)],HookState[_0x193600(0xd6)],_0x178963),_0x614e61=_0x5323b2['getAllData']()['get'](_0x41064e)[TestFrameworkConstants[_0x193600(0xb5)]],_0x1da953=[],_0x5eca74=_0x4b1a40['eMYLo'](findNestedKey,_0x439ce3,_0x4b1a40[_0x193600(0xa8)]);if(_0x5eca74&&_0x4b1a40['OLiNF'](validateFilePath,_0x5eca74))try{_0x1da953[_0x193600(0x154)]({'kind':_0x4b1a40[_0x193600(0x9c)],'timestamp':new Date()['toISOString'](),'test_run_uuid':_0x614e61,'file_name':path[_0x193600(0xbd)](_0x5eca74),'file_size':fs[_0x193600(0x11a)](_0x5eca74)[_0x193600(0xc5)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x4bd337){logger['error']('Error\x20processing\x20direct\x20trace\x20file\x20'+_0x5eca74+':\x20'+_0x4bd337[_0x193600(0x166)]);}const _0x690005=TestInfo['getTraceFilePaths'](),_0x230133=_0x690005[_0x193600(0x165)](_0x24cc83=>_0x24cc83[_0x193600(0x14b)]===_0x614e61);_0x230133['forEach'](_0x245277=>{const _0x5742c5=_0x193600;if(_0x245277[_0x5742c5(0xb3)]&&_0x4b1a40[_0x5742c5(0xe9)](validateFilePath,_0x245277[_0x5742c5(0xb3)])&&!_0x1da953[_0x5742c5(0xc7)](_0x6bd0b6=>_0x6bd0b6['file_name']===path['basename'](_0x245277['filePath'])))try{_0x1da953[_0x5742c5(0x154)]({'kind':_0x4b1a40[_0x5742c5(0x9c)],'timestamp':new Date()[_0x5742c5(0x14c)](),'test_run_uuid':_0x614e61,'file_name':path['basename'](_0x245277[_0x5742c5(0xb3)]),'file_size':fs[_0x5742c5(0x11a)](_0x245277[_0x5742c5(0xb3)])[_0x5742c5(0xc5)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x4ad44d){logger['error'](_0x5742c5(0xfe)+_0x245277['filePath']+_0x5742c5(0x106)+_0x4ad44d['message']);}});if(_0x4b1a40[_0x193600(0x15c)](_0x1da953['length'],0x0)){const _0x1c6221=_0x1f1744[TestFrameworkConstants['KEY_LOGS']]||[];_0x1f1744[TestFrameworkConstants[_0x193600(0x113)]]=[..._0x1c6221,..._0x1da953];}const _0x1e8fba=TestInfo[_0x193600(0xdf)](_0x41064e)[TestFrameworkConstants[_0x193600(0x117)]]||{},_0x143be1=_0x4b1a40[_0x193600(0x144)](getManualUploadLogs,_0x1e8fba,_0x5323b2[_0x193600(0x12b)]()[_0x193600(0xd7)](_0x41064e)[TestFrameworkConstants[_0x193600(0xb5)]]);if(_0x4b1a40[_0x193600(0x15c)](_0x143be1[_0x193600(0xd1)],0x0)){const _0x555921=_0x1f1744[TestFrameworkConstants[_0x193600(0x113)]]||[];_0x1f1744[TestFrameworkConstants[_0x193600(0x113)]]=[..._0x555921,..._0x143be1];}const _0x4568c7=_0x2f2732['annotations']||[],_0x2e3e89=_0x1f1744[TestFrameworkConstants[_0x193600(0xde)]]||{};_0x4568c7[_0x193600(0xe0)](_0x54ec2d=>{const _0x3e251d=_0x193600,{type:_0x450dc7}=_0x54ec2d;let _0x5b50e6=_0x54ec2d[_0x3e251d(0xff)];if(!_0x450dc7)return;(_0x4b1a40[_0x3e251d(0xc9)](_0x5b50e6,undefined)||_0x4b1a40['uPjOK'](_0x5b50e6,null)||_0x4b1a40[_0x3e251d(0x158)](_0x4b1a40[_0x3e251d(0xd5)](String,_0x5b50e6)['trim'](),''))&&(_0x5b50e6=_0x4b1a40[_0x3e251d(0x126)]);if(!_0x2e3e89[_0x450dc7]){const _0x28b0d4={};_0x28b0d4['field_type']=_0x4b1a40['OmYoW'],_0x28b0d4[_0x3e251d(0x108)]=[],_0x2e3e89[_0x450dc7]=_0x28b0d4;}else!_0x2e3e89[_0x450dc7]['field_type']&&(_0x2e3e89[_0x450dc7][_0x3e251d(0xce)]=_0x4b1a40['OmYoW']),!Array[_0x3e251d(0xa6)](_0x2e3e89[_0x450dc7][_0x3e251d(0x108)])&&(_0x2e3e89[_0x450dc7][_0x3e251d(0x108)]=[]);const _0x5381fd=_0x4b1a40[_0x3e251d(0x159)](String,_0x5b50e6)[_0x3e251d(0x162)](',')[_0x3e251d(0x119)](_0x3b3305=>_0x3b3305['trim']());_0x2e3e89[_0x450dc7]['values']=[...new Set([..._0x2e3e89[_0x450dc7][_0x3e251d(0x108)],..._0x5381fd])];}),_0x1f1744[TestFrameworkConstants[_0x193600(0xde)]]=_0x2e3e89,TestInfo[_0x193600(0xba)](_0x41064e,_0x1f1744);const _0x52732e={};return _0x52732e[_0x41064e]=_0x1f1744,_0x52732e;}async['trackHookEvent'](_0x581711,_0x22f1b0,_0x4e3e56,_0x2e6d2f){const _0x25ba4d=a67_0x210ce5,_0x553ba1={'UqKHH':function(_0x4bb713,_0x9617d6,_0x1dd14f){return _0x4bb713(_0x9617d6,_0x1dd14f);},'bCOet':function(_0x6a4c5b,_0x3da728){return _0x6a4c5b in _0x3da728;},'YRMLw':function(_0x1aecb5,_0x2c7cfc){return _0x1aecb5(_0x2c7cfc);},'EubSp':function(_0x1295f9,_0x5d41a6){return _0x1295f9(_0x5d41a6);},'bsJOr':function(_0x1d6819,_0x28aa48){return _0x1d6819===_0x28aa48;},'BpmMR':function(_0x4d7dc9){return _0x4d7dc9();},'bULup':function(_0x5dec0c,_0x22d421){return _0x5dec0c>_0x22d421;},'bVTnV':_0x25ba4d(0xa1),'SHvrW':_0x25ba4d(0xa2),'hutDT':_0x25ba4d(0x8c),'HcxXL':function(_0x475a8f,_0x117278){return _0x475a8f!==_0x117278;},'CFHLP':function(_0x193112,_0x219734){return _0x193112+_0x219734;},'ZcEAn':'hook'},_0xccbf93=_0x2e6d2f[_0x25ba4d(0x13b)],_0x20f161=_0x2e6d2f[_0x25ba4d(0x131)],_0x61040e=_0x553ba1['UqKHH'](getTestRunIdentifier,_0xccbf93,_0x2e6d2f[_0x25ba4d(0x16a)]['retry']),_0x216d5a=_0x22f1b0[_0x25ba4d(0x112)]()['split']('.')[0x1];let _0x34dccf=_0x581711['getAllData']()[_0x25ba4d(0xd7)](_0x61040e)[TestFrameworkConstants[_0x25ba4d(0xdd)]];!_0x34dccf&&(_0x34dccf={});!_0x553ba1['bCOet'](_0x216d5a,_0x34dccf)&&(_0x34dccf[_0x216d5a]=[]);let _0x1fccda=_0x581711['getAllData']()['get'](_0x61040e)[TestFrameworkConstants[_0x25ba4d(0x12d)]];!_0x1fccda&&(_0x1fccda={});!_0x553ba1['bCOet'](_0x216d5a,_0x1fccda)&&(_0x1fccda[_0x216d5a]=[]);const _0x7ebe31={[TestFrameworkConstants[_0x25ba4d(0xdd)]]:_0x34dccf,[TestFrameworkConstants[_0x25ba4d(0x12d)]]:_0x1fccda},_0x2ef4e6={};_0x2ef4e6[_0x61040e]=_0x7ebe31;const _0x452979=_0x2ef4e6,_0x22c02e=_0x553ba1[_0x25ba4d(0xd3)](getPlaywrightTestFilePath,_0xccbf93),_0x427ec6=_0x22c02e+':'+_0x553ba1[_0x25ba4d(0xca)](getPlaywrightTestLocation,_0xccbf93),_0x1743b8=TestInfo[_0x25ba4d(0xdf)](_0x61040e)[TestFrameworkConstants[_0x25ba4d(0xde)]]||{};if(_0x553ba1[_0x25ba4d(0x125)](_0x4e3e56,HookState[_0x25ba4d(0xf4)])){const _0x2cc970={'key':_0x216d5a,[TestFrameworkConstants[_0x25ba4d(0x114)]]:_0x553ba1[_0x25ba4d(0xb2)](uuidv4),[TestFrameworkConstants[_0x25ba4d(0x10d)]]:TestFrameworkConstants[_0x25ba4d(0x161)],[TestFrameworkConstants[_0x25ba4d(0xcd)]]:_0x20f161[_0x25ba4d(0xda)],[TestFrameworkConstants['KEY_HOOK_LOGS']]:[],[TestFrameworkConstants[_0x25ba4d(0x109)]]:_0x20f161[_0x25ba4d(0x15f)],[TestFrameworkConstants[_0x25ba4d(0x135)]]:_0x22c02e,[TestFrameworkConstants[_0x25ba4d(0x115)]]:_0x427ec6,[TestFrameworkConstants['KEY_CUSTOM_TAGS']]:_0x1743b8};_0x34dccf[_0x216d5a]['push'](_0x2cc970),_0x452979[_0x61040e][TestFrameworkConstants[_0x25ba4d(0xc6)]]=_0x216d5a,logger[_0x25ba4d(0x16d)](_0x25ba4d(0x10e)+_0x216d5a+_0x25ba4d(0xbe)+_0x2cc970+_0x25ba4d(0x15a)+_0x2e6d2f);}else{if(_0x553ba1[_0x25ba4d(0x125)](_0x4e3e56,HookState[_0x25ba4d(0xd6)])){const _0x18b742=await _0x2e6d2f['result'],_0x1a964d=_0x34dccf[_0x216d5a]||[],_0x256f69=_0x2e6d2f[_0x25ba4d(0x131)];logger[_0x25ba4d(0x16d)](_0x25ba4d(0x133)+_0x1a964d+_0x25ba4d(0x122)+_0x2e6d2f);if(_0x553ba1['bULup'](_0x1a964d[_0x25ba4d(0xd1)],0x0)){const _0x1816c3=_0x1a964d[_0x25ba4d(0xae)]();if(_0x256f69[_0x25ba4d(0x102)]){const _0x5bf42=_0x553ba1['UqKHH'](failureData,_0x256f69[_0x25ba4d(0x102)],_0x553ba1['bVTnV']);_0x1816c3[TestFrameworkConstants[_0x25ba4d(0xc1)]]=_0x553ba1[_0x25ba4d(0xd3)](getFailureType,_0x256f69?.[_0x25ba4d(0x102)][_0x25ba4d(0x166)]),_0x1816c3[TestFrameworkConstants[_0x25ba4d(0xe3)]]=_0x553ba1[_0x25ba4d(0xca)](removeAnsiColors,_0x256f69?.[_0x25ba4d(0x102)][_0x25ba4d(0x166)]),_0x1816c3[TestFrameworkConstants[_0x25ba4d(0x10d)]]=_0x553ba1[_0x25ba4d(0x169)],_0x1816c3[TestFrameworkConstants[_0x25ba4d(0xa0)]]=_0x5bf42;}else _0x1816c3[TestFrameworkConstants[_0x25ba4d(0x10d)]]=_0x553ba1[_0x25ba4d(0x12e)];_0x553ba1[_0x25ba4d(0xfb)](_0x18b742,TestFrameworkConstants[_0x25ba4d(0x161)])&&(_0x1816c3[TestFrameworkConstants[_0x25ba4d(0x10d)]]=!_0x256f69[_0x25ba4d(0x102)]?_0x553ba1['hutDT']:_0x553ba1[_0x25ba4d(0x169)]);const _0x15198f=new Date(_0x256f69[_0x25ba4d(0xda)]),_0x529069=new Date(_0x553ba1[_0x25ba4d(0xfa)](_0x15198f[_0x25ba4d(0xf8)](),_0x256f69[_0x25ba4d(0x111)]));_0x1816c3[TestFrameworkConstants['KEY_EVENT_ENDED_AT']]=_0x529069[_0x25ba4d(0x14c)](),_0x1816c3[TestFrameworkConstants[_0x25ba4d(0xde)]]=_0x1743b8;const _0x59fc71=_0x1816c3[TestFrameworkConstants['KEY_HOOK_ID']];await this['sendLogCreatedEvent'](_0x581711,_0x22f1b0,_0x59fc71,_0x553ba1[_0x25ba4d(0x105)],_0x2e6d2f),!_0x1fccda[_0x216d5a]&&(_0x1fccda[_0x216d5a]=[]),_0x1fccda[_0x216d5a][_0x25ba4d(0x154)](_0x1816c3),_0x452979[_0x61040e][TestFrameworkConstants[_0x25ba4d(0xf9)]]=_0x216d5a;}}}return _0x452979;}async[a67_0x210ce5(0x13c)](_0x1e9581,_0x311b98,_0x11439d,_0x38882e,_0x292400){const _0x4892e3=a67_0x210ce5,_0x41ba57={'BQNQU':function(_0x14cf0d,_0x5e1e0c){return _0x14cf0d===_0x5e1e0c;},'fJCHA':'test','KnHjG':function(_0x5a0b03,_0x14a6a1,_0x5bbd36){return _0x5a0b03(_0x14a6a1,_0x5bbd36);},'NrMhO':function(_0x6e70d9,_0x27092f,_0x5b5637){return _0x6e70d9(_0x27092f,_0x5b5637);},'EUsbg':'attachments','irERs':function(_0x42f30,_0x1f679d,_0x21d741,_0x4ccd15){return _0x42f30(_0x1f679d,_0x21d741,_0x4ccd15);},'RsTem':function(_0x5deb98,_0x570751,_0x1348da){return _0x5deb98(_0x570751,_0x1348da);},'MDoPs':function(_0x1084ca,_0xde0657,_0xeee247){return _0x1084ca(_0xde0657,_0xeee247);},'zqehW':function(_0x5aed2c,_0x406e45){return _0x5aed2c/_0x406e45;},'lKgdQ':function(_0xc3f9bf,_0x5e6ad8){return _0xc3f9bf<_0x5e6ad8;},'BNaYN':function(_0x54a7d9,_0xed22b0){return _0x54a7d9*_0xed22b0;},'FEDzg':function(_0x3519d4,_0x472ce6){return _0x3519d4+_0x472ce6;},'DfhEG':function(_0x3b25d0,_0x4cb10a,_0xf619af,_0x69f00f,_0x51d157){return _0x3b25d0(_0x4cb10a,_0xf619af,_0x69f00f,_0x51d157);},'tTBnM':function(_0x50791f,_0x4766f5){return _0x50791f+_0x4766f5;},'OxLKE':function(_0x51fa96,_0xce0b3b){return _0x51fa96+_0xce0b3b;},'UhrTq':'hook','CSIJu':function(_0xb9982f,_0x5c27c5,_0x5942d3){return _0xb9982f(_0x5c27c5,_0x5942d3);},'Yshiz':function(_0x81b1a0,_0x5f1a59,_0x469b90,_0x70f97a,_0x1c2403){return _0x81b1a0(_0x5f1a59,_0x469b90,_0x70f97a,_0x1c2403);}};try{if(_0x41ba57[_0x4892e3(0x151)](_0x38882e,_0x41ba57[_0x4892e3(0x153)])){const _0x1895ea=await _0x292400['result'],_0x4dce10=_0x41ba57['KnHjG'](getTestRunIdentifier,_0x292400[_0x4892e3(0x13b)],_0x292400['result'][_0x4892e3(0x16c)]),_0x416a04=_0x292400['test'];logger[_0x4892e3(0x16d)]('sendLogCreatedEvent:\x20testId='+_0x4dce10+_0x4892e3(0xbc)+util['inspect'](_0x1895ea));const _0x290ae6=_0x1e9581[_0x4892e3(0x12b)]()[_0x4892e3(0xd7)](_0x4dce10)[TestFrameworkConstants[_0x4892e3(0xb5)]];await _0x41ba57[_0x4892e3(0xfc)](sendTraceZip,_0x1895ea,_0x290ae6);const _0x2feaae=TestInfo[_0x4892e3(0xdf)](_0x4dce10)[_0x41ba57[_0x4892e3(0x152)]];if(_0x2feaae){!_0x1895ea[_0x4892e3(0x93)]&&(_0x1895ea['attachments']=[]);Object[_0x4892e3(0xe1)](_0x1895ea[_0x4892e3(0x93)],_0x1895ea[_0x4892e3(0x93)][_0x4892e3(0x129)](_0x2feaae));const _0x4f02c6=TestInfo['getTestDetails'](_0x4dce10);delete _0x4f02c6[_0x41ba57[_0x4892e3(0x152)]],TestInfo[_0x4892e3(0xba)](_0x4dce10,_0x4f02c6);}const {steps:_0x1d1cc5,logs:_0x1b61a9}=_0x41ba57[_0x4892e3(0x11e)](getStepsAndLogs,_0x1895ea['steps'],_0x1e9581['getAllData']()[_0x4892e3(0xd7)](_0x4dce10)[TestFrameworkConstants[_0x4892e3(0xb5)]],_0x41ba57[_0x4892e3(0x153)]),_0x17ced9=_0x41ba57[_0x4892e3(0x10f)](getScreenshots,_0x1895ea,_0x1e9581[_0x4892e3(0x12b)]()[_0x4892e3(0xd7)](_0x4dce10)[TestFrameworkConstants['KEY_TEST_UUID']]),_0x3862b6=_0x41ba57[_0x4892e3(0x10a)](getVideos,_0x1895ea,_0x1e9581['getAllData']()[_0x4892e3(0xd7)](_0x4dce10)[TestFrameworkConstants['KEY_TEST_UUID']]),{_:_0x486da3,logs:_0x1b9be0}=_0x41ba57['MDoPs'](getFailureData,_0x1895ea['errors'],{'test_run_uuid':_0x1e9581[_0x4892e3(0x12b)]()['get'](_0x4dce10)[TestFrameworkConstants[_0x4892e3(0xb5)]]}),_0x5b7cc1=TestInfo[_0x4892e3(0xdf)](_0x4dce10)[TestFrameworkConstants[_0x4892e3(0x117)]]||{},_0x324dfc=_0x41ba57[_0x4892e3(0x10a)](getMediaArtifactsLogs,_0x5b7cc1,_0x1e9581[_0x4892e3(0x12b)]()[_0x4892e3(0xd7)](_0x4dce10)[TestFrameworkConstants['KEY_TEST_UUID']]),_0x27c516=_0x1e9581[_0x4892e3(0x12b)]()[_0x4892e3(0xd7)](_0x4dce10),{[TestFrameworkConstants[_0x4892e3(0xc8)]]:_0x2db62e='',[TestFrameworkConstants[_0x4892e3(0xbf)]]:_0x57638b=''}=_0x27c516,_0x10b47a=(_0x1b61a9||[])[_0x4892e3(0x129)](_0x17ced9||[])[_0x4892e3(0x129)](_0x1b9be0||[])[_0x4892e3(0x129)](_0x3862b6||[])[_0x4892e3(0x129)](_0x324dfc||[]),_0x22a11b=0x28,_0x33a3fc=Math[_0x4892e3(0x10b)](_0x41ba57[_0x4892e3(0x147)](_0x10b47a[_0x4892e3(0xd1)],_0x22a11b));for(let _0x5127c0=0x0;_0x41ba57[_0x4892e3(0x120)](_0x5127c0,_0x33a3fc);_0x5127c0++){const _0x165431=_0x41ba57[_0x4892e3(0x95)](_0x5127c0,_0x22a11b),_0x322d46=_0x41ba57[_0x4892e3(0xb1)](_0x165431,_0x22a11b),_0xcdc940=_0x10b47a[_0x4892e3(0x100)](_0x165431,_0x322d46),_0x52a708={'platformIndex':'0','logs':_0xcdc940,'testFrameworkName':_0x2db62e,'testFrameworkVersion':_0x57638b,'testFrameworkState':_0x311b98['toString']()[_0x4892e3(0x162)]('.')[0x1]};_0x41ba57[_0x4892e3(0xcf)](updatePayloadForTraceLogs,_0x52a708,_0x292400,_0x4dce10,_0x1e9581),logger[_0x4892e3(0x16d)](_0x4892e3(0x12c)+_0x4dce10+_0x4892e3(0xcb)+_0x41ba57['tTBnM'](_0x5127c0,0x1)+'/'+_0x33a3fc+'\x20payload='+util['inspect'](_0x52a708));const _0x4b555c=await GrpcClient[_0x4892e3(0xf1)]()[_0x4892e3(0x157)](_0x52a708);logger[_0x4892e3(0x16d)](_0x4892e3(0x12c)+_0x4dce10+_0x4892e3(0xcb)+_0x41ba57[_0x4892e3(0x9e)](_0x5127c0,0x1)+'/'+_0x33a3fc+_0x4892e3(0x13a)+util['inspect'](_0x4b555c));}}else{const {steps:_0x59c2da,logs:_0xba6eea}=_0x41ba57[_0x4892e3(0x11e)](getStepsAndLogs,_0x292400['step'][_0x4892e3(0x13d)],_0x11439d,_0x41ba57[_0x4892e3(0xee)]),_0x1b5714=_0x41ba57[_0x4892e3(0xea)](getTestRunIdentifier,_0x292400[_0x4892e3(0x13b)],_0x292400[_0x4892e3(0x16a)][_0x4892e3(0x16c)]);logger[_0x4892e3(0x16d)](_0x4892e3(0x94)+_0x1b5714);const _0x491cce=_0x1e9581[_0x4892e3(0x12b)]()[_0x4892e3(0xd7)](_0x1b5714),{[TestFrameworkConstants[_0x4892e3(0xc8)]]:_0x448b70='',[TestFrameworkConstants[_0x4892e3(0xbf)]]:_0x5a54bd=''}=_0x491cce,_0x468db2={'platformIndex':'0','logs':_0xba6eea,'testFrameworkName':_0x448b70,'testFrameworkVersion':_0x5a54bd,'testFrameworkState':_0x311b98[_0x4892e3(0x112)]()[_0x4892e3(0x162)]('.')[0x1]};_0x41ba57[_0x4892e3(0xeb)](updatePayloadForTraceLogs,_0x468db2,_0x292400,_0x1b5714,_0x1e9581),logger[_0x4892e3(0x16d)](_0x4892e3(0x12c)+_0x1b5714+_0x4892e3(0x132)+util[_0x4892e3(0x160)](_0x468db2));const _0x13df84=await GrpcClient[_0x4892e3(0xf1)]()[_0x4892e3(0x157)](_0x468db2);}}catch(_0x5a298a){logger[_0x4892e3(0x102)]('Error\x20in\x20sendLogCreatedEvent:\x20'+util['format'](_0x5a298a));}}}module[a67_0x210ce5(0x9f)]=PlaywrightTestFramework;function a67_0x4b68(_0x469abc,_0xdba20){const _0x2b4900=a67_0x2b49();return a67_0x4b68=function(_0x4b6823,_0x4e83c4){_0x4b6823=_0x4b6823-0x8b;let _0x1f7e8c=_0x2b4900[_0x4b6823];return _0x1f7e8c;},a67_0x4b68(_0x469abc,_0xdba20);}function a67_0x2b49(){const _0x4e837b=['CSIJu','Yshiz','status','11MxNQej','UhrTq','instance','571459yDzstr','getInstance','102QrBzYU','fggqD','PRE','../grpcClient','parsePlaywrightTestResult:\x20testId=','gGUjs','getTime','KEY_HOOK_LAST_FINISHED','CFHLP','HcxXL','NrMhO',',\x20state=','Error\x20processing\x20trace\x20file\x20','description','slice','TcwIS','error','addMultipleEntries','LsEft','ZcEAn','\x20from\x20TestDetails:\x20','KEY_TEST_SCOPE','values','KEY_HOOK_NAME','MDoPs','ceil','getTestUUID','KEY_HOOK_RESULT','Hook\x20Started\x20in\x20PRE\x20key\x20=\x20','RsTem','getTestFrameworksVersions','duration','toString','KEY_LOGS','KEY_HOOK_ID','KEY_TEST_LOCATION','ChmEO','KEY_TEST_ATTACHMENTS','../../playwright/reporter/pwUtils','map','statSync','../../../helpers/classLogger.js','../../../helpers/test-observability/utils','124192bbbIUf','irERs','eUzsZ','lKgdQ','path','\x20and\x20args\x20=\x20','createContext','\x20target=','bsJOr','SgpaX','\x20testHookState=','trackPlaywrightInstance','concat','KEY_TEST_LOGS','getAllData','sendLogCreatedEvent\x20for\x20testId:\x20','KEY_HOOKS_FINISHED','hutDT','getCurrentInstanceName','KEY_TEST_RESULT','step','\x20payload=','Hook\x20List\x20in\x20Post\x20','\x20hookState=','KEY_TEST_FILE_PATH','KEY_TEST_ENDED_AT','KEY_TEST_FAILURE_TYPE','PlaywrightTestFramework','parsePlaywrightTest','\x20response=','test','sendLogCreatedEvent','steps','TEST','info','DEFAULT_TEST_RESULT','getTrackedInstance','YafFl','../state/hookState.js','LqNrt','KEY_TEST_RETRY_OF','HKDNu','zqehW','setTrackedInstance','FvbeE','trackHookEvent','testUId','toISOString','uuMBj','skipped','KEODd','../cliUtils.js','BQNQU','EUsbg','fJCHA','push','bwlLZ','2887980nrWjeZ','logCreatedEvent','HPlAz','fdLHc','\x20\x20and\x20args\x20=\x20','KEY_TEST_TAGS','MUOpI','eMYLo','JoZYX','title','inspect','DEFAULT_HOOK_RESULT','split','getTestFrameworks',',\x20testFrameworkState=','filter','message','trackPlaywrightInstance:\x20created\x20instance\x20for\x20target=','trackPlaywrightInstance:\x20saved\x20instance\x20contextId=','SHvrW','result','KEY_TEST_RERUN_NAME','retry','debug','expectedStatus','passed','707760zmeLvZ','matchHookRegex','parsePlaywrightTestResult','6410472wfAKiE','getTestIdentifierFromTestInfo','trackEvent\x20loading\x20testData\x20for\x20testId:\x20','attachments','sendLogCreatedEvent:\x20testId=','BNaYN','vfYhh','Expected\x20to\x20fail,\x20but\x20passed.','results','multi_dropdown','XLKZi','1089oGYrag','zAnqM','trackEvent:\x20Exception\x20in\x20event\x20tracking,\x20testFrameworkState=%s\x20hookState=%s\x20argsLength=%s,\x20exception=%s','OxLKE','exports','KEY_HOOK_FAILURE','err','failed','timedOut','stack','qICVU','isArray','./constants/testFrameworkConstants.js','VcUIq','NONE','getRef','KEY_TEST_FAILURE_REASON','RqYwQ','trackEvent:\x20loaded\x20testData\x20for\x20testId:\x20','pop','TEST_SCREENSHOT','2akfngZ','FEDzg','BpmMR','filePath','emyxc','KEY_TEST_UUID','qlmeP','errors','KEY_TEST_NAME','qOzUO','setTestDetails','14387830iBHjtH','\x20result=','basename','\x20&\x20hook\x20=\x20','KEY_TEST_FRAMEWORK_VERSION','resolveInstance','KEY_HOOK_FAILURE_TYPE','SvkiI','KEY_TEST_FAILURE','kfKeN','size','KEY_HOOK_LAST_STARTED','some','KEY_TEST_FRAMEWORK_NAME','uPjOK','EubSp','\x20batch\x20','INIT_TEST','KEY_EVENT_STARTED_AT','field_type','DfhEG','trackEvent','length','KEY_AUTOMATE_SESSION_NAME','YRMLw','format','DblAs','POST','get','util','KEY_TEST_SCOPES','startTime','lfMVz','getId','KEY_HOOKS_STARTED','KEY_CUSTOM_TAGS','getTestDetails','forEach','assign','../../../helpers/helper.js','KEY_HOOK_FAILURE_REASON','3532WWwVMk','qlfGE','KEY_TEST_STARTED_AT','uuid','WvkXy','IeOHu'];a67_0x2b49=function(){return _0x4e837b;};return a67_0x2b49();}