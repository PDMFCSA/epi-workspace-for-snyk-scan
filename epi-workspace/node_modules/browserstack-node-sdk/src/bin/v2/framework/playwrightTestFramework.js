const a65_0x1686db=a65_0x54ac;function a65_0x54ac(_0x4e4569,_0x2fd302){const _0x117ba6=a65_0x117b();return a65_0x54ac=function(_0x54ac20,_0x461c7a){_0x54ac20=_0x54ac20-0x1d3;let _0xef52a3=_0x117ba6[_0x54ac20];return _0xef52a3;},a65_0x54ac(_0x4e4569,_0x2fd302);}(function(_0x512337,_0x4150bb){const _0x4d9320=a65_0x54ac,_0x34962b=_0x512337();while(!![]){try{const _0x3a9e33=-parseInt(_0x4d9320(0x1df))/0x1*(-parseInt(_0x4d9320(0x200))/0x2)+-parseInt(_0x4d9320(0x21e))/0x3+parseInt(_0x4d9320(0x235))/0x4*(parseInt(_0x4d9320(0x1ee))/0x5)+parseInt(_0x4d9320(0x23f))/0x6+parseInt(_0x4d9320(0x289))/0x7*(parseInt(_0x4d9320(0x270))/0x8)+parseInt(_0x4d9320(0x1f9))/0x9+-parseInt(_0x4d9320(0x287))/0xa;if(_0x3a9e33===_0x4150bb)break;else _0x34962b['push'](_0x34962b['shift']());}catch(_0x1b7618){_0x34962b['push'](_0x34962b['shift']());}}}(a65_0x117b,0xbc944));const TestFramework=require(a65_0x1686db(0x253)),TestFrameworkState=require(a65_0x1686db(0x280)),HookState=require(a65_0x1686db(0x1d5)),{createClassLogger}=require(a65_0x1686db(0x259)),TestFrameworkInstance=require('../instances/testFrameworkInstance.js'),CLIUtils=require('../cliUtils.js'),TrackedInstance=require(a65_0x1686db(0x23b)),TestFrameworkConstants=require(a65_0x1686db(0x249)),logger=createClassLogger(a65_0x1686db(0x1e1)),{v4:uuidv4}=require('uuid'),util=require(a65_0x1686db(0x21b)),{getPlaywrightSessionName,getPlaywrightTestFilePath,getPlaywrightTestId,getPlaywrightTestTitle,getPlaywrightTestLocation,getPlaywrightTestTags,getPlaywrightTestCode,getPlaywrightTestScope,getPlaywrightTestScopes,getStepsAndLogs,getScreenshots,getPlaywrightCustomRerunParam,getMediaArtifactsLogs,getManualUploadLogs,updatePayloadForTraceLogs}=require(a65_0x1686db(0x263)),TestInfo=require(a65_0x1686db(0x27a)),GrpcClient=require('../grpcClient'),{removeAnsiColors,getFailureType,failureData}=require(a65_0x1686db(0x281)),{getFailureData,getTestTags}=require(a65_0x1686db(0x234)),{findNestedKey,sendTraceZip,validateFilePath}=require(a65_0x1686db(0x234)),path=require(a65_0x1686db(0x225)),fs=require('fs'),helper=require('../../../../src/helpers/helper'),{PLAYWRIGHT_TRACE_LOGS}=require(a65_0x1686db(0x293));function a65_0x117b(){const _0x548f85=['PRE','uzhNW','KEY_TEST_LOCATION','gtpvm','GqdjN','forEach','Error\x20processing\x20trace\x20file\x20','\x20instance=','filter','../../playwright/reporter/pwUtils','4oHgxtV','sendLogCreatedEvent:\x20testId=','KEY_TEST_FRAMEWORK_NAME','pop','KEY_HOOK_NAME','failed','../instances/trackedInstance.js','\x20from\x20TestDetails:\x20','KEY_HOOK_LAST_STARTED','\x20hookState=','4248780xnrSJp','instance','KEY_TEST_FAILURE_TYPE','rOvNd','Hook\x20List\x20in\x20Post\x20','status','xUmbh','trackEvent\x20loading\x20testData\x20for\x20testId:\x20','KEY_HOOK_FAILURE','Hook\x20Started\x20in\x20PRE\x20key\x20=\x20','./constants/testFrameworkConstants.js','getTestDetails','KEY_TEST_LOGS','debug','YkuKR','KEY_HOOK_RESULT','\x20payload=','GtaCS','KEY_TEST_FAILURE_REASON','getTestFrameworksVersions','./testFramework','zKGzs','trackEvent:\x20loaded\x20testData\x20for\x20testId:\x20','XAlEj','isArray','CSLfJ','../../../helpers/classLogger.js','PVBTv','parsePlaywrightTestResult:\x20testId=','KEY_TEST_TAGS','hcTZo','\x20&\x20hook\x20=\x20','file_name','POST','results','multi_dropdown','../../../helpers/helper.js','info','statSync','KEY_TEST_UUID','ALbVb','DEFAULT_HOOK_RESULT','stack','error','bMwnB','err','KEY_HOOK_LAST_FINISHED','KEY_AUTOMATE_SESSION_NAME','KEY_TEST_RESULT_AT','985928gPYtRz','mMKDP','KEY_TEST_FAILURE','KEY_CUSTOM_TAGS','result','rlGJH','addMultipleEntries','getCurrentInstanceName','annotations','plavi','../TestInfo.js','parsePlaywrightTest','startTime','KEY_TEST_NAME','KEY_TEST_FRAMEWORK_VERSION','getInstance','../state/testFrameworkState.js','../../../helpers/test-observability/utils','some','Lzhtb','TEST_ATTACHMENT','KEY_LOGS','KEY_HOOKS_STARTED','8415500sgamoA','trackEvent','35rsleSv','jzuPL','hPFlI','trackEvent:\x20Exception\x20in\x20event\x20tracking,\x20testFrameworkState=%s\x20hookState=%s\x20argsLength=%s,\x20exception=%s','Dhdgf','setTestDetails','fnbvI','bkmhH','toString','AHIGl','../../utils/constants','format','KEY_TEST_ENDED_AT','createContext',',\x20state=','../state/hookState.js','TOvIM','DqDhY','duration','KEY_TEST_FILE_PATH','trackEvent\x20loading\x20testResults\x20for\x20testId:\x20','jDLbZ','fgxSa','Hrzpt','trackPlaywrightInstance:\x20saved\x20instance\x20contextId=','514354hXKFaM','KEY_TEST_ATTACHMENTS','PlaywrightTestFramework','yfwte','HYSLW','DEFAULT_TEST_RESULT','getTestFrameworks','field_type','qvJPj','getAllData','DCCpy','trackHookEvent','KEY_TEST_STARTED_AT','getTraceFilePaths','TEST','4975715hjPdGg','sendLogCreatedEvent','trackPlaywrightInstance','KEY_TEST_SCOPES','KEY_HOOK_ID','getTime','hook','KEY_EVENT_STARTED_AT','expectedStatus','fMczx','resolveInstance','1406205CWoHpB','basename','fSnAj','EesHV','getRef','cZQJc','filePath','2ZBaPVG','logCreatedEvent','KEY_HOOKS_FINISHED','length','inspect','parsePlaywrightTestResult','exports','test','Oiwkn','toISOString','MZpnD','QXjrL','runHooks','getTrackedInstance','fMSeg','knPMY','testUId','getId','trim','values','KEY_HOOK_FAILURE_TYPE','timedOut','steps','KEY_HOOK_LOGS','map','KEY_EVENT_ENDED_AT','get','util','GmnDo','skipped','4128321nnbLjb','zcbIv','KEY_TEST_RESULT','split','eTAgq','step','\x20\x20and\x20args\x20=\x20','path','size','message','push','trackPlaywrightInstance:\x20created\x20instance\x20for\x20target=','trackEvent:\x20found\x20instance,\x20testFrameworkState='];a65_0x117b=function(){return _0x548f85;};return a65_0x117b();}class PlaywrightTestFramework extends TestFramework{constructor(_0x381be3,_0x1d8d42,_0xd98942){super(_0x381be3,_0x1d8d42,_0xd98942);}async['trackEvent'](_0x214452,_0x59d9f1,_0x19c31b={}){const _0x291646=a65_0x1686db,_0x2794db={};_0x2794db[_0x291646(0x28d)]=function(_0x227476,_0x3abd96){return _0x227476===_0x3abd96;},_0x2794db['AHIGl']=function(_0x220dc6,_0x39fbca){return _0x220dc6===_0x39fbca;},_0x2794db['XAlEj']=_0x291646(0x207),_0x2794db[_0x291646(0x1f7)]=_0x291646(0x28c);const _0x4771a6=_0x2794db;await super[_0x291646(0x288)](_0x214452,_0x59d9f1,_0x19c31b);const _0x2522c3=this[_0x291646(0x1f8)](_0x214452,_0x59d9f1,_0x19c31b);if(!_0x2522c3)return;logger[_0x291646(0x24c)](_0x291646(0x22a)+_0x214452+_0x291646(0x23e)+_0x59d9f1+'\x20instanceId='+_0x2522c3[_0x291646(0x1fd)]());try{if(_0x4771a6[_0x291646(0x28d)](_0x59d9f1,HookState[_0x291646(0x22b)])&&_0x4771a6['Dhdgf'](_0x214452,TestFrameworkState[_0x291646(0x1ed)])){const _0x324889=_0x19c31b[_0x291646(0x207)];logger[_0x291646(0x24c)](_0x291646(0x246)+_0x324889['id']+'}');const _0x460736=TestInfo['getTestUUID'](_0x324889['id']);_0x2522c3['addMultipleEntries'](this[_0x291646(0x27b)](_0x460736,_0x324889)),logger[_0x291646(0x24c)](_0x291646(0x255)+_0x324889['id']+',\x20testFrameworkState='+_0x214452+'\x20testHookState='+_0x59d9f1+_0x291646(0x232)+_0x2522c3[_0x291646(0x1fd)]());}if(_0x4771a6[_0x291646(0x292)](_0x59d9f1,HookState[_0x291646(0x260)])&&_0x4771a6[_0x291646(0x28d)](_0x214452,TestFrameworkState[_0x291646(0x1ed)])){const _0x2696b4=_0x19c31b[_0x291646(0x207)],_0xef1693=_0x19c31b[_0x291646(0x274)];logger[_0x291646(0x24c)](_0x291646(0x1da)+_0x2696b4['id']),_0x2522c3[_0x291646(0x276)](this[_0x291646(0x205)](_0x2696b4['id'],_0xef1693,_0x2696b4)),this[_0x291646(0x1ef)](_0x2522c3,_0x214452,_0x59d9f1,_0x4771a6[_0x291646(0x256)],_0x19c31b);}if(CLIUtils['matchHookRegex'](_0x214452[_0x291646(0x291)]()[_0x291646(0x221)]('.')[0x1])){const _0x3a4cb3=await this['trackHookEvent'](_0x2522c3,_0x214452,_0x59d9f1,_0x19c31b);_0x2522c3[_0x291646(0x276)](_0x3a4cb3);}}catch(_0x59c519){logger[_0x291646(0x26a)](util[_0x291646(0x294)](_0x4771a6[_0x291646(0x1f7)],_0x214452,_0x59d9f1,_0x19c31b[_0x291646(0x203)],_0x59c519));}_0x19c31b[_0x291646(0x240)]=_0x2522c3,await this[_0x291646(0x20c)](_0x2522c3,_0x214452,_0x59d9f1,_0x19c31b);}[a65_0x1686db(0x1f8)](_0x6678b6,_0x20b496,_0x1cec12={}){const _0x2fbcf5=a65_0x1686db,_0xac29b2={};_0xac29b2[_0x2fbcf5(0x1db)]=function(_0x5a0cae,_0x1c8a04){return _0x5a0cae===_0x1c8a04;};const _0xddf14f=_0xac29b2;let _0x51beb3=null;return(_0xddf14f['jDLbZ'](_0x6678b6,TestFrameworkState['INIT_TEST'])||_0xddf14f[_0x2fbcf5(0x1db)](_0x6678b6,TestFrameworkState['NONE']))&&this[_0x2fbcf5(0x1f0)](_0x6678b6,_0x1cec12),_0x51beb3=TestFramework[_0x2fbcf5(0x20d)](),_0x51beb3;}['trackPlaywrightInstance'](_0x576e4e,_0x2beb2a){const _0x4c9013=a65_0x1686db,_0x401811=CLIUtils[_0x4c9013(0x277)](),_0x1cdd94=TrackedInstance[_0x4c9013(0x1d3)](_0x401811);let _0x504d65=null;logger['info'](_0x4c9013(0x229)+_0x401811+_0x4c9013(0x1d4)+_0x576e4e),_0x504d65=new TestFrameworkInstance(_0x1cdd94,this[_0x4c9013(0x1e5)](),this['getTestFrameworksVersions'](),_0x576e4e,HookState['NONE']),TestFramework['setTrackedInstance'](_0x1cdd94,_0x504d65),logger[_0x4c9013(0x264)](_0x4c9013(0x1de)+_0x1cdd94[_0x4c9013(0x211)]()+'\x20target='+_0x401811);}[a65_0x1686db(0x27b)](_0x8765c7,_0x1b2104){const _0x2bca6b=a65_0x1686db,_0x295aca={'fnbvI':function(_0x137a85,_0xf3ca79){return _0x137a85(_0xf3ca79);},'hcTZo':function(_0x29e514,_0x4363dd){return _0x29e514(_0x4363dd);},'Oiwkn':function(_0xd925e0,_0x2c5407){return _0xd925e0(_0x2c5407);}},_0x45a393=_0x295aca[_0x2bca6b(0x28f)](getPlaywrightTestId,_0x1b2104),_0x57f894=_0x295aca[_0x2bca6b(0x28f)](getPlaywrightTestTitle,_0x1b2104),_0x2abbbd=_0x295aca[_0x2bca6b(0x28f)](getTestTags,_0x1b2104),_0x43856a=_0x295aca['fnbvI'](getPlaywrightTestCode,_0x1b2104),_0x50ff9c=_0x295aca[_0x2bca6b(0x25d)](getPlaywrightTestFilePath,_0x1b2104),_0x57b53e=_0x50ff9c+':'+_0x295aca[_0x2bca6b(0x25d)](getPlaywrightTestLocation,_0x1b2104),_0x2ba5a1=_0x295aca[_0x2bca6b(0x25d)](getPlaywrightTestScope,_0x1b2104),_0x450a72=_0x295aca['fnbvI'](getPlaywrightTestScopes,_0x1b2104),_0x59cbab=_0x295aca[_0x2bca6b(0x28f)](getPlaywrightSessionName,_0x1b2104),_0x4c8d0c=this[_0x2bca6b(0x1e5)]()[0x0],_0x35bf00={[TestFrameworkConstants[_0x2bca6b(0x237)]]:_0x4c8d0c,[TestFrameworkConstants[_0x2bca6b(0x27e)]]:this[_0x2bca6b(0x252)]()[_0x4c8d0c],[TestFrameworkConstants[_0x2bca6b(0x24b)]]:[],[TestFrameworkConstants[_0x2bca6b(0x202)]]:{},[TestFrameworkConstants[_0x2bca6b(0x286)]]:{},[TestFrameworkConstants[_0x2bca6b(0x266)]]:_0x8765c7,[TestFrameworkConstants[_0x2bca6b(0x220)]]:TestFrameworkConstants[_0x2bca6b(0x1e4)],[TestFrameworkConstants[_0x2bca6b(0x26e)]]:_0x59cbab,[TestFrameworkConstants['KEY_TEST_FILE_PATH']]:_0x50ff9c,[TestFrameworkConstants['KEY_TEST_ID']]:_0x45a393,[TestFrameworkConstants[_0x2bca6b(0x27d)]]:_0x57f894,[TestFrameworkConstants[_0x2bca6b(0x22d)]]:_0x57b53e,[TestFrameworkConstants['KEY_TEST_CODE']]:_0x43856a,[TestFrameworkConstants[_0x2bca6b(0x25c)]]:_0x2abbbd,[TestFrameworkConstants[_0x2bca6b(0x1eb)]]:_0x1b2104[_0x2bca6b(0x261)][0x0]['startTime'],[TestFrameworkConstants['KEY_TEST_SCOPE']]:_0x2ba5a1,[TestFrameworkConstants[_0x2bca6b(0x1f1)]]:_0x450a72,[TestFrameworkConstants['KEY_TEST_RERUN_NAME']]:_0x295aca[_0x2bca6b(0x208)](getPlaywrightCustomRerunParam,_0x1b2104)};TestInfo[_0x2bca6b(0x28e)](_0x1b2104['id'],_0x35bf00);const _0x1ef421={};return _0x1ef421[_0x45a393]=_0x35bf00,_0x1ef421;}[a65_0x1686db(0x205)](_0x27932e,_0x5dc97c,_0x4b142b){const _0x5c5443=a65_0x1686db,_0x189081={'DCCpy':function(_0x3eb099,_0xf19259){return _0x3eb099(_0xf19259);},'Hrzpt':_0x5c5443(0x284),'rlGJH':function(_0x2613f3,_0x315439){return _0x2613f3===_0x315439;},'bkmhH':function(_0x285e07,_0x424bda){return _0x285e07===_0x424bda;},'EesHV':function(_0x279a13,_0x2c9fac){return _0x279a13===_0x2c9fac;},'npNYh':'No\x20reason\x20provided','DqDhY':_0x5c5443(0x262),'hPFlI':function(_0x41892d,_0x2d0cc6){return _0x41892d+_0x2d0cc6;},'zKGzs':function(_0x26f4a1,_0x59e50c){return _0x26f4a1===_0x59e50c;},'yfwte':function(_0x3b38f0,_0x275230){return _0x3b38f0===_0x275230;},'fMSeg':_0x5c5443(0x21d),'cZQJc':'passed','mMKDP':function(_0x2a7ea7,_0x233c09){return _0x2a7ea7===_0x233c09;},'Lzhtb':_0x5c5443(0x23a),'rOvNd':_0x5c5443(0x215),'HYSLW':'Expected\x20to\x20fail,\x20but\x20passed.','ALbVb':function(_0xc0c1ad,_0x1f7533,_0x5e3ff8){return _0xc0c1ad(_0x1f7533,_0x5e3ff8);},'fgxSa':function(_0x5e38b5,_0x1e4fa6){return _0x5e38b5||_0x1e4fa6;},'unhGV':function(_0x20d83c,_0x39fca4){return _0x20d83c(_0x39fca4);},'knPMY':'path','zcbIv':function(_0x45018c,_0x373f21){return _0x45018c>_0x373f21;},'JFFnz':function(_0x3d9593,_0x42cdfb,_0x111dba){return _0x3d9593(_0x42cdfb,_0x111dba);}};logger[_0x5c5443(0x24c)](_0x5c5443(0x25b)+_0x27932e);const _0x426833=new Date(_0x5dc97c[_0x5c5443(0x27c)]),_0x4ac4e4=_0x5dc97c[_0x5c5443(0x1d8)],_0x146001=new Date(_0x189081[_0x5c5443(0x28b)](_0x426833[_0x5c5443(0x1f3)](),_0x4ac4e4)),_0x23592e=_0x5dc97c['status'],_0x420092=TestInfo[_0x5c5443(0x24a)](_0x27932e)[TestFrameworkConstants['KEY_CUSTOM_TAGS']]||{};let _0x2b0182=_0x23592e;if(_0x189081['zKGzs'](_0x5dc97c[_0x5c5443(0x244)],_0x4b142b['expectedStatus']))_0x2b0182=_0x189081['yfwte'](_0x5dc97c[_0x5c5443(0x244)],_0x189081['fMSeg'])?_0x189081[_0x5c5443(0x20e)]:_0x189081[_0x5c5443(0x1fe)];else{(_0x189081[_0x5c5443(0x271)](_0x2b0182,_0x189081[_0x5c5443(0x1fe)])||_0x189081['mMKDP'](_0x2b0182,_0x189081[_0x5c5443(0x283)])||_0x189081[_0x5c5443(0x254)](_0x2b0182,_0x189081[_0x5c5443(0x242)]))&&(_0x2b0182=_0x189081[_0x5c5443(0x283)]);if(_0x189081[_0x5c5443(0x1e2)](_0x5dc97c[_0x5c5443(0x244)],_0x189081[_0x5c5443(0x1fe)])&&_0x189081[_0x5c5443(0x271)](_0x4b142b[_0x5c5443(0x1f6)],_0x189081[_0x5c5443(0x283)])){const _0x444de4={};_0x444de4[_0x5c5443(0x227)]=_0x189081[_0x5c5443(0x1e3)],_0x444de4[_0x5c5443(0x269)]=_0x189081[_0x5c5443(0x1e3)],_0x5dc97c[_0x5c5443(0x26a)]=_0x444de4,_0x5dc97c['errors']=[_0x5dc97c['error']];}}const {failureData:_0x384b7d,logs:_0x15fa4d}=_0x189081[_0x5c5443(0x267)](getFailureData,_0x5dc97c?.['errors'],{}),_0x306a91={[TestFrameworkConstants[_0x5c5443(0x272)]]:_0x189081[_0x5c5443(0x1dc)](_0x384b7d,null),[TestFrameworkConstants[_0x5c5443(0x241)]]:_0x5dc97c?.[_0x5c5443(0x26a)]&&_0x189081[_0x5c5443(0x1e9)](getFailureType,_0x5dc97c['error'][_0x5c5443(0x227)]),[TestFrameworkConstants[_0x5c5443(0x251)]]:_0x5dc97c?.[_0x5c5443(0x26a)]&&_0x189081['unhGV'](removeAnsiColors,_0x5dc97c[_0x5c5443(0x26a)][_0x5c5443(0x227)]),[TestFrameworkConstants[_0x5c5443(0x285)]]:[],[TestFrameworkConstants[_0x5c5443(0x220)]]:_0x2b0182,[TestFrameworkConstants[_0x5c5443(0x295)]]:_0x146001[_0x5c5443(0x209)](),[TestFrameworkConstants[_0x5c5443(0x26f)]]:new Date()[_0x5c5443(0x209)](),[TestFrameworkConstants['KEY_CUSTOM_TAGS']]:_0x420092},_0x5b5b34={};_0x5b5b34[_0x5c5443(0x207)]=_0x4b142b;const _0x4b10bf=this[_0x5c5443(0x1f8)](TestFrameworkState['TEST'],HookState[_0x5c5443(0x260)],_0x5b5b34),_0x3430f3=_0x4b10bf[_0x5c5443(0x1e8)]()[_0x5c5443(0x21a)](_0x27932e)[TestFrameworkConstants['KEY_TEST_UUID']],_0x4feff7=[],_0x51c28c=_0x189081[_0x5c5443(0x267)](findNestedKey,_0x5dc97c,_0x189081[_0x5c5443(0x20f)]);if(_0x51c28c&&_0x189081['DCCpy'](validateFilePath,_0x51c28c))try{_0x4feff7['push']({'kind':_0x189081[_0x5c5443(0x1dd)],'timestamp':new Date()[_0x5c5443(0x209)](),'test_run_uuid':_0x3430f3,'file_name':path[_0x5c5443(0x1fa)](_0x51c28c),'file_size':fs[_0x5c5443(0x265)](_0x51c28c)[_0x5c5443(0x226)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x17f781){logger[_0x5c5443(0x26a)]('Error\x20processing\x20direct\x20trace\x20file\x20'+_0x51c28c+':\x20'+_0x17f781[_0x5c5443(0x227)]);}const _0x156b52=TestInfo[_0x5c5443(0x1ec)](),_0x1698d8=_0x156b52[_0x5c5443(0x233)](_0x13a4f5=>_0x13a4f5[_0x5c5443(0x210)]===_0x3430f3);_0x1698d8[_0x5c5443(0x230)](_0x12e4cc=>{const _0x5eb94f=_0x5c5443;if(_0x12e4cc[_0x5eb94f(0x1ff)]&&_0x189081[_0x5eb94f(0x1e9)](validateFilePath,_0x12e4cc[_0x5eb94f(0x1ff)])&&!_0x4feff7[_0x5eb94f(0x282)](_0x4a0ee6=>_0x4a0ee6[_0x5eb94f(0x25f)]===path[_0x5eb94f(0x1fa)](_0x12e4cc[_0x5eb94f(0x1ff)])))try{_0x4feff7[_0x5eb94f(0x228)]({'kind':_0x189081[_0x5eb94f(0x1dd)],'timestamp':new Date()[_0x5eb94f(0x209)](),'test_run_uuid':_0x3430f3,'file_name':path['basename'](_0x12e4cc['filePath']),'file_size':fs[_0x5eb94f(0x265)](_0x12e4cc[_0x5eb94f(0x1ff)])[_0x5eb94f(0x226)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x5e3268){logger[_0x5eb94f(0x26a)](_0x5eb94f(0x231)+_0x12e4cc[_0x5eb94f(0x1ff)]+_0x5eb94f(0x23c)+_0x5e3268['message']);}});if(_0x189081[_0x5c5443(0x21f)](_0x4feff7[_0x5c5443(0x203)],0x0)){const _0x5ce4ff=_0x306a91[TestFrameworkConstants[_0x5c5443(0x285)]]||[];_0x306a91[TestFrameworkConstants['KEY_LOGS']]=[..._0x5ce4ff,..._0x4feff7];}const _0x53bcf6=TestInfo[_0x5c5443(0x24a)](_0x27932e)[TestFrameworkConstants[_0x5c5443(0x1e0)]]||{},_0x34527e=_0x189081['JFFnz'](getManualUploadLogs,_0x53bcf6,_0x4b10bf[_0x5c5443(0x1e8)]()[_0x5c5443(0x21a)](_0x27932e)[TestFrameworkConstants['KEY_TEST_UUID']]);if(_0x189081['zcbIv'](_0x34527e[_0x5c5443(0x203)],0x0)){const _0x1d94b2=_0x306a91[TestFrameworkConstants[_0x5c5443(0x285)]]||[];_0x306a91[TestFrameworkConstants[_0x5c5443(0x285)]]=[..._0x1d94b2,..._0x34527e];}const _0x12b33f=_0x4b142b[_0x5c5443(0x278)]||[],_0x1239bf=_0x306a91[TestFrameworkConstants[_0x5c5443(0x273)]]||{};_0x12b33f['forEach'](_0x31527e=>{const _0x173432=_0x5c5443,{type:_0x31d1aa}=_0x31527e;let _0x51d21c=_0x31527e['description'];if(!_0x31d1aa)return;(_0x189081[_0x173432(0x275)](_0x51d21c,undefined)||_0x189081[_0x173432(0x290)](_0x51d21c,null)||_0x189081[_0x173432(0x1fc)](_0x189081['DCCpy'](String,_0x51d21c)[_0x173432(0x212)](),''))&&(_0x51d21c=_0x189081['npNYh']);if(!_0x1239bf[_0x31d1aa]){const _0x1984b0={};_0x1984b0[_0x173432(0x1e6)]=_0x189081[_0x173432(0x1d7)],_0x1984b0[_0x173432(0x213)]=[],_0x1239bf[_0x31d1aa]=_0x1984b0;}else!_0x1239bf[_0x31d1aa][_0x173432(0x1e6)]&&(_0x1239bf[_0x31d1aa][_0x173432(0x1e6)]=_0x189081[_0x173432(0x1d7)]),!Array[_0x173432(0x257)](_0x1239bf[_0x31d1aa][_0x173432(0x213)])&&(_0x1239bf[_0x31d1aa][_0x173432(0x213)]=[]);const _0x176136=_0x189081['DCCpy'](String,_0x51d21c)[_0x173432(0x221)](',')[_0x173432(0x218)](_0x1a5f95=>_0x1a5f95[_0x173432(0x212)]());_0x1239bf[_0x31d1aa][_0x173432(0x213)]=[...new Set([..._0x1239bf[_0x31d1aa][_0x173432(0x213)],..._0x176136])];}),_0x306a91[TestFrameworkConstants['KEY_CUSTOM_TAGS']]=_0x1239bf,TestInfo[_0x5c5443(0x28e)](_0x27932e,_0x306a91);const _0x5a7499={};return _0x5a7499[_0x27932e]=_0x306a91,_0x5a7499;}async[a65_0x1686db(0x1ea)](_0x308128,_0x20827a,_0x370452,_0xf85be0){const _0x28a69c=a65_0x1686db,_0x47592f={'PVBTv':function(_0x488479,_0x36eafe){return _0x488479 in _0x36eafe;},'CSLfJ':function(_0x345d08,_0x26be22){return _0x345d08(_0x26be22);},'gtpvm':function(_0x48b211,_0x471856){return _0x48b211(_0x471856);},'qvJPj':function(_0x3de23c,_0x493e85){return _0x3de23c===_0x493e85;},'xUmbh':function(_0x1d373a){return _0x1d373a();},'uzhNW':function(_0x18aeca,_0x39719d){return _0x18aeca===_0x39719d;},'eTAgq':function(_0x423a9c,_0x30a0d4){return _0x423a9c>_0x30a0d4;},'GmnDo':function(_0x4d8e75,_0x47f0ab,_0xc4a2af){return _0x4d8e75(_0x47f0ab,_0xc4a2af);},'QWfWG':_0x28a69c(0x26c),'YkuKR':_0x28a69c(0x23a),'jzuPL':'passed','yfExY':function(_0x2aae8d,_0x3927a5){return _0x2aae8d!==_0x3927a5;},'HAtLX':function(_0xd10020,_0x31ec88){return _0xd10020+_0x31ec88;},'odvUJ':'hook'},_0x5c765e=_0xf85be0[_0x28a69c(0x207)],_0x114ee8=_0xf85be0['step'],_0x3bedab=_0xf85be0[_0x28a69c(0x207)]['id'],_0x3573b5=_0x20827a[_0x28a69c(0x291)]()[_0x28a69c(0x221)]('.')[0x1];let _0x12ac12=_0x308128[_0x28a69c(0x1e8)]()[_0x28a69c(0x21a)](_0x3bedab)[TestFrameworkConstants['KEY_HOOKS_STARTED']];!_0x12ac12&&(_0x12ac12={});!_0x47592f[_0x28a69c(0x25a)](_0x3573b5,_0x12ac12)&&(_0x12ac12[_0x3573b5]=[]);let _0x4789e5=_0x308128['getAllData']()[_0x28a69c(0x21a)](_0x3bedab)[TestFrameworkConstants[_0x28a69c(0x202)]];!_0x4789e5&&(_0x4789e5={});!_0x47592f['PVBTv'](_0x3573b5,_0x4789e5)&&(_0x4789e5[_0x3573b5]=[]);const _0xb54e94={[TestFrameworkConstants[_0x28a69c(0x286)]]:_0x12ac12,[TestFrameworkConstants[_0x28a69c(0x202)]]:_0x4789e5},_0xa07008={};_0xa07008[_0x3bedab]=_0xb54e94;const _0xb023ca=_0xa07008,_0x5af7f5=_0x47592f[_0x28a69c(0x258)](getPlaywrightTestFilePath,_0x5c765e),_0x95fd6f=_0x5af7f5+':'+_0x47592f[_0x28a69c(0x22e)](getPlaywrightTestLocation,_0x5c765e),_0x195daf=TestInfo[_0x28a69c(0x24a)](_0x3bedab)[TestFrameworkConstants['KEY_CUSTOM_TAGS']]||{};if(_0x47592f[_0x28a69c(0x1e7)](_0x370452,HookState[_0x28a69c(0x22b)])){const _0x71c5ae={'key':_0x3573b5,[TestFrameworkConstants[_0x28a69c(0x1f2)]]:_0x47592f[_0x28a69c(0x245)](uuidv4),[TestFrameworkConstants[_0x28a69c(0x24e)]]:TestFrameworkConstants[_0x28a69c(0x268)],[TestFrameworkConstants[_0x28a69c(0x1f5)]]:_0x114ee8[_0x28a69c(0x27c)],[TestFrameworkConstants[_0x28a69c(0x217)]]:[],[TestFrameworkConstants[_0x28a69c(0x239)]]:_0x114ee8['title'],[TestFrameworkConstants[_0x28a69c(0x1d9)]]:_0x5af7f5,[TestFrameworkConstants[_0x28a69c(0x22d)]]:_0x95fd6f,[TestFrameworkConstants[_0x28a69c(0x273)]]:_0x195daf};_0x12ac12[_0x3573b5][_0x28a69c(0x228)](_0x71c5ae),_0xb023ca[_0x3bedab][TestFrameworkConstants[_0x28a69c(0x23d)]]=_0x3573b5,logger[_0x28a69c(0x24c)](_0x28a69c(0x248)+_0x3573b5+_0x28a69c(0x25e)+_0x71c5ae+_0x28a69c(0x224)+_0xf85be0);}else{if(_0x47592f[_0x28a69c(0x22c)](_0x370452,HookState[_0x28a69c(0x260)])){const _0x4ade25=await _0xf85be0[_0x28a69c(0x274)],_0x4f6f69=_0x12ac12[_0x3573b5]||[],_0x32b040=_0xf85be0['step'];logger[_0x28a69c(0x24c)](_0x28a69c(0x243)+_0x4f6f69+'\x20and\x20args\x20=\x20'+_0xf85be0);if(_0x47592f[_0x28a69c(0x222)](_0x4f6f69[_0x28a69c(0x203)],0x0)){const _0xe0efcf=_0x4f6f69[_0x28a69c(0x238)]();if(_0x32b040['error']){const _0x4802f2=_0x47592f[_0x28a69c(0x21c)](failureData,_0x32b040[_0x28a69c(0x26a)],_0x47592f['QWfWG']);_0xe0efcf[TestFrameworkConstants[_0x28a69c(0x214)]]=_0x47592f[_0x28a69c(0x258)](getFailureType,_0x32b040?.['error']['message']),_0xe0efcf[TestFrameworkConstants['KEY_HOOK_FAILURE_REASON']]=_0x47592f[_0x28a69c(0x258)](removeAnsiColors,_0x32b040?.[_0x28a69c(0x26a)][_0x28a69c(0x227)]),_0xe0efcf[TestFrameworkConstants[_0x28a69c(0x24e)]]=_0x47592f['YkuKR'],_0xe0efcf[TestFrameworkConstants[_0x28a69c(0x247)]]=_0x4802f2;}else _0xe0efcf[TestFrameworkConstants[_0x28a69c(0x24e)]]=_0x47592f[_0x28a69c(0x28a)];_0x47592f['yfExY'](_0x4ade25,TestFrameworkConstants[_0x28a69c(0x268)])&&(_0xe0efcf[TestFrameworkConstants['KEY_HOOK_RESULT']]=!_0x32b040[_0x28a69c(0x26a)]?_0x47592f[_0x28a69c(0x28a)]:_0x47592f[_0x28a69c(0x24d)]);const _0x1dc719=new Date(_0x32b040['startTime']),_0x2140d5=new Date(_0x47592f['HAtLX'](_0x1dc719[_0x28a69c(0x1f3)](),_0x32b040[_0x28a69c(0x1d8)]));_0xe0efcf[TestFrameworkConstants[_0x28a69c(0x219)]]=_0x2140d5[_0x28a69c(0x209)](),_0xe0efcf[TestFrameworkConstants['KEY_CUSTOM_TAGS']]=_0x195daf;const _0x3264c5=_0xe0efcf[TestFrameworkConstants[_0x28a69c(0x1f2)]];await this[_0x28a69c(0x1ef)](_0x308128,_0x20827a,_0x3264c5,_0x47592f['odvUJ'],_0xf85be0),!_0x4789e5[_0x3573b5]&&(_0x4789e5[_0x3573b5]=[]),_0x4789e5[_0x3573b5][_0x28a69c(0x228)](_0xe0efcf),_0xb023ca[_0x3bedab][TestFrameworkConstants[_0x28a69c(0x26d)]]=_0x3573b5;}}}return _0xb023ca;}async[a65_0x1686db(0x1ef)](_0x34303a,_0x3a456c,_0x5617b1,_0x35a927,_0x1bf4d5){const _0x3cf821=a65_0x1686db,_0x2824a8={'SbhAQ':function(_0x28973a,_0x239486){return _0x28973a===_0x239486;},'TOvIM':_0x3cf821(0x207),'plavi':function(_0x183069,_0x24a2a7,_0x19150c){return _0x183069(_0x24a2a7,_0x19150c);},'GqdjN':function(_0x11bbd7,_0x3d1250,_0x424a5c,_0x1e351c){return _0x11bbd7(_0x3d1250,_0x424a5c,_0x1e351c);},'QXjrL':function(_0x570411,_0x5c946a,_0x6edccb){return _0x570411(_0x5c946a,_0x6edccb);},'fSnAj':function(_0x146cf8,_0x302619,_0x2ee990){return _0x146cf8(_0x302619,_0x2ee990);},'MZpnD':function(_0x539322,_0x3214ae,_0x4c4f6e){return _0x539322(_0x3214ae,_0x4c4f6e);},'bMwnB':function(_0x19dd1b,_0x36bf9d,_0x42a980,_0x249420,_0x26de34){return _0x19dd1b(_0x36bf9d,_0x42a980,_0x249420,_0x26de34);},'GtaCS':_0x3cf821(0x1f4)};try{if(_0x2824a8['SbhAQ'](_0x35a927,_0x2824a8[_0x3cf821(0x1d6)])){const _0x5dbbb3=await _0x1bf4d5[_0x3cf821(0x274)],_0x1ceb93=_0x1bf4d5['test']['id'],_0x5164b8=_0x1bf4d5[_0x3cf821(0x207)];logger[_0x3cf821(0x24c)]('sendLogCreatedEvent:\x20testId='+_0x1ceb93);const _0xab4842=_0x34303a[_0x3cf821(0x1e8)]()[_0x3cf821(0x21a)](_0x1ceb93)[TestFrameworkConstants[_0x3cf821(0x266)]];await _0x2824a8[_0x3cf821(0x279)](sendTraceZip,_0x5dbbb3,_0xab4842);const {steps:_0x1707a7,logs:_0x18da01}=_0x2824a8[_0x3cf821(0x22f)](getStepsAndLogs,_0x5dbbb3[_0x3cf821(0x216)],_0x34303a[_0x3cf821(0x1e8)]()[_0x3cf821(0x21a)](_0x1ceb93)[TestFrameworkConstants[_0x3cf821(0x266)]],_0x2824a8['TOvIM']),_0x4275ae=_0x2824a8[_0x3cf821(0x20b)](getScreenshots,_0x5dbbb3,_0x34303a[_0x3cf821(0x1e8)]()[_0x3cf821(0x21a)](_0x1ceb93)[TestFrameworkConstants[_0x3cf821(0x266)]]),{_:_0x745ac,logs:_0x30845c}=_0x2824a8[_0x3cf821(0x1fb)](getFailureData,_0x5dbbb3['errors'],{'test_run_uuid':_0x34303a[_0x3cf821(0x1e8)]()[_0x3cf821(0x21a)](_0x1ceb93)[TestFrameworkConstants[_0x3cf821(0x266)]]}),_0x5ad961=TestInfo['getTestDetails'](_0x1ceb93)[TestFrameworkConstants[_0x3cf821(0x1e0)]]||{},_0x303f45=_0x2824a8[_0x3cf821(0x20a)](getMediaArtifactsLogs,_0x5ad961,_0x34303a[_0x3cf821(0x1e8)]()['get'](_0x1ceb93)[TestFrameworkConstants[_0x3cf821(0x266)]]),_0x512582=_0x34303a['getAllData']()[_0x3cf821(0x21a)](_0x1ceb93),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x49623b='',[TestFrameworkConstants[_0x3cf821(0x27e)]]:_0xdecfb6=''}=_0x512582,_0x46c403={'platformIndex':'0','logs':[..._0x18da01||[],..._0x4275ae||[],..._0x30845c||[],..._0x303f45||[]],'testFrameworkName':_0x49623b,'testFrameworkVersion':_0xdecfb6,'testFrameworkState':_0x3a456c[_0x3cf821(0x291)]()[_0x3cf821(0x221)]('.')[0x1]};_0x2824a8[_0x3cf821(0x26b)](updatePayloadForTraceLogs,_0x46c403,_0x1bf4d5,_0x1ceb93,_0x34303a),logger[_0x3cf821(0x24c)]('sendLogCreatedEvent\x20for\x20testId:\x20'+_0x1ceb93+_0x3cf821(0x24f)+util[_0x3cf821(0x204)](_0x46c403));const _0x4abf2b=await GrpcClient[_0x3cf821(0x27f)]()['logCreatedEvent'](_0x46c403);}else{const {steps:_0x101544,logs:_0x16e6fe}=_0x2824a8[_0x3cf821(0x22f)](getStepsAndLogs,_0x1bf4d5[_0x3cf821(0x223)]['steps'],_0x5617b1,_0x2824a8[_0x3cf821(0x250)]),_0x3c6819=_0x1bf4d5[_0x3cf821(0x207)]['id'];logger[_0x3cf821(0x24c)](_0x3cf821(0x236)+_0x3c6819);const _0x2ad954=_0x34303a[_0x3cf821(0x1e8)]()[_0x3cf821(0x21a)](_0x3c6819),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x2a8828='',[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]:_0x15db1c=''}=_0x2ad954,_0x1f04d6={'platformIndex':'0','logs':_0x16e6fe,'testFrameworkName':_0x2a8828,'testFrameworkVersion':_0x15db1c,'testFrameworkState':_0x3a456c[_0x3cf821(0x291)]()[_0x3cf821(0x221)]('.')[0x1]};_0x2824a8['bMwnB'](updatePayloadForTraceLogs,_0x1f04d6,_0x1bf4d5,_0x3c6819,_0x34303a),logger[_0x3cf821(0x24c)]('sendLogCreatedEvent\x20for\x20testId:\x20'+_0x3c6819+'\x20payload='+util['inspect'](_0x1f04d6));const _0x24f8d7=await GrpcClient[_0x3cf821(0x27f)]()[_0x3cf821(0x201)](_0x1f04d6);}}catch(_0xe7dd19){logger[_0x3cf821(0x26a)]('Error\x20in\x20sendLogCreatedEvent:\x20'+util[_0x3cf821(0x294)](_0xe7dd19));}}}module[a65_0x1686db(0x206)]=PlaywrightTestFramework;