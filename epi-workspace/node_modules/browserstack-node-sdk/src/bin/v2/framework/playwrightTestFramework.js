function a65_0x3855(_0xab0f93,_0x2ce1f1){const _0x25cd64=a65_0x25cd();return a65_0x3855=function(_0x3855e3,_0x2b66ba){_0x3855e3=_0x3855e3-0x100;let _0x4e541a=_0x25cd64[_0x3855e3];return _0x4e541a;},a65_0x3855(_0xab0f93,_0x2ce1f1);}const a65_0x1f7a54=a65_0x3855;(function(_0x2d7f8a,_0x43cd0c){const _0x571ab3=a65_0x3855,_0x7ae0bf=_0x2d7f8a();while(!![]){try{const _0x55abbb=-parseInt(_0x571ab3(0x164))/0x1+parseInt(_0x571ab3(0x188))/0x2*(-parseInt(_0x571ab3(0x13b))/0x3)+parseInt(_0x571ab3(0x117))/0x4*(-parseInt(_0x571ab3(0x178))/0x5)+parseInt(_0x571ab3(0x103))/0x6*(parseInt(_0x571ab3(0x151))/0x7)+-parseInt(_0x571ab3(0x170))/0x8*(parseInt(_0x571ab3(0x141))/0x9)+-parseInt(_0x571ab3(0x199))/0xa*(parseInt(_0x571ab3(0x196))/0xb)+parseInt(_0x571ab3(0x1d1))/0xc;if(_0x55abbb===_0x43cd0c)break;else _0x7ae0bf['push'](_0x7ae0bf['shift']());}catch(_0x1c40f5){_0x7ae0bf['push'](_0x7ae0bf['shift']());}}}(a65_0x25cd,0x815bc));const TestFramework=require('./testFramework'),TestFrameworkState=require(a65_0x1f7a54(0x112)),HookState=require(a65_0x1f7a54(0x12a)),{createClassLogger}=require('../../../helpers/classLogger.js'),TestFrameworkInstance=require(a65_0x1f7a54(0x139)),CLIUtils=require(a65_0x1f7a54(0x1b4)),TrackedInstance=require(a65_0x1f7a54(0x190)),TestFrameworkConstants=require(a65_0x1f7a54(0x12c)),logger=createClassLogger(a65_0x1f7a54(0x1d6)),{v4:uuidv4}=require(a65_0x1f7a54(0x131)),util=require(a65_0x1f7a54(0x116)),{getPlaywrightSessionName,getPlaywrightTestFilePath,getPlaywrightTestId,getPlaywrightTestTitle,getPlaywrightTestLocation,getPlaywrightTestTags,getPlaywrightTestCode,getPlaywrightTestScope,getPlaywrightTestScopes,getStepsAndLogs,getScreenshots,getVideos,getPlaywrightCustomRerunParam,getMediaArtifactsLogs,getManualUploadLogs,updatePayloadForTraceLogs}=require('../../../helpers/helper.js'),TestInfo=require('../TestInfo.js'),GrpcClient=require(a65_0x1f7a54(0x1b8)),{removeAnsiColors,getFailureType,failureData}=require(a65_0x1f7a54(0x122)),{getFailureData,getTestTags}=require(a65_0x1f7a54(0x10b)),{findNestedKey,sendTraceZip,validateFilePath}=require(a65_0x1f7a54(0x10b)),path=require(a65_0x1f7a54(0x11b)),fs=require('fs'),helper=require('../../../../src/helpers/helper'),{PLAYWRIGHT_TRACE_LOGS}=require(a65_0x1f7a54(0x114));function a65_0x25cd(){const _0x46fe5b=['KEY_HOOK_FAILURE','rTAjp','split','instance','KEY_TEST_ATTACHMENTS','getRef','testUId','pxdYf','field_type','passed','bWrJD','uRWUI','38791404DhRGns','tEGvS','size','test','KEY_TEST_LOGS','PlaywrightTestFramework','getTestDetails','concat','testId','trackEvent:\x20found\x20instance,\x20testFrameworkState=','4016694UZWDyp','wSpdz','INIT_TEST','No\x20reason\x20provided','DkMoW','QGcPU','KEY_HOOK_ID','KEY_TEST_FAILURE','../../playwright/reporter/pwUtils','qdNiz','KEY_TEST_ENDED_AT','getTrackedInstance','multi_dropdown','filter','fguVm','../state/testFrameworkState.js','iSLCw','../../utils/constants','info','util','8960SYLRMx','VYlhW','message','\x20&\x20hook\x20=\x20','path','pwzwX','KEY_TEST_STARTED_AT','KEY_HOOKS_FINISHED','debug','getAllData','TEST_ATTACHMENT','../../../helpers/test-observability/utils','PExdE','KEY_TEST_LOCATION','jzVee','yhwKl','trackEvent:\x20loaded\x20testData\x20for\x20testId:\x20','TEST_SCREENSHOT','BDisq','../state/hookState.js','Hook\x20List\x20in\x20Post\x20','./constants/testFrameworkConstants.js','IsrEl','errors','forEach','failed','uuid','get','trackEvent\x20loading\x20testResults\x20for\x20testId:\x20','KEY_LOGS','KEY_TEST_FILE_PATH','parsePlaywrightTestResult','trackEvent:\x20Exception\x20in\x20event\x20tracking,\x20testFrameworkState=%s\x20hookState=%s\x20argsLength=%s,\x20exception=%s','toISOString','../instances/testFrameworkInstance.js','qmZxB','1039086wzHOYn','status','annotations','KEY_TEST_RESULT','HfprL','oZMyu','65565lLArmx','logCreatedEvent','PRE','KEY_TEST_ID','slice','aiEvT','expectedStatus','statSync','gtQpZ','TEST','mRoIs','KEY_TEST_TAGS','DEFAULT_HOOK_RESULT','description','matchHookRegex','\x20and\x20args\x20=\x20','7yEMKBn','fjsKE','trackEvent','KEY_HOOK_LAST_FINISHED','ItmMx','gTxOL','mpPzs','steps','KEY_EVENT_ENDED_AT','map','kZxcr','format','KEY_TEST_FRAMEWORK_VERSION','trackPlaywrightInstance:\x20created\x20instance\x20for\x20target=','some','setTestDetails','getTestFrameworks','trackPlaywrightInstance:\x20saved\x20instance\x20contextId=','aTTOR','1014465qxIrMk','sendLogCreatedEvent:\x20testId=',',\x20state=','toString','KEY_AUTOMATE_SESSION_NAME','KEY_TEST_RESULT_AT','BfMzD','KEY_HOOK_LOGS','KEY_TEST_FRAMEWORK_NAME','\x20target=','AVjHq','hook','1032MTRlyW','KEY_EVENT_STARTED_AT','file_name','KEY_TEST_NAME','inspect','trackHookEvent','parsePlaywrightTest','nRsUf','1055uPwqxD','basename','sendLogCreatedEvent\x20for\x20testId:\x20','skipped','ycmsZ','assign','Expected\x20to\x20fail,\x20but\x20passed.','KEY_TEST_FAILURE_TYPE','KEY_HOOK_FAILURE_REASON','parsePlaywrightTestResult:\x20testId=','KEY_CUSTOM_TAGS','KEY_HOOK_NAME','trim','trackPlaywrightInstance','DnaFs','KEY_TEST_UUID','4oWwckO','startTime','\x20from\x20TestDetails:\x20','\x20result=','resolveInstance','LcuYg','mpadx','SOvVD','../instances/trackedInstance.js','getInstance','addMultipleEntries','push','getTestFrameworksVersions','kISvu','138941WSinBF','EjFCu','getCurrentInstanceName','200QHeXZN','PWKiE','\x20response=','KEY_TEST_SCOPES','sendLogCreatedEvent','createContext','MabkG','KEY_HOOKS_STARTED','attachments','KEY_TEST_CODE','runHooks','getTestUUID','NONE','KEY_HOOK_RESULT','err','duration','Error\x20processing\x20direct\x20trace\x20file\x20','result','OaiDZ','Hook\x20Started\x20in\x20PRE\x20key\x20=\x20','XFMml','Error\x20processing\x20trace\x20file\x20','jzAAT','length','setTrackedInstance','values','Error\x20in\x20sendLogCreatedEvent:\x20','../cliUtils.js','stack','filePath','POST','../grpcClient','\x20hookState=','KEY_TEST_FAILURE_REASON','KEY_HOOK_LAST_STARTED','\x20instance=','step','mbmmT','getTime','error','yNjQn','ZjnxE','\x20\x20and\x20args\x20=\x20','OCdgH'];a65_0x25cd=function(){return _0x46fe5b;};return a65_0x25cd();}class PlaywrightTestFramework extends TestFramework{constructor(_0x52d44c,_0x4ae541,_0x638299){super(_0x52d44c,_0x4ae541,_0x638299);}async[a65_0x1f7a54(0x153)](_0x21ac5d,_0x56fa61,_0x419ec6={}){const _0x25a1ff=a65_0x1f7a54,_0x215c15={};_0x215c15[_0x25a1ff(0x19a)]=function(_0xbee7e4,_0x244edf){return _0xbee7e4===_0x244edf;},_0x215c15[_0x25a1ff(0x113)]='test',_0x215c15[_0x25a1ff(0x163)]=_0x25a1ff(0x137);const _0x11daee=_0x215c15;super[_0x25a1ff(0x153)](_0x21ac5d,_0x56fa61,_0x419ec6);_0x11daee[_0x25a1ff(0x19a)](_0x21ac5d,TestFrameworkState[_0x25a1ff(0x128)])&&TestInfo[_0x25a1ff(0x160)](_0x419ec6['test'][_0x25a1ff(0x101)],_0x419ec6[_0x25a1ff(0x1aa)],!![]);const _0x2fd09b=this[_0x25a1ff(0x18c)](_0x21ac5d,_0x56fa61,_0x419ec6);if(!_0x2fd09b)return;logger[_0x25a1ff(0x11f)](_0x25a1ff(0x102)+_0x21ac5d+_0x25a1ff(0x1b9)+_0x56fa61+'\x20instanceId='+_0x2fd09b[_0x25a1ff(0x1ca)]());try{if(_0x11daee[_0x25a1ff(0x19a)](_0x56fa61,HookState[_0x25a1ff(0x143)])&&_0x11daee[_0x25a1ff(0x19a)](_0x21ac5d,TestFrameworkState[_0x25a1ff(0x14a)])){const _0x8979c1=_0x419ec6[_0x25a1ff(0x1d4)];logger[_0x25a1ff(0x11f)]('trackEvent\x20loading\x20testData\x20for\x20testId:\x20'+_0x8979c1['id']+'}');const _0x46dfe9=TestInfo[_0x25a1ff(0x1a4)](_0x8979c1['id']);_0x2fd09b['addMultipleEntries'](this[_0x25a1ff(0x176)](_0x46dfe9,_0x8979c1)),logger['debug'](_0x25a1ff(0x127)+_0x8979c1['id']+',\x20testFrameworkState='+_0x21ac5d+'\x20testHookState='+_0x56fa61+_0x25a1ff(0x1bc)+_0x2fd09b['getRef']());}if(_0x11daee['PWKiE'](_0x56fa61,HookState['POST'])&&_0x11daee[_0x25a1ff(0x19a)](_0x21ac5d,TestFrameworkState[_0x25a1ff(0x14a)])){const _0x56839d=_0x419ec6['test'],_0x552869=_0x419ec6[_0x25a1ff(0x1aa)];logger['debug'](_0x25a1ff(0x133)+_0x56839d['id']),_0x2fd09b[_0x25a1ff(0x192)](this[_0x25a1ff(0x136)](_0x56839d['id'],_0x552869,_0x56839d)),await this[_0x25a1ff(0x19d)](_0x2fd09b,_0x21ac5d,_0x56fa61,_0x11daee[_0x25a1ff(0x113)],_0x419ec6);}if(CLIUtils[_0x25a1ff(0x14f)](_0x21ac5d[_0x25a1ff(0x167)]()[_0x25a1ff(0x1c7)]('.')[0x1])){const _0x3a3cc0=await this[_0x25a1ff(0x175)](_0x2fd09b,_0x21ac5d,_0x56fa61,_0x419ec6);_0x2fd09b[_0x25a1ff(0x192)](_0x3a3cc0);}}catch(_0x2538a3){logger[_0x25a1ff(0x1c0)](util[_0x25a1ff(0x15c)](_0x11daee[_0x25a1ff(0x163)],_0x21ac5d,_0x56fa61,_0x419ec6[_0x25a1ff(0x1b0)],_0x2538a3));}_0x419ec6[_0x25a1ff(0x1c8)]=_0x2fd09b,await this[_0x25a1ff(0x1a3)](_0x2fd09b,_0x21ac5d,_0x56fa61,_0x419ec6);}[a65_0x1f7a54(0x18c)](_0x155ee1,_0x41371e,_0x46f84d={}){const _0x42aaea=a65_0x1f7a54,_0xd1e6a7={};_0xd1e6a7['wSpdz']=function(_0x447583,_0x1d2359){return _0x447583===_0x1d2359;};const _0x37e989=_0xd1e6a7;let _0x2f7b1a=null;return(_0x37e989[_0x42aaea(0x104)](_0x155ee1,TestFrameworkState[_0x42aaea(0x105)])||_0x37e989[_0x42aaea(0x104)](_0x155ee1,TestFrameworkState[_0x42aaea(0x1a5)]))&&this[_0x42aaea(0x185)](_0x155ee1,_0x46f84d),_0x2f7b1a=TestFramework[_0x42aaea(0x10e)](),_0x2f7b1a;}[a65_0x1f7a54(0x185)](_0x338c22,_0x25f868){const _0x2df2d7=a65_0x1f7a54,_0x46d014=CLIUtils[_0x2df2d7(0x198)](),_0x15ec29=TrackedInstance[_0x2df2d7(0x19e)](_0x46d014);let _0x42c1d8=null;logger[_0x2df2d7(0x115)](_0x2df2d7(0x15e)+_0x46d014+_0x2df2d7(0x166)+_0x338c22),_0x42c1d8=new TestFrameworkInstance(_0x15ec29,this[_0x2df2d7(0x161)](),this[_0x2df2d7(0x194)](),_0x338c22,HookState[_0x2df2d7(0x1a5)]),TestFramework[_0x2df2d7(0x1b1)](_0x15ec29,_0x42c1d8),logger[_0x2df2d7(0x115)](_0x2df2d7(0x162)+_0x15ec29['getId']()+_0x2df2d7(0x16d)+_0x46d014);}[a65_0x1f7a54(0x176)](_0x46c176,_0x3754f9){const _0x4dc2ad=a65_0x1f7a54,_0x5bcff9={'jzVee':function(_0x2728db,_0x4ba350){return _0x2728db(_0x4ba350);},'SOvVD':function(_0x1657ba,_0x5a32f8){return _0x1657ba(_0x5a32f8);},'yhwKl':function(_0x5b5813,_0x182875){return _0x5b5813(_0x182875);},'mpPzs':function(_0x1c792d,_0x2409f4){return _0x1c792d(_0x2409f4);}},_0x1b769c=_0x5bcff9[_0x4dc2ad(0x125)](getPlaywrightTestId,_0x3754f9),_0x20487b=_0x5bcff9['jzVee'](getPlaywrightTestTitle,_0x3754f9),_0x41a90a=_0x5bcff9[_0x4dc2ad(0x125)](getTestTags,_0x3754f9),_0x3485c4=_0x5bcff9[_0x4dc2ad(0x18f)](getPlaywrightTestCode,_0x3754f9),_0x171081=_0x5bcff9['jzVee'](getPlaywrightTestFilePath,_0x3754f9),_0x1d3c0a=_0x171081+':'+_0x5bcff9[_0x4dc2ad(0x18f)](getPlaywrightTestLocation,_0x3754f9),_0x353b5d=_0x5bcff9['SOvVD'](getPlaywrightTestScope,_0x3754f9),_0x33c360=_0x5bcff9[_0x4dc2ad(0x126)](getPlaywrightTestScopes,_0x3754f9),_0x3e80d9=_0x5bcff9[_0x4dc2ad(0x18f)](getPlaywrightSessionName,_0x3754f9),_0x2d6a7f=this[_0x4dc2ad(0x161)]()[0x0],_0xce3984={[TestFrameworkConstants[_0x4dc2ad(0x16c)]]:_0x2d6a7f,[TestFrameworkConstants[_0x4dc2ad(0x15d)]]:this[_0x4dc2ad(0x194)]()[_0x2d6a7f],[TestFrameworkConstants[_0x4dc2ad(0x1d5)]]:[],[TestFrameworkConstants['KEY_HOOKS_FINISHED']]:{},[TestFrameworkConstants[_0x4dc2ad(0x1a0)]]:{},[TestFrameworkConstants[_0x4dc2ad(0x187)]]:_0x46c176,[TestFrameworkConstants[_0x4dc2ad(0x13e)]]:TestFrameworkConstants['DEFAULT_TEST_RESULT'],[TestFrameworkConstants[_0x4dc2ad(0x168)]]:_0x3e80d9,[TestFrameworkConstants[_0x4dc2ad(0x135)]]:_0x171081,[TestFrameworkConstants[_0x4dc2ad(0x144)]]:_0x1b769c,[TestFrameworkConstants[_0x4dc2ad(0x173)]]:_0x20487b,[TestFrameworkConstants[_0x4dc2ad(0x124)]]:_0x1d3c0a,[TestFrameworkConstants[_0x4dc2ad(0x1a2)]]:_0x3485c4,[TestFrameworkConstants[_0x4dc2ad(0x14c)]]:_0x41a90a,[TestFrameworkConstants[_0x4dc2ad(0x11d)]]:_0x3754f9['results'][0x0][_0x4dc2ad(0x189)],[TestFrameworkConstants['KEY_TEST_SCOPE']]:_0x353b5d,[TestFrameworkConstants[_0x4dc2ad(0x19c)]]:_0x33c360,[TestFrameworkConstants['KEY_TEST_RERUN_NAME']]:_0x5bcff9[_0x4dc2ad(0x157)](getPlaywrightCustomRerunParam,_0x3754f9)};TestInfo[_0x4dc2ad(0x160)](_0x3754f9['id'],_0xce3984);const _0x1ecc8c={};return _0x1ecc8c[_0x1b769c]=_0xce3984,_0x1ecc8c;}[a65_0x1f7a54(0x136)](_0x3c16fa,_0x3f8869,_0x4e0470){const _0xa71a84=a65_0x1f7a54,_0x2844f4={'aiEvT':function(_0x1782ab,_0x4f84f4){return _0x1782ab(_0x4f84f4);},'mmujR':_0xa71a84(0x121),'ZjnxE':function(_0x9c7661,_0x5d0c12){return _0x9c7661===_0x5d0c12;},'ycmsZ':function(_0x243410,_0x10931e){return _0x243410===_0x10931e;},'lLpvc':function(_0x7a60,_0x10e501){return _0x7a60===_0x10e501;},'fguVm':_0xa71a84(0x106),'bWrJD':_0xa71a84(0x10f),'wEFAF':function(_0x3a0c58,_0x4a81e9){return _0x3a0c58+_0x4a81e9;},'wLbqD':function(_0xed30ae,_0x3a3eb5){return _0xed30ae===_0x3a3eb5;},'tEGvS':_0xa71a84(0x17b),'AVjHq':'passed','PExdE':function(_0x2d19d2,_0x32256a){return _0x2d19d2===_0x32256a;},'jzAAT':_0xa71a84(0x130),'etGZV':'timedOut','rSIUp':function(_0x29caec,_0x5a42b){return _0x29caec===_0x5a42b;},'gTxOL':function(_0x123092,_0x4fb9fb){return _0x123092===_0x4fb9fb;},'gtQpZ':_0xa71a84(0x17e),'pwzwX':function(_0x820132,_0x2730e6,_0x3eae8e){return _0x820132(_0x2730e6,_0x3eae8e);},'qmZxB':function(_0x4b0484,_0x355c2d){return _0x4b0484||_0x355c2d;},'ItmMx':function(_0x5e8cdf,_0x49ccc7){return _0x5e8cdf(_0x49ccc7);},'mbmmT':function(_0x60c317,_0x5c28e0){return _0x60c317(_0x5c28e0);},'DnaFs':function(_0x5aa6ce,_0x18e7ae,_0x57d65a){return _0x5aa6ce(_0x18e7ae,_0x57d65a);},'pxdYf':_0xa71a84(0x11b),'ffUHE':function(_0x24e1a5,_0x13cd81){return _0x24e1a5(_0x13cd81);},'rTAjp':function(_0x52d028,_0x543a9a){return _0x52d028>_0x543a9a;}};logger[_0xa71a84(0x11f)](_0xa71a84(0x181)+_0x3c16fa);const _0x2fa843=new Date(_0x3f8869[_0xa71a84(0x189)]),_0x2ca686=_0x3f8869[_0xa71a84(0x1a8)],_0x2c6eff=new Date(_0x2844f4['wEFAF'](_0x2fa843[_0xa71a84(0x1bf)](),_0x2ca686)),_0xdde623=_0x3f8869[_0xa71a84(0x13c)],_0x1191fb=TestInfo[_0xa71a84(0x1d7)](_0x3c16fa)[TestFrameworkConstants[_0xa71a84(0x182)]]||{};let _0x518a7c=_0xdde623;if(_0x2844f4['wLbqD'](_0x3f8869[_0xa71a84(0x13c)],_0x4e0470[_0xa71a84(0x147)]))_0x518a7c=_0x2844f4[_0xa71a84(0x1c2)](_0x3f8869[_0xa71a84(0x13c)],_0x2844f4[_0xa71a84(0x1d2)])?_0x2844f4[_0xa71a84(0x1d2)]:_0x2844f4[_0xa71a84(0x16e)];else{(_0x2844f4[_0xa71a84(0x123)](_0x518a7c,_0x2844f4[_0xa71a84(0x16e)])||_0x2844f4[_0xa71a84(0x123)](_0x518a7c,_0x2844f4[_0xa71a84(0x1af)])||_0x2844f4[_0xa71a84(0x123)](_0x518a7c,_0x2844f4['etGZV']))&&(_0x518a7c=_0x2844f4[_0xa71a84(0x1af)]);if(_0x2844f4['rSIUp'](_0x3f8869['status'],_0x2844f4['AVjHq'])&&_0x2844f4[_0xa71a84(0x156)](_0x4e0470[_0xa71a84(0x147)],_0x2844f4['jzAAT'])){const _0x24f0c6={};_0x24f0c6[_0xa71a84(0x119)]=_0x2844f4[_0xa71a84(0x149)],_0x24f0c6[_0xa71a84(0x1b5)]=_0x2844f4[_0xa71a84(0x149)],_0x3f8869['error']=_0x24f0c6,_0x3f8869[_0xa71a84(0x12e)]=[_0x3f8869['error']];}}const {failureData:_0x35817f,logs:_0x129309}=_0x2844f4[_0xa71a84(0x11c)](getFailureData,_0x3f8869?.[_0xa71a84(0x12e)],{}),_0x39f719={[TestFrameworkConstants[_0xa71a84(0x10a)]]:_0x2844f4[_0xa71a84(0x13a)](_0x35817f,null),[TestFrameworkConstants[_0xa71a84(0x17f)]]:_0x3f8869?.['error']&&_0x2844f4[_0xa71a84(0x155)](getFailureType,_0x3f8869[_0xa71a84(0x1c0)][_0xa71a84(0x119)]),[TestFrameworkConstants[_0xa71a84(0x1ba)]]:_0x3f8869?.[_0xa71a84(0x1c0)]&&_0x2844f4[_0xa71a84(0x1be)](removeAnsiColors,_0x3f8869[_0xa71a84(0x1c0)][_0xa71a84(0x119)]),[TestFrameworkConstants['KEY_LOGS']]:[],[TestFrameworkConstants[_0xa71a84(0x13e)]]:_0x518a7c,[TestFrameworkConstants[_0xa71a84(0x10d)]]:_0x2c6eff[_0xa71a84(0x138)](),[TestFrameworkConstants[_0xa71a84(0x169)]]:new Date()[_0xa71a84(0x138)](),[TestFrameworkConstants[_0xa71a84(0x182)]]:_0x1191fb},_0x179798={};_0x179798[_0xa71a84(0x1d4)]=_0x4e0470;const _0xd7083f=this['resolveInstance'](TestFrameworkState[_0xa71a84(0x14a)],HookState[_0xa71a84(0x1b7)],_0x179798),_0x54cc7f=_0xd7083f[_0xa71a84(0x120)]()[_0xa71a84(0x132)](_0x3c16fa)[TestFrameworkConstants[_0xa71a84(0x187)]],_0x316bb3=[],_0x3fb1f7=_0x2844f4[_0xa71a84(0x186)](findNestedKey,_0x3f8869,_0x2844f4[_0xa71a84(0x1cc)]);if(_0x3fb1f7&&_0x2844f4['ffUHE'](validateFilePath,_0x3fb1f7))try{_0x316bb3[_0xa71a84(0x193)]({'kind':_0x2844f4['mmujR'],'timestamp':new Date()[_0xa71a84(0x138)](),'test_run_uuid':_0x54cc7f,'file_name':path[_0xa71a84(0x179)](_0x3fb1f7),'file_size':fs[_0xa71a84(0x148)](_0x3fb1f7)['size'],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x34b9d1){logger[_0xa71a84(0x1c0)](_0xa71a84(0x1a9)+_0x3fb1f7+':\x20'+_0x34b9d1[_0xa71a84(0x119)]);}const _0x58b59c=TestInfo['getTraceFilePaths'](),_0x76492b=_0x58b59c[_0xa71a84(0x110)](_0x3ce858=>_0x3ce858[_0xa71a84(0x1cb)]===_0x54cc7f);_0x76492b['forEach'](_0x46a7e8=>{const _0x33af3c=_0xa71a84;if(_0x46a7e8[_0x33af3c(0x1b6)]&&_0x2844f4[_0x33af3c(0x146)](validateFilePath,_0x46a7e8[_0x33af3c(0x1b6)])&&!_0x316bb3[_0x33af3c(0x15f)](_0x243158=>_0x243158[_0x33af3c(0x172)]===path[_0x33af3c(0x179)](_0x46a7e8[_0x33af3c(0x1b6)])))try{_0x316bb3[_0x33af3c(0x193)]({'kind':_0x2844f4['mmujR'],'timestamp':new Date()[_0x33af3c(0x138)](),'test_run_uuid':_0x54cc7f,'file_name':path[_0x33af3c(0x179)](_0x46a7e8[_0x33af3c(0x1b6)]),'file_size':fs[_0x33af3c(0x148)](_0x46a7e8['filePath'])[_0x33af3c(0x1d3)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x15c1a9){logger[_0x33af3c(0x1c0)](_0x33af3c(0x1ae)+_0x46a7e8['filePath']+_0x33af3c(0x18a)+_0x15c1a9[_0x33af3c(0x119)]);}});if(_0x2844f4[_0xa71a84(0x1c6)](_0x316bb3['length'],0x0)){const _0x25af21=_0x39f719[TestFrameworkConstants['KEY_LOGS']]||[];_0x39f719[TestFrameworkConstants[_0xa71a84(0x134)]]=[..._0x25af21,..._0x316bb3];}const _0x7f5f8b=TestInfo[_0xa71a84(0x1d7)](_0x3c16fa)[TestFrameworkConstants[_0xa71a84(0x1c9)]]||{},_0x264237=_0x2844f4['DnaFs'](getManualUploadLogs,_0x7f5f8b,_0xd7083f['getAllData']()[_0xa71a84(0x132)](_0x3c16fa)[TestFrameworkConstants['KEY_TEST_UUID']]);if(_0x2844f4[_0xa71a84(0x1c6)](_0x264237[_0xa71a84(0x1b0)],0x0)){const _0x1fa237=_0x39f719[TestFrameworkConstants['KEY_LOGS']]||[];_0x39f719[TestFrameworkConstants[_0xa71a84(0x134)]]=[..._0x1fa237,..._0x264237];}const _0x5ec226=_0x4e0470[_0xa71a84(0x13d)]||[],_0x335a65=_0x39f719[TestFrameworkConstants[_0xa71a84(0x182)]]||{};_0x5ec226[_0xa71a84(0x12f)](_0x586b6a=>{const _0xa5e2f9=_0xa71a84,{type:_0x21ac5b}=_0x586b6a;let _0x5ae5c1=_0x586b6a[_0xa5e2f9(0x14e)];if(!_0x21ac5b)return;(_0x2844f4[_0xa5e2f9(0x1c2)](_0x5ae5c1,undefined)||_0x2844f4[_0xa5e2f9(0x17c)](_0x5ae5c1,null)||_0x2844f4['lLpvc'](_0x2844f4[_0xa5e2f9(0x146)](String,_0x5ae5c1)[_0xa5e2f9(0x184)](),''))&&(_0x5ae5c1=_0x2844f4[_0xa5e2f9(0x111)]);if(!_0x335a65[_0x21ac5b]){const _0x100fcc={};_0x100fcc[_0xa5e2f9(0x1cd)]=_0x2844f4['bWrJD'],_0x100fcc[_0xa5e2f9(0x1b2)]=[],_0x335a65[_0x21ac5b]=_0x100fcc;}else!_0x335a65[_0x21ac5b][_0xa5e2f9(0x1cd)]&&(_0x335a65[_0x21ac5b][_0xa5e2f9(0x1cd)]=_0x2844f4[_0xa5e2f9(0x1cf)]),!Array['isArray'](_0x335a65[_0x21ac5b][_0xa5e2f9(0x1b2)])&&(_0x335a65[_0x21ac5b][_0xa5e2f9(0x1b2)]=[]);const _0x50480e=_0x2844f4[_0xa5e2f9(0x146)](String,_0x5ae5c1)[_0xa5e2f9(0x1c7)](',')[_0xa5e2f9(0x15a)](_0x2ddcd8=>_0x2ddcd8['trim']());_0x335a65[_0x21ac5b]['values']=[...new Set([..._0x335a65[_0x21ac5b][_0xa5e2f9(0x1b2)],..._0x50480e])];}),_0x39f719[TestFrameworkConstants[_0xa71a84(0x182)]]=_0x335a65,TestInfo[_0xa71a84(0x160)](_0x3c16fa,_0x39f719);const _0x3e44d5={};return _0x3e44d5[_0x3c16fa]=_0x39f719,_0x3e44d5;}async[a65_0x1f7a54(0x175)](_0x161e03,_0x48c787,_0x174544,_0x394a34){const _0x197a5b=a65_0x1f7a54,_0x47ea6e={'DkMoW':function(_0x10e067,_0x280784){return _0x10e067 in _0x280784;},'EQrml':function(_0x5a498d,_0x596116){return _0x5a498d in _0x596116;},'uRWUI':function(_0x542897,_0x4e54e3){return _0x542897(_0x4e54e3);},'qdNiz':function(_0xf9bb12,_0x39944b){return _0xf9bb12(_0x39944b);},'BfMzD':function(_0x16d375,_0x18f8a5){return _0x16d375===_0x18f8a5;},'mpadx':function(_0x8606e3){return _0x8606e3();},'HfprL':function(_0x595cc5,_0x549951){return _0x595cc5>_0x549951;},'mRoIs':function(_0xf22d64,_0x5d028f,_0x537e79){return _0xf22d64(_0x5d028f,_0x537e79);},'MabkG':_0x197a5b(0x1a7),'OCdgH':function(_0x52f845,_0x5ed8e2){return _0x52f845(_0x5ed8e2);},'IsrEl':_0x197a5b(0x130),'EjFCu':_0x197a5b(0x1ce),'wjjiM':function(_0x53b1f7,_0x286b47){return _0x53b1f7!==_0x286b47;},'nRsUf':function(_0x14eb3a,_0x1f8e0c){return _0x14eb3a+_0x1f8e0c;},'LcuYg':_0x197a5b(0x16f)},_0x2888f7=_0x394a34[_0x197a5b(0x1d4)],_0x50a10d=_0x394a34[_0x197a5b(0x1bd)],_0x2e1527=_0x394a34['test']['id'],_0x4e4978=_0x48c787[_0x197a5b(0x167)]()[_0x197a5b(0x1c7)]('.')[0x1];let _0x389978=_0x161e03[_0x197a5b(0x120)]()['get'](_0x2e1527)[TestFrameworkConstants[_0x197a5b(0x1a0)]];!_0x389978&&(_0x389978={});!_0x47ea6e[_0x197a5b(0x107)](_0x4e4978,_0x389978)&&(_0x389978[_0x4e4978]=[]);let _0x40a003=_0x161e03[_0x197a5b(0x120)]()[_0x197a5b(0x132)](_0x2e1527)[TestFrameworkConstants[_0x197a5b(0x11e)]];!_0x40a003&&(_0x40a003={});!_0x47ea6e['EQrml'](_0x4e4978,_0x40a003)&&(_0x40a003[_0x4e4978]=[]);const _0x1383b0={[TestFrameworkConstants[_0x197a5b(0x1a0)]]:_0x389978,[TestFrameworkConstants['KEY_HOOKS_FINISHED']]:_0x40a003},_0x5ec87a={};_0x5ec87a[_0x2e1527]=_0x1383b0;const _0x561d42=_0x5ec87a,_0x19364b=_0x47ea6e[_0x197a5b(0x1d0)](getPlaywrightTestFilePath,_0x2888f7),_0x163831=_0x19364b+':'+_0x47ea6e[_0x197a5b(0x10c)](getPlaywrightTestLocation,_0x2888f7),_0x4c874b=TestInfo[_0x197a5b(0x1d7)](_0x2e1527)[TestFrameworkConstants['KEY_CUSTOM_TAGS']]||{};if(_0x47ea6e[_0x197a5b(0x16a)](_0x174544,HookState[_0x197a5b(0x143)])){const _0x536858={'key':_0x4e4978,[TestFrameworkConstants[_0x197a5b(0x109)]]:_0x47ea6e[_0x197a5b(0x18e)](uuidv4),[TestFrameworkConstants[_0x197a5b(0x1a6)]]:TestFrameworkConstants[_0x197a5b(0x14d)],[TestFrameworkConstants[_0x197a5b(0x171)]]:_0x50a10d[_0x197a5b(0x189)],[TestFrameworkConstants[_0x197a5b(0x16b)]]:[],[TestFrameworkConstants[_0x197a5b(0x183)]]:_0x50a10d['title'],[TestFrameworkConstants['KEY_TEST_FILE_PATH']]:_0x19364b,[TestFrameworkConstants[_0x197a5b(0x124)]]:_0x163831,[TestFrameworkConstants[_0x197a5b(0x182)]]:_0x4c874b};_0x389978[_0x4e4978]['push'](_0x536858),_0x561d42[_0x2e1527][TestFrameworkConstants[_0x197a5b(0x1bb)]]=_0x4e4978,logger['debug'](_0x197a5b(0x1ac)+_0x4e4978+_0x197a5b(0x11a)+_0x536858+_0x197a5b(0x1c3)+_0x394a34);}else{if(_0x47ea6e['BfMzD'](_0x174544,HookState['POST'])){const _0x50345e=await _0x394a34[_0x197a5b(0x1aa)],_0x2df601=_0x389978[_0x4e4978]||[],_0x5d2257=_0x394a34[_0x197a5b(0x1bd)];logger[_0x197a5b(0x11f)](_0x197a5b(0x12b)+_0x2df601+_0x197a5b(0x150)+_0x394a34);if(_0x47ea6e[_0x197a5b(0x13f)](_0x2df601['length'],0x0)){const _0x32826c=_0x2df601['pop']();if(_0x5d2257['error']){const _0x4a446b=_0x47ea6e[_0x197a5b(0x14b)](failureData,_0x5d2257[_0x197a5b(0x1c0)],_0x47ea6e[_0x197a5b(0x19f)]);_0x32826c[TestFrameworkConstants['KEY_HOOK_FAILURE_TYPE']]=_0x47ea6e[_0x197a5b(0x1c4)](getFailureType,_0x5d2257?.[_0x197a5b(0x1c0)][_0x197a5b(0x119)]),_0x32826c[TestFrameworkConstants[_0x197a5b(0x180)]]=_0x47ea6e[_0x197a5b(0x1d0)](removeAnsiColors,_0x5d2257?.[_0x197a5b(0x1c0)][_0x197a5b(0x119)]),_0x32826c[TestFrameworkConstants[_0x197a5b(0x1a6)]]=_0x47ea6e[_0x197a5b(0x12d)],_0x32826c[TestFrameworkConstants[_0x197a5b(0x1c5)]]=_0x4a446b;}else _0x32826c[TestFrameworkConstants[_0x197a5b(0x1a6)]]=_0x47ea6e[_0x197a5b(0x197)];_0x47ea6e['wjjiM'](_0x50345e,TestFrameworkConstants[_0x197a5b(0x14d)])&&(_0x32826c[TestFrameworkConstants[_0x197a5b(0x1a6)]]=!_0x5d2257[_0x197a5b(0x1c0)]?_0x47ea6e[_0x197a5b(0x197)]:_0x47ea6e['IsrEl']);const _0x2cb9ba=new Date(_0x5d2257['startTime']),_0x1a426a=new Date(_0x47ea6e[_0x197a5b(0x177)](_0x2cb9ba['getTime'](),_0x5d2257[_0x197a5b(0x1a8)]));_0x32826c[TestFrameworkConstants[_0x197a5b(0x159)]]=_0x1a426a[_0x197a5b(0x138)](),_0x32826c[TestFrameworkConstants[_0x197a5b(0x182)]]=_0x4c874b;const _0x930a06=_0x32826c[TestFrameworkConstants[_0x197a5b(0x109)]];await this[_0x197a5b(0x19d)](_0x161e03,_0x48c787,_0x930a06,_0x47ea6e[_0x197a5b(0x18d)],_0x394a34),!_0x40a003[_0x4e4978]&&(_0x40a003[_0x4e4978]=[]),_0x40a003[_0x4e4978][_0x197a5b(0x193)](_0x32826c),_0x561d42[_0x2e1527][TestFrameworkConstants[_0x197a5b(0x154)]]=_0x4e4978;}}}return _0x561d42;}async[a65_0x1f7a54(0x19d)](_0x44974c,_0x18fd03,_0x144c69,_0x2df3f4,_0x58f258){const _0x2205fa=a65_0x1f7a54,_0x76b2b={'yNjQn':function(_0x3bdeda,_0x1c88b8){return _0x3bdeda===_0x1c88b8;},'OaiDZ':_0x2205fa(0x1d4),'oZMyu':function(_0x5070d9,_0x3d0d7e,_0x215c12){return _0x5070d9(_0x3d0d7e,_0x215c12);},'kISvu':_0x2205fa(0x1a1),'npHRv':function(_0x526491,_0x2d8168,_0x336299,_0x41e711){return _0x526491(_0x2d8168,_0x336299,_0x41e711);},'QGcPU':function(_0x127a61,_0x3a7f04,_0x2c1197){return _0x127a61(_0x3a7f04,_0x2c1197);},'RseOq':function(_0x337612,_0x525c9f){return _0x337612/_0x525c9f;},'lNiYQ':function(_0x3d3074,_0x23475e){return _0x3d3074<_0x23475e;},'fjsKE':function(_0x523928,_0x243e44){return _0x523928*_0x243e44;},'VYlhW':function(_0x349cf0,_0x4f605f){return _0x349cf0+_0x4f605f;},'XFMml':function(_0x54614a,_0x4f2549,_0x589996,_0x28c41c,_0x2c4222){return _0x54614a(_0x4f2549,_0x589996,_0x28c41c,_0x2c4222);},'kZxcr':function(_0x290873,_0x1334a8,_0x496172,_0x496b3f){return _0x290873(_0x1334a8,_0x496172,_0x496b3f);},'BDisq':_0x2205fa(0x16f),'Ptgnp':function(_0x25e280,_0xd2e2bb,_0x4b68eb,_0x1745b1,_0x591300){return _0x25e280(_0xd2e2bb,_0x4b68eb,_0x1745b1,_0x591300);}};try{if(_0x76b2b[_0x2205fa(0x1c1)](_0x2df3f4,_0x76b2b[_0x2205fa(0x1ab)])){const _0xab26b=await _0x58f258[_0x2205fa(0x1aa)],_0x1aac2f=_0x58f258[_0x2205fa(0x1d4)]['id'],_0x4c2a5e=_0x58f258[_0x2205fa(0x1d4)];logger['debug']('sendLogCreatedEvent:\x20testId='+_0x1aac2f+_0x2205fa(0x18b)+util[_0x2205fa(0x174)](_0xab26b));const _0x463f4f=_0x44974c[_0x2205fa(0x120)]()[_0x2205fa(0x132)](_0x1aac2f)[TestFrameworkConstants[_0x2205fa(0x187)]];await _0x76b2b[_0x2205fa(0x140)](sendTraceZip,_0xab26b,_0x463f4f);const _0x35c2dd=TestInfo[_0x2205fa(0x1d7)](_0x1aac2f)[_0x76b2b[_0x2205fa(0x195)]];if(_0x35c2dd){!_0xab26b['attachments']&&(_0xab26b[_0x2205fa(0x1a1)]=[]);Object[_0x2205fa(0x17d)](_0xab26b['attachments'],_0xab26b[_0x2205fa(0x1a1)][_0x2205fa(0x100)](_0x35c2dd));const _0x4c86d3=TestInfo[_0x2205fa(0x1d7)](_0x1aac2f);delete _0x4c86d3[_0x76b2b[_0x2205fa(0x195)]],TestInfo[_0x2205fa(0x160)](_0x1aac2f,_0x4c86d3);}const {steps:_0x3095d1,logs:_0x2eb64f}=_0x76b2b['npHRv'](getStepsAndLogs,_0xab26b[_0x2205fa(0x158)],_0x44974c['getAllData']()[_0x2205fa(0x132)](_0x1aac2f)[TestFrameworkConstants[_0x2205fa(0x187)]],_0x76b2b[_0x2205fa(0x1ab)]),_0x54aa70=_0x76b2b[_0x2205fa(0x140)](getScreenshots,_0xab26b,_0x44974c[_0x2205fa(0x120)]()[_0x2205fa(0x132)](_0x1aac2f)[TestFrameworkConstants[_0x2205fa(0x187)]]),_0x410a1b=_0x76b2b['oZMyu'](getVideos,_0xab26b,_0x44974c[_0x2205fa(0x120)]()[_0x2205fa(0x132)](_0x1aac2f)[TestFrameworkConstants[_0x2205fa(0x187)]]),{_:_0x406a2b,logs:_0x102b48}=_0x76b2b[_0x2205fa(0x108)](getFailureData,_0xab26b[_0x2205fa(0x12e)],{'test_run_uuid':_0x44974c[_0x2205fa(0x120)]()[_0x2205fa(0x132)](_0x1aac2f)[TestFrameworkConstants[_0x2205fa(0x187)]]}),_0x29e52e=TestInfo[_0x2205fa(0x1d7)](_0x1aac2f)[TestFrameworkConstants[_0x2205fa(0x1c9)]]||{},_0x226673=_0x76b2b[_0x2205fa(0x108)](getMediaArtifactsLogs,_0x29e52e,_0x44974c[_0x2205fa(0x120)]()[_0x2205fa(0x132)](_0x1aac2f)[TestFrameworkConstants[_0x2205fa(0x187)]]),_0x5ecd74=_0x44974c['getAllData']()['get'](_0x1aac2f),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x17541c='',[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]:_0x4d84fd=''}=_0x5ecd74,_0x2a7478=(_0x2eb64f||[])['concat'](_0x54aa70||[])['concat'](_0x102b48||[])[_0x2205fa(0x100)](_0x410a1b||[])['concat'](_0x226673||[]),_0x127501=0x28,_0x2f54ad=Math['ceil'](_0x76b2b['RseOq'](_0x2a7478[_0x2205fa(0x1b0)],_0x127501));for(let _0xfc3752=0x0;_0x76b2b['lNiYQ'](_0xfc3752,_0x2f54ad);_0xfc3752++){const _0xbba475=_0x76b2b[_0x2205fa(0x152)](_0xfc3752,_0x127501),_0x4700db=_0x76b2b['VYlhW'](_0xbba475,_0x127501),_0x35df3b=_0x2a7478[_0x2205fa(0x145)](_0xbba475,_0x4700db),_0xdc89e7={'platformIndex':'0','logs':_0x35df3b,'testFrameworkName':_0x17541c,'testFrameworkVersion':_0x4d84fd,'testFrameworkState':_0x18fd03['toString']()['split']('.')[0x1]};_0x76b2b[_0x2205fa(0x1ad)](updatePayloadForTraceLogs,_0xdc89e7,_0x58f258,_0x1aac2f,_0x44974c),logger[_0x2205fa(0x11f)]('sendLogCreatedEvent\x20for\x20testId:\x20'+_0x1aac2f+'\x20batch\x20'+_0x76b2b[_0x2205fa(0x118)](_0xfc3752,0x1)+'/'+_0x2f54ad+'\x20payload='+util[_0x2205fa(0x174)](_0xdc89e7));const _0x45b67a=await GrpcClient[_0x2205fa(0x191)]()[_0x2205fa(0x142)](_0xdc89e7);logger[_0x2205fa(0x11f)](_0x2205fa(0x17a)+_0x1aac2f+'\x20batch\x20'+_0x76b2b['VYlhW'](_0xfc3752,0x1)+'/'+_0x2f54ad+_0x2205fa(0x19b)+util['inspect'](_0x45b67a));}}else{const {steps:_0x491d61,logs:_0x452c8c}=_0x76b2b[_0x2205fa(0x15b)](getStepsAndLogs,_0x58f258[_0x2205fa(0x1bd)][_0x2205fa(0x158)],_0x144c69,_0x76b2b[_0x2205fa(0x129)]),_0x28ecae=_0x58f258['test']['id'];logger[_0x2205fa(0x11f)](_0x2205fa(0x165)+_0x28ecae);const _0x529114=_0x44974c['getAllData']()[_0x2205fa(0x132)](_0x28ecae),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x1d9d9f='',[TestFrameworkConstants[_0x2205fa(0x15d)]]:_0x27f047=''}=_0x529114,_0x3ece5d={'platformIndex':'0','logs':_0x452c8c,'testFrameworkName':_0x1d9d9f,'testFrameworkVersion':_0x27f047,'testFrameworkState':_0x18fd03[_0x2205fa(0x167)]()[_0x2205fa(0x1c7)]('.')[0x1]};_0x76b2b['Ptgnp'](updatePayloadForTraceLogs,_0x3ece5d,_0x58f258,_0x28ecae,_0x44974c),logger['debug'](_0x2205fa(0x17a)+_0x28ecae+'\x20payload='+util[_0x2205fa(0x174)](_0x3ece5d));const _0x214f0e=await GrpcClient['getInstance']()[_0x2205fa(0x142)](_0x3ece5d);}}catch(_0x505a92){logger['error'](_0x2205fa(0x1b3)+util[_0x2205fa(0x15c)](_0x505a92));}}}module['exports']=PlaywrightTestFramework;