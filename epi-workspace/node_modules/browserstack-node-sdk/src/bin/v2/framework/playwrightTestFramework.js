const a65_0x224af6=a65_0x46dc;(function(_0xd304d3,_0x2532cc){const _0x54ed3f=a65_0x46dc,_0x5a5088=_0xd304d3();while(!![]){try{const _0x1a0e2a=parseInt(_0x54ed3f(0x237))/0x1+parseInt(_0x54ed3f(0x248))/0x2+parseInt(_0x54ed3f(0x1a9))/0x3+-parseInt(_0x54ed3f(0x1d0))/0x4*(-parseInt(_0x54ed3f(0x1f4))/0x5)+-parseInt(_0x54ed3f(0x247))/0x6*(parseInt(_0x54ed3f(0x1ae))/0x7)+parseInt(_0x54ed3f(0x24b))/0x8+-parseInt(_0x54ed3f(0x1e1))/0x9;if(_0x1a0e2a===_0x2532cc)break;else _0x5a5088['push'](_0x5a5088['shift']());}catch(_0x3adec4){_0x5a5088['push'](_0x5a5088['shift']());}}}(a65_0x2281,0xf09c3));const TestFramework=require('./testFramework'),TestFrameworkState=require(a65_0x224af6(0x238)),HookState=require('../state/hookState.js'),{createClassLogger}=require('../../../helpers/classLogger.js'),TestFrameworkInstance=require(a65_0x224af6(0x266)),CLIUtils=require(a65_0x224af6(0x1ab)),TrackedInstance=require(a65_0x224af6(0x24e)),TestFrameworkConstants=require(a65_0x224af6(0x1fe)),logger=createClassLogger(a65_0x224af6(0x262)),{v4:uuidv4}=require('uuid'),util=require(a65_0x224af6(0x226)),{getPlaywrightSessionName,getPlaywrightTestFilePath,getPlaywrightTestId,getPlaywrightTestTitle,getPlaywrightTestLocation,getPlaywrightTestTags,getPlaywrightTestCode,getPlaywrightTestScope,getPlaywrightTestScopes,getStepsAndLogs,getScreenshots,getVideos,getPlaywrightCustomRerunParam,getMediaArtifactsLogs,getManualUploadLogs,updatePayloadForTraceLogs}=require('../../../helpers/helper.js'),TestInfo=require(a65_0x224af6(0x268)),GrpcClient=require(a65_0x224af6(0x1a4)),{removeAnsiColors,getFailureType,failureData}=require(a65_0x224af6(0x21a)),{getFailureData,getTestTags}=require(a65_0x224af6(0x22e)),{findNestedKey,sendTraceZip,validateFilePath}=require('../../playwright/reporter/pwUtils'),path=require('path'),fs=require('fs'),helper=require(a65_0x224af6(0x1db)),{PLAYWRIGHT_TRACE_LOGS}=require('../../utils/constants');class PlaywrightTestFramework extends TestFramework{constructor(_0x4ce4dc,_0x20786e,_0x3e3517){super(_0x4ce4dc,_0x20786e,_0x3e3517);}async[a65_0x224af6(0x214)](_0x1cf4ae,_0x3229af,_0x560c90={}){const _0x411d51=a65_0x224af6,_0x105daa={};_0x105daa['klFSd']=function(_0x33ff02,_0x3caccf){return _0x33ff02===_0x3caccf;},_0x105daa[_0x411d51(0x22a)]=function(_0x16fd7b,_0xfd32c7){return _0x16fd7b===_0xfd32c7;},_0x105daa[_0x411d51(0x1f8)]=function(_0x55b510,_0x460690){return _0x55b510===_0x460690;},_0x105daa[_0x411d51(0x1c5)]=function(_0xd1c0fe,_0x345ef6){return _0xd1c0fe===_0x345ef6;},_0x105daa[_0x411d51(0x212)]=_0x411d51(0x21b),_0x105daa[_0x411d51(0x21e)]='trackEvent:\x20Exception\x20in\x20event\x20tracking,\x20testFrameworkState=%s\x20hookState=%s\x20argsLength=%s,\x20exception=%s';const _0x29569c=_0x105daa;super[_0x411d51(0x214)](_0x1cf4ae,_0x3229af,_0x560c90);_0x29569c[_0x411d51(0x1ce)](_0x1cf4ae,TestFrameworkState[_0x411d51(0x1bb)])&&TestInfo['setTestDetails'](_0x560c90['test']['testId'],_0x560c90[_0x411d51(0x235)],!![]);const _0x32092f=this['resolveInstance'](_0x1cf4ae,_0x3229af,_0x560c90);if(!_0x32092f)return;logger[_0x411d51(0x1de)](_0x411d51(0x1a7)+_0x1cf4ae+_0x411d51(0x1cd)+_0x3229af+'\x20instanceId='+_0x32092f['getRef']());try{if(_0x29569c[_0x411d51(0x22a)](_0x3229af,HookState['PRE'])&&_0x29569c['eXtRf'](_0x1cf4ae,TestFrameworkState[_0x411d51(0x23a)])){const _0x2350c5=_0x560c90[_0x411d51(0x21b)];logger[_0x411d51(0x1de)](_0x411d51(0x260)+_0x2350c5['id']+'}');const _0x3633e6=TestInfo['getTestUUID'](_0x2350c5['id']);_0x32092f[_0x411d51(0x228)](this[_0x411d51(0x1b6)](_0x3633e6,_0x2350c5)),logger[_0x411d51(0x1de)](_0x411d51(0x1f5)+_0x2350c5['id']+_0x411d51(0x1e7)+_0x1cf4ae+'\x20testHookState='+_0x3229af+'\x20instance='+_0x32092f[_0x411d51(0x216)]());}if(_0x29569c[_0x411d51(0x1f8)](_0x3229af,HookState[_0x411d51(0x23b)])&&_0x29569c[_0x411d51(0x1c5)](_0x1cf4ae,TestFrameworkState[_0x411d51(0x23a)])){const _0x4d4980=_0x560c90[_0x411d51(0x21b)],_0x1dd7ca=_0x560c90[_0x411d51(0x235)];logger[_0x411d51(0x1de)](_0x411d51(0x261)+_0x4d4980['id']),_0x32092f[_0x411d51(0x228)](this[_0x411d51(0x1d5)](_0x4d4980['id'],_0x1dd7ca,_0x4d4980)),await this[_0x411d51(0x1bc)](_0x32092f,_0x1cf4ae,_0x3229af,_0x29569c['bOCrd'],_0x560c90);}if(CLIUtils[_0x411d51(0x253)](_0x1cf4ae[_0x411d51(0x1b7)]()[_0x411d51(0x205)]('.')[0x1])){const _0x3ae659=await this[_0x411d51(0x1bd)](_0x32092f,_0x1cf4ae,_0x3229af,_0x560c90);_0x32092f['addMultipleEntries'](_0x3ae659);}}catch(_0x4fb54e){logger[_0x411d51(0x234)](util['format'](_0x29569c[_0x411d51(0x21e)],_0x1cf4ae,_0x3229af,_0x560c90['length'],_0x4fb54e));}_0x560c90[_0x411d51(0x224)]=_0x32092f,await this[_0x411d51(0x1e0)](_0x32092f,_0x1cf4ae,_0x3229af,_0x560c90);}['resolveInstance'](_0x328d22,_0x50170,_0x14f329={}){const _0xfbfb4b=a65_0x224af6,_0x581183={};_0x581183[_0xfbfb4b(0x221)]=function(_0x534ba2,_0xb32317){return _0x534ba2===_0xb32317;},_0x581183[_0xfbfb4b(0x1f0)]=function(_0x552098,_0x2ea5ee){return _0x552098===_0x2ea5ee;};const _0x5b5426=_0x581183;let _0x312054=null;return(_0x5b5426[_0xfbfb4b(0x221)](_0x328d22,TestFrameworkState[_0xfbfb4b(0x209)])||_0x5b5426[_0xfbfb4b(0x1f0)](_0x328d22,TestFrameworkState[_0xfbfb4b(0x1c4)]))&&this[_0xfbfb4b(0x246)](_0x328d22,_0x14f329),_0x312054=TestFramework['getTrackedInstance'](),_0x312054;}[a65_0x224af6(0x246)](_0x426b3e,_0x50c3fe){const _0x541893=a65_0x224af6,_0x5b8d27=CLIUtils[_0x541893(0x223)](),_0x53d0e5=TrackedInstance[_0x541893(0x1d7)](_0x5b8d27);let _0x53a9ab=null;logger[_0x541893(0x1d8)](_0x541893(0x1c1)+_0x5b8d27+_0x541893(0x218)+_0x426b3e),_0x53a9ab=new TestFrameworkInstance(_0x53d0e5,this[_0x541893(0x23f)](),this[_0x541893(0x20b)](),_0x426b3e,HookState['NONE']),TestFramework['setTrackedInstance'](_0x53d0e5,_0x53a9ab),logger['info'](_0x541893(0x1e8)+_0x53d0e5['getId']()+_0x541893(0x1cb)+_0x5b8d27);}[a65_0x224af6(0x1b6)](_0x3b79be,_0x4aef02){const _0xf4a49f=a65_0x224af6,_0x4bdedd={'gtgIz':function(_0x5dc702,_0x3fd33f){return _0x5dc702(_0x3fd33f);},'KjVfm':function(_0x30aacf,_0x2a1843){return _0x30aacf(_0x2a1843);}},_0x519100=_0x4bdedd[_0xf4a49f(0x267)](getPlaywrightTestId,_0x4aef02),_0x44ab83=_0x4bdedd[_0xf4a49f(0x267)](getPlaywrightTestTitle,_0x4aef02),_0x411676=_0x4bdedd[_0xf4a49f(0x267)](getTestTags,_0x4aef02),_0x42018e=_0x4bdedd['gtgIz'](getPlaywrightTestCode,_0x4aef02),_0x524f63=_0x4bdedd[_0xf4a49f(0x267)](getPlaywrightTestFilePath,_0x4aef02),_0x566d36=_0x524f63+':'+_0x4bdedd[_0xf4a49f(0x267)](getPlaywrightTestLocation,_0x4aef02),_0x3055b0=_0x4bdedd[_0xf4a49f(0x1e6)](getPlaywrightTestScope,_0x4aef02),_0x3309de=_0x4bdedd[_0xf4a49f(0x1e6)](getPlaywrightTestScopes,_0x4aef02),_0x30a126=_0x4bdedd['KjVfm'](getPlaywrightSessionName,_0x4aef02),_0x41efcd=this['getTestFrameworks']()[0x0],_0x5ff5f1={[TestFrameworkConstants[_0xf4a49f(0x1a6)]]:_0x41efcd,[TestFrameworkConstants[_0xf4a49f(0x1ea)]]:this[_0xf4a49f(0x20b)]()[_0x41efcd],[TestFrameworkConstants[_0xf4a49f(0x1f2)]]:[],[TestFrameworkConstants[_0xf4a49f(0x233)]]:{},[TestFrameworkConstants['KEY_HOOKS_STARTED']]:{},[TestFrameworkConstants[_0xf4a49f(0x24f)]]:_0x3b79be,[TestFrameworkConstants[_0xf4a49f(0x1dc)]]:TestFrameworkConstants[_0xf4a49f(0x23e)],[TestFrameworkConstants[_0xf4a49f(0x22b)]]:_0x30a126,[TestFrameworkConstants[_0xf4a49f(0x269)]]:_0x524f63,[TestFrameworkConstants[_0xf4a49f(0x1b8)]]:_0x519100,[TestFrameworkConstants['KEY_TEST_NAME']]:_0x44ab83,[TestFrameworkConstants[_0xf4a49f(0x1c3)]]:_0x566d36,[TestFrameworkConstants[_0xf4a49f(0x215)]]:_0x42018e,[TestFrameworkConstants[_0xf4a49f(0x23d)]]:_0x411676,[TestFrameworkConstants[_0xf4a49f(0x1a5)]]:_0x4aef02[_0xf4a49f(0x1ff)][0x0][_0xf4a49f(0x1f7)],[TestFrameworkConstants['KEY_TEST_SCOPE']]:_0x3055b0,[TestFrameworkConstants[_0xf4a49f(0x264)]]:_0x3309de,[TestFrameworkConstants[_0xf4a49f(0x200)]]:_0x4bdedd[_0xf4a49f(0x267)](getPlaywrightCustomRerunParam,_0x4aef02)};TestInfo[_0xf4a49f(0x201)](_0x4aef02['id'],_0x5ff5f1);const _0x5b2c35={};return _0x5b2c35[_0x519100]=_0x5ff5f1,_0x5b2c35;}[a65_0x224af6(0x1d5)](_0x39eb9f,_0x1270d5,_0x3d25e2){const _0x2733dd=a65_0x224af6,_0x359687={'jGEfP':function(_0x1d155e,_0x3aef16){return _0x1d155e(_0x3aef16);},'bRYVs':_0x2733dd(0x257),'PDStx':function(_0x2a39cb,_0x733d58){return _0x2a39cb===_0x733d58;},'oYyKs':function(_0x2f52ba,_0x595def){return _0x2f52ba===_0x595def;},'gFvTb':function(_0x178177,_0xe41fab){return _0x178177(_0xe41fab);},'XZzPq':_0x2733dd(0x240),'ubRoz':_0x2733dd(0x225),'cPVwq':function(_0x5b346f,_0x5ef7cf){return _0x5b346f+_0x5ef7cf;},'Sftmy':'skipped','FHLTr':'passed','RslbO':function(_0x37f0a4,_0x318f58){return _0x37f0a4===_0x318f58;},'znguG':_0x2733dd(0x1ef),'AzIKp':function(_0x4cd0cf,_0x58900f){return _0x4cd0cf===_0x58900f;},'VavzO':'timedOut','wxoci':function(_0x3d1fa5,_0x262380){return _0x3d1fa5===_0x262380;},'OwNsY':_0x2733dd(0x206),'LvLhq':function(_0x3083e9,_0x52b1b9,_0x1de3ba){return _0x3083e9(_0x52b1b9,_0x1de3ba);},'essqN':function(_0x5a3a9a,_0x295e44){return _0x5a3a9a||_0x295e44;},'Sgwpa':_0x2733dd(0x202),'BaJJM':function(_0x3690d2,_0x20d773){return _0x3690d2>_0x20d773;},'qMChp':function(_0xd0bdc9,_0x19ae33,_0x2773b5){return _0xd0bdc9(_0x19ae33,_0x2773b5);}};logger['debug'](_0x2733dd(0x1ee)+_0x39eb9f);const _0x80ecfd=new Date(_0x1270d5['startTime']),_0x4c8a1b=_0x1270d5[_0x2733dd(0x207)],_0xb3a5e6=new Date(_0x359687['cPVwq'](_0x80ecfd[_0x2733dd(0x1a3)](),_0x4c8a1b)),_0x543f28=_0x1270d5['status'],_0x4f0bbb=TestInfo[_0x2733dd(0x22c)](_0x39eb9f)[TestFrameworkConstants[_0x2733dd(0x25e)]]||{};let _0x2a3000=_0x543f28;if(_0x359687[_0x2733dd(0x26a)](_0x1270d5[_0x2733dd(0x1fd)],_0x3d25e2[_0x2733dd(0x1fb)]))_0x2a3000=_0x359687[_0x2733dd(0x26a)](_0x1270d5['status'],_0x359687['Sftmy'])?_0x359687['Sftmy']:_0x359687['FHLTr'];else{(_0x359687[_0x2733dd(0x26a)](_0x2a3000,_0x359687[_0x2733dd(0x1c6)])||_0x359687[_0x2733dd(0x258)](_0x2a3000,_0x359687['znguG'])||_0x359687[_0x2733dd(0x222)](_0x2a3000,_0x359687[_0x2733dd(0x249)]))&&(_0x2a3000=_0x359687[_0x2733dd(0x241)]);if(_0x359687['wxoci'](_0x1270d5[_0x2733dd(0x1fd)],_0x359687['FHLTr'])&&_0x359687[_0x2733dd(0x26a)](_0x3d25e2[_0x2733dd(0x1fb)],_0x359687[_0x2733dd(0x241)])){const _0x419708={};_0x419708[_0x2733dd(0x219)]=_0x359687[_0x2733dd(0x231)],_0x419708[_0x2733dd(0x1f1)]=_0x359687[_0x2733dd(0x231)],_0x1270d5[_0x2733dd(0x234)]=_0x419708,_0x1270d5[_0x2733dd(0x255)]=[_0x1270d5[_0x2733dd(0x234)]];}}const {failureData:_0x29ee7a,logs:_0x48cf81}=_0x359687[_0x2733dd(0x1e2)](getFailureData,_0x1270d5?.[_0x2733dd(0x255)],{}),_0x4871f1={[TestFrameworkConstants['KEY_TEST_FAILURE']]:_0x359687[_0x2733dd(0x1fa)](_0x29ee7a,null),[TestFrameworkConstants['KEY_TEST_FAILURE_TYPE']]:_0x1270d5?.['error']&&_0x359687['gFvTb'](getFailureType,_0x1270d5[_0x2733dd(0x234)][_0x2733dd(0x219)]),[TestFrameworkConstants['KEY_TEST_FAILURE_REASON']]:_0x1270d5?.[_0x2733dd(0x234)]&&_0x359687[_0x2733dd(0x227)](removeAnsiColors,_0x1270d5[_0x2733dd(0x234)]['message']),[TestFrameworkConstants[_0x2733dd(0x1af)]]:[],[TestFrameworkConstants[_0x2733dd(0x1dc)]]:_0x2a3000,[TestFrameworkConstants['KEY_TEST_ENDED_AT']]:_0xb3a5e6[_0x2733dd(0x232)](),[TestFrameworkConstants[_0x2733dd(0x1cc)]]:new Date()['toISOString'](),[TestFrameworkConstants[_0x2733dd(0x25e)]]:_0x4f0bbb},_0x3590f9={};_0x3590f9[_0x2733dd(0x21b)]=_0x3d25e2;const _0x47d887=this['resolveInstance'](TestFrameworkState[_0x2733dd(0x23a)],HookState[_0x2733dd(0x23b)],_0x3590f9),_0x1664e4=_0x47d887[_0x2733dd(0x259)]()[_0x2733dd(0x25d)](_0x39eb9f)[TestFrameworkConstants[_0x2733dd(0x24f)]],_0xe2bebc=[],_0x30780c=_0x359687['LvLhq'](findNestedKey,_0x1270d5,_0x359687[_0x2733dd(0x220)]);if(_0x30780c&&_0x359687['jGEfP'](validateFilePath,_0x30780c))try{_0xe2bebc[_0x2733dd(0x244)]({'kind':_0x359687[_0x2733dd(0x1b1)],'timestamp':new Date()['toISOString'](),'test_run_uuid':_0x1664e4,'file_name':path['basename'](_0x30780c),'file_size':fs['statSync'](_0x30780c)['size'],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x5e1be2){logger[_0x2733dd(0x234)]('Error\x20processing\x20direct\x20trace\x20file\x20'+_0x30780c+':\x20'+_0x5e1be2['message']);}const _0x96b949=TestInfo[_0x2733dd(0x252)](),_0x41da22=_0x96b949[_0x2733dd(0x203)](_0x4180b6=>_0x4180b6['testUId']===_0x1664e4);_0x41da22[_0x2733dd(0x20c)](_0xe0195=>{const _0x58a58a=_0x2733dd;if(_0xe0195[_0x58a58a(0x1f9)]&&_0x359687[_0x58a58a(0x227)](validateFilePath,_0xe0195[_0x58a58a(0x1f9)])&&!_0xe2bebc['some'](_0x51867f=>_0x51867f[_0x58a58a(0x22d)]===path[_0x58a58a(0x1eb)](_0xe0195[_0x58a58a(0x1f9)])))try{_0xe2bebc['push']({'kind':_0x359687['bRYVs'],'timestamp':new Date()[_0x58a58a(0x232)](),'test_run_uuid':_0x1664e4,'file_name':path[_0x58a58a(0x1eb)](_0xe0195[_0x58a58a(0x1f9)]),'file_size':fs[_0x58a58a(0x1a2)](_0xe0195[_0x58a58a(0x1f9)])[_0x58a58a(0x25f)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x5d24fa){logger['error'](_0x58a58a(0x208)+_0xe0195[_0x58a58a(0x1f9)]+_0x58a58a(0x1ad)+_0x5d24fa['message']);}});if(_0x359687[_0x2733dd(0x26b)](_0xe2bebc['length'],0x0)){const _0x27bda5=_0x4871f1[TestFrameworkConstants[_0x2733dd(0x1af)]]||[];_0x4871f1[TestFrameworkConstants['KEY_LOGS']]=[..._0x27bda5,..._0xe2bebc];}const _0x33490b=TestInfo[_0x2733dd(0x22c)](_0x39eb9f)[TestFrameworkConstants[_0x2733dd(0x21f)]]||{},_0x255e81=_0x359687[_0x2733dd(0x1ed)](getManualUploadLogs,_0x33490b,_0x47d887[_0x2733dd(0x259)]()[_0x2733dd(0x25d)](_0x39eb9f)[TestFrameworkConstants[_0x2733dd(0x24f)]]);if(_0x359687[_0x2733dd(0x26b)](_0x255e81[_0x2733dd(0x1c8)],0x0)){const _0x7380f4=_0x4871f1[TestFrameworkConstants['KEY_LOGS']]||[];_0x4871f1[TestFrameworkConstants[_0x2733dd(0x1af)]]=[..._0x7380f4,..._0x255e81];}const _0xf85cfd=_0x3d25e2[_0x2733dd(0x20f)]||[],_0xc7a748=_0x4871f1[TestFrameworkConstants['KEY_CUSTOM_TAGS']]||{};_0xf85cfd[_0x2733dd(0x20c)](_0x46decc=>{const _0x67a30a=_0x2733dd,{type:_0x3b6793}=_0x46decc;let _0x3243e0=_0x46decc[_0x67a30a(0x263)];if(!_0x3b6793)return;(_0x359687['PDStx'](_0x3243e0,undefined)||_0x359687[_0x67a30a(0x26a)](_0x3243e0,null)||_0x359687['oYyKs'](_0x359687['gFvTb'](String,_0x3243e0)['trim'](),''))&&(_0x3243e0=_0x359687[_0x67a30a(0x1f3)]);if(!_0xc7a748[_0x3b6793]){const _0x5eda39={};_0x5eda39[_0x67a30a(0x1d6)]=_0x359687['ubRoz'],_0x5eda39['values']=[],_0xc7a748[_0x3b6793]=_0x5eda39;}else!_0xc7a748[_0x3b6793][_0x67a30a(0x1d6)]&&(_0xc7a748[_0x3b6793]['field_type']=_0x359687[_0x67a30a(0x1c0)]),!Array[_0x67a30a(0x1c2)](_0xc7a748[_0x3b6793][_0x67a30a(0x1d1)])&&(_0xc7a748[_0x3b6793][_0x67a30a(0x1d1)]=[]);const _0x89247d=_0x359687[_0x67a30a(0x227)](String,_0x3243e0)[_0x67a30a(0x205)](',')[_0x67a30a(0x1b2)](_0x417304=>_0x417304[_0x67a30a(0x1b3)]());_0xc7a748[_0x3b6793][_0x67a30a(0x1d1)]=[...new Set([..._0xc7a748[_0x3b6793]['values'],..._0x89247d])];}),_0x4871f1[TestFrameworkConstants[_0x2733dd(0x25e)]]=_0xc7a748,TestInfo[_0x2733dd(0x201)](_0x39eb9f,_0x4871f1);const _0x5236f3={};return _0x5236f3[_0x39eb9f]=_0x4871f1,_0x5236f3;}async[a65_0x224af6(0x1bd)](_0x13b4fd,_0x165bdb,_0x155480,_0x160180){const _0x983caf=a65_0x224af6,_0x3adda5={'ZDfNh':function(_0x47bfb6,_0x574366){return _0x47bfb6 in _0x574366;},'sVhgo':function(_0x27af76,_0x58f716){return _0x27af76(_0x58f716);},'poICm':function(_0x16f9ad,_0x2878f6){return _0x16f9ad(_0x2878f6);},'GhRxK':function(_0x376bac,_0xb6d62f){return _0x376bac===_0xb6d62f;},'NLlDi':function(_0x4e7745){return _0x4e7745();},'Igzqb':function(_0x178fb7,_0x5190f7){return _0x178fb7>_0x5190f7;},'TuDBr':function(_0x441597,_0x4d3fd3,_0x29a813){return _0x441597(_0x4d3fd3,_0x29a813);},'XLFXl':'err','zVowN':_0x983caf(0x1ef),'nPSCN':_0x983caf(0x1b0),'XMHJi':function(_0x212ffc,_0xf10bfb){return _0x212ffc!==_0xf10bfb;},'ckiat':function(_0x152111,_0x1f67cd){return _0x152111+_0x1f67cd;},'AyIyb':_0x983caf(0x1b4)},_0x4997bb=_0x160180[_0x983caf(0x21b)],_0x5cd367=_0x160180[_0x983caf(0x213)],_0x49da1d=_0x160180[_0x983caf(0x21b)]['id'],_0x1cc693=_0x165bdb[_0x983caf(0x1b7)]()[_0x983caf(0x205)]('.')[0x1];let _0x7f775b=_0x13b4fd[_0x983caf(0x259)]()[_0x983caf(0x25d)](_0x49da1d)[TestFrameworkConstants['KEY_HOOKS_STARTED']];!_0x7f775b&&(_0x7f775b={});!_0x3adda5['ZDfNh'](_0x1cc693,_0x7f775b)&&(_0x7f775b[_0x1cc693]=[]);let _0x1d55cd=_0x13b4fd['getAllData']()[_0x983caf(0x25d)](_0x49da1d)[TestFrameworkConstants['KEY_HOOKS_FINISHED']];!_0x1d55cd&&(_0x1d55cd={});!_0x3adda5[_0x983caf(0x245)](_0x1cc693,_0x1d55cd)&&(_0x1d55cd[_0x1cc693]=[]);const _0x40e906={[TestFrameworkConstants[_0x983caf(0x1ba)]]:_0x7f775b,[TestFrameworkConstants['KEY_HOOKS_FINISHED']]:_0x1d55cd},_0x4160ca={};_0x4160ca[_0x49da1d]=_0x40e906;const _0x4b156a=_0x4160ca,_0x178504=_0x3adda5[_0x983caf(0x1ac)](getPlaywrightTestFilePath,_0x4997bb),_0x439a3a=_0x178504+':'+_0x3adda5['poICm'](getPlaywrightTestLocation,_0x4997bb),_0x2e6547=TestInfo[_0x983caf(0x22c)](_0x49da1d)[TestFrameworkConstants[_0x983caf(0x25e)]]||{};if(_0x3adda5['GhRxK'](_0x155480,HookState[_0x983caf(0x210)])){const _0x3a0839={'key':_0x1cc693,[TestFrameworkConstants['KEY_HOOK_ID']]:_0x3adda5[_0x983caf(0x1be)](uuidv4),[TestFrameworkConstants[_0x983caf(0x211)]]:TestFrameworkConstants[_0x983caf(0x1a8)],[TestFrameworkConstants[_0x983caf(0x250)]]:_0x5cd367[_0x983caf(0x1f7)],[TestFrameworkConstants['KEY_HOOK_LOGS']]:[],[TestFrameworkConstants[_0x983caf(0x25a)]]:_0x5cd367[_0x983caf(0x1fc)],[TestFrameworkConstants[_0x983caf(0x269)]]:_0x178504,[TestFrameworkConstants[_0x983caf(0x1c3)]]:_0x439a3a,[TestFrameworkConstants[_0x983caf(0x25e)]]:_0x2e6547};_0x7f775b[_0x1cc693][_0x983caf(0x244)](_0x3a0839),_0x4b156a[_0x49da1d][TestFrameworkConstants[_0x983caf(0x239)]]=_0x1cc693,logger[_0x983caf(0x1de)](_0x983caf(0x1e4)+_0x1cc693+_0x983caf(0x1dd)+_0x3a0839+_0x983caf(0x1ec)+_0x160180);}else{if(_0x3adda5[_0x983caf(0x20a)](_0x155480,HookState[_0x983caf(0x23b)])){const _0x2f54bc=await _0x160180['result'],_0x30c87f=_0x7f775b[_0x1cc693]||[],_0x422fe3=_0x160180['step'];logger[_0x983caf(0x1de)](_0x983caf(0x20d)+_0x30c87f+_0x983caf(0x254)+_0x160180);if(_0x3adda5[_0x983caf(0x24c)](_0x30c87f[_0x983caf(0x1c8)],0x0)){const _0x468e8e=_0x30c87f['pop']();if(_0x422fe3[_0x983caf(0x234)]){const _0x30a472=_0x3adda5[_0x983caf(0x1da)](failureData,_0x422fe3[_0x983caf(0x234)],_0x3adda5['XLFXl']);_0x468e8e[TestFrameworkConstants[_0x983caf(0x25b)]]=_0x3adda5[_0x983caf(0x1ac)](getFailureType,_0x422fe3?.[_0x983caf(0x234)][_0x983caf(0x219)]),_0x468e8e[TestFrameworkConstants['KEY_HOOK_FAILURE_REASON']]=_0x3adda5[_0x983caf(0x1ac)](removeAnsiColors,_0x422fe3?.[_0x983caf(0x234)][_0x983caf(0x219)]),_0x468e8e[TestFrameworkConstants['KEY_HOOK_RESULT']]=_0x3adda5[_0x983caf(0x24a)],_0x468e8e[TestFrameworkConstants[_0x983caf(0x1bf)]]=_0x30a472;}else _0x468e8e[TestFrameworkConstants[_0x983caf(0x211)]]=_0x3adda5['nPSCN'];_0x3adda5['XMHJi'](_0x2f54bc,TestFrameworkConstants[_0x983caf(0x1a8)])&&(_0x468e8e[TestFrameworkConstants[_0x983caf(0x211)]]=!_0x422fe3[_0x983caf(0x234)]?_0x3adda5[_0x983caf(0x1df)]:_0x3adda5['zVowN']);const _0x158f55=new Date(_0x422fe3[_0x983caf(0x1f7)]),_0x27d914=new Date(_0x3adda5[_0x983caf(0x1d4)](_0x158f55[_0x983caf(0x1a3)](),_0x422fe3[_0x983caf(0x207)]));_0x468e8e[TestFrameworkConstants[_0x983caf(0x251)]]=_0x27d914[_0x983caf(0x232)](),_0x468e8e[TestFrameworkConstants[_0x983caf(0x25e)]]=_0x2e6547;const _0x3ef18c=_0x468e8e[TestFrameworkConstants[_0x983caf(0x229)]];await this[_0x983caf(0x1bc)](_0x13b4fd,_0x165bdb,_0x3ef18c,_0x3adda5[_0x983caf(0x21d)],_0x160180),!_0x1d55cd[_0x1cc693]&&(_0x1d55cd[_0x1cc693]=[]),_0x1d55cd[_0x1cc693][_0x983caf(0x244)](_0x468e8e),_0x4b156a[_0x49da1d][TestFrameworkConstants[_0x983caf(0x23c)]]=_0x1cc693;}}}return _0x4b156a;}async['sendLogCreatedEvent'](_0x335b51,_0x28c651,_0x579b98,_0xe324d6,_0x3351f1){const _0x51001e=a65_0x224af6,_0x2e0cfb={'wCaRo':function(_0x5c1c57,_0x1edc39){return _0x5c1c57===_0x1edc39;},'jcaPC':_0x51001e(0x21b),'MDOQf':function(_0x24b011,_0x4a8a82,_0xc7dba1){return _0x24b011(_0x4a8a82,_0xc7dba1);},'jgsaL':_0x51001e(0x236),'klwmY':function(_0x426939,_0x117203,_0x1301de,_0x72a964){return _0x426939(_0x117203,_0x1301de,_0x72a964);},'bPgop':function(_0x552c67,_0x532dcc,_0x3b94cd){return _0x552c67(_0x532dcc,_0x3b94cd);},'ygFRK':function(_0x32ea40,_0x3b2d5b,_0x5a6b05){return _0x32ea40(_0x3b2d5b,_0x5a6b05);},'EkMFe':function(_0x354d1f,_0x276d92,_0x4a6b79){return _0x354d1f(_0x276d92,_0x4a6b79);},'qRDVt':function(_0x4adca9,_0xd5ae34){return _0x4adca9/_0xd5ae34;},'ebMFd':function(_0x12f171,_0xa1c611){return _0x12f171<_0xa1c611;},'iPKbv':function(_0x409a1b,_0x3ef684){return _0x409a1b*_0x3ef684;},'NlbUq':function(_0x4f2f49,_0x43851d){return _0x4f2f49+_0x43851d;},'abRZZ':function(_0x3dac81,_0x4cf84b,_0x4973f7,_0x38dcc5,_0x548ebb){return _0x3dac81(_0x4cf84b,_0x4973f7,_0x38dcc5,_0x548ebb);},'VyrMe':function(_0x1e2b37,_0x6cfb5d,_0x46ce80,_0xe7496f){return _0x1e2b37(_0x6cfb5d,_0x46ce80,_0xe7496f);},'smwMC':_0x51001e(0x1b4)};try{if(_0x2e0cfb[_0x51001e(0x1d9)](_0xe324d6,_0x2e0cfb['jcaPC'])){const _0x35c3a0=await _0x3351f1[_0x51001e(0x235)],_0x397896=_0x3351f1[_0x51001e(0x21b)]['id'],_0xaa5499=_0x3351f1['test'];logger['debug']('sendLogCreatedEvent:\x20testId='+_0x397896+'\x20result='+util['inspect'](_0x35c3a0));const _0x1da3de=_0x335b51[_0x51001e(0x259)]()['get'](_0x397896)[TestFrameworkConstants['KEY_TEST_UUID']];await _0x2e0cfb['MDOQf'](sendTraceZip,_0x35c3a0,_0x1da3de);const _0x5b6d98=TestInfo[_0x51001e(0x22c)](_0x397896)[_0x2e0cfb['jgsaL']];if(_0x5b6d98){!_0x35c3a0['attachments']&&(_0x35c3a0[_0x51001e(0x236)]=[]);Object['assign'](_0x35c3a0[_0x51001e(0x236)],_0x35c3a0['attachments'][_0x51001e(0x1c7)](_0x5b6d98));const _0x161a83=TestInfo[_0x51001e(0x22c)](_0x397896);delete _0x161a83[_0x2e0cfb[_0x51001e(0x1cf)]],TestInfo[_0x51001e(0x201)](_0x397896,_0x161a83);}const {steps:_0x430def,logs:_0x5c8dcd}=_0x2e0cfb['klwmY'](getStepsAndLogs,_0x35c3a0[_0x51001e(0x1e9)],_0x335b51['getAllData']()[_0x51001e(0x25d)](_0x397896)[TestFrameworkConstants['KEY_TEST_UUID']],_0x2e0cfb[_0x51001e(0x1e5)]),_0x22487a=_0x2e0cfb[_0x51001e(0x1b9)](getScreenshots,_0x35c3a0,_0x335b51['getAllData']()[_0x51001e(0x25d)](_0x397896)[TestFrameworkConstants['KEY_TEST_UUID']]),_0x1d9136=_0x2e0cfb[_0x51001e(0x265)](getVideos,_0x35c3a0,_0x335b51['getAllData']()[_0x51001e(0x25d)](_0x397896)[TestFrameworkConstants['KEY_TEST_UUID']]),{_:_0x5b464e,logs:_0x3fa62b}=_0x2e0cfb[_0x51001e(0x1c9)](getFailureData,_0x35c3a0[_0x51001e(0x255)],{'test_run_uuid':_0x335b51[_0x51001e(0x259)]()[_0x51001e(0x25d)](_0x397896)[TestFrameworkConstants[_0x51001e(0x24f)]]}),_0x53ae48=TestInfo[_0x51001e(0x22c)](_0x397896)[TestFrameworkConstants[_0x51001e(0x21f)]]||{},_0x1998c6=_0x2e0cfb[_0x51001e(0x230)](getMediaArtifactsLogs,_0x53ae48,_0x335b51['getAllData']()[_0x51001e(0x25d)](_0x397896)[TestFrameworkConstants[_0x51001e(0x24f)]]),_0x1369cd=_0x335b51['getAllData']()[_0x51001e(0x25d)](_0x397896),{[TestFrameworkConstants[_0x51001e(0x1a6)]]:_0x1fafa8='',[TestFrameworkConstants[_0x51001e(0x1ea)]]:_0x572386=''}=_0x1369cd,_0x41163f=(_0x5c8dcd||[])[_0x51001e(0x1c7)](_0x22487a||[])['concat'](_0x3fa62b||[])[_0x51001e(0x1c7)](_0x1d9136||[])[_0x51001e(0x1c7)](_0x1998c6||[]),_0x3d7853=0x28,_0x250afa=Math[_0x51001e(0x1f6)](_0x2e0cfb[_0x51001e(0x1ca)](_0x41163f[_0x51001e(0x1c8)],_0x3d7853));for(let _0x3e6cb5=0x0;_0x2e0cfb[_0x51001e(0x22f)](_0x3e6cb5,_0x250afa);_0x3e6cb5++){const _0x95dd8d=_0x2e0cfb[_0x51001e(0x21c)](_0x3e6cb5,_0x3d7853),_0x4bd730=_0x2e0cfb[_0x51001e(0x1d2)](_0x95dd8d,_0x3d7853),_0x109868=_0x41163f[_0x51001e(0x204)](_0x95dd8d,_0x4bd730),_0x36a5e4={'platformIndex':'0','logs':_0x109868,'testFrameworkName':_0x1fafa8,'testFrameworkVersion':_0x572386,'testFrameworkState':_0x28c651[_0x51001e(0x1b7)]()[_0x51001e(0x205)]('.')[0x1]};_0x2e0cfb['abRZZ'](updatePayloadForTraceLogs,_0x36a5e4,_0x3351f1,_0x397896,_0x335b51),logger[_0x51001e(0x1de)](_0x51001e(0x1b5)+_0x397896+_0x51001e(0x242)+_0x2e0cfb[_0x51001e(0x1d2)](_0x3e6cb5,0x1)+'/'+_0x250afa+_0x51001e(0x256)+util[_0x51001e(0x1aa)](_0x36a5e4));const _0x8688bc=await GrpcClient[_0x51001e(0x25c)]()['logCreatedEvent'](_0x36a5e4);logger['debug'](_0x51001e(0x1b5)+_0x397896+_0x51001e(0x242)+_0x2e0cfb[_0x51001e(0x1d2)](_0x3e6cb5,0x1)+'/'+_0x250afa+'\x20response='+util[_0x51001e(0x1aa)](_0x8688bc));}}else{const {steps:_0x5de4a0,logs:_0x43a0a0}=_0x2e0cfb[_0x51001e(0x1d3)](getStepsAndLogs,_0x3351f1[_0x51001e(0x213)][_0x51001e(0x1e9)],_0x579b98,_0x2e0cfb[_0x51001e(0x1e3)]),_0x553f72=_0x3351f1[_0x51001e(0x21b)]['id'];logger[_0x51001e(0x1de)](_0x51001e(0x24d)+_0x553f72);const _0x8443d5=_0x335b51[_0x51001e(0x259)]()[_0x51001e(0x25d)](_0x553f72),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x3faaa1='',[TestFrameworkConstants[_0x51001e(0x1ea)]]:_0x338d9d=''}=_0x8443d5,_0x558025={'platformIndex':'0','logs':_0x43a0a0,'testFrameworkName':_0x3faaa1,'testFrameworkVersion':_0x338d9d,'testFrameworkState':_0x28c651[_0x51001e(0x1b7)]()[_0x51001e(0x205)]('.')[0x1]};_0x2e0cfb[_0x51001e(0x20e)](updatePayloadForTraceLogs,_0x558025,_0x3351f1,_0x553f72,_0x335b51),logger[_0x51001e(0x1de)](_0x51001e(0x1b5)+_0x553f72+'\x20payload='+util[_0x51001e(0x1aa)](_0x558025));const _0x5701b0=await GrpcClient['getInstance']()['logCreatedEvent'](_0x558025);}}catch(_0x3f086f){logger['error'](_0x51001e(0x243)+util[_0x51001e(0x217)](_0x3f086f));}}}function a65_0x2281(){const _0x25db25=['sendLogCreatedEvent\x20for\x20testId:\x20','parsePlaywrightTest','toString','KEY_TEST_ID','bPgop','KEY_HOOKS_STARTED','TEST_SCREENSHOT','sendLogCreatedEvent','trackHookEvent','NLlDi','KEY_HOOK_FAILURE','ubRoz','trackPlaywrightInstance:\x20created\x20instance\x20for\x20target=','isArray','KEY_TEST_LOCATION','NONE','xsKIp','FHLTr','concat','length','ygFRK','qRDVt','\x20target=','KEY_TEST_RESULT_AT','\x20hookState=','klFSd','jgsaL','20DUqXMr','values','NlbUq','VyrMe','ckiat','parsePlaywrightTestResult','field_type','createContext','info','wCaRo','TuDBr','../../../../src/helpers/helper','KEY_TEST_RESULT','\x20&\x20hook\x20=\x20','debug','nPSCN','runHooks','16279623ffPaYS','LvLhq','smwMC','Hook\x20Started\x20in\x20PRE\x20key\x20=\x20','jcaPC','KjVfm',',\x20testFrameworkState=','trackPlaywrightInstance:\x20saved\x20instance\x20contextId=','steps','KEY_TEST_FRAMEWORK_VERSION','basename','\x20\x20and\x20args\x20=\x20','qMChp','parsePlaywrightTestResult:\x20testId=','failed','cEBGA','stack','KEY_TEST_LOGS','XZzPq','1436705rMdZrf','trackEvent:\x20loaded\x20testData\x20for\x20testId:\x20','ceil','startTime','GSMDi','filePath','essqN','expectedStatus','title','status','./constants/testFrameworkConstants.js','results','KEY_TEST_RERUN_NAME','setTestDetails','path','filter','slice','split','Expected\x20to\x20fail,\x20but\x20passed.','duration','Error\x20processing\x20trace\x20file\x20','INIT_TEST','GhRxK','getTestFrameworksVersions','forEach','Hook\x20List\x20in\x20Post\x20','abRZZ','annotations','PRE','KEY_HOOK_RESULT','bOCrd','step','trackEvent','KEY_TEST_CODE','getRef','format',',\x20state=','message','../../../helpers/test-observability/utils','test','iPKbv','AyIyb','ehhXw','KEY_TEST_ATTACHMENTS','Sgwpa','lFwQA','AzIKp','getCurrentInstanceName','instance','multi_dropdown','util','jGEfP','addMultipleEntries','KEY_HOOK_ID','eXtRf','KEY_AUTOMATE_SESSION_NAME','getTestDetails','file_name','../../playwright/reporter/pwUtils','ebMFd','EkMFe','OwNsY','toISOString','KEY_HOOKS_FINISHED','error','result','attachments','280658JkWGLA','../state/testFrameworkState.js','KEY_HOOK_LAST_STARTED','TEST','POST','KEY_HOOK_LAST_FINISHED','KEY_TEST_TAGS','DEFAULT_TEST_RESULT','getTestFrameworks','No\x20reason\x20provided','znguG','\x20batch\x20','Error\x20in\x20sendLogCreatedEvent:\x20','push','ZDfNh','trackPlaywrightInstance','9081510FJULGD','1633198lipNzD','VavzO','zVowN','2675072vzmQAO','Igzqb','sendLogCreatedEvent:\x20testId=','../instances/trackedInstance.js','KEY_TEST_UUID','KEY_EVENT_STARTED_AT','KEY_EVENT_ENDED_AT','getTraceFilePaths','matchHookRegex','\x20and\x20args\x20=\x20','errors','\x20payload=','TEST_ATTACHMENT','RslbO','getAllData','KEY_HOOK_NAME','KEY_HOOK_FAILURE_TYPE','getInstance','get','KEY_CUSTOM_TAGS','size','trackEvent\x20loading\x20testData\x20for\x20testId:\x20','trackEvent\x20loading\x20testResults\x20for\x20testId:\x20','PlaywrightTestFramework','description','KEY_TEST_SCOPES','MDOQf','../instances/testFrameworkInstance.js','gtgIz','../TestInfo.js','KEY_TEST_FILE_PATH','PDStx','BaJJM','statSync','getTime','../grpcClient','KEY_TEST_STARTED_AT','KEY_TEST_FRAMEWORK_NAME','trackEvent:\x20found\x20instance,\x20testFrameworkState=','DEFAULT_HOOK_RESULT','4318875QSEkco','inspect','../cliUtils.js','sVhgo','\x20from\x20TestDetails:\x20','7aoxbjm','KEY_LOGS','passed','bRYVs','map','trim','hook'];a65_0x2281=function(){return _0x25db25;};return a65_0x2281();}function a65_0x46dc(_0x3446e9,_0x430dca){const _0x228167=a65_0x2281();return a65_0x46dc=function(_0x46dccf,_0x2f2e55){_0x46dccf=_0x46dccf-0x1a2;let _0x10c3c5=_0x228167[_0x46dccf];return _0x10c3c5;},a65_0x46dc(_0x3446e9,_0x430dca);}module['exports']=PlaywrightTestFramework;