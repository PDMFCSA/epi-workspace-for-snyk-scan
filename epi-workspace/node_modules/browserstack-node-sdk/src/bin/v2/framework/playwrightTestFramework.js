const a63_0x1bb25e=a63_0x5850;(function(_0x474805,_0x459152){const _0x2eebad=a63_0x5850,_0x5f1298=_0x474805();while(!![]){try{const _0x2997a3=-parseInt(_0x2eebad(0x1ed))/0x1+-parseInt(_0x2eebad(0x205))/0x2*(parseInt(_0x2eebad(0x25a))/0x3)+parseInt(_0x2eebad(0x223))/0x4+-parseInt(_0x2eebad(0x26f))/0x5+parseInt(_0x2eebad(0x1f0))/0x6+-parseInt(_0x2eebad(0x240))/0x7+parseInt(_0x2eebad(0x210))/0x8;if(_0x2997a3===_0x459152)break;else _0x5f1298['push'](_0x5f1298['shift']());}catch(_0x2cebe0){_0x5f1298['push'](_0x5f1298['shift']());}}}(a63_0xe4ad,0x533a1));const TestFramework=require('./testFramework'),TestFrameworkState=require(a63_0x1bb25e(0x24b)),HookState=require(a63_0x1bb25e(0x1f2)),{createClassLogger}=require(a63_0x1bb25e(0x280)),TestFrameworkInstance=require('../instances/testFrameworkInstance.js'),CLIUtils=require(a63_0x1bb25e(0x203)),TrackedInstance=require(a63_0x1bb25e(0x245)),TestFrameworkConstants=require(a63_0x1bb25e(0x1ec)),logger=createClassLogger(a63_0x1bb25e(0x1da)),{v4:uuidv4}=require(a63_0x1bb25e(0x249)),util=require(a63_0x1bb25e(0x253)),{getPlaywrightSessionName,getPlaywrightTestFilePath,getPlaywrightTestId,getPlaywrightTestTitle,getPlaywrightTestLocation,getPlaywrightTestTags,getPlaywrightTestCode,getPlaywrightTestScope,getPlaywrightTestScopes,getStepsAndLogs,getScreenshots,getPlaywrightCustomRerunParam,getMediaArtifactsLogs,getManualUploadLogs,updatePayloadForTraceLogs}=require(a63_0x1bb25e(0x26e)),TestInfo=require('../TestInfo.js'),GrpcClient=require(a63_0x1bb25e(0x294)),{removeAnsiColors,getFailureType,failureData}=require(a63_0x1bb25e(0x272)),{getFailureData,getTestTags}=require(a63_0x1bb25e(0x1fe)),{findNestedKey,sendTraceZip,validateFilePath}=require(a63_0x1bb25e(0x1fe)),path=require(a63_0x1bb25e(0x27f)),fs=require('fs'),helper=require(a63_0x1bb25e(0x1e8)),{PLAYWRIGHT_TRACE_LOGS}=require(a63_0x1bb25e(0x1f1));function a63_0x5850(_0x36dd9f,_0x224c82){const _0xe4ade0=a63_0xe4ad();return a63_0x5850=function(_0x5850b5,_0x407d1e){_0x5850b5=_0x5850b5-0x1cb;let _0x8dd8f4=_0xe4ade0[_0x5850b5];return _0x8dd8f4;},a63_0x5850(_0x36dd9f,_0x224c82);}class PlaywrightTestFramework extends TestFramework{constructor(_0x45f42b,_0x2cdf5c,_0x47555f){super(_0x45f42b,_0x2cdf5c,_0x47555f);}async[a63_0x1bb25e(0x257)](_0x4af620,_0x312918,_0x1bb3a7={}){const _0x419ee4=a63_0x1bb25e,_0x26cf4a={};_0x26cf4a[_0x419ee4(0x22e)]=function(_0x1100d2,_0xe89035){return _0x1100d2===_0xe89035;},_0x26cf4a[_0x419ee4(0x289)]=function(_0x19c8be,_0x191254){return _0x19c8be===_0x191254;},_0x26cf4a['PQdIZ']=function(_0x5c93,_0x493d19){return _0x5c93===_0x493d19;},_0x26cf4a[_0x419ee4(0x228)]='test',_0x26cf4a[_0x419ee4(0x1d5)]=_0x419ee4(0x241);const _0x225fec=_0x26cf4a;await super['trackEvent'](_0x4af620,_0x312918,_0x1bb3a7);const _0x3fba72=this['resolveInstance'](_0x4af620,_0x312918,_0x1bb3a7);if(!_0x3fba72)return;logger[_0x419ee4(0x21d)](_0x419ee4(0x278)+_0x4af620+'\x20hookState='+_0x312918+_0x419ee4(0x259)+_0x3fba72[_0x419ee4(0x1dd)]());try{if(_0x225fec['YsKkq'](_0x312918,HookState[_0x419ee4(0x295)])&&_0x225fec[_0x419ee4(0x289)](_0x4af620,TestFrameworkState[_0x419ee4(0x24e)])){const _0x309459=_0x1bb3a7[_0x419ee4(0x1e7)];logger[_0x419ee4(0x21d)](_0x419ee4(0x254)+_0x309459['id']+'}');const _0x34b1a5=TestInfo[_0x419ee4(0x238)](_0x309459['id']);_0x3fba72[_0x419ee4(0x1dc)](this[_0x419ee4(0x214)](_0x34b1a5,_0x309459)),logger[_0x419ee4(0x21d)](_0x419ee4(0x1cb)+_0x309459['id']+_0x419ee4(0x258)+_0x4af620+_0x419ee4(0x1d1)+_0x312918+_0x419ee4(0x20d)+_0x3fba72[_0x419ee4(0x1dd)]());}if(_0x225fec[_0x419ee4(0x233)](_0x312918,HookState[_0x419ee4(0x252)])&&_0x225fec['PQdIZ'](_0x4af620,TestFrameworkState[_0x419ee4(0x24e)])){const _0x56ac05=_0x1bb3a7[_0x419ee4(0x1e7)],_0x106ff2=_0x1bb3a7['result'];logger['debug'](_0x419ee4(0x27c)+_0x56ac05['id']),_0x3fba72['addMultipleEntries'](this[_0x419ee4(0x231)](_0x56ac05['id'],_0x106ff2,_0x56ac05)),this[_0x419ee4(0x28e)](_0x3fba72,_0x4af620,_0x312918,_0x225fec[_0x419ee4(0x228)],_0x1bb3a7);}if(CLIUtils[_0x419ee4(0x1fd)](_0x4af620['toString']()[_0x419ee4(0x291)]('.')[0x1])){const _0x2b1fd3=await this[_0x419ee4(0x1de)](_0x3fba72,_0x4af620,_0x312918,_0x1bb3a7);_0x3fba72[_0x419ee4(0x1dc)](_0x2b1fd3);}}catch(_0x393b5a){logger['error'](util[_0x419ee4(0x22c)](_0x225fec['fdZMP'],_0x4af620,_0x312918,_0x1bb3a7[_0x419ee4(0x20a)],_0x393b5a));}_0x1bb3a7[_0x419ee4(0x1ef)]=_0x3fba72,await this[_0x419ee4(0x1ee)](_0x3fba72,_0x4af620,_0x312918,_0x1bb3a7);}['resolveInstance'](_0x2de708,_0x1961e7,_0x4a2f80={}){const _0x487b74=a63_0x1bb25e,_0x146ebe={};_0x146ebe['VjTrp']=function(_0xdf5ae9,_0x309e59){return _0xdf5ae9===_0x309e59;},_0x146ebe['WpSIm']=function(_0x2f463a,_0x57f66b){return _0x2f463a===_0x57f66b;};const _0x2610ab=_0x146ebe;let _0x370406=null;return(_0x2610ab[_0x487b74(0x234)](_0x2de708,TestFrameworkState['INIT_TEST'])||_0x2610ab[_0x487b74(0x27d)](_0x2de708,TestFrameworkState['NONE']))&&this[_0x487b74(0x24d)](_0x2de708,_0x4a2f80),_0x370406=TestFramework['getTrackedInstance'](),_0x370406;}[a63_0x1bb25e(0x24d)](_0x4e36fb,_0x2f0e5f){const _0x9b6ea9=a63_0x1bb25e,_0x597275=CLIUtils['getCurrentInstanceName'](),_0x240015=TrackedInstance['createContext'](_0x597275);let _0x1a421d=null;logger[_0x9b6ea9(0x266)]('trackPlaywrightInstance:\x20created\x20instance\x20for\x20target='+_0x597275+_0x9b6ea9(0x292)+_0x4e36fb),_0x1a421d=new TestFrameworkInstance(_0x240015,this[_0x9b6ea9(0x28f)](),this[_0x9b6ea9(0x23b)](),_0x4e36fb,HookState[_0x9b6ea9(0x1f3)]),TestFramework[_0x9b6ea9(0x209)](_0x240015,_0x1a421d),logger['info'](_0x9b6ea9(0x20b)+_0x240015[_0x9b6ea9(0x1f8)]()+'\x20target='+_0x597275);}[a63_0x1bb25e(0x214)](_0x1007b8,_0x5da927){const _0x10e17f=a63_0x1bb25e,_0x56dec8={'UDpjI':function(_0x55383b,_0x124f5d){return _0x55383b(_0x124f5d);},'BQvbm':function(_0x39e200,_0x231785){return _0x39e200(_0x231785);},'CQoTS':function(_0x1d86df,_0x490c6b){return _0x1d86df(_0x490c6b);},'ZkMPb':function(_0x3b5324,_0x2be4f4){return _0x3b5324(_0x2be4f4);},'nCsfJ':function(_0x5ab865,_0x8af4e){return _0x5ab865(_0x8af4e);},'wsJnE':function(_0x4d1f2d,_0x159c3f){return _0x4d1f2d(_0x159c3f);}},_0x2c0653=_0x56dec8[_0x10e17f(0x22f)](getPlaywrightTestId,_0x5da927),_0x241520=_0x56dec8[_0x10e17f(0x22f)](getPlaywrightTestTitle,_0x5da927),_0x4af185=_0x56dec8[_0x10e17f(0x1db)](getTestTags,_0x5da927),_0x4c12b7=_0x56dec8[_0x10e17f(0x1db)](getPlaywrightTestCode,_0x5da927),_0x3d12fa=_0x56dec8[_0x10e17f(0x22f)](getPlaywrightTestFilePath,_0x5da927),_0x15f39a=_0x3d12fa+':'+_0x56dec8['CQoTS'](getPlaywrightTestLocation,_0x5da927),_0x3f5bf2=_0x56dec8[_0x10e17f(0x213)](getPlaywrightTestScope,_0x5da927),_0x5a5f94=_0x56dec8[_0x10e17f(0x290)](getPlaywrightTestScopes,_0x5da927),_0x5c091d=_0x56dec8[_0x10e17f(0x20c)](getPlaywrightSessionName,_0x5da927),_0x1e6cca=this[_0x10e17f(0x28f)]()[0x0],_0x2ca3f4={[TestFrameworkConstants[_0x10e17f(0x202)]]:_0x1e6cca,[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]:this[_0x10e17f(0x23b)]()[_0x1e6cca],[TestFrameworkConstants[_0x10e17f(0x221)]]:[],[TestFrameworkConstants['KEY_HOOKS_FINISHED']]:{},[TestFrameworkConstants[_0x10e17f(0x242)]]:{},[TestFrameworkConstants[_0x10e17f(0x20f)]]:_0x1007b8,[TestFrameworkConstants[_0x10e17f(0x1f4)]]:TestFrameworkConstants[_0x10e17f(0x1eb)],[TestFrameworkConstants[_0x10e17f(0x287)]]:_0x5c091d,[TestFrameworkConstants[_0x10e17f(0x25c)]]:_0x3d12fa,[TestFrameworkConstants[_0x10e17f(0x277)]]:_0x2c0653,[TestFrameworkConstants['KEY_TEST_NAME']]:_0x241520,[TestFrameworkConstants['KEY_TEST_LOCATION']]:_0x15f39a,[TestFrameworkConstants['KEY_TEST_CODE']]:_0x4c12b7,[TestFrameworkConstants[_0x10e17f(0x293)]]:_0x4af185,[TestFrameworkConstants['KEY_TEST_STARTED_AT']]:_0x5da927[_0x10e17f(0x1cf)][0x0][_0x10e17f(0x26d)],[TestFrameworkConstants[_0x10e17f(0x204)]]:_0x3f5bf2,[TestFrameworkConstants[_0x10e17f(0x24f)]]:_0x5a5f94,[TestFrameworkConstants[_0x10e17f(0x28c)]]:_0x56dec8[_0x10e17f(0x22f)](getPlaywrightCustomRerunParam,_0x5da927)};TestInfo[_0x10e17f(0x1d0)](_0x5da927['id'],_0x2ca3f4);const _0x1a722d={};return _0x1a722d[_0x2c0653]=_0x2ca3f4,_0x1a722d;}['parsePlaywrightTestResult'](_0x1d2a56,_0x5dc686,_0x53b34e){const _0x4eb8fa=a63_0x1bb25e,_0x46faf8={'acnoZ':function(_0x16569d,_0x39fe78){return _0x16569d(_0x39fe78);},'QUXuk':_0x4eb8fa(0x25f),'SWebe':function(_0x2b7fb2,_0x113bfa){return _0x2b7fb2===_0x113bfa;},'rUand':function(_0x192c92,_0x281b9a){return _0x192c92===_0x281b9a;},'ZMRJv':'No\x20reason\x20provided','PqSrb':'multi_dropdown','qxIrj':function(_0x2b6b8a,_0x21b781){return _0x2b6b8a+_0x21b781;},'oGbDj':function(_0x32b1dd,_0x19c236){return _0x32b1dd===_0x19c236;},'hqxXq':_0x4eb8fa(0x235),'nLPLL':_0x4eb8fa(0x1d6),'lBOnK':function(_0x547c2a,_0x12151e){return _0x547c2a===_0x12151e;},'pOHUC':_0x4eb8fa(0x255),'RYLzi':function(_0x145601,_0x51aa23){return _0x145601===_0x51aa23;},'TpXqQ':_0x4eb8fa(0x1e2),'OTQmN':function(_0x28fe62,_0x2462b8){return _0x28fe62===_0x2462b8;},'PRwlk':_0x4eb8fa(0x1df),'MRQUE':function(_0x550986,_0xad56fb,_0x14ee16){return _0x550986(_0xad56fb,_0x14ee16);},'pmBGr':function(_0x3e5b09,_0x573dc9){return _0x3e5b09||_0x573dc9;},'JHjHv':function(_0x505935,_0x251dcd){return _0x505935(_0x251dcd);},'PuhiF':function(_0x2fd8bd,_0x1adab7){return _0x2fd8bd(_0x1adab7);},'SPixr':function(_0x4f8dcb,_0x3d7b00,_0x4e9ea2){return _0x4f8dcb(_0x3d7b00,_0x4e9ea2);},'xoVgU':_0x4eb8fa(0x27f),'hyGye':function(_0x3f33f3,_0x599525){return _0x3f33f3(_0x599525);},'tigft':function(_0x4bc8cd,_0x4b3df3){return _0x4bc8cd>_0x4b3df3;}};logger[_0x4eb8fa(0x21d)](_0x4eb8fa(0x23a)+_0x1d2a56);const _0x33479b=new Date(_0x5dc686[_0x4eb8fa(0x26d)]),_0x35de86=_0x5dc686[_0x4eb8fa(0x222)],_0x3f1e74=new Date(_0x46faf8['qxIrj'](_0x33479b[_0x4eb8fa(0x22d)](),_0x35de86)),_0x51dd54=_0x5dc686[_0x4eb8fa(0x284)],_0x7a32d6=TestInfo[_0x4eb8fa(0x271)](_0x1d2a56)[TestFrameworkConstants[_0x4eb8fa(0x28b)]]||{};let _0x3ee6e0=_0x51dd54;if(_0x46faf8['SWebe'](_0x5dc686[_0x4eb8fa(0x284)],_0x53b34e[_0x4eb8fa(0x27e)]))_0x3ee6e0=_0x46faf8['oGbDj'](_0x5dc686['status'],_0x46faf8[_0x4eb8fa(0x270)])?_0x46faf8['hqxXq']:_0x46faf8['nLPLL'];else{(_0x46faf8[_0x4eb8fa(0x207)](_0x3ee6e0,_0x46faf8['nLPLL'])||_0x46faf8[_0x4eb8fa(0x261)](_0x3ee6e0,_0x46faf8[_0x4eb8fa(0x230)])||_0x46faf8[_0x4eb8fa(0x26a)](_0x3ee6e0,_0x46faf8[_0x4eb8fa(0x1ff)]))&&(_0x3ee6e0=_0x46faf8[_0x4eb8fa(0x230)]);if(_0x46faf8['SWebe'](_0x5dc686['status'],_0x46faf8['nLPLL'])&&_0x46faf8[_0x4eb8fa(0x1f9)](_0x53b34e[_0x4eb8fa(0x27e)],_0x46faf8[_0x4eb8fa(0x230)])){const _0x15cc08={};_0x15cc08[_0x4eb8fa(0x263)]=_0x46faf8[_0x4eb8fa(0x27a)],_0x15cc08[_0x4eb8fa(0x281)]=_0x46faf8['PRwlk'],_0x5dc686[_0x4eb8fa(0x1d8)]=_0x15cc08,_0x5dc686[_0x4eb8fa(0x1cc)]=[_0x5dc686[_0x4eb8fa(0x1d8)]];}}const {failureData:_0x1c61f8,logs:_0x754e4a}=_0x46faf8[_0x4eb8fa(0x225)](getFailureData,_0x5dc686?.[_0x4eb8fa(0x1cc)],{}),_0x31a942={[TestFrameworkConstants['KEY_TEST_FAILURE']]:_0x46faf8[_0x4eb8fa(0x268)](_0x1c61f8,null),[TestFrameworkConstants[_0x4eb8fa(0x1d7)]]:_0x5dc686?.['error']&&_0x46faf8[_0x4eb8fa(0x226)](getFailureType,_0x5dc686[_0x4eb8fa(0x1d8)][_0x4eb8fa(0x263)]),[TestFrameworkConstants[_0x4eb8fa(0x244)]]:_0x5dc686?.[_0x4eb8fa(0x1d8)]&&_0x46faf8['PuhiF'](removeAnsiColors,_0x5dc686[_0x4eb8fa(0x1d8)][_0x4eb8fa(0x263)]),[TestFrameworkConstants[_0x4eb8fa(0x216)]]:[],[TestFrameworkConstants[_0x4eb8fa(0x1f4)]]:_0x3ee6e0,[TestFrameworkConstants[_0x4eb8fa(0x286)]]:_0x3f1e74[_0x4eb8fa(0x1cd)](),[TestFrameworkConstants[_0x4eb8fa(0x25d)]]:new Date()['toISOString'](),[TestFrameworkConstants[_0x4eb8fa(0x28b)]]:_0x7a32d6},_0x191770={};_0x191770[_0x4eb8fa(0x1e7)]=_0x53b34e;const _0x401fda=this[_0x4eb8fa(0x28a)](TestFrameworkState[_0x4eb8fa(0x24e)],HookState[_0x4eb8fa(0x252)],_0x191770),_0x560375=_0x401fda[_0x4eb8fa(0x215)]()[_0x4eb8fa(0x1e1)](_0x1d2a56)[TestFrameworkConstants[_0x4eb8fa(0x20f)]],_0x2a0219=[],_0x15af85=_0x46faf8[_0x4eb8fa(0x243)](findNestedKey,_0x5dc686,_0x46faf8[_0x4eb8fa(0x227)]);if(_0x15af85&&_0x46faf8[_0x4eb8fa(0x282)](validateFilePath,_0x15af85))try{_0x2a0219[_0x4eb8fa(0x1e4)]({'kind':_0x46faf8[_0x4eb8fa(0x237)],'timestamp':new Date()['toISOString'](),'test_run_uuid':_0x560375,'file_name':path['basename'](_0x15af85),'file_size':fs[_0x4eb8fa(0x285)](_0x15af85)[_0x4eb8fa(0x1ea)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x1ab2f4){logger[_0x4eb8fa(0x1d8)](_0x4eb8fa(0x262)+_0x15af85+':\x20'+_0x1ab2f4[_0x4eb8fa(0x263)]);}const _0x20c6ab=TestInfo['getTraceFilePaths'](),_0x49d0b4=_0x20c6ab['filter'](_0x13313e=>_0x13313e[_0x4eb8fa(0x1d9)]===_0x560375);_0x49d0b4[_0x4eb8fa(0x21e)](_0x4f4973=>{const _0x3cfc59=_0x4eb8fa;if(_0x4f4973['filePath']&&_0x46faf8[_0x3cfc59(0x267)](validateFilePath,_0x4f4973[_0x3cfc59(0x23f)])&&!_0x2a0219['some'](_0x38ba73=>_0x38ba73['file_name']===path[_0x3cfc59(0x224)](_0x4f4973['filePath'])))try{_0x2a0219[_0x3cfc59(0x1e4)]({'kind':_0x46faf8[_0x3cfc59(0x237)],'timestamp':new Date()[_0x3cfc59(0x1cd)](),'test_run_uuid':_0x560375,'file_name':path[_0x3cfc59(0x224)](_0x4f4973[_0x3cfc59(0x23f)]),'file_size':fs[_0x3cfc59(0x285)](_0x4f4973[_0x3cfc59(0x23f)])[_0x3cfc59(0x1ea)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x162b0a){logger['error'](_0x3cfc59(0x236)+_0x4f4973[_0x3cfc59(0x23f)]+_0x3cfc59(0x260)+_0x162b0a[_0x3cfc59(0x263)]);}});if(_0x46faf8[_0x4eb8fa(0x275)](_0x2a0219[_0x4eb8fa(0x20a)],0x0)){const _0x19f2fd=_0x31a942[TestFrameworkConstants[_0x4eb8fa(0x216)]]||[];_0x31a942[TestFrameworkConstants[_0x4eb8fa(0x216)]]=[..._0x19f2fd,..._0x2a0219];}const _0x5ab519=TestInfo[_0x4eb8fa(0x271)](_0x1d2a56)[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{},_0x31dc30=_0x46faf8[_0x4eb8fa(0x225)](getManualUploadLogs,_0x5ab519,_0x401fda[_0x4eb8fa(0x215)]()['get'](_0x1d2a56)[TestFrameworkConstants['KEY_TEST_UUID']]);if(_0x46faf8[_0x4eb8fa(0x275)](_0x31dc30[_0x4eb8fa(0x20a)],0x0)){const _0x351433=_0x31a942[TestFrameworkConstants[_0x4eb8fa(0x216)]]||[];_0x31a942[TestFrameworkConstants[_0x4eb8fa(0x216)]]=[..._0x351433,..._0x31dc30];}const _0x2ca713=_0x53b34e[_0x4eb8fa(0x256)]||[],_0x2c1669=_0x31a942[TestFrameworkConstants['KEY_CUSTOM_TAGS']]||{};_0x2ca713[_0x4eb8fa(0x21e)](_0x4eb8d4=>{const _0x344528=_0x4eb8fa,{type:_0x56256d}=_0x4eb8d4;let _0x13245b=_0x4eb8d4[_0x344528(0x265)];if(!_0x56256d)return;(_0x46faf8[_0x344528(0x21c)](_0x13245b,undefined)||_0x46faf8[_0x344528(0x21c)](_0x13245b,null)||_0x46faf8[_0x344528(0x261)](_0x46faf8[_0x344528(0x267)](String,_0x13245b)[_0x344528(0x1d4)](),''))&&(_0x13245b=_0x46faf8[_0x344528(0x23e)]);if(!_0x2c1669[_0x56256d]){const _0x55d7a9={};_0x55d7a9[_0x344528(0x279)]=_0x46faf8[_0x344528(0x208)],_0x55d7a9[_0x344528(0x22a)]=[],_0x2c1669[_0x56256d]=_0x55d7a9;}else!_0x2c1669[_0x56256d]['field_type']&&(_0x2c1669[_0x56256d][_0x344528(0x279)]=_0x46faf8['PqSrb']),!Array['isArray'](_0x2c1669[_0x56256d][_0x344528(0x22a)])&&(_0x2c1669[_0x56256d][_0x344528(0x22a)]=[]);const _0x2938f1=_0x46faf8[_0x344528(0x267)](String,_0x13245b)[_0x344528(0x291)](',')[_0x344528(0x212)](_0x1e3b13=>_0x1e3b13[_0x344528(0x1d4)]());_0x2c1669[_0x56256d][_0x344528(0x22a)]=[...new Set([..._0x2c1669[_0x56256d][_0x344528(0x22a)],..._0x2938f1])];}),_0x31a942[TestFrameworkConstants[_0x4eb8fa(0x28b)]]=_0x2c1669,TestInfo[_0x4eb8fa(0x1d0)](_0x1d2a56,_0x31a942);const _0x51c2b1={};return _0x51c2b1[_0x1d2a56]=_0x31a942,_0x51c2b1;}async[a63_0x1bb25e(0x1de)](_0x4cc65e,_0x526b9f,_0x30efcc,_0x3ef49a){const _0x238e2=a63_0x1bb25e,_0x114195={'pMImx':function(_0xa8a42f,_0x513666){return _0xa8a42f in _0x513666;},'fSYSP':function(_0x5063b2,_0x55880a){return _0x5063b2(_0x55880a);},'skfau':function(_0x4acdea,_0x19c6af){return _0x4acdea===_0x19c6af;},'mVxQm':function(_0x193bb8){return _0x193bb8();},'VdHrc':function(_0x423b94,_0x34e353){return _0x423b94>_0x34e353;},'LiAOm':function(_0x2c98c0,_0x132855,_0x73c3a4){return _0x2c98c0(_0x132855,_0x73c3a4);},'hXZds':_0x238e2(0x217),'jvJCN':function(_0xe8552a,_0x427912){return _0xe8552a(_0x427912);},'tNXaj':_0x238e2(0x255),'hOXqa':_0x238e2(0x1d6),'kpUKn':function(_0x364e8d,_0x26fc08){return _0x364e8d!==_0x26fc08;},'vjvkO':function(_0x112f45,_0x6cd26e){return _0x112f45+_0x6cd26e;},'VSpwK':_0x238e2(0x1fb)},_0x2609c5=_0x3ef49a['test'],_0x5738ce=_0x3ef49a[_0x238e2(0x283)],_0x315098=_0x3ef49a[_0x238e2(0x1e7)]['id'],_0x2322b8=_0x526b9f[_0x238e2(0x248)]()[_0x238e2(0x291)]('.')[0x1];let _0x405225=_0x4cc65e[_0x238e2(0x215)]()[_0x238e2(0x1e1)](_0x315098)[TestFrameworkConstants['KEY_HOOKS_STARTED']];!_0x405225&&(_0x405225={});!_0x114195[_0x238e2(0x26b)](_0x2322b8,_0x405225)&&(_0x405225[_0x2322b8]=[]);let _0x3efb11=_0x4cc65e[_0x238e2(0x215)]()[_0x238e2(0x1e1)](_0x315098)[TestFrameworkConstants[_0x238e2(0x1d2)]];!_0x3efb11&&(_0x3efb11={});!_0x114195[_0x238e2(0x26b)](_0x2322b8,_0x3efb11)&&(_0x3efb11[_0x2322b8]=[]);const _0x4d5244={[TestFrameworkConstants['KEY_HOOKS_STARTED']]:_0x405225,[TestFrameworkConstants[_0x238e2(0x1d2)]]:_0x3efb11},_0xe84d55={};_0xe84d55[_0x315098]=_0x4d5244;const _0x363ad1=_0xe84d55,_0x53048a=_0x114195[_0x238e2(0x250)](getPlaywrightTestFilePath,_0x2609c5),_0x39d538=_0x53048a+':'+_0x114195[_0x238e2(0x250)](getPlaywrightTestLocation,_0x2609c5),_0x2f1b6e=TestInfo[_0x238e2(0x271)](_0x315098)[TestFrameworkConstants['KEY_CUSTOM_TAGS']]||{};if(_0x114195[_0x238e2(0x206)](_0x30efcc,HookState[_0x238e2(0x295)])){const _0x2bd87f={'key':_0x2322b8,[TestFrameworkConstants[_0x238e2(0x1f5)]]:_0x114195[_0x238e2(0x23c)](uuidv4),[TestFrameworkConstants[_0x238e2(0x23d)]]:TestFrameworkConstants[_0x238e2(0x21a)],[TestFrameworkConstants[_0x238e2(0x20e)]]:_0x5738ce['startTime'],[TestFrameworkConstants[_0x238e2(0x218)]]:[],[TestFrameworkConstants[_0x238e2(0x201)]]:_0x5738ce[_0x238e2(0x1fa)],[TestFrameworkConstants['KEY_TEST_FILE_PATH']]:_0x53048a,[TestFrameworkConstants[_0x238e2(0x24c)]]:_0x39d538,[TestFrameworkConstants[_0x238e2(0x28b)]]:_0x2f1b6e};_0x405225[_0x2322b8][_0x238e2(0x1e4)](_0x2bd87f),_0x363ad1[_0x315098][TestFrameworkConstants[_0x238e2(0x1e5)]]=_0x2322b8,logger[_0x238e2(0x21d)](_0x238e2(0x25e)+_0x2322b8+_0x238e2(0x269)+_0x2bd87f+_0x238e2(0x28d)+_0x3ef49a);}else{if(_0x114195[_0x238e2(0x206)](_0x30efcc,HookState[_0x238e2(0x252)])){const _0xabeacd=await _0x3ef49a['result'],_0x353bee=_0x405225[_0x2322b8]||[],_0x532a69=_0x3ef49a['step'];logger[_0x238e2(0x21d)](_0x238e2(0x211)+_0x353bee+_0x238e2(0x21b)+_0x3ef49a);if(_0x114195['VdHrc'](_0x353bee['length'],0x0)){const _0x114e44=_0x353bee[_0x238e2(0x1fc)]();if(_0x532a69[_0x238e2(0x1d8)]){const _0x2b4288=_0x114195[_0x238e2(0x1ce)](failureData,_0x532a69[_0x238e2(0x1d8)],_0x114195['hXZds']);_0x114e44[TestFrameworkConstants[_0x238e2(0x1f7)]]=_0x114195[_0x238e2(0x288)](getFailureType,_0x532a69?.[_0x238e2(0x1d8)][_0x238e2(0x263)]),_0x114e44[TestFrameworkConstants[_0x238e2(0x27b)]]=_0x114195['jvJCN'](removeAnsiColors,_0x532a69?.[_0x238e2(0x1d8)]['message']),_0x114e44[TestFrameworkConstants['KEY_HOOK_RESULT']]=_0x114195[_0x238e2(0x247)],_0x114e44[TestFrameworkConstants[_0x238e2(0x264)]]=_0x2b4288;}else _0x114e44[TestFrameworkConstants[_0x238e2(0x23d)]]=_0x114195['hOXqa'];_0x114195[_0x238e2(0x219)](_0xabeacd,TestFrameworkConstants[_0x238e2(0x21a)])&&(_0x114e44[TestFrameworkConstants[_0x238e2(0x23d)]]=!_0x532a69[_0x238e2(0x1d8)]?_0x114195[_0x238e2(0x276)]:_0x114195[_0x238e2(0x247)]);const _0x56c900=new Date(_0x532a69['startTime']),_0xc6081e=new Date(_0x114195[_0x238e2(0x200)](_0x56c900[_0x238e2(0x22d)](),_0x532a69[_0x238e2(0x222)]));_0x114e44[TestFrameworkConstants[_0x238e2(0x274)]]=_0xc6081e[_0x238e2(0x1cd)](),_0x114e44[TestFrameworkConstants[_0x238e2(0x28b)]]=_0x2f1b6e;const _0x6e3600=_0x114e44[TestFrameworkConstants[_0x238e2(0x1f5)]];await this['sendLogCreatedEvent'](_0x4cc65e,_0x526b9f,_0x6e3600,_0x114195[_0x238e2(0x26c)],_0x3ef49a),!_0x3efb11[_0x2322b8]&&(_0x3efb11[_0x2322b8]=[]),_0x3efb11[_0x2322b8]['push'](_0x114e44),_0x363ad1[_0x315098][TestFrameworkConstants['KEY_HOOK_LAST_FINISHED']]=_0x2322b8;}}}return _0x363ad1;}async[a63_0x1bb25e(0x28e)](_0xf2dce,_0x42b874,_0x47ef2d,_0xf37226,_0x5e3598){const _0x4481e3=a63_0x1bb25e,_0x49070e={'GtqLF':function(_0x3d285d,_0x1fc509){return _0x3d285d===_0x1fc509;},'lCEzG':'test','PEkKp':function(_0x2d6750,_0x19cb1d,_0x42ced2){return _0x2d6750(_0x19cb1d,_0x42ced2);},'gGESn':function(_0x37646d,_0x4f2e74,_0xfa5441,_0x308df7){return _0x37646d(_0x4f2e74,_0xfa5441,_0x308df7);},'wKlER':function(_0x281570,_0x1b737e,_0x474673){return _0x281570(_0x1b737e,_0x474673);},'rlRkK':function(_0x729163,_0x414836,_0x107440){return _0x729163(_0x414836,_0x107440);},'HeLdd':function(_0x3091f1,_0x6ceaca,_0xe51427,_0x19a983,_0x591ba1){return _0x3091f1(_0x6ceaca,_0xe51427,_0x19a983,_0x591ba1);},'myqVi':function(_0x201559,_0x26dcc2,_0x373f55,_0x5173cc){return _0x201559(_0x26dcc2,_0x373f55,_0x5173cc);},'yGJke':_0x4481e3(0x1fb)};try{if(_0x49070e['GtqLF'](_0xf37226,_0x49070e[_0x4481e3(0x251)])){const _0x17e056=await _0x5e3598[_0x4481e3(0x239)],_0x3b04c5=_0x5e3598['test']['id'],_0x43cce5=_0x5e3598[_0x4481e3(0x1e7)];logger[_0x4481e3(0x21d)](_0x4481e3(0x1e0)+_0x3b04c5);const _0x29a551=_0xf2dce[_0x4481e3(0x215)]()[_0x4481e3(0x1e1)](_0x3b04c5)[TestFrameworkConstants[_0x4481e3(0x20f)]];await _0x49070e['PEkKp'](sendTraceZip,_0x17e056,_0x29a551);const {steps:_0x207553,logs:_0x40b9c9}=_0x49070e[_0x4481e3(0x1d3)](getStepsAndLogs,_0x17e056[_0x4481e3(0x229)],_0xf2dce[_0x4481e3(0x215)]()[_0x4481e3(0x1e1)](_0x3b04c5)[TestFrameworkConstants['KEY_TEST_UUID']],_0x49070e[_0x4481e3(0x251)]),_0x487b6b=_0x49070e['wKlER'](getScreenshots,_0x17e056,_0xf2dce[_0x4481e3(0x215)]()[_0x4481e3(0x1e1)](_0x3b04c5)[TestFrameworkConstants['KEY_TEST_UUID']]),{_:_0x458b84,logs:_0x10b15e}=_0x49070e[_0x4481e3(0x1e9)](getFailureData,_0x17e056[_0x4481e3(0x1cc)],{'test_run_uuid':_0xf2dce['getAllData']()['get'](_0x3b04c5)[TestFrameworkConstants[_0x4481e3(0x20f)]]}),_0x4d35a3=TestInfo[_0x4481e3(0x271)](_0x3b04c5)[TestFrameworkConstants[_0x4481e3(0x21f)]]||{},_0x4d7e30=_0x49070e[_0x4481e3(0x273)](getMediaArtifactsLogs,_0x4d35a3,_0xf2dce['getAllData']()[_0x4481e3(0x1e1)](_0x3b04c5)[TestFrameworkConstants['KEY_TEST_UUID']]),_0x4b9edc=_0xf2dce[_0x4481e3(0x215)]()[_0x4481e3(0x1e1)](_0x3b04c5),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x367425='',[TestFrameworkConstants[_0x4481e3(0x22b)]]:_0x1c7e28=''}=_0x4b9edc,_0x3c8750={'platformIndex':'0','logs':[..._0x40b9c9||[],..._0x487b6b||[],..._0x10b15e||[],..._0x4d7e30||[]],'testFrameworkName':_0x367425,'testFrameworkVersion':_0x1c7e28,'testFrameworkState':_0x42b874[_0x4481e3(0x248)]()[_0x4481e3(0x291)]('.')[0x1]};_0x49070e[_0x4481e3(0x1e3)](updatePayloadForTraceLogs,_0x3c8750,_0x5e3598,_0x3b04c5,_0xf2dce),logger[_0x4481e3(0x21d)]('sendLogCreatedEvent\x20for\x20testId:\x20'+_0x3b04c5+'\x20payload='+util[_0x4481e3(0x24a)](_0x3c8750));const _0x1e882c=await GrpcClient[_0x4481e3(0x1f6)]()[_0x4481e3(0x246)](_0x3c8750);}else{const {steps:_0x60fbea,logs:_0xd6050d}=_0x49070e[_0x4481e3(0x25b)](getStepsAndLogs,_0x5e3598[_0x4481e3(0x283)][_0x4481e3(0x229)],_0x47ef2d,_0x49070e['yGJke']),_0x272b7e=_0x5e3598['test']['id'];logger['debug'](_0x4481e3(0x1e0)+_0x272b7e);const _0x4353a7=_0xf2dce[_0x4481e3(0x215)]()[_0x4481e3(0x1e1)](_0x272b7e),{[TestFrameworkConstants[_0x4481e3(0x202)]]:_0x39362b='',[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]:_0x527a8e=''}=_0x4353a7,_0xc0b376={'platformIndex':'0','logs':_0xd6050d,'testFrameworkName':_0x39362b,'testFrameworkVersion':_0x527a8e,'testFrameworkState':_0x42b874[_0x4481e3(0x248)]()[_0x4481e3(0x291)]('.')[0x1]};_0x49070e['HeLdd'](updatePayloadForTraceLogs,_0xc0b376,_0x5e3598,_0x272b7e,_0xf2dce),logger[_0x4481e3(0x21d)]('sendLogCreatedEvent\x20for\x20testId:\x20'+_0x272b7e+_0x4481e3(0x1e6)+util[_0x4481e3(0x24a)](_0xc0b376));const _0x3b010e=await GrpcClient[_0x4481e3(0x1f6)]()['logCreatedEvent'](_0xc0b376);}}catch(_0x2139cf){logger[_0x4481e3(0x1d8)](_0x4481e3(0x232)+util[_0x4481e3(0x22c)](_0x2139cf));}}}module[a63_0x1bb25e(0x220)]=PlaywrightTestFramework;function a63_0xe4ad(){const _0x42bef7=['KEY_TEST_ATTACHMENTS','exports','KEY_TEST_LOGS','duration','2553572jvGhoi','basename','MRQUE','JHjHv','xoVgU','FYefA','steps','values','KEY_TEST_FRAMEWORK_VERSION','format','getTime','YsKkq','UDpjI','pOHUC','parsePlaywrightTestResult','Error\x20in\x20sendLogCreatedEvent:\x20','PQdIZ','VjTrp','skipped','Error\x20processing\x20trace\x20file\x20','QUXuk','getTestUUID','result','parsePlaywrightTestResult:\x20testId=','getTestFrameworksVersions','mVxQm','KEY_HOOK_RESULT','ZMRJv','filePath','4174044nHjoit','trackEvent:\x20Exception\x20in\x20event\x20tracking,\x20testFrameworkState=%s\x20hookState=%s\x20argsLength=%s,\x20exception=%s','KEY_HOOKS_STARTED','SPixr','KEY_TEST_FAILURE_REASON','../instances/trackedInstance.js','logCreatedEvent','tNXaj','toString','uuid','inspect','../state/testFrameworkState.js','KEY_TEST_LOCATION','trackPlaywrightInstance','TEST','KEY_TEST_SCOPES','fSYSP','lCEzG','POST','util','trackEvent\x20loading\x20testData\x20for\x20testId:\x20','failed','annotations','trackEvent',',\x20testFrameworkState=','\x20instanceId=','7623otGXxu','myqVi','KEY_TEST_FILE_PATH','KEY_TEST_RESULT_AT','Hook\x20Started\x20in\x20PRE\x20key\x20=\x20','TEST_ATTACHMENT','\x20from\x20TestDetails:\x20','rUand','Error\x20processing\x20direct\x20trace\x20file\x20','message','KEY_HOOK_FAILURE','description','info','acnoZ','pmBGr','\x20&\x20hook\x20=\x20','RYLzi','pMImx','VSpwK','startTime','../../../helpers/helper.js','1291570dgkipY','hqxXq','getTestDetails','../../../helpers/test-observability/utils','rlRkK','KEY_EVENT_ENDED_AT','tigft','hOXqa','KEY_TEST_ID','trackEvent:\x20found\x20instance,\x20testFrameworkState=','field_type','PRwlk','KEY_HOOK_FAILURE_REASON','trackEvent\x20loading\x20testResults\x20for\x20testId:\x20','WpSIm','expectedStatus','path','../../../helpers/classLogger.js','stack','hyGye','step','status','statSync','KEY_TEST_ENDED_AT','KEY_AUTOMATE_SESSION_NAME','jvJCN','hKZHj','resolveInstance','KEY_CUSTOM_TAGS','KEY_TEST_RERUN_NAME','\x20\x20and\x20args\x20=\x20','sendLogCreatedEvent','getTestFrameworks','nCsfJ','split',',\x20state=','KEY_TEST_TAGS','../grpcClient','PRE','trackEvent:\x20loaded\x20testData\x20for\x20testId:\x20','errors','toISOString','LiAOm','results','setTestDetails','\x20testHookState=','KEY_HOOKS_FINISHED','gGESn','trim','fdZMP','passed','KEY_TEST_FAILURE_TYPE','error','testUId','PlaywrightTestFramework','BQvbm','addMultipleEntries','getRef','trackHookEvent','Expected\x20to\x20fail,\x20but\x20passed.','sendLogCreatedEvent:\x20testId=','get','timedOut','HeLdd','push','KEY_HOOK_LAST_STARTED','\x20payload=','test','../../../../src/helpers/helper','wKlER','size','DEFAULT_TEST_RESULT','./constants/testFrameworkConstants.js','240588FkoLhw','runHooks','instance','2591790hKaChY','../../utils/constants','../state/hookState.js','NONE','KEY_TEST_RESULT','KEY_HOOK_ID','getInstance','KEY_HOOK_FAILURE_TYPE','getId','OTQmN','title','hook','pop','matchHookRegex','../../playwright/reporter/pwUtils','TpXqQ','vjvkO','KEY_HOOK_NAME','KEY_TEST_FRAMEWORK_NAME','../cliUtils.js','KEY_TEST_SCOPE','352DDYWnW','skfau','lBOnK','PqSrb','setTrackedInstance','length','trackPlaywrightInstance:\x20saved\x20instance\x20contextId=','wsJnE','\x20instance=','KEY_EVENT_STARTED_AT','KEY_TEST_UUID','6503592ddoUch','Hook\x20List\x20in\x20Post\x20','map','ZkMPb','parsePlaywrightTest','getAllData','KEY_LOGS','err','KEY_HOOK_LOGS','kpUKn','DEFAULT_HOOK_RESULT','\x20and\x20args\x20=\x20','SWebe','debug','forEach'];a63_0xe4ad=function(){return _0x42bef7;};return a63_0xe4ad();}