const a72_0x28a395=a72_0x5ecc;(function(_0x13eac3,_0x87e544){const _0x25c924=a72_0x5ecc,_0x5b7e5f=_0x13eac3();while(!![]){try{const _0x2db384=-parseInt(_0x25c924(0x209))/0x1*(parseInt(_0x25c924(0x1f1))/0x2)+-parseInt(_0x25c924(0x22b))/0x3*(parseInt(_0x25c924(0x21b))/0x4)+-parseInt(_0x25c924(0x1e9))/0x5*(-parseInt(_0x25c924(0x228))/0x6)+-parseInt(_0x25c924(0x210))/0x7*(parseInt(_0x25c924(0x1d7))/0x8)+-parseInt(_0x25c924(0x20b))/0x9*(parseInt(_0x25c924(0x217))/0xa)+-parseInt(_0x25c924(0x230))/0xb+parseInt(_0x25c924(0x1b1))/0xc;if(_0x2db384===_0x87e544)break;else _0x5b7e5f['push'](_0x5b7e5f['shift']());}catch(_0xf94c1c){_0x5b7e5f['push'](_0x5b7e5f['shift']());}}}(a72_0x2935,0xdd615));function a72_0x2935(){const _0x1a9dc5=['base64','CREATE','passed','contextObject','KEY_PLATFORM_INDEX','registerObserver','../../../helpers/test-observability/utils','2KRJpvX','EhJIh','33102HBUsqk','util','Automation\x20onAfterTest:\x20Test\x20completed','arguments','TCFrs','91KuMvBc','IcUoc','MODULE_NAME','tpTPH','__workerDetails','status','onAfterDriverCreate:\x20Setting\x20browser\x20object','3900DwbCnk','GLHgh','Error\x20in\x20onBeforeDriverCreate:\x20','cJvTE','1595640EvwrZs','KEY_SESSION_ID','hNoQJ','hubUrl','markSessionStatus','ocpml','error','KEY_CAPABILITIES','jTCvY','./baseModule','MsAtb','onPlaywrightDispatch','KEY_PAGE_OBJECT','6AUoFEf','onAfterDriverCreate:\x20Setting\x20page\x20object','SESSION_STATUS','6NAjXZk','start','setSessionStatus','WyOKU','VwvQK','18908164wyXhBt','toString','_test','hZGtP','bind','tZCfT','Dlyho','shouldSkipSessionName','message','PRE','sessionId','markSessionStatus:\x20Skipping\x20session\x20status\x20marking','setSessionName','exports','parallelIndex','platformIndex','stringify','Staet','onDispatchExecute:\x20Playwright\x20sessionId:\x20','getInstance','browserName','feAKj','77977140aEARCK','SESSION_NAME','../state/automationFrameworkState.js','RaFjI','PLAYWRIGHT_DISPATCH','debug','onAfterDriverCreate:\x20Setting\x20context\x20object','with\x20','instance','page','FjZgL','9|6|8|2|7|10|4|3|1|0|5','../cliUtils.js','pLfSO','getRef','../../../helpers/classLogger.js','ujatD','markSessionName','GBPln','KEY_BROWSER_OBJECT','cpPEq','oGiUg','params','../browserstackCLI.js','getState','PLAYWRIGHT','getConfig','format','getModuleName','markSessionStatus:\x20Page\x20object\x20is\x20not\x20available','onDispatchExecute:\x20Playwright\x20driver\x20is\x20executing\x20tests\x20','onDispatchExecute:\x20Playwright\x20platform\x20details:\x20','lXZnb','getTrackedInstance','platforms','markSessionName:\x20Skipping\x20session\x20name\x20marking','onAfterTest','browser','968120JYYqUP','lDAEb','RhlDc','ONgRA','testRunId','Unable\x20to\x20mark\x20session\x20status,\x20received\x20status:\x20','Error\x20in\x20markSessionName:\x20','onAfterDriverCreate:\x20Setting\x20Session\x20Name\x20from\x20testInfo','shouldSkipSessionStatus','KEY_TEST_ID','platformDetails','browserVersion','setState','inspect','../../utils/constants','launchcaps','onAfterDriverCreate','context','5218555yUtNhu','KEY_PLATFORM_DETAILS','testInfo','RpYHq','\x20||\x20','klpWN','POST','markSessionStatus:\x20Marking\x20session\x20status','1110674AykZCt','onBeforeDriverCreate','driverInit','testId','bsParams','end','PlaywrightDriverModule','logger','info','reason','AUTOMATE_EVENTS','action','name','workerInfo','KEY_CONTEXT_OBJECT','Error\x20in\x20onDispatchExecute:\x20','playwrightVersion'];a72_0x2935=function(){return _0x1a9dc5;};return a72_0x2935();}const util=require(a72_0x28a395(0x20c)),BaseModule=require(a72_0x28a395(0x224)),{createClassLogger}=require(a72_0x28a395(0x1c0)),{getFrameworkVersion}=require(a72_0x28a395(0x208)),{FRAMEWORKS}=require(a72_0x28a395(0x1e5)),AutomationFramework=require('../framework/automationFramework.js'),AutomationFrameworkState=require(a72_0x28a395(0x1b3)),HookState=require('../state/hookState.js'),{playwrightBstackJsExecutor,nestedKeyValue,playwrightAnnotate,getPlaywrightStatus,getPlaywrightSessionName}=require('../../../helpers/helper.js'),CLIUtils=require(a72_0x28a395(0x1bd)),BrowserstackCLI=require(a72_0x28a395(0x1c8)),GrpcClient=require('../grpcClient.js'),PerformanceTester=require('../../../helpers/performance/performance-tester.js'),PerformanceEvents=require('../../../helpers/performance/constants.js')[a72_0x28a395(0x1fb)];class PlaywrightDriverModule extends BaseModule{static [a72_0x28a395(0x1c4)]='browserObject';static ['KEY_CONTEXT_OBJECT']=a72_0x28a395(0x205);static [a72_0x28a395(0x227)]='pageObject';static [a72_0x28a395(0x21c)]=a72_0x28a395(0x1a5);static ['KEY_PLATFORM_INDEX']=a72_0x28a395(0x1aa);static [a72_0x28a395(0x222)]='capabilities';static ['KEY_HUB_URL']=a72_0x28a395(0x21e);static [a72_0x28a395(0x1ea)]=a72_0x28a395(0x1e1);static [a72_0x28a395(0x1e0)]=a72_0x28a395(0x1f4);[a72_0x28a395(0x1f8)]=createClassLogger(a72_0x28a395(0x1f7));constructor(){const _0x1b5e23=a72_0x28a395,_0xe01407={};_0xe01407[_0x1b5e23(0x223)]=_0x1b5e23(0x1bc),_0xe01407[_0x1b5e23(0x1be)]=_0x1b5e23(0x1f7);const _0xc740d9=_0xe01407,_0x78c0=_0xc740d9[_0x1b5e23(0x223)]['split']('|');let _0x4d9ace=0x0;while(!![]){switch(_0x78c0[_0x4d9ace++]){case'0':AutomationFramework[_0x1b5e23(0x207)](AutomationFrameworkState[_0x1b5e23(0x1b5)],HookState[_0x1b5e23(0x1ef)],this['onPlaywrightDispatch'][_0x1b5e23(0x19f)](this));continue;case'1':AutomationFramework['registerObserver'](AutomationFrameworkState[_0x1b5e23(0x203)],HookState[_0x1b5e23(0x1ef)],this[_0x1b5e23(0x1e7)][_0x1b5e23(0x19f)](this));continue;case'2':this[_0x1b5e23(0x1af)]=null;continue;case'3':AutomationFramework['registerObserver'](AutomationFrameworkState[_0x1b5e23(0x203)],HookState[_0x1b5e23(0x1a4)],this[_0x1b5e23(0x1f2)][_0x1b5e23(0x19f)](this));continue;case'4':this[_0x1b5e23(0x1db)]=null;continue;case'5':AutomationFramework[_0x1b5e23(0x207)](AutomationFrameworkState['EXECUTE'],HookState['POST'],this[_0x1b5e23(0x1d5)][_0x1b5e23(0x19f)](this));continue;case'6':this[_0x1b5e23(0x1fd)]=_0xc740d9['pLfSO'];continue;case'7':this[_0x1b5e23(0x1e2)]=null;continue;case'8':this[_0x1b5e23(0x201)]=null;continue;case'9':super();continue;case'10':this[_0x1b5e23(0x1d3)]=[];continue;}break;}}[a72_0x28a395(0x1cd)](){const _0x10832e=a72_0x28a395;return PlaywrightDriverModule[_0x10832e(0x212)];}async[a72_0x28a395(0x1f2)](_0xc77196){const _0x30b7e3=a72_0x28a395,_0x5164e7={};_0x5164e7['RhlDc']='onBeforeDriverCreate:\x20Playwright\x20driver\x20is\x20about\x20to\x20be\x20created';const _0x111b75=_0x5164e7;try{this[_0x30b7e3(0x1f8)]['debug'](_0x111b75[_0x30b7e3(0x1d9)]);const _0x271f39=_0xc77196[_0x30b7e3(0x1e6)],_0x32d350=_0xc77196[_0x30b7e3(0x21e)];AutomationFramework['setState'](_0xc77196[_0x30b7e3(0x1b9)],PlaywrightDriverModule[_0x30b7e3(0x222)],_0x271f39),AutomationFramework[_0x30b7e3(0x1e3)](_0xc77196['instance'],PlaywrightDriverModule['KEY_HUB_URL'],_0x32d350);}catch(_0x304d5a){this['logger'][_0x30b7e3(0x221)](_0x30b7e3(0x219)+util[_0x30b7e3(0x1cc)](_0x304d5a));}}async[a72_0x28a395(0x226)](_0xbc731f){const _0x26d7b3=a72_0x28a395,_0x2c225a={};_0x2c225a['DCjhH']=function(_0x4db8db,_0x4a708d){return _0x4db8db||_0x4a708d;};const _0x3edd5f=_0x2c225a;try{const _0x134b76=_0xbc731f?.[_0x26d7b3(0x1a3)]&&_0xbc731f?.[_0x26d7b3(0x1a3)]?.[_0x26d7b3(0x1c7)]&&_0xbc731f?.['message']?.[_0x26d7b3(0x1c7)]?.[_0x26d7b3(0x1f5)],_0x2f0302=_0xbc731f?.[_0x26d7b3(0x1a3)]&&_0xbc731f?.[_0x26d7b3(0x1a3)]?.['bStackParams'];if(_0x3edd5f['DCjhH'](_0x134b76,_0x2f0302)){this['logger']['debug'](_0x26d7b3(0x1cf)+util['inspect'](_0x134b76)+_0x26d7b3(0x1ed)+util[_0x26d7b3(0x1e4)](_0x2f0302));const _0x533357=_0xbc731f?.['instance'],_0x4aa2d5=_0x134b76?.[_0x26d7b3(0x1a5)]||_0x2f0302?.[_0x26d7b3(0x1a5)],_0x147236=_0x134b76?.['platformDetails']||_0x2f0302?.[_0x26d7b3(0x1e1)];_0x4aa2d5&&(this[_0x26d7b3(0x1f8)][_0x26d7b3(0x1b6)](_0x26d7b3(0x1ad)+_0x4aa2d5),AutomationFramework['setState'](_0x533357,PlaywrightDriverModule[_0x26d7b3(0x21c)],_0x4aa2d5)),_0x147236&&(this[_0x26d7b3(0x1f8)][_0x26d7b3(0x1b6)](_0x26d7b3(0x1d0)+util[_0x26d7b3(0x1e4)](_0x147236)),AutomationFramework['setState'](_0x533357,PlaywrightDriverModule[_0x26d7b3(0x206)],_0x147236));}}catch(_0x2f914f){this['logger'][_0x26d7b3(0x221)](_0x26d7b3(0x200)+util['format'](_0x2f914f));}}async[a72_0x28a395(0x1e7)](_0x362731){const _0x10f8e6=a72_0x28a395,_0x43ffa6={'ocpml':'onAfterDriverCreate:\x20Playwright\x20driver\x20is\x20about\x20to\x20be\x20created','eZijT':function(_0x3b0d40,_0x3d8d43){return _0x3b0d40(_0x3d8d43);},'hZGtP':_0x10f8e6(0x229),'oGiUg':_0x10f8e6(0x1de),'Dlyho':_0x10f8e6(0x1b7),'IcUoc':_0x10f8e6(0x216),'feAKj':_0x10f8e6(0x202)};try{this[_0x10f8e6(0x1f8)][_0x10f8e6(0x1b6)](_0x43ffa6[_0x10f8e6(0x220)]);const _0x51ef28=_0x362731[_0x10f8e6(0x1b9)];this['playwrightVersion']=_0x43ffa6['eZijT'](getFrameworkVersion,FRAMEWORKS[_0x10f8e6(0x1ca)]);if(_0x362731['page']){this[_0x10f8e6(0x1f8)][_0x10f8e6(0x1b6)](_0x43ffa6[_0x10f8e6(0x19e)]),AutomationFramework[_0x10f8e6(0x1e3)](_0x51ef28,PlaywrightDriverModule[_0x10f8e6(0x227)],_0x362731[_0x10f8e6(0x1ba)]);if(_0x362731[_0x10f8e6(0x1eb)]){this[_0x10f8e6(0x1f8)][_0x10f8e6(0x1b6)](_0x43ffa6[_0x10f8e6(0x1c6)]);const _0x27809b=_0x362731[_0x10f8e6(0x1eb)]?.[_0x10f8e6(0x19d)]?.['id']||_0x362731[_0x10f8e6(0x1eb)]?.['testId'];AutomationFramework[_0x10f8e6(0x1e3)](_0x51ef28,PlaywrightDriverModule['KEY_TEST_ID'],_0x27809b),await this[_0x10f8e6(0x1c2)](_0x362731[_0x10f8e6(0x1eb)]);}}_0x362731[_0x10f8e6(0x1e8)]&&(this['logger'][_0x10f8e6(0x1b6)](_0x43ffa6[_0x10f8e6(0x1a1)]),AutomationFramework[_0x10f8e6(0x1e3)](_0x51ef28,PlaywrightDriverModule[_0x10f8e6(0x1ff)],_0x362731[_0x10f8e6(0x1e8)]));if(_0x362731[_0x10f8e6(0x1d6)]){this[_0x10f8e6(0x1f8)][_0x10f8e6(0x1b6)](_0x43ffa6[_0x10f8e6(0x211)]);const _0x149ede=global[_0x10f8e6(0x214)][_0x10f8e6(0x1fe)][_0x10f8e6(0x1a9)];AutomationFramework[_0x10f8e6(0x1e3)](_0x51ef28,PlaywrightDriverModule[_0x10f8e6(0x1c4)],_0x362731[_0x10f8e6(0x1d6)]),AutomationFramework[_0x10f8e6(0x1e3)](_0x51ef28,PlaywrightDriverModule[_0x10f8e6(0x206)],_0x149ede);const _0x19c24d={};_0x19c24d['isPlaywright']=!![];const _0xc3c206=Buffer['from'](JSON[_0x10f8e6(0x1ab)](_0x19c24d)[_0x10f8e6(0x231)](_0x43ffa6[_0x10f8e6(0x1b0)])),_0x213123=await GrpcClient[_0x10f8e6(0x1ae)]()[_0x10f8e6(0x1f3)]({'platformIndex':_0x149ede,'ref':_0x51ef28[_0x10f8e6(0x1bf)](),'userInputParams':_0xc3c206});}}catch(_0x22091e){this[_0x10f8e6(0x1f8)][_0x10f8e6(0x221)]('Error\x20in\x20onAfterDriverCreate:\x20'+util[_0x10f8e6(0x1cc)](_0x22091e));}}async[a72_0x28a395(0x1d5)](_0x1fa9a0){const _0x254f3b=a72_0x28a395,_0x4b7567={'cpPEq':_0x254f3b(0x20d),'VwvQK':'Automation\x20onAfterTest:\x20Automation\x20instance\x20is\x20not\x20available','lXZnb':function(_0x18caa4,_0x568318){return _0x18caa4(_0x568318);},'GLHgh':function(_0x3ce72e,_0x382169){return _0x3ce72e(_0x382169);},'youTR':function(_0x3f0825,_0x155df7,_0x7214e0){return _0x3f0825(_0x155df7,_0x7214e0);},'tpTPH':_0x254f3b(0x221),'Staet':_0x254f3b(0x1a3),'GBPln':_0x254f3b(0x1dc)};this[_0x254f3b(0x1f8)][_0x254f3b(0x1b6)](_0x4b7567[_0x254f3b(0x1c5)]);const _0x289c73=_0x1fa9a0[_0x254f3b(0x1b9)];if(!_0x289c73){this['logger']['debug'](_0x4b7567[_0x254f3b(0x22f)]);return;}const _0x2da3fe=_0x1fa9a0['testInfo'],_0x4934a9=_0x2da3fe['id'],_0x24c7af=_0x2da3fe[_0x254f3b(0x215)],_0x3774e4=_0x4b7567[_0x254f3b(0x1d1)](getPlaywrightStatus,_0x24c7af),_0x40ce10=_0x4b7567[_0x254f3b(0x218)](getPlaywrightSessionName,_0x2da3fe),_0x55cf54=_0x4b7567['youTR'](nestedKeyValue,_0x24c7af,[_0x4b7567[_0x254f3b(0x213)],_0x4b7567[_0x254f3b(0x1ac)]]);this[_0x254f3b(0x1f8)][_0x254f3b(0x1b6)]('Automation\x20onAfterTest:\x20Test\x20status:\x20'+_0x3774e4);if(!_0x3774e4){this[_0x254f3b(0x1f8)]['debug'](_0x4b7567[_0x254f3b(0x1c3)],_0x24c7af[_0x254f3b(0x215)]);return;}this[_0x254f3b(0x1f8)][_0x254f3b(0x1b6)]('Automation\x20onAfterTest:\x20Setting\x20session\x20status\x20for\x20testId:\x20'+_0x4934a9),await this['markSessionStatus'](_0x289c73,_0x40ce10,_0x3774e4,_0x55cf54);}async[a72_0x28a395(0x21f)](_0x12ddd1,_0x158292,_0x42f4e7,_0x2166a0){const _0x329f32=a72_0x28a395,_0x17b7a7={'Uvhxb':_0x329f32(0x1a6),'lCheR':'markSessionStatus:\x20Automation\x20instance\x20is\x20not\x20available','ujatD':_0x329f32(0x1ce),'RaFjI':_0x329f32(0x1dc),'cJvTE':_0x329f32(0x1fa),'tZCfT':'Session','oLXhY':function(_0x1b75b5,_0x6cf856){return _0x1b75b5===_0x6cf856;},'lDAEb':_0x329f32(0x204),'veIdH':_0x329f32(0x1f9),'klpWN':_0x329f32(0x221),'ONgRA':function(_0x739aae,_0x8cdee5,_0x366bf9,_0x92a4ca){return _0x739aae(_0x8cdee5,_0x366bf9,_0x92a4ca);},'EhJIh':_0x329f32(0x22d),'MsAtb':_0x329f32(0x1f0),'hNoQJ':function(_0x66f5b8,_0x432c0b,_0x303848){return _0x66f5b8(_0x432c0b,_0x303848);}};if(CLIUtils[_0x329f32(0x1df)](BrowserstackCLI[_0x329f32(0x1ae)]()[_0x329f32(0x1cb)]())){this['logger'][_0x329f32(0x1b6)](_0x17b7a7['Uvhxb']);return;}const _0x2d7632=_0x12ddd1;if(!_0x2d7632){this[_0x329f32(0x1f8)]['debug'](_0x17b7a7['lCheR']);return;}const _0x21a616=AutomationFramework[_0x329f32(0x1c9)](_0x2d7632,PlaywrightDriverModule[_0x329f32(0x227)]);if(!_0x21a616){this[_0x329f32(0x1f8)][_0x329f32(0x1b6)](_0x17b7a7[_0x329f32(0x1c1)]);return;}const _0x28a4d9=_0x42f4e7;if(!_0x28a4d9){this['logger']['debug'](_0x17b7a7[_0x329f32(0x1b4)],_0x28a4d9);return;}_0x2166a0&&(_0x2dd3d0['arguments'][_0x17b7a7[_0x329f32(0x21a)]]=_0x2166a0);const _0xb89de9=(_0x158292?_0x158292:_0x17b7a7[_0x329f32(0x1a0)])+'\x20'+_0x28a4d9+'\x20'+(_0x2166a0?_0x329f32(0x1b8)+_0x2166a0:''),_0xcc058=_0x17b7a7['oLXhY'](_0x28a4d9,_0x17b7a7[_0x329f32(0x1d8)])?_0x17b7a7['veIdH']:_0x17b7a7[_0x329f32(0x1ee)];await _0x17b7a7[_0x329f32(0x1da)](playwrightAnnotate,_0x21a616,_0xb89de9,_0xcc058);const _0x3147a9={};_0x3147a9[_0x329f32(0x215)]=_0x28a4d9;const _0x3bd694={};_0x3bd694[_0x329f32(0x1fc)]=_0x17b7a7[_0x329f32(0x20a)],_0x3bd694[_0x329f32(0x20e)]=_0x3147a9;const _0x2dd3d0=_0x3bd694;PerformanceTester['start'](PerformanceEvents[_0x329f32(0x22a)]),this[_0x329f32(0x1f8)][_0x329f32(0x1b6)](_0x17b7a7[_0x329f32(0x225)]),await _0x17b7a7[_0x329f32(0x21d)](playwrightBstackJsExecutor,_0x21a616,_0x2dd3d0),PerformanceTester[_0x329f32(0x1f6)](PerformanceEvents['SESSION_STATUS']);}async[a72_0x28a395(0x1c2)](_0xa39eda){const _0x15ade3=a72_0x28a395,_0xee2ce5={'TCFrs':_0x15ade3(0x1d4),'WyOKU':_0x15ade3(0x1a7),'RpYHq':function(_0x2fc6e9,_0x5c1dcf){return _0x2fc6e9(_0x5c1dcf);},'FjZgL':function(_0x128a0a,_0x8756ef,_0x22c41b){return _0x128a0a(_0x8756ef,_0x22c41b);}};try{if(CLIUtils[_0x15ade3(0x1a2)](BrowserstackCLI[_0x15ade3(0x1ae)]()[_0x15ade3(0x1cb)]())){this[_0x15ade3(0x1f8)][_0x15ade3(0x1b6)](_0xee2ce5[_0x15ade3(0x20f)]);return;}const _0x52a71e=AutomationFramework[_0x15ade3(0x1c9)](AutomationFramework[_0x15ade3(0x1d2)](),PlaywrightDriverModule[_0x15ade3(0x227)]),_0x3d0f52={'action':_0xee2ce5[_0x15ade3(0x22e)],'arguments':{'name':_0xee2ce5[_0x15ade3(0x1ec)](getPlaywrightSessionName,_0xa39eda)}};PerformanceTester[_0x15ade3(0x22c)](PerformanceEvents[_0x15ade3(0x1b2)]),await _0xee2ce5[_0x15ade3(0x1bb)](playwrightBstackJsExecutor,_0x52a71e,_0x3d0f52),PerformanceTester[_0x15ade3(0x1f6)](PerformanceEvents[_0x15ade3(0x1b2)]);}catch(_0x368258){PerformanceTester[_0x15ade3(0x1f6)](PerformanceEvents['SESSION_NAME'],![],util[_0x15ade3(0x1cc)](_0x368258)),this[_0x15ade3(0x1f8)][_0x15ade3(0x221)](_0x15ade3(0x1dd)+util[_0x15ade3(0x1cc)](_0x368258));}}}function a72_0x5ecc(_0x58bd65,_0x473f21){const _0x2935ec=a72_0x2935();return a72_0x5ecc=function(_0x5ecc90,_0x38865e){_0x5ecc90=_0x5ecc90-0x19d;let _0x1e8763=_0x2935ec[_0x5ecc90];return _0x1e8763;},a72_0x5ecc(_0x58bd65,_0x473f21);}PlaywrightDriverModule['MODULE_NAME']=a72_0x28a395(0x1f7),module[a72_0x28a395(0x1a8)]=PlaywrightDriverModule;