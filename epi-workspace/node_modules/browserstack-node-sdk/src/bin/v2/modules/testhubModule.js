function a83_0x4b8c(_0x32b3c3,_0x212727){const _0x2abac4=a83_0x2aba();return a83_0x4b8c=function(_0x4b8c5f,_0x1f40ff){_0x4b8c5f=_0x4b8c5f-0xf8;let _0xb593a2=_0x2abac4[_0x4b8c5f];return _0xb593a2;},a83_0x4b8c(_0x32b3c3,_0x212727);}function a83_0x2aba(){const _0x3bd450=['KEY_PLATFORM_INDEX','name','frameworkName','4606736QRrhhV','BROWSERSTACK_TESTHUB_JWT','capabilities','values','automationSession','getInstance','KEY_CAPABILITIES','getProcessId','POST','CIqGv','hookState','tEQsV','instance','matchHookRegex','../../../helpers/classLogger.js','KEY_HUB_URL','wgkoy','sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','getBuildHashedId','testHookState','toString','../state/hookState.js','TEST','23702420dJrJXI','sendTestFrameworkEvent','../framework/constants/testFrameworkConstants.js','platformIndex','623QdyVBR','./baseModule','split','getId','test_deferred','O11yHashedID','1675214etgLAr','../TestInfo.js','../../../helpers/test-observability/constants.js','getTestIdentifierFromTestInfo','forEach','format','Error\x20in\x20sending\x20CBTSession:\x20','logger','KEY_TEST_FRAMEWORK_NAME','../../../helpers/helper.js','testFrameworkData','createTestFrameworkEventPayload','2894894qRJncc','lPCyn','40SaeeLq','testhubConfig','getTestDetails','getRef','testFrameworkState','testUuid','23790XSBzYH','4968690luDHQE','KEY_TEST_DEFERRED','env','KEY_TEST_FRAMEWORK_VERSION','onPageCreate\x20CBTSession\x20payload:\x20','testFrameworkVersion','util','registerObserver','getJwt','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','base64','BROWSERSTACK_TESTHUB_UUID','getTestId','TestHubModule','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','../grpcClient.js','ENV_VAR','MODULE_NAME','lYCtA','testInfo','debug','getState','executionContext','CREATE','getTestFramework','3|2|4|1|5|7|0|6','stringify','9BWHdEV','bind','../state/testFrameworkState.js','160041Icuhtz','version','\x20hookState:\x20','onPageCreate','error','getThreadId','testFrameworkName','retry','frameworkVersion','testSessionEvent','XDEeq','length','KEY_SESSION_ID','keys','../framework/automationFramework.js','exports','PkiLK','../framework/testFramework.js'];a83_0x2aba=function(){return _0x3bd450;};return a83_0x2aba();}const a83_0x24a138=a83_0x4b8c;(function(_0x29cbe9,_0x147bc1){const _0x3c0a93=a83_0x4b8c,_0x5a5e8c=_0x29cbe9();while(!![]){try{const _0x1aebc1=parseInt(_0x3c0a93(0x100))/0x1+-parseInt(_0x3c0a93(0x10c))/0x2+-parseInt(_0x3c0a93(0x133))/0x3*(parseInt(_0x3c0a93(0x10e))/0x4)+-parseInt(_0x3c0a93(0x115))/0x5+parseInt(_0x3c0a93(0x114))/0x6*(parseInt(_0x3c0a93(0xfa))/0x7)+parseInt(_0x3c0a93(0x148))/0x8*(-parseInt(_0x3c0a93(0x130))/0x9)+parseInt(_0x3c0a93(0x15f))/0xa;if(_0x1aebc1===_0x147bc1)break;else _0x5a5e8c['push'](_0x5a5e8c['shift']());}catch(_0xdf2287){_0x5a5e8c['push'](_0x5a5e8c['shift']());}}}(a83_0x2aba,0xcefe4));const util=require(a83_0x24a138(0x11b)),BaseModule=require(a83_0x24a138(0xfb)),{createClassLogger}=require(a83_0x24a138(0x156)),AutomationFramework=require(a83_0x24a138(0x141)),AutomationFrameworkState=require('../state/automationFrameworkState.js'),HookState=require(a83_0x24a138(0x15d)),TestFramework=require(a83_0x24a138(0x144)),TestFrameworkState=require(a83_0x24a138(0x132)),PlaywrightDriverModule=require('./playwrightDriverModule.js'),TestFrameworkConstants=require(a83_0x24a138(0xf8)),GrpcClient=require(a83_0x24a138(0x124)),CLIUtils=require('../cliUtils.js'),TestInfo=require(a83_0x24a138(0x101)),testHubConstants=require('../../../helpers/testhub/constants'),{FRAMEWORKS}=require(a83_0x24a138(0x102)),BrowserstackCLI=require('../browserstackCLI.js'),{getPlaywrightProvider}=require(a83_0x24a138(0x109));class TestHubModule extends BaseModule{['logger']=createClassLogger(a83_0x24a138(0x122));constructor(_0x5824b4,_0x5d332d=null){const _0x124216=a83_0x24a138,_0x3ada0b={};_0x3ada0b['lYCtA']=_0x124216(0x12e),_0x3ada0b[_0x124216(0x13d)]=_0x124216(0x122);const _0x2a487a=_0x3ada0b,_0x4fc4a3=_0x2a487a[_0x124216(0x127)][_0x124216(0xfc)]('|');let _0x176ce9=0x0;while(!![]){switch(_0x4fc4a3[_0x176ce9++]){case'0':process[_0x124216(0x117)][testHubConstants[_0x124216(0x125)][_0x124216(0x120)]]=this[_0x124216(0x10f)][_0x124216(0x15a)]();continue;case'1':AutomationFramework[_0x124216(0x11c)](AutomationFrameworkState[_0x124216(0x12c)],HookState[_0x124216(0x150)],this[_0x124216(0x136)]['bind'](this));continue;case'2':this[_0x124216(0x146)]=_0x2a487a[_0x124216(0x13d)];continue;case'3':super(_0x5d332d);continue;case'4':this['testhubConfig']=_0x5824b4;continue;case'5':Object['values'](TestFrameworkState)[_0x124216(0x104)](_0x21ba9b=>{const _0x40b76f=_0x124216;Object[_0x40b76f(0x14b)](HookState)['forEach'](_0xdc493a=>{const _0x2a9213=_0x40b76f;TestFramework[_0x2a9213(0x11c)](_0x21ba9b,_0xdc493a,this['onAllTestEvents'][_0x2a9213(0x131)](this));});});continue;case'6':BrowserstackCLI[_0x124216(0xff)]=this[_0x124216(0x10f)]['getBuildHashedId']();continue;case'7':process[_0x124216(0x117)][testHubConstants[_0x124216(0x125)][_0x124216(0x149)]]=this['testhubConfig'][_0x124216(0x11d)]();continue;}break;}}['getModuleName'](){return TestHubModule['MODULE_NAME'];}['onAllTestEvents'](_0x2a3c18){const _0x5a8e57=a83_0x24a138,_0x5906a3={};_0x5906a3[_0x5a8e57(0x158)]=function(_0x4893d3,_0x6ea213){return _0x4893d3===_0x6ea213;};const _0x194623=_0x5906a3,_0x50f929=_0x2a3c18[_0x5a8e57(0x154)],_0x3e6214=_0x50f929['getCurrentTestState']();(_0x194623[_0x5a8e57(0x158)](_0x3e6214,TestFrameworkState[_0x5a8e57(0x15e)])||CLIUtils[_0x5a8e57(0x155)](_0x3e6214[_0x5a8e57(0x15c)]()[_0x5a8e57(0xfc)]('.')[0x1]))&&this[_0x5a8e57(0x160)](_0x2a3c18);}async[a83_0x24a138(0x160)](_0x5d1cba){const _0x1f75bd=a83_0x24a138,_0x291d87={};_0x291d87['BAcbR']=function(_0x22a6b6,_0x8db015){return _0x22a6b6===_0x8db015;},_0x291d87[_0x1f75bd(0x10d)]=_0x1f75bd(0x159);const _0x99344d=_0x291d87;try{const _0x5c469d=BrowserstackCLI[_0x1f75bd(0x14d)]()[_0x1f75bd(0x12d)]()[_0x1f75bd(0x10b)](_0x5d1cba);if(!_0x5c469d||_0x99344d['BAcbR'](Object[_0x1f75bd(0x140)](_0x5c469d)[_0x1f75bd(0x13e)],0x0)){this[_0x1f75bd(0x107)][_0x1f75bd(0x129)](_0x99344d[_0x1f75bd(0x10d)]);return;}const _0x405a80=await GrpcClient[_0x1f75bd(0x14d)]()['testFrameworkEvent'](_0x5c469d);this['logger'][_0x1f75bd(0x129)](_0x1f75bd(0x123)+_0x5c469d[_0x1f75bd(0x112)]+_0x1f75bd(0x135)+_0x5c469d[_0x1f75bd(0x152)]);}catch(_0x12cd4d){this[_0x1f75bd(0x107)][_0x1f75bd(0x137)]('Error\x20in\x20sendTestFrameworkEvent:\x20'+util[_0x1f75bd(0x105)](_0x12cd4d));}}async['onPageCreate'](_0x10977a){const _0x5d5adb=a83_0x24a138,_0xcba58b={'PkiLK':function(_0x5915d2,_0x3e51c1){return _0x5915d2===_0x3e51c1;},'tEQsV':function(_0x4ea067,_0x3698ec){return _0x4ea067===_0x3698ec;},'MQEmC':function(_0x5d0a04,_0x244d6d){return _0x5d0a04(_0x244d6d);},'CIqGv':_0x5d5adb(0x11f)};try{if(_0x10977a['page']){const _0x4fd68e=this[_0x5d5adb(0x121)](_0x10977a);this[_0x5d5adb(0x107)][_0x5d5adb(0x129)](_0x5d5adb(0x11e)+_0x4fd68e);let _0x3ad76f;if(this[_0x5d5adb(0x10a)]&&_0xcba58b[_0x5d5adb(0x143)](this[_0x5d5adb(0x10a)][_0x5d5adb(0x146)],FRAMEWORKS['CUCUMBER']))_0x3ad76f=_0x4fd68e;else this[_0x5d5adb(0x10a)]&&_0xcba58b[_0x5d5adb(0x153)](this['testFrameworkData']['name'],FRAMEWORKS['JEST'])?_0x3ad76f=_0x4fd68e:_0x3ad76f=TestInfo[_0x5d5adb(0x103)](_0x10977a[_0x5d5adb(0x128)],_0x10977a['testInfo'][_0x5d5adb(0x13a)]);const _0x23f97d=TestInfo['getTestUUID'](_0x3ad76f),_0x32a0d4=TestInfo[_0x5d5adb(0x110)](_0x3ad76f),_0x31d778=_0x10977a[_0x5d5adb(0x154)],_0x159360=AutomationFramework[_0x5d5adb(0x12a)](_0x31d778,PlaywrightDriverModule[_0x5d5adb(0x145)]),_0x2cd7c1=_0x32a0d4[TestFrameworkConstants[_0x5d5adb(0x108)]]||this['testFrameworkData']&&this[_0x5d5adb(0x10a)][_0x5d5adb(0x146)],_0x26f341=_0x32a0d4[TestFrameworkConstants[_0x5d5adb(0x118)]]||this['testFrameworkData']&&this['testFrameworkData'][_0x5d5adb(0x134)],_0x48f0ef=TestFrameworkState[_0x5d5adb(0x15e)][_0x5d5adb(0x15c)]()['split']('.')[0x1],_0x1d379b=HookState['POST'][_0x5d5adb(0x15c)]()[_0x5d5adb(0xfc)]('.')[0x1],_0x294a8e=_0x31d778['getContext'](),_0x352f23=AutomationFramework[_0x5d5adb(0x12a)](_0x31d778,PlaywrightDriverModule[_0x5d5adb(0x157)],''),_0x4c7a6d={'provider':_0xcba58b['MQEmC'](getPlaywrightProvider,_0x352f23),'frameworkName':_0x31d778[_0x5d5adb(0x147)],'frameworkVersion':_0x31d778[_0x5d5adb(0x13b)],'frameworkSessionId':AutomationFramework[_0x5d5adb(0x12a)](_0x31d778,PlaywrightDriverModule[_0x5d5adb(0x13f)],''),'ref':_0x31d778[_0x5d5adb(0x111)](),'hubUrl':_0x352f23};let _0x249359=AutomationFramework[_0x5d5adb(0x12a)](_0x31d778,PlaywrightDriverModule[_0x5d5adb(0x14e)],{});_0x249359=Buffer['from'](JSON[_0x5d5adb(0x12f)](_0x249359))[_0x5d5adb(0x15c)](_0xcba58b[_0x5d5adb(0x151)]);const _0x16f9ea={'hash':_0x294a8e[_0x5d5adb(0xfd)](),'threadId':_0x294a8e[_0x5d5adb(0x138)]()[_0x5d5adb(0x15c)](),'processId':_0x294a8e[_0x5d5adb(0x14f)]()[_0x5d5adb(0x15c)]()},_0x510b2e={};_0x510b2e[_0x5d5adb(0xf9)]=_0x159360,_0x510b2e[_0x5d5adb(0x139)]=_0x2cd7c1,_0x510b2e[_0x5d5adb(0x11a)]=_0x26f341,_0x510b2e[_0x5d5adb(0x112)]=_0x48f0ef,_0x510b2e[_0x5d5adb(0x15b)]=_0x1d379b,_0x510b2e[_0x5d5adb(0x113)]=_0x23f97d,_0x510b2e[_0x5d5adb(0x14c)]=_0x4c7a6d,_0x510b2e[_0x5d5adb(0x14a)]=_0x249359,_0x510b2e[_0x5d5adb(0x12b)]=_0x16f9ea;const _0x340d3a=_0x510b2e;this[_0x5d5adb(0x107)]['debug'](_0x5d5adb(0x119)+util[_0x5d5adb(0x105)](_0x340d3a));const _0x56a657=await GrpcClient[_0x5d5adb(0x14d)]()[_0x5d5adb(0x13c)](_0x340d3a);this['logger']['debug']('onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20'+_0x4fd68e);}}catch(_0x252880){this['logger'][_0x5d5adb(0x137)](_0x5d5adb(0x106)+util[_0x5d5adb(0x105)](_0x252880));}}}TestHubModule[a83_0x24a138(0x126)]='TestHubModule',TestHubModule[a83_0x24a138(0x116)]=a83_0x24a138(0xfe),module[a83_0x24a138(0x142)]=TestHubModule;