const a76_0x377c28=a76_0x4bd4;(function(_0xe15680,_0x2b6847){const _0x1d6316=a76_0x4bd4,_0x1dd124=_0xe15680();while(!![]){try{const _0x5c3fc5=parseInt(_0x1d6316(0x1bd))/0x1*(parseInt(_0x1d6316(0x1b0))/0x2)+parseInt(_0x1d6316(0x193))/0x3+-parseInt(_0x1d6316(0x1cb))/0x4*(-parseInt(_0x1d6316(0x18d))/0x5)+parseInt(_0x1d6316(0x17c))/0x6*(parseInt(_0x1d6316(0x19f))/0x7)+parseInt(_0x1d6316(0x1bc))/0x8*(-parseInt(_0x1d6316(0x1d5))/0x9)+-parseInt(_0x1d6316(0x1a8))/0xa*(-parseInt(_0x1d6316(0x1d8))/0xb)+-parseInt(_0x1d6316(0x1a0))/0xc;if(_0x5c3fc5===_0x2b6847)break;else _0x1dd124['push'](_0x1dd124['shift']());}catch(_0x4e88cd){_0x1dd124['push'](_0x1dd124['shift']());}}}(a76_0x4a89,0x28d74));function a76_0x4bd4(_0x36737c,_0x44a7fb){const _0x4a8924=a76_0x4a89();return a76_0x4bd4=function(_0x4bd4da,_0x55aa1c){_0x4bd4da=_0x4bd4da-0x177;let _0xf55707=_0x4a8924[_0x4bd4da];return _0xf55707;},a76_0x4bd4(_0x36737c,_0x44a7fb);}const util=require(a76_0x377c28(0x198)),BaseModule=require(a76_0x377c28(0x1aa)),{createClassLogger}=require('../../../helpers/classLogger.js'),AutomationFramework=require(a76_0x377c28(0x19c)),AutomationFrameworkState=require(a76_0x377c28(0x188)),HookState=require(a76_0x377c28(0x18e)),TestFramework=require(a76_0x377c28(0x180)),TestFrameworkState=require('../state/testFrameworkState.js'),PlaywrightDriverModule=require(a76_0x377c28(0x1ad)),TestFrameworkConstants=require(a76_0x377c28(0x18b)),GrpcClient=require(a76_0x377c28(0x1a5)),CLIUtils=require(a76_0x377c28(0x17f)),TestInfo=require('../TestInfo.js'),testHubConstants=require(a76_0x377c28(0x196)),BrowserstackCLI=require('../browserstackCLI.js'),{getPlaywrightProvider}=require('../../../helpers/helper.js');class TestHubModule extends BaseModule{[a76_0x377c28(0x1c2)]=createClassLogger(a76_0x377c28(0x1b2));constructor(_0x1e76ef){const _0x4fb21d=a76_0x377c28,_0x25db1d={};_0x25db1d[_0x4fb21d(0x1c0)]=_0x4fb21d(0x17b),_0x25db1d[_0x4fb21d(0x1df)]=_0x4fb21d(0x1b2);const _0x17b249=_0x25db1d,_0x3d3377=_0x17b249[_0x4fb21d(0x1c0)][_0x4fb21d(0x182)]('|');let _0x1c999d=0x0;while(!![]){switch(_0x3d3377[_0x1c999d++]){case'0':process[_0x4fb21d(0x1a7)][testHubConstants[_0x4fb21d(0x1a6)]['BROWSERSTACK_TESTHUB_UUID']]=this['testhubConfig'][_0x4fb21d(0x1c6)]();continue;case'1':AutomationFramework['registerObserver'](AutomationFrameworkState[_0x4fb21d(0x1b6)],HookState[_0x4fb21d(0x199)],this[_0x4fb21d(0x1b4)][_0x4fb21d(0x191)](this));continue;case'2':Object[_0x4fb21d(0x194)](TestFrameworkState)['forEach'](_0x36bb03=>{const _0x1f79c9=_0x4fb21d;Object[_0x1f79c9(0x194)](HookState)['forEach'](_0x2f2891=>{const _0x5c3c8c=_0x1f79c9;TestFramework[_0x5c3c8c(0x1ca)](_0x36bb03,_0x2f2891,this[_0x5c3c8c(0x1d9)]['bind'](this));});});continue;case'3':this['testhubConfig']=_0x1e76ef;continue;case'4':BrowserstackCLI[_0x4fb21d(0x178)]=this[_0x4fb21d(0x1c7)]['getBuildHashedId']();continue;case'5':super();continue;case'6':this[_0x4fb21d(0x1bf)]=_0x17b249[_0x4fb21d(0x1df)];continue;case'7':process[_0x4fb21d(0x1a7)][testHubConstants[_0x4fb21d(0x1a6)][_0x4fb21d(0x1ba)]]=this[_0x4fb21d(0x1c7)][_0x4fb21d(0x184)]();continue;}break;}}[a76_0x377c28(0x18a)](){const _0x2b5921=a76_0x377c28;return TestHubModule[_0x2b5921(0x1d1)];}[a76_0x377c28(0x1d9)](_0x423f04){const _0x15aecc=a76_0x377c28,_0x2d9e08={};_0x2d9e08[_0x15aecc(0x1b5)]=function(_0x56a547,_0x2c5ff2){return _0x56a547===_0x2c5ff2;};const _0x134441=_0x2d9e08,_0x3cf529=_0x423f04[_0x15aecc(0x1c3)],_0xf70c95=_0x3cf529[_0x15aecc(0x1a3)]();(_0x134441[_0x15aecc(0x1b5)](_0xf70c95,TestFrameworkState[_0x15aecc(0x1b8)])||CLIUtils[_0x15aecc(0x1ac)](_0xf70c95[_0x15aecc(0x1b7)]()[_0x15aecc(0x182)]('.')[0x1]))&&this[_0x15aecc(0x1ab)](_0x423f04);}async[a76_0x377c28(0x1ab)](_0x1d74f5){const _0x4179ac=a76_0x377c28,_0x42e687={};_0x42e687[_0x4179ac(0x179)]='base64';const _0x280788=_0x42e687;try{const _0x24f461=_0x1d74f5[_0x4179ac(0x1dc)]['id'],_0x372ab4=_0x1d74f5['instance'],_0x1a08d2=_0x372ab4[_0x4179ac(0x187)](),_0x4cd187=_0x372ab4[_0x4179ac(0x1af)]()[_0x4179ac(0x177)](_0x24f461);this[_0x4179ac(0x1c2)][_0x4179ac(0x192)](_0x4179ac(0x1cd)+_0x24f461);const {[TestFrameworkConstants[_0x4179ac(0x1a1)]]:_0x1b8988='',[TestFrameworkConstants[_0x4179ac(0x19a)]]:_0x595073='',[TestFrameworkConstants[_0x4179ac(0x195)]]:_0x2b242a='',[TestFrameworkConstants[_0x4179ac(0x19e)]]:_0x7b1e10=''}=_0x4cd187,_0x142854=_0x372ab4[_0x4179ac(0x1a3)]()[_0x4179ac(0x1b7)]()[_0x4179ac(0x182)]('.')[0x1],_0x55ddfd=_0x372ab4[_0x4179ac(0x1c1)]()[_0x4179ac(0x1b7)]()[_0x4179ac(0x182)]('.')[0x1],_0x295f90=global?.[_0x4179ac(0x1de)]?.[_0x4179ac(0x1d7)]?.[_0x4179ac(0x1ce)];;const _0x278e2a=_0x372ab4[_0x4179ac(0x18c)](),_0xdab732=Buffer[_0x4179ac(0x197)](JSON['stringify'](_0x4cd187))[_0x4179ac(0x1b7)](_0x280788[_0x4179ac(0x179)]),_0x5a5db2={'hash':_0x1a08d2[_0x4179ac(0x1db)](),'threadId':_0x1a08d2[_0x4179ac(0x1c4)]()[_0x4179ac(0x1b7)](),'processId':_0x1a08d2[_0x4179ac(0x1b1)]()[_0x4179ac(0x1b7)]()},_0x330112={};_0x330112['platformIndex']=_0x295f90,_0x330112[_0x4179ac(0x1b9)]=_0x1b8988,_0x330112[_0x4179ac(0x1d2)]=_0x595073,_0x330112[_0x4179ac(0x1a2)]=_0x142854,_0x330112[_0x4179ac(0x17d)]=_0x55ddfd,_0x330112[_0x4179ac(0x19d)]=_0x2b242a,_0x330112[_0x4179ac(0x1dd)]=_0x7b1e10,_0x330112['uuid']=_0x278e2a,_0x330112[_0x4179ac(0x1d3)]=_0xdab732,_0x330112['executionContext']=_0x5a5db2;const _0x169f3d=_0x330112,_0x596bad=await GrpcClient['getInstance']()['testFrameworkEvent'](_0x169f3d);this[_0x4179ac(0x1c2)][_0x4179ac(0x192)](_0x4179ac(0x1c8)+_0x24f461+'\x20testState:\x20'+_0x142854+_0x4179ac(0x18f)+_0x55ddfd);}catch(_0x4f2792){this[_0x4179ac(0x1c2)]['error'](_0x4179ac(0x183)+util['format'](_0x4f2792));}}async['onPageCreate'](_0x3932bd){const _0x4b1780=a76_0x377c28,_0x2aefca={'cMHhN':function(_0x50eb7e,_0x4d57d8){return _0x50eb7e(_0x4d57d8);},'xjyYS':_0x4b1780(0x1c5)};try{if(_0x3932bd['page']){const _0x2c1ebb=_0x3932bd['testInfo'][_0x4b1780(0x190)];this[_0x4b1780(0x1c2)][_0x4b1780(0x192)]('onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20'+_0x2c1ebb);const _0x278f78=TestInfo[_0x4b1780(0x17a)](_0x2c1ebb),_0x280109=TestInfo[_0x4b1780(0x1da)](_0x2c1ebb),_0xd025d3=_0x3932bd[_0x4b1780(0x1c3)],_0x1b4d00=AutomationFramework[_0x4b1780(0x1cf)](_0xd025d3,PlaywrightDriverModule[_0x4b1780(0x1bb)]),_0x161fe0=_0x280109[TestFrameworkConstants[_0x4b1780(0x1a1)]],_0x3f0fdc=_0x280109[TestFrameworkConstants[_0x4b1780(0x19a)]],_0x2b0cba=TestFrameworkState[_0x4b1780(0x1b8)][_0x4b1780(0x1b7)]()['split']('.')[0x1],_0x59b982=HookState[_0x4b1780(0x199)][_0x4b1780(0x1b7)]()['split']('.')[0x1],_0x44027c=_0xd025d3[_0x4b1780(0x187)](),_0x182d94=AutomationFramework[_0x4b1780(0x1cf)](_0xd025d3,PlaywrightDriverModule['KEY_HUB_URL'],''),_0x3a2241={'provider':_0x2aefca[_0x4b1780(0x1cc)](getPlaywrightProvider,_0x182d94),'frameworkName':_0xd025d3[_0x4b1780(0x1ae)],'frameworkVersion':_0xd025d3[_0x4b1780(0x1d0)],'frameworkSessionId':AutomationFramework[_0x4b1780(0x1cf)](_0xd025d3,PlaywrightDriverModule[_0x4b1780(0x1a4)],''),'ref':_0xd025d3[_0x4b1780(0x18c)](),'hubUrl':_0x182d94};let _0x33259a=AutomationFramework[_0x4b1780(0x1cf)](_0xd025d3,PlaywrightDriverModule['KEY_CAPABILITIES'],{});_0x33259a=Buffer[_0x4b1780(0x197)](JSON[_0x4b1780(0x19b)](_0x33259a))[_0x4b1780(0x1b7)](_0x2aefca['xjyYS']);const _0x33cc09={'hash':_0x44027c[_0x4b1780(0x1db)](),'threadId':_0x44027c['getThreadId']()[_0x4b1780(0x1b7)](),'processId':_0x44027c['getProcessId']()[_0x4b1780(0x1b7)]()},_0x2bc5ca={};_0x2bc5ca[_0x4b1780(0x1b3)]=_0x1b4d00,_0x2bc5ca[_0x4b1780(0x1b9)]=_0x161fe0,_0x2bc5ca[_0x4b1780(0x1d2)]=_0x3f0fdc,_0x2bc5ca[_0x4b1780(0x1a2)]=_0x2b0cba,_0x2bc5ca[_0x4b1780(0x1d6)]=_0x59b982,_0x2bc5ca[_0x4b1780(0x1be)]=_0x278f78,_0x2bc5ca['automationSession']=_0x3a2241,_0x2bc5ca[_0x4b1780(0x1d4)]=_0x33259a,_0x2bc5ca['executionContext']=_0x33cc09;const _0x582b38=_0x2bc5ca;this[_0x4b1780(0x1c2)][_0x4b1780(0x192)]('onPageCreate\x20CBTSession\x20payload:\x20'+util['format'](_0x582b38));const _0x41cdf2=await GrpcClient[_0x4b1780(0x1c9)]()[_0x4b1780(0x181)](_0x582b38);this[_0x4b1780(0x1c2)][_0x4b1780(0x192)]('onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20'+_0x2c1ebb);}}catch(_0x1e2671){this[_0x4b1780(0x1c2)][_0x4b1780(0x186)]('Error\x20in\x20sending\x20CBTSession:\x20'+util[_0x4b1780(0x185)](_0x1e2671));}}}function a76_0x4a89(){const _0x2a5d4e=['getProcessId','TestHubModule','platformIndex','onPageCreate','TXvjK','CREATE','toString','TEST','testFrameworkName','BROWSERSTACK_TESTHUB_JWT','KEY_PLATFORM_INDEX','110408ROZlQv','2845TEmMix','testUuid','name','zIxWa','getCurrentHookState','logger','instance','getThreadId','base64','getBuildHashedId','testhubConfig','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','getInstance','registerObserver','38980WlqiWl','cMHhN','sendTestFrameworkEvent\x20testId:\x20','parallelIndex','getState','frameworkVersion','MODULE_NAME','testFrameworkVersion','eventJson','capabilities','171pwiGFI','testHookState','workerInfo','19701rKXWkg','onAllTestEvents','getTestDetails','getId','test','endedAt','__workerDetails','HaNUh','get','O11yHashedID','TonBD','getTestUUID','5|6|3|1|2|7|0|4','6bmJHqC','hookState','test_deferred','../cliUtils.js','../framework/testFramework.js','testSessionEvent','split','Error\x20in\x20sendTestFrameworkEvent:\x20','getJwt','format','error','getContext','../state/automationFrameworkState.js','exports','getModuleName','../framework/constants/testFrameworkConstants.js','getRef','150PhUDFz','../state/hookState.js','\x20hookState:\x20','testId','bind','debug','61242pBvYxN','values','KEY_TEST_STARTED_AT','../../../helpers/testhub/constants','from','util','POST','KEY_TEST_FRAMEWORK_VERSION','stringify','../framework/automationFramework.js','startedAt','KEY_TEST_ENDED_AT','2335459XMiiRN','6647172MQNbOe','KEY_TEST_FRAMEWORK_NAME','testFrameworkState','getCurrentTestState','KEY_SESSION_ID','../grpcClient.js','ENV_VAR','env','1580GMzIXL','KEY_TEST_DEFERRED','./baseModule','sendTestFrameworkEvent','matchHookRegex','./playwrightDriverModule.js','frameworkName','getAllData','38WcqdcC'];a76_0x4a89=function(){return _0x2a5d4e;};return a76_0x4a89();}TestHubModule['MODULE_NAME']='TestHubModule',TestHubModule[a76_0x377c28(0x1a9)]=a76_0x377c28(0x17e),module[a76_0x377c28(0x189)]=TestHubModule;