const a74_0x333a77=a74_0x4de9;(function(_0x4ca293,_0x33b882){const _0x12c779=a74_0x4de9,_0x4c7075=_0x4ca293();while(!![]){try{const _0x5754fe=parseInt(_0x12c779(0x12d))/0x1+parseInt(_0x12c779(0x103))/0x2*(parseInt(_0x12c779(0x10f))/0x3)+-parseInt(_0x12c779(0xea))/0x4*(-parseInt(_0x12c779(0xdf))/0x5)+-parseInt(_0x12c779(0x130))/0x6*(-parseInt(_0x12c779(0x105))/0x7)+-parseInt(_0x12c779(0xe5))/0x8*(-parseInt(_0x12c779(0x143))/0x9)+-parseInt(_0x12c779(0x12b))/0xa*(-parseInt(_0x12c779(0xe7))/0xb)+-parseInt(_0x12c779(0x11a))/0xc;if(_0x5754fe===_0x33b882)break;else _0x4c7075['push'](_0x4c7075['shift']());}catch(_0x5e1290){_0x4c7075['push'](_0x4c7075['shift']());}}}(a74_0x2b2b,0x7c014));function a74_0x4de9(_0x52a64c,_0x2d9acd){const _0x2b2b6d=a74_0x2b2b();return a74_0x4de9=function(_0x4de9d8,_0x54abf4){_0x4de9d8=_0x4de9d8-0xdb;let _0xb3afec=_0x2b2b6d[_0x4de9d8];return _0xb3afec;},a74_0x4de9(_0x52a64c,_0x2d9acd);}const util=require(a74_0x333a77(0x134)),BaseModule=require('./baseModule'),{createClassLogger}=require('../../../helpers/classLogger.js'),AutomationFramework=require(a74_0x333a77(0x137)),AutomationFrameworkState=require(a74_0x333a77(0x13c)),HookState=require(a74_0x333a77(0x145)),TestFramework=require('../framework/testFramework.js'),TestFrameworkState=require(a74_0x333a77(0x121)),PlaywrightDriverModule=require('./playwrightDriverModule.js'),TestFrameworkConstants=require(a74_0x333a77(0x10c)),GrpcClient=require(a74_0x333a77(0x114)),CLIUtils=require(a74_0x333a77(0x12e)),TestInfo=require(a74_0x333a77(0xe3)),testHubConstants=require(a74_0x333a77(0x13b)),BrowserstackCLI=require('../browserstackCLI.js'),{getPlaywrightProvider}=require(a74_0x333a77(0x109));class TestHubModule extends BaseModule{[a74_0x333a77(0xe1)]=createClassLogger('TestHubModule');constructor(_0x46f8d9){const _0x1562cc=a74_0x333a77,_0x53d12b={};_0x53d12b[_0x1562cc(0xec)]=_0x1562cc(0x135),_0x53d12b[_0x1562cc(0x127)]=_0x1562cc(0x10d);const _0x4ac654=_0x53d12b,_0x2951b1=_0x4ac654[_0x1562cc(0xec)][_0x1562cc(0xdc)]('|');let _0x5f3a6a=0x0;while(!![]){switch(_0x2951b1[_0x5f3a6a++]){case'0':BrowserstackCLI[_0x1562cc(0xf6)]=this[_0x1562cc(0x102)][_0x1562cc(0xf8)]();continue;case'1':super();continue;case'2':this[_0x1562cc(0x102)]=_0x46f8d9;continue;case'3':Object[_0x1562cc(0xdd)](TestFrameworkState)[_0x1562cc(0x126)](_0x2856fe=>{const _0x50f935=_0x1562cc;Object[_0x50f935(0xdd)](HookState)[_0x50f935(0x126)](_0x5869e2=>{const _0x942bf1=_0x50f935;TestFramework['registerObserver'](_0x2856fe,_0x5869e2,this[_0x942bf1(0x136)][_0x942bf1(0x108)](this));});});continue;case'4':this[_0x1562cc(0x101)]=_0x4ac654['Ozqzb'];continue;case'5':process[_0x1562cc(0xe4)][testHubConstants[_0x1562cc(0xeb)][_0x1562cc(0x118)]]=this[_0x1562cc(0x102)][_0x1562cc(0xde)]();continue;case'6':process[_0x1562cc(0xe4)][testHubConstants[_0x1562cc(0xeb)]['BROWSERSTACK_TESTHUB_UUID']]=this[_0x1562cc(0x102)]['getBuildHashedId']();continue;case'7':AutomationFramework[_0x1562cc(0x110)](AutomationFrameworkState['CREATE'],HookState['POST'],this[_0x1562cc(0xf7)][_0x1562cc(0x108)](this));continue;}break;}}[a74_0x333a77(0x122)](){const _0xc6fb35=a74_0x333a77;return TestHubModule[_0xc6fb35(0x13a)];}[a74_0x333a77(0x136)](_0x2d66a9){const _0x4ee81b=a74_0x333a77,_0x553aec={};_0x553aec[_0x4ee81b(0x13d)]=function(_0x59fa46,_0x1992fa){return _0x59fa46===_0x1992fa;};const _0x15897a=_0x553aec,_0x45625c=_0x2d66a9[_0x4ee81b(0x133)],_0x50bd12=_0x45625c[_0x4ee81b(0x142)]();(_0x15897a[_0x4ee81b(0x13d)](_0x50bd12,TestFrameworkState[_0x4ee81b(0x10e)])||CLIUtils[_0x4ee81b(0x141)](_0x50bd12[_0x4ee81b(0x139)]()[_0x4ee81b(0xdc)]('.')[0x1]))&&this[_0x4ee81b(0x104)](_0x2d66a9);}async[a74_0x333a77(0x104)](_0x4368a5){const _0x8e3031=a74_0x333a77,_0x1f02e2={};_0x1f02e2['OgZZS']=_0x8e3031(0x11b);const _0x23131c=_0x1f02e2;try{const _0x53e472=_0x4368a5[_0x8e3031(0x144)]['id'],_0x3734c6=_0x4368a5[_0x8e3031(0x133)],_0x3d2fe0=_0x3734c6['getContext'](),_0x5e8625=_0x3734c6[_0x8e3031(0x111)]()[_0x8e3031(0x13f)](_0x53e472);this[_0x8e3031(0xe1)][_0x8e3031(0x117)](_0x8e3031(0xf2)+_0x53e472);const {[TestFrameworkConstants[_0x8e3031(0x116)]]:_0x1b50b9='',[TestFrameworkConstants[_0x8e3031(0x129)]]:_0x135756='',[TestFrameworkConstants['KEY_TEST_STARTED_AT']]:_0x414c4b='',[TestFrameworkConstants[_0x8e3031(0x11d)]]:_0x563e42=''}=_0x5e8625,_0x5d610c=_0x3734c6['getCurrentTestState']()[_0x8e3031(0x139)]()[_0x8e3031(0xdc)]('.')[0x1],_0x188193=_0x3734c6[_0x8e3031(0x123)]()[_0x8e3031(0x139)]()[_0x8e3031(0xdc)]('.')[0x1],_0x5aa103=global?.[_0x8e3031(0xf3)]?.['workerInfo']?.[_0x8e3031(0xf4)];;const _0x1a4131=_0x3734c6[_0x8e3031(0x125)](),_0x1ffa6d=Buffer[_0x8e3031(0x120)](JSON[_0x8e3031(0xf9)](_0x5e8625))[_0x8e3031(0x139)](_0x23131c['OgZZS']),_0x372865={'hash':_0x3d2fe0[_0x8e3031(0x10a)](),'threadId':_0x3d2fe0[_0x8e3031(0x12f)]()[_0x8e3031(0x139)](),'processId':_0x3d2fe0[_0x8e3031(0xfd)]()['toString']()},_0x555be9={};_0x555be9[_0x8e3031(0x107)]=_0x5aa103,_0x555be9['testFrameworkName']=_0x1b50b9,_0x555be9[_0x8e3031(0x112)]=_0x135756,_0x555be9[_0x8e3031(0x100)]=_0x5d610c,_0x555be9[_0x8e3031(0x128)]=_0x188193,_0x555be9[_0x8e3031(0x10b)]=_0x414c4b,_0x555be9['endedAt']=_0x563e42,_0x555be9['uuid']=_0x1a4131,_0x555be9[_0x8e3031(0xfe)]=_0x1ffa6d,_0x555be9[_0x8e3031(0x140)]=_0x372865;const _0x23f74c=_0x555be9,_0x235c69=await GrpcClient[_0x8e3031(0x146)]()[_0x8e3031(0x131)](_0x23f74c);this[_0x8e3031(0xe1)][_0x8e3031(0x117)](_0x8e3031(0xff)+_0x53e472+_0x8e3031(0xfc)+_0x5d610c+_0x8e3031(0xdb)+_0x188193);}catch(_0x3f7443){this[_0x8e3031(0xe1)][_0x8e3031(0x12a)](_0x8e3031(0xfa)+util[_0x8e3031(0x12c)](_0x3f7443));}}async[a74_0x333a77(0xf7)](_0x339c49){const _0xff3cc6=a74_0x333a77,_0x3911cf={'dSIHT':function(_0x523942,_0x33504c){return _0x523942(_0x33504c);},'CEzpl':_0xff3cc6(0x11b)};try{if(_0x339c49[_0xff3cc6(0xe6)]){const _0x398099=_0x339c49['testInfo'][_0xff3cc6(0xe9)];this[_0xff3cc6(0xe1)][_0xff3cc6(0x117)](_0xff3cc6(0xe0)+_0x398099);const _0x22e1b7=TestInfo['getTestUUID'](_0x398099),_0x124237=TestInfo[_0xff3cc6(0x115)](_0x398099),_0x9d583c=_0x339c49[_0xff3cc6(0x133)],_0x2d47b6=AutomationFramework[_0xff3cc6(0x11c)](_0x9d583c,PlaywrightDriverModule[_0xff3cc6(0x13e)]),_0x33bbf3=_0x124237[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']],_0x1e4abd=_0x124237[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']],_0x209062=TestFrameworkState[_0xff3cc6(0x10e)][_0xff3cc6(0x139)]()[_0xff3cc6(0xdc)]('.')[0x1],_0x508219=HookState[_0xff3cc6(0xee)][_0xff3cc6(0x139)]()[_0xff3cc6(0xdc)]('.')[0x1],_0x338a33=_0x9d583c[_0xff3cc6(0xfb)](),_0x21b021=AutomationFramework['getState'](_0x9d583c,PlaywrightDriverModule['KEY_HUB_URL'],''),_0x2605b3={'provider':_0x3911cf[_0xff3cc6(0xf0)](getPlaywrightProvider,_0x21b021),'frameworkName':_0x9d583c[_0xff3cc6(0xe2)],'frameworkVersion':_0x9d583c[_0xff3cc6(0x138)],'frameworkSessionId':AutomationFramework[_0xff3cc6(0x11c)](_0x9d583c,PlaywrightDriverModule[_0xff3cc6(0x124)],''),'ref':_0x9d583c[_0xff3cc6(0x125)](),'hubUrl':_0x21b021};let _0x195a5e=AutomationFramework['getState'](_0x9d583c,PlaywrightDriverModule[_0xff3cc6(0x119)],{});_0x195a5e=Buffer[_0xff3cc6(0x120)](JSON[_0xff3cc6(0xf9)](_0x195a5e))['toString'](_0x3911cf[_0xff3cc6(0xf1)]);const _0x6c4f98={'hash':_0x338a33[_0xff3cc6(0x10a)](),'threadId':_0x338a33[_0xff3cc6(0x12f)]()[_0xff3cc6(0x139)](),'processId':_0x338a33[_0xff3cc6(0xfd)]()['toString']()},_0x39803c={};_0x39803c['platformIndex']=_0x2d47b6,_0x39803c[_0xff3cc6(0x113)]=_0x33bbf3,_0x39803c[_0xff3cc6(0x112)]=_0x1e4abd,_0x39803c['testFrameworkState']=_0x209062,_0x39803c[_0xff3cc6(0x132)]=_0x508219,_0x39803c[_0xff3cc6(0xef)]=_0x22e1b7,_0x39803c[_0xff3cc6(0x11e)]=_0x2605b3,_0x39803c['capabilities']=_0x195a5e,_0x39803c[_0xff3cc6(0x140)]=_0x6c4f98;const _0x3ac5b2=_0x39803c;this[_0xff3cc6(0xe1)]['debug'](_0xff3cc6(0x106)+util[_0xff3cc6(0x12c)](_0x3ac5b2));const _0x343544=await GrpcClient[_0xff3cc6(0x146)]()[_0xff3cc6(0xed)](_0x3ac5b2);this['logger'][_0xff3cc6(0x117)]('onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20'+_0x398099);}}catch(_0x3045ac){this[_0xff3cc6(0xe1)][_0xff3cc6(0x12a)](_0xff3cc6(0x11f)+util[_0xff3cc6(0x12c)](_0x3045ac));}}}TestHubModule['MODULE_NAME']=a74_0x333a77(0x10d),TestHubModule[a74_0x333a77(0xf5)]=a74_0x333a77(0xe8),module['exports']=TestHubModule;function a74_0x2b2b(){const _0x16ea93=['Ozqzb','hookState','KEY_TEST_FRAMEWORK_VERSION','error','20tZBfEx','format','705064JcWzWH','../cliUtils.js','getThreadId','12UljPce','testFrameworkEvent','testHookState','instance','util','1|4|2|7|3|5|6|0','onAllTestEvents','../framework/automationFramework.js','frameworkVersion','toString','MODULE_NAME','../../../helpers/testhub/constants','../state/automationFrameworkState.js','utPWs','KEY_PLATFORM_INDEX','get','executionContext','matchHookRegex','getCurrentTestState','11817tUxOWq','test','../state/hookState.js','getInstance','\x20hookState:\x20','split','values','getJwt','43265lsAlOf','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','logger','frameworkName','../TestInfo.js','env','224rWejqf','page','3489145xrzimm','test_deferred','testId','192TGYXBO','ENV_VAR','ElenD','testSessionEvent','POST','testUuid','dSIHT','CEzpl','sendTestFrameworkEvent\x20testId:\x20','__workerDetails','parallelIndex','KEY_TEST_DEFERRED','O11yHashedID','onPageCreate','getBuildHashedId','stringify','Error\x20in\x20sendTestFrameworkEvent:\x20','getContext','\x20testState:\x20','getProcessId','eventJson','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','testFrameworkState','name','testhubConfig','2LWJTQo','sendTestFrameworkEvent','3146815sATgbT','onPageCreate\x20CBTSession\x20payload:\x20','platformIndex','bind','../../../helpers/helper.js','getId','startedAt','../framework/constants/testFrameworkConstants.js','TestHubModule','TEST','2864607vmbmmn','registerObserver','getAllData','testFrameworkVersion','testFrameworkName','../grpcClient.js','getTestDetails','KEY_TEST_FRAMEWORK_NAME','debug','BROWSERSTACK_TESTHUB_JWT','KEY_CAPABILITIES','37651164aFGUEk','base64','getState','KEY_TEST_ENDED_AT','automationSession','Error\x20in\x20sending\x20CBTSession:\x20','from','../state/testFrameworkState.js','getModuleName','getCurrentHookState','KEY_SESSION_ID','getRef','forEach'];a74_0x2b2b=function(){return _0x16ea93;};return a74_0x2b2b();}