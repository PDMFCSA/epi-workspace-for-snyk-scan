function a78_0x3375(_0x3ebe96,_0x46a031){const _0x297f76=a78_0x297f();return a78_0x3375=function(_0x3375ae,_0x25d6cd){_0x3375ae=_0x3375ae-0x1b8;let _0x3b0805=_0x297f76[_0x3375ae];return _0x3b0805;},a78_0x3375(_0x3ebe96,_0x46a031);}function a78_0x297f(){const _0x46f739=['env','../../../helpers/classLogger.js','testFrameworkName','getProcessId','../cliUtils.js','testFrameworkVersion','../../playwright/reporter/pwUtils.js','../browserstackCLI.js','../framework/constants/testFrameworkConstants.js','getInstance','OEbkF','../state/testFrameworkState.js','onPageCreate\x20CBTSession\x20payload:\x20','\x20hookState:\x20','\x20testState:\x20','KEY_TEST_STARTED_AT','capabilities','testFrameworkState','getId','../TestInfo.js','../framework/testFramework.js','retry','testSessionEvent','getContext','format','toString','testFrameworkEvent','KEY_SESSION_ID','../state/automationFrameworkState.js','TEST','CREATE','jOcDQ','instance','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','EBWcz','312RPEvst','11262gClTAY','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','matchHookRegex','ENV_VAR','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','testhubConfig','5001tYJsmJ','test_deferred','mSMvr','sendTestFrameworkEvent','getCurrentTestState','808tLGztI','onAllTestEvents','uuid','testInfo','test','../framework/automationFramework.js','registerObserver','executionContext','GVqhL','platformIndex','exports','../../../helpers/testhub/constants','KEY_PLATFORM_INDEX','startedAt','values','Error\x20in\x20sending\x20CBTSession:\x20','O11yHashedID','__workerDetails','1165dPNyNi','workerInfo','8aVjCof','wnloC','error','get','debug','KEY_TEST_ENDED_AT','testId','5028590aUmVmf','parallelIndex','getCurrentHookState','forEach','MODULE_NAME','getModuleName','testUuid','getAllData','1282941TVvfCd','./baseModule','getBuildHashedId','3|2|6|4|1|5|7|0','stringify','getRef','../../../helpers/helper.js','logger','1075959KsCpSF','result','split','testHookState','bind','TestHubModule','KEY_TEST_FRAMEWORK_NAME','onPageCreate','6144600bsAhWG','base64','hookState','2053nRNCGX','getState','frameworkName','from','BROWSERSTACK_TESTHUB_JWT','util','automationSession','frameworkVersion','DnoVk','eventJson','KEY_TEST_FRAMEWORK_VERSION','getTestIdentifierFromTestInfo','name'];a78_0x297f=function(){return _0x46f739;};return a78_0x297f();}const a78_0x99ab27=a78_0x3375;(function(_0x478db1,_0x531326){const _0x3e249e=a78_0x3375,_0x343d29=_0x478db1();while(!![]){try{const _0x3527ac=-parseInt(_0x3e249e(0x215))/0x1*(parseInt(_0x3e249e(0x1d3))/0x2)+-parseInt(_0x3e249e(0x1da))/0x3*(parseInt(_0x3e249e(0x1df))/0x4)+-parseInt(_0x3e249e(0x1f1))/0x5*(parseInt(_0x3e249e(0x1d4))/0x6)+parseInt(_0x3e249e(0x1fa))/0x7+-parseInt(_0x3e249e(0x1f3))/0x8*(-parseInt(_0x3e249e(0x20a))/0x9)+parseInt(_0x3e249e(0x212))/0xa+parseInt(_0x3e249e(0x202))/0xb;if(_0x3527ac===_0x531326)break;else _0x343d29['push'](_0x343d29['shift']());}catch(_0x3bb5d9){_0x343d29['push'](_0x343d29['shift']());}}}(a78_0x297f,0x73e2d));const util=require(a78_0x99ab27(0x21a)),BaseModule=require(a78_0x99ab27(0x203)),{createClassLogger}=require(a78_0x99ab27(0x223)),AutomationFramework=require(a78_0x99ab27(0x1e4)),AutomationFrameworkState=require(a78_0x99ab27(0x1cc)),HookState=require('../state/hookState.js'),TestFramework=require(a78_0x99ab27(0x1c4)),TestFrameworkState=require(a78_0x99ab27(0x1bb)),PlaywrightDriverModule=require('./playwrightDriverModule.js'),TestFrameworkConstants=require(a78_0x99ab27(0x1b8)),GrpcClient=require('../grpcClient.js'),CLIUtils=require(a78_0x99ab27(0x226)),TestInfo=require(a78_0x99ab27(0x1c3)),testHubConstants=require(a78_0x99ab27(0x1ea)),BrowserstackCLI=require(a78_0x99ab27(0x229)),{getPlaywrightProvider}=require(a78_0x99ab27(0x208)),{getTestRunIdentifier}=require(a78_0x99ab27(0x228));class TestHubModule extends BaseModule{[a78_0x99ab27(0x209)]=createClassLogger(a78_0x99ab27(0x20f));constructor(_0x53fcb0){const _0x2da059=a78_0x99ab27,_0x3746bc={};_0x3746bc[_0x2da059(0x1d2)]=_0x2da059(0x205),_0x3746bc[_0x2da059(0x1e7)]=_0x2da059(0x20f);const _0x4a5ff1=_0x3746bc,_0x37395b=_0x4a5ff1['EBWcz']['split']('|');let _0x19f3e5=0x0;while(!![]){switch(_0x37395b[_0x19f3e5++]){case'0':BrowserstackCLI[_0x2da059(0x1ef)]=this[_0x2da059(0x1d9)][_0x2da059(0x204)]();continue;case'1':Object['values'](TestFrameworkState)[_0x2da059(0x1fd)](_0x5436b0=>{const _0x173dfc=_0x2da059;Object[_0x173dfc(0x1ed)](HookState)['forEach'](_0x1beb31=>{const _0xeac53f=_0x173dfc;TestFramework[_0xeac53f(0x1e5)](_0x5436b0,_0x1beb31,this[_0xeac53f(0x1e0)][_0xeac53f(0x20e)](this));});});continue;case'2':this[_0x2da059(0x221)]=_0x4a5ff1[_0x2da059(0x1e7)];continue;case'3':super();continue;case'4':AutomationFramework[_0x2da059(0x1e5)](AutomationFrameworkState[_0x2da059(0x1ce)],HookState['POST'],this[_0x2da059(0x211)][_0x2da059(0x20e)](this));continue;case'5':process[_0x2da059(0x222)][testHubConstants[_0x2da059(0x1d7)][_0x2da059(0x219)]]=this[_0x2da059(0x1d9)]['getJwt']();continue;case'6':this['testhubConfig']=_0x53fcb0;continue;case'7':process[_0x2da059(0x222)][testHubConstants[_0x2da059(0x1d7)]['BROWSERSTACK_TESTHUB_UUID']]=this['testhubConfig'][_0x2da059(0x204)]();continue;}break;}}[a78_0x99ab27(0x1ff)](){return TestHubModule['MODULE_NAME'];}[a78_0x99ab27(0x1e0)](_0x37fd99){const _0x2a9157=a78_0x99ab27,_0x3aa3f4={};_0x3aa3f4[_0x2a9157(0x1ba)]=function(_0x4cb934,_0xf39f8c){return _0x4cb934===_0xf39f8c;};const _0x5be61b=_0x3aa3f4,_0xc587b0=_0x37fd99['instance'],_0x1e3fa6=_0xc587b0[_0x2a9157(0x1de)]();(_0x5be61b[_0x2a9157(0x1ba)](_0x1e3fa6,TestFrameworkState[_0x2a9157(0x1cd)])||CLIUtils[_0x2a9157(0x1d6)](_0x1e3fa6[_0x2a9157(0x1c9)]()[_0x2a9157(0x20c)]('.')[0x1]))&&this['sendTestFrameworkEvent'](_0x37fd99);}async[a78_0x99ab27(0x1dd)](_0x244550){const _0x51d959=a78_0x99ab27,_0x1e7f60={'mSMvr':function(_0x12dece,_0x522dff,_0x192aca){return _0x12dece(_0x522dff,_0x192aca);},'jOcDQ':_0x51d959(0x213)};try{const _0x6f7479=_0x244550[_0x51d959(0x1e3)]['id'],_0x77d448=_0x1e7f60[_0x51d959(0x1dc)](getTestRunIdentifier,_0x244550[_0x51d959(0x1e3)],_0x244550[_0x51d959(0x20b)][_0x51d959(0x1c5)]),_0x30b90d=_0x244550['instance'],_0x44394f=_0x30b90d[_0x51d959(0x1c7)](),_0x154b82=_0x30b90d[_0x51d959(0x201)]()[_0x51d959(0x1f6)](_0x77d448);this['logger'][_0x51d959(0x1f7)]('sendTestFrameworkEvent\x20testId:\x20'+_0x6f7479);const {[TestFrameworkConstants[_0x51d959(0x210)]]:_0x56a403='',[TestFrameworkConstants[_0x51d959(0x21f)]]:_0x3528d2='',[TestFrameworkConstants[_0x51d959(0x1bf)]]:_0xdc4eaf='',[TestFrameworkConstants[_0x51d959(0x1f8)]]:_0x45a653=''}=_0x154b82,_0x567564=_0x30b90d[_0x51d959(0x1de)]()[_0x51d959(0x1c9)]()[_0x51d959(0x20c)]('.')[0x1],_0x14f8b4=_0x30b90d[_0x51d959(0x1fc)]()[_0x51d959(0x1c9)]()['split']('.')[0x1],_0x203c14=global?.[_0x51d959(0x1f0)]?.[_0x51d959(0x1f2)]?.[_0x51d959(0x1fb)];;const _0x301db4=_0x30b90d['getRef'](),_0x4ac409=Buffer[_0x51d959(0x218)](JSON[_0x51d959(0x206)](_0x154b82))['toString'](_0x1e7f60[_0x51d959(0x1cf)]),_0x5a36af={'hash':_0x44394f[_0x51d959(0x1c2)](),'threadId':_0x44394f['getThreadId']()[_0x51d959(0x1c9)](),'processId':_0x44394f[_0x51d959(0x225)]()[_0x51d959(0x1c9)]()},_0x3a4165={};_0x3a4165[_0x51d959(0x1e8)]=_0x203c14,_0x3a4165[_0x51d959(0x224)]=_0x56a403,_0x3a4165[_0x51d959(0x227)]=_0x3528d2,_0x3a4165[_0x51d959(0x1c1)]=_0x567564,_0x3a4165[_0x51d959(0x214)]=_0x14f8b4,_0x3a4165[_0x51d959(0x1ec)]=_0xdc4eaf,_0x3a4165['endedAt']=_0x45a653,_0x3a4165[_0x51d959(0x1e1)]=_0x301db4,_0x3a4165[_0x51d959(0x21e)]=_0x4ac409,_0x3a4165[_0x51d959(0x1e6)]=_0x5a36af;const _0x1f746f=_0x3a4165,_0x4a7b75=await GrpcClient['getInstance']()[_0x51d959(0x1ca)](_0x1f746f);this[_0x51d959(0x209)][_0x51d959(0x1f7)](_0x51d959(0x1d8)+_0x6f7479+_0x51d959(0x1be)+_0x567564+_0x51d959(0x1bd)+_0x14f8b4);}catch(_0x608a4f){this[_0x51d959(0x209)][_0x51d959(0x1f5)]('Error\x20in\x20sendTestFrameworkEvent:\x20'+util[_0x51d959(0x1c8)](_0x608a4f));}}async[a78_0x99ab27(0x211)](_0x2f9c40){const _0x17497e=a78_0x99ab27,_0x4f7b03={'wnloC':function(_0x1a1543,_0x381ea9){return _0x1a1543(_0x381ea9);},'DnoVk':'base64'};try{if(_0x2f9c40['page']){const _0x5a9682=_0x2f9c40[_0x17497e(0x1e2)][_0x17497e(0x1f9)];this['logger'][_0x17497e(0x1f7)](_0x17497e(0x1d1)+_0x5a9682);const _0x469e63=TestInfo[_0x17497e(0x220)](_0x2f9c40['testInfo'],_0x2f9c40[_0x17497e(0x1e2)][_0x17497e(0x1c5)]),_0x10b2aa=TestInfo['getTestUUID'](_0x469e63),_0x574ce8=TestInfo['getTestDetails'](_0x469e63),_0x218f63=_0x2f9c40[_0x17497e(0x1d0)],_0xae005c=AutomationFramework[_0x17497e(0x216)](_0x218f63,PlaywrightDriverModule[_0x17497e(0x1eb)]),_0x246c19=_0x574ce8[TestFrameworkConstants[_0x17497e(0x210)]],_0x19fc7c=_0x574ce8[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']],_0x22389a=TestFrameworkState[_0x17497e(0x1cd)][_0x17497e(0x1c9)]()[_0x17497e(0x20c)]('.')[0x1],_0x559014=HookState['POST']['toString']()[_0x17497e(0x20c)]('.')[0x1],_0x448ceb=_0x218f63[_0x17497e(0x1c7)](),_0x3093c4=AutomationFramework[_0x17497e(0x216)](_0x218f63,PlaywrightDriverModule['KEY_HUB_URL'],''),_0x4c8b39={'provider':_0x4f7b03[_0x17497e(0x1f4)](getPlaywrightProvider,_0x3093c4),'frameworkName':_0x218f63[_0x17497e(0x217)],'frameworkVersion':_0x218f63[_0x17497e(0x21c)],'frameworkSessionId':AutomationFramework[_0x17497e(0x216)](_0x218f63,PlaywrightDriverModule[_0x17497e(0x1cb)],''),'ref':_0x218f63[_0x17497e(0x207)](),'hubUrl':_0x3093c4};let _0x1969f7=AutomationFramework['getState'](_0x218f63,PlaywrightDriverModule['KEY_CAPABILITIES'],{});_0x1969f7=Buffer[_0x17497e(0x218)](JSON['stringify'](_0x1969f7))[_0x17497e(0x1c9)](_0x4f7b03[_0x17497e(0x21d)]);const _0x57802e={'hash':_0x448ceb['getId'](),'threadId':_0x448ceb['getThreadId']()[_0x17497e(0x1c9)](),'processId':_0x448ceb[_0x17497e(0x225)]()[_0x17497e(0x1c9)]()},_0x44298c={};_0x44298c[_0x17497e(0x1e8)]=_0xae005c,_0x44298c[_0x17497e(0x224)]=_0x246c19,_0x44298c[_0x17497e(0x227)]=_0x19fc7c,_0x44298c['testFrameworkState']=_0x22389a,_0x44298c[_0x17497e(0x20d)]=_0x559014,_0x44298c[_0x17497e(0x200)]=_0x10b2aa,_0x44298c[_0x17497e(0x21b)]=_0x4c8b39,_0x44298c[_0x17497e(0x1c0)]=_0x1969f7,_0x44298c['executionContext']=_0x57802e;const _0x5d3b66=_0x44298c;this[_0x17497e(0x209)][_0x17497e(0x1f7)](_0x17497e(0x1bc)+util[_0x17497e(0x1c8)](_0x5d3b66));const _0x47806c=await GrpcClient[_0x17497e(0x1b9)]()[_0x17497e(0x1c6)](_0x5d3b66);this[_0x17497e(0x209)]['debug'](_0x17497e(0x1d5)+_0x5a9682);}}catch(_0xb532ee){this[_0x17497e(0x209)]['error'](_0x17497e(0x1ee)+util[_0x17497e(0x1c8)](_0xb532ee));}}}TestHubModule[a78_0x99ab27(0x1fe)]=a78_0x99ab27(0x20f),TestHubModule['KEY_TEST_DEFERRED']=a78_0x99ab27(0x1db),module[a78_0x99ab27(0x1e9)]=TestHubModule;