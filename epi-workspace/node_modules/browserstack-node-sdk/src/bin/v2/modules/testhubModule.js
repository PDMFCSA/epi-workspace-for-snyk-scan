const a85_0x5b31f7=a85_0x1142;(function(_0x36e10e,_0x43ec25){const _0x6a66a4=a85_0x1142,_0x119ce0=_0x36e10e();while(!![]){try{const _0x423692=parseInt(_0x6a66a4(0x1fc))/0x1*(parseInt(_0x6a66a4(0x201))/0x2)+parseInt(_0x6a66a4(0x219))/0x3+parseInt(_0x6a66a4(0x20a))/0x4*(parseInt(_0x6a66a4(0x231))/0x5)+parseInt(_0x6a66a4(0x1f3))/0x6+-parseInt(_0x6a66a4(0x1e6))/0x7+-parseInt(_0x6a66a4(0x234))/0x8+parseInt(_0x6a66a4(0x1f0))/0x9;if(_0x423692===_0x43ec25)break;else _0x119ce0['push'](_0x119ce0['shift']());}catch(_0x10c637){_0x119ce0['push'](_0x119ce0['shift']());}}}(a85_0x27ad,0xa376e));function a85_0x27ad(){const _0x498a9c=['../framework/testFramework.js','../cliUtils.js','getTestUUID','KOVkI','logger','onPageCreate\x20CBTSession\x20payload:\x20','instance','7341019xpEcAK','testUuid','getTestDetails','KEY_HUB_URL','../../../helpers/test-observability/constants.js','onAllTestEvents','getBuildHashedId','KEY_PLATFORM_INDEX','HEbXG','testFrameworkData','2885184tDyDAB','testFrameworkState','./playwrightDriverModule.js','3424014mjwoxe','exports','getTestId','getState','QAcvW','format','getJwt','debug','getRef','4kIlmVL','frameworkName','QOZIw','getProcessId',',\x20test_identifier:\x20','370290DANlzS','matchHookRegex','Error\x20in\x20sending\x20CBTSession:\x20','testFrameworkEvent','version','../state/testFrameworkState.js','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','\x20hookState:\x20','isLTSSession','36gHrPGn','retry','getModuleName','getLTSSessionId','env','MphyS','../framework/constants/testFrameworkConstants.js','registerObserver','KEY_TEST_FRAMEWORK_NAME','CUCUMBER','toString','getTestFramework','Error\x20in\x20sendTestFrameworkEvent:\x20','TEST','POST','113067ImnZQS','length','../state/automationFrameworkState.js','kxqjG','ENV_VAR','BROWSERSTACK_TESTHUB_UUID','onPageCreate:\x20Skipping\x20CBT\x20session\x20event\x20-\x20no\x20testInfo\x20(page\x20created\x20outside\x20test\x20context)','../TestInfo.js','KEY_TEST_DEFERRED','./baseModule','BROWSERSTACK_TESTHUB_JWT','recreateIdentifierFromTestInfo','TestHubModule','jestUtils','test_deferred','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','name','uKAWy','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','ToOaJ','page','../../../helpers/testhub/constants','../../../helpers/classLogger.js','bind','373565irActo','split','7|8|4|1|3|6|0|2|5','4989312sfMkFN','./loadTestModule.js','onPageCreate','getThreadId','getCurrentTestState','O11yHashedID','testInfo','onPageCreate:\x20Recreated\x20Jest\x20testIdentifier:\x20','getContext','getInstance','sendTestFrameworkEvent','forEach','getTestIdentifierFromTestInfo','../browserstackCLI.js','testhubConfig','hookState','from','../../../helpers/helper.js','error','jyfTZ','JEST','util'];a85_0x27ad=function(){return _0x498a9c;};return a85_0x27ad();}function a85_0x1142(_0x8169fa,_0x39fd13){const _0x27ad87=a85_0x27ad();return a85_0x1142=function(_0x1142af,_0x2d4308){_0x1142af=_0x1142af-0x1d0;let _0x13ac80=_0x27ad87[_0x1142af];return _0x13ac80;},a85_0x1142(_0x8169fa,_0x39fd13);}const util=require(a85_0x5b31f7(0x1de)),BaseModule=require(a85_0x5b31f7(0x222)),{createClassLogger}=require(a85_0x5b31f7(0x22f)),AutomationFramework=require('../framework/automationFramework.js'),AutomationFrameworkState=require(a85_0x5b31f7(0x21b)),HookState=require('../state/hookState.js'),TestFramework=require(a85_0x5b31f7(0x1df)),TestFrameworkState=require(a85_0x5b31f7(0x206)),PlaywrightDriverModule=require(a85_0x5b31f7(0x1f2)),TestFrameworkConstants=require(a85_0x5b31f7(0x210)),GrpcClient=require('../grpcClient.js'),CLIUtils=require(a85_0x5b31f7(0x1e0)),TestInfo=require(a85_0x5b31f7(0x220)),testHubConstants=require(a85_0x5b31f7(0x22e)),{FRAMEWORKS}=require(a85_0x5b31f7(0x1ea)),helper=require(a85_0x5b31f7(0x1da)),LoadTestModule=require(a85_0x5b31f7(0x235)),JestUtils=require('../utils/jest-utils.js'),BrowserstackCLI=require(a85_0x5b31f7(0x1d6)),{getPlaywrightProvider}=require(a85_0x5b31f7(0x1da));class TestHubModule extends BaseModule{[a85_0x5b31f7(0x1e3)]=createClassLogger('TestHubModule');constructor(_0x18ac7f,_0x227159=null){const _0x41044a=a85_0x5b31f7,_0x5113b0={};_0x5113b0[_0x41044a(0x22a)]=_0x41044a(0x233),_0x5113b0[_0x41044a(0x1fe)]=_0x41044a(0x225);const _0x3ccf6a=_0x5113b0,_0x2c7902=_0x3ccf6a[_0x41044a(0x22a)][_0x41044a(0x232)]('|');let _0x4353d2=0x0;while(!![]){switch(_0x2c7902[_0x4353d2++]){case'0':process['env'][testHubConstants[_0x41044a(0x21d)][_0x41044a(0x223)]]=this[_0x41044a(0x1d7)][_0x41044a(0x1f9)]();continue;case'1':this[_0x41044a(0x226)]=new JestUtils();continue;case'2':process[_0x41044a(0x20e)][testHubConstants[_0x41044a(0x21d)][_0x41044a(0x21e)]]=this[_0x41044a(0x1d7)][_0x41044a(0x1ec)]();continue;case'3':AutomationFramework[_0x41044a(0x211)](AutomationFrameworkState['CREATE'],HookState[_0x41044a(0x218)],this['onPageCreate'][_0x41044a(0x230)](this));continue;case'4':this[_0x41044a(0x1d7)]=_0x18ac7f;continue;case'5':BrowserstackCLI[_0x41044a(0x239)]=this[_0x41044a(0x1d7)][_0x41044a(0x1ec)]();continue;case'6':Object['values'](TestFrameworkState)[_0x41044a(0x1d4)](_0xcf4a8b=>{const _0x142f58=_0x41044a;Object['values'](HookState)[_0x142f58(0x1d4)](_0x4e0eba=>{const _0x5f1c6d=_0x142f58;TestFramework[_0x5f1c6d(0x211)](_0xcf4a8b,_0x4e0eba,this[_0x5f1c6d(0x1eb)][_0x5f1c6d(0x230)](this));});});continue;case'7':super(_0x227159);continue;case'8':this[_0x41044a(0x229)]=_0x3ccf6a[_0x41044a(0x1fe)];continue;}break;}}[a85_0x5b31f7(0x20c)](){return TestHubModule['MODULE_NAME'];}[a85_0x5b31f7(0x1eb)](_0x4e3011){const _0x7f674d=a85_0x5b31f7,_0x3c5bab={};_0x3c5bab[_0x7f674d(0x1ee)]=function(_0x38889e,_0x55e2f4){return _0x38889e===_0x55e2f4;};const _0x33e02d=_0x3c5bab,_0x81338f=_0x4e3011[_0x7f674d(0x1e5)],_0x442088=_0x81338f[_0x7f674d(0x238)]();(_0x33e02d[_0x7f674d(0x1ee)](_0x442088,TestFrameworkState['TEST'])||CLIUtils[_0x7f674d(0x202)](_0x442088[_0x7f674d(0x214)]()['split']('.')[0x1]))&&this[_0x7f674d(0x1d3)](_0x4e3011);}async[a85_0x5b31f7(0x1d3)](_0xcf8f35){const _0x199f07=a85_0x5b31f7,_0x4eecf7={};_0x4eecf7[_0x199f07(0x20f)]=function(_0x28742e,_0x34a0ac){return _0x28742e===_0x34a0ac;},_0x4eecf7[_0x199f07(0x1f7)]='sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event';const _0x2827b4=_0x4eecf7;try{const _0x25012e=BrowserstackCLI[_0x199f07(0x1d2)]()[_0x199f07(0x215)]()['createTestFrameworkEventPayload'](_0xcf8f35);if(!_0x25012e||_0x2827b4[_0x199f07(0x20f)](Object['keys'](_0x25012e)[_0x199f07(0x21a)],0x0)){this[_0x199f07(0x1e3)][_0x199f07(0x1fa)](_0x2827b4[_0x199f07(0x1f7)]);return;}const _0x3371ec=await GrpcClient[_0x199f07(0x1d2)]()[_0x199f07(0x204)](_0x25012e);this[_0x199f07(0x1e3)]['debug'](_0x199f07(0x228)+_0x25012e[_0x199f07(0x1f1)]+_0x199f07(0x208)+_0x25012e[_0x199f07(0x1d8)]);}catch(_0x4b7033){this[_0x199f07(0x1e3)]['error'](_0x199f07(0x216)+util[_0x199f07(0x1f8)](_0x4b7033));}}async[a85_0x5b31f7(0x236)](_0x255e3f){const _0x296861=a85_0x5b31f7,_0x64322b={'kxqjG':function(_0x570133,_0x379fee){return _0x570133===_0x379fee;},'ZJyOk':_0x296861(0x21f),'jyfTZ':function(_0x3ec375,_0x59370f){return _0x3ec375===_0x59370f;},'ToOaJ':function(_0x184cdd,_0xfa3986){return _0x184cdd(_0xfa3986);},'IZdUN':'base64','KOVkI':function(_0x407e2e,_0xdfbd5){return _0x407e2e===_0xdfbd5;}};try{if(_0x255e3f[_0x296861(0x22d)]){const _0xbe082f=this[_0x296861(0x1f5)](_0x255e3f);this[_0x296861(0x1e3)]['debug'](_0x296861(0x22b)+_0xbe082f);if(this['testFrameworkData']&&_0x64322b[_0x296861(0x21c)](this[_0x296861(0x1ef)]['name'],FRAMEWORKS[_0x296861(0x1dd)])&&!_0x255e3f[_0x296861(0x23a)]){this[_0x296861(0x1e3)]['debug'](_0x64322b['ZJyOk']);return;}let _0x5efea6,_0x4a612a;if(this[_0x296861(0x1ef)]&&_0x64322b[_0x296861(0x21c)](this['testFrameworkData'][_0x296861(0x229)],FRAMEWORKS[_0x296861(0x213)]))_0x5efea6=_0xbe082f,_0x4a612a=TestInfo[_0x296861(0x1e1)](_0x5efea6);else this[_0x296861(0x1ef)]&&_0x64322b[_0x296861(0x1dc)](this[_0x296861(0x1ef)][_0x296861(0x229)],FRAMEWORKS['JEST'])?(_0x5efea6=this['jestUtils'][_0x296861(0x224)](_0x255e3f['testInfo']),this['logger'][_0x296861(0x1fa)](_0x296861(0x1d0)+_0x5efea6)):(_0x5efea6=TestInfo[_0x296861(0x1d5)](_0x255e3f[_0x296861(0x23a)],_0x255e3f[_0x296861(0x23a)][_0x296861(0x20b)]),_0x4a612a=TestInfo[_0x296861(0x1e1)](_0x5efea6));const _0x4a05d9=TestInfo[_0x296861(0x1e8)](_0x5efea6),_0x59e457=_0x255e3f[_0x296861(0x1e5)],_0x1941ac=AutomationFramework[_0x296861(0x1f6)](_0x59e457,PlaywrightDriverModule[_0x296861(0x1ed)]),_0x4a6d39=_0x4a05d9?.[TestFrameworkConstants[_0x296861(0x212)]]||this[_0x296861(0x1ef)]&&this[_0x296861(0x1ef)][_0x296861(0x229)],_0x1c801d=_0x4a05d9?.[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]||this[_0x296861(0x1ef)]&&this['testFrameworkData'][_0x296861(0x205)],_0xfe58a=TestFrameworkState[_0x296861(0x217)][_0x296861(0x214)]()[_0x296861(0x232)]('.')[0x1],_0x109906=HookState[_0x296861(0x218)][_0x296861(0x214)]()['split']('.')[0x1],_0x44f529=_0x59e457[_0x296861(0x1d1)](),_0x13fc24=AutomationFramework[_0x296861(0x1f6)](_0x59e457,PlaywrightDriverModule[_0x296861(0x1e9)],''),_0x4178b8={'provider':_0x64322b[_0x296861(0x22c)](getPlaywrightProvider,_0x13fc24),'frameworkName':_0x59e457[_0x296861(0x1fd)],'frameworkVersion':_0x59e457['frameworkVersion'],'frameworkSessionId':LoadTestModule[_0x296861(0x209)]()?LoadTestModule[_0x296861(0x20d)]():AutomationFramework[_0x296861(0x1f6)](_0x59e457,PlaywrightDriverModule['KEY_SESSION_ID'],''),'ref':_0x59e457[_0x296861(0x1fb)](),'hubUrl':_0x13fc24};let _0x3ad07d=AutomationFramework['getState'](_0x59e457,PlaywrightDriverModule['KEY_CAPABILITIES'],{});_0x3ad07d=Buffer[_0x296861(0x1d9)](JSON['stringify'](_0x3ad07d))[_0x296861(0x214)](_0x64322b['IZdUN']);const _0x1860d0={'hash':_0x44f529['getId'](),'threadId':_0x44f529[_0x296861(0x237)]()['toString'](),'processId':_0x44f529[_0x296861(0x1ff)]()[_0x296861(0x214)]()},_0x2442c2={};_0x2442c2['test_identifier']=_0x5efea6;const _0x16e822={};_0x16e822[_0x296861(0x1e7)]=_0x4a612a;const _0x33d8e2={'platformIndex':_0x1941ac,'testFrameworkName':_0x4a6d39,'testFrameworkVersion':_0x1c801d,'testFrameworkState':_0xfe58a,'testHookState':_0x109906,...this['testFrameworkData']&&_0x64322b[_0x296861(0x1e2)](this[_0x296861(0x1ef)][_0x296861(0x229)],FRAMEWORKS[_0x296861(0x1dd)])?_0x2442c2:_0x16e822,'automationSession':_0x4178b8,'capabilities':_0x3ad07d,'executionContext':_0x1860d0};this[_0x296861(0x1e3)]['debug'](_0x296861(0x1e4)+util[_0x296861(0x1f8)](_0x33d8e2));const _0x4bc0fb=await GrpcClient[_0x296861(0x1d2)]()['testSessionEvent'](_0x33d8e2);this[_0x296861(0x1e3)][_0x296861(0x1fa)](_0x296861(0x207)+_0xbe082f+(this[_0x296861(0x1ef)]&&_0x64322b[_0x296861(0x21c)](this['testFrameworkData'][_0x296861(0x229)],FRAMEWORKS['JEST'])?_0x296861(0x200)+_0x5efea6:''));}}catch(_0x564609){this[_0x296861(0x1e3)][_0x296861(0x1db)](_0x296861(0x203)+util[_0x296861(0x1f8)](_0x564609));}}}TestHubModule['MODULE_NAME']=a85_0x5b31f7(0x225),TestHubModule[a85_0x5b31f7(0x221)]=a85_0x5b31f7(0x227),module[a85_0x5b31f7(0x1f4)]=TestHubModule;