const a83_0x476c35=a83_0x3463;function a83_0x3463(_0x21a71d,_0x21560c){const _0x414230=a83_0x4142();return a83_0x3463=function(_0x3463f3,_0x3b7ef4){_0x3463f3=_0x3463f3-0x65;let _0x26ffff=_0x414230[_0x3463f3];return _0x26ffff;},a83_0x3463(_0x21a71d,_0x21560c);}(function(_0x408ec0,_0x13e84a){const _0x58c694=a83_0x3463,_0x258cc1=_0x408ec0();while(!![]){try{const _0x5b1e36=-parseInt(_0x58c694(0x76))/0x1*(parseInt(_0x58c694(0x74))/0x2)+parseInt(_0x58c694(0x82))/0x3*(parseInt(_0x58c694(0x88))/0x4)+-parseInt(_0x58c694(0x9d))/0x5+-parseInt(_0x58c694(0x96))/0x6+parseInt(_0x58c694(0x9c))/0x7*(parseInt(_0x58c694(0x9f))/0x8)+-parseInt(_0x58c694(0x91))/0x9+parseInt(_0x58c694(0x9a))/0xa;if(_0x5b1e36===_0x13e84a)break;else _0x258cc1['push'](_0x258cc1['shift']());}catch(_0x1ec90e){_0x258cc1['push'](_0x258cc1['shift']());}}}(a83_0x4142,0x21f69));const util=require(a83_0x476c35(0xa1)),BaseModule=require(a83_0x476c35(0x6a)),{createClassLogger}=require(a83_0x476c35(0x92)),AutomationFramework=require(a83_0x476c35(0xb4)),AutomationFrameworkState=require(a83_0x476c35(0x72)),HookState=require(a83_0x476c35(0x8e)),TestFramework=require(a83_0x476c35(0xd0)),TestFrameworkState=require(a83_0x476c35(0xc1)),PlaywrightDriverModule=require(a83_0x476c35(0xb7)),TestFrameworkConstants=require('../framework/constants/testFrameworkConstants.js'),GrpcClient=require(a83_0x476c35(0x75)),CLIUtils=require(a83_0x476c35(0x80)),TestInfo=require(a83_0x476c35(0xbb)),testHubConstants=require(a83_0x476c35(0xcf)),{FRAMEWORKS}=require(a83_0x476c35(0x8d)),BrowserstackCLI=require(a83_0x476c35(0xa6)),{getPlaywrightProvider}=require(a83_0x476c35(0xcb));class TestHubModule extends BaseModule{[a83_0x476c35(0x85)]=createClassLogger(a83_0x476c35(0x69));constructor(_0xc3beb7,_0x16a28e=null){const _0x125ff3=a83_0x476c35,_0x233d1c={};_0x233d1c[_0x125ff3(0x84)]=_0x125ff3(0xc0),_0x233d1c[_0x125ff3(0x6e)]='TestHubModule';const _0x2e01fc=_0x233d1c,_0x1ed6bd=_0x2e01fc[_0x125ff3(0x84)][_0x125ff3(0x87)]('|');let _0x3442e7=0x0;while(!![]){switch(_0x1ed6bd[_0x3442e7++]){case'0':this[_0x125ff3(0x7b)]=_0x2e01fc['abaFv'];continue;case'1':super(_0x16a28e);continue;case'2':process[_0x125ff3(0x8c)][testHubConstants[_0x125ff3(0xc3)][_0x125ff3(0xb5)]]=this[_0x125ff3(0xbf)][_0x125ff3(0xb2)]();continue;case'3':AutomationFramework[_0x125ff3(0xa7)](AutomationFrameworkState[_0x125ff3(0x79)],HookState[_0x125ff3(0x7e)],this[_0x125ff3(0x95)][_0x125ff3(0xa0)](this));continue;case'4':process[_0x125ff3(0x8c)][testHubConstants['ENV_VAR']['BROWSERSTACK_TESTHUB_UUID']]=this[_0x125ff3(0xbf)][_0x125ff3(0x71)]();continue;case'5':BrowserstackCLI[_0x125ff3(0xc5)]=this['testhubConfig'][_0x125ff3(0x71)]();continue;case'6':this['testhubConfig']=_0xc3beb7;continue;case'7':Object[_0x125ff3(0xc7)](TestFrameworkState)[_0x125ff3(0xa3)](_0x1b5746=>{const _0x5253b5=_0x125ff3;Object[_0x5253b5(0xc7)](HookState)['forEach'](_0x5f8069=>{const _0x571c52=_0x5253b5;TestFramework[_0x571c52(0xa7)](_0x1b5746,_0x5f8069,this[_0x571c52(0xb6)][_0x571c52(0xa0)](this));});});continue;}break;}}['getModuleName'](){const _0x180a9f=a83_0x476c35;return TestHubModule[_0x180a9f(0x7d)];}['onAllTestEvents'](_0x421b4d){const _0x59ecdb=a83_0x476c35,_0x27774e={};_0x27774e[_0x59ecdb(0x65)]=function(_0x483baa,_0x5f5387){return _0x483baa===_0x5f5387;};const _0x35940f=_0x27774e,_0x1f453b=_0x421b4d['instance'],_0x57fba7=_0x1f453b[_0x59ecdb(0xb1)]();(_0x35940f['YvWxE'](_0x57fba7,TestFrameworkState[_0x59ecdb(0xaa)])||CLIUtils[_0x59ecdb(0x7c)](_0x57fba7['toString']()[_0x59ecdb(0x87)]('.')[0x1]))&&this[_0x59ecdb(0x6f)](_0x421b4d);}async[a83_0x476c35(0x6f)](_0x481f13){const _0x137b81=a83_0x476c35,_0x48b903={};_0x48b903[_0x137b81(0x66)]=function(_0x4ad3d4,_0x2944e6){return _0x4ad3d4===_0x2944e6;},_0x48b903[_0x137b81(0xaf)]='sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event';const _0xf9d43=_0x48b903;try{const _0x5b831d=BrowserstackCLI[_0x137b81(0x9b)]()[_0x137b81(0xa8)]()[_0x137b81(0xae)](_0x481f13);if(!_0x5b831d||_0xf9d43['cntuj'](Object[_0x137b81(0xc6)](_0x5b831d)[_0x137b81(0x99)],0x0)){this[_0x137b81(0x85)][_0x137b81(0xce)](_0xf9d43[_0x137b81(0xaf)]);return;}const _0x4c82ee=await GrpcClient[_0x137b81(0x9b)]()[_0x137b81(0xcc)](_0x5b831d);this[_0x137b81(0x85)][_0x137b81(0xce)](_0x137b81(0xb3)+_0x5b831d[_0x137b81(0xbe)]+_0x137b81(0x6d)+_0x5b831d['hookState']);}catch(_0xb2925a){this['logger'][_0x137b81(0xa5)](_0x137b81(0x89)+util[_0x137b81(0x78)](_0xb2925a));}}async['onPageCreate'](_0x4823d0){const _0x4ad186=a83_0x476c35,_0x53da11={'jpPRW':function(_0x3ce6c7,_0x4f5ad9){return _0x3ce6c7===_0x4f5ad9;},'iEnBw':function(_0x191af9,_0x2ec6d9){return _0x191af9===_0x2ec6d9;},'NZCxi':function(_0xa22fc3,_0x126d45){return _0xa22fc3(_0x126d45);},'scWYj':_0x4ad186(0x86)};try{if(_0x4823d0[_0x4ad186(0xab)]){const _0x22f72a=this['getTestId'](_0x4823d0);this['logger']['debug'](_0x4ad186(0x98)+_0x22f72a);let _0x22de17;if(this['testFrameworkData']&&_0x53da11[_0x4ad186(0x7f)](this['testFrameworkData'][_0x4ad186(0x7b)],FRAMEWORKS[_0x4ad186(0xc8)]))_0x22de17=_0x22f72a;else this['testFrameworkData']&&_0x53da11[_0x4ad186(0x8b)](this[_0x4ad186(0xba)][_0x4ad186(0x7b)],FRAMEWORKS['JEST'])?_0x22de17=_0x22f72a:_0x22de17=TestInfo[_0x4ad186(0x73)](_0x4823d0[_0x4ad186(0x6c)],_0x4823d0['testInfo'][_0x4ad186(0xb9)]);const _0x236a27=TestInfo[_0x4ad186(0x7a)](_0x22de17),_0x3b47a4=TestInfo[_0x4ad186(0xbd)](_0x22de17),_0x42d92c=_0x4823d0[_0x4ad186(0xac)],_0x4c4f66=AutomationFramework[_0x4ad186(0xa4)](_0x42d92c,PlaywrightDriverModule[_0x4ad186(0xa2)]),_0x5764c1=_0x3b47a4[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]||this[_0x4ad186(0xba)]&&this[_0x4ad186(0xba)][_0x4ad186(0x7b)],_0x3117ac=_0x3b47a4[TestFrameworkConstants[_0x4ad186(0x6b)]]||this[_0x4ad186(0xba)]&&this[_0x4ad186(0xba)][_0x4ad186(0xc9)],_0x2ea8c7=TestFrameworkState[_0x4ad186(0xaa)][_0x4ad186(0xcd)]()['split']('.')[0x1],_0x208baa=HookState[_0x4ad186(0x7e)]['toString']()['split']('.')[0x1],_0x48d5f4=_0x42d92c[_0x4ad186(0x93)](),_0x46d497=AutomationFramework['getState'](_0x42d92c,PlaywrightDriverModule[_0x4ad186(0xad)],''),_0x101444={'provider':_0x53da11['NZCxi'](getPlaywrightProvider,_0x46d497),'frameworkName':_0x42d92c[_0x4ad186(0xc4)],'frameworkVersion':_0x42d92c[_0x4ad186(0x81)],'frameworkSessionId':AutomationFramework['getState'](_0x42d92c,PlaywrightDriverModule[_0x4ad186(0x8a)],''),'ref':_0x42d92c['getRef'](),'hubUrl':_0x46d497};let _0xd65de9=AutomationFramework[_0x4ad186(0xa4)](_0x42d92c,PlaywrightDriverModule[_0x4ad186(0x97)],{});_0xd65de9=Buffer[_0x4ad186(0x8f)](JSON['stringify'](_0xd65de9))['toString'](_0x53da11[_0x4ad186(0x67)]);const _0x163bf6={'hash':_0x48d5f4[_0x4ad186(0xb0)](),'threadId':_0x48d5f4[_0x4ad186(0x9e)]()[_0x4ad186(0xcd)](),'processId':_0x48d5f4[_0x4ad186(0x94)]()[_0x4ad186(0xcd)]()},_0x9a6c83={};_0x9a6c83[_0x4ad186(0xa9)]=_0x4c4f66,_0x9a6c83[_0x4ad186(0x68)]=_0x5764c1,_0x9a6c83['testFrameworkVersion']=_0x3117ac,_0x9a6c83[_0x4ad186(0xbe)]=_0x2ea8c7,_0x9a6c83[_0x4ad186(0xca)]=_0x208baa,_0x9a6c83['testUuid']=_0x236a27,_0x9a6c83[_0x4ad186(0xc2)]=_0x101444,_0x9a6c83[_0x4ad186(0x77)]=_0xd65de9,_0x9a6c83['executionContext']=_0x163bf6;const _0x1e1b58=_0x9a6c83;this[_0x4ad186(0x85)]['debug'](_0x4ad186(0x83)+util[_0x4ad186(0x78)](_0x1e1b58));const _0x2c84b5=await GrpcClient[_0x4ad186(0x9b)]()['testSessionEvent'](_0x1e1b58);this['logger'][_0x4ad186(0xce)](_0x4ad186(0xb8)+_0x22f72a);}}catch(_0xc37b8a){this[_0x4ad186(0x85)]['error']('Error\x20in\x20sending\x20CBTSession:\x20'+util[_0x4ad186(0x78)](_0xc37b8a));}}}function a83_0x4142(){const _0x4d19f7=['getThreadId','304kPUkoe','bind','util','KEY_PLATFORM_INDEX','forEach','getState','error','../browserstackCLI.js','registerObserver','getTestFramework','platformIndex','TEST','page','instance','KEY_HUB_URL','createTestFrameworkEventPayload','eFoBN','getId','getCurrentTestState','getJwt','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','../framework/automationFramework.js','BROWSERSTACK_TESTHUB_JWT','onAllTestEvents','./playwrightDriverModule.js','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','retry','testFrameworkData','../TestInfo.js','KEY_TEST_DEFERRED','getTestDetails','testFrameworkState','testhubConfig','1|0|6|3|7|2|4|5','../state/testFrameworkState.js','automationSession','ENV_VAR','frameworkName','O11yHashedID','keys','values','CUCUMBER','version','testHookState','../../../helpers/helper.js','testFrameworkEvent','toString','debug','../../../helpers/testhub/constants','../framework/testFramework.js','YvWxE','cntuj','scWYj','testFrameworkName','TestHubModule','./baseModule','KEY_TEST_FRAMEWORK_VERSION','testInfo','\x20hookState:\x20','abaFv','sendTestFrameworkEvent','test_deferred','getBuildHashedId','../state/automationFrameworkState.js','getTestIdentifierFromTestInfo','26594oFbjDT','../grpcClient.js','15ebUOtv','capabilities','format','CREATE','getTestUUID','name','matchHookRegex','MODULE_NAME','POST','jpPRW','../cliUtils.js','frameworkVersion','6izIIHm','onPageCreate\x20CBTSession\x20payload:\x20','EYDQj','logger','base64','split','244452UTIWKu','Error\x20in\x20sendTestFrameworkEvent:\x20','KEY_SESSION_ID','iEnBw','env','../../../helpers/test-observability/constants.js','../state/hookState.js','from','exports','1940013JvCuqF','../../../helpers/classLogger.js','getContext','getProcessId','onPageCreate','310134RdNrTZ','KEY_CAPABILITIES','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','length','3047760frqXER','getInstance','37219vcueEi','116170hKJrwY'];a83_0x4142=function(){return _0x4d19f7;};return a83_0x4142();}TestHubModule[a83_0x476c35(0x7d)]='TestHubModule',TestHubModule[a83_0x476c35(0xbc)]=a83_0x476c35(0x70),module[a83_0x476c35(0x90)]=TestHubModule;