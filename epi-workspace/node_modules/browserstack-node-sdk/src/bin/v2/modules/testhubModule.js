const a78_0x58e018=a78_0x4528;(function(_0x107f08,_0x5739dc){const _0x2a8654=a78_0x4528,_0x2dd53c=_0x107f08();while(!![]){try{const _0xa52835=parseInt(_0x2a8654(0x1f0))/0x1+-parseInt(_0x2a8654(0x1fd))/0x2*(-parseInt(_0x2a8654(0x20a))/0x3)+-parseInt(_0x2a8654(0x1e7))/0x4+-parseInt(_0x2a8654(0x1df))/0x5*(parseInt(_0x2a8654(0x1f4))/0x6)+-parseInt(_0x2a8654(0x1cc))/0x7*(parseInt(_0x2a8654(0x204))/0x8)+-parseInt(_0x2a8654(0x1e2))/0x9*(-parseInt(_0x2a8654(0x1c5))/0xa)+parseInt(_0x2a8654(0x1ee))/0xb;if(_0xa52835===_0x5739dc)break;else _0x2dd53c['push'](_0x2dd53c['shift']());}catch(_0x41b048){_0x2dd53c['push'](_0x2dd53c['shift']());}}}(a78_0x2622,0x71fe5));const util=require('util'),BaseModule=require('./baseModule'),{createClassLogger}=require(a78_0x58e018(0x1d4)),AutomationFramework=require(a78_0x58e018(0x1bd)),AutomationFrameworkState=require(a78_0x58e018(0x1c8)),HookState=require('../state/hookState.js'),TestFramework=require('../framework/testFramework.js'),TestFrameworkState=require(a78_0x58e018(0x1a7)),PlaywrightDriverModule=require(a78_0x58e018(0x1c7)),TestFrameworkConstants=require(a78_0x58e018(0x1ef)),GrpcClient=require(a78_0x58e018(0x210)),CLIUtils=require(a78_0x58e018(0x1c6)),TestInfo=require(a78_0x58e018(0x1f7)),testHubConstants=require(a78_0x58e018(0x1e1)),BrowserstackCLI=require(a78_0x58e018(0x1c1)),{getPlaywrightProvider}=require('../../../helpers/helper.js'),{getTestRunIdentifier}=require('../../playwright/reporter/pwUtils.js');function a78_0x4528(_0x20b905,_0x2ea5ef){const _0x262250=a78_0x2622();return a78_0x4528=function(_0x45289e,_0x284a92){_0x45289e=_0x45289e-0x1a6;let _0x28b380=_0x262250[_0x45289e];return _0x28b380;},a78_0x4528(_0x20b905,_0x2ea5ef);}class TestHubModule extends BaseModule{[a78_0x58e018(0x1c3)]=createClassLogger(a78_0x58e018(0x202));constructor(_0x5aee3d){const _0x2ce7d0=a78_0x58e018,_0x192a01={};_0x192a01[_0x2ce7d0(0x211)]=_0x2ce7d0(0x1b0),_0x192a01[_0x2ce7d0(0x1d8)]='TestHubModule';const _0x5304c5=_0x192a01,_0x2dc274=_0x5304c5['pHZTX'][_0x2ce7d0(0x1d1)]('|');let _0x495403=0x0;while(!![]){switch(_0x2dc274[_0x495403++]){case'0':process[_0x2ce7d0(0x203)][testHubConstants['ENV_VAR'][_0x2ce7d0(0x1ae)]]=this[_0x2ce7d0(0x1b5)]['getJwt']();continue;case'1':this[_0x2ce7d0(0x1b5)]=_0x5aee3d;continue;case'2':BrowserstackCLI[_0x2ce7d0(0x205)]=this['testhubConfig']['getBuildHashedId']();continue;case'3':process[_0x2ce7d0(0x203)][testHubConstants[_0x2ce7d0(0x1b3)]['BROWSERSTACK_TESTHUB_UUID']]=this['testhubConfig'][_0x2ce7d0(0x1fa)]();continue;case'4':super();continue;case'5':Object[_0x2ce7d0(0x1ea)](TestFrameworkState)[_0x2ce7d0(0x1dc)](_0x5c00a=>{const _0x3fc76a=_0x2ce7d0;Object['values'](HookState)[_0x3fc76a(0x1dc)](_0x1b494b=>{const _0x5a3147=_0x3fc76a;TestFramework[_0x5a3147(0x1ff)](_0x5c00a,_0x1b494b,this['onAllTestEvents'][_0x5a3147(0x1f5)](this));});});continue;case'6':AutomationFramework[_0x2ce7d0(0x1ff)](AutomationFrameworkState[_0x2ce7d0(0x1e6)],HookState[_0x2ce7d0(0x1d2)],this[_0x2ce7d0(0x1f6)][_0x2ce7d0(0x1f5)](this));continue;case'7':this['name']=_0x5304c5['GRfcY'];continue;}break;}}[a78_0x58e018(0x1ec)](){const _0x3e0101=a78_0x58e018;return TestHubModule[_0x3e0101(0x1d9)];}['onAllTestEvents'](_0x2d1044){const _0x23c75d=a78_0x58e018,_0x3dd53c={};_0x3dd53c[_0x23c75d(0x1af)]=function(_0x361284,_0x28a0eb){return _0x361284===_0x28a0eb;};const _0x23414b=_0x3dd53c,_0xc113e8=_0x2d1044['instance'],_0x53d5e5=_0xc113e8[_0x23c75d(0x1f2)]();(_0x23414b['awONz'](_0x53d5e5,TestFrameworkState[_0x23c75d(0x1cd)])||CLIUtils[_0x23c75d(0x1be)](_0x53d5e5['toString']()[_0x23c75d(0x1d1)]('.')[0x1]))&&this['sendTestFrameworkEvent'](_0x2d1044);}async[a78_0x58e018(0x1b1)](_0x276900){const _0x84201c=a78_0x58e018,_0x418b57={'OtKZY':function(_0x31603c,_0x4a7ddc,_0x437f04){return _0x31603c(_0x4a7ddc,_0x437f04);},'VvAho':_0x84201c(0x1ad)};try{const _0x3e12c1=_0x276900[_0x84201c(0x1f1)]['id'],_0x3a1d6a=_0x418b57['OtKZY'](getTestRunIdentifier,_0x276900[_0x84201c(0x1f1)],_0x276900[_0x84201c(0x1b9)][_0x84201c(0x1a6)]),_0xb12aa6=_0x276900[_0x84201c(0x1c0)],_0x334bdf=_0xb12aa6[_0x84201c(0x1ab)](),_0x1b0c4a=_0xb12aa6['getAllData']()[_0x84201c(0x1d7)](_0x3a1d6a);this[_0x84201c(0x1c3)][_0x84201c(0x1c9)](_0x84201c(0x20c)+_0x3e12c1);const {[TestFrameworkConstants[_0x84201c(0x20e)]]:_0xaf6f24='',[TestFrameworkConstants[_0x84201c(0x1d5)]]:_0x1675e3='',[TestFrameworkConstants[_0x84201c(0x1de)]]:_0x1d06f6='',[TestFrameworkConstants['KEY_TEST_ENDED_AT']]:_0x57825a=''}=_0x1b0c4a,_0x5b6a4f=_0xb12aa6[_0x84201c(0x1f2)]()[_0x84201c(0x1e4)]()[_0x84201c(0x1d1)]('.')[0x1],_0x2208e8=_0xb12aa6[_0x84201c(0x207)]()[_0x84201c(0x1e4)]()[_0x84201c(0x1d1)]('.')[0x1],_0x5e201e=global?.['__workerDetails']?.[_0x84201c(0x1ce)]?.[_0x84201c(0x20f)];;const _0x5cc033=_0xb12aa6[_0x84201c(0x1fe)](),_0x4ad231=Buffer['from'](JSON['stringify'](_0x1b0c4a))[_0x84201c(0x1e4)](_0x418b57[_0x84201c(0x1e0)]),_0x2247f6={'hash':_0x334bdf[_0x84201c(0x1dd)](),'threadId':_0x334bdf[_0x84201c(0x1da)]()[_0x84201c(0x1e4)](),'processId':_0x334bdf[_0x84201c(0x1f9)]()[_0x84201c(0x1e4)]()},_0x5b61a4={};_0x5b61a4[_0x84201c(0x1c2)]=_0x5e201e,_0x5b61a4[_0x84201c(0x1a9)]=_0xaf6f24,_0x5b61a4['testFrameworkVersion']=_0x1675e3,_0x5b61a4[_0x84201c(0x200)]=_0x5b6a4f,_0x5b61a4[_0x84201c(0x1a8)]=_0x2208e8,_0x5b61a4[_0x84201c(0x1e5)]=_0x1d06f6,_0x5b61a4[_0x84201c(0x1cf)]=_0x57825a,_0x5b61a4['uuid']=_0x5cc033,_0x5b61a4[_0x84201c(0x206)]=_0x4ad231,_0x5b61a4[_0x84201c(0x1aa)]=_0x2247f6;const _0x17fe3e=_0x5b61a4,_0x21974e=await GrpcClient[_0x84201c(0x1bc)]()[_0x84201c(0x1b6)](_0x17fe3e);this[_0x84201c(0x1c3)]['debug'](_0x84201c(0x1fc)+_0x3e12c1+_0x84201c(0x208)+_0x5b6a4f+'\x20hookState:\x20'+_0x2208e8);}catch(_0x586ee8){this[_0x84201c(0x1c3)][_0x84201c(0x1b4)](_0x84201c(0x1f8)+util['format'](_0x586ee8));}}async[a78_0x58e018(0x1f6)](_0x4fc7c9){const _0x14ce17=a78_0x58e018,_0x41a43e={'fkNjs':function(_0x336cef,_0x558d87){return _0x336cef(_0x558d87);},'hnLTU':_0x14ce17(0x1ad)};try{if(_0x4fc7c9[_0x14ce17(0x201)]){const _0x3e9c1e=_0x4fc7c9[_0x14ce17(0x20b)][_0x14ce17(0x209)];this[_0x14ce17(0x1c3)][_0x14ce17(0x1c9)](_0x14ce17(0x1ac)+_0x3e9c1e);const _0x36abcd=TestInfo[_0x14ce17(0x1e9)](_0x4fc7c9['testInfo'],_0x4fc7c9['testInfo'][_0x14ce17(0x1a6)]),_0xd7dfc2=TestInfo[_0x14ce17(0x1e8)](_0x36abcd),_0x5b3819=TestInfo['getTestDetails'](_0x36abcd),_0x4ff124=_0x4fc7c9['instance'],_0x5d66ac=AutomationFramework['getState'](_0x4ff124,PlaywrightDriverModule[_0x14ce17(0x1db)]),_0x2fd18e=_0x5b3819[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']],_0x480856=_0x5b3819[TestFrameworkConstants[_0x14ce17(0x1d5)]],_0x28638f=TestFrameworkState[_0x14ce17(0x1cd)][_0x14ce17(0x1e4)]()[_0x14ce17(0x1d1)]('.')[0x1],_0x4d1087=HookState[_0x14ce17(0x1d2)]['toString']()[_0x14ce17(0x1d1)]('.')[0x1],_0x3d2930=_0x4ff124['getContext'](),_0x5524d9=AutomationFramework['getState'](_0x4ff124,PlaywrightDriverModule[_0x14ce17(0x1fb)],''),_0x2847c7={'provider':_0x41a43e['fkNjs'](getPlaywrightProvider,_0x5524d9),'frameworkName':_0x4ff124[_0x14ce17(0x1b2)],'frameworkVersion':_0x4ff124[_0x14ce17(0x1e3)],'frameworkSessionId':AutomationFramework['getState'](_0x4ff124,PlaywrightDriverModule['KEY_SESSION_ID'],''),'ref':_0x4ff124[_0x14ce17(0x1fe)](),'hubUrl':_0x5524d9};let _0x403c92=AutomationFramework[_0x14ce17(0x1f3)](_0x4ff124,PlaywrightDriverModule[_0x14ce17(0x1d0)],{});_0x403c92=Buffer['from'](JSON['stringify'](_0x403c92))[_0x14ce17(0x1e4)](_0x41a43e[_0x14ce17(0x1eb)]);const _0x232a33={'hash':_0x3d2930[_0x14ce17(0x1dd)](),'threadId':_0x3d2930[_0x14ce17(0x1da)]()[_0x14ce17(0x1e4)](),'processId':_0x3d2930[_0x14ce17(0x1f9)]()[_0x14ce17(0x1e4)]()},_0xe4662c={};_0xe4662c['platformIndex']=_0x5d66ac,_0xe4662c[_0x14ce17(0x1a9)]=_0x2fd18e,_0xe4662c[_0x14ce17(0x1ba)]=_0x480856,_0xe4662c['testFrameworkState']=_0x28638f,_0xe4662c[_0x14ce17(0x1d6)]=_0x4d1087,_0xe4662c[_0x14ce17(0x1b7)]=_0xd7dfc2,_0xe4662c[_0x14ce17(0x1b8)]=_0x2847c7,_0xe4662c[_0x14ce17(0x1cb)]=_0x403c92,_0xe4662c[_0x14ce17(0x1aa)]=_0x232a33;const _0x4eb095=_0xe4662c;this[_0x14ce17(0x1c3)][_0x14ce17(0x1c9)](_0x14ce17(0x1ca)+util[_0x14ce17(0x1c4)](_0x4eb095));const _0xb15ef2=await GrpcClient[_0x14ce17(0x1bc)]()['testSessionEvent'](_0x4eb095);this['logger'][_0x14ce17(0x1c9)](_0x14ce17(0x20d)+_0x3e9c1e);}}catch(_0x5d9d19){this[_0x14ce17(0x1c3)]['error'](_0x14ce17(0x1bf)+util['format'](_0x5d9d19));}}}TestHubModule[a78_0x58e018(0x1d9)]=a78_0x58e018(0x202),TestHubModule[a78_0x58e018(0x1bb)]=a78_0x58e018(0x1ed),module[a78_0x58e018(0x1d3)]=TestHubModule;function a78_0x2622(){const _0x146394=['20765382IGlGqI','../framework/constants/testFrameworkConstants.js','465857wXtiOq','test','getCurrentTestState','getState','50496SkYrto','bind','onPageCreate','../TestInfo.js','Error\x20in\x20sendTestFrameworkEvent:\x20','getProcessId','getBuildHashedId','KEY_HUB_URL','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','922FoGSDu','getRef','registerObserver','testFrameworkState','page','TestHubModule','env','6548208PRSqzz','O11yHashedID','eventJson','getCurrentHookState','\x20testState:\x20','testId','816AzpBVy','testInfo','sendTestFrameworkEvent\x20testId:\x20','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','KEY_TEST_FRAMEWORK_NAME','parallelIndex','../grpcClient.js','pHZTX','retry','../state/testFrameworkState.js','hookState','testFrameworkName','executionContext','getContext','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','base64','BROWSERSTACK_TESTHUB_JWT','awONz','4|7|1|6|5|0|3|2','sendTestFrameworkEvent','frameworkName','ENV_VAR','error','testhubConfig','testFrameworkEvent','testUuid','automationSession','result','testFrameworkVersion','KEY_TEST_DEFERRED','getInstance','../framework/automationFramework.js','matchHookRegex','Error\x20in\x20sending\x20CBTSession:\x20','instance','../browserstackCLI.js','platformIndex','logger','format','5770bfrxYo','../cliUtils.js','./playwrightDriverModule.js','../state/automationFrameworkState.js','debug','onPageCreate\x20CBTSession\x20payload:\x20','capabilities','7LrBxWw','TEST','workerInfo','endedAt','KEY_CAPABILITIES','split','POST','exports','../../../helpers/classLogger.js','KEY_TEST_FRAMEWORK_VERSION','testHookState','get','GRfcY','MODULE_NAME','getThreadId','KEY_PLATFORM_INDEX','forEach','getId','KEY_TEST_STARTED_AT','170sHqiwS','VvAho','../../../helpers/testhub/constants','36IFLEiG','frameworkVersion','toString','startedAt','CREATE','3638928DRHxZc','getTestUUID','getTestIdentifierFromTestInfo','values','hnLTU','getModuleName','test_deferred'];a78_0x2622=function(){return _0x146394;};return a78_0x2622();}