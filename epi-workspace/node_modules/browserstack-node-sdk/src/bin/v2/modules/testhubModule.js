const a84_0x15f99d=a84_0x1132;(function(_0x1db556,_0x583ed6){const _0x9b4224=a84_0x1132,_0x5c1750=_0x1db556();while(!![]){try{const _0x5955b6=parseInt(_0x9b4224(0x14b))/0x1*(parseInt(_0x9b4224(0x167))/0x2)+-parseInt(_0x9b4224(0x196))/0x3*(-parseInt(_0x9b4224(0x143))/0x4)+parseInt(_0x9b4224(0x15b))/0x5*(-parseInt(_0x9b4224(0x18d))/0x6)+-parseInt(_0x9b4224(0x155))/0x7+-parseInt(_0x9b4224(0x17f))/0x8*(-parseInt(_0x9b4224(0x158))/0x9)+parseInt(_0x9b4224(0x15c))/0xa*(parseInt(_0x9b4224(0x189))/0xb)+-parseInt(_0x9b4224(0x168))/0xc;if(_0x5955b6===_0x583ed6)break;else _0x5c1750['push'](_0x5c1750['shift']());}catch(_0x182609){_0x5c1750['push'](_0x5c1750['shift']());}}}(a84_0x2b0e,0x85032));const util=require(a84_0x15f99d(0x178)),BaseModule=require(a84_0x15f99d(0x177)),{createClassLogger}=require(a84_0x15f99d(0x175)),AutomationFramework=require(a84_0x15f99d(0x182)),AutomationFrameworkState=require(a84_0x15f99d(0x172)),HookState=require('../state/hookState.js'),TestFramework=require(a84_0x15f99d(0x16d)),TestFrameworkState=require(a84_0x15f99d(0x18f)),PlaywrightDriverModule=require(a84_0x15f99d(0x157)),TestFrameworkConstants=require('../framework/constants/testFrameworkConstants.js'),GrpcClient=require(a84_0x15f99d(0x180)),CLIUtils=require(a84_0x15f99d(0x192)),TestInfo=require(a84_0x15f99d(0x152)),testHubConstants=require(a84_0x15f99d(0x1a1)),{FRAMEWORKS}=require('../../../helpers/test-observability/constants.js'),JestUtils=require(a84_0x15f99d(0x13b)),BrowserstackCLI=require(a84_0x15f99d(0x174)),{getPlaywrightProvider}=require('../../../helpers/helper.js');function a84_0x1132(_0x46baf1,_0x2cd5b0){const _0x2b0e19=a84_0x2b0e();return a84_0x1132=function(_0x1132bc,_0x2915f9){_0x1132bc=_0x1132bc-0x139;let _0x559961=_0x2b0e19[_0x1132bc];return _0x559961;},a84_0x1132(_0x46baf1,_0x2cd5b0);}class TestHubModule extends BaseModule{[a84_0x15f99d(0x153)]=createClassLogger(a84_0x15f99d(0x150));constructor(_0x4f47af,_0x236e7b=null){const _0x1568c6=a84_0x15f99d,_0x2f4e93={};_0x2f4e93[_0x1568c6(0x151)]=_0x1568c6(0x16a),_0x2f4e93[_0x1568c6(0x17e)]='TestHubModule';const _0x393d67=_0x2f4e93,_0x24e83c=_0x393d67[_0x1568c6(0x151)]['split']('|');let _0x4b058a=0x0;while(!![]){switch(_0x24e83c[_0x4b058a++]){case'0':Object[_0x1568c6(0x162)](TestFrameworkState)['forEach'](_0x15afbb=>{const _0x20b96d=_0x1568c6;Object[_0x20b96d(0x162)](HookState)[_0x20b96d(0x156)](_0x37e4c9=>{const _0x33c232=_0x20b96d;TestFramework[_0x33c232(0x140)](_0x15afbb,_0x37e4c9,this[_0x33c232(0x198)][_0x33c232(0x173)](this));});});continue;case'1':process[_0x1568c6(0x166)][testHubConstants['ENV_VAR'][_0x1568c6(0x139)]]=this[_0x1568c6(0x15d)][_0x1568c6(0x160)]();continue;case'2':this[_0x1568c6(0x15d)]=_0x4f47af;continue;case'3':BrowserstackCLI[_0x1568c6(0x18e)]=this[_0x1568c6(0x15d)]['getBuildHashedId']();continue;case'4':this[_0x1568c6(0x159)]=new JestUtils();continue;case'5':process[_0x1568c6(0x166)][testHubConstants[_0x1568c6(0x1a0)]['BROWSERSTACK_TESTHUB_JWT']]=this[_0x1568c6(0x15d)][_0x1568c6(0x17c)]();continue;case'6':this[_0x1568c6(0x184)]=_0x393d67[_0x1568c6(0x17e)];continue;case'7':AutomationFramework[_0x1568c6(0x140)](AutomationFrameworkState[_0x1568c6(0x163)],HookState[_0x1568c6(0x169)],this[_0x1568c6(0x16b)][_0x1568c6(0x173)](this));continue;case'8':super(_0x236e7b);continue;}break;}}[a84_0x15f99d(0x19b)](){const _0x5be1cb=a84_0x15f99d;return TestHubModule[_0x5be1cb(0x147)];}['onAllTestEvents'](_0x477110){const _0x3ce66a=a84_0x15f99d,_0x449eea={};_0x449eea[_0x3ce66a(0x148)]=function(_0x1cdc61,_0x32cf2d){return _0x1cdc61===_0x32cf2d;};const _0x59bf0e=_0x449eea,_0x12a391=_0x477110[_0x3ce66a(0x14d)],_0x2139bf=_0x12a391[_0x3ce66a(0x187)]();(_0x59bf0e['rQJWx'](_0x2139bf,TestFrameworkState[_0x3ce66a(0x141)])||CLIUtils['matchHookRegex'](_0x2139bf[_0x3ce66a(0x170)]()['split']('.')[0x1]))&&this[_0x3ce66a(0x15a)](_0x477110);}async[a84_0x15f99d(0x15a)](_0x493b94){const _0x15d7f8=a84_0x15f99d,_0x24bc8c={};_0x24bc8c['Qcppu']=function(_0x4e375c,_0x1bce31){return _0x4e375c===_0x1bce31;},_0x24bc8c[_0x15d7f8(0x176)]=_0x15d7f8(0x19a);const _0x25b18e=_0x24bc8c;try{const _0x132764=BrowserstackCLI[_0x15d7f8(0x145)]()[_0x15d7f8(0x142)]()[_0x15d7f8(0x13a)](_0x493b94);if(!_0x132764||_0x25b18e[_0x15d7f8(0x15e)](Object[_0x15d7f8(0x13c)](_0x132764)['length'],0x0)){this['logger'][_0x15d7f8(0x183)](_0x25b18e[_0x15d7f8(0x176)]);return;}const _0x15e223=await GrpcClient[_0x15d7f8(0x145)]()[_0x15d7f8(0x171)](_0x132764);this['logger'][_0x15d7f8(0x183)](_0x15d7f8(0x16e)+_0x132764[_0x15d7f8(0x186)]+_0x15d7f8(0x13d)+_0x132764['hookState']);}catch(_0x2e59d0){this[_0x15d7f8(0x153)][_0x15d7f8(0x164)](_0x15d7f8(0x17b)+util[_0x15d7f8(0x14a)](_0x2e59d0));}}async[a84_0x15f99d(0x16b)](_0x16af2f){const _0x507b83=a84_0x15f99d,_0x270d81={'ArdHs':function(_0x8aca7e,_0xd5ef63){return _0x8aca7e===_0xd5ef63;},'zahVw':_0x507b83(0x15f),'fZVjj':function(_0x3a8caf,_0x5d7402){return _0x3a8caf(_0x5d7402);},'qBwMS':'base64','ASoAM':function(_0x55169f,_0x54fa23){return _0x55169f===_0x54fa23;}};try{if(_0x16af2f[_0x507b83(0x18b)]){const _0x1ca065=this[_0x507b83(0x19e)](_0x16af2f);this['logger'][_0x507b83(0x183)]('onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20'+_0x1ca065);if(this[_0x507b83(0x16f)]&&_0x270d81['ArdHs'](this['testFrameworkData'][_0x507b83(0x184)],FRAMEWORKS[_0x507b83(0x199)])&&!_0x16af2f['testInfo']){this[_0x507b83(0x153)]['debug'](_0x270d81['zahVw']);return;}let _0x21f944,_0x13a392;if(this[_0x507b83(0x16f)]&&_0x270d81[_0x507b83(0x144)](this[_0x507b83(0x16f)]['name'],FRAMEWORKS[_0x507b83(0x190)]))_0x21f944=_0x1ca065,_0x13a392=TestInfo[_0x507b83(0x18a)](_0x21f944);else this['testFrameworkData']&&_0x270d81['ArdHs'](this[_0x507b83(0x16f)][_0x507b83(0x184)],FRAMEWORKS[_0x507b83(0x199)])?(_0x21f944=this[_0x507b83(0x159)][_0x507b83(0x17d)](_0x16af2f[_0x507b83(0x191)]),this[_0x507b83(0x153)][_0x507b83(0x183)](_0x507b83(0x13e)+_0x21f944)):(_0x21f944=TestInfo[_0x507b83(0x14c)](_0x16af2f['testInfo'],_0x16af2f['testInfo'][_0x507b83(0x149)]),_0x13a392=TestInfo['getTestUUID'](_0x21f944));const _0x4c0671=TestInfo['getTestDetails'](_0x21f944),_0x2a3c3d=_0x16af2f['instance'],_0x2a51dd=AutomationFramework[_0x507b83(0x146)](_0x2a3c3d,PlaywrightDriverModule[_0x507b83(0x13f)]),_0x51e7ed=_0x4c0671?.[TestFrameworkConstants[_0x507b83(0x193)]]||this[_0x507b83(0x16f)]&&this['testFrameworkData']['name'],_0x597824=_0x4c0671?.[TestFrameworkConstants[_0x507b83(0x17a)]]||this[_0x507b83(0x16f)]&&this['testFrameworkData'][_0x507b83(0x165)],_0x89924b=TestFrameworkState['TEST']['toString']()[_0x507b83(0x18c)]('.')[0x1],_0x2f0be6=HookState[_0x507b83(0x169)]['toString']()[_0x507b83(0x18c)]('.')[0x1],_0x21e70d=_0x2a3c3d['getContext'](),_0x32587b=AutomationFramework[_0x507b83(0x146)](_0x2a3c3d,PlaywrightDriverModule[_0x507b83(0x188)],''),_0x680c60={'provider':_0x270d81[_0x507b83(0x185)](getPlaywrightProvider,_0x32587b),'frameworkName':_0x2a3c3d['frameworkName'],'frameworkVersion':_0x2a3c3d['frameworkVersion'],'frameworkSessionId':AutomationFramework[_0x507b83(0x146)](_0x2a3c3d,PlaywrightDriverModule[_0x507b83(0x14f)],''),'ref':_0x2a3c3d[_0x507b83(0x181)](),'hubUrl':_0x32587b};let _0x549280=AutomationFramework[_0x507b83(0x146)](_0x2a3c3d,PlaywrightDriverModule[_0x507b83(0x161)],{});_0x549280=Buffer['from'](JSON[_0x507b83(0x14e)](_0x549280))[_0x507b83(0x170)](_0x270d81[_0x507b83(0x194)]);const _0x5ef495={'hash':_0x21e70d['getId'](),'threadId':_0x21e70d[_0x507b83(0x19f)]()[_0x507b83(0x170)](),'processId':_0x21e70d['getProcessId']()['toString']()},_0x48fee7={};_0x48fee7['test_identifier']=_0x21f944;const _0x505066={};_0x505066[_0x507b83(0x19c)]=_0x13a392;const _0x112336={'platformIndex':_0x2a51dd,'testFrameworkName':_0x51e7ed,'testFrameworkVersion':_0x597824,'testFrameworkState':_0x89924b,'testHookState':_0x2f0be6,...this[_0x507b83(0x16f)]&&_0x270d81['ArdHs'](this['testFrameworkData'][_0x507b83(0x184)],FRAMEWORKS[_0x507b83(0x199)])?_0x48fee7:_0x505066,'automationSession':_0x680c60,'capabilities':_0x549280,'executionContext':_0x5ef495};this[_0x507b83(0x153)][_0x507b83(0x183)](_0x507b83(0x16c)+util['format'](_0x112336));const _0x4c8c69=await GrpcClient['getInstance']()['testSessionEvent'](_0x112336);this['logger'][_0x507b83(0x183)](_0x507b83(0x179)+_0x1ca065+(this[_0x507b83(0x16f)]&&_0x270d81[_0x507b83(0x19d)](this[_0x507b83(0x16f)][_0x507b83(0x184)],FRAMEWORKS[_0x507b83(0x199)])?_0x507b83(0x197)+_0x21f944:''));}}catch(_0x42dc59){this[_0x507b83(0x153)][_0x507b83(0x164)](_0x507b83(0x154)+util[_0x507b83(0x14a)](_0x42dc59));}}}TestHubModule[a84_0x15f99d(0x147)]='TestHubModule',TestHubModule['KEY_TEST_DEFERRED']=a84_0x15f99d(0x195),module['exports']=TestHubModule;function a84_0x2b0e(){const _0x2aaca2=['CUCUMBER','testInfo','../cliUtils.js','KEY_TEST_FRAMEWORK_NAME','qBwMS','test_deferred','956022IoJnSi',',\x20test_identifier:\x20','onAllTestEvents','JEST','sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','getModuleName','testUuid','ASoAM','getTestId','getThreadId','ENV_VAR','../../../helpers/testhub/constants','BROWSERSTACK_TESTHUB_UUID','createTestFrameworkEventPayload','../utils/jest-utils.js','keys','\x20hookState:\x20','onPageCreate:\x20Recreated\x20Jest\x20testIdentifier:\x20','KEY_PLATFORM_INDEX','registerObserver','TEST','getTestFramework','12JUjNLX','ArdHs','getInstance','getState','MODULE_NAME','rQJWx','retry','format','3DfgImK','getTestIdentifierFromTestInfo','instance','stringify','KEY_SESSION_ID','TestHubModule','jBJWj','../TestInfo.js','logger','Error\x20in\x20sending\x20CBTSession:\x20','1451583tBXWte','forEach','./playwrightDriverModule.js','9ZxxBWr','jestUtils','sendTestFrameworkEvent','44945FRXvOA','318030gDwCYP','testhubConfig','Qcppu','onPageCreate:\x20Skipping\x20CBT\x20session\x20event\x20-\x20no\x20testInfo\x20(page\x20created\x20outside\x20test\x20context)','getBuildHashedId','KEY_CAPABILITIES','values','CREATE','error','version','env','67806SRZamo','2826156TeXbEK','POST','8|6|2|4|7|0|5|1|3','onPageCreate','onPageCreate\x20CBTSession\x20payload:\x20','../framework/testFramework.js','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','testFrameworkData','toString','testFrameworkEvent','../state/automationFrameworkState.js','bind','../browserstackCLI.js','../../../helpers/classLogger.js','dnWMZ','./baseModule','util','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','KEY_TEST_FRAMEWORK_VERSION','Error\x20in\x20sendTestFrameworkEvent:\x20','getJwt','recreateIdentifierFromTestInfo','dhqQz','4866376WAXsBe','../grpcClient.js','getRef','../framework/automationFramework.js','debug','name','fZVjj','testFrameworkState','getCurrentTestState','KEY_HUB_URL','11UtcHnz','getTestUUID','page','split','474zZErpQ','O11yHashedID','../state/testFrameworkState.js'];a84_0x2b0e=function(){return _0x2aaca2;};return a84_0x2b0e();}