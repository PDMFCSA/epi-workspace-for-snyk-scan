const a76_0x13e219=a76_0x2041;(function(_0xeaf0d4,_0xd2a912){const _0x7dcf06=a76_0x2041,_0x201754=_0xeaf0d4();while(!![]){try{const _0x3ab98d=-parseInt(_0x7dcf06(0xd2))/0x1+parseInt(_0x7dcf06(0x108))/0x2*(-parseInt(_0x7dcf06(0xf9))/0x3)+parseInt(_0x7dcf06(0xb9))/0x4*(-parseInt(_0x7dcf06(0xc6))/0x5)+-parseInt(_0x7dcf06(0x10a))/0x6*(parseInt(_0x7dcf06(0xea))/0x7)+parseInt(_0x7dcf06(0xd1))/0x8*(-parseInt(_0x7dcf06(0xc2))/0x9)+-parseInt(_0x7dcf06(0xd9))/0xa*(-parseInt(_0x7dcf06(0xff))/0xb)+-parseInt(_0x7dcf06(0xfe))/0xc*(-parseInt(_0x7dcf06(0xe9))/0xd);if(_0x3ab98d===_0xd2a912)break;else _0x201754['push'](_0x201754['shift']());}catch(_0x3aabcb){_0x201754['push'](_0x201754['shift']());}}}(a76_0x22c7,0x9c038));const util=require(a76_0x13e219(0xcc)),BaseModule=require('./baseModule'),{createClassLogger}=require(a76_0x13e219(0xf6)),AutomationFramework=require(a76_0x13e219(0xb6)),AutomationFrameworkState=require('../state/automationFrameworkState.js'),HookState=require(a76_0x13e219(0xb4)),TestFramework=require(a76_0x13e219(0xee)),TestFrameworkState=require(a76_0x13e219(0xbf)),PlaywrightDriverModule=require('./playwrightDriverModule.js'),TestFrameworkConstants=require(a76_0x13e219(0x107)),GrpcClient=require(a76_0x13e219(0xdc)),CLIUtils=require('../cliUtils.js'),TestInfo=require(a76_0x13e219(0xde)),testHubConstants=require(a76_0x13e219(0xda)),BrowserstackCLI=require(a76_0x13e219(0xbd)),{getPlaywrightProvider}=require(a76_0x13e219(0x10d));class TestHubModule extends BaseModule{[a76_0x13e219(0x105)]=createClassLogger(a76_0x13e219(0x113));constructor(_0x4e68fa){const _0x23b429=a76_0x13e219,_0x598678={};_0x598678[_0x23b429(0xd0)]=_0x23b429(0xf1),_0x598678[_0x23b429(0xc8)]=_0x23b429(0x113);const _0x4afaff=_0x598678,_0x477f67=_0x4afaff['RmEhm'][_0x23b429(0xcd)]('|');let _0x3d3f1e=0x0;while(!![]){switch(_0x477f67[_0x3d3f1e++]){case'0':process[_0x23b429(0xb2)][testHubConstants[_0x23b429(0xb5)]['BROWSERSTACK_TESTHUB_UUID']]=this[_0x23b429(0x106)][_0x23b429(0xf4)]();continue;case'1':Object[_0x23b429(0xfd)](TestFrameworkState)['forEach'](_0x54058d=>{const _0x3f09e9=_0x23b429;Object[_0x3f09e9(0xfd)](HookState)[_0x3f09e9(0xba)](_0x525b7d=>{const _0x4820fb=_0x3f09e9;TestFramework[_0x4820fb(0xc3)](_0x54058d,_0x525b7d,this[_0x4820fb(0xf5)][_0x4820fb(0xf8)](this));});});continue;case'2':BrowserstackCLI['O11yHashedID']=this[_0x23b429(0x106)][_0x23b429(0xf4)]();continue;case'3':this[_0x23b429(0x10e)]=_0x4afaff[_0x23b429(0xc8)];continue;case'4':process[_0x23b429(0xb2)][testHubConstants[_0x23b429(0xb5)]['BROWSERSTACK_TESTHUB_JWT']]=this[_0x23b429(0x106)]['getJwt']();continue;case'5':AutomationFramework['registerObserver'](AutomationFrameworkState['CREATE'],HookState['POST'],this[_0x23b429(0xc1)]['bind'](this));continue;case'6':this[_0x23b429(0x106)]=_0x4e68fa;continue;case'7':super();continue;}break;}}[a76_0x13e219(0x101)](){return TestHubModule['MODULE_NAME'];}[a76_0x13e219(0xf5)](_0x39a6e9){const _0x4eff28=a76_0x13e219,_0x3be73a={};_0x3be73a['eBWdt']=function(_0x4baea7,_0x2b6bf5){return _0x4baea7===_0x2b6bf5;};const _0x506805=_0x3be73a,_0x395053=_0x39a6e9[_0x4eff28(0xcf)],_0x1149b8=_0x395053[_0x4eff28(0xd6)]();(_0x506805[_0x4eff28(0xe2)](_0x1149b8,TestFrameworkState[_0x4eff28(0xc4)])||CLIUtils[_0x4eff28(0xeb)](_0x1149b8['toString']()[_0x4eff28(0xcd)]('.')[0x1]))&&this[_0x4eff28(0xdd)](_0x39a6e9);}async[a76_0x13e219(0xdd)](_0x30cfe0){const _0x2f7f62=a76_0x13e219,_0xf4b372={};_0xf4b372[_0x2f7f62(0x110)]=_0x2f7f62(0xe0);const _0x592014=_0xf4b372;try{const _0x5bb76d=_0x30cfe0[_0x2f7f62(0xb3)]['id'],_0x29c4ba=_0x30cfe0['instance'],_0x475f53=_0x29c4ba['getContext'](),_0x3acb48=_0x29c4ba[_0x2f7f62(0xe1)]()[_0x2f7f62(0xe8)](_0x5bb76d);this[_0x2f7f62(0x105)][_0x2f7f62(0xdb)](_0x2f7f62(0xca)+_0x5bb76d);const {[TestFrameworkConstants[_0x2f7f62(0x10c)]]:_0x2e2a0e='',[TestFrameworkConstants[_0x2f7f62(0xc9)]]:_0x482efb='',[TestFrameworkConstants['KEY_TEST_STARTED_AT']]:_0x426695='',[TestFrameworkConstants[_0x2f7f62(0xaf)]]:_0xcfcfab=''}=_0x3acb48,_0xfea398=_0x29c4ba[_0x2f7f62(0xd6)]()[_0x2f7f62(0xc0)]()['split']('.')[0x1],_0x3039ba=_0x29c4ba['getCurrentHookState']()[_0x2f7f62(0xc0)]()[_0x2f7f62(0xcd)]('.')[0x1],_0x4c3527=global?.[_0x2f7f62(0xd8)]?.['workerInfo']?.[_0x2f7f62(0xae)];;const _0x1ee8e6=_0x29c4ba[_0x2f7f62(0xfb)](),_0x346e27=Buffer[_0x2f7f62(0xf7)](JSON[_0x2f7f62(0xb1)](_0x3acb48))['toString'](_0x592014[_0x2f7f62(0x110)]),_0x28a9fe={'hash':_0x475f53[_0x2f7f62(0x109)](),'threadId':_0x475f53[_0x2f7f62(0xb8)]()[_0x2f7f62(0xc0)](),'processId':_0x475f53['getProcessId']()[_0x2f7f62(0xc0)]()},_0x461921={};_0x461921[_0x2f7f62(0xc5)]=_0x4c3527,_0x461921[_0x2f7f62(0x10f)]=_0x2e2a0e,_0x461921['testFrameworkVersion']=_0x482efb,_0x461921[_0x2f7f62(0xec)]=_0xfea398,_0x461921[_0x2f7f62(0xf2)]=_0x3039ba,_0x461921[_0x2f7f62(0xbb)]=_0x426695,_0x461921['endedAt']=_0xcfcfab,_0x461921[_0x2f7f62(0xed)]=_0x1ee8e6,_0x461921[_0x2f7f62(0xe7)]=_0x346e27,_0x461921[_0x2f7f62(0xf3)]=_0x28a9fe;const _0xa2030d=_0x461921,_0x457227=await GrpcClient['getInstance']()[_0x2f7f62(0xd4)](_0xa2030d);this[_0x2f7f62(0x105)][_0x2f7f62(0xdb)]('sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20'+_0x5bb76d+_0x2f7f62(0xe4)+_0xfea398+_0x2f7f62(0xce)+_0x3039ba);}catch(_0x1c126b){this['logger']['error'](_0x2f7f62(0xcb)+util['format'](_0x1c126b));}}async[a76_0x13e219(0xc1)](_0x52b9c0){const _0x225aaa=a76_0x13e219,_0x2c2245={'iAIRx':function(_0x1a6825,_0x45e1a7){return _0x1a6825(_0x45e1a7);},'KViEx':'base64'};try{if(_0x52b9c0[_0x225aaa(0xc7)]){const _0xbee42c=_0x52b9c0['testInfo']['testId'];this['logger'][_0x225aaa(0xdb)](_0x225aaa(0x10b)+_0xbee42c);const _0x331291=TestInfo['getTestUUID'](_0xbee42c),_0x340c44=TestInfo[_0x225aaa(0xb7)](_0xbee42c),_0x1ba3e9=_0x52b9c0[_0x225aaa(0xcf)],_0x2c1396=AutomationFramework[_0x225aaa(0xf0)](_0x1ba3e9,PlaywrightDriverModule[_0x225aaa(0x100)]),_0x4b5bc1=_0x340c44[TestFrameworkConstants[_0x225aaa(0x10c)]],_0x33a049=_0x340c44[TestFrameworkConstants[_0x225aaa(0xc9)]],_0xfa075a=TestFrameworkState[_0x225aaa(0xc4)][_0x225aaa(0xc0)]()[_0x225aaa(0xcd)]('.')[0x1],_0xf04bfa=HookState[_0x225aaa(0x104)][_0x225aaa(0xc0)]()[_0x225aaa(0xcd)]('.')[0x1],_0x5e20ad=_0x1ba3e9[_0x225aaa(0xfa)](),_0x53b013=AutomationFramework[_0x225aaa(0xf0)](_0x1ba3e9,PlaywrightDriverModule['KEY_HUB_URL'],''),_0x539b24={'provider':_0x2c2245['iAIRx'](getPlaywrightProvider,_0x53b013),'frameworkName':_0x1ba3e9['frameworkName'],'frameworkVersion':_0x1ba3e9['frameworkVersion'],'frameworkSessionId':AutomationFramework['getState'](_0x1ba3e9,PlaywrightDriverModule[_0x225aaa(0xfc)],''),'ref':_0x1ba3e9[_0x225aaa(0xfb)](),'hubUrl':_0x53b013};let _0x37124b=AutomationFramework[_0x225aaa(0xf0)](_0x1ba3e9,PlaywrightDriverModule[_0x225aaa(0xe5)],{});_0x37124b=Buffer[_0x225aaa(0xf7)](JSON['stringify'](_0x37124b))[_0x225aaa(0xc0)](_0x2c2245[_0x225aaa(0xd7)]);const _0x29b6ca={'hash':_0x5e20ad['getId'](),'threadId':_0x5e20ad[_0x225aaa(0xb8)]()[_0x225aaa(0xc0)](),'processId':_0x5e20ad['getProcessId']()[_0x225aaa(0xc0)]()},_0x465d1c={};_0x465d1c[_0x225aaa(0xc5)]=_0x2c1396,_0x465d1c[_0x225aaa(0x10f)]=_0x4b5bc1,_0x465d1c[_0x225aaa(0x102)]=_0x33a049,_0x465d1c[_0x225aaa(0xec)]=_0xfa075a,_0x465d1c['testHookState']=_0xf04bfa,_0x465d1c[_0x225aaa(0xd5)]=_0x331291,_0x465d1c[_0x225aaa(0xbc)]=_0x539b24,_0x465d1c['capabilities']=_0x37124b,_0x465d1c[_0x225aaa(0xf3)]=_0x29b6ca;const _0xab53aa=_0x465d1c;this[_0x225aaa(0x105)][_0x225aaa(0xdb)](_0x225aaa(0x112)+util[_0x225aaa(0xe3)](_0xab53aa));const _0x1827f0=await GrpcClient[_0x225aaa(0xdf)]()[_0x225aaa(0x103)](_0xab53aa);this['logger']['debug'](_0x225aaa(0x111)+_0xbee42c);}}catch(_0x5c20ad){this[_0x225aaa(0x105)][_0x225aaa(0xef)](_0x225aaa(0xbe)+util[_0x225aaa(0xe3)](_0x5c20ad));}}}function a76_0x2041(_0x2fbf53,_0x4430fe){const _0x22c761=a76_0x22c7();return a76_0x2041=function(_0x20417b,_0x495ba4){_0x20417b=_0x20417b-0xae;let _0x32e7ef=_0x22c761[_0x20417b];return _0x32e7ef;},a76_0x2041(_0x2fbf53,_0x4430fe);}TestHubModule[a76_0x13e219(0xb0)]='TestHubModule',TestHubModule['KEY_TEST_DEFERRED']=a76_0x13e219(0xe6),module[a76_0x13e219(0xd3)]=TestHubModule;function a76_0x22c7(){const _0x1adcf0=['env','test','../state/hookState.js','ENV_VAR','../framework/automationFramework.js','getTestDetails','getThreadId','4Jdsazp','forEach','startedAt','automationSession','../browserstackCLI.js','Error\x20in\x20sending\x20CBTSession:\x20','../state/testFrameworkState.js','toString','onPageCreate','2109699GNHzBp','registerObserver','TEST','platformIndex','3055830QRmmcl','page','UGXve','KEY_TEST_FRAMEWORK_VERSION','sendTestFrameworkEvent\x20testId:\x20','Error\x20in\x20sendTestFrameworkEvent:\x20','util','split','\x20hookState:\x20','instance','RmEhm','24xVvcJO','576259rJdKZv','exports','testFrameworkEvent','testUuid','getCurrentTestState','KViEx','__workerDetails','9515020rHIirh','../../../helpers/testhub/constants','debug','../grpcClient.js','sendTestFrameworkEvent','../TestInfo.js','getInstance','base64','getAllData','eBWdt','format','\x20testState:\x20','KEY_CAPABILITIES','test_deferred','eventJson','get','39FEPRyT','7uhSTNU','matchHookRegex','testFrameworkState','uuid','../framework/testFramework.js','error','getState','7|3|6|5|1|4|0|2','hookState','executionContext','getBuildHashedId','onAllTestEvents','../../../helpers/classLogger.js','from','bind','978jQARBh','getContext','getRef','KEY_SESSION_ID','values','10517964nmBBLI','11yudyAX','KEY_PLATFORM_INDEX','getModuleName','testFrameworkVersion','testSessionEvent','POST','logger','testhubConfig','../framework/constants/testFrameworkConstants.js','6302mqiMuj','getId','144462Zlyogw','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','KEY_TEST_FRAMEWORK_NAME','../../../helpers/helper.js','name','testFrameworkName','AZacK','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','onPageCreate\x20CBTSession\x20payload:\x20','TestHubModule','parallelIndex','KEY_TEST_ENDED_AT','MODULE_NAME','stringify'];a76_0x22c7=function(){return _0x1adcf0;};return a76_0x22c7();}