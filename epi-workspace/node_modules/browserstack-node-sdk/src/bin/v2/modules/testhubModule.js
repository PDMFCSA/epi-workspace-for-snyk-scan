const a76_0x2da36f=a76_0x3946;(function(_0x212751,_0x8431de){const _0x210820=a76_0x3946,_0xc839b0=_0x212751();while(!![]){try{const _0x261fde=parseInt(_0x210820(0x11b))/0x1+-parseInt(_0x210820(0x11d))/0x2*(-parseInt(_0x210820(0xcf))/0x3)+parseInt(_0x210820(0xc9))/0x4*(parseInt(_0x210820(0xf4))/0x5)+parseInt(_0x210820(0x124))/0x6*(-parseInt(_0x210820(0xd7))/0x7)+parseInt(_0x210820(0xcc))/0x8+-parseInt(_0x210820(0x118))/0x9+-parseInt(_0x210820(0xe9))/0xa;if(_0x261fde===_0x8431de)break;else _0xc839b0['push'](_0xc839b0['shift']());}catch(_0x9382e4){_0xc839b0['push'](_0xc839b0['shift']());}}}(a76_0x26f6,0xda795));function a76_0x3946(_0x352270,_0x468fff){const _0x26f641=a76_0x26f6();return a76_0x3946=function(_0x394618,_0x4eb811){_0x394618=_0x394618-0xb8;let _0x279f91=_0x26f641[_0x394618];return _0x279f91;},a76_0x3946(_0x352270,_0x468fff);}const util=require(a76_0x2da36f(0x10d)),BaseModule=require(a76_0x2da36f(0xbe)),{createClassLogger}=require(a76_0x2da36f(0x109)),AutomationFramework=require(a76_0x2da36f(0xd9)),AutomationFrameworkState=require(a76_0x2da36f(0xcd)),HookState=require(a76_0x2da36f(0x10a)),TestFramework=require(a76_0x2da36f(0x11c)),TestFrameworkState=require(a76_0x2da36f(0xd0)),PlaywrightDriverModule=require(a76_0x2da36f(0x116)),TestFrameworkConstants=require(a76_0x2da36f(0xc2)),GrpcClient=require(a76_0x2da36f(0xd6)),CLIUtils=require(a76_0x2da36f(0xd5)),TestInfo=require(a76_0x2da36f(0xe7)),testHubConstants=require('../../../helpers/testhub/constants'),BrowserstackCLI=require(a76_0x2da36f(0xc3)),{getPlaywrightProvider}=require(a76_0x2da36f(0xff));class TestHubModule extends BaseModule{[a76_0x2da36f(0xc7)]=createClassLogger(a76_0x2da36f(0x121));constructor(_0x4f5764){const _0x256951=a76_0x2da36f,_0x144c79={};_0x144c79[_0x256951(0x104)]=_0x256951(0x106),_0x144c79[_0x256951(0x101)]=_0x256951(0x121);const _0x86d716=_0x144c79,_0x1598e8=_0x86d716[_0x256951(0x104)][_0x256951(0x110)]('|');let _0x4e406e=0x0;while(!![]){switch(_0x1598e8[_0x4e406e++]){case'0':process[_0x256951(0xdd)][testHubConstants['ENV_VAR'][_0x256951(0xe0)]]=this['testhubConfig']['getJwt']();continue;case'1':this[_0x256951(0x11f)]=_0x86d716[_0x256951(0x101)];continue;case'2':super();continue;case'3':BrowserstackCLI[_0x256951(0xed)]=this[_0x256951(0xc1)]['getBuildHashedId']();continue;case'4':process[_0x256951(0xdd)][testHubConstants[_0x256951(0xfa)][_0x256951(0xc8)]]=this[_0x256951(0xc1)][_0x256951(0x105)]();continue;case'5':this[_0x256951(0xc1)]=_0x4f5764;continue;case'6':Object[_0x256951(0xbf)](TestFrameworkState)[_0x256951(0x107)](_0x444d98=>{const _0x587391=_0x256951;Object[_0x587391(0xbf)](HookState)[_0x587391(0x107)](_0x165eaa=>{const _0x2258bf=_0x587391;TestFramework[_0x2258bf(0x103)](_0x444d98,_0x165eaa,this['onAllTestEvents'][_0x2258bf(0xd1)](this));});});continue;case'7':AutomationFramework[_0x256951(0x103)](AutomationFrameworkState[_0x256951(0xee)],HookState[_0x256951(0xea)],this['onPageCreate'][_0x256951(0xd1)](this));continue;}break;}}['getModuleName'](){const _0x583622=a76_0x2da36f;return TestHubModule[_0x583622(0x10b)];}[a76_0x2da36f(0xcb)](_0x361807){const _0x2205df=a76_0x2da36f,_0x3c43cd={};_0x3c43cd['UCmhC']=function(_0x2cfdb0,_0x512c9d){return _0x2cfdb0===_0x512c9d;};const _0x1c1a77=_0x3c43cd,_0x1c0743=_0x361807['instance'],_0x202c7a=_0x1c0743[_0x2205df(0xd2)]();(_0x1c1a77[_0x2205df(0xbd)](_0x202c7a,TestFrameworkState[_0x2205df(0xe1)])||CLIUtils['matchHookRegex'](_0x202c7a[_0x2205df(0xb8)]()[_0x2205df(0x110)]('.')[0x1]))&&this[_0x2205df(0x115)](_0x361807);}async[a76_0x2da36f(0x115)](_0x5a89e7){const _0x4bf429=a76_0x2da36f,_0x4b708f={};_0x4b708f['lSPPX']=_0x4bf429(0x117);const _0x48d888=_0x4b708f;try{const _0x29d34b=_0x5a89e7['test']['id'],_0x4519b4=_0x5a89e7[_0x4bf429(0x11a)],_0x19250a=_0x4519b4[_0x4bf429(0x113)](),_0x4ed0e9=_0x4519b4['getAllData']()[_0x4bf429(0xe2)](_0x29d34b);this[_0x4bf429(0xc7)][_0x4bf429(0xf0)](_0x4bf429(0xfe)+_0x29d34b);const {[TestFrameworkConstants[_0x4bf429(0xd3)]]:_0x34a973='',[TestFrameworkConstants[_0x4bf429(0xbb)]]:_0x25b9cf='',[TestFrameworkConstants['KEY_TEST_STARTED_AT']]:_0x4db80f='',[TestFrameworkConstants[_0x4bf429(0xce)]]:_0x56e048=''}=_0x4ed0e9,_0x1a3dae=_0x4519b4[_0x4bf429(0xd2)]()[_0x4bf429(0xb8)]()[_0x4bf429(0x110)]('.')[0x1],_0x4607c1=_0x4519b4[_0x4bf429(0xf2)]()[_0x4bf429(0xb8)]()['split']('.')[0x1],_0x137e31=global?.[_0x4bf429(0xf7)]?.[_0x4bf429(0x10c)]?.[_0x4bf429(0xe5)];;const _0x593a2c=_0x4519b4[_0x4bf429(0xf5)](),_0x38a8f6=Buffer[_0x4bf429(0xe4)](JSON[_0x4bf429(0xc6)](_0x4ed0e9))['toString'](_0x48d888[_0x4bf429(0x123)]),_0x305fc4={'hash':_0x19250a['getId'](),'threadId':_0x19250a[_0x4bf429(0x119)]()[_0x4bf429(0xb8)](),'processId':_0x19250a[_0x4bf429(0x120)]()['toString']()},_0x30b594={};_0x30b594['platformIndex']=_0x137e31,_0x30b594[_0x4bf429(0xfc)]=_0x34a973,_0x30b594[_0x4bf429(0xe8)]=_0x25b9cf,_0x30b594[_0x4bf429(0x100)]=_0x1a3dae,_0x30b594[_0x4bf429(0xc0)]=_0x4607c1,_0x30b594['startedAt']=_0x4db80f,_0x30b594[_0x4bf429(0x122)]=_0x56e048,_0x30b594[_0x4bf429(0xba)]=_0x593a2c,_0x30b594['eventJson']=_0x38a8f6,_0x30b594[_0x4bf429(0xef)]=_0x305fc4;const _0x3967e0=_0x30b594,_0x5df3aa=await GrpcClient['getInstance']()[_0x4bf429(0xf1)](_0x3967e0);this['logger']['debug'](_0x4bf429(0xf9)+_0x29d34b+_0x4bf429(0x112)+_0x1a3dae+_0x4bf429(0xdf)+_0x4607c1);}catch(_0x168c07){this[_0x4bf429(0xc7)][_0x4bf429(0x114)](_0x4bf429(0xc4)+util[_0x4bf429(0xf6)](_0x168c07));}}async[a76_0x2da36f(0x111)](_0x5ba8d3){const _0x10681d=a76_0x2da36f,_0x25cd11={'lOuKb':function(_0x4c4da9,_0x561136){return _0x4c4da9(_0x561136);},'IxtFH':'base64'};try{if(_0x5ba8d3[_0x10681d(0xec)]){const _0x4ca4a5=_0x5ba8d3['testInfo'][_0x10681d(0xde)];this[_0x10681d(0xc7)]['debug']('onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20'+_0x4ca4a5);const _0x4d5a23=TestInfo[_0x10681d(0x11e)](_0x4ca4a5),_0x49994c=TestInfo[_0x10681d(0x10f)](_0x4ca4a5),_0x168496=_0x5ba8d3['instance'],_0x5511fa=AutomationFramework[_0x10681d(0xe3)](_0x168496,PlaywrightDriverModule[_0x10681d(0xb9)]),_0x39da7a=_0x49994c[TestFrameworkConstants[_0x10681d(0xd3)]],_0x5253ff=_0x49994c[TestFrameworkConstants[_0x10681d(0xbb)]],_0x22d2ab=TestFrameworkState[_0x10681d(0xe1)][_0x10681d(0xb8)]()[_0x10681d(0x110)]('.')[0x1],_0x3910b1=HookState[_0x10681d(0xea)][_0x10681d(0xb8)]()['split']('.')[0x1],_0x29fe5b=_0x168496[_0x10681d(0x113)](),_0x5211d7=AutomationFramework[_0x10681d(0xe3)](_0x168496,PlaywrightDriverModule[_0x10681d(0xf3)],''),_0x1b9472={'provider':_0x25cd11[_0x10681d(0xd8)](getPlaywrightProvider,_0x5211d7),'frameworkName':_0x168496[_0x10681d(0xf8)],'frameworkVersion':_0x168496[_0x10681d(0xda)],'frameworkSessionId':AutomationFramework[_0x10681d(0xe3)](_0x168496,PlaywrightDriverModule[_0x10681d(0xbc)],''),'ref':_0x168496[_0x10681d(0xf5)](),'hubUrl':_0x5211d7};let _0x4442ed=AutomationFramework[_0x10681d(0xe3)](_0x168496,PlaywrightDriverModule['KEY_CAPABILITIES'],{});_0x4442ed=Buffer['from'](JSON[_0x10681d(0xc6)](_0x4442ed))[_0x10681d(0xb8)](_0x25cd11[_0x10681d(0xeb)]);const _0x8ad65={'hash':_0x29fe5b[_0x10681d(0xdb)](),'threadId':_0x29fe5b[_0x10681d(0x119)]()[_0x10681d(0xb8)](),'processId':_0x29fe5b['getProcessId']()[_0x10681d(0xb8)]()},_0x2bcb50={};_0x2bcb50[_0x10681d(0xe6)]=_0x5511fa,_0x2bcb50['testFrameworkName']=_0x39da7a,_0x2bcb50[_0x10681d(0xe8)]=_0x5253ff,_0x2bcb50[_0x10681d(0x100)]=_0x22d2ab,_0x2bcb50[_0x10681d(0x10e)]=_0x3910b1,_0x2bcb50[_0x10681d(0xc5)]=_0x4d5a23,_0x2bcb50[_0x10681d(0xdc)]=_0x1b9472,_0x2bcb50['capabilities']=_0x4442ed,_0x2bcb50[_0x10681d(0xef)]=_0x8ad65;const _0x902937=_0x2bcb50;this[_0x10681d(0xc7)]['debug'](_0x10681d(0x108)+util[_0x10681d(0xf6)](_0x902937));const _0x5de17b=await GrpcClient[_0x10681d(0x102)]()[_0x10681d(0xd4)](_0x902937);this[_0x10681d(0xc7)]['debug'](_0x10681d(0xca)+_0x4ca4a5);}}catch(_0x320174){this[_0x10681d(0xc7)][_0x10681d(0x114)]('Error\x20in\x20sending\x20CBTSession:\x20'+util[_0x10681d(0xf6)](_0x320174));}}}TestHubModule[a76_0x2da36f(0x10b)]=a76_0x2da36f(0x121),TestHubModule[a76_0x2da36f(0xfd)]=a76_0x2da36f(0x125),module[a76_0x2da36f(0xfb)]=TestHubModule;function a76_0x26f6(){const _0x196fdb=['../state/hookState.js','MODULE_NAME','workerInfo','util','testHookState','getTestDetails','split','onPageCreate','\x20testState:\x20','getContext','error','sendTestFrameworkEvent','./playwrightDriverModule.js','base64','7332885lgUdbp','getThreadId','instance','953776DNhIaL','../framework/testFramework.js','2RoJwSh','getTestUUID','name','getProcessId','TestHubModule','endedAt','lSPPX','3810GjSKjL','test_deferred','toString','KEY_PLATFORM_INDEX','uuid','KEY_TEST_FRAMEWORK_VERSION','KEY_SESSION_ID','UCmhC','./baseModule','values','hookState','testhubConfig','../framework/constants/testFrameworkConstants.js','../browserstackCLI.js','Error\x20in\x20sendTestFrameworkEvent:\x20','testUuid','stringify','logger','BROWSERSTACK_TESTHUB_UUID','12lXVqhd','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','onAllTestEvents','13257056EelWvQ','../state/automationFrameworkState.js','KEY_TEST_ENDED_AT','15951QbSEpv','../state/testFrameworkState.js','bind','getCurrentTestState','KEY_TEST_FRAMEWORK_NAME','testSessionEvent','../cliUtils.js','../grpcClient.js','1505EMqcMS','lOuKb','../framework/automationFramework.js','frameworkVersion','getId','automationSession','env','testId','\x20hookState:\x20','BROWSERSTACK_TESTHUB_JWT','TEST','get','getState','from','parallelIndex','platformIndex','../TestInfo.js','testFrameworkVersion','22935260JTyGkn','POST','IxtFH','page','O11yHashedID','CREATE','executionContext','debug','testFrameworkEvent','getCurrentHookState','KEY_HUB_URL','2539100xnvssl','getRef','format','__workerDetails','frameworkName','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','ENV_VAR','exports','testFrameworkName','KEY_TEST_DEFERRED','sendTestFrameworkEvent\x20testId:\x20','../../../helpers/helper.js','testFrameworkState','EQCtE','getInstance','registerObserver','HSrmP','getBuildHashedId','2|1|5|7|6|0|4|3','forEach','onPageCreate\x20CBTSession\x20payload:\x20','../../../helpers/classLogger.js'];a76_0x26f6=function(){return _0x196fdb;};return a76_0x26f6();}