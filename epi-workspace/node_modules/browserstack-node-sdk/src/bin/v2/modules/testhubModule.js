const a83_0x1b457b=a83_0x3460;(function(_0x4a0777,_0x32fc86){const _0x3c3d43=a83_0x3460,_0x26e3f5=_0x4a0777();while(!![]){try{const _0x233c37=-parseInt(_0x3c3d43(0x203))/0x1+-parseInt(_0x3c3d43(0x1f0))/0x2+parseInt(_0x3c3d43(0x1db))/0x3+-parseInt(_0x3c3d43(0x1d9))/0x4+-parseInt(_0x3c3d43(0x1d5))/0x5*(parseInt(_0x3c3d43(0x1f5))/0x6)+-parseInt(_0x3c3d43(0x1d7))/0x7+parseInt(_0x3c3d43(0x208))/0x8;if(_0x233c37===_0x32fc86)break;else _0x26e3f5['push'](_0x26e3f5['shift']());}catch(_0x585796){_0x26e3f5['push'](_0x26e3f5['shift']());}}}(a83_0x5a74,0x613a3));function a83_0x3460(_0x320fea,_0x1791d8){const _0x5a74d7=a83_0x5a74();return a83_0x3460=function(_0x34609f,_0x46fe6f){_0x34609f=_0x34609f-0x1b2;let _0x19bcbb=_0x5a74d7[_0x34609f];return _0x19bcbb;},a83_0x3460(_0x320fea,_0x1791d8);}function a83_0x5a74(){const _0x4aa6c5=['error','keys','frameworkVersion','../cliUtils.js','getId','version','../state/testFrameworkState.js','./playwrightDriverModule.js','../framework/testFramework.js','util','automationSession','getCurrentTestState','bind','executionContext','testFrameworkVersion','jsQud','hwFwP','lQCTz','split','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','createTestFrameworkEventPayload','testHookState','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','../grpcClient.js','testInfo','getProcessId','retry','values','KEY_TEST_FRAMEWORK_VERSION','getTestFramework','forEach','LEkxd','exports','testSessionEvent','getBuildHashedId','length','getInstance','../../../helpers/testhub/constants','KEY_HUB_URL','TpJBY','O11yHashedID','BROWSERSTACK_TESTHUB_UUID','frameworkName','testUuid','KEY_SESSION_ID','getJwt','logger','getModuleName','Error\x20in\x20sendTestFrameworkEvent:\x20','ENV_VAR','5fDNXRm','\x20hookState:\x20','1001343oVWGdX','registerObserver','2517568mONxKj','testFrameworkName','736800vyiNhS','getTestId','POST','KEY_TEST_FRAMEWORK_NAME','instance','capabilities','Error\x20in\x20sending\x20CBTSession:\x20','../state/automationFrameworkState.js','debug','CREATE','KEY_CAPABILITIES','../../../helpers/helper.js','getTestDetails','getTestIdentifierFromTestInfo','toString','aPnEY','BROWSERSTACK_TESTHUB_JWT','lQsyc','platformIndex','getTestUUID','env','17124jIBBVx','KEY_TEST_DEFERRED','testhubConfig','../TestInfo.js','stringify','2627358FKImkK','onAllTestEvents','onPageCreate','KEY_PLATFORM_INDEX','../../../helpers/classLogger.js','sendTestFrameworkEvent','testFrameworkState','name','onPageCreate\x20CBTSession\x20payload:\x20','testFrameworkData','lUFTS','format','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','hookState','230440gbEKho','5|1|0|2|7|4|6|3','page','TestHubModule','../state/hookState.js','12815832ykrFFM','../framework/constants/testFrameworkConstants.js','getThreadId','getState','./baseModule'];a83_0x5a74=function(){return _0x4aa6c5;};return a83_0x5a74();}const util=require(a83_0x1b457b(0x216)),BaseModule=require(a83_0x1b457b(0x20c)),{createClassLogger}=require(a83_0x1b457b(0x1f9)),AutomationFramework=require('../framework/automationFramework.js'),AutomationFrameworkState=require(a83_0x1b457b(0x1e2)),HookState=require(a83_0x1b457b(0x207)),TestFramework=require(a83_0x1b457b(0x215)),TestFrameworkState=require(a83_0x1b457b(0x213)),PlaywrightDriverModule=require(a83_0x1b457b(0x214)),TestFrameworkConstants=require(a83_0x1b457b(0x209)),GrpcClient=require(a83_0x1b457b(0x1ba)),CLIUtils=require(a83_0x1b457b(0x210)),TestInfo=require(a83_0x1b457b(0x1f3)),testHubConstants=require(a83_0x1b457b(0x1c8)),{FRAMEWORKS}=require('../../../helpers/test-observability/constants.js'),BrowserstackCLI=require('../browserstackCLI.js'),{getPlaywrightProvider}=require(a83_0x1b457b(0x1e6));class TestHubModule extends BaseModule{[a83_0x1b457b(0x1d1)]=createClassLogger(a83_0x1b457b(0x206));constructor(_0x1836d0,_0x3b679f=null){const _0x2564f3=a83_0x1b457b,_0xc32aac={};_0xc32aac['LEkxd']=_0x2564f3(0x204),_0xc32aac[_0x2564f3(0x1ff)]=_0x2564f3(0x206);const _0x148546=_0xc32aac,_0x190c8f=_0x148546[_0x2564f3(0x1c2)]['split']('|');let _0xf1418d=0x0;while(!![]){switch(_0x190c8f[_0xf1418d++]){case'0':this[_0x2564f3(0x1f2)]=_0x1836d0;continue;case'1':this[_0x2564f3(0x1fc)]=_0x148546[_0x2564f3(0x1ff)];continue;case'2':AutomationFramework[_0x2564f3(0x1d8)](AutomationFrameworkState[_0x2564f3(0x1e4)],HookState['POST'],this['onPageCreate'][_0x2564f3(0x219)](this));continue;case'3':BrowserstackCLI[_0x2564f3(0x1cb)]=this[_0x2564f3(0x1f2)][_0x2564f3(0x1c5)]();continue;case'4':process[_0x2564f3(0x1ef)][testHubConstants[_0x2564f3(0x1d4)][_0x2564f3(0x1eb)]]=this[_0x2564f3(0x1f2)][_0x2564f3(0x1d0)]();continue;case'5':super(_0x3b679f);continue;case'6':process[_0x2564f3(0x1ef)][testHubConstants[_0x2564f3(0x1d4)][_0x2564f3(0x1cc)]]=this['testhubConfig'][_0x2564f3(0x1c5)]();continue;case'7':Object[_0x2564f3(0x1be)](TestFrameworkState)[_0x2564f3(0x1c1)](_0x5da704=>{const _0x1b4ee9=_0x2564f3;Object[_0x1b4ee9(0x1be)](HookState)[_0x1b4ee9(0x1c1)](_0x5d3694=>{const _0x1b8f80=_0x1b4ee9;TestFramework[_0x1b8f80(0x1d8)](_0x5da704,_0x5d3694,this['onAllTestEvents'][_0x1b8f80(0x219)](this));});});continue;}break;}}[a83_0x1b457b(0x1d2)](){return TestHubModule['MODULE_NAME'];}[a83_0x1b457b(0x1f6)](_0xecfbca){const _0x47ef2f=a83_0x1b457b,_0x14c5ee={};_0x14c5ee[_0x47ef2f(0x1ec)]=function(_0x101d30,_0x4ea300){return _0x101d30===_0x4ea300;};const _0x4ab34=_0x14c5ee,_0x456944=_0xecfbca[_0x47ef2f(0x1df)],_0x56c362=_0x456944[_0x47ef2f(0x218)]();(_0x4ab34[_0x47ef2f(0x1ec)](_0x56c362,TestFrameworkState['TEST'])||CLIUtils['matchHookRegex'](_0x56c362[_0x47ef2f(0x1e9)]()[_0x47ef2f(0x1b5)]('.')[0x1]))&&this['sendTestFrameworkEvent'](_0xecfbca);}async[a83_0x1b457b(0x1fa)](_0x3804bf){const _0x1d1032=a83_0x1b457b,_0xb74825={};_0xb74825['jsQud']=function(_0x47f4e2,_0x1b3d4e){return _0x47f4e2===_0x1b3d4e;},_0xb74825[_0x1d1032(0x1ca)]='sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event';const _0x34e218=_0xb74825;try{const _0x1a5152=BrowserstackCLI['getInstance']()[_0x1d1032(0x1c0)]()[_0x1d1032(0x1b7)](_0x3804bf);if(!_0x1a5152||_0x34e218[_0x1d1032(0x1b2)](Object[_0x1d1032(0x20e)](_0x1a5152)[_0x1d1032(0x1c6)],0x0)){this['logger']['debug'](_0x34e218['TpJBY']);return;}const _0x3196e3=await GrpcClient[_0x1d1032(0x1c7)]()['testFrameworkEvent'](_0x1a5152);this[_0x1d1032(0x1d1)][_0x1d1032(0x1e3)](_0x1d1032(0x1b6)+_0x1a5152[_0x1d1032(0x1fb)]+_0x1d1032(0x1d6)+_0x1a5152[_0x1d1032(0x202)]);}catch(_0x2c065f){this[_0x1d1032(0x1d1)]['error'](_0x1d1032(0x1d3)+util[_0x1d1032(0x200)](_0x2c065f));}}async[a83_0x1b457b(0x1f7)](_0x586287){const _0x593134=a83_0x1b457b,_0x4af2c9={'aPnEY':function(_0x4b5766,_0x1caf5f){return _0x4b5766===_0x1caf5f;},'lQCTz':function(_0x8bf330,_0x454040){return _0x8bf330(_0x454040);},'hwFwP':'base64'};try{if(_0x586287[_0x593134(0x205)]){const _0x441ab7=this[_0x593134(0x1dc)](_0x586287);this[_0x593134(0x1d1)]['debug'](_0x593134(0x201)+_0x441ab7);let _0xaa087b;if(this['testFrameworkData']&&_0x4af2c9[_0x593134(0x1ea)](this[_0x593134(0x1fe)][_0x593134(0x1fc)],FRAMEWORKS['CUCUMBER']))_0xaa087b=_0x441ab7;else this[_0x593134(0x1fe)]&&_0x4af2c9[_0x593134(0x1ea)](this[_0x593134(0x1fe)][_0x593134(0x1fc)],FRAMEWORKS['JEST'])?_0xaa087b=_0x441ab7:_0xaa087b=TestInfo[_0x593134(0x1e8)](_0x586287[_0x593134(0x1bb)],_0x586287[_0x593134(0x1bb)][_0x593134(0x1bd)]);const _0x2fce09=TestInfo[_0x593134(0x1ee)](_0xaa087b),_0x1ed5d5=TestInfo[_0x593134(0x1e7)](_0xaa087b),_0x4bc455=_0x586287[_0x593134(0x1df)],_0x3d2927=AutomationFramework[_0x593134(0x20b)](_0x4bc455,PlaywrightDriverModule[_0x593134(0x1f8)]),_0x25b0b9=_0x1ed5d5[TestFrameworkConstants[_0x593134(0x1de)]]||this['testFrameworkData']&&this[_0x593134(0x1fe)]['name'],_0x220444=_0x1ed5d5[TestFrameworkConstants[_0x593134(0x1bf)]]||this['testFrameworkData']&&this['testFrameworkData'][_0x593134(0x212)],_0x6d1c08=TestFrameworkState['TEST'][_0x593134(0x1e9)]()[_0x593134(0x1b5)]('.')[0x1],_0x39a919=HookState[_0x593134(0x1dd)][_0x593134(0x1e9)]()[_0x593134(0x1b5)]('.')[0x1],_0x27f382=_0x4bc455['getContext'](),_0x1ff5b0=AutomationFramework[_0x593134(0x20b)](_0x4bc455,PlaywrightDriverModule[_0x593134(0x1c9)],''),_0x53eb16={'provider':_0x4af2c9[_0x593134(0x1b4)](getPlaywrightProvider,_0x1ff5b0),'frameworkName':_0x4bc455[_0x593134(0x1cd)],'frameworkVersion':_0x4bc455[_0x593134(0x20f)],'frameworkSessionId':AutomationFramework[_0x593134(0x20b)](_0x4bc455,PlaywrightDriverModule[_0x593134(0x1cf)],''),'ref':_0x4bc455['getRef'](),'hubUrl':_0x1ff5b0};let _0x15eeaa=AutomationFramework['getState'](_0x4bc455,PlaywrightDriverModule[_0x593134(0x1e5)],{});_0x15eeaa=Buffer['from'](JSON[_0x593134(0x1f4)](_0x15eeaa))[_0x593134(0x1e9)](_0x4af2c9[_0x593134(0x1b3)]);const _0x24e61c={'hash':_0x27f382[_0x593134(0x211)](),'threadId':_0x27f382[_0x593134(0x20a)]()[_0x593134(0x1e9)](),'processId':_0x27f382[_0x593134(0x1bc)]()[_0x593134(0x1e9)]()},_0x459514={};_0x459514[_0x593134(0x1ed)]=_0x3d2927,_0x459514[_0x593134(0x1da)]=_0x25b0b9,_0x459514[_0x593134(0x21b)]=_0x220444,_0x459514[_0x593134(0x1fb)]=_0x6d1c08,_0x459514[_0x593134(0x1b8)]=_0x39a919,_0x459514[_0x593134(0x1ce)]=_0x2fce09,_0x459514[_0x593134(0x217)]=_0x53eb16,_0x459514[_0x593134(0x1e0)]=_0x15eeaa,_0x459514[_0x593134(0x21a)]=_0x24e61c;const _0x4e0d3b=_0x459514;this[_0x593134(0x1d1)]['debug'](_0x593134(0x1fd)+util['format'](_0x4e0d3b));const _0x1703fc=await GrpcClient[_0x593134(0x1c7)]()[_0x593134(0x1c4)](_0x4e0d3b);this[_0x593134(0x1d1)][_0x593134(0x1e3)](_0x593134(0x1b9)+_0x441ab7);}}catch(_0x5380f1){this[_0x593134(0x1d1)][_0x593134(0x20d)](_0x593134(0x1e1)+util[_0x593134(0x200)](_0x5380f1));}}}TestHubModule['MODULE_NAME']=a83_0x1b457b(0x206),TestHubModule[a83_0x1b457b(0x1f1)]='test_deferred',module[a83_0x1b457b(0x1c3)]=TestHubModule;