const a85_0x4e3ec0=a85_0x3195;(function(_0x1ad520,_0x44b0d3){const _0x1c2dde=a85_0x3195,_0x2ad23b=_0x1ad520();while(!![]){try{const _0x555898=-parseInt(_0x1c2dde(0x16a))/0x1*(parseInt(_0x1c2dde(0x15a))/0x2)+parseInt(_0x1c2dde(0x184))/0x3*(-parseInt(_0x1c2dde(0x18b))/0x4)+parseInt(_0x1c2dde(0x1ad))/0x5+parseInt(_0x1c2dde(0x192))/0x6*(-parseInt(_0x1c2dde(0x1a6))/0x7)+-parseInt(_0x1c2dde(0x164))/0x8*(parseInt(_0x1c2dde(0x15d))/0x9)+parseInt(_0x1c2dde(0x1ac))/0xa+parseInt(_0x1c2dde(0x18e))/0xb;if(_0x555898===_0x44b0d3)break;else _0x2ad23b['push'](_0x2ad23b['shift']());}catch(_0x3b16d2){_0x2ad23b['push'](_0x2ad23b['shift']());}}}(a85_0x2a3c,0x9aa7f));const util=require(a85_0x4e3ec0(0x153)),BaseModule=require(a85_0x4e3ec0(0x185)),{createClassLogger}=require(a85_0x4e3ec0(0x196)),AutomationFramework=require(a85_0x4e3ec0(0x1ab)),AutomationFrameworkState=require(a85_0x4e3ec0(0x165)),HookState=require(a85_0x4e3ec0(0x16b)),TestFramework=require('../framework/testFramework.js'),TestFrameworkState=require('../state/testFrameworkState.js'),PlaywrightDriverModule=require(a85_0x4e3ec0(0x150)),TestFrameworkConstants=require(a85_0x4e3ec0(0x155)),GrpcClient=require(a85_0x4e3ec0(0x147)),CLIUtils=require(a85_0x4e3ec0(0x15c)),TestInfo=require(a85_0x4e3ec0(0x193)),testHubConstants=require('../../../helpers/testhub/constants'),{FRAMEWORKS}=require(a85_0x4e3ec0(0x169)),helper=require('../../../helpers/helper.js'),LoadTestModule=require(a85_0x4e3ec0(0x172)),JestUtils=require(a85_0x4e3ec0(0x1a8)),BrowserstackCLI=require(a85_0x4e3ec0(0x175)),{getPlaywrightProvider,getProductForSession}=require(a85_0x4e3ec0(0x162));function a85_0x2a3c(){const _0x3eec4e=['BROWSERSTACK_TESTHUB_UUID','hookState','Error\x20in\x20sendTestFrameworkEvent:\x20','BROWSERSTACK_TESTHUB_JWT','JEST','mVRfC','getThreadId','onPageCreate:\x20Recreated\x20Jest\x20testIdentifier:\x20','getProcessId','testFrameworkState','onPageCreate\x20CBTSession\x20payload:\x20','ENV_VAR','getRef','testFrameworkData','7dvaWPf','POST','../utils/jest-utils.js','LQDkK','CREATE','../framework/automationFramework.js','11803890RBEaJD','1708615RbjnNc','AzoDM','YbBbG','createTestFrameworkEventPayload','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','KEY_TEST_FRAMEWORK_VERSION','../grpcClient.js','HcVVR',',\x20test_identifier:\x20','frameworkVersion','debug','testSessionEvent','KEY_SESSION_ID','registerObserver','testInfo','./playwrightDriverModule.js','getTestId','stringify','util','jestUtils','../framework/constants/testFrameworkConstants.js','MODULE_NAME','Error\x20in\x20sending\x20CBTSession:\x20','toString','env','2QoEPgj','getId','../cliUtils.js','93501HWkYYa','CUCUMBER','KEY_CAPABILITIES','getBuildHashedId','error','../../../helpers/helper.js','TestHubModule','408szGbvs','../state/automationFrameworkState.js','RjFSL','sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','bind','../../../helpers/test-observability/constants.js','1090343BQDffX','../state/hookState.js','testFrameworkEvent','testhubConfig','getInstance','instance','name','TEST','./loadTestModule.js','from','getJwt','../browserstackCLI.js','retry','matchHookRegex','UYoEP','version','logger','page','dZZXu','values','onPageCreate:\x20Skipping\x20CBT\x20session\x20event\x20-\x20no\x20testInfo\x20(page\x20created\x20outside\x20test\x20context)','getTestDetails','QMNLB','getCurrentTestState','getTestUUID','format','3424587AplEDf','./baseModule','split','KEY_PLATFORM_INDEX','exports','sendTestFrameworkEvent','keys','4KtZNkB','getLTSSessionId','getTestFramework','32007624khXIMo','isLTSSession','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','6220284arTJYG','../TestInfo.js','getState','EoNBX','../../../helpers/classLogger.js','NSxVs'];a85_0x2a3c=function(){return _0x3eec4e;};return a85_0x2a3c();}function a85_0x3195(_0xa11def,_0x26a0c9){const _0x2a3c6d=a85_0x2a3c();return a85_0x3195=function(_0x319570,_0x411a84){_0x319570=_0x319570-0x147;let _0x36dd67=_0x2a3c6d[_0x319570];return _0x36dd67;},a85_0x3195(_0xa11def,_0x26a0c9);}class TestHubModule extends BaseModule{['logger']=createClassLogger(a85_0x4e3ec0(0x163));constructor(_0x2b223d,_0x1b54c4=null){const _0x547c54=a85_0x4e3ec0,_0x3e20ba={};_0x3e20ba[_0x547c54(0x19d)]='4|3|5|7|8|1|6|0|2',_0x3e20ba[_0x547c54(0x17c)]=_0x547c54(0x163);const _0x84b013=_0x3e20ba,_0x4792c3=_0x84b013['mVRfC'][_0x547c54(0x186)]('|');let _0x29baf7=0x0;while(!![]){switch(_0x4792c3[_0x29baf7++]){case'0':process[_0x547c54(0x159)][testHubConstants['ENV_VAR'][_0x547c54(0x198)]]=this[_0x547c54(0x16d)][_0x547c54(0x160)]();continue;case'1':Object['values'](TestFrameworkState)['forEach'](_0xd4a9f=>{const _0x4180f7=_0x547c54;Object[_0x4180f7(0x17d)](HookState)['forEach'](_0xef2fd3=>{const _0x552555=_0x4180f7;TestFramework[_0x552555(0x14e)](_0xd4a9f,_0xef2fd3,this['onAllTestEvents'][_0x552555(0x168)](this));});});continue;case'2':BrowserstackCLI['O11yHashedID']=this['testhubConfig'][_0x547c54(0x160)]();continue;case'3':this['name']=_0x84b013['dZZXu'];continue;case'4':super(_0x1b54c4);continue;case'5':this[_0x547c54(0x16d)]=_0x2b223d;continue;case'6':process['env'][testHubConstants[_0x547c54(0x1a3)][_0x547c54(0x19b)]]=this[_0x547c54(0x16d)][_0x547c54(0x174)]();continue;case'7':this['jestUtils']=new JestUtils();continue;case'8':AutomationFramework[_0x547c54(0x14e)](AutomationFrameworkState[_0x547c54(0x1aa)],HookState[_0x547c54(0x1a7)],this['onPageCreate'][_0x547c54(0x168)](this));continue;}break;}}['getModuleName'](){return TestHubModule['MODULE_NAME'];}['onAllTestEvents'](_0x4050f4){const _0xfbfac3=a85_0x4e3ec0,_0x490a63={};_0x490a63[_0xfbfac3(0x166)]=function(_0xd00ff8,_0x22af0b){return _0xd00ff8===_0x22af0b;};const _0x5af45=_0x490a63,_0x50870a=_0x4050f4[_0xfbfac3(0x16f)],_0x13a061=_0x50870a[_0xfbfac3(0x181)]();(_0x5af45[_0xfbfac3(0x166)](_0x13a061,TestFrameworkState[_0xfbfac3(0x171)])||CLIUtils[_0xfbfac3(0x177)](_0x13a061[_0xfbfac3(0x158)]()[_0xfbfac3(0x186)]('.')[0x1]))&&this[_0xfbfac3(0x189)](_0x4050f4);}async[a85_0x4e3ec0(0x189)](_0xf4fe2f){const _0x3ed8e1=a85_0x4e3ec0,_0x45dbda={};_0x45dbda[_0x3ed8e1(0x180)]=function(_0x4e6600,_0x3866d0){return _0x4e6600===_0x3866d0;},_0x45dbda[_0x3ed8e1(0x197)]=_0x3ed8e1(0x167);const _0x58c1ee=_0x45dbda;try{const _0x117336=BrowserstackCLI[_0x3ed8e1(0x16e)]()[_0x3ed8e1(0x18d)]()[_0x3ed8e1(0x1b0)](_0xf4fe2f);if(!_0x117336||_0x58c1ee['QMNLB'](Object[_0x3ed8e1(0x18a)](_0x117336)['length'],0x0)){this[_0x3ed8e1(0x17a)][_0x3ed8e1(0x14b)](_0x58c1ee['NSxVs']);return;}const _0x55bcce=await GrpcClient[_0x3ed8e1(0x16e)]()[_0x3ed8e1(0x16c)](_0x117336);this[_0x3ed8e1(0x17a)][_0x3ed8e1(0x14b)](_0x3ed8e1(0x191)+_0x117336[_0x3ed8e1(0x1a1)]+'\x20hookState:\x20'+_0x117336[_0x3ed8e1(0x199)]);}catch(_0x1b406c){this[_0x3ed8e1(0x17a)][_0x3ed8e1(0x161)](_0x3ed8e1(0x19a)+util[_0x3ed8e1(0x183)](_0x1b406c));}}async['onPageCreate'](_0x33e36f){const _0x321cbc=a85_0x4e3ec0,_0x2b310f={'UYoEP':function(_0x2fad44,_0x3018af){return _0x2fad44===_0x3018af;},'AzoDM':_0x321cbc(0x17e),'LQDkK':function(_0x558d46,_0x72c945){return _0x558d46===_0x72c945;},'YbBbG':function(_0x4254ff,_0x28cb0f){return _0x4254ff(_0x28cb0f);},'EoNBX':function(_0x25e2f5){return _0x25e2f5();},'HcVVR':'base64'};try{if(_0x33e36f[_0x321cbc(0x17b)]){const _0xbdd882=this[_0x321cbc(0x151)](_0x33e36f);this[_0x321cbc(0x17a)][_0x321cbc(0x14b)](_0x321cbc(0x1b1)+_0xbdd882);if(this[_0x321cbc(0x1a5)]&&_0x2b310f[_0x321cbc(0x178)](this[_0x321cbc(0x1a5)]['name'],FRAMEWORKS[_0x321cbc(0x19c)])&&!_0x33e36f['testInfo']){this[_0x321cbc(0x17a)][_0x321cbc(0x14b)](_0x2b310f[_0x321cbc(0x1ae)]);return;}let _0x24cbc1,_0x1a7545;if(this[_0x321cbc(0x1a5)]&&_0x2b310f[_0x321cbc(0x1a9)](this[_0x321cbc(0x1a5)][_0x321cbc(0x170)],FRAMEWORKS[_0x321cbc(0x15e)]))_0x24cbc1=_0xbdd882,_0x1a7545=TestInfo[_0x321cbc(0x182)](_0x24cbc1);else this[_0x321cbc(0x1a5)]&&_0x2b310f[_0x321cbc(0x1a9)](this[_0x321cbc(0x1a5)][_0x321cbc(0x170)],FRAMEWORKS[_0x321cbc(0x19c)])?(_0x24cbc1=this[_0x321cbc(0x154)]['recreateIdentifierFromTestInfo'](_0x33e36f['testInfo']),this['logger']['debug'](_0x321cbc(0x19f)+_0x24cbc1)):(_0x24cbc1=TestInfo['getTestIdentifierFromTestInfo'](_0x33e36f['testInfo'],_0x33e36f[_0x321cbc(0x14f)][_0x321cbc(0x176)]),_0x1a7545=TestInfo[_0x321cbc(0x182)](_0x24cbc1));const _0xbd6585=TestInfo[_0x321cbc(0x17f)](_0x24cbc1),_0x1caa2f=_0x33e36f[_0x321cbc(0x16f)],_0x225b34=AutomationFramework[_0x321cbc(0x194)](_0x1caa2f,PlaywrightDriverModule[_0x321cbc(0x187)]),_0x589402=_0xbd6585?.[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]||this['testFrameworkData']&&this[_0x321cbc(0x1a5)][_0x321cbc(0x170)],_0x1a32a7=_0xbd6585?.[TestFrameworkConstants[_0x321cbc(0x1b2)]]||this[_0x321cbc(0x1a5)]&&this[_0x321cbc(0x1a5)][_0x321cbc(0x179)],_0xd57af2=TestFrameworkState['TEST'][_0x321cbc(0x158)]()[_0x321cbc(0x186)]('.')[0x1],_0x27aa52=HookState['POST'][_0x321cbc(0x158)]()[_0x321cbc(0x186)]('.')[0x1],_0x186ffc=_0x1caa2f['getContext'](),_0x10557b=AutomationFramework[_0x321cbc(0x194)](_0x1caa2f,PlaywrightDriverModule['KEY_HUB_URL'],''),_0x3b0ec3={'provider':_0x2b310f[_0x321cbc(0x1af)](getPlaywrightProvider,_0x10557b),'frameworkName':_0x1caa2f['frameworkName'],'frameworkVersion':_0x1caa2f[_0x321cbc(0x14a)],'frameworkSessionId':LoadTestModule[_0x321cbc(0x18f)]()?LoadTestModule[_0x321cbc(0x18c)]():AutomationFramework['getState'](_0x1caa2f,PlaywrightDriverModule[_0x321cbc(0x14d)],''),'ref':_0x1caa2f[_0x321cbc(0x1a4)](),'hubUrl':_0x10557b,'product':_0x2b310f[_0x321cbc(0x195)](getProductForSession)};let _0x40dfa0=AutomationFramework[_0x321cbc(0x194)](_0x1caa2f,PlaywrightDriverModule[_0x321cbc(0x15f)],{});_0x40dfa0=Buffer[_0x321cbc(0x173)](JSON[_0x321cbc(0x152)](_0x40dfa0))['toString'](_0x2b310f[_0x321cbc(0x148)]);const _0x2c94e9={'hash':_0x186ffc[_0x321cbc(0x15b)](),'threadId':_0x186ffc[_0x321cbc(0x19e)]()['toString'](),'processId':_0x186ffc[_0x321cbc(0x1a0)]()[_0x321cbc(0x158)]()},_0x9a126b={};_0x9a126b['test_identifier']=_0x24cbc1;const _0x3d7813={};_0x3d7813['testUuid']=_0x1a7545;const _0x598886={'platformIndex':_0x225b34,'testFrameworkName':_0x589402,'testFrameworkVersion':_0x1a32a7,'testFrameworkState':_0xd57af2,'testHookState':_0x27aa52,...this['testFrameworkData']&&_0x2b310f['UYoEP'](this[_0x321cbc(0x1a5)][_0x321cbc(0x170)],FRAMEWORKS[_0x321cbc(0x19c)])?_0x9a126b:_0x3d7813,'automationSession':_0x3b0ec3,'capabilities':_0x40dfa0,'executionContext':_0x2c94e9};this[_0x321cbc(0x17a)][_0x321cbc(0x14b)](_0x321cbc(0x1a2)+util[_0x321cbc(0x183)](_0x598886));const _0x715c44=await GrpcClient[_0x321cbc(0x16e)]()[_0x321cbc(0x14c)](_0x598886);this[_0x321cbc(0x17a)][_0x321cbc(0x14b)](_0x321cbc(0x190)+_0xbdd882+(this[_0x321cbc(0x1a5)]&&_0x2b310f[_0x321cbc(0x178)](this[_0x321cbc(0x1a5)][_0x321cbc(0x170)],FRAMEWORKS[_0x321cbc(0x19c)])?_0x321cbc(0x149)+_0x24cbc1:''));}}catch(_0x48cd7d){this[_0x321cbc(0x17a)][_0x321cbc(0x161)](_0x321cbc(0x157)+util['format'](_0x48cd7d));}}}TestHubModule[a85_0x4e3ec0(0x156)]=a85_0x4e3ec0(0x163),TestHubModule['KEY_TEST_DEFERRED']='test_deferred',module[a85_0x4e3ec0(0x188)]=TestHubModule;