const a85_0x26c711=a85_0x4920;(function(_0x4172be,_0x12228f){const _0x2684d3=a85_0x4920,_0x19d8cb=_0x4172be();while(!![]){try{const _0x4a2184=-parseInt(_0x2684d3(0x20a))/0x1*(parseInt(_0x2684d3(0x22a))/0x2)+-parseInt(_0x2684d3(0x1f2))/0x3+-parseInt(_0x2684d3(0x1e1))/0x4*(parseInt(_0x2684d3(0x1ec))/0x5)+parseInt(_0x2684d3(0x222))/0x6*(parseInt(_0x2684d3(0x20c))/0x7)+parseInt(_0x2684d3(0x23d))/0x8+parseInt(_0x2684d3(0x1e4))/0x9+parseInt(_0x2684d3(0x212))/0xa;if(_0x4a2184===_0x12228f)break;else _0x19d8cb['push'](_0x19d8cb['shift']());}catch(_0x11bf03){_0x19d8cb['push'](_0x19d8cb['shift']());}}}(a85_0x3fbe,0xdd1f3));function a85_0x3fbe(){const _0x3194ff=['sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','KEY_TEST_FRAMEWORK_NAME','onPageCreate:\x20Skipping\x20CBT\x20session\x20event\x20-\x20no\x20testInfo\x20(page\x20created\x20outside\x20test\x20context)','onPageCreate','matchHookRegex','getId','JEST','test_identifier','./loadTestModule.js','dvHXi','../state/automationFrameworkState.js','../../../helpers/helper.js','TEST','CUCUMBER','test_deferred','Hkwmn','exports','POST','3928488UleFNo','getModuleName','createTestFrameworkEventPayload','oYeKr','env','../../../helpers/test-observability/constants.js','isLTSSession','toString','instance','getThreadId','../TestInfo.js','version','lhyeQ','4UkIIqL','TestHubModule','hookState','6863490FuccxR','BROWSERSTACK_TESTHUB_UUID','getContext','getJwt','../../../helpers/classLogger.js','frameworkName','logger','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','7156105JGataI','debug','../grpcClient.js','KEY_HUB_URL','error','util','2581638FiEnGN','onAllTestEvents','ENV_VAR','keys','../../../helpers/testhub/constants','getTestUUID','Error\x20in\x20sending\x20CBTSession:\x20','getTestDetails','../framework/constants/testFrameworkConstants.js','\x20hookState:\x20','values','getTestIdentifierFromTestInfo','testFrameworkState','testFrameworkData','getTestFramework','testSessionEvent','./playwrightDriverModule.js','testInfo','MxhcJ','split','MODULE_NAME','getBuildHashedId','getState','../state/hookState.js','1024643kcvwTp','jestUtils','11461513QUSMOc','Error\x20in\x20sendTestFrameworkEvent:\x20','format','from','BROWSERSTACK_TESTHUB_JWT','testhubConfig','13310950rzCkkL','name','bind','forEach','testUuid','testFrameworkEvent','registerObserver','retry','O11yHashedID','stringify','./baseModule','onPageCreate\x20CBTSession\x20payload:\x20','page','getInstance','CREATE','../framework/testFramework.js','6xbRhQD','KEY_CAPABILITIES','base64','sendTestFrameworkEvent','../state/testFrameworkState.js','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','../framework/automationFramework.js','UJSrX','2SfpeLQ'];a85_0x3fbe=function(){return _0x3194ff;};return a85_0x3fbe();}const util=require(a85_0x26c711(0x1f1)),BaseModule=require(a85_0x26c711(0x21c)),{createClassLogger}=require(a85_0x26c711(0x1e8)),AutomationFramework=require(a85_0x26c711(0x228)),AutomationFrameworkState=require(a85_0x26c711(0x235)),HookState=require(a85_0x26c711(0x209)),TestFramework=require(a85_0x26c711(0x221)),TestFrameworkState=require(a85_0x26c711(0x226)),PlaywrightDriverModule=require(a85_0x26c711(0x202)),TestFrameworkConstants=require(a85_0x26c711(0x1fa)),GrpcClient=require(a85_0x26c711(0x1ee)),CLIUtils=require('../cliUtils.js'),TestInfo=require(a85_0x26c711(0x1de)),testHubConstants=require(a85_0x26c711(0x1f6)),{FRAMEWORKS}=require(a85_0x26c711(0x242)),helper=require(a85_0x26c711(0x236)),LoadTestModule=require(a85_0x26c711(0x233)),JestUtils=require('../utils/jest-utils.js'),BrowserstackCLI=require('../browserstackCLI.js'),{getPlaywrightProvider}=require(a85_0x26c711(0x236));class TestHubModule extends BaseModule{[a85_0x26c711(0x1ea)]=createClassLogger(a85_0x26c711(0x1e2));constructor(_0xd20ca7,_0x4fd2f2=null){const _0x5967dc=a85_0x26c711,_0x11a69f={};_0x11a69f[_0x5967dc(0x23a)]='3|8|7|4|2|6|1|5|0',_0x11a69f['hxmVd']=_0x5967dc(0x1e2);const _0x4b62a7=_0x11a69f,_0x51aa04=_0x4b62a7['Hkwmn']['split']('|');let _0x4b334=0x0;while(!![]){switch(_0x51aa04[_0x4b334++]){case'0':BrowserstackCLI[_0x5967dc(0x21a)]=this[_0x5967dc(0x211)][_0x5967dc(0x207)]();continue;case'1':process[_0x5967dc(0x241)][testHubConstants[_0x5967dc(0x1f4)][_0x5967dc(0x210)]]=this[_0x5967dc(0x211)][_0x5967dc(0x1e7)]();continue;case'2':AutomationFramework[_0x5967dc(0x218)](AutomationFrameworkState[_0x5967dc(0x220)],HookState[_0x5967dc(0x23c)],this[_0x5967dc(0x22e)][_0x5967dc(0x214)](this));continue;case'3':super(_0x4fd2f2);continue;case'4':this[_0x5967dc(0x20b)]=new JestUtils();continue;case'5':process['env'][testHubConstants[_0x5967dc(0x1f4)][_0x5967dc(0x1e5)]]=this['testhubConfig'][_0x5967dc(0x207)]();continue;case'6':Object[_0x5967dc(0x1fc)](TestFrameworkState)[_0x5967dc(0x215)](_0x204b81=>{const _0x4cadd2=_0x5967dc;Object[_0x4cadd2(0x1fc)](HookState)[_0x4cadd2(0x215)](_0xa30c4a=>{const _0x1a9fe5=_0x4cadd2;TestFramework['registerObserver'](_0x204b81,_0xa30c4a,this[_0x1a9fe5(0x1f3)]['bind'](this));});});continue;case'7':this[_0x5967dc(0x211)]=_0xd20ca7;continue;case'8':this[_0x5967dc(0x213)]=_0x4b62a7['hxmVd'];continue;}break;}}[a85_0x26c711(0x23e)](){const _0x130b89=a85_0x26c711;return TestHubModule[_0x130b89(0x206)];}[a85_0x26c711(0x1f3)](_0x3df377){const _0x350f41=a85_0x26c711,_0x154623={};_0x154623[_0x350f41(0x204)]=function(_0x16754c,_0x343f15){return _0x16754c===_0x343f15;};const _0x3c5de7=_0x154623,_0x18eb77=_0x3df377['instance'],_0x463382=_0x18eb77['getCurrentTestState']();(_0x3c5de7[_0x350f41(0x204)](_0x463382,TestFrameworkState[_0x350f41(0x237)])||CLIUtils[_0x350f41(0x22f)](_0x463382[_0x350f41(0x1db)]()[_0x350f41(0x205)]('.')[0x1]))&&this[_0x350f41(0x225)](_0x3df377);}async[a85_0x26c711(0x225)](_0x1fe646){const _0x58670e=a85_0x26c711,_0x51ce5a={};_0x51ce5a[_0x58670e(0x229)]=function(_0x3262ec,_0x1b5134){return _0x3262ec===_0x1b5134;},_0x51ce5a['oYeKr']=_0x58670e(0x22b);const _0x5003af=_0x51ce5a;try{const _0x12d1c5=BrowserstackCLI[_0x58670e(0x21f)]()[_0x58670e(0x200)]()[_0x58670e(0x23f)](_0x1fe646);if(!_0x12d1c5||_0x5003af['UJSrX'](Object[_0x58670e(0x1f5)](_0x12d1c5)['length'],0x0)){this[_0x58670e(0x1ea)][_0x58670e(0x1ed)](_0x5003af[_0x58670e(0x240)]);return;}const _0x10989e=await GrpcClient[_0x58670e(0x21f)]()[_0x58670e(0x217)](_0x12d1c5);this['logger'][_0x58670e(0x1ed)]('sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20'+_0x12d1c5[_0x58670e(0x1fe)]+_0x58670e(0x1fb)+_0x12d1c5[_0x58670e(0x1e3)]);}catch(_0x596845){this[_0x58670e(0x1ea)]['error'](_0x58670e(0x20d)+util[_0x58670e(0x20e)](_0x596845));}}async[a85_0x26c711(0x22e)](_0x3c6fda){const _0x427c96=a85_0x26c711,_0x23e641={'dvHXi':function(_0x6f5c09,_0x359270){return _0x6f5c09===_0x359270;},'lhyeQ':_0x427c96(0x22d),'glwks':function(_0x2d477c,_0x9a4b20){return _0x2d477c(_0x9a4b20);},'SmlaM':_0x427c96(0x224)};try{if(_0x3c6fda[_0x427c96(0x21e)]){const _0x274e1a=this['getTestId'](_0x3c6fda);this[_0x427c96(0x1ea)][_0x427c96(0x1ed)](_0x427c96(0x1eb)+_0x274e1a);if(this['testFrameworkData']&&_0x23e641[_0x427c96(0x234)](this['testFrameworkData'][_0x427c96(0x213)],FRAMEWORKS[_0x427c96(0x231)])&&!_0x3c6fda[_0x427c96(0x203)]){this['logger'][_0x427c96(0x1ed)](_0x23e641[_0x427c96(0x1e0)]);return;}let _0x5e04c5,_0x3bfa61;if(this[_0x427c96(0x1ff)]&&_0x23e641[_0x427c96(0x234)](this['testFrameworkData'][_0x427c96(0x213)],FRAMEWORKS[_0x427c96(0x238)]))_0x5e04c5=_0x274e1a,_0x3bfa61=TestInfo['getTestUUID'](_0x5e04c5);else this[_0x427c96(0x1ff)]&&_0x23e641[_0x427c96(0x234)](this[_0x427c96(0x1ff)]['name'],FRAMEWORKS[_0x427c96(0x231)])?(_0x5e04c5=this[_0x427c96(0x20b)]['recreateIdentifierFromTestInfo'](_0x3c6fda[_0x427c96(0x203)]),this[_0x427c96(0x1ea)][_0x427c96(0x1ed)]('onPageCreate:\x20Recreated\x20Jest\x20testIdentifier:\x20'+_0x5e04c5)):(_0x5e04c5=TestInfo[_0x427c96(0x1fd)](_0x3c6fda[_0x427c96(0x203)],_0x3c6fda[_0x427c96(0x203)][_0x427c96(0x219)]),_0x3bfa61=TestInfo[_0x427c96(0x1f7)](_0x5e04c5));const _0x54eee8=TestInfo[_0x427c96(0x1f9)](_0x5e04c5),_0x3f7311=_0x3c6fda[_0x427c96(0x1dc)],_0x262e20=AutomationFramework[_0x427c96(0x208)](_0x3f7311,PlaywrightDriverModule['KEY_PLATFORM_INDEX']),_0x155a3c=_0x54eee8?.[TestFrameworkConstants[_0x427c96(0x22c)]]||this['testFrameworkData']&&this['testFrameworkData'][_0x427c96(0x213)],_0x59a7cf=_0x54eee8?.[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]||this['testFrameworkData']&&this[_0x427c96(0x1ff)][_0x427c96(0x1df)],_0x81636=TestFrameworkState[_0x427c96(0x237)][_0x427c96(0x1db)]()['split']('.')[0x1],_0x1214f0=HookState[_0x427c96(0x23c)][_0x427c96(0x1db)]()[_0x427c96(0x205)]('.')[0x1],_0x460369=_0x3f7311[_0x427c96(0x1e6)](),_0xfa8249=AutomationFramework[_0x427c96(0x208)](_0x3f7311,PlaywrightDriverModule[_0x427c96(0x1ef)],''),_0x5d672e={'provider':_0x23e641['glwks'](getPlaywrightProvider,_0xfa8249),'frameworkName':_0x3f7311[_0x427c96(0x1e9)],'frameworkVersion':_0x3f7311['frameworkVersion'],'frameworkSessionId':LoadTestModule[_0x427c96(0x243)]()?LoadTestModule['getLTSSessionId']():AutomationFramework['getState'](_0x3f7311,PlaywrightDriverModule['KEY_SESSION_ID'],''),'ref':_0x3f7311['getRef'](),'hubUrl':_0xfa8249};let _0x59627c=AutomationFramework[_0x427c96(0x208)](_0x3f7311,PlaywrightDriverModule[_0x427c96(0x223)],{});_0x59627c=Buffer[_0x427c96(0x20f)](JSON[_0x427c96(0x21b)](_0x59627c))[_0x427c96(0x1db)](_0x23e641['SmlaM']);const _0x118da0={'hash':_0x460369[_0x427c96(0x230)](),'threadId':_0x460369[_0x427c96(0x1dd)]()[_0x427c96(0x1db)](),'processId':_0x460369['getProcessId']()['toString']()},_0x18a850={};_0x18a850[_0x427c96(0x232)]=_0x5e04c5;const _0x4a1389={};_0x4a1389[_0x427c96(0x216)]=_0x3bfa61;const _0x4ec7e1={'platformIndex':_0x262e20,'testFrameworkName':_0x155a3c,'testFrameworkVersion':_0x59a7cf,'testFrameworkState':_0x81636,'testHookState':_0x1214f0,...this[_0x427c96(0x1ff)]&&_0x23e641['dvHXi'](this['testFrameworkData'][_0x427c96(0x213)],FRAMEWORKS[_0x427c96(0x231)])?_0x18a850:_0x4a1389,'automationSession':_0x5d672e,'capabilities':_0x59627c,'executionContext':_0x118da0};this['logger'][_0x427c96(0x1ed)](_0x427c96(0x21d)+util[_0x427c96(0x20e)](_0x4ec7e1));const _0x3e9e2d=await GrpcClient[_0x427c96(0x21f)]()[_0x427c96(0x201)](_0x4ec7e1);this[_0x427c96(0x1ea)][_0x427c96(0x1ed)](_0x427c96(0x227)+_0x274e1a+(this['testFrameworkData']&&_0x23e641['dvHXi'](this['testFrameworkData'][_0x427c96(0x213)],FRAMEWORKS[_0x427c96(0x231)])?',\x20test_identifier:\x20'+_0x5e04c5:''));}}catch(_0x5360f2){this['logger'][_0x427c96(0x1f0)](_0x427c96(0x1f8)+util[_0x427c96(0x20e)](_0x5360f2));}}}function a85_0x4920(_0x4da402,_0x3d8604){const _0x3fbe2d=a85_0x3fbe();return a85_0x4920=function(_0x492020,_0x58947c){_0x492020=_0x492020-0x1db;let _0x5ae167=_0x3fbe2d[_0x492020];return _0x5ae167;},a85_0x4920(_0x4da402,_0x3d8604);}TestHubModule[a85_0x26c711(0x206)]='TestHubModule',TestHubModule['KEY_TEST_DEFERRED']=a85_0x26c711(0x239),module[a85_0x26c711(0x23b)]=TestHubModule;