const a81_0x1e4b11=a81_0xb26e;(function(_0x9ff1d6,_0x17e90b){const _0x321576=a81_0xb26e,_0x2a5009=_0x9ff1d6();while(!![]){try{const _0x1f70d0=-parseInt(_0x321576(0x18f))/0x1+-parseInt(_0x321576(0x197))/0x2+parseInt(_0x321576(0x18d))/0x3*(-parseInt(_0x321576(0x189))/0x4)+parseInt(_0x321576(0x177))/0x5*(-parseInt(_0x321576(0x187))/0x6)+parseInt(_0x321576(0x1a0))/0x7*(parseInt(_0x321576(0x1a2))/0x8)+-parseInt(_0x321576(0x195))/0x9+parseInt(_0x321576(0x186))/0xa;if(_0x1f70d0===_0x17e90b)break;else _0x2a5009['push'](_0x2a5009['shift']());}catch(_0x40962f){_0x2a5009['push'](_0x2a5009['shift']());}}}(a81_0x3bbe,0x8fe7c));const util=require(a81_0x1e4b11(0x198)),BaseModule=require(a81_0x1e4b11(0x1a8)),{createClassLogger}=require(a81_0x1e4b11(0x1a1)),AutomationFramework=require('../framework/automationFramework.js'),AutomationFrameworkState=require(a81_0x1e4b11(0x1c2)),HookState=require(a81_0x1e4b11(0x174)),TestFramework=require('../framework/testFramework.js'),TestFrameworkState=require(a81_0x1e4b11(0x163)),PlaywrightDriverModule=require(a81_0x1e4b11(0x1ab)),TestFrameworkConstants=require(a81_0x1e4b11(0x1ba)),GrpcClient=require(a81_0x1e4b11(0x183)),CLIUtils=require(a81_0x1e4b11(0x173)),TestInfo=require(a81_0x1e4b11(0x191)),testHubConstants=require(a81_0x1e4b11(0x185)),{FRAMEWORKS}=require(a81_0x1e4b11(0x1a9)),BrowserstackCLI=require(a81_0x1e4b11(0x1c3)),{getPlaywrightProvider}=require(a81_0x1e4b11(0x165));function a81_0xb26e(_0x286e13,_0x55e801){const _0x3bbe1e=a81_0x3bbe();return a81_0xb26e=function(_0xb26edb,_0x3547c3){_0xb26edb=_0xb26edb-0x15c;let _0x3523ac=_0x3bbe1e[_0xb26edb];return _0x3523ac;},a81_0xb26e(_0x286e13,_0x55e801);}class TestHubModule extends BaseModule{[a81_0x1e4b11(0x1a5)]=createClassLogger('TestHubModule');constructor(_0x3c4edc,_0x4eae82=null){const _0x28d15c=a81_0x1e4b11,_0x4d6872={};_0x4d6872[_0x28d15c(0x16d)]='0|2|3|5|6|7|4|1',_0x4d6872[_0x28d15c(0x16e)]=_0x28d15c(0x1be);const _0x1f75ff=_0x4d6872,_0x2a96e5=_0x1f75ff[_0x28d15c(0x16d)]['split']('|');let _0xf8ec59=0x0;while(!![]){switch(_0x2a96e5[_0xf8ec59++]){case'0':super(_0x4eae82);continue;case'1':BrowserstackCLI[_0x28d15c(0x18b)]=this[_0x28d15c(0x194)][_0x28d15c(0x19b)]();continue;case'2':this[_0x28d15c(0x190)]=_0x1f75ff[_0x28d15c(0x16e)];continue;case'3':this[_0x28d15c(0x194)]=_0x3c4edc;continue;case'4':process[_0x28d15c(0x15f)][testHubConstants[_0x28d15c(0x1af)]['BROWSERSTACK_TESTHUB_UUID']]=this[_0x28d15c(0x194)][_0x28d15c(0x19b)]();continue;case'5':AutomationFramework[_0x28d15c(0x176)](AutomationFrameworkState['CREATE'],HookState[_0x28d15c(0x188)],this[_0x28d15c(0x1a4)][_0x28d15c(0x18c)](this));continue;case'6':Object[_0x28d15c(0x1bb)](TestFrameworkState)[_0x28d15c(0x1b3)](_0x3da46d=>{const _0x57e9ca=_0x28d15c;Object['values'](HookState)[_0x57e9ca(0x1b3)](_0x20f4c8=>{const _0x2e16e5=_0x57e9ca;TestFramework[_0x2e16e5(0x176)](_0x3da46d,_0x20f4c8,this[_0x2e16e5(0x16a)][_0x2e16e5(0x18c)](this));});});continue;case'7':process[_0x28d15c(0x15f)][testHubConstants[_0x28d15c(0x1af)][_0x28d15c(0x164)]]=this[_0x28d15c(0x194)][_0x28d15c(0x1b1)]();continue;}break;}}['getModuleName'](){const _0x2d1a44=a81_0x1e4b11;return TestHubModule[_0x2d1a44(0x181)];}['onAllTestEvents'](_0x536614){const _0x110522=a81_0x1e4b11,_0x242d27={};_0x242d27[_0x110522(0x16c)]=function(_0x4a2ba3,_0x26e953){return _0x4a2ba3===_0x26e953;};const _0x28b1ab=_0x242d27,_0x58b3f3=_0x536614[_0x110522(0x1b0)],_0x3dac91=_0x58b3f3['getCurrentTestState']();(_0x28b1ab[_0x110522(0x16c)](_0x3dac91,TestFrameworkState['TEST'])||CLIUtils['matchHookRegex'](_0x3dac91[_0x110522(0x16b)]()[_0x110522(0x19e)]('.')[0x1]))&&this[_0x110522(0x18e)](_0x536614);}async[a81_0x1e4b11(0x18e)](_0x20d173){const _0x324079=a81_0x1e4b11,_0x3f40f4={};_0x3f40f4[_0x324079(0x19c)]=function(_0x564638,_0x22a5a0){return _0x564638===_0x22a5a0;},_0x3f40f4[_0x324079(0x171)]=_0x324079(0x1ae);const _0x30db1a=_0x3f40f4;try{const _0xc4d3ae=BrowserstackCLI[_0x324079(0x184)]()[_0x324079(0x1c0)]()[_0x324079(0x17f)](_0x20d173);if(!_0xc4d3ae||_0x30db1a[_0x324079(0x19c)](Object[_0x324079(0x1c1)](_0xc4d3ae)['length'],0x0)){this[_0x324079(0x1a5)][_0x324079(0x1b7)](_0x30db1a[_0x324079(0x171)]);return;}const _0x5b8a38=await GrpcClient[_0x324079(0x184)]()['testFrameworkEvent'](_0xc4d3ae);this[_0x324079(0x1a5)][_0x324079(0x1b7)](_0x324079(0x1a3)+_0xc4d3ae[_0x324079(0x17a)]+_0x324079(0x162)+_0xc4d3ae[_0x324079(0x1bd)]);}catch(_0x2e123e){this[_0x324079(0x1a5)][_0x324079(0x19d)](_0x324079(0x196)+util['format'](_0x2e123e));}}async['onPageCreate'](_0x2b50aa){const _0x3887a5=a81_0x1e4b11,_0x493b28={'MXBEU':function(_0x108cfb,_0x4a18cf){return _0x108cfb===_0x4a18cf;},'HqitX':function(_0x5166f3,_0x154167){return _0x5166f3(_0x154167);},'MAQUe':_0x3887a5(0x1aa)};try{if(_0x2b50aa['page']){const _0x1e6995=this[_0x3887a5(0x16f)](_0x2b50aa);this['logger'][_0x3887a5(0x1b7)]('onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20'+_0x1e6995);let _0x44c980;this[_0x3887a5(0x1b2)]&&_0x493b28[_0x3887a5(0x1b6)](this[_0x3887a5(0x1b2)][_0x3887a5(0x190)],FRAMEWORKS[_0x3887a5(0x18a)])?_0x44c980=_0x1e6995:_0x44c980=TestInfo[_0x3887a5(0x175)](_0x2b50aa[_0x3887a5(0x17b)],_0x2b50aa[_0x3887a5(0x17b)][_0x3887a5(0x182)]);const _0x5585e7=TestInfo[_0x3887a5(0x1b4)](_0x44c980),_0x3e2700=TestInfo[_0x3887a5(0x1ad)](_0x44c980),_0x3b8407=_0x2b50aa['instance'],_0x56888b=AutomationFramework[_0x3887a5(0x179)](_0x3b8407,PlaywrightDriverModule[_0x3887a5(0x1a6)]),_0x1c3fe4=_0x3e2700[TestFrameworkConstants[_0x3887a5(0x178)]]||this[_0x3887a5(0x1b2)]&&this[_0x3887a5(0x1b2)][_0x3887a5(0x190)],_0xe610e4=_0x3e2700[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]||this[_0x3887a5(0x1b2)]&&this['testFrameworkData']['version'],_0xb109a2=TestFrameworkState[_0x3887a5(0x192)][_0x3887a5(0x16b)]()[_0x3887a5(0x19e)]('.')[0x1],_0x28e19e=HookState['POST']['toString']()['split']('.')[0x1],_0x10acb7=_0x3b8407[_0x3887a5(0x166)](),_0x12e8cf=AutomationFramework[_0x3887a5(0x179)](_0x3b8407,PlaywrightDriverModule['KEY_HUB_URL'],''),_0x65e1b8={'provider':_0x493b28[_0x3887a5(0x17e)](getPlaywrightProvider,_0x12e8cf),'frameworkName':_0x3b8407[_0x3887a5(0x1ac)],'frameworkVersion':_0x3b8407[_0x3887a5(0x167)],'frameworkSessionId':AutomationFramework['getState'](_0x3b8407,PlaywrightDriverModule[_0x3887a5(0x193)],''),'ref':_0x3b8407[_0x3887a5(0x169)](),'hubUrl':_0x12e8cf};let _0x333bc3=AutomationFramework[_0x3887a5(0x179)](_0x3b8407,PlaywrightDriverModule[_0x3887a5(0x172)],{});_0x333bc3=Buffer[_0x3887a5(0x19a)](JSON['stringify'](_0x333bc3))['toString'](_0x493b28[_0x3887a5(0x15d)]);const _0x703506={'hash':_0x10acb7[_0x3887a5(0x1b9)](),'threadId':_0x10acb7['getThreadId']()[_0x3887a5(0x16b)](),'processId':_0x10acb7[_0x3887a5(0x170)]()[_0x3887a5(0x16b)]()},_0x5d19c7={};_0x5d19c7[_0x3887a5(0x17c)]=_0x56888b,_0x5d19c7[_0x3887a5(0x1b5)]=_0x1c3fe4,_0x5d19c7[_0x3887a5(0x15c)]=_0xe610e4,_0x5d19c7[_0x3887a5(0x17a)]=_0xb109a2,_0x5d19c7[_0x3887a5(0x1bc)]=_0x28e19e,_0x5d19c7[_0x3887a5(0x1bf)]=_0x5585e7,_0x5d19c7[_0x3887a5(0x161)]=_0x65e1b8,_0x5d19c7['capabilities']=_0x333bc3,_0x5d19c7[_0x3887a5(0x180)]=_0x703506;const _0x20ce98=_0x5d19c7;this['logger']['debug'](_0x3887a5(0x199)+util[_0x3887a5(0x19f)](_0x20ce98));const _0x1befce=await GrpcClient[_0x3887a5(0x184)]()[_0x3887a5(0x17d)](_0x20ce98);this[_0x3887a5(0x1a5)][_0x3887a5(0x1b7)](_0x3887a5(0x168)+_0x1e6995);}}catch(_0x2d2931){this['logger']['error'](_0x3887a5(0x1a7)+util['format'](_0x2d2931));}}}TestHubModule[a81_0x1e4b11(0x181)]='TestHubModule',TestHubModule[a81_0x1e4b11(0x1b8)]=a81_0x1e4b11(0x15e),module[a81_0x1e4b11(0x160)]=TestHubModule;function a81_0x3bbe(){const _0xd188a7=['automationSession','\x20hookState:\x20','../state/testFrameworkState.js','BROWSERSTACK_TESTHUB_JWT','../../../helpers/helper.js','getContext','frameworkVersion','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','getRef','onAllTestEvents','toString','wlnyv','GPTVj','RvwgU','getTestId','getProcessId','wZHjP','KEY_CAPABILITIES','../cliUtils.js','../state/hookState.js','getTestIdentifierFromTestInfo','registerObserver','425XZUWTF','KEY_TEST_FRAMEWORK_NAME','getState','testFrameworkState','testInfo','platformIndex','testSessionEvent','HqitX','createTestFrameworkEventPayload','executionContext','MODULE_NAME','retry','../grpcClient.js','getInstance','../../../helpers/testhub/constants','34881500RElgOS','58416UcAEjc','POST','4676pgYSqU','CUCUMBER','O11yHashedID','bind','1941gLKOXO','sendTestFrameworkEvent','887483kbtfyz','name','../TestInfo.js','TEST','KEY_SESSION_ID','testhubConfig','10429722LEEYgc','Error\x20in\x20sendTestFrameworkEvent:\x20','654768yvHROs','util','onPageCreate\x20CBTSession\x20payload:\x20','from','getBuildHashedId','GKJmS','error','split','format','581vuxLMu','../../../helpers/classLogger.js','102064bSPLVL','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','onPageCreate','logger','KEY_PLATFORM_INDEX','Error\x20in\x20sending\x20CBTSession:\x20','./baseModule','../../../helpers/test-observability/constants.js','base64','./playwrightDriverModule.js','frameworkName','getTestDetails','sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','ENV_VAR','instance','getJwt','testFrameworkData','forEach','getTestUUID','testFrameworkName','MXBEU','debug','KEY_TEST_DEFERRED','getId','../framework/constants/testFrameworkConstants.js','values','testHookState','hookState','TestHubModule','testUuid','getTestFramework','keys','../state/automationFrameworkState.js','../browserstackCLI.js','testFrameworkVersion','MAQUe','test_deferred','env','exports'];a81_0x3bbe=function(){return _0xd188a7;};return a81_0x3bbe();}