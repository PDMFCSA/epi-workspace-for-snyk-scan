const a85_0x1bc029=a85_0x177e;function a85_0x177e(_0x3cca17,_0x376228){const _0x2464ab=a85_0x2464();return a85_0x177e=function(_0x177e11,_0x24018a){_0x177e11=_0x177e11-0xbc;let _0x21cf6f=_0x2464ab[_0x177e11];return _0x21cf6f;},a85_0x177e(_0x3cca17,_0x376228);}function a85_0x2464(){const _0x58f53c=['toString','TEST','testFrameworkEvent','env','testFrameworkState','hookState','testhubConfig','KEY_PLATFORM_INDEX','27956060jRubCs','recreateIdentifierFromTestInfo','values','AIKOL','./baseModule','POST','isLTSSession','../cliUtils.js','instance','23092ftAyue','getTestId','739780XoHykH','version','error','RGQGg','jestUtils','../../../helpers/helper.js','KEY_TEST_FRAMEWORK_VERSION','5139379CzIYYl','BROWSERSTACK_TESTHUB_JWT','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','../framework/automationFramework.js','getModuleName','../state/testFrameworkState.js','../state/hookState.js','103472iXInSF','ENV_VAR','0|3|1|6|2|7|8|5|4','2134070VfLtIL','GGetp','onPageCreate:\x20Skipping\x20CBT\x20session\x20event\x20-\x20no\x20testInfo\x20(page\x20created\x20outside\x20test\x20context)','sendTestFrameworkEvent','testUuid','\x20hookState:\x20','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','from','../TestInfo.js','getLTSSessionId','registerObserver','frameworkName','ittLy','../framework/constants/testFrameworkConstants.js','getRef','KEY_SESSION_ID','SwixF','../grpcClient.js','getProcessId','getTestIdentifierFromTestInfo','mEzMM','getJwt','getContext','format','TestHubModule','getId','getTestUUID','sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','6pTPDHQ','name','./playwrightDriverModule.js','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','keys','base64','logger','length','forEach','bYWJA','onPageCreate:\x20Recreated\x20Jest\x20testIdentifier:\x20','debug','KEY_TEST_FRAMEWORK_NAME',',\x20test_identifier:\x20','bind','matchHookRegex','CRNyb','O11yHashedID','MODULE_NAME','createTestFrameworkEventPayload','./loadTestModule.js','getState','Ffehs','page','../../../helpers/classLogger.js','onPageCreate\x20CBTSession\x20payload:\x20','Error\x20in\x20sending\x20CBTSession:\x20','testInfo','9hGbRsn','3509176opKGWA','getInstance','retry','stringify','split','test_identifier','MpzLm','../state/automationFrameworkState.js','onAllTestEvents','getBuildHashedId','JEST','CUCUMBER','KEY_TEST_DEFERRED','frameworkVersion','372LEXigh','205NohpXq','testFrameworkData'];a85_0x2464=function(){return _0x58f53c;};return a85_0x2464();}(function(_0x113ea2,_0x68bc6){const _0xd2c654=a85_0x177e,_0x8a39b1=_0x113ea2();while(!![]){try{const _0x1353f2=-parseInt(_0xd2c654(0x129))/0x1+parseInt(_0xd2c654(0x127))/0x2*(parseInt(_0xd2c654(0x113))/0x3)+parseInt(_0xd2c654(0xc9))/0x4*(-parseInt(_0xd2c654(0x114))/0x5)+parseInt(_0xd2c654(0xe8))/0x6*(-parseInt(_0xd2c654(0xc2))/0x7)+-parseInt(_0xd2c654(0x105))/0x8+parseInt(_0xd2c654(0x104))/0x9*(-parseInt(_0xd2c654(0xcc))/0xa)+parseInt(_0xd2c654(0x11e))/0xb;if(_0x1353f2===_0x68bc6)break;else _0x8a39b1['push'](_0x8a39b1['shift']());}catch(_0x5ab6ca){_0x8a39b1['push'](_0x8a39b1['shift']());}}}(a85_0x2464,0xc0071));const util=require('util'),BaseModule=require(a85_0x1bc029(0x122)),{createClassLogger}=require(a85_0x1bc029(0x100)),AutomationFramework=require(a85_0x1bc029(0xc5)),AutomationFrameworkState=require(a85_0x1bc029(0x10c)),HookState=require(a85_0x1bc029(0xc8)),TestFramework=require('../framework/testFramework.js'),TestFrameworkState=require(a85_0x1bc029(0xc7)),PlaywrightDriverModule=require(a85_0x1bc029(0xea)),TestFrameworkConstants=require(a85_0x1bc029(0xd9)),GrpcClient=require(a85_0x1bc029(0xdd)),CLIUtils=require(a85_0x1bc029(0x125)),TestInfo=require(a85_0x1bc029(0xd4)),testHubConstants=require('../../../helpers/testhub/constants'),{FRAMEWORKS}=require('../../../helpers/test-observability/constants.js'),helper=require(a85_0x1bc029(0xc0)),LoadTestModule=require(a85_0x1bc029(0xfc)),JestUtils=require('../utils/jest-utils.js'),BrowserstackCLI=require('../browserstackCLI.js'),{getPlaywrightProvider,getProductForSession}=require(a85_0x1bc029(0xc0));class TestHubModule extends BaseModule{[a85_0x1bc029(0xee)]=createClassLogger(a85_0x1bc029(0xe4));constructor(_0x1b095e,_0x57738d=null){const _0x4d5a1c=a85_0x1bc029,_0x19f679={};_0x19f679['Hocdr']=_0x4d5a1c(0xcb),_0x19f679[_0x4d5a1c(0xf8)]='TestHubModule';const _0x3bb588=_0x19f679,_0x39d4e7=_0x3bb588['Hocdr'][_0x4d5a1c(0x109)]('|');let _0x469677=0x0;while(!![]){switch(_0x39d4e7[_0x469677++]){case'0':super(_0x57738d);continue;case'1':this['testhubConfig']=_0x1b095e;continue;case'2':AutomationFramework[_0x4d5a1c(0xd6)](AutomationFrameworkState['CREATE'],HookState['POST'],this['onPageCreate'][_0x4d5a1c(0xf6)](this));continue;case'3':this[_0x4d5a1c(0xe9)]=_0x3bb588[_0x4d5a1c(0xf8)];continue;case'4':BrowserstackCLI[_0x4d5a1c(0xf9)]=this['testhubConfig']['getBuildHashedId']();continue;case'5':process[_0x4d5a1c(0x119)][testHubConstants[_0x4d5a1c(0xca)]['BROWSERSTACK_TESTHUB_UUID']]=this[_0x4d5a1c(0x11c)][_0x4d5a1c(0x10e)]();continue;case'6':this['jestUtils']=new JestUtils();continue;case'7':Object[_0x4d5a1c(0x120)](TestFrameworkState)[_0x4d5a1c(0xf0)](_0x140e25=>{const _0x599a7f=_0x4d5a1c;Object[_0x599a7f(0x120)](HookState)[_0x599a7f(0xf0)](_0xd375f4=>{const _0x4903a8=_0x599a7f;TestFramework[_0x4903a8(0xd6)](_0x140e25,_0xd375f4,this['onAllTestEvents']['bind'](this));});});continue;case'8':process[_0x4d5a1c(0x119)][testHubConstants[_0x4d5a1c(0xca)][_0x4d5a1c(0xc3)]]=this[_0x4d5a1c(0x11c)][_0x4d5a1c(0xe1)]();continue;}break;}}[a85_0x1bc029(0xc6)](){const _0x401073=a85_0x1bc029;return TestHubModule[_0x401073(0xfa)];}[a85_0x1bc029(0x10d)](_0x1b452a){const _0x1cd618=a85_0x1bc029,_0x1ae451={};_0x1ae451['bYWJA']=function(_0x19dcdd,_0x489581){return _0x19dcdd===_0x489581;};const _0x871f66=_0x1ae451,_0x1ad826=_0x1b452a['instance'],_0x2d94be=_0x1ad826['getCurrentTestState']();(_0x871f66[_0x1cd618(0xf1)](_0x2d94be,TestFrameworkState['TEST'])||CLIUtils[_0x1cd618(0xf7)](_0x2d94be[_0x1cd618(0x116)]()[_0x1cd618(0x109)]('.')[0x1]))&&this[_0x1cd618(0xcf)](_0x1b452a);}async[a85_0x1bc029(0xcf)](_0x3b6487){const _0xb7f578=a85_0x1bc029,_0x196e45={};_0x196e45[_0xb7f578(0xbe)]=function(_0x26abf6,_0xff89af){return _0x26abf6===_0xff89af;},_0x196e45['mEzMM']=_0xb7f578(0xe7);const _0x349a68=_0x196e45;try{const _0x4c2821=BrowserstackCLI[_0xb7f578(0x106)]()['getTestFramework']()[_0xb7f578(0xfb)](_0x3b6487);if(!_0x4c2821||_0x349a68[_0xb7f578(0xbe)](Object[_0xb7f578(0xec)](_0x4c2821)[_0xb7f578(0xef)],0x0)){this[_0xb7f578(0xee)][_0xb7f578(0xf3)](_0x349a68[_0xb7f578(0xe0)]);return;}const _0x5d2b3b=await GrpcClient[_0xb7f578(0x106)]()[_0xb7f578(0x118)](_0x4c2821);this['logger']['debug'](_0xb7f578(0xeb)+_0x4c2821[_0xb7f578(0x11a)]+_0xb7f578(0xd1)+_0x4c2821[_0xb7f578(0x11b)]);}catch(_0x51ae07){this[_0xb7f578(0xee)]['error']('Error\x20in\x20sendTestFrameworkEvent:\x20'+util['format'](_0x51ae07));}}async['onPageCreate'](_0x4eb80d){const _0x51777d=a85_0x1bc029,_0x447da5={'Ffehs':function(_0x4cd1f6,_0x35cd85){return _0x4cd1f6===_0x35cd85;},'ittLy':_0x51777d(0xce),'SwixF':function(_0x406f72,_0x335b7a){return _0x406f72===_0x335b7a;},'SWeBt':function(_0x17de73,_0x42403f){return _0x17de73(_0x42403f);},'GGetp':function(_0x7907ef){return _0x7907ef();},'MpzLm':_0x51777d(0xed),'AIKOL':function(_0x42d17b,_0x47cdb5){return _0x42d17b===_0x47cdb5;}};try{if(_0x4eb80d[_0x51777d(0xff)]){const _0x23df9=this[_0x51777d(0x128)](_0x4eb80d);this[_0x51777d(0xee)][_0x51777d(0xf3)](_0x51777d(0xd2)+_0x23df9);if(this[_0x51777d(0x115)]&&_0x447da5[_0x51777d(0xfe)](this[_0x51777d(0x115)][_0x51777d(0xe9)],FRAMEWORKS[_0x51777d(0x10f)])&&!_0x4eb80d[_0x51777d(0x103)]){this[_0x51777d(0xee)]['debug'](_0x447da5[_0x51777d(0xd8)]);return;}let _0x163673,_0xce967b;if(this[_0x51777d(0x115)]&&_0x447da5[_0x51777d(0xdc)](this[_0x51777d(0x115)][_0x51777d(0xe9)],FRAMEWORKS[_0x51777d(0x110)]))_0x163673=_0x23df9,_0xce967b=TestInfo[_0x51777d(0xe6)](_0x163673);else this[_0x51777d(0x115)]&&_0x447da5[_0x51777d(0xdc)](this[_0x51777d(0x115)][_0x51777d(0xe9)],FRAMEWORKS[_0x51777d(0x10f)])?(_0x163673=this[_0x51777d(0xbf)][_0x51777d(0x11f)](_0x4eb80d[_0x51777d(0x103)]),this[_0x51777d(0xee)][_0x51777d(0xf3)](_0x51777d(0xf2)+_0x163673)):(_0x163673=TestInfo[_0x51777d(0xdf)](_0x4eb80d[_0x51777d(0x103)],_0x4eb80d['testInfo'][_0x51777d(0x107)]),_0xce967b=TestInfo['getTestUUID'](_0x163673));const _0x18ab26=TestInfo['getTestDetails'](_0x163673),_0x10fe97=_0x4eb80d[_0x51777d(0x126)],_0xa0a390=AutomationFramework[_0x51777d(0xfd)](_0x10fe97,PlaywrightDriverModule[_0x51777d(0x11d)]),_0xd306a7=_0x18ab26?.[TestFrameworkConstants[_0x51777d(0xf4)]]||this['testFrameworkData']&&this[_0x51777d(0x115)][_0x51777d(0xe9)],_0x4c13f6=_0x18ab26?.[TestFrameworkConstants[_0x51777d(0xc1)]]||this[_0x51777d(0x115)]&&this[_0x51777d(0x115)][_0x51777d(0xbc)],_0x37ae84=TestFrameworkState[_0x51777d(0x117)][_0x51777d(0x116)]()[_0x51777d(0x109)]('.')[0x1],_0x586e9e=HookState[_0x51777d(0x123)][_0x51777d(0x116)]()[_0x51777d(0x109)]('.')[0x1],_0x5c66ac=_0x10fe97[_0x51777d(0xe2)](),_0x116460=AutomationFramework['getState'](_0x10fe97,PlaywrightDriverModule['KEY_HUB_URL'],''),_0x5d950b={'provider':_0x447da5['SWeBt'](getPlaywrightProvider,_0x116460),'frameworkName':_0x10fe97[_0x51777d(0xd7)],'frameworkVersion':_0x10fe97[_0x51777d(0x112)],'frameworkSessionId':LoadTestModule[_0x51777d(0x124)]()?LoadTestModule[_0x51777d(0xd5)]():AutomationFramework[_0x51777d(0xfd)](_0x10fe97,PlaywrightDriverModule[_0x51777d(0xdb)],''),'ref':_0x10fe97[_0x51777d(0xda)](),'hubUrl':_0x116460,'product':_0x447da5[_0x51777d(0xcd)](getProductForSession)};let _0x1d3652=AutomationFramework[_0x51777d(0xfd)](_0x10fe97,PlaywrightDriverModule['KEY_CAPABILITIES'],{});_0x1d3652=Buffer[_0x51777d(0xd3)](JSON[_0x51777d(0x108)](_0x1d3652))[_0x51777d(0x116)](_0x447da5[_0x51777d(0x10b)]);const _0x59ff83={'hash':_0x5c66ac[_0x51777d(0xe5)](),'threadId':_0x5c66ac['getThreadId']()[_0x51777d(0x116)](),'processId':_0x5c66ac[_0x51777d(0xde)]()[_0x51777d(0x116)]()},_0x1cee41={};_0x1cee41[_0x51777d(0x10a)]=_0x163673;const _0x28bec5={};_0x28bec5[_0x51777d(0xd0)]=_0xce967b;const _0x1a32a2={'platformIndex':_0xa0a390,'testFrameworkName':_0xd306a7,'testFrameworkVersion':_0x4c13f6,'testFrameworkState':_0x37ae84,'testHookState':_0x586e9e,...this[_0x51777d(0x115)]&&_0x447da5[_0x51777d(0xdc)](this[_0x51777d(0x115)][_0x51777d(0xe9)],FRAMEWORKS['JEST'])?_0x1cee41:_0x28bec5,'automationSession':_0x5d950b,'capabilities':_0x1d3652,'executionContext':_0x59ff83};this[_0x51777d(0xee)]['debug'](_0x51777d(0x101)+util[_0x51777d(0xe3)](_0x1a32a2));const _0x1b5d2b=await GrpcClient[_0x51777d(0x106)]()['testSessionEvent'](_0x1a32a2);this[_0x51777d(0xee)][_0x51777d(0xf3)](_0x51777d(0xc4)+_0x23df9+(this[_0x51777d(0x115)]&&_0x447da5[_0x51777d(0x121)](this[_0x51777d(0x115)]['name'],FRAMEWORKS['JEST'])?_0x51777d(0xf5)+_0x163673:''));}}catch(_0x1c88c6){this[_0x51777d(0xee)][_0x51777d(0xbd)](_0x51777d(0x102)+util[_0x51777d(0xe3)](_0x1c88c6));}}}TestHubModule[a85_0x1bc029(0xfa)]='TestHubModule',TestHubModule[a85_0x1bc029(0x111)]='test_deferred',module['exports']=TestHubModule;