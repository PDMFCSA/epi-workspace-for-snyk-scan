const a81_0x2b2d05=a81_0x2a8d;(function(_0x35796f,_0x3ffe4e){const _0x5a1575=a81_0x2a8d,_0x39bdd8=_0x35796f();while(!![]){try{const _0x20fdf3=-parseInt(_0x5a1575(0xeb))/0x1+parseInt(_0x5a1575(0xb2))/0x2+parseInt(_0x5a1575(0xdb))/0x3*(-parseInt(_0x5a1575(0x105))/0x4)+parseInt(_0x5a1575(0xef))/0x5*(parseInt(_0x5a1575(0xd4))/0x6)+-parseInt(_0x5a1575(0x108))/0x7+-parseInt(_0x5a1575(0xea))/0x8+parseInt(_0x5a1575(0xab))/0x9*(parseInt(_0x5a1575(0xaf))/0xa);if(_0x20fdf3===_0x3ffe4e)break;else _0x39bdd8['push'](_0x39bdd8['shift']());}catch(_0x37046a){_0x39bdd8['push'](_0x39bdd8['shift']());}}}(a81_0x4583,0xb4e4d));const util=require(a81_0x2b2d05(0xee)),BaseModule=require(a81_0x2b2d05(0xdf)),{createClassLogger}=require('../../../helpers/classLogger.js'),AutomationFramework=require(a81_0x2b2d05(0xe1)),AutomationFrameworkState=require(a81_0x2b2d05(0xe4)),HookState=require('../state/hookState.js'),TestFramework=require('../framework/testFramework.js'),TestFrameworkState=require(a81_0x2b2d05(0x107)),PlaywrightDriverModule=require(a81_0x2b2d05(0xf5)),TestFrameworkConstants=require('../framework/constants/testFrameworkConstants.js'),GrpcClient=require('../grpcClient.js'),CLIUtils=require(a81_0x2b2d05(0xd9)),TestInfo=require(a81_0x2b2d05(0xa9)),testHubConstants=require('../../../helpers/testhub/constants'),{FRAMEWORKS}=require(a81_0x2b2d05(0xf1)),BrowserstackCLI=require(a81_0x2b2d05(0xed)),{getPlaywrightProvider}=require(a81_0x2b2d05(0xf9));function a81_0x2a8d(_0x130e9f,_0x1f87aa){const _0x458317=a81_0x4583();return a81_0x2a8d=function(_0x2a8d9c,_0x5c3cdd){_0x2a8d9c=_0x2a8d9c-0xa5;let _0x2b99ee=_0x458317[_0x2a8d9c];return _0x2b99ee;},a81_0x2a8d(_0x130e9f,_0x1f87aa);}class TestHubModule extends BaseModule{['logger']=createClassLogger(a81_0x2b2d05(0xcb));constructor(_0x5a9d21,_0x19da1f=null){const _0xf28446=a81_0x2b2d05,_0x165ff6={};_0x165ff6['RHBNh']=_0xf28446(0xc6),_0x165ff6[_0xf28446(0xd6)]='TestHubModule';const _0x1be731=_0x165ff6,_0x33e694=_0x1be731[_0xf28446(0xe0)][_0xf28446(0xc2)]('|');let _0x15db92=0x0;while(!![]){switch(_0x33e694[_0x15db92++]){case'0':process[_0xf28446(0xe7)][testHubConstants[_0xf28446(0x109)][_0xf28446(0xa7)]]=this['testhubConfig'][_0xf28446(0xd8)]();continue;case'1':Object[_0xf28446(0xff)](TestFrameworkState)[_0xf28446(0xb4)](_0xc62866=>{const _0x390bc3=_0xf28446;Object['values'](HookState)[_0x390bc3(0xb4)](_0x56da72=>{const _0x3fef1b=_0x390bc3;TestFramework[_0x3fef1b(0xcd)](_0xc62866,_0x56da72,this[_0x3fef1b(0xb9)]['bind'](this));});});continue;case'2':BrowserstackCLI[_0xf28446(0xfb)]=this[_0xf28446(0xfd)][_0xf28446(0xd8)]();continue;case'3':this[_0xf28446(0xbd)]=_0x1be731['ngeeg'];continue;case'4':super(_0x19da1f);continue;case'5':AutomationFramework[_0xf28446(0xcd)](AutomationFrameworkState[_0xf28446(0xad)],HookState['POST'],this['onPageCreate'][_0xf28446(0xec)](this));continue;case'6':this[_0xf28446(0xfd)]=_0x5a9d21;continue;case'7':process[_0xf28446(0xe7)][testHubConstants['ENV_VAR'][_0xf28446(0xc5)]]=this[_0xf28446(0xfd)][_0xf28446(0xcf)]();continue;}break;}}[a81_0x2b2d05(0xb5)](){const _0x3bc1d3=a81_0x2b2d05;return TestHubModule[_0x3bc1d3(0xde)];}[a81_0x2b2d05(0xb9)](_0x2e6fd5){const _0x531ce3=a81_0x2b2d05,_0x390dca={};_0x390dca[_0x531ce3(0xfe)]=function(_0x3dce9d,_0x71402d){return _0x3dce9d===_0x71402d;};const _0x3f6f78=_0x390dca,_0x50047f=_0x2e6fd5['instance'],_0x2f68b5=_0x50047f[_0x531ce3(0xc4)]();(_0x3f6f78[_0x531ce3(0xfe)](_0x2f68b5,TestFrameworkState[_0x531ce3(0xc8)])||CLIUtils[_0x531ce3(0xdc)](_0x2f68b5[_0x531ce3(0xe9)]()[_0x531ce3(0xc2)]('.')[0x1]))&&this[_0x531ce3(0xaa)](_0x2e6fd5);}async['sendTestFrameworkEvent'](_0x2a96d7){const _0x379b02=a81_0x2b2d05,_0x1bde4b={};_0x1bde4b[_0x379b02(0xd1)]=function(_0x552f48,_0x2fb768){return _0x552f48===_0x2fb768;},_0x1bde4b[_0x379b02(0xc0)]='sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event';const _0x32d4dc=_0x1bde4b;try{const _0x34b9d1=BrowserstackCLI['getInstance']()[_0x379b02(0xca)]()[_0x379b02(0xe3)](_0x2a96d7);if(!_0x34b9d1||_0x32d4dc['tUWXK'](Object[_0x379b02(0xd5)](_0x34b9d1)[_0x379b02(0x106)],0x0)){this[_0x379b02(0xc3)][_0x379b02(0x103)](_0x32d4dc['AVIZU']);return;}const _0x739719=await GrpcClient[_0x379b02(0xf3)]()[_0x379b02(0xfc)](_0x34b9d1);this[_0x379b02(0xc3)]['debug'](_0x379b02(0x102)+_0x34b9d1[_0x379b02(0xac)]+_0x379b02(0xf7)+_0x34b9d1[_0x379b02(0xcc)]);}catch(_0x6a084f){this[_0x379b02(0xc3)][_0x379b02(0xce)](_0x379b02(0xba)+util['format'](_0x6a084f));}}async[a81_0x2b2d05(0x100)](_0xf3459b){const _0x158dc0=a81_0x2b2d05,_0x4d2a9e={'sjJcF':function(_0x54556a,_0x10995f){return _0x54556a===_0x10995f;},'hdPOU':function(_0x3e6b93,_0x501de3){return _0x3e6b93(_0x501de3);},'QRuoE':_0x158dc0(0xbe)};try{if(_0xf3459b[_0x158dc0(0xb6)]){const _0x2d0f3e=this[_0x158dc0(0xa6)](_0xf3459b);this[_0x158dc0(0xc3)]['debug'](_0x158dc0(0xbc)+_0x2d0f3e);let _0x13a4d3;this[_0x158dc0(0xa8)]&&_0x4d2a9e[_0x158dc0(0xe8)](this['testFrameworkData'][_0x158dc0(0xbd)],FRAMEWORKS['CUCUMBER'])?_0x13a4d3=_0x2d0f3e:_0x13a4d3=TestInfo[_0x158dc0(0xb8)](_0xf3459b[_0x158dc0(0xb7)],_0xf3459b[_0x158dc0(0xb7)][_0x158dc0(0xda)]);const _0x139f08=TestInfo[_0x158dc0(0x101)](_0x13a4d3),_0x3d145b=TestInfo[_0x158dc0(0xae)](_0x13a4d3),_0x1220cb=_0xf3459b[_0x158dc0(0xb1)],_0x494e5c=AutomationFramework[_0x158dc0(0xb0)](_0x1220cb,PlaywrightDriverModule[_0x158dc0(0xe5)]),_0x31eb5c=_0x3d145b[TestFrameworkConstants[_0x158dc0(0xd0)]]||this[_0x158dc0(0xa8)]&&this[_0x158dc0(0xa8)][_0x158dc0(0xbd)],_0x3f720f=_0x3d145b[TestFrameworkConstants[_0x158dc0(0xe2)]]||this[_0x158dc0(0xa8)]&&this[_0x158dc0(0xa8)]['version'],_0x550d26=TestFrameworkState['TEST']['toString']()[_0x158dc0(0xc2)]('.')[0x1],_0x9cb535=HookState[_0x158dc0(0x10a)][_0x158dc0(0xe9)]()['split']('.')[0x1],_0x1fabac=_0x1220cb[_0x158dc0(0xd3)](),_0x4d343e=AutomationFramework['getState'](_0x1220cb,PlaywrightDriverModule[_0x158dc0(0xdd)],''),_0x3114f0={'provider':_0x4d2a9e[_0x158dc0(0x104)](getPlaywrightProvider,_0x4d343e),'frameworkName':_0x1220cb['frameworkName'],'frameworkVersion':_0x1220cb[_0x158dc0(0xc9)],'frameworkSessionId':AutomationFramework[_0x158dc0(0xb0)](_0x1220cb,PlaywrightDriverModule['KEY_SESSION_ID'],''),'ref':_0x1220cb[_0x158dc0(0xfa)](),'hubUrl':_0x4d343e};let _0x6e3e5e=AutomationFramework[_0x158dc0(0xb0)](_0x1220cb,PlaywrightDriverModule[_0x158dc0(0xd2)],{});_0x6e3e5e=Buffer[_0x158dc0(0xa5)](JSON['stringify'](_0x6e3e5e))[_0x158dc0(0xe9)](_0x4d2a9e[_0x158dc0(0xc7)]);const _0xce42d1={'hash':_0x1fabac[_0x158dc0(0xbb)](),'threadId':_0x1fabac['getThreadId']()['toString'](),'processId':_0x1fabac['getProcessId']()[_0x158dc0(0xe9)]()},_0x3a8029={};_0x3a8029[_0x158dc0(0xf2)]=_0x494e5c,_0x3a8029['testFrameworkName']=_0x31eb5c,_0x3a8029[_0x158dc0(0xf6)]=_0x3f720f,_0x3a8029[_0x158dc0(0xac)]=_0x550d26,_0x3a8029['testHookState']=_0x9cb535,_0x3a8029['testUuid']=_0x139f08,_0x3a8029['automationSession']=_0x3114f0,_0x3a8029['capabilities']=_0x6e3e5e,_0x3a8029[_0x158dc0(0xd7)]=_0xce42d1;const _0x1091f4=_0x3a8029;this[_0x158dc0(0xc3)][_0x158dc0(0x103)](_0x158dc0(0xf4)+util[_0x158dc0(0xc1)](_0x1091f4));const _0x1106fe=await GrpcClient['getInstance']()[_0x158dc0(0xbf)](_0x1091f4);this['logger'][_0x158dc0(0x103)](_0x158dc0(0xf8)+_0x2d0f3e);}}catch(_0x4a67af){this[_0x158dc0(0xc3)]['error'](_0x158dc0(0xb3)+util[_0x158dc0(0xc1)](_0x4a67af));}}}TestHubModule[a81_0x2b2d05(0xde)]=a81_0x2b2d05(0xcb),TestHubModule[a81_0x2b2d05(0xf0)]=a81_0x2b2d05(0xe6),module['exports']=TestHubModule;function a81_0x4583(){const _0x12de8b=['30goGsrA','getState','instance','1793912AwHNgG','Error\x20in\x20sending\x20CBTSession:\x20','forEach','getModuleName','page','testInfo','getTestIdentifierFromTestInfo','onAllTestEvents','Error\x20in\x20sendTestFrameworkEvent:\x20','getId','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','name','base64','testSessionEvent','AVIZU','format','split','logger','getCurrentTestState','BROWSERSTACK_TESTHUB_JWT','4|3|6|5|1|7|0|2','QRuoE','TEST','frameworkVersion','getTestFramework','TestHubModule','hookState','registerObserver','error','getJwt','KEY_TEST_FRAMEWORK_NAME','tUWXK','KEY_CAPABILITIES','getContext','87918DTLzQo','keys','ngeeg','executionContext','getBuildHashedId','../cliUtils.js','retry','3xDNtcZ','matchHookRegex','KEY_HUB_URL','MODULE_NAME','./baseModule','RHBNh','../framework/automationFramework.js','KEY_TEST_FRAMEWORK_VERSION','createTestFrameworkEventPayload','../state/automationFrameworkState.js','KEY_PLATFORM_INDEX','test_deferred','env','sjJcF','toString','9922576JXAgkE','531726wpICFJ','bind','../browserstackCLI.js','util','280WRAxnE','KEY_TEST_DEFERRED','../../../helpers/test-observability/constants.js','platformIndex','getInstance','onPageCreate\x20CBTSession\x20payload:\x20','./playwrightDriverModule.js','testFrameworkVersion','\x20hookState:\x20','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','../../../helpers/helper.js','getRef','O11yHashedID','testFrameworkEvent','testhubConfig','Rqtrb','values','onPageCreate','getTestUUID','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','debug','hdPOU','3396108kbRYsX','length','../state/testFrameworkState.js','6687345lJUJSo','ENV_VAR','POST','from','getTestId','BROWSERSTACK_TESTHUB_UUID','testFrameworkData','../TestInfo.js','sendTestFrameworkEvent','7799481slfgZb','testFrameworkState','CREATE','getTestDetails'];a81_0x4583=function(){return _0x12de8b;};return a81_0x4583();}