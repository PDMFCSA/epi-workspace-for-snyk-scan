const a78_0x51eba2=a78_0x452c;(function(_0x15b653,_0x4ebb81){const _0x4c7bad=a78_0x452c,_0x10e290=_0x15b653();while(!![]){try{const _0x5aaf3b=parseInt(_0x4c7bad(0x1c0))/0x1*(-parseInt(_0x4c7bad(0x1b8))/0x2)+parseInt(_0x4c7bad(0x18f))/0x3*(-parseInt(_0x4c7bad(0x1b5))/0x4)+-parseInt(_0x4c7bad(0x1c6))/0x5+parseInt(_0x4c7bad(0x1ca))/0x6+-parseInt(_0x4c7bad(0x1ae))/0x7*(-parseInt(_0x4c7bad(0x179))/0x8)+parseInt(_0x4c7bad(0x1a1))/0x9*(-parseInt(_0x4c7bad(0x18e))/0xa)+-parseInt(_0x4c7bad(0x1dc))/0xb*(-parseInt(_0x4c7bad(0x196))/0xc);if(_0x5aaf3b===_0x4ebb81)break;else _0x10e290['push'](_0x10e290['shift']());}catch(_0x1883b1){_0x10e290['push'](_0x10e290['shift']());}}}(a78_0x53d5,0x65d3f));const util=require('util'),BaseModule=require(a78_0x51eba2(0x172)),{createClassLogger}=require(a78_0x51eba2(0x1d5)),AutomationFramework=require(a78_0x51eba2(0x17a)),AutomationFrameworkState=require(a78_0x51eba2(0x1bd)),HookState=require(a78_0x51eba2(0x1b9)),TestFramework=require(a78_0x51eba2(0x1a7)),TestFrameworkState=require(a78_0x51eba2(0x195)),PlaywrightDriverModule=require(a78_0x51eba2(0x1a5)),TestFrameworkConstants=require(a78_0x51eba2(0x17d)),GrpcClient=require(a78_0x51eba2(0x19d)),CLIUtils=require(a78_0x51eba2(0x185)),TestInfo=require(a78_0x51eba2(0x19c)),testHubConstants=require('../../../helpers/testhub/constants'),BrowserstackCLI=require(a78_0x51eba2(0x180)),{getPlaywrightProvider}=require('../../../helpers/helper.js');function a78_0x452c(_0x3f0d9c,_0x374052){const _0x53d54b=a78_0x53d5();return a78_0x452c=function(_0x452ca5,_0x1dd38c){_0x452ca5=_0x452ca5-0x171;let _0x701135=_0x53d54b[_0x452ca5];return _0x701135;},a78_0x452c(_0x3f0d9c,_0x374052);}class TestHubModule extends BaseModule{[a78_0x51eba2(0x1b2)]=createClassLogger(a78_0x51eba2(0x1cf));constructor(_0x27edd2){const _0x53e7a5=a78_0x51eba2,_0x41a967={};_0x41a967[_0x53e7a5(0x187)]=_0x53e7a5(0x1a8),_0x41a967['ffchT']='TestHubModule';const _0x1eeb4d=_0x41a967,_0x187833=_0x1eeb4d[_0x53e7a5(0x187)][_0x53e7a5(0x181)]('|');let _0x2f4dd8=0x0;while(!![]){switch(_0x187833[_0x2f4dd8++]){case'0':process[_0x53e7a5(0x188)][testHubConstants[_0x53e7a5(0x1d2)][_0x53e7a5(0x1ba)]]=this['testhubConfig'][_0x53e7a5(0x1c5)]();continue;case'1':super();continue;case'2':Object[_0x53e7a5(0x1d7)](TestFrameworkState)[_0x53e7a5(0x197)](_0x1d180b=>{const _0x1cfc1e=_0x53e7a5;Object[_0x1cfc1e(0x1d7)](HookState)[_0x1cfc1e(0x197)](_0x2383dc=>{const _0x1a7dd9=_0x1cfc1e;TestFramework[_0x1a7dd9(0x19a)](_0x1d180b,_0x2383dc,this[_0x1a7dd9(0x1bb)][_0x1a7dd9(0x1a9)](this));});});continue;case'3':AutomationFramework['registerObserver'](AutomationFrameworkState[_0x53e7a5(0x1a4)],HookState['POST'],this['onPageCreate'][_0x53e7a5(0x1a9)](this));continue;case'4':BrowserstackCLI['O11yHashedID']=this['testhubConfig'][_0x53e7a5(0x1a0)]();continue;case'5':this[_0x53e7a5(0x192)]=_0x27edd2;continue;case'6':process['env'][testHubConstants[_0x53e7a5(0x1d2)][_0x53e7a5(0x1d4)]]=this[_0x53e7a5(0x192)][_0x53e7a5(0x1a0)]();continue;case'7':this[_0x53e7a5(0x1db)]=_0x1eeb4d['ffchT'];continue;}break;}}[a78_0x51eba2(0x1c8)](){const _0x33d595=a78_0x51eba2;return TestHubModule[_0x33d595(0x175)];}[a78_0x51eba2(0x1bb)](_0x1b4533){const _0x417a83=a78_0x51eba2,_0x24d0af={};_0x24d0af[_0x417a83(0x191)]=function(_0x25a526,_0x4ea850){return _0x25a526===_0x4ea850;};const _0x5ac35a=_0x24d0af,_0x2d1e19=_0x1b4533[_0x417a83(0x17e)],_0x4a49c8=_0x2d1e19[_0x417a83(0x18b)]();(_0x5ac35a[_0x417a83(0x191)](_0x4a49c8,TestFrameworkState[_0x417a83(0x1da)])||CLIUtils[_0x417a83(0x1d1)](_0x4a49c8[_0x417a83(0x173)]()['split']('.')[0x1]))&&this[_0x417a83(0x1ad)](_0x1b4533);}async[a78_0x51eba2(0x1ad)](_0x49f97b){const _0x5d557b=a78_0x51eba2,_0x3b00b5={};_0x3b00b5[_0x5d557b(0x1aa)]=_0x5d557b(0x1c4);const _0x53bcb5=_0x3b00b5;try{const _0x5c7ba5=_0x49f97b['test']['id'],_0x513367=_0x49f97b[_0x5d557b(0x17e)],_0x29b4ac=_0x513367[_0x5d557b(0x186)](),_0x4cacc3=_0x513367[_0x5d557b(0x1c2)]()[_0x5d557b(0x1ab)](_0x5c7ba5);this[_0x5d557b(0x1b2)][_0x5d557b(0x1c7)](_0x5d557b(0x182)+_0x5c7ba5);const {[TestFrameworkConstants[_0x5d557b(0x19f)]]:_0x3f1728='',[TestFrameworkConstants[_0x5d557b(0x177)]]:_0x1c9009='',[TestFrameworkConstants[_0x5d557b(0x189)]]:_0x5686a6='',[TestFrameworkConstants['KEY_TEST_ENDED_AT']]:_0x1fafef=''}=_0x4cacc3,_0x134da9=_0x513367[_0x5d557b(0x18b)]()[_0x5d557b(0x173)]()[_0x5d557b(0x181)]('.')[0x1],_0x1ed943=_0x513367[_0x5d557b(0x1dd)]()[_0x5d557b(0x173)]()[_0x5d557b(0x181)]('.')[0x1],_0x424b29=global?.['__workerDetails']?.[_0x5d557b(0x1b1)]?.[_0x5d557b(0x199)];;const _0x1bf2a7=_0x513367[_0x5d557b(0x18c)](),_0x41c725=Buffer[_0x5d557b(0x1ac)](JSON[_0x5d557b(0x1bf)](_0x4cacc3))[_0x5d557b(0x173)](_0x53bcb5[_0x5d557b(0x1aa)]),_0x50e404={'hash':_0x29b4ac[_0x5d557b(0x1b0)](),'threadId':_0x29b4ac[_0x5d557b(0x17c)]()[_0x5d557b(0x173)](),'processId':_0x29b4ac[_0x5d557b(0x1b6)]()[_0x5d557b(0x173)]()},_0x103382={};_0x103382[_0x5d557b(0x174)]=_0x424b29,_0x103382[_0x5d557b(0x1cc)]=_0x3f1728,_0x103382[_0x5d557b(0x176)]=_0x1c9009,_0x103382[_0x5d557b(0x1a6)]=_0x134da9,_0x103382[_0x5d557b(0x1d0)]=_0x1ed943,_0x103382[_0x5d557b(0x1cb)]=_0x5686a6,_0x103382['endedAt']=_0x1fafef,_0x103382['uuid']=_0x1bf2a7,_0x103382['eventJson']=_0x41c725,_0x103382[_0x5d557b(0x19b)]=_0x50e404;const _0x5ddd12=_0x103382,_0x3eb674=await GrpcClient[_0x5d557b(0x171)]()[_0x5d557b(0x18d)](_0x5ddd12);this[_0x5d557b(0x1b2)][_0x5d557b(0x1c7)](_0x5d557b(0x1bc)+_0x5c7ba5+_0x5d557b(0x1a2)+_0x134da9+_0x5d557b(0x1c9)+_0x1ed943);}catch(_0x1a6db4){this['logger'][_0x5d557b(0x19e)](_0x5d557b(0x1a3)+util[_0x5d557b(0x198)](_0x1a6db4));}}async[a78_0x51eba2(0x1d3)](_0x381b3b){const _0x156dd8=a78_0x51eba2,_0x54e6c0={'vIgDU':function(_0x540590,_0x45d8c8){return _0x540590(_0x45d8c8);},'WAhAt':_0x156dd8(0x1c4)};try{if(_0x381b3b[_0x156dd8(0x1b3)]){const _0x2c657e=_0x381b3b[_0x156dd8(0x193)]['testId'];this['logger']['debug']('onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20'+_0x2c657e);const _0x4c33ca=TestInfo[_0x156dd8(0x183)](_0x2c657e),_0x3306d7=TestInfo[_0x156dd8(0x1d8)](_0x2c657e),_0x28e4b6=_0x381b3b[_0x156dd8(0x17e)],_0x3845a0=AutomationFramework[_0x156dd8(0x184)](_0x28e4b6,PlaywrightDriverModule[_0x156dd8(0x1b4)]),_0x342262=_0x3306d7[TestFrameworkConstants[_0x156dd8(0x19f)]],_0x1fb20e=_0x3306d7[TestFrameworkConstants[_0x156dd8(0x177)]],_0x38310f=TestFrameworkState[_0x156dd8(0x1da)][_0x156dd8(0x173)]()[_0x156dd8(0x181)]('.')[0x1],_0x22b97e=HookState[_0x156dd8(0x1d9)][_0x156dd8(0x173)]()[_0x156dd8(0x181)]('.')[0x1],_0x3f64e9=_0x28e4b6[_0x156dd8(0x186)](),_0x2ca383=AutomationFramework[_0x156dd8(0x184)](_0x28e4b6,PlaywrightDriverModule['KEY_HUB_URL'],''),_0x45e329={'provider':_0x54e6c0[_0x156dd8(0x178)](getPlaywrightProvider,_0x2ca383),'frameworkName':_0x28e4b6[_0x156dd8(0x1af)],'frameworkVersion':_0x28e4b6[_0x156dd8(0x1ce)],'frameworkSessionId':AutomationFramework[_0x156dd8(0x184)](_0x28e4b6,PlaywrightDriverModule[_0x156dd8(0x17f)],''),'ref':_0x28e4b6['getRef'](),'hubUrl':_0x2ca383};let _0x172356=AutomationFramework[_0x156dd8(0x184)](_0x28e4b6,PlaywrightDriverModule['KEY_CAPABILITIES'],{});_0x172356=Buffer['from'](JSON[_0x156dd8(0x1bf)](_0x172356))[_0x156dd8(0x173)](_0x54e6c0['WAhAt']);const _0x172c85={'hash':_0x3f64e9[_0x156dd8(0x1b0)](),'threadId':_0x3f64e9[_0x156dd8(0x17c)]()['toString'](),'processId':_0x3f64e9['getProcessId']()['toString']()},_0x26dcd1={};_0x26dcd1[_0x156dd8(0x174)]=_0x3845a0,_0x26dcd1[_0x156dd8(0x1cc)]=_0x342262,_0x26dcd1[_0x156dd8(0x176)]=_0x1fb20e,_0x26dcd1[_0x156dd8(0x1a6)]=_0x38310f,_0x26dcd1[_0x156dd8(0x1d6)]=_0x22b97e,_0x26dcd1[_0x156dd8(0x190)]=_0x4c33ca,_0x26dcd1[_0x156dd8(0x1b7)]=_0x45e329,_0x26dcd1[_0x156dd8(0x1be)]=_0x172356,_0x26dcd1[_0x156dd8(0x19b)]=_0x172c85;const _0x16d0bf=_0x26dcd1;this[_0x156dd8(0x1b2)]['debug']('onPageCreate\x20CBTSession\x20payload:\x20'+util[_0x156dd8(0x198)](_0x16d0bf));const _0x4d653a=await GrpcClient[_0x156dd8(0x171)]()[_0x156dd8(0x1cd)](_0x16d0bf);this[_0x156dd8(0x1b2)][_0x156dd8(0x1c7)](_0x156dd8(0x17b)+_0x2c657e);}}catch(_0x11e561){this['logger'][_0x156dd8(0x19e)](_0x156dd8(0x1c1)+util['format'](_0x11e561));}}}TestHubModule[a78_0x51eba2(0x175)]=a78_0x51eba2(0x1cf),TestHubModule[a78_0x51eba2(0x1c3)]=a78_0x51eba2(0x194),module[a78_0x51eba2(0x18a)]=TestHubModule;function a78_0x53d5(){const _0x1d1111=['CREATE','./playwrightDriverModule.js','testFrameworkState','../framework/testFramework.js','1|7|5|3|2|0|6|4','bind','nGpNb','get','from','sendTestFrameworkEvent','3466519oCOrmc','frameworkName','getId','workerInfo','logger','page','KEY_PLATFORM_INDEX','4TNxrMf','getProcessId','automationSession','631714visFvO','../state/hookState.js','BROWSERSTACK_TESTHUB_JWT','onAllTestEvents','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','../state/automationFrameworkState.js','capabilities','stringify','2cEMOVu','Error\x20in\x20sending\x20CBTSession:\x20','getAllData','KEY_TEST_DEFERRED','base64','getJwt','2938365JlNSbR','debug','getModuleName','\x20hookState:\x20','576486IzwgqL','startedAt','testFrameworkName','testSessionEvent','frameworkVersion','TestHubModule','hookState','matchHookRegex','ENV_VAR','onPageCreate','BROWSERSTACK_TESTHUB_UUID','../../../helpers/classLogger.js','testHookState','values','getTestDetails','POST','TEST','name','55fNAjnI','getCurrentHookState','getInstance','./baseModule','toString','platformIndex','MODULE_NAME','testFrameworkVersion','KEY_TEST_FRAMEWORK_VERSION','vIgDU','8ufrRFQ','../framework/automationFramework.js','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','getThreadId','../framework/constants/testFrameworkConstants.js','instance','KEY_SESSION_ID','../browserstackCLI.js','split','sendTestFrameworkEvent\x20testId:\x20','getTestUUID','getState','../cliUtils.js','getContext','DeArm','env','KEY_TEST_STARTED_AT','exports','getCurrentTestState','getRef','testFrameworkEvent','3302590DBnXFH','1729635tUgNls','testUuid','BLGiO','testhubConfig','testInfo','test_deferred','../state/testFrameworkState.js','4684752eHFjmU','forEach','format','parallelIndex','registerObserver','executionContext','../TestInfo.js','../grpcClient.js','error','KEY_TEST_FRAMEWORK_NAME','getBuildHashedId','9fDyfZg','\x20testState:\x20','Error\x20in\x20sendTestFrameworkEvent:\x20'];a78_0x53d5=function(){return _0x1d1111;};return a78_0x53d5();}