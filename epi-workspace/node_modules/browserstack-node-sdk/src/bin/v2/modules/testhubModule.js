function a76_0xb959(){const _0x5d3f89=['testFrameworkName','hfirG','KEY_TEST_ENDED_AT','CREATE','onAllTestEvents','bind','15775rEtHcz','values','automationSession','getProcessId','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','frameworkVersion','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','executionContext','split','getAllData','uuid','TestHubModule','platformIndex','getRef','../framework/automationFramework.js','Error\x20in\x20sendTestFrameworkEvent:\x20','../state/testFrameworkState.js','JqcQq','toString','test','getModuleName','KEY_HUB_URL','stringify','base64','getTestDetails','getThreadId','name','forEach','test_deferred','../browserstackCLI.js','XrdIE','KEY_SESSION_ID','1391334IWaHEc','testhubConfig','exports','testInfo','MODULE_NAME','logger','util','testHookState','../../../helpers/classLogger.js','374265jgUeIo','testFrameworkState','registerObserver','getBuildHashedId','2836700izflPH','ENV_VAR','666xGsYbu','BROWSERSTACK_TESTHUB_UUID','PDKKN','../cliUtils.js','format','endedAt','matchHookRegex','KEY_TEST_DEFERRED','debug','../framework/constants/testFrameworkConstants.js','../TestInfo.js','O11yHashedID','8AJglRQ','testFrameworkVersion','getCurrentTestState','instance','startedAt','getInstance','onPageCreate\x20CBTSession\x20payload:\x20','getContext','getState','hookState','workerInfo','cdzSv','KEY_CAPABILITIES','840HSbExe','KEY_TEST_FRAMEWORK_NAME','\x20testState:\x20','511458ZkmzbB','getCurrentHookState','TEST','./baseModule','Error\x20in\x20sending\x20CBTSession:\x20','testUuid','353937TgkYTb','getId','onPageCreate','testId','18RRutTc','BROWSERSTACK_TESTHUB_JWT','frameworkName','\x20hookState:\x20','getTestUUID','../grpcClient.js','__workerDetails','error','../state/automationFrameworkState.js','sendTestFrameworkEvent','KEY_TEST_FRAMEWORK_VERSION','./playwrightDriverModule.js','KEY_TEST_STARTED_AT','7|4|2|3|5|0|1|6','MPqEe','KEY_PLATFORM_INDEX'];a76_0xb959=function(){return _0x5d3f89;};return a76_0xb959();}const a76_0x1e0dce=a76_0x51ba;(function(_0x106e8d,_0x864536){const _0x5251cf=a76_0x51ba,_0x455984=_0x106e8d();while(!![]){try{const _0x1a3a4d=parseInt(_0x5251cf(0xa1))/0x1*(-parseInt(_0x5251cf(0x8b))/0x2)+parseInt(_0x5251cf(0x87))/0x3+-parseInt(_0x5251cf(0x71))/0x4*(-parseInt(_0x5251cf(0xca))/0x5)+-parseInt(_0x5251cf(0x81))/0x6+-parseInt(_0x5251cf(0xc1))/0x7+-parseInt(_0x5251cf(0x7e))/0x8*(parseInt(_0x5251cf(0xd0))/0x9)+parseInt(_0x5251cf(0xce))/0xa;if(_0x1a3a4d===_0x864536)break;else _0x455984['push'](_0x455984['shift']());}catch(_0x56f3e7){_0x455984['push'](_0x455984['shift']());}}}(a76_0xb959,0x1cb65));const util=require(a76_0x1e0dce(0xc7)),BaseModule=require(a76_0x1e0dce(0x84)),{createClassLogger}=require(a76_0x1e0dce(0xc9)),AutomationFramework=require(a76_0x1e0dce(0xaf)),AutomationFrameworkState=require(a76_0x1e0dce(0x93)),HookState=require('../state/hookState.js'),TestFramework=require('../framework/testFramework.js'),TestFrameworkState=require(a76_0x1e0dce(0xb1)),PlaywrightDriverModule=require(a76_0x1e0dce(0x96)),TestFrameworkConstants=require(a76_0x1e0dce(0x6e)),GrpcClient=require(a76_0x1e0dce(0x90)),CLIUtils=require(a76_0x1e0dce(0xd3)),TestInfo=require(a76_0x1e0dce(0x6f)),testHubConstants=require('../../../helpers/testhub/constants'),BrowserstackCLI=require(a76_0x1e0dce(0xbe)),{getPlaywrightProvider}=require('../../../helpers/helper.js');class TestHubModule extends BaseModule{[a76_0x1e0dce(0xc6)]=createClassLogger('TestHubModule');constructor(_0x4d1efd){const _0x2b4460=a76_0x1e0dce,_0x5a34a4={};_0x5a34a4[_0x2b4460(0x99)]=_0x2b4460(0x98),_0x5a34a4[_0x2b4460(0x9c)]='TestHubModule';const _0x16619a=_0x5a34a4,_0x5ed063=_0x16619a['MPqEe'][_0x2b4460(0xa9)]('|');let _0x4bd572=0x0;while(!![]){switch(_0x5ed063[_0x4bd572++]){case'0':process['env'][testHubConstants[_0x2b4460(0xcf)][_0x2b4460(0x8c)]]=this['testhubConfig']['getJwt']();continue;case'1':process['env'][testHubConstants[_0x2b4460(0xcf)][_0x2b4460(0xd1)]]=this[_0x2b4460(0xc2)]['getBuildHashedId']();continue;case'2':this['testhubConfig']=_0x4d1efd;continue;case'3':AutomationFramework[_0x2b4460(0xcc)](AutomationFrameworkState[_0x2b4460(0x9e)],HookState['POST'],this['onPageCreate'][_0x2b4460(0xa0)](this));continue;case'4':this[_0x2b4460(0xbb)]=_0x16619a[_0x2b4460(0x9c)];continue;case'5':Object[_0x2b4460(0xa2)](TestFrameworkState)[_0x2b4460(0xbc)](_0x2527fa=>{const _0xc42031=_0x2b4460;Object[_0xc42031(0xa2)](HookState)[_0xc42031(0xbc)](_0x434e58=>{const _0x398404=_0xc42031;TestFramework[_0x398404(0xcc)](_0x2527fa,_0x434e58,this[_0x398404(0x9f)][_0x398404(0xa0)](this));});});continue;case'6':BrowserstackCLI[_0x2b4460(0x70)]=this[_0x2b4460(0xc2)][_0x2b4460(0xcd)]();continue;case'7':super();continue;}break;}}[a76_0x1e0dce(0xb5)](){const _0x5251c7=a76_0x1e0dce;return TestHubModule[_0x5251c7(0xc5)];}[a76_0x1e0dce(0x9f)](_0x4a60a9){const _0x27ed63=a76_0x1e0dce,_0x53c2bc={};_0x53c2bc[_0x27ed63(0x7c)]=function(_0x5261fb,_0x3ad8b8){return _0x5261fb===_0x3ad8b8;};const _0x2da0ec=_0x53c2bc,_0x1bf657=_0x4a60a9[_0x27ed63(0x74)],_0x1b2e59=_0x1bf657[_0x27ed63(0x73)]();(_0x2da0ec[_0x27ed63(0x7c)](_0x1b2e59,TestFrameworkState[_0x27ed63(0x83)])||CLIUtils[_0x27ed63(0xd6)](_0x1b2e59[_0x27ed63(0xb3)]()['split']('.')[0x1]))&&this[_0x27ed63(0x94)](_0x4a60a9);}async[a76_0x1e0dce(0x94)](_0x204738){const _0x45736e=a76_0x1e0dce,_0x84a1a={};_0x84a1a[_0x45736e(0xd2)]=_0x45736e(0xb8);const _0x46651d=_0x84a1a;try{const _0x3e72ee=_0x204738[_0x45736e(0xb4)]['id'],_0x2d7c0d=_0x204738[_0x45736e(0x74)],_0x5222ba=_0x2d7c0d[_0x45736e(0x78)](),_0x4e8391=_0x2d7c0d[_0x45736e(0xaa)]()['get'](_0x3e72ee);this['logger'][_0x45736e(0x6d)]('sendTestFrameworkEvent\x20testId:\x20'+_0x3e72ee);const {[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x2697c7='',[TestFrameworkConstants[_0x45736e(0x95)]]:_0x56e930='',[TestFrameworkConstants[_0x45736e(0x97)]]:_0x1aacbf='',[TestFrameworkConstants[_0x45736e(0x9d)]]:_0x15e376=''}=_0x4e8391,_0xa1da7b=_0x2d7c0d[_0x45736e(0x73)]()[_0x45736e(0xb3)]()[_0x45736e(0xa9)]('.')[0x1],_0x530476=_0x2d7c0d[_0x45736e(0x82)]()[_0x45736e(0xb3)]()[_0x45736e(0xa9)]('.')[0x1],_0x26475f=global?.[_0x45736e(0x91)]?.[_0x45736e(0x7b)]?.['parallelIndex'];;const _0x8dd022=_0x2d7c0d['getRef'](),_0x37c8fc=Buffer['from'](JSON[_0x45736e(0xb7)](_0x4e8391))[_0x45736e(0xb3)](_0x46651d[_0x45736e(0xd2)]),_0x3a42c1={'hash':_0x5222ba[_0x45736e(0x88)](),'threadId':_0x5222ba['getThreadId']()[_0x45736e(0xb3)](),'processId':_0x5222ba[_0x45736e(0xa4)]()['toString']()},_0x37440e={};_0x37440e[_0x45736e(0xad)]=_0x26475f,_0x37440e[_0x45736e(0x9b)]=_0x2697c7,_0x37440e['testFrameworkVersion']=_0x56e930,_0x37440e[_0x45736e(0xcb)]=_0xa1da7b,_0x37440e[_0x45736e(0x7a)]=_0x530476,_0x37440e[_0x45736e(0x75)]=_0x1aacbf,_0x37440e[_0x45736e(0xd5)]=_0x15e376,_0x37440e[_0x45736e(0xab)]=_0x8dd022,_0x37440e['eventJson']=_0x37c8fc,_0x37440e[_0x45736e(0xa8)]=_0x3a42c1;const _0x4cc44a=_0x37440e,_0x43555a=await GrpcClient['getInstance']()['testFrameworkEvent'](_0x4cc44a);this[_0x45736e(0xc6)][_0x45736e(0x6d)](_0x45736e(0xa7)+_0x3e72ee+_0x45736e(0x80)+_0xa1da7b+_0x45736e(0x8e)+_0x530476);}catch(_0x525303){this[_0x45736e(0xc6)]['error'](_0x45736e(0xb0)+util[_0x45736e(0xd4)](_0x525303));}}async[a76_0x1e0dce(0x89)](_0x517b5c){const _0x4ce4f0=a76_0x1e0dce,_0x277b60={'XrdIE':function(_0x368076,_0x31bb0a){return _0x368076(_0x31bb0a);},'JqcQq':_0x4ce4f0(0xb8)};try{if(_0x517b5c['page']){const _0x34e668=_0x517b5c[_0x4ce4f0(0xc4)][_0x4ce4f0(0x8a)];this[_0x4ce4f0(0xc6)][_0x4ce4f0(0x6d)](_0x4ce4f0(0xa5)+_0x34e668);const _0x522527=TestInfo[_0x4ce4f0(0x8f)](_0x34e668),_0x8d15d5=TestInfo[_0x4ce4f0(0xb9)](_0x34e668),_0x202371=_0x517b5c[_0x4ce4f0(0x74)],_0x5480e4=AutomationFramework[_0x4ce4f0(0x79)](_0x202371,PlaywrightDriverModule[_0x4ce4f0(0x9a)]),_0x99e7a4=_0x8d15d5[TestFrameworkConstants[_0x4ce4f0(0x7f)]],_0x3563c5=_0x8d15d5[TestFrameworkConstants[_0x4ce4f0(0x95)]],_0x12b807=TestFrameworkState['TEST']['toString']()[_0x4ce4f0(0xa9)]('.')[0x1],_0xbdabdd=HookState['POST'][_0x4ce4f0(0xb3)]()['split']('.')[0x1],_0x2b5bbf=_0x202371[_0x4ce4f0(0x78)](),_0x2d1f44=AutomationFramework['getState'](_0x202371,PlaywrightDriverModule[_0x4ce4f0(0xb6)],''),_0x47b9c2={'provider':_0x277b60[_0x4ce4f0(0xbf)](getPlaywrightProvider,_0x2d1f44),'frameworkName':_0x202371[_0x4ce4f0(0x8d)],'frameworkVersion':_0x202371[_0x4ce4f0(0xa6)],'frameworkSessionId':AutomationFramework[_0x4ce4f0(0x79)](_0x202371,PlaywrightDriverModule[_0x4ce4f0(0xc0)],''),'ref':_0x202371[_0x4ce4f0(0xae)](),'hubUrl':_0x2d1f44};let _0x225718=AutomationFramework[_0x4ce4f0(0x79)](_0x202371,PlaywrightDriverModule[_0x4ce4f0(0x7d)],{});_0x225718=Buffer['from'](JSON[_0x4ce4f0(0xb7)](_0x225718))[_0x4ce4f0(0xb3)](_0x277b60[_0x4ce4f0(0xb2)]);const _0x74bcaf={'hash':_0x2b5bbf['getId'](),'threadId':_0x2b5bbf[_0x4ce4f0(0xba)]()['toString'](),'processId':_0x2b5bbf[_0x4ce4f0(0xa4)]()['toString']()},_0x2974b3={};_0x2974b3[_0x4ce4f0(0xad)]=_0x5480e4,_0x2974b3[_0x4ce4f0(0x9b)]=_0x99e7a4,_0x2974b3[_0x4ce4f0(0x72)]=_0x3563c5,_0x2974b3[_0x4ce4f0(0xcb)]=_0x12b807,_0x2974b3[_0x4ce4f0(0xc8)]=_0xbdabdd,_0x2974b3[_0x4ce4f0(0x86)]=_0x522527,_0x2974b3[_0x4ce4f0(0xa3)]=_0x47b9c2,_0x2974b3['capabilities']=_0x225718,_0x2974b3[_0x4ce4f0(0xa8)]=_0x74bcaf;const _0x5225bf=_0x2974b3;this[_0x4ce4f0(0xc6)][_0x4ce4f0(0x6d)](_0x4ce4f0(0x77)+util[_0x4ce4f0(0xd4)](_0x5225bf));const _0x237592=await GrpcClient[_0x4ce4f0(0x76)]()['testSessionEvent'](_0x5225bf);this['logger'][_0x4ce4f0(0x6d)]('onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20'+_0x34e668);}}catch(_0x107839){this[_0x4ce4f0(0xc6)][_0x4ce4f0(0x92)](_0x4ce4f0(0x85)+util[_0x4ce4f0(0xd4)](_0x107839));}}}function a76_0x51ba(_0x159a78,_0x172cc9){const _0xb95931=a76_0xb959();return a76_0x51ba=function(_0x51badf,_0x55cfd6){_0x51badf=_0x51badf-0x6c;let _0x457055=_0xb95931[_0x51badf];return _0x457055;},a76_0x51ba(_0x159a78,_0x172cc9);}TestHubModule['MODULE_NAME']=a76_0x1e0dce(0xac),TestHubModule[a76_0x1e0dce(0x6c)]=a76_0x1e0dce(0xbd),module[a76_0x1e0dce(0xc3)]=TestHubModule;