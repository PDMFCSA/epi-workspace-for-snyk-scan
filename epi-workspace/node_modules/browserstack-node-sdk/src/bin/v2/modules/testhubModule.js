const a78_0x91fb5d=a78_0xf84a;(function(_0x2462d2,_0x125bf2){const _0xa0679=a78_0xf84a,_0x2d6a3f=_0x2462d2();while(!![]){try{const _0x1b0ba6=-parseInt(_0xa0679(0xb5))/0x1+-parseInt(_0xa0679(0xc8))/0x2*(-parseInt(_0xa0679(0xc9))/0x3)+-parseInt(_0xa0679(0xfd))/0x4+parseInt(_0xa0679(0xe2))/0x5*(parseInt(_0xa0679(0x107))/0x6)+parseInt(_0xa0679(0xbf))/0x7*(-parseInt(_0xa0679(0xf7))/0x8)+-parseInt(_0xa0679(0x10b))/0x9*(parseInt(_0xa0679(0xf3))/0xa)+parseInt(_0xa0679(0xaf))/0xb;if(_0x1b0ba6===_0x125bf2)break;else _0x2d6a3f['push'](_0x2d6a3f['shift']());}catch(_0x481b61){_0x2d6a3f['push'](_0x2d6a3f['shift']());}}}(a78_0x4418,0x75c92));const util=require('util'),BaseModule=require(a78_0x91fb5d(0xdc)),{createClassLogger}=require('../../../helpers/classLogger.js'),AutomationFramework=require('../framework/automationFramework.js'),AutomationFrameworkState=require('../state/automationFrameworkState.js'),HookState=require(a78_0x91fb5d(0xe4)),TestFramework=require(a78_0x91fb5d(0xc2)),TestFrameworkState=require('../state/testFrameworkState.js'),PlaywrightDriverModule=require(a78_0x91fb5d(0xd1)),TestFrameworkConstants=require('../framework/constants/testFrameworkConstants.js'),GrpcClient=require(a78_0x91fb5d(0xed)),CLIUtils=require(a78_0x91fb5d(0xba)),TestInfo=require(a78_0x91fb5d(0xeb)),testHubConstants=require('../../../helpers/testhub/constants'),BrowserstackCLI=require('../browserstackCLI.js'),{getPlaywrightProvider}=require(a78_0x91fb5d(0x106)),{getTestRunIdentifier}=require(a78_0x91fb5d(0xd4));class TestHubModule extends BaseModule{[a78_0x91fb5d(0x101)]=createClassLogger(a78_0x91fb5d(0xcb));constructor(_0xfd00ff){const _0x683ac0=a78_0x91fb5d,_0x203b92={};_0x203b92[_0x683ac0(0xb3)]=_0x683ac0(0xfb),_0x203b92[_0x683ac0(0xbe)]=_0x683ac0(0xcb);const _0x5c95f5=_0x203b92,_0x48e070=_0x5c95f5[_0x683ac0(0xb3)][_0x683ac0(0xb6)]('|');let _0x36baa9=0x0;while(!![]){switch(_0x48e070[_0x36baa9++]){case'0':BrowserstackCLI[_0x683ac0(0xb0)]=this[_0x683ac0(0x100)][_0x683ac0(0x105)]();continue;case'1':process['env'][testHubConstants[_0x683ac0(0xf8)][_0x683ac0(0xf5)]]=this[_0x683ac0(0x100)][_0x683ac0(0x105)]();continue;case'2':super();continue;case'3':AutomationFramework[_0x683ac0(0xf4)](AutomationFrameworkState['CREATE'],HookState[_0x683ac0(0xdd)],this[_0x683ac0(0x10d)][_0x683ac0(0xc4)](this));continue;case'4':this[_0x683ac0(0x100)]=_0xfd00ff;continue;case'5':process['env'][testHubConstants[_0x683ac0(0xf8)][_0x683ac0(0xd3)]]=this[_0x683ac0(0x100)]['getJwt']();continue;case'6':Object[_0x683ac0(0xd6)](TestFrameworkState)[_0x683ac0(0xf6)](_0x45f345=>{const _0x11d9f0=_0x683ac0;Object[_0x11d9f0(0xd6)](HookState)[_0x11d9f0(0xf6)](_0x53385e=>{const _0x1a6759=_0x11d9f0;TestFramework[_0x1a6759(0xf4)](_0x45f345,_0x53385e,this['onAllTestEvents'][_0x1a6759(0xc4)](this));});});continue;case'7':this[_0x683ac0(0xe0)]=_0x5c95f5[_0x683ac0(0xbe)];continue;}break;}}[a78_0x91fb5d(0xdf)](){const _0x5d1623=a78_0x91fb5d;return TestHubModule[_0x5d1623(0xce)];}[a78_0x91fb5d(0xd8)](_0x588703){const _0x2290ce=a78_0x91fb5d,_0x32bda1={};_0x32bda1[_0x2290ce(0x109)]=function(_0x28e3a0,_0x1374ae){return _0x28e3a0===_0x1374ae;};const _0x17c7ca=_0x32bda1,_0x54ac27=_0x588703[_0x2290ce(0xb2)],_0xe5996b=_0x54ac27[_0x2290ce(0xca)]();(_0x17c7ca[_0x2290ce(0x109)](_0xe5996b,TestFrameworkState[_0x2290ce(0xc6)])||CLIUtils['matchHookRegex'](_0xe5996b[_0x2290ce(0xda)]()[_0x2290ce(0xb6)]('.')[0x1]))&&this[_0x2290ce(0xe7)](_0x588703);}async[a78_0x91fb5d(0xe7)](_0x459375){const _0x31f5bb=a78_0x91fb5d,_0x24b3e7={'PCDEy':function(_0x12acc7,_0x506e5b,_0x272a82){return _0x12acc7(_0x506e5b,_0x272a82);},'EWOAR':_0x31f5bb(0xcd)};try{const _0x5220b1=_0x459375['test']['id'],_0x1aa1a0=_0x24b3e7[_0x31f5bb(0xe5)](getTestRunIdentifier,_0x459375[_0x31f5bb(0xcc)],_0x459375['result']['retry']),_0x49cd86=_0x459375[_0x31f5bb(0xb2)],_0x5c6b3c=_0x49cd86[_0x31f5bb(0x103)](),_0x22e8e8=_0x49cd86['getAllData']()['get'](_0x1aa1a0);this[_0x31f5bb(0x101)][_0x31f5bb(0xff)](_0x31f5bb(0x110)+_0x5220b1);const {[TestFrameworkConstants[_0x31f5bb(0xea)]]:_0x46a350='',[TestFrameworkConstants[_0x31f5bb(0xc7)]]:_0x3e793b='',[TestFrameworkConstants[_0x31f5bb(0xe9)]]:_0x2dbf4b='',[TestFrameworkConstants[_0x31f5bb(0xec)]]:_0x50c393=''}=_0x22e8e8,_0x41af9b=_0x49cd86[_0x31f5bb(0xca)]()[_0x31f5bb(0xda)]()[_0x31f5bb(0xb6)]('.')[0x1],_0x57c6e2=_0x49cd86['getCurrentHookState']()[_0x31f5bb(0xda)]()[_0x31f5bb(0xb6)]('.')[0x1],_0x6d5dc9=global?.[_0x31f5bb(0x10f)]?.['workerInfo']?.[_0x31f5bb(0x108)];;const _0xa1241f=_0x49cd86[_0x31f5bb(0xb9)](),_0x298397=Buffer[_0x31f5bb(0xee)](JSON[_0x31f5bb(0xde)](_0x22e8e8))['toString'](_0x24b3e7[_0x31f5bb(0xc5)]),_0x3f1825={'hash':_0x5c6b3c[_0x31f5bb(0xb7)](),'threadId':_0x5c6b3c[_0x31f5bb(0xe8)]()[_0x31f5bb(0xda)](),'processId':_0x5c6b3c['getProcessId']()[_0x31f5bb(0xda)]()},_0x4b0813={};_0x4b0813[_0x31f5bb(0xfc)]=_0x6d5dc9,_0x4b0813[_0x31f5bb(0x10e)]=_0x46a350,_0x4b0813['testFrameworkVersion']=_0x3e793b,_0x4b0813[_0x31f5bb(0xb8)]=_0x41af9b,_0x4b0813['hookState']=_0x57c6e2,_0x4b0813['startedAt']=_0x2dbf4b,_0x4b0813[_0x31f5bb(0xe6)]=_0x50c393,_0x4b0813[_0x31f5bb(0xc0)]=_0xa1241f,_0x4b0813[_0x31f5bb(0xbb)]=_0x298397,_0x4b0813[_0x31f5bb(0xad)]=_0x3f1825;const _0x3b5519=_0x4b0813,_0x36f78c=await GrpcClient[_0x31f5bb(0xb4)]()['testFrameworkEvent'](_0x3b5519);this[_0x31f5bb(0x101)][_0x31f5bb(0xff)](_0x31f5bb(0xdb)+_0x5220b1+_0x31f5bb(0xef)+_0x41af9b+_0x31f5bb(0xae)+_0x57c6e2);}catch(_0x2b8cd6){this['logger']['error'](_0x31f5bb(0xd2)+util[_0x31f5bb(0x102)](_0x2b8cd6));}}async[a78_0x91fb5d(0x10d)](_0x1e98a6){const _0x50aeb6=a78_0x91fb5d,_0x2617cd={'UUHrx':function(_0x295ce8,_0x51c0eb){return _0x295ce8(_0x51c0eb);},'NvTps':_0x50aeb6(0xcd)};try{if(_0x1e98a6[_0x50aeb6(0x104)]){const _0x5f3398=_0x1e98a6[_0x50aeb6(0xc3)][_0x50aeb6(0xb1)];this[_0x50aeb6(0x101)][_0x50aeb6(0xff)](_0x50aeb6(0xf9)+_0x5f3398);const _0x14d389=TestInfo['getTestIdentifierFromTestInfo'](_0x1e98a6[_0x50aeb6(0xc3)],_0x1e98a6[_0x50aeb6(0xc3)][_0x50aeb6(0xf0)]),_0x42e0f2=TestInfo[_0x50aeb6(0xfe)](_0x14d389),_0x2849b4=TestInfo['getTestDetails'](_0x14d389),_0x5af003=_0x1e98a6[_0x50aeb6(0xb2)],_0x303df4=AutomationFramework['getState'](_0x5af003,PlaywrightDriverModule['KEY_PLATFORM_INDEX']),_0x3be188=_0x2849b4[TestFrameworkConstants[_0x50aeb6(0xea)]],_0x5f1c8f=_0x2849b4[TestFrameworkConstants[_0x50aeb6(0xc7)]],_0x3510ee=TestFrameworkState[_0x50aeb6(0xc6)][_0x50aeb6(0xda)]()[_0x50aeb6(0xb6)]('.')[0x1],_0x59dc3e=HookState[_0x50aeb6(0xdd)][_0x50aeb6(0xda)]()['split']('.')[0x1],_0x21c936=_0x5af003[_0x50aeb6(0x103)](),_0x1b6466=AutomationFramework[_0x50aeb6(0xc1)](_0x5af003,PlaywrightDriverModule[_0x50aeb6(0x10c)],''),_0x2e8d0c={'provider':_0x2617cd[_0x50aeb6(0xbc)](getPlaywrightProvider,_0x1b6466),'frameworkName':_0x5af003[_0x50aeb6(0xfa)],'frameworkVersion':_0x5af003['frameworkVersion'],'frameworkSessionId':AutomationFramework[_0x50aeb6(0xc1)](_0x5af003,PlaywrightDriverModule['KEY_SESSION_ID'],''),'ref':_0x5af003[_0x50aeb6(0xb9)](),'hubUrl':_0x1b6466};let _0x196772=AutomationFramework[_0x50aeb6(0xc1)](_0x5af003,PlaywrightDriverModule[_0x50aeb6(0xe3)],{});_0x196772=Buffer['from'](JSON[_0x50aeb6(0xde)](_0x196772))[_0x50aeb6(0xda)](_0x2617cd[_0x50aeb6(0xe1)]);const _0xfe631a={'hash':_0x21c936[_0x50aeb6(0xb7)](),'threadId':_0x21c936[_0x50aeb6(0xe8)]()[_0x50aeb6(0xda)](),'processId':_0x21c936['getProcessId']()[_0x50aeb6(0xda)]()},_0x2f897c={};_0x2f897c[_0x50aeb6(0xfc)]=_0x303df4,_0x2f897c[_0x50aeb6(0x10e)]=_0x3be188,_0x2f897c[_0x50aeb6(0xbd)]=_0x5f1c8f,_0x2f897c['testFrameworkState']=_0x3510ee,_0x2f897c[_0x50aeb6(0xcf)]=_0x59dc3e,_0x2f897c['testUuid']=_0x42e0f2,_0x2f897c[_0x50aeb6(0xd5)]=_0x2e8d0c,_0x2f897c[_0x50aeb6(0xf1)]=_0x196772,_0x2f897c[_0x50aeb6(0xad)]=_0xfe631a;const _0x10cf3b=_0x2f897c;this[_0x50aeb6(0x101)][_0x50aeb6(0xff)](_0x50aeb6(0xd7)+util[_0x50aeb6(0x102)](_0x10cf3b));const _0x3bbf22=await GrpcClient['getInstance']()['testSessionEvent'](_0x10cf3b);this[_0x50aeb6(0x101)]['debug'](_0x50aeb6(0xf2)+_0x5f3398);}}catch(_0x1a755a){this[_0x50aeb6(0x101)][_0x50aeb6(0xd9)]('Error\x20in\x20sending\x20CBTSession:\x20'+util[_0x50aeb6(0x102)](_0x1a755a));}}}function a78_0xf84a(_0x12dc26,_0x85c640){const _0x44187a=a78_0x4418();return a78_0xf84a=function(_0xf84a44,_0x1da12b){_0xf84a44=_0xf84a44-0xad;let _0x5e1031=_0x44187a[_0xf84a44];return _0x5e1031;},a78_0xf84a(_0x12dc26,_0x85c640);}function a78_0x4418(){const _0x4902d8=['split','getId','testFrameworkState','getRef','../cliUtils.js','eventJson','UUHrx','testFrameworkVersion','AZfSd','406259LirmQa','uuid','getState','../framework/testFramework.js','testInfo','bind','EWOAR','TEST','KEY_TEST_FRAMEWORK_VERSION','4098wsZySp','1227bpDJNQ','getCurrentTestState','TestHubModule','test','base64','MODULE_NAME','testHookState','KEY_TEST_DEFERRED','./playwrightDriverModule.js','Error\x20in\x20sendTestFrameworkEvent:\x20','BROWSERSTACK_TESTHUB_JWT','../../playwright/reporter/pwUtils.js','automationSession','values','onPageCreate\x20CBTSession\x20payload:\x20','onAllTestEvents','error','toString','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','./baseModule','POST','stringify','getModuleName','name','NvTps','10CKzXNu','KEY_CAPABILITIES','../state/hookState.js','PCDEy','endedAt','sendTestFrameworkEvent','getThreadId','KEY_TEST_STARTED_AT','KEY_TEST_FRAMEWORK_NAME','../TestInfo.js','KEY_TEST_ENDED_AT','../grpcClient.js','from','\x20testState:\x20','retry','capabilities','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','30nEbJUC','registerObserver','BROWSERSTACK_TESTHUB_UUID','forEach','120TRwGRw','ENV_VAR','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','frameworkName','2|7|4|3|6|5|1|0','platformIndex','426348lfULNi','getTestUUID','debug','testhubConfig','logger','format','getContext','page','getBuildHashedId','../../../helpers/helper.js','801912RSWKsj','parallelIndex','UrDiq','test_deferred','2834091yotJvy','KEY_HUB_URL','onPageCreate','testFrameworkName','__workerDetails','sendTestFrameworkEvent\x20testId:\x20','executionContext','\x20hookState:\x20','22692307FepBfU','O11yHashedID','testId','instance','TrZjh','getInstance','763993WxgKZl'];a78_0x4418=function(){return _0x4902d8;};return a78_0x4418();}TestHubModule[a78_0x91fb5d(0xce)]=a78_0x91fb5d(0xcb),TestHubModule[a78_0x91fb5d(0xd0)]=a78_0x91fb5d(0x10a),module['exports']=TestHubModule;