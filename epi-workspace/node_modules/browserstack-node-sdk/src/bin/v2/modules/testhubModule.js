function a76_0x5d14(_0x516a1a,_0x5ca3f0){const _0x4fca39=a76_0x4fca();return a76_0x5d14=function(_0x5d14e3,_0x4cf6ad){_0x5d14e3=_0x5d14e3-0x18f;let _0x488020=_0x4fca39[_0x5d14e3];return _0x488020;},a76_0x5d14(_0x516a1a,_0x5ca3f0);}const a76_0x3070c4=a76_0x5d14;(function(_0x4d0247,_0xf7f969){const _0x37c710=a76_0x5d14,_0x3474a0=_0x4d0247();while(!![]){try{const _0x3f152e=-parseInt(_0x37c710(0x1f2))/0x1*(parseInt(_0x37c710(0x19f))/0x2)+-parseInt(_0x37c710(0x1f6))/0x3+-parseInt(_0x37c710(0x1d1))/0x4*(-parseInt(_0x37c710(0x1d5))/0x5)+parseInt(_0x37c710(0x1c8))/0x6*(parseInt(_0x37c710(0x1ee))/0x7)+-parseInt(_0x37c710(0x1c4))/0x8+parseInt(_0x37c710(0x19a))/0x9*(-parseInt(_0x37c710(0x1ac))/0xa)+parseInt(_0x37c710(0x1cd))/0xb;if(_0x3f152e===_0xf7f969)break;else _0x3474a0['push'](_0x3474a0['shift']());}catch(_0x2bee60){_0x3474a0['push'](_0x3474a0['shift']());}}}(a76_0x4fca,0xf192a));function a76_0x4fca(){const _0x58445f=['bind','../browserstackCLI.js','\x20testState:\x20','format','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','getInstance','testHookState','ePGNL','getTestDetails','error','IYupo','../cliUtils.js','getJwt','getAllData','9507248jtgkIo','frameworkVersion','from','onAllTestEvents','1749954uSfVBF','../grpcClient.js','../../../helpers/testhub/constants','csbZe','parallelIndex','70669291PJRrTE','KEY_SESSION_ID','eventJson','KEY_TEST_FRAMEWORK_VERSION','56CWGKXc','../framework/constants/testFrameworkConstants.js','getContext','onPageCreate','109385SNMrkY','platformIndex','registerObserver','__workerDetails','split','getState','TEST','../../../helpers/classLogger.js','KEY_HUB_URL','testhubConfig','POST','getProcessId','testFrameworkName','KEY_TEST_DEFERRED','4|3|7|1|6|2|0|5','getBuildHashedId','frameworkName','debug','KEY_TEST_FRAMEWORK_NAME','getCurrentTestState','\x20hookState:\x20','KEY_TEST_STARTED_AT','base64','../state/testFrameworkState.js','values','21IkabyI','../state/hookState.js','BROWSERSTACK_TESTHUB_UUID','TestHubModule','6025krLhmR','sendTestFrameworkEvent','KEY_CAPABILITIES','instance','5036235MtSbNr','testInfo','workerInfo','getModuleName','./playwrightDriverModule.js','page','getCurrentHookState','testUuid','toString','../../../helpers/helper.js','forEach','CREATE','210213mBNmDB','stringify','mfwDH','../state/automationFrameworkState.js','logger','632AAsqqc','name','test_deferred','KEY_TEST_ENDED_AT','Error\x20in\x20sending\x20CBTSession:\x20','getRef','testFrameworkEvent','getThreadId','wkKAO','executionContext','capabilities','test','env','790uVPaql','automationSession','sendTestFrameworkEvent\x20testId:\x20','O11yHashedID','endedAt','MODULE_NAME','ENV_VAR','uuid','hookState','./baseModule'];a76_0x4fca=function(){return _0x58445f;};return a76_0x4fca();}const util=require('util'),BaseModule=require(a76_0x3070c4(0x1b5)),{createClassLogger}=require(a76_0x3070c4(0x1dc)),AutomationFramework=require('../framework/automationFramework.js'),AutomationFrameworkState=require(a76_0x3070c4(0x19d)),HookState=require(a76_0x3070c4(0x1ef)),TestFramework=require('../framework/testFramework.js'),TestFrameworkState=require(a76_0x3070c4(0x1ec)),PlaywrightDriverModule=require(a76_0x3070c4(0x192)),TestFrameworkConstants=require(a76_0x3070c4(0x1d2)),GrpcClient=require(a76_0x3070c4(0x1c9)),CLIUtils=require(a76_0x3070c4(0x1c1)),TestInfo=require('../TestInfo.js'),testHubConstants=require(a76_0x3070c4(0x1ca)),BrowserstackCLI=require(a76_0x3070c4(0x1b7)),{getPlaywrightProvider}=require(a76_0x3070c4(0x197));class TestHubModule extends BaseModule{[a76_0x3070c4(0x19e)]=createClassLogger(a76_0x3070c4(0x1f1));constructor(_0x4d01ed){const _0x122463=a76_0x3070c4,_0x3934ff={};_0x3934ff[_0x122463(0x1bd)]=_0x122463(0x1e3),_0x3934ff[_0x122463(0x1cb)]=_0x122463(0x1f1);const _0x40bbb0=_0x3934ff,_0x415360=_0x40bbb0[_0x122463(0x1bd)][_0x122463(0x1d9)]('|');let _0x245da2=0x0;while(!![]){switch(_0x415360[_0x245da2++]){case'0':process[_0x122463(0x1ab)][testHubConstants[_0x122463(0x1b2)][_0x122463(0x1f0)]]=this[_0x122463(0x1de)][_0x122463(0x1e4)]();continue;case'1':AutomationFramework[_0x122463(0x1d7)](AutomationFrameworkState[_0x122463(0x199)],HookState[_0x122463(0x1df)],this[_0x122463(0x1d4)][_0x122463(0x1b6)](this));continue;case'2':process[_0x122463(0x1ab)][testHubConstants[_0x122463(0x1b2)]['BROWSERSTACK_TESTHUB_JWT']]=this[_0x122463(0x1de)][_0x122463(0x1c2)]();continue;case'3':this[_0x122463(0x1a0)]=_0x40bbb0[_0x122463(0x1cb)];continue;case'4':super();continue;case'5':BrowserstackCLI[_0x122463(0x1af)]=this[_0x122463(0x1de)]['getBuildHashedId']();continue;case'6':Object['values'](TestFrameworkState)[_0x122463(0x198)](_0x3aef5d=>{const _0x11b2e5=_0x122463;Object[_0x11b2e5(0x1ed)](HookState)[_0x11b2e5(0x198)](_0x3f9a8b=>{const _0x5f1aaf=_0x11b2e5;TestFramework['registerObserver'](_0x3aef5d,_0x3f9a8b,this[_0x5f1aaf(0x1c7)]['bind'](this));});});continue;case'7':this[_0x122463(0x1de)]=_0x4d01ed;continue;}break;}}[a76_0x3070c4(0x191)](){const _0x46e585=a76_0x3070c4;return TestHubModule[_0x46e585(0x1b1)];}[a76_0x3070c4(0x1c7)](_0x7aea7d){const _0x42f49c=a76_0x3070c4,_0x33adc2={};_0x33adc2[_0x42f49c(0x19c)]=function(_0x198ee2,_0x9fb4be){return _0x198ee2===_0x9fb4be;};const _0x241582=_0x33adc2,_0x406f85=_0x7aea7d[_0x42f49c(0x1f5)],_0x1aa8cd=_0x406f85[_0x42f49c(0x1e8)]();(_0x241582[_0x42f49c(0x19c)](_0x1aa8cd,TestFrameworkState[_0x42f49c(0x1db)])||CLIUtils['matchHookRegex'](_0x1aa8cd[_0x42f49c(0x196)]()[_0x42f49c(0x1d9)]('.')[0x1]))&&this[_0x42f49c(0x1f3)](_0x7aea7d);}async[a76_0x3070c4(0x1f3)](_0x15a8bc){const _0x110efa=a76_0x3070c4,_0x47b1db={};_0x47b1db[_0x110efa(0x1c0)]=_0x110efa(0x1eb);const _0x565379=_0x47b1db;try{const _0x181760=_0x15a8bc[_0x110efa(0x1aa)]['id'],_0xef04ca=_0x15a8bc['instance'],_0x525798=_0xef04ca[_0x110efa(0x1d3)](),_0x277602=_0xef04ca[_0x110efa(0x1c3)]()['get'](_0x181760);this[_0x110efa(0x19e)][_0x110efa(0x1e6)](_0x110efa(0x1ae)+_0x181760);const {[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0xa4f2be='',[TestFrameworkConstants[_0x110efa(0x1d0)]]:_0x41586b='',[TestFrameworkConstants[_0x110efa(0x1ea)]]:_0xe33728='',[TestFrameworkConstants[_0x110efa(0x1a2)]]:_0x55889a=''}=_0x277602,_0x2740ab=_0xef04ca[_0x110efa(0x1e8)]()[_0x110efa(0x196)]()[_0x110efa(0x1d9)]('.')[0x1],_0x33dd66=_0xef04ca[_0x110efa(0x194)]()[_0x110efa(0x196)]()[_0x110efa(0x1d9)]('.')[0x1],_0x53bc2b=global?.[_0x110efa(0x1d8)]?.[_0x110efa(0x190)]?.[_0x110efa(0x1cc)];;const _0x56fcfe=_0xef04ca[_0x110efa(0x1a4)](),_0x1bc0d6=Buffer['from'](JSON['stringify'](_0x277602))[_0x110efa(0x196)](_0x565379['IYupo']),_0x33016e={'hash':_0x525798['getId'](),'threadId':_0x525798[_0x110efa(0x1a6)]()[_0x110efa(0x196)](),'processId':_0x525798['getProcessId']()[_0x110efa(0x196)]()},_0x5b4d62={};_0x5b4d62[_0x110efa(0x1d6)]=_0x53bc2b,_0x5b4d62[_0x110efa(0x1e1)]=_0xa4f2be,_0x5b4d62['testFrameworkVersion']=_0x41586b,_0x5b4d62['testFrameworkState']=_0x2740ab,_0x5b4d62[_0x110efa(0x1b4)]=_0x33dd66,_0x5b4d62['startedAt']=_0xe33728,_0x5b4d62[_0x110efa(0x1b0)]=_0x55889a,_0x5b4d62[_0x110efa(0x1b3)]=_0x56fcfe,_0x5b4d62[_0x110efa(0x1cf)]=_0x1bc0d6,_0x5b4d62[_0x110efa(0x1a8)]=_0x33016e;const _0x3fa452=_0x5b4d62,_0x13980e=await GrpcClient[_0x110efa(0x1bb)]()[_0x110efa(0x1a5)](_0x3fa452);this[_0x110efa(0x19e)][_0x110efa(0x1e6)]('sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20'+_0x181760+_0x110efa(0x1b8)+_0x2740ab+_0x110efa(0x1e9)+_0x33dd66);}catch(_0x285ddd){this[_0x110efa(0x19e)]['error']('Error\x20in\x20sendTestFrameworkEvent:\x20'+util[_0x110efa(0x1b9)](_0x285ddd));}}async[a76_0x3070c4(0x1d4)](_0x36f45d){const _0x25e27e=a76_0x3070c4,_0x2b26c3={'IJxdr':function(_0x250036,_0x53b882){return _0x250036(_0x53b882);},'wkKAO':_0x25e27e(0x1eb)};try{if(_0x36f45d[_0x25e27e(0x193)]){const _0x4443a0=_0x36f45d[_0x25e27e(0x18f)]['testId'];this[_0x25e27e(0x19e)][_0x25e27e(0x1e6)](_0x25e27e(0x1ba)+_0x4443a0);const _0x29e6d8=TestInfo['getTestUUID'](_0x4443a0),_0x223a36=TestInfo[_0x25e27e(0x1be)](_0x4443a0),_0x4b0969=_0x36f45d[_0x25e27e(0x1f5)],_0x5418a1=AutomationFramework[_0x25e27e(0x1da)](_0x4b0969,PlaywrightDriverModule['KEY_PLATFORM_INDEX']),_0x5587d1=_0x223a36[TestFrameworkConstants[_0x25e27e(0x1e7)]],_0x15d938=_0x223a36[TestFrameworkConstants[_0x25e27e(0x1d0)]],_0x708489=TestFrameworkState[_0x25e27e(0x1db)][_0x25e27e(0x196)]()[_0x25e27e(0x1d9)]('.')[0x1],_0x262e1e=HookState[_0x25e27e(0x1df)][_0x25e27e(0x196)]()[_0x25e27e(0x1d9)]('.')[0x1],_0x3e3330=_0x4b0969[_0x25e27e(0x1d3)](),_0x379a30=AutomationFramework[_0x25e27e(0x1da)](_0x4b0969,PlaywrightDriverModule[_0x25e27e(0x1dd)],''),_0x4c5bbd={'provider':_0x2b26c3['IJxdr'](getPlaywrightProvider,_0x379a30),'frameworkName':_0x4b0969[_0x25e27e(0x1e5)],'frameworkVersion':_0x4b0969[_0x25e27e(0x1c5)],'frameworkSessionId':AutomationFramework[_0x25e27e(0x1da)](_0x4b0969,PlaywrightDriverModule[_0x25e27e(0x1ce)],''),'ref':_0x4b0969['getRef'](),'hubUrl':_0x379a30};let _0x266ba5=AutomationFramework['getState'](_0x4b0969,PlaywrightDriverModule[_0x25e27e(0x1f4)],{});_0x266ba5=Buffer[_0x25e27e(0x1c6)](JSON[_0x25e27e(0x19b)](_0x266ba5))[_0x25e27e(0x196)](_0x2b26c3[_0x25e27e(0x1a7)]);const _0xff24d5={'hash':_0x3e3330['getId'](),'threadId':_0x3e3330['getThreadId']()['toString'](),'processId':_0x3e3330[_0x25e27e(0x1e0)]()[_0x25e27e(0x196)]()},_0x4cb130={};_0x4cb130['platformIndex']=_0x5418a1,_0x4cb130[_0x25e27e(0x1e1)]=_0x5587d1,_0x4cb130['testFrameworkVersion']=_0x15d938,_0x4cb130['testFrameworkState']=_0x708489,_0x4cb130[_0x25e27e(0x1bc)]=_0x262e1e,_0x4cb130[_0x25e27e(0x195)]=_0x29e6d8,_0x4cb130[_0x25e27e(0x1ad)]=_0x4c5bbd,_0x4cb130[_0x25e27e(0x1a9)]=_0x266ba5,_0x4cb130['executionContext']=_0xff24d5;const _0x591bdd=_0x4cb130;this[_0x25e27e(0x19e)]['debug']('onPageCreate\x20CBTSession\x20payload:\x20'+util['format'](_0x591bdd));const _0x432337=await GrpcClient['getInstance']()['testSessionEvent'](_0x591bdd);this[_0x25e27e(0x19e)][_0x25e27e(0x1e6)]('onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20'+_0x4443a0);}}catch(_0x245b3a){this[_0x25e27e(0x19e)][_0x25e27e(0x1bf)](_0x25e27e(0x1a3)+util['format'](_0x245b3a));}}}TestHubModule[a76_0x3070c4(0x1b1)]=a76_0x3070c4(0x1f1),TestHubModule[a76_0x3070c4(0x1e2)]=a76_0x3070c4(0x1a1),module['exports']=TestHubModule;