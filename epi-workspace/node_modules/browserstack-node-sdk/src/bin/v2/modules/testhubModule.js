const a74_0x5d0d51=a74_0xa9dd;function a74_0x560a(){const _0x1e6988=['vaWOa','224168SRZsDy','../state/testFrameworkState.js','__workerDetails','../state/hookState.js','stringify','testInfo','toString','MODULE_NAME','hookState','nGKLt','base64','get','O11yHashedID','Error\x20in\x20sendTestFrameworkEvent:\x20','KEY_TEST_DEFERRED','testFrameworkState','testUuid','logger','9waZiVS','automationSession','4|7|5|3|2|1|6|0','40554AweMKT','testId','values','../cliUtils.js','../browserstackCLI.js','getRef','split','env','cAeSv','bind','uyrub','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','exports','\x20testState:\x20','./playwrightDriverModule.js','testHookState','matchHookRegex','POST','frameworkVersion','getBuildHashedId','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','getAllData','TestHubModule','KEY_TEST_FRAMEWORK_VERSION','KEY_SESSION_ID','CREATE','../../../helpers/testhub/constants','../TestInfo.js','executionContext','44729CTRIFZ','testSessionEvent','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','format','parallelIndex','../../../helpers/classLogger.js','TEST','test_deferred','KEY_TEST_FRAMEWORK_NAME','KEY_HUB_URL','sendTestFrameworkEvent','debug','capabilities','getInstance','1112392TcmchP','getId','platformIndex','testFrameworkVersion','getTestDetails','testFrameworkEvent','uuid','BROWSERSTACK_TESTHUB_UUID','onAllTestEvents','from','testFrameworkName','getModuleName','test','10MaPGWa','4252182rRhGTe','getCurrentHookState','../framework/constants/testFrameworkConstants.js','KEY_CAPABILITIES','BROWSERSTACK_TESTHUB_JWT','../grpcClient.js','registerObserver','instance','2tdDgin','getThreadId','709130CPKqqt','330933rUVnAv','onPageCreate','testhubConfig','182SidTJe','getProcessId','getCurrentTestState','getContext','onPageCreate\x20CBTSession\x20payload:\x20','frameworkName','forEach','cxZrG','ENV_VAR','./baseModule','dJdjn','getState'];a74_0x560a=function(){return _0x1e6988;};return a74_0x560a();}(function(_0x514cbf,_0x44a103){const _0x5af2ff=a74_0xa9dd,_0xd48bf6=_0x514cbf();while(!![]){try{const _0x536e59=parseInt(_0x5af2ff(0x160))/0x1+-parseInt(_0x5af2ff(0x11b))/0x2*(parseInt(_0x5af2ff(0x11e))/0x3)+-parseInt(_0x5af2ff(0x12e))/0x4*(parseInt(_0x5af2ff(0x17b))/0x5)+parseInt(_0x5af2ff(0x143))/0x6*(-parseInt(_0x5af2ff(0x121))/0x7)+parseInt(_0x5af2ff(0x16e))/0x8+parseInt(_0x5af2ff(0x140))/0x9*(-parseInt(_0x5af2ff(0x11d))/0xa)+parseInt(_0x5af2ff(0x17c))/0xb;if(_0x536e59===_0x44a103)break;else _0xd48bf6['push'](_0xd48bf6['shift']());}catch(_0x1708b7){_0xd48bf6['push'](_0xd48bf6['shift']());}}}(a74_0x560a,0x18bb2));const util=require('util'),BaseModule=require(a74_0x5d0d51(0x12a)),{createClassLogger}=require(a74_0x5d0d51(0x165)),AutomationFramework=require('../framework/automationFramework.js'),AutomationFrameworkState=require('../state/automationFrameworkState.js'),HookState=require(a74_0x5d0d51(0x131)),TestFramework=require('../framework/testFramework.js'),TestFrameworkState=require(a74_0x5d0d51(0x12f)),PlaywrightDriverModule=require(a74_0x5d0d51(0x151)),TestFrameworkConstants=require(a74_0x5d0d51(0x17e)),GrpcClient=require(a74_0x5d0d51(0x181)),CLIUtils=require(a74_0x5d0d51(0x146)),TestInfo=require(a74_0x5d0d51(0x15e)),testHubConstants=require(a74_0x5d0d51(0x15d)),BrowserstackCLI=require(a74_0x5d0d51(0x147)),{getPlaywrightProvider}=require('../../../helpers/helper.js');class TestHubModule extends BaseModule{[a74_0x5d0d51(0x13f)]=createClassLogger(a74_0x5d0d51(0x159));constructor(_0x340a9a){const _0x34d564=a74_0x5d0d51,_0x1427b9={};_0x1427b9['cxZrG']=_0x34d564(0x142),_0x1427b9[_0x34d564(0x14b)]=_0x34d564(0x159);const _0x4a7757=_0x1427b9,_0x469196=_0x4a7757[_0x34d564(0x128)][_0x34d564(0x149)]('|');let _0x4d0fca=0x0;while(!![]){switch(_0x469196[_0x4d0fca++]){case'0':BrowserstackCLI[_0x34d564(0x13a)]=this[_0x34d564(0x120)][_0x34d564(0x156)]();continue;case'1':process[_0x34d564(0x14a)][testHubConstants[_0x34d564(0x129)][_0x34d564(0x180)]]=this[_0x34d564(0x120)]['getJwt']();continue;case'2':Object[_0x34d564(0x145)](TestFrameworkState)[_0x34d564(0x127)](_0x4669e5=>{const _0x514377=_0x34d564;Object['values'](HookState)[_0x514377(0x127)](_0x4d7276=>{const _0x3c30c5=_0x514377;TestFramework[_0x3c30c5(0x182)](_0x4669e5,_0x4d7276,this[_0x3c30c5(0x176)][_0x3c30c5(0x14c)](this));});});continue;case'3':AutomationFramework['registerObserver'](AutomationFrameworkState[_0x34d564(0x15c)],HookState[_0x34d564(0x154)],this[_0x34d564(0x11f)]['bind'](this));continue;case'4':super();continue;case'5':this[_0x34d564(0x120)]=_0x340a9a;continue;case'6':process[_0x34d564(0x14a)][testHubConstants[_0x34d564(0x129)][_0x34d564(0x175)]]=this['testhubConfig']['getBuildHashedId']();continue;case'7':this['name']=_0x4a7757[_0x34d564(0x14b)];continue;}break;}}[a74_0x5d0d51(0x179)](){const _0x13bb2e=a74_0x5d0d51;return TestHubModule[_0x13bb2e(0x135)];}[a74_0x5d0d51(0x176)](_0x3da9b5){const _0x24d0a1=a74_0x5d0d51,_0x250c46={};_0x250c46[_0x24d0a1(0x137)]=function(_0x44c087,_0x2e08dc){return _0x44c087===_0x2e08dc;};const _0x535d2c=_0x250c46,_0x57d0d3=_0x3da9b5[_0x24d0a1(0x11a)],_0x5d604c=_0x57d0d3[_0x24d0a1(0x123)]();(_0x535d2c['nGKLt'](_0x5d604c,TestFrameworkState[_0x24d0a1(0x166)])||CLIUtils[_0x24d0a1(0x153)](_0x5d604c[_0x24d0a1(0x134)]()[_0x24d0a1(0x149)]('.')[0x1]))&&this[_0x24d0a1(0x16a)](_0x3da9b5);}async[a74_0x5d0d51(0x16a)](_0x58eb85){const _0x2e5853=a74_0x5d0d51,_0x272f05={};_0x272f05[_0x2e5853(0x14d)]=_0x2e5853(0x138);const _0x41294b=_0x272f05;try{const _0xb30972=_0x58eb85[_0x2e5853(0x17a)]['id'],_0x173006=_0x58eb85[_0x2e5853(0x11a)],_0x47ea40=_0x173006['getContext'](),_0x5f5968=_0x173006[_0x2e5853(0x158)]()[_0x2e5853(0x139)](_0xb30972);this[_0x2e5853(0x13f)][_0x2e5853(0x16b)]('sendTestFrameworkEvent\x20testId:\x20'+_0xb30972);const {[TestFrameworkConstants[_0x2e5853(0x168)]]:_0x3586e5='',[TestFrameworkConstants[_0x2e5853(0x15a)]]:_0x295b18='',[TestFrameworkConstants['KEY_TEST_STARTED_AT']]:_0x53e225='',[TestFrameworkConstants['KEY_TEST_ENDED_AT']]:_0x4f1281=''}=_0x5f5968,_0x4bbd14=_0x173006[_0x2e5853(0x123)]()[_0x2e5853(0x134)]()['split']('.')[0x1],_0x5cb769=_0x173006[_0x2e5853(0x17d)]()[_0x2e5853(0x134)]()[_0x2e5853(0x149)]('.')[0x1],_0x233cb8=global?.[_0x2e5853(0x130)]?.['workerInfo']?.[_0x2e5853(0x164)];;const _0x58ee62=_0x173006[_0x2e5853(0x148)](),_0x33600e=Buffer[_0x2e5853(0x177)](JSON[_0x2e5853(0x132)](_0x5f5968))['toString'](_0x41294b[_0x2e5853(0x14d)]),_0x52b9db={'hash':_0x47ea40[_0x2e5853(0x16f)](),'threadId':_0x47ea40[_0x2e5853(0x11c)]()[_0x2e5853(0x134)](),'processId':_0x47ea40[_0x2e5853(0x122)]()[_0x2e5853(0x134)]()},_0x139058={};_0x139058['platformIndex']=_0x233cb8,_0x139058[_0x2e5853(0x178)]=_0x3586e5,_0x139058[_0x2e5853(0x171)]=_0x295b18,_0x139058[_0x2e5853(0x13d)]=_0x4bbd14,_0x139058[_0x2e5853(0x136)]=_0x5cb769,_0x139058['startedAt']=_0x53e225,_0x139058['endedAt']=_0x4f1281,_0x139058[_0x2e5853(0x174)]=_0x58ee62,_0x139058['eventJson']=_0x33600e,_0x139058[_0x2e5853(0x15f)]=_0x52b9db;const _0x5353e7=_0x139058,_0x1177c5=await GrpcClient[_0x2e5853(0x16d)]()[_0x2e5853(0x173)](_0x5353e7);this['logger'][_0x2e5853(0x16b)](_0x2e5853(0x162)+_0xb30972+_0x2e5853(0x150)+_0x4bbd14+'\x20hookState:\x20'+_0x5cb769);}catch(_0x513e3c){this['logger']['error'](_0x2e5853(0x13b)+util[_0x2e5853(0x163)](_0x513e3c));}}async[a74_0x5d0d51(0x11f)](_0x58df8b){const _0x52fe44=a74_0x5d0d51,_0xc7ec32={'dJdjn':function(_0x1317fd,_0x531a1d){return _0x1317fd(_0x531a1d);},'vaWOa':_0x52fe44(0x138)};try{if(_0x58df8b['page']){const _0x222b5e=_0x58df8b[_0x52fe44(0x133)][_0x52fe44(0x144)];this[_0x52fe44(0x13f)][_0x52fe44(0x16b)](_0x52fe44(0x14e)+_0x222b5e);const _0x5757be=TestInfo['getTestUUID'](_0x222b5e),_0x569662=TestInfo[_0x52fe44(0x172)](_0x222b5e),_0x361ea1=_0x58df8b[_0x52fe44(0x11a)],_0x334ad2=AutomationFramework[_0x52fe44(0x12c)](_0x361ea1,PlaywrightDriverModule['KEY_PLATFORM_INDEX']),_0x2457e0=_0x569662[TestFrameworkConstants[_0x52fe44(0x168)]],_0x50be2f=_0x569662[TestFrameworkConstants[_0x52fe44(0x15a)]],_0x5a75a0=TestFrameworkState[_0x52fe44(0x166)][_0x52fe44(0x134)]()[_0x52fe44(0x149)]('.')[0x1],_0x99b127=HookState[_0x52fe44(0x154)][_0x52fe44(0x134)]()[_0x52fe44(0x149)]('.')[0x1],_0x4f10f6=_0x361ea1[_0x52fe44(0x124)](),_0x4f86f4=AutomationFramework['getState'](_0x361ea1,PlaywrightDriverModule[_0x52fe44(0x169)],''),_0x1b96cc={'provider':_0xc7ec32[_0x52fe44(0x12b)](getPlaywrightProvider,_0x4f86f4),'frameworkName':_0x361ea1[_0x52fe44(0x126)],'frameworkVersion':_0x361ea1[_0x52fe44(0x155)],'frameworkSessionId':AutomationFramework[_0x52fe44(0x12c)](_0x361ea1,PlaywrightDriverModule[_0x52fe44(0x15b)],''),'ref':_0x361ea1[_0x52fe44(0x148)](),'hubUrl':_0x4f86f4};let _0xdbe2c5=AutomationFramework[_0x52fe44(0x12c)](_0x361ea1,PlaywrightDriverModule[_0x52fe44(0x17f)],{});_0xdbe2c5=Buffer[_0x52fe44(0x177)](JSON['stringify'](_0xdbe2c5))[_0x52fe44(0x134)](_0xc7ec32[_0x52fe44(0x12d)]);const _0xd9825b={'hash':_0x4f10f6[_0x52fe44(0x16f)](),'threadId':_0x4f10f6[_0x52fe44(0x11c)]()['toString'](),'processId':_0x4f10f6[_0x52fe44(0x122)]()[_0x52fe44(0x134)]()},_0x276723={};_0x276723[_0x52fe44(0x170)]=_0x334ad2,_0x276723[_0x52fe44(0x178)]=_0x2457e0,_0x276723[_0x52fe44(0x171)]=_0x50be2f,_0x276723[_0x52fe44(0x13d)]=_0x5a75a0,_0x276723[_0x52fe44(0x152)]=_0x99b127,_0x276723[_0x52fe44(0x13e)]=_0x5757be,_0x276723[_0x52fe44(0x141)]=_0x1b96cc,_0x276723[_0x52fe44(0x16c)]=_0xdbe2c5,_0x276723[_0x52fe44(0x15f)]=_0xd9825b;const _0x313292=_0x276723;this[_0x52fe44(0x13f)][_0x52fe44(0x16b)](_0x52fe44(0x125)+util[_0x52fe44(0x163)](_0x313292));const _0x52a9b1=await GrpcClient[_0x52fe44(0x16d)]()[_0x52fe44(0x161)](_0x313292);this[_0x52fe44(0x13f)]['debug'](_0x52fe44(0x157)+_0x222b5e);}}catch(_0x3ee59d){this[_0x52fe44(0x13f)]['error']('Error\x20in\x20sending\x20CBTSession:\x20'+util[_0x52fe44(0x163)](_0x3ee59d));}}}function a74_0xa9dd(_0xd618ec,_0x283fcc){const _0x560a89=a74_0x560a();return a74_0xa9dd=function(_0xa9dd80,_0x2fc786){_0xa9dd80=_0xa9dd80-0x11a;let _0x325a5a=_0x560a89[_0xa9dd80];return _0x325a5a;},a74_0xa9dd(_0xd618ec,_0x283fcc);}TestHubModule[a74_0x5d0d51(0x135)]=a74_0x5d0d51(0x159),TestHubModule[a74_0x5d0d51(0x13c)]=a74_0x5d0d51(0x167),module[a74_0x5d0d51(0x14f)]=TestHubModule;