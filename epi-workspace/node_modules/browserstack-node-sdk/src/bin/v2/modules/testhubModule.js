function a80_0x22dd(){const _0x254821=['CREATE','../../../helpers/testhub/constants','183318ideLzM','19546kEpPbs','../cliUtils.js','539128gypqwd','retry','testFrameworkName','../framework/testFramework.js','../../../helpers/classLogger.js','matchHookRegex','KEY_PLATFORM_INDEX','instance','logger','getThreadId','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','parallelIndex','onPageCreate','testId','onPageCreate\x20CBTSession\x20payload:\x20','O11yHashedID','sVYEJ','../browserstackCLI.js','zRYIl','testInfo','automationSession','getCurrentTestState','toString','debug','split','testUuid','getInstance','KEY_SESSION_ID','capabilities','uuid','onAllTestEvents','../grpcClient.js','../framework/constants/testFrameworkConstants.js','getState','\x20hookState:\x20','executionContext','TEST','getTestUUID','env','66THYboy','KEY_TEST_FRAMEWORK_NAME','TestHubModule','getTestIdentifierFromTestInfo','from','testFrameworkState','getRef','getProcessId','KEY_HUB_URL','getModuleName','exports','../state/automationFrameworkState.js','BROWSERSTACK_TESTHUB_JWT','getTestDetails','getJwt','KEY_TEST_FRAMEWORK_VERSION','QMxIn','ENV_VAR','testhubConfig','KEY_TEST_DEFERRED','../state/hookState.js','bind','stringify','115CZUONm','aEqTr','forEach','endedAt','workerInfo','MODULE_NAME','670vCbXfF','1588740mTTZzM','\x20testState:\x20','../../playwright/reporter/pwUtils.js','./baseModule','130031vRrzXs','frameworkVersion','../framework/automationFramework.js','getContext','result','testSessionEvent','testFrameworkVersion','../state/testFrameworkState.js','util','getId','../TestInfo.js','get','frameworkName','page','sendTestFrameworkEvent','getAllData','BROWSERSTACK_TESTHUB_UUID','getBuildHashedId','2700264sfexzb','values','lEoea','Error\x20in\x20sending\x20CBTSession:\x20','./playwrightDriverModule.js','KEY_CAPABILITIES','base64','test_deferred','format','8Gnuxss','error','test','registerObserver','3760326PoGqVB','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','eventJson','KsECr','platformIndex','POST'];a80_0x22dd=function(){return _0x254821;};return a80_0x22dd();}const a80_0x1f7d50=a80_0x47cb;function a80_0x47cb(_0x377b39,_0x1fc660){const _0x22dd40=a80_0x22dd();return a80_0x47cb=function(_0x47cb3d,_0x4dda47){_0x47cb3d=_0x47cb3d-0x157;let _0x46ac43=_0x22dd40[_0x47cb3d];return _0x46ac43;},a80_0x47cb(_0x377b39,_0x1fc660);}(function(_0x4e77a5,_0x4e5276){const _0x363b6a=a80_0x47cb,_0x519ffe=_0x4e77a5();while(!![]){try{const _0x2439ae=parseInt(_0x363b6a(0x1c0))/0x1*(parseInt(_0x363b6a(0x175))/0x2)+-parseInt(_0x363b6a(0x193))/0x3+parseInt(_0x363b6a(0x1c2))/0x4+parseInt(_0x363b6a(0x18c))/0x5*(-parseInt(_0x363b6a(0x1bf))/0x6)+-parseInt(_0x363b6a(0x1a9))/0x7+parseInt(_0x363b6a(0x1b2))/0x8*(parseInt(_0x363b6a(0x1b6))/0x9)+parseInt(_0x363b6a(0x192))/0xa*(parseInt(_0x363b6a(0x197))/0xb);if(_0x2439ae===_0x4e5276)break;else _0x519ffe['push'](_0x519ffe['shift']());}catch(_0x58bf65){_0x519ffe['push'](_0x519ffe['shift']());}}}(a80_0x22dd,0x5ab72));const util=require(a80_0x1f7d50(0x19f)),BaseModule=require(a80_0x1f7d50(0x196)),{createClassLogger}=require(a80_0x1f7d50(0x1c6)),AutomationFramework=require(a80_0x1f7d50(0x199)),AutomationFrameworkState=require(a80_0x1f7d50(0x180)),HookState=require(a80_0x1f7d50(0x189)),TestFramework=require(a80_0x1f7d50(0x1c5)),TestFrameworkState=require(a80_0x1f7d50(0x19e)),PlaywrightDriverModule=require(a80_0x1f7d50(0x1ad)),TestFrameworkConstants=require(a80_0x1f7d50(0x16e)),GrpcClient=require(a80_0x1f7d50(0x16d)),CLIUtils=require(a80_0x1f7d50(0x1c1)),TestInfo=require(a80_0x1f7d50(0x1a1)),testHubConstants=require(a80_0x1f7d50(0x1be)),BrowserstackCLI=require(a80_0x1f7d50(0x15f)),{getPlaywrightProvider}=require('../../../helpers/helper.js'),{getTestRunIdentifier}=require(a80_0x1f7d50(0x195));class TestHubModule extends BaseModule{['logger']=createClassLogger(a80_0x1f7d50(0x177));constructor(_0x3186be){const _0x337867=a80_0x1f7d50,_0x30ac89={};_0x30ac89[_0x337867(0x1ba)]='3|7|6|2|1|5|4|0',_0x30ac89[_0x337867(0x185)]=_0x337867(0x177);const _0x135931=_0x30ac89,_0x5cf711=_0x135931[_0x337867(0x1ba)][_0x337867(0x166)]('|');let _0x2bd3d9=0x0;while(!![]){switch(_0x5cf711[_0x2bd3d9++]){case'0':BrowserstackCLI[_0x337867(0x15d)]=this[_0x337867(0x187)][_0x337867(0x1a8)]();continue;case'1':Object[_0x337867(0x1aa)](TestFrameworkState)['forEach'](_0x4853e9=>{const _0x27b0ac=_0x337867;Object[_0x27b0ac(0x1aa)](HookState)[_0x27b0ac(0x18e)](_0x308fc7=>{const _0xc7dfb=_0x27b0ac;TestFramework[_0xc7dfb(0x1b5)](_0x4853e9,_0x308fc7,this['onAllTestEvents'][_0xc7dfb(0x18a)](this));});});continue;case'2':AutomationFramework['registerObserver'](AutomationFrameworkState[_0x337867(0x1bd)],HookState[_0x337867(0x1bc)],this[_0x337867(0x15a)][_0x337867(0x18a)](this));continue;case'3':super();continue;case'4':process[_0x337867(0x174)][testHubConstants[_0x337867(0x186)][_0x337867(0x1a7)]]=this[_0x337867(0x187)][_0x337867(0x1a8)]();continue;case'5':process[_0x337867(0x174)][testHubConstants[_0x337867(0x186)][_0x337867(0x181)]]=this[_0x337867(0x187)][_0x337867(0x183)]();continue;case'6':this[_0x337867(0x187)]=_0x3186be;continue;case'7':this['name']=_0x135931[_0x337867(0x185)];continue;}break;}}[a80_0x1f7d50(0x17e)](){const _0x354990=a80_0x1f7d50;return TestHubModule[_0x354990(0x191)];}[a80_0x1f7d50(0x16c)](_0x374077){const _0x51c0c7=a80_0x1f7d50,_0x2962ae={};_0x2962ae[_0x51c0c7(0x160)]=function(_0x6b0daa,_0x1cdcbc){return _0x6b0daa===_0x1cdcbc;};const _0x2d157e=_0x2962ae,_0x59a6aa=_0x374077[_0x51c0c7(0x1c9)],_0x3ee388=_0x59a6aa[_0x51c0c7(0x163)]();(_0x2d157e[_0x51c0c7(0x160)](_0x3ee388,TestFrameworkState[_0x51c0c7(0x172)])||CLIUtils[_0x51c0c7(0x1c7)](_0x3ee388[_0x51c0c7(0x164)]()[_0x51c0c7(0x166)]('.')[0x1]))&&this[_0x51c0c7(0x1a5)](_0x374077);}async[a80_0x1f7d50(0x1a5)](_0xd609a){const _0x378d3a=a80_0x1f7d50,_0x178ad3={'sVYEJ':function(_0x3a3f89,_0x204045,_0x1fcdbf){return _0x3a3f89(_0x204045,_0x1fcdbf);},'aEqTr':_0x378d3a(0x1af)};try{const _0x352cfd=_0xd609a['test']['id'],_0x37fc2e=_0x178ad3[_0x378d3a(0x15e)](getTestRunIdentifier,_0xd609a[_0x378d3a(0x1b4)],_0xd609a[_0x378d3a(0x19b)][_0x378d3a(0x1c3)]),_0x27b3b4=_0xd609a['instance'],_0x59010c=_0x27b3b4[_0x378d3a(0x19a)](),_0x4cd84c=_0x27b3b4[_0x378d3a(0x1a6)]()[_0x378d3a(0x1a2)](_0x37fc2e);this[_0x378d3a(0x1ca)]['debug']('sendTestFrameworkEvent\x20testId:\x20'+_0x352cfd);const {[TestFrameworkConstants[_0x378d3a(0x176)]]:_0x592b41='',[TestFrameworkConstants[_0x378d3a(0x184)]]:_0x16afde='',[TestFrameworkConstants['KEY_TEST_STARTED_AT']]:_0x46f8ea='',[TestFrameworkConstants['KEY_TEST_ENDED_AT']]:_0x13e441=''}=_0x4cd84c,_0x162ba8=_0x27b3b4[_0x378d3a(0x163)]()['toString']()['split']('.')[0x1],_0x372c7e=_0x27b3b4['getCurrentHookState']()[_0x378d3a(0x164)]()['split']('.')[0x1],_0x5b4761=global?.['__workerDetails']?.[_0x378d3a(0x190)]?.[_0x378d3a(0x159)];;const _0x5dbebc=_0x27b3b4[_0x378d3a(0x17b)](),_0x8d5ff9=Buffer[_0x378d3a(0x179)](JSON['stringify'](_0x4cd84c))[_0x378d3a(0x164)](_0x178ad3[_0x378d3a(0x18d)]),_0x17a57d={'hash':_0x59010c[_0x378d3a(0x1a0)](),'threadId':_0x59010c['getThreadId']()[_0x378d3a(0x164)](),'processId':_0x59010c['getProcessId']()[_0x378d3a(0x164)]()},_0x5a1430={};_0x5a1430[_0x378d3a(0x1bb)]=_0x5b4761,_0x5a1430[_0x378d3a(0x1c4)]=_0x592b41,_0x5a1430[_0x378d3a(0x19d)]=_0x16afde,_0x5a1430[_0x378d3a(0x17a)]=_0x162ba8,_0x5a1430['hookState']=_0x372c7e,_0x5a1430['startedAt']=_0x46f8ea,_0x5a1430[_0x378d3a(0x18f)]=_0x13e441,_0x5a1430[_0x378d3a(0x16b)]=_0x5dbebc,_0x5a1430[_0x378d3a(0x1b9)]=_0x8d5ff9,_0x5a1430[_0x378d3a(0x171)]=_0x17a57d;const _0x4818e6=_0x5a1430,_0xa80dc1=await GrpcClient[_0x378d3a(0x168)]()['testFrameworkEvent'](_0x4818e6);this[_0x378d3a(0x1ca)]['debug'](_0x378d3a(0x1b8)+_0x352cfd+_0x378d3a(0x194)+_0x162ba8+_0x378d3a(0x170)+_0x372c7e);}catch(_0x2f0841){this[_0x378d3a(0x1ca)]['error']('Error\x20in\x20sendTestFrameworkEvent:\x20'+util[_0x378d3a(0x1b1)](_0x2f0841));}}async[a80_0x1f7d50(0x15a)](_0x5e0303){const _0x15262c=a80_0x1f7d50,_0x3c3d67={'wSatU':function(_0x3bb206,_0x11da47){return _0x3bb206(_0x11da47);},'lEoea':_0x15262c(0x1af)};try{if(_0x5e0303[_0x15262c(0x1a4)]){const _0x32d581=_0x5e0303[_0x15262c(0x161)][_0x15262c(0x15b)];this[_0x15262c(0x1ca)][_0x15262c(0x165)](_0x15262c(0x158)+_0x32d581);const _0x1eb809=TestInfo[_0x15262c(0x178)](_0x5e0303[_0x15262c(0x161)],_0x5e0303['testInfo'][_0x15262c(0x1c3)]),_0x4be60a=TestInfo[_0x15262c(0x173)](_0x1eb809),_0x5e4ee0=TestInfo[_0x15262c(0x182)](_0x1eb809),_0x191d1f=_0x5e0303[_0x15262c(0x1c9)],_0x19e3f4=AutomationFramework[_0x15262c(0x16f)](_0x191d1f,PlaywrightDriverModule[_0x15262c(0x1c8)]),_0x4742ab=_0x5e4ee0[TestFrameworkConstants[_0x15262c(0x176)]],_0x568a1c=_0x5e4ee0[TestFrameworkConstants[_0x15262c(0x184)]],_0x314c85=TestFrameworkState[_0x15262c(0x172)]['toString']()[_0x15262c(0x166)]('.')[0x1],_0x19c391=HookState[_0x15262c(0x1bc)][_0x15262c(0x164)]()[_0x15262c(0x166)]('.')[0x1],_0x22de77=_0x191d1f['getContext'](),_0x241ab8=AutomationFramework['getState'](_0x191d1f,PlaywrightDriverModule[_0x15262c(0x17d)],''),_0x22e8eb={'provider':_0x3c3d67['wSatU'](getPlaywrightProvider,_0x241ab8),'frameworkName':_0x191d1f[_0x15262c(0x1a3)],'frameworkVersion':_0x191d1f[_0x15262c(0x198)],'frameworkSessionId':AutomationFramework[_0x15262c(0x16f)](_0x191d1f,PlaywrightDriverModule[_0x15262c(0x169)],''),'ref':_0x191d1f['getRef'](),'hubUrl':_0x241ab8};let _0xd88c63=AutomationFramework[_0x15262c(0x16f)](_0x191d1f,PlaywrightDriverModule[_0x15262c(0x1ae)],{});_0xd88c63=Buffer[_0x15262c(0x179)](JSON[_0x15262c(0x18b)](_0xd88c63))[_0x15262c(0x164)](_0x3c3d67[_0x15262c(0x1ab)]);const _0xea30ad={'hash':_0x22de77[_0x15262c(0x1a0)](),'threadId':_0x22de77[_0x15262c(0x157)]()[_0x15262c(0x164)](),'processId':_0x22de77[_0x15262c(0x17c)]()['toString']()},_0x2029ad={};_0x2029ad[_0x15262c(0x1bb)]=_0x19e3f4,_0x2029ad[_0x15262c(0x1c4)]=_0x4742ab,_0x2029ad[_0x15262c(0x19d)]=_0x568a1c,_0x2029ad['testFrameworkState']=_0x314c85,_0x2029ad['testHookState']=_0x19c391,_0x2029ad[_0x15262c(0x167)]=_0x4be60a,_0x2029ad[_0x15262c(0x162)]=_0x22e8eb,_0x2029ad[_0x15262c(0x16a)]=_0xd88c63,_0x2029ad['executionContext']=_0xea30ad;const _0x539aec=_0x2029ad;this[_0x15262c(0x1ca)][_0x15262c(0x165)](_0x15262c(0x15c)+util[_0x15262c(0x1b1)](_0x539aec));const _0x1710e0=await GrpcClient['getInstance']()[_0x15262c(0x19c)](_0x539aec);this['logger'][_0x15262c(0x165)](_0x15262c(0x1b7)+_0x32d581);}}catch(_0x32e40b){this['logger'][_0x15262c(0x1b3)](_0x15262c(0x1ac)+util[_0x15262c(0x1b1)](_0x32e40b));}}}TestHubModule['MODULE_NAME']=a80_0x1f7d50(0x177),TestHubModule[a80_0x1f7d50(0x188)]=a80_0x1f7d50(0x1b0),module[a80_0x1f7d50(0x17f)]=TestHubModule;