const a85_0x34350f=a85_0x2d2a;function a85_0x3041(){const _0x4d489a=['JEST','getCurrentTestState','stringify','error',',\x20test_identifier:\x20','3017168vXhflv','../framework/constants/testFrameworkConstants.js','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','from','KEY_HUB_URL','length','format','../state/testFrameworkState.js','acqjK','forEach','onPageCreate:\x20Recreated\x20Jest\x20testIdentifier:\x20','vJwhq','BROWSERSTACK_TESTHUB_UUID','recreateIdentifierFromTestInfo','IcaHN','KEY_SESSION_ID','sendTestFrameworkEvent','xsvJP','288bdEIuJ','RrYwx','6xpgoOk','../../../helpers/testhub/constants','../utils/jest-utils.js','onPageCreate:\x20Skipping\x20CBT\x20session\x20event\x20-\x20no\x20testInfo\x20(page\x20created\x20outside\x20test\x20context)','getBuildHashedId','qxviY','keys','sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','jestUtils','testFrameworkEvent','CREATE','testFrameworkState','hOYUG','toString','createTestFrameworkEventPayload','../cliUtils.js','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','onAllTestEvents','version','getJwt','page','debug','MODULE_NAME','split','./baseModule','getTestUUID','427828msxMEU','TEST','logger','testUuid','KEY_PLATFORM_INDEX','dOzYF','testFrameworkData','4|3|7|1|2|0|8|5|6','testInfo','instance','uWlVN','../framework/testFramework.js','util','isLTSSession','getTestId','480948DTAAxU','matchHookRegex','TestHubModule','test_deferred','frameworkVersion','Error\x20in\x20sendTestFrameworkEvent:\x20','307210VQGpkf','BROWSERSTACK_TESTHUB_JWT','testhubConfig','ENV_VAR','env','getTestDetails','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','../TestInfo.js','3924326uEqwzH','registerObserver','getModuleName','getLTSSessionId','name','../../../helpers/test-observability/constants.js','../browserstackCLI.js','../state/hookState.js','hookState','\x20hookState:\x20','getTestIdentifierFromTestInfo','getInstance','getContext','O11yHashedID','values','onPageCreate','../../../helpers/classLogger.js','getTestFramework','./playwrightDriverModule.js','getState','5159185dfRZSK','../state/automationFrameworkState.js','../../../helpers/helper.js','5159680GcwcQA','3swqqmq'];a85_0x3041=function(){return _0x4d489a;};return a85_0x3041();}(function(_0x1778e3,_0x10e852){const _0xcf1472=a85_0x2d2a,_0x1113f6=_0x1778e3();while(!![]){try{const _0x342c35=-parseInt(_0xcf1472(0x77))/0x1+parseInt(_0xcf1472(0x86))/0x2*(-parseInt(_0xcf1472(0xac))/0x3)+-parseInt(_0xcf1472(0xb2))/0x4+-parseInt(_0xcf1472(0xa8))/0x5*(-parseInt(_0xcf1472(0xc6))/0x6)+-parseInt(_0xcf1472(0x94))/0x7+parseInt(_0xcf1472(0xab))/0x8+-parseInt(_0xcf1472(0xc4))/0x9*(-parseInt(_0xcf1472(0x8c))/0xa);if(_0x342c35===_0x10e852)break;else _0x1113f6['push'](_0x1113f6['shift']());}catch(_0x2179db){_0x1113f6['push'](_0x1113f6['shift']());}}}(a85_0x3041,0xa5331));const util=require(a85_0x34350f(0x83)),BaseModule=require(a85_0x34350f(0x75)),{createClassLogger}=require(a85_0x34350f(0xa4)),AutomationFramework=require('../framework/automationFramework.js'),AutomationFrameworkState=require(a85_0x34350f(0xa9)),HookState=require(a85_0x34350f(0x9b)),TestFramework=require(a85_0x34350f(0x82)),TestFrameworkState=require(a85_0x34350f(0xb9)),PlaywrightDriverModule=require(a85_0x34350f(0xa6)),TestFrameworkConstants=require(a85_0x34350f(0xb3)),GrpcClient=require('../grpcClient.js'),CLIUtils=require(a85_0x34350f(0x6c)),TestInfo=require(a85_0x34350f(0x93)),testHubConstants=require(a85_0x34350f(0xc7)),{FRAMEWORKS}=require(a85_0x34350f(0x99)),helper=require('../../../helpers/helper.js'),LoadTestModule=require('./loadTestModule.js'),JestUtils=require(a85_0x34350f(0xc8)),BrowserstackCLI=require(a85_0x34350f(0x9a)),{getPlaywrightProvider}=require(a85_0x34350f(0xaa));class TestHubModule extends BaseModule{[a85_0x34350f(0x79)]=createClassLogger(a85_0x34350f(0x88));constructor(_0x3b57f0,_0x4c8099=null){const _0x521ff3=a85_0x34350f,_0x538722={};_0x538722[_0x521ff3(0xbd)]=_0x521ff3(0x7e),_0x538722[_0x521ff3(0xc3)]='TestHubModule';const _0x420766=_0x538722,_0x35cd11=_0x420766[_0x521ff3(0xbd)][_0x521ff3(0x74)]('|');let _0x31f165=0x0;while(!![]){switch(_0x35cd11[_0x31f165++]){case'0':Object[_0x521ff3(0xa2)](TestFrameworkState)[_0x521ff3(0xbb)](_0x2c2a8e=>{const _0x43b38d=_0x521ff3;Object[_0x43b38d(0xa2)](HookState)[_0x43b38d(0xbb)](_0x4cf67d=>{const _0x5f2aa2=_0x43b38d;TestFramework[_0x5f2aa2(0x95)](_0x2c2a8e,_0x4cf67d,this[_0x5f2aa2(0x6e)]['bind'](this));});});continue;case'1':this[_0x521ff3(0xce)]=new JestUtils();continue;case'2':AutomationFramework[_0x521ff3(0x95)](AutomationFrameworkState[_0x521ff3(0x67)],HookState['POST'],this[_0x521ff3(0xa3)]['bind'](this));continue;case'3':this[_0x521ff3(0x98)]=_0x420766['xsvJP'];continue;case'4':super(_0x4c8099);continue;case'5':process[_0x521ff3(0x90)][testHubConstants['ENV_VAR'][_0x521ff3(0xbe)]]=this['testhubConfig'][_0x521ff3(0xca)]();continue;case'6':BrowserstackCLI[_0x521ff3(0xa1)]=this[_0x521ff3(0x8e)]['getBuildHashedId']();continue;case'7':this['testhubConfig']=_0x3b57f0;continue;case'8':process[_0x521ff3(0x90)][testHubConstants[_0x521ff3(0x8f)][_0x521ff3(0x8d)]]=this[_0x521ff3(0x8e)][_0x521ff3(0x70)]();continue;}break;}}[a85_0x34350f(0x96)](){return TestHubModule['MODULE_NAME'];}[a85_0x34350f(0x6e)](_0x15e881){const _0x57e3b4=a85_0x34350f,_0x44f48d={};_0x44f48d[_0x57e3b4(0xcb)]=function(_0xa751f2,_0x25c014){return _0xa751f2===_0x25c014;};const _0x40504d=_0x44f48d,_0xbdd2be=_0x15e881[_0x57e3b4(0x80)],_0x45a78d=_0xbdd2be[_0x57e3b4(0xae)]();(_0x40504d[_0x57e3b4(0xcb)](_0x45a78d,TestFrameworkState['TEST'])||CLIUtils[_0x57e3b4(0x87)](_0x45a78d[_0x57e3b4(0x6a)]()[_0x57e3b4(0x74)]('.')[0x1]))&&this[_0x57e3b4(0xc2)](_0x15e881);}async['sendTestFrameworkEvent'](_0x5130ad){const _0x49c21c=a85_0x34350f,_0x11b418={};_0x11b418[_0x49c21c(0x81)]=function(_0x1fa62d,_0x1aee78){return _0x1fa62d===_0x1aee78;},_0x11b418[_0x49c21c(0xba)]=_0x49c21c(0xcd);const _0x2368b7=_0x11b418;try{const _0x552da8=BrowserstackCLI[_0x49c21c(0x9f)]()[_0x49c21c(0xa5)]()[_0x49c21c(0x6b)](_0x5130ad);if(!_0x552da8||_0x2368b7['uWlVN'](Object[_0x49c21c(0xcc)](_0x552da8)[_0x49c21c(0xb7)],0x0)){this[_0x49c21c(0x79)]['debug'](_0x2368b7[_0x49c21c(0xba)]);return;}const _0x560690=await GrpcClient[_0x49c21c(0x9f)]()[_0x49c21c(0x66)](_0x552da8);this[_0x49c21c(0x79)][_0x49c21c(0x72)](_0x49c21c(0x6d)+_0x552da8[_0x49c21c(0x68)]+_0x49c21c(0x9d)+_0x552da8[_0x49c21c(0x9c)]);}catch(_0x304ece){this[_0x49c21c(0x79)][_0x49c21c(0xb0)](_0x49c21c(0x8b)+util[_0x49c21c(0xb8)](_0x304ece));}}async[a85_0x34350f(0xa3)](_0x33657d){const _0x56c8d5=a85_0x34350f,_0x228eec={'RrYwx':function(_0x2497f5,_0xf798ea){return _0x2497f5===_0xf798ea;},'tdURA':_0x56c8d5(0xc9),'IcaHN':function(_0x4b7033,_0xe45df7){return _0x4b7033===_0xe45df7;},'odHBV':function(_0xfba909,_0x395650){return _0xfba909===_0x395650;},'dOzYF':function(_0x4e0a64,_0x21a7dd){return _0x4e0a64(_0x21a7dd);},'RcGfX':'base64','hOYUG':function(_0x13a4b1,_0x2f63f1){return _0x13a4b1===_0x2f63f1;}};try{if(_0x33657d[_0x56c8d5(0x71)]){const _0x3c1a64=this[_0x56c8d5(0x85)](_0x33657d);this[_0x56c8d5(0x79)][_0x56c8d5(0x72)](_0x56c8d5(0x92)+_0x3c1a64);if(this[_0x56c8d5(0x7d)]&&_0x228eec[_0x56c8d5(0xc5)](this['testFrameworkData']['name'],FRAMEWORKS['JEST'])&&!_0x33657d['testInfo']){this[_0x56c8d5(0x79)][_0x56c8d5(0x72)](_0x228eec['tdURA']);return;}let _0x2ef4c9,_0x18ed61;if(this['testFrameworkData']&&_0x228eec[_0x56c8d5(0xc0)](this[_0x56c8d5(0x7d)][_0x56c8d5(0x98)],FRAMEWORKS['CUCUMBER']))_0x2ef4c9=_0x3c1a64,_0x18ed61=TestInfo[_0x56c8d5(0x76)](_0x2ef4c9);else this['testFrameworkData']&&_0x228eec['odHBV'](this[_0x56c8d5(0x7d)][_0x56c8d5(0x98)],FRAMEWORKS[_0x56c8d5(0xad)])?(_0x2ef4c9=this['jestUtils'][_0x56c8d5(0xbf)](_0x33657d[_0x56c8d5(0x7f)]),this[_0x56c8d5(0x79)]['debug'](_0x56c8d5(0xbc)+_0x2ef4c9)):(_0x2ef4c9=TestInfo[_0x56c8d5(0x9e)](_0x33657d['testInfo'],_0x33657d[_0x56c8d5(0x7f)]['retry']),_0x18ed61=TestInfo[_0x56c8d5(0x76)](_0x2ef4c9));const _0x53c277=TestInfo[_0x56c8d5(0x91)](_0x2ef4c9),_0x478842=_0x33657d[_0x56c8d5(0x80)],_0x271b70=AutomationFramework[_0x56c8d5(0xa7)](_0x478842,PlaywrightDriverModule[_0x56c8d5(0x7b)]),_0xb75117=_0x53c277?.[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]||this[_0x56c8d5(0x7d)]&&this[_0x56c8d5(0x7d)][_0x56c8d5(0x98)],_0x5a16a5=_0x53c277?.[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]||this['testFrameworkData']&&this['testFrameworkData'][_0x56c8d5(0x6f)],_0x318bbe=TestFrameworkState[_0x56c8d5(0x78)][_0x56c8d5(0x6a)]()[_0x56c8d5(0x74)]('.')[0x1],_0x2d9a05=HookState['POST'][_0x56c8d5(0x6a)]()['split']('.')[0x1],_0x418ba7=_0x478842[_0x56c8d5(0xa0)](),_0xad1739=AutomationFramework[_0x56c8d5(0xa7)](_0x478842,PlaywrightDriverModule[_0x56c8d5(0xb6)],''),_0x476491={'provider':_0x228eec[_0x56c8d5(0x7c)](getPlaywrightProvider,_0xad1739),'frameworkName':_0x478842['frameworkName'],'frameworkVersion':_0x478842[_0x56c8d5(0x8a)],'frameworkSessionId':LoadTestModule[_0x56c8d5(0x84)]()?LoadTestModule[_0x56c8d5(0x97)]():AutomationFramework['getState'](_0x478842,PlaywrightDriverModule[_0x56c8d5(0xc1)],''),'ref':_0x478842['getRef'](),'hubUrl':_0xad1739};let _0x4ff4a3=AutomationFramework[_0x56c8d5(0xa7)](_0x478842,PlaywrightDriverModule['KEY_CAPABILITIES'],{});_0x4ff4a3=Buffer[_0x56c8d5(0xb5)](JSON[_0x56c8d5(0xaf)](_0x4ff4a3))[_0x56c8d5(0x6a)](_0x228eec['RcGfX']);const _0x6f17b7={'hash':_0x418ba7['getId'](),'threadId':_0x418ba7['getThreadId']()[_0x56c8d5(0x6a)](),'processId':_0x418ba7['getProcessId']()['toString']()},_0x493745={};_0x493745['test_identifier']=_0x2ef4c9;const _0x330e2e={};_0x330e2e[_0x56c8d5(0x7a)]=_0x18ed61;const _0x5e3a00={'platformIndex':_0x271b70,'testFrameworkName':_0xb75117,'testFrameworkVersion':_0x5a16a5,'testFrameworkState':_0x318bbe,'testHookState':_0x2d9a05,...this[_0x56c8d5(0x7d)]&&_0x228eec['IcaHN'](this[_0x56c8d5(0x7d)][_0x56c8d5(0x98)],FRAMEWORKS[_0x56c8d5(0xad)])?_0x493745:_0x330e2e,'automationSession':_0x476491,'capabilities':_0x4ff4a3,'executionContext':_0x6f17b7};this[_0x56c8d5(0x79)][_0x56c8d5(0x72)]('onPageCreate\x20CBTSession\x20payload:\x20'+util['format'](_0x5e3a00));const _0x51896e=await GrpcClient[_0x56c8d5(0x9f)]()['testSessionEvent'](_0x5e3a00);this['logger'][_0x56c8d5(0x72)](_0x56c8d5(0xb4)+_0x3c1a64+(this[_0x56c8d5(0x7d)]&&_0x228eec[_0x56c8d5(0x69)](this[_0x56c8d5(0x7d)][_0x56c8d5(0x98)],FRAMEWORKS[_0x56c8d5(0xad)])?_0x56c8d5(0xb1)+_0x2ef4c9:''));}}catch(_0x9a4769){this[_0x56c8d5(0x79)][_0x56c8d5(0xb0)]('Error\x20in\x20sending\x20CBTSession:\x20'+util[_0x56c8d5(0xb8)](_0x9a4769));}}}function a85_0x2d2a(_0x1fa686,_0x2a4edd){const _0x30415d=a85_0x3041();return a85_0x2d2a=function(_0x2d2abe,_0xcc79d3){_0x2d2abe=_0x2d2abe-0x66;let _0x372ca9=_0x30415d[_0x2d2abe];return _0x372ca9;},a85_0x2d2a(_0x1fa686,_0x2a4edd);}TestHubModule[a85_0x34350f(0x73)]=a85_0x34350f(0x88),TestHubModule['KEY_TEST_DEFERRED']=a85_0x34350f(0x89),module['exports']=TestHubModule;