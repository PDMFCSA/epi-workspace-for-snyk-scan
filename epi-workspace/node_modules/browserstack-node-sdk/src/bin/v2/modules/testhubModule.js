function a81_0x493e(_0x586b77,_0x20ac8f){const _0x5d4900=a81_0x5d49();return a81_0x493e=function(_0x493e16,_0x5edb96){_0x493e16=_0x493e16-0x105;let _0x151024=_0x5d4900[_0x493e16];return _0x151024;},a81_0x493e(_0x586b77,_0x20ac8f);}const a81_0xea0be0=a81_0x493e;(function(_0x19ee92,_0x551032){const _0x44b043=a81_0x493e,_0x52015b=_0x19ee92();while(!![]){try{const _0x52df9c=-parseInt(_0x44b043(0x165))/0x1+parseInt(_0x44b043(0x145))/0x2*(-parseInt(_0x44b043(0x142))/0x3)+parseInt(_0x44b043(0x162))/0x4*(parseInt(_0x44b043(0x14b))/0x5)+parseInt(_0x44b043(0x13f))/0x6+-parseInt(_0x44b043(0x14d))/0x7+-parseInt(_0x44b043(0x156))/0x8+-parseInt(_0x44b043(0x169))/0x9*(-parseInt(_0x44b043(0x139))/0xa);if(_0x52df9c===_0x551032)break;else _0x52015b['push'](_0x52015b['shift']());}catch(_0x5ab8ad){_0x52015b['push'](_0x52015b['shift']());}}}(a81_0x5d49,0x9e19e));const util=require('util'),BaseModule=require(a81_0xea0be0(0x135)),{createClassLogger}=require(a81_0xea0be0(0x11a)),AutomationFramework=require(a81_0xea0be0(0x11d)),AutomationFrameworkState=require(a81_0xea0be0(0x110)),HookState=require(a81_0xea0be0(0x11c)),TestFramework=require(a81_0xea0be0(0x154)),TestFrameworkState=require('../state/testFrameworkState.js'),PlaywrightDriverModule=require('./playwrightDriverModule.js'),TestFrameworkConstants=require(a81_0xea0be0(0x124)),GrpcClient=require(a81_0xea0be0(0x122)),CLIUtils=require(a81_0xea0be0(0x12e)),TestInfo=require(a81_0xea0be0(0x13d)),testHubConstants=require('../../../helpers/testhub/constants'),{FRAMEWORKS}=require(a81_0xea0be0(0x112)),BrowserstackCLI=require(a81_0xea0be0(0x150)),{getPlaywrightProvider}=require(a81_0xea0be0(0x115));class TestHubModule extends BaseModule{[a81_0xea0be0(0x126)]=createClassLogger(a81_0xea0be0(0x108));constructor(_0xcd8acc,_0x22c4d5=null){const _0x139cb1=a81_0xea0be0,_0x5952f7={};_0x5952f7['nrDrT']=_0x139cb1(0x157),_0x5952f7[_0x139cb1(0x152)]='TestHubModule';const _0x1f3628=_0x5952f7,_0x2b1697=_0x1f3628['nrDrT'][_0x139cb1(0x164)]('|');let _0x271cfd=0x0;while(!![]){switch(_0x2b1697[_0x271cfd++]){case'0':process[_0x139cb1(0x12f)][testHubConstants[_0x139cb1(0x10c)][_0x139cb1(0x140)]]=this[_0x139cb1(0x111)][_0x139cb1(0x11b)]();continue;case'1':this['testhubConfig']=_0xcd8acc;continue;case'2':BrowserstackCLI[_0x139cb1(0x10d)]=this[_0x139cb1(0x111)][_0x139cb1(0x11b)]();continue;case'3':this[_0x139cb1(0x12a)]=_0x1f3628['GXzkF'];continue;case'4':AutomationFramework[_0x139cb1(0x134)](AutomationFrameworkState['CREATE'],HookState[_0x139cb1(0x155)],this[_0x139cb1(0x131)][_0x139cb1(0x163)](this));continue;case'5':super(_0x22c4d5);continue;case'6':Object['values'](TestFrameworkState)[_0x139cb1(0x161)](_0x5c4632=>{Object['values'](HookState)['forEach'](_0x252ef9=>{const _0x1d17c7=a81_0x493e;TestFramework[_0x1d17c7(0x134)](_0x5c4632,_0x252ef9,this[_0x1d17c7(0x123)]['bind'](this));});});continue;case'7':process[_0x139cb1(0x12f)][testHubConstants['ENV_VAR'][_0x139cb1(0x119)]]=this[_0x139cb1(0x111)][_0x139cb1(0x12c)]();continue;}break;}}[a81_0xea0be0(0x13c)](){const _0x4ce25d=a81_0xea0be0;return TestHubModule[_0x4ce25d(0x106)];}[a81_0xea0be0(0x123)](_0x138be2){const _0xe4968a=a81_0xea0be0,_0x1e10cb={};_0x1e10cb['slWFt']=function(_0x2b19a1,_0x2546f4){return _0x2b19a1===_0x2546f4;};const _0x49150d=_0x1e10cb,_0x5412be=_0x138be2[_0xe4968a(0x14c)],_0x7bbfa3=_0x5412be[_0xe4968a(0x127)]();(_0x49150d[_0xe4968a(0x143)](_0x7bbfa3,TestFrameworkState[_0xe4968a(0x118)])||CLIUtils[_0xe4968a(0x15a)](_0x7bbfa3['toString']()[_0xe4968a(0x164)]('.')[0x1]))&&this[_0xe4968a(0x120)](_0x138be2);}async[a81_0xea0be0(0x120)](_0x2d2305){const _0x106eee=a81_0xea0be0,_0x5b06a6={};_0x5b06a6[_0x106eee(0x148)]=function(_0x466b81,_0x264ff7){return _0x466b81===_0x264ff7;},_0x5b06a6[_0x106eee(0x117)]=_0x106eee(0x125);const _0x26e0bd=_0x5b06a6;try{const _0x3ba6b8=BrowserstackCLI[_0x106eee(0x136)]()['getTestFramework']()['createTestFrameworkEventPayload'](_0x2d2305);if(!_0x3ba6b8||_0x26e0bd[_0x106eee(0x148)](Object[_0x106eee(0x128)](_0x3ba6b8)[_0x106eee(0x151)],0x0)){this[_0x106eee(0x126)]['debug'](_0x26e0bd[_0x106eee(0x117)]);return;}const _0x5bca8e=await GrpcClient[_0x106eee(0x136)]()[_0x106eee(0x132)](_0x3ba6b8);this[_0x106eee(0x126)][_0x106eee(0x159)](_0x106eee(0x10b)+_0x3ba6b8[_0x106eee(0x166)]+_0x106eee(0x11e)+_0x3ba6b8['hookState']);}catch(_0x4c69cf){this[_0x106eee(0x126)][_0x106eee(0x13b)]('Error\x20in\x20sendTestFrameworkEvent:\x20'+util[_0x106eee(0x147)](_0x4c69cf));}}async[a81_0xea0be0(0x131)](_0x411298){const _0x1aafdf=a81_0xea0be0,_0x234546={'fYoVb':function(_0x1317ae,_0x1cf28c){return _0x1317ae===_0x1cf28c;},'WmxSk':function(_0xf2b8ed,_0x4c9cdd){return _0xf2b8ed(_0x4c9cdd);},'uumXg':_0x1aafdf(0x146)};try{if(_0x411298[_0x1aafdf(0x10e)]){const _0x2b1c4a=this[_0x1aafdf(0x113)](_0x411298);this[_0x1aafdf(0x126)][_0x1aafdf(0x159)](_0x1aafdf(0x138)+_0x2b1c4a);let _0x319685;this[_0x1aafdf(0x15f)]&&_0x234546[_0x1aafdf(0x114)](this[_0x1aafdf(0x15f)][_0x1aafdf(0x12a)],FRAMEWORKS[_0x1aafdf(0x168)])?_0x319685=_0x2b1c4a:_0x319685=TestInfo[_0x1aafdf(0x121)](_0x411298[_0x1aafdf(0x15d)],_0x411298['testInfo'][_0x1aafdf(0x15b)]);const _0x5c638c=TestInfo[_0x1aafdf(0x10a)](_0x319685),_0x3ace0a=TestInfo[_0x1aafdf(0x137)](_0x319685),_0x621b6=_0x411298[_0x1aafdf(0x14c)],_0x1eac0f=AutomationFramework[_0x1aafdf(0x12d)](_0x621b6,PlaywrightDriverModule[_0x1aafdf(0x116)]),_0x3809d8=_0x3ace0a[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]||this[_0x1aafdf(0x15f)]&&this['testFrameworkData']['name'],_0x1b62b9=_0x3ace0a[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]||this['testFrameworkData']&&this[_0x1aafdf(0x15f)][_0x1aafdf(0x158)],_0x539d30=TestFrameworkState[_0x1aafdf(0x118)][_0x1aafdf(0x160)]()[_0x1aafdf(0x164)]('.')[0x1],_0x13b665=HookState[_0x1aafdf(0x155)][_0x1aafdf(0x160)]()['split']('.')[0x1],_0x1770c6=_0x621b6['getContext'](),_0x2d4f53=AutomationFramework[_0x1aafdf(0x12d)](_0x621b6,PlaywrightDriverModule['KEY_HUB_URL'],''),_0x556b6a={'provider':_0x234546[_0x1aafdf(0x10f)](getPlaywrightProvider,_0x2d4f53),'frameworkName':_0x621b6[_0x1aafdf(0x13e)],'frameworkVersion':_0x621b6[_0x1aafdf(0x167)],'frameworkSessionId':AutomationFramework[_0x1aafdf(0x12d)](_0x621b6,PlaywrightDriverModule[_0x1aafdf(0x144)],''),'ref':_0x621b6[_0x1aafdf(0x14a)](),'hubUrl':_0x2d4f53};let _0x18e7a6=AutomationFramework['getState'](_0x621b6,PlaywrightDriverModule['KEY_CAPABILITIES'],{});_0x18e7a6=Buffer[_0x1aafdf(0x14f)](JSON[_0x1aafdf(0x149)](_0x18e7a6))[_0x1aafdf(0x160)](_0x234546[_0x1aafdf(0x12b)]);const _0x235ee6={'hash':_0x1770c6['getId'](),'threadId':_0x1770c6[_0x1aafdf(0x11f)]()[_0x1aafdf(0x160)](),'processId':_0x1770c6[_0x1aafdf(0x13a)]()['toString']()},_0x2af361={};_0x2af361['platformIndex']=_0x1eac0f,_0x2af361[_0x1aafdf(0x129)]=_0x3809d8,_0x2af361[_0x1aafdf(0x133)]=_0x1b62b9,_0x2af361['testFrameworkState']=_0x539d30,_0x2af361[_0x1aafdf(0x15e)]=_0x13b665,_0x2af361[_0x1aafdf(0x105)]=_0x5c638c,_0x2af361['automationSession']=_0x556b6a,_0x2af361[_0x1aafdf(0x14e)]=_0x18e7a6,_0x2af361['executionContext']=_0x235ee6;const _0x4dc470=_0x2af361;this['logger']['debug'](_0x1aafdf(0x15c)+util[_0x1aafdf(0x147)](_0x4dc470));const _0x34e058=await GrpcClient[_0x1aafdf(0x136)]()[_0x1aafdf(0x153)](_0x4dc470);this[_0x1aafdf(0x126)][_0x1aafdf(0x159)](_0x1aafdf(0x107)+_0x2b1c4a);}}catch(_0x5a327b){this[_0x1aafdf(0x126)][_0x1aafdf(0x13b)](_0x1aafdf(0x109)+util[_0x1aafdf(0x147)](_0x5a327b));}}}function a81_0x5d49(){const _0x1cad20=['getJwt','getState','../cliUtils.js','env','exports','onPageCreate','testFrameworkEvent','testFrameworkVersion','registerObserver','./baseModule','getInstance','getTestDetails','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','5689150lvQtja','getProcessId','error','getModuleName','../TestInfo.js','frameworkName','7533168siFYyU','BROWSERSTACK_TESTHUB_UUID','KEY_TEST_DEFERRED','93kFrrWU','slWFt','KEY_SESSION_ID','3526chpyhs','base64','format','NMRrj','stringify','getRef','3473935LtfRgp','instance','6249698qQLzOL','capabilities','from','../browserstackCLI.js','length','GXzkF','testSessionEvent','../framework/testFramework.js','POST','817272LppjZE','5|3|1|4|6|7|0|2','version','debug','matchHookRegex','retry','onPageCreate\x20CBTSession\x20payload:\x20','testInfo','testHookState','testFrameworkData','toString','forEach','4iRRcRr','bind','split','822022efeAuI','testFrameworkState','frameworkVersion','CUCUMBER','9GhZMqF','testUuid','MODULE_NAME','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','TestHubModule','Error\x20in\x20sending\x20CBTSession:\x20','getTestUUID','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','ENV_VAR','O11yHashedID','page','WmxSk','../state/automationFrameworkState.js','testhubConfig','../../../helpers/test-observability/constants.js','getTestId','fYoVb','../../../helpers/helper.js','KEY_PLATFORM_INDEX','HLRZR','TEST','BROWSERSTACK_TESTHUB_JWT','../../../helpers/classLogger.js','getBuildHashedId','../state/hookState.js','../framework/automationFramework.js','\x20hookState:\x20','getThreadId','sendTestFrameworkEvent','getTestIdentifierFromTestInfo','../grpcClient.js','onAllTestEvents','../framework/constants/testFrameworkConstants.js','sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','logger','getCurrentTestState','keys','testFrameworkName','name','uumXg'];a81_0x5d49=function(){return _0x1cad20;};return a81_0x5d49();}TestHubModule[a81_0xea0be0(0x106)]=a81_0xea0be0(0x108),TestHubModule[a81_0xea0be0(0x141)]='test_deferred',module[a81_0xea0be0(0x130)]=TestHubModule;