const a85_0x1de45d=a85_0x2b41;function a85_0x2b41(_0x5e0a03,_0x24e9b0){const _0x13ebc4=a85_0x13eb();return a85_0x2b41=function(_0x2b4178,_0x12d84d){_0x2b4178=_0x2b4178-0x12a;let _0x4d8c5c=_0x13ebc4[_0x2b4178];return _0x4d8c5c;},a85_0x2b41(_0x5e0a03,_0x24e9b0);}function a85_0x13eb(){const _0x5a64fc=['MODULE_NAME','ROCDa','KEY_TEST_FRAMEWORK_VERSION','19555aGIsxq','onPageCreate','error','util','O11yHashedID','instance',',\x20test_identifier:\x20','testFrameworkState','getId','createTestFrameworkEventPayload','format','getCurrentTestState','TEST','keys','testSessionEvent','../browserstackCLI.js','getContext','Error\x20in\x20sending\x20CBTSession:\x20','../utils/jest-utils.js','getState','POST','KEY_TEST_DEFERRED','getTestFramework','rowLw','KEY_SESSION_ID','../../../helpers/test-observability/constants.js','base64','BROWSERSTACK_TESTHUB_UUID','../../../helpers/helper.js','../framework/testFramework.js','retry','onAllTestEvents','test_identifier','getTestIdentifierFromTestInfo','getRef','getBuildHashedId','sendTestFrameworkEvent','1181957AzXfPa','./baseModule','1128MhUCMe','LlvnO','matchHookRegex','../../../helpers/testhub/constants','2|6|4|7|1|3|8|0|5','./playwrightDriverModule.js','BROWSERSTACK_TESTHUB_JWT','4474630qIEdgk','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','toString','hQslM','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','testFrameworkData','mJfff','getTestId','KEY_PLATFORM_INDEX','test_deferred','CREATE','18Xrgqtw','../grpcClient.js','yxtEw','getProcessId','logger','env','values','testhubConfig','JEST','getTestDetails','testInfo','100OJBZbE','ENV_VAR','jDhsD','226EMBJMG','getInstance','getJwt','forEach','../state/automationFrameworkState.js','KEY_HUB_URL','../framework/automationFramework.js','9JxUUZA','UCqrd','75603FHLEbN','1632261eUCorc','bind','getThreadId','nYCnb','../cliUtils.js','\x20hookState:\x20','name','2470408IrOCUs','../state/hookState.js','getTestUUID','onPageCreate:\x20Recreated\x20Jest\x20testIdentifier:\x20','CUCUMBER','registerObserver','recreateIdentifierFromTestInfo','stringify','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','isLTSSession','testUuid','../../../helpers/classLogger.js','./loadTestModule.js','frameworkName','testFrameworkEvent','split','debug','oQtYG','TestHubModule','1142xIRHam','pJqAi'];a85_0x13eb=function(){return _0x5a64fc;};return a85_0x13eb();}(function(_0xac72fc,_0x951ce1){const _0x4dfb88=a85_0x2b41,_0x4fc0dd=_0xac72fc();while(!![]){try{const _0x1394eb=-parseInt(_0x4dfb88(0x14b))/0x1*(-parseInt(_0x4dfb88(0x198))/0x2)+-parseInt(_0x4dfb88(0x131))/0x3+-parseInt(_0x4dfb88(0x195))/0x4*(-parseInt(_0x4dfb88(0x150))/0x5)+parseInt(_0x4dfb88(0x18a))/0x6*(parseInt(_0x4dfb88(0x175))/0x7)+parseInt(_0x4dfb88(0x138))/0x8*(parseInt(_0x4dfb88(0x12e))/0x9)+parseInt(_0x4dfb88(0x17e))/0xa+-parseInt(_0x4dfb88(0x130))/0xb*(parseInt(_0x4dfb88(0x177))/0xc);if(_0x1394eb===_0x951ce1)break;else _0x4fc0dd['push'](_0x4fc0dd['shift']());}catch(_0x3a9584){_0x4fc0dd['push'](_0x4fc0dd['shift']());}}}(a85_0x13eb,0x491e1));const util=require(a85_0x1de45d(0x153)),BaseModule=require(a85_0x1de45d(0x176)),{createClassLogger}=require(a85_0x1de45d(0x143)),AutomationFramework=require(a85_0x1de45d(0x12d)),AutomationFrameworkState=require(a85_0x1de45d(0x12b)),HookState=require(a85_0x1de45d(0x139)),TestFramework=require(a85_0x1de45d(0x16d)),TestFrameworkState=require('../state/testFrameworkState.js'),PlaywrightDriverModule=require(a85_0x1de45d(0x17c)),TestFrameworkConstants=require('../framework/constants/testFrameworkConstants.js'),GrpcClient=require(a85_0x1de45d(0x18b)),CLIUtils=require(a85_0x1de45d(0x135)),TestInfo=require('../TestInfo.js'),testHubConstants=require(a85_0x1de45d(0x17a)),{FRAMEWORKS}=require(a85_0x1de45d(0x169)),helper=require(a85_0x1de45d(0x16c)),LoadTestModule=require(a85_0x1de45d(0x144)),JestUtils=require(a85_0x1de45d(0x162)),BrowserstackCLI=require(a85_0x1de45d(0x15f)),{getPlaywrightProvider}=require('../../../helpers/helper.js');class TestHubModule extends BaseModule{['logger']=createClassLogger('TestHubModule');constructor(_0x2dab28,_0x2323ac=null){const _0x533598=a85_0x1de45d,_0x44f105={};_0x44f105[_0x533598(0x182)]=_0x533598(0x17b),_0x44f105['pJqAi']=_0x533598(0x14a);const _0x360e66=_0x44f105,_0x253c89=_0x360e66[_0x533598(0x182)]['split']('|');let _0x2b2fc9=0x0;while(!![]){switch(_0x253c89[_0x2b2fc9++]){case'0':process[_0x533598(0x18f)][testHubConstants[_0x533598(0x196)][_0x533598(0x16b)]]=this[_0x533598(0x191)][_0x533598(0x173)]();continue;case'1':AutomationFramework[_0x533598(0x13d)](AutomationFrameworkState[_0x533598(0x189)],HookState['POST'],this[_0x533598(0x151)][_0x533598(0x132)](this));continue;case'2':super(_0x2323ac);continue;case'3':Object[_0x533598(0x190)](TestFrameworkState)[_0x533598(0x12a)](_0x526ee4=>{const _0x167e32=_0x533598;Object[_0x167e32(0x190)](HookState)[_0x167e32(0x12a)](_0x5150ff=>{const _0x35bbf2=_0x167e32;TestFramework[_0x35bbf2(0x13d)](_0x526ee4,_0x5150ff,this['onAllTestEvents'][_0x35bbf2(0x132)](this));});});continue;case'4':this[_0x533598(0x191)]=_0x2dab28;continue;case'5':BrowserstackCLI[_0x533598(0x154)]=this[_0x533598(0x191)]['getBuildHashedId']();continue;case'6':this[_0x533598(0x137)]=_0x360e66[_0x533598(0x14c)];continue;case'7':this['jestUtils']=new JestUtils();continue;case'8':process[_0x533598(0x18f)][testHubConstants['ENV_VAR'][_0x533598(0x17d)]]=this[_0x533598(0x191)][_0x533598(0x19a)]();continue;}break;}}['getModuleName'](){const _0x2f6ac3=a85_0x1de45d;return TestHubModule[_0x2f6ac3(0x14d)];}[a85_0x1de45d(0x16f)](_0x1efaea){const _0x5f5db6=a85_0x1de45d,_0x4d4051={};_0x4d4051[_0x5f5db6(0x197)]=function(_0x1bd191,_0x49e1a4){return _0x1bd191===_0x49e1a4;};const _0x5420a0=_0x4d4051,_0x477b52=_0x1efaea['instance'],_0x27a175=_0x477b52[_0x5f5db6(0x15b)]();(_0x5420a0[_0x5f5db6(0x197)](_0x27a175,TestFrameworkState[_0x5f5db6(0x15c)])||CLIUtils[_0x5f5db6(0x179)](_0x27a175[_0x5f5db6(0x181)]()[_0x5f5db6(0x147)]('.')[0x1]))&&this[_0x5f5db6(0x174)](_0x1efaea);}async['sendTestFrameworkEvent'](_0x345c28){const _0xa76c1d=a85_0x1de45d,_0x3a2078={};_0x3a2078[_0xa76c1d(0x178)]=function(_0x331518,_0x47aa91){return _0x331518===_0x47aa91;},_0x3a2078[_0xa76c1d(0x134)]=_0xa76c1d(0x180);const _0x231eb9=_0x3a2078;try{const _0x3f380d=BrowserstackCLI[_0xa76c1d(0x199)]()[_0xa76c1d(0x166)]()[_0xa76c1d(0x159)](_0x345c28);if(!_0x3f380d||_0x231eb9['LlvnO'](Object[_0xa76c1d(0x15d)](_0x3f380d)['length'],0x0)){this['logger'][_0xa76c1d(0x148)](_0x231eb9[_0xa76c1d(0x134)]);return;}const _0x5de2c9=await GrpcClient['getInstance']()[_0xa76c1d(0x146)](_0x3f380d);this['logger']['debug'](_0xa76c1d(0x17f)+_0x3f380d[_0xa76c1d(0x157)]+_0xa76c1d(0x136)+_0x3f380d['hookState']);}catch(_0x5edfc3){this[_0xa76c1d(0x18e)]['error']('Error\x20in\x20sendTestFrameworkEvent:\x20'+util[_0xa76c1d(0x15a)](_0x5edfc3));}}async[a85_0x1de45d(0x151)](_0x1109bf){const _0x230c63=a85_0x1de45d,_0xa3e026={'UCqrd':function(_0x117e28,_0x37fdc6){return _0x117e28===_0x37fdc6;},'oQtYG':'onPageCreate:\x20Skipping\x20CBT\x20session\x20event\x20-\x20no\x20testInfo\x20(page\x20created\x20outside\x20test\x20context)','ROCDa':function(_0x2caee1,_0x207466){return _0x2caee1===_0x207466;},'yxtEw':function(_0x574a74,_0x50a91e){return _0x574a74(_0x50a91e);},'mJfff':_0x230c63(0x16a),'rowLw':function(_0x42110b,_0x23207c){return _0x42110b===_0x23207c;},'GFwuR':function(_0x45261f,_0xf50067){return _0x45261f===_0xf50067;}};try{if(_0x1109bf['page']){const _0x365b2b=this[_0x230c63(0x186)](_0x1109bf);this[_0x230c63(0x18e)][_0x230c63(0x148)](_0x230c63(0x183)+_0x365b2b);if(this[_0x230c63(0x184)]&&_0xa3e026[_0x230c63(0x12f)](this[_0x230c63(0x184)][_0x230c63(0x137)],FRAMEWORKS['JEST'])&&!_0x1109bf[_0x230c63(0x194)]){this[_0x230c63(0x18e)][_0x230c63(0x148)](_0xa3e026[_0x230c63(0x149)]);return;}let _0xbd3e07,_0x3199e5;if(this[_0x230c63(0x184)]&&_0xa3e026[_0x230c63(0x14e)](this['testFrameworkData'][_0x230c63(0x137)],FRAMEWORKS[_0x230c63(0x13c)]))_0xbd3e07=_0x365b2b,_0x3199e5=TestInfo[_0x230c63(0x13a)](_0xbd3e07);else this[_0x230c63(0x184)]&&_0xa3e026[_0x230c63(0x14e)](this[_0x230c63(0x184)][_0x230c63(0x137)],FRAMEWORKS[_0x230c63(0x192)])?(_0xbd3e07=this['jestUtils'][_0x230c63(0x13e)](_0x1109bf[_0x230c63(0x194)]),this[_0x230c63(0x18e)]['debug'](_0x230c63(0x13b)+_0xbd3e07)):(_0xbd3e07=TestInfo[_0x230c63(0x171)](_0x1109bf[_0x230c63(0x194)],_0x1109bf[_0x230c63(0x194)][_0x230c63(0x16e)]),_0x3199e5=TestInfo[_0x230c63(0x13a)](_0xbd3e07));const _0x21c4f1=TestInfo[_0x230c63(0x193)](_0xbd3e07),_0x50a22a=_0x1109bf[_0x230c63(0x155)],_0x55f368=AutomationFramework[_0x230c63(0x163)](_0x50a22a,PlaywrightDriverModule[_0x230c63(0x187)]),_0x139597=_0x21c4f1?.[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]||this[_0x230c63(0x184)]&&this[_0x230c63(0x184)][_0x230c63(0x137)],_0x2e589c=_0x21c4f1?.[TestFrameworkConstants[_0x230c63(0x14f)]]||this[_0x230c63(0x184)]&&this[_0x230c63(0x184)]['version'],_0x2d5d72=TestFrameworkState[_0x230c63(0x15c)][_0x230c63(0x181)]()[_0x230c63(0x147)]('.')[0x1],_0xf40b0a=HookState[_0x230c63(0x164)][_0x230c63(0x181)]()[_0x230c63(0x147)]('.')[0x1],_0x41f41d=_0x50a22a[_0x230c63(0x160)](),_0x169f96=AutomationFramework[_0x230c63(0x163)](_0x50a22a,PlaywrightDriverModule[_0x230c63(0x12c)],''),_0x224a48={'provider':_0xa3e026[_0x230c63(0x18c)](getPlaywrightProvider,_0x169f96),'frameworkName':_0x50a22a[_0x230c63(0x145)],'frameworkVersion':_0x50a22a['frameworkVersion'],'frameworkSessionId':LoadTestModule[_0x230c63(0x141)]()?LoadTestModule['getLTSSessionId']():AutomationFramework['getState'](_0x50a22a,PlaywrightDriverModule[_0x230c63(0x168)],''),'ref':_0x50a22a[_0x230c63(0x172)](),'hubUrl':_0x169f96};let _0x183d06=AutomationFramework[_0x230c63(0x163)](_0x50a22a,PlaywrightDriverModule['KEY_CAPABILITIES'],{});_0x183d06=Buffer['from'](JSON[_0x230c63(0x13f)](_0x183d06))[_0x230c63(0x181)](_0xa3e026[_0x230c63(0x185)]);const _0x4178e8={'hash':_0x41f41d[_0x230c63(0x158)](),'threadId':_0x41f41d[_0x230c63(0x133)]()['toString'](),'processId':_0x41f41d[_0x230c63(0x18d)]()['toString']()},_0x2509d2={};_0x2509d2[_0x230c63(0x170)]=_0xbd3e07;const _0x125860={};_0x125860[_0x230c63(0x142)]=_0x3199e5;const _0x28f7be={'platformIndex':_0x55f368,'testFrameworkName':_0x139597,'testFrameworkVersion':_0x2e589c,'testFrameworkState':_0x2d5d72,'testHookState':_0xf40b0a,...this[_0x230c63(0x184)]&&_0xa3e026[_0x230c63(0x167)](this[_0x230c63(0x184)]['name'],FRAMEWORKS[_0x230c63(0x192)])?_0x2509d2:_0x125860,'automationSession':_0x224a48,'capabilities':_0x183d06,'executionContext':_0x4178e8};this['logger'][_0x230c63(0x148)]('onPageCreate\x20CBTSession\x20payload:\x20'+util[_0x230c63(0x15a)](_0x28f7be));const _0x2a98fa=await GrpcClient[_0x230c63(0x199)]()[_0x230c63(0x15e)](_0x28f7be);this[_0x230c63(0x18e)][_0x230c63(0x148)](_0x230c63(0x140)+_0x365b2b+(this[_0x230c63(0x184)]&&_0xa3e026['GFwuR'](this[_0x230c63(0x184)][_0x230c63(0x137)],FRAMEWORKS[_0x230c63(0x192)])?_0x230c63(0x156)+_0xbd3e07:''));}}catch(_0x157de1){this[_0x230c63(0x18e)][_0x230c63(0x152)](_0x230c63(0x161)+util['format'](_0x157de1));}}}TestHubModule[a85_0x1de45d(0x14d)]=a85_0x1de45d(0x14a),TestHubModule[a85_0x1de45d(0x165)]=a85_0x1de45d(0x188),module['exports']=TestHubModule;