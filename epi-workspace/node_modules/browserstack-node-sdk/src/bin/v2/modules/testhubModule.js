const a78_0x377869=a78_0xd26b;(function(_0x2c84cb,_0x1cc8a1){const _0x4afcea=a78_0xd26b,_0x20bfac=_0x2c84cb();while(!![]){try{const _0x466d03=parseInt(_0x4afcea(0x185))/0x1*(parseInt(_0x4afcea(0x15b))/0x2)+-parseInt(_0x4afcea(0x153))/0x3+-parseInt(_0x4afcea(0x164))/0x4*(-parseInt(_0x4afcea(0x194))/0x5)+parseInt(_0x4afcea(0x179))/0x6+parseInt(_0x4afcea(0x182))/0x7+parseInt(_0x4afcea(0x162))/0x8+parseInt(_0x4afcea(0x167))/0x9*(-parseInt(_0x4afcea(0x1a1))/0xa);if(_0x466d03===_0x1cc8a1)break;else _0x20bfac['push'](_0x20bfac['shift']());}catch(_0x5de1bc){_0x20bfac['push'](_0x20bfac['shift']());}}}(a78_0x44c7,0x34f4d));const util=require(a78_0x377869(0x165)),BaseModule=require(a78_0x377869(0x1bf)),{createClassLogger}=require(a78_0x377869(0x178)),AutomationFramework=require('../framework/automationFramework.js'),AutomationFrameworkState=require(a78_0x377869(0x15d)),HookState=require(a78_0x377869(0x16b)),TestFramework=require(a78_0x377869(0x184)),TestFrameworkState=require('../state/testFrameworkState.js'),PlaywrightDriverModule=require('./playwrightDriverModule.js'),TestFrameworkConstants=require('../framework/constants/testFrameworkConstants.js'),GrpcClient=require(a78_0x377869(0x1ab)),CLIUtils=require(a78_0x377869(0x15f)),TestInfo=require(a78_0x377869(0x19c)),testHubConstants=require(a78_0x377869(0x190)),BrowserstackCLI=require(a78_0x377869(0x16c)),{getPlaywrightProvider}=require('../../../helpers/helper.js'),{getTestRunIdentifier}=require('../../playwright/reporter/pwUtils.js');function a78_0xd26b(_0xbb91d0,_0x2be724){const _0x44c730=a78_0x44c7();return a78_0xd26b=function(_0xd26b5a,_0x1c6f81){_0xd26b5a=_0xd26b5a-0x153;let _0x5d9c6e=_0x44c730[_0xd26b5a];return _0x5d9c6e;},a78_0xd26b(_0xbb91d0,_0x2be724);}class TestHubModule extends BaseModule{[a78_0x377869(0x161)]=createClassLogger(a78_0x377869(0x1b7));constructor(_0x39d265){const _0x25b68a=a78_0x377869,_0x227b86={};_0x227b86['wrqKb']=_0x25b68a(0x1c2),_0x227b86[_0x25b68a(0x188)]=_0x25b68a(0x1b7);const _0x18dac5=_0x227b86,_0x3646fd=_0x18dac5[_0x25b68a(0x1b3)]['split']('|');let _0x2bc8ed=0x0;while(!![]){switch(_0x3646fd[_0x2bc8ed++]){case'0':super();continue;case'1':AutomationFramework[_0x25b68a(0x1c0)](AutomationFrameworkState[_0x25b68a(0x169)],HookState['POST'],this[_0x25b68a(0x1a0)][_0x25b68a(0x1b4)](this));continue;case'2':process[_0x25b68a(0x166)][testHubConstants[_0x25b68a(0x183)][_0x25b68a(0x18e)]]=this[_0x25b68a(0x1a4)][_0x25b68a(0x187)]();continue;case'3':this[_0x25b68a(0x159)]=_0x18dac5['YjqKS'];continue;case'4':process[_0x25b68a(0x166)][testHubConstants[_0x25b68a(0x183)][_0x25b68a(0x1b1)]]=this['testhubConfig'][_0x25b68a(0x175)]();continue;case'5':this[_0x25b68a(0x1a4)]=_0x39d265;continue;case'6':Object['values'](TestFrameworkState)[_0x25b68a(0x17e)](_0x27aa0c=>{const _0x2a7366=_0x25b68a;Object['values'](HookState)[_0x2a7366(0x17e)](_0x1b0498=>{const _0x171ece=_0x2a7366;TestFramework[_0x171ece(0x1c0)](_0x27aa0c,_0x1b0498,this[_0x171ece(0x1b8)][_0x171ece(0x1b4)](this));});});continue;case'7':BrowserstackCLI[_0x25b68a(0x1bc)]=this['testhubConfig']['getBuildHashedId']();continue;}break;}}['getModuleName'](){return TestHubModule['MODULE_NAME'];}[a78_0x377869(0x1b8)](_0x69a09e){const _0x3d6427=a78_0x377869,_0x436d41={};_0x436d41[_0x3d6427(0x1aa)]=function(_0x36fb68,_0x55cf89){return _0x36fb68===_0x55cf89;};const _0x104169=_0x436d41,_0xe03d7=_0x69a09e[_0x3d6427(0x177)],_0x3516c5=_0xe03d7[_0x3d6427(0x1c1)]();(_0x104169[_0x3d6427(0x1aa)](_0x3516c5,TestFrameworkState[_0x3d6427(0x19d)])||CLIUtils['matchHookRegex'](_0x3516c5['toString']()[_0x3d6427(0x158)]('.')[0x1]))&&this['sendTestFrameworkEvent'](_0x69a09e);}async[a78_0x377869(0x17a)](_0x75c02e){const _0xdc5211=a78_0x377869,_0x570bba={'vzseA':function(_0x30b20c,_0x5b0c3d,_0x415f0c){return _0x30b20c(_0x5b0c3d,_0x415f0c);},'TEHtx':_0xdc5211(0x1a6)};try{const _0x5e844c=_0x75c02e[_0xdc5211(0x171)]['id'],_0x12ae9a=_0x570bba[_0xdc5211(0x192)](getTestRunIdentifier,_0x75c02e['test'],_0x75c02e[_0xdc5211(0x1a9)][_0xdc5211(0x18a)]),_0x5f121d=_0x75c02e['instance'],_0xe2dc61=_0x5f121d[_0xdc5211(0x17d)](),_0x28572d=_0x5f121d[_0xdc5211(0x1b5)]()[_0xdc5211(0x186)](_0x12ae9a);this[_0xdc5211(0x161)][_0xdc5211(0x16e)](_0xdc5211(0x170)+_0x5e844c);const {[TestFrameworkConstants[_0xdc5211(0x18b)]]:_0x3eca5b='',[TestFrameworkConstants[_0xdc5211(0x1a5)]]:_0x744bf9='',[TestFrameworkConstants[_0xdc5211(0x198)]]:_0x12f422='',[TestFrameworkConstants['KEY_TEST_ENDED_AT']]:_0x3ab4fe=''}=_0x28572d,_0x2ca3a9=_0x5f121d[_0xdc5211(0x1c1)]()[_0xdc5211(0x17f)]()[_0xdc5211(0x158)]('.')[0x1],_0x1c9a33=_0x5f121d[_0xdc5211(0x1a3)]()[_0xdc5211(0x17f)]()[_0xdc5211(0x158)]('.')[0x1],_0x18ced3=global?.[_0xdc5211(0x1b2)]?.[_0xdc5211(0x168)]?.[_0xdc5211(0x17b)];;const _0x5be0b9=_0x5f121d[_0xdc5211(0x15a)](),_0x32697e=Buffer[_0xdc5211(0x172)](JSON[_0xdc5211(0x1a8)](_0x28572d))[_0xdc5211(0x17f)](_0x570bba[_0xdc5211(0x1af)]),_0x26092e={'hash':_0xe2dc61[_0xdc5211(0x16d)](),'threadId':_0xe2dc61[_0xdc5211(0x19f)]()[_0xdc5211(0x17f)](),'processId':_0xe2dc61[_0xdc5211(0x1bb)]()['toString']()},_0x53d69e={};_0x53d69e[_0xdc5211(0x16f)]=_0x18ced3,_0x53d69e[_0xdc5211(0x18d)]=_0x3eca5b,_0x53d69e[_0xdc5211(0x174)]=_0x744bf9,_0x53d69e[_0xdc5211(0x1ba)]=_0x2ca3a9,_0x53d69e[_0xdc5211(0x15e)]=_0x1c9a33,_0x53d69e[_0xdc5211(0x180)]=_0x12f422,_0x53d69e[_0xdc5211(0x196)]=_0x3ab4fe,_0x53d69e[_0xdc5211(0x1a2)]=_0x5be0b9,_0x53d69e[_0xdc5211(0x1c5)]=_0x32697e,_0x53d69e[_0xdc5211(0x197)]=_0x26092e;const _0x4ee435=_0x53d69e,_0x4c26da=await GrpcClient[_0xdc5211(0x19b)]()['testFrameworkEvent'](_0x4ee435);this[_0xdc5211(0x161)][_0xdc5211(0x16e)](_0xdc5211(0x181)+_0x5e844c+_0xdc5211(0x1ad)+_0x2ca3a9+_0xdc5211(0x156)+_0x1c9a33);}catch(_0x36b8a0){this[_0xdc5211(0x161)]['error'](_0xdc5211(0x16a)+util[_0xdc5211(0x1c6)](_0x36b8a0));}}async[a78_0x377869(0x1a0)](_0x20c151){const _0x4ec0cb=a78_0x377869,_0x14f458={'DhYZY':function(_0x1de557,_0x4fdbaa){return _0x1de557(_0x4fdbaa);},'QBUgj':_0x4ec0cb(0x1a6)};try{if(_0x20c151[_0x4ec0cb(0x1b9)]){const _0x495407=_0x20c151[_0x4ec0cb(0x18f)]['testId'];this[_0x4ec0cb(0x161)][_0x4ec0cb(0x16e)](_0x4ec0cb(0x18c)+_0x495407);const _0x3483e3=TestInfo[_0x4ec0cb(0x17c)](_0x20c151[_0x4ec0cb(0x18f)],_0x20c151[_0x4ec0cb(0x18f)][_0x4ec0cb(0x18a)]),_0x181fe3=TestInfo[_0x4ec0cb(0x1c3)](_0x3483e3),_0x2971fa=TestInfo[_0x4ec0cb(0x163)](_0x3483e3),_0xed10b8=_0x20c151[_0x4ec0cb(0x177)],_0x14e682=AutomationFramework[_0x4ec0cb(0x19e)](_0xed10b8,PlaywrightDriverModule[_0x4ec0cb(0x1a7)]),_0x442f28=_0x2971fa[TestFrameworkConstants[_0x4ec0cb(0x18b)]],_0x8f4b0c=_0x2971fa[TestFrameworkConstants[_0x4ec0cb(0x1a5)]],_0x51157d=TestFrameworkState[_0x4ec0cb(0x19d)][_0x4ec0cb(0x17f)]()[_0x4ec0cb(0x158)]('.')[0x1],_0x363fd3=HookState[_0x4ec0cb(0x195)][_0x4ec0cb(0x17f)]()[_0x4ec0cb(0x158)]('.')[0x1],_0xa325fd=_0xed10b8[_0x4ec0cb(0x17d)](),_0x591d70=AutomationFramework[_0x4ec0cb(0x19e)](_0xed10b8,PlaywrightDriverModule[_0x4ec0cb(0x1be)],''),_0x56a0ed={'provider':_0x14f458[_0x4ec0cb(0x1ac)](getPlaywrightProvider,_0x591d70),'frameworkName':_0xed10b8[_0x4ec0cb(0x173)],'frameworkVersion':_0xed10b8[_0x4ec0cb(0x154)],'frameworkSessionId':AutomationFramework['getState'](_0xed10b8,PlaywrightDriverModule[_0x4ec0cb(0x191)],''),'ref':_0xed10b8[_0x4ec0cb(0x15a)](),'hubUrl':_0x591d70};let _0x32108b=AutomationFramework[_0x4ec0cb(0x19e)](_0xed10b8,PlaywrightDriverModule[_0x4ec0cb(0x1b6)],{});_0x32108b=Buffer['from'](JSON['stringify'](_0x32108b))[_0x4ec0cb(0x17f)](_0x14f458[_0x4ec0cb(0x176)]);const _0x2efcc6={'hash':_0xa325fd[_0x4ec0cb(0x16d)](),'threadId':_0xa325fd[_0x4ec0cb(0x19f)]()[_0x4ec0cb(0x17f)](),'processId':_0xa325fd['getProcessId']()[_0x4ec0cb(0x17f)]()},_0x1d6c7e={};_0x1d6c7e[_0x4ec0cb(0x16f)]=_0x14e682,_0x1d6c7e[_0x4ec0cb(0x18d)]=_0x442f28,_0x1d6c7e['testFrameworkVersion']=_0x8f4b0c,_0x1d6c7e['testFrameworkState']=_0x51157d,_0x1d6c7e[_0x4ec0cb(0x155)]=_0x363fd3,_0x1d6c7e[_0x4ec0cb(0x160)]=_0x181fe3,_0x1d6c7e[_0x4ec0cb(0x157)]=_0x56a0ed,_0x1d6c7e[_0x4ec0cb(0x1b0)]=_0x32108b,_0x1d6c7e[_0x4ec0cb(0x197)]=_0x2efcc6;const _0x51204c=_0x1d6c7e;this[_0x4ec0cb(0x161)][_0x4ec0cb(0x16e)](_0x4ec0cb(0x189)+util[_0x4ec0cb(0x1c6)](_0x51204c));const _0xf6f672=await GrpcClient[_0x4ec0cb(0x19b)]()[_0x4ec0cb(0x193)](_0x51204c);this['logger'][_0x4ec0cb(0x16e)](_0x4ec0cb(0x15c)+_0x495407);}}catch(_0x539003){this[_0x4ec0cb(0x161)][_0x4ec0cb(0x1ae)](_0x4ec0cb(0x199)+util['format'](_0x539003));}}}TestHubModule[a78_0x377869(0x19a)]='TestHubModule',TestHubModule['KEY_TEST_DEFERRED']=a78_0x377869(0x1bd),module[a78_0x377869(0x1c4)]=TestHubModule;function a78_0x44c7(){const _0x5813aa=['Error\x20in\x20sending\x20CBTSession:\x20','MODULE_NAME','getInstance','../TestInfo.js','TEST','getState','getThreadId','onPageCreate','7801720CRrfuJ','uuid','getCurrentHookState','testhubConfig','KEY_TEST_FRAMEWORK_VERSION','base64','KEY_PLATFORM_INDEX','stringify','result','msVzd','../grpcClient.js','DhYZY','\x20testState:\x20','error','TEHtx','capabilities','BROWSERSTACK_TESTHUB_UUID','__workerDetails','wrqKb','bind','getAllData','KEY_CAPABILITIES','TestHubModule','onAllTestEvents','page','testFrameworkState','getProcessId','O11yHashedID','test_deferred','KEY_HUB_URL','./baseModule','registerObserver','getCurrentTestState','0|3|5|1|6|2|4|7','getTestUUID','exports','eventJson','format','413403aizGAA','frameworkVersion','testHookState','\x20hookState:\x20','automationSession','split','name','getRef','842258uuMRRZ','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','../state/automationFrameworkState.js','hookState','../cliUtils.js','testUuid','logger','2416728HRcqcJ','getTestDetails','1280hetrNE','util','env','9wTiQgS','workerInfo','CREATE','Error\x20in\x20sendTestFrameworkEvent:\x20','../state/hookState.js','../browserstackCLI.js','getId','debug','platformIndex','sendTestFrameworkEvent\x20testId:\x20','test','from','frameworkName','testFrameworkVersion','getBuildHashedId','QBUgj','instance','../../../helpers/classLogger.js','288846kaEYVX','sendTestFrameworkEvent','parallelIndex','getTestIdentifierFromTestInfo','getContext','forEach','toString','startedAt','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','445767zuYTms','ENV_VAR','../framework/testFramework.js','1iPqBla','get','getJwt','YjqKS','onPageCreate\x20CBTSession\x20payload:\x20','retry','KEY_TEST_FRAMEWORK_NAME','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','testFrameworkName','BROWSERSTACK_TESTHUB_JWT','testInfo','../../../helpers/testhub/constants','KEY_SESSION_ID','vzseA','testSessionEvent','4685NmjyZF','POST','endedAt','executionContext','KEY_TEST_STARTED_AT'];a78_0x44c7=function(){return _0x5813aa;};return a78_0x44c7();}