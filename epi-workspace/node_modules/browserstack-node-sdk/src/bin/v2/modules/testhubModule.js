const a85_0x354943=a85_0x2cb1;(function(_0xc509b,_0xf8b7d){const _0x59534b=a85_0x2cb1,_0x92335c=_0xc509b();while(!![]){try{const _0x580291=parseInt(_0x59534b(0x1cd))/0x1+-parseInt(_0x59534b(0x1c7))/0x2*(-parseInt(_0x59534b(0x1f8))/0x3)+-parseInt(_0x59534b(0x1ca))/0x4+parseInt(_0x59534b(0x19f))/0x5+-parseInt(_0x59534b(0x1a9))/0x6+-parseInt(_0x59534b(0x1d9))/0x7+parseInt(_0x59534b(0x1c0))/0x8;if(_0x580291===_0xf8b7d)break;else _0x92335c['push'](_0x92335c['shift']());}catch(_0x4e8749){_0x92335c['push'](_0x92335c['shift']());}}}(a85_0x15c6,0x2a574));function a85_0x2cb1(_0x33fab8,_0x12d37e){const _0x15c6fb=a85_0x15c6();return a85_0x2cb1=function(_0x2cb1aa,_0x338b48){_0x2cb1aa=_0x2cb1aa-0x196;let _0x271987=_0x15c6fb[_0x2cb1aa];return _0x271987;},a85_0x2cb1(_0x33fab8,_0x12d37e);}function a85_0x15c6(){const _0x4521b6=['FiibO','sendTestFrameworkEvent','../state/automationFrameworkState.js','Error\x20in\x20sending\x20CBTSession:\x20','onPageCreate:\x20Recreated\x20Jest\x20testIdentifier:\x20','1751802wBXwtR','KEY_PLATFORM_INDEX','loVlo','getLTSSessionId','values','split','format','sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','env','../utils/jest-utils.js','getTestFramework','../../../helpers/test-observability/constants.js','4|1|0|5|8|3|7|6|2','getRef','retry','JEST','testhubConfig','getModuleName','instance','bind','KEY_HUB_URL','base64','mgxez','2279584QCtBVu','../state/hookState.js','onPageCreate','getProcessId','createTestFrameworkEventPayload','WqoZq','KxdvW','6xrAXIZ','../../../helpers/classLogger.js','KEY_TEST_FRAMEWORK_VERSION','1073592AAEEyV','test_identifier','CUCUMBER','47639KTYZPm','./loadTestModule.js','getTestId','onAllTestEvents','getTestDetails','forEach','../browserstackCLI.js','getJwt','POST','keys','name','version','1399048ErnkKX','KEY_TEST_FRAMEWORK_NAME','jestUtils','getTestUUID','getId','testFrameworkState','registerObserver','toString','TEST','length','getCurrentTestState','ENV_VAR','../grpcClient.js','debug','getInstance','getState','getBuildHashedId','../TestInfo.js','testSessionEvent','page','./baseModule','logger','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','\x20hookState:\x20','TestHubModule','crCJH','error','getThreadId','KZuvA','testInfo','onPageCreate\x20CBTSession\x20payload:\x20','291363qpzVeI','getTestIdentifierFromTestInfo','recreateIdentifierFromTestInfo','MODULE_NAME','O11yHashedID','../cliUtils.js','../framework/testFramework.js','dpKKO','CREATE','util','./playwrightDriverModule.js','testUuid','from','../../../helpers/helper.js','test_deferred','stringify','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','1548535lHPDVF','KEY_SESSION_ID','isLTSSession','BROWSERSTACK_TESTHUB_UUID','testFrameworkData'];a85_0x15c6=function(){return _0x4521b6;};return a85_0x15c6();}const util=require(a85_0x354943(0x197)),BaseModule=require(a85_0x354943(0x1ed)),{createClassLogger}=require(a85_0x354943(0x1c8)),AutomationFramework=require('../framework/automationFramework.js'),AutomationFrameworkState=require(a85_0x354943(0x1a6)),HookState=require(a85_0x354943(0x1c1)),TestFramework=require(a85_0x354943(0x1fe)),TestFrameworkState=require('../state/testFrameworkState.js'),PlaywrightDriverModule=require(a85_0x354943(0x198)),TestFrameworkConstants=require('../framework/constants/testFrameworkConstants.js'),GrpcClient=require(a85_0x354943(0x1e5)),CLIUtils=require(a85_0x354943(0x1fd)),TestInfo=require(a85_0x354943(0x1ea)),testHubConstants=require('../../../helpers/testhub/constants'),{FRAMEWORKS}=require(a85_0x354943(0x1b4)),helper=require(a85_0x354943(0x19b)),LoadTestModule=require(a85_0x354943(0x1ce)),JestUtils=require(a85_0x354943(0x1b2)),BrowserstackCLI=require(a85_0x354943(0x1d3)),{getPlaywrightProvider}=require(a85_0x354943(0x19b));class TestHubModule extends BaseModule{['logger']=createClassLogger('TestHubModule');constructor(_0x4e9c4d,_0x5e47fd=null){const _0x14b5cd=a85_0x354943,_0x30d0ff={};_0x30d0ff['KxdvW']=_0x14b5cd(0x1b5),_0x30d0ff['kYfJR']=_0x14b5cd(0x1f1);const _0x2475e0=_0x30d0ff,_0x2df596=_0x2475e0[_0x14b5cd(0x1c6)]['split']('|');let _0x523cbd=0x0;while(!![]){switch(_0x2df596[_0x523cbd++]){case'0':this[_0x14b5cd(0x1b9)]=_0x4e9c4d;continue;case'1':this[_0x14b5cd(0x1d7)]=_0x2475e0['kYfJR'];continue;case'2':BrowserstackCLI[_0x14b5cd(0x1fc)]=this[_0x14b5cd(0x1b9)]['getBuildHashedId']();continue;case'3':Object[_0x14b5cd(0x1ad)](TestFrameworkState)[_0x14b5cd(0x1d2)](_0x3efebb=>{const _0x1a473e=_0x14b5cd;Object['values'](HookState)[_0x1a473e(0x1d2)](_0x4d500a=>{const _0xc71471=_0x1a473e;TestFramework[_0xc71471(0x1df)](_0x3efebb,_0x4d500a,this[_0xc71471(0x1d0)][_0xc71471(0x1bc)](this));});});continue;case'4':super(_0x5e47fd);continue;case'5':this[_0x14b5cd(0x1db)]=new JestUtils();continue;case'6':process[_0x14b5cd(0x1b1)][testHubConstants[_0x14b5cd(0x1e4)][_0x14b5cd(0x1a2)]]=this[_0x14b5cd(0x1b9)][_0x14b5cd(0x1e9)]();continue;case'7':process[_0x14b5cd(0x1b1)][testHubConstants[_0x14b5cd(0x1e4)]['BROWSERSTACK_TESTHUB_JWT']]=this['testhubConfig'][_0x14b5cd(0x1d4)]();continue;case'8':AutomationFramework['registerObserver'](AutomationFrameworkState[_0x14b5cd(0x196)],HookState[_0x14b5cd(0x1d5)],this[_0x14b5cd(0x1c2)][_0x14b5cd(0x1bc)](this));continue;}break;}}[a85_0x354943(0x1ba)](){const _0x585920=a85_0x354943;return TestHubModule[_0x585920(0x1fb)];}[a85_0x354943(0x1d0)](_0x1618ab){const _0x45f822=a85_0x354943,_0x37f4ef={};_0x37f4ef[_0x45f822(0x1ff)]=function(_0x49ed54,_0x364775){return _0x49ed54===_0x364775;};const _0x599dbd=_0x37f4ef,_0x22674b=_0x1618ab[_0x45f822(0x1bb)],_0x10cd41=_0x22674b[_0x45f822(0x1e3)]();(_0x599dbd[_0x45f822(0x1ff)](_0x10cd41,TestFrameworkState[_0x45f822(0x1e1)])||CLIUtils['matchHookRegex'](_0x10cd41[_0x45f822(0x1e0)]()['split']('.')[0x1]))&&this[_0x45f822(0x1a5)](_0x1618ab);}async[a85_0x354943(0x1a5)](_0xec5b){const _0x20acd3=a85_0x354943,_0x3163f0={};_0x3163f0[_0x20acd3(0x1f2)]=function(_0x59e897,_0x597a10){return _0x59e897===_0x597a10;},_0x3163f0['WqoZq']=_0x20acd3(0x1b0);const _0x33d67a=_0x3163f0;try{const _0x341ad5=BrowserstackCLI[_0x20acd3(0x1e7)]()[_0x20acd3(0x1b3)]()[_0x20acd3(0x1c4)](_0xec5b);if(!_0x341ad5||_0x33d67a[_0x20acd3(0x1f2)](Object[_0x20acd3(0x1d6)](_0x341ad5)[_0x20acd3(0x1e2)],0x0)){this[_0x20acd3(0x1ee)][_0x20acd3(0x1e6)](_0x33d67a[_0x20acd3(0x1c5)]);return;}const _0x4265c6=await GrpcClient[_0x20acd3(0x1e7)]()['testFrameworkEvent'](_0x341ad5);this[_0x20acd3(0x1ee)][_0x20acd3(0x1e6)](_0x20acd3(0x1ef)+_0x341ad5[_0x20acd3(0x1de)]+_0x20acd3(0x1f0)+_0x341ad5['hookState']);}catch(_0x419e62){this[_0x20acd3(0x1ee)][_0x20acd3(0x1f3)]('Error\x20in\x20sendTestFrameworkEvent:\x20'+util[_0x20acd3(0x1af)](_0x419e62));}}async[a85_0x354943(0x1c2)](_0x5d1541){const _0x56d09b=a85_0x354943,_0x22d3f1={'loVlo':function(_0x14d2df,_0x2243b2){return _0x14d2df===_0x2243b2;},'KZuvA':'onPageCreate:\x20Skipping\x20CBT\x20session\x20event\x20-\x20no\x20testInfo\x20(page\x20created\x20outside\x20test\x20context)','FiibO':function(_0xc24f8d,_0x20afeb){return _0xc24f8d(_0x20afeb);},'cVESe':_0x56d09b(0x1be),'mgxez':function(_0x4ae579,_0x597c82){return _0x4ae579===_0x597c82;}};try{if(_0x5d1541[_0x56d09b(0x1ec)]){const _0x3ad315=this[_0x56d09b(0x1cf)](_0x5d1541);this[_0x56d09b(0x1ee)][_0x56d09b(0x1e6)](_0x56d09b(0x19e)+_0x3ad315);if(this['testFrameworkData']&&_0x22d3f1[_0x56d09b(0x1ab)](this[_0x56d09b(0x1a3)][_0x56d09b(0x1d7)],FRAMEWORKS[_0x56d09b(0x1b8)])&&!_0x5d1541[_0x56d09b(0x1f6)]){this[_0x56d09b(0x1ee)][_0x56d09b(0x1e6)](_0x22d3f1[_0x56d09b(0x1f5)]);return;}let _0x5d1a7c,_0x105664;if(this[_0x56d09b(0x1a3)]&&_0x22d3f1['loVlo'](this['testFrameworkData'][_0x56d09b(0x1d7)],FRAMEWORKS[_0x56d09b(0x1cc)]))_0x5d1a7c=_0x3ad315,_0x105664=TestInfo[_0x56d09b(0x1dc)](_0x5d1a7c);else this[_0x56d09b(0x1a3)]&&_0x22d3f1['loVlo'](this['testFrameworkData'][_0x56d09b(0x1d7)],FRAMEWORKS[_0x56d09b(0x1b8)])?(_0x5d1a7c=this[_0x56d09b(0x1db)][_0x56d09b(0x1fa)](_0x5d1541['testInfo']),this[_0x56d09b(0x1ee)][_0x56d09b(0x1e6)](_0x56d09b(0x1a8)+_0x5d1a7c)):(_0x5d1a7c=TestInfo[_0x56d09b(0x1f9)](_0x5d1541[_0x56d09b(0x1f6)],_0x5d1541[_0x56d09b(0x1f6)][_0x56d09b(0x1b7)]),_0x105664=TestInfo['getTestUUID'](_0x5d1a7c));const _0x2d67fb=TestInfo[_0x56d09b(0x1d1)](_0x5d1a7c),_0xd2d18c=_0x5d1541['instance'],_0x2f39bf=AutomationFramework['getState'](_0xd2d18c,PlaywrightDriverModule[_0x56d09b(0x1aa)]),_0x500d11=_0x2d67fb?.[TestFrameworkConstants[_0x56d09b(0x1da)]]||this['testFrameworkData']&&this['testFrameworkData'][_0x56d09b(0x1d7)],_0x45ace3=_0x2d67fb?.[TestFrameworkConstants[_0x56d09b(0x1c9)]]||this[_0x56d09b(0x1a3)]&&this[_0x56d09b(0x1a3)][_0x56d09b(0x1d8)],_0x5400d6=TestFrameworkState[_0x56d09b(0x1e1)]['toString']()[_0x56d09b(0x1ae)]('.')[0x1],_0x1ae3ee=HookState[_0x56d09b(0x1d5)][_0x56d09b(0x1e0)]()[_0x56d09b(0x1ae)]('.')[0x1],_0x5c040c=_0xd2d18c['getContext'](),_0x7f85c5=AutomationFramework[_0x56d09b(0x1e8)](_0xd2d18c,PlaywrightDriverModule[_0x56d09b(0x1bd)],''),_0x11d49c={'provider':_0x22d3f1[_0x56d09b(0x1a4)](getPlaywrightProvider,_0x7f85c5),'frameworkName':_0xd2d18c['frameworkName'],'frameworkVersion':_0xd2d18c['frameworkVersion'],'frameworkSessionId':LoadTestModule[_0x56d09b(0x1a1)]()?LoadTestModule[_0x56d09b(0x1ac)]():AutomationFramework[_0x56d09b(0x1e8)](_0xd2d18c,PlaywrightDriverModule[_0x56d09b(0x1a0)],''),'ref':_0xd2d18c[_0x56d09b(0x1b6)](),'hubUrl':_0x7f85c5};let _0xda3580=AutomationFramework['getState'](_0xd2d18c,PlaywrightDriverModule['KEY_CAPABILITIES'],{});_0xda3580=Buffer[_0x56d09b(0x19a)](JSON[_0x56d09b(0x19d)](_0xda3580))[_0x56d09b(0x1e0)](_0x22d3f1['cVESe']);const _0xc181f6={'hash':_0x5c040c[_0x56d09b(0x1dd)](),'threadId':_0x5c040c[_0x56d09b(0x1f4)]()[_0x56d09b(0x1e0)](),'processId':_0x5c040c[_0x56d09b(0x1c3)]()[_0x56d09b(0x1e0)]()},_0x278211={};_0x278211[_0x56d09b(0x1cb)]=_0x5d1a7c;const _0x48d298={};_0x48d298[_0x56d09b(0x199)]=_0x105664;const _0x35a2d4={'platformIndex':_0x2f39bf,'testFrameworkName':_0x500d11,'testFrameworkVersion':_0x45ace3,'testFrameworkState':_0x5400d6,'testHookState':_0x1ae3ee,...this[_0x56d09b(0x1a3)]&&_0x22d3f1[_0x56d09b(0x1ab)](this[_0x56d09b(0x1a3)][_0x56d09b(0x1d7)],FRAMEWORKS[_0x56d09b(0x1b8)])?_0x278211:_0x48d298,'automationSession':_0x11d49c,'capabilities':_0xda3580,'executionContext':_0xc181f6};this[_0x56d09b(0x1ee)][_0x56d09b(0x1e6)](_0x56d09b(0x1f7)+util[_0x56d09b(0x1af)](_0x35a2d4));const _0x23755d=await GrpcClient[_0x56d09b(0x1e7)]()[_0x56d09b(0x1eb)](_0x35a2d4);this[_0x56d09b(0x1ee)][_0x56d09b(0x1e6)]('onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20'+_0x3ad315+(this[_0x56d09b(0x1a3)]&&_0x22d3f1[_0x56d09b(0x1bf)](this[_0x56d09b(0x1a3)]['name'],FRAMEWORKS[_0x56d09b(0x1b8)])?',\x20test_identifier:\x20'+_0x5d1a7c:''));}}catch(_0xc93be4){this[_0x56d09b(0x1ee)]['error'](_0x56d09b(0x1a7)+util[_0x56d09b(0x1af)](_0xc93be4));}}}TestHubModule[a85_0x354943(0x1fb)]='TestHubModule',TestHubModule['KEY_TEST_DEFERRED']=a85_0x354943(0x19c),module['exports']=TestHubModule;