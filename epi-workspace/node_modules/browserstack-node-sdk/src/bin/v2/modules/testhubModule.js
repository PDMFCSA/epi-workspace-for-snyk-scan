function a76_0x29f0(_0x4eb894,_0x350fc5){const _0x59cbeb=a76_0x59cb();return a76_0x29f0=function(_0x29f0f7,_0x5caee0){_0x29f0f7=_0x29f0f7-0x163;let _0x104f1c=_0x59cbeb[_0x29f0f7];return _0x104f1c;},a76_0x29f0(_0x4eb894,_0x350fc5);}const a76_0x3389c5=a76_0x29f0;(function(_0x2bec0f,_0x29b033){const _0x1ab44a=a76_0x29f0,_0x14e184=_0x2bec0f();while(!![]){try{const _0x56e8cc=-parseInt(_0x1ab44a(0x193))/0x1*(parseInt(_0x1ab44a(0x16b))/0x2)+parseInt(_0x1ab44a(0x17a))/0x3*(parseInt(_0x1ab44a(0x180))/0x4)+parseInt(_0x1ab44a(0x1ad))/0x5+parseInt(_0x1ab44a(0x18b))/0x6*(parseInt(_0x1ab44a(0x18e))/0x7)+-parseInt(_0x1ab44a(0x17b))/0x8*(parseInt(_0x1ab44a(0x183))/0x9)+parseInt(_0x1ab44a(0x18d))/0xa+-parseInt(_0x1ab44a(0x1a9))/0xb*(parseInt(_0x1ab44a(0x1a5))/0xc);if(_0x56e8cc===_0x29b033)break;else _0x14e184['push'](_0x14e184['shift']());}catch(_0x26fb04){_0x14e184['push'](_0x14e184['shift']());}}}(a76_0x59cb,0x33959));const util=require(a76_0x3389c5(0x170)),BaseModule=require(a76_0x3389c5(0x1be)),{createClassLogger}=require(a76_0x3389c5(0x178)),AutomationFramework=require(a76_0x3389c5(0x1a6)),AutomationFrameworkState=require(a76_0x3389c5(0x196)),HookState=require(a76_0x3389c5(0x184)),TestFramework=require('../framework/testFramework.js'),TestFrameworkState=require('../state/testFrameworkState.js'),PlaywrightDriverModule=require('./playwrightDriverModule.js'),TestFrameworkConstants=require('../framework/constants/testFrameworkConstants.js'),GrpcClient=require(a76_0x3389c5(0x189)),CLIUtils=require(a76_0x3389c5(0x19c)),TestInfo=require(a76_0x3389c5(0x1b1)),testHubConstants=require('../../../helpers/testhub/constants'),BrowserstackCLI=require(a76_0x3389c5(0x1ba)),{getPlaywrightProvider}=require(a76_0x3389c5(0x165));class TestHubModule extends BaseModule{['logger']=createClassLogger('TestHubModule');constructor(_0x1ebfb6){const _0x1a0e49=a76_0x3389c5,_0xfb25f5={};_0xfb25f5[_0x1a0e49(0x19b)]=_0x1a0e49(0x194),_0xfb25f5[_0x1a0e49(0x1bd)]='TestHubModule';const _0x50e681=_0xfb25f5,_0x1c3fa9=_0x50e681[_0x1a0e49(0x19b)][_0x1a0e49(0x16f)]('|');let _0x2db1fb=0x0;while(!![]){switch(_0x1c3fa9[_0x2db1fb++]){case'0':BrowserstackCLI[_0x1a0e49(0x16a)]=this[_0x1a0e49(0x17e)][_0x1a0e49(0x1aa)]();continue;case'1':Object[_0x1a0e49(0x186)](TestFrameworkState)[_0x1a0e49(0x1b0)](_0x494c96=>{const _0x441fe2=_0x1a0e49;Object[_0x441fe2(0x186)](HookState)[_0x441fe2(0x1b0)](_0x41c668=>{const _0x16eeb1=_0x441fe2;TestFramework[_0x16eeb1(0x177)](_0x494c96,_0x41c668,this['onAllTestEvents'][_0x16eeb1(0x1b5)](this));});});continue;case'2':super();continue;case'3':process[_0x1a0e49(0x16c)][testHubConstants[_0x1a0e49(0x174)][_0x1a0e49(0x175)]]=this[_0x1a0e49(0x17e)]['getBuildHashedId']();continue;case'4':process[_0x1a0e49(0x16c)][testHubConstants['ENV_VAR']['BROWSERSTACK_TESTHUB_JWT']]=this[_0x1a0e49(0x17e)]['getJwt']();continue;case'5':this[_0x1a0e49(0x169)]=_0x50e681[_0x1a0e49(0x1bd)];continue;case'6':this[_0x1a0e49(0x17e)]=_0x1ebfb6;continue;case'7':AutomationFramework[_0x1a0e49(0x177)](AutomationFrameworkState[_0x1a0e49(0x1a2)],HookState['POST'],this['onPageCreate'][_0x1a0e49(0x1b5)](this));continue;}break;}}[a76_0x3389c5(0x1a7)](){const _0xc5df28=a76_0x3389c5;return TestHubModule[_0xc5df28(0x19d)];}['onAllTestEvents'](_0x41f332){const _0x477fb2=a76_0x3389c5,_0x189164={};_0x189164[_0x477fb2(0x197)]=function(_0x191e1c,_0x1f4e34){return _0x191e1c===_0x1f4e34;};const _0x38f400=_0x189164,_0x21258e=_0x41f332[_0x477fb2(0x19a)],_0x5d9812=_0x21258e['getCurrentTestState']();(_0x38f400[_0x477fb2(0x197)](_0x5d9812,TestFrameworkState[_0x477fb2(0x1c8)])||CLIUtils['matchHookRegex'](_0x5d9812['toString']()[_0x477fb2(0x16f)]('.')[0x1]))&&this[_0x477fb2(0x1b7)](_0x41f332);}async[a76_0x3389c5(0x1b7)](_0x45da3a){const _0x25b46d=a76_0x3389c5,_0x471df5={};_0x471df5[_0x25b46d(0x1b2)]='base64';const _0x7c2813=_0x471df5;try{const _0x1dad39=_0x45da3a[_0x25b46d(0x19f)]['id'],_0xcc4b5c=_0x45da3a[_0x25b46d(0x19a)],_0x297a25=_0xcc4b5c['getContext'](),_0x34d41a=_0xcc4b5c[_0x25b46d(0x191)]()[_0x25b46d(0x1b6)](_0x1dad39);this['logger'][_0x25b46d(0x179)](_0x25b46d(0x1c6)+_0x1dad39);const {[TestFrameworkConstants[_0x25b46d(0x1ab)]]:_0x7da916='',[TestFrameworkConstants[_0x25b46d(0x1c9)]]:_0x38969b='',[TestFrameworkConstants['KEY_TEST_STARTED_AT']]:_0x2b2810='',[TestFrameworkConstants[_0x25b46d(0x185)]]:_0x22fd2c=''}=_0x34d41a,_0x1ae218=_0xcc4b5c[_0x25b46d(0x199)]()[_0x25b46d(0x1c4)]()['split']('.')[0x1],_0x184f47=_0xcc4b5c[_0x25b46d(0x1c2)]()[_0x25b46d(0x1c4)]()['split']('.')[0x1],_0x1987b6=global?.[_0x25b46d(0x195)]?.['workerInfo']?.[_0x25b46d(0x1b9)];;const _0x221351=_0xcc4b5c[_0x25b46d(0x18a)](),_0x27bc11=Buffer[_0x25b46d(0x182)](JSON[_0x25b46d(0x172)](_0x34d41a))['toString'](_0x7c2813[_0x25b46d(0x1b2)]),_0x460ebd={'hash':_0x297a25[_0x25b46d(0x1c5)](),'threadId':_0x297a25['getThreadId']()['toString'](),'processId':_0x297a25[_0x25b46d(0x198)]()['toString']()},_0x5f2467={};_0x5f2467['platformIndex']=_0x1987b6,_0x5f2467[_0x25b46d(0x167)]=_0x7da916,_0x5f2467[_0x25b46d(0x181)]=_0x38969b,_0x5f2467[_0x25b46d(0x1a0)]=_0x1ae218,_0x5f2467[_0x25b46d(0x192)]=_0x184f47,_0x5f2467[_0x25b46d(0x1bb)]=_0x2b2810,_0x5f2467[_0x25b46d(0x1bc)]=_0x22fd2c,_0x5f2467['uuid']=_0x221351,_0x5f2467['eventJson']=_0x27bc11,_0x5f2467[_0x25b46d(0x1af)]=_0x460ebd;const _0xb85d07=_0x5f2467,_0x3e24b5=await GrpcClient[_0x25b46d(0x173)]()['testFrameworkEvent'](_0xb85d07);this['logger']['debug'](_0x25b46d(0x1ac)+_0x1dad39+_0x25b46d(0x1c1)+_0x1ae218+_0x25b46d(0x1b8)+_0x184f47);}catch(_0xa8f2c0){this[_0x25b46d(0x163)]['error']('Error\x20in\x20sendTestFrameworkEvent:\x20'+util[_0x25b46d(0x1a3)](_0xa8f2c0));}}async[a76_0x3389c5(0x16e)](_0x1aa46a){const _0x520c0a=a76_0x3389c5,_0x430eea={'XUwAV':function(_0xd3255a,_0x26afa4){return _0xd3255a(_0x26afa4);},'zMiXW':_0x520c0a(0x164)};try{if(_0x1aa46a[_0x520c0a(0x168)]){const _0x17b5d8=_0x1aa46a[_0x520c0a(0x18f)][_0x520c0a(0x1b4)];this[_0x520c0a(0x163)]['debug'](_0x520c0a(0x1bf)+_0x17b5d8);const _0x446881=TestInfo[_0x520c0a(0x1b3)](_0x17b5d8),_0x5e8365=TestInfo['getTestDetails'](_0x17b5d8),_0x58b969=_0x1aa46a[_0x520c0a(0x19a)],_0x18a8fb=AutomationFramework[_0x520c0a(0x188)](_0x58b969,PlaywrightDriverModule['KEY_PLATFORM_INDEX']),_0x5e8776=_0x5e8365[TestFrameworkConstants[_0x520c0a(0x1ab)]],_0x40ae7f=_0x5e8365[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']],_0x5069c6=TestFrameworkState[_0x520c0a(0x1c8)][_0x520c0a(0x1c4)]()['split']('.')[0x1],_0x37f0fc=HookState['POST'][_0x520c0a(0x1c4)]()[_0x520c0a(0x16f)]('.')[0x1],_0x385c0e=_0x58b969['getContext'](),_0x4c264f=AutomationFramework['getState'](_0x58b969,PlaywrightDriverModule[_0x520c0a(0x1c3)],''),_0x3499c1={'provider':_0x430eea[_0x520c0a(0x1ae)](getPlaywrightProvider,_0x4c264f),'frameworkName':_0x58b969[_0x520c0a(0x166)],'frameworkVersion':_0x58b969[_0x520c0a(0x1c0)],'frameworkSessionId':AutomationFramework['getState'](_0x58b969,PlaywrightDriverModule[_0x520c0a(0x187)],''),'ref':_0x58b969[_0x520c0a(0x18a)](),'hubUrl':_0x4c264f};let _0x1b17fb=AutomationFramework[_0x520c0a(0x188)](_0x58b969,PlaywrightDriverModule[_0x520c0a(0x17f)],{});_0x1b17fb=Buffer[_0x520c0a(0x182)](JSON[_0x520c0a(0x172)](_0x1b17fb))['toString'](_0x430eea[_0x520c0a(0x1c7)]);const _0x1e7a95={'hash':_0x385c0e[_0x520c0a(0x1c5)](),'threadId':_0x385c0e[_0x520c0a(0x19e)]()['toString'](),'processId':_0x385c0e[_0x520c0a(0x198)]()['toString']()},_0x451f93={};_0x451f93[_0x520c0a(0x1a8)]=_0x18a8fb,_0x451f93[_0x520c0a(0x167)]=_0x5e8776,_0x451f93['testFrameworkVersion']=_0x40ae7f,_0x451f93[_0x520c0a(0x1a0)]=_0x5069c6,_0x451f93[_0x520c0a(0x176)]=_0x37f0fc,_0x451f93['testUuid']=_0x446881,_0x451f93['automationSession']=_0x3499c1,_0x451f93['capabilities']=_0x1b17fb,_0x451f93[_0x520c0a(0x1af)]=_0x1e7a95;const _0xf956dc=_0x451f93;this['logger'][_0x520c0a(0x179)](_0x520c0a(0x17d)+util[_0x520c0a(0x1a3)](_0xf956dc));const _0x1f5c10=await GrpcClient['getInstance']()[_0x520c0a(0x1a1)](_0xf956dc);this[_0x520c0a(0x163)][_0x520c0a(0x179)](_0x520c0a(0x18c)+_0x17b5d8);}}catch(_0x469742){this[_0x520c0a(0x163)]['error'](_0x520c0a(0x17c)+util[_0x520c0a(0x1a3)](_0x469742));}}}function a76_0x59cb(){const _0x38f207=['format','KEY_TEST_DEFERRED','132kZhBqI','../framework/automationFramework.js','getModuleName','platformIndex','288343aLKXLm','getBuildHashedId','KEY_TEST_FRAMEWORK_NAME','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','1818775EVlfqm','XUwAV','executionContext','forEach','../TestInfo.js','cntgu','getTestUUID','testId','bind','get','sendTestFrameworkEvent','\x20hookState:\x20','parallelIndex','../browserstackCLI.js','startedAt','endedAt','VlnJN','./baseModule','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','frameworkVersion','\x20testState:\x20','getCurrentHookState','KEY_HUB_URL','toString','getId','sendTestFrameworkEvent\x20testId:\x20','zMiXW','TEST','KEY_TEST_FRAMEWORK_VERSION','logger','base64','../../../helpers/helper.js','frameworkName','testFrameworkName','page','name','O11yHashedID','142514PLKjzA','env','test_deferred','onPageCreate','split','util','exports','stringify','getInstance','ENV_VAR','BROWSERSTACK_TESTHUB_UUID','testHookState','registerObserver','../../../helpers/classLogger.js','debug','24339fNKAfb','76616LPKhkW','Error\x20in\x20sending\x20CBTSession:\x20','onPageCreate\x20CBTSession\x20payload:\x20','testhubConfig','KEY_CAPABILITIES','88sEEdIJ','testFrameworkVersion','from','126wRJFRJ','../state/hookState.js','KEY_TEST_ENDED_AT','values','KEY_SESSION_ID','getState','../grpcClient.js','getRef','26178iuWzar','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','71070EPgVSw','364AVZomS','testInfo','TestHubModule','getAllData','hookState','2txZEDa','2|5|6|7|1|4|3|0','__workerDetails','../state/automationFrameworkState.js','Sjdgm','getProcessId','getCurrentTestState','instance','UUFtH','../cliUtils.js','MODULE_NAME','getThreadId','test','testFrameworkState','testSessionEvent','CREATE'];a76_0x59cb=function(){return _0x38f207;};return a76_0x59cb();}TestHubModule[a76_0x3389c5(0x19d)]=a76_0x3389c5(0x190),TestHubModule[a76_0x3389c5(0x1a4)]=a76_0x3389c5(0x16d),module[a76_0x3389c5(0x171)]=TestHubModule;