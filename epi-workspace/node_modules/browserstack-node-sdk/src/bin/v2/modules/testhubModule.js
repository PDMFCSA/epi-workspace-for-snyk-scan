const a78_0x2d959c=a78_0x2554;(function(_0x3638e2,_0x559114){const _0x2aac98=a78_0x2554,_0x35276a=_0x3638e2();while(!![]){try{const _0x4af41c=-parseInt(_0x2aac98(0x190))/0x1*(parseInt(_0x2aac98(0x17c))/0x2)+-parseInt(_0x2aac98(0x193))/0x3*(parseInt(_0x2aac98(0x18e))/0x4)+parseInt(_0x2aac98(0x155))/0x5+-parseInt(_0x2aac98(0x163))/0x6*(parseInt(_0x2aac98(0x17e))/0x7)+parseInt(_0x2aac98(0x15a))/0x8+-parseInt(_0x2aac98(0x15b))/0x9*(parseInt(_0x2aac98(0x1b8))/0xa)+parseInt(_0x2aac98(0x186))/0xb;if(_0x4af41c===_0x559114)break;else _0x35276a['push'](_0x35276a['shift']());}catch(_0x24747e){_0x35276a['push'](_0x35276a['shift']());}}}(a78_0x2c5f,0x7ca81));const util=require(a78_0x2d959c(0x19e)),BaseModule=require('./baseModule'),{createClassLogger}=require(a78_0x2d959c(0x1ab)),AutomationFramework=require(a78_0x2d959c(0x19d)),AutomationFrameworkState=require(a78_0x2d959c(0x191)),HookState=require(a78_0x2d959c(0x1a0)),TestFramework=require(a78_0x2d959c(0x1ac)),TestFrameworkState=require(a78_0x2d959c(0x188)),PlaywrightDriverModule=require(a78_0x2d959c(0x165)),TestFrameworkConstants=require(a78_0x2d959c(0x185)),GrpcClient=require(a78_0x2d959c(0x195)),CLIUtils=require(a78_0x2d959c(0x158)),TestInfo=require(a78_0x2d959c(0x18f)),testHubConstants=require(a78_0x2d959c(0x169)),BrowserstackCLI=require(a78_0x2d959c(0x16a)),{getPlaywrightProvider}=require(a78_0x2d959c(0x154)),{getTestRunIdentifier}=require(a78_0x2d959c(0x1a2));class TestHubModule extends BaseModule{[a78_0x2d959c(0x187)]=createClassLogger('TestHubModule');constructor(_0x504780){const _0x58ed3a=a78_0x2d959c,_0x3169a2={};_0x3169a2[_0x58ed3a(0x175)]='4|6|1|5|3|7|2|0',_0x3169a2['pQgtu']=_0x58ed3a(0x18b);const _0x3d1ae2=_0x3169a2,_0x44c5a3=_0x3d1ae2[_0x58ed3a(0x175)][_0x58ed3a(0x171)]('|');let _0x194e29=0x0;while(!![]){switch(_0x44c5a3[_0x194e29++]){case'0':BrowserstackCLI['O11yHashedID']=this[_0x58ed3a(0x19b)][_0x58ed3a(0x199)]();continue;case'1':this[_0x58ed3a(0x19b)]=_0x504780;continue;case'2':process[_0x58ed3a(0x17d)][testHubConstants[_0x58ed3a(0x16d)]['BROWSERSTACK_TESTHUB_UUID']]=this[_0x58ed3a(0x19b)][_0x58ed3a(0x199)]();continue;case'3':Object[_0x58ed3a(0x1b4)](TestFrameworkState)['forEach'](_0x510d1b=>{const _0x5772d9=_0x58ed3a;Object[_0x5772d9(0x1b4)](HookState)['forEach'](_0x3151e8=>{const _0x3bf2b3=_0x5772d9;TestFramework[_0x3bf2b3(0x179)](_0x510d1b,_0x3151e8,this[_0x3bf2b3(0x1b0)][_0x3bf2b3(0x170)](this));});});continue;case'4':super();continue;case'5':AutomationFramework['registerObserver'](AutomationFrameworkState[_0x58ed3a(0x197)],HookState[_0x58ed3a(0x192)],this['onPageCreate'][_0x58ed3a(0x170)](this));continue;case'6':this[_0x58ed3a(0x1a9)]=_0x3d1ae2[_0x58ed3a(0x184)];continue;case'7':process[_0x58ed3a(0x17d)][testHubConstants[_0x58ed3a(0x16d)][_0x58ed3a(0x1af)]]=this[_0x58ed3a(0x19b)][_0x58ed3a(0x1a5)]();continue;}break;}}[a78_0x2d959c(0x182)](){return TestHubModule['MODULE_NAME'];}['onAllTestEvents'](_0x1343c9){const _0x103cc6=a78_0x2d959c,_0x4d2cc2={};_0x4d2cc2[_0x103cc6(0x159)]=function(_0x2eb0cb,_0x3ae766){return _0x2eb0cb===_0x3ae766;};const _0x61436a=_0x4d2cc2,_0x5e160a=_0x1343c9[_0x103cc6(0x1b2)],_0x2c7fa9=_0x5e160a[_0x103cc6(0x1a8)]();(_0x61436a[_0x103cc6(0x159)](_0x2c7fa9,TestFrameworkState[_0x103cc6(0x19a)])||CLIUtils['matchHookRegex'](_0x2c7fa9['toString']()[_0x103cc6(0x171)]('.')[0x1]))&&this[_0x103cc6(0x1ae)](_0x1343c9);}async[a78_0x2d959c(0x1ae)](_0x18c3d1){const _0x13152f=a78_0x2d959c,_0x4885b4={'DYHRv':function(_0x18d333,_0x27c9f4,_0x1a0df4){return _0x18d333(_0x27c9f4,_0x1a0df4);},'SlZtR':_0x13152f(0x1a4)};try{const _0x3d419c=_0x18c3d1[_0x13152f(0x162)]['id'],_0x83287d=_0x4885b4[_0x13152f(0x153)](getTestRunIdentifier,_0x18c3d1[_0x13152f(0x162)],_0x18c3d1['result']['retry']),_0x10e87d=_0x18c3d1[_0x13152f(0x1b2)],_0x9e8086=_0x10e87d['getContext'](),_0x2b817e=_0x10e87d[_0x13152f(0x176)]()['get'](_0x83287d);this[_0x13152f(0x187)]['debug'](_0x13152f(0x17a)+_0x3d419c);const {[TestFrameworkConstants[_0x13152f(0x174)]]:_0x2af5c8='',[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]:_0x407450='',[TestFrameworkConstants['KEY_TEST_STARTED_AT']]:_0x2170bb='',[TestFrameworkConstants[_0x13152f(0x16b)]]:_0x1dfab3=''}=_0x2b817e,_0x106d78=_0x10e87d['getCurrentTestState']()[_0x13152f(0x1aa)]()[_0x13152f(0x171)]('.')[0x1],_0x4c977f=_0x10e87d[_0x13152f(0x15e)]()[_0x13152f(0x1aa)]()[_0x13152f(0x171)]('.')[0x1],_0x271a2c=global?.[_0x13152f(0x1b7)]?.['workerInfo']?.[_0x13152f(0x168)];;const _0x458977=_0x10e87d['getRef'](),_0xd5cc22=Buffer['from'](JSON[_0x13152f(0x183)](_0x2b817e))[_0x13152f(0x1aa)](_0x4885b4[_0x13152f(0x15f)]),_0x4d4266={'hash':_0x9e8086[_0x13152f(0x152)](),'threadId':_0x9e8086[_0x13152f(0x189)]()[_0x13152f(0x1aa)](),'processId':_0x9e8086[_0x13152f(0x16f)]()[_0x13152f(0x1aa)]()},_0x25bc57={};_0x25bc57[_0x13152f(0x19c)]=_0x271a2c,_0x25bc57[_0x13152f(0x166)]=_0x2af5c8,_0x25bc57[_0x13152f(0x17b)]=_0x407450,_0x25bc57['testFrameworkState']=_0x106d78,_0x25bc57['hookState']=_0x4c977f,_0x25bc57[_0x13152f(0x161)]=_0x2170bb,_0x25bc57[_0x13152f(0x1ad)]=_0x1dfab3,_0x25bc57['uuid']=_0x458977,_0x25bc57[_0x13152f(0x1bb)]=_0xd5cc22,_0x25bc57[_0x13152f(0x16e)]=_0x4d4266;const _0x19c48b=_0x25bc57,_0x2902ac=await GrpcClient['getInstance']()['testFrameworkEvent'](_0x19c48b);this[_0x13152f(0x187)][_0x13152f(0x1b1)](_0x13152f(0x194)+_0x3d419c+_0x13152f(0x198)+_0x106d78+_0x13152f(0x1ba)+_0x4c977f);}catch(_0x2e06fe){this[_0x13152f(0x187)][_0x13152f(0x1b3)]('Error\x20in\x20sendTestFrameworkEvent:\x20'+util['format'](_0x2e06fe));}}async[a78_0x2d959c(0x16c)](_0x7ed4ad){const _0x1f189d=a78_0x2d959c,_0x35e6fe={'UoMkx':function(_0x195c2c,_0x151ebb){return _0x195c2c(_0x151ebb);},'iwpRu':'base64'};try{if(_0x7ed4ad[_0x1f189d(0x19f)]){const _0x3c89f1=_0x7ed4ad[_0x1f189d(0x17f)]['testId'];this[_0x1f189d(0x187)]['debug'](_0x1f189d(0x18d)+_0x3c89f1);const _0x376758=TestInfo['getTestIdentifierFromTestInfo'](_0x7ed4ad[_0x1f189d(0x17f)],_0x7ed4ad[_0x1f189d(0x17f)][_0x1f189d(0x1a6)]),_0x17b64f=TestInfo[_0x1f189d(0x196)](_0x376758),_0x470a03=TestInfo[_0x1f189d(0x172)](_0x376758),_0xc03d51=_0x7ed4ad[_0x1f189d(0x1b2)],_0x155f97=AutomationFramework['getState'](_0xc03d51,PlaywrightDriverModule[_0x1f189d(0x18a)]),_0x9dc8ea=_0x470a03[TestFrameworkConstants[_0x1f189d(0x174)]],_0x320154=_0x470a03[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']],_0x1eba92=TestFrameworkState[_0x1f189d(0x19a)][_0x1f189d(0x1aa)]()[_0x1f189d(0x171)]('.')[0x1],_0x300d38=HookState['POST']['toString']()[_0x1f189d(0x171)]('.')[0x1],_0x773dae=_0xc03d51[_0x1f189d(0x156)](),_0x3fcfd3=AutomationFramework[_0x1f189d(0x1b9)](_0xc03d51,PlaywrightDriverModule[_0x1f189d(0x173)],''),_0x31f769={'provider':_0x35e6fe[_0x1f189d(0x177)](getPlaywrightProvider,_0x3fcfd3),'frameworkName':_0xc03d51[_0x1f189d(0x1b6)],'frameworkVersion':_0xc03d51['frameworkVersion'],'frameworkSessionId':AutomationFramework[_0x1f189d(0x1b9)](_0xc03d51,PlaywrightDriverModule['KEY_SESSION_ID'],''),'ref':_0xc03d51[_0x1f189d(0x160)](),'hubUrl':_0x3fcfd3};let _0x15226c=AutomationFramework[_0x1f189d(0x1b9)](_0xc03d51,PlaywrightDriverModule[_0x1f189d(0x178)],{});_0x15226c=Buffer[_0x1f189d(0x15c)](JSON[_0x1f189d(0x183)](_0x15226c))['toString'](_0x35e6fe['iwpRu']);const _0xfc3c73={'hash':_0x773dae[_0x1f189d(0x152)](),'threadId':_0x773dae[_0x1f189d(0x189)]()['toString'](),'processId':_0x773dae[_0x1f189d(0x16f)]()[_0x1f189d(0x1aa)]()},_0x514ae4={};_0x514ae4['platformIndex']=_0x155f97,_0x514ae4[_0x1f189d(0x166)]=_0x9dc8ea,_0x514ae4[_0x1f189d(0x17b)]=_0x320154,_0x514ae4[_0x1f189d(0x1a7)]=_0x1eba92,_0x514ae4['testHookState']=_0x300d38,_0x514ae4[_0x1f189d(0x1a1)]=_0x17b64f,_0x514ae4[_0x1f189d(0x15d)]=_0x31f769,_0x514ae4[_0x1f189d(0x181)]=_0x15226c,_0x514ae4[_0x1f189d(0x16e)]=_0xfc3c73;const _0xfbbf4b=_0x514ae4;this['logger'][_0x1f189d(0x1b1)]('onPageCreate\x20CBTSession\x20payload:\x20'+util['format'](_0xfbbf4b));const _0x4e61d1=await GrpcClient[_0x1f189d(0x164)]()[_0x1f189d(0x1a3)](_0xfbbf4b);this[_0x1f189d(0x187)]['debug'](_0x1f189d(0x167)+_0x3c89f1);}}catch(_0x181f2a){this[_0x1f189d(0x187)][_0x1f189d(0x1b3)](_0x1f189d(0x157)+util[_0x1f189d(0x18c)](_0x181f2a));}}}function a78_0x2554(_0xb07bf0,_0x45814b){const _0x2c5f63=a78_0x2c5f();return a78_0x2554=function(_0x2554d4,_0x5dfad2){_0x2554d4=_0x2554d4-0x152;let _0x377dde=_0x2c5f63[_0x2554d4];return _0x377dde;},a78_0x2554(_0xb07bf0,_0x45814b);}function a78_0x2c5f(){const _0x21ec3c=['page','../state/hookState.js','testUuid','../../playwright/reporter/pwUtils.js','testSessionEvent','base64','getJwt','retry','testFrameworkState','getCurrentTestState','name','toString','../../../helpers/classLogger.js','../framework/testFramework.js','endedAt','sendTestFrameworkEvent','BROWSERSTACK_TESTHUB_JWT','onAllTestEvents','debug','instance','error','values','exports','frameworkName','__workerDetails','20pvwpct','getState','\x20hookState:\x20','eventJson','getId','DYHRv','../../../helpers/helper.js','2830170FVQzLC','getContext','Error\x20in\x20sending\x20CBTSession:\x20','../cliUtils.js','TseVx','5586632WGYMwk','3860163FQPkYA','from','automationSession','getCurrentHookState','SlZtR','getRef','startedAt','test','6ZASdvf','getInstance','./playwrightDriverModule.js','testFrameworkName','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','parallelIndex','../../../helpers/testhub/constants','../browserstackCLI.js','KEY_TEST_ENDED_AT','onPageCreate','ENV_VAR','executionContext','getProcessId','bind','split','getTestDetails','KEY_HUB_URL','KEY_TEST_FRAMEWORK_NAME','fnfOh','getAllData','UoMkx','KEY_CAPABILITIES','registerObserver','sendTestFrameworkEvent\x20testId:\x20','testFrameworkVersion','6Lnrnyu','env','2653133vQtXjy','testInfo','MODULE_NAME','capabilities','getModuleName','stringify','pQgtu','../framework/constants/testFrameworkConstants.js','16401209JnymOO','logger','../state/testFrameworkState.js','getThreadId','KEY_PLATFORM_INDEX','TestHubModule','format','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','4QqrTQp','../TestInfo.js','278643qvDclE','../state/automationFrameworkState.js','POST','516081ChYqLa','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','../grpcClient.js','getTestUUID','CREATE','\x20testState:\x20','getBuildHashedId','TEST','testhubConfig','platformIndex','../framework/automationFramework.js','util'];a78_0x2c5f=function(){return _0x21ec3c;};return a78_0x2c5f();}TestHubModule[a78_0x2d959c(0x180)]=a78_0x2d959c(0x18b),TestHubModule['KEY_TEST_DEFERRED']='test_deferred',module[a78_0x2d959c(0x1b5)]=TestHubModule;