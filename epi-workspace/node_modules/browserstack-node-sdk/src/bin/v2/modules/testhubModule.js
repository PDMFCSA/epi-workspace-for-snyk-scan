const a85_0x365128=a85_0x5510;(function(_0x222d0f,_0x2f5547){const _0x4bf52c=a85_0x5510,_0x366ea5=_0x222d0f();while(!![]){try{const _0x55434e=-parseInt(_0x4bf52c(0xc0))/0x1*(-parseInt(_0x4bf52c(0xbe))/0x2)+parseInt(_0x4bf52c(0x90))/0x3+parseInt(_0x4bf52c(0xa8))/0x4+-parseInt(_0x4bf52c(0xd4))/0x5+parseInt(_0x4bf52c(0xbd))/0x6+parseInt(_0x4bf52c(0x6a))/0x7+-parseInt(_0x4bf52c(0x84))/0x8;if(_0x55434e===_0x2f5547)break;else _0x366ea5['push'](_0x366ea5['shift']());}catch(_0x66e3aa){_0x366ea5['push'](_0x366ea5['shift']());}}}(a85_0x3d7c,0x9bfff));const util=require(a85_0x365128(0xa9)),BaseModule=require(a85_0x365128(0x8f)),{createClassLogger}=require(a85_0x365128(0xc2)),AutomationFramework=require(a85_0x365128(0xd2)),AutomationFrameworkState=require('../state/automationFrameworkState.js'),HookState=require(a85_0x365128(0xa7)),TestFramework=require(a85_0x365128(0xcb)),TestFrameworkState=require(a85_0x365128(0xca)),PlaywrightDriverModule=require(a85_0x365128(0x7e)),TestFrameworkConstants=require(a85_0x365128(0xbb)),GrpcClient=require(a85_0x365128(0x8c)),CLIUtils=require(a85_0x365128(0xcc)),TestInfo=require(a85_0x365128(0xb4)),testHubConstants=require(a85_0x365128(0xae)),{FRAMEWORKS}=require(a85_0x365128(0x72)),helper=require('../../../helpers/helper.js'),LoadTestModule=require(a85_0x365128(0xb3)),JestUtils=require('../utils/jest-utils.js'),BrowserstackCLI=require(a85_0x365128(0x8b)),{getPlaywrightProvider}=require(a85_0x365128(0x80));function a85_0x5510(_0xc3a9e8,_0x508a24){const _0x3d7cd1=a85_0x3d7c();return a85_0x5510=function(_0x551047,_0x2555cb){_0x551047=_0x551047-0x65;let _0xd6d9fc=_0x3d7cd1[_0x551047];return _0xd6d9fc;},a85_0x5510(_0xc3a9e8,_0x508a24);}function a85_0x3d7c(){const _0x202ef1=['onPageCreate:\x20Skipping\x20CBT\x20session\x20event\x20-\x20no\x20testInfo\x20(page\x20created\x20outside\x20test\x20context)','./loadTestModule.js','../TestInfo.js','instance','onPageCreate:\x20Recreated\x20Jest\x20testIdentifier:\x20','frameworkName','getTestUUID','getCurrentTestState','version','../framework/constants/testFrameworkConstants.js','KEY_SESSION_ID','1114500eLarxH','10HfoABy','ALOLq','199435iBAwEv','error','../../../helpers/classLogger.js','KEY_CAPABILITIES','iOsvP','debug','page','lqYqo','getLTSSessionId','AAVzF','../state/testFrameworkState.js','../framework/testFramework.js','../cliUtils.js','toString','testFrameworkData','KEY_TEST_FRAMEWORK_NAME','keys','exports','../framework/automationFramework.js','getId','384165BkgTXx','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','wQePC','CUCUMBER','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','O11yHashedID','getThreadId','getTestDetails','1053367GWBXfD','testFrameworkEvent','testFrameworkState','JEST','retry',',\x20test_identifier:\x20','name','testSessionEvent','../../../helpers/test-observability/constants.js','BROWSERSTACK_TESTHUB_JWT','Error\x20in\x20sending\x20CBTSession:\x20','format','base64','values','KEY_HUB_URL','getBuildHashedId','frameworkVersion','testInfo','testUuid','getTestId','./playwrightDriverModule.js','BROWSERSTACK_TESTHUB_UUID','../../../helpers/helper.js','logger','from','split','20569872VrunGI','0|1|4|2|5|6|3|8|7','createTestFrameworkEventPayload','TestHubModule','NuTHP','TEST','MODULE_NAME','../browserstackCLI.js','../grpcClient.js','onAllTestEvents','isLTSSession','./baseModule','2195517sXZCWH','getJwt','testhubConfig','getState','QLhdi','KEY_PLATFORM_INDEX','sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','stringify','getTestFramework','env','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','Error\x20in\x20sendTestFrameworkEvent:\x20','getProcessId','ENV_VAR','recreateIdentifierFromTestInfo','jestUtils','getInstance','KALrw','matchHookRegex','KEY_TEST_DEFERRED','onPageCreate','getContext','forEach','../state/hookState.js','4887188NrRrGf','util','bind','FvyNw','KEY_TEST_FRAMEWORK_VERSION','POST','../../../helpers/testhub/constants','onPageCreate\x20CBTSession\x20payload:\x20','sendTestFrameworkEvent','registerObserver'];a85_0x3d7c=function(){return _0x202ef1;};return a85_0x3d7c();}class TestHubModule extends BaseModule{['logger']=createClassLogger(a85_0x365128(0x87));constructor(_0x1fd3a7,_0x4a417d=null){const _0x34f873=a85_0x365128,_0x626f2e={};_0x626f2e['ALOLq']=_0x34f873(0x85),_0x626f2e[_0x34f873(0x88)]=_0x34f873(0x87);const _0x481163=_0x626f2e,_0x4e5250=_0x481163[_0x34f873(0xbf)][_0x34f873(0x83)]('|');let _0x5119fb=0x0;while(!![]){switch(_0x4e5250[_0x5119fb++]){case'0':super(_0x4a417d);continue;case'1':this[_0x34f873(0x70)]=_0x481163[_0x34f873(0x88)];continue;case'2':this[_0x34f873(0x9f)]=new JestUtils();continue;case'3':process[_0x34f873(0x99)][testHubConstants[_0x34f873(0x9d)][_0x34f873(0x73)]]=this[_0x34f873(0x92)][_0x34f873(0x91)]();continue;case'4':this['testhubConfig']=_0x1fd3a7;continue;case'5':AutomationFramework[_0x34f873(0xb1)](AutomationFrameworkState['CREATE'],HookState[_0x34f873(0xad)],this[_0x34f873(0xa4)][_0x34f873(0xaa)](this));continue;case'6':Object[_0x34f873(0x77)](TestFrameworkState)[_0x34f873(0xa6)](_0x40da8d=>{const _0x2720c2=_0x34f873;Object['values'](HookState)[_0x2720c2(0xa6)](_0x5acece=>{const _0x3817db=_0x2720c2;TestFramework[_0x3817db(0xb1)](_0x40da8d,_0x5acece,this[_0x3817db(0x8d)][_0x3817db(0xaa)](this));});});continue;case'7':BrowserstackCLI[_0x34f873(0x67)]=this[_0x34f873(0x92)]['getBuildHashedId']();continue;case'8':process[_0x34f873(0x99)][testHubConstants[_0x34f873(0x9d)][_0x34f873(0x7f)]]=this['testhubConfig'][_0x34f873(0x79)]();continue;}break;}}['getModuleName'](){const _0x507bf1=a85_0x365128;return TestHubModule[_0x507bf1(0x8a)];}[a85_0x365128(0x8d)](_0x16719e){const _0x85ff01=a85_0x365128,_0x493fd7={};_0x493fd7[_0x85ff01(0xc9)]=function(_0x5ae027,_0x596f90){return _0x5ae027===_0x596f90;};const _0x24dec1=_0x493fd7,_0x16e829=_0x16719e[_0x85ff01(0xb5)],_0x275b0d=_0x16e829[_0x85ff01(0xb9)]();(_0x24dec1[_0x85ff01(0xc9)](_0x275b0d,TestFrameworkState['TEST'])||CLIUtils[_0x85ff01(0xa2)](_0x275b0d[_0x85ff01(0xcd)]()[_0x85ff01(0x83)]('.')[0x1]))&&this[_0x85ff01(0xb0)](_0x16719e);}async[a85_0x365128(0xb0)](_0x3e515b){const _0x36bbb1=a85_0x365128,_0x3287f4={};_0x3287f4['lqYqo']=function(_0x4fb333,_0x227c73){return _0x4fb333===_0x227c73;},_0x3287f4[_0x36bbb1(0xc4)]=_0x36bbb1(0x96);const _0x410059=_0x3287f4;try{const _0x318ca1=BrowserstackCLI[_0x36bbb1(0xa0)]()[_0x36bbb1(0x98)]()[_0x36bbb1(0x86)](_0x3e515b);if(!_0x318ca1||_0x410059[_0x36bbb1(0xc7)](Object[_0x36bbb1(0xd0)](_0x318ca1)['length'],0x0)){this[_0x36bbb1(0x81)]['debug'](_0x410059[_0x36bbb1(0xc4)]);return;}const _0x25188b=await GrpcClient[_0x36bbb1(0xa0)]()[_0x36bbb1(0x6b)](_0x318ca1);this['logger'][_0x36bbb1(0xc5)](_0x36bbb1(0x66)+_0x318ca1[_0x36bbb1(0x6c)]+'\x20hookState:\x20'+_0x318ca1['hookState']);}catch(_0x453948){this[_0x36bbb1(0x81)][_0x36bbb1(0xc1)](_0x36bbb1(0x9b)+util[_0x36bbb1(0x75)](_0x453948));}}async[a85_0x365128(0xa4)](_0x7b58b3){const _0x56a11d=a85_0x365128,_0xbac1b2={'CqQSF':function(_0x16c56c,_0x4ee79b){return _0x16c56c===_0x4ee79b;},'FvyNw':_0x56a11d(0xb2),'QLhdi':function(_0x3bb860,_0x4040c0){return _0x3bb860===_0x4040c0;},'wQePC':function(_0x2644dd,_0x35ab25){return _0x2644dd(_0x35ab25);},'KALrw':_0x56a11d(0x76),'xVdxK':function(_0x4672a4,_0x508934){return _0x4672a4===_0x508934;}};try{if(_0x7b58b3[_0x56a11d(0xc6)]){const _0x2f10d9=this[_0x56a11d(0x7d)](_0x7b58b3);this[_0x56a11d(0x81)][_0x56a11d(0xc5)](_0x56a11d(0x9a)+_0x2f10d9);if(this[_0x56a11d(0xce)]&&_0xbac1b2['CqQSF'](this[_0x56a11d(0xce)]['name'],FRAMEWORKS[_0x56a11d(0x6d)])&&!_0x7b58b3[_0x56a11d(0x7b)]){this[_0x56a11d(0x81)][_0x56a11d(0xc5)](_0xbac1b2[_0x56a11d(0xab)]);return;}let _0x9f5ac3,_0x2ac5a8;if(this[_0x56a11d(0xce)]&&_0xbac1b2['QLhdi'](this[_0x56a11d(0xce)]['name'],FRAMEWORKS[_0x56a11d(0x65)]))_0x9f5ac3=_0x2f10d9,_0x2ac5a8=TestInfo['getTestUUID'](_0x9f5ac3);else this[_0x56a11d(0xce)]&&_0xbac1b2[_0x56a11d(0x94)](this[_0x56a11d(0xce)][_0x56a11d(0x70)],FRAMEWORKS['JEST'])?(_0x9f5ac3=this[_0x56a11d(0x9f)][_0x56a11d(0x9e)](_0x7b58b3[_0x56a11d(0x7b)]),this[_0x56a11d(0x81)][_0x56a11d(0xc5)](_0x56a11d(0xb6)+_0x9f5ac3)):(_0x9f5ac3=TestInfo['getTestIdentifierFromTestInfo'](_0x7b58b3[_0x56a11d(0x7b)],_0x7b58b3['testInfo'][_0x56a11d(0x6e)]),_0x2ac5a8=TestInfo[_0x56a11d(0xb8)](_0x9f5ac3));const _0x3635ae=TestInfo[_0x56a11d(0x69)](_0x9f5ac3),_0x2ef22e=_0x7b58b3[_0x56a11d(0xb5)],_0x2ac9c1=AutomationFramework[_0x56a11d(0x93)](_0x2ef22e,PlaywrightDriverModule[_0x56a11d(0x95)]),_0x496cf5=_0x3635ae?.[TestFrameworkConstants[_0x56a11d(0xcf)]]||this[_0x56a11d(0xce)]&&this[_0x56a11d(0xce)][_0x56a11d(0x70)],_0x161ce0=_0x3635ae?.[TestFrameworkConstants[_0x56a11d(0xac)]]||this[_0x56a11d(0xce)]&&this[_0x56a11d(0xce)][_0x56a11d(0xba)],_0x5e4b74=TestFrameworkState[_0x56a11d(0x89)][_0x56a11d(0xcd)]()['split']('.')[0x1],_0x3e91b9=HookState[_0x56a11d(0xad)][_0x56a11d(0xcd)]()[_0x56a11d(0x83)]('.')[0x1],_0x75ef57=_0x2ef22e[_0x56a11d(0xa5)](),_0xe2d97d=AutomationFramework[_0x56a11d(0x93)](_0x2ef22e,PlaywrightDriverModule[_0x56a11d(0x78)],''),_0x4c14af={'provider':_0xbac1b2[_0x56a11d(0xd6)](getPlaywrightProvider,_0xe2d97d),'frameworkName':_0x2ef22e[_0x56a11d(0xb7)],'frameworkVersion':_0x2ef22e[_0x56a11d(0x7a)],'frameworkSessionId':LoadTestModule[_0x56a11d(0x8e)]()?LoadTestModule[_0x56a11d(0xc8)]():AutomationFramework[_0x56a11d(0x93)](_0x2ef22e,PlaywrightDriverModule[_0x56a11d(0xbc)],''),'ref':_0x2ef22e['getRef'](),'hubUrl':_0xe2d97d};let _0x5104ae=AutomationFramework[_0x56a11d(0x93)](_0x2ef22e,PlaywrightDriverModule[_0x56a11d(0xc3)],{});_0x5104ae=Buffer[_0x56a11d(0x82)](JSON[_0x56a11d(0x97)](_0x5104ae))[_0x56a11d(0xcd)](_0xbac1b2[_0x56a11d(0xa1)]);const _0x5b2056={'hash':_0x75ef57[_0x56a11d(0xd3)](),'threadId':_0x75ef57[_0x56a11d(0x68)]()[_0x56a11d(0xcd)](),'processId':_0x75ef57[_0x56a11d(0x9c)]()['toString']()},_0x45142c={};_0x45142c['test_identifier']=_0x9f5ac3;const _0x405e53={};_0x405e53[_0x56a11d(0x7c)]=_0x2ac5a8;const _0x3e26ea={'platformIndex':_0x2ac9c1,'testFrameworkName':_0x496cf5,'testFrameworkVersion':_0x161ce0,'testFrameworkState':_0x5e4b74,'testHookState':_0x3e91b9,...this[_0x56a11d(0xce)]&&_0xbac1b2['QLhdi'](this[_0x56a11d(0xce)][_0x56a11d(0x70)],FRAMEWORKS[_0x56a11d(0x6d)])?_0x45142c:_0x405e53,'automationSession':_0x4c14af,'capabilities':_0x5104ae,'executionContext':_0x5b2056};this[_0x56a11d(0x81)]['debug'](_0x56a11d(0xaf)+util['format'](_0x3e26ea));const _0x294a39=await GrpcClient[_0x56a11d(0xa0)]()[_0x56a11d(0x71)](_0x3e26ea);this['logger'][_0x56a11d(0xc5)](_0x56a11d(0xd5)+_0x2f10d9+(this[_0x56a11d(0xce)]&&_0xbac1b2['xVdxK'](this[_0x56a11d(0xce)]['name'],FRAMEWORKS[_0x56a11d(0x6d)])?_0x56a11d(0x6f)+_0x9f5ac3:''));}}catch(_0x369fe6){this[_0x56a11d(0x81)][_0x56a11d(0xc1)](_0x56a11d(0x74)+util['format'](_0x369fe6));}}}TestHubModule[a85_0x365128(0x8a)]=a85_0x365128(0x87),TestHubModule[a85_0x365128(0xa3)]='test_deferred',module[a85_0x365128(0xd1)]=TestHubModule;