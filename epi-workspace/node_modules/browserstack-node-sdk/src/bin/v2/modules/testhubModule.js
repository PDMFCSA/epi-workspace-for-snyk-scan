function a85_0x5e8d(_0x204a32,_0x2e4e1a){const _0x54fae2=a85_0x54fa();return a85_0x5e8d=function(_0x5e8d36,_0x5e1b0a){_0x5e8d36=_0x5e8d36-0x10f;let _0x176a49=_0x54fae2[_0x5e8d36];return _0x176a49;},a85_0x5e8d(_0x204a32,_0x2e4e1a);}const a85_0x25cac4=a85_0x5e8d;(function(_0x27bbce,_0x3222ad){const _0x3b1b0c=a85_0x5e8d,_0x730ab3=_0x27bbce();while(!![]){try{const _0x3612fb=-parseInt(_0x3b1b0c(0x173))/0x1+-parseInt(_0x3b1b0c(0x12f))/0x2+-parseInt(_0x3b1b0c(0x130))/0x3+-parseInt(_0x3b1b0c(0x158))/0x4+-parseInt(_0x3b1b0c(0x149))/0x5+parseInt(_0x3b1b0c(0x168))/0x6*(parseInt(_0x3b1b0c(0x113))/0x7)+-parseInt(_0x3b1b0c(0x136))/0x8*(-parseInt(_0x3b1b0c(0x174))/0x9);if(_0x3612fb===_0x3222ad)break;else _0x730ab3['push'](_0x730ab3['shift']());}catch(_0x4d6fc8){_0x730ab3['push'](_0x730ab3['shift']());}}}(a85_0x54fa,0xeab4d));const util=require(a85_0x25cac4(0x13a)),BaseModule=require(a85_0x25cac4(0x116)),{createClassLogger}=require(a85_0x25cac4(0x15a)),AutomationFramework=require('../framework/automationFramework.js'),AutomationFrameworkState=require(a85_0x25cac4(0x163)),HookState=require(a85_0x25cac4(0x12c)),TestFramework=require(a85_0x25cac4(0x169)),TestFrameworkState=require(a85_0x25cac4(0x15b)),PlaywrightDriverModule=require(a85_0x25cac4(0x17c)),TestFrameworkConstants=require(a85_0x25cac4(0x118)),GrpcClient=require(a85_0x25cac4(0x133)),CLIUtils=require(a85_0x25cac4(0x159)),TestInfo=require(a85_0x25cac4(0x16e)),testHubConstants=require(a85_0x25cac4(0x148)),{FRAMEWORKS}=require('../../../helpers/test-observability/constants.js'),helper=require(a85_0x25cac4(0x13d)),LoadTestModule=require(a85_0x25cac4(0x115)),JestUtils=require(a85_0x25cac4(0x146)),BrowserstackCLI=require(a85_0x25cac4(0x135)),{getPlaywrightProvider}=require(a85_0x25cac4(0x13d));class TestHubModule extends BaseModule{[a85_0x25cac4(0x14d)]=createClassLogger(a85_0x25cac4(0x13f));constructor(_0x219610,_0x23399d=null){const _0x9578f=a85_0x25cac4,_0x4c2a97={};_0x4c2a97[_0x9578f(0x178)]=_0x9578f(0x126),_0x4c2a97['IZXEY']=_0x9578f(0x13f);const _0x2a7229=_0x4c2a97,_0x3970be=_0x2a7229[_0x9578f(0x178)][_0x9578f(0x171)]('|');let _0x3035ef=0x0;while(!![]){switch(_0x3970be[_0x3035ef++]){case'0':super(_0x23399d);continue;case'1':Object[_0x9578f(0x15e)](TestFrameworkState)['forEach'](_0x588963=>{const _0x58dc1e=_0x9578f;Object['values'](HookState)[_0x58dc1e(0x16d)](_0x3bf4fb=>{const _0xed1f82=_0x58dc1e;TestFramework['registerObserver'](_0x588963,_0x3bf4fb,this[_0xed1f82(0x17d)][_0xed1f82(0x13b)](this));});});continue;case'2':this[_0x9578f(0x165)]=new JestUtils();continue;case'3':this['name']=_0x2a7229['IZXEY'];continue;case'4':AutomationFramework[_0x9578f(0x152)](AutomationFrameworkState[_0x9578f(0x167)],HookState['POST'],this[_0x9578f(0x14f)][_0x9578f(0x13b)](this));continue;case'5':BrowserstackCLI[_0x9578f(0x13c)]=this[_0x9578f(0x13e)][_0x9578f(0x155)]();continue;case'6':this[_0x9578f(0x13e)]=_0x219610;continue;case'7':process[_0x9578f(0x156)][testHubConstants['ENV_VAR'][_0x9578f(0x145)]]=this[_0x9578f(0x13e)]['getJwt']();continue;case'8':process[_0x9578f(0x156)][testHubConstants[_0x9578f(0x180)][_0x9578f(0x11f)]]=this[_0x9578f(0x13e)][_0x9578f(0x155)]();continue;}break;}}['getModuleName'](){const _0x3c25f9=a85_0x25cac4;return TestHubModule[_0x3c25f9(0x17b)];}['onAllTestEvents'](_0x44fa3f){const _0x5bf9df=a85_0x25cac4,_0x5a6261={};_0x5a6261['ftMne']=function(_0x30b860,_0x37f99c){return _0x30b860===_0x37f99c;};const _0x38dcbf=_0x5a6261,_0x434ca0=_0x44fa3f[_0x5bf9df(0x162)],_0x1736df=_0x434ca0[_0x5bf9df(0x125)]();(_0x38dcbf['ftMne'](_0x1736df,TestFrameworkState[_0x5bf9df(0x12a)])||CLIUtils['matchHookRegex'](_0x1736df[_0x5bf9df(0x119)]()[_0x5bf9df(0x171)]('.')[0x1]))&&this[_0x5bf9df(0x129)](_0x44fa3f);}async['sendTestFrameworkEvent'](_0x59788b){const _0x43bb6e=a85_0x25cac4,_0x25129e={};_0x25129e[_0x43bb6e(0x128)]=function(_0x18c682,_0x392f5d){return _0x18c682===_0x392f5d;},_0x25129e[_0x43bb6e(0x127)]=_0x43bb6e(0x147);const _0x190656=_0x25129e;try{const _0x3ede9c=BrowserstackCLI[_0x43bb6e(0x131)]()[_0x43bb6e(0x157)]()[_0x43bb6e(0x160)](_0x59788b);if(!_0x3ede9c||_0x190656[_0x43bb6e(0x128)](Object['keys'](_0x3ede9c)[_0x43bb6e(0x117)],0x0)){this[_0x43bb6e(0x14d)][_0x43bb6e(0x176)](_0x190656[_0x43bb6e(0x127)]);return;}const _0x5a0b82=await GrpcClient[_0x43bb6e(0x131)]()[_0x43bb6e(0x164)](_0x3ede9c);this[_0x43bb6e(0x14d)]['debug'](_0x43bb6e(0x132)+_0x3ede9c[_0x43bb6e(0x11b)]+_0x43bb6e(0x14b)+_0x3ede9c[_0x43bb6e(0x151)]);}catch(_0x33ebfc){this['logger'][_0x43bb6e(0x179)](_0x43bb6e(0x181)+util[_0x43bb6e(0x150)](_0x33ebfc));}}async[a85_0x25cac4(0x14f)](_0x4fb62e){const _0x5958ca=a85_0x25cac4,_0x397762={'omDkr':function(_0x491e15,_0x1f95ee){return _0x491e15===_0x1f95ee;},'krmYH':_0x5958ca(0x124),'GEtWJ':function(_0x5a71d1,_0x16b8a4){return _0x5a71d1===_0x16b8a4;},'aZxYb':function(_0x25d6a5,_0x40896d){return _0x25d6a5===_0x40896d;},'LDvCP':function(_0x4dc63b,_0x193c5b){return _0x4dc63b(_0x193c5b);},'MhIzB':_0x5958ca(0x114),'UcAYP':function(_0x46fff9,_0x5eb1ae){return _0x46fff9===_0x5eb1ae;}};try{if(_0x4fb62e[_0x5958ca(0x140)]){const _0x3740d3=this[_0x5958ca(0x170)](_0x4fb62e);this[_0x5958ca(0x14d)][_0x5958ca(0x176)](_0x5958ca(0x16f)+_0x3740d3);if(this['testFrameworkData']&&_0x397762[_0x5958ca(0x166)](this[_0x5958ca(0x12b)][_0x5958ca(0x16c)],FRAMEWORKS[_0x5958ca(0x11c)])&&!_0x4fb62e['testInfo']){this['logger'][_0x5958ca(0x176)](_0x397762[_0x5958ca(0x15f)]);return;}let _0x51359f,_0x261400;if(this[_0x5958ca(0x12b)]&&_0x397762[_0x5958ca(0x16b)](this[_0x5958ca(0x12b)][_0x5958ca(0x16c)],FRAMEWORKS[_0x5958ca(0x139)]))_0x51359f=_0x3740d3,_0x261400=TestInfo[_0x5958ca(0x11e)](_0x51359f);else this[_0x5958ca(0x12b)]&&_0x397762[_0x5958ca(0x17e)](this[_0x5958ca(0x12b)][_0x5958ca(0x16c)],FRAMEWORKS['JEST'])?(_0x51359f=this[_0x5958ca(0x165)][_0x5958ca(0x142)](_0x4fb62e[_0x5958ca(0x175)]),this[_0x5958ca(0x14d)][_0x5958ca(0x176)](_0x5958ca(0x14a)+_0x51359f)):(_0x51359f=TestInfo[_0x5958ca(0x141)](_0x4fb62e[_0x5958ca(0x175)],_0x4fb62e[_0x5958ca(0x175)][_0x5958ca(0x15c)]),_0x261400=TestInfo[_0x5958ca(0x11e)](_0x51359f));const _0x22a0e6=TestInfo['getTestDetails'](_0x51359f),_0x5bacc7=_0x4fb62e[_0x5958ca(0x162)],_0x13026a=AutomationFramework[_0x5958ca(0x177)](_0x5bacc7,PlaywrightDriverModule[_0x5958ca(0x12e)]),_0x89ef0c=_0x22a0e6?.[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]||this[_0x5958ca(0x12b)]&&this['testFrameworkData'][_0x5958ca(0x16c)],_0x4763e5=_0x22a0e6?.[TestFrameworkConstants[_0x5958ca(0x144)]]||this[_0x5958ca(0x12b)]&&this[_0x5958ca(0x12b)][_0x5958ca(0x17f)],_0x851bfc=TestFrameworkState[_0x5958ca(0x12a)][_0x5958ca(0x119)]()['split']('.')[0x1],_0x284ea0=HookState[_0x5958ca(0x137)][_0x5958ca(0x119)]()[_0x5958ca(0x171)]('.')[0x1],_0x4742fe=_0x5bacc7[_0x5958ca(0x15d)](),_0x5b5f5f=AutomationFramework[_0x5958ca(0x177)](_0x5bacc7,PlaywrightDriverModule[_0x5958ca(0x153)],''),_0x12df52={'provider':_0x397762[_0x5958ca(0x14c)](getPlaywrightProvider,_0x5b5f5f),'frameworkName':_0x5bacc7[_0x5958ca(0x161)],'frameworkVersion':_0x5bacc7[_0x5958ca(0x17a)],'frameworkSessionId':LoadTestModule[_0x5958ca(0x121)]()?LoadTestModule[_0x5958ca(0x154)]():AutomationFramework[_0x5958ca(0x177)](_0x5bacc7,PlaywrightDriverModule[_0x5958ca(0x12d)],''),'ref':_0x5bacc7[_0x5958ca(0x11a)](),'hubUrl':_0x5b5f5f};let _0x5c97fd=AutomationFramework['getState'](_0x5bacc7,PlaywrightDriverModule[_0x5958ca(0x143)],{});_0x5c97fd=Buffer[_0x5958ca(0x123)](JSON[_0x5958ca(0x111)](_0x5c97fd))[_0x5958ca(0x119)](_0x397762['MhIzB']);const _0x3a813d={'hash':_0x4742fe['getId'](),'threadId':_0x4742fe[_0x5958ca(0x120)]()[_0x5958ca(0x119)](),'processId':_0x4742fe[_0x5958ca(0x11d)]()['toString']()},_0x36147b={};_0x36147b[_0x5958ca(0x172)]=_0x51359f;const _0x1941a5={};_0x1941a5[_0x5958ca(0x14e)]=_0x261400;const _0x412f09={'platformIndex':_0x13026a,'testFrameworkName':_0x89ef0c,'testFrameworkVersion':_0x4763e5,'testFrameworkState':_0x851bfc,'testHookState':_0x284ea0,...this['testFrameworkData']&&_0x397762[_0x5958ca(0x10f)](this[_0x5958ca(0x12b)][_0x5958ca(0x16c)],FRAMEWORKS[_0x5958ca(0x11c)])?_0x36147b:_0x1941a5,'automationSession':_0x12df52,'capabilities':_0x5c97fd,'executionContext':_0x3a813d};this[_0x5958ca(0x14d)][_0x5958ca(0x176)](_0x5958ca(0x112)+util[_0x5958ca(0x150)](_0x412f09));const _0x6df5d3=await GrpcClient[_0x5958ca(0x131)]()[_0x5958ca(0x134)](_0x412f09);this[_0x5958ca(0x14d)][_0x5958ca(0x176)](_0x5958ca(0x110)+_0x3740d3+(this[_0x5958ca(0x12b)]&&_0x397762[_0x5958ca(0x166)](this['testFrameworkData'][_0x5958ca(0x16c)],FRAMEWORKS[_0x5958ca(0x11c)])?',\x20test_identifier:\x20'+_0x51359f:''));}}catch(_0x26a1ab){this[_0x5958ca(0x14d)][_0x5958ca(0x179)](_0x5958ca(0x16a)+util['format'](_0x26a1ab));}}}function a85_0x54fa(){const _0x1f7679=['test_identifier','1298452JXWgHx','2367VFAHVi','testInfo','debug','getState','OiZvB','error','frameworkVersion','MODULE_NAME','./playwrightDriverModule.js','onAllTestEvents','aZxYb','version','ENV_VAR','Error\x20in\x20sendTestFrameworkEvent:\x20','UcAYP','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','stringify','onPageCreate\x20CBTSession\x20payload:\x20','11171965jGRVTe','base64','./loadTestModule.js','./baseModule','length','../framework/constants/testFrameworkConstants.js','toString','getRef','testFrameworkState','JEST','getProcessId','getTestUUID','BROWSERSTACK_TESTHUB_UUID','getThreadId','isLTSSession','KEY_TEST_DEFERRED','from','onPageCreate:\x20Skipping\x20CBT\x20session\x20event\x20-\x20no\x20testInfo\x20(page\x20created\x20outside\x20test\x20context)','getCurrentTestState','0|3|6|2|4|1|7|8|5','BiwAw','sOebd','sendTestFrameworkEvent','TEST','testFrameworkData','../state/hookState.js','KEY_SESSION_ID','KEY_PLATFORM_INDEX','766544hjSfoD','1737501gSfarK','getInstance','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','../grpcClient.js','testSessionEvent','../browserstackCLI.js','145816sierrQ','POST','exports','CUCUMBER','util','bind','O11yHashedID','../../../helpers/helper.js','testhubConfig','TestHubModule','page','getTestIdentifierFromTestInfo','recreateIdentifierFromTestInfo','KEY_CAPABILITIES','KEY_TEST_FRAMEWORK_VERSION','BROWSERSTACK_TESTHUB_JWT','../utils/jest-utils.js','sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','../../../helpers/testhub/constants','9314880wQkUTL','onPageCreate:\x20Recreated\x20Jest\x20testIdentifier:\x20','\x20hookState:\x20','LDvCP','logger','testUuid','onPageCreate','format','hookState','registerObserver','KEY_HUB_URL','getLTSSessionId','getBuildHashedId','env','getTestFramework','5217888iUjJVr','../cliUtils.js','../../../helpers/classLogger.js','../state/testFrameworkState.js','retry','getContext','values','krmYH','createTestFrameworkEventPayload','frameworkName','instance','../state/automationFrameworkState.js','testFrameworkEvent','jestUtils','omDkr','CREATE','6OvJvOu','../framework/testFramework.js','Error\x20in\x20sending\x20CBTSession:\x20','GEtWJ','name','forEach','../TestInfo.js','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','getTestId','split'];a85_0x54fa=function(){return _0x1f7679;};return a85_0x54fa();}TestHubModule[a85_0x25cac4(0x17b)]='TestHubModule',TestHubModule[a85_0x25cac4(0x122)]='test_deferred',module[a85_0x25cac4(0x138)]=TestHubModule;