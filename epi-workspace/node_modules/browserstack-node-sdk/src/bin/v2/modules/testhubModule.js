const a76_0x43b129=a76_0xa1c9;function a76_0xa1c9(_0x2d80da,_0x47198d){const _0x7ec8de=a76_0x7ec8();return a76_0xa1c9=function(_0xa1c970,_0x203cc8){_0xa1c970=_0xa1c970-0xec;let _0x58cc2b=_0x7ec8de[_0xa1c970];return _0x58cc2b;},a76_0xa1c9(_0x2d80da,_0x47198d);}(function(_0x2e6fde,_0x51abd9){const _0x17a13e=a76_0xa1c9,_0x4c90fa=_0x2e6fde();while(!![]){try{const _0x3bf071=-parseInt(_0x17a13e(0x144))/0x1+parseInt(_0x17a13e(0xf7))/0x2*(-parseInt(_0x17a13e(0x14b))/0x3)+-parseInt(_0x17a13e(0xf6))/0x4+-parseInt(_0x17a13e(0x10b))/0x5*(parseInt(_0x17a13e(0x12f))/0x6)+-parseInt(_0x17a13e(0xf9))/0x7+-parseInt(_0x17a13e(0x143))/0x8+-parseInt(_0x17a13e(0x149))/0x9*(-parseInt(_0x17a13e(0x101))/0xa);if(_0x3bf071===_0x51abd9)break;else _0x4c90fa['push'](_0x4c90fa['shift']());}catch(_0x48ff5c){_0x4c90fa['push'](_0x4c90fa['shift']());}}}(a76_0x7ec8,0x8580a));const util=require('util'),BaseModule=require(a76_0x43b129(0x14c)),{createClassLogger}=require(a76_0x43b129(0x139)),AutomationFramework=require(a76_0x43b129(0x115)),AutomationFrameworkState=require(a76_0x43b129(0x114)),HookState=require('../state/hookState.js'),TestFramework=require('../framework/testFramework.js'),TestFrameworkState=require('../state/testFrameworkState.js'),PlaywrightDriverModule=require(a76_0x43b129(0x14d)),TestFrameworkConstants=require('../framework/constants/testFrameworkConstants.js'),GrpcClient=require('../grpcClient.js'),CLIUtils=require(a76_0x43b129(0xfe)),TestInfo=require(a76_0x43b129(0x140)),testHubConstants=require(a76_0x43b129(0xf0)),BrowserstackCLI=require(a76_0x43b129(0x111)),{getPlaywrightProvider}=require('../../../helpers/helper.js');function a76_0x7ec8(){const _0x3c4ce6=['onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','getId','error','getCurrentHookState','testInfo','sendTestFrameworkEvent\x20testId:\x20','../TestInfo.js','testFrameworkEvent','BROWSERSTACK_TESTHUB_JWT','3961072Ovjags','379315NyoFfh','forEach','split','getContext','\x20testState:\x20','1917AJUGcP','TEST','9VWMUbt','./baseModule','./playwrightDriverModule.js','endedAt','getTestDetails','logger','KEY_TEST_FRAMEWORK_NAME','../../../helpers/testhub/constants','ENV_VAR','capabilities','CREATE','YQqNS','onAllTestEvents','2556804FZAwmL','126986SjrWWf','\x20hookState:\x20','2385103pLFfSS','instance','matchHookRegex','KEY_TEST_STARTED_AT','onPageCreate\x20CBTSession\x20payload:\x20','../cliUtils.js','parallelIndex','frameworkVersion','141970JyWJkf','test_deferred','getRef','toString','POST','KEY_TEST_DEFERRED','registerObserver','RRohz','testFrameworkVersion','test','2161385swYBYi','__workerDetails','testSessionEvent','KEY_TEST_FRAMEWORK_VERSION','getThreadId','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','../browserstackCLI.js','from','MODULE_NAME','../state/automationFrameworkState.js','../framework/automationFramework.js','frameworkName','hookState','platformIndex','env','NQmuJ','getBuildHashedId','KEY_TEST_ENDED_AT','page','getState','testFrameworkState','stringify','bind','debug','testFrameworkName','bcpwF','testHookState','KEY_PLATFORM_INDEX','testId','sendTestFrameworkEvent','format','values','getInstance','get','KEY_HUB_URL','getCurrentTestState','6DoyHkE','getModuleName','Error\x20in\x20sending\x20CBTSession:\x20','executionContext','TestHubModule','onPageCreate','exports','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','HTHxg','uuid','../../../helpers/classLogger.js'];a76_0x7ec8=function(){return _0x3c4ce6;};return a76_0x7ec8();}class TestHubModule extends BaseModule{[a76_0x43b129(0xee)]=createClassLogger(a76_0x43b129(0x133));constructor(_0x555d45){const _0x5c081f=a76_0x43b129,_0x3ba997={};_0x3ba997[_0x5c081f(0x124)]='7|3|6|2|1|0|4|5',_0x3ba997[_0x5c081f(0x108)]=_0x5c081f(0x133);const _0x50fe47=_0x3ba997,_0x27adac=_0x50fe47[_0x5c081f(0x124)][_0x5c081f(0x146)]('|');let _0x12d3dc=0x0;while(!![]){switch(_0x27adac[_0x12d3dc++]){case'0':process[_0x5c081f(0x119)][testHubConstants[_0x5c081f(0xf1)][_0x5c081f(0x142)]]=this['testhubConfig']['getJwt']();continue;case'1':Object[_0x5c081f(0x12a)](TestFrameworkState)['forEach'](_0x248b6c=>{const _0x58f0a5=_0x5c081f;Object[_0x58f0a5(0x12a)](HookState)[_0x58f0a5(0x145)](_0x24721b=>{const _0xc9d8ab=_0x58f0a5;TestFramework[_0xc9d8ab(0x107)](_0x248b6c,_0x24721b,this[_0xc9d8ab(0xf5)]['bind'](this));});});continue;case'2':AutomationFramework[_0x5c081f(0x107)](AutomationFrameworkState[_0x5c081f(0xf3)],HookState['POST'],this[_0x5c081f(0x134)][_0x5c081f(0x121)](this));continue;case'3':this['name']=_0x50fe47[_0x5c081f(0x108)];continue;case'4':process[_0x5c081f(0x119)][testHubConstants[_0x5c081f(0xf1)]['BROWSERSTACK_TESTHUB_UUID']]=this['testhubConfig'][_0x5c081f(0x11b)]();continue;case'5':BrowserstackCLI['O11yHashedID']=this['testhubConfig']['getBuildHashedId']();continue;case'6':this['testhubConfig']=_0x555d45;continue;case'7':super();continue;}break;}}[a76_0x43b129(0x130)](){const _0x205027=a76_0x43b129;return TestHubModule[_0x205027(0x113)];}['onAllTestEvents'](_0x672c43){const _0x53091d=a76_0x43b129,_0x4809d5={};_0x4809d5[_0x53091d(0xf4)]=function(_0x1480b3,_0x24480f){return _0x1480b3===_0x24480f;};const _0x31c8de=_0x4809d5,_0x5f2ef2=_0x672c43['instance'],_0x483ad9=_0x5f2ef2[_0x53091d(0x12e)]();(_0x31c8de[_0x53091d(0xf4)](_0x483ad9,TestFrameworkState[_0x53091d(0x14a)])||CLIUtils[_0x53091d(0xfb)](_0x483ad9[_0x53091d(0x104)]()['split']('.')[0x1]))&&this['sendTestFrameworkEvent'](_0x672c43);}async[a76_0x43b129(0x128)](_0x47fa79){const _0x3a2e71=a76_0x43b129,_0x41251a={};_0x41251a['HTHxg']='base64';const _0x47a218=_0x41251a;try{const _0x414744=_0x47fa79[_0x3a2e71(0x10a)]['id'],_0x1a7396=_0x47fa79[_0x3a2e71(0xfa)],_0x940a5e=_0x1a7396['getContext'](),_0x2337f4=_0x1a7396['getAllData']()[_0x3a2e71(0x12c)](_0x414744);this[_0x3a2e71(0xee)]['debug'](_0x3a2e71(0x13f)+_0x414744);const {[TestFrameworkConstants[_0x3a2e71(0xef)]]:_0x1281a9='',[TestFrameworkConstants[_0x3a2e71(0x10e)]]:_0x22e5e8='',[TestFrameworkConstants[_0x3a2e71(0xfc)]]:_0x107e3a='',[TestFrameworkConstants[_0x3a2e71(0x11c)]]:_0x3807b1=''}=_0x2337f4,_0x2a3f01=_0x1a7396[_0x3a2e71(0x12e)]()[_0x3a2e71(0x104)]()['split']('.')[0x1],_0xd0622=_0x1a7396[_0x3a2e71(0x13d)]()[_0x3a2e71(0x104)]()['split']('.')[0x1],_0x59ecf1=global?.[_0x3a2e71(0x10c)]?.['workerInfo']?.[_0x3a2e71(0xff)];;const _0x5c7f86=_0x1a7396[_0x3a2e71(0x103)](),_0x5aece8=Buffer[_0x3a2e71(0x112)](JSON[_0x3a2e71(0x120)](_0x2337f4))[_0x3a2e71(0x104)](_0x47a218[_0x3a2e71(0x137)]),_0x23cf7d={'hash':_0x940a5e[_0x3a2e71(0x13b)](),'threadId':_0x940a5e[_0x3a2e71(0x10f)]()[_0x3a2e71(0x104)](),'processId':_0x940a5e['getProcessId']()[_0x3a2e71(0x104)]()},_0x19b6fd={};_0x19b6fd[_0x3a2e71(0x118)]=_0x59ecf1,_0x19b6fd[_0x3a2e71(0x123)]=_0x1281a9,_0x19b6fd[_0x3a2e71(0x109)]=_0x22e5e8,_0x19b6fd[_0x3a2e71(0x11f)]=_0x2a3f01,_0x19b6fd[_0x3a2e71(0x117)]=_0xd0622,_0x19b6fd['startedAt']=_0x107e3a,_0x19b6fd[_0x3a2e71(0xec)]=_0x3807b1,_0x19b6fd[_0x3a2e71(0x138)]=_0x5c7f86,_0x19b6fd['eventJson']=_0x5aece8,_0x19b6fd[_0x3a2e71(0x132)]=_0x23cf7d;const _0x20e6b8=_0x19b6fd,_0x4ebcf4=await GrpcClient[_0x3a2e71(0x12b)]()[_0x3a2e71(0x141)](_0x20e6b8);this[_0x3a2e71(0xee)]['debug'](_0x3a2e71(0x110)+_0x414744+_0x3a2e71(0x148)+_0x2a3f01+_0x3a2e71(0xf8)+_0xd0622);}catch(_0x25241f){this[_0x3a2e71(0xee)][_0x3a2e71(0x13c)]('Error\x20in\x20sendTestFrameworkEvent:\x20'+util[_0x3a2e71(0x129)](_0x25241f));}}async[a76_0x43b129(0x134)](_0x2b134b){const _0x5a0286=a76_0x43b129,_0x53c66f={'ubthS':function(_0x590fe7,_0x31192c){return _0x590fe7(_0x31192c);},'NQmuJ':'base64'};try{if(_0x2b134b[_0x5a0286(0x11d)]){const _0x9cea7e=_0x2b134b[_0x5a0286(0x13e)][_0x5a0286(0x127)];this[_0x5a0286(0xee)][_0x5a0286(0x122)](_0x5a0286(0x136)+_0x9cea7e);const _0x5052a4=TestInfo['getTestUUID'](_0x9cea7e),_0x568790=TestInfo[_0x5a0286(0xed)](_0x9cea7e),_0x643407=_0x2b134b[_0x5a0286(0xfa)],_0x54d381=AutomationFramework[_0x5a0286(0x11e)](_0x643407,PlaywrightDriverModule[_0x5a0286(0x126)]),_0x339fb4=_0x568790[TestFrameworkConstants[_0x5a0286(0xef)]],_0x40996a=_0x568790[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']],_0x525109=TestFrameworkState['TEST']['toString']()[_0x5a0286(0x146)]('.')[0x1],_0x75159b=HookState[_0x5a0286(0x105)][_0x5a0286(0x104)]()[_0x5a0286(0x146)]('.')[0x1],_0xa872b0=_0x643407[_0x5a0286(0x147)](),_0x12a797=AutomationFramework[_0x5a0286(0x11e)](_0x643407,PlaywrightDriverModule[_0x5a0286(0x12d)],''),_0x19921a={'provider':_0x53c66f['ubthS'](getPlaywrightProvider,_0x12a797),'frameworkName':_0x643407[_0x5a0286(0x116)],'frameworkVersion':_0x643407[_0x5a0286(0x100)],'frameworkSessionId':AutomationFramework[_0x5a0286(0x11e)](_0x643407,PlaywrightDriverModule['KEY_SESSION_ID'],''),'ref':_0x643407[_0x5a0286(0x103)](),'hubUrl':_0x12a797};let _0x392e29=AutomationFramework[_0x5a0286(0x11e)](_0x643407,PlaywrightDriverModule['KEY_CAPABILITIES'],{});_0x392e29=Buffer[_0x5a0286(0x112)](JSON[_0x5a0286(0x120)](_0x392e29))[_0x5a0286(0x104)](_0x53c66f[_0x5a0286(0x11a)]);const _0x161c88={'hash':_0xa872b0[_0x5a0286(0x13b)](),'threadId':_0xa872b0[_0x5a0286(0x10f)]()[_0x5a0286(0x104)](),'processId':_0xa872b0['getProcessId']()[_0x5a0286(0x104)]()},_0x11bcf7={};_0x11bcf7[_0x5a0286(0x118)]=_0x54d381,_0x11bcf7['testFrameworkName']=_0x339fb4,_0x11bcf7[_0x5a0286(0x109)]=_0x40996a,_0x11bcf7['testFrameworkState']=_0x525109,_0x11bcf7[_0x5a0286(0x125)]=_0x75159b,_0x11bcf7['testUuid']=_0x5052a4,_0x11bcf7['automationSession']=_0x19921a,_0x11bcf7[_0x5a0286(0xf2)]=_0x392e29,_0x11bcf7['executionContext']=_0x161c88;const _0x321b00=_0x11bcf7;this[_0x5a0286(0xee)][_0x5a0286(0x122)](_0x5a0286(0xfd)+util[_0x5a0286(0x129)](_0x321b00));const _0x31d136=await GrpcClient['getInstance']()[_0x5a0286(0x10d)](_0x321b00);this[_0x5a0286(0xee)][_0x5a0286(0x122)](_0x5a0286(0x13a)+_0x9cea7e);}}catch(_0x35fd30){this['logger'][_0x5a0286(0x13c)](_0x5a0286(0x131)+util[_0x5a0286(0x129)](_0x35fd30));}}}TestHubModule[a76_0x43b129(0x113)]=a76_0x43b129(0x133),TestHubModule[a76_0x43b129(0x106)]=a76_0x43b129(0x102),module[a76_0x43b129(0x135)]=TestHubModule;