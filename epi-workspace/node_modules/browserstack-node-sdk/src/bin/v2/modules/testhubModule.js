const a83_0x3ddb40=a83_0xcfdc;function a83_0x5c95(){const _0x10b0ba=['../framework/testFramework.js','KEY_TEST_FRAMEWORK_NAME','../../../helpers/test-observability/constants.js','sendTestFrameworkEvent','ENV_VAR','version','JEST','1796KVGUwB','BROWSERSTACK_TESTHUB_JWT','../TestInfo.js','getTestUUID','getRef','KEY_PLATFORM_INDEX','KEY_TEST_FRAMEWORK_VERSION','frameworkVersion','./baseModule','Error\x20in\x20sending\x20CBTSession:\x20','O11yHashedID','getJwt','7|2|3|0|6|1|4|5','testhubConfig','sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','87579kVBJZD','test_deferred','getTestIdentifierFromTestInfo','onPageCreate','18015162PDHOIK','../cliUtils.js','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','format','getState','Error\x20in\x20sendTestFrameworkEvent:\x20','getTestDetails','BROWSERSTACK_TESTHUB_UUID','split','180nTypPK','getBuildHashedId','wLMKf','25SBzInB','automationSession','POST','bind','testInfo','onPageCreate\x20CBTSession\x20payload:\x20','getTestFramework','util','KEY_SESSION_ID','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','../../../helpers/testhub/constants','98680uyJHhg','onAllTestEvents','base64','CREATE','capabilities','gieMf','efzlc','\x20hookState:\x20','exports','frameworkName','KEY_TEST_DEFERRED','getTestId','logger','page','5631wvaXfG','testFrameworkName','KEY_CAPABILITIES','658wWwhAo','474684KIdvKk','nYpVB','forEach','stringify','../browserstackCLI.js','../state/hookState.js','createTestFrameworkEventPayload','testFrameworkData','../framework/constants/testFrameworkConstants.js','TestHubModule','jVcFE','from','testFrameworkVersion','debug','getContext','env','instance','name','959184PbLwVB','length','values','hookState','getCurrentTestState','toString','registerObserver','error','retry','KEY_HUB_URL','getInstance','../framework/automationFramework.js','CUCUMBER','XnzxL','testFrameworkState','EPvWN','getId','215676CUiXOE','TEST'];a83_0x5c95=function(){return _0x10b0ba;};return a83_0x5c95();}(function(_0x17fe37,_0x224f04){const _0x54a5b7=a83_0xcfdc,_0x2fc6f5=_0x17fe37();while(!![]){try{const _0x3748e6=-parseInt(_0x54a5b7(0x15e))/0x1+parseInt(_0x54a5b7(0x135))/0x2+-parseInt(_0x54a5b7(0x11f))/0x3*(-parseInt(_0x54a5b7(0x14f))/0x4)+-parseInt(_0x54a5b7(0x16e))/0x5*(-parseInt(_0x54a5b7(0x123))/0x6)+parseInt(_0x54a5b7(0x122))/0x7*(parseInt(_0x54a5b7(0x111))/0x8)+-parseInt(_0x54a5b7(0x146))/0x9*(parseInt(_0x54a5b7(0x16b))/0xa)+-parseInt(_0x54a5b7(0x162))/0xb;if(_0x3748e6===_0x224f04)break;else _0x2fc6f5['push'](_0x2fc6f5['shift']());}catch(_0x59ac05){_0x2fc6f5['push'](_0x2fc6f5['shift']());}}}(a83_0x5c95,0xaff70));const util=require(a83_0x3ddb40(0x10d)),BaseModule=require(a83_0x3ddb40(0x157)),{createClassLogger}=require('../../../helpers/classLogger.js'),AutomationFramework=require(a83_0x3ddb40(0x140)),AutomationFrameworkState=require('../state/automationFrameworkState.js'),HookState=require(a83_0x3ddb40(0x128)),TestFramework=require(a83_0x3ddb40(0x148)),TestFrameworkState=require('../state/testFrameworkState.js'),PlaywrightDriverModule=require('./playwrightDriverModule.js'),TestFrameworkConstants=require(a83_0x3ddb40(0x12b)),GrpcClient=require('../grpcClient.js'),CLIUtils=require(a83_0x3ddb40(0x163)),TestInfo=require(a83_0x3ddb40(0x151)),testHubConstants=require(a83_0x3ddb40(0x110)),{FRAMEWORKS}=require(a83_0x3ddb40(0x14a)),BrowserstackCLI=require(a83_0x3ddb40(0x127)),{getPlaywrightProvider}=require('../../../helpers/helper.js');class TestHubModule extends BaseModule{[a83_0x3ddb40(0x11d)]=createClassLogger(a83_0x3ddb40(0x12c));constructor(_0x4759c9,_0x3c4ec9=null){const _0x3f0596=a83_0x3ddb40,_0x37bf80={};_0x37bf80[_0x3f0596(0x12d)]=_0x3f0596(0x15b),_0x37bf80['nYpVB']=_0x3f0596(0x12c);const _0x4b444c=_0x37bf80,_0x408fcf=_0x4b444c['jVcFE'][_0x3f0596(0x16a)]('|');let _0x1e4979=0x0;while(!![]){switch(_0x408fcf[_0x1e4979++]){case'0':AutomationFramework[_0x3f0596(0x13b)](AutomationFrameworkState[_0x3f0596(0x114)],HookState[_0x3f0596(0x170)],this[_0x3f0596(0x161)][_0x3f0596(0x171)](this));continue;case'1':process['env'][testHubConstants[_0x3f0596(0x14c)][_0x3f0596(0x150)]]=this['testhubConfig'][_0x3f0596(0x15a)]();continue;case'2':this[_0x3f0596(0x134)]=_0x4b444c[_0x3f0596(0x124)];continue;case'3':this[_0x3f0596(0x15c)]=_0x4759c9;continue;case'4':process[_0x3f0596(0x132)][testHubConstants[_0x3f0596(0x14c)][_0x3f0596(0x169)]]=this['testhubConfig'][_0x3f0596(0x16c)]();continue;case'5':BrowserstackCLI[_0x3f0596(0x159)]=this[_0x3f0596(0x15c)][_0x3f0596(0x16c)]();continue;case'6':Object[_0x3f0596(0x137)](TestFrameworkState)[_0x3f0596(0x125)](_0x2faf18=>{const _0x22865b=_0x3f0596;Object[_0x22865b(0x137)](HookState)[_0x22865b(0x125)](_0x376159=>{const _0x3fad08=_0x22865b;TestFramework['registerObserver'](_0x2faf18,_0x376159,this[_0x3fad08(0x112)][_0x3fad08(0x171)](this));});});continue;case'7':super(_0x3c4ec9);continue;}break;}}['getModuleName'](){return TestHubModule['MODULE_NAME'];}[a83_0x3ddb40(0x112)](_0x59067a){const _0x1ad4a1=a83_0x3ddb40,_0x340aa7={};_0x340aa7[_0x1ad4a1(0x117)]=function(_0x50fe40,_0x147748){return _0x50fe40===_0x147748;};const _0x5b116f=_0x340aa7,_0x580b58=_0x59067a['instance'],_0x29b6ce=_0x580b58[_0x1ad4a1(0x139)]();(_0x5b116f[_0x1ad4a1(0x117)](_0x29b6ce,TestFrameworkState[_0x1ad4a1(0x147)])||CLIUtils['matchHookRegex'](_0x29b6ce[_0x1ad4a1(0x13a)]()[_0x1ad4a1(0x16a)]('.')[0x1]))&&this[_0x1ad4a1(0x14b)](_0x59067a);}async[a83_0x3ddb40(0x14b)](_0x2df20d){const _0x255522=a83_0x3ddb40,_0x3d87b3={};_0x3d87b3[_0x255522(0x16d)]=function(_0x1e72d6,_0x514cd9){return _0x1e72d6===_0x514cd9;},_0x3d87b3[_0x255522(0x142)]=_0x255522(0x15d);const _0x528083=_0x3d87b3;try{const _0x370f4b=BrowserstackCLI[_0x255522(0x13f)]()[_0x255522(0x10c)]()[_0x255522(0x129)](_0x2df20d);if(!_0x370f4b||_0x528083['wLMKf'](Object['keys'](_0x370f4b)[_0x255522(0x136)],0x0)){this[_0x255522(0x11d)][_0x255522(0x130)](_0x528083[_0x255522(0x142)]);return;}const _0x34f8fc=await GrpcClient['getInstance']()['testFrameworkEvent'](_0x370f4b);this['logger']['debug'](_0x255522(0x164)+_0x370f4b[_0x255522(0x143)]+_0x255522(0x118)+_0x370f4b[_0x255522(0x138)]);}catch(_0x165beb){this[_0x255522(0x11d)]['error'](_0x255522(0x167)+util[_0x255522(0x165)](_0x165beb));}}async['onPageCreate'](_0x61d296){const _0x154662=a83_0x3ddb40,_0x1d5723={'gieMf':function(_0x15a4e2,_0x6ed6eb){return _0x15a4e2===_0x6ed6eb;},'EPvWN':function(_0xac8eb3,_0x1ad6b8){return _0xac8eb3===_0x1ad6b8;},'dbIeI':function(_0x3ba548,_0x3c7964){return _0x3ba548(_0x3c7964);},'Fgblz':_0x154662(0x113)};try{if(_0x61d296[_0x154662(0x11e)]){const _0x2e0b53=this[_0x154662(0x11c)](_0x61d296);this[_0x154662(0x11d)][_0x154662(0x130)](_0x154662(0x10f)+_0x2e0b53);let _0x17c4bc;if(this[_0x154662(0x12a)]&&_0x1d5723[_0x154662(0x116)](this[_0x154662(0x12a)][_0x154662(0x134)],FRAMEWORKS[_0x154662(0x141)]))_0x17c4bc=_0x2e0b53;else this['testFrameworkData']&&_0x1d5723[_0x154662(0x144)](this[_0x154662(0x12a)][_0x154662(0x134)],FRAMEWORKS[_0x154662(0x14e)])?_0x17c4bc=_0x2e0b53:_0x17c4bc=TestInfo[_0x154662(0x160)](_0x61d296[_0x154662(0x172)],_0x61d296[_0x154662(0x172)][_0x154662(0x13d)]);const _0x16361e=TestInfo[_0x154662(0x152)](_0x17c4bc),_0x4c9a26=TestInfo[_0x154662(0x168)](_0x17c4bc),_0x4d4db5=_0x61d296[_0x154662(0x133)],_0x3feeeb=AutomationFramework['getState'](_0x4d4db5,PlaywrightDriverModule[_0x154662(0x154)]),_0x3fac7e=_0x4c9a26[TestFrameworkConstants[_0x154662(0x149)]]||this[_0x154662(0x12a)]&&this[_0x154662(0x12a)][_0x154662(0x134)],_0x40fb21=_0x4c9a26[TestFrameworkConstants[_0x154662(0x155)]]||this[_0x154662(0x12a)]&&this[_0x154662(0x12a)][_0x154662(0x14d)],_0x4d7add=TestFrameworkState[_0x154662(0x147)][_0x154662(0x13a)]()['split']('.')[0x1],_0x1e3159=HookState['POST']['toString']()[_0x154662(0x16a)]('.')[0x1],_0x760941=_0x4d4db5[_0x154662(0x131)](),_0x54c321=AutomationFramework[_0x154662(0x166)](_0x4d4db5,PlaywrightDriverModule[_0x154662(0x13e)],''),_0x4c1d5d={'provider':_0x1d5723['dbIeI'](getPlaywrightProvider,_0x54c321),'frameworkName':_0x4d4db5[_0x154662(0x11a)],'frameworkVersion':_0x4d4db5[_0x154662(0x156)],'frameworkSessionId':AutomationFramework['getState'](_0x4d4db5,PlaywrightDriverModule[_0x154662(0x10e)],''),'ref':_0x4d4db5[_0x154662(0x153)](),'hubUrl':_0x54c321};let _0x445b92=AutomationFramework[_0x154662(0x166)](_0x4d4db5,PlaywrightDriverModule[_0x154662(0x121)],{});_0x445b92=Buffer[_0x154662(0x12e)](JSON[_0x154662(0x126)](_0x445b92))[_0x154662(0x13a)](_0x1d5723['Fgblz']);const _0x515580={'hash':_0x760941[_0x154662(0x145)](),'threadId':_0x760941['getThreadId']()[_0x154662(0x13a)](),'processId':_0x760941['getProcessId']()[_0x154662(0x13a)]()},_0x7b70a2={};_0x7b70a2['platformIndex']=_0x3feeeb,_0x7b70a2[_0x154662(0x120)]=_0x3fac7e,_0x7b70a2[_0x154662(0x12f)]=_0x40fb21,_0x7b70a2[_0x154662(0x143)]=_0x4d7add,_0x7b70a2['testHookState']=_0x1e3159,_0x7b70a2['testUuid']=_0x16361e,_0x7b70a2[_0x154662(0x16f)]=_0x4c1d5d,_0x7b70a2[_0x154662(0x115)]=_0x445b92,_0x7b70a2['executionContext']=_0x515580;const _0x12e2f5=_0x7b70a2;this[_0x154662(0x11d)][_0x154662(0x130)](_0x154662(0x173)+util[_0x154662(0x165)](_0x12e2f5));const _0x33f141=await GrpcClient[_0x154662(0x13f)]()['testSessionEvent'](_0x12e2f5);this[_0x154662(0x11d)][_0x154662(0x130)]('onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20'+_0x2e0b53);}}catch(_0x182b08){this[_0x154662(0x11d)][_0x154662(0x13c)](_0x154662(0x158)+util[_0x154662(0x165)](_0x182b08));}}}function a83_0xcfdc(_0x5e5edd,_0x424f90){const _0x5c95a8=a83_0x5c95();return a83_0xcfdc=function(_0xcfdc6f,_0x3aa740){_0xcfdc6f=_0xcfdc6f-0x10c;let _0x46db50=_0x5c95a8[_0xcfdc6f];return _0x46db50;},a83_0xcfdc(_0x5e5edd,_0x424f90);}TestHubModule['MODULE_NAME']=a83_0x3ddb40(0x12c),TestHubModule[a83_0x3ddb40(0x11b)]=a83_0x3ddb40(0x15f),module[a83_0x3ddb40(0x119)]=TestHubModule;