const a85_0xc696ba=a85_0x4684;(function(_0xae814d,_0x75f35c){const _0x101346=a85_0x4684,_0x409651=_0xae814d();while(!![]){try{const _0x182eac=parseInt(_0x101346(0x87))/0x1*(-parseInt(_0x101346(0x8b))/0x2)+parseInt(_0x101346(0x94))/0x3+-parseInt(_0x101346(0x81))/0x4+parseInt(_0x101346(0xe8))/0x5+-parseInt(_0x101346(0xc2))/0x6*(parseInt(_0x101346(0x8f))/0x7)+-parseInt(_0x101346(0x96))/0x8*(parseInt(_0x101346(0xad))/0x9)+parseInt(_0x101346(0xb2))/0xa;if(_0x182eac===_0x75f35c)break;else _0x409651['push'](_0x409651['shift']());}catch(_0x6c3ab7){_0x409651['push'](_0x409651['shift']());}}}(a85_0x2d38,0x64a44));function a85_0x4684(_0x57f2ce,_0x39e4e6){const _0x2d3848=a85_0x2d38();return a85_0x4684=function(_0x468432,_0x50b7cb){_0x468432=_0x468432-0x81;let _0x1d560c=_0x2d3848[_0x468432];return _0x1d560c;},a85_0x4684(_0x57f2ce,_0x39e4e6);}const util=require(a85_0xc696ba(0x9a)),BaseModule=require('./baseModule'),{createClassLogger}=require(a85_0xc696ba(0xbd)),AutomationFramework=require(a85_0xc696ba(0xde)),AutomationFrameworkState=require(a85_0xc696ba(0x9d)),HookState=require(a85_0xc696ba(0xbf)),TestFramework=require(a85_0xc696ba(0xb0)),TestFrameworkState=require('../state/testFrameworkState.js'),PlaywrightDriverModule=require(a85_0xc696ba(0xc1)),TestFrameworkConstants=require(a85_0xc696ba(0x92)),GrpcClient=require(a85_0xc696ba(0xb4)),CLIUtils=require(a85_0xc696ba(0xa2)),TestInfo=require('../TestInfo.js'),testHubConstants=require('../../../helpers/testhub/constants'),{FRAMEWORKS}=require(a85_0xc696ba(0x9e)),helper=require(a85_0xc696ba(0xda)),LoadTestModule=require(a85_0xc696ba(0xe6)),JestUtils=require(a85_0xc696ba(0xd2)),BrowserstackCLI=require(a85_0xc696ba(0x95)),{getPlaywrightProvider}=require(a85_0xc696ba(0xda));function a85_0x2d38(){const _0x4ca457=['KEY_SESSION_ID','testFrameworkEvent','Error\x20in\x20sending\x20CBTSession:\x20','BROWSERSTACK_TESTHUB_UUID','isLTSSession','../utils/jest-utils.js','testFrameworkData','KKovT','testFrameworkState','retry','ENV_VAR','hookState','mUfbm','../../../helpers/helper.js','getState','CREATE','jestUtils','../framework/automationFramework.js','getContext','POST','recreateIdentifierFromTestInfo','from','getJwt','onPageCreate:\x20Skipping\x20CBT\x20session\x20event\x20-\x20no\x20testInfo\x20(page\x20created\x20outside\x20test\x20context)','piIwy','./loadTestModule.js','test_identifier','2043045ALMyCd','getTestFramework','testInfo','getTestDetails','4|5|8|6|7|2|1|0|3','getInstance','2809724ARUJmx','frameworkName','stringify','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','LgqwQ','JEST','1VnXInY','format','getBuildHashedId','test_deferred','531964UGqEQp','getThreadId','instance','sendTestFrameworkEvent','936257rsXSFO','registerObserver','eHOrD','../framework/constants/testFrameworkConstants.js','values','2302683YFDgrs','../browserstackCLI.js','5048IgmaaB','UcgDO','zvjlI','split','util','onPageCreate:\x20Recreated\x20Jest\x20testIdentifier:\x20','vGzbb','../state/automationFrameworkState.js','../../../helpers/test-observability/constants.js','getTestUUID','env','onPageCreate','../cliUtils.js','page','testUuid','getLTSSessionId','\x20hookState:\x20','MODULE_NAME','getTestId','testSessionEvent','keys','name','bind','6147wVhZzE','sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','frameworkVersion','../framework/testFramework.js','testhubConfig','9029460qDbHCQ','getRef','../grpcClient.js','KEY_HUB_URL','TestHubModule','toString','getModuleName','Error\x20in\x20sendTestFrameworkEvent:\x20','KEY_CAPABILITIES','getTestIdentifierFromTestInfo','logger','../../../helpers/classLogger.js','O11yHashedID','../state/hookState.js','length','./playwrightDriverModule.js','12dEySfI','TEST','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','getCurrentTestState','wmOFQ','createTestFrameworkEventPayload','forEach','onPageCreate\x20CBTSession\x20payload:\x20','debug','KEY_TEST_FRAMEWORK_NAME','GClZP'];a85_0x2d38=function(){return _0x4ca457;};return a85_0x2d38();}class TestHubModule extends BaseModule{[a85_0xc696ba(0xbc)]=createClassLogger(a85_0xc696ba(0xb6));constructor(_0x1198e1,_0x5af0d9=null){const _0x29c486=a85_0xc696ba,_0x8d331f={};_0x8d331f[_0x29c486(0x98)]=_0x29c486(0xec),_0x8d331f[_0x29c486(0xd4)]=_0x29c486(0xb6);const _0x1037ef=_0x8d331f,_0x437370=_0x1037ef[_0x29c486(0x98)][_0x29c486(0x99)]('|');let _0x459a9f=0x0;while(!![]){switch(_0x437370[_0x459a9f++]){case'0':process[_0x29c486(0xa0)][testHubConstants[_0x29c486(0xd7)][_0x29c486(0xd0)]]=this[_0x29c486(0xb1)][_0x29c486(0x89)]();continue;case'1':process[_0x29c486(0xa0)][testHubConstants[_0x29c486(0xd7)]['BROWSERSTACK_TESTHUB_JWT']]=this['testhubConfig'][_0x29c486(0xe3)]();continue;case'2':Object[_0x29c486(0x93)](TestFrameworkState)[_0x29c486(0xc8)](_0xf926b5=>{const _0x81936f=_0x29c486;Object[_0x81936f(0x93)](HookState)[_0x81936f(0xc8)](_0x3ca00c=>{const _0x4e61dc=_0x81936f;TestFramework[_0x4e61dc(0x90)](_0xf926b5,_0x3ca00c,this['onAllTestEvents'][_0x4e61dc(0xac)](this));});});continue;case'3':BrowserstackCLI[_0x29c486(0xbe)]=this[_0x29c486(0xb1)][_0x29c486(0x89)]();continue;case'4':super(_0x5af0d9);continue;case'5':this[_0x29c486(0xab)]=_0x1037ef[_0x29c486(0xd4)];continue;case'6':this['jestUtils']=new JestUtils();continue;case'7':AutomationFramework[_0x29c486(0x90)](AutomationFrameworkState[_0x29c486(0xdc)],HookState['POST'],this[_0x29c486(0xa1)][_0x29c486(0xac)](this));continue;case'8':this[_0x29c486(0xb1)]=_0x1198e1;continue;}break;}}[a85_0xc696ba(0xb8)](){const _0x44137d=a85_0xc696ba;return TestHubModule[_0x44137d(0xa7)];}['onAllTestEvents'](_0x53dafd){const _0x29c404=a85_0xc696ba,_0x3d72f9={};_0x3d72f9[_0x29c404(0xd9)]=function(_0x29f583,_0x34958c){return _0x29f583===_0x34958c;};const _0x2e1db2=_0x3d72f9,_0xb0e6c=_0x53dafd[_0x29c404(0x8d)],_0x16262e=_0xb0e6c[_0x29c404(0xc5)]();(_0x2e1db2[_0x29c404(0xd9)](_0x16262e,TestFrameworkState[_0x29c404(0xc3)])||CLIUtils['matchHookRegex'](_0x16262e[_0x29c404(0xb7)]()[_0x29c404(0x99)]('.')[0x1]))&&this[_0x29c404(0x8e)](_0x53dafd);}async[a85_0xc696ba(0x8e)](_0x4b2c0d){const _0x421c2a=a85_0xc696ba,_0x217357={};_0x217357['vGzbb']=function(_0x27bde6,_0x28d33d){return _0x27bde6===_0x28d33d;},_0x217357[_0x421c2a(0x91)]=_0x421c2a(0xae);const _0x39f8cf=_0x217357;try{const _0x2c3ea8=BrowserstackCLI[_0x421c2a(0xed)]()[_0x421c2a(0xe9)]()[_0x421c2a(0xc7)](_0x4b2c0d);if(!_0x2c3ea8||_0x39f8cf[_0x421c2a(0x9c)](Object[_0x421c2a(0xaa)](_0x2c3ea8)[_0x421c2a(0xc0)],0x0)){this[_0x421c2a(0xbc)]['debug'](_0x39f8cf['eHOrD']);return;}const _0x44dcf7=await GrpcClient[_0x421c2a(0xed)]()[_0x421c2a(0xce)](_0x2c3ea8);this[_0x421c2a(0xbc)][_0x421c2a(0xca)](_0x421c2a(0xc4)+_0x2c3ea8[_0x421c2a(0xd5)]+_0x421c2a(0xa6)+_0x2c3ea8[_0x421c2a(0xd8)]);}catch(_0x5625c2){this['logger']['error'](_0x421c2a(0xb9)+util[_0x421c2a(0x88)](_0x5625c2));}}async[a85_0xc696ba(0xa1)](_0x5e9a0a){const _0x528854=a85_0xc696ba,_0x656e76={'UcgDO':function(_0x5a1475,_0x29c361){return _0x5a1475===_0x29c361;},'GClZP':_0x528854(0xe4),'wmOFQ':function(_0x2aa45c,_0x19be07){return _0x2aa45c===_0x19be07;},'LgqwQ':function(_0xe966aa,_0x58540e){return _0xe966aa(_0x58540e);},'ymyIn':'base64','piIwy':function(_0x600580,_0xc6653c){return _0x600580===_0xc6653c;}};try{if(_0x5e9a0a[_0x528854(0xa3)]){const _0x5bbdb9=this[_0x528854(0xa8)](_0x5e9a0a);this['logger'][_0x528854(0xca)]('onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20'+_0x5bbdb9);if(this[_0x528854(0xd3)]&&_0x656e76[_0x528854(0x97)](this[_0x528854(0xd3)]['name'],FRAMEWORKS[_0x528854(0x86)])&&!_0x5e9a0a['testInfo']){this['logger']['debug'](_0x656e76[_0x528854(0xcc)]);return;}let _0x7867f6,_0x579b3d;if(this[_0x528854(0xd3)]&&_0x656e76[_0x528854(0x97)](this[_0x528854(0xd3)][_0x528854(0xab)],FRAMEWORKS['CUCUMBER']))_0x7867f6=_0x5bbdb9,_0x579b3d=TestInfo[_0x528854(0x9f)](_0x7867f6);else this[_0x528854(0xd3)]&&_0x656e76[_0x528854(0xc6)](this[_0x528854(0xd3)]['name'],FRAMEWORKS['JEST'])?(_0x7867f6=this[_0x528854(0xdd)][_0x528854(0xe1)](_0x5e9a0a[_0x528854(0xea)]),this[_0x528854(0xbc)]['debug'](_0x528854(0x9b)+_0x7867f6)):(_0x7867f6=TestInfo[_0x528854(0xbb)](_0x5e9a0a[_0x528854(0xea)],_0x5e9a0a['testInfo'][_0x528854(0xd6)]),_0x579b3d=TestInfo[_0x528854(0x9f)](_0x7867f6));const _0x21feba=TestInfo[_0x528854(0xeb)](_0x7867f6),_0x47284b=_0x5e9a0a[_0x528854(0x8d)],_0x1c4c5c=AutomationFramework[_0x528854(0xdb)](_0x47284b,PlaywrightDriverModule['KEY_PLATFORM_INDEX']),_0x51b026=_0x21feba?.[TestFrameworkConstants[_0x528854(0xcb)]]||this[_0x528854(0xd3)]&&this['testFrameworkData'][_0x528854(0xab)],_0x10f01c=_0x21feba?.[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]||this[_0x528854(0xd3)]&&this[_0x528854(0xd3)]['version'],_0x1b1219=TestFrameworkState[_0x528854(0xc3)]['toString']()[_0x528854(0x99)]('.')[0x1],_0x70dfeb=HookState[_0x528854(0xe0)][_0x528854(0xb7)]()[_0x528854(0x99)]('.')[0x1],_0x50e005=_0x47284b[_0x528854(0xdf)](),_0x1c4759=AutomationFramework['getState'](_0x47284b,PlaywrightDriverModule[_0x528854(0xb5)],''),_0x6b80a5={'provider':_0x656e76[_0x528854(0x85)](getPlaywrightProvider,_0x1c4759),'frameworkName':_0x47284b[_0x528854(0x82)],'frameworkVersion':_0x47284b[_0x528854(0xaf)],'frameworkSessionId':LoadTestModule[_0x528854(0xd1)]()?LoadTestModule[_0x528854(0xa5)]():AutomationFramework['getState'](_0x47284b,PlaywrightDriverModule[_0x528854(0xcd)],''),'ref':_0x47284b[_0x528854(0xb3)](),'hubUrl':_0x1c4759};let _0x55c335=AutomationFramework['getState'](_0x47284b,PlaywrightDriverModule[_0x528854(0xba)],{});_0x55c335=Buffer[_0x528854(0xe2)](JSON[_0x528854(0x83)](_0x55c335))[_0x528854(0xb7)](_0x656e76['ymyIn']);const _0x4d5928={'hash':_0x50e005['getId'](),'threadId':_0x50e005[_0x528854(0x8c)]()[_0x528854(0xb7)](),'processId':_0x50e005['getProcessId']()[_0x528854(0xb7)]()},_0x4aefa5={};_0x4aefa5[_0x528854(0xe7)]=_0x7867f6;const _0x10f331={};_0x10f331[_0x528854(0xa4)]=_0x579b3d;const _0x6094a0={'platformIndex':_0x1c4c5c,'testFrameworkName':_0x51b026,'testFrameworkVersion':_0x10f01c,'testFrameworkState':_0x1b1219,'testHookState':_0x70dfeb,...this['testFrameworkData']&&_0x656e76[_0x528854(0xe5)](this[_0x528854(0xd3)][_0x528854(0xab)],FRAMEWORKS['JEST'])?_0x4aefa5:_0x10f331,'automationSession':_0x6b80a5,'capabilities':_0x55c335,'executionContext':_0x4d5928};this[_0x528854(0xbc)][_0x528854(0xca)](_0x528854(0xc9)+util[_0x528854(0x88)](_0x6094a0));const _0x2b5b90=await GrpcClient[_0x528854(0xed)]()[_0x528854(0xa9)](_0x6094a0);this[_0x528854(0xbc)][_0x528854(0xca)](_0x528854(0x84)+_0x5bbdb9+(this[_0x528854(0xd3)]&&_0x656e76[_0x528854(0x97)](this[_0x528854(0xd3)][_0x528854(0xab)],FRAMEWORKS[_0x528854(0x86)])?',\x20test_identifier:\x20'+_0x7867f6:''));}}catch(_0x5b64a4){this[_0x528854(0xbc)]['error'](_0x528854(0xcf)+util[_0x528854(0x88)](_0x5b64a4));}}}TestHubModule['MODULE_NAME']='TestHubModule',TestHubModule['KEY_TEST_DEFERRED']=a85_0xc696ba(0x8a),module['exports']=TestHubModule;