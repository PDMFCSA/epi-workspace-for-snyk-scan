const a82_0x18be62=a82_0x4971;(function(_0x25819f,_0x3d9f09){const _0x48f197=a82_0x4971,_0x476515=_0x25819f();while(!![]){try{const _0x4de5d1=parseInt(_0x48f197(0x15c))/0x1+-parseInt(_0x48f197(0x152))/0x2+-parseInt(_0x48f197(0x135))/0x3+parseInt(_0x48f197(0x159))/0x4+parseInt(_0x48f197(0x134))/0x5+parseInt(_0x48f197(0x16b))/0x6*(-parseInt(_0x48f197(0x164))/0x7)+-parseInt(_0x48f197(0x14d))/0x8*(-parseInt(_0x48f197(0x143))/0x9);if(_0x4de5d1===_0x3d9f09)break;else _0x476515['push'](_0x476515['shift']());}catch(_0x599b98){_0x476515['push'](_0x476515['shift']());}}}(a82_0x3f20,0xa344e));function a82_0x3f20(){const _0x211b69=['CREATE','../state/hookState.js','testUuid','POST','../grpcClient.js','exports','executionContext','getInstance','SOjqU','frameworkVersion','getTestIdentifierFromTestInfo','testhubConfig','vXMGW','error','sendTestFrameworkEvent','length','name','../../../helpers/classLogger.js','getProcessId','getState','testFrameworkVersion','CUCUMBER','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','ENV_VAR','TEST','878620YADtGi','3075063iipFiW','getContext','bind','getThreadId','../framework/automationFramework.js','\x20hookState:\x20','BROWSERSTACK_TESTHUB_JWT','testInfo','../state/automationFrameworkState.js','registerObserver','../framework/testFramework.js','createTestFrameworkEventPayload','values','getTestUUID','1066491LSFmHq','testFrameworkEvent','platformIndex','version','../framework/constants/testFrameworkConstants.js','automationSession','stringify','onAllTestEvents','../browserstackCLI.js','test_deferred','152RloOzn','split','onPageCreate','fILJP','Error\x20in\x20sendTestFrameworkEvent:\x20','2127094HKeMcu','getModuleName','srMPz','matchHookRegex','MODULE_NAME','KEY_CAPABILITIES','getJwt','758760bIppuo','base64','TestHubModule','706482GGcWkH','getCurrentTestState','luZWf','onPageCreate\x20CBTSession\x20payload:\x20','uyoUN','from','logger','BROWSERSTACK_TESTHUB_UUID','91ssuiLr','instance','util','KEY_PLATFORM_INDEX','getId','./baseModule','JEST','261258eDAVHl','PNVdJ','env','../../../helpers/testhub/constants','getTestId','sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','Error\x20in\x20sending\x20CBTSession:\x20','format','testFrameworkState','forEach','../cliUtils.js','getBuildHashedId','../TestInfo.js','./playwrightDriverModule.js','testFrameworkData','getTestFramework','testFrameworkName','capabilities','getRef','keys','toString','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','page','debug','../state/testFrameworkState.js','hookState','KEY_HUB_URL','Nsrdg'];a82_0x3f20=function(){return _0x211b69;};return a82_0x3f20();}const util=require(a82_0x18be62(0x166)),BaseModule=require(a82_0x18be62(0x169)),{createClassLogger}=require(a82_0x18be62(0x12c)),AutomationFramework=require(a82_0x18be62(0x139)),AutomationFrameworkState=require(a82_0x18be62(0x13d)),HookState=require(a82_0x18be62(0x11c)),TestFramework=require(a82_0x18be62(0x13f)),TestFrameworkState=require(a82_0x18be62(0x117)),PlaywrightDriverModule=require(a82_0x18be62(0x10c)),TestFrameworkConstants=require(a82_0x18be62(0x147)),GrpcClient=require(a82_0x18be62(0x11f)),CLIUtils=require(a82_0x18be62(0x175)),TestInfo=require(a82_0x18be62(0x177)),testHubConstants=require(a82_0x18be62(0x16e)),{FRAMEWORKS}=require('../../../helpers/test-observability/constants.js'),BrowserstackCLI=require(a82_0x18be62(0x14b)),{getPlaywrightProvider}=require('../../../helpers/helper.js');class TestHubModule extends BaseModule{[a82_0x18be62(0x162)]=createClassLogger(a82_0x18be62(0x15b));constructor(_0x189e9f,_0x340555=null){const _0x416ca4=a82_0x18be62,_0x54cf20={};_0x54cf20[_0x416ca4(0x154)]='7|3|6|1|0|5|2|4',_0x54cf20[_0x416ca4(0x123)]='TestHubModule';const _0x111595=_0x54cf20,_0x2fa65d=_0x111595[_0x416ca4(0x154)][_0x416ca4(0x14e)]('|');let _0x3dd37a=0x0;while(!![]){switch(_0x2fa65d[_0x3dd37a++]){case'0':Object[_0x416ca4(0x141)](TestFrameworkState)['forEach'](_0x268626=>{const _0x386765=_0x416ca4;Object[_0x386765(0x141)](HookState)[_0x386765(0x174)](_0x54d3b3=>{const _0x154a0b=_0x386765;TestFramework[_0x154a0b(0x13e)](_0x268626,_0x54d3b3,this[_0x154a0b(0x14a)][_0x154a0b(0x137)](this));});});continue;case'1':AutomationFramework[_0x416ca4(0x13e)](AutomationFrameworkState[_0x416ca4(0x11b)],HookState[_0x416ca4(0x11e)],this[_0x416ca4(0x14f)][_0x416ca4(0x137)](this));continue;case'2':process['env'][testHubConstants[_0x416ca4(0x132)][_0x416ca4(0x163)]]=this[_0x416ca4(0x126)][_0x416ca4(0x176)]();continue;case'3':this[_0x416ca4(0x12b)]=_0x111595[_0x416ca4(0x123)];continue;case'4':BrowserstackCLI['O11yHashedID']=this[_0x416ca4(0x126)][_0x416ca4(0x176)]();continue;case'5':process[_0x416ca4(0x16d)][testHubConstants[_0x416ca4(0x132)][_0x416ca4(0x13b)]]=this[_0x416ca4(0x126)][_0x416ca4(0x158)]();continue;case'6':this['testhubConfig']=_0x189e9f;continue;case'7':super(_0x340555);continue;}break;}}[a82_0x18be62(0x153)](){const _0x36d56b=a82_0x18be62;return TestHubModule[_0x36d56b(0x156)];}[a82_0x18be62(0x14a)](_0x5eabf6){const _0x1711d3=a82_0x18be62,_0x2bf281={};_0x2bf281[_0x1711d3(0x150)]=function(_0x4d7e41,_0x7b50f0){return _0x4d7e41===_0x7b50f0;};const _0x4852c8=_0x2bf281,_0xdff2ea=_0x5eabf6[_0x1711d3(0x165)],_0x1d9cbd=_0xdff2ea[_0x1711d3(0x15d)]();(_0x4852c8['fILJP'](_0x1d9cbd,TestFrameworkState[_0x1711d3(0x133)])||CLIUtils[_0x1711d3(0x155)](_0x1d9cbd['toString']()['split']('.')[0x1]))&&this['sendTestFrameworkEvent'](_0x5eabf6);}async[a82_0x18be62(0x129)](_0x51d9c5){const _0x3facb7=a82_0x18be62,_0x447066={};_0x447066[_0x3facb7(0x127)]=function(_0x218a97,_0x1e9577){return _0x218a97===_0x1e9577;},_0x447066[_0x3facb7(0x11a)]=_0x3facb7(0x170);const _0x4c0494=_0x447066;try{const _0x57e31a=BrowserstackCLI[_0x3facb7(0x122)]()[_0x3facb7(0x10e)]()[_0x3facb7(0x140)](_0x51d9c5);if(!_0x57e31a||_0x4c0494['vXMGW'](Object[_0x3facb7(0x112)](_0x57e31a)[_0x3facb7(0x12a)],0x0)){this[_0x3facb7(0x162)][_0x3facb7(0x116)](_0x4c0494[_0x3facb7(0x11a)]);return;}const _0x5c71f1=await GrpcClient[_0x3facb7(0x122)]()[_0x3facb7(0x144)](_0x57e31a);this[_0x3facb7(0x162)][_0x3facb7(0x116)](_0x3facb7(0x131)+_0x57e31a[_0x3facb7(0x173)]+_0x3facb7(0x13a)+_0x57e31a[_0x3facb7(0x118)]);}catch(_0x3006d8){this['logger'][_0x3facb7(0x128)](_0x3facb7(0x151)+util[_0x3facb7(0x172)](_0x3006d8));}}async['onPageCreate'](_0x38a974){const _0xc1f045=a82_0x18be62,_0x3925d8={'uyoUN':function(_0x40575e,_0x3ba5ed){return _0x40575e===_0x3ba5ed;},'luZWf':function(_0x273285,_0xf33aed){return _0x273285(_0xf33aed);},'PNVdJ':_0xc1f045(0x15a)};try{if(_0x38a974[_0xc1f045(0x115)]){const _0x5f4341=this[_0xc1f045(0x16f)](_0x38a974);this['logger'][_0xc1f045(0x116)](_0xc1f045(0x114)+_0x5f4341);let _0xbc69cb;if(this[_0xc1f045(0x10d)]&&_0x3925d8[_0xc1f045(0x160)](this[_0xc1f045(0x10d)]['name'],FRAMEWORKS[_0xc1f045(0x130)]))_0xbc69cb=_0x5f4341;else this['testFrameworkData']&&_0x3925d8['uyoUN'](this[_0xc1f045(0x10d)][_0xc1f045(0x12b)],FRAMEWORKS[_0xc1f045(0x16a)])?_0xbc69cb=_0x5f4341:_0xbc69cb=TestInfo[_0xc1f045(0x125)](_0x38a974[_0xc1f045(0x13c)],_0x38a974[_0xc1f045(0x13c)]['retry']);const _0x2cb1ae=TestInfo[_0xc1f045(0x142)](_0xbc69cb),_0x679111=TestInfo['getTestDetails'](_0xbc69cb),_0x916441=_0x38a974[_0xc1f045(0x165)],_0x65641=AutomationFramework['getState'](_0x916441,PlaywrightDriverModule[_0xc1f045(0x167)]),_0x2a1abb=_0x679111[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]||this[_0xc1f045(0x10d)]&&this[_0xc1f045(0x10d)][_0xc1f045(0x12b)],_0x21c242=_0x679111[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]||this[_0xc1f045(0x10d)]&&this[_0xc1f045(0x10d)][_0xc1f045(0x146)],_0x35348d=TestFrameworkState[_0xc1f045(0x133)][_0xc1f045(0x113)]()['split']('.')[0x1],_0x56a6e2=HookState['POST'][_0xc1f045(0x113)]()[_0xc1f045(0x14e)]('.')[0x1],_0x44afd8=_0x916441[_0xc1f045(0x136)](),_0x296a1f=AutomationFramework[_0xc1f045(0x12e)](_0x916441,PlaywrightDriverModule[_0xc1f045(0x119)],''),_0x2da791={'provider':_0x3925d8[_0xc1f045(0x15e)](getPlaywrightProvider,_0x296a1f),'frameworkName':_0x916441['frameworkName'],'frameworkVersion':_0x916441[_0xc1f045(0x124)],'frameworkSessionId':AutomationFramework[_0xc1f045(0x12e)](_0x916441,PlaywrightDriverModule['KEY_SESSION_ID'],''),'ref':_0x916441[_0xc1f045(0x111)](),'hubUrl':_0x296a1f};let _0x5152c7=AutomationFramework['getState'](_0x916441,PlaywrightDriverModule[_0xc1f045(0x157)],{});_0x5152c7=Buffer[_0xc1f045(0x161)](JSON[_0xc1f045(0x149)](_0x5152c7))['toString'](_0x3925d8[_0xc1f045(0x16c)]);const _0x467900={'hash':_0x44afd8[_0xc1f045(0x168)](),'threadId':_0x44afd8[_0xc1f045(0x138)]()['toString'](),'processId':_0x44afd8[_0xc1f045(0x12d)]()[_0xc1f045(0x113)]()},_0x3ca9ab={};_0x3ca9ab[_0xc1f045(0x145)]=_0x65641,_0x3ca9ab[_0xc1f045(0x10f)]=_0x2a1abb,_0x3ca9ab[_0xc1f045(0x12f)]=_0x21c242,_0x3ca9ab[_0xc1f045(0x173)]=_0x35348d,_0x3ca9ab['testHookState']=_0x56a6e2,_0x3ca9ab[_0xc1f045(0x11d)]=_0x2cb1ae,_0x3ca9ab[_0xc1f045(0x148)]=_0x2da791,_0x3ca9ab[_0xc1f045(0x110)]=_0x5152c7,_0x3ca9ab[_0xc1f045(0x121)]=_0x467900;const _0xfd534c=_0x3ca9ab;this[_0xc1f045(0x162)][_0xc1f045(0x116)](_0xc1f045(0x15f)+util[_0xc1f045(0x172)](_0xfd534c));const _0xcdb2d2=await GrpcClient['getInstance']()['testSessionEvent'](_0xfd534c);this[_0xc1f045(0x162)][_0xc1f045(0x116)]('onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20'+_0x5f4341);}}catch(_0x1ff847){this[_0xc1f045(0x162)][_0xc1f045(0x128)](_0xc1f045(0x171)+util[_0xc1f045(0x172)](_0x1ff847));}}}function a82_0x4971(_0x4fa40f,_0x20857e){const _0x3f203c=a82_0x3f20();return a82_0x4971=function(_0x497175,_0x45e967){_0x497175=_0x497175-0x10c;let _0x59e736=_0x3f203c[_0x497175];return _0x59e736;},a82_0x4971(_0x4fa40f,_0x20857e);}TestHubModule[a82_0x18be62(0x156)]=a82_0x18be62(0x15b),TestHubModule['KEY_TEST_DEFERRED']=a82_0x18be62(0x14c),module[a82_0x18be62(0x120)]=TestHubModule;