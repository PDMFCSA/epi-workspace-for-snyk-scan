const a81_0x4273c8=a81_0x4de8;(function(_0x3b44ab,_0x565f49){const _0x2a4b6b=a81_0x4de8,_0x432cb7=_0x3b44ab();while(!![]){try{const _0x3aa511=parseInt(_0x2a4b6b(0x173))/0x1*(parseInt(_0x2a4b6b(0x1c0))/0x2)+-parseInt(_0x2a4b6b(0x189))/0x3*(-parseInt(_0x2a4b6b(0x172))/0x4)+-parseInt(_0x2a4b6b(0x18d))/0x5*(-parseInt(_0x2a4b6b(0x1a1))/0x6)+-parseInt(_0x2a4b6b(0x176))/0x7+parseInt(_0x2a4b6b(0x1c3))/0x8+-parseInt(_0x2a4b6b(0x199))/0x9*(-parseInt(_0x2a4b6b(0x193))/0xa)+-parseInt(_0x2a4b6b(0x175))/0xb*(parseInt(_0x2a4b6b(0x1c7))/0xc);if(_0x3aa511===_0x565f49)break;else _0x432cb7['push'](_0x432cb7['shift']());}catch(_0xf4c480){_0x432cb7['push'](_0x432cb7['shift']());}}}(a81_0x3525,0xc75db));function a81_0x3525(){const _0x3f396a=['fqaSv','onAllTestEvents','KEY_TEST_FRAMEWORK_VERSION','getTestId','KEY_TEST_FRAMEWORK_NAME','320116hvSDMy','26gQmcCo','getProcessId','2206017oPVOIV','10178175IbIjeA','KEY_TEST_DEFERRED','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','../framework/testFramework.js','logger','GwhFP','testFrameworkVersion','TestHubModule','version','bind','forEach','testFrameworkName','getTestIdentifierFromTestInfo','getTestFramework','../state/automationFrameworkState.js','values','../state/testFrameworkState.js','./playwrightDriverModule.js','getState','39TqZQue','MODULE_NAME','POST','./baseModule','3010DVKIpD','getInstance','KEY_SESSION_ID','../framework/constants/testFrameworkConstants.js','util','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','209950oaBgGs','oUJNX','O11yHashedID','VSUGa','from','toString','144FgIgYd','CREATE','../grpcClient.js','getContext','keys','automationSession','../browserstackCLI.js','../TestInfo.js','4092dRSjJz','KECNF','getId','testhubConfig','hookState','../../../helpers/helper.js','testFrameworkEvent','BROWSERSTACK_TESTHUB_JWT','../cliUtils.js','onPageCreate','format','env','matchHookRegex','length','testInfo','getThreadId','frameworkVersion','5|0|2|6|4|7|1|3','getBuildHashedId','Error\x20in\x20sendTestFrameworkEvent:\x20','test_deferred','registerObserver','frameworkName','getRef','ENV_VAR','platformIndex','error','\x20hookState:\x20','name','split','testFrameworkState','78776YfkWWs','testFrameworkData','KEY_HUB_URL','6908064gvHSny','sendTestFrameworkEvent','instance','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','84XYGAzc','TEST','../../../helpers/testhub/constants','LveKm','getModuleName','executionContext','debug','retry','EfRUw','VlquC','onPageCreate\x20CBTSession\x20payload:\x20','KEY_CAPABILITIES','../framework/automationFramework.js','base64','KEY_PLATFORM_INDEX'];a81_0x3525=function(){return _0x3f396a;};return a81_0x3525();}const util=require(a81_0x4273c8(0x191)),BaseModule=require(a81_0x4273c8(0x18c)),{createClassLogger}=require('../../../helpers/classLogger.js'),AutomationFramework=require(a81_0x4273c8(0x1d3)),AutomationFrameworkState=require(a81_0x4273c8(0x184)),HookState=require('../state/hookState.js'),TestFramework=require(a81_0x4273c8(0x179)),TestFrameworkState=require(a81_0x4273c8(0x186)),PlaywrightDriverModule=require(a81_0x4273c8(0x187)),TestFrameworkConstants=require(a81_0x4273c8(0x190)),GrpcClient=require(a81_0x4273c8(0x19b)),CLIUtils=require(a81_0x4273c8(0x1a9)),TestInfo=require(a81_0x4273c8(0x1a0)),testHubConstants=require(a81_0x4273c8(0x1c9)),{FRAMEWORKS}=require('../../../helpers/test-observability/constants.js'),BrowserstackCLI=require(a81_0x4273c8(0x19f)),{getPlaywrightProvider}=require(a81_0x4273c8(0x1a6));class TestHubModule extends BaseModule{['logger']=createClassLogger(a81_0x4273c8(0x17d));constructor(_0x2bbadd,_0x48516a=null){const _0x4f0b48=a81_0x4273c8,_0x4da593={};_0x4da593[_0x4f0b48(0x1cf)]=_0x4f0b48(0x1b2),_0x4da593[_0x4f0b48(0x1d0)]=_0x4f0b48(0x17d);const _0x35f5ee=_0x4da593,_0xfcc6b7=_0x35f5ee[_0x4f0b48(0x1cf)][_0x4f0b48(0x1be)]('|');let _0x4168e7=0x0;while(!![]){switch(_0xfcc6b7[_0x4168e7++]){case'0':this[_0x4f0b48(0x1bd)]=_0x35f5ee[_0x4f0b48(0x1d0)];continue;case'1':process['env'][testHubConstants[_0x4f0b48(0x1b9)]['BROWSERSTACK_TESTHUB_UUID']]=this[_0x4f0b48(0x1a4)][_0x4f0b48(0x1b3)]();continue;case'2':this['testhubConfig']=_0x2bbadd;continue;case'3':BrowserstackCLI[_0x4f0b48(0x195)]=this['testhubConfig'][_0x4f0b48(0x1b3)]();continue;case'4':Object[_0x4f0b48(0x185)](TestFrameworkState)['forEach'](_0x49f055=>{const _0x5d3b55=_0x4f0b48;Object[_0x5d3b55(0x185)](HookState)[_0x5d3b55(0x180)](_0x5e1ded=>{const _0x46623b=_0x5d3b55;TestFramework[_0x46623b(0x1b6)](_0x49f055,_0x5e1ded,this[_0x46623b(0x16e)][_0x46623b(0x17f)](this));});});continue;case'5':super(_0x48516a);continue;case'6':AutomationFramework[_0x4f0b48(0x1b6)](AutomationFrameworkState[_0x4f0b48(0x19a)],HookState[_0x4f0b48(0x18b)],this['onPageCreate'][_0x4f0b48(0x17f)](this));continue;case'7':process[_0x4f0b48(0x1ac)][testHubConstants[_0x4f0b48(0x1b9)][_0x4f0b48(0x1a8)]]=this[_0x4f0b48(0x1a4)]['getJwt']();continue;}break;}}[a81_0x4273c8(0x1cb)](){const _0x2888c7=a81_0x4273c8;return TestHubModule[_0x2888c7(0x18a)];}[a81_0x4273c8(0x16e)](_0x3c052f){const _0x561bc9=a81_0x4273c8,_0x329825={};_0x329825[_0x561bc9(0x196)]=function(_0x31a185,_0xe5ccbf){return _0x31a185===_0xe5ccbf;};const _0x5a2dbd=_0x329825,_0xb42e68=_0x3c052f[_0x561bc9(0x1c5)],_0x10e4c9=_0xb42e68['getCurrentTestState']();(_0x5a2dbd['VSUGa'](_0x10e4c9,TestFrameworkState[_0x561bc9(0x1c8)])||CLIUtils[_0x561bc9(0x1ad)](_0x10e4c9[_0x561bc9(0x198)]()[_0x561bc9(0x1be)]('.')[0x1]))&&this[_0x561bc9(0x1c4)](_0x3c052f);}async[a81_0x4273c8(0x1c4)](_0x44e670){const _0x564799=a81_0x4273c8,_0x43895f={};_0x43895f[_0x564799(0x1ca)]=function(_0x52c43c,_0x4ad551){return _0x52c43c===_0x4ad551;},_0x43895f['oUJNX']='sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event';const _0x362160=_0x43895f;try{const _0xda2234=BrowserstackCLI[_0x564799(0x18e)]()[_0x564799(0x183)]()['createTestFrameworkEventPayload'](_0x44e670);if(!_0xda2234||_0x362160[_0x564799(0x1ca)](Object[_0x564799(0x19d)](_0xda2234)[_0x564799(0x1ae)],0x0)){this[_0x564799(0x17a)][_0x564799(0x1cd)](_0x362160[_0x564799(0x194)]);return;}const _0x17f690=await GrpcClient[_0x564799(0x18e)]()[_0x564799(0x1a7)](_0xda2234);this[_0x564799(0x17a)][_0x564799(0x1cd)](_0x564799(0x178)+_0xda2234[_0x564799(0x1bf)]+_0x564799(0x1bc)+_0xda2234[_0x564799(0x1a5)]);}catch(_0x3912b2){this[_0x564799(0x17a)][_0x564799(0x1bb)](_0x564799(0x1b4)+util['format'](_0x3912b2));}}async[a81_0x4273c8(0x1aa)](_0x5aabfa){const _0x3ba32b=a81_0x4273c8,_0x5e730e={'fqaSv':function(_0x333fae,_0x4bcb2d){return _0x333fae===_0x4bcb2d;},'KECNF':function(_0x8c007a,_0x16383f){return _0x8c007a(_0x16383f);},'GwhFP':_0x3ba32b(0x1d4)};try{if(_0x5aabfa['page']){const _0x50776c=this[_0x3ba32b(0x170)](_0x5aabfa);this['logger']['debug'](_0x3ba32b(0x192)+_0x50776c);let _0x161b37;this[_0x3ba32b(0x1c1)]&&_0x5e730e[_0x3ba32b(0x1d6)](this[_0x3ba32b(0x1c1)]['name'],FRAMEWORKS['CUCUMBER'])?_0x161b37=_0x50776c:_0x161b37=TestInfo[_0x3ba32b(0x182)](_0x5aabfa[_0x3ba32b(0x1af)],_0x5aabfa['testInfo'][_0x3ba32b(0x1ce)]);const _0x467424=TestInfo['getTestUUID'](_0x161b37),_0x1a7571=TestInfo['getTestDetails'](_0x161b37),_0x1682b7=_0x5aabfa[_0x3ba32b(0x1c5)],_0x227762=AutomationFramework[_0x3ba32b(0x188)](_0x1682b7,PlaywrightDriverModule[_0x3ba32b(0x1d5)]),_0x7e6c0c=_0x1a7571[TestFrameworkConstants[_0x3ba32b(0x171)]]||this[_0x3ba32b(0x1c1)]&&this[_0x3ba32b(0x1c1)][_0x3ba32b(0x1bd)],_0x36f6c4=_0x1a7571[TestFrameworkConstants[_0x3ba32b(0x16f)]]||this['testFrameworkData']&&this[_0x3ba32b(0x1c1)][_0x3ba32b(0x17e)],_0x2c06cf=TestFrameworkState[_0x3ba32b(0x1c8)][_0x3ba32b(0x198)]()[_0x3ba32b(0x1be)]('.')[0x1],_0x3bb4ef=HookState[_0x3ba32b(0x18b)][_0x3ba32b(0x198)]()[_0x3ba32b(0x1be)]('.')[0x1],_0x330409=_0x1682b7[_0x3ba32b(0x19c)](),_0x29c2d1=AutomationFramework[_0x3ba32b(0x188)](_0x1682b7,PlaywrightDriverModule[_0x3ba32b(0x1c2)],''),_0x14b1e1={'provider':_0x5e730e[_0x3ba32b(0x1a2)](getPlaywrightProvider,_0x29c2d1),'frameworkName':_0x1682b7[_0x3ba32b(0x1b7)],'frameworkVersion':_0x1682b7[_0x3ba32b(0x1b1)],'frameworkSessionId':AutomationFramework[_0x3ba32b(0x188)](_0x1682b7,PlaywrightDriverModule[_0x3ba32b(0x18f)],''),'ref':_0x1682b7[_0x3ba32b(0x1b8)](),'hubUrl':_0x29c2d1};let _0x93cf37=AutomationFramework['getState'](_0x1682b7,PlaywrightDriverModule[_0x3ba32b(0x1d2)],{});_0x93cf37=Buffer[_0x3ba32b(0x197)](JSON['stringify'](_0x93cf37))['toString'](_0x5e730e[_0x3ba32b(0x17b)]);const _0x2df755={'hash':_0x330409[_0x3ba32b(0x1a3)](),'threadId':_0x330409[_0x3ba32b(0x1b0)]()['toString'](),'processId':_0x330409[_0x3ba32b(0x174)]()[_0x3ba32b(0x198)]()},_0x3745e4={};_0x3745e4[_0x3ba32b(0x1ba)]=_0x227762,_0x3745e4[_0x3ba32b(0x181)]=_0x7e6c0c,_0x3745e4[_0x3ba32b(0x17c)]=_0x36f6c4,_0x3745e4[_0x3ba32b(0x1bf)]=_0x2c06cf,_0x3745e4['testHookState']=_0x3bb4ef,_0x3745e4['testUuid']=_0x467424,_0x3745e4[_0x3ba32b(0x19e)]=_0x14b1e1,_0x3745e4['capabilities']=_0x93cf37,_0x3745e4[_0x3ba32b(0x1cc)]=_0x2df755;const _0x315c89=_0x3745e4;this[_0x3ba32b(0x17a)][_0x3ba32b(0x1cd)](_0x3ba32b(0x1d1)+util[_0x3ba32b(0x1ab)](_0x315c89));const _0x5322e3=await GrpcClient[_0x3ba32b(0x18e)]()['testSessionEvent'](_0x315c89);this[_0x3ba32b(0x17a)][_0x3ba32b(0x1cd)](_0x3ba32b(0x1c6)+_0x50776c);}}catch(_0x3749aa){this[_0x3ba32b(0x17a)]['error']('Error\x20in\x20sending\x20CBTSession:\x20'+util['format'](_0x3749aa));}}}function a81_0x4de8(_0x58c8ad,_0x2307be){const _0x3525a5=a81_0x3525();return a81_0x4de8=function(_0x4de8a4,_0x645657){_0x4de8a4=_0x4de8a4-0x16e;let _0x3ad3a4=_0x3525a5[_0x4de8a4];return _0x3ad3a4;},a81_0x4de8(_0x58c8ad,_0x2307be);}TestHubModule[a81_0x4273c8(0x18a)]=a81_0x4273c8(0x17d),TestHubModule[a81_0x4273c8(0x177)]=a81_0x4273c8(0x1b5),module['exports']=TestHubModule;