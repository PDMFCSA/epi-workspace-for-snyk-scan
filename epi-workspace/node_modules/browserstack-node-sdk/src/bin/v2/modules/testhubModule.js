const a76_0x7ed2=a76_0x5461;function a76_0xc0bf(){const _0x1fa4da=['env','getBuildHashedId','hookState','forEach','\x20testState:\x20','onAllTestEvents','KEY_TEST_FRAMEWORK_VERSION','BROWSERSTACK_TESTHUB_UUID','KEY_TEST_STARTED_AT','test','1533ozctXl','2040168rtDodv','toString','DKBpi','testSessionEvent','getState','automationSession','../TestInfo.js','MODULE_NAME','testhubConfig','BwlBA','../grpcClient.js','base64','getInstance','__workerDetails','130818pzxdwF','getId','../state/automationFrameworkState.js','2038981BiwIhA','../cliUtils.js','testInfo','onPageCreate','TEST','1212kGkBsr','getCurrentTestState','frameworkName','debug','eventJson','testFrameworkName','sendTestFrameworkEvent\x20testId:\x20','endedAt','APRss','from','3FqgcFp','Error\x20in\x20sendTestFrameworkEvent:\x20','getAllData','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','frameworkVersion','getModuleName','test_deferred','testUuid','testFrameworkEvent','40BxuBwY','rdixB','getCurrentHookState','error','63wdEVUm','platformIndex','../../../helpers/testhub/constants','TestHubModule','split','KEY_TEST_FRAMEWORK_NAME','stringify','onPageCreate\x20CBTSession\x20payload:\x20','BROWSERSTACK_TESTHUB_JWT','instance','../state/testFrameworkState.js','getTestUUID','240eiGPMS','642840WvOBaN','logger','KEY_HUB_URL','uuid','ineBg','name','executionContext','values','./playwrightDriverModule.js','ENV_VAR','getRef','getThreadId','page','../../../helpers/classLogger.js','testId','getProcessId','registerObserver','KEY_TEST_DEFERRED','getContext','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','matchHookRegex','../state/hookState.js','CREATE','KEY_CAPABILITIES','201926GvFgLT','\x20hookState:\x20','../browserstackCLI.js','parallelIndex','capabilities','util','testHookState','../../../helpers/helper.js','KEY_SESSION_ID','../framework/automationFramework.js','234610tmMkQG','exports'];a76_0xc0bf=function(){return _0x1fa4da;};return a76_0xc0bf();}(function(_0x2a71c3,_0x12c073){const _0x3461a7=a76_0x5461,_0x5c6063=_0x2a71c3();while(!![]){try{const _0x325563=-parseInt(_0x3461a7(0x1dc))/0x1*(parseInt(_0x3461a7(0x1a5))/0x2)+-parseInt(_0x3461a7(0x1bb))/0x3*(parseInt(_0x3461a7(0x1d2))/0x4)+parseInt(_0x3461a7(0x1e5))/0x5*(-parseInt(_0x3461a7(0x1ca))/0x6)+-parseInt(_0x3461a7(0x1cd))/0x7+-parseInt(_0x3461a7(0x1bc))/0x8+parseInt(_0x3461a7(0x1e9))/0x9*(parseInt(_0x3461a7(0x1af))/0xa)+parseInt(_0x3461a7(0x1f6))/0xb*(parseInt(_0x3461a7(0x1f5))/0xc);if(_0x325563===_0x12c073)break;else _0x5c6063['push'](_0x5c6063['shift']());}catch(_0x4996d5){_0x5c6063['push'](_0x5c6063['shift']());}}}(a76_0xc0bf,0x25bd1));const util=require(a76_0x7ed2(0x1aa)),BaseModule=require('./baseModule'),{createClassLogger}=require(a76_0x7ed2(0x19a)),AutomationFramework=require(a76_0x7ed2(0x1ae)),AutomationFrameworkState=require(a76_0x7ed2(0x1cc)),HookState=require(a76_0x7ed2(0x1a2)),TestFramework=require('../framework/testFramework.js'),TestFrameworkState=require(a76_0x7ed2(0x1f3)),PlaywrightDriverModule=require(a76_0x7ed2(0x1fe)),TestFrameworkConstants=require('../framework/constants/testFrameworkConstants.js'),GrpcClient=require(a76_0x7ed2(0x1c6)),CLIUtils=require(a76_0x7ed2(0x1ce)),TestInfo=require(a76_0x7ed2(0x1c2)),testHubConstants=require(a76_0x7ed2(0x1eb)),BrowserstackCLI=require(a76_0x7ed2(0x1a7)),{getPlaywrightProvider}=require(a76_0x7ed2(0x1ac));function a76_0x5461(_0x239efe,_0x17028a){const _0xc0bfad=a76_0xc0bf();return a76_0x5461=function(_0x5461c2,_0x4fe957){_0x5461c2=_0x5461c2-0x197;let _0x32f004=_0xc0bfad[_0x5461c2];return _0x32f004;},a76_0x5461(_0x239efe,_0x17028a);}class TestHubModule extends BaseModule{[a76_0x7ed2(0x1f7)]=createClassLogger(a76_0x7ed2(0x1ec));constructor(_0x5e3361){const _0x7bb734=a76_0x7ed2,_0x595638={};_0x595638[_0x7bb734(0x1da)]='2|6|0|3|4|5|1|7',_0x595638[_0x7bb734(0x1c5)]='TestHubModule';const _0x2e926d=_0x595638,_0x325ac0=_0x2e926d[_0x7bb734(0x1da)][_0x7bb734(0x1ed)]('|');let _0x54c82b=0x0;while(!![]){switch(_0x325ac0[_0x54c82b++]){case'0':this[_0x7bb734(0x1c4)]=_0x5e3361;continue;case'1':process[_0x7bb734(0x1b1)][testHubConstants[_0x7bb734(0x1ff)][_0x7bb734(0x1b8)]]=this[_0x7bb734(0x1c4)][_0x7bb734(0x1b2)]();continue;case'2':super();continue;case'3':AutomationFramework[_0x7bb734(0x19d)](AutomationFrameworkState[_0x7bb734(0x1a3)],HookState['POST'],this[_0x7bb734(0x1d0)]['bind'](this));continue;case'4':Object[_0x7bb734(0x1fd)](TestFrameworkState)[_0x7bb734(0x1b4)](_0x44dee0=>{const _0x404e50=_0x7bb734;Object[_0x404e50(0x1fd)](HookState)['forEach'](_0x30f497=>{const _0x4a1653=_0x404e50;TestFramework['registerObserver'](_0x44dee0,_0x30f497,this[_0x4a1653(0x1b6)]['bind'](this));});});continue;case'5':process[_0x7bb734(0x1b1)][testHubConstants['ENV_VAR'][_0x7bb734(0x1f1)]]=this['testhubConfig']['getJwt']();continue;case'6':this[_0x7bb734(0x1fb)]=_0x2e926d[_0x7bb734(0x1c5)];continue;case'7':BrowserstackCLI['O11yHashedID']=this['testhubConfig'][_0x7bb734(0x1b2)]();continue;}break;}}[a76_0x7ed2(0x1e1)](){const _0x4dace6=a76_0x7ed2;return TestHubModule[_0x4dace6(0x1c3)];}[a76_0x7ed2(0x1b6)](_0x276d51){const _0x1933d7=a76_0x7ed2,_0xcf0fe6={};_0xcf0fe6['ihnva']=function(_0x140d56,_0x27e81b){return _0x140d56===_0x27e81b;};const _0x420af0=_0xcf0fe6,_0x1dcc67=_0x276d51[_0x1933d7(0x1f2)],_0x31caf2=_0x1dcc67['getCurrentTestState']();(_0x420af0['ihnva'](_0x31caf2,TestFrameworkState[_0x1933d7(0x1d1)])||CLIUtils[_0x1933d7(0x1a1)](_0x31caf2[_0x1933d7(0x1bd)]()[_0x1933d7(0x1ed)]('.')[0x1]))&&this['sendTestFrameworkEvent'](_0x276d51);}async['sendTestFrameworkEvent'](_0x131af1){const _0x49247d=a76_0x7ed2,_0xf22f4={};_0xf22f4[_0x49247d(0x1be)]=_0x49247d(0x1c7);const _0x4de0dc=_0xf22f4;try{const _0x113dca=_0x131af1[_0x49247d(0x1ba)]['id'],_0x5ea0b2=_0x131af1[_0x49247d(0x1f2)],_0x4d35be=_0x5ea0b2[_0x49247d(0x19f)](),_0x5656fe=_0x5ea0b2[_0x49247d(0x1de)]()['get'](_0x113dca);this['logger'][_0x49247d(0x1d5)](_0x49247d(0x1d8)+_0x113dca);const {[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x5c0006='',[TestFrameworkConstants[_0x49247d(0x1b7)]]:_0x2332d3='',[TestFrameworkConstants[_0x49247d(0x1b9)]]:_0x2cd5a9='',[TestFrameworkConstants['KEY_TEST_ENDED_AT']]:_0x4e0673=''}=_0x5656fe,_0x4ab22e=_0x5ea0b2[_0x49247d(0x1d3)]()[_0x49247d(0x1bd)]()[_0x49247d(0x1ed)]('.')[0x1],_0x2222f2=_0x5ea0b2[_0x49247d(0x1e7)]()[_0x49247d(0x1bd)]()[_0x49247d(0x1ed)]('.')[0x1],_0x241a08=global?.[_0x49247d(0x1c9)]?.['workerInfo']?.[_0x49247d(0x1a8)];;const _0x52d2d0=_0x5ea0b2[_0x49247d(0x197)](),_0x8e082e=Buffer[_0x49247d(0x1db)](JSON[_0x49247d(0x1ef)](_0x5656fe))[_0x49247d(0x1bd)](_0x4de0dc['DKBpi']),_0x412e8d={'hash':_0x4d35be[_0x49247d(0x1cb)](),'threadId':_0x4d35be[_0x49247d(0x198)]()[_0x49247d(0x1bd)](),'processId':_0x4d35be['getProcessId']()[_0x49247d(0x1bd)]()},_0x31f414={};_0x31f414[_0x49247d(0x1ea)]=_0x241a08,_0x31f414[_0x49247d(0x1d7)]=_0x5c0006,_0x31f414['testFrameworkVersion']=_0x2332d3,_0x31f414['testFrameworkState']=_0x4ab22e,_0x31f414[_0x49247d(0x1b3)]=_0x2222f2,_0x31f414['startedAt']=_0x2cd5a9,_0x31f414[_0x49247d(0x1d9)]=_0x4e0673,_0x31f414[_0x49247d(0x1f9)]=_0x52d2d0,_0x31f414[_0x49247d(0x1d6)]=_0x8e082e,_0x31f414[_0x49247d(0x1fc)]=_0x412e8d;const _0x5b76de=_0x31f414,_0x4909de=await GrpcClient[_0x49247d(0x1c8)]()[_0x49247d(0x1e4)](_0x5b76de);this[_0x49247d(0x1f7)][_0x49247d(0x1d5)](_0x49247d(0x1df)+_0x113dca+_0x49247d(0x1b5)+_0x4ab22e+_0x49247d(0x1a6)+_0x2222f2);}catch(_0xb98f5a){this[_0x49247d(0x1f7)][_0x49247d(0x1e8)](_0x49247d(0x1dd)+util['format'](_0xb98f5a));}}async[a76_0x7ed2(0x1d0)](_0x55f7b5){const _0x88bd0f=a76_0x7ed2,_0x4c80d5={'rdixB':function(_0x5b1542,_0xb52918){return _0x5b1542(_0xb52918);},'ineBg':_0x88bd0f(0x1c7)};try{if(_0x55f7b5[_0x88bd0f(0x199)]){const _0x3c4277=_0x55f7b5[_0x88bd0f(0x1cf)][_0x88bd0f(0x19b)];this[_0x88bd0f(0x1f7)][_0x88bd0f(0x1d5)](_0x88bd0f(0x1a0)+_0x3c4277);const _0x3180fe=TestInfo[_0x88bd0f(0x1f4)](_0x3c4277),_0x544d29=TestInfo['getTestDetails'](_0x3c4277),_0x2ff675=_0x55f7b5[_0x88bd0f(0x1f2)],_0x2855b1=AutomationFramework['getState'](_0x2ff675,PlaywrightDriverModule['KEY_PLATFORM_INDEX']),_0x2beba6=_0x544d29[TestFrameworkConstants[_0x88bd0f(0x1ee)]],_0x2a1c4c=_0x544d29[TestFrameworkConstants[_0x88bd0f(0x1b7)]],_0x4b2aa2=TestFrameworkState[_0x88bd0f(0x1d1)][_0x88bd0f(0x1bd)]()[_0x88bd0f(0x1ed)]('.')[0x1],_0x339e6b=HookState['POST'][_0x88bd0f(0x1bd)]()['split']('.')[0x1],_0x238043=_0x2ff675['getContext'](),_0x213e59=AutomationFramework['getState'](_0x2ff675,PlaywrightDriverModule[_0x88bd0f(0x1f8)],''),_0x5cfe6e={'provider':_0x4c80d5[_0x88bd0f(0x1e6)](getPlaywrightProvider,_0x213e59),'frameworkName':_0x2ff675[_0x88bd0f(0x1d4)],'frameworkVersion':_0x2ff675[_0x88bd0f(0x1e0)],'frameworkSessionId':AutomationFramework[_0x88bd0f(0x1c0)](_0x2ff675,PlaywrightDriverModule[_0x88bd0f(0x1ad)],''),'ref':_0x2ff675[_0x88bd0f(0x197)](),'hubUrl':_0x213e59};let _0xf070ad=AutomationFramework[_0x88bd0f(0x1c0)](_0x2ff675,PlaywrightDriverModule[_0x88bd0f(0x1a4)],{});_0xf070ad=Buffer[_0x88bd0f(0x1db)](JSON[_0x88bd0f(0x1ef)](_0xf070ad))[_0x88bd0f(0x1bd)](_0x4c80d5[_0x88bd0f(0x1fa)]);const _0x175dd4={'hash':_0x238043['getId'](),'threadId':_0x238043[_0x88bd0f(0x198)]()[_0x88bd0f(0x1bd)](),'processId':_0x238043[_0x88bd0f(0x19c)]()['toString']()},_0x2e6d2f={};_0x2e6d2f[_0x88bd0f(0x1ea)]=_0x2855b1,_0x2e6d2f[_0x88bd0f(0x1d7)]=_0x2beba6,_0x2e6d2f['testFrameworkVersion']=_0x2a1c4c,_0x2e6d2f['testFrameworkState']=_0x4b2aa2,_0x2e6d2f[_0x88bd0f(0x1ab)]=_0x339e6b,_0x2e6d2f[_0x88bd0f(0x1e3)]=_0x3180fe,_0x2e6d2f[_0x88bd0f(0x1c1)]=_0x5cfe6e,_0x2e6d2f[_0x88bd0f(0x1a9)]=_0xf070ad,_0x2e6d2f['executionContext']=_0x175dd4;const _0x2d2cdb=_0x2e6d2f;this[_0x88bd0f(0x1f7)][_0x88bd0f(0x1d5)](_0x88bd0f(0x1f0)+util['format'](_0x2d2cdb));const _0x39604b=await GrpcClient[_0x88bd0f(0x1c8)]()[_0x88bd0f(0x1bf)](_0x2d2cdb);this['logger'][_0x88bd0f(0x1d5)]('onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20'+_0x3c4277);}}catch(_0x4d23b3){this['logger'][_0x88bd0f(0x1e8)]('Error\x20in\x20sending\x20CBTSession:\x20'+util['format'](_0x4d23b3));}}}TestHubModule[a76_0x7ed2(0x1c3)]=a76_0x7ed2(0x1ec),TestHubModule[a76_0x7ed2(0x19e)]=a76_0x7ed2(0x1e2),module[a76_0x7ed2(0x1b0)]=TestHubModule;