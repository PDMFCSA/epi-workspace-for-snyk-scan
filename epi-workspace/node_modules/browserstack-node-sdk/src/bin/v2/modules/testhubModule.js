const a76_0x1df3fb=a76_0x2eee;(function(_0x49f281,_0x2fe74a){const _0x1a4179=a76_0x2eee,_0x17e69f=_0x49f281();while(!![]){try{const _0x5d0de0=-parseInt(_0x1a4179(0xc8))/0x1+parseInt(_0x1a4179(0x104))/0x2*(parseInt(_0x1a4179(0xfc))/0x3)+parseInt(_0x1a4179(0x10f))/0x4*(parseInt(_0x1a4179(0xc0))/0x5)+-parseInt(_0x1a4179(0xe7))/0x6+-parseInt(_0x1a4179(0xf1))/0x7*(-parseInt(_0x1a4179(0xb6))/0x8)+parseInt(_0x1a4179(0xe9))/0x9+parseInt(_0x1a4179(0xba))/0xa*(-parseInt(_0x1a4179(0xf7))/0xb);if(_0x5d0de0===_0x2fe74a)break;else _0x17e69f['push'](_0x17e69f['shift']());}catch(_0x3fb6bf){_0x17e69f['push'](_0x17e69f['shift']());}}}(a76_0x5514,0xc7ef4));const util=require(a76_0x1df3fb(0xea)),BaseModule=require(a76_0x1df3fb(0x10b)),{createClassLogger}=require(a76_0x1df3fb(0xe1)),AutomationFramework=require(a76_0x1df3fb(0xe0)),AutomationFrameworkState=require(a76_0x1df3fb(0x10a)),HookState=require('../state/hookState.js'),TestFramework=require(a76_0x1df3fb(0xb4)),TestFrameworkState=require(a76_0x1df3fb(0xd9)),PlaywrightDriverModule=require(a76_0x1df3fb(0xf4)),TestFrameworkConstants=require('../framework/constants/testFrameworkConstants.js'),GrpcClient=require('../grpcClient.js'),CLIUtils=require(a76_0x1df3fb(0xcd)),TestInfo=require(a76_0x1df3fb(0xd0)),testHubConstants=require('../../../helpers/testhub/constants'),BrowserstackCLI=require(a76_0x1df3fb(0xcc)),{getPlaywrightProvider}=require(a76_0x1df3fb(0xbd));function a76_0x2eee(_0x3ab280,_0x145902){const _0x551474=a76_0x5514();return a76_0x2eee=function(_0x2eee72,_0xd27fc6){_0x2eee72=_0x2eee72-0xb2;let _0x91b5c5=_0x551474[_0x2eee72];return _0x91b5c5;},a76_0x2eee(_0x3ab280,_0x145902);}function a76_0x5514(){const _0x5ef83d=['../state/automationFrameworkState.js','./baseModule','logger','POST','getInstance','9976OfpTpD','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','workerInfo','capabilities','toString','automationSession','ENV_VAR','from','getTestUUID','KEY_TEST_DEFERRED','startedAt','../framework/testFramework.js','\x20testState:\x20','8AooyQb','exports','eFeZZ','getThreadId','2580jiLmEv','lUIlG','KEY_TEST_ENDED_AT','../../../helpers/helper.js','KEY_SESSION_ID','onAllTestEvents','210SpJEeE','testInfo','TEST','getId','getTestDetails','testFrameworkName','forEach','registerObserver','1614110FkuNpQ','values','getCurrentTestState','KEY_PLATFORM_INDEX','../browserstackCLI.js','../cliUtils.js','env','stringify','../TestInfo.js','format','bind','TestHubModule','KEY_TEST_STARTED_AT','getProcessId','KEY_HUB_URL','testSessionEvent','sendTestFrameworkEvent','../state/testFrameworkState.js','getBuildHashedId','KEY_CAPABILITIES','BROWSERSTACK_TESTHUB_JWT','onPageCreate','Error\x20in\x20sendTestFrameworkEvent:\x20','getContext','../framework/automationFramework.js','../../../helpers/classLogger.js','kzLhR','MODULE_NAME','eventJson','matchHookRegex','getAllData','1374936wmzcgN','testFrameworkState','10148058bgnOgR','util','getState','O11yHashedID','Error\x20in\x20sending\x20CBTSession:\x20','BROWSERSTACK_TESTHUB_UUID','test_deferred','KEY_TEST_FRAMEWORK_NAME','10955658LTFzVx','testFrameworkVersion','KEY_TEST_FRAMEWORK_VERSION','./playwrightDriverModule.js','uuid','split','23199wTpKSb','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','test','hookState','getRef','613374SHdDrK','testhubConfig','mhYZj','\x20hookState:\x20','platformIndex','2|4|5|0|3|7|1|6','executionContext','frameworkName','4fFRkzd','base64','testFrameworkEvent','debug','error','instance'];a76_0x5514=function(){return _0x5ef83d;};return a76_0x5514();}class TestHubModule extends BaseModule{[a76_0x1df3fb(0x10c)]=createClassLogger(a76_0x1df3fb(0xd3));constructor(_0x395cff){const _0x2cc525=a76_0x1df3fb,_0x35f22f={};_0x35f22f[_0x2cc525(0xfe)]=_0x2cc525(0x101),_0x35f22f['kzLhR']=_0x2cc525(0xd3);const _0x3914f8=_0x35f22f,_0x3f851f=_0x3914f8[_0x2cc525(0xfe)][_0x2cc525(0xf6)]('|');let _0x551293=0x0;while(!![]){switch(_0x3f851f[_0x551293++]){case'0':AutomationFramework['registerObserver'](AutomationFrameworkState['CREATE'],HookState[_0x2cc525(0x10d)],this['onPageCreate'][_0x2cc525(0xd2)](this));continue;case'1':process[_0x2cc525(0xce)][testHubConstants['ENV_VAR'][_0x2cc525(0xee)]]=this[_0x2cc525(0xfd)]['getBuildHashedId']();continue;case'2':super();continue;case'3':Object[_0x2cc525(0xc9)](TestFrameworkState)['forEach'](_0x491d51=>{const _0x3194c0=_0x2cc525;Object[_0x3194c0(0xc9)](HookState)[_0x3194c0(0xc6)](_0x428928=>{const _0x36f56f=_0x3194c0;TestFramework[_0x36f56f(0xc7)](_0x491d51,_0x428928,this[_0x36f56f(0xbf)][_0x36f56f(0xd2)](this));});});continue;case'4':this['name']=_0x3914f8[_0x2cc525(0xe2)];continue;case'5':this[_0x2cc525(0xfd)]=_0x395cff;continue;case'6':BrowserstackCLI[_0x2cc525(0xec)]=this['testhubConfig'][_0x2cc525(0xda)]();continue;case'7':process[_0x2cc525(0xce)][testHubConstants[_0x2cc525(0x115)][_0x2cc525(0xdc)]]=this[_0x2cc525(0xfd)]['getJwt']();continue;}break;}}['getModuleName'](){const _0x2db114=a76_0x1df3fb;return TestHubModule[_0x2db114(0xe3)];}[a76_0x1df3fb(0xbf)](_0x4940be){const _0x202a40=a76_0x1df3fb,_0x3bab63={};_0x3bab63['lUIlG']=function(_0x514e39,_0x3e6fea){return _0x514e39===_0x3e6fea;};const _0x104ac0=_0x3bab63,_0x557429=_0x4940be[_0x202a40(0x109)],_0x14d3cc=_0x557429[_0x202a40(0xca)]();(_0x104ac0[_0x202a40(0xbb)](_0x14d3cc,TestFrameworkState[_0x202a40(0xc2)])||CLIUtils[_0x202a40(0xe5)](_0x14d3cc['toString']()[_0x202a40(0xf6)]('.')[0x1]))&&this[_0x202a40(0xd8)](_0x4940be);}async['sendTestFrameworkEvent'](_0x5b5720){const _0xfa1bac=a76_0x1df3fb,_0x241f3b={};_0x241f3b['eFeZZ']=_0xfa1bac(0x105);const _0x4baead=_0x241f3b;try{const _0x472712=_0x5b5720[_0xfa1bac(0xf9)]['id'],_0x3af2ae=_0x5b5720[_0xfa1bac(0x109)],_0x65c68f=_0x3af2ae[_0xfa1bac(0xdf)](),_0x36eb4b=_0x3af2ae[_0xfa1bac(0xe6)]()['get'](_0x472712);this[_0xfa1bac(0x10c)][_0xfa1bac(0x107)]('sendTestFrameworkEvent\x20testId:\x20'+_0x472712);const {[TestFrameworkConstants[_0xfa1bac(0xf0)]]:_0x2550d1='',[TestFrameworkConstants[_0xfa1bac(0xf3)]]:_0x2d1291='',[TestFrameworkConstants[_0xfa1bac(0xd4)]]:_0x3f353f='',[TestFrameworkConstants[_0xfa1bac(0xbc)]]:_0x167cb1=''}=_0x36eb4b,_0x51eadf=_0x3af2ae[_0xfa1bac(0xca)]()['toString']()['split']('.')[0x1],_0xef152=_0x3af2ae['getCurrentHookState']()[_0xfa1bac(0x113)]()['split']('.')[0x1],_0x49673b=global?.['__workerDetails']?.[_0xfa1bac(0x111)]?.['parallelIndex'];;const _0x1f43a3=_0x3af2ae[_0xfa1bac(0xfb)](),_0x5c20e0=Buffer[_0xfa1bac(0x116)](JSON[_0xfa1bac(0xcf)](_0x36eb4b))[_0xfa1bac(0x113)](_0x4baead[_0xfa1bac(0xb8)]),_0x2f7a79={'hash':_0x65c68f[_0xfa1bac(0xc3)](),'threadId':_0x65c68f[_0xfa1bac(0xb9)]()[_0xfa1bac(0x113)](),'processId':_0x65c68f['getProcessId']()[_0xfa1bac(0x113)]()},_0x4d0914={};_0x4d0914['platformIndex']=_0x49673b,_0x4d0914[_0xfa1bac(0xc5)]=_0x2550d1,_0x4d0914[_0xfa1bac(0xf2)]=_0x2d1291,_0x4d0914[_0xfa1bac(0xe8)]=_0x51eadf,_0x4d0914[_0xfa1bac(0xfa)]=_0xef152,_0x4d0914[_0xfa1bac(0xb3)]=_0x3f353f,_0x4d0914['endedAt']=_0x167cb1,_0x4d0914[_0xfa1bac(0xf5)]=_0x1f43a3,_0x4d0914[_0xfa1bac(0xe4)]=_0x5c20e0,_0x4d0914[_0xfa1bac(0x102)]=_0x2f7a79;const _0x50e72d=_0x4d0914,_0x285da4=await GrpcClient[_0xfa1bac(0x10e)]()[_0xfa1bac(0x106)](_0x50e72d);this['logger'][_0xfa1bac(0x107)](_0xfa1bac(0xf8)+_0x472712+_0xfa1bac(0xb5)+_0x51eadf+_0xfa1bac(0xff)+_0xef152);}catch(_0x1b73a9){this[_0xfa1bac(0x10c)][_0xfa1bac(0x108)](_0xfa1bac(0xde)+util['format'](_0x1b73a9));}}async[a76_0x1df3fb(0xdd)](_0x1274c0){const _0x170cc9=a76_0x1df3fb,_0x912c7c={'uIjLe':function(_0xf1a086,_0x1de251){return _0xf1a086(_0x1de251);},'dkrlz':_0x170cc9(0x105)};try{if(_0x1274c0['page']){const _0x4f3ae8=_0x1274c0[_0x170cc9(0xc1)]['testId'];this['logger']['debug']('onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20'+_0x4f3ae8);const _0x2a462e=TestInfo[_0x170cc9(0x117)](_0x4f3ae8),_0x1320b0=TestInfo[_0x170cc9(0xc4)](_0x4f3ae8),_0x2160fb=_0x1274c0['instance'],_0x1a9ae0=AutomationFramework[_0x170cc9(0xeb)](_0x2160fb,PlaywrightDriverModule[_0x170cc9(0xcb)]),_0x82a961=_0x1320b0[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']],_0x36b49a=_0x1320b0[TestFrameworkConstants[_0x170cc9(0xf3)]],_0x345fa2=TestFrameworkState['TEST']['toString']()['split']('.')[0x1],_0x562c66=HookState[_0x170cc9(0x10d)][_0x170cc9(0x113)]()[_0x170cc9(0xf6)]('.')[0x1],_0x35765e=_0x2160fb[_0x170cc9(0xdf)](),_0x269a78=AutomationFramework[_0x170cc9(0xeb)](_0x2160fb,PlaywrightDriverModule[_0x170cc9(0xd6)],''),_0x20c0df={'provider':_0x912c7c['uIjLe'](getPlaywrightProvider,_0x269a78),'frameworkName':_0x2160fb[_0x170cc9(0x103)],'frameworkVersion':_0x2160fb['frameworkVersion'],'frameworkSessionId':AutomationFramework[_0x170cc9(0xeb)](_0x2160fb,PlaywrightDriverModule[_0x170cc9(0xbe)],''),'ref':_0x2160fb['getRef'](),'hubUrl':_0x269a78};let _0x3a5391=AutomationFramework[_0x170cc9(0xeb)](_0x2160fb,PlaywrightDriverModule[_0x170cc9(0xdb)],{});_0x3a5391=Buffer['from'](JSON['stringify'](_0x3a5391))['toString'](_0x912c7c['dkrlz']);const _0x2e6c52={'hash':_0x35765e[_0x170cc9(0xc3)](),'threadId':_0x35765e[_0x170cc9(0xb9)]()[_0x170cc9(0x113)](),'processId':_0x35765e[_0x170cc9(0xd5)]()['toString']()},_0x2289d8={};_0x2289d8[_0x170cc9(0x100)]=_0x1a9ae0,_0x2289d8[_0x170cc9(0xc5)]=_0x82a961,_0x2289d8['testFrameworkVersion']=_0x36b49a,_0x2289d8[_0x170cc9(0xe8)]=_0x345fa2,_0x2289d8['testHookState']=_0x562c66,_0x2289d8['testUuid']=_0x2a462e,_0x2289d8[_0x170cc9(0x114)]=_0x20c0df,_0x2289d8[_0x170cc9(0x112)]=_0x3a5391,_0x2289d8[_0x170cc9(0x102)]=_0x2e6c52;const _0x39e6b3=_0x2289d8;this[_0x170cc9(0x10c)][_0x170cc9(0x107)]('onPageCreate\x20CBTSession\x20payload:\x20'+util['format'](_0x39e6b3));const _0x401ff6=await GrpcClient['getInstance']()[_0x170cc9(0xd7)](_0x39e6b3);this[_0x170cc9(0x10c)][_0x170cc9(0x107)](_0x170cc9(0x110)+_0x4f3ae8);}}catch(_0x317cca){this['logger'][_0x170cc9(0x108)](_0x170cc9(0xed)+util[_0x170cc9(0xd1)](_0x317cca));}}}TestHubModule[a76_0x1df3fb(0xe3)]=a76_0x1df3fb(0xd3),TestHubModule[a76_0x1df3fb(0xb2)]=a76_0x1df3fb(0xef),module[a76_0x1df3fb(0xb7)]=TestHubModule;