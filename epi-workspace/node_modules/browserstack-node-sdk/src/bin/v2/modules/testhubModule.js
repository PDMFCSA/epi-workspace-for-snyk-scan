function a81_0x1a71(){const _0x3105ee=['base64','getInstance','O11yHashedID','1383080qdueCB','createTestFrameworkEventPayload','getTestIdentifierFromTestInfo','getJwt','name','ENV_VAR','KEY_PLATFORM_INDEX','../TestInfo.js','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','761952oaDpkL','754821rllXJl','debug','getState','automationSession','getContext','27JxGiHc','../state/testFrameworkState.js','format','../framework/constants/testFrameworkConstants.js','KEY_TEST_FRAMEWORK_NAME','fgZAB','onAllTestEvents','2CPBcln','registerObserver','from','getTestDetails','../../../helpers/testhub/constants','GgTLp','exports','nOQlC','page','../state/automationFrameworkState.js','\x20hookState:\x20','./playwrightDriverModule.js','onPageCreate','hookState','frameworkVersion','testUuid','../cliUtils.js','KEY_HUB_URL','161AiCQNt','7|5|1|3|2|0|4|6','TEST','../../../helpers/test-observability/constants.js','KEY_CAPABILITIES','sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event','rUXMl','../framework/testFramework.js','bind','executionContext','1034296hGFJLR','error','testHookState','Error\x20in\x20sendTestFrameworkEvent:\x20','testSessionEvent','Oppxi','toString','hmePv','getModuleName','../grpcClient.js','CfvGB','2454DeDpij','BROWSERSTACK_TESTHUB_UUID','util','testInfo','sendTestFrameworkEvent','test_deferred','testFrameworkName','MODULE_NAME','testhubConfig','env','../../../helpers/classLogger.js','CREATE','getCurrentTestState','Error\x20in\x20sending\x20CBTSession:\x20','POST','matchHookRegex','stringify','743375aamhSM','split','forEach','testFrameworkState','../../../helpers/helper.js','KEY_TEST_DEFERRED','frameworkName','getTestFramework','BROWSERSTACK_TESTHUB_JWT','instance','TestHubModule','logger','testFrameworkData','getBuildHashedId','211651wCkYnZ'];a81_0x1a71=function(){return _0x3105ee;};return a81_0x1a71();}const a81_0x5c6ee7=a81_0xf203;(function(_0x2ecfe9,_0x53f6f9){const _0x303c60=a81_0xf203,_0x407c0c=_0x2ecfe9();while(!![]){try{const _0x2ca614=-parseInt(_0x303c60(0x1a1))/0x1+parseInt(_0x303c60(0x15b))/0x2*(-parseInt(_0x303c60(0x14f))/0x3)+parseInt(_0x303c60(0x14e))/0x4+-parseInt(_0x303c60(0x193))/0x5+parseInt(_0x303c60(0x182))/0x6*(parseInt(_0x303c60(0x16d))/0x7)+parseInt(_0x303c60(0x177))/0x8+parseInt(_0x303c60(0x154))/0x9*(parseInt(_0x303c60(0x145))/0xa);if(_0x2ca614===_0x53f6f9)break;else _0x407c0c['push'](_0x407c0c['shift']());}catch(_0x32c7b3){_0x407c0c['push'](_0x407c0c['shift']());}}}(a81_0x1a71,0x2044d));const util=require(a81_0x5c6ee7(0x184)),BaseModule=require('./baseModule'),{createClassLogger}=require(a81_0x5c6ee7(0x18c)),AutomationFramework=require('../framework/automationFramework.js'),AutomationFrameworkState=require(a81_0x5c6ee7(0x164)),HookState=require('../state/hookState.js'),TestFramework=require(a81_0x5c6ee7(0x174)),TestFrameworkState=require(a81_0x5c6ee7(0x155)),PlaywrightDriverModule=require(a81_0x5c6ee7(0x166)),TestFrameworkConstants=require(a81_0x5c6ee7(0x157)),GrpcClient=require(a81_0x5c6ee7(0x180)),CLIUtils=require(a81_0x5c6ee7(0x16b)),TestInfo=require(a81_0x5c6ee7(0x14c)),testHubConstants=require(a81_0x5c6ee7(0x15f)),{FRAMEWORKS}=require(a81_0x5c6ee7(0x170)),BrowserstackCLI=require('../browserstackCLI.js'),{getPlaywrightProvider}=require(a81_0x5c6ee7(0x197));function a81_0xf203(_0x482862,_0x300f19){const _0x1a7127=a81_0x1a71();return a81_0xf203=function(_0xf20309,_0x254a08){_0xf20309=_0xf20309-0x143;let _0x2932dd=_0x1a7127[_0xf20309];return _0x2932dd;},a81_0xf203(_0x482862,_0x300f19);}class TestHubModule extends BaseModule{[a81_0x5c6ee7(0x19e)]=createClassLogger('TestHubModule');constructor(_0x55a8e3,_0x11eedc=null){const _0x49bbef=a81_0x5c6ee7,_0x5e899b={};_0x5e899b[_0x49bbef(0x17e)]=_0x49bbef(0x16e),_0x5e899b[_0x49bbef(0x181)]=_0x49bbef(0x19d);const _0x2f0d3c=_0x5e899b,_0x44e86a=_0x2f0d3c[_0x49bbef(0x17e)][_0x49bbef(0x194)]('|');let _0x1a7264=0x0;while(!![]){switch(_0x44e86a[_0x1a7264++]){case'0':process[_0x49bbef(0x18b)][testHubConstants['ENV_VAR'][_0x49bbef(0x19b)]]=this['testhubConfig'][_0x49bbef(0x148)]();continue;case'1':this[_0x49bbef(0x18a)]=_0x55a8e3;continue;case'2':Object['values'](TestFrameworkState)[_0x49bbef(0x195)](_0x46e51c=>{const _0x45e93a=_0x49bbef;Object['values'](HookState)[_0x45e93a(0x195)](_0x52383b=>{const _0x43b04a=_0x45e93a;TestFramework[_0x43b04a(0x15c)](_0x46e51c,_0x52383b,this[_0x43b04a(0x15a)][_0x43b04a(0x175)](this));});});continue;case'3':AutomationFramework[_0x49bbef(0x15c)](AutomationFrameworkState[_0x49bbef(0x18d)],HookState[_0x49bbef(0x190)],this[_0x49bbef(0x167)][_0x49bbef(0x175)](this));continue;case'4':process[_0x49bbef(0x18b)][testHubConstants[_0x49bbef(0x14a)][_0x49bbef(0x183)]]=this[_0x49bbef(0x18a)][_0x49bbef(0x1a0)]();continue;case'5':this[_0x49bbef(0x149)]=_0x2f0d3c[_0x49bbef(0x181)];continue;case'6':BrowserstackCLI[_0x49bbef(0x144)]=this[_0x49bbef(0x18a)]['getBuildHashedId']();continue;case'7':super(_0x11eedc);continue;}break;}}[a81_0x5c6ee7(0x17f)](){const _0x1f1ecf=a81_0x5c6ee7;return TestHubModule[_0x1f1ecf(0x189)];}[a81_0x5c6ee7(0x15a)](_0x4f1b0d){const _0x1ef59b=a81_0x5c6ee7,_0x395284={};_0x395284[_0x1ef59b(0x17c)]=function(_0x1de3c9,_0x4b2638){return _0x1de3c9===_0x4b2638;};const _0x300816=_0x395284,_0x43ffce=_0x4f1b0d[_0x1ef59b(0x19c)],_0x51472d=_0x43ffce[_0x1ef59b(0x18e)]();(_0x300816[_0x1ef59b(0x17c)](_0x51472d,TestFrameworkState[_0x1ef59b(0x16f)])||CLIUtils[_0x1ef59b(0x191)](_0x51472d[_0x1ef59b(0x17d)]()[_0x1ef59b(0x194)]('.')[0x1]))&&this[_0x1ef59b(0x186)](_0x4f1b0d);}async[a81_0x5c6ee7(0x186)](_0x5822de){const _0x19bc2a=a81_0x5c6ee7,_0x3b9300={};_0x3b9300[_0x19bc2a(0x162)]=function(_0x3493c0,_0x2f6618){return _0x3493c0===_0x2f6618;},_0x3b9300[_0x19bc2a(0x160)]=_0x19bc2a(0x172);const _0x4a108e=_0x3b9300;try{const _0x52aba4=BrowserstackCLI[_0x19bc2a(0x143)]()[_0x19bc2a(0x19a)]()[_0x19bc2a(0x146)](_0x5822de);if(!_0x52aba4||_0x4a108e[_0x19bc2a(0x162)](Object['keys'](_0x52aba4)['length'],0x0)){this['logger']['debug'](_0x4a108e['GgTLp']);return;}const _0x55853e=await GrpcClient[_0x19bc2a(0x143)]()['testFrameworkEvent'](_0x52aba4);this[_0x19bc2a(0x19e)][_0x19bc2a(0x150)](_0x19bc2a(0x14d)+_0x52aba4[_0x19bc2a(0x196)]+_0x19bc2a(0x165)+_0x52aba4[_0x19bc2a(0x168)]);}catch(_0x8a2e6e){this['logger'][_0x19bc2a(0x178)](_0x19bc2a(0x17a)+util[_0x19bc2a(0x156)](_0x8a2e6e));}}async['onPageCreate'](_0x204139){const _0x47c401=a81_0x5c6ee7,_0x1b8f78={'rUXMl':function(_0x19a8da,_0x570702){return _0x19a8da===_0x570702;},'fgZAB':function(_0x407ba0,_0x2ad797){return _0x407ba0(_0x2ad797);},'RaAOH':_0x47c401(0x1a2)};try{if(_0x204139[_0x47c401(0x163)]){const _0x220b8a=this['getTestId'](_0x204139);this[_0x47c401(0x19e)]['debug']('onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20'+_0x220b8a);let _0x21dfbe;this[_0x47c401(0x19f)]&&_0x1b8f78[_0x47c401(0x173)](this[_0x47c401(0x19f)][_0x47c401(0x149)],FRAMEWORKS['CUCUMBER'])?_0x21dfbe=_0x220b8a:_0x21dfbe=TestInfo[_0x47c401(0x147)](_0x204139[_0x47c401(0x185)],_0x204139[_0x47c401(0x185)]['retry']);const _0x13ab9e=TestInfo['getTestUUID'](_0x21dfbe),_0x3610ae=TestInfo[_0x47c401(0x15e)](_0x21dfbe),_0x1c22f9=_0x204139['instance'],_0x1878ab=AutomationFramework['getState'](_0x1c22f9,PlaywrightDriverModule[_0x47c401(0x14b)]),_0x10fda3=_0x3610ae[TestFrameworkConstants[_0x47c401(0x158)]]||this[_0x47c401(0x19f)]&&this[_0x47c401(0x19f)][_0x47c401(0x149)],_0x142723=_0x3610ae[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]||this[_0x47c401(0x19f)]&&this[_0x47c401(0x19f)]['version'],_0x4bd5c4=TestFrameworkState[_0x47c401(0x16f)][_0x47c401(0x17d)]()[_0x47c401(0x194)]('.')[0x1],_0x48e3aa=HookState[_0x47c401(0x190)][_0x47c401(0x17d)]()['split']('.')[0x1],_0x1a5656=_0x1c22f9[_0x47c401(0x153)](),_0xbb6df8=AutomationFramework[_0x47c401(0x151)](_0x1c22f9,PlaywrightDriverModule[_0x47c401(0x16c)],''),_0x435ec1={'provider':_0x1b8f78[_0x47c401(0x159)](getPlaywrightProvider,_0xbb6df8),'frameworkName':_0x1c22f9[_0x47c401(0x199)],'frameworkVersion':_0x1c22f9[_0x47c401(0x169)],'frameworkSessionId':AutomationFramework[_0x47c401(0x151)](_0x1c22f9,PlaywrightDriverModule['KEY_SESSION_ID'],''),'ref':_0x1c22f9['getRef'](),'hubUrl':_0xbb6df8};let _0x14b35f=AutomationFramework[_0x47c401(0x151)](_0x1c22f9,PlaywrightDriverModule[_0x47c401(0x171)],{});_0x14b35f=Buffer[_0x47c401(0x15d)](JSON[_0x47c401(0x192)](_0x14b35f))[_0x47c401(0x17d)](_0x1b8f78['RaAOH']);const _0x535ed0={'hash':_0x1a5656['getId'](),'threadId':_0x1a5656['getThreadId']()[_0x47c401(0x17d)](),'processId':_0x1a5656['getProcessId']()['toString']()},_0x15b912={};_0x15b912['platformIndex']=_0x1878ab,_0x15b912[_0x47c401(0x188)]=_0x10fda3,_0x15b912['testFrameworkVersion']=_0x142723,_0x15b912[_0x47c401(0x196)]=_0x4bd5c4,_0x15b912[_0x47c401(0x179)]=_0x48e3aa,_0x15b912[_0x47c401(0x16a)]=_0x13ab9e,_0x15b912[_0x47c401(0x152)]=_0x435ec1,_0x15b912['capabilities']=_0x14b35f,_0x15b912[_0x47c401(0x176)]=_0x535ed0;const _0x10d172=_0x15b912;this[_0x47c401(0x19e)][_0x47c401(0x150)]('onPageCreate\x20CBTSession\x20payload:\x20'+util[_0x47c401(0x156)](_0x10d172));const _0x3e358c=await GrpcClient[_0x47c401(0x143)]()[_0x47c401(0x17b)](_0x10d172);this['logger'][_0x47c401(0x150)]('onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20'+_0x220b8a);}}catch(_0x56c7d8){this[_0x47c401(0x19e)][_0x47c401(0x178)](_0x47c401(0x18f)+util['format'](_0x56c7d8));}}}TestHubModule[a81_0x5c6ee7(0x189)]=a81_0x5c6ee7(0x19d),TestHubModule[a81_0x5c6ee7(0x198)]=a81_0x5c6ee7(0x187),module[a81_0x5c6ee7(0x161)]=TestHubModule;