const a74_0xa75d6d=a74_0x1c24;(function(_0x480069,_0x41e467){const _0xad63db=a74_0x1c24,_0x31343a=_0x480069();while(!![]){try{const _0x7aed44=parseInt(_0xad63db(0x19b))/0x1*(-parseInt(_0xad63db(0x1ab))/0x2)+parseInt(_0xad63db(0x18d))/0x3+parseInt(_0xad63db(0x1a2))/0x4*(parseInt(_0xad63db(0x1b9))/0x5)+-parseInt(_0xad63db(0x16a))/0x6*(-parseInt(_0xad63db(0x1bc))/0x7)+-parseInt(_0xad63db(0x173))/0x8*(parseInt(_0xad63db(0x1a6))/0x9)+-parseInt(_0xad63db(0x1b6))/0xa*(parseInt(_0xad63db(0x189))/0xb)+-parseInt(_0xad63db(0x1c3))/0xc*(-parseInt(_0xad63db(0x19f))/0xd);if(_0x7aed44===_0x41e467)break;else _0x31343a['push'](_0x31343a['shift']());}catch(_0x4146c7){_0x31343a['push'](_0x31343a['shift']());}}}(a74_0x1e36,0xb2145));const util=require(a74_0xa75d6d(0x1c0)),BaseModule=require(a74_0xa75d6d(0x1b3)),{createClassLogger}=require(a74_0xa75d6d(0x195)),AutomationFramework=require(a74_0xa75d6d(0x198)),AutomationFrameworkState=require(a74_0xa75d6d(0x1a8)),HookState=require(a74_0xa75d6d(0x176)),TestFramework=require('../framework/testFramework.js'),TestFrameworkState=require('../state/testFrameworkState.js'),PlaywrightDriverModule=require(a74_0xa75d6d(0x162)),TestFrameworkConstants=require(a74_0xa75d6d(0x182)),GrpcClient=require(a74_0xa75d6d(0x17a)),CLIUtils=require(a74_0xa75d6d(0x184)),TestInfo=require(a74_0xa75d6d(0x1a0)),testHubConstants=require(a74_0xa75d6d(0x17f)),BrowserstackCLI=require(a74_0xa75d6d(0x1c4)),{getPlaywrightProvider}=require(a74_0xa75d6d(0x160));function a74_0x1e36(){const _0x11167a=['../cliUtils.js','KEY_PLATFORM_INDEX','BROWSERSTACK_TESTHUB_UUID','sendTestFrameworkEvent\x20testId:\x20','eventJson','4994ucuFJw','logger','stringify','KEY_TEST_DEFERRED','2526822BAdqhX','Error\x20in\x20sendTestFrameworkEvent:\x20','KEY_TEST_STARTED_AT','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','getCurrentTestState','getRef','wXGTQ','testFrameworkState','../../../helpers/classLogger.js','capabilities','page','../framework/automationFramework.js','values','testFrameworkVersion','537RGUiWC','\x20hookState:\x20','error','base64','64987UHVUvz','../TestInfo.js','endedAt','100fzJWST','debug','KEY_HUB_URL','testFrameworkName','11981997oqdAlz','testhubConfig','../state/automationFrameworkState.js','parallelIndex','MODULE_NAME','1718fzZfmv','KEY_CAPABILITIES','testFrameworkEvent','sendTestFrameworkEvent','getId','TEST','instance','split','./baseModule','frameworkName','getInstance','14920UgQBOm','getContext','testSessionEvent','51075hFlYev','getBuildHashedId','testUuid','7328713DsCzEu','registerObserver','KEY_SESSION_ID','aLJIs','util','yXUQz','__workerDetails','2532nJJcAj','../browserstackCLI.js','format','getThreadId','frameworkVersion','env','../../../helpers/helper.js','name','./playwrightDriverModule.js','O11yHashedID','iRrBI','uuid','platformIndex','get','test','workerInfo','6WHtoJu','ENV_VAR','uJHoc','getJwt','toString','KEY_TEST_ENDED_AT','from','forEach','KEY_TEST_FRAMEWORK_NAME','8JFNpub','testInfo','getTestDetails','../state/hookState.js','KEY_TEST_FRAMEWORK_VERSION','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','getProcessId','../grpcClient.js','getTestUUID','testHookState','POST','executionContext','../../../helpers/testhub/constants','testId','getState','../framework/constants/testFrameworkConstants.js','TestHubModule'];a74_0x1e36=function(){return _0x11167a;};return a74_0x1e36();}function a74_0x1c24(_0x307a75,_0x503592){const _0x1e3612=a74_0x1e36();return a74_0x1c24=function(_0x1c2448,_0x5f27b9){_0x1c2448=_0x1c2448-0x15c;let _0x5e75e4=_0x1e3612[_0x1c2448];return _0x5e75e4;},a74_0x1c24(_0x307a75,_0x503592);}class TestHubModule extends BaseModule{['logger']=createClassLogger('TestHubModule');constructor(_0x19c8d2){const _0x55d9a6=a74_0xa75d6d,_0x1eebab={};_0x1eebab[_0x55d9a6(0x16c)]='7|3|4|6|2|1|5|0',_0x1eebab[_0x55d9a6(0x193)]='TestHubModule';const _0x1b89a0=_0x1eebab,_0x385b8b=_0x1b89a0[_0x55d9a6(0x16c)][_0x55d9a6(0x1b2)]('|');let _0x183f6b=0x0;while(!![]){switch(_0x385b8b[_0x183f6b++]){case'0':BrowserstackCLI[_0x55d9a6(0x163)]=this[_0x55d9a6(0x1a7)][_0x55d9a6(0x1ba)]();continue;case'1':process['env'][testHubConstants[_0x55d9a6(0x16b)]['BROWSERSTACK_TESTHUB_JWT']]=this[_0x55d9a6(0x1a7)][_0x55d9a6(0x16d)]();continue;case'2':Object[_0x55d9a6(0x199)](TestFrameworkState)[_0x55d9a6(0x171)](_0x40d5bc=>{Object['values'](HookState)['forEach'](_0x37d6ed=>{const _0xe77c06=a74_0x1c24;TestFramework[_0xe77c06(0x1bd)](_0x40d5bc,_0x37d6ed,this['onAllTestEvents']['bind'](this));});});continue;case'3':this[_0x55d9a6(0x161)]=_0x1b89a0[_0x55d9a6(0x193)];continue;case'4':this[_0x55d9a6(0x1a7)]=_0x19c8d2;continue;case'5':process[_0x55d9a6(0x15f)][testHubConstants['ENV_VAR'][_0x55d9a6(0x186)]]=this['testhubConfig'][_0x55d9a6(0x1ba)]();continue;case'6':AutomationFramework[_0x55d9a6(0x1bd)](AutomationFrameworkState['CREATE'],HookState[_0x55d9a6(0x17d)],this['onPageCreate']['bind'](this));continue;case'7':super();continue;}break;}}['getModuleName'](){const _0x549a24=a74_0xa75d6d;return TestHubModule[_0x549a24(0x1aa)];}['onAllTestEvents'](_0x1abf1e){const _0x42ccad=a74_0xa75d6d,_0x366b86={};_0x366b86[_0x42ccad(0x1c1)]=function(_0x14e3b6,_0x1c38e5){return _0x14e3b6===_0x1c38e5;};const _0x4fa6df=_0x366b86,_0x2f27c3=_0x1abf1e[_0x42ccad(0x1b1)],_0x2326d5=_0x2f27c3[_0x42ccad(0x191)]();(_0x4fa6df[_0x42ccad(0x1c1)](_0x2326d5,TestFrameworkState[_0x42ccad(0x1b0)])||CLIUtils['matchHookRegex'](_0x2326d5['toString']()[_0x42ccad(0x1b2)]('.')[0x1]))&&this['sendTestFrameworkEvent'](_0x1abf1e);}async[a74_0xa75d6d(0x1ae)](_0xc8c18b){const _0x1db6c6=a74_0xa75d6d,_0x23b6db={};_0x23b6db[_0x1db6c6(0x1bf)]=_0x1db6c6(0x19e);const _0x206f3e=_0x23b6db;try{const _0x181f78=_0xc8c18b[_0x1db6c6(0x168)]['id'],_0x512418=_0xc8c18b[_0x1db6c6(0x1b1)],_0x7a9229=_0x512418[_0x1db6c6(0x1b7)](),_0x1d66d3=_0x512418['getAllData']()[_0x1db6c6(0x167)](_0x181f78);this[_0x1db6c6(0x18a)][_0x1db6c6(0x1a3)](_0x1db6c6(0x187)+_0x181f78);const {[TestFrameworkConstants[_0x1db6c6(0x172)]]:_0x53e0c4='',[TestFrameworkConstants[_0x1db6c6(0x177)]]:_0x2a2e90='',[TestFrameworkConstants[_0x1db6c6(0x18f)]]:_0x455180='',[TestFrameworkConstants[_0x1db6c6(0x16f)]]:_0x46c766=''}=_0x1d66d3,_0x66da26=_0x512418['getCurrentTestState']()[_0x1db6c6(0x16e)]()[_0x1db6c6(0x1b2)]('.')[0x1],_0x35bc31=_0x512418['getCurrentHookState']()['toString']()[_0x1db6c6(0x1b2)]('.')[0x1],_0x1c5495=global?.[_0x1db6c6(0x1c2)]?.[_0x1db6c6(0x169)]?.[_0x1db6c6(0x1a9)];;const _0x4cc702=_0x512418[_0x1db6c6(0x192)](),_0x23f5c7=Buffer[_0x1db6c6(0x170)](JSON[_0x1db6c6(0x18b)](_0x1d66d3))[_0x1db6c6(0x16e)](_0x206f3e['aLJIs']),_0x5865a2={'hash':_0x7a9229[_0x1db6c6(0x1af)](),'threadId':_0x7a9229[_0x1db6c6(0x15d)]()[_0x1db6c6(0x16e)](),'processId':_0x7a9229[_0x1db6c6(0x179)]()[_0x1db6c6(0x16e)]()},_0x310e39={};_0x310e39['platformIndex']=_0x1c5495,_0x310e39['testFrameworkName']=_0x53e0c4,_0x310e39[_0x1db6c6(0x19a)]=_0x2a2e90,_0x310e39[_0x1db6c6(0x194)]=_0x66da26,_0x310e39['hookState']=_0x35bc31,_0x310e39['startedAt']=_0x455180,_0x310e39[_0x1db6c6(0x1a1)]=_0x46c766,_0x310e39[_0x1db6c6(0x165)]=_0x4cc702,_0x310e39[_0x1db6c6(0x188)]=_0x23f5c7,_0x310e39[_0x1db6c6(0x17e)]=_0x5865a2;const _0x20720c=_0x310e39,_0x52d8ec=await GrpcClient[_0x1db6c6(0x1b5)]()[_0x1db6c6(0x1ad)](_0x20720c);this['logger'][_0x1db6c6(0x1a3)](_0x1db6c6(0x178)+_0x181f78+'\x20testState:\x20'+_0x66da26+_0x1db6c6(0x19c)+_0x35bc31);}catch(_0x9d5082){this['logger'][_0x1db6c6(0x19d)](_0x1db6c6(0x18e)+util[_0x1db6c6(0x15c)](_0x9d5082));}}async['onPageCreate'](_0x40689c){const _0x1b7a19=a74_0xa75d6d,_0x36199f={'iRrBI':function(_0x95812b,_0x3e835f){return _0x95812b(_0x3e835f);},'sYyGb':_0x1b7a19(0x19e)};try{if(_0x40689c[_0x1b7a19(0x197)]){const _0x3e2b45=_0x40689c[_0x1b7a19(0x174)][_0x1b7a19(0x180)];this[_0x1b7a19(0x18a)]['debug'](_0x1b7a19(0x190)+_0x3e2b45);const _0x204031=TestInfo[_0x1b7a19(0x17b)](_0x3e2b45),_0x1b61dc=TestInfo[_0x1b7a19(0x175)](_0x3e2b45),_0x23d4f3=_0x40689c[_0x1b7a19(0x1b1)],_0x27ccd5=AutomationFramework['getState'](_0x23d4f3,PlaywrightDriverModule[_0x1b7a19(0x185)]),_0x54d5e6=_0x1b61dc[TestFrameworkConstants[_0x1b7a19(0x172)]],_0x149bff=_0x1b61dc[TestFrameworkConstants[_0x1b7a19(0x177)]],_0x13bbfb=TestFrameworkState['TEST'][_0x1b7a19(0x16e)]()[_0x1b7a19(0x1b2)]('.')[0x1],_0x47e859=HookState[_0x1b7a19(0x17d)]['toString']()[_0x1b7a19(0x1b2)]('.')[0x1],_0x2a8045=_0x23d4f3[_0x1b7a19(0x1b7)](),_0x34a9ab=AutomationFramework['getState'](_0x23d4f3,PlaywrightDriverModule[_0x1b7a19(0x1a4)],''),_0x3dd1cf={'provider':_0x36199f[_0x1b7a19(0x164)](getPlaywrightProvider,_0x34a9ab),'frameworkName':_0x23d4f3[_0x1b7a19(0x1b4)],'frameworkVersion':_0x23d4f3[_0x1b7a19(0x15e)],'frameworkSessionId':AutomationFramework['getState'](_0x23d4f3,PlaywrightDriverModule[_0x1b7a19(0x1be)],''),'ref':_0x23d4f3['getRef'](),'hubUrl':_0x34a9ab};let _0x467efe=AutomationFramework[_0x1b7a19(0x181)](_0x23d4f3,PlaywrightDriverModule[_0x1b7a19(0x1ac)],{});_0x467efe=Buffer['from'](JSON[_0x1b7a19(0x18b)](_0x467efe))[_0x1b7a19(0x16e)](_0x36199f['sYyGb']);const _0xa4bf59={'hash':_0x2a8045[_0x1b7a19(0x1af)](),'threadId':_0x2a8045[_0x1b7a19(0x15d)]()[_0x1b7a19(0x16e)](),'processId':_0x2a8045[_0x1b7a19(0x179)]()['toString']()},_0x65fdf6={};_0x65fdf6[_0x1b7a19(0x166)]=_0x27ccd5,_0x65fdf6[_0x1b7a19(0x1a5)]=_0x54d5e6,_0x65fdf6[_0x1b7a19(0x19a)]=_0x149bff,_0x65fdf6[_0x1b7a19(0x194)]=_0x13bbfb,_0x65fdf6[_0x1b7a19(0x17c)]=_0x47e859,_0x65fdf6[_0x1b7a19(0x1bb)]=_0x204031,_0x65fdf6['automationSession']=_0x3dd1cf,_0x65fdf6[_0x1b7a19(0x196)]=_0x467efe,_0x65fdf6[_0x1b7a19(0x17e)]=_0xa4bf59;const _0x28f7e1=_0x65fdf6;this['logger'][_0x1b7a19(0x1a3)]('onPageCreate\x20CBTSession\x20payload:\x20'+util[_0x1b7a19(0x15c)](_0x28f7e1));const _0x8f000b=await GrpcClient[_0x1b7a19(0x1b5)]()[_0x1b7a19(0x1b8)](_0x28f7e1);this[_0x1b7a19(0x18a)]['debug']('onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20'+_0x3e2b45);}}catch(_0x519f72){this[_0x1b7a19(0x18a)][_0x1b7a19(0x19d)]('Error\x20in\x20sending\x20CBTSession:\x20'+util[_0x1b7a19(0x15c)](_0x519f72));}}}TestHubModule[a74_0xa75d6d(0x1aa)]=a74_0xa75d6d(0x183),TestHubModule[a74_0xa75d6d(0x18c)]='test_deferred',module['exports']=TestHubModule;