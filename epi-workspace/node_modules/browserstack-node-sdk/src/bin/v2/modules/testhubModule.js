function a78_0x3498(_0x28b293,_0x1491c5){const _0x297256=a78_0x2972();return a78_0x3498=function(_0x349807,_0x24173e){_0x349807=_0x349807-0xd5;let _0x4c4bae=_0x297256[_0x349807];return _0x4c4bae;},a78_0x3498(_0x28b293,_0x1491c5);}const a78_0x2fcff0=a78_0x3498;(function(_0x4cd734,_0x1421e6){const _0x4c88fc=a78_0x3498,_0x1b215b=_0x4cd734();while(!![]){try{const _0x2eef91=-parseInt(_0x4c88fc(0x112))/0x1+parseInt(_0x4c88fc(0x122))/0x2*(parseInt(_0x4c88fc(0x126))/0x3)+parseInt(_0x4c88fc(0x132))/0x4*(-parseInt(_0x4c88fc(0x128))/0x5)+parseInt(_0x4c88fc(0xde))/0x6+parseInt(_0x4c88fc(0xe3))/0x7+-parseInt(_0x4c88fc(0xd9))/0x8+-parseInt(_0x4c88fc(0xfd))/0x9*(-parseInt(_0x4c88fc(0x104))/0xa);if(_0x2eef91===_0x1421e6)break;else _0x1b215b['push'](_0x1b215b['shift']());}catch(_0x5345bd){_0x1b215b['push'](_0x1b215b['shift']());}}}(a78_0x2972,0x4abf0));function a78_0x2972(){const _0x1349f3=['testhubConfig','getThreadId','3nfXCmD','4|1|7|0|3|5|6|2','5TsQGZd','forEach','hbgiZ','getBuildHashedId','TEST','getCurrentHookState','Error\x20in\x20sending\x20CBTSession:\x20','bind','KEY_PLATFORM_INDEX','\x20hookState:\x20','1358612vXfylk','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','debug','from','toString','result','onAllTestEvents','getId','getJwt','KEY_TEST_ENDED_AT','retry','getProcessId','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','1518576kyKibK','KEY_TEST_FRAMEWORK_NAME','KEY_CAPABILITIES','TestHubModule','../framework/constants/testFrameworkConstants.js','285312QUaAhG','split','POST','stringify','testFrameworkEvent','2420488qEzrXU','endedAt','getState','startedAt','getCurrentTestState','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','testFrameworkVersion','getTestUUID','logger','test','getContext','../browserstackCLI.js','../TestInfo.js','ASTxa','error','frameworkVersion','ysRfD','testId','MecYg','../../../helpers/classLogger.js','page','platformIndex','instance','ENV_VAR','frameworkName','KEY_TEST_STARTED_AT','7207578lnSyyO','sendTestFrameworkEvent','KEY_TEST_DEFERRED','format','getTestIdentifierFromTestInfo','BROWSERSTACK_TESTHUB_JWT','workerInfo','10RbcAWx','exports','KEY_TEST_FRAMEWORK_VERSION','executionContext','onPageCreate\x20CBTSession\x20payload:\x20','getRef','KEY_SESSION_ID','testFrameworkName','getTestDetails','./baseModule','MODULE_NAME','testFrameworkState','BROWSERSTACK_TESTHUB_UUID','values','515774djKOns','env','util','../framework/automationFramework.js','getInstance','name','getModuleName','registerObserver','testInfo','eventJson','Error\x20in\x20sendTestFrameworkEvent:\x20','test_deferred','testHookState','base64','CREATE','../state/automationFrameworkState.js','314462xSbqPr','sendTestFrameworkEvent\x20testId:\x20'];a78_0x2972=function(){return _0x1349f3;};return a78_0x2972();}const util=require(a78_0x2fcff0(0x114)),BaseModule=require(a78_0x2fcff0(0x10d)),{createClassLogger}=require(a78_0x2fcff0(0xf6)),AutomationFramework=require(a78_0x2fcff0(0x115)),AutomationFrameworkState=require(a78_0x2fcff0(0x121)),HookState=require('../state/hookState.js'),TestFramework=require('../framework/testFramework.js'),TestFrameworkState=require('../state/testFrameworkState.js'),PlaywrightDriverModule=require('./playwrightDriverModule.js'),TestFrameworkConstants=require(a78_0x2fcff0(0xdd)),GrpcClient=require('../grpcClient.js'),CLIUtils=require('../cliUtils.js'),TestInfo=require(a78_0x2fcff0(0xef)),testHubConstants=require('../../../helpers/testhub/constants'),BrowserstackCLI=require(a78_0x2fcff0(0xee)),{getPlaywrightProvider}=require('../../../helpers/helper.js'),{getTestRunIdentifier}=require('../../playwright/reporter/pwUtils.js');class TestHubModule extends BaseModule{[a78_0x2fcff0(0xeb)]=createClassLogger(a78_0x2fcff0(0xdc));constructor(_0x5a488e){const _0x129230=a78_0x2fcff0,_0x3b39d9={};_0x3b39d9[_0x129230(0xf5)]=_0x129230(0x127),_0x3b39d9[_0x129230(0x12a)]='TestHubModule';const _0x2b6aee=_0x3b39d9,_0x3689b0=_0x2b6aee['MecYg'][_0x129230(0xdf)]('|');let _0x58280a=0x0;while(!![]){switch(_0x3689b0[_0x58280a++]){case'0':AutomationFramework[_0x129230(0x119)](AutomationFrameworkState[_0x129230(0x120)],HookState[_0x129230(0xe0)],this['onPageCreate']['bind'](this));continue;case'1':this[_0x129230(0x117)]=_0x2b6aee['hbgiZ'];continue;case'2':BrowserstackCLI['O11yHashedID']=this[_0x129230(0x124)]['getBuildHashedId']();continue;case'3':Object[_0x129230(0x111)](TestFrameworkState)[_0x129230(0x129)](_0x284535=>{Object['values'](HookState)['forEach'](_0x16a241=>{const _0x275edd=a78_0x3498;TestFramework[_0x275edd(0x119)](_0x284535,_0x16a241,this[_0x275edd(0x138)][_0x275edd(0x12f)](this));});});continue;case'4':super();continue;case'5':process[_0x129230(0x113)][testHubConstants[_0x129230(0xfa)][_0x129230(0x102)]]=this['testhubConfig'][_0x129230(0x13a)]();continue;case'6':process[_0x129230(0x113)][testHubConstants[_0x129230(0xfa)][_0x129230(0x110)]]=this['testhubConfig'][_0x129230(0x12b)]();continue;case'7':this[_0x129230(0x124)]=_0x5a488e;continue;}break;}}[a78_0x2fcff0(0x118)](){const _0x16eaab=a78_0x2fcff0;return TestHubModule[_0x16eaab(0x10e)];}[a78_0x2fcff0(0x138)](_0x5a7dc1){const _0x4e0a4b=a78_0x2fcff0,_0x7c5bbc={};_0x7c5bbc[_0x4e0a4b(0xf0)]=function(_0x575aee,_0x47a921){return _0x575aee===_0x47a921;};const _0x140854=_0x7c5bbc,_0x139d48=_0x5a7dc1[_0x4e0a4b(0xf9)],_0x262842=_0x139d48[_0x4e0a4b(0xe7)]();(_0x140854[_0x4e0a4b(0xf0)](_0x262842,TestFrameworkState[_0x4e0a4b(0x12c)])||CLIUtils['matchHookRegex'](_0x262842[_0x4e0a4b(0x136)]()[_0x4e0a4b(0xdf)]('.')[0x1]))&&this[_0x4e0a4b(0xfe)](_0x5a7dc1);}async[a78_0x2fcff0(0xfe)](_0x1e8d53){const _0x2adb19=a78_0x2fcff0,_0xcce1b3={'EazQX':function(_0x57e2c4,_0x27718a,_0xcc8f9){return _0x57e2c4(_0x27718a,_0xcc8f9);},'bayvf':_0x2adb19(0x11f)};try{const _0x3b4335=_0x1e8d53['test']['id'],_0x264993=_0xcce1b3['EazQX'](getTestRunIdentifier,_0x1e8d53[_0x2adb19(0xec)],_0x1e8d53[_0x2adb19(0x137)][_0x2adb19(0xd6)]),_0x773040=_0x1e8d53[_0x2adb19(0xf9)],_0x1da5c0=_0x773040[_0x2adb19(0xed)](),_0x290ddb=_0x773040['getAllData']()['get'](_0x264993);this[_0x2adb19(0xeb)][_0x2adb19(0x134)](_0x2adb19(0x123)+_0x3b4335);const {[TestFrameworkConstants[_0x2adb19(0xda)]]:_0xf54590='',[TestFrameworkConstants['KEY_TEST_FRAMEWORK_VERSION']]:_0x47a7a1='',[TestFrameworkConstants[_0x2adb19(0xfc)]]:_0x5ca5e6='',[TestFrameworkConstants[_0x2adb19(0xd5)]]:_0x3649d9=''}=_0x290ddb,_0x585c90=_0x773040[_0x2adb19(0xe7)]()[_0x2adb19(0x136)]()[_0x2adb19(0xdf)]('.')[0x1],_0x2db5fc=_0x773040[_0x2adb19(0x12d)]()[_0x2adb19(0x136)]()[_0x2adb19(0xdf)]('.')[0x1],_0x3b18ff=global?.['__workerDetails']?.[_0x2adb19(0x103)]?.['parallelIndex'];;const _0x4e2b9d=_0x773040['getRef'](),_0x4b4c8a=Buffer[_0x2adb19(0x135)](JSON[_0x2adb19(0xe1)](_0x290ddb))[_0x2adb19(0x136)](_0xcce1b3['bayvf']),_0x3a3810={'hash':_0x1da5c0[_0x2adb19(0x139)](),'threadId':_0x1da5c0[_0x2adb19(0x125)]()[_0x2adb19(0x136)](),'processId':_0x1da5c0[_0x2adb19(0xd7)]()[_0x2adb19(0x136)]()},_0xfa8ff2={};_0xfa8ff2[_0x2adb19(0xf8)]=_0x3b18ff,_0xfa8ff2[_0x2adb19(0x10b)]=_0xf54590,_0xfa8ff2[_0x2adb19(0xe9)]=_0x47a7a1,_0xfa8ff2[_0x2adb19(0x10f)]=_0x585c90,_0xfa8ff2['hookState']=_0x2db5fc,_0xfa8ff2[_0x2adb19(0xe6)]=_0x5ca5e6,_0xfa8ff2[_0x2adb19(0xe4)]=_0x3649d9,_0xfa8ff2['uuid']=_0x4e2b9d,_0xfa8ff2[_0x2adb19(0x11b)]=_0x4b4c8a,_0xfa8ff2[_0x2adb19(0x107)]=_0x3a3810;const _0x1fb614=_0xfa8ff2,_0x5e2670=await GrpcClient[_0x2adb19(0x116)]()[_0x2adb19(0xe2)](_0x1fb614);this[_0x2adb19(0xeb)][_0x2adb19(0x134)](_0x2adb19(0x133)+_0x3b4335+'\x20testState:\x20'+_0x585c90+_0x2adb19(0x131)+_0x2db5fc);}catch(_0x50e73d){this[_0x2adb19(0xeb)][_0x2adb19(0xf1)](_0x2adb19(0x11c)+util['format'](_0x50e73d));}}async['onPageCreate'](_0x41965c){const _0x58d25a=a78_0x2fcff0,_0x27c7d1={'kxuUo':function(_0x104e17,_0x2aceaf){return _0x104e17(_0x2aceaf);},'ysRfD':_0x58d25a(0x11f)};try{if(_0x41965c[_0x58d25a(0xf7)]){const _0x3a59be=_0x41965c[_0x58d25a(0x11a)][_0x58d25a(0xf4)];this[_0x58d25a(0xeb)]['debug'](_0x58d25a(0xe8)+_0x3a59be);const _0x56f7b0=TestInfo[_0x58d25a(0x101)](_0x41965c[_0x58d25a(0x11a)],_0x41965c[_0x58d25a(0x11a)][_0x58d25a(0xd6)]),_0x30f3bc=TestInfo[_0x58d25a(0xea)](_0x56f7b0),_0x6e0119=TestInfo[_0x58d25a(0x10c)](_0x56f7b0),_0x262270=_0x41965c[_0x58d25a(0xf9)],_0xb44cc=AutomationFramework[_0x58d25a(0xe5)](_0x262270,PlaywrightDriverModule[_0x58d25a(0x130)]),_0x4fc7ee=_0x6e0119[TestFrameworkConstants[_0x58d25a(0xda)]],_0x197b45=_0x6e0119[TestFrameworkConstants[_0x58d25a(0x106)]],_0x3dc6b9=TestFrameworkState[_0x58d25a(0x12c)][_0x58d25a(0x136)]()['split']('.')[0x1],_0x30d768=HookState[_0x58d25a(0xe0)][_0x58d25a(0x136)]()[_0x58d25a(0xdf)]('.')[0x1],_0x2a8bbc=_0x262270[_0x58d25a(0xed)](),_0x5cf704=AutomationFramework[_0x58d25a(0xe5)](_0x262270,PlaywrightDriverModule['KEY_HUB_URL'],''),_0x35b5ec={'provider':_0x27c7d1['kxuUo'](getPlaywrightProvider,_0x5cf704),'frameworkName':_0x262270[_0x58d25a(0xfb)],'frameworkVersion':_0x262270[_0x58d25a(0xf2)],'frameworkSessionId':AutomationFramework[_0x58d25a(0xe5)](_0x262270,PlaywrightDriverModule[_0x58d25a(0x10a)],''),'ref':_0x262270[_0x58d25a(0x109)](),'hubUrl':_0x5cf704};let _0x6a89ff=AutomationFramework[_0x58d25a(0xe5)](_0x262270,PlaywrightDriverModule[_0x58d25a(0xdb)],{});_0x6a89ff=Buffer[_0x58d25a(0x135)](JSON['stringify'](_0x6a89ff))['toString'](_0x27c7d1[_0x58d25a(0xf3)]);const _0x5e2d8f={'hash':_0x2a8bbc[_0x58d25a(0x139)](),'threadId':_0x2a8bbc['getThreadId']()[_0x58d25a(0x136)](),'processId':_0x2a8bbc[_0x58d25a(0xd7)]()[_0x58d25a(0x136)]()},_0x21e4a9={};_0x21e4a9[_0x58d25a(0xf8)]=_0xb44cc,_0x21e4a9[_0x58d25a(0x10b)]=_0x4fc7ee,_0x21e4a9['testFrameworkVersion']=_0x197b45,_0x21e4a9['testFrameworkState']=_0x3dc6b9,_0x21e4a9[_0x58d25a(0x11e)]=_0x30d768,_0x21e4a9['testUuid']=_0x30f3bc,_0x21e4a9['automationSession']=_0x35b5ec,_0x21e4a9['capabilities']=_0x6a89ff,_0x21e4a9[_0x58d25a(0x107)]=_0x5e2d8f;const _0x59b426=_0x21e4a9;this[_0x58d25a(0xeb)][_0x58d25a(0x134)](_0x58d25a(0x108)+util['format'](_0x59b426));const _0x2d9bd1=await GrpcClient['getInstance']()['testSessionEvent'](_0x59b426);this[_0x58d25a(0xeb)][_0x58d25a(0x134)](_0x58d25a(0xd8)+_0x3a59be);}}catch(_0x5b734f){this[_0x58d25a(0xeb)][_0x58d25a(0xf1)](_0x58d25a(0x12e)+util[_0x58d25a(0x100)](_0x5b734f));}}}TestHubModule[a78_0x2fcff0(0x10e)]=a78_0x2fcff0(0xdc),TestHubModule[a78_0x2fcff0(0xff)]=a78_0x2fcff0(0x11d),module[a78_0x2fcff0(0x105)]=TestHubModule;