function a85_0x36fa(){const _0x4b970b=['error','POST','base64','TestHubModule','getProcessId','../../../helpers/classLogger.js','154744OxtbDQ','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','getContext','../../../helpers/test-observability/constants.js','../grpcClient.js','../state/automationFrameworkState.js','getInstance','testUuid','../../../helpers/helper.js','isLTSSession','values','KEY_TEST_FRAMEWORK_NAME','version','getThreadId','../TestInfo.js','../state/hookState.js','sendTestFrameworkEvent','createTestFrameworkEventPayload','split','getRef','Error\x20in\x20sendTestFrameworkEvent:\x20',',\x20test_identifier:\x20','stringify','testFrameworkState','22BlcdZl','testFrameworkEvent','SNcGy','getLTSSessionId','TEST','bqwjH','vCXxx','KEY_PLATFORM_INDEX','../cliUtils.js','20940Xeezwa','onPageCreate','getId','getTestFramework','frameworkVersion','testSessionEvent','../framework/testFramework.js','1855pNlmjf','DTBtw','testInfo','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','szVHA','testhubConfig','JuQbB','KEY_TEST_DEFERRED','vTJDd','sendTestFrameworkEvent\x20complete\x20for\x20testState:\x20','instance','127304rFinOm','toString','zQiwm','name','2645665brxpIs','util','format','gHTan','hookState','BROWSERSTACK_TESTHUB_JWT','5945990MpoQlU','from','./baseModule','18IOpibz','getTestIdentifierFromTestInfo','JEST','getState','bind','debug','KEY_CAPABILITIES','../state/testFrameworkState.js','CUCUMBER','WYeuq','forEach','env','MODULE_NAME','14030124kNXbtk','onAllTestEvents','ENV_VAR','../framework/automationFramework.js','KEY_TEST_FRAMEWORK_VERSION','matchHookRegex','retry','registerObserver','getBuildHashedId','getTestUUID','./playwrightDriverModule.js','4OlNUHl','./loadTestModule.js','316799jVmNdt','testFrameworkData','603wXaMIe','logger','jestUtils','onPageCreate\x20CBTSession\x20payload:\x20','exports'];a85_0x36fa=function(){return _0x4b970b;};return a85_0x36fa();}const a85_0x2fa4d5=a85_0x328f;(function(_0x4308f0,_0x29a218){const _0x56aecf=a85_0x328f,_0x39790f=_0x4308f0();while(!![]){try{const _0x13f2c5=-parseInt(_0x56aecf(0xdf))/0x1+-parseInt(_0x56aecf(0x11f))/0x2*(-parseInt(_0x56aecf(0x12c))/0x3)+parseInt(_0x56aecf(0xdd))/0x4*(parseInt(_0x56aecf(0x123))/0x5)+parseInt(_0x56aecf(0x10d))/0x6*(-parseInt(_0x56aecf(0x114))/0x7)+parseInt(_0x56aecf(0xec))/0x8*(-parseInt(_0x56aecf(0xe1))/0x9)+parseInt(_0x56aecf(0x129))/0xa*(parseInt(_0x56aecf(0x104))/0xb)+parseInt(_0x56aecf(0x139))/0xc;if(_0x13f2c5===_0x29a218)break;else _0x39790f['push'](_0x39790f['shift']());}catch(_0x5df39b){_0x39790f['push'](_0x39790f['shift']());}}}(a85_0x36fa,0xb2a8e));function a85_0x328f(_0x392a46,_0x3d4d41){const _0x36fa61=a85_0x36fa();return a85_0x328f=function(_0x328f53,_0x358c57){_0x328f53=_0x328f53-0xd5;let _0x478285=_0x36fa61[_0x328f53];return _0x478285;},a85_0x328f(_0x392a46,_0x3d4d41);}const util=require(a85_0x2fa4d5(0x124)),BaseModule=require(a85_0x2fa4d5(0x12b)),{createClassLogger}=require(a85_0x2fa4d5(0xeb)),AutomationFramework=require(a85_0x2fa4d5(0xd5)),AutomationFrameworkState=require(a85_0x2fa4d5(0xf1)),HookState=require(a85_0x2fa4d5(0xfb)),TestFramework=require(a85_0x2fa4d5(0x113)),TestFrameworkState=require(a85_0x2fa4d5(0x133)),PlaywrightDriverModule=require(a85_0x2fa4d5(0xdc)),TestFrameworkConstants=require('../framework/constants/testFrameworkConstants.js'),GrpcClient=require(a85_0x2fa4d5(0xf0)),CLIUtils=require(a85_0x2fa4d5(0x10c)),TestInfo=require(a85_0x2fa4d5(0xfa)),testHubConstants=require('../../../helpers/testhub/constants'),{FRAMEWORKS}=require(a85_0x2fa4d5(0xef)),helper=require(a85_0x2fa4d5(0xf4)),LoadTestModule=require(a85_0x2fa4d5(0xde)),JestUtils=require('../utils/jest-utils.js'),BrowserstackCLI=require('../browserstackCLI.js'),{getPlaywrightProvider}=require('../../../helpers/helper.js');class TestHubModule extends BaseModule{[a85_0x2fa4d5(0xe2)]=createClassLogger('TestHubModule');constructor(_0x4a370b,_0xeccbf9=null){const _0x200794=a85_0x2fa4d5,_0x50a3bb={};_0x50a3bb[_0x200794(0x115)]='0|6|5|2|3|4|1|8|7',_0x50a3bb[_0x200794(0x121)]='TestHubModule';const _0x37e518=_0x50a3bb,_0x251e53=_0x37e518['DTBtw'][_0x200794(0xfe)]('|');let _0x1c77ff=0x0;while(!![]){switch(_0x251e53[_0x1c77ff++]){case'0':super(_0xeccbf9);continue;case'1':process[_0x200794(0x137)][testHubConstants[_0x200794(0x13b)][_0x200794(0x128)]]=this[_0x200794(0x119)]['getJwt']();continue;case'2':this[_0x200794(0xe3)]=new JestUtils();continue;case'3':AutomationFramework[_0x200794(0xd9)](AutomationFrameworkState['CREATE'],HookState['POST'],this[_0x200794(0x10e)][_0x200794(0x130)](this));continue;case'4':Object[_0x200794(0xf6)](TestFrameworkState)[_0x200794(0x136)](_0x1e4194=>{const _0x3ac6b=_0x200794;Object[_0x3ac6b(0xf6)](HookState)['forEach'](_0x46abdf=>{const _0x46bdc8=_0x3ac6b;TestFramework[_0x46bdc8(0xd9)](_0x1e4194,_0x46abdf,this[_0x46bdc8(0x13a)]['bind'](this));});});continue;case'5':this[_0x200794(0x119)]=_0x4a370b;continue;case'6':this['name']=_0x37e518[_0x200794(0x121)];continue;case'7':BrowserstackCLI['O11yHashedID']=this[_0x200794(0x119)][_0x200794(0xda)]();continue;case'8':process[_0x200794(0x137)][testHubConstants[_0x200794(0x13b)]['BROWSERSTACK_TESTHUB_UUID']]=this[_0x200794(0x119)][_0x200794(0xda)]();continue;}break;}}['getModuleName'](){const _0x1255d4=a85_0x2fa4d5;return TestHubModule[_0x1255d4(0x138)];}[a85_0x2fa4d5(0x13a)](_0x4ecfff){const _0x42cffd=a85_0x2fa4d5,_0x130129={};_0x130129['JuQbB']=function(_0x2aec25,_0x1ba7e7){return _0x2aec25===_0x1ba7e7;};const _0x8d16de=_0x130129,_0xaf40eb=_0x4ecfff[_0x42cffd(0x11e)],_0x4fb541=_0xaf40eb['getCurrentTestState']();(_0x8d16de[_0x42cffd(0x11a)](_0x4fb541,TestFrameworkState[_0x42cffd(0x108)])||CLIUtils[_0x42cffd(0xd7)](_0x4fb541[_0x42cffd(0x120)]()[_0x42cffd(0xfe)]('.')[0x1]))&&this[_0x42cffd(0xfc)](_0x4ecfff);}async[a85_0x2fa4d5(0xfc)](_0x5e47c9){const _0x3fb679=a85_0x2fa4d5,_0x428cc2={};_0x428cc2[_0x3fb679(0x126)]=function(_0x5ec27f,_0x1a85f1){return _0x5ec27f===_0x1a85f1;},_0x428cc2[_0x3fb679(0x118)]='sendTestFrameworkEvent:\x20No\x20payload\x20created,\x20skipping\x20test\x20framework\x20event';const _0x22028a=_0x428cc2;try{const _0x5c0a14=BrowserstackCLI['getInstance']()[_0x3fb679(0x110)]()[_0x3fb679(0xfd)](_0x5e47c9);if(!_0x5c0a14||_0x22028a[_0x3fb679(0x126)](Object['keys'](_0x5c0a14)['length'],0x0)){this[_0x3fb679(0xe2)][_0x3fb679(0x131)](_0x22028a[_0x3fb679(0x118)]);return;}const _0x459fd3=await GrpcClient[_0x3fb679(0xf2)]()[_0x3fb679(0x105)](_0x5c0a14);this[_0x3fb679(0xe2)]['debug'](_0x3fb679(0x11d)+_0x5c0a14[_0x3fb679(0x103)]+'\x20hookState:\x20'+_0x5c0a14[_0x3fb679(0x127)]);}catch(_0xd46b70){this[_0x3fb679(0xe2)][_0x3fb679(0xe6)](_0x3fb679(0x100)+util[_0x3fb679(0x125)](_0xd46b70));}}async[a85_0x2fa4d5(0x10e)](_0x546d93){const _0x327fc9=a85_0x2fa4d5,_0x19e9a6={'SNcGy':function(_0x5bee83,_0x5cf2ce){return _0x5bee83===_0x5cf2ce;},'vTJDd':'onPageCreate:\x20Skipping\x20CBT\x20session\x20event\x20-\x20no\x20testInfo\x20(page\x20created\x20outside\x20test\x20context)','vCXxx':function(_0x4619e1,_0x1b2f5d){return _0x4619e1===_0x1b2f5d;},'gZVUR':function(_0x5b66db,_0x4c8c78){return _0x5b66db(_0x4c8c78);},'WYeuq':_0x327fc9(0xe8),'bqwjH':function(_0x2cc749,_0x347f38){return _0x2cc749===_0x347f38;}};try{if(_0x546d93['page']){const _0x5d5731=this['getTestId'](_0x546d93);this[_0x327fc9(0xe2)][_0x327fc9(0x131)](_0x327fc9(0x117)+_0x5d5731);if(this['testFrameworkData']&&_0x19e9a6['SNcGy'](this['testFrameworkData'][_0x327fc9(0x122)],FRAMEWORKS[_0x327fc9(0x12e)])&&!_0x546d93['testInfo']){this[_0x327fc9(0xe2)][_0x327fc9(0x131)](_0x19e9a6[_0x327fc9(0x11c)]);return;}let _0x1c175b,_0x98e366;if(this[_0x327fc9(0xe0)]&&_0x19e9a6[_0x327fc9(0x10a)](this['testFrameworkData'][_0x327fc9(0x122)],FRAMEWORKS[_0x327fc9(0x134)]))_0x1c175b=_0x5d5731,_0x98e366=TestInfo[_0x327fc9(0xdb)](_0x1c175b);else this[_0x327fc9(0xe0)]&&_0x19e9a6[_0x327fc9(0x106)](this[_0x327fc9(0xe0)][_0x327fc9(0x122)],FRAMEWORKS[_0x327fc9(0x12e)])?(_0x1c175b=this[_0x327fc9(0xe3)]['recreateIdentifierFromTestInfo'](_0x546d93[_0x327fc9(0x116)]),this[_0x327fc9(0xe2)][_0x327fc9(0x131)]('onPageCreate:\x20Recreated\x20Jest\x20testIdentifier:\x20'+_0x1c175b)):(_0x1c175b=TestInfo[_0x327fc9(0x12d)](_0x546d93[_0x327fc9(0x116)],_0x546d93['testInfo'][_0x327fc9(0xd8)]),_0x98e366=TestInfo[_0x327fc9(0xdb)](_0x1c175b));const _0x4b4205=TestInfo['getTestDetails'](_0x1c175b),_0x107870=_0x546d93[_0x327fc9(0x11e)],_0x1f5902=AutomationFramework[_0x327fc9(0x12f)](_0x107870,PlaywrightDriverModule[_0x327fc9(0x10b)]),_0x48ae94=_0x4b4205?.[TestFrameworkConstants[_0x327fc9(0xf7)]]||this['testFrameworkData']&&this[_0x327fc9(0xe0)][_0x327fc9(0x122)],_0x41d5d3=_0x4b4205?.[TestFrameworkConstants[_0x327fc9(0xd6)]]||this['testFrameworkData']&&this[_0x327fc9(0xe0)][_0x327fc9(0xf8)],_0x257484=TestFrameworkState[_0x327fc9(0x108)][_0x327fc9(0x120)]()['split']('.')[0x1],_0x35142f=HookState[_0x327fc9(0xe7)][_0x327fc9(0x120)]()[_0x327fc9(0xfe)]('.')[0x1],_0x21a9a7=_0x107870[_0x327fc9(0xee)](),_0x1b45c4=AutomationFramework[_0x327fc9(0x12f)](_0x107870,PlaywrightDriverModule['KEY_HUB_URL'],''),_0x44ca5f={'provider':_0x19e9a6['gZVUR'](getPlaywrightProvider,_0x1b45c4),'frameworkName':_0x107870['frameworkName'],'frameworkVersion':_0x107870[_0x327fc9(0x111)],'frameworkSessionId':LoadTestModule[_0x327fc9(0xf5)]()?LoadTestModule[_0x327fc9(0x107)]():AutomationFramework['getState'](_0x107870,PlaywrightDriverModule['KEY_SESSION_ID'],''),'ref':_0x107870[_0x327fc9(0xff)](),'hubUrl':_0x1b45c4};let _0x1cd8b2=AutomationFramework[_0x327fc9(0x12f)](_0x107870,PlaywrightDriverModule[_0x327fc9(0x132)],{});_0x1cd8b2=Buffer[_0x327fc9(0x12a)](JSON[_0x327fc9(0x102)](_0x1cd8b2))[_0x327fc9(0x120)](_0x19e9a6[_0x327fc9(0x135)]);const _0x46298f={'hash':_0x21a9a7[_0x327fc9(0x10f)](),'threadId':_0x21a9a7[_0x327fc9(0xf9)]()['toString'](),'processId':_0x21a9a7[_0x327fc9(0xea)]()[_0x327fc9(0x120)]()},_0x225392={};_0x225392['test_identifier']=_0x1c175b;const _0x447445={};_0x447445[_0x327fc9(0xf3)]=_0x98e366;const _0x324d8f={'platformIndex':_0x1f5902,'testFrameworkName':_0x48ae94,'testFrameworkVersion':_0x41d5d3,'testFrameworkState':_0x257484,'testHookState':_0x35142f,...this[_0x327fc9(0xe0)]&&_0x19e9a6[_0x327fc9(0x109)](this['testFrameworkData'][_0x327fc9(0x122)],FRAMEWORKS['JEST'])?_0x225392:_0x447445,'automationSession':_0x44ca5f,'capabilities':_0x1cd8b2,'executionContext':_0x46298f};this['logger'][_0x327fc9(0x131)](_0x327fc9(0xe4)+util[_0x327fc9(0x125)](_0x324d8f));const _0x28ec9d=await GrpcClient[_0x327fc9(0xf2)]()[_0x327fc9(0x112)](_0x324d8f);this[_0x327fc9(0xe2)]['debug'](_0x327fc9(0xed)+_0x5d5731+(this[_0x327fc9(0xe0)]&&_0x19e9a6['vCXxx'](this[_0x327fc9(0xe0)]['name'],FRAMEWORKS[_0x327fc9(0x12e)])?_0x327fc9(0x101)+_0x1c175b:''));}}catch(_0x3c2e78){this[_0x327fc9(0xe2)][_0x327fc9(0xe6)]('Error\x20in\x20sending\x20CBTSession:\x20'+util[_0x327fc9(0x125)](_0x3c2e78));}}}TestHubModule['MODULE_NAME']=a85_0x2fa4d5(0xe9),TestHubModule[a85_0x2fa4d5(0x11b)]='test_deferred',module[a85_0x2fa4d5(0xe5)]=TestHubModule;