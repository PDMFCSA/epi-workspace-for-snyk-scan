const a77_0x462502=a77_0x2618;function a77_0x41a8(){const _0x49ac42=['uploadAttachments','size','close','KEY_FILE_PATH','CNzJw','faVrp','bBvSY','50632iXnMGi','kdDOT','https://','xnzRT','SqoMJ','nuPrV','buildHashedId','join','ESRtt','PTvfk','trim','vKFby','wYAwf','toObject','../../helpers/classLogger.js','message','apHtn','toFixed','statusCode','SKQtA','21gjmAVX','existsSync','581792TXeqiV','get','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','BuildLevel','statSync','modules','1489850goDFhX','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','getInstance','152273RxsGWJ','uploadAttachmentsManager','lwivq','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','306594vtxyNk','https','basename','format','Created\x20folder:\x20%s','debug','KEY_TEST_ATTACHMENTS','./framework/automationFramework','RhrUp','pipe','XMvwC','recursive','UWWiX','TestLevel','rmSync','http://','setTestDetails','testhubConfig','KEY_FILE_NAME','638708ZwkVzj','378prcJxV','Cleared\x20attachment\x20folder','path','unlinkSync','SCRDG','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','.browserstack','Ogoxl','force','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','QGvoO','Created\x20.browserstack\x20folder\x20at:\x20%s','KEY_FILE_SIZE','trackFile','TestHubModule','getTestDetails','exports','SJtWg','Attachment\x20recevied\x20for\x20path:\x20%s','DSXvD','aIFIU','gWeFM','startsWith','error','createWriteStream','UXTBp','logger','File\x20downloaded\x20to:\x20%s','xqJMI','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','./browserstackCLI','LtOaa','homedir','aKzkn','KEY_TEST_ID','526485GefgZx'];a77_0x41a8=function(){return _0x49ac42;};return a77_0x41a8();}function a77_0x2618(_0x2469d3,_0x519233){const _0x41a8f3=a77_0x41a8();return a77_0x2618=function(_0x2618ab,_0x272c82){_0x2618ab=_0x2618ab-0x151;let _0x4ccf9a=_0x41a8f3[_0x2618ab];return _0x4ccf9a;},a77_0x2618(_0x2469d3,_0x519233);}(function(_0x3b5f34,_0x1a4952){const _0x1af526=a77_0x2618,_0x10bdae=_0x3b5f34();while(!![]){try{const _0x390bd8=parseInt(_0x1af526(0x1ad))/0x1+-parseInt(_0x1af526(0x1a3))/0x2+-parseInt(_0x1af526(0x185))/0x3+-parseInt(_0x1af526(0x161))/0x4+parseInt(_0x1af526(0x1aa))/0x5+-parseInt(_0x1af526(0x1b1))/0x6*(-parseInt(_0x1af526(0x1a1))/0x7)+-parseInt(_0x1af526(0x18d))/0x8*(-parseInt(_0x1af526(0x162))/0x9);if(_0x390bd8===_0x1a4952)break;else _0x10bdae['push'](_0x10bdae['shift']());}catch(_0x493c1a){_0x10bdae['push'](_0x10bdae['shift']());}}}(a77_0x41a8,0x3b65a));const os=require('os'),fs=require('fs'),path=require(a77_0x462502(0x164)),util=require('util'),BrowserstackCLI=require(a77_0x462502(0x180)),https=require(a77_0x462502(0x1b2)),http=require('http'),AutomationFramework=require(a77_0x462502(0x155)),PlaywrightDriverModule=require('./modules/playwrightDriverModule'),TestInfo=require('./TestInfo'),TestFrameworkConstants=require('./framework/constants/testFrameworkConstants'),{createClassLogger}=require(a77_0x462502(0x19b));class uploadAttachmentsManager{static [a77_0x462502(0x17c)]=createClassLogger(a77_0x462502(0x1ae));static[a77_0x462502(0x186)](_0x4cdc98,_0x3bab8e=![]){const _0x5c7128=a77_0x462502,_0x170b6c={};_0x170b6c[_0x5c7128(0x191)]=function(_0x18c534,_0x4ba7a7){return _0x18c534/_0x4ba7a7;},_0x170b6c['RjwEs']=function(_0x2a8092,_0x3c0ccb){return _0x2a8092*_0x3c0ccb;},_0x170b6c[_0x5c7128(0x16c)]=function(_0x31210e,_0x30e7af){return _0x31210e>_0x30e7af;},_0x170b6c[_0x5c7128(0x195)]=_0x5c7128(0x167),_0x170b6c['gWeFM']=_0x5c7128(0x17d),_0x170b6c[_0x5c7128(0x190)]=function(_0x3e5e78,_0x348342){return _0x3e5e78===_0x348342;},_0x170b6c[_0x5c7128(0x169)]='finish',_0x170b6c[_0x5c7128(0x18c)]=_0x5c7128(0x1a5),_0x170b6c[_0x5c7128(0x158)]=_0x5c7128(0x1a6),_0x170b6c[_0x5c7128(0x1a0)]=_0x5c7128(0x174),_0x170b6c[_0x5c7128(0x181)]=_0x5c7128(0x168),_0x170b6c[_0x5c7128(0x17b)]=_0x5c7128(0x16b),_0x170b6c[_0x5c7128(0x183)]=_0x5c7128(0x16d),_0x170b6c[_0x5c7128(0x175)]=_0x5c7128(0x152),_0x170b6c['SCRDG']=function(_0x396431,_0x1806ec){return _0x396431===_0x1806ec;},_0x170b6c[_0x5c7128(0x18a)]='Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.',_0x170b6c[_0x5c7128(0x1af)]=_0x5c7128(0x18f),_0x170b6c[_0x5c7128(0x196)]=_0x5c7128(0x15d),_0x170b6c['faVrp']=_0x5c7128(0x179),_0x170b6c[_0x5c7128(0x199)]='Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s',_0x170b6c[_0x5c7128(0x15a)]=function(_0x2c6876,_0x344ef2){return _0x2c6876/_0x344ef2;},_0x170b6c['vKFby']=function(_0x416f03,_0x1ac447){return _0x416f03*_0x1ac447;},_0x170b6c[_0x5c7128(0x192)]=_0x5c7128(0x1b0);const _0x1c81e8=_0x170b6c;this[_0x5c7128(0x17c)][_0x5c7128(0x153)](util[_0x5c7128(0x151)](_0x1c81e8[_0x5c7128(0x1a0)],_0x4cdc98));const _0x4599bd=os[_0x5c7128(0x182)](),_0x581859=path[_0x5c7128(0x194)](_0x4599bd,_0x1c81e8[_0x5c7128(0x181)]);!fs[_0x5c7128(0x1a2)](_0x581859)&&(this[_0x5c7128(0x17c)][_0x5c7128(0x153)](util[_0x5c7128(0x151)](_0x1c81e8[_0x5c7128(0x17b)],_0x581859)),fs['mkdirSync'](_0x581859),this['logger'][_0x5c7128(0x153)](util['format'](_0x1c81e8[_0x5c7128(0x183)],_0x581859)));const _0x5e9fa8=BrowserstackCLI['getInstance']()[_0x5c7128(0x1a9)][_0x5c7128(0x170)]?.['testhubConfig']?.['toObject']()?.[_0x5c7128(0x193)],_0x5da542=path['join'](_0x581859,_0x5e9fa8);!fs['existsSync'](_0x5da542)&&(fs['mkdirSync'](_0x5da542),this[_0x5c7128(0x17c)]['debug'](util[_0x5c7128(0x151)](_0x1c81e8[_0x5c7128(0x175)],_0x5da542)));if(_0x1c81e8[_0x5c7128(0x166)](_0x4cdc98[_0x5c7128(0x197)](),'')){this[_0x5c7128(0x17c)]['debug'](util[_0x5c7128(0x151)](_0x1c81e8[_0x5c7128(0x18a)]));return;}if(_0x4cdc98[_0x5c7128(0x178)](_0x1c81e8[_0x5c7128(0x1af)])||_0x4cdc98['startsWith'](_0x1c81e8[_0x5c7128(0x196)])){const _0x583a63=_0x4cdc98[_0x5c7128(0x178)](_0x1c81e8[_0x5c7128(0x1af)])?https:http,_0x4f7213=path['basename'](_0x4cdc98),_0x1ba97b=path[_0x5c7128(0x194)](_0x5da542,_0x4f7213),_0x36fcc6=fs[_0x5c7128(0x17a)](_0x1ba97b);_0x583a63[_0x5c7128(0x1a4)](_0x4cdc98,_0x5024a7=>{const _0x1296f2=_0x5c7128;if(_0x1c81e8[_0x1296f2(0x190)](_0x5024a7[_0x1296f2(0x19f)],0xc8))_0x5024a7[_0x1296f2(0x157)](_0x36fcc6),_0x36fcc6['on'](_0x1c81e8[_0x1296f2(0x169)],()=>{const _0x1749a1=_0x1296f2;_0x36fcc6['close']();const _0x4c6434=fs[_0x1749a1(0x1a8)](_0x1ba97b),_0x11e537=_0x1c81e8[_0x1749a1(0x191)](_0x4c6434[_0x1749a1(0x187)],_0x1c81e8['RjwEs'](0x400,0x400));if(_0x1c81e8[_0x1749a1(0x16c)](_0x11e537,0x64)){this['logger'][_0x1749a1(0x153)](util['format'](_0x1c81e8['ESRtt'],_0x11e537['toFixed'](0x2))),fs[_0x1749a1(0x165)](_0x1ba97b);return;}this[_0x1749a1(0x17c)][_0x1749a1(0x153)](util[_0x1749a1(0x151)](_0x1c81e8[_0x1749a1(0x177)],_0x1ba97b)),uploadAttachmentsManager[_0x1749a1(0x16f)](_0x1ba97b,_0x3bab8e);});else{this['logger'][_0x1296f2(0x153)](util[_0x1296f2(0x151)](_0x1c81e8['bBvSY'],_0x5024a7[_0x1296f2(0x19f)])),_0x36fcc6[_0x1296f2(0x188)](),fs[_0x1296f2(0x165)](_0x1ba97b);return;}})['on'](_0x1c81e8[_0x5c7128(0x18b)],_0x582334=>{const _0x4e9811=_0x5c7128;this[_0x4e9811(0x17c)][_0x4e9811(0x153)](util[_0x4e9811(0x151)](_0x1c81e8['XMvwC'],_0x582334['message'])),_0x36fcc6['close'](),fs[_0x4e9811(0x165)](_0x1ba97b);return;});}else{if(!fs[_0x5c7128(0x1a2)](_0x4cdc98)){this[_0x5c7128(0x17c)][_0x5c7128(0x153)](util['format'](_0x1c81e8[_0x5c7128(0x199)],_0x4cdc98));return;}const _0x2e8db2=fs[_0x5c7128(0x1a8)](_0x4cdc98),_0x1fc220=_0x1c81e8['UWWiX'](_0x2e8db2[_0x5c7128(0x187)],_0x1c81e8[_0x5c7128(0x198)](0x400,0x400));if(_0x1c81e8[_0x5c7128(0x16c)](_0x1fc220,0x64)){this[_0x5c7128(0x17c)][_0x5c7128(0x153)](util['format'](_0x1c81e8[_0x5c7128(0x192)],_0x1fc220[_0x5c7128(0x19e)](0x2)));return;}const _0x175e08=path[_0x5c7128(0x1b3)](_0x4cdc98),_0x242f73=path[_0x5c7128(0x194)](_0x5da542,_0x175e08);fs['copyFileSync'](_0x4cdc98,_0x242f73),uploadAttachmentsManager['trackFile'](_0x242f73,_0x3bab8e);}}static[a77_0x462502(0x16f)](_0x7610c,_0x34f75){const _0x13a30e=a77_0x462502,_0x4cf1e3={};_0x4cf1e3['xqJMI']=_0x13a30e(0x1a7),_0x4cf1e3[_0x13a30e(0x173)]=_0x13a30e(0x15b),_0x4cf1e3['apHtn']=_0x13a30e(0x17f),_0x4cf1e3[_0x13a30e(0x156)]=_0x13a30e(0x1ab);const _0x5d3074=_0x4cf1e3;try{const _0x5d1fa2=AutomationFramework['getTrackedInstance'](),_0x29437f=AutomationFramework['getState'](_0x5d1fa2,PlaywrightDriverModule[_0x13a30e(0x184)],''),_0x30ba1f=TestInfo[_0x13a30e(0x171)](_0x29437f),_0x1e43c8=_0x30ba1f[TestFrameworkConstants[_0x13a30e(0x154)]]||{};_0x1e43c8[_0x7610c]={[TestFrameworkConstants[_0x13a30e(0x16e)]]:fs['statSync'](_0x7610c)[_0x13a30e(0x187)],[TestFrameworkConstants[_0x13a30e(0x160)]]:path[_0x13a30e(0x1b3)](_0x7610c),[TestFrameworkConstants[_0x13a30e(0x189)]]:_0x7610c,[TestFrameworkConstants['KEY_FILE_LEVEL']]:_0x34f75?_0x5d3074[_0x13a30e(0x17e)]:_0x5d3074['SJtWg']},_0x30ba1f[TestFrameworkConstants[_0x13a30e(0x154)]]=_0x1e43c8,TestInfo[_0x13a30e(0x15e)](_0x29437f,_0x30ba1f),this[_0x13a30e(0x17c)][_0x13a30e(0x153)](util[_0x13a30e(0x151)](_0x5d3074[_0x13a30e(0x19d)],_0x7610c));}catch(_0x4076c6){this[_0x13a30e(0x17c)][_0x13a30e(0x153)](util[_0x13a30e(0x151)](_0x5d3074['RhrUp'],_0x4076c6[_0x13a30e(0x19c)]));}}static['clearAttachments'](){const _0x50a65c=a77_0x462502,_0xa417b={};_0xa417b[_0x50a65c(0x18e)]=_0x50a65c(0x168),_0xa417b['aIFIU']=_0x50a65c(0x163);const _0x56c56a=_0xa417b,_0x5a33aa=os[_0x50a65c(0x182)](),_0x3c86a1=path[_0x50a65c(0x194)](_0x5a33aa,_0x56c56a[_0x50a65c(0x18e)]);if(!fs['existsSync'](_0x3c86a1))return;const _0x535ca6=BrowserstackCLI[_0x50a65c(0x1ac)]()[_0x50a65c(0x1a9)]['TestHubModule']?.[_0x50a65c(0x15f)]?.[_0x50a65c(0x19a)]()?.[_0x50a65c(0x193)],_0xd2574=path[_0x50a65c(0x194)](_0x3c86a1,_0x535ca6);if(!fs[_0x50a65c(0x1a2)](_0xd2574))return;const _0x27d062={};_0x27d062[_0x50a65c(0x159)]=!![],_0x27d062[_0x50a65c(0x16a)]=!![],fs[_0x50a65c(0x15c)](_0xd2574,_0x27d062),this[_0x50a65c(0x17c)][_0x50a65c(0x153)](util['format'](_0x56c56a[_0x50a65c(0x176)]));}}module[a77_0x462502(0x172)]=uploadAttachmentsManager;