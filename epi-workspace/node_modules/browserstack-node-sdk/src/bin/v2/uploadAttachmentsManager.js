const a80_0x15283c=a80_0x2dcc;function a80_0x55e6(){const _0x2cb535=['homedir','ZTySd','1959570MFcboi','getState','message','basename','tKVdA','qQYzZ','statSync','KEY_TEST_ATTACHMENTS','clearAttachments','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','statusCode','ypSOk','error','format','HixDY','toFixed','http','finish','unlinkSync','lvUGj','force','trackFile','zWLBv','VofxQ','./framework/automationFramework','KEY_FILE_PATH','toObject','PsbnR','AUUgM','ldwiH','startsWith','1116822gqkpWf','LuoZT','265299lwWVjT','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','KnuuU','KEY_FILE_LEVEL','6057270znipuH','SnwzQ','qVQWy','TestLevel','https','testhubConfig','uploadAttachments','getTestDetails','util','exports','SjZAA','pipe','close','TestHubModule','existsSync','uploadAttachmentsManager','File\x20downloaded\x20to:\x20%s','getTrackedInstance','debug','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','./TestInfo','modules','hHzTv','2GTIRvl','getInstance','Cleared\x20attachment\x20folder','mkdirSync','49060vcgIun','trim','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','kSRTh','buildHashedId','.browserstack','9103760rdaTWR','logger','gdVhL','7eAmxqS','./modules/playwrightDriverModule','Created\x20folder:\x20%s','qktdw','http://','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','path','jRVGt','2562072EmoPGM','PMKnB','LDqzV','525tzcArT','drDAL','gYMEI','xlpXA','https://','IeJGD','iGrcg','./framework/constants/testFrameworkConstants','rmSync','copyFileSync','yfBNj','join','get','qbKIo','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','LhbPH','Attachment\x20recevied\x20for\x20path:\x20%s','size'];a80_0x55e6=function(){return _0x2cb535;};return a80_0x55e6();}(function(_0xe3b86a,_0x2b9c23){const _0x49f178=a80_0x2dcc,_0x63a459=_0xe3b86a();while(!![]){try{const _0xcea70f=-parseInt(_0x49f178(0x169))/0x1+parseInt(_0x49f178(0x11b))/0x2*(parseInt(_0x49f178(0x130))/0x3)+-parseInt(_0x49f178(0x11f))/0x4*(parseInt(_0x49f178(0x133))/0x5)+-parseInt(_0x49f178(0x167))/0x6+-parseInt(_0x49f178(0x128))/0x7*(-parseInt(_0x49f178(0x125))/0x8)+parseInt(_0x49f178(0x104))/0x9+-parseInt(_0x49f178(0x147))/0xa;if(_0xcea70f===_0x2b9c23)break;else _0x63a459['push'](_0x63a459['shift']());}catch(_0x115ca2){_0x63a459['push'](_0x63a459['shift']());}}}(a80_0x55e6,0xb22ce));const os=require('os'),fs=require('fs'),path=require(a80_0x15283c(0x12e)),util=require(a80_0x15283c(0x10c)),BrowserstackCLI=require('./browserstackCLI'),https=require(a80_0x15283c(0x108)),http=require(a80_0x15283c(0x158)),AutomationFramework=require(a80_0x15283c(0x160)),PlaywrightDriverModule=require(a80_0x15283c(0x129)),TestInfo=require(a80_0x15283c(0x118)),TestFrameworkConstants=require(a80_0x15283c(0x13a)),{createClassLogger}=require('../../helpers/classLogger.js');class uploadAttachmentsManager{static [a80_0x15283c(0x126)]=createClassLogger(a80_0x15283c(0x113));static[a80_0x15283c(0x10a)](_0x2bd989,_0x344cfc=![]){const _0x34852c=a80_0x15283c,_0x492b62={};_0x492b62[_0x34852c(0x12f)]=function(_0x5b5dd2,_0x1ad3a2){return _0x5b5dd2/_0x1ad3a2;},_0x492b62[_0x34852c(0x127)]=function(_0x5b9085,_0x302d11){return _0x5b9085*_0x302d11;},_0x492b62[_0x34852c(0x16b)]=function(_0x82fc3b,_0x328150){return _0x82fc3b>_0x328150;},_0x492b62[_0x34852c(0x105)]=_0x34852c(0x16a),_0x492b62['nTZnb']=_0x34852c(0x114),_0x492b62[_0x34852c(0x15f)]=function(_0x53cd67,_0x358aef){return _0x53cd67===_0x358aef;},_0x492b62[_0x34852c(0x131)]=_0x34852c(0x159),_0x492b62[_0x34852c(0x135)]=_0x34852c(0x117),_0x492b62[_0x34852c(0x15b)]='Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload',_0x492b62['qktdw']=_0x34852c(0x143),_0x492b62[_0x34852c(0x10e)]='.browserstack',_0x492b62[_0x34852c(0x122)]=_0x34852c(0x121),_0x492b62[_0x34852c(0x139)]='Created\x20.browserstack\x20folder\x20at:\x20%s',_0x492b62[_0x34852c(0x138)]=_0x34852c(0x12a),_0x492b62[_0x34852c(0x165)]=_0x34852c(0x141),_0x492b62[_0x34852c(0x153)]=_0x34852c(0x137),_0x492b62[_0x34852c(0x140)]=_0x34852c(0x12c),_0x492b62[_0x34852c(0x142)]=_0x34852c(0x154),_0x492b62[_0x34852c(0x132)]=_0x34852c(0x150),_0x492b62[_0x34852c(0x146)]=function(_0x23555b,_0x912f05){return _0x23555b>_0x912f05;},_0x492b62[_0x34852c(0x164)]=_0x34852c(0x12d);const _0x47ae42=_0x492b62;this['logger'][_0x34852c(0x116)](util['format'](_0x47ae42[_0x34852c(0x12b)],_0x2bd989));const _0xacc1a1=os['homedir'](),_0x320a88=path[_0x34852c(0x13e)](_0xacc1a1,_0x47ae42[_0x34852c(0x10e)]);!fs[_0x34852c(0x112)](_0x320a88)&&(this[_0x34852c(0x126)][_0x34852c(0x116)](util[_0x34852c(0x155)](_0x47ae42['kSRTh'],_0x320a88)),fs['mkdirSync'](_0x320a88),this[_0x34852c(0x126)]['debug'](util[_0x34852c(0x155)](_0x47ae42[_0x34852c(0x139)],_0x320a88)));const _0x2e378f=BrowserstackCLI[_0x34852c(0x11c)]()['modules'][_0x34852c(0x111)]?.[_0x34852c(0x109)]?.[_0x34852c(0x162)]()?.['buildHashedId'],_0x1ae537=path[_0x34852c(0x13e)](_0x320a88,_0x2e378f);!fs[_0x34852c(0x112)](_0x1ae537)&&(fs[_0x34852c(0x11e)](_0x1ae537),this[_0x34852c(0x126)][_0x34852c(0x116)](util[_0x34852c(0x155)](_0x47ae42[_0x34852c(0x138)],_0x1ae537)));if(_0x47ae42[_0x34852c(0x15f)](_0x2bd989[_0x34852c(0x120)](),'')){this['logger'][_0x34852c(0x116)](util[_0x34852c(0x155)](_0x47ae42[_0x34852c(0x165)]));return;}if(_0x2bd989['startsWith'](_0x47ae42['ypSOk'])||_0x2bd989[_0x34852c(0x166)](_0x47ae42[_0x34852c(0x140)])){const _0x3cc756=_0x2bd989[_0x34852c(0x166)](_0x47ae42[_0x34852c(0x153)])?https:http,_0x4489e1=path[_0x34852c(0x14a)](_0x2bd989),_0x11410c=path[_0x34852c(0x13e)](_0x1ae537,_0x4489e1),_0xeef31b=fs['createWriteStream'](_0x11410c);_0x3cc756[_0x34852c(0x13f)](_0x2bd989,_0x16c043=>{const _0x3b376f=_0x34852c,_0x39321a={'tKVdA':function(_0x4776c9,_0x4f1c9a){const _0x5b5654=a80_0x2dcc;return _0x47ae42[_0x5b5654(0x12f)](_0x4776c9,_0x4f1c9a);},'hHzTv':function(_0x4abb46,_0x1133ca){return _0x47ae42['gdVhL'](_0x4abb46,_0x1133ca);},'zWLBv':function(_0x76d0cf,_0x2f7cd1){const _0x1b4caa=a80_0x2dcc;return _0x47ae42[_0x1b4caa(0x16b)](_0x76d0cf,_0x2f7cd1);},'xlpXA':_0x47ae42[_0x3b376f(0x105)],'drDAL':_0x47ae42['nTZnb']};if(_0x47ae42[_0x3b376f(0x15f)](_0x16c043[_0x3b376f(0x152)],0xc8))_0x16c043[_0x3b376f(0x10f)](_0xeef31b),_0xeef31b['on'](_0x47ae42[_0x3b376f(0x131)],()=>{const _0x3340c8=_0x3b376f;_0xeef31b[_0x3340c8(0x110)]();const _0x865043=fs[_0x3340c8(0x14d)](_0x11410c),_0x5ec152=_0x39321a[_0x3340c8(0x14b)](_0x865043['size'],_0x39321a[_0x3340c8(0x11a)](0x400,0x400));if(_0x39321a[_0x3340c8(0x15e)](_0x5ec152,0x64)){this[_0x3340c8(0x126)][_0x3340c8(0x116)](util[_0x3340c8(0x155)](_0x39321a[_0x3340c8(0x136)],_0x5ec152[_0x3340c8(0x157)](0x2))),fs[_0x3340c8(0x15a)](_0x11410c);return;}this[_0x3340c8(0x126)]['debug'](util[_0x3340c8(0x155)](_0x39321a[_0x3340c8(0x134)],_0x11410c)),uploadAttachmentsManager[_0x3340c8(0x15d)](_0x11410c,_0x344cfc);});else{this['logger']['debug'](util['format'](_0x47ae42[_0x3b376f(0x135)],_0x16c043[_0x3b376f(0x152)])),_0xeef31b[_0x3b376f(0x110)](),fs[_0x3b376f(0x15a)](_0x11410c);return;}})['on'](_0x47ae42[_0x34852c(0x142)],_0x210ec3=>{const _0x2c3cc9=_0x34852c;this[_0x2c3cc9(0x126)][_0x2c3cc9(0x116)](util[_0x2c3cc9(0x155)](_0x47ae42[_0x2c3cc9(0x15b)],_0x210ec3[_0x2c3cc9(0x149)])),_0xeef31b[_0x2c3cc9(0x110)](),fs[_0x2c3cc9(0x15a)](_0x11410c);return;});}else{if(!fs[_0x34852c(0x112)](_0x2bd989)){this[_0x34852c(0x126)][_0x34852c(0x116)](util['format'](_0x47ae42[_0x34852c(0x132)],_0x2bd989));return;}const _0x1fa3af=fs['statSync'](_0x2bd989),_0x3827b2=_0x47ae42[_0x34852c(0x12f)](_0x1fa3af[_0x34852c(0x144)],_0x47ae42[_0x34852c(0x127)](0x400,0x400));if(_0x47ae42[_0x34852c(0x146)](_0x3827b2,0x64)){this[_0x34852c(0x126)][_0x34852c(0x116)](util[_0x34852c(0x155)](_0x47ae42['AUUgM'],_0x3827b2['toFixed'](0x2)));return;}const _0x1b19c7=path[_0x34852c(0x14a)](_0x2bd989),_0x1fd4d4=path['join'](_0x1ae537,_0x1b19c7);fs[_0x34852c(0x13c)](_0x2bd989,_0x1fd4d4),uploadAttachmentsManager[_0x34852c(0x15d)](_0x1fd4d4,_0x344cfc);}}static[a80_0x15283c(0x15d)](_0x232db1,_0x222a1d){const _0x29642f=a80_0x15283c,_0x2bccd7={};_0x2bccd7[_0x29642f(0x13d)]='BuildLevel',_0x2bccd7[_0x29642f(0x156)]=_0x29642f(0x107),_0x2bccd7['qVQWy']=_0x29642f(0x151),_0x2bccd7[_0x29642f(0x168)]='Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload';const _0x46ecaf=_0x2bccd7;try{const _0xcf23f5=AutomationFramework[_0x29642f(0x115)](),_0x518cce=AutomationFramework[_0x29642f(0x148)](_0xcf23f5,PlaywrightDriverModule['KEY_TEST_ID'],''),_0xa1e8a0=TestInfo[_0x29642f(0x10b)](_0x518cce),_0x2f435d=_0xa1e8a0[TestFrameworkConstants[_0x29642f(0x14e)]]||{};_0x2f435d[_0x232db1]={[TestFrameworkConstants['KEY_FILE_SIZE']]:fs[_0x29642f(0x14d)](_0x232db1)[_0x29642f(0x144)],[TestFrameworkConstants['KEY_FILE_NAME']]:path[_0x29642f(0x14a)](_0x232db1),[TestFrameworkConstants[_0x29642f(0x161)]]:_0x232db1,[TestFrameworkConstants[_0x29642f(0x103)]]:_0x222a1d?_0x46ecaf['yfBNj']:_0x46ecaf[_0x29642f(0x156)]},_0xa1e8a0[TestFrameworkConstants[_0x29642f(0x14e)]]=_0x2f435d,TestInfo['setTestDetails'](_0x518cce,_0xa1e8a0),this[_0x29642f(0x126)][_0x29642f(0x116)](util[_0x29642f(0x155)](_0x46ecaf[_0x29642f(0x106)],_0x232db1));}catch(_0x315d81){this[_0x29642f(0x126)][_0x29642f(0x116)](util[_0x29642f(0x155)](_0x46ecaf[_0x29642f(0x168)],_0x315d81[_0x29642f(0x149)]));}}static[a80_0x15283c(0x14f)](){const _0x3bc0fd=a80_0x15283c,_0x46ed2f={};_0x46ed2f[_0x3bc0fd(0x163)]=_0x3bc0fd(0x124),_0x46ed2f[_0x3bc0fd(0x14c)]=_0x3bc0fd(0x11d);const _0x42efeb=_0x46ed2f,_0x369ae6=os[_0x3bc0fd(0x145)](),_0x4c02db=path[_0x3bc0fd(0x13e)](_0x369ae6,_0x42efeb['PsbnR']);if(!fs[_0x3bc0fd(0x112)](_0x4c02db))return;const _0x4c7885=BrowserstackCLI[_0x3bc0fd(0x11c)]()[_0x3bc0fd(0x119)][_0x3bc0fd(0x111)]?.[_0x3bc0fd(0x109)]?.[_0x3bc0fd(0x162)]()?.[_0x3bc0fd(0x123)],_0x4d1087=path['join'](_0x4c02db,_0x4c7885);if(!fs[_0x3bc0fd(0x112)](_0x4d1087))return;const _0x2b8b53={};_0x2b8b53['recursive']=!![],_0x2b8b53[_0x3bc0fd(0x15c)]=!![],fs[_0x3bc0fd(0x13b)](_0x4d1087,_0x2b8b53),this[_0x3bc0fd(0x126)][_0x3bc0fd(0x116)](util['format'](_0x42efeb['qQYzZ']));}}function a80_0x2dcc(_0x327e26,_0x5bd68b){const _0x55e6cc=a80_0x55e6();return a80_0x2dcc=function(_0x2dcc56,_0x2e3f27){_0x2dcc56=_0x2dcc56-0x103;let _0x39f705=_0x55e6cc[_0x2dcc56];return _0x39f705;},a80_0x2dcc(_0x327e26,_0x5bd68b);}module[a80_0x15283c(0x10d)]=uploadAttachmentsManager;