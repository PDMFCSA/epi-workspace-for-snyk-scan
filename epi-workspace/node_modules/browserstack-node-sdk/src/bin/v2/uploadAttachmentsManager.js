const a82_0xff7715=a82_0x359c;(function(_0x4601a3,_0x2360df){const _0x49d043=a82_0x359c,_0x1b9cdc=_0x4601a3();while(!![]){try{const _0x358b5d=parseInt(_0x49d043(0xff))/0x1*(-parseInt(_0x49d043(0xc4))/0x2)+parseInt(_0x49d043(0xcb))/0x3+-parseInt(_0x49d043(0x10e))/0x4*(-parseInt(_0x49d043(0xd9))/0x5)+-parseInt(_0x49d043(0x106))/0x6+-parseInt(_0x49d043(0xcf))/0x7*(parseInt(_0x49d043(0xd1))/0x8)+-parseInt(_0x49d043(0xce))/0x9*(parseInt(_0x49d043(0x10d))/0xa)+parseInt(_0x49d043(0x112))/0xb;if(_0x358b5d===_0x2360df)break;else _0x1b9cdc['push'](_0x1b9cdc['shift']());}catch(_0x20431d){_0x1b9cdc['push'](_0x1b9cdc['shift']());}}}(a82_0x151d,0x418e5));function a82_0x359c(_0x24333e,_0x4db7a6){const _0x151d5e=a82_0x151d();return a82_0x359c=function(_0x359cb3,_0x22d6cf){_0x359cb3=_0x359cb3-0xb2;let _0x2f67b8=_0x151d5e[_0x359cb3];return _0x2f67b8;},a82_0x359c(_0x24333e,_0x4db7a6);}function a82_0x151d(){const _0x5b630c=['createWriteStream','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','http','finish','statusCode','File\x20downloaded\x20to:\x20%s','5VRZtWm','toObject','TestLevel','basename','QIAcR','BuildLevel','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','3199704wespUs','size','MDbhE','format','./modules/playwrightDriverModule','fNARv','getTestDetails','2364590alfkbj','118648Rkkmud','getState','path','.browserstack','13764564XiEPQm','EbjaH','recursive','kDCPj','debug','CWJrn','./browserstackCLI','getInstance','TestHubModule','https://','ZwHGd','toFixed','modules','trackFile','KEY_TEST_ATTACHMENTS','eZWqY','existsSync','DUKmw','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','SAxHM','iuwfg','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','logger','startsWith','get','qNnhG','175782LGcFbV','statSync','KEY_FILE_NAME','join','uploadAttachmentsManager','PWofW','HjFzd','1187451uMDHvX','KEY_FILE_LEVEL','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','9xnJpdr','31052BOzSlK','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','680hpXQjI','zTSnI','orEGE','./TestInfo','MpHmx','XXEUA','KEY_FILE_PATH','http://','35MWJOdh','Whijs','mkdirSync','uMDID','vjLvM','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','OxdiR','GUksa','nveju','https','homedir','JLawl','message','GbrLO','qFXAL','copyFileSync','force','trim','jeTDJ','KEY_TEST_ID','Cleared\x20attachment\x20folder','getTrackedInstance','KEY_FILE_SIZE','Created\x20folder:\x20%s','unlinkSync','buildHashedId','rQfVT','error','close','rmSync','CoiFH','clearAttachments'];a82_0x151d=function(){return _0x5b630c;};return a82_0x151d();}const os=require('os'),fs=require('fs'),path=require(a82_0xff7715(0x110)),util=require('util'),BrowserstackCLI=require(a82_0xff7715(0x118)),https=require(a82_0xff7715(0xe2)),http=require(a82_0xff7715(0xfb)),AutomationFramework=require('./framework/automationFramework'),PlaywrightDriverModule=require(a82_0xff7715(0x10a)),TestInfo=require(a82_0xff7715(0xd4)),TestFrameworkConstants=require('./framework/constants/testFrameworkConstants'),{createClassLogger}=require('../../helpers/classLogger.js');class uploadAttachmentsManager{static ['logger']=createClassLogger(a82_0xff7715(0xc8));static['uploadAttachments'](_0xbc3371,_0x1b0372=![]){const _0x313648=a82_0xff7715,_0x4578ca={};_0x4578ca[_0x313648(0xbe)]=function(_0x2aa3ca,_0x4b90c7){return _0x2aa3ca/_0x4b90c7;},_0x4578ca['EbjaH']=function(_0x2157c0,_0xe6a494){return _0x2157c0*_0xe6a494;},_0x4578ca['uMDID']=function(_0x26c65d,_0x2b6a80){return _0x26c65d>_0x2b6a80;},_0x4578ca[_0x313648(0xeb)]='Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.',_0x4578ca[_0x313648(0x117)]=_0x313648(0xfe),_0x4578ca[_0x313648(0x10b)]=function(_0x55b13c,_0x4048f3){return _0x55b13c===_0x4048f3;},_0x4578ca[_0x313648(0xe4)]=_0x313648(0xfc),_0x4578ca[_0x313648(0xd6)]=_0x313648(0xbf),_0x4578ca[_0x313648(0xe1)]=_0x313648(0xcd),_0x4578ca['zTSnI']='Attachment\x20recevied\x20for\x20path:\x20%s',_0x4578ca['VIjPY']='.browserstack',_0x4578ca[_0x313648(0xd5)]=_0x313648(0xbc),_0x4578ca[_0x313648(0xe6)]='Created\x20.browserstack\x20folder\x20at:\x20%s',_0x4578ca['Whijs']=_0x313648(0xf0),_0x4578ca[_0x313648(0xe0)]=function(_0x430728,_0xe4fe8e){return _0x430728===_0xe4fe8e;},_0x4578ca[_0x313648(0x115)]=_0x313648(0xfa),_0x4578ca['orEGE']=_0x313648(0xb3),_0x4578ca['CoiFH']=_0x313648(0xd8),_0x4578ca[_0x313648(0xca)]=_0x313648(0xf4),_0x4578ca[_0x313648(0xc9)]='Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s',_0x4578ca[_0x313648(0xf3)]=function(_0xb48c82,_0x313863){return _0xb48c82*_0x313863;},_0x4578ca[_0x313648(0xb4)]='File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.';const _0x1b7172=_0x4578ca;this[_0x313648(0xc0)]['debug'](util[_0x313648(0x109)](_0x1b7172[_0x313648(0xd2)],_0xbc3371));const _0x1dd8ac=os['homedir'](),_0x4b7c42=path[_0x313648(0xc7)](_0x1dd8ac,_0x1b7172['VIjPY']);!fs[_0x313648(0xba)](_0x4b7c42)&&(this[_0x313648(0xc0)]['debug'](util['format'](_0x1b7172[_0x313648(0xd5)],_0x4b7c42)),fs['mkdirSync'](_0x4b7c42),this['logger'][_0x313648(0x116)](util[_0x313648(0x109)](_0x1b7172[_0x313648(0xe6)],_0x4b7c42)));const _0x3a4ee5=BrowserstackCLI[_0x313648(0x119)]()[_0x313648(0xb6)][_0x313648(0xb2)]?.['testhubConfig']?.[_0x313648(0x100)]()?.[_0x313648(0xf2)],_0x37d7f2=path['join'](_0x4b7c42,_0x3a4ee5);!fs[_0x313648(0xba)](_0x37d7f2)&&(fs[_0x313648(0xdb)](_0x37d7f2),this[_0x313648(0xc0)][_0x313648(0x116)](util[_0x313648(0x109)](_0x1b7172[_0x313648(0xda)],_0x37d7f2)));if(_0x1b7172[_0x313648(0xe0)](_0xbc3371[_0x313648(0xea)](),'')){this[_0x313648(0xc0)][_0x313648(0x116)](util[_0x313648(0x109)](_0x1b7172[_0x313648(0x115)]));return;}if(_0xbc3371[_0x313648(0xc1)](_0x1b7172[_0x313648(0xd3)])||_0xbc3371[_0x313648(0xc1)](_0x1b7172[_0x313648(0xf7)])){const _0x12ba32=_0xbc3371[_0x313648(0xc1)](_0x1b7172[_0x313648(0xd3)])?https:http,_0x50374f=path[_0x313648(0x102)](_0xbc3371),_0x51637b=path[_0x313648(0xc7)](_0x37d7f2,_0x50374f),_0x52e4c1=fs[_0x313648(0xf9)](_0x51637b);_0x12ba32[_0x313648(0xc2)](_0xbc3371,_0x1b1cdf=>{const _0x4ccfe3=_0x313648,_0x133080={'LJWiH':function(_0x46becc,_0x24c916){return _0x1b7172['iuwfg'](_0x46becc,_0x24c916);},'MDbhE':function(_0x96699d,_0x55f5b1){const _0x47e5c7=a82_0x359c;return _0x1b7172[_0x47e5c7(0x113)](_0x96699d,_0x55f5b1);},'FwLiZ':function(_0x4ecab1,_0x139608){const _0x1d67a0=a82_0x359c;return _0x1b7172[_0x1d67a0(0xdc)](_0x4ecab1,_0x139608);},'FdzXi':_0x1b7172['jeTDJ'],'vjLvM':_0x1b7172['CWJrn']};if(_0x1b7172['fNARv'](_0x1b1cdf[_0x4ccfe3(0xfd)],0xc8))_0x1b1cdf['pipe'](_0x52e4c1),_0x52e4c1['on'](_0x1b7172[_0x4ccfe3(0xe4)],()=>{const _0x24f229=_0x4ccfe3;_0x52e4c1['close']();const _0x2c6f80=fs[_0x24f229(0xc5)](_0x51637b),_0xc90c73=_0x133080['LJWiH'](_0x2c6f80[_0x24f229(0x107)],_0x133080[_0x24f229(0x108)](0x400,0x400));if(_0x133080['FwLiZ'](_0xc90c73,0x64)){this['logger'][_0x24f229(0x116)](util['format'](_0x133080['FdzXi'],_0xc90c73[_0x24f229(0xb5)](0x2))),fs[_0x24f229(0xf1)](_0x51637b);return;}this[_0x24f229(0xc0)]['debug'](util[_0x24f229(0x109)](_0x133080[_0x24f229(0xdd)],_0x51637b)),uploadAttachmentsManager[_0x24f229(0xb7)](_0x51637b,_0x1b0372);});else{this[_0x4ccfe3(0xc0)][_0x4ccfe3(0x116)](util[_0x4ccfe3(0x109)](_0x1b7172['XXEUA'],_0x1b1cdf[_0x4ccfe3(0xfd)])),_0x52e4c1[_0x4ccfe3(0xf5)](),fs[_0x4ccfe3(0xf1)](_0x51637b);return;}})['on'](_0x1b7172[_0x313648(0xca)],_0x1766fd=>{const _0xa5f462=_0x313648;this[_0xa5f462(0xc0)][_0xa5f462(0x116)](util[_0xa5f462(0x109)](_0x1b7172['nveju'],_0x1766fd['message'])),_0x52e4c1[_0xa5f462(0xf5)](),fs[_0xa5f462(0xf1)](_0x51637b);return;});}else{if(!fs[_0x313648(0xba)](_0xbc3371)){this[_0x313648(0xc0)][_0x313648(0x116)](util[_0x313648(0x109)](_0x1b7172[_0x313648(0xc9)],_0xbc3371));return;}const _0x28b410=fs['statSync'](_0xbc3371),_0x4137b5=_0x1b7172['iuwfg'](_0x28b410['size'],_0x1b7172[_0x313648(0xf3)](0x400,0x400));if(_0x1b7172[_0x313648(0xdc)](_0x4137b5,0x64)){this['logger'][_0x313648(0x116)](util[_0x313648(0x109)](_0x1b7172[_0x313648(0xb4)],_0x4137b5[_0x313648(0xb5)](0x2)));return;}const _0x1dfb3a=path[_0x313648(0x102)](_0xbc3371),_0x2d898e=path[_0x313648(0xc7)](_0x37d7f2,_0x1dfb3a);fs[_0x313648(0xe8)](_0xbc3371,_0x2d898e),uploadAttachmentsManager[_0x313648(0xb7)](_0x2d898e,_0x1b0372);}}static['trackFile'](_0x43b5e3,_0x54f23f){const _0x3f7dab=a82_0xff7715,_0x31678f={};_0x31678f[_0x3f7dab(0xb9)]=_0x3f7dab(0x104),_0x31678f[_0x3f7dab(0xc3)]=_0x3f7dab(0x101),_0x31678f['OxdiR']=_0x3f7dab(0x105),_0x31678f[_0x3f7dab(0xe7)]=_0x3f7dab(0xd0);const _0x1d3715=_0x31678f;try{const _0x2652bd=AutomationFramework[_0x3f7dab(0xee)](),_0x5074cc=AutomationFramework[_0x3f7dab(0x10f)](_0x2652bd,PlaywrightDriverModule[_0x3f7dab(0xec)],''),_0x3982cb=TestInfo[_0x3f7dab(0x10c)](_0x5074cc),_0x48b30d=_0x3982cb[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{};_0x48b30d[_0x43b5e3]={[TestFrameworkConstants[_0x3f7dab(0xef)]]:fs[_0x3f7dab(0xc5)](_0x43b5e3)['size'],[TestFrameworkConstants[_0x3f7dab(0xc6)]]:path[_0x3f7dab(0x102)](_0x43b5e3),[TestFrameworkConstants[_0x3f7dab(0xd7)]]:_0x43b5e3,[TestFrameworkConstants[_0x3f7dab(0xcc)]]:_0x54f23f?_0x1d3715[_0x3f7dab(0xb9)]:_0x1d3715[_0x3f7dab(0xc3)]},_0x3982cb[TestFrameworkConstants[_0x3f7dab(0xb8)]]=_0x48b30d,TestInfo['setTestDetails'](_0x5074cc,_0x3982cb),this[_0x3f7dab(0xc0)]['debug'](util[_0x3f7dab(0x109)](_0x1d3715[_0x3f7dab(0xdf)],_0x43b5e3));}catch(_0x41b0ac){this[_0x3f7dab(0xc0)][_0x3f7dab(0x116)](util[_0x3f7dab(0x109)](_0x1d3715['qFXAL'],_0x41b0ac[_0x3f7dab(0xe5)]));}}static[a82_0xff7715(0xf8)](){const _0x1f6767=a82_0xff7715,_0x53625d={};_0x53625d[_0x1f6767(0xbb)]=_0x1f6767(0x111),_0x53625d['QIAcR']=_0x1f6767(0xde),_0x53625d[_0x1f6767(0xbd)]=_0x1f6767(0xed);const _0x37c67f=_0x53625d,_0xf5c26=os[_0x1f6767(0xe3)](),_0x4b15ae=path[_0x1f6767(0xc7)](_0xf5c26,_0x37c67f[_0x1f6767(0xbb)]);if(!fs[_0x1f6767(0xba)](_0x4b15ae))return;const _0x3ecf4a=BrowserstackCLI[_0x1f6767(0x119)]()[_0x1f6767(0xb6)][_0x1f6767(0xb2)]?.['testhubConfig']?.[_0x1f6767(0x100)]()?.[_0x1f6767(0xf2)],_0x30d834=_0x3ecf4a?path[_0x1f6767(0xc7)](_0x4b15ae,_0x3ecf4a):null;if(!_0x30d834||!fs['existsSync'](_0x30d834)){this[_0x1f6767(0xc0)][_0x1f6767(0x116)](util[_0x1f6767(0x109)](_0x37c67f[_0x1f6767(0x103)],_0x3ecf4a));return;}const _0x44c1e4={};_0x44c1e4[_0x1f6767(0x114)]=!![],_0x44c1e4[_0x1f6767(0xe9)]=!![],fs[_0x1f6767(0xf6)](_0x30d834,_0x44c1e4),this[_0x1f6767(0xc0)][_0x1f6767(0x116)](util['format'](_0x37c67f[_0x1f6767(0xbd)]));}}module['exports']=uploadAttachmentsManager;