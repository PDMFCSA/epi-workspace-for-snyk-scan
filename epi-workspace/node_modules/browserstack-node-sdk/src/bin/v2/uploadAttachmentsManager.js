const a80_0x5c2d63=a80_0x45ce;(function(_0x46b9bc,_0x44a4d9){const _0x196458=a80_0x45ce,_0x10f4b6=_0x46b9bc();while(!![]){try{const _0x35f878=parseInt(_0x196458(0x150))/0x1*(parseInt(_0x196458(0x10a))/0x2)+-parseInt(_0x196458(0xf3))/0x3+parseInt(_0x196458(0xf4))/0x4+parseInt(_0x196458(0x13e))/0x5*(parseInt(_0x196458(0x126))/0x6)+parseInt(_0x196458(0x11a))/0x7*(parseInt(_0x196458(0x145))/0x8)+parseInt(_0x196458(0x119))/0x9+-parseInt(_0x196458(0x123))/0xa;if(_0x35f878===_0x44a4d9)break;else _0x10f4b6['push'](_0x10f4b6['shift']());}catch(_0x2286c0){_0x10f4b6['push'](_0x10f4b6['shift']());}}}(a80_0x2372,0xe1f6c));function a80_0x45ce(_0x23029d,_0x53f2ee){const _0x23727b=a80_0x2372();return a80_0x45ce=function(_0x45ce7f,_0x2132fc){_0x45ce7f=_0x45ce7f-0xf3;let _0x17a1e5=_0x23727b[_0x45ce7f];return _0x17a1e5;},a80_0x45ce(_0x23029d,_0x53f2ee);}const os=require('os'),fs=require('fs'),path=require('path'),util=require(a80_0x5c2d63(0x12a)),BrowserstackCLI=require(a80_0x5c2d63(0x14f)),https=require(a80_0x5c2d63(0x122)),http=require('http'),AutomationFramework=require(a80_0x5c2d63(0x113)),PlaywrightDriverModule=require(a80_0x5c2d63(0x111)),TestInfo=require(a80_0x5c2d63(0x151)),TestFrameworkConstants=require(a80_0x5c2d63(0x12c)),{createClassLogger}=require(a80_0x5c2d63(0x139));function a80_0x2372(){const _0x5c0f79=['copyFileSync','KEY_TEST_ATTACHMENTS','get','trackFile','./browserstackCLI','183383clSejk','./TestInfo','pipe','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','logger','wsiTV','jGmay','oBJhM','3900579bDiNEl','3442232WiGkgp','KEY_FILE_PATH','Rssgc','https://','getTestDetails','startsWith','http://','statSync','force','fadJf','debug','toObject','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','rgVFO','BuildLevel','KEY_FILE_NAME','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','basename','getTrackedInstance','vXczv','Created\x20folder:\x20%s','join','20gcsVOT','getInstance','.browserstack','size','MSuty','yxHHB','UTsdy','./modules/playwrightDriverModule','hiriP','./framework/automationFramework','modules','error','TestLevel','ACvvh','existsSync','14399208CEoELI','7NStcIL','tslbl','clearAttachments','awTcE','finish','kyyOG','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','nIoby','https','36523840sGqDmY','Created\x20.browserstack\x20folder\x20at:\x20%s','unlinkSync','1735116erVZdz','KEY_FILE_SIZE','KYmWr','toFixed','util','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','./framework/constants/testFrameworkConstants','getState','mkdirSync','testhubConfig','nZuFO','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','statusCode','rhtIS','KIZqQ','Attachment\x20recevied\x20for\x20path:\x20%s','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','rmSync','../../helpers/classLogger.js','RoIab','recursive','bRqoq','format','20CisgyR','neKvL','TestHubModule','WExgM','message','SaRNV','buildHashedId','3416648kLnQaN','nZkVm','close','FmaQb','uploadAttachmentsManager','YFwKZ'];a80_0x2372=function(){return _0x5c0f79;};return a80_0x2372();}class uploadAttachmentsManager{static [a80_0x5c2d63(0x155)]=createClassLogger(a80_0x5c2d63(0x149));static['uploadAttachments'](_0x2ed14b,_0x234223=![]){const _0x287e6e=a80_0x5c2d63,_0x5edff3={};_0x5edff3[_0x287e6e(0x134)]=function(_0x7a35b2,_0x291539){return _0x7a35b2/_0x291539;},_0x5edff3[_0x287e6e(0xfd)]=function(_0x52139c,_0x321948){return _0x52139c*_0x321948;},_0x5edff3[_0x287e6e(0x10f)]=function(_0xebf776,_0xfa5224){return _0xebf776>_0xfa5224;},_0x5edff3['jZpnh']=_0x287e6e(0x137),_0x5edff3['jGmay']='File\x20downloaded\x20to:\x20%s',_0x5edff3[_0x287e6e(0x11f)]=function(_0x5bbca2,_0x2b2224){return _0x5bbca2===_0x2b2224;},_0x5edff3[_0x287e6e(0x13c)]=_0x287e6e(0x11e),_0x5edff3[_0x287e6e(0x143)]=_0x287e6e(0x154),_0x5edff3[_0x287e6e(0x158)]=_0x287e6e(0x104),_0x5edff3[_0x287e6e(0x110)]=_0x287e6e(0x135),_0x5edff3[_0x287e6e(0x148)]=_0x287e6e(0x10c),_0x5edff3[_0x287e6e(0x11b)]=_0x287e6e(0x131),_0x5edff3[_0x287e6e(0x107)]=_0x287e6e(0x124),_0x5edff3[_0x287e6e(0x156)]=_0x287e6e(0x108),_0x5edff3['rhtIS']=_0x287e6e(0x12b),_0x5edff3[_0x287e6e(0x14a)]=_0x287e6e(0xf7),_0x5edff3['SdOzP']=_0x287e6e(0xfa),_0x5edff3[_0x287e6e(0x10e)]=_0x287e6e(0x115),_0x5edff3[_0x287e6e(0x13f)]=_0x287e6e(0x153),_0x5edff3[_0x287e6e(0x117)]=function(_0x4038ca,_0x55703f){return _0x4038ca>_0x55703f;},_0x5edff3[_0x287e6e(0xf6)]=_0x287e6e(0x136);const _0x19b2c7=_0x5edff3;this[_0x287e6e(0x155)][_0x287e6e(0xfe)](util[_0x287e6e(0x13d)](_0x19b2c7['UTsdy'],_0x2ed14b));const _0x360777=os['homedir'](),_0x389216=path[_0x287e6e(0x109)](_0x360777,_0x19b2c7[_0x287e6e(0x148)]);!fs[_0x287e6e(0x118)](_0x389216)&&(this[_0x287e6e(0x155)][_0x287e6e(0xfe)](util[_0x287e6e(0x13d)](_0x19b2c7[_0x287e6e(0x11b)],_0x389216)),fs[_0x287e6e(0x12e)](_0x389216),this['logger'][_0x287e6e(0xfe)](util[_0x287e6e(0x13d)](_0x19b2c7[_0x287e6e(0x107)],_0x389216)));const _0x9bcd6b=BrowserstackCLI[_0x287e6e(0x10b)]()[_0x287e6e(0x114)][_0x287e6e(0x140)]?.['testhubConfig']?.[_0x287e6e(0xff)]()?.[_0x287e6e(0x144)],_0x285823=path[_0x287e6e(0x109)](_0x389216,_0x9bcd6b);!fs[_0x287e6e(0x118)](_0x285823)&&(fs[_0x287e6e(0x12e)](_0x285823),this[_0x287e6e(0x155)][_0x287e6e(0xfe)](util['format'](_0x19b2c7[_0x287e6e(0x156)],_0x285823)));if(_0x19b2c7[_0x287e6e(0x11f)](_0x2ed14b['trim'](),'')){this[_0x287e6e(0x155)][_0x287e6e(0xfe)](util[_0x287e6e(0x13d)](_0x19b2c7[_0x287e6e(0x133)]));return;}if(_0x2ed14b[_0x287e6e(0xf9)](_0x19b2c7[_0x287e6e(0x14a)])||_0x2ed14b[_0x287e6e(0xf9)](_0x19b2c7['SdOzP'])){const _0xc939b0=_0x2ed14b[_0x287e6e(0xf9)](_0x19b2c7[_0x287e6e(0x14a)])?https:http,_0x1f10f3=path[_0x287e6e(0x105)](_0x2ed14b),_0x2c19e2=path[_0x287e6e(0x109)](_0x285823,_0x1f10f3),_0x228a97=fs['createWriteStream'](_0x2c19e2);_0xc939b0[_0x287e6e(0x14d)](_0x2ed14b,_0x38f1bd=>{const _0x4f898b=_0x287e6e,_0x276176={'BMrkA':function(_0x20d1d1,_0x3e0e82){const _0x37ea2b=a80_0x45ce;return _0x19b2c7[_0x37ea2b(0x134)](_0x20d1d1,_0x3e0e82);},'awTcE':function(_0x336bb6,_0x1973e6){const _0x468655=a80_0x45ce;return _0x19b2c7[_0x468655(0xfd)](_0x336bb6,_0x1973e6);},'pWlFJ':function(_0x3366ed,_0x53a9bd){const _0x43e1ba=a80_0x45ce;return _0x19b2c7[_0x43e1ba(0x10f)](_0x3366ed,_0x53a9bd);},'DZvSo':_0x19b2c7['jZpnh'],'nIoby':_0x19b2c7[_0x4f898b(0x157)]};if(_0x19b2c7[_0x4f898b(0x11f)](_0x38f1bd[_0x4f898b(0x132)],0xc8))_0x38f1bd[_0x4f898b(0x152)](_0x228a97),_0x228a97['on'](_0x19b2c7[_0x4f898b(0x13c)],()=>{const _0x36c99d=_0x4f898b;_0x228a97[_0x36c99d(0x147)]();const _0x402e41=fs['statSync'](_0x2c19e2),_0x3ac165=_0x276176['BMrkA'](_0x402e41['size'],_0x276176[_0x36c99d(0x11d)](0x400,0x400));if(_0x276176['pWlFJ'](_0x3ac165,0x64)){this['logger'][_0x36c99d(0xfe)](util[_0x36c99d(0x13d)](_0x276176['DZvSo'],_0x3ac165[_0x36c99d(0x129)](0x2))),fs[_0x36c99d(0x125)](_0x2c19e2);return;}this['logger'][_0x36c99d(0xfe)](util[_0x36c99d(0x13d)](_0x276176[_0x36c99d(0x121)],_0x2c19e2)),uploadAttachmentsManager[_0x36c99d(0x14e)](_0x2c19e2,_0x234223);});else{this[_0x4f898b(0x155)][_0x4f898b(0xfe)](util[_0x4f898b(0x13d)](_0x19b2c7[_0x4f898b(0x143)],_0x38f1bd[_0x4f898b(0x132)])),_0x228a97[_0x4f898b(0x147)](),fs[_0x4f898b(0x125)](_0x2c19e2);return;}})['on'](_0x19b2c7['MSuty'],_0x3fc5c6=>{const _0xaaf084=_0x287e6e;this[_0xaaf084(0x155)]['debug'](util['format'](_0x19b2c7[_0xaaf084(0x158)],_0x3fc5c6[_0xaaf084(0x142)])),_0x228a97[_0xaaf084(0x147)](),fs['unlinkSync'](_0x2c19e2);return;});}else{if(!fs[_0x287e6e(0x118)](_0x2ed14b)){this['logger'][_0x287e6e(0xfe)](util[_0x287e6e(0x13d)](_0x19b2c7[_0x287e6e(0x13f)],_0x2ed14b));return;}const _0x2e8a5a=fs[_0x287e6e(0xfb)](_0x2ed14b),_0x3740a2=_0x19b2c7[_0x287e6e(0x134)](_0x2e8a5a[_0x287e6e(0x10d)],_0x19b2c7[_0x287e6e(0xfd)](0x400,0x400));if(_0x19b2c7[_0x287e6e(0x117)](_0x3740a2,0x64)){this['logger'][_0x287e6e(0xfe)](util[_0x287e6e(0x13d)](_0x19b2c7['Rssgc'],_0x3740a2[_0x287e6e(0x129)](0x2)));return;}const _0x1266b2=path['basename'](_0x2ed14b),_0xe76c31=path[_0x287e6e(0x109)](_0x285823,_0x1266b2);fs[_0x287e6e(0x14b)](_0x2ed14b,_0xe76c31),uploadAttachmentsManager['trackFile'](_0xe76c31,_0x234223);}}static[a80_0x5c2d63(0x14e)](_0x26de5e,_0x540be5){const _0x3f8a0=a80_0x5c2d63,_0x18346d={};_0x18346d[_0x3f8a0(0x130)]=_0x3f8a0(0x102),_0x18346d[_0x3f8a0(0x13a)]=_0x3f8a0(0x116),_0x18346d[_0x3f8a0(0x112)]=_0x3f8a0(0x120),_0x18346d[_0x3f8a0(0x101)]='Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload';const _0x3c74c0=_0x18346d;try{const _0x1e9edb=AutomationFramework[_0x3f8a0(0x106)](),_0x3f0300=AutomationFramework[_0x3f8a0(0x12d)](_0x1e9edb,PlaywrightDriverModule['KEY_TEST_ID'],''),_0x1c8e58=TestInfo[_0x3f8a0(0xf8)](_0x3f0300),_0x5e8746=_0x1c8e58[TestFrameworkConstants[_0x3f8a0(0x14c)]]||{};_0x5e8746[_0x26de5e]={[TestFrameworkConstants[_0x3f8a0(0x127)]]:fs[_0x3f8a0(0xfb)](_0x26de5e)[_0x3f8a0(0x10d)],[TestFrameworkConstants[_0x3f8a0(0x103)]]:path[_0x3f8a0(0x105)](_0x26de5e),[TestFrameworkConstants[_0x3f8a0(0xf5)]]:_0x26de5e,[TestFrameworkConstants['KEY_FILE_LEVEL']]:_0x540be5?_0x3c74c0[_0x3f8a0(0x130)]:_0x3c74c0[_0x3f8a0(0x13a)]},_0x1c8e58[TestFrameworkConstants[_0x3f8a0(0x14c)]]=_0x5e8746,TestInfo['setTestDetails'](_0x3f0300,_0x1c8e58),this[_0x3f8a0(0x155)][_0x3f8a0(0xfe)](util[_0x3f8a0(0x13d)](_0x3c74c0[_0x3f8a0(0x112)],_0x26de5e));}catch(_0x384ea6){this[_0x3f8a0(0x155)][_0x3f8a0(0xfe)](util[_0x3f8a0(0x13d)](_0x3c74c0[_0x3f8a0(0x101)],_0x384ea6['message']));}}static[a80_0x5c2d63(0x11c)](){const _0x5f5a88=a80_0x5c2d63,_0x3d368f={};_0x3d368f[_0x5f5a88(0x141)]=_0x5f5a88(0x10c),_0x3d368f[_0x5f5a88(0x146)]=_0x5f5a88(0x100),_0x3d368f['KYmWr']='Cleared\x20attachment\x20folder';const _0x28aa8c=_0x3d368f,_0xe9a3a3=os['homedir'](),_0x3e4b87=path['join'](_0xe9a3a3,_0x28aa8c[_0x5f5a88(0x141)]);if(!fs[_0x5f5a88(0x118)](_0x3e4b87))return;const _0x5b8312=BrowserstackCLI[_0x5f5a88(0x10b)]()['modules']['TestHubModule']?.[_0x5f5a88(0x12f)]?.[_0x5f5a88(0xff)]()?.[_0x5f5a88(0x144)],_0x288263=_0x5b8312?path['join'](_0x3e4b87,_0x5b8312):null;if(!_0x288263||!fs['existsSync'](_0x288263)){this[_0x5f5a88(0x155)]['debug'](util[_0x5f5a88(0x13d)](_0x28aa8c[_0x5f5a88(0x146)],_0x5b8312));return;}const _0x19b93b={};_0x19b93b[_0x5f5a88(0x13b)]=!![],_0x19b93b[_0x5f5a88(0xfc)]=!![],fs[_0x5f5a88(0x138)](_0x288263,_0x19b93b),this[_0x5f5a88(0x155)]['debug'](util['format'](_0x28aa8c[_0x5f5a88(0x128)]));}}module['exports']=uploadAttachmentsManager;