function a89_0x182d(){const _0x19b9ed=['util','trackFile:\x20TestFramework\x20not\x20available,\x20cannot\x20track\x20attachment','statSync',',\x20filepath:\x20','CWfKg','resolveInstance','logger','toObject','format','TEST','recursive','get','tAuTM','close','Created\x20folder:\x20%s','trackFile:\x20Stored\x20attachment\x20in\x20instance\x20memory\x20for\x20testId:\x20','basename','emnBM','TestHubModule','getTestDetails','modules','addMultipleEntries','./state/hookState','toLowerCase','gNlZn','../../helpers/classLogger.js','./framework/automationFramework','AviLM','15572061OSsilt','TyvKE','getInstance','getTrackedInstance','copyFileSync','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','http://','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','HyZZx','OQWLo','getTestIdentifierFromTestInfo','HzAdD','message','getTestFramework','__workerDetails','http','VwjLh','toFixed','.browserstack','finish','./browserstackCLI','trim','8xWTECc','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','Created\x20.browserstack\x20folder\x20at:\x20%s','DLutB','trackFile:\x20Jest+Playwright\x20-\x20testId\x20(testIdentifier):\x20','wiQuX','20035IEBlbQ','Attachment\x20recevied\x20for\x20path:\x20%s','BuildLevel','__jestCurrentTestIdentifier','gblmR','File\x20downloaded\x20to:\x20%s','khYyT','shrTe','getAllData','uploadAttachments','trackFile:\x20Cucumber+Playwright\x20-\x20testId:\x20','Cleared\x20attachment\x20folder','6439748nJLrYz','dOWeg','KEY_TEST_ID','size','arMQO','CYIHy','694745ATUPYh','920416dapEPh','YBGKC','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','getTestFrameworkDetail','KEY_TEST_ATTACHMENTS','statusCode','KEY_FILE_PATH','existsSync','debug','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','getState','trackFile','retry','KEY_FILE_SIZE','unlinkSync','ojEjS','QDKGy','OulNB','caCqo','kWqyl','startsWith','./framework/constants/testFrameworkConstants','159288vsdEkn','./state/testFrameworkState','sRjOB','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','neWAF','testInfo','path','jest','join','XrTFg','VhNgQ','rmSync','JHoRC','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','testhubConfig','LWlCM','force','homedir','https','buildHashedId','3218576IYzATw','trackFile:\x20Instance\x20not\x20available,\x20cannot\x20track\x20attachment','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','FKSAR','TestLevel','fQBKm','ZUNtw','KEY_FILE_NAME','1542oSJTla','zIiJm','isRunning','pipe'];a89_0x182d=function(){return _0x19b9ed;};return a89_0x182d();}function a89_0x677f(_0x1e9c01,_0x1fe561){const _0x182d35=a89_0x182d();return a89_0x677f=function(_0x677fc1,_0x52b2f7){_0x677fc1=_0x677fc1-0x7a;let _0x184282=_0x182d35[_0x677fc1];return _0x184282;},a89_0x677f(_0x1e9c01,_0x1fe561);}const a89_0x456f95=a89_0x677f;(function(_0x1a0f45,_0x27450f){const _0x1e39ff=a89_0x677f,_0x1c5bdd=_0x1a0f45();while(!![]){try{const _0x35c390=parseInt(_0x1e39ff(0x99))/0x1+parseInt(_0x1e39ff(0x9a))/0x2+-parseInt(_0x1e39ff(0xb0))/0x3+-parseInt(_0x1e39ff(0xc4))/0x4+-parseInt(_0x1e39ff(0x87))/0x5*(-parseInt(_0x1e39ff(0xcc))/0x6)+parseInt(_0x1e39ff(0x93))/0x7+-parseInt(_0x1e39ff(0x81))/0x8*(parseInt(_0x1e39ff(0xec))/0x9);if(_0x35c390===_0x27450f)break;else _0x1c5bdd['push'](_0x1c5bdd['shift']());}catch(_0xae2901){_0x1c5bdd['push'](_0x1c5bdd['shift']());}}}(a89_0x182d,0x7e28b));const os=require('os'),fs=require('fs'),path=require(a89_0x456f95(0xb6)),util=require(a89_0x456f95(0xd0)),BrowserstackCLI=require(a89_0x456f95(0x7f)),https=require(a89_0x456f95(0xc2)),http=require(a89_0x456f95(0x7a)),AutomationFramework=require(a89_0x456f95(0xea)),PlaywrightDriverModule=require('./modules/playwrightDriverModule'),TestInfo=require('./TestInfo'),TestFrameworkConstants=require(a89_0x456f95(0xaf)),{createClassLogger}=require(a89_0x456f95(0xe9));class uploadAttachmentsManager{static ['logger']=createClassLogger('uploadAttachmentsManager');static[a89_0x456f95(0x90)](_0x223225,_0x3a43ad=![]){const _0x43a9d9=a89_0x456f95,_0x90c7fc={};_0x90c7fc[_0x43a9d9(0xcd)]=function(_0x40ccb9,_0x399de6){return _0x40ccb9/_0x399de6;},_0x90c7fc[_0x43a9d9(0xf7)]=function(_0x41c53c,_0x2b30fd){return _0x41c53c*_0x2b30fd;},_0x90c7fc[_0x43a9d9(0x94)]=function(_0x23fcd1,_0x4b9afa){return _0x23fcd1>_0x4b9afa;},_0x90c7fc[_0x43a9d9(0xb4)]=_0x43a9d9(0xf3),_0x90c7fc['KUQrs']=_0x43a9d9(0x8c),_0x90c7fc['gNlZn']=function(_0x236aae,_0x44144b){return _0x236aae===_0x44144b;},_0x90c7fc['UwLkL']=_0x43a9d9(0x7e),_0x90c7fc[_0x43a9d9(0xba)]=_0x43a9d9(0x9c),_0x90c7fc[_0x43a9d9(0xb2)]=_0x43a9d9(0xa3),_0x90c7fc[_0x43a9d9(0xac)]=_0x43a9d9(0x88),_0x90c7fc['psGDD']=_0x43a9d9(0x7d),_0x90c7fc[_0x43a9d9(0xa9)]=_0x43a9d9(0xbd),_0x90c7fc[_0x43a9d9(0xd4)]=_0x43a9d9(0x83),_0x90c7fc['emnBM']=_0x43a9d9(0xde),_0x90c7fc[_0x43a9d9(0x8d)]=_0x43a9d9(0xf1),_0x90c7fc[_0x43a9d9(0xca)]='https://',_0x90c7fc[_0x43a9d9(0xc9)]=_0x43a9d9(0xf2),_0x90c7fc[_0x43a9d9(0xbf)]='error',_0x90c7fc[_0x43a9d9(0xeb)]='Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s',_0x90c7fc['tJSrE']=function(_0x4e313e,_0x273318){return _0x4e313e/_0x273318;},_0x90c7fc[_0x43a9d9(0xf5)]=function(_0x290669,_0x3864a5){return _0x290669>_0x3864a5;},_0x90c7fc[_0x43a9d9(0xad)]=_0x43a9d9(0x82);const _0x276ea7=_0x90c7fc;this[_0x43a9d9(0xd6)][_0x43a9d9(0xa2)](util[_0x43a9d9(0xd8)](_0x276ea7['caCqo'],_0x223225));const _0x36f92a=os[_0x43a9d9(0xc1)](),_0x59ac42=path[_0x43a9d9(0xb8)](_0x36f92a,_0x276ea7['psGDD']);!fs['existsSync'](_0x59ac42)&&(this['logger'][_0x43a9d9(0xa2)](util['format'](_0x276ea7[_0x43a9d9(0xa9)],_0x59ac42)),fs['mkdirSync'](_0x59ac42),this['logger'][_0x43a9d9(0xa2)](util[_0x43a9d9(0xd8)](_0x276ea7[_0x43a9d9(0xd4)],_0x59ac42)));const _0x4c2683=BrowserstackCLI[_0x43a9d9(0xee)]()[_0x43a9d9(0xe4)][_0x43a9d9(0xe2)]?.['testhubConfig']?.[_0x43a9d9(0xd7)]()?.[_0x43a9d9(0xc3)],_0x232cca=path[_0x43a9d9(0xb8)](_0x59ac42,_0x4c2683);!fs['existsSync'](_0x232cca)&&(fs['mkdirSync'](_0x232cca),this['logger']['debug'](util['format'](_0x276ea7[_0x43a9d9(0xe1)],_0x232cca)));if(_0x276ea7['gNlZn'](_0x223225[_0x43a9d9(0x80)](),'')){this['logger'][_0x43a9d9(0xa2)](util[_0x43a9d9(0xd8)](_0x276ea7['khYyT']));return;}if(_0x223225[_0x43a9d9(0xae)](_0x276ea7['ZUNtw'])||_0x223225['startsWith'](_0x276ea7[_0x43a9d9(0xc9)])){const _0x35ad7e=_0x223225['startsWith'](_0x276ea7[_0x43a9d9(0xca)])?https:http,_0x4c37a6=path[_0x43a9d9(0xe0)](_0x223225),_0x63270a=path[_0x43a9d9(0xb8)](_0x232cca,_0x4c37a6),_0x182e95=fs['createWriteStream'](_0x63270a);_0x35ad7e[_0x43a9d9(0xdb)](_0x223225,_0x4b732a=>{const _0x36b0a8=_0x43a9d9,_0xbef421={'VwjLh':function(_0xd8478c,_0x1867c7){const _0x3c02d0=a89_0x677f;return _0x276ea7[_0x3c02d0(0xcd)](_0xd8478c,_0x1867c7);},'VvGgB':function(_0xddf51d,_0x2924df){const _0x5587f4=a89_0x677f;return _0x276ea7[_0x5587f4(0xf7)](_0xddf51d,_0x2924df);},'AnDNW':function(_0x16e78d,_0x3a7441){return _0x276ea7['dOWeg'](_0x16e78d,_0x3a7441);},'XKTiR':_0x276ea7['neWAF'],'zKHKj':_0x276ea7['KUQrs']};if(_0x276ea7[_0x36b0a8(0xe8)](_0x4b732a[_0x36b0a8(0x9f)],0xc8))_0x4b732a[_0x36b0a8(0xcf)](_0x182e95),_0x182e95['on'](_0x276ea7['UwLkL'],()=>{const _0x1ee713=_0x36b0a8;_0x182e95[_0x1ee713(0xdd)]();const _0x502e9c=fs['statSync'](_0x63270a),_0x3d4d5b=_0xbef421[_0x1ee713(0x7b)](_0x502e9c[_0x1ee713(0x96)],_0xbef421['VvGgB'](0x400,0x400));if(_0xbef421['AnDNW'](_0x3d4d5b,0x64)){this['logger']['debug'](util[_0x1ee713(0xd8)](_0xbef421['XKTiR'],_0x3d4d5b[_0x1ee713(0x7c)](0x2))),fs['unlinkSync'](_0x63270a);return;}this[_0x1ee713(0xd6)]['debug'](util['format'](_0xbef421['zKHKj'],_0x63270a)),uploadAttachmentsManager[_0x1ee713(0xa5)](_0x63270a,_0x3a43ad);});else{this[_0x36b0a8(0xd6)][_0x36b0a8(0xa2)](util['format'](_0x276ea7['VhNgQ'],_0x4b732a[_0x36b0a8(0x9f)])),_0x182e95[_0x36b0a8(0xdd)](),fs[_0x36b0a8(0xa8)](_0x63270a);return;}})['on'](_0x276ea7[_0x43a9d9(0xbf)],_0x41a94a=>{const _0x45aa4d=_0x43a9d9;this[_0x45aa4d(0xd6)][_0x45aa4d(0xa2)](util[_0x45aa4d(0xd8)](_0x276ea7[_0x45aa4d(0xb2)],_0x41a94a[_0x45aa4d(0xf8)])),_0x182e95[_0x45aa4d(0xdd)](),fs['unlinkSync'](_0x63270a);return;});}else{if(!fs[_0x43a9d9(0xa1)](_0x223225)){this[_0x43a9d9(0xd6)][_0x43a9d9(0xa2)](util[_0x43a9d9(0xd8)](_0x276ea7[_0x43a9d9(0xeb)],_0x223225));return;}const _0x3583ed=fs[_0x43a9d9(0xd2)](_0x223225),_0x4ee487=_0x276ea7['tJSrE'](_0x3583ed[_0x43a9d9(0x96)],_0x276ea7['HzAdD'](0x400,0x400));if(_0x276ea7[_0x43a9d9(0xf5)](_0x4ee487,0x64)){this['logger'][_0x43a9d9(0xa2)](util[_0x43a9d9(0xd8)](_0x276ea7['kWqyl'],_0x4ee487['toFixed'](0x2)));return;}const _0x4f42d4=path[_0x43a9d9(0xe0)](_0x223225),_0x37152d=path[_0x43a9d9(0xb8)](_0x232cca,_0x4f42d4);fs[_0x43a9d9(0xf0)](_0x223225,_0x37152d),uploadAttachmentsManager['trackFile'](_0x37152d,_0x3a43ad);}}static[a89_0x456f95(0xa5)](_0x1245d3,_0xee2364){const _0x3fa560=a89_0x456f95,_0x4ce5bc={'FKSAR':function(_0x4426c6,_0x355338){return _0x4426c6(_0x355338);},'YBGKC':_0x3fa560(0x7f),'DLutB':'./cliUtils','OulNB':function(_0x45c7e6,_0x564f5c){return _0x45c7e6===_0x564f5c;},'tsGgB':_0x3fa560(0xb7),'shrTe':'trackFile:\x20No\x20testId\x20available,\x20cannot\x20track\x20attachment','tgJOi':_0x3fa560(0x89),'JHoRC':_0x3fa560(0xc8),'wiQuX':_0x3fa560(0xd1),'tAuTM':_0x3fa560(0xb1),'HyZZx':function(_0x28c2a6,_0x399e0d){return _0x28c2a6(_0x399e0d);},'QDKGy':_0x3fa560(0xe6),'TyvKE':_0x3fa560(0xc5),'ewNyp':'Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','XrTFg':_0x3fa560(0xc6)};try{let _0x3e05de;const _0x3f816e=global[_0x3fa560(0xfa)]?.['currentTest']?.[_0x3fa560(0xb5)],_0x215667=_0x4ce5bc[_0x3fa560(0xc7)](require,_0x4ce5bc[_0x3fa560(0x9b)]),_0x310630=_0x4ce5bc['FKSAR'](require,_0x4ce5bc[_0x3fa560(0x84)]),_0x229f81=_0x215667['getInstance']()[_0x3fa560(0xce)]()&&_0x4ce5bc[_0x3fa560(0xab)](_0x310630[_0x3fa560(0x9d)]()?.['name']?.[_0x3fa560(0xe7)](),_0x4ce5bc['tsGgB']);if(_0x229f81){_0x3e05de=global[_0x3fa560(0x8a)];if(!_0x3e05de){const _0x409a2b=AutomationFramework[_0x3fa560(0xef)]();_0x3e05de=AutomationFramework[_0x3fa560(0xa4)](_0x409a2b,PlaywrightDriverModule[_0x3fa560(0x95)],'');}this[_0x3fa560(0xd6)][_0x3fa560(0xa2)](_0x3fa560(0x85)+_0x3e05de);}else{if(!_0x3f816e){const _0x2c2c70=AutomationFramework['getTrackedInstance']();_0x3e05de=AutomationFramework[_0x3fa560(0xa4)](_0x2c2c70,PlaywrightDriverModule[_0x3fa560(0x95)],'');}else _0x3e05de=TestInfo[_0x3fa560(0xf6)](_0x3f816e,_0x3f816e[_0x3fa560(0xa6)]);this[_0x3fa560(0xd6)][_0x3fa560(0xa2)](_0x3fa560(0x91)+_0x3e05de);}if(!_0x3e05de){this[_0x3fa560(0xd6)][_0x3fa560(0xa2)](_0x4ce5bc[_0x3fa560(0x8e)]);return;}const _0xba589e={[TestFrameworkConstants[_0x3fa560(0xa7)]]:fs[_0x3fa560(0xd2)](_0x1245d3)[_0x3fa560(0x96)],[TestFrameworkConstants[_0x3fa560(0xcb)]]:path[_0x3fa560(0xe0)](_0x1245d3),[TestFrameworkConstants[_0x3fa560(0xa0)]]:_0x1245d3,[TestFrameworkConstants['KEY_FILE_LEVEL']]:_0xee2364?_0x4ce5bc['tgJOi']:_0x4ce5bc[_0x3fa560(0xbc)]};if(_0x229f81){const _0x3cdfb5=_0x215667[_0x3fa560(0xee)]()[_0x3fa560(0xf9)]();if(!_0x3cdfb5){this[_0x3fa560(0xd6)][_0x3fa560(0xa2)](_0x4ce5bc[_0x3fa560(0x86)]);return;}const _0x484c20=_0x4ce5bc['FKSAR'](require,_0x4ce5bc[_0x3fa560(0xdc)]),_0x5af39e=_0x4ce5bc[_0x3fa560(0xf4)](require,_0x4ce5bc[_0x3fa560(0xaa)]),_0xc8588a=_0x3cdfb5[_0x3fa560(0xd5)](_0x484c20[_0x3fa560(0xd9)],_0x5af39e['POST']);if(!_0xc8588a){this[_0x3fa560(0xd6)]['debug'](_0x4ce5bc[_0x3fa560(0xed)]);return;}const _0x1c0e98=_0xc8588a[_0x3fa560(0x8f)]()['get'](_0x3e05de)||{},_0x2b5898=_0x1c0e98[TestFrameworkConstants[_0x3fa560(0x9e)]]||{},_0x58c7c4={..._0x2b5898};_0x58c7c4[_0x1245d3]=_0xba589e;const _0x5f009b=_0x58c7c4,_0x26371e={[TestFrameworkConstants[_0x3fa560(0x9e)]]:_0x5f009b},_0x10c258={};_0x10c258[_0x3e05de]=_0x26371e,_0xc8588a[_0x3fa560(0xe5)](_0x10c258),this['logger'][_0x3fa560(0xa2)](_0x3fa560(0xdf)+_0x3e05de+_0x3fa560(0xd3)+_0x1245d3);}else{const _0x3fdbc1=TestInfo[_0x3fa560(0xe3)](_0x3e05de),_0x4fe258=_0x3fdbc1[TestFrameworkConstants[_0x3fa560(0x9e)]]||{};_0x4fe258[_0x1245d3]=_0xba589e,_0x3fdbc1[TestFrameworkConstants[_0x3fa560(0x9e)]]=_0x4fe258,TestInfo['setTestDetails'](_0x3e05de,_0x3fdbc1),this[_0x3fa560(0xd6)]['debug']('trackFile:\x20Stored\x20attachment\x20in\x20TestInfo\x20file\x20for\x20testId:\x20'+_0x3e05de+',\x20filepath:\x20'+_0x1245d3);}this['logger']['debug'](util[_0x3fa560(0xd8)](_0x4ce5bc['ewNyp'],_0x1245d3));}catch(_0x6f6888){this['logger'][_0x3fa560(0xa2)](util[_0x3fa560(0xd8)](_0x4ce5bc[_0x3fa560(0xb9)],_0x6f6888['message']));}}static['clearAttachments'](){const _0x4e8c65=a89_0x456f95,_0x88295d={};_0x88295d[_0x4e8c65(0x97)]=_0x4e8c65(0x7d),_0x88295d[_0x4e8c65(0x8b)]=_0x4e8c65(0xb3),_0x88295d[_0x4e8c65(0x98)]=_0x4e8c65(0x92);const _0x252dee=_0x88295d,_0x3a6e65=os[_0x4e8c65(0xc1)](),_0x1e55e8=path[_0x4e8c65(0xb8)](_0x3a6e65,_0x252dee[_0x4e8c65(0x97)]);if(!fs[_0x4e8c65(0xa1)](_0x1e55e8))return;const _0x10e8b2=BrowserstackCLI['getInstance']()[_0x4e8c65(0xe4)]['TestHubModule']?.[_0x4e8c65(0xbe)]?.[_0x4e8c65(0xd7)]()?.[_0x4e8c65(0xc3)],_0x230f0a=_0x10e8b2?path['join'](_0x1e55e8,_0x10e8b2):null;if(!_0x230f0a||!fs[_0x4e8c65(0xa1)](_0x230f0a)){this[_0x4e8c65(0xd6)][_0x4e8c65(0xa2)](util[_0x4e8c65(0xd8)](_0x252dee[_0x4e8c65(0x8b)],_0x10e8b2));return;}const _0x321390={};_0x321390[_0x4e8c65(0xda)]=!![],_0x321390[_0x4e8c65(0xc0)]=!![],fs[_0x4e8c65(0xbb)](_0x230f0a,_0x321390),this[_0x4e8c65(0xd6)]['debug'](util[_0x4e8c65(0xd8)](_0x252dee[_0x4e8c65(0x98)]));}}module['exports']=uploadAttachmentsManager;