const a89_0x55384f=a89_0x2163;(function(_0x247483,_0x941377){const _0x3c0349=a89_0x2163,_0x11f705=_0x247483();while(!![]){try{const _0x54541e=parseInt(_0x3c0349(0xcf))/0x1*(-parseInt(_0x3c0349(0xe8))/0x2)+parseInt(_0x3c0349(0x10e))/0x3*(-parseInt(_0x3c0349(0xeb))/0x4)+parseInt(_0x3c0349(0xd4))/0x5*(-parseInt(_0x3c0349(0xce))/0x6)+parseInt(_0x3c0349(0x122))/0x7+parseInt(_0x3c0349(0x114))/0x8*(-parseInt(_0x3c0349(0xe0))/0x9)+-parseInt(_0x3c0349(0x131))/0xa+parseInt(_0x3c0349(0x12d))/0xb*(parseInt(_0x3c0349(0x12a))/0xc);if(_0x54541e===_0x941377)break;else _0x11f705['push'](_0x11f705['shift']());}catch(_0x151dcd){_0x11f705['push'](_0x11f705['shift']());}}}(a89_0x3bd4,0x48923));function a89_0x2163(_0x59f746,_0x131ad8){const _0x3bd4cd=a89_0x3bd4();return a89_0x2163=function(_0x21631c,_0x17af41){_0x21631c=_0x21631c-0xbe;let _0x3383d0=_0x3bd4cd[_0x21631c];return _0x3383d0;},a89_0x2163(_0x59f746,_0x131ad8);}function a89_0x3bd4(){const _0x2d74b3=['Attachment\x20recevied\x20for\x20path:\x20%s','sCDIo','close','FNuSV','2628336vSrLhk','get','GFfhn','66xzGVQE','./framework/constants/testFrameworkConstants','pipe','addMultipleEntries','715850yfdGTu','rfNpB','getAllData','trackFile:\x20Instance\x20not\x20available,\x20cannot\x20track\x20attachment','../../helpers/classLogger.js','trackFile','trackFile:\x20Stored\x20attachment\x20in\x20instance\x20memory\x20for\x20testId:\x20','recursive','http://','__workerDetails','uhVbQ','trackFile:\x20Jest+Playwright\x20-\x20testId\x20(testIdentifier):\x20','BJfgf','nalWs','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','uIwQx','finish','size','statSync','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','FEPtH','KEY_FILE_SIZE','uiaiQ','modules','KEY_FILE_LEVEL','GgRuK','VaYop','name','startsWith','fARdA','getState','./cliUtils','TestHubModule','18XVYgpP','4567nZVEqV','./state/hookState','getTrackedInstance','./TestInfo','existsSync','292625UFyDmS','getInstance','message','BdhRd','retry','fWuDq','rmSync','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','uploadAttachments','testhubConfig','__jestCurrentTestIdentifier','KEY_TEST_ID','422190mnqkVq','tNHGd','toFixed','KUMuF','Created\x20folder:\x20%s','WDIiF','OstLd','isRunning','244qyMQNa','OpjtB','KEY_TEST_ATTACHMENTS','256028hkzwBt','LGeXh','iDqyP','WvuSY','KEY_FILE_PATH','unlinkSync','sLmnQ','path','./browserstackCLI','./modules/playwrightDriverModule','Created\x20.browserstack\x20folder\x20at:\x20%s','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','copyFileSync','.browserstack','dHHUx','basename','yskph','statusCode','./state/testFrameworkState','join','https://','logger','Eikzl','hTiMq','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','testInfo','getTestFramework','TEST','trim','oHWcq','OlMmz','INZRz','AEocf','VCReL',',\x20filepath:\x20','3MMLeJy','swgGS','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','zMhIo','toObject','trackFile:\x20TestFramework\x20not\x20available,\x20cannot\x20track\x20attachment','72PjozQq','trackFile:\x20No\x20testId\x20available,\x20cannot\x20track\x20attachment','XmreR','clearAttachments','currentTest','util','exports','debug','GKAIo','TestLevel','toLowerCase','MTary','iwKId','File\x20downloaded\x20to:\x20%s','1915298ehYXSo','resolveInstance','Uxlxn','format'];a89_0x3bd4=function(){return _0x2d74b3;};return a89_0x3bd4();}const os=require('os'),fs=require('fs'),path=require(a89_0x55384f(0xf2)),util=require(a89_0x55384f(0x119)),BrowserstackCLI=require('./browserstackCLI'),https=require('https'),http=require('http'),AutomationFramework=require('./framework/automationFramework'),PlaywrightDriverModule=require(a89_0x55384f(0xf4)),TestInfo=require(a89_0x55384f(0xd2)),TestFrameworkConstants=require(a89_0x55384f(0x12e)),{createClassLogger}=require(a89_0x55384f(0x135));class uploadAttachmentsManager{static [a89_0x55384f(0x100)]=createClassLogger('uploadAttachmentsManager');static[a89_0x55384f(0xdc)](_0xd811fd,_0x5cf0a0=![]){const _0x3ea0ce=a89_0x55384f,_0x1cdf00={};_0x1cdf00[_0x3ea0ce(0x10b)]=function(_0x467978,_0x25c4eb){return _0x467978/_0x25c4eb;},_0x1cdf00[_0x3ea0ce(0x140)]=function(_0x42227a,_0x1951e3){return _0x42227a*_0x1951e3;},_0x1cdf00[_0x3ea0ce(0xec)]=function(_0x50b9dd,_0x19b74c){return _0x50b9dd>_0x19b74c;},_0x1cdf00['WvuSY']='Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.',_0x1cdf00[_0x3ea0ce(0xed)]=_0x3ea0ce(0x121),_0x1cdf00[_0x3ea0ce(0x111)]=function(_0x48926b,_0xd4efa9){return _0x48926b===_0xd4efa9;},_0x1cdf00[_0x3ea0ce(0xf9)]=_0x3ea0ce(0x141),_0x1cdf00[_0x3ea0ce(0x10c)]=_0x3ea0ce(0x13f),_0x1cdf00[_0x3ea0ce(0xfb)]='Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload',_0x1cdf00['WLyrW']=_0x3ea0ce(0x126),_0x1cdf00[_0x3ea0ce(0x127)]=_0x3ea0ce(0xf8),_0x1cdf00[_0x3ea0ce(0xd7)]='.browserstack\x20folder\x20not\x20found\x20at:\x20%s',_0x1cdf00['SXjCi']=_0x3ea0ce(0xf5),_0x1cdf00['Eikzl']=_0x3ea0ce(0xe4),_0x1cdf00['MLRjZ']=function(_0x1959d5,_0x3e3c0b){return _0x1959d5===_0x3e3c0b;},_0x1cdf00[_0x3ea0ce(0x10f)]=_0x3ea0ce(0xc0),_0x1cdf00[_0x3ea0ce(0xe6)]=_0x3ea0ce(0xff),_0x1cdf00[_0x3ea0ce(0xc1)]=_0x3ea0ce(0x139),_0x1cdf00['sLmnQ']='error',_0x1cdf00[_0x3ea0ce(0x132)]=_0x3ea0ce(0x103),_0x1cdf00['fWuDq']=function(_0x5589bb,_0x2834af){return _0x5589bb/_0x2834af;},_0x1cdf00[_0x3ea0ce(0x129)]=function(_0x377754,_0x6752b8){return _0x377754*_0x6752b8;},_0x1cdf00[_0x3ea0ce(0x120)]=function(_0x514b5f,_0x23aab9){return _0x514b5f>_0x23aab9;},_0x1cdf00[_0x3ea0ce(0xc7)]=_0x3ea0ce(0x110);const _0x1d2d63=_0x1cdf00;this[_0x3ea0ce(0x100)][_0x3ea0ce(0x11b)](util[_0x3ea0ce(0x125)](_0x1d2d63['WLyrW'],_0xd811fd));const _0x33e7ed=os['homedir'](),_0x52b6b0=path[_0x3ea0ce(0xfe)](_0x33e7ed,_0x1d2d63[_0x3ea0ce(0x127)]);!fs[_0x3ea0ce(0xd3)](_0x52b6b0)&&(this[_0x3ea0ce(0x100)][_0x3ea0ce(0x11b)](util[_0x3ea0ce(0x125)](_0x1d2d63[_0x3ea0ce(0xd7)],_0x52b6b0)),fs['mkdirSync'](_0x52b6b0),this[_0x3ea0ce(0x100)][_0x3ea0ce(0x11b)](util[_0x3ea0ce(0x125)](_0x1d2d63['SXjCi'],_0x52b6b0)));const _0x418f90=BrowserstackCLI[_0x3ea0ce(0xd5)]()['modules'][_0x3ea0ce(0xcd)]?.[_0x3ea0ce(0xdd)]?.[_0x3ea0ce(0x112)]()?.['buildHashedId'],_0x28e700=path['join'](_0x52b6b0,_0x418f90);!fs[_0x3ea0ce(0xd3)](_0x28e700)&&(fs['mkdirSync'](_0x28e700),this[_0x3ea0ce(0x100)][_0x3ea0ce(0x11b)](util[_0x3ea0ce(0x125)](_0x1d2d63[_0x3ea0ce(0x101)],_0x28e700)));if(_0x1d2d63['MLRjZ'](_0xd811fd[_0x3ea0ce(0x107)](),'')){this[_0x3ea0ce(0x100)][_0x3ea0ce(0x11b)](util[_0x3ea0ce(0x125)](_0x1d2d63[_0x3ea0ce(0x10f)]));return;}if(_0xd811fd[_0x3ea0ce(0xc9)](_0x1d2d63[_0x3ea0ce(0xe6)])||_0xd811fd[_0x3ea0ce(0xc9)](_0x1d2d63[_0x3ea0ce(0xc1)])){const _0x36aa20=_0xd811fd[_0x3ea0ce(0xc9)](_0x1d2d63['OstLd'])?https:http,_0x39f722=path[_0x3ea0ce(0xfa)](_0xd811fd),_0x39c9ba=path['join'](_0x28e700,_0x39f722),_0x865259=fs['createWriteStream'](_0x39c9ba);_0x36aa20['get'](_0xd811fd,_0x2af716=>{const _0x58cd7d=_0x3ea0ce,_0x3e551d={'Uxlxn':function(_0x25aa81,_0x4b5edd){const _0x21269a=a89_0x2163;return _0x1d2d63[_0x21269a(0x10b)](_0x25aa81,_0x4b5edd);},'GFfhn':function(_0x43d8f5,_0x3989c1){const _0x1ff7ab=a89_0x2163;return _0x1d2d63[_0x1ff7ab(0x140)](_0x43d8f5,_0x3989c1);},'XmreR':function(_0x269a70,_0x55eacb){const _0x303ba0=a89_0x2163;return _0x1d2d63[_0x303ba0(0xec)](_0x269a70,_0x55eacb);},'tNHGd':_0x1d2d63[_0x58cd7d(0xee)],'TpMsp':_0x1d2d63[_0x58cd7d(0xed)]};if(_0x1d2d63[_0x58cd7d(0x111)](_0x2af716[_0x58cd7d(0xfc)],0xc8))_0x2af716[_0x58cd7d(0x12f)](_0x865259),_0x865259['on'](_0x1d2d63[_0x58cd7d(0xf9)],()=>{const _0x250791=_0x58cd7d;_0x865259[_0x250791(0x128)]();const _0x3ee983=fs[_0x250791(0xbf)](_0x39c9ba),_0x5289ed=_0x3e551d[_0x250791(0x124)](_0x3ee983[_0x250791(0xbe)],_0x3e551d[_0x250791(0x12c)](0x400,0x400));if(_0x3e551d[_0x250791(0x116)](_0x5289ed,0x64)){this['logger'][_0x250791(0x11b)](util[_0x250791(0x125)](_0x3e551d[_0x250791(0xe1)],_0x5289ed[_0x250791(0xe2)](0x2))),fs[_0x250791(0xf0)](_0x39c9ba);return;}this['logger'][_0x250791(0x11b)](util[_0x250791(0x125)](_0x3e551d['TpMsp'],_0x39c9ba)),uploadAttachmentsManager[_0x250791(0x136)](_0x39c9ba,_0x5cf0a0);});else{this[_0x58cd7d(0x100)][_0x58cd7d(0x11b)](util[_0x58cd7d(0x125)](_0x1d2d63[_0x58cd7d(0x10c)],_0x2af716[_0x58cd7d(0xfc)])),_0x865259[_0x58cd7d(0x128)](),fs['unlinkSync'](_0x39c9ba);return;}})['on'](_0x1d2d63[_0x3ea0ce(0xf1)],_0x42d9ad=>{const _0x5acaee=_0x3ea0ce;this[_0x5acaee(0x100)][_0x5acaee(0x11b)](util[_0x5acaee(0x125)](_0x1d2d63['yskph'],_0x42d9ad[_0x5acaee(0xd6)])),_0x865259[_0x5acaee(0x128)](),fs[_0x5acaee(0xf0)](_0x39c9ba);return;});}else{if(!fs['existsSync'](_0xd811fd)){this[_0x3ea0ce(0x100)][_0x3ea0ce(0x11b)](util[_0x3ea0ce(0x125)](_0x1d2d63['rfNpB'],_0xd811fd));return;}const _0x21a324=fs[_0x3ea0ce(0xbf)](_0xd811fd),_0x17682b=_0x1d2d63[_0x3ea0ce(0xd9)](_0x21a324[_0x3ea0ce(0xbe)],_0x1d2d63['FNuSV'](0x400,0x400));if(_0x1d2d63[_0x3ea0ce(0x120)](_0x17682b,0x64)){this['logger'][_0x3ea0ce(0x11b)](util[_0x3ea0ce(0x125)](_0x1d2d63[_0x3ea0ce(0xc7)],_0x17682b[_0x3ea0ce(0xe2)](0x2)));return;}const _0x1a7aae=path[_0x3ea0ce(0xfa)](_0xd811fd),_0x42bd6a=path[_0x3ea0ce(0xfe)](_0x28e700,_0x1a7aae);fs[_0x3ea0ce(0xf7)](_0xd811fd,_0x42bd6a),uploadAttachmentsManager[_0x3ea0ce(0x136)](_0x42bd6a,_0x5cf0a0);}}static['trackFile'](_0x44a3a2,_0x36bb89){const _0x111e0e=a89_0x55384f,_0x14dabc={'INZRz':function(_0x3ee482,_0x5b52cf){return _0x3ee482(_0x5b52cf);},'oHWcq':_0x111e0e(0xf3),'GgRuK':function(_0x1feeda,_0x40125c){return _0x1feeda(_0x40125c);},'fARdA':_0x111e0e(0xcc),'zODJl':function(_0x397076,_0x3877e2){return _0x397076===_0x3877e2;},'MTary':'jest','OpjtB':_0x111e0e(0x115),'BJfgf':'BuildLevel','OlMmz':_0x111e0e(0x11d),'WDIiF':_0x111e0e(0x113),'hTiMq':_0x111e0e(0xfd),'nalWs':_0x111e0e(0xd0),'GKAIo':_0x111e0e(0x134),'hEBuV':'Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','CchCu':_0x111e0e(0xdb)};try{let _0x3f465b;const _0x3f685d=global[_0x111e0e(0x13a)]?.[_0x111e0e(0x118)]?.[_0x111e0e(0x104)],_0xc86bbe=_0x14dabc[_0x111e0e(0x10a)](require,_0x14dabc[_0x111e0e(0x108)]),_0x126914=_0x14dabc[_0x111e0e(0xc6)](require,_0x14dabc[_0x111e0e(0xca)]),_0x364a1d=_0xc86bbe[_0x111e0e(0xd5)]()[_0x111e0e(0xe7)]()&&_0x14dabc['zODJl'](_0x126914['getTestFrameworkDetail']()?.[_0x111e0e(0xc8)]?.[_0x111e0e(0x11e)](),_0x14dabc[_0x111e0e(0x11f)]);if(_0x364a1d){_0x3f465b=global[_0x111e0e(0xde)];if(!_0x3f465b){const _0x1bdb99=AutomationFramework[_0x111e0e(0xd1)]();_0x3f465b=AutomationFramework[_0x111e0e(0xcb)](_0x1bdb99,PlaywrightDriverModule[_0x111e0e(0xdf)],'');}this[_0x111e0e(0x100)][_0x111e0e(0x11b)](_0x111e0e(0x13c)+_0x3f465b);}else{if(!_0x3f685d){const _0x488de5=AutomationFramework[_0x111e0e(0xd1)]();_0x3f465b=AutomationFramework['getState'](_0x488de5,PlaywrightDriverModule['KEY_TEST_ID'],'');}else _0x3f465b=TestInfo['getTestIdentifierFromTestInfo'](_0x3f685d,_0x3f685d[_0x111e0e(0xd8)]);this[_0x111e0e(0x100)][_0x111e0e(0x11b)]('trackFile:\x20Cucumber+Playwright\x20-\x20testId:\x20'+_0x3f465b);}if(!_0x3f465b){this[_0x111e0e(0x100)]['debug'](_0x14dabc[_0x111e0e(0xe9)]);return;}const _0x208d6c={[TestFrameworkConstants[_0x111e0e(0xc2)]]:fs[_0x111e0e(0xbf)](_0x44a3a2)[_0x111e0e(0xbe)],[TestFrameworkConstants['KEY_FILE_NAME']]:path[_0x111e0e(0xfa)](_0x44a3a2),[TestFrameworkConstants[_0x111e0e(0xef)]]:_0x44a3a2,[TestFrameworkConstants[_0x111e0e(0xc5)]]:_0x36bb89?_0x14dabc[_0x111e0e(0x13d)]:_0x14dabc[_0x111e0e(0x109)]};if(_0x364a1d){const _0x2ced2f=_0xc86bbe['getInstance']()[_0x111e0e(0x105)]();if(!_0x2ced2f){this['logger']['debug'](_0x14dabc[_0x111e0e(0xe5)]);return;}const _0x2a1dfa=_0x14dabc[_0x111e0e(0x10a)](require,_0x14dabc[_0x111e0e(0x102)]),_0x2c53e0=_0x14dabc[_0x111e0e(0x10a)](require,_0x14dabc[_0x111e0e(0x13e)]),_0x345283=_0x2ced2f[_0x111e0e(0x123)](_0x2a1dfa[_0x111e0e(0x106)],_0x2c53e0['POST']);if(!_0x345283){this[_0x111e0e(0x100)][_0x111e0e(0x11b)](_0x14dabc[_0x111e0e(0x11c)]);return;}const _0x1bd6ca=_0x345283[_0x111e0e(0x133)]()[_0x111e0e(0x12b)](_0x3f465b)||{},_0x3b14e0=_0x1bd6ca[TestFrameworkConstants[_0x111e0e(0xea)]]||{},_0x194774={..._0x3b14e0};_0x194774[_0x44a3a2]=_0x208d6c;const _0x5a8e4e=_0x194774,_0x9316c0={[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]:_0x5a8e4e},_0x56c325={};_0x56c325[_0x3f465b]=_0x9316c0,_0x345283[_0x111e0e(0x130)](_0x56c325),this[_0x111e0e(0x100)][_0x111e0e(0x11b)](_0x111e0e(0x137)+_0x3f465b+_0x111e0e(0x10d)+_0x44a3a2);}else{const _0x1a5233=TestInfo['getTestDetails'](_0x3f465b),_0x1d16ec=_0x1a5233[TestFrameworkConstants[_0x111e0e(0xea)]]||{};_0x1d16ec[_0x44a3a2]=_0x208d6c,_0x1a5233[TestFrameworkConstants[_0x111e0e(0xea)]]=_0x1d16ec,TestInfo['setTestDetails'](_0x3f465b,_0x1a5233),this[_0x111e0e(0x100)][_0x111e0e(0x11b)]('trackFile:\x20Stored\x20attachment\x20in\x20TestInfo\x20file\x20for\x20testId:\x20'+_0x3f465b+_0x111e0e(0x10d)+_0x44a3a2);}this['logger'][_0x111e0e(0x11b)](util[_0x111e0e(0x125)](_0x14dabc['hEBuV'],_0x44a3a2));}catch(_0x572601){this[_0x111e0e(0x100)]['debug'](util['format'](_0x14dabc['CchCu'],_0x572601[_0x111e0e(0xd6)]));}}static[a89_0x55384f(0x117)](){const _0x392d6d=a89_0x55384f,_0x3e00cc={};_0x3e00cc[_0x392d6d(0xe3)]=_0x392d6d(0xf8),_0x3e00cc[_0x392d6d(0x13b)]=_0x392d6d(0xf6),_0x3e00cc['uiaiQ']='Cleared\x20attachment\x20folder';const _0x582f08=_0x3e00cc,_0x30d825=os['homedir'](),_0x236a10=path['join'](_0x30d825,_0x582f08['KUMuF']);if(!fs['existsSync'](_0x236a10))return;const _0x17bc24=BrowserstackCLI[_0x392d6d(0xd5)]()[_0x392d6d(0xc4)][_0x392d6d(0xcd)]?.[_0x392d6d(0xdd)]?.['toObject']()?.['buildHashedId'],_0x6cf085=_0x17bc24?path[_0x392d6d(0xfe)](_0x236a10,_0x17bc24):null;if(!_0x6cf085||!fs[_0x392d6d(0xd3)](_0x6cf085)){this[_0x392d6d(0x100)][_0x392d6d(0x11b)](util[_0x392d6d(0x125)](_0x582f08[_0x392d6d(0x13b)],_0x17bc24));return;}const _0x1e67a4={};_0x1e67a4[_0x392d6d(0x138)]=!![],_0x1e67a4['force']=!![],fs[_0x392d6d(0xda)](_0x6cf085,_0x1e67a4),this[_0x392d6d(0x100)][_0x392d6d(0x11b)](util[_0x392d6d(0x125)](_0x582f08[_0x392d6d(0xc3)]));}}module[a89_0x55384f(0x11a)]=uploadAttachmentsManager;