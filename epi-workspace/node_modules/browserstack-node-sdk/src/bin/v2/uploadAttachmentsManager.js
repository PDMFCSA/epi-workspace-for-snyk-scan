const a89_0x50e2b2=a89_0x3c22;(function(_0xf1d5e4,_0x3f8004){const _0x1f8402=a89_0x3c22,_0x187bfb=_0xf1d5e4();while(!![]){try{const _0x402448=-parseInt(_0x1f8402(0x13e))/0x1*(parseInt(_0x1f8402(0x156))/0x2)+-parseInt(_0x1f8402(0x118))/0x3+parseInt(_0x1f8402(0x11a))/0x4+-parseInt(_0x1f8402(0xf5))/0x5*(parseInt(_0x1f8402(0x12b))/0x6)+-parseInt(_0x1f8402(0x149))/0x7*(parseInt(_0x1f8402(0x147))/0x8)+-parseInt(_0x1f8402(0x128))/0x9+parseInt(_0x1f8402(0x102))/0xa;if(_0x402448===_0x3f8004)break;else _0x187bfb['push'](_0x187bfb['shift']());}catch(_0x49326c){_0x187bfb['push'](_0x187bfb['shift']());}}}(a89_0x49f5,0x2d215));const os=require('os'),fs=require('fs'),path=require('path'),util=require(a89_0x50e2b2(0x10e)),BrowserstackCLI=require(a89_0x50e2b2(0x14d)),https=require('https'),http=require(a89_0x50e2b2(0x13c)),AutomationFramework=require('./framework/automationFramework'),PlaywrightDriverModule=require(a89_0x50e2b2(0xfc)),TestInfo=require(a89_0x50e2b2(0x119)),TestFrameworkConstants=require('./framework/constants/testFrameworkConstants'),{createClassLogger}=require(a89_0x50e2b2(0x164));function a89_0x3c22(_0x56b1bd,_0x264e86){const _0x49f59c=a89_0x49f5();return a89_0x3c22=function(_0x3c229a,_0x17bb61){_0x3c229a=_0x3c229a-0xe6;let _0x263103=_0x49f59c[_0x3c229a];return _0x263103;},a89_0x3c22(_0x56b1bd,_0x264e86);}class uploadAttachmentsManager{static [a89_0x50e2b2(0xeb)]=createClassLogger(a89_0x50e2b2(0x151));static[a89_0x50e2b2(0x152)](_0x5c203d,_0x46122e=![]){const _0x28235a=a89_0x50e2b2,_0x54fbc9={};_0x54fbc9[_0x28235a(0x122)]=function(_0x5b9810,_0x2535e9){return _0x5b9810/_0x2535e9;},_0x54fbc9[_0x28235a(0x125)]=function(_0x128ea4,_0x18cf05){return _0x128ea4*_0x18cf05;},_0x54fbc9[_0x28235a(0xf9)]=function(_0x367b3a,_0x1dcf12){return _0x367b3a>_0x1dcf12;},_0x54fbc9[_0x28235a(0x10c)]=_0x28235a(0x131),_0x54fbc9[_0x28235a(0x116)]='File\x20downloaded\x20to:\x20%s',_0x54fbc9[_0x28235a(0x158)]=function(_0x2bb016,_0x2274b6){return _0x2bb016===_0x2274b6;},_0x54fbc9[_0x28235a(0x165)]=_0x28235a(0x10b),_0x54fbc9[_0x28235a(0x100)]=_0x28235a(0x115),_0x54fbc9[_0x28235a(0x14a)]=_0x28235a(0x12a),_0x54fbc9[_0x28235a(0xf3)]=_0x28235a(0xf1),_0x54fbc9[_0x28235a(0x138)]=_0x28235a(0x140),_0x54fbc9['rwCQa']=_0x28235a(0x13d),_0x54fbc9[_0x28235a(0x136)]='Created\x20.browserstack\x20folder\x20at:\x20%s',_0x54fbc9[_0x28235a(0x11e)]=_0x28235a(0x103),_0x54fbc9['KSxYz']=_0x28235a(0xe6),_0x54fbc9['oOfgn']=_0x28235a(0x14b),_0x54fbc9[_0x28235a(0x10a)]=_0x28235a(0x117),_0x54fbc9[_0x28235a(0x15d)]=_0x28235a(0x121),_0x54fbc9['eLlEu']=_0x28235a(0xe9),_0x54fbc9['xMSlC']=function(_0x1226c0,_0x33aa99){return _0x1226c0*_0x33aa99;},_0x54fbc9[_0x28235a(0x12e)]='File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.';const _0x25bfd5=_0x54fbc9;this['logger']['debug'](util[_0x28235a(0x120)](_0x25bfd5[_0x28235a(0xf3)],_0x5c203d));const _0x1f9c03=os[_0x28235a(0x15a)](),_0xf0b470=path[_0x28235a(0x114)](_0x1f9c03,_0x25bfd5[_0x28235a(0x138)]);!fs[_0x28235a(0x108)](_0xf0b470)&&(this[_0x28235a(0xeb)][_0x28235a(0xf6)](util[_0x28235a(0x120)](_0x25bfd5[_0x28235a(0x10d)],_0xf0b470)),fs[_0x28235a(0x15f)](_0xf0b470),this[_0x28235a(0xeb)]['debug'](util[_0x28235a(0x120)](_0x25bfd5[_0x28235a(0x136)],_0xf0b470)));const _0xec827c=BrowserstackCLI[_0x28235a(0x141)]()[_0x28235a(0x11d)]['TestHubModule']?.[_0x28235a(0x126)]?.[_0x28235a(0xef)]()?.[_0x28235a(0x124)],_0x1f3e34=path[_0x28235a(0x114)](_0xf0b470,_0xec827c);!fs['existsSync'](_0x1f3e34)&&(fs[_0x28235a(0x15f)](_0x1f3e34),this['logger']['debug'](util[_0x28235a(0x120)](_0x25bfd5['bWSlG'],_0x1f3e34)));if(_0x25bfd5[_0x28235a(0x158)](_0x5c203d[_0x28235a(0xff)](),'')){this[_0x28235a(0xeb)][_0x28235a(0xf6)](util[_0x28235a(0x120)](_0x25bfd5[_0x28235a(0x15e)]));return;}if(_0x5c203d[_0x28235a(0x11b)](_0x25bfd5[_0x28235a(0x159)])||_0x5c203d[_0x28235a(0x11b)](_0x25bfd5[_0x28235a(0x10a)])){const _0x3adc1d=_0x5c203d['startsWith'](_0x25bfd5[_0x28235a(0x159)])?https:http,_0x34ce42=path['basename'](_0x5c203d),_0x1f2897=path[_0x28235a(0x114)](_0x1f3e34,_0x34ce42),_0xa8b482=fs[_0x28235a(0x150)](_0x1f2897);_0x3adc1d['get'](_0x5c203d,_0x3b6dcd=>{const _0x2fa6f3=_0x28235a;if(_0x25bfd5[_0x2fa6f3(0x158)](_0x3b6dcd[_0x2fa6f3(0xfb)],0xc8))_0x3b6dcd[_0x2fa6f3(0x166)](_0xa8b482),_0xa8b482['on'](_0x25bfd5[_0x2fa6f3(0x165)],()=>{const _0x9849ca=_0x2fa6f3;_0xa8b482[_0x9849ca(0x146)]();const _0x16ce9a=fs[_0x9849ca(0xea)](_0x1f2897),_0x56064c=_0x25bfd5['IaxMy'](_0x16ce9a[_0x9849ca(0x10f)],_0x25bfd5['GFcFv'](0x400,0x400));if(_0x25bfd5['LNMPd'](_0x56064c,0x64)){this[_0x9849ca(0xeb)]['debug'](util[_0x9849ca(0x120)](_0x25bfd5[_0x9849ca(0x10c)],_0x56064c[_0x9849ca(0x12d)](0x2))),fs[_0x9849ca(0xe8)](_0x1f2897);return;}this[_0x9849ca(0xeb)][_0x9849ca(0xf6)](util[_0x9849ca(0x120)](_0x25bfd5[_0x9849ca(0x116)],_0x1f2897)),uploadAttachmentsManager[_0x9849ca(0x133)](_0x1f2897,_0x46122e);});else{this[_0x2fa6f3(0xeb)][_0x2fa6f3(0xf6)](util[_0x2fa6f3(0x120)](_0x25bfd5[_0x2fa6f3(0x100)],_0x3b6dcd[_0x2fa6f3(0xfb)])),_0xa8b482[_0x2fa6f3(0x146)](),fs['unlinkSync'](_0x1f2897);return;}})['on'](_0x25bfd5[_0x28235a(0x15d)],_0x2b4ec5=>{const _0x5029fa=_0x28235a;this[_0x5029fa(0xeb)][_0x5029fa(0xf6)](util['format'](_0x25bfd5[_0x5029fa(0x14a)],_0x2b4ec5[_0x5029fa(0xf8)])),_0xa8b482['close'](),fs['unlinkSync'](_0x1f2897);return;});}else{if(!fs[_0x28235a(0x108)](_0x5c203d)){this[_0x28235a(0xeb)]['debug'](util[_0x28235a(0x120)](_0x25bfd5[_0x28235a(0x109)],_0x5c203d));return;}const _0x378f22=fs[_0x28235a(0xea)](_0x5c203d),_0x3f2701=_0x25bfd5[_0x28235a(0x122)](_0x378f22[_0x28235a(0x10f)],_0x25bfd5[_0x28235a(0xf2)](0x400,0x400));if(_0x25bfd5['LNMPd'](_0x3f2701,0x64)){this[_0x28235a(0xeb)][_0x28235a(0xf6)](util[_0x28235a(0x120)](_0x25bfd5['NHEwI'],_0x3f2701[_0x28235a(0x12d)](0x2)));return;}const _0x3c41fa=path['basename'](_0x5c203d),_0x240c3d=path[_0x28235a(0x114)](_0x1f3e34,_0x3c41fa);fs[_0x28235a(0x160)](_0x5c203d,_0x240c3d),uploadAttachmentsManager[_0x28235a(0x133)](_0x240c3d,_0x46122e);}}static[a89_0x50e2b2(0x133)](_0x379e56,_0x5c872d){const _0x1352f0=a89_0x50e2b2,_0x1db48f={'ZJHMP':function(_0x4e485b,_0x1dcfc2){return _0x4e485b(_0x1dcfc2);},'DqFUB':_0x1352f0(0x14d),'azlcK':function(_0x43d249,_0x16a1f4){return _0x43d249(_0x16a1f4);},'dcbiC':_0x1352f0(0x123),'npivX':function(_0x43b172,_0x4c6329){return _0x43b172===_0x4c6329;},'aslPu':_0x1352f0(0x15b),'mNIYf':_0x1352f0(0x162),'fpgdc':_0x1352f0(0x107),'IeMUi':_0x1352f0(0x137),'rTEDZ':'trackFile:\x20TestFramework\x20not\x20available,\x20cannot\x20track\x20attachment','ShdNL':_0x1352f0(0x14e),'AjVaI':_0x1352f0(0x135),'njWJT':_0x1352f0(0x13f),'SiIkl':_0x1352f0(0x112),'PaogY':_0x1352f0(0x148)};try{let _0x4d9fb3;const _0xbef95b=global[_0x1352f0(0x14f)]?.['currentTest']?.[_0x1352f0(0x142)],_0x4b68d4=_0x1db48f[_0x1352f0(0x15c)](require,_0x1db48f[_0x1352f0(0x161)]),_0x3b25f0=_0x1db48f[_0x1352f0(0xe7)](require,_0x1db48f[_0x1352f0(0xee)]),_0x450e84=_0x4b68d4['getInstance']()[_0x1352f0(0xfa)]()&&_0x1db48f[_0x1352f0(0x11f)](_0x3b25f0['getTestFrameworkDetail']()?.[_0x1352f0(0x167)]?.[_0x1352f0(0x12c)](),_0x1db48f[_0x1352f0(0xfd)]);if(_0x450e84){_0x4d9fb3=global[_0x1352f0(0x157)];if(!_0x4d9fb3){const _0x47037b=AutomationFramework['getTrackedInstance']();_0x4d9fb3=AutomationFramework[_0x1352f0(0xed)](_0x47037b,PlaywrightDriverModule[_0x1352f0(0x106)],'');}this[_0x1352f0(0xeb)][_0x1352f0(0xf6)]('trackFile:\x20Jest+Playwright\x20-\x20testId\x20(testIdentifier):\x20'+_0x4d9fb3);}else{if(!_0xbef95b){const _0xbbb40c=AutomationFramework['getTrackedInstance']();_0x4d9fb3=AutomationFramework['getState'](_0xbbb40c,PlaywrightDriverModule[_0x1352f0(0x106)],'');}else _0x4d9fb3=TestInfo[_0x1352f0(0x13a)](_0xbef95b,_0xbef95b['retry']);this[_0x1352f0(0xeb)][_0x1352f0(0xf6)](_0x1352f0(0x163)+_0x4d9fb3);}if(!_0x4d9fb3){this[_0x1352f0(0xeb)][_0x1352f0(0xf6)](_0x1db48f['mNIYf']);return;}const _0x311b45={[TestFrameworkConstants['KEY_FILE_SIZE']]:fs[_0x1352f0(0xea)](_0x379e56)['size'],[TestFrameworkConstants[_0x1352f0(0x145)]]:path[_0x1352f0(0xfe)](_0x379e56),[TestFrameworkConstants['KEY_FILE_PATH']]:_0x379e56,[TestFrameworkConstants[_0x1352f0(0xf7)]]:_0x5c872d?_0x1db48f[_0x1352f0(0x105)]:_0x1db48f[_0x1352f0(0x134)]};if(_0x450e84){const _0x1c1424=_0x4b68d4[_0x1352f0(0x141)]()[_0x1352f0(0x132)]();if(!_0x1c1424){this[_0x1352f0(0xeb)][_0x1352f0(0xf6)](_0x1db48f['rTEDZ']);return;}const _0xc674f1=_0x1db48f[_0x1352f0(0x15c)](require,_0x1db48f[_0x1352f0(0x130)]),_0x4519b2=_0x1db48f[_0x1352f0(0x15c)](require,_0x1db48f[_0x1352f0(0x110)]),_0x239823=_0x1c1424['resolveInstance'](_0xc674f1[_0x1352f0(0x155)],_0x4519b2['POST']);if(!_0x239823){this[_0x1352f0(0xeb)][_0x1352f0(0xf6)](_0x1db48f['njWJT']);return;}const _0x27db8a=_0x239823[_0x1352f0(0x14c)]()[_0x1352f0(0x12f)](_0x4d9fb3)||{},_0x566467=_0x27db8a[TestFrameworkConstants[_0x1352f0(0x11c)]]||{},_0x834d0d={..._0x566467};_0x834d0d[_0x379e56]=_0x311b45;const _0x10b6c6=_0x834d0d,_0x1a116c={[TestFrameworkConstants[_0x1352f0(0x11c)]]:_0x10b6c6},_0x4da1ca={};_0x4da1ca[_0x4d9fb3]=_0x1a116c,_0x239823[_0x1352f0(0xec)](_0x4da1ca),this['logger'][_0x1352f0(0xf6)]('trackFile:\x20Stored\x20attachment\x20in\x20instance\x20memory\x20for\x20testId:\x20'+_0x4d9fb3+_0x1352f0(0x13b)+_0x379e56);}else{const _0x4ef5e5=TestInfo['getTestDetails'](_0x4d9fb3),_0x50771e=_0x4ef5e5[TestFrameworkConstants[_0x1352f0(0x11c)]]||{};_0x50771e[_0x379e56]=_0x311b45,_0x4ef5e5[TestFrameworkConstants[_0x1352f0(0x11c)]]=_0x50771e,TestInfo[_0x1352f0(0x139)](_0x4d9fb3,_0x4ef5e5),this['logger'][_0x1352f0(0xf6)](_0x1352f0(0x154)+_0x4d9fb3+',\x20filepath:\x20'+_0x379e56);}this['logger'][_0x1352f0(0xf6)](util[_0x1352f0(0x120)](_0x1db48f[_0x1352f0(0x144)],_0x379e56));}catch(_0x20fa53){this['logger']['debug'](util[_0x1352f0(0x120)](_0x1db48f[_0x1352f0(0x127)],_0x20fa53[_0x1352f0(0xf8)]));}}static[a89_0x50e2b2(0xf4)](){const _0x45c3b3=a89_0x50e2b2,_0x7effb6={};_0x7effb6['UTYBW']=_0x45c3b3(0x140),_0x7effb6[_0x45c3b3(0x153)]=_0x45c3b3(0x111),_0x7effb6[_0x45c3b3(0x129)]=_0x45c3b3(0x104);const _0x54f353=_0x7effb6,_0x212b70=os[_0x45c3b3(0x15a)](),_0x3d1ad5=path[_0x45c3b3(0x114)](_0x212b70,_0x54f353[_0x45c3b3(0x101)]);if(!fs[_0x45c3b3(0x108)](_0x3d1ad5))return;const _0x3c1ee4=BrowserstackCLI['getInstance']()[_0x45c3b3(0x11d)][_0x45c3b3(0xf0)]?.[_0x45c3b3(0x126)]?.[_0x45c3b3(0xef)]()?.['buildHashedId'],_0x53f489=_0x3c1ee4?path[_0x45c3b3(0x114)](_0x3d1ad5,_0x3c1ee4):null;if(!_0x53f489||!fs[_0x45c3b3(0x108)](_0x53f489)){this[_0x45c3b3(0xeb)][_0x45c3b3(0xf6)](util[_0x45c3b3(0x120)](_0x54f353[_0x45c3b3(0x153)],_0x3c1ee4));return;}const _0x3b62a8={};_0x3b62a8['recursive']=!![],_0x3b62a8['force']=!![],fs[_0x45c3b3(0x143)](_0x53f489,_0x3b62a8),this[_0x45c3b3(0xeb)][_0x45c3b3(0xf6)](util[_0x45c3b3(0x120)](_0x54f353['MrGJL']));}}function a89_0x49f5(){const _0x30b021=['name','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','azlcK','unlinkSync','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','statSync','logger','addMultipleEntries','getState','dcbiC','toObject','TestHubModule','Attachment\x20recevied\x20for\x20path:\x20%s','xMSlC','FVceV','clearAttachments','5TmWNqs','debug','KEY_FILE_LEVEL','message','LNMPd','isRunning','statusCode','./modules/playwrightDriverModule','aslPu','basename','trim','mCGzC','UTYBW','12812180IdSAzP','Created\x20folder:\x20%s','Cleared\x20attachment\x20folder','fpgdc','KEY_TEST_ID','BuildLevel','existsSync','eLlEu','CKpfR','finish','SgMfV','rwCQa','util','size','AjVaI','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','exports','join','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','VQHBT','http://','1075950xtBoeq','./TestInfo','692492aOSWKE','startsWith','KEY_TEST_ATTACHMENTS','modules','bWSlG','npivX','format','error','IaxMy','./cliUtils','buildHashedId','GFcFv','testhubConfig','PaogY','1952973YUZBld','MrGJL','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','2043348HaRNkm','toLowerCase','toFixed','NHEwI','get','ShdNL','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','getTestFramework','trackFile','IeMUi','./state/hookState','RyIsa','TestLevel','DnjhS','setTestDetails','getTestIdentifierFromTestInfo',',\x20filepath:\x20','http','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','319619HhkBUq','trackFile:\x20Instance\x20not\x20available,\x20cannot\x20track\x20attachment','.browserstack','getInstance','testInfo','rmSync','SiIkl','KEY_FILE_NAME','close','4208kLsRAe','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','448kTAzxB','UGGvQ','https://','getAllData','./browserstackCLI','./state/testFrameworkState','__workerDetails','createWriteStream','uploadAttachmentsManager','uploadAttachments','gqIsg','trackFile:\x20Stored\x20attachment\x20in\x20TestInfo\x20file\x20for\x20testId:\x20','TEST','2LAtbTj','__jestCurrentTestIdentifier','wfuaV','oOfgn','homedir','jest','ZJHMP','EtBxa','KSxYz','mkdirSync','copyFileSync','DqFUB','trackFile:\x20No\x20testId\x20available,\x20cannot\x20track\x20attachment','trackFile:\x20Cucumber+Playwright\x20-\x20testId:\x20','../../helpers/classLogger.js','nNFLH','pipe'];a89_0x49f5=function(){return _0x30b021;};return a89_0x49f5();}module[a89_0x50e2b2(0x113)]=uploadAttachmentsManager;