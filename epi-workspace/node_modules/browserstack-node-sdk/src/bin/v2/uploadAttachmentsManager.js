const a86_0x48369b=a86_0x5821;(function(_0x4291fc,_0x3c8d66){const _0x3c6fd0=a86_0x5821,_0x55d943=_0x4291fc();while(!![]){try{const _0x35f520=-parseInt(_0x3c6fd0(0x104))/0x1+parseInt(_0x3c6fd0(0x106))/0x2*(parseInt(_0x3c6fd0(0xff))/0x3)+parseInt(_0x3c6fd0(0x10d))/0x4*(-parseInt(_0x3c6fd0(0x11d))/0x5)+-parseInt(_0x3c6fd0(0x127))/0x6+-parseInt(_0x3c6fd0(0x161))/0x7+parseInt(_0x3c6fd0(0x105))/0x8*(-parseInt(_0x3c6fd0(0x124))/0x9)+parseInt(_0x3c6fd0(0x162))/0xa*(parseInt(_0x3c6fd0(0x107))/0xb);if(_0x35f520===_0x3c8d66)break;else _0x55d943['push'](_0x55d943['shift']());}catch(_0x2ff87a){_0x55d943['push'](_0x55d943['shift']());}}}(a86_0x16c4,0x90b5f));function a86_0x16c4(){const _0x8a2e0f=['testhubConfig','KEY_FILE_LEVEL','uploadAttachments','rmSync','getTestIdentifierFromTestInfo','ULmnZ','EUYGf','trim','TAhlu','__workerDetails','lrxnw','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','qqARr','LIiHD','cqWdI','pipe','http://','./framework/automationFramework','QgYtT','buildHashedId','bUbqk','getState','YzmpJ','VNEAo','mkdirSync','message','KEY_TEST_ID','rxGdj','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','eikcr','KEY_FILE_NAME','getTrackedInstance','./TestInfo','getInstance','currentTest','path','wTayl','Cleared\x20attachment\x20folder','toObject','trackFile','debug','force','modules','logger','XqibG','TestHubModule','KEY_TEST_ATTACHMENTS','TuZkR','https://','retry','HYCNe','rUjAE','getTestDetails','XOrSO','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','8167971VdFSiv','70MdaNjj','hOImL','http','Created\x20.browserstack\x20folder\x20at:\x20%s','copyFileSync','5304VrNWGR','cLxHS','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','dZtkc','1051090uTzLQq','540168AMWVeV','272DuHCwf','8014116HkqMsJ','exports','Actjp','QIXIm','iWhug','homedir','140DPSago','./browserstackCLI','https','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','irbFd','testInfo','Attachment\x20recevied\x20for\x20path:\x20%s','toFixed','unlinkSync','dRUKy','KEY_FILE_PATH','createWriteStream','JerCa','.browserstack','join','BuildLevel','104310sEyTeM','finish','close','statusCode','existsSync','statSync','../../helpers/classLogger.js','126JOCKlQ','startsWith','format','5125188ohpPpG','size'];a86_0x16c4=function(){return _0x8a2e0f;};return a86_0x16c4();}const os=require('os'),fs=require('fs'),path=require(a86_0x48369b(0x14d)),util=require('util'),BrowserstackCLI=require(a86_0x48369b(0x10e)),https=require(a86_0x48369b(0x10f)),http=require(a86_0x48369b(0xfc)),AutomationFramework=require(a86_0x48369b(0x13b)),PlaywrightDriverModule=require('./modules/playwrightDriverModule'),TestInfo=require(a86_0x48369b(0x14a)),TestFrameworkConstants=require('./framework/constants/testFrameworkConstants'),{createClassLogger}=require(a86_0x48369b(0x123));function a86_0x5821(_0x41c29f,_0x249e33){const _0x16c494=a86_0x16c4();return a86_0x5821=function(_0x582141,_0x3575ef){_0x582141=_0x582141-0xfc;let _0x1a16fd=_0x16c494[_0x582141];return _0x1a16fd;},a86_0x5821(_0x41c29f,_0x249e33);}class uploadAttachmentsManager{static ['logger']=createClassLogger('uploadAttachmentsManager');static[a86_0x48369b(0x12b)](_0x652668,_0x324859=![]){const _0x4b2165=a86_0x48369b,_0x24f095={};_0x24f095[_0x4b2165(0x14e)]=function(_0x388eba,_0x4467b9){return _0x388eba/_0x4467b9;},_0x24f095['JerCa']=function(_0x34aca2,_0x10e014){return _0x34aca2*_0x10e014;},_0x24f095[_0x4b2165(0x109)]=function(_0x3cfaaa,_0x6634fb){return _0x3cfaaa>_0x6634fb;},_0x24f095[_0x4b2165(0x163)]='Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.',_0x24f095[_0x4b2165(0x131)]='File\x20downloaded\x20to:\x20%s',_0x24f095['VNEAo']=function(_0x27a777,_0x1e8d8e){return _0x27a777===_0x1e8d8e;},_0x24f095['TuZkR']=_0x4b2165(0x11e),_0x24f095['dRUKy']=_0x4b2165(0x134),_0x24f095[_0x4b2165(0x147)]=_0x4b2165(0x146),_0x24f095[_0x4b2165(0x13e)]=_0x4b2165(0x113),_0x24f095[_0x4b2165(0x12f)]=_0x4b2165(0x11a),_0x24f095[_0x4b2165(0x15c)]=_0x4b2165(0x135),_0x24f095['tWfkC']=_0x4b2165(0xfd),_0x24f095[_0x4b2165(0x140)]='Created\x20folder:\x20%s',_0x24f095['irbFd']=_0x4b2165(0x101),_0x24f095[_0x4b2165(0x156)]=_0x4b2165(0x15a),_0x24f095[_0x4b2165(0x138)]=_0x4b2165(0x13a),_0x24f095[_0x4b2165(0x13c)]='error',_0x24f095[_0x4b2165(0x103)]='Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s',_0x24f095[_0x4b2165(0x137)]='File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.';const _0x19743c=_0x24f095;this[_0x4b2165(0x155)][_0x4b2165(0x152)](util[_0x4b2165(0x126)](_0x19743c[_0x4b2165(0x13e)],_0x652668));const _0x151487=os['homedir'](),_0x270cd4=path[_0x4b2165(0x11b)](_0x151487,_0x19743c[_0x4b2165(0x12f)]);!fs[_0x4b2165(0x121)](_0x270cd4)&&(this['logger']['debug'](util[_0x4b2165(0x126)](_0x19743c[_0x4b2165(0x15c)],_0x270cd4)),fs['mkdirSync'](_0x270cd4),this['logger'][_0x4b2165(0x152)](util[_0x4b2165(0x126)](_0x19743c['tWfkC'],_0x270cd4)));const _0x1bae1a=BrowserstackCLI[_0x4b2165(0x14b)]()[_0x4b2165(0x154)][_0x4b2165(0x157)]?.[_0x4b2165(0x129)]?.[_0x4b2165(0x150)]()?.[_0x4b2165(0x13d)],_0x28707f=path[_0x4b2165(0x11b)](_0x270cd4,_0x1bae1a);!fs[_0x4b2165(0x121)](_0x28707f)&&(fs[_0x4b2165(0x142)](_0x28707f),this[_0x4b2165(0x155)]['debug'](util[_0x4b2165(0x126)](_0x19743c[_0x4b2165(0x140)],_0x28707f)));if(_0x19743c[_0x4b2165(0x141)](_0x652668[_0x4b2165(0x130)](),'')){this[_0x4b2165(0x155)][_0x4b2165(0x152)](util[_0x4b2165(0x126)](_0x19743c[_0x4b2165(0x111)]));return;}if(_0x652668['startsWith'](_0x19743c[_0x4b2165(0x156)])||_0x652668[_0x4b2165(0x125)](_0x19743c['cqWdI'])){const _0xb77228=_0x652668['startsWith'](_0x19743c[_0x4b2165(0x156)])?https:http,_0x4e5e0c=path['basename'](_0x652668),_0x3df086=path['join'](_0x28707f,_0x4e5e0c),_0x2809b3=fs[_0x4b2165(0x118)](_0x3df086);_0xb77228['get'](_0x652668,_0x698c=>{const _0x529661=_0x4b2165,_0x26cad8={'lrxnw':function(_0x27c66a,_0x55ac36){const _0x256385=a86_0x5821;return _0x19743c[_0x256385(0x14e)](_0x27c66a,_0x55ac36);},'QIXIm':function(_0x4d5ea3,_0xfff914){const _0x2970fa=a86_0x5821;return _0x19743c[_0x2970fa(0x119)](_0x4d5ea3,_0xfff914);},'ZsThd':function(_0x159b7e,_0x1f1414){return _0x19743c['Actjp'](_0x159b7e,_0x1f1414);},'cLxHS':_0x19743c[_0x529661(0x163)],'FWwOf':_0x19743c[_0x529661(0x131)]};if(_0x19743c['VNEAo'](_0x698c[_0x529661(0x120)],0xc8))_0x698c[_0x529661(0x139)](_0x2809b3),_0x2809b3['on'](_0x19743c[_0x529661(0x159)],()=>{const _0x1ebea8=_0x529661;_0x2809b3[_0x1ebea8(0x11f)]();const _0x9909eb=fs[_0x1ebea8(0x122)](_0x3df086),_0x40bb1f=_0x26cad8[_0x1ebea8(0x133)](_0x9909eb[_0x1ebea8(0x128)],_0x26cad8[_0x1ebea8(0x10a)](0x400,0x400));if(_0x26cad8['ZsThd'](_0x40bb1f,0x64)){this[_0x1ebea8(0x155)][_0x1ebea8(0x152)](util['format'](_0x26cad8[_0x1ebea8(0x100)],_0x40bb1f[_0x1ebea8(0x114)](0x2))),fs['unlinkSync'](_0x3df086);return;}this[_0x1ebea8(0x155)]['debug'](util[_0x1ebea8(0x126)](_0x26cad8['FWwOf'],_0x3df086)),uploadAttachmentsManager[_0x1ebea8(0x151)](_0x3df086,_0x324859);});else{this['logger'][_0x529661(0x152)](util[_0x529661(0x126)](_0x19743c[_0x529661(0x116)],_0x698c['statusCode'])),_0x2809b3[_0x529661(0x11f)](),fs[_0x529661(0x115)](_0x3df086);return;}})['on'](_0x19743c[_0x4b2165(0x13c)],_0x154f97=>{const _0x296de6=_0x4b2165;this[_0x296de6(0x155)][_0x296de6(0x152)](util['format'](_0x19743c[_0x296de6(0x147)],_0x154f97['message'])),_0x2809b3['close'](),fs[_0x296de6(0x115)](_0x3df086);return;});}else{if(!fs[_0x4b2165(0x121)](_0x652668)){this[_0x4b2165(0x155)][_0x4b2165(0x152)](util['format'](_0x19743c['dZtkc'],_0x652668));return;}const _0x248559=fs['statSync'](_0x652668),_0x16b34b=_0x19743c[_0x4b2165(0x14e)](_0x248559['size'],_0x19743c[_0x4b2165(0x119)](0x400,0x400));if(_0x19743c[_0x4b2165(0x109)](_0x16b34b,0x64)){this[_0x4b2165(0x155)][_0x4b2165(0x152)](util['format'](_0x19743c[_0x4b2165(0x137)],_0x16b34b[_0x4b2165(0x114)](0x2)));return;}const _0x1a17bc=path['basename'](_0x652668),_0x507406=path[_0x4b2165(0x11b)](_0x28707f,_0x1a17bc);fs[_0x4b2165(0xfe)](_0x652668,_0x507406),uploadAttachmentsManager[_0x4b2165(0x151)](_0x507406,_0x324859);}}static[a86_0x48369b(0x151)](_0x27bc65,_0x54d2d3){const _0x1fede1=a86_0x48369b,_0x55e8fb={};_0x55e8fb[_0x1fede1(0x136)]=_0x1fede1(0x11c),_0x55e8fb[_0x1fede1(0x145)]='TestLevel',_0x55e8fb['rUjAE']=_0x1fede1(0x160),_0x55e8fb['dymfl']=_0x1fede1(0x102);const _0x2ae931=_0x55e8fb;try{let _0x43f560;const _0x5d6805=global[_0x1fede1(0x132)]?.[_0x1fede1(0x14c)]?.[_0x1fede1(0x112)];if(!_0x5d6805){const _0x47386e=AutomationFramework[_0x1fede1(0x149)]();_0x43f560=AutomationFramework[_0x1fede1(0x13f)](_0x47386e,PlaywrightDriverModule[_0x1fede1(0x144)],'');}else _0x43f560=TestInfo[_0x1fede1(0x12d)](_0x5d6805,_0x5d6805[_0x1fede1(0x15b)]);const _0x31384f=TestInfo[_0x1fede1(0x15e)](_0x43f560),_0x38d4c5=_0x31384f[TestFrameworkConstants[_0x1fede1(0x158)]]||{};_0x38d4c5[_0x27bc65]={[TestFrameworkConstants['KEY_FILE_SIZE']]:fs[_0x1fede1(0x122)](_0x27bc65)[_0x1fede1(0x128)],[TestFrameworkConstants[_0x1fede1(0x148)]]:path['basename'](_0x27bc65),[TestFrameworkConstants[_0x1fede1(0x117)]]:_0x27bc65,[TestFrameworkConstants[_0x1fede1(0x12a)]]:_0x54d2d3?_0x2ae931[_0x1fede1(0x136)]:_0x2ae931[_0x1fede1(0x145)]},_0x31384f[TestFrameworkConstants[_0x1fede1(0x158)]]=_0x38d4c5,TestInfo['setTestDetails'](_0x43f560,_0x31384f),this[_0x1fede1(0x155)][_0x1fede1(0x152)](util[_0x1fede1(0x126)](_0x2ae931[_0x1fede1(0x15d)],_0x27bc65));}catch(_0x527df2){this[_0x1fede1(0x155)][_0x1fede1(0x152)](util[_0x1fede1(0x126)](_0x2ae931['dymfl'],_0x527df2[_0x1fede1(0x143)]));}}static['clearAttachments'](){const _0x4e255d=a86_0x48369b,_0x224177={};_0x224177[_0x4e255d(0x15f)]=_0x4e255d(0x11a),_0x224177['iWhug']=_0x4e255d(0x110),_0x224177[_0x4e255d(0x12e)]=_0x4e255d(0x14f);const _0x23e1ef=_0x224177,_0x3263be=os[_0x4e255d(0x10c)](),_0x1cce1d=path[_0x4e255d(0x11b)](_0x3263be,_0x23e1ef[_0x4e255d(0x15f)]);if(!fs[_0x4e255d(0x121)](_0x1cce1d))return;const _0x255f50=BrowserstackCLI['getInstance']()[_0x4e255d(0x154)][_0x4e255d(0x157)]?.[_0x4e255d(0x129)]?.[_0x4e255d(0x150)]()?.[_0x4e255d(0x13d)],_0x17bdce=_0x255f50?path[_0x4e255d(0x11b)](_0x1cce1d,_0x255f50):null;if(!_0x17bdce||!fs['existsSync'](_0x17bdce)){this[_0x4e255d(0x155)]['debug'](util[_0x4e255d(0x126)](_0x23e1ef[_0x4e255d(0x10b)],_0x255f50));return;}const _0x9cd2cf={};_0x9cd2cf['recursive']=!![],_0x9cd2cf[_0x4e255d(0x153)]=!![],fs[_0x4e255d(0x12c)](_0x17bdce,_0x9cd2cf),this[_0x4e255d(0x155)][_0x4e255d(0x152)](util[_0x4e255d(0x126)](_0x23e1ef[_0x4e255d(0x12e)]));}}module[a86_0x48369b(0x108)]=uploadAttachmentsManager;