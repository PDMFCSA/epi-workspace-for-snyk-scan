const a80_0x1c656b=a80_0x1251;(function(_0x92bde,_0x3500e1){const _0x42eb62=a80_0x1251,_0x58c68b=_0x92bde();while(!![]){try{const _0x2fc99b=parseInt(_0x42eb62(0x68))/0x1+-parseInt(_0x42eb62(0x95))/0x2+-parseInt(_0x42eb62(0x67))/0x3+-parseInt(_0x42eb62(0x78))/0x4+parseInt(_0x42eb62(0xc0))/0x5+parseInt(_0x42eb62(0x6f))/0x6*(parseInt(_0x42eb62(0xa8))/0x7)+-parseInt(_0x42eb62(0xa9))/0x8;if(_0x2fc99b===_0x3500e1)break;else _0x58c68b['push'](_0x58c68b['shift']());}catch(_0x277158){_0x58c68b['push'](_0x58c68b['shift']());}}}(a80_0x50d6,0xe2074));const os=require('os'),fs=require('fs'),path=require('path'),util=require(a80_0x1c656b(0xca)),BrowserstackCLI=require(a80_0x1c656b(0x77)),https=require(a80_0x1c656b(0xae)),http=require(a80_0x1c656b(0xbb)),AutomationFramework=require(a80_0x1c656b(0x6a)),PlaywrightDriverModule=require(a80_0x1c656b(0xa1)),TestInfo=require('./TestInfo'),TestFrameworkConstants=require(a80_0x1c656b(0x9c)),{createClassLogger}=require(a80_0x1c656b(0x7f));function a80_0x1251(_0x5b36e3,_0x57840c){const _0x50d687=a80_0x50d6();return a80_0x1251=function(_0x1251b7,_0xc30098){_0x1251b7=_0x1251b7-0x64;let _0x1a5b2d=_0x50d687[_0x1251b7];return _0x1a5b2d;},a80_0x1251(_0x5b36e3,_0x57840c);}function a80_0x50d6(){const _0x1d62e8=['rmSync','KVtjW','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','getState','unlinkSync','../../helpers/classLogger.js','getTrackedInstance','yItHW','TyTfu','finish','pipe','Attachment\x20recevied\x20for\x20path:\x20%s','nAGPp','KEY_FILE_PATH','EcARC','BORAm','toObject','homedir','TestHubModule','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','copyFileSync','modules','QSdeu','basename','jfNqO','qfsAg','lJOYJ','1233276flBWfA','error','trim','lWpzu','RowAB','BWqQg','size','./framework/constants/testFrameworkConstants','yunDf','pBJTU','getInstance','KEY_TEST_ID','./modules/playwrightDriverModule','recursive','testhubConfig','uploadAttachments','startsWith','ZQqwb','PfFxS','133847QAapVy','3294808KPNbWN','UbxZK','joIzZ','existsSync','ZQnGW','https','Created\x20.browserstack\x20folder\x20at:\x20%s','buildHashedId','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','ioHDR','http://','logger','createWriteStream','get','tCQJR','njard','lAyKv','BuildLevel','http','exports','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','setTestDetails','TestLevel','7138225NVkWot','Created\x20folder:\x20%s','HpYma','elYAb','message','statusCode','https://','trackFile','clearAttachments','debug','util','format','.browserstack','uploadAttachmentsManager','604815lPlvIo','63645tZpIim','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','./framework/automationFramework','close','File\x20downloaded\x20to:\x20%s','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','WJPbZ','348yRnoLj','mkdirSync','uGfgb','Cleared\x20attachment\x20folder','join','gwczS','qXpkV','KEY_TEST_ATTACHMENTS','./browserstackCLI','1777608zsdfzO','toFixed'];a80_0x50d6=function(){return _0x1d62e8;};return a80_0x50d6();}class uploadAttachmentsManager{static [a80_0x1c656b(0xb4)]=createClassLogger(a80_0x1c656b(0x66));static[a80_0x1c656b(0xa4)](_0x388c3b,_0x5018b6=![]){const _0x3ef02b=a80_0x1c656b,_0x5165da={};_0x5165da[_0x3ef02b(0x6e)]=function(_0x32b861,_0x16abbd){return _0x32b861/_0x16abbd;},_0x5165da[_0x3ef02b(0x81)]=function(_0x211fbd,_0x3afc64){return _0x211fbd*_0x3afc64;},_0x5165da[_0x3ef02b(0xad)]=function(_0x35cd96,_0x61bfa0){return _0x35cd96>_0x61bfa0;},_0x5165da[_0x3ef02b(0x71)]='Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.',_0x5165da[_0x3ef02b(0x90)]=_0x3ef02b(0x6c),_0x5165da[_0x3ef02b(0x88)]=function(_0x29a936,_0x244809){return _0x29a936===_0x244809;},_0x5165da[_0x3ef02b(0xa6)]=_0x3ef02b(0x83),_0x5165da['pBJTU']=_0x3ef02b(0x69),_0x5165da[_0x3ef02b(0x74)]=_0x3ef02b(0x8d),_0x5165da[_0x3ef02b(0xab)]=_0x3ef02b(0x85),_0x5165da['BWqQg']=_0x3ef02b(0x65),_0x5165da[_0x3ef02b(0xb7)]=_0x3ef02b(0xbd),_0x5165da[_0x3ef02b(0x93)]=_0x3ef02b(0xaf),_0x5165da[_0x3ef02b(0x94)]=_0x3ef02b(0xc1),_0x5165da[_0x3ef02b(0x89)]=_0x3ef02b(0x7c),_0x5165da[_0x3ef02b(0xb9)]=_0x3ef02b(0xc6),_0x5165da['UbxZK']=_0x3ef02b(0xb3),_0x5165da[_0x3ef02b(0x75)]=_0x3ef02b(0x96),_0x5165da[_0x3ef02b(0xc2)]=_0x3ef02b(0x6d),_0x5165da['lWpzu']=function(_0x50f62f,_0x5a9549){return _0x50f62f/_0x5a9549;},_0x5165da[_0x3ef02b(0x99)]=function(_0x370553,_0x19110e){return _0x370553>_0x19110e;},_0x5165da[_0x3ef02b(0xc3)]=_0x3ef02b(0xb1);const _0x34c29b=_0x5165da;this['logger'][_0x3ef02b(0xc9)](util[_0x3ef02b(0x64)](_0x34c29b[_0x3ef02b(0xab)],_0x388c3b));const _0x108050=os['homedir'](),_0x4e7dc2=path[_0x3ef02b(0x73)](_0x108050,_0x34c29b[_0x3ef02b(0x9a)]);!fs[_0x3ef02b(0xac)](_0x4e7dc2)&&(this[_0x3ef02b(0xb4)][_0x3ef02b(0xc9)](util['format'](_0x34c29b[_0x3ef02b(0xb7)],_0x4e7dc2)),fs['mkdirSync'](_0x4e7dc2),this[_0x3ef02b(0xb4)]['debug'](util[_0x3ef02b(0x64)](_0x34c29b[_0x3ef02b(0x93)],_0x4e7dc2)));const _0x2bd5c2=BrowserstackCLI[_0x3ef02b(0x9f)]()['modules'][_0x3ef02b(0x8c)]?.[_0x3ef02b(0xa3)]?.[_0x3ef02b(0x8a)]()?.[_0x3ef02b(0xb0)],_0x5c0bfd=path[_0x3ef02b(0x73)](_0x4e7dc2,_0x2bd5c2);!fs['existsSync'](_0x5c0bfd)&&(fs[_0x3ef02b(0x70)](_0x5c0bfd),this[_0x3ef02b(0xb4)][_0x3ef02b(0xc9)](util['format'](_0x34c29b[_0x3ef02b(0x94)],_0x5c0bfd)));if(_0x34c29b[_0x3ef02b(0x88)](_0x388c3b[_0x3ef02b(0x97)](),'')){this[_0x3ef02b(0xb4)][_0x3ef02b(0xc9)](util['format'](_0x34c29b[_0x3ef02b(0x89)]));return;}if(_0x388c3b['startsWith'](_0x34c29b[_0x3ef02b(0xb9)])||_0x388c3b[_0x3ef02b(0xa5)](_0x34c29b[_0x3ef02b(0xaa)])){const _0x28ce90=_0x388c3b[_0x3ef02b(0xa5)](_0x34c29b[_0x3ef02b(0xb9)])?https:http,_0x1d12b4=path[_0x3ef02b(0x91)](_0x388c3b),_0x4523e9=path[_0x3ef02b(0x73)](_0x5c0bfd,_0x1d12b4),_0x33953f=fs[_0x3ef02b(0xb5)](_0x4523e9);_0x28ce90[_0x3ef02b(0xb6)](_0x388c3b,_0x3af298=>{const _0x53ae7a=_0x3ef02b,_0x42f971={'cTzTk':function(_0x3656e8,_0x2c6b3f){return _0x34c29b['WJPbZ'](_0x3656e8,_0x2c6b3f);},'ioHDR':function(_0x30d053,_0xbbdacf){const _0x13c256=a80_0x1251;return _0x34c29b[_0x13c256(0x81)](_0x30d053,_0xbbdacf);},'bSnHD':function(_0x4ba1c3,_0x3ad180){const _0x1ee42b=a80_0x1251;return _0x34c29b[_0x1ee42b(0xad)](_0x4ba1c3,_0x3ad180);},'gKBBD':_0x34c29b[_0x53ae7a(0x71)],'QcmbK':_0x34c29b[_0x53ae7a(0x90)]};if(_0x34c29b[_0x53ae7a(0x88)](_0x3af298['statusCode'],0xc8))_0x3af298[_0x53ae7a(0x84)](_0x33953f),_0x33953f['on'](_0x34c29b[_0x53ae7a(0xa6)],()=>{const _0x54bb91=_0x53ae7a;_0x33953f[_0x54bb91(0x6b)]();const _0x2a0081=fs['statSync'](_0x4523e9),_0x475776=_0x42f971['cTzTk'](_0x2a0081[_0x54bb91(0x9b)],_0x42f971[_0x54bb91(0xb2)](0x400,0x400));if(_0x42f971['bSnHD'](_0x475776,0x64)){this[_0x54bb91(0xb4)][_0x54bb91(0xc9)](util[_0x54bb91(0x64)](_0x42f971['gKBBD'],_0x475776['toFixed'](0x2))),fs['unlinkSync'](_0x4523e9);return;}this[_0x54bb91(0xb4)][_0x54bb91(0xc9)](util[_0x54bb91(0x64)](_0x42f971['QcmbK'],_0x4523e9)),uploadAttachmentsManager[_0x54bb91(0xc7)](_0x4523e9,_0x5018b6);});else{this[_0x53ae7a(0xb4)]['debug'](util[_0x53ae7a(0x64)](_0x34c29b[_0x53ae7a(0x9e)],_0x3af298[_0x53ae7a(0xc5)])),_0x33953f[_0x53ae7a(0x6b)](),fs[_0x53ae7a(0x7e)](_0x4523e9);return;}})['on'](_0x34c29b[_0x3ef02b(0x75)],_0x3ee2e7=>{const _0x375609=_0x3ef02b;this[_0x375609(0xb4)][_0x375609(0xc9)](util[_0x375609(0x64)](_0x34c29b[_0x375609(0x74)],_0x3ee2e7[_0x375609(0xc4)])),_0x33953f[_0x375609(0x6b)](),fs[_0x375609(0x7e)](_0x4523e9);return;});}else{if(!fs[_0x3ef02b(0xac)](_0x388c3b)){this[_0x3ef02b(0xb4)]['debug'](util['format'](_0x34c29b['HpYma'],_0x388c3b));return;}const _0x5cb290=fs['statSync'](_0x388c3b),_0x590661=_0x34c29b[_0x3ef02b(0x98)](_0x5cb290[_0x3ef02b(0x9b)],_0x34c29b[_0x3ef02b(0x81)](0x400,0x400));if(_0x34c29b[_0x3ef02b(0x99)](_0x590661,0x64)){this['logger'][_0x3ef02b(0xc9)](util[_0x3ef02b(0x64)](_0x34c29b[_0x3ef02b(0xc3)],_0x590661[_0x3ef02b(0x79)](0x2)));return;}const _0x57c2ee=path[_0x3ef02b(0x91)](_0x388c3b),_0x2f9657=path[_0x3ef02b(0x73)](_0x5c0bfd,_0x57c2ee);fs[_0x3ef02b(0x8e)](_0x388c3b,_0x2f9657),uploadAttachmentsManager[_0x3ef02b(0xc7)](_0x2f9657,_0x5018b6);}}static[a80_0x1c656b(0xc7)](_0x5dcfca,_0x1c45ae){const _0x94a8ab=a80_0x1c656b,_0x57b8bf={};_0x57b8bf['yunDf']=_0x94a8ab(0xba),_0x57b8bf[_0x94a8ab(0xb8)]=_0x94a8ab(0xbf),_0x57b8bf[_0x94a8ab(0x7b)]='Attachment\x20file\x20tracked\x20for\x20upload:\x20%s',_0x57b8bf[_0x94a8ab(0x92)]='Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload';const _0x3553bd=_0x57b8bf;try{const _0x7662fb=AutomationFramework[_0x94a8ab(0x80)](),_0x52909f=AutomationFramework[_0x94a8ab(0x7d)](_0x7662fb,PlaywrightDriverModule[_0x94a8ab(0xa0)],''),_0x2524ed=TestInfo['getTestDetails'](_0x52909f),_0x30eaaf=_0x2524ed[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{};_0x30eaaf[_0x5dcfca]={[TestFrameworkConstants['KEY_FILE_SIZE']]:fs['statSync'](_0x5dcfca)[_0x94a8ab(0x9b)],[TestFrameworkConstants['KEY_FILE_NAME']]:path[_0x94a8ab(0x91)](_0x5dcfca),[TestFrameworkConstants[_0x94a8ab(0x87)]]:_0x5dcfca,[TestFrameworkConstants['KEY_FILE_LEVEL']]:_0x1c45ae?_0x3553bd[_0x94a8ab(0x9d)]:_0x3553bd[_0x94a8ab(0xb8)]},_0x2524ed[TestFrameworkConstants[_0x94a8ab(0x76)]]=_0x30eaaf,TestInfo[_0x94a8ab(0xbe)](_0x52909f,_0x2524ed),this[_0x94a8ab(0xb4)][_0x94a8ab(0xc9)](util['format'](_0x3553bd[_0x94a8ab(0x7b)],_0x5dcfca));}catch(_0x307258){this[_0x94a8ab(0xb4)]['debug'](util['format'](_0x3553bd['jfNqO'],_0x307258['message']));}}static[a80_0x1c656b(0xc8)](){const _0x7da327=a80_0x1c656b,_0x476bf5={};_0x476bf5['nAGPp']=_0x7da327(0x65),_0x476bf5[_0x7da327(0xa7)]='No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s',_0x476bf5[_0x7da327(0x82)]=_0x7da327(0x72);const _0x32fd35=_0x476bf5,_0x9ab55f=os[_0x7da327(0x8b)](),_0x5a3f54=path[_0x7da327(0x73)](_0x9ab55f,_0x32fd35[_0x7da327(0x86)]);if(!fs[_0x7da327(0xac)](_0x5a3f54))return;const _0x1a3396=BrowserstackCLI[_0x7da327(0x9f)]()[_0x7da327(0x8f)][_0x7da327(0x8c)]?.[_0x7da327(0xa3)]?.['toObject']()?.['buildHashedId'],_0x1c9e20=_0x1a3396?path[_0x7da327(0x73)](_0x5a3f54,_0x1a3396):null;if(!_0x1c9e20||!fs[_0x7da327(0xac)](_0x1c9e20)){this[_0x7da327(0xb4)]['debug'](util[_0x7da327(0x64)](_0x32fd35[_0x7da327(0xa7)],_0x1a3396));return;}const _0x8eb77c={};_0x8eb77c[_0x7da327(0xa2)]=!![],_0x8eb77c['force']=!![],fs[_0x7da327(0x7a)](_0x1c9e20,_0x8eb77c),this['logger'][_0x7da327(0xc9)](util['format'](_0x32fd35[_0x7da327(0x82)]));}}module[a80_0x1c656b(0xbc)]=uploadAttachmentsManager;