const a82_0x59e3df=a82_0x1aca;(function(_0x1cf6ca,_0x563ba2){const _0x1c7ddc=a82_0x1aca,_0x2a463d=_0x1cf6ca();while(!![]){try{const _0x145369=parseInt(_0x1c7ddc(0x187))/0x1*(parseInt(_0x1c7ddc(0x177))/0x2)+parseInt(_0x1c7ddc(0x175))/0x3*(-parseInt(_0x1c7ddc(0x1a8))/0x4)+parseInt(_0x1c7ddc(0x172))/0x5*(-parseInt(_0x1c7ddc(0x159))/0x6)+parseInt(_0x1c7ddc(0x179))/0x7+-parseInt(_0x1c7ddc(0x1ab))/0x8+-parseInt(_0x1c7ddc(0x180))/0x9+parseInt(_0x1c7ddc(0x161))/0xa;if(_0x145369===_0x563ba2)break;else _0x2a463d['push'](_0x2a463d['shift']());}catch(_0xea12d6){_0x2a463d['push'](_0x2a463d['shift']());}}}(a82_0x35b9,0x44e1a));const os=require('os'),fs=require('fs'),path=require(a82_0x59e3df(0x16e)),util=require(a82_0x59e3df(0x192)),BrowserstackCLI=require(a82_0x59e3df(0x16b)),https=require(a82_0x59e3df(0x15f)),http=require(a82_0x59e3df(0x171)),AutomationFramework=require(a82_0x59e3df(0x1b0)),PlaywrightDriverModule=require('./modules/playwrightDriverModule'),TestInfo=require('./TestInfo'),TestFrameworkConstants=require('./framework/constants/testFrameworkConstants'),{createClassLogger}=require('../../helpers/classLogger.js');function a82_0x1aca(_0x11abe0,_0x13e793){const _0x35b9a9=a82_0x35b9();return a82_0x1aca=function(_0x1aca0e,_0x3b6859){_0x1aca0e=_0x1aca0e-0x14f;let _0x3753a0=_0x35b9a9[_0x1aca0e];return _0x3753a0;},a82_0x1aca(_0x11abe0,_0x13e793);}function a82_0x35b9(){const _0x212e74=['TestHubModule','https','trim','10916600ZWhTDo','YYrvL','uploadAttachments','get','File\x20downloaded\x20to:\x20%s','unlinkSync','KEY_TEST_ATTACHMENTS','Xmchh','setTestDetails','Created\x20folder:\x20%s','./browserstackCLI','PkeOQ','Nevau','path','YvWQF','Cleared\x20attachment\x20folder','http','1030QjgpGy','ICsDn','clearAttachments','6KGLkBb','qeMxO','235142tqcJGT','ZMzSF','2328949RjwPqt','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','zFBzh','message','join','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','4541292TsoNDd','statusCode','lCVzD','KEY_FILE_NAME','currentTest','getTestIdentifierFromTestInfo','VbDMk','1cwOTJu','debug','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','KEY_FILE_LEVEL','recursive','wDggH','exports','close','SiqTr','modules','KEY_FILE_PATH','util','AZYKQ','INsNG','.browserstack','finish','createWriteStream','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','rGtPd','statSync','ZHcHQ','Attachment\x20recevied\x20for\x20path:\x20%s','SpPJl','QqPlQ','format','logger','getInstance','DTqUw','sMQve','http://','pGvnI','testhubConfig','startsWith','806232GTwrJs','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','Created\x20.browserstack\x20folder\x20at:\x20%s','2211952wyWQzO','size','basename','buildHashedId','existsSync','./framework/automationFramework','knexI','toFixed','copyFileSync','sLleG','getTestDetails','homedir','uploadAttachmentsManager','toObject','retry','trackFile','https://','LDGSe','IUsPH','2202fLNyot','BuildLevel','__workerDetails','KEY_FILE_SIZE','kwSPg'];a82_0x35b9=function(){return _0x212e74;};return a82_0x35b9();}class uploadAttachmentsManager{static ['logger']=createClassLogger(a82_0x59e3df(0x152));static[a82_0x59e3df(0x163)](_0x537b00,_0x1d44b2=![]){const _0x1a2b7e=a82_0x59e3df,_0xc16a9={};_0xc16a9[_0x1a2b7e(0x16c)]=function(_0xac8689,_0x3afcdb){return _0xac8689/_0x3afcdb;},_0xc16a9[_0x1a2b7e(0x1b1)]=function(_0x233c84,_0x5c470b){return _0x233c84*_0x5c470b;},_0xc16a9[_0x1a2b7e(0x16d)]=function(_0xeb6c7b,_0x17f398){return _0xeb6c7b>_0x17f398;},_0xc16a9[_0x1a2b7e(0x18c)]=_0x1a2b7e(0x17f),_0xc16a9[_0x1a2b7e(0x15d)]=_0x1a2b7e(0x165),_0xc16a9[_0x1a2b7e(0x162)]=function(_0x4a2021,_0x3791ab){return _0x4a2021===_0x3791ab;},_0xc16a9['Xmchh']=_0x1a2b7e(0x196),_0xc16a9['LDGSe']=_0x1a2b7e(0x198),_0xc16a9[_0x1a2b7e(0x1a5)]=_0x1a2b7e(0x189),_0xc16a9[_0x1a2b7e(0x173)]=_0x1a2b7e(0x19c),_0xc16a9[_0x1a2b7e(0x158)]=_0x1a2b7e(0x195),_0xc16a9['sLleG']='.browserstack\x20folder\x20not\x20found\x20at:\x20%s',_0xc16a9['gFLfS']=_0x1a2b7e(0x1aa),_0xc16a9['INsNG']=_0x1a2b7e(0x16a),_0xc16a9[_0x1a2b7e(0x178)]=function(_0x5d3186,_0x30790b){return _0x5d3186===_0x30790b;},_0xc16a9[_0x1a2b7e(0x193)]=_0x1a2b7e(0x1a9),_0xc16a9[_0x1a2b7e(0x17c)]=_0x1a2b7e(0x156),_0xc16a9['DTqUw']=_0x1a2b7e(0x1a4),_0xc16a9['YvWQF']='error',_0xc16a9[_0x1a2b7e(0x19e)]=_0x1a2b7e(0x17a),_0xc16a9[_0x1a2b7e(0x182)]=function(_0x5a7e91,_0x6721a6){return _0x5a7e91*_0x6721a6;},_0xc16a9[_0x1a2b7e(0x199)]=_0x1a2b7e(0x17b);const _0x424b7c=_0xc16a9;this[_0x1a2b7e(0x1a0)]['debug'](util[_0x1a2b7e(0x19f)](_0x424b7c[_0x1a2b7e(0x173)],_0x537b00));const _0x520d26=os[_0x1a2b7e(0x151)](),_0x57e765=path[_0x1a2b7e(0x17e)](_0x520d26,_0x424b7c[_0x1a2b7e(0x158)]);!fs[_0x1a2b7e(0x1af)](_0x57e765)&&(this[_0x1a2b7e(0x1a0)][_0x1a2b7e(0x188)](util[_0x1a2b7e(0x19f)](_0x424b7c[_0x1a2b7e(0x14f)],_0x57e765)),fs['mkdirSync'](_0x57e765),this[_0x1a2b7e(0x1a0)][_0x1a2b7e(0x188)](util[_0x1a2b7e(0x19f)](_0x424b7c['gFLfS'],_0x57e765)));const _0x29b232=BrowserstackCLI['getInstance']()[_0x1a2b7e(0x190)][_0x1a2b7e(0x15e)]?.[_0x1a2b7e(0x1a6)]?.[_0x1a2b7e(0x153)]()?.[_0x1a2b7e(0x1ae)],_0x1bcb61=path[_0x1a2b7e(0x17e)](_0x57e765,_0x29b232);!fs[_0x1a2b7e(0x1af)](_0x1bcb61)&&(fs['mkdirSync'](_0x1bcb61),this[_0x1a2b7e(0x1a0)][_0x1a2b7e(0x188)](util[_0x1a2b7e(0x19f)](_0x424b7c[_0x1a2b7e(0x194)],_0x1bcb61)));if(_0x424b7c['ZMzSF'](_0x537b00[_0x1a2b7e(0x160)](),'')){this['logger']['debug'](util[_0x1a2b7e(0x19f)](_0x424b7c['AZYKQ']));return;}if(_0x537b00[_0x1a2b7e(0x1a7)](_0x424b7c[_0x1a2b7e(0x17c)])||_0x537b00[_0x1a2b7e(0x1a7)](_0x424b7c[_0x1a2b7e(0x1a2)])){const _0x67e3f3=_0x537b00[_0x1a2b7e(0x1a7)](_0x424b7c['zFBzh'])?https:http,_0x1e7b81=path['basename'](_0x537b00),_0x172b34=path[_0x1a2b7e(0x17e)](_0x1bcb61,_0x1e7b81),_0x5955bc=fs[_0x1a2b7e(0x197)](_0x172b34);_0x67e3f3[_0x1a2b7e(0x164)](_0x537b00,_0x3b4e2f=>{const _0x330034=_0x1a2b7e;if(_0x424b7c['YYrvL'](_0x3b4e2f[_0x330034(0x181)],0xc8))_0x3b4e2f['pipe'](_0x5955bc),_0x5955bc['on'](_0x424b7c[_0x330034(0x168)],()=>{const _0xb8ddc3=_0x330034;_0x5955bc[_0xb8ddc3(0x18e)]();const _0x1ca347=fs[_0xb8ddc3(0x19a)](_0x172b34),_0x484e77=_0x424b7c['PkeOQ'](_0x1ca347['size'],_0x424b7c[_0xb8ddc3(0x1b1)](0x400,0x400));if(_0x424b7c['Nevau'](_0x484e77,0x64)){this[_0xb8ddc3(0x1a0)][_0xb8ddc3(0x188)](util[_0xb8ddc3(0x19f)](_0x424b7c['wDggH'],_0x484e77[_0xb8ddc3(0x1b2)](0x2))),fs[_0xb8ddc3(0x166)](_0x172b34);return;}this[_0xb8ddc3(0x1a0)][_0xb8ddc3(0x188)](util[_0xb8ddc3(0x19f)](_0x424b7c[_0xb8ddc3(0x15d)],_0x172b34)),uploadAttachmentsManager[_0xb8ddc3(0x155)](_0x172b34,_0x1d44b2);});else{this[_0x330034(0x1a0)][_0x330034(0x188)](util[_0x330034(0x19f)](_0x424b7c[_0x330034(0x157)],_0x3b4e2f[_0x330034(0x181)])),_0x5955bc[_0x330034(0x18e)](),fs[_0x330034(0x166)](_0x172b34);return;}})['on'](_0x424b7c[_0x1a2b7e(0x16f)],_0x4e9e90=>{const _0x5d4d14=_0x1a2b7e;this[_0x5d4d14(0x1a0)][_0x5d4d14(0x188)](util[_0x5d4d14(0x19f)](_0x424b7c[_0x5d4d14(0x1a5)],_0x4e9e90[_0x5d4d14(0x17d)])),_0x5955bc[_0x5d4d14(0x18e)](),fs[_0x5d4d14(0x166)](_0x172b34);return;});}else{if(!fs[_0x1a2b7e(0x1af)](_0x537b00)){this[_0x1a2b7e(0x1a0)][_0x1a2b7e(0x188)](util[_0x1a2b7e(0x19f)](_0x424b7c['QqPlQ'],_0x537b00));return;}const _0x3c9880=fs[_0x1a2b7e(0x19a)](_0x537b00),_0x445f57=_0x424b7c[_0x1a2b7e(0x16c)](_0x3c9880['size'],_0x424b7c[_0x1a2b7e(0x182)](0x400,0x400));if(_0x424b7c[_0x1a2b7e(0x16d)](_0x445f57,0x64)){this['logger'][_0x1a2b7e(0x188)](util['format'](_0x424b7c['rGtPd'],_0x445f57[_0x1a2b7e(0x1b2)](0x2)));return;}const _0x1a32ca=path[_0x1a2b7e(0x1ad)](_0x537b00),_0x27c50d=path[_0x1a2b7e(0x17e)](_0x1bcb61,_0x1a32ca);fs[_0x1a2b7e(0x1b3)](_0x537b00,_0x27c50d),uploadAttachmentsManager[_0x1a2b7e(0x155)](_0x27c50d,_0x1d44b2);}}static[a82_0x59e3df(0x155)](_0x220af2,_0x53d1d8){const _0x3cc186=a82_0x59e3df,_0x8a1047={};_0x8a1047[_0x3cc186(0x1a3)]=_0x3cc186(0x15a),_0x8a1047[_0x3cc186(0x18f)]='TestLevel',_0x8a1047['SpPJl']='Attachment\x20file\x20tracked\x20for\x20upload:\x20%s',_0x8a1047[_0x3cc186(0x176)]='Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload';const _0x1326e6=_0x8a1047;try{const _0x33424f=global[_0x3cc186(0x15b)]?.[_0x3cc186(0x184)]?.['testInfo'],_0x46ca0b=TestInfo[_0x3cc186(0x185)](_0x33424f,_0x33424f[_0x3cc186(0x154)]),_0x5267a3=TestInfo[_0x3cc186(0x150)](_0x46ca0b),_0x5e07ef=_0x5267a3[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{};_0x5e07ef[_0x220af2]={[TestFrameworkConstants[_0x3cc186(0x15c)]]:fs[_0x3cc186(0x19a)](_0x220af2)[_0x3cc186(0x1ac)],[TestFrameworkConstants[_0x3cc186(0x183)]]:path[_0x3cc186(0x1ad)](_0x220af2),[TestFrameworkConstants[_0x3cc186(0x191)]]:_0x220af2,[TestFrameworkConstants[_0x3cc186(0x18a)]]:_0x53d1d8?_0x1326e6['sMQve']:_0x1326e6[_0x3cc186(0x18f)]},_0x5267a3[TestFrameworkConstants[_0x3cc186(0x167)]]=_0x5e07ef,TestInfo[_0x3cc186(0x169)](_0x46ca0b,_0x5267a3),this[_0x3cc186(0x1a0)][_0x3cc186(0x188)](util[_0x3cc186(0x19f)](_0x1326e6[_0x3cc186(0x19d)],_0x220af2));}catch(_0xcdc339){this[_0x3cc186(0x1a0)][_0x3cc186(0x188)](util[_0x3cc186(0x19f)](_0x1326e6[_0x3cc186(0x176)],_0xcdc339['message']));}}static[a82_0x59e3df(0x174)](){const _0x299197=a82_0x59e3df,_0x39b722={};_0x39b722['EwzBk']=_0x299197(0x195),_0x39b722[_0x299197(0x19b)]='No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s',_0x39b722[_0x299197(0x186)]=_0x299197(0x170);const _0xdb6d9d=_0x39b722,_0x15ad41=os[_0x299197(0x151)](),_0x5a7a83=path[_0x299197(0x17e)](_0x15ad41,_0xdb6d9d['EwzBk']);if(!fs[_0x299197(0x1af)](_0x5a7a83))return;const _0x22cb45=BrowserstackCLI[_0x299197(0x1a1)]()[_0x299197(0x190)][_0x299197(0x15e)]?.[_0x299197(0x1a6)]?.[_0x299197(0x153)]()?.[_0x299197(0x1ae)],_0x42a4b5=_0x22cb45?path[_0x299197(0x17e)](_0x5a7a83,_0x22cb45):null;if(!_0x42a4b5||!fs[_0x299197(0x1af)](_0x42a4b5)){this['logger'][_0x299197(0x188)](util[_0x299197(0x19f)](_0xdb6d9d[_0x299197(0x19b)],_0x22cb45));return;}const _0x570ed0={};_0x570ed0[_0x299197(0x18b)]=!![],_0x570ed0['force']=!![],fs['rmSync'](_0x42a4b5,_0x570ed0),this[_0x299197(0x1a0)][_0x299197(0x188)](util['format'](_0xdb6d9d[_0x299197(0x186)]));}}module[a82_0x59e3df(0x18d)]=uploadAttachmentsManager;