const a86_0x262d47=a86_0x3935;function a86_0x3935(_0x18e19f,_0x3f0820){const _0x4032f7=a86_0x4032();return a86_0x3935=function(_0x3935e0,_0x3d07fd){_0x3935e0=_0x3935e0-0x19b;let _0x25bcfd=_0x4032f7[_0x3935e0];return _0x25bcfd;},a86_0x3935(_0x18e19f,_0x3f0820);}(function(_0x1299a4,_0x58227e){const _0x34a615=a86_0x3935,_0x551360=_0x1299a4();while(!![]){try{const _0x5f32c7=-parseInt(_0x34a615(0x1be))/0x1*(-parseInt(_0x34a615(0x1b1))/0x2)+parseInt(_0x34a615(0x1ad))/0x3*(-parseInt(_0x34a615(0x19c))/0x4)+parseInt(_0x34a615(0x201))/0x5+parseInt(_0x34a615(0x204))/0x6*(parseInt(_0x34a615(0x1cf))/0x7)+parseInt(_0x34a615(0x1d6))/0x8*(-parseInt(_0x34a615(0x1d4))/0x9)+parseInt(_0x34a615(0x1d5))/0xa*(parseInt(_0x34a615(0x1bf))/0xb)+-parseInt(_0x34a615(0x1a2))/0xc*(parseInt(_0x34a615(0x1eb))/0xd);if(_0x5f32c7===_0x58227e)break;else _0x551360['push'](_0x551360['shift']());}catch(_0xaf9b41){_0x551360['push'](_0x551360['shift']());}}}(a86_0x4032,0x33ceb));const os=require('os'),fs=require('fs'),path=require(a86_0x262d47(0x1fc)),util=require(a86_0x262d47(0x1ce)),BrowserstackCLI=require('./browserstackCLI'),https=require(a86_0x262d47(0x1cd)),http=require(a86_0x262d47(0x1b5)),AutomationFramework=require(a86_0x262d47(0x1e0)),PlaywrightDriverModule=require(a86_0x262d47(0x1f1)),TestInfo=require('./TestInfo'),TestFrameworkConstants=require(a86_0x262d47(0x1b4)),{createClassLogger}=require(a86_0x262d47(0x1c3));class uploadAttachmentsManager{static [a86_0x262d47(0x1fb)]=createClassLogger('uploadAttachmentsManager');static['uploadAttachments'](_0x56f182,_0x23b56a=![]){const _0x51b975=a86_0x262d47,_0x2b88ed={};_0x2b88ed[_0x51b975(0x1a0)]=function(_0x23a238,_0x429127){return _0x23a238/_0x429127;},_0x2b88ed[_0x51b975(0x1a5)]=function(_0x49dd0,_0x45121d){return _0x49dd0*_0x45121d;},_0x2b88ed['iuAQJ']=function(_0x1af5b6,_0x16a37c){return _0x1af5b6>_0x16a37c;},_0x2b88ed[_0x51b975(0x1c4)]=_0x51b975(0x200),_0x2b88ed['hlYvG']=_0x51b975(0x1fa),_0x2b88ed[_0x51b975(0x1ee)]=function(_0x52ec25,_0x24b568){return _0x52ec25===_0x24b568;},_0x2b88ed[_0x51b975(0x1f3)]=_0x51b975(0x1d2),_0x2b88ed[_0x51b975(0x1df)]=_0x51b975(0x1e3),_0x2b88ed['dwoEl']=_0x51b975(0x1c7),_0x2b88ed[_0x51b975(0x1cc)]='Attachment\x20recevied\x20for\x20path:\x20%s',_0x2b88ed[_0x51b975(0x1db)]='.browserstack',_0x2b88ed[_0x51b975(0x19f)]=_0x51b975(0x1b7),_0x2b88ed[_0x51b975(0x1b6)]=_0x51b975(0x1c1),_0x2b88ed['DVWeU']=_0x51b975(0x1bb),_0x2b88ed['sAVBM']=function(_0x35f985,_0x779e2a){return _0x35f985===_0x779e2a;},_0x2b88ed[_0x51b975(0x207)]='Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.',_0x2b88ed[_0x51b975(0x1f6)]=_0x51b975(0x205),_0x2b88ed[_0x51b975(0x209)]=_0x51b975(0x1c2),_0x2b88ed[_0x51b975(0x1e8)]=_0x51b975(0x1c6),_0x2b88ed[_0x51b975(0x1dc)]=_0x51b975(0x1a3),_0x2b88ed[_0x51b975(0x1ae)]=function(_0x26e03a,_0x244f94){return _0x26e03a/_0x244f94;},_0x2b88ed[_0x51b975(0x1fe)]=function(_0xa71a92,_0x3283a7){return _0xa71a92>_0x3283a7;},_0x2b88ed['eijDl']=_0x51b975(0x1ed);const _0x1b8d8e=_0x2b88ed;this[_0x51b975(0x1fb)][_0x51b975(0x1ca)](util[_0x51b975(0x1cb)](_0x1b8d8e[_0x51b975(0x1cc)],_0x56f182));const _0x4552ae=os[_0x51b975(0x1e6)](),_0x2df215=path[_0x51b975(0x1ef)](_0x4552ae,_0x1b8d8e['WBHWe']);!fs[_0x51b975(0x1ab)](_0x2df215)&&(this[_0x51b975(0x1fb)][_0x51b975(0x1ca)](util['format'](_0x1b8d8e['varnY'],_0x2df215)),fs[_0x51b975(0x1e4)](_0x2df215),this[_0x51b975(0x1fb)]['debug'](util['format'](_0x1b8d8e[_0x51b975(0x1b6)],_0x2df215)));const _0xce019d=BrowserstackCLI[_0x51b975(0x1f9)]()['modules'][_0x51b975(0x1b2)]?.[_0x51b975(0x1a8)]?.[_0x51b975(0x1e2)]()?.[_0x51b975(0x1af)],_0x543442=path[_0x51b975(0x1ef)](_0x2df215,_0xce019d);!fs[_0x51b975(0x1ab)](_0x543442)&&(fs['mkdirSync'](_0x543442),this[_0x51b975(0x1fb)]['debug'](util['format'](_0x1b8d8e['DVWeU'],_0x543442)));if(_0x1b8d8e[_0x51b975(0x1a6)](_0x56f182['trim'](),'')){this[_0x51b975(0x1fb)][_0x51b975(0x1ca)](util[_0x51b975(0x1cb)](_0x1b8d8e[_0x51b975(0x207)]));return;}if(_0x56f182[_0x51b975(0x1c9)](_0x1b8d8e[_0x51b975(0x1f6)])||_0x56f182[_0x51b975(0x1c9)](_0x1b8d8e[_0x51b975(0x209)])){const _0x1d2d32=_0x56f182[_0x51b975(0x1c9)](_0x1b8d8e['ycLTR'])?https:http,_0x305e5d=path[_0x51b975(0x1e7)](_0x56f182),_0x294d64=path[_0x51b975(0x1ef)](_0x543442,_0x305e5d),_0x4a499b=fs[_0x51b975(0x1c5)](_0x294d64);_0x1d2d32[_0x51b975(0x1f7)](_0x56f182,_0x341d59=>{const _0x5b6c58=_0x51b975;if(_0x1b8d8e[_0x5b6c58(0x1ee)](_0x341d59[_0x5b6c58(0x1a9)],0xc8))_0x341d59[_0x5b6c58(0x1d9)](_0x4a499b),_0x4a499b['on'](_0x1b8d8e['fZOKJ'],()=>{const _0x30918c=_0x5b6c58;_0x4a499b['close']();const _0x1c4ef6=fs[_0x30918c(0x1b8)](_0x294d64),_0x56a3a2=_0x1b8d8e[_0x30918c(0x1a0)](_0x1c4ef6[_0x30918c(0x203)],_0x1b8d8e[_0x30918c(0x1a5)](0x400,0x400));if(_0x1b8d8e[_0x30918c(0x1c0)](_0x56a3a2,0x64)){this[_0x30918c(0x1fb)][_0x30918c(0x1ca)](util[_0x30918c(0x1cb)](_0x1b8d8e[_0x30918c(0x1c4)],_0x56a3a2['toFixed'](0x2))),fs['unlinkSync'](_0x294d64);return;}this['logger'][_0x30918c(0x1ca)](util['format'](_0x1b8d8e[_0x30918c(0x19b)],_0x294d64)),uploadAttachmentsManager[_0x30918c(0x1c8)](_0x294d64,_0x23b56a);});else{this['logger']['debug'](util[_0x5b6c58(0x1cb)](_0x1b8d8e[_0x5b6c58(0x1df)],_0x341d59[_0x5b6c58(0x1a9)])),_0x4a499b[_0x5b6c58(0x1a4)](),fs['unlinkSync'](_0x294d64);return;}})['on'](_0x1b8d8e[_0x51b975(0x1e8)],_0x349cf3=>{const _0x2d7e73=_0x51b975;this[_0x2d7e73(0x1fb)][_0x2d7e73(0x1ca)](util[_0x2d7e73(0x1cb)](_0x1b8d8e[_0x2d7e73(0x1ac)],_0x349cf3['message'])),_0x4a499b['close'](),fs['unlinkSync'](_0x294d64);return;});}else{if(!fs[_0x51b975(0x1ab)](_0x56f182)){this[_0x51b975(0x1fb)]['debug'](util[_0x51b975(0x1cb)](_0x1b8d8e[_0x51b975(0x1dc)],_0x56f182));return;}const _0x1ac02a=fs[_0x51b975(0x1b8)](_0x56f182),_0x3468ca=_0x1b8d8e['wmjAS'](_0x1ac02a[_0x51b975(0x203)],_0x1b8d8e[_0x51b975(0x1a5)](0x400,0x400));if(_0x1b8d8e[_0x51b975(0x1fe)](_0x3468ca,0x64)){this[_0x51b975(0x1fb)][_0x51b975(0x1ca)](util[_0x51b975(0x1cb)](_0x1b8d8e[_0x51b975(0x206)],_0x3468ca[_0x51b975(0x19d)](0x2)));return;}const _0x3bdb27=path[_0x51b975(0x1e7)](_0x56f182),_0x1aa089=path[_0x51b975(0x1ef)](_0x543442,_0x3bdb27);fs[_0x51b975(0x1d3)](_0x56f182,_0x1aa089),uploadAttachmentsManager['trackFile'](_0x1aa089,_0x23b56a);}}static[a86_0x262d47(0x1c8)](_0x5be376,_0x3a96fc){const _0x92080=a86_0x262d47,_0x386a9b={};_0x386a9b[_0x92080(0x1bc)]=_0x92080(0x1f0),_0x386a9b[_0x92080(0x1ba)]=_0x92080(0x1a1),_0x386a9b[_0x92080(0x202)]=_0x92080(0x1a7),_0x386a9b['PDVzn']=_0x92080(0x208);const _0x5e7cda=_0x386a9b;try{let _0x2d01ff;const _0x5a740f=global['__workerDetails']?.[_0x92080(0x1de)]?.[_0x92080(0x1f4)];if(!_0x5a740f){const _0x482684=AutomationFramework[_0x92080(0x1fd)]();_0x2d01ff=AutomationFramework[_0x92080(0x1e1)](_0x482684,PlaywrightDriverModule['KEY_TEST_ID'],'');}else _0x2d01ff=TestInfo[_0x92080(0x1f5)](_0x5a740f,_0x5a740f[_0x92080(0x1b9)]);const _0x160229=TestInfo[_0x92080(0x1ea)](_0x2d01ff),_0x1b23f6=_0x160229[TestFrameworkConstants[_0x92080(0x19e)]]||{};_0x1b23f6[_0x5be376]={[TestFrameworkConstants['KEY_FILE_SIZE']]:fs['statSync'](_0x5be376)['size'],[TestFrameworkConstants[_0x92080(0x1ec)]]:path[_0x92080(0x1e7)](_0x5be376),[TestFrameworkConstants[_0x92080(0x1da)]]:_0x5be376,[TestFrameworkConstants['KEY_FILE_LEVEL']]:_0x3a96fc?_0x5e7cda[_0x92080(0x1bc)]:_0x5e7cda[_0x92080(0x1ba)]},_0x160229[TestFrameworkConstants[_0x92080(0x19e)]]=_0x1b23f6,TestInfo[_0x92080(0x1dd)](_0x2d01ff,_0x160229),this['logger'][_0x92080(0x1ca)](util['format'](_0x5e7cda[_0x92080(0x202)],_0x5be376));}catch(_0x225b1f){this[_0x92080(0x1fb)][_0x92080(0x1ca)](util[_0x92080(0x1cb)](_0x5e7cda[_0x92080(0x1ff)],_0x225b1f['message']));}}static[a86_0x262d47(0x1e9)](){const _0xfe3346=a86_0x262d47,_0xbefc8e={};_0xbefc8e['UQFDp']=_0xfe3346(0x1d8),_0xbefc8e[_0xfe3346(0x1f2)]=_0xfe3346(0x1d1),_0xbefc8e[_0xfe3346(0x1bd)]=_0xfe3346(0x1e5);const _0x364129=_0xbefc8e,_0xd408da=os[_0xfe3346(0x1e6)](),_0x447cf4=path['join'](_0xd408da,_0x364129[_0xfe3346(0x1d7)]);if(!fs[_0xfe3346(0x1ab)](_0x447cf4))return;const _0x252c14=BrowserstackCLI[_0xfe3346(0x1f9)]()[_0xfe3346(0x1b0)]['TestHubModule']?.[_0xfe3346(0x1a8)]?.[_0xfe3346(0x1e2)]()?.[_0xfe3346(0x1af)],_0x2ceb0e=_0x252c14?path['join'](_0x447cf4,_0x252c14):null;if(!_0x2ceb0e||!fs['existsSync'](_0x2ceb0e)){this[_0xfe3346(0x1fb)][_0xfe3346(0x1ca)](util[_0xfe3346(0x1cb)](_0x364129[_0xfe3346(0x1f2)],_0x252c14));return;}const _0x58f61a={};_0x58f61a[_0xfe3346(0x1b3)]=!![],_0x58f61a[_0xfe3346(0x1aa)]=!![],fs[_0xfe3346(0x1d0)](_0x2ceb0e,_0x58f61a),this[_0xfe3346(0x1fb)][_0xfe3346(0x1ca)](util['format'](_0x364129[_0xfe3346(0x1bd)]));}}module[a86_0x262d47(0x1f8)]=uploadAttachmentsManager;function a86_0x4032(){const _0x4eaf8c=['path','getTrackedInstance','LmnIT','PDVzn','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','1832055OyTXmC','GjNVd','size','78WjdZNn','https://','eijDl','ZGDol','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','xXJWA','hlYvG','112YEgmVL','toFixed','KEY_TEST_ATTACHMENTS','varnY','QdAcb','TestLevel','12JSLqHT','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','close','LIbXx','sAVBM','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','testhubConfig','statusCode','force','existsSync','dwoEl','11103PeSgcB','wmjAS','buildHashedId','modules','2YBVinv','TestHubModule','recursive','./framework/constants/testFrameworkConstants','http','OVERo','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','statSync','retry','vsDdN','Created\x20folder:\x20%s','bcjVN','yifLF','277451FOGZxZ','176EGfKUP','iuAQJ','Created\x20.browserstack\x20folder\x20at:\x20%s','http://','../../helpers/classLogger.js','QyjGf','createWriteStream','error','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','trackFile','startsWith','debug','format','FAGeM','https','util','85841QhHuDn','rmSync','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','finish','copyFileSync','26298pSjQQQ','2710laeziB','152SVywIs','UQFDp','.browserstack','pipe','KEY_FILE_PATH','WBHWe','YGynW','setTestDetails','currentTest','qYtDB','./framework/automationFramework','getState','toObject','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','mkdirSync','Cleared\x20attachment\x20folder','homedir','basename','NWFuA','clearAttachments','getTestDetails','5671484LhAbyO','KEY_FILE_NAME','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','zlXlo','join','BuildLevel','./modules/playwrightDriverModule','nrBkl','fZOKJ','testInfo','getTestIdentifierFromTestInfo','ycLTR','get','exports','getInstance','File\x20downloaded\x20to:\x20%s','logger'];a86_0x4032=function(){return _0x4eaf8c;};return a86_0x4032();}