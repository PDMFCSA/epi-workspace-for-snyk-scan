const a80_0x3e6d74=a80_0x113c;function a80_0x113c(_0x471803,_0x5c47a3){const _0x2f1273=a80_0x2f12();return a80_0x113c=function(_0x113cfb,_0x11ee7d){_0x113cfb=_0x113cfb-0xac;let _0x52f5be=_0x2f1273[_0x113cfb];return _0x52f5be;},a80_0x113c(_0x471803,_0x5c47a3);}(function(_0x3c438b,_0x44389e){const _0x76e7de=a80_0x113c,_0x2834da=_0x3c438b();while(!![]){try{const _0x4165c4=-parseInt(_0x76e7de(0x10b))/0x1*(parseInt(_0x76e7de(0xea))/0x2)+-parseInt(_0x76e7de(0xcb))/0x3+parseInt(_0x76e7de(0xfc))/0x4*(-parseInt(_0x76e7de(0xd5))/0x5)+-parseInt(_0x76e7de(0xf7))/0x6+parseInt(_0x76e7de(0x10e))/0x7*(parseInt(_0x76e7de(0xfa))/0x8)+-parseInt(_0x76e7de(0x104))/0x9*(parseInt(_0x76e7de(0xf1))/0xa)+-parseInt(_0x76e7de(0xae))/0xb*(-parseInt(_0x76e7de(0x102))/0xc);if(_0x4165c4===_0x44389e)break;else _0x2834da['push'](_0x2834da['shift']());}catch(_0x3cc554){_0x2834da['push'](_0x2834da['shift']());}}}(a80_0x2f12,0xd1723));function a80_0x2f12(){const _0x777ed2=['getState','tFPWa','PbdBU','xLJyi','DKAPj','basename','hyEsT','statusCode','GFEja','toObject','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','Created\x20folder:\x20%s','./framework/automationFramework','modules','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','error','2nNwWJZ','UIsVs','pipe','GNerf','ECCFD','statSync','xmegV','1267680xvwsbV','xegWi','https','setTestDetails','getInstance','KEY_FILE_PATH','2971782jFNxzZ','ngGNW','dAoXo','8BPRxPL','format','412444FGSjcz','blsKA','testhubConfig','toFixed','BuildLevel','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','211764bgQiSm','size','63wrcfsU','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','getTestDetails','trim','close','clearAttachments','util','1281691TEIPdy','KEY_FILE_LEVEL','TZKzr','6454238kYFAwN','PbCGW','KEY_TEST_ATTACHMENTS','path','TestHubModule','getTrackedInstance','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','debug','hyjoK','2519YwXHEh','./TestInfo','buildHashedId','ezxxJ','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','trackFile','unlinkSync','exports','btxSC','logger','suXyb','DXzDG','TestLevel','http','rmSync','aqGJQ','ufsVH','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','JAxbe','createWriteStream','Created\x20.browserstack\x20folder\x20at:\x20%s','homedir','join','BRfLf','copyFileSync','RnlsL','message','recursive','mkdirSync','1848162uayEEU','./modules/playwrightDriverModule','APFDu','../../helpers/classLogger.js','.browserstack','Cleared\x20attachment\x20folder','./framework/constants/testFrameworkConstants','File\x20downloaded\x20to:\x20%s','uploadAttachments','existsSync','40MkkLxh','startsWith','lABrM','force','KEY_TEST_ID'];a80_0x2f12=function(){return _0x777ed2;};return a80_0x2f12();}const os=require('os'),fs=require('fs'),path=require(a80_0x3e6d74(0x111)),util=require(a80_0x3e6d74(0x10a)),BrowserstackCLI=require('./browserstackCLI'),https=require(a80_0x3e6d74(0xf3)),http=require(a80_0x3e6d74(0xbb)),AutomationFramework=require(a80_0x3e6d74(0xe6)),PlaywrightDriverModule=require(a80_0x3e6d74(0xcc)),TestInfo=require(a80_0x3e6d74(0xaf)),TestFrameworkConstants=require(a80_0x3e6d74(0xd1)),{createClassLogger}=require(a80_0x3e6d74(0xce));class uploadAttachmentsManager{static [a80_0x3e6d74(0xb7)]=createClassLogger('uploadAttachmentsManager');static[a80_0x3e6d74(0xd3)](_0x295966,_0x184a7d=![]){const _0xcb1e5f=a80_0x3e6d74,_0x34b1e6={};_0x34b1e6[_0xcb1e5f(0xb1)]=function(_0xb7add6,_0xfb3a90){return _0xb7add6/_0xfb3a90;},_0x34b1e6[_0xcb1e5f(0xfd)]=function(_0x36bb38,_0x480ce2){return _0x36bb38*_0x480ce2;},_0x34b1e6[_0xcb1e5f(0xd7)]=function(_0x5e4564,_0x1cff10){return _0x5e4564>_0x1cff10;},_0x34b1e6[_0xcb1e5f(0xcd)]='Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.',_0x34b1e6[_0xcb1e5f(0xbd)]=_0xcb1e5f(0xd2),_0x34b1e6[_0xcb1e5f(0xf0)]=function(_0x41963c,_0x3d2d21){return _0x41963c===_0x3d2d21;},_0x34b1e6[_0xcb1e5f(0xdc)]='finish',_0x34b1e6[_0xcb1e5f(0xee)]='Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload',_0x34b1e6[_0xcb1e5f(0xde)]=_0xcb1e5f(0xe4),_0x34b1e6['PbCGW']='Attachment\x20recevied\x20for\x20path:\x20%s',_0x34b1e6[_0xcb1e5f(0xe0)]='.browserstack',_0x34b1e6[_0xcb1e5f(0x10d)]=_0xcb1e5f(0x101),_0x34b1e6[_0xcb1e5f(0xf2)]=_0xcb1e5f(0xc2),_0x34b1e6[_0xcb1e5f(0xb8)]=_0xcb1e5f(0xe5),_0x34b1e6[_0xcb1e5f(0xc7)]=function(_0x31881c,_0x3ccc1b){return _0x31881c===_0x3ccc1b;},_0x34b1e6[_0xcb1e5f(0xc5)]=_0xcb1e5f(0x114),_0x34b1e6[_0xcb1e5f(0xdd)]='https://',_0x34b1e6[_0xcb1e5f(0xed)]='http://',_0x34b1e6[_0xcb1e5f(0xbe)]=_0xcb1e5f(0xe9),_0x34b1e6[_0xcb1e5f(0xeb)]=_0xcb1e5f(0xe8),_0x34b1e6[_0xcb1e5f(0xad)]=function(_0x25e6a7,_0x589e9e){return _0x25e6a7/_0x589e9e;},_0x34b1e6['cioiE']=_0xcb1e5f(0x105);const _0x341553=_0x34b1e6;this[_0xcb1e5f(0xb7)][_0xcb1e5f(0xac)](util[_0xcb1e5f(0xfb)](_0x341553[_0xcb1e5f(0x10f)],_0x295966));const _0x127c35=os[_0xcb1e5f(0xc3)](),_0x280241=path[_0xcb1e5f(0xc4)](_0x127c35,_0x341553[_0xcb1e5f(0xe0)]);!fs[_0xcb1e5f(0xd4)](_0x280241)&&(this[_0xcb1e5f(0xb7)][_0xcb1e5f(0xac)](util[_0xcb1e5f(0xfb)](_0x341553[_0xcb1e5f(0x10d)],_0x280241)),fs[_0xcb1e5f(0xca)](_0x280241),this[_0xcb1e5f(0xb7)]['debug'](util['format'](_0x341553['xegWi'],_0x280241)));const _0x45ca47=BrowserstackCLI[_0xcb1e5f(0xf5)]()['modules'][_0xcb1e5f(0x112)]?.[_0xcb1e5f(0xfe)]?.[_0xcb1e5f(0xe3)]()?.['buildHashedId'],_0x44e961=path['join'](_0x280241,_0x45ca47);!fs[_0xcb1e5f(0xd4)](_0x44e961)&&(fs['mkdirSync'](_0x44e961),this[_0xcb1e5f(0xb7)][_0xcb1e5f(0xac)](util[_0xcb1e5f(0xfb)](_0x341553[_0xcb1e5f(0xb8)],_0x44e961)));if(_0x341553[_0xcb1e5f(0xc7)](_0x295966[_0xcb1e5f(0x107)](),'')){this['logger'][_0xcb1e5f(0xac)](util[_0xcb1e5f(0xfb)](_0x341553[_0xcb1e5f(0xc5)]));return;}if(_0x295966[_0xcb1e5f(0xd6)](_0x341553[_0xcb1e5f(0xdd)])||_0x295966[_0xcb1e5f(0xd6)](_0x341553[_0xcb1e5f(0xed)])){const _0xd0d865=_0x295966[_0xcb1e5f(0xd6)](_0x341553[_0xcb1e5f(0xdd)])?https:http,_0x17b44f=path[_0xcb1e5f(0xdf)](_0x295966),_0x333cd3=path[_0xcb1e5f(0xc4)](_0x44e961,_0x17b44f),_0x4590f7=fs[_0xcb1e5f(0xc1)](_0x333cd3);_0xd0d865['get'](_0x295966,_0x5ed8a8=>{const _0x3579b0=_0xcb1e5f;if(_0x341553[_0x3579b0(0xf0)](_0x5ed8a8[_0x3579b0(0xe1)],0xc8))_0x5ed8a8[_0x3579b0(0xec)](_0x4590f7),_0x4590f7['on'](_0x341553[_0x3579b0(0xdc)],()=>{const _0x437230=_0x3579b0;_0x4590f7[_0x437230(0x108)]();const _0x287469=fs[_0x437230(0xef)](_0x333cd3),_0x59a12b=_0x341553[_0x437230(0xb1)](_0x287469['size'],_0x341553[_0x437230(0xfd)](0x400,0x400));if(_0x341553[_0x437230(0xd7)](_0x59a12b,0x64)){this[_0x437230(0xb7)][_0x437230(0xac)](util[_0x437230(0xfb)](_0x341553[_0x437230(0xcd)],_0x59a12b[_0x437230(0xff)](0x2))),fs[_0x437230(0xb4)](_0x333cd3);return;}this['logger'][_0x437230(0xac)](util['format'](_0x341553[_0x437230(0xbd)],_0x333cd3)),uploadAttachmentsManager[_0x437230(0xb3)](_0x333cd3,_0x184a7d);});else{this['logger'][_0x3579b0(0xac)](util[_0x3579b0(0xfb)](_0x341553['ECCFD'],_0x5ed8a8[_0x3579b0(0xe1)])),_0x4590f7[_0x3579b0(0x108)](),fs[_0x3579b0(0xb4)](_0x333cd3);return;}})['on'](_0x341553[_0xcb1e5f(0xbe)],_0x4d5a75=>{const _0x5555d7=_0xcb1e5f;this[_0x5555d7(0xb7)]['debug'](util[_0x5555d7(0xfb)](_0x341553[_0x5555d7(0xde)],_0x4d5a75[_0x5555d7(0xc8)])),_0x4590f7[_0x5555d7(0x108)](),fs[_0x5555d7(0xb4)](_0x333cd3);return;});}else{if(!fs[_0xcb1e5f(0xd4)](_0x295966)){this[_0xcb1e5f(0xb7)][_0xcb1e5f(0xac)](util[_0xcb1e5f(0xfb)](_0x341553[_0xcb1e5f(0xeb)],_0x295966));return;}const _0x137cdb=fs['statSync'](_0x295966),_0x227092=_0x341553[_0xcb1e5f(0xad)](_0x137cdb[_0xcb1e5f(0x103)],_0x341553[_0xcb1e5f(0xfd)](0x400,0x400));if(_0x341553[_0xcb1e5f(0xd7)](_0x227092,0x64)){this[_0xcb1e5f(0xb7)][_0xcb1e5f(0xac)](util['format'](_0x341553['cioiE'],_0x227092[_0xcb1e5f(0xff)](0x2)));return;}const _0x104fdd=path[_0xcb1e5f(0xdf)](_0x295966),_0x53dcf1=path[_0xcb1e5f(0xc4)](_0x44e961,_0x104fdd);fs[_0xcb1e5f(0xc6)](_0x295966,_0x53dcf1),uploadAttachmentsManager[_0xcb1e5f(0xb3)](_0x53dcf1,_0x184a7d);}}static[a80_0x3e6d74(0xb3)](_0x1c7822,_0x3195b8){const _0xc7c424=a80_0x3e6d74,_0x58735d={};_0x58735d[_0xc7c424(0xc0)]=_0xc7c424(0x100),_0x58735d['ngGNW']=_0xc7c424(0xba),_0x58735d[_0xc7c424(0xdb)]=_0xc7c424(0xbf),_0x58735d[_0xc7c424(0xb6)]='Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload';const _0x27a301=_0x58735d;try{const _0x33ee86=AutomationFramework[_0xc7c424(0x113)](),_0x58da93=AutomationFramework[_0xc7c424(0xda)](_0x33ee86,PlaywrightDriverModule[_0xc7c424(0xd9)],''),_0x3783b7=TestInfo[_0xc7c424(0x106)](_0x58da93),_0x53b1f9=_0x3783b7[TestFrameworkConstants[_0xc7c424(0x110)]]||{};_0x53b1f9[_0x1c7822]={[TestFrameworkConstants['KEY_FILE_SIZE']]:fs[_0xc7c424(0xef)](_0x1c7822)[_0xc7c424(0x103)],[TestFrameworkConstants['KEY_FILE_NAME']]:path['basename'](_0x1c7822),[TestFrameworkConstants[_0xc7c424(0xf6)]]:_0x1c7822,[TestFrameworkConstants[_0xc7c424(0x10c)]]:_0x3195b8?_0x27a301[_0xc7c424(0xc0)]:_0x27a301[_0xc7c424(0xf8)]},_0x3783b7[TestFrameworkConstants[_0xc7c424(0x110)]]=_0x53b1f9,TestInfo[_0xc7c424(0xf4)](_0x58da93,_0x3783b7),this['logger']['debug'](util[_0xc7c424(0xfb)](_0x27a301[_0xc7c424(0xdb)],_0x1c7822));}catch(_0x25cf25){this['logger'][_0xc7c424(0xac)](util[_0xc7c424(0xfb)](_0x27a301[_0xc7c424(0xb6)],_0x25cf25['message']));}}static[a80_0x3e6d74(0x109)](){const _0x538a5c=a80_0x3e6d74,_0xd0c00e={};_0xd0c00e[_0x538a5c(0xf9)]=_0x538a5c(0xcf),_0xd0c00e['DXzDG']=_0x538a5c(0xb2),_0xd0c00e['GFEja']=_0x538a5c(0xd0);const _0x4287a8=_0xd0c00e,_0x13dc18=os['homedir'](),_0x557b06=path[_0x538a5c(0xc4)](_0x13dc18,_0x4287a8['dAoXo']);if(!fs[_0x538a5c(0xd4)](_0x557b06))return;const _0x5bfe41=BrowserstackCLI[_0x538a5c(0xf5)]()[_0x538a5c(0xe7)]['TestHubModule']?.[_0x538a5c(0xfe)]?.['toObject']()?.[_0x538a5c(0xb0)],_0x5d4d46=_0x5bfe41?path[_0x538a5c(0xc4)](_0x557b06,_0x5bfe41):null;if(!_0x5d4d46||!fs[_0x538a5c(0xd4)](_0x5d4d46)){this[_0x538a5c(0xb7)][_0x538a5c(0xac)](util[_0x538a5c(0xfb)](_0x4287a8[_0x538a5c(0xb9)],_0x5bfe41));return;}const _0xc849e7={};_0xc849e7[_0x538a5c(0xc9)]=!![],_0xc849e7[_0x538a5c(0xd8)]=!![],fs[_0x538a5c(0xbc)](_0x5d4d46,_0xc849e7),this['logger'][_0x538a5c(0xac)](util[_0x538a5c(0xfb)](_0x4287a8[_0x538a5c(0xe2)]));}}module[a80_0x3e6d74(0xb5)]=uploadAttachmentsManager;