const a89_0x31af0a=a89_0x38b9;(function(_0x287805,_0x15c068){const _0x4e715c=a89_0x38b9,_0x84f030=_0x287805();while(!![]){try{const _0x31e37b=parseInt(_0x4e715c(0x109))/0x1+-parseInt(_0x4e715c(0xf0))/0x2*(parseInt(_0x4e715c(0x115))/0x3)+parseInt(_0x4e715c(0x12f))/0x4+-parseInt(_0x4e715c(0xcd))/0x5*(-parseInt(_0x4e715c(0xd7))/0x6)+parseInt(_0x4e715c(0x128))/0x7*(-parseInt(_0x4e715c(0x13a))/0x8)+-parseInt(_0x4e715c(0xf2))/0x9+parseInt(_0x4e715c(0xf9))/0xa;if(_0x31e37b===_0x15c068)break;else _0x84f030['push'](_0x84f030['shift']());}catch(_0x42d51e){_0x84f030['push'](_0x84f030['shift']());}}}(a89_0x33a5,0xcac02));function a89_0x38b9(_0x5c757e,_0xd775fe){const _0x33a531=a89_0x33a5();return a89_0x38b9=function(_0x38b9cf,_0x3a0634){_0x38b9cf=_0x38b9cf-0xbb;let _0x80e99c=_0x33a531[_0x38b9cf];return _0x80e99c;},a89_0x38b9(_0x5c757e,_0xd775fe);}const os=require('os'),fs=require('fs'),path=require(a89_0x31af0a(0xde)),util=require('util'),BrowserstackCLI=require(a89_0x31af0a(0x140)),https=require(a89_0x31af0a(0xf5)),http=require(a89_0x31af0a(0x122)),AutomationFramework=require(a89_0x31af0a(0x13d)),PlaywrightDriverModule=require(a89_0x31af0a(0xf8)),TestInfo=require('./TestInfo'),TestFrameworkConstants=require(a89_0x31af0a(0x136)),{createClassLogger}=require('../../helpers/classLogger.js');function a89_0x33a5(){const _0x5b8510=['szRac','path','getInstance','TeISJ','addMultipleEntries','testInfo','nnsYU','getTestFramework','trackFile:\x20Instance\x20not\x20available,\x20cannot\x20track\x20attachment','modules','http://','size','eqXoO','./state/testFrameworkState','TIfpr','EYoiL','jresT','finish','createWriteStream','6gmyFwQ','getState','13755726VOaxOZ','error',',\x20filepath:\x20','https','close','basename','./modules/playwrightDriverModule','28037620JSERKf','rmSync','dnStc','Attachment\x20recevied\x20for\x20path:\x20%s','trackFile:\x20Cucumber+Playwright\x20-\x20testId:\x20','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','retry','Cleared\x20attachment\x20folder','trackFile:\x20Stored\x20attachment\x20in\x20TestInfo\x20file\x20for\x20testId:\x20','xTgsb','setTestDetails','__workerDetails','existsSync','./state/hookState','debug','trackFile:\x20Jest+Playwright\x20-\x20testId\x20(testIdentifier):\x20','624360IccJvI','getTestFrameworkDetail','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','KEY_TEST_ID','./cliUtils','KGJcj','MCZRx','EXCLi','mkdirSync','logger','statSync','format','1274343HrSaIs','startsWith','EBdeg','KEY_FILE_SIZE','message','recursive','tfmLA','jest','fqyVI','unlinkSync','clrmm','KEY_FILE_LEVEL','homedir','http','GVOLJ','getAllData','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','TEST','irEhF','7izJLrt','zyPKT','tlcgU','TestHubModule','FuAJa','join','name','993632hVSEHc','statusCode','KEY_TEST_ATTACHMENTS','trim','force','currentTest','trackFile:\x20No\x20testId\x20available,\x20cannot\x20track\x20attachment','./framework/constants/testFrameworkConstants','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','QOATn','769048xOeTdj','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','buildHashedId','./framework/automationFramework','GjfYg','LHFkJ','./browserstackCLI','nuAih','testhubConfig','KEY_FILE_PATH','GWSPB','gBINu','pipe','getTestDetails','getTestIdentifierFromTestInfo','toFixed','tNhQO','exports','OSrJe','https://','eXKRH','VRZzg','TgxKu','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','copyFileSync','PkuhK','OKORY','JuWEQ','get','seTlo','930HyncdA','uploadAttachments','Created\x20.browserstack\x20folder\x20at:\x20%s','.browserstack','trackFile','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','TestLevel','File\x20downloaded\x20to:\x20%s','Created\x20folder:\x20%s','AfnYo','1704nTCKCA','nDyTG','BuildLevel','getTrackedInstance','toLowerCase','KEY_FILE_NAME'];a89_0x33a5=function(){return _0x5b8510;};return a89_0x33a5();}class uploadAttachmentsManager{static [a89_0x31af0a(0x112)]=createClassLogger('uploadAttachmentsManager');static[a89_0x31af0a(0xce)](_0x2e8f51,_0x346aa8=![]){const _0x391fc6=a89_0x31af0a,_0x3451cc={};_0x3451cc[_0x391fc6(0xc8)]=function(_0x51de3b,_0x1a78f4){return _0x51de3b/_0x1a78f4;},_0x3451cc[_0x391fc6(0xd8)]=function(_0x19df59,_0x2e4c41){return _0x19df59*_0x2e4c41;},_0x3451cc['OKORY']=function(_0x2d37f4,_0x375359){return _0x2d37f4>_0x375359;},_0x3451cc['UrFoh']=_0x391fc6(0x138),_0x3451cc[_0x391fc6(0x139)]=_0x391fc6(0xd4),_0x3451cc[_0x391fc6(0xc3)]=function(_0x3589b6,_0x41ff49){return _0x3589b6===_0x41ff49;},_0x3451cc[_0x391fc6(0x117)]=_0x391fc6(0xee),_0x3451cc[_0x391fc6(0x102)]=_0x391fc6(0xd2),_0x3451cc[_0x391fc6(0x11b)]='Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload',_0x3451cc[_0x391fc6(0xec)]=_0x391fc6(0xfc),_0x3451cc[_0x391fc6(0x144)]=_0x391fc6(0xd0),_0x3451cc[_0x391fc6(0xe0)]=_0x391fc6(0xfe),_0x3451cc['eqXoO']=_0x391fc6(0xcf),_0x3451cc[_0x391fc6(0xeb)]=_0x391fc6(0xd5),_0x3451cc[_0x391fc6(0x145)]=function(_0x499393,_0x57dfb0){return _0x499393===_0x57dfb0;},_0x3451cc[_0x391fc6(0x11f)]=_0x391fc6(0xc6),_0x3451cc['tNhQO']=_0x391fc6(0xc2),_0x3451cc['MCZRx']=_0x391fc6(0xe7),_0x3451cc[_0x391fc6(0x13e)]=_0x391fc6(0xf3),_0x3451cc[_0x391fc6(0xca)]='Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s',_0x3451cc[_0x391fc6(0xc5)]=function(_0x440977,_0x1b512e){return _0x440977*_0x1b512e;},_0x3451cc['FuAJa']=function(_0xe9b185,_0x5e5b75){return _0xe9b185>_0x5e5b75;},_0x3451cc[_0x391fc6(0xfb)]=_0x391fc6(0x10b);const _0x429d5d=_0x3451cc;this[_0x391fc6(0x112)][_0x391fc6(0x107)](util[_0x391fc6(0x114)](_0x429d5d[_0x391fc6(0xec)],_0x2e8f51));const _0x3bb301=os[_0x391fc6(0x121)](),_0x5e21bb=path[_0x391fc6(0x12d)](_0x3bb301,_0x429d5d[_0x391fc6(0x144)]);!fs['existsSync'](_0x5e21bb)&&(this['logger']['debug'](util['format'](_0x429d5d[_0x391fc6(0xe0)],_0x5e21bb)),fs[_0x391fc6(0x111)](_0x5e21bb),this['logger'][_0x391fc6(0x107)](util[_0x391fc6(0x114)](_0x429d5d[_0x391fc6(0xe9)],_0x5e21bb)));const _0x5a3ace=BrowserstackCLI[_0x391fc6(0xdf)]()[_0x391fc6(0xe6)][_0x391fc6(0x12b)]?.[_0x391fc6(0x142)]?.['toObject']()?.[_0x391fc6(0x13c)],_0xe822a1=path['join'](_0x5e21bb,_0x5a3ace);!fs[_0x391fc6(0x105)](_0xe822a1)&&(fs[_0x391fc6(0x111)](_0xe822a1),this[_0x391fc6(0x112)][_0x391fc6(0x107)](util[_0x391fc6(0x114)](_0x429d5d[_0x391fc6(0xeb)],_0xe822a1)));if(_0x429d5d[_0x391fc6(0x145)](_0x2e8f51[_0x391fc6(0x132)](),'')){this[_0x391fc6(0x112)][_0x391fc6(0x107)](util[_0x391fc6(0x114)](_0x429d5d[_0x391fc6(0x11f)]));return;}if(_0x2e8f51['startsWith'](_0x429d5d['tNhQO'])||_0x2e8f51[_0x391fc6(0x116)](_0x429d5d[_0x391fc6(0x10f)])){const _0x49e278=_0x2e8f51[_0x391fc6(0x116)](_0x429d5d[_0x391fc6(0xbf)])?https:http,_0x26bc44=path[_0x391fc6(0xf7)](_0x2e8f51),_0x2c133f=path[_0x391fc6(0x12d)](_0xe822a1,_0x26bc44),_0xeb060b=fs[_0x391fc6(0xef)](_0x2c133f);_0x49e278['get'](_0x2e8f51,_0x249aa8=>{const _0x5df82c=_0x391fc6;if(_0x429d5d[_0x5df82c(0xc3)](_0x249aa8[_0x5df82c(0x130)],0xc8))_0x249aa8[_0x5df82c(0xbb)](_0xeb060b),_0xeb060b['on'](_0x429d5d['EBdeg'],()=>{const _0x173a14=_0x5df82c;_0xeb060b[_0x173a14(0xf6)]();const _0x14e672=fs[_0x173a14(0x113)](_0x2c133f),_0x54d761=_0x429d5d[_0x173a14(0xc8)](_0x14e672[_0x173a14(0xe8)],_0x429d5d['nDyTG'](0x400,0x400));if(_0x429d5d[_0x173a14(0xc9)](_0x54d761,0x64)){this[_0x173a14(0x112)][_0x173a14(0x107)](util['format'](_0x429d5d['UrFoh'],_0x54d761[_0x173a14(0xbe)](0x2))),fs['unlinkSync'](_0x2c133f);return;}this['logger'][_0x173a14(0x107)](util[_0x173a14(0x114)](_0x429d5d[_0x173a14(0x139)],_0x2c133f)),uploadAttachmentsManager[_0x173a14(0xd1)](_0x2c133f,_0x346aa8);});else{this[_0x5df82c(0x112)][_0x5df82c(0x107)](util[_0x5df82c(0x114)](_0x429d5d['xTgsb'],_0x249aa8[_0x5df82c(0x130)])),_0xeb060b[_0x5df82c(0xf6)](),fs[_0x5df82c(0x11e)](_0x2c133f);return;}})['on'](_0x429d5d['GjfYg'],_0x4cd3f5=>{const _0x4c7f2f=_0x391fc6;this['logger'][_0x4c7f2f(0x107)](util[_0x4c7f2f(0x114)](_0x429d5d['tfmLA'],_0x4cd3f5[_0x4c7f2f(0x119)])),_0xeb060b[_0x4c7f2f(0xf6)](),fs[_0x4c7f2f(0x11e)](_0x2c133f);return;});}else{if(!fs[_0x391fc6(0x105)](_0x2e8f51)){this['logger'][_0x391fc6(0x107)](util[_0x391fc6(0x114)](_0x429d5d[_0x391fc6(0xca)],_0x2e8f51));return;}const _0x19e03c=fs[_0x391fc6(0x113)](_0x2e8f51),_0x4f3e05=_0x429d5d['PkuhK'](_0x19e03c['size'],_0x429d5d[_0x391fc6(0xc5)](0x400,0x400));if(_0x429d5d[_0x391fc6(0x12c)](_0x4f3e05,0x64)){this['logger'][_0x391fc6(0x107)](util[_0x391fc6(0x114)](_0x429d5d[_0x391fc6(0xfb)],_0x4f3e05['toFixed'](0x2)));return;}const _0x1e9026=path[_0x391fc6(0xf7)](_0x2e8f51),_0x568322=path[_0x391fc6(0x12d)](_0xe822a1,_0x1e9026);fs[_0x391fc6(0xc7)](_0x2e8f51,_0x568322),uploadAttachmentsManager[_0x391fc6(0xd1)](_0x568322,_0x346aa8);}}static[a89_0x31af0a(0xd1)](_0x7465bb,_0x5d9cd2){const _0x338a4d=a89_0x31af0a,_0x2ded92={'EXCLi':function(_0x148003,_0x47bb9c){return _0x148003(_0x47bb9c);},'OSrJe':_0x338a4d(0x140),'zyPKT':function(_0xc6887,_0x99dede){return _0xc6887(_0x99dede);},'jGuRM':_0x338a4d(0x10d),'AfnYo':function(_0x1e68c9,_0x537f22){return _0x1e68c9===_0x537f22;},'nuAih':_0x338a4d(0x11c),'tlcgU':_0x338a4d(0x135),'VRZzg':_0x338a4d(0xd9),'seTlo':_0x338a4d(0xd3),'fqyVI':'trackFile:\x20TestFramework\x20not\x20available,\x20cannot\x20track\x20attachment','GVOLJ':_0x338a4d(0xea),'UyleN':_0x338a4d(0x106),'LHFkJ':_0x338a4d(0xe5),'irEhF':_0x338a4d(0x13b),'KGJcj':_0x338a4d(0x137)};try{let _0x274f82;const _0x37d0bb=global[_0x338a4d(0x104)]?.[_0x338a4d(0x134)]?.[_0x338a4d(0xe2)],_0x2286e3=_0x2ded92[_0x338a4d(0x110)](require,_0x2ded92[_0x338a4d(0xc1)]),_0xd8d870=_0x2ded92[_0x338a4d(0x129)](require,_0x2ded92['jGuRM']),_0x204b3f=_0x2286e3[_0x338a4d(0xdf)]()['isRunning']()&&_0x2ded92[_0x338a4d(0xd6)](_0xd8d870[_0x338a4d(0x10a)]()?.[_0x338a4d(0x12e)]?.[_0x338a4d(0xdb)](),_0x2ded92[_0x338a4d(0x141)]);if(_0x204b3f){_0x274f82=global['__jestCurrentTestIdentifier'];if(!_0x274f82){const _0x426d99=AutomationFramework[_0x338a4d(0xda)]();_0x274f82=AutomationFramework[_0x338a4d(0xf1)](_0x426d99,PlaywrightDriverModule[_0x338a4d(0x10c)],'');}this[_0x338a4d(0x112)][_0x338a4d(0x107)](_0x338a4d(0x108)+_0x274f82);}else{if(!_0x37d0bb){const _0x35f7af=AutomationFramework[_0x338a4d(0xda)]();_0x274f82=AutomationFramework['getState'](_0x35f7af,PlaywrightDriverModule[_0x338a4d(0x10c)],'');}else _0x274f82=TestInfo[_0x338a4d(0xbd)](_0x37d0bb,_0x37d0bb[_0x338a4d(0xff)]);this[_0x338a4d(0x112)][_0x338a4d(0x107)](_0x338a4d(0xfd)+_0x274f82);}if(!_0x274f82){this[_0x338a4d(0x112)][_0x338a4d(0x107)](_0x2ded92[_0x338a4d(0x12a)]);return;}const _0x21b4ac={[TestFrameworkConstants[_0x338a4d(0x118)]]:fs[_0x338a4d(0x113)](_0x7465bb)['size'],[TestFrameworkConstants[_0x338a4d(0xdc)]]:path[_0x338a4d(0xf7)](_0x7465bb),[TestFrameworkConstants[_0x338a4d(0x143)]]:_0x7465bb,[TestFrameworkConstants[_0x338a4d(0x120)]]:_0x5d9cd2?_0x2ded92[_0x338a4d(0xc4)]:_0x2ded92[_0x338a4d(0xcc)]};if(_0x204b3f){const _0x3f5687=_0x2286e3['getInstance']()[_0x338a4d(0xe4)]();if(!_0x3f5687){this[_0x338a4d(0x112)][_0x338a4d(0x107)](_0x2ded92[_0x338a4d(0x11d)]);return;}const _0x366cec=_0x2ded92[_0x338a4d(0x110)](require,_0x2ded92[_0x338a4d(0x123)]),_0xe5331c=_0x2ded92[_0x338a4d(0x129)](require,_0x2ded92['UyleN']),_0x22b29d=_0x3f5687['resolveInstance'](_0x366cec[_0x338a4d(0x126)],_0xe5331c['POST']);if(!_0x22b29d){this[_0x338a4d(0x112)]['debug'](_0x2ded92[_0x338a4d(0x13f)]);return;}const _0x5be404=_0x22b29d[_0x338a4d(0x124)]()[_0x338a4d(0xcb)](_0x274f82)||{},_0x2367f1=_0x5be404[TestFrameworkConstants[_0x338a4d(0x131)]]||{},_0x4b9db0={..._0x2367f1};_0x4b9db0[_0x7465bb]=_0x21b4ac;const _0x1ce294=_0x4b9db0,_0x4fb793={[TestFrameworkConstants[_0x338a4d(0x131)]]:_0x1ce294},_0x149d76={};_0x149d76[_0x274f82]=_0x4fb793,_0x22b29d[_0x338a4d(0xe1)](_0x149d76),this['logger']['debug']('trackFile:\x20Stored\x20attachment\x20in\x20instance\x20memory\x20for\x20testId:\x20'+_0x274f82+_0x338a4d(0xf4)+_0x7465bb);}else{const _0x3a08e4=TestInfo[_0x338a4d(0xbc)](_0x274f82),_0x1770fb=_0x3a08e4[TestFrameworkConstants[_0x338a4d(0x131)]]||{};_0x1770fb[_0x7465bb]=_0x21b4ac,_0x3a08e4[TestFrameworkConstants[_0x338a4d(0x131)]]=_0x1770fb,TestInfo[_0x338a4d(0x103)](_0x274f82,_0x3a08e4),this[_0x338a4d(0x112)][_0x338a4d(0x107)](_0x338a4d(0x101)+_0x274f82+_0x338a4d(0xf4)+_0x7465bb);}this[_0x338a4d(0x112)]['debug'](util['format'](_0x2ded92[_0x338a4d(0x127)],_0x7465bb));}catch(_0x4cf81e){this[_0x338a4d(0x112)][_0x338a4d(0x107)](util[_0x338a4d(0x114)](_0x2ded92[_0x338a4d(0x10e)],_0x4cf81e[_0x338a4d(0x119)]));}}static['clearAttachments'](){const _0x7f4da5=a89_0x31af0a,_0x336d76={};_0x336d76['szRac']=_0x7f4da5(0xd0),_0x336d76[_0x7f4da5(0xed)]=_0x7f4da5(0x125),_0x336d76['nnsYU']=_0x7f4da5(0x100);const _0x474af3=_0x336d76,_0x4d2ac0=os[_0x7f4da5(0x121)](),_0xe9915f=path[_0x7f4da5(0x12d)](_0x4d2ac0,_0x474af3[_0x7f4da5(0xdd)]);if(!fs[_0x7f4da5(0x105)](_0xe9915f))return;const _0x3ce0d0=BrowserstackCLI['getInstance']()['modules'][_0x7f4da5(0x12b)]?.[_0x7f4da5(0x142)]?.['toObject']()?.[_0x7f4da5(0x13c)],_0xb3ee0d=_0x3ce0d0?path[_0x7f4da5(0x12d)](_0xe9915f,_0x3ce0d0):null;if(!_0xb3ee0d||!fs[_0x7f4da5(0x105)](_0xb3ee0d)){this[_0x7f4da5(0x112)][_0x7f4da5(0x107)](util['format'](_0x474af3[_0x7f4da5(0xed)],_0x3ce0d0));return;}const _0x1e17c2={};_0x1e17c2[_0x7f4da5(0x11a)]=!![],_0x1e17c2[_0x7f4da5(0x133)]=!![],fs[_0x7f4da5(0xfa)](_0xb3ee0d,_0x1e17c2),this[_0x7f4da5(0x112)][_0x7f4da5(0x107)](util[_0x7f4da5(0x114)](_0x474af3[_0x7f4da5(0xe3)]));}}module[a89_0x31af0a(0xc0)]=uploadAttachmentsManager;