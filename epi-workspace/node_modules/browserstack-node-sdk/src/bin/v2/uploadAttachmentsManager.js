const a84_0x504b48=a84_0x3cd3;(function(_0x390366,_0x5a8ad7){const _0x4cb19a=a84_0x3cd3,_0x27872e=_0x390366();while(!![]){try{const _0x11e6b2=parseInt(_0x4cb19a(0x1b9))/0x1+-parseInt(_0x4cb19a(0x1b8))/0x2*(-parseInt(_0x4cb19a(0x1c1))/0x3)+parseInt(_0x4cb19a(0x191))/0x4*(parseInt(_0x4cb19a(0x1cb))/0x5)+-parseInt(_0x4cb19a(0x1e2))/0x6+parseInt(_0x4cb19a(0x1a6))/0x7+-parseInt(_0x4cb19a(0x1dd))/0x8+-parseInt(_0x4cb19a(0x1ba))/0x9*(-parseInt(_0x4cb19a(0x19a))/0xa);if(_0x11e6b2===_0x5a8ad7)break;else _0x27872e['push'](_0x27872e['shift']());}catch(_0x54154c){_0x27872e['push'](_0x27872e['shift']());}}}(a84_0x1dff,0x84de4));function a84_0x1dff(){const _0x488d31=['uploadAttachmentsManager','oXlYL','homedir','createWriteStream','XroGM','basename','http','./TestInfo','PFBvH','obbeJ','trackFile','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','testInfo','testhubConfig','existsSync','logger','KEY_FILE_SIZE','79354SQGhxc','1012422zkSiIM','9wEtUJA','xssSE','getTestIdentifierFromTestInfo','https://','dUzTL','mkdirSync','join','57BLDvpu','pipe','LYpHL','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','HkyIH','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','dXmlR','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','close','File\x20downloaded\x20to:\x20%s','30GSqdOD','pQsVB','rnWrH','toObject','path','XhOAX','yHDip','XFBMW','BuildLevel','getInstance','format','AIcNA','KEY_FILE_NAME','message','KEY_TEST_ATTACHMENTS','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','rmSync','force','8120328kuDLIN','modules','currentTest','dmaet','retry','6190860BFQvnC','unlinkSync','tXwKb','statusCode','Attachment\x20recevied\x20for\x20path:\x20%s','TestHubModule','Created\x20folder:\x20%s','statSync','startsWith','UruTV','IyXSl','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','uploadAttachments','../../helpers/classLogger.js','BcJdB','copyFileSync','./framework/constants/testFrameworkConstants','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','buildHashedId','size','310300HqiEmt','FmDFA','http://','emocp','util','__workerDetails','YXRIY','./modules/playwrightDriverModule','Created\x20.browserstack\x20folder\x20at:\x20%s','3203840nsqulc','KEY_FILE_PATH','eyCdd','finish','yIkjM','Tcfor','exports','.browserstack','dCxmH','qaMqu','debug','error','272720dRdciG'];a84_0x1dff=function(){return _0x488d31;};return a84_0x1dff();}const os=require('os'),fs=require('fs'),path=require(a84_0x504b48(0x1cf)),util=require(a84_0x504b48(0x195)),BrowserstackCLI=require('./browserstackCLI'),https=require('https'),http=require(a84_0x504b48(0x1ad)),AutomationFramework=require('./framework/automationFramework'),PlaywrightDriverModule=require(a84_0x504b48(0x198)),TestInfo=require(a84_0x504b48(0x1ae)),TestFrameworkConstants=require(a84_0x504b48(0x18d)),{createClassLogger}=require(a84_0x504b48(0x18a));function a84_0x3cd3(_0x2eddfe,_0x34336a){const _0x1dffae=a84_0x1dff();return a84_0x3cd3=function(_0x3cd327,_0x53e76c){_0x3cd327=_0x3cd327-0x18a;let _0x5799ab=_0x1dffae[_0x3cd327];return _0x5799ab;},a84_0x3cd3(_0x2eddfe,_0x34336a);}class uploadAttachmentsManager{static ['logger']=createClassLogger(a84_0x504b48(0x1a7));static[a84_0x504b48(0x1ee)](_0xc7bfe6,_0x26239d=![]){const _0x3945f3=a84_0x504b48,_0x1dbee7={};_0x1dbee7[_0x3945f3(0x1bb)]=function(_0xe6a375,_0x402dcb){return _0xe6a375/_0x402dcb;},_0x1dbee7[_0x3945f3(0x19e)]=function(_0x47df68,_0x495414){return _0x47df68*_0x495414;},_0x1dbee7[_0x3945f3(0x192)]=function(_0x4702e0,_0x9bc893){return _0x4702e0>_0x9bc893;},_0x1dbee7[_0x3945f3(0x1be)]='Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.',_0x1dbee7[_0x3945f3(0x1e0)]=_0x3945f3(0x1ca),_0x1dbee7[_0x3945f3(0x194)]=function(_0x3675cb,_0x121b4a){return _0x3675cb===_0x121b4a;},_0x1dbee7['BcJdB']=_0x3945f3(0x19d),_0x1dbee7[_0x3945f3(0x1cc)]=_0x3945f3(0x1c4),_0x1dbee7['LYpHL']=_0x3945f3(0x18e),_0x1dbee7['hcMeY']=_0x3945f3(0x1e6),_0x1dbee7[_0x3945f3(0x1c7)]=_0x3945f3(0x1a1),_0x1dbee7[_0x3945f3(0x1b0)]=_0x3945f3(0x1b2),_0x1dbee7[_0x3945f3(0x1eb)]=_0x3945f3(0x199),_0x1dbee7[_0x3945f3(0x1af)]=_0x3945f3(0x1e8),_0x1dbee7[_0x3945f3(0x19c)]=_0x3945f3(0x1c8),_0x1dbee7[_0x3945f3(0x1a8)]=_0x3945f3(0x1bd),_0x1dbee7[_0x3945f3(0x1c5)]=_0x3945f3(0x193),_0x1dbee7[_0x3945f3(0x197)]=_0x3945f3(0x1a5),_0x1dbee7['rnWrH']=_0x3945f3(0x1ed),_0x1dbee7[_0x3945f3(0x1d6)]=function(_0xa7fa3,_0x31f1dd){return _0xa7fa3*_0x31f1dd;},_0x1dbee7[_0x3945f3(0x1d0)]=function(_0x140290,_0xd35f){return _0x140290>_0xd35f;},_0x1dbee7['qaMqu']=_0x3945f3(0x1da);const _0x49aea4=_0x1dbee7;this[_0x3945f3(0x1b6)][_0x3945f3(0x1a4)](util[_0x3945f3(0x1d5)](_0x49aea4['hcMeY'],_0xc7bfe6));const _0x531685=os[_0x3945f3(0x1a9)](),_0x599e56=path['join'](_0x531685,_0x49aea4[_0x3945f3(0x1c7)]);!fs['existsSync'](_0x599e56)&&(this[_0x3945f3(0x1b6)]['debug'](util['format'](_0x49aea4[_0x3945f3(0x1b0)],_0x599e56)),fs[_0x3945f3(0x1bf)](_0x599e56),this[_0x3945f3(0x1b6)][_0x3945f3(0x1a4)](util[_0x3945f3(0x1d5)](_0x49aea4[_0x3945f3(0x1eb)],_0x599e56)));const _0x20d305=BrowserstackCLI[_0x3945f3(0x1d4)]()[_0x3945f3(0x1de)][_0x3945f3(0x1e7)]?.['testhubConfig']?.[_0x3945f3(0x1ce)]()?.['buildHashedId'],_0x2c33ad=path['join'](_0x599e56,_0x20d305);!fs[_0x3945f3(0x1b5)](_0x2c33ad)&&(fs[_0x3945f3(0x1bf)](_0x2c33ad),this[_0x3945f3(0x1b6)]['debug'](util['format'](_0x49aea4[_0x3945f3(0x1af)],_0x2c33ad)));if(_0x49aea4[_0x3945f3(0x194)](_0xc7bfe6['trim'](),'')){this[_0x3945f3(0x1b6)]['debug'](util[_0x3945f3(0x1d5)](_0x49aea4[_0x3945f3(0x19c)]));return;}if(_0xc7bfe6['startsWith'](_0x49aea4['oXlYL'])||_0xc7bfe6[_0x3945f3(0x1ea)](_0x49aea4[_0x3945f3(0x1c5)])){const _0x152430=_0xc7bfe6[_0x3945f3(0x1ea)](_0x49aea4[_0x3945f3(0x1a8)])?https:http,_0x5bc4f7=path[_0x3945f3(0x1ac)](_0xc7bfe6),_0x36f0bf=path['join'](_0x2c33ad,_0x5bc4f7),_0x962551=fs[_0x3945f3(0x1aa)](_0x36f0bf);_0x152430['get'](_0xc7bfe6,_0x2533c=>{const _0x37f7c6=_0x3945f3;if(_0x49aea4[_0x37f7c6(0x194)](_0x2533c[_0x37f7c6(0x1e5)],0xc8))_0x2533c[_0x37f7c6(0x1c2)](_0x962551),_0x962551['on'](_0x49aea4[_0x37f7c6(0x18b)],()=>{const _0xb3b5f9=_0x37f7c6;_0x962551[_0xb3b5f9(0x1c9)]();const _0x3bbde7=fs['statSync'](_0x36f0bf),_0x536da7=_0x49aea4[_0xb3b5f9(0x1bb)](_0x3bbde7[_0xb3b5f9(0x190)],_0x49aea4['yIkjM'](0x400,0x400));if(_0x49aea4['FmDFA'](_0x536da7,0x64)){this['logger'][_0xb3b5f9(0x1a4)](util[_0xb3b5f9(0x1d5)](_0x49aea4[_0xb3b5f9(0x1be)],_0x536da7['toFixed'](0x2))),fs['unlinkSync'](_0x36f0bf);return;}this['logger'][_0xb3b5f9(0x1a4)](util['format'](_0x49aea4[_0xb3b5f9(0x1e0)],_0x36f0bf)),uploadAttachmentsManager['trackFile'](_0x36f0bf,_0x26239d);});else{this[_0x37f7c6(0x1b6)][_0x37f7c6(0x1a4)](util[_0x37f7c6(0x1d5)](_0x49aea4[_0x37f7c6(0x1cc)],_0x2533c[_0x37f7c6(0x1e5)])),_0x962551[_0x37f7c6(0x1c9)](),fs[_0x37f7c6(0x1e3)](_0x36f0bf);return;}})['on'](_0x49aea4['YXRIY'],_0x2232bc=>{const _0x1cd259=_0x3945f3;this[_0x1cd259(0x1b6)][_0x1cd259(0x1a4)](util[_0x1cd259(0x1d5)](_0x49aea4[_0x1cd259(0x1c3)],_0x2232bc['message'])),_0x962551[_0x1cd259(0x1c9)](),fs[_0x1cd259(0x1e3)](_0x36f0bf);return;});}else{if(!fs[_0x3945f3(0x1b5)](_0xc7bfe6)){this['logger'][_0x3945f3(0x1a4)](util['format'](_0x49aea4[_0x3945f3(0x1cd)],_0xc7bfe6));return;}const _0x1404aa=fs[_0x3945f3(0x1e9)](_0xc7bfe6),_0xe1f0f8=_0x49aea4[_0x3945f3(0x1bb)](_0x1404aa['size'],_0x49aea4[_0x3945f3(0x1d6)](0x400,0x400));if(_0x49aea4['XhOAX'](_0xe1f0f8,0x64)){this[_0x3945f3(0x1b6)][_0x3945f3(0x1a4)](util[_0x3945f3(0x1d5)](_0x49aea4[_0x3945f3(0x1a3)],_0xe1f0f8['toFixed'](0x2)));return;}const _0x30d62f=path[_0x3945f3(0x1ac)](_0xc7bfe6),_0x26a9f3=path[_0x3945f3(0x1c0)](_0x2c33ad,_0x30d62f);fs[_0x3945f3(0x18c)](_0xc7bfe6,_0x26a9f3),uploadAttachmentsManager[_0x3945f3(0x1b1)](_0x26a9f3,_0x26239d);}}static['trackFile'](_0xb171fc,_0x4b7aae){const _0x22e779=a84_0x504b48,_0x301112={};_0x301112[_0x22e779(0x1e4)]=_0x22e779(0x1d3),_0x301112[_0x22e779(0x1d1)]='TestLevel',_0x301112['IyXSl']='Attachment\x20file\x20tracked\x20for\x20upload:\x20%s',_0x301112[_0x22e779(0x1ab)]=_0x22e779(0x1c6);const _0x2fdc05=_0x301112;try{const _0x341dd9=global[_0x22e779(0x196)]?.[_0x22e779(0x1df)]?.[_0x22e779(0x1b3)],_0x33f57c=TestInfo[_0x22e779(0x1bc)](_0x341dd9,_0x341dd9?.[_0x22e779(0x1e1)]),_0x24199d=TestInfo['getTestDetails'](_0x33f57c),_0x4f9865=_0x24199d[TestFrameworkConstants[_0x22e779(0x1d9)]]||{};_0x4f9865[_0xb171fc]={[TestFrameworkConstants[_0x22e779(0x1b7)]]:fs['statSync'](_0xb171fc)[_0x22e779(0x190)],[TestFrameworkConstants[_0x22e779(0x1d7)]]:path[_0x22e779(0x1ac)](_0xb171fc),[TestFrameworkConstants[_0x22e779(0x19b)]]:_0xb171fc,[TestFrameworkConstants['KEY_FILE_LEVEL']]:_0x4b7aae?_0x2fdc05['tXwKb']:_0x2fdc05[_0x22e779(0x1d1)]},_0x24199d[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]=_0x4f9865,TestInfo['setTestDetails'](_0x33f57c,_0x24199d),this[_0x22e779(0x1b6)][_0x22e779(0x1a4)](util[_0x22e779(0x1d5)](_0x2fdc05[_0x22e779(0x1ec)],_0xb171fc));}catch(_0x478f6f){this['logger'][_0x22e779(0x1a4)](util[_0x22e779(0x1d5)](_0x2fdc05['XroGM'],_0x478f6f[_0x22e779(0x1d8)]));}}static['clearAttachments'](){const _0x2d6387=a84_0x504b48,_0x1acd13={};_0x1acd13['Tcfor']=_0x2d6387(0x1a1),_0x1acd13['dCxmH']='No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s',_0x1acd13[_0x2d6387(0x1d2)]='Cleared\x20attachment\x20folder';const _0x37cd9a=_0x1acd13,_0x178315=os[_0x2d6387(0x1a9)](),_0x7cb163=path[_0x2d6387(0x1c0)](_0x178315,_0x37cd9a[_0x2d6387(0x19f)]);if(!fs[_0x2d6387(0x1b5)](_0x7cb163))return;const _0x2b732a=BrowserstackCLI[_0x2d6387(0x1d4)]()[_0x2d6387(0x1de)][_0x2d6387(0x1e7)]?.[_0x2d6387(0x1b4)]?.[_0x2d6387(0x1ce)]()?.[_0x2d6387(0x18f)],_0x3f8db3=_0x2b732a?path[_0x2d6387(0x1c0)](_0x7cb163,_0x2b732a):null;if(!_0x3f8db3||!fs[_0x2d6387(0x1b5)](_0x3f8db3)){this[_0x2d6387(0x1b6)]['debug'](util[_0x2d6387(0x1d5)](_0x37cd9a[_0x2d6387(0x1a2)],_0x2b732a));return;}const _0x3734d8={};_0x3734d8['recursive']=!![],_0x3734d8[_0x2d6387(0x1dc)]=!![],fs[_0x2d6387(0x1db)](_0x3f8db3,_0x3734d8),this[_0x2d6387(0x1b6)][_0x2d6387(0x1a4)](util[_0x2d6387(0x1d5)](_0x37cd9a[_0x2d6387(0x1d2)]));}}module[a84_0x504b48(0x1a0)]=uploadAttachmentsManager;