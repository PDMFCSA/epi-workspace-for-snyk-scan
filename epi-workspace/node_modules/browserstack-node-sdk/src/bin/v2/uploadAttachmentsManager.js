function a89_0x400f(_0x54dd12,_0x59801b){const _0x3c9bb4=a89_0x3c9b();return a89_0x400f=function(_0x400f0c,_0x247590){_0x400f0c=_0x400f0c-0x1ed;let _0x54c28e=_0x3c9bb4[_0x400f0c];return _0x54c28e;},a89_0x400f(_0x54dd12,_0x59801b);}const a89_0x35a1e0=a89_0x400f;(function(_0x5bd15e,_0xc357f9){const _0x4e8f1c=a89_0x400f,_0x5063c3=_0x5bd15e();while(!![]){try{const _0x226b22=parseInt(_0x4e8f1c(0x229))/0x1+parseInt(_0x4e8f1c(0x226))/0x2*(-parseInt(_0x4e8f1c(0x223))/0x3)+-parseInt(_0x4e8f1c(0x1f0))/0x4*(-parseInt(_0x4e8f1c(0x23b))/0x5)+parseInt(_0x4e8f1c(0x249))/0x6+-parseInt(_0x4e8f1c(0x204))/0x7+-parseInt(_0x4e8f1c(0x264))/0x8*(-parseInt(_0x4e8f1c(0x23c))/0x9)+parseInt(_0x4e8f1c(0x258))/0xa;if(_0x226b22===_0xc357f9)break;else _0x5063c3['push'](_0x5063c3['shift']());}catch(_0x3e4553){_0x5063c3['push'](_0x5063c3['shift']());}}}(a89_0x3c9b,0x2e532));const os=require('os'),fs=require('fs'),path=require('path'),util=require(a89_0x35a1e0(0x26a)),BrowserstackCLI=require('./browserstackCLI'),https=require('https'),http=require('http'),AutomationFramework=require('./framework/automationFramework'),PlaywrightDriverModule=require(a89_0x35a1e0(0x232)),TestInfo=require(a89_0x35a1e0(0x268)),TestFrameworkConstants=require(a89_0x35a1e0(0x1fa)),{createClassLogger}=require(a89_0x35a1e0(0x200));class uploadAttachmentsManager{static [a89_0x35a1e0(0x23a)]=createClassLogger('uploadAttachmentsManager');static['uploadAttachments'](_0x44c13d,_0x3583ae=![]){const _0x3d4956=a89_0x35a1e0,_0x4c9fa3={};_0x4c9fa3[_0x3d4956(0x1ed)]=function(_0xcdb74f,_0x39c4ef){return _0xcdb74f/_0x39c4ef;},_0x4c9fa3[_0x3d4956(0x26b)]=function(_0x556afc,_0x1cceb7){return _0x556afc*_0x1cceb7;},_0x4c9fa3[_0x3d4956(0x1f6)]=function(_0x6b0ae,_0x4eb12d){return _0x6b0ae>_0x4eb12d;},_0x4c9fa3[_0x3d4956(0x262)]=_0x3d4956(0x214),_0x4c9fa3[_0x3d4956(0x25b)]=_0x3d4956(0x25a),_0x4c9fa3[_0x3d4956(0x1fe)]=function(_0x314be5,_0x3d125e){return _0x314be5===_0x3d125e;},_0x4c9fa3[_0x3d4956(0x225)]=_0x3d4956(0x255),_0x4c9fa3['nYdvH']='Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload',_0x4c9fa3[_0x3d4956(0x247)]='Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload',_0x4c9fa3['AjUjZ']=_0x3d4956(0x267),_0x4c9fa3[_0x3d4956(0x246)]=_0x3d4956(0x228),_0x4c9fa3[_0x3d4956(0x239)]='.browserstack\x20folder\x20not\x20found\x20at:\x20%s',_0x4c9fa3['xqJmV']=_0x3d4956(0x21f),_0x4c9fa3[_0x3d4956(0x213)]=_0x3d4956(0x21a),_0x4c9fa3[_0x3d4956(0x1f1)]=function(_0x517d4d,_0x46bf42){return _0x517d4d===_0x46bf42;},_0x4c9fa3[_0x3d4956(0x1ef)]='Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.',_0x4c9fa3['QgSMy']='https://',_0x4c9fa3[_0x3d4956(0x20b)]='http://',_0x4c9fa3[_0x3d4956(0x20e)]=_0x3d4956(0x211),_0x4c9fa3['LNzRO']=_0x3d4956(0x269),_0x4c9fa3[_0x3d4956(0x221)]=function(_0x4c280f,_0x344c3c){return _0x4c280f/_0x344c3c;},_0x4c9fa3['cJzXb']=function(_0x4f0450,_0x2916bf){return _0x4f0450*_0x2916bf;},_0x4c9fa3['sVPES']=function(_0x231f64,_0x2a4998){return _0x231f64>_0x2a4998;},_0x4c9fa3[_0x3d4956(0x215)]='File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.';const _0x211af5=_0x4c9fa3;this['logger']['debug'](util[_0x3d4956(0x254)](_0x211af5[_0x3d4956(0x240)],_0x44c13d));const _0x301ff5=os[_0x3d4956(0x244)](),_0x14bb64=path['join'](_0x301ff5,_0x211af5[_0x3d4956(0x246)]);!fs[_0x3d4956(0x257)](_0x14bb64)&&(this[_0x3d4956(0x23a)][_0x3d4956(0x234)](util[_0x3d4956(0x254)](_0x211af5[_0x3d4956(0x239)],_0x14bb64)),fs['mkdirSync'](_0x14bb64),this[_0x3d4956(0x23a)][_0x3d4956(0x234)](util[_0x3d4956(0x254)](_0x211af5['xqJmV'],_0x14bb64)));const _0x166fcb=BrowserstackCLI['getInstance']()[_0x3d4956(0x24b)][_0x3d4956(0x231)]?.[_0x3d4956(0x259)]?.[_0x3d4956(0x23f)]()?.['buildHashedId'],_0x5cc617=path['join'](_0x14bb64,_0x166fcb);!fs[_0x3d4956(0x257)](_0x5cc617)&&(fs['mkdirSync'](_0x5cc617),this[_0x3d4956(0x23a)][_0x3d4956(0x234)](util[_0x3d4956(0x254)](_0x211af5[_0x3d4956(0x213)],_0x5cc617)));if(_0x211af5[_0x3d4956(0x1f1)](_0x44c13d[_0x3d4956(0x21e)](),'')){this['logger'][_0x3d4956(0x234)](util['format'](_0x211af5['mpPpM']));return;}if(_0x44c13d[_0x3d4956(0x219)](_0x211af5[_0x3d4956(0x256)])||_0x44c13d[_0x3d4956(0x219)](_0x211af5['SGkJU'])){const _0x796aef=_0x44c13d['startsWith'](_0x211af5['QgSMy'])?https:http,_0x13a205=path[_0x3d4956(0x210)](_0x44c13d),_0x33afec=path[_0x3d4956(0x1f4)](_0x5cc617,_0x13a205),_0x4a63a8=fs['createWriteStream'](_0x33afec);_0x796aef[_0x3d4956(0x201)](_0x44c13d,_0x577035=>{const _0x5bf265=_0x3d4956,_0x4e12ab={'JwonS':function(_0x184ce6,_0x28ef3a){const _0x156617=a89_0x400f;return _0x211af5[_0x156617(0x1ed)](_0x184ce6,_0x28ef3a);},'NTSUw':function(_0x54cc92,_0x19ae90){return _0x211af5['hOWPT'](_0x54cc92,_0x19ae90);},'oZqId':function(_0x181776,_0x1ded23){const _0x54fbd5=a89_0x400f;return _0x211af5[_0x54fbd5(0x1f6)](_0x181776,_0x1ded23);},'ebptn':_0x211af5[_0x5bf265(0x262)],'VDvOF':_0x211af5[_0x5bf265(0x25b)]};if(_0x211af5[_0x5bf265(0x1fe)](_0x577035[_0x5bf265(0x251)],0xc8))_0x577035['pipe'](_0x4a63a8),_0x4a63a8['on'](_0x211af5[_0x5bf265(0x225)],()=>{const _0x495ba1=_0x5bf265;_0x4a63a8['close']();const _0x39c0b0=fs[_0x495ba1(0x25e)](_0x33afec),_0x19a2b1=_0x4e12ab[_0x495ba1(0x21c)](_0x39c0b0[_0x495ba1(0x218)],_0x4e12ab[_0x495ba1(0x22b)](0x400,0x400));if(_0x4e12ab[_0x495ba1(0x1fb)](_0x19a2b1,0x64)){this[_0x495ba1(0x23a)]['debug'](util[_0x495ba1(0x254)](_0x4e12ab['ebptn'],_0x19a2b1[_0x495ba1(0x250)](0x2))),fs['unlinkSync'](_0x33afec);return;}this[_0x495ba1(0x23a)][_0x495ba1(0x234)](util[_0x495ba1(0x254)](_0x4e12ab['VDvOF'],_0x33afec)),uploadAttachmentsManager['trackFile'](_0x33afec,_0x3583ae);});else{this[_0x5bf265(0x23a)]['debug'](util[_0x5bf265(0x254)](_0x211af5[_0x5bf265(0x22c)],_0x577035['statusCode'])),_0x4a63a8['close'](),fs[_0x5bf265(0x252)](_0x33afec);return;}})['on'](_0x211af5[_0x3d4956(0x20e)],_0x48a2c9=>{const _0x28b754=_0x3d4956;this[_0x28b754(0x23a)][_0x28b754(0x234)](util[_0x28b754(0x254)](_0x211af5[_0x28b754(0x247)],_0x48a2c9[_0x28b754(0x20f)])),_0x4a63a8[_0x28b754(0x209)](),fs[_0x28b754(0x252)](_0x33afec);return;});}else{if(!fs[_0x3d4956(0x257)](_0x44c13d)){this[_0x3d4956(0x23a)][_0x3d4956(0x234)](util[_0x3d4956(0x254)](_0x211af5['LNzRO'],_0x44c13d));return;}const _0x8e5e90=fs[_0x3d4956(0x25e)](_0x44c13d),_0x8faea4=_0x211af5['XZBSr'](_0x8e5e90['size'],_0x211af5[_0x3d4956(0x25d)](0x400,0x400));if(_0x211af5[_0x3d4956(0x20a)](_0x8faea4,0x64)){this['logger']['debug'](util[_0x3d4956(0x254)](_0x211af5[_0x3d4956(0x215)],_0x8faea4['toFixed'](0x2)));return;}const _0x5a912c=path[_0x3d4956(0x210)](_0x44c13d),_0x4da6eb=path[_0x3d4956(0x1f4)](_0x5cc617,_0x5a912c);fs['copyFileSync'](_0x44c13d,_0x4da6eb),uploadAttachmentsManager[_0x3d4956(0x261)](_0x4da6eb,_0x3583ae);}}static[a89_0x35a1e0(0x261)](_0x5ddaa6,_0x1d5d94){const _0xbb710c=a89_0x35a1e0,_0x2e2a5d={'zDmJq':function(_0x1afa69,_0x3eedd5){return _0x1afa69(_0x3eedd5);},'ZNAXR':_0xbb710c(0x237),'oeIKk':_0xbb710c(0x20c),'CnSTU':function(_0x1a8ad3,_0x1efeaf){return _0x1a8ad3===_0x1efeaf;},'ccGjx':'jest','oNySQ':_0xbb710c(0x202),'gDKMR':'BuildLevel','tvdKi':_0xbb710c(0x220),'rEhBL':'trackFile:\x20TestFramework\x20not\x20available,\x20cannot\x20track\x20attachment','ExScB':function(_0xe04c3e,_0x287c43){return _0xe04c3e(_0x287c43);},'mwcdo':_0xbb710c(0x222),'jaafX':_0xbb710c(0x207),'LquEI':_0xbb710c(0x243),'YmPFV':'Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','hHbLa':_0xbb710c(0x212)};try{let _0x1bd92f;const _0xdafbed=global['__workerDetails']?.[_0xbb710c(0x217)]?.['testInfo'],_0xab9fea=_0x2e2a5d[_0xbb710c(0x24d)](require,_0x2e2a5d[_0xbb710c(0x260)]),_0x537792=_0x2e2a5d[_0xbb710c(0x24d)](require,_0x2e2a5d[_0xbb710c(0x205)]),_0x41960e=_0xab9fea['getInstance']()[_0xbb710c(0x253)]()&&_0x2e2a5d[_0xbb710c(0x22d)](_0x537792[_0xbb710c(0x245)]()?.[_0xbb710c(0x230)]?.[_0xbb710c(0x21b)](),_0x2e2a5d[_0xbb710c(0x233)]);if(_0x41960e){_0x1bd92f=global[_0xbb710c(0x1f3)];if(!_0x1bd92f){const _0x1e5df3=AutomationFramework[_0xbb710c(0x1f8)]();_0x1bd92f=AutomationFramework[_0xbb710c(0x238)](_0x1e5df3,PlaywrightDriverModule[_0xbb710c(0x25f)],'');}this[_0xbb710c(0x23a)][_0xbb710c(0x234)](_0xbb710c(0x1fd)+_0x1bd92f);}else{if(!_0xdafbed){const _0x21ae62=AutomationFramework['getTrackedInstance']();_0x1bd92f=AutomationFramework[_0xbb710c(0x238)](_0x21ae62,PlaywrightDriverModule[_0xbb710c(0x25f)],'');}else _0x1bd92f=TestInfo['getTestIdentifierFromTestInfo'](_0xdafbed,_0xdafbed[_0xbb710c(0x216)]);this[_0xbb710c(0x23a)][_0xbb710c(0x234)]('trackFile:\x20Cucumber+Playwright\x20-\x20testId:\x20'+_0x1bd92f);}if(!_0x1bd92f){this[_0xbb710c(0x23a)][_0xbb710c(0x234)](_0x2e2a5d['oNySQ']);return;}const _0x4df1c3={[TestFrameworkConstants[_0xbb710c(0x24c)]]:fs[_0xbb710c(0x25e)](_0x5ddaa6)[_0xbb710c(0x218)],[TestFrameworkConstants[_0xbb710c(0x248)]]:path[_0xbb710c(0x210)](_0x5ddaa6),[TestFrameworkConstants[_0xbb710c(0x208)]]:_0x5ddaa6,[TestFrameworkConstants[_0xbb710c(0x1ee)]]:_0x1d5d94?_0x2e2a5d[_0xbb710c(0x24a)]:_0x2e2a5d[_0xbb710c(0x203)]};if(_0x41960e){const _0x1a1b6d=_0xab9fea[_0xbb710c(0x22a)]()[_0xbb710c(0x1f9)]();if(!_0x1a1b6d){this[_0xbb710c(0x23a)][_0xbb710c(0x234)](_0x2e2a5d[_0xbb710c(0x24e)]);return;}const _0x4d35b4=_0x2e2a5d['ExScB'](require,_0x2e2a5d[_0xbb710c(0x241)]),_0xffc1e0=_0x2e2a5d[_0xbb710c(0x224)](require,_0x2e2a5d[_0xbb710c(0x266)]),_0x36f374=_0x1a1b6d['resolveInstance'](_0x4d35b4[_0xbb710c(0x242)],_0xffc1e0[_0xbb710c(0x1f2)]);if(!_0x36f374){this[_0xbb710c(0x23a)][_0xbb710c(0x234)](_0x2e2a5d['LquEI']);return;}const _0x9d66ea=_0x36f374[_0xbb710c(0x25c)]()[_0xbb710c(0x201)](_0x1bd92f)||{},_0x2e8263=_0x9d66ea[TestFrameworkConstants[_0xbb710c(0x1f7)]]||{},_0x48cf4a={..._0x2e8263};_0x48cf4a[_0x5ddaa6]=_0x4df1c3;const _0x22e314=_0x48cf4a,_0x2ea04f={[TestFrameworkConstants[_0xbb710c(0x1f7)]]:_0x22e314},_0x545e9d={};_0x545e9d[_0x1bd92f]=_0x2ea04f,_0x36f374['addMultipleEntries'](_0x545e9d),this[_0xbb710c(0x23a)][_0xbb710c(0x234)](_0xbb710c(0x236)+_0x1bd92f+',\x20filepath:\x20'+_0x5ddaa6);}else{const _0x354ece=TestInfo[_0xbb710c(0x24f)](_0x1bd92f),_0x285271=_0x354ece[TestFrameworkConstants[_0xbb710c(0x1f7)]]||{};_0x285271[_0x5ddaa6]=_0x4df1c3,_0x354ece[TestFrameworkConstants[_0xbb710c(0x1f7)]]=_0x285271,TestInfo[_0xbb710c(0x227)](_0x1bd92f,_0x354ece),this[_0xbb710c(0x23a)][_0xbb710c(0x234)](_0xbb710c(0x23e)+_0x1bd92f+_0xbb710c(0x1fc)+_0x5ddaa6);}this['logger'][_0xbb710c(0x234)](util[_0xbb710c(0x254)](_0x2e2a5d[_0xbb710c(0x1ff)],_0x5ddaa6));}catch(_0x2a0470){this[_0xbb710c(0x23a)]['debug'](util['format'](_0x2e2a5d[_0xbb710c(0x235)],_0x2a0470[_0xbb710c(0x20f)]));}}static[a89_0x35a1e0(0x20d)](){const _0x457d82=a89_0x35a1e0,_0x5f53ea={};_0x5f53ea[_0x457d82(0x1f5)]=_0x457d82(0x228),_0x5f53ea[_0x457d82(0x263)]=_0x457d82(0x206),_0x5f53ea[_0x457d82(0x22e)]=_0x457d82(0x265);const _0x1265b5=_0x5f53ea,_0x419f7b=os[_0x457d82(0x244)](),_0x129366=path[_0x457d82(0x1f4)](_0x419f7b,_0x1265b5[_0x457d82(0x1f5)]);if(!fs['existsSync'](_0x129366))return;const _0x290baa=BrowserstackCLI[_0x457d82(0x22a)]()[_0x457d82(0x24b)][_0x457d82(0x231)]?.[_0x457d82(0x259)]?.[_0x457d82(0x23f)]()?.['buildHashedId'],_0x3edb86=_0x290baa?path[_0x457d82(0x1f4)](_0x129366,_0x290baa):null;if(!_0x3edb86||!fs[_0x457d82(0x257)](_0x3edb86)){this['logger']['debug'](util[_0x457d82(0x254)](_0x1265b5[_0x457d82(0x263)],_0x290baa));return;}const _0x404dbc={};_0x404dbc[_0x457d82(0x21d)]=!![],_0x404dbc['force']=!![],fs[_0x457d82(0x22f)](_0x3edb86,_0x404dbc),this['logger'][_0x457d82(0x234)](util[_0x457d82(0x254)](_0x1265b5[_0x457d82(0x22e)]));}}function a89_0x3c9b(){const _0x58190b=['trackFile:\x20Jest+Playwright\x20-\x20testId\x20(testIdentifier):\x20','QPLOo','YmPFV','../../helpers/classLogger.js','get','trackFile:\x20No\x20testId\x20available,\x20cannot\x20track\x20attachment','tvdKi','1420440YwsiUv','oeIKk','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','./state/hookState','KEY_FILE_PATH','close','sVPES','SGkJU','./cliUtils','clearAttachments','ckErA','message','basename','error','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','poMdA','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','oitPW','retry','currentTest','size','startsWith','Created\x20folder:\x20%s','toLowerCase','JwonS','recursive','trim','Created\x20.browserstack\x20folder\x20at:\x20%s','TestLevel','XZBSr','./state/testFrameworkState','75uSjhVu','ExScB','ckCdD','18186xsmxRS','setTestDetails','.browserstack','14581EZrazr','getInstance','NTSUw','nYdvH','CnSTU','VWvHU','rmSync','name','TestHubModule','./modules/playwrightDriverModule','ccGjx','debug','hHbLa','trackFile:\x20Stored\x20attachment\x20in\x20instance\x20memory\x20for\x20testId:\x20','./browserstackCLI','getState','dDmdK','logger','45BxuDsB','927ZXcvnF','exports','trackFile:\x20Stored\x20attachment\x20in\x20TestInfo\x20file\x20for\x20testId:\x20','toObject','AjUjZ','mwcdo','TEST','trackFile:\x20Instance\x20not\x20available,\x20cannot\x20track\x20attachment','homedir','getTestFrameworkDetail','JJFYF','CdXlO','KEY_FILE_NAME','2213898rbmYVz','gDKMR','modules','KEY_FILE_SIZE','zDmJq','rEhBL','getTestDetails','toFixed','statusCode','unlinkSync','isRunning','format','finish','QgSMy','existsSync','1064300bHFlbS','testhubConfig','File\x20downloaded\x20to:\x20%s','KiIFK','getAllData','cJzXb','statSync','KEY_TEST_ID','ZNAXR','trackFile','UOnep','QBfwi','560AyHIuL','Cleared\x20attachment\x20folder','jaafX','Attachment\x20recevied\x20for\x20path:\x20%s','./TestInfo','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','util','hOWPT','VgOPM','KEY_FILE_LEVEL','mpPpM','54572IYCOis','VNBPj','POST','__jestCurrentTestIdentifier','join','ZRuCE','HaiKh','KEY_TEST_ATTACHMENTS','getTrackedInstance','getTestFramework','./framework/constants/testFrameworkConstants','oZqId',',\x20filepath:\x20'];a89_0x3c9b=function(){return _0x58190b;};return a89_0x3c9b();}module[a89_0x35a1e0(0x23d)]=uploadAttachmentsManager;