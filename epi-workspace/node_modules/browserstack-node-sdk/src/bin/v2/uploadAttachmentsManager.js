const a85_0x4801f0=a85_0x2c94;function a85_0x1017(){const _0x59673b=['testInfo','AUiJU','./framework/automationFramework','635940Gdxsee','getTestIdentifierFromTestInfo','EOfCo','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','http','trim','iQydx','getState','KNyVv','mWrpK','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','close','unlinkSync','modules','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','buildHashedId','uploadAttachments','basename','zRbrY','SGDUT','KEY_FILE_PATH','BbIpj','mkdirSync','uploadAttachmentsManager','toObject','xyjCI','67902ISojqF','statSync','statusCode','pipe','finish','size','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','TrWTb','currentTest','CljKV','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','773595QTbsDH','65WghQWN','KEY_TEST_ID','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','7vfyoEs','mjfBx','KEY_FILE_NAME','7658744sRCHOa','19LLDtYM','retry','getInstance','KEY_TEST_ATTACHMENTS','__workerDetails','.browserstack','342124pYovOX','getTestDetails','logger','debug','BuildLevel','2898528HXEQxZ','5183167sIreBK','Attachment\x20recevied\x20for\x20path:\x20%s','rmSync','XaWnq','ogNsm','./framework/constants/testFrameworkConstants','createWriteStream','vGgtg','OhRVD','error','EBJnP','KEY_FILE_SIZE','eNZcP','pIqfs','format','XMgHg','HvsdS','./TestInfo','./browserstackCLI','startsWith','KEY_FILE_LEVEL','existsSync','path','UCVME','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','./modules/playwrightDriverModule','LTbms','toFixed','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','lfOTQ','File\x20downloaded\x20to:\x20%s','10XfTjRO','Created\x20folder:\x20%s','https','homedir','bpuYv','force','setTestDetails','fWwft','util','join','testhubConfig','TestLevel','https://','cUaQU','iJQlz'];a85_0x1017=function(){return _0x59673b;};return a85_0x1017();}(function(_0x4ea43a,_0x49bfb4){const _0x342195=a85_0x2c94,_0x262f22=_0x4ea43a();while(!![]){try{const _0x4c68a7=parseInt(_0x342195(0x18d))/0x1*(parseInt(_0x342195(0x17a))/0x2)+parseInt(_0x342195(0x160))/0x3+-parseInt(_0x342195(0x193))/0x4*(parseInt(_0x342195(0x186))/0x5)+-parseInt(_0x342195(0x198))/0x6+parseInt(_0x342195(0x189))/0x7*(parseInt(_0x342195(0x18c))/0x8)+parseInt(_0x342195(0x185))/0x9+-parseInt(_0x342195(0x14e))/0xa*(-parseInt(_0x342195(0x199))/0xb);if(_0x4c68a7===_0x49bfb4)break;else _0x262f22['push'](_0x262f22['shift']());}catch(_0x1ee21c){_0x262f22['push'](_0x262f22['shift']());}}}(a85_0x1017,0xbd969));const os=require('os'),fs=require('fs'),path=require(a85_0x4801f0(0x145)),util=require(a85_0x4801f0(0x156)),BrowserstackCLI=require(a85_0x4801f0(0x141)),https=require(a85_0x4801f0(0x150)),http=require(a85_0x4801f0(0x164)),AutomationFramework=require(a85_0x4801f0(0x15f)),PlaywrightDriverModule=require(a85_0x4801f0(0x148)),TestInfo=require(a85_0x4801f0(0x140)),TestFrameworkConstants=require(a85_0x4801f0(0x134)),{createClassLogger}=require('../../helpers/classLogger.js');function a85_0x2c94(_0x10ec53,_0x6f52fc){const _0x1017b9=a85_0x1017();return a85_0x2c94=function(_0x2c9479,_0xd0c5b4){_0x2c9479=_0x2c9479-0x133;let _0x22f4b5=_0x1017b9[_0x2c9479];return _0x22f4b5;},a85_0x2c94(_0x10ec53,_0x6f52fc);}class uploadAttachmentsManager{static [a85_0x4801f0(0x195)]=createClassLogger(a85_0x4801f0(0x177));static[a85_0x4801f0(0x170)](_0x4d6e79,_0xbb092f=![]){const _0x340f5f=a85_0x4801f0,_0x4c3a18={};_0x4c3a18[_0x340f5f(0x172)]=function(_0x3a8047,_0x223600){return _0x3a8047/_0x223600;},_0x4c3a18[_0x340f5f(0x149)]=function(_0x6029f2,_0xdd834d){return _0x6029f2*_0xdd834d;},_0x4c3a18[_0x340f5f(0x146)]=function(_0x2c3fe1,_0x227cb5){return _0x2c3fe1>_0x227cb5;},_0x4c3a18[_0x340f5f(0x183)]=_0x340f5f(0x14b),_0x4c3a18[_0x340f5f(0x18a)]=_0x340f5f(0x14d),_0x4c3a18[_0x340f5f(0x19c)]=function(_0x465b6a,_0x55b9df){return _0x465b6a===_0x55b9df;},_0x4c3a18[_0x340f5f(0x162)]=_0x340f5f(0x17e),_0x4c3a18[_0x340f5f(0x181)]='Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload',_0x4c3a18[_0x340f5f(0x139)]=_0x340f5f(0x147),_0x4c3a18[_0x340f5f(0x15e)]=_0x340f5f(0x19a),_0x4c3a18['vGgtg']=_0x340f5f(0x192),_0x4c3a18[_0x340f5f(0x15c)]=_0x340f5f(0x184),_0x4c3a18[_0x340f5f(0x173)]='Created\x20.browserstack\x20folder\x20at:\x20%s',_0x4c3a18[_0x340f5f(0x13f)]=_0x340f5f(0x14f),_0x4c3a18[_0x340f5f(0x175)]=_0x340f5f(0x163),_0x4c3a18[_0x340f5f(0x13b)]=_0x340f5f(0x15a),_0x4c3a18['OhRVD']='http://',_0x4c3a18[_0x340f5f(0x133)]=_0x340f5f(0x138),_0x4c3a18[_0x340f5f(0x13e)]='Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s',_0x4c3a18[_0x340f5f(0x166)]=function(_0x5206c0,_0x32b871){return _0x5206c0>_0x32b871;},_0x4c3a18[_0x340f5f(0x168)]=_0x340f5f(0x16e);const _0x1ecc4c=_0x4c3a18;this[_0x340f5f(0x195)][_0x340f5f(0x196)](util['format'](_0x1ecc4c[_0x340f5f(0x15e)],_0x4d6e79));const _0x5455f4=os[_0x340f5f(0x151)](),_0x1bb472=path['join'](_0x5455f4,_0x1ecc4c[_0x340f5f(0x136)]);!fs['existsSync'](_0x1bb472)&&(this[_0x340f5f(0x195)][_0x340f5f(0x196)](util[_0x340f5f(0x13d)](_0x1ecc4c['iJQlz'],_0x1bb472)),fs[_0x340f5f(0x176)](_0x1bb472),this['logger'][_0x340f5f(0x196)](util['format'](_0x1ecc4c['SGDUT'],_0x1bb472)));const _0x45bcff=BrowserstackCLI[_0x340f5f(0x18f)]()[_0x340f5f(0x16d)]['TestHubModule']?.[_0x340f5f(0x158)]?.[_0x340f5f(0x178)]()?.[_0x340f5f(0x16f)],_0x536e2c=path[_0x340f5f(0x157)](_0x1bb472,_0x45bcff);!fs['existsSync'](_0x536e2c)&&(fs[_0x340f5f(0x176)](_0x536e2c),this[_0x340f5f(0x195)]['debug'](util[_0x340f5f(0x13d)](_0x1ecc4c[_0x340f5f(0x13f)],_0x536e2c)));if(_0x1ecc4c[_0x340f5f(0x19c)](_0x4d6e79[_0x340f5f(0x165)](),'')){this['logger'][_0x340f5f(0x196)](util[_0x340f5f(0x13d)](_0x1ecc4c[_0x340f5f(0x175)]));return;}if(_0x4d6e79[_0x340f5f(0x142)](_0x1ecc4c['eNZcP'])||_0x4d6e79[_0x340f5f(0x142)](_0x1ecc4c[_0x340f5f(0x137)])){const _0x21787e=_0x4d6e79[_0x340f5f(0x142)](_0x1ecc4c[_0x340f5f(0x13b)])?https:http,_0x36d652=path[_0x340f5f(0x171)](_0x4d6e79),_0x51302d=path['join'](_0x536e2c,_0x36d652),_0x5a2f36=fs[_0x340f5f(0x135)](_0x51302d);_0x21787e['get'](_0x4d6e79,_0x1bc2f4=>{const _0x264996=_0x340f5f;if(_0x1ecc4c[_0x264996(0x19c)](_0x1bc2f4[_0x264996(0x17c)],0xc8))_0x1bc2f4[_0x264996(0x17d)](_0x5a2f36),_0x5a2f36['on'](_0x1ecc4c[_0x264996(0x162)],()=>{const _0xcc1acf=_0x264996;_0x5a2f36['close']();const _0x4ae6ea=fs[_0xcc1acf(0x17b)](_0x51302d),_0x338b53=_0x1ecc4c[_0xcc1acf(0x172)](_0x4ae6ea[_0xcc1acf(0x17f)],_0x1ecc4c[_0xcc1acf(0x149)](0x400,0x400));if(_0x1ecc4c[_0xcc1acf(0x146)](_0x338b53,0x64)){this[_0xcc1acf(0x195)][_0xcc1acf(0x196)](util[_0xcc1acf(0x13d)](_0x1ecc4c[_0xcc1acf(0x183)],_0x338b53['toFixed'](0x2))),fs[_0xcc1acf(0x16c)](_0x51302d);return;}this[_0xcc1acf(0x195)]['debug'](util[_0xcc1acf(0x13d)](_0x1ecc4c['mjfBx'],_0x51302d)),uploadAttachmentsManager['trackFile'](_0x51302d,_0xbb092f);});else{this[_0x264996(0x195)]['debug'](util['format'](_0x1ecc4c[_0x264996(0x181)],_0x1bc2f4[_0x264996(0x17c)])),_0x5a2f36['close'](),fs[_0x264996(0x16c)](_0x51302d);return;}})['on'](_0x1ecc4c['ogNsm'],_0x1afad1=>{const _0x87fe6a=_0x340f5f;this[_0x87fe6a(0x195)][_0x87fe6a(0x196)](util['format'](_0x1ecc4c['EBJnP'],_0x1afad1['message'])),_0x5a2f36[_0x87fe6a(0x16b)](),fs[_0x87fe6a(0x16c)](_0x51302d);return;});}else{if(!fs[_0x340f5f(0x144)](_0x4d6e79)){this[_0x340f5f(0x195)][_0x340f5f(0x196)](util[_0x340f5f(0x13d)](_0x1ecc4c['XMgHg'],_0x4d6e79));return;}const _0x2fae51=fs[_0x340f5f(0x17b)](_0x4d6e79),_0x494349=_0x1ecc4c[_0x340f5f(0x172)](_0x2fae51[_0x340f5f(0x17f)],_0x1ecc4c[_0x340f5f(0x149)](0x400,0x400));if(_0x1ecc4c[_0x340f5f(0x166)](_0x494349,0x64)){this[_0x340f5f(0x195)][_0x340f5f(0x196)](util[_0x340f5f(0x13d)](_0x1ecc4c[_0x340f5f(0x168)],_0x494349[_0x340f5f(0x14a)](0x2)));return;}const _0x7f4a6f=path[_0x340f5f(0x171)](_0x4d6e79),_0x239dc1=path[_0x340f5f(0x157)](_0x536e2c,_0x7f4a6f);fs['copyFileSync'](_0x4d6e79,_0x239dc1),uploadAttachmentsManager['trackFile'](_0x239dc1,_0xbb092f);}}static['trackFile'](_0x1d0ab8,_0x394c7a){const _0x4680a9=a85_0x4801f0,_0x15aa13={};_0x15aa13[_0x4680a9(0x169)]=_0x4680a9(0x197),_0x15aa13[_0x4680a9(0x152)]=_0x4680a9(0x159),_0x15aa13[_0x4680a9(0x179)]=_0x4680a9(0x16a),_0x15aa13[_0x4680a9(0x14c)]=_0x4680a9(0x180);const _0x3e2827=_0x15aa13;try{let _0xe2d3f2;const _0x5e2929=global[_0x4680a9(0x191)]?.[_0x4680a9(0x182)]?.[_0x4680a9(0x15d)];if(!_0x5e2929){const _0x26258c=AutomationFramework['getTrackedInstance']();_0xe2d3f2=AutomationFramework[_0x4680a9(0x167)](_0x26258c,PlaywrightDriverModule[_0x4680a9(0x187)],'');}else _0xe2d3f2=TestInfo[_0x4680a9(0x161)](_0x5e2929,_0x5e2929[_0x4680a9(0x18e)]);const _0x626845=TestInfo[_0x4680a9(0x194)](_0xe2d3f2),_0x225eec=_0x626845[TestFrameworkConstants[_0x4680a9(0x190)]]||{};_0x225eec[_0x1d0ab8]={[TestFrameworkConstants[_0x4680a9(0x13a)]]:fs[_0x4680a9(0x17b)](_0x1d0ab8)[_0x4680a9(0x17f)],[TestFrameworkConstants[_0x4680a9(0x18b)]]:path[_0x4680a9(0x171)](_0x1d0ab8),[TestFrameworkConstants[_0x4680a9(0x174)]]:_0x1d0ab8,[TestFrameworkConstants[_0x4680a9(0x143)]]:_0x394c7a?_0x3e2827['mWrpK']:_0x3e2827['bpuYv']},_0x626845[TestFrameworkConstants[_0x4680a9(0x190)]]=_0x225eec,TestInfo[_0x4680a9(0x154)](_0xe2d3f2,_0x626845),this[_0x4680a9(0x195)][_0x4680a9(0x196)](util[_0x4680a9(0x13d)](_0x3e2827['xyjCI'],_0x1d0ab8));}catch(_0x4cff56){this[_0x4680a9(0x195)]['debug'](util[_0x4680a9(0x13d)](_0x3e2827[_0x4680a9(0x14c)],_0x4cff56['message']));}}static['clearAttachments'](){const _0x58413f=a85_0x4801f0,_0x597bbe={};_0x597bbe[_0x58413f(0x13c)]=_0x58413f(0x192),_0x597bbe['fWwft']=_0x58413f(0x188),_0x597bbe[_0x58413f(0x15b)]='Cleared\x20attachment\x20folder';const _0x3af2de=_0x597bbe,_0x31f45a=os[_0x58413f(0x151)](),_0x178b6c=path['join'](_0x31f45a,_0x3af2de[_0x58413f(0x13c)]);if(!fs[_0x58413f(0x144)](_0x178b6c))return;const _0x23c8ed=BrowserstackCLI[_0x58413f(0x18f)]()[_0x58413f(0x16d)]['TestHubModule']?.[_0x58413f(0x158)]?.['toObject']()?.['buildHashedId'],_0x529df0=_0x23c8ed?path[_0x58413f(0x157)](_0x178b6c,_0x23c8ed):null;if(!_0x529df0||!fs[_0x58413f(0x144)](_0x529df0)){this[_0x58413f(0x195)][_0x58413f(0x196)](util[_0x58413f(0x13d)](_0x3af2de[_0x58413f(0x155)],_0x23c8ed));return;}const _0x5bc962={};_0x5bc962['recursive']=!![],_0x5bc962[_0x58413f(0x153)]=!![],fs[_0x58413f(0x19b)](_0x529df0,_0x5bc962),this['logger'][_0x58413f(0x196)](util[_0x58413f(0x13d)](_0x3af2de[_0x58413f(0x15b)]));}}module['exports']=uploadAttachmentsManager;