const a80_0x2dc667=a80_0x6785;function a80_0x56a6(){const _0x3d4a0c=['666990KnhGfv','close','startsWith','getInstance','statusCode','BOFNr','unlinkSync','join','Created\x20.browserstack\x20folder\x20at:\x20%s','8KrScuS','util','iTJDH','mkdirSync','TestHubModule','clearAttachments','toFixed','GtDkB','YAHGO','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','lPjZv','finish','LjVSL','1527890FnwZcc','basename','./TestInfo','message','getTrackedInstance','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','GimAY','xUozu','https','znSZN','84uFBKuN','modules','KEY_TEST_ATTACHMENTS','1089567VzaiQI','rcNaz','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','logger','PhwgQ','QOXSB','5aiRAjp','napaj','AJTsl','XeeoH','existsSync','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','testhubConfig','recursive','16pHsAHb','fGnAu','2881ozqDEz','640601FbCakn','BuildLevel','34cvjkcw','EyRtZ','./framework/automationFramework','http://','https://','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','statSync','NGQOA','22kTiKGc','error','Cleared\x20attachment\x20folder','exports','DCiEg','trackFile','atEFG','force','uploadAttachmentsManager','toObject','KEY_FILE_PATH','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','size','AlToU','./browserstackCLI','OsYGK','xwfRF','./framework/constants/testFrameworkConstants','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','bfuWQ','2514954XdKvHf','KEY_FILE_NAME','ckzyY','format','buildHashedId','get','.browserstack','debug','http','./modules/playwrightDriverModule','262737YaLvEk','homedir','HPRjS','path','KEY_FILE_LEVEL','getTestDetails','foJQJ','KEY_FILE_SIZE','cfsOI','WhVvx','getState'];a80_0x56a6=function(){return _0x3d4a0c;};return a80_0x56a6();}(function(_0x37e499,_0xab2b09){const _0xb9d6c3=a80_0x6785,_0x3657b4=_0x37e499();while(!![]){try{const _0x2a6d31=-parseInt(_0xb9d6c3(0x13e))/0x1*(-parseInt(_0xb9d6c3(0x141))/0x2)+parseInt(_0xb9d6c3(0x100))/0x3*(parseInt(_0xb9d6c3(0x13c))/0x4)+-parseInt(_0xb9d6c3(0x134))/0x5*(-parseInt(_0xb9d6c3(0xf6))/0x6)+-parseInt(_0xb9d6c3(0x121))/0x7+parseInt(_0xb9d6c3(0x114))/0x8*(parseInt(_0xb9d6c3(0x12e))/0x9)+parseInt(_0xb9d6c3(0x10b))/0xa*(-parseInt(_0xb9d6c3(0x149))/0xb)+parseInt(_0xb9d6c3(0x12b))/0xc*(-parseInt(_0xb9d6c3(0x13f))/0xd);if(_0x2a6d31===_0xab2b09)break;else _0x3657b4['push'](_0x3657b4['shift']());}catch(_0x9df809){_0x3657b4['push'](_0x3657b4['shift']());}}}(a80_0x56a6,0x3b4dc));const os=require('os'),fs=require('fs'),path=require(a80_0x2dc667(0x103)),util=require(a80_0x2dc667(0x115)),BrowserstackCLI=require(a80_0x2dc667(0xf0)),https=require(a80_0x2dc667(0x129)),http=require(a80_0x2dc667(0xfe)),AutomationFramework=require(a80_0x2dc667(0x143)),PlaywrightDriverModule=require(a80_0x2dc667(0xff)),TestInfo=require(a80_0x2dc667(0x123)),TestFrameworkConstants=require(a80_0x2dc667(0xf3)),{createClassLogger}=require('../../helpers/classLogger.js');class uploadAttachmentsManager{static ['logger']=createClassLogger(a80_0x2dc667(0xea));static['uploadAttachments'](_0x33a091,_0x44aea5=![]){const _0x9c3178=a80_0x2dc667,_0x508908={};_0x508908['WhVvx']=function(_0x485470,_0x2f1a50){return _0x485470/_0x2f1a50;},_0x508908[_0x9c3178(0x133)]=function(_0x2fb926,_0x56d6b7){return _0x2fb926*_0x56d6b7;},_0x508908[_0x9c3178(0x128)]=function(_0xba8b28,_0xe215f5){return _0xba8b28>_0xe215f5;},_0x508908[_0x9c3178(0xf5)]=_0x9c3178(0x130),_0x508908[_0x9c3178(0x135)]='File\x20downloaded\x20to:\x20%s',_0x508908[_0x9c3178(0x11c)]=function(_0x13174b,_0x41923f){return _0x13174b===_0x41923f;},_0x508908['AJTsl']=_0x9c3178(0x11f),_0x508908[_0x9c3178(0x120)]='Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload',_0x508908[_0x9c3178(0x116)]=_0x9c3178(0x126),_0x508908[_0x9c3178(0xef)]='Attachment\x20recevied\x20for\x20path:\x20%s',_0x508908[_0x9c3178(0xf1)]=_0x9c3178(0xfc),_0x508908[_0x9c3178(0x13d)]='.browserstack\x20folder\x20not\x20found\x20at:\x20%s',_0x508908[_0x9c3178(0x132)]=_0x9c3178(0x113),_0x508908['NGQOA']='Created\x20folder:\x20%s',_0x508908['ECmIo']=_0x9c3178(0xed),_0x508908[_0x9c3178(0xf8)]=_0x9c3178(0x145),_0x508908[_0x9c3178(0x11b)]=_0x9c3178(0x144),_0x508908[_0x9c3178(0x102)]=_0x9c3178(0x14a),_0x508908[_0x9c3178(0x106)]=_0x9c3178(0xf4),_0x508908[_0x9c3178(0x108)]=function(_0x18cb49,_0x1401cc){return _0x18cb49>_0x1401cc;},_0x508908[_0x9c3178(0xf2)]=_0x9c3178(0x139);const _0x5a1a4=_0x508908;this[_0x9c3178(0x131)][_0x9c3178(0xfd)](util[_0x9c3178(0xf9)](_0x5a1a4['AlToU'],_0x33a091));const _0x16b850=os[_0x9c3178(0x101)](),_0x462526=path[_0x9c3178(0x112)](_0x16b850,_0x5a1a4['OsYGK']);!fs[_0x9c3178(0x138)](_0x462526)&&(this['logger']['debug'](util[_0x9c3178(0xf9)](_0x5a1a4['fGnAu'],_0x462526)),fs[_0x9c3178(0x117)](_0x462526),this[_0x9c3178(0x131)][_0x9c3178(0xfd)](util[_0x9c3178(0xf9)](_0x5a1a4['PhwgQ'],_0x462526)));const _0x27be4d=BrowserstackCLI[_0x9c3178(0x10e)]()[_0x9c3178(0x12c)][_0x9c3178(0x118)]?.[_0x9c3178(0x13a)]?.[_0x9c3178(0xeb)]()?.['buildHashedId'],_0x168cfe=path[_0x9c3178(0x112)](_0x462526,_0x27be4d);!fs['existsSync'](_0x168cfe)&&(fs[_0x9c3178(0x117)](_0x168cfe),this[_0x9c3178(0x131)][_0x9c3178(0xfd)](util[_0x9c3178(0xf9)](_0x5a1a4[_0x9c3178(0x148)],_0x168cfe)));if(_0x5a1a4[_0x9c3178(0x11c)](_0x33a091['trim'](),'')){this['logger'][_0x9c3178(0xfd)](util[_0x9c3178(0xf9)](_0x5a1a4['ECmIo']));return;}if(_0x33a091[_0x9c3178(0x10d)](_0x5a1a4[_0x9c3178(0xf8)])||_0x33a091['startsWith'](_0x5a1a4['GtDkB'])){const _0x4bb567=_0x33a091[_0x9c3178(0x10d)](_0x5a1a4['ckzyY'])?https:http,_0x57094e=path[_0x9c3178(0x122)](_0x33a091),_0x1dca39=path[_0x9c3178(0x112)](_0x168cfe,_0x57094e),_0x589948=fs['createWriteStream'](_0x1dca39);_0x4bb567[_0x9c3178(0xfb)](_0x33a091,_0x5d8676=>{const _0x2e5e0d=_0x9c3178,_0x45741b={'znSZN':function(_0x3a38c8,_0x29db1f){const _0x4136eb=a80_0x6785;return _0x5a1a4[_0x4136eb(0x109)](_0x3a38c8,_0x29db1f);},'rcNaz':function(_0x114023,_0x1b0645){const _0x54dfd5=a80_0x6785;return _0x5a1a4[_0x54dfd5(0x133)](_0x114023,_0x1b0645);},'WKaRZ':function(_0x2832c6,_0x23df44){return _0x5a1a4['xUozu'](_0x2832c6,_0x23df44);},'GimAY':_0x5a1a4['bfuWQ'],'RydoX':_0x5a1a4[_0x2e5e0d(0x135)]};if(_0x5a1a4[_0x2e5e0d(0x11c)](_0x5d8676['statusCode'],0xc8))_0x5d8676['pipe'](_0x589948),_0x589948['on'](_0x5a1a4[_0x2e5e0d(0x136)],()=>{const _0x503e37=_0x2e5e0d;_0x589948['close']();const _0xf80c29=fs['statSync'](_0x1dca39),_0x433cbe=_0x45741b[_0x503e37(0x12a)](_0xf80c29[_0x503e37(0xee)],_0x45741b[_0x503e37(0x12f)](0x400,0x400));if(_0x45741b['WKaRZ'](_0x433cbe,0x64)){this[_0x503e37(0x131)]['debug'](util[_0x503e37(0xf9)](_0x45741b[_0x503e37(0x127)],_0x433cbe[_0x503e37(0x11a)](0x2))),fs['unlinkSync'](_0x1dca39);return;}this['logger'][_0x503e37(0xfd)](util[_0x503e37(0xf9)](_0x45741b['RydoX'],_0x1dca39)),uploadAttachmentsManager[_0x503e37(0x14e)](_0x1dca39,_0x44aea5);});else{this[_0x2e5e0d(0x131)][_0x2e5e0d(0xfd)](util[_0x2e5e0d(0xf9)](_0x5a1a4['LjVSL'],_0x5d8676[_0x2e5e0d(0x10f)])),_0x589948[_0x2e5e0d(0x10c)](),fs[_0x2e5e0d(0x111)](_0x1dca39);return;}})['on'](_0x5a1a4[_0x9c3178(0x102)],_0x301831=>{const _0x424476=_0x9c3178;this[_0x424476(0x131)][_0x424476(0xfd)](util[_0x424476(0xf9)](_0x5a1a4['iTJDH'],_0x301831[_0x424476(0x124)])),_0x589948[_0x424476(0x10c)](),fs['unlinkSync'](_0x1dca39);return;});}else{if(!fs[_0x9c3178(0x138)](_0x33a091)){this['logger'][_0x9c3178(0xfd)](util[_0x9c3178(0xf9)](_0x5a1a4['foJQJ'],_0x33a091));return;}const _0xbb5cd1=fs[_0x9c3178(0x147)](_0x33a091),_0x25c281=_0x5a1a4[_0x9c3178(0x109)](_0xbb5cd1[_0x9c3178(0xee)],_0x5a1a4['QOXSB'](0x400,0x400));if(_0x5a1a4[_0x9c3178(0x108)](_0x25c281,0x64)){this[_0x9c3178(0x131)]['debug'](util[_0x9c3178(0xf9)](_0x5a1a4[_0x9c3178(0xf2)],_0x25c281[_0x9c3178(0x11a)](0x2)));return;}const _0x5239f3=path[_0x9c3178(0x122)](_0x33a091),_0x572ab0=path[_0x9c3178(0x112)](_0x168cfe,_0x5239f3);fs['copyFileSync'](_0x33a091,_0x572ab0),uploadAttachmentsManager['trackFile'](_0x572ab0,_0x44aea5);}}static[a80_0x2dc667(0x14e)](_0x57ce8d,_0x2f0005){const _0x138d3f=a80_0x2dc667,_0xff229={};_0xff229[_0x138d3f(0x142)]=_0x138d3f(0x140),_0xff229[_0x138d3f(0x14f)]='TestLevel',_0xff229[_0x138d3f(0x11e)]=_0x138d3f(0x146),_0xff229['wvhyu']='Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload';const _0x8ad6ca=_0xff229;try{const _0x31486c=AutomationFramework[_0x138d3f(0x125)](),_0x1ae0cc=AutomationFramework[_0x138d3f(0x10a)](_0x31486c,PlaywrightDriverModule['KEY_TEST_ID'],''),_0x5ae1aa=TestInfo[_0x138d3f(0x105)](_0x1ae0cc),_0x4b8d99=_0x5ae1aa[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{};_0x4b8d99[_0x57ce8d]={[TestFrameworkConstants[_0x138d3f(0x107)]]:fs[_0x138d3f(0x147)](_0x57ce8d)[_0x138d3f(0xee)],[TestFrameworkConstants[_0x138d3f(0xf7)]]:path[_0x138d3f(0x122)](_0x57ce8d),[TestFrameworkConstants[_0x138d3f(0xec)]]:_0x57ce8d,[TestFrameworkConstants[_0x138d3f(0x104)]]:_0x2f0005?_0x8ad6ca[_0x138d3f(0x142)]:_0x8ad6ca[_0x138d3f(0x14f)]},_0x5ae1aa[TestFrameworkConstants[_0x138d3f(0x12d)]]=_0x4b8d99,TestInfo['setTestDetails'](_0x1ae0cc,_0x5ae1aa),this[_0x138d3f(0x131)]['debug'](util['format'](_0x8ad6ca[_0x138d3f(0x11e)],_0x57ce8d));}catch(_0x1b5eb0){this[_0x138d3f(0x131)][_0x138d3f(0xfd)](util[_0x138d3f(0xf9)](_0x8ad6ca['wvhyu'],_0x1b5eb0[_0x138d3f(0x124)]));}}static[a80_0x2dc667(0x119)](){const _0xd52073=a80_0x2dc667,_0x502eb0={};_0x502eb0[_0xd52073(0x137)]=_0xd52073(0xfc),_0x502eb0[_0xd52073(0x110)]=_0xd52073(0x11d),_0x502eb0['DCiEg']=_0xd52073(0x14b);const _0x5317ee=_0x502eb0,_0x15d9ad=os['homedir'](),_0x36da8d=path[_0xd52073(0x112)](_0x15d9ad,_0x5317ee['XeeoH']);if(!fs[_0xd52073(0x138)](_0x36da8d))return;const _0x1ce355=BrowserstackCLI[_0xd52073(0x10e)]()[_0xd52073(0x12c)][_0xd52073(0x118)]?.[_0xd52073(0x13a)]?.[_0xd52073(0xeb)]()?.[_0xd52073(0xfa)],_0x5e6fba=_0x1ce355?path[_0xd52073(0x112)](_0x36da8d,_0x1ce355):null;if(!_0x5e6fba||!fs['existsSync'](_0x5e6fba)){this[_0xd52073(0x131)][_0xd52073(0xfd)](util[_0xd52073(0xf9)](_0x5317ee['BOFNr'],_0x1ce355));return;}const _0x2a669a={};_0x2a669a[_0xd52073(0x13b)]=!![],_0x2a669a[_0xd52073(0xe9)]=!![],fs['rmSync'](_0x5e6fba,_0x2a669a),this['logger'][_0xd52073(0xfd)](util[_0xd52073(0xf9)](_0x5317ee[_0xd52073(0x14d)]));}}function a80_0x6785(_0x1436e4,_0x23e4be){const _0x56a64e=a80_0x56a6();return a80_0x6785=function(_0x67858c,_0x47697d){_0x67858c=_0x67858c-0xe9;let _0x327f9c=_0x56a64e[_0x67858c];return _0x327f9c;},a80_0x6785(_0x1436e4,_0x23e4be);}module[a80_0x2dc667(0x14c)]=uploadAttachmentsManager;