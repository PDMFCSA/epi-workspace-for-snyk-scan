const a82_0x6e1b75=a82_0x47dd;function a82_0x500b(){const _0x462a2b=['2220612jtxUmj','QfHaz','jZmvS','../../helpers/classLogger.js','trackFile','http://','./modules/playwrightDriverModule','1709140NvBaeY','RwqQk','./TestInfo','uRGco','currentTest','Attachment\x20recevied\x20for\x20path:\x20%s','pbtNU','uyaph','KEY_FILE_PATH','fTsyF','homedir','./browserstackCLI','clearAttachments','DHxRS','579038mqeZKq','startsWith','statSync','logger','CaWKF','uploadAttachmentsManager','eLXje','AUNcX','KEY_FILE_NAME','testhubConfig','dPbVP','qLHPX','KEY_TEST_ATTACHMENTS','statusCode','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','qccLi','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','format','exports','getInstance','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','join','57582odpLfp','buildHashedId','https','force','Sudqa','TestHubModule','path','http','setTestDetails','KEY_FILE_LEVEL','343ToMmug','size','toObject','maSYB','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','message','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','KEY_FILE_SIZE','basename','qRDwK','getTestDetails','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','modules','https://','copyFileSync','TyTOM','vfccw','toFixed','unlinkSync','.browserstack','4203376RivDdt','debug','uHupM','File\x20downloaded\x20to:\x20%s','vPeYD','util','AqBSu','2034280zYkQzJ','ZdBrW','Cleared\x20attachment\x20folder','retry','KfulO','mkdirSync','trim','553402jZdPVw','khRjh','DtBDe','BuildLevel','rmSync','existsSync','EjBHT','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','ODujP'];a82_0x500b=function(){return _0x462a2b;};return a82_0x500b();}(function(_0x32108f,_0x593886){const _0x3ed58a=a82_0x47dd,_0x4c4567=_0x32108f();while(!![]){try{const _0x286cef=parseInt(_0x3ed58a(0xe8))/0x1+-parseInt(_0x3ed58a(0x106))/0x2+-parseInt(_0x3ed58a(0xf1))/0x3+-parseInt(_0x3ed58a(0xf8))/0x4+parseInt(_0x3ed58a(0x141))/0x5+-parseInt(_0x3ed58a(0x11c))/0x6*(-parseInt(_0x3ed58a(0x126))/0x7)+parseInt(_0x3ed58a(0x13a))/0x8;if(_0x286cef===_0x593886)break;else _0x4c4567['push'](_0x4c4567['shift']());}catch(_0x17f826){_0x4c4567['push'](_0x4c4567['shift']());}}}(a82_0x500b,0x79ced));const os=require('os'),fs=require('fs'),path=require(a82_0x6e1b75(0x122)),util=require(a82_0x6e1b75(0x13f)),BrowserstackCLI=require(a82_0x6e1b75(0x103)),https=require(a82_0x6e1b75(0x11e)),http=require(a82_0x6e1b75(0x123)),AutomationFramework=require('./framework/automationFramework'),PlaywrightDriverModule=require(a82_0x6e1b75(0xf7)),TestInfo=require(a82_0x6e1b75(0xfa)),TestFrameworkConstants=require('./framework/constants/testFrameworkConstants'),{createClassLogger}=require(a82_0x6e1b75(0xf4));class uploadAttachmentsManager{static [a82_0x6e1b75(0x109)]=createClassLogger(a82_0x6e1b75(0x10b));static['uploadAttachments'](_0x2104e2,_0x503782=![]){const _0x1a6c72=a82_0x6e1b75,_0x7f4455={};_0x7f4455[_0x1a6c72(0x10a)]=function(_0x4544ed,_0x348931){return _0x4544ed/_0x348931;},_0x7f4455[_0x1a6c72(0x115)]=function(_0xa4e7e7,_0x38ce){return _0xa4e7e7*_0x38ce;},_0x7f4455[_0x1a6c72(0x10d)]=function(_0x3799c2,_0x4341ab){return _0x3799c2>_0x4341ab;},_0x7f4455[_0x1a6c72(0xea)]=_0x1a6c72(0xef),_0x7f4455[_0x1a6c72(0xf2)]=_0x1a6c72(0x13d),_0x7f4455[_0x1a6c72(0x13e)]=function(_0x5d05c4,_0x1765cd){return _0x5d05c4===_0x1765cd;},_0x7f4455['qpnaZ']='finish',_0x7f4455['JJFnm']=_0x1a6c72(0x114),_0x7f4455[_0x1a6c72(0x105)]=_0x1a6c72(0x116),_0x7f4455[_0x1a6c72(0xee)]=_0x1a6c72(0xfd),_0x7f4455[_0x1a6c72(0x142)]=_0x1a6c72(0x139),_0x7f4455['ODujP']=_0x1a6c72(0x131),_0x7f4455['vfccw']='Created\x20.browserstack\x20folder\x20at:\x20%s',_0x7f4455[_0x1a6c72(0xfe)]='Created\x20folder:\x20%s',_0x7f4455[_0x1a6c72(0xfb)]='Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.',_0x7f4455['AqBSu']=_0x1a6c72(0x133),_0x7f4455[_0x1a6c72(0x12f)]=_0x1a6c72(0xf6),_0x7f4455[_0x1a6c72(0x13c)]='error',_0x7f4455['eLXje']=_0x1a6c72(0x12a),_0x7f4455[_0x1a6c72(0xff)]=function(_0x1758e0,_0x1b279b){return _0x1758e0>_0x1b279b;},_0x7f4455[_0x1a6c72(0x120)]=_0x1a6c72(0x12c);const _0x9484e3=_0x7f4455;this[_0x1a6c72(0x109)][_0x1a6c72(0x13b)](util[_0x1a6c72(0x117)](_0x9484e3[_0x1a6c72(0xee)],_0x2104e2));const _0x4a763b=os['homedir'](),_0x2d16d6=path['join'](_0x4a763b,_0x9484e3[_0x1a6c72(0x142)]);!fs[_0x1a6c72(0xed)](_0x2d16d6)&&(this['logger']['debug'](util[_0x1a6c72(0x117)](_0x9484e3[_0x1a6c72(0xf0)],_0x2d16d6)),fs['mkdirSync'](_0x2d16d6),this['logger'][_0x1a6c72(0x13b)](util['format'](_0x9484e3[_0x1a6c72(0x136)],_0x2d16d6)));const _0x3e04d6=BrowserstackCLI[_0x1a6c72(0x119)]()['modules'][_0x1a6c72(0x121)]?.['testhubConfig']?.['toObject']()?.[_0x1a6c72(0x11d)],_0x90e148=path[_0x1a6c72(0x11b)](_0x2d16d6,_0x3e04d6);!fs[_0x1a6c72(0xed)](_0x90e148)&&(fs[_0x1a6c72(0xe6)](_0x90e148),this['logger'][_0x1a6c72(0x13b)](util[_0x1a6c72(0x117)](_0x9484e3[_0x1a6c72(0xfe)],_0x90e148)));if(_0x9484e3[_0x1a6c72(0x13e)](_0x2104e2[_0x1a6c72(0xe7)](),'')){this['logger'][_0x1a6c72(0x13b)](util[_0x1a6c72(0x117)](_0x9484e3[_0x1a6c72(0xfb)]));return;}if(_0x2104e2[_0x1a6c72(0x107)](_0x9484e3['AqBSu'])||_0x2104e2[_0x1a6c72(0x107)](_0x9484e3['qRDwK'])){const _0xac71f3=_0x2104e2[_0x1a6c72(0x107)](_0x9484e3[_0x1a6c72(0x140)])?https:http,_0x3faec7=path[_0x1a6c72(0x12e)](_0x2104e2),_0x18fda=path['join'](_0x90e148,_0x3faec7),_0x37652a=fs['createWriteStream'](_0x18fda);_0xac71f3['get'](_0x2104e2,_0xc77d32=>{const _0x5c8b20=_0x1a6c72,_0x296117={'nMkIc':function(_0x108429,_0xfc6fc6){const _0x3435c4=a82_0x47dd;return _0x9484e3[_0x3435c4(0x10a)](_0x108429,_0xfc6fc6);},'TyTOM':function(_0x302e3f,_0x5ed604){const _0xd92504=a82_0x47dd;return _0x9484e3[_0xd92504(0x115)](_0x302e3f,_0x5ed604);},'AGazy':function(_0x1d9123,_0x1bffc3){const _0x45e7cc=a82_0x47dd;return _0x9484e3[_0x45e7cc(0x10d)](_0x1d9123,_0x1bffc3);},'djuOW':_0x9484e3[_0x5c8b20(0xea)],'khRjh':_0x9484e3[_0x5c8b20(0xf2)]};if(_0x9484e3[_0x5c8b20(0x13e)](_0xc77d32[_0x5c8b20(0x113)],0xc8))_0xc77d32['pipe'](_0x37652a),_0x37652a['on'](_0x9484e3['qpnaZ'],()=>{const _0x4c1bf8=_0x5c8b20;_0x37652a['close']();const _0x3984dc=fs[_0x4c1bf8(0x108)](_0x18fda),_0x232eb4=_0x296117['nMkIc'](_0x3984dc[_0x4c1bf8(0x127)],_0x296117[_0x4c1bf8(0x135)](0x400,0x400));if(_0x296117['AGazy'](_0x232eb4,0x64)){this[_0x4c1bf8(0x109)]['debug'](util[_0x4c1bf8(0x117)](_0x296117['djuOW'],_0x232eb4[_0x4c1bf8(0x137)](0x2))),fs[_0x4c1bf8(0x138)](_0x18fda);return;}this[_0x4c1bf8(0x109)][_0x4c1bf8(0x13b)](util['format'](_0x296117[_0x4c1bf8(0xe9)],_0x18fda)),uploadAttachmentsManager[_0x4c1bf8(0xf5)](_0x18fda,_0x503782);});else{this[_0x5c8b20(0x109)][_0x5c8b20(0x13b)](util['format'](_0x9484e3['JJFnm'],_0xc77d32[_0x5c8b20(0x113)])),_0x37652a['close'](),fs[_0x5c8b20(0x138)](_0x18fda);return;}})['on'](_0x9484e3[_0x1a6c72(0x13c)],_0x2dda1d=>{const _0x3b71fa=_0x1a6c72;this[_0x3b71fa(0x109)][_0x3b71fa(0x13b)](util['format'](_0x9484e3[_0x3b71fa(0x105)],_0x2dda1d[_0x3b71fa(0x12b)])),_0x37652a['close'](),fs[_0x3b71fa(0x138)](_0x18fda);return;});}else{if(!fs[_0x1a6c72(0xed)](_0x2104e2)){this[_0x1a6c72(0x109)][_0x1a6c72(0x13b)](util[_0x1a6c72(0x117)](_0x9484e3[_0x1a6c72(0x10c)],_0x2104e2));return;}const _0x231a33=fs[_0x1a6c72(0x108)](_0x2104e2),_0x1cb7be=_0x9484e3[_0x1a6c72(0x10a)](_0x231a33[_0x1a6c72(0x127)],_0x9484e3['qccLi'](0x400,0x400));if(_0x9484e3[_0x1a6c72(0xff)](_0x1cb7be,0x64)){this[_0x1a6c72(0x109)][_0x1a6c72(0x13b)](util['format'](_0x9484e3[_0x1a6c72(0x120)],_0x1cb7be[_0x1a6c72(0x137)](0x2)));return;}const _0x43bb97=path['basename'](_0x2104e2),_0x496cae=path[_0x1a6c72(0x11b)](_0x90e148,_0x43bb97);fs[_0x1a6c72(0x134)](_0x2104e2,_0x496cae),uploadAttachmentsManager[_0x1a6c72(0xf5)](_0x496cae,_0x503782);}}static[a82_0x6e1b75(0xf5)](_0x29f5e6,_0x1c8bd5){const _0x435d72=a82_0x6e1b75,_0x5355aa={};_0x5355aa['fTsyF']=_0x435d72(0xeb),_0x5355aa['KfulO']='TestLevel',_0x5355aa['qLHPX']='Attachment\x20file\x20tracked\x20for\x20upload:\x20%s',_0x5355aa[_0x435d72(0x110)]=_0x435d72(0x11a);const _0x524899=_0x5355aa;try{const _0x257538=global['__workerDetails']?.[_0x435d72(0xfc)]?.['testInfo'],_0x55348e=TestInfo['getTestIdentifierFromTestInfo'](_0x257538,_0x257538[_0x435d72(0x144)]),_0x3087df=TestInfo[_0x435d72(0x130)](_0x55348e),_0x53c223=_0x3087df[TestFrameworkConstants[_0x435d72(0x112)]]||{};_0x53c223[_0x29f5e6]={[TestFrameworkConstants[_0x435d72(0x12d)]]:fs['statSync'](_0x29f5e6)['size'],[TestFrameworkConstants[_0x435d72(0x10e)]]:path['basename'](_0x29f5e6),[TestFrameworkConstants[_0x435d72(0x100)]]:_0x29f5e6,[TestFrameworkConstants[_0x435d72(0x125)]]:_0x1c8bd5?_0x524899[_0x435d72(0x101)]:_0x524899[_0x435d72(0xe5)]},_0x3087df[TestFrameworkConstants[_0x435d72(0x112)]]=_0x53c223,TestInfo[_0x435d72(0x124)](_0x55348e,_0x3087df),this[_0x435d72(0x109)][_0x435d72(0x13b)](util['format'](_0x524899[_0x435d72(0x111)],_0x29f5e6));}catch(_0x5ad997){this[_0x435d72(0x109)][_0x435d72(0x13b)](util['format'](_0x524899['dPbVP'],_0x5ad997[_0x435d72(0x12b)]));}}static[a82_0x6e1b75(0x104)](){const _0x41862d=a82_0x6e1b75,_0xc13361={};_0xc13361[_0x41862d(0x129)]='.browserstack',_0xc13361[_0x41862d(0xf9)]='No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s',_0xc13361['jZmvS']=_0x41862d(0x143);const _0x497d1e=_0xc13361,_0x362cbc=os[_0x41862d(0x102)](),_0x229a76=path['join'](_0x362cbc,_0x497d1e[_0x41862d(0x129)]);if(!fs['existsSync'](_0x229a76))return;const _0x1c1ff6=BrowserstackCLI[_0x41862d(0x119)]()[_0x41862d(0x132)][_0x41862d(0x121)]?.[_0x41862d(0x10f)]?.[_0x41862d(0x128)]()?.[_0x41862d(0x11d)],_0x5501eb=_0x1c1ff6?path[_0x41862d(0x11b)](_0x229a76,_0x1c1ff6):null;if(!_0x5501eb||!fs[_0x41862d(0xed)](_0x5501eb)){this['logger'][_0x41862d(0x13b)](util[_0x41862d(0x117)](_0x497d1e[_0x41862d(0xf9)],_0x1c1ff6));return;}const _0x1578f4={};_0x1578f4['recursive']=!![],_0x1578f4[_0x41862d(0x11f)]=!![],fs[_0x41862d(0xec)](_0x5501eb,_0x1578f4),this['logger'][_0x41862d(0x13b)](util['format'](_0x497d1e[_0x41862d(0xf3)]));}}function a82_0x47dd(_0x1fc543,_0x246caf){const _0x500bb8=a82_0x500b();return a82_0x47dd=function(_0x47ddc0,_0x3ff78e){_0x47ddc0=_0x47ddc0-0xe5;let _0x553df7=_0x500bb8[_0x47ddc0];return _0x553df7;},a82_0x47dd(_0x1fc543,_0x246caf);}module[a82_0x6e1b75(0x118)]=uploadAttachmentsManager;