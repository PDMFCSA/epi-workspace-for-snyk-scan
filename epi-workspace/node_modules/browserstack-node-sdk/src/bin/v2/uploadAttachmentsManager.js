const a89_0x52c0d9=a89_0x33ea;(function(_0x1e0539,_0x1d028e){const _0x4b5bb9=a89_0x33ea,_0x7fd193=_0x1e0539();while(!![]){try{const _0x5c5992=-parseInt(_0x4b5bb9(0x173))/0x1+parseInt(_0x4b5bb9(0x1a0))/0x2+parseInt(_0x4b5bb9(0x181))/0x3*(parseInt(_0x4b5bb9(0x170))/0x4)+parseInt(_0x4b5bb9(0x177))/0x5+-parseInt(_0x4b5bb9(0x144))/0x6+parseInt(_0x4b5bb9(0x190))/0x7+-parseInt(_0x4b5bb9(0x167))/0x8;if(_0x5c5992===_0x1d028e)break;else _0x7fd193['push'](_0x7fd193['shift']());}catch(_0x15807e){_0x7fd193['push'](_0x7fd193['shift']());}}}(a89_0x3e5a,0xd3298));function a89_0x33ea(_0x36b0ea,_0x439b94){const _0x3e5a69=a89_0x3e5a();return a89_0x33ea=function(_0x33eabb,_0x1dd471){_0x33eabb=_0x33eabb-0x139;let _0x23eb81=_0x3e5a69[_0x33eabb];return _0x23eb81;},a89_0x33ea(_0x36b0ea,_0x439b94);}const os=require('os'),fs=require('fs'),path=require(a89_0x52c0d9(0x196)),util=require(a89_0x52c0d9(0x13b)),BrowserstackCLI=require(a89_0x52c0d9(0x1b5)),https=require(a89_0x52c0d9(0x19a)),http=require(a89_0x52c0d9(0x1a5)),AutomationFramework=require(a89_0x52c0d9(0x188)),PlaywrightDriverModule=require('./modules/playwrightDriverModule'),TestInfo=require(a89_0x52c0d9(0x151)),TestFrameworkConstants=require(a89_0x52c0d9(0x146)),{createClassLogger}=require(a89_0x52c0d9(0x184));function a89_0x3e5a(){const _0x2a126c=['186795fWfcGx','rZxqq','trackFile:\x20No\x20testId\x20available,\x20cannot\x20track\x20attachment','yGtgS','pipe','trackFile:\x20Jest+Playwright\x20-\x20testId\x20(testIdentifier):\x20','lfqFy','unlinkSync','createWriteStream','TestLevel','1829019nAQiHZ','toObject','rmUMi','../../helpers/classLogger.js','uPiMV','toFixed','KEY_TEST_ATTACHMENTS','./framework/automationFramework','Created\x20.browserstack\x20folder\x20at:\x20%s','startsWith','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','size','AAGVr','TJQHn','force','10976427DiAXsD','DrbjQ','.browserstack','KEY_FILE_LEVEL','getState','KEY_TEST_ID','path','getTestFramework','VrOGq','__workerDetails','https','currentTest','cHfhu','spEPT','ldDPQ','message','2958890ehzGZS','get','mQRKc','cewxL','isRunning','http','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','debug','xpUfV','trackFile:\x20Stored\x20attachment\x20in\x20TestInfo\x20file\x20for\x20testId:\x20','lwBhY','mpTuW','logger','buildHashedId','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','ahtDx','TEST','modules','getTrackedInstance','grOSb','existsSync','./browserstackCLI','uploadAttachmentsManager','jStzg','basename','toLowerCase','jeafx','rGxtL','format','mkdirSync','jest','util','testhubConfig','clearAttachments','__jestCurrentTestIdentifier','MiZlR','finish','name','trackFile:\x20Instance\x20not\x20available,\x20cannot\x20track\x20attachment','wFsLy','5723958iRNYrR','getTestIdentifierFromTestInfo','./framework/constants/testFrameworkConstants','bQZsN','setTestDetails','CYjcH','trackFile:\x20Stored\x20attachment\x20in\x20instance\x20memory\x20for\x20testId:\x20','BvRfp','vEctA','iwFwh','trackFile:\x20TestFramework\x20not\x20available,\x20cannot\x20track\x20attachment','MSPfG','copyFileSync','./TestInfo','lfENu','homedir','statSync','TestHubModule','Cleared\x20attachment\x20folder','KEY_FILE_PATH','KEY_FILE_SIZE','zYHin','getInstance',',\x20filepath:\x20','KEY_FILE_NAME','uploadAttachments','trackFile:\x20Cucumber+Playwright\x20-\x20testId:\x20','http://','Gbpnn','VjgSd','DSIsR','close','join','PVhoL','File\x20downloaded\x20to:\x20%s','7222544PGxhJM','statusCode','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','resolveInstance','getAllData','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','recursive','trackFile','exports','4FrMeJr','ZXAgC','retry','972807vJFUGD','rmSync','kuHfb','trim'];a89_0x3e5a=function(){return _0x2a126c;};return a89_0x3e5a();}class uploadAttachmentsManager{static [a89_0x52c0d9(0x1ac)]=createClassLogger(a89_0x52c0d9(0x1b6));static[a89_0x52c0d9(0x15d)](_0x4d581d,_0x44f6db=![]){const _0x388dee=a89_0x52c0d9,_0x348cd5={};_0x348cd5[_0x388dee(0x17a)]=function(_0x3ca25a,_0x1652cc){return _0x3ca25a/_0x1652cc;},_0x348cd5[_0x388dee(0x191)]=function(_0x4b03ba,_0x300925){return _0x4b03ba*_0x300925;},_0x348cd5[_0x388dee(0x18e)]=function(_0x42fb98,_0x18ee1e){return _0x42fb98>_0x18ee1e;},_0x348cd5[_0x388dee(0x152)]='Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.',_0x348cd5['grOSb']=_0x388dee(0x166),_0x348cd5[_0x388dee(0x1bb)]=function(_0x4085a6,_0x55ba4e){return _0x4085a6===_0x55ba4e;},_0x348cd5['uPiMV']=_0x388dee(0x140),_0x348cd5[_0x388dee(0x17d)]=_0x388dee(0x169),_0x348cd5[_0x388dee(0x14f)]=_0x388dee(0x1a6),_0x348cd5[_0x388dee(0x165)]='Attachment\x20recevied\x20for\x20path:\x20%s',_0x348cd5[_0x388dee(0x14c)]=_0x388dee(0x192),_0x348cd5['htlAw']='.browserstack\x20folder\x20not\x20found\x20at:\x20%s',_0x348cd5['spEPT']=_0x388dee(0x189),_0x348cd5[_0x388dee(0x14d)]='Created\x20folder:\x20%s',_0x348cd5[_0x388dee(0x1ba)]=_0x388dee(0x1ae),_0x348cd5[_0x388dee(0x161)]='https://',_0x348cd5[_0x388dee(0x1a8)]=_0x388dee(0x15f),_0x348cd5[_0x388dee(0x160)]='error',_0x348cd5['ZXAgC']=_0x388dee(0x16c),_0x348cd5['DSIsR']=function(_0x51406f,_0x319274){return _0x51406f>_0x319274;},_0x348cd5[_0x388dee(0x183)]='File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.';const _0x123108=_0x348cd5;this['logger'][_0x388dee(0x1a7)](util[_0x388dee(0x1bc)](_0x123108[_0x388dee(0x165)],_0x4d581d));const _0x25c42f=os[_0x388dee(0x153)](),_0x706997=path[_0x388dee(0x164)](_0x25c42f,_0x123108[_0x388dee(0x14c)]);!fs['existsSync'](_0x706997)&&(this['logger'][_0x388dee(0x1a7)](util[_0x388dee(0x1bc)](_0x123108['htlAw'],_0x706997)),fs[_0x388dee(0x139)](_0x706997),this[_0x388dee(0x1ac)][_0x388dee(0x1a7)](util[_0x388dee(0x1bc)](_0x123108[_0x388dee(0x19d)],_0x706997)));const _0x5c28d1=BrowserstackCLI[_0x388dee(0x15a)]()[_0x388dee(0x1b1)][_0x388dee(0x155)]?.[_0x388dee(0x13c)]?.[_0x388dee(0x182)]()?.[_0x388dee(0x1ad)],_0xa0c821=path[_0x388dee(0x164)](_0x706997,_0x5c28d1);!fs[_0x388dee(0x1b4)](_0xa0c821)&&(fs[_0x388dee(0x139)](_0xa0c821),this['logger'][_0x388dee(0x1a7)](util[_0x388dee(0x1bc)](_0x123108[_0x388dee(0x14d)],_0xa0c821)));if(_0x123108['rGxtL'](_0x4d581d[_0x388dee(0x176)](),'')){this[_0x388dee(0x1ac)][_0x388dee(0x1a7)](util['format'](_0x123108[_0x388dee(0x1ba)]));return;}if(_0x4d581d['startsWith'](_0x123108[_0x388dee(0x161)])||_0x4d581d['startsWith'](_0x123108['xpUfV'])){const _0x5325ee=_0x4d581d[_0x388dee(0x18a)](_0x123108['VjgSd'])?https:http,_0x54a420=path['basename'](_0x4d581d),_0x18e736=path[_0x388dee(0x164)](_0xa0c821,_0x54a420),_0x42513b=fs[_0x388dee(0x17f)](_0x18e736);_0x5325ee[_0x388dee(0x1a1)](_0x4d581d,_0x324693=>{const _0x21a8de=_0x388dee,_0x3f05ee={'zYHin':function(_0x4bb6af,_0x257cdf){const _0x559610=a89_0x33ea;return _0x123108[_0x559610(0x17a)](_0x4bb6af,_0x257cdf);},'LrcjB':function(_0x4f54d5,_0x5c9aac){const _0x15d1a4=a89_0x33ea;return _0x123108[_0x15d1a4(0x191)](_0x4f54d5,_0x5c9aac);},'VrOGq':function(_0x5155b0,_0x58c893){const _0x3946c5=a89_0x33ea;return _0x123108[_0x3946c5(0x18e)](_0x5155b0,_0x58c893);},'SHuuH':_0x123108['lfENu'],'ldDPQ':_0x123108[_0x21a8de(0x1b3)]};if(_0x123108['rGxtL'](_0x324693[_0x21a8de(0x168)],0xc8))_0x324693[_0x21a8de(0x17b)](_0x42513b),_0x42513b['on'](_0x123108[_0x21a8de(0x185)],()=>{const _0x3066a4=_0x21a8de;_0x42513b[_0x3066a4(0x163)]();const _0x2ab885=fs['statSync'](_0x18e736),_0x48c10c=_0x3f05ee[_0x3066a4(0x159)](_0x2ab885[_0x3066a4(0x18c)],_0x3f05ee['LrcjB'](0x400,0x400));if(_0x3f05ee[_0x3066a4(0x198)](_0x48c10c,0x64)){this[_0x3066a4(0x1ac)][_0x3066a4(0x1a7)](util[_0x3066a4(0x1bc)](_0x3f05ee['SHuuH'],_0x48c10c[_0x3066a4(0x186)](0x2))),fs[_0x3066a4(0x17e)](_0x18e736);return;}this[_0x3066a4(0x1ac)]['debug'](util[_0x3066a4(0x1bc)](_0x3f05ee[_0x3066a4(0x19e)],_0x18e736)),uploadAttachmentsManager['trackFile'](_0x18e736,_0x44f6db);});else{this[_0x21a8de(0x1ac)][_0x21a8de(0x1a7)](util[_0x21a8de(0x1bc)](_0x123108[_0x21a8de(0x17d)],_0x324693[_0x21a8de(0x168)])),_0x42513b['close'](),fs[_0x21a8de(0x17e)](_0x18e736);return;}})['on'](_0x123108[_0x388dee(0x160)],_0x2cc304=>{const _0x128876=_0x388dee;this['logger'][_0x128876(0x1a7)](util[_0x128876(0x1bc)](_0x123108[_0x128876(0x14f)],_0x2cc304[_0x128876(0x19f)])),_0x42513b[_0x128876(0x163)](),fs[_0x128876(0x17e)](_0x18e736);return;});}else{if(!fs[_0x388dee(0x1b4)](_0x4d581d)){this[_0x388dee(0x1ac)][_0x388dee(0x1a7)](util['format'](_0x123108[_0x388dee(0x171)],_0x4d581d));return;}const _0x5e23ab=fs[_0x388dee(0x154)](_0x4d581d),_0x11487e=_0x123108[_0x388dee(0x17a)](_0x5e23ab[_0x388dee(0x18c)],_0x123108[_0x388dee(0x191)](0x400,0x400));if(_0x123108[_0x388dee(0x162)](_0x11487e,0x64)){this[_0x388dee(0x1ac)]['debug'](util['format'](_0x123108[_0x388dee(0x183)],_0x11487e[_0x388dee(0x186)](0x2)));return;}const _0x328104=path[_0x388dee(0x1b8)](_0x4d581d),_0x369b07=path[_0x388dee(0x164)](_0xa0c821,_0x328104);fs[_0x388dee(0x150)](_0x4d581d,_0x369b07),uploadAttachmentsManager[_0x388dee(0x16e)](_0x369b07,_0x44f6db);}}static[a89_0x52c0d9(0x16e)](_0x4891dc,_0x4ad9c1){const _0xbfd57a=a89_0x52c0d9,_0x46b771={'kuHfb':function(_0x43c439,_0xcbfe85){return _0x43c439(_0xcbfe85);},'mQRKc':'./browserstackCLI','cewxL':function(_0x1fe847,_0x4b9e03){return _0x1fe847(_0x4b9e03);},'ahtDx':'./cliUtils','AAGVr':function(_0xb18464,_0x5230a1){return _0xb18464===_0x5230a1;},'GiNWy':_0xbfd57a(0x13a),'MiZlR':_0xbfd57a(0x179),'wFsLy':'BuildLevel','rZxqq':_0xbfd57a(0x180),'bQZsN':_0xbfd57a(0x14e),'Oqknt':'./state/testFrameworkState','jStzg':function(_0x2cadbc,_0x100193){return _0x2cadbc(_0x100193);},'ARLIr':'./state/hookState','xbDlD':_0xbfd57a(0x142),'BvRfp':'Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','lwBhY':_0xbfd57a(0x18b)};try{let _0x53dba9;const _0x2b705a=global[_0xbfd57a(0x199)]?.[_0xbfd57a(0x19b)]?.['testInfo'],_0x4b087b=_0x46b771[_0xbfd57a(0x175)](require,_0x46b771[_0xbfd57a(0x1a2)]),_0x4fd025=_0x46b771[_0xbfd57a(0x1a3)](require,_0x46b771[_0xbfd57a(0x1af)]),_0x132ae8=_0x4b087b[_0xbfd57a(0x15a)]()[_0xbfd57a(0x1a4)]()&&_0x46b771[_0xbfd57a(0x18d)](_0x4fd025['getTestFrameworkDetail']()?.[_0xbfd57a(0x141)]?.[_0xbfd57a(0x1b9)](),_0x46b771['GiNWy']);if(_0x132ae8){_0x53dba9=global[_0xbfd57a(0x13e)];if(!_0x53dba9){const _0x26c30b=AutomationFramework[_0xbfd57a(0x1b2)]();_0x53dba9=AutomationFramework[_0xbfd57a(0x194)](_0x26c30b,PlaywrightDriverModule[_0xbfd57a(0x195)],'');}this['logger'][_0xbfd57a(0x1a7)](_0xbfd57a(0x17c)+_0x53dba9);}else{if(!_0x2b705a){const _0x164b8c=AutomationFramework[_0xbfd57a(0x1b2)]();_0x53dba9=AutomationFramework[_0xbfd57a(0x194)](_0x164b8c,PlaywrightDriverModule['KEY_TEST_ID'],'');}else _0x53dba9=TestInfo[_0xbfd57a(0x145)](_0x2b705a,_0x2b705a[_0xbfd57a(0x172)]);this[_0xbfd57a(0x1ac)][_0xbfd57a(0x1a7)](_0xbfd57a(0x15e)+_0x53dba9);}if(!_0x53dba9){this[_0xbfd57a(0x1ac)][_0xbfd57a(0x1a7)](_0x46b771[_0xbfd57a(0x13f)]);return;}const _0x5d2d32={[TestFrameworkConstants[_0xbfd57a(0x158)]]:fs['statSync'](_0x4891dc)[_0xbfd57a(0x18c)],[TestFrameworkConstants[_0xbfd57a(0x15c)]]:path['basename'](_0x4891dc),[TestFrameworkConstants[_0xbfd57a(0x157)]]:_0x4891dc,[TestFrameworkConstants[_0xbfd57a(0x193)]]:_0x4ad9c1?_0x46b771[_0xbfd57a(0x143)]:_0x46b771[_0xbfd57a(0x178)]};if(_0x132ae8){const _0x59a250=_0x4b087b[_0xbfd57a(0x15a)]()[_0xbfd57a(0x197)]();if(!_0x59a250){this[_0xbfd57a(0x1ac)][_0xbfd57a(0x1a7)](_0x46b771[_0xbfd57a(0x147)]);return;}const _0x23c45e=_0x46b771[_0xbfd57a(0x1a3)](require,_0x46b771['Oqknt']),_0x13ec7c=_0x46b771[_0xbfd57a(0x1b7)](require,_0x46b771['ARLIr']),_0x21e791=_0x59a250[_0xbfd57a(0x16a)](_0x23c45e[_0xbfd57a(0x1b0)],_0x13ec7c['POST']);if(!_0x21e791){this[_0xbfd57a(0x1ac)][_0xbfd57a(0x1a7)](_0x46b771['xbDlD']);return;}const _0x50e41a=_0x21e791[_0xbfd57a(0x16b)]()['get'](_0x53dba9)||{},_0x4f7ec5=_0x50e41a[TestFrameworkConstants[_0xbfd57a(0x187)]]||{},_0x55f4fa={..._0x4f7ec5};_0x55f4fa[_0x4891dc]=_0x5d2d32;const _0x5e5127=_0x55f4fa,_0x45564f={[TestFrameworkConstants[_0xbfd57a(0x187)]]:_0x5e5127},_0x4c90e6={};_0x4c90e6[_0x53dba9]=_0x45564f,_0x21e791['addMultipleEntries'](_0x4c90e6),this[_0xbfd57a(0x1ac)][_0xbfd57a(0x1a7)](_0xbfd57a(0x14a)+_0x53dba9+_0xbfd57a(0x15b)+_0x4891dc);}else{const _0x1bdadc=TestInfo['getTestDetails'](_0x53dba9),_0x2dd1e1=_0x1bdadc[TestFrameworkConstants[_0xbfd57a(0x187)]]||{};_0x2dd1e1[_0x4891dc]=_0x5d2d32,_0x1bdadc[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]=_0x2dd1e1,TestInfo[_0xbfd57a(0x148)](_0x53dba9,_0x1bdadc),this[_0xbfd57a(0x1ac)]['debug'](_0xbfd57a(0x1a9)+_0x53dba9+_0xbfd57a(0x15b)+_0x4891dc);}this[_0xbfd57a(0x1ac)][_0xbfd57a(0x1a7)](util[_0xbfd57a(0x1bc)](_0x46b771[_0xbfd57a(0x14b)],_0x4891dc));}catch(_0x2146e7){this[_0xbfd57a(0x1ac)]['debug'](util[_0xbfd57a(0x1bc)](_0x46b771[_0xbfd57a(0x1aa)],_0x2146e7[_0xbfd57a(0x19f)]));}}static[a89_0x52c0d9(0x13d)](){const _0x2cad82=a89_0x52c0d9,_0x1a5c62={};_0x1a5c62[_0x2cad82(0x149)]=_0x2cad82(0x192),_0x1a5c62[_0x2cad82(0x1ab)]='No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s',_0x1a5c62[_0x2cad82(0x19c)]=_0x2cad82(0x156);const _0x2a2cab=_0x1a5c62,_0x264bae=os[_0x2cad82(0x153)](),_0x219dd3=path[_0x2cad82(0x164)](_0x264bae,_0x2a2cab[_0x2cad82(0x149)]);if(!fs['existsSync'](_0x219dd3))return;const _0x4c7086=BrowserstackCLI[_0x2cad82(0x15a)]()[_0x2cad82(0x1b1)][_0x2cad82(0x155)]?.[_0x2cad82(0x13c)]?.[_0x2cad82(0x182)]()?.[_0x2cad82(0x1ad)],_0x25bd18=_0x4c7086?path[_0x2cad82(0x164)](_0x219dd3,_0x4c7086):null;if(!_0x25bd18||!fs['existsSync'](_0x25bd18)){this[_0x2cad82(0x1ac)][_0x2cad82(0x1a7)](util[_0x2cad82(0x1bc)](_0x2a2cab[_0x2cad82(0x1ab)],_0x4c7086));return;}const _0x5c8182={};_0x5c8182[_0x2cad82(0x16d)]=!![],_0x5c8182[_0x2cad82(0x18f)]=!![],fs[_0x2cad82(0x174)](_0x25bd18,_0x5c8182),this['logger'][_0x2cad82(0x1a7)](util['format'](_0x2a2cab[_0x2cad82(0x19c)]));}}module[a89_0x52c0d9(0x16f)]=uploadAttachmentsManager;