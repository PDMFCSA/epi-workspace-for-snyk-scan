const a80_0x57725c=a80_0x2c77;(function(_0x549ab8,_0x118acc){const _0x3c594c=a80_0x2c77,_0x521c46=_0x549ab8();while(!![]){try{const _0x57c59d=-parseInt(_0x3c594c(0x1c4))/0x1+-parseInt(_0x3c594c(0x204))/0x2+parseInt(_0x3c594c(0x206))/0x3+parseInt(_0x3c594c(0x1ea))/0x4*(parseInt(_0x3c594c(0x1f7))/0x5)+-parseInt(_0x3c594c(0x1bf))/0x6+-parseInt(_0x3c594c(0x1c0))/0x7+parseInt(_0x3c594c(0x1fc))/0x8;if(_0x57c59d===_0x118acc)break;else _0x521c46['push'](_0x521c46['shift']());}catch(_0xb3f968){_0x521c46['push'](_0x521c46['shift']());}}}(a80_0x2471,0x95deb));const os=require('os'),fs=require('fs'),path=require(a80_0x57725c(0x1cc)),util=require(a80_0x57725c(0x1dc)),BrowserstackCLI=require('./browserstackCLI'),https=require('https'),http=require('http'),AutomationFramework=require(a80_0x57725c(0x1e9)),PlaywrightDriverModule=require('./modules/playwrightDriverModule'),TestInfo=require(a80_0x57725c(0x1bb)),TestFrameworkConstants=require('./framework/constants/testFrameworkConstants'),{createClassLogger}=require(a80_0x57725c(0x1ed));function a80_0x2471(){const _0x35902d=['size','setTestDetails','debug','getInstance','./TestInfo','mkdirSync','eHuIc','trackFile','4090140dGRHIi','6817944iyXbOD','format','message','Created\x20folder:\x20%s','596149wWlhsg','ohVJo','unlinkSync','xiifJ','kUZKV','clearAttachments','Dueqo','get','path','join','PuyxV','getTrackedInstance','Djylk','KEY_FILE_PATH','error','recursive','jdKmW','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','Attachment\x20recevied\x20for\x20path:\x20%s','LFhYH','startsWith','TSdIm','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','createWriteStream','util','TestLevel','finish','KEY_FILE_SIZE','File\x20downloaded\x20to:\x20%s','BuildLevel','rTCGN','CgMBv','Created\x20.browserstack\x20folder\x20at:\x20%s','modules','KEY_TEST_ATTACHMENTS','QVKsp','bphKv','./framework/automationFramework','88sUwfsu','pipe','buildHashedId','../../helpers/classLogger.js','eFWkJ','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','FJhKD','UqLdm','force','GDxrn','fkbGj','mGxKH','getTestDetails','43980JVJTjW','OVEQy','close','SLETf','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','26184616NxDfNm','FTAQx','xpxCW','KEY_FILE_NAME','.browserstack','zTNAz','homedir','rmSync','1273006eFaIdU','toFixed','106836UGCqrU','basename','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','wlMfj','toObject','trim','TestHubModule','HMytK','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','statusCode','PMncu','existsSync','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','nAWGq','copyFileSync','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','statSync','kafHL','testhubConfig','logger'];a80_0x2471=function(){return _0x35902d;};return a80_0x2471();}class uploadAttachmentsManager{static ['logger']=createClassLogger('uploadAttachmentsManager');static['uploadAttachments'](_0x7fbd8e,_0x4a9733=![]){const _0x1ae0be=a80_0x57725c,_0xa96f93={};_0xa96f93[_0x1ae0be(0x1c5)]=function(_0x399722,_0x207ae0){return _0x399722/_0x207ae0;},_0xa96f93[_0x1ae0be(0x1ee)]=function(_0x2699a,_0xbdb5c3){return _0x2699a*_0xbdb5c3;},_0xa96f93['xpxCW']=function(_0x370270,_0x58a946){return _0x370270>_0x58a946;},_0xa96f93['GDxrn']='Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.',_0xa96f93[_0x1ae0be(0x1e2)]=_0x1ae0be(0x1e0),_0xa96f93['xiifJ']=function(_0x486f83,_0x599c7c){return _0x486f83===_0x599c7c;},_0xa96f93[_0x1ae0be(0x1f1)]=_0x1ae0be(0x1de),_0xa96f93[_0x1ae0be(0x1c8)]='Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload',_0xa96f93['QVKsp']=_0x1ae0be(0x212),_0xa96f93['kafHL']=_0x1ae0be(0x1d6),_0xa96f93[_0x1ae0be(0x1f0)]=_0x1ae0be(0x200),_0xa96f93[_0x1ae0be(0x1d0)]=_0x1ae0be(0x1d5),_0xa96f93['FTAQx']=_0x1ae0be(0x1e4),_0xa96f93['SLETf']=_0x1ae0be(0x1c3),_0xa96f93[_0x1ae0be(0x210)]=function(_0x284d63,_0x47d83d){return _0x284d63===_0x47d83d;},_0xa96f93[_0x1ae0be(0x20d)]=_0x1ae0be(0x1fb),_0xa96f93[_0x1ae0be(0x1bd)]='https://',_0xa96f93[_0x1ae0be(0x1f5)]='http://',_0xa96f93['bphKv']=_0x1ae0be(0x1d2),_0xa96f93[_0x1ae0be(0x209)]=_0x1ae0be(0x215),_0xa96f93['PuyxV']=function(_0x224260,_0x1755ef){return _0x224260*_0x1755ef;},_0xa96f93[_0x1ae0be(0x1e3)]=function(_0xf36263,_0x1df2e0){return _0xf36263>_0x1df2e0;},_0xa96f93[_0x1ae0be(0x1f8)]=_0x1ae0be(0x1ef);const _0x2b27b1=_0xa96f93;this[_0x1ae0be(0x1b6)]['debug'](util[_0x1ae0be(0x1c1)](_0x2b27b1[_0x1ae0be(0x217)],_0x7fbd8e));const _0xfb58bb=os['homedir'](),_0x505b2c=path[_0x1ae0be(0x1cd)](_0xfb58bb,_0x2b27b1['FJhKD']);!fs[_0x1ae0be(0x211)](_0x505b2c)&&(this['logger'][_0x1ae0be(0x1b9)](util[_0x1ae0be(0x1c1)](_0x2b27b1['Djylk'],_0x505b2c)),fs[_0x1ae0be(0x1bc)](_0x505b2c),this[_0x1ae0be(0x1b6)][_0x1ae0be(0x1b9)](util['format'](_0x2b27b1[_0x1ae0be(0x1fd)],_0x505b2c)));const _0xdd79ff=BrowserstackCLI[_0x1ae0be(0x1ba)]()[_0x1ae0be(0x1e5)]['TestHubModule']?.[_0x1ae0be(0x1b5)]?.[_0x1ae0be(0x20a)]()?.['buildHashedId'],_0x193a86=path[_0x1ae0be(0x1cd)](_0x505b2c,_0xdd79ff);!fs[_0x1ae0be(0x211)](_0x193a86)&&(fs[_0x1ae0be(0x1bc)](_0x193a86),this[_0x1ae0be(0x1b6)][_0x1ae0be(0x1b9)](util['format'](_0x2b27b1[_0x1ae0be(0x1fa)],_0x193a86)));if(_0x2b27b1[_0x1ae0be(0x210)](_0x7fbd8e[_0x1ae0be(0x20b)](),'')){this[_0x1ae0be(0x1b6)][_0x1ae0be(0x1b9)](util[_0x1ae0be(0x1c1)](_0x2b27b1[_0x1ae0be(0x20d)]));return;}if(_0x7fbd8e[_0x1ae0be(0x1d8)](_0x2b27b1[_0x1ae0be(0x1bd)])||_0x7fbd8e[_0x1ae0be(0x1d8)](_0x2b27b1['mGxKH'])){const _0x88ebd8=_0x7fbd8e[_0x1ae0be(0x1d8)](_0x2b27b1[_0x1ae0be(0x1bd)])?https:http,_0x396c59=path[_0x1ae0be(0x207)](_0x7fbd8e),_0x566371=path['join'](_0x193a86,_0x396c59),_0x4fb172=fs[_0x1ae0be(0x1db)](_0x566371);_0x88ebd8[_0x1ae0be(0x1cb)](_0x7fbd8e,_0x3e0ec9=>{const _0x59ad0f=_0x1ae0be;if(_0x2b27b1[_0x59ad0f(0x1c7)](_0x3e0ec9[_0x59ad0f(0x20f)],0xc8))_0x3e0ec9[_0x59ad0f(0x1eb)](_0x4fb172),_0x4fb172['on'](_0x2b27b1[_0x59ad0f(0x1f1)],()=>{const _0x4a22e4=_0x59ad0f;_0x4fb172[_0x4a22e4(0x1f9)]();const _0x36338a=fs['statSync'](_0x566371),_0x1b93b3=_0x2b27b1[_0x4a22e4(0x1c5)](_0x36338a['size'],_0x2b27b1[_0x4a22e4(0x1ee)](0x400,0x400));if(_0x2b27b1[_0x4a22e4(0x1fe)](_0x1b93b3,0x64)){this[_0x4a22e4(0x1b6)][_0x4a22e4(0x1b9)](util['format'](_0x2b27b1[_0x4a22e4(0x1f3)],_0x1b93b3['toFixed'](0x2))),fs['unlinkSync'](_0x566371);return;}this['logger'][_0x4a22e4(0x1b9)](util[_0x4a22e4(0x1c1)](_0x2b27b1[_0x4a22e4(0x1e2)],_0x566371)),uploadAttachmentsManager[_0x4a22e4(0x1be)](_0x566371,_0x4a9733);});else{this[_0x59ad0f(0x1b6)][_0x59ad0f(0x1b9)](util[_0x59ad0f(0x1c1)](_0x2b27b1[_0x59ad0f(0x1c8)],_0x3e0ec9['statusCode'])),_0x4fb172[_0x59ad0f(0x1f9)](),fs[_0x59ad0f(0x1c6)](_0x566371);return;}})['on'](_0x2b27b1[_0x1ae0be(0x1e8)],_0x1a6a58=>{const _0x194d42=_0x1ae0be;this[_0x194d42(0x1b6)][_0x194d42(0x1b9)](util[_0x194d42(0x1c1)](_0x2b27b1[_0x194d42(0x1e7)],_0x1a6a58['message'])),_0x4fb172[_0x194d42(0x1f9)](),fs['unlinkSync'](_0x566371);return;});}else{if(!fs[_0x1ae0be(0x211)](_0x7fbd8e)){this[_0x1ae0be(0x1b6)]['debug'](util[_0x1ae0be(0x1c1)](_0x2b27b1[_0x1ae0be(0x209)],_0x7fbd8e));return;}const _0x5c781b=fs[_0x1ae0be(0x216)](_0x7fbd8e),_0x32f8cc=_0x2b27b1[_0x1ae0be(0x1c5)](_0x5c781b[_0x1ae0be(0x1b7)],_0x2b27b1[_0x1ae0be(0x1ce)](0x400,0x400));if(_0x2b27b1['CgMBv'](_0x32f8cc,0x64)){this['logger'][_0x1ae0be(0x1b9)](util[_0x1ae0be(0x1c1)](_0x2b27b1[_0x1ae0be(0x1f8)],_0x32f8cc[_0x1ae0be(0x205)](0x2)));return;}const _0x178a35=path[_0x1ae0be(0x207)](_0x7fbd8e),_0x382426=path[_0x1ae0be(0x1cd)](_0x193a86,_0x178a35);fs[_0x1ae0be(0x214)](_0x7fbd8e,_0x382426),uploadAttachmentsManager[_0x1ae0be(0x1be)](_0x382426,_0x4a9733);}}static[a80_0x57725c(0x1be)](_0x4f24cc,_0x11c7a1){const _0x57b4fc=a80_0x57725c,_0x463d82={};_0x463d82[_0x57b4fc(0x213)]=_0x57b4fc(0x1e1),_0x463d82[_0x57b4fc(0x1ca)]=_0x57b4fc(0x1dd),_0x463d82[_0x57b4fc(0x1d9)]=_0x57b4fc(0x1da),_0x463d82['fkbGj']=_0x57b4fc(0x208);const _0x2866de=_0x463d82;try{const _0x23fe46=AutomationFramework[_0x57b4fc(0x1cf)](),_0x79cc52=AutomationFramework['getState'](_0x23fe46,PlaywrightDriverModule['KEY_TEST_ID'],''),_0x5c1be1=TestInfo[_0x57b4fc(0x1f6)](_0x79cc52),_0x513ac0=_0x5c1be1[TestFrameworkConstants[_0x57b4fc(0x1e6)]]||{};_0x513ac0[_0x4f24cc]={[TestFrameworkConstants[_0x57b4fc(0x1df)]]:fs[_0x57b4fc(0x216)](_0x4f24cc)['size'],[TestFrameworkConstants[_0x57b4fc(0x1ff)]]:path[_0x57b4fc(0x207)](_0x4f24cc),[TestFrameworkConstants[_0x57b4fc(0x1d1)]]:_0x4f24cc,[TestFrameworkConstants['KEY_FILE_LEVEL']]:_0x11c7a1?_0x2866de[_0x57b4fc(0x213)]:_0x2866de['Dueqo']},_0x5c1be1[TestFrameworkConstants[_0x57b4fc(0x1e6)]]=_0x513ac0,TestInfo[_0x57b4fc(0x1b8)](_0x79cc52,_0x5c1be1),this[_0x57b4fc(0x1b6)][_0x57b4fc(0x1b9)](util[_0x57b4fc(0x1c1)](_0x2866de[_0x57b4fc(0x1d9)],_0x4f24cc));}catch(_0x23863a){this['logger'][_0x57b4fc(0x1b9)](util[_0x57b4fc(0x1c1)](_0x2866de[_0x57b4fc(0x1f4)],_0x23863a[_0x57b4fc(0x1c2)]));}}static[a80_0x57725c(0x1c9)](){const _0x586bca=a80_0x57725c,_0x1bf52d={};_0x1bf52d[_0x586bca(0x1d4)]=_0x586bca(0x200),_0x1bf52d[_0x586bca(0x1d7)]=_0x586bca(0x20e),_0x1bf52d[_0x586bca(0x201)]='Cleared\x20attachment\x20folder';const _0x31e268=_0x1bf52d,_0x31730f=os[_0x586bca(0x202)](),_0x31fd54=path[_0x586bca(0x1cd)](_0x31730f,_0x31e268[_0x586bca(0x1d4)]);if(!fs[_0x586bca(0x211)](_0x31fd54))return;const _0x266783=BrowserstackCLI[_0x586bca(0x1ba)]()[_0x586bca(0x1e5)][_0x586bca(0x20c)]?.[_0x586bca(0x1b5)]?.[_0x586bca(0x20a)]()?.[_0x586bca(0x1ec)],_0x536595=_0x266783?path[_0x586bca(0x1cd)](_0x31fd54,_0x266783):null;if(!_0x536595||!fs[_0x586bca(0x211)](_0x536595)){this[_0x586bca(0x1b6)]['debug'](util['format'](_0x31e268[_0x586bca(0x1d7)],_0x266783));return;}const _0x57bfc2={};_0x57bfc2[_0x586bca(0x1d3)]=!![],_0x57bfc2[_0x586bca(0x1f2)]=!![],fs[_0x586bca(0x203)](_0x536595,_0x57bfc2),this[_0x586bca(0x1b6)]['debug'](util['format'](_0x31e268['zTNAz']));}}function a80_0x2c77(_0x7ae33c,_0x371efa){const _0x247113=a80_0x2471();return a80_0x2c77=function(_0x2c7730,_0x3915c4){_0x2c7730=_0x2c7730-0x1b5;let _0x385b46=_0x247113[_0x2c7730];return _0x385b46;},a80_0x2c77(_0x7ae33c,_0x371efa);}module['exports']=uploadAttachmentsManager;