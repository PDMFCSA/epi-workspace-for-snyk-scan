const a87_0x424b72=a87_0x2e58;(function(_0x4f9b4e,_0x54cb53){const _0x122a3e=a87_0x2e58,_0x1bc448=_0x4f9b4e();while(!![]){try{const _0x4d1339=parseInt(_0x122a3e(0x1af))/0x1+parseInt(_0x122a3e(0x1be))/0x2*(-parseInt(_0x122a3e(0x177))/0x3)+parseInt(_0x122a3e(0x185))/0x4+parseInt(_0x122a3e(0x1c5))/0x5+-parseInt(_0x122a3e(0x1d3))/0x6*(parseInt(_0x122a3e(0x176))/0x7)+parseInt(_0x122a3e(0x18d))/0x8*(parseInt(_0x122a3e(0x1bd))/0x9)+-parseInt(_0x122a3e(0x1b6))/0xa;if(_0x4d1339===_0x54cb53)break;else _0x1bc448['push'](_0x1bc448['shift']());}catch(_0x2a86ed){_0x1bc448['push'](_0x1bc448['shift']());}}}(a87_0xb433,0xac0d0));const os=require('os'),fs=require('fs'),path=require('path'),util=require(a87_0x424b72(0x1bb)),BrowserstackCLI=require(a87_0x424b72(0x1c1)),https=require('https'),http=require(a87_0x424b72(0x182)),AutomationFramework=require(a87_0x424b72(0x180)),PlaywrightDriverModule=require(a87_0x424b72(0x19d)),TestInfo=require(a87_0x424b72(0x1b9)),TestFrameworkConstants=require(a87_0x424b72(0x1b5)),{createClassLogger}=require(a87_0x424b72(0x1c7));class uploadAttachmentsManager{static [a87_0x424b72(0x187)]=createClassLogger(a87_0x424b72(0x1aa));static[a87_0x424b72(0x1e3)](_0x28917f,_0x5cc5d3=![]){const _0x48f342=a87_0x424b72,_0x32c7aa={};_0x32c7aa[_0x48f342(0x17a)]=function(_0x2d0c6e,_0x83ec84){return _0x2d0c6e/_0x83ec84;},_0x32c7aa['nHJrX']=function(_0x30d7cd,_0x26bc5b){return _0x30d7cd*_0x26bc5b;},_0x32c7aa[_0x48f342(0x1c9)]=function(_0x50e2aa,_0x2055df){return _0x50e2aa>_0x2055df;},_0x32c7aa[_0x48f342(0x1bf)]=_0x48f342(0x1a2),_0x32c7aa[_0x48f342(0x17d)]=_0x48f342(0x1e4),_0x32c7aa['AzDIT']=function(_0x25063a,_0x49bd2d){return _0x25063a===_0x49bd2d;},_0x32c7aa[_0x48f342(0x1c6)]='finish',_0x32c7aa[_0x48f342(0x1a5)]=_0x48f342(0x1b1),_0x32c7aa[_0x48f342(0x1ab)]=_0x48f342(0x1d7),_0x32c7aa[_0x48f342(0x1d5)]=_0x48f342(0x197),_0x32c7aa[_0x48f342(0x1de)]='.browserstack',_0x32c7aa[_0x48f342(0x1a8)]=_0x48f342(0x1db),_0x32c7aa[_0x48f342(0x1b7)]='Created\x20.browserstack\x20folder\x20at:\x20%s',_0x32c7aa['JLbAi']='Created\x20folder:\x20%s',_0x32c7aa[_0x48f342(0x1ae)]=function(_0x52ab7d,_0xf43985){return _0x52ab7d===_0xf43985;},_0x32c7aa[_0x48f342(0x1e0)]=_0x48f342(0x1a7),_0x32c7aa[_0x48f342(0x1ba)]=_0x48f342(0x190),_0x32c7aa[_0x48f342(0x1d2)]=_0x48f342(0x19c),_0x32c7aa[_0x48f342(0x1b3)]=_0x48f342(0x17f),_0x32c7aa['HvwyG']=_0x48f342(0x19f),_0x32c7aa[_0x48f342(0x1c4)]=_0x48f342(0x179);const _0x3118da=_0x32c7aa;this[_0x48f342(0x187)][_0x48f342(0x1c0)](util[_0x48f342(0x184)](_0x3118da[_0x48f342(0x1d5)],_0x28917f));const _0x58669d=os[_0x48f342(0x17e)](),_0x5a3912=path['join'](_0x58669d,_0x3118da[_0x48f342(0x1de)]);!fs[_0x48f342(0x1bc)](_0x5a3912)&&(this[_0x48f342(0x187)][_0x48f342(0x1c0)](util[_0x48f342(0x184)](_0x3118da[_0x48f342(0x1a8)],_0x5a3912)),fs[_0x48f342(0x1e6)](_0x5a3912),this[_0x48f342(0x187)][_0x48f342(0x1c0)](util[_0x48f342(0x184)](_0x3118da[_0x48f342(0x1b7)],_0x5a3912)));const _0x18d5f1=BrowserstackCLI[_0x48f342(0x17b)]()[_0x48f342(0x17c)][_0x48f342(0x193)]?.[_0x48f342(0x1ca)]?.[_0x48f342(0x1a6)]()?.[_0x48f342(0x1a9)],_0x20a0c5=path[_0x48f342(0x196)](_0x5a3912,_0x18d5f1);!fs[_0x48f342(0x1bc)](_0x20a0c5)&&(fs[_0x48f342(0x1e6)](_0x20a0c5),this[_0x48f342(0x187)][_0x48f342(0x1c0)](util[_0x48f342(0x184)](_0x3118da[_0x48f342(0x192)],_0x20a0c5)));if(_0x3118da[_0x48f342(0x1ae)](_0x28917f[_0x48f342(0x1d8)](),'')){this['logger'][_0x48f342(0x1c0)](util['format'](_0x3118da[_0x48f342(0x1e0)]));return;}if(_0x28917f[_0x48f342(0x1b2)](_0x3118da[_0x48f342(0x1ba)])||_0x28917f['startsWith'](_0x3118da[_0x48f342(0x1d2)])){const _0x414517=_0x28917f[_0x48f342(0x1b2)](_0x3118da[_0x48f342(0x1ba)])?https:http,_0x4e20fc=path[_0x48f342(0x1dd)](_0x28917f),_0x46461e=path[_0x48f342(0x196)](_0x20a0c5,_0x4e20fc),_0x97c725=fs[_0x48f342(0x1da)](_0x46461e);_0x414517[_0x48f342(0x199)](_0x28917f,_0x574116=>{const _0x54fce5=_0x48f342,_0xd7b62b={'qnidY':function(_0x4fff2f,_0x1b4b1d){const _0x42c77b=a87_0x2e58;return _0x3118da[_0x42c77b(0x17a)](_0x4fff2f,_0x1b4b1d);},'Livcp':function(_0x1903ad,_0x326f35){const _0xa47742=a87_0x2e58;return _0x3118da[_0xa47742(0x189)](_0x1903ad,_0x326f35);},'wjjIY':function(_0x556d09,_0x5af5df){const _0x543e16=a87_0x2e58;return _0x3118da[_0x543e16(0x1c9)](_0x556d09,_0x5af5df);},'ZVAgs':_0x3118da[_0x54fce5(0x1bf)],'mTJkQ':_0x3118da[_0x54fce5(0x17d)]};if(_0x3118da[_0x54fce5(0x1c3)](_0x574116[_0x54fce5(0x1b4)],0xc8))_0x574116[_0x54fce5(0x175)](_0x97c725),_0x97c725['on'](_0x3118da['BPMQp'],()=>{const _0x119c01=_0x54fce5;_0x97c725[_0x119c01(0x1ad)]();const _0x155663=fs[_0x119c01(0x1b8)](_0x46461e),_0x1412f7=_0xd7b62b[_0x119c01(0x1e1)](_0x155663['size'],_0xd7b62b[_0x119c01(0x1cb)](0x400,0x400));if(_0xd7b62b['wjjIY'](_0x1412f7,0x64)){this[_0x119c01(0x187)]['debug'](util[_0x119c01(0x184)](_0xd7b62b[_0x119c01(0x19b)],_0x1412f7[_0x119c01(0x1cf)](0x2))),fs[_0x119c01(0x1cd)](_0x46461e);return;}this[_0x119c01(0x187)][_0x119c01(0x1c0)](util[_0x119c01(0x184)](_0xd7b62b[_0x119c01(0x1c2)],_0x46461e)),uploadAttachmentsManager[_0x119c01(0x1df)](_0x46461e,_0x5cc5d3);});else{this['logger'][_0x54fce5(0x1c0)](util[_0x54fce5(0x184)](_0x3118da[_0x54fce5(0x1a5)],_0x574116['statusCode'])),_0x97c725[_0x54fce5(0x1ad)](),fs['unlinkSync'](_0x46461e);return;}})['on'](_0x3118da[_0x48f342(0x1b3)],_0x1fd519=>{const _0x3e46ba=_0x48f342;this['logger'][_0x3e46ba(0x1c0)](util[_0x3e46ba(0x184)](_0x3118da[_0x3e46ba(0x1ab)],_0x1fd519['message'])),_0x97c725[_0x3e46ba(0x1ad)](),fs[_0x3e46ba(0x1cd)](_0x46461e);return;});}else{if(!fs[_0x48f342(0x1bc)](_0x28917f)){this[_0x48f342(0x187)][_0x48f342(0x1c0)](util[_0x48f342(0x184)](_0x3118da[_0x48f342(0x19a)],_0x28917f));return;}const _0x3296b0=fs['statSync'](_0x28917f),_0x451209=_0x3118da[_0x48f342(0x17a)](_0x3296b0['size'],_0x3118da[_0x48f342(0x189)](0x400,0x400));if(_0x3118da[_0x48f342(0x1c9)](_0x451209,0x64)){this[_0x48f342(0x187)][_0x48f342(0x1c0)](util[_0x48f342(0x184)](_0x3118da[_0x48f342(0x1c4)],_0x451209[_0x48f342(0x1cf)](0x2)));return;}const _0xa437b7=path[_0x48f342(0x1dd)](_0x28917f),_0x5e3204=path[_0x48f342(0x196)](_0x20a0c5,_0xa437b7);fs[_0x48f342(0x186)](_0x28917f,_0x5e3204),uploadAttachmentsManager[_0x48f342(0x1df)](_0x5e3204,_0x5cc5d3);}}static[a87_0x424b72(0x1df)](_0xca66ed,_0x554ee0){const _0x710fa1=a87_0x424b72,_0xe9489c={};_0xe9489c[_0x710fa1(0x18c)]=_0x710fa1(0x18f),_0xe9489c['KiqVY']=_0x710fa1(0x1ce),_0xe9489c['dKDhC']=_0x710fa1(0x178),_0xe9489c['vZqZf']=_0x710fa1(0x1cc);const _0x56a6bd=_0xe9489c;try{let _0x412b3d;const _0x62cc9d=global[_0x710fa1(0x194)]?.[_0x710fa1(0x1e7)]?.[_0x710fa1(0x18a)];if(!_0x62cc9d){const _0x23d779=AutomationFramework[_0x710fa1(0x191)]();_0x412b3d=AutomationFramework[_0x710fa1(0x1e2)](_0x23d779,PlaywrightDriverModule[_0x710fa1(0x1a4)],'');}else _0x412b3d=TestInfo[_0x710fa1(0x1d6)](_0x62cc9d,_0x62cc9d[_0x710fa1(0x1a0)]);const _0xc39118=TestInfo[_0x710fa1(0x181)](_0x412b3d),_0x3b43d7=_0xc39118[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{};_0x3b43d7[_0xca66ed]={[TestFrameworkConstants[_0x710fa1(0x1ac)]]:fs[_0x710fa1(0x1b8)](_0xca66ed)[_0x710fa1(0x18e)],[TestFrameworkConstants[_0x710fa1(0x19e)]]:path[_0x710fa1(0x1dd)](_0xca66ed),[TestFrameworkConstants[_0x710fa1(0x188)]]:_0xca66ed,[TestFrameworkConstants[_0x710fa1(0x1d0)]]:_0x554ee0?_0x56a6bd[_0x710fa1(0x18c)]:_0x56a6bd[_0x710fa1(0x1a1)]},_0xc39118[TestFrameworkConstants[_0x710fa1(0x198)]]=_0x3b43d7,TestInfo[_0x710fa1(0x1dc)](_0x412b3d,_0xc39118),this[_0x710fa1(0x187)]['debug'](util[_0x710fa1(0x184)](_0x56a6bd[_0x710fa1(0x1d4)],_0xca66ed));}catch(_0x20df2d){this[_0x710fa1(0x187)][_0x710fa1(0x1c0)](util[_0x710fa1(0x184)](_0x56a6bd['vZqZf'],_0x20df2d[_0x710fa1(0x18b)]));}}static['clearAttachments'](){const _0x10ae6a=a87_0x424b72,_0x36f8e5={};_0x36f8e5[_0x10ae6a(0x1e5)]='.browserstack',_0x36f8e5[_0x10ae6a(0x1d1)]=_0x10ae6a(0x195),_0x36f8e5[_0x10ae6a(0x1c8)]='Cleared\x20attachment\x20folder';const _0x45232d=_0x36f8e5,_0x2bbebe=os[_0x10ae6a(0x17e)](),_0x20a041=path[_0x10ae6a(0x196)](_0x2bbebe,_0x45232d[_0x10ae6a(0x1e5)]);if(!fs['existsSync'](_0x20a041))return;const _0x4529ec=BrowserstackCLI[_0x10ae6a(0x17b)]()[_0x10ae6a(0x17c)][_0x10ae6a(0x193)]?.[_0x10ae6a(0x1ca)]?.[_0x10ae6a(0x1a6)]()?.['buildHashedId'],_0x28b5f5=_0x4529ec?path[_0x10ae6a(0x196)](_0x20a041,_0x4529ec):null;if(!_0x28b5f5||!fs[_0x10ae6a(0x1bc)](_0x28b5f5)){this[_0x10ae6a(0x187)]['debug'](util[_0x10ae6a(0x184)](_0x45232d[_0x10ae6a(0x1d1)],_0x4529ec));return;}const _0x4e839f={};_0x4e839f[_0x10ae6a(0x1b0)]=!![],_0x4e839f[_0x10ae6a(0x183)]=!![],fs[_0x10ae6a(0x1a3)](_0x28b5f5,_0x4e839f),this[_0x10ae6a(0x187)][_0x10ae6a(0x1c0)](util['format'](_0x45232d['SwAsb']));}}module[a87_0x424b72(0x1d9)]=uploadAttachmentsManager;function a87_0x2e58(_0x511a00,_0x4941ad){const _0xb43372=a87_0xb433();return a87_0x2e58=function(_0x2e5878,_0x18397a){_0x2e5878=_0x2e5878-0x175;let _0x5b9c20=_0xb43372[_0x2e5878];return _0x5b9c20;},a87_0x2e58(_0x511a00,_0x4941ad);}function a87_0xb433(){const _0x411e7b=['UeXGh','trackFile','bQviz','qnidY','getState','uploadAttachments','File\x20downloaded\x20to:\x20%s','UztoS','mkdirSync','currentTest','pipe','49847wpAIqj','30531yyFvoR','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','hvWds','getInstance','modules','SWbGZ','homedir','error','./framework/automationFramework','getTestDetails','http','force','format','2903696tAJtMg','copyFileSync','logger','KEY_FILE_PATH','nHJrX','testInfo','message','Estbg','27288XOmppC','size','BuildLevel','https://','getTrackedInstance','JLbAi','TestHubModule','__workerDetails','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','join','Attachment\x20recevied\x20for\x20path:\x20%s','KEY_TEST_ATTACHMENTS','get','HvwyG','ZVAgs','http://','./modules/playwrightDriverModule','KEY_FILE_NAME','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','retry','KiqVY','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','rmSync','KEY_TEST_ID','PsxBt','toObject','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','EBjyj','buildHashedId','uploadAttachmentsManager','DBzCP','KEY_FILE_SIZE','close','rKzXX','1002721fYptij','recursive','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','startsWith','ajgcf','statusCode','./framework/constants/testFrameworkConstants','4121400BTaCXG','oXgXs','statSync','./TestInfo','urFQr','util','existsSync','2169RjfnAF','168qiPCik','ZpoUa','debug','./browserstackCLI','mTJkQ','AzDIT','iNgob','3549665trEROL','BPMQp','../../helpers/classLogger.js','SwAsb','yDblV','testhubConfig','Livcp','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','unlinkSync','TestLevel','toFixed','KEY_FILE_LEVEL','JrCfP','cpOuk','1086XOmBzz','dKDhC','BHpgZ','getTestIdentifierFromTestInfo','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','trim','exports','createWriteStream','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','setTestDetails','basename'];a87_0xb433=function(){return _0x411e7b;};return a87_0xb433();}