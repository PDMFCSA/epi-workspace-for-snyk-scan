const a89_0x5087b6=a89_0x1aa2;function a89_0x15a3(){const _0xeaae5e=['File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','2023987JBUPSj','130nMgtRU','1269818eZVVEJ','getAllData','FvSwD','setTestDetails','302067YnTPGm','trackFile:\x20Jest+Playwright\x20-\x20testId\x20(testIdentifier):\x20','KEY_FILE_NAME','yHzoP','error','TestHubModule','size','121515aFrEvu','1147612bkNwly','KEY_TEST_ATTACHMENTS','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','currentTest','aBpKx','testhubConfig','get','Cleared\x20attachment\x20folder','trim','statusCode','http://','LFOos','trackFile:\x20No\x20testId\x20available,\x20cannot\x20track\x20attachment','isRunning','AZjlc','./modules/playwrightDriverModule','logger','__workerDetails','statSync','getInstance','jemUK','Created\x20folder:\x20%s','Attachment\x20recevied\x20for\x20path:\x20%s','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','debug','modules','otVJR','DBMLZ','force','GlFTo','POST','OdatF','../../helpers/classLogger.js','fxgcB','GMvCf','5QtbLlS','format','unlinkSync','ZpxXS','testInfo','basename','ZKZMh','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','trackFile:\x20Stored\x20attachment\x20in\x20TestInfo\x20file\x20for\x20testId:\x20','gAxuR','hqFIG','./framework/automationFramework','addMultipleEntries','toObject','Created\x20.browserstack\x20folder\x20at:\x20%s','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','./cliUtils','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','uploadAttachmentsManager','homedir','.browserstack','resolveInstance','trackFile:\x20Cucumber+Playwright\x20-\x20testId:\x20','hKcOb','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','2527788ceAGPD','eTgDB','toLowerCase','existsSync','trackFile:\x20Instance\x20not\x20available,\x20cannot\x20track\x20attachment','jest','message','util','wLBqX','uploadAttachments','VGETQ','pipe','ADqFt','KfCHA','trackFile:\x20TestFramework\x20not\x20available,\x20cannot\x20track\x20attachment','join','toFixed','recursive','getTrackedInstance','HSLDE','BuildLevel','./TestInfo','41550HhIrhb','path',',\x20filepath:\x20','ybglU','lWxqJ','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','XEGcz','clearAttachments','exports','./browserstackCLI','getTestFrameworkDetail','oixqX','copyFileSync','close','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','yJGXB','createWriteStream','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','KEY_TEST_ID','retry','ijigR','startsWith','trackFile','trackFile:\x20Stored\x20attachment\x20in\x20instance\x20memory\x20for\x20testId:\x20','KEY_FILE_LEVEL','TrFhY','getState','iBWqM','36tVYpLM','ODHaC','buildHashedId','TEST','http','AsaRD','__jestCurrentTestIdentifier','NaNiw','YjHck','8qvTTSa','mjuTq','mkdirSync','./framework/constants/testFrameworkConstants','File\x20downloaded\x20to:\x20%s','getTestDetails','getTestFramework','10CHJjOj','./state/hookState','hlvFK','JMKjX','UuMho'];a89_0x15a3=function(){return _0xeaae5e;};return a89_0x15a3();}(function(_0x54dbb6,_0x5b4306){const _0x12cd8c=a89_0x1aa2,_0x4488de=_0x54dbb6();while(!![]){try{const _0x29d35e=-parseInt(_0x12cd8c(0x235))/0x1+parseInt(_0x12cd8c(0x222))/0x2*(parseInt(_0x12cd8c(0x1f6))/0x3)+-parseInt(_0x12cd8c(0x236))/0x4*(-parseInt(_0x12cd8c(0x1c7))/0x5)+parseInt(_0x12cd8c(0x1e0))/0x6+-parseInt(_0x12cd8c(0x228))/0x7*(parseInt(_0x12cd8c(0x21b))/0x8)+-parseInt(_0x12cd8c(0x22e))/0x9*(parseInt(_0x12cd8c(0x229))/0xa)+parseInt(_0x12cd8c(0x22a))/0xb*(parseInt(_0x12cd8c(0x212))/0xc);if(_0x29d35e===_0x5b4306)break;else _0x4488de['push'](_0x4488de['shift']());}catch(_0x3bda5c){_0x4488de['push'](_0x4488de['shift']());}}}(a89_0x15a3,0x43936));const os=require('os'),fs=require('fs'),path=require(a89_0x5087b6(0x1f7)),util=require(a89_0x5087b6(0x1e7)),BrowserstackCLI=require(a89_0x5087b6(0x1ff)),https=require('https'),http=require(a89_0x5087b6(0x216)),AutomationFramework=require(a89_0x5087b6(0x1d2)),PlaywrightDriverModule=require(a89_0x5087b6(0x245)),TestInfo=require(a89_0x5087b6(0x1f5)),TestFrameworkConstants=require(a89_0x5087b6(0x21e)),{createClassLogger}=require(a89_0x5087b6(0x1c4));class uploadAttachmentsManager{static [a89_0x5087b6(0x246)]=createClassLogger(a89_0x5087b6(0x1d9));static[a89_0x5087b6(0x1e9)](_0x46e2a5,_0x31e288=![]){const _0x35cc5a=a89_0x5087b6,_0xb6d24a={};_0xb6d24a[_0x35cc5a(0x226)]=function(_0x2e9e27,_0x2e4de8){return _0x2e9e27/_0x2e4de8;},_0xb6d24a[_0x35cc5a(0x231)]=function(_0x33cdab,_0x35c0bb){return _0x33cdab*_0x35c0bb;},_0xb6d24a[_0x35cc5a(0x219)]=function(_0x2c1a8b,_0x585b3a){return _0x2c1a8b>_0x585b3a;},_0xb6d24a[_0x35cc5a(0x250)]=_0x35cc5a(0x1d6),_0xb6d24a[_0x35cc5a(0x1fa)]=_0x35cc5a(0x21f),_0xb6d24a[_0x35cc5a(0x225)]=function(_0xe21506,_0x2a32fb){return _0xe21506===_0x2a32fb;},_0xb6d24a['DBMLZ']='finish',_0xb6d24a[_0x35cc5a(0x244)]=_0x35cc5a(0x1ce),_0xb6d24a[_0x35cc5a(0x22c)]=_0x35cc5a(0x207),_0xb6d24a[_0x35cc5a(0x1fc)]=_0x35cc5a(0x24c),_0xb6d24a[_0x35cc5a(0x1e8)]=_0x35cc5a(0x1db),_0xb6d24a[_0x35cc5a(0x211)]=_0x35cc5a(0x238),_0xb6d24a['ZKZMh']=_0x35cc5a(0x1d5),_0xb6d24a['mjuTq']=_0x35cc5a(0x24b),_0xb6d24a[_0x35cc5a(0x255)]=_0x35cc5a(0x1d8),_0xb6d24a[_0x35cc5a(0x213)]='https://',_0xb6d24a[_0x35cc5a(0x224)]=_0x35cc5a(0x240),_0xb6d24a[_0x35cc5a(0x1ed)]=_0x35cc5a(0x232),_0xb6d24a['GMvCf']=_0x35cc5a(0x1df),_0xb6d24a[_0x35cc5a(0x1ca)]=_0x35cc5a(0x227);const _0x3efcb1=_0xb6d24a;this[_0x35cc5a(0x246)][_0x35cc5a(0x24e)](util['format'](_0x3efcb1['XEGcz'],_0x46e2a5));const _0x2b0949=os[_0x35cc5a(0x1da)](),_0x2448b8=path[_0x35cc5a(0x1ef)](_0x2b0949,_0x3efcb1[_0x35cc5a(0x1e8)]);!fs[_0x35cc5a(0x1e3)](_0x2448b8)&&(this['logger'][_0x35cc5a(0x24e)](util['format'](_0x3efcb1['iBWqM'],_0x2448b8)),fs[_0x35cc5a(0x21d)](_0x2448b8),this[_0x35cc5a(0x246)]['debug'](util[_0x35cc5a(0x1c8)](_0x3efcb1[_0x35cc5a(0x1cd)],_0x2448b8)));const _0xec2769=BrowserstackCLI[_0x35cc5a(0x249)]()['modules'][_0x35cc5a(0x233)]?.[_0x35cc5a(0x23b)]?.[_0x35cc5a(0x1d4)]()?.[_0x35cc5a(0x214)],_0x46155c=path[_0x35cc5a(0x1ef)](_0x2448b8,_0xec2769);!fs[_0x35cc5a(0x1e3)](_0x46155c)&&(fs['mkdirSync'](_0x46155c),this['logger'][_0x35cc5a(0x24e)](util[_0x35cc5a(0x1c8)](_0x3efcb1[_0x35cc5a(0x21c)],_0x46155c)));if(_0x3efcb1[_0x35cc5a(0x225)](_0x46e2a5[_0x35cc5a(0x23e)](),'')){this[_0x35cc5a(0x246)]['debug'](util['format'](_0x3efcb1[_0x35cc5a(0x255)]));return;}if(_0x46e2a5[_0x35cc5a(0x20b)](_0x3efcb1['ODHaC'])||_0x46e2a5[_0x35cc5a(0x20b)](_0x3efcb1[_0x35cc5a(0x224)])){const _0xa1a8f5=_0x46e2a5['startsWith'](_0x3efcb1[_0x35cc5a(0x213)])?https:http,_0x194411=path[_0x35cc5a(0x1cc)](_0x46e2a5),_0x20baae=path['join'](_0x46155c,_0x194411),_0x2aa9dd=fs[_0x35cc5a(0x206)](_0x20baae);_0xa1a8f5[_0x35cc5a(0x23c)](_0x46e2a5,_0x4fb825=>{const _0x23f147=_0x35cc5a,_0x549b66={'jemUK':function(_0x1c64e5,_0x2c9484){const _0x437be7=a89_0x1aa2;return _0x3efcb1[_0x437be7(0x226)](_0x1c64e5,_0x2c9484);},'GlFTo':function(_0x44a021,_0x2b9312){const _0x31be12=a89_0x1aa2;return _0x3efcb1[_0x31be12(0x231)](_0x44a021,_0x2b9312);},'hqFIG':function(_0x2e3ca9,_0x3f2d10){return _0x3efcb1['NaNiw'](_0x2e3ca9,_0x3f2d10);},'AsaRD':_0x3efcb1[_0x23f147(0x250)],'oixqX':_0x3efcb1[_0x23f147(0x1fa)]};if(_0x3efcb1[_0x23f147(0x225)](_0x4fb825[_0x23f147(0x23f)],0xc8))_0x4fb825[_0x23f147(0x1eb)](_0x2aa9dd),_0x2aa9dd['on'](_0x3efcb1[_0x23f147(0x251)],()=>{const _0x31e5ab=_0x23f147;_0x2aa9dd[_0x31e5ab(0x203)]();const _0x29accf=fs['statSync'](_0x20baae),_0x26a8ce=_0x549b66[_0x31e5ab(0x24a)](_0x29accf[_0x31e5ab(0x234)],_0x549b66[_0x31e5ab(0x253)](0x400,0x400));if(_0x549b66[_0x31e5ab(0x1d1)](_0x26a8ce,0x64)){this[_0x31e5ab(0x246)][_0x31e5ab(0x24e)](util[_0x31e5ab(0x1c8)](_0x549b66[_0x31e5ab(0x217)],_0x26a8ce[_0x31e5ab(0x1f0)](0x2))),fs[_0x31e5ab(0x1c9)](_0x20baae);return;}this[_0x31e5ab(0x246)][_0x31e5ab(0x24e)](util[_0x31e5ab(0x1c8)](_0x549b66[_0x31e5ab(0x201)],_0x20baae)),uploadAttachmentsManager[_0x31e5ab(0x20c)](_0x20baae,_0x31e288);});else{this[_0x23f147(0x246)][_0x23f147(0x24e)](util[_0x23f147(0x1c8)](_0x3efcb1[_0x23f147(0x244)],_0x4fb825['statusCode'])),_0x2aa9dd[_0x23f147(0x203)](),fs[_0x23f147(0x1c9)](_0x20baae);return;}})['on'](_0x3efcb1[_0x35cc5a(0x1ed)],_0x1147f5=>{const _0x3af807=_0x35cc5a;this['logger'][_0x3af807(0x24e)](util[_0x3af807(0x1c8)](_0x3efcb1[_0x3af807(0x22c)],_0x1147f5[_0x3af807(0x1e6)])),_0x2aa9dd['close'](),fs[_0x3af807(0x1c9)](_0x20baae);return;});}else{if(!fs[_0x35cc5a(0x1e3)](_0x46e2a5)){this[_0x35cc5a(0x246)]['debug'](util[_0x35cc5a(0x1c8)](_0x3efcb1[_0x35cc5a(0x1c6)],_0x46e2a5));return;}const _0x445b34=fs[_0x35cc5a(0x248)](_0x46e2a5),_0x589487=_0x3efcb1[_0x35cc5a(0x226)](_0x445b34['size'],_0x3efcb1[_0x35cc5a(0x231)](0x400,0x400));if(_0x3efcb1[_0x35cc5a(0x219)](_0x589487,0x64)){this[_0x35cc5a(0x246)][_0x35cc5a(0x24e)](util['format'](_0x3efcb1[_0x35cc5a(0x1ca)],_0x589487['toFixed'](0x2)));return;}const _0x5d9e60=path[_0x35cc5a(0x1cc)](_0x46e2a5),_0x2997bc=path['join'](_0x46155c,_0x5d9e60);fs[_0x35cc5a(0x202)](_0x46e2a5,_0x2997bc),uploadAttachmentsManager[_0x35cc5a(0x20c)](_0x2997bc,_0x31e288);}}static[a89_0x5087b6(0x20c)](_0x508b0a,_0x452f6c){const _0x53d237=a89_0x5087b6,_0x11b2e5={'LFOos':function(_0x31b118,_0x5b4b5d){return _0x31b118(_0x5b4b5d);},'TrFhY':'./browserstackCLI','ybglU':_0x53d237(0x1d7),'fLEyl':function(_0x292f7b,_0x25e9a4){return _0x292f7b===_0x25e9a4;},'AurwW':_0x53d237(0x1e5),'VGETQ':_0x53d237(0x242),'yJGXB':_0x53d237(0x1f4),'eTgDB':'TestLevel','aBpKx':_0x53d237(0x1ee),'ijigR':function(_0x3b4bed,_0x39362b){return _0x3b4bed(_0x39362b);},'qihao':'./state/testFrameworkState','fxgcB':function(_0x50ac7f,_0x4f1c4f){return _0x50ac7f(_0x4f1c4f);},'gAxuR':_0x53d237(0x223),'gekec':_0x53d237(0x1e4),'NsOQR':_0x53d237(0x1fb),'hKcOb':_0x53d237(0x24d)};try{let _0x55692d;const _0x22afad=global[_0x53d237(0x247)]?.[_0x53d237(0x239)]?.[_0x53d237(0x1cb)],_0x15e8a9=_0x11b2e5[_0x53d237(0x241)](require,_0x11b2e5[_0x53d237(0x20f)]),_0x9d0ccd=_0x11b2e5[_0x53d237(0x241)](require,_0x11b2e5[_0x53d237(0x1f9)]),_0x533675=_0x15e8a9[_0x53d237(0x249)]()[_0x53d237(0x243)]()&&_0x11b2e5['fLEyl'](_0x9d0ccd[_0x53d237(0x200)]()?.['name']?.[_0x53d237(0x1e2)](),_0x11b2e5['AurwW']);if(_0x533675){_0x55692d=global[_0x53d237(0x218)];if(!_0x55692d){const _0x3872c8=AutomationFramework[_0x53d237(0x1f2)]();_0x55692d=AutomationFramework[_0x53d237(0x210)](_0x3872c8,PlaywrightDriverModule[_0x53d237(0x208)],'');}this[_0x53d237(0x246)]['debug'](_0x53d237(0x22f)+_0x55692d);}else{if(!_0x22afad){const _0x371b77=AutomationFramework[_0x53d237(0x1f2)]();_0x55692d=AutomationFramework[_0x53d237(0x210)](_0x371b77,PlaywrightDriverModule[_0x53d237(0x208)],'');}else _0x55692d=TestInfo['getTestIdentifierFromTestInfo'](_0x22afad,_0x22afad[_0x53d237(0x209)]);this[_0x53d237(0x246)][_0x53d237(0x24e)](_0x53d237(0x1dd)+_0x55692d);}if(!_0x55692d){this['logger']['debug'](_0x11b2e5[_0x53d237(0x1ea)]);return;}const _0xa29f3e={[TestFrameworkConstants['KEY_FILE_SIZE']]:fs[_0x53d237(0x248)](_0x508b0a)[_0x53d237(0x234)],[TestFrameworkConstants[_0x53d237(0x230)]]:path[_0x53d237(0x1cc)](_0x508b0a),[TestFrameworkConstants['KEY_FILE_PATH']]:_0x508b0a,[TestFrameworkConstants[_0x53d237(0x20e)]]:_0x452f6c?_0x11b2e5[_0x53d237(0x205)]:_0x11b2e5[_0x53d237(0x1e1)]};if(_0x533675){const _0x167b58=_0x15e8a9['getInstance']()[_0x53d237(0x221)]();if(!_0x167b58){this[_0x53d237(0x246)]['debug'](_0x11b2e5[_0x53d237(0x23a)]);return;}const _0x4fb304=_0x11b2e5[_0x53d237(0x20a)](require,_0x11b2e5['qihao']),_0x2dec72=_0x11b2e5[_0x53d237(0x1c5)](require,_0x11b2e5[_0x53d237(0x1d0)]),_0x2c6b60=_0x167b58[_0x53d237(0x1dc)](_0x4fb304[_0x53d237(0x215)],_0x2dec72[_0x53d237(0x254)]);if(!_0x2c6b60){this[_0x53d237(0x246)][_0x53d237(0x24e)](_0x11b2e5['gekec']);return;}const _0x3113dd=_0x2c6b60[_0x53d237(0x22b)]()[_0x53d237(0x23c)](_0x55692d)||{},_0x17bbcc=_0x3113dd[TestFrameworkConstants[_0x53d237(0x237)]]||{},_0x550f09={..._0x17bbcc};_0x550f09[_0x508b0a]=_0xa29f3e;const _0x185cc5=_0x550f09,_0x47a09b={[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]:_0x185cc5},_0x58db25={};_0x58db25[_0x55692d]=_0x47a09b,_0x2c6b60[_0x53d237(0x1d3)](_0x58db25),this['logger'][_0x53d237(0x24e)](_0x53d237(0x20d)+_0x55692d+_0x53d237(0x1f8)+_0x508b0a);}else{const _0x5eded2=TestInfo[_0x53d237(0x220)](_0x55692d),_0x2eabc7=_0x5eded2[TestFrameworkConstants[_0x53d237(0x237)]]||{};_0x2eabc7[_0x508b0a]=_0xa29f3e,_0x5eded2[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]=_0x2eabc7,TestInfo[_0x53d237(0x22d)](_0x55692d,_0x5eded2),this['logger'][_0x53d237(0x24e)](_0x53d237(0x1cf)+_0x55692d+',\x20filepath:\x20'+_0x508b0a);}this[_0x53d237(0x246)]['debug'](util[_0x53d237(0x1c8)](_0x11b2e5['NsOQR'],_0x508b0a));}catch(_0x1e1ff2){this[_0x53d237(0x246)]['debug'](util[_0x53d237(0x1c8)](_0x11b2e5[_0x53d237(0x1de)],_0x1e1ff2[_0x53d237(0x1e6)]));}}static[a89_0x5087b6(0x1fd)](){const _0x5a706a=a89_0x5087b6,_0xfb239a={};_0xfb239a['HSLDE']=_0x5a706a(0x1db),_0xfb239a[_0x5a706a(0x1ec)]=_0x5a706a(0x204),_0xfb239a[_0x5a706a(0x21a)]=_0x5a706a(0x23d);const _0x1631c3=_0xfb239a,_0x3ab881=os['homedir'](),_0x4b1aba=path[_0x5a706a(0x1ef)](_0x3ab881,_0x1631c3[_0x5a706a(0x1f3)]);if(!fs[_0x5a706a(0x1e3)](_0x4b1aba))return;const _0x11260e=BrowserstackCLI[_0x5a706a(0x249)]()[_0x5a706a(0x24f)]['TestHubModule']?.[_0x5a706a(0x23b)]?.[_0x5a706a(0x1d4)]()?.[_0x5a706a(0x214)],_0x13eecb=_0x11260e?path[_0x5a706a(0x1ef)](_0x4b1aba,_0x11260e):null;if(!_0x13eecb||!fs[_0x5a706a(0x1e3)](_0x13eecb)){this[_0x5a706a(0x246)][_0x5a706a(0x24e)](util['format'](_0x1631c3['ADqFt'],_0x11260e));return;}const _0x4d14db={};_0x4d14db[_0x5a706a(0x1f1)]=!![],_0x4d14db[_0x5a706a(0x252)]=!![],fs['rmSync'](_0x13eecb,_0x4d14db),this[_0x5a706a(0x246)]['debug'](util[_0x5a706a(0x1c8)](_0x1631c3[_0x5a706a(0x21a)]));}}function a89_0x1aa2(_0xf03447,_0x29f819){const _0x15a342=a89_0x15a3();return a89_0x1aa2=function(_0x1aa28c,_0xa63e7a){_0x1aa28c=_0x1aa28c-0x1c4;let _0x11fe50=_0x15a342[_0x1aa28c];return _0x11fe50;},a89_0x1aa2(_0xf03447,_0x29f819);}module[a89_0x5087b6(0x1fe)]=uploadAttachmentsManager;