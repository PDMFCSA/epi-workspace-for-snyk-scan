const a85_0x35eb17=a85_0x3020;(function(_0x505452,_0x410f9d){const _0x3dcc68=a85_0x3020,_0x1575c8=_0x505452();while(!![]){try{const _0x1f3a66=-parseInt(_0x3dcc68(0x1b3))/0x1+parseInt(_0x3dcc68(0x1e4))/0x2*(-parseInt(_0x3dcc68(0x1f8))/0x3)+parseInt(_0x3dcc68(0x1af))/0x4*(parseInt(_0x3dcc68(0x1c9))/0x5)+parseInt(_0x3dcc68(0x214))/0x6*(parseInt(_0x3dcc68(0x1cd))/0x7)+-parseInt(_0x3dcc68(0x1b4))/0x8+parseInt(_0x3dcc68(0x1cb))/0x9+parseInt(_0x3dcc68(0x1fb))/0xa*(parseInt(_0x3dcc68(0x1bc))/0xb);if(_0x1f3a66===_0x410f9d)break;else _0x1575c8['push'](_0x1575c8['shift']());}catch(_0x21b5e8){_0x1575c8['push'](_0x1575c8['shift']());}}}(a85_0x583f,0xef590));const os=require('os'),fs=require('fs'),path=require('path'),util=require('util'),BrowserstackCLI=require('./browserstackCLI'),https=require('https'),http=require(a85_0x35eb17(0x1b0)),AutomationFramework=require(a85_0x35eb17(0x1e0)),PlaywrightDriverModule=require(a85_0x35eb17(0x1f1)),TestInfo=require(a85_0x35eb17(0x202)),TestFrameworkConstants=require(a85_0x35eb17(0x1b9)),{createClassLogger}=require(a85_0x35eb17(0x1c4));class uploadAttachmentsManager{static [a85_0x35eb17(0x1ec)]=createClassLogger('uploadAttachmentsManager');static[a85_0x35eb17(0x1ed)](_0x18a10a,_0xde0538=![]){const _0x1c9652=a85_0x35eb17,_0x3a84e6={};_0x3a84e6[_0x1c9652(0x20a)]=function(_0x4178dc,_0x42d4ee){return _0x4178dc/_0x42d4ee;},_0x3a84e6[_0x1c9652(0x1bf)]=function(_0x4fab0f,_0x1083c3){return _0x4fab0f*_0x1083c3;},_0x3a84e6[_0x1c9652(0x1d1)]=function(_0x2f32f8,_0x3aff32){return _0x2f32f8>_0x3aff32;},_0x3a84e6[_0x1c9652(0x1ba)]='Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.',_0x3a84e6[_0x1c9652(0x206)]=_0x1c9652(0x1f3),_0x3a84e6['uGaUT']=function(_0x39bd25,_0x4eb5bd){return _0x39bd25===_0x4eb5bd;},_0x3a84e6[_0x1c9652(0x1d8)]=_0x1c9652(0x1d0),_0x3a84e6[_0x1c9652(0x1c2)]='Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload',_0x3a84e6[_0x1c9652(0x1b8)]=_0x1c9652(0x1c6),_0x3a84e6[_0x1c9652(0x1e7)]=_0x1c9652(0x1fe),_0x3a84e6[_0x1c9652(0x1fa)]='.browserstack',_0x3a84e6[_0x1c9652(0x207)]=_0x1c9652(0x209),_0x3a84e6[_0x1c9652(0x1e1)]='Created\x20.browserstack\x20folder\x20at:\x20%s',_0x3a84e6[_0x1c9652(0x213)]=_0x1c9652(0x1b2),_0x3a84e6[_0x1c9652(0x1bb)]=function(_0x3b1c8d,_0x22ce31){return _0x3b1c8d===_0x22ce31;},_0x3a84e6[_0x1c9652(0x1c5)]=_0x1c9652(0x1fd),_0x3a84e6['QaXYn']=_0x1c9652(0x205),_0x3a84e6['HchzX']=_0x1c9652(0x1ee),_0x3a84e6[_0x1c9652(0x210)]=_0x1c9652(0x1d4),_0x3a84e6['YOvna']=_0x1c9652(0x1e5),_0x3a84e6[_0x1c9652(0x1c1)]=function(_0x185ffb,_0x29643d){return _0x185ffb/_0x29643d;},_0x3a84e6['iOeNI']=function(_0x104454,_0x50f809){return _0x104454*_0x50f809;},_0x3a84e6['EyuZF']=_0x1c9652(0x1c8);const _0x344884=_0x3a84e6;this[_0x1c9652(0x1ec)][_0x1c9652(0x1fc)](util[_0x1c9652(0x1dc)](_0x344884['FpRlr'],_0x18a10a));const _0x282bf6=os[_0x1c9652(0x1c3)](),_0x431a09=path['join'](_0x282bf6,_0x344884[_0x1c9652(0x1fa)]);!fs[_0x1c9652(0x20d)](_0x431a09)&&(this[_0x1c9652(0x1ec)][_0x1c9652(0x1fc)](util['format'](_0x344884['mPFpA'],_0x431a09)),fs[_0x1c9652(0x1c7)](_0x431a09),this[_0x1c9652(0x1ec)][_0x1c9652(0x1fc)](util[_0x1c9652(0x1dc)](_0x344884['pDphD'],_0x431a09)));const _0x352bf9=BrowserstackCLI[_0x1c9652(0x1cf)]()[_0x1c9652(0x1ad)]['TestHubModule']?.[_0x1c9652(0x1b7)]?.[_0x1c9652(0x20f)]()?.['buildHashedId'],_0x58291b=path[_0x1c9652(0x1ce)](_0x431a09,_0x352bf9);!fs['existsSync'](_0x58291b)&&(fs['mkdirSync'](_0x58291b),this[_0x1c9652(0x1ec)][_0x1c9652(0x1fc)](util[_0x1c9652(0x1dc)](_0x344884[_0x1c9652(0x213)],_0x58291b)));if(_0x344884['BEGfd'](_0x18a10a[_0x1c9652(0x1d2)](),'')){this['logger'][_0x1c9652(0x1fc)](util['format'](_0x344884['SWzDE']));return;}if(_0x18a10a[_0x1c9652(0x1e8)](_0x344884[_0x1c9652(0x200)])||_0x18a10a[_0x1c9652(0x1e8)](_0x344884['HchzX'])){const _0x2fc975=_0x18a10a[_0x1c9652(0x1e8)](_0x344884[_0x1c9652(0x200)])?https:http,_0x4a9437=path[_0x1c9652(0x1f7)](_0x18a10a),_0x12b68d=path[_0x1c9652(0x1ce)](_0x58291b,_0x4a9437),_0x461a46=fs[_0x1c9652(0x1b6)](_0x12b68d);_0x2fc975[_0x1c9652(0x1f4)](_0x18a10a,_0x276e84=>{const _0x1d5cba=_0x1c9652;if(_0x344884[_0x1d5cba(0x1ea)](_0x276e84['statusCode'],0xc8))_0x276e84[_0x1d5cba(0x212)](_0x461a46),_0x461a46['on'](_0x344884[_0x1d5cba(0x1d8)],()=>{const _0x7642dd=_0x1d5cba;_0x461a46['close']();const _0x54b39e=fs[_0x7642dd(0x1dd)](_0x12b68d),_0x2e0858=_0x344884['LASuh'](_0x54b39e[_0x7642dd(0x1b1)],_0x344884[_0x7642dd(0x1bf)](0x400,0x400));if(_0x344884['jUknj'](_0x2e0858,0x64)){this[_0x7642dd(0x1ec)][_0x7642dd(0x1fc)](util['format'](_0x344884['yegwX'],_0x2e0858[_0x7642dd(0x1f0)](0x2))),fs[_0x7642dd(0x1db)](_0x12b68d);return;}this[_0x7642dd(0x1ec)][_0x7642dd(0x1fc)](util[_0x7642dd(0x1dc)](_0x344884[_0x7642dd(0x206)],_0x12b68d)),uploadAttachmentsManager[_0x7642dd(0x1be)](_0x12b68d,_0xde0538);});else{this['logger']['debug'](util['format'](_0x344884[_0x1d5cba(0x1c2)],_0x276e84['statusCode'])),_0x461a46[_0x1d5cba(0x1ff)](),fs[_0x1d5cba(0x1db)](_0x12b68d);return;}})['on'](_0x344884['ilGTx'],_0x9f68ef=>{const _0x4b7c68=_0x1c9652;this[_0x4b7c68(0x1ec)][_0x4b7c68(0x1fc)](util[_0x4b7c68(0x1dc)](_0x344884[_0x4b7c68(0x1b8)],_0x9f68ef[_0x4b7c68(0x208)])),_0x461a46['close'](),fs['unlinkSync'](_0x12b68d);return;});}else{if(!fs[_0x1c9652(0x20d)](_0x18a10a)){this['logger'][_0x1c9652(0x1fc)](util[_0x1c9652(0x1dc)](_0x344884[_0x1c9652(0x1da)],_0x18a10a));return;}const _0x1d923b=fs[_0x1c9652(0x1dd)](_0x18a10a),_0x542bc7=_0x344884[_0x1c9652(0x1c1)](_0x1d923b[_0x1c9652(0x1b1)],_0x344884[_0x1c9652(0x1ef)](0x400,0x400));if(_0x344884[_0x1c9652(0x1d1)](_0x542bc7,0x64)){this['logger'][_0x1c9652(0x1fc)](util[_0x1c9652(0x1dc)](_0x344884[_0x1c9652(0x1bd)],_0x542bc7[_0x1c9652(0x1f0)](0x2)));return;}const _0x265ba2=path['basename'](_0x18a10a),_0x21a6d0=path[_0x1c9652(0x1ce)](_0x58291b,_0x265ba2);fs[_0x1c9652(0x1f5)](_0x18a10a,_0x21a6d0),uploadAttachmentsManager[_0x1c9652(0x1be)](_0x21a6d0,_0xde0538);}}static[a85_0x35eb17(0x1be)](_0x277a95,_0x180892){const _0xa5fcc4=a85_0x35eb17,_0x33097e={};_0x33097e[_0xa5fcc4(0x1ae)]=_0xa5fcc4(0x1d9),_0x33097e[_0xa5fcc4(0x1f6)]=_0xa5fcc4(0x1f2),_0x33097e[_0xa5fcc4(0x211)]=_0xa5fcc4(0x1c0),_0x33097e[_0xa5fcc4(0x1de)]=_0xa5fcc4(0x204);const _0x4ddfbf=_0x33097e;try{let _0x2d3b0e;const _0x6a68fe=global['__workerDetails']?.[_0xa5fcc4(0x1ac)]?.[_0xa5fcc4(0x1e6)];if(!_0x6a68fe){const _0x5e5786=AutomationFramework[_0xa5fcc4(0x201)]();_0x2d3b0e=AutomationFramework[_0xa5fcc4(0x1e2)](_0x5e5786,PlaywrightDriverModule[_0xa5fcc4(0x20b)],'');}else _0x2d3b0e=TestInfo[_0xa5fcc4(0x1ca)](_0x6a68fe,_0x6a68fe['retry']);const _0x19dbff=TestInfo[_0xa5fcc4(0x1eb)](_0x2d3b0e),_0x4f7ae2=_0x19dbff[TestFrameworkConstants[_0xa5fcc4(0x203)]]||{};_0x4f7ae2[_0x277a95]={[TestFrameworkConstants['KEY_FILE_SIZE']]:fs[_0xa5fcc4(0x1dd)](_0x277a95)[_0xa5fcc4(0x1b1)],[TestFrameworkConstants[_0xa5fcc4(0x1b5)]]:path['basename'](_0x277a95),[TestFrameworkConstants[_0xa5fcc4(0x1d6)]]:_0x277a95,[TestFrameworkConstants['KEY_FILE_LEVEL']]:_0x180892?_0x4ddfbf[_0xa5fcc4(0x1ae)]:_0x4ddfbf['rPZeV']},_0x19dbff[TestFrameworkConstants[_0xa5fcc4(0x203)]]=_0x4f7ae2,TestInfo[_0xa5fcc4(0x1e3)](_0x2d3b0e,_0x19dbff),this[_0xa5fcc4(0x1ec)][_0xa5fcc4(0x1fc)](util[_0xa5fcc4(0x1dc)](_0x4ddfbf[_0xa5fcc4(0x211)],_0x277a95));}catch(_0x229064){this[_0xa5fcc4(0x1ec)][_0xa5fcc4(0x1fc)](util[_0xa5fcc4(0x1dc)](_0x4ddfbf[_0xa5fcc4(0x1de)],_0x229064[_0xa5fcc4(0x208)]));}}static[a85_0x35eb17(0x1d3)](){const _0x3a4e9d=a85_0x35eb17,_0x330d18={};_0x330d18['DFGPK']=_0x3a4e9d(0x1d7),_0x330d18['XyzEf']=_0x3a4e9d(0x20c),_0x330d18[_0x3a4e9d(0x1f9)]=_0x3a4e9d(0x1cc);const _0x64b0f9=_0x330d18,_0x2cf2f8=os[_0x3a4e9d(0x1c3)](),_0x472009=path[_0x3a4e9d(0x1ce)](_0x2cf2f8,_0x64b0f9['DFGPK']);if(!fs[_0x3a4e9d(0x20d)](_0x472009))return;const _0x39df1f=BrowserstackCLI[_0x3a4e9d(0x1cf)]()[_0x3a4e9d(0x1ad)]['TestHubModule']?.[_0x3a4e9d(0x1b7)]?.['toObject']()?.[_0x3a4e9d(0x1df)],_0x2bc079=_0x39df1f?path['join'](_0x472009,_0x39df1f):null;if(!_0x2bc079||!fs[_0x3a4e9d(0x20d)](_0x2bc079)){this[_0x3a4e9d(0x1ec)]['debug'](util[_0x3a4e9d(0x1dc)](_0x64b0f9[_0x3a4e9d(0x1d5)],_0x39df1f));return;}const _0x377c70={};_0x377c70[_0x3a4e9d(0x20e)]=!![],_0x377c70[_0x3a4e9d(0x1e9)]=!![],fs['rmSync'](_0x2bc079,_0x377c70),this[_0x3a4e9d(0x1ec)][_0x3a4e9d(0x1fc)](util[_0x3a4e9d(0x1dc)](_0x64b0f9[_0x3a4e9d(0x1f9)]));}}function a85_0x583f(){const _0x581933=['TestLevel','File\x20downloaded\x20to:\x20%s','get','copyFileSync','rPZeV','basename','138dFYYrI','WYNEv','IocbP','610LpGoHX','debug','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','Attachment\x20recevied\x20for\x20path:\x20%s','close','QaXYn','getTrackedInstance','./TestInfo','KEY_TEST_ATTACHMENTS','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','https://','eKVXi','mPFpA','message','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','LASuh','KEY_TEST_ID','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','existsSync','recursive','toObject','ilGTx','DqtrN','pipe','JonEe','18kroqnE','currentTest','modules','TECzy','72140cvCcCj','http','size','Created\x20folder:\x20%s','1657941aVBfnK','7883080OUSxTY','KEY_FILE_NAME','createWriteStream','testhubConfig','tSmDL','./framework/constants/testFrameworkConstants','yegwX','BEGfd','386551fdKajj','EyuZF','trackFile','CIBEk','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','Vbong','DSDBF','homedir','../../helpers/classLogger.js','SWzDE','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','mkdirSync','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','30HeQAvB','getTestIdentifierFromTestInfo','9581004qtAHFf','Cleared\x20attachment\x20folder','3271737OJqumo','join','getInstance','finish','jUknj','trim','clearAttachments','error','XyzEf','KEY_FILE_PATH','.browserstack','VuBAw','BuildLevel','YOvna','unlinkSync','format','statSync','VtMvz','buildHashedId','./framework/automationFramework','pDphD','getState','setTestDetails','47602YmfNMj','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','testInfo','FpRlr','startsWith','force','uGaUT','getTestDetails','logger','uploadAttachments','http://','iOeNI','toFixed','./modules/playwrightDriverModule'];a85_0x583f=function(){return _0x581933;};return a85_0x583f();}function a85_0x3020(_0x305166,_0x7f2f20){const _0x583fb8=a85_0x583f();return a85_0x3020=function(_0x302085,_0x5e4692){_0x302085=_0x302085-0x1ac;let _0x305c51=_0x583fb8[_0x302085];return _0x305c51;},a85_0x3020(_0x305166,_0x7f2f20);}module['exports']=uploadAttachmentsManager;