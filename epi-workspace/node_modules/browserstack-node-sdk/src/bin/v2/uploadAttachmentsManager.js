function a89_0x5cf9(){const _0x52f95a=['debug','statSync','existsSync','./state/hookState','logger','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','getAllData','5803wyahdM','sSKIj','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','./cliUtils','1304cleRvy','JKZKR','http','./TestInfo','JXWyl','3815174regqBg','util','14629ihnZXz','KEY_FILE_LEVEL','copyFileSync','getTestFramework','getTestIdentifierFromTestInfo','AdrkM','toFixed','clearAttachments','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','./state/testFrameworkState','mWktQ','HbdRg','basename','uploadAttachmentsManager','./modules/playwrightDriverModule','dcDyC','37278fbpVvr','.browserstack','gRDij','iNXxr','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','toLowerCase','addMultipleEntries','dSkBc','name','TEST','1602TusNeW','trackFile:\x20Stored\x20attachment\x20in\x20TestInfo\x20file\x20for\x20testId:\x20','oIado','uploadAttachments','349516cWFrIn','BuildLevel',',\x20filepath:\x20','close','join','trackFile','4udIKGJ','startsWith','http://','abzxa','format','QKFlg','pipe','getTrackedInstance','qYCwL','https://','statusCode','210WRVOhP','xSLrK','JoDic','getTestDetails','UtJEu','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','POST','jest','message','pHsiF','unlinkSync','LZhhm','PjqZt','KEY_TEST_ID','./framework/constants/testFrameworkConstants','modules','Created\x20folder:\x20%s','testhubConfig','homedir','setTestDetails','size','WeDkr','wutxg','yxLTt','retry','SmrOS','TestLevel','exports','lhGxW','getTestFrameworkDetail','MieIV','GQQya','buildHashedId','YScUy','../../helpers/classLogger.js','wlnpH','QBxls','toObject','GYcKH','Created\x20.browserstack\x20folder\x20at:\x20%s','finish','getInstance','ElCQS','WZsCI','3865mcNKKL','trackFile:\x20TestFramework\x20not\x20available,\x20cannot\x20track\x20attachment','oNdYg','KEY_FILE_SIZE','error','Attachment\x20recevied\x20for\x20path:\x20%s','SFOxe','eamvU','sriNS','KEY_TEST_ATTACHMENTS','hLEPO','__workerDetails','mkdirSync','TestHubModule','createWriteStream','83106NwJiCF','Xstfl','trackFile:\x20Jest+Playwright\x20-\x20testId\x20(testIdentifier):\x20','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','ICHVL','ZUpCZ','getState'];a89_0x5cf9=function(){return _0x52f95a;};return a89_0x5cf9();}function a89_0x4ae6(_0x35d3c,_0x4d3e89){const _0x5cf998=a89_0x5cf9();return a89_0x4ae6=function(_0x4ae673,_0x535a08){_0x4ae673=_0x4ae673-0xee;let _0x1b9ea0=_0x5cf998[_0x4ae673];return _0x1b9ea0;},a89_0x4ae6(_0x35d3c,_0x4d3e89);}const a89_0x539d20=a89_0x4ae6;(function(_0x2f7639,_0x5f4797){const _0x4300f6=a89_0x4ae6,_0x3723db=_0x2f7639();while(!![]){try{const _0x349260=-parseInt(_0x4300f6(0x10d))/0x1*(-parseInt(_0x4300f6(0x131))/0x2)+-parseInt(_0x4300f6(0x11d))/0x3+-parseInt(_0x4300f6(0x12b))/0x4+-parseInt(_0x4300f6(0x168))/0x5*(parseInt(_0x4300f6(0x127))/0x6)+parseInt(_0x4300f6(0x102))/0x7*(-parseInt(_0x4300f6(0x106))/0x8)+parseInt(_0x4300f6(0xf4))/0x9*(parseInt(_0x4300f6(0x13c))/0xa)+parseInt(_0x4300f6(0x10b))/0xb;if(_0x349260===_0x5f4797)break;else _0x3723db['push'](_0x3723db['shift']());}catch(_0x1f9207){_0x3723db['push'](_0x3723db['shift']());}}}(a89_0x5cf9,0x1f6ab));const os=require('os'),fs=require('fs'),path=require('path'),util=require(a89_0x539d20(0x10c)),BrowserstackCLI=require('./browserstackCLI'),https=require('https'),http=require(a89_0x539d20(0x108)),AutomationFramework=require('./framework/automationFramework'),PlaywrightDriverModule=require(a89_0x539d20(0x11b)),TestInfo=require(a89_0x539d20(0x109)),TestFrameworkConstants=require(a89_0x539d20(0x14a)),{createClassLogger}=require(a89_0x539d20(0x15e));class uploadAttachmentsManager{static [a89_0x539d20(0xff)]=createClassLogger(a89_0x539d20(0x11a));static[a89_0x539d20(0x12a)](_0x50186b,_0x795c15=![]){const _0xe694c7=a89_0x539d20,_0x54ef09={};_0x54ef09[_0xe694c7(0x139)]=function(_0x42840a,_0xbaabe1){return _0x42840a/_0xbaabe1;},_0x54ef09[_0xe694c7(0x103)]=function(_0x4a9445,_0x29a725){return _0x4a9445*_0x29a725;},_0x54ef09[_0xe694c7(0x13e)]=function(_0x5f13a7,_0x47ae43){return _0x5f13a7>_0x47ae43;},_0x54ef09[_0xe694c7(0x10a)]='Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.',_0x54ef09[_0xe694c7(0x148)]='File\x20downloaded\x20to:\x20%s',_0x54ef09[_0xe694c7(0x11f)]=function(_0x485f3e,_0x3992ac){return _0x485f3e===_0x3992ac;},_0x54ef09['SFOxe']=_0xe694c7(0x164),_0x54ef09[_0xe694c7(0x140)]=_0xe694c7(0x104),_0x54ef09['Opvdt']=_0xe694c7(0x100),_0x54ef09[_0xe694c7(0x107)]=_0xe694c7(0x16d),_0x54ef09[_0xe694c7(0xef)]=_0xe694c7(0x11e),_0x54ef09[_0xe694c7(0xf8)]='.browserstack\x20folder\x20not\x20found\x20at:\x20%s',_0x54ef09[_0xe694c7(0x15b)]=_0xe694c7(0x163),_0x54ef09[_0xe694c7(0x16a)]=_0xe694c7(0x14c),_0x54ef09[_0xe694c7(0x160)]=function(_0x566b93,_0x216a90){return _0x566b93===_0x216a90;},_0x54ef09[_0xe694c7(0x166)]='Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.',_0x54ef09[_0xe694c7(0x16f)]=_0xe694c7(0x13a),_0x54ef09[_0xe694c7(0x145)]=_0xe694c7(0x133),_0x54ef09[_0xe694c7(0x147)]=_0xe694c7(0x16c),_0x54ef09[_0xe694c7(0x117)]=_0xe694c7(0x141),_0x54ef09[_0xe694c7(0x124)]=function(_0x5f670d,_0x5f29e9){return _0x5f670d/_0x5f29e9;},_0x54ef09[_0xe694c7(0x118)]=function(_0x6b2520,_0x5557f3){return _0x6b2520*_0x5557f3;},_0x54ef09[_0xe694c7(0xf5)]=_0xe694c7(0x121);const _0x54e888=_0x54ef09;this['logger'][_0xe694c7(0xfb)](util[_0xe694c7(0x135)](_0x54e888[_0xe694c7(0x107)],_0x50186b));const _0x35be4d=os['homedir'](),_0x5a23dd=path[_0xe694c7(0x12f)](_0x35be4d,_0x54e888[_0xe694c7(0xef)]);!fs[_0xe694c7(0xfd)](_0x5a23dd)&&(this[_0xe694c7(0xff)][_0xe694c7(0xfb)](util[_0xe694c7(0x135)](_0x54e888[_0xe694c7(0xf8)],_0x5a23dd)),fs['mkdirSync'](_0x5a23dd),this[_0xe694c7(0xff)][_0xe694c7(0xfb)](util[_0xe694c7(0x135)](_0x54e888[_0xe694c7(0x15b)],_0x5a23dd)));const _0x59948a=BrowserstackCLI[_0xe694c7(0x165)]()[_0xe694c7(0x14b)][_0xe694c7(0xf2)]?.['testhubConfig']?.[_0xe694c7(0x161)]()?.[_0xe694c7(0x15c)],_0x17c49a=path[_0xe694c7(0x12f)](_0x5a23dd,_0x59948a);!fs['existsSync'](_0x17c49a)&&(fs[_0xe694c7(0xf1)](_0x17c49a),this[_0xe694c7(0xff)][_0xe694c7(0xfb)](util['format'](_0x54e888[_0xe694c7(0x16a)],_0x17c49a)));if(_0x54e888[_0xe694c7(0x160)](_0x50186b['trim'](),'')){this[_0xe694c7(0xff)][_0xe694c7(0xfb)](util[_0xe694c7(0x135)](_0x54e888['ElCQS']));return;}if(_0x50186b[_0xe694c7(0x132)](_0x54e888[_0xe694c7(0x16f)])||_0x50186b[_0xe694c7(0x132)](_0x54e888['pHsiF'])){const _0x17ab61=_0x50186b[_0xe694c7(0x132)](_0x54e888[_0xe694c7(0x16f)])?https:http,_0x3fbc6e=path[_0xe694c7(0x119)](_0x50186b),_0x5d40f0=path[_0xe694c7(0x12f)](_0x17c49a,_0x3fbc6e),_0x4761c7=fs[_0xe694c7(0xf3)](_0x5d40f0);_0x17ab61['get'](_0x50186b,_0x4eb2be=>{const _0x36521a=_0xe694c7,_0x22324f={'dcDyC':function(_0x4e9ee7,_0xd3187c){const _0x244232=a89_0x4ae6;return _0x54e888[_0x244232(0x139)](_0x4e9ee7,_0xd3187c);},'sriNS':function(_0x3c5dc9,_0x4c8ae8){const _0x5b3ae9=a89_0x4ae6;return _0x54e888[_0x5b3ae9(0x103)](_0x3c5dc9,_0x4c8ae8);},'abzxa':function(_0x497cdc,_0x47592e){const _0xbb15a6=a89_0x4ae6;return _0x54e888[_0xbb15a6(0x13e)](_0x497cdc,_0x47592e);},'RgTnu':_0x54e888['JXWyl'],'xSLrK':_0x54e888[_0x36521a(0x148)]};if(_0x54e888[_0x36521a(0x11f)](_0x4eb2be[_0x36521a(0x13b)],0xc8))_0x4eb2be[_0x36521a(0x137)](_0x4761c7),_0x4761c7['on'](_0x54e888[_0x36521a(0x16e)],()=>{const _0x575c2d=_0x36521a;_0x4761c7[_0x575c2d(0x12e)]();const _0x1bba9c=fs[_0x575c2d(0xfc)](_0x5d40f0),_0x367086=_0x22324f[_0x575c2d(0x11c)](_0x1bba9c['size'],_0x22324f[_0x575c2d(0x170)](0x400,0x400));if(_0x22324f[_0x575c2d(0x134)](_0x367086,0x64)){this[_0x575c2d(0xff)]['debug'](util['format'](_0x22324f['RgTnu'],_0x367086[_0x575c2d(0x113)](0x2))),fs['unlinkSync'](_0x5d40f0);return;}this[_0x575c2d(0xff)][_0x575c2d(0xfb)](util[_0x575c2d(0x135)](_0x22324f[_0x575c2d(0x13d)],_0x5d40f0)),uploadAttachmentsManager[_0x575c2d(0x130)](_0x5d40f0,_0x795c15);});else{this[_0x36521a(0xff)][_0x36521a(0xfb)](util['format'](_0x54e888[_0x36521a(0x140)],_0x4eb2be[_0x36521a(0x13b)])),_0x4761c7[_0x36521a(0x12e)](),fs[_0x36521a(0x146)](_0x5d40f0);return;}})['on'](_0x54e888[_0xe694c7(0x147)],_0x4cf81b=>{const _0x9ee53a=_0xe694c7;this[_0x9ee53a(0xff)][_0x9ee53a(0xfb)](util[_0x9ee53a(0x135)](_0x54e888['Opvdt'],_0x4cf81b[_0x9ee53a(0x144)])),_0x4761c7['close'](),fs[_0x9ee53a(0x146)](_0x5d40f0);return;});}else{if(!fs['existsSync'](_0x50186b)){this['logger']['debug'](util['format'](_0x54e888[_0xe694c7(0x117)],_0x50186b));return;}const _0x3e4c78=fs['statSync'](_0x50186b),_0x11f374=_0x54e888[_0xe694c7(0x124)](_0x3e4c78[_0xe694c7(0x150)],_0x54e888[_0xe694c7(0x118)](0x400,0x400));if(_0x54e888[_0xe694c7(0x13e)](_0x11f374,0x64)){this['logger']['debug'](util[_0xe694c7(0x135)](_0x54e888['Xstfl'],_0x11f374['toFixed'](0x2)));return;}const _0x513520=path[_0xe694c7(0x119)](_0x50186b),_0x166ebc=path[_0xe694c7(0x12f)](_0x17c49a,_0x513520);fs[_0xe694c7(0x10f)](_0x50186b,_0x166ebc),uploadAttachmentsManager['trackFile'](_0x166ebc,_0x795c15);}}static[a89_0x539d20(0x130)](_0x529102,_0x26263a){const _0x4f2603=a89_0x539d20,_0x422b86={'MieIV':function(_0x356051,_0x5a4b66){return _0x356051(_0x5a4b66);},'oFadI':'./browserstackCLI','QKFlg':_0x4f2603(0x105),'DBMhc':function(_0x99708b,_0x3aa16){return _0x99708b===_0x3aa16;},'GYcKH':_0x4f2603(0x143),'GFdEA':'trackFile:\x20No\x20testId\x20available,\x20cannot\x20track\x20attachment','wutxg':_0x4f2603(0x12c),'SmrOS':_0x4f2603(0x156),'WZsCI':_0x4f2603(0x169),'yxLTt':function(_0x42b022,_0x9cab2b){return _0x42b022(_0x9cab2b);},'wlnpH':_0x4f2603(0x116),'oIado':_0x4f2603(0xfe),'WeDkr':'trackFile:\x20Instance\x20not\x20available,\x20cannot\x20track\x20attachment','ZUpCZ':_0x4f2603(0xf7),'iNXxr':'Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload'};try{let _0x1b6b03;const _0x3229cf=global[_0x4f2603(0xf0)]?.['currentTest']?.['testInfo'],_0x38577d=_0x422b86[_0x4f2603(0x15a)](require,_0x422b86['oFadI']),_0x2d99d3=_0x422b86[_0x4f2603(0x15a)](require,_0x422b86[_0x4f2603(0x136)]),_0x2a9393=_0x38577d[_0x4f2603(0x165)]()['isRunning']()&&_0x422b86['DBMhc'](_0x2d99d3[_0x4f2603(0x159)]()?.[_0x4f2603(0x125)]?.[_0x4f2603(0x122)](),_0x422b86[_0x4f2603(0x162)]);if(_0x2a9393){_0x1b6b03=global['__jestCurrentTestIdentifier'];if(!_0x1b6b03){const _0x284f57=AutomationFramework[_0x4f2603(0x138)]();_0x1b6b03=AutomationFramework['getState'](_0x284f57,PlaywrightDriverModule[_0x4f2603(0x149)],'');}this[_0x4f2603(0xff)][_0x4f2603(0xfb)](_0x4f2603(0xf6)+_0x1b6b03);}else{if(!_0x3229cf){const _0x3b6e5a=AutomationFramework[_0x4f2603(0x138)]();_0x1b6b03=AutomationFramework[_0x4f2603(0xfa)](_0x3b6e5a,PlaywrightDriverModule[_0x4f2603(0x149)],'');}else _0x1b6b03=TestInfo[_0x4f2603(0x111)](_0x3229cf,_0x3229cf[_0x4f2603(0x154)]);this[_0x4f2603(0xff)][_0x4f2603(0xfb)]('trackFile:\x20Cucumber+Playwright\x20-\x20testId:\x20'+_0x1b6b03);}if(!_0x1b6b03){this[_0x4f2603(0xff)][_0x4f2603(0xfb)](_0x422b86['GFdEA']);return;}const _0xcb9d28={[TestFrameworkConstants[_0x4f2603(0x16b)]]:fs['statSync'](_0x529102)[_0x4f2603(0x150)],[TestFrameworkConstants['KEY_FILE_NAME']]:path[_0x4f2603(0x119)](_0x529102),[TestFrameworkConstants['KEY_FILE_PATH']]:_0x529102,[TestFrameworkConstants[_0x4f2603(0x10e)]]:_0x26263a?_0x422b86[_0x4f2603(0x152)]:_0x422b86[_0x4f2603(0x155)]};if(_0x2a9393){const _0x121355=_0x38577d[_0x4f2603(0x165)]()[_0x4f2603(0x110)]();if(!_0x121355){this['logger'][_0x4f2603(0xfb)](_0x422b86[_0x4f2603(0x167)]);return;}const _0x1b53d8=_0x422b86[_0x4f2603(0x153)](require,_0x422b86[_0x4f2603(0x15f)]),_0x26eaef=_0x422b86[_0x4f2603(0x153)](require,_0x422b86[_0x4f2603(0x129)]),_0x5f5c03=_0x121355['resolveInstance'](_0x1b53d8[_0x4f2603(0x126)],_0x26eaef[_0x4f2603(0x142)]);if(!_0x5f5c03){this[_0x4f2603(0xff)][_0x4f2603(0xfb)](_0x422b86[_0x4f2603(0x151)]);return;}const _0x49081a=_0x5f5c03[_0x4f2603(0x101)]()['get'](_0x1b6b03)||{},_0x49af96=_0x49081a[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{},_0x36c396={..._0x49af96};_0x36c396[_0x529102]=_0xcb9d28;const _0x5948c7=_0x36c396,_0x26cf8b={[TestFrameworkConstants[_0x4f2603(0xee)]]:_0x5948c7},_0xcfe579={};_0xcfe579[_0x1b6b03]=_0x26cf8b,_0x5f5c03[_0x4f2603(0x123)](_0xcfe579),this[_0x4f2603(0xff)][_0x4f2603(0xfb)]('trackFile:\x20Stored\x20attachment\x20in\x20instance\x20memory\x20for\x20testId:\x20'+_0x1b6b03+_0x4f2603(0x12d)+_0x529102);}else{const _0x3a3c69=TestInfo[_0x4f2603(0x13f)](_0x1b6b03),_0x19056c=_0x3a3c69[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{};_0x19056c[_0x529102]=_0xcb9d28,_0x3a3c69[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]=_0x19056c,TestInfo[_0x4f2603(0x14f)](_0x1b6b03,_0x3a3c69),this[_0x4f2603(0xff)][_0x4f2603(0xfb)](_0x4f2603(0x128)+_0x1b6b03+_0x4f2603(0x12d)+_0x529102);}this[_0x4f2603(0xff)][_0x4f2603(0xfb)](util[_0x4f2603(0x135)](_0x422b86[_0x4f2603(0xf9)],_0x529102));}catch(_0x27c377){this[_0x4f2603(0xff)][_0x4f2603(0xfb)](util[_0x4f2603(0x135)](_0x422b86[_0x4f2603(0x120)],_0x27c377[_0x4f2603(0x144)]));}}static[a89_0x539d20(0x114)](){const _0x2e6256=a89_0x539d20,_0x27543d={};_0x27543d[_0x2e6256(0x112)]=_0x2e6256(0x11e),_0x27543d['YScUy']=_0x2e6256(0x115),_0x27543d[_0x2e6256(0x158)]='Cleared\x20attachment\x20folder';const _0x6a9492=_0x27543d,_0x24fca8=os[_0x2e6256(0x14e)](),_0x2f9e94=path['join'](_0x24fca8,_0x6a9492['AdrkM']);if(!fs[_0x2e6256(0xfd)](_0x2f9e94))return;const _0x3c363b=BrowserstackCLI[_0x2e6256(0x165)]()[_0x2e6256(0x14b)][_0x2e6256(0xf2)]?.[_0x2e6256(0x14d)]?.[_0x2e6256(0x161)]()?.[_0x2e6256(0x15c)],_0x5bdcd6=_0x3c363b?path[_0x2e6256(0x12f)](_0x2f9e94,_0x3c363b):null;if(!_0x5bdcd6||!fs[_0x2e6256(0xfd)](_0x5bdcd6)){this[_0x2e6256(0xff)][_0x2e6256(0xfb)](util[_0x2e6256(0x135)](_0x6a9492[_0x2e6256(0x15d)],_0x3c363b));return;}const _0x29a671={};_0x29a671['recursive']=!![],_0x29a671['force']=!![],fs['rmSync'](_0x5bdcd6,_0x29a671),this['logger'][_0x2e6256(0xfb)](util[_0x2e6256(0x135)](_0x6a9492[_0x2e6256(0x158)]));}}module[a89_0x539d20(0x157)]=uploadAttachmentsManager;