function a89_0x5ec7(){const _0x2ef4e0=['trackFile','MsFLI','EzPNY','addMultipleEntries','statusCode','logger','unlinkSync','format','trackFile:\x20Stored\x20attachment\x20in\x20instance\x20memory\x20for\x20testId:\x20','./framework/automationFramework','./browserstackCLI','finish','trackFile:\x20Cucumber+Playwright\x20-\x20testId:\x20','JWgYA','message','../../helpers/classLogger.js','getState','bHdOD','resolveInstance','plzXk','close','homedir','./framework/constants/testFrameworkConstants','212gMpRec','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','uGQMw','./state/hookState','zfpsQ','536AmJRtA','trackFile:\x20No\x20testId\x20available,\x20cannot\x20track\x20attachment','exports','3997oBGibf','vuBYS','__workerDetails','currentTest','SOtLd','preIi','http://','SpwTO','alDrZ','modules','debug','tPOZu','http','pCwkL','./state/testFrameworkState','tCsij','7907YIUtan','https','JOGXw','.browserstack','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','mWiya','statSync','force','Cleared\x20attachment\x20folder','KEY_FILE_LEVEL','27867540GEhexG','existsSync','MdNZT','TestHubModule','inngs','sjMKw','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','toFixed','basename','pkcum','testhubConfig','5qUVKiB','sNieQ','name','KEY_FILE_NAME','testInfo','JWwmd',',\x20filepath:\x20','zgNOX','rmSync','getInstance','mkdirSync','./TestInfo','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','Created\x20folder:\x20%s','KEY_TEST_ID','POST','TEST','startsWith','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','TestLevel','2548446LhGrWy','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','get','1299426nfFrZP','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','utlPi','1433817cOfQsv','SsKYo','pipe','join','iXkkF','trackFile:\x20Stored\x20attachment\x20in\x20TestInfo\x20file\x20for\x20testId:\x20','util','getTrackedInstance','toObject','1484532zLyYUU','pLkcx','RWObk','xpaDU','setTestDetails','hJzQf','createWriteStream','buildHashedId','https://','UQmoP','byrTs','getTestIdentifierFromTestInfo','Created\x20.browserstack\x20folder\x20at:\x20%s','GsbbW','copyFileSync','aqdLY','size','trackFile:\x20Instance\x20not\x20available,\x20cannot\x20track\x20attachment','isRunning','./cliUtils','PIwBu','ewWTK','getAllData','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','uploadAttachments','KEY_FILE_PATH','KEY_TEST_ATTACHMENTS','File\x20downloaded\x20to:\x20%s'];a89_0x5ec7=function(){return _0x2ef4e0;};return a89_0x5ec7();}function a89_0x4ed0(_0x167027,_0x46ce01){const _0x5ec727=a89_0x5ec7();return a89_0x4ed0=function(_0x4ed059,_0x1a1b7e){_0x4ed059=_0x4ed059-0x160;let _0x203945=_0x5ec727[_0x4ed059];return _0x203945;},a89_0x4ed0(_0x167027,_0x46ce01);}const a89_0x3e0440=a89_0x4ed0;(function(_0x6915b6,_0x26e5ac){const _0x1030af=a89_0x4ed0,_0x3c0add=_0x6915b6();while(!![]){try{const _0x3aaef6=parseInt(_0x1030af(0x16f))/0x1*(-parseInt(_0x1030af(0x1da))/0x2)+-parseInt(_0x1030af(0x198))/0x3+-parseInt(_0x1030af(0x1a7))/0x4+parseInt(_0x1030af(0x184))/0x5*(-parseInt(_0x1030af(0x19b))/0x6)+parseInt(_0x1030af(0x1e2))/0x7*(-parseInt(_0x1030af(0x1df))/0x8)+parseInt(_0x1030af(0x19e))/0x9+parseInt(_0x1030af(0x179))/0xa;if(_0x3aaef6===_0x26e5ac)break;else _0x3c0add['push'](_0x3c0add['shift']());}catch(_0x2b390a){_0x3c0add['push'](_0x3c0add['shift']());}}}(a89_0x5ec7,0x9a6a2));const os=require('os'),fs=require('fs'),path=require('path'),util=require(a89_0x3e0440(0x1a4)),BrowserstackCLI=require(a89_0x3e0440(0x1cd)),https=require(a89_0x3e0440(0x170)),http=require(a89_0x3e0440(0x16b)),AutomationFramework=require(a89_0x3e0440(0x1cc)),PlaywrightDriverModule=require('./modules/playwrightDriverModule'),TestInfo=require(a89_0x3e0440(0x18f)),TestFrameworkConstants=require(a89_0x3e0440(0x1d9)),{createClassLogger}=require(a89_0x3e0440(0x1d2));class uploadAttachmentsManager{static [a89_0x3e0440(0x1c8)]=createClassLogger('uploadAttachmentsManager');static[a89_0x3e0440(0x1bf)](_0x1ce5c5,_0x95a9e2=![]){const _0x3571a4=a89_0x3e0440,_0x358be5={};_0x358be5[_0x3571a4(0x1d4)]=function(_0x159c8e,_0x64397d){return _0x159c8e/_0x64397d;},_0x358be5[_0x3571a4(0x1ac)]=function(_0x538f3a,_0x3117f9){return _0x538f3a*_0x3117f9;},_0x358be5[_0x3571a4(0x19d)]=function(_0x4cf17d,_0xf3af0){return _0x4cf17d>_0xf3af0;},_0x358be5[_0x3571a4(0x167)]=_0x3571a4(0x1db),_0x358be5[_0x3571a4(0x182)]=_0x3571a4(0x1c2),_0x358be5['tCsij']=function(_0x45eda9,_0x2aa688){return _0x45eda9===_0x2aa688;},_0x358be5[_0x3571a4(0x1c4)]=_0x3571a4(0x1ce),_0x358be5[_0x3571a4(0x1a2)]=_0x3571a4(0x190),_0x358be5['JWgYA']=_0x3571a4(0x17f),_0x358be5[_0x3571a4(0x1c5)]='Attachment\x20recevied\x20for\x20path:\x20%s',_0x358be5[_0x3571a4(0x189)]=_0x3571a4(0x172),_0x358be5[_0x3571a4(0x174)]=_0x3571a4(0x196),_0x358be5['SOtLd']=_0x3571a4(0x1b3),_0x358be5['plzXk']=_0x3571a4(0x191),_0x358be5[_0x3571a4(0x1b1)]=_0x3571a4(0x199),_0x358be5['zfpsQ']=_0x3571a4(0x1af),_0x358be5['inngs']=_0x3571a4(0x165),_0x358be5[_0x3571a4(0x160)]='error',_0x358be5[_0x3571a4(0x18b)]=_0x3571a4(0x19c),_0x358be5['pLkcx']=function(_0x32c07e,_0xbadda9){return _0x32c07e*_0xbadda9;},_0x358be5[_0x3571a4(0x164)]='File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.';const _0x4b1530=_0x358be5;this['logger']['debug'](util[_0x3571a4(0x1ca)](_0x4b1530[_0x3571a4(0x1c5)],_0x1ce5c5));const _0x566f07=os[_0x3571a4(0x1d8)](),_0xa58086=path[_0x3571a4(0x1a1)](_0x566f07,_0x4b1530[_0x3571a4(0x189)]);!fs[_0x3571a4(0x17a)](_0xa58086)&&(this[_0x3571a4(0x1c8)][_0x3571a4(0x169)](util[_0x3571a4(0x1ca)](_0x4b1530[_0x3571a4(0x174)],_0xa58086)),fs[_0x3571a4(0x18e)](_0xa58086),this['logger'][_0x3571a4(0x169)](util[_0x3571a4(0x1ca)](_0x4b1530[_0x3571a4(0x163)],_0xa58086)));const _0x4833de=BrowserstackCLI[_0x3571a4(0x18d)]()[_0x3571a4(0x168)][_0x3571a4(0x17c)]?.[_0x3571a4(0x183)]?.[_0x3571a4(0x1a6)]()?.[_0x3571a4(0x1ae)],_0x1c3551=path[_0x3571a4(0x1a1)](_0xa58086,_0x4833de);!fs['existsSync'](_0x1c3551)&&(fs['mkdirSync'](_0x1c3551),this[_0x3571a4(0x1c8)][_0x3571a4(0x169)](util[_0x3571a4(0x1ca)](_0x4b1530[_0x3571a4(0x1d6)],_0x1c3551)));if(_0x4b1530[_0x3571a4(0x16e)](_0x1ce5c5['trim'](),'')){this[_0x3571a4(0x1c8)][_0x3571a4(0x169)](util[_0x3571a4(0x1ca)](_0x4b1530[_0x3571a4(0x1b1)]));return;}if(_0x1ce5c5[_0x3571a4(0x195)](_0x4b1530[_0x3571a4(0x1de)])||_0x1ce5c5[_0x3571a4(0x195)](_0x4b1530[_0x3571a4(0x17d)])){const _0x139759=_0x1ce5c5[_0x3571a4(0x195)](_0x4b1530['zfpsQ'])?https:http,_0x10bf3b=path['basename'](_0x1ce5c5),_0x4741bf=path[_0x3571a4(0x1a1)](_0x1c3551,_0x10bf3b),_0x2db7af=fs[_0x3571a4(0x1ad)](_0x4741bf);_0x139759['get'](_0x1ce5c5,_0x5ea10a=>{const _0x2544e9=_0x3571a4;if(_0x4b1530[_0x2544e9(0x16e)](_0x5ea10a[_0x2544e9(0x1c7)],0xc8))_0x5ea10a[_0x2544e9(0x1a0)](_0x2db7af),_0x2db7af['on'](_0x4b1530[_0x2544e9(0x1c4)],()=>{const _0x22b2a6=_0x2544e9;_0x2db7af[_0x22b2a6(0x1d7)]();const _0x5c538a=fs['statSync'](_0x4741bf),_0x16cd71=_0x4b1530[_0x22b2a6(0x1d4)](_0x5c538a['size'],_0x4b1530[_0x22b2a6(0x1ac)](0x400,0x400));if(_0x4b1530[_0x22b2a6(0x19d)](_0x16cd71,0x64)){this[_0x22b2a6(0x1c8)]['debug'](util[_0x22b2a6(0x1ca)](_0x4b1530[_0x22b2a6(0x167)],_0x16cd71['toFixed'](0x2))),fs['unlinkSync'](_0x4741bf);return;}this[_0x22b2a6(0x1c8)][_0x22b2a6(0x169)](util[_0x22b2a6(0x1ca)](_0x4b1530[_0x22b2a6(0x182)],_0x4741bf)),uploadAttachmentsManager[_0x22b2a6(0x1c3)](_0x4741bf,_0x95a9e2);});else{this['logger'][_0x2544e9(0x169)](util[_0x2544e9(0x1ca)](_0x4b1530['iXkkF'],_0x5ea10a['statusCode'])),_0x2db7af[_0x2544e9(0x1d7)](),fs[_0x2544e9(0x1c9)](_0x4741bf);return;}})['on'](_0x4b1530['vuBYS'],_0x640d9f=>{const _0x5c3481=_0x3571a4;this[_0x5c3481(0x1c8)][_0x5c3481(0x169)](util[_0x5c3481(0x1ca)](_0x4b1530[_0x5c3481(0x1d0)],_0x640d9f['message'])),_0x2db7af[_0x5c3481(0x1d7)](),fs[_0x5c3481(0x1c9)](_0x4741bf);return;});}else{if(!fs[_0x3571a4(0x17a)](_0x1ce5c5)){this[_0x3571a4(0x1c8)][_0x3571a4(0x169)](util['format'](_0x4b1530[_0x3571a4(0x18b)],_0x1ce5c5));return;}const _0x2ab53c=fs[_0x3571a4(0x175)](_0x1ce5c5),_0x4112a6=_0x4b1530[_0x3571a4(0x1d4)](_0x2ab53c[_0x3571a4(0x1b7)],_0x4b1530[_0x3571a4(0x1a8)](0x400,0x400));if(_0x4b1530[_0x3571a4(0x19d)](_0x4112a6,0x64)){this[_0x3571a4(0x1c8)][_0x3571a4(0x169)](util[_0x3571a4(0x1ca)](_0x4b1530[_0x3571a4(0x164)],_0x4112a6[_0x3571a4(0x180)](0x2)));return;}const _0x40e11d=path[_0x3571a4(0x181)](_0x1ce5c5),_0x41ab47=path[_0x3571a4(0x1a1)](_0x1c3551,_0x40e11d);fs[_0x3571a4(0x1b5)](_0x1ce5c5,_0x41ab47),uploadAttachmentsManager[_0x3571a4(0x1c3)](_0x41ab47,_0x95a9e2);}}static[a89_0x3e0440(0x1c3)](_0x1c3b24,_0x2a33c0){const _0x3ae5b3=a89_0x3e0440,_0x463e29={'UQmoP':function(_0x4493a4,_0x283ff3){return _0x4493a4(_0x283ff3);},'ewWTK':_0x3ae5b3(0x1cd),'sNieQ':function(_0x469873,_0x3f52a9){return _0x469873(_0x3f52a9);},'pCwkL':_0x3ae5b3(0x1ba),'xpaDU':function(_0x1bf9cb,_0x4b38cf){return _0x1bf9cb===_0x4b38cf;},'sjMKw':'jest','SsKYo':_0x3ae5b3(0x1e0),'aqdLY':'BuildLevel','RWObk':_0x3ae5b3(0x197),'GsbbW':'trackFile:\x20TestFramework\x20not\x20available,\x20cannot\x20track\x20attachment','JOGXw':_0x3ae5b3(0x16d),'PIwBu':function(_0x607bcb,_0x225b13){return _0x607bcb(_0x225b13);},'emQuc':_0x3ae5b3(0x1dd),'MdNZT':_0x3ae5b3(0x1b8),'zjrNy':'Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','SpwTO':_0x3ae5b3(0x173)};try{let _0x164489;const _0x41789e=global[_0x3ae5b3(0x161)]?.[_0x3ae5b3(0x162)]?.[_0x3ae5b3(0x188)],_0x4b5fa7=_0x463e29[_0x3ae5b3(0x1b0)](require,_0x463e29[_0x3ae5b3(0x1bc)]),_0x26e78d=_0x463e29[_0x3ae5b3(0x185)](require,_0x463e29[_0x3ae5b3(0x16c)]),_0x1cd878=_0x4b5fa7['getInstance']()[_0x3ae5b3(0x1b9)]()&&_0x463e29[_0x3ae5b3(0x1aa)](_0x26e78d['getTestFrameworkDetail']()?.[_0x3ae5b3(0x186)]?.['toLowerCase'](),_0x463e29[_0x3ae5b3(0x17e)]);if(_0x1cd878){_0x164489=global['__jestCurrentTestIdentifier'];if(!_0x164489){const _0x3dbf85=AutomationFramework['getTrackedInstance']();_0x164489=AutomationFramework[_0x3ae5b3(0x1d3)](_0x3dbf85,PlaywrightDriverModule[_0x3ae5b3(0x192)],'');}this[_0x3ae5b3(0x1c8)][_0x3ae5b3(0x169)]('trackFile:\x20Jest+Playwright\x20-\x20testId\x20(testIdentifier):\x20'+_0x164489);}else{if(!_0x41789e){const _0x429f3b=AutomationFramework[_0x3ae5b3(0x1a5)]();_0x164489=AutomationFramework[_0x3ae5b3(0x1d3)](_0x429f3b,PlaywrightDriverModule['KEY_TEST_ID'],'');}else _0x164489=TestInfo[_0x3ae5b3(0x1b2)](_0x41789e,_0x41789e['retry']);this[_0x3ae5b3(0x1c8)][_0x3ae5b3(0x169)](_0x3ae5b3(0x1cf)+_0x164489);}if(!_0x164489){this[_0x3ae5b3(0x1c8)][_0x3ae5b3(0x169)](_0x463e29[_0x3ae5b3(0x19f)]);return;}const _0x20c43b={[TestFrameworkConstants['KEY_FILE_SIZE']]:fs[_0x3ae5b3(0x175)](_0x1c3b24)[_0x3ae5b3(0x1b7)],[TestFrameworkConstants[_0x3ae5b3(0x187)]]:path[_0x3ae5b3(0x181)](_0x1c3b24),[TestFrameworkConstants[_0x3ae5b3(0x1c0)]]:_0x1c3b24,[TestFrameworkConstants[_0x3ae5b3(0x178)]]:_0x2a33c0?_0x463e29[_0x3ae5b3(0x1b6)]:_0x463e29[_0x3ae5b3(0x1a9)]};if(_0x1cd878){const _0x42eaf0=_0x4b5fa7[_0x3ae5b3(0x18d)]()['getTestFramework']();if(!_0x42eaf0){this['logger'][_0x3ae5b3(0x169)](_0x463e29[_0x3ae5b3(0x1b4)]);return;}const _0x28a4e6=_0x463e29[_0x3ae5b3(0x1b0)](require,_0x463e29[_0x3ae5b3(0x171)]),_0x1b42d0=_0x463e29[_0x3ae5b3(0x1bb)](require,_0x463e29['emQuc']),_0x254865=_0x42eaf0[_0x3ae5b3(0x1d5)](_0x28a4e6[_0x3ae5b3(0x194)],_0x1b42d0[_0x3ae5b3(0x193)]);if(!_0x254865){this['logger'][_0x3ae5b3(0x169)](_0x463e29[_0x3ae5b3(0x17b)]);return;}const _0x12044b=_0x254865[_0x3ae5b3(0x1bd)]()[_0x3ae5b3(0x19a)](_0x164489)||{},_0x4478da=_0x12044b[TestFrameworkConstants[_0x3ae5b3(0x1c1)]]||{},_0x46afe5={..._0x4478da};_0x46afe5[_0x1c3b24]=_0x20c43b;const _0x522bba=_0x46afe5,_0x52d723={[TestFrameworkConstants[_0x3ae5b3(0x1c1)]]:_0x522bba},_0x23e52f={};_0x23e52f[_0x164489]=_0x52d723,_0x254865[_0x3ae5b3(0x1c6)](_0x23e52f),this[_0x3ae5b3(0x1c8)][_0x3ae5b3(0x169)](_0x3ae5b3(0x1cb)+_0x164489+',\x20filepath:\x20'+_0x1c3b24);}else{const _0x25ee4e=TestInfo['getTestDetails'](_0x164489),_0x3f228a=_0x25ee4e[TestFrameworkConstants[_0x3ae5b3(0x1c1)]]||{};_0x3f228a[_0x1c3b24]=_0x20c43b,_0x25ee4e[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]=_0x3f228a,TestInfo[_0x3ae5b3(0x1ab)](_0x164489,_0x25ee4e),this[_0x3ae5b3(0x1c8)][_0x3ae5b3(0x169)](_0x3ae5b3(0x1a3)+_0x164489+_0x3ae5b3(0x18a)+_0x1c3b24);}this['logger'][_0x3ae5b3(0x169)](util['format'](_0x463e29['zjrNy'],_0x1c3b24));}catch(_0x464b22){this[_0x3ae5b3(0x1c8)][_0x3ae5b3(0x169)](util['format'](_0x463e29[_0x3ae5b3(0x166)],_0x464b22[_0x3ae5b3(0x1d1)]));}}static['clearAttachments'](){const _0x34a53b=a89_0x3e0440,_0x40a8d3={};_0x40a8d3[_0x34a53b(0x1dc)]='.browserstack',_0x40a8d3[_0x34a53b(0x16a)]=_0x34a53b(0x1be),_0x40a8d3['mQbKc']=_0x34a53b(0x177);const _0xbe420=_0x40a8d3,_0x4a0846=os[_0x34a53b(0x1d8)](),_0x20a8e0=path[_0x34a53b(0x1a1)](_0x4a0846,_0xbe420[_0x34a53b(0x1dc)]);if(!fs[_0x34a53b(0x17a)](_0x20a8e0))return;const _0x4f06fa=BrowserstackCLI[_0x34a53b(0x18d)]()[_0x34a53b(0x168)]['TestHubModule']?.[_0x34a53b(0x183)]?.[_0x34a53b(0x1a6)]()?.[_0x34a53b(0x1ae)],_0x5e0b13=_0x4f06fa?path[_0x34a53b(0x1a1)](_0x20a8e0,_0x4f06fa):null;if(!_0x5e0b13||!fs['existsSync'](_0x5e0b13)){this[_0x34a53b(0x1c8)][_0x34a53b(0x169)](util[_0x34a53b(0x1ca)](_0xbe420['tPOZu'],_0x4f06fa));return;}const _0x45ef01={};_0x45ef01['recursive']=!![],_0x45ef01[_0x34a53b(0x176)]=!![],fs[_0x34a53b(0x18c)](_0x5e0b13,_0x45ef01),this['logger']['debug'](util[_0x34a53b(0x1ca)](_0xbe420['mQbKc']));}}module[a89_0x3e0440(0x1e1)]=uploadAttachmentsManager;