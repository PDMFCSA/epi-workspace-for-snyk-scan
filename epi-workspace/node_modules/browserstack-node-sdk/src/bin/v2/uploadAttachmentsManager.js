function a87_0x2c40(){const _0x57e148=['File\x20downloaded\x20to:\x20%s','close','size','huvzb','VUCoT','KEY_TEST_ATTACHMENTS','getInstance','.browserstack','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','testInfo','https','./browserstackCLI','CAIPD','Cleared\x20attachment\x20folder','bCbaF','BdFMN','KYJCs','existsSync','KEY_FILE_PATH','statusCode','24350idAILA','modules','1911606VTzsjb','OHnDC','uploadAttachments','Tgfat','error','testhubConfig','192860NtbVUL','./framework/constants/testFrameworkConstants','1139745XhhesU','join','KEY_FILE_LEVEL','http://','nGyDI','statSync','buildHashedId','yiasU','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','toObject','message','basename','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','UGJUM','ARimt','startsWith','3pGLpWa','rUqdK','retry','rmSync','OuwPw','TestLevel','debug','7KYtuRl','TestHubModule','XMJfR','KEY_TEST_ID','logger','wgjsA','setTestDetails','1471312iWqPLP','homedir','nZHpv','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','format','getTrackedInstance','tpfKv','uploadAttachmentsManager','force','lhwzQ','IZlqy','trackFile','XJgFo','mkdirSync','BuildLevel','KEY_FILE_NAME','1809YzJKIY','exports','WguPH','TIkAp','../../helpers/classLogger.js','1065240mLjeHt','lbcgA','./framework/automationFramework','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','bNOxf','lanpD','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','trim','getTestIdentifierFromTestInfo','QHiYd','reDbi','NNzeL','finish','VKlVg','util','path','245673nVcLcp','http','SgOVp','getTestDetails','qsTIG','copyFileSync','ACxDY','eoSoM','KEY_FILE_SIZE','unlinkSync','./TestInfo'];a87_0x2c40=function(){return _0x57e148;};return a87_0x2c40();}const a87_0x44672a=a87_0x341e;(function(_0x4001d1,_0x31f94d){const _0x3b360d=a87_0x341e,_0x15c8eb=_0x4001d1();while(!![]){try{const _0x526bad=parseInt(_0x3b360d(0x179))/0x1+-parseInt(_0x3b360d(0x169))/0x2+-parseInt(_0x3b360d(0x146))/0x3*(-parseInt(_0x3b360d(0x1a0))/0x4)+parseInt(_0x3b360d(0x1a2))/0x5+-parseInt(_0x3b360d(0x19a))/0x6+parseInt(_0x3b360d(0x14d))/0x7*(parseInt(_0x3b360d(0x154))/0x8)+parseInt(_0x3b360d(0x164))/0x9*(parseInt(_0x3b360d(0x198))/0xa);if(_0x526bad===_0x31f94d)break;else _0x15c8eb['push'](_0x15c8eb['shift']());}catch(_0xf28dae){_0x15c8eb['push'](_0x15c8eb['shift']());}}}(a87_0x2c40,0x53f9d));const os=require('os'),fs=require('fs'),path=require(a87_0x44672a(0x178)),util=require(a87_0x44672a(0x177)),BrowserstackCLI=require(a87_0x44672a(0x18f)),https=require(a87_0x44672a(0x18e)),http=require(a87_0x44672a(0x17a)),AutomationFramework=require(a87_0x44672a(0x16b)),PlaywrightDriverModule=require('./modules/playwrightDriverModule'),TestInfo=require(a87_0x44672a(0x183)),TestFrameworkConstants=require(a87_0x44672a(0x1a1)),{createClassLogger}=require(a87_0x44672a(0x168));function a87_0x341e(_0x42b05c,_0x1146e8){const _0x2c402c=a87_0x2c40();return a87_0x341e=function(_0x341ed2,_0x233611){_0x341ed2=_0x341ed2-0x13a;let _0x4e8227=_0x2c402c[_0x341ed2];return _0x4e8227;},a87_0x341e(_0x42b05c,_0x1146e8);}class uploadAttachmentsManager{static [a87_0x44672a(0x151)]=createClassLogger(a87_0x44672a(0x15b));static[a87_0x44672a(0x19c)](_0x34e792,_0x29a9ab=![]){const _0xdbb180=a87_0x44672a,_0x5956ed={};_0x5956ed[_0xdbb180(0x152)]=function(_0x3a17ce,_0x1775f6){return _0x3a17ce/_0x1775f6;},_0x5956ed['KYJCs']=function(_0x21d830,_0x584f04){return _0x21d830*_0x584f04;},_0x5956ed[_0xdbb180(0x147)]=function(_0xa22c21,_0x566494){return _0xa22c21>_0x566494;},_0x5956ed[_0xdbb180(0x16e)]=_0xdbb180(0x16f),_0x5956ed[_0xdbb180(0x16d)]=_0xdbb180(0x184),_0x5956ed[_0xdbb180(0x13a)]=function(_0x5c75f7,_0x8ba014){return _0x5c75f7===_0x8ba014;},_0x5956ed[_0xdbb180(0x143)]=_0xdbb180(0x175),_0x5956ed[_0xdbb180(0x17f)]=_0xdbb180(0x16c),_0x5956ed['OuwPw']=_0xdbb180(0x142),_0x5956ed[_0xdbb180(0x193)]='Attachment\x20recevied\x20for\x20path:\x20%s',_0x5956ed[_0xdbb180(0x15a)]=_0xdbb180(0x18b),_0x5956ed[_0xdbb180(0x19b)]='.browserstack\x20folder\x20not\x20found\x20at:\x20%s',_0x5956ed[_0xdbb180(0x17b)]='Created\x20.browserstack\x20folder\x20at:\x20%s',_0x5956ed[_0xdbb180(0x172)]='Created\x20folder:\x20%s',_0x5956ed[_0xdbb180(0x156)]='Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.',_0x5956ed[_0xdbb180(0x160)]='https://',_0x5956ed['lhwzQ']=_0xdbb180(0x1a5),_0x5956ed['VUCoT']=_0xdbb180(0x19e),_0x5956ed[_0xdbb180(0x15e)]=_0xdbb180(0x13e),_0x5956ed[_0xdbb180(0x173)]=function(_0x3e9992,_0x1ca19d){return _0x3e9992/_0x1ca19d;},_0x5956ed[_0xdbb180(0x13d)]=function(_0x206217,_0x3a3f58){return _0x206217>_0x3a3f58;},_0x5956ed[_0xdbb180(0x144)]=_0xdbb180(0x157);const _0x1da531=_0x5956ed;this[_0xdbb180(0x151)]['debug'](util[_0xdbb180(0x158)](_0x1da531['BdFMN'],_0x34e792));const _0x58e8a6=os[_0xdbb180(0x155)](),_0xf671cb=path[_0xdbb180(0x1a3)](_0x58e8a6,_0x1da531[_0xdbb180(0x15a)]);!fs[_0xdbb180(0x195)](_0xf671cb)&&(this[_0xdbb180(0x151)]['debug'](util[_0xdbb180(0x158)](_0x1da531[_0xdbb180(0x19b)],_0xf671cb)),fs['mkdirSync'](_0xf671cb),this[_0xdbb180(0x151)][_0xdbb180(0x14c)](util['format'](_0x1da531[_0xdbb180(0x17b)],_0xf671cb)));const _0x7eea09=BrowserstackCLI[_0xdbb180(0x18a)]()['modules'][_0xdbb180(0x14e)]?.[_0xdbb180(0x19f)]?.[_0xdbb180(0x13f)]()?.[_0xdbb180(0x13c)],_0x2eaed1=path['join'](_0xf671cb,_0x7eea09);!fs['existsSync'](_0x2eaed1)&&(fs[_0xdbb180(0x161)](_0x2eaed1),this[_0xdbb180(0x151)][_0xdbb180(0x14c)](util[_0xdbb180(0x158)](_0x1da531[_0xdbb180(0x172)],_0x2eaed1)));if(_0x1da531[_0xdbb180(0x13a)](_0x34e792[_0xdbb180(0x170)](),'')){this[_0xdbb180(0x151)][_0xdbb180(0x14c)](util['format'](_0x1da531[_0xdbb180(0x156)]));return;}if(_0x34e792[_0xdbb180(0x145)](_0x1da531[_0xdbb180(0x160)])||_0x34e792[_0xdbb180(0x145)](_0x1da531[_0xdbb180(0x15d)])){const _0x80b8c1=_0x34e792[_0xdbb180(0x145)](_0x1da531[_0xdbb180(0x160)])?https:http,_0x3437ae=path[_0xdbb180(0x141)](_0x34e792),_0x3a8298=path['join'](_0x2eaed1,_0x3437ae),_0x16fd42=fs['createWriteStream'](_0x3a8298);_0x80b8c1['get'](_0x34e792,_0x5921ae=>{const _0x1ff1c1=_0xdbb180,_0x340bde={'bCbaF':function(_0x4f4fa2,_0x1d619e){return _0x1da531['wgjsA'](_0x4f4fa2,_0x1d619e);},'lbcgA':function(_0x38504d,_0x1ae4e1){return _0x1da531['KYJCs'](_0x38504d,_0x1ae4e1);},'huvzb':function(_0x4e9a45,_0x5db622){const _0x2c73c1=a87_0x341e;return _0x1da531[_0x2c73c1(0x147)](_0x4e9a45,_0x5db622);},'qsTIG':_0x1da531[_0x1ff1c1(0x16e)],'TIkAp':_0x1da531[_0x1ff1c1(0x16d)]};if(_0x1da531[_0x1ff1c1(0x13a)](_0x5921ae['statusCode'],0xc8))_0x5921ae['pipe'](_0x16fd42),_0x16fd42['on'](_0x1da531['UGJUM'],()=>{const _0x438be5=_0x1ff1c1;_0x16fd42[_0x438be5(0x185)]();const _0x2e6083=fs[_0x438be5(0x13b)](_0x3a8298),_0x25d9ea=_0x340bde[_0x438be5(0x192)](_0x2e6083[_0x438be5(0x186)],_0x340bde[_0x438be5(0x16a)](0x400,0x400));if(_0x340bde[_0x438be5(0x187)](_0x25d9ea,0x64)){this['logger'][_0x438be5(0x14c)](util['format'](_0x340bde[_0x438be5(0x17d)],_0x25d9ea['toFixed'](0x2))),fs['unlinkSync'](_0x3a8298);return;}this[_0x438be5(0x151)][_0x438be5(0x14c)](util[_0x438be5(0x158)](_0x340bde[_0x438be5(0x167)],_0x3a8298)),uploadAttachmentsManager[_0x438be5(0x15f)](_0x3a8298,_0x29a9ab);});else{this[_0x1ff1c1(0x151)][_0x1ff1c1(0x14c)](util['format'](_0x1da531[_0x1ff1c1(0x17f)],_0x5921ae[_0x1ff1c1(0x197)])),_0x16fd42[_0x1ff1c1(0x185)](),fs['unlinkSync'](_0x3a8298);return;}})['on'](_0x1da531[_0xdbb180(0x188)],_0x4aac8e=>{const _0x1d2b27=_0xdbb180;this[_0x1d2b27(0x151)]['debug'](util[_0x1d2b27(0x158)](_0x1da531[_0x1d2b27(0x14a)],_0x4aac8e[_0x1d2b27(0x140)])),_0x16fd42[_0x1d2b27(0x185)](),fs[_0x1d2b27(0x182)](_0x3a8298);return;});}else{if(!fs[_0xdbb180(0x195)](_0x34e792)){this[_0xdbb180(0x151)][_0xdbb180(0x14c)](util['format'](_0x1da531[_0xdbb180(0x15e)],_0x34e792));return;}const _0x4455ff=fs['statSync'](_0x34e792),_0x5f1195=_0x1da531['reDbi'](_0x4455ff[_0xdbb180(0x186)],_0x1da531[_0xdbb180(0x194)](0x400,0x400));if(_0x1da531['yiasU'](_0x5f1195,0x64)){this['logger'][_0xdbb180(0x14c)](util['format'](_0x1da531['ARimt'],_0x5f1195['toFixed'](0x2)));return;}const _0x46e86c=path[_0xdbb180(0x141)](_0x34e792),_0x3c0119=path[_0xdbb180(0x1a3)](_0x2eaed1,_0x46e86c);fs[_0xdbb180(0x17e)](_0x34e792,_0x3c0119),uploadAttachmentsManager[_0xdbb180(0x15f)](_0x3c0119,_0x29a9ab);}}static['trackFile'](_0x209d3b,_0x161c94){const _0x4ee465=a87_0x44672a,_0x4e6e0e={};_0x4e6e0e[_0x4ee465(0x180)]=_0x4ee465(0x162),_0x4e6e0e[_0x4ee465(0x14f)]=_0x4ee465(0x14b),_0x4e6e0e[_0x4ee465(0x174)]='Attachment\x20file\x20tracked\x20for\x20upload:\x20%s',_0x4e6e0e['CAIPD']=_0x4ee465(0x18c);const _0x3ab5c9=_0x4e6e0e;try{let _0x6b5991;const _0x40f882=global['__workerDetails']?.['currentTest']?.[_0x4ee465(0x18d)];if(!_0x40f882){const _0x5080b5=AutomationFramework[_0x4ee465(0x159)]();_0x6b5991=AutomationFramework['getState'](_0x5080b5,PlaywrightDriverModule[_0x4ee465(0x150)],'');}else _0x6b5991=TestInfo[_0x4ee465(0x171)](_0x40f882,_0x40f882[_0x4ee465(0x148)]);const _0x53adf4=TestInfo[_0x4ee465(0x17c)](_0x6b5991),_0x12bd6b=_0x53adf4[TestFrameworkConstants[_0x4ee465(0x189)]]||{};_0x12bd6b[_0x209d3b]={[TestFrameworkConstants[_0x4ee465(0x181)]]:fs[_0x4ee465(0x13b)](_0x209d3b)[_0x4ee465(0x186)],[TestFrameworkConstants[_0x4ee465(0x163)]]:path[_0x4ee465(0x141)](_0x209d3b),[TestFrameworkConstants[_0x4ee465(0x196)]]:_0x209d3b,[TestFrameworkConstants[_0x4ee465(0x1a4)]]:_0x161c94?_0x3ab5c9[_0x4ee465(0x180)]:_0x3ab5c9[_0x4ee465(0x14f)]},_0x53adf4[TestFrameworkConstants[_0x4ee465(0x189)]]=_0x12bd6b,TestInfo[_0x4ee465(0x153)](_0x6b5991,_0x53adf4),this[_0x4ee465(0x151)][_0x4ee465(0x14c)](util[_0x4ee465(0x158)](_0x3ab5c9[_0x4ee465(0x174)],_0x209d3b));}catch(_0x3da913){this[_0x4ee465(0x151)]['debug'](util[_0x4ee465(0x158)](_0x3ab5c9[_0x4ee465(0x190)],_0x3da913[_0x4ee465(0x140)]));}}static['clearAttachments'](){const _0x3003f7=a87_0x44672a,_0x5e41d6={};_0x5e41d6[_0x3003f7(0x19d)]=_0x3003f7(0x18b),_0x5e41d6['VKlVg']='No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s',_0x5e41d6[_0x3003f7(0x166)]=_0x3003f7(0x191);const _0x26ed20=_0x5e41d6,_0x1a0766=os['homedir'](),_0x44a3fe=path['join'](_0x1a0766,_0x26ed20['Tgfat']);if(!fs['existsSync'](_0x44a3fe))return;const _0x4568df=BrowserstackCLI[_0x3003f7(0x18a)]()[_0x3003f7(0x199)][_0x3003f7(0x14e)]?.[_0x3003f7(0x19f)]?.[_0x3003f7(0x13f)]()?.[_0x3003f7(0x13c)],_0x3ea8dc=_0x4568df?path['join'](_0x44a3fe,_0x4568df):null;if(!_0x3ea8dc||!fs[_0x3003f7(0x195)](_0x3ea8dc)){this[_0x3003f7(0x151)][_0x3003f7(0x14c)](util[_0x3003f7(0x158)](_0x26ed20[_0x3003f7(0x176)],_0x4568df));return;}const _0x19f04c={};_0x19f04c['recursive']=!![],_0x19f04c[_0x3003f7(0x15c)]=!![],fs[_0x3003f7(0x149)](_0x3ea8dc,_0x19f04c),this[_0x3003f7(0x151)]['debug'](util[_0x3003f7(0x158)](_0x26ed20[_0x3003f7(0x166)]));}}module[a87_0x44672a(0x165)]=uploadAttachmentsManager;