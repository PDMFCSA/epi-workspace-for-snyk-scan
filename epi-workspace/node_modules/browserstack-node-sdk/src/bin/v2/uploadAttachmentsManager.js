const a85_0x45c5cf=a85_0x4289;function a85_0x4289(_0x29bb9b,_0x27ce5d){const _0x41ed81=a85_0x41ed();return a85_0x4289=function(_0x428985,_0x4a8e9d){_0x428985=_0x428985-0xbc;let _0x10f524=_0x41ed81[_0x428985];return _0x10f524;},a85_0x4289(_0x29bb9b,_0x27ce5d);}function a85_0x41ed(){const _0x5a3f27=['clearAttachments','statusCode','6vOBJrt','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','debug','Kbfjx','NUumk','uVfOX','YCaBn','FhCWW','WHGrJ','homedir','Cleared\x20attachment\x20folder','uploadAttachmentsManager','modules','yWmLZ','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','retry','trackFile','RgJLV','KEY_FILE_LEVEL','JDmoW','MpBMo','statSync','logger','.browserstack','2oRPuJy','close','Created\x20.browserstack\x20folder\x20at:\x20%s','trim','copyFileSync','857284FzvcqV','iRsCv','XpyzX','Attachment\x20recevied\x20for\x20path:\x20%s','existsSync','recursive','finish','format','force','UIwAk','209uNPqjE','error','getState','./modules/playwrightDriverModule','mthvc','310977NQHBeS','KrWAA','pipe','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','https','MOpsk','File\x20downloaded\x20to:\x20%s','IYrOu','./browserstackCLI','message','toFixed','200YhcJCG','yUjmQ','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','startsWith','KEY_TEST_ID','createWriteStream','soFCl','TestHubModule','size','eoJKD','unlinkSync','1974372HpNPKp','TfasA','testhubConfig','KEY_FILE_SIZE','path','8524551YLfSit','OCSov','BQVcE','currentTest','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','18IEztMO','toObject','uploadAttachments','exports','./framework/constants/testFrameworkConstants','TOGVk','qMUEI','basename','getTestIdentifierFromTestInfo','setTestDetails','314370MDGqZJ','get','513268zlbBNd','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','buildHashedId','getTestDetails','https://','EZzMa','KpzTA','1246645MUEkDC','join','gCLBS','LBVsY','Dxpjw','rmSync','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','./framework/automationFramework','getInstance'];a85_0x41ed=function(){return _0x5a3f27;};return a85_0x41ed();}(function(_0x5acb6c,_0x38c41d){const _0x1ec347=a85_0x4289,_0x5dd484=_0x5acb6c();while(!![]){try{const _0x30f2b7=-parseInt(_0x1ec347(0xff))/0x1*(parseInt(_0x1ec347(0xbf))/0x2)+-parseInt(_0x1ec347(0xf3))/0x3*(parseInt(_0x1ec347(0xc4))/0x4)+-parseInt(_0x1ec347(0x106))/0x5+parseInt(_0x1ec347(0x111))/0x6*(-parseInt(_0x1ec347(0xee))/0x7)+parseInt(_0x1ec347(0xde))/0x8*(parseInt(_0x1ec347(0xd3))/0x9)+parseInt(_0x1ec347(0xfd))/0xa+parseInt(_0x1ec347(0xce))/0xb*(parseInt(_0x1ec347(0xe9))/0xc);if(_0x30f2b7===_0x38c41d)break;else _0x5dd484['push'](_0x5dd484['shift']());}catch(_0x3b64f0){_0x5dd484['push'](_0x5dd484['shift']());}}}(a85_0x41ed,0xb855b));const os=require('os'),fs=require('fs'),path=require(a85_0x45c5cf(0xed)),util=require('util'),BrowserstackCLI=require(a85_0x45c5cf(0xdb)),https=require(a85_0x45c5cf(0xd7)),http=require('http'),AutomationFramework=require(a85_0x45c5cf(0x10d)),PlaywrightDriverModule=require(a85_0x45c5cf(0xd1)),TestInfo=require('./TestInfo'),TestFrameworkConstants=require(a85_0x45c5cf(0xf7)),{createClassLogger}=require('../../helpers/classLogger.js');class uploadAttachmentsManager{static [a85_0x45c5cf(0xbd)]=createClassLogger(a85_0x45c5cf(0x11c));static[a85_0x45c5cf(0xf5)](_0x3de1ab,_0x4389f1=![]){const _0x10a177=a85_0x45c5cf,_0x274180={};_0x274180[_0x10a177(0xef)]=function(_0x3d65cb,_0x30cd35){return _0x3d65cb/_0x30cd35;},_0x274180[_0x10a177(0x119)]=function(_0x321c2d,_0x5bcd5e){return _0x321c2d*_0x5bcd5e;},_0x274180[_0x10a177(0x124)]=function(_0x2e18b7,_0x282ab9){return _0x2e18b7>_0x282ab9;},_0x274180[_0x10a177(0x118)]=_0x10a177(0xe0),_0x274180['Jlzhl']=_0x10a177(0xd9),_0x274180[_0x10a177(0x115)]=function(_0x440c11,_0x5de979){return _0x440c11===_0x5de979;},_0x274180[_0x10a177(0xcd)]=_0x10a177(0xca),_0x274180['eoJKD']=_0x10a177(0x11f),_0x274180['KrWAA']=_0x10a177(0x112),_0x274180[_0x10a177(0xea)]=_0x10a177(0xc7),_0x274180[_0x10a177(0x105)]=_0x10a177(0xbe),_0x274180[_0x10a177(0x114)]=_0x10a177(0xd6),_0x274180[_0x10a177(0xc6)]=_0x10a177(0xc1),_0x274180[_0x10a177(0xd8)]='Created\x20folder:\x20%s',_0x274180[_0x10a177(0xdf)]=function(_0x1b8466,_0x2ea37c){return _0x1b8466===_0x2ea37c;},_0x274180['pzuja']='Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.',_0x274180[_0x10a177(0x10a)]=_0x10a177(0x103),_0x274180['jPnAD']='http://',_0x274180[_0x10a177(0xf0)]=_0x10a177(0xcf),_0x274180[_0x10a177(0xc5)]=_0x10a177(0x10c),_0x274180[_0x10a177(0x117)]=function(_0x54cf5d,_0x329862){return _0x54cf5d/_0x329862;},_0x274180['gCLBS']=function(_0x33fcd7,_0x369e9e){return _0x33fcd7>_0x369e9e;},_0x274180[_0x10a177(0xe4)]=_0x10a177(0xf2);const _0x188eba=_0x274180;this[_0x10a177(0xbd)][_0x10a177(0x113)](util[_0x10a177(0xcb)](_0x188eba[_0x10a177(0xea)],_0x3de1ab));const _0x6b2731=os['homedir'](),_0x536a9a=path[_0x10a177(0x107)](_0x6b2731,_0x188eba[_0x10a177(0x105)]);!fs[_0x10a177(0xc8)](_0x536a9a)&&(this[_0x10a177(0xbd)][_0x10a177(0x113)](util[_0x10a177(0xcb)](_0x188eba[_0x10a177(0x114)],_0x536a9a)),fs['mkdirSync'](_0x536a9a),this[_0x10a177(0xbd)][_0x10a177(0x113)](util['format'](_0x188eba[_0x10a177(0xc6)],_0x536a9a)));const _0x714f5=BrowserstackCLI['getInstance']()[_0x10a177(0x11d)]['TestHubModule']?.[_0x10a177(0xeb)]?.[_0x10a177(0xf4)]()?.[_0x10a177(0x101)],_0x23aa22=path[_0x10a177(0x107)](_0x536a9a,_0x714f5);!fs[_0x10a177(0xc8)](_0x23aa22)&&(fs['mkdirSync'](_0x23aa22),this[_0x10a177(0xbd)][_0x10a177(0x113)](util[_0x10a177(0xcb)](_0x188eba[_0x10a177(0xd8)],_0x23aa22)));if(_0x188eba['yUjmQ'](_0x3de1ab[_0x10a177(0xc2)](),'')){this[_0x10a177(0xbd)][_0x10a177(0x113)](util['format'](_0x188eba['pzuja']));return;}if(_0x3de1ab[_0x10a177(0xe1)](_0x188eba[_0x10a177(0x10a)])||_0x3de1ab[_0x10a177(0xe1)](_0x188eba['jPnAD'])){const _0xa0577c=_0x3de1ab[_0x10a177(0xe1)](_0x188eba[_0x10a177(0x10a)])?https:http,_0x48a7a6=path['basename'](_0x3de1ab),_0x1bf5bc=path[_0x10a177(0x107)](_0x23aa22,_0x48a7a6),_0x404a28=fs[_0x10a177(0xe3)](_0x1bf5bc);_0xa0577c[_0x10a177(0xfe)](_0x3de1ab,_0x4e5b4c=>{const _0x2357bd=_0x10a177,_0x131701={'btKjt':function(_0x47a341,_0x46d3e3){const _0x216e8e=a85_0x4289;return _0x188eba[_0x216e8e(0xef)](_0x47a341,_0x46d3e3);},'RgJLV':function(_0xfdb701,_0x42391c){return _0x188eba['WHGrJ'](_0xfdb701,_0x42391c);},'LBVsY':function(_0x2a967f,_0x5c48a0){return _0x188eba['JDmoW'](_0x2a967f,_0x5c48a0);},'mthvc':_0x188eba[_0x2357bd(0x118)],'yWmLZ':_0x188eba['Jlzhl']};if(_0x188eba[_0x2357bd(0x115)](_0x4e5b4c[_0x2357bd(0x110)],0xc8))_0x4e5b4c[_0x2357bd(0xd5)](_0x404a28),_0x404a28['on'](_0x188eba[_0x2357bd(0xcd)],()=>{const _0x54d093=_0x2357bd;_0x404a28[_0x54d093(0xc0)]();const _0x2c2c18=fs[_0x54d093(0xbc)](_0x1bf5bc),_0x912576=_0x131701['btKjt'](_0x2c2c18['size'],_0x131701[_0x54d093(0x122)](0x400,0x400));if(_0x131701[_0x54d093(0x109)](_0x912576,0x64)){this[_0x54d093(0xbd)]['debug'](util[_0x54d093(0xcb)](_0x131701[_0x54d093(0xd2)],_0x912576[_0x54d093(0xdd)](0x2))),fs[_0x54d093(0xe8)](_0x1bf5bc);return;}this[_0x54d093(0xbd)][_0x54d093(0x113)](util['format'](_0x131701[_0x54d093(0x11e)],_0x1bf5bc)),uploadAttachmentsManager[_0x54d093(0x121)](_0x1bf5bc,_0x4389f1);});else{this[_0x2357bd(0xbd)][_0x2357bd(0x113)](util[_0x2357bd(0xcb)](_0x188eba[_0x2357bd(0xe7)],_0x4e5b4c[_0x2357bd(0x110)])),_0x404a28[_0x2357bd(0xc0)](),fs[_0x2357bd(0xe8)](_0x1bf5bc);return;}})['on'](_0x188eba[_0x10a177(0xf0)],_0x27eefd=>{const _0x12955e=_0x10a177;this[_0x12955e(0xbd)]['debug'](util[_0x12955e(0xcb)](_0x188eba[_0x12955e(0xd4)],_0x27eefd[_0x12955e(0xdc)])),_0x404a28[_0x12955e(0xc0)](),fs[_0x12955e(0xe8)](_0x1bf5bc);return;});}else{if(!fs[_0x10a177(0xc8)](_0x3de1ab)){this[_0x10a177(0xbd)][_0x10a177(0x113)](util['format'](_0x188eba['iRsCv'],_0x3de1ab));return;}const _0x2b585f=fs[_0x10a177(0xbc)](_0x3de1ab),_0x20edd5=_0x188eba[_0x10a177(0x117)](_0x2b585f[_0x10a177(0xe6)],_0x188eba[_0x10a177(0x119)](0x400,0x400));if(_0x188eba[_0x10a177(0x108)](_0x20edd5,0x64)){this[_0x10a177(0xbd)][_0x10a177(0x113)](util[_0x10a177(0xcb)](_0x188eba[_0x10a177(0xe4)],_0x20edd5[_0x10a177(0xdd)](0x2)));return;}const _0xc89966=path[_0x10a177(0xfa)](_0x3de1ab),_0x539001=path[_0x10a177(0x107)](_0x23aa22,_0xc89966);fs[_0x10a177(0xc3)](_0x3de1ab,_0x539001),uploadAttachmentsManager['trackFile'](_0x539001,_0x4389f1);}}static[a85_0x45c5cf(0x121)](_0x218b4c,_0x55daa7){const _0x3472cf=a85_0x45c5cf,_0x47c3d7={};_0x47c3d7['gAZuZ']='BuildLevel',_0x47c3d7[_0x3472cf(0x104)]='TestLevel',_0x47c3d7[_0x3472cf(0x125)]='Attachment\x20file\x20tracked\x20for\x20upload:\x20%s',_0x47c3d7[_0x3472cf(0xf9)]='Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload';const _0x13013f=_0x47c3d7;try{let _0x2a1154;const _0x14cbda=global['__workerDetails']?.[_0x3472cf(0xf1)]?.['testInfo'];if(!_0x14cbda){const _0x5e007e=AutomationFramework['getTrackedInstance']();_0x2a1154=AutomationFramework[_0x3472cf(0xd0)](_0x5e007e,PlaywrightDriverModule[_0x3472cf(0xe2)],'');}else _0x2a1154=TestInfo[_0x3472cf(0xfb)](_0x14cbda,_0x14cbda[_0x3472cf(0x120)]);const _0x36e8ba=TestInfo[_0x3472cf(0x102)](_0x2a1154),_0x1829c9=_0x36e8ba[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{};_0x1829c9[_0x218b4c]={[TestFrameworkConstants[_0x3472cf(0xec)]]:fs[_0x3472cf(0xbc)](_0x218b4c)['size'],[TestFrameworkConstants['KEY_FILE_NAME']]:path[_0x3472cf(0xfa)](_0x218b4c),[TestFrameworkConstants['KEY_FILE_PATH']]:_0x218b4c,[TestFrameworkConstants[_0x3472cf(0x123)]]:_0x55daa7?_0x13013f['gAZuZ']:_0x13013f[_0x3472cf(0x104)]},_0x36e8ba[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]=_0x1829c9,TestInfo[_0x3472cf(0xfc)](_0x2a1154,_0x36e8ba),this[_0x3472cf(0xbd)]['debug'](util[_0x3472cf(0xcb)](_0x13013f[_0x3472cf(0x125)],_0x218b4c));}catch(_0x343aa4){this[_0x3472cf(0xbd)][_0x3472cf(0x113)](util[_0x3472cf(0xcb)](_0x13013f['qMUEI'],_0x343aa4['message']));}}static[a85_0x45c5cf(0x10f)](){const _0x3e2b87=a85_0x45c5cf,_0x248b9d={};_0x248b9d['TOGVk']=_0x3e2b87(0xbe),_0x248b9d[_0x3e2b87(0xda)]=_0x3e2b87(0x100),_0x248b9d[_0x3e2b87(0x116)]=_0x3e2b87(0x11b);const _0x568328=_0x248b9d,_0x38d35d=os[_0x3e2b87(0x11a)](),_0x5a73df=path[_0x3e2b87(0x107)](_0x38d35d,_0x568328[_0x3e2b87(0xf8)]);if(!fs[_0x3e2b87(0xc8)](_0x5a73df))return;const _0x5f1178=BrowserstackCLI[_0x3e2b87(0x10e)]()[_0x3e2b87(0x11d)][_0x3e2b87(0xe5)]?.[_0x3e2b87(0xeb)]?.[_0x3e2b87(0xf4)]()?.[_0x3e2b87(0x101)],_0x5f2d55=_0x5f1178?path['join'](_0x5a73df,_0x5f1178):null;if(!_0x5f2d55||!fs['existsSync'](_0x5f2d55)){this['logger']['debug'](util[_0x3e2b87(0xcb)](_0x568328[_0x3e2b87(0xda)],_0x5f1178));return;}const _0x5e2a94={};_0x5e2a94[_0x3e2b87(0xc9)]=!![],_0x5e2a94[_0x3e2b87(0xcc)]=!![],fs[_0x3e2b87(0x10b)](_0x5f2d55,_0x5e2a94),this[_0x3e2b87(0xbd)]['debug'](util[_0x3e2b87(0xcb)](_0x568328[_0x3e2b87(0x116)]));}}module[a85_0x45c5cf(0xf6)]=uploadAttachmentsManager;