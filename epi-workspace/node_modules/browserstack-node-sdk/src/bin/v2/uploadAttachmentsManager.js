const a78_0x3c9da5=a78_0x453e;function a78_0x453e(_0x5c57d0,_0x394511){const _0x52b6fc=a78_0x52b6();return a78_0x453e=function(_0x453e27,_0x5df10c){_0x453e27=_0x453e27-0x138;let _0xc5cd15=_0x52b6fc[_0x453e27];return _0xc5cd15;},a78_0x453e(_0x5c57d0,_0x394511);}(function(_0x2158b1,_0x1bcb0c){const _0x1c1b73=a78_0x453e,_0x32af7f=_0x2158b1();while(!![]){try{const _0x50c4b2=parseInt(_0x1c1b73(0x19f))/0x1+parseInt(_0x1c1b73(0x183))/0x2*(-parseInt(_0x1c1b73(0x19a))/0x3)+-parseInt(_0x1c1b73(0x199))/0x4*(parseInt(_0x1c1b73(0x15b))/0x5)+parseInt(_0x1c1b73(0x15e))/0x6+-parseInt(_0x1c1b73(0x170))/0x7+-parseInt(_0x1c1b73(0x19c))/0x8*(parseInt(_0x1c1b73(0x17b))/0x9)+-parseInt(_0x1c1b73(0x162))/0xa*(-parseInt(_0x1c1b73(0x154))/0xb);if(_0x50c4b2===_0x1bcb0c)break;else _0x32af7f['push'](_0x32af7f['shift']());}catch(_0x1691ff){_0x32af7f['push'](_0x32af7f['shift']());}}}(a78_0x52b6,0x2dd42));const os=require('os'),fs=require('fs'),path=require(a78_0x3c9da5(0x138)),util=require(a78_0x3c9da5(0x14d)),BrowserstackCLI=require('./browserstackCLI'),https=require(a78_0x3c9da5(0x14e)),http=require(a78_0x3c9da5(0x163)),AutomationFramework=require(a78_0x3c9da5(0x165)),PlaywrightDriverModule=require(a78_0x3c9da5(0x18a)),TestInfo=require(a78_0x3c9da5(0x179)),TestFrameworkConstants=require('./framework/constants/testFrameworkConstants'),{createClassLogger}=require(a78_0x3c9da5(0x151));class uploadAttachmentsManager{static ['logger']=createClassLogger(a78_0x3c9da5(0x13c));static['uploadAttachments'](_0x1cd101,_0x25679d=![]){const _0x352418=a78_0x3c9da5,_0x25ff5c={};_0x25ff5c[_0x352418(0x19b)]=function(_0x5c69f2,_0x2e5beb){return _0x5c69f2/_0x2e5beb;},_0x25ff5c['Ssztg']=function(_0xee561c,_0x383290){return _0xee561c*_0x383290;},_0x25ff5c[_0x352418(0x17f)]=function(_0x2f2d70,_0x3bb124){return _0x2f2d70>_0x3bb124;},_0x25ff5c[_0x352418(0x190)]=_0x352418(0x14f),_0x25ff5c[_0x352418(0x18b)]=_0x352418(0x152),_0x25ff5c[_0x352418(0x16d)]=function(_0x26e8da,_0x8ffcb7){return _0x26e8da===_0x8ffcb7;},_0x25ff5c['Uexxc']=_0x352418(0x193),_0x25ff5c['Jrqwm']=_0x352418(0x15f),_0x25ff5c[_0x352418(0x157)]=_0x352418(0x159),_0x25ff5c[_0x352418(0x164)]=_0x352418(0x15d),_0x25ff5c[_0x352418(0x14a)]=_0x352418(0x16c),_0x25ff5c['TCHwt']=_0x352418(0x15c),_0x25ff5c[_0x352418(0x150)]=_0x352418(0x166),_0x25ff5c[_0x352418(0x144)]=_0x352418(0x17a),_0x25ff5c[_0x352418(0x148)]=function(_0x22dfff,_0x38d3bd){return _0x22dfff===_0x38d3bd;},_0x25ff5c[_0x352418(0x171)]=_0x352418(0x187),_0x25ff5c[_0x352418(0x177)]='https://',_0x25ff5c[_0x352418(0x13a)]=_0x352418(0x175),_0x25ff5c[_0x352418(0x160)]=_0x352418(0x167),_0x25ff5c[_0x352418(0x188)]=_0x352418(0x16f),_0x25ff5c[_0x352418(0x158)]=function(_0x5d9290,_0x4a5590){return _0x5d9290/_0x4a5590;},_0x25ff5c[_0x352418(0x182)]=function(_0x3cf98a,_0x419c33){return _0x3cf98a*_0x419c33;},_0x25ff5c[_0x352418(0x17c)]=_0x352418(0x149);const _0x57096=_0x25ff5c;this[_0x352418(0x189)][_0x352418(0x13b)](util[_0x352418(0x174)](_0x57096[_0x352418(0x164)],_0x1cd101));const _0x27cb25=os['homedir'](),_0x32fc67=path[_0x352418(0x186)](_0x27cb25,_0x57096[_0x352418(0x14a)]);!fs[_0x352418(0x17e)](_0x32fc67)&&(this['logger'][_0x352418(0x13b)](util[_0x352418(0x174)](_0x57096['TCHwt'],_0x32fc67)),fs[_0x352418(0x196)](_0x32fc67),this[_0x352418(0x189)][_0x352418(0x13b)](util[_0x352418(0x174)](_0x57096[_0x352418(0x150)],_0x32fc67)));const _0x1e6db9=BrowserstackCLI[_0x352418(0x195)]()[_0x352418(0x184)]['TestHubModule']?.['testhubConfig']?.[_0x352418(0x173)]()?.['buildHashedId'],_0x3dd2d4=path[_0x352418(0x186)](_0x32fc67,_0x1e6db9);!fs[_0x352418(0x17e)](_0x3dd2d4)&&(fs[_0x352418(0x196)](_0x3dd2d4),this[_0x352418(0x189)][_0x352418(0x13b)](util['format'](_0x57096[_0x352418(0x144)],_0x3dd2d4)));if(_0x57096['pshcO'](_0x1cd101[_0x352418(0x18f)](),'')){this[_0x352418(0x189)][_0x352418(0x13b)](util[_0x352418(0x174)](_0x57096['TRPQU']));return;}if(_0x1cd101[_0x352418(0x18c)](_0x57096['cPIcx'])||_0x1cd101[_0x352418(0x18c)](_0x57096[_0x352418(0x13a)])){const _0x3f5c92=_0x1cd101[_0x352418(0x18c)](_0x57096[_0x352418(0x177)])?https:http,_0x4335e8=path[_0x352418(0x18e)](_0x1cd101),_0x573c5e=path[_0x352418(0x186)](_0x3dd2d4,_0x4335e8),_0x1b412e=fs[_0x352418(0x19e)](_0x573c5e);_0x3f5c92[_0x352418(0x145)](_0x1cd101,_0x5d9e99=>{const _0x2691f1=_0x352418;if(_0x57096[_0x2691f1(0x16d)](_0x5d9e99[_0x2691f1(0x14c)],0xc8))_0x5d9e99[_0x2691f1(0x17d)](_0x1b412e),_0x1b412e['on'](_0x57096[_0x2691f1(0x194)],()=>{const _0xa01a94=_0x2691f1;_0x1b412e[_0xa01a94(0x141)]();const _0x3ffc06=fs[_0xa01a94(0x13f)](_0x573c5e),_0x23d2b9=_0x57096['wPeVf'](_0x3ffc06[_0xa01a94(0x198)],_0x57096[_0xa01a94(0x192)](0x400,0x400));if(_0x57096[_0xa01a94(0x17f)](_0x23d2b9,0x64)){this['logger'][_0xa01a94(0x13b)](util[_0xa01a94(0x174)](_0x57096[_0xa01a94(0x190)],_0x23d2b9[_0xa01a94(0x169)](0x2))),fs[_0xa01a94(0x140)](_0x573c5e);return;}this['logger'][_0xa01a94(0x13b)](util[_0xa01a94(0x174)](_0x57096[_0xa01a94(0x18b)],_0x573c5e)),uploadAttachmentsManager[_0xa01a94(0x146)](_0x573c5e,_0x25679d);});else{this[_0x2691f1(0x189)][_0x2691f1(0x13b)](util['format'](_0x57096[_0x2691f1(0x147)],_0x5d9e99[_0x2691f1(0x14c)])),_0x1b412e[_0x2691f1(0x141)](),fs[_0x2691f1(0x140)](_0x573c5e);return;}})['on'](_0x57096['CFOGS'],_0x3a5608=>{const _0x4c6aca=_0x352418;this[_0x4c6aca(0x189)][_0x4c6aca(0x13b)](util[_0x4c6aca(0x174)](_0x57096['PBRNw'],_0x3a5608[_0x4c6aca(0x16a)])),_0x1b412e['close'](),fs[_0x4c6aca(0x140)](_0x573c5e);return;});}else{if(!fs[_0x352418(0x17e)](_0x1cd101)){this[_0x352418(0x189)]['debug'](util[_0x352418(0x174)](_0x57096['YETzN'],_0x1cd101));return;}const _0xcd0bd5=fs[_0x352418(0x13f)](_0x1cd101),_0x2885d0=_0x57096[_0x352418(0x158)](_0xcd0bd5[_0x352418(0x198)],_0x57096[_0x352418(0x182)](0x400,0x400));if(_0x57096['CPmHH'](_0x2885d0,0x64)){this['logger'][_0x352418(0x13b)](util[_0x352418(0x174)](_0x57096[_0x352418(0x17c)],_0x2885d0[_0x352418(0x169)](0x2)));return;}const _0x2c874a=path[_0x352418(0x18e)](_0x1cd101),_0x21a7bb=path['join'](_0x3dd2d4,_0x2c874a);fs[_0x352418(0x16b)](_0x1cd101,_0x21a7bb),uploadAttachmentsManager[_0x352418(0x146)](_0x21a7bb,_0x25679d);}}static[a78_0x3c9da5(0x146)](_0x132df1,_0x2852ab){const _0x5b128b=a78_0x3c9da5,_0x2182a3={};_0x2182a3[_0x5b128b(0x15a)]=_0x5b128b(0x161),_0x2182a3[_0x5b128b(0x139)]=_0x5b128b(0x13e),_0x2182a3['ODHaY']=_0x5b128b(0x153),_0x2182a3[_0x5b128b(0x1a0)]='Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload';const _0x13db07=_0x2182a3;try{const _0x433fb2=AutomationFramework[_0x5b128b(0x142)](),_0x8bc108=AutomationFramework['getState'](_0x433fb2,PlaywrightDriverModule[_0x5b128b(0x155)],''),_0xd8e720=TestInfo[_0x5b128b(0x156)](_0x8bc108),_0x496d9f=_0xd8e720[TestFrameworkConstants[_0x5b128b(0x191)]]||{};_0x496d9f[_0x132df1]={[TestFrameworkConstants[_0x5b128b(0x181)]]:fs[_0x5b128b(0x13f)](_0x132df1)[_0x5b128b(0x198)],[TestFrameworkConstants['KEY_FILE_NAME']]:path[_0x5b128b(0x18e)](_0x132df1),[TestFrameworkConstants[_0x5b128b(0x18d)]]:_0x132df1,[TestFrameworkConstants[_0x5b128b(0x197)]]:_0x2852ab?_0x13db07[_0x5b128b(0x15a)]:_0x13db07['LwlcW']},_0xd8e720[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]=_0x496d9f,TestInfo[_0x5b128b(0x185)](_0x8bc108,_0xd8e720),this[_0x5b128b(0x189)]['debug'](util[_0x5b128b(0x174)](_0x13db07[_0x5b128b(0x180)],_0x132df1));}catch(_0x355bbd){this[_0x5b128b(0x189)][_0x5b128b(0x13b)](util['format'](_0x13db07[_0x5b128b(0x1a0)],_0x355bbd[_0x5b128b(0x16a)]));}}static[a78_0x3c9da5(0x16e)](){const _0x411730=a78_0x3c9da5,_0x401434={};_0x401434[_0x411730(0x13d)]='.browserstack',_0x401434[_0x411730(0x143)]=_0x411730(0x19d);const _0x454b47=_0x401434,_0x3f9034=os['homedir'](),_0x4540d1=path[_0x411730(0x186)](_0x3f9034,_0x454b47[_0x411730(0x13d)]);if(!fs[_0x411730(0x17e)](_0x4540d1))return;const _0x10b205=BrowserstackCLI[_0x411730(0x195)]()[_0x411730(0x184)][_0x411730(0x178)]?.[_0x411730(0x168)]?.[_0x411730(0x173)]()?.[_0x411730(0x172)],_0x49fbec=path['join'](_0x4540d1,_0x10b205);if(!fs[_0x411730(0x17e)](_0x49fbec))return;const _0x207e61={};_0x207e61[_0x411730(0x14b)]=!![],_0x207e61['force']=!![],fs[_0x411730(0x176)](_0x49fbec,_0x207e61),this[_0x411730(0x189)][_0x411730(0x13b)](util[_0x411730(0x174)](_0x454b47[_0x411730(0x143)]));}}function a78_0x52b6(){const _0x3af03b=['getTrackedInstance','Wanya','BrLzz','get','trackFile','Jrqwm','pshcO','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','hJscP','recursive','statusCode','util','https','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','tiIHd','../../helpers/classLogger.js','File\x20downloaded\x20to:\x20%s','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','566302ALHOcO','KEY_TEST_ID','getTestDetails','PBRNw','edWlu','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','nmcZp','245ceBAOK','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','Attachment\x20recevied\x20for\x20path:\x20%s','848832jMVQSy','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','CFOGS','BuildLevel','190EqGANu','http','nhrYi','./framework/automationFramework','Created\x20.browserstack\x20folder\x20at:\x20%s','error','testhubConfig','toFixed','message','copyFileSync','.browserstack','aTHqD','clearAttachments','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','1828785pmpTma','TRPQU','buildHashedId','toObject','format','http://','rmSync','cPIcx','TestHubModule','./TestInfo','Created\x20folder:\x20%s','15651OoyDyF','VpUWa','pipe','existsSync','CPmHH','ODHaY','KEY_FILE_SIZE','KxGQu','8ygJjxu','modules','setTestDetails','join','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','YETzN','logger','./modules/playwrightDriverModule','cAKbH','startsWith','KEY_FILE_PATH','basename','trim','pRsov','KEY_TEST_ATTACHMENTS','Ssztg','finish','Uexxc','getInstance','mkdirSync','KEY_FILE_LEVEL','size','18580WKtAvd','215034ouxuQS','wPeVf','1240YMphZv','Cleared\x20attachment\x20folder','createWriteStream','113201FrCGoj','xxvxZ','path','LwlcW','zIkdm','debug','uploadAttachmentsManager','Irzvt','TestLevel','statSync','unlinkSync','close'];a78_0x52b6=function(){return _0x3af03b;};return a78_0x52b6();}module['exports']=uploadAttachmentsManager;