const a82_0x1c1552=a82_0x5b7f;(function(_0x2cbf73,_0x24dbd7){const _0x54ec52=a82_0x5b7f,_0x4b4f55=_0x2cbf73();while(!![]){try{const _0x1030d4=-parseInt(_0x54ec52(0x15e))/0x1+parseInt(_0x54ec52(0x15d))/0x2+-parseInt(_0x54ec52(0x146))/0x3+-parseInt(_0x54ec52(0x143))/0x4*(parseInt(_0x54ec52(0x17c))/0x5)+-parseInt(_0x54ec52(0x13f))/0x6+-parseInt(_0x54ec52(0x155))/0x7*(-parseInt(_0x54ec52(0x139))/0x8)+-parseInt(_0x54ec52(0x19c))/0x9*(-parseInt(_0x54ec52(0x18f))/0xa);if(_0x1030d4===_0x24dbd7)break;else _0x4b4f55['push'](_0x4b4f55['shift']());}catch(_0x1bad9e){_0x4b4f55['push'](_0x4b4f55['shift']());}}}(a82_0x4128,0x515c3));const os=require('os'),fs=require('fs'),path=require('path'),util=require(a82_0x1c1552(0x174)),BrowserstackCLI=require(a82_0x1c1552(0x188)),https=require(a82_0x1c1552(0x13a)),http=require(a82_0x1c1552(0x194)),AutomationFramework=require(a82_0x1c1552(0x15b)),PlaywrightDriverModule=require(a82_0x1c1552(0x152)),TestInfo=require(a82_0x1c1552(0x185)),TestFrameworkConstants=require(a82_0x1c1552(0x138)),{createClassLogger}=require(a82_0x1c1552(0x19b));function a82_0x4128(){const _0x58b0f7=['Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','./TestInfo','IHFZQ','recursive','./browserstackCLI','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','TestHubModule','KEY_FILE_NAME','ZKxIn','get','uploadAttachmentsManager','4230fZClBP','http://','startsWith','size','xDzKy','http','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','IRGqY','XfHgf','getTestDetails','Cleared\x20attachment\x20folder','close','../../helpers/classLogger.js','19089FhFnva','./framework/constants/testFrameworkConstants','2996504uvhGuW','https','Created\x20.browserstack\x20folder\x20at:\x20%s','nJktq','toObject','buildHashedId','421248wwFdID','existsSync','getTestIdentifierFromTestInfo','HOrhv','47560uHAaid','File\x20downloaded\x20to:\x20%s','debug','1864935AezaiS','TCofn','tOcVQ','KEY_TEST_ATTACHMENTS','wRQhh','exports','gYhSw','message','xniMv','clearAttachments','zibuT','statusCode','./modules/playwrightDriverModule','__workerDetails','Created\x20folder:\x20%s','7tigRVF','homedir','eCzVC','Attachment\x20recevied\x20for\x20path:\x20%s','QDKiU','trackFile','./framework/automationFramework','JCmQc','897978QlYIGk','148691hwamXt','statSync','testhubConfig','basename','pipe','BWBFV','KEY_FILE_SIZE','currentTest','QDRXI','mkdirSync','retry','join','uDFxe','format','ELBRJ','kJOMP','LBHtD','GLKqr','PteVb','https://','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','KEY_FILE_PATH','util','toFixed','BuildLevel','FwDrk','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','logger','.browserstack','modules','230MCJEyU','copyFileSync','CqwFh','blnNX','unlinkSync','TestLevel','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','GEiSH'];a82_0x4128=function(){return _0x58b0f7;};return a82_0x4128();}class uploadAttachmentsManager{static [a82_0x1c1552(0x179)]=createClassLogger(a82_0x1c1552(0x18e));static['uploadAttachments'](_0x3df730,_0x19d61c=![]){const _0x3066e6=a82_0x1c1552,_0x2e8165={};_0x2e8165[_0x3066e6(0x150)]=function(_0x4d0faf,_0x1f03ea){return _0x4d0faf/_0x1f03ea;},_0x2e8165[_0x3066e6(0x196)]=function(_0x2aed74,_0x54ffaa){return _0x2aed74*_0x54ffaa;},_0x2e8165[_0x3066e6(0x16a)]=function(_0x3607cc,_0x48f47b){return _0x3607cc>_0x48f47b;},_0x2e8165[_0x3066e6(0x16d)]='Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.',_0x2e8165['TCofn']=_0x3066e6(0x144),_0x2e8165[_0x3066e6(0x17e)]=function(_0x1388e6,_0xe4ac73){return _0x1388e6===_0xe4ac73;},_0x2e8165[_0x3066e6(0x186)]='finish',_0x2e8165[_0x3066e6(0x170)]=_0x3066e6(0x184),_0x2e8165[_0x3066e6(0x159)]='Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload',_0x2e8165[_0x3066e6(0x163)]=_0x3066e6(0x158),_0x2e8165['gYhSw']=_0x3066e6(0x17a),_0x2e8165['tOcVQ']='.browserstack\x20folder\x20not\x20found\x20at:\x20%s',_0x2e8165[_0x3066e6(0x14a)]=_0x3066e6(0x13b),_0x2e8165[_0x3066e6(0x16e)]=_0x3066e6(0x154),_0x2e8165['eCzVC']=function(_0x30f07c,_0x482697){return _0x30f07c===_0x482697;},_0x2e8165[_0x3066e6(0x177)]=_0x3066e6(0x189),_0x2e8165[_0x3066e6(0x197)]=_0x3066e6(0x171),_0x2e8165[_0x3066e6(0x14e)]=_0x3066e6(0x190),_0x2e8165[_0x3066e6(0x193)]='error',_0x2e8165['Ahbop']=_0x3066e6(0x172),_0x2e8165[_0x3066e6(0x13c)]=function(_0x28a163,_0x28a32f){return _0x28a163>_0x28a32f;},_0x2e8165['GLKqr']=_0x3066e6(0x195);const _0x1d18c3=_0x2e8165;this[_0x3066e6(0x179)][_0x3066e6(0x145)](util[_0x3066e6(0x16b)](_0x1d18c3['BWBFV'],_0x3df730));const _0x1a41e3=os[_0x3066e6(0x156)](),_0x1e5363=path[_0x3066e6(0x169)](_0x1a41e3,_0x1d18c3[_0x3066e6(0x14c)]);!fs[_0x3066e6(0x140)](_0x1e5363)&&(this[_0x3066e6(0x179)][_0x3066e6(0x145)](util[_0x3066e6(0x16b)](_0x1d18c3[_0x3066e6(0x148)],_0x1e5363)),fs[_0x3066e6(0x167)](_0x1e5363),this['logger'][_0x3066e6(0x145)](util[_0x3066e6(0x16b)](_0x1d18c3[_0x3066e6(0x14a)],_0x1e5363)));const _0x56dcc0=BrowserstackCLI['getInstance']()[_0x3066e6(0x17b)][_0x3066e6(0x18a)]?.[_0x3066e6(0x160)]?.[_0x3066e6(0x13d)]()?.['buildHashedId'],_0x246a36=path[_0x3066e6(0x169)](_0x1e5363,_0x56dcc0);!fs['existsSync'](_0x246a36)&&(fs['mkdirSync'](_0x246a36),this['logger'][_0x3066e6(0x145)](util['format'](_0x1d18c3['LBHtD'],_0x246a36)));if(_0x1d18c3[_0x3066e6(0x157)](_0x3df730['trim'](),'')){this['logger']['debug'](util[_0x3066e6(0x16b)](_0x1d18c3[_0x3066e6(0x177)]));return;}if(_0x3df730[_0x3066e6(0x191)](_0x1d18c3[_0x3066e6(0x197)])||_0x3df730[_0x3066e6(0x191)](_0x1d18c3[_0x3066e6(0x14e)])){const _0x4db2dc=_0x3df730[_0x3066e6(0x191)](_0x1d18c3['XfHgf'])?https:http,_0x49b68e=path[_0x3066e6(0x161)](_0x3df730),_0x24adfd=path[_0x3066e6(0x169)](_0x246a36,_0x49b68e),_0x345a57=fs['createWriteStream'](_0x24adfd);_0x4db2dc[_0x3066e6(0x18d)](_0x3df730,_0x1b0026=>{const _0x57c4c2=_0x3066e6;if(_0x1d18c3[_0x57c4c2(0x17e)](_0x1b0026[_0x57c4c2(0x151)],0xc8))_0x1b0026[_0x57c4c2(0x162)](_0x345a57),_0x345a57['on'](_0x1d18c3[_0x57c4c2(0x186)],()=>{const _0x4c6de1=_0x57c4c2;_0x345a57[_0x4c6de1(0x19a)]();const _0x5147b3=fs[_0x4c6de1(0x15f)](_0x24adfd),_0x4b8ee8=_0x1d18c3['zibuT'](_0x5147b3['size'],_0x1d18c3[_0x4c6de1(0x196)](0x400,0x400));if(_0x1d18c3[_0x4c6de1(0x16a)](_0x4b8ee8,0x64)){this[_0x4c6de1(0x179)][_0x4c6de1(0x145)](util[_0x4c6de1(0x16b)](_0x1d18c3[_0x4c6de1(0x16d)],_0x4b8ee8[_0x4c6de1(0x175)](0x2))),fs[_0x4c6de1(0x180)](_0x24adfd);return;}this['logger'][_0x4c6de1(0x145)](util[_0x4c6de1(0x16b)](_0x1d18c3[_0x4c6de1(0x147)],_0x24adfd)),uploadAttachmentsManager[_0x4c6de1(0x15a)](_0x24adfd,_0x19d61c);});else{this['logger'][_0x57c4c2(0x145)](util[_0x57c4c2(0x16b)](_0x1d18c3[_0x57c4c2(0x170)],_0x1b0026[_0x57c4c2(0x151)])),_0x345a57[_0x57c4c2(0x19a)](),fs[_0x57c4c2(0x180)](_0x24adfd);return;}})['on'](_0x1d18c3[_0x3066e6(0x193)],_0x2de0fc=>{const _0x35b4ab=_0x3066e6;this[_0x35b4ab(0x179)]['debug'](util[_0x35b4ab(0x16b)](_0x1d18c3[_0x35b4ab(0x159)],_0x2de0fc[_0x35b4ab(0x14d)])),_0x345a57['close'](),fs[_0x35b4ab(0x180)](_0x24adfd);return;});}else{if(!fs['existsSync'](_0x3df730)){this[_0x3066e6(0x179)]['debug'](util['format'](_0x1d18c3['Ahbop'],_0x3df730));return;}const _0x35fcfa=fs[_0x3066e6(0x15f)](_0x3df730),_0x1fc6c7=_0x1d18c3[_0x3066e6(0x150)](_0x35fcfa[_0x3066e6(0x192)],_0x1d18c3[_0x3066e6(0x196)](0x400,0x400));if(_0x1d18c3['nJktq'](_0x1fc6c7,0x64)){this['logger'][_0x3066e6(0x145)](util[_0x3066e6(0x16b)](_0x1d18c3[_0x3066e6(0x16f)],_0x1fc6c7[_0x3066e6(0x175)](0x2)));return;}const _0x11c4be=path[_0x3066e6(0x161)](_0x3df730),_0x3b253a=path[_0x3066e6(0x169)](_0x246a36,_0x11c4be);fs[_0x3066e6(0x17d)](_0x3df730,_0x3b253a),uploadAttachmentsManager[_0x3066e6(0x15a)](_0x3b253a,_0x19d61c);}}static['trackFile'](_0x5a9fcb,_0x457393){const _0x4ce084=a82_0x1c1552,_0x29d224={};_0x29d224[_0x4ce084(0x15c)]=_0x4ce084(0x176),_0x29d224[_0x4ce084(0x142)]=_0x4ce084(0x181),_0x29d224[_0x4ce084(0x16c)]='Attachment\x20file\x20tracked\x20for\x20upload:\x20%s',_0x29d224[_0x4ce084(0x183)]=_0x4ce084(0x178);const _0x19df7d=_0x29d224;try{const _0x523dac=global[_0x4ce084(0x153)]?.[_0x4ce084(0x165)]?.['testInfo'],_0x52f434=TestInfo[_0x4ce084(0x141)](_0x523dac,_0x523dac?.[_0x4ce084(0x168)]),_0x18cb19=TestInfo[_0x4ce084(0x198)](_0x52f434),_0x2607f4=_0x18cb19[TestFrameworkConstants[_0x4ce084(0x149)]]||{};_0x2607f4[_0x5a9fcb]={[TestFrameworkConstants[_0x4ce084(0x164)]]:fs[_0x4ce084(0x15f)](_0x5a9fcb)['size'],[TestFrameworkConstants[_0x4ce084(0x18b)]]:path[_0x4ce084(0x161)](_0x5a9fcb),[TestFrameworkConstants[_0x4ce084(0x173)]]:_0x5a9fcb,[TestFrameworkConstants['KEY_FILE_LEVEL']]:_0x457393?_0x19df7d[_0x4ce084(0x15c)]:_0x19df7d['HOrhv']},_0x18cb19[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]=_0x2607f4,TestInfo['setTestDetails'](_0x52f434,_0x18cb19),this[_0x4ce084(0x179)]['debug'](util[_0x4ce084(0x16b)](_0x19df7d[_0x4ce084(0x16c)],_0x5a9fcb));}catch(_0x47f3f4){this[_0x4ce084(0x179)]['debug'](util[_0x4ce084(0x16b)](_0x19df7d['GEiSH'],_0x47f3f4[_0x4ce084(0x14d)]));}}static[a82_0x1c1552(0x14f)](){const _0x253d76=a82_0x1c1552,_0x182b38={};_0x182b38[_0x253d76(0x17f)]=_0x253d76(0x17a),_0x182b38[_0x253d76(0x18c)]=_0x253d76(0x182),_0x182b38[_0x253d76(0x166)]=_0x253d76(0x199);const _0x11a32e=_0x182b38,_0x5a4e88=os[_0x253d76(0x156)](),_0x14f75b=path[_0x253d76(0x169)](_0x5a4e88,_0x11a32e[_0x253d76(0x17f)]);if(!fs[_0x253d76(0x140)](_0x14f75b))return;const _0x8dee6=BrowserstackCLI['getInstance']()[_0x253d76(0x17b)][_0x253d76(0x18a)]?.[_0x253d76(0x160)]?.[_0x253d76(0x13d)]()?.[_0x253d76(0x13e)],_0x3e5b2b=_0x8dee6?path[_0x253d76(0x169)](_0x14f75b,_0x8dee6):null;if(!_0x3e5b2b||!fs['existsSync'](_0x3e5b2b)){this[_0x253d76(0x179)][_0x253d76(0x145)](util[_0x253d76(0x16b)](_0x11a32e[_0x253d76(0x18c)],_0x8dee6));return;}const _0x138a07={};_0x138a07[_0x253d76(0x187)]=!![],_0x138a07['force']=!![],fs['rmSync'](_0x3e5b2b,_0x138a07),this[_0x253d76(0x179)][_0x253d76(0x145)](util['format'](_0x11a32e[_0x253d76(0x166)]));}}function a82_0x5b7f(_0x4f978e,_0x41557f){const _0x412821=a82_0x4128();return a82_0x5b7f=function(_0x5b7ffd,_0x3cd21f){_0x5b7ffd=_0x5b7ffd-0x138;let _0xa59f57=_0x412821[_0x5b7ffd];return _0xa59f57;},a82_0x5b7f(_0x4f978e,_0x41557f);}module[a82_0x1c1552(0x14b)]=uploadAttachmentsManager;