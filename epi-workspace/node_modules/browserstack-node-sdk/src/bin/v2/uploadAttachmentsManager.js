function a85_0x6ab0(_0x1a7ed8,_0x3b0ef8){const _0x50bbbb=a85_0x50bb();return a85_0x6ab0=function(_0x6ab07,_0x5b44cd){_0x6ab07=_0x6ab07-0x87;let _0x3c314e=_0x50bbbb[_0x6ab07];return _0x3c314e;},a85_0x6ab0(_0x1a7ed8,_0x3b0ef8);}const a85_0x5c42f8=a85_0x6ab0;(function(_0x1640d9,_0x204314){const _0x3bd090=a85_0x6ab0,_0x380592=_0x1640d9();while(!![]){try{const _0x160d5a=parseInt(_0x3bd090(0xb0))/0x1*(parseInt(_0x3bd090(0xd7))/0x2)+-parseInt(_0x3bd090(0x93))/0x3+parseInt(_0x3bd090(0xa3))/0x4+parseInt(_0x3bd090(0xed))/0x5+parseInt(_0x3bd090(0xbf))/0x6*(parseInt(_0x3bd090(0xbb))/0x7)+parseInt(_0x3bd090(0x98))/0x8*(-parseInt(_0x3bd090(0x89))/0x9)+-parseInt(_0x3bd090(0x97))/0xa;if(_0x160d5a===_0x204314)break;else _0x380592['push'](_0x380592['shift']());}catch(_0x444c36){_0x380592['push'](_0x380592['shift']());}}}(a85_0x50bb,0xb7317));const os=require('os'),fs=require('fs'),path=require('path'),util=require(a85_0x5c42f8(0x9e)),BrowserstackCLI=require(a85_0x5c42f8(0x90)),https=require('https'),http=require('http'),AutomationFramework=require(a85_0x5c42f8(0x92)),PlaywrightDriverModule=require(a85_0x5c42f8(0x9b)),TestInfo=require(a85_0x5c42f8(0x88)),TestFrameworkConstants=require(a85_0x5c42f8(0xdf)),{createClassLogger}=require('../../helpers/classLogger.js');class uploadAttachmentsManager{static [a85_0x5c42f8(0xeb)]=createClassLogger(a85_0x5c42f8(0xb3));static[a85_0x5c42f8(0x91)](_0x1cca29,_0x535c92=![]){const _0x5db436=a85_0x5c42f8,_0x2aabd5={};_0x2aabd5[_0x5db436(0xd5)]=function(_0x224998,_0x111874){return _0x224998/_0x111874;},_0x2aabd5[_0x5db436(0xac)]=function(_0x38f2bc,_0x386840){return _0x38f2bc*_0x386840;},_0x2aabd5[_0x5db436(0xd6)]=function(_0x2c0629,_0x2fb768){return _0x2c0629>_0x2fb768;},_0x2aabd5[_0x5db436(0x9f)]='Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.',_0x2aabd5[_0x5db436(0xa5)]=_0x5db436(0xd4),_0x2aabd5[_0x5db436(0xa6)]=function(_0x500526,_0x55c5ac){return _0x500526===_0x55c5ac;},_0x2aabd5['Owfdo']=_0x5db436(0xb9),_0x2aabd5[_0x5db436(0xb2)]=_0x5db436(0xe7),_0x2aabd5[_0x5db436(0xba)]=_0x5db436(0xa0),_0x2aabd5[_0x5db436(0xcf)]=_0x5db436(0xc3),_0x2aabd5[_0x5db436(0xda)]=_0x5db436(0xa2),_0x2aabd5[_0x5db436(0xbe)]=_0x5db436(0xd1),_0x2aabd5[_0x5db436(0xa4)]=_0x5db436(0xb7),_0x2aabd5['qTJJV']=_0x5db436(0xe4),_0x2aabd5[_0x5db436(0xc5)]=_0x5db436(0xaa),_0x2aabd5[_0x5db436(0xc0)]=_0x5db436(0xae),_0x2aabd5[_0x5db436(0xaf)]=_0x5db436(0x87),_0x2aabd5[_0x5db436(0xe8)]=_0x5db436(0x8e),_0x2aabd5[_0x5db436(0x8f)]=_0x5db436(0xa9),_0x2aabd5[_0x5db436(0xce)]=function(_0x333e0,_0x36c76e){return _0x333e0/_0x36c76e;},_0x2aabd5[_0x5db436(0xa8)]=function(_0x3f940b,_0x30cdc3){return _0x3f940b*_0x30cdc3;},_0x2aabd5[_0x5db436(0xdb)]=_0x5db436(0xcd);const _0x57f329=_0x2aabd5;this[_0x5db436(0xeb)][_0x5db436(0xd8)](util['format'](_0x57f329[_0x5db436(0xcf)],_0x1cca29));const _0x245288=os[_0x5db436(0x9a)](),_0x177572=path['join'](_0x245288,_0x57f329['BGIFE']);!fs[_0x5db436(0xc7)](_0x177572)&&(this[_0x5db436(0xeb)][_0x5db436(0xd8)](util[_0x5db436(0xe5)](_0x57f329[_0x5db436(0xbe)],_0x177572)),fs[_0x5db436(0xdd)](_0x177572),this[_0x5db436(0xeb)][_0x5db436(0xd8)](util[_0x5db436(0xe5)](_0x57f329[_0x5db436(0xa4)],_0x177572)));const _0x5a1f4b=BrowserstackCLI['getInstance']()[_0x5db436(0xd9)][_0x5db436(0x8b)]?.[_0x5db436(0x96)]?.['toObject']()?.['buildHashedId'],_0x534a70=path[_0x5db436(0xb6)](_0x177572,_0x5a1f4b);!fs[_0x5db436(0xc7)](_0x534a70)&&(fs[_0x5db436(0xdd)](_0x534a70),this[_0x5db436(0xeb)][_0x5db436(0xd8)](util[_0x5db436(0xe5)](_0x57f329[_0x5db436(0xc6)],_0x534a70)));if(_0x57f329['MmLmU'](_0x1cca29[_0x5db436(0xad)](),'')){this[_0x5db436(0xeb)][_0x5db436(0xd8)](util[_0x5db436(0xe5)](_0x57f329['ZbPCf']));return;}if(_0x1cca29[_0x5db436(0xcb)](_0x57f329['CvQKp'])||_0x1cca29['startsWith'](_0x57f329[_0x5db436(0xaf)])){const _0x4ca70a=_0x1cca29[_0x5db436(0xcb)](_0x57f329['CvQKp'])?https:http,_0x31cb04=path['basename'](_0x1cca29),_0x4accf3=path[_0x5db436(0xb6)](_0x534a70,_0x31cb04),_0x2badb6=fs[_0x5db436(0xab)](_0x4accf3);_0x4ca70a['get'](_0x1cca29,_0x4ebc7a=>{const _0x4df92e=_0x5db436;if(_0x57f329[_0x4df92e(0xa6)](_0x4ebc7a[_0x4df92e(0xb5)],0xc8))_0x4ebc7a[_0x4df92e(0xe0)](_0x2badb6),_0x2badb6['on'](_0x57f329[_0x4df92e(0xb8)],()=>{const _0x26d7eb=_0x4df92e;_0x2badb6['close']();const _0x16797b=fs[_0x26d7eb(0xa1)](_0x4accf3),_0x1dc11e=_0x57f329[_0x26d7eb(0xd5)](_0x16797b[_0x26d7eb(0xea)],_0x57f329[_0x26d7eb(0xac)](0x400,0x400));if(_0x57f329[_0x26d7eb(0xd6)](_0x1dc11e,0x64)){this['logger']['debug'](util['format'](_0x57f329[_0x26d7eb(0x9f)],_0x1dc11e['toFixed'](0x2))),fs['unlinkSync'](_0x4accf3);return;}this[_0x26d7eb(0xeb)]['debug'](util[_0x26d7eb(0xe5)](_0x57f329[_0x26d7eb(0xa5)],_0x4accf3)),uploadAttachmentsManager[_0x26d7eb(0xb4)](_0x4accf3,_0x535c92);});else{this[_0x4df92e(0xeb)][_0x4df92e(0xd8)](util[_0x4df92e(0xe5)](_0x57f329[_0x4df92e(0xb2)],_0x4ebc7a[_0x4df92e(0xb5)])),_0x2badb6[_0x4df92e(0xde)](),fs['unlinkSync'](_0x4accf3);return;}})['on'](_0x57f329[_0x5db436(0xe8)],_0xf13c1a=>{const _0x3b0c3c=_0x5db436;this[_0x3b0c3c(0xeb)][_0x3b0c3c(0xd8)](util[_0x3b0c3c(0xe5)](_0x57f329[_0x3b0c3c(0xba)],_0xf13c1a[_0x3b0c3c(0xe1)])),_0x2badb6[_0x3b0c3c(0xde)](),fs[_0x3b0c3c(0xc9)](_0x4accf3);return;});}else{if(!fs['existsSync'](_0x1cca29)){this[_0x5db436(0xeb)][_0x5db436(0xd8)](util[_0x5db436(0xe5)](_0x57f329[_0x5db436(0x8f)],_0x1cca29));return;}const _0x4615d4=fs[_0x5db436(0xa1)](_0x1cca29),_0x295f1a=_0x57f329[_0x5db436(0xce)](_0x4615d4[_0x5db436(0xea)],_0x57f329[_0x5db436(0xa8)](0x400,0x400));if(_0x57f329[_0x5db436(0xd6)](_0x295f1a,0x64)){this[_0x5db436(0xeb)][_0x5db436(0xd8)](util['format'](_0x57f329[_0x5db436(0xdb)],_0x295f1a[_0x5db436(0x9d)](0x2)));return;}const _0x30c3a2=path[_0x5db436(0xc1)](_0x1cca29),_0x429f8b=path[_0x5db436(0xb6)](_0x534a70,_0x30c3a2);fs['copyFileSync'](_0x1cca29,_0x429f8b),uploadAttachmentsManager[_0x5db436(0xb4)](_0x429f8b,_0x535c92);}}static[a85_0x5c42f8(0xb4)](_0xec3c58,_0x467b42){const _0x3e8149=a85_0x5c42f8,_0x1ac842={};_0x1ac842[_0x3e8149(0x8d)]='BuildLevel',_0x1ac842[_0x3e8149(0xe2)]=_0x3e8149(0xe9),_0x1ac842['sQpJK']='Attachment\x20file\x20tracked\x20for\x20upload:\x20%s',_0x1ac842[_0x3e8149(0x8a)]=_0x3e8149(0xca);const _0x5f304d=_0x1ac842;try{let _0x292b5d;const _0x1da791=global['__workerDetails']?.[_0x3e8149(0xbd)]?.['testInfo'];if(!_0x1da791){const _0x557244=AutomationFramework['getTrackedInstance']();_0x292b5d=AutomationFramework[_0x3e8149(0xc2)](_0x557244,PlaywrightDriverModule[_0x3e8149(0xdc)],'');}else _0x292b5d=TestInfo[_0x3e8149(0x99)](_0x1da791,_0x1da791['retry']);const _0xf1d41=TestInfo['getTestDetails'](_0x292b5d),_0x2c71fd=_0xf1d41[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]||{};_0x2c71fd[_0xec3c58]={[TestFrameworkConstants['KEY_FILE_SIZE']]:fs[_0x3e8149(0xa1)](_0xec3c58)[_0x3e8149(0xea)],[TestFrameworkConstants['KEY_FILE_NAME']]:path[_0x3e8149(0xc1)](_0xec3c58),[TestFrameworkConstants['KEY_FILE_PATH']]:_0xec3c58,[TestFrameworkConstants[_0x3e8149(0x9c)]]:_0x467b42?_0x5f304d[_0x3e8149(0x8d)]:_0x5f304d['CCTaM']},_0xf1d41[TestFrameworkConstants[_0x3e8149(0xcc)]]=_0x2c71fd,TestInfo[_0x3e8149(0x94)](_0x292b5d,_0xf1d41),this[_0x3e8149(0xeb)][_0x3e8149(0xd8)](util[_0x3e8149(0xe5)](_0x5f304d[_0x3e8149(0xe6)],_0xec3c58));}catch(_0x42c193){this[_0x3e8149(0xeb)][_0x3e8149(0xd8)](util[_0x3e8149(0xe5)](_0x5f304d[_0x3e8149(0x8a)],_0x42c193[_0x3e8149(0xe1)]));}}static[a85_0x5c42f8(0xc8)](){const _0x192723=a85_0x5c42f8,_0x7669bc={};_0x7669bc[_0x192723(0xd0)]=_0x192723(0xa2),_0x7669bc[_0x192723(0xb1)]=_0x192723(0xa7),_0x7669bc['YnIkE']='Cleared\x20attachment\x20folder';const _0x50fd24=_0x7669bc,_0x3feedc=os[_0x192723(0x9a)](),_0x273560=path[_0x192723(0xb6)](_0x3feedc,_0x50fd24[_0x192723(0xd0)]);if(!fs[_0x192723(0xc7)](_0x273560))return;const _0x18406f=BrowserstackCLI[_0x192723(0xec)]()[_0x192723(0xd9)][_0x192723(0x8b)]?.[_0x192723(0x96)]?.[_0x192723(0x95)]()?.[_0x192723(0xe3)],_0x2211bf=_0x18406f?path[_0x192723(0xb6)](_0x273560,_0x18406f):null;if(!_0x2211bf||!fs[_0x192723(0xc7)](_0x2211bf)){this[_0x192723(0xeb)][_0x192723(0xd8)](util[_0x192723(0xe5)](_0x50fd24['CDjtR'],_0x18406f));return;}const _0x5ab262={};_0x5ab262[_0x192723(0xd2)]=!![],_0x5ab262[_0x192723(0xc4)]=!![],fs[_0x192723(0xbc)](_0x2211bf,_0x5ab262),this['logger'][_0x192723(0xd8)](util[_0x192723(0xe5)](_0x50fd24[_0x192723(0x8c)]));}}function a85_0x50bb(){const _0x330b7b=['tiqwU','MmLmU','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','mcGff','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','createWriteStream','EYxOp','trim','https://','XOOKu','4LEpTPN','CDjtR','BfVtO','uploadAttachmentsManager','trackFile','statusCode','join','Created\x20.browserstack\x20folder\x20at:\x20%s','Owfdo','finish','XoeSA','128688sAoKlM','rmSync','currentTest','cjNLH','426gAQOUu','CvQKp','basename','getState','Attachment\x20recevied\x20for\x20path:\x20%s','force','ZbPCf','qTJJV','existsSync','clearAttachments','unlinkSync','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','startsWith','KEY_TEST_ATTACHMENTS','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','TqKik','VDUfH','IeGed','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','recursive','exports','File\x20downloaded\x20to:\x20%s','YxgKT','zZhRD','276226GKfxhh','debug','modules','BGIFE','MAGdz','KEY_TEST_ID','mkdirSync','close','./framework/constants/testFrameworkConstants','pipe','message','CCTaM','buildHashedId','Created\x20folder:\x20%s','format','sQpJK','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','jhSCD','TestLevel','size','logger','getInstance','6545935oisywb','http://','./TestInfo','6132933PLVFuu','qVouC','TestHubModule','YnIkE','xueFH','error','ghQwS','./browserstackCLI','uploadAttachments','./framework/automationFramework','1430769LjheZp','setTestDetails','toObject','testhubConfig','13820100MiRgmg','8XkTdxC','getTestIdentifierFromTestInfo','homedir','./modules/playwrightDriverModule','KEY_FILE_LEVEL','toFixed','util','dnBpN','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','statSync','.browserstack','495304AztYtC','Uguou'];a85_0x50bb=function(){return _0x330b7b;};return a85_0x50bb();}module[a85_0x5c42f8(0xd3)]=uploadAttachmentsManager;