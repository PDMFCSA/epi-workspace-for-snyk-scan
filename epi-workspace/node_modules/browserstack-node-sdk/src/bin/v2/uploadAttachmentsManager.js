const a87_0x4622c0=a87_0x3bd7;(function(_0x6caefb,_0x584d7b){const _0x488cf9=a87_0x3bd7,_0x393277=_0x6caefb();while(!![]){try{const _0x2a2641=parseInt(_0x488cf9(0x181))/0x1*(parseInt(_0x488cf9(0x13c))/0x2)+-parseInt(_0x488cf9(0x15c))/0x3*(-parseInt(_0x488cf9(0x13b))/0x4)+parseInt(_0x488cf9(0x126))/0x5*(-parseInt(_0x488cf9(0x18a))/0x6)+parseInt(_0x488cf9(0x148))/0x7+-parseInt(_0x488cf9(0x11f))/0x8*(-parseInt(_0x488cf9(0x169))/0x9)+-parseInt(_0x488cf9(0x158))/0xa*(parseInt(_0x488cf9(0x13f))/0xb)+parseInt(_0x488cf9(0x146))/0xc;if(_0x2a2641===_0x584d7b)break;else _0x393277['push'](_0x393277['shift']());}catch(_0x4e2432){_0x393277['push'](_0x393277['shift']());}}}(a87_0x2bc9,0xd5a73));const os=require('os'),fs=require('fs'),path=require('path'),util=require(a87_0x4622c0(0x157)),BrowserstackCLI=require(a87_0x4622c0(0x155)),https=require(a87_0x4622c0(0x144)),http=require('http'),AutomationFramework=require(a87_0x4622c0(0x15f)),PlaywrightDriverModule=require('./modules/playwrightDriverModule'),TestInfo=require(a87_0x4622c0(0x14a)),TestFrameworkConstants=require(a87_0x4622c0(0x186)),{createClassLogger}=require(a87_0x4622c0(0x124));function a87_0x3bd7(_0x52ca3a,_0x257cff){const _0x2bc91b=a87_0x2bc9();return a87_0x3bd7=function(_0x3bd754,_0x268756){_0x3bd754=_0x3bd754-0x11f;let _0x243929=_0x2bc91b[_0x3bd754];return _0x243929;},a87_0x3bd7(_0x52ca3a,_0x257cff);}class uploadAttachmentsManager{static ['logger']=createClassLogger(a87_0x4622c0(0x134));static[a87_0x4622c0(0x18d)](_0x55ad6,_0xd81dcb=![]){const _0x1729dd=a87_0x4622c0,_0x3b2453={};_0x3b2453[_0x1729dd(0x132)]=function(_0x5d4e9d,_0x2f0f76){return _0x5d4e9d/_0x2f0f76;},_0x3b2453[_0x1729dd(0x18c)]=function(_0x30aea4,_0x548d26){return _0x30aea4*_0x548d26;},_0x3b2453[_0x1729dd(0x14c)]=function(_0x2b97ea,_0x49e839){return _0x2b97ea>_0x49e839;},_0x3b2453[_0x1729dd(0x171)]=_0x1729dd(0x143),_0x3b2453[_0x1729dd(0x188)]=_0x1729dd(0x130),_0x3b2453['vLSsd']=function(_0x282539,_0x5b4bc1){return _0x282539===_0x5b4bc1;},_0x3b2453['biSrJ']=_0x1729dd(0x120),_0x3b2453['KnzdB']='Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload',_0x3b2453[_0x1729dd(0x15a)]='Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload',_0x3b2453[_0x1729dd(0x152)]='Attachment\x20recevied\x20for\x20path:\x20%s',_0x3b2453[_0x1729dd(0x125)]='.browserstack',_0x3b2453[_0x1729dd(0x161)]=_0x1729dd(0x177),_0x3b2453['RTSiX']=_0x1729dd(0x183),_0x3b2453[_0x1729dd(0x17f)]=_0x1729dd(0x17d),_0x3b2453[_0x1729dd(0x17b)]=_0x1729dd(0x184),_0x3b2453[_0x1729dd(0x160)]='https://',_0x3b2453['BjfCx']=_0x1729dd(0x167),_0x3b2453[_0x1729dd(0x18b)]=_0x1729dd(0x147),_0x3b2453[_0x1729dd(0x13a)]=_0x1729dd(0x150),_0x3b2453['bDpeO']=_0x1729dd(0x142);const _0x14ded4=_0x3b2453;this['logger'][_0x1729dd(0x156)](util[_0x1729dd(0x15e)](_0x14ded4[_0x1729dd(0x152)],_0x55ad6));const _0x49048d=os[_0x1729dd(0x121)](),_0x260ec5=path[_0x1729dd(0x131)](_0x49048d,_0x14ded4[_0x1729dd(0x125)]);!fs[_0x1729dd(0x172)](_0x260ec5)&&(this['logger'][_0x1729dd(0x156)](util[_0x1729dd(0x15e)](_0x14ded4[_0x1729dd(0x161)],_0x260ec5)),fs[_0x1729dd(0x145)](_0x260ec5),this[_0x1729dd(0x164)][_0x1729dd(0x156)](util[_0x1729dd(0x15e)](_0x14ded4[_0x1729dd(0x163)],_0x260ec5)));const _0x13adb1=BrowserstackCLI['getInstance']()[_0x1729dd(0x168)][_0x1729dd(0x127)]?.['testhubConfig']?.[_0x1729dd(0x16d)]()?.[_0x1729dd(0x140)],_0x279a27=path['join'](_0x260ec5,_0x13adb1);!fs[_0x1729dd(0x172)](_0x279a27)&&(fs[_0x1729dd(0x145)](_0x279a27),this[_0x1729dd(0x164)][_0x1729dd(0x156)](util[_0x1729dd(0x15e)](_0x14ded4[_0x1729dd(0x17f)],_0x279a27)));if(_0x14ded4[_0x1729dd(0x154)](_0x55ad6[_0x1729dd(0x180)](),'')){this[_0x1729dd(0x164)][_0x1729dd(0x156)](util[_0x1729dd(0x15e)](_0x14ded4[_0x1729dd(0x17b)]));return;}if(_0x55ad6[_0x1729dd(0x14b)](_0x14ded4[_0x1729dd(0x160)])||_0x55ad6['startsWith'](_0x14ded4[_0x1729dd(0x16f)])){const _0x536cce=_0x55ad6[_0x1729dd(0x14b)](_0x14ded4[_0x1729dd(0x160)])?https:http,_0x596356=path[_0x1729dd(0x182)](_0x55ad6),_0x16f57a=path['join'](_0x279a27,_0x596356),_0x165442=fs[_0x1729dd(0x13e)](_0x16f57a);_0x536cce[_0x1729dd(0x153)](_0x55ad6,_0x1267ab=>{const _0x46fe3a=_0x1729dd,_0x2d3233={'QySgM':function(_0x496aad,_0x56197b){return _0x14ded4['pfEVJ'](_0x496aad,_0x56197b);},'JnTGV':function(_0x32e9c4,_0x61f805){const _0xf66efd=a87_0x3bd7;return _0x14ded4[_0xf66efd(0x18c)](_0x32e9c4,_0x61f805);},'NlrbM':function(_0x3b56bf,_0x19a715){return _0x14ded4['mdhUf'](_0x3b56bf,_0x19a715);},'AHVvI':_0x14ded4[_0x46fe3a(0x171)],'GAtKp':_0x14ded4[_0x46fe3a(0x188)]};if(_0x14ded4[_0x46fe3a(0x154)](_0x1267ab[_0x46fe3a(0x122)],0xc8))_0x1267ab['pipe'](_0x165442),_0x165442['on'](_0x14ded4[_0x46fe3a(0x185)],()=>{const _0x5ad3f9=_0x46fe3a;_0x165442[_0x5ad3f9(0x149)]();const _0x51a278=fs[_0x5ad3f9(0x159)](_0x16f57a),_0x41049d=_0x2d3233[_0x5ad3f9(0x12f)](_0x51a278[_0x5ad3f9(0x128)],_0x2d3233[_0x5ad3f9(0x12b)](0x400,0x400));if(_0x2d3233[_0x5ad3f9(0x16a)](_0x41049d,0x64)){this[_0x5ad3f9(0x164)][_0x5ad3f9(0x156)](util['format'](_0x2d3233['AHVvI'],_0x41049d['toFixed'](0x2))),fs[_0x5ad3f9(0x175)](_0x16f57a);return;}this[_0x5ad3f9(0x164)][_0x5ad3f9(0x156)](util[_0x5ad3f9(0x15e)](_0x2d3233[_0x5ad3f9(0x16c)],_0x16f57a)),uploadAttachmentsManager['trackFile'](_0x16f57a,_0xd81dcb);});else{this[_0x46fe3a(0x164)][_0x46fe3a(0x156)](util[_0x46fe3a(0x15e)](_0x14ded4['KnzdB'],_0x1267ab['statusCode'])),_0x165442['close'](),fs[_0x46fe3a(0x175)](_0x16f57a);return;}})['on'](_0x14ded4[_0x1729dd(0x18b)],_0x1515d9=>{const _0x183fa8=_0x1729dd;this['logger'][_0x183fa8(0x156)](util[_0x183fa8(0x15e)](_0x14ded4[_0x183fa8(0x15a)],_0x1515d9[_0x183fa8(0x133)])),_0x165442['close'](),fs[_0x183fa8(0x175)](_0x16f57a);return;});}else{if(!fs[_0x1729dd(0x172)](_0x55ad6)){this[_0x1729dd(0x164)][_0x1729dd(0x156)](util[_0x1729dd(0x15e)](_0x14ded4['FELeH'],_0x55ad6));return;}const _0x7b3891=fs[_0x1729dd(0x159)](_0x55ad6),_0x25f50a=_0x14ded4[_0x1729dd(0x132)](_0x7b3891[_0x1729dd(0x128)],_0x14ded4[_0x1729dd(0x18c)](0x400,0x400));if(_0x14ded4['mdhUf'](_0x25f50a,0x64)){this[_0x1729dd(0x164)][_0x1729dd(0x156)](util[_0x1729dd(0x15e)](_0x14ded4[_0x1729dd(0x176)],_0x25f50a[_0x1729dd(0x174)](0x2)));return;}const _0x3e38be=path[_0x1729dd(0x182)](_0x55ad6),_0x354615=path[_0x1729dd(0x131)](_0x279a27,_0x3e38be);fs[_0x1729dd(0x17e)](_0x55ad6,_0x354615),uploadAttachmentsManager['trackFile'](_0x354615,_0xd81dcb);}}static[a87_0x4622c0(0x178)](_0x21205a,_0x45d73b){const _0x504fd3=a87_0x4622c0,_0x5eaa4d={};_0x5eaa4d[_0x504fd3(0x12e)]=_0x504fd3(0x173),_0x5eaa4d[_0x504fd3(0x14e)]=_0x504fd3(0x138),_0x5eaa4d[_0x504fd3(0x123)]='Attachment\x20file\x20tracked\x20for\x20upload:\x20%s',_0x5eaa4d[_0x504fd3(0x12c)]=_0x504fd3(0x14f);const _0x2792b5=_0x5eaa4d;try{let _0x39e4e7;const _0x46bcaa=global['__workerDetails']?.[_0x504fd3(0x15b)]?.[_0x504fd3(0x12a)];if(!_0x46bcaa){const _0x4cb0e4=AutomationFramework[_0x504fd3(0x14d)]();_0x39e4e7=AutomationFramework[_0x504fd3(0x17c)](_0x4cb0e4,PlaywrightDriverModule[_0x504fd3(0x187)],'');}else _0x39e4e7=TestInfo[_0x504fd3(0x16e)](_0x46bcaa,_0x46bcaa[_0x504fd3(0x170)]);const _0x38d386=TestInfo[_0x504fd3(0x136)](_0x39e4e7),_0x35b45c=_0x38d386[TestFrameworkConstants[_0x504fd3(0x189)]]||{};_0x35b45c[_0x21205a]={[TestFrameworkConstants[_0x504fd3(0x151)]]:fs[_0x504fd3(0x159)](_0x21205a)[_0x504fd3(0x128)],[TestFrameworkConstants[_0x504fd3(0x165)]]:path[_0x504fd3(0x182)](_0x21205a),[TestFrameworkConstants['KEY_FILE_PATH']]:_0x21205a,[TestFrameworkConstants[_0x504fd3(0x13d)]]:_0x45d73b?_0x2792b5['GFWVa']:_0x2792b5[_0x504fd3(0x14e)]},_0x38d386[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]=_0x35b45c,TestInfo[_0x504fd3(0x15d)](_0x39e4e7,_0x38d386),this[_0x504fd3(0x164)]['debug'](util[_0x504fd3(0x15e)](_0x2792b5['DUcXr'],_0x21205a));}catch(_0x1f6a32){this['logger'][_0x504fd3(0x156)](util[_0x504fd3(0x15e)](_0x2792b5[_0x504fd3(0x12c)],_0x1f6a32[_0x504fd3(0x133)]));}}static[a87_0x4622c0(0x135)](){const _0x496366=a87_0x4622c0,_0x5b536b={};_0x5b536b[_0x496366(0x17a)]=_0x496366(0x139),_0x5b536b[_0x496366(0x16b)]='No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s',_0x5b536b[_0x496366(0x137)]=_0x496366(0x129);const _0x5d4cf7=_0x5b536b,_0x49f5cf=os[_0x496366(0x121)](),_0x5a8678=path[_0x496366(0x131)](_0x49f5cf,_0x5d4cf7[_0x496366(0x17a)]);if(!fs['existsSync'](_0x5a8678))return;const _0x417113=BrowserstackCLI['getInstance']()['modules'][_0x496366(0x127)]?.[_0x496366(0x141)]?.[_0x496366(0x16d)]()?.[_0x496366(0x140)],_0x4e4970=_0x417113?path[_0x496366(0x131)](_0x5a8678,_0x417113):null;if(!_0x4e4970||!fs[_0x496366(0x172)](_0x4e4970)){this[_0x496366(0x164)][_0x496366(0x156)](util[_0x496366(0x15e)](_0x5d4cf7[_0x496366(0x16b)],_0x417113));return;}const _0x382c91={};_0x382c91[_0x496366(0x12d)]=!![],_0x382c91[_0x496366(0x166)]=!![],fs[_0x496366(0x162)](_0x4e4970,_0x382c91),this[_0x496366(0x164)][_0x496366(0x156)](util[_0x496366(0x15e)](_0x5d4cf7[_0x496366(0x137)]));}}module[a87_0x4622c0(0x179)]=uploadAttachmentsManager;function a87_0x2bc9(){const _0x4e534b=['DUcXr','../../helpers/classLogger.js','qjJXk','10030SKAIfg','TestHubModule','size','Cleared\x20attachment\x20folder','testInfo','JnTGV','TiNPS','recursive','GFWVa','QySgM','File\x20downloaded\x20to:\x20%s','join','pfEVJ','message','uploadAttachmentsManager','clearAttachments','getTestDetails','XCfkf','TestLevel','.browserstack','FELeH','7828gRCDyc','2116606qqBEtA','KEY_FILE_LEVEL','createWriteStream','165nzKfrD','buildHashedId','testhubConfig','File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','https','mkdirSync','329412qzCyco','error','6448533yLcsxK','close','./TestInfo','startsWith','mdhUf','getTrackedInstance','qidAu','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','KEY_FILE_SIZE','cpZPK','get','vLSsd','./browserstackCLI','debug','util','953590BmPWPb','statSync','qonSa','currentTest','1803ZTFYWY','setTestDetails','format','./framework/automationFramework','ZTvNW','cKtPy','rmSync','RTSiX','logger','KEY_FILE_NAME','force','http://','modules','1332SEzSRB','NlrbM','FvTWa','GAtKp','toObject','getTestIdentifierFromTestInfo','BjfCx','retry','gMKpk','existsSync','BuildLevel','toFixed','unlinkSync','bDpeO','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','trackFile','exports','lflPr','xJocV','getState','Created\x20folder:\x20%s','copyFileSync','PdXxK','trim','1HOUPiI','basename','Created\x20.browserstack\x20folder\x20at:\x20%s','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','biSrJ','./framework/constants/testFrameworkConstants','KEY_TEST_ID','swGvk','KEY_TEST_ATTACHMENTS','3594AYdEhC','UMKML','qkvDr','uploadAttachments','17512CEGesg','finish','homedir','statusCode'];a87_0x2bc9=function(){return _0x4e534b;};return a87_0x2bc9();}