const a90_0x2cc258=a90_0x423d;(function(_0x153e0a,_0x2bcfd8){const _0x35bfee=a90_0x423d,_0x5732e8=_0x153e0a();while(!![]){try{const _0x3ed79e=-parseInt(_0x35bfee(0xc2))/0x1+parseInt(_0x35bfee(0xb7))/0x2+parseInt(_0x35bfee(0x92))/0x3+-parseInt(_0x35bfee(0xac))/0x4+-parseInt(_0x35bfee(0xb1))/0x5*(-parseInt(_0x35bfee(0xed))/0x6)+parseInt(_0x35bfee(0xd4))/0x7*(parseInt(_0x35bfee(0xd8))/0x8)+parseInt(_0x35bfee(0xf8))/0x9*(-parseInt(_0x35bfee(0xc0))/0xa);if(_0x3ed79e===_0x2bcfd8)break;else _0x5732e8['push'](_0x5732e8['shift']());}catch(_0x39ed9c){_0x5732e8['push'](_0x5732e8['shift']());}}}(a90_0x1f01,0xd5d1b));const path=require('path'),util=require(a90_0x2cc258(0xdc)),{getGitMetaData,isUndefined,nestedKeyValue}=require('../../../helpers/helper.js'),logger=require('../../../helpers/logger.js')[a90_0x2cc258(0x8a)],{o11yClassErrorHandler}=require(a90_0x2cc258(0xee)),TestInfo=require(a90_0x2cc258(0xae)),hooksMap={};function a90_0x1f01(){const _0x3a964c=['timestamp','passed','relative','util','value','rule','javascript','xDtQs','_gitConfigPath','duration_in_ms','find','sendHook','ZYyNe','format','CjPke','dpobr','failureData','exports','failed','scenario','600BxGVSm','../../../helpers/test-observability/error-handler.js','qVaEz','BhTKp','testCaseFinished','BEFORE_EACH','length','getHookRunEventData','cucumber','mhbOE','toISOString','2134665ydLglJ','kRdgY','UnhandledError','_gitConfigured','zPhXp','iqEPP','sbuFU','WyQxM','unknown','toLowerCase','KHhle','examples','FAILED','QSCHV','debug','split','tnwFQ','exception','configureGit','dLuYQ','createHookData','feature','VHTrs','lVhIk','jZaDw','finished_at','Exception\x20in\x20getHookRunEventData:\x20','SbWkC','skipped','bstack','failure','result','winstonLogger','PafTd','hookId','includes','otuwE','testStepFinished','getScenarioExamples','OhExb','558606zRZKCB','pickleStepId','root','sourceReference','eaKnW','ltsin','xQQye','hooks','strip-ansi','SKIPPED','browserstack-node-agent/src/bin/cucumber-js/test.setup.js','LEpso','backtrace','pending','ldFrE','failure_type','GPVoB','uuid','ydcbN','kBdge','HVEwB','map','EYZmQ','name','lSZyt','cells','3346796FUjNZB','status','../TestInfo.js','AFTER_EACH','children','65925fZgATg','PpoYC','XWFgj','getTestUUID','pOpvN','push','2464000niCaqQ','message','XmoYv','lEhVu','tags','HookRunFinished','flatMap','astNodeIds','match','50GKqCRf','every','1036441VCdRyL','tableBody','createTestFrameworkData','CHPLX','JVSwg','tagExpression','forEach','getCucumberHookType','AssertionError','test','uri','sendTestRunEventForCucumber','failureType','getHookResult','qCWFs','LNubR','toString','yhKZj','5894kqZswn','zxEss','FEMpr','nanos','11384QPQcMY'];a90_0x1f01=function(){return _0x3a964c;};return a90_0x1f01();}function a90_0x423d(_0x2cfbcc,_0xd7b40c){const _0x1f01e3=a90_0x1f01();return a90_0x423d=function(_0x423d55,_0x1685b9){_0x423d55=_0x423d55-0x72;let _0x36e59e=_0x1f01e3[_0x423d55];return _0x36e59e;},a90_0x423d(_0x2cfbcc,_0xd7b40c);}class CucumberUtils{constructor(){const _0x1e228b=a90_0x2cc258;this[_0x1e228b(0xfb)]=![],this['_gitConfigPath']=null;}async[a90_0x2cc258(0xc4)](_0x42c091,_0x5dc438,_0x49c039,_0xfafda8,_0x44a7f7,_0x4d4f2a){const _0x1970cf=a90_0x2cc258,_0x527da6={'xQQye':function(_0x4171b1,_0x51dbf4){return _0x4171b1===_0x51dbf4;},'iLzzh':_0x1970cf(0x76),'lSZyt':_0x1970cf(0xeb),'kBdge':_0x1970cf(0x9b),'HVEwB':_0x1970cf(0x86),'ltsin':function(_0x2bd734,_0x3a010d){return _0x2bd734||_0x3a010d;},'FEMpr':function(_0x1daffd,_0x42d7a8){return _0x1daffd+_0x42d7a8;},'lVhIk':function(_0x2a879d,_0x17f0f6){return _0x2a879d+_0x17f0f6;},'sbuFU':_0x1970cf(0xcb),'PpoYC':_0x1970cf(0xdf),'xDtQs':_0x1970cf(0xf5),'qCWFs':_0x1970cf(0x9f),'qVaEz':_0x1970cf(0xda),'JVSwg':function(_0x36d812,_0x3ff7a7){return _0x36d812!==_0x3ff7a7;},'CHPLX':function(_0x3c8266,_0x13eeca){return _0x3c8266/_0x13eeca;},'VHTrs':function(_0xb8b30d,_0x5af379){return _0xb8b30d===_0x5af379;},'PafTd':_0x1970cf(0x9a),'SbWkC':function(_0x1cbac5,_0x18c01a){return _0x1cbac5(_0x18c01a);},'dLuYQ':_0x1970cf(0x72),'dpobr':_0x1970cf(0xca),'iqEPP':_0x1970cf(0xfa)},{feature:_0x851047,scenario:_0x47de8b,steps:_0x32c23b,uuid:_0xc70bdf,startedAt:_0x2abb83,finishedAt:_0xd2c4f4}=_0x527da6[_0x1970cf(0x97)](_0x42c091,{}),_0x223d7a=this[_0x1970cf(0x90)](_0xfafda8,_0x5dc438);await this[_0x1970cf(0x7c)]();const _0x3d1643=_0x223d7a?_0x527da6[_0x1970cf(0xd6)](_0x527da6[_0x1970cf(0xd6)](_0x527da6[_0x1970cf(0x81)](_0x5dc438[_0x1970cf(0xa9)],'\x20('),_0x223d7a['join'](',\x20')),')'):_0x5dc438[_0x1970cf(0xa9)],_0x440309={'id':_0x44a7f7,'uuid':_0x44a7f7,'startedAt':_0x2abb83,'finishedAt':_0xd2c4f4,'type':_0x527da6[_0x1970cf(0xfe)],'body':{'lang':_0x527da6[_0x1970cf(0xb2)],'code':null},'name':_0x3d1643,'scopes':[_0x851047&&_0x851047[_0x1970cf(0xa9)]?_0x851047[_0x1970cf(0xa9)]:''],'tags':_0x5dc438[_0x1970cf(0xbb)]?_0x5dc438[_0x1970cf(0xbb)][_0x1970cf(0xa7)](({name:_0x4e2c6f})=>_0x4e2c6f):[],'file_name':_0x5dc438[_0x1970cf(0xcc)],'location':_0x5dc438[_0x1970cf(0xcc)],'vc_filepath':this[_0x1970cf(0xe1)]&&_0x5dc438[_0x1970cf(0xcc)]?path[_0x1970cf(0xdb)](this[_0x1970cf(0xe1)],_0x5dc438['uri']):null,'framework':_0x527da6[_0x1970cf(0xe0)],'result':_0x527da6[_0x1970cf(0xd0)],'meta':{'feature':_0x851047,'scenario':_0x47de8b,'steps':_0x32c23b,'examples':_0x223d7a},'customRerunParam':{'rerun_name':_0x3d1643}};if(_0x49c039[_0x1970cf(0xf1)]&&_0x32c23b){const _0x2b096f=_0x49c039[_0x1970cf(0xf1)];let _0x70b534=_0x527da6[_0x1970cf(0xef)];_0x32c23b[_0x1970cf(0xc1)](_0x3614ba=>{const _0x4d0fa3=_0x1970cf;if(_0x527da6[_0x4d0fa3(0x98)](_0x3614ba['result'],_0x527da6['iLzzh']))return _0x70b534=_0x527da6['lSZyt'],_0x2b096f[_0x4d0fa3(0x88)]=_0x3614ba[_0x4d0fa3(0x88)],_0x2b096f['failureType']=_0x3614ba[_0x4d0fa3(0xce)],![];else{if(_0x527da6[_0x4d0fa3(0x98)](_0x3614ba['result'],_0x527da6[_0x4d0fa3(0xa5)]))return _0x70b534=_0x527da6[_0x4d0fa3(0xa6)],![];}return!![];}),_0x440309['finishedAt']=new Date()[_0x1970cf(0xf7)](),_0x440309[_0x1970cf(0x89)]=_0x70b534;_0x2b096f[_0x1970cf(0xd9)]&&_0x527da6[_0x1970cf(0xc6)](_0x2b096f[_0x1970cf(0xd9)][_0x1970cf(0xd7)],undefined)?_0x440309[_0x1970cf(0xe2)]=_0x527da6[_0x1970cf(0xc5)](_0x2b096f[_0x1970cf(0xd9)][_0x1970cf(0xd7)],0xf4240):_0x440309['duration_in_ms']=undefined;if(_0x527da6[_0x1970cf(0x80)](_0x70b534,_0x527da6[_0x1970cf(0xaa)])){const {default:_0x3b2afa}=await import(_0x527da6[_0x1970cf(0x8b)]);_0x440309['failure']=[{'backtrace':[_0x2b096f[_0x1970cf(0x88)]?_0x527da6[_0x1970cf(0x85)](_0x3b2afa,_0x2b096f['failure']):_0x527da6[_0x1970cf(0x7d)]]}],_0x440309['failure_reason']=_0x2b096f[_0x1970cf(0x88)]?_0x527da6[_0x1970cf(0x85)](_0x3b2afa,_0x2b096f[_0x1970cf(0x88)]):_0x2b096f[_0x1970cf(0xb8)],_0x2b096f[_0x1970cf(0xce)]&&(_0x440309[_0x1970cf(0xa1)]=_0x2b096f['failureType'][_0x1970cf(0xbf)](/AssertError/)?_0x527da6[_0x1970cf(0xe8)]:_0x527da6[_0x1970cf(0xfd)]);}}return _0x440309;}[a90_0x2cc258(0xf4)](_0x1bb5e1,_0x5f2bf0,_0x5acaa4,_0x3ec522,_0x3efc2f,_0xf3ca63){const _0x7beb50=a90_0x2cc258,_0xfde74a={'yhKZj':function(_0x1ac5ae,_0x33edb2){return _0x1ac5ae===_0x33edb2;},'hfVDn':_0x7beb50(0xbc),'QSCHV':function(_0x505bf6,_0x3e00f3,_0xb06619){return _0x505bf6(_0x3e00f3,_0xb06619);},'jZaDw':_0x7beb50(0x95),'ZYyNe':'uri','zxEss':_0x7beb50(0x9f),'XWFgj':'hook','eaKnW':'javascript','mhbOE':_0x7beb50(0x7f),'GPVoB':'name','bxsXg':function(_0x57e863,_0x5199ea,_0xe7a52d){return _0x57e863(_0x5199ea,_0xe7a52d);},'ydcbN':'cucumber'};try{if(_0xfde74a[_0x7beb50(0xd3)](_0x5acaa4,_0xfde74a['hfVDn'])){const _0x22a0fc=new Date()[_0x7beb50(0xf7)](),_0x3e01d2=hooksMap[_0x5f2bf0];if(!_0x3e01d2)return;const _0x50b696=_0x3e01d2[_0x7beb50(0xe3)](_0x5a10d5=>_0x5a10d5[_0x7beb50(0xa3)]===_0x3ec522['id']);if(!_0x50b696)return;const _0x14a2e2=this[_0x7beb50(0xcf)](_0x1bb5e1,_0x5f2bf0);_0x50b696[_0x7beb50(0x89)]=_0x14a2e2['status'],_0x50b696[_0x7beb50(0x83)]=_0x22a0fc,_0x50b696[_0x7beb50(0xa1)]=_0x14a2e2[_0x7beb50(0xce)];const _0x45713f={};return _0x45713f[_0x7beb50(0x9e)]=_0x14a2e2[_0x7beb50(0xe9)],_0x50b696['failure_data']=[_0x45713f],_0x50b696;}const _0x165812=TestInfo[_0x7beb50(0xb4)](_0x5f2bf0),_0x492111=_0x1bb5e1['hooks'][_0x7beb50(0xe3)](_0x3c738a=>_0x3c738a['id']===_0x3ec522[_0x7beb50(0x8c)]),_0x9c084b=_0xfde74a[_0x7beb50(0x77)](nestedKeyValue,_0x492111,[_0xfde74a[_0x7beb50(0x82)],_0xfde74a[_0x7beb50(0xe5)]]),_0xc7ced0=new Date()['toISOString'](),_0x1f60a8=_0xfde74a[_0x7beb50(0xd5)],_0x486b0f=_0x492111[_0x7beb50(0xc7)]?_0x492111[_0x7beb50(0xc7)][_0x7beb50(0x79)]('\x20')['filter'](_0x3a2684=>_0x3a2684[_0x7beb50(0x8d)]('@')):[],_0x29b472={'uuid':_0x3ec522['id'],'type':_0xfde74a[_0x7beb50(0xb3)],'hook_type':_0xf3ca63,'name':_0x492111[_0x7beb50(0xa9)],'body':{'lang':_0xfde74a[_0x7beb50(0x96)],'code':null},'tags':_0x486b0f,'test_run_id':_0x165812,'scope':_0xfde74a[_0x7beb50(0x77)](nestedKeyValue,_0x3efc2f,[_0xfde74a['mhbOE'],_0xfde74a[_0x7beb50(0xa2)]]),'scopes':[_0xfde74a['bxsXg'](nestedKeyValue,_0x3efc2f,[_0xfde74a[_0x7beb50(0xf6)],_0xfde74a[_0x7beb50(0xa2)]])||''],'file_name':_0x9c084b,'location':_0x9c084b,'vc_filepath':this['_gitConfigPath']?path['relative'](this[_0x7beb50(0xe1)],_0x9c084b):null,'result':_0x1f60a8,'started_at':_0xc7ced0,'framework':_0xfde74a[_0x7beb50(0xa4)]};return _0x29b472;}catch(_0x1121d4){logger[_0x7beb50(0x78)](_0x7beb50(0x84)+util[_0x7beb50(0xe6)](_0x1121d4)+'\x20');}}async[a90_0x2cc258(0x7e)](_0x50418e,_0x21c709,_0x1a7b64,_0x3d9fbe,_0x33e894,_0x58776d){const _0x790d11=a90_0x2cc258,_0x2fa674={'WyQxM':function(_0x8929a1,_0x25fb95){return _0x8929a1===_0x25fb95;},'kRdgY':'HookRunStarted','nlvTP':function(_0xc678ad,_0x50bb12,_0xa34383){return _0xc678ad(_0x50bb12,_0xa34383);},'tnwFQ':'sourceReference','KHhle':_0x790d11(0xcc),'otuwE':_0x790d11(0x9c),'LGxrg':_0x790d11(0x87)};try{const _0x54f7ed=_0x3d9fbe[_0x790d11(0xe3)](_0xa6f68a=>_0xa6f68a['id']===_0x33e894);if(!_0x54f7ed['hookId'])return;const _0xb31cc3=this[_0x790d11(0xc9)](_0x3d9fbe,_0x54f7ed),_0x4f7918=this['getHookRunEventData'](_0x50418e,_0x21c709,_0x1a7b64,_0x54f7ed,_0x58776d,_0xb31cc3);if(!_0x4f7918)return;_0x2fa674[_0x790d11(0xff)](_0x1a7b64,_0x2fa674[_0x790d11(0xf9)])&&(hooksMap[_0x21c709]?hooksMap[_0x21c709][_0x790d11(0xb6)](_0x4f7918):hooksMap[_0x21c709]=[_0x4f7918]);const _0x43b217=_0x50418e[_0x790d11(0x99)]['find'](_0x37f422=>_0x37f422['id']===_0x54f7ed[_0x790d11(0x8c)]),_0x4c7373=_0x2fa674['nlvTP'](nestedKeyValue,_0x43b217,[_0x2fa674[_0x790d11(0x7a)],_0x2fa674[_0x790d11(0x74)]]);if(!_0x4c7373)return;else{if(_0x4c7373['includes'](_0x2fa674[_0x790d11(0x8e)]))return;}if(_0x2fa674['WyQxM'](_0x4f7918[_0x790d11(0xa9)],_0x2fa674['LGxrg']))return;return _0x4f7918;}catch(_0x3e1fdb){logger['debug']('Exception\x20in\x20createHookData:\x20'+util[_0x790d11(0xe6)](_0x3e1fdb)+'\x20');}}[a90_0x2cc258(0xcf)](_0x20fafd,_0x3f920d){const _0x2b1908=a90_0x2cc258,_0x525ab7={};_0x525ab7[_0x2b1908(0xfc)]=function(_0xdae5bd,_0xc4eae){return _0xdae5bd===_0xc4eae;},_0x525ab7['CjPke']=_0x2b1908(0xeb),_0x525ab7[_0x2b1908(0xa0)]=function(_0x105694,_0x59bdb9){return _0x105694===_0x59bdb9;},_0x525ab7[_0x2b1908(0xb9)]=_0x2b1908(0xfa),_0x525ab7[_0x2b1908(0xba)]=_0x2b1908(0xca),_0x525ab7[_0x2b1908(0x91)]=function(_0x32d228,_0x4f29b7){return _0x32d228||_0x4f29b7;};const _0x51971e=_0x525ab7,_0x32c59e=_0x20fafd[_0x2b1908(0x8f)][_0x3f920d]['testStepResult'];let _0x51383f,_0x22ed29;return _0x32c59e&&_0x51971e['zPhXp'](_0x32c59e[_0x2b1908(0xad)][_0x2b1908(0xd2)]()[_0x2b1908(0x73)](),_0x51971e[_0x2b1908(0xe7)])&&(_0x51383f=_0x51971e[_0x2b1908(0xa0)](_0x32c59e[_0x2b1908(0x7b)],undefined)?_0x32c59e[_0x2b1908(0xb8)]:_0x32c59e[_0x2b1908(0x7b)][_0x2b1908(0xb8)],_0x22ed29=_0x51971e[_0x2b1908(0xa0)](_0x32c59e['exception'],undefined)?_0x51971e[_0x2b1908(0xb9)]:_0x32c59e['message'][_0x2b1908(0xbf)](/Assert/)?_0x51971e[_0x2b1908(0xba)]:_0x51971e[_0x2b1908(0xb9)]),{'status':_0x32c59e[_0x2b1908(0xad)][_0x2b1908(0x73)](),'failureType':_0x51971e[_0x2b1908(0x91)](_0x22ed29,null),'failureData':!_0x51383f?null:[_0x51383f]};}['getCucumberHookType'](_0x1439b8,_0x12b787){const _0x4c6fd8=a90_0x2cc258,_0x76d9dd={};_0x76d9dd[_0x4c6fd8(0xb5)]=function(_0x8b46e1,_0x34fadd){return _0x8b46e1===_0x34fadd;},_0x76d9dd[_0x4c6fd8(0xd1)]=_0x4c6fd8(0xaf),_0x76d9dd['BhTKp']=_0x4c6fd8(0xf2);const _0x35579e=_0x76d9dd;let _0x170702=![];for(const _0x40c00a of _0x1439b8){_0x40c00a[_0x4c6fd8(0x93)]&&(_0x170702=!![]);if(_0x35579e[_0x4c6fd8(0xb5)](_0x12b787['id'],_0x40c00a['id']))return _0x170702?_0x35579e[_0x4c6fd8(0xd1)]:_0x35579e[_0x4c6fd8(0xf0)];}}[a90_0x2cc258(0x90)]=(_0x159b82,_0x3204ed)=>{const _0x11bdb3=a90_0x2cc258,_0x5df246={};_0x5df246[_0x11bdb3(0xa8)]=function(_0x367a19,_0x1f8193){return _0x367a19===_0x1f8193;},_0x5df246[_0x11bdb3(0x9d)]=function(_0x251571,_0x6299fb){return _0x251571>_0x6299fb;};const _0x5de5c0=_0x5df246;if(!(_0x3204ed[_0x11bdb3(0xbe)]&&_0x5de5c0[_0x11bdb3(0x9d)](_0x3204ed[_0x11bdb3(0xbe)][_0x11bdb3(0xf3)],0x1)))return;const _0x414fe5=_0x3204ed[_0x11bdb3(0xbe)][0x0],_0x200bc5=_0x3204ed['astNodeIds'][0x1],_0x19224c=_0x159b82[_0x11bdb3(0x7f)]&&_0x159b82[_0x11bdb3(0x7f)][_0x11bdb3(0xb0)]?_0x159b82[_0x11bdb3(0x7f)]['children']:undefined;let _0x59fd9e=[];_0x19224c&&_0x19224c[_0x11bdb3(0xc8)](_0x19ff71=>{const _0x1750e7=_0x11bdb3;if(_0x19ff71[_0x1750e7(0xde)])_0x19ff71['rule'][_0x1750e7(0xb0)][_0x1750e7(0xc8)](_0x12e8ef=>{const _0x411a3b=_0x1750e7;if(_0x12e8ef[_0x411a3b(0xec)]&&_0x5de5c0[_0x411a3b(0xa8)](_0x12e8ef[_0x411a3b(0xec)]['id'],_0x414fe5)&&_0x12e8ef[_0x411a3b(0xec)][_0x411a3b(0x75)]){const _0x297b30=_0x12e8ef[_0x411a3b(0xec)][_0x411a3b(0x75)][_0x411a3b(0xbd)](_0x39e897=>_0x39e897[_0x411a3b(0xc3)])[_0x411a3b(0xe3)](_0x53d850=>_0x53d850['id']===_0x200bc5);let _0x3b3b82;_0x297b30&&_0x297b30[_0x411a3b(0xab)]?_0x3b3b82=_0x297b30[_0x411a3b(0xab)][_0x411a3b(0xa7)](_0x5a54b1=>_0x5a54b1[_0x411a3b(0xdd)]):_0x3b3b82=[],_0x3b3b82&&(_0x59fd9e=_0x3b3b82);}});else{if(_0x19ff71[_0x1750e7(0xec)]&&_0x5de5c0[_0x1750e7(0xa8)](_0x19ff71[_0x1750e7(0xec)]['id'],_0x414fe5)&&_0x19ff71[_0x1750e7(0xec)][_0x1750e7(0x75)]){const _0x488379=_0x19ff71[_0x1750e7(0xec)][_0x1750e7(0x75)][_0x1750e7(0xbd)](_0x14681a=>_0x14681a[_0x1750e7(0xc3)])[_0x1750e7(0xe3)](_0x13942b=>_0x13942b['id']===_0x200bc5);let _0x20951a;_0x488379&&_0x488379[_0x1750e7(0xab)]?_0x20951a=_0x488379[_0x1750e7(0xab)]['map'](_0x20edd3=>_0x20edd3[_0x1750e7(0xdd)]):_0x20951a=[],_0x20951a&&(_0x59fd9e=_0x20951a);}}});if(_0x59fd9e[_0x11bdb3(0xf3)])return _0x59fd9e;return;};async[a90_0x2cc258(0x7c)](){const _0x5a526a=a90_0x2cc258,_0x4eb443={'PkBwK':function(_0x478496){return _0x478496();}};if(this['_gitConfigured'])return this['_gitConfigPath'];const _0x2a7d77=await _0x4eb443['PkBwK'](getGitMetaData);_0x2a7d77&&(this['_gitConfigPath']=_0x2a7d77[_0x5a526a(0x94)]),this[_0x5a526a(0xfb)]=!![];}}module[a90_0x2cc258(0xea)]=o11yClassErrorHandler(CucumberUtils,[a90_0x2cc258(0x7c),a90_0x2cc258(0x90),a90_0x2cc258(0xc9),a90_0x2cc258(0xcf),a90_0x2cc258(0xe4),a90_0x2cc258(0xf4),a90_0x2cc258(0xcd),'createTestFrameworkData']);