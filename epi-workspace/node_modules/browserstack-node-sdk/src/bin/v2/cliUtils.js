const a64_0x41d861=a64_0x5886;(function(_0x555d5f,_0x337020){const _0x288c6e=a64_0x5886,_0x1ba1d8=_0x555d5f();while(!![]){try{const _0x4fc0db=-parseInt(_0x288c6e(0x202))/0x1*(parseInt(_0x288c6e(0x19f))/0x2)+parseInt(_0x288c6e(0x209))/0x3+-parseInt(_0x288c6e(0x1f3))/0x4*(-parseInt(_0x288c6e(0x16a))/0x5)+-parseInt(_0x288c6e(0x188))/0x6+-parseInt(_0x288c6e(0x1ff))/0x7*(parseInt(_0x288c6e(0x1e0))/0x8)+-parseInt(_0x288c6e(0x221))/0x9*(-parseInt(_0x288c6e(0x1bb))/0xa)+parseInt(_0x288c6e(0x171))/0xb;if(_0x4fc0db===_0x337020)break;else _0x1ba1d8['push'](_0x1ba1d8['shift']());}catch(_0x5ee113){_0x1ba1d8['push'](_0x1ba1d8['shift']());}}}(a64_0x4556,0xdd8e0));const fs=require('fs'),os=require('os'),url=require('url'),path=require(a64_0x41d861(0x1f5)),{exec}=require(a64_0x41d861(0x1a0)),{https}=require(a64_0x41d861(0x204)),yauzl=require(a64_0x41d861(0x22d)),util=require(a64_0x41d861(0x167)),{getFrameworkVersion}=require(a64_0x41d861(0x1c9)),{threadId}=require(a64_0x41d861(0x194)),PerformanceTester=require(a64_0x41d861(0x1e8)),{EVENTS:PerformanceEvents}=require('../../helpers/performance/constants'),{isNullOrEmpty,isModifiable,setReadWriteExecuteAccess}=require(a64_0x41d861(0x172)),{isTrue,createDir,getHostInfo,nodeRequest,nestedKeyValue}=require(a64_0x41d861(0x1c4)),{UPDATED_CLI_ENDPOINT,BINARY_BUSY_ERROR_CODES}=require(a64_0x41d861(0x166)),{createClassLogger}=require(a64_0x41d861(0x170)),TestFrameworkInstance=require(a64_0x41d861(0x1e6)),HookState=require('./state/hookState.js'),TestFrameworkState=require(a64_0x41d861(0x195)),AutomationFrameworkState=require('./state/automationFrameworkState.js'),TestFrameworkConstants=require('./framework/constants/testFrameworkConstants.js'),logger=createClassLogger(a64_0x41d861(0x1b8)),{getBStackAPIUrl}=require(a64_0x41d861(0x1e7));function a64_0x5886(_0x5441a7,_0x37f93d){const _0x4556b2=a64_0x4556();return a64_0x5886=function(_0x588628,_0x1a7c26){_0x588628=_0x588628-0x165;let _0xe22014=_0x4556b2[_0x588628];return _0xe22014;},a64_0x5886(_0x5441a7,_0x37f93d);}function a64_0x4556(){const _0x18f023=['start','BROWSERSTACK_CLI_ENV','checkAndUpdateCli','.sock','unix:/tmp/sdk-platform-','rUohX','isArray','YCkaw','Configuring\x20Cli\x20path.','url','matchHookRegex','readdirSync','createWriteStream','bKvbs','243XyQZXF','ziZQW','Error\x20while\x20reading\x20CLI\x20path:\x20','getCLIParamsForDevEnv','ywoOZ','exports','CguAT','stringify','MubPt','Folder\x20','binary-','Resolving\x20with\x20stdout:\x20\x22','yauzl','getSdkLanguage','cmnAX','../utils/constants','util','code','includes','33335nOPoJD','requestToUpdateCLI','join','CFtRj','csYxD','xMfVS','../../helpers/classLogger.js','22525426PFVaan','../../helpers/utilities','rMTEE','getSdkVersion','Downloading\x20SDK\x20binary\x20from:\x20','PCGyg','length','Failed\x20to\x20download\x20binary,\x20Exception:\x20','gSQmf','Need\x20to\x20update\x20binary,\x20current\x20binary\x20version:\x20','env','shouldSkipSessionName','OSCSx','\x20already\x20exists','Folder\x20does\x20not\x20exist:\x20','cli','Unable\x20to\x20set\x20required\x20permissions\x20to\x20','Development\x20Cli\x20Path:\x20','unlink','auErk','error','warn','Aswgb','8358078VJzVjY','Error\x20checking\x20if\x20binary\x20is\x20busy:\x20','ITSbz','filter','openReadStream','getExistingCliPath','ocmBw','entry','entries','cli_version','Failed\x20to\x20delete\x20zip\x20file:\x20','jIhon','worker_threads','./state/testFrameworkState.js','GPFYl','tOfAv','timeout','SDK_CLI_CHECK_UPDATE','BROWSERSTACK_TEST_FRAMEWORK_DETAIL','ZqvSD','debug','basename','end','449550AnOpRO','child_process','openSync','YErSw','automationFrameworkDetail','Test\x20or\x20Automation\x20framework\x20not\x20provided\x20testFramework=','SIAuv','Got\x20Error\x20in\x20percy\x20binary\x20downloading\x20request\x20','No\x20writable\x20directory\x20available\x20for\x20the\x20CLI','jHQnd','NtwKo','statSync','LXRRX','trim','BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL','HzAzf','getWritableDir','object','CysRe','oqJcz','wUPhx','chmod','data','obZyn','test','CLIUtils','isBinaryBusy','SDK_CLI_DOWNLOAD','394710KiWaAf','testFrameworkDetail','Binary\x20file\x20became\x20busy\x20during\x20write,\x20continuing\x20with\x20existing\x20binary:\x20','runShellCommand','.browserstack','GVAwF','isDirectory','node','existsSync','../../helpers/helper','arch','TBRwL','wqngt','mergeObject','../../helpers/test-observability/utils.js','info','yvhQq','getAutomationFrameworkDetail','isFile','readEntry','pipe','HxKBQ','parse','LmMJF','getCliDir','mIzVe','zERxe','jNkiv','ELWFX','BROWSERSTACK_BINARY_URL','split','mHVFO','downloadLatestBinary','lazyEntries','closeSync','Error\x20in\x20setting\x20up\x20cli\x20path\x20directory,\x20Exception:\x20','BROWSERSTACK_FILES_DIR','12453464nAvQNn','uUbPe','skipSessionStatus','gAdXq','map','open','./instances/testFrameworkInstance.js','../utils/apiUtilityMethods.js','../../helpers/performance/performance-tester.js','GET','FehYB','close','format','message','RDsZf','tewIj','setupCliPath','CLI\x20version\x20found\x20despite\x20error:\x20\x22','Using\x20BROWSERSTACK_BINARY_URL\x20from\x20env\x20variable:\x20','892TnwVpb','HuPxH','path','Setting\x20required\x20permissions\x20to\x20','getCurrentInstanceName','yipkJ','SDK_CLI_BIN_PATH','mtime','pid','JyLWo','OPMfK','startsWith','7yusxUV','SXPxd','wPcQs','6tZYvRY','fileName','follow-redirects','kcLiO','listen','downloadFileStream','isDevelopmentEnv','1816830XuMaFh','Existing\x20binary\x20is\x20currently\x20in\x20use,\x20skipping\x20update\x20and\x20continuing\x20with\x20current\x20version:\x20','testContextOptions','SHELL_EXECUTE_ERROR','get','version','AEtUh','shouldSkipSessionStatus','tmpdir','bqdhq'];a64_0x4556=function(){return _0x18f023;};return a64_0x4556();}class CLIUtils{[a64_0x41d861(0x1a3)]={};[a64_0x41d861(0x1bc)]={};static[a64_0x41d861(0x208)](){const _0x56f01b=a64_0x41d861,_0x354940={};_0x354940[_0x56f01b(0x1e3)]=function(_0x37f164,_0x1ae8a7){return _0x37f164===_0x1ae8a7;},_0x354940['nvLRW']='development';const _0x2cb12c=_0x354940;return _0x2cb12c[_0x56f01b(0x1e3)](process[_0x56f01b(0x17b)][_0x56f01b(0x214)],_0x2cb12c['nvLRW']);}static[a64_0x41d861(0x224)](){const _0xb45cda=a64_0x41d861,_0x44d2eb={};return _0x44d2eb['id']=process[_0xb45cda(0x17b)]['BROWSERSTACK_CLI_ENV'],_0x44d2eb[_0xb45cda(0x206)]=_0xb45cda(0x217)+process[_0xb45cda(0x17b)]['BROWSERSTACK_CLI_ENV']+_0xb45cda(0x216),_0x44d2eb;}static[a64_0x41d861(0x174)](){const _0x469c32=a64_0x41d861,_0x190aa7={'YErSw':function(_0x3c2091,_0x2d4065){return _0x3c2091(_0x2d4065);},'ynEdw':'../../../package.json'};return _0x190aa7[_0x469c32(0x1a2)](require,_0x190aa7['ynEdw'])[_0x469c32(0x20e)];}static[a64_0x41d861(0x22e)](){const _0x7b565f=a64_0x41d861,_0x3fdc77={};_0x3fdc77[_0x7b565f(0x21a)]=_0x7b565f(0x1c2);const _0x4ef89d=_0x3fdc77;return _0x4ef89d[_0x7b565f(0x21a)];}static async[a64_0x41d861(0x1f0)](_0x3b1046){const _0x2e18ad=a64_0x41d861,_0x6011cf={'wqngt':_0x2e18ad(0x21b),'HzAzf':function(_0xd59389,_0x2f22fb){return _0xd59389(_0x2f22fb);},'uUbPe':function(_0x43a97d,_0x5b01dc){return _0x43a97d(_0x5b01dc);},'qbRxU':_0x2e18ad(0x1a7)};logger[_0x2e18ad(0x19c)](_0x6011cf[_0x2e18ad(0x1c7)]);const _0x5bd7dc=process['env'][_0x2e18ad(0x1f9)];if(!_0x6011cf[_0x2e18ad(0x1ae)](isNullOrEmpty,_0x5bd7dc))return logger['debug'](_0x2e18ad(0x182)+_0x5bd7dc),_0x5bd7dc;try{const _0x13c941=this[_0x2e18ad(0x1d3)]();if(_0x6011cf[_0x2e18ad(0x1e1)](isNullOrEmpty,_0x13c941))throw new Error(_0x6011cf['qbRxU']);const _0x1e60ad=this[_0x2e18ad(0x18d)](_0x13c941),_0xf23364=await this[_0x2e18ad(0x215)](_0x1e60ad,_0x13c941,_0x3b1046);return logger[_0x2e18ad(0x19c)]('Resolved\x20binary\x20path:\x20'+_0xf23364),_0xf23364;}catch(_0x55e68e){logger[_0x2e18ad(0x19c)](_0x2e18ad(0x1de)+util[_0x2e18ad(0x1ec)](_0x55e68e));}return null;}static async['checkAndUpdateCli'](_0x1e1069,_0x5d96ce,_0x1f1eaf){const _0x21e0e5=a64_0x41d861,_0x1e33c4={'ziZQW':function(_0x414420){return _0x414420();},'oqJcz':function(_0x4df6ce,_0x42ba5d){return _0x4df6ce(_0x42ba5d);},'Krhse':function(_0x34ed2a,_0x2a02cf,_0x34d0b9){return _0x34ed2a(_0x2a02cf,_0x34d0b9);},'NtwKo':'data','SXPxd':_0x21e0e5(0x21c),'ocmBw':function(_0x46989c,_0x4fac28){return _0x46989c(_0x4fac28);},'WCYAR':function(_0x41e5a7,_0x60e50b,_0x416cef){return _0x41e5a7(_0x60e50b,_0x416cef);}};PerformanceTester[_0x21e0e5(0x213)](PerformanceEvents[_0x21e0e5(0x199)]),logger[_0x21e0e5(0x1ca)]('Current\x20CLI\x20Path\x20Found:\x20'+_0x1e1069);const _0x48c780=_0x1e33c4[_0x21e0e5(0x222)](getHostInfo),_0x1cfddd={'sdk_version':CLIUtils[_0x21e0e5(0x174)](),'os':_0x48c780['platform'],'os_arch':_0x48c780[_0x21e0e5(0x1c5)],'cli_version':'0','sdk_language':this[_0x21e0e5(0x22e)]()};!_0x1e33c4[_0x21e0e5(0x1b2)](isNullOrEmpty,_0x1e1069)&&(_0x1cfddd['cli_version']=await this[_0x21e0e5(0x1be)](_0x1e1069+'\x20version'));const _0x34a3fa=await this[_0x21e0e5(0x16b)](_0x1cfddd,_0x1f1eaf);process[_0x21e0e5(0x17b)][_0x21e0e5(0x1d8)]&&(logger[_0x21e0e5(0x1ca)](_0x21e0e5(0x1f2)+process['env'][_0x21e0e5(0x1d8)]),_0x34a3fa[_0x21e0e5(0x1b5)][_0x21e0e5(0x21c)]=process[_0x21e0e5(0x17b)][_0x21e0e5(0x1d8)]);if(_0x1e33c4['Krhse'](nestedKeyValue,_0x34a3fa,[_0x1e33c4[_0x21e0e5(0x1a9)],_0x1e33c4[_0x21e0e5(0x200)]])){logger[_0x21e0e5(0x19c)](_0x21e0e5(0x17a)+_0x1cfddd[_0x21e0e5(0x191)]);if(!_0x1e33c4[_0x21e0e5(0x18e)](isNullOrEmpty,_0x1e1069)&&this[_0x21e0e5(0x1b9)](_0x1e1069))return logger[_0x21e0e5(0x186)](_0x21e0e5(0x20a)+_0x1e1069),PerformanceTester[_0x21e0e5(0x19e)](PerformanceEvents['SDK_CLI_CHECK_UPDATE']),_0x1e1069;const _0x9a4c4=await this[_0x21e0e5(0x1db)](_0x1e33c4['WCYAR'](nestedKeyValue,_0x34a3fa,[_0x1e33c4[_0x21e0e5(0x1a9)],_0x1e33c4[_0x21e0e5(0x200)]]),_0x5d96ce);return PerformanceTester[_0x21e0e5(0x19e)](PerformanceEvents[_0x21e0e5(0x199)]),_0x9a4c4;}return PerformanceTester[_0x21e0e5(0x19e)](PerformanceEvents[_0x21e0e5(0x199)]),_0x1e1069;}static[a64_0x41d861(0x1d3)](){const _0xfba943=a64_0x41d861,_0x3334d8={'RDsZf':function(_0x49809c,_0xc2bb4e){return _0x49809c(_0xc2bb4e);},'AEtUh':'No\x20writable\x20directory\x20available\x20for\x20the\x20CLI','mIzVe':_0xfba943(0x180),'obZyn':function(_0x18dcf0,_0x22af8a){return _0x18dcf0(_0x22af8a);}},_0x44e736=this[_0xfba943(0x1af)]();try{if(_0x3334d8[_0xfba943(0x1ee)](isNullOrEmpty,_0x44e736))throw new Error(_0x3334d8[_0xfba943(0x20f)]);const _0x13f4e1=path['join'](_0x44e736,_0x3334d8[_0xfba943(0x1d4)]);return!fs[_0xfba943(0x1c3)](_0x13f4e1)&&_0x3334d8[_0xfba943(0x1b6)](createDir,_0x13f4e1),_0x13f4e1;}catch(_0x5d0e7d){logger[_0xfba943(0x19c)]('Error\x20in\x20getting\x20writable\x20directory,\x20writableDir='+util[_0xfba943(0x1ec)](_0x5d0e7d));}}static[a64_0x41d861(0x1af)](){const _0x1b9789=a64_0x41d861,_0x201c06={'xMfVS':_0x1b9789(0x1bf),'OPMfK':function(_0x24cdd4,_0x15803e){return _0x24cdd4(_0x15803e);},'yipkJ':function(_0x12657b,_0x3558d3){return _0x12657b(_0x3558d3);},'JyLWo':function(_0x22b2d4,_0x4b63f6){return _0x22b2d4(_0x4b63f6);},'ZqvSD':function(_0x2a446f,_0x28b39c){return _0x2a446f(_0x28b39c);}},_0x58793b=[process[_0x1b9789(0x17b)][_0x1b9789(0x1df)],path[_0x1b9789(0x16c)](os['homedir'](),_0x201c06[_0x1b9789(0x16f)]),path[_0x1b9789(0x16c)](os[_0x1b9789(0x211)](),_0x201c06['xMfVS'])];for(const _0x5e9e85 of _0x58793b){if(_0x201c06[_0x1b9789(0x1fd)](isNullOrEmpty,_0x5e9e85))continue;try{if(fs['existsSync'](_0x5e9e85)){logger[_0x1b9789(0x19c)](_0x1b9789(0x22a)+_0x5e9e85+_0x1b9789(0x17e));if(!_0x201c06['OPMfK'](isModifiable,_0x5e9e85)){logger[_0x1b9789(0x19c)]('Setting\x20required\x20permissions\x20to\x20'+_0x5e9e85);const _0x4680dd=_0x201c06[_0x1b9789(0x1f8)](setReadWriteExecuteAccess,_0x5e9e85);if(!_0x201c06[_0x1b9789(0x1fc)](isTrue,_0x4680dd)){logger[_0x1b9789(0x186)](_0x1b9789(0x181)+_0x5e9e85);continue;}}}else{logger[_0x1b9789(0x19c)](_0x1b9789(0x17f)+_0x5e9e85),_0x201c06['OPMfK'](createDir,_0x5e9e85),logger[_0x1b9789(0x19c)](_0x1b9789(0x1f6)+_0x5e9e85);const _0x5bb82a=_0x201c06[_0x1b9789(0x1fd)](setReadWriteExecuteAccess,_0x5e9e85);!_0x201c06[_0x1b9789(0x19b)](isTrue,_0x5bb82a)&&logger[_0x1b9789(0x186)]('Unable\x20to\x20set\x20required\x20permissions\x20to\x20'+_0x5e9e85);}return _0x5e9e85;}catch(_0x1de28f){logger['error']('Unable\x20to\x20get\x20writable\x20directory,\x20exception\x20'+util[_0x1b9789(0x1ec)](_0x1de28f));}}return null;}static['getExistingCliPath'](_0x48694c){const _0x4b9ce7=a64_0x41d861,_0x5d2232={};_0x5d2232['auErk']=function(_0x5ef086,_0x2e3bda){return _0x5ef086>_0x2e3bda;};const _0x3bec7c=_0x5d2232;try{if(!fs[_0x4b9ce7(0x1c3)](_0x48694c)||!fs[_0x4b9ce7(0x1aa)](_0x48694c)[_0x4b9ce7(0x1c1)]())return'';const _0x395f4a=fs[_0x4b9ce7(0x21e)](_0x48694c)['map'](_0xc3393f=>path['join'](_0x48694c,_0xc3393f))[_0x4b9ce7(0x18b)](_0x535ae4=>fs[_0x4b9ce7(0x1aa)](_0x535ae4)[_0x4b9ce7(0x1cd)]()&&path[_0x4b9ce7(0x19d)](_0x535ae4)[_0x4b9ce7(0x1fe)](_0x4b9ce7(0x22b)));if(_0x3bec7c[_0x4b9ce7(0x184)](_0x395f4a[_0x4b9ce7(0x177)],0x0)){const _0x12212c=_0x395f4a[_0x4b9ce7(0x1e4)](_0x44433a=>({'filePath':_0x44433a,'mtime':fs[_0x4b9ce7(0x1aa)](_0x44433a)['mtime']}))['reduce']((_0x3edf83,_0x4c0d58)=>{const _0x23c7e3=_0x4b9ce7;if(!_0x3edf83||!_0x3edf83[_0x23c7e3(0x1fa)])return _0x4c0d58;if(_0x3bec7c[_0x23c7e3(0x184)](_0x4c0d58['mtime'],_0x3edf83[_0x23c7e3(0x1fa)]))return _0x4c0d58;return _0x3edf83;},{});return _0x12212c?_0x12212c['filePath']:'';}return'';}catch(_0x2a3792){return logger['error'](_0x4b9ce7(0x223)+util['format'](_0x2a3792)),'';}}static [a64_0x41d861(0x16b)]=async(_0x3028f1,_0x408765)=>{const _0x536e9c=a64_0x41d861,_0x571994={'uIjoL':function(_0x4b352e,_0x535a49,_0x176bfd,_0x335efe,_0x16b6f5){return _0x4b352e(_0x535a49,_0x176bfd,_0x335efe,_0x16b6f5);},'CFtRj':_0x536e9c(0x1e9)},_0x3925d3={};_0x3925d3['qs']=_0x3028f1;const _0x201fa0=await _0x571994['uIjoL'](nodeRequest,_0x571994[_0x536e9c(0x16d)],UPDATED_CLI_ENDPOINT,_0x3925d3,_0x408765);return logger['debug']('response\x20'+JSON[_0x536e9c(0x228)](_0x201fa0)),_0x201fa0;};static[a64_0x41d861(0x1b9)](_0x493f25){const _0x14fe9=a64_0x41d861;try{const _0x386556=fs[_0x14fe9(0x1a1)](_0x493f25,'r+');return fs[_0x14fe9(0x1dd)](_0x386556),![];}catch(_0x116aa0){if(BINARY_BUSY_ERROR_CODES[_0x14fe9(0x169)](_0x116aa0['code']))return logger[_0x14fe9(0x19c)]('Binary\x20is\x20busy:\x20'+_0x493f25),!![];return logger[_0x14fe9(0x19c)](_0x14fe9(0x189)+_0x116aa0[_0x14fe9(0x1ed)]),![];}}static[a64_0x41d861(0x1be)](_0x38af06,_0x370718=''){const _0x5b8397=a64_0x41d861,_0x461a5c={'kcLiO':_0x5b8397(0x20e),'cmnAX':function(_0x272bd6,_0x3535ca){return _0x272bd6(_0x3535ca);},'jIhon':_0x5b8397(0x20c),'VvaBR':function(_0xb815fa,_0x46e0be){return _0xb815fa(_0x46e0be);},'LmMJF':function(_0x30b050,_0x65a0fa,_0x48e4e9,_0x57c1ca){return _0x30b050(_0x65a0fa,_0x48e4e9,_0x57c1ca);},'MqsDO':_0x5b8397(0x185)};return new Promise((_0x5d3e4b,_0x1871f6)=>{const _0x10060b=_0x5b8397,_0x25b37f={'tewIj':function(_0x5f1471,_0x5d10f1){return _0x461a5c['VvaBR'](_0x5f1471,_0x5d10f1);},'CysRe':_0x461a5c['jIhon']},_0x22bc05={};_0x22bc05['cwd']=_0x370718,_0x22bc05[_0x10060b(0x198)]=0x1388;const _0x433655=_0x461a5c[_0x10060b(0x1d2)](exec,_0x38af06,_0x22bc05,(_0x5e8928,_0x2c92cf,_0x3b7160)=>{const _0x3ec95f=_0x10060b;if(_0x5e8928){if(_0x38af06[_0x3ec95f(0x169)](_0x461a5c[_0x3ec95f(0x205)])&&(_0x2c92cf['trim']()||_0x3b7160[_0x3ec95f(0x1ac)]())){const _0x4be64c=_0x2c92cf[_0x3ec95f(0x1ac)]()||_0x3b7160[_0x3ec95f(0x1ac)]();logger[_0x3ec95f(0x19c)](_0x3ec95f(0x1f1)+_0x4be64c+'\x22'),_0x461a5c[_0x3ec95f(0x165)](_0x5d3e4b,_0x4be64c);}else _0x461a5c['cmnAX'](_0x5d3e4b,_0x3b7160['trim']()||_0x461a5c[_0x3ec95f(0x193)]);}else logger[_0x3ec95f(0x19c)](_0x3ec95f(0x22c)+_0x2c92cf[_0x3ec95f(0x1ac)]()+'\x22'),_0x461a5c['cmnAX'](_0x5d3e4b,_0x2c92cf['trim']());});_0x433655['on'](_0x461a5c['MqsDO'],()=>{const _0x1bd185=_0x10060b;_0x25b37f[_0x1bd185(0x1ef)](_0x5d3e4b,_0x25b37f[_0x1bd185(0x1b1)]);});});}static [a64_0x41d861(0x1db)]=async(_0x2a78c8,_0x501f5e)=>{const _0x37e0ba=a64_0x41d861,_0x5098f2={'HxKBQ':'Got\x20Error\x20while\x20downloading\x20percy\x20binary\x20file\x20%s','SIAuv':function(_0x5604e0,_0x1af820){return _0x5604e0(_0x1af820);},'bqdhq':'Got\x20Error\x20in\x20percy\x20binary\x20download\x20response\x20%s','csYxD':'error','CguAT':'downloaded_file.zip'};PerformanceTester[_0x37e0ba(0x213)](PerformanceEvents[_0x37e0ba(0x1ba)]),logger[_0x37e0ba(0x19c)](_0x37e0ba(0x175)+_0x2a78c8);try{const _0x2ce08a=url['parse'](_0x2a78c8),_0x126034=path[_0x37e0ba(0x16c)](_0x501f5e,_0x5098f2[_0x37e0ba(0x227)]),_0x16e22e=fs[_0x37e0ba(0x21f)](_0x126034);return new Promise((_0x5282cb,_0x1a2f20)=>{const _0x592113=_0x37e0ba,_0x756bec={'zERxe':_0x5098f2[_0x592113(0x1d0)],'wPcQs':function(_0x48c215,_0x3082cc){const _0x2a58fe=_0x592113;return _0x5098f2[_0x2a58fe(0x1a5)](_0x48c215,_0x3082cc);},'skumm':_0x5098f2[_0x592113(0x212)],'Aswgb':_0x5098f2[_0x592113(0x16e)]};https[_0x592113(0x20d)](_0x2ce08a,function(_0x5ecacb){const _0x2e32a8=_0x592113,_0x4e9c24={'sRYAV':_0x756bec['skumm'],'tOfAv':function(_0x59a461,_0x21aa72){return _0x756bec['wPcQs'](_0x59a461,_0x21aa72);}},_0x1dc6fe=null;_0x5ecacb[_0x2e32a8(0x1cf)](_0x16e22e),_0x5ecacb['on'](_0x756bec[_0x2e32a8(0x187)],function(_0x22f901){const _0x192de8=_0x2e32a8;logger['error'](util[_0x192de8(0x1ec)](_0x4e9c24['sRYAV'],_0x22f901)),PerformanceTester[_0x192de8(0x19e)](PerformanceEvents['SDK_CLI_DOWNLOAD'],![],util['format'](_0x22f901)),_0x4e9c24[_0x192de8(0x197)](_0x1a2f20,_0x22f901);}),_0x16e22e['on'](_0x756bec[_0x2e32a8(0x187)],function(_0x5c6001){const _0x31d662=_0x2e32a8;logger[_0x31d662(0x185)](util['format'](_0x756bec[_0x31d662(0x1d5)],_0x5c6001)),PerformanceTester[_0x31d662(0x19e)](PerformanceEvents[_0x31d662(0x1ba)],![],util[_0x31d662(0x1ec)](_0x5c6001)),_0x756bec[_0x31d662(0x201)](_0x1a2f20,_0x5c6001);}),CLIUtils['downloadFileStream'](_0x16e22e,_0x1dc6fe,_0x126034,_0x501f5e,_0x5282cb,_0x1a2f20),PerformanceTester['end'](PerformanceEvents[_0x2e32a8(0x1ba)]);})['on'](_0x5098f2[_0x592113(0x16e)],function(_0xa9faa1){const _0x2d0ea5=_0x592113;logger[_0x2d0ea5(0x185)](_0x2d0ea5(0x1a6)+util[_0x2d0ea5(0x1ec)](_0xa9faa1)),PerformanceTester[_0x2d0ea5(0x19e)](PerformanceEvents[_0x2d0ea5(0x1ba)],![],util[_0x2d0ea5(0x1ec)](_0xa9faa1)),_0x756bec[_0x2d0ea5(0x201)](_0x1a2f20,_0xa9faa1);});});}catch(_0x2c7b02){PerformanceTester[_0x37e0ba(0x19e)](PerformanceEvents[_0x37e0ba(0x1ba)],![],util[_0x37e0ba(0x1ec)](_0x2c7b02)),logger[_0x37e0ba(0x19c)](_0x37e0ba(0x178)+util[_0x37e0ba(0x1ec)](_0x2c7b02));}};static[a64_0x41d861(0x207)](_0xd3ad96,_0x2a0689,_0x2f7543,_0x27ca3e,_0x8bfe42,_0x14bbea){const _0x4ca68d=a64_0x41d861,_0x5bdbca={'FehYB':function(_0x18b105,_0x4fb0c3){return _0x18b105(_0x4fb0c3);},'HuPxH':_0x4ca68d(0x19e),'mHVFO':'0755','ELWFX':function(_0x1590e3,_0x1fca38){return _0x1590e3(_0x1fca38);},'PCGyg':_0x4ca68d(0x18f),'ywoOZ':_0x4ca68d(0x185),'rUohX':function(_0x460d76,_0x1a82f0){return _0x460d76(_0x1a82f0);},'bKvbs':function(_0x22b45f,_0x40124f){return _0x22b45f===_0x40124f;},'gSQmf':'close'};_0xd3ad96['on'](_0x5bdbca[_0x4ca68d(0x179)],function(){const _0x21e7db=_0x4ca68d,_0x5b1ba0={'LXRRX':function(_0x4815ec,_0x4baf4c){const _0x433a02=a64_0x5886;return _0x5bdbca[_0x433a02(0x218)](_0x4815ec,_0x4baf4c);},'wUPhx':_0x5bdbca[_0x21e7db(0x225)],'OSCSx':function(_0x249d8a,_0x43c14a){const _0x15353f=_0x21e7db;return _0x5bdbca[_0x15353f(0x220)](_0x249d8a,_0x43c14a);}},_0x383f38={};_0x383f38[_0x21e7db(0x1dc)]=!![],yauzl[_0x21e7db(0x1e5)](_0x2f7543,_0x383f38,function(_0x4cb2d8,_0x2fa272){const _0x123e52=_0x21e7db,_0x302096={'jNkiv':function(_0x39a65a,_0x54a6c1){const _0xe429e1=a64_0x5886;return _0x5bdbca[_0xe429e1(0x1ea)](_0x39a65a,_0x54a6c1);},'yvhQq':_0x5bdbca[_0x123e52(0x1f4)],'GVAwF':function(_0xdcef73,_0xea2b24){const _0x7b8a31=_0x123e52;return _0x5bdbca[_0x7b8a31(0x1ea)](_0xdcef73,_0xea2b24);},'yzUXz':_0x5bdbca[_0x123e52(0x1da)]};_0x4cb2d8&&_0x5bdbca[_0x123e52(0x1d7)](_0x14bbea,_0x4cb2d8),_0x2fa272[_0x123e52(0x1ce)](),_0x2fa272['on'](_0x5bdbca[_0x123e52(0x176)],_0x3101be=>{const _0x220235=_0x123e52,_0x1a9217={'jHQnd':function(_0x29c209,_0x288789){return _0x5b1ba0['LXRRX'](_0x29c209,_0x288789);}};!_0x2a0689&&(_0x2a0689=_0x3101be['fileName']);if(/\/$/[_0x220235(0x1b7)](_0x3101be['fileName']))_0x2fa272[_0x220235(0x1ce)]();else{const _0x2d1c05=_0x3101be[_0x220235(0x203)],_0x451712=path[_0x220235(0x16c)](_0x27ca3e,_0x2d1c05);let _0x4384cc;try{_0x4384cc=fs[_0x220235(0x21f)](_0x451712);}catch(_0x5e71f6){if(BINARY_BUSY_ERROR_CODES[_0x220235(0x169)](_0x5e71f6['code'])){logger[_0x220235(0x186)]('Binary\x20file\x20is\x20currently\x20in\x20use,\x20skipping\x20download\x20and\x20continuing\x20with\x20existing\x20binary:\x20'+_0x2d1c05),fs[_0x220235(0x183)](_0x2f7543,_0x430249=>{const _0x40a199=_0x220235;_0x430249&&logger[_0x40a199(0x186)](_0x40a199(0x192)+_0x2f7543);}),_0x5b1ba0[_0x220235(0x1ab)](_0x8bfe42,_0x451712);return;}_0x5b1ba0[_0x220235(0x1ab)](_0x14bbea,_0x5e71f6);return;}_0x4384cc['on'](_0x5b1ba0[_0x220235(0x1b3)],_0xab9472=>{const _0x1a6418=_0x220235;BINARY_BUSY_ERROR_CODES[_0x1a6418(0x169)](_0xab9472[_0x1a6418(0x168)])?(logger['warn'](_0x1a6418(0x1bd)+_0xab9472['message']),_0x4384cc[_0x1a6418(0x1eb)](),fs[_0x1a6418(0x183)](_0x2f7543,_0x56bd26=>{const _0x21b91b=_0x1a6418;_0x56bd26&&logger[_0x21b91b(0x186)](_0x21b91b(0x192)+_0x2f7543);}),_0x1a9217[_0x1a6418(0x1a8)](_0x8bfe42,_0x451712)):_0x1a9217[_0x1a6418(0x1a8)](_0x14bbea,_0xab9472);}),_0x2fa272[_0x220235(0x18c)](_0x3101be,function(_0x579af1,_0x1aaf3f){const _0x57cee1=_0x220235;_0x579af1&&_0x302096[_0x57cee1(0x1d6)](_0x14bbea,_0x579af1),_0x1aaf3f['on'](_0x302096[_0x57cee1(0x1cb)],function(){const _0x38ae81=_0x57cee1;_0x4384cc[_0x38ae81(0x1eb)](),_0x2fa272[_0x38ae81(0x1ce)]();}),_0x1aaf3f[_0x57cee1(0x1cf)](_0x4384cc);}),_0x5b1ba0[_0x220235(0x17d)](_0x3101be['fileName'],_0x2a0689)&&_0x2fa272[_0x220235(0x1eb)]();}}),_0x2fa272['on'](_0x5bdbca['ywoOZ'],_0x333152=>{const _0x45c9da=_0x123e52;_0x302096[_0x45c9da(0x1d6)](_0x14bbea,_0x333152);}),_0x2fa272['once'](_0x5bdbca[_0x123e52(0x1f4)],()=>{const _0x1005e9=_0x123e52;fs[_0x1005e9(0x183)](_0x2f7543,_0x7acc8b=>{const _0x387cbc=_0x1005e9;_0x7acc8b&&logger[_0x387cbc(0x186)](_0x387cbc(0x192)+_0x2f7543);}),fs[_0x1005e9(0x1b4)](path[_0x1005e9(0x16c)](_0x27ca3e,_0x2a0689),_0x302096['yzUXz'],function(_0x2d2eac){const _0x20ca2a=_0x1005e9;_0x2d2eac&&_0x302096[_0x20ca2a(0x1c0)](_0x14bbea,_0x2d2eac),_0x302096[_0x20ca2a(0x1d6)](_0x8bfe42,path[_0x20ca2a(0x16c)](_0x27ca3e,_0x2a0689));}),_0x2fa272[_0x1005e9(0x1eb)]();});});});}static['getTestFrameworkDetail'](){const _0x5b4712=a64_0x41d861;if(process[_0x5b4712(0x17b)][_0x5b4712(0x19a)])return JSON['parse'](process[_0x5b4712(0x17b)]['BROWSERSTACK_TEST_FRAMEWORK_DETAIL']);return this['testFrameworkDetail'];}static[a64_0x41d861(0x1cc)](){const _0x5cfc6b=a64_0x41d861;if(process['env'][_0x5cfc6b(0x1ad)])return JSON[_0x5cfc6b(0x1d1)](process['env'][_0x5cfc6b(0x1ad)]);return this[_0x5cfc6b(0x1a3)];}static['setFrameworkDetail'](_0x12cbb2,_0x444d88){const _0x1847b=a64_0x41d861,_0x554cce={'PWedU':'4|1|3|0|2','TBRwL':function(_0x499a14,_0x19caf8){return _0x499a14(_0x19caf8);},'ITSbz':function(_0x2efb3d,_0x413b05){return _0x2efb3d||_0x413b05;}},_0x773f30=_0x554cce['PWedU'][_0x1847b(0x1d9)]('|');let _0x365b91=0x0;while(!![]){switch(_0x773f30[_0x365b91++]){case'0':process[_0x1847b(0x17b)][_0x1847b(0x1ad)]=JSON[_0x1847b(0x228)](this[_0x1847b(0x1a3)]);continue;case'1':this[_0x1847b(0x1bc)]={'name':_0x12cbb2,'version':{[_0x12cbb2]:_0x554cce[_0x1847b(0x1c6)](getFrameworkVersion,_0x12cbb2)}};continue;case'2':process[_0x1847b(0x17b)][_0x1847b(0x19a)]=JSON[_0x1847b(0x228)](this['testFrameworkDetail']);continue;case'3':this[_0x1847b(0x1a3)]={'name':_0x444d88,'version':_0x554cce[_0x1847b(0x1c6)](getFrameworkVersion,_0x444d88)};continue;case'4':_0x554cce[_0x1847b(0x18a)](!_0x12cbb2,!_0x444d88)&&logger[_0x1847b(0x19c)](_0x1847b(0x1a4)+_0x12cbb2+',\x20automationFramework='+_0x444d88);continue;}break;}}static['getHookRegistryKey'](_0x357d5a,_0x2ca31c){return _0x357d5a+':'+_0x2ca31c;}static[a64_0x41d861(0x1f7)](){const _0x2f6815=a64_0x41d861;return process[_0x2f6815(0x1fb)]+':'+threadId;}static[a64_0x41d861(0x17c)](_0x1f66f5){const _0x4d7567=a64_0x41d861;if(_0x1f66f5['testContextOptions']&&_0x1f66f5[_0x4d7567(0x20b)]['skipSessionName'])return!![];return![];}static[a64_0x41d861(0x210)](_0x85a1d0){const _0x6bc7a7=a64_0x41d861;if(_0x85a1d0[_0x6bc7a7(0x20b)]&&_0x85a1d0['testContextOptions'][_0x6bc7a7(0x1e2)])return!![];return![];}static[a64_0x41d861(0x21d)](_0xc2538c){const _0x503116=a64_0x41d861,_0x3d9809=new RegExp(TestFrameworkConstants['HOOK_REGEX']);return _0x3d9809[_0x503116(0x1b7)](_0xc2538c);}static[a64_0x41d861(0x1c8)](_0x119ab4,_0xd2b640){const _0x1dcfc7=a64_0x41d861,_0x2cb991={};_0x2cb991[_0x1dcfc7(0x196)]=function(_0x53dae2,_0x4b87fb){return _0x53dae2!==_0x4b87fb;},_0x2cb991[_0x1dcfc7(0x229)]=function(_0x1ce1a3,_0x186977){return _0x1ce1a3===_0x186977;},_0x2cb991[_0x1dcfc7(0x173)]=_0x1dcfc7(0x1b0);const _0x5ed2a6=_0x2cb991;for(const [_0x372176,_0x294182]of Object[_0x1dcfc7(0x190)](_0xd2b640)){if(_0x5ed2a6[_0x1dcfc7(0x196)](_0x294182,null)&&_0x5ed2a6[_0x1dcfc7(0x229)](typeof _0x294182,_0x5ed2a6[_0x1dcfc7(0x173)])&&!Array[_0x1dcfc7(0x219)](_0x294182))_0x119ab4[_0x372176]=this[_0x1dcfc7(0x1c8)](_0x119ab4[_0x372176]||{},_0x294182);else Array['isArray'](_0x294182)?_0x119ab4[_0x372176]=(_0x119ab4[_0x372176]||[])['concat'](_0x294182):_0x119ab4[_0x372176]=_0x294182;}return _0x119ab4;}}module[a64_0x41d861(0x226)]=CLIUtils;