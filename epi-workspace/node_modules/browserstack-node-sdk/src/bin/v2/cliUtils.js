const a60_0x2dbf17=a60_0x48e8;(function(_0x3e50b0,_0x51da37){const _0x3992d2=a60_0x48e8,_0x32bfb0=_0x3e50b0();while(!![]){try{const _0x50497e=parseInt(_0x3992d2(0x1a6))/0x1+parseInt(_0x3992d2(0x1a0))/0x2+-parseInt(_0x3992d2(0x134))/0x3*(parseInt(_0x3992d2(0x160))/0x4)+-parseInt(_0x3992d2(0x1a5))/0x5+-parseInt(_0x3992d2(0x155))/0x6+parseInt(_0x3992d2(0x193))/0x7*(parseInt(_0x3992d2(0x178))/0x8)+parseInt(_0x3992d2(0x119))/0x9;if(_0x50497e===_0x51da37)break;else _0x32bfb0['push'](_0x32bfb0['shift']());}catch(_0x38c2d3){_0x32bfb0['push'](_0x32bfb0['shift']());}}}(a60_0x4a60,0xd9bbf));const fs=require('fs'),os=require('os'),url=require('url'),path=require(a60_0x2dbf17(0x165)),{exec}=require(a60_0x2dbf17(0x121)),{https}=require('follow-redirects'),yauzl=require(a60_0x2dbf17(0x145)),util=require(a60_0x2dbf17(0x113)),{getFrameworkVersion}=require(a60_0x2dbf17(0x172)),{threadId}=require(a60_0x2dbf17(0x185)),PerformanceTester=require('../../helpers/performance/performance-tester.js'),{EVENTS:PerformanceEvents}=require(a60_0x2dbf17(0x18a)),{isNullOrEmpty,isModifiable,setReadWriteExecuteAccess}=require(a60_0x2dbf17(0x112)),{isTrue,createDir,getHostInfo,nodeRequest,nestedKeyValue}=require(a60_0x2dbf17(0x195)),{BROWSERSTACK_API_URL,UPDATED_CLI_ENDPOINT}=require(a60_0x2dbf17(0x179)),{createClassLogger}=require(a60_0x2dbf17(0x11d)),TestFrameworkInstance=require('./instances/testFrameworkInstance.js'),HookState=require(a60_0x2dbf17(0x182)),TestFrameworkState=require('./state/testFrameworkState.js'),AutomationFrameworkState=require(a60_0x2dbf17(0x15c)),TestFrameworkConstants=require(a60_0x2dbf17(0x126)),logger=createClassLogger(a60_0x2dbf17(0x13f));class CLIUtils{[a60_0x2dbf17(0x18f)]={};[a60_0x2dbf17(0x187)]={};static[a60_0x2dbf17(0x15d)](){const _0x2ccd3d=a60_0x2dbf17,_0xafafff={};_0xafafff['piyMo']=function(_0x19c212,_0x14a3ff){return _0x19c212===_0x14a3ff;},_0xafafff[_0x2ccd3d(0x147)]='development';const _0x5d8fde=_0xafafff;return _0x5d8fde['piyMo'](process[_0x2ccd3d(0x11e)][_0x2ccd3d(0x10f)],_0x5d8fde['mAxMf']);}static['getCLIParamsForDevEnv'](){const _0x46cfd9=a60_0x2dbf17,_0x1be5c7={};return _0x1be5c7['id']=process[_0x46cfd9(0x11e)][_0x46cfd9(0x10f)],_0x1be5c7[_0x46cfd9(0x109)]=_0x46cfd9(0x18e)+process['env'][_0x46cfd9(0x10f)]+'.sock',_0x1be5c7;}static['getSdkVersion'](){const _0x32e1e6=a60_0x2dbf17,_0x50420f={'gyXHU':function(_0x2ce688,_0x438e69){return _0x2ce688(_0x438e69);},'vIVxo':_0x32e1e6(0x157)};return _0x50420f['gyXHU'](require,_0x50420f[_0x32e1e6(0x142)])['version'];}static[a60_0x2dbf17(0x133)](){const _0x2d9b9d={};_0x2d9b9d['JJHkv']='node';const _0x13f39b=_0x2d9b9d;return _0x13f39b['JJHkv'];}static async[a60_0x2dbf17(0x15b)](_0x4f339e){const _0xf8fd12=a60_0x2dbf17,_0x17670e={'zhEfv':'Configuring\x20Cli\x20path.','lXkDe':function(_0x4cede0,_0xc5ab89){return _0x4cede0(_0xc5ab89);},'yMDvg':function(_0x5d5b8b,_0x46e436){return _0x5d5b8b(_0x46e436);},'zVlsu':_0xf8fd12(0x125)};logger[_0xf8fd12(0x12b)](_0x17670e[_0xf8fd12(0x114)]);const _0x1faa3a=process[_0xf8fd12(0x11e)]['SDK_CLI_BIN_PATH'];if(!_0x17670e[_0xf8fd12(0x10a)](isNullOrEmpty,_0x1faa3a))return logger['debug']('Development\x20Cli\x20Path:\x20'+_0x1faa3a),_0x1faa3a;try{const _0x3a5779=this[_0xf8fd12(0x176)]();if(_0x17670e[_0xf8fd12(0x146)](isNullOrEmpty,_0x3a5779))throw new Error(_0x17670e[_0xf8fd12(0x148)]);const _0x5c4bc8=this[_0xf8fd12(0x171)](_0x3a5779),_0x2fb028=await this['checkAndUpdateCli'](_0x5c4bc8,_0x3a5779,_0x4f339e);return logger[_0xf8fd12(0x12b)](_0xf8fd12(0x14d)+_0x2fb028),_0x2fb028;}catch(_0x1e969){logger['debug'](_0xf8fd12(0x12f)+util[_0xf8fd12(0x139)](_0x1e969));}return null;}static async[a60_0x2dbf17(0x12d)](_0x2e1c6e,_0x267e51,_0x56944b){const _0x59f0d9=a60_0x2dbf17,_0x3837d2={'EcyQE':function(_0x416539){return _0x416539();},'ikxOr':function(_0x337ebb,_0xa0d3ab){return _0x337ebb(_0xa0d3ab);},'Pwzvy':function(_0x2ce903,_0xf605ca,_0x4c1ed0){return _0x2ce903(_0xf605ca,_0x4c1ed0);},'mjlTL':_0x59f0d9(0x14c),'XqwNN':_0x59f0d9(0x14e)};PerformanceTester['start'](PerformanceEvents[_0x59f0d9(0x10d)]),logger['info']('Current\x20CLI\x20Path\x20Found:\x20'+_0x2e1c6e);const _0x4ff2a5=_0x3837d2[_0x59f0d9(0x11f)](getHostInfo),_0x2c6f49={'sdk_version':CLIUtils[_0x59f0d9(0x11c)](),'os':_0x4ff2a5['platform'],'os_arch':_0x4ff2a5['arch'],'cli_version':'0','sdk_language':this[_0x59f0d9(0x133)]()};!_0x3837d2['ikxOr'](isNullOrEmpty,_0x2e1c6e)&&(_0x2c6f49[_0x59f0d9(0x11b)]=await this['runShellCommand'](_0x2e1c6e+_0x59f0d9(0x17d)));const _0x2b5204=await this[_0x59f0d9(0x151)](_0x2c6f49,_0x56944b);process[_0x59f0d9(0x11e)][_0x59f0d9(0x1a2)]&&(logger['info'](_0x59f0d9(0x129)+process[_0x59f0d9(0x11e)][_0x59f0d9(0x1a2)]),_0x2b5204[_0x59f0d9(0x14c)]['url']=process[_0x59f0d9(0x11e)][_0x59f0d9(0x1a2)]);if(_0x3837d2['Pwzvy'](nestedKeyValue,_0x2b5204,[_0x3837d2[_0x59f0d9(0x120)],_0x3837d2[_0x59f0d9(0x10c)]])){logger[_0x59f0d9(0x12b)](_0x59f0d9(0x110)+_0x2c6f49['cli_version']);const _0x3d4002=await this[_0x59f0d9(0x16c)](_0x3837d2[_0x59f0d9(0x183)](nestedKeyValue,_0x2b5204,[_0x3837d2[_0x59f0d9(0x120)],_0x3837d2[_0x59f0d9(0x10c)]]),_0x267e51);return PerformanceTester['end'](PerformanceEvents[_0x59f0d9(0x10d)]),_0x3d4002;}return PerformanceTester[_0x59f0d9(0x17b)](PerformanceEvents[_0x59f0d9(0x10d)]),_0x2e1c6e;}static[a60_0x2dbf17(0x176)](){const _0x46ae0c=a60_0x2dbf17,_0x44ca3b={'GnCfU':function(_0x3ed82a,_0x42b333){return _0x3ed82a(_0x42b333);},'XMUrx':_0x46ae0c(0x125),'kpwPh':_0x46ae0c(0x19d)},_0x2daec9=this[_0x46ae0c(0x104)]();try{if(_0x44ca3b[_0x46ae0c(0x175)](isNullOrEmpty,_0x2daec9))throw new Error(_0x44ca3b[_0x46ae0c(0x159)]);const _0x102e80=path[_0x46ae0c(0x199)](_0x2daec9,_0x44ca3b[_0x46ae0c(0x122)]);return!fs[_0x46ae0c(0x1a7)](_0x102e80)&&_0x44ca3b[_0x46ae0c(0x175)](createDir,_0x102e80),_0x102e80;}catch(_0x805b6e){logger['debug'](_0x46ae0c(0x116)+util[_0x46ae0c(0x139)](_0x805b6e));}}static['getWritableDir'](){const _0x42daad=a60_0x2dbf17,_0x18fd92={'kbmZA':'.browserstack','xxTBz':function(_0x47f07a,_0x2cab2f){return _0x47f07a(_0x2cab2f);},'FFnoh':function(_0x3743c4,_0x106b52){return _0x3743c4(_0x106b52);},'XyCFZ':function(_0x23b2f,_0x3e1c5b){return _0x23b2f(_0x3e1c5b);}},_0x1d66c2=[process[_0x42daad(0x11e)]['BROWSERSTACK_FILES_DIR'],path[_0x42daad(0x199)](os[_0x42daad(0x136)](),_0x18fd92[_0x42daad(0x164)]),path['join'](os[_0x42daad(0x1a4)](),_0x18fd92['kbmZA'])];for(const _0x13d18c of _0x1d66c2){if(_0x18fd92[_0x42daad(0x140)](isNullOrEmpty,_0x13d18c))continue;try{if(fs['existsSync'](_0x13d18c)){logger[_0x42daad(0x12b)](_0x42daad(0x192)+_0x13d18c+_0x42daad(0x150));if(!_0x18fd92['xxTBz'](isModifiable,_0x13d18c)){logger[_0x42daad(0x12b)]('Setting\x20required\x20permissions\x20to\x20'+_0x13d18c);const _0x305ec6=_0x18fd92[_0x42daad(0x140)](setReadWriteExecuteAccess,_0x13d18c);if(!_0x18fd92['FFnoh'](isTrue,_0x305ec6)){logger[_0x42daad(0x161)](_0x42daad(0x14b)+_0x13d18c);continue;}}}else{logger['debug'](_0x42daad(0x162)+_0x13d18c),_0x18fd92['XyCFZ'](createDir,_0x13d18c),logger[_0x42daad(0x12b)](_0x42daad(0x128)+_0x13d18c);const _0x785917=_0x18fd92[_0x42daad(0x140)](setReadWriteExecuteAccess,_0x13d18c);!_0x18fd92['FFnoh'](isTrue,_0x785917)&&logger[_0x42daad(0x161)](_0x42daad(0x14b)+_0x13d18c);}return _0x13d18c;}catch(_0x4c5c4e){logger[_0x42daad(0x177)]('Unable\x20to\x20get\x20writable\x20directory,\x20exception\x20'+util['format'](_0x4c5c4e));}}return null;}static[a60_0x2dbf17(0x171)](_0x4a8a31){const _0xdcbbab=a60_0x2dbf17,_0x41b7c4={};_0x41b7c4[_0xdcbbab(0x17e)]=function(_0x36d8c5,_0x25fec2){return _0x36d8c5>_0x25fec2;};const _0x4c1886=_0x41b7c4;try{if(!fs[_0xdcbbab(0x1a7)](_0x4a8a31)||!fs['statSync'](_0x4a8a31)[_0xdcbbab(0x16b)]())return'';const _0x1e1034=fs[_0xdcbbab(0x196)](_0x4a8a31)[_0xdcbbab(0x130)](_0x3e9639=>path[_0xdcbbab(0x199)](_0x4a8a31,_0x3e9639))[_0xdcbbab(0x15e)](_0x5b634e=>fs[_0xdcbbab(0x163)](_0x5b634e)[_0xdcbbab(0x11a)]()&&path[_0xdcbbab(0x13b)](_0x5b634e)[_0xdcbbab(0x131)](_0xdcbbab(0x149)));if(_0x4c1886[_0xdcbbab(0x17e)](_0x1e1034['length'],0x0)){const _0x150da8=_0x1e1034[_0xdcbbab(0x130)](_0x4a3f3a=>({'filePath':_0x4a3f3a,'mtime':fs['statSync'](_0x4a3f3a)[_0xdcbbab(0x173)]}))[_0xdcbbab(0x153)]((_0x59519f,_0x56f1bf)=>{const _0x24e5cb=_0xdcbbab;if(!_0x59519f||!_0x59519f[_0x24e5cb(0x173)])return _0x56f1bf;if(_0x4c1886[_0x24e5cb(0x17e)](_0x56f1bf[_0x24e5cb(0x173)],_0x59519f['mtime']))return _0x56f1bf;return _0x59519f;},{});return _0x150da8?_0x150da8[_0xdcbbab(0x12e)]:'';}return'';}catch(_0x286041){return logger[_0xdcbbab(0x177)]('Error\x20while\x20reading\x20CLI\x20path:\x20'+util['format'](_0x286041)),'';}}static [a60_0x2dbf17(0x151)]=async(_0x531326,_0x1057f4)=>{const _0x1b0d2e=a60_0x2dbf17,_0x1c9b35={'HYcpI':function(_0x27debf,_0x3bcc8d,_0x3c15a2,_0x2dc3d4,_0x31e883,_0x4d3169){return _0x27debf(_0x3bcc8d,_0x3c15a2,_0x2dc3d4,_0x31e883,_0x4d3169);},'CpIpa':_0x1b0d2e(0x132)},_0x6f6168={};_0x6f6168['qs']=_0x531326;const _0x3fdc18=await _0x1c9b35[_0x1b0d2e(0x15a)](nodeRequest,_0x1c9b35[_0x1b0d2e(0x117)],UPDATED_CLI_ENDPOINT,_0x6f6168,_0x1057f4,BROWSERSTACK_API_URL);return logger['debug'](_0x1b0d2e(0x12a)+JSON[_0x1b0d2e(0x14f)](_0x3fdc18)),_0x3fdc18;};static['runShellCommand'](_0x675d76,_0x6fcb3d=''){const _0x167f58=a60_0x2dbf17,_0x11afdd={'bNDWG':function(_0x3ccdce,_0x24f8d1){return _0x3ccdce(_0x24f8d1);},'XgNET':_0x167f58(0x102),'GOpNX':function(_0x40acc4,_0x29761f){return _0x40acc4(_0x29761f);},'nXApy':function(_0x5004b4,_0x59b94a,_0x2d4d4d,_0x23384e){return _0x5004b4(_0x59b94a,_0x2d4d4d,_0x23384e);},'wYzDm':_0x167f58(0x177)};return new Promise((_0x26a2c6,_0x21a54f)=>{const _0x5742f2=_0x167f58,_0x2f8cce={'rDtlm':function(_0x2df53e,_0x202b1f){const _0x4b322b=a60_0x48e8;return _0x11afdd[_0x4b322b(0x127)](_0x2df53e,_0x202b1f);},'zZegt':_0x11afdd['XgNET'],'ionwz':function(_0x2cf028,_0x17fa59){const _0x4e464f=a60_0x48e8;return _0x11afdd[_0x4e464f(0x123)](_0x2cf028,_0x17fa59);}},_0x5b7bd4={};_0x5b7bd4[_0x5742f2(0x19a)]=_0x6fcb3d,_0x5b7bd4['timeout']=0x1388;const _0x869d02=_0x11afdd[_0x5742f2(0x169)](exec,_0x675d76,_0x5b7bd4,(_0x2cd89f,_0x326b2d,_0x1e5db4)=>{const _0xc1ebe=_0x5742f2;_0x2cd89f?_0x2f8cce[_0xc1ebe(0x198)](_0x26a2c6,_0x1e5db4[_0xc1ebe(0x1a3)]()||_0x2f8cce[_0xc1ebe(0x118)]):_0x2f8cce[_0xc1ebe(0x135)](_0x26a2c6,_0x326b2d[_0xc1ebe(0x1a3)]());});_0x869d02['on'](_0x11afdd[_0x5742f2(0x105)],()=>{const _0x1284f1=_0x5742f2;_0x11afdd[_0x1284f1(0x123)](_0x26a2c6,_0x11afdd[_0x1284f1(0x174)]);});});}static ['downloadLatestBinary']=async(_0x28826b,_0x5d04d4)=>{const _0x3cc9e9=a60_0x2dbf17,_0x2fd1da={'uEUgo':_0x3cc9e9(0x106),'CvNwq':function(_0x435982,_0x1f1ca2){return _0x435982(_0x1f1ca2);},'NItZo':'Got\x20Error\x20while\x20downloading\x20percy\x20binary\x20file\x20%s','dNGdE':_0x3cc9e9(0x177),'vJFzD':_0x3cc9e9(0x180)};PerformanceTester[_0x3cc9e9(0x10b)](PerformanceEvents[_0x3cc9e9(0x10e)]),logger['debug'](_0x3cc9e9(0x167)+_0x28826b);try{const _0x1af853=url['parse'](_0x28826b),_0x3bc177=path[_0x3cc9e9(0x199)](_0x5d04d4,_0x2fd1da['vJFzD']),_0x5f4296=fs[_0x3cc9e9(0x197)](_0x3bc177);return new Promise((_0x5da0d5,_0x13ebb1)=>{const _0x2e30c9=_0x3cc9e9,_0x5d05da={'GQVQH':_0x2fd1da[_0x2e30c9(0x170)],'pLAnZ':function(_0x5d5a0b,_0x206d49){const _0x4175e1=_0x2e30c9;return _0x2fd1da[_0x4175e1(0x111)](_0x5d5a0b,_0x206d49);},'gBurg':_0x2fd1da[_0x2e30c9(0x194)],'JZIxL':function(_0x59e5d2,_0x225ba8){const _0x2726da=_0x2e30c9;return _0x2fd1da[_0x2726da(0x111)](_0x59e5d2,_0x225ba8);},'SACIB':_0x2fd1da[_0x2e30c9(0x188)]};https[_0x2e30c9(0x18b)](_0x1af853,function(_0x23c15e){const _0x1dcdc3=_0x2e30c9,_0xbc6b6=null;_0x23c15e[_0x1dcdc3(0x190)](_0x5f4296),_0x23c15e['on'](_0x5d05da[_0x1dcdc3(0x101)],function(_0x387fbd){const _0x48d954=_0x1dcdc3;logger[_0x48d954(0x177)](util['format'](_0x5d05da[_0x48d954(0x19b)],_0x387fbd)),PerformanceTester[_0x48d954(0x17b)](PerformanceEvents[_0x48d954(0x10e)],![],util['format'](_0x387fbd)),_0x5d05da[_0x48d954(0x16e)](_0x13ebb1,_0x387fbd);}),_0x5f4296['on'](_0x5d05da[_0x1dcdc3(0x101)],function(_0x2f7da6){const _0x1ddb15=_0x1dcdc3;logger[_0x1ddb15(0x177)](util[_0x1ddb15(0x139)](_0x5d05da[_0x1ddb15(0x17f)],_0x2f7da6)),PerformanceTester[_0x1ddb15(0x17b)](PerformanceEvents[_0x1ddb15(0x10e)],![],util[_0x1ddb15(0x139)](_0x2f7da6)),_0x5d05da[_0x1ddb15(0x137)](_0x13ebb1,_0x2f7da6);}),CLIUtils['downloadFileStream'](_0x5f4296,_0xbc6b6,_0x3bc177,_0x5d04d4,_0x5da0d5,_0x13ebb1),PerformanceTester['end'](PerformanceEvents[_0x1dcdc3(0x10e)]);})['on'](_0x2fd1da[_0x2e30c9(0x188)],function(_0x3a2404){const _0x50630b=_0x2e30c9;logger[_0x50630b(0x177)]('Got\x20Error\x20in\x20percy\x20binary\x20downloading\x20request\x20'+util[_0x50630b(0x139)](_0x3a2404)),PerformanceTester['end'](PerformanceEvents[_0x50630b(0x10e)],![],util[_0x50630b(0x139)](_0x3a2404)),_0x5d05da['pLAnZ'](_0x13ebb1,_0x3a2404);});});}catch(_0x529a0e){PerformanceTester[_0x3cc9e9(0x17b)](PerformanceEvents[_0x3cc9e9(0x10e)],![],util[_0x3cc9e9(0x139)](_0x529a0e)),logger[_0x3cc9e9(0x12b)]('Failed\x20to\x20download\x20binary,\x20Exception:\x20'+util['format'](_0x529a0e));}};static['downloadFileStream'](_0x520a83,_0x147093,_0x531ea9,_0x115fa2,_0x38b46b,_0x2d841e){const _0x234ab3=a60_0x2dbf17,_0x56fd17={'fUQvk':function(_0x31d127,_0x16d068){return _0x31d127(_0x16d068);},'GnUXf':_0x234ab3(0x17b),'ySXeP':function(_0x162c47,_0x377e40){return _0x162c47===_0x377e40;},'WTpsf':_0x234ab3(0x12c),'wmiwd':function(_0x1efb7a,_0x2721ec){return _0x1efb7a(_0x2721ec);},'ICCxv':'entry','ArFrY':'error','hmJKA':function(_0x3ce856,_0x5f49ed){return _0x3ce856(_0x5f49ed);},'TupIl':_0x234ab3(0x19c)};_0x520a83['on'](_0x56fd17['TupIl'],function(){const _0x196110=_0x234ab3,_0x37495d={'GSAsw':function(_0x513f02,_0x288612){const _0x3a287f=a60_0x48e8;return _0x56fd17[_0x3a287f(0x107)](_0x513f02,_0x288612);}},_0x234703={};_0x234703['lazyEntries']=!![],yauzl[_0x196110(0x19e)](_0x531ea9,_0x234703,function(_0x9c1f50,_0x4d31c3){const _0x484cae=_0x196110,_0x470891={'aCcWl':function(_0x191bbe,_0x1e291d){return _0x56fd17['fUQvk'](_0x191bbe,_0x1e291d);},'cpgoz':_0x56fd17['GnUXf'],'Gjork':function(_0x5da2d1,_0xa4dffc){const _0x7ce000=a60_0x48e8;return _0x56fd17[_0x7ce000(0x13d)](_0x5da2d1,_0xa4dffc);},'uxJwE':function(_0x52610e,_0x1b8530){const _0x9f7791=a60_0x48e8;return _0x56fd17[_0x9f7791(0x191)](_0x52610e,_0x1b8530);},'NBFJQ':_0x56fd17[_0x484cae(0x19f)]};_0x9c1f50&&_0x56fd17['wmiwd'](_0x2d841e,_0x9c1f50),_0x4d31c3['readEntry'](),_0x4d31c3['on'](_0x56fd17[_0x484cae(0x158)],_0x33cedf=>{const _0x325777=_0x484cae;!_0x147093&&(_0x147093=_0x33cedf['fileName']);if(/\/$/[_0x325777(0x18d)](_0x33cedf[_0x325777(0x138)]))_0x4d31c3[_0x325777(0x154)]();else{const _0x429bd5=fs[_0x325777(0x197)](path[_0x325777(0x199)](_0x115fa2,_0x33cedf[_0x325777(0x138)]));_0x4d31c3['openReadStream'](_0x33cedf,function(_0x4f12ba,_0x9dc6b3){const _0x3a403c=_0x325777;_0x4f12ba&&_0x470891['aCcWl'](_0x2d841e,_0x9c1f50),_0x9dc6b3['on'](_0x470891[_0x3a403c(0x124)],function(){_0x429bd5['close'](),_0x4d31c3['readEntry']();}),_0x9dc6b3[_0x3a403c(0x190)](_0x429bd5);}),_0x470891['Gjork'](_0x33cedf[_0x325777(0x138)],_0x147093)&&_0x4d31c3[_0x325777(0x19c)]();}}),_0x4d31c3['on'](_0x56fd17[_0x484cae(0x13e)],_0x3ab1da=>{const _0x3a28ed=_0x484cae;_0x37495d[_0x3a28ed(0x144)](_0x2d841e,_0x3ab1da);}),_0x4d31c3[_0x484cae(0x152)](_0x56fd17[_0x484cae(0x156)],()=>{const _0x78fb2a=_0x484cae;fs[_0x78fb2a(0x181)](_0x531ea9,_0x398cb1=>{const _0xd7c582=_0x78fb2a;_0x398cb1&&logger[_0xd7c582(0x161)](_0xd7c582(0x108)+_0x531ea9);}),fs[_0x78fb2a(0x143)](_0x115fa2+'/'+_0x147093,_0x470891[_0x78fb2a(0x100)],function(_0x2ba9db){_0x2ba9db&&_0x470891['uxJwE'](_0x2d841e,_0x2ba9db),_0x470891['aCcWl'](_0x38b46b,_0x115fa2+'/'+_0x147093);}),_0x4d31c3[_0x78fb2a(0x19c)]();});});});}static[a60_0x2dbf17(0x18c)](){const _0x1f69b3=a60_0x2dbf17;if(process[_0x1f69b3(0x11e)][_0x1f69b3(0x166)])return JSON['parse'](process[_0x1f69b3(0x11e)]['BROWSERSTACK_TEST_FRAMEWORK_DETAIL']);return this['testFrameworkDetail'];}static[a60_0x2dbf17(0x168)](){const _0x263834=a60_0x2dbf17;if(process[_0x263834(0x11e)][_0x263834(0x141)])return JSON[_0x263834(0x115)](process[_0x263834(0x11e)][_0x263834(0x141)]);return this[_0x263834(0x18f)];}static[a60_0x2dbf17(0x13c)](_0x48420f,_0x4fa0e2){const _0x435274=a60_0x2dbf17,_0x3ba155={'lFljv':'2|1|0|4|3','bATUc':function(_0x14b4ee,_0x1e5ba5){return _0x14b4ee(_0x1e5ba5);},'mUTAM':function(_0x2fc64c,_0x221dda){return _0x2fc64c||_0x221dda;}},_0x58de3d=_0x3ba155[_0x435274(0x184)][_0x435274(0x16f)]('|');let _0x443a6b=0x0;while(!![]){switch(_0x58de3d[_0x443a6b++]){case'0':this[_0x435274(0x18f)]={'name':_0x4fa0e2,'version':_0x3ba155[_0x435274(0x16a)](getFrameworkVersion,_0x4fa0e2)};continue;case'1':this[_0x435274(0x187)]={'name':_0x48420f,'version':{[_0x48420f]:_0x3ba155[_0x435274(0x16a)](getFrameworkVersion,_0x48420f)}};continue;case'2':_0x3ba155[_0x435274(0x17a)](!_0x48420f,!_0x4fa0e2)&&logger['debug'](_0x435274(0x1a1)+_0x48420f+',\x20automationFramework='+_0x4fa0e2);continue;case'3':process[_0x435274(0x11e)]['BROWSERSTACK_TEST_FRAMEWORK_DETAIL']=JSON['stringify'](this[_0x435274(0x187)]);continue;case'4':process[_0x435274(0x11e)]['BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL']=JSON[_0x435274(0x14f)](this[_0x435274(0x18f)]);continue;}break;}}static['getHookRegistryKey'](_0x4cb1e9,_0x1e97ba){return _0x4cb1e9+':'+_0x1e97ba;}static[a60_0x2dbf17(0x17c)](){return process['pid']+':'+threadId;}static[a60_0x2dbf17(0x15f)](_0x56a061){const _0x1b98f8=a60_0x2dbf17;if(_0x56a061['testContextOptions']&&_0x56a061[_0x1b98f8(0x16d)][_0x1b98f8(0x103)])return!![];return![];}static[a60_0x2dbf17(0x14a)](_0x33b2d1){const _0x30ff38=a60_0x2dbf17;if(_0x33b2d1[_0x30ff38(0x16d)]&&_0x33b2d1[_0x30ff38(0x16d)][_0x30ff38(0x189)])return!![];return![];}static[a60_0x2dbf17(0x186)](_0x1a59a6){const _0x5829f7=a60_0x2dbf17,_0x5c8b29=new RegExp(TestFrameworkConstants[_0x5829f7(0x13a)]);return _0x5c8b29['test'](_0x1a59a6);}}module['exports']=CLIUtils;function a60_0x48e8(_0x18cf53,_0x1fd2dd){const _0x4a60c7=a60_0x4a60();return a60_0x48e8=function(_0x48e84d,_0x5d04cc){_0x48e84d=_0x48e84d-0x100;let _0x1017ab=_0x4a60c7[_0x48e84d];return _0x1017ab;},a60_0x48e8(_0x18cf53,_0x1fd2dd);}function a60_0x4a60(){const _0xb1c356=['test','unix:/tmp/sdk-platform-','automationFrameworkDetail','pipe','fUQvk','Folder\x20','188377IrVOIq','NItZo','../../helpers/helper','readdirSync','createWriteStream','rDtlm','join','cwd','GQVQH','close','cli','open','WTpsf','1611006INWBMA','Test\x20or\x20Automation\x20framework\x20not\x20provided\x20testFramework=','BROWSERSTACK_BINARY_URL','trim','tmpdir','530760lEUwkU','648374vlSTjA','existsSync','NBFJQ','SACIB','SHELL_EXECUTE_ERROR','skipSessionName','getWritableDir','wYzDm','Got\x20Error\x20in\x20percy\x20binary\x20download\x20response\x20%s','hmJKA','Failed\x20to\x20delete\x20zip\x20file:\x20','listen','lXkDe','start','XqwNN','SDK_CLI_CHECK_UPDATE','SDK_CLI_DOWNLOAD','BROWSERSTACK_CLI_ENV','Need\x20to\x20update\x20binary,\x20current\x20binary\x20version:\x20','CvNwq','../../helpers/utilities','util','zhEfv','parse','Error\x20in\x20getting\x20writable\x20directory,\x20writableDir=','CpIpa','zZegt','439533LjkfrF','isFile','cli_version','getSdkVersion','../../helpers/classLogger.js','env','EcyQE','mjlTL','child_process','kpwPh','bNDWG','cpgoz','No\x20writable\x20directory\x20available\x20for\x20the\x20CLI','./framework/constants/testFrameworkConstants.js','GOpNX','Setting\x20required\x20permissions\x20to\x20','Using\x20BROWSERSTACK_BINARY_URL\x20from\x20env\x20variable:\x20','response\x20','debug','0755','checkAndUpdateCli','filePath','Error\x20in\x20setting\x20up\x20cli\x20path\x20directory,\x20Exception:\x20','map','startsWith','GET','getSdkLanguage','249cbQEje','ionwz','homedir','JZIxL','fileName','format','HOOK_REGEX','basename','setFrameworkDetail','ySXeP','ArFrY','CLIUtils','xxTBz','BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL','vIVxo','chmod','GSAsw','yauzl','yMDvg','mAxMf','zVlsu','binary-','shouldSkipSessionStatus','Unable\x20to\x20set\x20required\x20permissions\x20to\x20','data','Resolved\x20binary\x20path:\x20','url','stringify','\x20already\x20exists','requestToUpdateCLI','once','reduce','readEntry','4486188DmWEaL','GnUXf','../../../package.json','ICCxv','XMUrx','HYcpI','setupCliPath','./state/automationFrameworkState.js','isDevelopmentEnv','filter','shouldSkipSessionName','24604hOkwoZ','warn','Folder\x20does\x20not\x20exist:\x20','statSync','kbmZA','path','BROWSERSTACK_TEST_FRAMEWORK_DETAIL','Downloading\x20SDK\x20binary\x20from:\x20','getAutomationFrameworkDetail','nXApy','bATUc','isDirectory','downloadLatestBinary','testContextOptions','pLAnZ','split','uEUgo','getExistingCliPath','../../helpers/test-observability/utils.js','mtime','XgNET','GnCfU','getCliDir','error','224gAYnOl','../utils/constants','mUTAM','end','getCurrentInstanceName','\x20version','qjrJb','gBurg','downloaded_file.zip','unlink','./state/hookState.js','Pwzvy','lFljv','worker_threads','matchHookRegex','testFrameworkDetail','dNGdE','skipSessionStatus','../../helpers/performance/constants','get','getTestFrameworkDetail'];a60_0x4a60=function(){return _0xb1c356;};return a60_0x4a60();}