const a64_0x3e5d30=a64_0x5c68;function a64_0x5c68(_0x3015fa,_0x5b80ff){const _0x1004ac=a64_0x1004();return a64_0x5c68=function(_0x5c6865,_0x5d6dcd){_0x5c6865=_0x5c6865-0xaa;let _0x50c9e4=_0x1004ac[_0x5c6865];return _0x50c9e4;},a64_0x5c68(_0x3015fa,_0x5b80ff);}(function(_0x37f634,_0x3ff20c){const _0x1b7dbf=a64_0x5c68,_0x4fa068=_0x37f634();while(!![]){try{const _0xae074a=parseInt(_0x1b7dbf(0x121))/0x1+parseInt(_0x1b7dbf(0xb6))/0x2+parseInt(_0x1b7dbf(0x114))/0x3*(-parseInt(_0x1b7dbf(0xe9))/0x4)+parseInt(_0x1b7dbf(0x12f))/0x5+parseInt(_0x1b7dbf(0x13d))/0x6+parseInt(_0x1b7dbf(0x166))/0x7+parseInt(_0x1b7dbf(0x151))/0x8*(-parseInt(_0x1b7dbf(0x14f))/0x9);if(_0xae074a===_0x3ff20c)break;else _0x4fa068['push'](_0x4fa068['shift']());}catch(_0x3df966){_0x4fa068['push'](_0x4fa068['shift']());}}}(a64_0x1004,0x57abe));const fs=require('fs'),os=require('os'),url=require(a64_0x3e5d30(0x16c)),path=require('path'),{exec}=require(a64_0x3e5d30(0x14c)),{https}=require(a64_0x3e5d30(0xc7)),yauzl=require(a64_0x3e5d30(0xdd)),util=require(a64_0x3e5d30(0x167)),{getFrameworkVersion}=require(a64_0x3e5d30(0xea)),{threadId}=require(a64_0x3e5d30(0xc4)),PerformanceTester=require(a64_0x3e5d30(0x123)),{EVENTS:PerformanceEvents}=require(a64_0x3e5d30(0xe4)),{isNullOrEmpty,isModifiable,setReadWriteExecuteAccess}=require(a64_0x3e5d30(0xe3)),{isTrue,createDir,getHostInfo,nodeRequest,nestedKeyValue}=require(a64_0x3e5d30(0xd1)),{UPDATED_CLI_ENDPOINT,BINARY_BUSY_ERROR_CODES}=require(a64_0x3e5d30(0xb9)),{createClassLogger}=require(a64_0x3e5d30(0xe5)),TestFrameworkInstance=require(a64_0x3e5d30(0x153)),HookState=require(a64_0x3e5d30(0x10d)),TestFrameworkState=require(a64_0x3e5d30(0x12a)),AutomationFrameworkState=require('./state/automationFrameworkState.js'),TestFrameworkConstants=require(a64_0x3e5d30(0x113)),logger=createClassLogger(a64_0x3e5d30(0xf6)),{getBStackAPIUrl}=require(a64_0x3e5d30(0x125));class CLIUtils{[a64_0x3e5d30(0xb0)]={};[a64_0x3e5d30(0x11a)]={};static['isDevelopmentEnv'](){const _0xcc0c96=a64_0x3e5d30,_0x1aa8b6={};_0x1aa8b6[_0xcc0c96(0xdb)]=function(_0x328330,_0x50c4a2){return _0x328330===_0x50c4a2;},_0x1aa8b6[_0xcc0c96(0xf9)]=_0xcc0c96(0x16e);const _0x58d855=_0x1aa8b6;return _0x58d855[_0xcc0c96(0xdb)](process['env'][_0xcc0c96(0x171)],_0x58d855[_0xcc0c96(0xf9)]);}static[a64_0x3e5d30(0x158)](){const _0xa026e7=a64_0x3e5d30,_0x3623d0={};return _0x3623d0['id']=process[_0xa026e7(0xfb)][_0xa026e7(0x171)],_0x3623d0[_0xa026e7(0xc5)]=_0xa026e7(0x130)+process['env'][_0xa026e7(0x171)]+_0xa026e7(0x170),_0x3623d0;}static['getSdkVersion'](){const _0x403e56=a64_0x3e5d30,_0x2aaae1={'TEFFo':function(_0x3db5bb,_0x382fba){return _0x3db5bb(_0x382fba);},'QJpxM':_0x403e56(0xd5)};return _0x2aaae1[_0x403e56(0xf0)](require,_0x2aaae1[_0x403e56(0x173)])[_0x403e56(0x127)];}static['getSdkLanguage'](){const _0x481185=a64_0x3e5d30,_0x43c28c={};_0x43c28c[_0x481185(0x16a)]=_0x481185(0x131);const _0x5408e7=_0x43c28c;return _0x5408e7[_0x481185(0x16a)];}static async[a64_0x3e5d30(0xb3)](_0xea95d5){const _0xdb2d5a=a64_0x3e5d30,_0x4b7323={'fpesD':_0xdb2d5a(0x116),'sQHqi':function(_0x36e675,_0x5f1e9a){return _0x36e675(_0x5f1e9a);},'xlMbO':'No\x20writable\x20directory\x20available\x20for\x20the\x20CLI'};logger[_0xdb2d5a(0x11e)](_0x4b7323[_0xdb2d5a(0xad)]);const _0x4c96ad=process[_0xdb2d5a(0xfb)][_0xdb2d5a(0xcd)];if(!_0x4b7323[_0xdb2d5a(0x163)](isNullOrEmpty,_0x4c96ad))return logger[_0xdb2d5a(0x11e)](_0xdb2d5a(0x12b)+_0x4c96ad),_0x4c96ad;try{const _0x18a8bb=this['getCliDir']();if(_0x4b7323[_0xdb2d5a(0x163)](isNullOrEmpty,_0x18a8bb))throw new Error(_0x4b7323['xlMbO']);const _0x39b130=this[_0xdb2d5a(0x10a)](_0x18a8bb),_0xb1489b=await this[_0xdb2d5a(0x14a)](_0x39b130,_0x18a8bb,_0xea95d5);return logger[_0xdb2d5a(0x11e)]('Resolved\x20binary\x20path:\x20'+_0xb1489b),_0xb1489b;}catch(_0x30e7a1){logger[_0xdb2d5a(0x11e)]('Error\x20in\x20setting\x20up\x20cli\x20path\x20directory,\x20Exception:\x20'+util[_0xdb2d5a(0xd7)](_0x30e7a1));}return null;}static async['checkAndUpdateCli'](_0x2d53f9,_0x199e38,_0x57faed){const _0x4736f8=a64_0x3e5d30,_0x2efdae={'jKyij':function(_0x3c6d85){return _0x3c6d85();},'VMHEO':function(_0xf40c87,_0xb88437){return _0xf40c87(_0xb88437);},'bVxqH':function(_0xf2a2f9,_0x51961e,_0x27905d){return _0xf2a2f9(_0x51961e,_0x27905d);},'qXpaX':_0x4736f8(0x162),'mqllt':_0x4736f8(0x16c)};PerformanceTester[_0x4736f8(0x142)](PerformanceEvents[_0x4736f8(0x11d)]),logger[_0x4736f8(0xf7)](_0x4736f8(0x152)+_0x2d53f9);const _0x559bbd=_0x2efdae[_0x4736f8(0xf1)](getHostInfo),_0x529bca={'sdk_version':CLIUtils[_0x4736f8(0x109)](),'os':_0x559bbd[_0x4736f8(0x16d)],'os_arch':_0x559bbd[_0x4736f8(0x10c)],'cli_version':'0','sdk_language':this['getSdkLanguage']()};!_0x2efdae[_0x4736f8(0xc0)](isNullOrEmpty,_0x2d53f9)&&(_0x529bca[_0x4736f8(0x141)]=await this[_0x4736f8(0x146)](_0x2d53f9+'\x20version'));const _0x1ef1eb=await this['requestToUpdateCLI'](_0x529bca,_0x57faed);process[_0x4736f8(0xfb)][_0x4736f8(0x138)]&&(logger['info']('Using\x20BROWSERSTACK_BINARY_URL\x20from\x20env\x20variable:\x20'+process[_0x4736f8(0xfb)][_0x4736f8(0x138)]),_0x1ef1eb[_0x4736f8(0x162)]['url']=process['env']['BROWSERSTACK_BINARY_URL']);if(_0x2efdae['bVxqH'](nestedKeyValue,_0x1ef1eb,[_0x2efdae[_0x4736f8(0x13a)],_0x2efdae['mqllt']])){logger['debug'](_0x4736f8(0x15c)+_0x529bca['cli_version']);if(!_0x2efdae[_0x4736f8(0xc0)](isNullOrEmpty,_0x2d53f9)&&this[_0x4736f8(0x147)](_0x2d53f9))return logger[_0x4736f8(0x101)](_0x4736f8(0xd2)+_0x2d53f9),PerformanceTester[_0x4736f8(0xab)](PerformanceEvents[_0x4736f8(0x11d)]),_0x2d53f9;const _0xa5b320=await this[_0x4736f8(0x12e)](_0x2efdae[_0x4736f8(0x139)](nestedKeyValue,_0x1ef1eb,[_0x2efdae['qXpaX'],_0x2efdae['mqllt']]),_0x199e38);return PerformanceTester[_0x4736f8(0xab)](PerformanceEvents[_0x4736f8(0x11d)]),_0xa5b320;}return PerformanceTester[_0x4736f8(0xab)](PerformanceEvents[_0x4736f8(0x11d)]),_0x2d53f9;}static[a64_0x3e5d30(0xac)](){const _0x347783=a64_0x3e5d30,_0x29efa8={'mNvJQ':function(_0x56c992,_0xe1da30){return _0x56c992(_0xe1da30);},'CtgrF':_0x347783(0xb8),'VKodh':_0x347783(0x10f)},_0x5ee4c4=this[_0x347783(0x16f)]();try{if(_0x29efa8[_0x347783(0x13c)](isNullOrEmpty,_0x5ee4c4))throw new Error(_0x29efa8[_0x347783(0x15b)]);const _0x16e8e3=path[_0x347783(0xb5)](_0x5ee4c4,_0x29efa8[_0x347783(0xff)]);return!fs[_0x347783(0xb7)](_0x16e8e3)&&_0x29efa8[_0x347783(0x13c)](createDir,_0x16e8e3),_0x16e8e3;}catch(_0x8cef28){logger[_0x347783(0x11e)]('Error\x20in\x20getting\x20writable\x20directory,\x20writableDir='+util[_0x347783(0xd7)](_0x8cef28));}}static[a64_0x3e5d30(0x16f)](){const _0x5f5309=a64_0x3e5d30,_0x288431={'vsGwJ':'.browserstack','tupaV':function(_0x4462e2,_0x3c88d7){return _0x4462e2(_0x3c88d7);},'FCWZL':function(_0x101b23,_0x36b4da){return _0x101b23(_0x36b4da);},'YtwrP':function(_0xa7ef2e,_0x155d55){return _0xa7ef2e(_0x155d55);},'ffbij':function(_0x52dca8,_0x34ff47){return _0x52dca8(_0x34ff47);}},_0x4bfbf8=[process['env']['BROWSERSTACK_FILES_DIR'],path['join'](os[_0x5f5309(0x157)](),_0x288431[_0x5f5309(0xda)]),path[_0x5f5309(0xb5)](os[_0x5f5309(0x133)](),_0x288431[_0x5f5309(0xda)])];for(const _0x13f040 of _0x4bfbf8){if(_0x288431[_0x5f5309(0x122)](isNullOrEmpty,_0x13f040))continue;try{if(fs[_0x5f5309(0xb7)](_0x13f040)){logger[_0x5f5309(0x11e)](_0x5f5309(0xd8)+_0x13f040+'\x20already\x20exists');if(!_0x288431[_0x5f5309(0xaa)](isModifiable,_0x13f040)){logger[_0x5f5309(0x11e)](_0x5f5309(0xe2)+_0x13f040);const _0x387213=_0x288431[_0x5f5309(0xaa)](setReadWriteExecuteAccess,_0x13f040);if(!_0x288431[_0x5f5309(0x119)](isTrue,_0x387213)){logger[_0x5f5309(0x101)](_0x5f5309(0xdf)+_0x13f040);continue;}}}else{logger[_0x5f5309(0x11e)](_0x5f5309(0xf4)+_0x13f040),_0x288431[_0x5f5309(0x119)](createDir,_0x13f040),logger[_0x5f5309(0x11e)](_0x5f5309(0xe2)+_0x13f040);const _0x27944f=_0x288431['ffbij'](setReadWriteExecuteAccess,_0x13f040);!_0x288431[_0x5f5309(0xe7)](isTrue,_0x27944f)&&logger['warn']('Unable\x20to\x20set\x20required\x20permissions\x20to\x20'+_0x13f040);}return _0x13f040;}catch(_0x379820){logger[_0x5f5309(0x144)](_0x5f5309(0x175)+util[_0x5f5309(0xd7)](_0x379820));}}return null;}static[a64_0x3e5d30(0x10a)](_0x320872){const _0x3841d7=a64_0x3e5d30,_0xba707e={};_0xba707e[_0x3841d7(0x14d)]=function(_0x5ae489,_0x3da8c1){return _0x5ae489>_0x3da8c1;},_0xba707e[_0x3841d7(0x12d)]=function(_0x86b928,_0x522659){return _0x86b928>_0x522659;};const _0x80feba=_0xba707e;try{if(!fs[_0x3841d7(0xb7)](_0x320872)||!fs[_0x3841d7(0xd9)](_0x320872)[_0x3841d7(0x176)]())return'';const _0x5d3390=fs[_0x3841d7(0xc2)](_0x320872)[_0x3841d7(0x107)](_0x25dab0=>path['join'](_0x320872,_0x25dab0))[_0x3841d7(0xe0)](_0x29d486=>fs[_0x3841d7(0xd9)](_0x29d486)[_0x3841d7(0xc9)]()&&path[_0x3841d7(0x168)](_0x29d486)[_0x3841d7(0x165)](_0x3841d7(0x160)));if(_0x80feba[_0x3841d7(0x12d)](_0x5d3390['length'],0x0)){const _0x1a3435=_0x5d3390['map'](_0x1291ce=>({'filePath':_0x1291ce,'mtime':fs[_0x3841d7(0xd9)](_0x1291ce)['mtime']}))[_0x3841d7(0xc3)]((_0x1e2ec6,_0x419115)=>{const _0x20de4a=_0x3841d7;if(!_0x1e2ec6||!_0x1e2ec6[_0x20de4a(0x110)])return _0x419115;if(_0x80feba[_0x20de4a(0x14d)](_0x419115[_0x20de4a(0x110)],_0x1e2ec6[_0x20de4a(0x110)]))return _0x419115;return _0x1e2ec6;},{});return _0x1a3435?_0x1a3435['filePath']:'';}return'';}catch(_0x20a5bf){return logger[_0x3841d7(0x144)](_0x3841d7(0x112)+util[_0x3841d7(0xd7)](_0x20a5bf)),'';}}static [a64_0x3e5d30(0x104)]=async(_0x5abadd,_0x2ea9d4)=>{const _0x34bfb4=a64_0x3e5d30,_0x4aaffe={'ehhKz':function(_0x34548f,_0x49ed21,_0x2bd04c,_0x3f3f59,_0x130350){return _0x34548f(_0x49ed21,_0x2bd04c,_0x3f3f59,_0x130350);},'pOclj':_0x34bfb4(0xb4)},_0x5ea73b={};_0x5ea73b['qs']=_0x5abadd;const _0x45ffb9=await _0x4aaffe[_0x34bfb4(0x140)](nodeRequest,_0x4aaffe[_0x34bfb4(0xe8)],UPDATED_CLI_ENDPOINT,_0x5ea73b,_0x2ea9d4);return logger[_0x34bfb4(0x11e)]('response\x20'+JSON[_0x34bfb4(0x132)](_0x45ffb9)),_0x45ffb9;};static[a64_0x3e5d30(0x147)](_0x1a0b78){const _0x2d3e9d=a64_0x3e5d30;try{const _0x595f78=fs['openSync'](_0x1a0b78,'r+');return fs[_0x2d3e9d(0x129)](_0x595f78),![];}catch(_0x2251c4){if(BINARY_BUSY_ERROR_CODES[_0x2d3e9d(0xf5)](_0x2251c4[_0x2d3e9d(0xf2)]))return logger[_0x2d3e9d(0x11e)](_0x2d3e9d(0xb2)+_0x1a0b78),!![];return logger[_0x2d3e9d(0x11e)](_0x2d3e9d(0x15a)+_0x2251c4[_0x2d3e9d(0xd0)]),![];}}static[a64_0x3e5d30(0x146)](_0x2107cc,_0x2f63c0=''){const _0x2090b7=a64_0x3e5d30,_0x36a3b0={'hjwou':_0x2090b7(0x127),'XkSna':function(_0x29b8e0,_0x4bcc4d){return _0x29b8e0(_0x4bcc4d);},'faZWy':'SHELL_EXECUTE_ERROR','zifdH':function(_0x1f1fe6,_0x12ac43,_0x294ed0,_0x10f26b){return _0x1f1fe6(_0x12ac43,_0x294ed0,_0x10f26b);},'JCPuw':'error'};return new Promise((_0x40b8ed,_0x5f34c4)=>{const _0x108142=_0x2090b7,_0x377275={'aptiQ':_0x36a3b0[_0x108142(0x120)],'ZYuGv':function(_0x138d99,_0x4feda6){const _0x22d863=_0x108142;return _0x36a3b0[_0x22d863(0x161)](_0x138d99,_0x4feda6);},'ktNQQ':function(_0x3103c4,_0x24da51){const _0x490207=_0x108142;return _0x36a3b0[_0x490207(0x161)](_0x3103c4,_0x24da51);},'qnldC':_0x36a3b0[_0x108142(0x108)],'XnXzK':function(_0x310c4a,_0x1cab3f){const _0x4932d9=_0x108142;return _0x36a3b0[_0x4932d9(0x161)](_0x310c4a,_0x1cab3f);}},_0x57c83a={};_0x57c83a['cwd']=_0x2f63c0,_0x57c83a[_0x108142(0xbd)]=0x1388;const _0xe2aacc=_0x36a3b0[_0x108142(0xc1)](exec,_0x2107cc,_0x57c83a,(_0x256e90,_0x3b25c5,_0x3b8854)=>{const _0x1f317e=_0x108142;if(_0x256e90){if(_0x2107cc['includes'](_0x377275[_0x1f317e(0xee)])&&(_0x3b25c5[_0x1f317e(0xfd)]()||_0x3b8854['trim']())){const _0xcb60a0=_0x3b25c5[_0x1f317e(0xfd)]()||_0x3b8854['trim']();logger[_0x1f317e(0x11e)](_0x1f317e(0xf8)+_0xcb60a0+'\x22'),_0x377275[_0x1f317e(0x126)](_0x40b8ed,_0xcb60a0);}else _0x377275[_0x1f317e(0xcb)](_0x40b8ed,_0x3b8854[_0x1f317e(0xfd)]()||_0x377275[_0x1f317e(0xdc)]);}else logger[_0x1f317e(0x11e)](_0x1f317e(0xe1)+_0x3b25c5['trim']()+'\x22'),_0x377275['XnXzK'](_0x40b8ed,_0x3b25c5[_0x1f317e(0xfd)]());});_0xe2aacc['on'](_0x36a3b0['JCPuw'],()=>{_0x377275['ZYuGv'](_0x40b8ed,_0x377275['qnldC']);});});}static [a64_0x3e5d30(0x12e)]=async(_0x46f153,_0x142992)=>{const _0x1f5baa=a64_0x3e5d30,_0x29c67f={'ciJst':_0x1f5baa(0x149),'ZtkBf':function(_0x10d57c,_0x1fff7d){return _0x10d57c(_0x1fff7d);},'QdOjm':_0x1f5baa(0xd6),'BgYqf':_0x1f5baa(0x144),'vUdvk':_0x1f5baa(0x11c)};PerformanceTester[_0x1f5baa(0x142)](PerformanceEvents[_0x1f5baa(0xb1)]),logger[_0x1f5baa(0x11e)](_0x1f5baa(0x15f)+_0x46f153);try{const _0x3980e8=url[_0x1f5baa(0x13f)](_0x46f153),_0x2c3efb=path[_0x1f5baa(0xb5)](_0x142992,_0x29c67f['vUdvk']),_0x3920ff=fs[_0x1f5baa(0xe6)](_0x2c3efb);return new Promise((_0x2a574c,_0x4dff91)=>{const _0x22d961=_0x1f5baa,_0x444933={'cVyjI':_0x29c67f[_0x22d961(0x172)],'Uqpnf':function(_0x55c5ec,_0x2e87fd){const _0x10d6ea=_0x22d961;return _0x29c67f[_0x10d6ea(0x177)](_0x55c5ec,_0x2e87fd);},'HSlGQ':_0x29c67f[_0x22d961(0xba)],'jbpTX':_0x29c67f[_0x22d961(0x135)],'bfvBh':function(_0x21c5de,_0x48328a){const _0x4dff24=_0x22d961;return _0x29c67f[_0x4dff24(0x177)](_0x21c5de,_0x48328a);}};https['get'](_0x3980e8,function(_0x31904f){const _0x3738eb=_0x22d961,_0x513b2a=null;_0x31904f[_0x3738eb(0xd4)](_0x3920ff),_0x31904f['on'](_0x444933[_0x3738eb(0xca)],function(_0x5b6c01){const _0xe6f926=_0x3738eb;logger['error'](util[_0xe6f926(0xd7)](_0x444933['cVyjI'],_0x5b6c01)),PerformanceTester[_0xe6f926(0xab)](PerformanceEvents['SDK_CLI_DOWNLOAD'],![],util[_0xe6f926(0xd7)](_0x5b6c01)),_0x444933[_0xe6f926(0x128)](_0x4dff91,_0x5b6c01);}),_0x3920ff['on'](_0x444933[_0x3738eb(0xca)],function(_0x3a5569){const _0x3fe3d2=_0x3738eb;logger['error'](util[_0x3fe3d2(0xd7)](_0x444933[_0x3fe3d2(0xcf)],_0x3a5569)),PerformanceTester[_0x3fe3d2(0xab)](PerformanceEvents[_0x3fe3d2(0xb1)],![],util[_0x3fe3d2(0xd7)](_0x3a5569)),_0x444933[_0x3fe3d2(0x128)](_0x4dff91,_0x3a5569);}),CLIUtils[_0x3738eb(0x102)](_0x3920ff,_0x513b2a,_0x2c3efb,_0x142992,_0x2a574c,_0x4dff91),PerformanceTester[_0x3738eb(0xab)](PerformanceEvents[_0x3738eb(0xb1)]);})['on'](_0x29c67f[_0x22d961(0x135)],function(_0xbbc1e2){const _0xd0437=_0x22d961;logger[_0xd0437(0x144)](_0xd0437(0x11b)+util['format'](_0xbbc1e2)),PerformanceTester[_0xd0437(0xab)](PerformanceEvents[_0xd0437(0xb1)],![],util[_0xd0437(0xd7)](_0xbbc1e2)),_0x444933[_0xd0437(0xc8)](_0x4dff91,_0xbbc1e2);});});}catch(_0x584b69){PerformanceTester[_0x1f5baa(0xab)](PerformanceEvents[_0x1f5baa(0xb1)],![],util[_0x1f5baa(0xd7)](_0x584b69)),logger[_0x1f5baa(0x11e)]('Failed\x20to\x20download\x20binary,\x20Exception:\x20'+util[_0x1f5baa(0xd7)](_0x584b69));}};static['downloadFileStream'](_0xa760ec,_0x410a76,_0x2b1a1b,_0x24328d,_0x39eaaa,_0x3b6e8f){const _0x5440e3=a64_0x3e5d30,_0x13c537={'smtDJ':function(_0x3a7fc7,_0x4708f1){return _0x3a7fc7(_0x4708f1);},'qvcpH':_0x5440e3(0xab),'VtpIi':function(_0x49ef7d,_0xe1e6e){return _0x49ef7d(_0xe1e6e);},'OxmkQ':_0x5440e3(0x144),'eEvQw':function(_0x591202,_0x496ff2){return _0x591202===_0x496ff2;},'Ikdly':function(_0xe249f5,_0x4290d6){return _0xe249f5(_0x4290d6);},'wGovr':_0x5440e3(0x11f),'GSizc':function(_0x4fcccc,_0x429500){return _0x4fcccc(_0x429500);},'lgOpt':'0755','ZEktl':_0x5440e3(0xbe)};_0xa760ec['on'](_0x13c537[_0x5440e3(0xef)],function(){const _0x4c21dd=_0x5440e3,_0x4f835c={'zRJZs':function(_0x1105b5,_0x246721){const _0x32a3fd=a64_0x5c68;return _0x13c537[_0x32a3fd(0xc6)](_0x1105b5,_0x246721);},'RvVBj':_0x13c537[_0x4c21dd(0x118)]},_0x418a19={};_0x418a19[_0x4c21dd(0x16b)]=!![],yauzl[_0x4c21dd(0xfa)](_0x2b1a1b,_0x418a19,function(_0x226475,_0x528fc5){const _0x3d7369=_0x4c21dd,_0x2544d8={'kHphQ':function(_0xc37371,_0x41aa06){const _0x1c1e23=a64_0x5c68;return _0x13c537[_0x1c1e23(0x106)](_0xc37371,_0x41aa06);},'PhWqc':function(_0x91b3ee,_0x446ff0){const _0x1bf7dc=a64_0x5c68;return _0x13c537[_0x1bf7dc(0x106)](_0x91b3ee,_0x446ff0);},'UfHED':_0x13c537['qvcpH'],'TjgLU':function(_0x34b6cc,_0x31503b){const _0xdfd856=a64_0x5c68;return _0x13c537[_0xdfd856(0xbc)](_0x34b6cc,_0x31503b);},'qZfHx':_0x13c537['OxmkQ'],'nxIlf':function(_0x4cce8e,_0x31d0c2){const _0x1193b0=a64_0x5c68;return _0x13c537[_0x1193b0(0x100)](_0x4cce8e,_0x31d0c2);},'Xmyop':function(_0xfaebe7,_0x57a0f5){return _0x13c537['VtpIi'](_0xfaebe7,_0x57a0f5);}};_0x226475&&_0x13c537[_0x3d7369(0xbb)](_0x3b6e8f,_0x226475),_0x528fc5[_0x3d7369(0x136)](),_0x528fc5['on'](_0x13c537[_0x3d7369(0x174)],_0x174b72=>{const _0x56c7e0=_0x3d7369,_0x53396c={'KrzJZ':function(_0x55656b,_0x293085){return _0x2544d8['PhWqc'](_0x55656b,_0x293085);},'TRMmX':_0x2544d8[_0x56c7e0(0x155)]};!_0x410a76&&(_0x410a76=_0x174b72[_0x56c7e0(0x12c)]);if(/\/$/[_0x56c7e0(0x148)](_0x174b72[_0x56c7e0(0x12c)]))_0x528fc5[_0x56c7e0(0x136)]();else{const _0x56827d=_0x174b72[_0x56c7e0(0x12c)],_0x12e955=path[_0x56c7e0(0xb5)](_0x24328d,_0x56827d);let _0x38b2cb;try{_0x38b2cb=fs['createWriteStream'](_0x12e955);}catch(_0x3fbab6){if(BINARY_BUSY_ERROR_CODES[_0x56c7e0(0xf5)](_0x3fbab6['code'])){logger[_0x56c7e0(0x101)](_0x56c7e0(0xd3)+_0x56827d),fs['unlink'](_0x2b1a1b,_0x4bba24=>{const _0x4b52b6=_0x56c7e0;_0x4bba24&&logger['warn'](_0x4b52b6(0x143)+_0x2b1a1b);}),_0x2544d8[_0x56c7e0(0x15d)](_0x39eaaa,_0x12e955);return;}_0x2544d8[_0x56c7e0(0x13e)](_0x3b6e8f,_0x3fbab6);return;}_0x38b2cb['on'](_0x2544d8['qZfHx'],_0x37040f=>{const _0x34e387=_0x56c7e0;BINARY_BUSY_ERROR_CODES[_0x34e387(0xf5)](_0x37040f[_0x34e387(0xf2)])?(logger[_0x34e387(0x101)](_0x34e387(0x103)+_0x37040f[_0x34e387(0xd0)]),_0x38b2cb[_0x34e387(0xbe)](),fs['unlink'](_0x2b1a1b,_0x1230dd=>{const _0x262e13=_0x34e387;_0x1230dd&&logger[_0x262e13(0x101)]('Failed\x20to\x20delete\x20zip\x20file:\x20'+_0x2b1a1b);}),_0x2544d8[_0x34e387(0x15d)](_0x39eaaa,_0x12e955)):_0x2544d8[_0x34e387(0x15d)](_0x3b6e8f,_0x37040f);}),_0x528fc5[_0x56c7e0(0x10b)](_0x174b72,function(_0x16c6f4,_0x204377){const _0xb13b4=_0x56c7e0;_0x16c6f4&&_0x53396c[_0xb13b4(0x115)](_0x3b6e8f,_0x16c6f4),_0x204377['on'](_0x53396c[_0xb13b4(0x13b)],function(){const _0x3a9d3e=_0xb13b4;_0x38b2cb[_0x3a9d3e(0xbe)](),_0x528fc5[_0x3a9d3e(0x136)]();}),_0x204377[_0xb13b4(0xd4)](_0x38b2cb);}),_0x2544d8[_0x56c7e0(0xae)](_0x174b72[_0x56c7e0(0x12c)],_0x410a76)&&_0x528fc5[_0x56c7e0(0xbe)]();}}),_0x528fc5['on'](_0x13c537[_0x3d7369(0xec)],_0x2f8bc2=>{_0x4f835c['zRJZs'](_0x3b6e8f,_0x2f8bc2);}),_0x528fc5[_0x3d7369(0xf3)](_0x13c537[_0x3d7369(0x10e)],()=>{const _0x19d7aa=_0x3d7369;fs[_0x19d7aa(0x137)](_0x2b1a1b,_0x12f63a=>{const _0x282959=_0x19d7aa;_0x12f63a&&logger[_0x282959(0x101)](_0x282959(0x143)+_0x2b1a1b);}),fs[_0x19d7aa(0xce)](path[_0x19d7aa(0xb5)](_0x24328d,_0x410a76),_0x4f835c['RvVBj'],function(_0x33b01c){const _0x59546f=_0x19d7aa;_0x33b01c&&_0x2544d8['TjgLU'](_0x3b6e8f,_0x33b01c),_0x2544d8[_0x59546f(0x124)](_0x39eaaa,path[_0x59546f(0xb5)](_0x24328d,_0x410a76));}),_0x528fc5['close']();});});});}static[a64_0x3e5d30(0xeb)](){const _0x2da930=a64_0x3e5d30;if(process[_0x2da930(0xfb)][_0x2da930(0xcc)])return JSON[_0x2da930(0x13f)](process[_0x2da930(0xfb)][_0x2da930(0xcc)]);return this['testFrameworkDetail'];}static['getAutomationFrameworkDetail'](){const _0x3170cd=a64_0x3e5d30;if(process[_0x3170cd(0xfb)]['BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL'])return JSON['parse'](process[_0x3170cd(0xfb)][_0x3170cd(0x14e)]);return this[_0x3170cd(0xb0)];}static[a64_0x3e5d30(0x14b)](_0x30fe77,_0x3650bd){const _0xdad1b=a64_0x3e5d30,_0x381d99={'NEoYV':_0xdad1b(0x134),'XkwBp':function(_0xcd981b,_0x4e6bb9){return _0xcd981b(_0x4e6bb9);},'xPLDS':function(_0x43e396,_0x4be305){return _0x43e396||_0x4be305;},'ghglC':function(_0x5ad746,_0x1cc952){return _0x5ad746(_0x1cc952);}},_0x3b76b4=_0x381d99['NEoYV'][_0xdad1b(0xed)]('|');let _0x19ccf7=0x0;while(!![]){switch(_0x3b76b4[_0x19ccf7++]){case'0':process['env']['BROWSERSTACK_TEST_FRAMEWORK_DETAIL']=JSON[_0xdad1b(0x132)](this['testFrameworkDetail']);continue;case'1':this[_0xdad1b(0xb0)]={'name':_0x3650bd,'version':_0x381d99[_0xdad1b(0xde)](getFrameworkVersion,_0x3650bd)};continue;case'2':process[_0xdad1b(0xfb)][_0xdad1b(0x14e)]=JSON[_0xdad1b(0x132)](this[_0xdad1b(0xb0)]);continue;case'3':_0x381d99['xPLDS'](!_0x30fe77,!_0x3650bd)&&logger[_0xdad1b(0x11e)](_0xdad1b(0x156)+_0x30fe77+',\x20automationFramework='+_0x3650bd);continue;case'4':this[_0xdad1b(0x11a)]={'name':_0x30fe77,'version':{[_0x30fe77]:_0x381d99['ghglC'](getFrameworkVersion,_0x30fe77)}};continue;}break;}}static[a64_0x3e5d30(0x105)](_0x1191ce,_0x47eec9){return _0x1191ce+':'+_0x47eec9;}static['getCurrentInstanceName'](){const _0x7f59d6=a64_0x3e5d30;return process[_0x7f59d6(0x145)]+':'+threadId;}static[a64_0x3e5d30(0x150)](_0x4c5de5){const _0x403901=a64_0x3e5d30;if(_0x4c5de5['testContextOptions']&&_0x4c5de5[_0x403901(0xbf)][_0x403901(0x111)])return!![];return![];}static[a64_0x3e5d30(0x117)](_0x35db0e){if(_0x35db0e['testContextOptions']&&_0x35db0e['testContextOptions']['skipSessionStatus'])return!![];return![];}static['matchHookRegex'](_0x3fe968){const _0xcba769=a64_0x3e5d30,_0xdc2bb5=new RegExp(TestFrameworkConstants[_0xcba769(0x154)]);return _0xdc2bb5[_0xcba769(0x148)](_0x3fe968);}static[a64_0x3e5d30(0xaf)](_0x30f47b,_0x495d78){const _0x8dacbf=a64_0x3e5d30,_0xde7362={};_0xde7362[_0x8dacbf(0xfc)]=function(_0x18792a,_0x1674c6){return _0x18792a!==_0x1674c6;},_0xde7362['lEtCz']=function(_0x16263d,_0x1fc9f2){return _0x16263d===_0x1fc9f2;},_0xde7362[_0x8dacbf(0xfe)]=_0x8dacbf(0x164);const _0x55ba91=_0xde7362;for(const [_0x3ec172,_0x1f5853]of Object['entries'](_0x495d78)){if(_0x55ba91[_0x8dacbf(0xfc)](_0x1f5853,null)&&_0x55ba91[_0x8dacbf(0x159)](typeof _0x1f5853,_0x55ba91[_0x8dacbf(0xfe)])&&!Array['isArray'](_0x1f5853))_0x30f47b[_0x3ec172]=this[_0x8dacbf(0xaf)](_0x30f47b[_0x3ec172]||{},_0x1f5853);else Array['isArray'](_0x1f5853)?_0x30f47b[_0x3ec172]=(_0x30f47b[_0x3ec172]||[])[_0x8dacbf(0x169)](_0x1f5853):_0x30f47b[_0x3ec172]=_0x1f5853;}return _0x30f47b;}}module[a64_0x3e5d30(0x15e)]=CLIUtils;function a64_0x1004(){const _0x56f006=['Got\x20Error\x20while\x20downloading\x20percy\x20binary\x20file\x20%s','format','Folder\x20','statSync','vsGwJ','TlVTW','qnldC','yauzl','XkwBp','Unable\x20to\x20set\x20required\x20permissions\x20to\x20','filter','Resolving\x20with\x20stdout:\x20\x22','Setting\x20required\x20permissions\x20to\x20','../../helpers/utilities','../../helpers/performance/constants','../../helpers/classLogger.js','createWriteStream','ffbij','pOclj','8AonHNv','../../helpers/test-observability/utils.js','getTestFrameworkDetail','OxmkQ','split','aptiQ','ZEktl','TEFFo','jKyij','code','once','Folder\x20does\x20not\x20exist:\x20','includes','CLIUtils','info','CLI\x20version\x20found\x20despite\x20error:\x20\x22','rkAyG','open','env','LcHkZ','trim','uXjLu','VKodh','eEvQw','warn','downloadFileStream','Binary\x20file\x20became\x20busy\x20during\x20write,\x20continuing\x20with\x20existing\x20binary:\x20','requestToUpdateCLI','getHookRegistryKey','smtDJ','map','faZWy','getSdkVersion','getExistingCliPath','openReadStream','arch','./state/hookState.js','qvcpH','cli','mtime','skipSessionName','Error\x20while\x20reading\x20CLI\x20path:\x20','./framework/constants/testFrameworkConstants.js','139869opzouf','KrzJZ','Configuring\x20Cli\x20path.','shouldSkipSessionStatus','lgOpt','YtwrP','testFrameworkDetail','Got\x20Error\x20in\x20percy\x20binary\x20downloading\x20request\x20','downloaded_file.zip','SDK_CLI_CHECK_UPDATE','debug','entry','hjwou','201559aflKbm','tupaV','../../helpers/performance/performance-tester.js','Xmyop','../utils/apiUtilityMethods.js','ZYuGv','version','Uqpnf','closeSync','./state/testFrameworkState.js','Development\x20Cli\x20Path:\x20','fileName','yQVst','downloadLatestBinary','1257460QtYAqO','unix:/tmp/sdk-platform-','node','stringify','tmpdir','3|4|1|2|0','BgYqf','readEntry','unlink','BROWSERSTACK_BINARY_URL','bVxqH','qXpaX','TRMmX','mNvJQ','63270KjgREY','TjgLU','parse','ehhKz','cli_version','start','Failed\x20to\x20delete\x20zip\x20file:\x20','error','pid','runShellCommand','isBinaryBusy','test','Got\x20Error\x20in\x20percy\x20binary\x20download\x20response\x20%s','checkAndUpdateCli','setFrameworkDetail','child_process','viGBA','BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL','405MODEAF','shouldSkipSessionName','107720wUUKPe','Current\x20CLI\x20Path\x20Found:\x20','./instances/testFrameworkInstance.js','HOOK_REGEX','UfHED','Test\x20or\x20Automation\x20framework\x20not\x20provided\x20testFramework=','homedir','getCLIParamsForDevEnv','lEtCz','Error\x20checking\x20if\x20binary\x20is\x20busy:\x20','CtgrF','Need\x20to\x20update\x20binary,\x20current\x20binary\x20version:\x20','kHphQ','exports','Downloading\x20SDK\x20binary\x20from:\x20','binary-','XkSna','data','sQHqi','object','startsWith','3253089tqBREp','util','basename','concat','roJHh','lazyEntries','url','platform','development','getWritableDir','.sock','BROWSERSTACK_CLI_ENV','ciJst','QJpxM','wGovr','Unable\x20to\x20get\x20writable\x20directory,\x20exception\x20','isDirectory','ZtkBf','FCWZL','end','getCliDir','fpesD','nxIlf','mergeObject','automationFrameworkDetail','SDK_CLI_DOWNLOAD','Binary\x20is\x20busy:\x20','setupCliPath','GET','join','259900ZaSZzs','existsSync','No\x20writable\x20directory\x20available\x20for\x20the\x20CLI','../utils/constants','QdOjm','Ikdly','VtpIi','timeout','close','testContextOptions','VMHEO','zifdH','readdirSync','reduce','worker_threads','listen','GSizc','follow-redirects','bfvBh','isFile','jbpTX','ktNQQ','BROWSERSTACK_TEST_FRAMEWORK_DETAIL','SDK_CLI_BIN_PATH','chmod','HSlGQ','message','../../helpers/helper','Existing\x20binary\x20is\x20currently\x20in\x20use,\x20skipping\x20update\x20and\x20continuing\x20with\x20current\x20version:\x20','Binary\x20file\x20is\x20currently\x20in\x20use,\x20skipping\x20download\x20and\x20continuing\x20with\x20existing\x20binary:\x20','pipe','../../../package.json'];a64_0x1004=function(){return _0x56f006;};return a64_0x1004();}