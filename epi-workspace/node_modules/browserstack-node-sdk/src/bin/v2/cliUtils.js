const a64_0x53db1c=a64_0x59c7;(function(_0x158213,_0x5a3d43){const _0xf4fe45=a64_0x59c7,_0x28a94a=_0x158213();while(!![]){try{const _0x1f232a=parseInt(_0xf4fe45(0x1ad))/0x1+-parseInt(_0xf4fe45(0x1a4))/0x2*(-parseInt(_0xf4fe45(0x12c))/0x3)+-parseInt(_0xf4fe45(0x159))/0x4+parseInt(_0xf4fe45(0x182))/0x5+-parseInt(_0xf4fe45(0x18f))/0x6*(parseInt(_0xf4fe45(0x178))/0x7)+-parseInt(_0xf4fe45(0x12e))/0x8*(parseInt(_0xf4fe45(0x1b1))/0x9)+parseInt(_0xf4fe45(0x14e))/0xa;if(_0x1f232a===_0x5a3d43)break;else _0x28a94a['push'](_0x28a94a['shift']());}catch(_0x1c752f){_0x28a94a['push'](_0x28a94a['shift']());}}}(a64_0xb3e6,0xe0062));const fs=require('fs'),os=require('os'),url=require('url'),path=require(a64_0x53db1c(0x11b)),{exec}=require(a64_0x53db1c(0x128)),{https}=require(a64_0x53db1c(0x13f)),yauzl=require(a64_0x53db1c(0x158)),util=require(a64_0x53db1c(0x171)),{getFrameworkVersion}=require(a64_0x53db1c(0x126)),{threadId}=require(a64_0x53db1c(0x194)),PerformanceTester=require('../../helpers/performance/performance-tester.js'),{EVENTS:PerformanceEvents}=require('../../helpers/performance/constants'),{isNullOrEmpty,isModifiable,setReadWriteExecuteAccess}=require(a64_0x53db1c(0x138)),{isTrue,createDir,getHostInfo,nodeRequest,nestedKeyValue}=require(a64_0x53db1c(0x149)),{UPDATED_CLI_ENDPOINT,BINARY_BUSY_ERROR_CODES}=require(a64_0x53db1c(0x146)),{createClassLogger}=require(a64_0x53db1c(0x143)),TestFrameworkInstance=require(a64_0x53db1c(0x199)),HookState=require(a64_0x53db1c(0x1b3)),TestFrameworkState=require(a64_0x53db1c(0x141)),AutomationFrameworkState=require(a64_0x53db1c(0x14b)),TestFrameworkConstants=require(a64_0x53db1c(0x130)),logger=createClassLogger(a64_0x53db1c(0x140)),{getBStackAPIUrl}=require(a64_0x53db1c(0x116));function a64_0x59c7(_0x214663,_0x136cbd){const _0xb3e690=a64_0xb3e6();return a64_0x59c7=function(_0x59c745,_0x20fa13){_0x59c745=_0x59c745-0xf1;let _0x839b1e=_0xb3e690[_0x59c745];return _0x839b1e;},a64_0x59c7(_0x214663,_0x136cbd);}function a64_0xb3e6(){const _0x50844e=['test','Downloading\x20SDK\x20binary\x20from:\x20','zfhOi','.browserstack','BROWSERSTACK_CLI_ENV','setupCliPath','CbIGT','downloadLatestBinary','Development\x20Cli\x20Path:\x20','mtime','getAutomationFrameworkDetail','qJGuC','CCVKA','join','closeSync','info','Error\x20while\x20reading\x20CLI\x20path:\x20','tBiEJ','node','entries','xPMXa','Current\x20CLI\x20Path\x20Found:\x20','lzCRu','format','avLcX','eGirM','1|4|2|0|3','SDK_CLI_DOWNLOAD','VUiYv','unix:/tmp/sdk-platform-','close','IkWob','BROWSERSTACK_TEST_FRAMEWORK_DETAIL','createWriteStream','fsgvR','RlJvA','fileName','WmPIT','debug','ZXxAl','automationFrameworkDetail','../utils/apiUtilityMethods.js','unlink','Unable\x20to\x20set\x20required\x20permissions\x20to\x20','checkAndUpdateCli','bQAlB','path','qwPWp','bnZBJ','code','pipe','SDK_CLI_CHECK_UPDATE','JUlZj','Resolved\x20binary\x20path:\x20','mKMGo','BROWSERSTACK_FILES_DIR','map','../../helpers/test-observability/utils.js','YaGWS','child_process','runShellCommand','testContextOptions','zhRcM','39chciTf','PgarS','56uqxsJP','testFrameworkDetail','./framework/constants/testFrameworkConstants.js','includes','Folder\x20',',\x20automationFramework=','get','isArray','AdbcZ','env','../../helpers/utilities','BROWSERSTACK_BINARY_URL','gQaFD','Existing\x20binary\x20is\x20currently\x20in\x20use,\x20skipping\x20update\x20and\x20continuing\x20with\x20current\x20version:\x20','Unable\x20to\x20get\x20writable\x20directory,\x20exception\x20','end','vslgL','follow-redirects','CLIUtils','./state/testFrameworkState.js','XsLoW','../../helpers/classLogger.js','downloaded_file.zip','tYita','../utils/constants','Resolving\x20with\x20stdout:\x20\x22','CmOOT','../../helpers/helper','Binary\x20is\x20busy:\x20','./state/automationFrameworkState.js','arch','version','22420060zdgbOM','open','length','SDK_CLI_BIN_PATH','Admof','aLGkA','openSync','cli','HOOK_REGEX','JNKrl','yauzl','3036032FLsDEO','DTPoI','aYduR','getSdkLanguage','url','VQXYb','getCurrentInstanceName','parse','isDirectory','Error\x20in\x20setting\x20up\x20cli\x20path\x20directory,\x20Exception:\x20','isFile','message','Test\x20or\x20Automation\x20framework\x20not\x20provided\x20testFramework=','ZQhQq','Got\x20Error\x20in\x20percy\x20binary\x20download\x20response\x20%s','error','LJDly','requestToUpdateCLI','once','SidEb','data','.sock','BFSVI','getExistingCliPath','util','existsSync','dkSGX','entry','BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL','No\x20writable\x20directory\x20available\x20for\x20the\x20CLI','cwd','182sdzpye','CLI\x20version\x20found\x20despite\x20error:\x20\x22','getCliDir','isBinaryBusy','Failed\x20to\x20delete\x20zip\x20file:\x20','tnsbf','GET','split','nDtho','getSdkVersion','4859345FHeejZ','mergeObject','lxCef','bdSdR','listen','Folder\x20does\x20not\x20exist:\x20','MatYW','ANEQk','Error\x20in\x20getting\x20writable\x20directory,\x20writableDir=','readdirSync','CImei','Binary\x20file\x20is\x20currently\x20in\x20use,\x20skipping\x20download\x20and\x20continuing\x20with\x20existing\x20binary:\x20','pJDLC','367134rkyldZ','Got\x20Error\x20in\x20percy\x20binary\x20downloading\x20request\x20','statSync','lazyEntries','BLJYY','worker_threads','warn','IhiJK','shouldSkipSessionName','FZnud','./instances/testFrameworkInstance.js','startsWith','trim','YlnNl','skipSessionName','sZcFg','lorbg','getWritableDir','openReadStream','shouldSkipSessionStatus','gzfLu','52616lwFeOW','MZOYt','cli_version','filter','getHookRegistryKey','Configuring\x20Cli\x20path.','SHELL_EXECUTE_ERROR','rGCOe','Got\x20Error\x20while\x20downloading\x20percy\x20binary\x20file\x20%s','1173028tJTeJH','Setting\x20required\x20permissions\x20to\x20','VuZOI','Eurim','1878921xnqGyI','lBPxI','./state/hookState.js','pid','0755','basename','matchHookRegex','readEntry','cAQiF','Binary\x20file\x20became\x20busy\x20during\x20write,\x20continuing\x20with\x20existing\x20binary:\x20','downloadFileStream','stringify','binary-','development','start'];a64_0xb3e6=function(){return _0x50844e;};return a64_0xb3e6();}class CLIUtils{[a64_0x53db1c(0x115)]={};[a64_0x53db1c(0x12f)]={};static['isDevelopmentEnv'](){const _0x30e744=a64_0x53db1c,_0x24d798={};_0x24d798[_0x30e744(0x145)]=function(_0x3e2663,_0x173621){return _0x3e2663===_0x173621;},_0x24d798[_0x30e744(0x1b2)]=_0x30e744(0x1be);const _0x2f033c=_0x24d798;return _0x2f033c[_0x30e744(0x145)](process['env'][_0x30e744(0xf1)],_0x2f033c[_0x30e744(0x1b2)]);}static['getCLIParamsForDevEnv'](){const _0x2e3367=a64_0x53db1c,_0x587434={};return _0x587434['id']=process['env'][_0x2e3367(0xf1)],_0x587434[_0x2e3367(0x186)]=_0x2e3367(0x10a)+process[_0x2e3367(0x137)][_0x2e3367(0xf1)]+_0x2e3367(0x16e),_0x587434;}static['getSdkVersion'](){const _0x618099=a64_0x53db1c,_0x20fa72={'MOyvh':function(_0x59822c,_0x12b0dd){return _0x59822c(_0x12b0dd);},'tnsbf':'../../../package.json'};return _0x20fa72['MOyvh'](require,_0x20fa72[_0x618099(0x17d)])[_0x618099(0x14d)];}static['getSdkLanguage'](){const _0x1ed729=a64_0x53db1c,_0x30beb8={};_0x30beb8[_0x1ed729(0x10c)]=_0x1ed729(0xff);const _0x48b666=_0x30beb8;return _0x48b666[_0x1ed729(0x10c)];}static async[a64_0x53db1c(0xf2)](_0x1914c7){const _0x51a94a=a64_0x53db1c,_0x5db4a2={'BFSVI':_0x51a94a(0x1a9),'dkSGX':function(_0x114dde,_0x500d8b){return _0x114dde(_0x500d8b);},'TFfnK':function(_0x1e6ca9,_0xf4213b){return _0x1e6ca9(_0xf4213b);},'mKMGo':_0x51a94a(0x176)};logger[_0x51a94a(0x113)](_0x5db4a2[_0x51a94a(0x16f)]);const _0x8f579f=process['env'][_0x51a94a(0x151)];if(!_0x5db4a2[_0x51a94a(0x173)](isNullOrEmpty,_0x8f579f))return logger[_0x51a94a(0x113)](_0x51a94a(0xf5)+_0x8f579f),_0x8f579f;try{const _0x2b4465=this['getCliDir']();if(_0x5db4a2['TFfnK'](isNullOrEmpty,_0x2b4465))throw new Error(_0x5db4a2[_0x51a94a(0x123)]);const _0x10a558=this[_0x51a94a(0x170)](_0x2b4465),_0x1f833b=await this[_0x51a94a(0x119)](_0x10a558,_0x2b4465,_0x1914c7);return logger[_0x51a94a(0x113)](_0x51a94a(0x122)+_0x1f833b),_0x1f833b;}catch(_0x1c25cd){logger[_0x51a94a(0x113)](_0x51a94a(0x162)+util['format'](_0x1c25cd));}return null;}static async[a64_0x53db1c(0x119)](_0x3b6961,_0x26ebfb,_0xd2a81d){const _0x3fac3b=a64_0x53db1c,_0x687a={'vslgL':function(_0x46e031){return _0x46e031();},'gzfLu':function(_0x2b9312,_0x40a632){return _0x2b9312(_0x40a632);},'ZQhQq':function(_0x36273f,_0x16d6f4,_0x9cf660){return _0x36273f(_0x16d6f4,_0x9cf660);},'BLJYY':_0x3fac3b(0x16d),'WmPIT':'url'};PerformanceTester[_0x3fac3b(0x1bf)](PerformanceEvents[_0x3fac3b(0x120)]),logger[_0x3fac3b(0xfc)](_0x3fac3b(0x102)+_0x3b6961);const _0x5ea368=_0x687a[_0x3fac3b(0x13e)](getHostInfo),_0x4b9909={'sdk_version':CLIUtils[_0x3fac3b(0x181)](),'os':_0x5ea368['platform'],'os_arch':_0x5ea368[_0x3fac3b(0x14c)],'cli_version':'0','sdk_language':this[_0x3fac3b(0x15c)]()};!_0x687a[_0x3fac3b(0x1a3)](isNullOrEmpty,_0x3b6961)&&(_0x4b9909[_0x3fac3b(0x1a6)]=await this[_0x3fac3b(0x129)](_0x3b6961+'\x20version'));const _0x29cecb=await this[_0x3fac3b(0x16a)](_0x4b9909,_0xd2a81d);process[_0x3fac3b(0x137)][_0x3fac3b(0x139)]&&(logger[_0x3fac3b(0xfc)]('Using\x20BROWSERSTACK_BINARY_URL\x20from\x20env\x20variable:\x20'+process['env'][_0x3fac3b(0x139)]),_0x29cecb[_0x3fac3b(0x16d)][_0x3fac3b(0x15d)]=process['env']['BROWSERSTACK_BINARY_URL']);if(_0x687a[_0x3fac3b(0x166)](nestedKeyValue,_0x29cecb,[_0x687a[_0x3fac3b(0x193)],_0x687a[_0x3fac3b(0x112)]])){logger[_0x3fac3b(0x113)]('Need\x20to\x20update\x20binary,\x20current\x20binary\x20version:\x20'+_0x4b9909[_0x3fac3b(0x1a6)]);if(!_0x687a[_0x3fac3b(0x1a3)](isNullOrEmpty,_0x3b6961)&&this[_0x3fac3b(0x17b)](_0x3b6961))return logger[_0x3fac3b(0x195)](_0x3fac3b(0x13b)+_0x3b6961),PerformanceTester[_0x3fac3b(0x13d)](PerformanceEvents[_0x3fac3b(0x120)]),_0x3b6961;const _0x41eee8=await this[_0x3fac3b(0xf4)](_0x687a[_0x3fac3b(0x166)](nestedKeyValue,_0x29cecb,[_0x687a[_0x3fac3b(0x193)],_0x687a[_0x3fac3b(0x112)]]),_0x26ebfb);return PerformanceTester['end'](PerformanceEvents[_0x3fac3b(0x120)]),_0x41eee8;}return PerformanceTester[_0x3fac3b(0x13d)](PerformanceEvents[_0x3fac3b(0x120)]),_0x3b6961;}static[a64_0x53db1c(0x17a)](){const _0x3ec129=a64_0x53db1c,_0x2560a2={'sZcFg':function(_0x7edae,_0x305931){return _0x7edae(_0x305931);},'SidEb':_0x3ec129(0x176),'tBiEJ':_0x3ec129(0x155),'gQaFD':function(_0x313ba2,_0x131770){return _0x313ba2(_0x131770);}},_0x41e3de=this[_0x3ec129(0x1a0)]();try{if(_0x2560a2[_0x3ec129(0x19e)](isNullOrEmpty,_0x41e3de))throw new Error(_0x2560a2[_0x3ec129(0x16c)]);const _0x38403d=path[_0x3ec129(0xfa)](_0x41e3de,_0x2560a2[_0x3ec129(0xfe)]);return!fs[_0x3ec129(0x172)](_0x38403d)&&_0x2560a2[_0x3ec129(0x13a)](createDir,_0x38403d),_0x38403d;}catch(_0x2f2de0){logger[_0x3ec129(0x113)](_0x3ec129(0x18a)+util[_0x3ec129(0x104)](_0x2f2de0));}}static['getWritableDir'](){const _0x5b18f5=a64_0x53db1c,_0x2b2ad0={'bnZBJ':_0x5b18f5(0x1c3),'avLcX':function(_0x2470d4,_0x2540af){return _0x2470d4(_0x2540af);},'CImei':function(_0x17cd36,_0x4dd86e){return _0x17cd36(_0x4dd86e);},'GEwOM':function(_0x220df3,_0x1ed535){return _0x220df3(_0x1ed535);},'fsgvR':function(_0x4296ac,_0x1cd169){return _0x4296ac(_0x1cd169);},'Admof':function(_0x3d0951,_0x275144){return _0x3d0951(_0x275144);}},_0xeeb813=[process[_0x5b18f5(0x137)][_0x5b18f5(0x124)],path[_0x5b18f5(0xfa)](os['homedir'](),_0x2b2ad0[_0x5b18f5(0x11d)]),path[_0x5b18f5(0xfa)](os['tmpdir'](),_0x2b2ad0[_0x5b18f5(0x11d)])];for(const _0x3c6c31 of _0xeeb813){if(_0x2b2ad0[_0x5b18f5(0x105)](isNullOrEmpty,_0x3c6c31))continue;try{if(fs[_0x5b18f5(0x172)](_0x3c6c31)){logger['debug'](_0x5b18f5(0x132)+_0x3c6c31+'\x20already\x20exists');if(!_0x2b2ad0[_0x5b18f5(0x18c)](isModifiable,_0x3c6c31)){logger[_0x5b18f5(0x113)](_0x5b18f5(0x1ae)+_0x3c6c31);const _0x2af7b1=_0x2b2ad0['GEwOM'](setReadWriteExecuteAccess,_0x3c6c31);if(!_0x2b2ad0[_0x5b18f5(0x18c)](isTrue,_0x2af7b1)){logger[_0x5b18f5(0x195)](_0x5b18f5(0x118)+_0x3c6c31);continue;}}}else{logger['debug'](_0x5b18f5(0x187)+_0x3c6c31),_0x2b2ad0['fsgvR'](createDir,_0x3c6c31),logger[_0x5b18f5(0x113)](_0x5b18f5(0x1ae)+_0x3c6c31);const _0x2c05b1=_0x2b2ad0[_0x5b18f5(0x10f)](setReadWriteExecuteAccess,_0x3c6c31);!_0x2b2ad0[_0x5b18f5(0x152)](isTrue,_0x2c05b1)&&logger[_0x5b18f5(0x195)](_0x5b18f5(0x118)+_0x3c6c31);}return _0x3c6c31;}catch(_0x5d7979){logger[_0x5b18f5(0x168)](_0x5b18f5(0x13c)+util[_0x5b18f5(0x104)](_0x5d7979));}}return null;}static[a64_0x53db1c(0x170)](_0x3619b3){const _0x352f0e=a64_0x53db1c,_0x4f7f70={};_0x4f7f70[_0x352f0e(0x103)]=function(_0x1e2d28,_0x1a280b){return _0x1e2d28>_0x1a280b;},_0x4f7f70[_0x352f0e(0x12d)]=function(_0x599138,_0x297168){return _0x599138>_0x297168;};const _0x321596=_0x4f7f70;try{if(!fs['existsSync'](_0x3619b3)||!fs[_0x352f0e(0x191)](_0x3619b3)[_0x352f0e(0x161)]())return'';const _0x28a233=fs[_0x352f0e(0x18b)](_0x3619b3)['map'](_0x2bb398=>path['join'](_0x3619b3,_0x2bb398))[_0x352f0e(0x1a7)](_0x958add=>fs[_0x352f0e(0x191)](_0x958add)[_0x352f0e(0x163)]()&&path[_0x352f0e(0x1b6)](_0x958add)[_0x352f0e(0x19a)](_0x352f0e(0x1bd)));if(_0x321596[_0x352f0e(0x12d)](_0x28a233[_0x352f0e(0x150)],0x0)){const _0x275211=_0x28a233[_0x352f0e(0x125)](_0x1e3507=>({'filePath':_0x1e3507,'mtime':fs[_0x352f0e(0x191)](_0x1e3507)['mtime']}))['reduce']((_0x10609c,_0x33faa3)=>{const _0x281b81=_0x352f0e;if(!_0x10609c||!_0x10609c['mtime'])return _0x33faa3;if(_0x321596[_0x281b81(0x103)](_0x33faa3[_0x281b81(0xf6)],_0x10609c[_0x281b81(0xf6)]))return _0x33faa3;return _0x10609c;},{});return _0x275211?_0x275211['filePath']:'';}return'';}catch(_0x3f8eed){return logger[_0x352f0e(0x168)](_0x352f0e(0xfd)+util[_0x352f0e(0x104)](_0x3f8eed)),'';}}static [a64_0x53db1c(0x16a)]=async(_0x4b6f74,_0x4ec93a)=>{const _0x4e028f=a64_0x53db1c,_0x4d941f={'YaGWS':function(_0x1c5d8a,_0xee6bfa,_0x55f529,_0x3d759d,_0x1c48f3){return _0x1c5d8a(_0xee6bfa,_0x55f529,_0x3d759d,_0x1c48f3);},'MZOYt':_0x4e028f(0x17e)},_0x40761d={};_0x40761d['qs']=_0x4b6f74;const _0x9265f=await _0x4d941f[_0x4e028f(0x127)](nodeRequest,_0x4d941f[_0x4e028f(0x1a5)],UPDATED_CLI_ENDPOINT,_0x40761d,_0x4ec93a);return logger[_0x4e028f(0x113)]('response\x20'+JSON[_0x4e028f(0x1bc)](_0x9265f)),_0x9265f;};static[a64_0x53db1c(0x17b)](_0x581e68){const _0x50b895=a64_0x53db1c;try{const _0x34f874=fs[_0x50b895(0x154)](_0x581e68,'r+');return fs[_0x50b895(0xfb)](_0x34f874),![];}catch(_0x2dc4b6){if(BINARY_BUSY_ERROR_CODES[_0x50b895(0x131)](_0x2dc4b6['code']))return logger[_0x50b895(0x113)](_0x50b895(0x14a)+_0x581e68),!![];return logger['debug']('Error\x20checking\x20if\x20binary\x20is\x20busy:\x20'+_0x2dc4b6[_0x50b895(0x164)]),![];}}static[a64_0x53db1c(0x129)](_0x23ea7b,_0x3f9b1a=''){const _0x4ea68c=a64_0x53db1c,_0x1c854f={'rGCOe':_0x4ea68c(0x14d),'RlJvA':function(_0x41c5ed,_0x798359){return _0x41c5ed(_0x798359);},'VUiYv':_0x4ea68c(0x1aa),'CbIGT':function(_0x364983,_0x12a0ad,_0x3a7ed5,_0x177e7a){return _0x364983(_0x12a0ad,_0x3a7ed5,_0x177e7a);},'nDtho':_0x4ea68c(0x168)};return new Promise((_0x275fb3,_0x2041e3)=>{const _0x44967a=_0x4ea68c,_0xc8da3b={};_0xc8da3b[_0x44967a(0x177)]=_0x3f9b1a,_0xc8da3b['timeout']=0x1388;const _0x1e2d0e=_0x1c854f[_0x44967a(0xf3)](exec,_0x23ea7b,_0xc8da3b,(_0x30b1c6,_0x5bec4d,_0x4aa9a5)=>{const _0x45cc27=_0x44967a;if(_0x30b1c6){if(_0x23ea7b[_0x45cc27(0x131)](_0x1c854f[_0x45cc27(0x1ab)])&&(_0x5bec4d[_0x45cc27(0x19b)]()||_0x4aa9a5[_0x45cc27(0x19b)]())){const _0x17aeaa=_0x5bec4d[_0x45cc27(0x19b)]()||_0x4aa9a5['trim']();logger[_0x45cc27(0x113)](_0x45cc27(0x179)+_0x17aeaa+'\x22'),_0x1c854f[_0x45cc27(0x110)](_0x275fb3,_0x17aeaa);}else _0x1c854f[_0x45cc27(0x110)](_0x275fb3,_0x4aa9a5[_0x45cc27(0x19b)]()||_0x1c854f[_0x45cc27(0x109)]);}else logger[_0x45cc27(0x113)](_0x45cc27(0x147)+_0x5bec4d['trim']()+'\x22'),_0x1c854f[_0x45cc27(0x110)](_0x275fb3,_0x5bec4d['trim']());});_0x1e2d0e['on'](_0x1c854f[_0x44967a(0x180)],()=>{const _0x1610e0=_0x44967a;_0x1c854f['RlJvA'](_0x275fb3,_0x1c854f[_0x1610e0(0x109)]);});});}static [a64_0x53db1c(0xf4)]=async(_0x20a75e,_0x4d331d)=>{const _0x2da9ac=a64_0x53db1c,_0x3fdba2={'eGirM':_0x2da9ac(0x167),'JSRJU':function(_0x38e4c9,_0x2001ca){return _0x38e4c9(_0x2001ca);},'LJDly':_0x2da9ac(0x1ac),'ANEQk':_0x2da9ac(0x168),'CCVKA':function(_0x568554,_0x3b1054){return _0x568554(_0x3b1054);},'AdbcZ':_0x2da9ac(0x144)};PerformanceTester[_0x2da9ac(0x1bf)](PerformanceEvents['SDK_CLI_DOWNLOAD']),logger[_0x2da9ac(0x113)](_0x2da9ac(0x1c1)+_0x20a75e);try{const _0x2ab873=url[_0x2da9ac(0x160)](_0x20a75e),_0x4454c=path[_0x2da9ac(0xfa)](_0x4d331d,_0x3fdba2[_0x2da9ac(0x136)]),_0x48cfa1=fs[_0x2da9ac(0x10e)](_0x4454c);return new Promise((_0x2424ae,_0x12c618)=>{const _0x5a9332=_0x2da9ac,_0x141de6={'aYduR':function(_0x5c5a36,_0x3c3b45){const _0xa4f2ef=a64_0x59c7;return _0x3fdba2[_0xa4f2ef(0xf9)](_0x5c5a36,_0x3c3b45);}};https[_0x5a9332(0x134)](_0x2ab873,function(_0x3cf5b2){const _0x1c67b5=_0x5a9332,_0x4986ae={'qRyvR':_0x3fdba2[_0x1c67b5(0x106)],'XsLoW':function(_0x3e8d8a,_0x1312db){return _0x3fdba2['JSRJU'](_0x3e8d8a,_0x1312db);},'VQXYb':_0x3fdba2[_0x1c67b5(0x169)],'YlnNl':function(_0x37e60f,_0x28160e){return _0x3fdba2['JSRJU'](_0x37e60f,_0x28160e);}},_0x2660c2=null;_0x3cf5b2[_0x1c67b5(0x11f)](_0x48cfa1),_0x3cf5b2['on'](_0x3fdba2[_0x1c67b5(0x189)],function(_0x4c0d02){const _0x1e3fc3=_0x1c67b5;logger[_0x1e3fc3(0x168)](util['format'](_0x4986ae['qRyvR'],_0x4c0d02)),PerformanceTester[_0x1e3fc3(0x13d)](PerformanceEvents[_0x1e3fc3(0x108)],![],util[_0x1e3fc3(0x104)](_0x4c0d02)),_0x4986ae[_0x1e3fc3(0x142)](_0x12c618,_0x4c0d02);}),_0x48cfa1['on'](_0x3fdba2['ANEQk'],function(_0x12dbb5){const _0x11d98f=_0x1c67b5;logger['error'](util[_0x11d98f(0x104)](_0x4986ae[_0x11d98f(0x15e)],_0x12dbb5)),PerformanceTester['end'](PerformanceEvents['SDK_CLI_DOWNLOAD'],![],util['format'](_0x12dbb5)),_0x4986ae[_0x11d98f(0x19c)](_0x12c618,_0x12dbb5);}),CLIUtils[_0x1c67b5(0x1bb)](_0x48cfa1,_0x2660c2,_0x4454c,_0x4d331d,_0x2424ae,_0x12c618),PerformanceTester[_0x1c67b5(0x13d)](PerformanceEvents[_0x1c67b5(0x108)]);})['on'](_0x3fdba2[_0x5a9332(0x189)],function(_0x4e2a43){const _0x241700=_0x5a9332;logger[_0x241700(0x168)](_0x241700(0x190)+util['format'](_0x4e2a43)),PerformanceTester['end'](PerformanceEvents[_0x241700(0x108)],![],util[_0x241700(0x104)](_0x4e2a43)),_0x141de6[_0x241700(0x15b)](_0x12c618,_0x4e2a43);});});}catch(_0x5e10dd){PerformanceTester['end'](PerformanceEvents[_0x2da9ac(0x108)],![],util[_0x2da9ac(0x104)](_0x5e10dd)),logger[_0x2da9ac(0x113)]('Failed\x20to\x20download\x20binary,\x20Exception:\x20'+util[_0x2da9ac(0x104)](_0x5e10dd));}};static[a64_0x53db1c(0x1bb)](_0x1f98ed,_0x41f026,_0x1bbf08,_0x5bda8e,_0x43bff6,_0x5b3ee9){const _0x4c4631=a64_0x53db1c,_0x1861cd={'qwPWp':function(_0x505750,_0x2e7686){return _0x505750(_0x2e7686);},'Eurim':'error','VuZOI':function(_0x749067,_0x1f36ba){return _0x749067===_0x1f36ba;},'aLGkA':function(_0x18e672,_0x1ad578){return _0x18e672(_0x1ad578);},'JNKrl':'end','bdSdR':_0x4c4631(0x1b5),'cAQiF':_0x4c4631(0x174),'zfhOi':'close'};_0x1f98ed['on'](_0x1861cd[_0x4c4631(0x1c2)],function(){const _0x5ab4f1=_0x4c4631,_0x50a55={'CmOOT':function(_0x54a03a,_0x492948){return _0x1861cd['qwPWp'](_0x54a03a,_0x492948);},'bQAlB':function(_0x9027fb,_0x458bcf){const _0x516551=a64_0x59c7;return _0x1861cd[_0x516551(0x11c)](_0x9027fb,_0x458bcf);},'lxCef':_0x1861cd[_0x5ab4f1(0x1b0)],'Lsalr':function(_0x6ff5fd,_0x398f49){const _0x39cc4f=_0x5ab4f1;return _0x1861cd[_0x39cc4f(0x1af)](_0x6ff5fd,_0x398f49);},'TVONs':function(_0x19b31f,_0x3ca296){return _0x1861cd['aLGkA'](_0x19b31f,_0x3ca296);},'iIrPm':function(_0x37332d,_0x201787){const _0x100ef7=_0x5ab4f1;return _0x1861cd[_0x100ef7(0x153)](_0x37332d,_0x201787);},'pJDLC':_0x1861cd[_0x5ab4f1(0x157)],'JUlZj':_0x1861cd[_0x5ab4f1(0x185)],'IhiJK':_0x1861cd[_0x5ab4f1(0x1b9)]},_0x1a6bb4={};_0x1a6bb4[_0x5ab4f1(0x192)]=!![],yauzl[_0x5ab4f1(0x14f)](_0x1bbf08,_0x1a6bb4,function(_0x11a6ec,_0x343e9b){const _0x55d41c=_0x5ab4f1,_0x214f2d={'lorbg':function(_0x149771,_0x344170){return _0x50a55['iIrPm'](_0x149771,_0x344170);},'onyMY':_0x50a55['pJDLC'],'qJGuC':function(_0x2dc80a,_0x4e5147){const _0x1ac116=a64_0x59c7;return _0x50a55[_0x1ac116(0x148)](_0x2dc80a,_0x4e5147);},'MatYW':_0x50a55[_0x55d41c(0x121)]};_0x11a6ec&&_0x50a55['TVONs'](_0x5b3ee9,_0x11a6ec),_0x343e9b[_0x55d41c(0x1b8)](),_0x343e9b['on'](_0x50a55[_0x55d41c(0x196)],_0xea56b4=>{const _0x3d3c7f=_0x55d41c,_0x38a504={'ZXxAl':function(_0x399c7e,_0xeb64b9){const _0x3468bd=a64_0x59c7;return _0x50a55[_0x3468bd(0x148)](_0x399c7e,_0xeb64b9);},'DTPoI':function(_0x3a64c1,_0x7bc87){const _0x820e0c=a64_0x59c7;return _0x50a55[_0x820e0c(0x11a)](_0x3a64c1,_0x7bc87);}};!_0x41f026&&(_0x41f026=_0xea56b4['fileName']);if(/\/$/[_0x3d3c7f(0x1c0)](_0xea56b4[_0x3d3c7f(0x111)]))_0x343e9b[_0x3d3c7f(0x1b8)]();else{const _0x3f7453=_0xea56b4[_0x3d3c7f(0x111)],_0x32db30=path[_0x3d3c7f(0xfa)](_0x5bda8e,_0x3f7453);let _0x196c6f;try{_0x196c6f=fs['createWriteStream'](_0x32db30);}catch(_0x4b5001){if(BINARY_BUSY_ERROR_CODES[_0x3d3c7f(0x131)](_0x4b5001['code'])){logger[_0x3d3c7f(0x195)](_0x3d3c7f(0x18d)+_0x3f7453),fs[_0x3d3c7f(0x117)](_0x1bbf08,_0x54a7f3=>{const _0x4b8c1e=_0x3d3c7f;_0x54a7f3&&logger[_0x4b8c1e(0x195)](_0x4b8c1e(0x17c)+_0x1bbf08);}),_0x50a55[_0x3d3c7f(0x148)](_0x43bff6,_0x32db30);return;}_0x50a55['CmOOT'](_0x5b3ee9,_0x4b5001);return;}_0x196c6f['on'](_0x50a55[_0x3d3c7f(0x184)],_0x33a3ab=>{const _0x3d7523=_0x3d3c7f;BINARY_BUSY_ERROR_CODES[_0x3d7523(0x131)](_0x33a3ab[_0x3d7523(0x11e)])?(logger[_0x3d7523(0x195)](_0x3d7523(0x1ba)+_0x33a3ab[_0x3d7523(0x164)]),_0x196c6f[_0x3d7523(0x10b)](),fs[_0x3d7523(0x117)](_0x1bbf08,_0x141654=>{const _0x21373c=_0x3d7523;_0x141654&&logger[_0x21373c(0x195)]('Failed\x20to\x20delete\x20zip\x20file:\x20'+_0x1bbf08);}),_0x38a504[_0x3d7523(0x114)](_0x43bff6,_0x32db30)):_0x38a504[_0x3d7523(0x15a)](_0x5b3ee9,_0x33a3ab);}),_0x343e9b[_0x3d3c7f(0x1a1)](_0xea56b4,function(_0x485c14,_0x238baa){const _0x3df3fa=_0x3d3c7f;_0x485c14&&_0x214f2d[_0x3df3fa(0x19f)](_0x5b3ee9,_0x485c14),_0x238baa['on'](_0x214f2d['onyMY'],function(){const _0x2c9470=_0x3df3fa;_0x196c6f[_0x2c9470(0x10b)](),_0x343e9b[_0x2c9470(0x1b8)]();}),_0x238baa[_0x3df3fa(0x11f)](_0x196c6f);}),_0x50a55['Lsalr'](_0xea56b4['fileName'],_0x41f026)&&_0x343e9b[_0x3d3c7f(0x10b)]();}}),_0x343e9b['on'](_0x50a55[_0x55d41c(0x184)],_0x2cd522=>{_0x50a55['TVONs'](_0x5b3ee9,_0x2cd522);}),_0x343e9b[_0x55d41c(0x16b)](_0x50a55[_0x55d41c(0x18e)],()=>{const _0x21fa4e=_0x55d41c;fs[_0x21fa4e(0x117)](_0x1bbf08,_0x19e784=>{const _0x1ac657=_0x21fa4e;_0x19e784&&logger[_0x1ac657(0x195)](_0x1ac657(0x17c)+_0x1bbf08);}),fs['chmod'](path[_0x21fa4e(0xfa)](_0x5bda8e,_0x41f026),_0x214f2d[_0x21fa4e(0x188)],function(_0x39819b){const _0x413f8a=_0x21fa4e;_0x39819b&&_0x214f2d[_0x413f8a(0x19f)](_0x5b3ee9,_0x39819b),_0x214f2d[_0x413f8a(0xf8)](_0x43bff6,path[_0x413f8a(0xfa)](_0x5bda8e,_0x41f026));}),_0x343e9b[_0x21fa4e(0x10b)]();});});});}static['getTestFrameworkDetail'](){const _0x433991=a64_0x53db1c;if(process[_0x433991(0x137)][_0x433991(0x10d)])return JSON[_0x433991(0x160)](process['env'][_0x433991(0x10d)]);return this[_0x433991(0x12f)];}static[a64_0x53db1c(0xf7)](){const _0x1b5dac=a64_0x53db1c;if(process[_0x1b5dac(0x137)][_0x1b5dac(0x175)])return JSON[_0x1b5dac(0x160)](process[_0x1b5dac(0x137)][_0x1b5dac(0x175)]);return this[_0x1b5dac(0x115)];}static['setFrameworkDetail'](_0x2eacc1,_0x126c4a){const _0x3fc0b9=a64_0x53db1c,_0x37794e={'CsKfw':_0x3fc0b9(0x107),'lUrRL':function(_0x1e845f,_0x53921d){return _0x1e845f||_0x53921d;},'sPFmU':function(_0x142018,_0x29c4c6){return _0x142018(_0x29c4c6);},'FZnud':function(_0x380f96,_0x3ad7e5){return _0x380f96(_0x3ad7e5);}},_0x17b1e1=_0x37794e['CsKfw'][_0x3fc0b9(0x17f)]('|');let _0x234856=0x0;while(!![]){switch(_0x17b1e1[_0x234856++]){case'0':process[_0x3fc0b9(0x137)][_0x3fc0b9(0x175)]=JSON[_0x3fc0b9(0x1bc)](this['automationFrameworkDetail']);continue;case'1':_0x37794e['lUrRL'](!_0x2eacc1,!_0x126c4a)&&logger[_0x3fc0b9(0x113)](_0x3fc0b9(0x165)+_0x2eacc1+_0x3fc0b9(0x133)+_0x126c4a);continue;case'2':this[_0x3fc0b9(0x115)]={'name':_0x126c4a,'version':_0x37794e['sPFmU'](getFrameworkVersion,_0x126c4a)};continue;case'3':process['env'][_0x3fc0b9(0x10d)]=JSON[_0x3fc0b9(0x1bc)](this[_0x3fc0b9(0x12f)]);continue;case'4':this[_0x3fc0b9(0x12f)]={'name':_0x2eacc1,'version':{[_0x2eacc1]:_0x37794e[_0x3fc0b9(0x198)](getFrameworkVersion,_0x2eacc1)}};continue;}break;}}static[a64_0x53db1c(0x1a8)](_0x27c234,_0x4c531f){return _0x27c234+':'+_0x4c531f;}static[a64_0x53db1c(0x15f)](){const _0x303959=a64_0x53db1c;return process[_0x303959(0x1b4)]+':'+threadId;}static[a64_0x53db1c(0x197)](_0x4d9528){const _0x489e91=a64_0x53db1c;if(_0x4d9528[_0x489e91(0x12a)]&&_0x4d9528[_0x489e91(0x12a)][_0x489e91(0x19d)])return!![];return![];}static[a64_0x53db1c(0x1a2)](_0x1a0853){const _0x34d833=a64_0x53db1c;if(_0x1a0853[_0x34d833(0x12a)]&&_0x1a0853['testContextOptions']['skipSessionStatus'])return!![];return![];}static[a64_0x53db1c(0x1b7)](_0x12eede){const _0x2e3022=a64_0x53db1c,_0x25c49a=new RegExp(TestFrameworkConstants[_0x2e3022(0x156)]);return _0x25c49a[_0x2e3022(0x1c0)](_0x12eede);}static[a64_0x53db1c(0x183)](_0x45a683,_0x1d33d1){const _0x2661ce=a64_0x53db1c,_0x2f56fe={};_0x2f56fe[_0x2661ce(0x12b)]=function(_0x57f057,_0x4b8b20){return _0x57f057!==_0x4b8b20;},_0x2f56fe['HqLfb']=function(_0xacf07d,_0x560efd){return _0xacf07d===_0x560efd;},_0x2f56fe[_0x2661ce(0x101)]='object';const _0x55f5fc=_0x2f56fe;for(const [_0x161f6d,_0x1afaab]of Object[_0x2661ce(0x100)](_0x1d33d1)){if(_0x55f5fc[_0x2661ce(0x12b)](_0x1afaab,null)&&_0x55f5fc['HqLfb'](typeof _0x1afaab,_0x55f5fc['xPMXa'])&&!Array[_0x2661ce(0x135)](_0x1afaab))_0x45a683[_0x161f6d]=this[_0x2661ce(0x183)](_0x45a683[_0x161f6d]||{},_0x1afaab);else Array[_0x2661ce(0x135)](_0x1afaab)?_0x45a683[_0x161f6d]=(_0x45a683[_0x161f6d]||[])['concat'](_0x1afaab):_0x45a683[_0x161f6d]=_0x1afaab;}return _0x45a683;}}module['exports']=CLIUtils;