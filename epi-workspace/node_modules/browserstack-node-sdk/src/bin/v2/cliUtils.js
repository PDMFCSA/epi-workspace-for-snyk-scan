const a64_0x538a5e=a64_0x23ab;(function(_0x1bbebd,_0x1c3bb5){const _0x4613c3=a64_0x23ab,_0xa1f043=_0x1bbebd();while(!![]){try{const _0x132ace=-parseInt(_0x4613c3(0x1cb))/0x1+parseInt(_0x4613c3(0x1e2))/0x2+-parseInt(_0x4613c3(0x233))/0x3*(-parseInt(_0x4613c3(0x1f5))/0x4)+parseInt(_0x4613c3(0x1c3))/0x5+-parseInt(_0x4613c3(0x1e4))/0x6+-parseInt(_0x4613c3(0x204))/0x7*(parseInt(_0x4613c3(0x239))/0x8)+-parseInt(_0x4613c3(0x201))/0x9;if(_0x132ace===_0x1c3bb5)break;else _0xa1f043['push'](_0xa1f043['shift']());}catch(_0xeeb021){_0xa1f043['push'](_0xa1f043['shift']());}}}(a64_0x77bb,0x40614));function a64_0x23ab(_0xf3a2b0,_0x346a27){const _0x77bb7c=a64_0x77bb();return a64_0x23ab=function(_0x23ab02,_0x2a9fb7){_0x23ab02=_0x23ab02-0x1a1;let _0x5938b9=_0x77bb7c[_0x23ab02];return _0x5938b9;},a64_0x23ab(_0xf3a2b0,_0x346a27);}function a64_0x77bb(){const _0x49c725=['Folder\x20does\x20not\x20exist:\x20','ZeWQb','development','../../helpers/performance/constants','fileName','868DVfNNJ','GKEEG','openReadStream','SHDNp','cli','Error\x20in\x20setting\x20up\x20cli\x20path\x20directory,\x20Exception:\x20','follow-redirects','No\x20writable\x20directory\x20available\x20for\x20the\x20CLI','aRksG','basename','BKUGh','ZOCsD','5342598qJZxzK','pqQqM','Resolved\x20binary\x20path:\x20','474530avdhvF','oGBLe','yauzl','HKNZx','error','rCRAx','NLryb','HnZOZ','getAutomationFrameworkDetail','lazyEntries','./instances/testFrameworkInstance.js','YzSKg','message','wXLRI','CLI\x20version\x20found\x20despite\x20error:\x20\x22','HOOK_REGEX','Current\x20CLI\x20Path\x20Found:\x20','util','Dazvm','NbqXf','skipSessionStatus','lmqvC','env','getWritableDir','length','node','BROWSERSTACK_CLI_ENV','Error\x20while\x20reading\x20CLI\x20path:\x20','cwd','cyKiY','SyRoO','info','../utils/apiUtilityMethods.js','tIyxb','binary-','format','once','code','tmpdir','platform','FpQLZ','\x20version','BFidf','ybDYX','chmod','BROWSERSTACK_TEST_FRAMEWORK_DETAIL','unlink','6774mbDPSf','JIzKb',',\x20automationFramework=','BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL','isDirectory','runShellCommand','40nRUmcG','requestToUpdateCLI','../../helpers/helper','../../helpers/performance/performance-tester.js','startsWith','start','pdgEF','downloadLatestBinary','Test\x20or\x20Automation\x20framework\x20not\x20provided\x20testFramework=','close','gfmwW','Failed\x20to\x20delete\x20zip\x20file:\x20','rAsKh','isFile','end','MGMeN','testContextOptions','version','response\x20','getSdkLanguage','ZzBPe','closeSync','unix:/tmp/sdk-platform-','get','\x20already\x20exists','pipe','RaPdb','SqgGa','matchHookRegex','child_process','HNMHR','homedir','BROWSERSTACK_BINARY_URL','Error\x20checking\x20if\x20binary\x20is\x20busy:\x20','BROWSERSTACK_FILES_DIR','./framework/constants/testFrameworkConstants.js','UuGGH','includes','isBinaryBusy','Using\x20BROWSERSTACK_BINARY_URL\x20from\x20env\x20variable:\x20','mtime','url','KwoaF','Folder\x20','isArray','qcWFV','bHyjT','entries','HXqNP','path','Failed\x20to\x20download\x20binary,\x20Exception:\x20','0755','downloaded_file.zip','qNzxW','getCLIParamsForDevEnv','statSync','Setting\x20required\x20permissions\x20to\x20','Got\x20Error\x20in\x20percy\x20binary\x20download\x20response\x20%s','listen','existsSync','concat','wFqXx','automationFrameworkDetail','UwXYA','join','filter','test','Xbrrb','timeout','getCurrentInstanceName','getHookRegistryKey','Binary\x20is\x20busy:\x20','AgTGF','exports','QcMLW','split','TKJkF','ztVAn','map','SDK_CLI_DOWNLOAD','stringify','mergeObject','2564505FoBZHH','createWriteStream','zBdjZ','uodMb','shouldSkipSessionName','debug','Binary\x20file\x20is\x20currently\x20in\x20use,\x20skipping\x20download\x20and\x20continuing\x20with\x20existing\x20binary:\x20','CrFbw','27434rVeiTs','OgqTp','LlTYG','filePath','isDevelopmentEnv','getExistingCliPath','qHcya','bXVKt','data','warn','skipSessionName','FAOny','jLPHB','shouldSkipSessionStatus','UPXTi','trim','Unable\x20to\x20set\x20required\x20permissions\x20to\x20','.browserstack','CLIUtils','.sock','downloadFileStream','getSdkVersion','ASkSH','555846HdpUgh','SDK_CLI_CHECK_UPDATE','342624pFoAUt','readEntry','pDQwl','Error\x20in\x20getting\x20writable\x20directory,\x20writableDir=','SHELL_EXECUTE_ERROR','KQMbL','getCliDir','parse','cVHwP','Binary\x20file\x20became\x20busy\x20during\x20write,\x20continuing\x20with\x20existing\x20binary:\x20','yaesu','testFrameworkDetail'];a64_0x77bb=function(){return _0x49c725;};return a64_0x77bb();}const fs=require('fs'),os=require('os'),url=require(a64_0x538a5e(0x262)),path=require(a64_0x538a5e(0x1a2)),{exec}=require(a64_0x538a5e(0x256)),{https}=require(a64_0x538a5e(0x1fb)),yauzl=require(a64_0x538a5e(0x206)),util=require(a64_0x538a5e(0x215)),{getFrameworkVersion}=require('../../helpers/test-observability/utils.js'),{threadId}=require('worker_threads'),PerformanceTester=require(a64_0x538a5e(0x23c)),{EVENTS:PerformanceEvents}=require(a64_0x538a5e(0x1f3)),{isNullOrEmpty,isModifiable,setReadWriteExecuteAccess}=require('../../helpers/utilities'),{isTrue,createDir,getHostInfo,nodeRequest,nestedKeyValue}=require(a64_0x538a5e(0x23b)),{UPDATED_CLI_ENDPOINT,BINARY_BUSY_ERROR_CODES}=require('../utils/constants'),{createClassLogger}=require('../../helpers/classLogger.js'),TestFrameworkInstance=require(a64_0x538a5e(0x20e)),HookState=require('./state/hookState.js'),TestFrameworkState=require('./state/testFrameworkState.js'),AutomationFrameworkState=require('./state/automationFrameworkState.js'),TestFrameworkConstants=require(a64_0x538a5e(0x25c)),logger=createClassLogger(a64_0x538a5e(0x1dd)),{getBStackAPIUrl}=require(a64_0x538a5e(0x224));class CLIUtils{[a64_0x538a5e(0x1af)]={};[a64_0x538a5e(0x1ef)]={};static[a64_0x538a5e(0x1cf)](){const _0x49ccb0=a64_0x538a5e,_0xc4d9a8={};_0xc4d9a8['jLPHB']=function(_0x27b186,_0x3a972e){return _0x27b186===_0x3a972e;},_0xc4d9a8['FAOny']=_0x49ccb0(0x1f2);const _0x5a1535=_0xc4d9a8;return _0x5a1535[_0x49ccb0(0x1d7)](process['env'][_0x49ccb0(0x21e)],_0x5a1535[_0x49ccb0(0x1d6)]);}static[a64_0x538a5e(0x1a7)](){const _0x2fc553=a64_0x538a5e,_0x1d7c84={};return _0x1d7c84['id']=process['env'][_0x2fc553(0x21e)],_0x1d7c84[_0x2fc553(0x1ab)]=_0x2fc553(0x24f)+process[_0x2fc553(0x21a)][_0x2fc553(0x21e)]+_0x2fc553(0x1de),_0x1d7c84;}static[a64_0x538a5e(0x1e0)](){const _0x5ed182=a64_0x538a5e,_0x5c3667={'aRksG':function(_0x541fa5,_0x143c12){return _0x541fa5(_0x143c12);},'KwoaF':'../../../package.json'};return _0x5c3667[_0x5ed182(0x1fd)](require,_0x5c3667[_0x5ed182(0x263)])[_0x5ed182(0x24a)];}static['getSdkLanguage'](){const _0x54e3b4=a64_0x538a5e,_0x3935f7={};_0x3935f7[_0x54e3b4(0x1ec)]=_0x54e3b4(0x21d);const _0x4a3acf=_0x3935f7;return _0x4a3acf[_0x54e3b4(0x1ec)];}static async['setupCliPath'](_0x407132){const _0x4660f5=a64_0x538a5e,_0x3e2363={'TygHj':'Configuring\x20Cli\x20path.','bHyjT':function(_0x3fa0ab,_0x2078c2){return _0x3fa0ab(_0x2078c2);},'totdI':_0x4660f5(0x1fc)};logger[_0x4660f5(0x1c8)](_0x3e2363['TygHj']);const _0x26575d=process['env']['SDK_CLI_BIN_PATH'];if(!_0x3e2363['bHyjT'](isNullOrEmpty,_0x26575d))return logger[_0x4660f5(0x1c8)]('Development\x20Cli\x20Path:\x20'+_0x26575d),_0x26575d;try{const _0x1dcad2=this[_0x4660f5(0x1ea)]();if(_0x3e2363[_0x4660f5(0x267)](isNullOrEmpty,_0x1dcad2))throw new Error(_0x3e2363['totdI']);const _0x1b867b=this[_0x4660f5(0x1d0)](_0x1dcad2),_0x49ed5e=await this['checkAndUpdateCli'](_0x1b867b,_0x1dcad2,_0x407132);return logger['debug'](_0x4660f5(0x203)+_0x49ed5e),_0x49ed5e;}catch(_0x39991c){logger[_0x4660f5(0x1c8)](_0x4660f5(0x1fa)+util['format'](_0x39991c));}return null;}static async['checkAndUpdateCli'](_0x1d061e,_0x1aecdd,_0x495394){const _0x53803a=a64_0x538a5e,_0x448707={'bTKDn':function(_0x525b5c){return _0x525b5c();},'HKNZx':function(_0x4e5a3d,_0x5cbd38){return _0x4e5a3d(_0x5cbd38);},'rAsKh':function(_0x459bf2,_0x341149,_0x449dee){return _0x459bf2(_0x341149,_0x449dee);},'QcMLW':_0x53803a(0x1d3),'wFqXx':'url'};PerformanceTester[_0x53803a(0x23e)](PerformanceEvents[_0x53803a(0x1e3)]),logger[_0x53803a(0x223)](_0x53803a(0x214)+_0x1d061e);const _0x27759b=_0x448707['bTKDn'](getHostInfo),_0x5518ca={'sdk_version':CLIUtils['getSdkVersion'](),'os':_0x27759b[_0x53803a(0x22b)],'os_arch':_0x27759b['arch'],'cli_version':'0','sdk_language':this[_0x53803a(0x24c)]()};!_0x448707['HKNZx'](isNullOrEmpty,_0x1d061e)&&(_0x5518ca['cli_version']=await this[_0x53803a(0x238)](_0x1d061e+_0x53803a(0x22d)));const _0xa6a0d7=await this['requestToUpdateCLI'](_0x5518ca,_0x495394);process[_0x53803a(0x21a)][_0x53803a(0x259)]&&(logger[_0x53803a(0x223)](_0x53803a(0x260)+process[_0x53803a(0x21a)][_0x53803a(0x259)]),_0xa6a0d7['data'][_0x53803a(0x262)]=process[_0x53803a(0x21a)][_0x53803a(0x259)]);if(_0x448707[_0x53803a(0x245)](nestedKeyValue,_0xa6a0d7,[_0x448707['QcMLW'],_0x448707[_0x53803a(0x1ae)]])){logger[_0x53803a(0x1c8)]('Need\x20to\x20update\x20binary,\x20current\x20binary\x20version:\x20'+_0x5518ca['cli_version']);if(!_0x448707[_0x53803a(0x207)](isNullOrEmpty,_0x1d061e)&&this[_0x53803a(0x25f)](_0x1d061e))return logger[_0x53803a(0x1d4)]('Existing\x20binary\x20is\x20currently\x20in\x20use,\x20skipping\x20update\x20and\x20continuing\x20with\x20current\x20version:\x20'+_0x1d061e),PerformanceTester[_0x53803a(0x247)](PerformanceEvents['SDK_CLI_CHECK_UPDATE']),_0x1d061e;const _0x5935a3=await this[_0x53803a(0x240)](_0x448707[_0x53803a(0x245)](nestedKeyValue,_0xa6a0d7,[_0x448707[_0x53803a(0x1bb)],_0x448707[_0x53803a(0x1ae)]]),_0x1aecdd);return PerformanceTester[_0x53803a(0x247)](PerformanceEvents['SDK_CLI_CHECK_UPDATE']),_0x5935a3;}return PerformanceTester[_0x53803a(0x247)](PerformanceEvents[_0x53803a(0x1e3)]),_0x1d061e;}static[a64_0x538a5e(0x1ea)](){const _0x3038b7=a64_0x538a5e,_0x58b0e7={'YDQxj':function(_0x5c0a77,_0x686541){return _0x5c0a77(_0x686541);},'HNMHR':'No\x20writable\x20directory\x20available\x20for\x20the\x20CLI','SqgGa':_0x3038b7(0x1f9),'ybDYX':function(_0x120a7b,_0x558e12){return _0x120a7b(_0x558e12);}},_0x54390e=this[_0x3038b7(0x21b)]();try{if(_0x58b0e7['YDQxj'](isNullOrEmpty,_0x54390e))throw new Error(_0x58b0e7[_0x3038b7(0x257)]);const _0x1f5505=path['join'](_0x54390e,_0x58b0e7[_0x3038b7(0x254)]);return!fs[_0x3038b7(0x1ac)](_0x1f5505)&&_0x58b0e7[_0x3038b7(0x22f)](createDir,_0x1f5505),_0x1f5505;}catch(_0xecf5e9){logger[_0x3038b7(0x1c8)](_0x3038b7(0x1e7)+util['format'](_0xecf5e9));}}static[a64_0x538a5e(0x21b)](){const _0x2f777c=a64_0x538a5e,_0xaf5bf7={'qNzxW':_0x2f777c(0x1dc),'SyRoO':function(_0x7400e4,_0x592394){return _0x7400e4(_0x592394);},'GKEEG':function(_0x4a41f5,_0x86e3a0){return _0x4a41f5(_0x86e3a0);},'ASkSH':function(_0x4b8d1e,_0x246188){return _0x4b8d1e(_0x246188);},'qcWFV':function(_0x13b392,_0x3aa9dd){return _0x13b392(_0x3aa9dd);}},_0xeae8a4=[process[_0x2f777c(0x21a)][_0x2f777c(0x25b)],path['join'](os[_0x2f777c(0x258)](),_0xaf5bf7[_0x2f777c(0x1a6)]),path[_0x2f777c(0x1b1)](os[_0x2f777c(0x22a)](),_0xaf5bf7['qNzxW'])];for(const _0x118174 of _0xeae8a4){if(_0xaf5bf7[_0x2f777c(0x222)](isNullOrEmpty,_0x118174))continue;try{if(fs[_0x2f777c(0x1ac)](_0x118174)){logger[_0x2f777c(0x1c8)](_0x2f777c(0x264)+_0x118174+_0x2f777c(0x251));if(!_0xaf5bf7['GKEEG'](isModifiable,_0x118174)){logger[_0x2f777c(0x1c8)](_0x2f777c(0x1a9)+_0x118174);const _0xb7b69f=_0xaf5bf7[_0x2f777c(0x1f6)](setReadWriteExecuteAccess,_0x118174);if(!_0xaf5bf7[_0x2f777c(0x222)](isTrue,_0xb7b69f)){logger[_0x2f777c(0x1d4)](_0x2f777c(0x1db)+_0x118174);continue;}}}else{logger['debug'](_0x2f777c(0x1f0)+_0x118174),_0xaf5bf7[_0x2f777c(0x1e1)](createDir,_0x118174),logger[_0x2f777c(0x1c8)]('Setting\x20required\x20permissions\x20to\x20'+_0x118174);const _0x470716=_0xaf5bf7[_0x2f777c(0x1f6)](setReadWriteExecuteAccess,_0x118174);!_0xaf5bf7[_0x2f777c(0x266)](isTrue,_0x470716)&&logger[_0x2f777c(0x1d4)]('Unable\x20to\x20set\x20required\x20permissions\x20to\x20'+_0x118174);}return _0x118174;}catch(_0x59f4aa){logger[_0x2f777c(0x208)]('Unable\x20to\x20get\x20writable\x20directory,\x20exception\x20'+util['format'](_0x59f4aa));}}return null;}static[a64_0x538a5e(0x1d0)](_0x27d9ca){const _0x61ecdc=a64_0x538a5e,_0x3d0d8f={};_0x3d0d8f['qHcya']=function(_0x2b122d,_0x268129){return _0x2b122d>_0x268129;};const _0x2e02f5=_0x3d0d8f;try{if(!fs['existsSync'](_0x27d9ca)||!fs[_0x61ecdc(0x1a8)](_0x27d9ca)[_0x61ecdc(0x237)]())return'';const _0x354bd2=fs['readdirSync'](_0x27d9ca)[_0x61ecdc(0x1bf)](_0x12440d=>path[_0x61ecdc(0x1b1)](_0x27d9ca,_0x12440d))[_0x61ecdc(0x1b2)](_0x1628e9=>fs['statSync'](_0x1628e9)[_0x61ecdc(0x246)]()&&path[_0x61ecdc(0x1fe)](_0x1628e9)[_0x61ecdc(0x23d)](_0x61ecdc(0x226)));if(_0x2e02f5[_0x61ecdc(0x1d1)](_0x354bd2[_0x61ecdc(0x21c)],0x0)){const _0x349ad8=_0x354bd2['map'](_0x56c3e2=>({'filePath':_0x56c3e2,'mtime':fs[_0x61ecdc(0x1a8)](_0x56c3e2)[_0x61ecdc(0x261)]}))['reduce']((_0x16cb2f,_0x5a0525)=>{const _0x2455d3=_0x61ecdc;if(!_0x16cb2f||!_0x16cb2f[_0x2455d3(0x261)])return _0x5a0525;if(_0x2e02f5[_0x2455d3(0x1d1)](_0x5a0525[_0x2455d3(0x261)],_0x16cb2f['mtime']))return _0x5a0525;return _0x16cb2f;},{});return _0x349ad8?_0x349ad8[_0x61ecdc(0x1ce)]:'';}return'';}catch(_0x277487){return logger[_0x61ecdc(0x208)](_0x61ecdc(0x21f)+util[_0x61ecdc(0x227)](_0x277487)),'';}}static [a64_0x538a5e(0x23a)]=async(_0x1c30ff,_0x37e2ea)=>{const _0x3f6209=a64_0x538a5e,_0x473b0f={'pdgEF':function(_0x3cfec3,_0x2b27bd,_0x9f437c,_0x31dcf5,_0x2f3008){return _0x3cfec3(_0x2b27bd,_0x9f437c,_0x31dcf5,_0x2f3008);},'mgKmw':'GET'},_0x24a38c={};_0x24a38c['qs']=_0x1c30ff;const _0x376d48=await _0x473b0f[_0x3f6209(0x23f)](nodeRequest,_0x473b0f['mgKmw'],UPDATED_CLI_ENDPOINT,_0x24a38c,_0x37e2ea);return logger[_0x3f6209(0x1c8)](_0x3f6209(0x24b)+JSON[_0x3f6209(0x1c1)](_0x376d48)),_0x376d48;};static['isBinaryBusy'](_0x5c91c4){const _0x4ad9fd=a64_0x538a5e;try{const _0x5b7b2f=fs['openSync'](_0x5c91c4,'r+');return fs[_0x4ad9fd(0x24e)](_0x5b7b2f),![];}catch(_0x4f70c9){if(BINARY_BUSY_ERROR_CODES[_0x4ad9fd(0x25e)](_0x4f70c9[_0x4ad9fd(0x229)]))return logger[_0x4ad9fd(0x1c8)](_0x4ad9fd(0x1b8)+_0x5c91c4),!![];return logger[_0x4ad9fd(0x1c8)](_0x4ad9fd(0x25a)+_0x4f70c9['message']),![];}}static[a64_0x538a5e(0x238)](_0x52a149,_0x4b96c7=''){const _0xafebba=a64_0x538a5e,_0x281af9={'SdKhl':_0xafebba(0x24a),'gfmwW':function(_0xe6d9b5,_0x3f900e){return _0xe6d9b5(_0x3f900e);},'HnZOZ':_0xafebba(0x1e8),'NbqXf':function(_0x5ac530,_0x71c70a){return _0x5ac530(_0x71c70a);},'TKJkF':function(_0x4b6331,_0x357a21,_0x533327,_0x50501f){return _0x4b6331(_0x357a21,_0x533327,_0x50501f);},'IsSOE':'error'};return new Promise((_0x2a2dff,_0x574e47)=>{const _0x285b5f=_0xafebba,_0x18993a={'pqQqM':_0x281af9['SdKhl'],'zBdjZ':function(_0x4d6479,_0x32ed1c){const _0x4503c7=a64_0x23ab;return _0x281af9[_0x4503c7(0x243)](_0x4d6479,_0x32ed1c);},'OgqTp':_0x281af9[_0x285b5f(0x20b)],'uIptM':function(_0x16b5b7,_0x10ea04){const _0x2af820=_0x285b5f;return _0x281af9[_0x2af820(0x217)](_0x16b5b7,_0x10ea04);}},_0x54518a={};_0x54518a[_0x285b5f(0x220)]=_0x4b96c7,_0x54518a[_0x285b5f(0x1b5)]=0x1388;const _0x170090=_0x281af9[_0x285b5f(0x1bd)](exec,_0x52a149,_0x54518a,(_0x2d885b,_0x37ca3a,_0x4e78c3)=>{const _0x2ceb23=_0x285b5f;if(_0x2d885b){if(_0x52a149[_0x2ceb23(0x25e)](_0x18993a[_0x2ceb23(0x202)])&&(_0x37ca3a[_0x2ceb23(0x1da)]()||_0x4e78c3[_0x2ceb23(0x1da)]())){const _0x1153cc=_0x37ca3a[_0x2ceb23(0x1da)]()||_0x4e78c3[_0x2ceb23(0x1da)]();logger[_0x2ceb23(0x1c8)](_0x2ceb23(0x212)+_0x1153cc+'\x22'),_0x18993a[_0x2ceb23(0x1c5)](_0x2a2dff,_0x1153cc);}else _0x18993a[_0x2ceb23(0x1c5)](_0x2a2dff,_0x4e78c3[_0x2ceb23(0x1da)]()||_0x18993a[_0x2ceb23(0x1cc)]);}else logger['debug']('Resolving\x20with\x20stdout:\x20\x22'+_0x37ca3a[_0x2ceb23(0x1da)]()+'\x22'),_0x18993a['zBdjZ'](_0x2a2dff,_0x37ca3a[_0x2ceb23(0x1da)]());});_0x170090['on'](_0x281af9['IsSOE'],()=>{const _0x59bc8d=_0x285b5f;_0x18993a['uIptM'](_0x2a2dff,_0x18993a[_0x59bc8d(0x1cc)]);});});}static [a64_0x538a5e(0x240)]=async(_0x501527,_0x3e65bf)=>{const _0x499902=a64_0x538a5e,_0x424b09={'tIyxb':_0x499902(0x1aa),'ZeWQb':function(_0x2f7818,_0x147465){return _0x2f7818(_0x147465);},'YzSKg':'error','wXLRI':'Got\x20Error\x20while\x20downloading\x20percy\x20binary\x20file\x20%s','WvdZB':function(_0x406f91,_0x1dfa73){return _0x406f91(_0x1dfa73);},'ZzBPe':_0x499902(0x1a5)};PerformanceTester[_0x499902(0x23e)](PerformanceEvents[_0x499902(0x1c0)]),logger[_0x499902(0x1c8)]('Downloading\x20SDK\x20binary\x20from:\x20'+_0x501527);try{const _0x3247b7=url['parse'](_0x501527),_0x4086d4=path[_0x499902(0x1b1)](_0x3e65bf,_0x424b09[_0x499902(0x24d)]),_0x7ee584=fs[_0x499902(0x1c4)](_0x4086d4);return new Promise((_0xaf0bb2,_0x587473)=>{const _0x1364da=_0x499902,_0x5c9450={'Xbrrb':_0x424b09[_0x1364da(0x211)],'ztVAn':function(_0x9bec01,_0x4a4674){return _0x424b09['ZeWQb'](_0x9bec01,_0x4a4674);},'KQMbL':function(_0x56d3fb,_0x18d16d){return _0x424b09['WvdZB'](_0x56d3fb,_0x18d16d);}};https[_0x1364da(0x250)](_0x3247b7,function(_0x556b4c){const _0x35b7d0=_0x1364da,_0x550364={'vMakc':_0x424b09[_0x35b7d0(0x225)],'wgBET':function(_0xca5a4,_0x5ea38a){const _0x4fb38e=_0x35b7d0;return _0x424b09[_0x4fb38e(0x1f1)](_0xca5a4,_0x5ea38a);}},_0x20f1e0=null;_0x556b4c[_0x35b7d0(0x252)](_0x7ee584),_0x556b4c['on'](_0x424b09[_0x35b7d0(0x20f)],function(_0x49aa34){const _0x61000a=_0x35b7d0;logger[_0x61000a(0x208)](util[_0x61000a(0x227)](_0x550364['vMakc'],_0x49aa34)),PerformanceTester[_0x61000a(0x247)](PerformanceEvents['SDK_CLI_DOWNLOAD'],![],util['format'](_0x49aa34)),_0x550364['wgBET'](_0x587473,_0x49aa34);}),_0x7ee584['on'](_0x424b09['YzSKg'],function(_0x1d7e81){const _0x13a58f=_0x35b7d0;logger['error'](util['format'](_0x5c9450[_0x13a58f(0x1b4)],_0x1d7e81)),PerformanceTester['end'](PerformanceEvents[_0x13a58f(0x1c0)],![],util[_0x13a58f(0x227)](_0x1d7e81)),_0x5c9450[_0x13a58f(0x1be)](_0x587473,_0x1d7e81);}),CLIUtils[_0x35b7d0(0x1df)](_0x7ee584,_0x20f1e0,_0x4086d4,_0x3e65bf,_0xaf0bb2,_0x587473),PerformanceTester['end'](PerformanceEvents[_0x35b7d0(0x1c0)]);})['on'](_0x424b09[_0x1364da(0x20f)],function(_0x39fa56){const _0x4a325a=_0x1364da;logger[_0x4a325a(0x208)]('Got\x20Error\x20in\x20percy\x20binary\x20downloading\x20request\x20'+util[_0x4a325a(0x227)](_0x39fa56)),PerformanceTester[_0x4a325a(0x247)](PerformanceEvents[_0x4a325a(0x1c0)],![],util[_0x4a325a(0x227)](_0x39fa56)),_0x5c9450[_0x4a325a(0x1e9)](_0x587473,_0x39fa56);});});}catch(_0x41e7df){PerformanceTester[_0x499902(0x247)](PerformanceEvents[_0x499902(0x1c0)],![],util[_0x499902(0x227)](_0x41e7df)),logger[_0x499902(0x1c8)](_0x499902(0x1a3)+util[_0x499902(0x227)](_0x41e7df));}};static[a64_0x538a5e(0x1df)](_0x10e06c,_0x2f3ef1,_0x3880d6,_0x4f58d3,_0xaea1a,_0x41df28){const _0x4cfdb9=a64_0x538a5e,_0x1c93f3={'JIzKb':function(_0x4c8515,_0x431300){return _0x4c8515(_0x431300);},'LlTYG':_0x4cfdb9(0x1a4),'oGBLe':function(_0x4c070a,_0x3e5061){return _0x4c070a(_0x3e5061);},'AgTGF':_0x4cfdb9(0x247),'mWWUV':'error','ZuyUs':function(_0xedbab4,_0x2aa2d0){return _0xedbab4===_0x2aa2d0;},'cyKiY':'entry','BKUGh':'close'};_0x10e06c['on'](_0x1c93f3[_0x4cfdb9(0x1ff)],function(){const _0x3761d9=_0x4cfdb9,_0x18e20f={'BFidf':function(_0x2f4f0b,_0x1fb1d1){const _0x5e7b5e=a64_0x23ab;return _0x1c93f3[_0x5e7b5e(0x234)](_0x2f4f0b,_0x1fb1d1);},'UuGGH':_0x1c93f3[_0x3761d9(0x1cd)],'uodMb':function(_0x3b187c,_0x2c734f){const _0x17cdd9=_0x3761d9;return _0x1c93f3[_0x17cdd9(0x234)](_0x3b187c,_0x2c734f);},'MGMeN':function(_0x292103,_0x1abb31){const _0x42e5bd=_0x3761d9;return _0x1c93f3[_0x42e5bd(0x205)](_0x292103,_0x1abb31);},'UPXTi':_0x1c93f3[_0x3761d9(0x1b9)],'lmqvC':_0x1c93f3['mWWUV'],'CrFbw':function(_0x382707,_0x351273){return _0x1c93f3['ZuyUs'](_0x382707,_0x351273);},'HXqNP':_0x1c93f3[_0x3761d9(0x221)]},_0x194097={};_0x194097[_0x3761d9(0x20d)]=!![],yauzl['open'](_0x3880d6,_0x194097,function(_0x44e57f,_0x261614){const _0x3a4a07=_0x3761d9,_0x49628a={'yaesu':function(_0x646d6a,_0x277179){const _0x4c971c=a64_0x23ab;return _0x18e20f[_0x4c971c(0x1c6)](_0x646d6a,_0x277179);},'SHDNp':function(_0xf541a8,_0x828a4c){const _0x1617bb=a64_0x23ab;return _0x18e20f[_0x1617bb(0x248)](_0xf541a8,_0x828a4c);},'FpQLZ':_0x18e20f[_0x3a4a07(0x1d9)],'bXVKt':function(_0x217d1b,_0x128a1a){return _0x18e20f['BFidf'](_0x217d1b,_0x128a1a);},'UwXYA':_0x18e20f['lmqvC'],'pDQwl':function(_0x25c421,_0xf532ba){const _0x3609eb=_0x3a4a07;return _0x18e20f[_0x3609eb(0x1ca)](_0x25c421,_0xf532ba);}};_0x44e57f&&_0x18e20f['MGMeN'](_0x41df28,_0x44e57f),_0x261614[_0x3a4a07(0x1e5)](),_0x261614['on'](_0x18e20f[_0x3a4a07(0x1a1)],_0x1ae857=>{const _0x4355e9=_0x3a4a07,_0x1d5331={'GbnlT':function(_0x342879,_0x20cab3){const _0x13792e=a64_0x23ab;return _0x49628a[_0x13792e(0x1f8)](_0x342879,_0x20cab3);},'ZOCsD':_0x49628a[_0x4355e9(0x22c)]};!_0x2f3ef1&&(_0x2f3ef1=_0x1ae857['fileName']);if(/\/$/[_0x4355e9(0x1b3)](_0x1ae857[_0x4355e9(0x1f4)]))_0x261614[_0x4355e9(0x1e5)]();else{const _0x6cedff=_0x1ae857['fileName'],_0x4e1b0e=path[_0x4355e9(0x1b1)](_0x4f58d3,_0x6cedff);let _0x4490e5;try{_0x4490e5=fs[_0x4355e9(0x1c4)](_0x4e1b0e);}catch(_0x200419){if(BINARY_BUSY_ERROR_CODES['includes'](_0x200419[_0x4355e9(0x229)])){logger[_0x4355e9(0x1d4)](_0x4355e9(0x1c9)+_0x6cedff),fs['unlink'](_0x3880d6,_0x4a2f83=>{const _0x209ae6=_0x4355e9;_0x4a2f83&&logger[_0x209ae6(0x1d4)](_0x209ae6(0x244)+_0x3880d6);}),_0x49628a[_0x4355e9(0x1ee)](_0xaea1a,_0x4e1b0e);return;}_0x49628a[_0x4355e9(0x1d2)](_0x41df28,_0x200419);return;}_0x4490e5['on'](_0x49628a[_0x4355e9(0x1b0)],_0x58b9a4=>{const _0x36dbff=_0x4355e9;BINARY_BUSY_ERROR_CODES[_0x36dbff(0x25e)](_0x58b9a4[_0x36dbff(0x229)])?(logger['warn'](_0x36dbff(0x1ed)+_0x58b9a4[_0x36dbff(0x210)]),_0x4490e5[_0x36dbff(0x242)](),fs['unlink'](_0x3880d6,_0x50b966=>{const _0xba423c=_0x36dbff;_0x50b966&&logger[_0xba423c(0x1d4)](_0xba423c(0x244)+_0x3880d6);}),_0x49628a[_0x36dbff(0x1ee)](_0xaea1a,_0x4e1b0e)):_0x49628a[_0x36dbff(0x1ee)](_0x41df28,_0x58b9a4);}),_0x261614[_0x4355e9(0x1f7)](_0x1ae857,function(_0x5700a3,_0x4236ab){const _0x748f00=_0x4355e9;_0x5700a3&&_0x1d5331['GbnlT'](_0x41df28,_0x5700a3),_0x4236ab['on'](_0x1d5331[_0x748f00(0x200)],function(){const _0x3699cd=_0x748f00;_0x4490e5[_0x3699cd(0x242)](),_0x261614[_0x3699cd(0x1e5)]();}),_0x4236ab['pipe'](_0x4490e5);}),_0x49628a[_0x4355e9(0x1e6)](_0x1ae857['fileName'],_0x2f3ef1)&&_0x261614['close']();}}),_0x261614['on'](_0x18e20f[_0x3a4a07(0x219)],_0x3ab8a0=>{const _0x2501fe=_0x3a4a07;_0x18e20f[_0x2501fe(0x22e)](_0x41df28,_0x3ab8a0);}),_0x261614[_0x3a4a07(0x228)](_0x18e20f[_0x3a4a07(0x1d9)],()=>{const _0x4ee6ca=_0x3a4a07;fs[_0x4ee6ca(0x232)](_0x3880d6,_0x2732fb=>{const _0x1afd40=_0x4ee6ca;_0x2732fb&&logger[_0x1afd40(0x1d4)](_0x1afd40(0x244)+_0x3880d6);}),fs[_0x4ee6ca(0x230)](path[_0x4ee6ca(0x1b1)](_0x4f58d3,_0x2f3ef1),_0x18e20f[_0x4ee6ca(0x25d)],function(_0x5e7de8){const _0x29aeef=_0x4ee6ca;_0x5e7de8&&_0x49628a[_0x29aeef(0x1ee)](_0x41df28,_0x5e7de8),_0x49628a[_0x29aeef(0x1f8)](_0xaea1a,path[_0x29aeef(0x1b1)](_0x4f58d3,_0x2f3ef1));}),_0x261614[_0x4ee6ca(0x242)]();});});});}static['getTestFrameworkDetail'](){const _0x3df9a2=a64_0x538a5e;if(process[_0x3df9a2(0x21a)][_0x3df9a2(0x231)])return JSON[_0x3df9a2(0x1eb)](process[_0x3df9a2(0x21a)][_0x3df9a2(0x231)]);return this[_0x3df9a2(0x1ef)];}static[a64_0x538a5e(0x20c)](){const _0x4c1154=a64_0x538a5e;if(process[_0x4c1154(0x21a)][_0x4c1154(0x236)])return JSON[_0x4c1154(0x1eb)](process[_0x4c1154(0x21a)][_0x4c1154(0x236)]);return this['automationFrameworkDetail'];}static['setFrameworkDetail'](_0x24bc6e,_0x2f90d5){const _0x2ed80a=a64_0x538a5e,_0x29461b={'Dazvm':'3|2|1|0|4','NLryb':function(_0x3c22fb,_0x44f4dd){return _0x3c22fb(_0x44f4dd);},'YcAYd':function(_0x404164,_0x2b3ea7){return _0x404164(_0x2b3ea7);},'fTvjD':function(_0xae4454,_0x1c7bec){return _0xae4454||_0x1c7bec;}},_0x49f367=_0x29461b[_0x2ed80a(0x216)][_0x2ed80a(0x1bc)]('|');let _0x57d3fc=0x0;while(!![]){switch(_0x49f367[_0x57d3fc++]){case'0':process[_0x2ed80a(0x21a)][_0x2ed80a(0x236)]=JSON['stringify'](this[_0x2ed80a(0x1af)]);continue;case'1':this['automationFrameworkDetail']={'name':_0x2f90d5,'version':_0x29461b[_0x2ed80a(0x20a)](getFrameworkVersion,_0x2f90d5)};continue;case'2':this['testFrameworkDetail']={'name':_0x24bc6e,'version':{[_0x24bc6e]:_0x29461b['YcAYd'](getFrameworkVersion,_0x24bc6e)}};continue;case'3':_0x29461b['fTvjD'](!_0x24bc6e,!_0x2f90d5)&&logger[_0x2ed80a(0x1c8)](_0x2ed80a(0x241)+_0x24bc6e+_0x2ed80a(0x235)+_0x2f90d5);continue;case'4':process[_0x2ed80a(0x21a)]['BROWSERSTACK_TEST_FRAMEWORK_DETAIL']=JSON[_0x2ed80a(0x1c1)](this[_0x2ed80a(0x1ef)]);continue;}break;}}static[a64_0x538a5e(0x1b7)](_0x2c201f,_0x2cdb8f){return _0x2c201f+':'+_0x2cdb8f;}static[a64_0x538a5e(0x1b6)](){return process['pid']+':'+threadId;}static[a64_0x538a5e(0x1c7)](_0x2989ce){const _0x58e073=a64_0x538a5e;if(_0x2989ce['testContextOptions']&&_0x2989ce[_0x58e073(0x249)][_0x58e073(0x1d5)])return!![];return![];}static[a64_0x538a5e(0x1d8)](_0xcf61fc){const _0x16795a=a64_0x538a5e;if(_0xcf61fc[_0x16795a(0x249)]&&_0xcf61fc['testContextOptions'][_0x16795a(0x218)])return!![];return![];}static[a64_0x538a5e(0x255)](_0x498a15){const _0x50e5b6=a64_0x538a5e,_0x2b59a2=new RegExp(TestFrameworkConstants[_0x50e5b6(0x213)]);return _0x2b59a2[_0x50e5b6(0x1b3)](_0x498a15);}static[a64_0x538a5e(0x1c2)](_0x57c2fc,_0x5451e7){const _0x158b2c=a64_0x538a5e,_0x3ad0d6={};_0x3ad0d6[_0x158b2c(0x253)]=function(_0x59e54a,_0x1a4a14){return _0x59e54a!==_0x1a4a14;},_0x3ad0d6['ZJWvy']=function(_0x9f423d,_0xd9f9cd){return _0x9f423d===_0xd9f9cd;},_0x3ad0d6[_0x158b2c(0x209)]='object';const _0x376a92=_0x3ad0d6;for(const [_0x4b5bcf,_0x508c82]of Object[_0x158b2c(0x268)](_0x5451e7)){if(_0x376a92[_0x158b2c(0x253)](_0x508c82,null)&&_0x376a92['ZJWvy'](typeof _0x508c82,_0x376a92[_0x158b2c(0x209)])&&!Array[_0x158b2c(0x265)](_0x508c82))_0x57c2fc[_0x4b5bcf]=this[_0x158b2c(0x1c2)](_0x57c2fc[_0x4b5bcf]||{},_0x508c82);else Array[_0x158b2c(0x265)](_0x508c82)?_0x57c2fc[_0x4b5bcf]=(_0x57c2fc[_0x4b5bcf]||[])[_0x158b2c(0x1ad)](_0x508c82):_0x57c2fc[_0x4b5bcf]=_0x508c82;}return _0x57c2fc;}}module[a64_0x538a5e(0x1ba)]=CLIUtils;