const a64_0x51931b=a64_0x37cf;function a64_0x165f(){const _0x4a5d15=['trim','statSync','code','existsSync','yeeoa','getSdkVersion','readEntry','version','No\x20writable\x20directory\x20available\x20for\x20the\x20CLI','../../helpers/performance/performance-tester.js','NZfIG','../../helpers/helper','checkAndUpdateCli','Binary\x20file\x20became\x20busy\x20during\x20write,\x20continuing\x20with\x20existing\x20binary:\x20','platform','kJNxJ','kfMKs','SDK_CLI_BIN_PATH','close','BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL','iuPaO','warn','HNVTn','openReadStream','automationFrameworkDetail','ZWQQv','setFrameworkDetail','HSdDt','BhLOL','Existing\x20binary\x20is\x20currently\x20in\x20use,\x20skipping\x20update\x20and\x20continuing\x20with\x20current\x20version:\x20','UFyWZ','2044eneUpP','error','BROWSERSTACK_FILES_DIR','createWriteStream','matchHookRegex','BZvWf','join','debug','isDirectory','mtime','Failed\x20to\x20delete\x20zip\x20file:\x20','exports','Development\x20Cli\x20Path:\x20','requestToUpdateCLI','HOOK_REGEX','gsjiD','EefDD','listen','data','./instances/testFrameworkInstance.js','GET','testContextOptions','SDK_CLI_DOWNLOAD','214628NZEZWa','child_process','length','url','rAwyO','./state/testFrameworkState.js','Got\x20Error\x20in\x20SDK\x20binary\x20downloading\x20request\x20','map','getExistingCliPath','0755','Unable\x20to\x20set\x20required\x20permissions\x20to\x20','cGckQ','Using\x20BROWSERSTACK_BINARY_URL\x20from\x20env\x20variable:\x20','testFrameworkDetail','FSBba','jnoQI','fekZa','util','imwDO','getCliDir','Test\x20or\x20Automation\x20framework\x20not\x20provided\x20testFramework=','NJgkc','zjsHP','reduce','AJMpt','BROWSERSTACK_CLI_ENV','fqpGJ','getSdkLanguage','KDUzH','BROWSERSTACK_BINARY_URL','TDlED','setupCliPath','entries','wxVGQ','LwlLj','xkbTB','SDK_CLI_CHECK_UPDATE','env','pid','ATkUi','Failed\x20to\x20download\x20SDK\x20binary,\x20Exception:\x20','1801954ztVERh','mIblm','fhzhe','dviiK','stringify','development','../utils/constants','readdirSync','parse','QFEBA','format','shouldSkipSessionStatus','IyVEe','downloaded_file.zip','tmpdir','Resolving\x20with\x20stdout:\x20\x22','end','SOorY','downloadLatestBinary','cli_version','timeout','RpIlO','skipSessionStatus','Current\x20CLI\x20Path\x20Found:\x20','Binary\x20file\x20is\x20currently\x20in\x20use,\x20skipping\x20download\x20and\x20continuing\x20with\x20existing\x20binary:\x20','959487lCdTjw','sTrAs','Configuring\x20Cli\x20path.','includes','Folder\x20does\x20not\x20exist:\x20','test','filePath','runShellCommand','10374QFSpIN','DKmJb','LIREh','jQFPi','8074616oIfeGs','object','concat','response\x20','info','entry','ShuWV','Downloading\x20SDK\x20binary\x20from:\x20','KesVS','getHookRegistryKey','BROWSERSTACK_TEST_FRAMEWORK_DETAIL','Unable\x20to\x20get\x20writable\x20directory,\x20exception\x20','CjuTn','isBinaryBusy','fileName','Error\x20in\x20setting\x20up\x20cli\x20path\x20directory,\x20Exception:\x20','../../helpers/utilities','cwd','rtmEf','pipe','Folder\x20','1503954lnpXbd','unlink','jnjoG','Jpnvw','40ffxxQr',',\x20automationFramework=','rjgxI','../../helpers/performance/constants','isArray','QfQNp','boQcj','Setting\x20required\x20permissions\x20to\x20','unix:/tmp/sdk-platform-','follow-redirects','mergeObject','node','ueXYv','RAfdi','49985JqBIal','HnNeY','path','xLAfd','136AyiNPP','JigrT','skipSessionName','downloadFileStream','1RHcTcE','shouldSkipSessionName','arch','.browserstack','lazyEntries','./framework/constants/testFrameworkConstants.js','4|1|0|2|3','get','FdtAG','NuCor','GtCLB','bwdce','../../helpers/test-observability/utils.js','CwfWT','filter','\x20already\x20exists','QBCaj','.sock','juhhm','isFile','getWritableDir','chmod','AyEvb','startsWith','../utils/apiUtilityMethods.js','Got\x20Error\x20while\x20downloading\x20SDK\x20binary\x20file\x20%s'];a64_0x165f=function(){return _0x4a5d15;};return a64_0x165f();}(function(_0x282746,_0x113771){const _0x102b15=a64_0x37cf,_0xea7f08=_0x282746();while(!![]){try{const _0x3fbab9=-parseInt(_0x102b15(0x27b))/0x1*(parseInt(_0x102b15(0x1fe))/0x2)+parseInt(_0x102b15(0x240))/0x3+parseInt(_0x102b15(0x277))/0x4*(parseInt(_0x102b15(0x273))/0x5)+parseInt(_0x102b15(0x248))/0x6*(-parseInt(_0x102b15(0x1e7))/0x7)+parseInt(_0x102b15(0x24c))/0x8+parseInt(_0x102b15(0x261))/0x9+parseInt(_0x102b15(0x265))/0xa*(-parseInt(_0x102b15(0x227))/0xb);if(_0x3fbab9===_0x113771)break;else _0xea7f08['push'](_0xea7f08['shift']());}catch(_0x59d498){_0xea7f08['push'](_0xea7f08['shift']());}}}(a64_0x165f,0x8ad92));const fs=require('fs'),os=require('os'),url=require('url'),path=require(a64_0x51931b(0x275)),{exec}=require(a64_0x51931b(0x1ff)),{https}=require(a64_0x51931b(0x26e)),yauzl=require('yauzl'),util=require(a64_0x51931b(0x20f)),{getFrameworkVersion}=require(a64_0x51931b(0x287)),{threadId}=require('worker_threads'),PerformanceTester=require(a64_0x51931b(0x1d1)),{EVENTS:PerformanceEvents}=require(a64_0x51931b(0x268)),{isNullOrEmpty,isModifiable,setReadWriteExecuteAccess}=require(a64_0x51931b(0x25c)),{isTrue,createDir,getHostInfo,nodeRequest,nestedKeyValue}=require(a64_0x51931b(0x1d3)),{UPDATED_CLI_ENDPOINT,BINARY_BUSY_ERROR_CODES}=require(a64_0x51931b(0x22d)),{createClassLogger}=require('../../helpers/classLogger.js'),TestFrameworkInstance=require(a64_0x51931b(0x1fa)),HookState=require('./state/hookState.js'),TestFrameworkState=require(a64_0x51931b(0x203)),AutomationFrameworkState=require('./state/automationFrameworkState.js'),TestFrameworkConstants=require(a64_0x51931b(0x280)),logger=createClassLogger('CLIUtils'),{getBStackAPIUrl}=require(a64_0x51931b(0x1c6));class CLIUtils{[a64_0x51931b(0x1e0)]={};[a64_0x51931b(0x20b)]={};static['isDevelopmentEnv'](){const _0x33d938=a64_0x51931b,_0xf2ba47={};_0xf2ba47[_0x33d938(0x21c)]=function(_0x5b0679,_0x5ac0df){return _0x5b0679===_0x5ac0df;},_0xf2ba47[_0x33d938(0x1d8)]=_0x33d938(0x22c);const _0x35f38a=_0xf2ba47;return _0x35f38a['TDlED'](process['env'][_0x33d938(0x217)],_0x35f38a['kfMKs']);}static['getCLIParamsForDevEnv'](){const _0x177042=a64_0x51931b,_0x575c23={};return _0x575c23['id']=process['env'][_0x177042(0x217)],_0x575c23[_0x177042(0x1f8)]=_0x177042(0x26d)+process[_0x177042(0x223)][_0x177042(0x217)]+_0x177042(0x28c),_0x575c23;}static[a64_0x51931b(0x1cd)](){const _0x3b08b0=a64_0x51931b,_0x5de6ed={'VyYRZ':function(_0x264fe8,_0x3e33b1){return _0x264fe8(_0x3e33b1);},'RAfdi':'../../../package.json'};return _0x5de6ed['VyYRZ'](require,_0x5de6ed[_0x3b08b0(0x272)])['version'];}static[a64_0x51931b(0x219)](){const _0x1638c9=a64_0x51931b,_0x40ba0f={};_0x40ba0f[_0x1638c9(0x21a)]=_0x1638c9(0x270);const _0x3f3505=_0x40ba0f;return _0x3f3505[_0x1638c9(0x21a)];}static async[a64_0x51931b(0x21d)](_0x5f27dc){const _0x598cc9=a64_0x51931b,_0x85c4b3={'fekZa':_0x598cc9(0x242),'BZvWf':function(_0x30c419,_0x19a6aa){return _0x30c419(_0x19a6aa);},'dviiK':_0x598cc9(0x1d0)};logger['debug'](_0x85c4b3[_0x598cc9(0x20e)]);const _0x2b1b9f=process[_0x598cc9(0x223)][_0x598cc9(0x1d9)];if(!_0x85c4b3[_0x598cc9(0x1ec)](isNullOrEmpty,_0x2b1b9f))return logger[_0x598cc9(0x1ee)](_0x598cc9(0x1f3)+_0x2b1b9f),_0x2b1b9f;try{const _0x4a0ac9=this[_0x598cc9(0x211)]();if(_0x85c4b3['BZvWf'](isNullOrEmpty,_0x4a0ac9))throw new Error(_0x85c4b3[_0x598cc9(0x22a)]);const _0x4b1127=this[_0x598cc9(0x206)](_0x4a0ac9),_0x5e345e=await this[_0x598cc9(0x1d4)](_0x4b1127,_0x4a0ac9,_0x5f27dc);return logger[_0x598cc9(0x1ee)]('Resolved\x20binary\x20path:\x20'+_0x5e345e),_0x5e345e;}catch(_0xb338aa){logger['debug'](_0x598cc9(0x25b)+util[_0x598cc9(0x231)](_0xb338aa));}return null;}static async[a64_0x51931b(0x1d4)](_0x1378e0,_0x1b8872,_0x1b886b){const _0x3dae50=a64_0x51931b,_0x193a80={'AJMpt':function(_0x3b8d9b){return _0x3b8d9b();},'fhzhe':function(_0x5a5823,_0x256141){return _0x5a5823(_0x256141);},'FdtAG':function(_0x4e2844,_0x1c7e6b,_0x51d9e5){return _0x4e2844(_0x1c7e6b,_0x51d9e5);},'NZfIG':_0x3dae50(0x1f9),'jnjoG':'url','mIblm':function(_0x2b95a7,_0x4b6251){return _0x2b95a7(_0x4b6251);}};PerformanceTester['start'](PerformanceEvents[_0x3dae50(0x222)]),logger[_0x3dae50(0x250)](_0x3dae50(0x23e)+_0x1378e0);const _0x49c4dc=_0x193a80[_0x3dae50(0x216)](getHostInfo),_0x307de7={'sdk_version':CLIUtils[_0x3dae50(0x1cd)](),'os':_0x49c4dc[_0x3dae50(0x1d6)],'os_arch':_0x49c4dc[_0x3dae50(0x27d)],'cli_version':'0','sdk_language':this['getSdkLanguage']()};!_0x193a80[_0x3dae50(0x229)](isNullOrEmpty,_0x1378e0)&&(_0x307de7[_0x3dae50(0x23a)]=await this[_0x3dae50(0x247)](_0x1378e0+'\x20version'));const _0x263596=await this[_0x3dae50(0x1f4)](_0x307de7,_0x1b886b);process[_0x3dae50(0x223)]['BROWSERSTACK_BINARY_URL']&&(logger['info'](_0x3dae50(0x20a)+process[_0x3dae50(0x223)][_0x3dae50(0x21b)]),_0x263596[_0x3dae50(0x1f9)][_0x3dae50(0x201)]=process[_0x3dae50(0x223)][_0x3dae50(0x21b)]);if(_0x193a80[_0x3dae50(0x283)](nestedKeyValue,_0x263596,[_0x193a80[_0x3dae50(0x1d2)],_0x193a80[_0x3dae50(0x263)]])){logger[_0x3dae50(0x1ee)]('Need\x20to\x20update\x20binary,\x20current\x20binary\x20version:\x20'+_0x307de7['cli_version']);if(!_0x193a80[_0x3dae50(0x228)](isNullOrEmpty,_0x1378e0)&&this[_0x3dae50(0x259)](_0x1378e0))return logger[_0x3dae50(0x1dd)](_0x3dae50(0x1e5)+_0x1378e0),PerformanceTester['end'](PerformanceEvents[_0x3dae50(0x222)]),_0x1378e0;const _0x468131=await this['downloadLatestBinary'](_0x193a80[_0x3dae50(0x283)](nestedKeyValue,_0x263596,[_0x193a80[_0x3dae50(0x1d2)],_0x193a80[_0x3dae50(0x263)]]),_0x1b8872);return PerformanceTester[_0x3dae50(0x237)](PerformanceEvents['SDK_CLI_CHECK_UPDATE']),_0x468131;}return PerformanceTester[_0x3dae50(0x237)](PerformanceEvents[_0x3dae50(0x222)]),_0x1378e0;}static[a64_0x51931b(0x211)](){const _0x1f5129=a64_0x51931b,_0x5f0fa1={'euLcj':function(_0x464364,_0x43fefa){return _0x464364(_0x43fefa);},'ozlFD':_0x1f5129(0x1d0),'DKmJb':'cli','IBJHn':function(_0x68fcfe,_0x5e7073){return _0x68fcfe(_0x5e7073);}},_0x277ff1=this['getWritableDir']();try{if(_0x5f0fa1['euLcj'](isNullOrEmpty,_0x277ff1))throw new Error(_0x5f0fa1['ozlFD']);const _0x524e5d=path[_0x1f5129(0x1ed)](_0x277ff1,_0x5f0fa1[_0x1f5129(0x249)]);return!fs['existsSync'](_0x524e5d)&&_0x5f0fa1['IBJHn'](createDir,_0x524e5d),_0x524e5d;}catch(_0x18f69d){logger[_0x1f5129(0x1ee)]('Error\x20in\x20getting\x20writable\x20directory,\x20writableDir='+util['format'](_0x18f69d));}}static[a64_0x51931b(0x28f)](){const _0x71fdcb=a64_0x51931b,_0x2eede8={'dOzve':_0x71fdcb(0x27e),'HNVTn':function(_0x1b3455,_0x46dedf){return _0x1b3455(_0x46dedf);},'LwlLj':function(_0x31add8,_0x478e58){return _0x31add8(_0x478e58);},'NuCor':function(_0x67e788,_0x64f105){return _0x67e788(_0x64f105);},'ECJMS':function(_0x3a02b5,_0x4c673e){return _0x3a02b5(_0x4c673e);},'BhLOL':function(_0x1d729e,_0x1384aa){return _0x1d729e(_0x1384aa);},'QfQNp':function(_0x12269a,_0x446882){return _0x12269a(_0x446882);}},_0x34da2e=[process['env'][_0x71fdcb(0x1e9)],path[_0x71fdcb(0x1ed)](os['homedir'](),_0x2eede8['dOzve']),path[_0x71fdcb(0x1ed)](os[_0x71fdcb(0x235)](),_0x2eede8['dOzve'])];for(const _0x1eb091 of _0x34da2e){if(_0x2eede8[_0x71fdcb(0x1de)](isNullOrEmpty,_0x1eb091))continue;try{if(fs['existsSync'](_0x1eb091)){logger['debug'](_0x71fdcb(0x260)+_0x1eb091+_0x71fdcb(0x28a));if(!_0x2eede8[_0x71fdcb(0x220)](isModifiable,_0x1eb091)){logger['debug'](_0x71fdcb(0x26c)+_0x1eb091);const _0x2b4efa=_0x2eede8[_0x71fdcb(0x220)](setReadWriteExecuteAccess,_0x1eb091);if(!_0x2eede8[_0x71fdcb(0x284)](isTrue,_0x2b4efa)){logger[_0x71fdcb(0x1dd)](_0x71fdcb(0x208)+_0x1eb091);continue;}}}else{logger[_0x71fdcb(0x1ee)](_0x71fdcb(0x244)+_0x1eb091),_0x2eede8['ECJMS'](createDir,_0x1eb091),logger['debug']('Setting\x20required\x20permissions\x20to\x20'+_0x1eb091);const _0x4171c6=_0x2eede8[_0x71fdcb(0x1e4)](setReadWriteExecuteAccess,_0x1eb091);!_0x2eede8[_0x71fdcb(0x26a)](isTrue,_0x4171c6)&&logger['warn'](_0x71fdcb(0x208)+_0x1eb091);}return _0x1eb091;}catch(_0x5d1cec){logger[_0x71fdcb(0x1e8)](_0x71fdcb(0x257)+util[_0x71fdcb(0x231)](_0x5d1cec));}}return null;}static[a64_0x51931b(0x206)](_0x2ce40a){const _0x12b5c9=a64_0x51931b,_0x8eccf5={};_0x8eccf5[_0x12b5c9(0x225)]=function(_0x58b54b,_0x385503){return _0x58b54b>_0x385503;};const _0x4e821e=_0x8eccf5;try{if(!fs[_0x12b5c9(0x1cb)](_0x2ce40a)||!fs['statSync'](_0x2ce40a)[_0x12b5c9(0x1ef)]())return'';const _0x17263d=fs[_0x12b5c9(0x22e)](_0x2ce40a)[_0x12b5c9(0x205)](_0x1ec75f=>path[_0x12b5c9(0x1ed)](_0x2ce40a,_0x1ec75f))[_0x12b5c9(0x289)](_0x4923fa=>fs['statSync'](_0x4923fa)[_0x12b5c9(0x28e)]()&&path['basename'](_0x4923fa)[_0x12b5c9(0x1c5)]('binary-'));if(_0x4e821e[_0x12b5c9(0x225)](_0x17263d[_0x12b5c9(0x200)],0x0)){const _0x494d0f=_0x17263d['map'](_0xdaba4e=>({'filePath':_0xdaba4e,'mtime':fs[_0x12b5c9(0x1c9)](_0xdaba4e)[_0x12b5c9(0x1f0)]}))[_0x12b5c9(0x215)]((_0x4053e3,_0x1cc73f)=>{const _0x12c7cb=_0x12b5c9;if(!_0x4053e3||!_0x4053e3['mtime'])return _0x1cc73f;if(_0x4e821e[_0x12c7cb(0x225)](_0x1cc73f[_0x12c7cb(0x1f0)],_0x4053e3[_0x12c7cb(0x1f0)]))return _0x1cc73f;return _0x4053e3;},{});return _0x494d0f?_0x494d0f[_0x12b5c9(0x246)]:'';}return'';}catch(_0x992c2a){return logger[_0x12b5c9(0x1e8)]('Error\x20while\x20reading\x20CLI\x20path:\x20'+util[_0x12b5c9(0x231)](_0x992c2a)),'';}}static [a64_0x51931b(0x1f4)]=async(_0x1d6da0,_0x218e9b)=>{const _0x150909=a64_0x51931b,_0x40c02a={'sTrAs':function(_0x1115dd,_0xfcf3c2,_0x29bd84,_0x2351d8,_0x975b2c){return _0x1115dd(_0xfcf3c2,_0x29bd84,_0x2351d8,_0x975b2c);},'XWjZI':_0x150909(0x1fb)},_0xbf619={};_0xbf619['qs']=_0x1d6da0;const _0x5aa4a7=await _0x40c02a[_0x150909(0x241)](nodeRequest,_0x40c02a['XWjZI'],UPDATED_CLI_ENDPOINT,_0xbf619,_0x218e9b);return logger['debug'](_0x150909(0x24f)+JSON[_0x150909(0x22b)](_0x5aa4a7)),_0x5aa4a7;};static['isBinaryBusy'](_0x47a9f5){const _0x13ea91=a64_0x51931b;try{const _0x59550a=fs['openSync'](_0x47a9f5,'r+');return fs['closeSync'](_0x59550a),![];}catch(_0x5e62d9){if(BINARY_BUSY_ERROR_CODES['includes'](_0x5e62d9[_0x13ea91(0x1ca)]))return logger['debug']('Binary\x20is\x20busy:\x20'+_0x47a9f5),!![];return logger[_0x13ea91(0x1ee)]('Error\x20checking\x20if\x20binary\x20is\x20busy:\x20'+_0x5e62d9['message']),![];}}static['runShellCommand'](_0x539697,_0x5f441e=''){const _0x41c3ac=a64_0x51931b,_0xe96bd0={'wxVGQ':function(_0x860aad,_0x1950a2){return _0x860aad(_0x1950a2);},'ueXYv':'SHELL_EXECUTE_ERROR','Xftsf':_0x41c3ac(0x1cf),'zjsHP':function(_0x2b7ae3,_0x51cd4e){return _0x2b7ae3(_0x51cd4e);},'NJgkc':function(_0x376528,_0x48bd46,_0x1f221f,_0x55247c){return _0x376528(_0x48bd46,_0x1f221f,_0x55247c);},'GtCLB':'error'};return new Promise((_0x1dc8e0,_0x26e68d)=>{const _0x1bf0be=_0x41c3ac,_0x23ed03={'HnNeY':_0xe96bd0['Xftsf'],'boQcj':function(_0x51e9af,_0x15906d){const _0x500d6c=a64_0x37cf;return _0xe96bd0[_0x500d6c(0x21f)](_0x51e9af,_0x15906d);},'EefDD':function(_0x2d1dbf,_0xf1821a){const _0x4dc4a0=a64_0x37cf;return _0xe96bd0[_0x4dc4a0(0x214)](_0x2d1dbf,_0xf1821a);},'jnoQI':_0xe96bd0[_0x1bf0be(0x271)],'JigrT':function(_0x2443a9,_0x373d29){const _0x5b1b46=_0x1bf0be;return _0xe96bd0[_0x5b1b46(0x21f)](_0x2443a9,_0x373d29);}},_0x572f82={};_0x572f82[_0x1bf0be(0x25d)]=_0x5f441e,_0x572f82[_0x1bf0be(0x23b)]=0x1388;const _0x5d035c=_0xe96bd0[_0x1bf0be(0x213)](exec,_0x539697,_0x572f82,(_0x4af90a,_0x40d776,_0x16413a)=>{const _0x46ee44=_0x1bf0be;if(_0x4af90a){if(_0x539697[_0x46ee44(0x243)](_0x23ed03[_0x46ee44(0x274)])&&(_0x40d776['trim']()||_0x16413a[_0x46ee44(0x1c8)]())){const _0x345305=_0x40d776['trim']()||_0x16413a[_0x46ee44(0x1c8)]();logger['debug']('CLI\x20version\x20found\x20despite\x20error:\x20\x22'+_0x345305+'\x22'),_0x23ed03[_0x46ee44(0x26b)](_0x1dc8e0,_0x345305);}else _0x23ed03[_0x46ee44(0x1f7)](_0x1dc8e0,_0x16413a[_0x46ee44(0x1c8)]()||_0x23ed03[_0x46ee44(0x20d)]);}else logger['debug'](_0x46ee44(0x236)+_0x40d776[_0x46ee44(0x1c8)]()+'\x22'),_0x23ed03[_0x46ee44(0x278)](_0x1dc8e0,_0x40d776[_0x46ee44(0x1c8)]());});_0x5d035c['on'](_0xe96bd0[_0x1bf0be(0x285)],()=>{const _0x63890f=_0x1bf0be;_0xe96bd0[_0x63890f(0x21f)](_0x1dc8e0,_0xe96bd0['ueXYv']);});});}static [a64_0x51931b(0x239)]=async(_0x470807,_0x593642)=>{const _0x41eafc=a64_0x51931b,_0x10d83d={'QBCaj':'Got\x20Error\x20in\x20SDK\x20binary\x20download\x20response\x20%s','fqpGJ':function(_0x59c464,_0x19e760){return _0x59c464(_0x19e760);},'gsjiD':_0x41eafc(0x1c7),'IyVEe':function(_0x206e96,_0x450b11){return _0x206e96(_0x450b11);},'RpIlO':_0x41eafc(0x1e8),'LIREh':function(_0x38f667,_0x516f89){return _0x38f667(_0x516f89);},'CjuTn':_0x41eafc(0x234)};PerformanceTester['start'](PerformanceEvents['SDK_CLI_DOWNLOAD']),logger[_0x41eafc(0x1ee)](_0x41eafc(0x253)+_0x470807);try{const _0x3af7dc=url['parse'](_0x470807),_0x4787c4=path[_0x41eafc(0x1ed)](_0x593642,_0x10d83d[_0x41eafc(0x258)]),_0x339b31=fs['createWriteStream'](_0x4787c4);return new Promise((_0x257893,_0x18fc31)=>{const _0x1b677a=_0x41eafc;https[_0x1b677a(0x282)](_0x3af7dc,function(_0x3c0eb3){const _0x1c83f2=_0x1b677a,_0x236492={'ZWQQv':_0x10d83d[_0x1c83f2(0x28b)],'JlDxR':function(_0x4f28a6,_0x2d87c5){const _0x306046=_0x1c83f2;return _0x10d83d[_0x306046(0x218)](_0x4f28a6,_0x2d87c5);},'QFEBA':_0x10d83d[_0x1c83f2(0x1f6)],'kFMMq':function(_0x24abc3,_0x3382ea){const _0x52ab7c=_0x1c83f2;return _0x10d83d[_0x52ab7c(0x233)](_0x24abc3,_0x3382ea);}},_0x5bd86f=null;_0x3c0eb3[_0x1c83f2(0x25f)](_0x339b31),_0x3c0eb3['on'](_0x10d83d[_0x1c83f2(0x23c)],function(_0x1f7740){const _0x5f2e7a=_0x1c83f2;logger[_0x5f2e7a(0x1e8)](util['format'](_0x236492[_0x5f2e7a(0x1e1)],_0x1f7740)),PerformanceTester[_0x5f2e7a(0x237)](PerformanceEvents['SDK_CLI_DOWNLOAD'],![],util[_0x5f2e7a(0x231)](_0x1f7740)),_0x236492['JlDxR'](_0x18fc31,_0x1f7740);}),_0x339b31['on'](_0x10d83d[_0x1c83f2(0x23c)],function(_0x4b8f79){const _0x5e5148=_0x1c83f2;logger[_0x5e5148(0x1e8)](util[_0x5e5148(0x231)](_0x236492[_0x5e5148(0x230)],_0x4b8f79)),PerformanceTester[_0x5e5148(0x237)](PerformanceEvents[_0x5e5148(0x1fd)],![],util[_0x5e5148(0x231)](_0x4b8f79)),_0x236492['kFMMq'](_0x18fc31,_0x4b8f79);}),CLIUtils[_0x1c83f2(0x27a)](_0x339b31,_0x5bd86f,_0x4787c4,_0x593642,_0x257893,_0x18fc31),PerformanceTester[_0x1c83f2(0x237)](PerformanceEvents['SDK_CLI_DOWNLOAD']);})['on'](_0x10d83d[_0x1b677a(0x23c)],function(_0x5638b9){const _0x2e3aae=_0x1b677a;logger[_0x2e3aae(0x1e8)](_0x2e3aae(0x204)+util[_0x2e3aae(0x231)](_0x5638b9)),PerformanceTester['end'](PerformanceEvents[_0x2e3aae(0x1fd)],![],util['format'](_0x5638b9)),_0x10d83d[_0x2e3aae(0x24a)](_0x18fc31,_0x5638b9);});});}catch(_0x23783e){PerformanceTester['end'](PerformanceEvents[_0x41eafc(0x1fd)],![],util[_0x41eafc(0x231)](_0x23783e)),logger[_0x41eafc(0x1ee)](_0x41eafc(0x226)+util[_0x41eafc(0x231)](_0x23783e));}};static[a64_0x51931b(0x27a)](_0xdc5cf4,_0x3685c0,_0x1b1130,_0x19f2f2,_0x5438c5,_0xecaa0b){const _0x3cbd8a=a64_0x51931b,_0x4cccb4={'imwDO':function(_0x27134d,_0x381292){return _0x27134d(_0x381292);},'xLAfd':function(_0x4f0784,_0x4cf5b4){return _0x4f0784(_0x4cf5b4);},'KesVS':_0x3cbd8a(0x251),'UFyWZ':_0x3cbd8a(0x1e8),'jQFPi':'end','rjgxI':function(_0x556f33,_0x24319a){return _0x556f33===_0x24319a;},'FSBba':_0x3cbd8a(0x207),'Jpnvw':_0x3cbd8a(0x1da)};_0xdc5cf4['on'](_0x4cccb4[_0x3cbd8a(0x264)],function(){const _0x56a3ea=_0x3cbd8a,_0x4ed93b={'kSCCz':function(_0x226ace,_0x5f0d47){return _0x4cccb4['imwDO'](_0x226ace,_0x5f0d47);},'iuPaO':_0x4cccb4[_0x56a3ea(0x24b)],'rtmEf':function(_0x495e1a,_0x3e53e0){const _0x934a91=_0x56a3ea;return _0x4cccb4[_0x934a91(0x210)](_0x495e1a,_0x3e53e0);},'AyEvb':function(_0x1a041f,_0x92ffe8){return _0x4cccb4['xLAfd'](_0x1a041f,_0x92ffe8);},'xkbTB':_0x4cccb4[_0x56a3ea(0x1e6)],'yeeoa':function(_0x56da2c,_0x448304){const _0xa11a19=_0x56a3ea;return _0x4cccb4[_0xa11a19(0x267)](_0x56da2c,_0x448304);},'KUwSc':function(_0x53ace3,_0x4ee5ec){const _0x384c2f=_0x56a3ea;return _0x4cccb4[_0x384c2f(0x276)](_0x53ace3,_0x4ee5ec);},'rAwyO':_0x4cccb4[_0x56a3ea(0x20c)]},_0x38a57f={};_0x38a57f[_0x56a3ea(0x27f)]=!![],yauzl['open'](_0x1b1130,_0x38a57f,function(_0x17c7f8,_0x2253ae){const _0x36fc93=_0x56a3ea,_0x4036b4={'HSdDt':function(_0x42fcdf,_0x27715b){const _0x417679=a64_0x37cf;return _0x4cccb4[_0x417679(0x210)](_0x42fcdf,_0x27715b);}};_0x17c7f8&&_0x4cccb4[_0x36fc93(0x276)](_0xecaa0b,_0x17c7f8),_0x2253ae[_0x36fc93(0x1ce)](),_0x2253ae['on'](_0x4cccb4[_0x36fc93(0x254)],_0x2e123e=>{const _0x4e9d42=_0x36fc93,_0x5cc6a2={'kJNxJ':function(_0x195aad,_0x17ad32){return _0x4ed93b['kSCCz'](_0x195aad,_0x17ad32);},'fmpwh':function(_0x2ce1f9,_0x418655){return _0x4ed93b['kSCCz'](_0x2ce1f9,_0x418655);},'SOorY':_0x4ed93b[_0x4e9d42(0x1dc)]};!_0x3685c0&&(_0x3685c0=_0x2e123e[_0x4e9d42(0x25a)]);if(/\/$/[_0x4e9d42(0x245)](_0x2e123e[_0x4e9d42(0x25a)]))_0x2253ae[_0x4e9d42(0x1ce)]();else{const _0x397046=_0x2e123e[_0x4e9d42(0x25a)],_0x217f20=path[_0x4e9d42(0x1ed)](_0x19f2f2,_0x397046);let _0x37a3eb;try{_0x37a3eb=fs[_0x4e9d42(0x1ea)](_0x217f20);}catch(_0x190d5b){if(BINARY_BUSY_ERROR_CODES[_0x4e9d42(0x243)](_0x190d5b['code'])){logger['warn'](_0x4e9d42(0x23f)+_0x397046),fs[_0x4e9d42(0x262)](_0x1b1130,_0x2ba6d3=>{const _0x43ea9f=_0x4e9d42;_0x2ba6d3&&logger[_0x43ea9f(0x1dd)]('Failed\x20to\x20delete\x20zip\x20file:\x20'+_0x1b1130);}),_0x4ed93b[_0x4e9d42(0x25e)](_0x5438c5,_0x217f20);return;}_0x4ed93b[_0x4e9d42(0x291)](_0xecaa0b,_0x190d5b);return;}_0x37a3eb['on'](_0x4ed93b[_0x4e9d42(0x221)],_0x4f80a9=>{const _0x4701cd=_0x4e9d42;BINARY_BUSY_ERROR_CODES[_0x4701cd(0x243)](_0x4f80a9[_0x4701cd(0x1ca)])?(logger['warn'](_0x4701cd(0x1d5)+_0x4f80a9['message']),_0x37a3eb[_0x4701cd(0x1da)](),fs[_0x4701cd(0x262)](_0x1b1130,_0x58fc1e=>{const _0x236a22=_0x4701cd;_0x58fc1e&&logger[_0x236a22(0x1dd)](_0x236a22(0x1f1)+_0x1b1130);}),_0x5cc6a2[_0x4701cd(0x1d7)](_0x5438c5,_0x217f20)):_0x5cc6a2[_0x4701cd(0x1d7)](_0xecaa0b,_0x4f80a9);}),_0x2253ae[_0x4e9d42(0x1df)](_0x2e123e,function(_0x1ea603,_0x11a3b2){const _0x436fa1=_0x4e9d42;_0x1ea603&&_0x5cc6a2['fmpwh'](_0xecaa0b,_0x1ea603),_0x11a3b2['on'](_0x5cc6a2[_0x436fa1(0x238)],function(){const _0x521977=_0x436fa1;_0x37a3eb['close'](),_0x2253ae[_0x521977(0x1ce)]();}),_0x11a3b2[_0x436fa1(0x25f)](_0x37a3eb);}),_0x4ed93b[_0x4e9d42(0x1cc)](_0x2e123e[_0x4e9d42(0x25a)],_0x3685c0)&&_0x2253ae[_0x4e9d42(0x1da)]();}}),_0x2253ae['on'](_0x4cccb4[_0x36fc93(0x1e6)],_0x106893=>{_0x4ed93b['KUwSc'](_0xecaa0b,_0x106893);}),_0x2253ae['once'](_0x4cccb4[_0x36fc93(0x24b)],()=>{const _0x319ec9=_0x36fc93;fs['unlink'](_0x1b1130,_0x2f09a0=>{const _0x64eec7=a64_0x37cf;_0x2f09a0&&logger['warn'](_0x64eec7(0x1f1)+_0x1b1130);}),fs[_0x319ec9(0x290)](path['join'](_0x19f2f2,_0x3685c0),_0x4ed93b[_0x319ec9(0x202)],function(_0x6cc713){const _0x44d66b=_0x319ec9;_0x6cc713&&_0x4036b4[_0x44d66b(0x1e3)](_0xecaa0b,_0x6cc713),_0x4036b4[_0x44d66b(0x1e3)](_0x5438c5,path[_0x44d66b(0x1ed)](_0x19f2f2,_0x3685c0));}),_0x2253ae['close']();});});});}static['getTestFrameworkDetail'](){const _0x92f19=a64_0x51931b;if(process[_0x92f19(0x223)][_0x92f19(0x256)])return JSON[_0x92f19(0x22f)](process[_0x92f19(0x223)]['BROWSERSTACK_TEST_FRAMEWORK_DETAIL']);return this[_0x92f19(0x20b)];}static['getAutomationFrameworkDetail'](){const _0x324ece=a64_0x51931b;if(process['env'][_0x324ece(0x1db)])return JSON['parse'](process['env']['BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL']);return this['automationFrameworkDetail'];}static[a64_0x51931b(0x1e2)](_0x1bccd7,_0x50261e){const _0xc42368=a64_0x51931b,_0x57bea0={'IVKsN':_0xc42368(0x281),'CwfWT':function(_0x412007,_0x36e296){return _0x412007(_0x36e296);},'bwdce':function(_0x5a95f2,_0x494838){return _0x5a95f2||_0x494838;}},_0x467880=_0x57bea0['IVKsN']['split']('|');let _0x2c2b06=0x0;while(!![]){switch(_0x467880[_0x2c2b06++]){case'0':this[_0xc42368(0x1e0)]={'name':_0x50261e,'version':_0x57bea0[_0xc42368(0x288)](getFrameworkVersion,_0x50261e)};continue;case'1':this['testFrameworkDetail']={'name':_0x1bccd7,'version':{[_0x1bccd7]:_0x57bea0[_0xc42368(0x288)](getFrameworkVersion,_0x1bccd7)}};continue;case'2':process['env'][_0xc42368(0x1db)]=JSON[_0xc42368(0x22b)](this['automationFrameworkDetail']);continue;case'3':process[_0xc42368(0x223)][_0xc42368(0x256)]=JSON['stringify'](this[_0xc42368(0x20b)]);continue;case'4':_0x57bea0[_0xc42368(0x286)](!_0x1bccd7,!_0x50261e)&&logger[_0xc42368(0x1ee)](_0xc42368(0x212)+_0x1bccd7+_0xc42368(0x266)+_0x50261e);continue;}break;}}static[a64_0x51931b(0x255)](_0x42f6cf,_0x41c132){return _0x42f6cf+':'+_0x41c132;}static['getCurrentInstanceName'](){const _0x182d90=a64_0x51931b;return process[_0x182d90(0x224)]+':'+threadId;}static[a64_0x51931b(0x27c)](_0x5502b5){const _0x3ca2a3=a64_0x51931b;if(_0x5502b5['testContextOptions']&&_0x5502b5['testContextOptions'][_0x3ca2a3(0x279)])return!![];return![];}static[a64_0x51931b(0x232)](_0x7242e0){const _0x1ce8ab=a64_0x51931b;if(_0x7242e0[_0x1ce8ab(0x1fc)]&&_0x7242e0['testContextOptions'][_0x1ce8ab(0x23d)])return!![];return![];}static[a64_0x51931b(0x1eb)](_0x341e90){const _0x158efd=a64_0x51931b,_0x79fcd3=new RegExp(TestFrameworkConstants[_0x158efd(0x1f5)]);return _0x79fcd3[_0x158efd(0x245)](_0x341e90);}static['mergeObject'](_0xa34436,_0x1ac75c){const _0x54bbf0=a64_0x51931b,_0x3ba877={};_0x3ba877['juhhm']=function(_0x8ee0b9,_0x482342){return _0x8ee0b9!==_0x482342;},_0x3ba877[_0x54bbf0(0x252)]=function(_0x20315f,_0x23ac01){return _0x20315f===_0x23ac01;},_0x3ba877[_0x54bbf0(0x209)]=_0x54bbf0(0x24d);const _0x495810=_0x3ba877;for(const [_0x494834,_0x5b082e]of Object[_0x54bbf0(0x21e)](_0x1ac75c)){if(_0x495810[_0x54bbf0(0x28d)](_0x5b082e,null)&&_0x495810['ShuWV'](typeof _0x5b082e,_0x495810['cGckQ'])&&!Array['isArray'](_0x5b082e))_0xa34436[_0x494834]=this[_0x54bbf0(0x26f)](_0xa34436[_0x494834]||{},_0x5b082e);else Array[_0x54bbf0(0x269)](_0x5b082e)?_0xa34436[_0x494834]=(_0xa34436[_0x494834]||[])[_0x54bbf0(0x24e)](_0x5b082e):_0xa34436[_0x494834]=_0x5b082e;}return _0xa34436;}}function a64_0x37cf(_0x267acb,_0x39b578){const _0x165f88=a64_0x165f();return a64_0x37cf=function(_0x37cfd1,_0x3bea98){_0x37cfd1=_0x37cfd1-0x1c5;let _0x5e6f3f=_0x165f88[_0x37cfd1];return _0x5e6f3f;},a64_0x37cf(_0x267acb,_0x39b578);}module[a64_0x51931b(0x1f2)]=CLIUtils;