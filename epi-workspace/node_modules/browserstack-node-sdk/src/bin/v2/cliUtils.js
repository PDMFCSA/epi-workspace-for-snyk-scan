function a64_0xe8ce(_0x53d351,_0x2712b7){const _0x232fb0=a64_0x232f();return a64_0xe8ce=function(_0xe8ce74,_0x2fa8d1){_0xe8ce74=_0xe8ce74-0x1ad;let _0x186b8a=_0x232fb0[_0xe8ce74];return _0x186b8a;},a64_0xe8ce(_0x53d351,_0x2712b7);}const a64_0x355c32=a64_0xe8ce;(function(_0x4a42e7,_0xe15eaf){const _0x4fa5e4=a64_0xe8ce,_0x3136b3=_0x4a42e7();while(!![]){try{const _0x547025=-parseInt(_0x4fa5e4(0x1dd))/0x1*(-parseInt(_0x4fa5e4(0x27e))/0x2)+parseInt(_0x4fa5e4(0x252))/0x3+-parseInt(_0x4fa5e4(0x1f2))/0x4+-parseInt(_0x4fa5e4(0x1d7))/0x5+parseInt(_0x4fa5e4(0x251))/0x6+parseInt(_0x4fa5e4(0x1b2))/0x7*(-parseInt(_0x4fa5e4(0x1c2))/0x8)+parseInt(_0x4fa5e4(0x24c))/0x9*(parseInt(_0x4fa5e4(0x25b))/0xa);if(_0x547025===_0xe15eaf)break;else _0x3136b3['push'](_0x3136b3['shift']());}catch(_0x3a4643){_0x3136b3['push'](_0x3136b3['shift']());}}}(a64_0x232f,0x564ea));const fs=require('fs'),os=require('os'),url=require(a64_0x355c32(0x1b6)),path=require(a64_0x355c32(0x1ed)),{exec}=require(a64_0x355c32(0x1b3)),{https}=require(a64_0x355c32(0x1f7)),yauzl=require(a64_0x355c32(0x271)),util=require(a64_0x355c32(0x1d5)),{getFrameworkVersion}=require(a64_0x355c32(0x211)),{threadId}=require('worker_threads'),PerformanceTester=require('../../helpers/performance/performance-tester.js'),{EVENTS:PerformanceEvents}=require(a64_0x355c32(0x1e3)),{isNullOrEmpty,isModifiable,setReadWriteExecuteAccess}=require(a64_0x355c32(0x230)),{isTrue,createDir,getHostInfo,nodeRequest,nestedKeyValue}=require('../../helpers/helper'),{UPDATED_CLI_ENDPOINT,BINARY_BUSY_ERROR_CODES}=require(a64_0x355c32(0x26e)),{createClassLogger}=require(a64_0x355c32(0x1e1)),TestFrameworkInstance=require(a64_0x355c32(0x226)),HookState=require(a64_0x355c32(0x1f8)),TestFrameworkState=require('./state/testFrameworkState.js'),AutomationFrameworkState=require(a64_0x355c32(0x260)),TestFrameworkConstants=require('./framework/constants/testFrameworkConstants.js'),logger=createClassLogger('CLIUtils'),{getBStackAPIUrl}=require('../utils/apiUtilityMethods.js');class CLIUtils{[a64_0x355c32(0x21d)]={};[a64_0x355c32(0x1eb)]={};static[a64_0x355c32(0x1bc)](){const _0x56aa94=a64_0x355c32,_0x3c00a1={};_0x3c00a1[_0x56aa94(0x1ca)]=function(_0x5e0f3e,_0x439d75){return _0x5e0f3e===_0x439d75;},_0x3c00a1[_0x56aa94(0x1f0)]='development';const _0x2edca2=_0x3c00a1;return _0x2edca2[_0x56aa94(0x1ca)](process[_0x56aa94(0x248)][_0x56aa94(0x1e2)],_0x2edca2['IoSpq']);}static[a64_0x355c32(0x244)](){const _0x551fef=a64_0x355c32,_0x5b1fb4={};return _0x5b1fb4['id']=process['env']['BROWSERSTACK_CLI_ENV'],_0x5b1fb4[_0x551fef(0x22f)]=_0x551fef(0x205)+process[_0x551fef(0x248)][_0x551fef(0x1e2)]+'.sock',_0x5b1fb4;}static[a64_0x355c32(0x1da)](){const _0x503953=a64_0x355c32,_0x1ee0c6={'jSDnt':function(_0x397941,_0x236323){return _0x397941(_0x236323);},'dcRUm':_0x503953(0x1be)};return _0x1ee0c6[_0x503953(0x212)](require,_0x1ee0c6['dcRUm'])[_0x503953(0x24d)];}static[a64_0x355c32(0x210)](){const _0x16b58a=a64_0x355c32,_0x2ba28c={};_0x2ba28c['yYDCE']='node';const _0x414fec=_0x2ba28c;return _0x414fec[_0x16b58a(0x203)];}static async[a64_0x355c32(0x1c7)](_0x58b1c7){const _0x400581=a64_0x355c32,_0x3981b4={'bObGL':_0x400581(0x234),'okDQW':function(_0x77b520,_0x326e38){return _0x77b520(_0x326e38);},'dnkWl':_0x400581(0x232)};logger[_0x400581(0x1cb)](_0x3981b4[_0x400581(0x1c8)]);const _0x2505ed=process[_0x400581(0x248)][_0x400581(0x1e5)];if(!_0x3981b4[_0x400581(0x254)](isNullOrEmpty,_0x2505ed))return logger[_0x400581(0x1cb)](_0x400581(0x243)+_0x2505ed),_0x2505ed;try{const _0x52bb72=this['getCliDir']();if(_0x3981b4[_0x400581(0x254)](isNullOrEmpty,_0x52bb72))throw new Error(_0x3981b4[_0x400581(0x24b)]);const _0x52b239=this['getExistingCliPath'](_0x52bb72),_0x4cbd0a=await this[_0x400581(0x209)](_0x52b239,_0x52bb72,_0x58b1c7);return logger[_0x400581(0x1cb)](_0x400581(0x218)+_0x4cbd0a),_0x4cbd0a;}catch(_0x3ccc09){logger['debug'](_0x400581(0x278)+util[_0x400581(0x1d4)](_0x3ccc09));}return null;}static async[a64_0x355c32(0x209)](_0x164a9d,_0x2ab410,_0x40ed09){const _0x4ebe66=a64_0x355c32,_0x21b571={'fXJuA':function(_0x3eda33){return _0x3eda33();},'NSKXJ':function(_0x1f59ae,_0x515856){return _0x1f59ae(_0x515856);},'Vzkli':function(_0x442b3d,_0x2d4b7c,_0xfeae29){return _0x442b3d(_0x2d4b7c,_0xfeae29);},'bUGHW':_0x4ebe66(0x1c9),'AlgqQ':_0x4ebe66(0x1b6),'uSKjD':function(_0x5400b0,_0x3eb396,_0x2cce4e){return _0x5400b0(_0x3eb396,_0x2cce4e);}};PerformanceTester[_0x4ebe66(0x1c0)](PerformanceEvents['SDK_CLI_CHECK_UPDATE']),logger[_0x4ebe66(0x237)](_0x4ebe66(0x1b5)+_0x164a9d);const _0xc41fe6=_0x21b571[_0x4ebe66(0x1bb)](getHostInfo),_0x4f0861={'sdk_version':CLIUtils[_0x4ebe66(0x1da)](),'os':_0xc41fe6[_0x4ebe66(0x25f)],'os_arch':_0xc41fe6['arch'],'cli_version':'0','sdk_language':this[_0x4ebe66(0x210)]()};!_0x21b571[_0x4ebe66(0x272)](isNullOrEmpty,_0x164a9d)&&(_0x4f0861[_0x4ebe66(0x22c)]=await this[_0x4ebe66(0x21e)](_0x164a9d+_0x4ebe66(0x26d)));const _0x367ff4=await this[_0x4ebe66(0x242)](_0x4f0861,_0x40ed09);process[_0x4ebe66(0x248)][_0x4ebe66(0x22b)]&&(logger['info'](_0x4ebe66(0x1d6)+process[_0x4ebe66(0x248)]['BROWSERSTACK_BINARY_URL']),_0x367ff4[_0x4ebe66(0x1c9)][_0x4ebe66(0x1b6)]=process[_0x4ebe66(0x248)][_0x4ebe66(0x22b)]);if(_0x21b571[_0x4ebe66(0x241)](nestedKeyValue,_0x367ff4,[_0x21b571['bUGHW'],_0x21b571['AlgqQ']])){logger[_0x4ebe66(0x1cb)](_0x4ebe66(0x208)+_0x4f0861[_0x4ebe66(0x22c)]);if(!_0x21b571[_0x4ebe66(0x272)](isNullOrEmpty,_0x164a9d)&&this[_0x4ebe66(0x1e6)](_0x164a9d))return logger[_0x4ebe66(0x1d9)]('Existing\x20binary\x20is\x20currently\x20in\x20use,\x20skipping\x20update\x20and\x20continuing\x20with\x20current\x20version:\x20'+_0x164a9d),PerformanceTester[_0x4ebe66(0x276)](PerformanceEvents[_0x4ebe66(0x1b4)]),_0x164a9d;const _0x5829d9=await this[_0x4ebe66(0x207)](_0x21b571[_0x4ebe66(0x1b8)](nestedKeyValue,_0x367ff4,[_0x21b571[_0x4ebe66(0x277)],_0x21b571[_0x4ebe66(0x225)]]),_0x2ab410);return PerformanceTester[_0x4ebe66(0x276)](PerformanceEvents['SDK_CLI_CHECK_UPDATE']),_0x5829d9;}return PerformanceTester[_0x4ebe66(0x276)](PerformanceEvents[_0x4ebe66(0x1b4)]),_0x164a9d;}static[a64_0x355c32(0x266)](){const _0x3df3a7=a64_0x355c32,_0x1854ad={'jdYMJ':function(_0x1a2438,_0x5f250a){return _0x1a2438(_0x5f250a);},'cmNfp':_0x3df3a7(0x232),'PnlOw':'cli','KuDeq':function(_0x3bdcd1,_0x200008){return _0x3bdcd1(_0x200008);}},_0x42ba33=this[_0x3df3a7(0x20b)]();try{if(_0x1854ad[_0x3df3a7(0x1ba)](isNullOrEmpty,_0x42ba33))throw new Error(_0x1854ad[_0x3df3a7(0x1d8)]);const _0x55b812=path[_0x3df3a7(0x236)](_0x42ba33,_0x1854ad['PnlOw']);return!fs[_0x3df3a7(0x269)](_0x55b812)&&_0x1854ad[_0x3df3a7(0x1f1)](createDir,_0x55b812),_0x55b812;}catch(_0x19c285){logger[_0x3df3a7(0x1cb)]('Error\x20in\x20getting\x20writable\x20directory,\x20writableDir='+util['format'](_0x19c285));}}static[a64_0x355c32(0x20b)](){const _0x2dade4=a64_0x355c32,_0x1d29c8={'Jbuzn':_0x2dade4(0x1cd),'JEYgU':function(_0x5df1af,_0x6c9e4a){return _0x5df1af(_0x6c9e4a);},'tyhXY':function(_0x5beb62,_0x3034b1){return _0x5beb62(_0x3034b1);},'BHTtu':function(_0x44a36a,_0x53ce22){return _0x44a36a(_0x53ce22);},'tqPRF':function(_0x1de91c,_0x10d9b4){return _0x1de91c(_0x10d9b4);},'MOaGe':function(_0x42a73a,_0x57542a){return _0x42a73a(_0x57542a);}},_0xefb32a=[process[_0x2dade4(0x248)][_0x2dade4(0x1f5)],path['join'](os[_0x2dade4(0x1e7)](),_0x1d29c8[_0x2dade4(0x1c1)]),path[_0x2dade4(0x236)](os[_0x2dade4(0x262)](),_0x1d29c8['Jbuzn'])];for(const _0x53e4dc of _0xefb32a){if(_0x1d29c8[_0x2dade4(0x1fe)](isNullOrEmpty,_0x53e4dc))continue;try{if(fs['existsSync'](_0x53e4dc)){logger[_0x2dade4(0x1cb)]('Folder\x20'+_0x53e4dc+_0x2dade4(0x21f));if(!_0x1d29c8[_0x2dade4(0x1fe)](isModifiable,_0x53e4dc)){logger[_0x2dade4(0x1cb)]('Setting\x20required\x20permissions\x20to\x20'+_0x53e4dc);const _0xf949af=_0x1d29c8['tyhXY'](setReadWriteExecuteAccess,_0x53e4dc);if(!_0x1d29c8[_0x2dade4(0x25e)](isTrue,_0xf949af)){logger[_0x2dade4(0x1d9)](_0x2dade4(0x231)+_0x53e4dc);continue;}}}else{logger[_0x2dade4(0x1cb)]('Folder\x20does\x20not\x20exist:\x20'+_0x53e4dc),_0x1d29c8[_0x2dade4(0x275)](createDir,_0x53e4dc),logger[_0x2dade4(0x1cb)](_0x2dade4(0x26a)+_0x53e4dc);const _0x10eec1=_0x1d29c8[_0x2dade4(0x1ee)](setReadWriteExecuteAccess,_0x53e4dc);!_0x1d29c8['MOaGe'](isTrue,_0x10eec1)&&logger[_0x2dade4(0x1d9)](_0x2dade4(0x231)+_0x53e4dc);}return _0x53e4dc;}catch(_0x3d289d){logger[_0x2dade4(0x20c)](_0x2dade4(0x1b1)+util[_0x2dade4(0x1d4)](_0x3d289d));}}return null;}static[a64_0x355c32(0x22e)](_0x3c7b8d){const _0x519138=a64_0x355c32,_0x21ff1d={};_0x21ff1d[_0x519138(0x1fb)]=function(_0xf2bdd6,_0x594af5){return _0xf2bdd6>_0x594af5;},_0x21ff1d[_0x519138(0x270)]=function(_0x2aebe2,_0x137b37){return _0x2aebe2>_0x137b37;};const _0x378043=_0x21ff1d;try{if(!fs['existsSync'](_0x3c7b8d)||!fs['statSync'](_0x3c7b8d)[_0x519138(0x22a)]())return'';const _0xf24fee=fs[_0x519138(0x21a)](_0x3c7b8d)[_0x519138(0x220)](_0x2df135=>path['join'](_0x3c7b8d,_0x2df135))[_0x519138(0x26b)](_0x2eb274=>fs[_0x519138(0x1f3)](_0x2eb274)[_0x519138(0x1cc)]()&&path[_0x519138(0x1fc)](_0x2eb274)[_0x519138(0x1ce)](_0x519138(0x202)));if(_0x378043[_0x519138(0x270)](_0xf24fee[_0x519138(0x1ff)],0x0)){const _0xeb9aaa=_0xf24fee[_0x519138(0x220)](_0x5c2d32=>({'filePath':_0x5c2d32,'mtime':fs[_0x519138(0x1f3)](_0x5c2d32)[_0x519138(0x238)]}))[_0x519138(0x247)]((_0x1e4f3e,_0x1066f0)=>{const _0x6dbc8e=_0x519138;if(!_0x1e4f3e||!_0x1e4f3e['mtime'])return _0x1066f0;if(_0x378043[_0x6dbc8e(0x1fb)](_0x1066f0[_0x6dbc8e(0x238)],_0x1e4f3e[_0x6dbc8e(0x238)]))return _0x1066f0;return _0x1e4f3e;},{});return _0xeb9aaa?_0xeb9aaa['filePath']:'';}return'';}catch(_0x52aec1){return logger[_0x519138(0x20c)](_0x519138(0x1e4)+util[_0x519138(0x1d4)](_0x52aec1)),'';}}static [a64_0x355c32(0x242)]=async(_0x4a629e,_0x56aab6)=>{const _0x502f2d=a64_0x355c32,_0x1aee45={'smmRD':function(_0x156768,_0x385d4a,_0x97ff22,_0x295aed,_0x1cbd1b){return _0x156768(_0x385d4a,_0x97ff22,_0x295aed,_0x1cbd1b);},'VaQBu':_0x502f2d(0x23b)},_0x59a6e6={};_0x59a6e6['qs']=_0x4a629e;const _0x50b7cd=await _0x1aee45[_0x502f2d(0x1b9)](nodeRequest,_0x1aee45[_0x502f2d(0x221)],UPDATED_CLI_ENDPOINT,_0x59a6e6,_0x56aab6);return logger[_0x502f2d(0x1cb)](_0x502f2d(0x22d)+JSON['stringify'](_0x50b7cd)),_0x50b7cd;};static[a64_0x355c32(0x1e6)](_0x504b57){const _0x25b61f=a64_0x355c32;try{const _0x1fbff8=fs[_0x25b61f(0x228)](_0x504b57,'r+');return fs[_0x25b61f(0x264)](_0x1fbff8),![];}catch(_0x5bc674){if(BINARY_BUSY_ERROR_CODES[_0x25b61f(0x257)](_0x5bc674[_0x25b61f(0x24e)]))return logger[_0x25b61f(0x1cb)](_0x25b61f(0x25d)+_0x504b57),!![];return logger['debug']('Error\x20checking\x20if\x20binary\x20is\x20busy:\x20'+_0x5bc674['message']),![];}}static['runShellCommand'](_0x519d6d,_0x571b2d=''){const _0x3a11e4=a64_0x355c32,_0x272298={'GwLUW':_0x3a11e4(0x24d),'MZUZI':function(_0x5a63c6,_0x502e53){return _0x5a63c6(_0x502e53);},'OYPTJ':_0x3a11e4(0x249),'kDQXR':function(_0x2ed06b,_0x3c341e,_0x55432b,_0x4b156f){return _0x2ed06b(_0x3c341e,_0x55432b,_0x4b156f);},'FrDup':'error'};return new Promise((_0xc8c804,_0x2de678)=>{const _0x2a7103=_0x3a11e4,_0x5b4a4c={'jHxni':_0x272298[_0x2a7103(0x27d)],'hegae':function(_0x1116ec,_0x3bbf3c){const _0x543e7a=_0x2a7103;return _0x272298[_0x543e7a(0x1f6)](_0x1116ec,_0x3bbf3c);},'dwfhe':_0x272298[_0x2a7103(0x1ef)]},_0x5d7a31={};_0x5d7a31['cwd']=_0x571b2d,_0x5d7a31['timeout']=0x1388;const _0x4c6292=_0x272298[_0x2a7103(0x26f)](exec,_0x519d6d,_0x5d7a31,(_0x1e41ba,_0x1c75f6,_0x58642d)=>{const _0x41e4b0=_0x2a7103;if(_0x1e41ba){if(_0x519d6d['includes'](_0x5b4a4c[_0x41e4b0(0x1d0)])&&(_0x1c75f6['trim']()||_0x58642d[_0x41e4b0(0x26c)]())){const _0x9b97ce=_0x1c75f6[_0x41e4b0(0x26c)]()||_0x58642d[_0x41e4b0(0x26c)]();logger[_0x41e4b0(0x1cb)](_0x41e4b0(0x223)+_0x9b97ce+'\x22'),_0x5b4a4c[_0x41e4b0(0x1e9)](_0xc8c804,_0x9b97ce);}else _0x5b4a4c[_0x41e4b0(0x1e9)](_0xc8c804,_0x58642d[_0x41e4b0(0x26c)]()||_0x5b4a4c[_0x41e4b0(0x222)]);}else logger[_0x41e4b0(0x1cb)](_0x41e4b0(0x267)+_0x1c75f6[_0x41e4b0(0x26c)]()+'\x22'),_0x5b4a4c[_0x41e4b0(0x1e9)](_0xc8c804,_0x1c75f6[_0x41e4b0(0x26c)]());});_0x4c6292['on'](_0x272298[_0x2a7103(0x216)],()=>{const _0x4b4ddb=_0x2a7103;_0x5b4a4c[_0x4b4ddb(0x1e9)](_0xc8c804,_0x5b4a4c[_0x4b4ddb(0x222)]);});});}static [a64_0x355c32(0x207)]=async(_0x15e853,_0x4df07e)=>{const _0x25b1d2=a64_0x355c32,_0x59f8c9={'LwGfy':'Got\x20Error\x20in\x20percy\x20binary\x20download\x20response\x20%s','LYfwA':function(_0xe96dfd,_0x1e0926){return _0xe96dfd(_0x1e0926);},'GHEey':_0x25b1d2(0x1c5),'obStF':function(_0x28cab5,_0x30f2ad){return _0x28cab5(_0x30f2ad);},'asnkO':_0x25b1d2(0x20c),'bGzfL':_0x25b1d2(0x1de)};PerformanceTester[_0x25b1d2(0x1c0)](PerformanceEvents[_0x25b1d2(0x1e0)]),logger[_0x25b1d2(0x1cb)](_0x25b1d2(0x1c3)+_0x15e853);try{const _0x5a7529=url['parse'](_0x15e853),_0x340cba=path['join'](_0x4df07e,_0x59f8c9[_0x25b1d2(0x229)]),_0x18cfd8=fs[_0x25b1d2(0x21b)](_0x340cba);return new Promise((_0x29eb60,_0x5b9d72)=>{const _0x15a816=_0x25b1d2,_0x4f3f15={'PkRYb':_0x59f8c9[_0x15a816(0x1ea)],'YzIbi':function(_0x32b421,_0x24a2aa){const _0x46e252=_0x15a816;return _0x59f8c9[_0x46e252(0x1bf)](_0x32b421,_0x24a2aa);},'yMKrv':_0x59f8c9[_0x15a816(0x213)],'yaXYn':function(_0x413e15,_0x354068){return _0x59f8c9['obStF'](_0x413e15,_0x354068);},'CIPIS':_0x59f8c9[_0x15a816(0x233)]};https[_0x15a816(0x204)](_0x5a7529,function(_0x4f1b39){const _0x210264=_0x15a816,_0x411f4d=null;_0x4f1b39['pipe'](_0x18cfd8),_0x4f1b39['on'](_0x4f3f15[_0x210264(0x27a)],function(_0xe41507){const _0x5af69e=_0x210264;logger[_0x5af69e(0x20c)](util[_0x5af69e(0x1d4)](_0x4f3f15['PkRYb'],_0xe41507)),PerformanceTester[_0x5af69e(0x276)](PerformanceEvents['SDK_CLI_DOWNLOAD'],![],util['format'](_0xe41507)),_0x4f3f15[_0x5af69e(0x21c)](_0x5b9d72,_0xe41507);}),_0x18cfd8['on'](_0x4f3f15['CIPIS'],function(_0x288005){const _0x28ce46=_0x210264;logger['error'](util[_0x28ce46(0x1d4)](_0x4f3f15[_0x28ce46(0x27b)],_0x288005)),PerformanceTester[_0x28ce46(0x276)](PerformanceEvents['SDK_CLI_DOWNLOAD'],![],util[_0x28ce46(0x1d4)](_0x288005)),_0x4f3f15[_0x28ce46(0x224)](_0x5b9d72,_0x288005);}),CLIUtils[_0x210264(0x255)](_0x18cfd8,_0x411f4d,_0x340cba,_0x4df07e,_0x29eb60,_0x5b9d72),PerformanceTester[_0x210264(0x276)](PerformanceEvents['SDK_CLI_DOWNLOAD']);})['on'](_0x59f8c9['asnkO'],function(_0x51014b){const _0x416a86=_0x15a816;logger['error'](_0x416a86(0x235)+util[_0x416a86(0x1d4)](_0x51014b)),PerformanceTester[_0x416a86(0x276)](PerformanceEvents[_0x416a86(0x1e0)],![],util['format'](_0x51014b)),_0x4f3f15[_0x416a86(0x224)](_0x5b9d72,_0x51014b);});});}catch(_0x158465){PerformanceTester['end'](PerformanceEvents[_0x25b1d2(0x1e0)],![],util['format'](_0x158465)),logger[_0x25b1d2(0x1cb)](_0x25b1d2(0x240)+util['format'](_0x158465));}};static['downloadFileStream'](_0x2e52bf,_0x2dfc07,_0x2c792f,_0x1dff04,_0x58c482,_0xb98376){const _0x2b3b46=a64_0x355c32,_0x2da413={'QXhrT':function(_0x45b0d0,_0x2e58e8){return _0x45b0d0(_0x2e58e8);},'OZkfx':function(_0x9adb3b,_0x4e3522){return _0x9adb3b(_0x4e3522);},'lRhBm':_0x2b3b46(0x1c4),'gxyNa':_0x2b3b46(0x20c),'DeMBB':_0x2b3b46(0x276),'vkskg':function(_0x5ae421,_0x57892a){return _0x5ae421(_0x57892a);},'wxmrK':function(_0x1e86fd,_0x5d4ba5){return _0x1e86fd(_0x5d4ba5);},'SrXYu':function(_0x5a5b98,_0x4b0987){return _0x5a5b98===_0x4b0987;},'eMzPn':function(_0x32f862,_0x17ca95){return _0x32f862(_0x17ca95);},'FndNL':_0x2b3b46(0x23e),'QTBuo':'close'};_0x2e52bf['on'](_0x2da413[_0x2b3b46(0x1b0)],function(){const _0x335a3d=_0x2b3b46,_0x2899be={'qJjrR':function(_0x452a9e,_0x14b016){const _0x41c96a=a64_0xe8ce;return _0x2da413[_0x41c96a(0x1ae)](_0x452a9e,_0x14b016);},'HuJSd':_0x2da413[_0x335a3d(0x24a)],'dPQbr':function(_0x2e48cb,_0x3408ff){const _0x221c46=_0x335a3d;return _0x2da413[_0x221c46(0x1df)](_0x2e48cb,_0x3408ff);},'QTnBF':function(_0x432300,_0xb10498){return _0x2da413['wxmrK'](_0x432300,_0xb10498);},'mQmzR':_0x2da413[_0x335a3d(0x279)],'BdsjJ':function(_0x1bcc83,_0x4d1f79){const _0x220a4=_0x335a3d;return _0x2da413[_0x220a4(0x246)](_0x1bcc83,_0x4d1f79);},'AlCac':function(_0x2bf384,_0x56aea0){const _0x5da2ec=_0x335a3d;return _0x2da413[_0x5da2ec(0x1d2)](_0x2bf384,_0x56aea0);},'cpWoL':_0x2da413[_0x335a3d(0x1d3)]},_0x5a5878={};_0x5a5878['lazyEntries']=!![],yauzl[_0x335a3d(0x206)](_0x2c792f,_0x5a5878,function(_0x1ac7b0,_0x178106){const _0x56a225=_0x335a3d,_0xe054b9={'PHogF':function(_0x4f9d98,_0x5263b6){const _0xe0b1ab=a64_0xe8ce;return _0x2da413[_0xe0b1ab(0x1bd)](_0x4f9d98,_0x5263b6);},'wzPAM':function(_0x4fd6f8,_0x4c60a5){const _0x53a700=a64_0xe8ce;return _0x2da413[_0x53a700(0x1bd)](_0x4fd6f8,_0x4c60a5);}};_0x1ac7b0&&_0x2da413[_0x56a225(0x1df)](_0xb98376,_0x1ac7b0),_0x178106[_0x56a225(0x20d)](),_0x178106['on'](_0x2da413[_0x56a225(0x201)],_0x63ebcf=>{const _0x6bcab2=_0x56a225,_0x29d9b8={'Aqpsg':function(_0x33ab7d,_0x4a17b1){const _0x3f846a=a64_0xe8ce;return _0x2899be[_0x3f846a(0x219)](_0x33ab7d,_0x4a17b1);},'qUycO':_0x2899be['HuJSd']};!_0x2dfc07&&(_0x2dfc07=_0x63ebcf[_0x6bcab2(0x1fd)]);if(/\/$/[_0x6bcab2(0x23a)](_0x63ebcf[_0x6bcab2(0x1fd)]))_0x178106['readEntry']();else{const _0x4573d3=_0x63ebcf['fileName'],_0x2a0838=path[_0x6bcab2(0x236)](_0x1dff04,_0x4573d3);let _0x531f2b;try{_0x531f2b=fs[_0x6bcab2(0x21b)](_0x2a0838);}catch(_0x54e0d5){if(BINARY_BUSY_ERROR_CODES[_0x6bcab2(0x257)](_0x54e0d5[_0x6bcab2(0x24e)])){logger[_0x6bcab2(0x1d9)](_0x6bcab2(0x261)+_0x4573d3),fs[_0x6bcab2(0x25a)](_0x2c792f,_0x590e16=>{const _0x1345ee=_0x6bcab2;_0x590e16&&logger[_0x1345ee(0x1d9)](_0x1345ee(0x1f9)+_0x2c792f);}),_0x2899be[_0x6bcab2(0x1ec)](_0x58c482,_0x2a0838);return;}_0x2899be[_0x6bcab2(0x23c)](_0xb98376,_0x54e0d5);return;}_0x531f2b['on'](_0x2899be['mQmzR'],_0x4ef57a=>{const _0x28bd38=_0x6bcab2;BINARY_BUSY_ERROR_CODES[_0x28bd38(0x257)](_0x4ef57a[_0x28bd38(0x24e)])?(logger['warn'](_0x28bd38(0x1e8)+_0x4ef57a['message']),_0x531f2b[_0x28bd38(0x1c6)](),fs[_0x28bd38(0x25a)](_0x2c792f,_0x3aadf7=>{_0x3aadf7&&logger['warn']('Failed\x20to\x20delete\x20zip\x20file:\x20'+_0x2c792f);}),_0x29d9b8[_0x28bd38(0x1d1)](_0x58c482,_0x2a0838)):_0x29d9b8[_0x28bd38(0x1d1)](_0xb98376,_0x4ef57a);}),_0x178106[_0x6bcab2(0x253)](_0x63ebcf,function(_0x5b49ff,_0x42c602){const _0x21c209=_0x6bcab2;_0x5b49ff&&_0x29d9b8['Aqpsg'](_0xb98376,_0x5b49ff),_0x42c602['on'](_0x29d9b8['qUycO'],function(){const _0x3cfea4=a64_0xe8ce;_0x531f2b[_0x3cfea4(0x1c6)](),_0x178106[_0x3cfea4(0x20d)]();}),_0x42c602[_0x21c209(0x215)](_0x531f2b);}),_0x2899be[_0x6bcab2(0x268)](_0x63ebcf[_0x6bcab2(0x1fd)],_0x2dfc07)&&_0x178106['close']();}}),_0x178106['on'](_0x2da413[_0x56a225(0x279)],_0xa2ebcf=>{const _0x4c76f7=_0x56a225;_0x2899be[_0x4c76f7(0x1db)](_0xb98376,_0xa2ebcf);}),_0x178106[_0x56a225(0x1ad)](_0x2da413['DeMBB'],()=>{const _0x3d470f=_0x56a225;fs[_0x3d470f(0x25a)](_0x2c792f,_0x17c02e=>{const _0xf59c3c=_0x3d470f;_0x17c02e&&logger[_0xf59c3c(0x1d9)](_0xf59c3c(0x1f9)+_0x2c792f);}),fs[_0x3d470f(0x259)](path['join'](_0x1dff04,_0x2dfc07),_0x2899be[_0x3d470f(0x258)],function(_0x1605b0){_0x1605b0&&_0xe054b9['PHogF'](_0xb98376,_0x1605b0),_0xe054b9['wzPAM'](_0x58c482,path['join'](_0x1dff04,_0x2dfc07));}),_0x178106[_0x3d470f(0x1c6)]();});});});}static[a64_0x355c32(0x265)](){const _0x160667=a64_0x355c32;if(process['env']['BROWSERSTACK_TEST_FRAMEWORK_DETAIL'])return JSON[_0x160667(0x274)](process[_0x160667(0x248)][_0x160667(0x239)]);return this[_0x160667(0x1eb)];}static['getAutomationFrameworkDetail'](){const _0xabf681=a64_0x355c32;if(process['env']['BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL'])return JSON[_0xabf681(0x274)](process[_0xabf681(0x248)][_0xabf681(0x20f)]);return this[_0xabf681(0x21d)];}static['setFrameworkDetail'](_0x118668,_0x2cb102){const _0x2bd386=a64_0x355c32,_0x504174={'hBAEK':'0|1|4|2|3','ikhUJ':function(_0x423824,_0x1d682f){return _0x423824||_0x1d682f;},'kMasF':function(_0x16fdf0,_0x42af49){return _0x16fdf0(_0x42af49);}},_0x273aa6=_0x504174[_0x2bd386(0x263)][_0x2bd386(0x1af)]('|');let _0x3c36de=0x0;while(!![]){switch(_0x273aa6[_0x3c36de++]){case'0':_0x504174['ikhUJ'](!_0x118668,!_0x2cb102)&&logger[_0x2bd386(0x1cb)](_0x2bd386(0x245)+_0x118668+',\x20automationFramework='+_0x2cb102);continue;case'1':this['testFrameworkDetail']={'name':_0x118668,'version':{[_0x118668]:_0x504174['kMasF'](getFrameworkVersion,_0x118668)}};continue;case'2':process[_0x2bd386(0x248)][_0x2bd386(0x20f)]=JSON[_0x2bd386(0x25c)](this[_0x2bd386(0x21d)]);continue;case'3':process[_0x2bd386(0x248)][_0x2bd386(0x239)]=JSON[_0x2bd386(0x25c)](this['testFrameworkDetail']);continue;case'4':this['automationFrameworkDetail']={'name':_0x2cb102,'version':_0x504174[_0x2bd386(0x200)](getFrameworkVersion,_0x2cb102)};continue;}break;}}static[a64_0x355c32(0x27c)](_0x441473,_0x480354){return _0x441473+':'+_0x480354;}static[a64_0x355c32(0x23d)](){const _0x293320=a64_0x355c32;return process[_0x293320(0x273)]+':'+threadId;}static[a64_0x355c32(0x217)](_0x30088e){const _0x214be7=a64_0x355c32;if(_0x30088e['testContextOptions']&&_0x30088e['testContextOptions'][_0x214be7(0x227)])return!![];return![];}static[a64_0x355c32(0x1fa)](_0x15f5c2){const _0x50fe57=a64_0x355c32;if(_0x15f5c2[_0x50fe57(0x24f)]&&_0x15f5c2['testContextOptions'][_0x50fe57(0x1b7)])return!![];return![];}static['matchHookRegex'](_0x1c099e){const _0x31eb66=a64_0x355c32,_0x15e8db=new RegExp(TestFrameworkConstants['HOOK_REGEX']);return _0x15e8db[_0x31eb66(0x23a)](_0x1c099e);}static['mergeObject'](_0x37cdb9,_0x376bf2){const _0x1e983b=a64_0x355c32,_0x35e3b4={};_0x35e3b4[_0x1e983b(0x1dc)]=function(_0x38c2c5,_0x3fbaf0){return _0x38c2c5!==_0x3fbaf0;},_0x35e3b4['gxNWr']=function(_0x5ba670,_0x1b30b4){return _0x5ba670===_0x1b30b4;},_0x35e3b4[_0x1e983b(0x20e)]=_0x1e983b(0x1f4);const _0x2cc082=_0x35e3b4;for(const [_0x5cabb8,_0x25706c]of Object[_0x1e983b(0x1cf)](_0x376bf2)){if(_0x2cc082[_0x1e983b(0x1dc)](_0x25706c,null)&&_0x2cc082[_0x1e983b(0x250)](typeof _0x25706c,_0x2cc082[_0x1e983b(0x20e)])&&!Array[_0x1e983b(0x20a)](_0x25706c))_0x37cdb9[_0x5cabb8]=this[_0x1e983b(0x23f)](_0x37cdb9[_0x5cabb8]||{},_0x25706c);else Array[_0x1e983b(0x20a)](_0x25706c)?_0x37cdb9[_0x5cabb8]=(_0x37cdb9[_0x5cabb8]||[])[_0x1e983b(0x256)](_0x25706c):_0x37cdb9[_0x5cabb8]=_0x25706c;}return _0x37cdb9;}}module[a64_0x355c32(0x214)]=CLIUtils;function a64_0x232f(){const _0xd23b2d=['unlink','23170adqwQQ','stringify','Binary\x20is\x20busy:\x20','BHTtu','platform','./state/automationFrameworkState.js','Binary\x20file\x20is\x20currently\x20in\x20use,\x20skipping\x20download\x20and\x20continuing\x20with\x20existing\x20binary:\x20','tmpdir','hBAEK','closeSync','getTestFrameworkDetail','getCliDir','Resolving\x20with\x20stdout:\x20\x22','BdsjJ','existsSync','Setting\x20required\x20permissions\x20to\x20','filter','trim','\x20version','../utils/constants','kDQXR','Uzejx','yauzl','NSKXJ','pid','parse','tyhXY','end','bUGHW','Error\x20in\x20setting\x20up\x20cli\x20path\x20directory,\x20Exception:\x20','gxyNa','CIPIS','yMKrv','getHookRegistryKey','GwLUW','1348274jjxQaJ','once','vkskg','split','QTBuo','Unable\x20to\x20get\x20writable\x20directory,\x20exception\x20','3581179hFwGZN','child_process','SDK_CLI_CHECK_UPDATE','Current\x20CLI\x20Path\x20Found:\x20','url','skipSessionStatus','uSKjD','smmRD','jdYMJ','fXJuA','isDevelopmentEnv','QXhrT','../../../package.json','LYfwA','start','Jbuzn','8HvcAJy','Downloading\x20SDK\x20binary\x20from:\x20','entry','Got\x20Error\x20while\x20downloading\x20percy\x20binary\x20file\x20%s','close','setupCliPath','bObGL','data','KShMM','debug','isFile','.browserstack','startsWith','entries','jHxni','Aqpsg','eMzPn','FndNL','format','util','Using\x20BROWSERSTACK_BINARY_URL\x20from\x20env\x20variable:\x20','3025775ZwHFuC','cmNfp','warn','getSdkVersion','AlCac','isKpo','1wWDzDU','downloaded_file.zip','OZkfx','SDK_CLI_DOWNLOAD','../../helpers/classLogger.js','BROWSERSTACK_CLI_ENV','../../helpers/performance/constants','Error\x20while\x20reading\x20CLI\x20path:\x20','SDK_CLI_BIN_PATH','isBinaryBusy','homedir','Binary\x20file\x20became\x20busy\x20during\x20write,\x20continuing\x20with\x20existing\x20binary:\x20','hegae','LwGfy','testFrameworkDetail','dPQbr','path','tqPRF','OYPTJ','IoSpq','KuDeq','1028688zUPNhu','statSync','object','BROWSERSTACK_FILES_DIR','MZUZI','follow-redirects','./state/hookState.js','Failed\x20to\x20delete\x20zip\x20file:\x20','shouldSkipSessionStatus','VqMvH','basename','fileName','JEYgU','length','kMasF','lRhBm','binary-','yYDCE','get','unix:/tmp/sdk-platform-','open','downloadLatestBinary','Need\x20to\x20update\x20binary,\x20current\x20binary\x20version:\x20','checkAndUpdateCli','isArray','getWritableDir','error','readEntry','EJFNB','BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL','getSdkLanguage','../../helpers/test-observability/utils.js','jSDnt','GHEey','exports','pipe','FrDup','shouldSkipSessionName','Resolved\x20binary\x20path:\x20','qJjrR','readdirSync','createWriteStream','YzIbi','automationFrameworkDetail','runShellCommand','\x20already\x20exists','map','VaQBu','dwfhe','CLI\x20version\x20found\x20despite\x20error:\x20\x22','yaXYn','AlgqQ','./instances/testFrameworkInstance.js','skipSessionName','openSync','bGzfL','isDirectory','BROWSERSTACK_BINARY_URL','cli_version','response\x20','getExistingCliPath','listen','../../helpers/utilities','Unable\x20to\x20set\x20required\x20permissions\x20to\x20','No\x20writable\x20directory\x20available\x20for\x20the\x20CLI','asnkO','Configuring\x20Cli\x20path.','Got\x20Error\x20in\x20percy\x20binary\x20downloading\x20request\x20','join','info','mtime','BROWSERSTACK_TEST_FRAMEWORK_DETAIL','test','GET','QTnBF','getCurrentInstanceName','0755','mergeObject','Failed\x20to\x20download\x20binary,\x20Exception:\x20','Vzkli','requestToUpdateCLI','Development\x20Cli\x20Path:\x20','getCLIParamsForDevEnv','Test\x20or\x20Automation\x20framework\x20not\x20provided\x20testFramework=','SrXYu','reduce','env','SHELL_EXECUTE_ERROR','DeMBB','dnkWl','1152rTHzwV','version','code','testContextOptions','gxNWr','478188ILWbXQ','2031081QJacoX','openReadStream','okDQW','downloadFileStream','concat','includes','cpWoL','chmod'];a64_0x232f=function(){return _0xd23b2d;};return a64_0x232f();}