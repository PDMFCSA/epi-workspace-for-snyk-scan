const a58_0x1d520b=a58_0x7d04;(function(_0x2a75aa,_0x525394){const _0x2698c1=a58_0x7d04,_0x5f548b=_0x2a75aa();while(!![]){try{const _0x3aa158=-parseInt(_0x2698c1(0x22c))/0x1*(parseInt(_0x2698c1(0x23d))/0x2)+-parseInt(_0x2698c1(0x1d9))/0x3*(-parseInt(_0x2698c1(0x24c))/0x4)+parseInt(_0x2698c1(0x246))/0x5+parseInt(_0x2698c1(0x1fe))/0x6+parseInt(_0x2698c1(0x222))/0x7+-parseInt(_0x2698c1(0x19b))/0x8*(parseInt(_0x2698c1(0x210))/0x9)+parseInt(_0x2698c1(0x196))/0xa*(-parseInt(_0x2698c1(0x1f9))/0xb);if(_0x3aa158===_0x525394)break;else _0x5f548b['push'](_0x5f548b['shift']());}catch(_0x54c1ee){_0x5f548b['push'](_0x5f548b['shift']());}}}(a58_0x503c,0xbcdcc));const fs=require('fs'),os=require('os'),url=require(a58_0x1d520b(0x1e4)),path=require(a58_0x1d520b(0x1d4)),{exec}=require(a58_0x1d520b(0x203)),{https}=require(a58_0x1d520b(0x200)),yauzl=require(a58_0x1d520b(0x23b)),util=require(a58_0x1d520b(0x1c2)),{getFrameworkVersion}=require(a58_0x1d520b(0x1fc)),{threadId}=require(a58_0x1d520b(0x1e1)),PerformanceTester=require(a58_0x1d520b(0x20c)),{EVENTS:PerformanceEvents}=require(a58_0x1d520b(0x1ed)),{isNullOrEmpty,isWritable,setReadWriteAccess}=require(a58_0x1d520b(0x1cf)),{isTrue,createDir,getHostInfo,nodeRequest,nestedKeyValue}=require(a58_0x1d520b(0x1b5)),{BROWSERSTACK_API_URL,UPDATED_CLI_ENDPOINT}=require(a58_0x1d520b(0x22f)),{createClassLogger}=require(a58_0x1d520b(0x1a9)),TestFrameworkInstance=require(a58_0x1d520b(0x24b)),HookState=require('./state/hookState.js'),TestFrameworkState=require(a58_0x1d520b(0x204)),AutomationFrameworkState=require(a58_0x1d520b(0x1cc)),TestFrameworkConstants=require(a58_0x1d520b(0x24d)),logger=createClassLogger(a58_0x1d520b(0x1ba));class CLIUtils{[a58_0x1d520b(0x225)]={};[a58_0x1d520b(0x215)]={};static[a58_0x1d520b(0x202)](){const _0x1551c6=a58_0x1d520b,_0x8afe3a={};_0x8afe3a['MRhBl']=function(_0x1ba9f5,_0x28d56b){return _0x1ba9f5===_0x28d56b;},_0x8afe3a[_0x1551c6(0x1de)]=_0x1551c6(0x1b4);const _0x3580fd=_0x8afe3a;return _0x3580fd[_0x1551c6(0x1b3)](process[_0x1551c6(0x1d6)][_0x1551c6(0x232)],_0x3580fd[_0x1551c6(0x1de)]);}static[a58_0x1d520b(0x229)](){const _0x23d089=a58_0x1d520b,_0x15baee={};return _0x15baee['id']=process['env']['BROWSERSTACK_CLI_ENV'],_0x15baee[_0x23d089(0x1b2)]='unix:/tmp/sdk-platform-'+process[_0x23d089(0x1d6)][_0x23d089(0x232)]+'.sock',_0x15baee;}static[a58_0x1d520b(0x1f5)](){const _0x2a3582=a58_0x1d520b,_0x331288={'ZTYJY':function(_0xcb361a,_0x56bc19){return _0xcb361a(_0x56bc19);},'lFjJt':_0x2a3582(0x18b)};return _0x331288[_0x2a3582(0x1dc)](require,_0x331288[_0x2a3582(0x1e0)])[_0x2a3582(0x18a)];}static[a58_0x1d520b(0x1a0)](){const _0x261a09=a58_0x1d520b,_0x16966d={};_0x16966d[_0x261a09(0x244)]=_0x261a09(0x247);const _0x38a620=_0x16966d;return _0x38a620[_0x261a09(0x244)];}static async[a58_0x1d520b(0x221)](_0x3847ad){const _0x281149=a58_0x1d520b,_0x562bee={'pTbBy':_0x281149(0x188),'Ekzoj':function(_0x2599eb,_0x540778){return _0x2599eb(_0x540778);},'UeaqN':function(_0x276793,_0x2b411e){return _0x276793(_0x2b411e);},'lkhlN':_0x281149(0x19d)};logger['debug'](_0x562bee[_0x281149(0x1a3)]);const _0x3c61df=process['env'][_0x281149(0x1d5)];if(!_0x562bee[_0x281149(0x23e)](isNullOrEmpty,_0x3c61df))return logger['debug'](_0x281149(0x1fa)+_0x3c61df),_0x3c61df;try{const _0x4cd4fc=this[_0x281149(0x198)]();if(_0x562bee[_0x281149(0x1bb)](isNullOrEmpty,_0x4cd4fc))throw new Error(_0x562bee[_0x281149(0x1ae)]);const _0x2f3fa7=this[_0x281149(0x1bc)](_0x4cd4fc),_0x517a47=await this[_0x281149(0x1d3)](_0x2f3fa7,_0x4cd4fc,_0x3847ad);return logger['debug'](_0x281149(0x1f3)+_0x517a47),_0x517a47;}catch(_0x4dfdb4){logger['debug']('Error\x20in\x20setting\x20up\x20cli\x20path\x20directory,\x20Exception:\x20'+util['format'](_0x4dfdb4));}return null;}static async[a58_0x1d520b(0x1d3)](_0x51682f,_0x4756b2,_0x31c4e5){const _0x490f2c=a58_0x1d520b,_0x2c2235={'HGIIh':function(_0x1532f9){return _0x1532f9();},'IypVq':function(_0x30ba94,_0x2e530e){return _0x30ba94(_0x2e530e);},'bHaen':function(_0xac4ca8,_0x19481c,_0x2d60be){return _0xac4ca8(_0x19481c,_0x2d60be);},'YYSAG':'data','lrweL':'url','RpZQE':function(_0x326d57,_0x4bc449,_0x1513cb){return _0x326d57(_0x4bc449,_0x1513cb);}};PerformanceTester['start'](PerformanceEvents['SDK_CLI_CHECK_UPDATE']),logger[_0x490f2c(0x24a)](_0x490f2c(0x1ab)+_0x51682f);const _0x565192=_0x2c2235[_0x490f2c(0x1be)](getHostInfo),_0x5e01db={'sdk_version':CLIUtils['getSdkVersion'](),'os':_0x565192[_0x490f2c(0x243)],'os_arch':_0x565192[_0x490f2c(0x1b0)],'cli_version':'0','sdk_language':this[_0x490f2c(0x1a0)]()};!_0x2c2235[_0x490f2c(0x206)](isNullOrEmpty,_0x51682f)&&(_0x5e01db['cli_version']=await this['runShellCommand'](_0x51682f+_0x490f2c(0x1c8)));const _0x2036e2=await this[_0x490f2c(0x1b9)](_0x5e01db,_0x31c4e5);process['env']['BROWSERSTACK_BINARY_URL']&&(logger[_0x490f2c(0x24a)](_0x490f2c(0x19a)+process[_0x490f2c(0x1d6)]['BROWSERSTACK_BINARY_URL']),_0x2036e2[_0x490f2c(0x199)][_0x490f2c(0x1e4)]=process[_0x490f2c(0x1d6)][_0x490f2c(0x248)]);if(_0x2c2235[_0x490f2c(0x22a)](nestedKeyValue,_0x2036e2,[_0x2c2235['YYSAG'],_0x2c2235[_0x490f2c(0x1a6)]])){logger[_0x490f2c(0x21a)](_0x490f2c(0x1a1)+_0x5e01db['cli_version']);const _0x3d3ee9=await this['downloadLatestBinary'](_0x2c2235[_0x490f2c(0x23a)](nestedKeyValue,_0x2036e2,[_0x2c2235[_0x490f2c(0x19f)],_0x2c2235[_0x490f2c(0x1a6)]]),_0x4756b2);return PerformanceTester[_0x490f2c(0x1d8)](PerformanceEvents['SDK_CLI_CHECK_UPDATE']),_0x3d3ee9;}return PerformanceTester[_0x490f2c(0x1d8)](PerformanceEvents[_0x490f2c(0x1ff)]),_0x51682f;}static[a58_0x1d520b(0x198)](){const _0x311f27=a58_0x1d520b,_0x2a9348={'GuClJ':function(_0x55baca,_0x5ae134){return _0x55baca(_0x5ae134);},'uSpJV':_0x311f27(0x19d),'fFOAm':_0x311f27(0x238)},_0x1ad129=this[_0x311f27(0x201)]();try{if(_0x2a9348[_0x311f27(0x21c)](isNullOrEmpty,_0x1ad129))throw new Error(_0x2a9348[_0x311f27(0x1c3)]);const _0x1c4b1d=path[_0x311f27(0x197)](_0x1ad129,_0x2a9348['fFOAm']);return!fs[_0x311f27(0x192)](_0x1c4b1d)&&_0x2a9348[_0x311f27(0x21c)](createDir,_0x1c4b1d),_0x1c4b1d;}catch(_0xa34326){logger[_0x311f27(0x21a)](_0x311f27(0x21f)+util[_0x311f27(0x1ad)](_0xa34326));}}static[a58_0x1d520b(0x201)](){const _0x4d035f=a58_0x1d520b,_0x4b72eb={'wwZjE':'.browserstack','dHWqn':_0x4d035f(0x1e5),'EuRic':function(_0x5ce22b,_0x30b0d0){return _0x5ce22b(_0x30b0d0);},'wQBeS':function(_0x103a38,_0x511f0f){return _0x103a38(_0x511f0f);},'aSVzs':function(_0x2b0dda,_0x138c32){return _0x2b0dda(_0x138c32);},'erLzQ':function(_0x4f8ef6,_0x26a66a){return _0x4f8ef6(_0x26a66a);}},_0x185e50=[process[_0x4d035f(0x1d6)][_0x4d035f(0x186)],path[_0x4d035f(0x197)](os['homedir'](),_0x4b72eb[_0x4d035f(0x22e)]),path[_0x4d035f(0x197)](_0x4b72eb[_0x4d035f(0x1d7)],_0x4b72eb[_0x4d035f(0x22e)])];for(const _0x329e16 of _0x185e50){if(_0x4b72eb['EuRic'](isNullOrEmpty,_0x329e16))continue;try{if(fs[_0x4d035f(0x192)](_0x329e16)){logger[_0x4d035f(0x21a)](_0x4d035f(0x234)+_0x329e16+_0x4d035f(0x245));if(!_0x4b72eb[_0x4d035f(0x1e8)](isWritable,_0x329e16)){logger[_0x4d035f(0x21a)](_0x4d035f(0x209)+_0x329e16);const _0x4ecb23=_0x4b72eb[_0x4d035f(0x1af)](setReadWriteAccess,_0x329e16);!_0x4b72eb[_0x4d035f(0x1af)](isTrue,_0x4ecb23)&&logger[_0x4d035f(0x1f6)](_0x4d035f(0x20f)+_0x329e16);}}else{logger[_0x4d035f(0x21a)](_0x4d035f(0x1f0)+_0x329e16),_0x4b72eb[_0x4d035f(0x1e8)](createDir,_0x329e16),logger[_0x4d035f(0x21a)](_0x4d035f(0x209)+_0x329e16);const _0x3b5221=_0x4b72eb[_0x4d035f(0x20e)](setReadWriteAccess,_0x329e16);!_0x4b72eb[_0x4d035f(0x1a4)](isTrue,_0x3b5221)&&logger[_0x4d035f(0x1f6)](_0x4d035f(0x20f)+_0x329e16);}return _0x329e16;}catch(_0x914a14){logger[_0x4d035f(0x249)](_0x4d035f(0x18e)+util['format'](_0x914a14));}}return null;}static['getExistingCliPath'](_0x43780c){const _0x456e3d=a58_0x1d520b,_0x3c6fab={};_0x3c6fab[_0x456e3d(0x1e2)]=function(_0x46acea,_0x384e8c){return _0x46acea>_0x384e8c;};const _0x301c63=_0x3c6fab;try{if(!fs[_0x456e3d(0x192)](_0x43780c)||!fs[_0x456e3d(0x23f)](_0x43780c)['isDirectory']())return'';const _0x544691=fs[_0x456e3d(0x1f7)](_0x43780c)[_0x456e3d(0x190)](_0x283d06=>path[_0x456e3d(0x197)](_0x43780c,_0x283d06))[_0x456e3d(0x213)](_0x2b3cfd=>fs[_0x456e3d(0x23f)](_0x2b3cfd)[_0x456e3d(0x1f1)]()&&path[_0x456e3d(0x1ef)](_0x2b3cfd)['startsWith'](_0x456e3d(0x1bd)));if(_0x301c63['OUrUg'](_0x544691['length'],0x0)){const _0x383891=_0x544691['map'](_0x237939=>({'filePath':_0x237939,'mtime':fs[_0x456e3d(0x23f)](_0x237939)['mtime']}))[_0x456e3d(0x231)]((_0x2da3ed,_0x5aca4b)=>{const _0x3ce8c9=_0x456e3d;if(!_0x2da3ed||!_0x2da3ed[_0x3ce8c9(0x1fd)])return _0x5aca4b;if(_0x301c63[_0x3ce8c9(0x1e2)](_0x5aca4b['mtime'],_0x2da3ed['mtime']))return _0x5aca4b;return _0x2da3ed;},{});return _0x383891?_0x383891[_0x456e3d(0x216)]:'';}return'';}catch(_0x55eec4){return logger[_0x456e3d(0x249)](_0x456e3d(0x223)+util['format'](_0x55eec4)),'';}}static [a58_0x1d520b(0x1b9)]=async(_0x552aaa,_0x17e0c5)=>{const _0x3afbf8=a58_0x1d520b,_0x4bb585={'LVGDV':function(_0x20b036,_0x3994fd,_0x6c995d,_0x499cda,_0x3c93d7,_0x48cd40){return _0x20b036(_0x3994fd,_0x6c995d,_0x499cda,_0x3c93d7,_0x48cd40);},'DffLe':_0x3afbf8(0x205)},_0x17340b={};_0x17340b['qs']=_0x552aaa;const _0xe06503=await _0x4bb585[_0x3afbf8(0x228)](nodeRequest,_0x4bb585['DffLe'],UPDATED_CLI_ENDPOINT,_0x17340b,_0x17e0c5,BROWSERSTACK_API_URL);return logger[_0x3afbf8(0x21a)](_0x3afbf8(0x1c9)+JSON['stringify'](_0xe06503)),_0xe06503;};static[a58_0x1d520b(0x1f2)](_0x3364aa,_0x382f52=''){const _0x22fb17=a58_0x1d520b,_0x233898={'ZLdsL':function(_0x233689,_0x444672){return _0x233689(_0x444672);},'EDrhh':_0x22fb17(0x230),'kAcmE':function(_0x2434c5,_0x2eb50a,_0x252bdc,_0x25f214){return _0x2434c5(_0x2eb50a,_0x252bdc,_0x25f214);},'QZPZo':_0x22fb17(0x249)};return new Promise((_0x561383,_0x439054)=>{const _0x200076=_0x22fb17,_0x5bc08b={'AmJzs':function(_0x39708c,_0x43b1b8){const _0x5d2820=a58_0x7d04;return _0x233898[_0x5d2820(0x1f8)](_0x39708c,_0x43b1b8);},'MLENm':_0x233898[_0x200076(0x23c)]},_0x4dd05d={};_0x4dd05d['cwd']=_0x382f52,_0x4dd05d['timeout']=0x1388;const _0x213e6e=_0x233898[_0x200076(0x212)](exec,_0x3364aa,_0x4dd05d,(_0x31a135,_0x1013d7,_0x2b1516)=>{const _0x276729=_0x200076;_0x31a135?_0x5bc08b[_0x276729(0x1ca)](_0x561383,_0x2b1516['trim']()||_0x5bc08b[_0x276729(0x1c4)]):_0x5bc08b[_0x276729(0x1ca)](_0x561383,_0x1013d7[_0x276729(0x1cd)]());});_0x213e6e['on'](_0x233898[_0x200076(0x1a5)],()=>{const _0x2047ed=_0x200076;_0x5bc08b['AmJzs'](_0x561383,_0x5bc08b[_0x2047ed(0x1c4)]);});});}static [a58_0x1d520b(0x1eb)]=async(_0x341e65,_0x4640a2)=>{const _0x5c21d8=a58_0x1d520b,_0x21c2c1={'tjInq':function(_0x866fae,_0x5a2665){return _0x866fae(_0x5a2665);},'cKMFu':'Got\x20Error\x20while\x20downloading\x20percy\x20binary\x20file\x20%s','jbdno':function(_0x344d2e,_0x408eec){return _0x344d2e(_0x408eec);},'CgAmW':_0x5c21d8(0x1e9),'yogFK':_0x5c21d8(0x249),'VnxpA':_0x5c21d8(0x18d)};PerformanceTester[_0x5c21d8(0x21e)](PerformanceEvents[_0x5c21d8(0x1e7)]),logger['debug']('Downloading\x20SDK\x20binary\x20from:\x20'+_0x341e65);try{const _0x3067f2=url[_0x5c21d8(0x19e)](_0x341e65),_0x5ed7db=path['join'](_0x4640a2,_0x21c2c1['VnxpA']),_0x580b42=fs[_0x5c21d8(0x1f4)](_0x5ed7db);return new Promise((_0x9a790c,_0x1a7dcb)=>{const _0x5b6cb2=_0x5c21d8,_0x1c4d0d={'Xgnjw':_0x21c2c1[_0x5b6cb2(0x1ea)],'fvuav':function(_0xb9c903,_0x4aa388){const _0x12c4f6=_0x5b6cb2;return _0x21c2c1[_0x12c4f6(0x1d2)](_0xb9c903,_0x4aa388);},'YpHCP':_0x21c2c1[_0x5b6cb2(0x233)],'DfhQK':_0x21c2c1[_0x5b6cb2(0x1e6)]};https['get'](_0x3067f2,function(_0x28b5e5){const _0xc012d8=_0x5b6cb2,_0x4c2d48={'qIkUO':_0x1c4d0d[_0xc012d8(0x1fb)],'NJfeI':function(_0x24e9ab,_0x4d5601){const _0x270cc6=_0xc012d8;return _0x1c4d0d[_0x270cc6(0x187)](_0x24e9ab,_0x4d5601);}},_0x47cde9=null;_0x28b5e5[_0xc012d8(0x1d0)](_0x580b42),_0x28b5e5['on'](_0x1c4d0d[_0xc012d8(0x241)],function(_0x995e5f){const _0x3e2fe5=_0xc012d8;logger[_0x3e2fe5(0x249)](util[_0x3e2fe5(0x1ad)](_0x4c2d48['qIkUO'],_0x995e5f)),PerformanceTester[_0x3e2fe5(0x1d8)](PerformanceEvents['SDK_CLI_DOWNLOAD'],![],util[_0x3e2fe5(0x1ad)](_0x995e5f)),_0x4c2d48[_0x3e2fe5(0x1bf)](_0x1a7dcb,_0x995e5f);}),_0x580b42['on'](_0x1c4d0d[_0xc012d8(0x241)],function(_0x297553){const _0x3db175=_0xc012d8;logger[_0x3db175(0x249)](util[_0x3db175(0x1ad)](_0x1c4d0d[_0x3db175(0x22d)],_0x297553)),PerformanceTester[_0x3db175(0x1d8)](PerformanceEvents[_0x3db175(0x1e7)],![],util[_0x3db175(0x1ad)](_0x297553)),_0x1c4d0d[_0x3db175(0x187)](_0x1a7dcb,_0x297553);}),CLIUtils[_0xc012d8(0x1c1)](_0x580b42,_0x47cde9,_0x5ed7db,_0x4640a2,_0x9a790c,_0x1a7dcb),PerformanceTester[_0xc012d8(0x1d8)](PerformanceEvents[_0xc012d8(0x1e7)]);})['on'](_0x21c2c1[_0x5b6cb2(0x1e6)],function(_0x28260f){const _0x25bdad=_0x5b6cb2;logger[_0x25bdad(0x249)](_0x25bdad(0x1da)+util[_0x25bdad(0x1ad)](_0x28260f)),PerformanceTester[_0x25bdad(0x1d8)](PerformanceEvents[_0x25bdad(0x1e7)],![],util[_0x25bdad(0x1ad)](_0x28260f)),_0x21c2c1[_0x25bdad(0x1dd)](_0x1a7dcb,_0x28260f);});});}catch(_0x120e0c){PerformanceTester[_0x5c21d8(0x1d8)](PerformanceEvents[_0x5c21d8(0x1e7)],![],util[_0x5c21d8(0x1ad)](_0x120e0c)),logger[_0x5c21d8(0x21a)](_0x5c21d8(0x218)+util[_0x5c21d8(0x1ad)](_0x120e0c));}};static[a58_0x1d520b(0x1c1)](_0x109ccb,_0x4d847f,_0x22f39d,_0x2e951c,_0x4de62a,_0x3afd23){const _0x1c3549=a58_0x1d520b,_0x21a68d={'POIux':function(_0x5087e8,_0x26d9bd){return _0x5087e8(_0x26d9bd);},'onpBk':_0x1c3549(0x1d8),'prhCx':function(_0x300df5,_0x2ec6e3){return _0x300df5===_0x2ec6e3;},'jasgg':function(_0x527667,_0x59d569){return _0x527667(_0x59d569);},'Becva':_0x1c3549(0x1db),'LnDIu':_0x1c3549(0x194),'dLvKQ':_0x1c3549(0x249),'YHJwq':_0x1c3549(0x1c7)};_0x109ccb['on'](_0x21a68d[_0x1c3549(0x1df)],function(){const _0x412e7c=_0x1c3549,_0x4cd3d5={'MPqXu':function(_0xa7eb29,_0x51cdc2){return _0x21a68d['POIux'](_0xa7eb29,_0x51cdc2);},'mOSbu':function(_0x410bf8,_0x4d9bb0){return _0x21a68d['POIux'](_0x410bf8,_0x4d9bb0);},'gjprx':_0x21a68d[_0x412e7c(0x20a)],'aLdyu':function(_0x58521b,_0x1d64a9){const _0x4a1f1a=_0x412e7c;return _0x21a68d[_0x4a1f1a(0x20d)](_0x58521b,_0x1d64a9);},'WDipb':function(_0x27f57f,_0x557305){return _0x21a68d['jasgg'](_0x27f57f,_0x557305);},'PQMjM':_0x21a68d['Becva'],'FDpyr':_0x21a68d[_0x412e7c(0x1ce)],'ZugnA':_0x21a68d['dLvKQ']},_0x169bb6={};_0x169bb6[_0x412e7c(0x18f)]=!![],yauzl[_0x412e7c(0x1aa)](_0x22f39d,_0x169bb6,function(_0x38ad01,_0x2c23ca){const _0x12e9a8=_0x412e7c,_0x36e328={'kEjnH':function(_0x180581,_0x15fcbb){const _0x34b690=a58_0x7d04;return _0x4cd3d5[_0x34b690(0x1b8)](_0x180581,_0x15fcbb);},'dYlnH':_0x4cd3d5[_0x12e9a8(0x227)],'OgTPF':function(_0x405cae,_0x17aa90){const _0x2891b2=_0x12e9a8;return _0x4cd3d5[_0x2891b2(0x1ee)](_0x405cae,_0x17aa90);},'vDHLn':function(_0x9a63c,_0x486ba5){const _0x41a266=_0x12e9a8;return _0x4cd3d5[_0x41a266(0x207)](_0x9a63c,_0x486ba5);},'oFvGB':_0x4cd3d5[_0x12e9a8(0x242)]};_0x38ad01&&_0x4cd3d5[_0x12e9a8(0x1e3)](_0x3afd23,_0x38ad01),_0x2c23ca[_0x12e9a8(0x211)](),_0x2c23ca['on'](_0x4cd3d5[_0x12e9a8(0x189)],_0x360714=>{const _0x453ca0=_0x12e9a8,_0x460097={'GrTVX':function(_0x6af60f,_0x348e59){return _0x36e328['kEjnH'](_0x6af60f,_0x348e59);},'ekFWb':_0x36e328[_0x453ca0(0x224)]};!_0x4d847f&&(_0x4d847f=_0x360714['fileName']);if(/\/$/[_0x453ca0(0x1d1)](_0x360714[_0x453ca0(0x22b)]))_0x2c23ca[_0x453ca0(0x211)]();else{const _0x4c5844=fs[_0x453ca0(0x1f4)](path[_0x453ca0(0x197)](_0x2e951c,_0x360714[_0x453ca0(0x22b)]));_0x2c23ca[_0x453ca0(0x219)](_0x360714,function(_0x13872c,_0x3f19da){const _0xa4f613=_0x453ca0;_0x13872c&&_0x460097[_0xa4f613(0x239)](_0x3afd23,_0x38ad01),_0x3f19da['on'](_0x460097[_0xa4f613(0x226)],function(){const _0x38fd8e=_0xa4f613;_0x4c5844[_0x38fd8e(0x1c7)](),_0x2c23ca[_0x38fd8e(0x211)]();}),_0x3f19da[_0xa4f613(0x1d0)](_0x4c5844);}),_0x36e328[_0x453ca0(0x235)](_0x360714['fileName'],_0x4d847f)&&_0x2c23ca['close']();}}),_0x2c23ca['on'](_0x4cd3d5[_0x12e9a8(0x1c6)],_0x5a6ea7=>{const _0x2bcee9=_0x12e9a8;_0x4cd3d5[_0x2bcee9(0x1e3)](_0x3afd23,_0x5a6ea7);}),_0x2c23ca[_0x12e9a8(0x1a8)](_0x4cd3d5['gjprx'],()=>{const _0x1e81c2=_0x12e9a8;fs[_0x1e81c2(0x19c)](_0x22f39d,_0x4d9595=>{const _0x143efd=_0x1e81c2;_0x4d9595&&logger['warn'](_0x143efd(0x193)+_0x22f39d);}),fs[_0x1e81c2(0x208)](_0x2e951c+'/'+_0x4d847f,_0x36e328[_0x1e81c2(0x220)],function(_0x806110){const _0x7918e3=_0x1e81c2;_0x806110&&_0x36e328['vDHLn'](_0x3afd23,_0x806110),_0x36e328[_0x7918e3(0x1a7)](_0x4de62a,_0x2e951c+'/'+_0x4d847f);}),_0x2c23ca['close']();});});});}static['getTestFrameworkDetail'](){const _0x11bef9=a58_0x1d520b;if(process['env'][_0x11bef9(0x1cb)])return JSON[_0x11bef9(0x19e)](process[_0x11bef9(0x1d6)]['BROWSERSTACK_TEST_FRAMEWORK_DETAIL']);return this[_0x11bef9(0x215)];}static['getAutomationFrameworkDetail'](){const _0x463f08=a58_0x1d520b;if(process['env'][_0x463f08(0x21b)])return JSON[_0x463f08(0x19e)](process[_0x463f08(0x1d6)]['BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL']);return this[_0x463f08(0x225)];}static['setFrameworkDetail'](_0x18f470,_0x5de69f){const _0xe311f5=a58_0x1d520b,_0x4960b5={'pKadR':_0xe311f5(0x236),'PEMla':function(_0x2dfb77,_0x69cc52){return _0x2dfb77(_0x69cc52);},'GeLFS':function(_0x5245f7,_0xe1c4ba){return _0x5245f7(_0xe1c4ba);},'wwXgh':function(_0x55c325,_0x3783b3){return _0x55c325||_0x3783b3;}},_0x41b537=_0x4960b5[_0xe311f5(0x1c0)][_0xe311f5(0x217)]('|');let _0x15f50c=0x0;while(!![]){switch(_0x41b537[_0x15f50c++]){case'0':this[_0xe311f5(0x225)]={'name':_0x5de69f,'version':_0x4960b5[_0xe311f5(0x237)](getFrameworkVersion,_0x5de69f)};continue;case'1':process[_0xe311f5(0x1d6)][_0xe311f5(0x21b)]=JSON[_0xe311f5(0x1ac)](this['automationFrameworkDetail']);continue;case'2':process[_0xe311f5(0x1d6)][_0xe311f5(0x1cb)]=JSON['stringify'](this[_0xe311f5(0x215)]);continue;case'3':this['testFrameworkDetail']={'name':_0x18f470,'version':{[_0x18f470]:_0x4960b5['GeLFS'](getFrameworkVersion,_0x18f470)}};continue;case'4':_0x4960b5[_0xe311f5(0x1b7)](!_0x18f470,!_0x5de69f)&&logger[_0xe311f5(0x21a)](_0xe311f5(0x1c5)+_0x18f470+_0xe311f5(0x21d)+_0x5de69f);continue;}break;}}static[a58_0x1d520b(0x18c)](_0x57e41b,_0x345ac5){return _0x57e41b+':'+_0x345ac5;}static[a58_0x1d520b(0x195)](){return process['pid']+':'+threadId;}static[a58_0x1d520b(0x1a2)](_0x1e7044){const _0x119cda=a58_0x1d520b;if(_0x1e7044[_0x119cda(0x1ec)]&&_0x1e7044[_0x119cda(0x1ec)][_0x119cda(0x214)])return!![];return![];}static[a58_0x1d520b(0x240)](_0x4a6094){const _0x14b3d2=a58_0x1d520b;if(_0x4a6094[_0x14b3d2(0x1ec)]&&_0x4a6094[_0x14b3d2(0x1ec)][_0x14b3d2(0x1b6)])return!![];return![];}static[a58_0x1d520b(0x191)](_0x2a0863){const _0x33eeb9=a58_0x1d520b,_0x559ffc=new RegExp(TestFrameworkConstants[_0x33eeb9(0x1b1)]);return _0x559ffc[_0x33eeb9(0x1d1)](_0x2a0863);}}module[a58_0x1d520b(0x20b)]=CLIUtils;function a58_0x7d04(_0x4ffa3b,_0x418b34){const _0x503c0a=a58_0x503c();return a58_0x7d04=function(_0x7d04f0,_0x302f13){_0x7d04f0=_0x7d04f0-0x186;let _0x26e412=_0x503c0a[_0x7d04f0];return _0x26e412;},a58_0x7d04(_0x4ffa3b,_0x418b34);}function a58_0x503c(){const _0x552ee0=['63834PRFgmf','Ekzoj','statSync','shouldSkipSessionStatus','DfhQK','PQMjM','platform','PCmVM','\x20already\x20exist','2945725ZqPTmA','node','BROWSERSTACK_BINARY_URL','error','info','./instances/testFrameworkInstance.js','16PieeXf','./framework/constants/testFrameworkConstants.js','BROWSERSTACK_FILES_DIR','fvuav','Configuring\x20Cli\x20path.','FDpyr','version','../../../package.json','getHookRegistryKey','downloaded_file.zip','Unable\x20to\x20get\x20writable\x20directory,\x20exception\x20','lazyEntries','map','matchHookRegex','existsSync','Failed\x20to\x20delete\x20zip\x20file:\x20','entry','getCurrentInstanceName','20UtcwQX','join','getCliDir','data','Using\x20BROWSERSTACK_BINARY_URL\x20from\x20env\x20variable:\x20','16ptnuUw','unlink','No\x20writable\x20directory\x20available\x20for\x20the\x20CLI','parse','YYSAG','getSdkLanguage','Need\x20to\x20update\x20binary,\x20current\x20binary\x20version:\x20','shouldSkipSessionName','pTbBy','erLzQ','QZPZo','lrweL','vDHLn','once','../../helpers/classLogger.js','open','Current\x20CLI\x20Path\x20Found:\x20','stringify','format','lkhlN','EuRic','arch','HOOK_REGEX','listen','MRhBl','development','../../helpers/helper','skipSessionStatus','wwXgh','mOSbu','requestToUpdateCLI','CLIUtils','UeaqN','getExistingCliPath','binary-','HGIIh','NJfeI','pKadR','downloadFileStream','util','uSpJV','MLENm','Test\x20or\x20Automation\x20framework\x20not\x20provided\x20testFramework=','ZugnA','close','\x20version','response\x20','AmJzs','BROWSERSTACK_TEST_FRAMEWORK_DETAIL','./state/automationFrameworkState.js','trim','LnDIu','../../helpers/utilities','pipe','test','jbdno','checkAndUpdateCli','path','SDK_CLI_BIN_PATH','env','dHWqn','end','1001871dEPTRb','Got\x20Error\x20in\x20percy\x20binary\x20downloading\x20request\x20','0755','ZTYJY','tjInq','wbofX','YHJwq','lFjJt','worker_threads','OUrUg','MPqXu','url','tmp','yogFK','SDK_CLI_DOWNLOAD','wQBeS','Got\x20Error\x20in\x20percy\x20binary\x20download\x20response\x20%s','cKMFu','downloadLatestBinary','testContextOptions','../../helpers/performance/constants','aLdyu','basename','File\x20does\x20not\x20exist:\x20','isFile','runShellCommand','Resolved\x20binary\x20path:\x20','createWriteStream','getSdkVersion','warn','readdirSync','ZLdsL','2927243kKJigW','Development\x20Cli\x20Path:\x20','YpHCP','../../helpers/test-observability/utils.js','mtime','2214270xmUmmd','SDK_CLI_CHECK_UPDATE','follow-redirects','getWritableDir','isDevelopmentEnv','child_process','./state/testFrameworkState.js','GET','IypVq','WDipb','chmod','Giving\x20write\x20permission\x20to\x20','onpBk','exports','../../helpers/performance/performance-tester.js','prhCx','aSVzs','Unable\x20to\x20provide\x20write\x20permission\x20to\x20','1365534NcGOMQ','readEntry','kAcmE','filter','skipSessionName','testFrameworkDetail','filePath','split','Failed\x20to\x20download\x20binary,\x20Exception:\x20','openReadStream','debug','BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL','GuClJ',',\x20automationFramework=','start','Error\x20in\x20getting\x20writable\x20directory,\x20writableDir=','oFvGB','setupCliPath','5260535kOwwPA','Error\x20while\x20reading\x20CLI\x20path:\x20','dYlnH','automationFrameworkDetail','ekFWb','gjprx','LVGDV','getCLIParamsForDevEnv','bHaen','fileName','45nCrNwl','Xgnjw','wwZjE','../utils/constants','SHELL_EXECUTE_ERROR','reduce','BROWSERSTACK_CLI_ENV','CgAmW','File\x20','OgTPF','4|3|0|1|2','PEMla','cli','GrTVX','RpZQE','yauzl','EDrhh'];a58_0x503c=function(){return _0x552ee0;};return a58_0x503c();}