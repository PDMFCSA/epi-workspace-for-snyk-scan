const a64_0x1ab171=a64_0x32e4;function a64_0x22c6(){const _0x594990=['MsQQX','map','chmod','includes','BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL','mKhOw','reduce','QoKFk','isFile','debug','error','Error\x20checking\x20if\x20binary\x20is\x20busy:\x20','uvlYJ','homedir','Binary\x20file\x20is\x20currently\x20in\x20use,\x20skipping\x20download\x20and\x20continuing\x20with\x20existing\x20binary:\x20','472605qAQmhW','CcUqa','isDevelopmentEnv','QXBEa','HOOK_REGEX','\x20already\x20exists','Folder\x20does\x20not\x20exist:\x20','FFmPy','Got\x20Error\x20while\x20downloading\x20SDK\x20binary\x20file\x20%s','unlink','mtime','fileName','.browserstack','object','join','GET','wadFK','cwd','arch','SDK_CLI_DOWNLOAD','Resolved\x20binary\x20path:\x20','OdHin','JWWuQ','CLIUtils','end','ODicZ','3|2|4|1|0','../../helpers/test-observability/utils.js','getHookRegistryKey','DgnKe','./state/automationFrameworkState.js','downloadFileStream','PmDSI','test','isArray','Setting\x20required\x20permissions\x20to\x20','Test\x20or\x20Automation\x20framework\x20not\x20provided\x20testFramework=','OiumB','isDirectory','response\x20','6qOcpaF','JhcpB','data','SIHdW','cIirw','xxbzc','igJhB','exports','skipSessionStatus','getSdkLanguage','uKNNX','eplSW','VkNUc','lafer','HTQOe','basename','setupCliPath','Failed\x20to\x20delete\x20zip\x20file:\x20','Resolving\x20with\x20stdout:\x20\x22','filePath','close','node','No\x20writable\x20directory\x20available\x20for\x20the\x20CLI','OlNiq','timeout','platform','openReadStream','getCliDir','Unable\x20to\x20set\x20required\x20permissions\x20to\x20','XqcFd','start','BROWSERSTACK_TEST_FRAMEWORK_DETAIL','Binary\x20is\x20busy:\x20','runShellCommand','checkAndUpdateCli','cli_version','matchHookRegex','uQutU','trim','papfW','closeSync','setFrameworkDetail','wxhJd','yKTpc','info','split','SDK_CLI_CHECK_UPDATE','lazyEntries','nOGtR','VXQxI','YnZql','parse','rfpZd','Using\x20BROWSERSTACK_BINARY_URL\x20from\x20env\x20variable:\x20','child_process','getCLIParamsForDevEnv','../../helpers/performance/performance-tester.js','Current\x20CLI\x20Path\x20Found:\x20','QmdQd','cli','requestToUpdateCLI','existsSync','yauzl','XyGUh','wqjKw','createWriteStream','concat','rhtRl','182701gpfyAo','McFBV','once','format','../../helpers/classLogger.js','../../../package.json','shouldSkipSessionStatus','openSync','iIFzx','length','CLI\x20version\x20found\x20despite\x20error:\x20\x22','automationFrameworkDetail','statSync','development','get','./state/hookState.js','follow-redirects','Error\x20in\x20setting\x20up\x20cli\x20path\x20directory,\x20Exception:\x20','qVaKD','testContextOptions','Error\x20in\x20getting\x20writable\x20directory,\x20writableDir=','readEntry','code','RYXQm','BROWSERSTACK_BINARY_URL','nkxnZ','EYPAL','BROWSERSTACK_FILES_DIR','version','getCurrentInstanceName','./instances/testFrameworkInstance.js','Tfzzb','open','tmpdir','Got\x20Error\x20in\x20SDK\x20binary\x20downloading\x20request\x20','.sock','hmJPQ','CsYAL','2231128KCqdUE','util','testFrameworkDetail','../../helpers/helper','Need\x20to\x20update\x20binary,\x20current\x20binary\x20version:\x20','unix:/tmp/sdk-platform-','\x20version','hanTc','gunRE','path','Got\x20Error\x20in\x20SDK\x20binary\x20download\x20response\x20%s','Jpzpf','kcVuR','IsrFk','hInqw','52372ladYDe','Folder\x20','Development\x20Cli\x20Path:\x20','warn','url','YZYbx','env','334856OZSBdu','JLZtR','1449516Sgfhhq','entries','stringify','../../helpers/performance/constants','pFXyX','message','getSdkVersion','BROWSERSTACK_CLI_ENV','XgjmN','riBCv','xPyMB','1828204SbErxj','pipe','oYZKp','mergeObject','nnjUh','CmOJg','./framework/constants/testFrameworkConstants.js','NfQqz','listen','pid','Unable\x20to\x20get\x20writable\x20directory,\x20exception\x20','QybVF','getWritableDir','Failed\x20to\x20download\x20SDK\x20binary,\x20Exception:\x20','iHzIS','fgbWD','xRhwT','getAutomationFrameworkDetail'];a64_0x22c6=function(){return _0x594990;};return a64_0x22c6();}function a64_0x32e4(_0xd5d47f,_0x5f291e){const _0x22c68f=a64_0x22c6();return a64_0x32e4=function(_0x32e4d5,_0x578d23){_0x32e4d5=_0x32e4d5-0x135;let _0x2a6153=_0x22c68f[_0x32e4d5];return _0x2a6153;},a64_0x32e4(_0xd5d47f,_0x5f291e);}(function(_0x7aff3f,_0x575936){const _0xf6d5cd=a64_0x32e4,_0xd53e5b=_0x7aff3f();while(!![]){try{const _0x31dc13=parseInt(_0xf6d5cd(0x153))/0x1+parseInt(_0xf6d5cd(0x188))/0x2*(parseInt(_0xf6d5cd(0x1e5))/0x3)+parseInt(_0xf6d5cd(0x18f))/0x4+parseInt(_0xf6d5cd(0x1bd))/0x5+-parseInt(_0xf6d5cd(0x191))/0x6+parseInt(_0xf6d5cd(0x19c))/0x7+-parseInt(_0xf6d5cd(0x179))/0x8;if(_0x31dc13===_0x575936)break;else _0xd53e5b['push'](_0xd53e5b['shift']());}catch(_0x1f512c){_0xd53e5b['push'](_0xd53e5b['shift']());}}}(a64_0x22c6,0x25993));const fs=require('fs'),os=require('os'),url=require(a64_0x1ab171(0x18c)),path=require(a64_0x1ab171(0x182)),{exec}=require(a64_0x1ab171(0x145)),{https}=require(a64_0x1ab171(0x163)),yauzl=require(a64_0x1ab171(0x14d)),util=require(a64_0x1ab171(0x17a)),{getFrameworkVersion}=require(a64_0x1ab171(0x1d8)),{threadId}=require('worker_threads'),PerformanceTester=require(a64_0x1ab171(0x147)),{EVENTS:PerformanceEvents}=require(a64_0x1ab171(0x194)),{isNullOrEmpty,isModifiable,setReadWriteExecuteAccess}=require('../../helpers/utilities'),{isTrue,createDir,getHostInfo,nodeRequest,nestedKeyValue}=require(a64_0x1ab171(0x17c)),{UPDATED_CLI_ENDPOINT,BINARY_BUSY_ERROR_CODES}=require('../utils/constants'),{createClassLogger}=require(a64_0x1ab171(0x157)),TestFrameworkInstance=require(a64_0x1ab171(0x171)),HookState=require(a64_0x1ab171(0x162)),TestFrameworkState=require('./state/testFrameworkState.js'),AutomationFrameworkState=require(a64_0x1ab171(0x1db)),TestFrameworkConstants=require(a64_0x1ab171(0x1a2)),logger=createClassLogger(a64_0x1ab171(0x1d4)),{getBStackAPIUrl}=require('../utils/apiUtilityMethods.js');class CLIUtils{[a64_0x1ab171(0x15e)]={};[a64_0x1ab171(0x17b)]={};static[a64_0x1ab171(0x1bf)](){const _0xf293d3=a64_0x1ab171,_0x134b73={};_0x134b73[_0xf293d3(0x141)]=function(_0x3e4b46,_0xf9a629){return _0x3e4b46===_0xf9a629;},_0x134b73['mWMni']=_0xf293d3(0x160);const _0x1d3028=_0x134b73;return _0x1d3028[_0xf293d3(0x141)](process[_0xf293d3(0x18e)][_0xf293d3(0x198)],_0x1d3028['mWMni']);}static[a64_0x1ab171(0x146)](){const _0x24eb71=a64_0x1ab171,_0x5b198b={};return _0x5b198b['id']=process['env']['BROWSERSTACK_CLI_ENV'],_0x5b198b[_0x24eb71(0x1a4)]=_0x24eb71(0x17e)+process['env'][_0x24eb71(0x198)]+_0x24eb71(0x176),_0x5b198b;}static[a64_0x1ab171(0x197)](){const _0x78745f=a64_0x1ab171,_0x2607ce={'QXBEa':function(_0x5ed3fd,_0xbf3f1d){return _0x5ed3fd(_0xbf3f1d);},'CcUqa':_0x78745f(0x158)};return _0x2607ce[_0x78745f(0x1c0)](require,_0x2607ce[_0x78745f(0x1be)])[_0x78745f(0x16f)];}static[a64_0x1ab171(0x1ee)](){const _0x148afd=a64_0x1ab171,_0x5eafe3={};_0x5eafe3[_0x148afd(0x199)]=_0x148afd(0x1fa);const _0x18d22d=_0x5eafe3;return _0x18d22d[_0x148afd(0x199)];}static async[a64_0x1ab171(0x1f5)](_0x313a15){const _0x50f754=a64_0x1ab171,_0x42d5c4={'QoKFk':'Configuring\x20Cli\x20path.','iHzIS':function(_0x1042b2,_0x2e249f){return _0x1042b2(_0x2e249f);},'OdHin':_0x50f754(0x1fb)};logger['debug'](_0x42d5c4[_0x50f754(0x1b5)]);const _0xeef9bf=process['env']['SDK_CLI_BIN_PATH'];if(!_0x42d5c4[_0x50f754(0x1aa)](isNullOrEmpty,_0xeef9bf))return logger['debug'](_0x50f754(0x18a)+_0xeef9bf),_0xeef9bf;try{const _0x11a367=this[_0x50f754(0x200)]();if(_0x42d5c4[_0x50f754(0x1aa)](isNullOrEmpty,_0x11a367))throw new Error(_0x42d5c4[_0x50f754(0x1d2)]);const _0x42e389=this['getExistingCliPath'](_0x11a367),_0x57594b=await this[_0x50f754(0x207)](_0x42e389,_0x11a367,_0x313a15);return logger[_0x50f754(0x1b7)](_0x50f754(0x1d1)+_0x57594b),_0x57594b;}catch(_0x219a46){logger['debug'](_0x50f754(0x164)+util[_0x50f754(0x156)](_0x219a46));}return null;}static async[a64_0x1ab171(0x207)](_0x334ab7,_0x4b7802,_0xda964c){const _0x192bce=a64_0x1ab171,_0x508213={'PmDSI':function(_0x5d46b6){return _0x5d46b6();},'lafer':function(_0x162db3,_0x1fd3c0){return _0x162db3(_0x1fd3c0);},'xxbzc':function(_0x1c264d,_0x30b69f,_0x19d395){return _0x1c264d(_0x30b69f,_0x19d395);},'YZYbx':'data','QybVF':_0x192bce(0x18c),'gDLUk':function(_0x228e59,_0x1a3ade){return _0x228e59(_0x1a3ade);}};PerformanceTester[_0x192bce(0x203)](PerformanceEvents[_0x192bce(0x13d)]),logger['info'](_0x192bce(0x148)+_0x334ab7);const _0x11e060=_0x508213[_0x192bce(0x1dd)](getHostInfo),_0x4cd466={'sdk_version':CLIUtils[_0x192bce(0x197)](),'os':_0x11e060[_0x192bce(0x1fe)],'os_arch':_0x11e060[_0x192bce(0x1cf)],'cli_version':'0','sdk_language':this['getSdkLanguage']()};!_0x508213[_0x192bce(0x1f2)](isNullOrEmpty,_0x334ab7)&&(_0x4cd466[_0x192bce(0x208)]=await this['runShellCommand'](_0x334ab7+_0x192bce(0x17f)));const _0x34bc8f=await this[_0x192bce(0x14b)](_0x4cd466,_0xda964c);process['env'][_0x192bce(0x16b)]&&(logger[_0x192bce(0x13b)](_0x192bce(0x144)+process['env'][_0x192bce(0x16b)]),_0x34bc8f[_0x192bce(0x1e7)][_0x192bce(0x18c)]=process[_0x192bce(0x18e)]['BROWSERSTACK_BINARY_URL']);if(_0x508213[_0x192bce(0x1ea)](nestedKeyValue,_0x34bc8f,[_0x508213['YZYbx'],_0x508213[_0x192bce(0x1a7)]])){logger[_0x192bce(0x1b7)](_0x192bce(0x17d)+_0x4cd466[_0x192bce(0x208)]);if(!_0x508213['gDLUk'](isNullOrEmpty,_0x334ab7)&&this['isBinaryBusy'](_0x334ab7))return logger[_0x192bce(0x18b)]('Existing\x20binary\x20is\x20currently\x20in\x20use,\x20skipping\x20update\x20and\x20continuing\x20with\x20current\x20version:\x20'+_0x334ab7),PerformanceTester[_0x192bce(0x1d5)](PerformanceEvents[_0x192bce(0x13d)]),_0x334ab7;const _0x3dd387=await this['downloadLatestBinary'](_0x508213[_0x192bce(0x1ea)](nestedKeyValue,_0x34bc8f,[_0x508213[_0x192bce(0x18d)],_0x508213[_0x192bce(0x1a7)]]),_0x4b7802);return PerformanceTester['end'](PerformanceEvents[_0x192bce(0x13d)]),_0x3dd387;}return PerformanceTester[_0x192bce(0x1d5)](PerformanceEvents[_0x192bce(0x13d)]),_0x334ab7;}static[a64_0x1ab171(0x200)](){const _0x30b89c=a64_0x1ab171,_0x4f59e9={'wadFK':function(_0x46977a,_0x90d15c){return _0x46977a(_0x90d15c);},'CmOJg':_0x30b89c(0x1fb),'fgbWD':_0x30b89c(0x14a),'nnjUh':function(_0x3e2285,_0x4f2ed4){return _0x3e2285(_0x4f2ed4);}},_0x4bb876=this[_0x30b89c(0x1a8)]();try{if(_0x4f59e9[_0x30b89c(0x1cd)](isNullOrEmpty,_0x4bb876))throw new Error(_0x4f59e9[_0x30b89c(0x1a1)]);const _0x25c077=path[_0x30b89c(0x1cb)](_0x4bb876,_0x4f59e9[_0x30b89c(0x1ab)]);return!fs[_0x30b89c(0x14c)](_0x25c077)&&_0x4f59e9[_0x30b89c(0x1a0)](createDir,_0x25c077),_0x25c077;}catch(_0xce176b){logger[_0x30b89c(0x1b7)](_0x30b89c(0x167)+util[_0x30b89c(0x156)](_0xce176b));}}static[a64_0x1ab171(0x1a8)](){const _0x8b8b56=a64_0x1ab171,_0x3a138e={'uvlYJ':_0x8b8b56(0x1c9),'TYRqa':function(_0x5aab61,_0x2690d3){return _0x5aab61(_0x2690d3);},'QmdQd':function(_0x3e0504,_0x2e1c3d){return _0x3e0504(_0x2e1c3d);},'DgnKe':function(_0x1ad292,_0x15f528){return _0x1ad292(_0x15f528);},'yKTpc':function(_0x4e6ef4,_0x53634c){return _0x4e6ef4(_0x53634c);},'nOGtR':function(_0x45fc5b,_0x4e73f0){return _0x45fc5b(_0x4e73f0);}},_0x4f9303=[process[_0x8b8b56(0x18e)][_0x8b8b56(0x16e)],path['join'](os[_0x8b8b56(0x1bb)](),_0x3a138e[_0x8b8b56(0x1ba)]),path['join'](os[_0x8b8b56(0x174)](),_0x3a138e[_0x8b8b56(0x1ba)])];for(const _0x13acf8 of _0x4f9303){if(_0x3a138e['TYRqa'](isNullOrEmpty,_0x13acf8))continue;try{if(fs[_0x8b8b56(0x14c)](_0x13acf8)){logger['debug'](_0x8b8b56(0x189)+_0x13acf8+_0x8b8b56(0x1c2));if(!_0x3a138e[_0x8b8b56(0x149)](isModifiable,_0x13acf8)){logger[_0x8b8b56(0x1b7)](_0x8b8b56(0x1e0)+_0x13acf8);const _0x1fd13a=_0x3a138e['TYRqa'](setReadWriteExecuteAccess,_0x13acf8);if(!_0x3a138e[_0x8b8b56(0x1da)](isTrue,_0x1fd13a)){logger[_0x8b8b56(0x18b)](_0x8b8b56(0x201)+_0x13acf8);continue;}}}else{logger[_0x8b8b56(0x1b7)](_0x8b8b56(0x1c3)+_0x13acf8),_0x3a138e[_0x8b8b56(0x149)](createDir,_0x13acf8),logger[_0x8b8b56(0x1b7)](_0x8b8b56(0x1e0)+_0x13acf8);const _0x12048e=_0x3a138e[_0x8b8b56(0x13a)](setReadWriteExecuteAccess,_0x13acf8);!_0x3a138e[_0x8b8b56(0x13f)](isTrue,_0x12048e)&&logger[_0x8b8b56(0x18b)](_0x8b8b56(0x201)+_0x13acf8);}return _0x13acf8;}catch(_0x115693){logger[_0x8b8b56(0x1b8)](_0x8b8b56(0x1a6)+util[_0x8b8b56(0x156)](_0x115693));}}return null;}static['getExistingCliPath'](_0x1111dd){const _0x120531=a64_0x1ab171,_0x2460fe={};_0x2460fe[_0x120531(0x1f3)]=function(_0x58f7ef,_0x6958f8){return _0x58f7ef>_0x6958f8;},_0x2460fe[_0x120531(0x1e2)]=function(_0x35ab59,_0x4ad450){return _0x35ab59>_0x4ad450;};const _0x380a5f=_0x2460fe;try{if(!fs['existsSync'](_0x1111dd)||!fs[_0x120531(0x15f)](_0x1111dd)[_0x120531(0x1e3)]())return'';const _0x2de350=fs['readdirSync'](_0x1111dd)['map'](_0x4337c1=>path[_0x120531(0x1cb)](_0x1111dd,_0x4337c1))['filter'](_0xcd20=>fs[_0x120531(0x15f)](_0xcd20)[_0x120531(0x1b6)]()&&path[_0x120531(0x1f4)](_0xcd20)['startsWith']('binary-'));if(_0x380a5f[_0x120531(0x1e2)](_0x2de350[_0x120531(0x15c)],0x0)){const _0x422807=_0x2de350[_0x120531(0x1af)](_0x44ecb6=>({'filePath':_0x44ecb6,'mtime':fs[_0x120531(0x15f)](_0x44ecb6)[_0x120531(0x1c7)]}))[_0x120531(0x1b4)]((_0xc46e3a,_0x1608dd)=>{const _0x8b4d52=_0x120531;if(!_0xc46e3a||!_0xc46e3a[_0x8b4d52(0x1c7)])return _0x1608dd;if(_0x380a5f[_0x8b4d52(0x1f3)](_0x1608dd['mtime'],_0xc46e3a[_0x8b4d52(0x1c7)]))return _0x1608dd;return _0xc46e3a;},{});return _0x422807?_0x422807[_0x120531(0x1f8)]:'';}return'';}catch(_0x36bf13){return logger[_0x120531(0x1b8)]('Error\x20while\x20reading\x20CLI\x20path:\x20'+util['format'](_0x36bf13)),'';}}static [a64_0x1ab171(0x14b)]=async(_0x5f590e,_0x4383c0)=>{const _0x141f44=a64_0x1ab171,_0x1e8f74={'uKNNX':function(_0x26bf96,_0x2fed71,_0x1cd417,_0xc6bebd,_0x412d2a){return _0x26bf96(_0x2fed71,_0x1cd417,_0xc6bebd,_0x412d2a);},'rfpZd':_0x141f44(0x1cc)},_0x20878f={};_0x20878f['qs']=_0x5f590e;const _0x5d7701=await _0x1e8f74[_0x141f44(0x1ef)](nodeRequest,_0x1e8f74[_0x141f44(0x143)],UPDATED_CLI_ENDPOINT,_0x20878f,_0x4383c0);return logger[_0x141f44(0x1b7)](_0x141f44(0x1e4)+JSON['stringify'](_0x5d7701)),_0x5d7701;};static['isBinaryBusy'](_0x2f9ad0){const _0x5ada63=a64_0x1ab171;try{const _0x3ca269=fs[_0x5ada63(0x15a)](_0x2f9ad0,'r+');return fs[_0x5ada63(0x137)](_0x3ca269),![];}catch(_0x12f1f9){if(BINARY_BUSY_ERROR_CODES[_0x5ada63(0x1b1)](_0x12f1f9[_0x5ada63(0x169)]))return logger[_0x5ada63(0x1b7)](_0x5ada63(0x205)+_0x2f9ad0),!![];return logger['debug'](_0x5ada63(0x1b9)+_0x12f1f9['message']),![];}}static[a64_0x1ab171(0x206)](_0x14ccb0,_0xef5b70=''){const _0x59b619=a64_0x1ab171,_0x5a1fc6={'FFmPy':_0x59b619(0x16f),'JhcpB':function(_0x4dcd1b,_0x1e1a2e){return _0x4dcd1b(_0x1e1a2e);},'MsQQX':'SHELL_EXECUTE_ERROR','ODicZ':function(_0x2829a6,_0x4abc3f){return _0x2829a6(_0x4abc3f);},'jNrxC':function(_0x5a4065,_0x5f000d,_0x5d9f02,_0x36c837){return _0x5a4065(_0x5f000d,_0x5d9f02,_0x36c837);},'fgvoq':_0x59b619(0x1b8)};return new Promise((_0xc62024,_0x200297)=>{const _0x3bf054=_0x59b619,_0x27d835={'QQOxx':function(_0x14d584,_0x4c70c0){const _0x329e85=a64_0x32e4;return _0x5a1fc6[_0x329e85(0x1d6)](_0x14d584,_0x4c70c0);},'SIHdW':_0x5a1fc6[_0x3bf054(0x1ae)]},_0x580d2e={};_0x580d2e[_0x3bf054(0x1ce)]=_0xef5b70,_0x580d2e[_0x3bf054(0x1fd)]=0x1388;const _0x2564c7=_0x5a1fc6['jNrxC'](exec,_0x14ccb0,_0x580d2e,(_0x4cf965,_0x803029,_0x3a03f7)=>{const _0x4ddbeb=_0x3bf054;if(_0x4cf965){if(_0x14ccb0[_0x4ddbeb(0x1b1)](_0x5a1fc6[_0x4ddbeb(0x1c4)])&&(_0x803029[_0x4ddbeb(0x135)]()||_0x3a03f7[_0x4ddbeb(0x135)]())){const _0x24fe9=_0x803029['trim']()||_0x3a03f7[_0x4ddbeb(0x135)]();logger[_0x4ddbeb(0x1b7)](_0x4ddbeb(0x15d)+_0x24fe9+'\x22'),_0x5a1fc6[_0x4ddbeb(0x1e6)](_0xc62024,_0x24fe9);}else _0x5a1fc6[_0x4ddbeb(0x1e6)](_0xc62024,_0x3a03f7[_0x4ddbeb(0x135)]()||_0x5a1fc6['MsQQX']);}else logger[_0x4ddbeb(0x1b7)](_0x4ddbeb(0x1f7)+_0x803029[_0x4ddbeb(0x135)]()+'\x22'),_0x5a1fc6[_0x4ddbeb(0x1d6)](_0xc62024,_0x803029[_0x4ddbeb(0x135)]());});_0x2564c7['on'](_0x5a1fc6['fgvoq'],()=>{const _0x1f39f0=_0x3bf054;_0x27d835['QQOxx'](_0xc62024,_0x27d835[_0x1f39f0(0x1e8)]);});});}static ['downloadLatestBinary']=async(_0x5e1091,_0x3c089e)=>{const _0x445cff=a64_0x1ab171,_0x2d47a2={'eplSW':_0x445cff(0x183),'JWWuQ':function(_0x4e35ac,_0x3e5bc8){return _0x4e35ac(_0x3e5bc8);},'xRhwT':_0x445cff(0x1c5),'papfW':'error','XyFZi':function(_0x179e1f,_0x564b08){return _0x179e1f(_0x564b08);},'Tfzzb':'downloaded_file.zip'};PerformanceTester[_0x445cff(0x203)](PerformanceEvents['SDK_CLI_DOWNLOAD']),logger['debug']('Downloading\x20SDK\x20binary\x20from:\x20'+_0x5e1091);try{const _0x35cf4e=url[_0x445cff(0x142)](_0x5e1091),_0x20e6ea=path[_0x445cff(0x1cb)](_0x3c089e,_0x2d47a2[_0x445cff(0x172)]),_0x48777a=fs[_0x445cff(0x150)](_0x20e6ea);return new Promise((_0x1a86e3,_0x2df2e8)=>{const _0x51204e=_0x445cff,_0x30cc60={'VXQxI':function(_0x4d182e,_0x7ca6d8){return _0x2d47a2['XyFZi'](_0x4d182e,_0x7ca6d8);}};https[_0x51204e(0x161)](_0x35cf4e,function(_0x5c9248){const _0x44e85f=_0x51204e,_0x27d140={'cIirw':_0x2d47a2[_0x44e85f(0x1f0)],'hInqw':function(_0x221890,_0xdcd76b){const _0xa687d1=_0x44e85f;return _0x2d47a2[_0xa687d1(0x1d3)](_0x221890,_0xdcd76b);},'nkxnZ':_0x2d47a2[_0x44e85f(0x1ac)]},_0x3cacb5=null;_0x5c9248[_0x44e85f(0x19d)](_0x48777a),_0x5c9248['on'](_0x2d47a2[_0x44e85f(0x136)],function(_0x22fd2d){const _0x27c3d4=_0x44e85f;logger[_0x27c3d4(0x1b8)](util[_0x27c3d4(0x156)](_0x27d140[_0x27c3d4(0x1e9)],_0x22fd2d)),PerformanceTester[_0x27c3d4(0x1d5)](PerformanceEvents[_0x27c3d4(0x1d0)],![],util[_0x27c3d4(0x156)](_0x22fd2d)),_0x27d140['hInqw'](_0x2df2e8,_0x22fd2d);}),_0x48777a['on'](_0x2d47a2[_0x44e85f(0x136)],function(_0xb53c08){const _0x55b96e=_0x44e85f;logger[_0x55b96e(0x1b8)](util[_0x55b96e(0x156)](_0x27d140[_0x55b96e(0x16c)],_0xb53c08)),PerformanceTester[_0x55b96e(0x1d5)](PerformanceEvents['SDK_CLI_DOWNLOAD'],![],util[_0x55b96e(0x156)](_0xb53c08)),_0x27d140[_0x55b96e(0x187)](_0x2df2e8,_0xb53c08);}),CLIUtils[_0x44e85f(0x1dc)](_0x48777a,_0x3cacb5,_0x20e6ea,_0x3c089e,_0x1a86e3,_0x2df2e8),PerformanceTester['end'](PerformanceEvents[_0x44e85f(0x1d0)]);})['on'](_0x2d47a2[_0x51204e(0x136)],function(_0x4b9a85){const _0x36217d=_0x51204e;logger['error'](_0x36217d(0x175)+util[_0x36217d(0x156)](_0x4b9a85)),PerformanceTester[_0x36217d(0x1d5)](PerformanceEvents[_0x36217d(0x1d0)],![],util['format'](_0x4b9a85)),_0x30cc60[_0x36217d(0x140)](_0x2df2e8,_0x4b9a85);});});}catch(_0x55ed24){PerformanceTester[_0x445cff(0x1d5)](PerformanceEvents['SDK_CLI_DOWNLOAD'],![],util[_0x445cff(0x156)](_0x55ed24)),logger['debug'](_0x445cff(0x1a9)+util[_0x445cff(0x156)](_0x55ed24));}};static['downloadFileStream'](_0x4379d5,_0x41d666,_0x52892d,_0x24f2c0,_0x3c1905,_0x38bb2d){const _0x59204a=a64_0x1ab171,_0x173a86={'JLZtR':function(_0x541fc5,_0x420382){return _0x541fc5(_0x420382);},'igJhB':function(_0x5e0782,_0x541d2e){return _0x5e0782(_0x541d2e);},'Jpzpf':function(_0x35e7c7,_0x4d325a){return _0x35e7c7(_0x4d325a);},'wqjKw':_0x59204a(0x1d5),'aIVoY':function(_0x29ba93,_0x13dae1){return _0x29ba93(_0x13dae1);},'qVaKD':'error','oYZKp':function(_0x129b74,_0x333974){return _0x129b74===_0x333974;},'DKfXs':function(_0x4d2778,_0x5ea08d){return _0x4d2778(_0x5ea08d);},'wxhJd':function(_0x382f88,_0x405eec){return _0x382f88(_0x405eec);},'pFXyX':'0755','kcVuR':'entry','McFBV':'close'};_0x4379d5['on'](_0x173a86[_0x59204a(0x154)],function(){const _0x11ba2b=_0x59204a,_0x38c9e5={'EYPAL':function(_0x5bba3c,_0x224825){const _0x406595=a64_0x32e4;return _0x173a86[_0x406595(0x190)](_0x5bba3c,_0x224825);},'OrWek':function(_0x1f2902,_0x1eda36){const _0x351a5b=a64_0x32e4;return _0x173a86[_0x351a5b(0x1eb)](_0x1f2902,_0x1eda36);},'ORwao':function(_0x6d565f,_0x535949){const _0x14d7ff=a64_0x32e4;return _0x173a86[_0x14d7ff(0x184)](_0x6d565f,_0x535949);},'NfQqz':_0x173a86[_0x11ba2b(0x14f)],'riBCv':function(_0x2e8760,_0x42bd07){const _0x46d2f9=_0x11ba2b;return _0x173a86[_0x46d2f9(0x190)](_0x2e8760,_0x42bd07);},'uQutU':function(_0x26fc92,_0x1f758e){return _0x173a86['aIVoY'](_0x26fc92,_0x1f758e);},'iIFzx':_0x173a86[_0x11ba2b(0x165)],'jZSuG':function(_0x34c76f,_0x139183){const _0x44e096=_0x11ba2b;return _0x173a86[_0x44e096(0x19e)](_0x34c76f,_0x139183);},'mKhOw':function(_0x3a46ca,_0x31da88){return _0x173a86['DKfXs'](_0x3a46ca,_0x31da88);},'hanTc':function(_0x2e86cf,_0x192ed6){const _0x5ea8b2=_0x11ba2b;return _0x173a86[_0x5ea8b2(0x139)](_0x2e86cf,_0x192ed6);},'RYXQm':_0x173a86[_0x11ba2b(0x195)],'hTaxw':_0x173a86[_0x11ba2b(0x185)]},_0x5d0172={};_0x5d0172[_0x11ba2b(0x13e)]=!![],yauzl[_0x11ba2b(0x173)](_0x52892d,_0x5d0172,function(_0x1cdc66,_0x4874cf){const _0x173562=_0x11ba2b,_0x397ce3={'qhFit':function(_0x27871a,_0x2174f8){const _0x11a2be=a64_0x32e4;return _0x38c9e5[_0x11a2be(0x1b3)](_0x27871a,_0x2174f8);},'VkNUc':function(_0x45ec14,_0x553c5c){const _0xc49821=a64_0x32e4;return _0x38c9e5[_0xc49821(0x180)](_0x45ec14,_0x553c5c);},'ANshq':_0x38c9e5[_0x173562(0x16a)]};_0x1cdc66&&_0x38c9e5[_0x173562(0x1b3)](_0x38bb2d,_0x1cdc66),_0x4874cf[_0x173562(0x168)](),_0x4874cf['on'](_0x38c9e5['hTaxw'],_0xc25f21=>{const _0x33db0d=_0x173562,_0x2d6ae8={'gunRE':function(_0x14a570,_0x1abf46){const _0x1930c2=a64_0x32e4;return _0x38c9e5[_0x1930c2(0x16d)](_0x14a570,_0x1abf46);},'XqcFd':function(_0x345dcd,_0x310c8a){return _0x38c9e5['OrWek'](_0x345dcd,_0x310c8a);},'xPyMB':function(_0x31cc89,_0x67e9d2){return _0x38c9e5['ORwao'](_0x31cc89,_0x67e9d2);},'XyGUh':_0x38c9e5[_0x33db0d(0x1a3)]};!_0x41d666&&(_0x41d666=_0xc25f21[_0x33db0d(0x1c8)]);if(/\/$/[_0x33db0d(0x1de)](_0xc25f21[_0x33db0d(0x1c8)]))_0x4874cf[_0x33db0d(0x168)]();else{const _0x1cc064=_0xc25f21[_0x33db0d(0x1c8)],_0x5cfea9=path['join'](_0x24f2c0,_0x1cc064);let _0x321070;try{_0x321070=fs['createWriteStream'](_0x5cfea9);}catch(_0x40b21e){if(BINARY_BUSY_ERROR_CODES[_0x33db0d(0x1b1)](_0x40b21e['code'])){logger[_0x33db0d(0x18b)](_0x33db0d(0x1bc)+_0x1cc064),fs[_0x33db0d(0x1c6)](_0x52892d,_0x70a2f3=>{const _0x72f832=_0x33db0d;_0x70a2f3&&logger[_0x72f832(0x18b)](_0x72f832(0x1f6)+_0x52892d);}),_0x38c9e5[_0x33db0d(0x19a)](_0x3c1905,_0x5cfea9);return;}_0x38c9e5[_0x33db0d(0x20a)](_0x38bb2d,_0x40b21e);return;}_0x321070['on'](_0x38c9e5[_0x33db0d(0x15b)],_0x2729f9=>{const _0x250f60=_0x33db0d;BINARY_BUSY_ERROR_CODES['includes'](_0x2729f9[_0x250f60(0x169)])?(logger[_0x250f60(0x18b)]('Binary\x20file\x20became\x20busy\x20during\x20write,\x20continuing\x20with\x20existing\x20binary:\x20'+_0x2729f9[_0x250f60(0x196)]),_0x321070[_0x250f60(0x1f9)](),fs[_0x250f60(0x1c6)](_0x52892d,_0xf2e8ee=>{const _0x58f186=_0x250f60;_0xf2e8ee&&logger['warn'](_0x58f186(0x1f6)+_0x52892d);}),_0x2d6ae8[_0x250f60(0x181)](_0x3c1905,_0x5cfea9)):_0x2d6ae8[_0x250f60(0x202)](_0x38bb2d,_0x2729f9);}),_0x4874cf[_0x33db0d(0x1ff)](_0xc25f21,function(_0x19b8e6,_0x55bfc6){const _0x44cc50=_0x33db0d;_0x19b8e6&&_0x2d6ae8[_0x44cc50(0x19b)](_0x38bb2d,_0x19b8e6),_0x55bfc6['on'](_0x2d6ae8[_0x44cc50(0x14e)],function(){const _0xc5c415=_0x44cc50;_0x321070[_0xc5c415(0x1f9)](),_0x4874cf[_0xc5c415(0x168)]();}),_0x55bfc6[_0x44cc50(0x19d)](_0x321070);}),_0x38c9e5['jZSuG'](_0xc25f21[_0x33db0d(0x1c8)],_0x41d666)&&_0x4874cf[_0x33db0d(0x1f9)]();}}),_0x4874cf['on'](_0x38c9e5[_0x173562(0x15b)],_0x38b730=>{const _0x39bfc5=_0x173562;_0x38c9e5[_0x39bfc5(0x1b3)](_0x38bb2d,_0x38b730);}),_0x4874cf[_0x173562(0x155)](_0x38c9e5['NfQqz'],()=>{const _0x406c76=_0x173562;fs[_0x406c76(0x1c6)](_0x52892d,_0x5da0ec=>{const _0x56e149=_0x406c76;_0x5da0ec&&logger['warn'](_0x56e149(0x1f6)+_0x52892d);}),fs[_0x406c76(0x1b0)](path['join'](_0x24f2c0,_0x41d666),_0x397ce3['ANshq'],function(_0x18a977){const _0x1bcf97=_0x406c76;_0x18a977&&_0x397ce3['qhFit'](_0x38bb2d,_0x18a977),_0x397ce3[_0x1bcf97(0x1f1)](_0x3c1905,path[_0x1bcf97(0x1cb)](_0x24f2c0,_0x41d666));}),_0x4874cf[_0x406c76(0x1f9)]();});});});}static['getTestFrameworkDetail'](){const _0x48d3e7=a64_0x1ab171;if(process['env'][_0x48d3e7(0x204)])return JSON[_0x48d3e7(0x142)](process[_0x48d3e7(0x18e)]['BROWSERSTACK_TEST_FRAMEWORK_DETAIL']);return this[_0x48d3e7(0x17b)];}static[a64_0x1ab171(0x1ad)](){const _0x128c5f=a64_0x1ab171;if(process[_0x128c5f(0x18e)][_0x128c5f(0x1b2)])return JSON[_0x128c5f(0x142)](process[_0x128c5f(0x18e)][_0x128c5f(0x1b2)]);return this[_0x128c5f(0x15e)];}static[a64_0x1ab171(0x138)](_0x415636,_0x6ed70a){const _0x34c886=a64_0x1ab171,_0x25ece3={'hmJPQ':_0x34c886(0x1d7),'IsrFk':function(_0x1c54a0,_0x5e39c9){return _0x1c54a0(_0x5e39c9);},'UbioS':function(_0x2f3809,_0x2b2738){return _0x2f3809||_0x2b2738;}},_0xae52cb=_0x25ece3[_0x34c886(0x177)][_0x34c886(0x13c)]('|');let _0x3daf05=0x0;while(!![]){switch(_0xae52cb[_0x3daf05++]){case'0':process['env'][_0x34c886(0x204)]=JSON[_0x34c886(0x193)](this['testFrameworkDetail']);continue;case'1':process['env']['BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL']=JSON[_0x34c886(0x193)](this[_0x34c886(0x15e)]);continue;case'2':this[_0x34c886(0x17b)]={'name':_0x415636,'version':{[_0x415636]:_0x25ece3[_0x34c886(0x186)](getFrameworkVersion,_0x415636)}};continue;case'3':_0x25ece3['UbioS'](!_0x415636,!_0x6ed70a)&&logger[_0x34c886(0x1b7)](_0x34c886(0x1e1)+_0x415636+',\x20automationFramework='+_0x6ed70a);continue;case'4':this[_0x34c886(0x15e)]={'name':_0x6ed70a,'version':_0x25ece3[_0x34c886(0x186)](getFrameworkVersion,_0x6ed70a)};continue;}break;}}static[a64_0x1ab171(0x1d9)](_0x9d73bc,_0x477eb0){return _0x9d73bc+':'+_0x477eb0;}static[a64_0x1ab171(0x170)](){const _0x53496d=a64_0x1ab171;return process[_0x53496d(0x1a5)]+':'+threadId;}static['shouldSkipSessionName'](_0x2d1424){const _0x166e00=a64_0x1ab171;if(_0x2d1424[_0x166e00(0x166)]&&_0x2d1424[_0x166e00(0x166)]['skipSessionName'])return!![];return![];}static[a64_0x1ab171(0x159)](_0x504ced){const _0x26088b=a64_0x1ab171;if(_0x504ced[_0x26088b(0x166)]&&_0x504ced[_0x26088b(0x166)][_0x26088b(0x1ed)])return!![];return![];}static[a64_0x1ab171(0x209)](_0x72116e){const _0x5359a3=a64_0x1ab171,_0x5741f4=new RegExp(TestFrameworkConstants[_0x5359a3(0x1c1)]);return _0x5741f4[_0x5359a3(0x1de)](_0x72116e);}static[a64_0x1ab171(0x19f)](_0x1adb55,_0x796eb7){const _0x52770b=a64_0x1ab171,_0x762b5e={};_0x762b5e[_0x52770b(0x178)]=function(_0x1d5212,_0x202e7d){return _0x1d5212!==_0x202e7d;},_0x762b5e[_0x52770b(0x152)]=function(_0x876c82,_0x1753c8){return _0x876c82===_0x1753c8;},_0x762b5e[_0x52770b(0x1fc)]=_0x52770b(0x1ca);const _0x5ddd73=_0x762b5e;for(const [_0x198f7a,_0x11dba1]of Object[_0x52770b(0x192)](_0x796eb7)){if(_0x5ddd73[_0x52770b(0x178)](_0x11dba1,null)&&_0x5ddd73['rhtRl'](typeof _0x11dba1,_0x5ddd73['OlNiq'])&&!Array[_0x52770b(0x1df)](_0x11dba1))_0x1adb55[_0x198f7a]=this[_0x52770b(0x19f)](_0x1adb55[_0x198f7a]||{},_0x11dba1);else Array[_0x52770b(0x1df)](_0x11dba1)?_0x1adb55[_0x198f7a]=(_0x1adb55[_0x198f7a]||[])[_0x52770b(0x151)](_0x11dba1):_0x1adb55[_0x198f7a]=_0x11dba1;}return _0x1adb55;}}module[a64_0x1ab171(0x1ec)]=CLIUtils;