function a64_0x5317(_0x5d072a,_0x583906){const _0x1aa486=a64_0x1aa4();return a64_0x5317=function(_0x531731,_0x1151c2){_0x531731=_0x531731-0x12e;let _0x1e502d=_0x1aa486[_0x531731];return _0x1e502d;},a64_0x5317(_0x5d072a,_0x583906);}const a64_0xb512f0=a64_0x5317;(function(_0x58746e,_0xc89cdc){const _0x4c083d=a64_0x5317,_0x21ffb9=_0x58746e();while(!![]){try{const _0x24e091=parseInt(_0x4c083d(0x1e0))/0x1+-parseInt(_0x4c083d(0x161))/0x2+-parseInt(_0x4c083d(0x1ca))/0x3+-parseInt(_0x4c083d(0x191))/0x4*(parseInt(_0x4c083d(0x193))/0x5)+-parseInt(_0x4c083d(0x142))/0x6*(-parseInt(_0x4c083d(0x1c4))/0x7)+parseInt(_0x4c083d(0x157))/0x8+-parseInt(_0x4c083d(0x1f3))/0x9*(-parseInt(_0x4c083d(0x1b4))/0xa);if(_0x24e091===_0xc89cdc)break;else _0x21ffb9['push'](_0x21ffb9['shift']());}catch(_0x2e82aa){_0x21ffb9['push'](_0x21ffb9['shift']());}}}(a64_0x1aa4,0xae5b6));const fs=require('fs'),os=require('os'),url=require(a64_0xb512f0(0x1f8)),path=require(a64_0xb512f0(0x1e4)),{exec}=require(a64_0xb512f0(0x1a0)),{https}=require('follow-redirects'),yauzl=require(a64_0xb512f0(0x1bf)),util=require(a64_0xb512f0(0x1c3)),{getFrameworkVersion}=require(a64_0xb512f0(0x17d)),{threadId}=require(a64_0xb512f0(0x134)),PerformanceTester=require(a64_0xb512f0(0x149)),{EVENTS:PerformanceEvents}=require(a64_0xb512f0(0x1cd)),{isNullOrEmpty,isModifiable,setReadWriteExecuteAccess}=require('../../helpers/utilities'),{isTrue,createDir,getHostInfo,nodeRequest,nestedKeyValue}=require(a64_0xb512f0(0x188)),{UPDATED_CLI_ENDPOINT,BINARY_BUSY_ERROR_CODES}=require('../utils/constants'),{createClassLogger}=require(a64_0xb512f0(0x1b2)),TestFrameworkInstance=require('./instances/testFrameworkInstance.js'),HookState=require(a64_0xb512f0(0x1e2)),TestFrameworkState=require(a64_0xb512f0(0x182)),AutomationFrameworkState=require(a64_0xb512f0(0x1d3)),TestFrameworkConstants=require(a64_0xb512f0(0x1c2)),logger=createClassLogger('CLIUtils'),{getBStackAPIUrl}=require(a64_0xb512f0(0x19c));class CLIUtils{[a64_0xb512f0(0x1d5)]={};[a64_0xb512f0(0x14d)]={};static[a64_0xb512f0(0x163)](){const _0x305b5b=a64_0xb512f0,_0x317420={};_0x317420['kBZew']=function(_0x2702d6,_0x12c2f1){return _0x2702d6===_0x12c2f1;},_0x317420[_0x305b5b(0x17c)]='development';const _0x3a33f9=_0x317420;return _0x3a33f9[_0x305b5b(0x154)](process[_0x305b5b(0x18b)][_0x305b5b(0x151)],_0x3a33f9[_0x305b5b(0x17c)]);}static[a64_0xb512f0(0x136)](){const _0xf5abe9=a64_0xb512f0,_0x2db6eb={};return _0x2db6eb['id']=process[_0xf5abe9(0x18b)][_0xf5abe9(0x151)],_0x2db6eb[_0xf5abe9(0x15c)]=_0xf5abe9(0x15e)+process[_0xf5abe9(0x18b)]['BROWSERSTACK_CLI_ENV']+_0xf5abe9(0x138),_0x2db6eb;}static[a64_0xb512f0(0x155)](){const _0x22f073=a64_0xb512f0,_0x20ea7b={'zPeMG':function(_0x1c5b18,_0x5c224c){return _0x1c5b18(_0x5c224c);},'tOQcE':_0x22f073(0x17f)};return _0x20ea7b[_0x22f073(0x145)](require,_0x20ea7b[_0x22f073(0x186)])['version'];}static['getSdkLanguage'](){const _0x384542=a64_0xb512f0,_0x1c4b29={};_0x1c4b29[_0x384542(0x1da)]=_0x384542(0x1dc);const _0x1baabc=_0x1c4b29;return _0x1baabc['QDXPL'];}static async[a64_0xb512f0(0x1c8)](_0x1fb450){const _0x13df53=a64_0xb512f0,_0x18f04a={'dbHsG':'Configuring\x20Cli\x20path.','pXrmO':function(_0x26ad00,_0x588e84){return _0x26ad00(_0x588e84);},'xYqOV':function(_0x446207,_0x303bc1){return _0x446207(_0x303bc1);},'gXkWc':_0x13df53(0x18a)};logger[_0x13df53(0x175)](_0x18f04a['dbHsG']);const _0x4dd351=process['env'][_0x13df53(0x1b7)];if(!_0x18f04a[_0x13df53(0x1bc)](isNullOrEmpty,_0x4dd351))return logger[_0x13df53(0x175)](_0x13df53(0x13f)+_0x4dd351),_0x4dd351;try{const _0x2c4cfc=this[_0x13df53(0x14a)]();if(_0x18f04a['xYqOV'](isNullOrEmpty,_0x2c4cfc))throw new Error(_0x18f04a['gXkWc']);const _0x3380c3=this['getExistingCliPath'](_0x2c4cfc),_0x581e11=await this[_0x13df53(0x1b6)](_0x3380c3,_0x2c4cfc,_0x1fb450);return logger[_0x13df53(0x175)](_0x13df53(0x13e)+_0x581e11),_0x581e11;}catch(_0x48c2af){logger[_0x13df53(0x175)](_0x13df53(0x195)+util['format'](_0x48c2af));}return null;}static async[a64_0xb512f0(0x1b6)](_0x47d138,_0x2b8556,_0x2b4451){const _0x194431=a64_0xb512f0,_0x3722da={'qlnVO':function(_0x5eebfe){return _0x5eebfe();},'ubniF':function(_0x54b9a2,_0x35014d){return _0x54b9a2(_0x35014d);},'tzDzO':function(_0x1f7a61,_0x444a6f,_0x529a52){return _0x1f7a61(_0x444a6f,_0x529a52);},'NtATY':_0x194431(0x137),'wXsAU':_0x194431(0x1f8)};PerformanceTester[_0x194431(0x152)](PerformanceEvents[_0x194431(0x153)]),logger['info'](_0x194431(0x185)+_0x47d138);const _0xa9307=_0x3722da[_0x194431(0x1cb)](getHostInfo),_0x28a065={'sdk_version':CLIUtils[_0x194431(0x155)](),'os':_0xa9307[_0x194431(0x174)],'os_arch':_0xa9307[_0x194431(0x1a5)],'cli_version':'0','sdk_language':this['getSdkLanguage']()};!_0x3722da[_0x194431(0x162)](isNullOrEmpty,_0x47d138)&&(_0x28a065['cli_version']=await this[_0x194431(0x1cc)](_0x47d138+'\x20version'));const _0x5354a9=await this[_0x194431(0x16c)](_0x28a065,_0x2b4451);process['env'][_0x194431(0x143)]&&(logger[_0x194431(0x160)](_0x194431(0x1f7)+process['env'][_0x194431(0x143)]),_0x5354a9[_0x194431(0x137)]['url']=process[_0x194431(0x18b)][_0x194431(0x143)]);if(_0x3722da['tzDzO'](nestedKeyValue,_0x5354a9,[_0x3722da[_0x194431(0x144)],_0x3722da['wXsAU']])){logger['debug'](_0x194431(0x1ba)+_0x28a065[_0x194431(0x19f)]);if(!_0x3722da['ubniF'](isNullOrEmpty,_0x47d138)&&this[_0x194431(0x192)](_0x47d138))return logger[_0x194431(0x1d1)](_0x194431(0x1ec)+_0x47d138),PerformanceTester[_0x194431(0x1f2)](PerformanceEvents[_0x194431(0x153)]),_0x47d138;const _0x1adf04=await this[_0x194431(0x18f)](_0x3722da[_0x194431(0x187)](nestedKeyValue,_0x5354a9,[_0x3722da[_0x194431(0x144)],_0x3722da['wXsAU']]),_0x2b8556);return PerformanceTester['end'](PerformanceEvents[_0x194431(0x153)]),_0x1adf04;}return PerformanceTester['end'](PerformanceEvents[_0x194431(0x153)]),_0x47d138;}static['getCliDir'](){const _0x1ddb9f=a64_0xb512f0,_0x149eca={'PWkqb':function(_0x4e7c00,_0x5cbc5d){return _0x4e7c00(_0x5cbc5d);},'JDhrD':_0x1ddb9f(0x18a),'KHsSO':_0x1ddb9f(0x1ed),'kdrYU':function(_0x2718c2,_0x40254e){return _0x2718c2(_0x40254e);}},_0x22ba3b=this[_0x1ddb9f(0x1b0)]();try{if(_0x149eca[_0x1ddb9f(0x1ea)](isNullOrEmpty,_0x22ba3b))throw new Error(_0x149eca[_0x1ddb9f(0x16d)]);const _0x4a3aed=path['join'](_0x22ba3b,_0x149eca[_0x1ddb9f(0x1d2)]);return!fs[_0x1ddb9f(0x1af)](_0x4a3aed)&&_0x149eca[_0x1ddb9f(0x177)](createDir,_0x4a3aed),_0x4a3aed;}catch(_0x5d7d5b){logger['debug'](_0x1ddb9f(0x170)+util[_0x1ddb9f(0x1c1)](_0x5d7d5b));}}static[a64_0xb512f0(0x1b0)](){const _0x53a85c=a64_0xb512f0,_0x26256c={'CRdFD':_0x53a85c(0x1c0),'FJtbO':function(_0x33499f,_0x5505f2){return _0x33499f(_0x5505f2);},'QobCe':function(_0x29cc13,_0x4e7a19){return _0x29cc13(_0x4e7a19);},'EXmba':function(_0x292447,_0x31b900){return _0x292447(_0x31b900);}},_0x4defc3=[process[_0x53a85c(0x18b)][_0x53a85c(0x156)],path['join'](os[_0x53a85c(0x15d)](),_0x26256c[_0x53a85c(0x1e8)]),path[_0x53a85c(0x1db)](os[_0x53a85c(0x18c)](),_0x26256c['CRdFD'])];for(const _0x5b4125 of _0x4defc3){if(_0x26256c[_0x53a85c(0x167)](isNullOrEmpty,_0x5b4125))continue;try{if(fs[_0x53a85c(0x1af)](_0x5b4125)){logger[_0x53a85c(0x175)]('Folder\x20'+_0x5b4125+_0x53a85c(0x140));if(!_0x26256c[_0x53a85c(0x167)](isModifiable,_0x5b4125)){logger[_0x53a85c(0x175)](_0x53a85c(0x148)+_0x5b4125);const _0x18632e=_0x26256c[_0x53a85c(0x167)](setReadWriteExecuteAccess,_0x5b4125);if(!_0x26256c[_0x53a85c(0x1f6)](isTrue,_0x18632e)){logger[_0x53a85c(0x1d1)](_0x53a85c(0x14f)+_0x5b4125);continue;}}}else{logger['debug'](_0x53a85c(0x12e)+_0x5b4125),_0x26256c['QobCe'](createDir,_0x5b4125),logger['debug'](_0x53a85c(0x148)+_0x5b4125);const _0x52c582=_0x26256c[_0x53a85c(0x173)](setReadWriteExecuteAccess,_0x5b4125);!_0x26256c['QobCe'](isTrue,_0x52c582)&&logger[_0x53a85c(0x1d1)](_0x53a85c(0x14f)+_0x5b4125);}return _0x5b4125;}catch(_0x1caf7c){logger['error']('Unable\x20to\x20get\x20writable\x20directory,\x20exception\x20'+util[_0x53a85c(0x1c1)](_0x1caf7c));}}return null;}static[a64_0xb512f0(0x1bd)](_0x5b8681){const _0x1845ab=a64_0xb512f0,_0x293354={};_0x293354[_0x1845ab(0x1ac)]=function(_0x11dfc5,_0x8b205f){return _0x11dfc5>_0x8b205f;};const _0x306bc4=_0x293354;try{if(!fs['existsSync'](_0x5b8681)||!fs[_0x1845ab(0x169)](_0x5b8681)[_0x1845ab(0x1aa)]())return'';const _0x430f1e=fs[_0x1845ab(0x139)](_0x5b8681)[_0x1845ab(0x196)](_0x5f14fa=>path[_0x1845ab(0x1db)](_0x5b8681,_0x5f14fa))['filter'](_0x148f0d=>fs['statSync'](_0x148f0d)[_0x1845ab(0x14c)]()&&path[_0x1845ab(0x17b)](_0x148f0d)[_0x1845ab(0x14b)](_0x1845ab(0x1ab)));if(_0x306bc4['Jwplz'](_0x430f1e[_0x1845ab(0x1a6)],0x0)){const _0x7d4b74=_0x430f1e['map'](_0x129017=>({'filePath':_0x129017,'mtime':fs[_0x1845ab(0x169)](_0x129017)[_0x1845ab(0x1e7)]}))[_0x1845ab(0x131)]((_0x3c2e1c,_0x4d8642)=>{const _0x4db373=_0x1845ab;if(!_0x3c2e1c||!_0x3c2e1c['mtime'])return _0x4d8642;if(_0x306bc4[_0x4db373(0x1ac)](_0x4d8642[_0x4db373(0x1e7)],_0x3c2e1c[_0x4db373(0x1e7)]))return _0x4d8642;return _0x3c2e1c;},{});return _0x7d4b74?_0x7d4b74['filePath']:'';}return'';}catch(_0x25184f){return logger[_0x1845ab(0x15a)](_0x1845ab(0x171)+util['format'](_0x25184f)),'';}}static [a64_0xb512f0(0x16c)]=async(_0x3e376b,_0x286dfb)=>{const _0x4bc656=a64_0xb512f0,_0x1689e5={'SLgOS':function(_0x4b1d43,_0x3f6456,_0x67bf65,_0x5d7bcd,_0x8ebfd1){return _0x4b1d43(_0x3f6456,_0x67bf65,_0x5d7bcd,_0x8ebfd1);},'jVGGm':_0x4bc656(0x183)},_0x4dc441={};_0x4dc441['qs']=_0x3e376b;const _0x537298=await _0x1689e5[_0x4bc656(0x1f4)](nodeRequest,_0x1689e5[_0x4bc656(0x147)],UPDATED_CLI_ENDPOINT,_0x4dc441,_0x286dfb);return logger['debug'](_0x4bc656(0x15f)+JSON['stringify'](_0x537298)),_0x537298;};static[a64_0xb512f0(0x192)](_0x49f47d){const _0x518da3=a64_0xb512f0;try{const _0x58866c=fs[_0x518da3(0x181)](_0x49f47d,'r+');return fs[_0x518da3(0x1e3)](_0x58866c),![];}catch(_0x382666){if(BINARY_BUSY_ERROR_CODES['includes'](_0x382666['code']))return logger[_0x518da3(0x175)](_0x518da3(0x1b3)+_0x49f47d),!![];return logger[_0x518da3(0x175)](_0x518da3(0x1b5)+_0x382666[_0x518da3(0x18e)]),![];}}static[a64_0xb512f0(0x1cc)](_0x49953a,_0x1ec294=''){const _0x550fba=a64_0xb512f0,_0x4953b1={'UtxKq':function(_0x2923ef,_0xb3db0d){return _0x2923ef(_0xb3db0d);},'jEsju':'SHELL_EXECUTE_ERROR','Dkhba':_0x550fba(0x16e),'iemrt':function(_0x518687,_0xb888f1){return _0x518687(_0xb888f1);},'fFJaa':function(_0x530547,_0xa171a2,_0x29afdc,_0x343f40){return _0x530547(_0xa171a2,_0x29afdc,_0x343f40);},'cumkO':_0x550fba(0x15a)};return new Promise((_0x15e0a6,_0x231816)=>{const _0xfdb051=_0x550fba,_0x8345a9={'edMNP':_0x4953b1[_0xfdb051(0x189)],'gMsYg':function(_0x24b2e1,_0x4639cc){const _0x4a8e51=_0xfdb051;return _0x4953b1[_0x4a8e51(0x12f)](_0x24b2e1,_0x4639cc);},'OVgWg':function(_0x4a9346,_0x1d1d0f){const _0x1fda6d=_0xfdb051;return _0x4953b1[_0x1fda6d(0x1de)](_0x4a9346,_0x1d1d0f);},'DeFBn':_0x4953b1[_0xfdb051(0x1dd)]},_0x53db80={};_0x53db80[_0xfdb051(0x184)]=_0x1ec294,_0x53db80[_0xfdb051(0x1e1)]=0x1388;const _0x603034=_0x4953b1[_0xfdb051(0x1e9)](exec,_0x49953a,_0x53db80,(_0x3a2285,_0x451b98,_0x77b69a)=>{const _0x596111=_0xfdb051;if(_0x3a2285){if(_0x49953a[_0x596111(0x141)](_0x8345a9['edMNP'])&&(_0x451b98[_0x596111(0x180)]()||_0x77b69a[_0x596111(0x180)]())){const _0x204799=_0x451b98['trim']()||_0x77b69a[_0x596111(0x180)]();logger[_0x596111(0x175)](_0x596111(0x1c6)+_0x204799+'\x22'),_0x8345a9[_0x596111(0x1d9)](_0x15e0a6,_0x204799);}else _0x8345a9[_0x596111(0x146)](_0x15e0a6,_0x77b69a[_0x596111(0x180)]()||_0x8345a9[_0x596111(0x133)]);}else logger[_0x596111(0x175)](_0x596111(0x1c9)+_0x451b98[_0x596111(0x180)]()+'\x22'),_0x8345a9['gMsYg'](_0x15e0a6,_0x451b98['trim']());});_0x603034['on'](_0x4953b1[_0xfdb051(0x166)],()=>{const _0x47ce39=_0xfdb051;_0x4953b1[_0x47ce39(0x12f)](_0x15e0a6,_0x4953b1[_0x47ce39(0x1dd)]);});});}static [a64_0xb512f0(0x18f)]=async(_0x1c452f,_0x48c1c6)=>{const _0x2dfa6b=a64_0xb512f0,_0xf6acbf={'GcSwa':'error','flZLc':function(_0x2ec870,_0x4f15fe){return _0x2ec870(_0x4f15fe);},'IQOgv':_0x2dfa6b(0x164),'KoAmB':function(_0x3ab6ec,_0x3863c3){return _0x3ab6ec(_0x3863c3);},'ZXzpE':'Got\x20Error\x20while\x20downloading\x20SDK\x20binary\x20file\x20%s','kbLCM':_0x2dfa6b(0x1ad)};PerformanceTester[_0x2dfa6b(0x152)](PerformanceEvents['SDK_CLI_DOWNLOAD']),logger[_0x2dfa6b(0x175)](_0x2dfa6b(0x13d)+_0x1c452f);try{const _0x3500ef=url[_0x2dfa6b(0x1d0)](_0x1c452f),_0x2a7ca4=path[_0x2dfa6b(0x1db)](_0x48c1c6,_0xf6acbf[_0x2dfa6b(0x1f1)]),_0xd09d96=fs[_0x2dfa6b(0x1c5)](_0x2a7ca4);return new Promise((_0x4f76e5,_0x40b01a)=>{const _0x418e59=_0x2dfa6b,_0x3be783={'xDXSb':_0xf6acbf['IQOgv'],'XvZIb':function(_0x2b1681,_0x1dd845){const _0x21ea0d=a64_0x5317;return _0xf6acbf[_0x21ea0d(0x1ae)](_0x2b1681,_0x1dd845);},'uMAXl':_0xf6acbf[_0x418e59(0x13b)],'jOtpu':function(_0x579269,_0x30c2cc){const _0x13b685=_0x418e59;return _0xf6acbf[_0x13b685(0x1ae)](_0x579269,_0x30c2cc);}};https['get'](_0x3500ef,function(_0x6f86b4){const _0x5282a8=_0x418e59,_0x3bd470=null;_0x6f86b4[_0x5282a8(0x1be)](_0xd09d96),_0x6f86b4['on'](_0xf6acbf[_0x5282a8(0x1a1)],function(_0x3d2409){const _0x435160=_0x5282a8;logger[_0x435160(0x15a)](util[_0x435160(0x1c1)](_0x3be783[_0x435160(0x158)],_0x3d2409)),PerformanceTester['end'](PerformanceEvents[_0x435160(0x1d7)],![],util['format'](_0x3d2409)),_0x3be783[_0x435160(0x178)](_0x40b01a,_0x3d2409);}),_0xd09d96['on'](_0xf6acbf[_0x5282a8(0x1a1)],function(_0x45e26b){const _0x4e6f00=_0x5282a8;logger['error'](util[_0x4e6f00(0x1c1)](_0x3be783[_0x4e6f00(0x1f5)],_0x45e26b)),PerformanceTester[_0x4e6f00(0x1f2)](PerformanceEvents['SDK_CLI_DOWNLOAD'],![],util['format'](_0x45e26b)),_0x3be783['jOtpu'](_0x40b01a,_0x45e26b);}),CLIUtils['downloadFileStream'](_0xd09d96,_0x3bd470,_0x2a7ca4,_0x48c1c6,_0x4f76e5,_0x40b01a),PerformanceTester[_0x5282a8(0x1f2)](PerformanceEvents[_0x5282a8(0x1d7)]);})['on'](_0xf6acbf[_0x418e59(0x1a1)],function(_0x7aedd6){const _0x10f8b2=_0x418e59;logger['error'](_0x10f8b2(0x1a9)+util['format'](_0x7aedd6)),PerformanceTester[_0x10f8b2(0x1f2)](PerformanceEvents['SDK_CLI_DOWNLOAD'],![],util[_0x10f8b2(0x1c1)](_0x7aedd6)),_0xf6acbf[_0x10f8b2(0x14e)](_0x40b01a,_0x7aedd6);});});}catch(_0x3c282b){PerformanceTester[_0x2dfa6b(0x1f2)](PerformanceEvents[_0x2dfa6b(0x1d7)],![],util['format'](_0x3c282b)),logger[_0x2dfa6b(0x175)]('Failed\x20to\x20download\x20SDK\x20binary,\x20Exception:\x20'+util[_0x2dfa6b(0x1c1)](_0x3c282b));}};static[a64_0xb512f0(0x132)](_0x4b4c66,_0x5f21d9,_0x1581b5,_0x168a4b,_0x50f2ea,_0x2a3553){const _0x41c462=a64_0xb512f0,_0x30e001={'sMnGJ':function(_0x5b00a9,_0x46d336){return _0x5b00a9(_0x46d336);},'OKgla':_0x41c462(0x1f2),'olNay':_0x41c462(0x199),'SMbcH':_0x41c462(0x194),'hUree':'error','Ffzjw':function(_0x3677c5,_0x3a8730){return _0x3677c5===_0x3a8730;},'YeUzv':'close'};_0x4b4c66['on'](_0x30e001['YeUzv'],function(){const _0x25f4bd=_0x41c462,_0x5b4f6d={'MfKCW':function(_0x3ecd41,_0x5584cb){const _0x3a415d=a64_0x5317;return _0x30e001[_0x3a415d(0x1f9)](_0x3ecd41,_0x5584cb);},'ULnDn':_0x30e001[_0x25f4bd(0x130)],'HRmxl':function(_0x4e930d,_0x4a82fc){return _0x30e001['Ffzjw'](_0x4e930d,_0x4a82fc);}},_0x20a299={};_0x20a299[_0x25f4bd(0x16b)]=!![],yauzl[_0x25f4bd(0x1a3)](_0x1581b5,_0x20a299,function(_0x31eb03,_0x3b8ba0){const _0x218d7b=_0x25f4bd,_0xecd525={'chsWK':function(_0x59f7af,_0x1ba741){const _0x1f73a2=a64_0x5317;return _0x30e001[_0x1f73a2(0x1f9)](_0x59f7af,_0x1ba741);},'kzRJy':function(_0x14267f,_0x35618b){const _0x1df207=a64_0x5317;return _0x30e001[_0x1df207(0x1f9)](_0x14267f,_0x35618b);},'opBjm':_0x30e001[_0x218d7b(0x19d)],'bgUoY':function(_0x51a3ab,_0x40b236){return _0x30e001['sMnGJ'](_0x51a3ab,_0x40b236);},'xcGmj':_0x30e001[_0x218d7b(0x1b8)]};_0x31eb03&&_0x30e001['sMnGJ'](_0x2a3553,_0x31eb03),_0x3b8ba0[_0x218d7b(0x19a)](),_0x3b8ba0['on'](_0x30e001[_0x218d7b(0x165)],_0x3841f4=>{const _0x1a1a02=_0x218d7b;!_0x5f21d9&&(_0x5f21d9=_0x3841f4[_0x1a1a02(0x1bb)]);if(/\/$/[_0x1a1a02(0x150)](_0x3841f4['fileName']))_0x3b8ba0[_0x1a1a02(0x19a)]();else{const _0x3d40fe=_0x3841f4['fileName'],_0x2b6d44=path[_0x1a1a02(0x1db)](_0x168a4b,_0x3d40fe);let _0x421ea4;try{_0x421ea4=fs[_0x1a1a02(0x1c5)](_0x2b6d44);}catch(_0x1cba8a){if(BINARY_BUSY_ERROR_CODES[_0x1a1a02(0x141)](_0x1cba8a['code'])){logger[_0x1a1a02(0x1d1)]('Binary\x20file\x20is\x20currently\x20in\x20use,\x20skipping\x20download\x20and\x20continuing\x20with\x20existing\x20binary:\x20'+_0x3d40fe),fs[_0x1a1a02(0x190)](_0x1581b5,_0x1eefc7=>{const _0x319f2f=_0x1a1a02;_0x1eefc7&&logger[_0x319f2f(0x1d1)]('Failed\x20to\x20delete\x20zip\x20file:\x20'+_0x1581b5);}),_0x5b4f6d[_0x1a1a02(0x1a8)](_0x50f2ea,_0x2b6d44);return;}_0x5b4f6d[_0x1a1a02(0x1a8)](_0x2a3553,_0x1cba8a);return;}_0x421ea4['on'](_0x5b4f6d[_0x1a1a02(0x1eb)],_0x36a439=>{const _0x12da2c=_0x1a1a02;BINARY_BUSY_ERROR_CODES[_0x12da2c(0x141)](_0x36a439['code'])?(logger[_0x12da2c(0x1d1)](_0x12da2c(0x16a)+_0x36a439[_0x12da2c(0x18e)]),_0x421ea4[_0x12da2c(0x135)](),fs[_0x12da2c(0x190)](_0x1581b5,_0x328e14=>{const _0x2e428e=_0x12da2c;_0x328e14&&logger[_0x2e428e(0x1d1)](_0x2e428e(0x1e5)+_0x1581b5);}),_0xecd525[_0x12da2c(0x1ef)](_0x50f2ea,_0x2b6d44)):_0xecd525[_0x12da2c(0x19b)](_0x2a3553,_0x36a439);}),_0x3b8ba0[_0x1a1a02(0x18d)](_0x3841f4,function(_0x34015e,_0x5d2527){const _0x24d28a=_0x1a1a02;_0x34015e&&_0xecd525['chsWK'](_0x2a3553,_0x34015e),_0x5d2527['on'](_0xecd525['opBjm'],function(){_0x421ea4['close'](),_0x3b8ba0['readEntry']();}),_0x5d2527[_0x24d28a(0x1be)](_0x421ea4);}),_0x5b4f6d[_0x1a1a02(0x176)](_0x3841f4[_0x1a1a02(0x1bb)],_0x5f21d9)&&_0x3b8ba0[_0x1a1a02(0x135)]();}}),_0x3b8ba0['on'](_0x30e001[_0x218d7b(0x130)],_0x240701=>{_0xecd525['bgUoY'](_0x2a3553,_0x240701);}),_0x3b8ba0['once'](_0x30e001['OKgla'],()=>{const _0x1526fa=_0x218d7b,_0x1739ff={'AjirY':function(_0x1c90f6,_0x4ddd1a){return _0xecd525['kzRJy'](_0x1c90f6,_0x4ddd1a);}};fs[_0x1526fa(0x190)](_0x1581b5,_0x45e458=>{const _0x23c3f7=_0x1526fa;_0x45e458&&logger[_0x23c3f7(0x1d1)](_0x23c3f7(0x1e5)+_0x1581b5);}),fs[_0x1526fa(0x1a2)](path[_0x1526fa(0x1db)](_0x168a4b,_0x5f21d9),_0xecd525[_0x1526fa(0x1f0)],function(_0x3a2323){const _0x1b587e=_0x1526fa;_0x3a2323&&_0x1739ff[_0x1b587e(0x1e6)](_0x2a3553,_0x3a2323),_0x1739ff[_0x1b587e(0x1e6)](_0x50f2ea,path['join'](_0x168a4b,_0x5f21d9));}),_0x3b8ba0[_0x1526fa(0x135)]();});});});}static[a64_0xb512f0(0x17a)](){const _0x384cbf=a64_0xb512f0;if(process['env'][_0x384cbf(0x198)])return JSON['parse'](process['env']['BROWSERSTACK_TEST_FRAMEWORK_DETAIL']);return this[_0x384cbf(0x14d)];}static['getAutomationFrameworkDetail'](){const _0x368ce9=a64_0xb512f0;if(process[_0x368ce9(0x18b)]['BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL'])return JSON[_0x368ce9(0x1d0)](process[_0x368ce9(0x18b)]['BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL']);return this[_0x368ce9(0x1d5)];}static['setFrameworkDetail'](_0x163b32,_0x1c498b){const _0x3bb5a9=a64_0xb512f0,_0x2b75cc={'UFRyc':_0x3bb5a9(0x13c),'WJYVl':function(_0x25804f,_0x419e86){return _0x25804f(_0x419e86);},'UWQUs':function(_0x41f433,_0x498b7f){return _0x41f433||_0x498b7f;}},_0x4347bb=_0x2b75cc['UFRyc']['split']('|');let _0x37a27c=0x0;while(!![]){switch(_0x4347bb[_0x37a27c++]){case'0':this[_0x3bb5a9(0x14d)]={'name':_0x163b32,'version':{[_0x163b32]:_0x2b75cc[_0x3bb5a9(0x1d6)](getFrameworkVersion,_0x163b32)}};continue;case'1':_0x2b75cc['UWQUs'](!_0x163b32,!_0x1c498b)&&logger[_0x3bb5a9(0x175)](_0x3bb5a9(0x1c7)+_0x163b32+_0x3bb5a9(0x179)+_0x1c498b);continue;case'2':process[_0x3bb5a9(0x18b)][_0x3bb5a9(0x1ee)]=JSON[_0x3bb5a9(0x172)](this[_0x3bb5a9(0x1d5)]);continue;case'3':this['automationFrameworkDetail']={'name':_0x1c498b,'version':_0x2b75cc[_0x3bb5a9(0x1d6)](getFrameworkVersion,_0x1c498b)};continue;case'4':process[_0x3bb5a9(0x18b)][_0x3bb5a9(0x198)]=JSON['stringify'](this['testFrameworkDetail']);continue;}break;}}static[a64_0xb512f0(0x159)](_0x4a11ac,_0x1d7143){return _0x4a11ac+':'+_0x1d7143;}static[a64_0xb512f0(0x1ce)](){const _0x275a78=a64_0xb512f0;return process[_0x275a78(0x1b9)]+':'+threadId;}static[a64_0xb512f0(0x197)](_0x5bd59b){const _0x2a10be=a64_0xb512f0;if(_0x5bd59b[_0x2a10be(0x1df)]&&_0x5bd59b['testContextOptions'][_0x2a10be(0x15b)])return!![];return![];}static[a64_0xb512f0(0x1a4)](_0x3d0d0c){const _0x2be704=a64_0xb512f0;if(_0x3d0d0c[_0x2be704(0x1df)]&&_0x3d0d0c['testContextOptions'][_0x2be704(0x1d8)])return!![];return![];}static['matchHookRegex'](_0x4df9b2){const _0x756e4f=a64_0xb512f0,_0x4bd4a7=new RegExp(TestFrameworkConstants[_0x756e4f(0x1d4)]);return _0x4bd4a7['test'](_0x4df9b2);}static[a64_0xb512f0(0x16f)](_0x4a2287,_0x2b52da){const _0x3afdb8=a64_0xb512f0,_0x17f8fd={};_0x17f8fd[_0x3afdb8(0x1b1)]=function(_0x1bb41d,_0x4a269f){return _0x1bb41d!==_0x4a269f;},_0x17f8fd[_0x3afdb8(0x19e)]=function(_0x1ce66a,_0x1a3d88){return _0x1ce66a===_0x1a3d88;},_0x17f8fd[_0x3afdb8(0x1cf)]=_0x3afdb8(0x1a7);const _0x4aafe8=_0x17f8fd;for(const [_0x3d1033,_0xed0a36]of Object['entries'](_0x2b52da)){if(_0x4aafe8[_0x3afdb8(0x1b1)](_0xed0a36,null)&&_0x4aafe8[_0x3afdb8(0x19e)](typeof _0xed0a36,_0x4aafe8[_0x3afdb8(0x1cf)])&&!Array[_0x3afdb8(0x168)](_0xed0a36))_0x4a2287[_0x3d1033]=this[_0x3afdb8(0x16f)](_0x4a2287[_0x3d1033]||{},_0xed0a36);else Array['isArray'](_0xed0a36)?_0x4a2287[_0x3d1033]=(_0x4a2287[_0x3d1033]||[])[_0x3afdb8(0x13a)](_0xed0a36):_0x4a2287[_0x3d1033]=_0xed0a36;}return _0x4a2287;}}module[a64_0xb512f0(0x17e)]=CLIUtils;function a64_0x1aa4(){const _0x3880ec=['downloadLatestBinary','unlink','149364pseaWF','isBinaryBusy','115TFXCKx','entry','Error\x20in\x20setting\x20up\x20cli\x20path\x20directory,\x20Exception:\x20','map','shouldSkipSessionName','BROWSERSTACK_TEST_FRAMEWORK_DETAIL','0755','readEntry','kzRJy','../utils/apiUtilityMethods.js','OKgla','UxeBf','cli_version','child_process','GcSwa','chmod','open','shouldSkipSessionStatus','arch','length','object','MfKCW','Got\x20Error\x20in\x20SDK\x20binary\x20downloading\x20request\x20','isDirectory','binary-','Jwplz','downloaded_file.zip','KoAmB','existsSync','getWritableDir','HyskV','../../helpers/classLogger.js','Binary\x20is\x20busy:\x20','20uaslBo','Error\x20checking\x20if\x20binary\x20is\x20busy:\x20','checkAndUpdateCli','SDK_CLI_BIN_PATH','olNay','pid','Need\x20to\x20update\x20binary,\x20current\x20binary\x20version:\x20','fileName','pXrmO','getExistingCliPath','pipe','yauzl','.browserstack','format','./framework/constants/testFrameworkConstants.js','util','119tuRwvx','createWriteStream','CLI\x20version\x20found\x20despite\x20error:\x20\x22','Test\x20or\x20Automation\x20framework\x20not\x20provided\x20testFramework=','setupCliPath','Resolving\x20with\x20stdout:\x20\x22','1789482lDwJQa','qlnVO','runShellCommand','../../helpers/performance/constants','getCurrentInstanceName','VVOgT','parse','warn','KHsSO','./state/automationFrameworkState.js','HOOK_REGEX','automationFrameworkDetail','WJYVl','SDK_CLI_DOWNLOAD','skipSessionStatus','gMsYg','QDXPL','join','node','jEsju','iemrt','testContextOptions','115691aSKbuL','timeout','./state/hookState.js','closeSync','path','Failed\x20to\x20delete\x20zip\x20file:\x20','AjirY','mtime','CRdFD','fFJaa','PWkqb','ULnDn','Existing\x20binary\x20is\x20currently\x20in\x20use,\x20skipping\x20update\x20and\x20continuing\x20with\x20current\x20version:\x20','cli','BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL','chsWK','xcGmj','kbLCM','end','8715807yClmaG','SLgOS','uMAXl','QobCe','Using\x20BROWSERSTACK_BINARY_URL\x20from\x20env\x20variable:\x20','url','sMnGJ','Folder\x20does\x20not\x20exist:\x20','UtxKq','hUree','reduce','downloadFileStream','DeFBn','worker_threads','close','getCLIParamsForDevEnv','data','.sock','readdirSync','concat','ZXzpE','1|0|3|2|4','Downloading\x20SDK\x20binary\x20from:\x20','Resolved\x20binary\x20path:\x20','Development\x20Cli\x20Path:\x20','\x20already\x20exists','includes','149346OZMChG','BROWSERSTACK_BINARY_URL','NtATY','zPeMG','OVgWg','jVGGm','Setting\x20required\x20permissions\x20to\x20','../../helpers/performance/performance-tester.js','getCliDir','startsWith','isFile','testFrameworkDetail','flZLc','Unable\x20to\x20set\x20required\x20permissions\x20to\x20','test','BROWSERSTACK_CLI_ENV','start','SDK_CLI_CHECK_UPDATE','kBZew','getSdkVersion','BROWSERSTACK_FILES_DIR','3114288onTSab','xDXSb','getHookRegistryKey','error','skipSessionName','listen','homedir','unix:/tmp/sdk-platform-','response\x20','info','1390934srTOkN','ubniF','isDevelopmentEnv','Got\x20Error\x20in\x20SDK\x20binary\x20download\x20response\x20%s','SMbcH','cumkO','FJtbO','isArray','statSync','Binary\x20file\x20became\x20busy\x20during\x20write,\x20continuing\x20with\x20existing\x20binary:\x20','lazyEntries','requestToUpdateCLI','JDhrD','version','mergeObject','Error\x20in\x20getting\x20writable\x20directory,\x20writableDir=','Error\x20while\x20reading\x20CLI\x20path:\x20','stringify','EXmba','platform','debug','HRmxl','kdrYU','XvZIb',',\x20automationFramework=','getTestFrameworkDetail','basename','QlunS','../../helpers/test-observability/utils.js','exports','../../../package.json','trim','openSync','./state/testFrameworkState.js','GET','cwd','Current\x20CLI\x20Path\x20Found:\x20','tOQcE','tzDzO','../../helpers/helper','Dkhba','No\x20writable\x20directory\x20available\x20for\x20the\x20CLI','env','tmpdir','openReadStream','message'];a64_0x1aa4=function(){return _0x3880ec;};return a64_0x1aa4();}