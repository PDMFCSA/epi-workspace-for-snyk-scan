const a64_0x5b0b73=a64_0x33b1;function a64_0x504f(){const _0x5025ac=['MRblL','cJyLB','JYVSL','aGZFi','SPsPB','GdRlT','runShellCommand','downloaded_file.zip','Error\x20checking\x20if\x20binary\x20is\x20busy:\x20','Failed\x20to\x20download\x20SDK\x20binary,\x20Exception:\x20','Using\x20BROWSERSTACK_BINARY_URL\x20from\x20env\x20variable:\x20','startsWith','XLbla','../../helpers/helper','Mbytj','Binary\x20is\x20busy:\x20','isFile','ShmWn','entries','stringify','node','qDUnx','../../helpers/performance/performance-tester.js','downloadLatestBinary','getSdkVersion','BROWSERSTACK_FILES_DIR','lazyEntries','TSANZ','code','requestToUpdateCLI','UGCPd','object','../../helpers/utilities','CLIUtils','unix:/tmp/sdk-platform-','znPch','No\x20writable\x20directory\x20available\x20for\x20the\x20CLI','length','esGnp','isDirectory','SDK_CLI_BIN_PATH','basename','oXFZj','exports','wkdJb','binary-','./instances/testFrameworkInstance.js','1320116lXboSd','../../helpers/test-observability/utils.js','test','ZHDSh','checkAndUpdateCli','YzMIo','existsSync','chmod','join','aOPph','readEntry','gjBju','Bclhd','getTestFrameworkDetail','shsTe','open','14356XkbnZm','entry','split','version','jgBjT','unlink','vKwEE','concat','BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL','follow-redirects','../../helpers/performance/constants','url','BROWSERSTACK_BINARY_URL','6170wTGzTj','debug','sxuGR','../utils/constants','.sock','cwd','format','data','QzDHj','cli_version','6989463jijhKu','message','testContextOptions','Development\x20Cli\x20Path:\x20','automationFrameworkDetail','7362zveMWY','cli','BROWSERSTACK_TEST_FRAMEWORK_DETAIL','zWlMV','Unable\x20to\x20set\x20required\x20permissions\x20to\x20','Got\x20Error\x20in\x20SDK\x20binary\x20downloading\x20request\x20','sGUXS','skipSessionStatus','parse','RqRud','SDK_CLI_DOWNLOAD','testFrameworkDetail','shouldSkipSessionStatus','includes','skipSessionName','gaYMW','readdirSync','child_process','dmNmU','fileName','3843778BUsbJB','RhXbg','MjzQt','CLI\x20version\x20found\x20despite\x20error:\x20\x22','UVFqj','filter','fpckw','warn','getSdkLanguage','aUZNO','reduce','1557IVWtgv','close','Error\x20in\x20setting\x20up\x20cli\x20path\x20directory,\x20Exception:\x20','Configuring\x20Cli\x20path.','isBinaryBusy','getCurrentInstanceName','../../../package.json','filePath','jJVhM','13893ORqUCZ','3650UGsPBX','kuWya','0755','Got\x20Error\x20in\x20SDK\x20binary\x20download\x20response\x20%s','listen','tjvSs','SHELL_EXECUTE_ERROR','development','BVSYz','matchHookRegex','platform','info','IoeLw','./state/hookState.js','XvonN','zlruY','start','Error\x20while\x20reading\x20CLI\x20path:\x20','openSync','mtime','HOOK_REGEX','Resolved\x20binary\x20path:\x20','map','shouldSkipSessionName','pipe','Resolving\x20with\x20stdout:\x20\x22','wfrFx','BROWSERSTACK_CLI_ENV','end','error','../../helpers/classLogger.js','Setting\x20required\x20permissions\x20to\x20','LmGfn','path','getWritableDir','\x20version','./state/testFrameworkState.js','NJaPB','Failed\x20to\x20delete\x20zip\x20file:\x20','Mdpsi','8wlghnl','Existing\x20binary\x20is\x20currently\x20in\x20use,\x20skipping\x20update\x20and\x20continuing\x20with\x20current\x20version:\x20','Downloading\x20SDK\x20binary\x20from:\x20','YccyG','mergeObject','BUkJg','yauzl','ASeza','Unable\x20to\x20get\x20writable\x20directory,\x20exception\x20','CxIUy','get','setFrameworkDetail','env','IbHCp','getCLIParamsForDevEnv','trim','worker_threads','WHQFg','dDXtB','qJYCB','2810290SdxnyN','jpwHH','rTJwj','rCLae','../utils/apiUtilityMethods.js','getCliDir','isArray','jFSIV','createWriteStream','./framework/constants/testFrameworkConstants.js','getAutomationFrameworkDetail','mQihK','.browserstack','Need\x20to\x20update\x20binary,\x20current\x20binary\x20version:\x20','SDK_CLI_CHECK_UPDATE','eDZku'];a64_0x504f=function(){return _0x5025ac;};return a64_0x504f();}(function(_0x1bcda0,_0xa60e6d){const _0x45f394=a64_0x33b1,_0x362bc5=_0x1bcda0();while(!![]){try{const _0x1da3b9=-parseInt(_0x45f394(0x256))/0x1+parseInt(_0x45f394(0x1c6))/0x2+parseInt(_0x45f394(0x1d1))/0x3*(-parseInt(_0x45f394(0x196))/0x4)+parseInt(_0x45f394(0x1a3))/0x5*(parseInt(_0x45f394(0x1b2))/0x6)+parseInt(_0x45f394(0x217))/0x7+parseInt(_0x45f394(0x203))/0x8*(parseInt(_0x45f394(0x1ad))/0x9)+parseInt(_0x45f394(0x1db))/0xa*(-parseInt(_0x45f394(0x1da))/0xb);if(_0x1da3b9===_0xa60e6d)break;else _0x362bc5['push'](_0x362bc5['shift']());}catch(_0x3bfdc4){_0x362bc5['push'](_0x362bc5['shift']());}}}(a64_0x504f,0xece2a));const fs=require('fs'),os=require('os'),url=require(a64_0x5b0b73(0x1a1)),path=require(a64_0x5b0b73(0x1fc)),{exec}=require(a64_0x5b0b73(0x1c3)),{https}=require(a64_0x5b0b73(0x19f)),yauzl=require(a64_0x5b0b73(0x209)),util=require('util'),{getFrameworkVersion}=require(a64_0x5b0b73(0x257)),{threadId}=require(a64_0x5b0b73(0x213)),PerformanceTester=require(a64_0x5b0b73(0x23d)),{EVENTS:PerformanceEvents}=require(a64_0x5b0b73(0x1a0)),{isNullOrEmpty,isModifiable,setReadWriteExecuteAccess}=require(a64_0x5b0b73(0x247)),{isTrue,createDir,getHostInfo,nodeRequest,nestedKeyValue}=require(a64_0x5b0b73(0x234)),{UPDATED_CLI_ENDPOINT,BINARY_BUSY_ERROR_CODES}=require(a64_0x5b0b73(0x1a6)),{createClassLogger}=require(a64_0x5b0b73(0x1f9)),TestFrameworkInstance=require(a64_0x5b0b73(0x255)),HookState=require(a64_0x5b0b73(0x1e8)),TestFrameworkState=require(a64_0x5b0b73(0x1ff)),AutomationFrameworkState=require('./state/automationFrameworkState.js'),TestFrameworkConstants=require(a64_0x5b0b73(0x220)),logger=createClassLogger(a64_0x5b0b73(0x248)),{getBStackAPIUrl}=require(a64_0x5b0b73(0x21b));function a64_0x33b1(_0x40ed28,_0x260e51){const _0x504f39=a64_0x504f();return a64_0x33b1=function(_0x33b160,_0x1009f4){_0x33b160=_0x33b160-0x18c;let _0x487e65=_0x504f39[_0x33b160];return _0x487e65;},a64_0x33b1(_0x40ed28,_0x260e51);}class CLIUtils{[a64_0x5b0b73(0x1b1)]={};[a64_0x5b0b73(0x1bd)]={};static['isDevelopmentEnv'](){const _0x11e333=a64_0x5b0b73,_0x2a3ce4={};_0x2a3ce4[_0x11e333(0x242)]=function(_0x4c6993,_0x4100e4){return _0x4c6993===_0x4100e4;},_0x2a3ce4[_0x11e333(0x22a)]=_0x11e333(0x1e2);const _0x2df58d=_0x2a3ce4;return _0x2df58d['TSANZ'](process['env'][_0x11e333(0x1f6)],_0x2df58d[_0x11e333(0x22a)]);}static[a64_0x5b0b73(0x211)](){const _0x51a774=a64_0x5b0b73,_0x4a3079={};return _0x4a3079['id']=process[_0x51a774(0x20f)]['BROWSERSTACK_CLI_ENV'],_0x4a3079[_0x51a774(0x1df)]=_0x51a774(0x249)+process[_0x51a774(0x20f)]['BROWSERSTACK_CLI_ENV']+_0x51a774(0x1a7),_0x4a3079;}static[a64_0x5b0b73(0x23f)](){const _0x22569a=a64_0x5b0b73,_0x2866a2={'jgBjT':function(_0x27d00b,_0x383514){return _0x27d00b(_0x383514);},'aUZNO':_0x22569a(0x1d7)};return _0x2866a2[_0x22569a(0x19a)](require,_0x2866a2[_0x22569a(0x1cf)])['version'];}static[a64_0x5b0b73(0x1ce)](){const _0x23ba97=a64_0x5b0b73,_0x1acaaa={};_0x1acaaa[_0x23ba97(0x233)]=_0x23ba97(0x23b);const _0x41941a=_0x1acaaa;return _0x41941a[_0x23ba97(0x233)];}static async['setupCliPath'](_0x169daf){const _0x42aac2=a64_0x5b0b73,_0x722cfe={'IoeLw':_0x42aac2(0x1d4),'GdRlT':function(_0x3c5970,_0x21a1ce){return _0x3c5970(_0x21a1ce);},'RhXbg':'No\x20writable\x20directory\x20available\x20for\x20the\x20CLI'};logger['debug'](_0x722cfe[_0x42aac2(0x1e7)]);const _0x1d9a3b=process['env'][_0x42aac2(0x24f)];if(!_0x722cfe[_0x42aac2(0x22c)](isNullOrEmpty,_0x1d9a3b))return logger['debug'](_0x42aac2(0x1b0)+_0x1d9a3b),_0x1d9a3b;try{const _0x5f1d1b=this[_0x42aac2(0x21c)]();if(_0x722cfe[_0x42aac2(0x22c)](isNullOrEmpty,_0x5f1d1b))throw new Error(_0x722cfe[_0x42aac2(0x1c7)]);const _0x56857f=this['getExistingCliPath'](_0x5f1d1b),_0xfa4985=await this[_0x42aac2(0x25a)](_0x56857f,_0x5f1d1b,_0x169daf);return logger[_0x42aac2(0x1a4)](_0x42aac2(0x1f0)+_0xfa4985),_0xfa4985;}catch(_0x2ea485){logger[_0x42aac2(0x1a4)](_0x42aac2(0x1d3)+util[_0x42aac2(0x1a9)](_0x2ea485));}return null;}static async['checkAndUpdateCli'](_0x4ecfd1,_0x3c49db,_0x14b523){const _0x416a82=a64_0x5b0b73,_0x2aa001={'WHQFg':function(_0x48c2da){return _0x48c2da();},'FykFC':function(_0x28cb10,_0x5e4b57){return _0x28cb10(_0x5e4b57);},'AArTV':function(_0x3c9001,_0x55a8a6,_0x4ba339){return _0x3c9001(_0x55a8a6,_0x4ba339);},'QBwSS':_0x416a82(0x1aa),'vKwEE':'url','zKPxI':function(_0x2513c3,_0x984179){return _0x2513c3(_0x984179);},'jFSIV':function(_0x29080c,_0xf4f5d3,_0x2977aa){return _0x29080c(_0xf4f5d3,_0x2977aa);}};PerformanceTester['start'](PerformanceEvents['SDK_CLI_CHECK_UPDATE']),logger['info']('Current\x20CLI\x20Path\x20Found:\x20'+_0x4ecfd1);const _0x5d43e7=_0x2aa001[_0x416a82(0x214)](getHostInfo),_0x3cacb1={'sdk_version':CLIUtils[_0x416a82(0x23f)](),'os':_0x5d43e7[_0x416a82(0x1e5)],'os_arch':_0x5d43e7['arch'],'cli_version':'0','sdk_language':this[_0x416a82(0x1ce)]()};!_0x2aa001['FykFC'](isNullOrEmpty,_0x4ecfd1)&&(_0x3cacb1[_0x416a82(0x1ac)]=await this[_0x416a82(0x22d)](_0x4ecfd1+_0x416a82(0x1fe)));const _0x4ec554=await this[_0x416a82(0x244)](_0x3cacb1,_0x14b523);process['env'][_0x416a82(0x1a2)]&&(logger[_0x416a82(0x1e6)](_0x416a82(0x231)+process[_0x416a82(0x20f)][_0x416a82(0x1a2)]),_0x4ec554['data'][_0x416a82(0x1a1)]=process[_0x416a82(0x20f)]['BROWSERSTACK_BINARY_URL']);if(_0x2aa001['AArTV'](nestedKeyValue,_0x4ec554,[_0x2aa001['QBwSS'],_0x2aa001[_0x416a82(0x19c)]])){logger[_0x416a82(0x1a4)](_0x416a82(0x224)+_0x3cacb1[_0x416a82(0x1ac)]);if(!_0x2aa001['zKPxI'](isNullOrEmpty,_0x4ecfd1)&&this[_0x416a82(0x1d5)](_0x4ecfd1))return logger[_0x416a82(0x1cd)](_0x416a82(0x204)+_0x4ecfd1),PerformanceTester[_0x416a82(0x1f7)](PerformanceEvents[_0x416a82(0x225)]),_0x4ecfd1;const _0x2e2028=await this[_0x416a82(0x23e)](_0x2aa001[_0x416a82(0x21e)](nestedKeyValue,_0x4ec554,[_0x2aa001['QBwSS'],_0x2aa001[_0x416a82(0x19c)]]),_0x3c49db);return PerformanceTester[_0x416a82(0x1f7)](PerformanceEvents[_0x416a82(0x225)]),_0x2e2028;}return PerformanceTester['end'](PerformanceEvents[_0x416a82(0x225)]),_0x4ecfd1;}static[a64_0x5b0b73(0x21c)](){const _0x1b3af7=a64_0x5b0b73,_0x4a4bcb={'gjBju':function(_0x588c37,_0x147b1d){return _0x588c37(_0x147b1d);},'znPch':_0x1b3af7(0x24b),'EjsBK':_0x1b3af7(0x1b3)},_0x1889e5=this[_0x1b3af7(0x1fd)]();try{if(_0x4a4bcb[_0x1b3af7(0x191)](isNullOrEmpty,_0x1889e5))throw new Error(_0x4a4bcb[_0x1b3af7(0x24a)]);const _0x4d3236=path[_0x1b3af7(0x18e)](_0x1889e5,_0x4a4bcb['EjsBK']);return!fs['existsSync'](_0x4d3236)&&_0x4a4bcb[_0x1b3af7(0x191)](createDir,_0x4d3236),_0x4d3236;}catch(_0x3addcb){logger[_0x1b3af7(0x1a4)]('Error\x20in\x20getting\x20writable\x20directory,\x20writableDir='+util[_0x1b3af7(0x1a9)](_0x3addcb));}}static['getWritableDir'](){const _0x5bde1e=a64_0x5b0b73,_0x362f6c={'sxuGR':_0x5bde1e(0x223),'kuWya':function(_0x33d22a,_0x488d6f){return _0x33d22a(_0x488d6f);},'XvonN':function(_0x313ac0,_0x280493){return _0x313ac0(_0x280493);},'fSuFY':function(_0x52e9c7,_0x59e665){return _0x52e9c7(_0x59e665);},'VLxoG':function(_0x368566,_0x547df6){return _0x368566(_0x547df6);},'cJyLB':function(_0x2abbc1,_0x1be2e7){return _0x2abbc1(_0x1be2e7);}},_0x45c484=[process['env'][_0x5bde1e(0x240)],path[_0x5bde1e(0x18e)](os['homedir'](),_0x362f6c[_0x5bde1e(0x1a5)]),path[_0x5bde1e(0x18e)](os['tmpdir'](),_0x362f6c[_0x5bde1e(0x1a5)])];for(const _0x208227 of _0x45c484){if(_0x362f6c[_0x5bde1e(0x1dc)](isNullOrEmpty,_0x208227))continue;try{if(fs[_0x5bde1e(0x18c)](_0x208227)){logger['debug']('Folder\x20'+_0x208227+'\x20already\x20exists');if(!_0x362f6c[_0x5bde1e(0x1e9)](isModifiable,_0x208227)){logger[_0x5bde1e(0x1a4)](_0x5bde1e(0x1fa)+_0x208227);const _0x22e8f8=_0x362f6c[_0x5bde1e(0x1dc)](setReadWriteExecuteAccess,_0x208227);if(!_0x362f6c['fSuFY'](isTrue,_0x22e8f8)){logger[_0x5bde1e(0x1cd)]('Unable\x20to\x20set\x20required\x20permissions\x20to\x20'+_0x208227);continue;}}}else{logger[_0x5bde1e(0x1a4)]('Folder\x20does\x20not\x20exist:\x20'+_0x208227),_0x362f6c['VLxoG'](createDir,_0x208227),logger[_0x5bde1e(0x1a4)](_0x5bde1e(0x1fa)+_0x208227);const _0x5b8ded=_0x362f6c[_0x5bde1e(0x228)](setReadWriteExecuteAccess,_0x208227);!_0x362f6c[_0x5bde1e(0x228)](isTrue,_0x5b8ded)&&logger['warn'](_0x5bde1e(0x1b6)+_0x208227);}return _0x208227;}catch(_0x2748a0){logger[_0x5bde1e(0x1f8)](_0x5bde1e(0x20b)+util[_0x5bde1e(0x1a9)](_0x2748a0));}}return null;}static['getExistingCliPath'](_0x2f29ee){const _0x3853a4=a64_0x5b0b73,_0x1524e5={};_0x1524e5[_0x3853a4(0x1c4)]=function(_0x368b09,_0x497736){return _0x368b09>_0x497736;},_0x1524e5['mogcl']=function(_0x2424cf,_0x542f28){return _0x2424cf>_0x542f28;};const _0x44f61e=_0x1524e5;try{if(!fs[_0x3853a4(0x18c)](_0x2f29ee)||!fs['statSync'](_0x2f29ee)[_0x3853a4(0x24e)]())return'';const _0x9d6449=fs[_0x3853a4(0x1c2)](_0x2f29ee)[_0x3853a4(0x1f1)](_0x5b48e6=>path[_0x3853a4(0x18e)](_0x2f29ee,_0x5b48e6))[_0x3853a4(0x1cb)](_0xec51aa=>fs['statSync'](_0xec51aa)[_0x3853a4(0x237)]()&&path[_0x3853a4(0x250)](_0xec51aa)[_0x3853a4(0x232)](_0x3853a4(0x254)));if(_0x44f61e['mogcl'](_0x9d6449[_0x3853a4(0x24c)],0x0)){const _0x31fbc3=_0x9d6449['map'](_0x18e79e=>({'filePath':_0x18e79e,'mtime':fs['statSync'](_0x18e79e)[_0x3853a4(0x1ee)]}))[_0x3853a4(0x1d0)]((_0x45a57a,_0x3b9749)=>{const _0x221ff6=_0x3853a4;if(!_0x45a57a||!_0x45a57a[_0x221ff6(0x1ee)])return _0x3b9749;if(_0x44f61e[_0x221ff6(0x1c4)](_0x3b9749[_0x221ff6(0x1ee)],_0x45a57a[_0x221ff6(0x1ee)]))return _0x3b9749;return _0x45a57a;},{});return _0x31fbc3?_0x31fbc3[_0x3853a4(0x1d8)]:'';}return'';}catch(_0x5f3468){return logger[_0x3853a4(0x1f8)](_0x3853a4(0x1ec)+util[_0x3853a4(0x1a9)](_0x5f3468)),'';}}static ['requestToUpdateCLI']=async(_0x473fa8,_0x278def)=>{const _0x149735=a64_0x5b0b73,_0xaffcac={'WRHpt':function(_0x4c97c3,_0x81e37f,_0x4aea00,_0xf2a875,_0x5d746c){return _0x4c97c3(_0x81e37f,_0x4aea00,_0xf2a875,_0x5d746c);},'QzDHj':'GET'},_0x55ab47={};_0x55ab47['qs']=_0x473fa8;const _0xfc5771=await _0xaffcac['WRHpt'](nodeRequest,_0xaffcac[_0x149735(0x1ab)],UPDATED_CLI_ENDPOINT,_0x55ab47,_0x278def);return logger[_0x149735(0x1a4)]('response\x20'+JSON['stringify'](_0xfc5771)),_0xfc5771;};static[a64_0x5b0b73(0x1d5)](_0x347455){const _0x2d9106=a64_0x5b0b73;try{const _0x5ecfe0=fs[_0x2d9106(0x1ed)](_0x347455,'r+');return fs['closeSync'](_0x5ecfe0),![];}catch(_0x2aba5f){if(BINARY_BUSY_ERROR_CODES['includes'](_0x2aba5f[_0x2d9106(0x243)]))return logger[_0x2d9106(0x1a4)](_0x2d9106(0x236)+_0x347455),!![];return logger['debug'](_0x2d9106(0x22f)+_0x2aba5f[_0x2d9106(0x1ae)]),![];}}static[a64_0x5b0b73(0x22d)](_0x53a28f,_0x47f7e2=''){const _0x2f2d75=a64_0x5b0b73,_0x3346ef={'gaYMW':_0x2f2d75(0x199),'CxIUy':function(_0x313e7,_0x48f27){return _0x313e7(_0x48f27);},'zlruY':_0x2f2d75(0x1e1),'jAyGD':function(_0x380884,_0x55e237){return _0x380884(_0x55e237);},'jmVST':function(_0xf2d25,_0x5dd488){return _0xf2d25(_0x5dd488);},'eDZku':function(_0x24204c,_0x24b8c0,_0xacce5f,_0x58a49f){return _0x24204c(_0x24b8c0,_0xacce5f,_0x58a49f);},'UVFqj':_0x2f2d75(0x1f8)};return new Promise((_0x3357d7,_0x1fadff)=>{const _0x1c9b25=_0x2f2d75,_0x525249={'GmODn':function(_0x1b0746,_0x3c694b){return _0x3346ef['jmVST'](_0x1b0746,_0x3c694b);},'wdQyJ':_0x3346ef['zlruY']},_0x16496c={};_0x16496c[_0x1c9b25(0x1a8)]=_0x47f7e2,_0x16496c['timeout']=0x1388;const _0x182d2a=_0x3346ef[_0x1c9b25(0x226)](exec,_0x53a28f,_0x16496c,(_0x5d05de,_0x334175,_0x3e10d2)=>{const _0x433cb0=_0x1c9b25;if(_0x5d05de){if(_0x53a28f[_0x433cb0(0x1bf)](_0x3346ef[_0x433cb0(0x1c1)])&&(_0x334175['trim']()||_0x3e10d2[_0x433cb0(0x212)]())){const _0x22ddf5=_0x334175[_0x433cb0(0x212)]()||_0x3e10d2['trim']();logger['debug'](_0x433cb0(0x1c9)+_0x22ddf5+'\x22'),_0x3346ef[_0x433cb0(0x20c)](_0x3357d7,_0x22ddf5);}else _0x3346ef[_0x433cb0(0x20c)](_0x3357d7,_0x3e10d2[_0x433cb0(0x212)]()||_0x3346ef[_0x433cb0(0x1ea)]);}else logger['debug'](_0x433cb0(0x1f4)+_0x334175[_0x433cb0(0x212)]()+'\x22'),_0x3346ef['jAyGD'](_0x3357d7,_0x334175[_0x433cb0(0x212)]());});_0x182d2a['on'](_0x3346ef[_0x1c9b25(0x1ca)],()=>{_0x525249['GmODn'](_0x3357d7,_0x525249['wdQyJ']);});});}static [a64_0x5b0b73(0x23e)]=async(_0x526366,_0x2e682f)=>{const _0x56e6e8=a64_0x5b0b73,_0x1df06f={'XHlMg':'Got\x20Error\x20while\x20downloading\x20SDK\x20binary\x20file\x20%s','IbHCp':function(_0x4f888b,_0x544f50){return _0x4f888b(_0x544f50);},'jpwHH':_0x56e6e8(0x1f8),'ASeza':_0x56e6e8(0x1de),'zWlMV':_0x56e6e8(0x22e)};PerformanceTester[_0x56e6e8(0x1eb)](PerformanceEvents['SDK_CLI_DOWNLOAD']),logger[_0x56e6e8(0x1a4)](_0x56e6e8(0x205)+_0x526366);try{const _0x366bbe=url[_0x56e6e8(0x1ba)](_0x526366),_0xf9d39d=path['join'](_0x2e682f,_0x1df06f[_0x56e6e8(0x1b5)]),_0x1cf2a6=fs[_0x56e6e8(0x21f)](_0xf9d39d);return new Promise((_0x425353,_0x14a9c4)=>{const _0x2a050d=_0x56e6e8,_0x5d9270={'sGUXS':_0x1df06f[_0x2a050d(0x20a)],'dDXtB':function(_0xdc6c7d,_0x3a2616){const _0x2170f5=_0x2a050d;return _0x1df06f[_0x2170f5(0x210)](_0xdc6c7d,_0x3a2616);}};https[_0x2a050d(0x20d)](_0x366bbe,function(_0x5875b3){const _0x58ad92=_0x2a050d,_0x54d697={'ZHDSh':_0x1df06f['XHlMg'],'jJVhM':function(_0x4f68ae,_0xefa588){return _0x1df06f['IbHCp'](_0x4f68ae,_0xefa588);}},_0x35e014=null;_0x5875b3['pipe'](_0x1cf2a6),_0x5875b3['on'](_0x1df06f[_0x58ad92(0x218)],function(_0x461fdd){const _0x91ab98=_0x58ad92;logger[_0x91ab98(0x1f8)](util['format'](_0x5d9270[_0x91ab98(0x1b8)],_0x461fdd)),PerformanceTester['end'](PerformanceEvents[_0x91ab98(0x1bc)],![],util[_0x91ab98(0x1a9)](_0x461fdd)),_0x5d9270[_0x91ab98(0x215)](_0x14a9c4,_0x461fdd);}),_0x1cf2a6['on'](_0x1df06f[_0x58ad92(0x218)],function(_0x3499dd){const _0x210961=_0x58ad92;logger['error'](util[_0x210961(0x1a9)](_0x54d697[_0x210961(0x259)],_0x3499dd)),PerformanceTester[_0x210961(0x1f7)](PerformanceEvents[_0x210961(0x1bc)],![],util[_0x210961(0x1a9)](_0x3499dd)),_0x54d697[_0x210961(0x1d9)](_0x14a9c4,_0x3499dd);}),CLIUtils['downloadFileStream'](_0x1cf2a6,_0x35e014,_0xf9d39d,_0x2e682f,_0x425353,_0x14a9c4),PerformanceTester[_0x58ad92(0x1f7)](PerformanceEvents[_0x58ad92(0x1bc)]);})['on'](_0x1df06f[_0x2a050d(0x218)],function(_0x2ca82b){const _0x4657be=_0x2a050d;logger[_0x4657be(0x1f8)](_0x4657be(0x1b7)+util[_0x4657be(0x1a9)](_0x2ca82b)),PerformanceTester[_0x4657be(0x1f7)](PerformanceEvents['SDK_CLI_DOWNLOAD'],![],util['format'](_0x2ca82b)),_0x1df06f[_0x4657be(0x210)](_0x14a9c4,_0x2ca82b);});});}catch(_0x5b3a73){PerformanceTester[_0x56e6e8(0x1f7)](PerformanceEvents[_0x56e6e8(0x1bc)],![],util[_0x56e6e8(0x1a9)](_0x5b3a73)),logger[_0x56e6e8(0x1a4)](_0x56e6e8(0x230)+util[_0x56e6e8(0x1a9)](_0x5b3a73));}};static['downloadFileStream'](_0x318f9c,_0x49a3fa,_0x9b3e95,_0x265a1b,_0x252ef9,_0x28c82b){const _0x1f4742=a64_0x5b0b73,_0x339c10={'RqRud':function(_0x5606d6,_0xbfe595){return _0x5606d6(_0xbfe595);},'mQihK':_0x1f4742(0x1f7),'dvrDP':function(_0x4d81c5,_0x44efbb){return _0x4d81c5(_0x44efbb);},'BtWTi':'error','BVSYz':function(_0x2e281d,_0x45a49e){return _0x2e281d===_0x45a49e;},'SkMDd':_0x1f4742(0x1dd),'tjvSs':function(_0x44f696,_0x5cb395){return _0x44f696(_0x5cb395);},'qJYCB':_0x1f4742(0x197),'IIdjO':_0x1f4742(0x1d2)};_0x318f9c['on'](_0x339c10['IIdjO'],function(){const _0x250096=_0x1f4742,_0x1474a1={'oXFZj':function(_0x571efb,_0x3e4607){const _0x11a259=a64_0x33b1;return _0x339c10[_0x11a259(0x1bb)](_0x571efb,_0x3e4607);},'UGCPd':_0x339c10[_0x250096(0x222)],'JYVSL':function(_0x5c9d32,_0x5a0d7a){return _0x339c10['dvrDP'](_0x5c9d32,_0x5a0d7a);},'MjzQt':_0x339c10['BtWTi'],'YDjip':function(_0x35e2ce,_0x439e3f){const _0x80122a=_0x250096;return _0x339c10[_0x80122a(0x1e3)](_0x35e2ce,_0x439e3f);},'YzMIo':function(_0x5ccb39,_0x16ee50){return _0x339c10['RqRud'](_0x5ccb39,_0x16ee50);},'rCLae':_0x339c10['SkMDd'],'Bclhd':function(_0x47f19b,_0x2c1202){const _0x51e8b4=_0x250096;return _0x339c10[_0x51e8b4(0x1e0)](_0x47f19b,_0x2c1202);},'Mbytj':_0x339c10[_0x250096(0x216)]},_0x475f64={};_0x475f64[_0x250096(0x241)]=!![],yauzl[_0x250096(0x195)](_0x9b3e95,_0x475f64,function(_0x379071,_0x24aa1d){const _0x363a35=_0x250096,_0x2dd853={'YccyG':function(_0x377670,_0x42f1c6){const _0x568eb2=a64_0x33b1;return _0x1474a1[_0x568eb2(0x251)](_0x377670,_0x42f1c6);},'wkdJb':_0x1474a1[_0x363a35(0x245)],'rTJwj':function(_0x492c01,_0x9928f6){const _0x3d1823=_0x363a35;return _0x1474a1[_0x3d1823(0x229)](_0x492c01,_0x9928f6);},'aOPph':_0x1474a1[_0x363a35(0x1c8)],'SPsPB':function(_0x57d851,_0x4fd5ae){return _0x1474a1['YDjip'](_0x57d851,_0x4fd5ae);},'MRblL':function(_0x4f1a91,_0x1262a2){const _0x40ebe5=_0x363a35;return _0x1474a1[_0x40ebe5(0x25b)](_0x4f1a91,_0x1262a2);},'LmGfn':_0x1474a1[_0x363a35(0x21a)]};_0x379071&&_0x1474a1[_0x363a35(0x192)](_0x28c82b,_0x379071),_0x24aa1d['readEntry'](),_0x24aa1d['on'](_0x1474a1[_0x363a35(0x235)],_0x1668e8=>{const _0x577581=_0x363a35,_0x5121a3={'NJaPB':function(_0x29299a,_0x27a916){const _0x2f71df=a64_0x33b1;return _0x2dd853[_0x2f71df(0x206)](_0x29299a,_0x27a916);},'shsTe':_0x2dd853[_0x577581(0x253)]};!_0x49a3fa&&(_0x49a3fa=_0x1668e8['fileName']);if(/\/$/[_0x577581(0x258)](_0x1668e8[_0x577581(0x1c5)]))_0x24aa1d[_0x577581(0x190)]();else{const _0x184fe5=_0x1668e8['fileName'],_0x1aa430=path[_0x577581(0x18e)](_0x265a1b,_0x184fe5);let _0x105b98;try{_0x105b98=fs[_0x577581(0x21f)](_0x1aa430);}catch(_0x266cc9){if(BINARY_BUSY_ERROR_CODES[_0x577581(0x1bf)](_0x266cc9[_0x577581(0x243)])){logger[_0x577581(0x1cd)]('Binary\x20file\x20is\x20currently\x20in\x20use,\x20skipping\x20download\x20and\x20continuing\x20with\x20existing\x20binary:\x20'+_0x184fe5),fs[_0x577581(0x19b)](_0x9b3e95,_0x4a031c=>{const _0x225687=_0x577581;_0x4a031c&&logger['warn'](_0x225687(0x201)+_0x9b3e95);}),_0x2dd853[_0x577581(0x206)](_0x252ef9,_0x1aa430);return;}_0x2dd853[_0x577581(0x219)](_0x28c82b,_0x266cc9);return;}_0x105b98['on'](_0x2dd853[_0x577581(0x18f)],_0x4e32e4=>{const _0x535ba0=_0x577581;BINARY_BUSY_ERROR_CODES['includes'](_0x4e32e4[_0x535ba0(0x243)])?(logger['warn']('Binary\x20file\x20became\x20busy\x20during\x20write,\x20continuing\x20with\x20existing\x20binary:\x20'+_0x4e32e4[_0x535ba0(0x1ae)]),_0x105b98['close'](),fs[_0x535ba0(0x19b)](_0x9b3e95,_0x3bd0a8=>{const _0x3e8231=_0x535ba0;_0x3bd0a8&&logger[_0x3e8231(0x1cd)](_0x3e8231(0x201)+_0x9b3e95);}),_0x2dd853[_0x535ba0(0x206)](_0x252ef9,_0x1aa430)):_0x2dd853['YccyG'](_0x28c82b,_0x4e32e4);}),_0x24aa1d['openReadStream'](_0x1668e8,function(_0x359162,_0x21e074){const _0x19fb26=_0x577581;_0x359162&&_0x5121a3[_0x19fb26(0x200)](_0x28c82b,_0x359162),_0x21e074['on'](_0x5121a3[_0x19fb26(0x194)],function(){const _0x25ef24=_0x19fb26;_0x105b98[_0x25ef24(0x1d2)](),_0x24aa1d[_0x25ef24(0x190)]();}),_0x21e074[_0x19fb26(0x1f3)](_0x105b98);}),_0x2dd853[_0x577581(0x22b)](_0x1668e8[_0x577581(0x1c5)],_0x49a3fa)&&_0x24aa1d[_0x577581(0x1d2)]();}}),_0x24aa1d['on'](_0x1474a1[_0x363a35(0x1c8)],_0x177477=>{_0x2dd853['MRblL'](_0x28c82b,_0x177477);}),_0x24aa1d['once'](_0x1474a1[_0x363a35(0x245)],()=>{const _0x26762b=_0x363a35,_0x1610d3={'esGnp':function(_0x302144,_0x1c198a){const _0x232319=a64_0x33b1;return _0x2dd853[_0x232319(0x227)](_0x302144,_0x1c198a);}};fs['unlink'](_0x9b3e95,_0x6fa4de=>{const _0x51bcd7=a64_0x33b1;_0x6fa4de&&logger[_0x51bcd7(0x1cd)](_0x51bcd7(0x201)+_0x9b3e95);}),fs[_0x26762b(0x18d)](path[_0x26762b(0x18e)](_0x265a1b,_0x49a3fa),_0x2dd853[_0x26762b(0x1fb)],function(_0x5efdff){const _0xbeb0b8=_0x26762b;_0x5efdff&&_0x1610d3[_0xbeb0b8(0x24d)](_0x28c82b,_0x5efdff),_0x1610d3[_0xbeb0b8(0x24d)](_0x252ef9,path[_0xbeb0b8(0x18e)](_0x265a1b,_0x49a3fa));}),_0x24aa1d[_0x26762b(0x1d2)]();});});});}static[a64_0x5b0b73(0x193)](){const _0x13423a=a64_0x5b0b73;if(process[_0x13423a(0x20f)]['BROWSERSTACK_TEST_FRAMEWORK_DETAIL'])return JSON[_0x13423a(0x1ba)](process['env']['BROWSERSTACK_TEST_FRAMEWORK_DETAIL']);return this[_0x13423a(0x1bd)];}static[a64_0x5b0b73(0x221)](){const _0xd475a3=a64_0x5b0b73;if(process[_0xd475a3(0x20f)][_0xd475a3(0x19e)])return JSON[_0xd475a3(0x1ba)](process[_0xd475a3(0x20f)][_0xd475a3(0x19e)]);return this[_0xd475a3(0x1b1)];}static[a64_0x5b0b73(0x20e)](_0x324c1a,_0x2de267){const _0x6b977a=a64_0x5b0b73,_0x51528e={'fpckw':'1|3|2|0|4','qDUnx':function(_0x187a78,_0x24ab38){return _0x187a78||_0x24ab38;},'BUkJg':function(_0x277b6b,_0x530ca7){return _0x277b6b(_0x530ca7);}},_0x2a1bab=_0x51528e[_0x6b977a(0x1cc)][_0x6b977a(0x198)]('|');let _0x28bafa=0x0;while(!![]){switch(_0x2a1bab[_0x28bafa++]){case'0':process[_0x6b977a(0x20f)][_0x6b977a(0x19e)]=JSON[_0x6b977a(0x23a)](this[_0x6b977a(0x1b1)]);continue;case'1':_0x51528e[_0x6b977a(0x23c)](!_0x324c1a,!_0x2de267)&&logger['debug']('Test\x20or\x20Automation\x20framework\x20not\x20provided\x20testFramework='+_0x324c1a+',\x20automationFramework='+_0x2de267);continue;case'2':this[_0x6b977a(0x1b1)]={'name':_0x2de267,'version':_0x51528e[_0x6b977a(0x208)](getFrameworkVersion,_0x2de267)};continue;case'3':this[_0x6b977a(0x1bd)]={'name':_0x324c1a,'version':{[_0x324c1a]:_0x51528e[_0x6b977a(0x208)](getFrameworkVersion,_0x324c1a)}};continue;case'4':process['env'][_0x6b977a(0x1b4)]=JSON[_0x6b977a(0x23a)](this['testFrameworkDetail']);continue;}break;}}static['getHookRegistryKey'](_0x200a3a,_0x3ac994){return _0x200a3a+':'+_0x3ac994;}static[a64_0x5b0b73(0x1d6)](){return process['pid']+':'+threadId;}static[a64_0x5b0b73(0x1f2)](_0x2ccd4d){const _0x3bf067=a64_0x5b0b73;if(_0x2ccd4d[_0x3bf067(0x1af)]&&_0x2ccd4d[_0x3bf067(0x1af)][_0x3bf067(0x1c0)])return!![];return![];}static[a64_0x5b0b73(0x1be)](_0x54a046){const _0x24be08=a64_0x5b0b73;if(_0x54a046[_0x24be08(0x1af)]&&_0x54a046[_0x24be08(0x1af)][_0x24be08(0x1b9)])return!![];return![];}static[a64_0x5b0b73(0x1e4)](_0x277a00){const _0x31f97a=a64_0x5b0b73,_0x81b128=new RegExp(TestFrameworkConstants[_0x31f97a(0x1ef)]);return _0x81b128[_0x31f97a(0x258)](_0x277a00);}static[a64_0x5b0b73(0x207)](_0x150cfb,_0x38ef3d){const _0x5d5ff2=a64_0x5b0b73,_0x551734={};_0x551734[_0x5d5ff2(0x238)]=function(_0x428455,_0x38b837){return _0x428455!==_0x38b837;},_0x551734[_0x5d5ff2(0x202)]=function(_0x3ce010,_0x258dc9){return _0x3ce010===_0x258dc9;},_0x551734[_0x5d5ff2(0x1f5)]=_0x5d5ff2(0x246);const _0x5a1d0c=_0x551734;for(const [_0x561025,_0x1a2bb5]of Object[_0x5d5ff2(0x239)](_0x38ef3d)){if(_0x5a1d0c['ShmWn'](_0x1a2bb5,null)&&_0x5a1d0c[_0x5d5ff2(0x202)](typeof _0x1a2bb5,_0x5a1d0c[_0x5d5ff2(0x1f5)])&&!Array['isArray'](_0x1a2bb5))_0x150cfb[_0x561025]=this[_0x5d5ff2(0x207)](_0x150cfb[_0x561025]||{},_0x1a2bb5);else Array[_0x5d5ff2(0x21d)](_0x1a2bb5)?_0x150cfb[_0x561025]=(_0x150cfb[_0x561025]||[])[_0x5d5ff2(0x19d)](_0x1a2bb5):_0x150cfb[_0x561025]=_0x1a2bb5;}return _0x150cfb;}}module[a64_0x5b0b73(0x252)]=CLIUtils;