#!/usr/bin/env node
'use strict';const a12_0x4e37d8=a12_0x4178;function a12_0x4178(_0x982868,_0x8459dc){const _0x3515f9=a12_0x3515();return a12_0x4178=function(_0x417835,_0x2e35c8){_0x417835=_0x417835-0x1b8;let _0xb67628=_0x3515f9[_0x417835];return _0xb67628;},a12_0x4178(_0x982868,_0x8459dc);}function a12_0x3515(){const _0xae16eb=['epilogue','172148bqWYof','accessKey','split','Hosts\x20not\x20valid','https:','hosts','Integration\x20hosts\x20missing.','../../helpers/helper','9JYRZzz','rAOuO','connect','../../helpers/logger','bstack-accesskey','nQnmc','xcZBG','footer','invalid','pcYnd','protocol','73220SNhKzz','config','lpCGU','help','root','error','12ZyIYtl','bstackAccessKey','9wGdupM','demandOption','https','browserstackLocal','Connection\x20established\x20successfully.','uGQHP','missing','486444SZQpuc','ZGNfW','FmNub','setProxySettings','gVytT','replace','setupBrowserstackLocal','nzEYe','WJdDh','exports','options','YCQrt','join','trim','443','integrations','10460318wafwhy','./constants','785112Jblpmr','479120qbVLYJ','156018iKjyVT','port','syhaj','browserStackLocalOptions','usage','IXImw','sxCmu','type','EphRo','5eDPhJW','56hQCswf','undefined','command'];a12_0x3515=function(){return _0xae16eb;};return a12_0x3515();}(function(_0x42bd6d,_0x4ea77e){const _0x58cfe7=a12_0x4178,_0x1c702d=_0x42bd6d();while(!![]){try{const _0x32e5ba=-parseInt(_0x58cfe7(0x1db))/0x1+parseInt(_0x58cfe7(0x1e9))/0x2*(-parseInt(_0x58cfe7(0x1c0))/0x3)+-parseInt(_0x58cfe7(0x1d9))/0x4*(parseInt(_0x58cfe7(0x1e4))/0x5)+-parseInt(_0x58cfe7(0x1c7))/0x6+-parseInt(_0x58cfe7(0x1b8))/0x7*(parseInt(_0x58cfe7(0x1e5))/0x8)+parseInt(_0x58cfe7(0x1f1))/0x9*(-parseInt(_0x58cfe7(0x1da))/0xa)+-parseInt(_0x58cfe7(0x1d7))/0xb*(-parseInt(_0x58cfe7(0x1be))/0xc);if(_0x32e5ba===_0x4ea77e)break;else _0x1c702d['push'](_0x1c702d['shift']());}catch(_0x49fa81){_0x1c702d['push'](_0x1c702d['shift']());}}}(a12_0x3515,0x21be6));const {default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),logger=require(a12_0x4e37d8(0x1f4))['winstonLogger'],{URL}=require('url'),helper=require(a12_0x4e37d8(0x1f0)),{HELP_MESSAGES,ERROR_MESSAGES}=require(a12_0x4e37d8(0x1d8)),validHosts=function(_0x3a35c2){const _0x83887f=a12_0x4e37d8;return _0x3a35c2[_0x83887f(0x1eb)](',')['every'](_0x523a10=>{try{new URL(_0x523a10['trim']());}catch(_0x1d5c96){return![];}return!![];});},parseOnPremHosts=function(_0x151b07){const _0x4f1669=a12_0x4e37d8,_0x469718={};_0x469718['ZGNfW']=function(_0x4bc598,_0x5d53ed){return _0x4bc598===_0x5d53ed;},_0x469718[_0x4f1669(0x1fa)]=_0x4f1669(0x1ed),_0x469718['IXImw']=_0x4f1669(0x1d5),_0x469718[_0x4f1669(0x1f6)]=_0x4f1669(0x1c2);const _0x50074e=_0x469718;return _0x151b07[_0x4f1669(0x1eb)](',')['map'](_0x980423=>{const _0x569e14=_0x4f1669,_0x1339e0=new URL(_0x980423[_0x569e14(0x1d4)]()),_0xe9f2f4=_0x1339e0['hostname'],_0x24f722=_0x1339e0[_0x569e14(0x1dc)]||(_0x50074e[_0x569e14(0x1c8)](_0x1339e0['protocol'],_0x50074e[_0x569e14(0x1fa)])?_0x50074e[_0x569e14(0x1e0)]:'80'),_0x2deec8=_0x1339e0[_0x569e14(0x1fb)][_0x569e14(0x1cc)](':',''),_0x2ca922=_0x50074e[_0x569e14(0x1c8)](_0x2deec8,_0x50074e[_0x569e14(0x1f6)])?0x1:0x0;return _0xe9f2f4+','+_0x24f722+','+_0x2ca922;});},connectCommandBuilder=function(_0x3be629){const _0x256383=a12_0x4e37d8,_0x5b4199={};_0x5b4199['rAOuO']='string';const _0x450501=_0x5b4199,_0x415c78={};_0x415c78['describe']=HELP_MESSAGES[_0x256383(0x1d1)]['bstackAccessKey'],_0x415c78[_0x256383(0x1e2)]=_0x450501[_0x256383(0x1f2)];const _0x39356e={};_0x39356e['describe']=HELP_MESSAGES[_0x256383(0x1d1)][_0x256383(0x1ee)],_0x39356e[_0x256383(0x1e2)]=_0x450501[_0x256383(0x1f2)],_0x39356e[_0x256383(0x1c1)]=!![];const _0xc43c12={};return _0xc43c12[_0x256383(0x1f5)]=_0x415c78,_0xc43c12[_0x256383(0x1ee)]=_0x39356e,_0x3be629['options'](_0xc43c12);},connectCommandHandler=async function(_0x1d2967){const _0x514458=a12_0x4e37d8,_0x113911={'sxCmu':_0x514458(0x1d6),'WJdDh':function(_0x49da6e,_0x53cce6){return _0x49da6e===_0x53cce6;},'xcZBG':_0x514458(0x1e6),'YCQrt':'BrowserStack\x20access\x20key\x20missing.','EphRo':function(_0xf74314,_0x5c8c92){return _0xf74314===_0x5c8c92;},'nzEYe':_0x514458(0x1ef),'Blpfu':function(_0x19c497,_0x551fbb){return _0x19c497(_0x551fbb);},'uGQHP':_0x514458(0x1ec),'mqQiq':'integrations-repeater','FmNub':_0x514458(0x1c4),'syhaj':'Failed\x20to\x20establish\x20connection.'};try{const _0x24143b=new BrowserStackSetup(_0x1d2967,_0x113911[_0x514458(0x1e1)]);_0x1d2967['bstackAccesskey']&&(_0x24143b['config'][_0x514458(0x1ea)]=_0x1d2967['bstackAccesskey']);if(_0x113911[_0x514458(0x1cf)](typeof _0x24143b[_0x514458(0x1b9)][_0x514458(0x1ea)],_0x113911['xcZBG'])){logger['error'](_0x113911[_0x514458(0x1d2)]);throw new Error(ERROR_MESSAGES[_0x514458(0x1bf)][_0x514458(0x1c6)]);}const _0x40180c=_0x1d2967[_0x514458(0x1ee)];if(_0x113911[_0x514458(0x1e3)](typeof _0x40180c,_0x113911[_0x514458(0x1f7)])){logger[_0x514458(0x1bd)](_0x113911[_0x514458(0x1ce)]);throw new Error(ERROR_MESSAGES[_0x514458(0x1ee)][_0x514458(0x1c6)]);}if(!_0x113911['Blpfu'](validHosts,_0x40180c)){logger['error'](_0x113911[_0x514458(0x1c5)]);throw new Error(ERROR_MESSAGES[_0x514458(0x1ee)][_0x514458(0x1f9)]);}const _0x56b608=_0x113911['Blpfu'](parseOnPremHosts,_0x40180c);_0x24143b[_0x514458(0x1b9)][_0x514458(0x1c3)]=!![],_0x24143b[_0x514458(0x1b9)]['browserStackLocalOptions']['localIdentifier']=_0x113911['mqQiq'],_0x24143b[_0x514458(0x1b9)][_0x514458(0x1de)]['only']=_0x56b608[_0x514458(0x1d3)](','),helper[_0x514458(0x1ca)](_0x24143b[_0x514458(0x1b9)]),await _0x24143b[_0x514458(0x1cd)](),logger['info'](_0x113911[_0x514458(0x1c9)]);}catch(_0xf3b722){logger['error'](_0x113911[_0x514458(0x1dd)]);throw new Error(_0xf3b722['toString']());}};function run(_0x4e2847){const _0x1e6e9f=a12_0x4e37d8,_0x1cfa60={};_0x1cfa60['gVytT']='connect',_0x1cfa60['lpCGU']=_0x1e6e9f(0x1bb);const _0x250835=_0x1cfa60;_0x4e2847[_0x1e6e9f(0x1df)](HELP_MESSAGES['command'][_0x1e6e9f(0x1bc)])[_0x1e6e9f(0x1e7)](_0x250835[_0x1e6e9f(0x1cb)],HELP_MESSAGES[_0x1e6e9f(0x1e7)][_0x1e6e9f(0x1f3)],connectCommandBuilder,connectCommandHandler)['demandCommand']()[_0x1e6e9f(0x1bb)](_0x250835[_0x1e6e9f(0x1ba)])[_0x1e6e9f(0x1e8)](HELP_MESSAGES[_0x1e6e9f(0x1e7)][_0x1e6e9f(0x1f8)]);}module[a12_0x4e37d8(0x1d0)]=run;