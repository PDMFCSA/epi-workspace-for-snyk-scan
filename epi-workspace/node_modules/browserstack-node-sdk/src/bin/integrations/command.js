#!/usr/bin/env node
'use strict';function a12_0x9103(_0x1a19ba,_0x2089d6){const _0x13d745=a12_0x13d7();return a12_0x9103=function(_0x9103c1,_0x36b69b){_0x9103c1=_0x9103c1-0x107;let _0xc88465=_0x13d745[_0x9103c1];return _0xc88465;},a12_0x9103(_0x1a19ba,_0x2089d6);}const a12_0x3a34b4=a12_0x9103;(function(_0x504eab,_0x5bd4e1){const _0x203864=a12_0x9103,_0x4ec929=_0x504eab();while(!![]){try{const _0x145632=parseInt(_0x203864(0x136))/0x1+-parseInt(_0x203864(0x14c))/0x2*(parseInt(_0x203864(0x10b))/0x3)+parseInt(_0x203864(0x12a))/0x4+-parseInt(_0x203864(0x10f))/0x5+parseInt(_0x203864(0x11e))/0x6*(parseInt(_0x203864(0x149))/0x7)+parseInt(_0x203864(0x140))/0x8*(parseInt(_0x203864(0x109))/0x9)+-parseInt(_0x203864(0x12b))/0xa;if(_0x145632===_0x5bd4e1)break;else _0x4ec929['push'](_0x4ec929['shift']());}catch(_0x47219c){_0x4ec929['push'](_0x4ec929['shift']());}}}(a12_0x13d7,0x92d83));const {default:BrowserStackSetup}=require(a12_0x3a34b4(0x147)),logger=require(a12_0x3a34b4(0x119))[a12_0x3a34b4(0x14d)],{URL}=require(a12_0x3a34b4(0x126)),helper=require('../../helpers/helper'),{HELP_MESSAGES,ERROR_MESSAGES}=require('./constants'),validHosts=function(_0x33be4d){const _0x27ed42=a12_0x3a34b4;return _0x33be4d[_0x27ed42(0x14f)](',')[_0x27ed42(0x12e)](_0x2fed71=>{try{new URL(_0x2fed71['trim']());}catch(_0x103a56){return![];}return!![];});},parseOnPremHosts=function(_0x4e40d2){const _0x1c16de=a12_0x3a34b4,_0x1d4c23={};_0x1d4c23[_0x1c16de(0x125)]=function(_0x4347ef,_0x110e64){return _0x4347ef===_0x110e64;},_0x1d4c23[_0x1c16de(0x14a)]=_0x1c16de(0x11f),_0x1d4c23[_0x1c16de(0x11a)]=_0x1c16de(0x139),_0x1d4c23[_0x1c16de(0x134)]=_0x1c16de(0x11b);const _0x4aec17=_0x1d4c23;return _0x4e40d2['split'](',')['map'](_0x49ed2c=>{const _0x1c7f9a=_0x1c16de,_0x229345=new URL(_0x49ed2c[_0x1c7f9a(0x110)]()),_0x4f017e=_0x229345['hostname'],_0x3e2f2e=_0x229345[_0x1c7f9a(0x116)]||(_0x4aec17[_0x1c7f9a(0x125)](_0x229345[_0x1c7f9a(0x11d)],_0x4aec17[_0x1c7f9a(0x14a)])?_0x4aec17[_0x1c7f9a(0x11a)]:'80'),_0x573c02=_0x229345[_0x1c7f9a(0x11d)][_0x1c7f9a(0x127)](':',''),_0x3d6430=_0x4aec17[_0x1c7f9a(0x125)](_0x573c02,_0x4aec17['JvOEJ'])?0x1:0x0;return _0x4f017e+','+_0x3e2f2e+','+_0x3d6430;});},connectCommandBuilder=function(_0x249cee){const _0x523937=a12_0x3a34b4,_0x202771={};_0x202771['flGpw']=_0x523937(0x138);const _0x317748=_0x202771,_0x49e9ba={};_0x49e9ba[_0x523937(0x135)]=HELP_MESSAGES[_0x523937(0x129)][_0x523937(0x12c)],_0x49e9ba[_0x523937(0x14e)]=_0x317748[_0x523937(0x143)];const _0x238f7c={};_0x238f7c['describe']=HELP_MESSAGES[_0x523937(0x129)][_0x523937(0x10e)],_0x238f7c[_0x523937(0x14e)]=_0x317748['flGpw'],_0x238f7c[_0x523937(0x13e)]=!![];const _0x4be67d={};return _0x4be67d[_0x523937(0x13d)]=_0x49e9ba,_0x4be67d['hosts']=_0x238f7c,_0x249cee[_0x523937(0x129)](_0x4be67d);},connectCommandHandler=async function(_0x28eb72){const _0x86c434=a12_0x3a34b4,_0x573391={'AYvWf':_0x86c434(0x123),'jeOnA':function(_0x4d7f8e,_0x445b82){return _0x4d7f8e===_0x445b82;},'LNYvs':_0x86c434(0x12f),'ZrRqC':_0x86c434(0x131),'gWSMq':function(_0xb33d17,_0x1ee11c){return _0xb33d17===_0x1ee11c;},'ffDfU':_0x86c434(0x133),'UorbC':function(_0x1980a7,_0x48503a){return _0x1980a7(_0x48503a);},'iVeHD':'Hosts\x20not\x20valid','gdcEd':_0x86c434(0x122),'NYlOd':'Connection\x20established\x20successfully.','kIKHz':_0x86c434(0x114)};try{const _0x32cf43=new BrowserStackSetup(_0x28eb72,_0x573391[_0x86c434(0x113)]);_0x28eb72['bstackAccesskey']&&(_0x32cf43[_0x86c434(0x142)][_0x86c434(0x118)]=_0x28eb72[_0x86c434(0x120)]);if(_0x573391[_0x86c434(0x112)](typeof _0x32cf43['config'][_0x86c434(0x118)],_0x573391['LNYvs'])){logger[_0x86c434(0x10d)](_0x573391['ZrRqC']);throw new Error(ERROR_MESSAGES[_0x86c434(0x12c)][_0x86c434(0x115)]);}const _0x23e25f=_0x28eb72['hosts'];if(_0x573391['gWSMq'](typeof _0x23e25f,_0x573391[_0x86c434(0x13b)])){logger['error'](_0x573391[_0x86c434(0x11c)]);throw new Error(ERROR_MESSAGES['hosts']['missing']);}if(!_0x573391['UorbC'](validHosts,_0x23e25f)){logger['error'](_0x573391[_0x86c434(0x124)]);throw new Error(ERROR_MESSAGES[_0x86c434(0x10e)][_0x86c434(0x10c)]);}const _0x5ba61b=_0x573391['UorbC'](parseOnPremHosts,_0x23e25f);_0x32cf43[_0x86c434(0x142)][_0x86c434(0x108)]=!![],_0x32cf43[_0x86c434(0x142)][_0x86c434(0x128)][_0x86c434(0x107)]=_0x573391[_0x86c434(0x14b)],_0x32cf43[_0x86c434(0x142)][_0x86c434(0x128)][_0x86c434(0x141)]=_0x5ba61b[_0x86c434(0x144)](','),helper['setProxySettings'](_0x32cf43[_0x86c434(0x142)]),await _0x32cf43['setupBrowserstackLocal'](),logger[_0x86c434(0x121)](_0x573391['NYlOd']);}catch(_0x1d35dd){logger[_0x86c434(0x10d)](_0x573391[_0x86c434(0x148)]);throw new Error(_0x1d35dd[_0x86c434(0x146)]());}};function a12_0x13d7(){const _0x15947d=['protocol','18ryYOhR','https:','bstackAccesskey','info','integrations-repeater','integrations','iVeHD','apDrQ','url','replace','browserStackLocalOptions','options','3255656cQGHJr','6662590WGwzop','bstackAccessKey','sPFjk','every','undefined','epilogue','BrowserStack\x20access\x20key\x20missing.','exports','Integration\x20hosts\x20missing.','JvOEJ','describe','698800BZUFsv','root','string','443','usage','LNYvs','footer','bstack-accesskey','demandOption','help','8YeYSNk','only','config','flGpw','join','CKwHf','toString','../../helpers/BrowserStackSetup','kIKHz','2322887rZbYRF','HXQLb','gdcEd','2CEeEZM','winstonLogger','type','split','localIdentifier','browserstackLocal','1729980ZiuCdg','demandCommand','2278797lKVmBI','invalid','error','hosts','3365620piwyPu','trim','command','jeOnA','AYvWf','Failed\x20to\x20establish\x20connection.','missing','port','connect','accessKey','../../helpers/logger','MSQrz','https','ffDfU'];a12_0x13d7=function(){return _0x15947d;};return a12_0x13d7();}function run(_0x3e2c06){const _0x478257=a12_0x3a34b4,_0x52a259={};_0x52a259[_0x478257(0x12d)]=_0x478257(0x117),_0x52a259[_0x478257(0x145)]=_0x478257(0x13f);const _0x1af3da=_0x52a259;_0x3e2c06[_0x478257(0x13a)](HELP_MESSAGES[_0x478257(0x111)][_0x478257(0x137)])[_0x478257(0x111)](_0x1af3da['sPFjk'],HELP_MESSAGES[_0x478257(0x111)][_0x478257(0x117)],connectCommandBuilder,connectCommandHandler)[_0x478257(0x10a)]()[_0x478257(0x13f)](_0x1af3da[_0x478257(0x145)])[_0x478257(0x130)](HELP_MESSAGES[_0x478257(0x111)][_0x478257(0x13c)]);}module[a12_0x3a34b4(0x132)]=run;