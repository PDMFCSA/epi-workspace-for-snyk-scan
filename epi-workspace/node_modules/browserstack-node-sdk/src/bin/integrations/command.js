#!/usr/bin/env node
'use strict';const a12_0x801a54=a12_0x1d45;function a12_0x1d45(_0x5a5fad,_0x5d9df1){const _0x39ae9f=a12_0x39ae();return a12_0x1d45=function(_0x1d45b2,_0x3559d1){_0x1d45b2=_0x1d45b2-0x1e7;let _0x41ef38=_0x39ae9f[_0x1d45b2];return _0x41ef38;},a12_0x1d45(_0x5a5fad,_0x5d9df1);}(function(_0x4a35ee,_0x301afd){const _0x5d5476=a12_0x1d45,_0xd7c286=_0x4a35ee();while(!![]){try{const _0x3bea29=-parseInt(_0x5d5476(0x200))/0x1+-parseInt(_0x5d5476(0x1ea))/0x2+-parseInt(_0x5d5476(0x205))/0x3*(-parseInt(_0x5d5476(0x1ee))/0x4)+parseInt(_0x5d5476(0x1fc))/0x5*(parseInt(_0x5d5476(0x1f9))/0x6)+-parseInt(_0x5d5476(0x1f1))/0x7+parseInt(_0x5d5476(0x1f2))/0x8*(-parseInt(_0x5d5476(0x221))/0x9)+parseInt(_0x5d5476(0x212))/0xa*(parseInt(_0x5d5476(0x22c))/0xb);if(_0x3bea29===_0x301afd)break;else _0xd7c286['push'](_0xd7c286['shift']());}catch(_0x3784e1){_0xd7c286['push'](_0xd7c286['shift']());}}}(a12_0x39ae,0xcae54));function a12_0x39ae(){const _0x468f96=['952YmlyJU','integrations','help','443','OQpyC','usage','options','18QVOchF','accessKey','browserStackLocalOptions','1837105PVZxsw','gUbaN','command','ZUVch','1090513WfAxaN','winstonLogger','https:','every','jPchG','963dmsfCr','unkfU','jncIo','bstackAccessKey','port','only','map','describe','setupBrowserstackLocal','undefined','../../helpers/logger','CAuTi','axlvY','3990tnkTIF','Connection\x20established\x20successfully.','hosts','epilogue','protocol','url','tXmfZ','split','integrations-repeater','config','connect','bstackAccesskey','demandCommand','error','aLIsY','101700SzlwOI','xTNlw','Hosts\x20not\x20valid','lnoOU','localIdentifier','browserstackLocal','string','yqblF','info','AIlJX','trim','64559fhNKSY','BrowserStack\x20access\x20key\x20missing.','../../helpers/BrowserStackSetup','demandOption','type','toString','1792318nlCMvu','nWSum','pJkOc','root','19540lzptZj','Failed\x20to\x20establish\x20connection.','Integration\x20hosts\x20missing.','5947529ekXVtl'];a12_0x39ae=function(){return _0x468f96;};return a12_0x39ae();}const {default:BrowserStackSetup}=require(a12_0x801a54(0x22e)),logger=require(a12_0x801a54(0x20f))[a12_0x801a54(0x201)],{URL}=require(a12_0x801a54(0x217)),helper=require('../../helpers/helper'),{HELP_MESSAGES,ERROR_MESSAGES}=require('./constants'),validHosts=function(_0x76b320){const _0x1def21=a12_0x801a54;return _0x76b320[_0x1def21(0x219)](',')[_0x1def21(0x203)](_0x458b4d=>{const _0x5f41b1=_0x1def21;try{new URL(_0x458b4d[_0x5f41b1(0x22b)]());}catch(_0x81e5f7){return![];}return!![];});},parseOnPremHosts=function(_0x204c2b){const _0x37b5ef=a12_0x801a54,_0x2a613a={};_0x2a613a[_0x37b5ef(0x1f6)]=function(_0x4a3863,_0x471a83){return _0x4a3863===_0x471a83;},_0x2a613a[_0x37b5ef(0x220)]=_0x37b5ef(0x202),_0x2a613a[_0x37b5ef(0x1eb)]=_0x37b5ef(0x1f5),_0x2a613a[_0x37b5ef(0x211)]=function(_0x24d9a0,_0x11d6a1){return _0x24d9a0===_0x11d6a1;},_0x2a613a['gUbaN']='https';const _0x4aa28d=_0x2a613a;return _0x204c2b['split'](',')[_0x37b5ef(0x20b)](_0x55444c=>{const _0x2975a3=_0x37b5ef,_0xa09f10=new URL(_0x55444c[_0x2975a3(0x22b)]()),_0x42a102=_0xa09f10['hostname'],_0x2b3ccb=_0xa09f10[_0x2975a3(0x209)]||(_0x4aa28d[_0x2975a3(0x1f6)](_0xa09f10['protocol'],_0x4aa28d[_0x2975a3(0x220)])?_0x4aa28d[_0x2975a3(0x1eb)]:'80'),_0x3942a5=_0xa09f10[_0x2975a3(0x216)]['replace'](':',''),_0x4573cb=_0x4aa28d['axlvY'](_0x3942a5,_0x4aa28d[_0x2975a3(0x1fd)])?0x1:0x0;return _0x42a102+','+_0x2b3ccb+','+_0x4573cb;});},connectCommandBuilder=function(_0x568faa){const _0x3d77d3=a12_0x801a54,_0x41b0f8={};_0x41b0f8['AIlJX']=_0x3d77d3(0x227);const _0x4f5574=_0x41b0f8,_0x55e7b5={};_0x55e7b5[_0x3d77d3(0x20c)]=HELP_MESSAGES['options'][_0x3d77d3(0x208)],_0x55e7b5['type']=_0x4f5574[_0x3d77d3(0x22a)];const _0x3c488d={};_0x3c488d[_0x3d77d3(0x20c)]=HELP_MESSAGES[_0x3d77d3(0x1f8)][_0x3d77d3(0x214)],_0x3c488d[_0x3d77d3(0x1e8)]=_0x4f5574[_0x3d77d3(0x22a)],_0x3c488d[_0x3d77d3(0x1e7)]=!![];const _0x3d66b6={};return _0x3d66b6['bstack-accesskey']=_0x55e7b5,_0x3d66b6['hosts']=_0x3c488d,_0x568faa[_0x3d77d3(0x1f8)](_0x3d66b6);},connectCommandHandler=async function(_0x1330f2){const _0x27bdcc=a12_0x801a54,_0x54fe22={'fwiOW':_0x27bdcc(0x1f3),'tXmfZ':function(_0x2889d3,_0xef7e51){return _0x2889d3===_0xef7e51;},'xTNlw':_0x27bdcc(0x20e),'unkfU':_0x27bdcc(0x22d),'pJkOc':_0x27bdcc(0x1f0),'CAuTi':function(_0x5ce883,_0x253327){return _0x5ce883(_0x253327);},'jncIo':_0x27bdcc(0x223),'mVbHt':function(_0x1840c9,_0x117a51){return _0x1840c9(_0x117a51);},'jPchG':_0x27bdcc(0x21a),'yqblF':_0x27bdcc(0x213),'aCTrT':_0x27bdcc(0x1ef)};try{const _0x5314b4=new BrowserStackSetup(_0x1330f2,_0x54fe22['fwiOW']);_0x1330f2[_0x27bdcc(0x21d)]&&(_0x5314b4['config'][_0x27bdcc(0x1fa)]=_0x1330f2[_0x27bdcc(0x21d)]);if(_0x54fe22[_0x27bdcc(0x218)](typeof _0x5314b4[_0x27bdcc(0x21b)][_0x27bdcc(0x1fa)],_0x54fe22[_0x27bdcc(0x222)])){logger[_0x27bdcc(0x21f)](_0x54fe22[_0x27bdcc(0x206)]);throw new Error(ERROR_MESSAGES[_0x27bdcc(0x208)]['missing']);}const _0xa5729b=_0x1330f2[_0x27bdcc(0x214)];if(_0x54fe22[_0x27bdcc(0x218)](typeof _0xa5729b,_0x54fe22[_0x27bdcc(0x222)])){logger[_0x27bdcc(0x21f)](_0x54fe22[_0x27bdcc(0x1ec)]);throw new Error(ERROR_MESSAGES['hosts']['missing']);}if(!_0x54fe22[_0x27bdcc(0x210)](validHosts,_0xa5729b)){logger[_0x27bdcc(0x21f)](_0x54fe22[_0x27bdcc(0x207)]);throw new Error(ERROR_MESSAGES[_0x27bdcc(0x214)]['invalid']);}const _0x21219d=_0x54fe22['mVbHt'](parseOnPremHosts,_0xa5729b);_0x5314b4[_0x27bdcc(0x21b)][_0x27bdcc(0x226)]=!![],_0x5314b4['config'][_0x27bdcc(0x1fb)][_0x27bdcc(0x225)]=_0x54fe22[_0x27bdcc(0x204)],_0x5314b4[_0x27bdcc(0x21b)][_0x27bdcc(0x1fb)][_0x27bdcc(0x20a)]=_0x21219d['join'](','),helper['setProxySettings'](_0x5314b4['config']),await _0x5314b4[_0x27bdcc(0x20d)](),logger[_0x27bdcc(0x229)](_0x54fe22[_0x27bdcc(0x228)]);}catch(_0x4dfb98){logger[_0x27bdcc(0x21f)](_0x54fe22['aCTrT']);throw new Error(_0x4dfb98[_0x27bdcc(0x1e9)]());}};function run(_0x537712){const _0xc7a2fc=a12_0x801a54,_0x522dd0={};_0x522dd0[_0xc7a2fc(0x1ff)]='connect',_0x522dd0['lnoOU']='help';const _0x1bc21b=_0x522dd0;_0x537712[_0xc7a2fc(0x1f7)](HELP_MESSAGES[_0xc7a2fc(0x1fe)][_0xc7a2fc(0x1ed)])[_0xc7a2fc(0x1fe)](_0x1bc21b[_0xc7a2fc(0x1ff)],HELP_MESSAGES[_0xc7a2fc(0x1fe)][_0xc7a2fc(0x21c)],connectCommandBuilder,connectCommandHandler)[_0xc7a2fc(0x21e)]()[_0xc7a2fc(0x1f4)](_0x1bc21b[_0xc7a2fc(0x224)])[_0xc7a2fc(0x215)](HELP_MESSAGES['command']['footer']);}module['exports']=run;