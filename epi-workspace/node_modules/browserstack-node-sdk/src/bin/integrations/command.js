#!/usr/bin/env node
'use strict';const a12_0x5d21da=a12_0x18c8;function a12_0x18c8(_0x341582,_0x4a75cb){const _0x5bdde1=a12_0x5bdd();return a12_0x18c8=function(_0x18c87e,_0x490ce5){_0x18c87e=_0x18c87e-0x188;let _0x19535e=_0x5bdde1[_0x18c87e];return _0x19535e;},a12_0x18c8(_0x341582,_0x4a75cb);}(function(_0x472905,_0x25543b){const _0x56dd62=a12_0x18c8,_0xf95b4e=_0x472905();while(!![]){try{const _0x2aa1ef=-parseInt(_0x56dd62(0x18c))/0x1+-parseInt(_0x56dd62(0x1c1))/0x2+parseInt(_0x56dd62(0x1a6))/0x3+-parseInt(_0x56dd62(0x1b4))/0x4+-parseInt(_0x56dd62(0x196))/0x5*(-parseInt(_0x56dd62(0x199))/0x6)+-parseInt(_0x56dd62(0x19a))/0x7+-parseInt(_0x56dd62(0x1a8))/0x8*(-parseInt(_0x56dd62(0x189))/0x9);if(_0x2aa1ef===_0x25543b)break;else _0xf95b4e['push'](_0xf95b4e['shift']());}catch(_0x2318d3){_0xf95b4e['push'](_0xf95b4e['shift']());}}}(a12_0x5bdd,0xe768b));function a12_0x5bdd(){const _0x187f24=['592714uDUVqY','SLLKN','string','protocol','mVIAx','type','vYJMS','error','only','integrations','help','config','bstackAccessKey','kcAqR','9XmdETM','../../helpers/logger','KUfeF','1852991QgxRBH','bstack-accesskey','port','replace','demandOption','Failed\x20to\x20establish\x20connection.','info','../../helpers/helper','443','usage','45lhQfVS','./constants','bstackAccesskey','551970JLheos','7380345iIBAVW','ZzCvN','nTYLB','describe','split','integrations-repeater','hosts','BrowserStack\x20access\x20key\x20missing.','Connection\x20established\x20successfully.','QFZqP','undefined','connect','3961227IHWHcZ','qVjtf','23647840vZBMuO','https','exports','localIdentifier','demandCommand','QRZeD','XMAYK','setProxySettings','options','root','Integration\x20hosts\x20missing.','every','3811240ISPKyV','UViaI','command','vwlqb','browserStackLocalOptions','accessKey','invalid','trim','join','CFSzj','yUqQx','jHuxQ','kCQtg'];a12_0x5bdd=function(){return _0x187f24;};return a12_0x5bdd();}const {default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),logger=require(a12_0x5d21da(0x18a))['winstonLogger'],{URL}=require('url'),helper=require(a12_0x5d21da(0x193)),{HELP_MESSAGES,ERROR_MESSAGES}=require(a12_0x5d21da(0x197)),validHosts=function(_0x34891b){const _0x4a2b52=a12_0x5d21da;return _0x34891b[_0x4a2b52(0x19e)](',')[_0x4a2b52(0x1b3)](_0x45317e=>{const _0x548988=_0x4a2b52;try{new URL(_0x45317e[_0x548988(0x1bb)]());}catch(_0x30d852){return![];}return!![];});},parseOnPremHosts=function(_0x5e8c94){const _0x44face=a12_0x5d21da,_0x35b25b={};_0x35b25b[_0x44face(0x1c5)]=function(_0x267fcf,_0x43108f){return _0x267fcf===_0x43108f;},_0x35b25b[_0x44face(0x1a7)]='https:',_0x35b25b[_0x44face(0x1be)]=_0x44face(0x194),_0x35b25b[_0x44face(0x1c2)]=function(_0x4bda2e,_0x19f508){return _0x4bda2e===_0x19f508;},_0x35b25b['XMAYK']=_0x44face(0x1a9);const _0x30a9a0=_0x35b25b;return _0x5e8c94[_0x44face(0x19e)](',')['map'](_0x428d31=>{const _0x22d43f=_0x44face,_0x162263=new URL(_0x428d31[_0x22d43f(0x1bb)]()),_0x1d0caf=_0x162263['hostname'],_0x50c6da=_0x162263[_0x22d43f(0x18e)]||(_0x30a9a0[_0x22d43f(0x1c5)](_0x162263[_0x22d43f(0x1c4)],_0x30a9a0['qVjtf'])?_0x30a9a0[_0x22d43f(0x1be)]:'80'),_0x2ec2a3=_0x162263[_0x22d43f(0x1c4)][_0x22d43f(0x18f)](':',''),_0x11e456=_0x30a9a0[_0x22d43f(0x1c2)](_0x2ec2a3,_0x30a9a0[_0x22d43f(0x1ae)])?0x1:0x0;return _0x1d0caf+','+_0x50c6da+','+_0x11e456;});},connectCommandBuilder=function(_0x1990c5){const _0x5f3d4f=a12_0x5d21da,_0x409b32={};_0x409b32['jHuxQ']=_0x5f3d4f(0x1c3);const _0x5ad75b=_0x409b32,_0x18c05f={};_0x18c05f[_0x5f3d4f(0x19d)]=HELP_MESSAGES[_0x5f3d4f(0x1b0)][_0x5f3d4f(0x1cd)],_0x18c05f[_0x5f3d4f(0x1c6)]=_0x5ad75b[_0x5f3d4f(0x1bf)];const _0x405701={};_0x405701['describe']=HELP_MESSAGES['options'][_0x5f3d4f(0x1a0)],_0x405701[_0x5f3d4f(0x1c6)]=_0x5ad75b[_0x5f3d4f(0x1bf)],_0x405701[_0x5f3d4f(0x190)]=!![];const _0x396a6e={};return _0x396a6e[_0x5f3d4f(0x18d)]=_0x18c05f,_0x396a6e[_0x5f3d4f(0x1a0)]=_0x405701,_0x1990c5[_0x5f3d4f(0x1b0)](_0x396a6e);},connectCommandHandler=async function(_0x1643c4){const _0x3a129f=a12_0x5d21da,_0x96ff87={'QFZqP':_0x3a129f(0x1ca),'kCdpI':function(_0x3144d7,_0x34226f){return _0x3144d7===_0x34226f;},'CFSzj':_0x3a129f(0x1a4),'KUfeF':_0x3a129f(0x1a1),'ZzCvN':function(_0x4f9260,_0x2b966e){return _0x4f9260===_0x2b966e;},'vYJMS':_0x3a129f(0x1b2),'kCQtg':function(_0x175ccf,_0x494bde){return _0x175ccf(_0x494bde);},'UViaI':'Hosts\x20not\x20valid','QRZeD':_0x3a129f(0x19f),'nTYLB':_0x3a129f(0x1a2),'dJOiE':_0x3a129f(0x191)};try{const _0x4adafd=new BrowserStackSetup(_0x1643c4,_0x96ff87[_0x3a129f(0x1a3)]);_0x1643c4[_0x3a129f(0x198)]&&(_0x4adafd[_0x3a129f(0x1cc)][_0x3a129f(0x1b9)]=_0x1643c4['bstackAccesskey']);if(_0x96ff87['kCdpI'](typeof _0x4adafd[_0x3a129f(0x1cc)]['accessKey'],_0x96ff87[_0x3a129f(0x1bd)])){logger[_0x3a129f(0x1c8)](_0x96ff87[_0x3a129f(0x18b)]);throw new Error(ERROR_MESSAGES[_0x3a129f(0x1cd)]['missing']);}const _0x1acd12=_0x1643c4[_0x3a129f(0x1a0)];if(_0x96ff87[_0x3a129f(0x19b)](typeof _0x1acd12,_0x96ff87[_0x3a129f(0x1bd)])){logger[_0x3a129f(0x1c8)](_0x96ff87[_0x3a129f(0x1c7)]);throw new Error(ERROR_MESSAGES[_0x3a129f(0x1a0)]['missing']);}if(!_0x96ff87[_0x3a129f(0x1c0)](validHosts,_0x1acd12)){logger[_0x3a129f(0x1c8)](_0x96ff87[_0x3a129f(0x1b5)]);throw new Error(ERROR_MESSAGES[_0x3a129f(0x1a0)][_0x3a129f(0x1ba)]);}const _0x14aa11=_0x96ff87[_0x3a129f(0x1c0)](parseOnPremHosts,_0x1acd12);_0x4adafd[_0x3a129f(0x1cc)]['browserstackLocal']=!![],_0x4adafd[_0x3a129f(0x1cc)][_0x3a129f(0x1b8)][_0x3a129f(0x1ab)]=_0x96ff87[_0x3a129f(0x1ad)],_0x4adafd['config'][_0x3a129f(0x1b8)][_0x3a129f(0x1c9)]=_0x14aa11[_0x3a129f(0x1bc)](','),helper[_0x3a129f(0x1af)](_0x4adafd[_0x3a129f(0x1cc)]),await _0x4adafd['setupBrowserstackLocal'](),logger[_0x3a129f(0x192)](_0x96ff87[_0x3a129f(0x19c)]);}catch(_0x4e799b){logger['error'](_0x96ff87['dJOiE']);throw new Error(_0x4e799b['toString']());}};function run(_0xf8aaab){const _0x58578a=a12_0x5d21da,_0x17c95b={};_0x17c95b[_0x58578a(0x1b7)]=_0x58578a(0x1a5),_0x17c95b[_0x58578a(0x188)]=_0x58578a(0x1cb);const _0x5b1da4=_0x17c95b;_0xf8aaab[_0x58578a(0x195)](HELP_MESSAGES['command'][_0x58578a(0x1b1)])['command'](_0x5b1da4[_0x58578a(0x1b7)],HELP_MESSAGES[_0x58578a(0x1b6)][_0x58578a(0x1a5)],connectCommandBuilder,connectCommandHandler)[_0x58578a(0x1ac)]()[_0x58578a(0x1cb)](_0x5b1da4[_0x58578a(0x188)])['epilogue'](HELP_MESSAGES['command']['footer']);}module[a12_0x5d21da(0x1aa)]=run;