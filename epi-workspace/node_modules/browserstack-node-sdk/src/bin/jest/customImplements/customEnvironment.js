const a16_0x1dfc8b=a16_0x445c;(function(_0xf59cf6,_0x5a4647){const _0xffd589=a16_0x445c,_0x5167bc=_0xf59cf6();while(!![]){try{const _0x43730b=parseInt(_0xffd589(0xdf))/0x1*(-parseInt(_0xffd589(0xde))/0x2)+-parseInt(_0xffd589(0xf9))/0x3*(-parseInt(_0xffd589(0xf5))/0x4)+-parseInt(_0xffd589(0xec))/0x5*(-parseInt(_0xffd589(0x11b))/0x6)+parseInt(_0xffd589(0x117))/0x7+parseInt(_0xffd589(0xb2))/0x8*(parseInt(_0xffd589(0x107))/0x9)+parseInt(_0xffd589(0xe7))/0xa*(parseInt(_0xffd589(0xfe))/0xb)+-parseInt(_0xffd589(0xd2))/0xc;if(_0x43730b===_0x5a4647)break;else _0x5167bc['push'](_0x5167bc['shift']());}catch(_0x5ee2c0){_0x5167bc['push'](_0x5167bc['shift']());}}}(a16_0x29ed,0xf2424));const helper=require(a16_0x1dfc8b(0xb4)),constants=require(a16_0x1dfc8b(0x104)),{isTestObservabilitySession}=require(a16_0x1dfc8b(0xb9)),RequestQueueHandler=require(a16_0x1dfc8b(0xc0)),ObservabilityReporter=require('../test-observability/obsReporter'),testhubUtils=require(a16_0x1dfc8b(0xe6)),logger=require('../../../helpers/logger')[a16_0x1dfc8b(0x100)],getTestEnvironment=((()=>{const _0xd90b5c=a16_0x1dfc8b,_0x2d6bca={};_0x2d6bca['KNvPn']='jest-resolve',_0x2d6bca[_0xd90b5c(0xba)]=_0xd90b5c(0xbd);const _0x36ecd3=_0x2d6bca;try{const _0x1cc2f5=helper[_0xd90b5c(0xff)](_0x36ecd3[_0xd90b5c(0x118)]);if(_0x1cc2f5['resolveTestEnvironment'])return _0x1cc2f5[_0xd90b5c(0xed)];const _0x11d630=helper[_0xd90b5c(0xff)](_0x36ecd3['VKMYh']);if(_0x11d630[_0xd90b5c(0xe2)])return _0x11d630[_0xd90b5c(0xe2)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x493fe7=a16_0x1dfc8b,_0x23da72={'vtMXh':function(_0x558156,_0x4b48d7){return _0x558156(_0x4b48d7);},'LaOpE':'node','zCUcT':_0x493fe7(0xf4),'CzZII':function(_0x59857a,_0x31a3f1){return _0x59857a(_0x31a3f1);}},_0x50fcc4=_0x23da72['vtMXh'](getTestEnvironment,{'rootDir':process[_0x493fe7(0x10c)](),'testEnvironment':process[_0x493fe7(0xc9)][_0x493fe7(0xbe)]||_0x23da72[_0x493fe7(0x116)]});if(!_0x50fcc4)return _0x23da72['vtMXh'](_interopRequireDefault,helper['requireModule'](_0x23da72[_0x493fe7(0xb1)]));return _0x23da72[_0x493fe7(0xe0)](_interopRequireDefault,helper[_0x493fe7(0xff)](_0x50fcc4));})()),_seleniumWebdriver2=((()=>{const _0x534a15=a16_0x1dfc8b,_0x44954a={'wRFmR':function(_0x47a46b,_0x13a215){return _0x47a46b(_0x13a215);}};try{const _0x15e9c6=helper[_0x534a15(0xf8)]();return helper['modifyCommand'](),_0x44954a['wRFmR'](_interopRequireDefault,_0x15e9c6);}catch{return null;}})());function a16_0x445c(_0x43e7ef,_0x3c301f){const _0x29edc5=a16_0x29ed();return a16_0x445c=function(_0x445cd0,_0x31f963){_0x445cd0=_0x445cd0-0xaf;let _0x4bb595=_0x29edc5[_0x445cd0];return _0x4bb595;},a16_0x445c(_0x43e7ef,_0x3c301f);}function _interopRequireDefault(_0x30c0cb){const _0x48775d=a16_0x1dfc8b;return _0x30c0cb&&_0x30c0cb[_0x48775d(0xe9)]?_0x30c0cb:{'default':_0x30c0cb};}function a16_0x29ed(){const _0x3ec300=['BSTACK_JEST_TEST_ENV','failFastOptions','../../../helpers/test-observability/requestQueueHandler','builder','split','testEnvironmentOptions','registerListeners','MyAmJ','failFastActive','fCYAk','\x20>\x20','env','PhFHS','__platformCaps','testPath','test','skipSessionStatus','ylVuQ','isTrue','../../../index','15875232GKROpT','FRAMEWORKS','rXgRv','Builder','global','info','pmrxh','framework','GVbjC','mode','CoZWE','testContext','10846RPhplx','125DWrDKe','CzZII','YFUxr','getTestEnvironment','percyCaptureMode','YbKXs','platformCaps','../../../helpers/testhub/utils','13642390DVbYuQ','isBrowserstackInfra','__esModule','debug','browserstackAgentV2','1168385PcJtwZ','resolveTestEnvironment','failFast','sessionNameProvided','nestedKeyValue','JEST','HoqyF','timeout__','jest-environment-node','1140788tgtQjF','message','getInstance','requireSeleniumWebdriver','3lZxiap','teardown','Nsdcq','cleanup','percy','11wgXsiI','requireModule','winstonLogger','aocmD','Error\x20in\x20fail-fast\x20test_done\x20handler:','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','../../utils/constants','BSTACK_DELTA','__drivers','2543067dnNVaC','__skipSessionStatus','2|8|5|0|6|1|3|7|9|4','htWoP','rdTMg','cwd','skip','handleTestEvent','browserstackPercyBestPlatform','shouldProcessEventForTesthub','buildName','TENtJ','__timeout','../../../helpers/test-orchestration/failfastManager','qrnad','LaOpE','200368PXufXe','KNvPn','projectName','__webdriver','12LXtStA','capability','shutdown','browserStackPercyOptions','QuTVX','errors','dNswI','zCUcT','24bSIFDE','vDpvw','../../../helpers/helper','shouldFailFast','projectConfig','nbybR','kLYCE','../../../helpers/test-observability/utils','VKMYh','configuration','test_done','jest-config'];a16_0x29ed=function(){return _0x3ec300;};return a16_0x29ed();}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2['default'][a16_0x1dfc8b(0xd5)]:null;class CustomEnvironment extends _jestUserEnvironment['default']{constructor(_0x44a299){const _0x114be6=a16_0x1dfc8b,_0x32653a={'PhFHS':'quit','vDpvw':function(_0x27319f,_0x261cd4){return _0x27319f+_0x261cd4;},'MyAmJ':'bstack:options','pmrxh':function(_0x3a3a0a,_0xb96350){return _0x3a3a0a(_0xb96350);},'iKdcU':_0x114be6(0x114),'HoqyF':_0x114be6(0x109),'GVbjC':'testEnvironmentOptions','rdTMg':_0x114be6(0x11e),'kLYCE':_0x114be6(0x10f),'fCYAk':'percyCaptureMode','aocmD':_0x114be6(0xe5),'htWoP':_0x114be6(0xfd),'QuTVX':_0x114be6(0xd1)};super(_0x44a299),this['global'][_0x114be6(0x113)]=0x0,this[_0x114be6(0xbb)]={};!_0x44a299[_0x114be6(0xc3)]&&(_0x44a299[_0x114be6(0xc3)]={});if(helper[_0x114be6(0xe8)]()){_0x44a299['testEnvironmentOptions']=_0x44a299[_0x114be6(0xb6)]?_0x44a299[_0x114be6(0xb6)][_0x114be6(0xc3)]:_0x44a299['testEnvironmentOptions'],this[_0x114be6(0xc1)]=new _seleniumWebdriver2['default'][(_0x114be6(0xd5))](),this['capability']=_0x44a299[_0x114be6(0xb6)]?_0x44a299['projectConfig'][_0x114be6(0x11c)]:_0x44a299['capability'],this['global'][_0x114be6(0x113)]=_0x32653a[_0x114be6(0xb3)](this[_0x114be6(0xbb)][_0x114be6(0xf3)],constants[_0x114be6(0x105)]),this[_0x114be6(0xbf)]=_0x44a299['testEnvironmentOptions'][_0x114be6(0xee)];if(this[_0x114be6(0xbf)]){const _0x53627a=this[_0x114be6(0x11c)][_0x32653a['MyAmJ']]?.[_0x114be6(0x111)]||'',_0x5499aa=this[_0x114be6(0x11c)][_0x32653a[_0x114be6(0xc5)]]?.[_0x114be6(0x119)]||'';this[_0x114be6(0xee)]=new(_0x32653a[_0x114be6(0xd8)](require,_0x32653a['iKdcU']))(this[_0x114be6(0xbf)],_0x53627a,_0x5499aa),this[_0x114be6(0xd6)][_0x114be6(0xc6)]=![];}helper['isNotUndefined'](this['configuration']['retries__'])&&(this[_0x114be6(0xd6)]['__jestRetries']=this[_0x114be6(0xbb)]['retries__']);}if(testhubUtils['shouldProcessEventForTesthub']()){const _0x15089f=new ObservabilityReporter();_0x15089f[_0x114be6(0xc4)]();}this[_0x114be6(0xd6)]['browserStackGlobals']={},this[_0x114be6(0xbb)]=_0x44a299[_0x114be6(0xc3)],this[_0x114be6(0xbb)][_0x114be6(0xd9)]=constants[_0x114be6(0xd3)][_0x114be6(0xf1)];if(_seleniumWebdriver2){const _0x1b6250=_0x32653a[_0x114be6(0xf2)][_0x114be6(0xc2)]('|');let _0x53af72=0x0;while(!![]){switch(_0x1b6250[_0x53af72++]){case'0':this['global'][_0x114be6(0x10f)]=helper[_0x114be6(0xf0)](_0x44a299,[_0x32653a['GVbjC'],_0x32653a['rdTMg'],_0x32653a[_0x114be6(0xb8)]]);continue;case'1':this[_0x114be6(0xd6)][_0x114be6(0xe3)]=helper[_0x114be6(0xf0)](_0x44a299,[_0x32653a[_0x114be6(0xda)],_0x32653a['rdTMg'],_0x32653a[_0x114be6(0xc7)]]);continue;case'2':this[_0x114be6(0xd6)][_0x114be6(0x106)]=[];continue;case'3':this['global'][_0x114be6(0xcb)]=helper[_0x114be6(0xf0)](this[_0x114be6(0xbb)],[_0x32653a[_0x114be6(0x101)],this[_0x114be6(0xd6)]['browserstackPlatformIndex']])||{};continue;case'4':this[_0x114be6(0xd6)]['cleanup']=async()=>{const _0xc34b7e=_0x114be6;await this['global']['driver']['quit'](_0x32653a[_0xc34b7e(0xca)]);};continue;case'5':this[_0x114be6(0xd6)]['browserstackPlatformIndex']=(_0x44a299[_0x114be6(0xb6)]?_0x44a299[_0x114be6(0xb6)]['browserstackPlatformIndex']:_0x44a299['browserstackPlatformIndex'])||0x0;continue;case'6':this[_0x114be6(0xd6)][_0x114be6(0xfd)]=helper[_0x114be6(0xf0)](_0x44a299,[_0x32653a[_0x114be6(0xda)],_0x32653a[_0x114be6(0x10b)],_0x32653a[_0x114be6(0x10a)]]);continue;case'7':helper[_0x114be6(0xd0)](this['configuration']['skipSessionName'])?this['global'][_0x114be6(0xef)]=!![]:this[_0x114be6(0xd6)][_0x114be6(0xef)]=![];continue;case'8':this[_0x114be6(0xd6)][_0x114be6(0x11a)]=_0x32653a['pmrxh'](require,_0x32653a[_0x114be6(0x11f)])[_0x114be6(0xeb)]({...this[_0x114be6(0xbb)],'capability':this[_0x114be6(0x11c)]||{}},this,testhubUtils[_0x114be6(0x110)]());continue;case'9':this[_0x114be6(0xd6)][_0x114be6(0x108)]=helper[_0x114be6(0xd0)](this[_0x114be6(0xbb)][_0x114be6(0xce)]);continue;}break;}}}async[a16_0x1dfc8b(0xfa)](){const _0x424be9=a16_0x1dfc8b;_seleniumWebdriver2&&(await helper['cleanupDrivers'](this[_0x424be9(0xd6)]['__driversArray']),this['global'][_0x424be9(0x11a)][_0x424be9(0xd5)]=originalBuilder),await RequestQueueHandler[_0x424be9(0xf7)]()[_0x424be9(0x11d)]();}async['setup'](){}async[a16_0x1dfc8b(0x10e)](_0x1b29f4,_0x3a1cac){const _0x1fd852=a16_0x1dfc8b,_0x14b636={};_0x14b636['nbybR']=function(_0x897481,_0x4a6b6f){return _0x897481===_0x4a6b6f;},_0x14b636[_0x1fd852(0x115)]='test_start',_0x14b636[_0x1fd852(0xe4)]=_0x1fd852(0x10d),_0x14b636[_0x1fd852(0xb0)]=function(_0x4a96c7,_0x4ff41d){return _0x4a96c7===_0x4ff41d;},_0x14b636[_0x1fd852(0x112)]=_0x1fd852(0xbc),_0x14b636[_0x1fd852(0xd4)]=_0x1fd852(0xc8),_0x14b636[_0x1fd852(0xfb)]=function(_0x3010fc,_0x3dc381){return _0x3010fc===_0x3dc381;},_0x14b636[_0x1fd852(0xcf)]=function(_0x4795f8,_0x3a24ef){return _0x4795f8===_0x3a24ef;},_0x14b636[_0x1fd852(0xe1)]=_0x1fd852(0x102),_0x14b636[_0x1fd852(0xdc)]=_0x1fd852(0xfa);const _0x5aa873=_0x14b636,{name:_0x44d6fb}=_0x1b29f4;if(_0x5aa873[_0x1fd852(0xb7)](_0x44d6fb,_0x5aa873[_0x1fd852(0x115)])){this[_0x1fd852(0xd6)][_0x1fd852(0xdd)]=_0x1b29f4[_0x1fd852(0xcd)];if(_0x5aa873['nbybR'](this[_0x1fd852(0xd6)][_0x1fd852(0xc6)],!![])){const _0x238f18=_0x1b29f4[_0x1fd852(0xcd)]['name'];logger[_0x1fd852(0xd7)](_0x1fd852(0x103)+_0x238f18),_0x1b29f4[_0x1fd852(0xcd)][_0x1fd852(0xdb)]=_0x5aa873['YbKXs'];}}if(this[_0x1fd852(0xee)]&&_0x5aa873[_0x1fd852(0xb0)](_0x44d6fb,_0x5aa873[_0x1fd852(0x112)]))try{const _0x34e9d8=_0x1b29f4[_0x1fd852(0xcd)][_0x1fd852(0xcc)]['join'](_0x5aa873[_0x1fd852(0xd4)]),_0x186ac8=_0x1b29f4['test'][_0x1fd852(0xaf)];await this[_0x1fd852(0xee)]['onTestDone'](_0x34e9d8,_0x186ac8);const _0x4103c4=await this['failFast'][_0x1fd852(0xb5)]();_0x5aa873[_0x1fd852(0xfb)](this[_0x1fd852(0xd6)][_0x1fd852(0xc6)],![])&&_0x5aa873[_0x1fd852(0xcf)](_0x4103c4,!![])&&(this[_0x1fd852(0xd6)]['failFastActive']=!![]);}catch(_0x11c733){logger[_0x1fd852(0xea)](_0x5aa873['YFUxr'],_0x11c733[_0x1fd852(0xf6)]);}_0x5aa873[_0x1fd852(0xfb)](_0x44d6fb,_0x5aa873[_0x1fd852(0xdc)])&&(this[_0x1fd852(0xee)]&&this['failFast'][_0x1fd852(0xfc)]());}}module['exports']=CustomEnvironment;