const a16_0x28ad51=a16_0x4b5a;(function(_0x2d5ec9,_0x45c3e2){const _0x26c3e5=a16_0x4b5a,_0x474e7c=_0x2d5ec9();while(!![]){try{const _0xb20319=parseInt(_0x26c3e5(0x169))/0x1+parseInt(_0x26c3e5(0x146))/0x2*(-parseInt(_0x26c3e5(0x174))/0x3)+parseInt(_0x26c3e5(0x14c))/0x4*(parseInt(_0x26c3e5(0x112))/0x5)+parseInt(_0x26c3e5(0x15a))/0x6+parseInt(_0x26c3e5(0x149))/0x7+-parseInt(_0x26c3e5(0x172))/0x8+parseInt(_0x26c3e5(0x16e))/0x9;if(_0xb20319===_0x45c3e2)break;else _0x474e7c['push'](_0x474e7c['shift']());}catch(_0x24600a){_0x474e7c['push'](_0x474e7c['shift']());}}}(a16_0x3d41,0x659b3));function a16_0x4b5a(_0x1e6359,_0xd8b4f3){const _0x3d4132=a16_0x3d41();return a16_0x4b5a=function(_0x4b5a30,_0x5ec9bc){_0x4b5a30=_0x4b5a30-0x10b;let _0x4e8b33=_0x3d4132[_0x4b5a30];return _0x4e8b33;},a16_0x4b5a(_0x1e6359,_0xd8b4f3);}const helper=require(a16_0x28ad51(0x15c)),constants=require('../../utils/constants'),{isTestObservabilitySession}=require('../../../helpers/test-observability/utils'),RequestQueueHandler=require(a16_0x28ad51(0x11b)),ObservabilityReporter=require(a16_0x28ad51(0x148)),testhubUtils=require(a16_0x28ad51(0x177)),logger=require(a16_0x28ad51(0x126))[a16_0x28ad51(0x163)],getTestEnvironment=((()=>{const _0x3fd9c9=a16_0x28ad51,_0x3fd5b3={};_0x3fd5b3['xiBae']=_0x3fd9c9(0x11a),_0x3fd5b3[_0x3fd9c9(0x142)]='jest-config';const _0xecd165=_0x3fd5b3;try{const _0x46b3a9=helper[_0x3fd9c9(0x176)](_0xecd165[_0x3fd9c9(0x130)]);if(_0x46b3a9[_0x3fd9c9(0x119)])return _0x46b3a9[_0x3fd9c9(0x119)];const _0x446f26=helper[_0x3fd9c9(0x176)](_0xecd165['ZTAMU']);if(_0x446f26[_0x3fd9c9(0x13e)])return _0x446f26[_0x3fd9c9(0x13e)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x1f8a8d=a16_0x28ad51,_0x17e7b3={'bPzbD':function(_0x34f34e,_0x27c353){return _0x34f34e(_0x27c353);},'NJrEL':_0x1f8a8d(0x13f),'lVaBF':_0x1f8a8d(0x167)},_0xf565ac=_0x17e7b3[_0x1f8a8d(0x143)](getTestEnvironment,{'rootDir':process['cwd'](),'testEnvironment':process[_0x1f8a8d(0x13a)]['BSTACK_JEST_TEST_ENV']||_0x17e7b3[_0x1f8a8d(0x135)]});if(!_0xf565ac)return _0x17e7b3[_0x1f8a8d(0x143)](_interopRequireDefault,helper[_0x1f8a8d(0x176)](_0x17e7b3[_0x1f8a8d(0x138)]));return _0x17e7b3[_0x1f8a8d(0x143)](_interopRequireDefault,helper['requireModule'](_0xf565ac));})()),_seleniumWebdriver2=((()=>{const _0xbbf6e1=a16_0x28ad51,_0x15fafe={'SgXGf':function(_0x5e034c,_0x2e4346){return _0x5e034c(_0x2e4346);}};try{const _0x3acd30=helper[_0xbbf6e1(0x12f)]();return helper[_0xbbf6e1(0x12a)](),_0x15fafe[_0xbbf6e1(0x173)](_interopRequireDefault,_0x3acd30);}catch{return null;}})());function a16_0x3d41(){const _0x4b58f5=['eQQLg','teardown','ZTAMU','bPzbD','bACem','setup','2wsXXEo','retries__','../test-observability/obsReporter','866194LNZaOz','skipSessionName','testPath','13732fFGmtj','JbLfz','ATqVR','sessionNameProvided','projectName','__jestRetries','skipSessionStatus','test_start','platformCaps','shouldProcessEventForTesthub','global','percy','isTrue','buildName','2684148mIaVch','__platformCaps','../../../helpers/helper','driver','VJCNl','PwRus','timeout__','jqCdh','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','winstonLogger','../../../index','failFastOptions','Error\x20in\x20fail-fast\x20test_done\x20handler:','jest-environment-node','message','45655wjFaHE','kNmPe','handleTestEvent','__webdriver','HiHTn','50859jXiNhp','default','info','cleanup','3189256xrbdPi','SgXGf','586497drEHtp','registerListeners','requireModule','../../../helpers/testhub/utils','browserstackPlatformIndex','skip','DURNp','testEnvironmentOptions','iDzmh','xYJaf','pcABj','mode','565kKXnEB','shutdown','__driversArray','test','nestedKeyValue','bWTfu','projectConfig','resolveTestEnvironment','jest-resolve','../../../helpers/test-observability/requestQueueHandler','XkkNI','AyMXE','test_done','VqBhO','browserStackPercyOptions','failFastActive','BSTACK_DELTA','framework','join','__esModule','../../../helpers/logger','bstack:options','9|8|0|2|3|7|5|1|4|6','quit','modifyCommand','name','yILtR','HIvDo','onTestDone','requireSeleniumWebdriver','xiBae','failFast','browserstackPercyBestPlatform','yRoqv','capability','NJrEL','__drivers','debug','lVaBF','KCRyk','env','configuration','Builder','builder','getTestEnvironment','node'];a16_0x3d41=function(){return _0x4b58f5;};return a16_0x3d41();}function _interopRequireDefault(_0x5dea5b){const _0x205ea3=a16_0x28ad51;return _0x5dea5b&&_0x5dea5b[_0x205ea3(0x125)]?_0x5dea5b:{'default':_0x5dea5b};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0x28ad51(0x16f)][a16_0x28ad51(0x13c)]:null;class CustomEnvironment extends _jestUserEnvironment[a16_0x28ad51(0x16f)]{constructor(_0x1f70c7){const _0x358675=a16_0x28ad51,_0x5e5a2f={'kNmPe':_0x358675(0x129),'DURNp':function(_0x4b409e,_0x3e2807){return _0x4b409e+_0x3e2807;},'eQQLg':_0x358675(0x127),'pcABj':function(_0x19bed4,_0x568042){return _0x19bed4(_0x568042);},'JbLfz':'../../../helpers/test-orchestration/fail-fast/jest','xYJaf':_0x358675(0x128),'bACem':_0x358675(0x10d),'PwRus':_0x358675(0x120),'KCRyk':_0x358675(0x132),'HIvDo':'percy','ATqVR':_0x358675(0x154),'XkkNI':'percyCaptureMode','yRoqv':_0x358675(0x164)};super(_0x1f70c7),this[_0x358675(0x156)]['__timeout']=0x0,this[_0x358675(0x13b)]={};!_0x1f70c7['testEnvironmentOptions']&&(_0x1f70c7[_0x358675(0x10d)]={});if(helper['isBrowserstackInfra']()){_0x1f70c7[_0x358675(0x10d)]=_0x1f70c7[_0x358675(0x118)]?_0x1f70c7[_0x358675(0x118)][_0x358675(0x10d)]:_0x1f70c7['testEnvironmentOptions'],this[_0x358675(0x13d)]=new _seleniumWebdriver2['default']['Builder'](),this['configuration']=_0x1f70c7[_0x358675(0x10d)],this[_0x358675(0x134)]=_0x1f70c7[_0x358675(0x118)]?_0x1f70c7[_0x358675(0x118)][_0x358675(0x134)]:_0x1f70c7[_0x358675(0x134)],this['global']['__timeout']=_0x5e5a2f[_0x358675(0x10c)](this[_0x358675(0x13b)][_0x358675(0x160)],constants[_0x358675(0x122)]),this[_0x358675(0x165)]=_0x1f70c7[_0x358675(0x10d)][_0x358675(0x131)];if(this[_0x358675(0x165)]){const _0x1796dd=this['capability'][_0x5e5a2f[_0x358675(0x140)]]?.[_0x358675(0x159)]||'',_0x1482a5=this[_0x358675(0x134)][_0x5e5a2f['eQQLg']]?.[_0x358675(0x150)]||'';this['failFast']=new(_0x5e5a2f[_0x358675(0x110)](require,_0x5e5a2f[_0x358675(0x14d)]))(this[_0x358675(0x165)],_0x1796dd,_0x1482a5),this[_0x358675(0x156)]['failFastActive']=![];}helper['isNotUndefined'](this[_0x358675(0x13b)][_0x358675(0x147)])&&(this['global'][_0x358675(0x151)]=this['configuration'][_0x358675(0x147)]);}if(testhubUtils[_0x358675(0x155)]()){const _0x4fd613=new ObservabilityReporter();_0x4fd613[_0x358675(0x175)]();}this[_0x358675(0x156)]['browserStackGlobals']={},this[_0x358675(0x13b)][_0x358675(0x123)]=constants['FRAMEWORKS']['JEST'];if(_seleniumWebdriver2){const _0x10632e=_0x5e5a2f[_0x358675(0x10f)]['split']('|');let _0x3a2de2=0x0;while(!![]){switch(_0x10632e[_0x3a2de2++]){case'0':this[_0x358675(0x156)][_0x358675(0x178)]=(_0x1f70c7[_0x358675(0x118)]?_0x1f70c7[_0x358675(0x118)][_0x358675(0x178)]:_0x1f70c7[_0x358675(0x178)])||0x0;continue;case'1':helper[_0x358675(0x158)](this['configuration'][_0x358675(0x14a)])?this[_0x358675(0x156)][_0x358675(0x14f)]=!![]:this[_0x358675(0x156)]['sessionNameProvided']=![];continue;case'2':this[_0x358675(0x156)][_0x358675(0x132)]=helper[_0x358675(0x116)](_0x1f70c7,[_0x5e5a2f[_0x358675(0x144)],_0x5e5a2f[_0x358675(0x15f)],_0x5e5a2f[_0x358675(0x139)]]);continue;case'3':this[_0x358675(0x156)][_0x358675(0x157)]=helper[_0x358675(0x116)](_0x1f70c7,[_0x5e5a2f['bACem'],_0x5e5a2f[_0x358675(0x15f)],_0x5e5a2f[_0x358675(0x12d)]]);continue;case'4':this[_0x358675(0x156)]['__skipSessionStatus']=helper[_0x358675(0x158)](this['configuration'][_0x358675(0x152)]);continue;case'5':this[_0x358675(0x156)][_0x358675(0x15b)]=helper[_0x358675(0x116)](this[_0x358675(0x13b)],[_0x5e5a2f[_0x358675(0x14e)],this[_0x358675(0x156)][_0x358675(0x178)]])||{};continue;case'6':this[_0x358675(0x156)][_0x358675(0x171)]=async()=>{const _0x16c88e=_0x358675;await this[_0x16c88e(0x156)][_0x16c88e(0x15d)][_0x16c88e(0x129)](_0x5e5a2f[_0x16c88e(0x16a)]);};continue;case'7':this[_0x358675(0x156)]['percyCaptureMode']=helper[_0x358675(0x116)](_0x1f70c7,[_0x5e5a2f['bACem'],_0x5e5a2f[_0x358675(0x15f)],_0x5e5a2f[_0x358675(0x11c)]]);continue;case'8':this[_0x358675(0x156)][_0x358675(0x16c)]=_0x5e5a2f['pcABj'](require,_0x5e5a2f[_0x358675(0x133)])['browserstackAgentV2']({...this[_0x358675(0x13b)],'capability':this[_0x358675(0x134)]||{}},this,testhubUtils[_0x358675(0x155)]());continue;case'9':this[_0x358675(0x156)][_0x358675(0x136)]=[];continue;}break;}}}async['teardown'](){const _0x450758=a16_0x28ad51;_seleniumWebdriver2&&(await helper['cleanupDrivers'](this['global'][_0x450758(0x114)]),this[_0x450758(0x156)][_0x450758(0x16c)][_0x450758(0x13c)]=originalBuilder),await RequestQueueHandler['getInstance']()[_0x450758(0x113)]();}async[a16_0x28ad51(0x145)](){}async[a16_0x28ad51(0x16b)](_0x6b5ef4,_0x506910){const _0x4de71e=a16_0x28ad51,_0x34bee8={};_0x34bee8[_0x4de71e(0x117)]=function(_0x1c39d2,_0x931bde){return _0x1c39d2===_0x931bde;},_0x34bee8[_0x4de71e(0x10e)]=_0x4de71e(0x153),_0x34bee8[_0x4de71e(0x12c)]=function(_0x295da5,_0xe1f430){return _0x295da5===_0xe1f430;},_0x34bee8[_0x4de71e(0x16d)]=_0x4de71e(0x10b),_0x34bee8[_0x4de71e(0x11d)]=_0x4de71e(0x11e),_0x34bee8['VJCNl']='\x20>\x20',_0x34bee8[_0x4de71e(0x161)]=_0x4de71e(0x166),_0x34bee8[_0x4de71e(0x11f)]=_0x4de71e(0x141);const _0x1554ee=_0x34bee8,{name:_0x5e506d}=_0x6b5ef4;if(_0x1554ee[_0x4de71e(0x117)](_0x5e506d,_0x1554ee['iDzmh'])){this[_0x4de71e(0x156)]['testContext']=_0x6b5ef4[_0x4de71e(0x115)];if(_0x1554ee[_0x4de71e(0x12c)](this[_0x4de71e(0x156)][_0x4de71e(0x121)],!![])){const _0x3f2d51=_0x6b5ef4[_0x4de71e(0x115)][_0x4de71e(0x12b)];logger[_0x4de71e(0x170)](_0x4de71e(0x162)+_0x3f2d51),_0x6b5ef4[_0x4de71e(0x115)][_0x4de71e(0x111)]=_0x1554ee[_0x4de71e(0x16d)];}}if(this[_0x4de71e(0x131)]&&_0x1554ee[_0x4de71e(0x12c)](_0x5e506d,_0x1554ee[_0x4de71e(0x11d)]))try{const _0x4c34ec=_0x6b5ef4[_0x4de71e(0x115)][_0x4de71e(0x14b)][_0x4de71e(0x124)](_0x1554ee[_0x4de71e(0x15e)]),_0x418f46=_0x6b5ef4[_0x4de71e(0x115)]['errors'];await this[_0x4de71e(0x131)][_0x4de71e(0x12e)](_0x4c34ec,_0x418f46);const _0x105738=await this[_0x4de71e(0x131)]['shouldFailFast']();_0x1554ee[_0x4de71e(0x117)](this['global'][_0x4de71e(0x121)],![])&&_0x1554ee['yILtR'](_0x105738,!![])&&(this[_0x4de71e(0x156)]['failFastActive']=!![]);}catch(_0x341666){logger[_0x4de71e(0x137)](_0x1554ee[_0x4de71e(0x161)],_0x341666[_0x4de71e(0x168)]);}_0x1554ee[_0x4de71e(0x12c)](_0x5e506d,_0x1554ee['VqBhO'])&&(this['failFast']&&this['failFast']['cleanup']());}}module['exports']=CustomEnvironment;