const a16_0x294a76=a16_0x3d1f;function a16_0x1ae5(){const _0x1a8837=['requireSeleniumWebdriver','3806552kRlgmf','requireModule','FTcCW','info','2660vGopyW','browserStackGlobals','winstonLogger','hbvBL','dVKbn','failFastActive','rVZEB','capability','../../../index','168wPvNew','zRrAR','2933kGaObf','GJAxO','default','mode','jestConfig','rYLKP','skip','mFvVG','39iseIwW','__timeout','skipSessionStatus','percyCaptureMode','jest-environment-node','capabilities','failFastOptions','registerListeners','jest-resolve','isNotUndefined','cleanupDrivers','isArray','UBydn','buildName','236349MCjNDn','vSaCg','pqmoh','JyBjB','split','1211441kZddyd','2577RHWkHq','40ftlvlT','platformCaps','timeout__','sessionNameProvided','browserstackAgentV2','projectConfig','join','uJohA','ZRYez','node','gtQXC','__webdriver','shouldFailFast','../../utils/constants','test','__jestRetries','__driversArray','cwd','handleTestEvent','env','jest-config','Wvztf','isTrue','projectName','../../../helpers/test-observability/utils','../test-observability/obsReporter','retries__','modifyCommand','784tiwROa','getInstance','quit','shouldProcessEventForTesthub','browserstackPlatformIndex','bstack:options','configuration','cleanup','__esModule','failFast','percy','skipSessionName','../../../helpers/helper','bjwvE','testPath','../../../helpers/logger','test_start','BSTACK_JEST_TEST_ENV','rKZVW','../../../helpers/test-observability/requestQueueHandler','JEST','12966cxqgaA','setup','FRAMEWORKS','nestedKeyValue','HUTTA','testContext','name','VMwWO','framework','getTestEnvironment','global','cQiqp','KPtHo','browserstackPercyBestPlatform','../../../helpers/testhub/utils','\x20>\x20','1|7|4|5|3|0|2|6','bGlgz','testEnvironmentOptions','3609150CxxHuH','resolveTestEnvironment','teardown','hsddH','Builder'];a16_0x1ae5=function(){return _0x1a8837;};return a16_0x1ae5();}(function(_0x5e3c13,_0x46b3d1){const _0x3ca182=a16_0x3d1f,_0xd3156f=_0x5e3c13();while(!![]){try{const _0x1985d2=parseInt(_0x3ca182(0x12c))/0x1*(parseInt(_0x3ca182(0xd3))/0x2)+-parseInt(_0x3ca182(0x118))/0x3*(-parseInt(_0x3ca182(0x105))/0x4)+-parseInt(_0x3ca182(0xfb))/0x5+parseInt(_0x3ca182(0xe8))/0x6*(-parseInt(_0x3ca182(0x110))/0x7)+-parseInt(_0x3ca182(0x101))/0x8+-parseInt(_0x3ca182(0x126))/0x9*(-parseInt(_0x3ca182(0x12d))/0xa)+parseInt(_0x3ca182(0x12b))/0xb*(parseInt(_0x3ca182(0x10e))/0xc);if(_0x1985d2===_0x46b3d1)break;else _0xd3156f['push'](_0xd3156f['shift']());}catch(_0x5aab02){_0xd3156f['push'](_0xd3156f['shift']());}}}(a16_0x1ae5,0x895a7));const helper=require(a16_0x294a76(0xdf)),constants=require(a16_0x294a76(0xc4)),{isTestObservabilitySession}=require(a16_0x294a76(0xcf)),RequestQueueHandler=require(a16_0x294a76(0xe6)),ObservabilityReporter=require(a16_0x294a76(0xd0)),testhubUtils=require(a16_0x294a76(0xf6)),logger=require(a16_0x294a76(0xe2))[a16_0x294a76(0x107)],getTestEnvironment=((()=>{const _0x3fdc41=a16_0x294a76,_0x46e2a8={};_0x46e2a8[_0x3fdc41(0xc1)]=_0x3fdc41(0x120),_0x46e2a8['PKzOk']=_0x3fdc41(0xcb);const _0x2e5cea=_0x46e2a8;try{const _0x28e266=helper[_0x3fdc41(0x102)](_0x2e5cea[_0x3fdc41(0xc1)]);if(_0x28e266['resolveTestEnvironment'])return _0x28e266[_0x3fdc41(0xfc)];const _0x3a4736=helper[_0x3fdc41(0x102)](_0x2e5cea['PKzOk']);if(_0x3a4736[_0x3fdc41(0xf1)])return _0x3a4736['getTestEnvironment'];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x29f69e=a16_0x294a76,_0x22ddd9={'Wvztf':function(_0x32b2fb,_0xab0fee){return _0x32b2fb(_0xab0fee);},'mFvVG':_0x29f69e(0xc0),'WgmAJ':function(_0x58d857,_0x4081ea){return _0x58d857(_0x4081ea);},'hbvBL':_0x29f69e(0x11c),'KPtHo':function(_0x39a90a,_0x4b8d9b){return _0x39a90a(_0x4b8d9b);}},_0x421d0a=_0x22ddd9[_0x29f69e(0xcc)](getTestEnvironment,{'rootDir':process[_0x29f69e(0xc8)](),'testEnvironment':process[_0x29f69e(0xca)][_0x29f69e(0xe4)]||_0x22ddd9[_0x29f69e(0x117)]});if(!_0x421d0a)return _0x22ddd9['WgmAJ'](_interopRequireDefault,helper[_0x29f69e(0x102)](_0x22ddd9[_0x29f69e(0x108)]));return _0x22ddd9[_0x29f69e(0xf4)](_interopRequireDefault,helper[_0x29f69e(0x102)](_0x421d0a));})()),_seleniumWebdriver2=((()=>{const _0x4c5263=a16_0x294a76,_0x3ff916={'hsddH':function(_0x4b94dd,_0x110d69){return _0x4b94dd(_0x110d69);}};try{const _0x2a1ecd=helper[_0x4c5263(0x100)]();return helper[_0x4c5263(0xd2)](),_0x3ff916[_0x4c5263(0xfe)](_interopRequireDefault,_0x2a1ecd);}catch{return null;}})());function _interopRequireDefault(_0x4a6c45){const _0x472b37=a16_0x294a76;return _0x4a6c45&&_0x4a6c45[_0x472b37(0xdb)]?_0x4a6c45:{'default':_0x4a6c45};}function a16_0x3d1f(_0x157522,_0x3287ff){const _0x1ae5bf=a16_0x1ae5();return a16_0x3d1f=function(_0x3d1fec,_0x1cada3){_0x3d1fec=_0x3d1fec-0xb8;let _0x3015d4=_0x1ae5bf[_0x3d1fec];return _0x3015d4;},a16_0x3d1f(_0x157522,_0x3287ff);}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0x294a76(0x112)]['Builder']:null;class CustomEnvironment extends _jestUserEnvironment[a16_0x294a76(0x112)]{constructor(_0x3efa75){const _0x3e3b10=a16_0x294a76,_0x287b84={'GJAxO':_0x3e3b10(0xd5),'pqmoh':function(_0x403c68,_0x2123eb){return _0x403c68+_0x2123eb;},'bjwvE':_0x3e3b10(0xd8),'wmzqY':function(_0x720ee4,_0x51c409){return _0x720ee4(_0x51c409);},'bGlgz':'../../../helpers/test-orchestration/failfastManager','zRrAR':_0x3e3b10(0xf8),'rYLKP':'testEnvironmentOptions','cQiqp':'browserStackPercyOptions','VMwWO':'percyCaptureMode','rKZVW':_0x3e3b10(0xf5),'uJohA':'percy','FTcCW':function(_0x7128c,_0xcdf2f9){return _0x7128c(_0xcdf2f9);},'rVZEB':_0x3e3b10(0x10d)};super(_0x3efa75),this[_0x3e3b10(0xf2)][_0x3e3b10(0x119)]=0x0,this[_0x3e3b10(0xd9)]={};!_0x3efa75['testEnvironmentOptions']&&(_0x3efa75[_0x3e3b10(0xfa)]={});if(helper['isBrowserstackInfra']()){_0x3efa75[_0x3e3b10(0xfa)]=_0x3efa75['projectConfig']?_0x3efa75[_0x3e3b10(0xbc)][_0x3e3b10(0xfa)]:_0x3efa75[_0x3e3b10(0xfa)];_seleniumWebdriver2&&(this['builder']=new _seleniumWebdriver2[(_0x3e3b10(0x112))][(_0x3e3b10(0xff))]());this[_0x3e3b10(0x10c)]=_0x3efa75[_0x3e3b10(0xbc)]?_0x3efa75['projectConfig'][_0x3e3b10(0x10c)]:_0x3efa75[_0x3e3b10(0x10c)],this[_0x3e3b10(0xf2)][_0x3e3b10(0x119)]=_0x287b84[_0x3e3b10(0x128)](_0x3efa75[_0x3e3b10(0xfa)][_0x3e3b10(0xb9)]||0x1388,constants['BSTACK_DELTA']),this[_0x3e3b10(0x11e)]=_0x3efa75[_0x3e3b10(0xfa)][_0x3e3b10(0xdc)];if(this[_0x3e3b10(0x11e)]){const _0x368b54=this['capability'][_0x287b84[_0x3e3b10(0xe0)]]?.[_0x3e3b10(0x125)]||'',_0x14e9db=this['capability'][_0x287b84[_0x3e3b10(0xe0)]]?.[_0x3e3b10(0xce)]||'';this[_0x3e3b10(0xdc)]=new(_0x287b84['wmzqY'](require,_0x287b84[_0x3e3b10(0xf9)]))(this[_0x3e3b10(0x11e)],_0x368b54,_0x14e9db),this['global'][_0x3e3b10(0x10a)]=![];}helper[_0x3e3b10(0x121)](_0x3efa75[_0x3e3b10(0xfa)][_0x3e3b10(0xd1)])&&(this[_0x3e3b10(0xf2)][_0x3e3b10(0xc6)]=_0x3efa75['testEnvironmentOptions'][_0x3e3b10(0xd1)]);}if(testhubUtils[_0x3e3b10(0xd6)]()){const _0x21f92e=new ObservabilityReporter();_0x21f92e[_0x3e3b10(0x11f)]();}this['global'][_0x3e3b10(0x106)]={},this[_0x3e3b10(0xd9)]=_0x3efa75[_0x3e3b10(0xfa)],this[_0x3e3b10(0xd9)][_0x3e3b10(0xf0)]=constants[_0x3e3b10(0xea)][_0x3e3b10(0xe7)],this[_0x3e3b10(0xf2)][_0x3e3b10(0xd7)]=(_0x3efa75['projectConfig']?_0x3efa75['projectConfig'][_0x3e3b10(0xd7)]:_0x3efa75[_0x3e3b10(0xd7)])||0x0,this[_0x3e3b10(0xf2)]['__platformCaps']=this['configuration']&&this[_0x3e3b10(0xd9)][_0x3e3b10(0xb8)]&&Array[_0x3e3b10(0x123)](this['configuration']['platformCaps'])&&this[_0x3e3b10(0xd9)][_0x3e3b10(0xb8)][this[_0x3e3b10(0xf2)][_0x3e3b10(0xd7)]]||{};const _0x5ec11c=this[_0x3e3b10(0xf2)][_0x3e3b10(0xd7)],_0x59649f={...this[_0x3e3b10(0xd9)],'capability':this[_0x3e3b10(0xd9)][_0x3e3b10(0x11d)]&&Array[_0x3e3b10(0x123)](this['configuration'][_0x3e3b10(0x11d)])&&this[_0x3e3b10(0xd9)][_0x3e3b10(0x11d)][_0x5ec11c]||{},'platformCaps':this[_0x3e3b10(0xd9)][_0x3e3b10(0xb8)]&&Array[_0x3e3b10(0x123)](this['configuration'][_0x3e3b10(0xb8)])&&this[_0x3e3b10(0xd9)][_0x3e3b10(0xb8)][_0x5ec11c]||{}};delete _0x59649f[_0x3e3b10(0x11d)],this[_0x3e3b10(0xf2)][_0x3e3b10(0x114)]=_0x59649f;if(_seleniumWebdriver2){const _0x62e6cf=_0x287b84[_0x3e3b10(0x10f)][_0x3e3b10(0x12a)]('|');let _0x437a1b=0x0;while(!![]){switch(_0x62e6cf[_0x437a1b++]){case'0':helper[_0x3e3b10(0xcd)](this[_0x3e3b10(0xd9)][_0x3e3b10(0xde)])?this[_0x3e3b10(0xf2)]['sessionNameProvided']=!![]:this[_0x3e3b10(0xf2)][_0x3e3b10(0xba)]=![];continue;case'1':this[_0x3e3b10(0xf2)]['__drivers']=[];continue;case'2':this[_0x3e3b10(0xf2)]['__skipSessionStatus']=helper[_0x3e3b10(0xcd)](this[_0x3e3b10(0xd9)][_0x3e3b10(0x11a)]);continue;case'3':this[_0x3e3b10(0xf2)][_0x3e3b10(0x11b)]=helper[_0x3e3b10(0xeb)](_0x3efa75,[_0x287b84[_0x3e3b10(0x115)],_0x287b84[_0x3e3b10(0xf3)],_0x287b84[_0x3e3b10(0xef)]]);continue;case'4':this['global'][_0x3e3b10(0xf5)]=helper[_0x3e3b10(0xeb)](_0x3efa75,[_0x287b84[_0x3e3b10(0x115)],_0x287b84['cQiqp'],_0x287b84[_0x3e3b10(0xe5)]]);continue;case'5':this[_0x3e3b10(0xf2)][_0x3e3b10(0xdd)]=helper['nestedKeyValue'](_0x3efa75,[_0x287b84[_0x3e3b10(0x115)],_0x287b84[_0x3e3b10(0xf3)],_0x287b84[_0x3e3b10(0xbe)]]);continue;case'6':this['global'][_0x3e3b10(0xda)]=async()=>{const _0x585887=_0x3e3b10;await this[_0x585887(0xf2)]['driver'][_0x585887(0xd5)](_0x287b84[_0x585887(0x111)]);};continue;case'7':this['global'][_0x3e3b10(0xc2)]=_0x287b84[_0x3e3b10(0x103)](require,_0x287b84[_0x3e3b10(0x10b)])[_0x3e3b10(0xbb)]({...this[_0x3e3b10(0xd9)],'capability':this[_0x3e3b10(0x10c)]||{}},this,testhubUtils[_0x3e3b10(0xd6)]());continue;}break;}}}async['teardown'](){const _0x131bbf=a16_0x294a76;_seleniumWebdriver2&&(await helper[_0x131bbf(0x122)](this['global'][_0x131bbf(0xc7)]),this['global'][_0x131bbf(0xc2)][_0x131bbf(0xff)]=originalBuilder),await RequestQueueHandler[_0x131bbf(0xd4)]()['shutdown']();}async[a16_0x294a76(0xe9)](){}async[a16_0x294a76(0xc9)](_0x47e235,_0x3abdad){const _0x18348b=a16_0x294a76,_0x194881={};_0x194881[_0x18348b(0xec)]=function(_0x5c8d3d,_0x55813d){return _0x5c8d3d===_0x55813d;},_0x194881[_0x18348b(0x109)]=_0x18348b(0xe3),_0x194881[_0x18348b(0x124)]=_0x18348b(0x116),_0x194881['ZRYez']='test_done',_0x194881[_0x18348b(0x129)]=_0x18348b(0xf7),_0x194881[_0x18348b(0x127)]='Error\x20in\x20fail-fast\x20test_done\x20handler:',_0x194881['YoqAZ']=_0x18348b(0xfd);const _0x5beeac=_0x194881,{name:_0x1bf909}=_0x47e235;if(_0x5beeac[_0x18348b(0xec)](_0x1bf909,_0x5beeac['dVKbn'])){this[_0x18348b(0xf2)][_0x18348b(0xed)]=_0x47e235[_0x18348b(0xc5)];if(_0x5beeac[_0x18348b(0xec)](this[_0x18348b(0xf2)]['failFastActive'],!![])){const _0x1a4310=_0x47e235['test'][_0x18348b(0xee)];logger[_0x18348b(0x104)]('Fail-fast\x20is\x20active,\x20skipping\x20test::\x20'+_0x1a4310),_0x47e235[_0x18348b(0xc5)][_0x18348b(0x113)]=_0x5beeac[_0x18348b(0x124)];}}if(this[_0x18348b(0xdc)]&&_0x5beeac['HUTTA'](_0x1bf909,_0x5beeac[_0x18348b(0xbf)]))try{const _0x4214a0=_0x47e235[_0x18348b(0xc5)][_0x18348b(0xe1)][_0x18348b(0xbd)](_0x5beeac[_0x18348b(0x129)]),_0x563865=_0x47e235[_0x18348b(0xc5)]['errors'];await this['failFast']['onTestDone'](_0x4214a0,_0x563865);const _0x5f5a1c=await this['failFast'][_0x18348b(0xc3)]();_0x5beeac[_0x18348b(0xec)](this[_0x18348b(0xf2)][_0x18348b(0x10a)],![])&&_0x5beeac['HUTTA'](_0x5f5a1c,!![])&&(this[_0x18348b(0xf2)][_0x18348b(0x10a)]=!![]);}catch(_0x199963){logger['debug'](_0x5beeac[_0x18348b(0x127)],_0x199963['message']);}_0x5beeac[_0x18348b(0xec)](_0x1bf909,_0x5beeac['YoqAZ'])&&(this[_0x18348b(0xdc)]&&this['failFast'][_0x18348b(0xda)]());}}module['exports']=CustomEnvironment;