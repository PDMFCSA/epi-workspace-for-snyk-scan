const a16_0x3392bc=a16_0x20b4;(function(_0x57f6b5,_0x5cb1fa){const _0x484d16=a16_0x20b4,_0xd0b19b=_0x57f6b5();while(!![]){try{const _0x162dad=-parseInt(_0x484d16(0xc2))/0x1*(-parseInt(_0x484d16(0x9a))/0x2)+-parseInt(_0x484d16(0x86))/0x3*(parseInt(_0x484d16(0x9c))/0x4)+parseInt(_0x484d16(0xc3))/0x5+-parseInt(_0x484d16(0xcc))/0x6+parseInt(_0x484d16(0xc5))/0x7+-parseInt(_0x484d16(0xa6))/0x8+parseInt(_0x484d16(0xa1))/0x9*(parseInt(_0x484d16(0x85))/0xa);if(_0x162dad===_0x5cb1fa)break;else _0xd0b19b['push'](_0xd0b19b['shift']());}catch(_0x24cd16){_0xd0b19b['push'](_0xd0b19b['shift']());}}}(a16_0x512a,0xbf8d6));function a16_0x20b4(_0x2e7d6b,_0x485dc6){const _0x512a0c=a16_0x512a();return a16_0x20b4=function(_0x20b4ac,_0x1edfb7){_0x20b4ac=_0x20b4ac-0x7a;let _0x57ac1a=_0x512a0c[_0x20b4ac];return _0x57ac1a;},a16_0x20b4(_0x2e7d6b,_0x485dc6);}const helper=require('../../../helpers/helper'),constants=require(a16_0x3392bc(0xbb)),{isTestObservabilitySession}=require(a16_0x3392bc(0x9f)),RequestQueueHandler=require(a16_0x3392bc(0xbe)),ObservabilityReporter=require(a16_0x3392bc(0xa0)),testhubUtils=require(a16_0x3392bc(0x9d)),getTestEnvironment=((()=>{const _0x16a400=a16_0x3392bc,_0x1c2381={};_0x1c2381[_0x16a400(0x8b)]=_0x16a400(0x99),_0x1c2381[_0x16a400(0xd1)]='jest-config';const _0x1172f4=_0x1c2381;try{const _0x521860=helper[_0x16a400(0xb2)](_0x1172f4[_0x16a400(0x8b)]);if(_0x521860[_0x16a400(0x7e)])return _0x521860[_0x16a400(0x7e)];const _0x2ed747=helper[_0x16a400(0xb2)](_0x1172f4[_0x16a400(0xd1)]);if(_0x2ed747[_0x16a400(0xc8)])return _0x2ed747['getTestEnvironment'];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x26507c=a16_0x3392bc,_0xc46faa={'yyoPk':function(_0x329d87,_0x533e34){return _0x329d87(_0x533e34);},'KYBqZ':_0x26507c(0x93),'KIzTk':function(_0x3c9eb4,_0x202556){return _0x3c9eb4(_0x202556);},'orYmC':'jest-environment-node','pDPRZ':function(_0x2d055a,_0x342497){return _0x2d055a(_0x342497);}},_0x1056ed=_0xc46faa['yyoPk'](getTestEnvironment,{'rootDir':process[_0x26507c(0xb3)](),'testEnvironment':process[_0x26507c(0xc4)][_0x26507c(0xa8)]||_0xc46faa[_0x26507c(0xa3)]});if(!_0x1056ed)return _0xc46faa[_0x26507c(0xbc)](_interopRequireDefault,helper['requireModule'](_0xc46faa[_0x26507c(0x81)]));return _0xc46faa['pDPRZ'](_interopRequireDefault,helper[_0x26507c(0xb2)](_0x1056ed));})()),_seleniumWebdriver2=((()=>{const _0x5358bc=a16_0x3392bc,_0x1fd650={'gwDvp':function(_0x3b64a6,_0x3808c6){return _0x3b64a6(_0x3808c6);}};try{const _0x42272e=helper[_0x5358bc(0x8d)]();return helper['modifyCommand'](),_0x1fd650[_0x5358bc(0xa9)](_interopRequireDefault,_0x42272e);}catch{return null;}})());function _interopRequireDefault(_0x591fd8){const _0xf6e961=a16_0x3392bc;return _0x591fd8&&_0x591fd8[_0xf6e961(0xc0)]?_0x591fd8:{'default':_0x591fd8};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0x3392bc(0x7f)][a16_0x3392bc(0x91)]:null;class CustomEnvironment extends _jestUserEnvironment['default']{constructor(_0x738cf5){const _0x4d40b2=a16_0x3392bc,_0x38423f={'OJhTL':'quit','wzEAu':'1|0|5|2|3|4','HCdoQ':function(_0x5b5e42,_0x106820){return _0x5b5e42+_0x106820;},'avUTJ':_0x4d40b2(0xac),'GjGVS':_0x4d40b2(0xa2),'QIeMP':_0x4d40b2(0x8c),'xoIjt':'percyCaptureMode','ZHGWh':_0x4d40b2(0xae),'pYoPj':_0x4d40b2(0x7c),'uFJrQ':function(_0xd480ef,_0x1da936){return _0xd480ef(_0x1da936);},'uzFkU':_0x4d40b2(0xc6),'gRWxG':_0x4d40b2(0xcb)};super(_0x738cf5),this[_0x4d40b2(0x97)][_0x4d40b2(0xc9)]=0x0,this[_0x4d40b2(0xbf)]={};!_0x738cf5[_0x4d40b2(0xa2)]&&(_0x738cf5['testEnvironmentOptions']={});if(helper[_0x4d40b2(0x82)]()){const _0xbb3f13=_0x38423f['wzEAu']['split']('|');let _0x52a638=0x0;while(!![]){switch(_0xbb3f13[_0x52a638++]){case'0':this['builder']=new _seleniumWebdriver2[(_0x4d40b2(0x7f))][(_0x4d40b2(0x91))]();continue;case'1':_0x738cf5[_0x4d40b2(0xa2)]=_0x738cf5[_0x4d40b2(0xa7)]?_0x738cf5['projectConfig']['testEnvironmentOptions']:_0x738cf5['testEnvironmentOptions'];continue;case'2':this['capability']=_0x738cf5[_0x4d40b2(0xa7)]?_0x738cf5[_0x4d40b2(0xa7)][_0x4d40b2(0xce)]:_0x738cf5[_0x4d40b2(0xce)];continue;case'3':this[_0x4d40b2(0x97)][_0x4d40b2(0xc9)]=_0x38423f[_0x4d40b2(0xb4)](this['configuration'][_0x4d40b2(0x7a)],constants[_0x4d40b2(0xd2)]);continue;case'4':helper[_0x4d40b2(0xd0)](this[_0x4d40b2(0xbf)][_0x4d40b2(0xaf)])&&(this[_0x4d40b2(0x97)][_0x4d40b2(0xba)]=this[_0x4d40b2(0xbf)][_0x4d40b2(0xaf)]);continue;case'5':this[_0x4d40b2(0xbf)]=_0x738cf5[_0x4d40b2(0xa2)];continue;}break;}}if(testhubUtils[_0x4d40b2(0x84)]()){const _0x31163e=new ObservabilityReporter();_0x31163e[_0x4d40b2(0x83)]();}this[_0x4d40b2(0x97)][_0x4d40b2(0x9b)]={},this[_0x4d40b2(0xbf)][_0x4d40b2(0xc1)]=constants[_0x4d40b2(0xbd)]['JEST'];if(_seleniumWebdriver2){const _0x558a9a=_0x38423f[_0x4d40b2(0x96)][_0x4d40b2(0xb5)]('|');let _0x2e3273=0x0;while(!![]){switch(_0x558a9a[_0x2e3273++]){case'0':this[_0x4d40b2(0x97)][_0x4d40b2(0x94)]=helper[_0x4d40b2(0x90)](_0x738cf5,[_0x38423f[_0x4d40b2(0xb7)],_0x38423f[_0x4d40b2(0xb1)],_0x38423f[_0x4d40b2(0x92)]]);continue;case'1':this[_0x4d40b2(0x97)]['browserstackPlatformIndex']=(_0x738cf5[_0x4d40b2(0xa7)]?_0x738cf5[_0x4d40b2(0xa7)]['browserstackPlatformIndex']:_0x738cf5[_0x4d40b2(0xc7)])||0x0;continue;case'2':this[_0x4d40b2(0x97)][_0x4d40b2(0x80)]=helper[_0x4d40b2(0x90)](this['configuration'],[_0x38423f['ZHGWh'],this[_0x4d40b2(0x97)]['browserstackPlatformIndex']])||{};continue;case'3':this[_0x4d40b2(0x97)]['browserstackPercyBestPlatform']=helper[_0x4d40b2(0x90)](_0x738cf5,[_0x38423f[_0x4d40b2(0xb7)],_0x38423f[_0x4d40b2(0xb1)],_0x38423f[_0x4d40b2(0x8f)]]);continue;case'4':this['global'][_0x4d40b2(0xb0)]=_0x38423f['uFJrQ'](require,_0x38423f[_0x4d40b2(0x95)])[_0x4d40b2(0x98)]({...this[_0x4d40b2(0xbf)],'capability':this[_0x4d40b2(0xce)]||{}},this,testhubUtils[_0x4d40b2(0x84)]());continue;case'5':this[_0x4d40b2(0x97)][_0x4d40b2(0xcb)]=helper[_0x4d40b2(0x90)](_0x738cf5,[_0x38423f[_0x4d40b2(0xb7)],_0x38423f[_0x4d40b2(0xb1)],_0x38423f[_0x4d40b2(0xab)]]);continue;case'6':this[_0x4d40b2(0x97)]['__skipSessionStatus']=helper[_0x4d40b2(0x8a)](this[_0x4d40b2(0xbf)][_0x4d40b2(0xad)]);continue;case'7':helper[_0x4d40b2(0x8a)](this[_0x4d40b2(0xbf)]['skipSessionName'])?this[_0x4d40b2(0x97)][_0x4d40b2(0xb6)]=!![]:this[_0x4d40b2(0x97)][_0x4d40b2(0xb6)]=![];continue;case'8':this[_0x4d40b2(0x97)]['cleanup']=async()=>{const _0x385885=_0x4d40b2;await this[_0x385885(0x97)][_0x385885(0x89)][_0x385885(0xb8)](_0x38423f[_0x385885(0x87)]);};continue;case'9':this[_0x4d40b2(0x97)][_0x4d40b2(0xca)]=[];continue;}break;}}}async[a16_0x3392bc(0xaa)](){const _0x4127b5=a16_0x3392bc;_seleniumWebdriver2&&(await helper[_0x4127b5(0x9e)](this['global']['__driversArray']),this[_0x4127b5(0x97)][_0x4127b5(0xb0)]['Builder']=originalBuilder),await RequestQueueHandler[_0x4127b5(0xa5)]()[_0x4127b5(0x7d)]();}async[a16_0x3392bc(0xcf)](){}async[a16_0x3392bc(0x7b)](_0x5016a3,_0x117258){const _0xbfb01e=a16_0x3392bc,_0x4845be={};_0x4845be['FDhUI']=function(_0x1d7878,_0x49fff1){return _0x1d7878===_0x49fff1;},_0x4845be['KLBRK']=_0xbfb01e(0xb9);const _0x141005=_0x4845be,{name:_0x254c75}=_0x5016a3;_0x141005[_0xbfb01e(0xcd)](_0x254c75,_0x141005[_0xbfb01e(0xa4)])&&(this[_0xbfb01e(0x97)][_0xbfb01e(0x8e)]=_0x5016a3[_0xbfb01e(0x88)]);}}function a16_0x512a(){const _0xf19c7c=['20kHpKEo','195edDrau','OJhTL','test','driver','isTrue','akncV','browserStackPercyOptions','requireSeleniumWebdriver','testContext','pYoPj','nestedKeyValue','Builder','xoIjt','node','percyCaptureMode','uzFkU','avUTJ','global','browserstackAgentV2','jest-resolve','1636768EHVvHY','browserStackGlobals','71788rMSvsc','../../../helpers/testhub/utils','cleanupDrivers','../../../helpers/test-observability/utils','../test-observability/obsReporter','536850LCSDnN','testEnvironmentOptions','KYBqZ','KLBRK','getInstance','3140200EJHcBO','projectConfig','BSTACK_JEST_TEST_ENV','gwDvp','teardown','gRWxG','9|4|1|3|5|0|2|7|6|8','skipSessionStatus','platformCaps','retries__','__webdriver','QIeMP','requireModule','cwd','HCdoQ','split','sessionNameProvided','GjGVS','quit','test_start','__jestRetries','../../utils/constants','KIzTk','FRAMEWORKS','../../../helpers/test-observability/requestQueueHandler','configuration','__esModule','framework','1UIgXXP','7821160fWLYus','env','179522OMJRwA','../../../index','browserstackPlatformIndex','getTestEnvironment','__timeout','__drivers','percy','1103304rQsnZZ','FDhUI','capability','setup','isNotUndefined','HRKOV','BSTACK_DELTA','timeout__','handleTestEvent','browserstackPercyBestPlatform','shutdown','resolveTestEnvironment','default','__platformCaps','orYmC','isBrowserstackInfra','registerListeners','shouldProcessEventForTesthub'];a16_0x512a=function(){return _0xf19c7c;};return a16_0x512a();}module['exports']=CustomEnvironment;