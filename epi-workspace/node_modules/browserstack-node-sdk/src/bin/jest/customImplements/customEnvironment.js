const a16_0x5ec900=a16_0x1f53;function a16_0x5ed8(){const _0x70e3ea=['failFast','global','__platformCaps','getTestEnvironment','browserStackPercyOptions','cpLkm','../../../index','browserStackGlobals','skipSessionName','jest-resolve','ACgdV','115711qBdaXe','retries__','../../../helpers/test-observability/requestQueueHandler','NsRmL','Error\x20in\x20fail-fast\x20test_done\x20handler:','Guefu','6899310cVvSLh','isTrue','setup','skip','mode','oKnpb','testPath','\x20>\x20','percy','bstack:options','__driversArray','getInstance','node','split','__jestRetries','6099230fgpAgq','20728sjTEBD','1635240KBBxnZ','lHqUQ','../../../helpers/helper','percyCaptureMode','registerListeners','lEMET','onTestDone','default','mcLGU','../../utils/constants','IsenO','projectConfig','../../../helpers/test-observability/utils','__drivers','Builder','iaqrt','platformCaps','info','framework','3|5|9|6|1|0|7|8|4|2','message','eKTzc','join','shouldProcessEventForTesthub','modifyCommand','ZCLVl','test_start','__esModule','buildName','10305mQQGjQ','requireModule','cwd','tVMoG','winstonLogger','4nlvJxn','2877ASMoqb','teardown','quit','projectName','__webdriver','isNotUndefined','bkxJM','test','isBrowserstackInfra','__skipSessionStatus','sessionNameProvided','browserstackAgentV2','10090BdTzif','18YHwDmP','../../../helpers/testhub/utils','name','resolveTestEnvironment','SXaUN','51127494onGxgL','testEnvironmentOptions','env','nestedKeyValue','browserstackPercyBestPlatform','BSTACK_JEST_TEST_ENV','browserstackPlatformIndex','tRhVU','TbRXR','cleanup','PFxXV','capability','requireSeleniumWebdriver','RWTwL','failFastOptions','shutdown','xDRaq','zQWKs','__timeout','failFastActive','xRUIh','configuration','FRAMEWORKS'];a16_0x5ed8=function(){return _0x70e3ea;};return a16_0x5ed8();}(function(_0x179131,_0x87a7f0){const _0x42c535=a16_0x1f53,_0x4b12a9=_0x179131();while(!![]){try{const _0x11a4fe=parseInt(_0x42c535(0x22a))/0x1*(-parseInt(_0x42c535(0x203))/0x2)+-parseInt(_0x42c535(0x1d3))/0x3+parseInt(_0x42c535(0x1f5))/0x4*(parseInt(_0x42c535(0x23f))/0x5)+-parseInt(_0x42c535(0x230))/0x6+-parseInt(_0x42c535(0x1f6))/0x7*(parseInt(_0x42c535(0x1d2))/0x8)+-parseInt(_0x42c535(0x1f0))/0x9*(parseInt(_0x42c535(0x202))/0xa)+parseInt(_0x42c535(0x208))/0xb;if(_0x11a4fe===_0x87a7f0)break;else _0x4b12a9['push'](_0x4b12a9['shift']());}catch(_0x444735){_0x4b12a9['push'](_0x4b12a9['shift']());}}}(a16_0x5ed8,0xde77e));const helper=require(a16_0x5ec900(0x1d5)),constants=require(a16_0x5ec900(0x1dc)),{isTestObservabilitySession}=require(a16_0x5ec900(0x1df)),RequestQueueHandler=require(a16_0x5ec900(0x22c)),ObservabilityReporter=require('../test-observability/obsReporter'),testhubUtils=require(a16_0x5ec900(0x204)),logger=require('../../../helpers/logger')[a16_0x5ec900(0x1f4)],getTestEnvironment=((()=>{const _0x2e0975=a16_0x5ec900,_0x3cdfec={};_0x3cdfec[_0x2e0975(0x207)]=_0x2e0975(0x228),_0x3cdfec['iaqrt']='jest-config';const _0x5706cf=_0x3cdfec;try{const _0x59d042=helper[_0x2e0975(0x1f1)](_0x5706cf[_0x2e0975(0x207)]);if(_0x59d042[_0x2e0975(0x206)])return _0x59d042[_0x2e0975(0x206)];const _0x3553c7=helper[_0x2e0975(0x1f1)](_0x5706cf[_0x2e0975(0x1e2)]);if(_0x3553c7[_0x2e0975(0x222)])return _0x3553c7[_0x2e0975(0x222)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x3f9861=a16_0x5ec900,_0xc8313b={'xDRaq':function(_0x5883f9,_0x3191d0){return _0x5883f9(_0x3191d0);},'FmUnT':_0x3f9861(0x23c),'ACgdV':function(_0x103110,_0x5a8b07){return _0x103110(_0x5a8b07);},'TmzdA':'jest-environment-node','NsRmL':function(_0x26e4fc,_0x4b44f6){return _0x26e4fc(_0x4b44f6);}},_0x1a88ff=_0xc8313b[_0x3f9861(0x218)](getTestEnvironment,{'rootDir':process[_0x3f9861(0x1f2)](),'testEnvironment':process[_0x3f9861(0x20a)][_0x3f9861(0x20d)]||_0xc8313b['FmUnT']});if(!_0x1a88ff)return _0xc8313b[_0x3f9861(0x229)](_interopRequireDefault,helper['requireModule'](_0xc8313b['TmzdA']));return _0xc8313b[_0x3f9861(0x22d)](_interopRequireDefault,helper[_0x3f9861(0x1f1)](_0x1a88ff));})()),_seleniumWebdriver2=((()=>{const _0xc53a59=a16_0x5ec900,_0x3b533a={'xRUIh':function(_0x3e5e05,_0x4ad1be){return _0x3e5e05(_0x4ad1be);}};try{const _0x2766bc=helper[_0xc53a59(0x214)]();return helper[_0xc53a59(0x1eb)](),_0x3b533a[_0xc53a59(0x21c)](_interopRequireDefault,_0x2766bc);}catch{return null;}})());function a16_0x1f53(_0x46958e,_0x293731){const _0x5ed8b0=a16_0x5ed8();return a16_0x1f53=function(_0x1f5377,_0xc6d3e9){_0x1f5377=_0x1f5377-0x1d2;let _0x4b1ed6=_0x5ed8b0[_0x1f5377];return _0x4b1ed6;},a16_0x1f53(_0x46958e,_0x293731);}function _interopRequireDefault(_0x2abbdc){const _0x544426=a16_0x5ec900;return _0x2abbdc&&_0x2abbdc[_0x544426(0x1ee)]?_0x2abbdc:{'default':_0x2abbdc};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0x5ec900(0x1da)]['Builder']:null;class CustomEnvironment extends _jestUserEnvironment[a16_0x5ec900(0x1da)]{constructor(_0x318ba6){const _0x4bcb5c=a16_0x5ec900,_0x489771={'IsenO':'quit','cpLkm':function(_0x2c33e8,_0xa60585){return _0x2c33e8+_0xa60585;},'lHqUQ':_0x4bcb5c(0x239),'tRhVU':function(_0x25a62d,_0x4b5826){return _0x25a62d(_0x4b5826);},'zQWKs':'../../../helpers/test-orchestration/failfastManager','bkxJM':_0x4bcb5c(0x1e6),'tVMoG':_0x4bcb5c(0x209),'lEMET':_0x4bcb5c(0x223),'TbRXR':_0x4bcb5c(0x1d6),'ESdxN':_0x4bcb5c(0x238),'eKTzc':_0x4bcb5c(0x225),'PFxXV':_0x4bcb5c(0x20c),'oKnpb':_0x4bcb5c(0x1e3)};super(_0x318ba6),this[_0x4bcb5c(0x220)][_0x4bcb5c(0x21a)]=0x0,this['configuration']={};!_0x318ba6[_0x4bcb5c(0x209)]&&(_0x318ba6[_0x4bcb5c(0x209)]={});if(helper[_0x4bcb5c(0x1fe)]()){_0x318ba6[_0x4bcb5c(0x209)]=_0x318ba6[_0x4bcb5c(0x1de)]?_0x318ba6['projectConfig'][_0x4bcb5c(0x209)]:_0x318ba6[_0x4bcb5c(0x209)],this['builder']=new _seleniumWebdriver2['default']['Builder'](),this[_0x4bcb5c(0x213)]=_0x318ba6['projectConfig']?_0x318ba6['projectConfig'][_0x4bcb5c(0x213)]:_0x318ba6[_0x4bcb5c(0x213)],this[_0x4bcb5c(0x220)]['__timeout']=_0x489771[_0x4bcb5c(0x224)](this['configuration']['timeout__'],constants['BSTACK_DELTA']),this[_0x4bcb5c(0x216)]=_0x318ba6[_0x4bcb5c(0x209)][_0x4bcb5c(0x21f)];if(this[_0x4bcb5c(0x216)]){const _0x48ec3=this['capability'][_0x489771[_0x4bcb5c(0x1d4)]]?.[_0x4bcb5c(0x1ef)]||'',_0x3213df=this[_0x4bcb5c(0x213)][_0x489771[_0x4bcb5c(0x1d4)]]?.[_0x4bcb5c(0x1f9)]||'';this[_0x4bcb5c(0x21f)]=new(_0x489771['tRhVU'](require,_0x489771[_0x4bcb5c(0x219)]))(this[_0x4bcb5c(0x216)],_0x48ec3,_0x3213df),this[_0x4bcb5c(0x220)]['failFastActive']=![];}helper[_0x4bcb5c(0x1fb)](this['configuration'][_0x4bcb5c(0x22b)])&&(this[_0x4bcb5c(0x220)][_0x4bcb5c(0x23e)]=this[_0x4bcb5c(0x21d)][_0x4bcb5c(0x22b)]);}if(testhubUtils['shouldProcessEventForTesthub']()){const _0x40e08e=new ObservabilityReporter();_0x40e08e[_0x4bcb5c(0x1d7)]();}this[_0x4bcb5c(0x220)][_0x4bcb5c(0x226)]={},this[_0x4bcb5c(0x21d)]=_0x318ba6[_0x4bcb5c(0x209)],this['configuration'][_0x4bcb5c(0x1e5)]=constants[_0x4bcb5c(0x21e)]['JEST'];if(_seleniumWebdriver2){const _0x54e75c=_0x489771[_0x4bcb5c(0x1fc)][_0x4bcb5c(0x23d)]('|');let _0x477f86=0x0;while(!![]){switch(_0x54e75c[_0x477f86++]){case'0':this['global']['percyCaptureMode']=helper['nestedKeyValue'](_0x318ba6,[_0x489771[_0x4bcb5c(0x1f3)],_0x489771[_0x4bcb5c(0x1d8)],_0x489771[_0x4bcb5c(0x210)]]);continue;case'1':this[_0x4bcb5c(0x220)]['percy']=helper[_0x4bcb5c(0x20b)](_0x318ba6,[_0x489771[_0x4bcb5c(0x1f3)],_0x489771['lEMET'],_0x489771['ESdxN']]);continue;case'2':this[_0x4bcb5c(0x220)][_0x4bcb5c(0x211)]=async()=>{const _0xa38cec=_0x4bcb5c;await this['global']['driver'][_0xa38cec(0x1f8)](_0x489771[_0xa38cec(0x1dd)]);};continue;case'3':this[_0x4bcb5c(0x220)][_0x4bcb5c(0x1e0)]=[];continue;case'4':this['global'][_0x4bcb5c(0x1ff)]=helper['isTrue'](this[_0x4bcb5c(0x21d)]['skipSessionStatus']);continue;case'5':this[_0x4bcb5c(0x220)][_0x4bcb5c(0x1fa)]=_0x489771[_0x4bcb5c(0x20f)](require,_0x489771[_0x4bcb5c(0x1e8)])[_0x4bcb5c(0x201)]({...this[_0x4bcb5c(0x21d)],'capability':this[_0x4bcb5c(0x213)]||{}},this,testhubUtils[_0x4bcb5c(0x1ea)]());continue;case'6':this[_0x4bcb5c(0x220)][_0x4bcb5c(0x20c)]=helper[_0x4bcb5c(0x20b)](_0x318ba6,[_0x489771['tVMoG'],_0x489771[_0x4bcb5c(0x1d8)],_0x489771[_0x4bcb5c(0x212)]]);continue;case'7':this[_0x4bcb5c(0x220)][_0x4bcb5c(0x221)]=helper[_0x4bcb5c(0x20b)](this[_0x4bcb5c(0x21d)],[_0x489771[_0x4bcb5c(0x235)],this[_0x4bcb5c(0x220)][_0x4bcb5c(0x20e)]])||{};continue;case'8':helper[_0x4bcb5c(0x231)](this['configuration'][_0x4bcb5c(0x227)])?this[_0x4bcb5c(0x220)][_0x4bcb5c(0x200)]=!![]:this['global'][_0x4bcb5c(0x200)]=![];continue;case'9':this['global'][_0x4bcb5c(0x20e)]=(_0x318ba6[_0x4bcb5c(0x1de)]?_0x318ba6[_0x4bcb5c(0x1de)][_0x4bcb5c(0x20e)]:_0x318ba6[_0x4bcb5c(0x20e)])||0x0;continue;}break;}}}async[a16_0x5ec900(0x1f7)](){const _0x1a6b0b=a16_0x5ec900;_seleniumWebdriver2&&(await helper['cleanupDrivers'](this[_0x1a6b0b(0x220)][_0x1a6b0b(0x23a)]),this['global'][_0x1a6b0b(0x1fa)][_0x1a6b0b(0x1e1)]=originalBuilder),await RequestQueueHandler[_0x1a6b0b(0x23b)]()[_0x1a6b0b(0x217)]();}async[a16_0x5ec900(0x232)](){}async['handleTestEvent'](_0x394b76,_0x262084){const _0x137392=a16_0x5ec900,_0x5648b0={};_0x5648b0[_0x137392(0x22f)]=function(_0x2abae1,_0x58beca){return _0x2abae1===_0x58beca;},_0x5648b0['ghyNa']=_0x137392(0x1ed),_0x5648b0['bEgKj']=_0x137392(0x233),_0x5648b0['mcLGU']='test_done',_0x5648b0['cAQCG']=_0x137392(0x237),_0x5648b0[_0x137392(0x215)]=_0x137392(0x22e),_0x5648b0['ZCLVl']='teardown';const _0x517f49=_0x5648b0,{name:_0x407ca4}=_0x394b76;if(_0x517f49['Guefu'](_0x407ca4,_0x517f49['ghyNa'])){this['global']['testContext']=_0x394b76[_0x137392(0x1fd)];if(_0x517f49[_0x137392(0x22f)](this[_0x137392(0x220)][_0x137392(0x21b)],!![])){const _0x2a11d7=_0x394b76['test'][_0x137392(0x205)];logger[_0x137392(0x1e4)]('Fail-fast\x20is\x20active,\x20skipping\x20test::\x20'+_0x2a11d7),_0x394b76[_0x137392(0x1fd)][_0x137392(0x234)]=_0x517f49['bEgKj'];}}if(this[_0x137392(0x21f)]&&_0x517f49[_0x137392(0x22f)](_0x407ca4,_0x517f49[_0x137392(0x1db)]))try{const _0x3897f7=_0x394b76[_0x137392(0x1fd)][_0x137392(0x236)][_0x137392(0x1e9)](_0x517f49['cAQCG']),_0x14cbe1=_0x394b76[_0x137392(0x1fd)]['errors'];await this['failFast'][_0x137392(0x1d9)](_0x3897f7,_0x14cbe1);const _0x46b110=await this['failFast']['shouldFailFast']();_0x517f49[_0x137392(0x22f)](this['global']['failFastActive'],![])&&_0x517f49[_0x137392(0x22f)](_0x46b110,!![])&&(this[_0x137392(0x220)][_0x137392(0x21b)]=!![]);}catch(_0x13b42a){logger['debug'](_0x517f49[_0x137392(0x215)],_0x13b42a[_0x137392(0x1e7)]);}_0x517f49[_0x137392(0x22f)](_0x407ca4,_0x517f49[_0x137392(0x1ec)])&&(this['failFast']&&this[_0x137392(0x21f)][_0x137392(0x211)]());}}module['exports']=CustomEnvironment;