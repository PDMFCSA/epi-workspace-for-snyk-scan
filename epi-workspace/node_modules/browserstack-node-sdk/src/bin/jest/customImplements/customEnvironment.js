const a16_0x3d4d2a=a16_0x5006;(function(_0x193615,_0x488409){const _0x23fbd4=a16_0x5006,_0x13df99=_0x193615();while(!![]){try{const _0x4131c7=-parseInt(_0x23fbd4(0x178))/0x1+parseInt(_0x23fbd4(0x19a))/0x2*(parseInt(_0x23fbd4(0x179))/0x3)+parseInt(_0x23fbd4(0x1c8))/0x4*(parseInt(_0x23fbd4(0x1b8))/0x5)+parseInt(_0x23fbd4(0x184))/0x6+-parseInt(_0x23fbd4(0x18a))/0x7*(-parseInt(_0x23fbd4(0x18c))/0x8)+-parseInt(_0x23fbd4(0x1a3))/0x9+parseInt(_0x23fbd4(0x18e))/0xa*(-parseInt(_0x23fbd4(0x180))/0xb);if(_0x4131c7===_0x488409)break;else _0x13df99['push'](_0x13df99['shift']());}catch(_0x571364){_0x13df99['push'](_0x13df99['shift']());}}}(a16_0x40be,0x429a8));const helper=require(a16_0x3d4d2a(0x173)),constants=require('../../utils/constants'),{isTestObservabilitySession}=require(a16_0x3d4d2a(0x1b2)),RequestQueueHandler=require('../../../helpers/test-observability/requestQueueHandler'),ObservabilityReporter=require(a16_0x3d4d2a(0x189)),testhubUtils=require(a16_0x3d4d2a(0x1c1)),logger=require(a16_0x3d4d2a(0x1c5))[a16_0x3d4d2a(0x1b4)],getTestEnvironment=((()=>{const _0x21de72=a16_0x3d4d2a,_0x1d2fbc={};_0x1d2fbc[_0x21de72(0x193)]=_0x21de72(0x1a6),_0x1d2fbc[_0x21de72(0x1a7)]=_0x21de72(0x1a8);const _0x2967e7=_0x1d2fbc;try{const _0x2c6ccb=helper['requireModule'](_0x2967e7[_0x21de72(0x193)]);if(_0x2c6ccb[_0x21de72(0x16d)])return _0x2c6ccb['resolveTestEnvironment'];const _0x499fbb=helper[_0x21de72(0x185)](_0x2967e7[_0x21de72(0x1a7)]);if(_0x499fbb[_0x21de72(0x1c6)])return _0x499fbb[_0x21de72(0x1c6)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x50cf66=a16_0x3d4d2a,_0x54d459={'fIAJV':function(_0x372035,_0x1a0c52){return _0x372035(_0x1a0c52);},'VInuh':'node','SDIsP':'jest-environment-node'},_0x42fa38=_0x54d459[_0x50cf66(0x19e)](getTestEnvironment,{'rootDir':process['cwd'](),'testEnvironment':process['env']['BSTACK_JEST_TEST_ENV']||_0x54d459[_0x50cf66(0x1d0)]});if(!_0x42fa38)return _0x54d459['fIAJV'](_interopRequireDefault,helper[_0x50cf66(0x185)](_0x54d459[_0x50cf66(0x199)]));return _0x54d459['fIAJV'](_interopRequireDefault,helper[_0x50cf66(0x185)](_0x42fa38));})()),_seleniumWebdriver2=((()=>{const _0x30dd24=a16_0x3d4d2a,_0x1b3e42={'isSbH':function(_0x5d01a0,_0x1f658d){return _0x5d01a0(_0x1f658d);}};try{const _0x2e20cb=helper['requireSeleniumWebdriver']();return helper['modifyCommand'](),_0x1b3e42[_0x30dd24(0x1bd)](_interopRequireDefault,_0x2e20cb);}catch{return null;}})());function _interopRequireDefault(_0x11bef2){const _0x1f284d=a16_0x3d4d2a;return _0x11bef2&&_0x11bef2[_0x1f284d(0x1d7)]?_0x11bef2:{'default':_0x11bef2};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0x3d4d2a(0x18f)][a16_0x3d4d2a(0x1b3)]:null;function a16_0x5006(_0x50848e,_0x29d0c1){const _0x40bea3=a16_0x40be();return a16_0x5006=function(_0x50067e,_0x45474a){_0x50067e=_0x50067e-0x16b;let _0x28e675=_0x40bea3[_0x50067e];return _0x28e675;},a16_0x5006(_0x50848e,_0x29d0c1);}class CustomEnvironment extends _jestUserEnvironment[a16_0x3d4d2a(0x18f)]{constructor(_0x504af8){const _0x14c20c=a16_0x3d4d2a,_0x95eafc={'vSXoN':_0x14c20c(0x174),'UJFHV':function(_0x1a3091,_0x5c05ea){return _0x1a3091+_0x5c05ea;},'PfvGs':_0x14c20c(0x196),'eyBJg':function(_0x3737e7,_0x520d37){return _0x3737e7(_0x520d37);},'QhMeC':_0x14c20c(0x17a),'zLtGg':_0x14c20c(0x194),'UMeHU':'testEnvironmentOptions','DWajG':'browserStackPercyOptions','CDDpe':_0x14c20c(0x1d6),'SGRgS':_0x14c20c(0x1bf),'Schxo':_0x14c20c(0x1ae),'iaVIu':_0x14c20c(0x1c3),'GysNE':_0x14c20c(0x183)};super(_0x504af8),this['global'][_0x14c20c(0x16b)]=0x0,this[_0x14c20c(0x1d3)]={};!_0x504af8['testEnvironmentOptions']&&(_0x504af8[_0x14c20c(0x171)]={});if(helper[_0x14c20c(0x182)]()){_0x504af8[_0x14c20c(0x171)]=_0x504af8[_0x14c20c(0x1a0)]?_0x504af8['projectConfig'][_0x14c20c(0x171)]:_0x504af8['testEnvironmentOptions'],this[_0x14c20c(0x16c)]=new _seleniumWebdriver2[(_0x14c20c(0x18f))][(_0x14c20c(0x1b3))](),this[_0x14c20c(0x1c7)]=_0x504af8['projectConfig']?_0x504af8['projectConfig'][_0x14c20c(0x1c7)]:_0x504af8[_0x14c20c(0x1c7)],this[_0x14c20c(0x1ca)]['__timeout']=_0x95eafc['UJFHV'](this['configuration']['timeout__'],constants[_0x14c20c(0x1b1)]),this['failFastOptions']=_0x504af8[_0x14c20c(0x171)][_0x14c20c(0x17d)];if(this['failFastOptions']){const _0x20eba9=this[_0x14c20c(0x1c7)][_0x95eafc[_0x14c20c(0x1a2)]]?.[_0x14c20c(0x19f)]||'',_0x1ec54d=this[_0x14c20c(0x1c7)][_0x95eafc[_0x14c20c(0x1a2)]]?.['projectName']||'';this[_0x14c20c(0x17d)]=new(_0x95eafc[_0x14c20c(0x1da)](require,_0x95eafc['QhMeC']))(this[_0x14c20c(0x16f)],_0x20eba9,_0x1ec54d),this[_0x14c20c(0x1ca)][_0x14c20c(0x19c)]=![];}helper['isNotUndefined'](this[_0x14c20c(0x1d3)][_0x14c20c(0x1c2)])&&(this[_0x14c20c(0x1ca)][_0x14c20c(0x1cb)]=this[_0x14c20c(0x1d3)][_0x14c20c(0x1c2)]);}if(testhubUtils[_0x14c20c(0x1d5)]()){const _0x2be519=new ObservabilityReporter();_0x2be519[_0x14c20c(0x1ab)]();}this[_0x14c20c(0x1ca)][_0x14c20c(0x18b)]={},this[_0x14c20c(0x1d3)]=_0x504af8['testEnvironmentOptions'],this[_0x14c20c(0x1d3)][_0x14c20c(0x19d)]=constants[_0x14c20c(0x188)][_0x14c20c(0x16e)];if(_seleniumWebdriver2){const _0x2c27d4=_0x95eafc[_0x14c20c(0x1d8)][_0x14c20c(0x18d)]('|');let _0x5e56ca=0x0;while(!![]){switch(_0x2c27d4[_0x5e56ca++]){case'0':this[_0x14c20c(0x1ca)][_0x14c20c(0x1d6)]=helper[_0x14c20c(0x1a4)](_0x504af8,[_0x95eafc['UMeHU'],_0x95eafc[_0x14c20c(0x177)],_0x95eafc[_0x14c20c(0x1d2)]]);continue;case'1':this[_0x14c20c(0x1ca)]['browserstackPlatformIndex']=(_0x504af8['projectConfig']?_0x504af8[_0x14c20c(0x1a0)][_0x14c20c(0x1d1)]:_0x504af8[_0x14c20c(0x1d1)])||0x0;continue;case'2':this[_0x14c20c(0x1ca)][_0x14c20c(0x1c4)]=helper[_0x14c20c(0x170)](this[_0x14c20c(0x1d3)][_0x14c20c(0x17e)]);continue;case'3':this['global'][_0x14c20c(0x190)]=async()=>{const _0x4f9cb7=_0x14c20c;await this[_0x4f9cb7(0x1ca)][_0x4f9cb7(0x1a9)][_0x4f9cb7(0x174)](_0x95eafc['vSXoN']);};continue;case'4':this[_0x14c20c(0x1ca)]['browserstackPercyBestPlatform']=helper[_0x14c20c(0x1a4)](_0x504af8,[_0x95eafc['UMeHU'],_0x95eafc['DWajG'],_0x95eafc[_0x14c20c(0x1b7)]]);continue;case'5':this['global'][_0x14c20c(0x17c)]=helper['nestedKeyValue'](this[_0x14c20c(0x1d3)],[_0x95eafc[_0x14c20c(0x181)],this[_0x14c20c(0x1ca)][_0x14c20c(0x1d1)]])||{};continue;case'6':this[_0x14c20c(0x1ca)][_0x14c20c(0x1bb)]=[];continue;case'7':helper['isTrue'](this[_0x14c20c(0x1d3)][_0x14c20c(0x1c9)])?this[_0x14c20c(0x1ca)][_0x14c20c(0x1c0)]=!![]:this[_0x14c20c(0x1ca)][_0x14c20c(0x1c0)]=![];continue;case'8':this['global']['__webdriver']=_0x95eafc[_0x14c20c(0x1da)](require,_0x95eafc['iaVIu'])[_0x14c20c(0x191)]({...this[_0x14c20c(0x1d3)],'capability':this[_0x14c20c(0x1c7)]||{}},this,testhubUtils[_0x14c20c(0x1d5)]());continue;case'9':this[_0x14c20c(0x1ca)]['percy']=helper[_0x14c20c(0x1a4)](_0x504af8,[_0x95eafc[_0x14c20c(0x1ac)],_0x95eafc[_0x14c20c(0x177)],_0x95eafc[_0x14c20c(0x17f)]]);continue;}break;}}}async['teardown'](){const _0x21bc8d=a16_0x3d4d2a;_seleniumWebdriver2&&(await helper[_0x21bc8d(0x1aa)](this[_0x21bc8d(0x1ca)][_0x21bc8d(0x175)]),this[_0x21bc8d(0x1ca)][_0x21bc8d(0x19b)][_0x21bc8d(0x1b3)]=originalBuilder),await RequestQueueHandler[_0x21bc8d(0x186)]()[_0x21bc8d(0x1ad)]();}async['setup'](){}async['handleTestEvent'](_0x12ff53,_0x8f3501){const _0x3161a0=a16_0x3d4d2a,_0x1c23ac={};_0x1c23ac[_0x3161a0(0x1af)]=function(_0x1eddec,_0x5e1e31){return _0x1eddec===_0x5e1e31;},_0x1c23ac[_0x3161a0(0x1d4)]=_0x3161a0(0x1b5),_0x1c23ac['AeWbW']=_0x3161a0(0x1a5),_0x1c23ac[_0x3161a0(0x1b6)]=_0x3161a0(0x17b),_0x1c23ac['Hikaq']=_0x3161a0(0x198),_0x1c23ac['gpgxP']=function(_0x3a1278,_0x4af83c){return _0x3a1278===_0x4af83c;},_0x1c23ac[_0x3161a0(0x172)]=function(_0x184742,_0x870d47){return _0x184742===_0x870d47;},_0x1c23ac['XOBlY']=_0x3161a0(0x1ce),_0x1c23ac[_0x3161a0(0x176)]=function(_0x46f308,_0xa3b189){return _0x46f308===_0xa3b189;},_0x1c23ac['FcBKt']=_0x3161a0(0x192);const _0xbbccff=_0x1c23ac,{name:_0x499794}=_0x12ff53;if(_0xbbccff[_0x3161a0(0x1af)](_0x499794,_0xbbccff[_0x3161a0(0x1d4)])){this[_0x3161a0(0x1ca)][_0x3161a0(0x1cc)]=_0x12ff53[_0x3161a0(0x1bc)];if(_0xbbccff[_0x3161a0(0x1af)](this[_0x3161a0(0x1ca)][_0x3161a0(0x19c)],!![])){const _0x4dd427=_0x12ff53[_0x3161a0(0x1bc)][_0x3161a0(0x1a1)];logger['info'](_0x3161a0(0x187)+_0x4dd427),_0x12ff53[_0x3161a0(0x1bc)]['mode']=_0xbbccff[_0x3161a0(0x1b0)];}}if(this[_0x3161a0(0x17d)]&&_0xbbccff['nNMLr'](_0x499794,_0xbbccff[_0x3161a0(0x1b6)]))try{const _0xa74410=_0x12ff53[_0x3161a0(0x1bc)]['testPath'][_0x3161a0(0x1b9)](_0xbbccff[_0x3161a0(0x1cf)]),_0x57b9fc=_0x12ff53[_0x3161a0(0x1bc)][_0x3161a0(0x1be)];await this[_0x3161a0(0x17d)][_0x3161a0(0x195)](_0xa74410,_0x57b9fc);const _0x4a75dd=await this['failFast']['shouldFailFast']();_0xbbccff[_0x3161a0(0x1d9)](this[_0x3161a0(0x1ca)][_0x3161a0(0x19c)],![])&&_0xbbccff[_0x3161a0(0x172)](_0x4a75dd,!![])&&(this[_0x3161a0(0x1ca)][_0x3161a0(0x19c)]=!![]);}catch(_0x319d24){logger['debug'](_0xbbccff[_0x3161a0(0x197)],_0x319d24[_0x3161a0(0x1cd)]);}_0xbbccff[_0x3161a0(0x176)](_0x499794,_0xbbccff['FcBKt'])&&(this[_0x3161a0(0x17d)]&&this[_0x3161a0(0x17d)][_0x3161a0(0x190)]());}}function a16_0x40be(){const _0x2fde31=['FRAMEWORKS','../test-observability/obsReporter','7MYuWmp','browserStackGlobals','1937336yiHRmE','split','4538420Emrbmj','default','cleanup','browserstackAgentV2','teardown','NnMTM','6|8|1|4|9|0|5|7|2|3','onTestDone','bstack:options','XOBlY','\x20>\x20','SDIsP','4heQgOT','__webdriver','failFastActive','framework','fIAJV','buildName','projectConfig','name','PfvGs','1918692hqXLFM','nestedKeyValue','skip','jest-resolve','YPLcp','jest-config','driver','cleanupDrivers','registerListeners','UMeHU','shutdown','platformCaps','nNMLr','AeWbW','BSTACK_DELTA','../../../helpers/test-observability/utils','Builder','winstonLogger','test_start','uZWGl','SGRgS','115tjBODO','join','exports','__drivers','test','isSbH','errors','browserstackPercyBestPlatform','sessionNameProvided','../../../helpers/testhub/utils','retries__','../../../index','__skipSessionStatus','../../../helpers/logger','getTestEnvironment','capability','89092VFXPGB','skipSessionName','global','__jestRetries','testContext','message','Error\x20in\x20fail-fast\x20test_done\x20handler:','Hikaq','VInuh','browserstackPlatformIndex','CDDpe','configuration','yvjFb','shouldProcessEventForTesthub','percyCaptureMode','__esModule','zLtGg','gpgxP','eyBJg','__timeout','builder','resolveTestEnvironment','JEST','failFastOptions','isTrue','testEnvironmentOptions','NXqXz','../../../helpers/helper','quit','__driversArray','NqhcK','DWajG','307954RYuxgi','636420exhCjF','../../../helpers/test-orchestration/failfastManager','test_done','__platformCaps','failFast','skipSessionStatus','GysNE','22uSRUzY','Schxo','isBrowserstackInfra','percy','3137448xNxRNQ','requireModule','getInstance','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20'];a16_0x40be=function(){return _0x2fde31;};return a16_0x40be();}module[a16_0x3d4d2a(0x1ba)]=CustomEnvironment;