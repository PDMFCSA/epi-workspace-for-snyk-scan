const a16_0x1742c0=a16_0x415a;(function(_0x38a889,_0x20b11c){const _0x26bae4=a16_0x415a,_0xda47d=_0x38a889();while(!![]){try{const _0x5d2e71=parseInt(_0x26bae4(0x1f0))/0x1+-parseInt(_0x26bae4(0x20f))/0x2+-parseInt(_0x26bae4(0x1f8))/0x3*(parseInt(_0x26bae4(0x1bf))/0x4)+-parseInt(_0x26bae4(0x221))/0x5+parseInt(_0x26bae4(0x216))/0x6*(-parseInt(_0x26bae4(0x1f1))/0x7)+parseInt(_0x26bae4(0x1d2))/0x8+parseInt(_0x26bae4(0x1d7))/0x9*(parseInt(_0x26bae4(0x205))/0xa);if(_0x5d2e71===_0x20b11c)break;else _0xda47d['push'](_0xda47d['shift']());}catch(_0x286abb){_0xda47d['push'](_0xda47d['shift']());}}}(a16_0x909a,0xb147b));const helper=require(a16_0x1742c0(0x1e7)),constants=require('../../utils/constants'),{isTestObservabilitySession}=require('../../../helpers/test-observability/utils'),RequestQueueHandler=require('../../../helpers/test-observability/requestQueueHandler'),ObservabilityReporter=require(a16_0x1742c0(0x1c1)),testhubUtils=require(a16_0x1742c0(0x217)),logger=require(a16_0x1742c0(0x226))['winstonLogger'],getTestEnvironment=((()=>{const _0x4ab83c=a16_0x1742c0,_0x32b8ee={};_0x32b8ee[_0x4ab83c(0x1de)]=_0x4ab83c(0x1d0),_0x32b8ee[_0x4ab83c(0x1fd)]='jest-config';const _0x374c49=_0x32b8ee;try{const _0x28950c=helper[_0x4ab83c(0x22b)](_0x374c49[_0x4ab83c(0x1de)]);if(_0x28950c[_0x4ab83c(0x21f)])return _0x28950c['resolveTestEnvironment'];const _0xb11ce0=helper['requireModule'](_0x374c49['FMPwo']);if(_0xb11ce0['getTestEnvironment'])return _0xb11ce0[_0x4ab83c(0x1e2)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x1b2078=a16_0x1742c0,_0x1aceb0={'pbrIR':function(_0x38e8fb,_0x17172a){return _0x38e8fb(_0x17172a);},'EXtMM':'node','siemi':function(_0x14b9e9,_0x54962b){return _0x14b9e9(_0x54962b);},'zuxPt':'jest-environment-node'},_0x237a9b=_0x1aceb0[_0x1b2078(0x1f5)](getTestEnvironment,{'rootDir':process['cwd'](),'testEnvironment':process['env'][_0x1b2078(0x1dd)]||_0x1aceb0[_0x1b2078(0x1cb)]});if(!_0x237a9b)return _0x1aceb0[_0x1b2078(0x1be)](_interopRequireDefault,helper[_0x1b2078(0x22b)](_0x1aceb0[_0x1b2078(0x1bd)]));return _0x1aceb0['pbrIR'](_interopRequireDefault,helper[_0x1b2078(0x22b)](_0x237a9b));})()),_seleniumWebdriver2=((()=>{const _0x20a477=a16_0x1742c0,_0x110ea3={'Sgbav':function(_0x12dcc5,_0x345615){return _0x12dcc5(_0x345615);}};try{const _0x261420=helper[_0x20a477(0x204)]();return helper[_0x20a477(0x20b)](),_0x110ea3[_0x20a477(0x21c)](_interopRequireDefault,_0x261420);}catch{return null;}})());function _interopRequireDefault(_0x51e7b8){const _0x555050=a16_0x1742c0;return _0x51e7b8&&_0x51e7b8[_0x555050(0x1c6)]?_0x51e7b8:{'default':_0x51e7b8};}function a16_0x909a(){const _0x1e185f=['browserstackAgentV2','getTestEnvironment','isTrue','handleTestEvent','nestedKeyValue','__webdriver','../../../helpers/helper','join','onTestDone','isNotUndefined','__timeout','isBrowserstackInfra','isArray','shouldProcessEventForTesthub','__driversArray','1054416ngBhjb','7MiJWMa','global','dNhWy','buildName','pbrIR','zJRnK','teardown','3601863IHeVjo','name','__skipSessionStatus','__jestRetries','browserstackPercyBestPlatform','FMPwo','driver','default','skipSessionStatus','projectConfig','registerListeners','browserStackGlobals','requireSeleniumWebdriver','57350KgvTGk','nQcNl','__platformCaps','capability','dZGdb','percyCaptureMode','modifyCommand','IAYgw','info','EAPOP','1194768LZyjbf','kdvYN','skipSessionName','test_start','mode','timeout__','jestConfig','6624318ufGXjw','../../../helpers/testhub/utils','../../../index','Error\x20in\x20fail-fast\x20test_done\x20handler:','setup','UiIpe','Sgbav','testContext','Builder','resolveTestEnvironment','FRAMEWORKS','2117930rpQJHu','projectName','JEST','__drivers','rBVix','../../../helpers/logger','test_done','bstack:options','quit','percy','requireModule','zuxPt','siemi','4IVSsmX','iJwLE','../test-observability/obsReporter','testPath','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','yUNFD','sessionNameProvided','__esModule','failFastOptions','configuration','testEnvironmentOptions','sViYI','EXtMM','browserStackPercyOptions','cleanup','test','failFastActive','jest-resolve','cleanupDrivers','2048296pRMDdx','ycbic','RZtZm','builder','retries__','4302sHFMku','NzkMP','../../../helpers/test-orchestration/failfastManager','failFast','platformCaps','capabilities','BSTACK_JEST_TEST_ENV','iXhIN','sCOee','exports'];a16_0x909a=function(){return _0x1e185f;};return a16_0x909a();}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0x1742c0(0x1ff)][a16_0x1742c0(0x21e)]:null;function a16_0x415a(_0x1153f3,_0x16af7a){const _0x909a56=a16_0x909a();return a16_0x415a=function(_0x415a00,_0x27da68){_0x415a00=_0x415a00-0x1bd;let _0x5a8128=_0x909a56[_0x415a00];return _0x5a8128;},a16_0x415a(_0x1153f3,_0x16af7a);}class CustomEnvironment extends _jestUserEnvironment[a16_0x1742c0(0x1ff)]{constructor(_0x4fb36f){const _0x11c612=a16_0x1742c0,_0x5ad951={'ycbic':'quit','uAfxC':function(_0x1ec00c,_0x5cd6c4){return _0x1ec00c+_0x5cd6c4;},'dZGdb':_0x11c612(0x228),'EAPOP':function(_0x4e83a0,_0x3ceac){return _0x4e83a0(_0x3ceac);},'RZtZm':_0x11c612(0x1d9),'UiIpe':'1|7|4|5|3|0|6|2','zJRnK':'testEnvironmentOptions','nQcNl':_0x11c612(0x1cc),'nPTCg':_0x11c612(0x20a),'NzkMP':'browserstackPercyBestPlatform','iJwLE':_0x11c612(0x22a),'DcwRd':function(_0x4a87c2,_0x2eb525){return _0x4a87c2(_0x2eb525);},'pNAaz':_0x11c612(0x218)};super(_0x4fb36f),this['global'][_0x11c612(0x1eb)]=0x0,this['configuration']={};!_0x4fb36f[_0x11c612(0x1c9)]&&(_0x4fb36f[_0x11c612(0x1c9)]={});if(helper[_0x11c612(0x1ec)]()){_0x4fb36f[_0x11c612(0x1c9)]=_0x4fb36f[_0x11c612(0x201)]?_0x4fb36f[_0x11c612(0x201)][_0x11c612(0x1c9)]:_0x4fb36f[_0x11c612(0x1c9)];_seleniumWebdriver2&&(this[_0x11c612(0x1d5)]=new _seleniumWebdriver2[(_0x11c612(0x1ff))][(_0x11c612(0x21e))]());this[_0x11c612(0x208)]=_0x4fb36f['projectConfig']?_0x4fb36f['projectConfig'][_0x11c612(0x208)]:_0x4fb36f[_0x11c612(0x208)],this[_0x11c612(0x1f2)][_0x11c612(0x1eb)]=_0x5ad951['uAfxC'](_0x4fb36f[_0x11c612(0x1c9)][_0x11c612(0x214)]||0x1388,constants['BSTACK_DELTA']),this[_0x11c612(0x1c7)]=_0x4fb36f['testEnvironmentOptions'][_0x11c612(0x1da)];if(this[_0x11c612(0x1c7)]){const _0x44d27d=this[_0x11c612(0x208)][_0x5ad951[_0x11c612(0x209)]]?.[_0x11c612(0x1f4)]||'',_0xea6362=this[_0x11c612(0x208)][_0x5ad951['dZGdb']]?.[_0x11c612(0x222)]||'';this['failFast']=new(_0x5ad951[_0x11c612(0x20e)](require,_0x5ad951[_0x11c612(0x1d4)]))(this[_0x11c612(0x1c7)],_0x44d27d,_0xea6362),this[_0x11c612(0x1f2)][_0x11c612(0x1cf)]=![];}helper[_0x11c612(0x1ea)](_0x4fb36f['testEnvironmentOptions']['retries__'])&&(this[_0x11c612(0x1f2)][_0x11c612(0x1fb)]=_0x4fb36f[_0x11c612(0x1c9)][_0x11c612(0x1d6)]);}if(testhubUtils[_0x11c612(0x1ee)]()){const _0x869260=new ObservabilityReporter();_0x869260[_0x11c612(0x202)]();}this['global'][_0x11c612(0x203)]={},this['configuration']=_0x4fb36f['testEnvironmentOptions'],this['configuration']['framework']=constants[_0x11c612(0x220)][_0x11c612(0x223)],this['global']['browserstackPlatformIndex']=(_0x4fb36f['projectConfig']?_0x4fb36f[_0x11c612(0x201)]['browserstackPlatformIndex']:_0x4fb36f['browserstackPlatformIndex'])||0x0,this[_0x11c612(0x1f2)][_0x11c612(0x207)]=this[_0x11c612(0x1c8)]&&this['configuration'][_0x11c612(0x1db)]&&Array['isArray'](this[_0x11c612(0x1c8)][_0x11c612(0x1db)])&&this[_0x11c612(0x1c8)][_0x11c612(0x1db)][this['global']['browserstackPlatformIndex']]||{};const _0x38b2ad=this[_0x11c612(0x1f2)]['browserstackPlatformIndex'],_0x2f6e76={...this[_0x11c612(0x1c8)],'capability':this[_0x11c612(0x1c8)][_0x11c612(0x1dc)]&&Array[_0x11c612(0x1ed)](this[_0x11c612(0x1c8)][_0x11c612(0x1dc)])&&this[_0x11c612(0x1c8)][_0x11c612(0x1dc)][_0x38b2ad]||{},'platformCaps':this[_0x11c612(0x1c8)][_0x11c612(0x1db)]&&Array[_0x11c612(0x1ed)](this['configuration'][_0x11c612(0x1db)])&&this[_0x11c612(0x1c8)][_0x11c612(0x1db)][_0x38b2ad]||{}};delete _0x2f6e76[_0x11c612(0x1dc)],this['global'][_0x11c612(0x215)]=_0x2f6e76;if(_seleniumWebdriver2){const _0x2ffa0e=_0x5ad951[_0x11c612(0x21b)]['split']('|');let _0x54583f=0x0;while(!![]){switch(_0x2ffa0e[_0x54583f++]){case'0':helper['isTrue'](this[_0x11c612(0x1c8)][_0x11c612(0x211)])?this[_0x11c612(0x1f2)][_0x11c612(0x1c5)]=!![]:this[_0x11c612(0x1f2)][_0x11c612(0x1c5)]=![];continue;case'1':this[_0x11c612(0x1f2)][_0x11c612(0x224)]=[];continue;case'2':this['global'][_0x11c612(0x1cd)]=async()=>{const _0x482c19=_0x11c612;await this[_0x482c19(0x1f2)][_0x482c19(0x1fe)][_0x482c19(0x229)](_0x5ad951[_0x482c19(0x1d3)]);};continue;case'3':this['global'][_0x11c612(0x20a)]=helper[_0x11c612(0x1e5)](_0x4fb36f,[_0x5ad951['zJRnK'],_0x5ad951[_0x11c612(0x206)],_0x5ad951['nPTCg']]);continue;case'4':this[_0x11c612(0x1f2)][_0x11c612(0x1fc)]=helper[_0x11c612(0x1e5)](_0x4fb36f,[_0x5ad951['zJRnK'],_0x5ad951[_0x11c612(0x206)],_0x5ad951[_0x11c612(0x1d8)]]);continue;case'5':this[_0x11c612(0x1f2)][_0x11c612(0x22a)]=helper[_0x11c612(0x1e5)](_0x4fb36f,[_0x5ad951[_0x11c612(0x1f6)],_0x5ad951['nQcNl'],_0x5ad951[_0x11c612(0x1c0)]]);continue;case'6':this['global'][_0x11c612(0x1fa)]=helper[_0x11c612(0x1e3)](this[_0x11c612(0x1c8)][_0x11c612(0x200)]);continue;case'7':this[_0x11c612(0x1f2)][_0x11c612(0x1e6)]=_0x5ad951['DcwRd'](require,_0x5ad951['pNAaz'])[_0x11c612(0x1e1)]({...this['configuration'],'capability':this[_0x11c612(0x208)]||{}},this,testhubUtils[_0x11c612(0x1ee)]());continue;}break;}}}async['teardown'](){const _0x20762e=a16_0x1742c0;_seleniumWebdriver2&&(await helper[_0x20762e(0x1d1)](this[_0x20762e(0x1f2)][_0x20762e(0x1ef)]),this[_0x20762e(0x1f2)][_0x20762e(0x1e6)]['Builder']=originalBuilder),await RequestQueueHandler['getInstance']()['shutdown']();}async[a16_0x1742c0(0x21a)](){}async[a16_0x1742c0(0x1e4)](_0x419074,_0x4ff377){const _0x1e99f0=a16_0x1742c0,_0x1cf577={};_0x1cf577[_0x1e99f0(0x1ca)]=function(_0xb4ef74,_0x55d213){return _0xb4ef74===_0x55d213;},_0x1cf577[_0x1e99f0(0x210)]=_0x1e99f0(0x212),_0x1cf577[_0x1e99f0(0x1c4)]='skip',_0x1cf577['RCRjv']=_0x1e99f0(0x227),_0x1cf577['MRFlf']='\x20>\x20',_0x1cf577[_0x1e99f0(0x225)]=function(_0x246978,_0x453959){return _0x246978===_0x453959;},_0x1cf577[_0x1e99f0(0x1df)]=function(_0x618f4b,_0x4c8c35){return _0x618f4b===_0x4c8c35;},_0x1cf577['IAYgw']=_0x1e99f0(0x219),_0x1cf577[_0x1e99f0(0x1f3)]=_0x1e99f0(0x1f7);const _0x35cc3e=_0x1cf577,{name:_0x29609c}=_0x419074;if(_0x35cc3e[_0x1e99f0(0x1ca)](_0x29609c,_0x35cc3e[_0x1e99f0(0x210)])){this[_0x1e99f0(0x1f2)][_0x1e99f0(0x21d)]=_0x419074['test'];if(_0x35cc3e[_0x1e99f0(0x1ca)](this['global'][_0x1e99f0(0x1cf)],!![])){const _0x17e3be=_0x419074[_0x1e99f0(0x1ce)][_0x1e99f0(0x1f9)];logger[_0x1e99f0(0x20d)](_0x1e99f0(0x1c3)+_0x17e3be),_0x419074[_0x1e99f0(0x1ce)][_0x1e99f0(0x213)]=_0x35cc3e[_0x1e99f0(0x1c4)];}}if(this[_0x1e99f0(0x1da)]&&_0x35cc3e[_0x1e99f0(0x1ca)](_0x29609c,_0x35cc3e['RCRjv']))try{const _0x870ae9=_0x419074['test'][_0x1e99f0(0x1c2)][_0x1e99f0(0x1e8)](_0x35cc3e['MRFlf']),_0x55ff37=_0x419074[_0x1e99f0(0x1ce)]['errors'];await this[_0x1e99f0(0x1da)][_0x1e99f0(0x1e9)](_0x870ae9,_0x55ff37);const _0x3f8c64=await this[_0x1e99f0(0x1da)]['shouldFailFast']();_0x35cc3e[_0x1e99f0(0x225)](this[_0x1e99f0(0x1f2)][_0x1e99f0(0x1cf)],![])&&_0x35cc3e['sCOee'](_0x3f8c64,!![])&&(this[_0x1e99f0(0x1f2)][_0x1e99f0(0x1cf)]=!![]);}catch(_0x2063d9){logger['debug'](_0x35cc3e[_0x1e99f0(0x20c)],_0x2063d9['message']);}_0x35cc3e[_0x1e99f0(0x1ca)](_0x29609c,_0x35cc3e[_0x1e99f0(0x1f3)])&&(this['failFast']&&this[_0x1e99f0(0x1da)]['cleanup']());}}module[a16_0x1742c0(0x1e0)]=CustomEnvironment;