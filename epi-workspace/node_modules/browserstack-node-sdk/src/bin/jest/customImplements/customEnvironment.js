const a18_0x30e0fc=a18_0x4d19;function a18_0x4c5c(){const _0x3eabdc=['4248uRFfgD','test_done','7304tFANSH','percyCaptureMode','teardown','failFast','11261NsKCqu','lkoPn','browserstackAgentV2','\x20>\x20','join','requireModule','__skipSessionStatus','test_start','getInstance','sNckP','__timeout','shutdown','handleTestEvent','__drivers','skip','isNotUndefined','__platformCaps','KbpBq','testContext','browserStackPercyOptions','node','onTestDone','setup','isTrue','cleanup','PIJVD','__driversArray','exports','../../../helpers/test-orchestration/failfastManager','aLAus','registerListeners','__esModule','winstonLogger','browserstackPercyBestPlatform','470752sStJeO','LjRWP','global','modifyCommand','browserstackPlatformIndex','TfcEY','split','qqniG','cAwCy','__webdriver','GdYty','shouldProcessEventForTesthub','message','BSTACK_JEST_TEST_ENV','../../../helpers/test-observability/requestQueueHandler','eJbCr','failFastActive','cleanupDrivers','configuration','NNmXm','126KBNgqX','projectConfig','HjEth','builder','3573941GAZjlF','../../../helpers/test-observability/utils','percy','nudzE','../../../helpers/logger','framework','../../../helpers/helper','errors','projectName','requireSeleniumWebdriver','xYQZv','failFastOptions','VYKEG','__jestRetries','sessionNameProvided','retries__','Builder','resolveTestEnvironment','name','2302045OxOvQy','../../utils/constants','aKKfd','test','../../../index','browserStackGlobals','bSxoU','isBrowserstackInfra','egwJv','buildName','gxGTJ','testPath','qGZlF','3532947vekMZm','platformCaps','shouldFailFast','debug','skipSessionStatus','../../../helpers/testhub/utils','FRAMEWORKS','quit','nestedKeyValue','capability','JEST','default','getTestEnvironment','jest-environment-node','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','testEnvironmentOptions','dZRGT','mode','OXxhm','../test-observability/obsReporter','jest-config','3741594ufpgKy','ABZrK','ooGLF','BSTACK_DELTA'];a18_0x4c5c=function(){return _0x3eabdc;};return a18_0x4c5c();}(function(_0x2740d4,_0x238b11){const _0x3137c6=a18_0x4d19,_0x2b81b8=_0x2740d4();while(!![]){try{const _0x268fa5=parseInt(_0x3137c6(0x1db))/0x1*(parseInt(_0x3137c6(0x198))/0x2)+-parseInt(_0x3137c6(0x1bc))/0x3+parseInt(_0x3137c6(0x184))/0x4+parseInt(_0x3137c6(0x1af))/0x5+parseInt(_0x3137c6(0x1d1))/0x6+parseInt(_0x3137c6(0x19c))/0x7+parseInt(_0x3137c6(0x1d7))/0x8*(-parseInt(_0x3137c6(0x1d5))/0x9);if(_0x268fa5===_0x238b11)break;else _0x2b81b8['push'](_0x2b81b8['shift']());}catch(_0xa8f5fc){_0x2b81b8['push'](_0x2b81b8['shift']());}}}(a18_0x4c5c,0xc683d));function a18_0x4d19(_0x880f21,_0x3b355f){const _0x4c5cfe=a18_0x4c5c();return a18_0x4d19=function(_0x4d1951,_0x4eb7fe){_0x4d1951=_0x4d1951-0x16d;let _0x46415d=_0x4c5cfe[_0x4d1951];return _0x46415d;},a18_0x4d19(_0x880f21,_0x3b355f);}const helper=require(a18_0x30e0fc(0x1a2)),constants=require(a18_0x30e0fc(0x1b0)),{isTestObservabilitySession}=require(a18_0x30e0fc(0x19d)),RequestQueueHandler=require(a18_0x30e0fc(0x192)),ObservabilityReporter=require(a18_0x30e0fc(0x1cf)),testhubUtils=require(a18_0x30e0fc(0x1c1)),logger=require(a18_0x30e0fc(0x1a0))[a18_0x30e0fc(0x182)],getTestEnvironment=((()=>{const _0x337367=a18_0x30e0fc,_0x1d6bff={};_0x1d6bff[_0x337367(0x18b)]='jest-resolve',_0x1d6bff[_0x337367(0x1ce)]=_0x337367(0x1d0);const _0x4d1474=_0x1d6bff;try{const _0x744a62=helper[_0x337367(0x1e0)](_0x4d1474[_0x337367(0x18b)]);if(_0x744a62[_0x337367(0x1ad)])return _0x744a62[_0x337367(0x1ad)];const _0xd357ae=helper[_0x337367(0x1e0)](_0x4d1474[_0x337367(0x1ce)]);if(_0xd357ae[_0x337367(0x1c8)])return _0xd357ae[_0x337367(0x1c8)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x3c2b31=a18_0x30e0fc,_0xeff0bf={'VYKEG':function(_0x2bef20,_0x16f6f8){return _0x2bef20(_0x16f6f8);},'ZZtSy':_0x3c2b31(0x176),'NkHSi':_0x3c2b31(0x1c9)},_0x91d636=_0xeff0bf[_0x3c2b31(0x1a8)](getTestEnvironment,{'rootDir':process['cwd'](),'testEnvironment':process['env'][_0x3c2b31(0x191)]||_0xeff0bf['ZZtSy']});if(!_0x91d636)return _0xeff0bf[_0x3c2b31(0x1a8)](_interopRequireDefault,helper[_0x3c2b31(0x1e0)](_0xeff0bf['NkHSi']));return _0xeff0bf['VYKEG'](_interopRequireDefault,helper[_0x3c2b31(0x1e0)](_0x91d636));})()),_seleniumWebdriver2=((()=>{const _0x11c678=a18_0x30e0fc,_0x1dd4f2={'sNckP':function(_0x5c64d8,_0x43a650){return _0x5c64d8(_0x43a650);}};try{const _0x184b16=helper[_0x11c678(0x1a5)]();return helper[_0x11c678(0x187)](),_0x1dd4f2[_0x11c678(0x1e4)](_interopRequireDefault,_0x184b16);}catch{return null;}})());function _interopRequireDefault(_0x532604){const _0x4d69dc=a18_0x30e0fc;return _0x532604&&_0x532604[_0x4d69dc(0x181)]?_0x532604:{'default':_0x532604};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a18_0x30e0fc(0x1c7)][a18_0x30e0fc(0x1ac)]:null;class CustomEnvironment extends _jestUserEnvironment[a18_0x30e0fc(0x1c7)]{constructor(_0xdd1b39){const _0x13dc6e=a18_0x30e0fc,_0xb62cd8={'bSxoU':_0x13dc6e(0x1c3),'HjEth':function(_0x5c560e,_0x9ce5ba){return _0x5c560e+_0x9ce5ba;},'aLAus':'bstack:options','xYQZv':function(_0x3d14da,_0x6b172e){return _0x3d14da(_0x6b172e);},'NNmXm':_0x13dc6e(0x17e),'gvOcb':'5|9|6|4|0|7|8|2|1|3','dZRGT':_0x13dc6e(0x1cb),'GdYty':_0x13dc6e(0x175),'TfcEY':'percy','KbpBq':_0x13dc6e(0x183),'gxGTJ':_0x13dc6e(0x1d8),'nudzE':_0x13dc6e(0x1bd),'PIJVD':_0x13dc6e(0x1b3)};super(_0xdd1b39),this[_0x13dc6e(0x186)][_0x13dc6e(0x1e5)]=0x0,this['configuration']={};!_0xdd1b39[_0x13dc6e(0x1cb)]&&(_0xdd1b39[_0x13dc6e(0x1cb)]={});if(helper[_0x13dc6e(0x1b6)]()){_0xdd1b39[_0x13dc6e(0x1cb)]=_0xdd1b39[_0x13dc6e(0x199)]?_0xdd1b39['projectConfig'][_0x13dc6e(0x1cb)]:_0xdd1b39[_0x13dc6e(0x1cb)],this[_0x13dc6e(0x19b)]=new _seleniumWebdriver2[(_0x13dc6e(0x1c7))][(_0x13dc6e(0x1ac))](),this[_0x13dc6e(0x1c5)]=_0xdd1b39[_0x13dc6e(0x199)]?_0xdd1b39[_0x13dc6e(0x199)][_0x13dc6e(0x1c5)]:_0xdd1b39[_0x13dc6e(0x1c5)],this[_0x13dc6e(0x186)][_0x13dc6e(0x1e5)]=_0xb62cd8[_0x13dc6e(0x19a)](this[_0x13dc6e(0x196)]['timeout__'],constants[_0x13dc6e(0x1d4)]),this[_0x13dc6e(0x1a7)]=_0xdd1b39[_0x13dc6e(0x1cb)][_0x13dc6e(0x1da)];if(this[_0x13dc6e(0x1a7)]){const _0x121861=this[_0x13dc6e(0x1c5)][_0xb62cd8['aLAus']]?.[_0x13dc6e(0x1b8)]||'',_0x4e8cde=this[_0x13dc6e(0x1c5)][_0xb62cd8[_0x13dc6e(0x17f)]]?.[_0x13dc6e(0x1a4)]||'';this[_0x13dc6e(0x1da)]=new(_0xb62cd8['xYQZv'](require,_0xb62cd8[_0x13dc6e(0x197)]))(this[_0x13dc6e(0x1a7)],_0x121861,_0x4e8cde),this[_0x13dc6e(0x186)]['failFastActive']=![];}helper[_0x13dc6e(0x171)](this[_0x13dc6e(0x196)][_0x13dc6e(0x1ab)])&&(this[_0x13dc6e(0x186)][_0x13dc6e(0x1a9)]=this['configuration'][_0x13dc6e(0x1ab)]);}if(testhubUtils[_0x13dc6e(0x18f)]()){const _0x3993b9=new ObservabilityReporter();_0x3993b9[_0x13dc6e(0x180)]();}this[_0x13dc6e(0x186)][_0x13dc6e(0x1b4)]={},this['configuration']=_0xdd1b39[_0x13dc6e(0x1cb)],this[_0x13dc6e(0x196)][_0x13dc6e(0x1a1)]=constants[_0x13dc6e(0x1c2)][_0x13dc6e(0x1c6)];if(_seleniumWebdriver2){const _0x1820fb=_0xb62cd8['gvOcb'][_0x13dc6e(0x18a)]('|');let _0x32eab0=0x0;while(!![]){switch(_0x1820fb[_0x32eab0++]){case'0':this[_0x13dc6e(0x186)][_0x13dc6e(0x19e)]=helper[_0x13dc6e(0x1c4)](_0xdd1b39,[_0xb62cd8[_0x13dc6e(0x1cc)],_0xb62cd8[_0x13dc6e(0x18e)],_0xb62cd8[_0x13dc6e(0x189)]]);continue;case'1':this[_0x13dc6e(0x186)][_0x13dc6e(0x1e1)]=helper[_0x13dc6e(0x179)](this[_0x13dc6e(0x196)][_0x13dc6e(0x1c0)]);continue;case'2':helper['isTrue'](this[_0x13dc6e(0x196)]['skipSessionName'])?this[_0x13dc6e(0x186)]['sessionNameProvided']=!![]:this[_0x13dc6e(0x186)][_0x13dc6e(0x1aa)]=![];continue;case'3':this[_0x13dc6e(0x186)]['cleanup']=async()=>{const _0x2a4049=_0x13dc6e;await this[_0x2a4049(0x186)]['driver'][_0x2a4049(0x1c3)](_0xb62cd8[_0x2a4049(0x1b5)]);};continue;case'4':this['global']['browserstackPercyBestPlatform']=helper[_0x13dc6e(0x1c4)](_0xdd1b39,[_0xb62cd8[_0x13dc6e(0x1cc)],_0xb62cd8[_0x13dc6e(0x18e)],_0xb62cd8[_0x13dc6e(0x173)]]);continue;case'5':this[_0x13dc6e(0x186)][_0x13dc6e(0x16f)]=[];continue;case'6':this[_0x13dc6e(0x186)][_0x13dc6e(0x188)]=(_0xdd1b39['projectConfig']?_0xdd1b39[_0x13dc6e(0x199)][_0x13dc6e(0x188)]:_0xdd1b39['browserstackPlatformIndex'])||0x0;continue;case'7':this[_0x13dc6e(0x186)][_0x13dc6e(0x1d8)]=helper[_0x13dc6e(0x1c4)](_0xdd1b39,[_0xb62cd8[_0x13dc6e(0x1cc)],_0xb62cd8[_0x13dc6e(0x18e)],_0xb62cd8[_0x13dc6e(0x1b9)]]);continue;case'8':this[_0x13dc6e(0x186)][_0x13dc6e(0x172)]=helper[_0x13dc6e(0x1c4)](this[_0x13dc6e(0x196)],[_0xb62cd8[_0x13dc6e(0x19f)],this[_0x13dc6e(0x186)][_0x13dc6e(0x188)]])||{};continue;case'9':this[_0x13dc6e(0x186)][_0x13dc6e(0x18d)]=_0xb62cd8[_0x13dc6e(0x1a6)](require,_0xb62cd8[_0x13dc6e(0x17b)])[_0x13dc6e(0x1dd)]({...this[_0x13dc6e(0x196)],'capability':this[_0x13dc6e(0x1c5)]||{}},this,testhubUtils['shouldProcessEventForTesthub']());continue;}break;}}}async[a18_0x30e0fc(0x1d9)](){const _0x515731=a18_0x30e0fc;_seleniumWebdriver2&&(await helper[_0x515731(0x195)](this['global'][_0x515731(0x17c)]),this[_0x515731(0x186)][_0x515731(0x18d)][_0x515731(0x1ac)]=originalBuilder),await RequestQueueHandler[_0x515731(0x1e3)]()[_0x515731(0x16d)]();}async[a18_0x30e0fc(0x178)](){}async[a18_0x30e0fc(0x16e)](_0x4c64df,_0x5bf0a5){const _0x24065d=a18_0x30e0fc,_0x15ad48={};_0x15ad48[_0x24065d(0x1dc)]=function(_0x578918,_0x25728b){return _0x578918===_0x25728b;},_0x15ad48[_0x24065d(0x193)]=_0x24065d(0x1e2),_0x15ad48['cAwCy']=function(_0x35d65e,_0x1e7da0){return _0x35d65e===_0x1e7da0;},_0x15ad48[_0x24065d(0x1b7)]=_0x24065d(0x170),_0x15ad48[_0x24065d(0x1d3)]=function(_0xc7b5c2,_0x41f4f0){return _0xc7b5c2===_0x41f4f0;},_0x15ad48[_0x24065d(0x1bb)]=_0x24065d(0x1d6),_0x15ad48['LjRWP']=_0x24065d(0x1de),_0x15ad48['YTcJH']='Error\x20in\x20fail-fast\x20test_done\x20handler:',_0x15ad48[_0x24065d(0x1b1)]=function(_0x3bf08f,_0x3e6bd1){return _0x3bf08f===_0x3e6bd1;},_0x15ad48['ABZrK']='teardown';const _0x3edd49=_0x15ad48,{name:_0x439a97}=_0x4c64df;if(_0x3edd49[_0x24065d(0x1dc)](_0x439a97,_0x3edd49['eJbCr'])){this['global'][_0x24065d(0x174)]=_0x4c64df[_0x24065d(0x1b2)];if(_0x3edd49[_0x24065d(0x18c)](this[_0x24065d(0x186)][_0x24065d(0x194)],!![])){const _0x5ed482=_0x4c64df[_0x24065d(0x1b2)][_0x24065d(0x1ae)];logger['info'](_0x24065d(0x1ca)+_0x5ed482),_0x4c64df['test'][_0x24065d(0x1cd)]=_0x3edd49[_0x24065d(0x1b7)];}}if(this[_0x24065d(0x1da)]&&_0x3edd49[_0x24065d(0x1d3)](_0x439a97,_0x3edd49[_0x24065d(0x1bb)]))try{const _0x130f68=_0x4c64df[_0x24065d(0x1b2)][_0x24065d(0x1ba)][_0x24065d(0x1df)](_0x3edd49[_0x24065d(0x185)]),_0x483d29=_0x4c64df[_0x24065d(0x1b2)][_0x24065d(0x1a3)];await this[_0x24065d(0x1da)][_0x24065d(0x177)](_0x130f68,_0x483d29);const _0x3387a3=await this['failFast'][_0x24065d(0x1be)]();_0x3edd49['ooGLF'](this[_0x24065d(0x186)][_0x24065d(0x194)],![])&&_0x3edd49[_0x24065d(0x1dc)](_0x3387a3,!![])&&(this['global'][_0x24065d(0x194)]=!![]);}catch(_0x38a1ed){logger[_0x24065d(0x1bf)](_0x3edd49['YTcJH'],_0x38a1ed[_0x24065d(0x190)]);}_0x3edd49[_0x24065d(0x1b1)](_0x439a97,_0x3edd49[_0x24065d(0x1d2)])&&(this['failFast']&&this[_0x24065d(0x1da)][_0x24065d(0x17a)]());}}module[a18_0x30e0fc(0x17d)]=CustomEnvironment;