const a16_0x98b809=a16_0x6a94;(function(_0x1fb4f1,_0x5a06a7){const _0x134e3b=a16_0x6a94,_0xa8caa8=_0x1fb4f1();while(!![]){try{const _0x2386ae=-parseInt(_0x134e3b(0xfd))/0x1+parseInt(_0x134e3b(0x121))/0x2*(-parseInt(_0x134e3b(0xf1))/0x3)+-parseInt(_0x134e3b(0x12d))/0x4*(parseInt(_0x134e3b(0x11a))/0x5)+parseInt(_0x134e3b(0x12b))/0x6+parseInt(_0x134e3b(0x104))/0x7*(parseInt(_0x134e3b(0x12f))/0x8)+-parseInt(_0x134e3b(0x129))/0x9+parseInt(_0x134e3b(0x108))/0xa;if(_0x2386ae===_0x5a06a7)break;else _0xa8caa8['push'](_0xa8caa8['shift']());}catch(_0x57034d){_0xa8caa8['push'](_0xa8caa8['shift']());}}}(a16_0x1e65,0x5f522));const helper=require(a16_0x98b809(0x13b)),constants=require('../../utils/constants'),{isTestObservabilitySession}=require(a16_0x98b809(0x154)),RequestQueueHandler=require(a16_0x98b809(0x11c)),ObservabilityReporter=require(a16_0x98b809(0xfc)),testhubUtils=require('../../../helpers/testhub/utils'),logger=require(a16_0x98b809(0x131))[a16_0x98b809(0x142)],getTestEnvironment=((()=>{const _0x3436f7=a16_0x98b809,_0x3f631c={};_0x3f631c[_0x3436f7(0x137)]='jest-resolve',_0x3f631c['hDwPq']=_0x3436f7(0x159);const _0x1df0c9=_0x3f631c;try{const _0x43fb25=helper[_0x3436f7(0x101)](_0x1df0c9[_0x3436f7(0x137)]);if(_0x43fb25['resolveTestEnvironment'])return _0x43fb25[_0x3436f7(0x115)];const _0x4f9212=helper['requireModule'](_0x1df0c9['hDwPq']);if(_0x4f9212['getTestEnvironment'])return _0x4f9212[_0x3436f7(0x15e)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x11a72f=a16_0x98b809,_0x19dc06={'NZAll':function(_0x3dc0a4,_0x55f457){return _0x3dc0a4(_0x55f457);},'PeiJB':_0x11a72f(0x14a),'cLkla':_0x11a72f(0x15a),'suSFU':function(_0x4d2a34,_0x5772d2){return _0x4d2a34(_0x5772d2);}},_0x3bc51f=_0x19dc06[_0x11a72f(0x12c)](getTestEnvironment,{'rootDir':process[_0x11a72f(0x141)](),'testEnvironment':process[_0x11a72f(0xf2)][_0x11a72f(0x10e)]||_0x19dc06['PeiJB']});if(!_0x3bc51f)return _0x19dc06[_0x11a72f(0x12c)](_interopRequireDefault,helper[_0x11a72f(0x101)](_0x19dc06['cLkla']));return _0x19dc06['suSFU'](_interopRequireDefault,helper['requireModule'](_0x3bc51f));})()),_seleniumWebdriver2=((()=>{const _0x3ee86b=a16_0x98b809,_0x42a506={'aSTnV':function(_0x2b6650,_0x2569bc){return _0x2b6650(_0x2569bc);}};try{const _0x46e719=helper[_0x3ee86b(0x138)]();return helper[_0x3ee86b(0x134)](),_0x42a506['aSTnV'](_interopRequireDefault,_0x46e719);}catch{return null;}})());function _interopRequireDefault(_0x4764fe){const _0x44fcc8=a16_0x98b809;return _0x4764fe&&_0x4764fe[_0x44fcc8(0x139)]?_0x4764fe:{'default':_0x4764fe};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0x98b809(0x146)][a16_0x98b809(0x15c)]:null;class CustomEnvironment extends _jestUserEnvironment['default']{constructor(_0x466e94){const _0x4f8597=a16_0x98b809,_0x4eacc6={'LONvj':_0x4f8597(0x13a),'IrmKt':function(_0x284502,_0x43cf59){return _0x284502+_0x43cf59;},'eyDGF':'bstack:options','KKnIE':function(_0x3e6cb7,_0xced4ad){return _0x3e6cb7(_0xced4ad);},'QfXKn':_0x4f8597(0xf9),'zcknh':'6|0|7|1|4|2|5|3','SFeor':_0x4f8597(0x11e),'hzZqL':_0x4f8597(0x103),'HlFzz':'browserStackPercyOptions','ZcBNR':_0x4f8597(0xf8),'TEzjB':_0x4f8597(0x125),'DpzQK':_0x4f8597(0x110)};super(_0x466e94),this[_0x4f8597(0x12e)]['__timeout']=0x0,this[_0x4f8597(0x151)]={};!_0x466e94['testEnvironmentOptions']&&(_0x466e94['testEnvironmentOptions']={});if(helper[_0x4f8597(0x122)]()){_0x466e94[_0x4f8597(0x103)]=_0x466e94[_0x4f8597(0x130)]?_0x466e94['projectConfig'][_0x4f8597(0x103)]:_0x466e94[_0x4f8597(0x103)];_seleniumWebdriver2&&(this[_0x4f8597(0x140)]=new _seleniumWebdriver2[(_0x4f8597(0x146))]['Builder']());this['capability']=_0x466e94[_0x4f8597(0x130)]?_0x466e94[_0x4f8597(0x130)][_0x4f8597(0x132)]:_0x466e94[_0x4f8597(0x132)],this[_0x4f8597(0x12e)][_0x4f8597(0x114)]=_0x4eacc6[_0x4f8597(0x15d)](_0x466e94[_0x4f8597(0x103)][_0x4f8597(0x126)]||0x1388,constants[_0x4f8597(0x136)]),this[_0x4f8597(0x150)]=_0x466e94[_0x4f8597(0x103)][_0x4f8597(0x153)];if(this[_0x4f8597(0x150)]){const _0x51aba8=this[_0x4f8597(0x132)][_0x4eacc6[_0x4f8597(0x158)]]?.[_0x4f8597(0x13d)]||'',_0x4152b5=this[_0x4f8597(0x132)][_0x4eacc6['eyDGF']]?.['projectName']||'';this[_0x4f8597(0x153)]=new(_0x4eacc6[_0x4f8597(0x124)](require,_0x4eacc6['QfXKn']))(this['failFastOptions'],_0x51aba8,_0x4152b5),this[_0x4f8597(0x12e)][_0x4f8597(0x15f)]=![];}helper[_0x4f8597(0x143)](_0x466e94[_0x4f8597(0x103)][_0x4f8597(0x106)])&&(this[_0x4f8597(0x12e)]['__jestRetries']=_0x466e94[_0x4f8597(0x103)][_0x4f8597(0x106)]);}if(testhubUtils[_0x4f8597(0x11f)]()){const _0x227f24=new ObservabilityReporter();_0x227f24[_0x4f8597(0x14e)]();}this[_0x4f8597(0x12e)][_0x4f8597(0xf3)]={},this[_0x4f8597(0x151)]=_0x466e94[_0x4f8597(0x103)],this[_0x4f8597(0x151)]['framework']=constants[_0x4f8597(0x145)][_0x4f8597(0x10a)],this[_0x4f8597(0x12e)][_0x4f8597(0x155)]=(_0x466e94['projectConfig']?_0x466e94[_0x4f8597(0x130)][_0x4f8597(0x155)]:_0x466e94[_0x4f8597(0x155)])||0x0,this[_0x4f8597(0x12e)][_0x4f8597(0x100)]=this[_0x4f8597(0x151)]&&this[_0x4f8597(0x151)]['platformCaps']&&Array['isArray'](this[_0x4f8597(0x151)]['platformCaps'])&&this[_0x4f8597(0x151)]['platformCaps'][this['global']['browserstackPlatformIndex']]||{};const _0x248da5=this[_0x4f8597(0x12e)][_0x4f8597(0x155)],_0x1ab82d={...this[_0x4f8597(0x151)],'capability':this[_0x4f8597(0x151)]['capabilities']&&Array[_0x4f8597(0x120)](this[_0x4f8597(0x151)][_0x4f8597(0x102)])&&this[_0x4f8597(0x151)]['capabilities'][_0x248da5]||{},'platformCaps':this['configuration'][_0x4f8597(0xfe)]&&Array[_0x4f8597(0x120)](this[_0x4f8597(0x151)]['platformCaps'])&&this[_0x4f8597(0x151)][_0x4f8597(0xfe)][_0x248da5]||{}};delete _0x1ab82d[_0x4f8597(0x102)],this[_0x4f8597(0x12e)][_0x4f8597(0x13c)]=_0x1ab82d;if(_seleniumWebdriver2){const _0x48062f=_0x4eacc6['zcknh'][_0x4f8597(0xf6)]('|');let _0x5496ab=0x0;while(!![]){switch(_0x48062f[_0x5496ab++]){case'0':this[_0x4f8597(0x12e)]['__webdriver']=_0x4eacc6['KKnIE'](require,_0x4eacc6[_0x4f8597(0x112)])[_0x4f8597(0xf4)]({...this['configuration'],'capability':this['capability']||{}},this,testhubUtils[_0x4f8597(0x11f)]());continue;case'1':this[_0x4f8597(0x12e)]['percy']=helper['nestedKeyValue'](_0x466e94,[_0x4eacc6['hzZqL'],_0x4eacc6[_0x4f8597(0x14c)],_0x4eacc6['ZcBNR']]);continue;case'2':helper[_0x4f8597(0x105)](this['configuration']['skipSessionName'])?this[_0x4f8597(0x12e)][_0x4f8597(0x116)]=!![]:this[_0x4f8597(0x12e)][_0x4f8597(0x116)]=![];continue;case'3':this['global'][_0x4f8597(0x111)]=async()=>{const _0x4f1065=_0x4f8597;await this[_0x4f1065(0x12e)]['driver']['quit'](_0x4eacc6['LONvj']);};continue;case'4':this['global'][_0x4f8597(0x125)]=helper[_0x4f8597(0x118)](_0x466e94,[_0x4eacc6['hzZqL'],_0x4eacc6[_0x4f8597(0x14c)],_0x4eacc6[_0x4f8597(0x10f)]]);continue;case'5':this[_0x4f8597(0x12e)][_0x4f8597(0x13e)]=helper[_0x4f8597(0x105)](this['configuration'][_0x4f8597(0x107)]);continue;case'6':this[_0x4f8597(0x12e)][_0x4f8597(0x10d)]=[];continue;case'7':this[_0x4f8597(0x12e)][_0x4f8597(0x110)]=helper['nestedKeyValue'](_0x466e94,[_0x4eacc6[_0x4f8597(0x149)],_0x4eacc6[_0x4f8597(0x14c)],_0x4eacc6[_0x4f8597(0x113)]]);continue;}break;}}}async[a16_0x98b809(0x10b)](){const _0x4363ae=a16_0x98b809;_seleniumWebdriver2&&(await helper[_0x4363ae(0x152)](this['global'][_0x4363ae(0x15b)]),this['global']['__webdriver']['Builder']=originalBuilder),await RequestQueueHandler['getInstance']()['shutdown']();}async[a16_0x98b809(0xf5)](){}async['handleTestEvent'](_0x5ad2b2,_0x1ac266){const _0x15795a=a16_0x98b809,_0x41fc93={};_0x41fc93[_0x15795a(0x147)]=function(_0x2f6680,_0x2536a8){return _0x2f6680===_0x2536a8;},_0x41fc93[_0x15795a(0x12a)]=_0x15795a(0x148),_0x41fc93[_0x15795a(0x14b)]=function(_0x3c5040,_0x48460c){return _0x3c5040===_0x48460c;},_0x41fc93[_0x15795a(0x13f)]=_0x15795a(0xff),_0x41fc93[_0x15795a(0x11b)]=function(_0x47b186,_0x3b472f){return _0x47b186===_0x3b472f;},_0x41fc93[_0x15795a(0xfa)]=_0x15795a(0xfb),_0x41fc93[_0x15795a(0x135)]=_0x15795a(0x123),_0x41fc93[_0x15795a(0x128)]=function(_0xe75af3,_0x35ad75){return _0xe75af3===_0x35ad75;},_0x41fc93[_0x15795a(0x14d)]=_0x15795a(0x109),_0x41fc93[_0x15795a(0x11d)]=_0x15795a(0x10b);const _0x586997=_0x41fc93,{name:_0x58938d}=_0x5ad2b2;if(_0x586997['VysCX'](_0x58938d,_0x586997[_0x15795a(0x12a)])){this['global'][_0x15795a(0x117)]=_0x5ad2b2[_0x15795a(0x133)];if(_0x586997[_0x15795a(0x14b)](this[_0x15795a(0x12e)]['failFastActive'],!![])){const _0x28ebd7=_0x5ad2b2[_0x15795a(0x133)][_0x15795a(0x10c)];logger['info'](_0x15795a(0x157)+_0x28ebd7),_0x5ad2b2[_0x15795a(0x133)][_0x15795a(0x156)]=_0x586997[_0x15795a(0x13f)];}}if(this[_0x15795a(0x153)]&&_0x586997['tZSSy'](_0x58938d,_0x586997[_0x15795a(0xfa)]))try{const _0x2778cd=_0x5ad2b2['test']['testPath'][_0x15795a(0x144)](_0x586997[_0x15795a(0x135)]),_0x400e4d=_0x5ad2b2[_0x15795a(0x133)][_0x15795a(0x127)];await this['failFast'][_0x15795a(0x119)](_0x2778cd,_0x400e4d);const _0x44e859=await this['failFast'][_0x15795a(0xf7)]();_0x586997[_0x15795a(0x11b)](this['global'][_0x15795a(0x15f)],![])&&_0x586997[_0x15795a(0x128)](_0x44e859,!![])&&(this[_0x15795a(0x12e)][_0x15795a(0x15f)]=!![]);}catch(_0x5c4897){logger['debug'](_0x586997[_0x15795a(0x14d)],_0x5c4897[_0x15795a(0x14f)]);}_0x586997['VysCX'](_0x58938d,_0x586997[_0x15795a(0x11d)])&&(this[_0x15795a(0x153)]&&this[_0x15795a(0x153)][_0x15795a(0x111)]());}}function a16_0x1e65(){const _0xea422b=['capability','test','modifyCommand','NQUnw','BSTACK_DELTA','iGpge','requireSeleniumWebdriver','__esModule','quit','../../../helpers/helper','jestConfig','buildName','__skipSessionStatus','Lqfxs','builder','cwd','winstonLogger','isNotUndefined','join','FRAMEWORKS','default','VysCX','test_start','hzZqL','node','WpVvu','HlFzz','IATZg','registerListeners','message','failFastOptions','configuration','cleanupDrivers','failFast','../../../helpers/test-observability/utils','browserstackPlatformIndex','mode','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','eyDGF','jest-config','jest-environment-node','__driversArray','Builder','IrmKt','getTestEnvironment','failFastActive','51YRbojT','env','browserStackGlobals','browserstackAgentV2','setup','split','shouldFailFast','percy','../../../helpers/test-orchestration/failfastManager','bXzzr','test_done','../test-observability/obsReporter','69476okXQeu','platformCaps','skip','__platformCaps','requireModule','capabilities','testEnvironmentOptions','14dZEqmi','isTrue','retries__','skipSessionStatus','10986720FHqXJt','Error\x20in\x20fail-fast\x20test_done\x20handler:','JEST','teardown','name','__drivers','BSTACK_JEST_TEST_ENV','TEzjB','browserstackPercyBestPlatform','cleanup','SFeor','DpzQK','__timeout','resolveTestEnvironment','sessionNameProvided','testContext','nestedKeyValue','onTestDone','3694070AbzhAL','tZSSy','../../../helpers/test-observability/requestQueueHandler','oFTNb','../../../index','shouldProcessEventForTesthub','isArray','76688zjJhKO','isBrowserstackInfra','\x20>\x20','KKnIE','percyCaptureMode','timeout__','errors','TAdnP','5231322DiDxwY','WlcVb','4379880RFgUcS','NZAll','4AKteur','global','2412712axLxYA','projectConfig','../../../helpers/logger'];a16_0x1e65=function(){return _0xea422b;};return a16_0x1e65();}function a16_0x6a94(_0x2365f0,_0x1c51db){const _0x1e65cf=a16_0x1e65();return a16_0x6a94=function(_0x6a9432,_0x39595d){_0x6a9432=_0x6a9432-0xf1;let _0x1ea404=_0x1e65cf[_0x6a9432];return _0x1ea404;},a16_0x6a94(_0x2365f0,_0x1c51db);}module['exports']=CustomEnvironment;