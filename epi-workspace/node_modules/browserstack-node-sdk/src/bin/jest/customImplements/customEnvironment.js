const a16_0x165b8a=a16_0x58c5;function a16_0xfc58(){const _0x16f3eb=['QdzVY','__jestRetries','timeout__','shouldFailFast','browserstackPercyBestPlatform','retries__','percy','name','Error\x20in\x20fail-fast\x20test_done\x20handler:','2456172bMyKVw','requireModule','failFastActive','cwd','browserstackAgentV2','__timeout','browserStackGlobals','tUESu','errors','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','1723992moqvxw','registerListeners','70qbxOQX','shutdown','shouldProcessEventForTesthub','jestConfig','__webdriver','tqCga','vbdbw','FRAMEWORKS','ofWaT','configuration','split','2400440CsMHFi','2843355xbywvD','../../../helpers/test-observability/utils','4959230rxqmvz','lRuEl','11ktDtaK','onTestDone','mWQEx','jest-resolve','3207rlPpZY','capabilities','getTestEnvironment','isTrue','default','../../../helpers/testhub/utils','jest-config','test_done','Builder','cJPBU','PUsMB','usakK','GQurT','cleanup','EjzuZ','niUll','test','UZJIu','bstack:options','../../../helpers/test-orchestration/failfastManager','setup','isBrowserstackInfra','__drivers','testEnvironmentOptions','testPath','requireSeleniumWebdriver','info','Hnoxb','debug','browserstackPlatformIndex','global','percyCaptureMode','../../../helpers/helper','failFastOptions','198GjXMZx','YgiIs','getInstance','RlLbv','183988smEGoT','quit','resolveTestEnvironment','__skipSessionStatus','projectConfig','sessionNameProvided','modifyCommand','framework','BSTACK_JEST_TEST_ENV','../test-observability/obsReporter','mode','teardown','isArray','2|7|3|5|6|1|0|4','36SqEUlG','platformCaps','isNotUndefined','qaxeq','BSTACK_DELTA','laIii','capability','env','handleTestEvent','uXqjl','cleanupDrivers','TMNDc','okyoS','node','nestedKeyValue','__platformCaps','jest-environment-node','failFast','ybysT','zBxZr','RzkYh','ljlfA'];a16_0xfc58=function(){return _0x16f3eb;};return a16_0xfc58();}(function(_0x3ba01a,_0x4988d9){const _0x3e6df0=a16_0x58c5,_0x262d63=_0x3ba01a();while(!![]){try{const _0x58cd55=parseInt(_0x3e6df0(0x1b3))/0x1*(parseInt(_0x3e6df0(0x212))/0x2)+parseInt(_0x3e6df0(0x206))/0x3+parseInt(_0x3e6df0(0x1aa))/0x4+-parseInt(_0x3e6df0(0x1ab))/0x5+-parseInt(_0x3e6df0(0x1d5))/0x6*(-parseInt(_0x3e6df0(0x1d9))/0x7)+parseInt(_0x3e6df0(0x210))/0x8*(-parseInt(_0x3e6df0(0x1e7))/0x9)+parseInt(_0x3e6df0(0x1ad))/0xa*(-parseInt(_0x3e6df0(0x1af))/0xb);if(_0x58cd55===_0x4988d9)break;else _0x262d63['push'](_0x262d63['shift']());}catch(_0x291a46){_0x262d63['push'](_0x262d63['shift']());}}}(a16_0xfc58,0x73335));const helper=require(a16_0x165b8a(0x1d3)),constants=require('../../utils/constants'),{isTestObservabilitySession}=require(a16_0x165b8a(0x1ac)),RequestQueueHandler=require('../../../helpers/test-observability/requestQueueHandler'),ObservabilityReporter=require(a16_0x165b8a(0x1e2)),testhubUtils=require(a16_0x165b8a(0x1b8)),logger=require('../../../helpers/logger')['winstonLogger'],getTestEnvironment=((()=>{const _0x4e82a4=a16_0x165b8a,_0xb8cf9f={};_0xb8cf9f[_0x4e82a4(0x1f0)]=_0x4e82a4(0x1b2),_0xb8cf9f[_0x4e82a4(0x1c2)]=_0x4e82a4(0x1b9);const _0x18faa8=_0xb8cf9f;try{const _0x522ccf=helper[_0x4e82a4(0x207)](_0x18faa8[_0x4e82a4(0x1f0)]);if(_0x522ccf[_0x4e82a4(0x1db)])return _0x522ccf['resolveTestEnvironment'];const _0x553c7a=helper[_0x4e82a4(0x207)](_0x18faa8[_0x4e82a4(0x1c2)]);if(_0x553c7a['getTestEnvironment'])return _0x553c7a[_0x4e82a4(0x1b5)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x52a0d2=a16_0x165b8a,_0x132aa1={'laIii':function(_0x423b69,_0x11ebc6){return _0x423b69(_0x11ebc6);},'QbbsE':_0x52a0d2(0x1f4),'usakK':_0x52a0d2(0x1f7)},_0x5c9bd9=_0x132aa1['laIii'](getTestEnvironment,{'rootDir':process[_0x52a0d2(0x209)](),'testEnvironment':process[_0x52a0d2(0x1ee)][_0x52a0d2(0x1e1)]||_0x132aa1['QbbsE']});if(!_0x5c9bd9)return _0x132aa1[_0x52a0d2(0x1ec)](_interopRequireDefault,helper[_0x52a0d2(0x207)](_0x132aa1[_0x52a0d2(0x1be)]));return _0x132aa1['laIii'](_interopRequireDefault,helper[_0x52a0d2(0x207)](_0x5c9bd9));})()),_seleniumWebdriver2=((()=>{const _0x5e8378=a16_0x165b8a,_0x13443d={'RzkYh':function(_0x35e75a,_0x4d9e82){return _0x35e75a(_0x4d9e82);}};try{const _0x2148ac=helper[_0x5e8378(0x1cc)]();return helper[_0x5e8378(0x1df)](),_0x13443d[_0x5e8378(0x1fb)](_interopRequireDefault,_0x2148ac);}catch{return null;}})());function a16_0x58c5(_0x3c1975,_0x40b585){const _0xfc58d4=a16_0xfc58();return a16_0x58c5=function(_0x58c552,_0x51d263){_0x58c552=_0x58c552-0x1a4;let _0x226ab6=_0xfc58d4[_0x58c552];return _0x226ab6;},a16_0x58c5(_0x3c1975,_0x40b585);}function _interopRequireDefault(_0x4b7c73){return _0x4b7c73&&_0x4b7c73['__esModule']?_0x4b7c73:{'default':_0x4b7c73};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2['default']['Builder']:null;class CustomEnvironment extends _jestUserEnvironment[a16_0x165b8a(0x1b7)]{constructor(_0x297d84){const _0x38f926=a16_0x165b8a,_0x35f5b4={'uZUIf':_0x38f926(0x1da),'kXRRS':function(_0x20802c,_0x3d5519){return _0x20802c+_0x3d5519;},'ofWaT':_0x38f926(0x1c5),'mWQEx':function(_0x26c124,_0x27adae){return _0x26c124(_0x27adae);},'Hnoxb':_0x38f926(0x1c6),'EjzuZ':_0x38f926(0x1e6),'vbdbw':_0x38f926(0x1ca),'ybysT':'browserStackPercyOptions','lRuEl':_0x38f926(0x201),'QdzVY':'percy','cJPBU':_0x38f926(0x1d2),'ljlfA':function(_0x2c52b1,_0x5debb7){return _0x2c52b1(_0x5debb7);},'RlLbv':'../../../index'};super(_0x297d84),this[_0x38f926(0x1d1)][_0x38f926(0x20b)]=0x0,this['configuration']={};!_0x297d84[_0x38f926(0x1ca)]&&(_0x297d84['testEnvironmentOptions']={});if(helper[_0x38f926(0x1c8)]()){_0x297d84[_0x38f926(0x1ca)]=_0x297d84[_0x38f926(0x1dd)]?_0x297d84['projectConfig'][_0x38f926(0x1ca)]:_0x297d84[_0x38f926(0x1ca)];_seleniumWebdriver2&&(this['builder']=new _seleniumWebdriver2['default'][(_0x38f926(0x1bb))]());this[_0x38f926(0x1ed)]=_0x297d84[_0x38f926(0x1dd)]?_0x297d84[_0x38f926(0x1dd)][_0x38f926(0x1ed)]:_0x297d84[_0x38f926(0x1ed)],this[_0x38f926(0x1d1)]['__timeout']=_0x35f5b4['kXRRS'](_0x297d84[_0x38f926(0x1ca)][_0x38f926(0x1ff)]||0x1388,constants[_0x38f926(0x1eb)]),this[_0x38f926(0x1d4)]=_0x297d84[_0x38f926(0x1ca)][_0x38f926(0x1f8)];if(this[_0x38f926(0x1d4)]){const _0x54da3c=this['capability'][_0x35f5b4[_0x38f926(0x1a7)]]?.['buildName']||'',_0x4b8505=this[_0x38f926(0x1ed)][_0x35f5b4[_0x38f926(0x1a7)]]?.['projectName']||'';this[_0x38f926(0x1f8)]=new(_0x35f5b4[_0x38f926(0x1b1)](require,_0x35f5b4[_0x38f926(0x1ce)]))(this[_0x38f926(0x1d4)],_0x54da3c,_0x4b8505),this[_0x38f926(0x1d1)]['failFastActive']=![];}helper[_0x38f926(0x1e9)](_0x297d84[_0x38f926(0x1ca)]['retries__'])&&(this[_0x38f926(0x1d1)][_0x38f926(0x1fe)]=_0x297d84['testEnvironmentOptions'][_0x38f926(0x202)]);}if(testhubUtils[_0x38f926(0x214)]()){const _0x14b5b4=new ObservabilityReporter();_0x14b5b4[_0x38f926(0x211)]();}this[_0x38f926(0x1d1)][_0x38f926(0x20c)]={},this[_0x38f926(0x1a8)]=_0x297d84['testEnvironmentOptions'],this[_0x38f926(0x1a8)][_0x38f926(0x1e0)]=constants[_0x38f926(0x1a6)]['JEST'],this['global'][_0x38f926(0x1d0)]=(_0x297d84[_0x38f926(0x1dd)]?_0x297d84[_0x38f926(0x1dd)][_0x38f926(0x1d0)]:_0x297d84[_0x38f926(0x1d0)])||0x0,this[_0x38f926(0x1d1)][_0x38f926(0x1f6)]=this['configuration']&&this[_0x38f926(0x1a8)][_0x38f926(0x1e8)]&&Array[_0x38f926(0x1e5)](this[_0x38f926(0x1a8)][_0x38f926(0x1e8)])&&this[_0x38f926(0x1a8)][_0x38f926(0x1e8)][this['global'][_0x38f926(0x1d0)]]||{};const _0x57fcc1=this[_0x38f926(0x1d1)][_0x38f926(0x1d0)],_0x179cda={...this[_0x38f926(0x1a8)],'capability':this[_0x38f926(0x1a8)]['capabilities']&&Array['isArray'](this[_0x38f926(0x1a8)][_0x38f926(0x1b4)])&&this[_0x38f926(0x1a8)]['capabilities'][_0x57fcc1]||{},'platformCaps':this[_0x38f926(0x1a8)][_0x38f926(0x1e8)]&&Array[_0x38f926(0x1e5)](this[_0x38f926(0x1a8)][_0x38f926(0x1e8)])&&this[_0x38f926(0x1a8)]['platformCaps'][_0x57fcc1]||{}};delete _0x179cda[_0x38f926(0x1b4)],this['global'][_0x38f926(0x215)]=_0x179cda;if(_seleniumWebdriver2){const _0x1ec7ca=_0x35f5b4[_0x38f926(0x1c1)][_0x38f926(0x1a9)]('|');let _0x17e3de=0x0;while(!![]){switch(_0x1ec7ca[_0x17e3de++]){case'0':this[_0x38f926(0x1d1)][_0x38f926(0x1dc)]=helper[_0x38f926(0x1b6)](this[_0x38f926(0x1a8)]['skipSessionStatus']);continue;case'1':helper[_0x38f926(0x1b6)](this[_0x38f926(0x1a8)]['skipSessionName'])?this[_0x38f926(0x1d1)][_0x38f926(0x1de)]=!![]:this['global'][_0x38f926(0x1de)]=![];continue;case'2':this['global'][_0x38f926(0x1c9)]=[];continue;case'3':this['global'][_0x38f926(0x201)]=helper[_0x38f926(0x1f5)](_0x297d84,[_0x35f5b4[_0x38f926(0x1a5)],_0x35f5b4[_0x38f926(0x1f9)],_0x35f5b4[_0x38f926(0x1ae)]]);continue;case'4':this[_0x38f926(0x1d1)][_0x38f926(0x1c0)]=async()=>{const _0x49ee95=_0x38f926;await this[_0x49ee95(0x1d1)]['driver'][_0x49ee95(0x1da)](_0x35f5b4['uZUIf']);};continue;case'5':this[_0x38f926(0x1d1)][_0x38f926(0x203)]=helper[_0x38f926(0x1f5)](_0x297d84,[_0x35f5b4[_0x38f926(0x1a5)],_0x35f5b4[_0x38f926(0x1f9)],_0x35f5b4[_0x38f926(0x1fd)]]);continue;case'6':this['global'][_0x38f926(0x1d2)]=helper[_0x38f926(0x1f5)](_0x297d84,[_0x35f5b4[_0x38f926(0x1a5)],_0x35f5b4[_0x38f926(0x1f9)],_0x35f5b4[_0x38f926(0x1bc)]]);continue;case'7':this[_0x38f926(0x1d1)][_0x38f926(0x216)]=_0x35f5b4[_0x38f926(0x1fc)](require,_0x35f5b4[_0x38f926(0x1d8)])[_0x38f926(0x20a)]({...this[_0x38f926(0x1a8)],'capability':this['capability']||{}},this,testhubUtils[_0x38f926(0x214)]());continue;}break;}}}async[a16_0x165b8a(0x1e4)](){const _0x56646c=a16_0x165b8a;_seleniumWebdriver2&&(await helper[_0x56646c(0x1f1)](this['global']['__driversArray']),this[_0x56646c(0x1d1)][_0x56646c(0x216)][_0x56646c(0x1bb)]=originalBuilder),await RequestQueueHandler[_0x56646c(0x1d7)]()[_0x56646c(0x213)]();}async[a16_0x165b8a(0x1c7)](){}async[a16_0x165b8a(0x1ef)](_0x2386e6,_0x22c24e){const _0x204ba6=a16_0x165b8a,_0x366ca7={};_0x366ca7[_0x204ba6(0x1ea)]=function(_0x5b9936,_0x4ab2ee){return _0x5b9936===_0x4ab2ee;},_0x366ca7[_0x204ba6(0x1bd)]='test_start',_0x366ca7[_0x204ba6(0x1c4)]=function(_0x265a7c,_0x4151d5){return _0x265a7c===_0x4151d5;},_0x366ca7[_0x204ba6(0x1f2)]='skip',_0x366ca7[_0x204ba6(0x1a4)]=_0x204ba6(0x1ba),_0x366ca7[_0x204ba6(0x1fa)]='\x20>\x20',_0x366ca7[_0x204ba6(0x1d6)]=function(_0x34f7da,_0x4e30ec){return _0x34f7da===_0x4e30ec;},_0x366ca7[_0x204ba6(0x1bf)]=_0x204ba6(0x205),_0x366ca7['okyoS']=function(_0x28ed24,_0x4f096c){return _0x28ed24===_0x4f096c;},_0x366ca7[_0x204ba6(0x20d)]=_0x204ba6(0x1e4);const _0x202f83=_0x366ca7,{name:_0x451ba1}=_0x2386e6;if(_0x202f83[_0x204ba6(0x1ea)](_0x451ba1,_0x202f83[_0x204ba6(0x1bd)])){this['global']['testContext']=_0x2386e6[_0x204ba6(0x1c3)];if(_0x202f83['UZJIu'](this[_0x204ba6(0x1d1)][_0x204ba6(0x208)],!![])){const _0x2953b1=_0x2386e6[_0x204ba6(0x1c3)][_0x204ba6(0x204)];logger[_0x204ba6(0x1cd)](_0x204ba6(0x20f)+_0x2953b1),_0x2386e6[_0x204ba6(0x1c3)][_0x204ba6(0x1e3)]=_0x202f83[_0x204ba6(0x1f2)];}}if(this[_0x204ba6(0x1f8)]&&_0x202f83['UZJIu'](_0x451ba1,_0x202f83[_0x204ba6(0x1a4)]))try{const _0x530d90=_0x2386e6[_0x204ba6(0x1c3)][_0x204ba6(0x1cb)]['join'](_0x202f83['zBxZr']),_0x415f3e=_0x2386e6[_0x204ba6(0x1c3)][_0x204ba6(0x20e)];await this[_0x204ba6(0x1f8)][_0x204ba6(0x1b0)](_0x530d90,_0x415f3e);const _0x36464d=await this[_0x204ba6(0x1f8)][_0x204ba6(0x200)]();_0x202f83[_0x204ba6(0x1d6)](this['global'][_0x204ba6(0x208)],![])&&_0x202f83[_0x204ba6(0x1c4)](_0x36464d,!![])&&(this[_0x204ba6(0x1d1)][_0x204ba6(0x208)]=!![]);}catch(_0x3debf8){logger[_0x204ba6(0x1cf)](_0x202f83[_0x204ba6(0x1bf)],_0x3debf8['message']);}_0x202f83[_0x204ba6(0x1f3)](_0x451ba1,_0x202f83[_0x204ba6(0x20d)])&&(this[_0x204ba6(0x1f8)]&&this[_0x204ba6(0x1f8)][_0x204ba6(0x1c0)]());}}module['exports']=CustomEnvironment;