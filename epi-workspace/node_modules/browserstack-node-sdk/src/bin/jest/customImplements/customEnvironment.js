const a16_0xad3189=a16_0x2b88;(function(_0x5b51a1,_0x394a29){const _0x1966c6=a16_0x2b88,_0x1fb57b=_0x5b51a1();while(!![]){try{const _0x38812e=-parseInt(_0x1966c6(0x107))/0x1+-parseInt(_0x1966c6(0xc3))/0x2+parseInt(_0x1966c6(0xea))/0x3*(parseInt(_0x1966c6(0xf1))/0x4)+parseInt(_0x1966c6(0xfb))/0x5+parseInt(_0x1966c6(0x122))/0x6*(-parseInt(_0x1966c6(0xc8))/0x7)+parseInt(_0x1966c6(0xeb))/0x8*(-parseInt(_0x1966c6(0xcd))/0x9)+parseInt(_0x1966c6(0xfa))/0xa*(parseInt(_0x1966c6(0x113))/0xb);if(_0x38812e===_0x394a29)break;else _0x1fb57b['push'](_0x1fb57b['shift']());}catch(_0x52d132){_0x1fb57b['push'](_0x1fb57b['shift']());}}}(a16_0x1a25,0xab0e9));const helper=require(a16_0xad3189(0x101)),constants=require(a16_0xad3189(0xe0)),{isTestObservabilitySession}=require(a16_0xad3189(0xcc)),RequestQueueHandler=require(a16_0xad3189(0x128)),ObservabilityReporter=require('../test-observability/obsReporter'),testhubUtils=require(a16_0xad3189(0x123)),logger=require('../../../helpers/logger')[a16_0xad3189(0xe2)],getTestEnvironment=((()=>{const _0x18cd2e=a16_0xad3189,_0x3cc228={};_0x3cc228[_0x18cd2e(0xba)]=_0x18cd2e(0x117),_0x3cc228[_0x18cd2e(0xf3)]=_0x18cd2e(0xce);const _0x10b0e1=_0x3cc228;try{const _0x47e039=helper[_0x18cd2e(0x12a)](_0x10b0e1[_0x18cd2e(0xba)]);if(_0x47e039[_0x18cd2e(0x110)])return _0x47e039[_0x18cd2e(0x110)];const _0x25227c=helper[_0x18cd2e(0x12a)](_0x10b0e1[_0x18cd2e(0xf3)]);if(_0x25227c['getTestEnvironment'])return _0x25227c[_0x18cd2e(0xd2)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x3d0142=a16_0xad3189,_0x32c06c={'gvEnu':function(_0x210f44,_0x148048){return _0x210f44(_0x148048);},'urzcS':_0x3d0142(0x12c),'oLtCQ':_0x3d0142(0xe5),'wSZED':function(_0x1d0049,_0x4f8926){return _0x1d0049(_0x4f8926);}},_0xd69bba=_0x32c06c[_0x3d0142(0xd9)](getTestEnvironment,{'rootDir':process[_0x3d0142(0xf5)](),'testEnvironment':process[_0x3d0142(0xc2)][_0x3d0142(0xc1)]||_0x32c06c[_0x3d0142(0xf8)]});if(!_0xd69bba)return _0x32c06c[_0x3d0142(0xd9)](_interopRequireDefault,helper[_0x3d0142(0x12a)](_0x32c06c[_0x3d0142(0x103)]));return _0x32c06c['wSZED'](_interopRequireDefault,helper[_0x3d0142(0x12a)](_0xd69bba));})()),_seleniumWebdriver2=((()=>{const _0x198415=a16_0xad3189,_0x9cc406={'AKYYu':function(_0x21b50a,_0xb5df83){return _0x21b50a(_0xb5df83);}};try{const _0x3705b6=helper[_0x198415(0xc5)]();return helper[_0x198415(0xde)](),_0x9cc406['AKYYu'](_interopRequireDefault,_0x3705b6);}catch{return null;}})());function a16_0x1a25(){const _0x5e761b=['kIQhb','JEST','\x20>\x20','qFUoP','skip','__platformCaps','BSTACK_JEST_TEST_ENV','env','499882ZhVfSK','testPath','requireSeleniumWebdriver','split','testEnvironmentOptions','1801037NcFTnD','failFastOptions','isBrowserstackInfra','percy','../../../helpers/test-observability/utils','9KKnjGG','jest-config','zoDbQ','skipSessionStatus','aRpKO','getTestEnvironment','bstack:options','CEddF','debug','default','capability','sessionNameProvided','gvEnu','browserStackPercyOptions','skipSessionName','__driversArray','setup','modifyCommand','shutdown','../../utils/constants','exports','winstonLogger','UYFbK','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','jest-environment-node','test_done','vxntV','browserstackPercyBestPlatform','timeout__','33uAbDkx','8708584vHKVQD','percyCaptureMode','__timeout','cleanupDrivers','browserStackGlobals','isNotUndefined','434832XOfKmN','cleanup','vZTOt','fmYOk','cwd','global','rokcr','urzcS','ySqQP','152690yyzoYC','6139835ARBQRi','test','browserstackPlatformIndex','getInstance','__drivers','buildName','../../../helpers/helper','testContext','oLtCQ','xpegp','nfUoX','builder','1220528lRCJuV','shouldProcessEventForTesthub','Builder','FRAMEWORKS','__skipSessionStatus','wLXEx','registerListeners','retries__','PSuHY','resolveTestEnvironment','QsqdN','__webdriver','1529LAuPXQ','jestConfig','ukovx','../../../index','jest-resolve','../../../helpers/test-orchestration/failfastManager','__jestRetries','Xyced','isTrue','join','platformCaps','capabilities','qKzwm','test_start','handleTestEvent','30SaWXGf','../../../helpers/testhub/utils','projectConfig','nestedKeyValue','configuration','qGRxy','../../../helpers/test-observability/requestQueueHandler','failFastActive','requireModule','BSTACK_DELTA','node','browserstackAgentV2','teardown','failFast','errors','driver','KHsMN','isArray','zmTnn'];a16_0x1a25=function(){return _0x5e761b;};return a16_0x1a25();}function _interopRequireDefault(_0x46e2a3){return _0x46e2a3&&_0x46e2a3['__esModule']?_0x46e2a3:{'default':_0x46e2a3};}function a16_0x2b88(_0x4b0fbd,_0x3b8106){const _0x1a253f=a16_0x1a25();return a16_0x2b88=function(_0x2b88e6,_0x64d0cf){_0x2b88e6=_0x2b88e6-0xb6;let _0x5f2ed6=_0x1a253f[_0x2b88e6];return _0x5f2ed6;},a16_0x2b88(_0x4b0fbd,_0x3b8106);}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2['default'][a16_0xad3189(0x109)]:null;class CustomEnvironment extends _jestUserEnvironment['default']{constructor(_0x151289){const _0x490600=a16_0xad3189,_0x4d72d8={'wLXEx':'quit','xpegp':function(_0x48c2c3,_0x13740f){return _0x48c2c3+_0x13740f;},'qFUoP':_0x490600(0xd3),'rokcr':function(_0x69cba3,_0x436e8a){return _0x69cba3(_0x436e8a);},'nfUoX':_0x490600(0x118),'UYFbK':'2|3|4|0|5|1|7|6','zoDbQ':_0x490600(0xc7),'aRpKO':_0x490600(0xda),'qKzwm':_0x490600(0xcb),'CEddF':function(_0x456cf6,_0x494467){return _0x456cf6(_0x494467);},'CHlkH':_0x490600(0x116),'KHsMN':_0x490600(0xe8),'QsqdN':_0x490600(0xec)};super(_0x151289),this[_0x490600(0xf6)][_0x490600(0xed)]=0x0,this[_0x490600(0x126)]={};!_0x151289['testEnvironmentOptions']&&(_0x151289[_0x490600(0xc7)]={});if(helper[_0x490600(0xca)]()){_0x151289[_0x490600(0xc7)]=_0x151289['projectConfig']?_0x151289[_0x490600(0x124)][_0x490600(0xc7)]:_0x151289['testEnvironmentOptions'];_seleniumWebdriver2&&(this[_0x490600(0x106)]=new _seleniumWebdriver2[(_0x490600(0xd6))][(_0x490600(0x109))]());this[_0x490600(0xd7)]=_0x151289[_0x490600(0x124)]?_0x151289[_0x490600(0x124)][_0x490600(0xd7)]:_0x151289[_0x490600(0xd7)],this['global']['__timeout']=_0x4d72d8[_0x490600(0x104)](_0x151289[_0x490600(0xc7)][_0x490600(0xe9)]||0x1388,constants[_0x490600(0x12b)]),this[_0x490600(0xc9)]=_0x151289[_0x490600(0xc7)]['failFast'];if(this[_0x490600(0xc9)]){const _0x874da6=this[_0x490600(0xd7)][_0x4d72d8[_0x490600(0xbe)]]?.[_0x490600(0x100)]||'',_0x464921=this[_0x490600(0xd7)][_0x4d72d8['qFUoP']]?.['projectName']||'';this[_0x490600(0x12f)]=new(_0x4d72d8[_0x490600(0xf7)](require,_0x4d72d8[_0x490600(0x105)]))(this[_0x490600(0xc9)],_0x874da6,_0x464921),this['global'][_0x490600(0x129)]=![];}helper[_0x490600(0xf0)](_0x151289[_0x490600(0xc7)]['retries__'])&&(this[_0x490600(0xf6)][_0x490600(0x119)]=_0x151289['testEnvironmentOptions'][_0x490600(0x10e)]);}if(testhubUtils[_0x490600(0x108)]()){const _0x32e9e8=new ObservabilityReporter();_0x32e9e8[_0x490600(0x10d)]();}this[_0x490600(0xf6)][_0x490600(0xef)]={},this[_0x490600(0x126)]=_0x151289[_0x490600(0xc7)],this[_0x490600(0x126)]['framework']=constants[_0x490600(0x10a)][_0x490600(0xbc)],this[_0x490600(0xf6)][_0x490600(0xfd)]=(_0x151289[_0x490600(0x124)]?_0x151289['projectConfig']['browserstackPlatformIndex']:_0x151289[_0x490600(0xfd)])||0x0,this[_0x490600(0xf6)][_0x490600(0xc0)]=this[_0x490600(0x126)]&&this[_0x490600(0x126)][_0x490600(0x11d)]&&Array[_0x490600(0xb9)](this['configuration'][_0x490600(0x11d)])&&this[_0x490600(0x126)]['platformCaps'][this[_0x490600(0xf6)][_0x490600(0xfd)]]||{};const _0x5a8d5a=this[_0x490600(0xf6)][_0x490600(0xfd)],_0x4617bb={...this[_0x490600(0x126)],'capability':this['configuration'][_0x490600(0x11e)]&&Array[_0x490600(0xb9)](this[_0x490600(0x126)][_0x490600(0x11e)])&&this[_0x490600(0x126)][_0x490600(0x11e)][_0x5a8d5a]||{},'platformCaps':this[_0x490600(0x126)]['platformCaps']&&Array[_0x490600(0xb9)](this['configuration'][_0x490600(0x11d)])&&this[_0x490600(0x126)][_0x490600(0x11d)][_0x5a8d5a]||{}};delete _0x4617bb['capabilities'],this[_0x490600(0xf6)][_0x490600(0x114)]=_0x4617bb;if(_seleniumWebdriver2){const _0x284d0c=_0x4d72d8[_0x490600(0xe3)][_0x490600(0xc6)]('|');let _0x172e3b=0x0;while(!![]){switch(_0x284d0c[_0x172e3b++]){case'0':this[_0x490600(0xf6)][_0x490600(0xcb)]=helper[_0x490600(0x125)](_0x151289,[_0x4d72d8[_0x490600(0xcf)],_0x4d72d8[_0x490600(0xd1)],_0x4d72d8[_0x490600(0x11f)]]);continue;case'1':helper[_0x490600(0x11b)](this[_0x490600(0x126)][_0x490600(0xdb)])?this[_0x490600(0xf6)][_0x490600(0xd8)]=!![]:this[_0x490600(0xf6)][_0x490600(0xd8)]=![];continue;case'2':this[_0x490600(0xf6)][_0x490600(0xff)]=[];continue;case'3':this[_0x490600(0xf6)][_0x490600(0x112)]=_0x4d72d8[_0x490600(0xd4)](require,_0x4d72d8['CHlkH'])[_0x490600(0x12d)]({...this[_0x490600(0x126)],'capability':this[_0x490600(0xd7)]||{}},this,testhubUtils[_0x490600(0x108)]());continue;case'4':this[_0x490600(0xf6)]['browserstackPercyBestPlatform']=helper[_0x490600(0x125)](_0x151289,[_0x4d72d8[_0x490600(0xcf)],_0x4d72d8['aRpKO'],_0x4d72d8[_0x490600(0xb8)]]);continue;case'5':this[_0x490600(0xf6)]['percyCaptureMode']=helper[_0x490600(0x125)](_0x151289,[_0x4d72d8[_0x490600(0xcf)],_0x4d72d8[_0x490600(0xd1)],_0x4d72d8[_0x490600(0x111)]]);continue;case'6':this[_0x490600(0xf6)][_0x490600(0xf2)]=async()=>{const _0xbabfb8=_0x490600;await this[_0xbabfb8(0xf6)][_0xbabfb8(0xb7)]['quit'](_0x4d72d8[_0xbabfb8(0x10c)]);};continue;case'7':this[_0x490600(0xf6)][_0x490600(0x10b)]=helper[_0x490600(0x11b)](this[_0x490600(0x126)][_0x490600(0xd0)]);continue;}break;}}}async['teardown'](){const _0x107755=a16_0xad3189;_seleniumWebdriver2&&(await helper[_0x107755(0xee)](this[_0x107755(0xf6)][_0x107755(0xdc)]),this[_0x107755(0xf6)][_0x107755(0x112)][_0x107755(0x109)]=originalBuilder),await RequestQueueHandler[_0x107755(0xfe)]()[_0x107755(0xdf)]();}async[a16_0xad3189(0xdd)](){}async[a16_0xad3189(0x121)](_0xa74f7d,_0x1de59e){const _0x306a84=a16_0xad3189,_0x1d64f9={};_0x1d64f9['kIQhb']=function(_0x7bf6d4,_0x406491){return _0x7bf6d4===_0x406491;},_0x1d64f9[_0x306a84(0xf9)]=_0x306a84(0x120),_0x1d64f9[_0x306a84(0x10f)]=_0x306a84(0xbf),_0x1d64f9[_0x306a84(0xf4)]=_0x306a84(0xe6),_0x1d64f9[_0x306a84(0x11a)]=_0x306a84(0xbd),_0x1d64f9[_0x306a84(0x127)]=function(_0x3193b1,_0x46744a){return _0x3193b1===_0x46744a;},_0x1d64f9[_0x306a84(0xe7)]='Error\x20in\x20fail-fast\x20test_done\x20handler:',_0x1d64f9[_0x306a84(0x115)]=_0x306a84(0x12e);const _0x3d1b73=_0x1d64f9,{name:_0x1a9f06}=_0xa74f7d;if(_0x3d1b73['kIQhb'](_0x1a9f06,_0x3d1b73[_0x306a84(0xf9)])){this[_0x306a84(0xf6)][_0x306a84(0x102)]=_0xa74f7d[_0x306a84(0xfc)];if(_0x3d1b73[_0x306a84(0xbb)](this[_0x306a84(0xf6)][_0x306a84(0x129)],!![])){const _0x3fd83b=_0xa74f7d['test']['name'];logger['info'](_0x306a84(0xe4)+_0x3fd83b),_0xa74f7d[_0x306a84(0xfc)]['mode']=_0x3d1b73[_0x306a84(0x10f)];}}if(this[_0x306a84(0x12f)]&&_0x3d1b73['kIQhb'](_0x1a9f06,_0x3d1b73[_0x306a84(0xf4)]))try{const _0xaa5722=_0xa74f7d[_0x306a84(0xfc)][_0x306a84(0xc4)][_0x306a84(0x11c)](_0x3d1b73[_0x306a84(0x11a)]),_0xb943e8=_0xa74f7d['test'][_0x306a84(0xb6)];await this[_0x306a84(0x12f)]['onTestDone'](_0xaa5722,_0xb943e8);const _0x4736fe=await this[_0x306a84(0x12f)]['shouldFailFast']();_0x3d1b73[_0x306a84(0x127)](this[_0x306a84(0xf6)][_0x306a84(0x129)],![])&&_0x3d1b73['kIQhb'](_0x4736fe,!![])&&(this['global'][_0x306a84(0x129)]=!![]);}catch(_0x507729){logger[_0x306a84(0xd5)](_0x3d1b73['vxntV'],_0x507729['message']);}_0x3d1b73[_0x306a84(0xbb)](_0x1a9f06,_0x3d1b73[_0x306a84(0x115)])&&(this[_0x306a84(0x12f)]&&this[_0x306a84(0x12f)][_0x306a84(0xf2)]());}}module[a16_0xad3189(0xe1)]=CustomEnvironment;