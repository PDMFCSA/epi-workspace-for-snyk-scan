function a16_0x4bf1(){const _0x4ccc55=['browserstackPlatformIndex','gslqc','requireModule','skipSessionName','isNotUndefined','projectName','capability','HkGfK','framework','__esModule','MDpdk','wyaYn','shouldProcessEventForTesthub','__skipSessionStatus','../../../helpers/test-observability/utils','getTestEnvironment','bgehw','driver','name','JEST','skip','percyCaptureMode','__timeout','UMiuO','debug','wuuHK','testContext','shouldFailFast','QbKwJ','cleanup','odEBP','failFast','vwSyx','hDMRr','test','NkDQy','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','buildName','info','40tfiTzZ','nNIeT','../../../helpers/test-observability/requestQueueHandler','VWjph','ixtrs','test_start','GSUxU','cleanupDrivers','winstonLogger','failFastActive','5416QLfGbe','skipSessionStatus','modifyCommand','global','browserstackPercyBestPlatform','requireSeleniumWebdriver','isBrowserstackInfra','0|7|3|4|6|5|2|1','vFGrS','Error\x20in\x20fail-fast\x20test_done\x20handler:','mode','setup','testEnvironmentOptions','xlMbU','env','6484520OZceOO','isArray','../../../helpers/testhub/utils','registerListeners','12230fYQtvF','UJZwA','__driversArray','sessionNameProvided','builder','ZLxHf','cwd','9OazDPF','test_done','timeout__','YhKuI','platformCaps','12604GqEwmo','retries__','__drivers','BSTACK_JEST_TEST_ENV','getInstance','browserstackAgentV2','Builder','1248IhRJGI','default','isTrue','55WDQMVh','2400584SuAhNh','../../../index','fsVke','resolveTestEnvironment','QqPaF','__webdriver','WgXIS','\x20>\x20','errors','testPath','percy','bstack:options','1656750bRfXvW','xFFQT','4571LDkDXe','projectConfig','mjmtj','failFastOptions','2643684hTaHtU','nestedKeyValue','quit','TLuSq','split','teardown','capabilities','join','configuration','handleTestEvent'];a16_0x4bf1=function(){return _0x4ccc55;};return a16_0x4bf1();}const a16_0x268822=a16_0x3514;(function(_0x5d8063,_0x2e9296){const _0x10cd50=a16_0x3514,_0x58995e=_0x5d8063();while(!![]){try{const _0x7d776f=-parseInt(_0x10cd50(0x96))/0x1*(parseInt(_0x10cd50(0xbf))/0x2)+parseInt(_0x10cd50(0xd6))/0x3+parseInt(_0x10cd50(0xca))/0x4+-parseInt(_0x10cd50(0xb3))/0x5*(parseInt(_0x10cd50(0xc6))/0x6)+-parseInt(_0x10cd50(0xd8))/0x7*(parseInt(_0x10cd50(0xa0))/0x8)+parseInt(_0x10cd50(0xba))/0x9*(-parseInt(_0x10cd50(0xaf))/0xa)+parseInt(_0x10cd50(0xc9))/0xb*(parseInt(_0x10cd50(0xdc))/0xc);if(_0x7d776f===_0x2e9296)break;else _0x58995e['push'](_0x58995e['shift']());}catch(_0x192999){_0x58995e['push'](_0x58995e['shift']());}}}(a16_0x4bf1,0x62476));const helper=require('../../../helpers/helper'),constants=require('../../utils/constants'),{isTestObservabilitySession}=require(a16_0x268822(0x7d)),RequestQueueHandler=require(a16_0x268822(0x98)),ObservabilityReporter=require('../test-observability/obsReporter'),testhubUtils=require(a16_0x268822(0xb1)),logger=require('../../../helpers/logger')[a16_0x268822(0x9e)],getTestEnvironment=((()=>{const _0x4edede=a16_0x268822,_0x1932a2={};_0x1932a2['ZcCJm']='jest-resolve',_0x1932a2[_0x4edede(0x92)]='jest-config';const _0x4a41ed=_0x1932a2;try{const _0x58c204=helper[_0x4edede(0xe8)](_0x4a41ed['ZcCJm']);if(_0x58c204[_0x4edede(0xcd)])return _0x58c204[_0x4edede(0xcd)];const _0x2cca2e=helper['requireModule'](_0x4a41ed[_0x4edede(0x92)]);if(_0x2cca2e['getTestEnvironment'])return _0x2cca2e[_0x4edede(0x7e)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x45c45f=a16_0x268822,_0x26d591={'xFFQT':function(_0x48dd22,_0x3187d9){return _0x48dd22(_0x3187d9);},'nNIeT':'node','YhKuI':function(_0x5dadfd,_0x11980a){return _0x5dadfd(_0x11980a);},'eOMnZ':'jest-environment-node','MDpdk':function(_0x6aea51,_0x395b17){return _0x6aea51(_0x395b17);}},_0x42e334=_0x26d591[_0x45c45f(0xd7)](getTestEnvironment,{'rootDir':process[_0x45c45f(0xb9)](),'testEnvironment':process[_0x45c45f(0xae)][_0x45c45f(0xc2)]||_0x26d591[_0x45c45f(0x97)]});if(!_0x42e334)return _0x26d591[_0x45c45f(0xbd)](_interopRequireDefault,helper[_0x45c45f(0xe8)](_0x26d591['eOMnZ']));return _0x26d591[_0x45c45f(0x79)](_interopRequireDefault,helper[_0x45c45f(0xe8)](_0x42e334));})()),_seleniumWebdriver2=((()=>{const _0x592572=a16_0x268822,_0x310983={'fsVke':function(_0x3c1a7a,_0x49afbc){return _0x3c1a7a(_0x49afbc);}};try{const _0x3162ec=helper[_0x592572(0xa5)]();return helper[_0x592572(0xa2)](),_0x310983[_0x592572(0xcc)](_interopRequireDefault,_0x3162ec);}catch{return null;}})());function a16_0x3514(_0x2df6d1,_0x285bef){const _0x4bf14f=a16_0x4bf1();return a16_0x3514=function(_0x3514cf,_0x4503c4){_0x3514cf=_0x3514cf-0x79;let _0x129e3e=_0x4bf14f[_0x3514cf];return _0x129e3e;},a16_0x3514(_0x2df6d1,_0x285bef);}function _interopRequireDefault(_0x4c0cf1){const _0x6f406d=a16_0x268822;return _0x4c0cf1&&_0x4c0cf1[_0x6f406d(0xef)]?_0x4c0cf1:{'default':_0x4c0cf1};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0x268822(0xc7)]['Builder']:null;class CustomEnvironment extends _jestUserEnvironment['default']{constructor(_0x418ed4){const _0x38a6e=a16_0x268822,_0x5a101c={'xlMbU':'quit','UMiuO':function(_0x5de87b,_0x339df9){return _0x5de87b+_0x339df9;},'hDMRr':_0x38a6e(0xd5),'vFGrS':function(_0x7f9394,_0x917d58){return _0x7f9394(_0x917d58);},'gslqc':'../../../helpers/test-orchestration/failfastManager','TLuSq':_0x38a6e(0xa7),'odEBP':_0x38a6e(0xac),'ixtrs':'browserStackPercyOptions','VWjph':_0x38a6e(0xa4),'ZLxHf':_0x38a6e(0xd4),'UJZwA':_0x38a6e(0x84),'XEoiL':function(_0x59402b,_0x1d9519){return _0x59402b(_0x1d9519);},'vwSyx':_0x38a6e(0xcb)};super(_0x418ed4),this['global'][_0x38a6e(0x85)]=0x0,this['configuration']={};!_0x418ed4['testEnvironmentOptions']&&(_0x418ed4[_0x38a6e(0xac)]={});if(helper[_0x38a6e(0xa6)]()){_0x418ed4[_0x38a6e(0xac)]=_0x418ed4['projectConfig']?_0x418ed4[_0x38a6e(0xd9)]['testEnvironmentOptions']:_0x418ed4[_0x38a6e(0xac)];_seleniumWebdriver2&&(this[_0x38a6e(0xb7)]=new _seleniumWebdriver2[(_0x38a6e(0xc7))][(_0x38a6e(0xc5))]());this[_0x38a6e(0xec)]=_0x418ed4[_0x38a6e(0xd9)]?_0x418ed4[_0x38a6e(0xd9)][_0x38a6e(0xec)]:_0x418ed4[_0x38a6e(0xec)],this[_0x38a6e(0xa3)][_0x38a6e(0x85)]=_0x5a101c[_0x38a6e(0x86)](_0x418ed4[_0x38a6e(0xac)][_0x38a6e(0xbc)]||0x1388,constants['BSTACK_DELTA']),this[_0x38a6e(0xdb)]=_0x418ed4['testEnvironmentOptions']['failFast'];if(this[_0x38a6e(0xdb)]){const _0x4fb11f=this[_0x38a6e(0xec)][_0x5a101c[_0x38a6e(0x90)]]?.[_0x38a6e(0x94)]||'',_0x3f3cd3=this['capability'][_0x5a101c[_0x38a6e(0x90)]]?.[_0x38a6e(0xeb)]||'';this[_0x38a6e(0x8e)]=new(_0x5a101c[_0x38a6e(0xa8)](require,_0x5a101c[_0x38a6e(0xe7)]))(this[_0x38a6e(0xdb)],_0x4fb11f,_0x3f3cd3),this[_0x38a6e(0xa3)][_0x38a6e(0x9f)]=![];}helper[_0x38a6e(0xea)](_0x418ed4[_0x38a6e(0xac)][_0x38a6e(0xc0)])&&(this[_0x38a6e(0xa3)]['__jestRetries']=_0x418ed4[_0x38a6e(0xac)][_0x38a6e(0xc0)]);}if(testhubUtils[_0x38a6e(0x7b)]()){const _0x2a441f=new ObservabilityReporter();_0x2a441f[_0x38a6e(0xb2)]();}this['global']['browserStackGlobals']={},this['configuration']=_0x418ed4[_0x38a6e(0xac)],this[_0x38a6e(0xe4)][_0x38a6e(0xee)]=constants['FRAMEWORKS'][_0x38a6e(0x82)],this[_0x38a6e(0xa3)][_0x38a6e(0xe6)]=(_0x418ed4[_0x38a6e(0xd9)]?_0x418ed4[_0x38a6e(0xd9)]['browserstackPlatformIndex']:_0x418ed4[_0x38a6e(0xe6)])||0x0,this[_0x38a6e(0xa3)]['__platformCaps']=this[_0x38a6e(0xe4)]&&this[_0x38a6e(0xe4)][_0x38a6e(0xbe)]&&Array['isArray'](this[_0x38a6e(0xe4)][_0x38a6e(0xbe)])&&this['configuration']['platformCaps'][this[_0x38a6e(0xa3)]['browserstackPlatformIndex']]||{};const _0x17cb07=this[_0x38a6e(0xa3)]['browserstackPlatformIndex'],_0xd06a2a={...this[_0x38a6e(0xe4)],'capability':this[_0x38a6e(0xe4)][_0x38a6e(0xe2)]&&Array['isArray'](this['configuration'][_0x38a6e(0xe2)])&&this['configuration']['capabilities'][_0x17cb07]||{},'platformCaps':this[_0x38a6e(0xe4)]['platformCaps']&&Array[_0x38a6e(0xb0)](this[_0x38a6e(0xe4)][_0x38a6e(0xbe)])&&this['configuration'][_0x38a6e(0xbe)][_0x17cb07]||{}};delete _0xd06a2a['capabilities'],this['global']['jestConfig']=_0xd06a2a;if(_seleniumWebdriver2){const _0xb4c60b=_0x5a101c[_0x38a6e(0xdf)][_0x38a6e(0xe0)]('|');let _0xe9ab94=0x0;while(!![]){switch(_0xb4c60b[_0xe9ab94++]){case'0':this[_0x38a6e(0xa3)][_0x38a6e(0xc1)]=[];continue;case'1':this['global'][_0x38a6e(0x8c)]=async()=>{const _0x3248ed=_0x38a6e;await this['global'][_0x3248ed(0x80)][_0x3248ed(0xde)](_0x5a101c[_0x3248ed(0xad)]);};continue;case'2':this[_0x38a6e(0xa3)][_0x38a6e(0x7c)]=helper[_0x38a6e(0xc8)](this[_0x38a6e(0xe4)][_0x38a6e(0xa1)]);continue;case'3':this[_0x38a6e(0xa3)][_0x38a6e(0xa4)]=helper[_0x38a6e(0xdd)](_0x418ed4,[_0x5a101c['odEBP'],_0x5a101c['ixtrs'],_0x5a101c[_0x38a6e(0x99)]]);continue;case'4':this['global']['percy']=helper[_0x38a6e(0xdd)](_0x418ed4,[_0x5a101c[_0x38a6e(0x8d)],_0x5a101c[_0x38a6e(0x9a)],_0x5a101c[_0x38a6e(0xb8)]]);continue;case'5':helper[_0x38a6e(0xc8)](this['configuration'][_0x38a6e(0xe9)])?this[_0x38a6e(0xa3)]['sessionNameProvided']=!![]:this[_0x38a6e(0xa3)][_0x38a6e(0xb6)]=![];continue;case'6':this[_0x38a6e(0xa3)][_0x38a6e(0x84)]=helper[_0x38a6e(0xdd)](_0x418ed4,[_0x5a101c[_0x38a6e(0x8d)],_0x5a101c['ixtrs'],_0x5a101c[_0x38a6e(0xb4)]]);continue;case'7':this[_0x38a6e(0xa3)][_0x38a6e(0xcf)]=_0x5a101c['XEoiL'](require,_0x5a101c[_0x38a6e(0x8f)])[_0x38a6e(0xc4)]({...this[_0x38a6e(0xe4)],'capability':this[_0x38a6e(0xec)]||{}},this,testhubUtils[_0x38a6e(0x7b)]());continue;}break;}}}async[a16_0x268822(0xe1)](){const _0x2f1b81=a16_0x268822;_seleniumWebdriver2&&(await helper[_0x2f1b81(0x9d)](this[_0x2f1b81(0xa3)][_0x2f1b81(0xb5)]),this[_0x2f1b81(0xa3)]['__webdriver']['Builder']=originalBuilder),await RequestQueueHandler[_0x2f1b81(0xc3)]()['shutdown']();}async[a16_0x268822(0xab)](){}async[a16_0x268822(0xe5)](_0x791fbf,_0x435560){const _0x330dc1=a16_0x268822,_0x164160={};_0x164160[_0x330dc1(0x88)]=function(_0x575331,_0x47d42e){return _0x575331===_0x47d42e;},_0x164160[_0x330dc1(0x8b)]=_0x330dc1(0x9b),_0x164160['QqPaF']=_0x330dc1(0x83),_0x164160[_0x330dc1(0x7f)]=function(_0x42b79a,_0x572968){return _0x42b79a===_0x572968;},_0x164160['wyaYn']=_0x330dc1(0xbb),_0x164160[_0x330dc1(0xda)]=_0x330dc1(0xd1),_0x164160['HkGfK']=_0x330dc1(0xa9),_0x164160[_0x330dc1(0x9c)]=function(_0x4c8634,_0x24be1a){return _0x4c8634===_0x24be1a;},_0x164160[_0x330dc1(0xd0)]=_0x330dc1(0xe1);const _0x179fb0=_0x164160,{name:_0x29da0d}=_0x791fbf;if(_0x179fb0[_0x330dc1(0x88)](_0x29da0d,_0x179fb0['QbKwJ'])){this['global'][_0x330dc1(0x89)]=_0x791fbf[_0x330dc1(0x91)];if(_0x179fb0[_0x330dc1(0x88)](this[_0x330dc1(0xa3)][_0x330dc1(0x9f)],!![])){const _0x517ae7=_0x791fbf['test'][_0x330dc1(0x81)];logger[_0x330dc1(0x95)](_0x330dc1(0x93)+_0x517ae7),_0x791fbf[_0x330dc1(0x91)][_0x330dc1(0xaa)]=_0x179fb0[_0x330dc1(0xce)];}}if(this[_0x330dc1(0x8e)]&&_0x179fb0[_0x330dc1(0x7f)](_0x29da0d,_0x179fb0[_0x330dc1(0x7a)]))try{const _0x499cd5=_0x791fbf['test'][_0x330dc1(0xd3)][_0x330dc1(0xe3)](_0x179fb0[_0x330dc1(0xda)]),_0x4b620f=_0x791fbf[_0x330dc1(0x91)][_0x330dc1(0xd2)];await this[_0x330dc1(0x8e)]['onTestDone'](_0x499cd5,_0x4b620f);const _0x28c6f7=await this[_0x330dc1(0x8e)][_0x330dc1(0x8a)]();_0x179fb0[_0x330dc1(0x88)](this['global'][_0x330dc1(0x9f)],![])&&_0x179fb0[_0x330dc1(0x88)](_0x28c6f7,!![])&&(this['global']['failFastActive']=!![]);}catch(_0x54c912){logger[_0x330dc1(0x87)](_0x179fb0[_0x330dc1(0xed)],_0x54c912['message']);}_0x179fb0[_0x330dc1(0x9c)](_0x29da0d,_0x179fb0[_0x330dc1(0xd0)])&&(this[_0x330dc1(0x8e)]&&this[_0x330dc1(0x8e)][_0x330dc1(0x8c)]());}}module['exports']=CustomEnvironment;