const a16_0x12b175=a16_0x19cf;(function(_0x46d41f,_0x384a91){const _0xbb5b1d=a16_0x19cf,_0x4f83b8=_0x46d41f();while(!![]){try{const _0x17e707=-parseInt(_0xbb5b1d(0x18d))/0x1+parseInt(_0xbb5b1d(0x191))/0x2*(-parseInt(_0xbb5b1d(0x17b))/0x3)+-parseInt(_0xbb5b1d(0x18a))/0x4+parseInt(_0xbb5b1d(0x18e))/0x5*(parseInt(_0xbb5b1d(0x1c9))/0x6)+parseInt(_0xbb5b1d(0x17c))/0x7*(-parseInt(_0xbb5b1d(0x194))/0x8)+parseInt(_0xbb5b1d(0x1a1))/0x9+parseInt(_0xbb5b1d(0x1b9))/0xa;if(_0x17e707===_0x384a91)break;else _0x4f83b8['push'](_0x4f83b8['shift']());}catch(_0x14745d){_0x4f83b8['push'](_0x4f83b8['shift']());}}}(a16_0x7b47,0x52f41));const helper=require(a16_0x12b175(0x1d2)),constants=require(a16_0x12b175(0x1b2)),{isTestObservabilitySession}=require('../../../helpers/test-observability/utils'),RequestQueueHandler=require('../../../helpers/test-observability/requestQueueHandler'),ObservabilityReporter=require(a16_0x12b175(0x18c)),testhubUtils=require(a16_0x12b175(0x17d)),logger=require(a16_0x12b175(0x17a))[a16_0x12b175(0x16f)],getTestEnvironment=((()=>{const _0xa784e5=a16_0x12b175,_0x3a11bc={};_0x3a11bc[_0xa784e5(0x175)]=_0xa784e5(0x17e),_0x3a11bc[_0xa784e5(0x198)]=_0xa784e5(0x1d0);const _0x34de4d=_0x3a11bc;try{const _0x2376a6=helper[_0xa784e5(0x1ab)](_0x34de4d[_0xa784e5(0x175)]);if(_0x2376a6[_0xa784e5(0x1b4)])return _0x2376a6[_0xa784e5(0x1b4)];const _0x2f01ef=helper[_0xa784e5(0x1ab)](_0x34de4d[_0xa784e5(0x198)]);if(_0x2f01ef[_0xa784e5(0x1cd)])return _0x2f01ef[_0xa784e5(0x1cd)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x2151f2=a16_0x12b175,_0x4b2217={'tlMZZ':function(_0x26032c,_0x4b099a){return _0x26032c(_0x4b099a);},'yhyqp':_0x2151f2(0x16b),'ziETt':'jest-environment-node'},_0x23e7d0=_0x4b2217['tlMZZ'](getTestEnvironment,{'rootDir':process[_0x2151f2(0x19b)](),'testEnvironment':process[_0x2151f2(0x1c3)][_0x2151f2(0x19f)]||_0x4b2217[_0x2151f2(0x172)]});if(!_0x23e7d0)return _0x4b2217[_0x2151f2(0x184)](_interopRequireDefault,helper[_0x2151f2(0x1ab)](_0x4b2217[_0x2151f2(0x1af)]));return _0x4b2217['tlMZZ'](_interopRequireDefault,helper[_0x2151f2(0x1ab)](_0x23e7d0));})()),_seleniumWebdriver2=((()=>{const _0x892f4e=a16_0x12b175,_0x37bd42={'PhLqs':function(_0x385139,_0x45fbc2){return _0x385139(_0x45fbc2);}};try{const _0x39d294=helper[_0x892f4e(0x1c1)]();return helper['modifyCommand'](),_0x37bd42[_0x892f4e(0x1d7)](_interopRequireDefault,_0x39d294);}catch{return null;}})());function a16_0x19cf(_0x5b745b,_0x29bbac){const _0x7b47ae=a16_0x7b47();return a16_0x19cf=function(_0x19cf5a,_0x9c39ae){_0x19cf5a=_0x19cf5a-0x167;let _0x2066ec=_0x7b47ae[_0x19cf5a];return _0x2066ec;},a16_0x19cf(_0x5b745b,_0x29bbac);}function a16_0x7b47(){const _0x3175ad=['../../../helpers/helper','Error\x20in\x20fail-fast\x20test_done\x20handler:','errors','name','sessionNameProvided','PhLqs','shutdown','vJmvr','default','cleanupDrivers','vmwEk','JEST','node','quit','kKrQc','__esModule','winstonLogger','isTrue','skipSessionStatus','yhyqp','skip','shouldProcessEventForTesthub','iVtDI','info','egwnK','setup','__timeout','../../../helpers/logger','69zpVcuR','4231745SJeCiX','../../../helpers/testhub/utils','jest-resolve','NpEPT','DZzVk','handleTestEvent','configuration','__jestRetries','tlMZZ','projectConfig','percyCaptureMode','failFastActive','failFastOptions','isNotUndefined','1340136fYhpep','registerListeners','../test-observability/obsReporter','592150ZTdzUK','457265KdUldz','cleanup','WsGvj','14778bIUyHU','VMThu','nestedKeyValue','8WjZXJr','amBcW','projectName','capability','eJqXP','NjbgS','test_start','cwd','qgZHx','retries__','test','BSTACK_JEST_TEST_ENV','../../../index','5265666vIQuIC','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','browserstackPlatformIndex','browserstackPercyBestPlatform','5|3|8|2|7|0|4|1|9|6','SotHN','getInstance','teardown','timeout__','isBrowserstackInfra','requireModule','YtAsW','DHUXq','join','ziETt','driver','browserStackGlobals','../../utils/constants','OMfJA','resolveTestEnvironment','percy','testEnvironmentOptions','egnqW','FuzSi','13649160hdPaBD','message','BSTACK_DELTA','debug','mReGx','buildName','split','OSQbT','requireSeleniumWebdriver','__platformCaps','env','exports','global','__webdriver','MwiNN','jKBGc','6AgnoSA','platformCaps','YMoSV','Builder','getTestEnvironment','QYKFY','failFast','jest-config','\x20>\x20'];a16_0x7b47=function(){return _0x3175ad;};return a16_0x7b47();}function _interopRequireDefault(_0x4d19d1){const _0x1074b9=a16_0x12b175;return _0x4d19d1&&_0x4d19d1[_0x1074b9(0x16e)]?_0x4d19d1:{'default':_0x4d19d1};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2['default']['Builder']:null;class CustomEnvironment extends _jestUserEnvironment[a16_0x12b175(0x167)]{constructor(_0x4b0b63){const _0x4faca0=a16_0x12b175,_0x322d43={'egnqW':'quit','amBcW':function(_0x5b0afe,_0x4db346){return _0x5b0afe+_0x4db346;},'QYKFY':'bstack:options','SotHN':function(_0x2c2325,_0x46bd6c){return _0x2c2325(_0x46bd6c);},'VMThu':'../../../helpers/test-orchestration/failfastManager','vJmvr':_0x4faca0(0x1a5),'mReGx':_0x4faca0(0x1b6),'egwnK':'browserStackPercyOptions','YMoSV':_0x4faca0(0x186),'OSQbT':'browserstackPercyBestPlatform','kKrQc':function(_0xd5f025,_0x1939fa){return _0xd5f025(_0x1939fa);},'DHUXq':_0x4faca0(0x1a0),'ssqHB':_0x4faca0(0x1ca),'NjbgS':_0x4faca0(0x1b5)};super(_0x4b0b63),this[_0x4faca0(0x1c5)][_0x4faca0(0x179)]=0x0,this[_0x4faca0(0x182)]={};!_0x4b0b63['testEnvironmentOptions']&&(_0x4b0b63['testEnvironmentOptions']={});if(helper[_0x4faca0(0x1aa)]()){_0x4b0b63[_0x4faca0(0x1b6)]=_0x4b0b63['projectConfig']?_0x4b0b63[_0x4faca0(0x185)][_0x4faca0(0x1b6)]:_0x4b0b63['testEnvironmentOptions'],this['builder']=new _seleniumWebdriver2[(_0x4faca0(0x167))][(_0x4faca0(0x1cc))](),this[_0x4faca0(0x197)]=_0x4b0b63[_0x4faca0(0x185)]?_0x4b0b63['projectConfig'][_0x4faca0(0x197)]:_0x4b0b63['capability'],this[_0x4faca0(0x1c5)][_0x4faca0(0x179)]=_0x322d43[_0x4faca0(0x195)](this[_0x4faca0(0x182)][_0x4faca0(0x1a9)],constants[_0x4faca0(0x1bb)]),this[_0x4faca0(0x188)]=_0x4b0b63[_0x4faca0(0x1b6)][_0x4faca0(0x1cf)];if(this[_0x4faca0(0x188)]){const _0x310bdc=this['capability'][_0x322d43[_0x4faca0(0x1ce)]]?.[_0x4faca0(0x1be)]||'',_0x358958=this[_0x4faca0(0x197)][_0x322d43['QYKFY']]?.[_0x4faca0(0x196)]||'';this['failFast']=new(_0x322d43[_0x4faca0(0x1a6)](require,_0x322d43[_0x4faca0(0x192)]))(this[_0x4faca0(0x188)],_0x310bdc,_0x358958),this[_0x4faca0(0x1c5)]['failFastActive']=![];}helper[_0x4faca0(0x189)](this['configuration']['retries__'])&&(this[_0x4faca0(0x1c5)][_0x4faca0(0x183)]=this[_0x4faca0(0x182)][_0x4faca0(0x19d)]);}if(testhubUtils[_0x4faca0(0x174)]()){const _0x429cf7=new ObservabilityReporter();_0x429cf7[_0x4faca0(0x18b)]();}this[_0x4faca0(0x1c5)][_0x4faca0(0x1b1)]={},this[_0x4faca0(0x182)]=_0x4b0b63[_0x4faca0(0x1b6)],this[_0x4faca0(0x182)]['framework']=constants['FRAMEWORKS'][_0x4faca0(0x16a)];if(_seleniumWebdriver2){const _0x269bb2=_0x322d43[_0x4faca0(0x1d9)][_0x4faca0(0x1bf)]('|');let _0x2e38b9=0x0;while(!![]){switch(_0x269bb2[_0x2e38b9++]){case'0':this[_0x4faca0(0x1c5)]['percyCaptureMode']=helper['nestedKeyValue'](_0x4b0b63,[_0x322d43[_0x4faca0(0x1bd)],_0x322d43[_0x4faca0(0x177)],_0x322d43[_0x4faca0(0x1cb)]]);continue;case'1':helper[_0x4faca0(0x170)](this[_0x4faca0(0x182)]['skipSessionName'])?this['global']['sessionNameProvided']=!![]:this[_0x4faca0(0x1c5)][_0x4faca0(0x1d6)]=![];continue;case'2':this[_0x4faca0(0x1c5)][_0x4faca0(0x1a4)]=helper[_0x4faca0(0x193)](_0x4b0b63,[_0x322d43[_0x4faca0(0x1bd)],_0x322d43['egwnK'],_0x322d43[_0x4faca0(0x1c0)]]);continue;case'3':this[_0x4faca0(0x1c5)][_0x4faca0(0x1c6)]=_0x322d43[_0x4faca0(0x16d)](require,_0x322d43[_0x4faca0(0x1ad)])['browserstackAgentV2']({...this[_0x4faca0(0x182)],'capability':this[_0x4faca0(0x197)]||{}},this,testhubUtils[_0x4faca0(0x174)]());continue;case'4':this[_0x4faca0(0x1c5)][_0x4faca0(0x1c2)]=helper['nestedKeyValue'](this['configuration'],[_0x322d43['ssqHB'],this[_0x4faca0(0x1c5)][_0x4faca0(0x1a3)]])||{};continue;case'5':this[_0x4faca0(0x1c5)]['__drivers']=[];continue;case'6':this[_0x4faca0(0x1c5)][_0x4faca0(0x18f)]=async()=>{const _0x22723c=_0x4faca0;await this[_0x22723c(0x1c5)][_0x22723c(0x1b0)][_0x22723c(0x16c)](_0x322d43[_0x22723c(0x1b7)]);};continue;case'7':this[_0x4faca0(0x1c5)][_0x4faca0(0x1b5)]=helper[_0x4faca0(0x193)](_0x4b0b63,[_0x322d43[_0x4faca0(0x1bd)],_0x322d43[_0x4faca0(0x177)],_0x322d43[_0x4faca0(0x199)]]);continue;case'8':this[_0x4faca0(0x1c5)][_0x4faca0(0x1a3)]=(_0x4b0b63[_0x4faca0(0x185)]?_0x4b0b63[_0x4faca0(0x185)][_0x4faca0(0x1a3)]:_0x4b0b63[_0x4faca0(0x1a3)])||0x0;continue;case'9':this[_0x4faca0(0x1c5)]['__skipSessionStatus']=helper[_0x4faca0(0x170)](this[_0x4faca0(0x182)][_0x4faca0(0x171)]);continue;}break;}}}async[a16_0x12b175(0x1a8)](){const _0xecfea8=a16_0x12b175;_seleniumWebdriver2&&(await helper[_0xecfea8(0x168)](this[_0xecfea8(0x1c5)]['__driversArray']),this[_0xecfea8(0x1c5)]['__webdriver'][_0xecfea8(0x1cc)]=originalBuilder),await RequestQueueHandler[_0xecfea8(0x1a7)]()[_0xecfea8(0x1d8)]();}async[a16_0x12b175(0x178)](){}async[a16_0x12b175(0x181)](_0x39cc0c,_0x49ee38){const _0x2de494=a16_0x12b175,_0xa29d04={};_0xa29d04['WsGvj']=function(_0x29e61d,_0xe1f789){return _0x29e61d===_0xe1f789;},_0xa29d04['DZzVk']=_0x2de494(0x19a),_0xa29d04[_0x2de494(0x1ac)]=function(_0x5d80ac,_0x1b047b){return _0x5d80ac===_0x1b047b;},_0xa29d04[_0x2de494(0x19c)]=_0x2de494(0x173),_0xa29d04[_0x2de494(0x1c7)]='test_done',_0xa29d04[_0x2de494(0x1c8)]=_0x2de494(0x1d1),_0xa29d04[_0x2de494(0x17f)]=function(_0x43b155,_0x263024){return _0x43b155===_0x263024;},_0xa29d04[_0x2de494(0x1b8)]=_0x2de494(0x1d3),_0xa29d04[_0x2de494(0x169)]=function(_0x41d8ba,_0x2fab91){return _0x41d8ba===_0x2fab91;},_0xa29d04[_0x2de494(0x1b3)]=_0x2de494(0x1a8);const _0x2a0677=_0xa29d04,{name:_0xe2375f}=_0x39cc0c;if(_0x2a0677[_0x2de494(0x190)](_0xe2375f,_0x2a0677[_0x2de494(0x180)])){this['global']['testContext']=_0x39cc0c[_0x2de494(0x19e)];if(_0x2a0677[_0x2de494(0x1ac)](this['global'][_0x2de494(0x187)],!![])){const _0x366afa=_0x39cc0c[_0x2de494(0x19e)][_0x2de494(0x1d5)];logger[_0x2de494(0x176)](_0x2de494(0x1a2)+_0x366afa),_0x39cc0c['test']['mode']=_0x2a0677['qgZHx'];}}if(this[_0x2de494(0x1cf)]&&_0x2a0677[_0x2de494(0x1ac)](_0xe2375f,_0x2a0677['MwiNN']))try{const _0x1d7299=_0x39cc0c['test']['testPath'][_0x2de494(0x1ae)](_0x2a0677[_0x2de494(0x1c8)]),_0x553359=_0x39cc0c[_0x2de494(0x19e)][_0x2de494(0x1d4)];await this[_0x2de494(0x1cf)]['onTestDone'](_0x1d7299,_0x553359);const _0x516a5e=await this[_0x2de494(0x1cf)]['shouldFailFast']();_0x2a0677['NpEPT'](this[_0x2de494(0x1c5)][_0x2de494(0x187)],![])&&_0x2a0677[_0x2de494(0x17f)](_0x516a5e,!![])&&(this[_0x2de494(0x1c5)]['failFastActive']=!![]);}catch(_0x5dd3d6){logger[_0x2de494(0x1bc)](_0x2a0677['FuzSi'],_0x5dd3d6[_0x2de494(0x1ba)]);}_0x2a0677[_0x2de494(0x169)](_0xe2375f,_0x2a0677[_0x2de494(0x1b3)])&&(this[_0x2de494(0x1cf)]&&this[_0x2de494(0x1cf)]['cleanup']());}}module[a16_0x12b175(0x1c4)]=CustomEnvironment;