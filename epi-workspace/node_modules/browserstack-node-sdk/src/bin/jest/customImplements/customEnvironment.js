const a18_0x5bdbe8=a18_0x1b3d;(function(_0x20a151,_0x471187){const _0x26413d=a18_0x1b3d,_0x5ae1e7=_0x20a151();while(!![]){try{const _0x4dbb11=-parseInt(_0x26413d(0x10c))/0x1*(parseInt(_0x26413d(0x12a))/0x2)+-parseInt(_0x26413d(0x100))/0x3+-parseInt(_0x26413d(0x138))/0x4*(-parseInt(_0x26413d(0x11e))/0x5)+-parseInt(_0x26413d(0xfd))/0x6+parseInt(_0x26413d(0xd5))/0x7*(-parseInt(_0x26413d(0xcd))/0x8)+-parseInt(_0x26413d(0xff))/0x9+-parseInt(_0x26413d(0x11f))/0xa*(-parseInt(_0x26413d(0x123))/0xb);if(_0x4dbb11===_0x471187)break;else _0x5ae1e7['push'](_0x5ae1e7['shift']());}catch(_0x49aa6d){_0x5ae1e7['push'](_0x5ae1e7['shift']());}}}(a18_0x2cb7,0x2535d));const helper=require(a18_0x5bdbe8(0x12d)),constants=require('../../utils/constants'),{isTestObservabilitySession}=require('../../../helpers/test-observability/utils'),RequestQueueHandler=require(a18_0x5bdbe8(0x110)),ObservabilityReporter=require('../test-observability/obsReporter'),testhubUtils=require(a18_0x5bdbe8(0x124)),logger=require(a18_0x5bdbe8(0x104))[a18_0x5bdbe8(0xd3)],getTestEnvironment=((()=>{const _0x459a7f=a18_0x5bdbe8,_0x5eb383={};_0x5eb383[_0x459a7f(0xe0)]=_0x459a7f(0xf4),_0x5eb383['sYPvN']='jest-config';const _0x523939=_0x5eb383;try{const _0x1bc697=helper[_0x459a7f(0xd6)](_0x523939['EXfBI']);if(_0x1bc697[_0x459a7f(0x11a)])return _0x1bc697[_0x459a7f(0x11a)];const _0x136dbf=helper[_0x459a7f(0xd6)](_0x523939[_0x459a7f(0xd2)]);if(_0x136dbf[_0x459a7f(0xda)])return _0x136dbf[_0x459a7f(0xda)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x5f0c0d=a18_0x5bdbe8,_0x2215a9={'NEVOo':function(_0x3e5045,_0x15cf2a){return _0x3e5045(_0x15cf2a);},'VuaAl':'node','YRqze':_0x5f0c0d(0xfc)},_0x5de8ad=_0x2215a9[_0x5f0c0d(0xee)](getTestEnvironment,{'rootDir':process['cwd'](),'testEnvironment':process['env']['BSTACK_JEST_TEST_ENV']||_0x2215a9[_0x5f0c0d(0x10e)]});if(!_0x5de8ad)return _0x2215a9[_0x5f0c0d(0xee)](_interopRequireDefault,helper[_0x5f0c0d(0xd6)](_0x2215a9[_0x5f0c0d(0x121)]));return _0x2215a9[_0x5f0c0d(0xee)](_interopRequireDefault,helper[_0x5f0c0d(0xd6)](_0x5de8ad));})()),_seleniumWebdriver2=((()=>{const _0x4bfd51=a18_0x5bdbe8,_0x5798d7={'JtWtp':function(_0x1cf39a,_0x1fae8e){return _0x1cf39a(_0x1fae8e);}};try{const _0x24a888=helper[_0x4bfd51(0x129)]();return helper[_0x4bfd51(0xe7)](),_0x5798d7[_0x4bfd51(0xef)](_interopRequireDefault,_0x24a888);}catch{return null;}})());function _interopRequireDefault(_0x268562){const _0x2c7e80=a18_0x5bdbe8;return _0x268562&&_0x268562[_0x2c7e80(0x120)]?_0x268562:{'default':_0x268562};}function a18_0x1b3d(_0x3b6cd8,_0x33b60d){const _0x2cb759=a18_0x2cb7();return a18_0x1b3d=function(_0x1b3d31,_0x44a3b3){_0x1b3d31=_0x1b3d31-0xcd;let _0x4a6127=_0x2cb759[_0x1b3d31];return _0x4a6127;},a18_0x1b3d(_0x3b6cd8,_0x33b60d);}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a18_0x5bdbe8(0xed)][a18_0x5bdbe8(0x106)]:null;function a18_0x2cb7(){const _0x1f7aee=['configuration','testEnvironmentOptions','eXNpb','DXRqE','EXfBI','qeBVn','test_start','XDdhU','projectConfig','split','eftwa','modifyCommand','__webdriver','EDdel','shouldProcessEventForTesthub','debug','HrVeH','default','NEVOo','JtWtp','setup','1|6|4|0|7|5|9|8|2|3','isNotUndefined','skip','jest-resolve','failFast','enjsk','nestedKeyValue','wcXpd','Error\x20in\x20fail-fast\x20test_done\x20handler:','bThcn','isIAv','jest-environment-node','35082nlyWlT','browserstackAgentV2','2675151FXQXPp','79767fDPDff','teardown','percy','cGUlX','../../../helpers/logger','exports','Builder','bstack:options','browserStackPercyOptions','quit','../../../helpers/test-orchestration/failfastManager','__jestRetries','9663RhWCjh','retries__','VuaAl','platformCaps','../../../helpers/test-observability/requestQueueHandler','browserstackPercyBestPlatform','global','__driversArray','info','builder','VYLXR','capability','getInstance','testContext','resolveTestEnvironment','JEST','skipSessionName','FRAMEWORKS','332920NGVyUu','2653650dKDoXk','__esModule','YRqze','NUEgN','22HARSuk','../../../helpers/testhub/utils','framework','__platformCaps','handleTestEvent','__drivers','requireSeleniumWebdriver','4YbixXg','skipSessionStatus','shutdown','../../../helpers/helper','qKFty','HLDBQ','fsFsv','browserstackPlatformIndex','failFastOptions','BSTACK_DELTA','name','oRxZA','driver','join','8gjOkrn','percyCaptureMode','sessionNameProvided','failFastActive','WHkgX','HZaFX','KPQAi','onTestDone','__timeout','../../../index','46424ESZTFO','test','message','GzTLR','\x20>\x20','sYPvN','winstonLogger','isTrue','196UaoWGz','requireModule','test_done','zSwyA','cleanup','getTestEnvironment','errors'];a18_0x2cb7=function(){return _0x1f7aee;};return a18_0x2cb7();}class CustomEnvironment extends _jestUserEnvironment['default']{constructor(_0x1c8a90){const _0x3af19f=a18_0x5bdbe8,_0x1f9aff={'NUEgN':_0x3af19f(0x109),'DXRqE':function(_0x124525,_0xbd57a2){return _0x124525+_0xbd57a2;},'eftwa':_0x3af19f(0x107),'HZaFX':function(_0xc5988e,_0x43b0e5){return _0xc5988e(_0x43b0e5);},'zSwyA':_0x3af19f(0x10a),'fsFsv':_0x3af19f(0xf1),'XDdhU':_0x3af19f(0xdd),'oRxZA':_0x3af19f(0x108),'vXCPK':_0x3af19f(0x111),'qeBVn':_0x3af19f(0x139),'GzTLR':function(_0xec0963,_0x517ee1){return _0xec0963(_0x517ee1);},'eXNpb':_0x3af19f(0x141),'VYLXR':_0x3af19f(0x102),'HLDBQ':_0x3af19f(0x10f)};super(_0x1c8a90),this[_0x3af19f(0x112)][_0x3af19f(0x140)]=0x0,this[_0x3af19f(0xdc)]={};!_0x1c8a90[_0x3af19f(0xdd)]&&(_0x1c8a90[_0x3af19f(0xdd)]={});if(helper['isBrowserstackInfra']()){_0x1c8a90[_0x3af19f(0xdd)]=_0x1c8a90[_0x3af19f(0xe4)]?_0x1c8a90[_0x3af19f(0xe4)][_0x3af19f(0xdd)]:_0x1c8a90[_0x3af19f(0xdd)],this[_0x3af19f(0x115)]=new _seleniumWebdriver2['default']['Builder'](),this[_0x3af19f(0x117)]=_0x1c8a90[_0x3af19f(0xe4)]?_0x1c8a90[_0x3af19f(0xe4)][_0x3af19f(0x117)]:_0x1c8a90[_0x3af19f(0x117)],this[_0x3af19f(0x112)][_0x3af19f(0x140)]=_0x1f9aff[_0x3af19f(0xdf)](this['configuration']['timeout__'],constants[_0x3af19f(0x133)]),this[_0x3af19f(0x132)]=_0x1c8a90[_0x3af19f(0xdd)][_0x3af19f(0xf5)];if(this[_0x3af19f(0x132)]){const _0x5cac7c=this[_0x3af19f(0x117)][_0x1f9aff['eftwa']]?.['buildName']||'',_0x2ccc6f=this[_0x3af19f(0x117)][_0x1f9aff[_0x3af19f(0xe6)]]?.['projectName']||'';this[_0x3af19f(0xf5)]=new(_0x1f9aff[_0x3af19f(0x13d)](require,_0x1f9aff[_0x3af19f(0xd8)]))(this[_0x3af19f(0x132)],_0x5cac7c,_0x2ccc6f),this[_0x3af19f(0x112)][_0x3af19f(0x13b)]=![];}helper[_0x3af19f(0xf2)](this['configuration'][_0x3af19f(0x10d)])&&(this[_0x3af19f(0x112)][_0x3af19f(0x10b)]=this[_0x3af19f(0xdc)][_0x3af19f(0x10d)]);}if(testhubUtils[_0x3af19f(0xea)]()){const _0x306b86=new ObservabilityReporter();_0x306b86['registerListeners']();}this[_0x3af19f(0x112)]['browserStackGlobals']={},this['configuration']=_0x1c8a90[_0x3af19f(0xdd)],this[_0x3af19f(0xdc)][_0x3af19f(0x125)]=constants[_0x3af19f(0x11d)][_0x3af19f(0x11b)];if(_seleniumWebdriver2){const _0x1efc3f=_0x1f9aff[_0x3af19f(0x130)][_0x3af19f(0xe5)]('|');let _0x55285b=0x0;while(!![]){switch(_0x1efc3f[_0x55285b++]){case'0':this[_0x3af19f(0x112)][_0x3af19f(0x111)]=helper[_0x3af19f(0xf7)](_0x1c8a90,[_0x1f9aff['XDdhU'],_0x1f9aff[_0x3af19f(0x135)],_0x1f9aff['vXCPK']]);continue;case'1':this[_0x3af19f(0x112)][_0x3af19f(0x128)]=[];continue;case'2':this['global']['__skipSessionStatus']=helper[_0x3af19f(0xd4)](this[_0x3af19f(0xdc)][_0x3af19f(0x12b)]);continue;case'3':this[_0x3af19f(0x112)][_0x3af19f(0xd9)]=async()=>{const _0x23721a=_0x3af19f;await this[_0x23721a(0x112)][_0x23721a(0x136)][_0x23721a(0x109)](_0x1f9aff[_0x23721a(0x122)]);};continue;case'4':this[_0x3af19f(0x112)][_0x3af19f(0x131)]=(_0x1c8a90[_0x3af19f(0xe4)]?_0x1c8a90[_0x3af19f(0xe4)][_0x3af19f(0x131)]:_0x1c8a90[_0x3af19f(0x131)])||0x0;continue;case'5':this[_0x3af19f(0x112)][_0x3af19f(0x139)]=helper[_0x3af19f(0xf7)](_0x1c8a90,[_0x1f9aff[_0x3af19f(0xe3)],_0x1f9aff['oRxZA'],_0x1f9aff[_0x3af19f(0xe1)]]);continue;case'6':this[_0x3af19f(0x112)][_0x3af19f(0xe8)]=_0x1f9aff[_0x3af19f(0xd0)](require,_0x1f9aff[_0x3af19f(0xde)])[_0x3af19f(0xfe)]({...this[_0x3af19f(0xdc)],'capability':this[_0x3af19f(0x117)]||{}},this,testhubUtils[_0x3af19f(0xea)]());continue;case'7':this[_0x3af19f(0x112)][_0x3af19f(0x102)]=helper[_0x3af19f(0xf7)](_0x1c8a90,[_0x1f9aff['XDdhU'],_0x1f9aff[_0x3af19f(0x135)],_0x1f9aff[_0x3af19f(0x116)]]);continue;case'8':helper[_0x3af19f(0xd4)](this[_0x3af19f(0xdc)][_0x3af19f(0x11c)])?this['global']['sessionNameProvided']=!![]:this[_0x3af19f(0x112)][_0x3af19f(0x13a)]=![];continue;case'9':this[_0x3af19f(0x112)][_0x3af19f(0x126)]=helper[_0x3af19f(0xf7)](this[_0x3af19f(0xdc)],[_0x1f9aff[_0x3af19f(0x12f)],this[_0x3af19f(0x112)][_0x3af19f(0x131)]])||{};continue;}break;}}}async[a18_0x5bdbe8(0x101)](){const _0x26cf71=a18_0x5bdbe8;_seleniumWebdriver2&&(await helper['cleanupDrivers'](this[_0x26cf71(0x112)][_0x26cf71(0x113)]),this[_0x26cf71(0x112)]['__webdriver'][_0x26cf71(0x106)]=originalBuilder),await RequestQueueHandler[_0x26cf71(0x118)]()[_0x26cf71(0x12c)]();}async[a18_0x5bdbe8(0xf0)](){}async[a18_0x5bdbe8(0x127)](_0x5797b4,_0x1aaf98){const _0x3cceec=a18_0x5bdbe8,_0x5d7f9b={};_0x5d7f9b[_0x3cceec(0x13e)]=function(_0x51a3ae,_0x153593){return _0x51a3ae===_0x153593;},_0x5d7f9b[_0x3cceec(0x103)]=_0x3cceec(0xe2),_0x5d7f9b[_0x3cceec(0x12e)]=function(_0x775678,_0x2378e4){return _0x775678===_0x2378e4;},_0x5d7f9b[_0x3cceec(0xec)]=_0x3cceec(0xf3),_0x5d7f9b[_0x3cceec(0xfa)]=function(_0x5deaa0,_0x596c0b){return _0x5deaa0===_0x596c0b;},_0x5d7f9b[_0x3cceec(0xfb)]=_0x3cceec(0xd7),_0x5d7f9b[_0x3cceec(0xf6)]=_0x3cceec(0xd1),_0x5d7f9b[_0x3cceec(0xf8)]=function(_0x1e46ba,_0x44f933){return _0x1e46ba===_0x44f933;},_0x5d7f9b['EDdel']=_0x3cceec(0xf9),_0x5d7f9b[_0x3cceec(0x13c)]=_0x3cceec(0x101);const _0x2ead48=_0x5d7f9b,{name:_0x5a8fa8}=_0x5797b4;if(_0x2ead48[_0x3cceec(0x13e)](_0x5a8fa8,_0x2ead48[_0x3cceec(0x103)])){this[_0x3cceec(0x112)][_0x3cceec(0x119)]=_0x5797b4[_0x3cceec(0xce)];if(_0x2ead48[_0x3cceec(0x12e)](this['global'][_0x3cceec(0x13b)],!![])){const _0x229964=_0x5797b4[_0x3cceec(0xce)][_0x3cceec(0x134)];logger[_0x3cceec(0x114)]('Fail-fast\x20is\x20active,\x20skipping\x20test::\x20'+_0x229964),_0x5797b4[_0x3cceec(0xce)]['mode']=_0x2ead48[_0x3cceec(0xec)];}}if(this[_0x3cceec(0xf5)]&&_0x2ead48[_0x3cceec(0xfa)](_0x5a8fa8,_0x2ead48[_0x3cceec(0xfb)]))try{const _0x2aaf7a=_0x5797b4[_0x3cceec(0xce)]['testPath'][_0x3cceec(0x137)](_0x2ead48[_0x3cceec(0xf6)]),_0x4970c2=_0x5797b4[_0x3cceec(0xce)][_0x3cceec(0xdb)];await this['failFast'][_0x3cceec(0x13f)](_0x2aaf7a,_0x4970c2);const _0x538bfc=await this['failFast']['shouldFailFast']();_0x2ead48[_0x3cceec(0xf8)](this[_0x3cceec(0x112)][_0x3cceec(0x13b)],![])&&_0x2ead48[_0x3cceec(0xfa)](_0x538bfc,!![])&&(this[_0x3cceec(0x112)]['failFastActive']=!![]);}catch(_0x3c0d49){logger[_0x3cceec(0xeb)](_0x2ead48[_0x3cceec(0xe9)],_0x3c0d49[_0x3cceec(0xcf)]);}_0x2ead48['bThcn'](_0x5a8fa8,_0x2ead48['WHkgX'])&&(this[_0x3cceec(0xf5)]&&this[_0x3cceec(0xf5)][_0x3cceec(0xd9)]());}}module[a18_0x5bdbe8(0x105)]=CustomEnvironment;