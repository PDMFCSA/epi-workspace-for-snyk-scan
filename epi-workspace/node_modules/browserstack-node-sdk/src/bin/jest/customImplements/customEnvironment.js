const a16_0x4323ea=a16_0x36ef;(function(_0x52fe14,_0xda4372){const _0x2fd539=a16_0x36ef,_0x1b20ed=_0x52fe14();while(!![]){try{const _0x228c5f=parseInt(_0x2fd539(0x1e2))/0x1+-parseInt(_0x2fd539(0x1bc))/0x2*(parseInt(_0x2fd539(0x1d5))/0x3)+-parseInt(_0x2fd539(0x190))/0x4*(-parseInt(_0x2fd539(0x1d8))/0x5)+parseInt(_0x2fd539(0x1e8))/0x6*(parseInt(_0x2fd539(0x1f5))/0x7)+parseInt(_0x2fd539(0x1ef))/0x8+parseInt(_0x2fd539(0x1a1))/0x9*(parseInt(_0x2fd539(0x1cd))/0xa)+-parseInt(_0x2fd539(0x1e7))/0xb;if(_0x228c5f===_0xda4372)break;else _0x1b20ed['push'](_0x1b20ed['shift']());}catch(_0x186537){_0x1b20ed['push'](_0x1b20ed['shift']());}}}(a16_0xb96d,0xf399b));function a16_0x36ef(_0x283549,_0xf558c7){const _0xb96d11=a16_0xb96d();return a16_0x36ef=function(_0x36efe1,_0x312fcd){_0x36efe1=_0x36efe1-0x18f;let _0x558b72=_0xb96d11[_0x36efe1];return _0x558b72;},a16_0x36ef(_0x283549,_0xf558c7);}const helper=require('../../../helpers/helper'),constants=require(a16_0x4323ea(0x1c9)),{isTestObservabilitySession}=require(a16_0x4323ea(0x1bf)),RequestQueueHandler=require(a16_0x4323ea(0x1da)),ObservabilityReporter=require('../test-observability/obsReporter'),testhubUtils=require(a16_0x4323ea(0x1e5)),logger=require(a16_0x4323ea(0x1f8))[a16_0x4323ea(0x1a9)],getTestEnvironment=((()=>{const _0x4edda4=a16_0x4323ea,_0x5400d1={};_0x5400d1[_0x4edda4(0x1fa)]=_0x4edda4(0x1b8),_0x5400d1[_0x4edda4(0x1ed)]='jest-config';const _0x4f5d25=_0x5400d1;try{const _0x4b49f5=helper[_0x4edda4(0x1ea)](_0x4f5d25[_0x4edda4(0x1fa)]);if(_0x4b49f5[_0x4edda4(0x1c0)])return _0x4b49f5['resolveTestEnvironment'];const _0x1238c3=helper[_0x4edda4(0x1ea)](_0x4f5d25[_0x4edda4(0x1ed)]);if(_0x1238c3[_0x4edda4(0x1fb)])return _0x1238c3[_0x4edda4(0x1fb)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x454a29=a16_0x4323ea,_0x11176e={'zemYl':function(_0x1fc440,_0x9aa33e){return _0x1fc440(_0x9aa33e);},'qPvCD':'node','YIucu':'jest-environment-node'},_0x2d3686=_0x11176e[_0x454a29(0x1f4)](getTestEnvironment,{'rootDir':process['cwd'](),'testEnvironment':process[_0x454a29(0x195)]['BSTACK_JEST_TEST_ENV']||_0x11176e[_0x454a29(0x1c7)]});if(!_0x2d3686)return _0x11176e[_0x454a29(0x1f4)](_interopRequireDefault,helper[_0x454a29(0x1ea)](_0x11176e[_0x454a29(0x1be)]));return _0x11176e[_0x454a29(0x1f4)](_interopRequireDefault,helper[_0x454a29(0x1ea)](_0x2d3686));})()),_seleniumWebdriver2=((()=>{const _0xc4eb73=a16_0x4323ea,_0x5a78ac={'OFlRz':function(_0x44f065,_0x29245b){return _0x44f065(_0x29245b);}};try{const _0x352298=helper['requireSeleniumWebdriver']();return helper[_0xc4eb73(0x19f)](),_0x5a78ac[_0xc4eb73(0x1b0)](_interopRequireDefault,_0x352298);}catch{return null;}})());function _interopRequireDefault(_0x312a0c){return _0x312a0c&&_0x312a0c['__esModule']?_0x312a0c:{'default':_0x312a0c};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0x4323ea(0x1aa)]['Builder']:null;function a16_0xb96d(){const _0x450449=['builder','../../../helpers/testhub/utils','BSTACK_DELTA','30080908librOS','3635568wGdMiV','nestedKeyValue','requireModule','browserStackPercyOptions','quit','bRfde','qhRIn','15554352QUDPKd','failFastOptions','4|5|7|2|0|6|1|3','cVkwZ','platformCaps','zemYl','7JJmQWN','browserStackGlobals','browserstackPlatformIndex','../../../helpers/logger','test_start','yQIbc','getTestEnvironment','../../../helpers/test-orchestration/failfastManager','uwyJc','138596wCXxPq','retries__','vdhbM','mRVQn','iErEx','env','cleanup','handleTestEvent','JlJXH','YpnrI','debug','isTrue','__webdriver','percy','join','modifyCommand','browserstackAgentV2','5751342jYmuwv','shouldFailFast','NLIJT','configuration','bstack:options','shouldProcessEventForTesthub','sessionNameProvided','lbqjA','winstonLogger','default','bgMaN','uQGoe','shutdown','eQxGT','skip','OFlRz','failFastActive','setup','Builder','__driversArray','__skipSessionStatus','failFast','name','jest-resolve','testEnvironmentOptions','testPath','percyCaptureMode','6jjokuV','JEST','YIucu','../../../helpers/test-observability/utils','resolveTestEnvironment','global','split','skipSessionName','driver','isNotUndefined','tPgYR','qPvCD','YAxzV','../../utils/constants','\x20>\x20','onTestDone','jestConfig','10bcESRc','FRAMEWORKS','isBrowserstackInfra','isArray','__platformCaps','testContext','vhSGD','__drivers','941646QtQedq','projectConfig','framework','35ZKwCwY','__timeout','../../../helpers/test-observability/requestQueueHandler','capabilities','browserstackPercyBestPlatform','Qctae','HTOWf','test','KQfeJ','capability','1242258bahcIm','teardown'];a16_0xb96d=function(){return _0x450449;};return a16_0xb96d();}class CustomEnvironment extends _jestUserEnvironment[a16_0x4323ea(0x1aa)]{constructor(_0x3f0ec8){const _0x38547a=a16_0x4323ea,_0x6f98da={'tPgYR':_0x38547a(0x1ec),'vdhbM':function(_0x4f8ece,_0x77054e){return _0x4f8ece+_0x77054e;},'KQfeJ':_0x38547a(0x1a5),'mRVQn':function(_0x451e26,_0xb2ce45){return _0x451e26(_0xb2ce45);},'NLIJT':_0x38547a(0x1fc),'JlJXH':_0x38547a(0x1f1),'uQGoe':'testEnvironmentOptions','qhRIn':_0x38547a(0x1eb),'Qctae':_0x38547a(0x1bb),'YtgaY':'percy','uDBJA':'../../../index','BQFUc':_0x38547a(0x1dc)};super(_0x3f0ec8),this[_0x38547a(0x1c1)][_0x38547a(0x1d9)]=0x0,this[_0x38547a(0x1a4)]={};!_0x3f0ec8[_0x38547a(0x1b9)]&&(_0x3f0ec8[_0x38547a(0x1b9)]={});if(helper[_0x38547a(0x1cf)]()){_0x3f0ec8[_0x38547a(0x1b9)]=_0x3f0ec8[_0x38547a(0x1d6)]?_0x3f0ec8[_0x38547a(0x1d6)][_0x38547a(0x1b9)]:_0x3f0ec8[_0x38547a(0x1b9)];_seleniumWebdriver2&&(this[_0x38547a(0x1e4)]=new _seleniumWebdriver2['default'][(_0x38547a(0x1b3))]());this[_0x38547a(0x1e1)]=_0x3f0ec8['projectConfig']?_0x3f0ec8[_0x38547a(0x1d6)][_0x38547a(0x1e1)]:_0x3f0ec8[_0x38547a(0x1e1)],this[_0x38547a(0x1c1)][_0x38547a(0x1d9)]=_0x6f98da[_0x38547a(0x192)](_0x3f0ec8['testEnvironmentOptions']['timeout__']||0x1388,constants[_0x38547a(0x1e6)]),this[_0x38547a(0x1f0)]=_0x3f0ec8[_0x38547a(0x1b9)][_0x38547a(0x1b6)];if(this[_0x38547a(0x1f0)]){const _0x45d17f=this[_0x38547a(0x1e1)][_0x6f98da[_0x38547a(0x1e0)]]?.['buildName']||'',_0x215947=this[_0x38547a(0x1e1)][_0x6f98da[_0x38547a(0x1e0)]]?.['projectName']||'';this['failFast']=new(_0x6f98da[_0x38547a(0x193)](require,_0x6f98da[_0x38547a(0x1a3)]))(this['failFastOptions'],_0x45d17f,_0x215947),this['global']['failFastActive']=![];}helper[_0x38547a(0x1c5)](_0x3f0ec8[_0x38547a(0x1b9)][_0x38547a(0x191)])&&(this['global']['__jestRetries']=_0x3f0ec8[_0x38547a(0x1b9)][_0x38547a(0x191)]);}if(testhubUtils[_0x38547a(0x1a6)]()){const _0x3be87a=new ObservabilityReporter();_0x3be87a['registerListeners']();}this[_0x38547a(0x1c1)][_0x38547a(0x1f6)]={},this['configuration']=_0x3f0ec8['testEnvironmentOptions'],this[_0x38547a(0x1a4)][_0x38547a(0x1d7)]=constants[_0x38547a(0x1ce)][_0x38547a(0x1bd)],this[_0x38547a(0x1c1)][_0x38547a(0x1f7)]=(_0x3f0ec8[_0x38547a(0x1d6)]?_0x3f0ec8['projectConfig'][_0x38547a(0x1f7)]:_0x3f0ec8[_0x38547a(0x1f7)])||0x0,this[_0x38547a(0x1c1)][_0x38547a(0x1d1)]=this[_0x38547a(0x1a4)]&&this[_0x38547a(0x1a4)][_0x38547a(0x1f3)]&&Array[_0x38547a(0x1d0)](this['configuration']['platformCaps'])&&this['configuration']['platformCaps'][this[_0x38547a(0x1c1)][_0x38547a(0x1f7)]]||{};const _0x2bc8a0=this[_0x38547a(0x1c1)][_0x38547a(0x1f7)],_0x50e8de={...this['configuration'],'capability':this[_0x38547a(0x1a4)]['capabilities']&&Array[_0x38547a(0x1d0)](this['configuration'][_0x38547a(0x1db)])&&this['configuration'][_0x38547a(0x1db)][_0x2bc8a0]||{},'platformCaps':this[_0x38547a(0x1a4)][_0x38547a(0x1f3)]&&Array[_0x38547a(0x1d0)](this['configuration'][_0x38547a(0x1f3)])&&this[_0x38547a(0x1a4)][_0x38547a(0x1f3)][_0x2bc8a0]||{}};delete _0x50e8de[_0x38547a(0x1db)],this['global'][_0x38547a(0x1cc)]=_0x50e8de;if(_seleniumWebdriver2){const _0x2d1da8=_0x6f98da[_0x38547a(0x198)][_0x38547a(0x1c2)]('|');let _0x1ac4e9=0x0;while(!![]){switch(_0x2d1da8[_0x1ac4e9++]){case'0':this['global'][_0x38547a(0x1bb)]=helper['nestedKeyValue'](_0x3f0ec8,[_0x6f98da[_0x38547a(0x1ac)],_0x6f98da[_0x38547a(0x1ee)],_0x6f98da[_0x38547a(0x1dd)]]);continue;case'1':this['global'][_0x38547a(0x1b5)]=helper['isTrue'](this['configuration']['skipSessionStatus']);continue;case'2':this['global'][_0x38547a(0x19d)]=helper[_0x38547a(0x1e9)](_0x3f0ec8,[_0x6f98da[_0x38547a(0x1ac)],_0x6f98da['qhRIn'],_0x6f98da['YtgaY']]);continue;case'3':this[_0x38547a(0x1c1)][_0x38547a(0x196)]=async()=>{const _0x49ef29=_0x38547a;await this[_0x49ef29(0x1c1)][_0x49ef29(0x1c4)][_0x49ef29(0x1ec)](_0x6f98da[_0x49ef29(0x1c6)]);};continue;case'4':this[_0x38547a(0x1c1)][_0x38547a(0x1d4)]=[];continue;case'5':this['global'][_0x38547a(0x19c)]=_0x6f98da[_0x38547a(0x193)](require,_0x6f98da['uDBJA'])[_0x38547a(0x1a0)]({...this[_0x38547a(0x1a4)],'capability':this[_0x38547a(0x1e1)]||{}},this,testhubUtils[_0x38547a(0x1a6)]());continue;case'6':helper[_0x38547a(0x19b)](this[_0x38547a(0x1a4)][_0x38547a(0x1c3)])?this[_0x38547a(0x1c1)][_0x38547a(0x1a7)]=!![]:this[_0x38547a(0x1c1)]['sessionNameProvided']=![];continue;case'7':this['global'][_0x38547a(0x1dc)]=helper[_0x38547a(0x1e9)](_0x3f0ec8,[_0x6f98da[_0x38547a(0x1ac)],_0x6f98da[_0x38547a(0x1ee)],_0x6f98da['BQFUc']]);continue;}break;}}}async[a16_0x4323ea(0x1e3)](){const _0x573025=a16_0x4323ea;_seleniumWebdriver2&&(await helper['cleanupDrivers'](this[_0x573025(0x1c1)][_0x573025(0x1b4)]),this[_0x573025(0x1c1)][_0x573025(0x19c)][_0x573025(0x1b3)]=originalBuilder),await RequestQueueHandler['getInstance']()[_0x573025(0x1ad)]();}async[a16_0x4323ea(0x1b2)](){}async[a16_0x4323ea(0x197)](_0x54e398,_0x23445d){const _0xbf59af=a16_0x4323ea,_0x52e70a={};_0x52e70a[_0xbf59af(0x199)]=function(_0x5e4325,_0x57631a){return _0x5e4325===_0x57631a;},_0x52e70a['uwyJc']=_0xbf59af(0x1f9),_0x52e70a['iErEx']=function(_0x1f1b83,_0x2d8b51){return _0x1f1b83===_0x2d8b51;},_0x52e70a[_0xbf59af(0x1ae)]=_0xbf59af(0x1af),_0x52e70a[_0xbf59af(0x1f2)]='test_done',_0x52e70a[_0xbf59af(0x1c8)]=_0xbf59af(0x1ca),_0x52e70a[_0xbf59af(0x1a8)]=function(_0xf1c4dd,_0x163def){return _0xf1c4dd===_0x163def;},_0x52e70a['bgMaN']='Error\x20in\x20fail-fast\x20test_done\x20handler:',_0x52e70a[_0xbf59af(0x1d3)]=function(_0x2f7880,_0x513f1f){return _0x2f7880===_0x513f1f;},_0x52e70a[_0xbf59af(0x1de)]='teardown';const _0x5818c3=_0x52e70a,{name:_0x3d07ed}=_0x54e398;if(_0x5818c3['YpnrI'](_0x3d07ed,_0x5818c3[_0xbf59af(0x18f)])){this[_0xbf59af(0x1c1)][_0xbf59af(0x1d2)]=_0x54e398[_0xbf59af(0x1df)];if(_0x5818c3[_0xbf59af(0x194)](this['global'][_0xbf59af(0x1b1)],!![])){const _0x7e8204=_0x54e398['test'][_0xbf59af(0x1b7)];logger['info']('Fail-fast\x20is\x20active,\x20skipping\x20test::\x20'+_0x7e8204),_0x54e398[_0xbf59af(0x1df)]['mode']=_0x5818c3[_0xbf59af(0x1ae)];}}if(this[_0xbf59af(0x1b6)]&&_0x5818c3[_0xbf59af(0x194)](_0x3d07ed,_0x5818c3[_0xbf59af(0x1f2)]))try{const _0x514525=_0x54e398[_0xbf59af(0x1df)][_0xbf59af(0x1ba)][_0xbf59af(0x19e)](_0x5818c3['YAxzV']),_0xbe091d=_0x54e398[_0xbf59af(0x1df)]['errors'];await this[_0xbf59af(0x1b6)][_0xbf59af(0x1cb)](_0x514525,_0xbe091d);const _0x1d9d48=await this[_0xbf59af(0x1b6)][_0xbf59af(0x1a2)]();_0x5818c3[_0xbf59af(0x199)](this[_0xbf59af(0x1c1)][_0xbf59af(0x1b1)],![])&&_0x5818c3['lbqjA'](_0x1d9d48,!![])&&(this['global'][_0xbf59af(0x1b1)]=!![]);}catch(_0x3b9db4){logger[_0xbf59af(0x19a)](_0x5818c3[_0xbf59af(0x1ab)],_0x3b9db4['message']);}_0x5818c3[_0xbf59af(0x1d3)](_0x3d07ed,_0x5818c3['HTOWf'])&&(this[_0xbf59af(0x1b6)]&&this[_0xbf59af(0x1b6)][_0xbf59af(0x196)]());}}module['exports']=CustomEnvironment;