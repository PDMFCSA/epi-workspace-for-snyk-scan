const a16_0x484e93=a16_0x372e;(function(_0x185789,_0x5a3308){const _0x50986f=a16_0x372e,_0x2d2894=_0x185789();while(!![]){try{const _0x3069f0=parseInt(_0x50986f(0xb1))/0x1+-parseInt(_0x50986f(0x118))/0x2+-parseInt(_0x50986f(0x101))/0x3+-parseInt(_0x50986f(0xeb))/0x4*(parseInt(_0x50986f(0xcb))/0x5)+parseInt(_0x50986f(0x108))/0x6*(parseInt(_0x50986f(0xf9))/0x7)+parseInt(_0x50986f(0xcd))/0x8+-parseInt(_0x50986f(0xbf))/0x9*(-parseInt(_0x50986f(0x102))/0xa);if(_0x3069f0===_0x5a3308)break;else _0x2d2894['push'](_0x2d2894['shift']());}catch(_0x2bcf90){_0x2d2894['push'](_0x2d2894['shift']());}}}(a16_0x16b1,0x5875b));const helper=require('../../../helpers/helper'),constants=require(a16_0x484e93(0xbb)),{isTestObservabilitySession}=require('../../../helpers/test-observability/utils'),RequestQueueHandler=require('../../../helpers/test-observability/requestQueueHandler'),ObservabilityReporter=require(a16_0x484e93(0xdd)),testhubUtils=require(a16_0x484e93(0xfd)),logger=require(a16_0x484e93(0xb3))[a16_0x484e93(0xde)],getTestEnvironment=((()=>{const _0x54c22c=a16_0x484e93,_0x31da14={};_0x31da14['UtJmV']=_0x54c22c(0x112),_0x31da14[_0x54c22c(0xca)]=_0x54c22c(0xc1);const _0x301bde=_0x31da14;try{const _0x4c1c3b=helper[_0x54c22c(0xed)](_0x301bde['UtJmV']);if(_0x4c1c3b[_0x54c22c(0xe5)])return _0x4c1c3b[_0x54c22c(0xe5)];const _0x5b5443=helper[_0x54c22c(0xed)](_0x301bde[_0x54c22c(0xca)]);if(_0x5b5443[_0x54c22c(0xc4)])return _0x5b5443['getTestEnvironment'];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x4e1c14=a16_0x484e93,_0x18693e={'lYIAC':function(_0x2b9e45,_0x59bf1e){return _0x2b9e45(_0x59bf1e);},'vwtAg':_0x4e1c14(0xc0),'NlpKL':_0x4e1c14(0xc2)},_0x5a505b=_0x18693e[_0x4e1c14(0xc9)](getTestEnvironment,{'rootDir':process[_0x4e1c14(0xbe)](),'testEnvironment':process['env'][_0x4e1c14(0x10b)]||_0x18693e['vwtAg']});if(!_0x5a505b)return _0x18693e[_0x4e1c14(0xc9)](_interopRequireDefault,helper[_0x4e1c14(0xed)](_0x18693e[_0x4e1c14(0xe4)]));return _0x18693e[_0x4e1c14(0xc9)](_interopRequireDefault,helper[_0x4e1c14(0xed)](_0x5a505b));})()),_seleniumWebdriver2=((()=>{const _0x10bb57=a16_0x484e93,_0x5d8a73={'HvIKU':function(_0xe0c196,_0x2f23c7){return _0xe0c196(_0x2f23c7);}};try{const _0x213984=helper[_0x10bb57(0xd6)]();return helper['modifyCommand'](),_0x5d8a73[_0x10bb57(0x104)](_interopRequireDefault,_0x213984);}catch{return null;}})());function _interopRequireDefault(_0x3061f5){const _0x45409a=a16_0x484e93;return _0x3061f5&&_0x3061f5[_0x45409a(0x10f)]?_0x3061f5:{'default':_0x3061f5};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0x484e93(0xdc)]['Builder']:null;function a16_0x16b1(){const _0x2a7916=['default','../test-observability/obsReporter','winstonLogger','onTestDone','HWAoU','driver','test_done','browserstackAgentV2','NlpKL','resolveTestEnvironment','VrScR','quit','qAcbx','FWtHc','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','110996adsBWt','projectConfig','requireModule','__webdriver','rrxKV','shouldProcessEventForTesthub','timeout__','__skipSessionStatus','shouldFailFast','platformCaps','browserStackGlobals','test_start','__timeout','nestedKeyValue','257362YmGDZl','percyCaptureMode','test','isBrowserstackInfra','../../../helpers/testhub/utils','../../../index','capability','__driversArray','1610133qjyZoc','6307130TDVLis','cleanup','HvIKU','registerListeners','iFreV','bstack:options','12YiHwSS','split','mode','BSTACK_JEST_TEST_ENV','2|0|7|1|6|5|4|8|9|3','oWRUv','browserstackPercyBestPlatform','__esModule','handleTestEvent','browserstackPlatformIndex','jest-resolve','skipSessionStatus','global','framework','vkxdr','testEnvironmentOptions','408316DvRtAi','sQrsR','info','../../../helpers/test-orchestration/failfastManager','skipSessionName','testPath','JEST','testContext','errors','Error\x20in\x20fail-fast\x20test_done\x20handler:','307593GRzzDg','sessionNameProvided','../../../helpers/logger','Builder','retries__','failFast','TpBrY','PIiFG','BSTACK_DELTA','teardown','../../utils/constants','builder','\x20>\x20','cwd','18ufjFtF','node','jest-config','jest-environment-node','debug','getTestEnvironment','IRsaj','percy','hNhrg','__jestRetries','lYIAC','XrDeD','105LvewLF','MQpHR','347024djTOle','browserStackPercyOptions','tBtCP','skip','failFastActive','isTrue','qXBvC','failFastOptions','configuration','requireSeleniumWebdriver','__platformCaps','projectName','HMhuL','cleanupDrivers','join'];a16_0x16b1=function(){return _0x2a7916;};return a16_0x16b1();}function a16_0x372e(_0x433b2f,_0x207c68){const _0x16b1c8=a16_0x16b1();return a16_0x372e=function(_0x372e58,_0x48e786){_0x372e58=_0x372e58-0xae;let _0x6e483c=_0x16b1c8[_0x372e58];return _0x6e483c;},a16_0x372e(_0x433b2f,_0x207c68);}class CustomEnvironment extends _jestUserEnvironment[a16_0x484e93(0xdc)]{constructor(_0x12c63e){const _0x5cc989=a16_0x484e93,_0x6ab626={'iFreV':_0x5cc989(0xe7),'TIBOO':function(_0x25bd5d,_0x8994a1){return _0x25bd5d+_0x8994a1;},'tBtCP':_0x5cc989(0x107),'vkxdr':function(_0x1ec6f1,_0x182bae){return _0x1ec6f1(_0x182bae);},'hNhrg':_0x5cc989(0x11b),'HMhuL':_0x5cc989(0x10c),'DWAlZ':_0x5cc989(0xfe),'qAcbx':'testEnvironmentOptions','rrxKV':_0x5cc989(0xce),'HGubo':_0x5cc989(0x10e),'wppEh':_0x5cc989(0xf4),'XpQCP':_0x5cc989(0xfa),'HWAoU':_0x5cc989(0xc6)};super(_0x12c63e),this[_0x5cc989(0x114)][_0x5cc989(0xf7)]=0x0,this[_0x5cc989(0xd5)]={};!_0x12c63e['testEnvironmentOptions']&&(_0x12c63e[_0x5cc989(0x117)]={});if(helper[_0x5cc989(0xfc)]()){_0x12c63e[_0x5cc989(0x117)]=_0x12c63e['projectConfig']?_0x12c63e[_0x5cc989(0xec)]['testEnvironmentOptions']:_0x12c63e[_0x5cc989(0x117)],this[_0x5cc989(0xbc)]=new _seleniumWebdriver2[(_0x5cc989(0xdc))][(_0x5cc989(0xb4))](),this[_0x5cc989(0xff)]=_0x12c63e[_0x5cc989(0xec)]?_0x12c63e[_0x5cc989(0xec)]['capability']:_0x12c63e[_0x5cc989(0xff)],this[_0x5cc989(0x114)][_0x5cc989(0xf7)]=_0x6ab626['TIBOO'](this[_0x5cc989(0xd5)][_0x5cc989(0xf1)],constants[_0x5cc989(0xb9)]),this[_0x5cc989(0xd4)]=_0x12c63e['testEnvironmentOptions'][_0x5cc989(0xb6)];if(this[_0x5cc989(0xd4)]){const _0x206d9b=this['capability'][_0x6ab626['tBtCP']]?.['buildName']||'',_0x47b789=this[_0x5cc989(0xff)][_0x6ab626[_0x5cc989(0xcf)]]?.[_0x5cc989(0xd8)]||'';this[_0x5cc989(0xb6)]=new(_0x6ab626['vkxdr'](require,_0x6ab626[_0x5cc989(0xc7)]))(this[_0x5cc989(0xd4)],_0x206d9b,_0x47b789),this[_0x5cc989(0x114)][_0x5cc989(0xd1)]=![];}helper['isNotUndefined'](this['configuration'][_0x5cc989(0xb5)])&&(this[_0x5cc989(0x114)][_0x5cc989(0xc8)]=this[_0x5cc989(0xd5)]['retries__']);}if(testhubUtils['shouldProcessEventForTesthub']()){const _0x1d7695=new ObservabilityReporter();_0x1d7695[_0x5cc989(0x105)]();}this[_0x5cc989(0x114)][_0x5cc989(0xf5)]={},this[_0x5cc989(0xd5)]=_0x12c63e['testEnvironmentOptions'],this[_0x5cc989(0xd5)][_0x5cc989(0x115)]=constants['FRAMEWORKS'][_0x5cc989(0x11e)];if(_seleniumWebdriver2){const _0x2dec8d=_0x6ab626[_0x5cc989(0xd9)][_0x5cc989(0x109)]('|');let _0x3ee33e=0x0;while(!![]){switch(_0x2dec8d[_0x3ee33e++]){case'0':this[_0x5cc989(0x114)][_0x5cc989(0xee)]=_0x6ab626[_0x5cc989(0x116)](require,_0x6ab626['DWAlZ'])[_0x5cc989(0xe3)]({...this[_0x5cc989(0xd5)],'capability':this[_0x5cc989(0xff)]||{}},this,testhubUtils[_0x5cc989(0xf0)]());continue;case'1':this[_0x5cc989(0x114)]['browserstackPercyBestPlatform']=helper[_0x5cc989(0xf8)](_0x12c63e,[_0x6ab626['qAcbx'],_0x6ab626['rrxKV'],_0x6ab626['HGubo']]);continue;case'2':this[_0x5cc989(0x114)]['__drivers']=[];continue;case'3':this[_0x5cc989(0x114)][_0x5cc989(0x103)]=async()=>{const _0x167489=_0x5cc989;await this[_0x167489(0x114)][_0x167489(0xe1)][_0x167489(0xe7)](_0x6ab626[_0x167489(0x106)]);};continue;case'4':this[_0x5cc989(0x114)][_0x5cc989(0xd7)]=helper[_0x5cc989(0xf8)](this[_0x5cc989(0xd5)],[_0x6ab626['wppEh'],this[_0x5cc989(0x114)][_0x5cc989(0x111)]])||{};continue;case'5':this[_0x5cc989(0x114)][_0x5cc989(0xfa)]=helper[_0x5cc989(0xf8)](_0x12c63e,[_0x6ab626[_0x5cc989(0xe8)],_0x6ab626[_0x5cc989(0xef)],_0x6ab626['XpQCP']]);continue;case'6':this['global'][_0x5cc989(0xc6)]=helper['nestedKeyValue'](_0x12c63e,[_0x6ab626[_0x5cc989(0xe8)],_0x6ab626[_0x5cc989(0xef)],_0x6ab626[_0x5cc989(0xe0)]]);continue;case'7':this[_0x5cc989(0x114)]['browserstackPlatformIndex']=(_0x12c63e['projectConfig']?_0x12c63e[_0x5cc989(0xec)][_0x5cc989(0x111)]:_0x12c63e['browserstackPlatformIndex'])||0x0;continue;case'8':helper[_0x5cc989(0xd2)](this['configuration'][_0x5cc989(0x11c)])?this['global']['sessionNameProvided']=!![]:this['global'][_0x5cc989(0xb2)]=![];continue;case'9':this[_0x5cc989(0x114)][_0x5cc989(0xf2)]=helper[_0x5cc989(0xd2)](this['configuration'][_0x5cc989(0x113)]);continue;}break;}}}async[a16_0x484e93(0xba)](){const _0xbff7fa=a16_0x484e93;_seleniumWebdriver2&&(await helper[_0xbff7fa(0xda)](this[_0xbff7fa(0x114)][_0xbff7fa(0x100)]),this['global']['__webdriver'][_0xbff7fa(0xb4)]=originalBuilder),await RequestQueueHandler['getInstance']()['shutdown']();}async['setup'](){}async[a16_0x484e93(0x110)](_0x2b7867,_0x13a4ae){const _0xbc8fb2=a16_0x484e93,_0x4f3815={};_0x4f3815[_0xbc8fb2(0xd3)]=function(_0x4c757c,_0x1b6088){return _0x4c757c===_0x1b6088;},_0x4f3815['ncsCb']=_0xbc8fb2(0xf6),_0x4f3815[_0xbc8fb2(0x119)]=_0xbc8fb2(0xd0),_0x4f3815[_0xbc8fb2(0xcc)]=function(_0x50fd60,_0x431168){return _0x50fd60===_0x431168;},_0x4f3815[_0xbc8fb2(0xb7)]=_0xbc8fb2(0xe2),_0x4f3815[_0xbc8fb2(0x10d)]=_0xbc8fb2(0xbd),_0x4f3815[_0xbc8fb2(0xb8)]=function(_0x3add68,_0x4b1663){return _0x3add68===_0x4b1663;},_0x4f3815[_0xbc8fb2(0xe9)]=function(_0x354e4c,_0x39f262){return _0x354e4c===_0x39f262;},_0x4f3815[_0xbc8fb2(0xc5)]=_0xbc8fb2(0xb0),_0x4f3815['UannP']=function(_0xb3925d,_0x9d7a3f){return _0xb3925d===_0x9d7a3f;},_0x4f3815[_0xbc8fb2(0xe6)]=_0xbc8fb2(0xba);const _0xf7392c=_0x4f3815,{name:_0x40aa39}=_0x2b7867;if(_0xf7392c[_0xbc8fb2(0xd3)](_0x40aa39,_0xf7392c['ncsCb'])){this[_0xbc8fb2(0x114)][_0xbc8fb2(0xae)]=_0x2b7867[_0xbc8fb2(0xfb)];if(_0xf7392c['qXBvC'](this['global'][_0xbc8fb2(0xd1)],!![])){const _0x2a06f1=_0x2b7867['test']['name'];logger[_0xbc8fb2(0x11a)](_0xbc8fb2(0xea)+_0x2a06f1),_0x2b7867[_0xbc8fb2(0xfb)][_0xbc8fb2(0x10a)]=_0xf7392c[_0xbc8fb2(0x119)];}}if(this[_0xbc8fb2(0xb6)]&&_0xf7392c[_0xbc8fb2(0xcc)](_0x40aa39,_0xf7392c['TpBrY']))try{const _0x3ebdc3=_0x2b7867[_0xbc8fb2(0xfb)][_0xbc8fb2(0x11d)][_0xbc8fb2(0xdb)](_0xf7392c[_0xbc8fb2(0x10d)]),_0x448583=_0x2b7867[_0xbc8fb2(0xfb)][_0xbc8fb2(0xaf)];await this[_0xbc8fb2(0xb6)][_0xbc8fb2(0xdf)](_0x3ebdc3,_0x448583);const _0x369ff1=await this[_0xbc8fb2(0xb6)][_0xbc8fb2(0xf3)]();_0xf7392c[_0xbc8fb2(0xb8)](this[_0xbc8fb2(0x114)][_0xbc8fb2(0xd1)],![])&&_0xf7392c[_0xbc8fb2(0xe9)](_0x369ff1,!![])&&(this[_0xbc8fb2(0x114)][_0xbc8fb2(0xd1)]=!![]);}catch(_0x21ae53){logger[_0xbc8fb2(0xc3)](_0xf7392c[_0xbc8fb2(0xc5)],_0x21ae53['message']);}_0xf7392c['UannP'](_0x40aa39,_0xf7392c[_0xbc8fb2(0xe6)])&&(this['failFast']&&this['failFast'][_0xbc8fb2(0x103)]());}}module['exports']=CustomEnvironment;