const a18_0x4f7237=a18_0x3cc7;(function(_0x4a05a2,_0xddacd1){const _0x766476=a18_0x3cc7,_0x4be621=_0x4a05a2();while(!![]){try{const _0x17a827=parseInt(_0x766476(0xdf))/0x1+parseInt(_0x766476(0x107))/0x2+-parseInt(_0x766476(0xd1))/0x3*(parseInt(_0x766476(0xd5))/0x4)+-parseInt(_0x766476(0xca))/0x5*(-parseInt(_0x766476(0xf2))/0x6)+parseInt(_0x766476(0xd9))/0x7+parseInt(_0x766476(0x10a))/0x8*(parseInt(_0x766476(0xcf))/0x9)+-parseInt(_0x766476(0xc1))/0xa*(parseInt(_0x766476(0x124))/0xb);if(_0x17a827===_0xddacd1)break;else _0x4be621['push'](_0x4be621['shift']());}catch(_0x544aad){_0x4be621['push'](_0x4be621['shift']());}}}(a18_0x12f4,0xe5e4b));const helper=require('../../../helpers/helper'),constants=require(a18_0x4f7237(0xc6)),{isTestObservabilitySession}=require('../../../helpers/test-observability/utils'),RequestQueueHandler=require(a18_0x4f7237(0x109)),ObservabilityReporter=require(a18_0x4f7237(0xc4)),testhubUtils=require(a18_0x4f7237(0xf4)),logger=require(a18_0x4f7237(0x10d))[a18_0x4f7237(0x116)],getTestEnvironment=((()=>{const _0xcd9783=a18_0x4f7237,_0x202a07={};_0x202a07[_0xcd9783(0xe8)]=_0xcd9783(0x11b),_0x202a07[_0xcd9783(0x119)]=_0xcd9783(0xfc);const _0x2e5f08=_0x202a07;try{const _0x50dada=helper[_0xcd9783(0xf8)](_0x2e5f08[_0xcd9783(0xe8)]);if(_0x50dada['resolveTestEnvironment'])return _0x50dada[_0xcd9783(0xe4)];const _0x3b3a3f=helper[_0xcd9783(0xf8)](_0x2e5f08['wixpA']);if(_0x3b3a3f['getTestEnvironment'])return _0x3b3a3f[_0xcd9783(0xbf)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x54bb1b=a18_0x4f7237,_0x15c7bb={'muapW':function(_0x10b2f0,_0x8452de){return _0x10b2f0(_0x8452de);},'XznmY':_0x54bb1b(0xd0),'xHBPN':_0x54bb1b(0x105),'hHlBH':function(_0x4e8d60,_0x4f9fe8){return _0x4e8d60(_0x4f9fe8);}},_0x3c80e6=_0x15c7bb[_0x54bb1b(0x120)](getTestEnvironment,{'rootDir':process[_0x54bb1b(0x10b)](),'testEnvironment':process[_0x54bb1b(0x118)]['BSTACK_JEST_TEST_ENV']||_0x15c7bb['XznmY']});if(!_0x3c80e6)return _0x15c7bb[_0x54bb1b(0x120)](_interopRequireDefault,helper[_0x54bb1b(0xf8)](_0x15c7bb[_0x54bb1b(0x10f)]));return _0x15c7bb['hHlBH'](_interopRequireDefault,helper[_0x54bb1b(0xf8)](_0x3c80e6));})()),_seleniumWebdriver2=((()=>{const _0x5ebcc0=a18_0x4f7237,_0x266ee6={'cQNZf':function(_0x3f53d1,_0x3f2ab0){return _0x3f53d1(_0x3f2ab0);}};try{const _0x435efb=helper[_0x5ebcc0(0xc0)]();return helper[_0x5ebcc0(0xd6)](),_0x266ee6[_0x5ebcc0(0xeb)](_interopRequireDefault,_0x435efb);}catch{return null;}})());function _interopRequireDefault(_0x1490f5){return _0x1490f5&&_0x1490f5['__esModule']?_0x1490f5:{'default':_0x1490f5};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a18_0x4f7237(0xe2)][a18_0x4f7237(0x10c)]:null;function a18_0x12f4(){const _0x24db76=['browserstackPlatformIndex','browserstackAgentV2','4138946cHfmeo','handleTestEvent','platformCaps','cleanup','configuration','builder','206252QmutQZ','BSTACK_DELTA','split','default','failFast','resolveTestEnvironment','__platformCaps','quit','browserStackGlobals','CKJUr','failFastActive','info','cQNZf','Error\x20in\x20fail-fast\x20test_done\x20handler:','Luoui','nestedKeyValue','bmMea','skipSessionName','../../../helpers/test-orchestration/failfastManager','180GdVegY','message','../../../helpers/testhub/utils','retries__','AKCmg','sessionNameProvided','requireModule','testEnvironmentOptions','test','FpGrn','jest-config','dHXeT','shouldFailFast','capability','projectName','global','rKHvN','FRAMEWORKS','projectConfig','jest-environment-node','registerListeners','3349664lwncdM','jbskk','../../../helpers/test-observability/requestQueueHandler','561608KYHesb','cwd','Builder','../../../helpers/logger','browserStackPercyOptions','xHBPN','__driversArray','rMzbR','xtwYX','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','shutdown','mode','winstonLogger','teardown','env','wixpA','testContext','jest-resolve','percy','isNotUndefined','timeout__','\x20>\x20','muapW','join','oXPIN','cleanupDrivers','36270564yHEkyk','__timeout','test_start','setup','qriwO','skipSessionStatus','rJPEl','getTestEnvironment','requireSeleniumWebdriver','10QwRRtu','yToBE','failFastOptions','../test-observability/obsReporter','skip','../../utils/constants','exports','AEJlh','bstack:options','113930dttwvj','isTrue','9|2|8|1|5|7|3|4|6|0','xXvSO','testPath','171xpZeUL','node','54EKLpAy','../../../index','wpbjk','__webdriver','55732sdGhSw','modifyCommand'];a18_0x12f4=function(){return _0x24db76;};return a18_0x12f4();}class CustomEnvironment extends _jestUserEnvironment['default']{constructor(_0x165af4){const _0x2b4f7b=a18_0x4f7237,_0x58997f={'oXPIN':_0x2b4f7b(0xe6),'AKCmg':function(_0x1983d2,_0x2381e1){return _0x1983d2+_0x2381e1;},'FpGrn':_0x2b4f7b(0xc9),'VQZGw':function(_0x11c3a8,_0x5bab0c){return _0x11c3a8(_0x5bab0c);},'XIITS':_0x2b4f7b(0xf1),'AEJlh':_0x2b4f7b(0xcc),'xtwYX':'testEnvironmentOptions','xXvSO':_0x2b4f7b(0x10e),'yToBE':'browserstackPercyBestPlatform','Luoui':_0x2b4f7b(0xd2),'wpbjk':_0x2b4f7b(0xdb),'rJPEl':'percy','OYVbx':'percyCaptureMode'};super(_0x165af4),this[_0x2b4f7b(0x101)][_0x2b4f7b(0x125)]=0x0,this['configuration']={};!_0x165af4[_0x2b4f7b(0xf9)]&&(_0x165af4[_0x2b4f7b(0xf9)]={});if(helper['isBrowserstackInfra']()){_0x165af4[_0x2b4f7b(0xf9)]=_0x165af4[_0x2b4f7b(0x104)]?_0x165af4[_0x2b4f7b(0x104)][_0x2b4f7b(0xf9)]:_0x165af4['testEnvironmentOptions'],this[_0x2b4f7b(0xde)]=new _seleniumWebdriver2['default'][(_0x2b4f7b(0x10c))](),this[_0x2b4f7b(0xff)]=_0x165af4[_0x2b4f7b(0x104)]?_0x165af4['projectConfig'][_0x2b4f7b(0xff)]:_0x165af4['capability'],this[_0x2b4f7b(0x101)][_0x2b4f7b(0x125)]=_0x58997f[_0x2b4f7b(0xf6)](this[_0x2b4f7b(0xdd)][_0x2b4f7b(0x11e)],constants[_0x2b4f7b(0xe0)]),this['failFastOptions']=_0x165af4[_0x2b4f7b(0xf9)][_0x2b4f7b(0xe3)];if(this[_0x2b4f7b(0xc3)]){const _0x43cda9=this['capability'][_0x58997f[_0x2b4f7b(0xfb)]]?.['buildName']||'',_0x3830a9=this['capability'][_0x58997f[_0x2b4f7b(0xfb)]]?.[_0x2b4f7b(0x100)]||'';this[_0x2b4f7b(0xe3)]=new(_0x58997f['VQZGw'](require,_0x58997f['XIITS']))(this[_0x2b4f7b(0xc3)],_0x43cda9,_0x3830a9),this[_0x2b4f7b(0x101)][_0x2b4f7b(0xe9)]=![];}helper[_0x2b4f7b(0x11d)](this[_0x2b4f7b(0xdd)][_0x2b4f7b(0xf5)])&&(this['global']['__jestRetries']=this['configuration'][_0x2b4f7b(0xf5)]);}if(testhubUtils['shouldProcessEventForTesthub']()){const _0x824138=new ObservabilityReporter();_0x824138[_0x2b4f7b(0x106)]();}this[_0x2b4f7b(0x101)][_0x2b4f7b(0xe7)]={},this[_0x2b4f7b(0xdd)]=_0x165af4[_0x2b4f7b(0xf9)],this['configuration']['framework']=constants[_0x2b4f7b(0x103)]['JEST'];if(_seleniumWebdriver2){const _0x7332d3=_0x58997f[_0x2b4f7b(0xc8)][_0x2b4f7b(0xe1)]('|');let _0x26c68d=0x0;while(!![]){switch(_0x7332d3[_0x26c68d++]){case'0':this[_0x2b4f7b(0x101)][_0x2b4f7b(0xdc)]=async()=>{const _0x3ad386=_0x2b4f7b;await this['global']['driver'][_0x3ad386(0xe6)](_0x58997f[_0x3ad386(0x122)]);};continue;case'1':this[_0x2b4f7b(0x101)]['browserstackPercyBestPlatform']=helper[_0x2b4f7b(0xee)](_0x165af4,[_0x58997f['xtwYX'],_0x58997f[_0x2b4f7b(0xcd)],_0x58997f[_0x2b4f7b(0xc2)]]);continue;case'2':this[_0x2b4f7b(0x101)][_0x2b4f7b(0xd4)]=_0x58997f['VQZGw'](require,_0x58997f[_0x2b4f7b(0xed)])[_0x2b4f7b(0xd8)]({...this['configuration'],'capability':this[_0x2b4f7b(0xff)]||{}},this,testhubUtils['shouldProcessEventForTesthub']());continue;case'3':this['global'][_0x2b4f7b(0xe5)]=helper['nestedKeyValue'](this[_0x2b4f7b(0xdd)],[_0x58997f[_0x2b4f7b(0xd3)],this[_0x2b4f7b(0x101)]['browserstackPlatformIndex']])||{};continue;case'4':helper[_0x2b4f7b(0xcb)](this[_0x2b4f7b(0xdd)][_0x2b4f7b(0xf0)])?this[_0x2b4f7b(0x101)][_0x2b4f7b(0xf7)]=!![]:this[_0x2b4f7b(0x101)][_0x2b4f7b(0xf7)]=![];continue;case'5':this[_0x2b4f7b(0x101)][_0x2b4f7b(0x11c)]=helper[_0x2b4f7b(0xee)](_0x165af4,[_0x58997f['xtwYX'],_0x58997f[_0x2b4f7b(0xcd)],_0x58997f[_0x2b4f7b(0xbe)]]);continue;case'6':this[_0x2b4f7b(0x101)]['__skipSessionStatus']=helper[_0x2b4f7b(0xcb)](this[_0x2b4f7b(0xdd)][_0x2b4f7b(0xbd)]);continue;case'7':this[_0x2b4f7b(0x101)]['percyCaptureMode']=helper[_0x2b4f7b(0xee)](_0x165af4,[_0x58997f[_0x2b4f7b(0x112)],_0x58997f['xXvSO'],_0x58997f['OYVbx']]);continue;case'8':this[_0x2b4f7b(0x101)][_0x2b4f7b(0xd7)]=(_0x165af4[_0x2b4f7b(0x104)]?_0x165af4['projectConfig'][_0x2b4f7b(0xd7)]:_0x165af4[_0x2b4f7b(0xd7)])||0x0;continue;case'9':this[_0x2b4f7b(0x101)]['__drivers']=[];continue;}break;}}}async['teardown'](){const _0x1f34db=a18_0x4f7237;_seleniumWebdriver2&&(await helper[_0x1f34db(0x123)](this['global'][_0x1f34db(0x110)]),this['global'][_0x1f34db(0xd4)]['Builder']=originalBuilder),await RequestQueueHandler['getInstance']()[_0x1f34db(0x114)]();}async[a18_0x4f7237(0xbb)](){}async[a18_0x4f7237(0xda)](_0x2b2c96,_0x5532af){const _0x29f606=a18_0x4f7237,_0x3cb057={};_0x3cb057[_0x29f606(0x111)]=function(_0x445197,_0x273ab6){return _0x445197===_0x273ab6;},_0x3cb057[_0x29f606(0xef)]=_0x29f606(0xba),_0x3cb057['jbskk']=function(_0x36e879,_0x6da082){return _0x36e879===_0x6da082;},_0x3cb057['dHXeT']=_0x29f606(0xc5),_0x3cb057['MTIXn']='test_done',_0x3cb057['fJRGv']=_0x29f606(0x11f),_0x3cb057['qriwO']=_0x29f606(0xec),_0x3cb057[_0x29f606(0x102)]=_0x29f606(0x117);const _0x3bcf13=_0x3cb057,{name:_0x5dea2a}=_0x2b2c96;if(_0x3bcf13['rMzbR'](_0x5dea2a,_0x3bcf13['bmMea'])){this['global'][_0x29f606(0x11a)]=_0x2b2c96['test'];if(_0x3bcf13[_0x29f606(0x108)](this[_0x29f606(0x101)][_0x29f606(0xe9)],!![])){const _0x5e85a8=_0x2b2c96[_0x29f606(0xfa)]['name'];logger[_0x29f606(0xea)](_0x29f606(0x113)+_0x5e85a8),_0x2b2c96['test'][_0x29f606(0x115)]=_0x3bcf13[_0x29f606(0xfd)];}}if(this['failFast']&&_0x3bcf13['rMzbR'](_0x5dea2a,_0x3bcf13['MTIXn']))try{const _0x1bb202=_0x2b2c96[_0x29f606(0xfa)][_0x29f606(0xce)][_0x29f606(0x121)](_0x3bcf13['fJRGv']),_0x298ff1=_0x2b2c96[_0x29f606(0xfa)]['errors'];await this['failFast']['onTestDone'](_0x1bb202,_0x298ff1);const _0x37af2e=await this[_0x29f606(0xe3)][_0x29f606(0xfe)]();_0x3bcf13[_0x29f606(0x108)](this['global'][_0x29f606(0xe9)],![])&&_0x3bcf13[_0x29f606(0x111)](_0x37af2e,!![])&&(this[_0x29f606(0x101)][_0x29f606(0xe9)]=!![]);}catch(_0x57742b){logger['debug'](_0x3bcf13[_0x29f606(0xbc)],_0x57742b[_0x29f606(0xf3)]);}_0x3bcf13[_0x29f606(0x111)](_0x5dea2a,_0x3bcf13[_0x29f606(0x102)])&&(this[_0x29f606(0xe3)]&&this[_0x29f606(0xe3)][_0x29f606(0xdc)]());}}function a18_0x3cc7(_0x4b68ee,_0xeee781){const _0x12f40b=a18_0x12f4();return a18_0x3cc7=function(_0x3cc763,_0x1446f7){_0x3cc763=_0x3cc763-0xba;let _0x262054=_0x12f40b[_0x3cc763];return _0x262054;},a18_0x3cc7(_0x4b68ee,_0xeee781);}module[a18_0x4f7237(0xc7)]=CustomEnvironment;