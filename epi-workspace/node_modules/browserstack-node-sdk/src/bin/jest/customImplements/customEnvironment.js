const a16_0xa83193=a16_0x5ca8;function a16_0x5ca8(_0x1e58dc,_0xf49c74){const _0x435120=a16_0x4351();return a16_0x5ca8=function(_0x5ca81e,_0x54cbd9){_0x5ca81e=_0x5ca81e-0x1d7;let _0x273e22=_0x435120[_0x5ca81e];return _0x273e22;},a16_0x5ca8(_0x1e58dc,_0xf49c74);}(function(_0x2c8595,_0xc9e4ca){const _0x2903da=a16_0x5ca8,_0x5713f6=_0x2c8595();while(!![]){try{const _0x2aec27=parseInt(_0x2903da(0x1df))/0x1+parseInt(_0x2903da(0x1fd))/0x2*(parseInt(_0x2903da(0x21e))/0x3)+-parseInt(_0x2903da(0x232))/0x4+-parseInt(_0x2903da(0x1e5))/0x5+parseInt(_0x2903da(0x1f0))/0x6+-parseInt(_0x2903da(0x224))/0x7+parseInt(_0x2903da(0x1e0))/0x8*(parseInt(_0x2903da(0x22f))/0x9);if(_0x2aec27===_0xc9e4ca)break;else _0x5713f6['push'](_0x5713f6['shift']());}catch(_0x5b5ddc){_0x5713f6['push'](_0x5713f6['shift']());}}}(a16_0x4351,0x6ad1f));const helper=require(a16_0xa83193(0x218)),constants=require(a16_0xa83193(0x21c)),{isTestObservabilitySession}=require(a16_0xa83193(0x1f3)),RequestQueueHandler=require(a16_0xa83193(0x208)),ObservabilityReporter=require('../test-observability/obsReporter'),testhubUtils=require(a16_0xa83193(0x1f2)),logger=require('../../../helpers/logger')[a16_0xa83193(0x234)],getTestEnvironment=((()=>{const _0x303636=a16_0xa83193,_0x46a057={};_0x46a057[_0x303636(0x205)]=_0x303636(0x23e),_0x46a057['GXzte']=_0x303636(0x217);const _0x377e9b=_0x46a057;try{const _0x58d54b=helper[_0x303636(0x23c)](_0x377e9b[_0x303636(0x205)]);if(_0x58d54b[_0x303636(0x211)])return _0x58d54b[_0x303636(0x211)];const _0x118c8f=helper[_0x303636(0x23c)](_0x377e9b[_0x303636(0x1e8)]);if(_0x118c8f[_0x303636(0x227)])return _0x118c8f['getTestEnvironment'];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x373c2a=a16_0xa83193,_0x47f507={'xAvoK':function(_0x467785,_0x39eec1){return _0x467785(_0x39eec1);},'XOKbm':_0x373c2a(0x230),'GJTaf':'jest-environment-node','nPYQw':function(_0x44e4d7,_0x3a5d1b){return _0x44e4d7(_0x3a5d1b);}},_0x5c1c25=_0x47f507[_0x373c2a(0x1dc)](getTestEnvironment,{'rootDir':process['cwd'](),'testEnvironment':process[_0x373c2a(0x1ef)][_0x373c2a(0x236)]||_0x47f507[_0x373c2a(0x1e4)]});if(!_0x5c1c25)return _0x47f507['xAvoK'](_interopRequireDefault,helper['requireModule'](_0x47f507[_0x373c2a(0x1de)]));return _0x47f507[_0x373c2a(0x1e9)](_interopRequireDefault,helper[_0x373c2a(0x23c)](_0x5c1c25));})()),_seleniumWebdriver2=((()=>{const _0x2bd5ba=a16_0xa83193,_0x28102d={'chfhN':function(_0x13b77e,_0x31c563){return _0x13b77e(_0x31c563);}};try{const _0x165a1c=helper[_0x2bd5ba(0x210)]();return helper[_0x2bd5ba(0x1fc)](),_0x28102d[_0x2bd5ba(0x1d7)](_interopRequireDefault,_0x165a1c);}catch{return null;}})());function _interopRequireDefault(_0x10c932){return _0x10c932&&_0x10c932['__esModule']?_0x10c932:{'default':_0x10c932};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0xa83193(0x1eb)][a16_0xa83193(0x1ea)]:null;function a16_0x4351(){const _0x169bc8=['../../utils/constants','getInstance','3hOjqVY','registerListeners','test_start','Vtewm','driver','testContext','3158330XYlZOu','failFastActive','info','getTestEnvironment','timeout__','shouldFailFast','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','lYMUf','test','builder','isTrue','10359MjwDni','node','YjzJg','2701808qXpxed','global','winstonLogger','jestConfig','BSTACK_JEST_TEST_ENV','buildName','debug','errors','percy','platformCaps','requireModule','percyCaptureMode','jest-resolve','failFast','__jestRetries','testEnvironmentOptions','gKrwD','cleanup','ZjZWw','browserStackPercyOptions','chfhN','__driversArray','__skipSessionStatus','test_done','tFVEw','xAvoK','isArray','GJTaf','420027aHeIrJ','5552vuioPJ','browserstackAgentV2','vqQtK','__timeout','XOKbm','3265750WGJdMV','shutdown','ZImUw','GXzte','nPYQw','Builder','default','hapEp','shouldProcessEventForTesthub','__platformCaps','env','2389530sJrasp','pgJYn','../../../helpers/testhub/utils','../../../helpers/test-observability/utils','handleTestEvent','FRAMEWORKS','__webdriver','failFastOptions','pyidT','fJsPx','nestedKeyValue','Error\x20in\x20fail-fast\x20test_done\x20handler:','modifyCommand','1200502VLPMZN','djSIN','projectName','__drivers','skipSessionName','capabilities','BSTACK_DELTA','skipSessionStatus','fHMqB','framework','browserstackPercyBestPlatform','../../../helpers/test-observability/requestQueueHandler','KrouL','browserStackGlobals','cleanupDrivers','projectConfig','teardown','sessionNameProvided','split','requireSeleniumWebdriver','resolveTestEnvironment','quit','configuration','isBrowserstackInfra','capability','browserstackPlatformIndex','jest-config','../../../helpers/helper','tgZMu','PwYbp','setup'];a16_0x4351=function(){return _0x169bc8;};return a16_0x4351();}class CustomEnvironment extends _jestUserEnvironment[a16_0xa83193(0x1eb)]{constructor(_0x394ba2){const _0x1e7fd6=a16_0xa83193,_0x3a34d6={'OSdjO':_0x1e7fd6(0x212),'heQQc':function(_0x728c82,_0x24fc9c){return _0x728c82+_0x24fc9c;},'tFVEw':'bstack:options','djSIN':function(_0x2fa130,_0x20f604){return _0x2fa130(_0x20f604);},'ORCMs':'../../../helpers/test-orchestration/failfastManager','baviE':'2|1|6|4|7|5|3|0','gKrwD':function(_0x1e4a8e,_0x10e851){return _0x1e4a8e(_0x10e851);},'pyidT':'../../../index','YjzJg':_0x1e7fd6(0x241),'pgJYn':_0x1e7fd6(0x245),'lYMUf':'percy','ZjZWw':_0x1e7fd6(0x207),'Vtewm':_0x1e7fd6(0x23d)};super(_0x394ba2),this[_0x1e7fd6(0x233)][_0x1e7fd6(0x1e3)]=0x0,this[_0x1e7fd6(0x213)]={};!_0x394ba2[_0x1e7fd6(0x241)]&&(_0x394ba2[_0x1e7fd6(0x241)]={});if(helper[_0x1e7fd6(0x214)]()){_0x394ba2[_0x1e7fd6(0x241)]=_0x394ba2[_0x1e7fd6(0x20c)]?_0x394ba2['projectConfig'][_0x1e7fd6(0x241)]:_0x394ba2[_0x1e7fd6(0x241)];_seleniumWebdriver2&&(this[_0x1e7fd6(0x22d)]=new _seleniumWebdriver2['default']['Builder']());this[_0x1e7fd6(0x215)]=_0x394ba2['projectConfig']?_0x394ba2[_0x1e7fd6(0x20c)][_0x1e7fd6(0x215)]:_0x394ba2['capability'],this['global'][_0x1e7fd6(0x1e3)]=_0x3a34d6['heQQc'](_0x394ba2[_0x1e7fd6(0x241)][_0x1e7fd6(0x228)]||0x1388,constants[_0x1e7fd6(0x203)]),this[_0x1e7fd6(0x1f7)]=_0x394ba2[_0x1e7fd6(0x241)]['failFast'];if(this[_0x1e7fd6(0x1f7)]){const _0x12164c=this[_0x1e7fd6(0x215)][_0x3a34d6[_0x1e7fd6(0x1db)]]?.[_0x1e7fd6(0x237)]||'',_0x53b3e9=this[_0x1e7fd6(0x215)][_0x3a34d6[_0x1e7fd6(0x1db)]]?.[_0x1e7fd6(0x1ff)]||'';this[_0x1e7fd6(0x23f)]=new(_0x3a34d6[_0x1e7fd6(0x1fe)](require,_0x3a34d6['ORCMs']))(this['failFastOptions'],_0x12164c,_0x53b3e9),this[_0x1e7fd6(0x233)][_0x1e7fd6(0x225)]=![];}helper['isNotUndefined'](_0x394ba2[_0x1e7fd6(0x241)]['retries__'])&&(this['global'][_0x1e7fd6(0x240)]=_0x394ba2['testEnvironmentOptions']['retries__']);}if(testhubUtils[_0x1e7fd6(0x1ed)]()){const _0x51e895=new ObservabilityReporter();_0x51e895[_0x1e7fd6(0x21f)]();}this[_0x1e7fd6(0x233)][_0x1e7fd6(0x20a)]={},this[_0x1e7fd6(0x213)]=_0x394ba2[_0x1e7fd6(0x241)],this['configuration'][_0x1e7fd6(0x206)]=constants[_0x1e7fd6(0x1f5)]['JEST'],this[_0x1e7fd6(0x233)][_0x1e7fd6(0x216)]=(_0x394ba2[_0x1e7fd6(0x20c)]?_0x394ba2['projectConfig'][_0x1e7fd6(0x216)]:_0x394ba2[_0x1e7fd6(0x216)])||0x0,this[_0x1e7fd6(0x233)][_0x1e7fd6(0x1ee)]=this[_0x1e7fd6(0x213)]&&this[_0x1e7fd6(0x213)]['platformCaps']&&Array[_0x1e7fd6(0x1dd)](this[_0x1e7fd6(0x213)]['platformCaps'])&&this['configuration'][_0x1e7fd6(0x23b)][this['global'][_0x1e7fd6(0x216)]]||{};const _0x1cd4a4=this[_0x1e7fd6(0x233)][_0x1e7fd6(0x216)],_0x5496b9={...this[_0x1e7fd6(0x213)],'capability':this[_0x1e7fd6(0x213)][_0x1e7fd6(0x202)]&&Array['isArray'](this[_0x1e7fd6(0x213)][_0x1e7fd6(0x202)])&&this['configuration'][_0x1e7fd6(0x202)][_0x1cd4a4]||{},'platformCaps':this[_0x1e7fd6(0x213)][_0x1e7fd6(0x23b)]&&Array[_0x1e7fd6(0x1dd)](this[_0x1e7fd6(0x213)][_0x1e7fd6(0x23b)])&&this[_0x1e7fd6(0x213)][_0x1e7fd6(0x23b)][_0x1cd4a4]||{}};delete _0x5496b9[_0x1e7fd6(0x202)],this['global'][_0x1e7fd6(0x235)]=_0x5496b9;if(_seleniumWebdriver2){const _0x29f515=_0x3a34d6['baviE'][_0x1e7fd6(0x20f)]('|');let _0x310570=0x0;while(!![]){switch(_0x29f515[_0x310570++]){case'0':this[_0x1e7fd6(0x233)][_0x1e7fd6(0x243)]=async()=>{const _0x362ddf=_0x1e7fd6;await this['global'][_0x362ddf(0x222)][_0x362ddf(0x212)](_0x3a34d6['OSdjO']);};continue;case'1':this[_0x1e7fd6(0x233)][_0x1e7fd6(0x1f6)]=_0x3a34d6[_0x1e7fd6(0x242)](require,_0x3a34d6[_0x1e7fd6(0x1f8)])[_0x1e7fd6(0x1e1)]({...this['configuration'],'capability':this[_0x1e7fd6(0x215)]||{}},this,testhubUtils[_0x1e7fd6(0x1ed)]());continue;case'2':this['global'][_0x1e7fd6(0x200)]=[];continue;case'3':this['global'][_0x1e7fd6(0x1d9)]=helper[_0x1e7fd6(0x22e)](this[_0x1e7fd6(0x213)][_0x1e7fd6(0x204)]);continue;case'4':this[_0x1e7fd6(0x233)][_0x1e7fd6(0x23a)]=helper['nestedKeyValue'](_0x394ba2,[_0x3a34d6[_0x1e7fd6(0x231)],_0x3a34d6[_0x1e7fd6(0x1f1)],_0x3a34d6[_0x1e7fd6(0x22b)]]);continue;case'5':helper[_0x1e7fd6(0x22e)](this['configuration'][_0x1e7fd6(0x201)])?this['global'][_0x1e7fd6(0x20e)]=!![]:this['global'][_0x1e7fd6(0x20e)]=![];continue;case'6':this['global'][_0x1e7fd6(0x207)]=helper[_0x1e7fd6(0x1fa)](_0x394ba2,[_0x3a34d6[_0x1e7fd6(0x231)],_0x3a34d6[_0x1e7fd6(0x1f1)],_0x3a34d6[_0x1e7fd6(0x244)]]);continue;case'7':this[_0x1e7fd6(0x233)][_0x1e7fd6(0x23d)]=helper[_0x1e7fd6(0x1fa)](_0x394ba2,[_0x3a34d6[_0x1e7fd6(0x231)],_0x3a34d6['pgJYn'],_0x3a34d6[_0x1e7fd6(0x221)]]);continue;}break;}}}async[a16_0xa83193(0x20d)](){const _0x4faab9=a16_0xa83193;_seleniumWebdriver2&&(await helper[_0x4faab9(0x20b)](this[_0x4faab9(0x233)][_0x4faab9(0x1d8)]),this[_0x4faab9(0x233)]['__webdriver'][_0x4faab9(0x1ea)]=originalBuilder),await RequestQueueHandler[_0x4faab9(0x21d)]()[_0x4faab9(0x1e6)]();}async[a16_0xa83193(0x21b)](){}async[a16_0xa83193(0x1f4)](_0x3cd7c2,_0x436b22){const _0x253791=a16_0xa83193,_0x1d6711={};_0x1d6711[_0x253791(0x1ec)]=function(_0x5cb607,_0x20d0d9){return _0x5cb607===_0x20d0d9;},_0x1d6711[_0x253791(0x1e2)]=_0x253791(0x220),_0x1d6711['ZImUw']='skip',_0x1d6711[_0x253791(0x219)]=function(_0x60326,_0x668287){return _0x60326===_0x668287;},_0x1d6711[_0x253791(0x1f9)]=_0x253791(0x1da),_0x1d6711['irZyZ']='\x20>\x20',_0x1d6711['CcAER']=function(_0x442a4a,_0x2f4fd8){return _0x442a4a===_0x2f4fd8;},_0x1d6711[_0x253791(0x209)]=_0x253791(0x1fb),_0x1d6711[_0x253791(0x21a)]=_0x253791(0x20d);const _0x1f8d4e=_0x1d6711,{name:_0x21b90e}=_0x3cd7c2;if(_0x1f8d4e[_0x253791(0x1ec)](_0x21b90e,_0x1f8d4e[_0x253791(0x1e2)])){this['global'][_0x253791(0x223)]=_0x3cd7c2['test'];if(_0x1f8d4e[_0x253791(0x1ec)](this[_0x253791(0x233)][_0x253791(0x225)],!![])){const _0x8a068=_0x3cd7c2[_0x253791(0x22c)]['name'];logger[_0x253791(0x226)](_0x253791(0x22a)+_0x8a068),_0x3cd7c2[_0x253791(0x22c)]['mode']=_0x1f8d4e[_0x253791(0x1e7)];}}if(this[_0x253791(0x23f)]&&_0x1f8d4e[_0x253791(0x219)](_0x21b90e,_0x1f8d4e[_0x253791(0x1f9)]))try{const _0x38cd9f=_0x3cd7c2[_0x253791(0x22c)]['testPath']['join'](_0x1f8d4e['irZyZ']),_0x321476=_0x3cd7c2[_0x253791(0x22c)][_0x253791(0x239)];await this[_0x253791(0x23f)]['onTestDone'](_0x38cd9f,_0x321476);const _0x54f4fa=await this[_0x253791(0x23f)][_0x253791(0x229)]();_0x1f8d4e[_0x253791(0x219)](this[_0x253791(0x233)][_0x253791(0x225)],![])&&_0x1f8d4e['CcAER'](_0x54f4fa,!![])&&(this['global'][_0x253791(0x225)]=!![]);}catch(_0xd3ba04){logger[_0x253791(0x238)](_0x1f8d4e['KrouL'],_0xd3ba04['message']);}_0x1f8d4e[_0x253791(0x219)](_0x21b90e,_0x1f8d4e[_0x253791(0x21a)])&&(this[_0x253791(0x23f)]&&this[_0x253791(0x23f)][_0x253791(0x243)]());}}module['exports']=CustomEnvironment;