const a16_0x2eeb2a=a16_0x5514;function a16_0x5514(_0x379a04,_0x94c81f){const _0x54b6cd=a16_0x54b6();return a16_0x5514=function(_0x551491,_0x5d5769){_0x551491=_0x551491-0xbf;let _0x1090e3=_0x54b6cd[_0x551491];return _0x1090e3;},a16_0x5514(_0x379a04,_0x94c81f);}(function(_0x2d2a54,_0x5a392e){const _0x3bd374=a16_0x5514,_0x3fe1be=_0x2d2a54();while(!![]){try{const _0x36972f=-parseInt(_0x3bd374(0xc8))/0x1*(parseInt(_0x3bd374(0x11e))/0x2)+-parseInt(_0x3bd374(0x102))/0x3*(-parseInt(_0x3bd374(0x123))/0x4)+-parseInt(_0x3bd374(0xc9))/0x5*(-parseInt(_0x3bd374(0xfb))/0x6)+parseInt(_0x3bd374(0xd0))/0x7+-parseInt(_0x3bd374(0x116))/0x8+-parseInt(_0x3bd374(0x12c))/0x9*(-parseInt(_0x3bd374(0xc4))/0xa)+-parseInt(_0x3bd374(0xe5))/0xb;if(_0x36972f===_0x5a392e)break;else _0x3fe1be['push'](_0x3fe1be['shift']());}catch(_0x1b98c5){_0x3fe1be['push'](_0x3fe1be['shift']());}}}(a16_0x54b6,0x52523));const helper=require(a16_0x2eeb2a(0xf6)),constants=require(a16_0x2eeb2a(0xcc)),{isTestObservabilitySession}=require('../../../helpers/test-observability/utils'),RequestQueueHandler=require(a16_0x2eeb2a(0xef)),ObservabilityReporter=require(a16_0x2eeb2a(0xdf)),testhubUtils=require('../../../helpers/testhub/utils'),logger=require('../../../helpers/logger')[a16_0x2eeb2a(0xe3)],getTestEnvironment=((()=>{const _0xf23279=a16_0x2eeb2a,_0x2e2429={};_0x2e2429[_0xf23279(0x107)]=_0xf23279(0xd9),_0x2e2429[_0xf23279(0x110)]=_0xf23279(0xda);const _0x51ea7f=_0x2e2429;try{const _0x1eb78d=helper[_0xf23279(0x12d)](_0x51ea7f[_0xf23279(0x107)]);if(_0x1eb78d[_0xf23279(0xc1)])return _0x1eb78d['resolveTestEnvironment'];const _0x232924=helper[_0xf23279(0x12d)](_0x51ea7f[_0xf23279(0x110)]);if(_0x232924[_0xf23279(0xf4)])return _0x232924[_0xf23279(0xf4)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x2a4b57=a16_0x2eeb2a,_0x5b47e2={'TxZok':function(_0x2b2d7b,_0x515070){return _0x2b2d7b(_0x515070);},'RcBVc':_0x2a4b57(0x114),'CFFhB':_0x2a4b57(0xd7),'HpymX':function(_0x18bd97,_0x4c7259){return _0x18bd97(_0x4c7259);}},_0x8b6471=_0x5b47e2[_0x2a4b57(0xc5)](getTestEnvironment,{'rootDir':process['cwd'](),'testEnvironment':process[_0x2a4b57(0x109)][_0x2a4b57(0x129)]||_0x5b47e2[_0x2a4b57(0x106)]});if(!_0x8b6471)return _0x5b47e2['TxZok'](_interopRequireDefault,helper[_0x2a4b57(0x12d)](_0x5b47e2[_0x2a4b57(0x12f)]));return _0x5b47e2[_0x2a4b57(0x10f)](_interopRequireDefault,helper[_0x2a4b57(0x12d)](_0x8b6471));})()),_seleniumWebdriver2=((()=>{const _0x11bfb8=a16_0x2eeb2a,_0x41c13a={'dMzGX':function(_0x13188b,_0x204140){return _0x13188b(_0x204140);}};try{const _0x397ddb=helper[_0x11bfb8(0xf1)]();return helper['modifyCommand'](),_0x41c13a[_0x11bfb8(0xc3)](_interopRequireDefault,_0x397ddb);}catch{return null;}})());function _interopRequireDefault(_0x2c4976){const _0x259731=a16_0x2eeb2a;return _0x2c4976&&_0x2c4976[_0x259731(0x128)]?_0x2c4976:{'default':_0x2c4976};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0x2eeb2a(0x104)]['Builder']:null;class CustomEnvironment extends _jestUserEnvironment[a16_0x2eeb2a(0x104)]{constructor(_0x24d6c2){const _0x1f2a10=a16_0x2eeb2a,_0x38a219={'xHjBX':_0x1f2a10(0xfe),'VTNFz':function(_0x2d7000,_0xca9ac1){return _0x2d7000+_0xca9ac1;},'IHKxz':_0x1f2a10(0x130),'NGQcb':function(_0x50cb64,_0xad3347){return _0x50cb64(_0xad3347);},'siqvO':'../../../helpers/test-orchestration/failfastManager','xbing':_0x1f2a10(0x124),'KydWi':_0x1f2a10(0xd6),'unZCl':'browserStackPercyOptions','dNdeg':'percy','OuFWE':_0x1f2a10(0xdb),'rxefY':'percyCaptureMode','IMyVU':'../../../index'};super(_0x24d6c2),this[_0x1f2a10(0x11b)][_0x1f2a10(0xbf)]=0x0,this[_0x1f2a10(0xd8)]={};!_0x24d6c2[_0x1f2a10(0xd6)]&&(_0x24d6c2['testEnvironmentOptions']={});if(helper[_0x1f2a10(0xee)]()){_0x24d6c2[_0x1f2a10(0xd6)]=_0x24d6c2[_0x1f2a10(0xf9)]?_0x24d6c2[_0x1f2a10(0xf9)][_0x1f2a10(0xd6)]:_0x24d6c2[_0x1f2a10(0xd6)];_seleniumWebdriver2&&(this[_0x1f2a10(0xc7)]=new _seleniumWebdriver2[(_0x1f2a10(0x104))]['Builder']());this[_0x1f2a10(0x121)]=_0x24d6c2[_0x1f2a10(0xf9)]?_0x24d6c2['projectConfig'][_0x1f2a10(0x121)]:_0x24d6c2['capability'],this[_0x1f2a10(0x11b)][_0x1f2a10(0xbf)]=_0x38a219['VTNFz'](_0x24d6c2[_0x1f2a10(0xd6)][_0x1f2a10(0x12e)]||0x1388,constants[_0x1f2a10(0x10c)]),this[_0x1f2a10(0xe7)]=_0x24d6c2[_0x1f2a10(0xd6)][_0x1f2a10(0xed)];if(this[_0x1f2a10(0xe7)]){const _0x30b96b=this[_0x1f2a10(0x121)][_0x38a219[_0x1f2a10(0xc0)]]?.[_0x1f2a10(0x125)]||'',_0x666d10=this[_0x1f2a10(0x121)][_0x38a219[_0x1f2a10(0xc0)]]?.[_0x1f2a10(0x119)]||'';this['failFast']=new(_0x38a219['NGQcb'](require,_0x38a219[_0x1f2a10(0x12b)]))(this[_0x1f2a10(0xe7)],_0x30b96b,_0x666d10),this[_0x1f2a10(0x11b)][_0x1f2a10(0xd3)]=![];}helper[_0x1f2a10(0xf0)](_0x24d6c2[_0x1f2a10(0xd6)]['retries__'])&&(this[_0x1f2a10(0x11b)]['__jestRetries']=_0x24d6c2[_0x1f2a10(0xd6)][_0x1f2a10(0xe1)]);}if(testhubUtils[_0x1f2a10(0x126)]()){const _0x11e183=new ObservabilityReporter();_0x11e183[_0x1f2a10(0x122)]();}this[_0x1f2a10(0x11b)][_0x1f2a10(0x10e)]={},this[_0x1f2a10(0xd8)]=_0x24d6c2[_0x1f2a10(0xd6)],this[_0x1f2a10(0xd8)][_0x1f2a10(0x112)]=constants['FRAMEWORKS'][_0x1f2a10(0x118)],this[_0x1f2a10(0x11b)][_0x1f2a10(0xf7)]=(_0x24d6c2['projectConfig']?_0x24d6c2[_0x1f2a10(0xf9)][_0x1f2a10(0xf7)]:_0x24d6c2[_0x1f2a10(0xf7)])||0x0,this[_0x1f2a10(0x11b)]['__platformCaps']=this['configuration']&&this['configuration'][_0x1f2a10(0xf8)]&&Array['isArray'](this['configuration'][_0x1f2a10(0xf8)])&&this['configuration'][_0x1f2a10(0xf8)][this[_0x1f2a10(0x11b)][_0x1f2a10(0xf7)]]||{};const _0x4c7a1e=this[_0x1f2a10(0x11b)][_0x1f2a10(0xf7)],_0x5f095c={...this[_0x1f2a10(0xd8)],'capability':this[_0x1f2a10(0xd8)][_0x1f2a10(0x10a)]&&Array[_0x1f2a10(0x101)](this[_0x1f2a10(0xd8)][_0x1f2a10(0x10a)])&&this['configuration'][_0x1f2a10(0x10a)][_0x4c7a1e]||{},'platformCaps':this[_0x1f2a10(0xd8)][_0x1f2a10(0xf8)]&&Array[_0x1f2a10(0x101)](this[_0x1f2a10(0xd8)][_0x1f2a10(0xf8)])&&this[_0x1f2a10(0xd8)][_0x1f2a10(0xf8)][_0x4c7a1e]||{}};delete _0x5f095c[_0x1f2a10(0x10a)],this['global'][_0x1f2a10(0x105)]=_0x5f095c;if(_seleniumWebdriver2){const _0x12fc77=_0x38a219[_0x1f2a10(0xdd)][_0x1f2a10(0xc6)]('|');let _0x25a4d8=0x0;while(!![]){switch(_0x12fc77[_0x25a4d8++]){case'0':this[_0x1f2a10(0x11b)][_0x1f2a10(0x103)]=helper[_0x1f2a10(0xd1)](_0x24d6c2,[_0x38a219[_0x1f2a10(0x11d)],_0x38a219[_0x1f2a10(0x117)],_0x38a219[_0x1f2a10(0x108)]]);continue;case'1':this[_0x1f2a10(0x11b)][_0x1f2a10(0xe9)]=async()=>{const _0x12f1f1=_0x1f2a10;await this['global'][_0x12f1f1(0xde)]['quit'](_0x38a219[_0x12f1f1(0x12a)]);};continue;case'2':this[_0x1f2a10(0x11b)][_0x1f2a10(0xe8)]=helper[_0x1f2a10(0xeb)](this[_0x1f2a10(0xd8)]['skipSessionStatus']);continue;case'3':this['global'][_0x1f2a10(0xdb)]=helper[_0x1f2a10(0xd1)](_0x24d6c2,[_0x38a219['KydWi'],_0x38a219[_0x1f2a10(0x117)],_0x38a219[_0x1f2a10(0xe0)]]);continue;case'4':helper[_0x1f2a10(0xeb)](this['configuration']['skipSessionName'])?this['global']['sessionNameProvided']=!![]:this[_0x1f2a10(0x11b)]['sessionNameProvided']=![];continue;case'5':this[_0x1f2a10(0x11b)][_0x1f2a10(0x100)]=helper[_0x1f2a10(0xd1)](_0x24d6c2,[_0x38a219['KydWi'],_0x38a219[_0x1f2a10(0x117)],_0x38a219[_0x1f2a10(0x11a)]]);continue;case'6':this['global']['__webdriver']=_0x38a219[_0x1f2a10(0x11f)](require,_0x38a219[_0x1f2a10(0xf5)])[_0x1f2a10(0x111)]({...this[_0x1f2a10(0xd8)],'capability':this['capability']||{}},this,testhubUtils[_0x1f2a10(0x126)]());continue;case'7':this[_0x1f2a10(0x11b)][_0x1f2a10(0xc2)]=[];continue;}break;}}}async[a16_0x2eeb2a(0x120)](){const _0xa1e06e=a16_0x2eeb2a;_seleniumWebdriver2&&(await helper['cleanupDrivers'](this[_0xa1e06e(0x11b)][_0xa1e06e(0xe6)]),this[_0xa1e06e(0x11b)][_0xa1e06e(0xcb)]['Builder']=originalBuilder),await RequestQueueHandler[_0xa1e06e(0xce)]()[_0xa1e06e(0xd5)]();}async[a16_0x2eeb2a(0x10b)](){}async[a16_0x2eeb2a(0xd2)](_0x11deba,_0x44f528){const _0x56fd61=a16_0x2eeb2a,_0x5b1c7d={};_0x5b1c7d[_0x56fd61(0xfd)]=function(_0x4427a6,_0x3b509a){return _0x4427a6===_0x3b509a;},_0x5b1c7d['CXZIC']='test_start',_0x5b1c7d[_0x56fd61(0x127)]=_0x56fd61(0xca),_0x5b1c7d[_0x56fd61(0xea)]=function(_0x4f5519,_0x4e3c87){return _0x4f5519===_0x4e3c87;},_0x5b1c7d[_0x56fd61(0xe2)]=_0x56fd61(0xf3),_0x5b1c7d[_0x56fd61(0xcf)]='\x20>\x20',_0x5b1c7d[_0x56fd61(0x10d)]=function(_0x24bb9e,_0x14b06d){return _0x24bb9e===_0x14b06d;},_0x5b1c7d[_0x56fd61(0x113)]='Error\x20in\x20fail-fast\x20test_done\x20handler:',_0x5b1c7d[_0x56fd61(0xf2)]=function(_0x43ef16,_0x36a576){return _0x43ef16===_0x36a576;},_0x5b1c7d[_0x56fd61(0x115)]=_0x56fd61(0x120);const _0x1cdb6a=_0x5b1c7d,{name:_0x2e637e}=_0x11deba;if(_0x1cdb6a[_0x56fd61(0xfd)](_0x2e637e,_0x1cdb6a[_0x56fd61(0xcd)])){this[_0x56fd61(0x11b)][_0x56fd61(0xd4)]=_0x11deba[_0x56fd61(0xdc)];if(_0x1cdb6a[_0x56fd61(0xfd)](this[_0x56fd61(0x11b)]['failFastActive'],!![])){const _0x26ca10=_0x11deba[_0x56fd61(0xdc)]['name'];logger[_0x56fd61(0xe4)]('Fail-fast\x20is\x20active,\x20skipping\x20test::\x20'+_0x26ca10),_0x11deba[_0x56fd61(0xdc)][_0x56fd61(0xec)]=_0x1cdb6a[_0x56fd61(0x127)];}}if(this[_0x56fd61(0xed)]&&_0x1cdb6a['tYHmR'](_0x2e637e,_0x1cdb6a[_0x56fd61(0xe2)]))try{const _0x4d936d=_0x11deba[_0x56fd61(0xdc)][_0x56fd61(0xfc)][_0x56fd61(0xfa)](_0x1cdb6a[_0x56fd61(0xcf)]),_0x5c5f5d=_0x11deba[_0x56fd61(0xdc)][_0x56fd61(0xff)];await this[_0x56fd61(0xed)]['onTestDone'](_0x4d936d,_0x5c5f5d);const _0x1c24f2=await this[_0x56fd61(0xed)]['shouldFailFast']();_0x1cdb6a[_0x56fd61(0x10d)](this[_0x56fd61(0x11b)]['failFastActive'],![])&&_0x1cdb6a['RcILv'](_0x1c24f2,!![])&&(this[_0x56fd61(0x11b)][_0x56fd61(0xd3)]=!![]);}catch(_0x30e381){logger[_0x56fd61(0x11c)](_0x1cdb6a[_0x56fd61(0x113)],_0x30e381['message']);}_0x1cdb6a[_0x56fd61(0xf2)](_0x2e637e,_0x1cdb6a[_0x56fd61(0x115)])&&(this[_0x56fd61(0xed)]&&this[_0x56fd61(0xed)][_0x56fd61(0xe9)]());}}function a16_0x54b6(){const _0x684854=['node','poIti','4901936qaXoYD','unZCl','JEST','projectName','rxefY','global','debug','KydWi','150qtYfyP','NGQcb','teardown','capability','registerListeners','4HCVLnd','7|6|3|0|5|4|2|1','buildName','shouldProcessEventForTesthub','SDdhC','__esModule','BSTACK_JEST_TEST_ENV','xHjBX','siqvO','9SlCpxk','requireModule','timeout__','CFFhB','bstack:options','__timeout','IHKxz','resolveTestEnvironment','__drivers','dMzGX','6595100FfVPts','TxZok','split','builder','4241eDpDoP','25npFnCH','skip','__webdriver','../../utils/constants','CXZIC','getInstance','ndEyU','515557pLOOJt','nestedKeyValue','handleTestEvent','failFastActive','testContext','shutdown','testEnvironmentOptions','jest-environment-node','configuration','jest-resolve','jest-config','browserstackPercyBestPlatform','test','xbing','driver','../test-observability/obsReporter','OuFWE','retries__','UMSQo','winstonLogger','info','2023296EIBGlv','__driversArray','failFastOptions','__skipSessionStatus','cleanup','tYHmR','isTrue','mode','failFast','isBrowserstackInfra','../../../helpers/test-observability/requestQueueHandler','isNotUndefined','requireSeleniumWebdriver','rsBcd','test_done','getTestEnvironment','IMyVU','../../../helpers/helper','browserstackPlatformIndex','platformCaps','projectConfig','join','775122yZuKdP','testPath','RcILv','quit','errors','percyCaptureMode','isArray','218532SQXdxs','percy','default','jestConfig','RcBVc','WJuSG','dNdeg','env','capabilities','setup','BSTACK_DELTA','QXsHF','browserStackGlobals','HpymX','VZLqY','browserstackAgentV2','framework','ceekh'];a16_0x54b6=function(){return _0x684854;};return a16_0x54b6();}module['exports']=CustomEnvironment;