const a18_0x275019=a18_0x5de5;(function(_0x25ac1a,_0x38a16d){const _0x18bfdc=a18_0x5de5,_0x100693=_0x25ac1a();while(!![]){try{const _0x2db8ae=-parseInt(_0x18bfdc(0x155))/0x1*(parseInt(_0x18bfdc(0x157))/0x2)+-parseInt(_0x18bfdc(0x11a))/0x3+parseInt(_0x18bfdc(0x16f))/0x4+-parseInt(_0x18bfdc(0x11e))/0x5+-parseInt(_0x18bfdc(0x16d))/0x6*(parseInt(_0x18bfdc(0x10f))/0x7)+-parseInt(_0x18bfdc(0x15e))/0x8*(-parseInt(_0x18bfdc(0x172))/0x9)+parseInt(_0x18bfdc(0x160))/0xa;if(_0x2db8ae===_0x38a16d)break;else _0x100693['push'](_0x100693['shift']());}catch(_0x491580){_0x100693['push'](_0x100693['shift']());}}}(a18_0x4b6c,0x3bc50));const helper=require(a18_0x275019(0x13e)),constants=require(a18_0x275019(0x107)),{isTestObservabilitySession}=require(a18_0x275019(0x163)),RequestQueueHandler=require(a18_0x275019(0x128)),ObservabilityReporter=require('../test-observability/obsReporter'),testhubUtils=require('../../../helpers/testhub/utils'),logger=require(a18_0x275019(0x12a))['winstonLogger'],getTestEnvironment=((()=>{const _0x4b01d9=a18_0x275019,_0x192029={};_0x192029[_0x4b01d9(0x15f)]='jest-resolve',_0x192029[_0x4b01d9(0x14c)]=_0x4b01d9(0x117);const _0x377e06=_0x192029;try{const _0x38f164=helper[_0x4b01d9(0x12d)](_0x377e06[_0x4b01d9(0x15f)]);if(_0x38f164[_0x4b01d9(0x11d)])return _0x38f164['resolveTestEnvironment'];const _0x4a17e0=helper['requireModule'](_0x377e06['VtgCj']);if(_0x4a17e0[_0x4b01d9(0x105)])return _0x4a17e0[_0x4b01d9(0x105)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x1aa6b5=a18_0x275019,_0x57d414={'gXtsQ':function(_0x4aff05,_0x3db087){return _0x4aff05(_0x3db087);},'BPSgP':_0x1aa6b5(0x158),'WTlsd':function(_0x53d48d,_0x32e2b1){return _0x53d48d(_0x32e2b1);},'xkTSn':_0x1aa6b5(0x15a),'HUrfj':function(_0x520d63,_0x4ce446){return _0x520d63(_0x4ce446);}},_0x109821=_0x57d414[_0x1aa6b5(0x16e)](getTestEnvironment,{'rootDir':process[_0x1aa6b5(0x126)](),'testEnvironment':process[_0x1aa6b5(0x10e)][_0x1aa6b5(0x13c)]||_0x57d414['BPSgP']});if(!_0x109821)return _0x57d414[_0x1aa6b5(0x129)](_interopRequireDefault,helper[_0x1aa6b5(0x12d)](_0x57d414[_0x1aa6b5(0x115)]));return _0x57d414[_0x1aa6b5(0x12f)](_interopRequireDefault,helper[_0x1aa6b5(0x12d)](_0x109821));})()),_seleniumWebdriver2=((()=>{const _0x2570ca=a18_0x275019,_0x6267a3={'tYwvU':function(_0x1335b5,_0x3d41a0){return _0x1335b5(_0x3d41a0);}};try{const _0x44bd47=helper[_0x2570ca(0x13d)]();return helper[_0x2570ca(0x173)](),_0x6267a3[_0x2570ca(0x142)](_interopRequireDefault,_0x44bd47);}catch{return null;}})());function a18_0x5de5(_0x525863,_0x25e073){const _0x4b6c8a=a18_0x4b6c();return a18_0x5de5=function(_0x5de57a,_0x2e03c4){_0x5de57a=_0x5de57a-0x103;let _0x202d23=_0x4b6c8a[_0x5de57a];return _0x202d23;},a18_0x5de5(_0x525863,_0x25e073);}function a18_0x4b6c(){const _0x3a024b=['BSTACK_JEST_TEST_ENV','requireSeleniumWebdriver','../../../helpers/helper','testEnvironmentOptions','shouldProcessEventForTesthub','__timeout','tYwvU','KXHei','info','test','Hlavu','retries__','\x20>\x20','IKmqG','Error\x20in\x20fail-fast\x20test_done\x20handler:','FRAMEWORKS','VtgCj','lkNUj','testContext','xBBeA','cleanupDrivers','percy','default','Builder','eTNdH','1dCbNVT','handleTestEvent','807662DvtuIQ','node','JcuHN','jest-environment-node','testPath','test_start','capability','80zNojVO','Chjwk','10313360yvewvR','Vpaic','projectConfig','../../../helpers/test-observability/utils','Jbesa','browserstackPercyBestPlatform','hYnCy','browserStackGlobals','debug','skipSessionStatus','isTrue','cleanup','browserstackAgentV2','42abggcp','gXtsQ','741668rJDiKs','registerListeners','JEST','107847JBsACQ','modifyCommand','builder','timeout__','browserstackPlatformIndex','getTestEnvironment','HRwzH','../../utils/constants','aDuFE','__platformCaps','__jestRetries','errors','__esModule','__drivers','env','440972uGpLan','owAgK','../../../index','../../../helpers/test-orchestration/failfastManager','teardown','global','xkTSn','rnauB','jest-config','failFast','failFastActive','135429ZhUpCh','GVROb','isBrowserstackInfra','resolveTestEnvironment','1009105WWrAjP','2|7|0|9|1|6|8|5|4|3','NyVGY','ghziK','quit','message','shouldFailFast','nestedKeyValue','cwd','configuration','../../../helpers/test-observability/requestQueueHandler','WTlsd','../../../helpers/logger','ICTOy','buildName','requireModule','XMWyh','HUrfj','sessionNameProvided','dXiwD','name','XDfVN','getInstance','percyCaptureMode','browserStackPercyOptions','failFastOptions','onTestDone','test_done','__webdriver','join'];a18_0x4b6c=function(){return _0x3a024b;};return a18_0x4b6c();}function _interopRequireDefault(_0x2fb9c4){const _0x21f258=a18_0x275019;return _0x2fb9c4&&_0x2fb9c4[_0x21f258(0x10c)]?_0x2fb9c4:{'default':_0x2fb9c4};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a18_0x275019(0x152)][a18_0x275019(0x153)]:null;class CustomEnvironment extends _jestUserEnvironment[a18_0x275019(0x152)]{constructor(_0x34e256){const _0x32f961=a18_0x275019,_0x43f399={'UMXWA':_0x32f961(0x122),'NyVGY':function(_0x1f85b0,_0x157a1d){return _0x1f85b0+_0x157a1d;},'HRwzH':'bstack:options','rnauB':function(_0x432226,_0x38cb76){return _0x432226(_0x38cb76);},'Jbesa':_0x32f961(0x112),'lkNUj':_0x32f961(0x11f),'GVROb':_0x32f961(0x13f),'ICTOy':_0x32f961(0x136),'JvasM':_0x32f961(0x151),'dJeXp':_0x32f961(0x135),'ghziK':_0x32f961(0x111),'Hlavu':'platformCaps','eTNdH':'browserstackPercyBestPlatform'};super(_0x34e256),this[_0x32f961(0x114)]['__timeout']=0x0,this[_0x32f961(0x127)]={};!_0x34e256[_0x32f961(0x13f)]&&(_0x34e256['testEnvironmentOptions']={});if(helper[_0x32f961(0x11c)]()){_0x34e256[_0x32f961(0x13f)]=_0x34e256['projectConfig']?_0x34e256['projectConfig'][_0x32f961(0x13f)]:_0x34e256[_0x32f961(0x13f)],this[_0x32f961(0x174)]=new _seleniumWebdriver2[(_0x32f961(0x152))][(_0x32f961(0x153))](),this[_0x32f961(0x15d)]=_0x34e256['projectConfig']?_0x34e256[_0x32f961(0x162)][_0x32f961(0x15d)]:_0x34e256[_0x32f961(0x15d)],this['global'][_0x32f961(0x141)]=_0x43f399[_0x32f961(0x120)](this['configuration'][_0x32f961(0x103)],constants['BSTACK_DELTA']),this[_0x32f961(0x137)]=_0x34e256[_0x32f961(0x13f)][_0x32f961(0x118)];if(this['failFastOptions']){const _0x195986=this[_0x32f961(0x15d)][_0x43f399[_0x32f961(0x106)]]?.[_0x32f961(0x12c)]||'',_0x32fe83=this[_0x32f961(0x15d)][_0x43f399[_0x32f961(0x106)]]?.['projectName']||'';this[_0x32f961(0x118)]=new(_0x43f399[_0x32f961(0x116)](require,_0x43f399[_0x32f961(0x164)]))(this[_0x32f961(0x137)],_0x195986,_0x32fe83),this[_0x32f961(0x114)][_0x32f961(0x119)]=![];}helper['isNotUndefined'](this[_0x32f961(0x127)][_0x32f961(0x147)])&&(this[_0x32f961(0x114)][_0x32f961(0x10a)]=this[_0x32f961(0x127)][_0x32f961(0x147)]);}if(testhubUtils[_0x32f961(0x140)]()){const _0xbbd4de=new ObservabilityReporter();_0xbbd4de[_0x32f961(0x170)]();}this['global'][_0x32f961(0x167)]={},this[_0x32f961(0x127)]=_0x34e256[_0x32f961(0x13f)],this[_0x32f961(0x127)]['framework']=constants[_0x32f961(0x14b)][_0x32f961(0x171)];if(_seleniumWebdriver2){const _0x37b9c4=_0x43f399[_0x32f961(0x14d)]['split']('|');let _0x4dd817=0x0;while(!![]){switch(_0x37b9c4[_0x4dd817++]){case'0':this[_0x32f961(0x114)][_0x32f961(0x104)]=(_0x34e256[_0x32f961(0x162)]?_0x34e256[_0x32f961(0x162)][_0x32f961(0x104)]:_0x34e256[_0x32f961(0x104)])||0x0;continue;case'1':this[_0x32f961(0x114)]['percy']=helper[_0x32f961(0x125)](_0x34e256,[_0x43f399[_0x32f961(0x11b)],_0x43f399[_0x32f961(0x12b)],_0x43f399['JvasM']]);continue;case'2':this[_0x32f961(0x114)][_0x32f961(0x10d)]=[];continue;case'3':this[_0x32f961(0x114)][_0x32f961(0x16b)]=async()=>{const _0x4083ba=_0x32f961;await this[_0x4083ba(0x114)]['driver'][_0x4083ba(0x122)](_0x43f399['UMXWA']);};continue;case'4':this[_0x32f961(0x114)]['__skipSessionStatus']=helper['isTrue'](this['configuration'][_0x32f961(0x169)]);continue;case'5':helper[_0x32f961(0x16a)](this[_0x32f961(0x127)]['skipSessionName'])?this['global'][_0x32f961(0x130)]=!![]:this[_0x32f961(0x114)][_0x32f961(0x130)]=![];continue;case'6':this[_0x32f961(0x114)][_0x32f961(0x135)]=helper[_0x32f961(0x125)](_0x34e256,[_0x43f399['GVROb'],_0x43f399[_0x32f961(0x12b)],_0x43f399['dJeXp']]);continue;case'7':this[_0x32f961(0x114)][_0x32f961(0x13a)]=_0x43f399[_0x32f961(0x116)](require,_0x43f399[_0x32f961(0x121)])[_0x32f961(0x16c)]({...this['configuration'],'capability':this['capability']||{}},this,testhubUtils['shouldProcessEventForTesthub']());continue;case'8':this[_0x32f961(0x114)][_0x32f961(0x109)]=helper[_0x32f961(0x125)](this[_0x32f961(0x127)],[_0x43f399[_0x32f961(0x146)],this[_0x32f961(0x114)]['browserstackPlatformIndex']])||{};continue;case'9':this[_0x32f961(0x114)][_0x32f961(0x165)]=helper['nestedKeyValue'](_0x34e256,[_0x43f399[_0x32f961(0x11b)],_0x43f399[_0x32f961(0x12b)],_0x43f399[_0x32f961(0x154)]]);continue;}break;}}}async[a18_0x275019(0x113)](){const _0x209d0d=a18_0x275019;_seleniumWebdriver2&&(await helper[_0x209d0d(0x150)](this[_0x209d0d(0x114)]['__driversArray']),this[_0x209d0d(0x114)][_0x209d0d(0x13a)]['Builder']=originalBuilder),await RequestQueueHandler[_0x209d0d(0x134)]()['shutdown']();}async['setup'](){}async[a18_0x275019(0x156)](_0x4a15eb,_0x24a56e){const _0x3ee3fb=a18_0x275019,_0x578257={};_0x578257['aDuFE']=function(_0x14703b,_0x26e6b1){return _0x14703b===_0x26e6b1;},_0x578257[_0x3ee3fb(0x166)]=_0x3ee3fb(0x15c),_0x578257['owAgK']=function(_0xa35666,_0x237c4f){return _0xa35666===_0x237c4f;},_0x578257[_0x3ee3fb(0x14f)]='skip',_0x578257['XDfVN']=function(_0x313e83,_0xa15be2){return _0x313e83===_0xa15be2;},_0x578257['Vpaic']=_0x3ee3fb(0x139),_0x578257[_0x3ee3fb(0x149)]=_0x3ee3fb(0x148),_0x578257[_0x3ee3fb(0x143)]=function(_0x7e6d8a,_0xedc323){return _0x7e6d8a===_0xedc323;},_0x578257['JcuHN']=function(_0x18acc4,_0x51ac19){return _0x18acc4===_0x51ac19;},_0x578257[_0x3ee3fb(0x12e)]=_0x3ee3fb(0x14a),_0x578257[_0x3ee3fb(0x131)]=_0x3ee3fb(0x113);const _0x1787e1=_0x578257,{name:_0x4a411d}=_0x4a15eb;if(_0x1787e1[_0x3ee3fb(0x108)](_0x4a411d,_0x1787e1['hYnCy'])){this[_0x3ee3fb(0x114)][_0x3ee3fb(0x14e)]=_0x4a15eb[_0x3ee3fb(0x145)];if(_0x1787e1[_0x3ee3fb(0x110)](this[_0x3ee3fb(0x114)]['failFastActive'],!![])){const _0x551cea=_0x4a15eb[_0x3ee3fb(0x145)][_0x3ee3fb(0x132)];logger[_0x3ee3fb(0x144)]('Fail-fast\x20is\x20active,\x20skipping\x20test::\x20'+_0x551cea),_0x4a15eb['test']['mode']=_0x1787e1['xBBeA'];}}if(this[_0x3ee3fb(0x118)]&&_0x1787e1[_0x3ee3fb(0x133)](_0x4a411d,_0x1787e1[_0x3ee3fb(0x161)]))try{const _0xbc8f94=_0x4a15eb[_0x3ee3fb(0x145)][_0x3ee3fb(0x15b)][_0x3ee3fb(0x13b)](_0x1787e1[_0x3ee3fb(0x149)]),_0x19cce5=_0x4a15eb[_0x3ee3fb(0x145)][_0x3ee3fb(0x10b)];await this[_0x3ee3fb(0x118)][_0x3ee3fb(0x138)](_0xbc8f94,_0x19cce5);const _0x30da97=await this[_0x3ee3fb(0x118)][_0x3ee3fb(0x124)]();_0x1787e1['KXHei'](this[_0x3ee3fb(0x114)][_0x3ee3fb(0x119)],![])&&_0x1787e1[_0x3ee3fb(0x159)](_0x30da97,!![])&&(this[_0x3ee3fb(0x114)][_0x3ee3fb(0x119)]=!![]);}catch(_0x5cdcb7){logger[_0x3ee3fb(0x168)](_0x1787e1[_0x3ee3fb(0x12e)],_0x5cdcb7[_0x3ee3fb(0x123)]);}_0x1787e1[_0x3ee3fb(0x110)](_0x4a411d,_0x1787e1[_0x3ee3fb(0x131)])&&(this[_0x3ee3fb(0x118)]&&this[_0x3ee3fb(0x118)][_0x3ee3fb(0x16b)]());}}module['exports']=CustomEnvironment;