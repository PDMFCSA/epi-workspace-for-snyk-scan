function a16_0x6a27(_0x1b2b92,_0x5e0001){const _0x150ba6=a16_0x150b();return a16_0x6a27=function(_0x6a27a8,_0xc66e7f){_0x6a27a8=_0x6a27a8-0xea;let _0xe5964f=_0x150ba6[_0x6a27a8];return _0xe5964f;},a16_0x6a27(_0x1b2b92,_0x5e0001);}const a16_0x1bc5ee=a16_0x6a27;(function(_0x349094,_0x5ee977){const _0x476ad3=a16_0x6a27,_0x3f0509=_0x349094();while(!![]){try{const _0x29d46b=-parseInt(_0x476ad3(0x107))/0x1*(-parseInt(_0x476ad3(0x150))/0x2)+-parseInt(_0x476ad3(0xed))/0x3+-parseInt(_0x476ad3(0x117))/0x4+-parseInt(_0x476ad3(0x124))/0x5*(-parseInt(_0x476ad3(0x154))/0x6)+-parseInt(_0x476ad3(0x15b))/0x7+parseInt(_0x476ad3(0xf7))/0x8*(-parseInt(_0x476ad3(0xfc))/0x9)+-parseInt(_0x476ad3(0x13b))/0xa*(-parseInt(_0x476ad3(0xff))/0xb);if(_0x29d46b===_0x5ee977)break;else _0x3f0509['push'](_0x3f0509['shift']());}catch(_0x3eed1c){_0x3f0509['push'](_0x3f0509['shift']());}}}(a16_0x150b,0xf2659));const helper=require('../../../helpers/helper'),constants=require(a16_0x1bc5ee(0xf2)),{isTestObservabilitySession}=require(a16_0x1bc5ee(0x159)),RequestQueueHandler=require(a16_0x1bc5ee(0xf0)),ObservabilityReporter=require(a16_0x1bc5ee(0x110)),testhubUtils=require(a16_0x1bc5ee(0x12c)),logger=require('../../../helpers/logger')[a16_0x1bc5ee(0xec)],getTestEnvironment=((()=>{const _0x1eafce=a16_0x1bc5ee,_0x21cc43={};_0x21cc43['ZAVen']=_0x1eafce(0x114),_0x21cc43['dhfCK']=_0x1eafce(0x132);const _0x2d979d=_0x21cc43;try{const _0x147acd=helper[_0x1eafce(0xfb)](_0x2d979d[_0x1eafce(0x138)]);if(_0x147acd[_0x1eafce(0x15c)])return _0x147acd['resolveTestEnvironment'];const _0x1ac392=helper[_0x1eafce(0xfb)](_0x2d979d['dhfCK']);if(_0x1ac392['getTestEnvironment'])return _0x1ac392[_0x1eafce(0x151)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x122769=a16_0x1bc5ee,_0x48e870={'GFHCD':function(_0x5ae126,_0x26a054){return _0x5ae126(_0x26a054);},'RrSsd':_0x122769(0x14b),'shykK':function(_0x747f67,_0x14024c){return _0x747f67(_0x14024c);},'YoQVG':_0x122769(0xf3)},_0x4e2447=_0x48e870[_0x122769(0x12d)](getTestEnvironment,{'rootDir':process[_0x122769(0x126)](),'testEnvironment':process[_0x122769(0x118)][_0x122769(0x155)]||_0x48e870[_0x122769(0x108)]});if(!_0x4e2447)return _0x48e870[_0x122769(0x160)](_interopRequireDefault,helper[_0x122769(0xfb)](_0x48e870[_0x122769(0x12e)]));return _0x48e870['GFHCD'](_interopRequireDefault,helper[_0x122769(0xfb)](_0x4e2447));})()),_seleniumWebdriver2=((()=>{const _0x3a3dde=a16_0x1bc5ee,_0x4ee15f={'ZxLKu':function(_0x10e57e,_0x2423d8){return _0x10e57e(_0x2423d8);}};try{const _0x1c8fd4=helper[_0x3a3dde(0x11b)]();return helper[_0x3a3dde(0xeb)](),_0x4ee15f[_0x3a3dde(0x112)](_interopRequireDefault,_0x1c8fd4);}catch{return null;}})());function _interopRequireDefault(_0x28ba2f){return _0x28ba2f&&_0x28ba2f['__esModule']?_0x28ba2f:{'default':_0x28ba2f};}function a16_0x150b(){const _0x25b74d=['failFast','setup','name','oRMth','ZAVen','errors','shouldProcessEventForTesthub','170IMRode','buildName','__skipSessionStatus','__timeout','retries__','browserstackPlatformIndex','xlkGb','debug','skip','browserStackPercyOptions','skipSessionStatus','browserstackPercyBestPlatform','__platformCaps','onTestDone','Cshjb','\x20>\x20','node','info','7|4|0|5|6|3|1|2','AzEHj','failFastOptions','1309902PUaFvc','getTestEnvironment','__drivers','eCaxS','1028964NJvtHo','BSTACK_JEST_TEST_ENV','NrasP','timeout__','testPath','../../../helpers/test-observability/utils','skipSessionName','2593080YgkgzW','resolveTestEnvironment','sessionNameProvided','teardown','builder','shykK','mode','capability','modifyCommand','winstonLogger','5712147psRzdQ','Vfsuv','Builder','../../../helpers/test-observability/requestQueueHandler','capabilities','../../utils/constants','jest-environment-node','jestConfig','__jestRetries','isArray','22984eOsLpe','saWIO','percy','driver','requireModule','3699UXgNLD','configuration','BSTACK_DELTA','2058683xDzpks','Error\x20in\x20fail-fast\x20test_done\x20handler:','test_done','isBrowserstackInfra','nCPOv','getInstance','testEnvironmentOptions','WmVpe','1RULNyR','RrSsd','global','hWWhM','../../../index','bhOpp','fqagh','shutdown','framework','../test-observability/obsReporter','default','ZxLKu','__driversArray','jest-resolve','eYfGY','CTJVM','5099348PgwswG','env','ZMrKb','nestedKeyValue','requireSeleniumWebdriver','__webdriver','shouldFailFast','projectConfig','htoxH','test','cleanup','registerListeners','platformCaps','55nmugya','split','cwd','handleTestEvent','FRAMEWORKS','wTfbP','quit','projectName','../../../helpers/testhub/utils','GFHCD','YoQVG','WFtsz','../../../helpers/test-orchestration/failfastManager','failFastActive','jest-config','isTrue'];a16_0x150b=function(){return _0x25b74d;};return a16_0x150b();}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0x1bc5ee(0x111)][a16_0x1bc5ee(0xef)]:null;class CustomEnvironment extends _jestUserEnvironment[a16_0x1bc5ee(0x111)]{constructor(_0x390de9){const _0x5ecec8=a16_0x1bc5ee,_0x1bf69c={'eCaxS':_0x5ecec8(0x12a),'Cshjb':function(_0x2fa5d7,_0x4b1d25){return _0x2fa5d7+_0x4b1d25;},'bhOpp':'bstack:options','xlkGb':function(_0x257d87,_0x5b4adc){return _0x257d87(_0x5b4adc);},'Vfsuv':_0x5ecec8(0x130),'eYfGY':_0x5ecec8(0x14d),'oRMth':'testEnvironmentOptions','htoxH':_0x5ecec8(0x144),'POkUf':'browserstackPercyBestPlatform','WmVpe':_0x5ecec8(0x10b),'CTJVM':'percy','ZMrKb':'percyCaptureMode'};super(_0x390de9),this[_0x5ecec8(0x109)][_0x5ecec8(0x13e)]=0x0,this[_0x5ecec8(0xfd)]={};!_0x390de9[_0x5ecec8(0x105)]&&(_0x390de9[_0x5ecec8(0x105)]={});if(helper[_0x5ecec8(0x102)]()){_0x390de9['testEnvironmentOptions']=_0x390de9[_0x5ecec8(0x11e)]?_0x390de9['projectConfig']['testEnvironmentOptions']:_0x390de9['testEnvironmentOptions'];_seleniumWebdriver2&&(this[_0x5ecec8(0x15f)]=new _seleniumWebdriver2['default'][(_0x5ecec8(0xef))]());this[_0x5ecec8(0xea)]=_0x390de9[_0x5ecec8(0x11e)]?_0x390de9[_0x5ecec8(0x11e)][_0x5ecec8(0xea)]:_0x390de9[_0x5ecec8(0xea)],this[_0x5ecec8(0x109)][_0x5ecec8(0x13e)]=_0x1bf69c[_0x5ecec8(0x149)](_0x390de9[_0x5ecec8(0x105)][_0x5ecec8(0x157)]||0x1388,constants[_0x5ecec8(0xfe)]),this[_0x5ecec8(0x14f)]=_0x390de9[_0x5ecec8(0x105)][_0x5ecec8(0x134)];if(this[_0x5ecec8(0x14f)]){const _0x4d6d62=this[_0x5ecec8(0xea)][_0x1bf69c['bhOpp']]?.[_0x5ecec8(0x13c)]||'',_0x5bf1de=this['capability'][_0x1bf69c[_0x5ecec8(0x10c)]]?.[_0x5ecec8(0x12b)]||'';this[_0x5ecec8(0x134)]=new(_0x1bf69c['xlkGb'](require,_0x1bf69c[_0x5ecec8(0xee)]))(this['failFastOptions'],_0x4d6d62,_0x5bf1de),this[_0x5ecec8(0x109)][_0x5ecec8(0x131)]=![];}helper['isNotUndefined'](_0x390de9[_0x5ecec8(0x105)][_0x5ecec8(0x13f)])&&(this[_0x5ecec8(0x109)][_0x5ecec8(0xf5)]=_0x390de9[_0x5ecec8(0x105)][_0x5ecec8(0x13f)]);}if(testhubUtils[_0x5ecec8(0x13a)]()){const _0x43f0cc=new ObservabilityReporter();_0x43f0cc[_0x5ecec8(0x122)]();}this[_0x5ecec8(0x109)]['browserStackGlobals']={},this[_0x5ecec8(0xfd)]=_0x390de9['testEnvironmentOptions'],this['configuration'][_0x5ecec8(0x10f)]=constants[_0x5ecec8(0x128)]['JEST'],this[_0x5ecec8(0x109)][_0x5ecec8(0x140)]=(_0x390de9[_0x5ecec8(0x11e)]?_0x390de9['projectConfig'][_0x5ecec8(0x140)]:_0x390de9[_0x5ecec8(0x140)])||0x0,this[_0x5ecec8(0x109)][_0x5ecec8(0x147)]=this[_0x5ecec8(0xfd)]&&this[_0x5ecec8(0xfd)][_0x5ecec8(0x123)]&&Array['isArray'](this[_0x5ecec8(0xfd)][_0x5ecec8(0x123)])&&this[_0x5ecec8(0xfd)][_0x5ecec8(0x123)][this[_0x5ecec8(0x109)][_0x5ecec8(0x140)]]||{};const _0x45e1a8=this['global']['browserstackPlatformIndex'],_0x5cf0d5={...this[_0x5ecec8(0xfd)],'capability':this[_0x5ecec8(0xfd)][_0x5ecec8(0xf1)]&&Array[_0x5ecec8(0xf6)](this[_0x5ecec8(0xfd)]['capabilities'])&&this['configuration']['capabilities'][_0x45e1a8]||{},'platformCaps':this[_0x5ecec8(0xfd)][_0x5ecec8(0x123)]&&Array['isArray'](this[_0x5ecec8(0xfd)][_0x5ecec8(0x123)])&&this[_0x5ecec8(0xfd)][_0x5ecec8(0x123)][_0x45e1a8]||{}};delete _0x5cf0d5[_0x5ecec8(0xf1)],this[_0x5ecec8(0x109)][_0x5ecec8(0xf4)]=_0x5cf0d5;if(_seleniumWebdriver2){const _0x23f4a7=_0x1bf69c[_0x5ecec8(0x115)][_0x5ecec8(0x125)]('|');let _0x10d7b6=0x0;while(!![]){switch(_0x23f4a7[_0x10d7b6++]){case'0':this['global'][_0x5ecec8(0x146)]=helper['nestedKeyValue'](_0x390de9,[_0x1bf69c[_0x5ecec8(0x137)],_0x1bf69c[_0x5ecec8(0x11f)],_0x1bf69c['POkUf']]);continue;case'1':this['global'][_0x5ecec8(0x13d)]=helper[_0x5ecec8(0x133)](this[_0x5ecec8(0xfd)][_0x5ecec8(0x145)]);continue;case'2':this[_0x5ecec8(0x109)][_0x5ecec8(0x121)]=async()=>{const _0x49b79b=_0x5ecec8;await this['global'][_0x49b79b(0xfa)][_0x49b79b(0x12a)](_0x1bf69c[_0x49b79b(0x153)]);};continue;case'3':helper[_0x5ecec8(0x133)](this[_0x5ecec8(0xfd)][_0x5ecec8(0x15a)])?this[_0x5ecec8(0x109)][_0x5ecec8(0x15d)]=!![]:this[_0x5ecec8(0x109)]['sessionNameProvided']=![];continue;case'4':this[_0x5ecec8(0x109)][_0x5ecec8(0x11c)]=_0x1bf69c[_0x5ecec8(0x141)](require,_0x1bf69c[_0x5ecec8(0x106)])['browserstackAgentV2']({...this[_0x5ecec8(0xfd)],'capability':this[_0x5ecec8(0xea)]||{}},this,testhubUtils[_0x5ecec8(0x13a)]());continue;case'5':this['global'][_0x5ecec8(0xf9)]=helper[_0x5ecec8(0x11a)](_0x390de9,[_0x1bf69c[_0x5ecec8(0x137)],_0x1bf69c[_0x5ecec8(0x11f)],_0x1bf69c[_0x5ecec8(0x116)]]);continue;case'6':this[_0x5ecec8(0x109)]['percyCaptureMode']=helper[_0x5ecec8(0x11a)](_0x390de9,[_0x1bf69c[_0x5ecec8(0x137)],_0x1bf69c[_0x5ecec8(0x11f)],_0x1bf69c[_0x5ecec8(0x119)]]);continue;case'7':this[_0x5ecec8(0x109)][_0x5ecec8(0x152)]=[];continue;}break;}}}async[a16_0x1bc5ee(0x15e)](){const _0x3f6021=a16_0x1bc5ee;_seleniumWebdriver2&&(await helper['cleanupDrivers'](this[_0x3f6021(0x109)][_0x3f6021(0x113)]),this['global'][_0x3f6021(0x11c)][_0x3f6021(0xef)]=originalBuilder),await RequestQueueHandler[_0x3f6021(0x104)]()[_0x3f6021(0x10e)]();}async[a16_0x1bc5ee(0x135)](){}async[a16_0x1bc5ee(0x127)](_0x2a6769,_0x314895){const _0x4bea03=a16_0x1bc5ee,_0x272b1d={};_0x272b1d[_0x4bea03(0x10a)]=function(_0x5eaa06,_0x1a1b42){return _0x5eaa06===_0x1a1b42;},_0x272b1d[_0x4bea03(0x10d)]='test_start',_0x272b1d[_0x4bea03(0x14e)]=_0x4bea03(0x143),_0x272b1d['NrasP']=function(_0x4af10b,_0x15236f){return _0x4af10b===_0x15236f;},_0x272b1d[_0x4bea03(0x129)]=_0x4bea03(0x101),_0x272b1d[_0x4bea03(0x103)]=_0x4bea03(0x14a),_0x272b1d[_0x4bea03(0xf8)]=_0x4bea03(0x100),_0x272b1d[_0x4bea03(0x12f)]=_0x4bea03(0x15e);const _0x49c07b=_0x272b1d,{name:_0x27b7a8}=_0x2a6769;if(_0x49c07b[_0x4bea03(0x10a)](_0x27b7a8,_0x49c07b[_0x4bea03(0x10d)])){this[_0x4bea03(0x109)]['testContext']=_0x2a6769[_0x4bea03(0x120)];if(_0x49c07b['hWWhM'](this[_0x4bea03(0x109)]['failFastActive'],!![])){const _0x65cd9c=_0x2a6769['test'][_0x4bea03(0x136)];logger[_0x4bea03(0x14c)]('Fail-fast\x20is\x20active,\x20skipping\x20test::\x20'+_0x65cd9c),_0x2a6769[_0x4bea03(0x120)][_0x4bea03(0x161)]=_0x49c07b[_0x4bea03(0x14e)];}}if(this['failFast']&&_0x49c07b[_0x4bea03(0x156)](_0x27b7a8,_0x49c07b[_0x4bea03(0x129)]))try{const _0x4a7072=_0x2a6769['test'][_0x4bea03(0x158)]['join'](_0x49c07b['nCPOv']),_0x2626e3=_0x2a6769[_0x4bea03(0x120)][_0x4bea03(0x139)];await this[_0x4bea03(0x134)][_0x4bea03(0x148)](_0x4a7072,_0x2626e3);const _0x4f8b89=await this['failFast'][_0x4bea03(0x11d)]();_0x49c07b[_0x4bea03(0x156)](this[_0x4bea03(0x109)]['failFastActive'],![])&&_0x49c07b[_0x4bea03(0x10a)](_0x4f8b89,!![])&&(this['global'][_0x4bea03(0x131)]=!![]);}catch(_0xddbf8){logger[_0x4bea03(0x142)](_0x49c07b[_0x4bea03(0xf8)],_0xddbf8['message']);}_0x49c07b[_0x4bea03(0x156)](_0x27b7a8,_0x49c07b[_0x4bea03(0x12f)])&&(this[_0x4bea03(0x134)]&&this['failFast']['cleanup']());}}module['exports']=CustomEnvironment;