const a16_0xba58cc=a16_0x373c;function a16_0x1b31(){const _0x3a5512=['failFastOptions','getTestEnvironment','retries__','jest-resolve','FRAMEWORKS','__jestRetries','CjaRQ','__esModule','__platformCaps','nestedKeyValue','browserstackPlatformIndex','browserStackGlobals','modifyCommand','Error\x20in\x20fail-fast\x20test_done\x20handler:','split','../../../helpers/helper','EwzYL','iDVmd','uhMGQ','exports','__driversArray','testPath','78230UxWECE','isTrue','494791iNcCor','7|2|5|6|1|3|0|4','MGObx','platformCaps','cwd','global','shouldProcessEventForTesthub','../../../index','GnHAV','../../../helpers/test-observability/requestQueueHandler','mode','name','errors','percy','failFast','Builder','shouldFailFast','projectConfig','Kjwjq','BSTACK_DELTA','testEnvironmentOptions','10837mVNzJx','irwys','ZNNXG','xFURC','teardown','jest-config','775832PKZqKB','configuration','GIvCV','__skipSessionStatus','KmZLs','yVuaE','requireModule','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','capability','266dNvcrt','JEST','percyCaptureMode','jestConfig','4XzJnuF','timeout__','browserstackPercyBestPlatform','cqexD','../../utils/constants','xLtiV','buildName','rQZuG','__drivers','test','60lcQQlC','uXTaj','81712mnHxHE','test_done','shutdown','join','skip','sessionNameProvided','setup','111235MDEgFO','__webdriver','hwshv','driver','requireSeleniumWebdriver','failFastActive','onTestDone','builder','framework','XvPXD','225OTIFLx','resolveTestEnvironment','capabilities','../../../helpers/test-observability/utils','winstonLogger','registerListeners','projectName','node','quit','cleanup','isArray','test_start','skipSessionName','dBiiA','mtemu','default','rrWhW','info','hAApY','KiHaj','__timeout','VBaTf','message','1255128EZchQu'];a16_0x1b31=function(){return _0x3a5512;};return a16_0x1b31();}(function(_0x42bd5c,_0x555fb6){const _0x531776=a16_0x373c,_0x2d9f53=_0x42bd5c();while(!![]){try{const _0x1c71b2=-parseInt(_0x531776(0x20d))/0x1*(parseInt(_0x531776(0x1ab))/0x2)+-parseInt(_0x531776(0x1df))/0x3+-parseInt(_0x531776(0x213))/0x4+parseInt(_0x531776(0x1be))/0x5*(parseInt(_0x531776(0x1b5))/0x6)+parseInt(_0x531776(0x21c))/0x7*(parseInt(_0x531776(0x1b7))/0x8)+parseInt(_0x531776(0x1c8))/0x9*(parseInt(_0x531776(0x1f6))/0xa)+parseInt(_0x531776(0x1f8))/0xb;if(_0x1c71b2===_0x555fb6)break;else _0x2d9f53['push'](_0x2d9f53['shift']());}catch(_0x3b8c75){_0x2d9f53['push'](_0x2d9f53['shift']());}}}(a16_0x1b31,0x3503e));const helper=require(a16_0xba58cc(0x1ef)),constants=require(a16_0xba58cc(0x1af)),{isTestObservabilitySession}=require(a16_0xba58cc(0x1cb)),RequestQueueHandler=require(a16_0xba58cc(0x201)),ObservabilityReporter=require('../test-observability/obsReporter'),testhubUtils=require('../../../helpers/testhub/utils'),logger=require('../../../helpers/logger')[a16_0xba58cc(0x1cc)],getTestEnvironment=((()=>{const _0x234af2=a16_0xba58cc,_0xf2ebff={};_0xf2ebff['ExBZO']=_0x234af2(0x1e3),_0xf2ebff['GnHAV']=_0x234af2(0x212);const _0x4d32eb=_0xf2ebff;try{const _0x19da32=helper[_0x234af2(0x219)](_0x4d32eb['ExBZO']);if(_0x19da32[_0x234af2(0x1c9)])return _0x19da32[_0x234af2(0x1c9)];const _0x359403=helper[_0x234af2(0x219)](_0x4d32eb[_0x234af2(0x200)]);if(_0x359403[_0x234af2(0x1e1)])return _0x359403[_0x234af2(0x1e1)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x1e664c=a16_0xba58cc,_0x13ff72={'hwshv':function(_0x886d26,_0xfbcafa){return _0x886d26(_0xfbcafa);},'LAfcw':_0x1e664c(0x1cf),'CCMwM':'jest-environment-node','hAApY':function(_0x15c66e,_0x550974){return _0x15c66e(_0x550974);}},_0x44d1b0=_0x13ff72[_0x1e664c(0x1c0)](getTestEnvironment,{'rootDir':process[_0x1e664c(0x1fc)](),'testEnvironment':process['env']['BSTACK_JEST_TEST_ENV']||_0x13ff72['LAfcw']});if(!_0x44d1b0)return _0x13ff72[_0x1e664c(0x1c0)](_interopRequireDefault,helper[_0x1e664c(0x219)](_0x13ff72['CCMwM']));return _0x13ff72[_0x1e664c(0x1da)](_interopRequireDefault,helper[_0x1e664c(0x219)](_0x44d1b0));})()),_seleniumWebdriver2=((()=>{const _0x3302c4=a16_0xba58cc,_0x504bb7={'dBiiA':function(_0x11bbbd,_0x1b740a){return _0x11bbbd(_0x1b740a);}};try{const _0x3fb53d=helper[_0x3302c4(0x1c2)]();return helper[_0x3302c4(0x1ec)](),_0x504bb7[_0x3302c4(0x1d5)](_interopRequireDefault,_0x3fb53d);}catch{return null;}})());function _interopRequireDefault(_0x323333){const _0x46ab2f=a16_0xba58cc;return _0x323333&&_0x323333[_0x46ab2f(0x1e7)]?_0x323333:{'default':_0x323333};}function a16_0x373c(_0x1518a9,_0x13a225){const _0x1b3171=a16_0x1b31();return a16_0x373c=function(_0x373c9f,_0x42ae03){_0x373c9f=_0x373c9f-0x1aa;let _0x3ef2dd=_0x1b3171[_0x373c9f];return _0x3ef2dd;},a16_0x373c(_0x1518a9,_0x13a225);}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0xba58cc(0x1d7)][a16_0xba58cc(0x207)]:null;class CustomEnvironment extends _jestUserEnvironment['default']{constructor(_0x268cf6){const _0x378f53=a16_0xba58cc,_0x1786bd={'cqexD':_0x378f53(0x1d0),'KmZLs':function(_0x54c4c2,_0x2fe090){return _0x54c4c2+_0x2fe090;},'rQZuG':'bstack:options','VBaTf':function(_0x16cd10,_0x59d87c){return _0x16cd10(_0x59d87c);},'KiHaj':'../../../helpers/test-orchestration/failfastManager','xLtiV':_0x378f53(0x1f9),'rrWhW':_0x378f53(0x20c),'Kjwjq':'browserStackPercyOptions','MGObx':'percyCaptureMode','CjaRQ':_0x378f53(0x1ff),'ZNNXG':_0x378f53(0x1ad),'iDVmd':_0x378f53(0x205)};super(_0x268cf6),this[_0x378f53(0x1fd)][_0x378f53(0x1dc)]=0x0,this['configuration']={};!_0x268cf6[_0x378f53(0x20c)]&&(_0x268cf6['testEnvironmentOptions']={});if(helper['isBrowserstackInfra']()){_0x268cf6['testEnvironmentOptions']=_0x268cf6[_0x378f53(0x209)]?_0x268cf6[_0x378f53(0x209)][_0x378f53(0x20c)]:_0x268cf6[_0x378f53(0x20c)];_seleniumWebdriver2&&(this[_0x378f53(0x1c5)]=new _seleniumWebdriver2[(_0x378f53(0x1d7))][(_0x378f53(0x207))]());this[_0x378f53(0x21b)]=_0x268cf6[_0x378f53(0x209)]?_0x268cf6['projectConfig']['capability']:_0x268cf6[_0x378f53(0x21b)],this[_0x378f53(0x1fd)][_0x378f53(0x1dc)]=_0x1786bd[_0x378f53(0x217)](_0x268cf6[_0x378f53(0x20c)][_0x378f53(0x1ac)]||0x1388,constants[_0x378f53(0x20b)]),this[_0x378f53(0x1e0)]=_0x268cf6[_0x378f53(0x20c)][_0x378f53(0x206)];if(this[_0x378f53(0x1e0)]){const _0x11aa3e=this[_0x378f53(0x21b)][_0x1786bd[_0x378f53(0x1b2)]]?.[_0x378f53(0x1b1)]||'',_0x222de4=this[_0x378f53(0x21b)][_0x1786bd['rQZuG']]?.[_0x378f53(0x1ce)]||'';this[_0x378f53(0x206)]=new(_0x1786bd[_0x378f53(0x1dd)](require,_0x1786bd[_0x378f53(0x1db)]))(this[_0x378f53(0x1e0)],_0x11aa3e,_0x222de4),this[_0x378f53(0x1fd)][_0x378f53(0x1c3)]=![];}helper['isNotUndefined'](_0x268cf6[_0x378f53(0x20c)][_0x378f53(0x1e2)])&&(this[_0x378f53(0x1fd)][_0x378f53(0x1e5)]=_0x268cf6[_0x378f53(0x20c)][_0x378f53(0x1e2)]);}if(testhubUtils[_0x378f53(0x1fe)]()){const _0x2fc879=new ObservabilityReporter();_0x2fc879[_0x378f53(0x1cd)]();}this[_0x378f53(0x1fd)][_0x378f53(0x1eb)]={},this[_0x378f53(0x214)]=_0x268cf6[_0x378f53(0x20c)],this['configuration'][_0x378f53(0x1c6)]=constants[_0x378f53(0x1e4)][_0x378f53(0x21d)],this[_0x378f53(0x1fd)][_0x378f53(0x1ea)]=(_0x268cf6[_0x378f53(0x209)]?_0x268cf6['projectConfig'][_0x378f53(0x1ea)]:_0x268cf6[_0x378f53(0x1ea)])||0x0,this['global'][_0x378f53(0x1e8)]=this[_0x378f53(0x214)]&&this[_0x378f53(0x214)]['platformCaps']&&Array[_0x378f53(0x1d2)](this[_0x378f53(0x214)][_0x378f53(0x1fb)])&&this[_0x378f53(0x214)]['platformCaps'][this[_0x378f53(0x1fd)]['browserstackPlatformIndex']]||{};const _0x1228a7=this[_0x378f53(0x1fd)]['browserstackPlatformIndex'],_0x18cdee={...this[_0x378f53(0x214)],'capability':this['configuration'][_0x378f53(0x1ca)]&&Array[_0x378f53(0x1d2)](this[_0x378f53(0x214)]['capabilities'])&&this[_0x378f53(0x214)]['capabilities'][_0x1228a7]||{},'platformCaps':this['configuration']['platformCaps']&&Array[_0x378f53(0x1d2)](this[_0x378f53(0x214)]['platformCaps'])&&this[_0x378f53(0x214)]['platformCaps'][_0x1228a7]||{}};delete _0x18cdee[_0x378f53(0x1ca)],this[_0x378f53(0x1fd)][_0x378f53(0x1aa)]=_0x18cdee;if(_seleniumWebdriver2){const _0x492cc7=_0x1786bd[_0x378f53(0x1b0)][_0x378f53(0x1ee)]('|');let _0x275e5f=0x0;while(!![]){switch(_0x492cc7[_0x275e5f++]){case'0':this[_0x378f53(0x1fd)][_0x378f53(0x216)]=helper['isTrue'](this[_0x378f53(0x214)]['skipSessionStatus']);continue;case'1':this[_0x378f53(0x1fd)][_0x378f53(0x21e)]=helper[_0x378f53(0x1e9)](_0x268cf6,[_0x1786bd[_0x378f53(0x1d8)],_0x1786bd[_0x378f53(0x20a)],_0x1786bd[_0x378f53(0x1fa)]]);continue;case'2':this['global'][_0x378f53(0x1bf)]=_0x1786bd[_0x378f53(0x1dd)](require,_0x1786bd[_0x378f53(0x1e6)])['browserstackAgentV2']({...this['configuration'],'capability':this['capability']||{}},this,testhubUtils[_0x378f53(0x1fe)]());continue;case'3':helper[_0x378f53(0x1f7)](this[_0x378f53(0x214)][_0x378f53(0x1d4)])?this[_0x378f53(0x1fd)][_0x378f53(0x1bc)]=!![]:this[_0x378f53(0x1fd)][_0x378f53(0x1bc)]=![];continue;case'4':this[_0x378f53(0x1fd)][_0x378f53(0x1d1)]=async()=>{const _0x49057a=_0x378f53;await this[_0x49057a(0x1fd)][_0x49057a(0x1c1)][_0x49057a(0x1d0)](_0x1786bd[_0x49057a(0x1ae)]);};continue;case'5':this[_0x378f53(0x1fd)]['browserstackPercyBestPlatform']=helper['nestedKeyValue'](_0x268cf6,[_0x1786bd[_0x378f53(0x1d8)],_0x1786bd['Kjwjq'],_0x1786bd[_0x378f53(0x20f)]]);continue;case'6':this[_0x378f53(0x1fd)][_0x378f53(0x205)]=helper['nestedKeyValue'](_0x268cf6,[_0x1786bd[_0x378f53(0x1d8)],_0x1786bd['Kjwjq'],_0x1786bd[_0x378f53(0x1f1)]]);continue;case'7':this[_0x378f53(0x1fd)][_0x378f53(0x1b3)]=[];continue;}break;}}}async[a16_0xba58cc(0x211)](){const _0x100d0c=a16_0xba58cc;_seleniumWebdriver2&&(await helper['cleanupDrivers'](this[_0x100d0c(0x1fd)][_0x100d0c(0x1f4)]),this[_0x100d0c(0x1fd)][_0x100d0c(0x1bf)]['Builder']=originalBuilder),await RequestQueueHandler['getInstance']()[_0x100d0c(0x1b9)]();}async[a16_0xba58cc(0x1bd)](){}async['handleTestEvent'](_0x36356c,_0x5d8f98){const _0x4333d7=a16_0xba58cc,_0x35999e={};_0x35999e[_0x4333d7(0x218)]=function(_0x2571fa,_0x5b404e){return _0x2571fa===_0x5b404e;},_0x35999e['xFURC']=_0x4333d7(0x1d3),_0x35999e['mtemu']=_0x4333d7(0x1bb),_0x35999e['EwzYL']=function(_0x54c5d0,_0x20c050){return _0x54c5d0===_0x20c050;},_0x35999e[_0x4333d7(0x1f2)]=_0x4333d7(0x1b8),_0x35999e['uXTaj']='\x20>\x20',_0x35999e[_0x4333d7(0x20e)]=function(_0x13e756,_0x1d5338){return _0x13e756===_0x1d5338;},_0x35999e[_0x4333d7(0x1c7)]=_0x4333d7(0x1ed),_0x35999e['GIvCV']=_0x4333d7(0x211);const _0x5473ca=_0x35999e,{name:_0xfec24f}=_0x36356c;if(_0x5473ca[_0x4333d7(0x218)](_0xfec24f,_0x5473ca[_0x4333d7(0x210)])){this[_0x4333d7(0x1fd)]['testContext']=_0x36356c[_0x4333d7(0x1b4)];if(_0x5473ca[_0x4333d7(0x218)](this['global']['failFastActive'],!![])){const _0xe567e9=_0x36356c[_0x4333d7(0x1b4)][_0x4333d7(0x203)];logger[_0x4333d7(0x1d9)](_0x4333d7(0x21a)+_0xe567e9),_0x36356c[_0x4333d7(0x1b4)][_0x4333d7(0x202)]=_0x5473ca[_0x4333d7(0x1d6)];}}if(this[_0x4333d7(0x206)]&&_0x5473ca[_0x4333d7(0x1f0)](_0xfec24f,_0x5473ca[_0x4333d7(0x1f2)]))try{const _0x1f5e1c=_0x36356c['test'][_0x4333d7(0x1f5)][_0x4333d7(0x1ba)](_0x5473ca[_0x4333d7(0x1b6)]),_0x2061da=_0x36356c[_0x4333d7(0x1b4)][_0x4333d7(0x204)];await this[_0x4333d7(0x206)][_0x4333d7(0x1c4)](_0x1f5e1c,_0x2061da);const _0x3153ad=await this['failFast'][_0x4333d7(0x208)]();_0x5473ca[_0x4333d7(0x20e)](this[_0x4333d7(0x1fd)][_0x4333d7(0x1c3)],![])&&_0x5473ca[_0x4333d7(0x218)](_0x3153ad,!![])&&(this[_0x4333d7(0x1fd)][_0x4333d7(0x1c3)]=!![]);}catch(_0x3e09eb){logger['debug'](_0x5473ca[_0x4333d7(0x1c7)],_0x3e09eb[_0x4333d7(0x1de)]);}_0x5473ca[_0x4333d7(0x1f0)](_0xfec24f,_0x5473ca[_0x4333d7(0x215)])&&(this[_0x4333d7(0x206)]&&this[_0x4333d7(0x206)]['cleanup']());}}module[a16_0xba58cc(0x1f3)]=CustomEnvironment;