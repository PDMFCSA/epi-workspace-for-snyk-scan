const a18_0xb53638=a18_0x530d;(function(_0x263cb6,_0x229382){const _0x2f996b=a18_0x530d,_0x183913=_0x263cb6();while(!![]){try{const _0x3383a7=parseInt(_0x2f996b(0x196))/0x1*(-parseInt(_0x2f996b(0x1a2))/0x2)+-parseInt(_0x2f996b(0x1c9))/0x3*(-parseInt(_0x2f996b(0x1a5))/0x4)+-parseInt(_0x2f996b(0x1b7))/0x5*(parseInt(_0x2f996b(0x178))/0x6)+-parseInt(_0x2f996b(0x1b0))/0x7+parseInt(_0x2f996b(0x1e6))/0x8+parseInt(_0x2f996b(0x187))/0x9+parseInt(_0x2f996b(0x184))/0xa;if(_0x3383a7===_0x229382)break;else _0x183913['push'](_0x183913['shift']());}catch(_0x26966f){_0x183913['push'](_0x183913['shift']());}}}(a18_0x3537,0x65a95));function a18_0x530d(_0x144b9b,_0x3413e8){const _0x35379d=a18_0x3537();return a18_0x530d=function(_0x530d80,_0x64ca4e){_0x530d80=_0x530d80-0x172;let _0x368739=_0x35379d[_0x530d80];return _0x368739;},a18_0x530d(_0x144b9b,_0x3413e8);}const helper=require('../../../helpers/helper'),constants=require(a18_0xb53638(0x1c6)),{isTestObservabilitySession}=require('../../../helpers/test-observability/utils'),RequestQueueHandler=require(a18_0xb53638(0x191)),ObservabilityReporter=require(a18_0xb53638(0x1a9)),testhubUtils=require(a18_0xb53638(0x1b6)),logger=require(a18_0xb53638(0x176))[a18_0xb53638(0x172)],getTestEnvironment=((()=>{const _0x114a1f=a18_0xb53638,_0x4722a7={};_0x4722a7[_0x114a1f(0x1d5)]=_0x114a1f(0x180),_0x4722a7[_0x114a1f(0x194)]='jest-config';const _0x2ad13c=_0x4722a7;try{const _0x3ad2c2=helper[_0x114a1f(0x1a4)](_0x2ad13c['ZRpeb']);if(_0x3ad2c2[_0x114a1f(0x182)])return _0x3ad2c2[_0x114a1f(0x182)];const _0x3685df=helper['requireModule'](_0x2ad13c[_0x114a1f(0x194)]);if(_0x3685df[_0x114a1f(0x1d6)])return _0x3685df[_0x114a1f(0x1d6)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x505bd3=a18_0xb53638,_0x559d48={'exAVu':function(_0x54b337,_0x4eb0fa){return _0x54b337(_0x4eb0fa);},'RQBTO':_0x505bd3(0x1b1),'yvWKW':_0x505bd3(0x1b3),'RTful':function(_0x2c81e2,_0x447d25){return _0x2c81e2(_0x447d25);}},_0x3a2211=_0x559d48[_0x505bd3(0x185)](getTestEnvironment,{'rootDir':process[_0x505bd3(0x19d)](),'testEnvironment':process[_0x505bd3(0x186)][_0x505bd3(0x1ce)]||_0x559d48[_0x505bd3(0x1a3)]});if(!_0x3a2211)return _0x559d48[_0x505bd3(0x185)](_interopRequireDefault,helper[_0x505bd3(0x1a4)](_0x559d48[_0x505bd3(0x1c1)]));return _0x559d48[_0x505bd3(0x19f)](_interopRequireDefault,helper[_0x505bd3(0x1a4)](_0x3a2211));})()),_seleniumWebdriver2=((()=>{const _0x4ba7ca=a18_0xb53638,_0x194d42={'Lqgzo':function(_0x4eb96a,_0x231017){return _0x4eb96a(_0x231017);}};try{const _0x5d3c29=helper[_0x4ba7ca(0x1b2)]();return helper[_0x4ba7ca(0x189)](),_0x194d42['Lqgzo'](_interopRequireDefault,_0x5d3c29);}catch{return null;}})());function a18_0x3537(){const _0x4e6885=['5421787ZgHfgp','node','requireSeleniumWebdriver','jest-environment-node','testEnvironmentOptions','caxcq','../../../helpers/testhub/utils','1332130jagqZE','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','__drivers','capability','mrGdk','shouldProcessEventForTesthub','../../../index','__skipSessionStatus','UpkbX','browserstackPlatformIndex','yvWKW','../../../helpers/test-orchestration/failfastManager','platformCaps','__driversArray','cleanupDrivers','../../utils/constants','global','registerListeners','513UbziLl','builder','kWiav','join','isTrue','BSTACK_JEST_TEST_ENV','JuRJh','testPath','GOOlB','browserStackGlobals','handleTestEvent','retries__','ZRpeb','getTestEnvironment','skip','message','isNotUndefined','BOOqN','hEjKp','projectName','OJmQj','hhpli','isBrowserstackInfra','qTFpr','__jestRetries','kjgNX','failFast','percyCaptureMode','failFastOptions','1948048JanMvn','errors','shouldFailFast','nestedKeyValue','OsqMx','winstonLogger','skipSessionName','debug','sessionNameProvided','../../../helpers/logger','opQEE','18vGDDJp','setup','shutdown','rGarX','quit','JEST','browserStackPercyOptions','FRAMEWORKS','jest-resolve','jwVin','resolveTestEnvironment','failFastActive','14053010tRlcMy','exAVu','env','2214684GUwIBr','cleanup','modifyCommand','__esModule','driver','\x20>\x20','projectConfig','__webdriver','browserstackPercyBestPlatform','test','../../../helpers/test-observability/requestQueueHandler','teardown','percy','mHpSs','pEsTU','1nDaKTK','OEkEY','browserstackAgentV2','name','timeout__','zbkUb','hOGbZ','cwd','split','RTful','__platformCaps','bstack:options','260758DHwbYH','RQBTO','requireModule','5280EpPMrG','default','getInstance','1|2|7|0|9|6|8|4|3|5','../test-observability/obsReporter','__timeout','test_done','tMrqg','Builder','testContext','configuration'];a18_0x3537=function(){return _0x4e6885;};return a18_0x3537();}function _interopRequireDefault(_0x3ca873){const _0x35e1e3=a18_0xb53638;return _0x3ca873&&_0x3ca873[_0x35e1e3(0x18a)]?_0x3ca873:{'default':_0x3ca873};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a18_0xb53638(0x1a6)][a18_0xb53638(0x1ad)]:null;class CustomEnvironment extends _jestUserEnvironment['default']{constructor(_0x54d6fb){const _0x1ab882=a18_0xb53638,_0x5912e5={'iCCKZ':_0x1ab882(0x17c),'pEsTU':function(_0x23f1ad,_0x4116df){return _0x23f1ad+_0x4116df;},'rGarX':_0x1ab882(0x1a1),'oTwrU':function(_0xb5f1cf,_0x50ac07){return _0xb5f1cf(_0x50ac07);},'OsqMx':_0x1ab882(0x1c2),'hhpli':_0x1ab882(0x1a8),'jwVin':_0x1ab882(0x1b4),'JuRJh':_0x1ab882(0x17e),'BOOqN':_0x1ab882(0x18f),'hOGbZ':function(_0xe9e67d,_0x29c9d2){return _0xe9e67d(_0x29c9d2);},'DqfmJ':_0x1ab882(0x1bd),'opQEE':_0x1ab882(0x1e4),'kjgNX':_0x1ab882(0x1c3),'zbkUb':'percy'};super(_0x54d6fb),this[_0x1ab882(0x1c7)]['__timeout']=0x0,this[_0x1ab882(0x1af)]={};!_0x54d6fb['testEnvironmentOptions']&&(_0x54d6fb[_0x1ab882(0x1b4)]={});if(helper[_0x1ab882(0x1df)]()){_0x54d6fb[_0x1ab882(0x1b4)]=_0x54d6fb[_0x1ab882(0x18d)]?_0x54d6fb[_0x1ab882(0x18d)]['testEnvironmentOptions']:_0x54d6fb['testEnvironmentOptions'],this[_0x1ab882(0x1ca)]=new _seleniumWebdriver2[(_0x1ab882(0x1a6))][(_0x1ab882(0x1ad))](),this[_0x1ab882(0x1ba)]=_0x54d6fb['projectConfig']?_0x54d6fb['projectConfig'][_0x1ab882(0x1ba)]:_0x54d6fb['capability'],this[_0x1ab882(0x1c7)][_0x1ab882(0x1aa)]=_0x5912e5[_0x1ab882(0x195)](this[_0x1ab882(0x1af)][_0x1ab882(0x19a)],constants['BSTACK_DELTA']),this[_0x1ab882(0x1e5)]=_0x54d6fb[_0x1ab882(0x1b4)][_0x1ab882(0x1e3)];if(this[_0x1ab882(0x1e5)]){const _0x1af436=this[_0x1ab882(0x1ba)][_0x5912e5['rGarX']]?.['buildName']||'',_0x2d7256=this[_0x1ab882(0x1ba)][_0x5912e5[_0x1ab882(0x17b)]]?.[_0x1ab882(0x1dc)]||'';this[_0x1ab882(0x1e3)]=new(_0x5912e5['oTwrU'](require,_0x5912e5[_0x1ab882(0x1ea)]))(this['failFastOptions'],_0x1af436,_0x2d7256),this[_0x1ab882(0x1c7)]['failFastActive']=![];}helper[_0x1ab882(0x1d9)](this[_0x1ab882(0x1af)][_0x1ab882(0x1d4)])&&(this[_0x1ab882(0x1c7)][_0x1ab882(0x1e1)]=this[_0x1ab882(0x1af)][_0x1ab882(0x1d4)]);}if(testhubUtils[_0x1ab882(0x1bc)]()){const _0x5ebf25=new ObservabilityReporter();_0x5ebf25[_0x1ab882(0x1c8)]();}this['global'][_0x1ab882(0x1d2)]={},this[_0x1ab882(0x1af)]=_0x54d6fb[_0x1ab882(0x1b4)],this['configuration']['framework']=constants[_0x1ab882(0x17f)][_0x1ab882(0x17d)];if(_seleniumWebdriver2){const _0x32472b=_0x5912e5[_0x1ab882(0x1de)][_0x1ab882(0x19e)]('|');let _0x5c3e8f=0x0;while(!![]){switch(_0x32472b[_0x5c3e8f++]){case'0':this[_0x1ab882(0x1c7)][_0x1ab882(0x18f)]=helper[_0x1ab882(0x1e9)](_0x54d6fb,[_0x5912e5[_0x1ab882(0x181)],_0x5912e5[_0x1ab882(0x1cf)],_0x5912e5[_0x1ab882(0x1da)]]);continue;case'1':this[_0x1ab882(0x1c7)][_0x1ab882(0x1b9)]=[];continue;case'2':this[_0x1ab882(0x1c7)][_0x1ab882(0x18e)]=_0x5912e5[_0x1ab882(0x19c)](require,_0x5912e5['DqfmJ'])[_0x1ab882(0x198)]({...this['configuration'],'capability':this[_0x1ab882(0x1ba)]||{}},this,testhubUtils[_0x1ab882(0x1bc)]());continue;case'3':this[_0x1ab882(0x1c7)][_0x1ab882(0x1be)]=helper[_0x1ab882(0x1cd)](this['configuration']['skipSessionStatus']);continue;case'4':helper[_0x1ab882(0x1cd)](this['configuration'][_0x1ab882(0x173)])?this[_0x1ab882(0x1c7)][_0x1ab882(0x175)]=!![]:this[_0x1ab882(0x1c7)][_0x1ab882(0x175)]=![];continue;case'5':this[_0x1ab882(0x1c7)][_0x1ab882(0x188)]=async()=>{const _0x24b4ae=_0x1ab882;await this['global'][_0x24b4ae(0x18b)][_0x24b4ae(0x17c)](_0x5912e5['iCCKZ']);};continue;case'6':this[_0x1ab882(0x1c7)][_0x1ab882(0x1e4)]=helper['nestedKeyValue'](_0x54d6fb,[_0x5912e5[_0x1ab882(0x181)],_0x5912e5[_0x1ab882(0x1cf)],_0x5912e5[_0x1ab882(0x177)]]);continue;case'7':this[_0x1ab882(0x1c7)][_0x1ab882(0x1c0)]=(_0x54d6fb['projectConfig']?_0x54d6fb['projectConfig'][_0x1ab882(0x1c0)]:_0x54d6fb[_0x1ab882(0x1c0)])||0x0;continue;case'8':this[_0x1ab882(0x1c7)][_0x1ab882(0x1a0)]=helper[_0x1ab882(0x1e9)](this[_0x1ab882(0x1af)],[_0x5912e5[_0x1ab882(0x1e2)],this[_0x1ab882(0x1c7)][_0x1ab882(0x1c0)]])||{};continue;case'9':this[_0x1ab882(0x1c7)][_0x1ab882(0x193)]=helper[_0x1ab882(0x1e9)](_0x54d6fb,[_0x5912e5[_0x1ab882(0x181)],_0x5912e5[_0x1ab882(0x1cf)],_0x5912e5[_0x1ab882(0x19b)]]);continue;}break;}}}async['teardown'](){const _0x502f1e=a18_0xb53638;_seleniumWebdriver2&&(await helper[_0x502f1e(0x1c5)](this[_0x502f1e(0x1c7)][_0x502f1e(0x1c4)]),this[_0x502f1e(0x1c7)][_0x502f1e(0x18e)][_0x502f1e(0x1ad)]=originalBuilder),await RequestQueueHandler[_0x502f1e(0x1a7)]()[_0x502f1e(0x17a)]();}async[a18_0xb53638(0x179)](){}async[a18_0xb53638(0x1d3)](_0x53b972,_0xe0b5b3){const _0x1e16d9=a18_0xb53638,_0x46ae71={};_0x46ae71[_0x1e16d9(0x1e0)]=function(_0x5308fc,_0x232096){return _0x5308fc===_0x232096;},_0x46ae71[_0x1e16d9(0x1d1)]='test_start',_0x46ae71[_0x1e16d9(0x197)]=function(_0x2f866c,_0x4b233f){return _0x2f866c===_0x4b233f;},_0x46ae71[_0x1e16d9(0x1cb)]=_0x1e16d9(0x1d7),_0x46ae71['Zdvdi']=_0x1e16d9(0x1ab),_0x46ae71['mrGdk']=_0x1e16d9(0x18c),_0x46ae71[_0x1e16d9(0x1ac)]=function(_0x55f367,_0xd847c5){return _0x55f367===_0xd847c5;},_0x46ae71['caxcq']=function(_0x5bbdcb,_0x33347d){return _0x5bbdcb===_0x33347d;},_0x46ae71[_0x1e16d9(0x1bf)]='Error\x20in\x20fail-fast\x20test_done\x20handler:',_0x46ae71[_0x1e16d9(0x1dd)]=function(_0x54f768,_0x301afb){return _0x54f768===_0x301afb;},_0x46ae71[_0x1e16d9(0x1db)]=_0x1e16d9(0x192);const _0x225048=_0x46ae71,{name:_0x27de2c}=_0x53b972;if(_0x225048[_0x1e16d9(0x1e0)](_0x27de2c,_0x225048[_0x1e16d9(0x1d1)])){this[_0x1e16d9(0x1c7)][_0x1e16d9(0x1ae)]=_0x53b972[_0x1e16d9(0x190)];if(_0x225048[_0x1e16d9(0x197)](this['global'][_0x1e16d9(0x183)],!![])){const _0x5ee10c=_0x53b972[_0x1e16d9(0x190)][_0x1e16d9(0x199)];logger['info'](_0x1e16d9(0x1b8)+_0x5ee10c),_0x53b972[_0x1e16d9(0x190)]['mode']=_0x225048[_0x1e16d9(0x1cb)];}}if(this[_0x1e16d9(0x1e3)]&&_0x225048[_0x1e16d9(0x1e0)](_0x27de2c,_0x225048['Zdvdi']))try{const _0xa4c794=_0x53b972['test'][_0x1e16d9(0x1d0)][_0x1e16d9(0x1cc)](_0x225048[_0x1e16d9(0x1bb)]),_0xadf3e0=_0x53b972[_0x1e16d9(0x190)][_0x1e16d9(0x1e7)];await this[_0x1e16d9(0x1e3)]['onTestDone'](_0xa4c794,_0xadf3e0);const _0x2713c0=await this['failFast'][_0x1e16d9(0x1e8)]();_0x225048[_0x1e16d9(0x1ac)](this[_0x1e16d9(0x1c7)][_0x1e16d9(0x183)],![])&&_0x225048[_0x1e16d9(0x1b5)](_0x2713c0,!![])&&(this[_0x1e16d9(0x1c7)][_0x1e16d9(0x183)]=!![]);}catch(_0x4fde36){logger[_0x1e16d9(0x174)](_0x225048[_0x1e16d9(0x1bf)],_0x4fde36[_0x1e16d9(0x1d8)]);}_0x225048[_0x1e16d9(0x1dd)](_0x27de2c,_0x225048[_0x1e16d9(0x1db)])&&(this[_0x1e16d9(0x1e3)]&&this[_0x1e16d9(0x1e3)][_0x1e16d9(0x188)]());}}module['exports']=CustomEnvironment;