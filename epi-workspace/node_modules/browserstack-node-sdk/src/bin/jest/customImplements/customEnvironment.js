const a16_0xbe860d=a16_0x3b6a;(function(_0xac5191,_0x4688f9){const _0x45b0d3=a16_0x3b6a,_0x2099d9=_0xac5191();while(!![]){try{const _0x16350a=parseInt(_0x45b0d3(0xf0))/0x1+-parseInt(_0x45b0d3(0xe8))/0x2*(parseInt(_0x45b0d3(0x127))/0x3)+parseInt(_0x45b0d3(0xe5))/0x4*(parseInt(_0x45b0d3(0x108))/0x5)+parseInt(_0x45b0d3(0x10c))/0x6*(-parseInt(_0x45b0d3(0x12c))/0x7)+-parseInt(_0x45b0d3(0x144))/0x8*(parseInt(_0x45b0d3(0x125))/0x9)+-parseInt(_0x45b0d3(0xf9))/0xa+parseInt(_0x45b0d3(0xdb))/0xb*(parseInt(_0x45b0d3(0xe0))/0xc);if(_0x16350a===_0x4688f9)break;else _0x2099d9['push'](_0x2099d9['shift']());}catch(_0x272205){_0x2099d9['push'](_0x2099d9['shift']());}}}(a16_0x4abf,0x95c0e));function a16_0x3b6a(_0x40d440,_0x57efe0){const _0x4abf2b=a16_0x4abf();return a16_0x3b6a=function(_0x3b6a3f,_0x152b9e){_0x3b6a3f=_0x3b6a3f-0xda;let _0x2f7f77=_0x4abf2b[_0x3b6a3f];return _0x2f7f77;},a16_0x3b6a(_0x40d440,_0x57efe0);}const helper=require('../../../helpers/helper'),constants=require(a16_0xbe860d(0x12e)),{isTestObservabilitySession}=require('../../../helpers/test-observability/utils'),RequestQueueHandler=require('../../../helpers/test-observability/requestQueueHandler'),ObservabilityReporter=require(a16_0xbe860d(0xe2)),testhubUtils=require(a16_0xbe860d(0x111)),logger=require(a16_0xbe860d(0x106))['winstonLogger'],getTestEnvironment=((()=>{const _0x4304eb=a16_0xbe860d,_0x124d7b={};_0x124d7b[_0x4304eb(0x134)]=_0x4304eb(0x131),_0x124d7b[_0x4304eb(0x100)]=_0x4304eb(0xef);const _0xb5cbd4=_0x124d7b;try{const _0x1bb267=helper[_0x4304eb(0xe3)](_0xb5cbd4[_0x4304eb(0x134)]);if(_0x1bb267[_0x4304eb(0x126)])return _0x1bb267[_0x4304eb(0x126)];const _0x2af9de=helper[_0x4304eb(0xe3)](_0xb5cbd4[_0x4304eb(0x100)]);if(_0x2af9de['getTestEnvironment'])return _0x2af9de['getTestEnvironment'];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x1fe4b9=a16_0xbe860d,_0x45f6b8={'rJtPB':function(_0x3ab651,_0x556955){return _0x3ab651(_0x556955);},'ngSCi':_0x1fe4b9(0xf4),'ObGvv':function(_0x113e9a,_0x2279c7){return _0x113e9a(_0x2279c7);},'YyPSx':_0x1fe4b9(0x14d),'PaLeI':function(_0xf71b5e,_0x4bf306){return _0xf71b5e(_0x4bf306);}},_0x111e33=_0x45f6b8[_0x1fe4b9(0x11d)](getTestEnvironment,{'rootDir':process[_0x1fe4b9(0x10a)](),'testEnvironment':process[_0x1fe4b9(0xda)]['BSTACK_JEST_TEST_ENV']||_0x45f6b8['ngSCi']});if(!_0x111e33)return _0x45f6b8[_0x1fe4b9(0x149)](_interopRequireDefault,helper[_0x1fe4b9(0xe3)](_0x45f6b8['YyPSx']));return _0x45f6b8[_0x1fe4b9(0xe6)](_interopRequireDefault,helper[_0x1fe4b9(0xe3)](_0x111e33));})()),_seleniumWebdriver2=((()=>{const _0x562fe2=a16_0xbe860d,_0x7d4afa={'jmFfY':function(_0x31bc9c,_0x170d88){return _0x31bc9c(_0x170d88);}};try{const _0x447966=helper[_0x562fe2(0xee)]();return helper[_0x562fe2(0xf3)](),_0x7d4afa[_0x562fe2(0xfa)](_interopRequireDefault,_0x447966);}catch{return null;}})());function _interopRequireDefault(_0x13ef45){const _0x1a90f5=a16_0xbe860d;return _0x13ef45&&_0x13ef45[_0x1a90f5(0x10d)]?_0x13ef45:{'default':_0x13ef45};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0xbe860d(0xff)][a16_0xbe860d(0xf7)]:null;function a16_0x4abf(){const _0x1cc2b9=['getInstance','BjYin','Xaall','ObGvv','projectConfig','iakxQ','cleanup','jest-environment-node','env','23341362SUngrj','framework','exports','__platformCaps','__drivers','12jtXtqD','VPZPC','../test-observability/obsReporter','requireModule','cleanupDrivers','46356UvqXMG','PaLeI','teardown','28ZOKieN','JEST','RGCLo','tzHBr','__jestRetries','split','requireSeleniumWebdriver','jest-config','1141527GUNpCk','percy','testEnvironmentOptions','modifyCommand','node','shutdown','PfefT','Builder','isTrue','8496960pAlTea','jmFfY','driver','sessionNameProvided','failFastActive','message','default','vWZgk','nestedKeyValue','quit','debug','browserstackPlatformIndex','builder','../../../helpers/logger','test','75XjiTKN','Error\x20in\x20fail-fast\x20test_done\x20handler:','cwd','../../../index','6oQHZfI','__esModule','JvckR','onTestDone','wrigm','../../../helpers/testhub/utils','HCPpr','OHNbJ','sUSYe','__skipSessionStatus','__webdriver','XVslO','registerListeners','errors','naHGQ','global','dbLkQ','rJtPB','ztcfi','testContext','name','setup','failFastOptions','capability','info','99NKUUWc','resolveTestEnvironment','210633HKqVpF','shouldProcessEventForTesthub','TKkqE','shouldFailFast','join','5965337plcqWb','browserstackPercyBestPlatform','../../utils/constants','skipSessionStatus','failFast','jest-resolve','isNotUndefined','../../../helpers/test-orchestration/failfastManager','yISNm','browserStackPercyOptions','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','percyCaptureMode','browserStackGlobals','projectName','test_start','xFPSm','isBrowserstackInfra','PiOxG','buildName','fYaDE','__driversArray','retries__','\x20>\x20','WOPNO','101144VJvyxU','configuration'];a16_0x4abf=function(){return _0x1cc2b9;};return a16_0x4abf();}class CustomEnvironment extends _jestUserEnvironment[a16_0xbe860d(0xff)]{constructor(_0x1f4038){const _0x15461d=a16_0xbe860d,_0x11dc58={'dbLkQ':_0x15461d(0x102),'OHNbJ':function(_0x134ca0,_0x60f68){return _0x134ca0+_0x60f68;},'XVslO':'bstack:options','TKkqE':function(_0x585464,_0x645d87){return _0x585464(_0x645d87);},'fYaDE':_0x15461d(0x133),'Xaall':'1|3|7|8|0|6|9|5|4|2','wrigm':_0x15461d(0xf2),'HCPpr':_0x15461d(0x135),'VPZPC':'percy','ztcfi':_0x15461d(0x10b),'lCMqe':'percyCaptureMode','xBTrO':_0x15461d(0x12d),'BjYin':'platformCaps'};super(_0x1f4038),this[_0x15461d(0x11b)]['__timeout']=0x0,this[_0x15461d(0x145)]={};!_0x1f4038['testEnvironmentOptions']&&(_0x1f4038['testEnvironmentOptions']={});if(helper[_0x15461d(0x13c)]()){_0x1f4038['testEnvironmentOptions']=_0x1f4038[_0x15461d(0x14a)]?_0x1f4038['projectConfig']['testEnvironmentOptions']:_0x1f4038[_0x15461d(0xf2)],this[_0x15461d(0x105)]=new _seleniumWebdriver2['default']['Builder'](),this[_0x15461d(0x123)]=_0x1f4038[_0x15461d(0x14a)]?_0x1f4038[_0x15461d(0x14a)]['capability']:_0x1f4038['capability'],this[_0x15461d(0x11b)]['__timeout']=_0x11dc58[_0x15461d(0x113)](this[_0x15461d(0x145)]['timeout__'],constants['BSTACK_DELTA']),this['failFastOptions']=_0x1f4038[_0x15461d(0xf2)][_0x15461d(0x130)];if(this[_0x15461d(0x122)]){const _0x5aef71=this[_0x15461d(0x123)][_0x11dc58['XVslO']]?.[_0x15461d(0x13e)]||'',_0x111f4e=this[_0x15461d(0x123)][_0x11dc58[_0x15461d(0x117)]]?.[_0x15461d(0x139)]||'';this[_0x15461d(0x130)]=new(_0x11dc58[_0x15461d(0x129)](require,_0x11dc58[_0x15461d(0x13f)]))(this[_0x15461d(0x122)],_0x5aef71,_0x111f4e),this[_0x15461d(0x11b)][_0x15461d(0xfd)]=![];}helper[_0x15461d(0x132)](this[_0x15461d(0x145)][_0x15461d(0x141)])&&(this['global'][_0x15461d(0xec)]=this[_0x15461d(0x145)][_0x15461d(0x141)]);}if(testhubUtils[_0x15461d(0x128)]()){const _0x1bd260=new ObservabilityReporter();_0x1bd260[_0x15461d(0x118)]();}this['global'][_0x15461d(0x138)]={},this['configuration']=_0x1f4038['testEnvironmentOptions'],this[_0x15461d(0x145)][_0x15461d(0xdc)]=constants['FRAMEWORKS'][_0x15461d(0xe9)];if(_seleniumWebdriver2){const _0x16d0ef=_0x11dc58[_0x15461d(0x148)][_0x15461d(0xed)]('|');let _0x12ee1e=0x0;while(!![]){switch(_0x16d0ef[_0x12ee1e++]){case'0':this[_0x15461d(0x11b)][_0x15461d(0xf1)]=helper[_0x15461d(0x101)](_0x1f4038,[_0x11dc58[_0x15461d(0x110)],_0x11dc58['HCPpr'],_0x11dc58[_0x15461d(0xe1)]]);continue;case'1':this[_0x15461d(0x11b)][_0x15461d(0xdf)]=[];continue;case'2':this[_0x15461d(0x11b)][_0x15461d(0x14c)]=async()=>{const _0x15e2e9=_0x15461d;await this[_0x15e2e9(0x11b)][_0x15e2e9(0xfb)][_0x15e2e9(0x102)](_0x11dc58[_0x15e2e9(0x11c)]);};continue;case'3':this[_0x15461d(0x11b)][_0x15461d(0x116)]=_0x11dc58[_0x15461d(0x129)](require,_0x11dc58[_0x15461d(0x11e)])['browserstackAgentV2']({...this[_0x15461d(0x145)],'capability':this[_0x15461d(0x123)]||{}},this,testhubUtils['shouldProcessEventForTesthub']());continue;case'4':this[_0x15461d(0x11b)][_0x15461d(0x115)]=helper[_0x15461d(0xf8)](this['configuration'][_0x15461d(0x12f)]);continue;case'5':helper[_0x15461d(0xf8)](this[_0x15461d(0x145)]['skipSessionName'])?this['global'][_0x15461d(0xfc)]=!![]:this[_0x15461d(0x11b)][_0x15461d(0xfc)]=![];continue;case'6':this['global'][_0x15461d(0x137)]=helper[_0x15461d(0x101)](_0x1f4038,[_0x11dc58[_0x15461d(0x110)],_0x11dc58['HCPpr'],_0x11dc58['lCMqe']]);continue;case'7':this[_0x15461d(0x11b)]['browserstackPlatformIndex']=(_0x1f4038['projectConfig']?_0x1f4038[_0x15461d(0x14a)][_0x15461d(0x104)]:_0x1f4038[_0x15461d(0x104)])||0x0;continue;case'8':this['global'][_0x15461d(0x12d)]=helper[_0x15461d(0x101)](_0x1f4038,[_0x11dc58[_0x15461d(0x110)],_0x11dc58[_0x15461d(0x112)],_0x11dc58['xBTrO']]);continue;case'9':this[_0x15461d(0x11b)][_0x15461d(0xde)]=helper[_0x15461d(0x101)](this[_0x15461d(0x145)],[_0x11dc58[_0x15461d(0x147)],this[_0x15461d(0x11b)]['browserstackPlatformIndex']])||{};continue;}break;}}}async[a16_0xbe860d(0xe7)](){const _0x4d223a=a16_0xbe860d;_seleniumWebdriver2&&(await helper[_0x4d223a(0xe4)](this['global'][_0x4d223a(0x140)]),this[_0x4d223a(0x11b)][_0x4d223a(0x116)][_0x4d223a(0xf7)]=originalBuilder),await RequestQueueHandler[_0x4d223a(0x146)]()[_0x4d223a(0xf5)]();}async[a16_0xbe860d(0x121)](){}async['handleTestEvent'](_0x53be2b,_0x5c03ab){const _0xb78549=a16_0xbe860d,_0x580fcb={};_0x580fcb[_0xb78549(0x11a)]=function(_0x3ab775,_0x2e2d68){return _0x3ab775===_0x2e2d68;},_0x580fcb[_0xb78549(0x143)]=_0xb78549(0x13a),_0x580fcb[_0xb78549(0x10e)]=function(_0x48c0ac,_0x1c2ea1){return _0x48c0ac===_0x1c2ea1;},_0x580fcb[_0xb78549(0x14b)]='skip',_0x580fcb[_0xb78549(0xf6)]='test_done',_0x580fcb[_0xb78549(0xea)]=_0xb78549(0x142),_0x580fcb['xFPSm']=function(_0x5a9957,_0x1824c9){return _0x5a9957===_0x1824c9;},_0x580fcb['tzHBr']=_0xb78549(0x109),_0x580fcb[_0xb78549(0x114)]=function(_0x2e569e,_0x27acac){return _0x2e569e===_0x27acac;},_0x580fcb[_0xb78549(0x13d)]='teardown';const _0x3d8d57=_0x580fcb,{name:_0x2fc597}=_0x53be2b;if(_0x3d8d57['naHGQ'](_0x2fc597,_0x3d8d57[_0xb78549(0x143)])){this['global'][_0xb78549(0x11f)]=_0x53be2b[_0xb78549(0x107)];if(_0x3d8d57['JvckR'](this[_0xb78549(0x11b)][_0xb78549(0xfd)],!![])){const _0x2af45d=_0x53be2b[_0xb78549(0x107)][_0xb78549(0x120)];logger[_0xb78549(0x124)](_0xb78549(0x136)+_0x2af45d),_0x53be2b['test']['mode']=_0x3d8d57['iakxQ'];}}if(this[_0xb78549(0x130)]&&_0x3d8d57[_0xb78549(0x11a)](_0x2fc597,_0x3d8d57[_0xb78549(0xf6)]))try{const _0x37036c=_0x53be2b['test']['testPath'][_0xb78549(0x12b)](_0x3d8d57[_0xb78549(0xea)]),_0x40d0fa=_0x53be2b[_0xb78549(0x107)][_0xb78549(0x119)];await this['failFast'][_0xb78549(0x10f)](_0x37036c,_0x40d0fa);const _0x564714=await this[_0xb78549(0x130)][_0xb78549(0x12a)]();_0x3d8d57[_0xb78549(0x13b)](this[_0xb78549(0x11b)][_0xb78549(0xfd)],![])&&_0x3d8d57[_0xb78549(0x13b)](_0x564714,!![])&&(this[_0xb78549(0x11b)]['failFastActive']=!![]);}catch(_0x57be30){logger[_0xb78549(0x103)](_0x3d8d57[_0xb78549(0xeb)],_0x57be30[_0xb78549(0xfe)]);}_0x3d8d57[_0xb78549(0x114)](_0x2fc597,_0x3d8d57[_0xb78549(0x13d)])&&(this[_0xb78549(0x130)]&&this[_0xb78549(0x130)][_0xb78549(0x14c)]());}}module[a16_0xbe860d(0xdd)]=CustomEnvironment;