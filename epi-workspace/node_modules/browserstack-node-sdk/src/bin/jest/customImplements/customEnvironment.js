const a16_0x2687fa=a16_0x5c23;(function(_0x3c9fca,_0x3c7645){const _0x5bd38f=a16_0x5c23,_0x95f8be=_0x3c9fca();while(!![]){try{const _0x3a3c86=parseInt(_0x5bd38f(0x15c))/0x1+-parseInt(_0x5bd38f(0x12a))/0x2*(-parseInt(_0x5bd38f(0x119))/0x3)+parseInt(_0x5bd38f(0x12f))/0x4+parseInt(_0x5bd38f(0x17c))/0x5*(-parseInt(_0x5bd38f(0x176))/0x6)+parseInt(_0x5bd38f(0x169))/0x7+parseInt(_0x5bd38f(0x12e))/0x8*(parseInt(_0x5bd38f(0x13e))/0x9)+-parseInt(_0x5bd38f(0x164))/0xa*(parseInt(_0x5bd38f(0x179))/0xb);if(_0x3a3c86===_0x3c7645)break;else _0x95f8be['push'](_0x95f8be['shift']());}catch(_0x4fdecc){_0x95f8be['push'](_0x95f8be['shift']());}}}(a16_0x36f1,0xe9a19));const helper=require(a16_0x2687fa(0x16b)),constants=require(a16_0x2687fa(0x162)),{isTestObservabilitySession}=require('../../../helpers/test-observability/utils'),RequestQueueHandler=require(a16_0x2687fa(0x188)),ObservabilityReporter=require(a16_0x2687fa(0x166)),testhubUtils=require(a16_0x2687fa(0x114)),logger=require(a16_0x2687fa(0x16d))[a16_0x2687fa(0x186)],getTestEnvironment=((()=>{const _0x369828=a16_0x2687fa,_0x3b7283={};_0x3b7283['whZek']=_0x369828(0x132),_0x3b7283['aOYMF']=_0x369828(0x116);const _0x540c9c=_0x3b7283;try{const _0x3ed938=helper['requireModule'](_0x540c9c[_0x369828(0x157)]);if(_0x3ed938['resolveTestEnvironment'])return _0x3ed938[_0x369828(0x142)];const _0x38f3b0=helper[_0x369828(0x129)](_0x540c9c[_0x369828(0x130)]);if(_0x38f3b0[_0x369828(0x165)])return _0x38f3b0[_0x369828(0x165)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x2e3dbf=a16_0x2687fa,_0x236a04={'NTHpk':function(_0x27b2de,_0x4aca8b){return _0x27b2de(_0x4aca8b);},'wKBrp':_0x2e3dbf(0x14f),'WtPSp':function(_0x4043e4,_0x326d12){return _0x4043e4(_0x326d12);},'RrSxj':_0x2e3dbf(0x147),'aUaIp':function(_0x38ec0c,_0x1a5407){return _0x38ec0c(_0x1a5407);}},_0x123492=_0x236a04[_0x2e3dbf(0x15f)](getTestEnvironment,{'rootDir':process[_0x2e3dbf(0x138)](),'testEnvironment':process['env'][_0x2e3dbf(0x170)]||_0x236a04['wKBrp']});if(!_0x123492)return _0x236a04[_0x2e3dbf(0x123)](_interopRequireDefault,helper['requireModule'](_0x236a04['RrSxj']));return _0x236a04[_0x2e3dbf(0x158)](_interopRequireDefault,helper[_0x2e3dbf(0x129)](_0x123492));})()),_seleniumWebdriver2=((()=>{const _0x3756f8=a16_0x2687fa,_0x1097cd={'hEwkz':function(_0x3012cf,_0x6d5f1b){return _0x3012cf(_0x6d5f1b);}};try{const _0x49501c=helper['requireSeleniumWebdriver']();return helper[_0x3756f8(0x14d)](),_0x1097cd[_0x3756f8(0x15d)](_interopRequireDefault,_0x49501c);}catch{return null;}})());function _interopRequireDefault(_0x25c7b5){const _0xe8e1e=a16_0x2687fa;return _0x25c7b5&&_0x25c7b5[_0xe8e1e(0x135)]?_0x25c7b5:{'default':_0x25c7b5};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0x2687fa(0x122)]['Builder']:null;function a16_0x5c23(_0x373949,_0x1ad405){const _0x36f189=a16_0x36f1();return a16_0x5c23=function(_0x5c23a9,_0xec3434){_0x5c23a9=_0x5c23a9-0x113;let _0x4874f9=_0x36f189[_0x5c23a9];return _0x4874f9;},a16_0x5c23(_0x373949,_0x1ad405);}class CustomEnvironment extends _jestUserEnvironment[a16_0x2687fa(0x122)]{constructor(_0x4990ea){const _0x3455c7=a16_0x2687fa,_0x508770={'Mirtq':_0x3455c7(0x153),'zMtlK':function(_0x33c60e,_0x2f825a){return _0x33c60e+_0x2f825a;},'gGoVf':_0x3455c7(0x16e),'AEHtk':function(_0x50d877,_0x2119ff){return _0x50d877(_0x2119ff);},'aDMuD':_0x3455c7(0x11f),'dKQVe':_0x3455c7(0x173),'VorvT':_0x3455c7(0x175),'mdKHe':_0x3455c7(0x178),'Ycrte':_0x3455c7(0x174),'JlNaH':function(_0x52cd79,_0x1c8c77){return _0x52cd79(_0x1c8c77);},'MrFxB':_0x3455c7(0x13f),'woHRg':'percyCaptureMode','nvJuf':_0x3455c7(0x14b)};super(_0x4990ea),this['global'][_0x3455c7(0x151)]=0x0,this[_0x3455c7(0x131)]={};!_0x4990ea['testEnvironmentOptions']&&(_0x4990ea[_0x3455c7(0x175)]={});if(helper[_0x3455c7(0x13a)]()){_0x4990ea[_0x3455c7(0x175)]=_0x4990ea[_0x3455c7(0x189)]?_0x4990ea['projectConfig'][_0x3455c7(0x175)]:_0x4990ea['testEnvironmentOptions'];_seleniumWebdriver2&&(this[_0x3455c7(0x128)]=new _seleniumWebdriver2['default'][(_0x3455c7(0x177))]());this['capability']=_0x4990ea[_0x3455c7(0x189)]?_0x4990ea[_0x3455c7(0x189)][_0x3455c7(0x139)]:_0x4990ea[_0x3455c7(0x139)],this[_0x3455c7(0x180)]['__timeout']=_0x508770['zMtlK'](_0x4990ea['testEnvironmentOptions']['timeout__']||0x1388,constants[_0x3455c7(0x182)]),this['failFastOptions']=_0x4990ea[_0x3455c7(0x175)]['failFast'];if(this[_0x3455c7(0x134)]){const _0x37a4be=this[_0x3455c7(0x139)][_0x508770[_0x3455c7(0x12c)]]?.['buildName']||'',_0x8ffafc=this['capability'][_0x508770['gGoVf']]?.['projectName']||'';this[_0x3455c7(0x11b)]=new(_0x508770[_0x3455c7(0x115)](require,_0x508770[_0x3455c7(0x168)]))(this[_0x3455c7(0x134)],_0x37a4be,_0x8ffafc),this[_0x3455c7(0x180)][_0x3455c7(0x16a)]=![];}helper[_0x3455c7(0x161)](_0x4990ea[_0x3455c7(0x175)][_0x3455c7(0x184)])&&(this[_0x3455c7(0x180)][_0x3455c7(0x13b)]=_0x4990ea[_0x3455c7(0x175)][_0x3455c7(0x184)]);}if(testhubUtils['shouldProcessEventForTesthub']()){const _0x185f3f=new ObservabilityReporter();_0x185f3f[_0x3455c7(0x15b)]();}this[_0x3455c7(0x180)]['browserStackGlobals']={},this[_0x3455c7(0x131)]=_0x4990ea['testEnvironmentOptions'],this[_0x3455c7(0x131)][_0x3455c7(0x14c)]=constants[_0x3455c7(0x14e)][_0x3455c7(0x171)],this[_0x3455c7(0x180)][_0x3455c7(0x17b)]=(_0x4990ea['projectConfig']?_0x4990ea[_0x3455c7(0x189)]['browserstackPlatformIndex']:_0x4990ea['browserstackPlatformIndex'])||0x0,this[_0x3455c7(0x180)]['__platformCaps']=this['configuration']&&this[_0x3455c7(0x131)]['platformCaps']&&Array['isArray'](this[_0x3455c7(0x131)][_0x3455c7(0x187)])&&this[_0x3455c7(0x131)][_0x3455c7(0x187)][this[_0x3455c7(0x180)][_0x3455c7(0x17b)]]||{};const _0x50d196=this[_0x3455c7(0x180)][_0x3455c7(0x17b)],_0xae40a4={...this[_0x3455c7(0x131)],'capability':this['configuration']['capabilities']&&Array[_0x3455c7(0x11e)](this[_0x3455c7(0x131)][_0x3455c7(0x152)])&&this[_0x3455c7(0x131)][_0x3455c7(0x152)][_0x50d196]||{},'platformCaps':this[_0x3455c7(0x131)][_0x3455c7(0x187)]&&Array[_0x3455c7(0x11e)](this[_0x3455c7(0x131)]['platformCaps'])&&this[_0x3455c7(0x131)][_0x3455c7(0x187)][_0x50d196]||{}};delete _0xae40a4['capabilities'],this[_0x3455c7(0x180)][_0x3455c7(0x118)]=_0xae40a4;if(_seleniumWebdriver2){const _0x20e1b7=_0x508770[_0x3455c7(0x148)]['split']('|');let _0x2070d3=0x0;while(!![]){switch(_0x20e1b7[_0x2070d3++]){case'0':this['global'][_0x3455c7(0x174)]=helper[_0x3455c7(0x159)](_0x4990ea,[_0x508770['VorvT'],_0x508770[_0x3455c7(0x124)],_0x508770[_0x3455c7(0x16c)]]);continue;case'1':this[_0x3455c7(0x180)]['__drivers']=[];continue;case'2':this[_0x3455c7(0x180)][_0x3455c7(0x125)]=_0x508770['JlNaH'](require,_0x508770[_0x3455c7(0x13d)])['browserstackAgentV2']({...this[_0x3455c7(0x131)],'capability':this[_0x3455c7(0x139)]||{}},this,testhubUtils[_0x3455c7(0x133)]());continue;case'3':this[_0x3455c7(0x180)][_0x3455c7(0x150)]=helper[_0x3455c7(0x159)](_0x4990ea,[_0x508770[_0x3455c7(0x17d)],_0x508770[_0x3455c7(0x124)],_0x508770[_0x3455c7(0x146)]]);continue;case'4':helper[_0x3455c7(0x17f)](this[_0x3455c7(0x131)][_0x3455c7(0x17e)])?this['global'][_0x3455c7(0x155)]=!![]:this['global'][_0x3455c7(0x155)]=![];continue;case'5':this[_0x3455c7(0x180)][_0x3455c7(0x14a)]=async()=>{const _0x5eb0e3=_0x3455c7;await this[_0x5eb0e3(0x180)][_0x5eb0e3(0x13c)]['quit'](_0x508770[_0x5eb0e3(0x15e)]);};continue;case'6':this[_0x3455c7(0x180)][_0x3455c7(0x17a)]=helper['isTrue'](this[_0x3455c7(0x131)][_0x3455c7(0x144)]);continue;case'7':this[_0x3455c7(0x180)][_0x3455c7(0x14b)]=helper[_0x3455c7(0x159)](_0x4990ea,[_0x508770[_0x3455c7(0x17d)],_0x508770[_0x3455c7(0x124)],_0x508770[_0x3455c7(0x117)]]);continue;}break;}}}async['teardown'](){const _0x1f18de=a16_0x2687fa;_seleniumWebdriver2&&(await helper[_0x1f18de(0x154)](this[_0x1f18de(0x180)]['__driversArray']),this[_0x1f18de(0x180)][_0x1f18de(0x125)][_0x1f18de(0x177)]=originalBuilder),await RequestQueueHandler[_0x1f18de(0x140)]()[_0x1f18de(0x172)]();}async[a16_0x2687fa(0x11c)](){}async[a16_0x2687fa(0x183)](_0x276adc,_0x3f8f95){const _0x3a8d9a=a16_0x2687fa,_0x31e8a6={};_0x31e8a6[_0x3a8d9a(0x113)]=function(_0x36be32,_0x3f5ffd){return _0x36be32===_0x3f5ffd;},_0x31e8a6[_0x3a8d9a(0x185)]='test_start',_0x31e8a6[_0x3a8d9a(0x167)]=function(_0x454c22,_0x55c7ad){return _0x454c22===_0x55c7ad;},_0x31e8a6[_0x3a8d9a(0x160)]='skip',_0x31e8a6[_0x3a8d9a(0x136)]=_0x3a8d9a(0x127),_0x31e8a6[_0x3a8d9a(0x181)]=_0x3a8d9a(0x16f),_0x31e8a6[_0x3a8d9a(0x12b)]=_0x3a8d9a(0x145),_0x31e8a6[_0x3a8d9a(0x11a)]=_0x3a8d9a(0x141);const _0x50c725=_0x31e8a6,{name:_0x7e1d48}=_0x276adc;if(_0x50c725[_0x3a8d9a(0x113)](_0x7e1d48,_0x50c725[_0x3a8d9a(0x185)])){this[_0x3a8d9a(0x180)][_0x3a8d9a(0x126)]=_0x276adc[_0x3a8d9a(0x149)];if(_0x50c725[_0x3a8d9a(0x167)](this['global'][_0x3a8d9a(0x16a)],!![])){const _0xb79f06=_0x276adc[_0x3a8d9a(0x149)][_0x3a8d9a(0x12d)];logger[_0x3a8d9a(0x163)](_0x3a8d9a(0x15a)+_0xb79f06),_0x276adc[_0x3a8d9a(0x149)]['mode']=_0x50c725[_0x3a8d9a(0x160)];}}if(this[_0x3a8d9a(0x11b)]&&_0x50c725[_0x3a8d9a(0x113)](_0x7e1d48,_0x50c725[_0x3a8d9a(0x136)]))try{const _0x1d56dc=_0x276adc[_0x3a8d9a(0x149)][_0x3a8d9a(0x121)][_0x3a8d9a(0x143)](_0x50c725[_0x3a8d9a(0x181)]),_0x1441c8=_0x276adc[_0x3a8d9a(0x149)][_0x3a8d9a(0x11d)];await this[_0x3a8d9a(0x11b)][_0x3a8d9a(0x120)](_0x1d56dc,_0x1441c8);const _0x51cf73=await this[_0x3a8d9a(0x11b)][_0x3a8d9a(0x156)]();_0x50c725[_0x3a8d9a(0x167)](this['global']['failFastActive'],![])&&_0x50c725[_0x3a8d9a(0x167)](_0x51cf73,!![])&&(this[_0x3a8d9a(0x180)][_0x3a8d9a(0x16a)]=!![]);}catch(_0x168e86){logger['debug'](_0x50c725[_0x3a8d9a(0x12b)],_0x168e86['message']);}_0x50c725[_0x3a8d9a(0x167)](_0x7e1d48,_0x50c725[_0x3a8d9a(0x11a)])&&(this[_0x3a8d9a(0x11b)]&&this['failFast'][_0x3a8d9a(0x14a)]());}}function a16_0x36f1(){const _0x3596bc=['test_done','builder','requireModule','14vaUviy','KbDdo','gGoVf','name','8NDRVPc','467340Gffywv','aOYMF','configuration','jest-resolve','shouldProcessEventForTesthub','failFastOptions','__esModule','zWwLX','exports','cwd','capability','isBrowserstackInfra','__jestRetries','driver','MrFxB','13775499NZIaqb','../../../index','getInstance','teardown','resolveTestEnvironment','join','skipSessionStatus','Error\x20in\x20fail-fast\x20test_done\x20handler:','woHRg','jest-environment-node','dKQVe','test','cleanup','percy','framework','modifyCommand','FRAMEWORKS','node','percyCaptureMode','__timeout','capabilities','quit','cleanupDrivers','sessionNameProvided','shouldFailFast','whZek','aUaIp','nestedKeyValue','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','registerListeners','1768911ryNItD','hEwkz','Mirtq','NTHpk','bOMBB','isNotUndefined','../../utils/constants','info','1049090oAwrAF','getTestEnvironment','../test-observability/obsReporter','aAmCR','aDMuD','12260255kkOWci','failFastActive','../../../helpers/helper','Ycrte','../../../helpers/logger','bstack:options','\x20>\x20','BSTACK_JEST_TEST_ENV','JEST','shutdown','1|2|0|7|3|4|6|5','browserstackPercyBestPlatform','testEnvironmentOptions','1198128KLEhyo','Builder','browserStackPercyOptions','297cJKvVp','__skipSessionStatus','browserstackPlatformIndex','45MgfRQI','VorvT','skipSessionName','isTrue','global','HPRWj','BSTACK_DELTA','handleTestEvent','retries__','bDPcl','winstonLogger','platformCaps','../../../helpers/test-observability/requestQueueHandler','projectConfig','cEwLH','../../../helpers/testhub/utils','AEHtk','jest-config','nvJuf','jestConfig','179514IHaffy','VtvpH','failFast','setup','errors','isArray','../../../helpers/test-orchestration/failfastManager','onTestDone','testPath','default','WtPSp','mdKHe','__webdriver','testContext'];a16_0x36f1=function(){return _0x3596bc;};return a16_0x36f1();}module[a16_0x2687fa(0x137)]=CustomEnvironment;