const a16_0x1f8e89=a16_0x9782;(function(_0x57d1b5,_0x308482){const _0x37a93c=a16_0x9782,_0x1c08b8=_0x57d1b5();while(!![]){try{const _0x520b98=-parseInt(_0x37a93c(0x1d8))/0x1*(parseInt(_0x37a93c(0x1c2))/0x2)+-parseInt(_0x37a93c(0x1a3))/0x3+-parseInt(_0x37a93c(0x1b8))/0x4*(parseInt(_0x37a93c(0x1ac))/0x5)+parseInt(_0x37a93c(0x1fe))/0x6+parseInt(_0x37a93c(0x1c9))/0x7+-parseInt(_0x37a93c(0x1ff))/0x8+parseInt(_0x37a93c(0x1ed))/0x9;if(_0x520b98===_0x308482)break;else _0x1c08b8['push'](_0x1c08b8['shift']());}catch(_0x4ea230){_0x1c08b8['push'](_0x1c08b8['shift']());}}}(a16_0x1189,0x68adf));const helper=require(a16_0x1f8e89(0x1d3)),constants=require(a16_0x1f8e89(0x1b3)),{isTestObservabilitySession}=require('../../../helpers/test-observability/utils'),RequestQueueHandler=require(a16_0x1f8e89(0x1a1)),ObservabilityReporter=require(a16_0x1f8e89(0x1a2)),testhubUtils=require(a16_0x1f8e89(0x20c)),logger=require(a16_0x1f8e89(0x1cd))[a16_0x1f8e89(0x209)],getTestEnvironment=((()=>{const _0x40ccd8=a16_0x1f8e89,_0x53da4={};_0x53da4[_0x40ccd8(0x1a9)]='jest-resolve',_0x53da4['eXLWV']=_0x40ccd8(0x1b6);const _0x2304c5=_0x53da4;try{const _0x399b5b=helper[_0x40ccd8(0x1c1)](_0x2304c5[_0x40ccd8(0x1a9)]);if(_0x399b5b[_0x40ccd8(0x19f)])return _0x399b5b[_0x40ccd8(0x19f)];const _0x399e8f=helper[_0x40ccd8(0x1c1)](_0x2304c5[_0x40ccd8(0x20a)]);if(_0x399e8f[_0x40ccd8(0x1f3)])return _0x399e8f[_0x40ccd8(0x1f3)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x50901c=a16_0x1f8e89,_0x31d8b0={'hrrFR':function(_0x39b619,_0x429d5d){return _0x39b619(_0x429d5d);},'xRstS':'node','HcnuN':_0x50901c(0x1c4),'rsyWg':function(_0x252f25,_0x9d4618){return _0x252f25(_0x9d4618);}},_0x1261dc=_0x31d8b0[_0x50901c(0x1ae)](getTestEnvironment,{'rootDir':process['cwd'](),'testEnvironment':process['env'][_0x50901c(0x1f9)]||_0x31d8b0['xRstS']});if(!_0x1261dc)return _0x31d8b0['hrrFR'](_interopRequireDefault,helper['requireModule'](_0x31d8b0[_0x50901c(0x1fa)]));return _0x31d8b0[_0x50901c(0x1df)](_interopRequireDefault,helper[_0x50901c(0x1c1)](_0x1261dc));})()),_seleniumWebdriver2=((()=>{const _0x10d815=a16_0x1f8e89,_0x3345ac={'iAZBg':function(_0x2704df,_0x5f3965){return _0x2704df(_0x5f3965);}};try{const _0x440e04=helper[_0x10d815(0x1d5)]();return helper[_0x10d815(0x1ef)](),_0x3345ac['iAZBg'](_interopRequireDefault,_0x440e04);}catch{return null;}})());function _interopRequireDefault(_0x48361a){const _0x43d1e7=a16_0x1f8e89;return _0x48361a&&_0x48361a[_0x43d1e7(0x1cf)]?_0x48361a:{'default':_0x48361a};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0x1f8e89(0x1c5)][a16_0x1f8e89(0x206)]:null;class CustomEnvironment extends _jestUserEnvironment[a16_0x1f8e89(0x1c5)]{constructor(_0x3bebc6){const _0x1d56df=a16_0x1f8e89,_0x462658={'mDqUc':_0x1d56df(0x1b7),'LGdgN':function(_0x205700,_0x177546){return _0x205700+_0x177546;},'JWHca':_0x1d56df(0x1ea),'dqXQN':function(_0x29699a,_0x5d4880){return _0x29699a(_0x5d4880);},'uJHAu':'../../../helpers/test-orchestration/failfastManager','HAHSN':_0x1d56df(0x208),'pFGsC':function(_0x1d17e4,_0x241126){return _0x1d17e4(_0x241126);},'kylGy':_0x1d56df(0x1e7),'sXPFQ':_0x1d56df(0x1ad),'bovJO':'browserStackPercyOptions','nJuDi':'browserstackPercyBestPlatform','UpxWd':_0x1d56df(0x1f1),'tyIsw':_0x1d56df(0x1f4)};super(_0x3bebc6),this[_0x1d56df(0x1a0)]['__timeout']=0x0,this[_0x1d56df(0x20b)]={};!_0x3bebc6[_0x1d56df(0x1ad)]&&(_0x3bebc6['testEnvironmentOptions']={});if(helper[_0x1d56df(0x19e)]()){_0x3bebc6['testEnvironmentOptions']=_0x3bebc6['projectConfig']?_0x3bebc6[_0x1d56df(0x1f6)][_0x1d56df(0x1ad)]:_0x3bebc6[_0x1d56df(0x1ad)];_seleniumWebdriver2&&(this[_0x1d56df(0x1d6)]=new _seleniumWebdriver2['default'][(_0x1d56df(0x206))]());this[_0x1d56df(0x1ec)]=_0x3bebc6[_0x1d56df(0x1f6)]?_0x3bebc6[_0x1d56df(0x1f6)]['capability']:_0x3bebc6['capability'],this['global']['__timeout']=_0x462658[_0x1d56df(0x1fc)](_0x3bebc6[_0x1d56df(0x1ad)][_0x1d56df(0x1a7)]||0x1388,constants[_0x1d56df(0x1c7)]),this[_0x1d56df(0x20d)]=_0x3bebc6[_0x1d56df(0x1ad)][_0x1d56df(0x1dc)];if(this[_0x1d56df(0x20d)]){const _0x269a93=this[_0x1d56df(0x1ec)][_0x462658['JWHca']]?.[_0x1d56df(0x1dd)]||'',_0x2a8d61=this[_0x1d56df(0x1ec)][_0x462658[_0x1d56df(0x1de)]]?.['projectName']||'';this['failFast']=new(_0x462658[_0x1d56df(0x1c8)](require,_0x462658[_0x1d56df(0x1e0)]))(this['failFastOptions'],_0x269a93,_0x2a8d61),this[_0x1d56df(0x1a0)][_0x1d56df(0x1eb)]=![];}helper['isNotUndefined'](_0x3bebc6[_0x1d56df(0x1ad)]['retries__'])&&(this[_0x1d56df(0x1a0)]['__jestRetries']=_0x3bebc6[_0x1d56df(0x1ad)][_0x1d56df(0x1d9)]);}if(testhubUtils['shouldProcessEventForTesthub']()){const _0x29231a=new ObservabilityReporter();_0x29231a[_0x1d56df(0x1e5)]();}this[_0x1d56df(0x1a0)][_0x1d56df(0x1a8)]={},this[_0x1d56df(0x20b)]=_0x3bebc6[_0x1d56df(0x1ad)],this[_0x1d56df(0x20b)][_0x1d56df(0x1c6)]=constants[_0x1d56df(0x1b5)][_0x1d56df(0x1c3)],this[_0x1d56df(0x1a0)][_0x1d56df(0x1fd)]=(_0x3bebc6[_0x1d56df(0x1f6)]?_0x3bebc6[_0x1d56df(0x1f6)][_0x1d56df(0x1fd)]:_0x3bebc6[_0x1d56df(0x1fd)])||0x0,this[_0x1d56df(0x1a0)]['__platformCaps']=this[_0x1d56df(0x20b)]&&this[_0x1d56df(0x20b)][_0x1d56df(0x1d1)]&&Array[_0x1d56df(0x1aa)](this[_0x1d56df(0x20b)]['platformCaps'])&&this[_0x1d56df(0x20b)]['platformCaps'][this['global'][_0x1d56df(0x1fd)]]||{};const _0x3897a6=this[_0x1d56df(0x1a0)][_0x1d56df(0x1fd)],_0x1b7b6a={...this['configuration'],'capability':this[_0x1d56df(0x20b)][_0x1d56df(0x1b0)]&&Array[_0x1d56df(0x1aa)](this['configuration'][_0x1d56df(0x1b0)])&&this[_0x1d56df(0x20b)][_0x1d56df(0x1b0)][_0x3897a6]||{},'platformCaps':this[_0x1d56df(0x20b)][_0x1d56df(0x1d1)]&&Array[_0x1d56df(0x1aa)](this[_0x1d56df(0x20b)]['platformCaps'])&&this[_0x1d56df(0x20b)][_0x1d56df(0x1d1)][_0x3897a6]||{}};delete _0x1b7b6a[_0x1d56df(0x1b0)],this[_0x1d56df(0x1a0)][_0x1d56df(0x1d7)]=_0x1b7b6a;if(_seleniumWebdriver2){const _0x36a991=_0x462658[_0x1d56df(0x1cc)]['split']('|');let _0xa00af3=0x0;while(!![]){switch(_0x36a991[_0xa00af3++]){case'0':helper[_0x1d56df(0x1a6)](this[_0x1d56df(0x20b)][_0x1d56df(0x203)])?this[_0x1d56df(0x1a0)][_0x1d56df(0x1ab)]=!![]:this[_0x1d56df(0x1a0)][_0x1d56df(0x1ab)]=![];continue;case'1':this[_0x1d56df(0x1a0)][_0x1d56df(0x1e2)]=[];continue;case'2':this[_0x1d56df(0x1a0)][_0x1d56df(0x1d4)]=_0x462658[_0x1d56df(0x1a4)](require,_0x462658[_0x1d56df(0x200)])[_0x1d56df(0x1f5)]({...this['configuration'],'capability':this[_0x1d56df(0x1ec)]||{}},this,testhubUtils['shouldProcessEventForTesthub']());continue;case'3':this[_0x1d56df(0x1a0)][_0x1d56df(0x1e6)]=helper[_0x1d56df(0x1a6)](this[_0x1d56df(0x20b)][_0x1d56df(0x1ce)]);continue;case'4':this['global'][_0x1d56df(0x1a5)]=helper[_0x1d56df(0x1bb)](_0x3bebc6,[_0x462658[_0x1d56df(0x1ca)],_0x462658['bovJO'],_0x462658['nJuDi']]);continue;case'5':this[_0x1d56df(0x1a0)][_0x1d56df(0x1f1)]=helper[_0x1d56df(0x1bb)](_0x3bebc6,[_0x462658[_0x1d56df(0x1ca)],_0x462658[_0x1d56df(0x1e4)],_0x462658[_0x1d56df(0x1fb)]]);continue;case'6':this[_0x1d56df(0x1a0)]['percyCaptureMode']=helper[_0x1d56df(0x1bb)](_0x3bebc6,[_0x462658[_0x1d56df(0x1ca)],_0x462658[_0x1d56df(0x1e4)],_0x462658['tyIsw']]);continue;case'7':this[_0x1d56df(0x1a0)]['cleanup']=async()=>{const _0x517cee=_0x1d56df;await this[_0x517cee(0x1a0)][_0x517cee(0x1ee)]['quit'](_0x462658[_0x517cee(0x1f0)]);};continue;}break;}}}async[a16_0x1f8e89(0x1be)](){const _0x3097a5=a16_0x1f8e89;_seleniumWebdriver2&&(await helper['cleanupDrivers'](this[_0x3097a5(0x1a0)][_0x3097a5(0x1f8)]),this[_0x3097a5(0x1a0)]['__webdriver'][_0x3097a5(0x206)]=originalBuilder),await RequestQueueHandler[_0x3097a5(0x1af)]()[_0x3097a5(0x205)]();}async[a16_0x1f8e89(0x1e9)](){}async[a16_0x1f8e89(0x1ba)](_0x208f47,_0x19e1c5){const _0x409069=a16_0x1f8e89,_0x4ca497={};_0x4ca497[_0x409069(0x1da)]=function(_0x1db8fc,_0x670a6d){return _0x1db8fc===_0x670a6d;},_0x4ca497[_0x409069(0x1f7)]=_0x409069(0x1bd),_0x4ca497[_0x409069(0x1b1)]=_0x409069(0x1d2),_0x4ca497[_0x409069(0x1bc)]=_0x409069(0x1b4),_0x4ca497[_0x409069(0x1e1)]='\x20>\x20',_0x4ca497['CcCJm']=function(_0x35bd79,_0x302773){return _0x35bd79===_0x302773;},_0x4ca497['Ylseu']='Error\x20in\x20fail-fast\x20test_done\x20handler:',_0x4ca497[_0x409069(0x1cb)]=_0x409069(0x1be);const _0x5212ba=_0x4ca497,{name:_0xb4c924}=_0x208f47;if(_0x5212ba[_0x409069(0x1da)](_0xb4c924,_0x5212ba[_0x409069(0x1f7)])){this[_0x409069(0x1a0)][_0x409069(0x202)]=_0x208f47[_0x409069(0x207)];if(_0x5212ba[_0x409069(0x1da)](this[_0x409069(0x1a0)][_0x409069(0x1eb)],!![])){const _0x1697e4=_0x208f47['test'][_0x409069(0x1e3)];logger[_0x409069(0x1e8)](_0x409069(0x1db)+_0x1697e4),_0x208f47[_0x409069(0x207)][_0x409069(0x201)]=_0x5212ba[_0x409069(0x1b1)];}}if(this[_0x409069(0x1dc)]&&_0x5212ba['lCsEM'](_0xb4c924,_0x5212ba[_0x409069(0x1bc)]))try{const _0xf84993=_0x208f47[_0x409069(0x207)]['testPath']['join'](_0x5212ba[_0x409069(0x1e1)]),_0x352b04=_0x208f47[_0x409069(0x207)][_0x409069(0x1bf)];await this['failFast'][_0x409069(0x204)](_0xf84993,_0x352b04);const _0x65012a=await this[_0x409069(0x1dc)][_0x409069(0x1c0)]();_0x5212ba[_0x409069(0x1f2)](this[_0x409069(0x1a0)][_0x409069(0x1eb)],![])&&_0x5212ba[_0x409069(0x1f2)](_0x65012a,!![])&&(this['global'][_0x409069(0x1eb)]=!![]);}catch(_0x5c4b28){logger['debug'](_0x5212ba[_0x409069(0x1b2)],_0x5c4b28[_0x409069(0x1b9)]);}_0x5212ba[_0x409069(0x1f2)](_0xb4c924,_0x5212ba[_0x409069(0x1cb)])&&(this[_0x409069(0x1dc)]&&this[_0x409069(0x1dc)][_0x409069(0x1d0)]());}}function a16_0x1189(){const _0x125353=['jest-config','quit','8rvJgsG','message','handleTestEvent','nestedKeyValue','nmbLe','test_start','teardown','errors','shouldFailFast','requireModule','20708bCyXFY','JEST','jest-environment-node','default','framework','BSTACK_DELTA','dqXQN','1475887rcrJAv','sXPFQ','XaMTJ','HAHSN','../../../helpers/logger','skipSessionStatus','__esModule','cleanup','platformCaps','skip','../../../helpers/helper','__webdriver','requireSeleniumWebdriver','builder','jestConfig','15GPUaQo','retries__','lCsEM','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','failFast','buildName','JWHca','rsyWg','uJHAu','nDEqx','__drivers','name','bovJO','registerListeners','__skipSessionStatus','../../../index','info','setup','bstack:options','failFastActive','capability','12995874lQACmD','driver','modifyCommand','mDqUc','percy','CcCJm','getTestEnvironment','percyCaptureMode','browserstackAgentV2','projectConfig','hmuoW','__driversArray','BSTACK_JEST_TEST_ENV','HcnuN','UpxWd','LGdgN','browserstackPlatformIndex','5064522qDbGop','5534536VihbBb','kylGy','mode','testContext','skipSessionName','onTestDone','shutdown','Builder','test','1|2|4|5|6|0|3|7','winstonLogger','eXLWV','configuration','../../../helpers/testhub/utils','failFastOptions','isBrowserstackInfra','resolveTestEnvironment','global','../../../helpers/test-observability/requestQueueHandler','../test-observability/obsReporter','2196204ICRcWF','pFGsC','browserstackPercyBestPlatform','isTrue','timeout__','browserStackGlobals','FnxvF','isArray','sessionNameProvided','1227380ZPSdTB','testEnvironmentOptions','hrrFR','getInstance','capabilities','qyDZx','Ylseu','../../utils/constants','test_done','FRAMEWORKS'];a16_0x1189=function(){return _0x125353;};return a16_0x1189();}function a16_0x9782(_0x1378cf,_0x31483e){const _0x1189bb=a16_0x1189();return a16_0x9782=function(_0x97826c,_0x57657f){_0x97826c=_0x97826c-0x19e;let _0x9a9518=_0x1189bb[_0x97826c];return _0x9a9518;},a16_0x9782(_0x1378cf,_0x31483e);}module['exports']=CustomEnvironment;