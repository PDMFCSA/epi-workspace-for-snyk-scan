function a18_0x3614(_0x5e1064,_0xaa0d1b){const _0x3792de=a18_0x3792();return a18_0x3614=function(_0x36147f,_0x43d489){_0x36147f=_0x36147f-0x68;let _0x5b9c1f=_0x3792de[_0x36147f];return _0x5b9c1f;},a18_0x3614(_0x5e1064,_0xaa0d1b);}const a18_0x4e0f6a=a18_0x3614;(function(_0x5180be,_0x2f8394){const _0x1313fb=a18_0x3614,_0x3566ce=_0x5180be();while(!![]){try{const _0x3915af=-parseInt(_0x1313fb(0xb4))/0x1+-parseInt(_0x1313fb(0xcb))/0x2+-parseInt(_0x1313fb(0xb2))/0x3+parseInt(_0x1313fb(0xa5))/0x4+-parseInt(_0x1313fb(0x7d))/0x5+-parseInt(_0x1313fb(0x72))/0x6*(-parseInt(_0x1313fb(0xb1))/0x7)+-parseInt(_0x1313fb(0x8c))/0x8*(-parseInt(_0x1313fb(0x9e))/0x9);if(_0x3915af===_0x2f8394)break;else _0x3566ce['push'](_0x3566ce['shift']());}catch(_0x234e04){_0x3566ce['push'](_0x3566ce['shift']());}}}(a18_0x3792,0xc8f42));const helper=require('../../../helpers/helper'),constants=require('../../utils/constants'),{isTestObservabilitySession}=require('../../../helpers/test-observability/utils'),RequestQueueHandler=require(a18_0x4e0f6a(0x69)),ObservabilityReporter=require('../test-observability/obsReporter'),testhubUtils=require(a18_0x4e0f6a(0x71)),logger=require(a18_0x4e0f6a(0x7a))['winstonLogger'],getTestEnvironment=((()=>{const _0x1218b4=a18_0x4e0f6a,_0xc937b5={};_0xc937b5[_0x1218b4(0x85)]=_0x1218b4(0xd3),_0xc937b5[_0x1218b4(0xc0)]=_0x1218b4(0xc5);const _0x44d27d=_0xc937b5;try{const _0x254e58=helper[_0x1218b4(0xa0)](_0x44d27d[_0x1218b4(0x85)]);if(_0x254e58[_0x1218b4(0x9f)])return _0x254e58[_0x1218b4(0x9f)];const _0x333a4c=helper['requireModule'](_0x44d27d[_0x1218b4(0xc0)]);if(_0x333a4c[_0x1218b4(0x99)])return _0x333a4c[_0x1218b4(0x99)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x1c88d4=a18_0x4e0f6a,_0x210de5={'mfaUn':function(_0x81d495,_0xbb8175){return _0x81d495(_0xbb8175);},'kIcTz':_0x1c88d4(0xbb),'BXNMF':function(_0x36a34e,_0x40b15b){return _0x36a34e(_0x40b15b);},'nziCV':_0x1c88d4(0x86)},_0x34ea95=_0x210de5[_0x1c88d4(0xa9)](getTestEnvironment,{'rootDir':process[_0x1c88d4(0xad)](),'testEnvironment':process['env'][_0x1c88d4(0x75)]||_0x210de5[_0x1c88d4(0xb6)]});if(!_0x34ea95)return _0x210de5[_0x1c88d4(0xd2)](_interopRequireDefault,helper[_0x1c88d4(0xa0)](_0x210de5['nziCV']));return _0x210de5['mfaUn'](_interopRequireDefault,helper[_0x1c88d4(0xa0)](_0x34ea95));})()),_seleniumWebdriver2=((()=>{const _0x42848c=a18_0x4e0f6a,_0x47eaa3={'wrTQh':function(_0x19ff64,_0xd18cd2){return _0x19ff64(_0xd18cd2);}};try{const _0x2a137b=helper[_0x42848c(0x83)]();return helper[_0x42848c(0xcc)](),_0x47eaa3[_0x42848c(0x92)](_interopRequireDefault,_0x2a137b);}catch{return null;}})());function _interopRequireDefault(_0x1665de){const _0x1e5554=a18_0x4e0f6a;return _0x1665de&&_0x1665de[_0x1e5554(0xa7)]?_0x1665de:{'default':_0x1665de};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2['default']['Builder']:null;class CustomEnvironment extends _jestUserEnvironment[a18_0x4e0f6a(0xa4)]{constructor(_0x547e86){const _0x4807ed=a18_0x4e0f6a,_0x12de5e={'nvrlB':_0x4807ed(0x7b),'SUiex':function(_0x2bc64e,_0x51803e){return _0x2bc64e+_0x51803e;},'riQTZ':'bstack:options','ZXGrv':function(_0xf966c9,_0x36dda4){return _0xf966c9(_0x36dda4);},'JHAsH':_0x4807ed(0x77),'RMoqz':_0x4807ed(0x79),'VzHQF':'testEnvironmentOptions','KVpJJ':'browserStackPercyOptions','DZwWF':_0x4807ed(0x8b),'lAPzC':_0x4807ed(0xce),'cnsjG':'../../../index','RGofA':_0x4807ed(0xbc),'qjOGm':'platformCaps'};super(_0x547e86),this['global'][_0x4807ed(0xb9)]=0x0,this[_0x4807ed(0xac)]={};!_0x547e86['testEnvironmentOptions']&&(_0x547e86['testEnvironmentOptions']={});if(helper['isBrowserstackInfra']()){_0x547e86[_0x4807ed(0x7f)]=_0x547e86[_0x4807ed(0xbd)]?_0x547e86[_0x4807ed(0xbd)][_0x4807ed(0x7f)]:_0x547e86['testEnvironmentOptions'],this['builder']=new _seleniumWebdriver2[(_0x4807ed(0xa4))][(_0x4807ed(0x94))](),this['capability']=_0x547e86['projectConfig']?_0x547e86[_0x4807ed(0xbd)][_0x4807ed(0x97)]:_0x547e86[_0x4807ed(0x97)],this[_0x4807ed(0xca)][_0x4807ed(0xb9)]=_0x12de5e[_0x4807ed(0x6d)](this[_0x4807ed(0xac)][_0x4807ed(0xc6)],constants[_0x4807ed(0xb7)]),this[_0x4807ed(0x9c)]=_0x547e86[_0x4807ed(0x7f)][_0x4807ed(0xbf)];if(this['failFastOptions']){const _0x36e483=this[_0x4807ed(0x97)][_0x12de5e[_0x4807ed(0xb0)]]?.['buildName']||'',_0x27b0a3=this[_0x4807ed(0x97)][_0x12de5e[_0x4807ed(0xb0)]]?.[_0x4807ed(0xa1)]||'';this[_0x4807ed(0xbf)]=new(_0x12de5e[_0x4807ed(0x91)](require,_0x12de5e['JHAsH']))(this[_0x4807ed(0x9c)],_0x36e483,_0x27b0a3),this['global'][_0x4807ed(0x76)]=![];}helper[_0x4807ed(0x73)](this[_0x4807ed(0xac)][_0x4807ed(0x8d)])&&(this[_0x4807ed(0xca)]['__jestRetries']=this[_0x4807ed(0xac)][_0x4807ed(0x8d)]);}if(testhubUtils['shouldProcessEventForTesthub']()){const _0x279c91=new ObservabilityReporter();_0x279c91[_0x4807ed(0xcf)]();}this[_0x4807ed(0xca)][_0x4807ed(0x74)]={},this['configuration']=_0x547e86[_0x4807ed(0x7f)],this[_0x4807ed(0xac)][_0x4807ed(0xc2)]=constants['FRAMEWORKS'][_0x4807ed(0x81)];if(_seleniumWebdriver2){const _0x4936f6=_0x12de5e[_0x4807ed(0xa3)][_0x4807ed(0x96)]('|');let _0x154719=0x0;while(!![]){switch(_0x4936f6[_0x154719++]){case'0':this[_0x4807ed(0xca)][_0x4807ed(0x8b)]=helper['nestedKeyValue'](_0x547e86,[_0x12de5e[_0x4807ed(0x6f)],_0x12de5e[_0x4807ed(0xb3)],_0x12de5e[_0x4807ed(0x78)]]);continue;case'1':this[_0x4807ed(0xca)]['percy']=helper[_0x4807ed(0xc7)](_0x547e86,[_0x12de5e['VzHQF'],_0x12de5e[_0x4807ed(0xb3)],_0x12de5e[_0x4807ed(0xaf)]]);continue;case'2':this[_0x4807ed(0xca)]['browserstackPlatformIndex']=(_0x547e86[_0x4807ed(0xbd)]?_0x547e86[_0x4807ed(0xbd)][_0x4807ed(0x88)]:_0x547e86[_0x4807ed(0x88)])||0x0;continue;case'3':this[_0x4807ed(0xca)][_0x4807ed(0xc4)]=[];continue;case'4':this[_0x4807ed(0xca)]['cleanup']=async()=>{const _0xcc7bad=_0x4807ed;await this[_0xcc7bad(0xca)][_0xcc7bad(0x6b)][_0xcc7bad(0x7b)](_0x12de5e[_0xcc7bad(0xc1)]);};continue;case'5':this['global'][_0x4807ed(0x93)]=_0x12de5e[_0x4807ed(0x91)](require,_0x12de5e[_0x4807ed(0xa8)])[_0x4807ed(0x8e)]({...this[_0x4807ed(0xac)],'capability':this['capability']||{}},this,testhubUtils[_0x4807ed(0x89)]());continue;case'6':helper['isTrue'](this[_0x4807ed(0xac)][_0x4807ed(0xd1)])?this[_0x4807ed(0xca)][_0x4807ed(0x9a)]=!![]:this['global']['sessionNameProvided']=![];continue;case'7':this['global'][_0x4807ed(0xbc)]=helper[_0x4807ed(0xc7)](_0x547e86,[_0x12de5e[_0x4807ed(0x6f)],_0x12de5e[_0x4807ed(0xb3)],_0x12de5e['RGofA']]);continue;case'8':this[_0x4807ed(0xca)]['__platformCaps']=helper['nestedKeyValue'](this['configuration'],[_0x12de5e[_0x4807ed(0x84)],this[_0x4807ed(0xca)][_0x4807ed(0x88)]])||{};continue;case'9':this[_0x4807ed(0xca)][_0x4807ed(0xab)]=helper[_0x4807ed(0x70)](this[_0x4807ed(0xac)][_0x4807ed(0x8f)]);continue;}break;}}}async[a18_0x4e0f6a(0xbe)](){const _0x339851=a18_0x4e0f6a;_seleniumWebdriver2&&(await helper[_0x339851(0xc9)](this[_0x339851(0xca)]['__driversArray']),this[_0x339851(0xca)]['__webdriver'][_0x339851(0x94)]=originalBuilder),await RequestQueueHandler[_0x339851(0x6c)]()[_0x339851(0xcd)]();}async['setup'](){}async[a18_0x4e0f6a(0x90)](_0x7eeb3a,_0x2e24c3){const _0x4fba02=a18_0x4e0f6a,_0x2ab227={};_0x2ab227[_0x4fba02(0xba)]=function(_0x57ad10,_0x3e0b44){return _0x57ad10===_0x3e0b44;},_0x2ab227[_0x4fba02(0xa6)]=_0x4fba02(0x82),_0x2ab227[_0x4fba02(0xc8)]=function(_0x4b53d6,_0x13b3c9){return _0x4b53d6===_0x13b3c9;},_0x2ab227[_0x4fba02(0xae)]=_0x4fba02(0x9d),_0x2ab227[_0x4fba02(0xaa)]='test_done',_0x2ab227[_0x4fba02(0x7c)]=_0x4fba02(0x98),_0x2ab227[_0x4fba02(0x95)]=_0x4fba02(0x8a),_0x2ab227[_0x4fba02(0x6e)]='teardown';const _0x389714=_0x2ab227,{name:_0x19e262}=_0x7eeb3a;if(_0x389714['FRRRm'](_0x19e262,_0x389714[_0x4fba02(0xa6)])){this['global']['testContext']=_0x7eeb3a[_0x4fba02(0x9b)];if(_0x389714[_0x4fba02(0xc8)](this[_0x4fba02(0xca)][_0x4fba02(0x76)],!![])){const _0x266137=_0x7eeb3a[_0x4fba02(0x9b)][_0x4fba02(0xa2)];logger[_0x4fba02(0x87)](_0x4fba02(0xb5)+_0x266137),_0x7eeb3a['test'][_0x4fba02(0x68)]=_0x389714[_0x4fba02(0xae)];}}if(this[_0x4fba02(0xbf)]&&_0x389714[_0x4fba02(0xba)](_0x19e262,_0x389714[_0x4fba02(0xaa)]))try{const _0x49e538=_0x7eeb3a[_0x4fba02(0x9b)][_0x4fba02(0xd0)][_0x4fba02(0x7e)](_0x389714[_0x4fba02(0x7c)]),_0x3248ce=_0x7eeb3a[_0x4fba02(0x9b)][_0x4fba02(0x6a)];await this['failFast'][_0x4fba02(0xc3)](_0x49e538,_0x3248ce);const _0xae73a2=await this[_0x4fba02(0xbf)]['shouldFailFast']();_0x389714[_0x4fba02(0xba)](this[_0x4fba02(0xca)][_0x4fba02(0x76)],![])&&_0x389714[_0x4fba02(0xc8)](_0xae73a2,!![])&&(this[_0x4fba02(0xca)]['failFastActive']=!![]);}catch(_0x6a5394){logger[_0x4fba02(0xb8)](_0x389714['DCVsg'],_0x6a5394['message']);}_0x389714[_0x4fba02(0xba)](_0x19e262,_0x389714[_0x4fba02(0x6e)])&&(this[_0x4fba02(0xbf)]&&this[_0x4fba02(0xbf)][_0x4fba02(0x80)]());}}function a18_0x3792(){const _0x13a369=['VzHQF','isTrue','../../../helpers/testhub/utils','38430vNXiQd','isNotUndefined','browserStackGlobals','BSTACK_JEST_TEST_ENV','failFastActive','../../../helpers/test-orchestration/failfastManager','DZwWF','3|5|2|7|1|0|8|6|9|4','../../../helpers/logger','quit','OifXf','7695185hzRaIo','join','testEnvironmentOptions','cleanup','JEST','test_start','requireSeleniumWebdriver','qjOGm','GDcCf','jest-environment-node','info','browserstackPlatformIndex','shouldProcessEventForTesthub','Error\x20in\x20fail-fast\x20test_done\x20handler:','percyCaptureMode','8WSrLVv','retries__','browserstackAgentV2','skipSessionStatus','handleTestEvent','ZXGrv','wrTQh','__webdriver','Builder','DCVsg','split','capability','\x20>\x20','getTestEnvironment','sessionNameProvided','test','failFastOptions','skip','23697369rqRzdo','resolveTestEnvironment','requireModule','projectName','name','RMoqz','default','962052nkEeme','BQlnY','__esModule','cnsjG','mfaUn','sgApq','__skipSessionStatus','configuration','cwd','ThXAa','lAPzC','riQTZ','1162DnlyVE','2936469bxepwd','KVpJJ','207699STNWwG','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','kIcTz','BSTACK_DELTA','debug','__timeout','FRRRm','node','browserstackPercyBestPlatform','projectConfig','teardown','failFast','LpOkt','nvrlB','framework','onTestDone','__drivers','jest-config','timeout__','nestedKeyValue','hCjTZ','cleanupDrivers','global','776238wGKfwN','modifyCommand','shutdown','percy','registerListeners','testPath','skipSessionName','BXNMF','jest-resolve','mode','../../../helpers/test-observability/requestQueueHandler','errors','driver','getInstance','SUiex','vPpqJ'];a18_0x3792=function(){return _0x13a369;};return a18_0x3792();}module['exports']=CustomEnvironment;