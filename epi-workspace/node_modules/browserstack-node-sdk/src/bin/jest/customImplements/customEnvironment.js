const a18_0x3cbb50=a18_0x4df5;(function(_0x672881,_0x49302c){const _0x4e14f3=a18_0x4df5,_0x1419af=_0x672881();while(!![]){try{const _0xbb515f=parseInt(_0x4e14f3(0x139))/0x1+-parseInt(_0x4e14f3(0x11d))/0x2+parseInt(_0x4e14f3(0x10f))/0x3+-parseInt(_0x4e14f3(0xe7))/0x4*(-parseInt(_0x4e14f3(0x138))/0x5)+parseInt(_0x4e14f3(0xf7))/0x6+-parseInt(_0x4e14f3(0x112))/0x7*(-parseInt(_0x4e14f3(0xe8))/0x8)+-parseInt(_0x4e14f3(0xea))/0x9*(parseInt(_0x4e14f3(0xee))/0xa);if(_0xbb515f===_0x49302c)break;else _0x1419af['push'](_0x1419af['shift']());}catch(_0x1b9d56){_0x1419af['push'](_0x1419af['shift']());}}}(a18_0xc700,0x4851b));const helper=require(a18_0x3cbb50(0x142)),constants=require(a18_0x3cbb50(0x132)),{isTestObservabilitySession}=require(a18_0x3cbb50(0xde)),RequestQueueHandler=require(a18_0x3cbb50(0x13d)),ObservabilityReporter=require(a18_0x3cbb50(0x102)),testhubUtils=require(a18_0x3cbb50(0xe2)),logger=require('../../../helpers/logger')[a18_0x3cbb50(0x140)],getTestEnvironment=((()=>{const _0xdfe394=a18_0x3cbb50,_0x4ac87e={};_0x4ac87e[_0xdfe394(0x10b)]=_0xdfe394(0xe4),_0x4ac87e[_0xdfe394(0x128)]=_0xdfe394(0x118);const _0x5c18d3=_0x4ac87e;try{const _0x488ccb=helper[_0xdfe394(0x10c)](_0x5c18d3[_0xdfe394(0x10b)]);if(_0x488ccb['resolveTestEnvironment'])return _0x488ccb[_0xdfe394(0xed)];const _0x31693f=helper[_0xdfe394(0x10c)](_0x5c18d3[_0xdfe394(0x128)]);if(_0x31693f['getTestEnvironment'])return _0x31693f[_0xdfe394(0x147)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x526001=a18_0x3cbb50,_0x567a7b={'LONLT':function(_0x14b284,_0x57147c){return _0x14b284(_0x57147c);},'Mhnjg':'node','RnAtr':function(_0x1424b6,_0x5ef371){return _0x1424b6(_0x5ef371);},'Wulsr':_0x526001(0x107)},_0x532c88=_0x567a7b['LONLT'](getTestEnvironment,{'rootDir':process['cwd'](),'testEnvironment':process[_0x526001(0xe6)][_0x526001(0xf5)]||_0x567a7b[_0x526001(0x110)]});if(!_0x532c88)return _0x567a7b['RnAtr'](_interopRequireDefault,helper['requireModule'](_0x567a7b['Wulsr']));return _0x567a7b['LONLT'](_interopRequireDefault,helper['requireModule'](_0x532c88));})()),_seleniumWebdriver2=((()=>{const _0x76303c=a18_0x3cbb50,_0x40d5a9={'DTmPu':function(_0x21b91c,_0xc1328f){return _0x21b91c(_0xc1328f);}};try{const _0x56fa87=helper['requireSeleniumWebdriver']();return helper[_0x76303c(0xe1)](),_0x40d5a9[_0x76303c(0xe9)](_interopRequireDefault,_0x56fa87);}catch{return null;}})());function _interopRequireDefault(_0x383aea){return _0x383aea&&_0x383aea['__esModule']?_0x383aea:{'default':_0x383aea};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a18_0x3cbb50(0x141)][a18_0x3cbb50(0x14b)]:null;class CustomEnvironment extends _jestUserEnvironment[a18_0x3cbb50(0x141)]{constructor(_0x460cf9){const _0x291745=a18_0x3cbb50,_0x117cb5={'moPZM':_0x291745(0x123),'MieIy':function(_0x4e6756,_0x1dd055){return _0x4e6756+_0x1dd055;},'gSRjH':_0x291745(0x111),'lTsPb':function(_0x37bdce,_0x15a601){return _0x37bdce(_0x15a601);},'MdjEq':_0x291745(0x13b),'pXjNe':_0x291745(0x122),'mTiLI':_0x291745(0xfd),'Vwosa':_0x291745(0x14d),'OXzHX':_0x291745(0x143),'NIJHl':_0x291745(0xf8),'KNLxg':_0x291745(0xf9),'VWQOe':_0x291745(0x137),'mOvwK':_0x291745(0x14c)};super(_0x460cf9),this[_0x291745(0x100)][_0x291745(0xf3)]=0x0,this[_0x291745(0x104)]={};!_0x460cf9[_0x291745(0x14d)]&&(_0x460cf9[_0x291745(0x14d)]={});if(helper[_0x291745(0x11a)]()){_0x460cf9[_0x291745(0x14d)]=_0x460cf9['projectConfig']?_0x460cf9['projectConfig']['testEnvironmentOptions']:_0x460cf9[_0x291745(0x14d)],this[_0x291745(0x124)]=new _seleniumWebdriver2[(_0x291745(0x141))][(_0x291745(0x14b))](),this[_0x291745(0x149)]=_0x460cf9[_0x291745(0x145)]?_0x460cf9[_0x291745(0x145)][_0x291745(0x149)]:_0x460cf9[_0x291745(0x149)],this[_0x291745(0x100)]['__timeout']=_0x117cb5[_0x291745(0xfc)](this['configuration']['timeout__'],constants[_0x291745(0x13a)]),this[_0x291745(0xef)]=_0x460cf9[_0x291745(0x14d)][_0x291745(0x11b)];if(this['failFastOptions']){const _0x5a2d10=this[_0x291745(0x149)][_0x117cb5[_0x291745(0x136)]]?.['buildName']||'',_0x2f5dae=this[_0x291745(0x149)][_0x117cb5[_0x291745(0x136)]]?.[_0x291745(0x11c)]||'';this[_0x291745(0x11b)]=new(_0x117cb5[_0x291745(0x117)](require,_0x117cb5['MdjEq']))(this[_0x291745(0xef)],_0x5a2d10,_0x2f5dae),this['global'][_0x291745(0xf1)]=![];}helper[_0x291745(0x14a)](this['configuration']['retries__'])&&(this['global'][_0x291745(0x115)]=this[_0x291745(0x104)][_0x291745(0x144)]);}if(testhubUtils[_0x291745(0x12d)]()){const _0x5270e1=new ObservabilityReporter();_0x5270e1[_0x291745(0x10e)]();}this[_0x291745(0x100)][_0x291745(0x113)]={},this[_0x291745(0x104)]=_0x460cf9[_0x291745(0x14d)],this[_0x291745(0x104)][_0x291745(0x13e)]=constants[_0x291745(0x133)][_0x291745(0x11e)];if(_seleniumWebdriver2){const _0x53d914=_0x117cb5['pXjNe'][_0x291745(0xec)]('|');let _0x52b1d1=0x0;while(!![]){switch(_0x53d914[_0x52b1d1++]){case'0':this[_0x291745(0x100)]['__webdriver']=_0x117cb5[_0x291745(0x117)](require,_0x117cb5[_0x291745(0x114)])['browserstackAgentV2']({...this[_0x291745(0x104)],'capability':this[_0x291745(0x149)]||{}},this,testhubUtils[_0x291745(0x12d)]());continue;case'1':this[_0x291745(0x100)]['__drivers']=[];continue;case'2':this[_0x291745(0x100)][_0x291745(0xf0)]=(_0x460cf9[_0x291745(0x145)]?_0x460cf9[_0x291745(0x145)][_0x291745(0xf0)]:_0x460cf9[_0x291745(0xf0)])||0x0;continue;case'3':helper['isTrue'](this['configuration'][_0x291745(0x148)])?this[_0x291745(0x100)][_0x291745(0xf2)]=!![]:this[_0x291745(0x100)][_0x291745(0xf2)]=![];continue;case'4':this['global'][_0x291745(0xf8)]=helper[_0x291745(0x126)](_0x460cf9,[_0x117cb5[_0x291745(0x127)],_0x117cb5[_0x291745(0xff)],_0x117cb5[_0x291745(0xf6)]]);continue;case'5':this[_0x291745(0x100)]['percy']=helper[_0x291745(0x126)](_0x460cf9,[_0x117cb5[_0x291745(0x127)],_0x117cb5[_0x291745(0xff)],_0x117cb5['KNLxg']]);continue;case'6':this[_0x291745(0x100)][_0x291745(0x137)]=helper['nestedKeyValue'](_0x460cf9,[_0x117cb5['Vwosa'],_0x117cb5['OXzHX'],_0x117cb5[_0x291745(0xeb)]]);continue;case'7':this[_0x291745(0x100)][_0x291745(0x116)]=helper['isTrue'](this[_0x291745(0x104)][_0x291745(0x134)]);continue;case'8':this[_0x291745(0x100)][_0x291745(0xfe)]=async()=>{const _0x1df959=_0x291745;await this[_0x1df959(0x100)]['driver']['quit'](_0x117cb5['moPZM']);};continue;case'9':this[_0x291745(0x100)][_0x291745(0x119)]=helper[_0x291745(0x126)](this[_0x291745(0x104)],[_0x117cb5['mOvwK'],this['global'][_0x291745(0xf0)]])||{};continue;}break;}}}async[a18_0x3cbb50(0xfb)](){const _0x181b85=a18_0x3cbb50;_seleniumWebdriver2&&(await helper['cleanupDrivers'](this[_0x181b85(0x100)]['__driversArray']),this['global'][_0x181b85(0x109)][_0x181b85(0x14b)]=originalBuilder),await RequestQueueHandler[_0x181b85(0x12c)]()['shutdown']();}async[a18_0x3cbb50(0xdf)](){}async['handleTestEvent'](_0x313be6,_0x450908){const _0x3d2a79=a18_0x3cbb50,_0x3fa5c9={};_0x3fa5c9[_0x3d2a79(0x12a)]=function(_0x5005aa,_0x3084b1){return _0x5005aa===_0x3084b1;},_0x3fa5c9[_0x3d2a79(0xe0)]=_0x3d2a79(0xf4),_0x3fa5c9[_0x3d2a79(0x12e)]=function(_0x2e86c2,_0x196b9e){return _0x2e86c2===_0x196b9e;},_0x3fa5c9[_0x3d2a79(0x11f)]=_0x3d2a79(0x108),_0x3fa5c9[_0x3d2a79(0x13f)]=function(_0x230e4e,_0x3eee0a){return _0x230e4e===_0x3eee0a;},_0x3fa5c9[_0x3d2a79(0x146)]=_0x3d2a79(0x125),_0x3fa5c9[_0x3d2a79(0x12b)]=_0x3d2a79(0x13c),_0x3fa5c9[_0x3d2a79(0x121)]=function(_0x4d164b,_0x56aa2b){return _0x4d164b===_0x56aa2b;},_0x3fa5c9[_0x3d2a79(0x106)]=function(_0x340bf6,_0x5ebd0a){return _0x340bf6===_0x5ebd0a;},_0x3fa5c9[_0x3d2a79(0x129)]='Error\x20in\x20fail-fast\x20test_done\x20handler:',_0x3fa5c9['jHgkj']=_0x3d2a79(0xfb);const _0x5959b6=_0x3fa5c9,{name:_0x297c60}=_0x313be6;if(_0x5959b6['FHBAc'](_0x297c60,_0x5959b6[_0x3d2a79(0xe0)])){this['global'][_0x3d2a79(0xe5)]=_0x313be6[_0x3d2a79(0x103)];if(_0x5959b6[_0x3d2a79(0x12e)](this['global'][_0x3d2a79(0xf1)],!![])){const _0xfc95cf=_0x313be6[_0x3d2a79(0x103)]['name'];logger[_0x3d2a79(0x10d)](_0x3d2a79(0xe3)+_0xfc95cf),_0x313be6[_0x3d2a79(0x103)][_0x3d2a79(0x130)]=_0x5959b6[_0x3d2a79(0x11f)];}}if(this[_0x3d2a79(0x11b)]&&_0x5959b6[_0x3d2a79(0x13f)](_0x297c60,_0x5959b6[_0x3d2a79(0x146)]))try{const _0x36ca19=_0x313be6[_0x3d2a79(0x103)][_0x3d2a79(0x135)][_0x3d2a79(0x101)](_0x5959b6[_0x3d2a79(0x12b)]),_0x58b8d0=_0x313be6[_0x3d2a79(0x103)][_0x3d2a79(0x105)];await this['failFast'][_0x3d2a79(0x120)](_0x36ca19,_0x58b8d0);const _0x2f3fc6=await this[_0x3d2a79(0x11b)][_0x3d2a79(0x131)]();_0x5959b6[_0x3d2a79(0x121)](this['global']['failFastActive'],![])&&_0x5959b6['fpFXx'](_0x2f3fc6,!![])&&(this['global'][_0x3d2a79(0xf1)]=!![]);}catch(_0x354340){logger[_0x3d2a79(0x12f)](_0x5959b6[_0x3d2a79(0x129)],_0x354340[_0x3d2a79(0xfa)]);}_0x5959b6['DNUgE'](_0x297c60,_0x5959b6[_0x3d2a79(0x10a)])&&(this[_0x3d2a79(0x11b)]&&this[_0x3d2a79(0x11b)][_0x3d2a79(0xfe)]());}}function a18_0xc700(){const _0x781257=['__platformCaps','isBrowserstackInfra','failFast','projectName','808868tcMqwF','JEST','PxFis','onTestDone','AWuuE','1|0|2|4|5|6|9|3|7|8','quit','builder','test_done','nestedKeyValue','Vwosa','FYRmp','tgQKY','FHBAc','BzkZq','getInstance','shouldProcessEventForTesthub','hqpuT','debug','mode','shouldFailFast','../../utils/constants','FRAMEWORKS','skipSessionStatus','testPath','gSRjH','percyCaptureMode','235fpITyB','518390KQtUeV','BSTACK_DELTA','../../../helpers/test-orchestration/failfastManager','\x20>\x20','../../../helpers/test-observability/requestQueueHandler','framework','DNUgE','winstonLogger','default','../../../helpers/helper','browserStackPercyOptions','retries__','projectConfig','akREe','getTestEnvironment','skipSessionName','capability','isNotUndefined','Builder','platformCaps','testEnvironmentOptions','../../../helpers/test-observability/utils','setup','Jqvzw','modifyCommand','../../../helpers/testhub/utils','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','jest-resolve','testContext','env','16532LnImKH','296HJWSYg','DTmPu','918lrPquD','VWQOe','split','resolveTestEnvironment','118130QMplHI','failFastOptions','browserstackPlatformIndex','failFastActive','sessionNameProvided','__timeout','test_start','BSTACK_JEST_TEST_ENV','NIJHl','3378558RfMDXy','browserstackPercyBestPlatform','percy','message','teardown','MieIy','../../../index','cleanup','OXzHX','global','join','../test-observability/obsReporter','test','configuration','errors','fpFXx','jest-environment-node','skip','__webdriver','jHgkj','bwwxI','requireModule','info','registerListeners','1689624BJaUWQ','Mhnjg','bstack:options','12607dBqgmd','browserStackGlobals','mTiLI','__jestRetries','__skipSessionStatus','lTsPb','jest-config'];a18_0xc700=function(){return _0x781257;};return a18_0xc700();}function a18_0x4df5(_0x17fc93,_0x57a693){const _0xc7007=a18_0xc700();return a18_0x4df5=function(_0x4df59c,_0x503fa5){_0x4df59c=_0x4df59c-0xde;let _0x6e6191=_0xc7007[_0x4df59c];return _0x6e6191;},a18_0x4df5(_0x17fc93,_0x57a693);}module['exports']=CustomEnvironment;