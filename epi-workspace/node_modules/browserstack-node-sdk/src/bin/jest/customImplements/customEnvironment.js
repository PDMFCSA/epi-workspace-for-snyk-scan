const a18_0x24e1b1=a18_0x4c01;function a18_0x2f32(){const _0x5f3e0c=['retries__','driver','cUuTh','ZycJh','lUPCo','projectConfig','RSeFH','eNBJd','__jestRetries','gRrVS','split','onTestDone','../../../helpers/testhub/utils','isNotUndefined','failFast','getInstance','errors','Lobxn','__driversArray','9FwFOLy','jest-environment-node','../../../helpers/test-observability/utils','../../../helpers/test-observability/requestQueueHandler','../../../index','framework','browserStackGlobals','shouldFailFast','FRAMEWORKS','mode','../../utils/constants','global','browserstackPercyBestPlatform','test','cwd','HbIOQ','__webdriver','BIlGa','failFastOptions','bnqAB','percy','wcpEd','dcapF','browserstackAgentV2','builder','shouldProcessEventForTesthub','jest-resolve','8596pAqyuJ','cleanupDrivers','skipSessionStatus','skipSessionName','join','shutdown','YtZAI','default','jest-config','name','debug','WCPRF','3955470VcocQP','UbdUi','fkXKA','node','3959040AlaJDD','capability','RlyCA','requireModule','5QemOEs','Builder','nestedKeyValue','testPath','JwdSO','isTrue','cqtYu','xRKcw','DBljj','__timeout','registerListeners','bstack:options','xpfIr','failFastActive','uNDNp','1108596lhIYRP','UnFuv','ZIDsv','requireSeleniumWebdriver','../test-observability/obsReporter','2893304vqXCcv','env','percyCaptureMode','1381238rujvXf','ToXVY','abFwK','cleanup','teardown','RCHrz','resolveTestEnvironment','1016cpcfaC','sessionNameProvided','Error\x20in\x20fail-fast\x20test_done\x20handler:','quit','test_start','setup','winstonLogger','__platformCaps','../../../helpers/logger','configuration','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','../../../helpers/test-orchestration/failfastManager','browserstackPlatformIndex','timeout__','getTestEnvironment','testEnvironmentOptions','message','projectName','__drivers','281097Djhwei'];a18_0x2f32=function(){return _0x5f3e0c;};return a18_0x2f32();}(function(_0x3f91a7,_0x444fc6){const _0x3883e6=a18_0x4c01,_0x374897=_0x3f91a7();while(!![]){try{const _0x569315=parseInt(_0x3883e6(0x106))/0x1+parseInt(_0x3883e6(0x160))/0x2+parseInt(_0x3883e6(0x158))/0x3+-parseInt(_0x3883e6(0x15d))/0x4*(parseInt(_0x3883e6(0x149))/0x5)+-parseInt(_0x3883e6(0x145))/0x6+parseInt(_0x3883e6(0x135))/0x7*(parseInt(_0x3883e6(0x167))/0x8)+-parseInt(_0x3883e6(0x11a))/0x9*(-parseInt(_0x3883e6(0x141))/0xa);if(_0x569315===_0x444fc6)break;else _0x374897['push'](_0x374897['shift']());}catch(_0x58a1a7){_0x374897['push'](_0x374897['shift']());}}}(a18_0x2f32,0x7c691));const helper=require('../../../helpers/helper'),constants=require(a18_0x24e1b1(0x124)),{isTestObservabilitySession}=require(a18_0x24e1b1(0x11c)),RequestQueueHandler=require(a18_0x24e1b1(0x11d)),ObservabilityReporter=require(a18_0x24e1b1(0x15c)),testhubUtils=require(a18_0x24e1b1(0x113)),logger=require(a18_0x24e1b1(0x16f))[a18_0x24e1b1(0x16d)],getTestEnvironment=((()=>{const _0x213c3a=a18_0x24e1b1,_0xe81380={};_0xe81380[_0x213c3a(0x14d)]=_0x213c3a(0x134),_0xe81380[_0x213c3a(0x10a)]=_0x213c3a(0x13d);const _0x5025f4=_0xe81380;try{const _0x297ab9=helper[_0x213c3a(0x148)](_0x5025f4[_0x213c3a(0x14d)]);if(_0x297ab9[_0x213c3a(0x166)])return _0x297ab9[_0x213c3a(0x166)];const _0x339ce7=helper[_0x213c3a(0x148)](_0x5025f4[_0x213c3a(0x10a)]);if(_0x339ce7[_0x213c3a(0x175)])return _0x339ce7[_0x213c3a(0x175)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x55bcba=a18_0x24e1b1,_0x123221={'cqtYu':function(_0x11334d,_0x22ed35){return _0x11334d(_0x22ed35);},'abFwK':_0x55bcba(0x144),'xRKcw':function(_0x35b2b6,_0x5b2475){return _0x35b2b6(_0x5b2475);},'wcpEd':_0x55bcba(0x11b)},_0x25b79e=_0x123221[_0x55bcba(0x14f)](getTestEnvironment,{'rootDir':process[_0x55bcba(0x128)](),'testEnvironment':process[_0x55bcba(0x15e)]['BSTACK_JEST_TEST_ENV']||_0x123221[_0x55bcba(0x162)]});if(!_0x25b79e)return _0x123221[_0x55bcba(0x150)](_interopRequireDefault,helper['requireModule'](_0x123221[_0x55bcba(0x12f)]));return _0x123221[_0x55bcba(0x14f)](_interopRequireDefault,helper[_0x55bcba(0x148)](_0x25b79e));})()),_seleniumWebdriver2=((()=>{const _0xcaab5e=a18_0x24e1b1,_0x513e11={'ToXVY':function(_0xe0d6ad,_0x15b06d){return _0xe0d6ad(_0x15b06d);}};try{const _0x2c6ebf=helper[_0xcaab5e(0x15b)]();return helper['modifyCommand'](),_0x513e11[_0xcaab5e(0x161)](_interopRequireDefault,_0x2c6ebf);}catch{return null;}})());function _interopRequireDefault(_0x16841b){return _0x16841b&&_0x16841b['__esModule']?_0x16841b:{'default':_0x16841b};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a18_0x24e1b1(0x13c)]['Builder']:null;function a18_0x4c01(_0xb22362,_0x314a7a){const _0x2f321f=a18_0x2f32();return a18_0x4c01=function(_0x4c01c9,_0x45dca4){_0x4c01c9=_0x4c01c9-0x104;let _0x5c0e41=_0x2f321f[_0x4c01c9];return _0x5c0e41;},a18_0x4c01(_0xb22362,_0x314a7a);}class CustomEnvironment extends _jestUserEnvironment['default']{constructor(_0x870b75){const _0x566009=a18_0x24e1b1,_0x245cf0={'eNBJd':_0x566009(0x16a),'MnASP':function(_0x13dd9b,_0x59ea62){return _0x13dd9b+_0x59ea62;},'gRrVS':_0x566009(0x154),'RCHrz':function(_0x5ec29d,_0x5b4c60){return _0x5ec29d(_0x5b4c60);},'pKzst':_0x566009(0x172),'fkXKA':'9|4|2|3|1|7|6|5|8|0','WCPRF':'testEnvironmentOptions','UbdUi':'browserStackPercyOptions','HbIOQ':_0x566009(0x12e),'WoijO':_0x566009(0x126),'lUPCo':function(_0x3e0911,_0x2fa512){return _0x3e0911(_0x2fa512);},'RlyCA':_0x566009(0x11e),'DtOtY':'platformCaps','RSeFH':_0x566009(0x15f)};super(_0x870b75),this['global'][_0x566009(0x152)]=0x0,this[_0x566009(0x170)]={};!_0x870b75[_0x566009(0x176)]&&(_0x870b75[_0x566009(0x176)]={});if(helper['isBrowserstackInfra']()){_0x870b75[_0x566009(0x176)]=_0x870b75[_0x566009(0x10c)]?_0x870b75['projectConfig'][_0x566009(0x176)]:_0x870b75[_0x566009(0x176)],this[_0x566009(0x132)]=new _seleniumWebdriver2[(_0x566009(0x13c))]['Builder'](),this[_0x566009(0x146)]=_0x870b75[_0x566009(0x10c)]?_0x870b75['projectConfig'][_0x566009(0x146)]:_0x870b75[_0x566009(0x146)],this['global'][_0x566009(0x152)]=_0x245cf0['MnASP'](this[_0x566009(0x170)][_0x566009(0x174)],constants['BSTACK_DELTA']),this[_0x566009(0x12c)]=_0x870b75[_0x566009(0x176)]['failFast'];if(this['failFastOptions']){const _0x5deee2=this[_0x566009(0x146)][_0x245cf0[_0x566009(0x110)]]?.['buildName']||'',_0x3576d0=this[_0x566009(0x146)][_0x245cf0[_0x566009(0x110)]]?.[_0x566009(0x104)]||'';this[_0x566009(0x115)]=new(_0x245cf0[_0x566009(0x165)](require,_0x245cf0['pKzst']))(this['failFastOptions'],_0x5deee2,_0x3576d0),this[_0x566009(0x125)]['failFastActive']=![];}helper[_0x566009(0x114)](this[_0x566009(0x170)][_0x566009(0x107)])&&(this[_0x566009(0x125)][_0x566009(0x10f)]=this['configuration'][_0x566009(0x107)]);}if(testhubUtils[_0x566009(0x133)]()){const _0x131a97=new ObservabilityReporter();_0x131a97[_0x566009(0x153)]();}this['global'][_0x566009(0x120)]={},this['configuration']=_0x870b75[_0x566009(0x176)],this['configuration'][_0x566009(0x11f)]=constants[_0x566009(0x122)]['JEST'];if(_seleniumWebdriver2){const _0x13d408=_0x245cf0[_0x566009(0x143)][_0x566009(0x111)]('|');let _0x3b1e16=0x0;while(!![]){switch(_0x13d408[_0x3b1e16++]){case'0':this[_0x566009(0x125)][_0x566009(0x163)]=async()=>{const _0x3d4d22=_0x566009;await this[_0x3d4d22(0x125)][_0x3d4d22(0x108)][_0x3d4d22(0x16a)](_0x245cf0[_0x3d4d22(0x10e)]);};continue;case'1':this['global']['percy']=helper[_0x566009(0x14b)](_0x870b75,[_0x245cf0[_0x566009(0x140)],_0x245cf0['UbdUi'],_0x245cf0[_0x566009(0x129)]]);continue;case'2':this[_0x566009(0x125)][_0x566009(0x173)]=(_0x870b75['projectConfig']?_0x870b75[_0x566009(0x10c)][_0x566009(0x173)]:_0x870b75['browserstackPlatformIndex'])||0x0;continue;case'3':this[_0x566009(0x125)]['browserstackPercyBestPlatform']=helper['nestedKeyValue'](_0x870b75,[_0x245cf0[_0x566009(0x140)],_0x245cf0[_0x566009(0x142)],_0x245cf0['WoijO']]);continue;case'4':this[_0x566009(0x125)][_0x566009(0x12a)]=_0x245cf0[_0x566009(0x10b)](require,_0x245cf0[_0x566009(0x147)])[_0x566009(0x131)]({...this[_0x566009(0x170)],'capability':this['capability']||{}},this,testhubUtils[_0x566009(0x133)]());continue;case'5':helper[_0x566009(0x14e)](this[_0x566009(0x170)][_0x566009(0x138)])?this[_0x566009(0x125)][_0x566009(0x168)]=!![]:this[_0x566009(0x125)][_0x566009(0x168)]=![];continue;case'6':this['global'][_0x566009(0x16e)]=helper[_0x566009(0x14b)](this['configuration'],[_0x245cf0['DtOtY'],this[_0x566009(0x125)][_0x566009(0x173)]])||{};continue;case'7':this[_0x566009(0x125)][_0x566009(0x15f)]=helper[_0x566009(0x14b)](_0x870b75,[_0x245cf0[_0x566009(0x140)],_0x245cf0['UbdUi'],_0x245cf0[_0x566009(0x10d)]]);continue;case'8':this[_0x566009(0x125)]['__skipSessionStatus']=helper['isTrue'](this[_0x566009(0x170)][_0x566009(0x137)]);continue;case'9':this[_0x566009(0x125)][_0x566009(0x105)]=[];continue;}break;}}}async[a18_0x24e1b1(0x164)](){const _0x5e1304=a18_0x24e1b1;_seleniumWebdriver2&&(await helper[_0x5e1304(0x136)](this[_0x5e1304(0x125)][_0x5e1304(0x119)]),this[_0x5e1304(0x125)]['__webdriver'][_0x5e1304(0x14a)]=originalBuilder),await RequestQueueHandler[_0x5e1304(0x116)]()[_0x5e1304(0x13a)]();}async[a18_0x24e1b1(0x16c)](){}async['handleTestEvent'](_0x2c836c,_0x47d60c){const _0x5bd2a2=a18_0x24e1b1,_0x2461b2={};_0x2461b2[_0x5bd2a2(0x151)]=function(_0x1bfa60,_0x548b1c){return _0x1bfa60===_0x548b1c;},_0x2461b2[_0x5bd2a2(0x159)]=_0x5bd2a2(0x16b),_0x2461b2['ZIDsv']=function(_0xd18026,_0x33526c){return _0xd18026===_0x33526c;},_0x2461b2['Lobxn']='skip',_0x2461b2[_0x5bd2a2(0x12d)]='test_done',_0x2461b2[_0x5bd2a2(0x157)]='\x20>\x20',_0x2461b2[_0x5bd2a2(0x13b)]=function(_0x54933a,_0x2c6d53){return _0x54933a===_0x2c6d53;},_0x2461b2[_0x5bd2a2(0x12b)]=function(_0x566286,_0x229ee1){return _0x566286===_0x229ee1;},_0x2461b2[_0x5bd2a2(0x155)]=_0x5bd2a2(0x169),_0x2461b2[_0x5bd2a2(0x109)]=function(_0x5ee344,_0x5dc2b9){return _0x5ee344===_0x5dc2b9;},_0x2461b2[_0x5bd2a2(0x130)]=_0x5bd2a2(0x164);const _0x4ffb9e=_0x2461b2,{name:_0x57c156}=_0x2c836c;if(_0x4ffb9e[_0x5bd2a2(0x151)](_0x57c156,_0x4ffb9e[_0x5bd2a2(0x159)])){this['global']['testContext']=_0x2c836c['test'];if(_0x4ffb9e[_0x5bd2a2(0x15a)](this[_0x5bd2a2(0x125)][_0x5bd2a2(0x156)],!![])){const _0x34231b=_0x2c836c[_0x5bd2a2(0x127)][_0x5bd2a2(0x13e)];logger['info'](_0x5bd2a2(0x171)+_0x34231b),_0x2c836c[_0x5bd2a2(0x127)][_0x5bd2a2(0x123)]=_0x4ffb9e[_0x5bd2a2(0x118)];}}if(this['failFast']&&_0x4ffb9e[_0x5bd2a2(0x15a)](_0x57c156,_0x4ffb9e[_0x5bd2a2(0x12d)]))try{const _0x56276e=_0x2c836c[_0x5bd2a2(0x127)][_0x5bd2a2(0x14c)][_0x5bd2a2(0x139)](_0x4ffb9e[_0x5bd2a2(0x157)]),_0x21c925=_0x2c836c[_0x5bd2a2(0x127)][_0x5bd2a2(0x117)];await this[_0x5bd2a2(0x115)][_0x5bd2a2(0x112)](_0x56276e,_0x21c925);const _0x2f1f98=await this['failFast'][_0x5bd2a2(0x121)]();_0x4ffb9e['YtZAI'](this['global']['failFastActive'],![])&&_0x4ffb9e['BIlGa'](_0x2f1f98,!![])&&(this[_0x5bd2a2(0x125)][_0x5bd2a2(0x156)]=!![]);}catch(_0x3fa4b6){logger[_0x5bd2a2(0x13f)](_0x4ffb9e[_0x5bd2a2(0x155)],_0x3fa4b6[_0x5bd2a2(0x177)]);}_0x4ffb9e[_0x5bd2a2(0x109)](_0x57c156,_0x4ffb9e[_0x5bd2a2(0x130)])&&(this['failFast']&&this[_0x5bd2a2(0x115)][_0x5bd2a2(0x163)]());}}module['exports']=CustomEnvironment;