#!/usr/bin/env node
'use strict';const a14_0x4426d8=a14_0x35fe;(function(_0x4952c8,_0x1f89ad){const _0x1d72e7=a14_0x35fe,_0x3e3772=_0x4952c8();while(!![]){try{const _0x436228=parseInt(_0x1d72e7(0x22c))/0x1*(-parseInt(_0x1d72e7(0x206))/0x2)+parseInt(_0x1d72e7(0x291))/0x3*(parseInt(_0x1d72e7(0x234))/0x4)+parseInt(_0x1d72e7(0x1cd))/0x5*(parseInt(_0x1d72e7(0x22a))/0x6)+-parseInt(_0x1d72e7(0x1c8))/0x7*(parseInt(_0x1d72e7(0x28b))/0x8)+-parseInt(_0x1d72e7(0x28d))/0x9*(parseInt(_0x1d72e7(0x1d5))/0xa)+parseInt(_0x1d72e7(0x260))/0xb+parseInt(_0x1d72e7(0x229))/0xc*(-parseInt(_0x1d72e7(0x25a))/0xd);if(_0x436228===_0x1f89ad)break;else _0x3e3772['push'](_0x3e3772['shift']());}catch(_0x17ee6e){_0x3e3772['push'](_0x3e3772['shift']());}}}(a14_0x1248,0x33e6b));const fs=require('fs'),path=require('path'),util=require('util'),{spawn}=require(a14_0x4426d8(0x24b)),logger=require(a14_0x4426d8(0x1ed))[a14_0x4426d8(0x1fa)],{default:BrowserStackSetup}=require(a14_0x4426d8(0x1de)),helper=require('../../helpers/helper'),utilities=require(a14_0x4426d8(0x204)),constants=require(a14_0x4426d8(0x257)),accessibilityHelper=require(a14_0x4426d8(0x202)),{updateTestRerunConfig}=require('./test-observability/helper'),testOpsHelper=require(a14_0x4426d8(0x28e)),{debug}=require('../../helpers/test-observability/utils'),TestDetails=require('./test-observability/test-details'),{getPercyOptions}=require(a14_0x4426d8(0x214)),TestHubHandler=require(a14_0x4426d8(0x20d)),testhubUtils=require(a14_0x4426d8(0x21e)),{FRAMEWORKS}=require(a14_0x4426d8(0x1d3)),PerformanceTester=require(a14_0x4426d8(0x22d)),PerformanceEvents=require('../../helpers/performance/constants')[a14_0x4426d8(0x22f)],TestOrchestrationHandler=require(a14_0x4426d8(0x268)),BrowserstackCLI=require(a14_0x4426d8(0x298)),{checkPwandBootstrapCli}=require('../../helpers/playwright-helper'),ClientTroubleShootingService=require(a14_0x4426d8(0x266)),{checkAccessibilityPlatformConfig}=require(a14_0x4426d8(0x202)),getUserJestConfigs=async(_0x4e0af3,_0x129c9d)=>{const _0x216c54=a14_0x4426d8,_0xee2997={'rBcRB':_0x216c54(0x219),'yfCQU':'jest-config','HCQcv':function(_0x9f2bdc,_0x1765fd){return _0x9f2bdc||_0x1765fd;},'RXxIh':function(_0x1f1474,_0x11e801){return _0x1f1474(_0x11e801);},'qfdnl':'package.json','aaCjq':'Getting\x20your\x20jest\x20configs\x20from\x20package.json','yhOXP':'mjs','GPAjV':_0x216c54(0x262),'KIqNC':'json'},_0x4b0034=helper[_0x216c54(0x203)](_0xee2997[_0x216c54(0x1cf)],_0xee2997['yfCQU']),_0x292e82=_0x129c9d[_0x216c54(0x280)](_0x2c769a=>_0x2c769a===_0x216c54(0x279));if(!helper['isUndefined'](_0x4e0af3[_0x216c54(0x239)])){logger[_0x216c54(0x275)]('Getting\x20your\x20jest\x20configs\x20from\x20'+_0x4e0af3[_0x216c54(0x239)]),process['env'][_0x216c54(0x272)]=_0x4e0af3[_0x216c54(0x239)];const _0x2c118a=await(0x0,_0x4b0034[_0x216c54(0x20c)])(path[_0x216c54(0x1d0)](_0x4e0af3[_0x216c54(0x239)]));return _0x129c9d[_0x216c54(0x243)](_0x292e82,0x2),_0xee2997[_0x216c54(0x254)](_0x2c118a,{});}const _0x40d130=_0xee2997[_0x216c54(0x297)](require,path[_0x216c54(0x27f)](process[_0x216c54(0x21b)](),_0xee2997[_0x216c54(0x23f)]));if(_0x40d130[_0x216c54(0x220)])return logger[_0x216c54(0x275)](_0xee2997['aaCjq']),_0x40d130[_0x216c54(0x220)];const _0x369119=['js',_0xee2997['yhOXP'],_0xee2997[_0x216c54(0x1f4)],_0xee2997[_0x216c54(0x29a)],'ts'];for(const _0x5ff20e of _0x369119){const _0x171275=path['join'](process[_0x216c54(0x21b)](),'jest.config.'+_0x5ff20e);if(fs['existsSync'](_0x171275)){process['env'][_0x216c54(0x272)]=_0x171275;const _0x1dea2d=await(0x0,_0x4b0034[_0x216c54(0x20c)])(_0x171275);return _0x1dea2d;}}return{};},getSerial=(_0x574215,_0x733f5b)=>{const _0x3aa871=a14_0x4426d8,_0x629228={};_0x629228[_0x3aa871(0x1db)]='true',_0x629228[_0x3aa871(0x1bf)]=function(_0x35075f,_0x23661c){return _0x35075f>_0x23661c;},_0x629228[_0x3aa871(0x25f)]=function(_0x7ec63d,_0x502372){return _0x7ec63d>_0x502372;},_0x629228[_0x3aa871(0x218)]=_0x3aa871(0x283);const _0x3da420=_0x629228;let _0x1d5d02=_0x3da420[_0x3aa871(0x1db)];return _0x3da420[_0x3aa871(0x1bf)](_0x574215[_0x3aa871(0x251)],0x1)&&(!_0x733f5b[_0x3aa871(0x26a)]&&(helper[_0x3aa871(0x1c4)](_0x733f5b[_0x3aa871(0x1e2)])||_0x3da420[_0x3aa871(0x25f)](_0x733f5b[_0x3aa871(0x1e2)],0x1)))&&(_0x1d5d02=_0x3da420[_0x3aa871(0x218)]),_0x1d5d02;},getMaxWorkers=(_0x5f08c3,_0x542ee7,_0x5d7101)=>{const _0x1886c4=a14_0x4426d8,_0x5d93ac={'Vcngc':function(_0x2e0745,_0xabbfd9){return _0x2e0745(_0xabbfd9);}};let _0x28ccbe=0x1;if(!helper[_0x1886c4(0x1c4)](_0x542ee7[_0x1886c4(0x1ff)]))_0x28ccbe=_0x5d93ac[_0x1886c4(0x20a)](parseInt,_0x542ee7[_0x1886c4(0x1ff)]);else{if(!helper[_0x1886c4(0x1c4)](_0x5f08c3[_0x1886c4(0x1e2)]))_0x28ccbe=_0x5f08c3['maxWorkers'];else!helper['isUndefined'](_0x5d7101[_0x1886c4(0x1e2)])&&(_0x28ccbe=_0x5d7101['maxWorkers']);}return _0x28ccbe;};async function run(_0x293133,_0x1f4c14,_0x50bb1e){const _0x566f94=a14_0x4426d8,_0x40fe59={'pbFKY':'error\x20removing\x20tcg\x20config\x20file','Cwscz':'jest','bhLfG':function(_0x427706,_0x192351){return _0x427706(_0x192351);},'bXQBV':_0x566f94(0x226),'vgynZ':function(_0x19462b,_0x3eb18a,_0x46299f,_0x132ae0){return _0x19462b(_0x3eb18a,_0x46299f,_0x132ae0);},'wrYIE':function(_0x4d8161,_0x2d9d87){return _0x4d8161!=_0x2d9d87;},'WYscs':'true','rdEKp':function(_0x7e7e96,_0x455757,_0x3e27d8){return _0x7e7e96(_0x455757,_0x3e27d8);},'XEthy':_0x566f94(0x28a),'XxGvX':function(_0x2f6372,_0x2af6b6){return _0x2f6372(_0x2af6b6);},'HVnNj':_0x566f94(0x283),'zkHas':function(_0x1e3412,_0x55fcb7,_0x55296f){return _0x1e3412(_0x55fcb7,_0x55296f);},'JSoJt':function(_0x3e7efd,_0x14cad0){return _0x3e7efd*_0x14cad0;},'npNcD':function(_0xde18a7,_0x26aebf){return _0xde18a7===_0x26aebf;},'xiwFA':_0x566f94(0x241),'sUrbr':_0x566f94(0x1d4),'KHSrX':'customImplements','uIrbM':_0x566f94(0x211),'TCPUA':'customTestRunner.js','nEFac':_0x566f94(0x261),'uaAHA':_0x566f94(0x23a),'fLkcr':'jest.setup.js','xFaWv':_0x566f94(0x1c7),'peKVc':_0x566f94(0x216),'McWnQ':_0x566f94(0x1d1),'SsCix':_0x566f94(0x231),'XORaP':'data-hooks.js','VlNlL':_0x566f94(0x244),'HRAGR':_0x566f94(0x1ca),'FrlYS':'skipping\x20test_before\x20setup\x20since\x20selenium\x20not\x20found','jRDNz':_0x566f94(0x228),'uJcni':'Playwright\x20detected,\x20adding\x20Jest-Playwright\x20setup','sFktQ':_0x566f94(0x1ee),'WDpcd':_0x566f94(0x1dd),'ndvBK':_0x566f94(0x20c),'Vygit':function(_0x2ef043,_0x26309e,_0x58f1ec){return _0x2ef043(_0x26309e,_0x58f1ec);},'IqDxe':_0x566f94(0x1e0),'EDWNJ':function(_0x48ad2e,_0x2fd1f1){return _0x48ad2e>_0x2fd1f1;},'XTVZj':_0x566f94(0x1f2),'SKXwO':function(_0x32f6eb,_0x4d8796,_0x57aa1a,_0x5f48f6){return _0x32f6eb(_0x4d8796,_0x57aa1a,_0x5f48f6);},'aNKQc':_0x566f94(0x265),'BETdn':'--config','XMYXn':_0x566f94(0x249),'dhwzB':_0x566f94(0x274),'gCgmZ':_0x566f94(0x1ef)},_0x3c5c85=helper[_0x566f94(0x230)](_0x40fe59['bXQBV']);global['__isPlaywrightInstalled']=!!_0x3c5c85;helper[_0x566f94(0x1e8)]()?(await _0x50bb1e[_0x566f94(0x21a)](_0x293133),await helper[_0x566f94(0x209)](_0x50bb1e[_0x566f94(0x239)])):await _0x50bb1e[_0x566f94(0x259)]();await _0x40fe59['vgynZ'](checkPwandBootstrapCli,_0x3c5c85,constants['FRAMEWORKS'][_0x566f94(0x28f)],_0x50bb1e);if(!_0x50bb1e[_0x566f94(0x239)])return;_0x40fe59[_0x566f94(0x1d8)](_0x50bb1e['config']['testObservability'],null)?process[_0x566f94(0x295)][_0x566f94(0x1f6)]=_0x50bb1e[_0x566f94(0x239)]['testObservability']:process['env'][_0x566f94(0x1f6)]=_0x40fe59[_0x566f94(0x238)];const _0x3c265c=new TestOrchestrationHandler(_0x50bb1e[_0x566f94(0x239)]),_0x470b42=await _0x40fe59[_0x566f94(0x269)](getUserJestConfigs,_0x293133,_0x1f4c14);logger[_0x566f94(0x275)](_0x40fe59[_0x566f94(0x26b)]);const _0xc80c5a=Object[_0x566f94(0x281)]({},_0x470b42);_0xc80c5a[_0x566f94(0x1da)]=Object[_0x566f94(0x281)]({},_0xc80c5a[_0x566f94(0x1da)],{'server':helper[_0x566f94(0x1d7)](_0x50bb1e[_0x566f94(0x239)]),'environment':_0x470b42[_0x566f94(0x27d)]}),_0xc80c5a[_0x566f94(0x1da)][_0x566f94(0x27c)]=_0x40fe59[_0x566f94(0x1f9)](getPercyOptions,_0x50bb1e[_0x566f94(0x239)]);const _0xba4e40=helper[_0x566f94(0x286)](_0x50bb1e[_0x566f94(0x239)]);!helper[_0x566f94(0x1c4)](_0x50bb1e[_0x566f94(0x239)][_0x566f94(0x1e7)])&&(process[_0x566f94(0x295)][_0x566f94(0x1fb)]=JSON[_0x566f94(0x1c9)](_0x50bb1e['config']['accessibilityOptions']));if(!BrowserstackCLI[_0x566f94(0x25b)]()['isRunning']()){const _0xff7a29=await TestHubHandler[_0x566f94(0x1e4)](FRAMEWORKS[_0x566f94(0x28f)],_0x50bb1e);}const _0x606ac0=helper['prepareCapabilities'](_0x50bb1e[_0x566f94(0x239)],_0xba4e40,constants['FRAMEWORKS']['JEST']);process[_0x566f94(0x295)][_0x566f94(0x27b)]=JSON['stringify'](_0x606ac0);let _0xb9e8fd=_0x50bb1e[_0x566f94(0x239)][_0x566f94(0x212)];_0xb9e8fd=_0xb9e8fd||accessibilityHelper[_0x566f94(0x200)](_0x50bb1e['config']),process[_0x566f94(0x295)][_0x566f94(0x1f1)]=_0xb9e8fd,logger[_0x566f94(0x270)](_0x566f94(0x215)+_0xb9e8fd+_0x566f94(0x250)+BrowserstackCLI[_0x566f94(0x25b)]()[_0x566f94(0x1fc)]());if(_0x3c5c85)try{const _0x4e85be=_0x40fe59[_0x566f94(0x1f9)](checkAccessibilityPlatformConfig,_0x50bb1e[_0x566f94(0x239)]);process[_0x566f94(0x295)][_0x566f94(0x24e)]=_0x4e85be?_0x40fe59['WYscs']:_0x40fe59['HVnNj'],logger[_0x566f94(0x270)](_0x566f94(0x23e)+_0x4e85be+_0x566f94(0x242)+process[_0x566f94(0x295)][_0x566f94(0x24e)]);}catch(_0x1424af){logger['debug'](_0x566f94(0x233)+util[_0x566f94(0x23c)](_0x1424af));}_0xc80c5a[_0x566f94(0x1da)][_0x566f94(0x284)]=_0x606ac0,_0xc80c5a['testEnvironmentOptions']['serial__']=_0x40fe59['zkHas'](getSerial,_0x606ac0,_0x293133),_0xc80c5a['testEnvironmentOptions'][_0x566f94(0x237)]=_0x40fe59[_0x566f94(0x247)](getMaxWorkers,_0x293133,_0x50bb1e[_0x566f94(0x239)],_0x470b42),_0xc80c5a[_0x566f94(0x1da)][_0x566f94(0x1ce)]=_0x50bb1e[_0x566f94(0x239)][_0x566f94(0x1ce)],_0xc80c5a[_0x566f94(0x1da)][_0x566f94(0x273)]=_0x40fe59[_0x566f94(0x246)](_0x293133[_0x566f94(0x227)],0x1)||0x1388,_0xc80c5a[_0x566f94(0x1da)][_0x566f94(0x282)]=_0x50bb1e['config'][_0x566f94(0x21d)]['skipSessionName'],_0xc80c5a[_0x566f94(0x1da)][_0x566f94(0x248)]=_0x50bb1e[_0x566f94(0x239)]['testContextOptions']['skipSessionStatus'],_0xc80c5a['testEnvironmentOptions'][_0x566f94(0x225)]=_0x50bb1e['config'][_0x566f94(0x223)],_0xc80c5a[_0x566f94(0x1da)][_0x566f94(0x201)]=_0x50bb1e[_0x566f94(0x239)][_0x566f94(0x201)],_0xc80c5a[_0x566f94(0x1da)]['platformCaps']=_0x50bb1e[_0x566f94(0x239)][_0x566f94(0x252)];const _0x3ef9ca=helper[_0x566f94(0x21f)](_0x50bb1e['config']);if(!helper[_0x566f94(0x22e)](_0x3ef9ca)){helper[_0x566f94(0x296)](_0x3ef9ca[_0x566f94(0x232)])&&(_0xc80c5a[_0x566f94(0x1da)][_0x566f94(0x1cc)]=_0x3ef9ca[_0x566f94(0x232)][_0x566f94(0x299)]);if(helper[_0x566f94(0x296)](_0x3ef9ca[_0x566f94(0x1f5)])&&helper[_0x566f94(0x296)](_0x3ef9ca[_0x566f94(0x1f5)][_0x566f94(0x1e1)])){const _0x3b40aa={};_0x3b40aa[_0x566f94(0x1e9)]=_0x3ef9ca[_0x566f94(0x1f5)][_0x566f94(0x1e5)],_0x3b40aa[_0x566f94(0x1e1)]=_0x3ef9ca[_0x566f94(0x1f5)][_0x566f94(0x1e1)],_0xc80c5a[_0x566f94(0x1da)][_0x566f94(0x1f8)]=_0x3b40aa;}}let _0x262229='';_0x40fe59[_0x566f94(0x26e)](helper[_0x566f94(0x22b)](),constants[_0x566f94(0x1d9)][_0x566f94(0x289)])?_0x262229=_0x40fe59[_0x566f94(0x25e)]:_0x262229=_0x40fe59[_0x566f94(0x24d)];const _0x1a0a28=_0x262229,_0x489422=path[_0x566f94(0x27f)](__dirname,_0x40fe59[_0x566f94(0x1ec)],_0x40fe59[_0x566f94(0x293)]),_0x243727=path['join'](__dirname,_0x40fe59[_0x566f94(0x1ec)],_0x40fe59[_0x566f94(0x255)]),_0x5e916c=path['join'](__dirname,_0x40fe59[_0x566f94(0x1ec)],_0x40fe59[_0x566f94(0x221)]);_0xc80c5a[_0x566f94(0x27d)]&&(process[_0x566f94(0x295)][_0x566f94(0x236)]=_0xc80c5a[_0x566f94(0x27d)]);_0xc80c5a['testEnvironment']=path[_0x566f94(0x27f)](__dirname,_0x40fe59[_0x566f94(0x1ec)],_0x40fe59[_0x566f94(0x278)]),_0xc80c5a[_0x566f94(0x1c0)]=_0x243727,_0xc80c5a[_0x566f94(0x24c)]=_0xc80c5a[_0x566f94(0x24c)]||[],_0xc80c5a[_0x566f94(0x24c)]['push'](path['join'](__dirname,_0x40fe59[_0x566f94(0x24f)]));_0x3c265c[_0x566f94(0x23b)]()&&(_0xc80c5a[_0x566f94(0x1f3)]=path[_0x566f94(0x27f)](__dirname,_0x40fe59[_0x566f94(0x1ec)],_0x40fe59['xFaWv']));if(testhubUtils[_0x566f94(0x222)]()){let _0x2791dc=null;try{_0x2791dc=helper[_0x566f94(0x203)](_0x40fe59[_0x566f94(0x264)],_0x40fe59[_0x566f94(0x276)]);}catch(_0x5192b5){_0x40fe59[_0x566f94(0x1f9)](debug,_0x566f94(0x217)+_0x5192b5);}_0x2791dc&&(_0xc80c5a[_0x566f94(0x24c)][_0x566f94(0x277)](path[_0x566f94(0x27f)](__dirname,_0x40fe59['SsCix'],_0x40fe59[_0x566f94(0x1c3)])),_0xc80c5a['testRunner']=path[_0x566f94(0x27f)](__dirname,_0x40fe59[_0x566f94(0x1ec)],_0x40fe59[_0x566f94(0x1d2)]));}_0xc80c5a['setupFiles']=_0xc80c5a[_0x566f94(0x1fe)]||[];try{helper[_0x566f94(0x1c1)](),_0xc80c5a[_0x566f94(0x1fe)][_0x566f94(0x277)](path[_0x566f94(0x27f)](__dirname,_0x40fe59[_0x566f94(0x26f)]));}catch{logger[_0x566f94(0x270)](_0x40fe59['FrlYS']);}try{helper['requirePWModule'][_0x566f94(0x290)](null,[_0x40fe59[_0x566f94(0x23d)],_0x40fe59[_0x566f94(0x210)]]),logger['debug'](_0x40fe59[_0x566f94(0x205)]),_0xc80c5a[_0x566f94(0x1fe)][_0x566f94(0x277)](path[_0x566f94(0x27f)](__dirname,_0x40fe59['sFktQ']));}catch(_0x399567){logger[_0x566f94(0x270)](_0x40fe59[_0x566f94(0x235)],_0x399567);}_0xc80c5a['reporters']=_0xc80c5a['reporters']||[_0x40fe59[_0x566f94(0x28c)]],_0x40fe59[_0x566f94(0x1bb)](updateTestRerunConfig,_0xc80c5a,_0x50bb1e);const _0x5a5896=fs['readFileSync'](_0x5e916c);fs[_0x566f94(0x208)](_0xc80c5a['runner'],_0x566f94(0x258)+_0x5a5896+_0x566f94(0x271)+_0x50bb1e[_0x566f94(0x239)][_0x566f94(0x252)][_0x566f94(0x251)]+_0x566f94(0x1f7)),logger[_0x566f94(0x275)](_0x566f94(0x24a)+_0x1a0a28+_0x566f94(0x294)),fs[_0x566f94(0x208)](_0x1a0a28,_0x566f94(0x245)+JSON[_0x566f94(0x1c9)](_0xc80c5a)+_0x566f94(0x20b));if(_0x3c265c[_0x566f94(0x23b)]()){logger[_0x566f94(0x270)](_0x40fe59[_0x566f94(0x267)]);const _0x15e6fa=await _0x3c265c['findTestFiles'](_0xc80c5a,_0x1f4c14[_0x566f94(0x1c5)](0x1),_0x1a0a28);logger[_0x566f94(0x270)]('Found:\x20'+JSON[_0x566f94(0x1c9)](_0x15e6fa)+'\x20test\x20files\x20to\x20run.');const _0x499a14=await _0x3c265c[_0x566f94(0x26d)](_0x15e6fa);logger[_0x566f94(0x270)]('Reodered\x20Test\x20Files:\x20'+JSON[_0x566f94(0x1c9)](_0x499a14)),_0x499a14&&_0x40fe59['EDWNJ'](_0x499a14[_0x566f94(0x251)],0x0)&&(process[_0x566f94(0x295)][_0x566f94(0x256)]=_0x499a14?.[_0x566f94(0x27f)](','));}logger['info'](_0x40fe59[_0x566f94(0x1be)]);testhubUtils[_0x566f94(0x222)]()&&TestDetails['setup']();helper['filterBrowserstackArgs']({},_0x1f4c14),PerformanceTester[_0x566f94(0x207)](PerformanceEvents['SDK_SETUP']);const _0x139fd9=_0x40fe59[_0x566f94(0x20e)](spawn,_0x40fe59[_0x566f94(0x25c)],[_0x40fe59[_0x566f94(0x1c2)],_0x40fe59[_0x566f94(0x292)],_0x1a0a28,..._0x1f4c14[_0x566f94(0x1c5)](0x1)],{'shell':_0x40fe59['npNcD'](process[_0x566f94(0x21c)],_0x40fe59['XMYXn']),'stdio':_0x40fe59['dhwzB'],'env':Object[_0x566f94(0x281)]({},process[_0x566f94(0x295)])});_0x139fd9['on'](_0x40fe59[_0x566f94(0x253)],async _0x49b88e=>{const _0x4bb6eb=_0x566f94;PerformanceTester[_0x4bb6eb(0x213)](PerformanceEvents[_0x4bb6eb(0x1bc)]);try{const {browserstackFolderPath:_0x1e033a,tcgConfigPath:_0x50d0a8}=helper[_0x4bb6eb(0x1df)]();fs[_0x4bb6eb(0x1ea)](_0x50d0a8),fs[_0x4bb6eb(0x240)](_0x1e033a);}catch(_0x35ea42){logger[_0x4bb6eb(0x270)](_0x40fe59['pbFKY'],_0x35ea42);}process[_0x4bb6eb(0x285)]=_0x49b88e,logger['debug'](_0x4bb6eb(0x1fd)+_0x49b88e),logger['info'](_0x4bb6eb(0x27e)+_0x1a0a28);if(helper[_0x4bb6eb(0x296)](_0x3ef9ca)&&helper[_0x4bb6eb(0x296)](_0x3ef9ca['abortBuildOnFailure'])&&fs[_0x4bb6eb(0x1e6)](_0x3ef9ca['abortBuildOnFailure'][_0x4bb6eb(0x1e1)]))try{const _0x2b4660={};_0x2b4660[_0x4bb6eb(0x1bd)]=!![],_0x2b4660[_0x4bb6eb(0x26c)]=!![],fs[_0x4bb6eb(0x1c6)](_0x3ef9ca['abortBuildOnFailure']['workingDir'],_0x2b4660),logger['debug'](_0x4bb6eb(0x25d)+_0x3ef9ca[_0x4bb6eb(0x1f5)][_0x4bb6eb(0x1e1)]);}catch(_0x49f320){logger[_0x4bb6eb(0x1ba)](_0x4bb6eb(0x1cb)+_0x49f320);}let _0x11e55c=null;if(fs['existsSync'](_0x489422)){_0x11e55c=fs[_0x4bb6eb(0x1f0)](_0x489422);try{_0x11e55c=JSON[_0x4bb6eb(0x20f)](_0x11e55c);}catch(_0x5bcf5e){logger['debug']('Error\x20while\x20parsing\x20'+_0x489422+',\x20'+_0x11e55c+_0x4bb6eb(0x287)+_0x5bcf5e);}fs[_0x4bb6eb(0x1ea)](_0x489422);}fs[_0x4bb6eb(0x1ea)](_0x1a0a28),fs[_0x4bb6eb(0x1ea)](_0x243727),_0x11e55c&&(_0x50bb1e[_0x4bb6eb(0x1d6)]=helper[_0x4bb6eb(0x1eb)](_0x11e55c,_0x40fe59['Cwscz'],_0x50bb1e));try{await TestHubHandler[_0x4bb6eb(0x263)](),await BrowserstackCLI['getInstance']()['stop']();}catch(_0x160dd9){console['log'](_0x160dd9),_0x40fe59[_0x4bb6eb(0x1dc)](debug,_0x4bb6eb(0x288)+util['format'](_0x160dd9));}testOpsHelper[_0x4bb6eb(0x224)](),TestDetails[_0x4bb6eb(0x1e3)](),await utilities['finalExecution'](_0x50bb1e);});}function a14_0x35fe(_0xd9c558,_0x12a3c7){const _0x12485c=a14_0x1248();return a14_0x35fe=function(_0x35fe5f,_0x491a48){_0x35fe5f=_0x35fe5f-0x1ba;let _0x4cec81=_0x12485c[_0x35fe5f];return _0x4cec81;},a14_0x35fe(_0xd9c558,_0x12a3c7);}function a14_0x1248(){const _0x2b58ca=['McWnQ','push','uaAHA','--config','exports','BROWSERSTACK_CAPABILITIES','browserStackPercyOptions','testEnvironment','Deleting\x20','join','findIndex','assign','skipSessionName','false','capabilities','exitCode','useW3C','\x20:\x20','Exception\x20in\x20stop\x20build\x20request\x20to\x20TestHub\x20:\x20','MODULE','Modifying\x20jest\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','16OWyKSP','ndvBK','404469uWIQiO','../../helpers/test-observability/utils','JEST','apply','6081lGhnws','BETdn','uIrbM','\x20with\x20browserstack\x20jest\x20configs','env','isNotUndefined','RXxIh','../v2/browserstackCLI','maxRetries','KIqNC','error','Vygit','SDK_CLEANUP','recursive','XTVZj','wvQxM','runner','requireSeleniumWebdriver','Cwscz','XORaP','isUndefined','slice','rmSync','customSequencer.js','1044904AyfMIP','stringify','test_before.setup.js','Error\x20while\x20deleting\x20fail-fast\x20state\x20folder:\x20','retries__','10EpoEOH','proxySettings','rBcRB','resolve','jest-circus','VlNlL','../../helpers/test-observability/constants','jest_browserstack.config.js','30Wyzovo','errorMessage','getHubUrl','wrYIE','PACKAGE_TYPE','testEnvironmentOptions','sIqMR','bhLfG','Playwright\x20not\x20detected\x20or\x20error\x20setting\x20up\x20Jest-Playwright\x20integration:','../../helpers/BrowserStackSetup','getTCGConfigFilePaths','Test\x20orchestration\x20is\x20enabled,\x20initializing\x20orchestration\x20handler','workingDir','maxWorkers','shutdown','launchBuild','maxFailures','existsSync','accessibilityOptions','isBrowserstackInfra','failureThresholdCount','unlinkSync','getErrorMessageFromResults','KHSrX','../../helpers/logger','test.setup.js','close','readFileSync','BROWSERSTACK_TEST_ACCESSIBILITY_YML','Showing\x20jest\x20logs\x20and\x20reporter\x20logs.','testSequencer','GPAjV','abortBuildOnFailure','BROWSERSTACK_TEST_OBSERVABILITY_YML',';\x0a\x20\x20\x20\x20\x20\x20fs.writeFileSync(path.join(__dirname,\x20\x27jest_browserstack_results.json\x27),\x20JSON.stringify(results));\x0a\x20\x20\x20\x20\x20\x20return\x20_someFunc.call(this,\x20testContexts,\x20results);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20var\x20_onTestFileResultOrig\x20=\x20ReporterDispatcher.prototype.onTestFileResult;\x0a\x20\x20\x20\x20ReporterDispatcher.prototype.onTestFileResult\x20=\x20async\x20function\x20(test,\x20testResult,\x20result)\x20{\x0a\x20\x20\x20\x20\x20\x20testResult.platform\x20=\x20helper.getPlatformName(test.context.config.capability);\x0a\x20\x20\x20\x20\x20\x20return\x20_onTestFileResultOrig.call(this,\x20test,\x20testResult,\x20result);\x0a\x20\x20\x20\x20}\x0a\x20\x20','failFast','XxGvX','winstonLogger','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','isRunning','child\x20process\x20exited\x20with\x20code\x20','setupFiles','parallelsPerPlatform','checkAccessibilityPlatformConfig','turboScaleUrl','../../helpers/accessibility-automation/helper','requireModule','../../helpers/utilities','uJcni','26KBcsCy','end','writeFileSync','handleApp','Vcngc','\x0amodule.exports\x20=\x20config;','default','../../helpers/testhub/testhubHandler','SKXwO','parse','jRDNz','jest_browserstack_results.json','accessibility','start','../../helpers/percy/utils','[Jest\x20Command]\x20Accessibility\x20enabled:\x20','jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js','Unable\x20to\x20find\x20jest-circus,\x20','RDyua','jest-config/build/readConfigFileAndSetRootDir.js','initialize','cwd','platform','testContextOptions','../../helpers/testhub/utils','parseTestOrchestrationOptions','jest','nEFac','shouldProcessEventForTesthub','logLevel','printBuildLink','browserStackLogLevel','@playwright/test','testTimeout','playwright','1752nJmvjt','1025232mSkvZG','getPackageType','11513rTARjA','../../helpers/performance/performance-tester','isEmpty','EVENTS','getPackageVersion','test-observability','retryTestsOnFailure','Skipping\x20accessibility\x20env\x20setup\x20for\x20Playwright\x20due\x20to:\x20','688csRRtg','WDpcd','BSTACK_JEST_TEST_ENV','parallels__','WYscs','config','customEnvironment.js','isTestOrchestrationEnabled','format','bXQBV','[Jest\x20Command]\x20Playwright\x20detected,\x20setting\x20accessibility\x20platform:\x20','qfdnl','rmdirSync','jest_browserstack.config.cjs',',\x20BROWSERSTACK_TEST_ACCESSIBILITY_PLATFORM=','splice','customCircus.js','const\x20config=','JSoJt','vgynZ','skipSessionStatus','win32','Creating\x20','child_process','setupFilesAfterEnv','sUrbr','BROWSERSTACK_TEST_ACCESSIBILITY_PLATFORM','fLkcr',',\x20CLI\x20running:\x20','length','platforms','gCgmZ','HCQcv','TCPUA','JEST_TEST_ORDER','../utils/constants','\x0a\x20\x20\x20\x20','setupTCGAuth','13637vgPILf','getInstance','aNKQc','Deleted\x20fail-fast\x20state\x20folder:\x20','xiwFA','TyWgu','2842279grLjju','customTestRunnerTemplate.js','cjs','stop','peKVc','npx','../utils/clientTroubleshootingService','IqDxe','../../helpers/test-orchestration/testOrchestrationHandler','rdEKp','runInBand','XEthy','force','reorderTestFiles','npNcD','HRAGR','debug','\x0a\x0a\x20\x20\x20\x20const\x20ReporterDispatcher\x20=\x20_interopRequireDefault(requireModule(\x27@jest/core/build/ReporterDispatcher.js\x27,\x20\x27@jest/core\x27)).default;\x20//node_modules/@jest/core/build/ReporterDispatcher.js\x0a\x20\x20\x20\x20const\x20fs\x20=\x20require(\x27fs\x27);\x0a\x20\x20\x20\x20const\x20path\x20=\x20require(\x27path\x27);\x0a\x20\x20\x20\x20const\x20helper\x20=\x20require(\x27../../../helpers/helper\x27);\x0a\x20\x20\x20\x20var\x20_someFunc\x20=\x20ReporterDispatcher.prototype.onRunComplete;\x0a\x20\x20\x20\x20ReporterDispatcher.prototype.onRunComplete\x20=\x20async\x20function\x20(testContexts,\x20results)\x20{\x0a\x20\x20\x20\x20\x20\x20results.numTotalTestSuites\x20=\x20results.numTotalTestSuites\x20*\x20','USER_CONFIG_DETAILS_PATH','timeout__','inherit','info'];a14_0x1248=function(){return _0x2b58ca;};return a14_0x1248();}module[a14_0x4426d8(0x27a)]=run;