#!/usr/bin/env node
'use strict';const a14_0x1616eb=a14_0x3303;(function(_0x4cf56c,_0x2c45ae){const _0x3f4458=a14_0x3303,_0x282aac=_0x4cf56c();while(!![]){try{const _0x3d81da=-parseInt(_0x3f4458(0x216))/0x1+-parseInt(_0x3f4458(0x236))/0x2*(parseInt(_0x3f4458(0x27e))/0x3)+-parseInt(_0x3f4458(0x20a))/0x4+-parseInt(_0x3f4458(0x207))/0x5+parseInt(_0x3f4458(0x1e6))/0x6*(parseInt(_0x3f4458(0x231))/0x7)+parseInt(_0x3f4458(0x251))/0x8*(parseInt(_0x3f4458(0x24b))/0x9)+parseInt(_0x3f4458(0x2b1))/0xa;if(_0x3d81da===_0x2c45ae)break;else _0x282aac['push'](_0x282aac['shift']());}catch(_0x119a73){_0x282aac['push'](_0x282aac['shift']());}}}(a14_0x4b38,0xc6dd9));function a14_0x3303(_0x30655e,_0x34eb90){const _0x4b3843=a14_0x4b38();return a14_0x3303=function(_0x3303ac,_0x2edfc9){_0x3303ac=_0x3303ac-0x1d4;let _0xc3a37a=_0x4b3843[_0x3303ac];return _0xc3a37a;},a14_0x3303(_0x30655e,_0x34eb90);}const fs=require('fs'),path=require(a14_0x1616eb(0x2ac)),util=require(a14_0x1616eb(0x254)),{spawn}=require(a14_0x1616eb(0x24d)),logger=require('../../helpers/logger')[a14_0x1616eb(0x1f0)],{default:BrowserStackSetup}=require(a14_0x1616eb(0x1e1)),helper=require(a14_0x1616eb(0x261)),utilities=require(a14_0x1616eb(0x2aa)),constants=require('../utils/constants'),accessibilityHelper=require(a14_0x1616eb(0x2a5)),{updateTestRerunConfig}=require('./test-observability/helper'),testOpsHelper=require(a14_0x1616eb(0x22f)),{debug}=require('../../helpers/test-observability/utils'),TestDetails=require(a14_0x1616eb(0x1f6)),{getPercyOptions}=require('../../helpers/percy/utils'),TestHubHandler=require(a14_0x1616eb(0x243)),testhubUtils=require('../../helpers/testhub/utils'),{FRAMEWORKS}=require(a14_0x1616eb(0x214)),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require(a14_0x1616eb(0x1ef))['EVENTS'],TestOrchestrationHandler=require(a14_0x1616eb(0x291)),BrowserstackCLI=require('../v2/browserstackCLI'),{checkPwandBootstrapCli}=require(a14_0x1616eb(0x235)),ClientTroubleShootingService=require(a14_0x1616eb(0x25c)),{checkAccessibilityPlatformConfig}=require(a14_0x1616eb(0x2a5)),getUserJestConfigs=async(_0x146164,_0x40e447)=>{const _0x2c3bc6=a14_0x1616eb,_0x21dbc6={'npoxW':_0x2c3bc6(0x290),'unKPD':_0x2c3bc6(0x248),'tnHYH':function(_0x3f21a1,_0x4399c9){return _0x3f21a1||_0x4399c9;},'AbXwL':function(_0x4a7adb,_0xf13aed){return _0x4a7adb(_0xf13aed);},'XLwbz':_0x2c3bc6(0x1f3),'KWhxZ':_0x2c3bc6(0x21d),'HVOgx':_0x2c3bc6(0x2a6),'HCvIv':_0x2c3bc6(0x1dc),'QIRBc':_0x2c3bc6(0x1e3)},_0x2e9a2a=helper[_0x2c3bc6(0x201)](_0x21dbc6[_0x2c3bc6(0x2a9)],_0x21dbc6['unKPD']),_0x25311a=_0x40e447[_0x2c3bc6(0x257)](_0xe825f3=>_0xe825f3===_0x2c3bc6(0x26d));if(!helper[_0x2c3bc6(0x218)](_0x146164[_0x2c3bc6(0x20e)])){logger['info'](_0x2c3bc6(0x1d6)+_0x146164[_0x2c3bc6(0x20e)]),process['env'][_0x2c3bc6(0x285)]=_0x146164[_0x2c3bc6(0x20e)];const _0x42a216=await(0x0,_0x2e9a2a[_0x2c3bc6(0x1db)])(path[_0x2c3bc6(0x1fb)](_0x146164[_0x2c3bc6(0x20e)]));return _0x40e447[_0x2c3bc6(0x262)](_0x25311a,0x2),_0x21dbc6[_0x2c3bc6(0x286)](_0x42a216,{});}const _0x1cfc30=_0x21dbc6['AbXwL'](require,path[_0x2c3bc6(0x23b)](process[_0x2c3bc6(0x239)](),_0x21dbc6[_0x2c3bc6(0x1fc)]));if(_0x1cfc30[_0x2c3bc6(0x27d)])return logger[_0x2c3bc6(0x270)](_0x21dbc6['KWhxZ']),_0x1cfc30[_0x2c3bc6(0x27d)];const _0x1975c8=['js',_0x21dbc6['HVOgx'],_0x21dbc6[_0x2c3bc6(0x1f7)],_0x21dbc6[_0x2c3bc6(0x292)],'ts'];for(const _0x18f30e of _0x1975c8){const _0xedd6b4=path[_0x2c3bc6(0x23b)](process[_0x2c3bc6(0x239)](),_0x2c3bc6(0x281)+_0x18f30e);if(fs['existsSync'](_0xedd6b4)){process[_0x2c3bc6(0x23f)][_0x2c3bc6(0x285)]=_0xedd6b4;const _0x31f4d1=await(0x0,_0x2e9a2a[_0x2c3bc6(0x1db)])(_0xedd6b4);return _0x31f4d1;}}return{};},getSerial=(_0x209c99,_0x17f1a2)=>{const _0x21cbba=a14_0x1616eb,_0x5a9ebf={};_0x5a9ebf['UkhAu']=_0x21cbba(0x20d),_0x5a9ebf[_0x21cbba(0x1e4)]=function(_0x26679c,_0x2ca133){return _0x26679c>_0x2ca133;},_0x5a9ebf[_0x21cbba(0x1e0)]='false';const _0x4ded4b=_0x5a9ebf;let _0x486991=_0x4ded4b[_0x21cbba(0x284)];return _0x4ded4b[_0x21cbba(0x1e4)](_0x209c99[_0x21cbba(0x27a)],0x1)&&(!_0x17f1a2[_0x21cbba(0x1f9)]&&(helper[_0x21cbba(0x218)](_0x17f1a2[_0x21cbba(0x21e)])||_0x4ded4b[_0x21cbba(0x1e4)](_0x17f1a2[_0x21cbba(0x21e)],0x1)))&&(_0x486991=_0x4ded4b[_0x21cbba(0x1e0)]),_0x486991;},getMaxWorkers=(_0x2b755f,_0x1c7897,_0x3a45f1)=>{const _0x24a051=a14_0x1616eb,_0x4b071b={'jSQuM':function(_0x4866fd,_0x3a8acb){return _0x4866fd(_0x3a8acb);}};let _0xd4918e=0x1;if(!helper[_0x24a051(0x218)](_0x1c7897[_0x24a051(0x250)]))_0xd4918e=_0x4b071b['jSQuM'](parseInt,_0x1c7897[_0x24a051(0x250)]);else{if(!helper[_0x24a051(0x218)](_0x2b755f['maxWorkers']))_0xd4918e=_0x2b755f[_0x24a051(0x21e)];else!helper[_0x24a051(0x218)](_0x3a45f1[_0x24a051(0x21e)])&&(_0xd4918e=_0x3a45f1[_0x24a051(0x21e)]);}return _0xd4918e;};async function run(_0x310948,_0x453b78,_0x22489b){const _0x3fb293=a14_0x1616eb,_0x4f7402={'BqMbg':_0x3fb293(0x1f1),'SAEjK':_0x3fb293(0x27d),'grcQV':function(_0x1c6cd9,_0x50fbbc){return _0x1c6cd9(_0x50fbbc);},'wyzho':'@playwright/test','CTlPz':function(_0x244c2e,_0x34b61a,_0x1e2e4c,_0x2e6e6f){return _0x244c2e(_0x34b61a,_0x1e2e4c,_0x2e6e6f);},'espdR':function(_0x5027f8,_0x4154a1){return _0x5027f8!=_0x4154a1;},'hJPLF':'true','TxafA':function(_0x5a7c5f,_0x55b510,_0x158185){return _0x5a7c5f(_0x55b510,_0x158185);},'uKXmA':_0x3fb293(0x274),'SdOvp':function(_0xbf56aa,_0x1423a5){return _0xbf56aa(_0x1423a5);},'AEDmK':function(_0x5982ed,_0x3c5081){return _0x5982ed(_0x3c5081);},'wzoxy':'false','VvFBo':function(_0x646535,_0x2b722d,_0x57301a,_0x5afa03){return _0x646535(_0x2b722d,_0x57301a,_0x5afa03);},'bfsld':function(_0x291db2,_0x1827fb){return _0x291db2*_0x1827fb;},'vqxDY':function(_0x137715,_0x4c1940){return _0x137715===_0x4c1940;},'afDnD':_0x3fb293(0x1eb),'JfEPH':'jest_browserstack.config.js','ahDrs':_0x3fb293(0x25a),'oxbsH':_0x3fb293(0x1da),'fxQjy':'customTestRunner.js','AiKxe':_0x3fb293(0x20f),'dpAKP':_0x3fb293(0x2b4),'uAGUe':_0x3fb293(0x24f),'HdZoh':_0x3fb293(0x26a),'gpzmB':_0x3fb293(0x225),'OJolw':_0x3fb293(0x2ae),'vvWbg':function(_0x15deb4,_0x315116){return _0x15deb4(_0x315116);},'PGnaI':_0x3fb293(0x288),'QiEQg':_0x3fb293(0x258),'OvkZE':'customCircus.js','PbUfQ':_0x3fb293(0x253),'IFfZv':_0x3fb293(0x267),'XzSjm':_0x3fb293(0x202),'HOEVM':_0x3fb293(0x26e),'OmVkH':_0x3fb293(0x1df),'ypvXh':_0x3fb293(0x25b),'XvnKz':_0x3fb293(0x1db),'OQuXN':function(_0x92670a,_0x301df2,_0x499b69){return _0x92670a(_0x301df2,_0x499b69);},'mwmKo':_0x3fb293(0x2b2),'hqwmp':function(_0x30b90a,_0x481cc5){return _0x30b90a>_0x481cc5;},'RMDNu':'Showing\x20jest\x20logs\x20and\x20reporter\x20logs.','aTkJZ':'npx','vXkCB':_0x3fb293(0x26d),'TMCNw':_0x3fb293(0x2a1),'dyThe':_0x3fb293(0x256),'rifFb':'close'},_0x5a123b=helper[_0x3fb293(0x27f)](_0x4f7402['wyzho']);global[_0x3fb293(0x1d7)]=!!_0x5a123b;helper[_0x3fb293(0x269)]()?(await _0x22489b[_0x3fb293(0x245)](_0x310948),await helper[_0x3fb293(0x1ed)](_0x22489b['config'])):await _0x22489b[_0x3fb293(0x200)]();await _0x4f7402[_0x3fb293(0x212)](checkPwandBootstrapCli,_0x5a123b,constants['FRAMEWORKS'][_0x3fb293(0x299)],_0x22489b);if(!_0x22489b[_0x3fb293(0x20e)])return;_0x4f7402[_0x3fb293(0x21b)](_0x22489b[_0x3fb293(0x20e)][_0x3fb293(0x2b0)],null)?process['env'][_0x3fb293(0x211)]=_0x22489b['config'][_0x3fb293(0x2b0)]:process[_0x3fb293(0x23f)][_0x3fb293(0x211)]=_0x4f7402['hJPLF'];const _0x5ebf59=new TestOrchestrationHandler(_0x22489b['config']),_0x475c07=await _0x4f7402[_0x3fb293(0x205)](getUserJestConfigs,_0x310948,_0x453b78);logger['info'](_0x4f7402[_0x3fb293(0x20b)]);const _0x132e8e=Object[_0x3fb293(0x265)]({},_0x475c07);_0x132e8e[_0x3fb293(0x21a)]=Object['assign']({},_0x132e8e[_0x3fb293(0x21a)],{'server':helper['getHubUrl'](_0x22489b[_0x3fb293(0x20e)]),'environment':_0x475c07['testEnvironment']}),_0x132e8e[_0x3fb293(0x21a)][_0x3fb293(0x259)]=_0x4f7402[_0x3fb293(0x22b)](getPercyOptions,_0x22489b[_0x3fb293(0x20e)]);const _0x5c1041=helper[_0x3fb293(0x29e)](_0x22489b[_0x3fb293(0x20e)]);!helper[_0x3fb293(0x218)](_0x22489b['config'][_0x3fb293(0x230)])&&(process[_0x3fb293(0x23f)]['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON[_0x3fb293(0x287)](_0x22489b[_0x3fb293(0x20e)][_0x3fb293(0x230)]));if(!BrowserstackCLI[_0x3fb293(0x1d9)]()[_0x3fb293(0x237)]()){const _0x5eddb4=await TestHubHandler[_0x3fb293(0x226)](FRAMEWORKS['JEST'],_0x22489b);}const _0x5e7f51=helper['prepareCapabilities'](_0x22489b['config'],_0x5c1041,constants[_0x3fb293(0x2a3)][_0x3fb293(0x299)]);process[_0x3fb293(0x23f)][_0x3fb293(0x24e)]=JSON[_0x3fb293(0x287)](_0x5e7f51);let _0x21ece6=_0x22489b[_0x3fb293(0x20e)][_0x3fb293(0x223)];_0x21ece6=_0x21ece6||accessibilityHelper['checkAccessibilityPlatformConfig'](_0x22489b[_0x3fb293(0x20e)]),process[_0x3fb293(0x23f)]['BROWSERSTACK_TEST_ACCESSIBILITY_YML']=_0x21ece6,logger[_0x3fb293(0x268)](_0x3fb293(0x25d)+_0x21ece6+_0x3fb293(0x1e5)+BrowserstackCLI[_0x3fb293(0x1d9)]()[_0x3fb293(0x237)]());if(_0x5a123b)try{const _0x535b96=_0x4f7402[_0x3fb293(0x29a)](checkAccessibilityPlatformConfig,_0x22489b[_0x3fb293(0x20e)]);process['env'][_0x3fb293(0x1f8)]=_0x535b96?_0x4f7402[_0x3fb293(0x289)]:_0x4f7402[_0x3fb293(0x1d4)],logger[_0x3fb293(0x268)](_0x3fb293(0x22c)+_0x535b96+',\x20BROWSERSTACK_TEST_ACCESSIBILITY_PLATFORM='+process[_0x3fb293(0x23f)][_0x3fb293(0x1f8)]);}catch(_0x2f9495){logger['debug'](_0x3fb293(0x20c)+util[_0x3fb293(0x264)](_0x2f9495));}_0x132e8e[_0x3fb293(0x21a)]['capabilities']=_0x5e7f51,_0x132e8e['testEnvironmentOptions']['serial__']=_0x4f7402[_0x3fb293(0x205)](getSerial,_0x5e7f51,_0x310948),_0x132e8e[_0x3fb293(0x21a)][_0x3fb293(0x229)]=_0x4f7402[_0x3fb293(0x213)](getMaxWorkers,_0x310948,_0x22489b[_0x3fb293(0x20e)],_0x475c07),_0x132e8e[_0x3fb293(0x21a)][_0x3fb293(0x296)]=_0x22489b[_0x3fb293(0x20e)]['proxySettings'],_0x132e8e[_0x3fb293(0x21a)][_0x3fb293(0x228)]=_0x4f7402[_0x3fb293(0x1f4)](_0x310948[_0x3fb293(0x25e)],0x1)||0x1388,_0x132e8e[_0x3fb293(0x21a)][_0x3fb293(0x1fa)]=_0x22489b[_0x3fb293(0x20e)]['testContextOptions'][_0x3fb293(0x1fa)],_0x132e8e[_0x3fb293(0x21a)][_0x3fb293(0x1ee)]=_0x22489b['config'][_0x3fb293(0x275)][_0x3fb293(0x1ee)],_0x132e8e[_0x3fb293(0x21a)][_0x3fb293(0x28a)]=_0x22489b['config'][_0x3fb293(0x28b)],_0x132e8e[_0x3fb293(0x21a)][_0x3fb293(0x2ad)]=_0x22489b[_0x3fb293(0x20e)][_0x3fb293(0x2ad)],_0x132e8e['testEnvironmentOptions'][_0x3fb293(0x1f2)]=_0x22489b['config'][_0x3fb293(0x24a)];const _0x14e39c=helper[_0x3fb293(0x2a2)](_0x22489b[_0x3fb293(0x20e)]);if(!helper['isEmpty'](_0x14e39c)){helper[_0x3fb293(0x234)](_0x14e39c[_0x3fb293(0x23c)])&&(_0x132e8e[_0x3fb293(0x21a)][_0x3fb293(0x1d8)]=_0x14e39c[_0x3fb293(0x23c)][_0x3fb293(0x293)]);if(helper[_0x3fb293(0x234)](_0x14e39c[_0x3fb293(0x272)])&&helper['isNotUndefined'](_0x14e39c['abortBuildOnFailure'][_0x3fb293(0x263)])){const _0x49ea99={};_0x49ea99[_0x3fb293(0x2ab)]=_0x14e39c[_0x3fb293(0x272)][_0x3fb293(0x25f)],_0x49ea99['workingDir']=_0x14e39c['abortBuildOnFailure'][_0x3fb293(0x263)],_0x132e8e[_0x3fb293(0x21a)][_0x3fb293(0x22d)]=_0x49ea99;}}let _0x4fd3df='';_0x4f7402[_0x3fb293(0x23a)](helper[_0x3fb293(0x255)](),constants[_0x3fb293(0x1de)][_0x3fb293(0x28f)])?_0x4fd3df=_0x4f7402[_0x3fb293(0x27c)]:_0x4fd3df=_0x4f7402['JfEPH'];const _0xa34374=_0x4fd3df,_0x58e165=path[_0x3fb293(0x23b)](__dirname,_0x4f7402[_0x3fb293(0x204)],_0x4f7402[_0x3fb293(0x224)]),_0x3c0130=path[_0x3fb293(0x23b)](__dirname,_0x4f7402['ahDrs'],_0x4f7402['fxQjy']),_0x37d8cd=path[_0x3fb293(0x23b)](__dirname,_0x4f7402[_0x3fb293(0x204)],_0x4f7402['AiKxe']);_0x132e8e['testEnvironment']&&(process['env'][_0x3fb293(0x271)]=_0x132e8e['testEnvironment']);_0x132e8e['testEnvironment']=path[_0x3fb293(0x23b)](__dirname,_0x4f7402[_0x3fb293(0x204)],_0x4f7402[_0x3fb293(0x242)]),_0x132e8e[_0x3fb293(0x260)]=_0x3c0130,_0x132e8e['setupFilesAfterEnv']=_0x132e8e[_0x3fb293(0x1e9)]||[],_0x132e8e[_0x3fb293(0x1e9)][_0x3fb293(0x279)](path[_0x3fb293(0x23b)](__dirname,_0x4f7402[_0x3fb293(0x1e7)]));_0x5ebf59[_0x3fb293(0x2a8)]()&&(_0x132e8e[_0x3fb293(0x2a7)]=path[_0x3fb293(0x23b)](__dirname,_0x4f7402['ahDrs'],_0x4f7402[_0x3fb293(0x297)]));if(testhubUtils[_0x3fb293(0x2a4)]()){let _0x566b31=null;try{_0x566b31=helper['requireModule'](_0x4f7402[_0x3fb293(0x1d5)],_0x4f7402[_0x3fb293(0x273)]);}catch(_0x2c5a76){_0x4f7402[_0x3fb293(0x276)](debug,_0x3fb293(0x217)+_0x2c5a76);}_0x566b31&&(_0x132e8e[_0x3fb293(0x1e9)][_0x3fb293(0x279)](path[_0x3fb293(0x23b)](__dirname,_0x4f7402[_0x3fb293(0x29c)],_0x4f7402[_0x3fb293(0x28d)])),_0x132e8e['testRunner']=path[_0x3fb293(0x23b)](__dirname,_0x4f7402['ahDrs'],_0x4f7402['OvkZE']));}_0x132e8e[_0x3fb293(0x1ea)]=_0x132e8e[_0x3fb293(0x1ea)]||[];try{helper[_0x3fb293(0x22e)](),_0x132e8e[_0x3fb293(0x1ea)][_0x3fb293(0x279)](path['join'](__dirname,_0x4f7402[_0x3fb293(0x215)]));}catch{logger[_0x3fb293(0x268)](_0x4f7402['IFfZv']);}try{helper['requirePWModule'][_0x3fb293(0x1ec)](null,[_0x4f7402['wyzho'],_0x4f7402[_0x3fb293(0x28c)]]),logger[_0x3fb293(0x268)](_0x4f7402[_0x3fb293(0x295)]),_0x132e8e[_0x3fb293(0x1ea)][_0x3fb293(0x279)](path[_0x3fb293(0x23b)](__dirname,_0x4f7402[_0x3fb293(0x27b)]));}catch(_0x11309c){logger[_0x3fb293(0x268)](_0x4f7402[_0x3fb293(0x29f)],_0x11309c);}_0x132e8e[_0x3fb293(0x209)]=_0x132e8e[_0x3fb293(0x209)]||[_0x4f7402['XvnKz']],_0x4f7402[_0x3fb293(0x249)](updateTestRerunConfig,_0x132e8e,_0x22489b);const _0x57e058=fs[_0x3fb293(0x24c)](_0x37d8cd);fs[_0x3fb293(0x2a0)](_0x132e8e['runner'],_0x3fb293(0x233)+_0x57e058+_0x3fb293(0x246)+_0x22489b['config'][_0x3fb293(0x24a)][_0x3fb293(0x27a)]+_0x3fb293(0x26f)),logger['info']('Creating\x20'+_0xa34374+_0x3fb293(0x280)),fs[_0x3fb293(0x2a0)](_0xa34374,_0x3fb293(0x1e2)+JSON['stringify'](_0x132e8e)+_0x3fb293(0x1f5));if(_0x5ebf59[_0x3fb293(0x2a8)]()){logger[_0x3fb293(0x268)](_0x4f7402[_0x3fb293(0x23e)]);const _0x17de4f=await _0x5ebf59[_0x3fb293(0x219)](_0x132e8e,_0x453b78[_0x3fb293(0x294)](0x1),_0xa34374);logger[_0x3fb293(0x268)](_0x3fb293(0x278)+JSON['stringify'](_0x17de4f)+_0x3fb293(0x29b));const _0x56cbb7=await _0x5ebf59[_0x3fb293(0x282)](_0x17de4f);logger[_0x3fb293(0x268)]('Reodered\x20Test\x20Files:\x20'+JSON[_0x3fb293(0x287)](_0x56cbb7)),_0x56cbb7&&_0x4f7402[_0x3fb293(0x247)](_0x56cbb7[_0x3fb293(0x27a)],0x0)&&(process['env'][_0x3fb293(0x266)]=_0x56cbb7?.[_0x3fb293(0x23b)](','));}logger[_0x3fb293(0x270)](_0x4f7402[_0x3fb293(0x220)]);testhubUtils['shouldProcessEventForTesthub']()&&TestDetails[_0x3fb293(0x28e)]();helper[_0x3fb293(0x1ff)]({},_0x453b78),PerformanceTester[_0x3fb293(0x244)](PerformanceEvents[_0x3fb293(0x277)]);const _0x40e5b0=_0x4f7402[_0x3fb293(0x212)](spawn,_0x4f7402[_0x3fb293(0x208)],[_0x4f7402[_0x3fb293(0x1dd)],_0x4f7402[_0x3fb293(0x221)],_0xa34374,..._0x453b78[_0x3fb293(0x294)](0x1)],{'shell':_0x4f7402[_0x3fb293(0x23a)](process[_0x3fb293(0x2af)],_0x4f7402[_0x3fb293(0x1fe)]),'stdio':_0x4f7402[_0x3fb293(0x22a)],'env':Object[_0x3fb293(0x265)]({},process[_0x3fb293(0x23f)])});_0x40e5b0['on'](_0x4f7402['rifFb'],async _0x46541f=>{const _0x1b8d12=_0x3fb293;PerformanceTester['start'](PerformanceEvents['SDK_CLEANUP']);try{const {browserstackFolderPath:_0x24e0aa,tcgConfigPath:_0x40d368}=helper[_0x1b8d12(0x29d)]();fs[_0x1b8d12(0x23d)](_0x40d368),fs[_0x1b8d12(0x238)](_0x24e0aa);}catch(_0x428aa5){logger[_0x1b8d12(0x268)](_0x4f7402[_0x1b8d12(0x26b)],_0x428aa5);}process[_0x1b8d12(0x241)]=_0x46541f,logger[_0x1b8d12(0x268)](_0x1b8d12(0x227)+_0x46541f),logger[_0x1b8d12(0x270)](_0x1b8d12(0x240)+_0xa34374);if(helper['isNotUndefined'](_0x14e39c)&&helper[_0x1b8d12(0x234)](_0x14e39c[_0x1b8d12(0x272)])&&fs['existsSync'](_0x14e39c['abortBuildOnFailure'][_0x1b8d12(0x263)]))try{const _0x7bf11a={};_0x7bf11a['recursive']=!![],_0x7bf11a[_0x1b8d12(0x21c)]=!![],fs['rmSync'](_0x14e39c['abortBuildOnFailure']['workingDir'],_0x7bf11a),logger[_0x1b8d12(0x268)](_0x1b8d12(0x252)+_0x14e39c['abortBuildOnFailure']['workingDir']);}catch(_0xada12){logger[_0x1b8d12(0x232)]('Error\x20while\x20deleting\x20fail-fast\x20state\x20folder:\x20'+_0xada12);}let _0x23da26=null;if(fs[_0x1b8d12(0x203)](_0x58e165)){_0x23da26=fs[_0x1b8d12(0x24c)](_0x58e165);try{_0x23da26=JSON['parse'](_0x23da26);}catch(_0x1440b2){logger[_0x1b8d12(0x268)](_0x1b8d12(0x283)+_0x58e165+',\x20'+_0x23da26+_0x1b8d12(0x1fd)+_0x1440b2);}fs['unlinkSync'](_0x58e165);}fs[_0x1b8d12(0x23d)](_0xa34374),fs['unlinkSync'](_0x3c0130),_0x23da26&&(_0x22489b['errorMessage']=helper['getErrorMessageFromResults'](_0x23da26,_0x4f7402[_0x1b8d12(0x1dd)],_0x22489b));try{await TestHubHandler[_0x1b8d12(0x1e8)](),await BrowserstackCLI[_0x1b8d12(0x1d9)]()['stop']();}catch(_0x25358d){console[_0x1b8d12(0x26c)](_0x25358d),_0x4f7402[_0x1b8d12(0x2b3)](debug,_0x1b8d12(0x222)+util[_0x1b8d12(0x264)](_0x25358d));}testOpsHelper[_0x1b8d12(0x21f)](),TestDetails[_0x1b8d12(0x210)](),await utilities[_0x1b8d12(0x298)](_0x22489b);});}function a14_0x4b38(){const _0xa84454=['printBuildLink','RMDNu','vXkCB','Exception\x20in\x20stop\x20build\x20request\x20to\x20TestHub\x20:\x20','accessibility','oxbsH','jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js','launchBuild','child\x20process\x20exited\x20with\x20code\x20','timeout__','parallels__','dyThe','SdOvp','[Jest\x20Command]\x20Playwright\x20detected,\x20setting\x20accessibility\x20platform:\x20','failFast','requireSeleniumWebdriver','../../helpers/test-observability/utils','accessibilityOptions','7ByKoAm','error','\x0a\x20\x20\x20\x20','isNotUndefined','../../helpers/playwright-helper','4dsOqHf','isRunning','rmdirSync','cwd','vqxDY','join','retryTestsOnFailure','unlinkSync','mwmKo','env','Deleting\x20','exitCode','dpAKP','../../helpers/testhub/testhubHandler','end','initialize','\x0a\x0a\x20\x20\x20\x20const\x20ReporterDispatcher\x20=\x20_interopRequireDefault(requireModule(\x27@jest/core/build/ReporterDispatcher.js\x27,\x20\x27@jest/core\x27)).default;\x20//node_modules/@jest/core/build/ReporterDispatcher.js\x0a\x20\x20\x20\x20const\x20fs\x20=\x20require(\x27fs\x27);\x0a\x20\x20\x20\x20const\x20path\x20=\x20require(\x27path\x27);\x0a\x20\x20\x20\x20const\x20helper\x20=\x20require(\x27../../../helpers/helper\x27);\x0a\x20\x20\x20\x20var\x20_someFunc\x20=\x20ReporterDispatcher.prototype.onRunComplete;\x0a\x20\x20\x20\x20ReporterDispatcher.prototype.onRunComplete\x20=\x20async\x20function\x20(testContexts,\x20results)\x20{\x0a\x20\x20\x20\x20\x20\x20results.numTotalTestSuites\x20=\x20results.numTotalTestSuites\x20*\x20','hqwmp','jest-config','OQuXN','platforms','9vaKPvA','readFileSync','child_process','BROWSERSTACK_CAPABILITIES','jest.setup.js','parallelsPerPlatform','34912jjpprd','Deleted\x20fail-fast\x20state\x20folder:\x20','test_before.setup.js','util','getPackageType','inherit','findIndex','data-hooks.js','browserStackPercyOptions','customImplements','Playwright\x20not\x20detected\x20or\x20error\x20setting\x20up\x20Jest-Playwright\x20integration:','../utils/clientTroubleshootingService','[Jest\x20Command]\x20Accessibility\x20enabled:\x20','testTimeout','maxFailures','runner','../../helpers/helper','splice','workingDir','format','assign','JEST_TEST_ORDER','skipping\x20test_before\x20setup\x20since\x20selenium\x20not\x20found','debug','isBrowserstackInfra','customSequencer.js','BqMbg','log','--config','Playwright\x20detected,\x20adding\x20Jest-Playwright\x20setup',';\x0a\x20\x20\x20\x20\x20\x20fs.writeFileSync(path.join(__dirname,\x20\x27jest_browserstack_results.json\x27),\x20JSON.stringify(results));\x0a\x20\x20\x20\x20\x20\x20return\x20_someFunc.call(this,\x20testContexts,\x20results);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20var\x20_onTestFileResultOrig\x20=\x20ReporterDispatcher.prototype.onTestFileResult;\x0a\x20\x20\x20\x20ReporterDispatcher.prototype.onTestFileResult\x20=\x20async\x20function\x20(test,\x20testResult,\x20result)\x20{\x0a\x20\x20\x20\x20\x20\x20testResult.platform\x20=\x20helper.getPlatformName(test.context.config.capability);\x0a\x20\x20\x20\x20\x20\x20return\x20_onTestFileResultOrig.call(this,\x20test,\x20testResult,\x20result);\x0a\x20\x20\x20\x20}\x0a\x20\x20','info','BSTACK_JEST_TEST_ENV','abortBuildOnFailure','OJolw','Modifying\x20jest\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','testContextOptions','vvWbg','SDK_SETUP','Found:\x20','push','length','OmVkH','afDnD','jest','2321973zhNjKz','getPackageVersion','\x20with\x20browserstack\x20jest\x20configs','jest.config.','reorderTestFiles','Error\x20while\x20parsing\x20','UkhAu','USER_CONFIG_DETAILS_PATH','tnHYH','stringify','test-observability','hJPLF','browserStackLogLevel','logLevel','XzSjm','QiEQg','setup','MODULE','jest-config/build/readConfigFileAndSetRootDir.js','../../helpers/test-orchestration/testOrchestrationHandler','QIRBc','maxRetries','slice','HOEVM','proxySettings','HdZoh','finalExecution','JEST','AEDmK','\x20test\x20files\x20to\x20run.','PGnaI','getTCGConfigFilePaths','useW3C','ypvXh','writeFileSync','win32','parseTestOrchestrationOptions','FRAMEWORKS','shouldProcessEventForTesthub','../../helpers/accessibility-automation/helper','mjs','testSequencer','isTestOrchestrationEnabled','npoxW','../../helpers/utilities','failureThresholdCount','path','turboScaleUrl','jest-circus','platform','testObservability','42452650pFlMwx','Test\x20orchestration\x20is\x20enabled,\x20initializing\x20orchestration\x20handler','grcQV','customEnvironment.js','wzoxy','gpzmB','Getting\x20your\x20jest\x20configs\x20from\x20','__isPlaywrightInstalled','retries__','getInstance','jest_browserstack_results.json','default','cjs','SAEjK','PACKAGE_TYPE','test.setup.js','ztCFu','../../helpers/BrowserStackSetup','const\x20config=','json','fmwvS',',\x20CLI\x20running:\x20','7881684TARhgF','uAGUe','stop','setupFilesAfterEnv','setupFiles','jest_browserstack.config.cjs','apply','handleApp','skipSessionStatus','../../helpers/performance/constants','winstonLogger','error\x20removing\x20tcg\x20config\x20file','platformCaps','package.json','bfsld','\x0amodule.exports\x20=\x20config;','./test-observability/test-details','HCvIv','BROWSERSTACK_TEST_ACCESSIBILITY_PLATFORM','runInBand','skipSessionName','resolve','XLwbz','\x20:\x20','TMCNw','filterBrowserstackArgs','setupTCGAuth','requireModule','playwright','existsSync','ahDrs','TxafA','exports','7477880XWhtgK','aTkJZ','reporters','5996232iVKYTl','uKXmA','Skipping\x20accessibility\x20env\x20setup\x20for\x20Playwright\x20due\x20to:\x20','true','config','customTestRunnerTemplate.js','shutdown','BROWSERSTACK_TEST_OBSERVABILITY_YML','CTlPz','VvFBo','../../helpers/test-observability/constants','PbUfQ','206074MccrEg','Unable\x20to\x20find\x20jest-circus,\x20','isUndefined','findTestFiles','testEnvironmentOptions','espdR','force','Getting\x20your\x20jest\x20configs\x20from\x20package.json','maxWorkers'];a14_0x4b38=function(){return _0xa84454;};return a14_0x4b38();}module[a14_0x1616eb(0x206)]=run;