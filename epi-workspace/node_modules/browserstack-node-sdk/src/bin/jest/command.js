#!/usr/bin/env node
'use strict';const a14_0x2a4cf2=a14_0x2349;(function(_0x3cc31a,_0x18308f){const _0x3ab287=a14_0x2349,_0x2817fe=_0x3cc31a();while(!![]){try{const _0x38e37=parseInt(_0x3ab287(0x152))/0x1+-parseInt(_0x3ab287(0x192))/0x2*(parseInt(_0x3ab287(0x1b1))/0x3)+parseInt(_0x3ab287(0x11d))/0x4+-parseInt(_0x3ab287(0x1a0))/0x5*(parseInt(_0x3ab287(0x147))/0x6)+-parseInt(_0x3ab287(0x12c))/0x7+-parseInt(_0x3ab287(0x13a))/0x8+-parseInt(_0x3ab287(0x134))/0x9*(-parseInt(_0x3ab287(0x1d8))/0xa);if(_0x38e37===_0x18308f)break;else _0x2817fe['push'](_0x2817fe['shift']());}catch(_0x57d325){_0x2817fe['push'](_0x2817fe['shift']());}}}(a14_0x1d7c,0x58abc));const fs=require('fs'),path=require('path'),util=require(a14_0x2a4cf2(0x1c2)),{spawn}=require(a14_0x2a4cf2(0x19d)),logger=require(a14_0x2a4cf2(0x17d))[a14_0x2a4cf2(0x120)],{default:BrowserStackSetup}=require(a14_0x2a4cf2(0x1ce)),helper=require(a14_0x2a4cf2(0x1a4)),utilities=require(a14_0x2a4cf2(0x1c6)),constants=require(a14_0x2a4cf2(0x1e1)),accessibilityHelper=require(a14_0x2a4cf2(0x15e)),{updateTestRerunConfig}=require(a14_0x2a4cf2(0x189)),testOpsHelper=require(a14_0x2a4cf2(0x1c7)),{debug}=require('../../helpers/test-observability/utils'),TestDetails=require(a14_0x2a4cf2(0x170)),{getPercyOptions}=require(a14_0x2a4cf2(0x1e8)),TestHubHandler=require(a14_0x2a4cf2(0x1e2)),testhubUtils=require(a14_0x2a4cf2(0x1d1)),{FRAMEWORKS}=require(a14_0x2a4cf2(0x156)),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require(a14_0x2a4cf2(0x1e6))[a14_0x2a4cf2(0x119)],TestOrchestrationHandler=require('../../helpers/test-orchestration/testOrchestrationHandler'),BrowserstackCLI=require(a14_0x2a4cf2(0x12e)),{checkPwandBootstrapCli}=require(a14_0x2a4cf2(0x127)),ClientTroubleShootingService=require(a14_0x2a4cf2(0x115)),getUserJestConfigs=async(_0x155187,_0xc17945)=>{const _0x9d7d39=a14_0x2a4cf2,_0x1fdb50={'yJdBh':_0x9d7d39(0x13d),'ZcWHG':_0x9d7d39(0x117),'FtOwm':function(_0x128eac,_0x22ca62){return _0x128eac||_0x22ca62;},'dZQQq':function(_0x245f31,_0x268b36){return _0x245f31(_0x268b36);},'FGmio':_0x9d7d39(0x160),'RenrC':_0x9d7d39(0x15d),'qQxuB':'mjs','GpjpA':_0x9d7d39(0x1b7),'zHBCf':_0x9d7d39(0x186)},_0x49baca=helper[_0x9d7d39(0x153)](_0x1fdb50[_0x9d7d39(0x168)],_0x1fdb50[_0x9d7d39(0x16f)]),_0x2c148c=_0xc17945[_0x9d7d39(0x150)](_0x2b1803=>_0x2b1803===_0x9d7d39(0x1dc));if(!helper[_0x9d7d39(0x11e)](_0x155187[_0x9d7d39(0x182)])){logger[_0x9d7d39(0x13c)](_0x9d7d39(0x1d4)+_0x155187[_0x9d7d39(0x182)]),process[_0x9d7d39(0x1ab)][_0x9d7d39(0x1c0)]=_0x155187[_0x9d7d39(0x182)];const _0x4a3865=await(0x0,_0x49baca['default'])(path[_0x9d7d39(0x14c)](_0x155187[_0x9d7d39(0x182)]));return _0xc17945[_0x9d7d39(0x114)](_0x2c148c,0x2),_0x1fdb50[_0x9d7d39(0x14a)](_0x4a3865,{});}const _0x4981c7=_0x1fdb50['dZQQq'](require,path['join'](process[_0x9d7d39(0x154)](),_0x1fdb50[_0x9d7d39(0x1c5)]));if(_0x4981c7[_0x9d7d39(0x1cb)])return logger[_0x9d7d39(0x13c)](_0x1fdb50[_0x9d7d39(0x169)]),_0x4981c7[_0x9d7d39(0x1cb)];const _0x54f22e=['js',_0x1fdb50[_0x9d7d39(0x1d9)],_0x1fdb50[_0x9d7d39(0x1bd)],_0x1fdb50['zHBCf'],'ts'];for(const _0x21decb of _0x54f22e){const _0x623ea3=path[_0x9d7d39(0x175)](process[_0x9d7d39(0x154)](),'jest.config.'+_0x21decb);if(fs[_0x9d7d39(0x15b)](_0x623ea3)){process[_0x9d7d39(0x1ab)][_0x9d7d39(0x1c0)]=_0x623ea3;const _0x989fd8=await(0x0,_0x49baca[_0x9d7d39(0x166)])(_0x623ea3);return _0x989fd8;}}return{};},getSerial=(_0x586f2e,_0x47b722)=>{const _0x3b32d5=a14_0x2a4cf2,_0x4066f0={};_0x4066f0['qivyp']=_0x3b32d5(0x193),_0x4066f0[_0x3b32d5(0x16d)]=function(_0x110473,_0x407ae6){return _0x110473>_0x407ae6;},_0x4066f0[_0x3b32d5(0x1a9)]='false';const _0x4ace85=_0x4066f0;let _0x4dd18c=_0x4ace85['qivyp'];return _0x4ace85[_0x3b32d5(0x16d)](_0x586f2e[_0x3b32d5(0x14b)],0x1)&&(!_0x47b722[_0x3b32d5(0x1df)]&&(helper[_0x3b32d5(0x11e)](_0x47b722[_0x3b32d5(0x15f)])||_0x4ace85[_0x3b32d5(0x16d)](_0x47b722['maxWorkers'],0x1)))&&(_0x4dd18c=_0x4ace85['zesCJ']),_0x4dd18c;},getMaxWorkers=(_0x31debe,_0x56f875,_0x3246d7)=>{const _0x3a057c=a14_0x2a4cf2,_0x42586b={'BzzRQ':function(_0x57e226,_0x65dd58){return _0x57e226(_0x65dd58);}};let _0x57847b=0x1;if(!helper['isUndefined'](_0x56f875[_0x3a057c(0x138)]))_0x57847b=_0x42586b['BzzRQ'](parseInt,_0x56f875[_0x3a057c(0x138)]);else{if(!helper[_0x3a057c(0x11e)](_0x31debe[_0x3a057c(0x15f)]))_0x57847b=_0x31debe[_0x3a057c(0x15f)];else!helper[_0x3a057c(0x11e)](_0x3246d7[_0x3a057c(0x15f)])&&(_0x57847b=_0x3246d7[_0x3a057c(0x15f)]);}return _0x57847b;};function a14_0x1d7c(){const _0xb49490=['../../helpers/testhub/utils','\x20test\x20files\x20to\x20run.','SDK_CLEANUP','Getting\x20your\x20jest\x20configs\x20from\x20','mMyDD','lycFM','test-observability','347670VYGZLD','qQxuB','WkNxg','slJWd','--config','testRunner','Deleted\x20fail-fast\x20state\x20folder:\x20','runInBand','customImplements','../utils/constants','../../helpers/testhub/testhubHandler','UQhNB','playwright','testContextOptions','../../helpers/performance/constants','platforms','../../helpers/percy/utils','getTCGConfigFilePaths','\x0amodule.exports\x20=\x20config;','inherit','kiAWI','FRAMEWORKS','BROWSERSTACK_TEST_OBSERVABILITY_YML','splice','../utils/clientTroubleshootingService','maxRetries','jest-config','readFileSync','EVENTS','setupFilesAfterEnv','PWefT','\x0a\x0a\x20\x20\x20\x20const\x20ReporterDispatcher\x20=\x20_interopRequireDefault(requireModule(\x27@jest/core/build/ReporterDispatcher.js\x27,\x20\x27@jest/core\x27)).default;\x20//node_modules/@jest/core/build/ReporterDispatcher.js\x0a\x20\x20\x20\x20const\x20fs\x20=\x20require(\x27fs\x27);\x0a\x20\x20\x20\x20const\x20path\x20=\x20require(\x27path\x27);\x0a\x20\x20\x20\x20const\x20helper\x20=\x20require(\x27../../../helpers/helper\x27);\x0a\x20\x20\x20\x20var\x20_someFunc\x20=\x20ReporterDispatcher.prototype.onRunComplete;\x0a\x20\x20\x20\x20ReporterDispatcher.prototype.onRunComplete\x20=\x20async\x20function\x20(testContexts,\x20results)\x20{\x0a\x20\x20\x20\x20\x20\x20results.numTotalTestSuites\x20=\x20results.numTotalTestSuites\x20*\x20','2727708lgXrmK','isUndefined','parallels__','winstonLogger','FhqeD','parse','runner','VDVIG','JEST_TEST_ORDER','jest_browserstack.config.js','../../helpers/playwright-helper','mhaXr','slice','getPackageVersion','workingDir','4046630wnvuVD','getInstance','../v2/browserstackCLI','win32','printBuildLink','PACKAGE_TYPE','isTestOrchestrationEnabled','RtFLl','81dLtjKR','ywaWZ','npx','capabilities','parallelsPerPlatform','isNotUndefined','95640oCHxZa','retryTestsOnFailure','info','jest-config/build/readConfigFileAndSetRootDir.js','rmdirSync','Error\x20while\x20parsing\x20','jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js','umUBP','testEnvironment','VYiXO','BROWSERSTACK_TEST_ACCESSIBILITY_YML','accessibilityOptions','checkAccessibilityPlatformConfig','1824geSppn','Playwright\x20not\x20detected\x20or\x20error\x20setting\x20up\x20Jest-Playwright\x20integration:','tRtcj','FtOwm','length','resolve','force','log','KDmDS','findIndex','failureThresholdCount','581120gCujSD','requireModule','cwd','EHHbp','../../helpers/test-observability/constants','jest_browserstack_results.json','Reodered\x20Test\x20Files:\x20','LYynS','setupFiles','existsSync','abortBuildOnFailure','Getting\x20your\x20jest\x20configs\x20from\x20package.json','../../helpers/accessibility-automation/helper','maxWorkers','package.json','QRwwl','debug','error\x20removing\x20tcg\x20config\x20file','apply','Modifying\x20jest\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','default','writeFileSync','yJdBh','RenrC','platform','testObservability','QtTpz','hMwqB','requirePWModule','ZcWHG','./test-observability/test-details','handleApp','proxySettings','Exception\x20in\x20stop\x20build\x20request\x20to\x20TestHub\x20:\x20','useW3C','join','Test\x20orchestration\x20is\x20enabled,\x20initializing\x20orchestration\x20handler','JEST','NuiaK','parseTestOrchestrationOptions','customCircus.js','rLRVV','Playwright\x20detected,\x20adding\x20Jest-Playwright\x20setup','../../helpers/logger','filterBrowserstackArgs','rmSync','turboScaleUrl','TlyER','config','ACPfq','errorMessage','finalExecution','json','MODULE','const\x20config=','./test-observability/helper','\x20with\x20browserstack\x20jest\x20configs','reorderTestFiles','HjpWS','@playwright/test','skipSessionStatus','getErrorMessageFromResults','data-hooks.js','recursive','425834LlRxgW','true','failFast','stop','initialize','JdBoU','BSTACK_JEST_TEST_ENV','testEnvironmentOptions','Deleting\x20','shutdown','test_before.setup.js','child_process','VwfuY','exitCode','6740DnCbWj','NHMSQ','unlinkSync','reporters','../../helpers/helper','testSequencer','requireSeleniumWebdriver','dZRWq','\x0a\x20\x20\x20\x20','zesCJ','start','env','mDijw','zIeVC','tgxYA',';\x0a\x20\x20\x20\x20\x20\x20fs.writeFileSync(path.join(__dirname,\x20\x27jest_browserstack_results.json\x27),\x20JSON.stringify(results));\x0a\x20\x20\x20\x20\x20\x20return\x20_someFunc.call(this,\x20testContexts,\x20results);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20var\x20_onTestFileResultOrig\x20=\x20ReporterDispatcher.prototype.onTestFileResult;\x0a\x20\x20\x20\x20ReporterDispatcher.prototype.onTestFileResult\x20=\x20async\x20function\x20(test,\x20testResult,\x20result)\x20{\x0a\x20\x20\x20\x20\x20\x20testResult.platform\x20=\x20helper.getPlatformName(test.context.config.capability);\x0a\x20\x20\x20\x20\x20\x20return\x20_onTestFileResultOrig.call(this,\x20test,\x20testResult,\x20result);\x0a\x20\x20\x20\x20}\x0a\x20\x20','Creating\x20','3BVIttK','end','BROWSERSTACK_CAPABILITIES','testTimeout','omYfQ','findTestFiles','cjs','jBvvH','timeout__','__isPlaywrightInstalled','customTestRunner.js','assign','GpjpA','Unable\x20to\x20find\x20jest-circus,\x20','lBKRU','USER_CONFIG_DETAILS_PATH','shouldProcessEventForTesthub','util','prepareCapabilities','error','FGmio','../../helpers/utilities','../../helpers/test-observability/utils','browserStackLogLevel','stringify','platformCaps','jest','yNoMj','jest_browserstack.config.cjs','../../helpers/BrowserStackSetup','push','browserStackPercyOptions'];a14_0x1d7c=function(){return _0xb49490;};return a14_0x1d7c();}function a14_0x2349(_0x292010,_0x479a3a){const _0x1d7c49=a14_0x1d7c();return a14_0x2349=function(_0x234932,_0x25c6aa){_0x234932=_0x234932-0x113;let _0x4b320c=_0x1d7c49[_0x234932];return _0x4b320c;},a14_0x2349(_0x292010,_0x479a3a);}async function run(_0x2525b1,_0x5bebbd,_0x4937ad){const _0x54ffc7=a14_0x2a4cf2,_0xf2e7ee={'slJWd':_0x54ffc7(0x163),'VwfuY':_0x54ffc7(0x1cb),'QRwwl':function(_0x37d5af,_0x32a496){return _0x37d5af(_0x32a496);},'LYynS':_0x54ffc7(0x18d),'NHMSQ':function(_0x2df791,_0x22f2fc,_0x2afa43,_0x358068){return _0x2df791(_0x22f2fc,_0x2afa43,_0x358068);},'jBvvH':function(_0x22b2ea,_0x2cd0e1){return _0x22b2ea!=_0x2cd0e1;},'uEdmq':'true','mDijw':function(_0x21b918,_0x22050e,_0xee0f44){return _0x21b918(_0x22050e,_0xee0f44);},'ACPfq':_0x54ffc7(0x165),'JdBoU':function(_0x224949,_0x514281){return _0x224949*_0x514281;},'dZRWq':function(_0x40dbdb,_0x255654){return _0x40dbdb===_0x255654;},'VYiXO':_0x54ffc7(0x1cd),'FhqeD':_0x54ffc7(0x126),'VDVIG':_0x54ffc7(0x1e0),'fXNkT':_0x54ffc7(0x157),'WkNxg':_0x54ffc7(0x1bb),'mhaXr':'customTestRunnerTemplate.js','kiAWI':'customEnvironment.js','rLRVV':'jest.setup.js','ZrYtg':'customSequencer.js','lycFM':_0x54ffc7(0x140),'tgxYA':'jest-circus','HjpWS':function(_0x2e7d3f,_0x3fd32b){return _0x2e7d3f(_0x3fd32b);},'RtFLl':_0x54ffc7(0x1d7),'QtTpz':_0x54ffc7(0x190),'UQhNB':_0x54ffc7(0x17a),'omYfQ':_0x54ffc7(0x19c),'zIeVC':'skipping\x20test_before\x20setup\x20since\x20selenium\x20not\x20found','PWefT':_0x54ffc7(0x1e4),'umUBP':_0x54ffc7(0x17c),'gUsKA':'test.setup.js','ZJOMu':_0x54ffc7(0x148),'tRtcj':'default','NuiaK':_0x54ffc7(0x176),'EHHbp':function(_0x4c8d6e,_0x19fa1a){return _0x4c8d6e>_0x19fa1a;},'lBKRU':'Showing\x20jest\x20logs\x20and\x20reporter\x20logs.','KDmDS':function(_0x7760a8,_0x591318,_0x2b55a9,_0x4cdc38){return _0x7760a8(_0x591318,_0x2b55a9,_0x4cdc38);},'yNoMj':_0x54ffc7(0x136),'FjjkA':_0x54ffc7(0x1dc),'ywaWZ':_0x54ffc7(0x12f),'TlyER':_0x54ffc7(0x1eb),'mMyDD':'close'},_0x1c115e=helper[_0x54ffc7(0x12a)](_0xf2e7ee[_0x54ffc7(0x159)]);global[_0x54ffc7(0x1ba)]=!!_0x1c115e;helper['isBrowserstackInfra']()?(await _0x4937ad[_0x54ffc7(0x196)](_0x2525b1),await helper[_0x54ffc7(0x171)](_0x4937ad[_0x54ffc7(0x182)])):await _0x4937ad['setupTCGAuth']();await _0xf2e7ee['NHMSQ'](checkPwandBootstrapCli,_0x1c115e,constants[_0x54ffc7(0x1ed)][_0x54ffc7(0x177)],_0x4937ad);if(!_0x4937ad[_0x54ffc7(0x182)])return;_0xf2e7ee[_0x54ffc7(0x1b8)](_0x4937ad[_0x54ffc7(0x182)]['testObservability'],null)?process['env']['BROWSERSTACK_TEST_OBSERVABILITY_YML']=_0x4937ad[_0x54ffc7(0x182)][_0x54ffc7(0x16b)]:process[_0x54ffc7(0x1ab)][_0x54ffc7(0x113)]=_0xf2e7ee['uEdmq'];const _0x30fa82=new TestOrchestrationHandler(_0x4937ad[_0x54ffc7(0x182)]),_0xdf1187=await _0xf2e7ee[_0x54ffc7(0x1ac)](getUserJestConfigs,_0x2525b1,_0x5bebbd);logger[_0x54ffc7(0x13c)](_0xf2e7ee[_0x54ffc7(0x183)]);const _0x4819bd=Object['assign']({},_0xdf1187);_0x4819bd[_0x54ffc7(0x199)]=Object[_0x54ffc7(0x1bc)]({},_0x4819bd[_0x54ffc7(0x199)],{'server':helper['getHubUrl'](_0x4937ad['config']),'environment':_0xdf1187[_0x54ffc7(0x142)]}),_0x4819bd[_0x54ffc7(0x199)][_0x54ffc7(0x1d0)]=_0xf2e7ee[_0x54ffc7(0x161)](getPercyOptions,_0x4937ad[_0x54ffc7(0x182)]);const _0x1e1ee3=helper[_0x54ffc7(0x174)](_0x4937ad[_0x54ffc7(0x182)]);!helper[_0x54ffc7(0x11e)](_0x4937ad['config'][_0x54ffc7(0x145)])&&(process[_0x54ffc7(0x1ab)]['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON[_0x54ffc7(0x1c9)](_0x4937ad[_0x54ffc7(0x182)][_0x54ffc7(0x145)]));if(!BrowserstackCLI[_0x54ffc7(0x12d)]()['isRunning']()){const _0x10a464=await TestHubHandler['launchBuild'](FRAMEWORKS[_0x54ffc7(0x177)],_0x4937ad);}const _0x342d50=helper[_0x54ffc7(0x1c3)](_0x4937ad[_0x54ffc7(0x182)],_0x1e1ee3,constants['FRAMEWORKS'][_0x54ffc7(0x177)]);process[_0x54ffc7(0x1ab)][_0x54ffc7(0x1b3)]=JSON[_0x54ffc7(0x1c9)](_0x342d50);let _0x5cb738=_0x4937ad[_0x54ffc7(0x182)]['accessibility'];_0x5cb738=_0x5cb738||accessibilityHelper[_0x54ffc7(0x146)](_0x4937ad['config']),process[_0x54ffc7(0x1ab)][_0x54ffc7(0x144)]=_0x5cb738,_0x4819bd[_0x54ffc7(0x199)][_0x54ffc7(0x137)]=_0x342d50,_0x4819bd[_0x54ffc7(0x199)]['serial__']=_0xf2e7ee[_0x54ffc7(0x1ac)](getSerial,_0x342d50,_0x2525b1),_0x4819bd[_0x54ffc7(0x199)][_0x54ffc7(0x11f)]=_0xf2e7ee[_0x54ffc7(0x1a1)](getMaxWorkers,_0x2525b1,_0x4937ad['config'],_0xdf1187),_0x4819bd[_0x54ffc7(0x199)][_0x54ffc7(0x172)]=_0x4937ad[_0x54ffc7(0x182)][_0x54ffc7(0x172)],_0x4819bd[_0x54ffc7(0x199)][_0x54ffc7(0x1b9)]=_0xf2e7ee[_0x54ffc7(0x197)](_0x2525b1[_0x54ffc7(0x1b4)],0x1)||0x1388,_0x4819bd[_0x54ffc7(0x199)]['skipSessionName']=_0x4937ad[_0x54ffc7(0x182)][_0x54ffc7(0x1e5)]['skipSessionName'],_0x4819bd[_0x54ffc7(0x199)][_0x54ffc7(0x18e)]=_0x4937ad['config'][_0x54ffc7(0x1e5)][_0x54ffc7(0x18e)],_0x4819bd[_0x54ffc7(0x199)][_0x54ffc7(0x1c8)]=_0x4937ad[_0x54ffc7(0x182)]['logLevel'],_0x4819bd['testEnvironmentOptions']['turboScaleUrl']=_0x4937ad['config'][_0x54ffc7(0x180)],_0x4819bd[_0x54ffc7(0x199)][_0x54ffc7(0x1ca)]=_0x4937ad[_0x54ffc7(0x182)][_0x54ffc7(0x1e7)];const _0x12efc0=helper[_0x54ffc7(0x179)](_0x4937ad['config']);if(!helper['isEmpty'](_0x12efc0)){helper[_0x54ffc7(0x139)](_0x12efc0[_0x54ffc7(0x13b)])&&(_0x4819bd[_0x54ffc7(0x199)]['retries__']=_0x12efc0['retryTestsOnFailure'][_0x54ffc7(0x116)]);if(helper[_0x54ffc7(0x139)](_0x12efc0[_0x54ffc7(0x15c)])&&helper['isNotUndefined'](_0x12efc0[_0x54ffc7(0x15c)][_0x54ffc7(0x12b)])){const _0x182c15={};_0x182c15[_0x54ffc7(0x151)]=_0x12efc0[_0x54ffc7(0x15c)]['maxFailures'],_0x182c15['workingDir']=_0x12efc0[_0x54ffc7(0x15c)][_0x54ffc7(0x12b)],_0x4819bd[_0x54ffc7(0x199)][_0x54ffc7(0x194)]=_0x182c15;}}let _0x2c4528='';_0xf2e7ee[_0x54ffc7(0x1a7)](helper['getPackageType'](),constants[_0x54ffc7(0x131)][_0x54ffc7(0x187)])?_0x2c4528=_0xf2e7ee[_0x54ffc7(0x143)]:_0x2c4528=_0xf2e7ee[_0x54ffc7(0x121)];const _0xb9d001=_0x2c4528,_0x17d31d=path[_0x54ffc7(0x175)](__dirname,_0xf2e7ee[_0x54ffc7(0x124)],_0xf2e7ee['fXNkT']),_0x28d231=path[_0x54ffc7(0x175)](__dirname,_0xf2e7ee[_0x54ffc7(0x124)],_0xf2e7ee[_0x54ffc7(0x1da)]),_0x3412af=path[_0x54ffc7(0x175)](__dirname,_0xf2e7ee[_0x54ffc7(0x124)],_0xf2e7ee[_0x54ffc7(0x128)]);_0x4819bd[_0x54ffc7(0x142)]&&(process[_0x54ffc7(0x1ab)][_0x54ffc7(0x198)]=_0x4819bd[_0x54ffc7(0x142)]);_0x4819bd['testEnvironment']=path[_0x54ffc7(0x175)](__dirname,_0xf2e7ee[_0x54ffc7(0x124)],_0xf2e7ee[_0x54ffc7(0x1ec)]),_0x4819bd[_0x54ffc7(0x123)]=_0x28d231,_0x4819bd[_0x54ffc7(0x11a)]=_0x4819bd[_0x54ffc7(0x11a)]||[],_0x4819bd['setupFilesAfterEnv']['push'](path[_0x54ffc7(0x175)](__dirname,_0xf2e7ee[_0x54ffc7(0x17b)]));_0x30fa82[_0x54ffc7(0x132)]()&&(_0x4819bd[_0x54ffc7(0x1a5)]=path['join'](__dirname,_0xf2e7ee[_0x54ffc7(0x124)],_0xf2e7ee['ZrYtg']));if(testhubUtils[_0x54ffc7(0x1c1)]()){let _0x573796=null;try{_0x573796=helper[_0x54ffc7(0x153)](_0xf2e7ee[_0x54ffc7(0x1d6)],_0xf2e7ee[_0x54ffc7(0x1ae)]);}catch(_0x1f170d){_0xf2e7ee[_0x54ffc7(0x18c)](debug,_0x54ffc7(0x1be)+_0x1f170d);}_0x573796&&(_0x4819bd[_0x54ffc7(0x11a)][_0x54ffc7(0x1cf)](path[_0x54ffc7(0x175)](__dirname,_0xf2e7ee[_0x54ffc7(0x133)],_0xf2e7ee[_0x54ffc7(0x16c)])),_0x4819bd[_0x54ffc7(0x1dd)]=path['join'](__dirname,_0xf2e7ee[_0x54ffc7(0x124)],_0xf2e7ee[_0x54ffc7(0x1e3)]));}_0x4819bd[_0x54ffc7(0x15a)]=_0x4819bd[_0x54ffc7(0x15a)]||[];try{helper[_0x54ffc7(0x1a6)](),_0x4819bd[_0x54ffc7(0x15a)][_0x54ffc7(0x1cf)](path['join'](__dirname,_0xf2e7ee[_0x54ffc7(0x1b5)]));}catch{logger[_0x54ffc7(0x162)](_0xf2e7ee[_0x54ffc7(0x1ad)]);}try{helper[_0x54ffc7(0x16e)][_0x54ffc7(0x164)](null,[_0xf2e7ee[_0x54ffc7(0x159)],_0xf2e7ee[_0x54ffc7(0x11b)]]),logger[_0x54ffc7(0x162)](_0xf2e7ee[_0x54ffc7(0x141)]),_0x4819bd[_0x54ffc7(0x15a)][_0x54ffc7(0x1cf)](path[_0x54ffc7(0x175)](__dirname,_0xf2e7ee['gUsKA']));}catch(_0x1143d0){logger[_0x54ffc7(0x162)](_0xf2e7ee['ZJOMu'],_0x1143d0);}_0x4819bd[_0x54ffc7(0x1a3)]=_0x4819bd[_0x54ffc7(0x1a3)]||[_0xf2e7ee[_0x54ffc7(0x149)]],_0xf2e7ee[_0x54ffc7(0x1ac)](updateTestRerunConfig,_0x4819bd,_0x4937ad);const _0x408769=fs[_0x54ffc7(0x118)](_0x3412af);fs['writeFileSync'](_0x4819bd['runner'],_0x54ffc7(0x1a8)+_0x408769+_0x54ffc7(0x11c)+_0x4937ad[_0x54ffc7(0x182)][_0x54ffc7(0x1e7)][_0x54ffc7(0x14b)]+_0x54ffc7(0x1af)),logger[_0x54ffc7(0x13c)](_0x54ffc7(0x1b0)+_0xb9d001+_0x54ffc7(0x18a)),fs[_0x54ffc7(0x167)](_0xb9d001,_0x54ffc7(0x188)+JSON['stringify'](_0x4819bd)+_0x54ffc7(0x1ea));if(_0x30fa82['isTestOrchestrationEnabled']()){logger[_0x54ffc7(0x162)](_0xf2e7ee[_0x54ffc7(0x178)]);const _0x5dee37=await _0x30fa82[_0x54ffc7(0x1b6)](_0x4819bd,_0x5bebbd[_0x54ffc7(0x129)](0x1),_0xb9d001);logger[_0x54ffc7(0x162)]('Found:\x20'+JSON['stringify'](_0x5dee37)+_0x54ffc7(0x1d2));const _0x42ff38=await _0x30fa82[_0x54ffc7(0x18b)](_0x5dee37);logger[_0x54ffc7(0x162)](_0x54ffc7(0x158)+JSON[_0x54ffc7(0x1c9)](_0x42ff38)),_0x42ff38&&_0xf2e7ee[_0x54ffc7(0x155)](_0x42ff38['length'],0x0)&&(process[_0x54ffc7(0x1ab)][_0x54ffc7(0x125)]=_0x42ff38?.[_0x54ffc7(0x175)](','));}logger['info'](_0xf2e7ee[_0x54ffc7(0x1bf)]);testhubUtils[_0x54ffc7(0x1c1)]()&&TestDetails['setup']();helper[_0x54ffc7(0x17e)]({},_0x5bebbd),PerformanceTester[_0x54ffc7(0x1b2)](PerformanceEvents['SDK_SETUP']);const _0x34ca94=_0xf2e7ee[_0x54ffc7(0x14f)](spawn,_0xf2e7ee[_0x54ffc7(0x1cc)],[_0xf2e7ee[_0x54ffc7(0x19e)],_0xf2e7ee['FjjkA'],_0xb9d001,..._0x5bebbd['slice'](0x1)],{'shell':_0xf2e7ee[_0x54ffc7(0x1a7)](process[_0x54ffc7(0x16a)],_0xf2e7ee[_0x54ffc7(0x135)]),'stdio':_0xf2e7ee[_0x54ffc7(0x181)],'env':Object['assign']({},process['env'])});_0x34ca94['on'](_0xf2e7ee[_0x54ffc7(0x1d5)],async _0x47cc10=>{const _0x59d5c5=_0x54ffc7;PerformanceTester[_0x59d5c5(0x1aa)](PerformanceEvents[_0x59d5c5(0x1d3)]);try{const {browserstackFolderPath:_0x144793,tcgConfigPath:_0xd6bc81}=helper[_0x59d5c5(0x1e9)]();fs[_0x59d5c5(0x1a2)](_0xd6bc81),fs[_0x59d5c5(0x13e)](_0x144793);}catch(_0x3d028){logger['debug'](_0xf2e7ee[_0x59d5c5(0x1db)],_0x3d028);}process[_0x59d5c5(0x19f)]=_0x47cc10,logger['debug']('child\x20process\x20exited\x20with\x20code\x20'+_0x47cc10),logger[_0x59d5c5(0x13c)](_0x59d5c5(0x19a)+_0xb9d001);if(helper[_0x59d5c5(0x139)](_0x12efc0)&&helper[_0x59d5c5(0x139)](_0x12efc0[_0x59d5c5(0x15c)])&&fs[_0x59d5c5(0x15b)](_0x12efc0[_0x59d5c5(0x15c)][_0x59d5c5(0x12b)]))try{const _0x2f1544={};_0x2f1544[_0x59d5c5(0x191)]=!![],_0x2f1544[_0x59d5c5(0x14d)]=!![],fs[_0x59d5c5(0x17f)](_0x12efc0[_0x59d5c5(0x15c)]['workingDir'],_0x2f1544),logger[_0x59d5c5(0x162)](_0x59d5c5(0x1de)+_0x12efc0[_0x59d5c5(0x15c)]['workingDir']);}catch(_0xa8b39d){logger[_0x59d5c5(0x1c4)]('Error\x20while\x20deleting\x20fail-fast\x20state\x20folder:\x20'+_0xa8b39d);}let _0x61b43d=null;if(fs['existsSync'](_0x17d31d)){_0x61b43d=fs[_0x59d5c5(0x118)](_0x17d31d);try{_0x61b43d=JSON[_0x59d5c5(0x122)](_0x61b43d);}catch(_0x533ecd){logger['debug'](_0x59d5c5(0x13f)+_0x17d31d+',\x20'+_0x61b43d+'\x20:\x20'+_0x533ecd);}fs[_0x59d5c5(0x1a2)](_0x17d31d);}fs[_0x59d5c5(0x1a2)](_0xb9d001),fs[_0x59d5c5(0x1a2)](_0x28d231),_0x61b43d&&(_0x4937ad[_0x59d5c5(0x184)]=helper[_0x59d5c5(0x18f)](_0x61b43d,_0xf2e7ee[_0x59d5c5(0x19e)],_0x4937ad)),testOpsHelper[_0x59d5c5(0x130)](),TestDetails[_0x59d5c5(0x19b)]();try{await TestHubHandler[_0x59d5c5(0x195)](),await BrowserstackCLI[_0x59d5c5(0x12d)]()[_0x59d5c5(0x195)]();}catch(_0x51653c){console[_0x59d5c5(0x14e)](_0x51653c),_0xf2e7ee[_0x59d5c5(0x161)](debug,_0x59d5c5(0x173)+util['format'](_0x51653c));}await utilities[_0x59d5c5(0x185)](_0x4937ad);});}module['exports']=run;