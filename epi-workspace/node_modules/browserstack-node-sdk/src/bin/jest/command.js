#!/usr/bin/env node
'use strict';function a14_0x3694(_0x4dc459,_0x1ad064){const _0x2ae277=a14_0x2ae2();return a14_0x3694=function(_0x36946b,_0x16001a){_0x36946b=_0x36946b-0xb3;let _0x4512f7=_0x2ae277[_0x36946b];return _0x4512f7;},a14_0x3694(_0x4dc459,_0x1ad064);}const a14_0xa84d45=a14_0x3694;(function(_0x52d9a6,_0x193894){const _0x20b108=a14_0x3694,_0x5b9f03=_0x52d9a6();while(!![]){try{const _0x4c5a4c=parseInt(_0x20b108(0xee))/0x1+parseInt(_0x20b108(0x18c))/0x2+-parseInt(_0x20b108(0xcf))/0x3+parseInt(_0x20b108(0xd2))/0x4+-parseInt(_0x20b108(0xd6))/0x5+-parseInt(_0x20b108(0x125))/0x6*(-parseInt(_0x20b108(0x14c))/0x7)+-parseInt(_0x20b108(0xcc))/0x8*(-parseInt(_0x20b108(0xfa))/0x9);if(_0x4c5a4c===_0x193894)break;else _0x5b9f03['push'](_0x5b9f03['shift']());}catch(_0x55d1cd){_0x5b9f03['push'](_0x5b9f03['shift']());}}}(a14_0x2ae2,0x5a19a));function a14_0x2ae2(){const _0x14b0e8=['../../helpers/playwright-helper','KfPdm','customImplements','maxRetries','config','xBMtV','join','maxFailures','hokNL','testEnvironment','customTestRunner.js','win32','YuNVT','ljxCg','Creating\x20','../v2/browserstackCLI','reporters','capabilities','slice','printBuildLink','jest_browserstack_results.json','vnrUr','XFUwp','FRAMEWORKS','isEmpty','start','turboScaleUrl','BROWSERSTACK_TEST_ACCESSIBILITY_YML','Playwright\x20not\x20detected\x20or\x20error\x20setting\x20up\x20Jest-Playwright\x20integration:','shouldProcessEventForTesthub','TLtaw','jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js','Deleted\x20fail-fast\x20state\x20folder:\x20','BKTfa','debug','assign','failureThresholdCount','VnskW','existsSync','retryTestsOnFailure','YjoeY','child\x20process\x20exited\x20with\x20code\x20','1175952OlMmoJ','exitCode','isNotUndefined','rmSync','proxySettings','runInBand','VcSSw','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','XdjAO','splice','serial__','findTestFiles','BHnKk','jAlTX','haMAo','\x20with\x20browserstack\x20jest\x20configs','requireSeleniumWebdriver','inherit','Gsfnb','testRunner','../utils/constants','eeLjt','jest_browserstack.config.cjs','package.json','yglcL','hjydS','32728KJnksi','errorMessage','testTimeout','2149200tlerGb','resolve','parseTestOrchestrationOptions','308628BgJFOe','platformCaps','findIndex','WqBQj','2274795Lmsbjt','readFileSync','browserStackLogLevel','Deleting\x20','Modifying\x20jest\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','customSequencer.js','unlinkSync','platforms','hUuBS','jest-config/build/readConfigFileAndSetRootDir.js','sOXCH','getTCGConfigFilePaths','SDK_SETUP','parallelsPerPlatform','isRunning','apply','prepareCapabilities','isUndefined','Reodered\x20Test\x20Files:\x20','../../helpers/utilities','maxWorkers','filterBrowserstackArgs','setupFiles','checkAccessibilityPlatformConfig','694084NiIADK','Found:\x20','false','launchBuild','useW3C','handleApp','SqyMb','\x0a\x0a\x20\x20\x20\x20const\x20ReporterDispatcher\x20=\x20_interopRequireDefault(requireModule(\x27@jest/core/build/ReporterDispatcher.js\x27,\x20\x27@jest/core\x27)).default;\x20//node_modules/@jest/core/build/ReporterDispatcher.js\x0a\x20\x20\x20\x20const\x20fs\x20=\x20require(\x27fs\x27);\x0a\x20\x20\x20\x20const\x20path\x20=\x20require(\x27path\x27);\x0a\x20\x20\x20\x20const\x20helper\x20=\x20require(\x27../../../helpers/helper\x27);\x0a\x20\x20\x20\x20var\x20_someFunc\x20=\x20ReporterDispatcher.prototype.onRunComplete;\x0a\x20\x20\x20\x20ReporterDispatcher.prototype.onRunComplete\x20=\x20async\x20function\x20(testContexts,\x20results)\x20{\x0a\x20\x20\x20\x20\x20\x20results.numTotalTestSuites\x20=\x20results.numTotalTestSuites\x20*\x20','MODULE','\x20:\x20','--config','isTestOrchestrationEnabled','81pDAmNY','requireModule','xuHuQ','bpjvp','../../helpers/BrowserStackSetup','jbFFz','json','BROWSERSTACK_TEST_OBSERVABILITY_YML','USER_CONFIG_DETAILS_PATH','cwd','close','customEnvironment.js','setup','Unable\x20to\x20find\x20jest-circus,\x20','reorderTestFiles','stop','cPqos','log','MnYVS','shutdown','../../helpers/performance/performance-tester','stringify','parse','runner','JEST','BsGvM','env','accessibilityOptions','PACKAGE_TYPE','../../helpers/testhub/utils','skipSessionStatus','HMDzQ','recursive','../../helpers/percy/utils','Error\x20while\x20deleting\x20fail-fast\x20state\x20folder:\x20','nxPFe','true','parallels__','cjs','skipping\x20test_before\x20setup\x20since\x20selenium\x20not\x20found','rmdirSync','\x0a\x20\x20\x20\x20','Test\x20orchestration\x20is\x20enabled,\x20initializing\x20orchestration\x20handler','6ILaBsn','jest','isBrowserstackInfra','force','../../helpers/testhub/testhubHandler','end','testContextOptions','uAhKj','Getting\x20your\x20jest\x20configs\x20from\x20','skipSessionName','IUWko','push','info','error','WAjVB','requirePWModule','initialize','HJMlk','../../helpers/helper','Showing\x20jest\x20logs\x20and\x20reporter\x20logs.','BPiHq','jest.config.','testEnvironmentOptions','abortBuildOnFailure','bRQkO','qlFEy','BROWSERSTACK_CAPABILITIES','test.setup.js','jest-circus','customTestRunnerTemplate.js','__isPlaywrightInstalled','getPackageVersion','SzsEK','playwright','setupTCGAuth','testObservability','hCbnB','EVENTS','data-hooks.js','1010611OczuDi','../utils/clientTroubleshootingService','aYEjI','workingDir','finalExecution','getInstance','test_before.setup.js','jest_browserstack.config.js','oqROy','Playwright\x20detected,\x20adding\x20Jest-Playwright\x20setup','\x20test\x20files\x20to\x20run.','default','BSTACK_JEST_TEST_ENV','length','setupFilesAfterEnv','writeFileSync','testSequencer','SDK_CLEANUP','timeout__','../../helpers/performance/constants','ccCDx','child_process'];a14_0x2ae2=function(){return _0x14b0e8;};return a14_0x2ae2();}const fs=require('fs'),path=require('path'),util=require('util'),{spawn}=require(a14_0xa84d45(0x161)),logger=require('../../helpers/logger')['winstonLogger'],{default:BrowserStackSetup}=require(a14_0xa84d45(0xfe)),helper=require(a14_0xa84d45(0x137)),utilities=require(a14_0xa84d45(0xe9)),constants=require(a14_0xa84d45(0xc6)),accessibilityHelper=require('../../helpers/accessibility-automation/helper'),{updateTestRerunConfig}=require('./test-observability/helper'),testOpsHelper=require('../../helpers/test-observability/utils'),{debug}=require('../../helpers/test-observability/utils'),TestDetails=require('./test-observability/test-details'),{getPercyOptions}=require(a14_0xa84d45(0x11b)),TestHubHandler=require(a14_0xa84d45(0x129)),testhubUtils=require(a14_0xa84d45(0x117)),{FRAMEWORKS}=require('../../helpers/test-observability/constants'),PerformanceTester=require(a14_0xa84d45(0x10e)),PerformanceEvents=require(a14_0xa84d45(0x15f))[a14_0xa84d45(0x14a)],TestOrchestrationHandler=require('../../helpers/test-orchestration/testOrchestrationHandler'),BrowserstackCLI=require(a14_0xa84d45(0x171)),{checkPwandBootstrapCli}=require(a14_0xa84d45(0x162)),ClientTroubleShootingService=require(a14_0xa84d45(0x14d)),getUserJestConfigs=async(_0x2e5d09,_0x5cbf44)=>{const _0x1a78f9=a14_0xa84d45,_0x33a6fd={'nxPFe':_0x1a78f9(0xdf),'BvECB':'jest-config','TFTDl':function(_0x446b99,_0xff6892){return _0x446b99||_0xff6892;},'WqBQj':function(_0x548c36,_0x1bc30b){return _0x548c36(_0x1bc30b);},'qlFEy':_0x1a78f9(0xc9),'HJMlk':'Getting\x20your\x20jest\x20configs\x20from\x20package.json','jbFFz':'mjs','aYEjI':_0x1a78f9(0x120),'KfPdm':_0x1a78f9(0x100)},_0x146c35=helper['requireModule'](_0x33a6fd[_0x1a78f9(0x11d)],_0x33a6fd['BvECB']),_0x2daf11=_0x5cbf44[_0x1a78f9(0xd4)](_0xb92cfc=>_0xb92cfc===_0x1a78f9(0xf8));if(!helper[_0x1a78f9(0xe7)](_0x2e5d09[_0x1a78f9(0x166)])){logger[_0x1a78f9(0x131)](_0x1a78f9(0x12d)+_0x2e5d09[_0x1a78f9(0x166)]),process[_0x1a78f9(0x114)][_0x1a78f9(0x102)]=_0x2e5d09[_0x1a78f9(0x166)];const _0x2aca4b=await(0x0,_0x146c35[_0x1a78f9(0x157)])(path[_0x1a78f9(0xd0)](_0x2e5d09[_0x1a78f9(0x166)]));return _0x5cbf44[_0x1a78f9(0xbb)](_0x2daf11,0x2),_0x33a6fd['TFTDl'](_0x2aca4b,{});}const _0x3742d0=_0x33a6fd[_0x1a78f9(0xd5)](require,path[_0x1a78f9(0x168)](process[_0x1a78f9(0x103)](),_0x33a6fd[_0x1a78f9(0x13e)]));if(_0x3742d0['jest'])return logger[_0x1a78f9(0x131)](_0x33a6fd[_0x1a78f9(0x136)]),_0x3742d0[_0x1a78f9(0x126)];const _0x3d1cd4=['js',_0x33a6fd[_0x1a78f9(0xff)],_0x33a6fd[_0x1a78f9(0x14e)],_0x33a6fd[_0x1a78f9(0x163)],'ts'];for(const _0x139422 of _0x3d1cd4){const _0x607a02=path[_0x1a78f9(0x168)](process[_0x1a78f9(0x103)](),_0x1a78f9(0x13a)+_0x139422);if(fs[_0x1a78f9(0x188)](_0x607a02)){process[_0x1a78f9(0x114)][_0x1a78f9(0x102)]=_0x607a02;const _0x2bcb56=await(0x0,_0x146c35[_0x1a78f9(0x157)])(_0x607a02);return _0x2bcb56;}}return{};},getSerial=(_0x5aa02e,_0x551180)=>{const _0x2a1d1e=a14_0xa84d45,_0x4416c2={};_0x4416c2[_0x2a1d1e(0x18a)]=_0x2a1d1e(0x11e),_0x4416c2[_0x2a1d1e(0xb8)]=function(_0x2b577b,_0x5ba95b){return _0x2b577b>_0x5ba95b;},_0x4416c2[_0x2a1d1e(0xfc)]=function(_0x18d044,_0x1f3a2e){return _0x18d044>_0x1f3a2e;},_0x4416c2[_0x2a1d1e(0xcb)]=_0x2a1d1e(0xf0);const _0x25c0ad=_0x4416c2;let _0x8febe6=_0x25c0ad[_0x2a1d1e(0x18a)];return _0x25c0ad['VcSSw'](_0x5aa02e[_0x2a1d1e(0x159)],0x1)&&(!_0x551180[_0x2a1d1e(0xb7)]&&(helper[_0x2a1d1e(0xe7)](_0x551180[_0x2a1d1e(0xea)])||_0x25c0ad['xuHuQ'](_0x551180[_0x2a1d1e(0xea)],0x1)))&&(_0x8febe6=_0x25c0ad[_0x2a1d1e(0xcb)]),_0x8febe6;},getMaxWorkers=(_0x79787d,_0x73f0e4,_0x549672)=>{const _0xbe823e=a14_0xa84d45,_0x1bf05b={'haMAo':function(_0x124956,_0x473240){return _0x124956(_0x473240);}};let _0x1ecc40=0x1;if(!helper['isUndefined'](_0x73f0e4[_0xbe823e(0xe3)]))_0x1ecc40=_0x1bf05b[_0xbe823e(0xc0)](parseInt,_0x73f0e4[_0xbe823e(0xe3)]);else{if(!helper['isUndefined'](_0x79787d[_0xbe823e(0xea)]))_0x1ecc40=_0x79787d['maxWorkers'];else!helper['isUndefined'](_0x549672[_0xbe823e(0xea)])&&(_0x1ecc40=_0x549672[_0xbe823e(0xea)]);}return _0x1ecc40;};async function run(_0x532dd4,_0x6a8b65,_0x33ab97){const _0x24aba7=a14_0xa84d45,_0x453727={'VnskW':'error\x20removing\x20tcg\x20config\x20file','hUuBS':_0x24aba7(0x126),'YuNVT':function(_0x3acd87,_0x3aab71){return _0x3acd87(_0x3aab71);},'IUWko':'@playwright/test','sOXCH':function(_0x373df6,_0x18257d,_0x42f763,_0x2fbb43){return _0x373df6(_0x18257d,_0x42f763,_0x2fbb43);},'BsGvM':function(_0x59b072,_0x4f49e7){return _0x59b072!=_0x4f49e7;},'HMDzQ':_0x24aba7(0x11e),'XdjAO':function(_0x5e3bf5,_0x1832df,_0x4edd61){return _0x5e3bf5(_0x1832df,_0x4edd61);},'SqyMb':_0x24aba7(0xda),'NPame':function(_0x2044ce,_0x5ae6ef){return _0x2044ce(_0x5ae6ef);},'BPiHq':function(_0x5a4780,_0x2f70cb,_0x44fc3e){return _0x5a4780(_0x2f70cb,_0x44fc3e);},'wwPWg':function(_0x4336fd,_0x4aad77){return _0x4336fd*_0x4aad77;},'vnrUr':function(_0x29854d,_0x25a62a){return _0x29854d===_0x25a62a;},'oqROy':_0x24aba7(0xc8),'bRQkO':_0x24aba7(0x153),'ccCDx':_0x24aba7(0x164),'jAlTX':_0x24aba7(0x176),'hokNL':_0x24aba7(0x16c),'cPqos':_0x24aba7(0x142),'MnYVS':_0x24aba7(0x105),'ljxCg':'jest.setup.js','bpjvp':_0x24aba7(0xdb),'hCbnB':_0x24aba7(0x181),'uAhKj':_0x24aba7(0x141),'ooOaT':'test-observability','BHnKk':_0x24aba7(0x14b),'vlSkL':'customCircus.js','pWxgH':_0x24aba7(0x152),'RLcnT':_0x24aba7(0x121),'OribO':_0x24aba7(0x146),'dwQea':_0x24aba7(0x155),'BKTfa':_0x24aba7(0x140),'XFUwp':_0x24aba7(0x17e),'Gsfnb':'default','LuFXa':_0x24aba7(0x124),'WAjVB':function(_0x2ea0fb,_0x25ce80){return _0x2ea0fb>_0x25ce80;},'TLtaw':_0x24aba7(0x138),'QadmT':function(_0x13a8a4,_0x28819e,_0x12e984,_0x17eb82){return _0x13a8a4(_0x28819e,_0x12e984,_0x17eb82);},'xBMtV':'npx','eeLjt':_0x24aba7(0xf8),'gwkUB':_0x24aba7(0x16d),'yglcL':_0x24aba7(0xc3),'SzsEK':_0x24aba7(0x104)},_0x5ad633=helper[_0x24aba7(0x144)](_0x453727[_0x24aba7(0x12f)]);global[_0x24aba7(0x143)]=!!_0x5ad633;helper[_0x24aba7(0x127)]()?(await _0x33ab97[_0x24aba7(0x135)](_0x532dd4),await helper[_0x24aba7(0xf3)](_0x33ab97[_0x24aba7(0x166)])):await _0x33ab97[_0x24aba7(0x147)]();await _0x453727[_0x24aba7(0xe0)](checkPwandBootstrapCli,_0x5ad633,constants[_0x24aba7(0x179)][_0x24aba7(0x112)],_0x33ab97);if(!_0x33ab97[_0x24aba7(0x166)])return;_0x453727[_0x24aba7(0x113)](_0x33ab97[_0x24aba7(0x166)]['testObservability'],null)?process['env'][_0x24aba7(0x101)]=_0x33ab97[_0x24aba7(0x166)][_0x24aba7(0x148)]:process[_0x24aba7(0x114)][_0x24aba7(0x101)]=_0x453727[_0x24aba7(0x119)];const _0x1ac3e5=new TestOrchestrationHandler(_0x33ab97[_0x24aba7(0x166)]),_0x494c79=await _0x453727[_0x24aba7(0xba)](getUserJestConfigs,_0x532dd4,_0x6a8b65);logger[_0x24aba7(0x131)](_0x453727[_0x24aba7(0xf4)]);const _0xb87d51=Object['assign']({},_0x494c79);_0xb87d51['testEnvironmentOptions']=Object['assign']({},_0xb87d51[_0x24aba7(0x13b)],{'server':helper['getHubUrl'](_0x33ab97[_0x24aba7(0x166)]),'environment':_0x494c79[_0x24aba7(0x16b)]}),_0xb87d51['testEnvironmentOptions']['browserStackPercyOptions']=_0x453727['NPame'](getPercyOptions,_0x33ab97[_0x24aba7(0x166)]);const _0x5e636c=helper[_0x24aba7(0xf2)](_0x33ab97[_0x24aba7(0x166)]);!helper[_0x24aba7(0xe7)](_0x33ab97[_0x24aba7(0x166)][_0x24aba7(0x115)])&&(process[_0x24aba7(0x114)][_0x24aba7(0xb9)]=JSON['stringify'](_0x33ab97[_0x24aba7(0x166)][_0x24aba7(0x115)]));if(!BrowserstackCLI['getInstance']()[_0x24aba7(0xe4)]()){const _0x3d0a12=await TestHubHandler[_0x24aba7(0xf1)](FRAMEWORKS[_0x24aba7(0x112)],_0x33ab97);}const _0x3001c6=helper[_0x24aba7(0xe6)](_0x33ab97[_0x24aba7(0x166)],_0x5e636c,constants[_0x24aba7(0x179)]['JEST']);process[_0x24aba7(0x114)][_0x24aba7(0x13f)]=JSON['stringify'](_0x3001c6);let _0x5b2e8f=_0x33ab97[_0x24aba7(0x166)]['accessibility'];_0x5b2e8f=_0x5b2e8f||accessibilityHelper[_0x24aba7(0xed)](_0x33ab97[_0x24aba7(0x166)]),process['env'][_0x24aba7(0x17d)]=_0x5b2e8f,_0xb87d51['testEnvironmentOptions'][_0x24aba7(0x173)]=_0x3001c6,_0xb87d51[_0x24aba7(0x13b)][_0x24aba7(0xbc)]=_0x453727[_0x24aba7(0x139)](getSerial,_0x3001c6,_0x532dd4),_0xb87d51['testEnvironmentOptions'][_0x24aba7(0x11f)]=_0x453727[_0x24aba7(0xe0)](getMaxWorkers,_0x532dd4,_0x33ab97[_0x24aba7(0x166)],_0x494c79),_0xb87d51[_0x24aba7(0x13b)]['proxySettings']=_0x33ab97[_0x24aba7(0x166)][_0x24aba7(0xb6)],_0xb87d51[_0x24aba7(0x13b)][_0x24aba7(0x15e)]=_0x453727['wwPWg'](_0x532dd4[_0x24aba7(0xce)],0x1)||0x1388,_0xb87d51['testEnvironmentOptions'][_0x24aba7(0x12e)]=_0x33ab97[_0x24aba7(0x166)][_0x24aba7(0x12b)][_0x24aba7(0x12e)],_0xb87d51[_0x24aba7(0x13b)][_0x24aba7(0x118)]=_0x33ab97['config'][_0x24aba7(0x12b)][_0x24aba7(0x118)],_0xb87d51[_0x24aba7(0x13b)][_0x24aba7(0xd8)]=_0x33ab97[_0x24aba7(0x166)]['logLevel'],_0xb87d51[_0x24aba7(0x13b)]['turboScaleUrl']=_0x33ab97[_0x24aba7(0x166)][_0x24aba7(0x17c)],_0xb87d51['testEnvironmentOptions'][_0x24aba7(0xd3)]=_0x33ab97[_0x24aba7(0x166)][_0x24aba7(0xdd)];const _0x546037=helper[_0x24aba7(0xd1)](_0x33ab97[_0x24aba7(0x166)]);if(!helper[_0x24aba7(0x17a)](_0x546037)){helper[_0x24aba7(0xb4)](_0x546037[_0x24aba7(0x189)])&&(_0xb87d51[_0x24aba7(0x13b)]['retries__']=_0x546037[_0x24aba7(0x189)][_0x24aba7(0x165)]);if(helper[_0x24aba7(0xb4)](_0x546037['abortBuildOnFailure'])&&helper['isNotUndefined'](_0x546037[_0x24aba7(0x13c)][_0x24aba7(0x14f)])){const _0x4e8678={};_0x4e8678[_0x24aba7(0x186)]=_0x546037[_0x24aba7(0x13c)][_0x24aba7(0x169)],_0x4e8678['workingDir']=_0x546037[_0x24aba7(0x13c)][_0x24aba7(0x14f)],_0xb87d51[_0x24aba7(0x13b)]['failFast']=_0x4e8678;}}let _0x53d724='';_0x453727[_0x24aba7(0x177)](helper['getPackageType'](),constants[_0x24aba7(0x116)][_0x24aba7(0xf6)])?_0x53d724=_0x453727[_0x24aba7(0x154)]:_0x53d724=_0x453727[_0x24aba7(0x13d)];const _0x437a81=_0x53d724,_0x5b91c0=path[_0x24aba7(0x168)](__dirname,_0x453727[_0x24aba7(0x160)],_0x453727[_0x24aba7(0xbf)]),_0x3e3836=path[_0x24aba7(0x168)](__dirname,_0x453727[_0x24aba7(0x160)],_0x453727[_0x24aba7(0x16a)]),_0x1ec86f=path[_0x24aba7(0x168)](__dirname,_0x453727[_0x24aba7(0x160)],_0x453727[_0x24aba7(0x10a)]);_0xb87d51[_0x24aba7(0x16b)]&&(process[_0x24aba7(0x114)][_0x24aba7(0x158)]=_0xb87d51['testEnvironment']);_0xb87d51[_0x24aba7(0x16b)]=path[_0x24aba7(0x168)](__dirname,_0x453727[_0x24aba7(0x160)],_0x453727[_0x24aba7(0x10c)]),_0xb87d51['runner']=_0x3e3836,_0xb87d51['setupFilesAfterEnv']=_0xb87d51['setupFilesAfterEnv']||[],_0xb87d51[_0x24aba7(0x15a)][_0x24aba7(0x130)](path[_0x24aba7(0x168)](__dirname,_0x453727[_0x24aba7(0x16f)]));_0x1ac3e5[_0x24aba7(0xf9)]()&&(_0xb87d51[_0x24aba7(0x15c)]=path['join'](__dirname,_0x453727[_0x24aba7(0x160)],_0x453727[_0x24aba7(0xfd)]));if(testhubUtils[_0x24aba7(0x17f)]()){let _0x4d5f96=null;try{_0x4d5f96=helper[_0x24aba7(0xfb)](_0x453727[_0x24aba7(0x149)],_0x453727[_0x24aba7(0x12c)]);}catch(_0x39a626){_0x453727['NPame'](debug,_0x24aba7(0x107)+_0x39a626);}_0x4d5f96&&(_0xb87d51[_0x24aba7(0x15a)][_0x24aba7(0x130)](path[_0x24aba7(0x168)](__dirname,_0x453727['ooOaT'],_0x453727[_0x24aba7(0xbe)])),_0xb87d51[_0x24aba7(0xc5)]=path[_0x24aba7(0x168)](__dirname,_0x453727[_0x24aba7(0x160)],_0x453727['vlSkL']));}_0xb87d51[_0x24aba7(0xec)]=_0xb87d51[_0x24aba7(0xec)]||[];try{helper[_0x24aba7(0xc2)](),_0xb87d51[_0x24aba7(0xec)][_0x24aba7(0x130)](path[_0x24aba7(0x168)](__dirname,_0x453727['pWxgH']));}catch{logger['debug'](_0x453727['RLcnT']);}try{helper[_0x24aba7(0x134)][_0x24aba7(0xe5)](null,[_0x453727[_0x24aba7(0x12f)],_0x453727['OribO']]),logger[_0x24aba7(0x184)](_0x453727['dwQea']),_0xb87d51[_0x24aba7(0xec)][_0x24aba7(0x130)](path[_0x24aba7(0x168)](__dirname,_0x453727[_0x24aba7(0x183)]));}catch(_0x241bc4){logger[_0x24aba7(0x184)](_0x453727[_0x24aba7(0x178)],_0x241bc4);}_0xb87d51[_0x24aba7(0x172)]=_0xb87d51[_0x24aba7(0x172)]||[_0x453727[_0x24aba7(0xc4)]],_0x453727[_0x24aba7(0x139)](updateTestRerunConfig,_0xb87d51,_0x33ab97);const _0x1ba96c=fs[_0x24aba7(0xd7)](_0x1ec86f);fs[_0x24aba7(0x15b)](_0xb87d51[_0x24aba7(0x111)],_0x24aba7(0x123)+_0x1ba96c+_0x24aba7(0xf5)+_0x33ab97[_0x24aba7(0x166)][_0x24aba7(0xdd)][_0x24aba7(0x159)]+';\x0a\x20\x20\x20\x20\x20\x20fs.writeFileSync(path.join(__dirname,\x20\x27jest_browserstack_results.json\x27),\x20JSON.stringify(results));\x0a\x20\x20\x20\x20\x20\x20return\x20_someFunc.call(this,\x20testContexts,\x20results);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20var\x20_onTestFileResultOrig\x20=\x20ReporterDispatcher.prototype.onTestFileResult;\x0a\x20\x20\x20\x20ReporterDispatcher.prototype.onTestFileResult\x20=\x20async\x20function\x20(test,\x20testResult,\x20result)\x20{\x0a\x20\x20\x20\x20\x20\x20testResult.platform\x20=\x20helper.getPlatformName(test.context.config.capability);\x0a\x20\x20\x20\x20\x20\x20return\x20_onTestFileResultOrig.call(this,\x20test,\x20testResult,\x20result);\x0a\x20\x20\x20\x20}\x0a\x20\x20'),logger[_0x24aba7(0x131)](_0x24aba7(0x170)+_0x437a81+_0x24aba7(0xc1)),fs['writeFileSync'](_0x437a81,'const\x20config='+JSON[_0x24aba7(0x10f)](_0xb87d51)+'\x0amodule.exports\x20=\x20config;');if(_0x1ac3e5[_0x24aba7(0xf9)]()){logger[_0x24aba7(0x184)](_0x453727['LuFXa']);const _0xab53af=await _0x1ac3e5[_0x24aba7(0xbd)](_0xb87d51,_0x6a8b65[_0x24aba7(0x174)](0x1),_0x437a81);logger[_0x24aba7(0x184)](_0x24aba7(0xef)+JSON['stringify'](_0xab53af)+_0x24aba7(0x156));const _0x34f781=await _0x1ac3e5[_0x24aba7(0x108)](_0xab53af);logger[_0x24aba7(0x184)](_0x24aba7(0xe8)+JSON[_0x24aba7(0x10f)](_0x34f781)),_0x34f781&&_0x453727[_0x24aba7(0x133)](_0x34f781[_0x24aba7(0x159)],0x0)&&(process[_0x24aba7(0x114)]['JEST_TEST_ORDER']=_0x34f781?.[_0x24aba7(0x168)](','));}logger[_0x24aba7(0x131)](_0x453727[_0x24aba7(0x180)]);testhubUtils[_0x24aba7(0x17f)]()&&TestDetails[_0x24aba7(0x106)]();helper[_0x24aba7(0xeb)]({},_0x6a8b65),PerformanceTester[_0x24aba7(0x12a)](PerformanceEvents[_0x24aba7(0xe2)]);const _0x19b0a5=_0x453727['QadmT'](spawn,_0x453727[_0x24aba7(0x167)],[_0x453727[_0x24aba7(0xde)],_0x453727[_0x24aba7(0xc7)],_0x437a81,..._0x6a8b65[_0x24aba7(0x174)](0x1)],{'shell':_0x453727[_0x24aba7(0x177)](process['platform'],_0x453727['gwkUB']),'stdio':_0x453727[_0x24aba7(0xca)],'env':Object[_0x24aba7(0x185)]({},process['env'])});_0x19b0a5['on'](_0x453727[_0x24aba7(0x145)],async _0x3614cf=>{const _0x23af37=_0x24aba7;PerformanceTester[_0x23af37(0x17b)](PerformanceEvents[_0x23af37(0x15d)]);try{const {browserstackFolderPath:_0x45bb65,tcgConfigPath:_0x64c1a4}=helper[_0x23af37(0xe1)]();fs[_0x23af37(0xdc)](_0x64c1a4),fs[_0x23af37(0x122)](_0x45bb65);}catch(_0x5193d3){logger[_0x23af37(0x184)](_0x453727[_0x23af37(0x187)],_0x5193d3);}process[_0x23af37(0xb3)]=_0x3614cf,logger[_0x23af37(0x184)](_0x23af37(0x18b)+_0x3614cf),logger[_0x23af37(0x131)](_0x23af37(0xd9)+_0x437a81);if(helper['isNotUndefined'](_0x546037)&&helper[_0x23af37(0xb4)](_0x546037[_0x23af37(0x13c)])&&fs['existsSync'](_0x546037[_0x23af37(0x13c)][_0x23af37(0x14f)]))try{const _0xe8a3c6={};_0xe8a3c6[_0x23af37(0x11a)]=!![],_0xe8a3c6[_0x23af37(0x128)]=!![],fs[_0x23af37(0xb5)](_0x546037[_0x23af37(0x13c)][_0x23af37(0x14f)],_0xe8a3c6),logger[_0x23af37(0x184)](_0x23af37(0x182)+_0x546037['abortBuildOnFailure'][_0x23af37(0x14f)]);}catch(_0x3ca1a5){logger[_0x23af37(0x132)](_0x23af37(0x11c)+_0x3ca1a5);}let _0x16fa47=null;if(fs[_0x23af37(0x188)](_0x5b91c0)){_0x16fa47=fs[_0x23af37(0xd7)](_0x5b91c0);try{_0x16fa47=JSON[_0x23af37(0x110)](_0x16fa47);}catch(_0x3ec655){logger[_0x23af37(0x184)]('Error\x20while\x20parsing\x20'+_0x5b91c0+',\x20'+_0x16fa47+_0x23af37(0xf7)+_0x3ec655);}fs['unlinkSync'](_0x5b91c0);}fs[_0x23af37(0xdc)](_0x437a81),fs[_0x23af37(0xdc)](_0x3e3836),_0x16fa47&&(_0x33ab97[_0x23af37(0xcd)]=helper['getErrorMessageFromResults'](_0x16fa47,_0x453727['hUuBS'],_0x33ab97)),testOpsHelper[_0x23af37(0x175)](),TestDetails[_0x23af37(0x10d)]();try{await TestHubHandler[_0x23af37(0x109)](),await BrowserstackCLI[_0x23af37(0x151)]()['stop']();}catch(_0x35e002){console[_0x23af37(0x10b)](_0x35e002),_0x453727[_0x23af37(0x16e)](debug,'Exception\x20in\x20stop\x20build\x20request\x20to\x20TestHub\x20:\x20'+util['format'](_0x35e002));}await utilities[_0x23af37(0x150)](_0x33ab97);});}module['exports']=run;