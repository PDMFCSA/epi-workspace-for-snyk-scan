#!/usr/bin/env node
'use strict';function a14_0x566a(){const _0x5614ea=['assign','jest-config','platform','child_process','rmdirSync','parse','jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js','getHubUrl','jest.config.','../v2/browserstackCLI','xDSUX','reporters','data-hooks.js','testSequencer','log','setupTCGAuth','3311811ZKVzdN','stop','accessibility','bwIDs','isBrowserstackInfra','shouldProcessEventForTesthub','HHtcH','SDK_SETUP','capabilities','JEST_TEST_ORDER','PACKAGE_TYPE','existsSync','start','launchBuild','1761456onoRqh','jest_browserstack.config.cjs','test_before.setup.js','useW3C','TTRIL','gnQKa','isUndefined','testEnvironment','env','Pnbtp','parallelsPerPlatform','test-observability','../../helpers/logger',',\x20CLI\x20running:\x20','setup','format','BROWSERSTACK_CAPABILITIES','skipSessionStatus','Deleting\x20','../../helpers/test-observability/utils','OkvQx','[Jest\x20Command]\x20Accessibility\x20enabled:\x20','mLcOO','browserStackPercyOptions','nprRI','const\x20config=','default','eFfSY','wKAmD','67980nGaGsY','logLevel','testEnvironmentOptions','winstonLogger','checkAccessibilityPlatformConfig','kdYxT','Skipping\x20accessibility\x20env\x20setup\x20for\x20Playwright\x20due\x20to:\x20','testContextOptions','getInstance','workingDir','setupFiles','isTestOrchestrationEnabled','356828bodPQu','dVrqE','getPackageType','jest_browserstack.config.js','BROWSERSTACK_TEST_ACCESSIBILITY_YML','./test-observability/helper','parseTestOrchestrationOptions','playwright','USER_CONFIG_DETAILS_PATH','timeout__','eFfiH','end','Getting\x20your\x20jest\x20configs\x20from\x20','__isPlaywrightInstalled','proxySettings','9sdHpWk','tudtZ','unlinkSync','customTestRunnerTemplate.js','FRAMEWORKS','dozpH','maxFailures','Unable\x20to\x20find\x20jest-circus,\x20','dyAoL','finalExecution','npx','findTestFiles','wFSwM','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','Test\x20orchestration\x20is\x20enabled,\x20initializing\x20orchestration\x20handler','jcjNw','runInBand','error\x20removing\x20tcg\x20config\x20file','Playwright\x20not\x20detected\x20or\x20error\x20setting\x20up\x20Jest-Playwright\x20integration:','147236lDFpNr','jest-circus','MODULE','../../helpers/performance/constants','customImplements','customTestRunner.js','Deleted\x20fail-fast\x20state\x20folder:\x20','./test-observability/test-details','getPackageVersion','accessibilityOptions','error','EXAhx','turboScaleUrl','../../helpers/performance/performance-tester','scZTJ','mjs','exports','\x0a\x20\x20\x20\x20','readFileSync','\x20:\x20','writeFileSync','false','ozHCm','join','../utils/clientTroubleshootingService','UkSvN','isNotUndefined','abortBuildOnFailure','BROWSERSTACK_TEST_ACCESSIBILITY_PLATFORM','Cgwoj','--config','../../helpers/helper','CGcHZ','jest','runner','sQMJr','FSUTI','push','iDaxV','TadsA','PfUii','SDK_CLEANUP','\x0amodule.exports\x20=\x20config;','info','../../helpers/percy/utils','Reodered\x20Test\x20Files:\x20','Getting\x20your\x20jest\x20configs\x20from\x20package.json','mXmZw','close','APDlQ','jest_browserstack_results.json','GubRF','failFast','Found:\x20','FiKZx','rTJiM','../../helpers/utilities','skipSessionName','stringify','../../helpers/testhub/utils','initialize','prepareCapabilities','cjs','XGZQT','true','ftvoP','errorMessage','../../helpers/test-orchestration/testOrchestrationHandler','@playwright/test','JEST','config','\x20test\x20files\x20to\x20run.','maxWorkers','NdjRd','../../helpers/accessibility-automation/helper','testRunner','setupFilesAfterEnv','../../helpers/BrowserStackSetup','getErrorMessageFromResults','KtPNm','gKsvH','BROWSERSTACK_TEST_OBSERVABILITY_YML','[Jest\x20Command]\x20Playwright\x20detected,\x20setting\x20accessibility\x20platform:\x20','testObservability','../../helpers/test-observability/constants','EVENTS',',\x20BROWSERSTACK_TEST_ACCESSIBILITY_PLATFORM=','513848cyUObh','BSTACK_JEST_TEST_ENV','win32','getTCGConfigFilePaths','child\x20process\x20exited\x20with\x20code\x20','Modifying\x20jest\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','jest-config/build/readConfigFileAndSetRootDir.js','7IJuQLn','retryTestsOnFailure','retries__','Error\x20while\x20deleting\x20fail-fast\x20state\x20folder:\x20','Error\x20while\x20parsing\x20','cwd','length','parallels__','HlPPW','Showing\x20jest\x20logs\x20and\x20reporter\x20logs.','splice','\x20with\x20browserstack\x20jest\x20configs','212373VRMQAE','gJkye','platforms','debug'];a14_0x566a=function(){return _0x5614ea;};return a14_0x566a();}const a14_0xd6ac49=a14_0x22ca;(function(_0x29ef27,_0x2585f1){const _0x4575c8=a14_0x22ca,_0x250286=_0x29ef27();while(!![]){try{const _0x2b5e75=-parseInt(_0x4575c8(0xe5))/0x1+-parseInt(_0x4575c8(0x152))/0x2*(parseInt(_0x4575c8(0x13f))/0x3)+parseInt(_0x4575c8(0x130))/0x4+-parseInt(_0x4575c8(0x124))/0x5+parseInt(_0x4575c8(0x107))/0x6+parseInt(_0x4575c8(0xd9))/0x7*(-parseInt(_0x4575c8(0x1a9))/0x8)+parseInt(_0x4575c8(0xf9))/0x9;if(_0x2b5e75===_0x2585f1)break;else _0x250286['push'](_0x250286['shift']());}catch(_0x4ca594){_0x250286['push'](_0x250286['shift']());}}}(a14_0x566a,0x3a85c));const fs=require('fs'),path=require('path'),util=require('util'),{spawn}=require(a14_0xd6ac49(0xec)),logger=require(a14_0xd6ac49(0x113))[a14_0xd6ac49(0x127)],{default:BrowserStackSetup}=require(a14_0xd6ac49(0x19f)),helper=require(a14_0xd6ac49(0x171)),utilities=require(a14_0xd6ac49(0x18a)),constants=require('../utils/constants'),accessibilityHelper=require(a14_0xd6ac49(0x19c)),{updateTestRerunConfig}=require(a14_0xd6ac49(0x135)),testOpsHelper=require(a14_0xd6ac49(0x11a)),{debug}=require(a14_0xd6ac49(0x11a)),TestDetails=require(a14_0xd6ac49(0x159)),{getPercyOptions}=require(a14_0xd6ac49(0x17e)),TestHubHandler=require('../../helpers/testhub/testhubHandler'),testhubUtils=require(a14_0xd6ac49(0x18d)),{FRAMEWORKS}=require(a14_0xd6ac49(0x1a6)),PerformanceTester=require(a14_0xd6ac49(0x15f)),PerformanceEvents=require(a14_0xd6ac49(0x155))[a14_0xd6ac49(0x1a7)],TestOrchestrationHandler=require(a14_0xd6ac49(0x195)),BrowserstackCLI=require(a14_0xd6ac49(0xf2)),{checkPwandBootstrapCli}=require('../../helpers/playwright-helper'),ClientTroubleShootingService=require(a14_0xd6ac49(0x16a)),{checkAccessibilityPlatformConfig}=require('../../helpers/accessibility-automation/helper'),getUserJestConfigs=async(_0x45817b,_0x51aeb6)=>{const _0x58cbac=a14_0xd6ac49,_0x3cfc28={'ELWit':_0x58cbac(0x1af),'HHtcH':_0x58cbac(0xea),'cBqcH':function(_0xf1976a,_0x459618){return _0xf1976a||_0x459618;},'mLcOO':function(_0x3419cb,_0x3c2661){return _0x3419cb(_0x3c2661);},'XyQBb':'package.json','Ebfvo':_0x58cbac(0x180),'sQMJr':_0x58cbac(0x161),'xflsu':_0x58cbac(0x190),'FSUTI':'json'},_0x1ac432=helper['requireModule'](_0x3cfc28['ELWit'],_0x3cfc28[_0x58cbac(0xff)]),_0x52cd56=_0x51aeb6['findIndex'](_0x134336=>_0x134336===_0x58cbac(0x170));if(!helper[_0x58cbac(0x10d)](_0x45817b[_0x58cbac(0x198)])){logger['info'](_0x58cbac(0x13c)+_0x45817b[_0x58cbac(0x198)]),process[_0x58cbac(0x10f)][_0x58cbac(0x138)]=_0x45817b[_0x58cbac(0x198)];const _0x162b38=await(0x0,_0x1ac432[_0x58cbac(0x121)])(path['resolve'](_0x45817b[_0x58cbac(0x198)]));return _0x51aeb6[_0x58cbac(0xe3)](_0x52cd56,0x2),_0x3cfc28['cBqcH'](_0x162b38,{});}const _0x5e4b61=_0x3cfc28[_0x58cbac(0x11d)](require,path['join'](process['cwd'](),_0x3cfc28['XyQBb']));if(_0x5e4b61[_0x58cbac(0x173)])return logger[_0x58cbac(0x17d)](_0x3cfc28['Ebfvo']),_0x5e4b61[_0x58cbac(0x173)];const _0x5577fb=['js',_0x3cfc28[_0x58cbac(0x175)],_0x3cfc28['xflsu'],_0x3cfc28[_0x58cbac(0x176)],'ts'];for(const _0x354f88 of _0x5577fb){const _0x428dfd=path[_0x58cbac(0x169)](process[_0x58cbac(0xde)](),_0x58cbac(0xf1)+_0x354f88);if(fs[_0x58cbac(0x104)](_0x428dfd)){process[_0x58cbac(0x10f)][_0x58cbac(0x138)]=_0x428dfd;const _0x3d9d56=await(0x0,_0x1ac432[_0x58cbac(0x121)])(_0x428dfd);return _0x3d9d56;}}return{};},getSerial=(_0x23eb35,_0x59e63c)=>{const _0x290217=a14_0xd6ac49,_0x964624={};_0x964624[_0x290217(0x191)]=_0x290217(0x192),_0x964624['OkvQx']=function(_0x534d81,_0x5d152d){return _0x534d81>_0x5d152d;},_0x964624[_0x290217(0x189)]=function(_0x4f3f0d,_0x428d47){return _0x4f3f0d>_0x428d47;},_0x964624[_0x290217(0xf3)]=_0x290217(0x167);const _0x88603=_0x964624;let _0xcdb318=_0x88603['XGZQT'];return _0x88603[_0x290217(0x11b)](_0x23eb35[_0x290217(0xdf)],0x1)&&(!_0x59e63c[_0x290217(0x14f)]&&(helper[_0x290217(0x10d)](_0x59e63c['maxWorkers'])||_0x88603[_0x290217(0x189)](_0x59e63c['maxWorkers'],0x1)))&&(_0xcdb318=_0x88603['xDSUX']),_0xcdb318;},getMaxWorkers=(_0x888639,_0x59765c,_0x4697fc)=>{const _0x250321=a14_0xd6ac49,_0x19ec6c={'UkSvN':function(_0x4652a3,_0x390ec8){return _0x4652a3(_0x390ec8);}};let _0x55f71b=0x1;if(!helper['isUndefined'](_0x59765c[_0x250321(0x111)]))_0x55f71b=_0x19ec6c[_0x250321(0x16b)](parseInt,_0x59765c[_0x250321(0x111)]);else{if(!helper['isUndefined'](_0x888639[_0x250321(0x19a)]))_0x55f71b=_0x888639[_0x250321(0x19a)];else!helper[_0x250321(0x10d)](_0x4697fc[_0x250321(0x19a)])&&(_0x55f71b=_0x4697fc[_0x250321(0x19a)]);}return _0x55f71b;};function a14_0x22ca(_0x1c6017,_0x465160){const _0x566a83=a14_0x566a();return a14_0x22ca=function(_0x22ca51,_0x104b95){_0x22ca51=_0x22ca51-0xd9;let _0x1a9a39=_0x566a83[_0x22ca51];return _0x1a9a39;},a14_0x22ca(_0x1c6017,_0x465160);}async function run(_0xa4f1a6,_0x10b640,_0x3eee22){const _0x307438=a14_0xd6ac49,_0x1c9bd9={'tudtZ':_0x307438(0x150),'dyAoL':'jest','FvuFY':function(_0x1840ab,_0x35e3ab){return _0x1840ab(_0x35e3ab);},'jcjNw':_0x307438(0x196),'ozHCm':function(_0x33ee4a,_0xf31757,_0x5f2129,_0x56b504){return _0x33ee4a(_0xf31757,_0x5f2129,_0x56b504);},'wKAmD':function(_0x16080a,_0x525bab){return _0x16080a!=_0x525bab;},'TTRIL':_0x307438(0x192),'ftvoP':function(_0x52d007,_0x1f2fa4,_0x22b20c){return _0x52d007(_0x1f2fa4,_0x22b20c);},'EiJSQ':_0x307438(0x1ae),'NdjRd':function(_0xf6d92f,_0x221c57){return _0xf6d92f(_0x221c57);},'GubRF':_0x307438(0x167),'IUBsi':function(_0x1c1978,_0x262e43,_0x1ca82d){return _0x1c1978(_0x262e43,_0x1ca82d);},'YCvVh':function(_0x76662e,_0x2a0f51,_0x1948f4,_0xf0add4){return _0x76662e(_0x2a0f51,_0x1948f4,_0xf0add4);},'eFfSY':function(_0x42c2cd,_0x229165){return _0x42c2cd*_0x229165;},'Cgwoj':function(_0x186c80,_0x520cf8){return _0x186c80===_0x520cf8;},'scZTJ':_0x307438(0x108),'Pnbtp':_0x307438(0x133),'APDlQ':_0x307438(0x156),'EXAhx':_0x307438(0x184),'PElbQ':_0x307438(0x157),'gnQKa':_0x307438(0x142),'eFfiH':'customEnvironment.js','gMclc':'jest.setup.js','gJkye':'customSequencer.js','bwIDs':_0x307438(0xef),'sUTaa':_0x307438(0x153),'jydEo':function(_0x2b9d5e,_0x9bf93b){return _0x2b9d5e(_0x9bf93b);},'CGcHZ':_0x307438(0x112),'mXmZw':_0x307438(0xf5),'TadsA':'customCircus.js','dVrqE':_0x307438(0x109),'KtPNm':'skipping\x20test_before\x20setup\x20since\x20selenium\x20not\x20found','kdYxT':_0x307438(0x137),'cfVNY':'Playwright\x20detected,\x20adding\x20Jest-Playwright\x20setup','wFSwM':'test.setup.js','nprRI':_0x307438(0x151),'tHQiQ':_0x307438(0x121),'dozpH':function(_0x52b4a6,_0x31f8ca,_0x5a39e5){return _0x52b4a6(_0x31f8ca,_0x5a39e5);},'zNerQ':_0x307438(0x14d),'gKsvH':function(_0x1a857b,_0x35131a){return _0x1a857b>_0x35131a;},'iDaxV':_0x307438(0xe2),'FiKZx':_0x307438(0x149),'bziTG':_0x307438(0x170),'HlPPW':function(_0x5d6e3c,_0x754a8c){return _0x5d6e3c===_0x754a8c;},'irByL':_0x307438(0x1ab),'QrYDE':'inherit','PfUii':_0x307438(0x182)},_0x2016e5=helper[_0x307438(0x15a)](_0x1c9bd9[_0x307438(0x14e)]);global[_0x307438(0x13d)]=!!_0x2016e5;helper[_0x307438(0xfd)]()?(await _0x3eee22[_0x307438(0x18e)](_0xa4f1a6),await helper['handleApp'](_0x3eee22[_0x307438(0x198)])):await _0x3eee22[_0x307438(0xf8)]();await _0x1c9bd9[_0x307438(0x168)](checkPwandBootstrapCli,_0x2016e5,constants['FRAMEWORKS'][_0x307438(0x197)],_0x3eee22);if(!_0x3eee22[_0x307438(0x198)])return;_0x1c9bd9[_0x307438(0x123)](_0x3eee22[_0x307438(0x198)][_0x307438(0x1a5)],null)?process['env'][_0x307438(0x1a3)]=_0x3eee22['config'][_0x307438(0x1a5)]:process['env'][_0x307438(0x1a3)]=_0x1c9bd9[_0x307438(0x10b)];const _0x2762ab=new TestOrchestrationHandler(_0x3eee22[_0x307438(0x198)]),_0x1bfd57=await _0x1c9bd9[_0x307438(0x193)](getUserJestConfigs,_0xa4f1a6,_0x10b640);logger[_0x307438(0x17d)](_0x1c9bd9['EiJSQ']);const _0x37878b=Object['assign']({},_0x1bfd57);_0x37878b[_0x307438(0x126)]=Object[_0x307438(0xe9)]({},_0x37878b[_0x307438(0x126)],{'server':helper[_0x307438(0xf0)](_0x3eee22[_0x307438(0x198)]),'environment':_0x1bfd57[_0x307438(0x10e)]}),_0x37878b[_0x307438(0x126)][_0x307438(0x11e)]=_0x1c9bd9[_0x307438(0x19b)](getPercyOptions,_0x3eee22[_0x307438(0x198)]);const _0x2b7e85=helper[_0x307438(0x10a)](_0x3eee22[_0x307438(0x198)]);!helper[_0x307438(0x10d)](_0x3eee22[_0x307438(0x198)][_0x307438(0x15b)])&&(process['env'][_0x307438(0x14c)]=JSON[_0x307438(0x18c)](_0x3eee22[_0x307438(0x198)][_0x307438(0x15b)]));if(!BrowserstackCLI['getInstance']()['isRunning']()){const _0x2042cf=await TestHubHandler[_0x307438(0x106)](FRAMEWORKS[_0x307438(0x197)],_0x3eee22);}const _0x1e1989=helper[_0x307438(0x18f)](_0x3eee22[_0x307438(0x198)],_0x2b7e85,constants[_0x307438(0x143)][_0x307438(0x197)]);process['env'][_0x307438(0x117)]=JSON[_0x307438(0x18c)](_0x1e1989);let _0x5aeeec=_0x3eee22[_0x307438(0x198)][_0x307438(0xfb)];_0x5aeeec=_0x5aeeec||accessibilityHelper[_0x307438(0x128)](_0x3eee22[_0x307438(0x198)]),process[_0x307438(0x10f)][_0x307438(0x134)]=_0x5aeeec,logger[_0x307438(0xe8)](_0x307438(0x11c)+_0x5aeeec+_0x307438(0x114)+BrowserstackCLI[_0x307438(0x12c)]()['isRunning']());if(_0x2016e5)try{const _0x286c3f=_0x1c9bd9[_0x307438(0x19b)](checkAccessibilityPlatformConfig,_0x3eee22[_0x307438(0x198)]);process[_0x307438(0x10f)][_0x307438(0x16e)]=_0x286c3f?_0x1c9bd9[_0x307438(0x10b)]:_0x1c9bd9[_0x307438(0x185)],logger['debug'](_0x307438(0x1a4)+_0x286c3f+_0x307438(0x1a8)+process[_0x307438(0x10f)][_0x307438(0x16e)]);}catch(_0x5c9e15){logger[_0x307438(0xe8)](_0x307438(0x12a)+util['format'](_0x5c9e15));}_0x37878b[_0x307438(0x126)][_0x307438(0x101)]=_0x1e1989,_0x37878b[_0x307438(0x126)]['serial__']=_0x1c9bd9['IUBsi'](getSerial,_0x1e1989,_0xa4f1a6),_0x37878b[_0x307438(0x126)][_0x307438(0xe0)]=_0x1c9bd9['YCvVh'](getMaxWorkers,_0xa4f1a6,_0x3eee22[_0x307438(0x198)],_0x1bfd57),_0x37878b['testEnvironmentOptions'][_0x307438(0x13e)]=_0x3eee22[_0x307438(0x198)]['proxySettings'],_0x37878b[_0x307438(0x126)][_0x307438(0x139)]=_0x1c9bd9[_0x307438(0x122)](_0xa4f1a6['testTimeout'],0x1)||0x1388,_0x37878b[_0x307438(0x126)][_0x307438(0x18b)]=_0x3eee22[_0x307438(0x198)][_0x307438(0x12b)][_0x307438(0x18b)],_0x37878b[_0x307438(0x126)][_0x307438(0x118)]=_0x3eee22[_0x307438(0x198)][_0x307438(0x12b)][_0x307438(0x118)],_0x37878b[_0x307438(0x126)]['browserStackLogLevel']=_0x3eee22[_0x307438(0x198)][_0x307438(0x125)],_0x37878b['testEnvironmentOptions'][_0x307438(0x15e)]=_0x3eee22[_0x307438(0x198)][_0x307438(0x15e)],_0x37878b[_0x307438(0x126)]['platformCaps']=_0x3eee22[_0x307438(0x198)][_0x307438(0xe7)];const _0x27deca=helper[_0x307438(0x136)](_0x3eee22[_0x307438(0x198)]);if(!helper['isEmpty'](_0x27deca)){helper[_0x307438(0x16c)](_0x27deca[_0x307438(0xda)])&&(_0x37878b['testEnvironmentOptions'][_0x307438(0xdb)]=_0x27deca[_0x307438(0xda)]['maxRetries']);if(helper[_0x307438(0x16c)](_0x27deca[_0x307438(0x16d)])&&helper[_0x307438(0x16c)](_0x27deca[_0x307438(0x16d)][_0x307438(0x12d)])){const _0x47d637={};_0x47d637['failureThresholdCount']=_0x27deca[_0x307438(0x16d)][_0x307438(0x145)],_0x47d637['workingDir']=_0x27deca[_0x307438(0x16d)][_0x307438(0x12d)],_0x37878b[_0x307438(0x126)][_0x307438(0x186)]=_0x47d637;}}let _0x93c6d0='';_0x1c9bd9[_0x307438(0x16f)](helper[_0x307438(0x132)](),constants[_0x307438(0x103)][_0x307438(0x154)])?_0x93c6d0=_0x1c9bd9[_0x307438(0x160)]:_0x93c6d0=_0x1c9bd9[_0x307438(0x110)];const _0x18ee9c=_0x93c6d0,_0x4faa78=path[_0x307438(0x169)](__dirname,_0x1c9bd9[_0x307438(0x183)],_0x1c9bd9[_0x307438(0x15d)]),_0x1831ea=path[_0x307438(0x169)](__dirname,_0x1c9bd9[_0x307438(0x183)],_0x1c9bd9['PElbQ']),_0x387523=path[_0x307438(0x169)](__dirname,_0x1c9bd9[_0x307438(0x183)],_0x1c9bd9[_0x307438(0x10c)]);_0x37878b[_0x307438(0x10e)]&&(process[_0x307438(0x10f)][_0x307438(0x1aa)]=_0x37878b[_0x307438(0x10e)]);_0x37878b[_0x307438(0x10e)]=path[_0x307438(0x169)](__dirname,_0x1c9bd9[_0x307438(0x183)],_0x1c9bd9[_0x307438(0x13a)]),_0x37878b[_0x307438(0x174)]=_0x1831ea,_0x37878b[_0x307438(0x19e)]=_0x37878b[_0x307438(0x19e)]||[],_0x37878b[_0x307438(0x19e)][_0x307438(0x177)](path['join'](__dirname,_0x1c9bd9['gMclc']));_0x2762ab[_0x307438(0x12f)]()&&(_0x37878b[_0x307438(0xf6)]=path[_0x307438(0x169)](__dirname,_0x1c9bd9[_0x307438(0x183)],_0x1c9bd9[_0x307438(0xe6)]));if(testhubUtils['shouldProcessEventForTesthub']()){let _0x9b0548=null;try{_0x9b0548=helper['requireModule'](_0x1c9bd9[_0x307438(0xfc)],_0x1c9bd9['sUTaa']);}catch(_0x28bf45){_0x1c9bd9['jydEo'](debug,_0x307438(0x146)+_0x28bf45);}_0x9b0548&&(_0x37878b['setupFilesAfterEnv']['push'](path['join'](__dirname,_0x1c9bd9[_0x307438(0x172)],_0x1c9bd9[_0x307438(0x181)])),_0x37878b[_0x307438(0x19d)]=path[_0x307438(0x169)](__dirname,_0x1c9bd9[_0x307438(0x183)],_0x1c9bd9[_0x307438(0x179)]));}_0x37878b[_0x307438(0x12e)]=_0x37878b[_0x307438(0x12e)]||[];try{helper['requireSeleniumWebdriver'](),_0x37878b[_0x307438(0x12e)]['push'](path[_0x307438(0x169)](__dirname,_0x1c9bd9[_0x307438(0x131)]));}catch{logger[_0x307438(0xe8)](_0x1c9bd9[_0x307438(0x1a1)]);}try{helper['requirePWModule']['apply'](null,[_0x1c9bd9['jcjNw'],_0x1c9bd9[_0x307438(0x129)]]),logger[_0x307438(0xe8)](_0x1c9bd9['cfVNY']),_0x37878b['setupFiles'][_0x307438(0x177)](path[_0x307438(0x169)](__dirname,_0x1c9bd9[_0x307438(0x14b)]));}catch(_0x3c508e){logger['debug'](_0x1c9bd9[_0x307438(0x11f)],_0x3c508e);}_0x37878b[_0x307438(0xf4)]=_0x37878b['reporters']||[_0x1c9bd9['tHQiQ']],_0x1c9bd9[_0x307438(0x144)](updateTestRerunConfig,_0x37878b,_0x3eee22);const _0x3f4151=fs[_0x307438(0x164)](_0x387523);fs[_0x307438(0x166)](_0x37878b['runner'],_0x307438(0x163)+_0x3f4151+'\x0a\x0a\x20\x20\x20\x20const\x20ReporterDispatcher\x20=\x20_interopRequireDefault(requireModule(\x27@jest/core/build/ReporterDispatcher.js\x27,\x20\x27@jest/core\x27)).default;\x20//node_modules/@jest/core/build/ReporterDispatcher.js\x0a\x20\x20\x20\x20const\x20fs\x20=\x20require(\x27fs\x27);\x0a\x20\x20\x20\x20const\x20path\x20=\x20require(\x27path\x27);\x0a\x20\x20\x20\x20const\x20helper\x20=\x20require(\x27../../../helpers/helper\x27);\x0a\x20\x20\x20\x20var\x20_someFunc\x20=\x20ReporterDispatcher.prototype.onRunComplete;\x0a\x20\x20\x20\x20ReporterDispatcher.prototype.onRunComplete\x20=\x20async\x20function\x20(testContexts,\x20results)\x20{\x0a\x20\x20\x20\x20\x20\x20results.numTotalTestSuites\x20=\x20results.numTotalTestSuites\x20*\x20'+_0x3eee22[_0x307438(0x198)][_0x307438(0xe7)][_0x307438(0xdf)]+';\x0a\x20\x20\x20\x20\x20\x20fs.writeFileSync(path.join(__dirname,\x20\x27jest_browserstack_results.json\x27),\x20JSON.stringify(results));\x0a\x20\x20\x20\x20\x20\x20return\x20_someFunc.call(this,\x20testContexts,\x20results);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20var\x20_onTestFileResultOrig\x20=\x20ReporterDispatcher.prototype.onTestFileResult;\x0a\x20\x20\x20\x20ReporterDispatcher.prototype.onTestFileResult\x20=\x20async\x20function\x20(test,\x20testResult,\x20result)\x20{\x0a\x20\x20\x20\x20\x20\x20testResult.platform\x20=\x20helper.getPlatformName(test.context.config.capability);\x0a\x20\x20\x20\x20\x20\x20return\x20_onTestFileResultOrig.call(this,\x20test,\x20testResult,\x20result);\x0a\x20\x20\x20\x20}\x0a\x20\x20'),logger[_0x307438(0x17d)]('Creating\x20'+_0x18ee9c+_0x307438(0xe4)),fs['writeFileSync'](_0x18ee9c,_0x307438(0x120)+JSON['stringify'](_0x37878b)+_0x307438(0x17c));if(_0x2762ab[_0x307438(0x12f)]()){logger[_0x307438(0xe8)](_0x1c9bd9['zNerQ']);const _0x127640=await _0x2762ab[_0x307438(0x14a)](_0x37878b,_0x10b640['slice'](0x1),_0x18ee9c);logger['debug'](_0x307438(0x187)+JSON[_0x307438(0x18c)](_0x127640)+_0x307438(0x199));const _0x6be047=await _0x2762ab['reorderTestFiles'](_0x127640);logger[_0x307438(0xe8)](_0x307438(0x17f)+JSON[_0x307438(0x18c)](_0x6be047)),_0x6be047&&_0x1c9bd9[_0x307438(0x1a2)](_0x6be047[_0x307438(0xdf)],0x0)&&(process[_0x307438(0x10f)][_0x307438(0x102)]=_0x6be047?.[_0x307438(0x169)](','));}logger[_0x307438(0x17d)](_0x1c9bd9[_0x307438(0x178)]);testhubUtils[_0x307438(0xfe)]()&&TestDetails[_0x307438(0x115)]();helper['filterBrowserstackArgs']({},_0x10b640),PerformanceTester[_0x307438(0x13b)](PerformanceEvents[_0x307438(0x100)]);const _0x1465d4=_0x1c9bd9[_0x307438(0x168)](spawn,_0x1c9bd9[_0x307438(0x188)],[_0x1c9bd9[_0x307438(0x147)],_0x1c9bd9['bziTG'],_0x18ee9c,..._0x10b640['slice'](0x1)],{'shell':_0x1c9bd9[_0x307438(0xe1)](process[_0x307438(0xeb)],_0x1c9bd9['irByL']),'stdio':_0x1c9bd9['QrYDE'],'env':Object[_0x307438(0xe9)]({},process['env'])});_0x1465d4['on'](_0x1c9bd9[_0x307438(0x17a)],async _0x3ca190=>{const _0x27f01e=_0x307438;PerformanceTester[_0x27f01e(0x105)](PerformanceEvents[_0x27f01e(0x17b)]);try{const {browserstackFolderPath:_0x13d6b7,tcgConfigPath:_0x186e3d}=helper[_0x27f01e(0x1ac)]();fs['unlinkSync'](_0x186e3d),fs[_0x27f01e(0xed)](_0x13d6b7);}catch(_0x50f488){logger[_0x27f01e(0xe8)](_0x1c9bd9[_0x27f01e(0x140)],_0x50f488);}process['exitCode']=_0x3ca190,logger[_0x27f01e(0xe8)](_0x27f01e(0x1ad)+_0x3ca190),logger['info'](_0x27f01e(0x119)+_0x18ee9c);if(helper[_0x27f01e(0x16c)](_0x27deca)&&helper['isNotUndefined'](_0x27deca[_0x27f01e(0x16d)])&&fs['existsSync'](_0x27deca[_0x27f01e(0x16d)][_0x27f01e(0x12d)]))try{const _0x502880={};_0x502880['recursive']=!![],_0x502880['force']=!![],fs['rmSync'](_0x27deca[_0x27f01e(0x16d)][_0x27f01e(0x12d)],_0x502880),logger[_0x27f01e(0xe8)](_0x27f01e(0x158)+_0x27deca['abortBuildOnFailure'][_0x27f01e(0x12d)]);}catch(_0x3d751e){logger[_0x27f01e(0x15c)](_0x27f01e(0xdc)+_0x3d751e);}let _0x468be1=null;if(fs[_0x27f01e(0x104)](_0x4faa78)){_0x468be1=fs[_0x27f01e(0x164)](_0x4faa78);try{_0x468be1=JSON[_0x27f01e(0xee)](_0x468be1);}catch(_0x2d0515){logger[_0x27f01e(0xe8)](_0x27f01e(0xdd)+_0x4faa78+',\x20'+_0x468be1+_0x27f01e(0x165)+_0x2d0515);}fs[_0x27f01e(0x141)](_0x4faa78);}fs['unlinkSync'](_0x18ee9c),fs[_0x27f01e(0x141)](_0x1831ea),_0x468be1&&(_0x3eee22[_0x27f01e(0x194)]=helper[_0x27f01e(0x1a0)](_0x468be1,_0x1c9bd9[_0x27f01e(0x147)],_0x3eee22));try{await TestHubHandler['stop'](),await BrowserstackCLI[_0x27f01e(0x12c)]()[_0x27f01e(0xfa)]();}catch(_0xa46d6d){console[_0x27f01e(0xf7)](_0xa46d6d),_0x1c9bd9['FvuFY'](debug,'Exception\x20in\x20stop\x20build\x20request\x20to\x20TestHub\x20:\x20'+util[_0x27f01e(0x116)](_0xa46d6d));}testOpsHelper['printBuildLink'](),TestDetails['shutdown'](),await utilities[_0x27f01e(0x148)](_0x3eee22);});}module[a14_0xd6ac49(0x162)]=run;