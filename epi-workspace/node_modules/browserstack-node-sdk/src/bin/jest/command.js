#!/usr/bin/env node
'use strict';const a14_0x4efa6f=a14_0x2127;(function(_0x21e7dc,_0x581299){const _0x3d7a63=a14_0x2127,_0x20d77e=_0x21e7dc();while(!![]){try{const _0xce9a13=-parseInt(_0x3d7a63(0x142))/0x1*(parseInt(_0x3d7a63(0x119))/0x2)+parseInt(_0x3d7a63(0xf3))/0x3+parseInt(_0x3d7a63(0x10c))/0x4+-parseInt(_0x3d7a63(0x174))/0x5*(parseInt(_0x3d7a63(0xf7))/0x6)+-parseInt(_0x3d7a63(0x106))/0x7+-parseInt(_0x3d7a63(0x11e))/0x8+parseInt(_0x3d7a63(0xd9))/0x9*(parseInt(_0x3d7a63(0xbd))/0xa);if(_0xce9a13===_0x581299)break;else _0x20d77e['push'](_0x20d77e['shift']());}catch(_0x4e7bbd){_0x20d77e['push'](_0x20d77e['shift']());}}}(a14_0xb190,0xb9dd1));function a14_0xb190(){const _0x4de4a3=['customEnvironment.js','customSequencer.js','KAqyD','setupTCGAuth','../../helpers/test-observability/utils','child_process','oWkXs','Modifying\x20jest\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','exitCode','bmtOP','ImAJe','requireModule','child\x20process\x20exited\x20with\x20code\x20','Dpbzi','unlinkSync','SDK_CLEANUP','setup','jDAuA','Reodered\x20Test\x20Files:\x20','jest_browserstack.config.js','../../helpers/BrowserStackSetup','log','EVENTS','BuDLb','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','reorderTestFiles','vSdLw','isTestOrchestrationEnabled','browserStackPercyOptions','19490Cokaqz','Test\x20orchestration\x20is\x20enabled,\x20initializing\x20orchestration\x20handler','jest','length','parallelsPerPlatform','BROWSERSTACK_TEST_ACCESSIBILITY_YML','wOZcu','writeFileSync','18325520YiFKRE','json','FFCbq','config','mjs','USER_CONFIG_DETAILS_PATH','Error\x20while\x20parsing\x20','getHubUrl','Found:\x20','platform','Creating\x20','checkAccessibilityPlatformConfig','EwVSn','turboScaleUrl','util','join','getTCGConfigFilePaths','rDbbc','gWWVW','errorMessage','\x20:\x20','SDK_SETUP','isNotUndefined','./test-observability/helper','stop','TCmZG','force','../../helpers/testhub/testhubHandler','18aEsreW','slice','xNyif','assign','requireSeleniumWebdriver','Deleting\x20','OAgKn','path','Getting\x20your\x20jest\x20configs\x20from\x20package.json','Exception\x20in\x20stop\x20build\x20request\x20to\x20TestHub\x20:\x20','testTimeout','OEUNA','push','filterBrowserstackArgs','proxySettings','printBuildLink','workingDir','failureThresholdCount','initialize','--config','runner','readFileSync','JhjtW','maxWorkers','true','AXARb','489690nxcqYz','../../helpers/utilities','fXnGD','isUndefined','1170DemkVU','testEnvironmentOptions','error\x20removing\x20tcg\x20config\x20file','info','setupFiles','MHFrq','../../helpers/percy/utils','lLscu','BROWSERSTACK_TEST_OBSERVABILITY_YML','hsXxs','Deleted\x20fail-fast\x20state\x20folder:\x20','existsSync','logLevel','win32','parallels__','10229093XvQUEA','parseTestOrchestrationOptions','srNWE','shouldProcessEventForTesthub','dkATg','stringify','229612tQkHcd','BIKkT','findTestFiles','error','../../helpers/performance/constants','testRunner','../../helpers/testhub/utils','skipSessionStatus','package.json','PACKAGE_TYPE','zyFHP','gEzVX','customCircus.js','20MkcZkR','ZrZTF','jest.setup.js','DOcMv','retryTestsOnFailure','2551848NEXxOz','UMjnn','prepareCapabilities','abPIR','BSTACK_JEST_TEST_ENV','xoLZi','MODULE','\x0amodule.exports\x20=\x20config;','test-observability','JEST','env','uoOfr','serial__','default','end','JEST_TEST_ORDER','testEnvironment','testSequencer','abortBuildOnFailure','cjs','../../helpers/helper','oKUGX','testObservability','pRseF','retries__','failFast','Getting\x20your\x20jest\x20configs\x20from\x20','maxFailures','UpXjZ','platformCaps','reporters','qOvZJ','parse','../../helpers/logger','platforms','accessibilityOptions','58405ZLiTls','setupFilesAfterEnv','testContextOptions','launchBuild','WdIfy','rmSync','findIndex','skipSessionName','debug','eFzxV','UnkOS','\x0a\x0a\x20\x20\x20\x20const\x20ReporterDispatcher\x20=\x20_interopRequireDefault(requireModule(\x27@jest/core/build/ReporterDispatcher.js\x27,\x20\x27@jest/core\x27)).default;\x20//node_modules/@jest/core/build/ReporterDispatcher.js\x0a\x20\x20\x20\x20const\x20fs\x20=\x20require(\x27fs\x27);\x0a\x20\x20\x20\x20const\x20path\x20=\x20require(\x27path\x27);\x0a\x20\x20\x20\x20const\x20helper\x20=\x20require(\x27../../../helpers/helper\x27);\x0a\x20\x20\x20\x20var\x20_someFunc\x20=\x20ReporterDispatcher.prototype.onRunComplete;\x0a\x20\x20\x20\x20ReporterDispatcher.prototype.onRunComplete\x20=\x20async\x20function\x20(testContexts,\x20results)\x20{\x0a\x20\x20\x20\x20\x20\x20results.numTotalTestSuites\x20=\x20results.numTotalTestSuites\x20*\x20','npx','getPackageType','Showing\x20jest\x20logs\x20and\x20reporter\x20logs.','cwd','resolve','useW3C','finalExecution','capabilities','format'];a14_0xb190=function(){return _0x4de4a3;};return a14_0xb190();}const fs=require('fs'),path=require(a14_0x4efa6f(0xe0)),util=require(a14_0x4efa6f(0xcb)),{spawn}=require(a14_0x4efa6f(0x15c)),logger=require(a14_0x4efa6f(0x13f))['winstonLogger'],{default:BrowserStackSetup}=require(a14_0x4efa6f(0x16b)),helper=require(a14_0x4efa6f(0x132)),utilities=require(a14_0x4efa6f(0xf4)),constants=require('../utils/constants'),accessibilityHelper=require('../../helpers/accessibility-automation/helper'),{updateTestRerunConfig}=require(a14_0x4efa6f(0xd4)),testOpsHelper=require(a14_0x4efa6f(0x15b)),{debug}=require('../../helpers/test-observability/utils'),TestDetails=require('./test-observability/test-details'),{getPercyOptions}=require(a14_0x4efa6f(0xfd)),TestHubHandler=require(a14_0x4efa6f(0xd8)),testhubUtils=require(a14_0x4efa6f(0x112)),{FRAMEWORKS}=require('../../helpers/test-observability/constants'),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require(a14_0x4efa6f(0x110))[a14_0x4efa6f(0x16d)],TestOrchestrationHandler=require('../../helpers/test-orchestration/testOrchestrationHandler'),getUserJestConfigs=async(_0x540a8c,_0x26388e)=>{const _0x575697=a14_0x4efa6f,_0x5c0bc2={'yRBWu':'jest-config/build/readConfigFileAndSetRootDir.js','rDbbc':'jest-config','TCmZG':function(_0xf6d7b5,_0xa221d7){return _0xf6d7b5||_0xa221d7;},'lLscu':function(_0x2dbbb1,_0x428033){return _0x2dbbb1(_0x428033);},'MHFrq':_0x575697(0x114),'zyFHP':_0x575697(0xe1),'gEzVX':_0x575697(0xc1),'UpXjZ':_0x575697(0x131),'abPIR':_0x575697(0xbe)},_0x2df14f=helper[_0x575697(0x162)](_0x5c0bc2['yRBWu'],_0x5c0bc2[_0x575697(0xce)]),_0x1547d7=_0x26388e[_0x575697(0x148)](_0x4d1700=>_0x4d1700===_0x575697(0xec));if(!helper[_0x575697(0xf6)](_0x540a8c['config'])){logger[_0x575697(0xfa)](_0x575697(0x138)+_0x540a8c['config']),process[_0x575697(0x128)][_0x575697(0xc2)]=_0x540a8c[_0x575697(0xc0)];const _0x7d56bd=await(0x0,_0x2df14f[_0x575697(0x12b)])(path[_0x575697(0x152)](_0x540a8c[_0x575697(0xc0)]));return _0x26388e['splice'](_0x1547d7,0x2),_0x5c0bc2[_0x575697(0xd6)](_0x7d56bd,{});}const _0x3aad15=_0x5c0bc2[_0x575697(0xfe)](require,path['join'](process[_0x575697(0x151)](),_0x5c0bc2[_0x575697(0xfc)]));if(_0x3aad15[_0x575697(0x176)])return logger[_0x575697(0xfa)](_0x5c0bc2[_0x575697(0x116)]),_0x3aad15[_0x575697(0x176)];const _0x39ad7c=['js',_0x5c0bc2[_0x575697(0x117)],_0x5c0bc2[_0x575697(0x13a)],_0x5c0bc2[_0x575697(0x121)],'ts'];for(const _0x55579e of _0x39ad7c){const _0x2acbbd=path[_0x575697(0xcc)](process[_0x575697(0x151)](),'jest.config.'+_0x55579e);if(fs[_0x575697(0x102)](_0x2acbbd)){process[_0x575697(0x128)][_0x575697(0xc2)]=_0x2acbbd;const _0x4cd0ba=await(0x0,_0x2df14f[_0x575697(0x12b)])(_0x2acbbd);return _0x4cd0ba;}}return{};},getSerial=(_0x57fa89,_0x398641)=>{const _0xeaa2c7=a14_0x4efa6f,_0x4de1ed={};_0x4de1ed[_0xeaa2c7(0xef)]='true',_0x4de1ed['KAqyD']=function(_0x31d559,_0x29f37f){return _0x31d559>_0x29f37f;},_0x4de1ed[_0xeaa2c7(0xf2)]='false';const _0x4cb917=_0x4de1ed;let _0x2f3376=_0x4cb917['JhjtW'];return _0x4cb917[_0xeaa2c7(0x159)](_0x57fa89[_0xeaa2c7(0x177)],0x1)&&(!_0x398641['runInBand']&&(helper[_0xeaa2c7(0xf6)](_0x398641[_0xeaa2c7(0xf0)])||_0x4cb917[_0xeaa2c7(0x159)](_0x398641[_0xeaa2c7(0xf0)],0x1)))&&(_0x2f3376=_0x4cb917['AXARb']),_0x2f3376;},getMaxWorkers=(_0x198066,_0x1aeb6c,_0x14b1a4)=>{const _0x453d1f=a14_0x4efa6f,_0x1233cc={'xNyif':function(_0x3f6768,_0x181f63){return _0x3f6768(_0x181f63);}};let _0x20ac09=0x1;if(!helper['isUndefined'](_0x1aeb6c[_0x453d1f(0xb9)]))_0x20ac09=_0x1233cc[_0x453d1f(0xdb)](parseInt,_0x1aeb6c['parallelsPerPlatform']);else{if(!helper['isUndefined'](_0x198066[_0x453d1f(0xf0)]))_0x20ac09=_0x198066[_0x453d1f(0xf0)];else!helper[_0x453d1f(0xf6)](_0x14b1a4['maxWorkers'])&&(_0x20ac09=_0x14b1a4[_0x453d1f(0xf0)]);}return _0x20ac09;};function a14_0x2127(_0x5329d5,_0x2e970f){const _0xb190b9=a14_0xb190();return a14_0x2127=function(_0x21274d,_0x2a28f2){_0x21274d=_0x21274d-0xb9;let _0x401139=_0xb190b9[_0x21274d];return _0x401139;},a14_0x2127(_0x5329d5,_0x2e970f);}async function run(_0x5137a5,_0x44e429,_0x2ba3f3){const _0x2fdda7=a14_0x4efa6f,_0x593e87={'BuDLb':_0x2fdda7(0xf9),'xoLZi':_0x2fdda7(0x176),'Icdiu':function(_0x240e0d,_0x443bcc){return _0x240e0d(_0x443bcc);},'bmtOP':function(_0x41b137,_0x1ac9c6){return _0x41b137!=_0x1ac9c6;},'PSGuZ':_0x2fdda7(0xf1),'oKUGX':function(_0x98fbcc,_0x7671b0,_0x2bc012){return _0x98fbcc(_0x7671b0,_0x2bc012);},'eFzxV':_0x2fdda7(0x15e),'EwVSn':function(_0x3cd5b7,_0x31e6da){return _0x3cd5b7(_0x31e6da);},'pRseF':function(_0x473522,_0x3b97f5,_0x29b508){return _0x473522(_0x3b97f5,_0x29b508);},'jDAuA':function(_0x35f859,_0x1792a6,_0x3a7646,_0x2e10f3){return _0x35f859(_0x1792a6,_0x3a7646,_0x2e10f3);},'tZaYy':function(_0xc07509,_0x148a7b){return _0xc07509*_0x148a7b;},'DOcMv':function(_0x29fe54,_0x4b46df){return _0x29fe54===_0x4b46df;},'tHtZu':'jest_browserstack.config.cjs','hsXxs':_0x2fdda7(0x16a),'OAgKn':'customImplements','UnkOS':'jest_browserstack_results.json','WdIfy':'customTestRunner.js','fXnGD':'customTestRunnerTemplate.js','srNWE':_0x2fdda7(0x157),'BIKkT':_0x2fdda7(0x11b),'ZRkCi':_0x2fdda7(0x158),'vSdLw':'jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js','FFCbq':'jest-circus','fvOTJ':function(_0x755ece,_0x30d1af){return _0x755ece(_0x30d1af);},'ImAJe':_0x2fdda7(0x126),'rmGnq':'data-hooks.js','dkATg':_0x2fdda7(0x118),'gSFWs':'test_before.setup.js','UMjnn':'skipping\x20test_before\x20setup\x20since\x20selenium\x20not\x20found','OEUNA':_0x2fdda7(0x12b),'wOZcu':_0x2fdda7(0x175),'oWkXs':function(_0x2895ae,_0x47b150){return _0x2895ae>_0x47b150;},'Dpbzi':_0x2fdda7(0x150),'ZUFiN':_0x2fdda7(0x14e),'tnPrV':_0x2fdda7(0xec),'ZrZTF':function(_0x29b1fa,_0x2c5825){return _0x29b1fa===_0x2c5825;},'qOvZJ':_0x2fdda7(0x104),'gWWVW':'inherit','uoOfr':'close'};helper['isBrowserstackInfra']()?(await _0x2ba3f3[_0x2fdda7(0xeb)](_0x5137a5),await helper['handleApp'](_0x2ba3f3[_0x2fdda7(0xc0)])):await _0x2ba3f3[_0x2fdda7(0x15a)]();if(!_0x2ba3f3[_0x2fdda7(0xc0)])return;_0x593e87[_0x2fdda7(0x160)](_0x2ba3f3['config'][_0x2fdda7(0x134)],null)?process[_0x2fdda7(0x128)]['BROWSERSTACK_TEST_OBSERVABILITY_YML']=_0x2ba3f3[_0x2fdda7(0xc0)][_0x2fdda7(0x134)]:process[_0x2fdda7(0x128)][_0x2fdda7(0xff)]=_0x593e87['PSGuZ'];const _0x9abfd6=new TestOrchestrationHandler(_0x2ba3f3[_0x2fdda7(0xc0)]),_0x4da092=await _0x593e87[_0x2fdda7(0x133)](getUserJestConfigs,_0x5137a5,_0x44e429);logger[_0x2fdda7(0xfa)](_0x593e87[_0x2fdda7(0x14b)]);const _0x4da01e=Object[_0x2fdda7(0xdc)]({},_0x4da092);_0x4da01e[_0x2fdda7(0xf8)]=Object[_0x2fdda7(0xdc)]({},_0x4da01e['testEnvironmentOptions'],{'server':helper[_0x2fdda7(0xc4)](_0x2ba3f3[_0x2fdda7(0xc0)]),'environment':_0x4da092['testEnvironment']}),_0x4da01e[_0x2fdda7(0xf8)][_0x2fdda7(0x173)]=_0x593e87[_0x2fdda7(0xc9)](getPercyOptions,_0x2ba3f3['config']);const _0x42360e=helper[_0x2fdda7(0x153)](_0x2ba3f3[_0x2fdda7(0xc0)]);!helper[_0x2fdda7(0xf6)](_0x2ba3f3[_0x2fdda7(0xc0)][_0x2fdda7(0x141)])&&(process[_0x2fdda7(0x128)][_0x2fdda7(0x16f)]=JSON[_0x2fdda7(0x10b)](_0x2ba3f3[_0x2fdda7(0xc0)]['accessibilityOptions']));const _0x17c021=await TestHubHandler[_0x2fdda7(0x145)](FRAMEWORKS[_0x2fdda7(0x127)],_0x2ba3f3),_0x30220c=helper[_0x2fdda7(0x120)](_0x2ba3f3[_0x2fdda7(0xc0)],_0x42360e,constants['FRAMEWORKS'][_0x2fdda7(0x127)]);let _0x39b855=_0x2ba3f3['config']['accessibility'];_0x39b855=_0x39b855||accessibilityHelper[_0x2fdda7(0xc8)](_0x2ba3f3[_0x2fdda7(0xc0)]),process[_0x2fdda7(0x128)][_0x2fdda7(0xba)]=_0x39b855,_0x4da01e[_0x2fdda7(0xf8)][_0x2fdda7(0x155)]=_0x30220c,_0x4da01e[_0x2fdda7(0xf8)][_0x2fdda7(0x12a)]=_0x593e87[_0x2fdda7(0x135)](getSerial,_0x30220c,_0x5137a5),_0x4da01e[_0x2fdda7(0xf8)][_0x2fdda7(0x105)]=_0x593e87[_0x2fdda7(0x168)](getMaxWorkers,_0x5137a5,_0x2ba3f3[_0x2fdda7(0xc0)],_0x4da092),_0x4da01e[_0x2fdda7(0xf8)][_0x2fdda7(0xe7)]=_0x2ba3f3['config'][_0x2fdda7(0xe7)],_0x4da01e[_0x2fdda7(0xf8)]['timeout__']=_0x593e87['tZaYy'](_0x5137a5[_0x2fdda7(0xe3)],0x1)||0x1388,_0x4da01e[_0x2fdda7(0xf8)][_0x2fdda7(0x149)]=_0x2ba3f3[_0x2fdda7(0xc0)][_0x2fdda7(0x144)]['skipSessionName'],_0x4da01e['testEnvironmentOptions'][_0x2fdda7(0x113)]=_0x2ba3f3['config'][_0x2fdda7(0x144)][_0x2fdda7(0x113)],_0x4da01e[_0x2fdda7(0xf8)]['browserStackLogLevel']=_0x2ba3f3[_0x2fdda7(0xc0)][_0x2fdda7(0x103)],_0x4da01e['testEnvironmentOptions'][_0x2fdda7(0xca)]=_0x2ba3f3[_0x2fdda7(0xc0)][_0x2fdda7(0xca)],_0x4da01e[_0x2fdda7(0xf8)][_0x2fdda7(0x13b)]=_0x2ba3f3['config'][_0x2fdda7(0x140)];const _0x277704=helper[_0x2fdda7(0x107)](_0x2ba3f3[_0x2fdda7(0xc0)]);if(!helper['isEmpty'](_0x277704)){helper[_0x2fdda7(0xd3)](_0x277704[_0x2fdda7(0x11d)])&&(_0x4da01e[_0x2fdda7(0xf8)][_0x2fdda7(0x136)]=_0x277704[_0x2fdda7(0x11d)]['maxRetries']);if(helper[_0x2fdda7(0xd3)](_0x277704[_0x2fdda7(0x130)])&&helper[_0x2fdda7(0xd3)](_0x277704[_0x2fdda7(0x130)][_0x2fdda7(0xe9)])){const _0x331df4={};_0x331df4[_0x2fdda7(0xea)]=_0x277704[_0x2fdda7(0x130)][_0x2fdda7(0x139)],_0x331df4[_0x2fdda7(0xe9)]=_0x277704[_0x2fdda7(0x130)][_0x2fdda7(0xe9)],_0x4da01e[_0x2fdda7(0xf8)][_0x2fdda7(0x137)]=_0x331df4;}}let _0x3e2e2a='';_0x593e87[_0x2fdda7(0x11c)](helper[_0x2fdda7(0x14f)](),constants[_0x2fdda7(0x115)][_0x2fdda7(0x124)])?_0x3e2e2a=_0x593e87['tHtZu']:_0x3e2e2a=_0x593e87[_0x2fdda7(0x100)];const _0x221835=_0x3e2e2a,_0x36ef62=path['join'](__dirname,_0x593e87[_0x2fdda7(0xdf)],_0x593e87[_0x2fdda7(0x14c)]),_0x4634e4=path[_0x2fdda7(0xcc)](__dirname,_0x593e87[_0x2fdda7(0xdf)],_0x593e87[_0x2fdda7(0x146)]),_0x368cdb=path[_0x2fdda7(0xcc)](__dirname,_0x593e87[_0x2fdda7(0xdf)],_0x593e87[_0x2fdda7(0xf5)]);_0x4da01e[_0x2fdda7(0x12e)]&&(process[_0x2fdda7(0x128)][_0x2fdda7(0x122)]=_0x4da01e[_0x2fdda7(0x12e)]);_0x4da01e[_0x2fdda7(0x12e)]=path[_0x2fdda7(0xcc)](__dirname,_0x593e87[_0x2fdda7(0xdf)],_0x593e87[_0x2fdda7(0x108)]),_0x4da01e[_0x2fdda7(0xed)]=_0x4634e4,_0x4da01e[_0x2fdda7(0x143)]=_0x4da01e[_0x2fdda7(0x143)]||[],_0x4da01e['setupFilesAfterEnv'][_0x2fdda7(0xe5)](path[_0x2fdda7(0xcc)](__dirname,_0x593e87[_0x2fdda7(0x10d)]));_0x9abfd6[_0x2fdda7(0x172)]()&&(_0x4da01e[_0x2fdda7(0x12f)]=path[_0x2fdda7(0xcc)](__dirname,_0x593e87['OAgKn'],_0x593e87['ZRkCi']));if(testhubUtils[_0x2fdda7(0x109)]()){let _0x36d407=null;try{_0x36d407=helper[_0x2fdda7(0x162)](_0x593e87[_0x2fdda7(0x171)],_0x593e87[_0x2fdda7(0xbf)]);}catch(_0x92c6e3){_0x593e87['fvOTJ'](debug,'Unable\x20to\x20find\x20jest-circus,\x20'+_0x92c6e3);}_0x36d407&&(_0x4da01e[_0x2fdda7(0x143)][_0x2fdda7(0xe5)](path[_0x2fdda7(0xcc)](__dirname,_0x593e87[_0x2fdda7(0x161)],_0x593e87['rmGnq'])),_0x4da01e[_0x2fdda7(0x111)]=path[_0x2fdda7(0xcc)](__dirname,_0x593e87['OAgKn'],_0x593e87[_0x2fdda7(0x10a)]));}_0x4da01e[_0x2fdda7(0xfb)]=_0x4da01e[_0x2fdda7(0xfb)]||[];try{helper[_0x2fdda7(0xdd)](),_0x4da01e['setupFiles'][_0x2fdda7(0xe5)](path[_0x2fdda7(0xcc)](__dirname,_0x593e87['gSFWs']));}catch{logger[_0x2fdda7(0x14a)](_0x593e87[_0x2fdda7(0x11f)]);}_0x4da01e[_0x2fdda7(0x13c)]=_0x4da01e[_0x2fdda7(0x13c)]||[_0x593e87[_0x2fdda7(0xe4)]],_0x593e87[_0x2fdda7(0x133)](updateTestRerunConfig,_0x4da01e,_0x2ba3f3);const _0x2cc1dc=fs['readFileSync'](_0x368cdb);fs[_0x2fdda7(0xbc)](_0x4da01e[_0x2fdda7(0xed)],'\x0a\x20\x20\x20\x20'+_0x2cc1dc+_0x2fdda7(0x14d)+_0x2ba3f3[_0x2fdda7(0xc0)][_0x2fdda7(0x140)][_0x2fdda7(0x177)]+';\x0a\x20\x20\x20\x20\x20\x20fs.writeFileSync(path.join(__dirname,\x20\x27jest_browserstack_results.json\x27),\x20JSON.stringify(results));\x0a\x20\x20\x20\x20\x20\x20return\x20_someFunc.call(this,\x20testContexts,\x20results);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20var\x20_onTestFileResultOrig\x20=\x20ReporterDispatcher.prototype.onTestFileResult;\x0a\x20\x20\x20\x20ReporterDispatcher.prototype.onTestFileResult\x20=\x20async\x20function\x20(test,\x20testResult,\x20result)\x20{\x0a\x20\x20\x20\x20\x20\x20testResult.platform\x20=\x20helper.getPlatformName(test.context.config.capability);\x0a\x20\x20\x20\x20\x20\x20return\x20_onTestFileResultOrig.call(this,\x20test,\x20testResult,\x20result);\x0a\x20\x20\x20\x20}\x0a\x20\x20'),logger[_0x2fdda7(0xfa)](_0x2fdda7(0xc7)+_0x221835+'\x20with\x20browserstack\x20jest\x20configs'),fs[_0x2fdda7(0xbc)](_0x221835,'const\x20config='+JSON['stringify'](_0x4da01e)+_0x2fdda7(0x125));if(_0x9abfd6[_0x2fdda7(0x172)]()){logger[_0x2fdda7(0x14a)](_0x593e87[_0x2fdda7(0xbb)]);const _0x1de479=await _0x9abfd6[_0x2fdda7(0x10e)](_0x4da01e,_0x44e429[_0x2fdda7(0xda)](0x1),_0x221835);logger['debug'](_0x2fdda7(0xc5)+JSON['stringify'](_0x1de479)+'\x20test\x20files\x20to\x20run.');const _0x1fcd4c=await _0x9abfd6[_0x2fdda7(0x170)](_0x1de479);logger[_0x2fdda7(0x14a)](_0x2fdda7(0x169)+JSON[_0x2fdda7(0x10b)](_0x1fcd4c)),_0x1fcd4c&&_0x593e87[_0x2fdda7(0x15d)](_0x1fcd4c[_0x2fdda7(0x177)],0x0)&&(process['env'][_0x2fdda7(0x12d)]=_0x1fcd4c?.[_0x2fdda7(0xcc)](','));}logger[_0x2fdda7(0xfa)](_0x593e87[_0x2fdda7(0x164)]);testhubUtils[_0x2fdda7(0x109)]()&&TestDetails[_0x2fdda7(0x167)]();helper[_0x2fdda7(0xe6)]({},_0x44e429),PerformanceTester[_0x2fdda7(0x12c)](PerformanceEvents[_0x2fdda7(0xd2)]);const _0x3e2e07=_0x593e87['jDAuA'](spawn,_0x593e87['ZUFiN'],[_0x593e87['xoLZi'],_0x593e87['tnPrV'],_0x221835,..._0x44e429[_0x2fdda7(0xda)](0x1)],{'shell':_0x593e87[_0x2fdda7(0x11a)](process[_0x2fdda7(0xc6)],_0x593e87[_0x2fdda7(0x13d)]),'stdio':_0x593e87[_0x2fdda7(0xcf)],'env':Object[_0x2fdda7(0xdc)]({},process['env'])});_0x3e2e07['on'](_0x593e87[_0x2fdda7(0x129)],async _0xc0127c=>{const _0x47151e=_0x2fdda7;PerformanceTester['start'](PerformanceEvents[_0x47151e(0x166)]);try{const {browserstackFolderPath:_0x49a490,tcgConfigPath:_0x220be2}=helper[_0x47151e(0xcd)]();fs['unlinkSync'](_0x220be2),fs['rmdirSync'](_0x49a490);}catch(_0x34031a){logger[_0x47151e(0x14a)](_0x593e87[_0x47151e(0x16e)],_0x34031a);}process[_0x47151e(0x15f)]=_0xc0127c,logger[_0x47151e(0x14a)](_0x47151e(0x163)+_0xc0127c),logger[_0x47151e(0xfa)](_0x47151e(0xde)+_0x221835);if(helper[_0x47151e(0xd3)](_0x277704)&&helper['isNotUndefined'](_0x277704[_0x47151e(0x130)])&&fs[_0x47151e(0x102)](_0x277704[_0x47151e(0x130)][_0x47151e(0xe9)]))try{const _0x17d8e6={};_0x17d8e6['recursive']=!![],_0x17d8e6[_0x47151e(0xd7)]=!![],fs[_0x47151e(0x147)](_0x277704[_0x47151e(0x130)]['workingDir'],_0x17d8e6),logger[_0x47151e(0x14a)](_0x47151e(0x101)+_0x277704[_0x47151e(0x130)][_0x47151e(0xe9)]);}catch(_0xaf079c){logger[_0x47151e(0x10f)]('Error\x20while\x20deleting\x20fail-fast\x20state\x20folder:\x20'+_0xaf079c);}let _0x405689=null;if(fs[_0x47151e(0x102)](_0x36ef62)){_0x405689=fs[_0x47151e(0xee)](_0x36ef62);try{_0x405689=JSON[_0x47151e(0x13e)](_0x405689);}catch(_0x50df1c){logger[_0x47151e(0x14a)](_0x47151e(0xc3)+_0x36ef62+',\x20'+_0x405689+_0x47151e(0xd1)+_0x50df1c);}fs[_0x47151e(0x165)](_0x36ef62);}fs[_0x47151e(0x165)](_0x221835),fs['unlinkSync'](_0x4634e4),_0x405689&&(_0x2ba3f3[_0x47151e(0xd0)]=helper['getErrorMessageFromResults'](_0x405689,_0x593e87[_0x47151e(0x123)],_0x2ba3f3));try{await TestHubHandler[_0x47151e(0xd5)]();}catch(_0x827032){console[_0x47151e(0x16c)](_0x827032),_0x593e87['Icdiu'](debug,_0x47151e(0xe2)+util[_0x47151e(0x156)](_0x827032));}testOpsHelper[_0x47151e(0xe8)](),TestDetails['shutdown'](),await utilities[_0x47151e(0x154)](_0x2ba3f3);});}module['exports']=run;