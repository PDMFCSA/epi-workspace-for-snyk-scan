#!/usr/bin/env node
'use strict';const a14_0x27f762=a14_0x1e59;(function(_0x59cf67,_0x210e36){const _0x667b4a=a14_0x1e59,_0x1d8f6e=_0x59cf67();while(!![]){try{const _0x5b1c55=parseInt(_0x667b4a(0x1ec))/0x1*(parseInt(_0x667b4a(0x259))/0x2)+parseInt(_0x667b4a(0x288))/0x3*(parseInt(_0x667b4a(0x204))/0x4)+parseInt(_0x667b4a(0x1fe))/0x5+-parseInt(_0x667b4a(0x22d))/0x6+-parseInt(_0x667b4a(0x201))/0x7*(-parseInt(_0x667b4a(0x215))/0x8)+-parseInt(_0x667b4a(0x260))/0x9*(parseInt(_0x667b4a(0x278))/0xa)+-parseInt(_0x667b4a(0x1d9))/0xb;if(_0x5b1c55===_0x210e36)break;else _0x1d8f6e['push'](_0x1d8f6e['shift']());}catch(_0x5ceab6){_0x1d8f6e['push'](_0x1d8f6e['shift']());}}}(a14_0x4eb2,0xcb5c8));function a14_0x4eb2(){const _0xd865d4=['1056201mzsrDl','PACKAGE_TYPE','MODULE','Modifying\x20jest\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','testTimeout','data-hooks.js','logLevel','ruOUQ','../../helpers/playwright-helper','setupFilesAfterEnv','KfTBU','join','unlinkSync','xfvnf','jest','customCircus.js','mJykf','CFHYJ','getInstance','info','customEnvironment.js','bmTBn','\x0amodule.exports\x20=\x20config;','config','requirePWModule','QnluE','kvxyU','Showing\x20jest\x20logs\x20and\x20reporter\x20logs.','test_before.setup.js','KcUCT','EVENTS','package.json','shutdown','printBuildLink','../../helpers/performance/performance-tester','clPSk','BROWSERSTACK_TEST_ACCESSIBILITY_YML','../v2/browserstackCLI','parseTestOrchestrationOptions','6856707JcGIgC','customImplements','stringify','env','child_process','debug','PUCxe','jest.setup.js','retryTestsOnFailure','customTestRunnerTemplate.js','platforms','path','Rhsni','testSequencer','isBrowserstackInfra','jest_browserstack.config.js','winstonLogger','close','jest-circus','96751eLwDms','../../helpers/test-observability/utils','browserStackLogLevel','BROWSERSTACK_TEST_OBSERVABILITY_YML','qUeEu','default','customSequencer.js','jnoPx','--config','mxLwv','resolve','workingDir','../utils/constants','isTestOrchestrationEnabled','Error\x20while\x20parsing\x20','assign','true','__isPlaywrightInstalled','5006150oOstCm','false','../../helpers/accessibility-automation/helper','119oNsHoV','rmdirSync','browserStackPercyOptions','4BxfQEX','finalExecution','win32','findIndex','retries__','maxWorkers','end','woOjt','setupTCGAuth','WdqJI','parse','getPackageVersion','platformCaps','iDjEi','isRunning','../../helpers/testhub/testhubHandler','turboScaleUrl','385928upWWQz','testEnvironment','Test\x20orchestration\x20is\x20enabled,\x20initializing\x20orchestration\x20handler','timeout__','VTROT','ymtwz','skipSessionStatus','Deleted\x20fail-fast\x20state\x20folder:\x20','Rcwqe',';\x0a\x20\x20\x20\x20\x20\x20fs.writeFileSync(path.join(__dirname,\x20\x27jest_browserstack_results.json\x27),\x20JSON.stringify(results));\x0a\x20\x20\x20\x20\x20\x20return\x20_someFunc.call(this,\x20testContexts,\x20results);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20var\x20_onTestFileResultOrig\x20=\x20ReporterDispatcher.prototype.onTestFileResult;\x0a\x20\x20\x20\x20ReporterDispatcher.prototype.onTestFileResult\x20=\x20async\x20function\x20(test,\x20testResult,\x20result)\x20{\x0a\x20\x20\x20\x20\x20\x20testResult.platform\x20=\x20helper.getPlatformName(test.context.config.capability);\x0a\x20\x20\x20\x20\x20\x20return\x20_onTestFileResultOrig.call(this,\x20test,\x20testResult,\x20result);\x0a\x20\x20\x20\x20}\x0a\x20\x20','capabilities','DkJME','grSyf','initialize','Getting\x20your\x20jest\x20configs\x20from\x20','requireModule','setupFiles','jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js','XqBUh','reporters','exitCode','Omsus','failureThresholdCount','writeFileSync','7108506HWKKjL','log','gbRvk','handleApp','npx','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','YHpRI','uRNps','../../helpers/test-orchestration/testOrchestrationHandler','json','\x20with\x20browserstack\x20jest\x20configs','error','abortBuildOnFailure','splice','gNDay','\x20test\x20files\x20to\x20run.','existsSync','start','wkVpL','prepareCapabilities','test-observability','xtjSL','useW3C','recursive','BSTACK_JEST_TEST_ENV','length','cwd','maxRetries','wDyKp','customTestRunner.js','SDK_CLEANUP','inherit','../../helpers/testhub/utils','proxySettings','Deleting\x20','filterBrowserstackArgs','USER_CONFIG_DETAILS_PATH','FRAMEWORKS','checkAccessibilityPlatformConfig','shouldProcessEventForTesthub','runInBand','Reodered\x20Test\x20Files:\x20','euFTs','../../helpers/test-observability/constants','28VbFzGc','rnIfa','JEST_TEST_ORDER','WkqJA','runner','parallelsPerPlatform','nQagv','1995417jYMrCm','stop','SOcNu','setup','awnlG','QvUkI','SDK_SETUP','launchBuild','../../helpers/BrowserStackSetup','OQcaB','QbkIZ','testContextOptions','slice','accessibilityOptions','@playwright/test','isNotUndefined','JEST','isUndefined','testEnvironmentOptions','JuiqM','../../helpers/percy/utils','platform','Exception\x20in\x20stop\x20build\x20request\x20to\x20TestHub\x20:\x20','testObservability','40cHbjkm','./test-observability/helper','accessibility','push','SiLPV','errorMessage','testRunner','skipSessionName','skipping\x20test_before\x20setup\x20since\x20selenium\x20not\x20found','getPackageType','Error\x20while\x20deleting\x20fail-fast\x20state\x20folder:\x20','ixeue','util','BROWSERSTACK_CAPABILITIES','Playwright\x20detected,\x20adding\x20Jest-Playwright\x20setup','VJIrU'];a14_0x4eb2=function(){return _0xd865d4;};return a14_0x4eb2();}const fs=require('fs'),path=require(a14_0x27f762(0x1e4)),util=require(a14_0x27f762(0x284)),{spawn}=require(a14_0x27f762(0x1dd)),logger=require('../../helpers/logger')[a14_0x27f762(0x1e9)],{default:BrowserStackSetup}=require(a14_0x27f762(0x268)),helper=require('../../helpers/helper'),utilities=require('../../helpers/utilities'),constants=require(a14_0x27f762(0x1f8)),accessibilityHelper=require(a14_0x27f762(0x200)),{updateTestRerunConfig}=require(a14_0x27f762(0x279)),testOpsHelper=require(a14_0x27f762(0x1ed)),{debug}=require(a14_0x27f762(0x1ed)),TestDetails=require('./test-observability/test-details'),{getPercyOptions}=require(a14_0x27f762(0x274)),TestHubHandler=require(a14_0x27f762(0x213)),testhubUtils=require(a14_0x27f762(0x24d)),{FRAMEWORKS}=require(a14_0x27f762(0x258)),PerformanceTester=require(a14_0x27f762(0x1d4)),PerformanceEvents=require('../../helpers/performance/constants')[a14_0x27f762(0x1d0)],TestOrchestrationHandler=require(a14_0x27f762(0x235)),BrowserstackCLI=require(a14_0x27f762(0x1d7)),{checkPwandBootstrapCli}=require(a14_0x27f762(0x290)),ClientTroubleShootingService=require('../utils/clientTroubleshootingService'),getUserJestConfigs=async(_0x433f5f,_0x2fc63d)=>{const _0x2504c1=a14_0x27f762,_0x223654={'SOcNu':'jest-config/build/readConfigFileAndSetRootDir.js','iDjEi':'jest-config','rnIfa':function(_0x27bbab,_0x3a2a0d){return _0x27bbab||_0x3a2a0d;},'KcUCT':function(_0x28b17a,_0x31fc99){return _0x28b17a(_0x31fc99);},'xbuXr':_0x2504c1(0x1d1),'BdLwG':'Getting\x20your\x20jest\x20configs\x20from\x20package.json','mxLwv':'mjs','PXztM':'cjs','awnlG':_0x2504c1(0x236)},_0x37fdfe=helper[_0x2504c1(0x224)](_0x223654[_0x2504c1(0x262)],_0x223654[_0x2504c1(0x211)]),_0x18917d=_0x2fc63d[_0x2504c1(0x207)](_0x3ffb40=>_0x3ffb40===_0x2504c1(0x1f4));if(!helper['isUndefined'](_0x433f5f[_0x2504c1(0x29f)])){logger[_0x2504c1(0x29b)](_0x2504c1(0x223)+_0x433f5f[_0x2504c1(0x29f)]),process[_0x2504c1(0x1dc)][_0x2504c1(0x251)]=_0x433f5f[_0x2504c1(0x29f)];const _0x1180e3=await(0x0,_0x37fdfe[_0x2504c1(0x1f1)])(path[_0x2504c1(0x1f6)](_0x433f5f[_0x2504c1(0x29f)]));return _0x2fc63d[_0x2504c1(0x23a)](_0x18917d,0x2),_0x223654[_0x2504c1(0x25a)](_0x1180e3,{});}const _0xf52f9f=_0x223654[_0x2504c1(0x1cf)](require,path[_0x2504c1(0x293)](process[_0x2504c1(0x247)](),_0x223654['xbuXr']));if(_0xf52f9f[_0x2504c1(0x296)])return logger[_0x2504c1(0x29b)](_0x223654['BdLwG']),_0xf52f9f[_0x2504c1(0x296)];const _0x537703=['js',_0x223654[_0x2504c1(0x1f5)],_0x223654['PXztM'],_0x223654[_0x2504c1(0x264)],'ts'];for(const _0x299133 of _0x537703){const _0x5c3044=path[_0x2504c1(0x293)](process[_0x2504c1(0x247)](),'jest.config.'+_0x299133);if(fs[_0x2504c1(0x23d)](_0x5c3044)){process['env'][_0x2504c1(0x251)]=_0x5c3044;const _0x2cbb32=await(0x0,_0x37fdfe[_0x2504c1(0x1f1)])(_0x5c3044);return _0x2cbb32;}}return{};},getSerial=(_0x4f431e,_0x95d99f)=>{const _0x572f9d=a14_0x27f762,_0x309df2={};_0x309df2[_0x572f9d(0x287)]=_0x572f9d(0x1fc),_0x309df2['uRNps']=function(_0x1a6a62,_0x4ad358){return _0x1a6a62>_0x4ad358;},_0x309df2['DkJME']=_0x572f9d(0x1ff);const _0x5ac3b9=_0x309df2;let _0x5ea5b0=_0x5ac3b9[_0x572f9d(0x287)];return _0x5ac3b9['uRNps'](_0x4f431e[_0x572f9d(0x246)],0x1)&&(!_0x95d99f[_0x572f9d(0x255)]&&(helper[_0x572f9d(0x271)](_0x95d99f['maxWorkers'])||_0x5ac3b9[_0x572f9d(0x234)](_0x95d99f[_0x572f9d(0x209)],0x1)))&&(_0x5ea5b0=_0x5ac3b9[_0x572f9d(0x220)]),_0x5ea5b0;},getMaxWorkers=(_0x1bedce,_0x492388,_0x58a40e)=>{const _0x252a2c=a14_0x27f762,_0x13407d={'WdqJI':function(_0x4c679b,_0x4990e2){return _0x4c679b(_0x4990e2);}};let _0x48889d=0x1;if(!helper[_0x252a2c(0x271)](_0x492388[_0x252a2c(0x25e)]))_0x48889d=_0x13407d[_0x252a2c(0x20d)](parseInt,_0x492388[_0x252a2c(0x25e)]);else{if(!helper[_0x252a2c(0x271)](_0x1bedce[_0x252a2c(0x209)]))_0x48889d=_0x1bedce[_0x252a2c(0x209)];else!helper[_0x252a2c(0x271)](_0x58a40e[_0x252a2c(0x209)])&&(_0x48889d=_0x58a40e[_0x252a2c(0x209)]);}return _0x48889d;};async function run(_0x5d05ce,_0x365b51,_0x160de6){const _0x2f9b1b=a14_0x27f762,_0x297920={'bmTBn':'error\x20removing\x20tcg\x20config\x20file','uziyT':_0x2f9b1b(0x296),'PUCxe':function(_0x3db4aa,_0x680370){return _0x3db4aa(_0x680370);},'XqBUh':_0x2f9b1b(0x26e),'JuiqM':function(_0x17b1b0,_0x57e75f,_0x3cbff1,_0x39682c){return _0x17b1b0(_0x57e75f,_0x3cbff1,_0x39682c);},'wkVpL':function(_0x543187,_0x36639c){return _0x543187!=_0x36639c;},'SiLPV':'true','WkqJA':function(_0xce7d17,_0x39aa06,_0x5e04e9){return _0xce7d17(_0x39aa06,_0x5e04e9);},'ymtwz':_0x2f9b1b(0x28b),'xtjSL':function(_0xcabeab,_0x33b569,_0x1ea005){return _0xcabeab(_0x33b569,_0x1ea005);},'KfTBU':function(_0x43065f,_0x2f1a58){return _0x43065f*_0x2f1a58;},'nQagv':function(_0x5ca808,_0x38db14){return _0x5ca808===_0x38db14;},'mJykf':'jest_browserstack.config.cjs','gfRAn':_0x2f9b1b(0x1e8),'ruOUQ':_0x2f9b1b(0x1da),'qUeEu':'jest_browserstack_results.json','euFTs':_0x2f9b1b(0x24a),'clPSk':_0x2f9b1b(0x1e2),'EPnce':_0x2f9b1b(0x29c),'grSyf':_0x2f9b1b(0x1e0),'jnoPx':_0x2f9b1b(0x1f2),'woOjt':_0x2f9b1b(0x226),'gNDay':_0x2f9b1b(0x1eb),'bXFyu':function(_0x21dc56,_0x2c0aea){return _0x21dc56(_0x2c0aea);},'iUyTt':_0x2f9b1b(0x241),'Omsus':_0x2f9b1b(0x28d),'ixeue':_0x2f9b1b(0x297),'OQcaB':_0x2f9b1b(0x1ce),'odzKw':_0x2f9b1b(0x280),'kvxyU':'playwright','QvUkI':_0x2f9b1b(0x286),'QbkIZ':'test.setup.js','QnluE':'Playwright\x20not\x20detected\x20or\x20error\x20setting\x20up\x20Jest-Playwright\x20integration:','Rcwqe':_0x2f9b1b(0x1f1),'JXRqZ':_0x2f9b1b(0x217),'CFHYJ':function(_0x33b8c9,_0x3fcbd4){return _0x33b8c9>_0x3fcbd4;},'Rhsni':_0x2f9b1b(0x1cd),'xfvnf':_0x2f9b1b(0x231),'YHpRI':_0x2f9b1b(0x1f4),'gbRvk':_0x2f9b1b(0x206),'wDyKp':_0x2f9b1b(0x24c),'VTROT':_0x2f9b1b(0x1ea)},_0x18762e=helper[_0x2f9b1b(0x20f)](_0x297920['XqBUh']);global[_0x2f9b1b(0x1fd)]=!!_0x18762e;helper[_0x2f9b1b(0x1e7)]()?(await _0x160de6[_0x2f9b1b(0x222)](_0x5d05ce),await helper[_0x2f9b1b(0x230)](_0x160de6['config'])):await _0x160de6[_0x2f9b1b(0x20c)]();await _0x297920['JuiqM'](checkPwandBootstrapCli,_0x18762e,constants['FRAMEWORKS'][_0x2f9b1b(0x270)],_0x160de6);if(!_0x160de6[_0x2f9b1b(0x29f)])return;_0x297920[_0x2f9b1b(0x23f)](_0x160de6['config'][_0x2f9b1b(0x277)],null)?process[_0x2f9b1b(0x1dc)][_0x2f9b1b(0x1ef)]=_0x160de6['config']['testObservability']:process[_0x2f9b1b(0x1dc)]['BROWSERSTACK_TEST_OBSERVABILITY_YML']=_0x297920[_0x2f9b1b(0x27c)];const _0x1f1d94=new TestOrchestrationHandler(_0x160de6[_0x2f9b1b(0x29f)]),_0x5d0d1c=await _0x297920[_0x2f9b1b(0x25c)](getUserJestConfigs,_0x5d05ce,_0x365b51);logger[_0x2f9b1b(0x29b)](_0x297920[_0x2f9b1b(0x21a)]);const _0x347875=Object['assign']({},_0x5d0d1c);_0x347875[_0x2f9b1b(0x272)]=Object[_0x2f9b1b(0x1fb)]({},_0x347875['testEnvironmentOptions'],{'server':helper['getHubUrl'](_0x160de6[_0x2f9b1b(0x29f)]),'environment':_0x5d0d1c['testEnvironment']}),_0x347875[_0x2f9b1b(0x272)][_0x2f9b1b(0x203)]=_0x297920[_0x2f9b1b(0x1df)](getPercyOptions,_0x160de6['config']);const _0x401d4f=helper[_0x2f9b1b(0x243)](_0x160de6[_0x2f9b1b(0x29f)]);!helper['isUndefined'](_0x160de6['config'][_0x2f9b1b(0x26d)])&&(process[_0x2f9b1b(0x1dc)][_0x2f9b1b(0x232)]=JSON[_0x2f9b1b(0x1db)](_0x160de6[_0x2f9b1b(0x29f)][_0x2f9b1b(0x26d)]));if(!BrowserstackCLI[_0x2f9b1b(0x29a)]()[_0x2f9b1b(0x212)]()){const _0x167470=await TestHubHandler[_0x2f9b1b(0x267)](FRAMEWORKS['JEST'],_0x160de6);}const _0xc70623=helper[_0x2f9b1b(0x240)](_0x160de6[_0x2f9b1b(0x29f)],_0x401d4f,constants[_0x2f9b1b(0x252)][_0x2f9b1b(0x270)]);process[_0x2f9b1b(0x1dc)][_0x2f9b1b(0x285)]=JSON[_0x2f9b1b(0x1db)](_0xc70623);let _0x28384f=_0x160de6[_0x2f9b1b(0x29f)][_0x2f9b1b(0x27a)];_0x28384f=_0x28384f||accessibilityHelper[_0x2f9b1b(0x253)](_0x160de6[_0x2f9b1b(0x29f)]),process['env'][_0x2f9b1b(0x1d6)]=_0x28384f,_0x347875[_0x2f9b1b(0x272)][_0x2f9b1b(0x21f)]=_0xc70623,_0x347875['testEnvironmentOptions']['serial__']=_0x297920[_0x2f9b1b(0x242)](getSerial,_0xc70623,_0x5d05ce),_0x347875[_0x2f9b1b(0x272)]['parallels__']=_0x297920[_0x2f9b1b(0x273)](getMaxWorkers,_0x5d05ce,_0x160de6['config'],_0x5d0d1c),_0x347875['testEnvironmentOptions']['proxySettings']=_0x160de6['config'][_0x2f9b1b(0x24e)],_0x347875['testEnvironmentOptions'][_0x2f9b1b(0x218)]=_0x297920[_0x2f9b1b(0x292)](_0x5d05ce[_0x2f9b1b(0x28c)],0x1)||0x1388,_0x347875[_0x2f9b1b(0x272)][_0x2f9b1b(0x27f)]=_0x160de6[_0x2f9b1b(0x29f)][_0x2f9b1b(0x26b)][_0x2f9b1b(0x27f)],_0x347875[_0x2f9b1b(0x272)][_0x2f9b1b(0x21b)]=_0x160de6[_0x2f9b1b(0x29f)][_0x2f9b1b(0x26b)][_0x2f9b1b(0x21b)],_0x347875[_0x2f9b1b(0x272)][_0x2f9b1b(0x1ee)]=_0x160de6['config'][_0x2f9b1b(0x28e)],_0x347875[_0x2f9b1b(0x272)][_0x2f9b1b(0x214)]=_0x160de6[_0x2f9b1b(0x29f)]['turboScaleUrl'],_0x347875[_0x2f9b1b(0x272)][_0x2f9b1b(0x210)]=_0x160de6[_0x2f9b1b(0x29f)]['platforms'];const _0x31dee0=helper[_0x2f9b1b(0x1d8)](_0x160de6[_0x2f9b1b(0x29f)]);if(!helper['isEmpty'](_0x31dee0)){helper[_0x2f9b1b(0x26f)](_0x31dee0[_0x2f9b1b(0x1e1)])&&(_0x347875[_0x2f9b1b(0x272)][_0x2f9b1b(0x208)]=_0x31dee0[_0x2f9b1b(0x1e1)][_0x2f9b1b(0x248)]);if(helper[_0x2f9b1b(0x26f)](_0x31dee0[_0x2f9b1b(0x239)])&&helper['isNotUndefined'](_0x31dee0[_0x2f9b1b(0x239)][_0x2f9b1b(0x1f7)])){const _0x2c4fca={};_0x2c4fca[_0x2f9b1b(0x22b)]=_0x31dee0[_0x2f9b1b(0x239)]['maxFailures'],_0x2c4fca['workingDir']=_0x31dee0[_0x2f9b1b(0x239)]['workingDir'],_0x347875[_0x2f9b1b(0x272)]['failFast']=_0x2c4fca;}}let _0x22cee6='';_0x297920[_0x2f9b1b(0x25f)](helper[_0x2f9b1b(0x281)](),constants[_0x2f9b1b(0x289)][_0x2f9b1b(0x28a)])?_0x22cee6=_0x297920[_0x2f9b1b(0x298)]:_0x22cee6=_0x297920['gfRAn'];const _0x3e3a37=_0x22cee6,_0x541d6e=path[_0x2f9b1b(0x293)](__dirname,_0x297920[_0x2f9b1b(0x28f)],_0x297920[_0x2f9b1b(0x1f0)]),_0x4c95a5=path['join'](__dirname,_0x297920['ruOUQ'],_0x297920[_0x2f9b1b(0x257)]),_0xae403a=path[_0x2f9b1b(0x293)](__dirname,_0x297920[_0x2f9b1b(0x28f)],_0x297920[_0x2f9b1b(0x1d5)]);_0x347875[_0x2f9b1b(0x216)]&&(process[_0x2f9b1b(0x1dc)][_0x2f9b1b(0x245)]=_0x347875['testEnvironment']);_0x347875['testEnvironment']=path[_0x2f9b1b(0x293)](__dirname,_0x297920[_0x2f9b1b(0x28f)],_0x297920['EPnce']),_0x347875['runner']=_0x4c95a5,_0x347875[_0x2f9b1b(0x291)]=_0x347875[_0x2f9b1b(0x291)]||[],_0x347875['setupFilesAfterEnv']['push'](path[_0x2f9b1b(0x293)](__dirname,_0x297920[_0x2f9b1b(0x221)]));_0x1f1d94['isTestOrchestrationEnabled']()&&(_0x347875[_0x2f9b1b(0x1e6)]=path[_0x2f9b1b(0x293)](__dirname,_0x297920[_0x2f9b1b(0x28f)],_0x297920[_0x2f9b1b(0x1f3)]));if(testhubUtils[_0x2f9b1b(0x254)]()){let _0x55cbf0=null;try{_0x55cbf0=helper[_0x2f9b1b(0x224)](_0x297920[_0x2f9b1b(0x20b)],_0x297920[_0x2f9b1b(0x23b)]);}catch(_0x3bd3b6){_0x297920['bXFyu'](debug,'Unable\x20to\x20find\x20jest-circus,\x20'+_0x3bd3b6);}_0x55cbf0&&(_0x347875[_0x2f9b1b(0x291)][_0x2f9b1b(0x27b)](path[_0x2f9b1b(0x293)](__dirname,_0x297920['iUyTt'],_0x297920[_0x2f9b1b(0x22a)])),_0x347875[_0x2f9b1b(0x27e)]=path[_0x2f9b1b(0x293)](__dirname,_0x297920[_0x2f9b1b(0x28f)],_0x297920[_0x2f9b1b(0x283)]));}_0x347875[_0x2f9b1b(0x225)]=_0x347875[_0x2f9b1b(0x225)]||[];try{helper['requireSeleniumWebdriver'](),_0x347875[_0x2f9b1b(0x225)][_0x2f9b1b(0x27b)](path[_0x2f9b1b(0x293)](__dirname,_0x297920[_0x2f9b1b(0x269)]));}catch{logger[_0x2f9b1b(0x1de)](_0x297920['odzKw']);}try{helper[_0x2f9b1b(0x2a0)]['apply'](null,[_0x297920[_0x2f9b1b(0x227)],_0x297920[_0x2f9b1b(0x1cc)]]),logger[_0x2f9b1b(0x1de)](_0x297920[_0x2f9b1b(0x265)]),_0x347875[_0x2f9b1b(0x225)][_0x2f9b1b(0x27b)](path[_0x2f9b1b(0x293)](__dirname,_0x297920[_0x2f9b1b(0x26a)]));}catch(_0x523a73){logger['debug'](_0x297920[_0x2f9b1b(0x2a1)],_0x523a73);}_0x347875[_0x2f9b1b(0x228)]=_0x347875[_0x2f9b1b(0x228)]||[_0x297920[_0x2f9b1b(0x21d)]],_0x297920['xtjSL'](updateTestRerunConfig,_0x347875,_0x160de6);const _0xe36f8f=fs['readFileSync'](_0xae403a);fs['writeFileSync'](_0x347875[_0x2f9b1b(0x25d)],'\x0a\x20\x20\x20\x20'+_0xe36f8f+'\x0a\x0a\x20\x20\x20\x20const\x20ReporterDispatcher\x20=\x20_interopRequireDefault(requireModule(\x27@jest/core/build/ReporterDispatcher.js\x27,\x20\x27@jest/core\x27)).default;\x20//node_modules/@jest/core/build/ReporterDispatcher.js\x0a\x20\x20\x20\x20const\x20fs\x20=\x20require(\x27fs\x27);\x0a\x20\x20\x20\x20const\x20path\x20=\x20require(\x27path\x27);\x0a\x20\x20\x20\x20const\x20helper\x20=\x20require(\x27../../../helpers/helper\x27);\x0a\x20\x20\x20\x20var\x20_someFunc\x20=\x20ReporterDispatcher.prototype.onRunComplete;\x0a\x20\x20\x20\x20ReporterDispatcher.prototype.onRunComplete\x20=\x20async\x20function\x20(testContexts,\x20results)\x20{\x0a\x20\x20\x20\x20\x20\x20results.numTotalTestSuites\x20=\x20results.numTotalTestSuites\x20*\x20'+_0x160de6[_0x2f9b1b(0x29f)][_0x2f9b1b(0x1e3)]['length']+_0x2f9b1b(0x21e)),logger['info']('Creating\x20'+_0x3e3a37+_0x2f9b1b(0x237)),fs[_0x2f9b1b(0x22c)](_0x3e3a37,'const\x20config='+JSON[_0x2f9b1b(0x1db)](_0x347875)+_0x2f9b1b(0x29e));if(_0x1f1d94[_0x2f9b1b(0x1f9)]()){logger[_0x2f9b1b(0x1de)](_0x297920['JXRqZ']);const _0x3d63f8=await _0x1f1d94['findTestFiles'](_0x347875,_0x365b51[_0x2f9b1b(0x26c)](0x1),_0x3e3a37);logger[_0x2f9b1b(0x1de)]('Found:\x20'+JSON['stringify'](_0x3d63f8)+_0x2f9b1b(0x23c));const _0x37cbcb=await _0x1f1d94['reorderTestFiles'](_0x3d63f8);logger[_0x2f9b1b(0x1de)](_0x2f9b1b(0x256)+JSON['stringify'](_0x37cbcb)),_0x37cbcb&&_0x297920[_0x2f9b1b(0x299)](_0x37cbcb[_0x2f9b1b(0x246)],0x0)&&(process['env'][_0x2f9b1b(0x25b)]=_0x37cbcb?.[_0x2f9b1b(0x293)](','));}logger['info'](_0x297920[_0x2f9b1b(0x1e5)]);testhubUtils['shouldProcessEventForTesthub']()&&TestDetails[_0x2f9b1b(0x263)]();helper[_0x2f9b1b(0x250)]({},_0x365b51),PerformanceTester[_0x2f9b1b(0x20a)](PerformanceEvents[_0x2f9b1b(0x266)]);const _0x42286b=_0x297920[_0x2f9b1b(0x273)](spawn,_0x297920[_0x2f9b1b(0x295)],[_0x297920['uziyT'],_0x297920[_0x2f9b1b(0x233)],_0x3e3a37,..._0x365b51['slice'](0x1)],{'shell':_0x297920[_0x2f9b1b(0x25f)](process[_0x2f9b1b(0x275)],_0x297920[_0x2f9b1b(0x22f)]),'stdio':_0x297920[_0x2f9b1b(0x249)],'env':Object['assign']({},process[_0x2f9b1b(0x1dc)])});_0x42286b['on'](_0x297920[_0x2f9b1b(0x219)],async _0x5d7c4a=>{const _0x129324=_0x2f9b1b;PerformanceTester[_0x129324(0x23e)](PerformanceEvents[_0x129324(0x24b)]);try{const {browserstackFolderPath:_0x3ce42c,tcgConfigPath:_0xe73166}=helper['getTCGConfigFilePaths']();fs[_0x129324(0x294)](_0xe73166),fs[_0x129324(0x202)](_0x3ce42c);}catch(_0x3eefa0){logger[_0x129324(0x1de)](_0x297920[_0x129324(0x29d)],_0x3eefa0);}process[_0x129324(0x229)]=_0x5d7c4a,logger[_0x129324(0x1de)]('child\x20process\x20exited\x20with\x20code\x20'+_0x5d7c4a),logger['info'](_0x129324(0x24f)+_0x3e3a37);if(helper[_0x129324(0x26f)](_0x31dee0)&&helper[_0x129324(0x26f)](_0x31dee0[_0x129324(0x239)])&&fs[_0x129324(0x23d)](_0x31dee0[_0x129324(0x239)][_0x129324(0x1f7)]))try{const _0x3c8eb9={};_0x3c8eb9[_0x129324(0x244)]=!![],_0x3c8eb9['force']=!![],fs['rmSync'](_0x31dee0[_0x129324(0x239)]['workingDir'],_0x3c8eb9),logger['debug'](_0x129324(0x21c)+_0x31dee0[_0x129324(0x239)][_0x129324(0x1f7)]);}catch(_0x9154c0){logger[_0x129324(0x238)](_0x129324(0x282)+_0x9154c0);}let _0x5acf2a=null;if(fs[_0x129324(0x23d)](_0x541d6e)){_0x5acf2a=fs['readFileSync'](_0x541d6e);try{_0x5acf2a=JSON[_0x129324(0x20e)](_0x5acf2a);}catch(_0x2edf93){logger['debug'](_0x129324(0x1fa)+_0x541d6e+',\x20'+_0x5acf2a+'\x20:\x20'+_0x2edf93);}fs[_0x129324(0x294)](_0x541d6e);}fs[_0x129324(0x294)](_0x3e3a37),fs['unlinkSync'](_0x4c95a5),_0x5acf2a&&(_0x160de6[_0x129324(0x27d)]=helper['getErrorMessageFromResults'](_0x5acf2a,_0x297920['uziyT'],_0x160de6)),testOpsHelper[_0x129324(0x1d3)](),TestDetails[_0x129324(0x1d2)]();try{await TestHubHandler['stop'](),await BrowserstackCLI[_0x129324(0x29a)]()[_0x129324(0x261)]();}catch(_0x5acafe){console[_0x129324(0x22e)](_0x5acafe),_0x297920['PUCxe'](debug,_0x129324(0x276)+util['format'](_0x5acafe));}await utilities[_0x129324(0x205)](_0x160de6);});}function a14_0x1e59(_0xef16a9,_0x2f1efc){const _0x4eb281=a14_0x4eb2();return a14_0x1e59=function(_0x1e59df,_0x25f2ae){_0x1e59df=_0x1e59df-0x1cc;let _0x26fa4c=_0x4eb281[_0x1e59df];return _0x26fa4c;},a14_0x1e59(_0xef16a9,_0x2f1efc);}module['exports']=run;