#!/usr/bin/env node
'use strict';function a53_0x2d96(){const _0x2bfa52=['CUYmJ','finalExecution','getHubUrl','config','useW3C','1231909KguZtr','TCdCZ','JBApm','parallelsPerPlatform','handleApp','2904olGRgI','forEach','platforms','../test-runner','length','isUndefined','628328weHrhZ','12216870DjlNru','join','2361368bBXkja','../../helpers/utilities','../../helpers/testhub/testhubHandler','getPlatformName','vanilla','1102928yerJsM','exports','Config\x20yml\x20is\x20required','existsSync','launchBuild','File\x20path\x20is\x20required','args','llTTc','10YeJgdr','SDK_SETUP','2EFDXfz','end','proxySettings','index','EVENTS','modifyBrowserStackCaps','pNwAP','\x20doesn\x27t\x20exist','initialize','xgZqp','finally','push','UPMgL','modifyBrowserStackW3CCaps','file','1776426DIccot'];a53_0x2d96=function(){return _0x2bfa52;};return a53_0x2d96();}const a53_0x5e254e=a53_0x46e2;(function(_0x1737af,_0x30d9c6){const _0xf77c5f=a53_0x46e2,_0x308434=_0x1737af();while(!![]){try{const _0x5dcfa4=-parseInt(_0xf77c5f(0x209))/0x1*(parseInt(_0xf77c5f(0x1e9))/0x2)+-parseInt(_0xf77c5f(0x203))/0x3+-parseInt(_0xf77c5f(0x211))/0x4+-parseInt(_0xf77c5f(0x1e7))/0x5*(parseInt(_0xf77c5f(0x1f8))/0x6)+parseInt(_0xf77c5f(0x1fe))/0x7+parseInt(_0xf77c5f(0x20c))/0x8+parseInt(_0xf77c5f(0x20a))/0x9;if(_0x5dcfa4===_0x30d9c6)break;else _0x308434['push'](_0x308434['shift']());}catch(_0x46376){_0x308434['push'](_0x308434['shift']());}}}(a53_0x2d96,0x50e9a));const fs=require('fs'),path=require('path'),{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require('../../helpers/helper'),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require('../../helpers/performance/constants')[a53_0x5e254e(0x1ed)],utilities=require(a53_0x5e254e(0x20d)),{parallelVanillaRun}=require(a53_0x5e254e(0x206)),TestHubHandler=require(a53_0x5e254e(0x20e));async function run(_0xe0f3b4,_0x5a85cf,_0x30478c){const _0x541033=a53_0x5e254e,_0x306222={'JBApm':_0x541033(0x210),'pNwAP':function(_0x4665c6,_0x69eb92){return _0x4665c6(_0x69eb92);},'TCdCZ':_0x541033(0x1e4),'xgZqp':_0x541033(0x213),'UPMgL':function(_0x39e1a1,_0x1a7496){return _0x39e1a1>_0x1a7496;},'CUYmJ':function(_0x48fb1c,_0xd5607d){return _0x48fb1c*_0xd5607d;},'llTTc':function(_0x481a3c,_0x3248f0,_0x186a47){return _0x481a3c(_0x3248f0,_0x186a47);}};await _0x30478c[_0x541033(0x1f1)](_0xe0f3b4),await helper[_0x541033(0x202)](_0x30478c[_0x541033(0x1fc)]);const _0x22cf02=[];if(helper[_0x541033(0x208)](_0xe0f3b4['_'][0x1]))throw _0x306222[_0x541033(0x1ef)](Error,_0x306222[_0x541033(0x1ff)]);const _0x47fa50=path[_0x541033(0x20b)](process['cwd'](),_0xe0f3b4['_'][0x1]);if(!fs[_0x541033(0x1e2)](_0x47fa50))throw _0x306222['pNwAP'](Error,'File\x20'+_0xe0f3b4['_'][0x1]+_0x541033(0x1f0));if(!_0x30478c[_0x541033(0x1fc)])throw _0x306222[_0x541033(0x1ef)](Error,_0x306222[_0x541033(0x1f2)]);const _0x4f3948=helper[_0x541033(0x1fd)](_0x30478c['config']);_0x30478c['config'][_0x541033(0x205)]&&_0x306222[_0x541033(0x1f5)](_0x30478c[_0x541033(0x1fc)][_0x541033(0x205)][_0x541033(0x207)],0x0)&&_0x30478c[_0x541033(0x1fc)][_0x541033(0x205)][_0x541033(0x204)]((_0x3b7852,_0x361b77)=>{const _0x56ddd0=_0x541033;_0x4f3948?_0x22cf02[_0x56ddd0(0x1f4)](helper['modifyBrowserStackW3CCaps'](_0x30478c[_0x56ddd0(0x1fc)],_0x306222[_0x56ddd0(0x200)],_0x361b77)):_0x22cf02[_0x56ddd0(0x1f4)](helper[_0x56ddd0(0x1ee)](_0x30478c[_0x56ddd0(0x1fc)],_0x306222[_0x56ddd0(0x200)],_0x361b77));});let _0x4f67c6,_0x2d5190;const _0x170801=[];if(_0x306222['UPMgL'](_0x22cf02[_0x541033(0x207)],0x0))_0x22cf02['forEach']((_0x4c9048,_0x3f435d)=>{const _0x56187c=_0x541033,_0x1eae6a={};_0x1eae6a[_0x56187c(0x1ec)]=_0x3f435d,_0x4f67c6={'server':helper[_0x56187c(0x1fb)](_0x30478c['config']),'proxySettings':_0x30478c[_0x56187c(0x1fc)][_0x56187c(0x1eb)],'platform':helper[_0x56187c(0x20f)](_0x4c9048),'platformCaps':Object['assign'](_0x1eae6a,_0x30478c[_0x56187c(0x1fc)]['platforms'][_0x3f435d])};const _0x29ff64={'capability':_0x4c9048,..._0x4f67c6};_0x29ff64['file']=_0x47fa50,_0x29ff64[_0x56187c(0x1e5)]=_0x5a85cf;const _0x3da424={};_0x3da424['configuration']=_0x29ff64,_0x2d5190=_0x3da424,_0x170801[_0x56187c(0x1f4)](_0x2d5190);});else{let _0x2dff23;_0x4f3948?_0x2dff23=helper[_0x541033(0x1f6)](_0x30478c[_0x541033(0x1fc)],_0x306222[_0x541033(0x200)],0x0):_0x2dff23=helper[_0x541033(0x1ee)](_0x30478c[_0x541033(0x1fc)],_0x306222['JBApm'],0x0);_0x4f67c6={'server':helper['getHubUrl'](_0x30478c[_0x541033(0x1fc)]),'proxySettings':_0x30478c['config']['proxySettings']};const _0x4b0bf6={'capability':_0x2dff23,..._0x4f67c6};_0x4b0bf6[_0x541033(0x1f7)]=_0x47fa50,_0x4b0bf6[_0x541033(0x1e5)]=_0x5a85cf;const _0x188797={};_0x188797['configuration']=_0x4b0bf6,_0x2d5190=_0x188797,_0x170801[_0x541033(0x1f4)](_0x2d5190);}const _0x38bfce=await TestHubHandler[_0x541033(0x1e3)](_0x306222[_0x541033(0x200)],_0x30478c),_0x256b20=_0x306222[_0x541033(0x1f9)](_0x30478c[_0x541033(0x1fc)][_0x541033(0x205)][_0x541033(0x207)]||0x1,_0x30478c[_0x541033(0x1fc)][_0x541033(0x201)]||0x1);PerformanceTester[_0x541033(0x1ea)](PerformanceEvents[_0x541033(0x1e8)]),_0x306222[_0x541033(0x1e6)](parallelVanillaRun,_0x170801,_0x256b20)['then'](_0x16ea4c=>{})[_0x541033(0x1f3)](async()=>{const _0x16733d=_0x541033;PerformanceTester['start'](PerformanceEvents['SDK_CLEANUP']),await utilities[_0x16733d(0x1fa)](_0x30478c);});}function a53_0x46e2(_0x4c5a19,_0xdb2288){const _0x2d96e2=a53_0x2d96();return a53_0x46e2=function(_0x46e2eb,_0xc08600){_0x46e2eb=_0x46e2eb-0x1e2;let _0xb38748=_0x2d96e2[_0x46e2eb];return _0xb38748;},a53_0x46e2(_0x4c5a19,_0xdb2288);}module[a53_0x5e254e(0x212)]=run;