#!/usr/bin/env node
'use strict';function a91_0x3fce(_0x3b8b8d,_0x1f5083){const _0x517c03=a91_0x517c();return a91_0x3fce=function(_0x3fceb5,_0x36e8a9){_0x3fceb5=_0x3fceb5-0x190;let _0x5b4120=_0x517c03[_0x3fceb5];return _0x5b4120;},a91_0x3fce(_0x3b8b8d,_0x1f5083);}const a91_0x5acd41=a91_0x3fce;(function(_0x228563,_0x4c2764){const _0x9c7bf7=a91_0x3fce,_0x78d96e=_0x228563();while(!![]){try{const _0x3a23fb=-parseInt(_0x9c7bf7(0x1b3))/0x1*(-parseInt(_0x9c7bf7(0x1a7))/0x2)+-parseInt(_0x9c7bf7(0x1ad))/0x3+parseInt(_0x9c7bf7(0x1b7))/0x4*(-parseInt(_0x9c7bf7(0x1b5))/0x5)+parseInt(_0x9c7bf7(0x19c))/0x6*(parseInt(_0x9c7bf7(0x1b1))/0x7)+parseInt(_0x9c7bf7(0x1af))/0x8+-parseInt(_0x9c7bf7(0x1a9))/0x9+parseInt(_0x9c7bf7(0x195))/0xa;if(_0x3a23fb===_0x4c2764)break;else _0x78d96e['push'](_0x78d96e['shift']());}catch(_0x58fc39){_0x78d96e['push'](_0x78d96e['shift']());}}}(a91_0x517c,0x2fc8a));function a91_0x517c(){const _0x949fd9=['PWyAM','jibHA','config','configuration','launchBuild','../../helpers/performance/constants','start','getPlatformName','../../helpers/testhub/testhubHandler','modifyBrowserStackCaps','cwd','platforms','1311910MlsOOU','nCRpJ','end','getHubUrl','dDQxU','push','File\x20path\x20is\x20required','1883964NcsAkH','args','SDK_CLEANUP','path','exports','useW3C','vyatq','../../helpers/performance/performance-tester','JHYNt','VHIcN','then','4UhqATW','length','1053180EVbjaD','join','proxySettings','forEach','812241bAyWdn','file','326336FcIPkn','vanilla','7BkBMjN','isUndefined','186090meiHcH','EVENTS','30SfrElo','ANIJA','183112KFNqyo','assign','finalExecution'];a91_0x517c=function(){return _0x949fd9;};return a91_0x517c();}const fs=require('fs'),path=require(a91_0x5acd41(0x19f)),{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require('../../helpers/helper'),PerformanceTester=require(a91_0x5acd41(0x1a3)),PerformanceEvents=require(a91_0x5acd41(0x1bf))[a91_0x5acd41(0x1b4)],utilities=require('../../helpers/utilities'),{parallelVanillaRun}=require('../test-runner'),TestHubHandler=require(a91_0x5acd41(0x191));async function run(_0xd5a01d,_0x27cdbd,_0x14bd62){const _0x139f05=a91_0x5acd41,_0x19c90a={'nCRpJ':_0x139f05(0x1b0),'trbLU':function(_0x50c327,_0x42f4fc){return _0x50c327(_0x42f4fc);},'dDQxU':_0x139f05(0x19b),'jibHA':function(_0x3ae19c,_0x5d30f6){return _0x3ae19c(_0x5d30f6);},'JHYNt':'Config\x20yml\x20is\x20required','PWyAM':function(_0xa51002,_0x5f4a9c){return _0xa51002>_0x5f4a9c;},'VHIcN':function(_0x5a26f0,_0xdce256){return _0x5a26f0>_0xdce256;},'ANIJA':function(_0x12eb8f,_0x29cb11){return _0x12eb8f*_0x29cb11;},'vyatq':function(_0x558262,_0x1e4163,_0x1ebabf){return _0x558262(_0x1e4163,_0x1ebabf);}};await _0x14bd62['initialize'](_0xd5a01d),await helper['handleApp'](_0x14bd62[_0x139f05(0x1bc)]);const _0x2ca7e7=[];if(helper[_0x139f05(0x1b2)](_0xd5a01d['_'][0x1]))throw _0x19c90a['trbLU'](Error,_0x19c90a[_0x139f05(0x199)]);const _0x1e33bc=path[_0x139f05(0x1aa)](process[_0x139f05(0x193)](),_0xd5a01d['_'][0x1]);if(!fs['existsSync'](_0x1e33bc))throw _0x19c90a['trbLU'](Error,'File\x20'+_0xd5a01d['_'][0x1]+'\x20doesn\x27t\x20exist');if(!_0x14bd62[_0x139f05(0x1bc)])throw _0x19c90a[_0x139f05(0x1bb)](Error,_0x19c90a[_0x139f05(0x1a4)]);const _0x25262f=helper[_0x139f05(0x1a1)](_0x14bd62[_0x139f05(0x1bc)]);_0x14bd62[_0x139f05(0x1bc)][_0x139f05(0x194)]&&_0x19c90a[_0x139f05(0x1ba)](_0x14bd62[_0x139f05(0x1bc)][_0x139f05(0x194)][_0x139f05(0x1a8)],0x0)&&_0x14bd62[_0x139f05(0x1bc)]['platforms'][_0x139f05(0x1ac)]((_0x3ab83f,_0x3b0066)=>{const _0x115c84=_0x139f05;_0x25262f?_0x2ca7e7[_0x115c84(0x19a)](helper['modifyBrowserStackW3CCaps'](_0x14bd62[_0x115c84(0x1bc)],_0x19c90a[_0x115c84(0x196)],_0x3b0066)):_0x2ca7e7['push'](helper[_0x115c84(0x192)](_0x14bd62[_0x115c84(0x1bc)],_0x19c90a[_0x115c84(0x196)],_0x3b0066));});let _0x10fdee,_0x4df549;const _0xdafcf6=[];if(_0x19c90a[_0x139f05(0x1a5)](_0x2ca7e7[_0x139f05(0x1a8)],0x0))_0x2ca7e7[_0x139f05(0x1ac)]((_0x33ad9c,_0x511fb0)=>{const _0x2f2cd1=_0x139f05,_0x5c1ad2={};_0x5c1ad2['index']=_0x511fb0,_0x10fdee={'server':helper['getHubUrl'](_0x14bd62[_0x2f2cd1(0x1bc)]),'proxySettings':_0x14bd62[_0x2f2cd1(0x1bc)][_0x2f2cd1(0x1ab)],'platform':helper[_0x2f2cd1(0x190)](_0x33ad9c),'platformCaps':Object[_0x2f2cd1(0x1b8)](_0x5c1ad2,_0x14bd62[_0x2f2cd1(0x1bc)][_0x2f2cd1(0x194)][_0x511fb0])};const _0x46685c={'capability':_0x33ad9c,..._0x10fdee};_0x46685c['file']=_0x1e33bc,_0x46685c[_0x2f2cd1(0x19d)]=_0x27cdbd;const _0xfacf2f={};_0xfacf2f['configuration']=_0x46685c,_0x4df549=_0xfacf2f,_0xdafcf6[_0x2f2cd1(0x19a)](_0x4df549);});else{let _0x3fc7a6;_0x25262f?_0x3fc7a6=helper['modifyBrowserStackW3CCaps'](_0x14bd62[_0x139f05(0x1bc)],_0x19c90a[_0x139f05(0x196)],0x0):_0x3fc7a6=helper[_0x139f05(0x192)](_0x14bd62[_0x139f05(0x1bc)],_0x19c90a['nCRpJ'],0x0);_0x10fdee={'server':helper[_0x139f05(0x198)](_0x14bd62[_0x139f05(0x1bc)]),'proxySettings':_0x14bd62[_0x139f05(0x1bc)][_0x139f05(0x1ab)]};const _0x5d2950={'capability':_0x3fc7a6,..._0x10fdee};_0x5d2950[_0x139f05(0x1ae)]=_0x1e33bc,_0x5d2950[_0x139f05(0x19d)]=_0x27cdbd;const _0x5cfd60={};_0x5cfd60[_0x139f05(0x1bd)]=_0x5d2950,_0x4df549=_0x5cfd60,_0xdafcf6[_0x139f05(0x19a)](_0x4df549);}const _0x507d9e=await TestHubHandler[_0x139f05(0x1be)](_0x19c90a[_0x139f05(0x196)],_0x14bd62),_0x3dd95f=_0x19c90a[_0x139f05(0x1b6)](_0x14bd62[_0x139f05(0x1bc)][_0x139f05(0x194)][_0x139f05(0x1a8)]||0x1,_0x14bd62[_0x139f05(0x1bc)]['parallelsPerPlatform']||0x1);PerformanceTester[_0x139f05(0x197)](PerformanceEvents['SDK_SETUP']),_0x19c90a[_0x139f05(0x1a2)](parallelVanillaRun,_0xdafcf6,_0x3dd95f)[_0x139f05(0x1a6)](_0x148edb=>{})['finally'](async()=>{const _0xea7406=_0x139f05;PerformanceTester[_0xea7406(0x1c0)](PerformanceEvents[_0xea7406(0x19e)]),await utilities[_0xea7406(0x1b9)](_0x14bd62);});}module[a91_0x5acd41(0x1a0)]=run;