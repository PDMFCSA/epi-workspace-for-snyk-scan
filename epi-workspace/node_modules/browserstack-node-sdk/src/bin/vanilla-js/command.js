#!/usr/bin/env node
'use strict';function a89_0x2a12(_0x335ceb,_0x5d01a7){const _0x22d374=a89_0x22d3();return a89_0x2a12=function(_0x2a12c8,_0x347d64){_0x2a12c8=_0x2a12c8-0x1a9;let _0x3ab425=_0x22d374[_0x2a12c8];return _0x3ab425;},a89_0x2a12(_0x335ceb,_0x5d01a7);}function a89_0x22d3(){const _0x9baf2b=['getPlatformName','File\x20path\x20is\x20required','push','DSeAO','index','getHubUrl','start','36999jePFaG','file','handleApp','46065ydUbpt','configuration','../../helpers/BrowserStackSetup','523426DJfEis','SDK_SETUP','initialize','args','147ERiQRZ','finalExecution','vanilla','assign','modifyBrowserStackW3CCaps','forEach','existsSync','platforms','cwd','exports','\x20doesn\x27t\x20exist','10968joyRUM','../../helpers/testhub/testhubHandler','SDK_CLEANUP','length','path','13639110NPCNUf','xERVG','modifyBrowserStackCaps','104YmaoSz','YKWqd','2767940wYZdnN','useW3C','FSAyn','113792ZvQIoo','168cEGuzM','proxySettings','../../helpers/helper','../test-runner','then','parallelsPerPlatform','config','end','join','DMkkN'];a89_0x22d3=function(){return _0x9baf2b;};return a89_0x22d3();}const a89_0x9cf30b=a89_0x2a12;(function(_0x4039f4,_0x10203b){const _0x4cc64d=a89_0x2a12,_0x40d9a1=_0x4039f4();while(!![]){try{const _0x272a95=parseInt(_0x4cc64d(0x1d8))/0x1+parseInt(_0x4cc64d(0x1c0))/0x2+-parseInt(_0x4cc64d(0x1d5))/0x3*(-parseInt(_0x4cc64d(0x1bb))/0x4)+parseInt(_0x4cc64d(0x1bd))/0x5+-parseInt(_0x4cc64d(0x1b3))/0x6*(-parseInt(_0x4cc64d(0x1dc))/0x7)+parseInt(_0x4cc64d(0x1c1))/0x8*(parseInt(_0x4cc64d(0x1d2))/0x9)+-parseInt(_0x4cc64d(0x1b8))/0xa;if(_0x272a95===_0x10203b)break;else _0x40d9a1['push'](_0x40d9a1['shift']());}catch(_0xdb21ed){_0x40d9a1['push'](_0x40d9a1['shift']());}}}(a89_0x22d3,0x47c3c));const fs=require('fs'),path=require(a89_0x9cf30b(0x1b7)),{default:BrowserStackSetup}=require(a89_0x9cf30b(0x1d7)),helper=require(a89_0x9cf30b(0x1c3)),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require('../../helpers/performance/constants')['EVENTS'],utilities=require('../../helpers/utilities'),{parallelVanillaRun}=require(a89_0x9cf30b(0x1c4)),TestHubHandler=require(a89_0x9cf30b(0x1b4));async function run(_0x4b822d,_0x7a4398,_0x4b9f03){const _0x5cfcdc=a89_0x9cf30b,_0x2f84b5={'FSAyn':_0x5cfcdc(0x1aa),'YKWqd':function(_0x3b61fa,_0x41041f){return _0x3b61fa(_0x41041f);},'xERVG':_0x5cfcdc(0x1cc),'qsXOP':'Config\x20yml\x20is\x20required','ATWpg':function(_0x505aeb,_0x1b05bf){return _0x505aeb>_0x1b05bf;},'VNfmY':function(_0x437035,_0x4dc23a){return _0x437035>_0x4dc23a;},'DSeAO':function(_0x6cde93,_0x539754){return _0x6cde93*_0x539754;},'DMkkN':function(_0x444fe4,_0x3dad83,_0x5332bf){return _0x444fe4(_0x3dad83,_0x5332bf);}};await _0x4b9f03[_0x5cfcdc(0x1da)](_0x4b822d),await helper[_0x5cfcdc(0x1d4)](_0x4b9f03[_0x5cfcdc(0x1c7)]);const _0x80cfb2=[];if(helper['isUndefined'](_0x4b822d['_'][0x1]))throw _0x2f84b5[_0x5cfcdc(0x1bc)](Error,_0x2f84b5[_0x5cfcdc(0x1b9)]);const _0x1c8164=path[_0x5cfcdc(0x1c9)](process[_0x5cfcdc(0x1b0)](),_0x4b822d['_'][0x1]);if(!fs[_0x5cfcdc(0x1ae)](_0x1c8164))throw _0x2f84b5[_0x5cfcdc(0x1bc)](Error,'File\x20'+_0x4b822d['_'][0x1]+_0x5cfcdc(0x1b2));if(!_0x4b9f03[_0x5cfcdc(0x1c7)])throw _0x2f84b5['YKWqd'](Error,_0x2f84b5['qsXOP']);const _0x259a35=helper[_0x5cfcdc(0x1be)](_0x4b9f03[_0x5cfcdc(0x1c7)]);_0x4b9f03[_0x5cfcdc(0x1c7)][_0x5cfcdc(0x1af)]&&_0x2f84b5['ATWpg'](_0x4b9f03[_0x5cfcdc(0x1c7)]['platforms'][_0x5cfcdc(0x1b6)],0x0)&&_0x4b9f03['config']['platforms'][_0x5cfcdc(0x1ad)]((_0x39883b,_0x434964)=>{const _0x46cb9f=_0x5cfcdc;_0x259a35?_0x80cfb2[_0x46cb9f(0x1cd)](helper[_0x46cb9f(0x1ac)](_0x4b9f03[_0x46cb9f(0x1c7)],_0x2f84b5[_0x46cb9f(0x1bf)],_0x434964)):_0x80cfb2[_0x46cb9f(0x1cd)](helper['modifyBrowserStackCaps'](_0x4b9f03[_0x46cb9f(0x1c7)],_0x2f84b5[_0x46cb9f(0x1bf)],_0x434964));});let _0x123398,_0x170841;const _0x1a393e=[];if(_0x2f84b5['VNfmY'](_0x80cfb2[_0x5cfcdc(0x1b6)],0x0))_0x80cfb2[_0x5cfcdc(0x1ad)]((_0x307336,_0x9c1b0e)=>{const _0x582ea1=_0x5cfcdc,_0x95eb6a={};_0x95eb6a[_0x582ea1(0x1cf)]=_0x9c1b0e,_0x123398={'server':helper[_0x582ea1(0x1d0)](_0x4b9f03[_0x582ea1(0x1c7)]),'proxySettings':_0x4b9f03['config'][_0x582ea1(0x1c2)],'platform':helper[_0x582ea1(0x1cb)](_0x307336),'platformCaps':Object[_0x582ea1(0x1ab)](_0x95eb6a,_0x4b9f03['config'][_0x582ea1(0x1af)][_0x9c1b0e])};const _0x47a38e={'capability':_0x307336,..._0x123398};_0x47a38e[_0x582ea1(0x1d3)]=_0x1c8164,_0x47a38e[_0x582ea1(0x1db)]=_0x7a4398;const _0x29837b={};_0x29837b[_0x582ea1(0x1d6)]=_0x47a38e,_0x170841=_0x29837b,_0x1a393e['push'](_0x170841);});else{let _0x315e79;_0x259a35?_0x315e79=helper['modifyBrowserStackW3CCaps'](_0x4b9f03[_0x5cfcdc(0x1c7)],_0x2f84b5[_0x5cfcdc(0x1bf)],0x0):_0x315e79=helper[_0x5cfcdc(0x1ba)](_0x4b9f03[_0x5cfcdc(0x1c7)],_0x2f84b5['FSAyn'],0x0);_0x123398={'server':helper['getHubUrl'](_0x4b9f03[_0x5cfcdc(0x1c7)]),'proxySettings':_0x4b9f03[_0x5cfcdc(0x1c7)][_0x5cfcdc(0x1c2)]};const _0xefb521={'capability':_0x315e79,..._0x123398};_0xefb521[_0x5cfcdc(0x1d3)]=_0x1c8164,_0xefb521[_0x5cfcdc(0x1db)]=_0x7a4398;const _0x34f67b={};_0x34f67b[_0x5cfcdc(0x1d6)]=_0xefb521,_0x170841=_0x34f67b,_0x1a393e[_0x5cfcdc(0x1cd)](_0x170841);}const _0x38f882=await TestHubHandler['launchBuild'](_0x2f84b5['FSAyn'],_0x4b9f03),_0x47e471=_0x2f84b5[_0x5cfcdc(0x1ce)](_0x4b9f03[_0x5cfcdc(0x1c7)]['platforms'][_0x5cfcdc(0x1b6)]||0x1,_0x4b9f03[_0x5cfcdc(0x1c7)][_0x5cfcdc(0x1c6)]||0x1);PerformanceTester[_0x5cfcdc(0x1c8)](PerformanceEvents[_0x5cfcdc(0x1d9)]),_0x2f84b5[_0x5cfcdc(0x1ca)](parallelVanillaRun,_0x1a393e,_0x47e471)[_0x5cfcdc(0x1c5)](_0x2536ea=>{})['finally'](async()=>{const _0x3ff1d9=_0x5cfcdc;PerformanceTester[_0x3ff1d9(0x1d1)](PerformanceEvents[_0x3ff1d9(0x1b5)]),await utilities[_0x3ff1d9(0x1a9)](_0x4b9f03);});}module[a89_0x9cf30b(0x1b1)]=run;