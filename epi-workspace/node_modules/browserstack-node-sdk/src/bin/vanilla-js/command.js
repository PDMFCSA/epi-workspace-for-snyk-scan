#!/usr/bin/env node
'use strict';function a87_0x1be9(_0x1af290,_0x3a4800){const _0x57fa87=a87_0x57fa();return a87_0x1be9=function(_0x1be956,_0x527f49){_0x1be956=_0x1be956-0x1e4;let _0x375307=_0x57fa87[_0x1be956];return _0x375307;},a87_0x1be9(_0x1af290,_0x3a4800);}const a87_0x369421=a87_0x1be9;function a87_0x57fa(){const _0x4549f9=['join','IYRYc','path','../../helpers/BrowserStackSetup','2578104ZixxvL','vanilla','uirBG','start','index','cwd','File\x20','assign','PQJjd','getHubUrl','xhbTj','SDK_SETUP','112811gxPTCE','../../helpers/performance/constants','push','5770NXfYRq','args','../../helpers/performance/performance-tester','NxCeO','299643avpUar','initialize','platforms','1916DQUHsT','10xkhRmf','forEach','then','launchBuild','ZpsvW','isUndefined','2118809Vtnfvy','file','finalExecution','../../helpers/utilities','modifyBrowserStackW3CCaps','EVENTS','handleApp','../../helpers/testhub/testhubHandler','end','proxySettings','length','\x20doesn\x27t\x20exist','modifyBrowserStackCaps','config','LmOFO','useW3C','configuration','345896RLJmDB','File\x20path\x20is\x20required','2180484SoEpBN','existsSync'];a87_0x57fa=function(){return _0x4549f9;};return a87_0x57fa();}(function(_0x2513c3,_0x447233){const _0x3aadb1=a87_0x1be9,_0x349337=_0x2513c3();while(!![]){try{const _0x585d0b=-parseInt(_0x3aadb1(0x200))/0x1+parseInt(_0x3aadb1(0x20b))/0x2*(parseInt(_0x3aadb1(0x207))/0x3)+parseInt(_0x3aadb1(0x20a))/0x4*(parseInt(_0x3aadb1(0x203))/0x5)+-parseInt(_0x3aadb1(0x1f4))/0x6+parseInt(_0x3aadb1(0x211))/0x7+-parseInt(_0x3aadb1(0x1ec))/0x8+-parseInt(_0x3aadb1(0x1ee))/0x9;if(_0x585d0b===_0x447233)break;else _0x349337['push'](_0x349337['shift']());}catch(_0x360edd){_0x349337['push'](_0x349337['shift']());}}}(a87_0x57fa,0x80a02));const fs=require('fs'),path=require(a87_0x369421(0x1f2)),{default:BrowserStackSetup}=require(a87_0x369421(0x1f3)),helper=require('../../helpers/helper'),PerformanceTester=require(a87_0x369421(0x205)),PerformanceEvents=require(a87_0x369421(0x201))[a87_0x369421(0x216)],utilities=require(a87_0x369421(0x214)),{parallelVanillaRun}=require('../test-runner'),TestHubHandler=require(a87_0x369421(0x218));async function run(_0xe2f5d3,_0x189443,_0xb8b2f5){const _0x38df67=a87_0x369421,_0xd1e08c={'PQJjd':_0x38df67(0x1f5),'NxCeO':function(_0x5dc5ff,_0xca7c11){return _0x5dc5ff(_0xca7c11);},'uirBG':_0x38df67(0x1ed),'uduye':function(_0x133511,_0x57272e){return _0x133511(_0x57272e);},'LmOFO':'Config\x20yml\x20is\x20required','IYRYc':function(_0x2c79be,_0x5af282){return _0x2c79be>_0x5af282;},'ZpsvW':function(_0x19a2f0,_0x5b5a22){return _0x19a2f0*_0x5b5a22;},'xhbTj':function(_0x197f24,_0x1aa3ea,_0x3b9a93){return _0x197f24(_0x1aa3ea,_0x3b9a93);}};await _0xb8b2f5[_0x38df67(0x208)](_0xe2f5d3),await helper[_0x38df67(0x217)](_0xb8b2f5[_0x38df67(0x1e8)]);const _0x344192=[];if(helper[_0x38df67(0x210)](_0xe2f5d3['_'][0x1]))throw _0xd1e08c[_0x38df67(0x206)](Error,_0xd1e08c[_0x38df67(0x1f6)]);const _0x242841=path[_0x38df67(0x1f0)](process[_0x38df67(0x1f9)](),_0xe2f5d3['_'][0x1]);if(!fs[_0x38df67(0x1ef)](_0x242841))throw _0xd1e08c['uduye'](Error,_0x38df67(0x1fa)+_0xe2f5d3['_'][0x1]+_0x38df67(0x1e6));if(!_0xb8b2f5[_0x38df67(0x1e8)])throw _0xd1e08c['NxCeO'](Error,_0xd1e08c[_0x38df67(0x1e9)]);const _0x102588=helper[_0x38df67(0x1ea)](_0xb8b2f5['config']);_0xb8b2f5[_0x38df67(0x1e8)][_0x38df67(0x209)]&&_0xd1e08c[_0x38df67(0x1f1)](_0xb8b2f5[_0x38df67(0x1e8)][_0x38df67(0x209)][_0x38df67(0x1e5)],0x0)&&_0xb8b2f5[_0x38df67(0x1e8)][_0x38df67(0x209)]['forEach']((_0x32bf1f,_0x2fbc55)=>{const _0x54fe8d=_0x38df67;_0x102588?_0x344192['push'](helper['modifyBrowserStackW3CCaps'](_0xb8b2f5[_0x54fe8d(0x1e8)],_0xd1e08c['PQJjd'],_0x2fbc55)):_0x344192[_0x54fe8d(0x202)](helper[_0x54fe8d(0x1e7)](_0xb8b2f5['config'],_0xd1e08c['PQJjd'],_0x2fbc55));});let _0xaaec12,_0x4dab6a;const _0x2f82c8=[];if(_0xd1e08c[_0x38df67(0x1f1)](_0x344192['length'],0x0))_0x344192[_0x38df67(0x20c)]((_0x10e1a2,_0x356220)=>{const _0x5972af=_0x38df67,_0xe99a4d={};_0xe99a4d[_0x5972af(0x1f8)]=_0x356220,_0xaaec12={'server':helper[_0x5972af(0x1fd)](_0xb8b2f5[_0x5972af(0x1e8)]),'proxySettings':_0xb8b2f5[_0x5972af(0x1e8)][_0x5972af(0x1e4)],'platform':helper['getPlatformName'](_0x10e1a2),'platformCaps':Object[_0x5972af(0x1fb)](_0xe99a4d,_0xb8b2f5[_0x5972af(0x1e8)][_0x5972af(0x209)][_0x356220])};const _0x33376b={'capability':_0x10e1a2,..._0xaaec12};_0x33376b[_0x5972af(0x212)]=_0x242841,_0x33376b[_0x5972af(0x204)]=_0x189443;const _0x54765b={};_0x54765b[_0x5972af(0x1eb)]=_0x33376b,_0x4dab6a=_0x54765b,_0x2f82c8[_0x5972af(0x202)](_0x4dab6a);});else{let _0x323b62;_0x102588?_0x323b62=helper[_0x38df67(0x215)](_0xb8b2f5[_0x38df67(0x1e8)],_0xd1e08c[_0x38df67(0x1fc)],0x0):_0x323b62=helper[_0x38df67(0x1e7)](_0xb8b2f5[_0x38df67(0x1e8)],_0xd1e08c[_0x38df67(0x1fc)],0x0);_0xaaec12={'server':helper[_0x38df67(0x1fd)](_0xb8b2f5[_0x38df67(0x1e8)]),'proxySettings':_0xb8b2f5[_0x38df67(0x1e8)][_0x38df67(0x1e4)]};const _0x31be6d={'capability':_0x323b62,..._0xaaec12};_0x31be6d[_0x38df67(0x212)]=_0x242841,_0x31be6d['args']=_0x189443;const _0x25f847={};_0x25f847[_0x38df67(0x1eb)]=_0x31be6d,_0x4dab6a=_0x25f847,_0x2f82c8['push'](_0x4dab6a);}const _0x3e8a35=await TestHubHandler[_0x38df67(0x20e)](_0xd1e08c[_0x38df67(0x1fc)],_0xb8b2f5),_0x51f82a=_0xd1e08c[_0x38df67(0x20f)](_0xb8b2f5['config'][_0x38df67(0x209)]['length']||0x1,_0xb8b2f5['config']['parallelsPerPlatform']||0x1);PerformanceTester[_0x38df67(0x219)](PerformanceEvents[_0x38df67(0x1ff)]),_0xd1e08c[_0x38df67(0x1fe)](parallelVanillaRun,_0x2f82c8,_0x51f82a)[_0x38df67(0x20d)](_0x4d03b0=>{})['finally'](async()=>{const _0x34d481=_0x38df67;PerformanceTester[_0x34d481(0x1f7)](PerformanceEvents['SDK_CLEANUP']),await utilities[_0x34d481(0x213)](_0xb8b2f5);});}module['exports']=run;