const a54_0x35f4de=a54_0x22dc;(function(_0x16286c,_0x2c030c){const _0x102650=a54_0x22dc,_0x18a927=_0x16286c();while(!![]){try{const _0x5b8e26=parseInt(_0x102650(0x13a))/0x1+-parseInt(_0x102650(0x17e))/0x2+-parseInt(_0x102650(0x147))/0x3*(parseInt(_0x102650(0x152))/0x4)+-parseInt(_0x102650(0x149))/0x5*(parseInt(_0x102650(0x14c))/0x6)+parseInt(_0x102650(0x151))/0x7*(parseInt(_0x102650(0x12f))/0x8)+parseInt(_0x102650(0x18a))/0x9+parseInt(_0x102650(0x173))/0xa;if(_0x5b8e26===_0x2c030c)break;else _0x18a927['push'](_0x18a927['shift']());}catch(_0x5d8d8b){_0x18a927['push'](_0x18a927['shift']());}}}(a54_0x2b9d,0xe56fa));const logger=require('../../helpers/logger')[a54_0x35f4de(0x165)],BrowserstackCLI=require('../v2/browserstackCLI'),GrpcClient=require('../v2/grpcClient'),constants=require(a54_0x35f4de(0x180));function a54_0x22dc(_0x54d389,_0x2d3668){const _0x2b9d82=a54_0x2b9d();return a54_0x22dc=function(_0x22dcc5,_0x2b092f){_0x22dcc5=_0x22dcc5-0x12b;let _0x409849=_0x2b9d82[_0x22dcc5];return _0x409849;},a54_0x22dc(_0x54d389,_0x2d3668);}function a54_0x2b9d(){const _0x5304ae=['errorCode','Session\x20Linking\x20Issue\x20details\x20not\x20found','reportFinalDetectionState','Process\x20Interruption\x20details\x20not\x20found:','OaGOf','{CLIENT_TROUBLESHOOTING_DOCUMENTATION}','reportConnectivityIssue','hjOLs','jdMJe','getErrorCodesOccurredInCli','base64','parse','3MdWTWO','reportProcessInterruptionSituation','5iHdpbj','toString','VIKJr','5290716GVnHuV','XfhbR','BVXWt','getFinalErrorMessage','object','35EqrlYa','4590268LNAzgZ','.browserstack\x20folder\x20not\x20accessible','ssl\x20cert\x20issue','keys','EKaDz','join','fnasT','from','XuClh','Conflicting\x20Env\x20Var\x20details\x20not\x20found','warn','bSjnQ','getCachedErrorCodes','Error\x20in\x20getting\x20aggregated\x20error\x20codes:','{SIGNAL}','BWmpw','reportDotBrowserStackFolderNotAccessibleIssue','Session\x20Linking\x20Issue','kXhjY','winstonLogger','ElZiT','error','finalErrorMessage','push','PjklF','deoPD','isArray','conflicting\x20env\x20var\x20detected','KTCCL','add','getErrorDetails','getDocumentationLink','{ERROR_CODES}','6374780MFIhTf','DmZXy','ahWOc','reportClientTroubleshootingError','errorMessage','phwcz','vQVKO','ggAhD','GmQRW','WKIqm','{ENV_VAR}','1599608xsivEI','exports','./constants','vaUOA','checkForErrorsOccuredInCLI','[ClientTroubleShootingService]\x20','logError','ILCxF','lbWru','errorCodes','LmBCG','ojEWT','5344974jNPayN','getAggregatedErrorCodes','logSituation','getInstance','errorCodesOccurredWhenCLINotRunning','stringify','hZSpP','isRunning','documentationLink','replace','1560752hUukXy','wPHhu','Process\x20Interruption','UrMZV','length','cachedErrorCodes','MoxJO','Jlcvm','errorCodesOccurredInCLI','Error\x20in\x20getting\x20error\x20details\x20for\x20','DjneD','1562093ZCNhGh'];a54_0x2b9d=function(){return _0x5304ae;};return a54_0x2b9d();}class ClientTroubleShootingService{static [a54_0x35f4de(0x134)]=null;static [a54_0x35f4de(0x18e)]=new Set();static async[a54_0x35f4de(0x170)](_0x6f6665){const _0x27b55a=a54_0x35f4de,_0x4d38b7={};_0x4d38b7[_0x27b55a(0x186)]=function(_0x4ee60c,_0x1c9ae9){return _0x4ee60c!==_0x1c9ae9;};const _0x587279=_0x4d38b7;try{if(BrowserstackCLI[_0x27b55a(0x18d)]()[_0x27b55a(0x12c)]()){const _0x194d0f=await GrpcClient[_0x27b55a(0x18d)]()[_0x27b55a(0x176)](_0x6f6665);if(_0x587279['lbWru'](_0x194d0f,null)&&_0x194d0f['getSuccess']())return{'errorCode':_0x194d0f['getErrorCode'](),'errorMessage':_0x194d0f['getErrorMessage']()};return{};}}catch(_0x183593){return this[_0x27b55a(0x184)](_0x27b55a(0x138)+_0x6f6665+':',_0x183593),{};}}static async[a54_0x35f4de(0x18b)](){const _0x127dc3=a54_0x35f4de,_0x17504f={};_0x17504f['vQVKO']=function(_0x2bf830,_0x5240ef){return _0x2bf830!==_0x5240ef;},_0x17504f[_0x127dc3(0x166)]=_0x127dc3(0x145),_0x17504f[_0x127dc3(0x188)]=_0x127dc3(0x15f);const _0x3c729b=_0x17504f;try{if(BrowserstackCLI[_0x127dc3(0x18d)]()['isRunning']()){const _0xbaa92b=await GrpcClient[_0x127dc3(0x18d)]()['getAggregatedClientTroubleshootingErrors']();if(_0x3c729b[_0x127dc3(0x179)](_0xbaa92b,null)&&_0xbaa92b['getSuccess']()){const _0xae0747=Buffer[_0x127dc3(0x159)](_0xbaa92b['getErrorCodes'](),_0x3c729b[_0x127dc3(0x166)])[_0x127dc3(0x14a)](),_0x40a3d6=_0xae0747?JSON[_0x127dc3(0x146)](_0xae0747):[],_0x35a11d=_0xbaa92b[_0x127dc3(0x171)](),_0x17377b=_0xbaa92b[_0x127dc3(0x14f)](),_0x4ab67c=Buffer['from'](_0xbaa92b[_0x127dc3(0x144)](),_0x3c729b['ElZiT'])['toString'](),_0x109f55=_0x4ab67c?JSON[_0x127dc3(0x146)](_0x4ab67c):[],_0x115ed7={};return _0x115ed7[_0x127dc3(0x187)]=_0x40a3d6,_0x115ed7[_0x127dc3(0x12d)]=_0x35a11d,_0x115ed7['finalErrorMessage']=_0x17377b,_0x115ed7[_0x127dc3(0x137)]=_0x109f55,_0x115ed7;}const _0x44f94d={};return _0x44f94d[_0x127dc3(0x187)]=[],_0x44f94d['documentationLink']='',_0x44f94d['finalErrorMessage']='',_0x44f94d[_0x127dc3(0x137)]=[],_0x44f94d;}const _0x2de570={};return _0x2de570[_0x127dc3(0x187)]=[],_0x2de570[_0x127dc3(0x12d)]='',_0x2de570[_0x127dc3(0x168)]='',_0x2de570[_0x127dc3(0x137)]=[],_0x2de570;}catch(_0x46c21f){this[_0x127dc3(0x184)](_0x3c729b[_0x127dc3(0x188)],_0x46c21f);const _0x3eb10a={};return _0x3eb10a['errorCodes']=[],_0x3eb10a[_0x127dc3(0x12d)]='',_0x3eb10a['finalErrorMessage']='',_0x3eb10a[_0x127dc3(0x137)]=[],_0x3eb10a;}}static[a54_0x35f4de(0x18c)](_0x11e06d,_0x362ca1){const _0x11e08b=a54_0x35f4de;logger[_0x11e08b(0x15c)](_0x11e06d+':\x20'+_0x362ca1);}static[a54_0x35f4de(0x182)](_0x4367b3){const _0x195753=a54_0x35f4de,_0x1bdc5e={};_0x1bdc5e[_0x195753(0x17a)]=function(_0x51ca40,_0x699db5){return _0x51ca40!=_0x699db5;},_0x1bdc5e['XuClh']=function(_0x22b082,_0x1d3e64){return _0x22b082!=_0x1d3e64;},_0x1bdc5e[_0x195753(0x139)]=function(_0x3251d1,_0x56bfa5){return _0x3251d1>_0x56bfa5;},_0x1bdc5e['BVXWt']=function(_0x414694,_0xd8104f){return _0x414694!=_0xd8104f;},_0x1bdc5e[_0x195753(0x143)]=function(_0x49a9bd,_0x2fb54b){return _0x49a9bd!=_0x2fb54b;};const _0x3a8608=_0x1bdc5e,_0x1d1110=[];if(_0x3a8608['ggAhD'](_0x4367b3,null)&&_0x3a8608[_0x195753(0x15a)](_0x4367b3[_0x195753(0x137)],null)&&_0x3a8608[_0x195753(0x139)](_0x4367b3[_0x195753(0x137)][_0x195753(0x133)],0x0))for(const _0x56e91f of _0x4367b3[_0x195753(0x137)]){_0x3a8608[_0x195753(0x14e)](_0x56e91f[_0x195753(0x13b)],null)&&_0x3a8608[_0x195753(0x143)](_0x56e91f[_0x195753(0x177)],null)&&(_0x1d1110[_0x195753(0x169)](_0x56e91f[_0x195753(0x13b)]),this[_0x195753(0x18c)](_0x56e91f[_0x195753(0x13b)],_0x56e91f[_0x195753(0x177)]));}return _0x1d1110;}static[a54_0x35f4de(0x15e)](){const _0x1fb700=a54_0x35f4de;return this[_0x1fb700(0x134)];}static[a54_0x35f4de(0x184)](_0x853cc9,_0x2db2d4){const _0x267855=a54_0x35f4de,_0x17cbc={};_0x17cbc[_0x267855(0x130)]=function(_0x3d0497,_0x99d081){return _0x3d0497===_0x99d081;},_0x17cbc[_0x267855(0x178)]=_0x267855(0x150);const _0x4dcd5a=_0x17cbc;if(_0x4dcd5a[_0x267855(0x130)](typeof _0x2db2d4,_0x4dcd5a[_0x267855(0x178)]))try{logger[_0x267855(0x167)]('[ClientTroubleShootingService]\x20'+_0x853cc9+'\x20'+JSON[_0x267855(0x18f)](_0x2db2d4));}catch(_0x3288db){logger['error']('[ClientTroubleShootingService]\x20'+_0x853cc9+'\x20'+_0x2db2d4);}else logger[_0x267855(0x167)](_0x267855(0x183)+_0x853cc9+'\x20'+_0x2db2d4);}static async[a54_0x35f4de(0x148)](_0x20a701){const _0x4ef510=a54_0x35f4de,_0x50c49d={};_0x50c49d['MoxJO']=_0x4ef510(0x131),_0x50c49d[_0x4ef510(0x15d)]=function(_0x121bc0,_0x6a3d6a){return _0x121bc0===_0x6a3d6a;},_0x50c49d['PjklF']=_0x4ef510(0x13e),_0x50c49d[_0x4ef510(0x158)]=_0x4ef510(0x160);const _0x30be15=_0x50c49d,_0x185d24=await this[_0x4ef510(0x170)](_0x30be15[_0x4ef510(0x135)]);if(_0x30be15[_0x4ef510(0x15d)](Object['keys'](_0x185d24)['length'],0x0)){this[_0x4ef510(0x184)](_0x30be15[_0x4ef510(0x16a)],_0x185d24);return;}this[_0x4ef510(0x18c)](_0x185d24[_0x4ef510(0x13b)],_0x185d24[_0x4ef510(0x177)]['replace'](_0x30be15[_0x4ef510(0x158)],_0x20a701));}static async['reportSessionLinkingIssue'](){const _0x1bb118=a54_0x35f4de,_0x18e2a8={};_0x18e2a8[_0x1bb118(0x14d)]=_0x1bb118(0x163),_0x18e2a8[_0x1bb118(0x16b)]=function(_0x27026a,_0x52adb6){return _0x27026a===_0x52adb6;},_0x18e2a8['EKaDz']=_0x1bb118(0x13c);const _0x5bfa98=_0x18e2a8,_0x475928=await this[_0x1bb118(0x170)](_0x5bfa98[_0x1bb118(0x14d)]);if(_0x5bfa98[_0x1bb118(0x16b)](Object[_0x1bb118(0x155)](_0x475928)['length'],0x0)){this[_0x1bb118(0x184)](_0x5bfa98[_0x1bb118(0x156)],_0x475928);return;}this[_0x1bb118(0x18c)](_0x475928[_0x1bb118(0x13b)],_0x475928['errorMessage']);}static async[a54_0x35f4de(0x141)](){const _0x3f1faf=a54_0x35f4de,_0x380f93={};_0x380f93[_0x3f1faf(0x164)]='browserstack\x20cloud\x20not\x20reachable',_0x380f93[_0x3f1faf(0x13f)]=function(_0x42e822,_0x420420){return _0x42e822===_0x420420;},_0x380f93['Jlcvm']='Connectivity\x20Issue\x20details\x20not\x20found';const _0x13e6b5=_0x380f93,_0x545dea=await this[_0x3f1faf(0x170)](_0x13e6b5[_0x3f1faf(0x164)]);if(_0x13e6b5['OaGOf'](Object['keys'](_0x545dea)[_0x3f1faf(0x133)],0x0)){this[_0x3f1faf(0x184)](_0x13e6b5[_0x3f1faf(0x136)],_0x545dea);return;}this[_0x3f1faf(0x18c)](_0x545dea['errorCode'],_0x545dea['errorMessage']);}static async['reportSSLCertIssue'](){const _0x2ba3eb=a54_0x35f4de,_0x2e0f0d={};_0x2e0f0d['DmZXy']=_0x2ba3eb(0x154),_0x2e0f0d[_0x2ba3eb(0x142)]=function(_0x222610,_0x56261b){return _0x222610===_0x56261b;},_0x2e0f0d[_0x2ba3eb(0x17c)]='SSL\x20Certificate\x20Issue\x20details\x20not\x20found';const _0x30f68a=_0x2e0f0d,_0x3a07c1=await this[_0x2ba3eb(0x170)](_0x30f68a[_0x2ba3eb(0x174)]);if(_0x30f68a[_0x2ba3eb(0x142)](Object[_0x2ba3eb(0x155)](_0x3a07c1)[_0x2ba3eb(0x133)],0x0)){this[_0x2ba3eb(0x184)](_0x30f68a['WKIqm'],_0x3a07c1);return;}this['logSituation'](_0x3a07c1[_0x2ba3eb(0x13b)],_0x3a07c1['errorMessage']);}static[a54_0x35f4de(0x162)](){const _0x4a04e5=a54_0x35f4de,_0x397a71={};_0x397a71[_0x4a04e5(0x185)]=_0x4a04e5(0x153),_0x397a71[_0x4a04e5(0x132)]=function(_0x5cc21a,_0x4a45f0){return _0x5cc21a===_0x4a45f0;},_0x397a71[_0x4a04e5(0x175)]='.browserstack\x20Folder\x20Not\x20Accessible\x20details\x20not\x20found';const _0x528149=_0x397a71,_0x5bfd3a=constants['CLIENT_TROUBLESHOOTING_HASH'][_0x528149[_0x4a04e5(0x185)]];if(_0x528149[_0x4a04e5(0x132)](Object[_0x4a04e5(0x155)](_0x5bfd3a)[_0x4a04e5(0x133)],0x0)){this[_0x4a04e5(0x184)](_0x528149[_0x4a04e5(0x175)],_0x5bfd3a);return;}this['errorCodesOccurredWhenCLINotRunning'][_0x4a04e5(0x16f)](_0x5bfd3a[_0x4a04e5(0x13b)]),this[_0x4a04e5(0x18c)](_0x5bfd3a['errorCode'],_0x5bfd3a[_0x4a04e5(0x177)]);}static async['reportConflictingEnvVarIssue'](_0x28adf6){const _0x3263b9=a54_0x35f4de,_0x30c229={};_0x30c229[_0x3263b9(0x161)]=_0x3263b9(0x16d),_0x30c229[_0x3263b9(0x189)]=function(_0x3f928e,_0x516d59){return _0x3f928e===_0x516d59;},_0x30c229[_0x3263b9(0x12b)]=_0x3263b9(0x15b),_0x30c229[_0x3263b9(0x181)]=_0x3263b9(0x17d);const _0x113718=_0x30c229,_0x332aba=await this[_0x3263b9(0x170)](_0x113718[_0x3263b9(0x161)]);if(_0x113718[_0x3263b9(0x189)](Object[_0x3263b9(0x155)](_0x332aba)[_0x3263b9(0x133)],0x0)){this[_0x3263b9(0x184)](_0x113718[_0x3263b9(0x12b)],_0x332aba);return;}const _0x400f15=_0x332aba[_0x3263b9(0x177)][_0x3263b9(0x12e)](_0x113718[_0x3263b9(0x181)],_0x28adf6);this[_0x3263b9(0x18c)](_0x332aba[_0x3263b9(0x13b)],_0x400f15);}static async[a54_0x35f4de(0x13d)](){const _0x5b7a60=a54_0x35f4de,_0x170f12={};_0x170f12[_0x5b7a60(0x16e)]=function(_0x41c32c,_0x12c88e){return _0x41c32c>_0x12c88e;},_0x170f12[_0x5b7a60(0x17b)]=_0x5b7a60(0x172),_0x170f12[_0x5b7a60(0x14b)]=_0x5b7a60(0x140);const _0x5d8fa9=_0x170f12,_0x46e4cb=await this[_0x5b7a60(0x18b)](),_0xf06e5f=this[_0x5b7a60(0x182)](_0x46e4cb),_0x425094=Array[_0x5b7a60(0x16c)](_0x46e4cb[_0x5b7a60(0x187)])?_0x46e4cb[_0x5b7a60(0x187)]:[],_0x550975=_0x5d8fa9[_0x5b7a60(0x16e)](this[_0x5b7a60(0x18e)]['size'],0x0)?Array[_0x5b7a60(0x159)](this[_0x5b7a60(0x18e)]):[],_0x4109a2=new Set([..._0x425094,..._0xf06e5f,..._0x550975]),_0x5b5e85=Array['from'](_0x4109a2);if(_0x5d8fa9[_0x5b7a60(0x16e)](_0x5b5e85[_0x5b7a60(0x133)],0x0)){const _0x3d5366=_0x46e4cb['finalErrorMessage']['replace'](_0x5d8fa9[_0x5b7a60(0x17b)],_0x5b5e85[_0x5b7a60(0x157)](',\x20'))[_0x5b7a60(0x12e)](_0x5d8fa9[_0x5b7a60(0x14b)],_0x46e4cb[_0x5b7a60(0x12d)]);logger[_0x5b7a60(0x15c)](_0x3d5366),this[_0x5b7a60(0x134)]=_0x5b5e85;}}}module[a54_0x35f4de(0x17f)]=ClientTroubleShootingService;