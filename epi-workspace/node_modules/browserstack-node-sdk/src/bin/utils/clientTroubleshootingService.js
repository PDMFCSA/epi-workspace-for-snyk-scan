const a54_0x389925=a54_0x1126;function a54_0x1126(_0x52292f,_0x40329b){const _0x38bfbe=a54_0x38bf();return a54_0x1126=function(_0x11269a,_0xc6733f){_0x11269a=_0x11269a-0x1a1;let _0x20266c=_0x38bfbe[_0x11269a];return _0x20266c;},a54_0x1126(_0x52292f,_0x40329b);}(function(_0x5bb676,_0x32442a){const _0x1780a9=a54_0x1126,_0x1299bd=_0x5bb676();while(!![]){try{const _0x4d94a=-parseInt(_0x1780a9(0x1ef))/0x1*(parseInt(_0x1780a9(0x1b5))/0x2)+parseInt(_0x1780a9(0x1a3))/0x3+parseInt(_0x1780a9(0x1ee))/0x4+parseInt(_0x1780a9(0x1d6))/0x5+parseInt(_0x1780a9(0x1b3))/0x6+-parseInt(_0x1780a9(0x1a7))/0x7*(-parseInt(_0x1780a9(0x1c0))/0x8)+-parseInt(_0x1780a9(0x1e5))/0x9;if(_0x4d94a===_0x32442a)break;else _0x1299bd['push'](_0x1299bd['shift']());}catch(_0x1ecb72){_0x1299bd['push'](_0x1299bd['shift']());}}}(a54_0x38bf,0xccb45));const logger=require(a54_0x389925(0x1cf))['winstonLogger'],BrowserstackCLI=require(a54_0x389925(0x1c5)),GrpcClient=require(a54_0x389925(0x1aa)),constants=require('./constants');function a54_0x38bf(){const _0xa7a460=['SSL\x20Certificate\x20Issue\x20details\x20not\x20found','QjwIq','getAggregatedErrorCodes','GPtIL','MzcSW','vUBsm','object','1718151pKFCPV','getFinalErrorMessage','getDocumentationLink','reportSessionLinkingIssue','4897340JgObEk','fXdWF','[ClientTroubleShootingService]\x20','../v2/grpcClient','error','isRunning','mDzMT','udcCp','sSLbc','fFPbF','.browserstack\x20Folder\x20Not\x20Accessible\x20details\x20not\x20found','YWwHs','1359804HUXciQ','Process\x20Interruption\x20details\x20not\x20found:','1402vnLLNL','join','.browserstack\x20folder\x20not\x20accessible','reportProcessInterruptionSituation','mMLQa','LvGkf','CHnfx','AcSHr','checkForErrorsOccuredInCLI','getErrorCodes','TDXTm','8zjqBDK','nXiCt','length','getErrorMessage','base64','../v2/browserstackCLI','Error\x20in\x20getting\x20aggregated\x20error\x20codes:','{CLIENT_TROUBLESHOOTING_DOCUMENTATION}','keys','getAggregatedClientTroubleshootingErrors','mXbcR','browserstack\x20cloud\x20not\x20reachable','ptIua','conflicting\x20env\x20var\x20detected','getErrorCode','../../helpers/logger','parse','CLIENT_TROUBLESHOOTING_HASH','Error\x20in\x20getting\x20error\x20details\x20for\x20','errorCodes','jsAXR','PoECS','809570hFlPDA','warn','getSuccess','errorCodesOccurredWhenCLINotRunning','push','reportClientTroubleshootingError','iktqB','size','SwAli','ffYYC','Ddsmh','finalErrorMessage','Connectivity\x20Issue\x20details\x20not\x20found','replace','getErrorDetails','251343ZqcbJS','getInstance','cTABk','from','ssl\x20cert\x20issue','cachedErrorCodes','reportConnectivityIssue','qaRJX','errorCodesOccurredInCLI','1473880SOUWQQ','1659MQTCVT','tFrCb','KvxjR','logError','errorCode','logSituation','Conflicting\x20Env\x20Var\x20details\x20not\x20found','NcKUH','ZcpST','getErrorCodesOccurredInCli','errorMessage','documentationLink'];a54_0x38bf=function(){return _0xa7a460;};return a54_0x38bf();}class ClientTroubleShootingService{static [a54_0x389925(0x1ea)]=null;static [a54_0x389925(0x1d9)]=new Set();static async[a54_0x389925(0x1e4)](_0x5e56bb){const _0x48127e=a54_0x389925,_0x20c059={};_0x20c059[_0x48127e(0x1e0)]=function(_0x393542,_0x22bdb4){return _0x393542!==_0x22bdb4;};const _0x2054f9=_0x20c059;try{if(BrowserstackCLI[_0x48127e(0x1e6)]()[_0x48127e(0x1ac)]()){const _0x297f9f=await GrpcClient[_0x48127e(0x1e6)]()[_0x48127e(0x1db)](_0x5e56bb);if(_0x2054f9['Ddsmh'](_0x297f9f,null)&&_0x297f9f[_0x48127e(0x1d8)]())return{'errorCode':_0x297f9f[_0x48127e(0x1ce)](),'errorMessage':_0x297f9f[_0x48127e(0x1c3)]()};return{};}}catch(_0xe925a){return this[_0x48127e(0x1f2)](_0x48127e(0x1d2)+_0x5e56bb+':',_0xe925a),{};}}static async['getAggregatedErrorCodes'](){const _0x521915=a54_0x389925,_0x33ef7f={};_0x33ef7f[_0x521915(0x1fc)]=function(_0x1b4c0f,_0x3f3fa0){return _0x1b4c0f!==_0x3f3fa0;},_0x33ef7f['LvGkf']=_0x521915(0x1c4),_0x33ef7f[_0x521915(0x1bc)]=_0x521915(0x1c6);const _0x351bed=_0x33ef7f;try{if(BrowserstackCLI[_0x521915(0x1e6)]()[_0x521915(0x1ac)]()){const _0x28bdd0=await GrpcClient[_0x521915(0x1e6)]()[_0x521915(0x1c9)]();if(_0x351bed[_0x521915(0x1fc)](_0x28bdd0,null)&&_0x28bdd0[_0x521915(0x1d8)]()){const _0x290111=Buffer['from'](_0x28bdd0[_0x521915(0x1be)](),_0x351bed[_0x521915(0x1ba)])['toString'](),_0x40b7fb=_0x290111?JSON[_0x521915(0x1d0)](_0x290111):[],_0x528817=_0x28bdd0[_0x521915(0x1a5)](),_0x33a8a3=_0x28bdd0[_0x521915(0x1a4)](),_0x433059=Buffer[_0x521915(0x1e8)](_0x28bdd0[_0x521915(0x1f8)](),_0x351bed[_0x521915(0x1ba)])['toString'](),_0x3a8b8a=_0x433059?JSON['parse'](_0x433059):[],_0x1b122f={};return _0x1b122f[_0x521915(0x1d3)]=_0x40b7fb,_0x1b122f['documentationLink']=_0x528817,_0x1b122f[_0x521915(0x1e1)]=_0x33a8a3,_0x1b122f['errorCodesOccurredInCLI']=_0x3a8b8a,_0x1b122f;}const _0x3b90b9={};return _0x3b90b9['errorCodes']=[],_0x3b90b9[_0x521915(0x1fa)]='',_0x3b90b9['finalErrorMessage']='',_0x3b90b9[_0x521915(0x1ed)]=[],_0x3b90b9;}const _0x1accf8={};return _0x1accf8['errorCodes']=[],_0x1accf8['documentationLink']='',_0x1accf8[_0x521915(0x1e1)]='',_0x1accf8[_0x521915(0x1ed)]=[],_0x1accf8;}catch(_0x3a9a19){this[_0x521915(0x1f2)](_0x351bed[_0x521915(0x1bc)],_0x3a9a19);const _0xe41f63={};return _0xe41f63[_0x521915(0x1d3)]=[],_0xe41f63[_0x521915(0x1fa)]='',_0xe41f63['finalErrorMessage']='',_0xe41f63[_0x521915(0x1ed)]=[],_0xe41f63;}}static[a54_0x389925(0x1f4)](_0x513481,_0x5d3b13){const _0x1524d2=a54_0x389925;logger[_0x1524d2(0x1d7)](_0x513481+':\x20'+_0x5d3b13);}static[a54_0x389925(0x1bd)](_0x117aeb){const _0x1568a9=a54_0x389925,_0x2ccde0={};_0x2ccde0[_0x1568a9(0x1b2)]=function(_0x2659f5,_0x275fc0){return _0x2659f5!=_0x275fc0;},_0x2ccde0['TDXTm']=function(_0x42c93a,_0x1a393b){return _0x42c93a>_0x1a393b;},_0x2ccde0[_0x1568a9(0x1fe)]=function(_0x31c78b,_0x3c8ffd){return _0x31c78b!=_0x3c8ffd;},_0x2ccde0[_0x1568a9(0x1b0)]=function(_0x76567a,_0x2a0348){return _0x76567a!=_0x2a0348;};const _0xc5d7d0=_0x2ccde0,_0x13766f=[];if(_0xc5d7d0['YWwHs'](_0x117aeb,null)&&_0xc5d7d0[_0x1568a9(0x1b2)](_0x117aeb[_0x1568a9(0x1ed)],null)&&_0xc5d7d0[_0x1568a9(0x1bf)](_0x117aeb[_0x1568a9(0x1ed)][_0x1568a9(0x1c2)],0x0))for(const _0x1d0451 of _0x117aeb['errorCodesOccurredInCLI']){_0xc5d7d0[_0x1568a9(0x1fe)](_0x1d0451[_0x1568a9(0x1f3)],null)&&_0xc5d7d0[_0x1568a9(0x1b0)](_0x1d0451[_0x1568a9(0x1f9)],null)&&(_0x13766f[_0x1568a9(0x1da)](_0x1d0451[_0x1568a9(0x1f3)]),this[_0x1568a9(0x1f4)](_0x1d0451[_0x1568a9(0x1f3)],_0x1d0451[_0x1568a9(0x1f9)]));}return _0x13766f;}static['getCachedErrorCodes'](){return this['cachedErrorCodes'];}static[a54_0x389925(0x1f2)](_0x2fc27d,_0x15a36f){const _0x8a87ba=a54_0x389925,_0x468775={};_0x468775[_0x8a87ba(0x1f7)]=function(_0x39af47,_0x2b502d){return _0x39af47===_0x2b502d;},_0x468775[_0x8a87ba(0x1f6)]=_0x8a87ba(0x1a2);const _0xba91ad=_0x468775;if(_0xba91ad[_0x8a87ba(0x1f7)](typeof _0x15a36f,_0xba91ad[_0x8a87ba(0x1f6)]))try{logger[_0x8a87ba(0x1ab)](_0x8a87ba(0x1a9)+_0x2fc27d+'\x20'+JSON['stringify'](_0x15a36f));}catch(_0x3859c7){logger[_0x8a87ba(0x1ab)]('[ClientTroubleShootingService]\x20'+_0x2fc27d+'\x20'+_0x15a36f);}else logger[_0x8a87ba(0x1ab)](_0x8a87ba(0x1a9)+_0x2fc27d+'\x20'+_0x15a36f);}static async[a54_0x389925(0x1b8)](_0x255e1e){const _0x17e7d3=a54_0x389925,_0x518eda={};_0x518eda[_0x17e7d3(0x1ff)]='Process\x20Interruption',_0x518eda[_0x17e7d3(0x1df)]=function(_0x176f1b,_0x4666d6){return _0x176f1b===_0x4666d6;},_0x518eda['kufhV']=_0x17e7d3(0x1b4),_0x518eda[_0x17e7d3(0x1f1)]='{SIGNAL}';const _0x2c2f23=_0x518eda,_0x355fd2=await this[_0x17e7d3(0x1e4)](_0x2c2f23[_0x17e7d3(0x1ff)]);if(_0x2c2f23[_0x17e7d3(0x1df)](Object[_0x17e7d3(0x1c8)](_0x355fd2)[_0x17e7d3(0x1c2)],0x0)){this[_0x17e7d3(0x1f2)](_0x2c2f23['kufhV'],_0x355fd2);return;}this[_0x17e7d3(0x1f4)](_0x355fd2['errorCode'],_0x355fd2['errorMessage']['replace'](_0x2c2f23['KvxjR'],_0x255e1e));}static async[a54_0x389925(0x1a6)](){const _0x3cc79b=a54_0x389925,_0x40d7dd={};_0x40d7dd['rIYoh']='Session\x20Linking\x20Issue',_0x40d7dd[_0x3cc79b(0x1ec)]=function(_0x441219,_0x2fde03){return _0x441219===_0x2fde03;},_0x40d7dd[_0x3cc79b(0x1af)]='Session\x20Linking\x20Issue\x20details\x20not\x20found';const _0x1ddf46=_0x40d7dd,_0x3cf7c5=await this['getErrorDetails'](_0x1ddf46['rIYoh']);if(_0x1ddf46['qaRJX'](Object['keys'](_0x3cf7c5)['length'],0x0)){this[_0x3cc79b(0x1f2)](_0x1ddf46[_0x3cc79b(0x1af)],_0x3cf7c5);return;}this[_0x3cc79b(0x1f4)](_0x3cf7c5[_0x3cc79b(0x1f3)],_0x3cf7c5[_0x3cc79b(0x1f9)]);}static async[a54_0x389925(0x1eb)](){const _0x81b99c=a54_0x389925,_0x489d02={};_0x489d02[_0x81b99c(0x1ca)]=_0x81b99c(0x1cb),_0x489d02[_0x81b99c(0x1ad)]=function(_0x373c6c,_0x53bb27){return _0x373c6c===_0x53bb27;},_0x489d02[_0x81b99c(0x1d4)]=_0x81b99c(0x1e2);const _0x435f25=_0x489d02,_0x3a92aa=await this[_0x81b99c(0x1e4)](_0x435f25['mXbcR']);if(_0x435f25[_0x81b99c(0x1ad)](Object[_0x81b99c(0x1c8)](_0x3a92aa)[_0x81b99c(0x1c2)],0x0)){this[_0x81b99c(0x1f2)](_0x435f25['jsAXR'],_0x3a92aa);return;}this['logSituation'](_0x3a92aa[_0x81b99c(0x1f3)],_0x3a92aa[_0x81b99c(0x1f9)]);}static async['reportSSLCertIssue'](){const _0x4385be=a54_0x389925,_0x282ede={};_0x282ede[_0x4385be(0x1bb)]=_0x4385be(0x1e9),_0x282ede['qsfbD']=function(_0xf025af,_0x4acaf2){return _0xf025af===_0x4acaf2;},_0x282ede[_0x4385be(0x1f0)]=_0x4385be(0x1fb);const _0x3150c6=_0x282ede,_0x57aa78=await this[_0x4385be(0x1e4)](_0x3150c6[_0x4385be(0x1bb)]);if(_0x3150c6['qsfbD'](Object['keys'](_0x57aa78)['length'],0x0)){this[_0x4385be(0x1f2)](_0x3150c6[_0x4385be(0x1f0)],_0x57aa78);return;}this['logSituation'](_0x57aa78[_0x4385be(0x1f3)],_0x57aa78['errorMessage']);}static['reportDotBrowserStackFolderNotAccessibleIssue'](){const _0xd6c943=a54_0x389925,_0x58f532={};_0x58f532[_0xd6c943(0x1de)]=_0xd6c943(0x1b7),_0x58f532[_0xd6c943(0x1b9)]=function(_0x4cf6d6,_0x2bd34a){return _0x4cf6d6===_0x2bd34a;},_0x58f532[_0xd6c943(0x1ae)]=_0xd6c943(0x1b1);const _0x1e0465=_0x58f532,_0x1d54e6=constants[_0xd6c943(0x1d1)][_0x1e0465['SwAli']];if(_0x1e0465[_0xd6c943(0x1b9)](Object[_0xd6c943(0x1c8)](_0x1d54e6)[_0xd6c943(0x1c2)],0x0)){this['logError'](_0x1e0465[_0xd6c943(0x1ae)],_0x1d54e6);return;}this[_0xd6c943(0x1d9)]['add'](_0x1d54e6[_0xd6c943(0x1f3)]),this[_0xd6c943(0x1f4)](_0x1d54e6['errorCode'],_0x1d54e6[_0xd6c943(0x1f9)]);}static async['reportConflictingEnvVarIssue'](_0x44e17d){const _0x25a830=a54_0x389925,_0x2c7165={};_0x2c7165['nXiCt']=_0x25a830(0x1cd),_0x2c7165[_0x25a830(0x1e7)]=function(_0x5984bd,_0xc1246d){return _0x5984bd===_0xc1246d;},_0x2c7165[_0x25a830(0x1a8)]=_0x25a830(0x1f5),_0x2c7165[_0x25a830(0x1cc)]='{ENV_VAR}';const _0x24112f=_0x2c7165,_0x4d9c9c=await this[_0x25a830(0x1e4)](_0x24112f[_0x25a830(0x1c1)]);if(_0x24112f[_0x25a830(0x1e7)](Object[_0x25a830(0x1c8)](_0x4d9c9c)[_0x25a830(0x1c2)],0x0)){this['logError'](_0x24112f['fXdWF'],_0x4d9c9c);return;}const _0x4727b4=_0x4d9c9c[_0x25a830(0x1f9)]['replace'](_0x24112f[_0x25a830(0x1cc)],_0x44e17d);this['logSituation'](_0x4d9c9c[_0x25a830(0x1f3)],_0x4727b4);}static async['reportFinalDetectionState'](){const _0x44b73b=a54_0x389925,_0x1290a1={};_0x1290a1['vUBsm']=function(_0x1399d2,_0x2c8b94){return _0x1399d2>_0x2c8b94;},_0x1290a1[_0x44b73b(0x1d5)]='{ERROR_CODES}',_0x1290a1['iktqB']=_0x44b73b(0x1c7);const _0x2cbd19=_0x1290a1,_0x5c7bb3=await this[_0x44b73b(0x1fd)](),_0x3dfe60=this[_0x44b73b(0x1bd)](_0x5c7bb3),_0x1106bd=Array['isArray'](_0x5c7bb3['errorCodes'])?_0x5c7bb3[_0x44b73b(0x1d3)]:[],_0x704314=_0x2cbd19[_0x44b73b(0x1a1)](this['errorCodesOccurredWhenCLINotRunning'][_0x44b73b(0x1dd)],0x0)?Array[_0x44b73b(0x1e8)](this['errorCodesOccurredWhenCLINotRunning']):[],_0x12438d=new Set([..._0x1106bd,..._0x3dfe60,..._0x704314]),_0x5576ca=Array[_0x44b73b(0x1e8)](_0x12438d);if(_0x2cbd19['vUBsm'](_0x5576ca[_0x44b73b(0x1c2)],0x0)){const _0x167ae7=_0x5c7bb3[_0x44b73b(0x1e1)][_0x44b73b(0x1e3)](_0x2cbd19[_0x44b73b(0x1d5)],_0x5576ca[_0x44b73b(0x1b6)](',\x20'))[_0x44b73b(0x1e3)](_0x2cbd19[_0x44b73b(0x1dc)],_0x5c7bb3[_0x44b73b(0x1fa)]);logger[_0x44b73b(0x1d7)](_0x167ae7),this[_0x44b73b(0x1ea)]=_0x5576ca;}}}module['exports']=ClientTroubleShootingService;