const a60_0x532f67=a60_0x369f;(function(_0x3accff,_0x4e0e94){const _0x43bd05=a60_0x369f,_0x10ef28=_0x3accff();while(!![]){try{const _0x159b26=parseInt(_0x43bd05(0x171))/0x1*(parseInt(_0x43bd05(0x110))/0x2)+-parseInt(_0x43bd05(0x18d))/0x3*(-parseInt(_0x43bd05(0x11a))/0x4)+parseInt(_0x43bd05(0x160))/0x5*(-parseInt(_0x43bd05(0x141))/0x6)+-parseInt(_0x43bd05(0x107))/0x7*(parseInt(_0x43bd05(0x16c))/0x8)+parseInt(_0x43bd05(0x132))/0x9+-parseInt(_0x43bd05(0x12b))/0xa+-parseInt(_0x43bd05(0x1ae))/0xb*(parseInt(_0x43bd05(0xee))/0xc);if(_0x159b26===_0x4e0e94)break;else _0x10ef28['push'](_0x10ef28['shift']());}catch(_0x4f7974){_0x10ef28['push'](_0x10ef28['shift']());}}}(a60_0x5b1c,0x506ee));const path=require('path'),url=require(a60_0x532f67(0x17e)),util=require(a60_0x532f67(0xda)),{nestedKeyValue,isFalse,importFileFromPWCore,requireModule}=require(a60_0x532f67(0x184)),{o11yErrorHandler}=require('../../helpers/test-observability/error-handler'),{debug,getPlatformDetails}=require(a60_0x532f67(0xe5)),logger=require(a60_0x532f67(0x151))[a60_0x532f67(0x174)],constants=require(a60_0x532f67(0x124)),AutomationFramework=require('../v2/framework/automationFramework'),BrowserstackCLI=require(a60_0x532f67(0x152)),AutomationFrameworkState=require('../v2/state/automationFrameworkState.js'),HookState=require(a60_0x532f67(0x1aa)),{platform}=require('os'),getBrowserNameFromChannel=_0x422f07=>{const _0x1d26b6=a60_0x532f67,_0xc76007={};_0xc76007[_0x1d26b6(0x19a)]=_0x1d26b6(0xfc),_0xc76007[_0x1d26b6(0x116)]=_0x1d26b6(0x16f),_0xc76007[_0x1d26b6(0xfd)]='firefox',_0xc76007[_0x1d26b6(0x155)]='safari';const _0x227de7=_0xc76007;if(_0x422f07[_0x1d26b6(0x150)](_0x227de7['aZIJE']))return _0x227de7[_0x1d26b6(0x19a)];if(_0x422f07[_0x1d26b6(0x150)](_0x227de7[_0x1d26b6(0x116)]))return _0x227de7[_0x1d26b6(0x116)];if(_0x422f07[_0x1d26b6(0x150)](_0x227de7['dvxyR']))return _0x227de7['dvxyR'];if(_0x422f07['includes'](_0x227de7[_0x1d26b6(0x155)]))return _0x227de7['GALXR'];},getBrowserFromWSEndpoint=_0x4929b9=>{const _0x845972=a60_0x532f67,_0x12e4d4={'OitVU':_0x845972(0x102),'eHDny':function(_0x40aca2,_0x1376f3){return _0x40aca2(_0x1376f3);},'tKlRs':function(_0x2a8c97,_0x4cee27){return _0x2a8c97(_0x4cee27);},'vQQCu':'edge','yVbmQ':'msedge','zHKmZ':_0x845972(0xe3),'CYNhP':_0x845972(0x14a),'fQMqa':_0x845972(0x157),'fVaik':_0x845972(0x176),'qSUCA':_0x845972(0xfc),'GOZxr':function(_0x4f66a9,_0x15ccbd){return _0x4f66a9(_0x15ccbd);}};try{const _0x3c0454=url[_0x845972(0x14c)](_0x4929b9),_0x4dd3fc=new URLSearchParams(_0x3c0454[_0x845972(0x136)]),_0x1134cc=Object[_0x845972(0x1a0)](_0x4dd3fc['entries']()),_0x4445ed=[_0x1134cc[_0x845972(0x165)],_0x1134cc[_0x845972(0xdb)],_0x1134cc[_0x845972(0x17c)],_0x1134cc[_0x845972(0x146)]];for(const _0x2d9972 of _0x4445ed){if(_0x2d9972)try{const _0x46ba42=JSON[_0x845972(0x14c)](_0x2d9972),_0x451c23=_0x46ba42[_0x845972(0x185)]||_0x46ba42['browser']||_0x46ba42[_0x12e4d4[_0x845972(0x144)]]?.[_0x845972(0x185)];if(_0x451c23)return _0x12e4d4[_0x845972(0x101)](debug,_0x845972(0xf8)+_0x451c23),_0x451c23['toLowerCase']();}catch(_0x51bdbb){_0x12e4d4[_0x845972(0x10f)](debug,'Failed\x20to\x20parse\x20caps\x20from\x20WebSocket:\x20'+_0x51bdbb['message']);}}if(_0x4929b9[_0x845972(0x150)](_0x12e4d4[_0x845972(0x17f)])||_0x4929b9['includes'](_0x12e4d4[_0x845972(0xe4)]))return _0x12e4d4[_0x845972(0x17f)];if(_0x4929b9[_0x845972(0x150)](_0x12e4d4[_0x845972(0xe7)])||_0x4929b9[_0x845972(0x150)](_0x12e4d4[_0x845972(0x191)]))return _0x12e4d4[_0x845972(0xe7)];if(_0x4929b9[_0x845972(0x150)](_0x12e4d4[_0x845972(0x17b)])||_0x4929b9[_0x845972(0x150)](_0x12e4d4[_0x845972(0x114)]))return _0x12e4d4['fQMqa'];return _0x12e4d4[_0x845972(0x16a)];}catch(_0x363f66){return _0x12e4d4[_0x845972(0x196)](debug,_0x845972(0x170)+_0x363f66[_0x845972(0x145)]()),_0x12e4d4[_0x845972(0x16a)];}},getCloudProviderFromWsEndpoint=_0x12c99d=>{const _0x41c5f7=a60_0x532f67,_0x1ded9a={};_0x1ded9a['leKKw']=_0x41c5f7(0x11b),_0x1ded9a['Pwead']='unknown_grid';const _0x39fc61=_0x1ded9a;if(_0x12c99d['includes'](constants[_0x41c5f7(0x117)])||_0x12c99d[_0x41c5f7(0x150)](constants[_0x41c5f7(0x167)]))return _0x39fc61[_0x41c5f7(0x175)];return _0x39fc61['Pwead'];},a60_0x30d654={};a60_0x30d654['cloudProvider']=undefined,a60_0x30d654['bsSessionId']=undefined,a60_0x30d654[a60_0x532f67(0x161)]=undefined,a60_0x30d654[a60_0x532f67(0x142)]=undefined,a60_0x30d654[a60_0x532f67(0x153)]=undefined,a60_0x30d654[a60_0x532f67(0x1ab)]=undefined,a60_0x30d654[a60_0x532f67(0xec)]=undefined,a60_0x30d654['capabilities']={};function a60_0x369f(_0x44a86d,_0x166567){const _0x5b1c22=a60_0x5b1c();return a60_0x369f=function(_0x369f51,_0x4bc152){_0x369f51=_0x369f51-0xd9;let _0x264f72=_0x5b1c22[_0x369f51];return _0x264f72;},a60_0x369f(_0x44a86d,_0x166567);}function a60_0x5b1c(){const _0x12317b=['turboscale','osVop','apply','CRConnection\x20already\x20patched','TWrPH','triggerPlaywrightDispatchEvent','../v2/state/hookState.js','platform_version','LUHaF','use','44tlqGSE','DMtAC','util','capabilities','capabilties','getAutomationFramework','join','accessibilityPlatform','connectOptions','ECEIn','Not\x20able\x20to\x20import\x20Connection\x20class\x20from\x20any\x20path','firefox','yVbmQ','../../helpers/test-observability/utils','ZmyMi','zHKmZ','Udwcx','env','JGKQI','tvyJy','product','TkgJe','1681980nmgUse','bsSessionId','Error\x20triggering\x20PLAYWRIGHT_DISPATCH\x20event:\x20','params','Error\x20in\x20applying\x20Connection\x20patch\x20','os_version','cloudProvider','lZFWI','getInstance','uExVH','Browser\x20found\x20in\x20WebSocket\x20caps:\x20','PcatU','Failed\x20to\x20parse\x20capabilities\x20from\x20WebSocket:\x20','NxAas','chrome','dvxyR','FVwNY','_bstackCRPatched','test','eHDny','bstack:options','DixFR','XYnzd','_name','BrowserStack\x20params\x20extracted\x20from\x20WebSocket\x20endpoint','7zENNEW','getDetails','PLAYWRIGHT_DISPATCH','kwvpl','assign','vRpFu','_onMessage','lib','tKlRs','2uipDrD','version','extractBrowserStackParams','BROWSERSTACK_TEST_OBSERVABILITY','fVaik','YhnTo','rNMOq','BSTACK_URL','Setting\x20session\x20id\x20received\x20from\x20browserstack\x20','client','25696xPWBKe','browserstack','string','bsParams','Session\x20details\x20setup\x20complete:\x20','EBNSb','Device\x20Model\x20is\x20not\x20available','eGRPw','currentSessionDetails','prototype','./constants','Invalid\x20constructor,\x20please\x20use\x20static\x20methods','KKrPP','project','Error\x20in\x20importing\x20connection\x20','Setting\x20platform\x20details\x20received\x20from\x20BS:\x20','EskiN','4656530aXKlnJ','mqAPO','__platformCaps','deviceModel','defineProperty','CCZuQ','amrlh','4879467laWlFp','LNtqD','isRunning','POST','query','_defaultConnectOptions','BrowserStack\x20params\x20extracted\x20from\x20capabilities:\x20browser=','hxtXq','NFIyZ','Connection\x20dispatch\x20already\x20patched','_browserType','exports','debug','zBsHa','toLowerCase','6KoZLPv','browser_version','WlLLQ','OitVU','toString','browserstack_capabilities','EurSs','platformDetails','itxOs','gecko','platformVersion','parse','_bstackDispatchPatched','Using\x20browser\x20name\x20from\x20browser\x20object:\x20','LzoNP','includes','../../helpers/logger','../v2/browserstackCLI','platform','Setting\x20platform\x20details\x20received\x20from\x20browserstack:\x20','GALXR','YjTCq','safari','patchCRConnection','hssiJ','hnFYm','platformName','patchConnection','patch','Error\x20in\x20importing\x20crConnection','Connection','20705XqmhYg','browser','BAbZt','osVersion','eWWnN','caps','model','BSTACK_ATS_URL','TJfbN','dispatch','qSUCA','sessionId','2727464MDbWGW','sessionError','channel','edge','Error\x20in\x20getting\x20browser\x20from\x20WebSocket\x20endpoint:\x20','657606mctxZM','KAQGK','ttsaL','winstonLogger','leKKw','webkit','yloMH','RrHCy','oaNeG','UXFUk','fQMqa','desiredCapabilities','format','url','vQQCu','message','browserVersion','chromium','trackEvent','../../helpers/helper','browserName','setupBrowserDetails','vzPXS','jAnWT','gTjUo','server','Browser\x20is\x20not\x20defined\x20or\x20not\x20available','Not\x20able\x20to\x20import\x20crConnection','234Wkbonr','aiVIk','wJEbg','wsEndpoint','CYNhP','EeIAD','CRConnection','Triggering\x20PLAYWRIGHT_DISPATCH\x20event','pyBCu','GOZxr','automate','Failed\x20to\x20import\x20connection\x20from\x20','instance','aZIJE','LyYUn','Error\x20in\x20getting\x20applying\x20CRConnection\x20patch\x20','mjbuL','SIfUA','bStackParams','fromEntries','hAzrl','sGyIv','local_grid'];a60_0x5b1c=function(){return _0x12317b;};return a60_0x5b1c();}class SharedPlaywrightSessionDetails{static [a60_0x532f67(0x122)]=a60_0x30d654;constructor(){const _0x10b344=a60_0x532f67,_0x15560b={};_0x15560b[_0x10b344(0x159)]=_0x10b344(0x125);const _0x5eadd2=_0x15560b;throw new Error(_0x5eadd2[_0x10b344(0x159)]);}static ['sessionError']=null;static[a60_0x532f67(0x186)](_0x38093b,_0x50f126,_0x496768=null){const _0x31d700=a60_0x532f67,_0xc44e3={'JGKQI':function(_0x5b1111,_0x304c6d){return _0x5b1111===_0x304c6d;},'NxAas':'function','mjbuL':_0x31d700(0x18b),'itxOs':function(_0x1bdbb4,_0x42954e){return _0x1bdbb4===_0x42954e;},'TorXb':_0x31d700(0x120),'FVwNY':_0x31d700(0x1a3),'jAnWT':function(_0x1677e7,_0x1bf21b,_0x2b2190){return _0x1677e7(_0x1bf21b,_0x2b2190);},'ZmyMi':_0x31d700(0x13c),'LyYUn':_0x31d700(0x137),'CCZuQ':function(_0x5f0ef6,_0x4d99ed,_0x52c066){return _0x5f0ef6(_0x4d99ed,_0x52c066);},'yloMH':_0x31d700(0x127),'DixFR':'use','NFIyZ':_0x31d700(0xe0),'EeIAD':function(_0xf3c6f5,_0x1a2588){return _0xf3c6f5(_0x1a2588);},'LNWfS':function(_0x3aaa81,_0x548c66){return _0x3aaa81===_0x548c66;},'RrHCy':_0x31d700(0x11b),'dTdQm':_0x31d700(0x1a4),'lZFWI':_0x31d700(0x197),'LNtqD':function(_0xd916fd,_0x21a3c2){return _0xd916fd(_0x21a3c2);},'wJEbg':_0x31d700(0x182),'tvyJy':function(_0x4ec7a0,_0x37d07d){return _0x4ec7a0+_0x37d07d;},'LUHaF':'playwright-','lEVim':function(_0x1d6ace){return _0x1d6ace();},'DMtAC':function(_0x1ff196,_0x1d085e,_0x2b806e){return _0x1ff196(_0x1d085e,_0x2b806e);},'TkgJe':_0x31d700(0x186)},_0x5930b8=this;return _0xc44e3[_0x31d700(0xd9)](o11yErrorHandler,async function _0x4c9d37(_0x57d59f,_0xdad4ed,_0x241eef=null){const _0x3b8e00=_0x31d700;let _0x5be85e=_0x57d59f[_0x3b8e00(0x105)],_0x20a326=null;_0x57d59f&&_0xc44e3[_0x3b8e00(0xea)](typeof _0x57d59f['version'],_0xc44e3['NxAas'])?_0x20a326=_0x57d59f[_0x3b8e00(0x111)]():logger[_0x3b8e00(0x13e)](_0xc44e3[_0x3b8e00(0x19d)]);let _0x4d3c3e=null;_0x57d59f&&_0xc44e3[_0x3b8e00(0x149)](typeof _0x57d59f[_0x3b8e00(0x166)],_0xc44e3[_0x3b8e00(0xfb)])?_0x4d3c3e=_0x57d59f[_0x3b8e00(0x166)]():logger[_0x3b8e00(0x13e)](_0xc44e3['TorXb']);let _0x5ee415=null,_0x76f932=null,_0x112f01=null,_0x106c7c=_0xc44e3[_0x3b8e00(0xfe)];if(_0x57d59f['_connection']['isRemote']()||global[_0x3b8e00(0xdf)]){let _0x19df48=null;_0xc44e3[_0x3b8e00(0x188)](nestedKeyValue,_0x57d59f,[_0xc44e3[_0x3b8e00(0xe6)],_0xc44e3[_0x3b8e00(0x19b)]])?_0x19df48=_0x57d59f[_0x3b8e00(0x13c)][_0x3b8e00(0x137)]:_0x19df48=_0xc44e3[_0x3b8e00(0x130)](nestedKeyValue,_0xdad4ed,[_0xc44e3[_0x3b8e00(0x177)],_0xc44e3[_0x3b8e00(0x103)],_0xc44e3[_0x3b8e00(0x13a)]]);const _0x1fbb93=_0x241eef||_0x19df48&&_0x19df48[_0x3b8e00(0x190)];if(_0x1fbb93){_0x106c7c=_0xc44e3[_0x3b8e00(0x192)](getCloudProviderFromWsEndpoint,_0x1fbb93);if(_0xc44e3['LNWfS'](_0x106c7c,_0xc44e3[_0x3b8e00(0x178)])){_0x112f01=constants['ATS_WSS_URL_REGEX'][_0x3b8e00(0x100)](_0x1fbb93)?_0xc44e3['dTdQm']:_0xc44e3[_0x3b8e00(0xf5)];const _0x42bcee=_0xc44e3[_0x3b8e00(0x133)](getBrowserFromWSEndpoint,_0x1fbb93);if(_0x42bcee&&(!_0x5be85e||_0xc44e3[_0x3b8e00(0xea)](_0x5be85e,_0xc44e3[_0x3b8e00(0x18f)])))_0x5be85e=_0x42bcee,logger[_0x3b8e00(0x13e)]('Browser\x20name\x20overridden\x20from\x20WebSocket\x20endpoint:\x20'+_0x5be85e);else _0x5be85e&&logger[_0x3b8e00(0x13e)](_0x3b8e00(0x14e)+_0x5be85e);_0x5ee415=_0x5930b8['currentSessionDetails']['platform'],_0x76f932=_0x5930b8['currentSessionDetails'][_0x3b8e00(0x1ab)];}}}else{_0xdad4ed&&_0xdad4ed['project']&&_0xdad4ed[_0x3b8e00(0x127)][_0x3b8e00(0x1ad)]&&_0xdad4ed[_0x3b8e00(0x127)][_0x3b8e00(0x1ad)][_0x3b8e00(0x16e)]?_0x5be85e=_0xc44e3[_0x3b8e00(0x133)](getBrowserNameFromChannel,_0xdad4ed[_0x3b8e00(0x127)][_0x3b8e00(0x1ad)]['channel']):_0x5be85e=_0xc44e3[_0x3b8e00(0xeb)](_0xc44e3[_0x3b8e00(0x1ac)],_0x5be85e[_0x3b8e00(0x140)]());const _0x554745=await _0xc44e3['lEVim'](getPlatformDetails);_0x5ee415=_0x554745['platformName'],_0x76f932=_0x554745['platformVersion'];}const _0x46cbce={};_0x46cbce['browser']=_0x5be85e,_0x46cbce['browser_version']=_0x20a326,_0x46cbce[_0x3b8e00(0xdb)]={},_0x46cbce['platform']=_0x5ee415,_0x46cbce[_0x3b8e00(0x1ab)]=_0x76f932,_0x46cbce['product']=_0x112f01;const _0x190129=_0x46cbce;_0x4d3c3e&&(_0x190129[_0x3b8e00(0xdb)][_0x3b8e00(0x12e)]=_0x4d3c3e);const _0x344456={};_0x344456['cloudProvider']=_0x106c7c,_0x5930b8[_0x3b8e00(0x122)]=Object[_0x3b8e00(0x10b)]({},_0x5930b8['currentSessionDetails'],_0x344456,_0x190129);const _0x5cf8e6={};_0x5cf8e6[_0x3b8e00(0x161)]=_0x5930b8[_0x3b8e00(0x122)][_0x3b8e00(0x161)],_0x5cf8e6[_0x3b8e00(0x181)]=_0x5930b8['currentSessionDetails'][_0x3b8e00(0x142)],_0x5cf8e6[_0x3b8e00(0x153)]=_0x5930b8['currentSessionDetails'][_0x3b8e00(0x153)],_0x5cf8e6['platformVersion']=_0x5930b8[_0x3b8e00(0x122)][_0x3b8e00(0x1ab)],_0x5cf8e6[_0x3b8e00(0xf4)]=_0x5930b8[_0x3b8e00(0x122)][_0x3b8e00(0xf4)],_0x5cf8e6[_0x3b8e00(0xec)]=_0x5930b8[_0x3b8e00(0x122)][_0x3b8e00(0xec)],logger['debug'](_0x3b8e00(0x11e)+JSON['stringify'](_0x5cf8e6));},_0xc44e3[_0x31d700(0xed)])(_0x38093b,_0x50f126,_0x496768);}static[a60_0x532f67(0x15d)](){const _0x5946a3=a60_0x532f67;this[_0x5946a3(0x15c)](),this[_0x5946a3(0x158)]();}static[a60_0x532f67(0x15c)](){const _0x3c949f=a60_0x532f67,_0x5d8773={'EskiN':function(_0x2c1ae1,_0x2dec68){return _0x2c1ae1(_0x2dec68);},'gTjUo':_0x3c949f(0x10e),'amrlh':_0x3c949f(0x119),'YjTCq':'connection.js','vRpFu':function(_0x3e3762,_0xaeba0f){return _0x3e3762(_0xaeba0f);},'zBsHa':function(_0x57b867,_0x238499){return _0x57b867(_0x238499);},'KKrPP':_0x3c949f(0xe2),'aiVIk':function(_0x1fc05a,_0x44d4d9){return _0x1fc05a(_0x44d4d9);},'oaNeG':function(_0x50ae97,_0x5b0c8e){return _0x50ae97!=_0x5b0c8e;},'EurSs':_0x3c949f(0x13b),'XYnzd':_0x3c949f(0x169),'kwvpl':'Successfully\x20patched\x20Connection.dispatch'},_0x2555b7=this;if(!this[_0x3c949f(0x15f)])try{const _0x4117ee=[path[_0x3c949f(0xde)](_0x5d8773[_0x3c949f(0x189)],_0x5d8773[_0x3c949f(0x131)],_0x5d8773[_0x3c949f(0x156)]),path[_0x3c949f(0xde)](_0x5d8773[_0x3c949f(0x189)],_0x5d8773[_0x3c949f(0x156)]),path[_0x3c949f(0xde)](_0x5d8773[_0x3c949f(0x131)],_0x5d8773[_0x3c949f(0x156)])];for(const _0x332b3c of _0x4117ee){try{const _0x2ee22e=_0x5d8773['vRpFu'](importFileFromPWCore,_0x332b3c);if(_0x2ee22e&&_0x2ee22e[_0x3c949f(0x15f)]){this[_0x3c949f(0x15f)]=_0x2ee22e[_0x3c949f(0x15f)],logger['debug']('Found\x20Connection\x20class\x20at:\x20'+_0x332b3c);break;}}catch(_0x59a1b5){_0x5d8773[_0x3c949f(0x12a)](debug,_0x3c949f(0x198)+_0x332b3c+':\x20'+_0x59a1b5['toString']());}}if(!this[_0x3c949f(0x15f)]){_0x5d8773[_0x3c949f(0x13f)](debug,_0x5d8773[_0x3c949f(0x126)]);return;}}catch(_0x42b6b2){_0x5d8773[_0x3c949f(0x18e)](debug,_0x3c949f(0x128)+_0x42b6b2[_0x3c949f(0x145)]());return;}const _0x3faeab=this['Connection'];try{if(_0x5d8773[_0x3c949f(0x179)](_0x3faeab,null)){const _0xe5c19=_0x3faeab[_0x3c949f(0x123)][_0x3c949f(0x169)];if(!_0x5d8773[_0x3c949f(0x13f)](isFalse,process[_0x3c949f(0xe9)][_0x3c949f(0x113)])){if(_0x3faeab[_0x3c949f(0x123)]['_bstackDispatchPatched']){logger[_0x3c949f(0x13e)](_0x5d8773[_0x3c949f(0x147)]);return;}Object[_0x3c949f(0x12f)](_0x3faeab[_0x3c949f(0x123)],_0x5d8773[_0x3c949f(0x104)],{'get':function(){const _0x112474={'SIfUA':function(_0x89a063,_0xb25ece){const _0x341562=a60_0x369f;return _0x5d8773[_0x341562(0x12a)](_0x89a063,_0xb25ece);},'eWWnN':function(_0x3495b0,_0x5a951e){const _0x146b7e=a60_0x369f;return _0x5d8773[_0x146b7e(0x12a)](_0x3495b0,_0x5a951e);}};return async function _0x190993(_0x26be53){const _0x2e7c78=a60_0x369f;if(BrowserstackCLI[_0x2e7c78(0xf6)]()[_0x2e7c78(0x134)]()){const _0x25c5aa={};_0x25c5aa[_0x2e7c78(0x180)]=_0x26be53,await BrowserstackCLI[_0x2e7c78(0xf6)]()['getAutomationFramework']()[_0x2e7c78(0x183)](AutomationFrameworkState[_0x2e7c78(0x109)],HookState['POST'],_0x25c5aa);}else{const _0xa70db0=_0x26be53&&_0x26be53[_0x2e7c78(0xf1)]&&_0x26be53[_0x2e7c78(0xf1)]['bsParams'];if(_0xa70db0){const _0x246e1a=_0xa70db0[_0x2e7c78(0x16b)],_0x39e372=_0xa70db0[_0x2e7c78(0x148)];_0x39e372&&(_0x112474[_0x2e7c78(0x19e)](debug,_0x2e7c78(0x129)+_0x39e372[_0x2e7c78(0x145)]()),_0x2555b7['currentSessionDetails']['platform']=_0x39e372[_0x2e7c78(0x15b)],_0x2555b7[_0x2e7c78(0x122)]['platform_version']=_0x39e372[_0x2e7c78(0x14b)]),_0x246e1a&&(_0x112474[_0x2e7c78(0x164)](debug,'Setting\x20session\x20id\x20received\x20from\x20BS\x20'+_0x246e1a),_0x2555b7['currentSessionDetails'][_0x2e7c78(0xef)]=_0x246e1a);}}return _0xe5c19['apply'](this,arguments);};}}),_0x3faeab[_0x3c949f(0x123)][_0x3c949f(0x14d)]=!![],logger[_0x3c949f(0x13e)](_0x5d8773[_0x3c949f(0x10a)]);}}}catch(_0x13790c){_0x5d8773[_0x3c949f(0x10c)](debug,_0x3c949f(0xf2)+_0x13790c),_0x2555b7['sessionError']=_0x13790c[_0x3c949f(0x145)]();}}static[a60_0x532f67(0x158)](){const _0x2cc9dc=a60_0x532f67,_0x1a596e={'TJfbN':function(_0x3f5bf7,_0x27818a){return _0x3f5bf7(_0x27818a);},'hxtXq':function(_0x1e098b,_0x563665){return _0x1e098b(_0x563665);},'sGyIv':_0x2cc9dc(0x10e),'KAQGK':_0x2cc9dc(0x18a),'osVop':_0x2cc9dc(0x182),'hnFYm':'crConnection.js','mqAPO':function(_0x3ecc68,_0x31e573){return _0x3ecc68(_0x31e573);},'YhnTo':function(_0x3778eb,_0x250084){return _0x3778eb(_0x250084);},'Udwcx':_0x2cc9dc(0x18c),'LzoNP':_0x2cc9dc(0x15e),'PcatU':function(_0x5ba2c6,_0xb86381){return _0x5ba2c6!=_0xb86381;},'ttsaL':_0x2cc9dc(0x1a7),'pyBCu':_0x2cc9dc(0x10d),'oMKNZ':'Successfully\x20patched\x20CRConnection._onMessage'},_0x1bf3b9=this;let _0x25ba76=null;try{const _0x36b91f=path['join'](_0x1a596e[_0x2cc9dc(0x1a2)],_0x1a596e[_0x2cc9dc(0x172)],_0x1a596e[_0x2cc9dc(0x1a5)],_0x1a596e[_0x2cc9dc(0x15a)]),_0x213258=_0x1a596e[_0x2cc9dc(0x12c)](importFileFromPWCore,_0x36b91f);!_0x213258?_0x1a596e[_0x2cc9dc(0x115)](debug,_0x1a596e[_0x2cc9dc(0xe8)]):_0x25ba76=_0x213258[_0x2cc9dc(0x193)];}catch(_0x2a9ce4){_0x1a596e[_0x2cc9dc(0x115)](debug,_0x1a596e[_0x2cc9dc(0x14f)]);}try{if(_0x1a596e[_0x2cc9dc(0xf9)](_0x25ba76,null)){const _0x2f5a04=_0x25ba76[_0x2cc9dc(0x123)]['_onMessage'];if(_0x25ba76['prototype'][_0x2cc9dc(0xff)]){logger[_0x2cc9dc(0x13e)](_0x1a596e[_0x2cc9dc(0x173)]);return;}Object[_0x2cc9dc(0x12f)](_0x25ba76[_0x2cc9dc(0x123)],_0x1a596e[_0x2cc9dc(0x195)],{'get':function(){return async function _0x20e813(_0x408824){const _0x3372c3=a60_0x369f;try{if(BrowserstackCLI['getInstance']()[_0x3372c3(0x134)]()){const _0x5c453b={};_0x5c453b[_0x3372c3(0x180)]=_0x408824,await BrowserstackCLI[_0x3372c3(0xf6)]()[_0x3372c3(0xdd)]()[_0x3372c3(0x183)](AutomationFrameworkState[_0x3372c3(0x109)],HookState[_0x3372c3(0x135)],_0x5c453b),delete _0x408824['bStackParams'];}else{const _0x50534c=_0x408824[_0x3372c3(0x19f)];if(_0x50534c){delete _0x408824[_0x3372c3(0x19f)];const _0x41fbad=_0x50534c[_0x3372c3(0x16b)],_0x3d209d=_0x50534c[_0x3372c3(0x148)];_0x3d209d&&(_0x1a596e[_0x3372c3(0x168)](debug,_0x3372c3(0x154)+_0x3d209d[_0x3372c3(0x145)]()),_0x1bf3b9[_0x3372c3(0x122)][_0x3372c3(0x153)]=_0x3d209d['platformName'],_0x1bf3b9['currentSessionDetails'][_0x3372c3(0x1ab)]=_0x3d209d[_0x3372c3(0x14b)]),_0x41fbad&&(_0x1a596e[_0x3372c3(0x139)](debug,_0x3372c3(0x118)+_0x41fbad),_0x1bf3b9['currentSessionDetails'][_0x3372c3(0xef)]=_0x41fbad);}}}catch(_0x43eade){_0x1a596e[_0x3372c3(0x139)](debug,'Error\x20in\x20finding\x20platform\x20details\x20'+_0x43eade[_0x3372c3(0x145)]());}return _0x2f5a04[_0x3372c3(0x1a6)](this,arguments);};}}),_0x25ba76[_0x2cc9dc(0x123)][_0x2cc9dc(0xff)]=!![],logger[_0x2cc9dc(0x13e)](_0x1a596e['oMKNZ']);}}catch(_0xa670db){_0x1a596e['hxtXq'](debug,_0x2cc9dc(0x19c)+_0xa670db),_0x1bf3b9[_0x2cc9dc(0x16d)]=_0xa670db[_0x2cc9dc(0x145)]();}}static[a60_0x532f67(0x112)](_0x203c50,_0x1627c0){const _0x57d0d3=a60_0x532f67,_0x2f46ff={'EBNSb':'bstack:options','WuZSc':function(_0x4b9eb6,_0x4f7050){return _0x4b9eb6||_0x4f7050;},'uExVH':function(_0x364afa,_0x3b0e3d){return _0x364afa||_0x3b0e3d;},'OhnxO':function(_0x4b372f,_0x15c16f){return _0x4b372f===_0x15c16f;},'ECEIn':_0x57d0d3(0x11c),'vzPXS':_0x57d0d3(0x106),'hAzrl':function(_0x4a18c9,_0x5d42ed){return _0x4a18c9(_0x5d42ed);},'BAbZt':function(_0x5921a6,_0x37e8e1){return _0x5921a6(_0x37e8e1);},'Jrcbk':function(_0x2bf3f3,_0x5e72e3){return _0x2bf3f3(_0x5e72e3);}};let _0x23e91d=null,_0x330eda=null;try{const _0x2b2945=[_0x1627c0,global[_0x57d0d3(0x12d)],global[_0x57d0d3(0xdc)]];for(const _0x31f6ef of _0x2b2945){if(_0x31f6ef&&(!_0x330eda||!_0x330eda['sessionId'])){const _0x5582bb=_0x31f6ef['sessionId']||_0x31f6ef[_0x2f46ff[_0x57d0d3(0x11f)]]?.['sessionId'],_0x1234da=_0x31f6ef['browserName']||_0x31f6ef[_0x57d0d3(0x161)]||_0x31f6ef[_0x2f46ff[_0x57d0d3(0x11f)]]?.[_0x57d0d3(0x185)],_0x35ed84=_0x31f6ef['browserVersion']||_0x31f6ef['browser_version']||_0x31f6ef[_0x2f46ff[_0x57d0d3(0x11f)]]?.['browserVersion'],_0x175863=_0x31f6ef['os']||_0x31f6ef['platform']||_0x31f6ef[_0x2f46ff[_0x57d0d3(0x11f)]]?.['os'],_0x333de6=_0x31f6ef['osVersion']||_0x31f6ef['os_version']||_0x31f6ef[_0x2f46ff[_0x57d0d3(0x11f)]]?.['osVersion'];if(_0x2f46ff['WuZSc'](_0x5582bb,_0x1234da)||_0x175863){const _0x46a0a6={};_0x46a0a6['browserName']=_0x1234da,_0x46a0a6[_0x57d0d3(0x181)]=_0x35ed84,_0x46a0a6['os']=_0x175863,_0x46a0a6[_0x57d0d3(0x163)]=_0x333de6,_0x46a0a6['platformName']=_0x31f6ef[_0x57d0d3(0x15b)]||_0x175863,_0x46a0a6[_0x57d0d3(0x14b)]=_0x31f6ef[_0x57d0d3(0x14b)]||_0x333de6;const _0x4e6661={};_0x4e6661['sessionId']=_0x5582bb,_0x4e6661[_0x57d0d3(0x148)]=_0x46a0a6,_0x330eda=_0x4e6661;if(_0x2f46ff[_0x57d0d3(0xf7)](_0x5582bb,_0x1234da)){logger[_0x57d0d3(0x13e)](_0x57d0d3(0x138)+_0x1234da+',\x20os='+_0x175863);break;}}}}if(_0x203c50&&_0x2f46ff['OhnxO'](typeof _0x203c50,_0x2f46ff[_0x57d0d3(0xe1)]))try{const _0x321d4f=url['parse'](_0x203c50),_0xd1fb28=new URLSearchParams(_0x321d4f[_0x57d0d3(0x136)]),_0x2f3452=Object[_0x57d0d3(0x1a0)](_0xd1fb28['entries']()),_0x505ec3=[_0x2f3452[_0x57d0d3(0x165)],_0x2f3452[_0x57d0d3(0xdb)],_0x2f3452['desiredCapabilities']];for(const _0x208089 of _0x505ec3){if(_0x208089&&(!_0x23e91d||!_0x23e91d['sessionId']))try{const _0x58cee2=JSON['parse'](_0x208089),_0x56c0c8={};_0x56c0c8[_0x57d0d3(0x16b)]=_0x58cee2[_0x57d0d3(0x16b)]||_0x58cee2[_0x2f46ff[_0x57d0d3(0x11f)]]?.[_0x57d0d3(0x16b)],_0x56c0c8[_0x57d0d3(0x148)]={},_0x56c0c8[_0x57d0d3(0x148)][_0x57d0d3(0x185)]=_0x58cee2[_0x57d0d3(0x185)]||_0x58cee2[_0x57d0d3(0x161)],_0x56c0c8[_0x57d0d3(0x148)]['browserVersion']=_0x58cee2['browserVersion']||_0x58cee2[_0x57d0d3(0x142)],_0x56c0c8[_0x57d0d3(0x148)]['os']=_0x58cee2['os']||_0x58cee2['platform'],_0x56c0c8[_0x57d0d3(0x148)][_0x57d0d3(0x163)]=_0x58cee2[_0x57d0d3(0x163)]||_0x58cee2['os_version'],_0x56c0c8[_0x57d0d3(0x148)][_0x57d0d3(0x15b)]=_0x58cee2[_0x57d0d3(0x15b)]||_0x58cee2['os']||_0x58cee2['platform'],_0x56c0c8[_0x57d0d3(0x148)]['platformVersion']=_0x58cee2['platformVersion']||_0x58cee2[_0x57d0d3(0x163)]||_0x58cee2[_0x57d0d3(0xf3)],_0x23e91d=_0x56c0c8;if(_0x23e91d[_0x57d0d3(0x16b)]||_0x23e91d[_0x57d0d3(0x148)][_0x57d0d3(0x185)]){logger[_0x57d0d3(0x13e)](_0x2f46ff[_0x57d0d3(0x187)]);break;}}catch(_0x450002){_0x2f46ff[_0x57d0d3(0x1a1)](debug,_0x57d0d3(0xfa)+_0x450002[_0x57d0d3(0x145)]());}}}catch(_0x323e1b){_0x2f46ff[_0x57d0d3(0x162)](debug,'Error\x20parsing\x20WebSocket\x20endpoint:\x20'+_0x323e1b[_0x57d0d3(0x145)]());}}catch(_0x1c98c6){_0x2f46ff['Jrcbk'](debug,'Error\x20extracting\x20BrowserStack\x20parameters:\x20'+util[_0x57d0d3(0x17d)](_0x1c98c6));}const _0x551d6e={};return _0x551d6e[_0x57d0d3(0x11d)]=_0x23e91d,_0x551d6e[_0x57d0d3(0x19f)]=_0x330eda,_0x551d6e;}static async[a60_0x532f67(0x1a9)](_0xc1b361,_0x5f1efb){const _0x2ed31e=a60_0x532f67,_0x2d9734={'TWrPH':function(_0x4116cb,_0x23ff2b){return _0x4116cb||_0x23ff2b;},'UXFUk':_0x2ed31e(0x194),'WlLLQ':function(_0x154361,_0x267666){return _0x154361||_0x267666;},'eGRPw':function(_0x1aa90d,_0x1b2ece){return _0x1aa90d(_0x1b2ece);}};try{if(!BrowserstackCLI[_0x2ed31e(0xf6)]()[_0x2ed31e(0x134)]())return;if(_0x2d9734[_0x2ed31e(0x1a8)](_0xc1b361,_0x5f1efb)){logger[_0x2ed31e(0x13e)](_0x2d9734[_0x2ed31e(0x17a)]);const _0x4569d2={'params':_0xc1b361?{'bsParams':_0xc1b361}:null,'bStackParams':_0x2d9734[_0x2ed31e(0x143)](_0x5f1efb,null)},_0x5072f5=AutomationFramework['getTrackedInstance'](),_0xc904ee={};_0xc904ee['message']=_0x4569d2,_0xc904ee[_0x2ed31e(0x199)]=_0x5072f5,await BrowserstackCLI[_0x2ed31e(0xf6)]()[_0x2ed31e(0xdd)]()['trackEvent'](AutomationFrameworkState['PLAYWRIGHT_DISPATCH'],HookState[_0x2ed31e(0x135)],_0xc904ee);}}catch(_0x479700){_0x2d9734[_0x2ed31e(0x121)](debug,_0x2ed31e(0xf0)+util[_0x2ed31e(0x17d)](_0x479700));}}static[a60_0x532f67(0x108)](){return this['currentSessionDetails'];}}module[a60_0x532f67(0x13d)]=SharedPlaywrightSessionDetails;