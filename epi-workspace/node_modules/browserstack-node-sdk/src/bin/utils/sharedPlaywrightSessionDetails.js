const a60_0x17a593=a60_0x1f2d;function a60_0x5a2e(){const _0x595544=['bStackParams','XTbON','browserName','msedge','CRConnection\x20already\x20patched','capabilties','XenBr','use','Error\x20in\x20importing\x20crConnection','ESXiB','isRunning','knabq','Error\x20in\x20finding\x20platform\x20details\x20','XBCYA','iQbey','patchConnection','toLowerCase','cloudProvider','xtwhH','function','MgLze','Setting\x20platform\x20details\x20received\x20from\x20browserstack:\x20','Invalid\x20constructor,\x20please\x20use\x20static\x20methods','Browser\x20found\x20in\x20WebSocket\x20caps:\x20','_bstackDispatchPatched','828509WgElBq','triggerPlaywrightDispatchEvent','fPPGr','patch','POST','platformVersion','webkit','Error\x20parsing\x20WebSocket\x20endpoint:\x20','safari','_onMessage','oFtLd','Connection\x20dispatch\x20already\x20patched','zzEUf','chromium','channel','aYSJT','lKZoa','browserstack_capabilities','wYcku','includes','Using\x20browser\x20name\x20from\x20browser\x20object:\x20','NkSYa','bsSessionId','BROWSERSTACK_TEST_OBSERVABILITY','project','Failed\x20to\x20parse\x20capabilities\x20from\x20WebSocket:\x20','ATS_WSS_URL_REGEX','patchCRConnection','jNOhC','caps','mMNjY','_browserType','DctUw','Found\x20Connection\x20class\x20at:\x20','DbAIp','instance','client','BajFc','OXqbx','os_version','1448671EavaBz','sessionId','JNpbb','format','PmExU','assign','BQQwB','_defaultConnectOptions','loqkD','jiPoj','url','../v2/state/automationFrameworkState.js','extractBrowserStackParams','_bstackCRPatched','parse','CRConnection','query','Browser\x20is\x20not\x20defined\x20or\x20not\x20available','gecko','_name','Error\x20extracting\x20BrowserStack\x20parameters:\x20','jkpIu','platformName','hNcUx','Error\x20triggering\x20PLAYWRIGHT_DISPATCH\x20event:\x20','nTRPf','zGaiu','firefox','41577NTUVhy','Error\x20in\x20applying\x20Connection\x20patch\x20','YxrMY','Successfully\x20patched\x20Connection.dispatch','platform_version','SVMwm','YATGY','cOSgF','881040rLRuGS','currentSessionDetails','AGUCS','dispatch','Failed\x20to\x20parse\x20caps\x20from\x20WebSocket:\x20','edge','entries','ptrbI','params','setupBrowserDetails','JaRlZ','16ixefbw','Error\x20in\x20importing\x20connection\x20','message','nVQUA','version','orIAe','4809096ezervT','defineProperty','jdvaK','toString','capabilities','ZYsUx','PLAYWRIGHT_DISPATCH','Setting\x20session\x20id\x20received\x20from\x20browserstack\x20','50TfSPCh','lib','crConnection.js','TyORz','accessibilityPlatform','EoAgv','BSTACK_URL','../v2/framework/automationFramework','osVersion','DiHiw','hQAdH','MqAsw','model','connection.js','product','dDchR','browserstack','VDdrQ','QtSQI','browserVersion','RVjHl','dUJTs','mYVhl','getAutomationFramework','platformDetails','../v2/state/hookState.js','enISJ','xRZIC','tKCgm','bsParams','../../helpers/test-observability/utils','browser_version','prototype','Device\x20Model\x20is\x20not\x20available','wsEndpoint','platform','__platformCaps','Triggering\x20PLAYWRIGHT_DISPATCH\x20event','yeYOq','apply','UeCWC','server','./constants','deviceModel','bstack:options','getInstance','Connection','XMAKg','JneWA','rTVCk','JHaXa','jXTij','desiredCapabilities','FCpBP','../v2/browserstackCLI','browser','6EDcLlA','util','112934PMVPVf','eyGay','BrowserStack\x20params\x20extracted\x20from\x20WebSocket\x20endpoint','fromEntries','join','turboscale','sessionError','1OsKVOv','playwright-','MAZLc','hMhyU','pvzlz','chrome','debug','Failed\x20to\x20import\x20connection\x20from\x20',',\x20os=','312417bdeCHJ','trackEvent','yDJPn','WAlYd'];a60_0x5a2e=function(){return _0x595544;};return a60_0x5a2e();}function a60_0x1f2d(_0x1bc723,_0x2e3519){const _0x5a2e67=a60_0x5a2e();return a60_0x1f2d=function(_0x1f2d42,_0x183444){_0x1f2d42=_0x1f2d42-0x149;let _0x4aab4b=_0x5a2e67[_0x1f2d42];return _0x4aab4b;},a60_0x1f2d(_0x1bc723,_0x2e3519);}(function(_0x3ad0b5,_0x52d01b){const _0x2ca6f9=a60_0x1f2d,_0x21f230=_0x3ad0b5();while(!![]){try{const _0x116943=parseInt(_0x2ca6f9(0x1bc))/0x1*(-parseInt(_0x2ca6f9(0x1b5))/0x2)+-parseInt(_0x2ca6f9(0x15a))/0x3+parseInt(_0x2ca6f9(0x16d))/0x4*(-parseInt(_0x2ca6f9(0x162))/0x5)+parseInt(_0x2ca6f9(0x1b3))/0x6*(parseInt(_0x2ca6f9(0x20a))/0x7)+parseInt(_0x2ca6f9(0x173))/0x8+parseInt(_0x2ca6f9(0x1c5))/0x9+-parseInt(_0x2ca6f9(0x17b))/0xa*(-parseInt(_0x2ca6f9(0x1e2))/0xb);if(_0x116943===_0x52d01b)break;else _0x21f230['push'](_0x21f230['shift']());}catch(_0x569a7d){_0x21f230['push'](_0x21f230['shift']());}}}(a60_0x5a2e,0x6c750));const path=require('path'),url=require(a60_0x17a593(0x214)),util=require(a60_0x17a593(0x1b4)),{nestedKeyValue,isFalse,importFileFromPWCore,requireModule}=require('../../helpers/helper'),{o11yErrorHandler}=require('../../helpers/test-observability/error-handler'),{debug,getPlatformDetails}=require(a60_0x17a593(0x199)),logger=require('../../helpers/logger')['winstonLogger'],constants=require(a60_0x17a593(0x1a5)),AutomationFramework=require(a60_0x17a593(0x182)),BrowserstackCLI=require(a60_0x17a593(0x1b1)),AutomationFrameworkState=require(a60_0x17a593(0x149)),HookState=require(a60_0x17a593(0x194)),{platform}=require('os'),getBrowserNameFromChannel=_0x55be65=>{const _0x3b4282=a60_0x17a593,_0x281a84={};_0x281a84[_0x3b4282(0x200)]=_0x3b4282(0x1c1),_0x281a84[_0x3b4282(0x1f2)]=_0x3b4282(0x167),_0x281a84['ZYsUx']=_0x3b4282(0x159),_0x281a84[_0x3b4282(0x1c0)]=_0x3b4282(0x1ea);const _0x30c5c4=_0x281a84;if(_0x55be65[_0x3b4282(0x1f5)](_0x30c5c4[_0x3b4282(0x200)]))return _0x30c5c4[_0x3b4282(0x200)];if(_0x55be65[_0x3b4282(0x1f5)](_0x30c5c4['lKZoa']))return _0x30c5c4[_0x3b4282(0x1f2)];if(_0x55be65[_0x3b4282(0x1f5)](_0x30c5c4[_0x3b4282(0x178)]))return _0x30c5c4['ZYsUx'];if(_0x55be65['includes'](_0x30c5c4[_0x3b4282(0x1c0)]))return _0x30c5c4[_0x3b4282(0x1c0)];},getBrowserFromWSEndpoint=_0x185ee5=>{const _0xa86ccf=a60_0x17a593,_0x29f6b1={'jXTij':_0xa86ccf(0x1a7),'JNpbb':function(_0x10e5d2,_0x5598c7){return _0x10e5d2(_0x5598c7);},'VDdrQ':function(_0x253b2e,_0x24d44e){return _0x253b2e(_0x24d44e);},'hNcUx':_0xa86ccf(0x167),'YATGY':_0xa86ccf(0x1cc),'eyGay':'firefox','WioXK':_0xa86ccf(0x150),'DiHiw':_0xa86ccf(0x1ea),'jdvaK':_0xa86ccf(0x1e8),'DctUw':'chrome'};try{const _0x3bbba0=url[_0xa86ccf(0x14c)](_0x185ee5),_0x4aa946=new URLSearchParams(_0x3bbba0['query']),_0x5cb000=Object[_0xa86ccf(0x1b8)](_0x4aa946['entries']()),_0x2cc9be=[_0x5cb000[_0xa86ccf(0x1ff)],_0x5cb000[_0xa86ccf(0x177)],_0x5cb000['desiredCapabilities'],_0x5cb000[_0xa86ccf(0x1f3)]];for(const _0x3b8a2a of _0x2cc9be){if(_0x3b8a2a)try{const _0x2fa1f9=JSON['parse'](_0x3b8a2a),_0x47e3db=_0x2fa1f9['browserName']||_0x2fa1f9[_0xa86ccf(0x1b2)]||_0x2fa1f9[_0x29f6b1[_0xa86ccf(0x1ae)]]?.['browserName'];if(_0x47e3db)return _0x29f6b1[_0xa86ccf(0x20c)](debug,_0xa86ccf(0x1e0)+_0x47e3db),_0x47e3db['toLowerCase']();}catch(_0x2d01e5){_0x29f6b1[_0xa86ccf(0x18c)](debug,_0xa86ccf(0x166)+_0x2d01e5[_0xa86ccf(0x16f)]);}}if(_0x185ee5[_0xa86ccf(0x1f5)](_0x29f6b1[_0xa86ccf(0x155)])||_0x185ee5[_0xa86ccf(0x1f5)](_0x29f6b1[_0xa86ccf(0x160)]))return _0x29f6b1[_0xa86ccf(0x155)];if(_0x185ee5['includes'](_0x29f6b1[_0xa86ccf(0x1b6)])||_0x185ee5[_0xa86ccf(0x1f5)](_0x29f6b1['WioXK']))return _0x29f6b1[_0xa86ccf(0x1b6)];if(_0x185ee5['includes'](_0x29f6b1[_0xa86ccf(0x184)])||_0x185ee5['includes'](_0x29f6b1[_0xa86ccf(0x175)]))return _0x29f6b1[_0xa86ccf(0x184)];return _0x29f6b1[_0xa86ccf(0x202)];}catch(_0x4ede24){return _0x29f6b1[_0xa86ccf(0x20c)](debug,'Error\x20in\x20getting\x20browser\x20from\x20WebSocket\x20endpoint:\x20'+_0x4ede24['toString']()),_0x29f6b1[_0xa86ccf(0x202)];}},getCloudProviderFromWsEndpoint=_0x3f59d1=>{const _0x44f1de=a60_0x17a593,_0xa8f2b2={};_0xa8f2b2['loqkD']=_0x44f1de(0x18b),_0xa8f2b2[_0x44f1de(0x190)]='unknown_grid';const _0xed26b7=_0xa8f2b2;if(_0x3f59d1['includes'](constants[_0x44f1de(0x181)])||_0x3f59d1['includes'](constants['BSTACK_ATS_URL']))return _0xed26b7[_0x44f1de(0x212)];return _0xed26b7[_0x44f1de(0x190)];},a60_0x4c5f5a={};a60_0x4c5f5a[a60_0x17a593(0x1da)]=undefined,a60_0x4c5f5a[a60_0x17a593(0x1f8)]=undefined,a60_0x4c5f5a['browser']=undefined,a60_0x4c5f5a[a60_0x17a593(0x19a)]=undefined,a60_0x4c5f5a[a60_0x17a593(0x19e)]=undefined,a60_0x4c5f5a[a60_0x17a593(0x15e)]=undefined,a60_0x4c5f5a[a60_0x17a593(0x189)]=undefined,a60_0x4c5f5a['capabilities']={};class SharedPlaywrightSessionDetails{static [a60_0x17a593(0x163)]=a60_0x4c5f5a;constructor(){const _0x3af3d0=a60_0x17a593,_0x2481c7={};_0x2481c7['KoDnt']=_0x3af3d0(0x1df);const _0x5cbdbd=_0x2481c7;throw new Error(_0x5cbdbd['KoDnt']);}static ['sessionError']=null;static[a60_0x17a593(0x16b)](_0x2bf5cb,_0x3c0f63,_0x54adc8=null){const _0xad2626=a60_0x17a593,_0x100347={'PmExU':function(_0x3e8c19,_0x48c8ca){return _0x3e8c19===_0x48c8ca;},'MAZLc':_0xad2626(0x1dc),'EmUtX':_0xad2626(0x14f),'xtwhH':_0xad2626(0x19c),'mMcFt':'local_grid','rTVCk':function(_0x431118,_0x129e77,_0x5f9cb1){return _0x431118(_0x129e77,_0x5f9cb1);},'fPPGr':_0xad2626(0x201),'mYVhl':_0xad2626(0x211),'EoAgv':_0xad2626(0x1fa),'HkepI':_0xad2626(0x1d0),'jkpIu':'connectOptions','yDJPn':function(_0x2990d3,_0xa716f4){return _0x2990d3(_0xa716f4);},'BajFc':function(_0x1ef11a,_0x9e918d){return _0x1ef11a===_0x9e918d;},'zGaiu':_0xad2626(0x18b),'jNOhC':_0xad2626(0x1ba),'DbAIp':'automate','RVjHl':_0xad2626(0x1ef),'QtSQI':function(_0x5356ed,_0x5cda83){return _0x5356ed+_0x5cda83;},'yeYOq':_0xad2626(0x1bd),'MgLze':function(_0x559898){return _0x559898();},'nTRPf':function(_0x18d711,_0x2958b4,_0x158c34){return _0x18d711(_0x2958b4,_0x158c34);},'hQAdH':_0xad2626(0x16b)},_0x5f42e6=this;return _0x100347[_0xad2626(0x157)](o11yErrorHandler,async function _0xfde922(_0x3e4e41,_0x4ac7fc,_0xd9f32d=null){const _0x50d173=_0xad2626;let _0x4c0046=_0x3e4e41[_0x50d173(0x151)],_0x1bcd71=null;_0x3e4e41&&_0x100347[_0x50d173(0x20e)](typeof _0x3e4e41['version'],_0x100347[_0x50d173(0x1be)])?_0x1bcd71=_0x3e4e41[_0x50d173(0x171)]():logger[_0x50d173(0x1c2)](_0x100347['EmUtX']);let _0x581e20=null;_0x3e4e41&&_0x100347[_0x50d173(0x20e)](typeof _0x3e4e41[_0x50d173(0x187)],_0x100347[_0x50d173(0x1be)])?_0x581e20=_0x3e4e41[_0x50d173(0x187)]():logger['debug'](_0x100347[_0x50d173(0x1db)]);let _0x3a2361=null,_0x34fd30=null,_0x1b5460=null,_0x102840=_0x100347['mMcFt'];if(_0x3e4e41['_connection']['isRemote']()||global[_0x50d173(0x17f)]){let _0x43a6da=null;_0x100347[_0x50d173(0x1ac)](nestedKeyValue,_0x3e4e41,[_0x100347[_0x50d173(0x1e4)],_0x100347[_0x50d173(0x191)]])?_0x43a6da=_0x3e4e41[_0x50d173(0x201)][_0x50d173(0x211)]:_0x43a6da=_0x100347[_0x50d173(0x1ac)](nestedKeyValue,_0x4ac7fc,[_0x100347[_0x50d173(0x180)],_0x100347['HkepI'],_0x100347[_0x50d173(0x153)]]);const _0x25cdfb=_0xd9f32d||_0x43a6da&&_0x43a6da[_0x50d173(0x19d)];if(_0x25cdfb){_0x102840=_0x100347['yDJPn'](getCloudProviderFromWsEndpoint,_0x25cdfb);if(_0x100347[_0x50d173(0x207)](_0x102840,_0x100347[_0x50d173(0x158)])){_0x1b5460=constants[_0x50d173(0x1fc)]['test'](_0x25cdfb)?_0x100347[_0x50d173(0x1fe)]:_0x100347[_0x50d173(0x204)];const _0x3fa44f=_0x100347[_0x50d173(0x1c7)](getBrowserFromWSEndpoint,_0x25cdfb);if(_0x3fa44f&&(!_0x4c0046||_0x100347[_0x50d173(0x20e)](_0x4c0046,_0x100347[_0x50d173(0x18f)])))_0x4c0046=_0x3fa44f,logger[_0x50d173(0x1c2)]('Browser\x20name\x20overridden\x20from\x20WebSocket\x20endpoint:\x20'+_0x4c0046);else _0x4c0046&&logger[_0x50d173(0x1c2)](_0x50d173(0x1f6)+_0x4c0046);_0x3a2361=_0x5f42e6[_0x50d173(0x163)][_0x50d173(0x19e)],_0x34fd30=_0x5f42e6[_0x50d173(0x163)][_0x50d173(0x15e)];}}}else{_0x4ac7fc&&_0x4ac7fc[_0x50d173(0x1fa)]&&_0x4ac7fc['project']['use']&&_0x4ac7fc[_0x50d173(0x1fa)][_0x50d173(0x1d0)]['channel']?_0x4c0046=_0x100347[_0x50d173(0x1c7)](getBrowserNameFromChannel,_0x4ac7fc[_0x50d173(0x1fa)][_0x50d173(0x1d0)][_0x50d173(0x1f0)]):_0x4c0046=_0x100347[_0x50d173(0x18d)](_0x100347[_0x50d173(0x1a1)],_0x4c0046[_0x50d173(0x1d9)]());const _0x39ee28=await _0x100347[_0x50d173(0x1dd)](getPlatformDetails);_0x3a2361=_0x39ee28[_0x50d173(0x154)],_0x34fd30=_0x39ee28[_0x50d173(0x1e7)];}const _0x34d3eb={};_0x34d3eb[_0x50d173(0x1b2)]=_0x4c0046,_0x34d3eb[_0x50d173(0x19a)]=_0x1bcd71,_0x34d3eb[_0x50d173(0x177)]={},_0x34d3eb['platform']=_0x3a2361,_0x34d3eb[_0x50d173(0x15e)]=_0x34fd30,_0x34d3eb[_0x50d173(0x189)]=_0x1b5460;const _0xa03957=_0x34d3eb;_0x581e20&&(_0xa03957['capabilities'][_0x50d173(0x1a6)]=_0x581e20);const _0x2061da={};_0x2061da['cloudProvider']=_0x102840,_0x5f42e6['currentSessionDetails']=Object[_0x50d173(0x20f)]({},_0x5f42e6[_0x50d173(0x163)],_0x2061da,_0xa03957);const _0x3c8f7c={};_0x3c8f7c[_0x50d173(0x1b2)]=_0x5f42e6[_0x50d173(0x163)]['browser'],_0x3c8f7c[_0x50d173(0x18e)]=_0x5f42e6[_0x50d173(0x163)][_0x50d173(0x19a)],_0x3c8f7c[_0x50d173(0x19e)]=_0x5f42e6[_0x50d173(0x163)][_0x50d173(0x19e)],_0x3c8f7c[_0x50d173(0x1e7)]=_0x5f42e6[_0x50d173(0x163)][_0x50d173(0x15e)],_0x3c8f7c[_0x50d173(0x1da)]=_0x5f42e6[_0x50d173(0x163)]['cloudProvider'],_0x3c8f7c[_0x50d173(0x189)]=_0x5f42e6[_0x50d173(0x163)][_0x50d173(0x189)],logger['debug']('Session\x20details\x20setup\x20complete:\x20'+JSON['stringify'](_0x3c8f7c));},_0x100347[_0xad2626(0x185)])(_0x2bf5cb,_0x3c0f63,_0x54adc8);}static[a60_0x17a593(0x1e5)](){const _0xa0fabe=a60_0x17a593;this[_0xa0fabe(0x1d8)](),this[_0xa0fabe(0x1fd)]();}static[a60_0x17a593(0x1d8)](){const _0x74fa0f=a60_0x17a593,_0x40b57f={'XMAKg':function(_0x487049,_0x222c93){return _0x487049(_0x222c93);},'ZfJHb':function(_0x5ac98a,_0x135a6a){return _0x5ac98a(_0x135a6a);},'OXqbx':_0x74fa0f(0x17c),'FCpBP':_0x74fa0f(0x206),'dDchR':_0x74fa0f(0x188),'oFtLd':function(_0x4d2aa1,_0x15123d){return _0x4d2aa1(_0x15123d);},'nVQUA':function(_0x383933,_0x309822){return _0x383933(_0x309822);},'LyAKx':function(_0x128783,_0x190cd7){return _0x128783(_0x190cd7);},'UeCWC':'Not\x20able\x20to\x20import\x20Connection\x20class\x20from\x20any\x20path','zzEUf':function(_0x26f17b,_0x29825e){return _0x26f17b(_0x29825e);},'lvnsx':function(_0x6ef2a,_0x51d5d4){return _0x6ef2a!=_0x51d5d4;},'VFDks':_0x74fa0f(0x1ed),'AGUCS':_0x74fa0f(0x165),'NkSYa':_0x74fa0f(0x15d),'iQbey':function(_0xf22027,_0x4e187d){return _0xf22027(_0x4e187d);}},_0x57c1a6=this;if(!this[_0x74fa0f(0x1a9)])try{const _0x514f09=[path[_0x74fa0f(0x1b9)](_0x40b57f[_0x74fa0f(0x208)],_0x40b57f[_0x74fa0f(0x1b0)],_0x40b57f['dDchR']),path[_0x74fa0f(0x1b9)](_0x40b57f['OXqbx'],_0x40b57f['dDchR']),path[_0x74fa0f(0x1b9)](_0x40b57f['FCpBP'],_0x40b57f[_0x74fa0f(0x18a)])];for(const _0x48fa50 of _0x514f09){try{const _0x107818=_0x40b57f[_0x74fa0f(0x1ec)](importFileFromPWCore,_0x48fa50);if(_0x107818&&_0x107818[_0x74fa0f(0x1a9)]){this[_0x74fa0f(0x1a9)]=_0x107818[_0x74fa0f(0x1a9)],logger['debug'](_0x74fa0f(0x203)+_0x48fa50);break;}}catch(_0x1242a4){_0x40b57f[_0x74fa0f(0x170)](debug,_0x74fa0f(0x1c3)+_0x48fa50+':\x20'+_0x1242a4['toString']());}}if(!this[_0x74fa0f(0x1a9)]){_0x40b57f['LyAKx'](debug,_0x40b57f[_0x74fa0f(0x1a3)]);return;}}catch(_0x4bc05c){_0x40b57f[_0x74fa0f(0x1ee)](debug,_0x74fa0f(0x16e)+_0x4bc05c[_0x74fa0f(0x176)]());return;}const _0x2f599d=this[_0x74fa0f(0x1a9)];try{if(_0x40b57f['lvnsx'](_0x2f599d,null)){const _0xbba279=_0x2f599d[_0x74fa0f(0x19b)][_0x74fa0f(0x165)];if(!_0x40b57f['zzEUf'](isFalse,process['env'][_0x74fa0f(0x1f9)])){if(_0x2f599d[_0x74fa0f(0x19b)][_0x74fa0f(0x1e1)]){logger[_0x74fa0f(0x1c2)](_0x40b57f['VFDks']);return;}Object[_0x74fa0f(0x174)](_0x2f599d[_0x74fa0f(0x19b)],_0x40b57f[_0x74fa0f(0x164)],{'get':function(){const _0xdfb245={'JaRlZ':function(_0x2b5faf,_0x487d2e){const _0x5a3b65=a60_0x1f2d;return _0x40b57f[_0x5a3b65(0x1aa)](_0x2b5faf,_0x487d2e);},'uqRdx':function(_0x41ea1d,_0x3dd4bd){return _0x40b57f['ZfJHb'](_0x41ea1d,_0x3dd4bd);}};return async function _0x292c60(_0x1096ac){const _0x2c1dc4=a60_0x1f2d;if(BrowserstackCLI[_0x2c1dc4(0x1a8)]()[_0x2c1dc4(0x1d3)]()){const _0x3138cc={};_0x3138cc[_0x2c1dc4(0x16f)]=_0x1096ac,await BrowserstackCLI['getInstance']()['getAutomationFramework']()[_0x2c1dc4(0x1c6)](AutomationFrameworkState[_0x2c1dc4(0x179)],HookState[_0x2c1dc4(0x1e6)],_0x3138cc);}else{const _0xbaa7a3=_0x1096ac&&_0x1096ac[_0x2c1dc4(0x16a)]&&_0x1096ac[_0x2c1dc4(0x16a)][_0x2c1dc4(0x198)];if(_0xbaa7a3){const _0x356c5c=_0xbaa7a3[_0x2c1dc4(0x20b)],_0x4e1faa=_0xbaa7a3[_0x2c1dc4(0x193)];_0x4e1faa&&(_0xdfb245[_0x2c1dc4(0x16c)](debug,'Setting\x20platform\x20details\x20received\x20from\x20BS:\x20'+_0x4e1faa[_0x2c1dc4(0x176)]()),_0x57c1a6['currentSessionDetails'][_0x2c1dc4(0x19e)]=_0x4e1faa[_0x2c1dc4(0x154)],_0x57c1a6['currentSessionDetails'][_0x2c1dc4(0x15e)]=_0x4e1faa['platformVersion']),_0x356c5c&&(_0xdfb245['uqRdx'](debug,'Setting\x20session\x20id\x20received\x20from\x20BS\x20'+_0x356c5c),_0x57c1a6['currentSessionDetails'][_0x2c1dc4(0x1f8)]=_0x356c5c);}}return _0xbba279['apply'](this,arguments);};}}),_0x2f599d[_0x74fa0f(0x19b)][_0x74fa0f(0x1e1)]=!![],logger[_0x74fa0f(0x1c2)](_0x40b57f[_0x74fa0f(0x1f7)]);}}}catch(_0x225075){_0x40b57f[_0x74fa0f(0x1d7)](debug,_0x74fa0f(0x15b)+_0x225075),_0x57c1a6[_0x74fa0f(0x1bb)]=_0x225075[_0x74fa0f(0x176)]();}}static[a60_0x17a593(0x1fd)](){const _0x31a1a6=a60_0x17a593,_0x34853d={'SVMwm':function(_0x1946f9,_0x3bc901){return _0x1946f9(_0x3bc901);},'TyORz':'lib','tKCgm':_0x31a1a6(0x1a4),'XBCYA':_0x31a1a6(0x1ef),'wYcku':_0x31a1a6(0x17d),'orIAe':function(_0x292ac9,_0x4680e7){return _0x292ac9(_0x4680e7);},'XenBr':function(_0x547f08,_0x346a3e){return _0x547f08(_0x346a3e);},'JneWA':'Not\x20able\x20to\x20import\x20crConnection','enISJ':function(_0x2860b1,_0x5d70fd){return _0x2860b1(_0x5d70fd);},'JHaXa':_0x31a1a6(0x1d1),'BQQwB':function(_0xdd64dc,_0x24c6fa){return _0xdd64dc!=_0x24c6fa;},'ptrbI':_0x31a1a6(0x1cd),'MqAsw':'_onMessage','WAlYd':'Successfully\x20patched\x20CRConnection._onMessage'},_0x21862a=this;let _0x2caaf4=null;try{const _0x2a3992=path[_0x31a1a6(0x1b9)](_0x34853d[_0x31a1a6(0x17e)],_0x34853d[_0x31a1a6(0x197)],_0x34853d[_0x31a1a6(0x1d6)],_0x34853d[_0x31a1a6(0x1f4)]),_0x2b82aa=_0x34853d[_0x31a1a6(0x172)](importFileFromPWCore,_0x2a3992);!_0x2b82aa?_0x34853d[_0x31a1a6(0x1cf)](debug,_0x34853d[_0x31a1a6(0x1ab)]):_0x2caaf4=_0x2b82aa[_0x31a1a6(0x14d)];}catch(_0x24bfe3){_0x34853d[_0x31a1a6(0x195)](debug,_0x34853d[_0x31a1a6(0x1ad)]);}try{if(_0x34853d[_0x31a1a6(0x210)](_0x2caaf4,null)){const _0x55b982=_0x2caaf4['prototype'][_0x31a1a6(0x1eb)];if(_0x2caaf4[_0x31a1a6(0x19b)][_0x31a1a6(0x14b)]){logger['debug'](_0x34853d[_0x31a1a6(0x169)]);return;}Object[_0x31a1a6(0x174)](_0x2caaf4[_0x31a1a6(0x19b)],_0x34853d[_0x31a1a6(0x186)],{'get':function(){const _0x18336d={'ESXiB':function(_0xe835d1,_0xcfc003){const _0x5ab6c9=a60_0x1f2d;return _0x34853d[_0x5ab6c9(0x15f)](_0xe835d1,_0xcfc003);}};return async function _0x13057f(_0x888d7e){const _0x416b1c=a60_0x1f2d;try{if(BrowserstackCLI[_0x416b1c(0x1a8)]()['isRunning']()){const _0x47d74b={};_0x47d74b['message']=_0x888d7e,await BrowserstackCLI[_0x416b1c(0x1a8)]()[_0x416b1c(0x192)]()[_0x416b1c(0x1c6)](AutomationFrameworkState[_0x416b1c(0x179)],HookState['POST'],_0x47d74b),delete _0x888d7e[_0x416b1c(0x1c9)];}else{const _0xeb8b81=_0x888d7e[_0x416b1c(0x1c9)];if(_0xeb8b81){delete _0x888d7e[_0x416b1c(0x1c9)];const _0x5cea00=_0xeb8b81['sessionId'],_0x8266f5=_0xeb8b81['platformDetails'];_0x8266f5&&(_0x18336d[_0x416b1c(0x1d2)](debug,_0x416b1c(0x1de)+_0x8266f5[_0x416b1c(0x176)]()),_0x21862a[_0x416b1c(0x163)]['platform']=_0x8266f5['platformName'],_0x21862a[_0x416b1c(0x163)][_0x416b1c(0x15e)]=_0x8266f5[_0x416b1c(0x1e7)]),_0x5cea00&&(_0x18336d['ESXiB'](debug,_0x416b1c(0x17a)+_0x5cea00),_0x21862a['currentSessionDetails'][_0x416b1c(0x1f8)]=_0x5cea00);}}}catch(_0x4147d0){_0x18336d[_0x416b1c(0x1d2)](debug,_0x416b1c(0x1d5)+_0x4147d0[_0x416b1c(0x176)]());}return _0x55b982[_0x416b1c(0x1a2)](this,arguments);};}}),_0x2caaf4[_0x31a1a6(0x19b)]['_bstackCRPatched']=!![],logger[_0x31a1a6(0x1c2)](_0x34853d[_0x31a1a6(0x1c8)]);}}catch(_0x30a641){_0x34853d[_0x31a1a6(0x195)](debug,'Error\x20in\x20getting\x20applying\x20CRConnection\x20patch\x20'+_0x30a641),_0x21862a[_0x31a1a6(0x1bb)]=_0x30a641[_0x31a1a6(0x176)]();}}static[a60_0x17a593(0x14a)](_0x58a7fa,_0x1cc6ed){const _0x3c3558=a60_0x17a593,_0x1d1e22={'aYSJT':_0x3c3558(0x1a7),'xRZIC':function(_0x425b88,_0x32f23b){return _0x425b88||_0x32f23b;},'XTbON':function(_0x5dd073,_0x334d15){return _0x5dd073===_0x334d15;},'knabq':'string','YxrMY':_0x3c3558(0x1b7),'lYZyD':function(_0x14c1bd,_0x551313){return _0x14c1bd(_0x551313);},'hMhyU':function(_0x54d1d3,_0x1abcbc){return _0x54d1d3(_0x1abcbc);}};let _0x590550=null,_0x58445d=null;try{const _0x324b50=[_0x1cc6ed,global[_0x3c3558(0x19f)],global[_0x3c3558(0x1ce)]];for(const _0xb6007d of _0x324b50){if(_0xb6007d&&(!_0x58445d||!_0x58445d[_0x3c3558(0x20b)])){const _0x5ceb36=_0xb6007d[_0x3c3558(0x20b)]||_0xb6007d[_0x1d1e22[_0x3c3558(0x1f1)]]?.[_0x3c3558(0x20b)],_0x3bc543=_0xb6007d[_0x3c3558(0x1cb)]||_0xb6007d[_0x3c3558(0x1b2)]||_0xb6007d[_0x1d1e22[_0x3c3558(0x1f1)]]?.[_0x3c3558(0x1cb)],_0x102c1b=_0xb6007d[_0x3c3558(0x18e)]||_0xb6007d['browser_version']||_0xb6007d[_0x1d1e22[_0x3c3558(0x1f1)]]?.[_0x3c3558(0x18e)],_0x80d38=_0xb6007d['os']||_0xb6007d[_0x3c3558(0x19e)]||_0xb6007d[_0x1d1e22[_0x3c3558(0x1f1)]]?.['os'],_0x50ae5b=_0xb6007d[_0x3c3558(0x183)]||_0xb6007d[_0x3c3558(0x209)]||_0xb6007d[_0x1d1e22[_0x3c3558(0x1f1)]]?.['osVersion'];if(_0x1d1e22[_0x3c3558(0x196)](_0x5ceb36,_0x3bc543)||_0x80d38){const _0x4d1418={};_0x4d1418[_0x3c3558(0x1cb)]=_0x3bc543,_0x4d1418[_0x3c3558(0x18e)]=_0x102c1b,_0x4d1418['os']=_0x80d38,_0x4d1418[_0x3c3558(0x183)]=_0x50ae5b,_0x4d1418[_0x3c3558(0x154)]=_0xb6007d[_0x3c3558(0x154)]||_0x80d38,_0x4d1418['platformVersion']=_0xb6007d[_0x3c3558(0x1e7)]||_0x50ae5b;const _0x3c6625={};_0x3c6625[_0x3c3558(0x20b)]=_0x5ceb36,_0x3c6625[_0x3c3558(0x193)]=_0x4d1418,_0x58445d=_0x3c6625;if(_0x1d1e22['xRZIC'](_0x5ceb36,_0x3bc543)){logger[_0x3c3558(0x1c2)]('BrowserStack\x20params\x20extracted\x20from\x20capabilities:\x20browser='+_0x3bc543+_0x3c3558(0x1c4)+_0x80d38);break;}}}}if(_0x58a7fa&&_0x1d1e22[_0x3c3558(0x1ca)](typeof _0x58a7fa,_0x1d1e22[_0x3c3558(0x1d4)]))try{const _0x50bdc8=url[_0x3c3558(0x14c)](_0x58a7fa),_0x2220b9=new URLSearchParams(_0x50bdc8[_0x3c3558(0x14e)]),_0x32e998=Object[_0x3c3558(0x1b8)](_0x2220b9[_0x3c3558(0x168)]()),_0x35bb4a=[_0x32e998['caps'],_0x32e998[_0x3c3558(0x177)],_0x32e998[_0x3c3558(0x1af)]];for(const _0x4582de of _0x35bb4a){if(_0x4582de&&(!_0x590550||!_0x590550[_0x3c3558(0x20b)]))try{const _0xa1ee93=JSON[_0x3c3558(0x14c)](_0x4582de),_0x44c625={};_0x44c625[_0x3c3558(0x20b)]=_0xa1ee93[_0x3c3558(0x20b)]||_0xa1ee93[_0x1d1e22['aYSJT']]?.['sessionId'],_0x44c625[_0x3c3558(0x193)]={},_0x44c625[_0x3c3558(0x193)][_0x3c3558(0x1cb)]=_0xa1ee93[_0x3c3558(0x1cb)]||_0xa1ee93[_0x3c3558(0x1b2)],_0x44c625[_0x3c3558(0x193)][_0x3c3558(0x18e)]=_0xa1ee93['browserVersion']||_0xa1ee93[_0x3c3558(0x19a)],_0x44c625[_0x3c3558(0x193)]['os']=_0xa1ee93['os']||_0xa1ee93[_0x3c3558(0x19e)],_0x44c625[_0x3c3558(0x193)]['osVersion']=_0xa1ee93[_0x3c3558(0x183)]||_0xa1ee93['os_version'],_0x44c625[_0x3c3558(0x193)][_0x3c3558(0x154)]=_0xa1ee93[_0x3c3558(0x154)]||_0xa1ee93['os']||_0xa1ee93[_0x3c3558(0x19e)],_0x44c625[_0x3c3558(0x193)][_0x3c3558(0x1e7)]=_0xa1ee93[_0x3c3558(0x1e7)]||_0xa1ee93['osVersion']||_0xa1ee93[_0x3c3558(0x209)],_0x590550=_0x44c625;if(_0x590550[_0x3c3558(0x20b)]||_0x590550['platformDetails']['browserName']){logger['debug'](_0x1d1e22[_0x3c3558(0x15c)]);break;}}catch(_0x5841ed){_0x1d1e22['lYZyD'](debug,_0x3c3558(0x1fb)+_0x5841ed['toString']());}}}catch(_0x597c54){_0x1d1e22['lYZyD'](debug,_0x3c3558(0x1e9)+_0x597c54['toString']());}}catch(_0x3fd08f){_0x1d1e22[_0x3c3558(0x1bf)](debug,_0x3c3558(0x152)+util['format'](_0x3fd08f));}const _0x4b9b82={};return _0x4b9b82[_0x3c3558(0x198)]=_0x590550,_0x4b9b82[_0x3c3558(0x1c9)]=_0x58445d,_0x4b9b82;}static async[a60_0x17a593(0x1e3)](_0x8afdba,_0x438ed0){const _0x371244=a60_0x17a593,_0x1ca899={'cOSgF':function(_0x33861f,_0x17fb9a){return _0x33861f||_0x17fb9a;},'jiPoj':_0x371244(0x1a0),'BYOWo':function(_0x86d873,_0x457cb6){return _0x86d873(_0x457cb6);}};try{if(!BrowserstackCLI[_0x371244(0x1a8)]()[_0x371244(0x1d3)]())return;if(_0x1ca899[_0x371244(0x161)](_0x8afdba,_0x438ed0)){logger[_0x371244(0x1c2)](_0x1ca899[_0x371244(0x213)]);const _0x1d49bd={'params':_0x8afdba?{'bsParams':_0x8afdba}:null,'bStackParams':_0x1ca899['cOSgF'](_0x438ed0,null)},_0x18d7d9=AutomationFramework['getTrackedInstance'](),_0x1fef29={};_0x1fef29['message']=_0x1d49bd,_0x1fef29[_0x371244(0x205)]=_0x18d7d9,await BrowserstackCLI[_0x371244(0x1a8)]()['getAutomationFramework']()['trackEvent'](AutomationFrameworkState[_0x371244(0x179)],HookState['POST'],_0x1fef29);}}catch(_0x4faceb){_0x1ca899['BYOWo'](debug,_0x371244(0x156)+util[_0x371244(0x20d)](_0x4faceb));}}static['getDetails'](){const _0x9e08b3=a60_0x17a593;return this[_0x9e08b3(0x163)];}}module['exports']=SharedPlaywrightSessionDetails;