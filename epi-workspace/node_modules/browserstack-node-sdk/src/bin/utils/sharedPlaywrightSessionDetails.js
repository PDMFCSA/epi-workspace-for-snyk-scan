const a59_0x4d2d97=a59_0x1c2a;(function(_0x27973d,_0x45027b){const _0x5e18eb=a59_0x1c2a,_0x13ae98=_0x27973d();while(!![]){try{const _0x4d1cdd=parseInt(_0x5e18eb(0x11d))/0x1*(-parseInt(_0x5e18eb(0x10e))/0x2)+parseInt(_0x5e18eb(0x15b))/0x3*(-parseInt(_0x5e18eb(0x127))/0x4)+-parseInt(_0x5e18eb(0xd5))/0x5+parseInt(_0x5e18eb(0x160))/0x6*(parseInt(_0x5e18eb(0xf5))/0x7)+parseInt(_0x5e18eb(0xcc))/0x8+parseInt(_0x5e18eb(0xfb))/0x9+-parseInt(_0x5e18eb(0xcd))/0xa*(-parseInt(_0x5e18eb(0x152))/0xb);if(_0x4d1cdd===_0x45027b)break;else _0x13ae98['push'](_0x13ae98['shift']());}catch(_0x139a06){_0x13ae98['push'](_0x13ae98['shift']());}}}(a59_0x3c04,0xaf6c5));function a59_0x3c04(){const _0x187dcf=['Error\x20triggering\x20PLAYWRIGHT_DISPATCH\x20event:\x20','JsPxb','model','_defaultConnectOptions','Connection','trackEvent','browser','fMEaG','eqBQZ','Failed\x20to\x20import\x20connection\x20from\x20','Session\x20details\x20setup\x20complete:\x20','kNJsV','wVKdA','NdzWi','QXvYZ','__platformCaps','BrowserStack\x20params\x20extracted\x20from\x20WebSocket\x20endpoint','JxqXN','Error\x20in\x20importing\x20crConnection','setupBrowserDetails','Successfully\x20patched\x20Connection.dispatch','project','iJaIH','Djdgs','jWFfx','5053720ZfWgKr','10uyueNZ','jAMzO','_onMessage','getInstance','VAarl','platform_version','platformVersion','accessibilityPlatform','3194245FoghHl','PcumT','ZEgDo','platformDetails','Error\x20in\x20applying\x20Connection\x20patch\x20','getAutomationFramework','msedge','_bstackCRPatched','stringify','query','defineProperty','RfeqL','server','SyzoJ','currentSessionDetails','UauLQ','Setting\x20session\x20id\x20received\x20from\x20BS\x20','xuoLt','cymFq','cvnlE','capabilities','platformName','iABDw','os_version','QqTgY','format','ATS_WSS_URL_REGEX','gcbqn','playwright-','../v2/state/hookState.js','version','moexa','2870xZGTBl','function','assign','test','desiredCapabilities','oYWVi','10814958wiBniT','winstonLogger','connection.js','aPJCp','Failed\x20to\x20parse\x20caps\x20from\x20WebSocket:\x20','safari','MVzBI','sessionId','getDetails','uwXMO','anona','Error\x20in\x20importing\x20connection\x20','CRConnection\x20already\x20patched','PIeGD','DGKiK','osVersion','join','unknown_grid','connectOptions','2ChsGZC','Error\x20parsing\x20WebSocket\x20endpoint:\x20','_browserType','includes','BSTACK_ATS_URL','nfCQF','PLAYWRIGHT_DISPATCH','lib','chrome','UMZWR','Eegwp','triggerPlaywrightDispatchEvent','Setting\x20session\x20id\x20received\x20from\x20browserstack\x20','../../helpers/test-observability/error-handler','CORDJ','522212ncVXGQ','Triggering\x20PLAYWRIGHT_DISPATCH\x20event','webkit','bStackParams','jsatF','dXoIs','apply','browserstack_capabilities','bstack:options','platform','70100iKzpoQ','string','CRConnection','qRyoM','gecko','Error\x20in\x20getting\x20browser\x20from\x20WebSocket\x20endpoint:\x20','entries','sessionError','use','bXLZL','toString','Error\x20in\x20finding\x20platform\x20details\x20','NXeHw','getTrackedInstance','browserVersion','fromEntries','browser_version','capabilties','chromium','bsSessionId','tgSbb','_connection','BROWSERSTACK_TEST_OBSERVABILITY','dispatch','channel','Browser\x20name\x20overridden\x20from\x20WebSocket\x20endpoint:\x20','Failed\x20to\x20parse\x20capabilities\x20from\x20WebSocket:\x20','product','yfYxf','BSTACK_URL','Error\x20extracting\x20BrowserStack\x20parameters:\x20','util','KziEi','SGZpE','../v2/browserstackCLI','Not\x20able\x20to\x20import\x20Connection\x20class\x20from\x20any\x20path','../../helpers/logger','patch','caps','Found\x20Connection\x20class\x20at:\x20','prototype','Error\x20in\x20getting\x20applying\x20CRConnection\x20patch\x20','krfwq','1701722zrOBXQ','azEwc','EbNsl','edge','Browser\x20is\x20not\x20defined\x20or\x20not\x20available','OETeD','XtCgy','client','debug','75gXNXlA','Using\x20browser\x20name\x20from\x20browser\x20object:\x20','lnzmU','TpKew','parse','4824WyUtbV','ORoDn','dnmIJ','message','Cjmvz','bsParams','browserName','Successfully\x20patched\x20CRConnection._onMessage','patchCRConnection','POST','tQCXZ','firefox','../v2/framework/automationFramework','ezYRG','params','wYfXb','NHLBy','cloudProvider','local_grid','QOFfQ','CYnzl','isRunning','Not\x20able\x20to\x20import\x20crConnection','toLowerCase','patchConnection','UPsbJ','Browser\x20found\x20in\x20WebSocket\x20caps:\x20','VgYeV'];a59_0x3c04=function(){return _0x187dcf;};return a59_0x3c04();}const path=require('path'),url=require('url'),util=require(a59_0x4d2d97(0x146)),{nestedKeyValue,isFalse,importFileFromPWCore,requireModule}=require('../../helpers/helper'),{o11yErrorHandler}=require(a59_0x4d2d97(0x11b)),{debug,getPlatformDetails}=require('../../helpers/test-observability/utils'),logger=require(a59_0x4d2d97(0x14b))[a59_0x4d2d97(0xfc)],constants=require('./constants'),AutomationFramework=require(a59_0x4d2d97(0x16c)),BrowserstackCLI=require(a59_0x4d2d97(0x149)),AutomationFrameworkState=require('../v2/state/automationFrameworkState.js'),HookState=require(a59_0x4d2d97(0xf2)),{platform}=require('os'),getBrowserNameFromChannel=_0x4e7f06=>{const _0x5225ec=a59_0x4d2d97,_0xf33c54={};_0xf33c54[_0x5225ec(0x162)]='chrome',_0xf33c54['kNJsV']=_0x5225ec(0x155),_0xf33c54[_0x5225ec(0x13b)]=_0x5225ec(0x16b),_0xf33c54[_0x5225ec(0x130)]='safari';const _0x199cfa=_0xf33c54;if(_0x4e7f06[_0x5225ec(0x111)](_0x199cfa['dnmIJ']))return _0x199cfa[_0x5225ec(0x162)];if(_0x4e7f06[_0x5225ec(0x111)](_0x199cfa[_0x5225ec(0xbe)]))return _0x199cfa[_0x5225ec(0xbe)];if(_0x4e7f06[_0x5225ec(0x111)](_0x199cfa[_0x5225ec(0x13b)]))return _0x199cfa[_0x5225ec(0x13b)];if(_0x4e7f06[_0x5225ec(0x111)](_0x199cfa['bXLZL']))return _0x199cfa[_0x5225ec(0x130)];},getBrowserFromWSEndpoint=_0x40542e=>{const _0x111e06=a59_0x4d2d97,_0x4980aa={'VgYeV':_0x111e06(0x125),'iJaIH':function(_0x5aa306,_0x59668e){return _0x5aa306(_0x59668e);},'EbNsl':function(_0x762f8f,_0x151186){return _0x762f8f(_0x151186);},'QqTgY':_0x111e06(0x155),'TpKew':_0x111e06(0xdb),'aPJCp':_0x111e06(0x16b),'cMsks':_0x111e06(0x12b),'CORDJ':_0x111e06(0x100),'QOFfQ':_0x111e06(0x11f),'cymFq':_0x111e06(0x116)};try{const _0x544bc5=url[_0x111e06(0x15f)](_0x40542e),_0x218229=new URLSearchParams(_0x544bc5[_0x111e06(0xde)]),_0x452376=Object['fromEntries'](_0x218229[_0x111e06(0x12d)]()),_0x2e1bbb=[_0x452376[_0x111e06(0x14d)],_0x452376[_0x111e06(0xe9)],_0x452376[_0x111e06(0xf9)],_0x452376[_0x111e06(0x124)]];for(const _0x2751d7 of _0x2e1bbb){if(_0x2751d7)try{const _0x41ee6e=JSON[_0x111e06(0x15f)](_0x2751d7),_0x2b6937=_0x41ee6e[_0x111e06(0x166)]||_0x41ee6e['browser']||_0x41ee6e[_0x4980aa[_0x111e06(0xb2)]]?.['browserName'];if(_0x2b6937)return _0x4980aa[_0x111e06(0xc9)](debug,_0x111e06(0xb1)+_0x2b6937),_0x2b6937[_0x111e06(0xae)]();}catch(_0x27fcb6){_0x4980aa[_0x111e06(0x154)](debug,_0x111e06(0xff)+_0x27fcb6[_0x111e06(0x163)]);}}if(_0x40542e['includes'](_0x4980aa[_0x111e06(0xed)])||_0x40542e[_0x111e06(0x111)](_0x4980aa[_0x111e06(0x15e)]))return _0x4980aa[_0x111e06(0xed)];if(_0x40542e[_0x111e06(0x111)](_0x4980aa[_0x111e06(0xfe)])||_0x40542e[_0x111e06(0x111)](_0x4980aa['cMsks']))return _0x4980aa[_0x111e06(0xfe)];if(_0x40542e[_0x111e06(0x111)](_0x4980aa[_0x111e06(0x11c)])||_0x40542e[_0x111e06(0x111)](_0x4980aa[_0x111e06(0xaa)]))return _0x4980aa[_0x111e06(0x11c)];return _0x4980aa[_0x111e06(0xe7)];}catch(_0x149fc2){return _0x4980aa[_0x111e06(0xc9)](debug,_0x111e06(0x12c)+_0x149fc2[_0x111e06(0x131)]()),_0x4980aa['cymFq'];}},getCloudProviderFromWsEndpoint=_0x533c0a=>{const _0x26bddf=a59_0x4d2d97,_0x990a02={};_0x990a02[_0x26bddf(0x117)]='browserstack',_0x990a02['PIeGD']=_0x26bddf(0x10c);const _0x351fe7=_0x990a02;if(_0x533c0a[_0x26bddf(0x111)](constants[_0x26bddf(0x144)])||_0x533c0a['includes'](constants[_0x26bddf(0x112)]))return _0x351fe7[_0x26bddf(0x117)];return _0x351fe7[_0x26bddf(0x108)];},a59_0x5e9e95={};a59_0x5e9e95[a59_0x4d2d97(0xa8)]=undefined,a59_0x5e9e95[a59_0x4d2d97(0x13a)]=undefined,a59_0x5e9e95[a59_0x4d2d97(0xb9)]=undefined,a59_0x5e9e95['browser_version']=undefined,a59_0x5e9e95[a59_0x4d2d97(0x126)]=undefined,a59_0x5e9e95['platform_version']=undefined,a59_0x5e9e95['product']=undefined,a59_0x5e9e95[a59_0x4d2d97(0xe9)]={};function a59_0x1c2a(_0x2d2c1a,_0x1b79f2){const _0x3c043b=a59_0x3c04();return a59_0x1c2a=function(_0x1c2a6d,_0x4d22dc){_0x1c2a6d=_0x1c2a6d-0xa8;let _0x203e05=_0x3c043b[_0x1c2a6d];return _0x203e05;},a59_0x1c2a(_0x2d2c1a,_0x1b79f2);}class SharedPlaywrightSessionDetails{static [a59_0x4d2d97(0xe3)]=a59_0x5e9e95;constructor(){const _0x570b9c=a59_0x4d2d97,_0x463435={};_0x463435[_0x570b9c(0xc0)]='Invalid\x20constructor,\x20please\x20use\x20static\x20methods';const _0x354f81=_0x463435;throw new Error(_0x354f81[_0x570b9c(0xc0)]);}static [a59_0x4d2d97(0x12e)]=null;static[a59_0x4d2d97(0xc6)](_0x3317ee,_0x5e9b1c,_0x546161=null){const _0x3e7ea7=a59_0x4d2d97,_0x25390f={'CYnzl':function(_0x330918,_0x1dd85c){return _0x330918===_0x1dd85c;},'wYfXb':_0x3e7ea7(0xf6),'QXvYZ':_0x3e7ea7(0x156),'jsatF':function(_0x1658ae,_0x55b721){return _0x1658ae===_0x55b721;},'VAarl':'Device\x20Model\x20is\x20not\x20available','qljpq':_0x3e7ea7(0xa9),'iABDw':function(_0x2a586b,_0x13a010,_0x58d15b){return _0x2a586b(_0x13a010,_0x58d15b);},'ZfYVk':'_browserType','ZEgDo':_0x3e7ea7(0xb6),'NXeHw':_0x3e7ea7(0xc8),'yfYxf':_0x3e7ea7(0x12f),'GBmms':_0x3e7ea7(0x10d),'oYWVi':function(_0x1a8766,_0x8a730f){return _0x1a8766(_0x8a730f);},'SyzoJ':'browserstack','Eegwp':'turboscale','jAMzO':'automate','DGKiK':_0x3e7ea7(0x139),'moexa':function(_0x5a09db,_0x452e50){return _0x5a09db+_0x452e50;},'nFRfv':_0x3e7ea7(0xf1),'IYuNY':function(_0x4cac38){return _0x4cac38();},'dXoIs':_0x3e7ea7(0xc6)},_0x4bac73=this;return _0x25390f['iABDw'](o11yErrorHandler,async function _0xee9432(_0x1ea920,_0x27b509,_0x3abac4=null){const _0x138382=_0x3e7ea7;let _0x1b5080=_0x1ea920['_name'],_0x5ca19a=null;_0x1ea920&&_0x25390f[_0x138382(0xab)](typeof _0x1ea920[_0x138382(0xf3)],_0x25390f[_0x138382(0x16f)])?_0x5ca19a=_0x1ea920[_0x138382(0xf3)]():logger[_0x138382(0x15a)](_0x25390f[_0x138382(0xc1)]);let _0x2d88bb=null;_0x1ea920&&_0x25390f[_0x138382(0x121)](typeof _0x1ea920['model'],_0x25390f[_0x138382(0x16f)])?_0x2d88bb=_0x1ea920[_0x138382(0xb5)]():logger[_0x138382(0x15a)](_0x25390f[_0x138382(0xd1)]);let _0x499560=null,_0x2c53aa=null,_0x2adb85=null,_0x517363=_0x25390f['qljpq'];if(_0x1ea920[_0x138382(0x13c)]['isRemote']()||global[_0x138382(0xd4)]){let _0x4417d4=null;_0x25390f[_0x138382(0xeb)](nestedKeyValue,_0x1ea920,[_0x25390f['ZfYVk'],_0x25390f[_0x138382(0xd7)]])?_0x4417d4=_0x1ea920[_0x138382(0x110)][_0x138382(0xb6)]:_0x4417d4=_0x25390f[_0x138382(0xeb)](nestedKeyValue,_0x27b509,[_0x25390f[_0x138382(0x133)],_0x25390f[_0x138382(0x143)],_0x25390f['GBmms']]);const _0x57b74e=_0x3abac4||_0x4417d4&&_0x4417d4['wsEndpoint'];if(_0x57b74e){_0x517363=_0x25390f[_0x138382(0xfa)](getCloudProviderFromWsEndpoint,_0x57b74e);if(_0x25390f[_0x138382(0x121)](_0x517363,_0x25390f[_0x138382(0xe2)])){_0x2adb85=constants[_0x138382(0xef)][_0x138382(0xf8)](_0x57b74e)?_0x25390f[_0x138382(0x118)]:_0x25390f[_0x138382(0xce)];const _0x461827=_0x25390f[_0x138382(0xfa)](getBrowserFromWSEndpoint,_0x57b74e);if(_0x461827&&(!_0x1b5080||_0x25390f['jsatF'](_0x1b5080,_0x25390f[_0x138382(0x109)])))_0x1b5080=_0x461827,logger[_0x138382(0x15a)](_0x138382(0x140)+_0x1b5080);else _0x1b5080&&logger[_0x138382(0x15a)](_0x138382(0x15c)+_0x1b5080);_0x499560=_0x4bac73[_0x138382(0xe3)][_0x138382(0x126)],_0x2c53aa=_0x4bac73[_0x138382(0xe3)][_0x138382(0xd2)];}}}else{_0x27b509&&_0x27b509[_0x138382(0xc8)]&&_0x27b509[_0x138382(0xc8)][_0x138382(0x12f)]&&_0x27b509[_0x138382(0xc8)][_0x138382(0x12f)][_0x138382(0x13f)]?_0x1b5080=_0x25390f[_0x138382(0xfa)](getBrowserNameFromChannel,_0x27b509['project']['use'][_0x138382(0x13f)]):_0x1b5080=_0x25390f[_0x138382(0xf4)](_0x25390f['nFRfv'],_0x1b5080[_0x138382(0xae)]());const _0x204831=await _0x25390f['IYuNY'](getPlatformDetails);_0x499560=_0x204831[_0x138382(0xea)],_0x2c53aa=_0x204831[_0x138382(0xd3)];}const _0x448f9a={};_0x448f9a[_0x138382(0xb9)]=_0x1b5080,_0x448f9a[_0x138382(0x137)]=_0x5ca19a,_0x448f9a[_0x138382(0xe9)]={},_0x448f9a['platform']=_0x499560,_0x448f9a['platform_version']=_0x2c53aa,_0x448f9a[_0x138382(0x142)]=_0x2adb85;const _0x5d3c0e=_0x448f9a;_0x2d88bb&&(_0x5d3c0e[_0x138382(0xe9)]['deviceModel']=_0x2d88bb);const _0x5b0b32={};_0x5b0b32[_0x138382(0xa8)]=_0x517363,_0x4bac73['currentSessionDetails']=Object[_0x138382(0xf7)]({},_0x4bac73[_0x138382(0xe3)],_0x5b0b32,_0x5d3c0e);const _0x199a98={};_0x199a98[_0x138382(0xb9)]=_0x4bac73[_0x138382(0xe3)]['browser'],_0x199a98[_0x138382(0x135)]=_0x4bac73[_0x138382(0xe3)]['browser_version'],_0x199a98[_0x138382(0x126)]=_0x4bac73['currentSessionDetails'][_0x138382(0x126)],_0x199a98[_0x138382(0xd3)]=_0x4bac73[_0x138382(0xe3)][_0x138382(0xd2)],_0x199a98[_0x138382(0xa8)]=_0x4bac73[_0x138382(0xe3)][_0x138382(0xa8)],_0x199a98[_0x138382(0x142)]=_0x4bac73['currentSessionDetails'][_0x138382(0x142)],logger[_0x138382(0x15a)](_0x138382(0xbd)+JSON[_0x138382(0xdd)](_0x199a98));},_0x25390f[_0x3e7ea7(0x122)])(_0x3317ee,_0x5e9b1c,_0x546161);}static[a59_0x4d2d97(0x14c)](){const _0x2acc32=a59_0x4d2d97;this['patchConnection'](),this[_0x2acc32(0x168)]();}static[a59_0x4d2d97(0xaf)](){const _0x2039b0=a59_0x4d2d97,_0x14693a={'gcbqn':function(_0x475f27,_0x1f9d32){return _0x475f27(_0x1f9d32);},'ezYRG':_0x2039b0(0x115),'RfeqL':_0x2039b0(0x159),'eqBQZ':_0x2039b0(0xfd),'nfCQF':function(_0x129b58,_0x1c504b){return _0x129b58(_0x1c504b);},'ORoDn':function(_0x3c7d8d,_0x295149){return _0x3c7d8d(_0x295149);},'NHLBy':_0x2039b0(0x14a),'UPsbJ':function(_0x10133a,_0x30efba){return _0x10133a!=_0x30efba;},'tQCXZ':function(_0x48174f,_0x575fe8){return _0x48174f(_0x575fe8);},'jWFfx':'Connection\x20dispatch\x20already\x20patched','ZOLYm':_0x2039b0(0x13e),'ZacCI':_0x2039b0(0xc7),'wVKdA':function(_0x37832e,_0x5b3736){return _0x37832e(_0x5b3736);}},_0xee4f62=this;if(!this['Connection'])try{const _0x344d92=[path[_0x2039b0(0x10b)](_0x14693a[_0x2039b0(0x16d)],_0x14693a[_0x2039b0(0xe0)],_0x14693a['eqBQZ']),path[_0x2039b0(0x10b)](_0x14693a['ezYRG'],_0x14693a['eqBQZ']),path[_0x2039b0(0x10b)](_0x14693a[_0x2039b0(0xe0)],_0x14693a[_0x2039b0(0xbb)])];for(const _0x40db96 of _0x344d92){try{const _0x3c076a=_0x14693a[_0x2039b0(0xf0)](importFileFromPWCore,_0x40db96);if(_0x3c076a&&_0x3c076a[_0x2039b0(0xb7)]){this['Connection']=_0x3c076a[_0x2039b0(0xb7)],logger[_0x2039b0(0x15a)](_0x2039b0(0x14e)+_0x40db96);break;}}catch(_0x209421){_0x14693a[_0x2039b0(0x113)](debug,_0x2039b0(0xbc)+_0x40db96+':\x20'+_0x209421[_0x2039b0(0x131)]());}}if(!this[_0x2039b0(0xb7)]){_0x14693a[_0x2039b0(0x161)](debug,_0x14693a[_0x2039b0(0x170)]);return;}}catch(_0x4f3a98){_0x14693a[_0x2039b0(0x161)](debug,_0x2039b0(0x106)+_0x4f3a98['toString']());return;}const _0x572620=this[_0x2039b0(0xb7)];try{if(_0x14693a[_0x2039b0(0xb0)](_0x572620,null)){const _0x23bf66=_0x572620[_0x2039b0(0x14f)][_0x2039b0(0x13e)];if(!_0x14693a[_0x2039b0(0x16a)](isFalse,process['env'][_0x2039b0(0x13d)])){if(_0x572620[_0x2039b0(0x14f)]['_bstackDispatchPatched']){logger[_0x2039b0(0x15a)](_0x14693a[_0x2039b0(0xcb)]);return;}Object[_0x2039b0(0xdf)](_0x572620['prototype'],_0x14693a['ZOLYm'],{'get':function(){const _0x328d93={'qRyoM':function(_0x4aa499,_0x435e66){const _0x45dbc5=a59_0x1c2a;return _0x14693a[_0x45dbc5(0xf0)](_0x4aa499,_0x435e66);}};return async function _0x4614c5(_0x182510){const _0x19dd19=a59_0x1c2a;if(BrowserstackCLI[_0x19dd19(0xd0)]()[_0x19dd19(0xac)]()){const _0x321fc6={};_0x321fc6[_0x19dd19(0x163)]=_0x182510,await BrowserstackCLI[_0x19dd19(0xd0)]()[_0x19dd19(0xda)]()[_0x19dd19(0xb8)](AutomationFrameworkState['PLAYWRIGHT_DISPATCH'],HookState[_0x19dd19(0x169)],_0x321fc6);}else{const _0x234b73=_0x182510&&_0x182510[_0x19dd19(0x16e)]&&_0x182510[_0x19dd19(0x16e)]['bsParams'];if(_0x234b73){const _0x509843=_0x234b73['sessionId'],_0x51b30f=_0x234b73[_0x19dd19(0xd8)];_0x51b30f&&(_0x328d93[_0x19dd19(0x12a)](debug,'Setting\x20platform\x20details\x20received\x20from\x20BS:\x20'+_0x51b30f['toString']()),_0xee4f62[_0x19dd19(0xe3)][_0x19dd19(0x126)]=_0x51b30f[_0x19dd19(0xea)],_0xee4f62['currentSessionDetails'][_0x19dd19(0xd2)]=_0x51b30f['platformVersion']),_0x509843&&(_0x328d93[_0x19dd19(0x12a)](debug,_0x19dd19(0xe5)+_0x509843),_0xee4f62[_0x19dd19(0xe3)][_0x19dd19(0x13a)]=_0x509843);}}return _0x23bf66[_0x19dd19(0x123)](this,arguments);};}}),_0x572620['prototype']['_bstackDispatchPatched']=!![],logger[_0x2039b0(0x15a)](_0x14693a['ZacCI']);}}}catch(_0x1da97d){_0x14693a[_0x2039b0(0xbf)](debug,_0x2039b0(0xd9)+_0x1da97d),_0xee4f62[_0x2039b0(0x12e)]=_0x1da97d[_0x2039b0(0x131)]();}}static[a59_0x4d2d97(0x168)](){const _0x5003be=a59_0x4d2d97,_0x58c712={'Cjmvz':function(_0x5c7d67,_0x5adb5d){return _0x5c7d67(_0x5adb5d);},'XtCgy':function(_0x5328a5,_0x158fdf){return _0x5328a5(_0x158fdf);},'krfwq':'lib','glMrk':_0x5003be(0xe1),'fMEaG':_0x5003be(0x139),'MVzBI':'crConnection.js','xuoLt':function(_0x20e374,_0x266ffb){return _0x20e374(_0x266ffb);},'oPtla':_0x5003be(0xad),'bLhWu':function(_0x56ad1c,_0x4de859){return _0x56ad1c(_0x4de859);},'nhMwG':_0x5003be(0xc5),'OETeD':function(_0x52fbad,_0x47da21){return _0x52fbad!=_0x47da21;},'PcumT':_0x5003be(0x107),'anona':'_onMessage','JsPxb':_0x5003be(0x167)},_0x234a1d=this;let _0x1ff7f4=null;try{const _0x223a4b=path[_0x5003be(0x10b)](_0x58c712[_0x5003be(0x151)],_0x58c712['glMrk'],_0x58c712[_0x5003be(0xba)],_0x58c712[_0x5003be(0x101)]),_0x52db43=_0x58c712[_0x5003be(0xe6)](importFileFromPWCore,_0x223a4b);!_0x52db43?_0x58c712[_0x5003be(0x158)](debug,_0x58c712['oPtla']):_0x1ff7f4=_0x52db43[_0x5003be(0x129)];}catch(_0x8bc24d){_0x58c712['bLhWu'](debug,_0x58c712['nhMwG']);}try{if(_0x58c712[_0x5003be(0x157)](_0x1ff7f4,null)){const _0x365fee=_0x1ff7f4[_0x5003be(0x14f)][_0x5003be(0xcf)];if(_0x1ff7f4['prototype'][_0x5003be(0xdc)]){logger[_0x5003be(0x15a)](_0x58c712[_0x5003be(0xd6)]);return;}Object[_0x5003be(0xdf)](_0x1ff7f4[_0x5003be(0x14f)],_0x58c712[_0x5003be(0x105)],{'get':function(){const _0xdab130={'VXiPh':function(_0x422a96,_0x16bb69){const _0x4bd198=a59_0x1c2a;return _0x58c712[_0x4bd198(0x164)](_0x422a96,_0x16bb69);},'azEwc':function(_0x3f01be,_0x522b23){return _0x58c712['XtCgy'](_0x3f01be,_0x522b23);}};return async function _0x4b350a(_0x55baad){const _0x25a28c=a59_0x1c2a;try{if(BrowserstackCLI[_0x25a28c(0xd0)]()[_0x25a28c(0xac)]()){const _0x2e769b={};_0x2e769b[_0x25a28c(0x163)]=_0x55baad,await BrowserstackCLI[_0x25a28c(0xd0)]()['getAutomationFramework']()[_0x25a28c(0xb8)](AutomationFrameworkState['PLAYWRIGHT_DISPATCH'],HookState[_0x25a28c(0x169)],_0x2e769b),delete _0x55baad['bStackParams'];}else{const _0x2be1db=_0x55baad[_0x25a28c(0x120)];if(_0x2be1db){delete _0x55baad[_0x25a28c(0x120)];const _0x232379=_0x2be1db[_0x25a28c(0x102)],_0x4657ec=_0x2be1db['platformDetails'];_0x4657ec&&(_0xdab130['VXiPh'](debug,'Setting\x20platform\x20details\x20received\x20from\x20browserstack:\x20'+_0x4657ec[_0x25a28c(0x131)]()),_0x234a1d[_0x25a28c(0xe3)][_0x25a28c(0x126)]=_0x4657ec[_0x25a28c(0xea)],_0x234a1d[_0x25a28c(0xe3)][_0x25a28c(0xd2)]=_0x4657ec[_0x25a28c(0xd3)]),_0x232379&&(_0xdab130[_0x25a28c(0x153)](debug,_0x25a28c(0x11a)+_0x232379),_0x234a1d[_0x25a28c(0xe3)]['bsSessionId']=_0x232379);}}}catch(_0x2aeb1f){_0xdab130['VXiPh'](debug,_0x25a28c(0x132)+_0x2aeb1f[_0x25a28c(0x131)]());}return _0x365fee[_0x25a28c(0x123)](this,arguments);};}}),_0x1ff7f4[_0x5003be(0x14f)][_0x5003be(0xdc)]=!![],logger['debug'](_0x58c712[_0x5003be(0xb4)]);}}catch(_0x74e570){_0x58c712['xuoLt'](debug,_0x5003be(0x150)+_0x74e570),_0x234a1d[_0x5003be(0x12e)]=_0x74e570[_0x5003be(0x131)]();}}static['extractBrowserStackParams'](_0x3f0fdc,_0x33693a){const _0x19b158=a59_0x4d2d97,_0x4cd022={'cvnlE':_0x19b158(0x125),'uwXMO':function(_0x333c7f,_0x2b3ac9){return _0x333c7f||_0x2b3ac9;},'JxqXN':function(_0x128111,_0x36a8fe){return _0x128111===_0x36a8fe;},'Djdgs':_0x19b158(0x128),'KziEi':_0x19b158(0xc3),'SGZpE':function(_0x5d70be,_0x58c5d7){return _0x5d70be(_0x58c5d7);},'FYnpn':function(_0x1ce432,_0x39cd33){return _0x1ce432(_0x39cd33);}};let _0x3d5348=null,_0x437a4c=null;try{const _0x7ca2da=[_0x33693a,global[_0x19b158(0xc2)],global[_0x19b158(0x138)]];for(const _0x50a6b9 of _0x7ca2da){if(_0x50a6b9&&(!_0x437a4c||!_0x437a4c[_0x19b158(0x102)])){const _0x621d1a=_0x50a6b9[_0x19b158(0x102)]||_0x50a6b9[_0x4cd022[_0x19b158(0xe8)]]?.[_0x19b158(0x102)],_0x2ac7b1=_0x50a6b9['browserName']||_0x50a6b9[_0x19b158(0xb9)]||_0x50a6b9[_0x4cd022['cvnlE']]?.[_0x19b158(0x166)],_0x313edf=_0x50a6b9[_0x19b158(0x135)]||_0x50a6b9['browser_version']||_0x50a6b9[_0x4cd022[_0x19b158(0xe8)]]?.['browserVersion'],_0x158874=_0x50a6b9['os']||_0x50a6b9[_0x19b158(0x126)]||_0x50a6b9[_0x4cd022[_0x19b158(0xe8)]]?.['os'],_0x133a4e=_0x50a6b9[_0x19b158(0x10a)]||_0x50a6b9[_0x19b158(0xec)]||_0x50a6b9[_0x4cd022[_0x19b158(0xe8)]]?.['osVersion'];if(_0x4cd022[_0x19b158(0x104)](_0x621d1a,_0x2ac7b1)||_0x158874){const _0x3d0053={};_0x3d0053[_0x19b158(0x166)]=_0x2ac7b1,_0x3d0053[_0x19b158(0x135)]=_0x313edf,_0x3d0053['os']=_0x158874,_0x3d0053[_0x19b158(0x10a)]=_0x133a4e,_0x3d0053['platformName']=_0x50a6b9[_0x19b158(0xea)]||_0x158874,_0x3d0053[_0x19b158(0xd3)]=_0x50a6b9['platformVersion']||_0x133a4e;const _0x3ab432={};_0x3ab432[_0x19b158(0x102)]=_0x621d1a,_0x3ab432[_0x19b158(0xd8)]=_0x3d0053,_0x437a4c=_0x3ab432;if(_0x4cd022[_0x19b158(0x104)](_0x621d1a,_0x2ac7b1)){logger[_0x19b158(0x15a)]('BrowserStack\x20params\x20extracted\x20from\x20capabilities:\x20browser='+_0x2ac7b1+',\x20os='+_0x158874);break;}}}}if(_0x3f0fdc&&_0x4cd022[_0x19b158(0xc4)](typeof _0x3f0fdc,_0x4cd022[_0x19b158(0xca)]))try{const _0x4076a2=url[_0x19b158(0x15f)](_0x3f0fdc),_0x563683=new URLSearchParams(_0x4076a2['query']),_0x5ebd81=Object[_0x19b158(0x136)](_0x563683['entries']()),_0x3169a7=[_0x5ebd81[_0x19b158(0x14d)],_0x5ebd81[_0x19b158(0xe9)],_0x5ebd81['desiredCapabilities']];for(const _0x18f0bd of _0x3169a7){if(_0x18f0bd&&(!_0x3d5348||!_0x3d5348[_0x19b158(0x102)]))try{const _0x51f11c=JSON[_0x19b158(0x15f)](_0x18f0bd),_0x3b24b8={};_0x3b24b8['sessionId']=_0x51f11c[_0x19b158(0x102)]||_0x51f11c[_0x4cd022[_0x19b158(0xe8)]]?.[_0x19b158(0x102)],_0x3b24b8[_0x19b158(0xd8)]={},_0x3b24b8[_0x19b158(0xd8)]['browserName']=_0x51f11c['browserName']||_0x51f11c[_0x19b158(0xb9)],_0x3b24b8[_0x19b158(0xd8)][_0x19b158(0x135)]=_0x51f11c[_0x19b158(0x135)]||_0x51f11c['browser_version'],_0x3b24b8[_0x19b158(0xd8)]['os']=_0x51f11c['os']||_0x51f11c[_0x19b158(0x126)],_0x3b24b8[_0x19b158(0xd8)][_0x19b158(0x10a)]=_0x51f11c[_0x19b158(0x10a)]||_0x51f11c[_0x19b158(0xec)],_0x3b24b8[_0x19b158(0xd8)][_0x19b158(0xea)]=_0x51f11c['platformName']||_0x51f11c['os']||_0x51f11c[_0x19b158(0x126)],_0x3b24b8[_0x19b158(0xd8)][_0x19b158(0xd3)]=_0x51f11c[_0x19b158(0xd3)]||_0x51f11c['osVersion']||_0x51f11c[_0x19b158(0xec)],_0x3d5348=_0x3b24b8;if(_0x3d5348['sessionId']||_0x3d5348['platformDetails']['browserName']){logger['debug'](_0x4cd022[_0x19b158(0x147)]);break;}}catch(_0xddc4c6){_0x4cd022[_0x19b158(0x148)](debug,_0x19b158(0x141)+_0xddc4c6['toString']());}}}catch(_0x13d2d4){_0x4cd022['SGZpE'](debug,_0x19b158(0x10f)+_0x13d2d4[_0x19b158(0x131)]());}}catch(_0x344727){_0x4cd022['FYnpn'](debug,_0x19b158(0x145)+util[_0x19b158(0xee)](_0x344727));}const _0x305e45={};return _0x305e45[_0x19b158(0x165)]=_0x3d5348,_0x305e45['bStackParams']=_0x437a4c,_0x305e45;}static async[a59_0x4d2d97(0x119)](_0xa07bc0,_0x4e512b){const _0x241190=a59_0x4d2d97,_0x1c407c={'lnzmU':function(_0x53a1de,_0x476dff){return _0x53a1de||_0x476dff;},'UauLQ':_0x241190(0x11e),'oCFzr':function(_0x597c51,_0xf19b2d){return _0x597c51||_0xf19b2d;},'lmhAy':function(_0x309ef7,_0x505a9b){return _0x309ef7(_0x505a9b);}};try{if(!BrowserstackCLI[_0x241190(0xd0)]()[_0x241190(0xac)]())return;if(_0x1c407c[_0x241190(0x15d)](_0xa07bc0,_0x4e512b)){logger[_0x241190(0x15a)](_0x1c407c[_0x241190(0xe4)]);const _0x1214d4={'params':_0xa07bc0?{'bsParams':_0xa07bc0}:null,'bStackParams':_0x1c407c['oCFzr'](_0x4e512b,null)},_0x4bf516=AutomationFramework[_0x241190(0x134)](),_0x3e0f7b={};_0x3e0f7b[_0x241190(0x163)]=_0x1214d4,_0x3e0f7b['instance']=_0x4bf516,await BrowserstackCLI[_0x241190(0xd0)]()[_0x241190(0xda)]()[_0x241190(0xb8)](AutomationFrameworkState[_0x241190(0x114)],HookState[_0x241190(0x169)],_0x3e0f7b);}}catch(_0x33df2e){_0x1c407c['lmhAy'](debug,_0x241190(0xb3)+util['format'](_0x33df2e));}}static[a59_0x4d2d97(0x103)](){const _0x452e59=a59_0x4d2d97;return this[_0x452e59(0xe3)];}}module['exports']=SharedPlaywrightSessionDetails;