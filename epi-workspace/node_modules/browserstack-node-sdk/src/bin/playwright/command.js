#!/usr/bin/env node
'use strict';const a39_0x5b60aa=a39_0x9291;function a39_0x2111(){const _0x2a0908=['winstonLogger','OxHTX','TeJpi','BROWSERSTACK_AUTOMATION','debug','--disable-test-observability','initialize','isUndefined','setFrameworkDetail','Playwright\x20process\x20exited\x20with\x20code\x20','pw_result.json','skipSessionName','BROWSERSTACK_PW_CONFIG_DIR','Error\x20in\x20accessing\x20.browserstack\x20directory:\x20','yRcTN','cliConfig','WgWzD','NYzxm','Ahuzc','SCNFu','lLbSU','dtwwA','constants','dirname','QJPcs','playwright','BROWSERSTACK_TEST_OBSERVABILITY','accessSync','resolve','bEGVH','exports','../utils/constants','win32','test','BrowserStack\x20config\x20file\x20not\x20found.','nestedKeyValue','rmHpQ','npx','SPmAv','sKThv','child_process','\x22;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20process.env.GLOBAL_AGENT_NO_PROXY=\x22','Updated\x20config\x20file\x20name\x20to\x20-\x20','nTToq','browserstackSetupConfig.json','XBOWN','.browserstack','process.env.GLOBAL_AGENT_HTTP_PROXY=\x22','../../helpers/BrowserStackSetup','jfhPC','1905724qAurmR','bootstrap','INTERNALLY_USED_ENV_VARS','VNHvq','forEach','length','PLAYWRIGHT','EVENTS','BROWSERSTACK_TEST_ACCESSIBILITY_YML','../v2/browserstackCLI','cwd','Ozuhe','stop','gAdDt','--config=','info','writeFileSync','\x22;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20let\x20bootstrap;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bootstrap\x20=\x20require(\x22global-agent\x22).bootstrap;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}catch{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20This\x20is\x20a\x20failsafe\x20if\x20global-agent\x20present\x20inside\x20sdk\x20node_modules\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bootstrap\x20=\x20require(\x22./node_modules/browserstack-node-sdk/node_modules/global-agent\x22).bootstrap;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bootstrap();','has','../../helpers/performance/performance-tester','LehAB','resolvedConfigFile','requirePWModule','BROWSERSTACK_SETUP_CONFIG_PATH','concat','error','inherit','false','unlinkSync','dtSWH','133Tyucit','isTrue','parse','No\x20Proxy\x20:\x20','CUlIc','3892473kNOhku','sglEa','WEyMM','1890720gbcrzb','../../helpers/performance/constants','faACa','setBrowserstackConfig','kDuLm','W_OK','Error\x20in\x20deleting\x20playwright\x20results','KZbna','ICoam','Error\x20in\x20closing\x20playwright','Rmmza','./reporter/pwUtils','startsWith','OXWlJ','--disable-browserstack-automation','SDK_PRE_INITIALIZE','start','config','readdirSync','errorMessage','shutdown','./reporter/test-details','../../helpers/test-observability/utils','existsSync','platform','getInstance','automation','get','../../helpers/testhub/testhubHandler','R_OK','../v2/TestInfo','../../helpers/helper','playwright-browserstack-sdk.config.cjs','11656adhdCR','path','true','slice','apply','USER_CONFIG_DETAILS_PATH','browserstackAutomation','rrTYp','filterBrowserstackArgs','Error\x20in\x20getting\x20funnel\x20data\x20results','BROWSERSTACK_RERUN','getNoProxy','../../helpers/accessibility-automation/helper','RbzHv','../../helpers/logger','1042627jaKaRy','15wskiXZ','accessibilityOptions','PACKAGE_TYPE','RZohJ','validateRerunTestList','lELTP','trace_','zmtTR','reportFinalDetectionState','RMFFb','XYTFQ','splice','testObservability','accessibility','PjqSq','hfgdA','gjrWR','finalExecution','isFalse','clearTempPWConfig','RtxXu','util','jCSjt','getProxyUrl','QFuEH','playwright-browserstack-sdk.config.js','WKKpB','--grep','end','stringify','env','Owohe','--config','join','BROWSERSTACK_RERUN_TESTS','Deleting\x20','\x0a\x0a\x20\x20\x20\x20const\x20modifyPWConfig\x20=\x20require(\x27browserstack-node-sdk\x27)._modifyPlaywright;\x0a\x0a\x20\x20\x20\x20module.exports\x20=\x20modifyPWConfig();\x0a','measureWrapper','filter','serializeToYamlString','SKypr','logLevel','XRers','homedir','5051268wBDQll','384844rZGzKw','exitCode','CFWPa','readFileSync','testContextOptions','push','getConfigPath'];a39_0x2111=function(){return _0x2a0908;};return a39_0x2111();}(function(_0x4cb9f7,_0x2f74c9){const _0xd7ccb6=a39_0x9291,_0x4bad98=_0x4cb9f7();while(!![]){try{const _0x3c5ab7=-parseInt(_0xd7ccb6(0x17a))/0x1+parseInt(_0xd7ccb6(0x1a8))/0x2+parseInt(_0xd7ccb6(0x207))/0x3+parseInt(_0xd7ccb6(0x1e1))/0x4*(parseInt(_0xd7ccb6(0x17b))/0x5)+-parseInt(_0xd7ccb6(0x1a7))/0x6+-parseInt(_0xd7ccb6(0x1ff))/0x7*(parseInt(_0xd7ccb6(0x16b))/0x8)+parseInt(_0xd7ccb6(0x204))/0x9;if(_0x3c5ab7===_0x2f74c9)break;else _0x4bad98['push'](_0x4bad98['shift']());}catch(_0xd2aa18){_0x4bad98['push'](_0x4bad98['shift']());}}}(a39_0x2111,0xbc8a8));function a39_0x9291(_0x4fdf27,_0x42cc7f){const _0x2111f5=a39_0x2111();return a39_0x9291=function(_0x929111,_0x530195){_0x929111=_0x929111-0x155;let _0x21cf58=_0x2111f5[_0x929111];return _0x21cf58;},a39_0x9291(_0x4fdf27,_0x42cc7f);}const fs=require('fs'),path=require('path'),{spawn}=require(a39_0x5b60aa(0x1d7)),{format}=require(a39_0x5b60aa(0x190)),logger=require(a39_0x5b60aa(0x179))[a39_0x5b60aa(0x1af)],{default:BrowserStackSetup}=require(a39_0x5b60aa(0x1df)),helper=require(a39_0x5b60aa(0x169)),utilities=require('../../helpers/utilities'),constants=require(a39_0x5b60aa(0x1ce)),{FRAMEWORKS}=require('../../helpers/test-observability/constants'),{getConfigLoaderPath}=require(a39_0x5b60aa(0x155)),{checkAccessibilityPlatformConfig}=require(a39_0x5b60aa(0x177)),{setAccessibilityCapabilities}=require('./accessibility-helper'),{printBuildLink}=require(a39_0x5b60aa(0x160)),TestDetails=require(a39_0x5b60aa(0x15f)),TestHubHandler=require(a39_0x5b60aa(0x166)),PerformanceTester=require(a39_0x5b60aa(0x1f4)),BrowserstackCLI=require(a39_0x5b60aa(0x1ea)),PerformanceEvents=require(a39_0x5b60aa(0x208))[a39_0x5b60aa(0x1e8)],CLIUtils=require('../v2/cliUtils'),TestInfo=require(a39_0x5b60aa(0x168)),ClientTroubleShootingService=require('../utils/clientTroubleshootingService'),getUserPlaywrightConfig=async(_0x8df82f,_0x4f5622)=>{const _0x430503=a39_0x5b60aa,_0x32bade={'hnpbD':function(_0x114ea6){return _0x114ea6();},'zmtTR':function(_0x8c9b8d,_0x2eca13){return _0x8c9b8d(_0x2eca13);},'hfgdA':function(_0x3e6cd0,_0x5b4046){return _0x3e6cd0(_0x5b4046);},'gAdDt':_0x430503(0x1f6),'sSPIP':_0x430503(0x1ef)},_0x22e93c=!helper[_0x430503(0x1b6)](_0x8df82f[_0x430503(0x15b)]),_0xbb52cb=_0x22e93c?path[_0x430503(0x1cb)](process[_0x430503(0x1eb)](),_0x8df82f[_0x430503(0x15b)]):process[_0x430503(0x1eb)](),{resolveConfigFile:_0x44c96b,resolveConfigLocation:_0x3ae6b0}=helper[_0x430503(0x1f7)][_0x430503(0x16f)](null,_0x32bade['hnpbD'](getConfigLoaderPath)),_0x278906=_0x44c96b?_0x32bade[_0x430503(0x182)](_0x44c96b,_0xbb52cb):helper[_0x430503(0x1d2)](_0x32bade[_0x430503(0x18a)](_0x3ae6b0,_0xbb52cb),[_0x32bade[_0x430503(0x1ee)]]),_0x4b6efa={};if(_0x22e93c){const _0x22eb27=_0x4f5622['findIndex'](_0x468a5d=>_0x468a5d===_0x430503(0x19b)||_0x468a5d==='-c'||_0x468a5d[_0x430503(0x156)](_0x430503(0x1ef)));_0x4f5622[_0x430503(0x186)](_0x22eb27,_0x4f5622[_0x22eb27][_0x430503(0x156)](_0x32bade['sSPIP'])?0x1:0x2);}const _0x32acbf={};return _0x32acbf[_0x430503(0x16c)]=_0x278906,_0x32acbf['config']=_0x4b6efa,_0x32acbf;},handleO11yRerun=_0x5e1049=>{const _0x596c3d=a39_0x5b60aa,_0x5aab87={};_0x5aab87['LehAB']=_0x596c3d(0x196);const _0x411ce6=_0x5aab87,_0x57e586=helper[_0x596c3d(0x200)](process[_0x596c3d(0x199)][_0x596c3d(0x175)]);if(_0x57e586){const _0x1d712c=process[_0x596c3d(0x199)][_0x596c3d(0x19d)],_0x3e0f31=[];if(helper[_0x596c3d(0x17f)](_0x1d712c)&&!helper[_0x596c3d(0x1b6)](_0x1d712c)){_0x1d712c['split'](',')['map'](_0x231e9f=>{const _0xd20d59=_0x596c3d;_0x3e0f31[_0xd20d59(0x1ad)]('('+_0x231e9f['trim']()+')');});const _0x2ade3c='^'+_0x3e0f31['join']('|')+'$';_0x5e1049[_0x596c3d(0x1ad)](_0x411ce6[_0x596c3d(0x1f5)],_0x2ade3c);}}},spawnOriginalProcess=_0x31ce30=>{const _0x8886ef=a39_0x5b60aa,_0x9e5b97={'XBOWN':function(_0x406766,_0x436fb3,_0x1304af,_0x55022d){return _0x406766(_0x436fb3,_0x1304af,_0x55022d);},'kDuLm':_0x8886ef(0x1d4),'rrTYp':'playwright','zJToo':function(_0xc32c34,_0x509bc3){return _0xc32c34===_0x509bc3;},'cjXpZ':_0x8886ef(0x1cf),'SCNFu':_0x8886ef(0x1fb)};_0x9e5b97[_0x8886ef(0x1dc)](spawn,_0x9e5b97[_0x8886ef(0x20b)],[_0x9e5b97[_0x8886ef(0x172)],..._0x31ce30[_0x8886ef(0x16e)](0x1)],{'shell':_0x9e5b97['zJToo'](process[_0x8886ef(0x162)],_0x9e5b97['cjXpZ']),'stdio':_0x9e5b97[_0x8886ef(0x1c2)],'cwd':process['cwd']()});},isTestCommand=(_0x1e8972,_0x505e96)=>{const _0x18d0cc=a39_0x5b60aa,_0x3d8459={};_0x3d8459['RZohJ']=function(_0x711132,_0xb18cce){return _0x711132>_0xb18cce;},_0x3d8459[_0x18d0cc(0x1c7)]=function(_0x4d83f2,_0xf75332){return _0x4d83f2===_0xf75332;},_0x3d8459[_0x18d0cc(0x1c0)]=_0x18d0cc(0x1d0);const _0x405fb2=_0x3d8459;if(_0x405fb2[_0x18d0cc(0x17e)](_0x505e96[_0x18d0cc(0x1e6)],0x1)&&_0x405fb2[_0x18d0cc(0x1c7)](_0x505e96[0x1],_0x405fb2[_0x18d0cc(0x1c0)]))return!![];return![];};async function run(_0x42f20c,_0x263c5f,_0x320232){const _0x3146db=a39_0x5b60aa,_0x46f720={'QFuEH':function(_0x1a9f55,_0x5aa08f){return _0x1a9f55(_0x5aa08f);},'Ahuzc':_0x3146db(0x1dd),'lELTP':_0x3146db(0x1b9),'bEGVH':function(_0x27ccc9,_0xa38c6f){return _0x27ccc9+_0xa38c6f;},'rmHpQ':_0x3146db(0x174),'qAlyp':function(_0x375a05){return _0x375a05();},'XRers':function(_0x15755e){return _0x15755e();},'KZbna':_0x3146db(0x210),'dtwwA':_0x3146db(0x1d1),'Owohe':function(_0x1b93e4,_0x2bde2c){return _0x1b93e4<_0x2bde2c;},'Ozuhe':function(_0x39e344,_0x1aa11a){return _0x39e344===_0x1aa11a;},'WgWzD':_0x3146db(0x1fc),'SKypr':_0x3146db(0x1b4),'Aeler':function(_0x220d18,_0x19a3fb){return _0x220d18>=_0x19a3fb;},'XYTFQ':_0x3146db(0x164),'PjqSq':function(_0x226ea8,_0x505f95){return _0x226ea8!=_0x505f95;},'OXWlJ':function(_0x2742b2,_0x34c564,_0x4473f8){return _0x2742b2(_0x34c564,_0x4473f8);},'jfhPC':_0x3146db(0x16d),'VNHvq':_0x3146db(0x1db),'FXXzf':_0x3146db(0x16a),'ePgGO':_0x3146db(0x194),'Rmmza':function(_0x2ffdab,_0x3f94c8){return _0x2ffdab-_0x3f94c8;},'CUlIc':_0x3146db(0x1d9),'WEyMM':function(_0x24c735,_0x3da0ca){return _0x24c735>_0x3da0ca;},'sKThv':function(_0x36413d,_0x5b08a8){return _0x36413d+_0x5b08a8;},'dtSWH':function(_0x10d00d,_0x28e5ce,_0x2f50e9,_0x17c437){return _0x10d00d(_0x28e5ce,_0x2f50e9,_0x17c437);},'dfFXB':_0x3146db(0x1d4),'yRcTN':_0x3146db(0x1c8),'XmtUk':_0x3146db(0x1d0),'jCSjt':_0x3146db(0x19b),'WKKpB':_0x3146db(0x1cf),'TeJpi':_0x3146db(0x1fb),'RMFFb':'close','SPmAv':function(_0x57b45f,_0x3bc28a){return _0x57b45f|_0x3bc28a;},'lLbSU':function(_0x9ea989,_0x12e51d){return _0x9ea989+_0x12e51d;},'ExHOn':_0x3146db(0x1bc),'CFWPa':_0x3146db(0x20d),'gjrWR':function(_0x2d9312,_0x326d2a,_0x5ee6b7){return _0x2d9312(_0x326d2a,_0x5ee6b7);},'ICoam':function(_0x3f6643,_0x4d9730){return _0x3f6643(_0x4d9730);}};try{const _0x3b54d6=path['join'](helper[_0x3146db(0x1a6)](),_0x46f720['Ahuzc']);try{fs[_0x3146db(0x1ca)](_0x3b54d6,_0x46f720[_0x3146db(0x1d5)](fs['constants'][_0x3146db(0x167)],fs[_0x3146db(0x1c5)][_0x3146db(0x20c)]));}catch(_0xce43fd){ClientTroubleShootingService['reportDotBrowserStackFolderNotAccessibleIssue']();}}catch(_0x126f80){logger[_0x3146db(0x1b3)](_0x46f720[_0x3146db(0x1c3)](_0x46f720['ExHOn'],_0x126f80));}try{const _0x5a5176=path[_0x3146db(0x19c)](helper['homedir'](),_0x46f720[_0x3146db(0x1c1)],_0x46f720[_0x3146db(0x180)]);fs['existsSync'](_0x5a5176)&&fs[_0x3146db(0x1fd)](_0x5a5176);}catch(_0x45bce0){logger['debug'](_0x46f720[_0x3146db(0x1cc)](_0x46f720[_0x3146db(0x1aa)],_0x45bce0));}if(!_0x46f720[_0x3146db(0x18b)](isTestCommand,_0x42f20c,_0x263c5f)){_0x46f720[_0x3146db(0x20f)](spawnOriginalProcess,_0x263c5f);return;}await PerformanceTester[_0x3146db(0x1a0)](PerformanceEvents[_0x3146db(0x159)],async()=>{const _0x534eca=_0x3146db,_0x15b24e={'OxHTX':_0x46f720[_0x534eca(0x1c1)],'faAEh':_0x46f720[_0x534eca(0x180)],'sglEa':function(_0x20d6d3,_0x45f912){const _0x367ac1=_0x534eca;return _0x46f720[_0x367ac1(0x1cc)](_0x20d6d3,_0x45f912);},'faACa':_0x46f720[_0x534eca(0x1d3)],'RbzHv':function(_0x1192d6){return _0x46f720['qAlyp'](_0x1192d6);},'nTToq':function(_0xa3a4a){const _0x9e6a7d=_0x534eca;return _0x46f720[_0x9e6a7d(0x1a5)](_0xa3a4a);},'BKrzw':_0x46f720[_0x534eca(0x20e)]};if(!_0x320232[_0x534eca(0x15b)]){logger[_0x534eca(0x1fa)](_0x46f720[_0x534eca(0x1c4)]);return;}await _0x320232[_0x534eca(0x1b5)](_0x42f20c),CLIUtils[_0x534eca(0x1b7)](FRAMEWORKS[_0x534eca(0x1e7)],FRAMEWORKS[_0x534eca(0x1e7)]),BrowserstackCLI['getInstance']()[_0x534eca(0x20a)](_0x320232[_0x534eca(0x15b)],_0x320232[_0x534eca(0x1be)]),await BrowserstackCLI[_0x534eca(0x163)]()[_0x534eca(0x1e2)]();for(var _0x4c489a=0x0;_0x46f720[_0x534eca(0x19a)](_0x4c489a,constants[_0x534eca(0x1e3)][_0x534eca(0x1e6)]);_0x4c489a++){var _0x3b4c92=constants[_0x534eca(0x1e3)][_0x4c489a];process['env'][_0x3b4c92]&&await ClientTroubleShootingService['reportConflictingEnvVarIssue'](_0x3b4c92);}const _0x59304a=BrowserstackCLI[_0x534eca(0x163)]()['getConfig']();!helper[_0x534eca(0x18d)](_0x59304a[_0x534eca(0x171)])&&(process[_0x534eca(0x199)][_0x534eca(0x1b2)]=!![]);_0x46f720['Ozuhe'](_0x59304a[_0x534eca(0x171)],![])&&(process['env']['BROWSERSTACK_AUTOMATION']=_0x46f720[_0x534eca(0x1bf)],_0x263c5f=_0x263c5f[_0x534eca(0x1a1)](_0x118088=>_0x118088!==_0x534eca(0x158)));const _0x2c4dc7=_0x263c5f['indexOf'](_0x46f720[_0x534eca(0x1a3)]);(_0x46f720['Aeler'](_0x2c4dc7,0x0)||_0x46f720['Ozuhe'](_0x59304a[_0x534eca(0x187)],![]))&&(process[_0x534eca(0x199)]['BROWSERSTACK_TEST_OBSERVABILITY']=_0x46f720[_0x534eca(0x1bf)],_0x263c5f=_0x263c5f[_0x534eca(0x1a1)](_0x555b78=>_0x555b78!=='--disable-test-observability'));!helper[_0x534eca(0x1b6)](_0x320232[_0x534eca(0x1be)])&&_0x320232[_0x534eca(0x1be)][_0x534eca(0x1f3)](_0x46f720[_0x534eca(0x185)])&&(process[_0x534eca(0x199)][_0x534eca(0x1b2)]=_0x320232[_0x534eca(0x1be)][_0x534eca(0x165)](_0x46f720[_0x534eca(0x185)])||!![]);_0x46f720[_0x534eca(0x189)](_0x320232['config'][_0x534eca(0x187)],null)&&!helper[_0x534eca(0x200)](process[_0x534eca(0x199)][_0x534eca(0x1c9)])&&(process[_0x534eca(0x199)]['BROWSERSTACK_TEST_OBSERVABILITY']=process[_0x534eca(0x199)][_0x534eca(0x1c9)]||_0x320232['config'][_0x534eca(0x187)]);const _0x814471=!helper[_0x534eca(0x18d)](process[_0x534eca(0x199)][_0x534eca(0x1c9)]);_0x320232['config'][_0x534eca(0x17c)]&&(process['env']['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON[_0x534eca(0x198)](_0x320232[_0x534eca(0x15b)][_0x534eca(0x17c)]));let _0x4a1886=![];_0x320232['config'][_0x534eca(0x188)]&&(_0x4a1886=!![],process['env'][_0x534eca(0x1e9)]=_0x320232[_0x534eca(0x15b)][_0x534eca(0x188)]);const _0x49ae54=_0x263c5f[_0x534eca(0x1f9)](),_0x2fbe5e=await _0x46f720[_0x534eca(0x157)](getUserPlaywrightConfig,_0x42f20c,_0x263c5f);if(helper[_0x534eca(0x1b6)](_0x2fbe5e)){_0x46f720[_0x534eca(0x193)](spawnOriginalProcess,_0x49ae54);return;}const _0x283615=_0x2fbe5e[_0x534eca(0x16c)]?path[_0x534eca(0x1c6)](_0x2fbe5e[_0x534eca(0x16c)]):process[_0x534eca(0x1eb)]();process[_0x534eca(0x199)][_0x534eca(0x1bb)]=_0x283615,await PerformanceTester['measureWrapper'](PerformanceEvents['SDK_POST_INITIALIZE'],async()=>{const _0x3915e4=_0x534eca;!BrowserstackCLI[_0x3915e4(0x163)]()['isRunning']()&&await TestHubHandler['launchBuild'](FRAMEWORKS[_0x3915e4(0x1e7)],_0x320232),_0x814471&&_0x46f720[_0x3915e4(0x193)](handleO11yRerun,_0x263c5f);})();if(!BrowserstackCLI[_0x534eca(0x163)]()['isRunning']()){let _0x3c35b4=_0x46f720[_0x534eca(0x1ec)](process[_0x534eca(0x199)][_0x534eca(0x1e9)],_0x46f720[_0x534eca(0x1e0)]);_0x3c35b4=_0x3c35b4||_0x46f720[_0x534eca(0x193)](checkAccessibilityPlatformConfig,_0x320232['config']),process['env'][_0x534eca(0x1e9)]=_0x3c35b4,_0x3c35b4&&_0x46f720[_0x534eca(0x193)](setAccessibilityCapabilities,_0x320232[_0x534eca(0x15b)]);}const _0x263eb9=path[_0x534eca(0x19c)](_0x2fbe5e[_0x534eca(0x16c)]?path['dirname'](_0x2fbe5e[_0x534eca(0x16c)]):process[_0x534eca(0x1eb)](),_0x46f720[_0x534eca(0x1e4)]);fs[_0x534eca(0x1f1)](_0x263eb9,helper[_0x534eca(0x1a2)](_0x320232['config'])),process[_0x534eca(0x199)][_0x534eca(0x1f8)]=_0x263eb9,helper[_0x534eca(0x18e)]();let _0x1f42b5='';_0x46f720[_0x534eca(0x1ec)](helper['getPackageType'](),constants[_0x534eca(0x17d)]['MODULE'])?_0x1f42b5=_0x46f720['FXXzf']:_0x1f42b5=_0x46f720['ePgGO'];let _0x350ce9='';if(helper['isTypescriptProject'](_0x2fbe5e[_0x534eca(0x16c)])){_0x350ce9='\x0a\x0a\x20\x20\x20\x20import\x20pkg\x20from\x20\x27browserstack-node-sdk\x27;\x0a\x20\x20\x20\x20export\x20default\x20pkg._modifyPlaywright()\x0a';const _0x46d433=_0x1f42b5['split']('.');_0x46d433[_0x46f720[_0x534eca(0x211)](_0x46d433['length'],0x1)]='ts',_0x1f42b5=_0x46d433[_0x534eca(0x19c)]('.'),logger[_0x534eca(0x1b3)](_0x46f720[_0x534eca(0x1cc)](_0x46f720[_0x534eca(0x203)],_0x1f42b5));}else _0x350ce9=_0x534eca(0x19f);const _0x33a9ba=path[_0x534eca(0x19c)](_0x2fbe5e[_0x534eca(0x16c)]?path[_0x534eca(0x1c6)](_0x2fbe5e['path']):process[_0x534eca(0x1eb)](),_0x1f42b5);let _0xdd3cff=_0x2fbe5e[_0x534eca(0x16c)]?_0x2fbe5e[_0x534eca(0x16c)]:'';_0xdd3cff=_0x46f720[_0x534eca(0x206)](_0xdd3cff[_0x534eca(0x1e6)],0x0)?path[_0x534eca(0x1cb)](_0xdd3cff):'',process['env'][_0x534eca(0x170)]=_0xdd3cff;const _0x248212=helper[_0x534eca(0x192)](_0x320232[_0x534eca(0x15b)]),_0x3fa2fd=helper[_0x534eca(0x176)](_0x320232[_0x534eca(0x15b)]);logger[_0x534eca(0x1b3)]('Proxy\x20url\x20:\x20'+_0x248212),logger['debug'](_0x534eca(0x202)+_0x3fa2fd);_0x248212&&(_0x350ce9=_0x46f720[_0x534eca(0x1d6)](_0x534eca(0x1de)+_0x248212+_0x534eca(0x1d8)+_0x3fa2fd+_0x534eca(0x1f2),_0x350ce9));helper[_0x534eca(0x173)]({},_0x263c5f),fs[_0x534eca(0x1f1)](_0x33a9ba,_0x350ce9),PerformanceTester[_0x534eca(0x197)](PerformanceEvents['SDK_SETUP']);const _0x3f6b7d=_0x46f720[_0x534eca(0x1fe)](spawn,_0x46f720['dfFXB'],[_0x46f720[_0x534eca(0x1bd)],_0x46f720['XmtUk'],_0x46f720[_0x534eca(0x191)],_0x46f720[_0x534eca(0x1ec)](process['platform'],_0x46f720[_0x534eca(0x195)])?'\x22'+_0x33a9ba+'\x22':_0x33a9ba,..._0x263c5f['slice'](0x2)],{'shell':_0x46f720[_0x534eca(0x1ec)](process['platform'],_0x46f720[_0x534eca(0x195)]),'stdio':_0x46f720[_0x534eca(0x1b1)],'cwd':process[_0x534eca(0x1eb)](),'env':Object['assign']({},process[_0x534eca(0x199)],{'BROWSERSTACK_CONFIG_FILE_PATH':helper[_0x534eca(0x1ae)](_0x42f20c),'BROWSERSTACK_SKIP_SESSION_STATUS':_0x320232[_0x534eca(0x15b)][_0x534eca(0x1ac)]['skipSessionStatus'],'BROWSERSTACK_SKIP_SESSION_NAME':_0x320232['config'][_0x534eca(0x1ac)][_0x534eca(0x1ba)],'BROWSERSTACK_LOG_LEVEL':_0x320232[_0x534eca(0x15b)][_0x534eca(0x1a4)]})}),_0x2b563a=()=>{const _0x532e80=_0x534eca;try{const _0x1b5a66=path[_0x532e80(0x19c)](helper[_0x532e80(0x1a6)](),_0x15b24e[_0x532e80(0x1b0)],_0x15b24e['faAEh']);if(fs['existsSync'](_0x1b5a66)){let _0x4862ad=fs[_0x532e80(0x1ab)](_0x1b5a66);_0x4862ad=JSON[_0x532e80(0x201)](_0x4862ad),_0x320232[_0x532e80(0x15d)]=_0x4862ad,fs['unlinkSync'](_0x1b5a66);}}catch(_0x3a7220){logger[_0x532e80(0x1b3)](_0x15b24e[_0x532e80(0x205)](_0x15b24e[_0x532e80(0x209)],_0x3a7220));}};_0x3f6b7d['on'](_0x46f720[_0x534eca(0x184)],async _0x392a0c=>{const _0x260951=_0x534eca,_0x3eed8c={};_0x3eed8c[_0x260951(0x18f)]=_0x15b24e[_0x260951(0x1b0)];const _0x34f7b0=_0x3eed8c;try{PerformanceTester[_0x260951(0x15a)](PerformanceEvents['SDK_CLEANUP']),_0x15b24e[_0x260951(0x178)](_0x2b563a),await TestHubHandler[_0x260951(0x1ed)](),await ClientTroubleShootingService[_0x260951(0x183)](),await BrowserstackCLI[_0x260951(0x163)]()[_0x260951(0x1ed)](),TestDetails[_0x260951(0x15e)](),_0x15b24e[_0x260951(0x1da)](printBuildLink),await utilities[_0x260951(0x18c)](_0x320232),process[_0x260951(0x1a9)]=_0x392a0c,logger['debug'](_0x260951(0x1b8)+_0x392a0c),logger[_0x260951(0x1f0)](_0x260951(0x19e)+_0x33a9ba),fs[_0x260951(0x1fd)](_0x33a9ba);fs[_0x260951(0x161)](_0x263eb9)&&(logger[_0x260951(0x1b3)]('Deleting\x20'+_0x263eb9),fs[_0x260951(0x1fd)](_0x263eb9));const _0x5dafa3=fs[_0x260951(0x15c)](path[_0x260951(0x19c)](helper[_0x260951(0x1a6)](),_0x15b24e[_0x260951(0x1b0)]))['filter'](_0x4b2372=>_0x4b2372['startsWith'](_0x260951(0x181)));_0x5dafa3[_0x260951(0x1e5)](_0x10806b=>{const _0x4ea820=_0x260951;fs['unlinkSync'](path[_0x4ea820(0x19c)](helper['homedir'](),_0x34f7b0[_0x4ea820(0x18f)],_0x10806b));});}catch(_0x22bf18){logger[_0x260951(0x1b3)](_0x15b24e[_0x260951(0x205)](_0x15b24e['BKrzw'],_0x22bf18));}});})();}module[a39_0x5b60aa(0x1cd)]=run;