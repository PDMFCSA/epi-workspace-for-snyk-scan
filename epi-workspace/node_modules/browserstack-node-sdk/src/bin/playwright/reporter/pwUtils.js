const a45_0x513fe7=a45_0x5e3e;(function(_0x4e1c2c,_0x24356d){const _0x4b0929=a45_0x5e3e,_0x2a622e=_0x4e1c2c();while(!![]){try{const _0x14ecef=-parseInt(_0x4b0929(0xbf))/0x1+-parseInt(_0x4b0929(0x9b))/0x2+parseInt(_0x4b0929(0xb2))/0x3+parseInt(_0x4b0929(0xd2))/0x4*(-parseInt(_0x4b0929(0xe0))/0x5)+parseInt(_0x4b0929(0x8e))/0x6*(-parseInt(_0x4b0929(0x9f))/0x7)+parseInt(_0x4b0929(0x100))/0x8+parseInt(_0x4b0929(0x8d))/0x9;if(_0x14ecef===_0x24356d)break;else _0x2a622e['push'](_0x2a622e['shift']());}catch(_0x1cea82){_0x2a622e['push'](_0x2a622e['shift']());}}}(a45_0x4488,0xea6ff));const {debug,getFrameworkVersion,removeAnsiColors,failureData}=require(a45_0x513fe7(0x110)),PerformanceTester=require('../../../helpers/performance/performance-tester'),fs=require('fs'),{FRAMEWORKS,MAX_ALLOWED_PLAYWRIGHT_TRACE_SIZE}=require('../../../helpers/test-observability/constants'),helper=require(a45_0x513fe7(0x90)),path=require('path'),logger=require(a45_0x513fe7(0x114))[a45_0x513fe7(0x117)],SessionHandler=require(a45_0x513fe7(0xc0)),TestDetails=require('./test-details'),util=require(a45_0x513fe7(0x7b)),TestInfo=require(a45_0x513fe7(0x81));let BrowserstackCLIInstance=null;function getBrowserstackCLI(){const _0x4e8970=a45_0x513fe7,_0x4bba70={'fJjll':function(_0x3d2bda,_0x5c9634){return _0x3d2bda(_0x5c9634);},'UAgNm':_0x4e8970(0xc6)};return!BrowserstackCLIInstance&&(BrowserstackCLIInstance=_0x4bba70[_0x4e8970(0x93)](require,_0x4bba70[_0x4e8970(0x10e)])),BrowserstackCLIInstance;}function a45_0x5e3e(_0x17005a,_0x268969){const _0x448889=a45_0x4488();return a45_0x5e3e=function(_0x5e3e91,_0x5c7df2){_0x5e3e91=_0x5e3e91-0x70;let _0x301d78=_0x448889[_0x5e3e91];return _0x301d78;},a45_0x5e3e(_0x17005a,_0x268969);}function a45_0x4488(){const _0x303c09=['toString','TEST_LOG','readdirSync','TEST_ATTACHMENT','findNestedKey','path','zXTXl','lIpUz','KGMDh','createReadStream','ykpXV','debug','grIMp','Ltaso','length','ykkgL','util','kxxdY','1.42.0','Percentage\x20of\x20increased\x20time\x20is\x20','GGSFy','@playwright/test/lib/transform/transform.js','../../v2/TestInfo','beforeWorkerHook','Checking\x20if\x20trace\x20is\x20enabled\x20for\x20test:\x20','WJHdO','runner/projectUtils.js','.json','RPSDr','UaoYa','stopAndGenerate','QfCgi','sendTestLog','WRxFv','36766998ncJjKs','3098622luawOO','afterTestHook','../../../helpers/helper','sendEventData','playwright/lib/transform/transform.js','fJjll','playwright','testUId','wHHcL','VqhhZ','oEHYo','nBYLZ','NHzzR','3299672RLrokr','pesyk','filter','join','7IwJDyU','toISOString','Uqetv','onStepEnd','beforeTestHook','getFailureData','validateFilePath','extname','sendTraceZip','1.35.0','endsWith','qmitT','VcbBY','eIvia','test','PLAYWRIGHT','filePath','startsWith','Found\x20key:\x20','2267235UPemkg','\x20in\x20arguments','calculateTimesFromMultipleFiles','doo11ySync','Total\x20duration\x20for\x20whole\x20build\x20is\x20','getProjectUtilsPath','getForkProcessPath','_projectId','@playwright/test/lib/common/transform.js','@playwright/test/lib/common/configLoader.js','toLowerCase','kYBKA','resolve','1622220Xmnklt','../../../helpers/test-observability/sessionHandler','trace','TaDWg','KFrTv','nNREN','KIcmY','../../v2/browserstackCLI','processPageScreenshot','guEoR','getTestRunIdentifier','DmKPr','Test\x20timeout\x20of','gtWrm','onStepBegin','GDTMW','ERROR','uploadTraceZip','LMqfB','2939484EsCpiT','onBegin','requestSpyCallback','isRunning','Invalid\x20file\x20format.\x20Expected\x20a\x20.zip\x20file,\x20but\x20got:\x20','tags','AjRwa','map','size','getTestTags','eNeRa','performance-reporter.html','find','sendSessionDetails','5GMpvYe','\x20in\x20attachments','Arguments','hciqF','error','lib','Searching\x20for\x20key:\x20','FOfuz','GEaUo','@playwright/test','kvGtB','cywPp','getInstance','env','message','jEjkw','addTraceFilePath','SfGPi','lwtOs','START_TIME','getPlaywrightLibPath','EWGNF','QgUNv','onTestBegin','DFUCv','aGzAH','Total\x20time\x20taken\x20by\x20O11y\x20is\x20','format','kwcoK','oaxCs','getLoadUtilsPath','substr','5141216ScgcOJ','compareVersions','dRMGv','prototype','getTestIdentifier','zRHMB','gAzcf','calculatePerformance','GXHOF','stack','Error\x20in\x20sending\x20trace\x20file:\x20%s','performance-report-worker-','includes','attachments','UAgNm','getTime','../../../helpers/test-observability/utils','existsSync','1.38.0','call','../../../helpers/logger','sPbtf','Xzgzv','winstonLogger','title'];a45_0x4488=function(){return _0x303c09;};return a45_0x4488();}const getTagsFromTitle=_0x2a430e=>{return _0x2a430e['match'](/@(\w+)/g)?.['map'](_0x4ab9b8=>_0x4ab9b8['slice'](0x1))||[];};exports[a45_0x513fe7(0xdb)]=_0x528667=>{const _0x15c03d=a45_0x513fe7,_0x1fb5b2={'RPSDr':function(_0x1533a1,_0x401169){return _0x1533a1(_0x401169);}};if(_0x528667[_0x15c03d(0xd7)])return _0x528667['tags'][_0x15c03d(0xd9)](_0x484553=>_0x484553[_0x15c03d(0xb0)]('@')?_0x484553[_0x15c03d(0xff)](0x1):_0x484553);return _0x1fb5b2[_0x15c03d(0x87)](getTagsFromTitle,_0x528667[_0x15c03d(0x118)]);},exports[a45_0x513fe7(0x107)]=async()=>{const _0x2fb1fb=a45_0x513fe7,_0xa23255={'DFUCv':function(_0x2a2abc,_0x5922e6){return _0x2a2abc-_0x5922e6;},'guEoR':_0x2fb1fb(0xdd),'kvGtB':_0x2fb1fb(0xd3),'wHHcL':'endSession','gmTFN':_0x2fb1fb(0xf7),'VqhhZ':'onTestEnd','TaDWg':_0x2fb1fb(0xcd),'jEjkw':_0x2fb1fb(0xa2),'Ltaso':_0x2fb1fb(0x82),'kwcoK':'afterWorkerHook','NHzzR':_0x2fb1fb(0xa3),'QgUNv':_0x2fb1fb(0x8f),'aGzAH':_0x2fb1fb(0xb5),'LMqfB':_0x2fb1fb(0xc7),'gtWrm':_0x2fb1fb(0xdf),'opkMT':'setupBrowserDetails','oaxCs':_0x2fb1fb(0xd4),'qmitT':_0x2fb1fb(0x8b),'lwtOs':function(_0x1119c8,_0x53843c){return _0x1119c8(_0x53843c);},'Uqetv':function(_0x5037f0,_0x4a8858){return _0x5037f0/_0x4a8858;},'UaoYa':function(_0x54cdcc,_0x4c4e20){return _0x54cdcc+_0x4c4e20;},'oEHYo':function(_0x20f2d9,_0x19cfbe){return _0x20f2d9*_0x19cfbe;},'KFrTv':function(_0x111583,_0x28733b){return _0x111583+_0x28733b;}};if(!process[_0x2fb1fb(0xed)][_0x2fb1fb(0xf3)])return;const _0x58cb15=_0xa23255[_0x2fb1fb(0xf8)](new Date()[_0x2fb1fb(0x10f)](),new Date(process[_0x2fb1fb(0xed)][_0x2fb1fb(0xf3)])[_0x2fb1fb(0x10f)]()),_0x1365d0=await PerformanceTester[_0x2fb1fb(0x89)](_0xa23255[_0x2fb1fb(0xc8)],[_0xa23255[_0x2fb1fb(0xea)],_0xa23255[_0x2fb1fb(0x96)],_0xa23255['gmTFN'],_0xa23255[_0x2fb1fb(0x97)],_0xa23255[_0x2fb1fb(0xc2)],_0xa23255[_0x2fb1fb(0xef)]]),_0x513c93=fs[_0x2fb1fb(0x11b)]('.'),_0x1ac31e=_0x513c93[_0x2fb1fb(0x9d)](_0x5a29b6=>_0x5a29b6[_0x2fb1fb(0xb0)](_0x2fb1fb(0x10b))&&_0x5a29b6[_0x2fb1fb(0xa9)](_0x2fb1fb(0x86))),_0x560ada=await PerformanceTester[_0x2fb1fb(0xb4)](_0x1ac31e,[_0xa23255[_0x2fb1fb(0x78)],_0xa23255[_0x2fb1fb(0xfc)],_0xa23255[_0x2fb1fb(0x9a)],_0xa23255[_0x2fb1fb(0xf6)],_0xa23255[_0x2fb1fb(0xf9)],_0xa23255[_0x2fb1fb(0xd1)],_0xa23255[_0x2fb1fb(0xcc)],_0xa23255['opkMT'],_0xa23255[_0x2fb1fb(0xfd)],_0xa23255[_0x2fb1fb(0xaa)]]);_0xa23255[_0x2fb1fb(0xf2)](debug,_0x2fb1fb(0xb6)+_0xa23255['Uqetv'](_0x58cb15,0x3e8)+'\x20s'),_0xa23255[_0x2fb1fb(0xf2)](debug,_0x2fb1fb(0xfa)+_0xa23255[_0x2fb1fb(0x88)](_0x560ada,_0x1365d0)),_0xa23255['lwtOs'](debug,_0x2fb1fb(0x7e)+_0xa23255[_0x2fb1fb(0x98)](_0xa23255[_0x2fb1fb(0xa1)](_0xa23255[_0x2fb1fb(0xc3)](_0x560ada,_0x1365d0),_0x58cb15),0x64));},exports['getTransformPath']=()=>{const _0x57c4c9=a45_0x513fe7,_0x220359={'uzetJ':function(_0x4d0253,_0x4a560d){return _0x4d0253(_0x4a560d);},'rEEuM':function(_0x41ebd3,_0x55cbfc){return _0x41ebd3>=_0x55cbfc;},'Xzgzv':_0x57c4c9(0x112),'CZwNW':_0x57c4c9(0x92),'czZwS':_0x57c4c9(0x94),'grIMp':function(_0x5bb7b1,_0x233060){return _0x5bb7b1>=_0x233060;},'sPbtf':_0x57c4c9(0xa8),'dRMGv':_0x57c4c9(0x80),'WJHdO':_0x57c4c9(0xe9),'kYBKA':_0x57c4c9(0xba)},_0x1e03de=_0x220359['uzetJ'](getFrameworkVersion,FRAMEWORKS['PLAYWRIGHT']);if(_0x220359['rEEuM'](helper['compareVersions'](_0x1e03de,_0x220359[_0x57c4c9(0x116)]),0x0))return[_0x220359['CZwNW'],_0x220359['czZwS']];if(_0x220359[_0x57c4c9(0x77)](helper['compareVersions'](_0x1e03de,_0x220359[_0x57c4c9(0x115)]),0x0))return[_0x220359[_0x57c4c9(0x102)],_0x220359[_0x57c4c9(0x84)]];return[_0x220359[_0x57c4c9(0xbd)],_0x220359[_0x57c4c9(0x84)]];},exports['getConfigLoaderPath']=()=>{const _0x3945ec=a45_0x513fe7,_0x221746={'ykpXV':function(_0x247091,_0x4efa13){return _0x247091(_0x4efa13);},'zRHMB':function(_0x5ce4ab,_0x3ce953){return _0x5ce4ab>=_0x3ce953;},'nNREN':_0x3945ec(0x112),'FSXCS':'playwright/lib/common/configLoader.js','KwBKZ':'playwright','GGSFy':_0x3945ec(0xbb),'cgqRe':_0x3945ec(0xe9)},_0x21d49d=_0x221746[_0x3945ec(0x75)](getFrameworkVersion,FRAMEWORKS['PLAYWRIGHT']);if(_0x221746[_0x3945ec(0x105)](helper[_0x3945ec(0x101)](_0x21d49d,_0x221746[_0x3945ec(0xc4)]),0x0))return[_0x221746['FSXCS'],_0x221746['KwBKZ']];return[_0x221746[_0x3945ec(0x7f)],_0x221746['cgqRe']];},exports[a45_0x513fe7(0xfe)]=()=>{const _0x47138e=a45_0x513fe7,_0xb52d91={};_0xb52d91['hciqF']='runner/loadUtils.js';const _0x247ba1=_0xb52d91;return helper[_0x47138e(0xf4)](_0x247ba1[_0x47138e(0xe3)]);},exports[a45_0x513fe7(0xb7)]=()=>{const _0x49b27b=a45_0x513fe7,_0x4ef5de={};_0x4ef5de[_0x49b27b(0xac)]=_0x49b27b(0x85);const _0x57969c=_0x4ef5de;return helper[_0x49b27b(0xf4)](_0x57969c[_0x49b27b(0xac)]);},exports[a45_0x513fe7(0xb8)]=()=>{const _0x59d409=a45_0x513fe7,_0xdadc05={'ilKAn':function(_0x25ec7a,_0x1a8886){return _0x25ec7a(_0x1a8886);},'SfGPi':function(_0x19c168,_0x155b46){return _0x19c168>=_0x155b46;},'AjRwa':_0x59d409(0x112),'QHDvL':_0x59d409(0xe5),'kxxdY':'common','eNeRa':'process.js','WRxFv':'test'},_0x4f6667=_0xdadc05['ilKAn'](getFrameworkVersion,FRAMEWORKS[_0x59d409(0xae)]);if(_0xdadc05[_0x59d409(0xf1)](helper[_0x59d409(0x101)](_0x4f6667,_0xdadc05[_0x59d409(0xd8)]),0x0))return path['join'](_0xdadc05['QHDvL'],_0xdadc05[_0x59d409(0x7c)],_0xdadc05[_0x59d409(0xdc)]);return path[_0x59d409(0x9e)](_0xdadc05[_0x59d409(0x8c)],_0xdadc05['QHDvL'],_0xdadc05['kxxdY'],_0xdadc05[_0x59d409(0xdc)]);},exports[a45_0x513fe7(0xa4)]=(_0x42cf48,{test_run_uuid:_0x3d3004})=>{const _0x513275=a45_0x513fe7,_0x85d355={'NIzCA':_0x513275(0xcf),'RiiMI':_0x513275(0x11a),'gAzcf':function(_0x1dd36c,_0xca45b3){return _0x1dd36c<=_0xca45b3;},'ykkgL':function(_0x22f8db,_0x5222df){return _0x22f8db(_0x5222df);},'GDTMW':_0x513275(0xcb),'GEaUo':function(_0x2eea53,_0x227d0b){return _0x2eea53>=_0x227d0b;},'FOfuz':_0x513275(0x7d),'lnuvn':function(_0x1b5d87,_0x3e22b6){return _0x1b5d87>_0x3e22b6;},'KIcmY':function(_0x3c2e5a,_0x423cb6){return _0x3c2e5a(_0x423cb6);},'nBYLZ':function(_0x3bcbc3,_0x5761f4,_0x484316){return _0x3bcbc3(_0x5761f4,_0x484316);},'MYsIK':_0x513275(0xad)};if(!_0x42cf48||_0x85d355[_0x513275(0x106)](_0x42cf48[_0x513275(0x79)],0x0))return[];const _0x272a10=_0x85d355[_0x513275(0x7a)](removeAnsiColors,_0x42cf48[0x0][_0x513275(0xee)]);if(_0x272a10[_0x513275(0xb0)](_0x85d355[_0x513275(0xce)])){const _0xe48216=_0x42cf48[0x0],_0x45a1db=_0x85d355[_0x513275(0x7a)](getFrameworkVersion,FRAMEWORKS['PLAYWRIGHT']);if((!_0xe48216[_0x513275(0x109)]||_0x85d355[_0x513275(0xe8)](_0x45a1db,_0x85d355[_0x513275(0xe7)]))&&_0x85d355['lnuvn'](_0x42cf48['length'],0x1))return{'failureData':[{'backtrace':[_0x272a10,_0x85d355[_0x513275(0xc5)](removeAnsiColors,_0x42cf48[0x1][_0x513275(0x109)])]}],'logs':_0x42cf48['slice'](0x2)['map'](_0x25d656=>{const _0x40887c=_0x513275;return{'timestamp':new Date()[_0x40887c(0xa0)](),'level':_0x85d355['NIzCA'],'message':''+_0x25d656[_0x40887c(0xee)],'kind':_0x85d355['RiiMI'],'http_response':{},'test_run_uuid':_0x3d3004};})};}return{'failureData':_0x85d355[_0x513275(0x99)](failureData,_0x42cf48,_0x85d355['MYsIK']),'logs':[]};},exports[a45_0x513fe7(0xa5)]=_0x19db02=>{const _0x568134=a45_0x513fe7,_0x51417b={};_0x51417b[_0x568134(0x72)]=function(_0x224e03,_0x195e60){return _0x224e03!==_0x195e60;},_0x51417b['zXTXl']='.zip',_0x51417b['rAAiC']=function(_0x3231d4,_0x1a6076){return _0x3231d4>_0x1a6076;};const _0x121ce8=_0x51417b;if(_0x19db02&&fs[_0x568134(0x111)](_0x19db02)){if(_0x121ce8[_0x568134(0x72)](path[_0x568134(0xa6)](_0x19db02)[_0x568134(0xbc)](),_0x121ce8[_0x568134(0x71)]))return logger[_0x568134(0xe4)](_0x568134(0xd6)+_0x19db02),![];const _0x22f6f1=fs['statSync'](_0x19db02)[_0x568134(0xda)];if(_0x121ce8['rAAiC'](_0x22f6f1,MAX_ALLOWED_PLAYWRIGHT_TRACE_SIZE))return logger[_0x568134(0xe4)]('Trace\x20file\x20size\x20exceeds\x20100MB:\x20'+_0x22f6f1+'\x20bytes'),![];return!![];}return![];},exports[a45_0x513fe7(0x11d)]=(_0xafb003,_0x3696f7)=>{const _0x4ebf20=a45_0x513fe7,_0x5ea78c={};_0x5ea78c['cywPp']=_0x4ebf20(0xe2);const _0x7b4bf1=_0x5ea78c;logger[_0x4ebf20(0x76)](_0x4ebf20(0xe6)+_0x3696f7);if(_0xafb003&&_0xafb003['attachments']){const _0x110b69=_0xafb003[_0x4ebf20(0x10d)][_0x4ebf20(0xde)](_0x47bf8b=>_0x47bf8b['name']===_0x4ebf20(0xc1));if(_0x110b69)return logger[_0x4ebf20(0x76)](_0x4ebf20(0xb1)+_0x3696f7+_0x4ebf20(0xe1)),_0x110b69[_0x3696f7];}else{if(_0xafb003&&Object[_0x4ebf20(0x103)][_0x4ebf20(0x119)][_0x4ebf20(0x113)](_0xafb003)[_0x4ebf20(0x10c)](_0x7b4bf1[_0x4ebf20(0xeb)]))for(const _0x1562ba of _0xafb003){if(_0x1562ba[_0x3696f7])return logger[_0x4ebf20(0x76)]('Found\x20key:\x20'+_0x3696f7+_0x4ebf20(0xb3)),_0x1562ba[_0x3696f7];}};return'';},exports[a45_0x513fe7(0xd0)]=async(_0x3b2549,_0x87dcc7)=>{const _0x597daf=a45_0x513fe7,_0x5c575f={};_0x5c575f[_0x597daf(0x73)]='LogCreated',_0x5c575f[_0x597daf(0x9c)]=_0x597daf(0x11c),_0x5c575f['DmKPr']='sendTraceZip',_0x5c575f[_0x597daf(0x108)]=_0x597daf(0x10a);const _0x144d64=_0x5c575f;try{const _0x187698={'event_type':_0x144d64['KGMDh'],'logs':[{'data':_0x3b2549?fs[_0x597daf(0x74)](_0x3b2549):'','test_run_uuid':_0x87dcc7,'kind':_0x144d64['pesyk'],'fileName':_0x3b2549?path['basename'](_0x3b2549):''}]};return await SessionHandler[_0x597daf(0x91)](_0x187698,0x0,_0x144d64[_0x597daf(0xca)]);}catch(_0x4b5668){logger[_0x597daf(0xe4)](util['format'](_0x144d64[_0x597daf(0x108)],_0x4b5668));}},exports[a45_0x513fe7(0xa7)]=async(_0x46d777,_0xe4e850)=>{const _0x45f023=a45_0x513fe7,_0x1afd4d={'SMkJd':_0x45f023(0x70),'mlWHl':'Trace\x20enabled','EWGNF':function(_0x1c2800){return _0x1c2800();},'GbeTZ':_0x45f023(0x10a)};try{logger[_0x45f023(0x76)](_0x45f023(0x83)+_0xe4e850);let _0x16101c=await exports['findNestedKey'](_0x46d777,_0x1afd4d['SMkJd']);if(exports[_0x45f023(0xa5)](_0x16101c)){logger[_0x45f023(0x76)](_0x1afd4d['mlWHl']),_0x16101c=path[_0x45f023(0xbe)](_0x16101c);const _0x22b823={};_0x22b823[_0x45f023(0x95)]=_0xe4e850,_0x22b823[_0x45f023(0xaf)]=_0x16101c;const _0x4c0a8a=_0x22b823;_0x1afd4d[_0x45f023(0xf5)](getBrowserstackCLI)[_0x45f023(0xec)]()[_0x45f023(0xd5)]()?TestInfo['addTraceFilePath'](_0x4c0a8a):TestDetails[_0x45f023(0xf0)](_0x4c0a8a);};}catch(_0x31b5e8){logger['error'](util[_0x45f023(0xfb)](_0x1afd4d['GbeTZ'],_0x31b5e8));}},exports[a45_0x513fe7(0x104)]=_0x4079d1=>{const _0x2a2587=a45_0x513fe7,_0x266b4e={};_0x266b4e[_0x2a2587(0x8a)]=function(_0x39e119,_0x2b0f2f){return _0x39e119+_0x2b0f2f;};const _0x4ab6d8=_0x266b4e;return _0x4ab6d8[_0x2a2587(0x8a)](_0x4ab6d8[_0x2a2587(0x8a)](_0x4079d1[_0x2a2587(0xb9)],'-'),_0x4079d1['id']);},exports[a45_0x513fe7(0xc9)]=(_0x4ae2cd,_0x65013)=>{const _0x41ceeb=a45_0x513fe7,_0x283b8e={};_0x283b8e[_0x41ceeb(0xab)]=function(_0x1cebdb,_0x15aa5e){return _0x1cebdb+_0x15aa5e;},_0x283b8e['IHhyb']=function(_0x555f1a,_0x4dd6ea){return _0x555f1a+_0x4dd6ea;};const _0x4b0f4c=_0x283b8e;return _0x4b0f4c[_0x41ceeb(0xab)](_0x4b0f4c['IHhyb'](exports['getTestIdentifier'](_0x4ae2cd),'-'),_0x65013);};