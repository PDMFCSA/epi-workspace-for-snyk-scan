#!/usr/bin/env node
'use strict';const a27_0x4c02eb=a27_0x4b49;(function(_0x63800,_0x1093af){const _0x41d713=a27_0x4b49,_0x4b41d6=_0x63800();while(!![]){try{const _0x27a76c=-parseInt(_0x41d713(0x1eb))/0x1*(-parseInt(_0x41d713(0x1d0))/0x2)+-parseInt(_0x41d713(0x1be))/0x3*(-parseInt(_0x41d713(0x1d6))/0x4)+parseInt(_0x41d713(0x1c3))/0x5+-parseInt(_0x41d713(0x1d4))/0x6+parseInt(_0x41d713(0x1ef))/0x7+parseInt(_0x41d713(0x1b9))/0x8*(-parseInt(_0x41d713(0x1ee))/0x9)+-parseInt(_0x41d713(0x1ca))/0xa;if(_0x27a76c===_0x1093af)break;else _0x4b41d6['push'](_0x4b41d6['shift']());}catch(_0x78d2df){_0x4b41d6['push'](_0x4b41d6['shift']());}}}(a27_0x5d64,0xd7a84));function a27_0x4b49(_0x557155,_0x5a6b45){const _0x5d6479=a27_0x5d64();return a27_0x4b49=function(_0x4b4929,_0x168c2c){_0x4b4929=_0x4b4929-0x1b9;let _0x16db8e=_0x5d6479[_0x4b4929];return _0x16db8e;},a27_0x4b49(_0x557155,_0x5a6b45);}function a27_0x5d64(){const _0x451841=['NqsGL','checkAndUpdateCli',',\x20forwarding\x20to\x20child\x20process...','IlRQJ','SIGTERM','nelui','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','Error\x20Details:\x20','getExistingCliPath','env','225937NaQmqK','booTB','debug','53775IjMJEK','9435734Wpcfkx','BROWSERSTACK_ACCESSKEY','BROWSERSTACK_USER','rkMLO','userName','BROWSERSTACK_ACCESS_KEY','MSezM','slice','getCliDir','\x20exited\x20with\x20code\x20','CPBOp','Spawning:\x20','1584dHXKoi','exit','SIGHUP','vJNqF','../../helpers/logger','132693qcRNfQ','Executing\x20load\x20test\x20with\x20arguments:\x20','error','Waiting\x20for\x20child\x20process\x20to\x20exit...','readConfig','6626410VAivuO','ocvwY','stringify','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','../../helpers/helper','load','fjjiD','4022170sihPlx','accessKey','Received\x20','RdTsB','kill','argv','6crtFXx','Failed\x20initiating\x20load\x20test:\x20','join','inherit','8213982ZFLPZq','message','44yLuKWw','winstonLogger','IILeF','stack','child_process','path','close','Error\x20details:\x20','../v2/cliUtils','BxjNu','./loadUtils'];a27_0x5d64=function(){return _0x451841;};return a27_0x5d64();}const {spawn}=require(a27_0x4c02eb(0x1da)),path=require(a27_0x4c02eb(0x1db)),helper=require(a27_0x4c02eb(0x1c7)),CLIUtils=require(a27_0x4c02eb(0x1de)),{getLoadConfigPath,sleep}=require(a27_0x4c02eb(0x1e0)),logger=require(a27_0x4c02eb(0x1bd))[a27_0x4c02eb(0x1d7)];async function executeLoadTest(_0x15acb4){const _0x44d3a4=a27_0x4c02eb,_0x225e2e={'fjjiD':function(_0x5012c4,_0x2b85b3){return _0x5012c4(_0x2b85b3);},'oetKK':_0x44d3a4(0x1dc),'NqsGL':_0x44d3a4(0x1c1),'ocvwY':'Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','RdTsB':function(_0xfd89d9){return _0xfd89d9();},'CPBOp':'Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','rkMLO':'Failed\x20to\x20determine\x20CLI\x20directory','IILeF':'CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','MSezM':_0x44d3a4(0x1e7),'nelui':_0x44d3a4(0x1c6),'vJNqF':function(_0x42b0e2,_0x2b0221,_0x3ec99c,_0x2f7a1a){return _0x42b0e2(_0x2b0221,_0x3ec99c,_0x2f7a1a);},'SCYUR':_0x44d3a4(0x1c8),'TZZCP':_0x44d3a4(0x1d3),'IlRQJ':'SIGINT','booTB':_0x44d3a4(0x1e5),'FVDkN':'SIGQUIT','RoNKg':_0x44d3a4(0x1bb)};try{const _0x4eacc9=process['argv'][_0x44d3a4(0x1f6)](0x2),_0x1ac149=_0x4eacc9[_0x44d3a4(0x1f6)](0x1);logger['debug'](_0x44d3a4(0x1bf)+_0x1ac149);let _0x5cca27={};try{logger['debug'](_0x225e2e[_0x44d3a4(0x1c4)]);const _0x233d02={};_0x233d02[_0x44d3a4(0x1f3)]=process[_0x44d3a4(0x1ea)]['BROWSERSTACK_USERNAME']||process[_0x44d3a4(0x1ea)][_0x44d3a4(0x1f1)],_0x233d02[_0x44d3a4(0x1cb)]=process['env'][_0x44d3a4(0x1f4)]||process[_0x44d3a4(0x1ea)][_0x44d3a4(0x1f0)],_0x5cca27=_0x233d02;if(!_0x5cca27['userName']||!_0x5cca27['accessKey']){const _0x58e8c1=_0x225e2e[_0x44d3a4(0x1c9)](getLoadConfigPath,_0x15acb4[_0x44d3a4(0x1cf)]);logger[_0x44d3a4(0x1ed)]('Configuration\x20path:\x20'+_0x58e8c1),_0x58e8c1&&(_0x5cca27=helper[_0x44d3a4(0x1c2)](_0x58e8c1));}}catch(_0x2d0785){logger['error']('Error\x20loading\x20configuration:\x20'+_0x2d0785['message']),logger[_0x44d3a4(0x1ed)](_0x44d3a4(0x1dd)+(_0x2d0785[_0x44d3a4(0x1d9)]||JSON[_0x44d3a4(0x1c5)](_0x2d0785))),await _0x225e2e[_0x44d3a4(0x1cd)](sleep),process[_0x44d3a4(0x1ba)](0x1);}(!_0x5cca27['userName']||!_0x5cca27['accessKey'])&&(logger[_0x44d3a4(0x1c0)](_0x225e2e[_0x44d3a4(0x1f9)]),await _0x225e2e[_0x44d3a4(0x1cd)](sleep),process[_0x44d3a4(0x1ba)](0x1));const _0x2dc9e4=CLIUtils[_0x44d3a4(0x1f7)]();!_0x2dc9e4&&(logger['error'](_0x225e2e[_0x44d3a4(0x1f2)]),await _0x225e2e[_0x44d3a4(0x1cd)](sleep),process['exit'](0x1));let _0x2360a9=CLIUtils[_0x44d3a4(0x1e9)](_0x2dc9e4);try{!_0x2360a9?(logger[_0x44d3a4(0x1ed)](_0x225e2e[_0x44d3a4(0x1d8)]),_0x2360a9=await CLIUtils[_0x44d3a4(0x1e2)]('',_0x2dc9e4,_0x5cca27)):(logger[_0x44d3a4(0x1ed)](_0x225e2e[_0x44d3a4(0x1f5)]),_0x2360a9=await CLIUtils['checkAndUpdateCli'](_0x2360a9,_0x2dc9e4,_0x5cca27));}catch(_0x3632df){logger[_0x44d3a4(0x1c0)](_0x225e2e[_0x44d3a4(0x1f9)]),logger[_0x44d3a4(0x1ed)](_0x44d3a4(0x1e8)+(_0x3632df[_0x44d3a4(0x1d9)]||JSON[_0x44d3a4(0x1c5)](_0x3632df))),await _0x225e2e[_0x44d3a4(0x1cd)](sleep),process[_0x44d3a4(0x1ba)](0x1);}!_0x2360a9&&(logger[_0x44d3a4(0x1c0)](_0x225e2e[_0x44d3a4(0x1f9)]),logger[_0x44d3a4(0x1ed)](_0x225e2e[_0x44d3a4(0x1e6)]),await _0x225e2e['RdTsB'](sleep),process[_0x44d3a4(0x1ba)](0x1));logger[_0x44d3a4(0x1ed)](_0x44d3a4(0x1fa)+_0x2360a9+'\x20load\x20'+_0x1ac149[_0x44d3a4(0x1d2)]('\x20'));const _0x413746=_0x225e2e[_0x44d3a4(0x1bc)](spawn,_0x2360a9,[_0x225e2e['SCYUR'],..._0x1ac149],{'stdio':_0x225e2e['TZZCP']});let _0x2fd9d8=![];const _0x4ac322=new Promise(_0x41d9bd=>{const _0x24bb4e={'BxjNu':function(_0x565dd2,_0x4e9d9b){const _0x28dcba=a27_0x4b49;return _0x225e2e[_0x28dcba(0x1c9)](_0x565dd2,_0x4e9d9b);}};_0x413746['on'](_0x225e2e['oetKK'],_0x2f3f5e=>{const _0x2a65aa=a27_0x4b49;logger['debug'](_0x2360a9+_0x2a65aa(0x1f8)+_0x2f3f5e),_0x24bb4e[_0x2a65aa(0x1df)](_0x41d9bd,_0x2f3f5e);});});[_0x225e2e[_0x44d3a4(0x1e4)],_0x225e2e[_0x44d3a4(0x1ec)],_0x225e2e['FVDkN'],_0x225e2e['RoNKg']]['forEach'](_0x15d137=>{process['on'](_0x15d137,()=>{const _0x27a194=a27_0x4b49;if(_0x2fd9d8)return;_0x2fd9d8=!![],logger[_0x27a194(0x1ed)](_0x27a194(0x1cc)+_0x15d137+_0x27a194(0x1e3)),_0x413746&&!_0x413746['killed']&&(_0x413746[_0x27a194(0x1ce)](_0x15d137),logger[_0x27a194(0x1ed)](_0x225e2e[_0x27a194(0x1e1)]));});});const _0x3ecf48=await _0x4ac322;await _0x225e2e[_0x44d3a4(0x1cd)](sleep),process[_0x44d3a4(0x1ba)](_0x3ecf48);}catch(_0x20f586){logger[_0x44d3a4(0x1c0)](_0x44d3a4(0x1d1)+_0x20f586[_0x44d3a4(0x1d5)]),logger[_0x44d3a4(0x1ed)](_0x44d3a4(0x1dd)+(_0x20f586[_0x44d3a4(0x1d9)]||JSON['stringify'](_0x20f586))),await _0x225e2e[_0x44d3a4(0x1cd)](sleep),process[_0x44d3a4(0x1ba)](0x1);}}module['exports']=executeLoadTest;