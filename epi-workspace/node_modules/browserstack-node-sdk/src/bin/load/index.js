#!/usr/bin/env node
'use strict';const a27_0x3001ee=a27_0x44c2;(function(_0x59055d,_0x5909ca){const _0x226073=a27_0x44c2,_0x1cc9e8=_0x59055d();while(!![]){try{const _0x24bbd0=parseInt(_0x226073(0x1b9))/0x1+-parseInt(_0x226073(0x1b2))/0x2+-parseInt(_0x226073(0x1b8))/0x3+-parseInt(_0x226073(0x1b0))/0x4+-parseInt(_0x226073(0x1ae))/0x5*(-parseInt(_0x226073(0x1b1))/0x6)+-parseInt(_0x226073(0x1aa))/0x7+parseInt(_0x226073(0x199))/0x8;if(_0x24bbd0===_0x5909ca)break;else _0x1cc9e8['push'](_0x1cc9e8['shift']());}catch(_0x2278cd){_0x1cc9e8['push'](_0x1cc9e8['shift']());}}}(a27_0x1f59,0x72b71));function a27_0x44c2(_0x25016d,_0x30845e){const _0x1f5919=a27_0x1f59();return a27_0x44c2=function(_0x44c27b,_0x3621ae){_0x44c27b=_0x44c27b-0x18b;let _0x445a61=_0x1f5919[_0x44c27b];return _0x445a61;},a27_0x44c2(_0x25016d,_0x30845e);}function a27_0x1f59(){const _0x11855d=['userName','../../helpers/logger','pMIgE','debug','SIGINT','TZyIS','inherit','SIGTERM','vTIiW','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','23573200FNaPkT','argv','aWvsF','accessKey','join','BROWSERSTACK_USER','child_process','tWuPm','cRbea','close','load','kZGeg','exports','message','DYNbB','BROWSERSTACK_USERNAME','forEach','6010487RHuMrG','LJDxF','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','exit','3995GPqxwU','winstonLogger','3513432QNblBn','2586WKMgKh','1871168pFefAm','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','cqsPH','Waiting\x20for\x20child\x20process\x20to\x20exit...','DxyqJ','stringify','1356450MErQnp','303587tphXta','Error\x20loading\x20configuration:\x20','Error\x20details:\x20','../v2/cliUtils','iHmjx','lHBsr','error','stack',',\x20forwarding\x20to\x20child\x20process...','uznYt','XpsCf','Failed\x20initiating\x20load\x20test:\x20','env','Error\x20Details:\x20','fDAMt','BROWSERSTACK_ACCESSKEY','../../helpers/helper','kill','./loadUtils','\x20load\x20','getExistingCliPath','checkAndUpdateCli','readConfig'];a27_0x1f59=function(){return _0x11855d;};return a27_0x1f59();}const {spawn}=require(a27_0x3001ee(0x19f)),path=require('path'),helper=require(a27_0x3001ee(0x1c9)),CLIUtils=require(a27_0x3001ee(0x1bc)),{getLoadConfigPath,sleep}=require(a27_0x3001ee(0x1cb)),logger=require(a27_0x3001ee(0x190))[a27_0x3001ee(0x1af)];async function executeLoadTest(_0x1817c4){const _0x48fbf1=a27_0x3001ee,_0x14ce6c={'lHBsr':function(_0x51f05c,_0x2185be){return _0x51f05c(_0x2185be);},'oYTWh':_0x48fbf1(0x1a2),'cRbea':_0x48fbf1(0x1b5),'pMIgE':_0x48fbf1(0x1b3),'tWuPm':function(_0x237ae2){return _0x237ae2();},'uznYt':'Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','LJDxF':'Failed\x20to\x20determine\x20CLI\x20directory','qFZKl':function(_0x4e43be){return _0x4e43be();},'iHmjx':_0x48fbf1(0x1ac),'TZyIS':_0x48fbf1(0x198),'DxyqJ':function(_0x4bb442){return _0x4bb442();},'cqsPH':'Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','aWvsF':function(_0x47ce04,_0xba3b8a,_0x289e3c,_0x3776a2){return _0x47ce04(_0xba3b8a,_0x289e3c,_0x3776a2);},'kZGeg':_0x48fbf1(0x1a3),'fDAMt':_0x48fbf1(0x195),'RGJTh':_0x48fbf1(0x193),'XpsCf':_0x48fbf1(0x196),'vTIiW':'SIGQUIT','OdqPt':'SIGHUP'};try{const _0x423e8c=process['argv']['slice'](0x2),_0x528d94=_0x423e8c['slice'](0x1);logger[_0x48fbf1(0x192)]('Executing\x20load\x20test\x20with\x20arguments:\x20'+_0x528d94);let _0x346208={};try{logger[_0x48fbf1(0x192)](_0x14ce6c[_0x48fbf1(0x191)]);const _0x11a0c4={};_0x11a0c4[_0x48fbf1(0x18f)]=process['env'][_0x48fbf1(0x1a8)]||process[_0x48fbf1(0x1c5)][_0x48fbf1(0x19e)],_0x11a0c4[_0x48fbf1(0x19c)]=process[_0x48fbf1(0x1c5)]['BROWSERSTACK_ACCESS_KEY']||process[_0x48fbf1(0x1c5)][_0x48fbf1(0x1c8)],_0x346208=_0x11a0c4;if(!_0x346208[_0x48fbf1(0x18f)]||!_0x346208[_0x48fbf1(0x19c)]){const _0x4c0db5=_0x14ce6c[_0x48fbf1(0x1be)](getLoadConfigPath,_0x1817c4[_0x48fbf1(0x19a)]);logger[_0x48fbf1(0x192)]('Configuration\x20path:\x20'+_0x4c0db5),_0x4c0db5&&(_0x346208=helper[_0x48fbf1(0x18e)](_0x4c0db5));}}catch(_0x2e46a6){logger[_0x48fbf1(0x1bf)](_0x48fbf1(0x1ba)+_0x2e46a6['message']),logger[_0x48fbf1(0x192)](_0x48fbf1(0x1bb)+(_0x2e46a6['stack']||JSON[_0x48fbf1(0x1b7)](_0x2e46a6))),await _0x14ce6c['tWuPm'](sleep),process[_0x48fbf1(0x1ad)](0x1);}(!_0x346208[_0x48fbf1(0x18f)]||!_0x346208[_0x48fbf1(0x19c)])&&(logger['error'](_0x14ce6c[_0x48fbf1(0x1c2)]),await _0x14ce6c[_0x48fbf1(0x1a0)](sleep),process[_0x48fbf1(0x1ad)](0x1));const _0xc69205=CLIUtils['getCliDir']();!_0xc69205&&(logger[_0x48fbf1(0x1bf)](_0x14ce6c[_0x48fbf1(0x1ab)]),await _0x14ce6c['qFZKl'](sleep),process[_0x48fbf1(0x1ad)](0x1));let _0x41e6a3=CLIUtils[_0x48fbf1(0x18c)](_0xc69205);try{!_0x41e6a3?(logger[_0x48fbf1(0x192)](_0x14ce6c[_0x48fbf1(0x1bd)]),_0x41e6a3=await CLIUtils['checkAndUpdateCli']('',_0xc69205,_0x346208)):(logger[_0x48fbf1(0x192)](_0x14ce6c[_0x48fbf1(0x194)]),_0x41e6a3=await CLIUtils[_0x48fbf1(0x18d)](_0x41e6a3,_0xc69205,_0x346208));}catch(_0x4c1b61){logger[_0x48fbf1(0x1bf)](_0x14ce6c[_0x48fbf1(0x1c2)]),logger[_0x48fbf1(0x192)](_0x48fbf1(0x1c6)+(_0x4c1b61[_0x48fbf1(0x1c0)]||JSON[_0x48fbf1(0x1b7)](_0x4c1b61))),await _0x14ce6c[_0x48fbf1(0x1b6)](sleep),process[_0x48fbf1(0x1ad)](0x1);}!_0x41e6a3&&(logger[_0x48fbf1(0x1bf)](_0x14ce6c['uznYt']),logger[_0x48fbf1(0x192)](_0x14ce6c[_0x48fbf1(0x1b4)]),await _0x14ce6c[_0x48fbf1(0x1a0)](sleep),process['exit'](0x1));logger[_0x48fbf1(0x192)]('Spawning:\x20'+_0x41e6a3+_0x48fbf1(0x18b)+_0x528d94[_0x48fbf1(0x19d)]('\x20'));const _0x1ccf7f=_0x14ce6c[_0x48fbf1(0x19b)](spawn,_0x41e6a3,[_0x14ce6c[_0x48fbf1(0x1a4)],..._0x528d94],{'stdio':_0x14ce6c[_0x48fbf1(0x1c7)]});let _0x5b2adc=![];const _0x2ee9a1=new Promise(_0x1ae55f=>{const _0x2c9517={'vRTQq':function(_0x1becca,_0x1a79b2){const _0x37f460=a27_0x44c2;return _0x14ce6c[_0x37f460(0x1be)](_0x1becca,_0x1a79b2);}};_0x1ccf7f['on'](_0x14ce6c['oYTWh'],_0x1489e1=>{logger['debug'](_0x41e6a3+'\x20exited\x20with\x20code\x20'+_0x1489e1),_0x2c9517['vRTQq'](_0x1ae55f,_0x1489e1);});});[_0x14ce6c['RGJTh'],_0x14ce6c[_0x48fbf1(0x1c3)],_0x14ce6c[_0x48fbf1(0x197)],_0x14ce6c['OdqPt']][_0x48fbf1(0x1a9)](_0x1d2615=>{const _0x2ac43d=_0x48fbf1,_0x3d9a55={};_0x3d9a55[_0x2ac43d(0x1a7)]=_0x14ce6c[_0x2ac43d(0x1a1)];const _0x1df43a=_0x3d9a55;process['on'](_0x1d2615,()=>{const _0x47d5a7=_0x2ac43d;if(_0x5b2adc)return;_0x5b2adc=!![],logger[_0x47d5a7(0x192)]('Received\x20'+_0x1d2615+_0x47d5a7(0x1c1)),_0x1ccf7f&&!_0x1ccf7f['killed']&&(_0x1ccf7f[_0x47d5a7(0x1ca)](_0x1d2615),logger[_0x47d5a7(0x192)](_0x1df43a['DYNbB']));});});const _0x28eced=await _0x2ee9a1;await _0x14ce6c['DxyqJ'](sleep),process[_0x48fbf1(0x1ad)](_0x28eced);}catch(_0x17d747){logger[_0x48fbf1(0x1bf)](_0x48fbf1(0x1c4)+_0x17d747[_0x48fbf1(0x1a6)]),logger[_0x48fbf1(0x192)]('Error\x20details:\x20'+(_0x17d747[_0x48fbf1(0x1c0)]||JSON[_0x48fbf1(0x1b7)](_0x17d747))),await _0x14ce6c[_0x48fbf1(0x1a0)](sleep),process[_0x48fbf1(0x1ad)](0x1);}}module[a27_0x3001ee(0x1a5)]=executeLoadTest;