#!/usr/bin/env node
'use strict';const a29_0x6e669e=a29_0x159b;function a29_0x2790(){const _0x592f34=['winstonLogger','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','accessKey','exit','jSJSM','jgnnS','Received\x20','Ujrvv','BhxEo','Spawning:\x20','3739040jlpysZ','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','KiBGf','child_process','JbLcq','VSXHC','getCliDir','argv','SIGTERM','944840SZkoUq','Failed\x20initiating\x20load\x20test:\x20','noiKV','close','SIGINT','362172eYuceJ','path','yGZWT','SYqWK','hfemz','BROWSERSTACK_USERNAME','debug','JHoYB','BROWSERSTACK_ACCESS_KEY','\x20load\x20','Error\x20details:\x20','exports','Waiting\x20for\x20child\x20process\x20to\x20exit...','forEach','1531355CRfoun','45bhBlEb','env','10NyDQwG','Executing\x20load\x20test\x20with\x20arguments:\x20','1583225HfuKeB','BROWSERSTACK_ACCESSKEY','MTIma','stringify','message','stack','../v2/cliUtils','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','kill','bohnt','KvilD','12FgNHga','error','Configuration\x20path:\x20','\x20exited\x20with\x20code\x20','Failed\x20to\x20determine\x20CLI\x20directory','slice','UtzvS','mbtSt','1820466xnyQZD','userName','checkAndUpdateCli','SIGQUIT','readConfig','killed','XuroT','SIGHUP','join','2302LTHNzG','getExistingCliPath'];a29_0x2790=function(){return _0x592f34;};return a29_0x2790();}(function(_0x57c4e4,_0x3cc26d){const _0xb618db=a29_0x159b,_0xface7f=_0x57c4e4();while(!![]){try{const _0x2758fd=parseInt(_0xb618db(0x12e))/0x1+parseInt(_0xb618db(0x114))/0x2*(parseInt(_0xb618db(0x13d))/0x3)+-parseInt(_0xb618db(0x129))/0x4+parseInt(_0xb618db(0xf8))/0x5+-parseInt(_0xb618db(0x103))/0x6*(parseInt(_0xb618db(0x13c))/0x7)+parseInt(_0xb618db(0x120))/0x8+-parseInt(_0xb618db(0x10b))/0x9*(parseInt(_0xb618db(0xf6))/0xa);if(_0x2758fd===_0x3cc26d)break;else _0xface7f['push'](_0xface7f['shift']());}catch(_0x41ebc8){_0xface7f['push'](_0xface7f['shift']());}}}(a29_0x2790,0x462d8));function a29_0x159b(_0x144a53,_0x282fe4){const _0x279095=a29_0x2790();return a29_0x159b=function(_0x159b42,_0x52e65a){_0x159b42=_0x159b42-0xf5;let _0x1fe303=_0x279095[_0x159b42];return _0x1fe303;},a29_0x159b(_0x144a53,_0x282fe4);}const {spawn}=require(a29_0x6e669e(0x123)),path=require(a29_0x6e669e(0x12f)),helper=require('../../helpers/helper'),CLIUtils=require(a29_0x6e669e(0xfe)),{getLoadConfigPath,sleep}=require('./loadUtils'),logger=require('../../helpers/logger')[a29_0x6e669e(0x116)];async function executeLoadTest(_0x13e99){const _0x10834a=a29_0x6e669e,_0x5bd413={'VSXHC':function(_0x4f15dc,_0x53d5ad){return _0x4f15dc(_0x53d5ad);},'XuroT':_0x10834a(0x12c),'bohnt':_0x10834a(0x13a),'KiBGf':_0x10834a(0xff),'jSJSM':function(_0x8c27b4){return _0x8c27b4();},'UtzvS':'Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','yGZWT':function(_0x3c75b3){return _0x3c75b3();},'PzwhV':_0x10834a(0x107),'MTIma':_0x10834a(0x121),'tFUVc':_0x10834a(0x117),'BhxEo':'Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','mbtSt':function(_0x4a48fd){return _0x4a48fd();},'JbLcq':function(_0x22d976,_0x4b9aac,_0x2d08e8,_0x2a62ce){return _0x22d976(_0x4b9aac,_0x2d08e8,_0x2a62ce);},'KvilD':'load','Ujrvv':'inherit','hfemz':_0x10834a(0x12d),'noiKV':_0x10834a(0x128),'SYqWK':_0x10834a(0x10e),'JHoYB':_0x10834a(0x112)};try{const _0x44deab=process['argv'][_0x10834a(0x108)](0x2),_0x5f3616=_0x44deab[_0x10834a(0x108)](0x1);logger[_0x10834a(0x134)](_0x10834a(0xf7)+_0x5f3616);let _0x565d29={};try{logger[_0x10834a(0x134)](_0x5bd413[_0x10834a(0x122)]);const _0x48f657={};_0x48f657[_0x10834a(0x10c)]=process[_0x10834a(0xf5)][_0x10834a(0x133)]||process[_0x10834a(0xf5)]['BROWSERSTACK_USER'],_0x48f657[_0x10834a(0x118)]=process['env'][_0x10834a(0x136)]||process[_0x10834a(0xf5)][_0x10834a(0xf9)],_0x565d29=_0x48f657;if(!_0x565d29[_0x10834a(0x10c)]||!_0x565d29['accessKey']){const _0x4b6e91=_0x5bd413[_0x10834a(0x125)](getLoadConfigPath,_0x13e99[_0x10834a(0x127)]);logger[_0x10834a(0x134)](_0x10834a(0x105)+_0x4b6e91),_0x4b6e91&&(_0x565d29=helper[_0x10834a(0x10f)](_0x4b6e91));}}catch(_0x3dec65){logger[_0x10834a(0x104)]('Error\x20loading\x20configuration:\x20'+_0x3dec65[_0x10834a(0xfc)]),logger[_0x10834a(0x134)]('Error\x20details:\x20'+(_0x3dec65[_0x10834a(0xfd)]||JSON['stringify'](_0x3dec65))),await _0x5bd413['jSJSM'](sleep),process[_0x10834a(0x119)](0x1);}(!_0x565d29[_0x10834a(0x10c)]||!_0x565d29[_0x10834a(0x118)])&&(logger[_0x10834a(0x104)](_0x5bd413[_0x10834a(0x109)]),await _0x5bd413['yGZWT'](sleep),process[_0x10834a(0x119)](0x1));const _0x54c1b2=CLIUtils[_0x10834a(0x126)]();!_0x54c1b2&&(logger['error'](_0x5bd413['PzwhV']),await _0x5bd413['jSJSM'](sleep),process[_0x10834a(0x119)](0x1));let _0x14f578=CLIUtils[_0x10834a(0x115)](_0x54c1b2);try{!_0x14f578?(logger['debug'](_0x5bd413[_0x10834a(0xfa)]),_0x14f578=await CLIUtils['checkAndUpdateCli']('',_0x54c1b2,_0x565d29)):(logger[_0x10834a(0x134)](_0x5bd413['tFUVc']),_0x14f578=await CLIUtils[_0x10834a(0x10d)](_0x14f578,_0x54c1b2,_0x565d29));}catch(_0x40fcf0){logger[_0x10834a(0x104)](_0x5bd413[_0x10834a(0x109)]),logger[_0x10834a(0x134)]('Error\x20Details:\x20'+(_0x40fcf0[_0x10834a(0xfd)]||JSON['stringify'](_0x40fcf0))),await _0x5bd413[_0x10834a(0x130)](sleep),process['exit'](0x1);}!_0x14f578&&(logger[_0x10834a(0x104)](_0x5bd413[_0x10834a(0x109)]),logger[_0x10834a(0x134)](_0x5bd413[_0x10834a(0x11e)]),await _0x5bd413[_0x10834a(0x10a)](sleep),process[_0x10834a(0x119)](0x1));logger[_0x10834a(0x134)](_0x10834a(0x11f)+_0x14f578+_0x10834a(0x137)+_0x5f3616[_0x10834a(0x113)]('\x20'));const _0x220b45=_0x5bd413[_0x10834a(0x124)](spawn,_0x14f578,[_0x5bd413[_0x10834a(0x102)],..._0x5f3616],{'stdio':_0x5bd413[_0x10834a(0x11d)]});let _0x33aced=![];const _0x16f8e5=new Promise(_0x39b292=>{const _0xc08c0b=_0x10834a;_0x220b45['on'](_0x5bd413[_0xc08c0b(0x111)],_0x4d28f3=>{const _0x37561e=_0xc08c0b;logger['debug'](_0x14f578+_0x37561e(0x106)+_0x4d28f3),_0x5bd413['VSXHC'](_0x39b292,_0x4d28f3);});});[_0x5bd413[_0x10834a(0x132)],_0x5bd413[_0x10834a(0x12b)],_0x5bd413[_0x10834a(0x131)],_0x5bd413[_0x10834a(0x135)]][_0x10834a(0x13b)](_0x570b0c=>{const _0x10b048=_0x10834a,_0x525e21={};_0x525e21[_0x10b048(0x11b)]=_0x5bd413[_0x10b048(0x101)];const _0x1646b4=_0x525e21;process['on'](_0x570b0c,()=>{const _0x58f514=_0x10b048;if(_0x33aced)return;_0x33aced=!![],logger['debug'](_0x58f514(0x11c)+_0x570b0c+',\x20forwarding\x20to\x20child\x20process...'),_0x220b45&&!_0x220b45[_0x58f514(0x110)]&&(_0x220b45[_0x58f514(0x100)](_0x570b0c),logger[_0x58f514(0x134)](_0x1646b4[_0x58f514(0x11b)]));});});const _0x24713b=await _0x16f8e5;await _0x5bd413[_0x10834a(0x11a)](sleep),process['exit'](_0x24713b);}catch(_0x5a5192){logger['error'](_0x10834a(0x12a)+_0x5a5192['message']),logger[_0x10834a(0x134)](_0x10834a(0x138)+(_0x5a5192[_0x10834a(0xfd)]||JSON[_0x10834a(0xfb)](_0x5a5192))),await _0x5bd413['yGZWT'](sleep),process[_0x10834a(0x119)](0x1);}}module[a29_0x6e669e(0x139)]=executeLoadTest;