#!/usr/bin/env node
'use strict';function a28_0x1d06(_0xb9224,_0xe3309b){const _0x29ac34=a28_0x29ac();return a28_0x1d06=function(_0x1d0659,_0x25b898){_0x1d0659=_0x1d0659-0x1b2;let _0x270785=_0x29ac34[_0x1d0659];return _0x270785;},a28_0x1d06(_0xb9224,_0xe3309b);}const a28_0x110a8a=a28_0x1d06;function a28_0x29ac(){const _0x514753=['rxebr','stringify','userName','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','98VobDcg','./loadUtils','Eyosm','../../helpers/logger','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','Executing\x20load\x20test\x20with\x20arguments:\x20','getCliDir','winstonLogger','checkAndUpdateCli','myrgH','path','stack','accessKey','Failed\x20initiating\x20load\x20test:\x20','Error\x20details:\x20','5XoLBPl','getExistingCliPath','1503384uKHOrn','debug','killed','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','569272CjGCdK','slice','kill','exports','\x20load\x20','SIGHUP','MzAHq','Failed\x20to\x20determine\x20CLI\x20directory','BROWSERSTACK_ACCESS_KEY','sxTbI','SIGTERM','readConfig','exit','close','forEach','PwMuC','5770290SDSvWp','2057442vcBiaF','BROWSERSTACK_ACCESSKEY','suMke','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','7sybQOV','dgbPw','NxYAG','jyeqF','796365HGDQZm','BROWSERSTACK_USER','lZOLK','message','mXcTl','Received\x20','bCewJ',',\x20forwarding\x20to\x20child\x20process...','Configuration\x20path:\x20','mCAXx','fHKKJ','error','17025fIsEmt','KbVCj','AYnAp','CNizS','aJowe','IHjwM','child_process','428918dmqkzh','Waiting\x20for\x20child\x20process\x20to\x20exit...','SIGINT','env','argv','Error\x20loading\x20configuration:\x20','Spawning:\x20'];a28_0x29ac=function(){return _0x514753;};return a28_0x29ac();}(function(_0xcdac5d,_0x3844fb){const _0x17ab2e=a28_0x1d06,_0x1854c8=_0xcdac5d();while(!![]){try{const _0x38a44e=-parseInt(_0x17ab2e(0x1cd))/0x1+-parseInt(_0x17ab2e(0x1d8))/0x2*(-parseInt(_0x17ab2e(0x1c6))/0x3)+parseInt(_0x17ab2e(0x1ed))/0x4*(-parseInt(_0x17ab2e(0x1e7))/0x5)+-parseInt(_0x17ab2e(0x1b2))/0x6+-parseInt(_0x17ab2e(0x1b6))/0x7*(-parseInt(_0x17ab2e(0x1e9))/0x8)+parseInt(_0x17ab2e(0x1ba))/0x9+parseInt(_0x17ab2e(0x1fd))/0xa;if(_0x38a44e===_0x3844fb)break;else _0x1854c8['push'](_0x1854c8['shift']());}catch(_0x289cd9){_0x1854c8['push'](_0x1854c8['shift']());}}}(a28_0x29ac,0x35119));const {spawn}=require(a28_0x110a8a(0x1cc)),path=require(a28_0x110a8a(0x1e2)),helper=require('../../helpers/helper'),CLIUtils=require('../v2/cliUtils'),{getLoadConfigPath,sleep}=require(a28_0x110a8a(0x1d9)),logger=require(a28_0x110a8a(0x1db))[a28_0x110a8a(0x1df)];async function executeLoadTest(_0x5871f4){const _0x4f2b98=a28_0x110a8a,_0x5044a5={'sItLc':function(_0x13f430,_0x3e9dc0){return _0x13f430(_0x3e9dc0);},'KbVCj':_0x4f2b98(0x1fa),'rxebr':_0x4f2b98(0x1ce),'CNizS':'Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','IHjwM':function(_0x2617be){return _0x2617be();},'bCewJ':_0x4f2b98(0x1ec),'suMke':_0x4f2b98(0x1f4),'aJowe':function(_0x28816d){return _0x28816d();},'NxYAG':_0x4f2b98(0x1dc),'jyeqF':_0x4f2b98(0x1b5),'mCAXx':_0x4f2b98(0x1d7),'MzAHq':function(_0x105ce0,_0x151303,_0x5bbcb6,_0x76540e){return _0x105ce0(_0x151303,_0x5bbcb6,_0x76540e);},'fHKKJ':'load','myrgH':'inherit','Eyosm':_0x4f2b98(0x1cf),'AYnAp':_0x4f2b98(0x1f7),'dgbPw':'SIGQUIT','PwMuC':_0x4f2b98(0x1f2),'lZOLK':function(_0x5a0ced){return _0x5a0ced();},'sxTbI':function(_0x845a1){return _0x845a1();}};try{const _0x507111=process['argv'][_0x4f2b98(0x1ee)](0x2),_0x3c69c4=_0x507111['slice'](0x1);logger['debug'](_0x4f2b98(0x1dd)+_0x3c69c4);let _0x158d85={};try{logger[_0x4f2b98(0x1ea)](_0x5044a5[_0x4f2b98(0x1c9)]);const _0x58216e={};_0x58216e['userName']=process[_0x4f2b98(0x1d0)]['BROWSERSTACK_USERNAME']||process['env'][_0x4f2b98(0x1bb)],_0x58216e['accessKey']=process[_0x4f2b98(0x1d0)][_0x4f2b98(0x1f5)]||process['env'][_0x4f2b98(0x1b3)],_0x158d85=_0x58216e;if(!_0x158d85[_0x4f2b98(0x1d6)]||!_0x158d85[_0x4f2b98(0x1e4)]){const _0x174e43=_0x5044a5['sItLc'](getLoadConfigPath,_0x5871f4[_0x4f2b98(0x1d1)]);logger[_0x4f2b98(0x1ea)](_0x4f2b98(0x1c2)+_0x174e43),_0x174e43&&(_0x158d85=helper[_0x4f2b98(0x1f8)](_0x174e43));}}catch(_0x1ac2f7){logger[_0x4f2b98(0x1c5)](_0x4f2b98(0x1d2)+_0x1ac2f7[_0x4f2b98(0x1bd)]),logger[_0x4f2b98(0x1ea)](_0x4f2b98(0x1e6)+(_0x1ac2f7[_0x4f2b98(0x1e3)]||JSON[_0x4f2b98(0x1d5)](_0x1ac2f7))),await _0x5044a5[_0x4f2b98(0x1cb)](sleep),process[_0x4f2b98(0x1f9)](0x1);}(!_0x158d85[_0x4f2b98(0x1d6)]||!_0x158d85[_0x4f2b98(0x1e4)])&&(logger[_0x4f2b98(0x1c5)](_0x5044a5[_0x4f2b98(0x1c0)]),await _0x5044a5[_0x4f2b98(0x1cb)](sleep),process[_0x4f2b98(0x1f9)](0x1));const _0x5c1a2b=CLIUtils[_0x4f2b98(0x1de)]();!_0x5c1a2b&&(logger[_0x4f2b98(0x1c5)](_0x5044a5[_0x4f2b98(0x1b4)]),await _0x5044a5[_0x4f2b98(0x1ca)](sleep),process[_0x4f2b98(0x1f9)](0x1));let _0x565f05=CLIUtils[_0x4f2b98(0x1e8)](_0x5c1a2b);try{!_0x565f05?(logger[_0x4f2b98(0x1ea)](_0x5044a5[_0x4f2b98(0x1b8)]),_0x565f05=await CLIUtils[_0x4f2b98(0x1e0)]('',_0x5c1a2b,_0x158d85)):(logger[_0x4f2b98(0x1ea)](_0x5044a5[_0x4f2b98(0x1b9)]),_0x565f05=await CLIUtils[_0x4f2b98(0x1e0)](_0x565f05,_0x5c1a2b,_0x158d85));}catch(_0x5e8649){logger[_0x4f2b98(0x1c5)](_0x5044a5[_0x4f2b98(0x1c0)]),logger[_0x4f2b98(0x1ea)]('Error\x20Details:\x20'+(_0x5e8649[_0x4f2b98(0x1e3)]||JSON[_0x4f2b98(0x1d5)](_0x5e8649))),await _0x5044a5['aJowe'](sleep),process['exit'](0x1);}!_0x565f05&&(logger[_0x4f2b98(0x1c5)](_0x5044a5['bCewJ']),logger[_0x4f2b98(0x1ea)](_0x5044a5[_0x4f2b98(0x1c3)]),await _0x5044a5[_0x4f2b98(0x1cb)](sleep),process[_0x4f2b98(0x1f9)](0x1));logger[_0x4f2b98(0x1ea)](_0x4f2b98(0x1d3)+_0x565f05+_0x4f2b98(0x1f1)+_0x3c69c4['join']('\x20'));const _0x120a5e=_0x5044a5[_0x4f2b98(0x1f3)](spawn,_0x565f05,[_0x5044a5[_0x4f2b98(0x1c4)],..._0x3c69c4],{'stdio':_0x5044a5[_0x4f2b98(0x1e1)]});let _0x2add4b=![];const _0x2841a2=new Promise(_0x5b204e=>{const _0x21e652=_0x4f2b98,_0x3c4820={'mXcTl':function(_0x44e7b8,_0x22f15d){return _0x5044a5['sItLc'](_0x44e7b8,_0x22f15d);}};_0x120a5e['on'](_0x5044a5[_0x21e652(0x1c7)],_0x380bb1=>{const _0x30ae4d=_0x21e652;logger[_0x30ae4d(0x1ea)](_0x565f05+'\x20exited\x20with\x20code\x20'+_0x380bb1),_0x3c4820[_0x30ae4d(0x1be)](_0x5b204e,_0x380bb1);});});[_0x5044a5[_0x4f2b98(0x1da)],_0x5044a5[_0x4f2b98(0x1c8)],_0x5044a5[_0x4f2b98(0x1b7)],_0x5044a5[_0x4f2b98(0x1fc)]][_0x4f2b98(0x1fb)](_0x623f88=>{process['on'](_0x623f88,()=>{const _0x2397c1=a28_0x1d06;if(_0x2add4b)return;_0x2add4b=!![],logger[_0x2397c1(0x1ea)](_0x2397c1(0x1bf)+_0x623f88+_0x2397c1(0x1c1)),_0x120a5e&&!_0x120a5e[_0x2397c1(0x1eb)]&&(_0x120a5e[_0x2397c1(0x1ef)](_0x623f88),logger[_0x2397c1(0x1ea)](_0x5044a5[_0x2397c1(0x1d4)]));});});const _0x37c27d=await _0x2841a2;await _0x5044a5[_0x4f2b98(0x1bc)](sleep),process[_0x4f2b98(0x1f9)](_0x37c27d);}catch(_0x4eb2a0){logger[_0x4f2b98(0x1c5)](_0x4f2b98(0x1e5)+_0x4eb2a0[_0x4f2b98(0x1bd)]),logger['debug'](_0x4f2b98(0x1e6)+(_0x4eb2a0[_0x4f2b98(0x1e3)]||JSON[_0x4f2b98(0x1d5)](_0x4eb2a0))),await _0x5044a5[_0x4f2b98(0x1f6)](sleep),process[_0x4f2b98(0x1f9)](0x1);}}module[a28_0x110a8a(0x1f0)]=executeLoadTest;