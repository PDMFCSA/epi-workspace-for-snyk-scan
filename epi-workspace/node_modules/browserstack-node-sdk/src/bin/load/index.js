#!/usr/bin/env node
'use strict';const a29_0x394117=a29_0xb297;(function(_0x3865fa,_0x5aaaa8){const _0x11257d=a29_0xb297,_0x4b3526=_0x3865fa();while(!![]){try{const _0x16685e=parseInt(_0x11257d(0xbe))/0x1+-parseInt(_0x11257d(0xc1))/0x2*(parseInt(_0x11257d(0xa1))/0x3)+parseInt(_0x11257d(0x85))/0x4*(-parseInt(_0x11257d(0x9f))/0x5)+parseInt(_0x11257d(0xa9))/0x6*(parseInt(_0x11257d(0xb0))/0x7)+parseInt(_0x11257d(0xb5))/0x8*(parseInt(_0x11257d(0xa3))/0x9)+-parseInt(_0x11257d(0xb8))/0xa*(-parseInt(_0x11257d(0x7c))/0xb)+parseInt(_0x11257d(0x89))/0xc;if(_0x16685e===_0x5aaaa8)break;else _0x4b3526['push'](_0x4b3526['shift']());}catch(_0x170cbb){_0x4b3526['push'](_0x4b3526['shift']());}}}(a29_0x3346,0xbcd0c));function a29_0x3346(){const _0x2fc209=['FWedp','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','7Ewflqs',',\x20forwarding\x20to\x20child\x20process...','TIDii','../../helpers/logger','OTaSh','15784DtbAYB','FpBGV','Waiting\x20for\x20child\x20process\x20to\x20exit...','30KRVyrY','BROWSERSTACK_ACCESS_KEY','\x20exited\x20with\x20code\x20','child_process','stringify','BROWSERSTACK_ACCESSKEY','854747aozFpw','vrBst','killed','66228FpiOKG','exit','Error\x20loading\x20configuration:\x20','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','WHxRS','Configuration\x20path:\x20','836220NxYPRQ','\x20load\x20','yniLM','forEach','argv','./loadUtils','Pasxx','Failed\x20initiating\x20load\x20test:\x20','BROWSERSTACK_USER','1583124cItqGf','SIGTERM','message','SIGHUP','4099440OiMbJW','Failed\x20to\x20determine\x20CLI\x20directory','Spawning:\x20','winstonLogger','Error\x20details:\x20','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','getCliDir','accessKey','PSKdR','slice','join','SIGQUIT','stack','path','VvVcK','eXIZx','../v2/cliUtils','debug','fAcQX','close','uStTu','kill','15UWPgAo','error','39bdyapO','yRZGG','3987vVmGaO','grDTD','env','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','qrENx','userName','556482vEOJGq','PSTHO','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','ukdst','load'];a29_0x3346=function(){return _0x2fc209;};return a29_0x3346();}const {spawn}=require(a29_0x394117(0xbb)),path=require(a29_0x394117(0x96)),helper=require('../../helpers/helper'),CLIUtils=require(a29_0x394117(0x99)),{getLoadConfigPath,sleep}=require(a29_0x394117(0x81)),logger=require(a29_0x394117(0xb3))[a29_0x394117(0x8c)];async function executeLoadTest(_0x2c79){const _0x4548d4=a29_0x394117,_0x5414e9={'WHxRS':function(_0x45c811,_0x366039){return _0x45c811(_0x366039);},'PSKdR':_0x4548d4(0x9c),'TIDii':_0x4548d4(0xb7),'vrBst':_0x4548d4(0xaf),'ukdst':function(_0x4cf3ab){return _0x4cf3ab();},'yRZGG':_0x4548d4(0x8e),'FpBGV':_0x4548d4(0x8a),'grDTD':function(_0x638af4){return _0x638af4();},'Pasxx':_0x4548d4(0xa6),'qrENx':_0x4548d4(0xab),'OTaSh':function(_0x3b69a3){return _0x3b69a3();},'SSeXS':_0x4548d4(0x79),'HrLJf':function(_0xbbd94e,_0x50eceb,_0x5ed91d,_0x514d7a){return _0xbbd94e(_0x50eceb,_0x5ed91d,_0x514d7a);},'eXIZx':_0x4548d4(0xad),'yniLM':'inherit','uStTu':'SIGINT','fAcQX':_0x4548d4(0x86),'FWedp':_0x4548d4(0x94),'VvVcK':_0x4548d4(0x88),'PSTHO':function(_0x2808b3){return _0x2808b3();}};try{const _0x308827=process['argv'][_0x4548d4(0x92)](0x2),_0x5cba9a=_0x308827[_0x4548d4(0x92)](0x1);logger['debug']('Executing\x20load\x20test\x20with\x20arguments:\x20'+_0x5cba9a);let _0x5a471e={};try{logger[_0x4548d4(0x9a)](_0x5414e9[_0x4548d4(0xbf)]);const _0x5107bf={};_0x5107bf[_0x4548d4(0xa8)]=process[_0x4548d4(0xa5)]['BROWSERSTACK_USERNAME']||process[_0x4548d4(0xa5)][_0x4548d4(0x84)],_0x5107bf[_0x4548d4(0x90)]=process['env'][_0x4548d4(0xb9)]||process['env'][_0x4548d4(0xbd)],_0x5a471e=_0x5107bf;if(!_0x5a471e['userName']||!_0x5a471e['accessKey']){const _0x277c84=_0x5414e9['WHxRS'](getLoadConfigPath,_0x2c79[_0x4548d4(0x80)]);logger[_0x4548d4(0x9a)](_0x4548d4(0x7b)+_0x277c84),_0x277c84&&(_0x5a471e=helper['readConfig'](_0x277c84));}}catch(_0x49e00a){logger[_0x4548d4(0xa0)](_0x4548d4(0x78)+_0x49e00a[_0x4548d4(0x87)]),logger[_0x4548d4(0x9a)](_0x4548d4(0x8d)+(_0x49e00a[_0x4548d4(0x95)]||JSON[_0x4548d4(0xbc)](_0x49e00a))),await _0x5414e9[_0x4548d4(0xac)](sleep),process[_0x4548d4(0x77)](0x1);}(!_0x5a471e[_0x4548d4(0xa8)]||!_0x5a471e[_0x4548d4(0x90)])&&(logger[_0x4548d4(0xa0)](_0x5414e9[_0x4548d4(0xa2)]),await _0x5414e9[_0x4548d4(0xac)](sleep),process[_0x4548d4(0x77)](0x1));const _0x4316b0=CLIUtils[_0x4548d4(0x8f)]();!_0x4316b0&&(logger[_0x4548d4(0xa0)](_0x5414e9[_0x4548d4(0xb6)]),await _0x5414e9['grDTD'](sleep),process[_0x4548d4(0x77)](0x1));let _0x1efdc9=CLIUtils['getExistingCliPath'](_0x4316b0);try{!_0x1efdc9?(logger[_0x4548d4(0x9a)](_0x5414e9[_0x4548d4(0x82)]),_0x1efdc9=await CLIUtils['checkAndUpdateCli']('',_0x4316b0,_0x5a471e)):(logger[_0x4548d4(0x9a)](_0x5414e9[_0x4548d4(0xa7)]),_0x1efdc9=await CLIUtils['checkAndUpdateCli'](_0x1efdc9,_0x4316b0,_0x5a471e));}catch(_0x2232db){logger[_0x4548d4(0xa0)](_0x5414e9[_0x4548d4(0xa2)]),logger[_0x4548d4(0x9a)]('Error\x20Details:\x20'+(_0x2232db[_0x4548d4(0x95)]||JSON[_0x4548d4(0xbc)](_0x2232db))),await _0x5414e9[_0x4548d4(0xb4)](sleep),process['exit'](0x1);}!_0x1efdc9&&(logger[_0x4548d4(0xa0)](_0x5414e9[_0x4548d4(0xa2)]),logger[_0x4548d4(0x9a)](_0x5414e9['SSeXS']),await _0x5414e9['ukdst'](sleep),process[_0x4548d4(0x77)](0x1));logger[_0x4548d4(0x9a)](_0x4548d4(0x8b)+_0x1efdc9+_0x4548d4(0x7d)+_0x5cba9a[_0x4548d4(0x93)]('\x20'));const _0x700d4e=_0x5414e9['HrLJf'](spawn,_0x1efdc9,[_0x5414e9[_0x4548d4(0x98)],..._0x5cba9a],{'stdio':_0x5414e9[_0x4548d4(0x7e)]});let _0x52876d=![];const _0x5cb9d4=new Promise(_0x3283a8=>{const _0x200986=_0x4548d4;_0x700d4e['on'](_0x5414e9[_0x200986(0x91)],_0x542c3b=>{const _0x166b90=_0x200986;logger['debug'](_0x1efdc9+_0x166b90(0xba)+_0x542c3b),_0x5414e9[_0x166b90(0x7a)](_0x3283a8,_0x542c3b);});});[_0x5414e9[_0x4548d4(0x9d)],_0x5414e9[_0x4548d4(0x9b)],_0x5414e9[_0x4548d4(0xae)],_0x5414e9[_0x4548d4(0x97)]][_0x4548d4(0x7f)](_0x49c779=>{process['on'](_0x49c779,()=>{const _0x918ddf=a29_0xb297;if(_0x52876d)return;_0x52876d=!![],logger[_0x918ddf(0x9a)]('Received\x20'+_0x49c779+_0x918ddf(0xb1)),_0x700d4e&&!_0x700d4e[_0x918ddf(0xc0)]&&(_0x700d4e[_0x918ddf(0x9e)](_0x49c779),logger[_0x918ddf(0x9a)](_0x5414e9[_0x918ddf(0xb2)]));});});const _0x1688e2=await _0x5cb9d4;await _0x5414e9[_0x4548d4(0xa4)](sleep),process[_0x4548d4(0x77)](_0x1688e2);}catch(_0x43b60c){logger[_0x4548d4(0xa0)](_0x4548d4(0x83)+_0x43b60c[_0x4548d4(0x87)]),logger[_0x4548d4(0x9a)](_0x4548d4(0x8d)+(_0x43b60c[_0x4548d4(0x95)]||JSON[_0x4548d4(0xbc)](_0x43b60c))),await _0x5414e9[_0x4548d4(0xaa)](sleep),process[_0x4548d4(0x77)](0x1);}}function a29_0xb297(_0x407836,_0x375f36){const _0x334690=a29_0x3346();return a29_0xb297=function(_0xb297b2,_0x3546f1){_0xb297b2=_0xb297b2-0x77;let _0x46fef9=_0x334690[_0xb297b2];return _0x46fef9;},a29_0xb297(_0x407836,_0x375f36);}module['exports']=executeLoadTest;