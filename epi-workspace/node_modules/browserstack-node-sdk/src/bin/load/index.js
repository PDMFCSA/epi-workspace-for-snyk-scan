#!/usr/bin/env node
'use strict';const a29_0x1fd6bc=a29_0x1380;(function(_0x3341a5,_0x44cc87){const _0x51d49b=a29_0x1380,_0xdb9100=_0x3341a5();while(!![]){try{const _0x2f9a0e=-parseInt(_0x51d49b(0xae))/0x1*(-parseInt(_0x51d49b(0xbb))/0x2)+-parseInt(_0x51d49b(0xc7))/0x3*(-parseInt(_0x51d49b(0xc8))/0x4)+parseInt(_0x51d49b(0xc3))/0x5*(parseInt(_0x51d49b(0x9f))/0x6)+-parseInt(_0x51d49b(0xa4))/0x7+parseInt(_0x51d49b(0xa8))/0x8+-parseInt(_0x51d49b(0xaf))/0x9+parseInt(_0x51d49b(0xcd))/0xa;if(_0x2f9a0e===_0x44cc87)break;else _0xdb9100['push'](_0xdb9100['shift']());}catch(_0x126f6d){_0xdb9100['push'](_0xdb9100['shift']());}}}(a29_0x1199,0xb2157));function a29_0x1380(_0x92056d,_0x25bfa1){const _0x11998d=a29_0x1199();return a29_0x1380=function(_0x138029,_0x4a7911){_0x138029=_0x138029-0x96;let _0x59a1e6=_0x11998d[_0x138029];return _0x59a1e6;},a29_0x1380(_0x92056d,_0x25bfa1);}const {spawn}=require(a29_0x1fd6bc(0x9c)),path=require(a29_0x1fd6bc(0xa3)),helper=require('../../helpers/helper'),CLIUtils=require('../v2/cliUtils'),{getLoadConfigPath,sleep}=require(a29_0x1fd6bc(0xb9)),logger=require(a29_0x1fd6bc(0xd2))[a29_0x1fd6bc(0x96)];async function executeLoadTest(_0x5d687a){const _0x191176=a29_0x1fd6bc,_0x45e720={'GrRSw':function(_0x49dc1c,_0xd00804){return _0x49dc1c(_0xd00804);},'aZEgR':_0x191176(0xc4),'PWGHU':_0x191176(0xab),'aZPMo':_0x191176(0x97),'jCpOJ':function(_0x1bb6ee){return _0x1bb6ee();},'cKVbe':_0x191176(0xd4),'RHYoJ':function(_0x247f12){return _0x247f12();},'nyIMd':_0x191176(0xb2),'uSTVB':function(_0x18d1d0){return _0x18d1d0();},'TpsZe':'CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','mUGbT':_0x191176(0xbd),'QTHEO':function(_0x420e45){return _0x420e45();},'MtZpH':_0x191176(0xc0),'YxIuu':function(_0x39c8fe,_0x15ad1d,_0x56a395,_0x40271b){return _0x39c8fe(_0x15ad1d,_0x56a395,_0x40271b);},'aKsgt':_0x191176(0xd9),'zgcQo':_0x191176(0xb4),'ZGozi':_0x191176(0xa9),'ZGyHA':_0x191176(0xba),'uAAwj':_0x191176(0xbc),'QxFBX':_0x191176(0xc1),'yuATj':function(_0x9ea758){return _0x9ea758();},'Gabhn':function(_0x2d92cb){return _0x2d92cb();}};try{const _0x6d915f=process[_0x191176(0x9e)][_0x191176(0xb8)](0x2),_0x5e06f8=_0x6d915f[_0x191176(0xb8)](0x1);logger[_0x191176(0x9b)]('Executing\x20load\x20test\x20with\x20arguments:\x20'+_0x5e06f8);let _0x2b10e5={};try{logger[_0x191176(0x9b)](_0x45e720[_0x191176(0xd1)]);const _0x421d0b={};_0x421d0b[_0x191176(0xd3)]=process[_0x191176(0xb7)][_0x191176(0xd0)]||process[_0x191176(0xb7)][_0x191176(0xa7)],_0x421d0b['accessKey']=process[_0x191176(0xb7)][_0x191176(0x9a)]||process['env']['BROWSERSTACK_ACCESSKEY'],_0x2b10e5=_0x421d0b;if(!_0x2b10e5[_0x191176(0xd3)]||!_0x2b10e5[_0x191176(0xc9)]){const _0x19cf56=_0x45e720[_0x191176(0xd6)](getLoadConfigPath,_0x5d687a[_0x191176(0x9e)]);logger[_0x191176(0x9b)](_0x191176(0xbf)+_0x19cf56),_0x19cf56&&(_0x2b10e5=helper[_0x191176(0xa2)](_0x19cf56));}}catch(_0x4e8f97){logger[_0x191176(0xaa)](_0x191176(0xce)+_0x4e8f97[_0x191176(0xb1)]),logger['debug']('Error\x20details:\x20'+(_0x4e8f97[_0x191176(0xa6)]||JSON[_0x191176(0xcf)](_0x4e8f97))),await _0x45e720['jCpOJ'](sleep),process[_0x191176(0xcb)](0x1);}(!_0x2b10e5[_0x191176(0xd3)]||!_0x2b10e5[_0x191176(0xc9)])&&(logger[_0x191176(0xaa)](_0x45e720[_0x191176(0xa1)]),await _0x45e720['RHYoJ'](sleep),process[_0x191176(0xcb)](0x1));const _0x429ccc=CLIUtils[_0x191176(0x99)]();!_0x429ccc&&(logger[_0x191176(0xaa)](_0x45e720['nyIMd']),await _0x45e720[_0x191176(0xc2)](sleep),process[_0x191176(0xcb)](0x1));let _0x516beb=CLIUtils['getExistingCliPath'](_0x429ccc);try{!_0x516beb?(logger[_0x191176(0x9b)](_0x45e720[_0x191176(0xc5)]),_0x516beb=await CLIUtils[_0x191176(0xa5)]('',_0x429ccc,_0x2b10e5)):(logger[_0x191176(0x9b)](_0x45e720['mUGbT']),_0x516beb=await CLIUtils[_0x191176(0xa5)](_0x516beb,_0x429ccc,_0x2b10e5));}catch(_0x22a7c9){logger[_0x191176(0xaa)](_0x45e720[_0x191176(0xa1)]),logger[_0x191176(0x9b)]('Error\x20Details:\x20'+(_0x22a7c9[_0x191176(0xa6)]||JSON['stringify'](_0x22a7c9))),await _0x45e720[_0x191176(0xca)](sleep),process['exit'](0x1);}!_0x516beb&&(logger['error'](_0x45e720[_0x191176(0xa1)]),logger[_0x191176(0x9b)](_0x45e720[_0x191176(0x9d)]),await _0x45e720[_0x191176(0xbe)](sleep),process['exit'](0x1));logger[_0x191176(0x9b)](_0x191176(0xd7)+_0x516beb+'\x20load\x20'+_0x5e06f8[_0x191176(0xc6)]('\x20'));const _0x4332b0=_0x45e720['YxIuu'](spawn,_0x516beb,[_0x45e720[_0x191176(0xb6)],..._0x5e06f8],{'stdio':_0x45e720['zgcQo']});let _0x34180f=![];const _0x85f511=new Promise(_0x58934f=>{const _0x410454=_0x191176,_0x533c29={'Puvmz':function(_0x560b47,_0x2fec1e){const _0x3451af=a29_0x1380;return _0x45e720[_0x3451af(0xd6)](_0x560b47,_0x2fec1e);}};_0x4332b0['on'](_0x45e720[_0x410454(0xac)],_0x22f89b=>{const _0x48514c=_0x410454;logger['debug'](_0x516beb+_0x48514c(0xad)+_0x22f89b),_0x533c29['Puvmz'](_0x58934f,_0x22f89b);});});[_0x45e720[_0x191176(0x98)],_0x45e720['ZGyHA'],_0x45e720['uAAwj'],_0x45e720['QxFBX']][_0x191176(0xcc)](_0x4a080d=>{const _0x4a4ae9=_0x191176,_0x37eb70={};_0x37eb70[_0x4a4ae9(0xa0)]=_0x45e720['PWGHU'];const _0x1db9b8=_0x37eb70;process['on'](_0x4a080d,()=>{const _0x1d1c0d=_0x4a4ae9;if(_0x34180f)return;_0x34180f=!![],logger['debug']('Received\x20'+_0x4a080d+',\x20forwarding\x20to\x20child\x20process...'),_0x4332b0&&!_0x4332b0[_0x1d1c0d(0xd5)]&&(_0x4332b0[_0x1d1c0d(0xd8)](_0x4a080d),logger[_0x1d1c0d(0x9b)](_0x1db9b8['MfdUX']));});});const _0x57d256=await _0x85f511;await _0x45e720[_0x191176(0xb3)](sleep),process[_0x191176(0xcb)](_0x57d256);}catch(_0x534309){logger[_0x191176(0xaa)](_0x191176(0xb0)+_0x534309['message']),logger[_0x191176(0x9b)]('Error\x20details:\x20'+(_0x534309['stack']||JSON[_0x191176(0xcf)](_0x534309))),await _0x45e720[_0x191176(0xb5)](sleep),process[_0x191176(0xcb)](0x1);}}module['exports']=executeLoadTest;function a29_0x1199(){const _0x387424=['Gabhn','aKsgt','env','slice','./loadUtils','SIGTERM','140ahCLNw','SIGQUIT','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','jCpOJ','Configuration\x20path:\x20','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','SIGHUP','uSTVB','210010zJxakt','close','TpsZe','join','16386UwpwTB','996taJrOd','accessKey','QTHEO','exit','forEach','6867260ZsaTgm','Error\x20loading\x20configuration:\x20','stringify','BROWSERSTACK_USERNAME','aZPMo','../../helpers/logger','userName','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','killed','GrRSw','Spawning:\x20','kill','load','winstonLogger','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','ZGozi','getCliDir','BROWSERSTACK_ACCESS_KEY','debug','child_process','MtZpH','argv','12GdLNBp','MfdUX','cKVbe','readConfig','path','7657657EXUOgM','checkAndUpdateCli','stack','BROWSERSTACK_USER','2877392YXFEjF','SIGINT','error','Waiting\x20for\x20child\x20process\x20to\x20exit...','aZEgR','\x20exited\x20with\x20code\x20','5482MMEhLe','9457200vZGHpX','Failed\x20initiating\x20load\x20test:\x20','message','Failed\x20to\x20determine\x20CLI\x20directory','yuATj','inherit'];a29_0x1199=function(){return _0x387424;};return a29_0x1199();}