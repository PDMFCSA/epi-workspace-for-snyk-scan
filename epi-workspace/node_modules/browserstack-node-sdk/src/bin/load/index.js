#!/usr/bin/env node
'use strict';const a27_0x1df492=a27_0x5c8f;(function(_0x5c4d22,_0x5888d1){const _0x4ffd8d=a27_0x5c8f,_0x1558ad=_0x5c4d22();while(!![]){try{const _0x2caa98=-parseInt(_0x4ffd8d(0x1ed))/0x1*(-parseInt(_0x4ffd8d(0x1e8))/0x2)+parseInt(_0x4ffd8d(0x1c7))/0x3*(parseInt(_0x4ffd8d(0x20c))/0x4)+-parseInt(_0x4ffd8d(0x1f4))/0x5*(parseInt(_0x4ffd8d(0x1f3))/0x6)+parseInt(_0x4ffd8d(0x1f5))/0x7+-parseInt(_0x4ffd8d(0x207))/0x8+parseInt(_0x4ffd8d(0x1fc))/0x9*(-parseInt(_0x4ffd8d(0x1ee))/0xa)+parseInt(_0x4ffd8d(0x20a))/0xb;if(_0x2caa98===_0x5888d1)break;else _0x1558ad['push'](_0x1558ad['shift']());}catch(_0x4c4ee0){_0x1558ad['push'](_0x1558ad['shift']());}}}(a27_0x3c7e,0x1f0bc));function a27_0x5c8f(_0x45122f,_0x263c1c){const _0x3c7e82=a27_0x3c7e();return a27_0x5c8f=function(_0x5c8f8e,_0x240b5a){_0x5c8f8e=_0x5c8f8e-0x1c5;let _0x5cf04d=_0x3c7e82[_0x5c8f8e];return _0x5cf04d;},a27_0x5c8f(_0x45122f,_0x263c1c);}function a27_0x3c7e(){const _0x7eb1ee=['killed',',\x20forwarding\x20to\x20child\x20process...','1508176lxskEK','ozXZQ','QqPaj','3500255DIrmOq','stack','465812gLUPxo','env','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','BROWSERSTACK_USERNAME','3VOGZjO','stringify','VlFJT','checkAndUpdateCli','error','SIGTERM','ZluEh','Error\x20details:\x20','path','child_process','BROWSERSTACK_ACCESS_KEY','exit','Failed\x20to\x20determine\x20CLI\x20directory','slice','../v2/cliUtils','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','userName','GhnCD','oTitg','BROWSERSTACK_ACCESSKEY','close','readConfig','message','HPveX','vdlET','gMjKF','exports','accessKey','\x20load\x20','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','debug','Received\x20','vyzjh','2234ONpkaX','LyrOC','Dhgpv','Failed\x20initiating\x20load\x20test:\x20','SIGHUP','47SkwUWE','165380Upkrvw','Error\x20loading\x20configuration:\x20','tvOWl','BROWSERSTACK_USER','DuExM','120qFnMUw','55885LGsLoQ','943313QNrxrW','cjNgR','load','getCliDir','Configuration\x20path:\x20','SIGQUIT','mEbZI','45GsWzLp','./loadUtils','xaOCr','SIGINT','\x20exited\x20with\x20code\x20','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','PrDpB','Error\x20Details:\x20','XzUlH'];a27_0x3c7e=function(){return _0x7eb1ee;};return a27_0x3c7e();}const {spawn}=require(a27_0x1df492(0x1d0)),path=require(a27_0x1df492(0x1cf)),helper=require('../../helpers/helper'),CLIUtils=require(a27_0x1df492(0x1d5)),{getLoadConfigPath,sleep}=require(a27_0x1df492(0x1fd)),logger=require('../../helpers/logger')['winstonLogger'];async function executeLoadTest(_0x5baec3){const _0x3f3f15=a27_0x1df492,_0xd754a={'vyzjh':function(_0xfeb517,_0x31574f){return _0xfeb517(_0x31574f);},'xaOCr':_0x3f3f15(0x1db),'ZluEh':'Waiting\x20for\x20child\x20process\x20to\x20exit...','mEbZI':_0x3f3f15(0x201),'VlFJT':function(_0x32e8d0){return _0x32e8d0();},'GhnCD':_0x3f3f15(0x1e4),'oTitg':function(_0x21bbe8){return _0x21bbe8();},'QqPaj':_0x3f3f15(0x1d3),'PrDpB':function(_0x4570cf){return _0x4570cf();},'gMjKF':_0x3f3f15(0x1c5),'pjFcK':'CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','tvOWl':function(_0x4484aa){return _0x4484aa();},'LyrOC':_0x3f3f15(0x1d6),'gdQBF':function(_0x44758c,_0x11c296,_0x4b600f,_0x3daee8){return _0x44758c(_0x11c296,_0x4b600f,_0x3daee8);},'HPveX':_0x3f3f15(0x1f7),'cjNgR':'inherit','vdlET':_0x3f3f15(0x1ff),'nOeZI':_0x3f3f15(0x1cc),'Dhgpv':_0x3f3f15(0x1fa),'ozXZQ':_0x3f3f15(0x1ec),'DuExM':function(_0x4a442c){return _0x4a442c();}};try{const _0x59c07b=process['argv']['slice'](0x2),_0x5449b7=_0x59c07b[_0x3f3f15(0x1d4)](0x1);logger['debug']('Executing\x20load\x20test\x20with\x20arguments:\x20'+_0x5449b7);let _0x58a2d2={};try{logger['debug'](_0xd754a[_0x3f3f15(0x1fb)]);const _0x4891b8={};_0x4891b8[_0x3f3f15(0x1d7)]=process['env'][_0x3f3f15(0x1c6)]||process['env'][_0x3f3f15(0x1f1)],_0x4891b8['accessKey']=process['env'][_0x3f3f15(0x1d1)]||process[_0x3f3f15(0x20d)][_0x3f3f15(0x1da)],_0x58a2d2=_0x4891b8;if(!_0x58a2d2[_0x3f3f15(0x1d7)]||!_0x58a2d2['accessKey']){const _0x55ffc7=_0xd754a['vyzjh'](getLoadConfigPath,_0x5baec3['argv']);logger[_0x3f3f15(0x1e5)](_0x3f3f15(0x1f9)+_0x55ffc7),_0x55ffc7&&(_0x58a2d2=helper[_0x3f3f15(0x1dc)](_0x55ffc7));}}catch(_0x3a2067){logger[_0x3f3f15(0x1cb)](_0x3f3f15(0x1ef)+_0x3a2067['message']),logger['debug'](_0x3f3f15(0x1ce)+(_0x3a2067['stack']||JSON[_0x3f3f15(0x1c8)](_0x3a2067))),await _0xd754a[_0x3f3f15(0x1c9)](sleep),process[_0x3f3f15(0x1d2)](0x1);}(!_0x58a2d2[_0x3f3f15(0x1d7)]||!_0x58a2d2[_0x3f3f15(0x1e2)])&&(logger[_0x3f3f15(0x1cb)](_0xd754a[_0x3f3f15(0x1d8)]),await _0xd754a[_0x3f3f15(0x1d9)](sleep),process[_0x3f3f15(0x1d2)](0x1));const _0x37962b=CLIUtils[_0x3f3f15(0x1f8)]();!_0x37962b&&(logger['error'](_0xd754a[_0x3f3f15(0x209)]),await _0xd754a[_0x3f3f15(0x202)](sleep),process[_0x3f3f15(0x1d2)](0x1));let _0x1537c9=CLIUtils['getExistingCliPath'](_0x37962b);try{!_0x1537c9?(logger['debug'](_0xd754a[_0x3f3f15(0x1e0)]),_0x1537c9=await CLIUtils[_0x3f3f15(0x1ca)]('',_0x37962b,_0x58a2d2)):(logger[_0x3f3f15(0x1e5)](_0xd754a['pjFcK']),_0x1537c9=await CLIUtils[_0x3f3f15(0x1ca)](_0x1537c9,_0x37962b,_0x58a2d2));}catch(_0x415b2e){logger[_0x3f3f15(0x1cb)](_0xd754a['GhnCD']),logger[_0x3f3f15(0x1e5)](_0x3f3f15(0x203)+(_0x415b2e['stack']||JSON['stringify'](_0x415b2e))),await _0xd754a[_0x3f3f15(0x1f0)](sleep),process[_0x3f3f15(0x1d2)](0x1);}!_0x1537c9&&(logger['error'](_0xd754a[_0x3f3f15(0x1d8)]),logger[_0x3f3f15(0x1e5)](_0xd754a[_0x3f3f15(0x1e9)]),await _0xd754a[_0x3f3f15(0x1c9)](sleep),process[_0x3f3f15(0x1d2)](0x1));logger[_0x3f3f15(0x1e5)]('Spawning:\x20'+_0x1537c9+_0x3f3f15(0x1e3)+_0x5449b7['join']('\x20'));const _0x2335fd=_0xd754a['gdQBF'](spawn,_0x1537c9,[_0xd754a[_0x3f3f15(0x1de)],..._0x5449b7],{'stdio':_0xd754a[_0x3f3f15(0x1f6)]});let _0x13ed18=![];const _0x4ad82a=new Promise(_0x2a823a=>{const _0x426889=_0x3f3f15;_0x2335fd['on'](_0xd754a[_0x426889(0x1fe)],_0x248d24=>{const _0x16d2ce=_0x426889;logger[_0x16d2ce(0x1e5)](_0x1537c9+_0x16d2ce(0x200)+_0x248d24),_0xd754a[_0x16d2ce(0x1e7)](_0x2a823a,_0x248d24);});});[_0xd754a[_0x3f3f15(0x1df)],_0xd754a['nOeZI'],_0xd754a[_0x3f3f15(0x1ea)],_0xd754a[_0x3f3f15(0x208)]]['forEach'](_0x226609=>{const _0x30cdd2=_0x3f3f15,_0x14be36={};_0x14be36[_0x30cdd2(0x204)]=_0xd754a[_0x30cdd2(0x1cd)];const _0x3dc3a5=_0x14be36;process['on'](_0x226609,()=>{const _0x182b5a=_0x30cdd2;if(_0x13ed18)return;_0x13ed18=!![],logger['debug'](_0x182b5a(0x1e6)+_0x226609+_0x182b5a(0x206)),_0x2335fd&&!_0x2335fd[_0x182b5a(0x205)]&&(_0x2335fd['kill'](_0x226609),logger[_0x182b5a(0x1e5)](_0x3dc3a5[_0x182b5a(0x204)]));});});const _0xb5fd9d=await _0x4ad82a;await _0xd754a[_0x3f3f15(0x1d9)](sleep),process['exit'](_0xb5fd9d);}catch(_0x4c3010){logger['error'](_0x3f3f15(0x1eb)+_0x4c3010[_0x3f3f15(0x1dd)]),logger['debug']('Error\x20details:\x20'+(_0x4c3010[_0x3f3f15(0x20b)]||JSON[_0x3f3f15(0x1c8)](_0x4c3010))),await _0xd754a[_0x3f3f15(0x1f2)](sleep),process['exit'](0x1);}}module[a27_0x1df492(0x1e1)]=executeLoadTest;