#!/usr/bin/env node
'use strict';function a28_0x3938(_0xe6b6e2,_0x4d979e){const _0x562243=a28_0x5622();return a28_0x3938=function(_0x3938be,_0x1999bc){_0x3938be=_0x3938be-0xdf;let _0x1f199b=_0x562243[_0x3938be];return _0x1f199b;},a28_0x3938(_0xe6b6e2,_0x4d979e);}const a28_0x46201b=a28_0x3938;function a28_0x5622(){const _0x22562f=['load','child_process','1861710TQcNrr','123770uXRmBb','NBQPc','19391796gwzpRG','EWNEV','stack','message','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','lBzHz','2xydkxu','gjNpJ','../v2/cliUtils',',\x20forwarding\x20to\x20child\x20process...','env','slice','IkbuU','319tCmBTN','JCPXF','BROWSERSTACK_USER','704094dEvcKE','argv','BROWSERSTACK_ACCESS_KEY','error','getCliDir','exit','readConfig','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','accessKey','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','YWhyG','7UDBpzb','debug','14296tJbGIq','Waiting\x20for\x20child\x20process\x20to\x20exit...','userName','\x20exited\x20with\x20code\x20','soCOl','ImCby','DusgS','EbxAs','Failed\x20initiating\x20load\x20test:\x20','Spawning:\x20','rMoCQ','SIGINT','../../helpers/helper','411379qJbvPa','killed','146679topyLx','inherit','EJtlN','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','32SlWHGz','../../helpers/logger','Executing\x20load\x20test\x20with\x20arguments:\x20','Configuration\x20path:\x20','BROWSERSTACK_ACCESSKEY','stringify','mmouP','Error\x20details:\x20','Error\x20loading\x20configuration:\x20','1026GVbAKq','SIGTERM','SIGHUP','path','Error\x20Details:\x20','checkAndUpdateCli','Received\x20','ADdBK','Failed\x20to\x20determine\x20CLI\x20directory','close','SIGQUIT','\x20load\x20','forEach','join','cuIRG','eMdov'];a28_0x5622=function(){return _0x22562f;};return a28_0x5622();}(function(_0x17398b,_0x359f0d){const _0x44c6d1=a28_0x3938,_0x3cb16f=_0x17398b();while(!![]){try{const _0x1a4c17=parseInt(_0x44c6d1(0x125))/0x1*(parseInt(_0x44c6d1(0x101))/0x2)+-parseInt(_0x44c6d1(0x127))/0x3*(-parseInt(_0x44c6d1(0x12b))/0x4)+parseInt(_0x44c6d1(0xf8))/0x5+-parseInt(_0x44c6d1(0x10b))/0x6*(-parseInt(_0x44c6d1(0x116))/0x7)+-parseInt(_0x44c6d1(0x118))/0x8*(-parseInt(_0x44c6d1(0xe6))/0x9)+-parseInt(_0x44c6d1(0xf9))/0xa*(-parseInt(_0x44c6d1(0x108))/0xb)+-parseInt(_0x44c6d1(0xfb))/0xc;if(_0x1a4c17===_0x359f0d)break;else _0x3cb16f['push'](_0x3cb16f['shift']());}catch(_0x355019){_0x3cb16f['push'](_0x3cb16f['shift']());}}}(a28_0x5622,0x3a522));const {spawn}=require(a28_0x46201b(0xf7)),path=require(a28_0x46201b(0xe9)),helper=require(a28_0x46201b(0x124)),CLIUtils=require(a28_0x46201b(0x103)),{getLoadConfigPath,sleep}=require('./loadUtils'),logger=require(a28_0x46201b(0x12c))['winstonLogger'];async function executeLoadTest(_0x3084c4){const _0x2929ed=a28_0x46201b,_0x1d6576={'eMdov':function(_0x4c1d1a,_0x2de41c){return _0x4c1d1a(_0x2de41c);},'lBzHz':_0x2929ed(0xef),'JCPXF':_0x2929ed(0x119),'kHUhL':_0x2929ed(0x112),'ADdBK':function(_0x54e596,_0x59275b){return _0x54e596(_0x59275b);},'soCOl':function(_0x2b5e82){return _0x2b5e82();},'EJtlN':'Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','EWNEV':_0x2929ed(0xee),'NBQPc':function(_0x4b744a){return _0x4b744a();},'NjmEr':_0x2929ed(0x114),'mmouP':_0x2929ed(0xff),'YWhyG':_0x2929ed(0x12a),'rMoCQ':function(_0x114545){return _0x114545();},'DusgS':function(_0x7dd1e2,_0x5ebc7e,_0x4e06ca,_0x367607){return _0x7dd1e2(_0x5ebc7e,_0x4e06ca,_0x367607);},'cuIRG':_0x2929ed(0xf6),'IkbuU':_0x2929ed(0x128),'gjNpJ':_0x2929ed(0x123),'ImCby':_0x2929ed(0xe7),'VoPJW':_0x2929ed(0xf0),'dnqTL':_0x2929ed(0xe8),'EbxAs':function(_0x203b1d){return _0x203b1d();}};try{const _0x85fc4=process[_0x2929ed(0x10c)][_0x2929ed(0x106)](0x2),_0x138351=_0x85fc4[_0x2929ed(0x106)](0x1);logger['debug'](_0x2929ed(0xdf)+_0x138351);let _0xb11813={};try{logger[_0x2929ed(0x117)](_0x1d6576['kHUhL']);const _0x5956d5={};_0x5956d5['userName']=process[_0x2929ed(0x105)]['BROWSERSTACK_USERNAME']||process['env'][_0x2929ed(0x10a)],_0x5956d5['accessKey']=process[_0x2929ed(0x105)][_0x2929ed(0x10d)]||process['env'][_0x2929ed(0xe1)],_0xb11813=_0x5956d5;if(!_0xb11813['userName']||!_0xb11813[_0x2929ed(0x113)]){const _0x323e5e=_0x1d6576[_0x2929ed(0xed)](getLoadConfigPath,_0x3084c4[_0x2929ed(0x10c)]);logger['debug'](_0x2929ed(0xe0)+_0x323e5e),_0x323e5e&&(_0xb11813=helper[_0x2929ed(0x111)](_0x323e5e));}}catch(_0x2914fb){logger[_0x2929ed(0x10e)](_0x2929ed(0xe5)+_0x2914fb[_0x2929ed(0xfe)]),logger[_0x2929ed(0x117)](_0x2929ed(0xe4)+(_0x2914fb[_0x2929ed(0xfd)]||JSON['stringify'](_0x2914fb))),await _0x1d6576[_0x2929ed(0x11c)](sleep),process[_0x2929ed(0x110)](0x1);}(!_0xb11813[_0x2929ed(0x11a)]||!_0xb11813[_0x2929ed(0x113)])&&(logger[_0x2929ed(0x10e)](_0x1d6576[_0x2929ed(0x129)]),await _0x1d6576[_0x2929ed(0x11c)](sleep),process[_0x2929ed(0x110)](0x1));const _0x13289c=CLIUtils[_0x2929ed(0x10f)]();!_0x13289c&&(logger[_0x2929ed(0x10e)](_0x1d6576[_0x2929ed(0xfc)]),await _0x1d6576[_0x2929ed(0xfa)](sleep),process[_0x2929ed(0x110)](0x1));let _0x508727=CLIUtils['getExistingCliPath'](_0x13289c);try{!_0x508727?(logger[_0x2929ed(0x117)](_0x1d6576['NjmEr']),_0x508727=await CLIUtils['checkAndUpdateCli']('',_0x13289c,_0xb11813)):(logger[_0x2929ed(0x117)](_0x1d6576[_0x2929ed(0xe3)]),_0x508727=await CLIUtils[_0x2929ed(0xeb)](_0x508727,_0x13289c,_0xb11813));}catch(_0x2b831f){logger[_0x2929ed(0x10e)](_0x1d6576[_0x2929ed(0x129)]),logger[_0x2929ed(0x117)](_0x2929ed(0xea)+(_0x2b831f['stack']||JSON[_0x2929ed(0xe2)](_0x2b831f))),await _0x1d6576['soCOl'](sleep),process[_0x2929ed(0x110)](0x1);}!_0x508727&&(logger[_0x2929ed(0x10e)](_0x1d6576['EJtlN']),logger[_0x2929ed(0x117)](_0x1d6576[_0x2929ed(0x115)]),await _0x1d6576[_0x2929ed(0x122)](sleep),process[_0x2929ed(0x110)](0x1));logger[_0x2929ed(0x117)](_0x2929ed(0x121)+_0x508727+_0x2929ed(0xf1)+_0x138351[_0x2929ed(0xf3)]('\x20'));const _0x13ed11=_0x1d6576[_0x2929ed(0x11e)](spawn,_0x508727,[_0x1d6576[_0x2929ed(0xf4)],..._0x138351],{'stdio':_0x1d6576[_0x2929ed(0x107)]});let _0x246709=![];const _0x2f476b=new Promise(_0x1f5940=>{const _0x27808e=_0x2929ed;_0x13ed11['on'](_0x1d6576[_0x27808e(0x100)],_0x4db782=>{const _0x3c7f73=_0x27808e;logger[_0x3c7f73(0x117)](_0x508727+_0x3c7f73(0x11b)+_0x4db782),_0x1d6576[_0x3c7f73(0xf5)](_0x1f5940,_0x4db782);});});[_0x1d6576[_0x2929ed(0x102)],_0x1d6576[_0x2929ed(0x11d)],_0x1d6576['VoPJW'],_0x1d6576['dnqTL']][_0x2929ed(0xf2)](_0x22ab79=>{process['on'](_0x22ab79,()=>{const _0x5cf5b0=a28_0x3938;if(_0x246709)return;_0x246709=!![],logger[_0x5cf5b0(0x117)](_0x5cf5b0(0xec)+_0x22ab79+_0x5cf5b0(0x104)),_0x13ed11&&!_0x13ed11[_0x5cf5b0(0x126)]&&(_0x13ed11['kill'](_0x22ab79),logger['debug'](_0x1d6576[_0x5cf5b0(0x109)]));});});const _0x2fde3a=await _0x2f476b;await _0x1d6576[_0x2929ed(0x11f)](sleep),process[_0x2929ed(0x110)](_0x2fde3a);}catch(_0x3ef25c){logger['error'](_0x2929ed(0x120)+_0x3ef25c['message']),logger['debug'](_0x2929ed(0xe4)+(_0x3ef25c[_0x2929ed(0xfd)]||JSON['stringify'](_0x3ef25c))),await _0x1d6576[_0x2929ed(0x11f)](sleep),process[_0x2929ed(0x110)](0x1);}}module['exports']=executeLoadTest;