#!/usr/bin/env node
'use strict';const a27_0xa640d9=a27_0x3960;(function(_0x38c7c2,_0x143b52){const _0x4eb988=a27_0x3960,_0x49e1e1=_0x38c7c2();while(!![]){try{const _0x47999a=parseInt(_0x4eb988(0x1a5))/0x1+-parseInt(_0x4eb988(0x1af))/0x2+parseInt(_0x4eb988(0x192))/0x3*(-parseInt(_0x4eb988(0x1b4))/0x4)+-parseInt(_0x4eb988(0x182))/0x5+parseInt(_0x4eb988(0x18c))/0x6+parseInt(_0x4eb988(0x17d))/0x7+parseInt(_0x4eb988(0x1b1))/0x8;if(_0x47999a===_0x143b52)break;else _0x49e1e1['push'](_0x49e1e1['shift']());}catch(_0x18f0b2){_0x49e1e1['push'](_0x49e1e1['shift']());}}}(a27_0xdcb8,0xad5a0));const {spawn}=require('child_process'),path=require(a27_0xa640d9(0x186)),helper=require(a27_0xa640d9(0x18d)),CLIUtils=require(a27_0xa640d9(0x17f)),{getLoadConfigPath,sleep}=require('./loadUtils'),logger=require(a27_0xa640d9(0x1ad))['winstonLogger'];async function executeLoadTest(_0x54d424){const _0x3cf944=a27_0xa640d9,_0x21b551={'DaXnE':function(_0x27a4e9,_0x3dc23a){return _0x27a4e9(_0x3dc23a);},'yywQL':_0x3cf944(0x1a2),'RXgJP':'Waiting\x20for\x20child\x20process\x20to\x20exit...','hRlqP':_0x3cf944(0x17e),'AAMrZ':function(_0x5e2ede,_0x5e9e0a){return _0x5e2ede(_0x5e9e0a);},'GWBzn':function(_0x8f7fb9){return _0x8f7fb9();},'gRYle':_0x3cf944(0x1a1),'vKXZh':_0x3cf944(0x17c),'TBKAF':_0x3cf944(0x175),'mJAHC':_0x3cf944(0x184),'Mvyxq':_0x3cf944(0x179),'ImETL':function(_0x3529eb,_0x467a9b,_0xa792b6,_0xec33e4){return _0x3529eb(_0x467a9b,_0xa792b6,_0xec33e4);},'vLZbx':_0x3cf944(0x193),'qduos':_0x3cf944(0x1b7),'lHUAf':_0x3cf944(0x18b),'jVGtX':_0x3cf944(0x181),'mmfEr':_0x3cf944(0x18f),'JVMWf':_0x3cf944(0x1b5),'OfPeO':function(_0x2b8b73){return _0x2b8b73();}};try{const _0x32912f=process['argv'][_0x3cf944(0x190)](0x2),_0xb182c2=_0x32912f[_0x3cf944(0x190)](0x1);logger['debug']('Executing\x20load\x20test\x20with\x20arguments:\x20'+_0xb182c2);let _0x10638f={};try{logger[_0x3cf944(0x1a9)](_0x21b551[_0x3cf944(0x171)]);const _0x1d3641={};_0x1d3641[_0x3cf944(0x196)]=process[_0x3cf944(0x194)]['BROWSERSTACK_USERNAME']||process[_0x3cf944(0x194)][_0x3cf944(0x197)],_0x1d3641[_0x3cf944(0x188)]=process[_0x3cf944(0x194)]['BROWSERSTACK_ACCESS_KEY']||process['env'][_0x3cf944(0x1b6)],_0x10638f=_0x1d3641;if(!_0x10638f[_0x3cf944(0x196)]||!_0x10638f[_0x3cf944(0x188)]){const _0x29ad82=_0x21b551['AAMrZ'](getLoadConfigPath,_0x54d424[_0x3cf944(0x18e)]);logger['debug'](_0x3cf944(0x19d)+_0x29ad82),_0x29ad82&&(_0x10638f=helper[_0x3cf944(0x18a)](_0x29ad82));}}catch(_0x55db56){logger['error'](_0x3cf944(0x1b3)+_0x55db56[_0x3cf944(0x19c)]),logger['debug'](_0x3cf944(0x1ae)+(_0x55db56[_0x3cf944(0x19a)]||JSON[_0x3cf944(0x198)](_0x55db56))),await _0x21b551[_0x3cf944(0x195)](sleep),process[_0x3cf944(0x172)](0x1);}(!_0x10638f[_0x3cf944(0x196)]||!_0x10638f[_0x3cf944(0x188)])&&(logger[_0x3cf944(0x19b)](_0x21b551['gRYle']),await _0x21b551['GWBzn'](sleep),process[_0x3cf944(0x172)](0x1));const _0xe15cf9=CLIUtils[_0x3cf944(0x1a0)]();!_0xe15cf9&&(logger['error'](_0x21b551[_0x3cf944(0x1a8)]),await _0x21b551[_0x3cf944(0x195)](sleep),process['exit'](0x1));let _0x13a195=CLIUtils[_0x3cf944(0x1a7)](_0xe15cf9);try{!_0x13a195?(logger[_0x3cf944(0x1a9)](_0x21b551[_0x3cf944(0x187)]),_0x13a195=await CLIUtils['checkAndUpdateCli']('',_0xe15cf9,_0x10638f)):(logger['debug'](_0x21b551[_0x3cf944(0x17a)]),_0x13a195=await CLIUtils[_0x3cf944(0x1a3)](_0x13a195,_0xe15cf9,_0x10638f));}catch(_0x3e3e7e){logger['error'](_0x21b551['gRYle']),logger[_0x3cf944(0x1a9)](_0x3cf944(0x174)+(_0x3e3e7e[_0x3cf944(0x19a)]||JSON[_0x3cf944(0x198)](_0x3e3e7e))),await _0x21b551[_0x3cf944(0x195)](sleep),process['exit'](0x1);}!_0x13a195&&(logger[_0x3cf944(0x19b)](_0x21b551[_0x3cf944(0x185)]),logger[_0x3cf944(0x1a9)](_0x21b551[_0x3cf944(0x19f)]),await _0x21b551[_0x3cf944(0x195)](sleep),process['exit'](0x1));logger[_0x3cf944(0x1a9)]('Spawning:\x20'+_0x13a195+_0x3cf944(0x1b0)+_0xb182c2[_0x3cf944(0x199)]('\x20'));const _0x517135=_0x21b551[_0x3cf944(0x19e)](spawn,_0x13a195,[_0x21b551[_0x3cf944(0x1ab)],..._0xb182c2],{'stdio':_0x21b551[_0x3cf944(0x17b)]});let _0x3adce8=![];const _0x2e2ee2=new Promise(_0x1fa770=>{const _0x5a75ca=_0x3cf944,_0x565133={'GhuQq':function(_0x14086d,_0x33a7d1){const _0x57754a=a27_0x3960;return _0x21b551[_0x57754a(0x1ac)](_0x14086d,_0x33a7d1);}};_0x517135['on'](_0x21b551[_0x5a75ca(0x180)],_0x49a1ba=>{const _0x571b2f=_0x5a75ca;logger[_0x571b2f(0x1a9)](_0x13a195+_0x571b2f(0x178)+_0x49a1ba),_0x565133['GhuQq'](_0x1fa770,_0x49a1ba);});});[_0x21b551[_0x3cf944(0x189)],_0x21b551[_0x3cf944(0x170)],_0x21b551[_0x3cf944(0x176)],_0x21b551[_0x3cf944(0x173)]]['forEach'](_0x242270=>{const _0x209081=_0x3cf944,_0x358242={};_0x358242[_0x209081(0x1b2)]=_0x21b551[_0x209081(0x177)];const _0x25df51=_0x358242;process['on'](_0x242270,()=>{const _0x13f4b6=_0x209081;if(_0x3adce8)return;_0x3adce8=!![],logger['debug'](_0x13f4b6(0x183)+_0x242270+_0x13f4b6(0x1aa)),_0x517135&&!_0x517135[_0x13f4b6(0x1a4)]&&(_0x517135[_0x13f4b6(0x1a6)](_0x242270),logger['debug'](_0x25df51['RutPw']));});});const _0x2f9667=await _0x2e2ee2;await _0x21b551['OfPeO'](sleep),process[_0x3cf944(0x172)](_0x2f9667);}catch(_0x2fe1f9){logger['error'](_0x3cf944(0x191)+_0x2fe1f9[_0x3cf944(0x19c)]),logger[_0x3cf944(0x1a9)]('Error\x20details:\x20'+(_0x2fe1f9[_0x3cf944(0x19a)]||JSON[_0x3cf944(0x198)](_0x2fe1f9))),await _0x21b551['OfPeO'](sleep),process[_0x3cf944(0x172)](0x1);}}module['exports']=executeLoadTest;function a27_0x3960(_0x4c53eb,_0x5b26e7){const _0xdcb8c1=a27_0xdcb8();return a27_0x3960=function(_0x3960dc,_0x3ef506){_0x3960dc=_0x3960dc-0x170;let _0x596eca=_0xdcb8c1[_0x3960dc];return _0x596eca;},a27_0x3960(_0x4c53eb,_0x5b26e7);}function a27_0xdcb8(){const _0x3f2ebf=['Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','mJAHC','qduos','Failed\x20to\x20determine\x20CLI\x20directory','249060DKSvIz','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','../v2/cliUtils','yywQL','SIGTERM','5669740PITLDf','Received\x20','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','gRYle','path','TBKAF','accessKey','lHUAf','readConfig','SIGINT','5203290fGBnaV','../../helpers/helper','argv','SIGQUIT','slice','Failed\x20initiating\x20load\x20test:\x20','15927FAXsUQ','load','env','GWBzn','userName','BROWSERSTACK_USER','stringify','join','stack','error','message','Configuration\x20path:\x20','ImETL','Mvyxq','getCliDir','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','close','checkAndUpdateCli','killed','876065mDCGEM','kill','getExistingCliPath','vKXZh','debug',',\x20forwarding\x20to\x20child\x20process...','vLZbx','DaXnE','../../helpers/logger','Error\x20details:\x20','275532IxNEJK','\x20load\x20','8333792GXhexm','RutPw','Error\x20loading\x20configuration:\x20','632JaOJcE','SIGHUP','BROWSERSTACK_ACCESSKEY','inherit','jVGtX','hRlqP','exit','JVMWf','Error\x20Details:\x20','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','mmfEr','RXgJP','\x20exited\x20with\x20code\x20'];a27_0xdcb8=function(){return _0x3f2ebf;};return a27_0xdcb8();}