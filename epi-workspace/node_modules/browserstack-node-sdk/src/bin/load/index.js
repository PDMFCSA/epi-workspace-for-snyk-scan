#!/usr/bin/env node
'use strict';const a29_0x1c525e=a29_0x200a;(function(_0x446b92,_0x1fb09e){const _0x530ccf=a29_0x200a,_0x1d9a67=_0x446b92();while(!![]){try{const _0x3eadcc=-parseInt(_0x530ccf(0x203))/0x1+parseInt(_0x530ccf(0x20b))/0x2*(parseInt(_0x530ccf(0x1ef))/0x3)+-parseInt(_0x530ccf(0x1ce))/0x4+parseInt(_0x530ccf(0x1ed))/0x5*(parseInt(_0x530ccf(0x1d2))/0x6)+parseInt(_0x530ccf(0x1ea))/0x7*(-parseInt(_0x530ccf(0x201))/0x8)+parseInt(_0x530ccf(0x1f9))/0x9+-parseInt(_0x530ccf(0x200))/0xa;if(_0x3eadcc===_0x1fb09e)break;else _0x1d9a67['push'](_0x1d9a67['shift']());}catch(_0x1d4023){_0x1d9a67['push'](_0x1d9a67['shift']());}}}(a29_0x1f06,0x62863));function a29_0x200a(_0x4b9a63,_0x78ed23){const _0x1f06bb=a29_0x1f06();return a29_0x200a=function(_0x200a1f,_0x92caeb){_0x200a1f=_0x200a1f-0x1cc;let _0x3deaed=_0x1f06bb[_0x200a1f];return _0x3deaed;},a29_0x200a(_0x4b9a63,_0x78ed23);}const {spawn}=require(a29_0x1c525e(0x1de)),path=require('path'),helper=require('../../helpers/helper'),CLIUtils=require(a29_0x1c525e(0x1d5)),{getLoadConfigPath,sleep}=require(a29_0x1c525e(0x1f4)),logger=require(a29_0x1c525e(0x1d0))[a29_0x1c525e(0x1e5)];function a29_0x1f06(){const _0x3b4a0c=['close','5109USMklu','glmHD','getCliDir',',\x20forwarding\x20to\x20child\x20process...','FszzB','./loadUtils','BqoNQ','checkAndUpdateCli','Spawning:\x20','pgNUE','2287188FpRZwy','load','inherit','Error\x20Details:\x20','Failed\x20initiating\x20load\x20test:\x20','UzLIC','ZLYfF','5254170eCGMEk','155728NvkXxw','MUASI','101912YEyeYu','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','accessKey','WMFrN','Error\x20details:\x20','uJzgS','Configuration\x20path:\x20','stack','832CGuEwV','Executing\x20load\x20test\x20with\x20arguments:\x20','mpjCR','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','exports','SIGINT','env','fmBYC','join','message','2107936WtyDDX','IbUmq','../../helpers/logger','TKZtX','258DfWEuu','argv','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','../v2/cliUtils','stringify','\x20load\x20','PPzaZ','GYzaZ','SIGHUP','Received\x20','debug','exit','child_process','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','error','Waiting\x20for\x20child\x20process\x20to\x20exit...','wZbzu','userName','BROWSERSTACK_USERNAME','winstonLogger','slice','\x20exited\x20with\x20code\x20','ycyYL','SIGTERM','21AhTYrA','getExistingCliPath','readConfig','76010kibcyH'];a29_0x1f06=function(){return _0x3b4a0c;};return a29_0x1f06();}async function executeLoadTest(_0x40c44b){const _0xb79b29=a29_0x1c525e,_0x49c085={'TKZtX':function(_0x4dbe5a,_0x1492d4){return _0x4dbe5a(_0x1492d4);},'GYzaZ':_0xb79b29(0x1ee),'KXytV':_0xb79b29(0x1e1),'PPzaZ':_0xb79b29(0x204),'BqoNQ':function(_0x565730){return _0x565730();},'IbUmq':'Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','mpjCR':function(_0x54dd1c){return _0x54dd1c();},'ycyYL':'Failed\x20to\x20determine\x20CLI\x20directory','FszzB':function(_0x882546){return _0x882546();},'gAHfR':_0xb79b29(0x1df),'WMFrN':_0xb79b29(0x20e),'DFiai':_0xb79b29(0x1d4),'pgNUE':function(_0x508749){return _0x508749();},'MUASI':function(_0x597dc6,_0x161d61,_0x442ad1,_0x56e28d){return _0x597dc6(_0x161d61,_0x442ad1,_0x56e28d);},'uJzgS':_0xb79b29(0x1fa),'wZbzu':_0xb79b29(0x1fb),'iZWGO':_0xb79b29(0x210),'UzLIC':_0xb79b29(0x1e9),'ZLYfF':'SIGQUIT','fmBYC':_0xb79b29(0x1da),'HQBZM':function(_0x5096ec){return _0x5096ec();}};try{const _0x2f11a2=process['argv'][_0xb79b29(0x1e6)](0x2),_0x2e54e8=_0x2f11a2['slice'](0x1);logger[_0xb79b29(0x1dc)](_0xb79b29(0x20c)+_0x2e54e8);let _0x34d1ad={};try{logger[_0xb79b29(0x1dc)](_0x49c085[_0xb79b29(0x1d8)]);const _0x5d645d={};_0x5d645d['userName']=process[_0xb79b29(0x211)][_0xb79b29(0x1e4)]||process[_0xb79b29(0x211)]['BROWSERSTACK_USER'],_0x5d645d[_0xb79b29(0x205)]=process[_0xb79b29(0x211)]['BROWSERSTACK_ACCESS_KEY']||process[_0xb79b29(0x211)]['BROWSERSTACK_ACCESSKEY'],_0x34d1ad=_0x5d645d;if(!_0x34d1ad[_0xb79b29(0x1e3)]||!_0x34d1ad[_0xb79b29(0x205)]){const _0x1f7b7d=_0x49c085[_0xb79b29(0x1d1)](getLoadConfigPath,_0x40c44b[_0xb79b29(0x1d3)]);logger['debug'](_0xb79b29(0x209)+_0x1f7b7d),_0x1f7b7d&&(_0x34d1ad=helper[_0xb79b29(0x1ec)](_0x1f7b7d));}}catch(_0x45ca87){logger['error']('Error\x20loading\x20configuration:\x20'+_0x45ca87['message']),logger['debug'](_0xb79b29(0x207)+(_0x45ca87[_0xb79b29(0x20a)]||JSON[_0xb79b29(0x1d6)](_0x45ca87))),await _0x49c085[_0xb79b29(0x1f5)](sleep),process[_0xb79b29(0x1dd)](0x1);}(!_0x34d1ad[_0xb79b29(0x1e3)]||!_0x34d1ad[_0xb79b29(0x205)])&&(logger[_0xb79b29(0x1e0)](_0x49c085[_0xb79b29(0x1cf)]),await _0x49c085[_0xb79b29(0x20d)](sleep),process[_0xb79b29(0x1dd)](0x1));const _0xba3b5b=CLIUtils[_0xb79b29(0x1f1)]();!_0xba3b5b&&(logger[_0xb79b29(0x1e0)](_0x49c085[_0xb79b29(0x1e8)]),await _0x49c085[_0xb79b29(0x1f3)](sleep),process['exit'](0x1));let _0x43f2f6=CLIUtils[_0xb79b29(0x1eb)](_0xba3b5b);try{!_0x43f2f6?(logger[_0xb79b29(0x1dc)](_0x49c085['gAHfR']),_0x43f2f6=await CLIUtils['checkAndUpdateCli']('',_0xba3b5b,_0x34d1ad)):(logger[_0xb79b29(0x1dc)](_0x49c085[_0xb79b29(0x206)]),_0x43f2f6=await CLIUtils[_0xb79b29(0x1f6)](_0x43f2f6,_0xba3b5b,_0x34d1ad));}catch(_0x5a188a){logger[_0xb79b29(0x1e0)](_0x49c085[_0xb79b29(0x1cf)]),logger[_0xb79b29(0x1dc)](_0xb79b29(0x1fc)+(_0x5a188a[_0xb79b29(0x20a)]||JSON['stringify'](_0x5a188a))),await _0x49c085[_0xb79b29(0x1f5)](sleep),process['exit'](0x1);}!_0x43f2f6&&(logger[_0xb79b29(0x1e0)](_0x49c085[_0xb79b29(0x1cf)]),logger[_0xb79b29(0x1dc)](_0x49c085['DFiai']),await _0x49c085[_0xb79b29(0x1f8)](sleep),process[_0xb79b29(0x1dd)](0x1));logger[_0xb79b29(0x1dc)](_0xb79b29(0x1f7)+_0x43f2f6+_0xb79b29(0x1d7)+_0x2e54e8[_0xb79b29(0x1cc)]('\x20'));const _0x3af202=_0x49c085[_0xb79b29(0x202)](spawn,_0x43f2f6,[_0x49c085[_0xb79b29(0x208)],..._0x2e54e8],{'stdio':_0x49c085[_0xb79b29(0x1e2)]});let _0x1582ec=![];const _0x5ecb38=new Promise(_0x39233b=>{const _0x42f9ae=_0xb79b29,_0x2307a1={'glmHD':function(_0x548eee,_0x235671){const _0x51f7f4=a29_0x200a;return _0x49c085[_0x51f7f4(0x1d1)](_0x548eee,_0x235671);}};_0x3af202['on'](_0x49c085[_0x42f9ae(0x1d9)],_0x3d7e39=>{const _0x3ffa8b=_0x42f9ae;logger[_0x3ffa8b(0x1dc)](_0x43f2f6+_0x3ffa8b(0x1e7)+_0x3d7e39),_0x2307a1[_0x3ffa8b(0x1f0)](_0x39233b,_0x3d7e39);});});[_0x49c085['iZWGO'],_0x49c085[_0xb79b29(0x1fe)],_0x49c085[_0xb79b29(0x1ff)],_0x49c085[_0xb79b29(0x212)]]['forEach'](_0x669efd=>{process['on'](_0x669efd,()=>{const _0x421e1a=a29_0x200a;if(_0x1582ec)return;_0x1582ec=!![],logger[_0x421e1a(0x1dc)](_0x421e1a(0x1db)+_0x669efd+_0x421e1a(0x1f2)),_0x3af202&&!_0x3af202['killed']&&(_0x3af202['kill'](_0x669efd),logger[_0x421e1a(0x1dc)](_0x49c085['KXytV']));});});const _0x42882b=await _0x5ecb38;await _0x49c085['HQBZM'](sleep),process[_0xb79b29(0x1dd)](_0x42882b);}catch(_0x44362d){logger[_0xb79b29(0x1e0)](_0xb79b29(0x1fd)+_0x44362d[_0xb79b29(0x1cd)]),logger[_0xb79b29(0x1dc)]('Error\x20details:\x20'+(_0x44362d['stack']||JSON['stringify'](_0x44362d))),await _0x49c085[_0xb79b29(0x20d)](sleep),process['exit'](0x1);}}module[a29_0x1c525e(0x20f)]=executeLoadTest;