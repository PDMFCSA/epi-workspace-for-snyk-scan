#!/usr/bin/env node
'use strict';const a28_0x2bde40=a28_0x59e1;(function(_0x39b4c7,_0x39fb65){const _0x331f6f=a28_0x59e1,_0x440e32=_0x39b4c7();while(!![]){try{const _0x2cd5f2=parseInt(_0x331f6f(0x183))/0x1+parseInt(_0x331f6f(0x1ab))/0x2*(-parseInt(_0x331f6f(0x18a))/0x3)+parseInt(_0x331f6f(0x1ad))/0x4+parseInt(_0x331f6f(0x1c2))/0x5*(parseInt(_0x331f6f(0x1b8))/0x6)+-parseInt(_0x331f6f(0x1b5))/0x7*(parseInt(_0x331f6f(0x1b7))/0x8)+-parseInt(_0x331f6f(0x1bf))/0x9+-parseInt(_0x331f6f(0x19e))/0xa;if(_0x2cd5f2===_0x39fb65)break;else _0x440e32['push'](_0x440e32['shift']());}catch(_0x6ee6ae){_0x440e32['push'](_0x440e32['shift']());}}}(a28_0x16a6,0xb4597));function a28_0x16a6(){const _0x5244bc=['CHQtr','VClED','hzxTY','SIGQUIT','slice','gblFt','kill','wwhds','Executing\x20load\x20test\x20with\x20arguments:\x20','\x20exited\x20with\x20code\x20','8PONKle','zBvbr','4844140XEzYjx','eGabz','\x20load\x20','axhcw','Failed\x20to\x20determine\x20CLI\x20directory','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','OUDVM','userName','3640791DSvgrm','CCIIH','8MqTvTk','246516KLCCmo','path',',\x20forwarding\x20to\x20child\x20process...','BROWSERSTACK_USER','debug','accessKey','BROWSERSTACK_ACCESS_KEY','1911357atCuVP','SIGHUP','env','160gJREgx','argv','exit','Error\x20details:\x20','checkAndUpdateCli','VWFoM','535690PtCTNN','stringify','getExistingCliPath','Failed\x20initiating\x20load\x20test:\x20','../v2/cliUtils','BROWSERSTACK_ACCESSKEY','AYpOD','867021oVVbai','Received\x20','tUWYF','../../helpers/helper','Configuration\x20path:\x20','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','EEjcR','stack','exports','gIlzw','CkxsD','./loadUtils','loHeI','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','HQLGW','BROWSERSTACK_USERNAME','message','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','winstonLogger','error','4342520KhXqHE','SIGINT','../../helpers/logger'];a28_0x16a6=function(){return _0x5244bc;};return a28_0x16a6();}function a28_0x59e1(_0xe95758,_0x26bf76){const _0x16a6d0=a28_0x16a6();return a28_0x59e1=function(_0x59e19a,_0x3d48ba){_0x59e19a=_0x59e19a-0x183;let _0x3d95d0=_0x16a6d0[_0x59e19a];return _0x3d95d0;},a28_0x59e1(_0xe95758,_0x26bf76);}const {spawn}=require('child_process'),path=require(a28_0x2bde40(0x1b9)),helper=require(a28_0x2bde40(0x18d)),CLIUtils=require(a28_0x2bde40(0x187)),{getLoadConfigPath,sleep}=require(a28_0x2bde40(0x195)),logger=require(a28_0x2bde40(0x1a0))[a28_0x2bde40(0x19c)];async function executeLoadTest(_0x13e2ae){const _0x5770f8=a28_0x2bde40,_0x5786c={'zBvbr':function(_0x342a1e,_0x6ec762){return _0x342a1e(_0x6ec762);},'AYpOD':'close','wwhds':'Waiting\x20for\x20child\x20process\x20to\x20exit...','EEjcR':_0x5770f8(0x197),'CCIIH':function(_0x3bcb57,_0x3b143f){return _0x3bcb57(_0x3b143f);},'hzxTY':function(_0x2e9757){return _0x2e9757();},'VClED':_0x5770f8(0x19b),'tUWYF':_0x5770f8(0x1b1),'gblFt':_0x5770f8(0x1b2),'eGabz':'CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','Mudop':_0x5770f8(0x18f),'axhcw':function(_0x51ebb6,_0x2b00aa,_0x7de5aa,_0x225e47){return _0x51ebb6(_0x2b00aa,_0x7de5aa,_0x225e47);},'HdNoB':'load','CkxsD':'inherit','loHeI':_0x5770f8(0x19f),'CHQtr':'SIGTERM','bzTJs':_0x5770f8(0x1a4),'RiVaC':_0x5770f8(0x1c0),'HQLGW':function(_0x2d669b){return _0x2d669b();},'VWFoM':function(_0x299057){return _0x299057();}};try{const _0x7dbcf2=process[_0x5770f8(0x1c3)]['slice'](0x2),_0xeaa423=_0x7dbcf2[_0x5770f8(0x1a5)](0x1);logger[_0x5770f8(0x1bc)](_0x5770f8(0x1a9)+_0xeaa423);let _0x4f2a5c={};try{logger[_0x5770f8(0x1bc)](_0x5786c[_0x5770f8(0x190)]);const _0x223761={};_0x223761[_0x5770f8(0x1b4)]=process[_0x5770f8(0x1c1)][_0x5770f8(0x199)]||process[_0x5770f8(0x1c1)][_0x5770f8(0x1bb)],_0x223761[_0x5770f8(0x1bd)]=process[_0x5770f8(0x1c1)][_0x5770f8(0x1be)]||process[_0x5770f8(0x1c1)][_0x5770f8(0x188)],_0x4f2a5c=_0x223761;if(!_0x4f2a5c[_0x5770f8(0x1b4)]||!_0x4f2a5c['accessKey']){const _0x405930=_0x5786c[_0x5770f8(0x1b6)](getLoadConfigPath,_0x13e2ae[_0x5770f8(0x1c3)]);logger[_0x5770f8(0x1bc)](_0x5770f8(0x18e)+_0x405930),_0x405930&&(_0x4f2a5c=helper['readConfig'](_0x405930));}}catch(_0x44a09a){logger[_0x5770f8(0x19d)]('Error\x20loading\x20configuration:\x20'+_0x44a09a[_0x5770f8(0x19a)]),logger[_0x5770f8(0x1bc)](_0x5770f8(0x1c5)+(_0x44a09a[_0x5770f8(0x191)]||JSON[_0x5770f8(0x184)](_0x44a09a))),await _0x5786c[_0x5770f8(0x1a3)](sleep),process['exit'](0x1);}(!_0x4f2a5c['userName']||!_0x4f2a5c[_0x5770f8(0x1bd)])&&(logger['error'](_0x5786c['VClED']),await _0x5786c[_0x5770f8(0x1a3)](sleep),process[_0x5770f8(0x1c4)](0x1));const _0x1a74b6=CLIUtils['getCliDir']();!_0x1a74b6&&(logger['error'](_0x5786c[_0x5770f8(0x18c)]),await _0x5786c[_0x5770f8(0x1a3)](sleep),process['exit'](0x1));let _0x2c50d8=CLIUtils[_0x5770f8(0x185)](_0x1a74b6);try{!_0x2c50d8?(logger['debug'](_0x5786c[_0x5770f8(0x1a6)]),_0x2c50d8=await CLIUtils['checkAndUpdateCli']('',_0x1a74b6,_0x4f2a5c)):(logger[_0x5770f8(0x1bc)](_0x5786c[_0x5770f8(0x1ae)]),_0x2c50d8=await CLIUtils[_0x5770f8(0x1c6)](_0x2c50d8,_0x1a74b6,_0x4f2a5c));}catch(_0x2b394f){logger[_0x5770f8(0x19d)](_0x5786c[_0x5770f8(0x1a2)]),logger[_0x5770f8(0x1bc)]('Error\x20Details:\x20'+(_0x2b394f[_0x5770f8(0x191)]||JSON['stringify'](_0x2b394f))),await _0x5786c[_0x5770f8(0x1a3)](sleep),process[_0x5770f8(0x1c4)](0x1);}!_0x2c50d8&&(logger[_0x5770f8(0x19d)](_0x5786c[_0x5770f8(0x1a2)]),logger[_0x5770f8(0x1bc)](_0x5786c['Mudop']),await _0x5786c[_0x5770f8(0x1a3)](sleep),process[_0x5770f8(0x1c4)](0x1));logger[_0x5770f8(0x1bc)]('Spawning:\x20'+_0x2c50d8+_0x5770f8(0x1af)+_0xeaa423['join']('\x20'));const _0x1d0b11=_0x5786c[_0x5770f8(0x1b0)](spawn,_0x2c50d8,[_0x5786c['HdNoB'],..._0xeaa423],{'stdio':_0x5786c[_0x5770f8(0x194)]});let _0xfea455=![];const _0x3d0487=new Promise(_0x5e1c89=>{const _0x544daa=_0x5770f8,_0x4c7147={'OUDVM':function(_0x30a820,_0x58710f){const _0x58c231=a28_0x59e1;return _0x5786c[_0x58c231(0x1ac)](_0x30a820,_0x58710f);}};_0x1d0b11['on'](_0x5786c[_0x544daa(0x189)],_0x2d9aa8=>{const _0x404d64=_0x544daa;logger[_0x404d64(0x1bc)](_0x2c50d8+_0x404d64(0x1aa)+_0x2d9aa8),_0x4c7147[_0x404d64(0x1b3)](_0x5e1c89,_0x2d9aa8);});});[_0x5786c[_0x5770f8(0x196)],_0x5786c[_0x5770f8(0x1a1)],_0x5786c['bzTJs'],_0x5786c['RiVaC']]['forEach'](_0x86c615=>{const _0xe6aac4=_0x5770f8,_0x1ebaa7={};_0x1ebaa7[_0xe6aac4(0x193)]=_0x5786c[_0xe6aac4(0x1a8)];const _0x44e270=_0x1ebaa7;process['on'](_0x86c615,()=>{const _0x58b4fd=_0xe6aac4;if(_0xfea455)return;_0xfea455=!![],logger[_0x58b4fd(0x1bc)](_0x58b4fd(0x18b)+_0x86c615+_0x58b4fd(0x1ba)),_0x1d0b11&&!_0x1d0b11['killed']&&(_0x1d0b11[_0x58b4fd(0x1a7)](_0x86c615),logger[_0x58b4fd(0x1bc)](_0x44e270[_0x58b4fd(0x193)]));});});const _0x1e418a=await _0x3d0487;await _0x5786c[_0x5770f8(0x198)](sleep),process[_0x5770f8(0x1c4)](_0x1e418a);}catch(_0x30a7a1){logger[_0x5770f8(0x19d)](_0x5770f8(0x186)+_0x30a7a1[_0x5770f8(0x19a)]),logger['debug'](_0x5770f8(0x1c5)+(_0x30a7a1[_0x5770f8(0x191)]||JSON[_0x5770f8(0x184)](_0x30a7a1))),await _0x5786c[_0x5770f8(0x1c7)](sleep),process['exit'](0x1);}}module[a28_0x2bde40(0x192)]=executeLoadTest;