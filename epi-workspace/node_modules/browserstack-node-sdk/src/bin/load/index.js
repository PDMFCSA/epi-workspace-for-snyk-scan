#!/usr/bin/env node
'use strict';const a28_0x1d0d53=a28_0x54d4;function a28_0x3529(){const _0x44a19e=['306963gRadkz','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','../../helpers/logger','jHqvc','checkAndUpdateCli','SIGTERM','winstonLogger','forEach','exit','Error\x20details:\x20','SIGQUIT','\x20exited\x20with\x20code\x20','Configuration\x20path:\x20','1529xfrLaq','Spawning:\x20','SEJAX','BROWSERSTACK_USERNAME','30jAswRC','lLjFF','1831818qPfuJm','483fHdidf','qowtI','accessKey','userName','672LqMQWP','725216oQHZnh','close','10940dXXKPt','DdhkY','TNnXP','11102rwahhq','message','nxkSg','child_process','rFTEz','pISrg','env','load','stringify','SIGINT','BROWSERSTACK_USER','debug','Failed\x20to\x20determine\x20CLI\x20directory','42900uQOAdw','\x20load\x20','exports','mjdeW','Failed\x20initiating\x20load\x20test:\x20','MsTJz','10197rEzHhg','ioyhp','Executing\x20load\x20test\x20with\x20arguments:\x20','getCliDir','error','HDxrp','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','slice','Received\x20','5062uSqDOU','stack','SIGHUP','kill','AjapO','jENRA','argv','killed','RNaJp','Error\x20Details:\x20','join','./loadUtils','HPsXw'];a28_0x3529=function(){return _0x44a19e;};return a28_0x3529();}function a28_0x54d4(_0x3fdb21,_0x24011f){const _0x3529af=a28_0x3529();return a28_0x54d4=function(_0x54d4d7,_0x11f970){_0x54d4d7=_0x54d4d7-0x19c;let _0x57dee6=_0x3529af[_0x54d4d7];return _0x57dee6;},a28_0x54d4(_0x3fdb21,_0x24011f);}(function(_0x287deb,_0x2a1917){const _0x23bd5d=a28_0x54d4,_0x475c93=_0x287deb();while(!![]){try{const _0x23bffa=-parseInt(_0x23bd5d(0x1c0))/0x1*(-parseInt(_0x23bd5d(0x19f))/0x2)+parseInt(_0x23bd5d(0x1ac))/0x3+-parseInt(_0x23bd5d(0x1c5))/0x4*(parseInt(_0x23bd5d(0x1bd))/0x5)+-parseInt(_0x23bd5d(0x1bf))/0x6+parseInt(_0x23bd5d(0x1ca))/0x7*(parseInt(_0x23bd5d(0x1c4))/0x8)+parseInt(_0x23bd5d(0x1dd))/0x9*(parseInt(_0x23bd5d(0x1c7))/0xa)+-parseInt(_0x23bd5d(0x1b9))/0xb*(parseInt(_0x23bd5d(0x1d7))/0xc);if(_0x23bffa===_0x2a1917)break;else _0x475c93['push'](_0x475c93['shift']());}catch(_0x293791){_0x475c93['push'](_0x475c93['shift']());}}}(a28_0x3529,0xc522c));const {spawn}=require(a28_0x1d0d53(0x1cd)),path=require('path'),helper=require('../../helpers/helper'),CLIUtils=require('../v2/cliUtils'),{getLoadConfigPath,sleep}=require(a28_0x1d0d53(0x1aa)),logger=require(a28_0x1d0d53(0x1ae))[a28_0x1d0d53(0x1b2)];async function executeLoadTest(_0xc6dcec){const _0x5a1cd8=a28_0x1d0d53,_0x2c7fd9={'qowtI':function(_0x53b39a,_0x34bc9b){return _0x53b39a(_0x34bc9b);},'lLjFF':_0x5a1cd8(0x1c6),'RNaJp':'Waiting\x20for\x20child\x20process\x20to\x20exit...','HDxrp':'Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','pISrg':function(_0x388a2b){return _0x388a2b();},'AjapO':'Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','SEJAX':_0x5a1cd8(0x1d6),'tPxgQ':'CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','HPsXw':_0x5a1cd8(0x1ad),'rFTEz':function(_0x2282bc){return _0x2282bc();},'myhFo':_0x5a1cd8(0x19c),'mjdeW':function(_0x23e942){return _0x23e942();},'ioyhp':function(_0x351901,_0x3dade9,_0x1cc232,_0x5185c7){return _0x351901(_0x3dade9,_0x1cc232,_0x5185c7);},'DdhkY':_0x5a1cd8(0x1d1),'jENRA':'inherit','uslij':_0x5a1cd8(0x1d3),'rxGPi':_0x5a1cd8(0x1b1),'TNnXP':_0x5a1cd8(0x1b6),'XNNNI':_0x5a1cd8(0x1a1),'MsTJz':function(_0x2bb424){return _0x2bb424();},'nxkSg':function(_0x161f4c){return _0x161f4c();}};try{const _0x1ae753=process[_0x5a1cd8(0x1a5)]['slice'](0x2),_0x4f1661=_0x1ae753[_0x5a1cd8(0x19d)](0x1);logger['debug'](_0x5a1cd8(0x1df)+_0x4f1661);let _0x531893={};try{logger[_0x5a1cd8(0x1d5)](_0x2c7fd9[_0x5a1cd8(0x1e2)]);const _0x3df623={};_0x3df623[_0x5a1cd8(0x1c3)]=process[_0x5a1cd8(0x1d0)][_0x5a1cd8(0x1bc)]||process[_0x5a1cd8(0x1d0)][_0x5a1cd8(0x1d4)],_0x3df623[_0x5a1cd8(0x1c2)]=process[_0x5a1cd8(0x1d0)]['BROWSERSTACK_ACCESS_KEY']||process[_0x5a1cd8(0x1d0)]['BROWSERSTACK_ACCESSKEY'],_0x531893=_0x3df623;if(!_0x531893['userName']||!_0x531893[_0x5a1cd8(0x1c2)]){const _0x972f05=_0x2c7fd9[_0x5a1cd8(0x1c1)](getLoadConfigPath,_0xc6dcec['argv']);logger[_0x5a1cd8(0x1d5)](_0x5a1cd8(0x1b8)+_0x972f05),_0x972f05&&(_0x531893=helper['readConfig'](_0x972f05));}}catch(_0x3ce8c9){logger[_0x5a1cd8(0x1e1)]('Error\x20loading\x20configuration:\x20'+_0x3ce8c9['message']),logger[_0x5a1cd8(0x1d5)](_0x5a1cd8(0x1b5)+(_0x3ce8c9[_0x5a1cd8(0x1a0)]||JSON[_0x5a1cd8(0x1d2)](_0x3ce8c9))),await _0x2c7fd9[_0x5a1cd8(0x1cf)](sleep),process[_0x5a1cd8(0x1b4)](0x1);}(!_0x531893[_0x5a1cd8(0x1c3)]||!_0x531893['accessKey'])&&(logger['error'](_0x2c7fd9[_0x5a1cd8(0x1a3)]),await _0x2c7fd9['pISrg'](sleep),process[_0x5a1cd8(0x1b4)](0x1));const _0xe946aa=CLIUtils[_0x5a1cd8(0x1e0)]();!_0xe946aa&&(logger[_0x5a1cd8(0x1e1)](_0x2c7fd9[_0x5a1cd8(0x1bb)]),await _0x2c7fd9[_0x5a1cd8(0x1cf)](sleep),process[_0x5a1cd8(0x1b4)](0x1));let _0x3712e1=CLIUtils['getExistingCliPath'](_0xe946aa);try{!_0x3712e1?(logger[_0x5a1cd8(0x1d5)](_0x2c7fd9['tPxgQ']),_0x3712e1=await CLIUtils[_0x5a1cd8(0x1b0)]('',_0xe946aa,_0x531893)):(logger[_0x5a1cd8(0x1d5)](_0x2c7fd9[_0x5a1cd8(0x1ab)]),_0x3712e1=await CLIUtils['checkAndUpdateCli'](_0x3712e1,_0xe946aa,_0x531893));}catch(_0x70c8c){logger['error'](_0x2c7fd9['AjapO']),logger['debug'](_0x5a1cd8(0x1a8)+(_0x70c8c[_0x5a1cd8(0x1a0)]||JSON[_0x5a1cd8(0x1d2)](_0x70c8c))),await _0x2c7fd9[_0x5a1cd8(0x1ce)](sleep),process[_0x5a1cd8(0x1b4)](0x1);}!_0x3712e1&&(logger[_0x5a1cd8(0x1e1)](_0x2c7fd9[_0x5a1cd8(0x1a3)]),logger[_0x5a1cd8(0x1d5)](_0x2c7fd9['myhFo']),await _0x2c7fd9[_0x5a1cd8(0x1da)](sleep),process['exit'](0x1));logger[_0x5a1cd8(0x1d5)](_0x5a1cd8(0x1ba)+_0x3712e1+_0x5a1cd8(0x1d8)+_0x4f1661[_0x5a1cd8(0x1a9)]('\x20'));const _0x5eae2f=_0x2c7fd9[_0x5a1cd8(0x1de)](spawn,_0x3712e1,[_0x2c7fd9[_0x5a1cd8(0x1c8)],..._0x4f1661],{'stdio':_0x2c7fd9[_0x5a1cd8(0x1a4)]});let _0x360a61=![];const _0x3e7044=new Promise(_0xb2e99d=>{const _0x15d9bb=_0x5a1cd8,_0x517fa1={'jHqvc':function(_0x1f0812,_0x15cd40){const _0x834632=a28_0x54d4;return _0x2c7fd9[_0x834632(0x1c1)](_0x1f0812,_0x15cd40);}};_0x5eae2f['on'](_0x2c7fd9[_0x15d9bb(0x1be)],_0x23b578=>{const _0x216f3d=_0x15d9bb;logger[_0x216f3d(0x1d5)](_0x3712e1+_0x216f3d(0x1b7)+_0x23b578),_0x517fa1[_0x216f3d(0x1af)](_0xb2e99d,_0x23b578);});});[_0x2c7fd9['uslij'],_0x2c7fd9['rxGPi'],_0x2c7fd9[_0x5a1cd8(0x1c9)],_0x2c7fd9['XNNNI']][_0x5a1cd8(0x1b3)](_0x2813ae=>{process['on'](_0x2813ae,()=>{const _0x2f1ae0=a28_0x54d4;if(_0x360a61)return;_0x360a61=!![],logger[_0x2f1ae0(0x1d5)](_0x2f1ae0(0x19e)+_0x2813ae+',\x20forwarding\x20to\x20child\x20process...'),_0x5eae2f&&!_0x5eae2f[_0x2f1ae0(0x1a6)]&&(_0x5eae2f[_0x2f1ae0(0x1a2)](_0x2813ae),logger[_0x2f1ae0(0x1d5)](_0x2c7fd9[_0x2f1ae0(0x1a7)]));});});const _0x3f4c03=await _0x3e7044;await _0x2c7fd9[_0x5a1cd8(0x1dc)](sleep),process[_0x5a1cd8(0x1b4)](_0x3f4c03);}catch(_0x2f3043){logger[_0x5a1cd8(0x1e1)](_0x5a1cd8(0x1db)+_0x2f3043[_0x5a1cd8(0x1cb)]),logger[_0x5a1cd8(0x1d5)]('Error\x20details:\x20'+(_0x2f3043[_0x5a1cd8(0x1a0)]||JSON[_0x5a1cd8(0x1d2)](_0x2f3043))),await _0x2c7fd9[_0x5a1cd8(0x1cc)](sleep),process[_0x5a1cd8(0x1b4)](0x1);}}module[a28_0x1d0d53(0x1d9)]=executeLoadTest;