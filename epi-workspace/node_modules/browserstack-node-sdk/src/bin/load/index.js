#!/usr/bin/env node
'use strict';const a29_0x25e9d7=a29_0x4fb3;function a29_0x4fb3(_0x431602,_0x48aa72){const _0x40123d=a29_0x4012();return a29_0x4fb3=function(_0x4fb344,_0x2e1407){_0x4fb344=_0x4fb344-0xaa;let _0x72d98d=_0x40123d[_0x4fb344];return _0x72d98d;},a29_0x4fb3(_0x431602,_0x48aa72);}function a29_0x4012(){const _0x1b7fa5=['child_process','caDoQ','5oIEhLD','jlFjE','stringify','BROWSERSTACK_USERNAME','SIGINT','LiuzD','ZVJdc','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','Failed\x20initiating\x20load\x20test:\x20','2vrscqD','SIGQUIT','vFLjS','killed','inherit','Error\x20Details:\x20','../../helpers/logger','eyaqu','getExistingCliPath','QQHZR','DvsCg','Waiting\x20for\x20child\x20process\x20to\x20exit...','2244498ljDYHn','Failed\x20to\x20determine\x20CLI\x20directory','checkAndUpdateCli','abehh','626079LDAHjh','gWhox','readConfig','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates',',\x20forwarding\x20to\x20child\x20process...','path','4035604jBvpYw','Lddvq','stack','cNACf','HUObr','ydgWP','SIGTERM','hkakJ','Error\x20loading\x20configuration:\x20','sxmyb','nkVmV','Executing\x20load\x20test\x20with\x20arguments:\x20','userName','slice','env','KITTW','error','../../helpers/helper','accessKey','close','exports','Error\x20details:\x20','BROWSERSTACK_USER','16201035ScVFBw','4311582ayKbVI','7777189vBcPMg','argv','Configuration\x20path:\x20','hwPmq','ZtnaB','2620096igoCKK','Received\x20','\x20load\x20','debug','exit','SIGHUP'];a29_0x4012=function(){return _0x1b7fa5;};return a29_0x4012();}(function(_0x201316,_0xff9ff7){const _0x3bb810=a29_0x4fb3,_0x430a3c=_0x201316();while(!![]){try{const _0x4ccc87=parseInt(_0x3bb810(0xd1))/0x1*(parseInt(_0x3bb810(0xc1))/0x2)+-parseInt(_0x3bb810(0xcd))/0x3+parseInt(_0x3bb810(0xd7))/0x4*(-parseInt(_0x3bb810(0xb8))/0x5)+parseInt(_0x3bb810(0xaa))/0x6+-parseInt(_0x3bb810(0xab))/0x7+parseInt(_0x3bb810(0xb0))/0x8+parseInt(_0x3bb810(0xee))/0x9;if(_0x4ccc87===_0xff9ff7)break;else _0x430a3c['push'](_0x430a3c['shift']());}catch(_0xb76dcb){_0x430a3c['push'](_0x430a3c['shift']());}}}(a29_0x4012,0x93831));const {spawn}=require(a29_0x25e9d7(0xb6)),path=require(a29_0x25e9d7(0xd6)),helper=require(a29_0x25e9d7(0xe8)),CLIUtils=require('../v2/cliUtils'),{getLoadConfigPath,sleep}=require('./loadUtils'),logger=require(a29_0x25e9d7(0xc7))['winstonLogger'];async function executeLoadTest(_0x4d2fdc){const _0x46a4af=a29_0x25e9d7,_0x3093ee={'QQHZR':function(_0x376c66,_0x5b5022){return _0x376c66(_0x5b5022);},'Lddvq':_0x46a4af(0xea),'ydgWP':_0x46a4af(0xcc),'FFzYB':'Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','ZtnaB':function(_0x16667d,_0x197e0b){return _0x16667d(_0x197e0b);},'caDoQ':function(_0x32463c){return _0x32463c();},'DvsCg':_0x46a4af(0xbf),'sxmyb':_0x46a4af(0xce),'LiuzD':function(_0xde3a87){return _0xde3a87();},'abehh':'CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','hkakJ':_0x46a4af(0xd4),'KITTW':function(_0x4b8035){return _0x4b8035();},'HUObr':'Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','nkVmV':function(_0x3153e1){return _0x3153e1();},'ZVJdc':function(_0xacd7e3,_0x4c3f0e,_0x27a06b,_0x12b383){return _0xacd7e3(_0x4c3f0e,_0x27a06b,_0x12b383);},'vFLjS':'load','jlFjE':_0x46a4af(0xc5),'eyaqu':_0x46a4af(0xbc),'hwPmq':_0x46a4af(0xdd),'dwBLj':_0x46a4af(0xc2),'gWhox':_0x46a4af(0xb5)};try{const _0x527ac1=process[_0x46a4af(0xac)][_0x46a4af(0xe4)](0x2),_0x5a04b0=_0x527ac1[_0x46a4af(0xe4)](0x1);logger[_0x46a4af(0xb3)](_0x46a4af(0xe2)+_0x5a04b0);let _0x5b5464={};try{logger[_0x46a4af(0xb3)](_0x3093ee['FFzYB']);const _0x4e60f6={};_0x4e60f6['userName']=process[_0x46a4af(0xe5)][_0x46a4af(0xbb)]||process['env'][_0x46a4af(0xed)],_0x4e60f6[_0x46a4af(0xe9)]=process[_0x46a4af(0xe5)]['BROWSERSTACK_ACCESS_KEY']||process[_0x46a4af(0xe5)]['BROWSERSTACK_ACCESSKEY'],_0x5b5464=_0x4e60f6;if(!_0x5b5464['userName']||!_0x5b5464[_0x46a4af(0xe9)]){const _0x583953=_0x3093ee[_0x46a4af(0xaf)](getLoadConfigPath,_0x4d2fdc['argv']);logger['debug'](_0x46a4af(0xad)+_0x583953),_0x583953&&(_0x5b5464=helper[_0x46a4af(0xd3)](_0x583953));}}catch(_0x20e0cd){logger[_0x46a4af(0xe7)](_0x46a4af(0xdf)+_0x20e0cd['message']),logger['debug'](_0x46a4af(0xec)+(_0x20e0cd[_0x46a4af(0xd9)]||JSON[_0x46a4af(0xba)](_0x20e0cd))),await _0x3093ee[_0x46a4af(0xb7)](sleep),process[_0x46a4af(0xb4)](0x1);}(!_0x5b5464[_0x46a4af(0xe3)]||!_0x5b5464[_0x46a4af(0xe9)])&&(logger['error'](_0x3093ee['DvsCg']),await _0x3093ee[_0x46a4af(0xb7)](sleep),process[_0x46a4af(0xb4)](0x1));const _0x48e460=CLIUtils['getCliDir']();!_0x48e460&&(logger[_0x46a4af(0xe7)](_0x3093ee[_0x46a4af(0xe0)]),await _0x3093ee[_0x46a4af(0xbd)](sleep),process[_0x46a4af(0xb4)](0x1));let _0x4d1e84=CLIUtils[_0x46a4af(0xc9)](_0x48e460);try{!_0x4d1e84?(logger[_0x46a4af(0xb3)](_0x3093ee[_0x46a4af(0xd0)]),_0x4d1e84=await CLIUtils[_0x46a4af(0xcf)]('',_0x48e460,_0x5b5464)):(logger['debug'](_0x3093ee[_0x46a4af(0xde)]),_0x4d1e84=await CLIUtils[_0x46a4af(0xcf)](_0x4d1e84,_0x48e460,_0x5b5464));}catch(_0x3f132d){logger[_0x46a4af(0xe7)](_0x3093ee[_0x46a4af(0xcb)]),logger[_0x46a4af(0xb3)](_0x46a4af(0xc6)+(_0x3f132d[_0x46a4af(0xd9)]||JSON[_0x46a4af(0xba)](_0x3f132d))),await _0x3093ee['KITTW'](sleep),process['exit'](0x1);}!_0x4d1e84&&(logger['error'](_0x3093ee[_0x46a4af(0xcb)]),logger['debug'](_0x3093ee[_0x46a4af(0xdb)]),await _0x3093ee[_0x46a4af(0xe1)](sleep),process[_0x46a4af(0xb4)](0x1));logger[_0x46a4af(0xb3)]('Spawning:\x20'+_0x4d1e84+_0x46a4af(0xb2)+_0x5a04b0['join']('\x20'));const _0xff6e0b=_0x3093ee[_0x46a4af(0xbe)](spawn,_0x4d1e84,[_0x3093ee[_0x46a4af(0xc3)],..._0x5a04b0],{'stdio':_0x3093ee[_0x46a4af(0xb9)]});let _0x357b56=![];const _0x443f66=new Promise(_0x70e891=>{const _0xe37179=_0x46a4af;_0xff6e0b['on'](_0x3093ee[_0xe37179(0xd8)],_0x35fd5c=>{const _0x339154=_0xe37179;logger[_0x339154(0xb3)](_0x4d1e84+'\x20exited\x20with\x20code\x20'+_0x35fd5c),_0x3093ee[_0x339154(0xca)](_0x70e891,_0x35fd5c);});});[_0x3093ee[_0x46a4af(0xc8)],_0x3093ee[_0x46a4af(0xae)],_0x3093ee['dwBLj'],_0x3093ee[_0x46a4af(0xd2)]]['forEach'](_0x40587a=>{const _0x4f9fd2=_0x46a4af,_0x43cbce={};_0x43cbce['cNACf']=_0x3093ee[_0x4f9fd2(0xdc)];const _0x21c6e3=_0x43cbce;process['on'](_0x40587a,()=>{const _0x1e455a=_0x4f9fd2;if(_0x357b56)return;_0x357b56=!![],logger['debug'](_0x1e455a(0xb1)+_0x40587a+_0x1e455a(0xd5)),_0xff6e0b&&!_0xff6e0b[_0x1e455a(0xc4)]&&(_0xff6e0b['kill'](_0x40587a),logger[_0x1e455a(0xb3)](_0x21c6e3[_0x1e455a(0xda)]));});});const _0x5b02dc=await _0x443f66;await _0x3093ee[_0x46a4af(0xe6)](sleep),process[_0x46a4af(0xb4)](_0x5b02dc);}catch(_0x2bc60b){logger[_0x46a4af(0xe7)](_0x46a4af(0xc0)+_0x2bc60b['message']),logger[_0x46a4af(0xb3)]('Error\x20details:\x20'+(_0x2bc60b[_0x46a4af(0xd9)]||JSON[_0x46a4af(0xba)](_0x2bc60b))),await _0x3093ee['nkVmV'](sleep),process[_0x46a4af(0xb4)](0x1);}}module[a29_0x25e9d7(0xeb)]=executeLoadTest;