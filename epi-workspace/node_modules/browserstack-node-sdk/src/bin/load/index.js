#!/usr/bin/env node
'use strict';const a29_0x1dd5e8=a29_0x544b;(function(_0x366bb5,_0x1a8e58){const _0x1c397e=a29_0x544b,_0x348849=_0x366bb5();while(!![]){try{const _0x4a01cf=parseInt(_0x1c397e(0xa9))/0x1+-parseInt(_0x1c397e(0xe8))/0x2+parseInt(_0x1c397e(0xdd))/0x3*(parseInt(_0x1c397e(0xb7))/0x4)+parseInt(_0x1c397e(0xe6))/0x5+parseInt(_0x1c397e(0xcf))/0x6+-parseInt(_0x1c397e(0xda))/0x7*(-parseInt(_0x1c397e(0xe5))/0x8)+-parseInt(_0x1c397e(0xdc))/0x9;if(_0x4a01cf===_0x1a8e58)break;else _0x348849['push'](_0x348849['shift']());}catch(_0x5c5aee){_0x348849['push'](_0x348849['shift']());}}}(a29_0x47b0,0x5b58b));function a29_0x47b0(){const _0x2cf91d=['../../helpers/helper','YeeMG','child_process','Error\x20Details:\x20','ihmNz','Spawning:\x20','load','BROWSERSTACK_ACCESSKEY','ioyfj','debug','IJExI','SIGTERM','UKhcx','stack','1627212hIoqvS','Configuration\x20path:\x20','killed','\x20load\x20','WjdbG','error','accessKey','iJSVq','userName','env','./loadUtils','7naeTdG','stringify','4126869ZHucYy','63nyjwWO','XFbju','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','checkAndUpdateCli',',\x20forwarding\x20to\x20child\x20process...','Failed\x20initiating\x20load\x20test:\x20','SIGINT','Received\x20','1769144qNHXOU','3419895HEdiVJ','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','1133738ZNFPIi','eijBh','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','96758xBXOVH','BROWSERSTACK_ACCESS_KEY','getExistingCliPath','NJFgy','message','xheOt','path','cOQci','forEach','crzap','argv','SKaGN','UONQv','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','24092GKjOsW','slice','exit','getCliDir','Executing\x20load\x20test\x20with\x20arguments:\x20','Error\x20details:\x20','\x20exited\x20with\x20code\x20','close','join','Failed\x20to\x20determine\x20CLI\x20directory'];a29_0x47b0=function(){return _0x2cf91d;};return a29_0x47b0();}const {spawn}=require(a29_0x1dd5e8(0xc3)),path=require(a29_0x1dd5e8(0xaf)),helper=require(a29_0x1dd5e8(0xc1)),CLIUtils=require('../v2/cliUtils'),{getLoadConfigPath,sleep}=require(a29_0x1dd5e8(0xd9)),logger=require('../../helpers/logger')['winstonLogger'];async function executeLoadTest(_0x3f21d0){const _0x560824=a29_0x1dd5e8,_0x42e927={'YeeMG':function(_0x39e6a2,_0x24fceb){return _0x39e6a2(_0x24fceb);},'eijBh':_0x560824(0xbe),'PZVSO':'Waiting\x20for\x20child\x20process\x20to\x20exit...','WjdbG':_0x560824(0xe7),'KglnU':function(_0x30b7b7,_0x330ead){return _0x30b7b7(_0x330ead);},'XFbju':function(_0x281666){return _0x281666();},'NJFgy':_0x560824(0xb6),'SKaGN':_0x560824(0xc0),'IJExI':'CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','noZLm':_0x560824(0xdf),'crzap':_0x560824(0xa8),'UKhcx':function(_0x400b3d,_0x37ae27,_0x275dbb,_0x46d26f){return _0x400b3d(_0x37ae27,_0x275dbb,_0x46d26f);},'vCsRT':_0x560824(0xc7),'xheOt':'inherit','ihmNz':_0x560824(0xe3),'iJSVq':_0x560824(0xcc),'UONQv':'SIGQUIT','ioyfj':'SIGHUP','cOQci':function(_0x584934){return _0x584934();}};try{const _0x5e75c2=process[_0x560824(0xb3)][_0x560824(0xb8)](0x2),_0x544c26=_0x5e75c2[_0x560824(0xb8)](0x1);logger['debug'](_0x560824(0xbb)+_0x544c26);let _0x44c427={};try{logger[_0x560824(0xca)](_0x42e927[_0x560824(0xd3)]);const _0x5da2c6={};_0x5da2c6[_0x560824(0xd7)]=process[_0x560824(0xd8)]['BROWSERSTACK_USERNAME']||process[_0x560824(0xd8)]['BROWSERSTACK_USER'],_0x5da2c6['accessKey']=process[_0x560824(0xd8)][_0x560824(0xaa)]||process[_0x560824(0xd8)][_0x560824(0xc8)],_0x44c427=_0x5da2c6;if(!_0x44c427[_0x560824(0xd7)]||!_0x44c427[_0x560824(0xd5)]){const _0x56cc0f=_0x42e927['KglnU'](getLoadConfigPath,_0x3f21d0[_0x560824(0xb3)]);logger[_0x560824(0xca)](_0x560824(0xd0)+_0x56cc0f),_0x56cc0f&&(_0x44c427=helper['readConfig'](_0x56cc0f));}}catch(_0x6730bf){logger[_0x560824(0xd4)]('Error\x20loading\x20configuration:\x20'+_0x6730bf['message']),logger['debug'](_0x560824(0xbc)+(_0x6730bf[_0x560824(0xce)]||JSON[_0x560824(0xdb)](_0x6730bf))),await _0x42e927[_0x560824(0xde)](sleep),process['exit'](0x1);}(!_0x44c427['userName']||!_0x44c427[_0x560824(0xd5)])&&(logger[_0x560824(0xd4)](_0x42e927[_0x560824(0xac)]),await _0x42e927[_0x560824(0xde)](sleep),process['exit'](0x1));const _0x52d7b6=CLIUtils[_0x560824(0xba)]();!_0x52d7b6&&(logger[_0x560824(0xd4)](_0x42e927[_0x560824(0xb4)]),await _0x42e927[_0x560824(0xde)](sleep),process[_0x560824(0xb9)](0x1));let _0xaa02d9=CLIUtils[_0x560824(0xab)](_0x52d7b6);try{!_0xaa02d9?(logger[_0x560824(0xca)](_0x42e927[_0x560824(0xcb)]),_0xaa02d9=await CLIUtils[_0x560824(0xe0)]('',_0x52d7b6,_0x44c427)):(logger[_0x560824(0xca)](_0x42e927['noZLm']),_0xaa02d9=await CLIUtils[_0x560824(0xe0)](_0xaa02d9,_0x52d7b6,_0x44c427));}catch(_0x5ea299){logger[_0x560824(0xd4)](_0x42e927[_0x560824(0xac)]),logger[_0x560824(0xca)](_0x560824(0xc4)+(_0x5ea299['stack']||JSON['stringify'](_0x5ea299))),await _0x42e927[_0x560824(0xde)](sleep),process[_0x560824(0xb9)](0x1);}!_0xaa02d9&&(logger[_0x560824(0xd4)](_0x42e927[_0x560824(0xac)]),logger[_0x560824(0xca)](_0x42e927[_0x560824(0xb2)]),await _0x42e927[_0x560824(0xde)](sleep),process[_0x560824(0xb9)](0x1));logger[_0x560824(0xca)](_0x560824(0xc6)+_0xaa02d9+_0x560824(0xd2)+_0x544c26[_0x560824(0xbf)]('\x20'));const _0x2dc94e=_0x42e927[_0x560824(0xcd)](spawn,_0xaa02d9,[_0x42e927['vCsRT'],..._0x544c26],{'stdio':_0x42e927[_0x560824(0xae)]});let _0x46eef2=![];const _0x3f26f6=new Promise(_0x1be7c=>{const _0x3d643b=_0x560824;_0x2dc94e['on'](_0x42e927[_0x3d643b(0xe9)],_0x32ce9e=>{const _0x375c21=_0x3d643b;logger['debug'](_0xaa02d9+_0x375c21(0xbd)+_0x32ce9e),_0x42e927[_0x375c21(0xc2)](_0x1be7c,_0x32ce9e);});});[_0x42e927[_0x560824(0xc5)],_0x42e927[_0x560824(0xd6)],_0x42e927[_0x560824(0xb5)],_0x42e927[_0x560824(0xc9)]][_0x560824(0xb1)](_0x5e49fa=>{process['on'](_0x5e49fa,()=>{const _0x1de4e8=a29_0x544b;if(_0x46eef2)return;_0x46eef2=!![],logger[_0x1de4e8(0xca)](_0x1de4e8(0xe4)+_0x5e49fa+_0x1de4e8(0xe1)),_0x2dc94e&&!_0x2dc94e[_0x1de4e8(0xd1)]&&(_0x2dc94e['kill'](_0x5e49fa),logger[_0x1de4e8(0xca)](_0x42e927['PZVSO']));});});const _0x34092a=await _0x3f26f6;await _0x42e927[_0x560824(0xb0)](sleep),process['exit'](_0x34092a);}catch(_0x3384b6){logger['error'](_0x560824(0xe2)+_0x3384b6[_0x560824(0xad)]),logger[_0x560824(0xca)](_0x560824(0xbc)+(_0x3384b6[_0x560824(0xce)]||JSON['stringify'](_0x3384b6))),await _0x42e927[_0x560824(0xb0)](sleep),process['exit'](0x1);}}function a29_0x544b(_0x397b5b,_0x20ecf7){const _0x47b056=a29_0x47b0();return a29_0x544b=function(_0x544bdc,_0x395243){_0x544bdc=_0x544bdc-0xa8;let _0x229320=_0x47b056[_0x544bdc];return _0x229320;},a29_0x544b(_0x397b5b,_0x20ecf7);}module['exports']=executeLoadTest;