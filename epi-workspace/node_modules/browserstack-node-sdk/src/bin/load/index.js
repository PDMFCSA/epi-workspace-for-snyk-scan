#!/usr/bin/env node
'use strict';const a28_0x4c0608=a28_0x5607;function a28_0x5607(_0x2473c6,_0x2a11a5){const _0x4f44ed=a28_0x4f44();return a28_0x5607=function(_0x56074a,_0x2a43bb){_0x56074a=_0x56074a-0xd1;let _0x7ecd83=_0x4f44ed[_0x56074a];return _0x7ecd83;},a28_0x5607(_0x2473c6,_0x2a11a5);}(function(_0x37a025,_0xdcd645){const _0xb4d6cf=a28_0x5607,_0x3300c4=_0x37a025();while(!![]){try{const _0x4f0451=parseInt(_0xb4d6cf(0x10d))/0x1+parseInt(_0xb4d6cf(0xdd))/0x2*(-parseInt(_0xb4d6cf(0xf8))/0x3)+parseInt(_0xb4d6cf(0x103))/0x4+-parseInt(_0xb4d6cf(0x10f))/0x5*(parseInt(_0xb4d6cf(0xda))/0x6)+-parseInt(_0xb4d6cf(0xe6))/0x7+-parseInt(_0xb4d6cf(0xe9))/0x8*(-parseInt(_0xb4d6cf(0xe2))/0x9)+-parseInt(_0xb4d6cf(0xd7))/0xa*(-parseInt(_0xb4d6cf(0xee))/0xb);if(_0x4f0451===_0xdcd645)break;else _0x3300c4['push'](_0x3300c4['shift']());}catch(_0x3a51da){_0x3300c4['push'](_0x3300c4['shift']());}}}(a28_0x4f44,0xbdc6c));const {spawn}=require(a28_0x4c0608(0xdf)),path=require('path'),helper=require('../../helpers/helper'),CLIUtils=require('../v2/cliUtils'),{getLoadConfigPath,sleep}=require('./loadUtils'),logger=require(a28_0x4c0608(0xec))[a28_0x4c0608(0xff)];async function executeLoadTest(_0x192762){const _0x1647cb=a28_0x4c0608,_0x51f0d9={'GVOnW':function(_0x27d12e,_0x3c9395){return _0x27d12e(_0x3c9395);},'bYFpT':_0x1647cb(0xf5),'hsHzX':'Waiting\x20for\x20child\x20process\x20to\x20exit...','PbnGY':_0x1647cb(0xfb),'ieXua':function(_0x33122d){return _0x33122d();},'oHVCq':_0x1647cb(0xf4),'EEGwl':function(_0x122722){return _0x122722();},'EwpZm':'Failed\x20to\x20determine\x20CLI\x20directory','zwmXd':function(_0x54a377){return _0x54a377();},'fgKwv':_0x1647cb(0xd1),'ovZGK':_0x1647cb(0xf2),'khjus':'Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','BXwZz':function(_0x3ce3db){return _0x3ce3db();},'NTXLk':function(_0x42849b,_0x5d5ce6,_0x167d2f,_0x301dab){return _0x42849b(_0x5d5ce6,_0x167d2f,_0x301dab);},'UWggI':'load','QiLMG':'inherit','QZYqs':_0x1647cb(0x108),'Sujok':'SIGTERM','MzyFT':_0x1647cb(0xeb),'vqYun':_0x1647cb(0xf9),'AHyOR':function(_0x481ac6){return _0x481ac6();}};try{const _0x3718dd=process['argv'][_0x1647cb(0xf0)](0x2),_0xd63fd=_0x3718dd[_0x1647cb(0xf0)](0x1);logger[_0x1647cb(0xef)](_0x1647cb(0xfe)+_0xd63fd);let _0x20452e={};try{logger[_0x1647cb(0xef)](_0x51f0d9[_0x1647cb(0xea)]);const _0x1d2985={};_0x1d2985[_0x1647cb(0xe8)]=process['env'][_0x1647cb(0xf6)]||process['env'][_0x1647cb(0x102)],_0x1d2985[_0x1647cb(0x10c)]=process[_0x1647cb(0x100)][_0x1647cb(0x10a)]||process[_0x1647cb(0x100)]['BROWSERSTACK_ACCESSKEY'],_0x20452e=_0x1d2985;if(!_0x20452e[_0x1647cb(0xe8)]||!_0x20452e[_0x1647cb(0x10c)]){const _0x23375a=_0x51f0d9[_0x1647cb(0x105)](getLoadConfigPath,_0x192762[_0x1647cb(0xe5)]);logger[_0x1647cb(0xef)]('Configuration\x20path:\x20'+_0x23375a),_0x23375a&&(_0x20452e=helper[_0x1647cb(0x106)](_0x23375a));}}catch(_0x446a10){logger[_0x1647cb(0x111)](_0x1647cb(0xd9)+_0x446a10[_0x1647cb(0xd6)]),logger[_0x1647cb(0xef)]('Error\x20details:\x20'+(_0x446a10[_0x1647cb(0xe0)]||JSON[_0x1647cb(0x110)](_0x446a10))),await _0x51f0d9['ieXua'](sleep),process[_0x1647cb(0xde)](0x1);}(!_0x20452e['userName']||!_0x20452e['accessKey'])&&(logger[_0x1647cb(0x111)](_0x51f0d9[_0x1647cb(0xf7)]),await _0x51f0d9[_0x1647cb(0x10e)](sleep),process[_0x1647cb(0xde)](0x1));const _0x5388c0=CLIUtils['getCliDir']();!_0x5388c0&&(logger[_0x1647cb(0x111)](_0x51f0d9[_0x1647cb(0xf1)]),await _0x51f0d9[_0x1647cb(0xd2)](sleep),process[_0x1647cb(0xde)](0x1));let _0x46193b=CLIUtils[_0x1647cb(0xf3)](_0x5388c0);try{!_0x46193b?(logger[_0x1647cb(0xef)](_0x51f0d9['fgKwv']),_0x46193b=await CLIUtils[_0x1647cb(0xdb)]('',_0x5388c0,_0x20452e)):(logger[_0x1647cb(0xef)](_0x51f0d9[_0x1647cb(0x109)]),_0x46193b=await CLIUtils['checkAndUpdateCli'](_0x46193b,_0x5388c0,_0x20452e));}catch(_0x1616e6){logger['error'](_0x51f0d9[_0x1647cb(0xf7)]),logger['debug']('Error\x20Details:\x20'+(_0x1616e6[_0x1647cb(0xe0)]||JSON[_0x1647cb(0x110)](_0x1616e6))),await _0x51f0d9[_0x1647cb(0x10e)](sleep),process[_0x1647cb(0xde)](0x1);}!_0x46193b&&(logger[_0x1647cb(0x111)](_0x51f0d9[_0x1647cb(0xf7)]),logger[_0x1647cb(0xef)](_0x51f0d9[_0x1647cb(0x113)]),await _0x51f0d9[_0x1647cb(0xfa)](sleep),process[_0x1647cb(0xde)](0x1));logger[_0x1647cb(0xef)]('Spawning:\x20'+_0x46193b+'\x20load\x20'+_0xd63fd[_0x1647cb(0xed)]('\x20'));const _0x1f3684=_0x51f0d9['NTXLk'](spawn,_0x46193b,[_0x51f0d9['UWggI'],..._0xd63fd],{'stdio':_0x51f0d9[_0x1647cb(0x101)]});let _0x4e7ffc=![];const _0x4add97=new Promise(_0x46abfa=>{const _0x780707=_0x1647cb;_0x1f3684['on'](_0x51f0d9[_0x780707(0x104)],_0x514b47=>{const _0x2d9f6e=_0x780707;logger[_0x2d9f6e(0xef)](_0x46193b+_0x2d9f6e(0xe1)+_0x514b47),_0x51f0d9['GVOnW'](_0x46abfa,_0x514b47);});});[_0x51f0d9[_0x1647cb(0x112)],_0x51f0d9['Sujok'],_0x51f0d9[_0x1647cb(0xe4)],_0x51f0d9[_0x1647cb(0xfd)]][_0x1647cb(0x107)](_0x5b6552=>{const _0x382ec2=_0x1647cb,_0x3b60f3={};_0x3b60f3[_0x382ec2(0xd3)]=_0x51f0d9[_0x382ec2(0xd5)];const _0x2595bb=_0x3b60f3;process['on'](_0x5b6552,()=>{const _0x252640=_0x382ec2;if(_0x4e7ffc)return;_0x4e7ffc=!![],logger[_0x252640(0xef)]('Received\x20'+_0x5b6552+_0x252640(0xfc)),_0x1f3684&&!_0x1f3684[_0x252640(0xd4)]&&(_0x1f3684[_0x252640(0xdc)](_0x5b6552),logger[_0x252640(0xef)](_0x2595bb[_0x252640(0xd3)]));});});const _0x48ad92=await _0x4add97;await _0x51f0d9[_0x1647cb(0x10b)](sleep),process['exit'](_0x48ad92);}catch(_0x1fd781){logger[_0x1647cb(0x111)]('Failed\x20initiating\x20load\x20test:\x20'+_0x1fd781[_0x1647cb(0xd6)]),logger[_0x1647cb(0xef)](_0x1647cb(0xe3)+(_0x1fd781['stack']||JSON[_0x1647cb(0x110)](_0x1fd781))),await _0x51f0d9[_0x1647cb(0xd8)](sleep),process['exit'](0x1);}}function a28_0x4f44(){const _0xf49439=['Error\x20loading\x20configuration:\x20','2491836HvMyhw','checkAndUpdateCli','kill','4imIvZv','exit','child_process','stack','\x20exited\x20with\x20code\x20','7929378hOHZnO','Error\x20details:\x20','MzyFT','argv','9267377GPXCht','exports','userName','8SvvLdw','PbnGY','SIGQUIT','../../helpers/logger','join','13079yiefdu','debug','slice','EwpZm','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','getExistingCliPath','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','close','BROWSERSTACK_USERNAME','oHVCq','1479441deAtRk','SIGHUP','BXwZz','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.',',\x20forwarding\x20to\x20child\x20process...','vqYun','Executing\x20load\x20test\x20with\x20arguments:\x20','winstonLogger','env','QiLMG','BROWSERSTACK_USER','5193404FbnBcd','bYFpT','GVOnW','readConfig','forEach','SIGINT','ovZGK','BROWSERSTACK_ACCESS_KEY','ieXua','accessKey','1454577SHhpcQ','EEGwl','10IvXYGb','stringify','error','QZYqs','khjus','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','zwmXd','sGayI','killed','hsHzX','message','2390DPGYWF','AHyOR'];a28_0x4f44=function(){return _0xf49439;};return a28_0x4f44();}module[a28_0x4c0608(0xe7)]=executeLoadTest;