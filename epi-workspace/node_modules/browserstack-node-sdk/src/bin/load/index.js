#!/usr/bin/env node
'use strict';function a29_0x15c5(){const _0x52c3ee=['argv','stack','SIGQUIT','rgCqt','checkAndUpdateCli','50MHaZEE','./loadUtils','env','fBwmM','AUQvP','debug','dSbQp','Error\x20details:\x20','Htsms','17156414mMecNv','6791000yhFDME',',\x20forwarding\x20to\x20child\x20process...','\x20load\x20','jzTdP','Error\x20Details:\x20','SIGTERM','Failed\x20initiating\x20load\x20test:\x20','2823453NzPTax','kWPde','Failed\x20to\x20determine\x20CLI\x20directory','ZLlzT','load','BROWSERSTACK_ACCESSKEY','error','stringify','readConfig','BROWSERSTACK_ACCESS_KEY','Executing\x20load\x20test\x20with\x20arguments:\x20','userName','QeRJb','554233HxZtEz','path','20ARhhVc','455912AoTlEX','accessKey','\x20exited\x20with\x20code\x20','hOkTh','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','3MJSjAF','igNBZ','forEach','ePjUR','getExistingCliPath','winstonLogger','Waiting\x20for\x20child\x20process\x20to\x20exit...','aCbfw','NOxsL','getCliDir','Received\x20','2939180IXvsUt','ZxFWi','Error\x20loading\x20configuration:\x20','xZtpI','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','Tabcl','Spawning:\x20','2163948ZbyVXL','exit','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','BROWSERSTACK_USER','join','message','7vrpjkS','../../helpers/logger','slice','child_process'];a29_0x15c5=function(){return _0x52c3ee;};return a29_0x15c5();}const a29_0x4acffd=a29_0x596c;(function(_0x8d5f6b,_0x5df322){const _0x329705=a29_0x596c,_0x2b6a64=_0x8d5f6b();while(!![]){try{const _0x39e27a=-parseInt(_0x329705(0x184))/0x1+-parseInt(_0x329705(0x197))/0x2*(parseInt(_0x329705(0x18c))/0x3)+parseInt(_0x329705(0x187))/0x4*(parseInt(_0x329705(0x1ad))/0x5)+parseInt(_0x329705(0x19e))/0x6*(parseInt(_0x329705(0x1a4))/0x7)+-parseInt(_0x329705(0x1b7))/0x8+-parseInt(_0x329705(0x1be))/0x9*(-parseInt(_0x329705(0x186))/0xa)+parseInt(_0x329705(0x1b6))/0xb;if(_0x39e27a===_0x5df322)break;else _0x2b6a64['push'](_0x2b6a64['shift']());}catch(_0x14930e){_0x2b6a64['push'](_0x2b6a64['shift']());}}}(a29_0x15c5,0xc6f00));const {spawn}=require(a29_0x4acffd(0x1a7)),path=require(a29_0x4acffd(0x185)),helper=require('../../helpers/helper'),CLIUtils=require('../v2/cliUtils'),{getLoadConfigPath,sleep}=require(a29_0x4acffd(0x1ae)),logger=require(a29_0x4acffd(0x1a5))[a29_0x4acffd(0x191)];function a29_0x596c(_0x53624b,_0x3763f5){const _0x15c58c=a29_0x15c5();return a29_0x596c=function(_0x596cae,_0x126126){_0x596cae=_0x596cae-0x182;let _0x2a6aa7=_0x15c58c[_0x596cae];return _0x2a6aa7;},a29_0x596c(_0x53624b,_0x3763f5);}async function executeLoadTest(_0x1a38d2){const _0x5afb3e=a29_0x4acffd,_0x2b0614={'rmnHj':function(_0x2b68f5,_0x2ab768){return _0x2b68f5(_0x2ab768);},'ZxFWi':'close','Tabcl':_0x5afb3e(0x192),'JvWLg':_0x5afb3e(0x1a0),'Htsms':function(_0x246aad,_0x421281){return _0x246aad(_0x421281);},'jzTdP':function(_0x193bc2){return _0x193bc2();},'hOkTh':'Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','fBwmM':_0x5afb3e(0x1c0),'GPcVT':function(_0x3c0a1b){return _0x3c0a1b();},'dSbQp':_0x5afb3e(0x18b),'rgCqt':_0x5afb3e(0x19b),'xZtpI':'Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','mnUhu':function(_0x412ab4){return _0x412ab4();},'igNBZ':function(_0x3bace6,_0x5761f3,_0xa5311,_0x27b2ca){return _0x3bace6(_0x5761f3,_0xa5311,_0x27b2ca);},'aCbfw':_0x5afb3e(0x1c2),'KqVvc':'inherit','QeRJb':'SIGINT','jJeUP':_0x5afb3e(0x1bc),'AUQvP':_0x5afb3e(0x1aa),'kWPde':'SIGHUP','zyxSC':function(_0x4966ee){return _0x4966ee();},'ePjUR':function(_0x4094a3){return _0x4094a3();}};try{const _0x178e24=process[_0x5afb3e(0x1a8)][_0x5afb3e(0x1a6)](0x2),_0x276fa1=_0x178e24[_0x5afb3e(0x1a6)](0x1);logger[_0x5afb3e(0x1b2)](_0x5afb3e(0x1c8)+_0x276fa1);let _0x50c46d={};try{logger[_0x5afb3e(0x1b2)](_0x2b0614['JvWLg']);const _0xec95f={};_0xec95f[_0x5afb3e(0x182)]=process[_0x5afb3e(0x1af)]['BROWSERSTACK_USERNAME']||process[_0x5afb3e(0x1af)][_0x5afb3e(0x1a1)],_0xec95f[_0x5afb3e(0x188)]=process['env'][_0x5afb3e(0x1c7)]||process['env'][_0x5afb3e(0x1c3)],_0x50c46d=_0xec95f;if(!_0x50c46d[_0x5afb3e(0x182)]||!_0x50c46d[_0x5afb3e(0x188)]){const _0x34de76=_0x2b0614[_0x5afb3e(0x1b5)](getLoadConfigPath,_0x1a38d2['argv']);logger[_0x5afb3e(0x1b2)]('Configuration\x20path:\x20'+_0x34de76),_0x34de76&&(_0x50c46d=helper[_0x5afb3e(0x1c6)](_0x34de76));}}catch(_0x23a5da){logger[_0x5afb3e(0x1c4)](_0x5afb3e(0x199)+_0x23a5da[_0x5afb3e(0x1a3)]),logger[_0x5afb3e(0x1b2)](_0x5afb3e(0x1b4)+(_0x23a5da[_0x5afb3e(0x1a9)]||JSON[_0x5afb3e(0x1c5)](_0x23a5da))),await _0x2b0614[_0x5afb3e(0x1ba)](sleep),process['exit'](0x1);}(!_0x50c46d['userName']||!_0x50c46d[_0x5afb3e(0x188)])&&(logger[_0x5afb3e(0x1c4)](_0x2b0614[_0x5afb3e(0x18a)]),await _0x2b0614['jzTdP'](sleep),process[_0x5afb3e(0x19f)](0x1));const _0x6f7df4=CLIUtils[_0x5afb3e(0x195)]();!_0x6f7df4&&(logger[_0x5afb3e(0x1c4)](_0x2b0614[_0x5afb3e(0x1b0)]),await _0x2b0614['GPcVT'](sleep),process[_0x5afb3e(0x19f)](0x1));let _0x3eea99=CLIUtils[_0x5afb3e(0x190)](_0x6f7df4);try{!_0x3eea99?(logger[_0x5afb3e(0x1b2)](_0x2b0614[_0x5afb3e(0x1b3)]),_0x3eea99=await CLIUtils['checkAndUpdateCli']('',_0x6f7df4,_0x50c46d)):(logger[_0x5afb3e(0x1b2)](_0x2b0614[_0x5afb3e(0x1ab)]),_0x3eea99=await CLIUtils[_0x5afb3e(0x1ac)](_0x3eea99,_0x6f7df4,_0x50c46d));}catch(_0x38ee1b){logger[_0x5afb3e(0x1c4)](_0x2b0614[_0x5afb3e(0x18a)]),logger[_0x5afb3e(0x1b2)](_0x5afb3e(0x1bb)+(_0x38ee1b[_0x5afb3e(0x1a9)]||JSON[_0x5afb3e(0x1c5)](_0x38ee1b))),await _0x2b0614['jzTdP'](sleep),process[_0x5afb3e(0x19f)](0x1);}!_0x3eea99&&(logger[_0x5afb3e(0x1c4)](_0x2b0614[_0x5afb3e(0x18a)]),logger[_0x5afb3e(0x1b2)](_0x2b0614[_0x5afb3e(0x19a)]),await _0x2b0614['mnUhu'](sleep),process[_0x5afb3e(0x19f)](0x1));logger[_0x5afb3e(0x1b2)](_0x5afb3e(0x19d)+_0x3eea99+_0x5afb3e(0x1b9)+_0x276fa1[_0x5afb3e(0x1a2)]('\x20'));const _0x1434f3=_0x2b0614[_0x5afb3e(0x18d)](spawn,_0x3eea99,[_0x2b0614[_0x5afb3e(0x193)],..._0x276fa1],{'stdio':_0x2b0614['KqVvc']});let _0x4dd8f1=![];const _0x314768=new Promise(_0x3aa344=>{const _0xe23c79=_0x5afb3e,_0x3560a7={'ZLlzT':function(_0x5d2577,_0xc36259){return _0x2b0614['rmnHj'](_0x5d2577,_0xc36259);}};_0x1434f3['on'](_0x2b0614[_0xe23c79(0x198)],_0x467e5c=>{const _0x448d91=_0xe23c79;logger[_0x448d91(0x1b2)](_0x3eea99+_0x448d91(0x189)+_0x467e5c),_0x3560a7[_0x448d91(0x1c1)](_0x3aa344,_0x467e5c);});});[_0x2b0614[_0x5afb3e(0x183)],_0x2b0614['jJeUP'],_0x2b0614[_0x5afb3e(0x1b1)],_0x2b0614[_0x5afb3e(0x1bf)]][_0x5afb3e(0x18e)](_0x471f17=>{const _0x1e6288=_0x5afb3e,_0x3d2598={};_0x3d2598[_0x1e6288(0x194)]=_0x2b0614[_0x1e6288(0x19c)];const _0x445cdd=_0x3d2598;process['on'](_0x471f17,()=>{const _0x9fe58e=_0x1e6288;if(_0x4dd8f1)return;_0x4dd8f1=!![],logger[_0x9fe58e(0x1b2)](_0x9fe58e(0x196)+_0x471f17+_0x9fe58e(0x1b8)),_0x1434f3&&!_0x1434f3['killed']&&(_0x1434f3['kill'](_0x471f17),logger['debug'](_0x445cdd['NOxsL']));});});const _0x50304b=await _0x314768;await _0x2b0614['zyxSC'](sleep),process[_0x5afb3e(0x19f)](_0x50304b);}catch(_0x2fa3e3){logger[_0x5afb3e(0x1c4)](_0x5afb3e(0x1bd)+_0x2fa3e3[_0x5afb3e(0x1a3)]),logger[_0x5afb3e(0x1b2)](_0x5afb3e(0x1b4)+(_0x2fa3e3[_0x5afb3e(0x1a9)]||JSON[_0x5afb3e(0x1c5)](_0x2fa3e3))),await _0x2b0614[_0x5afb3e(0x18f)](sleep),process[_0x5afb3e(0x19f)](0x1);}}module['exports']=executeLoadTest;