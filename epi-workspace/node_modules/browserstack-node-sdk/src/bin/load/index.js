#!/usr/bin/env node
'use strict';const a29_0x5c9bee=a29_0x3f02;function a29_0x1019(){const _0x568c27=['Executing\x20load\x20test\x20with\x20arguments:\x20','winstonLogger','Btvzs','../v2/cliUtils','userName','debug','6NXOnUl','jToFW','635iviOar','Error\x20Details:\x20','Error\x20loading\x20configuration:\x20','stringify','SIGQUIT','../../helpers/logger','CPfhH','19566yrFPiv','wkzvw','tqLEe','BROWSERSTACK_ACCESS_KEY','38032dadXwY','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','checkAndUpdateCli','error','Received\x20','CGZME','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','accessKey','getCliDir','LYePH','CHaiR','ZstHG','NkXij','rdOWh','PKyZh','RnTyJ','Failed\x20to\x20determine\x20CLI\x20directory','TwlPu','path','4055805fdVjsN','1IWOTsI','message','olQVX','BROWSERSTACK_ACCESSKEY','Error\x20details:\x20','SIGHUP','11JnQQKp','\x20exited\x20with\x20code\x20','stack','exit','Tsreo','zPTVe','21RVZKMF','load','945694gSNYbK','exports','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','djLma','4997070qVlTFk','BROWSERSTACK_USER','slice','env','ybOdp','./loadUtils','kill','getExistingCliPath','argv','join','14595444RpBLOu','moNBb','IkVWR','SIGINT','Failed\x20initiating\x20load\x20test:\x20','SIGTERM','inherit','1283368gHVrFE','readConfig'];a29_0x1019=function(){return _0x568c27;};return a29_0x1019();}(function(_0x3538c1,_0x5ee9f9){const _0x31bd3e=a29_0x3f02,_0x5d159e=_0x3538c1();while(!![]){try{const _0xf6f47c=parseInt(_0x31bd3e(0x204))/0x1*(parseInt(_0x31bd3e(0x212))/0x2)+-parseInt(_0x31bd3e(0x1e3))/0x3*(parseInt(_0x31bd3e(0x1f0))/0x4)+parseInt(_0x31bd3e(0x1e5))/0x5*(-parseInt(_0x31bd3e(0x1ec))/0x6)+parseInt(_0x31bd3e(0x210))/0x7*(parseInt(_0x31bd3e(0x227))/0x8)+parseInt(_0x31bd3e(0x203))/0x9+-parseInt(_0x31bd3e(0x216))/0xa*(-parseInt(_0x31bd3e(0x20a))/0xb)+-parseInt(_0x31bd3e(0x220))/0xc;if(_0xf6f47c===_0x5ee9f9)break;else _0x5d159e['push'](_0x5d159e['shift']());}catch(_0xb6d875){_0x5d159e['push'](_0x5d159e['shift']());}}}(a29_0x1019,0x3e424));const {spawn}=require('child_process'),path=require(a29_0x5c9bee(0x202)),helper=require('../../helpers/helper'),CLIUtils=require(a29_0x5c9bee(0x22c)),{getLoadConfigPath,sleep}=require(a29_0x5c9bee(0x21b)),logger=require(a29_0x5c9bee(0x1ea))[a29_0x5c9bee(0x22a)];function a29_0x3f02(_0x43dff9,_0x6bc96a){const _0x10194b=a29_0x1019();return a29_0x3f02=function(_0x3f0237,_0x12b932){_0x3f0237=_0x3f0237-0x1e2;let _0x4d890e=_0x10194b[_0x3f0237];return _0x4d890e;},a29_0x3f02(_0x43dff9,_0x6bc96a);}async function executeLoadTest(_0x48f5de){const _0x2aad96=a29_0x5c9bee,_0x50ddab={'tqLEe':function(_0x589abf,_0x5d0187){return _0x589abf(_0x5d0187);},'jToFW':'close','CPfhH':'Waiting\x20for\x20child\x20process\x20to\x20exit...','RnTyJ':'Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','wkzvw':function(_0x4237e3,_0x4c400c){return _0x4237e3(_0x4c400c);},'ZstHG':function(_0x2f5188){return _0x2f5188();},'IkVWR':_0x2aad96(0x1f6),'CGZME':_0x2aad96(0x200),'Tsreo':function(_0x5d3a81){return _0x5d3a81();},'rdOWh':_0x2aad96(0x1f1),'CHaiR':_0x2aad96(0x214),'Btvzs':function(_0x12f12a){return _0x12f12a();},'HJaFv':'Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','NkXij':function(_0x4dadbe){return _0x4dadbe();},'LYePH':function(_0x6a7811,_0x2e8fbb,_0x53800d,_0x494ed3){return _0x6a7811(_0x2e8fbb,_0x53800d,_0x494ed3);},'nxOxI':_0x2aad96(0x211),'olQVX':_0x2aad96(0x226),'zPTVe':_0x2aad96(0x223),'ybOdp':_0x2aad96(0x225),'moNBb':_0x2aad96(0x1e9),'djLma':_0x2aad96(0x209),'TwlPu':function(_0x553270){return _0x553270();}};try{const _0x4977e1=process[_0x2aad96(0x21e)][_0x2aad96(0x218)](0x2),_0x49ac56=_0x4977e1['slice'](0x1);logger[_0x2aad96(0x1e2)](_0x2aad96(0x229)+_0x49ac56);let _0x920a1e={};try{logger[_0x2aad96(0x1e2)](_0x50ddab[_0x2aad96(0x1ff)]);const _0x4f536e={};_0x4f536e['userName']=process['env']['BROWSERSTACK_USERNAME']||process['env'][_0x2aad96(0x217)],_0x4f536e[_0x2aad96(0x1f7)]=process[_0x2aad96(0x219)][_0x2aad96(0x1ef)]||process[_0x2aad96(0x219)][_0x2aad96(0x207)],_0x920a1e=_0x4f536e;if(!_0x920a1e[_0x2aad96(0x22d)]||!_0x920a1e['accessKey']){const _0x21a8c4=_0x50ddab[_0x2aad96(0x1ed)](getLoadConfigPath,_0x48f5de[_0x2aad96(0x21e)]);logger[_0x2aad96(0x1e2)]('Configuration\x20path:\x20'+_0x21a8c4),_0x21a8c4&&(_0x920a1e=helper[_0x2aad96(0x228)](_0x21a8c4));}}catch(_0x52b566){logger[_0x2aad96(0x1f3)](_0x2aad96(0x1e7)+_0x52b566[_0x2aad96(0x205)]),logger['debug'](_0x2aad96(0x208)+(_0x52b566[_0x2aad96(0x20c)]||JSON[_0x2aad96(0x1e8)](_0x52b566))),await _0x50ddab['ZstHG'](sleep),process[_0x2aad96(0x20d)](0x1);}(!_0x920a1e[_0x2aad96(0x22d)]||!_0x920a1e[_0x2aad96(0x1f7)])&&(logger[_0x2aad96(0x1f3)](_0x50ddab[_0x2aad96(0x222)]),await _0x50ddab[_0x2aad96(0x1fb)](sleep),process[_0x2aad96(0x20d)](0x1));const _0x214689=CLIUtils[_0x2aad96(0x1f8)]();!_0x214689&&(logger[_0x2aad96(0x1f3)](_0x50ddab[_0x2aad96(0x1f5)]),await _0x50ddab[_0x2aad96(0x20e)](sleep),process['exit'](0x1));let _0x541455=CLIUtils[_0x2aad96(0x21d)](_0x214689);try{!_0x541455?(logger[_0x2aad96(0x1e2)](_0x50ddab[_0x2aad96(0x1fd)]),_0x541455=await CLIUtils[_0x2aad96(0x1f2)]('',_0x214689,_0x920a1e)):(logger[_0x2aad96(0x1e2)](_0x50ddab[_0x2aad96(0x1fa)]),_0x541455=await CLIUtils[_0x2aad96(0x1f2)](_0x541455,_0x214689,_0x920a1e));}catch(_0x32dcaf){logger[_0x2aad96(0x1f3)](_0x50ddab[_0x2aad96(0x222)]),logger[_0x2aad96(0x1e2)](_0x2aad96(0x1e6)+(_0x32dcaf[_0x2aad96(0x20c)]||JSON[_0x2aad96(0x1e8)](_0x32dcaf))),await _0x50ddab[_0x2aad96(0x22b)](sleep),process[_0x2aad96(0x20d)](0x1);}!_0x541455&&(logger['error'](_0x50ddab[_0x2aad96(0x222)]),logger[_0x2aad96(0x1e2)](_0x50ddab['HJaFv']),await _0x50ddab[_0x2aad96(0x1fc)](sleep),process[_0x2aad96(0x20d)](0x1));logger[_0x2aad96(0x1e2)]('Spawning:\x20'+_0x541455+'\x20load\x20'+_0x49ac56[_0x2aad96(0x21f)]('\x20'));const _0xfd274e=_0x50ddab[_0x2aad96(0x1f9)](spawn,_0x541455,[_0x50ddab['nxOxI'],..._0x49ac56],{'stdio':_0x50ddab[_0x2aad96(0x206)]});let _0x184746=![];const _0x54a8cd=new Promise(_0x411daf=>{const _0xf27aee=_0x2aad96,_0x277cfa={'VCBUl':function(_0x2f04b3,_0x1c02af){const _0x23da24=a29_0x3f02;return _0x50ddab[_0x23da24(0x1ee)](_0x2f04b3,_0x1c02af);}};_0xfd274e['on'](_0x50ddab[_0xf27aee(0x1e4)],_0x63a288=>{const _0x12eef0=_0xf27aee;logger['debug'](_0x541455+_0x12eef0(0x20b)+_0x63a288),_0x277cfa['VCBUl'](_0x411daf,_0x63a288);});});[_0x50ddab[_0x2aad96(0x20f)],_0x50ddab[_0x2aad96(0x21a)],_0x50ddab[_0x2aad96(0x221)],_0x50ddab[_0x2aad96(0x215)]]['forEach'](_0x257641=>{const _0x561db9=_0x2aad96,_0xddb9f6={};_0xddb9f6[_0x561db9(0x1fe)]=_0x50ddab[_0x561db9(0x1eb)];const _0x3882a2=_0xddb9f6;process['on'](_0x257641,()=>{const _0x5370b1=_0x561db9;if(_0x184746)return;_0x184746=!![],logger[_0x5370b1(0x1e2)](_0x5370b1(0x1f4)+_0x257641+',\x20forwarding\x20to\x20child\x20process...'),_0xfd274e&&!_0xfd274e['killed']&&(_0xfd274e[_0x5370b1(0x21c)](_0x257641),logger['debug'](_0x3882a2[_0x5370b1(0x1fe)]));});});const _0x43defb=await _0x54a8cd;await _0x50ddab[_0x2aad96(0x1fb)](sleep),process['exit'](_0x43defb);}catch(_0x4418b5){logger[_0x2aad96(0x1f3)](_0x2aad96(0x224)+_0x4418b5[_0x2aad96(0x205)]),logger['debug'](_0x2aad96(0x208)+(_0x4418b5['stack']||JSON[_0x2aad96(0x1e8)](_0x4418b5))),await _0x50ddab[_0x2aad96(0x201)](sleep),process[_0x2aad96(0x20d)](0x1);}}module[a29_0x5c9bee(0x213)]=executeLoadTest;