#!/usr/bin/env node
'use strict';const a28_0x540934=a28_0x51eb;function a28_0x1a49(){const _0x3ccac7=['Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','9386680DKyAhD','KrTNh','SIGQUIT','SIGHUP','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','693675agCuKP','Error\x20Details:\x20','SIGTERM','BROWSERSTACK_ACCESSKEY','../../helpers/logger','SZXaN','RbsTa','message','readConfig','FZPqB','stack','BROWSERSTACK_ACCESS_KEY','join','forEach','\x20load\x20','./loadUtils','load','3322184XDmTWu','Pdafx','debug','getCliDir','Executing\x20load\x20test\x20with\x20arguments:\x20','7RTLQBw','checkAndUpdateCli','vlXuQ','tnTwN','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','slice','error','Failed\x20initiating\x20load\x20test:\x20','5248680EmkFnu','1173735AgAmfG','oDwjf','accessKey','\x20exited\x20with\x20code\x20','LRMsU','exit','ZyCzF','getExistingCliPath','9lsZlOl','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','env','rqPnm','Waiting\x20for\x20child\x20process\x20to\x20exit...','wuBLX','Error\x20details:\x20','54yfklZx','child_process','Xgjgg','14933256uwJbAK','winstonLogger','RJAtS','inherit','Configuration\x20path:\x20',',\x20forwarding\x20to\x20child\x20process...','killed','userName','cXngm','BROWSERSTACK_USERNAME','argv','106962GIgvhq','../../helpers/helper','SIGINT','Rjpti','Spawning:\x20','Failed\x20to\x20determine\x20CLI\x20directory'];a28_0x1a49=function(){return _0x3ccac7;};return a28_0x1a49();}(function(_0x300fd4,_0x2a4187){const _0x346e80=a28_0x51eb,_0x799097=_0x300fd4();while(!![]){try{const _0x3064f9=-parseInt(_0x346e80(0x73))/0x1+parseInt(_0x346e80(0x66))/0x2*(-parseInt(_0x346e80(0xa1))/0x3)+-parseInt(_0x346e80(0x84))/0x4+-parseInt(_0x346e80(0x92))/0x5+parseInt(_0x346e80(0x91))/0x6+parseInt(_0x346e80(0x89))/0x7*(parseInt(_0x346e80(0xa4))/0x8)+-parseInt(_0x346e80(0x9a))/0x9*(-parseInt(_0x346e80(0x6e))/0xa);if(_0x3064f9===_0x2a4187)break;else _0x799097['push'](_0x799097['shift']());}catch(_0x53f580){_0x799097['push'](_0x799097['shift']());}}}(a28_0x1a49,0xea00f));const {spawn}=require(a28_0x540934(0xa2)),path=require('path'),helper=require(a28_0x540934(0x67)),CLIUtils=require('../v2/cliUtils'),{getLoadConfigPath,sleep}=require(a28_0x540934(0x82)),logger=require(a28_0x540934(0x77))[a28_0x540934(0xa5)];function a28_0x51eb(_0x1379d9,_0x23659a){const _0x1a49fe=a28_0x1a49();return a28_0x51eb=function(_0x51ebe9,_0x246f9e){_0x51ebe9=_0x51ebe9-0x64;let _0x2fa897=_0x1a49fe[_0x51ebe9];return _0x2fa897;},a28_0x51eb(_0x1379d9,_0x23659a);}async function executeLoadTest(_0x3ce089){const _0x41bfd4=a28_0x540934,_0x22de4c={'LRMsU':function(_0x186a89,_0x141778){return _0x186a89(_0x141778);},'wuBLX':'close','KrTNh':_0x41bfd4(0x9e),'ZyCzF':_0x41bfd4(0x72),'RbsTa':function(_0x1fac19){return _0x1fac19();},'Pdafx':_0x41bfd4(0x6c),'rqPnm':_0x41bfd4(0x6b),'oDwjf':_0x41bfd4(0x9b),'FZPqB':_0x41bfd4(0x8d),'Rjpti':function(_0xe6550f){return _0xe6550f();},'vlXuQ':_0x41bfd4(0x6d),'oWdeQ':function(_0x38852d){return _0x38852d();},'yrPTb':function(_0x129dcc,_0x5baa0b,_0x46b660,_0x3af2c6){return _0x129dcc(_0x5baa0b,_0x46b660,_0x3af2c6);},'hiUot':_0x41bfd4(0x83),'rUEPR':_0x41bfd4(0xa7),'tnTwN':_0x41bfd4(0x68),'Wabbe':_0x41bfd4(0x75),'RJAtS':_0x41bfd4(0x70),'SZXaN':_0x41bfd4(0x71),'cXngm':function(_0x418ab3){return _0x418ab3();}};try{const _0xb2aec7=process[_0x41bfd4(0x65)][_0x41bfd4(0x8e)](0x2),_0x5dda09=_0xb2aec7[_0x41bfd4(0x8e)](0x1);logger[_0x41bfd4(0x86)](_0x41bfd4(0x88)+_0x5dda09);let _0x25c5e4={};try{logger[_0x41bfd4(0x86)](_0x22de4c[_0x41bfd4(0x98)]);const _0x59cbcd={};_0x59cbcd['userName']=process[_0x41bfd4(0x9c)][_0x41bfd4(0x64)]||process[_0x41bfd4(0x9c)]['BROWSERSTACK_USER'],_0x59cbcd[_0x41bfd4(0x94)]=process['env'][_0x41bfd4(0x7e)]||process[_0x41bfd4(0x9c)][_0x41bfd4(0x76)],_0x25c5e4=_0x59cbcd;if(!_0x25c5e4['userName']||!_0x25c5e4[_0x41bfd4(0x94)]){const _0x283dc7=_0x22de4c[_0x41bfd4(0x96)](getLoadConfigPath,_0x3ce089['argv']);logger['debug'](_0x41bfd4(0xa8)+_0x283dc7),_0x283dc7&&(_0x25c5e4=helper[_0x41bfd4(0x7b)](_0x283dc7));}}catch(_0x4a5581){logger[_0x41bfd4(0x8f)]('Error\x20loading\x20configuration:\x20'+_0x4a5581[_0x41bfd4(0x7a)]),logger[_0x41bfd4(0x86)](_0x41bfd4(0xa0)+(_0x4a5581['stack']||JSON['stringify'](_0x4a5581))),await _0x22de4c[_0x41bfd4(0x79)](sleep),process[_0x41bfd4(0x97)](0x1);}(!_0x25c5e4[_0x41bfd4(0xab)]||!_0x25c5e4['accessKey'])&&(logger['error'](_0x22de4c['Pdafx']),await _0x22de4c[_0x41bfd4(0x79)](sleep),process[_0x41bfd4(0x97)](0x1));const _0x1c49a8=CLIUtils[_0x41bfd4(0x87)]();!_0x1c49a8&&(logger[_0x41bfd4(0x8f)](_0x22de4c[_0x41bfd4(0x9d)]),await _0x22de4c[_0x41bfd4(0x79)](sleep),process[_0x41bfd4(0x97)](0x1));let _0x4b2307=CLIUtils[_0x41bfd4(0x99)](_0x1c49a8);try{!_0x4b2307?(logger['debug'](_0x22de4c[_0x41bfd4(0x93)]),_0x4b2307=await CLIUtils['checkAndUpdateCli']('',_0x1c49a8,_0x25c5e4)):(logger[_0x41bfd4(0x86)](_0x22de4c[_0x41bfd4(0x7c)]),_0x4b2307=await CLIUtils[_0x41bfd4(0x8a)](_0x4b2307,_0x1c49a8,_0x25c5e4));}catch(_0x1f10be){logger['error'](_0x22de4c[_0x41bfd4(0x85)]),logger[_0x41bfd4(0x86)](_0x41bfd4(0x74)+(_0x1f10be[_0x41bfd4(0x7d)]||JSON['stringify'](_0x1f10be))),await _0x22de4c[_0x41bfd4(0x69)](sleep),process[_0x41bfd4(0x97)](0x1);}!_0x4b2307&&(logger[_0x41bfd4(0x8f)](_0x22de4c[_0x41bfd4(0x85)]),logger['debug'](_0x22de4c[_0x41bfd4(0x8b)]),await _0x22de4c['oWdeQ'](sleep),process[_0x41bfd4(0x97)](0x1));logger[_0x41bfd4(0x86)](_0x41bfd4(0x6a)+_0x4b2307+_0x41bfd4(0x81)+_0x5dda09[_0x41bfd4(0x7f)]('\x20'));const _0x16a468=_0x22de4c['yrPTb'](spawn,_0x4b2307,[_0x22de4c['hiUot'],..._0x5dda09],{'stdio':_0x22de4c['rUEPR']});let _0x2e218e=![];const _0x5b9b45=new Promise(_0x3b6a25=>{const _0x20fb83=_0x41bfd4;_0x16a468['on'](_0x22de4c[_0x20fb83(0x9f)],_0x587b96=>{const _0x53e8be=_0x20fb83;logger[_0x53e8be(0x86)](_0x4b2307+_0x53e8be(0x95)+_0x587b96),_0x22de4c[_0x53e8be(0x96)](_0x3b6a25,_0x587b96);});});[_0x22de4c[_0x41bfd4(0x8c)],_0x22de4c['Wabbe'],_0x22de4c[_0x41bfd4(0xa6)],_0x22de4c[_0x41bfd4(0x78)]][_0x41bfd4(0x80)](_0x39a423=>{const _0x3ede87=_0x41bfd4,_0x554ed7={};_0x554ed7[_0x3ede87(0xa3)]=_0x22de4c[_0x3ede87(0x6f)];const _0x38607b=_0x554ed7;process['on'](_0x39a423,()=>{const _0x50f914=_0x3ede87;if(_0x2e218e)return;_0x2e218e=!![],logger[_0x50f914(0x86)]('Received\x20'+_0x39a423+_0x50f914(0xa9)),_0x16a468&&!_0x16a468[_0x50f914(0xaa)]&&(_0x16a468['kill'](_0x39a423),logger[_0x50f914(0x86)](_0x38607b[_0x50f914(0xa3)]));});});const _0x5e360b=await _0x5b9b45;await _0x22de4c[_0x41bfd4(0x79)](sleep),process[_0x41bfd4(0x97)](_0x5e360b);}catch(_0x4bb491){logger[_0x41bfd4(0x8f)](_0x41bfd4(0x90)+_0x4bb491[_0x41bfd4(0x7a)]),logger[_0x41bfd4(0x86)]('Error\x20details:\x20'+(_0x4bb491[_0x41bfd4(0x7d)]||JSON['stringify'](_0x4bb491))),await _0x22de4c[_0x41bfd4(0xac)](sleep),process[_0x41bfd4(0x97)](0x1);}}module['exports']=executeLoadTest;