#!/usr/bin/env node
'use strict';const a28_0x46ad6f=a28_0x19eb;(function(_0x3c1dbb,_0x392f39){const _0x3d4c47=a28_0x19eb,_0xea4cb7=_0x3c1dbb();while(!![]){try{const _0x416c79=-parseInt(_0x3d4c47(0x153))/0x1*(-parseInt(_0x3d4c47(0x129))/0x2)+parseInt(_0x3d4c47(0x133))/0x3+parseInt(_0x3d4c47(0x14d))/0x4+-parseInt(_0x3d4c47(0x14b))/0x5*(parseInt(_0x3d4c47(0x13a))/0x6)+-parseInt(_0x3d4c47(0x11a))/0x7+-parseInt(_0x3d4c47(0x156))/0x8+parseInt(_0x3d4c47(0x135))/0x9*(-parseInt(_0x3d4c47(0x118))/0xa);if(_0x416c79===_0x392f39)break;else _0xea4cb7['push'](_0xea4cb7['shift']());}catch(_0x11ffe6){_0xea4cb7['push'](_0xea4cb7['shift']());}}}(a28_0x3e1c,0xcdffe));const {spawn}=require('child_process'),path=require(a28_0x46ad6f(0x136)),helper=require('../../helpers/helper'),CLIUtils=require(a28_0x46ad6f(0x142)),{getLoadConfigPath,sleep}=require('./loadUtils'),logger=require(a28_0x46ad6f(0x114))[a28_0x46ad6f(0x122)];async function executeLoadTest(_0x39edc4){const _0x480258=a28_0x46ad6f,_0x326189={'LDETP':function(_0x5a538d,_0x51e8e4){return _0x5a538d(_0x51e8e4);},'WqEvn':_0x480258(0x155),'goPno':_0x480258(0x117),'liKSk':'Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','KYISt':function(_0x4f1ef5,_0x59a0cb){return _0x4f1ef5(_0x59a0cb);},'FmTPs':function(_0xe374){return _0xe374();},'Hibor':_0x480258(0x126),'eDMBI':'Failed\x20to\x20determine\x20CLI\x20directory','nMBsi':'CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','sRIjx':_0x480258(0x12e),'khymf':function(_0x14a80f){return _0x14a80f();},'JVrzS':_0x480258(0x124),'iOJLa':function(_0x4ac5f3,_0x359c9b,_0x3982f3,_0x599f60){return _0x4ac5f3(_0x359c9b,_0x3982f3,_0x599f60);},'msPiO':_0x480258(0x141),'zpMwA':_0x480258(0x130),'uvFga':_0x480258(0x151),'KSbXs':_0x480258(0x139),'QYgJp':_0x480258(0x128),'vcwZg':_0x480258(0x12d),'HfChw':function(_0x5e5bf7){return _0x5e5bf7();}};try{const _0x2ba17f=process[_0x480258(0x120)]['slice'](0x2),_0x3b0e2c=_0x2ba17f[_0x480258(0x148)](0x1);logger[_0x480258(0x13b)]('Executing\x20load\x20test\x20with\x20arguments:\x20'+_0x3b0e2c);let _0x11a02d={};try{logger['debug'](_0x326189['liKSk']);const _0x4782ee={};_0x4782ee['userName']=process[_0x480258(0x11f)][_0x480258(0x11c)]||process[_0x480258(0x11f)][_0x480258(0x152)],_0x4782ee[_0x480258(0x125)]=process[_0x480258(0x11f)][_0x480258(0x137)]||process[_0x480258(0x11f)][_0x480258(0x115)],_0x11a02d=_0x4782ee;if(!_0x11a02d[_0x480258(0x12b)]||!_0x11a02d['accessKey']){const _0x176393=_0x326189[_0x480258(0x149)](getLoadConfigPath,_0x39edc4[_0x480258(0x120)]);logger[_0x480258(0x13b)]('Configuration\x20path:\x20'+_0x176393),_0x176393&&(_0x11a02d=helper[_0x480258(0x112)](_0x176393));}}catch(_0x4a5a6b){logger[_0x480258(0x150)](_0x480258(0x147)+_0x4a5a6b[_0x480258(0x14a)]),logger[_0x480258(0x13b)](_0x480258(0x14e)+(_0x4a5a6b[_0x480258(0x132)]||JSON[_0x480258(0x131)](_0x4a5a6b))),await _0x326189[_0x480258(0x134)](sleep),process[_0x480258(0x13f)](0x1);}(!_0x11a02d[_0x480258(0x12b)]||!_0x11a02d[_0x480258(0x125)])&&(logger[_0x480258(0x150)](_0x326189[_0x480258(0x11b)]),await _0x326189['FmTPs'](sleep),process[_0x480258(0x13f)](0x1));const _0x48797f=CLIUtils[_0x480258(0x145)]();!_0x48797f&&(logger[_0x480258(0x150)](_0x326189[_0x480258(0x127)]),await _0x326189[_0x480258(0x134)](sleep),process[_0x480258(0x13f)](0x1));let _0x2a17e1=CLIUtils['getExistingCliPath'](_0x48797f);try{!_0x2a17e1?(logger[_0x480258(0x13b)](_0x326189[_0x480258(0x12a)]),_0x2a17e1=await CLIUtils['checkAndUpdateCli']('',_0x48797f,_0x11a02d)):(logger['debug'](_0x326189[_0x480258(0x14c)]),_0x2a17e1=await CLIUtils[_0x480258(0x13e)](_0x2a17e1,_0x48797f,_0x11a02d));}catch(_0x4a9d2d){logger['error'](_0x326189[_0x480258(0x11b)]),logger[_0x480258(0x13b)](_0x480258(0x11e)+(_0x4a9d2d['stack']||JSON[_0x480258(0x131)](_0x4a9d2d))),await _0x326189['khymf'](sleep),process[_0x480258(0x13f)](0x1);}!_0x2a17e1&&(logger['error'](_0x326189[_0x480258(0x11b)]),logger[_0x480258(0x13b)](_0x326189['JVrzS']),await _0x326189[_0x480258(0x12c)](sleep),process['exit'](0x1));logger[_0x480258(0x13b)](_0x480258(0x119)+_0x2a17e1+_0x480258(0x154)+_0x3b0e2c[_0x480258(0x13c)]('\x20'));const _0x5830a0=_0x326189['iOJLa'](spawn,_0x2a17e1,[_0x326189['msPiO'],..._0x3b0e2c],{'stdio':_0x326189['zpMwA']});let _0xcebb6c=![];const _0x338a9a=new Promise(_0x4c989e=>{const _0x3f676c=_0x480258,_0x3f6ec2={'tOxdv':function(_0x410af0,_0x245a89){return _0x326189['LDETP'](_0x410af0,_0x245a89);}};_0x5830a0['on'](_0x326189[_0x3f676c(0x13d)],_0x10a257=>{const _0x1758a6=_0x3f676c;logger['debug'](_0x2a17e1+_0x1758a6(0x11d)+_0x10a257),_0x3f6ec2[_0x1758a6(0x12f)](_0x4c989e,_0x10a257);});});[_0x326189[_0x480258(0x146)],_0x326189[_0x480258(0x123)],_0x326189[_0x480258(0x116)],_0x326189['vcwZg']][_0x480258(0x14f)](_0x4f5072=>{process['on'](_0x4f5072,()=>{const _0x4e83b3=a28_0x19eb;if(_0xcebb6c)return;_0xcebb6c=!![],logger[_0x4e83b3(0x13b)](_0x4e83b3(0x140)+_0x4f5072+_0x4e83b3(0x144)),_0x5830a0&&!_0x5830a0['killed']&&(_0x5830a0[_0x4e83b3(0x138)](_0x4f5072),logger[_0x4e83b3(0x13b)](_0x326189[_0x4e83b3(0x143)]));});});const _0x3a19e8=await _0x338a9a;await _0x326189[_0x480258(0x121)](sleep),process[_0x480258(0x13f)](_0x3a19e8);}catch(_0x4004bf){logger[_0x480258(0x150)](_0x480258(0x113)+_0x4004bf['message']),logger['debug'](_0x480258(0x14e)+(_0x4004bf[_0x480258(0x132)]||JSON[_0x480258(0x131)](_0x4004bf))),await _0x326189[_0x480258(0x12c)](sleep),process[_0x480258(0x13f)](0x1);}}function a28_0x3e1c(){const _0x1a94a3=['SIGINT','BROWSERSTACK_USER','1183607OoghdI','\x20load\x20','close','3602032cfreId','readConfig','Failed\x20initiating\x20load\x20test:\x20','../../helpers/logger','BROWSERSTACK_ACCESSKEY','QYgJp','Waiting\x20for\x20child\x20process\x20to\x20exit...','1462790CaDvxn','Spawning:\x20','5426134jYEkfa','Hibor','BROWSERSTACK_USERNAME','\x20exited\x20with\x20code\x20','Error\x20Details:\x20','env','argv','HfChw','winstonLogger','KSbXs','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','accessKey','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','eDMBI','SIGQUIT','2cBDvEE','nMBsi','userName','khymf','SIGHUP','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','tOxdv','inherit','stringify','stack','3600531dhHZQC','FmTPs','27STooyy','path','BROWSERSTACK_ACCESS_KEY','kill','SIGTERM','6WQIJxe','debug','join','WqEvn','checkAndUpdateCli','exit','Received\x20','load','../v2/cliUtils','goPno',',\x20forwarding\x20to\x20child\x20process...','getCliDir','uvFga','Error\x20loading\x20configuration:\x20','slice','KYISt','message','5869735MgSApI','sRIjx','5192760ytbjJK','Error\x20details:\x20','forEach','error'];a28_0x3e1c=function(){return _0x1a94a3;};return a28_0x3e1c();}function a28_0x19eb(_0x5df27d,_0x3a52d4){const _0x3e1c81=a28_0x3e1c();return a28_0x19eb=function(_0x19ebc0,_0x4a2bd3){_0x19ebc0=_0x19ebc0-0x112;let _0x255503=_0x3e1c81[_0x19ebc0];return _0x255503;},a28_0x19eb(_0x5df27d,_0x3a52d4);}module['exports']=executeLoadTest;