#!/usr/bin/env node
'use strict';const a29_0x4362ea=a29_0x3dfd;(function(_0xf5cc93,_0x543a39){const _0x47974f=a29_0x3dfd,_0x30eec1=_0xf5cc93();while(!![]){try{const _0x5bd8b1=-parseInt(_0x47974f(0xdd))/0x1*(parseInt(_0x47974f(0xd8))/0x2)+-parseInt(_0x47974f(0xc0))/0x3*(-parseInt(_0x47974f(0xed))/0x4)+parseInt(_0x47974f(0xd7))/0x5*(parseInt(_0x47974f(0xe5))/0x6)+-parseInt(_0x47974f(0xf9))/0x7*(-parseInt(_0x47974f(0xca))/0x8)+parseInt(_0x47974f(0xd5))/0x9+-parseInt(_0x47974f(0xee))/0xa*(parseInt(_0x47974f(0xe0))/0xb)+-parseInt(_0x47974f(0xc7))/0xc;if(_0x5bd8b1===_0x543a39)break;else _0x30eec1['push'](_0x30eec1['shift']());}catch(_0x3c1df6){_0x30eec1['push'](_0x30eec1['shift']());}}}(a29_0x29a2,0xa5f90));const {spawn}=require('child_process'),path=require(a29_0x4362ea(0xfc)),helper=require('../../helpers/helper'),CLIUtils=require('../v2/cliUtils'),{getLoadConfigPath,sleep}=require(a29_0x4362ea(0xc8)),logger=require(a29_0x4362ea(0xba))['winstonLogger'];async function executeLoadTest(_0x3ea786){const _0x341087=a29_0x4362ea,_0x9df2f8={'JcBqf':function(_0x28d12a,_0x3ee1e8){return _0x28d12a(_0x3ee1e8);},'YOkHh':_0x341087(0xde),'DntDL':_0x341087(0xc2),'HkYua':_0x341087(0xce),'CAUVd':function(_0x3a3656){return _0x3a3656();},'MKcSr':'Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','pNhBr':function(_0x524ee9){return _0x524ee9();},'sQfCs':_0x341087(0xe4),'EKHoL':_0x341087(0xf7),'XUBUr':'CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','eqtsZ':_0x341087(0xe8),'sQLOL':function(_0x38fe2a,_0x5c68a9,_0x422e3f,_0x94cdbe){return _0x38fe2a(_0x5c68a9,_0x422e3f,_0x94cdbe);},'zTQmh':_0x341087(0xc4),'NXhNb':_0x341087(0xfb),'uRglf':_0x341087(0xf2),'AzBFZ':_0x341087(0xcd),'ryBiW':_0x341087(0xbd),'HmSds':_0x341087(0xd0),'iYXHt':function(_0x3b8824){return _0x3b8824();}};try{const _0x22b947=process[_0x341087(0xc6)][_0x341087(0xc9)](0x2),_0x4c582e=_0x22b947[_0x341087(0xc9)](0x1);logger[_0x341087(0xc5)]('Executing\x20load\x20test\x20with\x20arguments:\x20'+_0x4c582e);let _0x3fa776={};try{logger[_0x341087(0xc5)](_0x9df2f8[_0x341087(0xbb)]);const _0xfef706={};_0xfef706[_0x341087(0xe1)]=process[_0x341087(0xbc)]['BROWSERSTACK_USERNAME']||process[_0x341087(0xbc)][_0x341087(0xf5)],_0xfef706[_0x341087(0xfe)]=process[_0x341087(0xbc)]['BROWSERSTACK_ACCESS_KEY']||process['env']['BROWSERSTACK_ACCESSKEY'],_0x3fa776=_0xfef706;if(!_0x3fa776['userName']||!_0x3fa776['accessKey']){const _0xefcbe3=_0x9df2f8[_0x341087(0xbf)](getLoadConfigPath,_0x3ea786[_0x341087(0xc6)]);logger['debug']('Configuration\x20path:\x20'+_0xefcbe3),_0xefcbe3&&(_0x3fa776=helper['readConfig'](_0xefcbe3));}}catch(_0x9c1ade){logger[_0x341087(0xdc)]('Error\x20loading\x20configuration:\x20'+_0x9c1ade[_0x341087(0xbe)]),logger[_0x341087(0xc5)](_0x341087(0xe3)+(_0x9c1ade[_0x341087(0xd6)]||JSON[_0x341087(0xf6)](_0x9c1ade))),await _0x9df2f8[_0x341087(0xd3)](sleep),process[_0x341087(0xe9)](0x1);}(!_0x3fa776['userName']||!_0x3fa776['accessKey'])&&(logger['error'](_0x9df2f8[_0x341087(0xf3)]),await _0x9df2f8[_0x341087(0xcc)](sleep),process['exit'](0x1));const _0xd41bff=CLIUtils[_0x341087(0xf8)]();!_0xd41bff&&(logger[_0x341087(0xdc)](_0x9df2f8[_0x341087(0xeb)]),await _0x9df2f8['pNhBr'](sleep),process['exit'](0x1));let _0x52747a=CLIUtils[_0x341087(0xc1)](_0xd41bff);try{!_0x52747a?(logger[_0x341087(0xc5)](_0x9df2f8['EKHoL']),_0x52747a=await CLIUtils[_0x341087(0xec)]('',_0xd41bff,_0x3fa776)):(logger[_0x341087(0xc5)](_0x9df2f8[_0x341087(0xf4)]),_0x52747a=await CLIUtils[_0x341087(0xec)](_0x52747a,_0xd41bff,_0x3fa776));}catch(_0x3f29cd){logger[_0x341087(0xdc)](_0x9df2f8[_0x341087(0xf3)]),logger['debug']('Error\x20Details:\x20'+(_0x3f29cd[_0x341087(0xd6)]||JSON[_0x341087(0xf6)](_0x3f29cd))),await _0x9df2f8[_0x341087(0xcc)](sleep),process[_0x341087(0xe9)](0x1);}!_0x52747a&&(logger[_0x341087(0xdc)](_0x9df2f8[_0x341087(0xf3)]),logger[_0x341087(0xc5)](_0x9df2f8[_0x341087(0xd1)]),await _0x9df2f8[_0x341087(0xd3)](sleep),process[_0x341087(0xe9)](0x1));logger[_0x341087(0xc5)](_0x341087(0xc3)+_0x52747a+_0x341087(0xef)+_0x4c582e['join']('\x20'));const _0x48d4bd=_0x9df2f8[_0x341087(0xd9)](spawn,_0x52747a,[_0x9df2f8[_0x341087(0xe7)],..._0x4c582e],{'stdio':_0x9df2f8[_0x341087(0xea)]});let _0x1ec1a0=![];const _0x2538a7=new Promise(_0xbae0a0=>{const _0x9fd6d1=_0x341087,_0x451cae={'utbGy':function(_0x3ec47f,_0x33f3d1){const _0x2f0dda=a29_0x3dfd;return _0x9df2f8[_0x2f0dda(0xbf)](_0x3ec47f,_0x33f3d1);}};_0x48d4bd['on'](_0x9df2f8[_0x9fd6d1(0xd2)],_0x3f6a18=>{const _0x492adb=_0x9fd6d1;logger['debug'](_0x52747a+_0x492adb(0xd4)+_0x3f6a18),_0x451cae['utbGy'](_0xbae0a0,_0x3f6a18);});});[_0x9df2f8[_0x341087(0xf1)],_0x9df2f8[_0x341087(0xfd)],_0x9df2f8['ryBiW'],_0x9df2f8[_0x341087(0xe2)]][_0x341087(0xfa)](_0x1c2379=>{process['on'](_0x1c2379,()=>{const _0x27588a=a29_0x3dfd;if(_0x1ec1a0)return;_0x1ec1a0=!![],logger[_0x27588a(0xc5)](_0x27588a(0xda)+_0x1c2379+_0x27588a(0xdf)),_0x48d4bd&&!_0x48d4bd[_0x27588a(0xdb)]&&(_0x48d4bd[_0x27588a(0xe6)](_0x1c2379),logger['debug'](_0x9df2f8['DntDL']));});});const _0x22a96c=await _0x2538a7;await _0x9df2f8[_0x341087(0xd3)](sleep),process['exit'](_0x22a96c);}catch(_0x2b8cbf){logger[_0x341087(0xdc)](_0x341087(0xcb)+_0x2b8cbf[_0x341087(0xbe)]),logger[_0x341087(0xc5)]('Error\x20details:\x20'+(_0x2b8cbf[_0x341087(0xd6)]||JSON[_0x341087(0xf6)](_0x2b8cbf))),await _0x9df2f8[_0x341087(0xcf)](sleep),process['exit'](0x1);}}module[a29_0x4362ea(0xf0)]=executeLoadTest;function a29_0x3dfd(_0x5ecd6c,_0x39af10){const _0x29a231=a29_0x29a2();return a29_0x3dfd=function(_0x3dfd63,_0x58c3b6){_0x3dfd63=_0x3dfd63-0xba;let _0x2caa0d=_0x29a231[_0x3dfd63];return _0x2caa0d;},a29_0x3dfd(_0x5ecd6c,_0x39af10);}function a29_0x29a2(){const _0x64f1f8=['stringify','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','getCliDir','32935oBEtdP','forEach','inherit','path','AzBFZ','accessKey','../../helpers/logger','HkYua','env','SIGQUIT','message','JcBqf','3ktHYSu','getExistingCliPath','Waiting\x20for\x20child\x20process\x20to\x20exit...','Spawning:\x20','load','debug','argv','1816320yFERob','./loadUtils','slice','2288VPMxxR','Failed\x20initiating\x20load\x20test:\x20','pNhBr','SIGTERM','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','iYXHt','SIGHUP','eqtsZ','YOkHh','CAUVd','\x20exited\x20with\x20code\x20','6866478KYusRe','stack','5oqyeDK','4fqLtJe','sQLOL','Received\x20','killed','error','370113bsNCsk','close',',\x20forwarding\x20to\x20child\x20process...','4191275dRfUPH','userName','HmSds','Error\x20details:\x20','Failed\x20to\x20determine\x20CLI\x20directory','1124922ogbDrK','kill','zTQmh','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','exit','NXhNb','sQfCs','checkAndUpdateCli','149604FxTofV','20sfNAka','\x20load\x20','exports','uRglf','SIGINT','MKcSr','XUBUr','BROWSERSTACK_USER'];a29_0x29a2=function(){return _0x64f1f8;};return a29_0x29a2();}