#!/usr/bin/env node
'use strict';const a29_0x37417e=a29_0x5877;(function(_0x59238f,_0x2a8408){const _0x2ac171=a29_0x5877,_0x20564f=_0x59238f();while(!![]){try{const _0x3de6b6=parseInt(_0x2ac171(0x1de))/0x1+parseInt(_0x2ac171(0x1d4))/0x2+parseInt(_0x2ac171(0x1c2))/0x3+parseInt(_0x2ac171(0x1aa))/0x4+-parseInt(_0x2ac171(0x1cd))/0x5*(-parseInt(_0x2ac171(0x1e1))/0x6)+parseInt(_0x2ac171(0x1c9))/0x7*(parseInt(_0x2ac171(0x1e2))/0x8)+parseInt(_0x2ac171(0x1df))/0x9*(-parseInt(_0x2ac171(0x1c5))/0xa);if(_0x3de6b6===_0x2a8408)break;else _0x20564f['push'](_0x20564f['shift']());}catch(_0x33e604){_0x20564f['push'](_0x20564f['shift']());}}}(a29_0x3e6d,0x39943));const {spawn}=require('child_process'),path=require('path'),helper=require(a29_0x37417e(0x1d3)),CLIUtils=require(a29_0x37417e(0x1e3)),{getLoadConfigPath,sleep}=require(a29_0x37417e(0x1b2)),logger=require(a29_0x37417e(0x1d0))['winstonLogger'];function a29_0x5877(_0x193409,_0x577186){const _0x3e6d80=a29_0x3e6d();return a29_0x5877=function(_0x5877e2,_0x18b5d0){_0x5877e2=_0x5877e2-0x1a5;let _0x25515f=_0x3e6d80[_0x5877e2];return _0x25515f;},a29_0x5877(_0x193409,_0x577186);}async function executeLoadTest(_0x368586){const _0x11aaf8=a29_0x37417e,_0x130505={'pOoWF':function(_0x9845e5,_0x551ab9){return _0x9845e5(_0x551ab9);},'oiyaF':_0x11aaf8(0x1b6),'rekjy':'Waiting\x20for\x20child\x20process\x20to\x20exit...','FPPZR':'Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','JNqEk':function(_0x40ea3b){return _0x40ea3b();},'llzoU':'Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','VHEKe':_0x11aaf8(0x1e4),'XTgPg':_0x11aaf8(0x1d5),'tYKnc':_0x11aaf8(0x1b0),'ROiIM':_0x11aaf8(0x1d9),'tmiIz':function(_0x564eb1){return _0x564eb1();},'MnjtO':function(_0x2f20bd,_0x41c308,_0x75cbd3,_0x11d80b){return _0x2f20bd(_0x41c308,_0x75cbd3,_0x11d80b);},'aIeGn':_0x11aaf8(0x1bc),'rFyXZ':_0x11aaf8(0x1ba),'zgpFM':_0x11aaf8(0x1da),'jXTJX':_0x11aaf8(0x1b5),'DlMrv':_0x11aaf8(0x1d2),'oZXyX':_0x11aaf8(0x1a9),'LyPam':function(_0x2d3693){return _0x2d3693();}};try{const _0x1ec011=process[_0x11aaf8(0x1b3)]['slice'](0x2),_0x2134c2=_0x1ec011[_0x11aaf8(0x1cf)](0x1);logger['debug'](_0x11aaf8(0x1c6)+_0x2134c2);let _0x41b3f3={};try{logger[_0x11aaf8(0x1a8)](_0x130505[_0x11aaf8(0x1e5)]);const _0x4d688a={};_0x4d688a[_0x11aaf8(0x1e8)]=process[_0x11aaf8(0x1c7)][_0x11aaf8(0x1db)]||process[_0x11aaf8(0x1c7)][_0x11aaf8(0x1e7)],_0x4d688a[_0x11aaf8(0x1d6)]=process['env']['BROWSERSTACK_ACCESS_KEY']||process[_0x11aaf8(0x1c7)][_0x11aaf8(0x1af)],_0x41b3f3=_0x4d688a;if(!_0x41b3f3[_0x11aaf8(0x1e8)]||!_0x41b3f3['accessKey']){const _0x57bc12=_0x130505['pOoWF'](getLoadConfigPath,_0x368586[_0x11aaf8(0x1b3)]);logger['debug']('Configuration\x20path:\x20'+_0x57bc12),_0x57bc12&&(_0x41b3f3=helper['readConfig'](_0x57bc12));}}catch(_0xbc40e9){logger[_0x11aaf8(0x1c0)](_0x11aaf8(0x1dc)+_0xbc40e9['message']),logger[_0x11aaf8(0x1a8)](_0x11aaf8(0x1c8)+(_0xbc40e9[_0x11aaf8(0x1a5)]||JSON[_0x11aaf8(0x1cb)](_0xbc40e9))),await _0x130505[_0x11aaf8(0x1b7)](sleep),process['exit'](0x1);}(!_0x41b3f3[_0x11aaf8(0x1e8)]||!_0x41b3f3[_0x11aaf8(0x1d6)])&&(logger['error'](_0x130505[_0x11aaf8(0x1be)]),await _0x130505[_0x11aaf8(0x1b7)](sleep),process[_0x11aaf8(0x1c1)](0x1));const _0x15d7dd=CLIUtils[_0x11aaf8(0x1cc)]();!_0x15d7dd&&(logger['error'](_0x130505[_0x11aaf8(0x1ab)]),await _0x130505[_0x11aaf8(0x1b7)](sleep),process['exit'](0x1));let _0x7c228e=CLIUtils[_0x11aaf8(0x1bd)](_0x15d7dd);try{!_0x7c228e?(logger[_0x11aaf8(0x1a8)](_0x130505['XTgPg']),_0x7c228e=await CLIUtils[_0x11aaf8(0x1e0)]('',_0x15d7dd,_0x41b3f3)):(logger[_0x11aaf8(0x1a8)](_0x130505[_0x11aaf8(0x1d7)]),_0x7c228e=await CLIUtils[_0x11aaf8(0x1e0)](_0x7c228e,_0x15d7dd,_0x41b3f3));}catch(_0xd423a2){logger[_0x11aaf8(0x1c0)](_0x130505[_0x11aaf8(0x1be)]),logger[_0x11aaf8(0x1a8)](_0x11aaf8(0x1ae)+(_0xd423a2['stack']||JSON[_0x11aaf8(0x1cb)](_0xd423a2))),await _0x130505[_0x11aaf8(0x1b7)](sleep),process[_0x11aaf8(0x1c1)](0x1);}!_0x7c228e&&(logger['error'](_0x130505[_0x11aaf8(0x1be)]),logger[_0x11aaf8(0x1a8)](_0x130505[_0x11aaf8(0x1b9)]),await _0x130505[_0x11aaf8(0x1ad)](sleep),process[_0x11aaf8(0x1c1)](0x1));logger[_0x11aaf8(0x1a8)](_0x11aaf8(0x1b1)+_0x7c228e+'\x20load\x20'+_0x2134c2[_0x11aaf8(0x1a6)]('\x20'));const _0x417e51=_0x130505[_0x11aaf8(0x1b4)](spawn,_0x7c228e,[_0x130505['aIeGn'],..._0x2134c2],{'stdio':_0x130505['rFyXZ']});let _0x3b0f1e=![];const _0x16df0f=new Promise(_0x11da15=>{const _0x2134db=_0x11aaf8,_0x3d278f={'jyyqH':function(_0x5bfaf8,_0x5569a0){const _0x23ac4a=a29_0x5877;return _0x130505[_0x23ac4a(0x1a7)](_0x5bfaf8,_0x5569a0);}};_0x417e51['on'](_0x130505[_0x2134db(0x1e6)],_0x1462d9=>{const _0x5c8237=_0x2134db;logger['debug'](_0x7c228e+_0x5c8237(0x1c3)+_0x1462d9),_0x3d278f[_0x5c8237(0x1c4)](_0x11da15,_0x1462d9);});});[_0x130505[_0x11aaf8(0x1d1)],_0x130505[_0x11aaf8(0x1b8)],_0x130505['DlMrv'],_0x130505['oZXyX']][_0x11aaf8(0x1bb)](_0x146323=>{process['on'](_0x146323,()=>{const _0x3866f1=a29_0x5877;if(_0x3b0f1e)return;_0x3b0f1e=!![],logger[_0x3866f1(0x1a8)](_0x3866f1(0x1ce)+_0x146323+',\x20forwarding\x20to\x20child\x20process...'),_0x417e51&&!_0x417e51[_0x3866f1(0x1ca)]&&(_0x417e51[_0x3866f1(0x1d8)](_0x146323),logger[_0x3866f1(0x1a8)](_0x130505[_0x3866f1(0x1ac)]));});});const _0x3bde41=await _0x16df0f;await _0x130505[_0x11aaf8(0x1ad)](sleep),process['exit'](_0x3bde41);}catch(_0x2d20fc){logger['error'](_0x11aaf8(0x1bf)+_0x2d20fc['message']),logger[_0x11aaf8(0x1a8)](_0x11aaf8(0x1c8)+(_0x2d20fc['stack']||JSON['stringify'](_0x2d20fc))),await _0x130505[_0x11aaf8(0x1dd)](sleep),process['exit'](0x1);}}module['exports']=executeLoadTest;function a29_0x3e6d(){const _0x5ea20c=['debug','SIGHUP','749808jhmtTf','VHEKe','rekjy','tmiIz','Error\x20Details:\x20','BROWSERSTACK_ACCESSKEY','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','Spawning:\x20','./loadUtils','argv','MnjtO','SIGTERM','close','JNqEk','jXTJX','ROiIM','inherit','forEach','load','getExistingCliPath','llzoU','Failed\x20initiating\x20load\x20test:\x20','error','exit','621603BRiNSV','\x20exited\x20with\x20code\x20','jyyqH','10FixsIY','Executing\x20load\x20test\x20with\x20arguments:\x20','env','Error\x20details:\x20','577633tnPMLN','killed','stringify','getCliDir','5sXQsKJ','Received\x20','slice','../../helpers/logger','zgpFM','SIGQUIT','../../helpers/helper','653814QsWpyn','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','accessKey','tYKnc','kill','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','SIGINT','BROWSERSTACK_USERNAME','Error\x20loading\x20configuration:\x20','LyPam','312463BgeqAH','10449459WHIGBU','checkAndUpdateCli','196770lrIFFg','32iwnIES','../v2/cliUtils','Failed\x20to\x20determine\x20CLI\x20directory','FPPZR','oiyaF','BROWSERSTACK_USER','userName','stack','join','pOoWF'];a29_0x3e6d=function(){return _0x5ea20c;};return a29_0x3e6d();}