#!/usr/bin/env node
'use strict';const a29_0x415887=a29_0x2d93;(function(_0x162ee5,_0x9e5386){const _0x58cbe3=a29_0x2d93,_0x3019ad=_0x162ee5();while(!![]){try{const _0x151a56=-parseInt(_0x58cbe3(0x1a0))/0x1+-parseInt(_0x58cbe3(0x1c7))/0x2+parseInt(_0x58cbe3(0x1b3))/0x3*(-parseInt(_0x58cbe3(0x1ce))/0x4)+parseInt(_0x58cbe3(0x1c2))/0x5+parseInt(_0x58cbe3(0x1c4))/0x6+parseInt(_0x58cbe3(0x1c8))/0x7+-parseInt(_0x58cbe3(0x1a6))/0x8*(-parseInt(_0x58cbe3(0x19b))/0x9);if(_0x151a56===_0x9e5386)break;else _0x3019ad['push'](_0x3019ad['shift']());}catch(_0x4fb12c){_0x3019ad['push'](_0x3019ad['shift']());}}}(a29_0xf27a,0xe4bb9));const {spawn}=require(a29_0x415887(0x1b1)),path=require(a29_0x415887(0x1ab)),helper=require(a29_0x415887(0x190)),CLIUtils=require(a29_0x415887(0x1ad)),{getLoadConfigPath,sleep}=require('./loadUtils'),logger=require(a29_0x415887(0x1d0))['winstonLogger'];function a29_0x2d93(_0x5d02f0,_0x804c10){const _0xf27ae4=a29_0xf27a();return a29_0x2d93=function(_0x2d9342,_0x1d2526){_0x2d9342=_0x2d9342-0x18d;let _0x4fa7c2=_0xf27ae4[_0x2d9342];return _0x4fa7c2;},a29_0x2d93(_0x5d02f0,_0x804c10);}async function executeLoadTest(_0x948bd0){const _0x3efd84=a29_0x415887,_0x3b46c8={'safIY':function(_0x49d573,_0x2f7fe3){return _0x49d573(_0x2f7fe3);},'YkcAQ':'close','pMgYZ':_0x3efd84(0x1c5),'GvilJ':_0x3efd84(0x1b8),'Dlvhd':function(_0x221fe3){return _0x221fe3();},'AyeRS':_0x3efd84(0x1a7),'vdjGP':function(_0x4a46db){return _0x4a46db();},'xNTqN':_0x3efd84(0x1ae),'SEcge':function(_0x3f5f75){return _0x3f5f75();},'ftZhj':_0x3efd84(0x1a3),'WWUdM':_0x3efd84(0x1b6),'gNqdm':function(_0x38971e){return _0x38971e();},'nRtnv':_0x3efd84(0x1d2),'BIzwX':function(_0x14c65f,_0x2d0f85,_0x455b28,_0x2a4576){return _0x14c65f(_0x2d0f85,_0x455b28,_0x2a4576);},'ybgak':_0x3efd84(0x195),'xEbkC':_0x3efd84(0x1c1),'cAMst':_0x3efd84(0x18e),'fvzls':_0x3efd84(0x1cd),'RNoCn':_0x3efd84(0x1a4),'PiAFD':_0x3efd84(0x1aa),'KxDMA':function(_0x4140d1){return _0x4140d1();},'XhZXE':function(_0x2bd481){return _0x2bd481();}};try{const _0x140d1a=process['argv'][_0x3efd84(0x1bc)](0x2),_0x5c5ebc=_0x140d1a[_0x3efd84(0x1bc)](0x1);logger[_0x3efd84(0x198)]('Executing\x20load\x20test\x20with\x20arguments:\x20'+_0x5c5ebc);let _0x4cd204={};try{logger['debug'](_0x3b46c8[_0x3efd84(0x1b5)]);const _0x345cb4={};_0x345cb4[_0x3efd84(0x1ca)]=process[_0x3efd84(0x197)][_0x3efd84(0x18f)]||process[_0x3efd84(0x197)][_0x3efd84(0x1cb)],_0x345cb4[_0x3efd84(0x191)]=process[_0x3efd84(0x197)][_0x3efd84(0x1be)]||process[_0x3efd84(0x197)][_0x3efd84(0x1a9)],_0x4cd204=_0x345cb4;if(!_0x4cd204[_0x3efd84(0x1ca)]||!_0x4cd204[_0x3efd84(0x191)]){const _0x3c9c66=_0x3b46c8[_0x3efd84(0x1d1)](getLoadConfigPath,_0x948bd0['argv']);logger[_0x3efd84(0x198)]('Configuration\x20path:\x20'+_0x3c9c66),_0x3c9c66&&(_0x4cd204=helper['readConfig'](_0x3c9c66));}}catch(_0x453918){logger[_0x3efd84(0x1a5)]('Error\x20loading\x20configuration:\x20'+_0x453918[_0x3efd84(0x19c)]),logger[_0x3efd84(0x198)]('Error\x20details:\x20'+(_0x453918['stack']||JSON[_0x3efd84(0x1cf)](_0x453918))),await _0x3b46c8[_0x3efd84(0x1af)](sleep),process[_0x3efd84(0x1ac)](0x1);}(!_0x4cd204[_0x3efd84(0x1ca)]||!_0x4cd204[_0x3efd84(0x191)])&&(logger[_0x3efd84(0x1a5)](_0x3b46c8[_0x3efd84(0x1cc)]),await _0x3b46c8[_0x3efd84(0x1b4)](sleep),process[_0x3efd84(0x1ac)](0x1));const _0x175fb6=CLIUtils['getCliDir']();!_0x175fb6&&(logger['error'](_0x3b46c8[_0x3efd84(0x19e)]),await _0x3b46c8[_0x3efd84(0x194)](sleep),process[_0x3efd84(0x1ac)](0x1));let _0x36fb97=CLIUtils['getExistingCliPath'](_0x175fb6);try{!_0x36fb97?(logger[_0x3efd84(0x198)](_0x3b46c8[_0x3efd84(0x1bf)]),_0x36fb97=await CLIUtils[_0x3efd84(0x1ba)]('',_0x175fb6,_0x4cd204)):(logger['debug'](_0x3b46c8[_0x3efd84(0x193)]),_0x36fb97=await CLIUtils[_0x3efd84(0x1ba)](_0x36fb97,_0x175fb6,_0x4cd204));}catch(_0x1382ec){logger[_0x3efd84(0x1a5)](_0x3b46c8[_0x3efd84(0x1cc)]),logger['debug'](_0x3efd84(0x196)+(_0x1382ec[_0x3efd84(0x1b2)]||JSON[_0x3efd84(0x1cf)](_0x1382ec))),await _0x3b46c8[_0x3efd84(0x1b7)](sleep),process[_0x3efd84(0x1ac)](0x1);}!_0x36fb97&&(logger[_0x3efd84(0x1a5)](_0x3b46c8['AyeRS']),logger[_0x3efd84(0x198)](_0x3b46c8[_0x3efd84(0x1a8)]),await _0x3b46c8[_0x3efd84(0x194)](sleep),process['exit'](0x1));logger['debug'](_0x3efd84(0x1c3)+_0x36fb97+_0x3efd84(0x1bb)+_0x5c5ebc[_0x3efd84(0x1c9)]('\x20'));const _0x3f37f3=_0x3b46c8['BIzwX'](spawn,_0x36fb97,[_0x3b46c8[_0x3efd84(0x1b0)],..._0x5c5ebc],{'stdio':_0x3b46c8[_0x3efd84(0x1c0)]});let _0x1ea9ee=![];const _0x42ffe2=new Promise(_0x5dba54=>{const _0x136a6b=_0x3efd84,_0x20133f={'WwKBj':function(_0x5af697,_0x425879){const _0x112f70=a29_0x2d93;return _0x3b46c8[_0x112f70(0x1d1)](_0x5af697,_0x425879);}};_0x3f37f3['on'](_0x3b46c8[_0x136a6b(0x1a2)],_0x2751c6=>{const _0x4a7059=_0x136a6b;logger['debug'](_0x36fb97+'\x20exited\x20with\x20code\x20'+_0x2751c6),_0x20133f[_0x4a7059(0x19f)](_0x5dba54,_0x2751c6);});});[_0x3b46c8['cAMst'],_0x3b46c8[_0x3efd84(0x199)],_0x3b46c8[_0x3efd84(0x1c6)],_0x3b46c8[_0x3efd84(0x19a)]]['forEach'](_0x440e1f=>{const _0x284df9=_0x3efd84,_0x14c1a7={};_0x14c1a7[_0x284df9(0x1bd)]=_0x3b46c8['pMgYZ'];const _0x3d90ec=_0x14c1a7;process['on'](_0x440e1f,()=>{const _0x4cfea6=_0x284df9;if(_0x1ea9ee)return;_0x1ea9ee=!![],logger['debug'](_0x4cfea6(0x1b9)+_0x440e1f+',\x20forwarding\x20to\x20child\x20process...'),_0x3f37f3&&!_0x3f37f3[_0x4cfea6(0x18d)]&&(_0x3f37f3['kill'](_0x440e1f),logger[_0x4cfea6(0x198)](_0x3d90ec[_0x4cfea6(0x1bd)]));});});const _0xffc73d=await _0x42ffe2;await _0x3b46c8['KxDMA'](sleep),process[_0x3efd84(0x1ac)](_0xffc73d);}catch(_0x378928){logger['error'](_0x3efd84(0x1a1)+_0x378928[_0x3efd84(0x19c)]),logger[_0x3efd84(0x198)](_0x3efd84(0x192)+(_0x378928[_0x3efd84(0x1b2)]||JSON[_0x3efd84(0x1cf)](_0x378928))),await _0x3b46c8[_0x3efd84(0x19d)](sleep),process[_0x3efd84(0x1ac)](0x1);}}function a29_0xf27a(){const _0x54e500=['BROWSERSTACK_USERNAME','../../helpers/helper','accessKey','Error\x20details:\x20','WWUdM','SEcge','load','Error\x20Details:\x20','env','debug','fvzls','PiAFD','746721jtJJtk','message','XhZXE','xNTqN','WwKBj','1767882NxKYeq','Failed\x20initiating\x20load\x20test:\x20','YkcAQ','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','SIGQUIT','error','64XqcIyq','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','nRtnv','BROWSERSTACK_ACCESSKEY','SIGHUP','path','exit','../v2/cliUtils','Failed\x20to\x20determine\x20CLI\x20directory','Dlvhd','ybgak','child_process','stack','3947949kvikjJ','vdjGP','GvilJ','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','gNqdm','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','Received\x20','checkAndUpdateCli','\x20load\x20','slice','jtdGz','BROWSERSTACK_ACCESS_KEY','ftZhj','xEbkC','inherit','3603495SbjDkk','Spawning:\x20','9340056apSrVi','Waiting\x20for\x20child\x20process\x20to\x20exit...','RNoCn','1188504LxnUyG','11717153nEYwaL','join','userName','BROWSERSTACK_USER','AyeRS','SIGTERM','4JLirev','stringify','../../helpers/logger','safIY','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','killed','SIGINT'];a29_0xf27a=function(){return _0x54e500;};return a29_0xf27a();}module['exports']=executeLoadTest;