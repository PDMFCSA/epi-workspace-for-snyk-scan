#!/usr/bin/env node
'use strict';function a28_0x77b5(){const _0x55203d=['\x20exited\x20with\x20code\x20','Error\x20Details:\x20','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','BROWSERSTACK_USER','message','checkAndUpdateCli','1134630eCrgOT','../v2/cliUtils','xLSWL','exit','HIVVL','POQYT','ComhG','SIGQUIT','jRpxK','TAKvK','BROWSERSTACK_ACCESSKEY','slice','RuCHl','jGmNW','ATpob','\x20load\x20','debug','Error\x20loading\x20configuration:\x20','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','UvkaS','BkwDZ','Configuration\x20path:\x20','31231980QEvglN','close','3bodzEB','1qmkxNU',',\x20forwarding\x20to\x20child\x20process...','5714877SWJXYb','readConfig','BROWSERSTACK_ACCESS_KEY','stringify','HfGsK','load','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','4383476kszJll','env','Failed\x20to\x20determine\x20CLI\x20directory','zSYwM','SIGTERM','error','killed','Executing\x20load\x20test\x20with\x20arguments:\x20','./loadUtils','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','child_process','../../helpers/logger','SIGINT','75758JDhaiT','kill','SIGHUP','../../helpers/helper','stack','6948009RNptWF','accessKey','4176035JlCRxi','userName','BROWSERSTACK_USERNAME','argv','scSiG','8AomuLO','Error\x20details:\x20','getExistingCliPath','Received\x20'];a28_0x77b5=function(){return _0x55203d;};return a28_0x77b5();}const a28_0x492330=a28_0xf854;(function(_0x5bbddc,_0x3cfe46){const _0x240150=a28_0xf854,_0x32c89a=_0x5bbddc();while(!![]){try{const _0x384815=parseInt(_0x240150(0x17b))/0x1*(parseInt(_0x240150(0x192))/0x2)+-parseInt(_0x240150(0x17a))/0x3*(-parseInt(_0x240150(0x184))/0x4)+parseInt(_0x240150(0x199))/0x5+parseInt(_0x240150(0x162))/0x6+parseInt(_0x240150(0x17d))/0x7+parseInt(_0x240150(0x19e))/0x8*(parseInt(_0x240150(0x197))/0x9)+-parseInt(_0x240150(0x178))/0xa;if(_0x384815===_0x3cfe46)break;else _0x32c89a['push'](_0x32c89a['shift']());}catch(_0x1422e5){_0x32c89a['push'](_0x32c89a['shift']());}}}(a28_0x77b5,0x982aa));function a28_0xf854(_0x29802a,_0x5e5c8e){const _0x77b572=a28_0x77b5();return a28_0xf854=function(_0xf8549e,_0x54a2e0){_0xf8549e=_0xf8549e-0x159;let _0x53dc8d=_0x77b572[_0xf8549e];return _0x53dc8d;},a28_0xf854(_0x29802a,_0x5e5c8e);}const {spawn}=require(a28_0x492330(0x18f)),path=require('path'),helper=require(a28_0x492330(0x195)),CLIUtils=require(a28_0x492330(0x163)),{getLoadConfigPath,sleep}=require(a28_0x492330(0x18c)),logger=require(a28_0x492330(0x190))['winstonLogger'];async function executeLoadTest(_0x270faf){const _0x34623b=a28_0x492330,_0x42fefa={'xLSWL':function(_0x418314,_0x4a7d45){return _0x418314(_0x4a7d45);},'HIVVL':_0x34623b(0x179),'sOhTY':'Waiting\x20for\x20child\x20process\x20to\x20exit...','kQsdJ':_0x34623b(0x15e),'UvkaS':function(_0x270bc0,_0x1c750c){return _0x270bc0(_0x1c750c);},'zSYwM':function(_0xdbd370){return _0xdbd370();},'jRpxK':_0x34623b(0x183),'RuCHl':_0x34623b(0x186),'scSiG':_0x34623b(0x18e),'ZIJqf':_0x34623b(0x18d),'BkwDZ':function(_0x5e28ba){return _0x5e28ba();},'jGmNW':_0x34623b(0x174),'fNYHk':function(_0x1df62b,_0x40207b,_0x52878a,_0x6a5a6d){return _0x1df62b(_0x40207b,_0x52878a,_0x6a5a6d);},'HqcTn':_0x34623b(0x182),'RelIT':'inherit','lhmxB':_0x34623b(0x191),'HfGsK':_0x34623b(0x188),'ATpob':_0x34623b(0x169),'gfxpK':_0x34623b(0x194),'TAKvK':function(_0x309f57){return _0x309f57();},'ComhG':function(_0x944313){return _0x944313();}};try{const _0x2a9a41=process[_0x34623b(0x19c)][_0x34623b(0x16d)](0x2),_0x586ca8=_0x2a9a41[_0x34623b(0x16d)](0x1);logger[_0x34623b(0x172)](_0x34623b(0x18b)+_0x586ca8);let _0x58ffc7={};try{logger[_0x34623b(0x172)](_0x42fefa['kQsdJ']);const _0xe6f060={};_0xe6f060['userName']=process[_0x34623b(0x185)][_0x34623b(0x19b)]||process[_0x34623b(0x185)][_0x34623b(0x15f)],_0xe6f060[_0x34623b(0x198)]=process[_0x34623b(0x185)][_0x34623b(0x17f)]||process[_0x34623b(0x185)][_0x34623b(0x16c)],_0x58ffc7=_0xe6f060;if(!_0x58ffc7['userName']||!_0x58ffc7[_0x34623b(0x198)]){const _0x3bd2a5=_0x42fefa[_0x34623b(0x175)](getLoadConfigPath,_0x270faf[_0x34623b(0x19c)]);logger[_0x34623b(0x172)](_0x34623b(0x177)+_0x3bd2a5),_0x3bd2a5&&(_0x58ffc7=helper[_0x34623b(0x17e)](_0x3bd2a5));}}catch(_0x4839c4){logger[_0x34623b(0x189)](_0x34623b(0x173)+_0x4839c4[_0x34623b(0x160)]),logger['debug'](_0x34623b(0x159)+(_0x4839c4[_0x34623b(0x196)]||JSON[_0x34623b(0x180)](_0x4839c4))),await _0x42fefa[_0x34623b(0x187)](sleep),process[_0x34623b(0x165)](0x1);}(!_0x58ffc7[_0x34623b(0x19a)]||!_0x58ffc7['accessKey'])&&(logger[_0x34623b(0x189)](_0x42fefa[_0x34623b(0x16a)]),await _0x42fefa[_0x34623b(0x187)](sleep),process[_0x34623b(0x165)](0x1));const _0x5086a2=CLIUtils['getCliDir']();!_0x5086a2&&(logger[_0x34623b(0x189)](_0x42fefa[_0x34623b(0x16e)]),await _0x42fefa[_0x34623b(0x187)](sleep),process['exit'](0x1));let _0x5f171e=CLIUtils[_0x34623b(0x15a)](_0x5086a2);try{!_0x5f171e?(logger['debug'](_0x42fefa[_0x34623b(0x19d)]),_0x5f171e=await CLIUtils[_0x34623b(0x161)]('',_0x5086a2,_0x58ffc7)):(logger[_0x34623b(0x172)](_0x42fefa['ZIJqf']),_0x5f171e=await CLIUtils[_0x34623b(0x161)](_0x5f171e,_0x5086a2,_0x58ffc7));}catch(_0x1e9ac3){logger[_0x34623b(0x189)](_0x42fefa[_0x34623b(0x16a)]),logger['debug'](_0x34623b(0x15d)+(_0x1e9ac3[_0x34623b(0x196)]||JSON['stringify'](_0x1e9ac3))),await _0x42fefa[_0x34623b(0x176)](sleep),process['exit'](0x1);}!_0x5f171e&&(logger[_0x34623b(0x189)](_0x42fefa[_0x34623b(0x16a)]),logger[_0x34623b(0x172)](_0x42fefa[_0x34623b(0x16f)]),await _0x42fefa[_0x34623b(0x187)](sleep),process[_0x34623b(0x165)](0x1));logger[_0x34623b(0x172)]('Spawning:\x20'+_0x5f171e+_0x34623b(0x171)+_0x586ca8['join']('\x20'));const _0x3e114c=_0x42fefa['fNYHk'](spawn,_0x5f171e,[_0x42fefa['HqcTn'],..._0x586ca8],{'stdio':_0x42fefa['RelIT']});let _0x400c9c=![];const _0x105c9a=new Promise(_0x25bc8d=>{const _0x1f6210=_0x34623b;_0x3e114c['on'](_0x42fefa[_0x1f6210(0x166)],_0x2ac972=>{const _0x35b131=_0x1f6210;logger[_0x35b131(0x172)](_0x5f171e+_0x35b131(0x15c)+_0x2ac972),_0x42fefa[_0x35b131(0x164)](_0x25bc8d,_0x2ac972);});});[_0x42fefa['lhmxB'],_0x42fefa[_0x34623b(0x181)],_0x42fefa[_0x34623b(0x170)],_0x42fefa['gfxpK']]['forEach'](_0x99dd0d=>{const _0x56e42e=_0x34623b,_0x208d47={};_0x208d47[_0x56e42e(0x167)]=_0x42fefa['sOhTY'];const _0x4da4f4=_0x208d47;process['on'](_0x99dd0d,()=>{const _0x1ed5da=_0x56e42e;if(_0x400c9c)return;_0x400c9c=!![],logger[_0x1ed5da(0x172)](_0x1ed5da(0x15b)+_0x99dd0d+_0x1ed5da(0x17c)),_0x3e114c&&!_0x3e114c[_0x1ed5da(0x18a)]&&(_0x3e114c[_0x1ed5da(0x193)](_0x99dd0d),logger['debug'](_0x4da4f4[_0x1ed5da(0x167)]));});});const _0x402716=await _0x105c9a;await _0x42fefa[_0x34623b(0x16b)](sleep),process[_0x34623b(0x165)](_0x402716);}catch(_0x2612e5){logger[_0x34623b(0x189)]('Failed\x20initiating\x20load\x20test:\x20'+_0x2612e5['message']),logger['debug'](_0x34623b(0x159)+(_0x2612e5[_0x34623b(0x196)]||JSON[_0x34623b(0x180)](_0x2612e5))),await _0x42fefa[_0x34623b(0x168)](sleep),process[_0x34623b(0x165)](0x1);}}module['exports']=executeLoadTest;