#!/usr/bin/env node
'use strict';const a28_0x492ea2=a28_0xb45a;(function(_0x7a1c84,_0x15e008){const _0x162c40=a28_0xb45a,_0x791860=_0x7a1c84();while(!![]){try{const _0x3cd852=-parseInt(_0x162c40(0xe0))/0x1*(-parseInt(_0x162c40(0xe9))/0x2)+parseInt(_0x162c40(0xc6))/0x3+-parseInt(_0x162c40(0xd3))/0x4+parseInt(_0x162c40(0xd2))/0x5*(parseInt(_0x162c40(0xf0))/0x6)+parseInt(_0x162c40(0x106))/0x7*(-parseInt(_0x162c40(0xfd))/0x8)+-parseInt(_0x162c40(0xeb))/0x9+-parseInt(_0x162c40(0x108))/0xa;if(_0x3cd852===_0x15e008)break;else _0x791860['push'](_0x791860['shift']());}catch(_0x507265){_0x791860['push'](_0x791860['shift']());}}}(a28_0x4b63,0xb4f40));function a28_0xb45a(_0x119608,_0xff9144){const _0x4b635c=a28_0x4b63();return a28_0xb45a=function(_0xb45a3,_0x10ace9){_0xb45a3=_0xb45a3-0xc4;let _0x5e7f52=_0x4b635c[_0xb45a3];return _0x5e7f52;},a28_0xb45a(_0x119608,_0xff9144);}function a28_0x4b63(){const _0x5e8bd3=['SIGTERM','2867762zIowLB','bneFP','1582794RROHIJ','join','env','close','hBhjt','1431930VLVbhj','BROWSERSTACK_USERNAME','SIGQUIT','getExistingCliPath','argv','../../helpers/helper','accessKey','Error\x20details:\x20','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','vPfhZ','Failed\x20to\x20determine\x20CLI\x20directory','path','getCliDir','8NHAZdB','readConfig','./loadUtils','userName','child_process','SIGHUP','Spawning:\x20','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','bdWAF','8764637oUYsyU','winstonLogger','9839190RRBigV','xudEg','Failed\x20initiating\x20load\x20test:\x20','rZKSQ','error','yXtzP','4191252Ncqcpd','BROWSERSTACK_ACCESSKEY',',\x20forwarding\x20to\x20child\x20process...','checkAndUpdateCli','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','killed','debug','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','exit','Received\x20','\x20exited\x20with\x20code\x20','inmQT','10jUhsxs','620860kbzThv','BROWSERSTACK_ACCESS_KEY','../v2/cliUtils','stringify','message','kill','Configuration\x20path:\x20','CnPqW','QIRQd','lBOJw','load','stack','inherit','1peqXsb','tKdOa','DSIco','BROWSERSTACK_USER','SHupo','tSfLz','\x20load\x20','slice'];a28_0x4b63=function(){return _0x5e8bd3;};return a28_0x4b63();}const {spawn}=require(a28_0x492ea2(0x101)),path=require(a28_0x492ea2(0xfb)),helper=require(a28_0x492ea2(0xf5)),CLIUtils=require(a28_0x492ea2(0xd5)),{getLoadConfigPath,sleep}=require(a28_0x492ea2(0xff)),logger=require('../../helpers/logger')[a28_0x492ea2(0x107)];async function executeLoadTest(_0x56774f){const _0x309b0b=a28_0x492ea2,_0x4167ce={'DSIco':function(_0x3c1337,_0x4ab2e7){return _0x3c1337(_0x4ab2e7);},'CnPqW':_0x309b0b(0xee),'sqlqo':'Waiting\x20for\x20child\x20process\x20to\x20exit...','xudEg':_0x309b0b(0xca),'lBOJw':function(_0x1f4958,_0x3e5ea9){return _0x1f4958(_0x3e5ea9);},'hBhjt':function(_0x120d77){return _0x120d77();},'bdWAF':_0x309b0b(0x104),'bneFP':function(_0xbe18f0){return _0xbe18f0();},'joFje':_0x309b0b(0xfa),'inmQT':function(_0x3dc221){return _0x3dc221();},'rZKSQ':_0x309b0b(0xf8),'QIRQd':'CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','tSfLz':_0x309b0b(0xcd),'AspWf':function(_0x5a9a01,_0x2be224,_0x9490ad,_0x32f62a){return _0x5a9a01(_0x2be224,_0x9490ad,_0x32f62a);},'rQNro':_0x309b0b(0xdd),'SHupo':_0x309b0b(0xdf),'ElkoV':'SIGINT','vPfhZ':_0x309b0b(0xe8),'QoeMy':_0x309b0b(0xf2),'RkFim':_0x309b0b(0x102),'yXtzP':function(_0xd0bf45){return _0xd0bf45();},'keJTu':function(_0x492ded){return _0x492ded();}};try{const _0x406bf7=process[_0x309b0b(0xf4)][_0x309b0b(0xe7)](0x2),_0x18fd39=_0x406bf7[_0x309b0b(0xe7)](0x1);logger[_0x309b0b(0xcc)]('Executing\x20load\x20test\x20with\x20arguments:\x20'+_0x18fd39);let _0x48834e={};try{logger['debug'](_0x4167ce[_0x309b0b(0x109)]);const _0xf13750={};_0xf13750[_0x309b0b(0x100)]=process[_0x309b0b(0xed)][_0x309b0b(0xf1)]||process[_0x309b0b(0xed)][_0x309b0b(0xe3)],_0xf13750[_0x309b0b(0xf6)]=process[_0x309b0b(0xed)][_0x309b0b(0xd4)]||process['env'][_0x309b0b(0xc7)],_0x48834e=_0xf13750;if(!_0x48834e[_0x309b0b(0x100)]||!_0x48834e[_0x309b0b(0xf6)]){const _0x5e1238=_0x4167ce[_0x309b0b(0xdc)](getLoadConfigPath,_0x56774f[_0x309b0b(0xf4)]);logger[_0x309b0b(0xcc)](_0x309b0b(0xd9)+_0x5e1238),_0x5e1238&&(_0x48834e=helper[_0x309b0b(0xfe)](_0x5e1238));}}catch(_0x3e5850){logger[_0x309b0b(0xc4)]('Error\x20loading\x20configuration:\x20'+_0x3e5850[_0x309b0b(0xd7)]),logger[_0x309b0b(0xcc)]('Error\x20details:\x20'+(_0x3e5850[_0x309b0b(0xde)]||JSON[_0x309b0b(0xd6)](_0x3e5850))),await _0x4167ce[_0x309b0b(0xef)](sleep),process[_0x309b0b(0xce)](0x1);}(!_0x48834e[_0x309b0b(0x100)]||!_0x48834e[_0x309b0b(0xf6)])&&(logger['error'](_0x4167ce[_0x309b0b(0x105)]),await _0x4167ce[_0x309b0b(0xea)](sleep),process[_0x309b0b(0xce)](0x1));const _0xf7b49f=CLIUtils[_0x309b0b(0xfc)]();!_0xf7b49f&&(logger[_0x309b0b(0xc4)](_0x4167ce['joFje']),await _0x4167ce[_0x309b0b(0xd1)](sleep),process[_0x309b0b(0xce)](0x1));let _0x4115a7=CLIUtils[_0x309b0b(0xf3)](_0xf7b49f);try{!_0x4115a7?(logger[_0x309b0b(0xcc)](_0x4167ce[_0x309b0b(0x10b)]),_0x4115a7=await CLIUtils[_0x309b0b(0xc9)]('',_0xf7b49f,_0x48834e)):(logger[_0x309b0b(0xcc)](_0x4167ce[_0x309b0b(0xdb)]),_0x4115a7=await CLIUtils[_0x309b0b(0xc9)](_0x4115a7,_0xf7b49f,_0x48834e));}catch(_0x59a97d){logger[_0x309b0b(0xc4)](_0x4167ce[_0x309b0b(0x105)]),logger[_0x309b0b(0xcc)]('Error\x20Details:\x20'+(_0x59a97d[_0x309b0b(0xde)]||JSON[_0x309b0b(0xd6)](_0x59a97d))),await _0x4167ce[_0x309b0b(0xef)](sleep),process['exit'](0x1);}!_0x4115a7&&(logger[_0x309b0b(0xc4)](_0x4167ce[_0x309b0b(0x105)]),logger[_0x309b0b(0xcc)](_0x4167ce[_0x309b0b(0xe5)]),await _0x4167ce[_0x309b0b(0xd1)](sleep),process[_0x309b0b(0xce)](0x1));logger[_0x309b0b(0xcc)](_0x309b0b(0x103)+_0x4115a7+_0x309b0b(0xe6)+_0x18fd39[_0x309b0b(0xec)]('\x20'));const _0x24e915=_0x4167ce['AspWf'](spawn,_0x4115a7,[_0x4167ce['rQNro'],..._0x18fd39],{'stdio':_0x4167ce[_0x309b0b(0xe4)]});let _0x2cb9ea=![];const _0x3d58fe=new Promise(_0x599ae7=>{const _0x5aa6a2=_0x309b0b,_0x250cdd={'tKdOa':function(_0x375264,_0x4a1851){const _0x83cf4e=a28_0xb45a;return _0x4167ce[_0x83cf4e(0xe2)](_0x375264,_0x4a1851);}};_0x24e915['on'](_0x4167ce[_0x5aa6a2(0xda)],_0xa4c5b4=>{const _0xf0faa2=_0x5aa6a2;logger[_0xf0faa2(0xcc)](_0x4115a7+_0xf0faa2(0xd0)+_0xa4c5b4),_0x250cdd[_0xf0faa2(0xe1)](_0x599ae7,_0xa4c5b4);});});[_0x4167ce['ElkoV'],_0x4167ce[_0x309b0b(0xf9)],_0x4167ce['QoeMy'],_0x4167ce['RkFim']]['forEach'](_0xc14acf=>{process['on'](_0xc14acf,()=>{const _0x2ebf26=a28_0xb45a;if(_0x2cb9ea)return;_0x2cb9ea=!![],logger[_0x2ebf26(0xcc)](_0x2ebf26(0xcf)+_0xc14acf+_0x2ebf26(0xc8)),_0x24e915&&!_0x24e915[_0x2ebf26(0xcb)]&&(_0x24e915[_0x2ebf26(0xd8)](_0xc14acf),logger[_0x2ebf26(0xcc)](_0x4167ce['sqlqo']));});});const _0x3de5c8=await _0x3d58fe;await _0x4167ce[_0x309b0b(0xc5)](sleep),process[_0x309b0b(0xce)](_0x3de5c8);}catch(_0x3c7b63){logger[_0x309b0b(0xc4)](_0x309b0b(0x10a)+_0x3c7b63['message']),logger[_0x309b0b(0xcc)](_0x309b0b(0xf7)+(_0x3c7b63[_0x309b0b(0xde)]||JSON[_0x309b0b(0xd6)](_0x3c7b63))),await _0x4167ce['keJTu'](sleep),process[_0x309b0b(0xce)](0x1);}}module['exports']=executeLoadTest;