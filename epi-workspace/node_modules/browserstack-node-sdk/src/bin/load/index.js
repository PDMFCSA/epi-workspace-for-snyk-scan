#!/usr/bin/env node
'use strict';const a28_0x42478b=a28_0x1605;(function(_0x1fb285,_0x2f4669){const _0x49b0a5=a28_0x1605,_0x3e13a9=_0x1fb285();while(!![]){try{const _0x209b71=parseInt(_0x49b0a5(0x107))/0x1+-parseInt(_0x49b0a5(0x10f))/0x2*(parseInt(_0x49b0a5(0x113))/0x3)+parseInt(_0x49b0a5(0xff))/0x4+-parseInt(_0x49b0a5(0xe8))/0x5*(parseInt(_0x49b0a5(0x118))/0x6)+-parseInt(_0x49b0a5(0xf8))/0x7+parseInt(_0x49b0a5(0x116))/0x8*(parseInt(_0x49b0a5(0xe7))/0x9)+parseInt(_0x49b0a5(0xfa))/0xa;if(_0x209b71===_0x2f4669)break;else _0x3e13a9['push'](_0x3e13a9['shift']());}catch(_0x5aa8c3){_0x3e13a9['push'](_0x3e13a9['shift']());}}}(a28_0x53d0,0xd67f5));const {spawn}=require(a28_0x42478b(0x109)),path=require(a28_0x42478b(0x119)),helper=require(a28_0x42478b(0xd5)),CLIUtils=require(a28_0x42478b(0x103)),{getLoadConfigPath,sleep}=require(a28_0x42478b(0xf7)),logger=require('../../helpers/logger')[a28_0x42478b(0xd6)];function a28_0x1605(_0x16e5b6,_0x3f73e8){const _0x53d015=a28_0x53d0();return a28_0x1605=function(_0x160526,_0x48fae3){_0x160526=_0x160526-0xd4;let _0x659060=_0x53d015[_0x160526];return _0x659060;},a28_0x1605(_0x16e5b6,_0x3f73e8);}function a28_0x53d0(){const _0x1d0532=['env','VhvXl','Extin','SlADU','Thprs','getExistingCliPath','exit','QGqPA','BROWSERSTACK_ACCESSKEY','\x20exited\x20with\x20code\x20','125406bjrawa','80UcRLZA','killed','slice','MTXsH','psVXT','Error\x20details:\x20','Error\x20loading\x20configuration:\x20','Lycnr','inherit','Configuration\x20path:\x20','SIGTERM','SIGINT','sSujD','GVmJw','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','./loadUtils','5969159XKkCCF','message','17464600PuhqYK','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','pUpsY','RogJm',',\x20forwarding\x20to\x20child\x20process...','305488sLmbTS','error','argv','hkmkt','../v2/cliUtils','debug','accessKey','SIGQUIT','361668ihSMcd','Error\x20Details:\x20','child_process','stringify','ZihVR','XLOhS','Executing\x20load\x20test\x20with\x20arguments:\x20','SIGHUP','2ieXQtN','Failed\x20to\x20determine\x20CLI\x20directory','readConfig','BROWSERSTACK_USERNAME','2963268Pnhdzi','EKSyS','gsdZa','456GICdoJ','stack','97374bjGYYp','path','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','close','HvpeD','vTkGS','../../helpers/helper','winstonLogger','Waiting\x20for\x20child\x20process\x20to\x20exit...','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','checkAndUpdateCli','BYvSf','Received\x20','userName'];a28_0x53d0=function(){return _0x1d0532;};return a28_0x53d0();}async function executeLoadTest(_0x5d178d){const _0x49dbc7=a28_0x42478b,_0x22f7ef={'sSujD':function(_0x3f54c3,_0x102d13){return _0x3f54c3(_0x102d13);},'VhvXl':_0x49dbc7(0x11b),'Lycnr':_0x49dbc7(0xd7),'QGqPA':_0x49dbc7(0xfb),'Extin':function(_0x3d7a28){return _0x3d7a28();},'HvpeD':_0x49dbc7(0xf6),'EKSyS':function(_0x5ed427){return _0x5ed427();},'gsdZa':_0x49dbc7(0x110),'RogJm':function(_0x2153c9){return _0x2153c9();},'vTkGS':'CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','ZihVR':_0x49dbc7(0x11a),'BYvSf':function(_0xfef527){return _0xfef527();},'psVXT':_0x49dbc7(0xd8),'GVmJw':function(_0x191933,_0x4c0cd2,_0x538918,_0x8c55a0){return _0x191933(_0x4c0cd2,_0x538918,_0x8c55a0);},'Thprs':'load','jFNkl':_0x49dbc7(0xf0),'MTXsH':_0x49dbc7(0xf3),'pUpsY':_0x49dbc7(0xf2),'hkmkt':_0x49dbc7(0x106),'SlADU':_0x49dbc7(0x10e),'XLOhS':function(_0x397896){return _0x397896();}};try{const _0x19b129=process[_0x49dbc7(0x101)][_0x49dbc7(0xea)](0x2),_0x2e687e=_0x19b129[_0x49dbc7(0xea)](0x1);logger[_0x49dbc7(0x104)](_0x49dbc7(0x10d)+_0x2e687e);let _0x571e31={};try{logger[_0x49dbc7(0x104)](_0x22f7ef[_0x49dbc7(0xe4)]);const _0x45fc0b={};_0x45fc0b[_0x49dbc7(0xdc)]=process['env'][_0x49dbc7(0x112)]||process[_0x49dbc7(0xdd)]['BROWSERSTACK_USER'],_0x45fc0b[_0x49dbc7(0x105)]=process[_0x49dbc7(0xdd)]['BROWSERSTACK_ACCESS_KEY']||process['env'][_0x49dbc7(0xe5)],_0x571e31=_0x45fc0b;if(!_0x571e31[_0x49dbc7(0xdc)]||!_0x571e31[_0x49dbc7(0x105)]){const _0x4bccc2=_0x22f7ef['sSujD'](getLoadConfigPath,_0x5d178d[_0x49dbc7(0x101)]);logger['debug'](_0x49dbc7(0xf1)+_0x4bccc2),_0x4bccc2&&(_0x571e31=helper[_0x49dbc7(0x111)](_0x4bccc2));}}catch(_0x3d1cd1){logger[_0x49dbc7(0x100)](_0x49dbc7(0xee)+_0x3d1cd1[_0x49dbc7(0xf9)]),logger[_0x49dbc7(0x104)]('Error\x20details:\x20'+(_0x3d1cd1[_0x49dbc7(0x117)]||JSON[_0x49dbc7(0x10a)](_0x3d1cd1))),await _0x22f7ef['Extin'](sleep),process[_0x49dbc7(0xe3)](0x1);}(!_0x571e31[_0x49dbc7(0xdc)]||!_0x571e31[_0x49dbc7(0x105)])&&(logger[_0x49dbc7(0x100)](_0x22f7ef[_0x49dbc7(0x11c)]),await _0x22f7ef[_0x49dbc7(0x114)](sleep),process[_0x49dbc7(0xe3)](0x1));const _0x1d350b=CLIUtils['getCliDir']();!_0x1d350b&&(logger[_0x49dbc7(0x100)](_0x22f7ef[_0x49dbc7(0x115)]),await _0x22f7ef[_0x49dbc7(0xfd)](sleep),process[_0x49dbc7(0xe3)](0x1));let _0x52a37e=CLIUtils[_0x49dbc7(0xe2)](_0x1d350b);try{!_0x52a37e?(logger[_0x49dbc7(0x104)](_0x22f7ef[_0x49dbc7(0xd4)]),_0x52a37e=await CLIUtils['checkAndUpdateCli']('',_0x1d350b,_0x571e31)):(logger['debug'](_0x22f7ef[_0x49dbc7(0x10b)]),_0x52a37e=await CLIUtils[_0x49dbc7(0xd9)](_0x52a37e,_0x1d350b,_0x571e31));}catch(_0xeac1a7){logger[_0x49dbc7(0x100)](_0x22f7ef[_0x49dbc7(0x11c)]),logger[_0x49dbc7(0x104)](_0x49dbc7(0x108)+(_0xeac1a7['stack']||JSON['stringify'](_0xeac1a7))),await _0x22f7ef[_0x49dbc7(0xda)](sleep),process[_0x49dbc7(0xe3)](0x1);}!_0x52a37e&&(logger[_0x49dbc7(0x100)](_0x22f7ef['HvpeD']),logger['debug'](_0x22f7ef[_0x49dbc7(0xec)]),await _0x22f7ef[_0x49dbc7(0xdf)](sleep),process['exit'](0x1));logger[_0x49dbc7(0x104)]('Spawning:\x20'+_0x52a37e+'\x20load\x20'+_0x2e687e['join']('\x20'));const _0x349f3f=_0x22f7ef[_0x49dbc7(0xf5)](spawn,_0x52a37e,[_0x22f7ef[_0x49dbc7(0xe1)],..._0x2e687e],{'stdio':_0x22f7ef['jFNkl']});let _0x11a336=![];const _0x17e8c6=new Promise(_0xb494aa=>{const _0x4ef83c=_0x49dbc7;_0x349f3f['on'](_0x22f7ef[_0x4ef83c(0xde)],_0x21788a=>{const _0x33ec3e=_0x4ef83c;logger[_0x33ec3e(0x104)](_0x52a37e+_0x33ec3e(0xe6)+_0x21788a),_0x22f7ef[_0x33ec3e(0xf4)](_0xb494aa,_0x21788a);});});[_0x22f7ef[_0x49dbc7(0xeb)],_0x22f7ef[_0x49dbc7(0xfc)],_0x22f7ef[_0x49dbc7(0x102)],_0x22f7ef[_0x49dbc7(0xe0)]]['forEach'](_0x25691e=>{process['on'](_0x25691e,()=>{const _0x42db25=a28_0x1605;if(_0x11a336)return;_0x11a336=!![],logger[_0x42db25(0x104)](_0x42db25(0xdb)+_0x25691e+_0x42db25(0xfe)),_0x349f3f&&!_0x349f3f[_0x42db25(0xe9)]&&(_0x349f3f['kill'](_0x25691e),logger[_0x42db25(0x104)](_0x22f7ef[_0x42db25(0xef)]));});});const _0x3b3d0c=await _0x17e8c6;await _0x22f7ef[_0x49dbc7(0x10c)](sleep),process[_0x49dbc7(0xe3)](_0x3b3d0c);}catch(_0x1dbdfd){logger[_0x49dbc7(0x100)]('Failed\x20initiating\x20load\x20test:\x20'+_0x1dbdfd[_0x49dbc7(0xf9)]),logger[_0x49dbc7(0x104)](_0x49dbc7(0xed)+(_0x1dbdfd[_0x49dbc7(0x117)]||JSON[_0x49dbc7(0x10a)](_0x1dbdfd))),await _0x22f7ef[_0x49dbc7(0x10c)](sleep),process[_0x49dbc7(0xe3)](0x1);}}module['exports']=executeLoadTest;