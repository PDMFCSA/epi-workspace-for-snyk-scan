#!/usr/bin/env node
'use strict';const a28_0x50e678=a28_0x3d83;(function(_0x385c85,_0x379ad1){const _0x4eb345=a28_0x3d83,_0x3a6a8b=_0x385c85();while(!![]){try{const _0x4a473c=parseInt(_0x4eb345(0xdf))/0x1*(parseInt(_0x4eb345(0xc2))/0x2)+parseInt(_0x4eb345(0xb6))/0x3*(parseInt(_0x4eb345(0xbe))/0x4)+parseInt(_0x4eb345(0xe4))/0x5*(parseInt(_0x4eb345(0xac))/0x6)+parseInt(_0x4eb345(0xcd))/0x7*(parseInt(_0x4eb345(0xcc))/0x8)+-parseInt(_0x4eb345(0xd1))/0x9+-parseInt(_0x4eb345(0xd3))/0xa*(parseInt(_0x4eb345(0xc6))/0xb)+-parseInt(_0x4eb345(0xae))/0xc*(parseInt(_0x4eb345(0xb0))/0xd);if(_0x4a473c===_0x379ad1)break;else _0x3a6a8b['push'](_0x3a6a8b['shift']());}catch(_0x4b4d4e){_0x3a6a8b['push'](_0x3a6a8b['shift']());}}}(a28_0x545c,0x1f391));function a28_0x3d83(_0x50d9ba,_0x234a8c){const _0x545ccf=a28_0x545c();return a28_0x3d83=function(_0x3d8386,_0x15d503){_0x3d8386=_0x3d8386-0x9e;let _0x4a6402=_0x545ccf[_0x3d8386];return _0x4a6402;},a28_0x3d83(_0x50d9ba,_0x234a8c);}const {spawn}=require(a28_0x50e678(0xa5)),path=require(a28_0x50e678(0xb4)),helper=require(a28_0x50e678(0x9f)),CLIUtils=require('../v2/cliUtils'),{getLoadConfigPath,sleep}=require(a28_0x50e678(0xab)),logger=require('../../helpers/logger')[a28_0x50e678(0xb3)];async function executeLoadTest(_0x3f9473){const _0x4a78b2=a28_0x50e678,_0x406c06={'aonwX':function(_0x554263,_0x55fb74){return _0x554263(_0x55fb74);},'xUQLD':_0x4a78b2(0xc9),'RJQVv':_0x4a78b2(0xd2),'eWHid':_0x4a78b2(0xbf),'UJNnm':function(_0x49158c,_0x30929b){return _0x49158c(_0x30929b);},'PMtrF':function(_0x3a1d49){return _0x3a1d49();},'vqApL':_0x4a78b2(0xc7),'jUSPG':function(_0x4ed5c1){return _0x4ed5c1();},'IXTil':_0x4a78b2(0xb7),'EVsjH':function(_0x1560c1){return _0x1560c1();},'yCWRy':_0x4a78b2(0xaf),'jydJj':'CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','uiLhu':_0x4a78b2(0xc5),'aXhtx':function(_0x293a83,_0x5b4c86,_0x1386f6,_0xa1a6ae){return _0x293a83(_0x5b4c86,_0x1386f6,_0xa1a6ae);},'rzEEf':_0x4a78b2(0xda),'DpXlK':_0x4a78b2(0xd9),'gRkqX':_0x4a78b2(0xc4),'mXMXO':_0x4a78b2(0xe5),'rmxBm':_0x4a78b2(0xa3),'hANYC':_0x4a78b2(0xa1)};try{const _0x542f18=process[_0x4a78b2(0xbd)]['slice'](0x2),_0x578a0b=_0x542f18[_0x4a78b2(0xbc)](0x1);logger['debug'](_0x4a78b2(0xe7)+_0x578a0b);let _0xadd520={};try{logger['debug'](_0x406c06[_0x4a78b2(0xd6)]);const _0x3c579f={};_0x3c579f[_0x4a78b2(0xa6)]=process[_0x4a78b2(0xb5)][_0x4a78b2(0xa8)]||process[_0x4a78b2(0xb5)][_0x4a78b2(0xd4)],_0x3c579f[_0x4a78b2(0xed)]=process[_0x4a78b2(0xb5)][_0x4a78b2(0xaa)]||process[_0x4a78b2(0xb5)]['BROWSERSTACK_ACCESSKEY'],_0xadd520=_0x3c579f;if(!_0xadd520['userName']||!_0xadd520['accessKey']){const _0x7ac674=_0x406c06[_0x4a78b2(0xe3)](getLoadConfigPath,_0x3f9473[_0x4a78b2(0xbd)]);logger[_0x4a78b2(0xdc)](_0x4a78b2(0xdd)+_0x7ac674),_0x7ac674&&(_0xadd520=helper[_0x4a78b2(0xeb)](_0x7ac674));}}catch(_0x1b700e){logger[_0x4a78b2(0xa0)](_0x4a78b2(0xcf)+_0x1b700e[_0x4a78b2(0xb2)]),logger['debug'](_0x4a78b2(0xe6)+(_0x1b700e[_0x4a78b2(0xe2)]||JSON[_0x4a78b2(0xce)](_0x1b700e))),await _0x406c06['PMtrF'](sleep),process[_0x4a78b2(0xa7)](0x1);}(!_0xadd520['userName']||!_0xadd520[_0x4a78b2(0xed)])&&(logger[_0x4a78b2(0xa0)](_0x406c06['vqApL']),await _0x406c06[_0x4a78b2(0xc0)](sleep),process[_0x4a78b2(0xa7)](0x1));const _0x1c5e34=CLIUtils[_0x4a78b2(0xe1)]();!_0x1c5e34&&(logger[_0x4a78b2(0xa0)](_0x406c06[_0x4a78b2(0xe8)]),await _0x406c06[_0x4a78b2(0xdb)](sleep),process[_0x4a78b2(0xa7)](0x1));let _0x53ec17=CLIUtils['getExistingCliPath'](_0x1c5e34);try{!_0x53ec17?(logger[_0x4a78b2(0xdc)](_0x406c06[_0x4a78b2(0xa2)]),_0x53ec17=await CLIUtils[_0x4a78b2(0xc1)]('',_0x1c5e34,_0xadd520)):(logger[_0x4a78b2(0xdc)](_0x406c06[_0x4a78b2(0xde)]),_0x53ec17=await CLIUtils[_0x4a78b2(0xc1)](_0x53ec17,_0x1c5e34,_0xadd520));}catch(_0x26e89d){logger[_0x4a78b2(0xa0)](_0x406c06[_0x4a78b2(0xd8)]),logger['debug']('Error\x20Details:\x20'+(_0x26e89d['stack']||JSON[_0x4a78b2(0xce)](_0x26e89d))),await _0x406c06['PMtrF'](sleep),process[_0x4a78b2(0xa7)](0x1);}!_0x53ec17&&(logger['error'](_0x406c06['vqApL']),logger[_0x4a78b2(0xdc)](_0x406c06[_0x4a78b2(0xba)]),await _0x406c06[_0x4a78b2(0xe0)](sleep),process['exit'](0x1));logger[_0x4a78b2(0xdc)]('Spawning:\x20'+_0x53ec17+_0x4a78b2(0xea)+_0x578a0b[_0x4a78b2(0xb9)]('\x20'));const _0x294c3b=_0x406c06[_0x4a78b2(0xd0)](spawn,_0x53ec17,[_0x406c06[_0x4a78b2(0xc3)],..._0x578a0b],{'stdio':_0x406c06[_0x4a78b2(0xb1)]});let _0x852b6d=![];const _0x4bd3d3=new Promise(_0x561f7f=>{const _0x2d5a1a=_0x4a78b2;_0x294c3b['on'](_0x406c06[_0x2d5a1a(0xec)],_0x36c8ce=>{const _0x240065=_0x2d5a1a;logger['debug'](_0x53ec17+_0x240065(0xa9)+_0x36c8ce),_0x406c06[_0x240065(0xd5)](_0x561f7f,_0x36c8ce);});});[_0x406c06[_0x4a78b2(0xd7)],_0x406c06[_0x4a78b2(0x9e)],_0x406c06[_0x4a78b2(0xa4)],_0x406c06[_0x4a78b2(0xcb)]]['forEach'](_0x1ca1fb=>{process['on'](_0x1ca1fb,()=>{const _0x4aae7d=a28_0x3d83;if(_0x852b6d)return;_0x852b6d=!![],logger[_0x4aae7d(0xdc)](_0x4aae7d(0xca)+_0x1ca1fb+',\x20forwarding\x20to\x20child\x20process...'),_0x294c3b&&!_0x294c3b[_0x4aae7d(0xbb)]&&(_0x294c3b[_0x4aae7d(0xe9)](_0x1ca1fb),logger['debug'](_0x406c06[_0x4aae7d(0xb8)]));});});const _0x3fb13f=await _0x4bd3d3;await _0x406c06['EVsjH'](sleep),process[_0x4a78b2(0xa7)](_0x3fb13f);}catch(_0x4db863){logger['error'](_0x4a78b2(0xad)+_0x4db863[_0x4a78b2(0xb2)]),logger[_0x4a78b2(0xdc)](_0x4a78b2(0xe6)+(_0x4db863[_0x4a78b2(0xe2)]||JSON[_0x4a78b2(0xce)](_0x4db863))),await _0x406c06[_0x4a78b2(0xdb)](sleep),process[_0x4a78b2(0xa7)](0x1);}}module[a28_0x50e678(0xc8)]=executeLoadTest;function a28_0x545c(){const _0x34cd61=['readConfig','xUQLD','accessKey','mXMXO','../../helpers/helper','error','SIGHUP','yCWRy','SIGQUIT','rmxBm','child_process','userName','exit','BROWSERSTACK_USERNAME','\x20exited\x20with\x20code\x20','BROWSERSTACK_ACCESS_KEY','./loadUtils','12GgUomI','Failed\x20initiating\x20load\x20test:\x20','12BKCkNJ','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','1529996RylbUy','DpXlK','message','winstonLogger','path','env','42591ubffhu','Failed\x20to\x20determine\x20CLI\x20directory','RJQVv','join','uiLhu','killed','slice','argv','4GEYgRH','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','jUSPG','checkAndUpdateCli','2CZcxIf','rzEEf','SIGINT','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','648219fVXvKQ','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','exports','close','Received\x20','hANYC','387448riprXi','35VppWrQ','stringify','Error\x20loading\x20configuration:\x20','aXhtx','779499ClWKym','Waiting\x20for\x20child\x20process\x20to\x20exit...','10ONMiwY','BROWSERSTACK_USER','aonwX','eWHid','gRkqX','vqApL','inherit','load','EVsjH','debug','Configuration\x20path:\x20','jydJj','39861XSNNOw','PMtrF','getCliDir','stack','UJNnm','237270sCLMwV','SIGTERM','Error\x20details:\x20','Executing\x20load\x20test\x20with\x20arguments:\x20','IXTil','kill','\x20load\x20'];a28_0x545c=function(){return _0x34cd61;};return a28_0x545c();}