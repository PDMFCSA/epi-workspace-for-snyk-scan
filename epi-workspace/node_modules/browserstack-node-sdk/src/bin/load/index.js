#!/usr/bin/env node
'use strict';const a28_0x598a68=a28_0x53c8;function a28_0x2f84(){const _0x462381=['BROWSERSTACK_USER','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','bxmYr','close','kill','bAPxj','SIGQUIT','BROWSERSTACK_ACCESSKEY','DYQDW','debug','kZgOo','SIGHUP','eoMif','load','error','exports','exit','956688rmoUyw','FYdTT','argv','message','JtzhW','userName','222348RBNskM','VBivd','CRhJJ','34699640TpqGma','YSerC','TuEbc','getExistingCliPath','FXdcf','BROWSERSTACK_ACCESS_KEY','Error\x20loading\x20configuration:\x20','HeQPq','BWmNs','BvtGZ','Waiting\x20for\x20child\x20process\x20to\x20exit...','SIGTERM','accessKey','BEHCN','gZAhe','6539323Sqimub','6410816cXnTXb','aNNKJ','forEach','SIGINT','stringify','Received\x20','wQuHR','../v2/cliUtils','EWQwO','356336dnciEa','killed','env','join','1259417lFGvAp','stack','Failed\x20initiating\x20load\x20test:\x20','Spawning:\x20','Executing\x20load\x20test\x20with\x20arguments:\x20','../../helpers/helper','\x20load\x20','Failed\x20to\x20determine\x20CLI\x20directory','20ugFCvl','child_process','./loadUtils','ReDIb',',\x20forwarding\x20to\x20child\x20process...','Error\x20details:\x20','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','winstonLogger','checkAndUpdateCli','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary'];a28_0x2f84=function(){return _0x462381;};return a28_0x2f84();}(function(_0xdd4b64,_0xcbc78c){const _0x10f2b7=a28_0x53c8,_0xc5cacb=_0xdd4b64();while(!![]){try{const _0x5c0ad8=-parseInt(_0x10f2b7(0x171))/0x1+-parseInt(_0x10f2b7(0x16d))/0x2+parseInt(_0x10f2b7(0x194))/0x3+-parseInt(_0x10f2b7(0x164))/0x4+-parseInt(_0x10f2b7(0x179))/0x5*(-parseInt(_0x10f2b7(0x19a))/0x6)+-parseInt(_0x10f2b7(0x163))/0x7+parseInt(_0x10f2b7(0x154))/0x8;if(_0x5c0ad8===_0xcbc78c)break;else _0xc5cacb['push'](_0xc5cacb['shift']());}catch(_0x20f1dd){_0xc5cacb['push'](_0xc5cacb['shift']());}}}(a28_0x2f84,0xcaa99));const {spawn}=require(a28_0x598a68(0x17a)),path=require('path'),helper=require(a28_0x598a68(0x176)),CLIUtils=require(a28_0x598a68(0x16b)),{getLoadConfigPath,sleep}=require(a28_0x598a68(0x17b)),logger=require('../../helpers/logger')[a28_0x598a68(0x180)];async function executeLoadTest(_0x1fb5de){const _0x1143fa=a28_0x598a68,_0x10462a={'yoLcl':function(_0x9bf00c,_0x3776b9){return _0x9bf00c(_0x3776b9);},'FXdcf':_0x1143fa(0x186),'bxmYr':_0x1143fa(0x15e),'JtzhW':_0x1143fa(0x17f),'FuvIH':function(_0x3d10ab,_0x37dbf9){return _0x3d10ab(_0x37dbf9);},'DYQDW':function(_0x16228e){return _0x16228e();},'VBivd':'Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','TuEbc':_0x1143fa(0x178),'CRhJJ':function(_0x5664a7){return _0x5664a7();},'kZgOo':_0x1143fa(0x184),'BEHCN':'CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','KLxyq':function(_0x1a0898){return _0x1a0898();},'HeQPq':_0x1143fa(0x182),'EWQwO':function(_0x2e208c){return _0x2e208c();},'BWmNs':function(_0x2acf7d,_0x484cd0,_0x23a22f,_0x46be60){return _0x2acf7d(_0x484cd0,_0x23a22f,_0x46be60);},'BvtGZ':_0x1143fa(0x190),'YSerC':'inherit','eoMif':_0x1143fa(0x167),'ReDIb':_0x1143fa(0x15f),'FYdTT':_0x1143fa(0x189),'wQuHR':_0x1143fa(0x18e),'bAPxj':function(_0x50575e){return _0x50575e();},'gZAhe':function(_0x1b3fe3){return _0x1b3fe3();}};try{const _0x46c3b4=process['argv']['slice'](0x2),_0x5b6bf9=_0x46c3b4['slice'](0x1);logger[_0x1143fa(0x18c)](_0x1143fa(0x175)+_0x5b6bf9);let _0x11d6df={};try{logger['debug'](_0x10462a[_0x1143fa(0x198)]);const _0x3ec657={};_0x3ec657[_0x1143fa(0x199)]=process[_0x1143fa(0x16f)]['BROWSERSTACK_USERNAME']||process[_0x1143fa(0x16f)][_0x1143fa(0x183)],_0x3ec657[_0x1143fa(0x160)]=process[_0x1143fa(0x16f)][_0x1143fa(0x159)]||process['env'][_0x1143fa(0x18a)],_0x11d6df=_0x3ec657;if(!_0x11d6df[_0x1143fa(0x199)]||!_0x11d6df['accessKey']){const _0x32ff1f=_0x10462a['FuvIH'](getLoadConfigPath,_0x1fb5de[_0x1143fa(0x196)]);logger[_0x1143fa(0x18c)]('Configuration\x20path:\x20'+_0x32ff1f),_0x32ff1f&&(_0x11d6df=helper['readConfig'](_0x32ff1f));}}catch(_0x59ecd4){logger[_0x1143fa(0x191)](_0x1143fa(0x15a)+_0x59ecd4['message']),logger[_0x1143fa(0x18c)](_0x1143fa(0x17e)+(_0x59ecd4[_0x1143fa(0x172)]||JSON[_0x1143fa(0x168)](_0x59ecd4))),await _0x10462a[_0x1143fa(0x18b)](sleep),process[_0x1143fa(0x193)](0x1);}(!_0x11d6df[_0x1143fa(0x199)]||!_0x11d6df[_0x1143fa(0x160)])&&(logger[_0x1143fa(0x191)](_0x10462a['VBivd']),await _0x10462a[_0x1143fa(0x18b)](sleep),process[_0x1143fa(0x193)](0x1));const _0x5d0f93=CLIUtils['getCliDir']();!_0x5d0f93&&(logger[_0x1143fa(0x191)](_0x10462a[_0x1143fa(0x156)]),await _0x10462a[_0x1143fa(0x19c)](sleep),process[_0x1143fa(0x193)](0x1));let _0x1558af=CLIUtils[_0x1143fa(0x157)](_0x5d0f93);try{!_0x1558af?(logger[_0x1143fa(0x18c)](_0x10462a[_0x1143fa(0x18d)]),_0x1558af=await CLIUtils[_0x1143fa(0x181)]('',_0x5d0f93,_0x11d6df)):(logger[_0x1143fa(0x18c)](_0x10462a[_0x1143fa(0x161)]),_0x1558af=await CLIUtils[_0x1143fa(0x181)](_0x1558af,_0x5d0f93,_0x11d6df));}catch(_0xc056c5){logger[_0x1143fa(0x191)](_0x10462a[_0x1143fa(0x19b)]),logger['debug']('Error\x20Details:\x20'+(_0xc056c5[_0x1143fa(0x172)]||JSON[_0x1143fa(0x168)](_0xc056c5))),await _0x10462a['KLxyq'](sleep),process[_0x1143fa(0x193)](0x1);}!_0x1558af&&(logger[_0x1143fa(0x191)](_0x10462a[_0x1143fa(0x19b)]),logger[_0x1143fa(0x18c)](_0x10462a[_0x1143fa(0x15b)]),await _0x10462a[_0x1143fa(0x16c)](sleep),process[_0x1143fa(0x193)](0x1));logger[_0x1143fa(0x18c)](_0x1143fa(0x174)+_0x1558af+_0x1143fa(0x177)+_0x5b6bf9[_0x1143fa(0x170)]('\x20'));const _0x1ac5d4=_0x10462a[_0x1143fa(0x15c)](spawn,_0x1558af,[_0x10462a[_0x1143fa(0x15d)],..._0x5b6bf9],{'stdio':_0x10462a[_0x1143fa(0x155)]});let _0x49572e=![];const _0x357ee7=new Promise(_0x3c1a9b=>{const _0x3eefe6=_0x1143fa,_0x101152={'aNNKJ':function(_0x3f10ab,_0x5b432f){return _0x10462a['yoLcl'](_0x3f10ab,_0x5b432f);}};_0x1ac5d4['on'](_0x10462a[_0x3eefe6(0x158)],_0xf79711=>{const _0x2c6e61=_0x3eefe6;logger[_0x2c6e61(0x18c)](_0x1558af+'\x20exited\x20with\x20code\x20'+_0xf79711),_0x101152[_0x2c6e61(0x165)](_0x3c1a9b,_0xf79711);});});[_0x10462a[_0x1143fa(0x18f)],_0x10462a[_0x1143fa(0x17c)],_0x10462a[_0x1143fa(0x195)],_0x10462a[_0x1143fa(0x16a)]][_0x1143fa(0x166)](_0x33173f=>{process['on'](_0x33173f,()=>{const _0x458507=a28_0x53c8;if(_0x49572e)return;_0x49572e=!![],logger['debug'](_0x458507(0x169)+_0x33173f+_0x458507(0x17d)),_0x1ac5d4&&!_0x1ac5d4[_0x458507(0x16e)]&&(_0x1ac5d4[_0x458507(0x187)](_0x33173f),logger[_0x458507(0x18c)](_0x10462a[_0x458507(0x185)]));});});const _0xae61d7=await _0x357ee7;await _0x10462a[_0x1143fa(0x188)](sleep),process['exit'](_0xae61d7);}catch(_0x3df998){logger['error'](_0x1143fa(0x173)+_0x3df998[_0x1143fa(0x197)]),logger[_0x1143fa(0x18c)]('Error\x20details:\x20'+(_0x3df998[_0x1143fa(0x172)]||JSON['stringify'](_0x3df998))),await _0x10462a[_0x1143fa(0x162)](sleep),process[_0x1143fa(0x193)](0x1);}}function a28_0x53c8(_0x107833,_0x2285c3){const _0x2f8437=a28_0x2f84();return a28_0x53c8=function(_0x53c8f3,_0x35b8bf){_0x53c8f3=_0x53c8f3-0x154;let _0x3a2804=_0x2f8437[_0x53c8f3];return _0x3a2804;},a28_0x53c8(_0x107833,_0x2285c3);}module[a28_0x598a68(0x192)]=executeLoadTest;