#!/usr/bin/env node
'use strict';const a28_0x4ad5a9=a28_0x50f0;(function(_0x39bb60,_0x4cdd2a){const _0x1c08e9=a28_0x50f0,_0x1239cf=_0x39bb60();while(!![]){try{const _0x12d631=-parseInt(_0x1c08e9(0x92))/0x1+parseInt(_0x1c08e9(0x8f))/0x2+-parseInt(_0x1c08e9(0x81))/0x3+parseInt(_0x1c08e9(0x76))/0x4*(parseInt(_0x1c08e9(0x84))/0x5)+-parseInt(_0x1c08e9(0x87))/0x6*(parseInt(_0x1c08e9(0x6b))/0x7)+-parseInt(_0x1c08e9(0x99))/0x8+parseInt(_0x1c08e9(0x8e))/0x9*(parseInt(_0x1c08e9(0x7d))/0xa);if(_0x12d631===_0x4cdd2a)break;else _0x1239cf['push'](_0x1239cf['shift']());}catch(_0x51c6e7){_0x1239cf['push'](_0x1239cf['shift']());}}}(a28_0x16bf,0xecdce));function a28_0x50f0(_0x4b93b7,_0x31590b){const _0x16bf2f=a28_0x16bf();return a28_0x50f0=function(_0x50f013,_0x90516d){_0x50f013=_0x50f013-0x64;let _0x4cfa99=_0x16bf2f[_0x50f013];return _0x4cfa99;},a28_0x50f0(_0x4b93b7,_0x31590b);}function a28_0x16bf(){const _0x42b661=['860024CIVHLv','Failed\x20to\x20determine\x20CLI\x20directory','ovTma','Configuration\x20path:\x20','SIGINT','path','exit','7466120ZYjZNJ','\x20load\x20','getCliDir','argv','QWpcX','ttSaN','checkAndUpdateCli','eBWSd','Error\x20details:\x20','env','Error\x20Details:\x20','inherit','KtsUH','SIGHUP','getExistingCliPath','Executing\x20load\x20test\x20with\x20arguments:\x20','bxfPP','14fYkLMy','killed','message','nmzSn','./loadUtils','../v2/cliUtils','kill','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','userName','forEach','exports','105388LXRamR','join','EZiGW','error','accessKey','debug','\x20exited\x20with\x20code\x20','70dRpPyx','Received\x20','IqMAE','stringify','323304TZKstg','Failed\x20initiating\x20load\x20test:\x20','VzjBG','20sWEsvf','Spawning:\x20','sGfJp','2733486gLRPVY','OVSHt','FLMyk','slice','SIGTERM','../../helpers/logger','stack','4225113NKFfsI','781644EgXvWT','readConfig','lxVoa'];a28_0x16bf=function(){return _0x42b661;};return a28_0x16bf();}const {spawn}=require('child_process'),path=require(a28_0x4ad5a9(0x97)),helper=require('../../helpers/helper'),CLIUtils=require(a28_0x4ad5a9(0x70)),{getLoadConfigPath,sleep}=require(a28_0x4ad5a9(0x6f)),logger=require(a28_0x4ad5a9(0x8c))['winstonLogger'];async function executeLoadTest(_0x2ed90f){const _0x139226=a28_0x4ad5a9,_0x1caf37={'EZiGW':function(_0x4690bc,_0x3ef9e4){return _0x4690bc(_0x3ef9e4);},'DdeCe':'close','ttSaN':'Waiting\x20for\x20child\x20process\x20to\x20exit...','VzjBG':'Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','OsxZZ':function(_0x4e90ea,_0x54b516){return _0x4e90ea(_0x54b516);},'eBWSd':function(_0x6c6db7){return _0x6c6db7();},'nmzSn':'Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','vwccJ':_0x139226(0x93),'OVSHt':'CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','IqMAE':'CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','ovTma':function(_0x47dbd5){return _0x47dbd5();},'lxVoa':_0x139226(0x72),'FLMyk':function(_0x2acf54,_0x395dcd,_0x4cc0ec,_0x5c3c72){return _0x2acf54(_0x395dcd,_0x4cc0ec,_0x5c3c72);},'KtsUH':'load','sGfJp':_0x139226(0x65),'HkPMr':_0x139226(0x96),'MjtiW':_0x139226(0x8b),'bxfPP':'SIGQUIT','jLlKl':_0x139226(0x67),'QWpcX':function(_0x54a671){return _0x54a671();}};try{const _0x18ef9f=process[_0x139226(0x9c)][_0x139226(0x8a)](0x2),_0x1e4754=_0x18ef9f['slice'](0x1);logger[_0x139226(0x7b)](_0x139226(0x69)+_0x1e4754);let _0xbef72c={};try{logger[_0x139226(0x7b)](_0x1caf37[_0x139226(0x83)]);const _0x84b654={};_0x84b654['userName']=process[_0x139226(0xa2)]['BROWSERSTACK_USERNAME']||process[_0x139226(0xa2)]['BROWSERSTACK_USER'],_0x84b654[_0x139226(0x7a)]=process['env']['BROWSERSTACK_ACCESS_KEY']||process[_0x139226(0xa2)]['BROWSERSTACK_ACCESSKEY'],_0xbef72c=_0x84b654;if(!_0xbef72c[_0x139226(0x73)]||!_0xbef72c[_0x139226(0x7a)]){const _0x37e0f7=_0x1caf37['OsxZZ'](getLoadConfigPath,_0x2ed90f[_0x139226(0x9c)]);logger['debug'](_0x139226(0x95)+_0x37e0f7),_0x37e0f7&&(_0xbef72c=helper[_0x139226(0x90)](_0x37e0f7));}}catch(_0x517649){logger[_0x139226(0x79)]('Error\x20loading\x20configuration:\x20'+_0x517649['message']),logger[_0x139226(0x7b)](_0x139226(0xa1)+(_0x517649[_0x139226(0x8d)]||JSON[_0x139226(0x80)](_0x517649))),await _0x1caf37[_0x139226(0xa0)](sleep),process[_0x139226(0x98)](0x1);}(!_0xbef72c[_0x139226(0x73)]||!_0xbef72c[_0x139226(0x7a)])&&(logger[_0x139226(0x79)](_0x1caf37[_0x139226(0x6e)]),await _0x1caf37[_0x139226(0xa0)](sleep),process[_0x139226(0x98)](0x1));const _0x2f9919=CLIUtils[_0x139226(0x9b)]();!_0x2f9919&&(logger['error'](_0x1caf37['vwccJ']),await _0x1caf37[_0x139226(0xa0)](sleep),process['exit'](0x1));let _0x2038cc=CLIUtils[_0x139226(0x68)](_0x2f9919);try{!_0x2038cc?(logger['debug'](_0x1caf37[_0x139226(0x88)]),_0x2038cc=await CLIUtils[_0x139226(0x9f)]('',_0x2f9919,_0xbef72c)):(logger[_0x139226(0x7b)](_0x1caf37[_0x139226(0x7f)]),_0x2038cc=await CLIUtils[_0x139226(0x9f)](_0x2038cc,_0x2f9919,_0xbef72c));}catch(_0x4fa20d){logger['error'](_0x1caf37[_0x139226(0x6e)]),logger[_0x139226(0x7b)](_0x139226(0x64)+(_0x4fa20d['stack']||JSON[_0x139226(0x80)](_0x4fa20d))),await _0x1caf37[_0x139226(0x94)](sleep),process[_0x139226(0x98)](0x1);}!_0x2038cc&&(logger[_0x139226(0x79)](_0x1caf37[_0x139226(0x6e)]),logger[_0x139226(0x7b)](_0x1caf37[_0x139226(0x91)]),await _0x1caf37[_0x139226(0xa0)](sleep),process[_0x139226(0x98)](0x1));logger[_0x139226(0x7b)](_0x139226(0x85)+_0x2038cc+_0x139226(0x9a)+_0x1e4754[_0x139226(0x77)]('\x20'));const _0x76b490=_0x1caf37[_0x139226(0x89)](spawn,_0x2038cc,[_0x1caf37[_0x139226(0x66)],..._0x1e4754],{'stdio':_0x1caf37[_0x139226(0x86)]});let _0x228fd9=![];const _0x431471=new Promise(_0x35df0c=>{const _0x214b27={'ZncSo':function(_0x307b78,_0xe1f659){const _0x1a331d=a28_0x50f0;return _0x1caf37[_0x1a331d(0x78)](_0x307b78,_0xe1f659);}};_0x76b490['on'](_0x1caf37['DdeCe'],_0x1e4da2=>{const _0x3ffa6d=a28_0x50f0;logger[_0x3ffa6d(0x7b)](_0x2038cc+_0x3ffa6d(0x7c)+_0x1e4da2),_0x214b27['ZncSo'](_0x35df0c,_0x1e4da2);});});[_0x1caf37['HkPMr'],_0x1caf37['MjtiW'],_0x1caf37[_0x139226(0x6a)],_0x1caf37['jLlKl']][_0x139226(0x74)](_0x4ba227=>{process['on'](_0x4ba227,()=>{const _0x400d47=a28_0x50f0;if(_0x228fd9)return;_0x228fd9=!![],logger[_0x400d47(0x7b)](_0x400d47(0x7e)+_0x4ba227+',\x20forwarding\x20to\x20child\x20process...'),_0x76b490&&!_0x76b490[_0x400d47(0x6c)]&&(_0x76b490[_0x400d47(0x71)](_0x4ba227),logger['debug'](_0x1caf37[_0x400d47(0x9e)]));});});const _0x3cb0ec=await _0x431471;await _0x1caf37[_0x139226(0x9d)](sleep),process[_0x139226(0x98)](_0x3cb0ec);}catch(_0x21c3a0){logger[_0x139226(0x79)](_0x139226(0x82)+_0x21c3a0[_0x139226(0x6d)]),logger[_0x139226(0x7b)](_0x139226(0xa1)+(_0x21c3a0['stack']||JSON[_0x139226(0x80)](_0x21c3a0))),await _0x1caf37[_0x139226(0x9d)](sleep),process[_0x139226(0x98)](0x1);}}module[a28_0x4ad5a9(0x75)]=executeLoadTest;