#!/usr/bin/env node
'use strict';function a28_0x25c3(_0x3745e5,_0x5288e1){const _0x1201d7=a28_0x1201();return a28_0x25c3=function(_0x25c33d,_0x458197){_0x25c33d=_0x25c33d-0x178;let _0x541916=_0x1201d7[_0x25c33d];return _0x541916;},a28_0x25c3(_0x3745e5,_0x5288e1);}const a28_0x4dab69=a28_0x25c3;(function(_0x449b92,_0x118120){const _0x4886e0=a28_0x25c3,_0x365363=_0x449b92();while(!![]){try{const _0x1fd8ce=-parseInt(_0x4886e0(0x185))/0x1*(-parseInt(_0x4886e0(0x18d))/0x2)+-parseInt(_0x4886e0(0x180))/0x3*(-parseInt(_0x4886e0(0x186))/0x4)+parseInt(_0x4886e0(0x1a1))/0x5*(-parseInt(_0x4886e0(0x1a4))/0x6)+-parseInt(_0x4886e0(0x1a0))/0x7+-parseInt(_0x4886e0(0x1ab))/0x8+-parseInt(_0x4886e0(0x19b))/0x9*(-parseInt(_0x4886e0(0x1b0))/0xa)+parseInt(_0x4886e0(0x1a5))/0xb;if(_0x1fd8ce===_0x118120)break;else _0x365363['push'](_0x365363['shift']());}catch(_0x5b4171){_0x365363['push'](_0x365363['shift']());}}}(a28_0x1201,0xd4d4a));const {spawn}=require(a28_0x4dab69(0x19d)),path=require('path'),helper=require(a28_0x4dab69(0x179)),CLIUtils=require('../v2/cliUtils'),{getLoadConfigPath,sleep}=require(a28_0x4dab69(0x181)),logger=require(a28_0x4dab69(0x1ad))[a28_0x4dab69(0x1a3)];function a28_0x1201(){const _0x524e76=['vvBXl','wjRix','5580001CPOFRG','213605rsabKA','getCliDir','winstonLogger','222ogZxEd','17342677NrBjYc','error','Error\x20details:\x20','SIGHUP','wjZuF','Error\x20loading\x20configuration:\x20','6154624mJjWXv','phRXG','../../helpers/logger','\x20exited\x20with\x20code\x20','BROWSERSTACK_ACCESSKEY','100GyVTDB','zepam','SIGINT','eCpRx','Waiting\x20for\x20child\x20process\x20to\x20exit...','SIGTERM','wDxoV','yxqOz','argv','message','FnkDZ','getExistingCliPath','userName','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','debug','../../helpers/helper','killed','ypyos','stack','inherit','readConfig','slice','187521yqnaBy','./loadUtils','hvVsa','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','stringify','2PBAJeW','60lKBtvM','join','yVIrT','Failed\x20initiating\x20load\x20test:\x20','exit','MPerA','hfQuC','638760AkPNXa','OprKK','env','checkAndUpdateCli','accessKey','Spawning:\x20','DGwZx','FwbCF','Failed\x20to\x20determine\x20CLI\x20directory','exports','kill','\x20load\x20','BROWSERSTACK_USERNAME','BROWSERSTACK_ACCESS_KEY','779337SmQZuI','SIGQUIT','child_process'];a28_0x1201=function(){return _0x524e76;};return a28_0x1201();}async function executeLoadTest(_0x2e50dd){const _0x4b4ab4=a28_0x4dab69,_0x5c6ccc={'phRXG':function(_0x151742,_0x12b00e){return _0x151742(_0x12b00e);},'zepam':'close','OprKK':_0x4b4ab4(0x1b4),'MPerA':_0x4b4ab4(0x183),'yxqOz':function(_0x2c429d){return _0x2c429d();},'vvBXl':'Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','eCpRx':_0x4b4ab4(0x195),'FnkDZ':'CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','wjZuF':'CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','yVIrT':_0x4b4ab4(0x1bd),'DGwZx':function(_0x3c89e6,_0x5c36e5,_0x8c8cdf,_0x189c6a){return _0x3c89e6(_0x5c36e5,_0x8c8cdf,_0x189c6a);},'FonHr':'load','wjRix':_0x4b4ab4(0x17d),'FwbCF':_0x4b4ab4(0x1b2),'hvVsa':_0x4b4ab4(0x1b5),'ypyos':_0x4b4ab4(0x19c),'hfQuC':_0x4b4ab4(0x1a8)};try{const _0x5c95f8=process[_0x4b4ab4(0x1b8)][_0x4b4ab4(0x17f)](0x2),_0x553c81=_0x5c95f8[_0x4b4ab4(0x17f)](0x1);logger[_0x4b4ab4(0x178)]('Executing\x20load\x20test\x20with\x20arguments:\x20'+_0x553c81);let _0x5c5d7b={};try{logger[_0x4b4ab4(0x178)](_0x5c6ccc[_0x4b4ab4(0x18b)]);const _0x71e71a={};_0x71e71a['userName']=process[_0x4b4ab4(0x18f)][_0x4b4ab4(0x199)]||process[_0x4b4ab4(0x18f)]['BROWSERSTACK_USER'],_0x71e71a[_0x4b4ab4(0x191)]=process[_0x4b4ab4(0x18f)][_0x4b4ab4(0x19a)]||process[_0x4b4ab4(0x18f)][_0x4b4ab4(0x1af)],_0x5c5d7b=_0x71e71a;if(!_0x5c5d7b[_0x4b4ab4(0x1bc)]||!_0x5c5d7b[_0x4b4ab4(0x191)]){const _0x1f69dc=_0x5c6ccc[_0x4b4ab4(0x1ac)](getLoadConfigPath,_0x2e50dd[_0x4b4ab4(0x1b8)]);logger[_0x4b4ab4(0x178)]('Configuration\x20path:\x20'+_0x1f69dc),_0x1f69dc&&(_0x5c5d7b=helper[_0x4b4ab4(0x17e)](_0x1f69dc));}}catch(_0x332a70){logger[_0x4b4ab4(0x1a6)](_0x4b4ab4(0x1aa)+_0x332a70['message']),logger[_0x4b4ab4(0x178)](_0x4b4ab4(0x1a7)+(_0x332a70[_0x4b4ab4(0x17c)]||JSON[_0x4b4ab4(0x184)](_0x332a70))),await _0x5c6ccc[_0x4b4ab4(0x1b7)](sleep),process[_0x4b4ab4(0x18a)](0x1);}(!_0x5c5d7b[_0x4b4ab4(0x1bc)]||!_0x5c5d7b[_0x4b4ab4(0x191)])&&(logger['error'](_0x5c6ccc[_0x4b4ab4(0x19e)]),await _0x5c6ccc['yxqOz'](sleep),process[_0x4b4ab4(0x18a)](0x1));const _0x1ac73c=CLIUtils[_0x4b4ab4(0x1a2)]();!_0x1ac73c&&(logger[_0x4b4ab4(0x1a6)](_0x5c6ccc[_0x4b4ab4(0x1b3)]),await _0x5c6ccc[_0x4b4ab4(0x1b7)](sleep),process['exit'](0x1));let _0x565f70=CLIUtils[_0x4b4ab4(0x1bb)](_0x1ac73c);try{!_0x565f70?(logger['debug'](_0x5c6ccc[_0x4b4ab4(0x1ba)]),_0x565f70=await CLIUtils[_0x4b4ab4(0x190)]('',_0x1ac73c,_0x5c5d7b)):(logger['debug'](_0x5c6ccc[_0x4b4ab4(0x1a9)]),_0x565f70=await CLIUtils['checkAndUpdateCli'](_0x565f70,_0x1ac73c,_0x5c5d7b));}catch(_0x426b1f){logger[_0x4b4ab4(0x1a6)](_0x5c6ccc['vvBXl']),logger[_0x4b4ab4(0x178)]('Error\x20Details:\x20'+(_0x426b1f[_0x4b4ab4(0x17c)]||JSON[_0x4b4ab4(0x184)](_0x426b1f))),await _0x5c6ccc[_0x4b4ab4(0x1b7)](sleep),process[_0x4b4ab4(0x18a)](0x1);}!_0x565f70&&(logger[_0x4b4ab4(0x1a6)](_0x5c6ccc[_0x4b4ab4(0x19e)]),logger[_0x4b4ab4(0x178)](_0x5c6ccc[_0x4b4ab4(0x188)]),await _0x5c6ccc[_0x4b4ab4(0x1b7)](sleep),process[_0x4b4ab4(0x18a)](0x1));logger[_0x4b4ab4(0x178)](_0x4b4ab4(0x192)+_0x565f70+_0x4b4ab4(0x198)+_0x553c81[_0x4b4ab4(0x187)]('\x20'));const _0x53f79a=_0x5c6ccc[_0x4b4ab4(0x193)](spawn,_0x565f70,[_0x5c6ccc['FonHr'],..._0x553c81],{'stdio':_0x5c6ccc[_0x4b4ab4(0x19f)]});let _0x17d9a7=![];const _0x3303ec=new Promise(_0x3b3e5c=>{const _0x306e3c=_0x4b4ab4;_0x53f79a['on'](_0x5c6ccc[_0x306e3c(0x1b1)],_0x507080=>{const _0x42fe8d=_0x306e3c;logger[_0x42fe8d(0x178)](_0x565f70+_0x42fe8d(0x1ae)+_0x507080),_0x5c6ccc[_0x42fe8d(0x1ac)](_0x3b3e5c,_0x507080);});});[_0x5c6ccc[_0x4b4ab4(0x194)],_0x5c6ccc[_0x4b4ab4(0x182)],_0x5c6ccc[_0x4b4ab4(0x17b)],_0x5c6ccc[_0x4b4ab4(0x18c)]]['forEach'](_0x3ce7a1=>{const _0x3a2cb8=_0x4b4ab4,_0x394e1a={};_0x394e1a['wDxoV']=_0x5c6ccc[_0x3a2cb8(0x18e)];const _0x1b154d=_0x394e1a;process['on'](_0x3ce7a1,()=>{const _0x3500b4=_0x3a2cb8;if(_0x17d9a7)return;_0x17d9a7=!![],logger[_0x3500b4(0x178)]('Received\x20'+_0x3ce7a1+',\x20forwarding\x20to\x20child\x20process...'),_0x53f79a&&!_0x53f79a[_0x3500b4(0x17a)]&&(_0x53f79a[_0x3500b4(0x197)](_0x3ce7a1),logger[_0x3500b4(0x178)](_0x1b154d[_0x3500b4(0x1b6)]));});});const _0x3d7566=await _0x3303ec;await _0x5c6ccc[_0x4b4ab4(0x1b7)](sleep),process[_0x4b4ab4(0x18a)](_0x3d7566);}catch(_0x1363a8){logger[_0x4b4ab4(0x1a6)](_0x4b4ab4(0x189)+_0x1363a8[_0x4b4ab4(0x1b9)]),logger[_0x4b4ab4(0x178)](_0x4b4ab4(0x1a7)+(_0x1363a8[_0x4b4ab4(0x17c)]||JSON['stringify'](_0x1363a8))),await _0x5c6ccc[_0x4b4ab4(0x1b7)](sleep),process[_0x4b4ab4(0x18a)](0x1);}}module[a28_0x4dab69(0x196)]=executeLoadTest;