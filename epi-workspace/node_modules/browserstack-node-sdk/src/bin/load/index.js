#!/usr/bin/env node
'use strict';const a28_0x136ccf=a28_0x12f1;(function(_0x1acc74,_0x1ae95e){const _0x424464=a28_0x12f1,_0x2c51bf=_0x1acc74();while(!![]){try{const _0x414d74=parseInt(_0x424464(0x1fb))/0x1+-parseInt(_0x424464(0x1c5))/0x2+parseInt(_0x424464(0x1f7))/0x3+parseInt(_0x424464(0x1e3))/0x4*(parseInt(_0x424464(0x1e7))/0x5)+parseInt(_0x424464(0x1f5))/0x6*(-parseInt(_0x424464(0x1ca))/0x7)+parseInt(_0x424464(0x1d8))/0x8*(-parseInt(_0x424464(0x1eb))/0x9)+-parseInt(_0x424464(0x1c9))/0xa*(-parseInt(_0x424464(0x1d4))/0xb);if(_0x414d74===_0x1ae95e)break;else _0x2c51bf['push'](_0x2c51bf['shift']());}catch(_0x33e939){_0x2c51bf['push'](_0x2c51bf['shift']());}}}(a28_0xbdfc,0x715a9));function a28_0x12f1(_0x229ecc,_0x47893e){const _0xbdfc7d=a28_0xbdfc();return a28_0x12f1=function(_0x12f1fc,_0x205226){_0x12f1fc=_0x12f1fc-0x1c5;let _0x1ce130=_0xbdfc7d[_0x12f1fc];return _0x1ce130;},a28_0x12f1(_0x229ecc,_0x47893e);}const {spawn}=require(a28_0x136ccf(0x20a)),path=require(a28_0x136ccf(0x1ed)),helper=require(a28_0x136ccf(0x1f8)),CLIUtils=require(a28_0x136ccf(0x1ce)),{getLoadConfigPath,sleep}=require(a28_0x136ccf(0x1e0)),logger=require('../../helpers/logger')['winstonLogger'];async function executeLoadTest(_0xd90e76){const _0x58440a=a28_0x136ccf,_0x1b21ab={'DCuDe':function(_0x181c34,_0x516c97){return _0x181c34(_0x516c97);},'DZVLh':_0x58440a(0x1ef),'tfQkD':_0x58440a(0x1e6),'EJMYS':_0x58440a(0x1cf),'vDIXR':function(_0x3966c2){return _0x3966c2();},'esPWn':_0x58440a(0x1f0),'zdCYv':function(_0x1fd1e7){return _0x1fd1e7();},'VmIhp':_0x58440a(0x200),'FjtcZ':function(_0x1c02e2){return _0x1c02e2();},'iDWEe':_0x58440a(0x202),'WbDkA':_0x58440a(0x206),'eBOcw':_0x58440a(0x1e4),'ijjjQ':function(_0x324495,_0x2b07e9,_0x4fccd3,_0x16eb79){return _0x324495(_0x2b07e9,_0x4fccd3,_0x16eb79);},'YsHgH':_0x58440a(0x1f6),'ojVXg':_0x58440a(0x1db),'GOQTD':_0x58440a(0x1d0),'jEdDK':'SIGTERM','avwwl':'SIGQUIT','VuaEV':_0x58440a(0x1d7),'aUwcV':function(_0x24eb1b){return _0x24eb1b();}};try{const _0x392494=process[_0x58440a(0x207)]['slice'](0x2),_0xcfff8e=_0x392494['slice'](0x1);logger[_0x58440a(0x203)]('Executing\x20load\x20test\x20with\x20arguments:\x20'+_0xcfff8e);let _0x387a89={};try{logger[_0x58440a(0x203)](_0x1b21ab[_0x58440a(0x1cd)]);const _0x2e6898={};_0x2e6898[_0x58440a(0x1dd)]=process[_0x58440a(0x1dc)][_0x58440a(0x1e9)]||process['env'][_0x58440a(0x1fa)],_0x2e6898[_0x58440a(0x1da)]=process[_0x58440a(0x1dc)][_0x58440a(0x1fd)]||process[_0x58440a(0x1dc)][_0x58440a(0x1f3)],_0x387a89=_0x2e6898;if(!_0x387a89[_0x58440a(0x1dd)]||!_0x387a89[_0x58440a(0x1da)]){const _0x37fc88=_0x1b21ab['DCuDe'](getLoadConfigPath,_0xd90e76[_0x58440a(0x207)]);logger[_0x58440a(0x203)](_0x58440a(0x1d1)+_0x37fc88),_0x37fc88&&(_0x387a89=helper['readConfig'](_0x37fc88));}}catch(_0x2d481c){logger['error'](_0x58440a(0x1f1)+_0x2d481c[_0x58440a(0x1f9)]),logger['debug'](_0x58440a(0x1d9)+(_0x2d481c['stack']||JSON['stringify'](_0x2d481c))),await _0x1b21ab[_0x58440a(0x1d3)](sleep),process[_0x58440a(0x1c7)](0x1);}(!_0x387a89[_0x58440a(0x1dd)]||!_0x387a89[_0x58440a(0x1da)])&&(logger['error'](_0x1b21ab['esPWn']),await _0x1b21ab[_0x58440a(0x1c8)](sleep),process[_0x58440a(0x1c7)](0x1));const _0x4e1163=CLIUtils[_0x58440a(0x1e2)]();!_0x4e1163&&(logger[_0x58440a(0x1df)](_0x1b21ab[_0x58440a(0x1e1)]),await _0x1b21ab[_0x58440a(0x20c)](sleep),process['exit'](0x1));let _0x5885ff=CLIUtils[_0x58440a(0x1f2)](_0x4e1163);try{!_0x5885ff?(logger[_0x58440a(0x203)](_0x1b21ab[_0x58440a(0x1f4)]),_0x5885ff=await CLIUtils[_0x58440a(0x1cc)]('',_0x4e1163,_0x387a89)):(logger[_0x58440a(0x203)](_0x1b21ab[_0x58440a(0x1d5)]),_0x5885ff=await CLIUtils[_0x58440a(0x1cc)](_0x5885ff,_0x4e1163,_0x387a89));}catch(_0x5edfbb){logger[_0x58440a(0x1df)](_0x1b21ab[_0x58440a(0x1d2)]),logger[_0x58440a(0x203)](_0x58440a(0x1ff)+(_0x5edfbb['stack']||JSON[_0x58440a(0x208)](_0x5edfbb))),await _0x1b21ab[_0x58440a(0x1d3)](sleep),process[_0x58440a(0x1c7)](0x1);}!_0x5885ff&&(logger['error'](_0x1b21ab['esPWn']),logger[_0x58440a(0x203)](_0x1b21ab[_0x58440a(0x204)]),await _0x1b21ab[_0x58440a(0x1c8)](sleep),process['exit'](0x1));logger['debug'](_0x58440a(0x1ee)+_0x5885ff+'\x20load\x20'+_0xcfff8e['join']('\x20'));const _0x425002=_0x1b21ab[_0x58440a(0x20b)](spawn,_0x5885ff,[_0x1b21ab[_0x58440a(0x20e)],..._0xcfff8e],{'stdio':_0x1b21ab['ojVXg']});let _0x5ccc91=![];const _0x29b071=new Promise(_0x216765=>{const _0x1b16fe=_0x58440a;_0x425002['on'](_0x1b21ab[_0x1b16fe(0x201)],_0x517c21=>{const _0xd99d01=_0x1b16fe;logger[_0xd99d01(0x203)](_0x5885ff+_0xd99d01(0x1ec)+_0x517c21),_0x1b21ab[_0xd99d01(0x1d6)](_0x216765,_0x517c21);});});[_0x1b21ab[_0x58440a(0x1e8)],_0x1b21ab[_0x58440a(0x205)],_0x1b21ab['avwwl'],_0x1b21ab[_0x58440a(0x1c6)]][_0x58440a(0x1fe)](_0x395a31=>{const _0x15e44e=_0x58440a,_0x403b56={};_0x403b56[_0x15e44e(0x1fc)]=_0x1b21ab[_0x15e44e(0x20d)];const _0x1488dd=_0x403b56;process['on'](_0x395a31,()=>{const _0x149337=_0x15e44e;if(_0x5ccc91)return;_0x5ccc91=!![],logger[_0x149337(0x203)]('Received\x20'+_0x395a31+_0x149337(0x209)),_0x425002&&!_0x425002[_0x149337(0x1e5)]&&(_0x425002['kill'](_0x395a31),logger[_0x149337(0x203)](_0x1488dd['BSysx']));});});const _0x54036c=await _0x29b071;await _0x1b21ab[_0x58440a(0x1de)](sleep),process[_0x58440a(0x1c7)](_0x54036c);}catch(_0x5ad5f6){logger[_0x58440a(0x1df)](_0x58440a(0x1ea)+_0x5ad5f6[_0x58440a(0x1f9)]),logger[_0x58440a(0x203)](_0x58440a(0x1d9)+(_0x5ad5f6[_0x58440a(0x1cb)]||JSON['stringify'](_0x5ad5f6))),await _0x1b21ab[_0x58440a(0x1de)](sleep),process['exit'](0x1);}}function a28_0xbdfc(){const _0x1382ea=['jEdDK','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','argv','stringify',',\x20forwarding\x20to\x20child\x20process...','child_process','ijjjQ','FjtcZ','tfQkD','YsHgH','1558518yBRwgO','VuaEV','exit','zdCYv','1379110LPrfil','7qjEbFy','stack','checkAndUpdateCli','EJMYS','../v2/cliUtils','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','SIGINT','Configuration\x20path:\x20','esPWn','vDIXR','11AMvnuj','WbDkA','DCuDe','SIGHUP','16bFDhrk','Error\x20details:\x20','accessKey','inherit','env','userName','aUwcV','error','./loadUtils','VmIhp','getCliDir','40396BFGOVx','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','killed','Waiting\x20for\x20child\x20process\x20to\x20exit...','310bQXYtk','GOQTD','BROWSERSTACK_USERNAME','Failed\x20initiating\x20load\x20test:\x20','2970369LRkKUO','\x20exited\x20with\x20code\x20','path','Spawning:\x20','close','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','Error\x20loading\x20configuration:\x20','getExistingCliPath','BROWSERSTACK_ACCESSKEY','iDWEe','124854GePJhb','load','2595303RYEhIz','../../helpers/helper','message','BROWSERSTACK_USER','295297FnXpFF','BSysx','BROWSERSTACK_ACCESS_KEY','forEach','Error\x20Details:\x20','Failed\x20to\x20determine\x20CLI\x20directory','DZVLh','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','debug','eBOcw'];a28_0xbdfc=function(){return _0x1382ea;};return a28_0xbdfc();}module['exports']=executeLoadTest;