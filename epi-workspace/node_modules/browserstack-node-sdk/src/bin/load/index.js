#!/usr/bin/env node
'use strict';function a29_0x4944(){const _0x3b9f8f=['CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','589890nzLHXM','forEach','accessKey','qYhmv','error','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','TtMjv','SIGHUP','Error\x20details:\x20','352330pJomjF','yAaVW','./loadUtils','BROWSERSTACK_USER','7ozahyJ','BROWSERSTACK_ACCESS_KEY','../../helpers/logger','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','HPKJl','Executing\x20load\x20test\x20with\x20arguments:\x20','join','argv','DhVPy',',\x20forwarding\x20to\x20child\x20process...','../../helpers/helper','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','userName','1753982NJgFpV','5186160EFlcfl','close','exports','KpOBE','88956NGrNiI','ZKyhZ','BROWSERSTACK_ACCESSKEY','YxPVo','exit','slice','killed','SIGINT','1020720exEPOL','\x20load\x20','Failed\x20initiating\x20load\x20test:\x20','env','iSWvL','path','rpHsL','stringify','stack','checkAndUpdateCli','SIGTERM','xWVlo','inherit','IZOsh','SIGQUIT','275cxTFmy','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','Configuration\x20path:\x20','message','load','uOZIC','319389ugieJA','debug','csmtc','AIEFy','child_process','80cxfhqU','2inKolp','Spawning:\x20','\x20exited\x20with\x20code\x20','ODDLz'];a29_0x4944=function(){return _0x3b9f8f;};return a29_0x4944();}const a29_0x367858=a29_0x2023;(function(_0x16f151,_0xd03e0f){const _0x355379=a29_0x2023,_0x2391ea=_0x16f151();while(!![]){try{const _0x33397d=-parseInt(_0x355379(0x153))/0x1*(-parseInt(_0x355379(0x172))/0x2)+parseInt(_0x355379(0x14d))/0x3+parseInt(_0x355379(0x177))/0x4*(-parseInt(_0x355379(0x152))/0x5)+-parseInt(_0x355379(0x158))/0x6+parseInt(_0x355379(0x165))/0x7*(-parseInt(_0x355379(0x17f))/0x8)+parseInt(_0x355379(0x173))/0x9+-parseInt(_0x355379(0x161))/0xa*(parseInt(_0x355379(0x147))/0xb);if(_0x33397d===_0xd03e0f)break;else _0x2391ea['push'](_0x2391ea['shift']());}catch(_0x3fd478){_0x2391ea['push'](_0x2391ea['shift']());}}}(a29_0x4944,0xedd33));const {spawn}=require(a29_0x367858(0x151)),path=require(a29_0x367858(0x184)),helper=require(a29_0x367858(0x16f)),CLIUtils=require('../v2/cliUtils'),{getLoadConfigPath,sleep}=require(a29_0x367858(0x163)),logger=require(a29_0x367858(0x167))['winstonLogger'];function a29_0x2023(_0x5002f2,_0x51f581){const _0x494434=a29_0x4944();return a29_0x2023=function(_0x2023c6,_0x17b919){_0x2023c6=_0x2023c6-0x13f;let _0xf65621=_0x494434[_0x2023c6];return _0xf65621;},a29_0x2023(_0x5002f2,_0x51f581);}async function executeLoadTest(_0x4e1343){const _0x108056=a29_0x367858,_0xecc474={'VXtCj':function(_0x3fac04,_0xa4cc69){return _0x3fac04(_0xa4cc69);},'KpOBE':_0x108056(0x174),'xWVlo':'Waiting\x20for\x20child\x20process\x20to\x20exit...','csmtc':_0x108056(0x15d),'iSWvL':function(_0x4f2b6e,_0x2faf93){return _0x4f2b6e(_0x2faf93);},'TtMjv':function(_0x3bf804){return _0x3bf804();},'AIEFy':_0x108056(0x170),'IZOsh':function(_0x1bc2e1){return _0x1bc2e1();},'HPKJl':'Failed\x20to\x20determine\x20CLI\x20directory','YxPVo':function(_0x1d180c){return _0x1d180c();},'qYhmv':_0x108056(0x157),'yAaVW':_0x108056(0x168),'ZKyhZ':function(_0x26bd0){return _0x26bd0();},'WzylD':_0x108056(0x148),'DhVPy':function(_0x14596f,_0x4e1bfa,_0x23b971,_0x5341b0){return _0x14596f(_0x4e1bfa,_0x23b971,_0x5341b0);},'jsTrK':_0x108056(0x14b),'uOZIC':_0x108056(0x144),'XKgMW':_0x108056(0x17e),'ivvHm':_0x108056(0x142),'xiozw':_0x108056(0x146),'rpHsL':_0x108056(0x15f),'ODDLz':function(_0x2f4a63){return _0x2f4a63();}};try{const _0x1e5809=process[_0x108056(0x16c)][_0x108056(0x17c)](0x2),_0x3a5922=_0x1e5809[_0x108056(0x17c)](0x1);logger[_0x108056(0x14e)](_0x108056(0x16a)+_0x3a5922);let _0x1fb36a={};try{logger[_0x108056(0x14e)](_0xecc474[_0x108056(0x14f)]);const _0x1054e3={};_0x1054e3[_0x108056(0x171)]=process['env']['BROWSERSTACK_USERNAME']||process[_0x108056(0x182)][_0x108056(0x164)],_0x1054e3[_0x108056(0x15a)]=process[_0x108056(0x182)][_0x108056(0x166)]||process[_0x108056(0x182)][_0x108056(0x179)],_0x1fb36a=_0x1054e3;if(!_0x1fb36a['userName']||!_0x1fb36a[_0x108056(0x15a)]){const _0x59475d=_0xecc474[_0x108056(0x183)](getLoadConfigPath,_0x4e1343['argv']);logger[_0x108056(0x14e)](_0x108056(0x149)+_0x59475d),_0x59475d&&(_0x1fb36a=helper['readConfig'](_0x59475d));}}catch(_0x4381fc){logger[_0x108056(0x15c)]('Error\x20loading\x20configuration:\x20'+_0x4381fc[_0x108056(0x14a)]),logger[_0x108056(0x14e)](_0x108056(0x160)+(_0x4381fc[_0x108056(0x140)]||JSON['stringify'](_0x4381fc))),await _0xecc474[_0x108056(0x15e)](sleep),process['exit'](0x1);}(!_0x1fb36a['userName']||!_0x1fb36a['accessKey'])&&(logger['error'](_0xecc474[_0x108056(0x150)]),await _0xecc474[_0x108056(0x145)](sleep),process[_0x108056(0x17b)](0x1));const _0x5c993a=CLIUtils['getCliDir']();!_0x5c993a&&(logger[_0x108056(0x15c)](_0xecc474[_0x108056(0x169)]),await _0xecc474[_0x108056(0x17a)](sleep),process[_0x108056(0x17b)](0x1));let _0x46d845=CLIUtils['getExistingCliPath'](_0x5c993a);try{!_0x46d845?(logger[_0x108056(0x14e)](_0xecc474[_0x108056(0x15b)]),_0x46d845=await CLIUtils[_0x108056(0x141)]('',_0x5c993a,_0x1fb36a)):(logger[_0x108056(0x14e)](_0xecc474[_0x108056(0x162)]),_0x46d845=await CLIUtils[_0x108056(0x141)](_0x46d845,_0x5c993a,_0x1fb36a));}catch(_0x1d0503){logger[_0x108056(0x15c)](_0xecc474[_0x108056(0x150)]),logger[_0x108056(0x14e)]('Error\x20Details:\x20'+(_0x1d0503[_0x108056(0x140)]||JSON['stringify'](_0x1d0503))),await _0xecc474[_0x108056(0x178)](sleep),process[_0x108056(0x17b)](0x1);}!_0x46d845&&(logger[_0x108056(0x15c)](_0xecc474['AIEFy']),logger[_0x108056(0x14e)](_0xecc474['WzylD']),await _0xecc474[_0x108056(0x145)](sleep),process['exit'](0x1));logger['debug'](_0x108056(0x154)+_0x46d845+_0x108056(0x180)+_0x3a5922[_0x108056(0x16b)]('\x20'));const _0x1ac90a=_0xecc474[_0x108056(0x16d)](spawn,_0x46d845,[_0xecc474['jsTrK'],..._0x3a5922],{'stdio':_0xecc474[_0x108056(0x14c)]});let _0x28169e=![];const _0x32abb9=new Promise(_0x3d78f8=>{const _0x160cf5=_0x108056,_0x582c8d={'ccFEJ':function(_0x5829a6,_0x3057bb){return _0xecc474['VXtCj'](_0x5829a6,_0x3057bb);}};_0x1ac90a['on'](_0xecc474[_0x160cf5(0x176)],_0x51cc24=>{const _0x379f9e=_0x160cf5;logger[_0x379f9e(0x14e)](_0x46d845+_0x379f9e(0x155)+_0x51cc24),_0x582c8d['ccFEJ'](_0x3d78f8,_0x51cc24);});});[_0xecc474['XKgMW'],_0xecc474['ivvHm'],_0xecc474['xiozw'],_0xecc474[_0x108056(0x185)]][_0x108056(0x159)](_0x378c69=>{process['on'](_0x378c69,()=>{const _0x1bcc09=a29_0x2023;if(_0x28169e)return;_0x28169e=!![],logger[_0x1bcc09(0x14e)]('Received\x20'+_0x378c69+_0x1bcc09(0x16e)),_0x1ac90a&&!_0x1ac90a[_0x1bcc09(0x17d)]&&(_0x1ac90a['kill'](_0x378c69),logger[_0x1bcc09(0x14e)](_0xecc474[_0x1bcc09(0x143)]));});});const _0x197e04=await _0x32abb9;await _0xecc474[_0x108056(0x156)](sleep),process[_0x108056(0x17b)](_0x197e04);}catch(_0x1ce68a){logger[_0x108056(0x15c)](_0x108056(0x181)+_0x1ce68a[_0x108056(0x14a)]),logger[_0x108056(0x14e)](_0x108056(0x160)+(_0x1ce68a['stack']||JSON[_0x108056(0x13f)](_0x1ce68a))),await _0xecc474[_0x108056(0x178)](sleep),process[_0x108056(0x17b)](0x1);}}module[a29_0x367858(0x175)]=executeLoadTest;