#!/usr/bin/env node
'use strict';const a29_0x147061=a29_0x442d;(function(_0x44d88e,_0x204247){const _0x2938c5=a29_0x442d,_0x35d610=_0x44d88e();while(!![]){try{const _0x438a7b=parseInt(_0x2938c5(0x12a))/0x1+-parseInt(_0x2938c5(0x12f))/0x2+parseInt(_0x2938c5(0x103))/0x3+-parseInt(_0x2938c5(0x134))/0x4+parseInt(_0x2938c5(0x120))/0x5*(parseInt(_0x2938c5(0x100))/0x6)+parseInt(_0x2938c5(0x13b))/0x7+parseInt(_0x2938c5(0xfb))/0x8;if(_0x438a7b===_0x204247)break;else _0x35d610['push'](_0x35d610['shift']());}catch(_0x5e20a0){_0x35d610['push'](_0x35d610['shift']());}}}(a29_0x892f,0xe9145));function a29_0x892f(){const _0x310dbb=['Waiting\x20for\x20child\x20process\x20to\x20exit...','\x20load\x20','load','Error\x20loading\x20configuration:\x20','SIGQUIT','tQGHg','SIGINT','rxdih','stack','debug','checkAndUpdateCli','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','WznCZ','getExistingCliPath','BROWSERSTACK_ACCESSKEY','winstonLogger','argv','aPYbe','BROWSERSTACK_USERNAME','wVvUg','stringify','cSslG','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','\x20exited\x20with\x20code\x20','51095brqHNs','xFdop','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','BROWSERSTACK_ACCESS_KEY','../../helpers/helper','message','sntpI','Failed\x20initiating\x20load\x20test:\x20','error','readConfig','505629JlFDew','SIGHUP',',\x20forwarding\x20to\x20child\x20process...','Received\x20','ejSRI','3081554eAUzXy','../v2/cliUtils','NzAvM','../../helpers/logger','exit','4367612vBIXjl','forEach','userName','SIGTERM','igBhn','killed','accessKey','2209802gOTwWb','close','env','kill','Error\x20Details:\x20','9972216EeGrHJ','Configuration\x20path:\x20','otTLV','Nhckq','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','558zLvuGZ','VwJMv','path','1707492GSFuci','Error\x20details:\x20','slice','uPcGT','gHqZg'];a29_0x892f=function(){return _0x310dbb;};return a29_0x892f();}function a29_0x442d(_0x38e14d,_0x4b60ff){const _0x892f42=a29_0x892f();return a29_0x442d=function(_0x442db3,_0x4d612e){_0x442db3=_0x442db3-0xfa;let _0x4266f2=_0x892f42[_0x442db3];return _0x4266f2;},a29_0x442d(_0x38e14d,_0x4b60ff);}const {spawn}=require('child_process'),path=require(a29_0x147061(0x102)),helper=require(a29_0x147061(0x124)),CLIUtils=require(a29_0x147061(0x130)),{getLoadConfigPath,sleep}=require('./loadUtils'),logger=require(a29_0x147061(0x132))[a29_0x147061(0x117)];async function executeLoadTest(_0x1974d2){const _0x23d76c=a29_0x147061,_0x6aa011={'uPcGT':function(_0x25dac2,_0x95cd30){return _0x25dac2(_0x95cd30);},'wVvUg':_0x23d76c(0x13c),'tQGHg':_0x23d76c(0x108),'otTLV':_0x23d76c(0x113),'ySXXM':function(_0x22f7b2,_0x4c2560){return _0x22f7b2(_0x4c2560);},'rxdih':function(_0xcb7d6f){return _0xcb7d6f();},'xFdop':_0x23d76c(0x11e),'QuhVF':'Failed\x20to\x20determine\x20CLI\x20directory','igBhn':'CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','gYJiP':_0x23d76c(0x122),'ejSRI':_0x23d76c(0xff),'sntpI':function(_0x25a690){return _0x25a690();},'TZpaX':function(_0x5ba026,_0x2dcf54,_0x36ea2e,_0x397604){return _0x5ba026(_0x2dcf54,_0x36ea2e,_0x397604);},'aPYbe':_0x23d76c(0x10a),'NzAvM':'inherit','Nhckq':_0x23d76c(0x10e),'gHqZg':_0x23d76c(0x137),'WznCZ':_0x23d76c(0x10c),'cSslG':_0x23d76c(0x12b),'gXDNT':function(_0x5a1bd6){return _0x5a1bd6();}};try{const _0x251c94=process[_0x23d76c(0x118)][_0x23d76c(0x105)](0x2),_0x53513d=_0x251c94['slice'](0x1);logger[_0x23d76c(0x111)]('Executing\x20load\x20test\x20with\x20arguments:\x20'+_0x53513d);let _0x10b276={};try{logger[_0x23d76c(0x111)](_0x6aa011[_0x23d76c(0xfd)]);const _0x1d1ea6={};_0x1d1ea6[_0x23d76c(0x136)]=process[_0x23d76c(0x13d)][_0x23d76c(0x11a)]||process['env']['BROWSERSTACK_USER'],_0x1d1ea6['accessKey']=process['env'][_0x23d76c(0x123)]||process['env'][_0x23d76c(0x116)],_0x10b276=_0x1d1ea6;if(!_0x10b276[_0x23d76c(0x136)]||!_0x10b276['accessKey']){const _0x56393f=_0x6aa011['ySXXM'](getLoadConfigPath,_0x1974d2['argv']);logger['debug'](_0x23d76c(0xfc)+_0x56393f),_0x56393f&&(_0x10b276=helper[_0x23d76c(0x129)](_0x56393f));}}catch(_0x341c1f){logger[_0x23d76c(0x128)](_0x23d76c(0x10b)+_0x341c1f[_0x23d76c(0x125)]),logger[_0x23d76c(0x111)](_0x23d76c(0x104)+(_0x341c1f[_0x23d76c(0x110)]||JSON[_0x23d76c(0x11c)](_0x341c1f))),await _0x6aa011[_0x23d76c(0x10f)](sleep),process[_0x23d76c(0x133)](0x1);}(!_0x10b276['userName']||!_0x10b276[_0x23d76c(0x13a)])&&(logger['error'](_0x6aa011[_0x23d76c(0x121)]),await _0x6aa011[_0x23d76c(0x10f)](sleep),process[_0x23d76c(0x133)](0x1));const _0xd8aa9=CLIUtils['getCliDir']();!_0xd8aa9&&(logger[_0x23d76c(0x128)](_0x6aa011['QuhVF']),await _0x6aa011[_0x23d76c(0x10f)](sleep),process[_0x23d76c(0x133)](0x1));let _0x3029ea=CLIUtils[_0x23d76c(0x115)](_0xd8aa9);try{!_0x3029ea?(logger[_0x23d76c(0x111)](_0x6aa011[_0x23d76c(0x138)]),_0x3029ea=await CLIUtils[_0x23d76c(0x112)]('',_0xd8aa9,_0x10b276)):(logger['debug'](_0x6aa011['gYJiP']),_0x3029ea=await CLIUtils['checkAndUpdateCli'](_0x3029ea,_0xd8aa9,_0x10b276));}catch(_0xe18230){logger[_0x23d76c(0x128)](_0x6aa011[_0x23d76c(0x121)]),logger[_0x23d76c(0x111)](_0x23d76c(0xfa)+(_0xe18230[_0x23d76c(0x110)]||JSON['stringify'](_0xe18230))),await _0x6aa011['rxdih'](sleep),process[_0x23d76c(0x133)](0x1);}!_0x3029ea&&(logger[_0x23d76c(0x128)](_0x6aa011[_0x23d76c(0x121)]),logger['debug'](_0x6aa011[_0x23d76c(0x12e)]),await _0x6aa011[_0x23d76c(0x126)](sleep),process[_0x23d76c(0x133)](0x1));logger['debug']('Spawning:\x20'+_0x3029ea+_0x23d76c(0x109)+_0x53513d['join']('\x20'));const _0x5acfb6=_0x6aa011['TZpaX'](spawn,_0x3029ea,[_0x6aa011[_0x23d76c(0x119)],..._0x53513d],{'stdio':_0x6aa011[_0x23d76c(0x131)]});let _0x18fc68=![];const _0x18a5f8=new Promise(_0x33bcd8=>{const _0x37f837=_0x23d76c;_0x5acfb6['on'](_0x6aa011[_0x37f837(0x11b)],_0x14ff6d=>{const _0x10911a=_0x37f837;logger['debug'](_0x3029ea+_0x10911a(0x11f)+_0x14ff6d),_0x6aa011[_0x10911a(0x106)](_0x33bcd8,_0x14ff6d);});});[_0x6aa011[_0x23d76c(0xfe)],_0x6aa011[_0x23d76c(0x107)],_0x6aa011[_0x23d76c(0x114)],_0x6aa011[_0x23d76c(0x11d)]][_0x23d76c(0x135)](_0x33f202=>{const _0x412537=_0x23d76c,_0x7aaf62={};_0x7aaf62['VwJMv']=_0x6aa011[_0x412537(0x10d)];const _0x182980=_0x7aaf62;process['on'](_0x33f202,()=>{const _0x16be31=_0x412537;if(_0x18fc68)return;_0x18fc68=!![],logger[_0x16be31(0x111)](_0x16be31(0x12d)+_0x33f202+_0x16be31(0x12c)),_0x5acfb6&&!_0x5acfb6[_0x16be31(0x139)]&&(_0x5acfb6[_0x16be31(0x13e)](_0x33f202),logger[_0x16be31(0x111)](_0x182980[_0x16be31(0x101)]));});});const _0x3608a2=await _0x18a5f8;await _0x6aa011['gXDNT'](sleep),process[_0x23d76c(0x133)](_0x3608a2);}catch(_0xdfd578){logger[_0x23d76c(0x128)](_0x23d76c(0x127)+_0xdfd578[_0x23d76c(0x125)]),logger[_0x23d76c(0x111)](_0x23d76c(0x104)+(_0xdfd578[_0x23d76c(0x110)]||JSON[_0x23d76c(0x11c)](_0xdfd578))),await _0x6aa011[_0x23d76c(0x10f)](sleep),process[_0x23d76c(0x133)](0x1);}}module['exports']=executeLoadTest;