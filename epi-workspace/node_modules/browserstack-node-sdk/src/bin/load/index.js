#!/usr/bin/env node
'use strict';function a28_0xac99(){const _0x569807=['Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','2565330WbTOcj','accessKey','874376MgFyua','3775275RKoUzU','Executing\x20load\x20test\x20with\x20arguments:\x20','Configuration\x20path:\x20',',\x20forwarding\x20to\x20child\x20process...','1338836YlkeDO','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','sngio','BROWSERSTACK_ACCESS_KEY','argv','2725336ZLYser','gDRQo','child_process','forEach','oIhAe','path','Xlvhu','inherit','userName','checkAndUpdateCli','pBraU','SIGHUP','Shuhb','nYVuL','IPuIR','load','winstonLogger','fcGJJ','rLdKt','env','kill','GDEhS','SIGTERM','BROWSERSTACK_ACCESSKEY','2330010uCwBMI','stack','exit','Wgskw','NLwZy','BROWSERSTACK_USERNAME','debug','Waiting\x20for\x20child\x20process\x20to\x20exit...','SIGINT','slice','../../helpers/helper','getCliDir','Spawning:\x20','readConfig','BROWSERSTACK_USER','close','SIGQUIT','208602bdyUGL','Error\x20details:\x20','qoYZv','error','Failed\x20initiating\x20load\x20test:\x20','stringify','./loadUtils','Error\x20loading\x20configuration:\x20','NaKnl','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','message'];a28_0xac99=function(){return _0x569807;};return a28_0xac99();}const a28_0x5b3d1f=a28_0x536a;(function(_0x328664,_0x3d1752){const _0x251973=a28_0x536a,_0x290cb3=_0x328664();while(!![]){try{const _0x593962=parseInt(_0x251973(0x1ec))/0x1+parseInt(_0x251973(0x1f1))/0x2+-parseInt(_0x251973(0x21f))/0x3+-parseInt(_0x251973(0x1f6))/0x4+-parseInt(_0x251973(0x20e))/0x5+-parseInt(_0x251973(0x22b))/0x6+parseInt(_0x251973(0x1ed))/0x7;if(_0x593962===_0x3d1752)break;else _0x290cb3['push'](_0x290cb3['shift']());}catch(_0xef68db){_0x290cb3['push'](_0x290cb3['shift']());}}}(a28_0xac99,0x6b1a6));const {spawn}=require(a28_0x5b3d1f(0x1f8)),path=require(a28_0x5b3d1f(0x1fb)),helper=require(a28_0x5b3d1f(0x218)),CLIUtils=require('../v2/cliUtils'),{getLoadConfigPath,sleep}=require(a28_0x5b3d1f(0x225)),logger=require('../../helpers/logger')[a28_0x5b3d1f(0x206)];function a28_0x536a(_0x43e6d6,_0x567fbd){const _0xac99a6=a28_0xac99();return a28_0x536a=function(_0x536a79,_0x3afa43){_0x536a79=_0x536a79-0x1ec;let _0x2c56be=_0xac99a6[_0x536a79];return _0x2c56be;},a28_0x536a(_0x43e6d6,_0x567fbd);}async function executeLoadTest(_0x20dff0){const _0x54e0fc=a28_0x5b3d1f,_0x1ae6ba={'lwTtz':function(_0x45e535,_0x4abc40){return _0x45e535(_0x4abc40);},'EpGvn':_0x54e0fc(0x21d),'rLdKt':_0x54e0fc(0x215),'YJdBe':_0x54e0fc(0x22a),'nYVuL':function(_0x177938,_0x61b5ed){return _0x177938(_0x61b5ed);},'Xlvhu':function(_0x1511c5){return _0x1511c5();},'Shuhb':'Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','pBraU':'Failed\x20to\x20determine\x20CLI\x20directory','oIhAe':function(_0x2815a4){return _0x2815a4();},'WlvHP':_0x54e0fc(0x228),'NaKnl':'CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','xEwKT':function(_0x202bec){return _0x202bec();},'GDEhS':_0x54e0fc(0x1f2),'NLwZy':function(_0x34934d,_0xedaf4c,_0x210d06,_0x5e4d76){return _0x34934d(_0xedaf4c,_0x210d06,_0x5e4d76);},'fcGJJ':_0x54e0fc(0x205),'gDRQo':_0x54e0fc(0x1fd),'qoYZv':_0x54e0fc(0x216),'sngio':_0x54e0fc(0x20c),'IPuIR':_0x54e0fc(0x21e),'Wgskw':_0x54e0fc(0x201),'uEwLu':function(_0x378b70){return _0x378b70();}};try{const _0x3286ef=process['argv'][_0x54e0fc(0x217)](0x2),_0x53428a=_0x3286ef['slice'](0x1);logger[_0x54e0fc(0x214)](_0x54e0fc(0x1ee)+_0x53428a);let _0x574e5d={};try{logger[_0x54e0fc(0x214)](_0x1ae6ba['YJdBe']);const _0x590495={};_0x590495[_0x54e0fc(0x1fe)]=process[_0x54e0fc(0x209)][_0x54e0fc(0x213)]||process[_0x54e0fc(0x209)][_0x54e0fc(0x21c)],_0x590495[_0x54e0fc(0x22c)]=process[_0x54e0fc(0x209)][_0x54e0fc(0x1f4)]||process[_0x54e0fc(0x209)][_0x54e0fc(0x20d)],_0x574e5d=_0x590495;if(!_0x574e5d[_0x54e0fc(0x1fe)]||!_0x574e5d['accessKey']){const _0x4a9915=_0x1ae6ba[_0x54e0fc(0x203)](getLoadConfigPath,_0x20dff0[_0x54e0fc(0x1f5)]);logger['debug'](_0x54e0fc(0x1ef)+_0x4a9915),_0x4a9915&&(_0x574e5d=helper[_0x54e0fc(0x21b)](_0x4a9915));}}catch(_0x17201e){logger[_0x54e0fc(0x222)](_0x54e0fc(0x226)+_0x17201e['message']),logger[_0x54e0fc(0x214)](_0x54e0fc(0x220)+(_0x17201e[_0x54e0fc(0x20f)]||JSON['stringify'](_0x17201e))),await _0x1ae6ba[_0x54e0fc(0x1fc)](sleep),process['exit'](0x1);}(!_0x574e5d[_0x54e0fc(0x1fe)]||!_0x574e5d[_0x54e0fc(0x22c)])&&(logger['error'](_0x1ae6ba[_0x54e0fc(0x202)]),await _0x1ae6ba['Xlvhu'](sleep),process[_0x54e0fc(0x210)](0x1));const _0x3b1fa3=CLIUtils[_0x54e0fc(0x219)]();!_0x3b1fa3&&(logger['error'](_0x1ae6ba[_0x54e0fc(0x200)]),await _0x1ae6ba[_0x54e0fc(0x1fa)](sleep),process['exit'](0x1));let _0x4911ef=CLIUtils['getExistingCliPath'](_0x3b1fa3);try{!_0x4911ef?(logger[_0x54e0fc(0x214)](_0x1ae6ba['WlvHP']),_0x4911ef=await CLIUtils['checkAndUpdateCli']('',_0x3b1fa3,_0x574e5d)):(logger[_0x54e0fc(0x214)](_0x1ae6ba[_0x54e0fc(0x227)]),_0x4911ef=await CLIUtils[_0x54e0fc(0x1ff)](_0x4911ef,_0x3b1fa3,_0x574e5d));}catch(_0xdd8155){logger[_0x54e0fc(0x222)](_0x1ae6ba[_0x54e0fc(0x202)]),logger['debug']('Error\x20Details:\x20'+(_0xdd8155[_0x54e0fc(0x20f)]||JSON[_0x54e0fc(0x224)](_0xdd8155))),await _0x1ae6ba['xEwKT'](sleep),process['exit'](0x1);}!_0x4911ef&&(logger[_0x54e0fc(0x222)](_0x1ae6ba[_0x54e0fc(0x202)]),logger[_0x54e0fc(0x214)](_0x1ae6ba[_0x54e0fc(0x20b)]),await _0x1ae6ba[_0x54e0fc(0x1fc)](sleep),process['exit'](0x1));logger[_0x54e0fc(0x214)](_0x54e0fc(0x21a)+_0x4911ef+'\x20load\x20'+_0x53428a['join']('\x20'));const _0x176589=_0x1ae6ba[_0x54e0fc(0x212)](spawn,_0x4911ef,[_0x1ae6ba[_0x54e0fc(0x207)],..._0x53428a],{'stdio':_0x1ae6ba[_0x54e0fc(0x1f7)]});let _0x45cdf7=![];const _0x4c9f53=new Promise(_0x29c17b=>{const _0x493d9d={'bDOQG':function(_0x6772ff,_0x2faabd){return _0x1ae6ba['lwTtz'](_0x6772ff,_0x2faabd);}};_0x176589['on'](_0x1ae6ba['EpGvn'],_0x38b0dd=>{const _0x23b613=a28_0x536a;logger[_0x23b613(0x214)](_0x4911ef+'\x20exited\x20with\x20code\x20'+_0x38b0dd),_0x493d9d['bDOQG'](_0x29c17b,_0x38b0dd);});});[_0x1ae6ba[_0x54e0fc(0x221)],_0x1ae6ba[_0x54e0fc(0x1f3)],_0x1ae6ba[_0x54e0fc(0x204)],_0x1ae6ba[_0x54e0fc(0x211)]][_0x54e0fc(0x1f9)](_0x358f4e=>{process['on'](_0x358f4e,()=>{const _0x1237bc=a28_0x536a;if(_0x45cdf7)return;_0x45cdf7=!![],logger[_0x1237bc(0x214)]('Received\x20'+_0x358f4e+_0x1237bc(0x1f0)),_0x176589&&!_0x176589['killed']&&(_0x176589[_0x1237bc(0x20a)](_0x358f4e),logger[_0x1237bc(0x214)](_0x1ae6ba[_0x1237bc(0x208)]));});});const _0x525dca=await _0x4c9f53;await _0x1ae6ba['uEwLu'](sleep),process['exit'](_0x525dca);}catch(_0x1efd82){logger[_0x54e0fc(0x222)](_0x54e0fc(0x223)+_0x1efd82[_0x54e0fc(0x229)]),logger[_0x54e0fc(0x214)]('Error\x20details:\x20'+(_0x1efd82[_0x54e0fc(0x20f)]||JSON[_0x54e0fc(0x224)](_0x1efd82))),await _0x1ae6ba[_0x54e0fc(0x1fc)](sleep),process[_0x54e0fc(0x210)](0x1);}}module['exports']=executeLoadTest;