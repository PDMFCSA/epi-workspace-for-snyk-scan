#!/usr/bin/env node
'use strict';const a28_0x5010dd=a28_0x525b;(function(_0x3ca585,_0x4a4765){const _0x53d912=a28_0x525b,_0x50d293=_0x3ca585();while(!![]){try{const _0x5bf47d=-parseInt(_0x53d912(0x1a1))/0x1+-parseInt(_0x53d912(0x1ae))/0x2+-parseInt(_0x53d912(0x18f))/0x3+parseInt(_0x53d912(0x174))/0x4*(parseInt(_0x53d912(0x1a0))/0x5)+parseInt(_0x53d912(0x175))/0x6*(parseInt(_0x53d912(0x1a2))/0x7)+-parseInt(_0x53d912(0x173))/0x8*(parseInt(_0x53d912(0x19b))/0x9)+parseInt(_0x53d912(0x195))/0xa;if(_0x5bf47d===_0x4a4765)break;else _0x50d293['push'](_0x50d293['shift']());}catch(_0x333da6){_0x50d293['push'](_0x50d293['shift']());}}}(a28_0x2532,0x1ea81));function a28_0x525b(_0xecf74f,_0x411ad4){const _0x2532c9=a28_0x2532();return a28_0x525b=function(_0x525bce,_0x2cecf0){_0x525bce=_0x525bce-0x173;let _0xee3a9e=_0x2532c9[_0x525bce];return _0xee3a9e;},a28_0x525b(_0xecf74f,_0x411ad4);}const {spawn}=require(a28_0x5010dd(0x19a)),path=require(a28_0x5010dd(0x1a9)),helper=require(a28_0x5010dd(0x179)),CLIUtils=require(a28_0x5010dd(0x189)),{getLoadConfigPath,sleep}=require(a28_0x5010dd(0x181)),logger=require('../../helpers/logger')['winstonLogger'];function a28_0x2532(){const _0x4fc718=['Ntdng','close','38646XYeKIr','env','killed','stringify','cTHsl','Failed\x20initiating\x20load\x20test:\x20','BROWSERSTACK_USER','load','1817936flSKiP','11264iMUBzb','1055118lzXkrM',',\x20forwarding\x20to\x20child\x20process...','stack','SIGQUIT','../../helpers/helper','getCliDir','inherit','LUaFO','\x20exited\x20with\x20code\x20','SIGTERM','SIGHUP','Executing\x20load\x20test\x20with\x20arguments:\x20','./loadUtils','forEach','getExistingCliPath','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','BROWSERSTACK_ACCESSKEY','exit','Waiting\x20for\x20child\x20process\x20to\x20exit...','accessKey','../v2/cliUtils','Error\x20details:\x20','userName','vBwXL','\x20load\x20','Spawning:\x20','320421MtTLjo','OELLt','zSlsa','slice','debug','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','2491510eTaNaG','Received\x20','join','exports','duQvT','child_process','9YtcwnD','Failed\x20to\x20determine\x20CLI\x20directory','readConfig','Error\x20loading\x20configuration:\x20','error','415jllSkd','179791lsYCvE','7bSUOcd','LmEqx','EFhnG','kill','snqkl','BROWSERSTACK_ACCESS_KEY','SIGINT','path','cFaCK','message'];a28_0x2532=function(){return _0x4fc718;};return a28_0x2532();}async function executeLoadTest(_0x3578d1){const _0x32ae9c=a28_0x5010dd,_0x45574e={'WhtEM':function(_0x4cb610,_0x5ca7d4){return _0x4cb610(_0x5ca7d4);},'QTKFe':_0x32ae9c(0x1ad),'NKxLL':_0x32ae9c(0x187),'kUBId':'Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','LUaFO':function(_0x2f8ec5,_0x12f445){return _0x2f8ec5(_0x12f445);},'vBwXL':function(_0x5d3a5f){return _0x5d3a5f();},'Ntdng':_0x32ae9c(0x194),'vZIaa':function(_0x33f42e){return _0x33f42e();},'gkDZE':_0x32ae9c(0x19c),'cTHsl':function(_0x329b6b){return _0x329b6b();},'zSlsa':_0x32ae9c(0x184),'OELLt':'CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','BxjjG':'Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','uklmq':function(_0x43408d){return _0x43408d();},'lBtMx':function(_0x36f821,_0x118824,_0x4a3104,_0xe126ef){return _0x36f821(_0x118824,_0x4a3104,_0xe126ef);},'cFaCK':_0x32ae9c(0x1b5),'snqkl':_0x32ae9c(0x17b),'jhcdD':_0x32ae9c(0x1a8),'duQvT':_0x32ae9c(0x17e),'EFhnG':_0x32ae9c(0x178),'LmEqx':_0x32ae9c(0x17f),'xplWU':function(_0x2fae97){return _0x2fae97();},'jyjcB':function(_0x45a82c){return _0x45a82c();}};try{const _0x5afc72=process['argv'][_0x32ae9c(0x192)](0x2),_0x45b8bc=_0x5afc72['slice'](0x1);logger[_0x32ae9c(0x193)](_0x32ae9c(0x180)+_0x45b8bc);let _0x2e25cb={};try{logger[_0x32ae9c(0x193)](_0x45574e['kUBId']);const _0x51ad15={};_0x51ad15[_0x32ae9c(0x18b)]=process['env']['BROWSERSTACK_USERNAME']||process[_0x32ae9c(0x1af)][_0x32ae9c(0x1b4)],_0x51ad15[_0x32ae9c(0x188)]=process[_0x32ae9c(0x1af)][_0x32ae9c(0x1a7)]||process[_0x32ae9c(0x1af)][_0x32ae9c(0x185)],_0x2e25cb=_0x51ad15;if(!_0x2e25cb['userName']||!_0x2e25cb[_0x32ae9c(0x188)]){const _0x485206=_0x45574e[_0x32ae9c(0x17c)](getLoadConfigPath,_0x3578d1['argv']);logger[_0x32ae9c(0x193)]('Configuration\x20path:\x20'+_0x485206),_0x485206&&(_0x2e25cb=helper[_0x32ae9c(0x19d)](_0x485206));}}catch(_0x4e9587){logger[_0x32ae9c(0x19f)](_0x32ae9c(0x19e)+_0x4e9587[_0x32ae9c(0x1ab)]),logger[_0x32ae9c(0x193)](_0x32ae9c(0x18a)+(_0x4e9587[_0x32ae9c(0x177)]||JSON[_0x32ae9c(0x1b1)](_0x4e9587))),await _0x45574e[_0x32ae9c(0x18c)](sleep),process[_0x32ae9c(0x186)](0x1);}(!_0x2e25cb[_0x32ae9c(0x18b)]||!_0x2e25cb[_0x32ae9c(0x188)])&&(logger[_0x32ae9c(0x19f)](_0x45574e[_0x32ae9c(0x1ac)]),await _0x45574e['vZIaa'](sleep),process[_0x32ae9c(0x186)](0x1));const _0x3ab464=CLIUtils[_0x32ae9c(0x17a)]();!_0x3ab464&&(logger[_0x32ae9c(0x19f)](_0x45574e['gkDZE']),await _0x45574e['cTHsl'](sleep),process['exit'](0x1));let _0x229e4b=CLIUtils[_0x32ae9c(0x183)](_0x3ab464);try{!_0x229e4b?(logger[_0x32ae9c(0x193)](_0x45574e[_0x32ae9c(0x191)]),_0x229e4b=await CLIUtils['checkAndUpdateCli']('',_0x3ab464,_0x2e25cb)):(logger['debug'](_0x45574e[_0x32ae9c(0x190)]),_0x229e4b=await CLIUtils['checkAndUpdateCli'](_0x229e4b,_0x3ab464,_0x2e25cb));}catch(_0x58dac2){logger[_0x32ae9c(0x19f)](_0x45574e[_0x32ae9c(0x1ac)]),logger[_0x32ae9c(0x193)]('Error\x20Details:\x20'+(_0x58dac2[_0x32ae9c(0x177)]||JSON[_0x32ae9c(0x1b1)](_0x58dac2))),await _0x45574e[_0x32ae9c(0x1b2)](sleep),process[_0x32ae9c(0x186)](0x1);}!_0x229e4b&&(logger['error'](_0x45574e[_0x32ae9c(0x1ac)]),logger[_0x32ae9c(0x193)](_0x45574e['BxjjG']),await _0x45574e['uklmq'](sleep),process[_0x32ae9c(0x186)](0x1));logger[_0x32ae9c(0x193)](_0x32ae9c(0x18e)+_0x229e4b+_0x32ae9c(0x18d)+_0x45b8bc[_0x32ae9c(0x197)]('\x20'));const _0x385f06=_0x45574e['lBtMx'](spawn,_0x229e4b,[_0x45574e[_0x32ae9c(0x1aa)],..._0x45b8bc],{'stdio':_0x45574e[_0x32ae9c(0x1a6)]});let _0x3795d3=![];const _0x35cd41=new Promise(_0x3d5e6d=>{const _0x3e6301={'FCJKV':function(_0x4c52ae,_0x1947e9){return _0x45574e['WhtEM'](_0x4c52ae,_0x1947e9);}};_0x385f06['on'](_0x45574e['QTKFe'],_0xe5424c=>{const _0x58a901=a28_0x525b;logger[_0x58a901(0x193)](_0x229e4b+_0x58a901(0x17d)+_0xe5424c),_0x3e6301['FCJKV'](_0x3d5e6d,_0xe5424c);});});[_0x45574e['jhcdD'],_0x45574e[_0x32ae9c(0x199)],_0x45574e[_0x32ae9c(0x1a4)],_0x45574e[_0x32ae9c(0x1a3)]][_0x32ae9c(0x182)](_0x1e3c30=>{process['on'](_0x1e3c30,()=>{const _0x3c70ad=a28_0x525b;if(_0x3795d3)return;_0x3795d3=!![],logger[_0x3c70ad(0x193)](_0x3c70ad(0x196)+_0x1e3c30+_0x3c70ad(0x176)),_0x385f06&&!_0x385f06[_0x3c70ad(0x1b0)]&&(_0x385f06[_0x3c70ad(0x1a5)](_0x1e3c30),logger[_0x3c70ad(0x193)](_0x45574e['NKxLL']));});});const _0x4da23c=await _0x35cd41;await _0x45574e['xplWU'](sleep),process[_0x32ae9c(0x186)](_0x4da23c);}catch(_0x32b96b){logger[_0x32ae9c(0x19f)](_0x32ae9c(0x1b3)+_0x32b96b[_0x32ae9c(0x1ab)]),logger[_0x32ae9c(0x193)](_0x32ae9c(0x18a)+(_0x32b96b['stack']||JSON[_0x32ae9c(0x1b1)](_0x32b96b))),await _0x45574e['jyjcB'](sleep),process['exit'](0x1);}}module[a28_0x5010dd(0x198)]=executeLoadTest;