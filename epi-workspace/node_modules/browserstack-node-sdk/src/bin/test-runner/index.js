const a46_0x160574=a46_0x106e;function a46_0x45da(){const _0x53651c=['getWorkers','3375480TKaGYy','parallelCucumberRun','6633834VdZDgx','test-file-success','iQJhu','platforms','file','platform-run-success','BoOBM','../../helpers/test-observability/utils','p-limit','zbNtZ','eXnpC','gOPYi','VYvCb','idpLa','Exception\x20in\x20sending\x20worker\x20message\x20','Running\x20','getStderr','AQDzN','923661qrwhti','push','LKYJF','platform','UrJUb','stdout','worker','4iJewIs','emit','log','sHHNR','cWFnT','eRnlR','resolve','map','./testWorker.js','NSJzW','configuration','pipe','all','eDiuW','Wdweg','350AEoQMJ','getStdout','test-file-start','RsUlB','_workerPool','then','lZzGP','error','end','dqBqx','sftiD','312440jTKmHG','test-file-failure','2KvhYYN','failureCount','7501472wHQrHc','fKnQP','BxYgj','mhWgA','Workers\x20failed\x20to\x20exit\x20gracefully','234239yiSAEb','Exception\x20in\x20adding\x20custom\x20message\x20channel\x20','parallelVanillaRun','vanillaWorker','FlMRy','wXaPx','exitCode','debug','UyHPJ','info','exit','10234679OpgypN','cbKxT','Exception\x20in\x20stop\x20build\x20request\x20to\x20Testhub\x20:\x20','cTiEx','platform-run-start','_child','UgjKn','parallelTestRun','json','eWupM','stop','results','Worker','\x20for','../../helpers/testhub/testhubHandler','stderr','SDK_SETUP','EVENTS','platform-run-failure','VeZKh','send','worker_threads'];a46_0x45da=function(){return _0x53651c;};return a46_0x45da();}(function(_0x443f3f,_0x2c6e5f){const _0x217378=a46_0x106e,_0x2f2195=_0x443f3f();while(!![]){try{const _0x22f76d=-parseInt(_0x217378(0x10b))/0x1*(parseInt(_0x217378(0x104))/0x2)+parseInt(_0x217378(0x12d))/0x3*(parseInt(_0x217378(0xe8))/0x4)+-parseInt(_0x217378(0x102))/0x5+parseInt(_0x217378(0x12f))/0x6+parseInt(_0x217378(0x116))/0x7+parseInt(_0x217378(0x106))/0x8+-parseInt(_0x217378(0x141))/0x9*(parseInt(_0x217378(0xf7))/0xa);if(_0x22f76d===_0x2c6e5f)break;else _0x2f2195['push'](_0x2f2195['shift']());}catch(_0x95702a){_0x2f2195['push'](_0x2f2195['shift']());}}}(a46_0x45da,0xb51ce));const Worker=require('jest-worker')[a46_0x160574(0x122)],Emittery=require('emittery'),pLimit=require(a46_0x160574(0x137)),{parentPort}=require(a46_0x160574(0x12b)),util=require('util'),logger=require('../../helpers/logger')['winstonLogger'],PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require('../../helpers/performance/constants')[a46_0x160574(0x127)],{debug}=require(a46_0x160574(0x136)),TestHubHandler=require(a46_0x160574(0x124));function a46_0x106e(_0x6dded8,_0x4f6efa){const _0x45da58=a46_0x45da();return a46_0x106e=function(_0x106e6b,_0x2d8848){_0x106e6b=_0x106e6b-0xe5;let _0x4114c4=_0x45da58[_0x106e6b];return _0x4114c4;},a46_0x106e(_0x6dded8,_0x4f6efa);}exports[a46_0x160574(0x11d)]=(_0x5022d2,_0x537b79,_0x2c7494)=>new Promise(async _0x595c24=>{const _0x9b60aa=a46_0x160574,_0x1237a5={'UyHPJ':_0x9b60aa(0x105),'eWupM':function(_0x4caa20,_0x13c238){return _0x4caa20+_0x13c238;},'UgjKn':_0x9b60aa(0x121),'Wdweg':'Workers\x20failed\x20to\x20exit\x20gracefully','FlMRy':function(_0x5ed09c,_0x520f53){return _0x5ed09c(_0x520f53);},'sHHNR':function(_0x4960ad,_0x43766b){return _0x4960ad(_0x43766b);},'cbKxT':_0x9b60aa(0xf9),'iQJhu':_0x9b60aa(0xf0),'eDiuW':_0x9b60aa(0xe7),'LKYJF':_0x9b60aa(0x11e),'UrJUb':_0x9b60aa(0xf3),'fAXcX':function(_0x1ff880,_0x555cd6){return _0x1ff880*_0x555cd6;},'cWFnT':_0x9b60aa(0x130),'cTiEx':'test-file-failure','HzRQR':function(_0x1bd0f0,_0x5822cd){return _0x1bd0f0*_0x5822cd;}},_0x1ae787=_0x2c7494['config'],_0x31c91a={},_0x47ccca=new Worker(require[_0x9b60aa(0xee)](_0x1237a5[_0x9b60aa(0x131)]),{'exposedMethods':[_0x1237a5[_0x9b60aa(0xf5)]],'forkOptions':{'serialization':_0x1237a5[_0x9b60aa(0x143)],'stdio':_0x1237a5[_0x9b60aa(0xe5)]},'idleMemoryLimit':undefined,'maxRetries':0x1,'numWorkers':_0x1237a5['fAXcX'](_0x537b79,0x1),'enableWorkerThreads':!![]}),_0x252b35=new Emittery();_0x252b35['on'](_0x1237a5[_0x9b60aa(0xec)],_0xa197d3=>{const _0x582307=_0x9b60aa;_0x31c91a[_0xa197d3[0x0]]?(_0x31c91a[_0xa197d3[0x0]][_0x1237a5['UyHPJ']]=_0x1237a5[_0x582307(0x11f)](_0x31c91a[_0xa197d3[0x0]][_0x1237a5[_0x582307(0x113)]],_0xa197d3[0x1][_0x1237a5[_0x582307(0x113)]]),_0x31c91a[_0xa197d3[0x0]][_0x1237a5[_0x582307(0x11c)]]=[..._0x31c91a[_0xa197d3[0x0]][_0x1237a5[_0x582307(0x11c)]],..._0xa197d3[0x1][_0x1237a5['UgjKn']]]):_0x31c91a[_0xa197d3[0x0]]={'failureCount':_0xa197d3[0x1][_0x1237a5[_0x582307(0x113)]],'results':[..._0xa197d3[0x1][_0x1237a5['UgjKn']]]};}),_0x252b35['on'](_0x1237a5[_0x9b60aa(0x119)],_0x5393fa=>console[_0x9b60aa(0xea)](_0x5393fa[0x1]));_0x47ccca[_0x9b60aa(0xf8)]()&&_0x47ccca[_0x9b60aa(0xf8)]()[_0x9b60aa(0xf3)](process[_0x9b60aa(0xe6)]);_0x47ccca[_0x9b60aa(0x13f)]()&&_0x47ccca[_0x9b60aa(0x13f)]()[_0x9b60aa(0xf3)](process[_0x9b60aa(0x125)]);const _0x3201f4=async()=>{const _0x3ff63b=_0x9b60aa,{forceExited:_0x1a2a14}=await _0x47ccca[_0x3ff63b(0xff)]();_0x1a2a14&&console[_0x3ff63b(0xfe)](_0x1237a5[_0x3ff63b(0xf6)]);try{await TestHubHandler[_0x3ff63b(0x120)]();}catch(_0x1fb427){_0x1237a5[_0x3ff63b(0x10f)](debug,_0x3ff63b(0x118)+_0x1fb427);}_0x1237a5[_0x3ff63b(0xeb)](_0x595c24,_0x31c91a);},_0x13afe1=_0x1237a5['sHHNR'](pLimit,_0x1237a5['HzRQR'](_0x537b79,0x1)),_0x4e99c1=_0x2a80a8=>_0x13afe1(async()=>{const _0x3db7c1=_0x9b60aa;await _0x252b35[_0x3db7c1(0xe9)](_0x1237a5[_0x3db7c1(0x117)],_0x2a80a8);const _0xb37fea=_0x47ccca[_0x3db7c1(0xe7)](_0x2a80a8,_0x1ae787);try{parentPort&&_0xb37fea['UNSTABLE_onCustomMessage'](_0x42ae9d=>{const _0x48cfd3=_0x3db7c1;try{parentPort['postMessage'](_0x42ae9d);}catch(_0x3ccf92){logger[_0x48cfd3(0x112)](_0x48cfd3(0x13d)+util['format'](_0x3ccf92));}});}catch(_0xc0afd0){logger[_0x3db7c1(0x112)](_0x3db7c1(0x10c)+util['format'](_0xc0afd0));}return _0xb37fea;});PerformanceTester['end'](PerformanceEvents[_0x9b60aa(0x126)]),Promise[_0x9b60aa(0xf4)](_0x5022d2[_0x9b60aa(0xef)](_0x5a8d04=>_0x4e99c1(_0x5a8d04)[_0x9b60aa(0xfc)](_0x76d53d=>_0x252b35[_0x9b60aa(0xe9)](_0x9b60aa(0x130),[_0x5a8d04[_0x9b60aa(0xf2)][_0x9b60aa(0x144)],_0x76d53d]),_0x296276=>_0x252b35['emit']('test-file-failure',[_0x5a8d04,_0x296276]))))['then'](_0x3201f4,_0x3201f4);}),exports[a46_0x160574(0x12e)]=(_0x4a012d,_0x2b2e69,_0x42eea6,_0x596653,_0xb3acb5)=>{const _0x3f3a3f=a46_0x160574,_0x84cefa={'lguJA':'Workers\x20failed\x20to\x20exit\x20gracefully','gOPYi':function(_0x467345,_0xbdd7a9){return _0x467345(_0xbdd7a9);},'zbNtZ':_0x3f3a3f(0x11a),'GOszG':_0x3f3a3f(0xf0),'BxYgj':'cucumberWorker','wXaPx':_0x3f3a3f(0x11e),'uuVkR':'pipe','sftiD':_0x3f3a3f(0x134),'TuHTv':_0x3f3a3f(0x128)};return new Promise(_0x409a61=>{const _0x244bba=_0x3f3a3f,_0x1e4643={};_0x1e4643[_0x244bba(0x135)]=_0x84cefa[_0x244bba(0x138)];const _0x430a56=_0x1e4643,_0x48b622=[],_0x1a7615=new Worker(require[_0x244bba(0xee)](_0x84cefa['GOszG']),{'exposedMethods':[_0x84cefa[_0x244bba(0x108)]],'forkOptions':{'serialization':_0x84cefa[_0x244bba(0x110)],'stdio':_0x84cefa['uuVkR']},'numWorkers':_0x4a012d['length']||0x1,'enableWorkerThreads':!![],'idleMemoryLimit':undefined,'maxRetries':0x1}),_0x3f337d=new Emittery();_0x3f337d['on'](_0x84cefa[_0x244bba(0x101)],_0x6bd1c4=>{const _0x39c8ba=_0x244bba;_0x48b622[_0x39c8ba(0x142)]([_0x6bd1c4[0x0],_0x6bd1c4[0x1]]);}),_0x3f337d['on'](_0x84cefa['TuHTv'],_0x3cfb2d=>console[_0x244bba(0xea)](_0x3cfb2d[0x1]));_0x1a7615[_0x244bba(0xf8)]()&&_0x1a7615['getStdout']()['pipe'](process['stdout']);_0x1a7615[_0x244bba(0x13f)]()&&_0x1a7615['getStderr']()['pipe'](process[_0x244bba(0x125)]);const _0x3c48fa=async()=>{const _0x440313=_0x244bba,{forceExited:_0x400b75}=await _0x1a7615[_0x440313(0xff)]();_0x400b75&&console['error'](_0x84cefa['lguJA']),_0x84cefa[_0x440313(0x13a)](_0x409a61,_0x48b622);},_0x11ec22=_0x84cefa[_0x244bba(0x13a)](pLimit,_0x4a012d['length']||0x1),_0x32ad3a=(_0x109cc6,_0x3ad8ad)=>_0x11ec22(async()=>{const _0x103aa4=_0x244bba;return await _0x3f337d['emit'](_0x430a56[_0x103aa4(0x135)],_0x109cc6),_0x2b2e69['platformCaps']=_0x42eea6[_0x103aa4(0x132)][_0x3ad8ad],_0x1a7615['cucumberWorker'](_0x109cc6,_0x2b2e69,_0x42eea6,_0x596653,_0xb3acb5);});Promise['all'](_0x4a012d['map']((_0x2035a8,_0x5e9747)=>_0x32ad3a(_0x2035a8,_0x5e9747)['then'](_0xd929a2=>_0x3f337d[_0x244bba(0xe9)](_0x244bba(0x134),[_0x2035a8,_0xd929a2]),_0x47b582=>_0x3f337d[_0x244bba(0xe9)](_0x244bba(0x128),[_0x2035a8,_0x47b582]))))[_0x244bba(0xfc)](_0x3c48fa,_0x3c48fa);});},exports[a46_0x160574(0x10d)]=(_0x5ddbbd,_0x5bef32)=>new Promise(_0x2a41cb=>{const _0x1e7ebe=a46_0x160574,_0xeb181b={'mhWgA':function(_0x299d33,_0xf43a18){return _0x299d33===_0xf43a18;},'eXnpC':function(_0x2931a4,_0x16d256){return _0x2931a4!==_0x16d256;},'NSJzW':_0x1e7ebe(0x115),'fKnQP':_0x1e7ebe(0x10a),'AQDzN':function(_0x56bc16,_0x424e11){return _0x56bc16(_0x424e11);},'ayZdL':_0x1e7ebe(0xf0),'VYvCb':_0x1e7ebe(0x10e),'idpLa':'json','deBQI':_0x1e7ebe(0xf3),'RsUlB':_0x1e7ebe(0x130),'VeZKh':_0x1e7ebe(0x103)},_0x281681={},_0x29d503=new Worker(require['resolve'](_0xeb181b['ayZdL']),{'exposedMethods':[_0xeb181b[_0x1e7ebe(0x13b)]],'forkOptions':{'serialization':_0xeb181b[_0x1e7ebe(0x13c)],'stdio':_0xeb181b['deBQI']},'numWorkers':_0x5bef32,'enableWorkerThreads':![],'maxRetries':0x1,'idleMemoryLimit':undefined}),_0x1cafc8=new Emittery();_0x1cafc8['on'](_0xeb181b[_0x1e7ebe(0xfa)],_0x25c6ec=>{const _0x49cf35=_0x1e7ebe;_0x25c6ec[0x0]&&logger[_0x49cf35(0x114)](_0x49cf35(0x13e)+_0x25c6ec[0x1]+_0x49cf35(0x123),_0x25c6ec[0x0]);}),_0x1cafc8['on'](_0xeb181b[_0x1e7ebe(0x129)],_0x393073=>{const _0x49f5fc=_0x1e7ebe;process[_0x49f5fc(0x111)]=0x1;});_0x29d503[_0x1e7ebe(0xf8)]()&&_0x29d503[_0x1e7ebe(0xf8)]()[_0x1e7ebe(0xf3)](process[_0x1e7ebe(0xe6)]);_0x29d503['getStderr']()&&_0x29d503[_0x1e7ebe(0x13f)]()['pipe'](process[_0x1e7ebe(0x125)]);const _0x152918=async()=>{const _0x499633=_0x1e7ebe,_0x11fab6={'dqBqx':function(_0x2a4953,_0x50f101){const _0x4e448f=a46_0x106e;return _0xeb181b[_0x4e448f(0x109)](_0x2a4953,_0x50f101);},'lZzGP':function(_0x1c4591,_0x284019){const _0x298655=a46_0x106e;return _0xeb181b[_0x298655(0x139)](_0x1c4591,_0x284019);},'eRnlR':_0xeb181b[_0x499633(0xf1)]};let _0x393887=0x0;const _0x51d439=_0x29d503[_0x499633(0xfb)][_0x499633(0x12c)](),_0xae94f8=()=>{},_0x5182ec=_0x51d439[_0x499633(0xef)](async _0x532ff5=>{const _0x4c8e6e=_0x499633,_0x40530c={'GWtAm':function(_0x4a5f02,_0x17ee14){const _0x5b2260=a46_0x106e;return _0x11fab6[_0x5b2260(0x100)](_0x4a5f02,_0x17ee14);},'OdQnp':function(_0x55e3ca,_0x3853f3){const _0xb6f2a1=a46_0x106e;return _0x11fab6[_0xb6f2a1(0xfd)](_0x55e3ca,_0x3853f3);}};_0x532ff5[_0x4c8e6e(0x12a)]([0x2,![]],_0xae94f8,_0xae94f8,_0xae94f8),_0x532ff5[_0x4c8e6e(0x11b)]['on'](_0x11fab6[_0x4c8e6e(0xed)],_0x45122b=>{_0x40530c['GWtAm'](_0x393887,0x0)&&_0x40530c['OdQnp'](_0x45122b,0x0)&&(_0x393887=_0x45122b);}),await _0x532ff5['waitForExit']();});await Promise[_0x499633(0xf4)](_0x5182ec),process['exitCode']=_0x393887;const {forceExited:_0xcf5f16}=await _0x29d503['end']();_0xcf5f16&&console[_0x499633(0xfe)](_0xeb181b[_0x499633(0x107)]),_0xeb181b[_0x499633(0x140)](_0x2a41cb,_0x281681);},_0x1ef93b=_0xeb181b[_0x1e7ebe(0x140)](pLimit,_0x5bef32),_0x295a6e=_0xd81bc8=>_0x1ef93b(async()=>{const _0x3bc9=_0x1e7ebe;return _0x29d503[_0x3bc9(0x10e)](_0xd81bc8);});Promise[_0x1e7ebe(0xf4)](_0x5ddbbd['map'](_0x50ac0d=>_0x295a6e(_0x50ac0d)[_0x1e7ebe(0xfc)](_0x4db3d9=>_0x1cafc8[_0x1e7ebe(0xe9)](_0x1e7ebe(0x130),[_0x50ac0d['configuration'][_0x1e7ebe(0x144)],_0x50ac0d[_0x1e7ebe(0xf2)][_0x1e7ebe(0x133)]]),_0x2a62ae=>_0x1cafc8[_0x1e7ebe(0xe9)](_0x1e7ebe(0x103),[_0x50ac0d,_0x2a62ae]))))['then'](_0x152918,_0x152918);});