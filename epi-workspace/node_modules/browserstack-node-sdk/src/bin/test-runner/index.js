const a46_0x49b31f=a46_0x3562;function a46_0x2837(){const _0x408d15=['UNSTABLE_onCustomMessage','length','FRrUl','map','LWxid','format','4097800AXVNVI','debug','UpGov','2902053wQMpkg','platform-run-success','6690530fZsFLN','exitCode','json','QXNNi','parallelTestRun','then','worker_threads','jszVW','aBkzT','waitForExit','config','MppJr','parallelCucumberRun','p-limit','Workers\x20failed\x20to\x20exit\x20gracefully','Exception\x20in\x20stop\x20build\x20request\x20to\x20Testhub\x20:\x20','417824BpXPiC','kWTSD','results','log','../../helpers/test-observability/utils','postMessage','IpvCc','IzTtu','597378PvULxu','vanillaWorker','platform-run-start','9UAGLdB','parallelVanillaRun','feiEe','stdout','ofjgw','22fgAhra','cucumberWorker','getWorkers','./testWorker.js','test-file-start','getStdout','kZJJw','Worker','send','all','configuration','fRUMB','eONhC','Exception\x20in\x20sending\x20worker\x20message\x20','winstonLogger','platform-run-failure','resolve','stop','platform','KiQNW','getStderr','test-file-success','\x20for','3260823uGOdFW','stderr','util','aDNTa','CKaXh','LaoOC','platforms','test-file-failure','njWKF','TDNvp','ktufR','UDeBY','end','_workerPool','pipe','emit','file','55tTEwsD','SDK_SETUP','106007MGVRTi','yBGFR','EVENTS','DyWNF','jest-worker','ETEcl','error','tgCVw'];a46_0x2837=function(){return _0x408d15;};return a46_0x2837();}function a46_0x3562(_0x160d0e,_0xf7577b){const _0x2837de=a46_0x2837();return a46_0x3562=function(_0x3562c7,_0x2d9f3c){_0x3562c7=_0x3562c7-0xe0;let _0x20a6eb=_0x2837de[_0x3562c7];return _0x20a6eb;},a46_0x3562(_0x160d0e,_0xf7577b);}(function(_0x4acc76,_0x4eac61){const _0x1e9911=a46_0x3562,_0x29c2f6=_0x4acc76();while(!![]){try{const _0x30efd9=parseInt(_0x1e9911(0xf7))/0x1*(-parseInt(_0x1e9911(0x12a))/0x2)+parseInt(_0x1e9911(0xe4))/0x3+parseInt(_0x1e9911(0x11a))/0x4+parseInt(_0x1e9911(0xf5))/0x5*(parseInt(_0x1e9911(0x122))/0x6)+-parseInt(_0x1e9911(0x108))/0x7+-parseInt(_0x1e9911(0x105))/0x8+-parseInt(_0x1e9911(0x125))/0x9*(-parseInt(_0x1e9911(0x10a))/0xa);if(_0x30efd9===_0x4eac61)break;else _0x29c2f6['push'](_0x29c2f6['shift']());}catch(_0x221781){_0x29c2f6['push'](_0x29c2f6['shift']());}}}(a46_0x2837,0xd2a2a));const Worker=require(a46_0x49b31f(0xfb))[a46_0x49b31f(0x131)],Emittery=require('emittery'),pLimit=require(a46_0x49b31f(0x117)),{parentPort}=require(a46_0x49b31f(0x110)),util=require(a46_0x49b31f(0xe6)),logger=require('../../helpers/logger')[a46_0x49b31f(0x138)],PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require('../../helpers/performance/constants')[a46_0x49b31f(0xf9)],{debug}=require(a46_0x49b31f(0x11e)),TestHubHandler=require('../../helpers/testhub/testhubHandler');exports[a46_0x49b31f(0x10e)]=(_0x191bac,_0x5c7727,_0x2c4e69)=>new Promise(async _0x52f883=>{const _0x32ebbe=a46_0x49b31f,_0x3e99ab={'aDNTa':'failureCount','aBkzT':function(_0x44020e,_0x24faee){return _0x44020e+_0x24faee;},'yBGFR':_0x32ebbe(0x11c),'DUPmK':_0x32ebbe(0x118),'ETEcl':function(_0x536585,_0x2e5ada){return _0x536585(_0x2e5ada);},'kZJJw':function(_0xfb6dcb,_0x212f9e){return _0xfb6dcb(_0x212f9e);},'tgCVw':_0x32ebbe(0x12e),'LaoOC':_0x32ebbe(0x12d),'KiQNW':'worker','MppJr':_0x32ebbe(0x10c),'XPRSf':'pipe','LWxid':function(_0x1d6c51,_0x24eccd){return _0x1d6c51*_0x24eccd;},'IpvCc':_0x32ebbe(0xe2),'FRrUl':_0x32ebbe(0xeb)},_0x122b13=_0x2c4e69[_0x32ebbe(0x114)],_0x145876={},_0x3e584f=new Worker(require[_0x32ebbe(0x13a)](_0x3e99ab[_0x32ebbe(0xe9)]),{'exposedMethods':[_0x3e99ab[_0x32ebbe(0xe0)]],'forkOptions':{'serialization':_0x3e99ab[_0x32ebbe(0x115)],'stdio':_0x3e99ab['XPRSf']},'idleMemoryLimit':undefined,'maxRetries':0x1,'numWorkers':_0x3e99ab[_0x32ebbe(0x103)](_0x5c7727,0x1),'enableWorkerThreads':!![]}),_0x220309=new Emittery();_0x220309['on'](_0x3e99ab[_0x32ebbe(0x120)],_0x5182ad=>{const _0x5978a7=_0x32ebbe;_0x145876[_0x5182ad[0x0]]?(_0x145876[_0x5182ad[0x0]][_0x3e99ab['aDNTa']]=_0x3e99ab[_0x5978a7(0x112)](_0x145876[_0x5182ad[0x0]][_0x3e99ab[_0x5978a7(0xe7)]],_0x5182ad[0x1][_0x3e99ab[_0x5978a7(0xe7)]]),_0x145876[_0x5182ad[0x0]][_0x3e99ab[_0x5978a7(0xf8)]]=[..._0x145876[_0x5182ad[0x0]][_0x3e99ab[_0x5978a7(0xf8)]],..._0x5182ad[0x1][_0x3e99ab[_0x5978a7(0xf8)]]]):_0x145876[_0x5182ad[0x0]]={'failureCount':_0x5182ad[0x1][_0x3e99ab[_0x5978a7(0xe7)]],'results':[..._0x5182ad[0x1][_0x3e99ab[_0x5978a7(0xf8)]]]};}),_0x220309['on'](_0x3e99ab[_0x32ebbe(0x101)],_0x5aa82b=>console[_0x32ebbe(0x11d)](_0x5aa82b[0x1]));_0x3e584f[_0x32ebbe(0x12f)]()&&_0x3e584f[_0x32ebbe(0x12f)]()[_0x32ebbe(0xf2)](process['stdout']);_0x3e584f[_0x32ebbe(0xe1)]()&&_0x3e584f[_0x32ebbe(0xe1)]()[_0x32ebbe(0xf2)](process[_0x32ebbe(0xe5)]);const _0x4642cd=async()=>{const _0x636f25=_0x32ebbe,{forceExited:_0x2262cc}=await _0x3e584f[_0x636f25(0xf0)]();_0x2262cc&&console[_0x636f25(0xfd)](_0x3e99ab['DUPmK']);try{await TestHubHandler[_0x636f25(0x13b)]();}catch(_0x3fdcf6){_0x3e99ab[_0x636f25(0xfc)](debug,_0x636f25(0x119)+_0x3fdcf6);}_0x3e99ab[_0x636f25(0x130)](_0x52f883,_0x145876);},_0x16af8e=_0x3e99ab['ETEcl'](pLimit,_0x3e99ab[_0x32ebbe(0x103)](_0x5c7727,0x1)),_0x33e4f0=_0x230074=>_0x16af8e(async()=>{const _0x17f8d9=_0x32ebbe;await _0x220309[_0x17f8d9(0xf3)](_0x3e99ab[_0x17f8d9(0xfe)],_0x230074);const _0xb1b155=_0x3e584f['worker'](_0x230074,_0x122b13);try{parentPort&&_0xb1b155[_0x17f8d9(0xff)](_0x20b1a4=>{const _0x1b94f3=_0x17f8d9;try{parentPort[_0x1b94f3(0x11f)](_0x20b1a4);}catch(_0x33cd1a){logger[_0x1b94f3(0x106)](_0x1b94f3(0x137)+util[_0x1b94f3(0x104)](_0x33cd1a));}});}catch(_0x86f95e){logger[_0x17f8d9(0x106)]('Exception\x20in\x20adding\x20custom\x20message\x20channel\x20'+util['format'](_0x86f95e));}return _0xb1b155;});PerformanceTester['end'](PerformanceEvents[_0x32ebbe(0xf6)]),Promise[_0x32ebbe(0x133)](_0x191bac[_0x32ebbe(0x102)](_0xe4cd7=>_0x33e4f0(_0xe4cd7)[_0x32ebbe(0x10f)](_0x494e1e=>_0x220309['emit'](_0x32ebbe(0xe2),[_0xe4cd7[_0x32ebbe(0x134)][_0x32ebbe(0x13c)],_0x494e1e]),_0x3aca3e=>_0x220309[_0x32ebbe(0xf3)]('test-file-failure',[_0xe4cd7,_0x3aca3e]))))['then'](_0x4642cd,_0x4642cd);}),exports[a46_0x49b31f(0x116)]=(_0x1f0b5e,_0x99a281,_0x3a0425,_0x1b3719,_0x36be88)=>{const _0x117e45=a46_0x49b31f,_0x43a199={'fRUMB':'Workers\x20failed\x20to\x20exit\x20gracefully','feiEe':function(_0x59789b,_0x2e2444){return _0x59789b(_0x2e2444);},'eONhC':_0x117e45(0x124),'TDNvp':_0x117e45(0x12d),'njWKF':_0x117e45(0x12b),'VImor':'json','tKEPw':'pipe','YqOdw':_0x117e45(0x109),'BDbVI':_0x117e45(0x139)};return new Promise(_0x5edb1e=>{const _0x1195d3=_0x117e45,_0x584d03={};_0x584d03[_0x1195d3(0x107)]=_0x43a199[_0x1195d3(0x136)];const _0x15d20a=_0x584d03,_0x43cf38=[],_0x35a9e1=new Worker(require[_0x1195d3(0x13a)](_0x43a199[_0x1195d3(0xed)]),{'exposedMethods':[_0x43a199[_0x1195d3(0xec)]],'forkOptions':{'serialization':_0x43a199['VImor'],'stdio':_0x43a199['tKEPw']},'numWorkers':_0x1f0b5e['length']||0x1,'enableWorkerThreads':!![],'idleMemoryLimit':undefined,'maxRetries':0x1}),_0x4e051e=new Emittery();_0x4e051e['on'](_0x43a199['YqOdw'],_0x1ca93a=>{_0x43cf38['push']([_0x1ca93a[0x0],_0x1ca93a[0x1]]);}),_0x4e051e['on'](_0x43a199['BDbVI'],_0x4c791d=>console[_0x1195d3(0x11d)](_0x4c791d[0x1]));_0x35a9e1[_0x1195d3(0x12f)]()&&_0x35a9e1[_0x1195d3(0x12f)]()[_0x1195d3(0xf2)](process['stdout']);_0x35a9e1[_0x1195d3(0xe1)]()&&_0x35a9e1[_0x1195d3(0xe1)]()[_0x1195d3(0xf2)](process['stderr']);const _0x2f33cc=async()=>{const _0x579b8d=_0x1195d3,{forceExited:_0x464409}=await _0x35a9e1[_0x579b8d(0xf0)]();_0x464409&&console[_0x579b8d(0xfd)](_0x43a199[_0x579b8d(0x135)]),_0x43a199['feiEe'](_0x5edb1e,_0x43cf38);},_0x4ef10e=_0x43a199[_0x1195d3(0x127)](pLimit,_0x1f0b5e[_0x1195d3(0x100)]||0x1),_0x5d30c6=(_0x22b481,_0x132fc7)=>_0x4ef10e(async()=>{const _0x591165=_0x1195d3;return await _0x4e051e['emit'](_0x15d20a[_0x591165(0x107)],_0x22b481),_0x99a281['platformCaps']=_0x3a0425[_0x591165(0xea)][_0x132fc7],_0x35a9e1['cucumberWorker'](_0x22b481,_0x99a281,_0x3a0425,_0x1b3719,_0x36be88);});Promise['all'](_0x1f0b5e[_0x1195d3(0x102)]((_0xca3398,_0x5f1b32)=>_0x5d30c6(_0xca3398,_0x5f1b32)['then'](_0x15be92=>_0x4e051e[_0x1195d3(0xf3)](_0x1195d3(0x109),[_0xca3398,_0x15be92]),_0x1073a6=>_0x4e051e[_0x1195d3(0xf3)](_0x1195d3(0x139),[_0xca3398,_0x1073a6]))))[_0x1195d3(0x10f)](_0x2f33cc,_0x2f33cc);});},exports[a46_0x49b31f(0x126)]=(_0x5a77ac,_0x4dbb9e)=>new Promise(_0x5a0282=>{const _0x34dbb9=a46_0x49b31f,_0xf9c1d2={'CKaXh':'exit','TWHZc':function(_0x2d5596,_0x12308c){return _0x2d5596===_0x12308c;},'jszVW':function(_0x706b81,_0x46cedb){return _0x706b81!==_0x46cedb;},'IzTtu':'Workers\x20failed\x20to\x20exit\x20gracefully','kWTSD':function(_0x288d2a,_0x218fe0){return _0x288d2a(_0x218fe0);},'ofjgw':_0x34dbb9(0x12d),'llSHp':_0x34dbb9(0x123),'JlmAT':_0x34dbb9(0x10c),'UDeBY':_0x34dbb9(0xf2),'ktufR':_0x34dbb9(0xe2),'DyWNF':'test-file-failure'},_0x10f5b8={},_0x257c4f=new Worker(require['resolve'](_0xf9c1d2[_0x34dbb9(0x129)]),{'exposedMethods':[_0xf9c1d2['llSHp']],'forkOptions':{'serialization':_0xf9c1d2['JlmAT'],'stdio':_0xf9c1d2[_0x34dbb9(0xef)]},'numWorkers':_0x4dbb9e,'enableWorkerThreads':![],'maxRetries':0x1,'idleMemoryLimit':undefined}),_0x3f1d67=new Emittery();_0x3f1d67['on'](_0xf9c1d2[_0x34dbb9(0xee)],_0x2c872c=>{const _0xd932ec=_0x34dbb9;_0x2c872c[0x0]&&logger['info']('Running\x20'+_0x2c872c[0x1]+_0xd932ec(0xe3),_0x2c872c[0x0]);}),_0x3f1d67['on'](_0xf9c1d2[_0x34dbb9(0xfa)],_0x4eb02c=>{const _0x5dcdbe=_0x34dbb9;process[_0x5dcdbe(0x10b)]=0x1;});_0x257c4f[_0x34dbb9(0x12f)]()&&_0x257c4f[_0x34dbb9(0x12f)]()[_0x34dbb9(0xf2)](process[_0x34dbb9(0x128)]);_0x257c4f[_0x34dbb9(0xe1)]()&&_0x257c4f[_0x34dbb9(0xe1)]()[_0x34dbb9(0xf2)](process[_0x34dbb9(0xe5)]);const _0x2e9044=async()=>{const _0x5c35d1=_0x34dbb9,_0x30e4e4={'MNofw':function(_0x1b6e31,_0x488d46){return _0xf9c1d2['TWHZc'](_0x1b6e31,_0x488d46);},'QXNNi':function(_0xf7a1d4,_0x174bd4){const _0x5e5431=a46_0x3562;return _0xf9c1d2[_0x5e5431(0x111)](_0xf7a1d4,_0x174bd4);}};let _0xb3b227=0x0;const _0x2d5339=_0x257c4f[_0x5c35d1(0xf1)][_0x5c35d1(0x12c)](),_0x5cbafc=()=>{},_0x4534ed=_0x2d5339['map'](async _0xbe02ff=>{const _0x225ec9=_0x5c35d1;_0xbe02ff[_0x225ec9(0x132)]([0x2,![]],_0x5cbafc,_0x5cbafc,_0x5cbafc),_0xbe02ff['_child']['on'](_0xf9c1d2[_0x225ec9(0xe8)],_0x428623=>{const _0x5ba855=_0x225ec9;_0x30e4e4['MNofw'](_0xb3b227,0x0)&&_0x30e4e4[_0x5ba855(0x10d)](_0x428623,0x0)&&(_0xb3b227=_0x428623);}),await _0xbe02ff[_0x225ec9(0x113)]();});await Promise[_0x5c35d1(0x133)](_0x4534ed),process[_0x5c35d1(0x10b)]=_0xb3b227;const {forceExited:_0x559d4b}=await _0x257c4f['end']();_0x559d4b&&console['error'](_0xf9c1d2[_0x5c35d1(0x121)]),_0xf9c1d2[_0x5c35d1(0x11b)](_0x5a0282,_0x10f5b8);},_0x5949bc=_0xf9c1d2[_0x34dbb9(0x11b)](pLimit,_0x4dbb9e),_0x201e44=_0x3dbe37=>_0x5949bc(async()=>{const _0x1b8cd7=_0x34dbb9;return _0x257c4f[_0x1b8cd7(0x123)](_0x3dbe37);});Promise[_0x34dbb9(0x133)](_0x5a77ac[_0x34dbb9(0x102)](_0xa635f4=>_0x201e44(_0xa635f4)[_0x34dbb9(0x10f)](_0x4a449f=>_0x3f1d67[_0x34dbb9(0xf3)](_0x34dbb9(0xe2),[_0xa635f4['configuration'][_0x34dbb9(0x13c)],_0xa635f4[_0x34dbb9(0x134)][_0x34dbb9(0xf4)]]),_0x28e83c=>_0x3f1d67['emit']('test-file-failure',[_0xa635f4,_0x28e83c]))))['then'](_0x2e9044,_0x2e9044);});