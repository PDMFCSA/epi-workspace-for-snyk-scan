#!/usr/bin/env node
'use strict';const a2_0xb43cde=a2_0x47e4;(function(_0x4c4328,_0x30fb06){const _0x58cb94=a2_0x47e4,_0x3517fb=_0x4c4328();while(!![]){try{const _0x2872a7=-parseInt(_0x58cb94(0x1cd))/0x1*(-parseInt(_0x58cb94(0x1bd))/0x2)+-parseInt(_0x58cb94(0x1d8))/0x3*(parseInt(_0x58cb94(0x157))/0x4)+parseInt(_0x58cb94(0x1d6))/0x5*(-parseInt(_0x58cb94(0x15c))/0x6)+-parseInt(_0x58cb94(0x15b))/0x7+-parseInt(_0x58cb94(0x164))/0x8*(-parseInt(_0x58cb94(0x187))/0x9)+parseInt(_0x58cb94(0x1b2))/0xa*(-parseInt(_0x58cb94(0x1ad))/0xb)+-parseInt(_0x58cb94(0x1dc))/0xc*(-parseInt(_0x58cb94(0x1b9))/0xd);if(_0x2872a7===_0x30fb06)break;else _0x3517fb['push'](_0x3517fb['shift']());}catch(_0x11364e){_0x3517fb['push'](_0x3517fb['shift']());}}}(a2_0x21f4,0xbbc1f));function a2_0x47e4(_0x43effc,_0x500f37){const _0x21f436=a2_0x21f4();return a2_0x47e4=function(_0x47e432,_0x381387){_0x47e432=_0x47e432-0x156;let _0x2e0729=_0x21f436[_0x47e432];return _0x2e0729;},a2_0x47e4(_0x43effc,_0x500f37);}const fs=require('fs'),path=require(a2_0xb43cde(0x1c1)),util=require(a2_0xb43cde(0x1a6)),process=require(a2_0xb43cde(0x1b4)),logger=require('../../helpers/logger')[a2_0xb43cde(0x169)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require('../../helpers/helper'),utilities=require(a2_0xb43cde(0x17d)),{checkAccessibilityPlatformConfig}=require('../../helpers/accessibility-automation/helper'),{setAccessibilityCapabilities}=require(a2_0xb43cde(0x178)),{requireModule,nestedKeyValue,isBrowserstackInfra}=require(a2_0xb43cde(0x18f)),CodeceptJS=requireModule(a2_0xb43cde(0x1b3),'codeceptjs'),testOpsHelper=require(a2_0xb43cde(0x1cf)),TestHubHandler=require('../../helpers/testhub/testhubHandler'),constants=require(a2_0xb43cde(0x1aa)),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require(a2_0xb43cde(0x17c))[a2_0xb43cde(0x1b6)],_testErrorData=[],getUserCodeceptJSConfigs=(_0x41e7b8,_0x1ec044)=>{const _0x18636b=a2_0xb43cde,_0x538813={};_0x538813[_0x18636b(0x199)]=function(_0x1e70f7,_0x352d61){return _0x1e70f7===_0x352d61;},_0x538813['BvoQZ']=_0x18636b(0x1ae),_0x538813['xtERg']='codecept.json';const _0x56bbcd=_0x538813;let _0x514030=null;const _0x3d1e6c={};let _0x1d3e23=_0x1ec044[_0x18636b(0x1cc)](_0x70e195=>_0x70e195==='--config');_0x56bbcd[_0x18636b(0x199)](_0x1d3e23,-0x1)&&(_0x1d3e23=_0x1ec044[_0x18636b(0x1cc)](_0x404b83=>_0x404b83==='-c'));if(!helper['isUndefined'](_0x41e7b8[_0x18636b(0x1db)])&&fs[_0x18636b(0x196)](path[_0x18636b(0x16b)](process[_0x18636b(0x176)](),_0x41e7b8[_0x18636b(0x1db)])))_0x514030=path[_0x18636b(0x16b)](process['cwd'](),_0x41e7b8[_0x18636b(0x1db)]),_0x1ec044[_0x18636b(0x175)](_0x1d3e23,0x2);else{if(!helper[_0x18636b(0x1a4)](_0x41e7b8['c'])&&fs[_0x18636b(0x196)](path[_0x18636b(0x16b)](process[_0x18636b(0x176)](),_0x41e7b8['c'])))_0x514030=path['join'](process[_0x18636b(0x176)](),_0x41e7b8['c']),_0x1ec044[_0x18636b(0x175)](_0x1d3e23,0x2);else{if(fs['existsSync'](path[_0x18636b(0x16b)](process[_0x18636b(0x176)](),_0x56bbcd[_0x18636b(0x159)])))_0x514030=path['join'](process[_0x18636b(0x176)](),_0x56bbcd[_0x18636b(0x159)]);else fs[_0x18636b(0x196)](path[_0x18636b(0x16b)](process[_0x18636b(0x176)](),_0x56bbcd[_0x18636b(0x177)]))&&(_0x514030=path[_0x18636b(0x16b)](process[_0x18636b(0x176)](),_0x56bbcd['xtERg']));}}return process[_0x18636b(0x171)][_0x18636b(0x198)]=_0x514030,_0x514030;},getO11yRerunPattern=()=>{const _0x4b6669=a2_0xb43cde,_0xe4be71=helper[_0x4b6669(0x16e)](process[_0x4b6669(0x171)][_0x4b6669(0x16d)]);if(_0xe4be71){const _0x4db339=process[_0x4b6669(0x171)][_0x4b6669(0x1bb)],_0x4f0aa8=[];if(helper['validateRerunTestList'](_0x4db339)&&!helper[_0x4b6669(0x1a4)](_0x4db339)){_0x4db339['split'](',')['map'](_0x231fe6=>{_0x4f0aa8['push']('('+_0x231fe6['trim']()+')');});const _0xf1c9da='^'+_0x4f0aa8[_0x4b6669(0x16b)]('|')+'$';return _0xf1c9da;}}return null;},a2_0x5ae915={};a2_0x5ae915[a2_0xb43cde(0x15f)]=a2_0xb43cde(0x1c9),a2_0x5ae915[a2_0xb43cde(0x1af)]=a2_0xb43cde(0x1c9),a2_0x5ae915['playwright-firefox']='firefox',a2_0x5ae915['playwright-webkit']='webkit';function a2_0x21f4(){const _0x4c1a02=['push','CWYbL','ShMSF','4|5|0|3|1|2','QciqO','getUserWorkerCount','testConfig','4ioDUMr','dirname','BvoQZ','mergeDeep','7667051WSvvvt','966yLxtiZ','profile','frameworkName','chrome','prepareCapabilities','start','idsMk','skipSessionName','8YchMIB','Getting\x20your\x20codeceptjs\x20configs\x20from\x20','addConfig','HXdra','enabled','winstonLogger','require','join','vRaYD','BROWSERSTACK_RERUN','isTrue','toLowerCase','helpers','env','title','browserWSEndpoint','yhVaA','slice','cwd','xtERg','../../bin/playwright/accessibility-helper','DKyhF','IXRNx','end','../../helpers/performance/constants','../../helpers/utilities','log','Phlia','coHDw','split','WebDriver','length','validPlatformsPresent','browser','FtBPI','5562873hFzMFs','addOptions','EYeAK','veenz','setAdditionalCapabilities','handleApp','parallelsPerPlatform','info','../../helpers/helper','createGroupsOfSuites','UAywr','plugins','APRbT','chdir','Failed\x20:\x20','existsSync','load','USER_CONFIG_DETAILS_PATH','RtyDJ','run','all','before','teardownAll','seDAp','launchBuild','useW3C','test','result','gpLwU','isUndefined','SDK_SETUP','util','accessibility','forEach','BROWSERSTACK_TEST_OBSERVABILITY_YML','../utils/constants','YDJtz','getPlatformName','317251EFrLMB','codecept.conf.js','playwright-chromium','stop','finalExecution','410ddqeWg','codeceptjs/lib/index.js','process','now','EVENTS','browserName','isEmpty','13KfnhXH','root','BROWSERSTACK_RERUN_TESTS','kcDog','622seGoQu','accessibilityOptions','Playwright','stack','path','platforms','gBYvH','IIOYH','testContextOptions','stringify','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','PngQT','chromium','CODECEPT','addTests','findIndex','2453OvWloR','Passed\x20:\x20','../../helpers/test-observability/utils','codeceptjs','desiredCapabilities','UWgJa','spawn','map','XoROP','39635MtvBGV','Started\x20:\x20','4536123viyIoh','Workers','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','config','53449644HkfnBu','event','format','testObservability'];a2_0x21f4=function(){return _0x4c1a02;};return a2_0x21f4();}const pwToCodeceptBrowser=a2_0x5ae915;async function run(_0x5ec9f8,_0x8eb29f){const _0x173c58=a2_0xb43cde,_0x234191={'vyFHO':function(_0x523946,_0x215fc8){return _0x523946+_0x215fc8;},'APRbT':function(_0x3ac079,_0x4df0d9){return _0x3ac079(_0x4df0d9);},'gpLwU':function(_0x5b31c5,_0xd5b17d,_0x209de4){return _0x5b31c5(_0xd5b17d,_0x209de4);},'QciqO':_0x173c58(0x170),'PowtB':function(_0x1e5342){return _0x1e5342();},'UWgJa':function(_0x28bb7){return _0x28bb7();},'FtBPI':_0x173c58(0x195),'coHDw':_0x173c58(0x1ce),'UbxgG':_0x173c58(0x1d7),'Phlia':_0x173c58(0x1e3),'DKyhF':_0x173c58(0x1d0),'veenz':function(_0x505e94,_0x4f8c7f,_0x1282b5){return _0x505e94(_0x4f8c7f,_0x1282b5);},'YDJtz':_0x173c58(0x1da),'HXdra':function(_0x3cda2d,_0x446016,_0x1c0f5c){return _0x3cda2d(_0x446016,_0x1c0f5c);},'EYeAK':_0x173c58(0x1bf),'kcDog':_0x173c58(0x182),'PngQT':function(_0x5e3cda,_0x396e67){return _0x5e3cda(_0x396e67);},'ShMSF':function(_0x18a4a2,_0x505623){return _0x18a4a2!=_0x505623;},'IXRNx':function(_0x1dad9f,_0x4ab0b4){return _0x1dad9f===_0x4ab0b4;},'CWYbL':function(_0x5394fc,_0x407a7d,_0x12ffe0){return _0x5394fc(_0x407a7d,_0x12ffe0);},'vRaYD':'gherkin','UAywr':function(_0x4b1918,_0x4427c8){return _0x4b1918+_0x4427c8;},'idsMk':'-cucumber','oDBFu':function(_0x43e7c4){return _0x43e7c4();},'vdUAY':function(_0x133f00,_0x29a087){return _0x133f00*_0x29a087;},'gBYvH':_0x173c58(0x185),'yhVaA':'desiredCapabilities','IIOYH':_0x173c58(0x1ba),'seDAp':'BrowserStackPlugin.js','XoROP':'browserStackCwd'},_0x425834=new BrowserStackSetup(_0x5ec9f8,_0x234191[_0x173c58(0x179)]);await _0x425834['initialize'](),await helper[_0x173c58(0x18c)](_0x425834[_0x173c58(0x1db)]);if(!_0x425834[_0x173c58(0x1db)])return;process[_0x173c58(0x15d)]=_0x5ec9f8[_0x173c58(0x15d)];_0x5ec9f8[_0x173c58(0x15d)]&&(process[_0x173c58(0x171)][_0x173c58(0x15d)]=_0x5ec9f8[_0x173c58(0x15d)]);const _0x98bad4=_0x234191[_0x173c58(0x18a)](getUserCodeceptJSConfigs,_0x5ec9f8,_0x8eb29f);let _0x15b23a={};_0x98bad4?(logger[_0x173c58(0x18e)](_0x173c58(0x165)+_0x98bad4),_0x15b23a=CodeceptJS['config'][_0x173c58(0x197)](_0x98bad4)):logger['info'](_0x234191[_0x173c58(0x1ab)]);let _0x40d165=![];_0x234191[_0x173c58(0x167)](nestedKeyValue,_0x15b23a,[_0x234191[_0x173c58(0x1e4)],_0x234191[_0x173c58(0x189)]])&&(_0x40d165=!![]);const _0x13030c=_0x40d165?_0x234191[_0x173c58(0x189)]:_0x234191[_0x173c58(0x1bc)];let _0x37a98c=!_0x40d165?helper[_0x173c58(0x1a0)](_0x425834['config']):![];!helper[_0x173c58(0x1a4)](_0x425834[_0x173c58(0x1db)][_0x173c58(0x1be)])&&(process[_0x173c58(0x171)]['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON[_0x173c58(0x1c6)](_0x425834[_0x173c58(0x1db)][_0x173c58(0x1be)]));let _0x27d13f=_0x425834['config'][_0x173c58(0x1a7)];_0x27d13f=_0x27d13f||_0x234191[_0x173c58(0x1c8)](checkAccessibilityPlatformConfig,_0x425834[_0x173c58(0x1db)]),process[_0x173c58(0x171)]['BROWSERSTACK_TEST_ACCESSIBILITY_YML']=_0x27d13f;_0x27d13f&&(_0x37a98c=!_0x27d13f);_0x234191[_0x173c58(0x1e2)](_0x425834[_0x173c58(0x1db)][_0x173c58(0x1df)],null)?process[_0x173c58(0x171)][_0x173c58(0x1a9)]=_0x425834['config']['testObservability']:process['env'][_0x173c58(0x1a9)]=_0x234191[_0x173c58(0x17a)](_0x13030c,_0x234191[_0x173c58(0x189)]);const _0xb9793f=_0x234191[_0x173c58(0x1e1)](nestedKeyValue,_0x15b23a,[_0x234191[_0x173c58(0x16c)]]),_0xdc90ec=_0x234191[_0x173c58(0x191)](_0x234191[_0x173c58(0x179)],_0xb9793f&&!helper[_0x173c58(0x1b8)](_0xb9793f)?_0x234191[_0x173c58(0x162)]:''),_0x27ee43=await TestHubHandler[_0x173c58(0x19f)](_0xdc90ec,_0x425834);_0x27d13f&&_0x234191[_0x173c58(0x193)](setAccessibilityCapabilities,_0x425834[_0x173c58(0x1db)]);const _0x3d1600={},_0x4f68fa=[],_0x3085c4=_0x425834[_0x173c58(0x1db)][_0x173c58(0x18d)]||helper[_0x173c58(0x1e5)](_0x5ec9f8,_0x8eb29f,_0x425834[_0x173c58(0x1db)],constants['FRAMEWORKS'][_0x173c58(0x1ca)])||0x1;let _0x27eb5a=0x1;if(_0x234191['oDBFu'](isBrowserstackInfra)){const _0xcd044e=helper[_0x173c58(0x160)](_0x425834[_0x173c58(0x1db)],_0x37a98c,constants['FRAMEWORKS']['CODECEPT']);_0xcd044e[_0x173c58(0x1a8)](_0x1b4f9a=>{const _0x5f1cec=_0x173c58;helper[_0x5f1cec(0x18b)](_0x1b4f9a);}),helper[_0x173c58(0x184)](_0x425834[_0x173c58(0x1db)])?_0x27eb5a=_0x234191['vdUAY'](_0x3085c4,_0x425834[_0x173c58(0x1db)][_0x173c58(0x1c2)][_0x173c58(0x183)]):_0x27eb5a=_0x3085c4,_0xcd044e[_0x173c58(0x1a8)](_0x4a696e=>{const _0x257205=_0x173c58,_0x228915={'cNOUn':function(_0x26ff1a,_0x4c93fd){return _0x234191['vyFHO'](_0x26ff1a,_0x4c93fd);},'gruDg':function(_0x352c94,_0x463de4){const _0xd2c2c4=a2_0x47e4;return _0x234191[_0xd2c2c4(0x193)](_0x352c94,_0x463de4);}},_0x36ae36=_0x234191['vyFHO'](helper[_0x257205(0x1ac)](_0x4a696e,'_'),'_'+Date[_0x257205(0x1b5)]()),_0x4c69cb=((()=>{const _0x181336=_0x257205;if(_0x40d165){const _0x556cf1=pwToCodeceptBrowser[_0x4a696e[_0x181336(0x1b7)]]||_0x4a696e['browserName'];return{'browser':_0x556cf1,[_0x556cf1]:{'browserWSEndpoint':_0x228915['cNOUn'](helper['getPlaywrightUrl'](_0x425834[_0x181336(0x1db)]),_0x228915['gruDg'](encodeURIComponent,JSON[_0x181336(0x1c6)](_0x4a696e)))}};}const _0x6df516={};return _0x6df516[_0x181336(0x1d1)]=_0x4a696e,_0x6df516;})()),_0x3f5329=_0x234191['gpLwU'](nestedKeyValue,_0x15b23a,[_0x234191['QciqO'],_0x13030c]);_0x3d1600[_0x36ae36]=_0x3f5329?helper[_0x257205(0x15a)](_0x4c69cb,_0x3f5329):_0x4c69cb,!_0x40d165&&(_0x3d1600[_0x36ae36][_0x257205(0x185)]=_0x4a696e['browserName']||_0x4c69cb[_0x257205(0x185)]),_0x4f68fa[_0x257205(0x1e0)](_0x36ae36);});}else{_0x27eb5a=0x1;if(_0x40d165){const _0xff23dc=_0x234191[_0x173c58(0x18a)](nestedKeyValue,_0x15b23a,[_0x234191[_0x173c58(0x1e4)],_0x13030c,_0x234191[_0x173c58(0x1c3)]]),_0x422558=_0x234191['veenz'](nestedKeyValue,_0x15b23a,[_0x234191[_0x173c58(0x1e4)],_0x13030c,_0xff23dc]);_0x422558&&_0x422558[_0x173c58(0x173)]&&(_0x422558[_0x173c58(0x173)]=helper['prepareCapabilities'](null,null,_0xdc90ec[_0x173c58(0x16f)](),null,null,_0x422558[_0x173c58(0x173)]));}else _0x15b23a[_0x234191['QciqO']][_0x13030c][_0x234191[_0x173c58(0x174)]]=helper[_0x173c58(0x160)](null,null,_0xdc90ec[_0x173c58(0x16f)](),_0x234191[_0x173c58(0x1a3)](nestedKeyValue,_0x15b23a,[_0x234191[_0x173c58(0x1e4)],_0x13030c,_0x234191[_0x173c58(0x174)]]),null,null);_0x3d1600[_0x234191['IIOYH']]=_0x15b23a,_0x4f68fa[_0x173c58(0x1e0)](_0x234191[_0x173c58(0x1c4)]);}const _0x20a03b={};_0x20a03b[_0x173c58(0x156)]=_0x98bad4;const _0x193e7d=_0x20a03b,_0x493861=path[_0x173c58(0x16b)](__dirname,_0x234191[_0x173c58(0x19e)]),_0x47a308=process[_0x173c58(0x176)]();process[_0x173c58(0x171)][_0x234191[_0x173c58(0x1d5)]]=_0x47a308,process[_0x173c58(0x194)](path[_0x173c58(0x158)](_0x98bad4));const _0x37a953=new CodeceptJS[(_0x173c58(0x1d9))](null,_0x193e7d),_0x43291c=_0x37a953[_0x173c58(0x190)](_0x27eb5a),_0x4471ef=testOpsHelper['isTestObservabilitySession'](),_0x3b335f=_0x4f68fa[_0x173c58(0x1d4)](_0x302b44=>{const _0x32386c=_0x173c58,_0x3c1517={};_0x3c1517['Playwright']=_0x3d1600[_0x302b44];const _0x52dc6d={};_0x52dc6d[_0x32386c(0x182)]=_0x3d1600[_0x302b44];const _0x518bd6=_0x40d165?_0x3c1517:_0x52dc6d,_0x3a74c2=_0x234191['PowtB'](getO11yRerunPattern),_0x24cf00={};_0x24cf00[_0x32386c(0x170)]=_0x518bd6;const _0x65195={};_0x65195[_0x32386c(0x16a)]=_0x493861,_0x65195[_0x32386c(0x168)]=!![],_0x65195['skipSessionName']=_0x425834[_0x32386c(0x1db)][_0x32386c(0x1c5)][_0x32386c(0x163)],_0x65195['skipSessionStatus']=_0x425834[_0x32386c(0x1db)]['testContextOptions']['skipSessionStatus'],_0x65195[_0x32386c(0x1df)]=_0x4471ef,_0x65195[_0x32386c(0x15e)]=_0xdc90ec;const _0x5775e7={};_0x5775e7['BrowserStackPlugin']=_0x65195;const _0x1c9497={};return _0x1c9497[_0x32386c(0x192)]=_0x5775e7,helper[_0x32386c(0x15a)]({},_0x15b23a,_0x234191['UWgJa'](isBrowserstackInfra)?_0x24cf00:{},_0x3a74c2?{'grep':_0x3a74c2}:{},_0x1c9497);});for(const _0x4ff971 of _0x3b335f){for(const _0x1f20d2 of _0x43291c){const _0x16f394=_0x37a953[_0x173c58(0x1d3)]();_0x16f394[_0x173c58(0x1cb)](_0x1f20d2),_0x16f394[_0x173c58(0x166)](_0x4ff971);const _0x28205a={};_0x28205a[_0x173c58(0x1db)]=_0x98bad4,_0x16f394[_0x173c58(0x188)](_0x28205a);}}_0x37a953['on'](CodeceptJS[_0x173c58(0x1dd)][_0x173c58(0x1a1)]['failed'],(_0x1d3cf,_0x14e7be)=>{const _0x1c45d0=_0x173c58;console[_0x1c45d0(0x17e)](_0x234191[_0x1c45d0(0x186)],_0x1d3cf[_0x1c45d0(0x172)]);const _0x1fb2cb={[_0x1d3cf[_0x1c45d0(0x172)]]:_0x1d3cf['err'][_0x1c45d0(0x1c0)]};_testErrorData[_0x1c45d0(0x1e0)](_0x1fb2cb);}),_0x37a953['on'](CodeceptJS[_0x173c58(0x1dd)][_0x173c58(0x1a1)]['passed'],async _0x541333=>{const _0x37e264=_0x173c58;console[_0x37e264(0x17e)](_0x234191[_0x37e264(0x180)],_0x541333[_0x37e264(0x172)]);}),_0x37a953['on'](CodeceptJS[_0x173c58(0x1dd)][_0x173c58(0x1a1)][_0x173c58(0x19c)],async _0x5abc30=>{const _0x25eec4=_0x173c58;console[_0x25eec4(0x17e)](_0x234191['UbxgG'],_0x5abc30['title']);}),_0x37a953['on'](CodeceptJS[_0x173c58(0x1dd)][_0x173c58(0x19b)][_0x173c58(0x1a2)],async()=>{const _0x2ec893=_0x173c58,_0x68b6a1=_0x234191[_0x2ec893(0x17f)][_0x2ec893(0x181)]('|');let _0x2eadac=0x0;while(!![]){switch(_0x68b6a1[_0x2eadac++]){case'0':testOpsHelper['printBuildLink']();continue;case'1':try{await TestHubHandler[_0x2ec893(0x1b0)]();}catch(_0xb10d4e){logger['debug'](_0x2ec893(0x1c7)+util[_0x2ec893(0x1de)](_0xb10d4e));}continue;case'2':_0x37a953['printResults']();continue;case'3':utilities[_0x2ec893(0x1b1)](_0x425834);continue;case'4':PerformanceTester[_0x2ec893(0x161)](PerformanceEvents['SDK_CLEANUP']);continue;case'5':_0x425834['errorMessage']=_testErrorData;continue;}break;}});async function _0x2f83ba(){const _0x4d04e5=_0x173c58;try{await _0x37a953['bootstrapAll'](),await _0x37a953[_0x4d04e5(0x19a)]();}finally{process[_0x4d04e5(0x194)](_0x47a308),await _0x37a953[_0x4d04e5(0x19d)]();}}PerformanceTester[_0x173c58(0x17b)](PerformanceEvents[_0x173c58(0x1a5)]),_0x234191[_0x173c58(0x1d2)](_0x2f83ba);}module['exports']=run;