#!/usr/bin/env node
'use strict';const a2_0x3cf7e8=a2_0x4797;(function(_0x4a097f,_0x34c177){const _0x3e8137=a2_0x4797,_0x4b88bd=_0x4a097f();while(!![]){try{const _0xf38a5f=-parseInt(_0x3e8137(0xc3))/0x1*(-parseInt(_0x3e8137(0xb8))/0x2)+-parseInt(_0x3e8137(0x108))/0x3+parseInt(_0x3e8137(0xe3))/0x4+-parseInt(_0x3e8137(0x110))/0x5*(-parseInt(_0x3e8137(0xf9))/0x6)+parseInt(_0x3e8137(0xb9))/0x7*(parseInt(_0x3e8137(0xf6))/0x8)+parseInt(_0x3e8137(0xf8))/0x9+parseInt(_0x3e8137(0xb1))/0xa*(-parseInt(_0x3e8137(0xf2))/0xb);if(_0xf38a5f===_0x34c177)break;else _0x4b88bd['push'](_0x4b88bd['shift']());}catch(_0x23353e){_0x4b88bd['push'](_0x4b88bd['shift']());}}}(a2_0x4d1c,0x207ea));const fs=require('fs'),path=require(a2_0x3cf7e8(0xfd)),util=require(a2_0x3cf7e8(0xda)),process=require(a2_0x3cf7e8(0xc7)),logger=require('../../helpers/logger')[a2_0x3cf7e8(0xa0)],{default:BrowserStackSetup}=require(a2_0x3cf7e8(0x111)),helper=require('../../helpers/helper'),utilities=require(a2_0x3cf7e8(0xed)),{checkAccessibilityPlatformConfig}=require(a2_0x3cf7e8(0x9a)),{setAccessibilityCapabilities}=require(a2_0x3cf7e8(0xcc)),{requireModule,nestedKeyValue,isBrowserstackInfra}=require(a2_0x3cf7e8(0xfa)),CodeceptJS=requireModule('codeceptjs/lib/index.js',a2_0x3cf7e8(0x99)),testOpsHelper=require(a2_0x3cf7e8(0x106)),TestHubHandler=require('../../helpers/testhub/testhubHandler'),constants=require(a2_0x3cf7e8(0xb5)),PerformanceTester=require(a2_0x3cf7e8(0xbf)),{FRAMEWORKS}=require(a2_0x3cf7e8(0xc9)),PerformanceEvents=require(a2_0x3cf7e8(0xe8))[a2_0x3cf7e8(0x10f)],_testErrorData=[],getUserCodeceptJSConfigs=(_0x2ce8bb,_0x328bb7)=>{const _0x41ba26=a2_0x3cf7e8,_0x462a8e={};_0x462a8e['jXtmy']=function(_0x3b2f37,_0x55ea8b){return _0x3b2f37===_0x55ea8b;},_0x462a8e['eOnqo']=_0x41ba26(0xd3),_0x462a8e[_0x41ba26(0xa8)]=_0x41ba26(0x10b);const _0xf6effb=_0x462a8e;let _0x486b21=null;const _0x31e878={};let _0x7ce0ee=_0x328bb7[_0x41ba26(0xad)](_0x22d7e9=>_0x22d7e9===_0x41ba26(0xa2));_0xf6effb['jXtmy'](_0x7ce0ee,-0x1)&&(_0x7ce0ee=_0x328bb7[_0x41ba26(0xad)](_0x444436=>_0x444436==='-c'));if(!helper[_0x41ba26(0x90)](_0x2ce8bb[_0x41ba26(0xa4)])&&fs['existsSync'](path[_0x41ba26(0xa9)](process[_0x41ba26(0xdc)](),_0x2ce8bb['config'])))_0x486b21=path[_0x41ba26(0xa9)](process[_0x41ba26(0xdc)](),_0x2ce8bb[_0x41ba26(0xa4)]),_0x328bb7[_0x41ba26(0xbc)](_0x7ce0ee,0x2);else{if(!helper[_0x41ba26(0x90)](_0x2ce8bb['c'])&&fs[_0x41ba26(0x109)](path[_0x41ba26(0xa9)](process[_0x41ba26(0xdc)](),_0x2ce8bb['c'])))_0x486b21=path['join'](process[_0x41ba26(0xdc)](),_0x2ce8bb['c']),_0x328bb7[_0x41ba26(0xbc)](_0x7ce0ee,0x2);else{if(fs['existsSync'](path[_0x41ba26(0xa9)](process[_0x41ba26(0xdc)](),_0xf6effb['eOnqo'])))_0x486b21=path[_0x41ba26(0xa9)](process['cwd'](),_0xf6effb[_0x41ba26(0xff)]);else fs[_0x41ba26(0x109)](path[_0x41ba26(0xa9)](process['cwd'](),_0xf6effb[_0x41ba26(0xa8)]))&&(_0x486b21=path[_0x41ba26(0xa9)](process[_0x41ba26(0xdc)](),_0xf6effb[_0x41ba26(0xa8)]));}}return process['env'][_0x41ba26(0xef)]=_0x486b21,_0x486b21;},getO11yRerunPattern=()=>{const _0x4b98b5=a2_0x3cf7e8,_0x39c542=helper[_0x4b98b5(0xd2)](process[_0x4b98b5(0xc2)]['BROWSERSTACK_RERUN']);if(_0x39c542){const _0x47153d=process[_0x4b98b5(0xc2)]['BROWSERSTACK_RERUN_TESTS'],_0x5abecf=[];if(helper[_0x4b98b5(0x87)](_0x47153d)&&!helper[_0x4b98b5(0x90)](_0x47153d)){_0x47153d[_0x4b98b5(0xdf)](',')[_0x4b98b5(0xbd)](_0x2c460c=>{const _0x3e2565=_0x4b98b5;_0x5abecf[_0x3e2565(0x9c)]('('+_0x2c460c[_0x3e2565(0x86)]()+')');});const _0x47c294='^'+_0x5abecf[_0x4b98b5(0xa9)]('|')+'$';return _0x47c294;}}return null;},a2_0xecbc24={};a2_0xecbc24[a2_0x3cf7e8(0x105)]=a2_0x3cf7e8(0xf1),a2_0xecbc24[a2_0x3cf7e8(0xc0)]='chromium',a2_0xecbc24[a2_0x3cf7e8(0xc4)]='firefox',a2_0xecbc24[a2_0x3cf7e8(0xde)]='webkit';function a2_0x4d1c(){const _0x2ef210=['accessibilityOptions','2015217AVZZJh','1221474WVuMVG','../../helpers/helper','2|1|3|5|4|0','run','path','kFXhJ','eOnqo','profile','FRAMEWORKS','browserName','MosQL','bEznP','chrome','../../helpers/test-observability/utils','frameworkName','186231qmKngx','existsSync','createGroupsOfSuites','codecept.json','plugins','parallelsPerPlatform','enabled','EVENTS','5uEwTbB','../../helpers/BrowserStackSetup','isTestObservabilitySession','initialize','oncfk','prepareCapabilities','finalExecution','printResults','require','errorMessage','trim','validateRerunTestList','desiredCapabilities','RlQJW','chdir','BROWSERSTACK_TEST_OBSERVABILITY_YML','passed','format','exports','eKDSE','isUndefined','info','skipSessionStatus','addOptions','KZVIw','SDK_SETUP','launchBuild','end','MUuXr','codeceptjs','../../helpers/accessibility-automation/helper','getUserWorkerCount','push','load','mergeDeep','browserWSEndpoint','winstonLogger','hWyrw','--config','test','config','start','teardownAll','now','sAKQh','join','SDK_CLEANUP','Workers','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','findIndex','Started\x20:\x20','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','event','755340kPbKLa','vmVCv','addConfig','SYAFJ','../utils/constants','validPlatformsPresent','kqMQK','4598CBQFrG','931Qtinks','platforms','getPlaywrightUrl','slice','map','failed','../../helpers/performance/performance-tester','playwright-chromium','vBuuv','env','64ZGeQUs','playwright-firefox','accessibility','browser','process','BwEfz','../../helpers/test-observability/constants','forEach','skipSessionName','../../bin/playwright/accessibility-helper','isEmpty','Playwright','CODECEPT','mwFnq','Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file','isTrue','codecept.conf.js','gHqut','addTests','Failed\x20:\x20','hrNfo','gherkin','toLowerCase','util','iBVxh','cwd','stack','playwright-webkit','split','testObservability','handleApp','useW3C','997616hrrWWD','BrowserStackPlugin.js','title','stringify','XQAqX','../../helpers/performance/constants','browserStackCwd','dirname','UYuKK','OYXRU','../../helpers/utilities','NtLEA','USER_CONFIG_DETAILS_PATH','DhFMH','chromium','110nuoJaX','cCeVM','setAdditionalCapabilities','log','7608KnCPjS'];a2_0x4d1c=function(){return _0x2ef210;};return a2_0x4d1c();}const pwToCodeceptBrowser=a2_0xecbc24;async function run(_0x193727,_0x235301,_0x4f208f){const _0x34ae56=a2_0x3cf7e8,_0x38cf42={'XQAqX':function(_0x43313c,_0x24e212){return _0x43313c+_0x24e212;},'BwEfz':function(_0x5e9518,_0x243a4a){return _0x5e9518(_0x243a4a);},'ZcfkA':function(_0x12e674,_0x4d7474,_0x23e476){return _0x12e674(_0x4d7474,_0x23e476);},'kFXhJ':'helpers','eKDSE':function(_0x296e9b){return _0x296e9b();},'iBVxh':function(_0x59bb17){return _0x59bb17();},'hWyrw':_0x34ae56(0xd6),'gEHYt':'Passed\x20:\x20','wmfdq':_0x34ae56(0xae),'MosQL':_0x34ae56(0xfb),'MUuXr':function(_0xeb95bf,_0x3ce344,_0x1dbbbc){return _0xeb95bf(_0x3ce344,_0x1dbbbc);},'UYuKK':_0x34ae56(0xd1),'SYAFJ':function(_0x3f6651,_0x74fa35,_0x538775){return _0x3f6651(_0x74fa35,_0x538775);},'DhFMH':'Playwright','hrNfo':'WebDriver','KZVIw':function(_0xf66345,_0x3ab6fa){return _0xf66345!=_0x3ab6fa;},'gHqut':function(_0x109778,_0x649825){return _0x109778===_0x649825;},'RlQJW':_0x34ae56(0xd8),'cCeVM':function(_0x16fe9c){return _0x16fe9c();},'cREGU':function(_0x2c7d8e,_0x2a80af){return _0x2c7d8e*_0x2a80af;},'mwFnq':_0x34ae56(0xc6),'vBuuv':function(_0x1a328e,_0x933ce3,_0x3f12b6){return _0x1a328e(_0x933ce3,_0x3f12b6);},'bEznP':_0x34ae56(0x88),'NtLEA':function(_0x218367,_0x19c6a4,_0x29b755){return _0x218367(_0x19c6a4,_0x29b755);},'kqMQK':'root','OYXRU':_0x34ae56(0xe4),'vmVCv':_0x34ae56(0xe9),'oncfk':function(_0x3e6637){return _0x3e6637();}};await _0x4f208f[_0x34ae56(0x113)](_0x193727),await helper[_0x34ae56(0xe1)](_0x4f208f['config']);if(!_0x4f208f[_0x34ae56(0xa4)])return;process[_0x34ae56(0x100)]=_0x193727[_0x34ae56(0x100)];_0x193727[_0x34ae56(0x100)]&&(process['env'][_0x34ae56(0x100)]=_0x193727[_0x34ae56(0x100)]);const _0x58fffc=_0x38cf42[_0x34ae56(0x98)](getUserCodeceptJSConfigs,_0x193727,_0x235301);let _0x1a070d={};_0x58fffc?(logger[_0x34ae56(0x91)]('Getting\x20your\x20codeceptjs\x20configs\x20from\x20'+_0x58fffc),_0x1a070d=CodeceptJS[_0x34ae56(0xa4)][_0x34ae56(0x9d)](_0x58fffc)):logger[_0x34ae56(0x91)](_0x38cf42[_0x34ae56(0xeb)]);let _0x47e07d=![];_0x38cf42[_0x34ae56(0xb4)](nestedKeyValue,_0x1a070d,[_0x38cf42['kFXhJ'],_0x38cf42['DhFMH']])&&(_0x47e07d=!![]);const _0x35ca3b=_0x47e07d?_0x38cf42[_0x34ae56(0xf0)]:_0x38cf42[_0x34ae56(0xd7)];let _0x4bceea=!_0x47e07d?helper[_0x34ae56(0xe2)](_0x4f208f[_0x34ae56(0xa4)]):![];!helper[_0x34ae56(0x90)](_0x4f208f['config']['accessibilityOptions'])&&(process[_0x34ae56(0xc2)][_0x34ae56(0xaf)]=JSON['stringify'](_0x4f208f[_0x34ae56(0xa4)][_0x34ae56(0xf7)]));let _0x3fbac2=_0x4f208f[_0x34ae56(0xa4)][_0x34ae56(0xc5)];_0x3fbac2=_0x3fbac2||_0x38cf42[_0x34ae56(0xc8)](checkAccessibilityPlatformConfig,_0x4f208f['config']),process[_0x34ae56(0xc2)]['BROWSERSTACK_TEST_ACCESSIBILITY_YML']=_0x3fbac2;_0x3fbac2&&(_0x4bceea=!_0x3fbac2);_0x38cf42[_0x34ae56(0x94)](_0x4f208f[_0x34ae56(0xa4)][_0x34ae56(0xe0)],null)?process[_0x34ae56(0xc2)]['BROWSERSTACK_TEST_OBSERVABILITY_YML']=_0x4f208f[_0x34ae56(0xa4)]['testObservability']:process[_0x34ae56(0xc2)][_0x34ae56(0x8b)]=_0x38cf42[_0x34ae56(0xd4)](_0x35ca3b,_0x38cf42[_0x34ae56(0xf0)]);const _0x5b9bc6=_0x38cf42[_0x34ae56(0x98)](nestedKeyValue,_0x1a070d,[_0x38cf42[_0x34ae56(0x89)]]),_0x20a84d=_0x5b9bc6&&!helper[_0x34ae56(0xcd)](_0x5b9bc6)?FRAMEWORKS['CODECEPT_CUCUMBER']:FRAMEWORKS['CODECEPT'],_0x3ea708=await TestHubHandler[_0x34ae56(0x96)](_0x20a84d,_0x4f208f);_0x3fbac2&&_0x38cf42[_0x34ae56(0xc8)](setAccessibilityCapabilities,_0x4f208f[_0x34ae56(0xa4)]);const _0x218753={},_0x4e9c5c=[],_0x4ba176=_0x4f208f[_0x34ae56(0xa4)][_0x34ae56(0x10d)]||helper[_0x34ae56(0x9b)](_0x193727,_0x235301,_0x4f208f[_0x34ae56(0xa4)],constants[_0x34ae56(0x101)][_0x34ae56(0xcf)])||0x1;let _0x562016=0x1;if(_0x38cf42[_0x34ae56(0xf3)](isBrowserstackInfra)){const _0x481120=helper[_0x34ae56(0x115)](_0x4f208f[_0x34ae56(0xa4)],_0x4bceea,constants[_0x34ae56(0x101)][_0x34ae56(0xcf)]);_0x481120[_0x34ae56(0xca)](_0x5f2998=>{const _0x21d65c=_0x34ae56;helper[_0x21d65c(0xf4)](_0x5f2998);}),helper[_0x34ae56(0xb6)](_0x4f208f[_0x34ae56(0xa4)])?_0x562016=_0x38cf42['cREGU'](_0x4ba176,_0x4f208f[_0x34ae56(0xa4)][_0x34ae56(0xba)]['length']):_0x562016=_0x4ba176,_0x481120[_0x34ae56(0xca)](_0x27d528=>{const _0x5ba491=_0x34ae56,_0x1b21d9=_0x38cf42[_0x5ba491(0xe7)](helper['getPlatformName'](_0x27d528,'_'),'_'+Date[_0x5ba491(0xa7)]()),_0x141d88=((()=>{const _0x10281f=_0x5ba491;if(_0x47e07d){const _0x1c70df=pwToCodeceptBrowser[_0x27d528['browserName']]||_0x27d528[_0x10281f(0x102)];return{'browser':_0x1c70df,[_0x1c70df]:{'browserWSEndpoint':_0x38cf42[_0x10281f(0xe7)](helper[_0x10281f(0xbb)](_0x4f208f['config']),_0x38cf42[_0x10281f(0xc8)](encodeURIComponent,JSON[_0x10281f(0xe6)](_0x27d528)))}};}const _0x4f6f15={};return _0x4f6f15[_0x10281f(0x88)]=_0x27d528,_0x4f6f15;})()),_0x267079=_0x38cf42['ZcfkA'](nestedKeyValue,_0x1a070d,[_0x38cf42[_0x5ba491(0xfe)],_0x35ca3b]);_0x218753[_0x1b21d9]=_0x267079?helper[_0x5ba491(0x9e)](_0x141d88,_0x267079):_0x141d88,!_0x47e07d&&(_0x218753[_0x1b21d9][_0x5ba491(0xc6)]=_0x27d528[_0x5ba491(0x102)]||_0x141d88['browser']),_0x4e9c5c[_0x5ba491(0x9c)](_0x1b21d9);});}else{_0x562016=0x1;if(_0x47e07d){const _0xfca5ae=_0x38cf42['SYAFJ'](nestedKeyValue,_0x1a070d,[_0x38cf42[_0x34ae56(0xfe)],_0x35ca3b,_0x38cf42[_0x34ae56(0xd0)]]),_0x78ca65=_0x38cf42[_0x34ae56(0xc1)](nestedKeyValue,_0x1a070d,[_0x38cf42['kFXhJ'],_0x35ca3b,_0xfca5ae]);_0x78ca65&&_0x78ca65[_0x34ae56(0x9f)]&&(_0x78ca65[_0x34ae56(0x9f)]=helper['prepareCapabilities'](null,null,_0x20a84d['toLowerCase'](),null,null,_0x78ca65['browserWSEndpoint']));}else _0x1a070d[_0x38cf42[_0x34ae56(0xfe)]][_0x35ca3b][_0x38cf42['bEznP']]=helper[_0x34ae56(0x115)](null,null,_0x20a84d[_0x34ae56(0xd9)](),_0x38cf42[_0x34ae56(0xee)](nestedKeyValue,_0x1a070d,[_0x38cf42[_0x34ae56(0xfe)],_0x35ca3b,_0x38cf42[_0x34ae56(0x104)]]),null,null);_0x218753[_0x38cf42[_0x34ae56(0xb7)]]=_0x1a070d,_0x4e9c5c[_0x34ae56(0x9c)](_0x38cf42[_0x34ae56(0xb7)]);}const _0x429328={};_0x429328['testConfig']=_0x58fffc;const _0x5b66b2=_0x429328,_0x316678=path[_0x34ae56(0xa9)](__dirname,_0x38cf42[_0x34ae56(0xec)]),_0x3a7efc=process['cwd']();process[_0x34ae56(0xc2)][_0x38cf42[_0x34ae56(0xb2)]]=_0x3a7efc,process[_0x34ae56(0x8a)](path[_0x34ae56(0xea)](_0x58fffc));const _0x2a50a1=new CodeceptJS[(_0x34ae56(0xab))](null,_0x5b66b2),_0x29f09d=_0x2a50a1[_0x34ae56(0x10a)](_0x562016),_0x1deb72=testOpsHelper[_0x34ae56(0x112)](),_0x161295=_0x4e9c5c['map'](_0x53d220=>{const _0x166852=_0x34ae56,_0x35dd61={};_0x35dd61[_0x166852(0xce)]=_0x218753[_0x53d220];const _0xc9ac76={};_0xc9ac76['WebDriver']=_0x218753[_0x53d220];const _0x37e2fe=_0x47e07d?_0x35dd61:_0xc9ac76,_0x5a3278=_0x38cf42[_0x166852(0x8f)](getO11yRerunPattern),_0x2f9942={};_0x2f9942['helpers']=_0x37e2fe;const _0x38ef4c={};_0x38ef4c[_0x166852(0x84)]=_0x316678,_0x38ef4c[_0x166852(0x10e)]=!![],_0x38ef4c[_0x166852(0xcb)]=_0x4f208f[_0x166852(0xa4)]['testContextOptions'][_0x166852(0xcb)],_0x38ef4c['skipSessionStatus']=_0x4f208f[_0x166852(0xa4)]['testContextOptions'][_0x166852(0x92)],_0x38ef4c['testObservability']=_0x1deb72,_0x38ef4c[_0x166852(0x107)]=_0x20a84d;const _0xf77cf5={};_0xf77cf5['BrowserStackPlugin']=_0x38ef4c;const _0x497e23={};return _0x497e23[_0x166852(0x10c)]=_0xf77cf5,helper[_0x166852(0x9e)]({},_0x1a070d,_0x38cf42[_0x166852(0xdb)](isBrowserstackInfra)?_0x2f9942:{},_0x5a3278?{'grep':_0x5a3278}:{},_0x497e23);});for(const _0x4c2da0 of _0x161295){for(const _0x415fc9 of _0x29f09d){const _0xcb9162=_0x2a50a1['spawn']();_0xcb9162[_0x34ae56(0xd5)](_0x415fc9),_0xcb9162[_0x34ae56(0xb3)](_0x4c2da0);const _0x1e3f51={};_0x1e3f51[_0x34ae56(0xa4)]=_0x58fffc,_0xcb9162[_0x34ae56(0x93)](_0x1e3f51);}}_0x2a50a1['on'](CodeceptJS['event'][_0x34ae56(0xa3)][_0x34ae56(0xbe)],(_0x55001b,_0x1b9e54)=>{const _0x529e33=_0x34ae56;console[_0x529e33(0xf5)](_0x38cf42[_0x529e33(0xa1)],_0x55001b['title']);const _0xd170c8={[_0x55001b[_0x529e33(0xe5)]]:_0x55001b['err'][_0x529e33(0xdd)]};_testErrorData[_0x529e33(0x9c)](_0xd170c8);}),_0x2a50a1['on'](CodeceptJS[_0x34ae56(0xb0)][_0x34ae56(0xa3)][_0x34ae56(0x8c)],async _0x23d7a9=>{const _0x4502d3=_0x34ae56;console['log'](_0x38cf42['gEHYt'],_0x23d7a9[_0x4502d3(0xe5)]);}),_0x2a50a1['on'](CodeceptJS[_0x34ae56(0xb0)]['test']['before'],async _0x6f6569=>{const _0x2d6868=_0x34ae56;console[_0x2d6868(0xf5)](_0x38cf42['wmfdq'],_0x6f6569[_0x2d6868(0xe5)]);}),_0x2a50a1['on'](CodeceptJS[_0x34ae56(0xb0)]['all']['result'],async()=>{const _0x73406e=_0x34ae56,_0x21a924=_0x38cf42[_0x73406e(0x103)][_0x73406e(0xdf)]('|');let _0x2ae44c=0x0;while(!![]){switch(_0x21a924[_0x2ae44c++]){case'0':_0x2a50a1[_0x73406e(0x83)]();continue;case'1':_0x4f208f[_0x73406e(0x85)]=_testErrorData;continue;case'2':PerformanceTester[_0x73406e(0xa5)](PerformanceEvents[_0x73406e(0xaa)]);continue;case'3':testOpsHelper['printBuildLink']();continue;case'4':try{await TestHubHandler['stop']();}catch(_0x2f766e){logger['debug'](_0x73406e(0xac)+util[_0x73406e(0x8d)](_0x2f766e));}continue;case'5':utilities[_0x73406e(0x82)](_0x4f208f);continue;}break;}});async function _0x5cbd6b(){const _0x41c365=_0x34ae56;try{await _0x2a50a1['bootstrapAll'](),await _0x2a50a1[_0x41c365(0xfc)]();}finally{process[_0x41c365(0x8a)](_0x3a7efc),await _0x2a50a1[_0x41c365(0xa6)]();}}PerformanceTester[_0x34ae56(0x97)](PerformanceEvents[_0x34ae56(0x95)]),_0x38cf42[_0x34ae56(0x114)](_0x5cbd6b);}function a2_0x4797(_0xa68a11,_0x52f9d2){const _0x4d1ce2=a2_0x4d1c();return a2_0x4797=function(_0x479727,_0x28439f){_0x479727=_0x479727-0x82;let _0x4db1ff=_0x4d1ce2[_0x479727];return _0x4db1ff;},a2_0x4797(_0xa68a11,_0x52f9d2);}module[a2_0x3cf7e8(0x8e)]=run;