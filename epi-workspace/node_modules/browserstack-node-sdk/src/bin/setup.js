#!/usr/bin/env node

const a50_0xe7fa5f=a50_0x1ad5;(function(_0x326b45,_0x20c1f8){const _0x1961e0=a50_0x1ad5,_0x579c0b=_0x326b45();while(!![]){try{const _0x160a68=-parseInt(_0x1961e0(0x85))/0x1*(parseInt(_0x1961e0(0xac))/0x2)+-parseInt(_0x1961e0(0x8c))/0x3+parseInt(_0x1961e0(0x9d))/0x4+-parseInt(_0x1961e0(0xc6))/0x5+parseInt(_0x1961e0(0x8e))/0x6*(-parseInt(_0x1961e0(0xce))/0x7)+parseInt(_0x1961e0(0x95))/0x8*(parseInt(_0x1961e0(0x89))/0x9)+-parseInt(_0x1961e0(0xb9))/0xa*(-parseInt(_0x1961e0(0xcf))/0xb);if(_0x160a68===_0x20c1f8)break;else _0x579c0b['push'](_0x579c0b['shift']());}catch(_0xf91975){_0x579c0b['push'](_0x579c0b['shift']());}}}(a50_0x4428,0x41179));const fs=require('fs'),helper=require(a50_0xe7fa5f(0x9f)),utilities=require('../helpers/utilities'),yaml=require('js-yaml'),yargs=require(a50_0xe7fa5f(0x8b)),logger=require(a50_0xe7fa5f(0x84))[a50_0xe7fa5f(0xb2)],configFileTemplate=__dirname+a50_0xe7fa5f(0x8a),configFileTemplatePW=__dirname+a50_0xe7fa5f(0xa7),configFile=process[a50_0xe7fa5f(0x91)]()+a50_0xe7fa5f(0xa6),packageFile=process[a50_0xe7fa5f(0x91)]()+a50_0xe7fa5f(0xa3),frameworks=['mocha',a50_0xe7fa5f(0x8f),a50_0xe7fa5f(0xba),a50_0xe7fa5f(0xbb),a50_0xe7fa5f(0xc8),a50_0xe7fa5f(0xa0),a50_0xe7fa5f(0xcb)];let config;logger[a50_0xe7fa5f(0x82)]('Creating\x20configuration\x20file...'),createConfigurationFile(yargs['argv'][a50_0xe7fa5f(0xbd)],yargs[a50_0xe7fa5f(0xbf)][a50_0xe7fa5f(0xc7)],yargs[a50_0xe7fa5f(0xbf)][a50_0xe7fa5f(0xcb)]);function a50_0x1ad5(_0x3771f6,_0x14c0d5){const _0x4428cb=a50_0x4428();return a50_0x1ad5=function(_0x1ad5e9,_0xd6b40e){_0x1ad5e9=_0x1ad5e9-0x82;let _0x41a04b=_0x4428cb[_0x1ad5e9];return _0x41a04b;},a50_0x1ad5(_0x3771f6,_0x14c0d5);}try{sdkSetup();}catch(a50_0x213482){logger['debug'](a50_0xe7fa5f(0x90)+a50_0x213482);}addScriptInPackageJson();function createConfigurationFile(_0x15a187,_0x7ce9a2,_0x321831=![]){const _0x2b6b4f=a50_0xe7fa5f,_0x27670c={};_0x27670c[_0x2b6b4f(0xcd)]=_0x2b6b4f(0xa2),_0x27670c['cRZON']=_0x2b6b4f(0xb3),_0x27670c[_0x2b6b4f(0xa4)]=_0x2b6b4f(0x88);const _0x316e21=_0x27670c;try{let _0xa5e1f5=fs['readFileSync'](_0x321831?configFileTemplatePW:configFileTemplate,_0x316e21['HYcao']);_0x15a187&&(_0xa5e1f5=_0xa5e1f5['replace'](_0x316e21[_0x2b6b4f(0xb0)],_0x15a187)),_0x7ce9a2&&(_0xa5e1f5=_0xa5e1f5[_0x2b6b4f(0xb1)](_0x316e21['MNdNV'],_0x7ce9a2)),config=yaml[_0x2b6b4f(0xa8)](_0xa5e1f5),fs[_0x2b6b4f(0xb5)](configFile,_0xa5e1f5,_0x5483db=>{_0x5483db&&logger['error'](_0x5483db);});}catch(_0x53f22e){logger['error'](_0x53f22e);}}function addPostInstallScript(_0x141060,_0x78c6b){const _0x3063e0=a50_0xe7fa5f,_0x2c0af6={};_0x2c0af6['ugaLI']=_0x3063e0(0xc0),_0x2c0af6['rkJfU']='npm\x20update\x20browserstack-node-sdk',_0x2c0af6[_0x3063e0(0xc3)]=_0x3063e0(0xb6);const _0x5b28b8=_0x2c0af6;let _0xf97dc4=_0x141060[_0x5b28b8[_0x3063e0(0xcc)]];if(_0xf97dc4&&_0xf97dc4['includes'](_0x5b28b8[_0x3063e0(0x97)]))return;!_0xf97dc4?_0xf97dc4=_0x5b28b8[_0x3063e0(0x97)]:_0xf97dc4+=_0x5b28b8[_0x3063e0(0xc3)],_0x78c6b[_0x3063e0(0xc2)]([_0x5b28b8[_0x3063e0(0xcc)],_0xf97dc4]);}function a50_0x4428(){const _0x313a99=['sTqow','../helpers/logger','9XdQtKf','indexOf','stringify','YOUR_ACCESS_KEY','378NvWvSC','/../../browserstack.yml.sample','yargs','560730DIRXvB','SDKSetup','30oZcwfn','jest','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','cwd','splice','OsPvo','browserstack-node-sdk','12912ghRcwR','vmAeV','rkJfU','node-setup','fireFunnelTestEvent','isUndefined','feIsC','length','1281476kGjfow','gMiye','../helpers/helper','codeceptjs','source','utf8','/package.json','MNdNV','browserstack-node-sdk\x20','/browserstack.yml','/../../browserstack.pw.yml.sample','load','GGrwl','zfkDO','YMKhB','36986jjNCTb','GAfBo','split','parse','cRZON','replace','winstonLogger','YOUR_USERNAME','debug','writeFileSync','\x20&&\x20npm\x20update\x20browserstack-node-sdk','kgfys','join','5659530KpCKZD','cucumber-js','node','Adding\x20new\x20script(s)\x20in\x20package.json...','username','JJGQT','argv','postinstall','-browserstack','push','bgXYy','scripts','jkjIc','185980ectZbH','key','nightwatch','BpCpV','vrDOI','playwright','ugaLI','HYcao','415730excgNm','11heIoDv','info'];a50_0x4428=function(){return _0x313a99;};return a50_0x4428();}function addScriptInPackageJson(){const _0x2251e4=a50_0xe7fa5f,_0xd6d0e7={'JJGQT':'utf8','vrDOI':function(_0x2abf45,_0x1e14f7){return _0x2abf45<_0x1e14f7;},'sTqow':function(_0x319b09,_0x10d10d,_0x5d7a81){return _0x319b09(_0x10d10d,_0x5d7a81);},'feIsC':function(_0x20b562,_0x1de8b7,_0x431808){return _0x20b562(_0x1de8b7,_0x431808);},'gMiye':function(_0x59c5a4,_0x24ea11,_0x42213c){return _0x59c5a4(_0x24ea11,_0x42213c);},'OsPvo':function(_0x548aab,_0x8e6267){return _0x548aab<_0x8e6267;},'OQHBu':function(_0x2d8348,_0x50050a){return _0x2d8348!==_0x50050a;},'YMKhB':_0x2251e4(0xbc)},_0x4c34f2=JSON[_0x2251e4(0xaf)](fs['readFileSync'](packageFile,_0xd6d0e7[_0x2251e4(0xbe)])),_0xb16dfa=[];for(let _0x3b9a24=0x0;_0xd6d0e7[_0x2251e4(0xca)](_0x3b9a24,frameworks['length']);_0x3b9a24+=0x1){const _0x58030a=_0xd6d0e7[_0x2251e4(0x83)](findScriptsWithFramework,_0x4c34f2[_0x2251e4(0xc4)],frameworks[_0x3b9a24]);for(let _0x190507=0x0;_0xd6d0e7[_0x2251e4(0xca)](_0x190507,_0x58030a[_0x2251e4(0x9c)]);_0x190507+=0x1){_0xb16dfa[_0x2251e4(0xc2)](_0xd6d0e7[_0x2251e4(0x9b)](getUpdatedCommand,_0x4c34f2[_0x2251e4(0xc4)],_0x58030a[_0x190507]));}_0xd6d0e7[_0x2251e4(0x9e)](addPostInstallScript,_0x4c34f2[_0x2251e4(0xc4)],_0xb16dfa);}const _0x42be07={..._0x4c34f2[_0x2251e4(0xc4)]},_0x2577d8=_0x42be07;for(let _0x509464=0x0;_0xd6d0e7[_0x2251e4(0x93)](_0x509464,_0xb16dfa['length']);_0x509464+=0x1){_0x2577d8[_0xb16dfa[_0x509464][0x0]]=_0xb16dfa[_0x509464][0x1];}_0xd6d0e7['OQHBu'](JSON['stringify'](_0x4c34f2['scripts']),JSON[_0x2251e4(0x87)](_0x2577d8))&&(logger[_0x2251e4(0x82)](_0xd6d0e7[_0x2251e4(0xab)]),_0x4c34f2[_0x2251e4(0xc4)]=_0x2577d8,fs[_0x2251e4(0xb5)](packageFile,JSON[_0x2251e4(0x87)](_0x4c34f2,null,0x2),_0x5eced5=>{_0x5eced5&&logger['error'](_0x5eced5);}));};function findScriptsWithFramework(_0x5c6f51,_0xb16e6f){const _0x51f282=a50_0xe7fa5f,_0x3c6c98={};_0x3c6c98['zfkDO']=function(_0x2d4bb5,_0x374cd0){return _0x2d4bb5<_0x374cd0;},_0x3c6c98['kgfys']=_0x51f282(0x94);const _0xc06a11=_0x3c6c98,_0x12e4e9=[],_0x385479=Object['entries'](_0x5c6f51);for(let _0x1c9ac9=0x0;_0xc06a11[_0x51f282(0xaa)](_0x1c9ac9,_0x385479[_0x51f282(0x9c)]);_0x1c9ac9+=0x1){_0x385479[_0x1c9ac9][0x1]['includes'](_0xb16e6f)&&!_0x385479[_0x1c9ac9][0x1]['includes'](_0xc06a11[_0x51f282(0xb7)])&&_0x12e4e9[_0x51f282(0xc2)](_0x385479[_0x1c9ac9][0x0]);}return _0x12e4e9;}function getUpdatedCommand(_0x3e44d1,_0x5c947b){const _0x5f0629=a50_0xe7fa5f,_0x1aefb6={};_0x1aefb6[_0x5f0629(0xad)]=function(_0x162314,_0x1b9f05){return _0x162314!==_0x1b9f05;},_0x1aefb6[_0x5f0629(0xa9)]='browserstack-node-sdk',_0x1aefb6[_0x5f0629(0xc9)]=function(_0xaa6bed,_0x323ce4){return _0xaa6bed===_0x323ce4;};const _0xfecf7b=_0x1aefb6,_0x84ab5c=_0x5c947b+_0x5f0629(0xc1),_0x43a7d6=_0x3e44d1[_0x5c947b],_0x20186d=_0x43a7d6[_0x5f0629(0xae)]('\x20');for(const _0x21ec8d of frameworks){if(_0xfecf7b[_0x5f0629(0xad)](_0x20186d[_0x5f0629(0x86)](_0x21ec8d),-0x1)){_0x20186d[_0x5f0629(0x92)](_0x20186d[_0x5f0629(0x86)](_0x21ec8d),0x0,_0xfecf7b['GGrwl']);break;}}let _0x1fef5b=_0x20186d[_0x5f0629(0xb8)]('\x20');return _0xfecf7b[_0x5f0629(0xc9)](_0x1fef5b,_0x43a7d6)&&(_0x1fef5b=_0x5f0629(0xa5)+_0x43a7d6),[_0x84ab5c,_0x1fef5b];}function sdkSetup(){const _0x2ac918=a50_0xe7fa5f,_0xd9a290={};_0xd9a290[_0x2ac918(0xc5)]=_0x2ac918(0x98),_0xd9a290[_0x2ac918(0x96)]=_0x2ac918(0x8d);const _0x1426c5=_0xd9a290;if(helper[_0x2ac918(0x9a)](config))return;config[_0x2ac918(0xa1)]=_0x1426c5[_0x2ac918(0xc5)];try{utilities[_0x2ac918(0x99)](_0x1426c5['vmAeV'],{},config,'');}catch(_0x38d83b){logger[_0x2ac918(0xb4)](_0x2ac918(0x90)+_0x38d83b);}}logger[a50_0xe7fa5f(0x82)]('Setup\x20completed');