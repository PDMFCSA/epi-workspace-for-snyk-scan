#!/usr/bin/env node

const a49_0x21b906=a49_0x4c67;(function(_0x1d8569,_0xad5f91){const _0x443c58=a49_0x4c67,_0xefcc8d=_0x1d8569();while(!![]){try{const _0x4fc91a=parseInt(_0x443c58(0x1dd))/0x1*(parseInt(_0x443c58(0x1b7))/0x2)+-parseInt(_0x443c58(0x1bf))/0x3+-parseInt(_0x443c58(0x1cd))/0x4+-parseInt(_0x443c58(0x1f5))/0x5*(parseInt(_0x443c58(0x1fb))/0x6)+-parseInt(_0x443c58(0x1cf))/0x7*(parseInt(_0x443c58(0x1df))/0x8)+parseInt(_0x443c58(0x1fe))/0x9+parseInt(_0x443c58(0x1d1))/0xa;if(_0x4fc91a===_0xad5f91)break;else _0xefcc8d['push'](_0xefcc8d['shift']());}catch(_0x283383){_0xefcc8d['push'](_0xefcc8d['shift']());}}}(a49_0x1075,0xe369b));const fs=require('fs'),helper=require(a49_0x21b906(0x1c3)),utilities=require(a49_0x21b906(0x1e5)),yaml=require('js-yaml'),yargs=require('yargs'),logger=require('../helpers/logger')[a49_0x21b906(0x1f3)],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process[a49_0x21b906(0x1f8)]()+a49_0x21b906(0x1de),packageFile=process[a49_0x21b906(0x1f8)]()+'/package.json',frameworks=[a49_0x21b906(0x1d0),a49_0x21b906(0x1e2),'cucumber-js',a49_0x21b906(0x1ba),a49_0x21b906(0x1c9),a49_0x21b906(0x1f2),a49_0x21b906(0x1b8)];let config;logger[a49_0x21b906(0x1b5)](a49_0x21b906(0x1e7)),createConfigurationFile(yargs[a49_0x21b906(0x1d6)][a49_0x21b906(0x1cc)],yargs[a49_0x21b906(0x1d6)]['key'],yargs[a49_0x21b906(0x1d6)][a49_0x21b906(0x1b8)]);try{sdkSetup();}catch(a49_0x457252){logger[a49_0x21b906(0x1f9)](a49_0x21b906(0x1da)+a49_0x457252);}addScriptInPackageJson();function a49_0x1075(){const _0xbaa32b=['../helpers/utilities','BSAvh','Creating\x20configuration\x20file...','-browserstack','indexOf','source','splice','npLos','AkBXC','VtIge','push','join','npm\x20update\x20browserstack-node-sdk','codeceptjs','winstonLogger','scripts','280580HuZYuM','cjkFW','error','cwd','debug','ZYtxr','6WlIxob','vdZIU','Adding\x20new\x20script(s)\x20in\x20package.json...','12744864KsJxYS','nTENp','info','WLSxL','2beDWoS','playwright','yRPVE','node','utf8','split','length','load','2247945fqLXFJ','writeFileSync','sZoYs','stringify','../helpers/helper','browserstack-node-sdk','readFileSync','UYPai','parse','YOUR_USERNAME','nightwatch','YIIxA','bYcQh','username','4467684jmErfD','node-setup','2270940YjuQmO','mocha','5637350QrhmrU','oKZGs','aWYMW','PmkyG','fireFunnelTestEvent','argv','seThn','Setup\x20completed','aBFpG','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','includes','browserstack-node-sdk\x20','1522844kZRdbs','/browserstack.yml','16NfWypw','isUndefined','replace','jest','entries','YOUR_ACCESS_KEY'];a49_0x1075=function(){return _0xbaa32b;};return a49_0x1075();}function createConfigurationFile(_0x5a7ea2,_0x577476,_0x5efc74=![]){const _0x1bcdec=a49_0x21b906,_0x31e6ee={};_0x31e6ee[_0x1bcdec(0x1d2)]=_0x1bcdec(0x1bb),_0x31e6ee[_0x1bcdec(0x1fc)]=_0x1bcdec(0x1c8),_0x31e6ee[_0x1bcdec(0x1ca)]=_0x1bcdec(0x1e4);const _0x114109=_0x31e6ee;try{let _0x3a82ad=fs[_0x1bcdec(0x1c5)](_0x5efc74?configFileTemplatePW:configFileTemplate,_0x114109[_0x1bcdec(0x1d2)]);_0x5a7ea2&&(_0x3a82ad=_0x3a82ad[_0x1bcdec(0x1e1)](_0x114109['vdZIU'],_0x5a7ea2)),_0x577476&&(_0x3a82ad=_0x3a82ad['replace'](_0x114109[_0x1bcdec(0x1ca)],_0x577476)),config=yaml[_0x1bcdec(0x1be)](_0x3a82ad),fs[_0x1bcdec(0x1c0)](configFile,_0x3a82ad,_0x5ceea3=>{_0x5ceea3&&logger['error'](_0x5ceea3);});}catch(_0x19122e){logger['error'](_0x19122e);}}function addPostInstallScript(_0x285bd1,_0x2ead75){const _0x495fc1=a49_0x21b906,_0x8b4536={};_0x8b4536['BSAvh']='postinstall',_0x8b4536[_0x495fc1(0x1b4)]=_0x495fc1(0x1f1),_0x8b4536[_0x495fc1(0x1c1)]='\x20&&\x20npm\x20update\x20browserstack-node-sdk';const _0xc22fa7=_0x8b4536;let _0x368fc4=_0x285bd1[_0xc22fa7[_0x495fc1(0x1e6)]];if(_0x368fc4&&_0x368fc4[_0x495fc1(0x1db)](_0xc22fa7['nTENp']))return;!_0x368fc4?_0x368fc4=_0xc22fa7[_0x495fc1(0x1b4)]:_0x368fc4+=_0xc22fa7[_0x495fc1(0x1c1)],_0x2ead75['push']([_0xc22fa7['BSAvh'],_0x368fc4]);}function addScriptInPackageJson(){const _0x2dd709=a49_0x21b906,_0xc4cf6c={'seThn':_0x2dd709(0x1bb),'npLos':function(_0x6db65c,_0x50d0dc){return _0x6db65c<_0x50d0dc;},'PmkyG':function(_0x28a54d,_0x4929f5,_0x26af28){return _0x28a54d(_0x4929f5,_0x26af28);},'aBFpG':function(_0xfdf7f5,_0x293b50,_0x7d2534){return _0xfdf7f5(_0x293b50,_0x7d2534);},'cjkFW':function(_0x322801,_0x99706c){return _0x322801<_0x99706c;},'bYcQh':function(_0x5828aa,_0x1fd9af){return _0x5828aa!==_0x1fd9af;},'oALhB':_0x2dd709(0x1fd)},_0x5f3764=JSON[_0x2dd709(0x1c7)](fs[_0x2dd709(0x1c5)](packageFile,_0xc4cf6c[_0x2dd709(0x1d7)])),_0x370d4c=[];for(let _0xfc5469=0x0;_0xc4cf6c[_0x2dd709(0x1ec)](_0xfc5469,frameworks[_0x2dd709(0x1bd)]);_0xfc5469+=0x1){const _0x1e51ff=_0xc4cf6c[_0x2dd709(0x1d4)](findScriptsWithFramework,_0x5f3764['scripts'],frameworks[_0xfc5469]);for(let _0x4992c4=0x0;_0xc4cf6c[_0x2dd709(0x1ec)](_0x4992c4,_0x1e51ff['length']);_0x4992c4+=0x1){_0x370d4c[_0x2dd709(0x1ef)](_0xc4cf6c[_0x2dd709(0x1d9)](getUpdatedCommand,_0x5f3764['scripts'],_0x1e51ff[_0x4992c4]));}_0xc4cf6c[_0x2dd709(0x1d4)](addPostInstallScript,_0x5f3764['scripts'],_0x370d4c);}const _0x101710={..._0x5f3764[_0x2dd709(0x1f4)]},_0x51840e=_0x101710;for(let _0x2a6357=0x0;_0xc4cf6c[_0x2dd709(0x1f6)](_0x2a6357,_0x370d4c[_0x2dd709(0x1bd)]);_0x2a6357+=0x1){_0x51840e[_0x370d4c[_0x2a6357][0x0]]=_0x370d4c[_0x2a6357][0x1];}_0xc4cf6c[_0x2dd709(0x1cb)](JSON[_0x2dd709(0x1c2)](_0x5f3764[_0x2dd709(0x1f4)]),JSON['stringify'](_0x51840e))&&(logger[_0x2dd709(0x1b5)](_0xc4cf6c['oALhB']),_0x5f3764[_0x2dd709(0x1f4)]=_0x51840e,fs[_0x2dd709(0x1c0)](packageFile,JSON[_0x2dd709(0x1c2)](_0x5f3764,null,0x2),_0x3ad63d=>{const _0x4d5100=_0x2dd709;_0x3ad63d&&logger[_0x4d5100(0x1f7)](_0x3ad63d);}));}function a49_0x4c67(_0x5776d5,_0x1d7a82){const _0x10758e=a49_0x1075();return a49_0x4c67=function(_0x4c67e8,_0x19d603){_0x4c67e8=_0x4c67e8-0x1b4;let _0x5319d6=_0x10758e[_0x4c67e8];return _0x5319d6;},a49_0x4c67(_0x5776d5,_0x1d7a82);};function findScriptsWithFramework(_0xfb21b7,_0x33a17a){const _0x136f67=a49_0x21b906,_0x5bcbf7={};_0x5bcbf7['AkBXC']=function(_0x3e83a6,_0x557304){return _0x3e83a6<_0x557304;},_0x5bcbf7[_0x136f67(0x1b9)]=_0x136f67(0x1c4);const _0x473a55=_0x5bcbf7,_0x4d33ae=[],_0x18ad13=Object[_0x136f67(0x1e3)](_0xfb21b7);for(let _0x3a091c=0x0;_0x473a55[_0x136f67(0x1ed)](_0x3a091c,_0x18ad13[_0x136f67(0x1bd)]);_0x3a091c+=0x1){_0x18ad13[_0x3a091c][0x1]['includes'](_0x33a17a)&&!_0x18ad13[_0x3a091c][0x1][_0x136f67(0x1db)](_0x473a55['yRPVE'])&&_0x4d33ae[_0x136f67(0x1ef)](_0x18ad13[_0x3a091c][0x0]);}return _0x4d33ae;}function getUpdatedCommand(_0x5f55e6,_0x41e2b4){const _0x26bdaf=a49_0x21b906,_0x26fcd5={};_0x26fcd5[_0x26bdaf(0x1fa)]=function(_0x391c21,_0x4d7450){return _0x391c21!==_0x4d7450;},_0x26fcd5[_0x26bdaf(0x1d3)]=_0x26bdaf(0x1c4),_0x26fcd5['WLSxL']=function(_0x390e22,_0x599f97){return _0x390e22===_0x599f97;};const _0xeea5ef=_0x26fcd5,_0x14a844=_0x41e2b4+_0x26bdaf(0x1e8),_0x79eeda=_0x5f55e6[_0x41e2b4],_0x4fc266=_0x79eeda[_0x26bdaf(0x1bc)]('\x20');for(const _0x214c76 of frameworks){if(_0xeea5ef[_0x26bdaf(0x1fa)](_0x4fc266[_0x26bdaf(0x1e9)](_0x214c76),-0x1)){_0x4fc266[_0x26bdaf(0x1eb)](_0x4fc266[_0x26bdaf(0x1e9)](_0x214c76),0x0,_0xeea5ef[_0x26bdaf(0x1d3)]);break;}}let _0x4e3032=_0x4fc266[_0x26bdaf(0x1f0)]('\x20');return _0xeea5ef[_0x26bdaf(0x1b6)](_0x4e3032,_0x79eeda)&&(_0x4e3032=_0x26bdaf(0x1dc)+_0x79eeda),[_0x14a844,_0x4e3032];}function sdkSetup(){const _0x13c0fd=a49_0x21b906,_0x3a2461={};_0x3a2461[_0x13c0fd(0x1c6)]=_0x13c0fd(0x1ce),_0x3a2461[_0x13c0fd(0x1ee)]='SDKSetup';const _0x5201aa=_0x3a2461;if(helper[_0x13c0fd(0x1e0)](config))return;config[_0x13c0fd(0x1ea)]=_0x5201aa['UYPai'];try{utilities[_0x13c0fd(0x1d5)](_0x5201aa['VtIge'],{},config,'');}catch(_0x2bfb35){logger['debug'](_0x13c0fd(0x1da)+_0x2bfb35);}}logger[a49_0x21b906(0x1b5)](a49_0x21b906(0x1d8));