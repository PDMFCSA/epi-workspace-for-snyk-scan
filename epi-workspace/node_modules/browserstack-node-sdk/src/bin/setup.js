#!/usr/bin/env node

const a48_0xdbf1a0=a48_0x3bac;(function(_0x22f8a8,_0x3b99db){const _0x2c6bfe=a48_0x3bac,_0x40f541=_0x22f8a8();while(!![]){try{const _0x108b27=-parseInt(_0x2c6bfe(0xc2))/0x1+parseInt(_0x2c6bfe(0xc6))/0x2*(-parseInt(_0x2c6bfe(0x96))/0x3)+parseInt(_0x2c6bfe(0xb1))/0x4*(-parseInt(_0x2c6bfe(0xcb))/0x5)+parseInt(_0x2c6bfe(0xbf))/0x6+parseInt(_0x2c6bfe(0xb7))/0x7*(parseInt(_0x2c6bfe(0x90))/0x8)+parseInt(_0x2c6bfe(0x95))/0x9*(parseInt(_0x2c6bfe(0xa4))/0xa)+-parseInt(_0x2c6bfe(0xc4))/0xb*(parseInt(_0x2c6bfe(0xa6))/0xc);if(_0x108b27===_0x3b99db)break;else _0x40f541['push'](_0x40f541['shift']());}catch(_0x976018){_0x40f541['push'](_0x40f541['shift']());}}}(a48_0x3101,0x52dae));const fs=require('fs'),helper=require(a48_0xdbf1a0(0xbb)),utilities=require('../helpers/utilities'),yaml=require('js-yaml'),yargs=require('yargs'),logger=require('../helpers/logger')[a48_0xdbf1a0(0xb4)],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+a48_0xdbf1a0(0xa0),configFile=process[a48_0xdbf1a0(0xd3)]()+a48_0xdbf1a0(0xac),packageFile=process['cwd']()+a48_0xdbf1a0(0xa8),frameworks=[a48_0xdbf1a0(0xd2),a48_0xdbf1a0(0x8d),a48_0xdbf1a0(0xae),'node',a48_0xdbf1a0(0xc8),a48_0xdbf1a0(0xb0),a48_0xdbf1a0(0xaa)];let config;logger[a48_0xdbf1a0(0xd1)](a48_0xdbf1a0(0xcf)),createConfigurationFile(yargs['argv'][a48_0xdbf1a0(0xab)],yargs[a48_0xdbf1a0(0x9d)][a48_0xdbf1a0(0xce)],yargs[a48_0xdbf1a0(0x9d)][a48_0xdbf1a0(0xaa)]);try{sdkSetup();}catch(a48_0x367376){logger[a48_0xdbf1a0(0xd0)](a48_0xdbf1a0(0x8e)+a48_0x367376);}addScriptInPackageJson();function createConfigurationFile(_0x177070,_0x5ee4a0,_0x560414=![]){const _0x12e89f=a48_0xdbf1a0,_0x569b35={};_0x569b35['XDmWN']='utf8',_0x569b35[_0x12e89f(0xba)]=_0x12e89f(0x9e),_0x569b35[_0x12e89f(0xc5)]=_0x12e89f(0x93);const _0x3aa3fa=_0x569b35;try{let _0x3193c7=fs[_0x12e89f(0x8f)](_0x560414?configFileTemplatePW:configFileTemplate,_0x3aa3fa[_0x12e89f(0xa7)]);_0x177070&&(_0x3193c7=_0x3193c7[_0x12e89f(0x9f)](_0x3aa3fa[_0x12e89f(0xba)],_0x177070)),_0x5ee4a0&&(_0x3193c7=_0x3193c7[_0x12e89f(0x9f)](_0x3aa3fa[_0x12e89f(0xc5)],_0x5ee4a0)),config=yaml[_0x12e89f(0xa3)](_0x3193c7),fs[_0x12e89f(0xb5)](configFile,_0x3193c7,_0x1ce1bb=>{const _0x5ba775=_0x12e89f;_0x1ce1bb&&logger[_0x5ba775(0xa2)](_0x1ce1bb);});}catch(_0x20e143){logger[_0x12e89f(0xa2)](_0x20e143);}}function addPostInstallScript(_0x2e4553,_0x5ef7b5){const _0x13198d=a48_0xdbf1a0,_0x500859={};_0x500859[_0x13198d(0xaf)]='postinstall',_0x500859[_0x13198d(0xb3)]='npm\x20update\x20browserstack-node-sdk',_0x500859['yeVTQ']='\x20&&\x20npm\x20update\x20browserstack-node-sdk';const _0x2157fb=_0x500859;let _0x1bf6e6=_0x2e4553[_0x2157fb['bWbsc']];if(_0x1bf6e6&&_0x1bf6e6[_0x13198d(0xbc)](_0x2157fb[_0x13198d(0xb3)]))return;!_0x1bf6e6?_0x1bf6e6=_0x2157fb[_0x13198d(0xb3)]:_0x1bf6e6+=_0x2157fb[_0x13198d(0xca)],_0x5ef7b5[_0x13198d(0x9c)]([_0x2157fb['bWbsc'],_0x1bf6e6]);}function addScriptInPackageJson(){const _0x937c36=a48_0xdbf1a0,_0x405f17={'YfExW':_0x937c36(0xa5),'gRbkO':function(_0x132ee7,_0x1af11f){return _0x132ee7<_0x1af11f;},'fvwEh':function(_0x3274bb,_0x368b8f,_0x4d6a14){return _0x3274bb(_0x368b8f,_0x4d6a14);},'fGZQG':function(_0x547cbc,_0x117ab2,_0x21614f){return _0x547cbc(_0x117ab2,_0x21614f);},'Ddvfn':function(_0x5b39d8,_0x1d1a36){return _0x5b39d8<_0x1d1a36;},'jrBgF':function(_0x2d0af8,_0x34bf90){return _0x2d0af8!==_0x34bf90;},'ruwOh':_0x937c36(0xc1)},_0x3b9167=JSON[_0x937c36(0xa9)](fs[_0x937c36(0x8f)](packageFile,_0x405f17[_0x937c36(0xa1)])),_0x3f9ff9=[];for(let _0x144cd2=0x0;_0x405f17['gRbkO'](_0x144cd2,frameworks[_0x937c36(0x92)]);_0x144cd2+=0x1){const _0x21941f=_0x405f17['fvwEh'](findScriptsWithFramework,_0x3b9167[_0x937c36(0xb9)],frameworks[_0x144cd2]);for(let _0x10be1c=0x0;_0x405f17[_0x937c36(0x94)](_0x10be1c,_0x21941f[_0x937c36(0x92)]);_0x10be1c+=0x1){_0x3f9ff9[_0x937c36(0x9c)](_0x405f17[_0x937c36(0xc9)](getUpdatedCommand,_0x3b9167[_0x937c36(0xb9)],_0x21941f[_0x10be1c]));}_0x405f17['fGZQG'](addPostInstallScript,_0x3b9167[_0x937c36(0xb9)],_0x3f9ff9);}const _0x5d357d={..._0x3b9167[_0x937c36(0xb9)]},_0x16ddb7=_0x5d357d;for(let _0x3c1a53=0x0;_0x405f17[_0x937c36(0x91)](_0x3c1a53,_0x3f9ff9[_0x937c36(0x92)]);_0x3c1a53+=0x1){_0x16ddb7[_0x3f9ff9[_0x3c1a53][0x0]]=_0x3f9ff9[_0x3c1a53][0x1];}_0x405f17['jrBgF'](JSON['stringify'](_0x3b9167[_0x937c36(0xb9)]),JSON[_0x937c36(0xc0)](_0x16ddb7))&&(logger[_0x937c36(0xd1)](_0x405f17[_0x937c36(0xad)]),_0x3b9167[_0x937c36(0xb9)]=_0x16ddb7,fs[_0x937c36(0xb5)](packageFile,JSON[_0x937c36(0xc0)](_0x3b9167,null,0x2),_0x584b34=>{const _0x324e2e=_0x937c36;_0x584b34&&logger[_0x324e2e(0xa2)](_0x584b34);}));};function a48_0x3bac(_0x167111,_0x819956){const _0x310141=a48_0x3101();return a48_0x3bac=function(_0x3bac75,_0x57dfba){_0x3bac75=_0x3bac75-0x8d;let _0x5cb04d=_0x310141[_0x3bac75];return _0x5cb04d;},a48_0x3bac(_0x167111,_0x819956);}function findScriptsWithFramework(_0x8fcf8f,_0x59e174){const _0x1ebff1=a48_0xdbf1a0,_0x34ab54={};_0x34ab54[_0x1ebff1(0xbd)]=function(_0xa794aa,_0x1feb17){return _0xa794aa<_0x1feb17;},_0x34ab54[_0x1ebff1(0x9b)]=_0x1ebff1(0x9a);const _0x152225=_0x34ab54,_0xc067ca=[],_0x49b607=Object[_0x1ebff1(0x97)](_0x8fcf8f);for(let _0xc9f664=0x0;_0x152225['krcQo'](_0xc9f664,_0x49b607['length']);_0xc9f664+=0x1){_0x49b607[_0xc9f664][0x1][_0x1ebff1(0xbc)](_0x59e174)&&!_0x49b607[_0xc9f664][0x1][_0x1ebff1(0xbc)](_0x152225['TeUXX'])&&_0xc067ca[_0x1ebff1(0x9c)](_0x49b607[_0xc9f664][0x0]);}return _0xc067ca;}function getUpdatedCommand(_0x52f5a0,_0x2e1bca){const _0x25f312=a48_0xdbf1a0,_0x189f80={};_0x189f80[_0x25f312(0xcc)]=function(_0xe88cec,_0x2b21ff){return _0xe88cec!==_0x2b21ff;},_0x189f80[_0x25f312(0xb8)]=_0x25f312(0x9a),_0x189f80[_0x25f312(0xc7)]=function(_0x4892c3,_0x517e85){return _0x4892c3===_0x517e85;};const _0x14b958=_0x189f80,_0x59a94f=_0x2e1bca+_0x25f312(0xb2),_0x540431=_0x52f5a0[_0x2e1bca],_0x2a4300=_0x540431['split']('\x20');for(const _0x50e38f of frameworks){if(_0x14b958['JDFcN'](_0x2a4300[_0x25f312(0xcd)](_0x50e38f),-0x1)){_0x2a4300[_0x25f312(0xd4)](_0x2a4300[_0x25f312(0xcd)](_0x50e38f),0x0,_0x14b958[_0x25f312(0xb8)]);break;}}let _0x45d5f9=_0x2a4300['join']('\x20');return _0x14b958[_0x25f312(0xc7)](_0x45d5f9,_0x540431)&&(_0x45d5f9=_0x25f312(0x98)+_0x540431),[_0x59a94f,_0x45d5f9];}function a48_0x3101(){const _0x27875d=['length','YOUR_ACCESS_KEY','gRbkO','232353zZwuCl','5793ZWiVrJ','entries','browserstack-node-sdk\x20','kEfLk','browserstack-node-sdk','TeUXX','push','argv','YOUR_USERNAME','replace','/../../browserstack.pw.yml.sample','YfExW','error','load','210CyIYjB','utf8','96TEtpBt','XDmWN','/package.json','parse','playwright','username','/browserstack.yml','ruwOh','cucumber-js','bWbsc','codeceptjs','5276MYoIxq','-browserstack','mGDLv','winstonLogger','writeFileSync','Setup\x20completed','4125590EwrPcr','EovHj','scripts','cKKVi','../helpers/helper','includes','krcQo','Bxxbj','3720756DjJGgy','stringify','Adding\x20new\x20script(s)\x20in\x20package.json...','580408dqXnqQ','source','34078oIGnGt','fwgDJ','478fuJmJQ','TKTQJ','nightwatch','fvwEh','yeVTQ','1310nvsEvZ','JDFcN','indexOf','key','Creating\x20configuration\x20file...','debug','info','mocha','cwd','splice','jest','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','readFileSync','8eGoguG','Ddvfn'];a48_0x3101=function(){return _0x27875d;};return a48_0x3101();}function sdkSetup(){const _0x134688=a48_0xdbf1a0,_0x13c24b={};_0x13c24b['Bxxbj']='node-setup',_0x13c24b[_0x134688(0x99)]='SDKSetup';const _0x298eef=_0x13c24b;if(helper['isUndefined'](config))return;config[_0x134688(0xc3)]=_0x298eef[_0x134688(0xbe)];try{utilities['fireFunnelTestEvent'](_0x298eef[_0x134688(0x99)],{},config,'');}catch(_0xa21c7b){logger[_0x134688(0xd0)](_0x134688(0x8e)+_0xa21c7b);}}logger[a48_0xdbf1a0(0xd1)](a48_0xdbf1a0(0xb6));