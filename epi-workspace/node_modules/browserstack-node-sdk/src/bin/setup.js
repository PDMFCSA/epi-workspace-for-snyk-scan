#!/usr/bin/env node

const a45_0x10e6b3=a45_0x302f;(function(_0x454c9c,_0x4c2e54){const _0x3d4859=a45_0x302f,_0xc0ff9d=_0x454c9c();while(!![]){try{const _0x27ffbf=-parseInt(_0x3d4859(0xea))/0x1+-parseInt(_0x3d4859(0xbb))/0x2+parseInt(_0x3d4859(0xde))/0x3*(parseInt(_0x3d4859(0xe0))/0x4)+-parseInt(_0x3d4859(0xb2))/0x5+-parseInt(_0x3d4859(0xcb))/0x6+parseInt(_0x3d4859(0xf7))/0x7+parseInt(_0x3d4859(0xb5))/0x8;if(_0x27ffbf===_0x4c2e54)break;else _0xc0ff9d['push'](_0xc0ff9d['shift']());}catch(_0x278ce1){_0xc0ff9d['push'](_0xc0ff9d['shift']());}}}(a45_0x1264,0x45a61));const fs=require('fs'),helper=require(a45_0x10e6b3(0xd7)),utilities=require(a45_0x10e6b3(0xf3)),yaml=require(a45_0x10e6b3(0xb7)),yargs=require(a45_0x10e6b3(0xcc)),logger=require(a45_0x10e6b3(0xc3))[a45_0x10e6b3(0xbf)],configFileTemplate=__dirname+a45_0x10e6b3(0xd9),configFileTemplatePW=__dirname+a45_0x10e6b3(0xb4),configFile=process[a45_0x10e6b3(0xcd)]()+a45_0x10e6b3(0xc1),packageFile=process[a45_0x10e6b3(0xcd)]()+a45_0x10e6b3(0xf9),frameworks=[a45_0x10e6b3(0xd8),a45_0x10e6b3(0xf8),a45_0x10e6b3(0xb3),a45_0x10e6b3(0xe6),a45_0x10e6b3(0xeb),'codeceptjs',a45_0x10e6b3(0xef)];let config;logger[a45_0x10e6b3(0xc0)]('Creating\x20configuration\x20file...'),createConfigurationFile(yargs[a45_0x10e6b3(0xf0)][a45_0x10e6b3(0xf1)],yargs['argv'][a45_0x10e6b3(0xee)],yargs[a45_0x10e6b3(0xf0)]['playwright']);try{sdkSetup();}catch(a45_0x9c4ed8){logger[a45_0x10e6b3(0xed)](a45_0x10e6b3(0xbe)+a45_0x9c4ed8);}addScriptInPackageJson();function createConfigurationFile(_0x1ae596,_0x3b7e9d,_0x4784a6=![]){const _0x3e5993=a45_0x10e6b3,_0xeec441={};_0xeec441['MzonR']='utf8',_0xeec441[_0x3e5993(0xe9)]=_0x3e5993(0xe8),_0xeec441[_0x3e5993(0xc5)]=_0x3e5993(0xbd);const _0x327c95=_0xeec441;try{let _0x2ec355=fs[_0x3e5993(0xda)](_0x4784a6?configFileTemplatePW:configFileTemplate,_0x327c95['MzonR']);_0x1ae596&&(_0x2ec355=_0x2ec355[_0x3e5993(0xd4)](_0x327c95[_0x3e5993(0xe9)],_0x1ae596)),_0x3b7e9d&&(_0x2ec355=_0x2ec355[_0x3e5993(0xd4)](_0x327c95[_0x3e5993(0xc5)],_0x3b7e9d)),config=yaml[_0x3e5993(0xb9)](_0x2ec355),fs[_0x3e5993(0xd2)](configFile,_0x2ec355,_0x3064b4=>{_0x3064b4&&logger['error'](_0x3064b4);});}catch(_0x42a60b){logger[_0x3e5993(0xf6)](_0x42a60b);}}function addPostInstallScript(_0x1d4511,_0x29ee8e){const _0x256faf=a45_0x10e6b3,_0x381f49={};_0x381f49[_0x256faf(0xdc)]=_0x256faf(0xc8),_0x381f49[_0x256faf(0xc2)]=_0x256faf(0xf5),_0x381f49[_0x256faf(0xce)]=_0x256faf(0xca);const _0x42ac15=_0x381f49;let _0x22842e=_0x1d4511[_0x42ac15[_0x256faf(0xdc)]];if(_0x22842e&&_0x22842e[_0x256faf(0xf2)](_0x42ac15[_0x256faf(0xc2)]))return;!_0x22842e?_0x22842e=_0x42ac15['dHgzo']:_0x22842e+=_0x42ac15[_0x256faf(0xce)],_0x29ee8e[_0x256faf(0xc6)]([_0x42ac15[_0x256faf(0xdc)],_0x22842e]);}function a45_0x302f(_0x5b654c,_0x1201bb){const _0x1264f7=a45_0x1264();return a45_0x302f=function(_0x302f82,_0x1415a0){_0x302f82=_0x302f82-0xb0;let _0x3a19cb=_0x1264f7[_0x302f82];return _0x3a19cb;},a45_0x302f(_0x5b654c,_0x1201bb);}function addScriptInPackageJson(){const _0x2072e6=a45_0x10e6b3,_0xfe80b2={'sjsDd':'utf8','iazNa':function(_0x59da36,_0x1d4dfa){return _0x59da36<_0x1d4dfa;},'IqGgT':function(_0x37af60,_0x4c85de,_0x90afad){return _0x37af60(_0x4c85de,_0x90afad);},'jcJQh':function(_0x37a8ee,_0x417265,_0x223639){return _0x37a8ee(_0x417265,_0x223639);},'JWvNt':function(_0x973800,_0x1b13ff,_0x4d49ad){return _0x973800(_0x1b13ff,_0x4d49ad);},'CScEP':function(_0x9b41cd,_0x264e8a){return _0x9b41cd<_0x264e8a;},'SbZfn':function(_0x17fd96,_0x104529){return _0x17fd96!==_0x104529;},'SHwSp':_0x2072e6(0xd0)},_0x5490fe=JSON['parse'](fs[_0x2072e6(0xda)](packageFile,_0xfe80b2['sjsDd'])),_0x1414bc=[];for(let _0x535076=0x0;_0xfe80b2[_0x2072e6(0xe1)](_0x535076,frameworks['length']);_0x535076+=0x1){const _0x4cc50e=_0xfe80b2[_0x2072e6(0xe7)](findScriptsWithFramework,_0x5490fe[_0x2072e6(0xe4)],frameworks[_0x535076]);for(let _0x5b51b2=0x0;_0xfe80b2[_0x2072e6(0xe1)](_0x5b51b2,_0x4cc50e[_0x2072e6(0xc9)]);_0x5b51b2+=0x1){_0x1414bc[_0x2072e6(0xc6)](_0xfe80b2['jcJQh'](getUpdatedCommand,_0x5490fe['scripts'],_0x4cc50e[_0x5b51b2]));}_0xfe80b2[_0x2072e6(0xec)](addPostInstallScript,_0x5490fe[_0x2072e6(0xe4)],_0x1414bc);}const _0xd5de29={..._0x5490fe[_0x2072e6(0xe4)]},_0x3c076e=_0xd5de29;for(let _0x11a313=0x0;_0xfe80b2[_0x2072e6(0xd1)](_0x11a313,_0x1414bc['length']);_0x11a313+=0x1){_0x3c076e[_0x1414bc[_0x11a313][0x0]]=_0x1414bc[_0x11a313][0x1];}_0xfe80b2[_0x2072e6(0xd5)](JSON[_0x2072e6(0xb6)](_0x5490fe[_0x2072e6(0xe4)]),JSON[_0x2072e6(0xb6)](_0x3c076e))&&(logger[_0x2072e6(0xc0)](_0xfe80b2['SHwSp']),_0x5490fe[_0x2072e6(0xe4)]=_0x3c076e,fs[_0x2072e6(0xd2)](packageFile,JSON['stringify'](_0x5490fe,null,0x2),_0xcde3c8=>{_0xcde3c8&&logger['error'](_0xcde3c8);}));};function a45_0x1264(){const _0x45c5f6=['postinstall','length','\x20&&\x20npm\x20update\x20browserstack-node-sdk','2417598mEXxeP','yargs','cwd','QrAcH','dekiP','Adding\x20new\x20script(s)\x20in\x20package.json...','CScEP','writeFileSync','split','replace','SbZfn','PNKSV','../helpers/helper','mocha','/../../browserstack.yml.sample','readFileSync','-browserstack','uESPA','join','340179euYkXx','browserstack-node-sdk\x20','20yUBgPs','iazNa','splice','entries','scripts','Setup\x20completed','node','IqGgT','YOUR_USERNAME','wDniE','162079CPyfDS','nightwatch','JWvNt','debug','key','playwright','argv','username','includes','../helpers/utilities','bhZTP','npm\x20update\x20browserstack-node-sdk','error','2571646ACGruP','jest','/package.json','isUndefined','jPigP','1148735nDNQHs','cucumber-js','/../../browserstack.pw.yml.sample','3467096DVJeFk','stringify','js-yaml','indexOf','load','SDKSetup','575380UzgIAy','node-setup','YOUR_ACCESS_KEY','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','winstonLogger','info','/browserstack.yml','dHgzo','../helpers/logger','BdCPF','rnMXy','push','RBjtF'];a45_0x1264=function(){return _0x45c5f6;};return a45_0x1264();}function findScriptsWithFramework(_0x40818b,_0x564bd4){const _0x58b6b4=a45_0x10e6b3,_0x3ae4ed={};_0x3ae4ed[_0x58b6b4(0xc4)]=function(_0xb8e4a3,_0x3585ea){return _0xb8e4a3<_0x3585ea;},_0x3ae4ed['bhZTP']='browserstack-node-sdk';const _0x3ed395=_0x3ae4ed,_0x2c4cb7=[],_0x4abfdd=Object[_0x58b6b4(0xe3)](_0x40818b);for(let _0x461586=0x0;_0x3ed395[_0x58b6b4(0xc4)](_0x461586,_0x4abfdd['length']);_0x461586+=0x1){_0x4abfdd[_0x461586][0x1]['includes'](_0x564bd4)&&!_0x4abfdd[_0x461586][0x1][_0x58b6b4(0xf2)](_0x3ed395[_0x58b6b4(0xf4)])&&_0x2c4cb7[_0x58b6b4(0xc6)](_0x4abfdd[_0x461586][0x0]);}return _0x2c4cb7;}function getUpdatedCommand(_0x5ee303,_0x59ac71){const _0x2f9dd3=a45_0x10e6b3,_0x452c0b={};_0x452c0b['RBjtF']=function(_0x34c6a3,_0x116cb6){return _0x34c6a3!==_0x116cb6;},_0x452c0b['khfWp']='browserstack-node-sdk',_0x452c0b['dekiP']=function(_0x438d3b,_0x4ec0b4){return _0x438d3b===_0x4ec0b4;};const _0x2c771f=_0x452c0b,_0x452ad7=_0x59ac71+_0x2f9dd3(0xdb),_0x31da12=_0x5ee303[_0x59ac71],_0x254128=_0x31da12[_0x2f9dd3(0xd3)]('\x20');for(const _0x263fd1 of frameworks){if(_0x2c771f[_0x2f9dd3(0xc7)](_0x254128['indexOf'](_0x263fd1),-0x1)){_0x254128[_0x2f9dd3(0xe2)](_0x254128[_0x2f9dd3(0xb8)](_0x263fd1),0x0,_0x2c771f['khfWp']);break;}}let _0x1028ba=_0x254128[_0x2f9dd3(0xdd)]('\x20');return _0x2c771f[_0x2f9dd3(0xcf)](_0x1028ba,_0x31da12)&&(_0x1028ba=_0x2f9dd3(0xdf)+_0x31da12),[_0x452ad7,_0x1028ba];}function sdkSetup(){const _0x46d588=a45_0x10e6b3,_0x1eba3f={};_0x1eba3f[_0x46d588(0xd6)]=_0x46d588(0xbc),_0x1eba3f[_0x46d588(0xb1)]=_0x46d588(0xba);const _0x5344cd=_0x1eba3f;if(helper[_0x46d588(0xb0)](config))return;config['source']=_0x5344cd[_0x46d588(0xd6)];try{utilities['fireFunnelTestEvent'](_0x5344cd[_0x46d588(0xb1)],{},config,'');}catch(_0x5700f4){logger[_0x46d588(0xed)](_0x46d588(0xbe)+_0x5700f4);}}logger[a45_0x10e6b3(0xc0)](a45_0x10e6b3(0xe5));