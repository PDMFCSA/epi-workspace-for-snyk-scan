#!/usr/bin/env node

const a46_0x232a37=a46_0x46eb;(function(_0x4f801d,_0x47ad24){const _0x44b561=a46_0x46eb,_0x1a3f22=_0x4f801d();while(!![]){try{const _0xa6eb88=-parseInt(_0x44b561(0x1d6))/0x1*(-parseInt(_0x44b561(0x1b9))/0x2)+-parseInt(_0x44b561(0x1ec))/0x3*(parseInt(_0x44b561(0x1d8))/0x4)+-parseInt(_0x44b561(0x1cf))/0x5*(parseInt(_0x44b561(0x1b7))/0x6)+parseInt(_0x44b561(0x1f1))/0x7*(-parseInt(_0x44b561(0x1be))/0x8)+-parseInt(_0x44b561(0x1d9))/0x9+-parseInt(_0x44b561(0x1bb))/0xa+parseInt(_0x44b561(0x1cc))/0xb;if(_0xa6eb88===_0x47ad24)break;else _0x1a3f22['push'](_0x1a3f22['shift']());}catch(_0x5eb6c2){_0x1a3f22['push'](_0x1a3f22['shift']());}}}(a46_0x11d0,0x683d4));const fs=require('fs'),helper=require('../helpers/helper'),utilities=require(a46_0x232a37(0x1de)),yaml=require('js-yaml'),yargs=require(a46_0x232a37(0x1b3)),logger=require('../helpers/logger')[a46_0x232a37(0x1c7)],configFileTemplate=__dirname+a46_0x232a37(0x1b0),configFileTemplatePW=__dirname+a46_0x232a37(0x1c3),configFile=process[a46_0x232a37(0x1d3)]()+'/browserstack.yml',packageFile=process[a46_0x232a37(0x1d3)]()+a46_0x232a37(0x1b1),frameworks=[a46_0x232a37(0x1b8),'jest',a46_0x232a37(0x1ed),a46_0x232a37(0x1e2),a46_0x232a37(0x1c2),a46_0x232a37(0x1c8),a46_0x232a37(0x1c9)];function a46_0x46eb(_0x5b6d0e,_0x3af1a0){const _0x11d08a=a46_0x11d0();return a46_0x46eb=function(_0x46ebcf,_0x39d7d9){_0x46ebcf=_0x46ebcf-0x1af;let _0x3ba33c=_0x11d08a[_0x46ebcf];return _0x3ba33c;},a46_0x46eb(_0x5b6d0e,_0x3af1a0);}let config;logger[a46_0x232a37(0x1f0)](a46_0x232a37(0x1e0)),createConfigurationFile(yargs[a46_0x232a37(0x1ea)]['username'],yargs[a46_0x232a37(0x1ea)][a46_0x232a37(0x1c6)],yargs[a46_0x232a37(0x1ea)]['playwright']);try{sdkSetup();}catch(a46_0x28731f){logger[a46_0x232a37(0x1d4)](a46_0x232a37(0x1c5)+a46_0x28731f);}addScriptInPackageJson();function createConfigurationFile(_0x327789,_0xc1d258,_0x4a40f4=![]){const _0x612c5d=a46_0x232a37,_0x3f64fa={};_0x3f64fa[_0x612c5d(0x1bf)]=_0x612c5d(0x1e3),_0x3f64fa['MrEBf']=_0x612c5d(0x1ce),_0x3f64fa['HYLUz']='YOUR_ACCESS_KEY';const _0x4627e8=_0x3f64fa;try{let _0x3068d6=fs[_0x612c5d(0x1c0)](_0x4a40f4?configFileTemplatePW:configFileTemplate,_0x4627e8[_0x612c5d(0x1bf)]);_0x327789&&(_0x3068d6=_0x3068d6[_0x612c5d(0x1f3)](_0x4627e8[_0x612c5d(0x1bc)],_0x327789)),_0xc1d258&&(_0x3068d6=_0x3068d6[_0x612c5d(0x1f3)](_0x4627e8['HYLUz'],_0xc1d258)),config=yaml[_0x612c5d(0x1c1)](_0x3068d6),fs['writeFileSync'](configFile,_0x3068d6,_0x47c876=>{const _0x4a441c=_0x612c5d;_0x47c876&&logger[_0x4a441c(0x1e7)](_0x47c876);});}catch(_0x26570b){logger[_0x612c5d(0x1e7)](_0x26570b);}}function addPostInstallScript(_0xa0765f,_0x1aa23f){const _0x450fb0=a46_0x232a37,_0x1e05c4={};_0x1e05c4[_0x450fb0(0x1c4)]=_0x450fb0(0x1af),_0x1e05c4[_0x450fb0(0x1b4)]='npm\x20update\x20browserstack-node-sdk',_0x1e05c4[_0x450fb0(0x1dc)]='\x20&&\x20npm\x20update\x20browserstack-node-sdk';const _0x1babad=_0x1e05c4;let _0x1a5d45=_0xa0765f[_0x1babad[_0x450fb0(0x1c4)]];if(_0x1a5d45&&_0x1a5d45['includes'](_0x1babad['Fklby']))return;!_0x1a5d45?_0x1a5d45=_0x1babad[_0x450fb0(0x1b4)]:_0x1a5d45+=_0x1babad['VSyjj'],_0x1aa23f[_0x450fb0(0x1f7)]([_0x1babad[_0x450fb0(0x1c4)],_0x1a5d45]);}function addScriptInPackageJson(){const _0x1f1fce=a46_0x232a37,_0x21bf96={'BEZtw':'utf8','ckwMm':function(_0x3c6f41,_0x14b439){return _0x3c6f41<_0x14b439;},'pnDRj':function(_0x4f9c76,_0x15175e,_0x46a271){return _0x4f9c76(_0x15175e,_0x46a271);},'iKrZK':function(_0x2c95f5,_0x4091e6,_0x2c9fa7){return _0x2c95f5(_0x4091e6,_0x2c9fa7);},'DCDgL':function(_0x1bc499,_0x5ca332){return _0x1bc499<_0x5ca332;},'dbDae':function(_0x4f602c,_0x1fd576){return _0x4f602c!==_0x1fd576;},'SdNjg':'Adding\x20new\x20script(s)\x20in\x20package.json...'},_0x5cdc34=JSON[_0x1f1fce(0x1ca)](fs['readFileSync'](packageFile,_0x21bf96[_0x1f1fce(0x1eb)])),_0x52ac21=[];for(let _0x436278=0x0;_0x21bf96[_0x1f1fce(0x1d2)](_0x436278,frameworks[_0x1f1fce(0x1d1)]);_0x436278+=0x1){const _0x55c0de=_0x21bf96[_0x1f1fce(0x1e9)](findScriptsWithFramework,_0x5cdc34[_0x1f1fce(0x1df)],frameworks[_0x436278]);for(let _0x5b44bf=0x0;_0x21bf96[_0x1f1fce(0x1d2)](_0x5b44bf,_0x55c0de[_0x1f1fce(0x1d1)]);_0x5b44bf+=0x1){_0x52ac21['push'](_0x21bf96['iKrZK'](getUpdatedCommand,_0x5cdc34[_0x1f1fce(0x1df)],_0x55c0de[_0x5b44bf]));}_0x21bf96[_0x1f1fce(0x1e4)](addPostInstallScript,_0x5cdc34[_0x1f1fce(0x1df)],_0x52ac21);}const _0x8600f6={..._0x5cdc34[_0x1f1fce(0x1df)]},_0x10abda=_0x8600f6;for(let _0x4907be=0x0;_0x21bf96['DCDgL'](_0x4907be,_0x52ac21[_0x1f1fce(0x1d1)]);_0x4907be+=0x1){_0x10abda[_0x52ac21[_0x4907be][0x0]]=_0x52ac21[_0x4907be][0x1];}_0x21bf96['dbDae'](JSON[_0x1f1fce(0x1f2)](_0x5cdc34['scripts']),JSON[_0x1f1fce(0x1f2)](_0x10abda))&&(logger['info'](_0x21bf96[_0x1f1fce(0x1b5)]),_0x5cdc34[_0x1f1fce(0x1df)]=_0x10abda,fs[_0x1f1fce(0x1e6)](packageFile,JSON['stringify'](_0x5cdc34,null,0x2),_0x3c3cc7=>{_0x3c3cc7&&logger['error'](_0x3c3cc7);}));}function a46_0x11d0(){const _0x3a155a=['cucumber-js','includes','split','info','2807Ewrcqv','stringify','replace','fWyxr','source','-browserstack','push','postinstall','/../../browserstack.yml.sample','/package.json','rvfDK','yargs','Fklby','SdNjg','fireFunnelTestEvent','54714ijkDKg','mocha','14200kqSNHz','browserstack-node-sdk\x20','5183550NvFoDe','MrEBf','join','944cPQZHj','JnqPb','readFileSync','load','nightwatch','/../../browserstack.pw.yml.sample','oZObm','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','key','winstonLogger','codeceptjs','playwright','parse','SDKSetup','18296267JfrbiF','entries','YOUR_USERNAME','5akZxSE','qTYOc','length','ckwMm','cwd','debug','bzAbW','106xUdFFf','Guvzp','599232yLrTWn','5985909tmmlqN','eRfAn','browserstack-node-sdk','VSyjj','Setup\x20completed','../helpers/utilities','scripts','Creating\x20configuration\x20file...','splice','node','utf8','iKrZK','TFtTy','writeFileSync','error','indexOf','pnDRj','argv','BEZtw','15xcgBFM'];a46_0x11d0=function(){return _0x3a155a;};return a46_0x11d0();};function findScriptsWithFramework(_0x493727,_0x129220){const _0x1cf1bd=a46_0x232a37,_0x4b2762={};_0x4b2762[_0x1cf1bd(0x1f4)]=function(_0x27da10,_0x2e44e5){return _0x27da10<_0x2e44e5;},_0x4b2762[_0x1cf1bd(0x1da)]=_0x1cf1bd(0x1db);const _0x57439b=_0x4b2762,_0x92a02e=[],_0xdd4d52=Object[_0x1cf1bd(0x1cd)](_0x493727);for(let _0xff5a86=0x0;_0x57439b[_0x1cf1bd(0x1f4)](_0xff5a86,_0xdd4d52[_0x1cf1bd(0x1d1)]);_0xff5a86+=0x1){_0xdd4d52[_0xff5a86][0x1][_0x1cf1bd(0x1ee)](_0x129220)&&!_0xdd4d52[_0xff5a86][0x1]['includes'](_0x57439b['eRfAn'])&&_0x92a02e[_0x1cf1bd(0x1f7)](_0xdd4d52[_0xff5a86][0x0]);}return _0x92a02e;}function getUpdatedCommand(_0x3565d0,_0x3707aa){const _0x2889c1=a46_0x232a37,_0xe82b0d={};_0xe82b0d[_0x2889c1(0x1d7)]=function(_0x313e9d,_0x13f1cf){return _0x313e9d!==_0x13f1cf;},_0xe82b0d[_0x2889c1(0x1e5)]=_0x2889c1(0x1db),_0xe82b0d[_0x2889c1(0x1d0)]=function(_0x2e3d28,_0x3512f1){return _0x2e3d28===_0x3512f1;};const _0x3b13a6=_0xe82b0d,_0x37e1fe=_0x3707aa+_0x2889c1(0x1f6),_0x1ac491=_0x3565d0[_0x3707aa],_0x3f4290=_0x1ac491[_0x2889c1(0x1ef)]('\x20');for(const _0x678355 of frameworks){if(_0x3b13a6[_0x2889c1(0x1d7)](_0x3f4290[_0x2889c1(0x1e8)](_0x678355),-0x1)){_0x3f4290[_0x2889c1(0x1e1)](_0x3f4290[_0x2889c1(0x1e8)](_0x678355),0x0,_0x3b13a6[_0x2889c1(0x1e5)]);break;}}let _0x1ed554=_0x3f4290[_0x2889c1(0x1bd)]('\x20');return _0x3b13a6[_0x2889c1(0x1d0)](_0x1ed554,_0x1ac491)&&(_0x1ed554=_0x2889c1(0x1ba)+_0x1ac491),[_0x37e1fe,_0x1ed554];}function sdkSetup(){const _0x1e9bc6=a46_0x232a37,_0x1501c5={};_0x1501c5[_0x1e9bc6(0x1d5)]='node-setup',_0x1501c5[_0x1e9bc6(0x1b2)]=_0x1e9bc6(0x1cb);const _0x1fe761=_0x1501c5;if(helper['isUndefined'](config))return;config[_0x1e9bc6(0x1f5)]=_0x1fe761[_0x1e9bc6(0x1d5)];try{utilities[_0x1e9bc6(0x1b6)](_0x1fe761[_0x1e9bc6(0x1b2)],{},config,'');}catch(_0x1debd8){logger['debug'](_0x1e9bc6(0x1c5)+_0x1debd8);}}logger[a46_0x232a37(0x1f0)](a46_0x232a37(0x1dd));