#!/usr/bin/env node

const a45_0x2b6231=a45_0x4cb1;(function(_0x45fcfd,_0x8dbd38){const _0x475ceb=a45_0x4cb1,_0x104458=_0x45fcfd();while(!![]){try{const _0x4eb154=-parseInt(_0x475ceb(0xda))/0x1*(-parseInt(_0x475ceb(0xd5))/0x2)+parseInt(_0x475ceb(0xa6))/0x3*(-parseInt(_0x475ceb(0xad))/0x4)+parseInt(_0x475ceb(0xd4))/0x5*(-parseInt(_0x475ceb(0xd9))/0x6)+parseInt(_0x475ceb(0xb6))/0x7*(parseInt(_0x475ceb(0xdb))/0x8)+-parseInt(_0x475ceb(0xde))/0x9*(parseInt(_0x475ceb(0xca))/0xa)+parseInt(_0x475ceb(0xac))/0xb*(parseInt(_0x475ceb(0xb7))/0xc)+parseInt(_0x475ceb(0xe3))/0xd;if(_0x4eb154===_0x8dbd38)break;else _0x104458['push'](_0x104458['shift']());}catch(_0x466865){_0x104458['push'](_0x104458['shift']());}}}(a45_0x348c,0x212b4));const fs=require('fs'),helper=require(a45_0x2b6231(0x9e)),utilities=require(a45_0x2b6231(0xbe)),yaml=require(a45_0x2b6231(0xe0)),yargs=require(a45_0x2b6231(0xb2)),logger=require(a45_0x2b6231(0xdf))[a45_0x2b6231(0xdd)],configFileTemplate=__dirname+a45_0x2b6231(0xd3),configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process['cwd']()+a45_0x2b6231(0xa1),packageFile=process['cwd']()+a45_0x2b6231(0xaa),frameworks=[a45_0x2b6231(0xa8),a45_0x2b6231(0xd1),a45_0x2b6231(0xd8),a45_0x2b6231(0xc0),a45_0x2b6231(0x99),a45_0x2b6231(0xe4),a45_0x2b6231(0xce)];let config;function a45_0x348c(){const _0x42bdd9=['join','browserstack-node-sdk\x20','../helpers/helper','swilA','stringify','/browserstack.yml','-browserstack','\x20&&\x20npm\x20update\x20browserstack-node-sdk','fxWtT','indexOf','3ZFqpjQ','xNQdf','mocha','tAOpX','/package.json','argv','374011zLaatv','524024ABmoBi','length','SNeVF','splice','SGJaj','yargs','TmYRU','split','gykFq','133yncHsW','12ppDKYW','error','npm\x20update\x20browserstack-node-sdk','YOUR_USERNAME','info','QkeQj','Setup\x20completed','../helpers/utilities','includes','node','node-setup','SDKSetup','replace','key','utf8','amfOh','scripts','jkfiB','SxbeX','10uSHfvA','RgKph','source','XoDTx','playwright','push','tqtyD','jest','Creating\x20configuration\x20file...','/../../browserstack.yml.sample','5hvdSPe','130usBFTj','entries','GjIMN','cucumber-js','675228VEzHNd','2323sMHaxX','32088zmLoiI','PMvnU','winstonLogger','2363706DrscGA','../helpers/logger','js-yaml','browserstack-node-sdk','writeFileSync','4950829gzsule','codeceptjs','ZAMxJ','postinstall','debug','nightwatch','readFileSync','fireFunnelTestEvent'];a45_0x348c=function(){return _0x42bdd9;};return a45_0x348c();}logger[a45_0x2b6231(0xbb)](a45_0x2b6231(0xd2)),createConfigurationFile(yargs[a45_0x2b6231(0xab)]['username'],yargs[a45_0x2b6231(0xab)][a45_0x2b6231(0xc4)],yargs['argv'][a45_0x2b6231(0xce)]);try{sdkSetup();}catch(a45_0x56779d){logger['debug']('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a45_0x56779d);}addScriptInPackageJson();function createConfigurationFile(_0x2d5e99,_0x19db08,_0x382ead=![]){const _0x1c3ba1=a45_0x2b6231,_0x4fdbce={};_0x4fdbce[_0x1c3ba1(0xa9)]=_0x1c3ba1(0xc5),_0x4fdbce[_0x1c3ba1(0xc6)]=_0x1c3ba1(0xba),_0x4fdbce[_0x1c3ba1(0xc9)]='YOUR_ACCESS_KEY';const _0x1d77eb=_0x4fdbce;try{let _0x3ef659=fs['readFileSync'](_0x382ead?configFileTemplatePW:configFileTemplate,_0x1d77eb[_0x1c3ba1(0xa9)]);_0x2d5e99&&(_0x3ef659=_0x3ef659['replace'](_0x1d77eb[_0x1c3ba1(0xc6)],_0x2d5e99)),_0x19db08&&(_0x3ef659=_0x3ef659[_0x1c3ba1(0xc3)](_0x1d77eb[_0x1c3ba1(0xc9)],_0x19db08)),config=yaml['load'](_0x3ef659),fs[_0x1c3ba1(0xe2)](configFile,_0x3ef659,_0x6815e4=>{const _0x3b41d4=_0x1c3ba1;_0x6815e4&&logger[_0x3b41d4(0xb8)](_0x6815e4);});}catch(_0x55bafd){logger['error'](_0x55bafd);}}function addPostInstallScript(_0x9022ae,_0x306fbd){const _0x3eaba2=a45_0x2b6231,_0x434c9c={};_0x434c9c['TmYRU']=_0x3eaba2(0xe6),_0x434c9c[_0x3eaba2(0xa7)]=_0x3eaba2(0xb9),_0x434c9c[_0x3eaba2(0xd0)]=_0x3eaba2(0xa3);const _0x2fc8b9=_0x434c9c;let _0x495823=_0x9022ae[_0x2fc8b9[_0x3eaba2(0xb3)]];if(_0x495823&&_0x495823[_0x3eaba2(0xbf)](_0x2fc8b9[_0x3eaba2(0xa7)]))return;!_0x495823?_0x495823=_0x2fc8b9['xNQdf']:_0x495823+=_0x2fc8b9['tqtyD'],_0x306fbd[_0x3eaba2(0xcf)]([_0x2fc8b9['TmYRU'],_0x495823]);}function a45_0x4cb1(_0x7948a3,_0x1eb9b2){const _0x348c8c=a45_0x348c();return a45_0x4cb1=function(_0x4cb1f6,_0x5da0ec){_0x4cb1f6=_0x4cb1f6-0x99;let _0x3e7b86=_0x348c8c[_0x4cb1f6];return _0x3e7b86;},a45_0x4cb1(_0x7948a3,_0x1eb9b2);}function addScriptInPackageJson(){const _0x408f56=a45_0x2b6231,_0x41477d={'swilA':_0x408f56(0xc5),'SNeVF':function(_0x1c3ce8,_0x4fcd3a){return _0x1c3ce8<_0x4fcd3a;},'jkfiB':function(_0x6eef02,_0x47100b,_0x3a5926){return _0x6eef02(_0x47100b,_0x3a5926);},'SGJaj':function(_0x284a17,_0x5f2ab4){return _0x284a17!==_0x5f2ab4;},'fxWtT':'Adding\x20new\x20script(s)\x20in\x20package.json...'},_0x4f3fad=JSON['parse'](fs[_0x408f56(0x9a)](packageFile,_0x41477d[_0x408f56(0x9f)])),_0x536a2a=[];for(let _0x305f3a=0x0;_0x41477d[_0x408f56(0xaf)](_0x305f3a,frameworks[_0x408f56(0xae)]);_0x305f3a+=0x1){const _0x6f7ba3=_0x41477d[_0x408f56(0xc8)](findScriptsWithFramework,_0x4f3fad[_0x408f56(0xc7)],frameworks[_0x305f3a]);for(let _0x54acc8=0x0;_0x41477d[_0x408f56(0xaf)](_0x54acc8,_0x6f7ba3['length']);_0x54acc8+=0x1){_0x536a2a[_0x408f56(0xcf)](_0x41477d[_0x408f56(0xc8)](getUpdatedCommand,_0x4f3fad[_0x408f56(0xc7)],_0x6f7ba3[_0x54acc8]));}_0x41477d[_0x408f56(0xc8)](addPostInstallScript,_0x4f3fad['scripts'],_0x536a2a);}const _0x1da3b3={..._0x4f3fad['scripts']},_0x476b3c=_0x1da3b3;for(let _0x187465=0x0;_0x41477d[_0x408f56(0xaf)](_0x187465,_0x536a2a['length']);_0x187465+=0x1){_0x476b3c[_0x536a2a[_0x187465][0x0]]=_0x536a2a[_0x187465][0x1];}_0x41477d[_0x408f56(0xb1)](JSON['stringify'](_0x4f3fad['scripts']),JSON['stringify'](_0x476b3c))&&(logger[_0x408f56(0xbb)](_0x41477d[_0x408f56(0xa4)]),_0x4f3fad[_0x408f56(0xc7)]=_0x476b3c,fs[_0x408f56(0xe2)](packageFile,JSON[_0x408f56(0xa0)](_0x4f3fad,null,0x2),_0x4f1ef8=>{_0x4f1ef8&&logger['error'](_0x4f1ef8);}));};function findScriptsWithFramework(_0x370beb,_0x55b190){const _0x4feb82=a45_0x2b6231,_0x186f90={};_0x186f90[_0x4feb82(0xbc)]=function(_0x17789b,_0x154fbd){return _0x17789b<_0x154fbd;},_0x186f90[_0x4feb82(0xe5)]=_0x4feb82(0xe1);const _0x254b16=_0x186f90,_0x33e9d8=[],_0xf8e74d=Object[_0x4feb82(0xd6)](_0x370beb);for(let _0x2d576f=0x0;_0x254b16[_0x4feb82(0xbc)](_0x2d576f,_0xf8e74d[_0x4feb82(0xae)]);_0x2d576f+=0x1){_0xf8e74d[_0x2d576f][0x1]['includes'](_0x55b190)&&!_0xf8e74d[_0x2d576f][0x1]['includes'](_0x254b16[_0x4feb82(0xe5)])&&_0x33e9d8['push'](_0xf8e74d[_0x2d576f][0x0]);}return _0x33e9d8;}function getUpdatedCommand(_0x2e7474,_0x27f9ba){const _0x345bbc=a45_0x2b6231,_0x1e4fc1={};_0x1e4fc1['XoDTx']=function(_0x57389b,_0x5a94ac){return _0x57389b!==_0x5a94ac;},_0x1e4fc1[_0x345bbc(0xcb)]='browserstack-node-sdk',_0x1e4fc1['gykFq']=function(_0x19623f,_0x45ef52){return _0x19623f===_0x45ef52;};const _0x38d266=_0x1e4fc1,_0xbc0569=_0x27f9ba+_0x345bbc(0xa2),_0x1b5e9c=_0x2e7474[_0x27f9ba],_0x534abb=_0x1b5e9c[_0x345bbc(0xb4)]('\x20');for(const _0x53032e of frameworks){if(_0x38d266[_0x345bbc(0xcd)](_0x534abb[_0x345bbc(0xa5)](_0x53032e),-0x1)){_0x534abb[_0x345bbc(0xb0)](_0x534abb[_0x345bbc(0xa5)](_0x53032e),0x0,_0x38d266['RgKph']);break;}}let _0x5ea068=_0x534abb[_0x345bbc(0x9c)]('\x20');return _0x38d266[_0x345bbc(0xb5)](_0x5ea068,_0x1b5e9c)&&(_0x5ea068=_0x345bbc(0x9d)+_0x1b5e9c),[_0xbc0569,_0x5ea068];}function sdkSetup(){const _0xa8cf49=a45_0x2b6231,_0x335c6d={};_0x335c6d['PMvnU']=_0xa8cf49(0xc1),_0x335c6d[_0xa8cf49(0xd7)]=_0xa8cf49(0xc2);const _0x2f43c9=_0x335c6d;if(helper['isUndefined'](config))return;config[_0xa8cf49(0xcc)]=_0x2f43c9[_0xa8cf49(0xdc)];try{utilities[_0xa8cf49(0x9b)](_0x2f43c9['GjIMN'],{},config,'');}catch(_0x269a8b){logger[_0xa8cf49(0xe7)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+_0x269a8b);}}logger[a45_0x2b6231(0xbb)](a45_0x2b6231(0xbd));