#!/usr/bin/env node

const a45_0x373ec=a45_0x2fea;(function(_0x4e43b4,_0x34f7b2){const _0x481d7d=a45_0x2fea,_0x56ee3a=_0x4e43b4();while(!![]){try{const _0x534939=-parseInt(_0x481d7d(0xcc))/0x1+-parseInt(_0x481d7d(0xb0))/0x2*(parseInt(_0x481d7d(0xdd))/0x3)+parseInt(_0x481d7d(0x99))/0x4*(-parseInt(_0x481d7d(0xd4))/0x5)+parseInt(_0x481d7d(0xd8))/0x6*(-parseInt(_0x481d7d(0xaf))/0x7)+-parseInt(_0x481d7d(0xde))/0x8+parseInt(_0x481d7d(0xe0))/0x9+parseInt(_0x481d7d(0xc8))/0xa*(parseInt(_0x481d7d(0xb4))/0xb);if(_0x534939===_0x34f7b2)break;else _0x56ee3a['push'](_0x56ee3a['shift']());}catch(_0x308400){_0x56ee3a['push'](_0x56ee3a['shift']());}}}(a45_0x4926,0x38f2f));const fs=require('fs'),helper=require(a45_0x373ec(0xd0)),utilities=require(a45_0x373ec(0xc0)),yaml=require('js-yaml'),yargs=require('yargs'),logger=require(a45_0x373ec(0xb9))['winstonLogger'],configFileTemplate=__dirname+a45_0x373ec(0xd7),configFileTemplatePW=__dirname+a45_0x373ec(0xa6),configFile=process[a45_0x373ec(0xda)]()+'/browserstack.yml',packageFile=process['cwd']()+a45_0x373ec(0xe2),frameworks=[a45_0x373ec(0x9c),'jest',a45_0x373ec(0xb8),a45_0x373ec(0xcf),a45_0x373ec(0xb7),a45_0x373ec(0xc2),a45_0x373ec(0xc1)];let config;logger['info'](a45_0x373ec(0xaa)),createConfigurationFile(yargs[a45_0x373ec(0xd5)][a45_0x373ec(0xab)],yargs[a45_0x373ec(0xd5)][a45_0x373ec(0xa0)],yargs[a45_0x373ec(0xd5)][a45_0x373ec(0xc1)]);try{sdkSetup();}catch(a45_0x23a335){logger[a45_0x373ec(0xca)](a45_0x373ec(0xe3)+a45_0x23a335);}addScriptInPackageJson();function a45_0x2fea(_0x9a5b3a,_0xec6986){const _0x492688=a45_0x4926();return a45_0x2fea=function(_0x2fea25,_0x5d6f8a){_0x2fea25=_0x2fea25-0x96;let _0x5768de=_0x492688[_0x2fea25];return _0x5768de;},a45_0x2fea(_0x9a5b3a,_0xec6986);}function createConfigurationFile(_0x5939df,_0x5c7cd0,_0xa5e4e7=![]){const _0x2e1065=a45_0x373ec,_0x31a3e7={};_0x31a3e7[_0x2e1065(0xd6)]=_0x2e1065(0xb5),_0x31a3e7['jfDNq']=_0x2e1065(0xa9),_0x31a3e7[_0x2e1065(0xa1)]=_0x2e1065(0xa5);const _0x4bf14a=_0x31a3e7;try{let _0x612309=fs[_0x2e1065(0xad)](_0xa5e4e7?configFileTemplatePW:configFileTemplate,_0x4bf14a['VUncR']);_0x5939df&&(_0x612309=_0x612309[_0x2e1065(0xd9)](_0x4bf14a['jfDNq'],_0x5939df)),_0x5c7cd0&&(_0x612309=_0x612309[_0x2e1065(0xd9)](_0x4bf14a[_0x2e1065(0xa1)],_0x5c7cd0)),config=yaml[_0x2e1065(0xc7)](_0x612309),fs['writeFileSync'](configFile,_0x612309,_0x2ae4b3=>{_0x2ae4b3&&logger['error'](_0x2ae4b3);});}catch(_0x5eadb5){logger[_0x2e1065(0xba)](_0x5eadb5);}}function addPostInstallScript(_0x1e7641,_0xe43a78){const _0x45c6d7=a45_0x373ec,_0x1b18b3={};_0x1b18b3['pLwSn']=_0x45c6d7(0x97),_0x1b18b3[_0x45c6d7(0xbf)]=_0x45c6d7(0xd3),_0x1b18b3[_0x45c6d7(0xa7)]=_0x45c6d7(0xa2);const _0x339ec5=_0x1b18b3;let _0x16e7d2=_0x1e7641[_0x339ec5[_0x45c6d7(0xbb)]];if(_0x16e7d2&&_0x16e7d2[_0x45c6d7(0xc9)](_0x339ec5['VxYFq']))return;!_0x16e7d2?_0x16e7d2=_0x339ec5[_0x45c6d7(0xbf)]:_0x16e7d2+=_0x339ec5[_0x45c6d7(0xa7)],_0xe43a78[_0x45c6d7(0xa8)]([_0x339ec5[_0x45c6d7(0xbb)],_0x16e7d2]);}function addScriptInPackageJson(){const _0x2d7947=a45_0x373ec,_0x47abda={'BuOqC':_0x2d7947(0xb5),'iocPH':function(_0x5866ac,_0x4f056b){return _0x5866ac<_0x4f056b;},'GXNro':function(_0x3eab6f,_0x1a4dc8,_0x3ffabc){return _0x3eab6f(_0x1a4dc8,_0x3ffabc);},'XXoRT':function(_0x52efc9,_0x1ce90e){return _0x52efc9<_0x1ce90e;},'lzpIr':function(_0x3460ed,_0x3e38da,_0x1053b8){return _0x3460ed(_0x3e38da,_0x1053b8);},'IVBhf':function(_0x51f512,_0x4e3309){return _0x51f512<_0x4e3309;},'lmgXy':function(_0x3aecca,_0x2c8b3c){return _0x3aecca!==_0x2c8b3c;},'rbxbb':_0x2d7947(0xb6)},_0x38ec33=JSON[_0x2d7947(0xb2)](fs[_0x2d7947(0xad)](packageFile,_0x47abda['BuOqC'])),_0x5ba8d8=[];for(let _0xa7b670=0x0;_0x47abda[_0x2d7947(0x9d)](_0xa7b670,frameworks[_0x2d7947(0xbe)]);_0xa7b670+=0x1){const _0x29eb37=_0x47abda[_0x2d7947(0x9a)](findScriptsWithFramework,_0x38ec33[_0x2d7947(0x9f)],frameworks[_0xa7b670]);for(let _0x3e33ff=0x0;_0x47abda[_0x2d7947(0xb1)](_0x3e33ff,_0x29eb37[_0x2d7947(0xbe)]);_0x3e33ff+=0x1){_0x5ba8d8[_0x2d7947(0xa8)](_0x47abda['lzpIr'](getUpdatedCommand,_0x38ec33['scripts'],_0x29eb37[_0x3e33ff]));}_0x47abda[_0x2d7947(0x9a)](addPostInstallScript,_0x38ec33['scripts'],_0x5ba8d8);}const _0x453432={..._0x38ec33[_0x2d7947(0x9f)]},_0x4c04a0=_0x453432;for(let _0x431ff4=0x0;_0x47abda['IVBhf'](_0x431ff4,_0x5ba8d8[_0x2d7947(0xbe)]);_0x431ff4+=0x1){_0x4c04a0[_0x5ba8d8[_0x431ff4][0x0]]=_0x5ba8d8[_0x431ff4][0x1];}_0x47abda[_0x2d7947(0x96)](JSON['stringify'](_0x38ec33['scripts']),JSON[_0x2d7947(0xe4)](_0x4c04a0))&&(logger[_0x2d7947(0x9e)](_0x47abda[_0x2d7947(0xc6)]),_0x38ec33[_0x2d7947(0x9f)]=_0x4c04a0,fs[_0x2d7947(0xa4)](packageFile,JSON[_0x2d7947(0xe4)](_0x38ec33,null,0x2),_0xa88963=>{const _0x31f97a=_0x2d7947;_0xa88963&&logger[_0x31f97a(0xba)](_0xa88963);}));};function findScriptsWithFramework(_0x31ac57,_0x2f906f){const _0x16e247=a45_0x373ec,_0x825420={};_0x825420[_0x16e247(0x98)]=function(_0x1feb1d,_0x22fcde){return _0x1feb1d<_0x22fcde;},_0x825420[_0x16e247(0x9b)]=_0x16e247(0xc4);const _0x5e3516=_0x825420,_0x1761f5=[],_0x42d45a=Object[_0x16e247(0xdb)](_0x31ac57);for(let _0x1985ce=0x0;_0x5e3516[_0x16e247(0x98)](_0x1985ce,_0x42d45a[_0x16e247(0xbe)]);_0x1985ce+=0x1){_0x42d45a[_0x1985ce][0x1][_0x16e247(0xc9)](_0x2f906f)&&!_0x42d45a[_0x1985ce][0x1][_0x16e247(0xc9)](_0x5e3516[_0x16e247(0x9b)])&&_0x1761f5[_0x16e247(0xa8)](_0x42d45a[_0x1985ce][0x0]);}return _0x1761f5;}function a45_0x4926(){const _0x41a8fe=['15tnUOZU','argv','VUncR','/../../browserstack.yml.sample','768cOnOpY','replace','cwd','entries','ewfQx','573AAlUZy','1896136ojyFDz','source','588402EbSNDc','PgIRO','/package.json','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','stringify','isUndefined','lmgXy','postinstall','GKklm','343220kPKFeP','GXNro','LMuWr','mocha','iocPH','info','scripts','key','OsZHD','\x20&&\x20npm\x20update\x20browserstack-node-sdk','node-setup','writeFileSync','YOUR_ACCESS_KEY','/../../browserstack.pw.yml.sample','Vagbv','push','YOUR_USERNAME','Creating\x20configuration\x20file...','username','mUCjU','readFileSync','Setup\x20completed','22862DyVocY','3158xfRKvC','XXoRT','parse','splice','423907sJrYWQ','utf8','Adding\x20new\x20script(s)\x20in\x20package.json...','nightwatch','cucumber-js','../helpers/logger','error','pLwSn','lWbFP','HvpZM','length','VxYFq','../helpers/utilities','playwright','codeceptjs','join','browserstack-node-sdk','-browserstack','rbxbb','load','430qOTFbb','includes','debug','indexOf','275137VcMtTe','SDKSetup','split','node','../helpers/helper','browserstack-node-sdk\x20','fireFunnelTestEvent','npm\x20update\x20browserstack-node-sdk'];a45_0x4926=function(){return _0x41a8fe;};return a45_0x4926();}function getUpdatedCommand(_0x599151,_0x573623){const _0x34f8f7=a45_0x373ec,_0x509a7d={};_0x509a7d['ewfQx']=function(_0x135d1f,_0x148de4){return _0x135d1f!==_0x148de4;},_0x509a7d[_0x34f8f7(0xbd)]=_0x34f8f7(0xc4),_0x509a7d[_0x34f8f7(0xac)]=function(_0x4f8c31,_0x118589){return _0x4f8c31===_0x118589;};const _0x5491b3=_0x509a7d,_0x163c10=_0x573623+_0x34f8f7(0xc5),_0x54f7b9=_0x599151[_0x573623],_0x446334=_0x54f7b9[_0x34f8f7(0xce)]('\x20');for(const _0x5cdd71 of frameworks){if(_0x5491b3[_0x34f8f7(0xdc)](_0x446334['indexOf'](_0x5cdd71),-0x1)){_0x446334[_0x34f8f7(0xb3)](_0x446334[_0x34f8f7(0xcb)](_0x5cdd71),0x0,_0x5491b3[_0x34f8f7(0xbd)]);break;}}let _0x57eb7e=_0x446334[_0x34f8f7(0xc3)]('\x20');return _0x5491b3[_0x34f8f7(0xac)](_0x57eb7e,_0x54f7b9)&&(_0x57eb7e=_0x34f8f7(0xd1)+_0x54f7b9),[_0x163c10,_0x57eb7e];}function sdkSetup(){const _0x4d7523=a45_0x373ec,_0x85c627={};_0x85c627[_0x4d7523(0xbc)]=_0x4d7523(0xa3),_0x85c627[_0x4d7523(0xe1)]=_0x4d7523(0xcd);const _0x1cc627=_0x85c627;if(helper[_0x4d7523(0xe5)](config))return;config[_0x4d7523(0xdf)]=_0x1cc627['lWbFP'];try{utilities[_0x4d7523(0xd2)](_0x1cc627[_0x4d7523(0xe1)],{},config,'');}catch(_0x175b40){logger[_0x4d7523(0xca)](_0x4d7523(0xe3)+_0x175b40);}}logger[a45_0x373ec(0x9e)](a45_0x373ec(0xae));