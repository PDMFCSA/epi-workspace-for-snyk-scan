#!/usr/bin/env node

const a45_0x42b223=a45_0x2897;(function(_0x32bd05,_0x6468f7){const _0xcb01d8=a45_0x2897,_0x4ee788=_0x32bd05();while(!![]){try{const _0x4132cc=-parseInt(_0xcb01d8(0x1d0))/0x1*(-parseInt(_0xcb01d8(0x1b8))/0x2)+parseInt(_0xcb01d8(0x1c5))/0x3*(-parseInt(_0xcb01d8(0x1e4))/0x4)+parseInt(_0xcb01d8(0x1ce))/0x5+-parseInt(_0xcb01d8(0x1e9))/0x6*(-parseInt(_0xcb01d8(0x1b6))/0x7)+parseInt(_0xcb01d8(0x1de))/0x8+-parseInt(_0xcb01d8(0x1c2))/0x9+parseInt(_0xcb01d8(0x1b0))/0xa;if(_0x4132cc===_0x6468f7)break;else _0x4ee788['push'](_0x4ee788['shift']());}catch(_0x3de1c8){_0x4ee788['push'](_0x4ee788['shift']());}}}(a45_0x463b,0x80fff));const fs=require('fs'),helper=require(a45_0x42b223(0x1bf)),utilities=require(a45_0x42b223(0x1da)),yaml=require(a45_0x42b223(0x1ba)),yargs=require(a45_0x42b223(0x1c3)),logger=require(a45_0x42b223(0x1c0))[a45_0x42b223(0x1ac)],configFileTemplate=__dirname+a45_0x42b223(0x1b4),configFileTemplatePW=__dirname+a45_0x42b223(0x1db),configFile=process[a45_0x42b223(0x1bb)]()+a45_0x42b223(0x1bc),packageFile=process[a45_0x42b223(0x1bb)]()+a45_0x42b223(0x1d6),frameworks=[a45_0x42b223(0x1e6),a45_0x42b223(0x1c4),'cucumber-js','node',a45_0x42b223(0x1ee),'codeceptjs',a45_0x42b223(0x1d7)];let config;logger[a45_0x42b223(0x1af)](a45_0x42b223(0x1b5)),createConfigurationFile(yargs[a45_0x42b223(0x1e0)]['username'],yargs['argv'][a45_0x42b223(0x1dd)],yargs[a45_0x42b223(0x1e0)][a45_0x42b223(0x1d7)]);function a45_0x463b(){const _0x43c69b=['ogQmJ','mocha','split','eaPBU','1939344oazMbZ','writeFileSync','source','yUCiC','load','nightwatch','Setup\x20completed','ndbdj','length','fLuQx','ldEYy','stringify','winstonLogger','YOUR_USERNAME','replace','info','5235020lHDYhM','kZSRW','gxPCu','includes','/../../browserstack.yml.sample','Creating\x20configuration\x20file...','7GeAcZi','utf8','6zgxFVX','browserstack-node-sdk\x20','js-yaml','cwd','/browserstack.yml','eTQkO','push','../helpers/helper','../helpers/logger','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','7531272izTZyy','yargs','jest','2864019ZblMrL','bfFnq','AsIBr','HiRRV','isUndefined','scripts','parse','readFileSync','browserstack-node-sdk','2018585XtYXTM','postinstall','217709PgkEXA','txlvZ','debug','yzXiM','GTMfE','fireFunnelTestEvent','/package.json','playwright','entries','UizVe','../helpers/utilities','/../../browserstack.pw.yml.sample','NaJhu','key','3330352TGnkxD','error','argv','MxZXS','\x20&&\x20npm\x20update\x20browserstack-node-sdk','join','4rmygPD'];a45_0x463b=function(){return _0x43c69b;};return a45_0x463b();}try{sdkSetup();}catch(a45_0x97b48){logger[a45_0x42b223(0x1d2)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a45_0x97b48);}addScriptInPackageJson();function createConfigurationFile(_0x42dd6f,_0x52cc38,_0x101cb4=![]){const _0x444986=a45_0x42b223,_0x4f9962={};_0x4f9962['ldEYy']=_0x444986(0x1b7),_0x4f9962[_0x444986(0x1e1)]=_0x444986(0x1ad),_0x4f9962[_0x444986(0x1b1)]='YOUR_ACCESS_KEY';const _0x4a7ad6=_0x4f9962;try{let _0x5cfc5d=fs[_0x444986(0x1cc)](_0x101cb4?configFileTemplatePW:configFileTemplate,_0x4a7ad6[_0x444986(0x1aa)]);_0x42dd6f&&(_0x5cfc5d=_0x5cfc5d[_0x444986(0x1ae)](_0x4a7ad6[_0x444986(0x1e1)],_0x42dd6f)),_0x52cc38&&(_0x5cfc5d=_0x5cfc5d[_0x444986(0x1ae)](_0x4a7ad6[_0x444986(0x1b1)],_0x52cc38)),config=yaml[_0x444986(0x1ed)](_0x5cfc5d),fs[_0x444986(0x1ea)](configFile,_0x5cfc5d,_0x4ae731=>{const _0x50cd32=_0x444986;_0x4ae731&&logger[_0x50cd32(0x1df)](_0x4ae731);});}catch(_0x553898){logger[_0x444986(0x1df)](_0x553898);}}function addPostInstallScript(_0x58e710,_0x151c88){const _0x1a6efd=a45_0x42b223,_0x5edb88={};_0x5edb88[_0x1a6efd(0x1bd)]=_0x1a6efd(0x1cf),_0x5edb88[_0x1a6efd(0x1d1)]='npm\x20update\x20browserstack-node-sdk',_0x5edb88[_0x1a6efd(0x1b2)]=_0x1a6efd(0x1e2);const _0x424ea3=_0x5edb88;let _0x3c76bf=_0x58e710[_0x424ea3[_0x1a6efd(0x1bd)]];if(_0x3c76bf&&_0x3c76bf[_0x1a6efd(0x1b3)](_0x424ea3[_0x1a6efd(0x1d1)]))return;!_0x3c76bf?_0x3c76bf=_0x424ea3[_0x1a6efd(0x1d1)]:_0x3c76bf+=_0x424ea3[_0x1a6efd(0x1b2)],_0x151c88[_0x1a6efd(0x1be)]([_0x424ea3[_0x1a6efd(0x1bd)],_0x3c76bf]);}function addScriptInPackageJson(){const _0x443913=a45_0x42b223,_0x11c24f={'ogQmJ':'utf8','UizVe':function(_0x5d82b7,_0x2b11a1){return _0x5d82b7<_0x2b11a1;},'bfFnq':function(_0x23292f,_0x101acc,_0x192d82){return _0x23292f(_0x101acc,_0x192d82);},'yzXiM':function(_0x191a7e,_0x52000c,_0x459c45){return _0x191a7e(_0x52000c,_0x459c45);},'JGbYd':function(_0xd79e11,_0x3b6277){return _0xd79e11<_0x3b6277;},'NaJhu':function(_0x1ffb51,_0x9f3542){return _0x1ffb51!==_0x9f3542;},'AsIBr':'Adding\x20new\x20script(s)\x20in\x20package.json...'},_0x2e4444=JSON[_0x443913(0x1cb)](fs['readFileSync'](packageFile,_0x11c24f[_0x443913(0x1e5)])),_0x141afe=[];for(let _0x403b0e=0x0;_0x11c24f[_0x443913(0x1d9)](_0x403b0e,frameworks['length']);_0x403b0e+=0x1){const _0x2532bc=_0x11c24f[_0x443913(0x1c6)](findScriptsWithFramework,_0x2e4444[_0x443913(0x1ca)],frameworks[_0x403b0e]);for(let _0x5cbf20=0x0;_0x11c24f[_0x443913(0x1d9)](_0x5cbf20,_0x2532bc['length']);_0x5cbf20+=0x1){_0x141afe[_0x443913(0x1be)](_0x11c24f[_0x443913(0x1c6)](getUpdatedCommand,_0x2e4444[_0x443913(0x1ca)],_0x2532bc[_0x5cbf20]));}_0x11c24f[_0x443913(0x1d3)](addPostInstallScript,_0x2e4444[_0x443913(0x1ca)],_0x141afe);}const _0x1247e8={..._0x2e4444[_0x443913(0x1ca)]},_0x3b73de=_0x1247e8;for(let _0x47cd42=0x0;_0x11c24f['JGbYd'](_0x47cd42,_0x141afe[_0x443913(0x1f1)]);_0x47cd42+=0x1){_0x3b73de[_0x141afe[_0x47cd42][0x0]]=_0x141afe[_0x47cd42][0x1];}_0x11c24f[_0x443913(0x1dc)](JSON['stringify'](_0x2e4444[_0x443913(0x1ca)]),JSON[_0x443913(0x1ab)](_0x3b73de))&&(logger[_0x443913(0x1af)](_0x11c24f[_0x443913(0x1c7)]),_0x2e4444[_0x443913(0x1ca)]=_0x3b73de,fs['writeFileSync'](packageFile,JSON[_0x443913(0x1ab)](_0x2e4444,null,0x2),_0x4824b3=>{const _0x821c91=_0x443913;_0x4824b3&&logger[_0x821c91(0x1df)](_0x4824b3);}));};function a45_0x2897(_0x5509ec,_0x676143){const _0x463b4b=a45_0x463b();return a45_0x2897=function(_0x289753,_0x5f014c){_0x289753=_0x289753-0x1a9;let _0x192944=_0x463b4b[_0x289753];return _0x192944;},a45_0x2897(_0x5509ec,_0x676143);}function findScriptsWithFramework(_0x3c82df,_0x298dad){const _0x1f85ab=a45_0x42b223,_0x434e27={};_0x434e27['SvSeQ']=function(_0x22d54e,_0x4ae481){return _0x22d54e<_0x4ae481;},_0x434e27[_0x1f85ab(0x1e8)]=_0x1f85ab(0x1cd);const _0x77ff3b=_0x434e27,_0x4553b4=[],_0x52856e=Object[_0x1f85ab(0x1d8)](_0x3c82df);for(let _0x5ea9a5=0x0;_0x77ff3b['SvSeQ'](_0x5ea9a5,_0x52856e[_0x1f85ab(0x1f1)]);_0x5ea9a5+=0x1){_0x52856e[_0x5ea9a5][0x1][_0x1f85ab(0x1b3)](_0x298dad)&&!_0x52856e[_0x5ea9a5][0x1][_0x1f85ab(0x1b3)](_0x77ff3b[_0x1f85ab(0x1e8)])&&_0x4553b4[_0x1f85ab(0x1be)](_0x52856e[_0x5ea9a5][0x0]);}return _0x4553b4;}function getUpdatedCommand(_0x3ff1ee,_0x3dd0f6){const _0x456e5e=a45_0x42b223,_0x58400f={};_0x58400f[_0x456e5e(0x1ec)]=function(_0x69454,_0x5f028d){return _0x69454!==_0x5f028d;},_0x58400f[_0x456e5e(0x1f0)]='browserstack-node-sdk',_0x58400f[_0x456e5e(0x1d4)]=function(_0xf020e6,_0x49e3ce){return _0xf020e6===_0x49e3ce;};const _0x4e8593=_0x58400f,_0x430396=_0x3dd0f6+'-browserstack',_0x5f2d85=_0x3ff1ee[_0x3dd0f6],_0x5dd901=_0x5f2d85[_0x456e5e(0x1e7)]('\x20');for(const _0x42d974 of frameworks){if(_0x4e8593['yUCiC'](_0x5dd901['indexOf'](_0x42d974),-0x1)){_0x5dd901['splice'](_0x5dd901['indexOf'](_0x42d974),0x0,_0x4e8593['ndbdj']);break;}}let _0x2855ea=_0x5dd901[_0x456e5e(0x1e3)]('\x20');return _0x4e8593[_0x456e5e(0x1d4)](_0x2855ea,_0x5f2d85)&&(_0x2855ea=_0x456e5e(0x1b9)+_0x5f2d85),[_0x430396,_0x2855ea];}function sdkSetup(){const _0x2f5307=a45_0x42b223,_0x2b12a1={};_0x2b12a1[_0x2f5307(0x1c8)]='node-setup',_0x2b12a1['fLuQx']='SDKSetup';const _0x1922c1=_0x2b12a1;if(helper[_0x2f5307(0x1c9)](config))return;config[_0x2f5307(0x1eb)]=_0x1922c1[_0x2f5307(0x1c8)];try{utilities[_0x2f5307(0x1d5)](_0x1922c1[_0x2f5307(0x1a9)],{},config,'');}catch(_0x10c480){logger[_0x2f5307(0x1d2)](_0x2f5307(0x1c1)+_0x10c480);}}logger['info'](a45_0x42b223(0x1ef));