#!/usr/bin/env node

const a49_0x26efdb=a49_0x438d;(function(_0x2c7fec,_0x3e5d1f){const _0x2f3c47=a49_0x438d,_0x4559ab=_0x2c7fec();while(!![]){try{const _0x13381c=-parseInt(_0x2f3c47(0x1b7))/0x1*(parseInt(_0x2f3c47(0x1ca))/0x2)+parseInt(_0x2f3c47(0x1e9))/0x3*(parseInt(_0x2f3c47(0x1ea))/0x4)+parseInt(_0x2f3c47(0x1e2))/0x5+-parseInt(_0x2f3c47(0x1df))/0x6+-parseInt(_0x2f3c47(0x1ee))/0x7*(parseInt(_0x2f3c47(0x1f0))/0x8)+-parseInt(_0x2f3c47(0x1d9))/0x9*(parseInt(_0x2f3c47(0x1f8))/0xa)+parseInt(_0x2f3c47(0x1c1))/0xb;if(_0x13381c===_0x3e5d1f)break;else _0x4559ab['push'](_0x4559ab['shift']());}catch(_0x47f9b9){_0x4559ab['push'](_0x4559ab['shift']());}}}(a49_0x5b64,0x9d6d3));function a49_0x438d(_0x2ab8c9,_0x1b92ce){const _0x5b644b=a49_0x5b64();return a49_0x438d=function(_0x438dc6,_0x327a36){_0x438dc6=_0x438dc6-0x1af;let _0x3e5779=_0x5b644b[_0x438dc6];return _0x3e5779;},a49_0x438d(_0x2ab8c9,_0x1b92ce);}function a49_0x5b64(){const _0x2d240b=['argv','xVSnq','Setup\x20completed','fireFunnelTestEvent','3351432dhMPWd','source','split','2873585RVUhgK','kaJfI','/browserstack.yml','load','utf8','jest','stringify','768faoegf','8068OatEJQ','js-yaml','replace','bCQek','130914bsClik','/../../browserstack.pw.yml.sample','128qBtUQE','username','Adding\x20new\x20script(s)\x20in\x20package.json...','cucumber-js','writeFileSync','tRStr','mocha','/package.json','10NgsoVP','../helpers/helper','playwright','length','push','MZyZq','winstonLogger','entries','npm\x20update\x20browserstack-node-sdk','1CSDCtR','ITuEa','ApZAM','vinrv','key','IkFfx','cwd','debug','-browserstack','JxOOE','8725387MYqWMG','yargs','mZDOh','parse','WMxhq','readFileSync','isUndefined','ItRrT','\x20&&\x20npm\x20update\x20browserstack-node-sdk','729932vFKVKK','../helpers/logger','info','LIZjG','join','includes','browserstack-node-sdk','node-setup','wvpyL','zIMfs','indexOf','nightwatch','scripts','YOUR_ACCESS_KEY','CKoEh','150273zqFgcD','error'];a49_0x5b64=function(){return _0x2d240b;};return a49_0x5b64();}const fs=require('fs'),helper=require(a49_0x26efdb(0x1af)),utilities=require('../helpers/utilities'),yaml=require(a49_0x26efdb(0x1eb)),yargs=require(a49_0x26efdb(0x1c2)),logger=require(a49_0x26efdb(0x1cb))[a49_0x26efdb(0x1b4)],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+a49_0x26efdb(0x1ef),configFile=process[a49_0x26efdb(0x1bd)]()+a49_0x26efdb(0x1e4),packageFile=process[a49_0x26efdb(0x1bd)]()+a49_0x26efdb(0x1f7),frameworks=[a49_0x26efdb(0x1f6),a49_0x26efdb(0x1e7),a49_0x26efdb(0x1f3),'node',a49_0x26efdb(0x1d5),'codeceptjs',a49_0x26efdb(0x1b0)];let config;logger[a49_0x26efdb(0x1cc)]('Creating\x20configuration\x20file...'),createConfigurationFile(yargs[a49_0x26efdb(0x1db)][a49_0x26efdb(0x1f1)],yargs['argv'][a49_0x26efdb(0x1bb)],yargs['argv'][a49_0x26efdb(0x1b0)]);try{sdkSetup();}catch(a49_0x126076){logger[a49_0x26efdb(0x1be)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a49_0x126076);}addScriptInPackageJson();function createConfigurationFile(_0xaabcce,_0x2bd3c9,_0x588db3=![]){const _0x1786b2=a49_0x26efdb,_0xdbbad={};_0xdbbad[_0x1786b2(0x1cd)]=_0x1786b2(0x1e6),_0xdbbad[_0x1786b2(0x1c3)]='YOUR_USERNAME',_0xdbbad[_0x1786b2(0x1d2)]=_0x1786b2(0x1d7);const _0x100436=_0xdbbad;try{let _0xfe47a2=fs[_0x1786b2(0x1c6)](_0x588db3?configFileTemplatePW:configFileTemplate,_0x100436[_0x1786b2(0x1cd)]);_0xaabcce&&(_0xfe47a2=_0xfe47a2[_0x1786b2(0x1ec)](_0x100436[_0x1786b2(0x1c3)],_0xaabcce)),_0x2bd3c9&&(_0xfe47a2=_0xfe47a2[_0x1786b2(0x1ec)](_0x100436['wvpyL'],_0x2bd3c9)),config=yaml[_0x1786b2(0x1e5)](_0xfe47a2),fs['writeFileSync'](configFile,_0xfe47a2,_0x4f0b0b=>{const _0x1fda62=_0x1786b2;_0x4f0b0b&&logger[_0x1fda62(0x1da)](_0x4f0b0b);});}catch(_0x4d1749){logger[_0x1786b2(0x1da)](_0x4d1749);}}function addPostInstallScript(_0x157b10,_0x60aae0){const _0x50fe7=a49_0x26efdb,_0x1bf560={};_0x1bf560[_0x50fe7(0x1b8)]='postinstall',_0x1bf560[_0x50fe7(0x1ed)]=_0x50fe7(0x1b6),_0x1bf560[_0x50fe7(0x1d8)]=_0x50fe7(0x1c9);const _0x51389d=_0x1bf560;let _0x3fba14=_0x157b10[_0x51389d[_0x50fe7(0x1b8)]];if(_0x3fba14&&_0x3fba14[_0x50fe7(0x1cf)](_0x51389d[_0x50fe7(0x1ed)]))return;!_0x3fba14?_0x3fba14=_0x51389d[_0x50fe7(0x1ed)]:_0x3fba14+=_0x51389d['CKoEh'],_0x60aae0['push']([_0x51389d['ITuEa'],_0x3fba14]);}function addScriptInPackageJson(){const _0x2e731f=a49_0x26efdb,_0x4b1fef={'tRStr':_0x2e731f(0x1e6),'MZyZq':function(_0x12d389,_0xed5314){return _0x12d389<_0xed5314;},'ApZAM':function(_0x535148,_0x369a2f,_0x45af1b){return _0x535148(_0x369a2f,_0x45af1b);},'xPnmn':function(_0x2722ab,_0x35aeb6,_0xca71b7){return _0x2722ab(_0x35aeb6,_0xca71b7);},'xVSnq':function(_0x408301,_0x524894){return _0x408301<_0x524894;},'ufxQw':function(_0x543c67,_0x177f37){return _0x543c67!==_0x177f37;},'IkFfx':_0x2e731f(0x1f2)},_0x79c2a6=JSON[_0x2e731f(0x1c4)](fs['readFileSync'](packageFile,_0x4b1fef[_0x2e731f(0x1f5)])),_0x28cdb2=[];for(let _0x4d0661=0x0;_0x4b1fef[_0x2e731f(0x1b3)](_0x4d0661,frameworks['length']);_0x4d0661+=0x1){const _0x44def2=_0x4b1fef[_0x2e731f(0x1b9)](findScriptsWithFramework,_0x79c2a6[_0x2e731f(0x1d6)],frameworks[_0x4d0661]);for(let _0x42917a=0x0;_0x4b1fef[_0x2e731f(0x1b3)](_0x42917a,_0x44def2[_0x2e731f(0x1b1)]);_0x42917a+=0x1){_0x28cdb2[_0x2e731f(0x1b2)](_0x4b1fef['xPnmn'](getUpdatedCommand,_0x79c2a6['scripts'],_0x44def2[_0x42917a]));}_0x4b1fef[_0x2e731f(0x1b9)](addPostInstallScript,_0x79c2a6[_0x2e731f(0x1d6)],_0x28cdb2);}const _0x207cf4={..._0x79c2a6[_0x2e731f(0x1d6)]},_0x500f6e=_0x207cf4;for(let _0x23fe24=0x0;_0x4b1fef[_0x2e731f(0x1dc)](_0x23fe24,_0x28cdb2[_0x2e731f(0x1b1)]);_0x23fe24+=0x1){_0x500f6e[_0x28cdb2[_0x23fe24][0x0]]=_0x28cdb2[_0x23fe24][0x1];}_0x4b1fef['ufxQw'](JSON[_0x2e731f(0x1e8)](_0x79c2a6['scripts']),JSON[_0x2e731f(0x1e8)](_0x500f6e))&&(logger[_0x2e731f(0x1cc)](_0x4b1fef[_0x2e731f(0x1bc)]),_0x79c2a6[_0x2e731f(0x1d6)]=_0x500f6e,fs[_0x2e731f(0x1f4)](packageFile,JSON[_0x2e731f(0x1e8)](_0x79c2a6,null,0x2),_0x444f51=>{const _0x53e66d=_0x2e731f;_0x444f51&&logger[_0x53e66d(0x1da)](_0x444f51);}));};function findScriptsWithFramework(_0x137b4f,_0x56fa95){const _0x4f683d=a49_0x26efdb,_0x39c1a8={};_0x39c1a8[_0x4f683d(0x1c0)]=function(_0x4a8dd7,_0x238e83){return _0x4a8dd7<_0x238e83;},_0x39c1a8[_0x4f683d(0x1d3)]='browserstack-node-sdk';const _0x569448=_0x39c1a8,_0x50c84e=[],_0x419f98=Object[_0x4f683d(0x1b5)](_0x137b4f);for(let _0x459a9e=0x0;_0x569448[_0x4f683d(0x1c0)](_0x459a9e,_0x419f98[_0x4f683d(0x1b1)]);_0x459a9e+=0x1){_0x419f98[_0x459a9e][0x1]['includes'](_0x56fa95)&&!_0x419f98[_0x459a9e][0x1][_0x4f683d(0x1cf)](_0x569448['zIMfs'])&&_0x50c84e[_0x4f683d(0x1b2)](_0x419f98[_0x459a9e][0x0]);}return _0x50c84e;}function getUpdatedCommand(_0x17a61a,_0x5ae2df){const _0x24d6c7=a49_0x26efdb,_0x48c787={};_0x48c787[_0x24d6c7(0x1c8)]=function(_0x227dc0,_0x447e2b){return _0x227dc0!==_0x447e2b;},_0x48c787[_0x24d6c7(0x1ba)]=_0x24d6c7(0x1d0),_0x48c787[_0x24d6c7(0x1e3)]=function(_0x52475b,_0x5243e4){return _0x52475b===_0x5243e4;};const _0x43c461=_0x48c787,_0x2cbe8d=_0x5ae2df+_0x24d6c7(0x1bf),_0x5449e8=_0x17a61a[_0x5ae2df],_0xc9089a=_0x5449e8[_0x24d6c7(0x1e1)]('\x20');for(const _0xf576e1 of frameworks){if(_0x43c461[_0x24d6c7(0x1c8)](_0xc9089a['indexOf'](_0xf576e1),-0x1)){_0xc9089a['splice'](_0xc9089a[_0x24d6c7(0x1d4)](_0xf576e1),0x0,_0x43c461['vinrv']);break;}}let _0x15c0e8=_0xc9089a[_0x24d6c7(0x1ce)]('\x20');return _0x43c461[_0x24d6c7(0x1e3)](_0x15c0e8,_0x5449e8)&&(_0x15c0e8='browserstack-node-sdk\x20'+_0x5449e8),[_0x2cbe8d,_0x15c0e8];}function sdkSetup(){const _0x41d975=a49_0x26efdb,_0x34fabd={};_0x34fabd['XYxit']=_0x41d975(0x1d1),_0x34fabd[_0x41d975(0x1c5)]='SDKSetup';const _0x3ac706=_0x34fabd;if(helper[_0x41d975(0x1c7)](config))return;config[_0x41d975(0x1e0)]=_0x3ac706['XYxit'];try{utilities[_0x41d975(0x1de)](_0x3ac706[_0x41d975(0x1c5)],{},config,'');}catch(_0xb1f068){logger[_0x41d975(0x1be)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+_0xb1f068);}}logger[a49_0x26efdb(0x1cc)](a49_0x26efdb(0x1dd));