#!/usr/bin/env node

function a49_0x2e4a(_0x521fa6,_0x32df8a){const _0x271d48=a49_0x271d();return a49_0x2e4a=function(_0x2e4a6e,_0x152cd7){_0x2e4a6e=_0x2e4a6e-0x13d;let _0x33f2a0=_0x271d48[_0x2e4a6e];return _0x33f2a0;},a49_0x2e4a(_0x521fa6,_0x32df8a);}function a49_0x271d(){const _0x337f90=['source','push','18TMuLdV','scripts','qOVnW','379454ToUMWg','Pvyhg','/browserstack.yml','isUndefined','stringify','postinstall','887421PDMNEW','lcbIe','load','Adding\x20new\x20script(s)\x20in\x20package.json...','playwright','10326fppMRt','jOyht','24271577FVMDBd','winstonLogger','cucumber-js','jWmXs','key','Setup\x20completed','dJXsL','cwd','join','browserstack-node-sdk\x20','node-setup','/package.json','63TfFvCH','SLDjf','-browserstack','length','SmBOX','includes','yargs','SDKSetup','readFileSync','error','PdWiQ','replace','nightwatch','Creating\x20configuration\x20file...','entries','iNnAA','info','MPUyf','jest','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','\x20&&\x20npm\x20update\x20browserstack-node-sdk','writeFileSync','node','splice','browserstack-node-sdk','eaEfX','indexOf','YOUR_ACCESS_KEY','IOsPe','codeceptjs','VUHod','argv','360584veKtwv','../helpers/utilities','../helpers/helper','339736BrpHxb','UhmIl','fireFunnelTestEvent','AHyUi','212510JNCPdx','js-yaml','/../../browserstack.pw.yml.sample','175wGgBVM','2075DMvDAS'];a49_0x271d=function(){return _0x337f90;};return a49_0x271d();}const a49_0xb11fb2=a49_0x2e4a;(function(_0xdfec2,_0x5618df){const _0x5df45b=a49_0x2e4a,_0x676274=_0xdfec2();while(!![]){try{const _0x438fb4=parseInt(_0x5df45b(0x151))/0x1+-parseInt(_0x5df45b(0x14b))/0x2+-parseInt(_0x5df45b(0x148))/0x3*(-parseInt(_0x5df45b(0x184))/0x4)+-parseInt(_0x5df45b(0x145))/0x5*(-parseInt(_0x5df45b(0x156))/0x6)+-parseInt(_0x5df45b(0x144))/0x7*(-parseInt(_0x5df45b(0x13d))/0x8)+parseInt(_0x5df45b(0x164))/0x9*(-parseInt(_0x5df45b(0x141))/0xa)+-parseInt(_0x5df45b(0x158))/0xb;if(_0x438fb4===_0x5618df)break;else _0x676274['push'](_0x676274['shift']());}catch(_0x3b0d72){_0x676274['push'](_0x676274['shift']());}}}(a49_0x271d,0xa0efc));const fs=require('fs'),helper=require(a49_0xb11fb2(0x186)),utilities=require(a49_0xb11fb2(0x185)),yaml=require(a49_0xb11fb2(0x142)),yargs=require(a49_0xb11fb2(0x16a)),logger=require('../helpers/logger')[a49_0xb11fb2(0x159)],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+a49_0xb11fb2(0x143),configFile=process[a49_0xb11fb2(0x15f)]()+a49_0xb11fb2(0x14d),packageFile=process[a49_0xb11fb2(0x15f)]()+a49_0xb11fb2(0x163),frameworks=['mocha',a49_0xb11fb2(0x176),a49_0xb11fb2(0x15a),a49_0xb11fb2(0x17a),a49_0xb11fb2(0x170),a49_0xb11fb2(0x181),a49_0xb11fb2(0x155)];let config;logger[a49_0xb11fb2(0x174)](a49_0xb11fb2(0x171)),createConfigurationFile(yargs['argv']['username'],yargs[a49_0xb11fb2(0x183)][a49_0xb11fb2(0x15c)],yargs[a49_0xb11fb2(0x183)]['playwright']);try{sdkSetup();}catch(a49_0x1df5d8){logger['debug'](a49_0xb11fb2(0x177)+a49_0x1df5d8);}addScriptInPackageJson();function createConfigurationFile(_0x1a7498,_0x107e0d,_0x25f8b9=![]){const _0x21e76a=a49_0xb11fb2,_0x284984={};_0x284984['qOGDR']='utf8',_0x284984['IOsPe']='YOUR_USERNAME',_0x284984['jOyht']=_0x21e76a(0x17f);const _0x595b91=_0x284984;try{let _0x45d361=fs['readFileSync'](_0x25f8b9?configFileTemplatePW:configFileTemplate,_0x595b91['qOGDR']);_0x1a7498&&(_0x45d361=_0x45d361[_0x21e76a(0x16f)](_0x595b91[_0x21e76a(0x180)],_0x1a7498)),_0x107e0d&&(_0x45d361=_0x45d361[_0x21e76a(0x16f)](_0x595b91[_0x21e76a(0x157)],_0x107e0d)),config=yaml[_0x21e76a(0x153)](_0x45d361),fs[_0x21e76a(0x179)](configFile,_0x45d361,_0x3ef3e1=>{const _0x2df72a=_0x21e76a;_0x3ef3e1&&logger[_0x2df72a(0x16d)](_0x3ef3e1);});}catch(_0x36bd7a){logger[_0x21e76a(0x16d)](_0x36bd7a);}}function addPostInstallScript(_0x535024,_0x137415){const _0x145b03=a49_0xb11fb2,_0x1a6ec7={};_0x1a6ec7[_0x145b03(0x173)]=_0x145b03(0x150),_0x1a6ec7[_0x145b03(0x13e)]='npm\x20update\x20browserstack-node-sdk',_0x1a6ec7[_0x145b03(0x17d)]=_0x145b03(0x178);const _0x4cd7cc=_0x1a6ec7;let _0x1f02e0=_0x535024[_0x4cd7cc[_0x145b03(0x173)]];if(_0x1f02e0&&_0x1f02e0[_0x145b03(0x169)](_0x4cd7cc['UhmIl']))return;!_0x1f02e0?_0x1f02e0=_0x4cd7cc[_0x145b03(0x13e)]:_0x1f02e0+=_0x4cd7cc[_0x145b03(0x17d)],_0x137415[_0x145b03(0x147)]([_0x4cd7cc[_0x145b03(0x173)],_0x1f02e0]);}function addScriptInPackageJson(){const _0xb2073f=a49_0xb11fb2,_0x1474a1={'SLDjf':'utf8','dJXsL':function(_0x45bc09,_0x2b7a85){return _0x45bc09<_0x2b7a85;},'VUHod':function(_0x2ecea4,_0x1131f3,_0x148b5b){return _0x2ecea4(_0x1131f3,_0x148b5b);},'SmBOX':function(_0x3c230b,_0x377beb,_0x42104c){return _0x3c230b(_0x377beb,_0x42104c);},'RfmTD':function(_0x1009d9,_0x1ac844){return _0x1009d9!==_0x1ac844;},'dQmHz':_0xb2073f(0x154)},_0x45c750=JSON['parse'](fs[_0xb2073f(0x16c)](packageFile,_0x1474a1[_0xb2073f(0x165)])),_0x3b87c8=[];for(let _0x52138b=0x0;_0x1474a1[_0xb2073f(0x15e)](_0x52138b,frameworks[_0xb2073f(0x167)]);_0x52138b+=0x1){const _0x3345f0=_0x1474a1[_0xb2073f(0x182)](findScriptsWithFramework,_0x45c750['scripts'],frameworks[_0x52138b]);for(let _0x31b4a2=0x0;_0x1474a1[_0xb2073f(0x15e)](_0x31b4a2,_0x3345f0[_0xb2073f(0x167)]);_0x31b4a2+=0x1){_0x3b87c8[_0xb2073f(0x147)](_0x1474a1[_0xb2073f(0x182)](getUpdatedCommand,_0x45c750['scripts'],_0x3345f0[_0x31b4a2]));}_0x1474a1[_0xb2073f(0x168)](addPostInstallScript,_0x45c750['scripts'],_0x3b87c8);}const _0x838b52={..._0x45c750['scripts']},_0x45f412=_0x838b52;for(let _0x24d18c=0x0;_0x1474a1[_0xb2073f(0x15e)](_0x24d18c,_0x3b87c8[_0xb2073f(0x167)]);_0x24d18c+=0x1){_0x45f412[_0x3b87c8[_0x24d18c][0x0]]=_0x3b87c8[_0x24d18c][0x1];}_0x1474a1['RfmTD'](JSON[_0xb2073f(0x14f)](_0x45c750['scripts']),JSON[_0xb2073f(0x14f)](_0x45f412))&&(logger[_0xb2073f(0x174)](_0x1474a1['dQmHz']),_0x45c750[_0xb2073f(0x149)]=_0x45f412,fs[_0xb2073f(0x179)](packageFile,JSON[_0xb2073f(0x14f)](_0x45c750,null,0x2),_0x19f2da=>{const _0x4557f7=_0xb2073f;_0x19f2da&&logger[_0x4557f7(0x16d)](_0x19f2da);}));};function findScriptsWithFramework(_0x521249,_0x5e67c0){const _0x46d252=a49_0xb11fb2,_0x19f481={};_0x19f481[_0x46d252(0x152)]=function(_0x3196a8,_0x2d853a){return _0x3196a8<_0x2d853a;},_0x19f481[_0x46d252(0x16e)]=_0x46d252(0x17c);const _0x283a92=_0x19f481,_0x3338bb=[],_0x36d5c8=Object[_0x46d252(0x172)](_0x521249);for(let _0x3c9aab=0x0;_0x283a92[_0x46d252(0x152)](_0x3c9aab,_0x36d5c8[_0x46d252(0x167)]);_0x3c9aab+=0x1){_0x36d5c8[_0x3c9aab][0x1][_0x46d252(0x169)](_0x5e67c0)&&!_0x36d5c8[_0x3c9aab][0x1][_0x46d252(0x169)](_0x283a92['PdWiQ'])&&_0x3338bb[_0x46d252(0x147)](_0x36d5c8[_0x3c9aab][0x0]);}return _0x3338bb;}function getUpdatedCommand(_0x177d18,_0x28a24d){const _0x2cad32=a49_0xb11fb2,_0x394d1c={};_0x394d1c[_0x2cad32(0x140)]=function(_0x17bf16,_0x3bcc96){return _0x17bf16!==_0x3bcc96;},_0x394d1c[_0x2cad32(0x15b)]=_0x2cad32(0x17c),_0x394d1c[_0x2cad32(0x175)]=function(_0x38f14f,_0x146516){return _0x38f14f===_0x146516;};const _0x2213e9=_0x394d1c,_0x2b4090=_0x28a24d+_0x2cad32(0x166),_0x3fd12b=_0x177d18[_0x28a24d],_0x43b1cc=_0x3fd12b['split']('\x20');for(const _0x5efed5 of frameworks){if(_0x2213e9[_0x2cad32(0x140)](_0x43b1cc[_0x2cad32(0x17e)](_0x5efed5),-0x1)){_0x43b1cc[_0x2cad32(0x17b)](_0x43b1cc[_0x2cad32(0x17e)](_0x5efed5),0x0,_0x2213e9['jWmXs']);break;}}let _0x2dd33a=_0x43b1cc[_0x2cad32(0x160)]('\x20');return _0x2213e9[_0x2cad32(0x175)](_0x2dd33a,_0x3fd12b)&&(_0x2dd33a=_0x2cad32(0x161)+_0x3fd12b),[_0x2b4090,_0x2dd33a];}function sdkSetup(){const _0x1ff567=a49_0xb11fb2,_0x364dc0={};_0x364dc0[_0x1ff567(0x14a)]=_0x1ff567(0x162),_0x364dc0[_0x1ff567(0x14c)]=_0x1ff567(0x16b);const _0x2e8c47=_0x364dc0;if(helper[_0x1ff567(0x14e)](config))return;config[_0x1ff567(0x146)]=_0x2e8c47[_0x1ff567(0x14a)];try{utilities[_0x1ff567(0x13f)](_0x2e8c47[_0x1ff567(0x14c)],{},config,'');}catch(_0x579c5f){logger['debug'](_0x1ff567(0x177)+_0x579c5f);}}logger['info'](a49_0xb11fb2(0x15d));