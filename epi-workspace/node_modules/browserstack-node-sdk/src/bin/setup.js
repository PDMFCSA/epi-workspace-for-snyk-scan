#!/usr/bin/env node

const a48_0x1021e6=a48_0x4bbe;(function(_0x665fc7,_0x300ee2){const _0x10469e=a48_0x4bbe,_0x16b50e=_0x665fc7();while(!![]){try{const _0xc49d23=parseInt(_0x10469e(0x1ad))/0x1*(-parseInt(_0x10469e(0x1b8))/0x2)+parseInt(_0x10469e(0x1a7))/0x3+-parseInt(_0x10469e(0x19b))/0x4*(-parseInt(_0x10469e(0x1d4))/0x5)+parseInt(_0x10469e(0x1ae))/0x6*(parseInt(_0x10469e(0x1cf))/0x7)+parseInt(_0x10469e(0x19a))/0x8*(parseInt(_0x10469e(0x1d2))/0x9)+-parseInt(_0x10469e(0x1d0))/0xa*(-parseInt(_0x10469e(0x19d))/0xb)+-parseInt(_0x10469e(0x198))/0xc;if(_0xc49d23===_0x300ee2)break;else _0x16b50e['push'](_0x16b50e['shift']());}catch(_0x4889c1){_0x16b50e['push'](_0x16b50e['shift']());}}}(a48_0x35e4,0x1cb50));const fs=require('fs'),helper=require('../helpers/helper'),utilities=require('../helpers/utilities'),yaml=require(a48_0x1021e6(0x1b6)),yargs=require(a48_0x1021e6(0x1d5)),logger=require(a48_0x1021e6(0x1b2))['winstonLogger'],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+a48_0x1021e6(0x1b3),configFile=process[a48_0x1021e6(0x1c1)]()+a48_0x1021e6(0x1a8),packageFile=process['cwd']()+a48_0x1021e6(0x1be),frameworks=[a48_0x1021e6(0x1b0),a48_0x1021e6(0x1c4),'cucumber-js',a48_0x1021e6(0x19f),a48_0x1021e6(0x1d6),'codeceptjs',a48_0x1021e6(0x1bf)];let config;logger[a48_0x1021e6(0x1ca)](a48_0x1021e6(0x1a5)),createConfigurationFile(yargs[a48_0x1021e6(0x1bd)]['username'],yargs[a48_0x1021e6(0x1bd)][a48_0x1021e6(0x1c5)],yargs[a48_0x1021e6(0x1bd)][a48_0x1021e6(0x1bf)]);function a48_0x35e4(){const _0x3b14df=['8mjXQXP','8JOMKFZ','node-setup','409376OzShlz','BBBVT','node','scripts','replace','includes','stringify','YOUR_USERNAME','Creating\x20configuration\x20file...','source','280515lByPMI','/browserstack.yml','DIqOK','TfVcJ','-browserstack','join','4wvCTYz','4362NpYjcD','YOUR_ACCESS_KEY','mocha','length','../helpers/logger','/../../browserstack.pw.yml.sample','SDKSetup','utf8','js-yaml','load','18252dXsgCE','splice','Setup\x20completed','nwfYZ','yiTpZ','argv','/package.json','playwright','browserstack-node-sdk','cwd','Adding\x20new\x20script(s)\x20in\x20package.json...','RAafK','jest','key','error','fWxQj','pqoNx','wkIos','info','VJXoh','MoSTF','isUndefined','readFileSync','35tMjVuB','40NHOAXl','debug','2018655eeJoLX','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','459570KjDHwp','yargs','nightwatch','iZbtA','writeFileSync','postinstall','indexOf','JOZho','smZdU','push','FiXMv','mTqNp','6000468AYJKwf','UYdPM'];a48_0x35e4=function(){return _0x3b14df;};return a48_0x35e4();}try{sdkSetup();}catch(a48_0xa36e88){logger['debug']('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a48_0xa36e88);}addScriptInPackageJson();function createConfigurationFile(_0x33434d,_0x2c2ce9,_0x1ba517=![]){const _0x4559da=a48_0x1021e6,_0x53b38e={};_0x53b38e[_0x4559da(0x1a9)]=_0x4559da(0x1b5),_0x53b38e[_0x4559da(0x1c3)]=_0x4559da(0x1a4),_0x53b38e['mTqNp']=_0x4559da(0x1af);const _0x182897=_0x53b38e;try{let _0x5b7c4a=fs[_0x4559da(0x1ce)](_0x1ba517?configFileTemplatePW:configFileTemplate,_0x182897['DIqOK']);_0x33434d&&(_0x5b7c4a=_0x5b7c4a[_0x4559da(0x1a1)](_0x182897['RAafK'],_0x33434d)),_0x2c2ce9&&(_0x5b7c4a=_0x5b7c4a[_0x4559da(0x1a1)](_0x182897[_0x4559da(0x197)],_0x2c2ce9)),config=yaml[_0x4559da(0x1b7)](_0x5b7c4a),fs[_0x4559da(0x1d8)](configFile,_0x5b7c4a,_0xbc24a4=>{const _0x3338e7=_0x4559da;_0xbc24a4&&logger[_0x3338e7(0x1c6)](_0xbc24a4);});}catch(_0x3ab7ff){logger[_0x4559da(0x1c6)](_0x3ab7ff);}}function addPostInstallScript(_0x49cc57,_0x315d37){const _0x1a5eb9=a48_0x1021e6,_0x214cc4={};_0x214cc4[_0x1a5eb9(0x19e)]=_0x1a5eb9(0x191),_0x214cc4[_0x1a5eb9(0x1d7)]='npm\x20update\x20browserstack-node-sdk',_0x214cc4['wmCSz']='\x20&&\x20npm\x20update\x20browserstack-node-sdk';const _0x1264fb=_0x214cc4;let _0x160097=_0x49cc57[_0x1264fb[_0x1a5eb9(0x19e)]];if(_0x160097&&_0x160097[_0x1a5eb9(0x1a2)](_0x1264fb['iZbtA']))return;!_0x160097?_0x160097=_0x1264fb[_0x1a5eb9(0x1d7)]:_0x160097+=_0x1264fb['wmCSz'],_0x315d37['push']([_0x1264fb[_0x1a5eb9(0x19e)],_0x160097]);}function addScriptInPackageJson(){const _0x3b4d41=a48_0x1021e6,_0x22aa93={'pqoNx':_0x3b4d41(0x1b5),'BRQgP':function(_0x1a5691,_0x92ad57){return _0x1a5691<_0x92ad57;},'nwfYZ':function(_0x5c9f05,_0x40ca70,_0x57c8d2){return _0x5c9f05(_0x40ca70,_0x57c8d2);},'wkIos':function(_0x466085,_0x842608){return _0x466085<_0x842608;},'VJXoh':function(_0x56c702,_0x30925a,_0x5eac66){return _0x56c702(_0x30925a,_0x5eac66);},'NKyGt':function(_0x6cd273,_0x17e22f){return _0x6cd273!==_0x17e22f;},'smZdU':_0x3b4d41(0x1c2)},_0xc994ba=JSON['parse'](fs['readFileSync'](packageFile,_0x22aa93[_0x3b4d41(0x1c8)])),_0x5d1d20=[];for(let _0x405ac7=0x0;_0x22aa93['BRQgP'](_0x405ac7,frameworks[_0x3b4d41(0x1b1)]);_0x405ac7+=0x1){const _0x26d57e=_0x22aa93[_0x3b4d41(0x1bb)](findScriptsWithFramework,_0xc994ba['scripts'],frameworks[_0x405ac7]);for(let _0x2284c1=0x0;_0x22aa93[_0x3b4d41(0x1c9)](_0x2284c1,_0x26d57e[_0x3b4d41(0x1b1)]);_0x2284c1+=0x1){_0x5d1d20[_0x3b4d41(0x195)](_0x22aa93['nwfYZ'](getUpdatedCommand,_0xc994ba[_0x3b4d41(0x1a0)],_0x26d57e[_0x2284c1]));}_0x22aa93[_0x3b4d41(0x1cb)](addPostInstallScript,_0xc994ba[_0x3b4d41(0x1a0)],_0x5d1d20);}const _0x3f29ab={..._0xc994ba['scripts']},_0x3aa697=_0x3f29ab;for(let _0x3a5d76=0x0;_0x22aa93[_0x3b4d41(0x1c9)](_0x3a5d76,_0x5d1d20[_0x3b4d41(0x1b1)]);_0x3a5d76+=0x1){_0x3aa697[_0x5d1d20[_0x3a5d76][0x0]]=_0x5d1d20[_0x3a5d76][0x1];}_0x22aa93['NKyGt'](JSON[_0x3b4d41(0x1a3)](_0xc994ba[_0x3b4d41(0x1a0)]),JSON[_0x3b4d41(0x1a3)](_0x3aa697))&&(logger[_0x3b4d41(0x1ca)](_0x22aa93[_0x3b4d41(0x194)]),_0xc994ba[_0x3b4d41(0x1a0)]=_0x3aa697,fs[_0x3b4d41(0x1d8)](packageFile,JSON[_0x3b4d41(0x1a3)](_0xc994ba,null,0x2),_0x355889=>{const _0x4bdd36=_0x3b4d41;_0x355889&&logger[_0x4bdd36(0x1c6)](_0x355889);}));};function a48_0x4bbe(_0x2a57d0,_0x2a76f7){const _0x35e43c=a48_0x35e4();return a48_0x4bbe=function(_0x4bbe62,_0xfc6c1b){_0x4bbe62=_0x4bbe62-0x191;let _0x5c206d=_0x35e43c[_0x4bbe62];return _0x5c206d;},a48_0x4bbe(_0x2a57d0,_0x2a76f7);}function findScriptsWithFramework(_0x5f36e5,_0xf7b778){const _0x3cafde=a48_0x1021e6,_0x254a7a={};_0x254a7a[_0x3cafde(0x196)]=function(_0x2fa929,_0x5003de){return _0x2fa929<_0x5003de;},_0x254a7a[_0x3cafde(0x1c7)]=_0x3cafde(0x1c0);const _0x3a135d=_0x254a7a,_0x371aa7=[],_0x10985a=Object['entries'](_0x5f36e5);for(let _0x347e6a=0x0;_0x3a135d['FiXMv'](_0x347e6a,_0x10985a[_0x3cafde(0x1b1)]);_0x347e6a+=0x1){_0x10985a[_0x347e6a][0x1][_0x3cafde(0x1a2)](_0xf7b778)&&!_0x10985a[_0x347e6a][0x1]['includes'](_0x3a135d['fWxQj'])&&_0x371aa7[_0x3cafde(0x195)](_0x10985a[_0x347e6a][0x0]);}return _0x371aa7;}function getUpdatedCommand(_0x4af259,_0x3df4ac){const _0x381a=a48_0x1021e6,_0x1f0c4d={};_0x1f0c4d[_0x381a(0x193)]=function(_0x36b0b7,_0x51486b){return _0x36b0b7!==_0x51486b;},_0x1f0c4d[_0x381a(0x1bc)]=_0x381a(0x1c0),_0x1f0c4d[_0x381a(0x1cc)]=function(_0x511834,_0x3d8c90){return _0x511834===_0x3d8c90;};const _0x498b91=_0x1f0c4d,_0x5b8d50=_0x3df4ac+_0x381a(0x1ab),_0x532500=_0x4af259[_0x3df4ac],_0x94d94e=_0x532500['split']('\x20');for(const _0x4c3067 of frameworks){if(_0x498b91[_0x381a(0x193)](_0x94d94e[_0x381a(0x192)](_0x4c3067),-0x1)){_0x94d94e[_0x381a(0x1b9)](_0x94d94e[_0x381a(0x192)](_0x4c3067),0x0,_0x498b91[_0x381a(0x1bc)]);break;}}let _0xe94714=_0x94d94e[_0x381a(0x1ac)]('\x20');return _0x498b91[_0x381a(0x1cc)](_0xe94714,_0x532500)&&(_0xe94714='browserstack-node-sdk\x20'+_0x532500),[_0x5b8d50,_0xe94714];}function sdkSetup(){const _0x373463=a48_0x1021e6,_0x2fed7f={};_0x2fed7f[_0x373463(0x1aa)]=_0x373463(0x19c),_0x2fed7f[_0x373463(0x199)]=_0x373463(0x1b4);const _0x313271=_0x2fed7f;if(helper[_0x373463(0x1cd)](config))return;config[_0x373463(0x1a6)]=_0x313271[_0x373463(0x1aa)];try{utilities['fireFunnelTestEvent'](_0x313271[_0x373463(0x199)],{},config,'');}catch(_0xc9692c){logger[_0x373463(0x1d1)](_0x373463(0x1d3)+_0xc9692c);}}logger[a48_0x1021e6(0x1ca)](a48_0x1021e6(0x1ba));