#!/usr/bin/env node

const a50_0x23bb37=a50_0x13e3;function a50_0x86ad(){const _0x31363a=['meXTA','/package.json','nightwatch','browserstack-node-sdk','mocha','8bnjWJg','AAdAW','Setup\x20completed','wGgZD','/../../browserstack.pw.yml.sample','QwJRX','YOUR_ACCESS_KEY','1063605WJooQr','mpAXt','../helpers/utilities','info','stringify','replace','browserstack-node-sdk\x20','playwright','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','winstonLogger','CjjZr','source','5573540tjiQMy','8696961KIwpMF','parse','ICwlT','pjTML','Creating\x20configuration\x20file...','Adding\x20new\x20script(s)\x20in\x20package.json...','QKqwH','2698504faavdz','debug','/../../browserstack.yml.sample','postinstall','yargs','key','error','../helpers/logger','YOUR_USERNAME','argv','fireFunnelTestEvent','zRBGl','entries','js-yaml','5632614vMGuDm','SDKSetup','Wruiw','scripts','VrkhO','UTDhE','writeFileSync','utf8','HELrv','34351pwWYJJ','fVLXP','sHJjy','codeceptjs','yfHYo','split','npm\x20update\x20browserstack-node-sdk','xIhxx','length','splice','push','includes','24704jIfcCC','jest','readFileSync','isUndefined','/browserstack.yml','DjVcE'];a50_0x86ad=function(){return _0x31363a;};return a50_0x86ad();}(function(_0x4f25bb,_0x4ad7ef){const _0x54342d=a50_0x13e3,_0x3dc06a=_0x4f25bb();while(!![]){try{const _0x177ecd=-parseInt(_0x54342d(0x145))/0x1*(-parseInt(_0x54342d(0x15c))/0x2)+-parseInt(_0x54342d(0x11a))/0x3+-parseInt(_0x54342d(0x151))/0x4+parseInt(_0x54342d(0x126))/0x5+-parseInt(_0x54342d(0x13c))/0x6+parseInt(_0x54342d(0x127))/0x7+-parseInt(_0x54342d(0x12e))/0x8;if(_0x177ecd===_0x4ad7ef)break;else _0x3dc06a['push'](_0x3dc06a['shift']());}catch(_0x577e48){_0x3dc06a['push'](_0x3dc06a['shift']());}}}(a50_0x86ad,0xd168e));const fs=require('fs'),helper=require('../helpers/helper'),utilities=require(a50_0x23bb37(0x11c)),yaml=require(a50_0x23bb37(0x13b)),yargs=require(a50_0x23bb37(0x132)),logger=require(a50_0x23bb37(0x135))[a50_0x23bb37(0x123)],configFileTemplate=__dirname+a50_0x23bb37(0x130),configFileTemplatePW=__dirname+a50_0x23bb37(0x160),configFile=process['cwd']()+a50_0x23bb37(0x155),packageFile=process['cwd']()+a50_0x23bb37(0x158),frameworks=[a50_0x23bb37(0x15b),a50_0x23bb37(0x152),'cucumber-js','node',a50_0x23bb37(0x159),a50_0x23bb37(0x148),a50_0x23bb37(0x121)];let config;logger['info'](a50_0x23bb37(0x12b)),createConfigurationFile(yargs[a50_0x23bb37(0x137)]['username'],yargs[a50_0x23bb37(0x137)][a50_0x23bb37(0x133)],yargs[a50_0x23bb37(0x137)][a50_0x23bb37(0x121)]);try{sdkSetup();}catch(a50_0xba5f8a){logger[a50_0x23bb37(0x12f)](a50_0x23bb37(0x122)+a50_0xba5f8a);}addScriptInPackageJson();function createConfigurationFile(_0x3da2ce,_0x31b9d3,_0x116683=![]){const _0x8741ca=a50_0x23bb37,_0x5d82fc={};_0x5d82fc[_0x8741ca(0x161)]=_0x8741ca(0x143),_0x5d82fc[_0x8741ca(0x129)]=_0x8741ca(0x136),_0x5d82fc[_0x8741ca(0x12d)]=_0x8741ca(0x162);const _0x37aa96=_0x5d82fc;try{let _0x41199a=fs[_0x8741ca(0x153)](_0x116683?configFileTemplatePW:configFileTemplate,_0x37aa96[_0x8741ca(0x161)]);_0x3da2ce&&(_0x41199a=_0x41199a[_0x8741ca(0x11f)](_0x37aa96['ICwlT'],_0x3da2ce)),_0x31b9d3&&(_0x41199a=_0x41199a[_0x8741ca(0x11f)](_0x37aa96[_0x8741ca(0x12d)],_0x31b9d3)),config=yaml['load'](_0x41199a),fs[_0x8741ca(0x142)](configFile,_0x41199a,_0xcb9857=>{const _0x25d8bf=_0x8741ca;_0xcb9857&&logger[_0x25d8bf(0x134)](_0xcb9857);});}catch(_0x451685){logger['error'](_0x451685);}}function a50_0x13e3(_0x439b25,_0x367e28){const _0x86ad9=a50_0x86ad();return a50_0x13e3=function(_0x13e313,_0xbe3865){_0x13e313=_0x13e313-0x11a;let _0x24330c=_0x86ad9[_0x13e313];return _0x24330c;},a50_0x13e3(_0x439b25,_0x367e28);}function addPostInstallScript(_0x181d92,_0x3e1cf5){const _0x31ed1e=a50_0x23bb37,_0x4ea16f={};_0x4ea16f[_0x31ed1e(0x146)]=_0x31ed1e(0x131),_0x4ea16f[_0x31ed1e(0x124)]=_0x31ed1e(0x14b),_0x4ea16f['yfHYo']='\x20&&\x20npm\x20update\x20browserstack-node-sdk';const _0x2d0324=_0x4ea16f;let _0x23f0d0=_0x181d92[_0x2d0324['fVLXP']];if(_0x23f0d0&&_0x23f0d0[_0x31ed1e(0x150)](_0x2d0324[_0x31ed1e(0x124)]))return;!_0x23f0d0?_0x23f0d0=_0x2d0324[_0x31ed1e(0x124)]:_0x23f0d0+=_0x2d0324[_0x31ed1e(0x149)],_0x3e1cf5[_0x31ed1e(0x14f)]([_0x2d0324[_0x31ed1e(0x146)],_0x23f0d0]);}function addScriptInPackageJson(){const _0x56ddfc=a50_0x23bb37,_0x3ed035={'wGgZD':_0x56ddfc(0x143),'DjVcE':function(_0x4129e1,_0x54f5a9){return _0x4129e1<_0x54f5a9;},'mpAXt':function(_0x42d2ce,_0x236f62,_0x17ef3c){return _0x42d2ce(_0x236f62,_0x17ef3c);},'jsnvX':function(_0x2f9663,_0x22a726){return _0x2f9663<_0x22a726;},'AAdAW':function(_0x5a9bfb,_0x271347,_0x2e2f47){return _0x5a9bfb(_0x271347,_0x2e2f47);},'QaSEf':function(_0x28c4ba,_0x232770){return _0x28c4ba<_0x232770;},'zRBGl':function(_0x5067d1,_0x96c01){return _0x5067d1!==_0x96c01;},'meXTA':_0x56ddfc(0x12c)},_0x1195d3=JSON[_0x56ddfc(0x128)](fs[_0x56ddfc(0x153)](packageFile,_0x3ed035[_0x56ddfc(0x15f)])),_0x2b4f64=[];for(let _0x459b07=0x0;_0x3ed035[_0x56ddfc(0x156)](_0x459b07,frameworks['length']);_0x459b07+=0x1){const _0xe7a712=_0x3ed035[_0x56ddfc(0x11b)](findScriptsWithFramework,_0x1195d3[_0x56ddfc(0x13f)],frameworks[_0x459b07]);for(let _0x1e1ec0=0x0;_0x3ed035['jsnvX'](_0x1e1ec0,_0xe7a712[_0x56ddfc(0x14d)]);_0x1e1ec0+=0x1){_0x2b4f64[_0x56ddfc(0x14f)](_0x3ed035[_0x56ddfc(0x15d)](getUpdatedCommand,_0x1195d3[_0x56ddfc(0x13f)],_0xe7a712[_0x1e1ec0]));}_0x3ed035[_0x56ddfc(0x15d)](addPostInstallScript,_0x1195d3['scripts'],_0x2b4f64);}const _0x911a60={..._0x1195d3[_0x56ddfc(0x13f)]},_0x5e1468=_0x911a60;for(let _0x2bec64=0x0;_0x3ed035['QaSEf'](_0x2bec64,_0x2b4f64[_0x56ddfc(0x14d)]);_0x2bec64+=0x1){_0x5e1468[_0x2b4f64[_0x2bec64][0x0]]=_0x2b4f64[_0x2bec64][0x1];}_0x3ed035[_0x56ddfc(0x139)](JSON['stringify'](_0x1195d3[_0x56ddfc(0x13f)]),JSON[_0x56ddfc(0x11e)](_0x5e1468))&&(logger[_0x56ddfc(0x11d)](_0x3ed035[_0x56ddfc(0x157)]),_0x1195d3['scripts']=_0x5e1468,fs['writeFileSync'](packageFile,JSON['stringify'](_0x1195d3,null,0x2),_0x585373=>{const _0x520479=_0x56ddfc;_0x585373&&logger[_0x520479(0x134)](_0x585373);}));};function findScriptsWithFramework(_0x5a5f4d,_0x334d4b){const _0x4ea7eb=a50_0x23bb37,_0x30eee6={};_0x30eee6[_0x4ea7eb(0x141)]=function(_0x4a7141,_0x49a093){return _0x4a7141<_0x49a093;},_0x30eee6['VrkhO']=_0x4ea7eb(0x15a);const _0xf28169=_0x30eee6,_0x4ac535=[],_0x3ff202=Object[_0x4ea7eb(0x13a)](_0x5a5f4d);for(let _0x4ebba9=0x0;_0xf28169[_0x4ea7eb(0x141)](_0x4ebba9,_0x3ff202[_0x4ea7eb(0x14d)]);_0x4ebba9+=0x1){_0x3ff202[_0x4ebba9][0x1]['includes'](_0x334d4b)&&!_0x3ff202[_0x4ebba9][0x1][_0x4ea7eb(0x150)](_0xf28169[_0x4ea7eb(0x140)])&&_0x4ac535[_0x4ea7eb(0x14f)](_0x3ff202[_0x4ebba9][0x0]);}return _0x4ac535;}function getUpdatedCommand(_0x1a22c3,_0x329c03){const _0x2e2de2=a50_0x23bb37,_0x51f776={};_0x51f776[_0x2e2de2(0x144)]=function(_0x3838cd,_0x18595a){return _0x3838cd!==_0x18595a;},_0x51f776[_0x2e2de2(0x13e)]=_0x2e2de2(0x15a),_0x51f776['xIhxx']=function(_0x2b4518,_0x1312c5){return _0x2b4518===_0x1312c5;};const _0x225540=_0x51f776,_0x353b64=_0x329c03+'-browserstack',_0x31258d=_0x1a22c3[_0x329c03],_0x2a1180=_0x31258d[_0x2e2de2(0x14a)]('\x20');for(const _0x2b137e of frameworks){if(_0x225540[_0x2e2de2(0x144)](_0x2a1180['indexOf'](_0x2b137e),-0x1)){_0x2a1180[_0x2e2de2(0x14e)](_0x2a1180['indexOf'](_0x2b137e),0x0,_0x225540[_0x2e2de2(0x13e)]);break;}}let _0x54eb55=_0x2a1180['join']('\x20');return _0x225540[_0x2e2de2(0x14c)](_0x54eb55,_0x31258d)&&(_0x54eb55=_0x2e2de2(0x120)+_0x31258d),[_0x353b64,_0x54eb55];}function sdkSetup(){const _0xd30601=a50_0x23bb37,_0x5a1a2e={};_0x5a1a2e[_0xd30601(0x12a)]='node-setup',_0x5a1a2e[_0xd30601(0x147)]=_0xd30601(0x13d);const _0x4c39ff=_0x5a1a2e;if(helper[_0xd30601(0x154)](config))return;config[_0xd30601(0x125)]=_0x4c39ff[_0xd30601(0x12a)];try{utilities[_0xd30601(0x138)](_0x4c39ff[_0xd30601(0x147)],{},config,'');}catch(_0x4f72f7){logger[_0xd30601(0x12f)](_0xd30601(0x122)+_0x4f72f7);}}logger[a50_0x23bb37(0x11d)](a50_0x23bb37(0x15e));