#!/usr/bin/env node

const a49_0x1865d8=a49_0x4d41;(function(_0x314bd8,_0x2c67c4){const _0x5af895=a49_0x4d41,_0x1314b1=_0x314bd8();while(!![]){try{const _0xe4ecb8=-parseInt(_0x5af895(0x138))/0x1+-parseInt(_0x5af895(0x14a))/0x2*(-parseInt(_0x5af895(0x113))/0x3)+parseInt(_0x5af895(0x137))/0x4+-parseInt(_0x5af895(0x143))/0x5+parseInt(_0x5af895(0x14f))/0x6+parseInt(_0x5af895(0x116))/0x7+parseInt(_0x5af895(0x115))/0x8*(-parseInt(_0x5af895(0x13e))/0x9);if(_0xe4ecb8===_0x2c67c4)break;else _0x1314b1['push'](_0x1314b1['shift']());}catch(_0x4171cd){_0x1314b1['push'](_0x1314b1['shift']());}}}(a49_0xcd25,0x7422a));const fs=require('fs'),helper=require(a49_0x1865d8(0x127)),utilities=require('../helpers/utilities'),yaml=require(a49_0x1865d8(0x11e)),yargs=require('yargs'),logger=require('../helpers/logger')[a49_0x1865d8(0x135)],configFileTemplate=__dirname+a49_0x1865d8(0x148),configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process['cwd']()+a49_0x1865d8(0x117),packageFile=process[a49_0x1865d8(0x119)]()+a49_0x1865d8(0x153),frameworks=[a49_0x1865d8(0x145),a49_0x1865d8(0x152),a49_0x1865d8(0x128),a49_0x1865d8(0x14c),a49_0x1865d8(0x13a),a49_0x1865d8(0x129),a49_0x1865d8(0x123)];let config;logger[a49_0x1865d8(0x134)](a49_0x1865d8(0x125)),createConfigurationFile(yargs[a49_0x1865d8(0x146)][a49_0x1865d8(0x121)],yargs[a49_0x1865d8(0x146)]['key'],yargs[a49_0x1865d8(0x146)][a49_0x1865d8(0x123)]);try{sdkSetup();}catch(a49_0x4b7376){logger['debug']('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a49_0x4b7376);}addScriptInPackageJson();function a49_0x4d41(_0xd210dd,_0x912a6b){const _0xcd25f9=a49_0xcd25();return a49_0x4d41=function(_0x4d4124,_0x2e4738){_0x4d4124=_0x4d4124-0x10e;let _0x2548b2=_0xcd25f9[_0x4d4124];return _0x2548b2;},a49_0x4d41(_0xd210dd,_0x912a6b);}function createConfigurationFile(_0x94ea99,_0x1331c3,_0x4b0f84=![]){const _0x5a2093=a49_0x1865d8,_0x48468d={};_0x48468d['Vtqtw']=_0x5a2093(0x124),_0x48468d[_0x5a2093(0x133)]=_0x5a2093(0x10e),_0x48468d[_0x5a2093(0x154)]=_0x5a2093(0x12e);const _0x237ad4=_0x48468d;try{let _0x5b70b9=fs[_0x5a2093(0x131)](_0x4b0f84?configFileTemplatePW:configFileTemplate,_0x237ad4['Vtqtw']);_0x94ea99&&(_0x5b70b9=_0x5b70b9[_0x5a2093(0x12b)](_0x237ad4[_0x5a2093(0x133)],_0x94ea99)),_0x1331c3&&(_0x5b70b9=_0x5b70b9[_0x5a2093(0x12b)](_0x237ad4[_0x5a2093(0x154)],_0x1331c3)),config=yaml['load'](_0x5b70b9),fs[_0x5a2093(0x112)](configFile,_0x5b70b9,_0x17861f=>{const _0xcbc641=_0x5a2093;_0x17861f&&logger[_0xcbc641(0x14e)](_0x17861f);});}catch(_0x163cb8){logger[_0x5a2093(0x14e)](_0x163cb8);}}function addPostInstallScript(_0x278fee,_0x8075e1){const _0x187901=a49_0x1865d8,_0x581e54={};_0x581e54['caidW']='postinstall',_0x581e54['lOlBf']='npm\x20update\x20browserstack-node-sdk',_0x581e54[_0x187901(0x126)]=_0x187901(0x147);const _0x2da302=_0x581e54;let _0x3ab771=_0x278fee[_0x2da302[_0x187901(0x144)]];if(_0x3ab771&&_0x3ab771[_0x187901(0x122)](_0x2da302[_0x187901(0x11b)]))return;!_0x3ab771?_0x3ab771=_0x2da302['lOlBf']:_0x3ab771+=_0x2da302[_0x187901(0x126)],_0x8075e1[_0x187901(0x149)]([_0x2da302[_0x187901(0x144)],_0x3ab771]);}function addScriptInPackageJson(){const _0x1752f7=a49_0x1865d8,_0x448d10={'oqsNS':_0x1752f7(0x124),'BDfGp':function(_0xf02554,_0x5ad5f1){return _0xf02554<_0x5ad5f1;},'VqbTw':function(_0x57de5c,_0x351e9b,_0x4ba0ae){return _0x57de5c(_0x351e9b,_0x4ba0ae);},'lxqog':function(_0x1a6068,_0x58dd48){return _0x1a6068<_0x58dd48;},'zhzEZ':function(_0x468c33,_0x38f60f,_0xb9662c){return _0x468c33(_0x38f60f,_0xb9662c);},'WPrxZ':function(_0x374221,_0x277d02){return _0x374221<_0x277d02;},'PMBae':function(_0x37f5a6,_0x480480){return _0x37f5a6!==_0x480480;},'zoybe':_0x1752f7(0x12a)},_0x32a205=JSON['parse'](fs[_0x1752f7(0x131)](packageFile,_0x448d10['oqsNS'])),_0x7cf141=[];for(let _0x1015d3=0x0;_0x448d10[_0x1752f7(0x136)](_0x1015d3,frameworks['length']);_0x1015d3+=0x1){const _0x327697=_0x448d10[_0x1752f7(0x13c)](findScriptsWithFramework,_0x32a205[_0x1752f7(0x13d)],frameworks[_0x1015d3]);for(let _0x1c7212=0x0;_0x448d10[_0x1752f7(0x140)](_0x1c7212,_0x327697['length']);_0x1c7212+=0x1){_0x7cf141[_0x1752f7(0x149)](_0x448d10['zhzEZ'](getUpdatedCommand,_0x32a205[_0x1752f7(0x13d)],_0x327697[_0x1c7212]));}_0x448d10[_0x1752f7(0x13c)](addPostInstallScript,_0x32a205['scripts'],_0x7cf141);}const _0x32459c={..._0x32a205[_0x1752f7(0x13d)]},_0x385335=_0x32459c;for(let _0x5e37f7=0x0;_0x448d10[_0x1752f7(0x132)](_0x5e37f7,_0x7cf141[_0x1752f7(0x110)]);_0x5e37f7+=0x1){_0x385335[_0x7cf141[_0x5e37f7][0x0]]=_0x7cf141[_0x5e37f7][0x1];}_0x448d10[_0x1752f7(0x120)](JSON[_0x1752f7(0x13b)](_0x32a205['scripts']),JSON[_0x1752f7(0x13b)](_0x385335))&&(logger[_0x1752f7(0x134)](_0x448d10[_0x1752f7(0x118)]),_0x32a205[_0x1752f7(0x13d)]=_0x385335,fs[_0x1752f7(0x112)](packageFile,JSON['stringify'](_0x32a205,null,0x2),_0x4ad337=>{const _0x485be2=_0x1752f7;_0x4ad337&&logger[_0x485be2(0x14e)](_0x4ad337);}));}function a49_0xcd25(){const _0x5f4ce6=['YOUR_USERNAME','indexOf','length','browserstack-node-sdk\x20','writeFileSync','69327LKPLPV','splice','168qUCrlG','5243553Shrfmk','/browserstack.yml','zoybe','cwd','kcMMn','lOlBf','isUndefined','CpfHD','js-yaml','-browserstack','PMBae','username','includes','playwright','utf8','Creating\x20configuration\x20file...','slxNl','../helpers/helper','cucumber-js','codeceptjs','Adding\x20new\x20script(s)\x20in\x20package.json...','replace','YNqtP','split','YOUR_ACCESS_KEY','dHpQp','entries','readFileSync','WPrxZ','AMxyF','info','winstonLogger','BDfGp','785776HlXeKZ','316359xsIKTt','join','nightwatch','stringify','VqbTw','scripts','45891xyRTrZ','xMqlq','lxqog','EnkIb','rRPrA','4518090IvvzhG','caidW','mocha','argv','\x20&&\x20npm\x20update\x20browserstack-node-sdk','/../../browserstack.yml.sample','push','30omyXMF','node-setup','node','browserstack-node-sdk','error','3063528Dprbck','source','SDKSetup','jest','/package.json','ljxsf'];a49_0xcd25=function(){return _0x5f4ce6;};return a49_0xcd25();};function findScriptsWithFramework(_0x49d7b9,_0x40e40b){const _0x598d7d=a49_0x1865d8,_0x3595fd={};_0x3595fd['CpfHD']=function(_0xa7ad84,_0x357f64){return _0xa7ad84<_0x357f64;},_0x3595fd['YNqtP']=_0x598d7d(0x14d);const _0x384c3a=_0x3595fd,_0x5a8108=[],_0xc2ec3d=Object[_0x598d7d(0x130)](_0x49d7b9);for(let _0x14b32a=0x0;_0x384c3a[_0x598d7d(0x11d)](_0x14b32a,_0xc2ec3d['length']);_0x14b32a+=0x1){_0xc2ec3d[_0x14b32a][0x1][_0x598d7d(0x122)](_0x40e40b)&&!_0xc2ec3d[_0x14b32a][0x1][_0x598d7d(0x122)](_0x384c3a[_0x598d7d(0x12c)])&&_0x5a8108['push'](_0xc2ec3d[_0x14b32a][0x0]);}return _0x5a8108;}function getUpdatedCommand(_0x2bb59b,_0xa997b7){const _0x5bad32=a49_0x1865d8,_0x493f0d={};_0x493f0d['EnkIb']=function(_0x4b1789,_0x111159){return _0x4b1789!==_0x111159;},_0x493f0d['rRPrA']='browserstack-node-sdk',_0x493f0d[_0x5bad32(0x13f)]=function(_0x16f793,_0xce27c7){return _0x16f793===_0xce27c7;};const _0x483899=_0x493f0d,_0x3f0d33=_0xa997b7+_0x5bad32(0x11f),_0x132b01=_0x2bb59b[_0xa997b7],_0x5585df=_0x132b01[_0x5bad32(0x12d)]('\x20');for(const _0x3caac9 of frameworks){if(_0x483899[_0x5bad32(0x141)](_0x5585df[_0x5bad32(0x10f)](_0x3caac9),-0x1)){_0x5585df[_0x5bad32(0x114)](_0x5585df['indexOf'](_0x3caac9),0x0,_0x483899[_0x5bad32(0x142)]);break;}}let _0x28ac01=_0x5585df[_0x5bad32(0x139)]('\x20');return _0x483899['xMqlq'](_0x28ac01,_0x132b01)&&(_0x28ac01=_0x5bad32(0x111)+_0x132b01),[_0x3f0d33,_0x28ac01];}function sdkSetup(){const _0x354c45=a49_0x1865d8,_0x385538={};_0x385538[_0x354c45(0x12f)]=_0x354c45(0x14b),_0x385538[_0x354c45(0x11a)]=_0x354c45(0x151);const _0x324d4d=_0x385538;if(helper[_0x354c45(0x11c)](config))return;config[_0x354c45(0x150)]=_0x324d4d[_0x354c45(0x12f)];try{utilities['fireFunnelTestEvent'](_0x324d4d[_0x354c45(0x11a)],{},config,'');}catch(_0x1f62fc){logger['debug']('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+_0x1f62fc);}}logger[a49_0x1865d8(0x134)]('Setup\x20completed');