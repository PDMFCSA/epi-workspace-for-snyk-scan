#!/usr/bin/env node

const a45_0x4b6d3d=a45_0x308e;(function(_0x1262d0,_0x30786a){const _0x36006e=a45_0x308e,_0x3a2f25=_0x1262d0();while(!![]){try{const _0x1139bf=parseInt(_0x36006e(0x14d))/0x1+parseInt(_0x36006e(0x15b))/0x2*(parseInt(_0x36006e(0x133))/0x3)+-parseInt(_0x36006e(0x15c))/0x4*(parseInt(_0x36006e(0x153))/0x5)+parseInt(_0x36006e(0x169))/0x6*(-parseInt(_0x36006e(0x146))/0x7)+parseInt(_0x36006e(0x138))/0x8*(parseInt(_0x36006e(0x158))/0x9)+-parseInt(_0x36006e(0x13c))/0xa+-parseInt(_0x36006e(0x128))/0xb*(-parseInt(_0x36006e(0x13f))/0xc);if(_0x1139bf===_0x30786a)break;else _0x3a2f25['push'](_0x3a2f25['shift']());}catch(_0x559914){_0x3a2f25['push'](_0x3a2f25['shift']());}}}(a45_0x5623,0x2d8ed));function a45_0x308e(_0xf82072,_0x272cb1){const _0x562351=a45_0x5623();return a45_0x308e=function(_0x308e69,_0x45261e){_0x308e69=_0x308e69-0x123;let _0x801add=_0x562351[_0x308e69];return _0x801add;},a45_0x308e(_0xf82072,_0x272cb1);}const fs=require('fs'),helper=require('../helpers/helper'),utilities=require(a45_0x4b6d3d(0x13d)),yaml=require('js-yaml'),yargs=require(a45_0x4b6d3d(0x149)),logger=require(a45_0x4b6d3d(0x129))[a45_0x4b6d3d(0x12e)],configFileTemplate=__dirname+a45_0x4b6d3d(0x164),configFileTemplatePW=__dirname+a45_0x4b6d3d(0x165),configFile=process[a45_0x4b6d3d(0x16c)]()+'/browserstack.yml',packageFile=process['cwd']()+'/package.json',frameworks=[a45_0x4b6d3d(0x151),a45_0x4b6d3d(0x154),'cucumber-js',a45_0x4b6d3d(0x134),a45_0x4b6d3d(0x12d),a45_0x4b6d3d(0x132),a45_0x4b6d3d(0x124)];let config;logger[a45_0x4b6d3d(0x15a)](a45_0x4b6d3d(0x161)),createConfigurationFile(yargs[a45_0x4b6d3d(0x168)][a45_0x4b6d3d(0x148)],yargs['argv'][a45_0x4b6d3d(0x127)],yargs['argv'][a45_0x4b6d3d(0x124)]);try{sdkSetup();}catch(a45_0xa98de8){logger['debug']('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a45_0xa98de8);}addScriptInPackageJson();function createConfigurationFile(_0x7314b7,_0x388e7c,_0x2abf84=![]){const _0x13c067=a45_0x4b6d3d,_0x57c6f0={};_0x57c6f0[_0x13c067(0x14b)]='utf8',_0x57c6f0[_0x13c067(0x157)]=_0x13c067(0x14f),_0x57c6f0[_0x13c067(0x170)]=_0x13c067(0x156);const _0x3210b6=_0x57c6f0;try{let _0x4773d5=fs[_0x13c067(0x13b)](_0x2abf84?configFileTemplatePW:configFileTemplate,_0x3210b6[_0x13c067(0x14b)]);_0x7314b7&&(_0x4773d5=_0x4773d5[_0x13c067(0x13e)](_0x3210b6[_0x13c067(0x157)],_0x7314b7)),_0x388e7c&&(_0x4773d5=_0x4773d5[_0x13c067(0x13e)](_0x3210b6[_0x13c067(0x170)],_0x388e7c)),config=yaml[_0x13c067(0x16d)](_0x4773d5),fs[_0x13c067(0x16f)](configFile,_0x4773d5,_0x588709=>{const _0x5c5abc=_0x13c067;_0x588709&&logger[_0x5c5abc(0x145)](_0x588709);});}catch(_0xea6cf9){logger[_0x13c067(0x145)](_0xea6cf9);}}function addPostInstallScript(_0x409db9,_0x38b8d5){const _0x69327e=a45_0x4b6d3d,_0x4f3546={};_0x4f3546[_0x69327e(0x12b)]=_0x69327e(0x166),_0x4f3546[_0x69327e(0x13a)]='npm\x20update\x20browserstack-node-sdk',_0x4f3546[_0x69327e(0x131)]=_0x69327e(0x136);const _0x4a5481=_0x4f3546;let _0xdd52cb=_0x409db9[_0x4a5481[_0x69327e(0x12b)]];if(_0xdd52cb&&_0xdd52cb['includes'](_0x4a5481['DCWvg']))return;!_0xdd52cb?_0xdd52cb=_0x4a5481[_0x69327e(0x13a)]:_0xdd52cb+=_0x4a5481['PlprM'],_0x38b8d5['push']([_0x4a5481['AOXQN'],_0xdd52cb]);}function addScriptInPackageJson(){const _0x194204=a45_0x4b6d3d,_0x2e0fec={'NtVOi':'utf8','gPSqO':function(_0x1b78f3,_0x5c087e){return _0x1b78f3<_0x5c087e;},'bEyLE':function(_0x14befa,_0x17a617,_0x57571e){return _0x14befa(_0x17a617,_0x57571e);},'aUDSX':function(_0x2c0159,_0x50f52f){return _0x2c0159<_0x50f52f;},'ghOnV':function(_0x298222,_0x142fde,_0x3476c5){return _0x298222(_0x142fde,_0x3476c5);},'CDHyV':function(_0x238ac1,_0x57be62){return _0x238ac1<_0x57be62;},'WzqjL':function(_0x215e2,_0x36c069){return _0x215e2!==_0x36c069;},'YvIyd':_0x194204(0x123)},_0x4733fe=JSON['parse'](fs[_0x194204(0x13b)](packageFile,_0x2e0fec[_0x194204(0x14a)])),_0xed0e8c=[];for(let _0x10d791=0x0;_0x2e0fec[_0x194204(0x137)](_0x10d791,frameworks[_0x194204(0x142)]);_0x10d791+=0x1){const _0x329bee=_0x2e0fec[_0x194204(0x12f)](findScriptsWithFramework,_0x4733fe[_0x194204(0x147)],frameworks[_0x10d791]);for(let _0x18f071=0x0;_0x2e0fec['aUDSX'](_0x18f071,_0x329bee[_0x194204(0x142)]);_0x18f071+=0x1){_0xed0e8c[_0x194204(0x125)](_0x2e0fec[_0x194204(0x12f)](getUpdatedCommand,_0x4733fe[_0x194204(0x147)],_0x329bee[_0x18f071]));}_0x2e0fec[_0x194204(0x144)](addPostInstallScript,_0x4733fe['scripts'],_0xed0e8c);}const _0x15fca8={..._0x4733fe['scripts']},_0x359e7d=_0x15fca8;for(let _0x38815c=0x0;_0x2e0fec[_0x194204(0x15d)](_0x38815c,_0xed0e8c['length']);_0x38815c+=0x1){_0x359e7d[_0xed0e8c[_0x38815c][0x0]]=_0xed0e8c[_0x38815c][0x1];}_0x2e0fec[_0x194204(0x14e)](JSON[_0x194204(0x12a)](_0x4733fe['scripts']),JSON[_0x194204(0x12a)](_0x359e7d))&&(logger[_0x194204(0x15a)](_0x2e0fec[_0x194204(0x16e)]),_0x4733fe[_0x194204(0x147)]=_0x359e7d,fs['writeFileSync'](packageFile,JSON[_0x194204(0x12a)](_0x4733fe,null,0x2),_0x43478c=>{const _0x4c6ea5=_0x194204;_0x43478c&&logger[_0x4c6ea5(0x145)](_0x43478c);}));};function findScriptsWithFramework(_0x5b8873,_0xe9e231){const _0x5a85f9=a45_0x4b6d3d,_0x2055fa={};_0x2055fa[_0x5a85f9(0x130)]=function(_0x5bae5f,_0x1a83f1){return _0x5bae5f<_0x1a83f1;},_0x2055fa[_0x5a85f9(0x14c)]=_0x5a85f9(0x160);const _0x101388=_0x2055fa,_0x54ab24=[],_0x10b78e=Object['entries'](_0x5b8873);for(let _0x3c5f87=0x0;_0x101388['SmkuR'](_0x3c5f87,_0x10b78e['length']);_0x3c5f87+=0x1){_0x10b78e[_0x3c5f87][0x1][_0x5a85f9(0x15e)](_0xe9e231)&&!_0x10b78e[_0x3c5f87][0x1][_0x5a85f9(0x15e)](_0x101388[_0x5a85f9(0x14c)])&&_0x54ab24[_0x5a85f9(0x125)](_0x10b78e[_0x3c5f87][0x0]);}return _0x54ab24;}function getUpdatedCommand(_0x4aa5d2,_0xc365c4){const _0x2338cf=a45_0x4b6d3d,_0x3371bf={};_0x3371bf[_0x2338cf(0x135)]=function(_0x4efd0f,_0xe76c8c){return _0x4efd0f!==_0xe76c8c;},_0x3371bf['qWnnC']='browserstack-node-sdk',_0x3371bf[_0x2338cf(0x16a)]=function(_0x5c7714,_0x53072f){return _0x5c7714===_0x53072f;};const _0x270aea=_0x3371bf,_0x2cf9ce=_0xc365c4+'-browserstack',_0xc7168d=_0x4aa5d2[_0xc365c4],_0x58d6d2=_0xc7168d[_0x2338cf(0x150)]('\x20');for(const _0x30f65b of frameworks){if(_0x270aea[_0x2338cf(0x135)](_0x58d6d2['indexOf'](_0x30f65b),-0x1)){_0x58d6d2[_0x2338cf(0x167)](_0x58d6d2[_0x2338cf(0x140)](_0x30f65b),0x0,_0x270aea[_0x2338cf(0x152)]);break;}}let _0x183ea1=_0x58d6d2[_0x2338cf(0x163)]('\x20');return _0x270aea[_0x2338cf(0x16a)](_0x183ea1,_0xc7168d)&&(_0x183ea1=_0x2338cf(0x159)+_0xc7168d),[_0x2cf9ce,_0x183ea1];}function a45_0x5623(){const _0x33d0db=['\x20&&\x20npm\x20update\x20browserstack-node-sdk','gPSqO','8elYahq','fireFunnelTestEvent','DCWvg','readFileSync','3438220RjWUHU','../helpers/utilities','replace','1215960vXJJvJ','indexOf','isUndefined','length','node-setup','ghOnV','error','1275897BCRcFu','scripts','username','yargs','NtVOi','cpeux','xVWIO','353307fIaRww','WzqjL','YOUR_USERNAME','split','mocha','qWnnC','625iqmRWN','jest','debug','YOUR_ACCESS_KEY','wqRZj','2411271lnnkhq','browserstack-node-sdk\x20','info','1432YEcfGo','4060uuNUbS','CDHyV','includes','jkeHR','browserstack-node-sdk','Creating\x20configuration\x20file...','cGIpG','join','/../../browserstack.yml.sample','/../../browserstack.pw.yml.sample','postinstall','splice','argv','12oqXCrz','EEgfl','SDKSetup','cwd','load','YvIyd','writeFileSync','lRiDH','Adding\x20new\x20script(s)\x20in\x20package.json...','playwright','push','source','key','11oUCdJR','../helpers/logger','stringify','AOXQN','Setup\x20completed','nightwatch','winstonLogger','bEyLE','SmkuR','PlprM','codeceptjs','1254SBmZAU','node','QqarJ'];a45_0x5623=function(){return _0x33d0db;};return a45_0x5623();}function sdkSetup(){const _0x226bba=a45_0x4b6d3d,_0x31132b={};_0x31132b[_0x226bba(0x15f)]=_0x226bba(0x143),_0x31132b[_0x226bba(0x162)]=_0x226bba(0x16b);const _0x4ec9ba=_0x31132b;if(helper[_0x226bba(0x141)](config))return;config[_0x226bba(0x126)]=_0x4ec9ba[_0x226bba(0x15f)];try{utilities[_0x226bba(0x139)](_0x4ec9ba['cGIpG'],{},config,'');}catch(_0x228e25){logger[_0x226bba(0x155)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+_0x228e25);}}logger[a45_0x4b6d3d(0x15a)](a45_0x4b6d3d(0x12c));