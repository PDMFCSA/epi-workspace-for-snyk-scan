#!/usr/bin/env node

const a45_0x30bf4a=a45_0x5908;(function(_0x1922dd,_0x35dcf1){const _0x1130b8=a45_0x5908,_0x35f927=_0x1922dd();while(!![]){try{const _0x1046bd=-parseInt(_0x1130b8(0x1e1))/0x1+parseInt(_0x1130b8(0x1c6))/0x2+parseInt(_0x1130b8(0x1b6))/0x3+parseInt(_0x1130b8(0x1a3))/0x4+-parseInt(_0x1130b8(0x1d2))/0x5+-parseInt(_0x1130b8(0x1c7))/0x6*(parseInt(_0x1130b8(0x1b5))/0x7)+parseInt(_0x1130b8(0x1b9))/0x8*(parseInt(_0x1130b8(0x1cf))/0x9);if(_0x1046bd===_0x35dcf1)break;else _0x35f927['push'](_0x35f927['shift']());}catch(_0x4664da){_0x35f927['push'](_0x35f927['shift']());}}}(a45_0x55d8,0x974ac));const fs=require('fs'),helper=require(a45_0x30bf4a(0x1de)),utilities=require('../helpers/utilities'),yaml=require(a45_0x30bf4a(0x1cd)),yargs=require(a45_0x30bf4a(0x1df)),logger=require(a45_0x30bf4a(0x1b1))[a45_0x30bf4a(0x19c)],configFileTemplate=__dirname+a45_0x30bf4a(0x1d8),configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process[a45_0x30bf4a(0x1c8)]()+a45_0x30bf4a(0x1c1),packageFile=process[a45_0x30bf4a(0x1c8)]()+a45_0x30bf4a(0x19e),frameworks=[a45_0x30bf4a(0x1bc),a45_0x30bf4a(0x19b),a45_0x30bf4a(0x1be),a45_0x30bf4a(0x1d9),a45_0x30bf4a(0x19f),'codeceptjs',a45_0x30bf4a(0x1d1)];let config;logger[a45_0x30bf4a(0x1dc)]('Creating\x20configuration\x20file...'),createConfigurationFile(yargs['argv'][a45_0x30bf4a(0x1af)],yargs['argv'][a45_0x30bf4a(0x1b3)],yargs[a45_0x30bf4a(0x1b0)]['playwright']);try{sdkSetup();}catch(a45_0x2bbafd){logger[a45_0x30bf4a(0x19a)](a45_0x30bf4a(0x1a9)+a45_0x2bbafd);}function a45_0x5908(_0x45b8bb,_0x401751){const _0x55d814=a45_0x55d8();return a45_0x5908=function(_0x59082c,_0x49418f){_0x59082c=_0x59082c-0x19a;let _0x299df5=_0x55d814[_0x59082c];return _0x299df5;},a45_0x5908(_0x45b8bb,_0x401751);}function a45_0x55d8(){const _0x4d9de7=['Adding\x20new\x20script(s)\x20in\x20package.json...','mocha','replace','cucumber-js','stringify','ATLZF','/browserstack.yml','Cxiyw','writeFileSync','dNzMi','pVpZG','1020514WEfCvs','24MzjCxf','cwd','scripts','entries','\x20&&\x20npm\x20update\x20browserstack-node-sdk','NQVzT','js-yaml','SMGRt','38025PwdEVW','node-setup','playwright','4820665pMLiwU','iagIZ','fireFunnelTestEvent','wLFcp','MHNjq','XIvHi','/../../browserstack.yml.sample','node','TLHNK','utf8','info','source','../helpers/helper','yargs','browserstack-node-sdk','759948SnHXTl','push','debug','jest','winstonLogger','load','/package.json','nightwatch','UUklH','length','npm\x20update\x20browserstack-node-sdk','1433960JQBQQi','YOUR_ACCESS_KEY','error','Setup\x20completed','gAZoK','readFileSync','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','splice','includes','dzdTN','qzvHp','browserstack-node-sdk\x20','username','argv','../helpers/logger','parse','key','RwVhP','2026276QIAMXf','2106219ckMGEp','WTbXb','indexOf','3656vbvLYV','YbhYO'];a45_0x55d8=function(){return _0x4d9de7;};return a45_0x55d8();}addScriptInPackageJson();function createConfigurationFile(_0x2fd1f1,_0x1bb53d,_0x588ed2=![]){const _0xe47439=a45_0x30bf4a,_0xf7a644={};_0xf7a644['NQVzT']=_0xe47439(0x1db),_0xf7a644[_0xe47439(0x1b4)]='YOUR_USERNAME',_0xf7a644[_0xe47439(0x1d5)]=_0xe47439(0x1a4);const _0x292411=_0xf7a644;try{let _0x42a0ab=fs[_0xe47439(0x1a8)](_0x588ed2?configFileTemplatePW:configFileTemplate,_0x292411[_0xe47439(0x1cc)]);_0x2fd1f1&&(_0x42a0ab=_0x42a0ab[_0xe47439(0x1bd)](_0x292411[_0xe47439(0x1b4)],_0x2fd1f1)),_0x1bb53d&&(_0x42a0ab=_0x42a0ab[_0xe47439(0x1bd)](_0x292411['wLFcp'],_0x1bb53d)),config=yaml[_0xe47439(0x19d)](_0x42a0ab),fs[_0xe47439(0x1c3)](configFile,_0x42a0ab,_0x1687e2=>{const _0x4db97c=_0xe47439;_0x1687e2&&logger[_0x4db97c(0x1a5)](_0x1687e2);});}catch(_0x414b8b){logger[_0xe47439(0x1a5)](_0x414b8b);}}function addPostInstallScript(_0x247300,_0x37176f){const _0x4a5887=a45_0x30bf4a,_0x12b746={};_0x12b746[_0x4a5887(0x1b7)]='postinstall',_0x12b746['dzdTN']=_0x4a5887(0x1a2),_0x12b746[_0x4a5887(0x1c4)]=_0x4a5887(0x1cb);const _0x36366a=_0x12b746;let _0x17cfcf=_0x247300[_0x36366a[_0x4a5887(0x1b7)]];if(_0x17cfcf&&_0x17cfcf['includes'](_0x36366a[_0x4a5887(0x1ac)]))return;!_0x17cfcf?_0x17cfcf=_0x36366a['dzdTN']:_0x17cfcf+=_0x36366a[_0x4a5887(0x1c4)],_0x37176f['push']([_0x36366a[_0x4a5887(0x1b7)],_0x17cfcf]);}function addScriptInPackageJson(){const _0x480606=a45_0x30bf4a,_0x3c53d0={'SMGRt':'utf8','iagIZ':function(_0x5bf7bf,_0x3b07c4){return _0x5bf7bf<_0x3b07c4;},'aycRF':function(_0x21e5c8,_0x164917,_0x395783){return _0x21e5c8(_0x164917,_0x395783);},'Cxiyw':function(_0x280d78,_0x37931b,_0x49d642){return _0x280d78(_0x37931b,_0x49d642);},'XIvHi':function(_0x116981,_0x228f10,_0x5a5ae2){return _0x116981(_0x228f10,_0x5a5ae2);},'qzvHp':function(_0x209e7b,_0x50c6df){return _0x209e7b!==_0x50c6df;},'MHNjq':_0x480606(0x1bb)},_0x1769f0=JSON[_0x480606(0x1b2)](fs[_0x480606(0x1a8)](packageFile,_0x3c53d0[_0x480606(0x1ce)])),_0x43e61d=[];for(let _0x3521ac=0x0;_0x3c53d0[_0x480606(0x1d3)](_0x3521ac,frameworks[_0x480606(0x1a1)]);_0x3521ac+=0x1){const _0x43577c=_0x3c53d0['aycRF'](findScriptsWithFramework,_0x1769f0[_0x480606(0x1c9)],frameworks[_0x3521ac]);for(let _0x503ba4=0x0;_0x3c53d0[_0x480606(0x1d3)](_0x503ba4,_0x43577c[_0x480606(0x1a1)]);_0x503ba4+=0x1){_0x43e61d[_0x480606(0x1e2)](_0x3c53d0[_0x480606(0x1c2)](getUpdatedCommand,_0x1769f0[_0x480606(0x1c9)],_0x43577c[_0x503ba4]));}_0x3c53d0[_0x480606(0x1d7)](addPostInstallScript,_0x1769f0['scripts'],_0x43e61d);}const _0x15de77={..._0x1769f0['scripts']},_0x4cc838=_0x15de77;for(let _0x50f85f=0x0;_0x3c53d0[_0x480606(0x1d3)](_0x50f85f,_0x43e61d[_0x480606(0x1a1)]);_0x50f85f+=0x1){_0x4cc838[_0x43e61d[_0x50f85f][0x0]]=_0x43e61d[_0x50f85f][0x1];}_0x3c53d0[_0x480606(0x1ad)](JSON[_0x480606(0x1bf)](_0x1769f0[_0x480606(0x1c9)]),JSON['stringify'](_0x4cc838))&&(logger[_0x480606(0x1dc)](_0x3c53d0[_0x480606(0x1d6)]),_0x1769f0[_0x480606(0x1c9)]=_0x4cc838,fs['writeFileSync'](packageFile,JSON[_0x480606(0x1bf)](_0x1769f0,null,0x2),_0x2fe377=>{_0x2fe377&&logger['error'](_0x2fe377);}));};function findScriptsWithFramework(_0x2e52af,_0x1bffa8){const _0x384d48=a45_0x30bf4a,_0x154e7b={};_0x154e7b['aQBUn']=function(_0x2490fa,_0x27ac50){return _0x2490fa<_0x27ac50;},_0x154e7b[_0x384d48(0x1ba)]=_0x384d48(0x1e0);const _0x10b971=_0x154e7b,_0x2a7aed=[],_0x2b2e07=Object[_0x384d48(0x1ca)](_0x2e52af);for(let _0x445b4e=0x0;_0x10b971['aQBUn'](_0x445b4e,_0x2b2e07[_0x384d48(0x1a1)]);_0x445b4e+=0x1){_0x2b2e07[_0x445b4e][0x1][_0x384d48(0x1ab)](_0x1bffa8)&&!_0x2b2e07[_0x445b4e][0x1][_0x384d48(0x1ab)](_0x10b971['YbhYO'])&&_0x2a7aed[_0x384d48(0x1e2)](_0x2b2e07[_0x445b4e][0x0]);}return _0x2a7aed;}function getUpdatedCommand(_0x11a109,_0x518bba){const _0x49a511=a45_0x30bf4a,_0x1c880b={};_0x1c880b[_0x49a511(0x1da)]=function(_0x5b2770,_0x1b7896){return _0x5b2770!==_0x1b7896;},_0x1c880b[_0x49a511(0x1a0)]=_0x49a511(0x1e0),_0x1c880b[_0x49a511(0x1c0)]=function(_0x15de5d,_0x2df896){return _0x15de5d===_0x2df896;};const _0x5149d5=_0x1c880b,_0x26370e=_0x518bba+'-browserstack',_0x4617ba=_0x11a109[_0x518bba],_0x12662c=_0x4617ba['split']('\x20');for(const _0x188a31 of frameworks){if(_0x5149d5['TLHNK'](_0x12662c[_0x49a511(0x1b8)](_0x188a31),-0x1)){_0x12662c[_0x49a511(0x1aa)](_0x12662c[_0x49a511(0x1b8)](_0x188a31),0x0,_0x5149d5[_0x49a511(0x1a0)]);break;}}let _0x1eb9c6=_0x12662c['join']('\x20');return _0x5149d5[_0x49a511(0x1c0)](_0x1eb9c6,_0x4617ba)&&(_0x1eb9c6=_0x49a511(0x1ae)+_0x4617ba),[_0x26370e,_0x1eb9c6];}function sdkSetup(){const _0x47ebe6=a45_0x30bf4a,_0x4d3901={};_0x4d3901[_0x47ebe6(0x1a7)]=_0x47ebe6(0x1d0),_0x4d3901[_0x47ebe6(0x1c5)]='SDKSetup';const _0x400089=_0x4d3901;if(helper['isUndefined'](config))return;config[_0x47ebe6(0x1dd)]=_0x400089[_0x47ebe6(0x1a7)];try{utilities[_0x47ebe6(0x1d4)](_0x400089[_0x47ebe6(0x1c5)],{},config,'');}catch(_0x20dbb1){logger[_0x47ebe6(0x19a)](_0x47ebe6(0x1a9)+_0x20dbb1);}}logger[a45_0x30bf4a(0x1dc)](a45_0x30bf4a(0x1a6));