#!/usr/bin/env node

const a45_0x413702=a45_0x3edc;(function(_0x515b05,_0x467ee4){const _0x3403c6=a45_0x3edc,_0x3bb26a=_0x515b05();while(!![]){try{const _0x5487bf=-parseInt(_0x3403c6(0xb2))/0x1+parseInt(_0x3403c6(0x85))/0x2+-parseInt(_0x3403c6(0x9d))/0x3+-parseInt(_0x3403c6(0xb5))/0x4*(parseInt(_0x3403c6(0x82))/0x5)+-parseInt(_0x3403c6(0xaa))/0x6*(-parseInt(_0x3403c6(0xa4))/0x7)+-parseInt(_0x3403c6(0xae))/0x8+parseInt(_0x3403c6(0x7c))/0x9;if(_0x5487bf===_0x467ee4)break;else _0x3bb26a['push'](_0x3bb26a['shift']());}catch(_0x1c166f){_0x3bb26a['push'](_0x3bb26a['shift']());}}}(a45_0x2bf9,0x660f4));const fs=require('fs'),helper=require(a45_0x413702(0xad)),utilities=require(a45_0x413702(0x9f)),yaml=require(a45_0x413702(0xbe)),yargs=require(a45_0x413702(0x97)),logger=require(a45_0x413702(0x9c))[a45_0x413702(0x9a)],configFileTemplate=__dirname+a45_0x413702(0x86),configFileTemplatePW=__dirname+a45_0x413702(0x92),configFile=process[a45_0x413702(0xa1)]()+'/browserstack.yml',packageFile=process[a45_0x413702(0xa1)]()+a45_0x413702(0xb4),frameworks=['mocha',a45_0x413702(0x96),a45_0x413702(0x91),'node',a45_0x413702(0x7b),a45_0x413702(0xba),'playwright'];let config;logger[a45_0x413702(0xc2)](a45_0x413702(0xa3)),createConfigurationFile(yargs[a45_0x413702(0xa7)]['username'],yargs[a45_0x413702(0xa7)][a45_0x413702(0xb8)],yargs[a45_0x413702(0xa7)][a45_0x413702(0x87)]);try{sdkSetup();}catch(a45_0x15fdc5){logger[a45_0x413702(0xbb)](a45_0x413702(0xac)+a45_0x15fdc5);}function a45_0x3edc(_0x552ecf,_0x199613){const _0x2bf953=a45_0x2bf9();return a45_0x3edc=function(_0x3edcd8,_0x50e963){_0x3edcd8=_0x3edcd8-0x78;let _0x13dd97=_0x2bf953[_0x3edcd8];return _0x13dd97;},a45_0x3edc(_0x552ecf,_0x199613);}addScriptInPackageJson();function createConfigurationFile(_0x3607ee,_0xe0247b,_0x11e389=![]){const _0x2149d1=a45_0x413702,_0x4d0822={};_0x4d0822['AtwTp']=_0x2149d1(0x90),_0x4d0822[_0x2149d1(0x81)]='YOUR_USERNAME',_0x4d0822[_0x2149d1(0xa9)]=_0x2149d1(0x80);const _0x2bb1d4=_0x4d0822;try{let _0x1a673f=fs['readFileSync'](_0x11e389?configFileTemplatePW:configFileTemplate,_0x2bb1d4[_0x2149d1(0xc0)]);_0x3607ee&&(_0x1a673f=_0x1a673f[_0x2149d1(0x99)](_0x2bb1d4[_0x2149d1(0x81)],_0x3607ee)),_0xe0247b&&(_0x1a673f=_0x1a673f[_0x2149d1(0x99)](_0x2bb1d4[_0x2149d1(0xa9)],_0xe0247b)),config=yaml['load'](_0x1a673f),fs[_0x2149d1(0xb0)](configFile,_0x1a673f,_0x57c890=>{const _0x5f45f2=_0x2149d1;_0x57c890&&logger[_0x5f45f2(0x9b)](_0x57c890);});}catch(_0x19b928){logger[_0x2149d1(0x9b)](_0x19b928);}}function addPostInstallScript(_0x90c00,_0x3df0cb){const _0x20934e=a45_0x413702,_0x3d56b7={};_0x3d56b7[_0x20934e(0xb6)]=_0x20934e(0xb1),_0x3d56b7[_0x20934e(0x78)]=_0x20934e(0x95),_0x3d56b7[_0x20934e(0x94)]=_0x20934e(0xaf);const _0x1799e7=_0x3d56b7;let _0x4f0f61=_0x90c00[_0x1799e7['wGuMQ']];if(_0x4f0f61&&_0x4f0f61['includes'](_0x1799e7[_0x20934e(0x78)]))return;!_0x4f0f61?_0x4f0f61=_0x1799e7[_0x20934e(0x78)]:_0x4f0f61+=_0x1799e7[_0x20934e(0x94)],_0x3df0cb[_0x20934e(0x7e)]([_0x1799e7[_0x20934e(0xb6)],_0x4f0f61]);}function addScriptInPackageJson(){const _0x5911ed=a45_0x413702,_0x1d61a4={'iGPbo':_0x5911ed(0x90),'oGibK':function(_0x1e4e08,_0x1b6c82){return _0x1e4e08<_0x1b6c82;},'uShsY':function(_0x7fd5a2,_0xddc644,_0x5678de){return _0x7fd5a2(_0xddc644,_0x5678de);},'UialT':function(_0x4db664,_0x89dde1){return _0x4db664<_0x89dde1;},'NsQyo':function(_0x5bfe78,_0x30d36b){return _0x5bfe78<_0x30d36b;},'JjNRJ':function(_0x29f6e0,_0x2f14ba){return _0x29f6e0!==_0x2f14ba;},'ofgyi':_0x5911ed(0x8d)},_0x54be36=JSON[_0x5911ed(0x8f)](fs[_0x5911ed(0x98)](packageFile,_0x1d61a4[_0x5911ed(0x7d)])),_0x22d06a=[];for(let _0x52761d=0x0;_0x1d61a4[_0x5911ed(0xbf)](_0x52761d,frameworks[_0x5911ed(0x8e)]);_0x52761d+=0x1){const _0x7f4395=_0x1d61a4[_0x5911ed(0xbc)](findScriptsWithFramework,_0x54be36[_0x5911ed(0x8c)],frameworks[_0x52761d]);for(let _0x2a04ca=0x0;_0x1d61a4[_0x5911ed(0x83)](_0x2a04ca,_0x7f4395[_0x5911ed(0x8e)]);_0x2a04ca+=0x1){_0x22d06a[_0x5911ed(0x7e)](_0x1d61a4['uShsY'](getUpdatedCommand,_0x54be36[_0x5911ed(0x8c)],_0x7f4395[_0x2a04ca]));}_0x1d61a4[_0x5911ed(0xbc)](addPostInstallScript,_0x54be36[_0x5911ed(0x8c)],_0x22d06a);}const _0x4e0bb2={..._0x54be36[_0x5911ed(0x8c)]},_0x7fd01=_0x4e0bb2;for(let _0x34d241=0x0;_0x1d61a4['NsQyo'](_0x34d241,_0x22d06a[_0x5911ed(0x8e)]);_0x34d241+=0x1){_0x7fd01[_0x22d06a[_0x34d241][0x0]]=_0x22d06a[_0x34d241][0x1];}_0x1d61a4[_0x5911ed(0x84)](JSON[_0x5911ed(0xa0)](_0x54be36['scripts']),JSON[_0x5911ed(0xa0)](_0x7fd01))&&(logger[_0x5911ed(0xc2)](_0x1d61a4[_0x5911ed(0xb3)]),_0x54be36[_0x5911ed(0x8c)]=_0x7fd01,fs[_0x5911ed(0xb0)](packageFile,JSON[_0x5911ed(0xa0)](_0x54be36,null,0x2),_0x5f0dc9=>{const _0x5c6874=_0x5911ed;_0x5f0dc9&&logger[_0x5c6874(0x9b)](_0x5f0dc9);}));};function findScriptsWithFramework(_0x3cba10,_0x3f74c3){const _0x3c0f11=a45_0x413702,_0x3fb83d={};_0x3fb83d[_0x3c0f11(0x7f)]=function(_0x4c3a8f,_0x1e29d1){return _0x4c3a8f<_0x1e29d1;},_0x3fb83d[_0x3c0f11(0xa5)]=_0x3c0f11(0xc1);const _0x1fba38=_0x3fb83d,_0x499d77=[],_0xf884c7=Object['entries'](_0x3cba10);for(let _0x2a3e44=0x0;_0x1fba38['kUSMb'](_0x2a3e44,_0xf884c7['length']);_0x2a3e44+=0x1){_0xf884c7[_0x2a3e44][0x1][_0x3c0f11(0x9e)](_0x3f74c3)&&!_0xf884c7[_0x2a3e44][0x1][_0x3c0f11(0x9e)](_0x1fba38[_0x3c0f11(0xa5)])&&_0x499d77['push'](_0xf884c7[_0x2a3e44][0x0]);}return _0x499d77;}function getUpdatedCommand(_0x154643,_0x243cba){const _0x4b6538=a45_0x413702,_0x3c26c4={};_0x3c26c4[_0x4b6538(0x8b)]=function(_0x321aec,_0x2b5ee6){return _0x321aec!==_0x2b5ee6;},_0x3c26c4[_0x4b6538(0x93)]=_0x4b6538(0xc1),_0x3c26c4[_0x4b6538(0x8a)]=function(_0x3f7f41,_0x576233){return _0x3f7f41===_0x576233;};const _0x3eb627=_0x3c26c4,_0x2da39f=_0x243cba+_0x4b6538(0x79),_0x38b7ed=_0x154643[_0x243cba],_0x4070b1=_0x38b7ed[_0x4b6538(0xa6)]('\x20');for(const _0x33075d of frameworks){if(_0x3eb627[_0x4b6538(0x8b)](_0x4070b1[_0x4b6538(0xb9)](_0x33075d),-0x1)){_0x4070b1[_0x4b6538(0x7a)](_0x4070b1[_0x4b6538(0xb9)](_0x33075d),0x0,_0x3eb627[_0x4b6538(0x93)]);break;}}let _0x55af0e=_0x4070b1[_0x4b6538(0xbd)]('\x20');return _0x3eb627[_0x4b6538(0x8a)](_0x55af0e,_0x38b7ed)&&(_0x55af0e=_0x4b6538(0x89)+_0x38b7ed),[_0x2da39f,_0x55af0e];}function a45_0x2bf9(){const _0x45892f=['/../../browserstack.yml.sample','playwright','node-setup','browserstack-node-sdk\x20','iuvDl','DARKr','scripts','Adding\x20new\x20script(s)\x20in\x20package.json...','length','parse','utf8','cucumber-js','/../../browserstack.pw.yml.sample','Hadfx','WeUAY','npm\x20update\x20browserstack-node-sdk','jest','yargs','readFileSync','replace','winstonLogger','error','../helpers/logger','1761234uqnoJn','includes','../helpers/utilities','stringify','cwd','Setup\x20completed','Creating\x20configuration\x20file...','1122219rDwmjT','XXuQJ','split','argv','source','hzVTQ','18PJtCJN','WiKMD','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','../helpers/helper','4549816aqkPkP','\x20&&\x20npm\x20update\x20browserstack-node-sdk','writeFileSync','postinstall','287572bHBnSZ','ofgyi','/package.json','1255832sManVS','wGuMQ','isUndefined','key','indexOf','codeceptjs','debug','uShsY','join','js-yaml','oGibK','AtwTp','browserstack-node-sdk','info','OgtiV','-browserstack','splice','nightwatch','15574383MmrQJq','iGPbo','push','kUSMb','YOUR_ACCESS_KEY','WtBCK','10KuQiBY','UialT','JjNRJ','555782BnzwjW'];a45_0x2bf9=function(){return _0x45892f;};return a45_0x2bf9();}function sdkSetup(){const _0x4ae28e=a45_0x413702,_0x5394b6={};_0x5394b6['sPFSa']=_0x4ae28e(0x88),_0x5394b6[_0x4ae28e(0xab)]='SDKSetup';const _0x14c6e4=_0x5394b6;if(helper[_0x4ae28e(0xb7)](config))return;config[_0x4ae28e(0xa8)]=_0x14c6e4['sPFSa'];try{utilities['fireFunnelTestEvent'](_0x14c6e4[_0x4ae28e(0xab)],{},config,'');}catch(_0x27c849){logger[_0x4ae28e(0xbb)](_0x4ae28e(0xac)+_0x27c849);}}logger[a45_0x413702(0xc2)](a45_0x413702(0xa2));