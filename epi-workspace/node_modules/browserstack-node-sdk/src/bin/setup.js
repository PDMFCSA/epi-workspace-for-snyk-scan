#!/usr/bin/env node

const a49_0x34bb9a=a49_0x470d;(function(_0x5a043b,_0x493e87){const _0x2198fd=a49_0x470d,_0x53d58f=_0x5a043b();while(!![]){try{const _0x4e1368=parseInt(_0x2198fd(0x18a))/0x1*(parseInt(_0x2198fd(0x189))/0x2)+parseInt(_0x2198fd(0x186))/0x3+parseInt(_0x2198fd(0x18c))/0x4+parseInt(_0x2198fd(0x17c))/0x5*(parseInt(_0x2198fd(0x170))/0x6)+parseInt(_0x2198fd(0x1ad))/0x7*(parseInt(_0x2198fd(0x195))/0x8)+parseInt(_0x2198fd(0x177))/0x9+-parseInt(_0x2198fd(0x1ae))/0xa;if(_0x4e1368===_0x493e87)break;else _0x53d58f['push'](_0x53d58f['shift']());}catch(_0x2a6ff3){_0x53d58f['push'](_0x53d58f['shift']());}}}(a49_0x272d,0x36a86));function a49_0x470d(_0x257759,_0x218246){const _0x272d08=a49_0x272d();return a49_0x470d=function(_0x470d81,_0x2e17a0){_0x470d81=_0x470d81-0x16a;let _0xe7272b=_0x272d08[_0x470d81];return _0xe7272b;},a49_0x470d(_0x257759,_0x218246);}const fs=require('fs'),helper=require('../helpers/helper'),utilities=require(a49_0x34bb9a(0x17a)),yaml=require(a49_0x34bb9a(0x174)),yargs=require(a49_0x34bb9a(0x17b)),logger=require(a49_0x34bb9a(0x185))[a49_0x34bb9a(0x181)],configFileTemplate=__dirname+a49_0x34bb9a(0x18b),configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process[a49_0x34bb9a(0x1a4)]()+a49_0x34bb9a(0x18f),packageFile=process['cwd']()+a49_0x34bb9a(0x192),frameworks=[a49_0x34bb9a(0x188),a49_0x34bb9a(0x176),'cucumber-js',a49_0x34bb9a(0x1ab),a49_0x34bb9a(0x1a3),a49_0x34bb9a(0x1b4),a49_0x34bb9a(0x182)];let config;logger[a49_0x34bb9a(0x1a1)]('Creating\x20configuration\x20file...'),createConfigurationFile(yargs['argv'][a49_0x34bb9a(0x1aa)],yargs['argv']['key'],yargs['argv'][a49_0x34bb9a(0x182)]);function a49_0x272d(){const _0x4e15dc=['../helpers/logger','78084wOmMKm','Setup\x20completed','mocha','2TaocXE','12067kUnWhB','/../../browserstack.yml.sample','1375380qCjBxK','msUqM','postinstall','/browserstack.yml','error','XhIxd','/package.json','split','rmgBL','663368OWHApB','indexOf','entries','tUxMk','eBxZx','browserstack-node-sdk\x20','bDUcv','fjXmU','stringify','writeFileSync','load','browserstack-node-sdk','info','join','nightwatch','cwd','YOUR_ACCESS_KEY','exkSz','FHkAO','Adding\x20new\x20script(s)\x20in\x20package.json...','includes','username','node','source','7TKzNDY','8253370YRMYiT','utf8','length','ihmgl','push','rCcKt','codeceptjs','parse','vYKAi','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','debug','node-setup','replace','splice','tYkVA','841422yeiPOu','\x20&&\x20npm\x20update\x20browserstack-node-sdk','YOUR_USERNAME','npm\x20update\x20browserstack-node-sdk','js-yaml','AMbIB','jest','3997053ScChfL','SQOGr','GNPEw','../helpers/utilities','yargs','5MJFERY','wtSiB','MtVdH','scripts','isUndefined','winstonLogger','playwright','readFileSync','SDKSetup'];a49_0x272d=function(){return _0x4e15dc;};return a49_0x272d();}try{sdkSetup();}catch(a49_0x3d736d){logger[a49_0x34bb9a(0x16b)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a49_0x3d736d);}addScriptInPackageJson();function createConfigurationFile(_0x5b877f,_0x4cf015,_0x5ea309=![]){const _0x5d9b24=a49_0x34bb9a,_0x3be0ec={};_0x3be0ec['FHkAO']=_0x5d9b24(0x1af),_0x3be0ec[_0x5d9b24(0x19b)]=_0x5d9b24(0x172),_0x3be0ec[_0x5d9b24(0x1b3)]=_0x5d9b24(0x1a5);const _0x19dd0a=_0x3be0ec;try{let _0xda313f=fs[_0x5d9b24(0x183)](_0x5ea309?configFileTemplatePW:configFileTemplate,_0x19dd0a[_0x5d9b24(0x1a7)]);_0x5b877f&&(_0xda313f=_0xda313f[_0x5d9b24(0x16d)](_0x19dd0a[_0x5d9b24(0x19b)],_0x5b877f)),_0x4cf015&&(_0xda313f=_0xda313f[_0x5d9b24(0x16d)](_0x19dd0a['rCcKt'],_0x4cf015)),config=yaml[_0x5d9b24(0x19f)](_0xda313f),fs[_0x5d9b24(0x19e)](configFile,_0xda313f,_0x4bccbb=>{_0x4bccbb&&logger['error'](_0x4bccbb);});}catch(_0x59ca5b){logger['error'](_0x59ca5b);}}function addPostInstallScript(_0x155567,_0x43ca71){const _0x19e8cf=a49_0x34bb9a,_0x5d3ed0={};_0x5d3ed0[_0x19e8cf(0x17e)]=_0x19e8cf(0x18e),_0x5d3ed0[_0x19e8cf(0x191)]=_0x19e8cf(0x173),_0x5d3ed0[_0x19e8cf(0x18d)]=_0x19e8cf(0x171);const _0x4b1b24=_0x5d3ed0;let _0x26c5ac=_0x155567[_0x4b1b24[_0x19e8cf(0x17e)]];if(_0x26c5ac&&_0x26c5ac[_0x19e8cf(0x1a9)](_0x4b1b24[_0x19e8cf(0x191)]))return;!_0x26c5ac?_0x26c5ac=_0x4b1b24['XhIxd']:_0x26c5ac+=_0x4b1b24[_0x19e8cf(0x18d)],_0x43ca71['push']([_0x4b1b24['MtVdH'],_0x26c5ac]);}function addScriptInPackageJson(){const _0x49c08a=a49_0x34bb9a,_0x43eb8a={'AMbIB':_0x49c08a(0x1af),'GNPEw':function(_0x2f04a1,_0x192b43){return _0x2f04a1<_0x192b43;},'ihmgl':function(_0x5e5173,_0x13ceb8,_0x5082c5){return _0x5e5173(_0x13ceb8,_0x5082c5);},'tYkVA':function(_0x479c62,_0x5403ce,_0x37078e){return _0x479c62(_0x5403ce,_0x37078e);},'TnlnB':function(_0x146318,_0x7048c5){return _0x146318<_0x7048c5;},'exkSz':function(_0x3b876a,_0x2d84fb){return _0x3b876a!==_0x2d84fb;},'UOmXA':_0x49c08a(0x1a8)},_0x3d121b=JSON[_0x49c08a(0x1b5)](fs['readFileSync'](packageFile,_0x43eb8a[_0x49c08a(0x175)])),_0xd59c71=[];for(let _0x5a3f0f=0x0;_0x43eb8a[_0x49c08a(0x179)](_0x5a3f0f,frameworks['length']);_0x5a3f0f+=0x1){const _0x2382ce=_0x43eb8a[_0x49c08a(0x1b1)](findScriptsWithFramework,_0x3d121b[_0x49c08a(0x17f)],frameworks[_0x5a3f0f]);for(let _0x401184=0x0;_0x43eb8a['GNPEw'](_0x401184,_0x2382ce[_0x49c08a(0x1b0)]);_0x401184+=0x1){_0xd59c71[_0x49c08a(0x1b2)](_0x43eb8a[_0x49c08a(0x16f)](getUpdatedCommand,_0x3d121b[_0x49c08a(0x17f)],_0x2382ce[_0x401184]));}_0x43eb8a[_0x49c08a(0x1b1)](addPostInstallScript,_0x3d121b[_0x49c08a(0x17f)],_0xd59c71);}const _0x2532c1={..._0x3d121b[_0x49c08a(0x17f)]},_0x5a89c7=_0x2532c1;for(let _0x20c332=0x0;_0x43eb8a['TnlnB'](_0x20c332,_0xd59c71[_0x49c08a(0x1b0)]);_0x20c332+=0x1){_0x5a89c7[_0xd59c71[_0x20c332][0x0]]=_0xd59c71[_0x20c332][0x1];}_0x43eb8a[_0x49c08a(0x1a6)](JSON[_0x49c08a(0x19d)](_0x3d121b[_0x49c08a(0x17f)]),JSON[_0x49c08a(0x19d)](_0x5a89c7))&&(logger[_0x49c08a(0x1a1)](_0x43eb8a['UOmXA']),_0x3d121b[_0x49c08a(0x17f)]=_0x5a89c7,fs[_0x49c08a(0x19e)](packageFile,JSON[_0x49c08a(0x19d)](_0x3d121b,null,0x2),_0x497b3c=>{const _0x57538d=_0x49c08a;_0x497b3c&&logger[_0x57538d(0x190)](_0x497b3c);}));};function findScriptsWithFramework(_0x3f033e,_0xf4de7b){const _0x1bd9f7=a49_0x34bb9a,_0x446ec2={};_0x446ec2['eBxZx']=function(_0x4d1792,_0xc4a6a9){return _0x4d1792<_0xc4a6a9;},_0x446ec2[_0x1bd9f7(0x1b6)]='browserstack-node-sdk';const _0x5a1ac6=_0x446ec2,_0x1e73e9=[],_0xf2b2a=Object[_0x1bd9f7(0x197)](_0x3f033e);for(let _0x108ec3=0x0;_0x5a1ac6[_0x1bd9f7(0x199)](_0x108ec3,_0xf2b2a[_0x1bd9f7(0x1b0)]);_0x108ec3+=0x1){_0xf2b2a[_0x108ec3][0x1]['includes'](_0xf4de7b)&&!_0xf2b2a[_0x108ec3][0x1]['includes'](_0x5a1ac6[_0x1bd9f7(0x1b6)])&&_0x1e73e9[_0x1bd9f7(0x1b2)](_0xf2b2a[_0x108ec3][0x0]);}return _0x1e73e9;}function getUpdatedCommand(_0xb71fbb,_0x3c9e3c){const _0x4b24bb=a49_0x34bb9a,_0x3d25fc={};_0x3d25fc[_0x4b24bb(0x194)]=function(_0xf6367,_0x228b94){return _0xf6367!==_0x228b94;},_0x3d25fc[_0x4b24bb(0x19c)]=_0x4b24bb(0x1a0),_0x3d25fc[_0x4b24bb(0x178)]=function(_0x256c77,_0x293273){return _0x256c77===_0x293273;};const _0x4d23c6=_0x3d25fc,_0x508ef1=_0x3c9e3c+'-browserstack',_0x3a2eb0=_0xb71fbb[_0x3c9e3c],_0x43a447=_0x3a2eb0[_0x4b24bb(0x193)]('\x20');for(const _0x3f287b of frameworks){if(_0x4d23c6[_0x4b24bb(0x194)](_0x43a447[_0x4b24bb(0x196)](_0x3f287b),-0x1)){_0x43a447[_0x4b24bb(0x16e)](_0x43a447['indexOf'](_0x3f287b),0x0,_0x4d23c6[_0x4b24bb(0x19c)]);break;}}let _0x1814b1=_0x43a447[_0x4b24bb(0x1a2)]('\x20');return _0x4d23c6[_0x4b24bb(0x178)](_0x1814b1,_0x3a2eb0)&&(_0x1814b1=_0x4b24bb(0x19a)+_0x3a2eb0),[_0x508ef1,_0x1814b1];}function sdkSetup(){const _0xb30592=a49_0x34bb9a,_0x21c4bd={};_0x21c4bd[_0xb30592(0x198)]=_0xb30592(0x16c),_0x21c4bd[_0xb30592(0x17d)]=_0xb30592(0x184);const _0x2749e9=_0x21c4bd;if(helper[_0xb30592(0x180)](config))return;config[_0xb30592(0x1ac)]=_0x2749e9[_0xb30592(0x198)];try{utilities['fireFunnelTestEvent'](_0x2749e9[_0xb30592(0x17d)],{},config,'');}catch(_0x54726c){logger[_0xb30592(0x16b)](_0xb30592(0x16a)+_0x54726c);}}logger['info'](a49_0x34bb9a(0x187));