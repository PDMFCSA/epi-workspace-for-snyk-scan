#!/usr/bin/env node

const a50_0x230aa6=a50_0x45fe;(function(_0x4a7174,_0x1ab0cf){const _0x156c4a=a50_0x45fe,_0x3c4435=_0x4a7174();while(!![]){try{const _0x147c74=-parseInt(_0x156c4a(0xe5))/0x1*(parseInt(_0x156c4a(0xbd))/0x2)+parseInt(_0x156c4a(0xec))/0x3*(parseInt(_0x156c4a(0xba))/0x4)+-parseInt(_0x156c4a(0xe0))/0x5*(parseInt(_0x156c4a(0xc3))/0x6)+parseInt(_0x156c4a(0xe4))/0x7*(-parseInt(_0x156c4a(0xfc))/0x8)+parseInt(_0x156c4a(0xdc))/0x9+parseInt(_0x156c4a(0xc7))/0xa*(parseInt(_0x156c4a(0xd5))/0xb)+parseInt(_0x156c4a(0xc2))/0xc;if(_0x147c74===_0x1ab0cf)break;else _0x3c4435['push'](_0x3c4435['shift']());}catch(_0x3df85a){_0x3c4435['push'](_0x3c4435['shift']());}}}(a50_0x1a0d,0x6bc5e));const fs=require('fs'),helper=require(a50_0x230aa6(0xdd)),utilities=require(a50_0x230aa6(0xda)),yaml=require(a50_0x230aa6(0xcc)),yargs=require(a50_0x230aa6(0xd7)),logger=require(a50_0x230aa6(0xc8))[a50_0x230aa6(0xdf)],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process['cwd']()+a50_0x230aa6(0xc6),packageFile=process[a50_0x230aa6(0xe9)]()+'/package.json',frameworks=[a50_0x230aa6(0xf5),a50_0x230aa6(0x102),a50_0x230aa6(0xde),a50_0x230aa6(0xee),a50_0x230aa6(0xbe),a50_0x230aa6(0xc0),'playwright'];let config;function a50_0x45fe(_0x3e3f3a,_0x34e400){const _0x1a0d5f=a50_0x1a0d();return a50_0x45fe=function(_0x45fe5c,_0x2d7ce4){_0x45fe5c=_0x45fe5c-0xb8;let _0x303b12=_0x1a0d5f[_0x45fe5c];return _0x303b12;},a50_0x45fe(_0x3e3f3a,_0x34e400);}logger[a50_0x230aa6(0xd2)](a50_0x230aa6(0xce)),createConfigurationFile(yargs[a50_0x230aa6(0xc9)][a50_0x230aa6(0xf4)],yargs[a50_0x230aa6(0xc9)][a50_0x230aa6(0xb8)],yargs['argv']['playwright']);try{sdkSetup();}catch(a50_0xa78035){logger['debug'](a50_0x230aa6(0xc4)+a50_0xa78035);}addScriptInPackageJson();function a50_0x1a0d(){const _0x2cfed2=['45eSiVvH','JahSt','source','Adding\x20new\x20script(s)\x20in\x20package.json...','1652HBSLqL','2678yxnBgK','SwCWI','CDdHv','browserstack-node-sdk\x20','cwd','UxrNY','splice','3LsoKLk','browserstack-node-sdk','node','eVgku','debug','stringify','XCddY','fireFunnelTestEvent','username','mocha','readFileSync','entries','\x20&&\x20npm\x20update\x20browserstack-node-sdk','qREVv','writeFileSync','isUndefined','10616VuTQPT','WmGby','node-setup','indexOf','includes','split','jest','key','utf8','986756hIXTAd','scripts','HRLco','612Goqtsu','nightwatch','postinstall','codeceptjs','yqcdO','10284504XCygfL','391806iUWYfj','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','length','/browserstack.yml','10WZwbPH','../helpers/logger','argv','error','YOUR_ACCESS_KEY','js-yaml','uimVK','Creating\x20configuration\x20file...','push','join','OcRJW','info','load','jTjcf','4729087PjZwWV','qgmQS','yargs','ifnOu','parse','../helpers/utilities','replace','5653251gshTwh','../helpers/helper','cucumber-js','winstonLogger'];a50_0x1a0d=function(){return _0x2cfed2;};return a50_0x1a0d();}function createConfigurationFile(_0x365797,_0xca03ce,_0x11cf7e=![]){const _0x124aae=a50_0x230aa6,_0x577ea8={};_0x577ea8['OYLfQ']=_0x124aae(0xb9),_0x577ea8[_0x124aae(0xc1)]='YOUR_USERNAME',_0x577ea8[_0x124aae(0xe6)]=_0x124aae(0xcb);const _0x1b87ac=_0x577ea8;try{let _0x10b4b7=fs[_0x124aae(0xf6)](_0x11cf7e?configFileTemplatePW:configFileTemplate,_0x1b87ac['OYLfQ']);_0x365797&&(_0x10b4b7=_0x10b4b7[_0x124aae(0xdb)](_0x1b87ac['yqcdO'],_0x365797)),_0xca03ce&&(_0x10b4b7=_0x10b4b7[_0x124aae(0xdb)](_0x1b87ac['SwCWI'],_0xca03ce)),config=yaml[_0x124aae(0xd3)](_0x10b4b7),fs[_0x124aae(0xfa)](configFile,_0x10b4b7,_0x1bd112=>{_0x1bd112&&logger['error'](_0x1bd112);});}catch(_0x5b969f){logger[_0x124aae(0xca)](_0x5b969f);}}function addPostInstallScript(_0x44837d,_0x53478a){const _0x4a88ba=a50_0x230aa6,_0x5b3c52={};_0x5b3c52[_0x4a88ba(0xe1)]=_0x4a88ba(0xbf),_0x5b3c52['qgmQS']='npm\x20update\x20browserstack-node-sdk',_0x5b3c52[_0x4a88ba(0xd4)]=_0x4a88ba(0xf8);const _0x571294=_0x5b3c52;let _0x3fffdf=_0x44837d[_0x571294[_0x4a88ba(0xe1)]];if(_0x3fffdf&&_0x3fffdf[_0x4a88ba(0x100)](_0x571294['qgmQS']))return;!_0x3fffdf?_0x3fffdf=_0x571294[_0x4a88ba(0xd6)]:_0x3fffdf+=_0x571294[_0x4a88ba(0xd4)],_0x53478a[_0x4a88ba(0xcf)]([_0x571294[_0x4a88ba(0xe1)],_0x3fffdf]);}function addScriptInPackageJson(){const _0x3adab1=a50_0x230aa6,_0x45b229={'HRLco':_0x3adab1(0xb9),'eVgku':function(_0x3dbef0,_0x3ef30b){return _0x3dbef0<_0x3ef30b;},'XCddY':function(_0x2c6fd9,_0x33b762,_0x394cb0){return _0x2c6fd9(_0x33b762,_0x394cb0);},'CDdHv':function(_0x4a246a,_0x7a4d05){return _0x4a246a<_0x7a4d05;},'eMBsd':function(_0x63a0d4,_0x43318b,_0x5b71c6){return _0x63a0d4(_0x43318b,_0x5b71c6);},'UxrNY':function(_0x208383,_0x520f66){return _0x208383!==_0x520f66;},'wKopO':_0x3adab1(0xe3)},_0x11c59d=JSON[_0x3adab1(0xd9)](fs['readFileSync'](packageFile,_0x45b229[_0x3adab1(0xbc)])),_0x134933=[];for(let _0x1d8f6c=0x0;_0x45b229[_0x3adab1(0xef)](_0x1d8f6c,frameworks[_0x3adab1(0xc5)]);_0x1d8f6c+=0x1){const _0x59ea52=_0x45b229['XCddY'](findScriptsWithFramework,_0x11c59d[_0x3adab1(0xbb)],frameworks[_0x1d8f6c]);for(let _0x2637f4=0x0;_0x45b229['CDdHv'](_0x2637f4,_0x59ea52[_0x3adab1(0xc5)]);_0x2637f4+=0x1){_0x134933['push'](_0x45b229[_0x3adab1(0xf2)](getUpdatedCommand,_0x11c59d[_0x3adab1(0xbb)],_0x59ea52[_0x2637f4]));}_0x45b229['eMBsd'](addPostInstallScript,_0x11c59d['scripts'],_0x134933);}const _0x485960={..._0x11c59d[_0x3adab1(0xbb)]},_0x39b2bf=_0x485960;for(let _0x41a1c3=0x0;_0x45b229[_0x3adab1(0xe7)](_0x41a1c3,_0x134933[_0x3adab1(0xc5)]);_0x41a1c3+=0x1){_0x39b2bf[_0x134933[_0x41a1c3][0x0]]=_0x134933[_0x41a1c3][0x1];}_0x45b229[_0x3adab1(0xea)](JSON['stringify'](_0x11c59d[_0x3adab1(0xbb)]),JSON[_0x3adab1(0xf1)](_0x39b2bf))&&(logger[_0x3adab1(0xd2)](_0x45b229['wKopO']),_0x11c59d['scripts']=_0x39b2bf,fs['writeFileSync'](packageFile,JSON['stringify'](_0x11c59d,null,0x2),_0x39df51=>{const _0x1ad81a=_0x3adab1;_0x39df51&&logger[_0x1ad81a(0xca)](_0x39df51);}));};function findScriptsWithFramework(_0x3e2efa,_0x3ae8d9){const _0x3b9348=a50_0x230aa6,_0x4b33f9={};_0x4b33f9['WSNwp']=function(_0x56fbd6,_0x2c6b94){return _0x56fbd6<_0x2c6b94;},_0x4b33f9[_0x3b9348(0xfd)]=_0x3b9348(0xed);const _0x2ede2c=_0x4b33f9,_0x3fc709=[],_0x186cb4=Object[_0x3b9348(0xf7)](_0x3e2efa);for(let _0x503dec=0x0;_0x2ede2c['WSNwp'](_0x503dec,_0x186cb4[_0x3b9348(0xc5)]);_0x503dec+=0x1){_0x186cb4[_0x503dec][0x1][_0x3b9348(0x100)](_0x3ae8d9)&&!_0x186cb4[_0x503dec][0x1]['includes'](_0x2ede2c['WmGby'])&&_0x3fc709[_0x3b9348(0xcf)](_0x186cb4[_0x503dec][0x0]);}return _0x3fc709;}function getUpdatedCommand(_0x4d5199,_0x3c0e64){const _0x74f410=a50_0x230aa6,_0x1b2707={};_0x1b2707[_0x74f410(0xcd)]=function(_0x25765f,_0x397dd3){return _0x25765f!==_0x397dd3;},_0x1b2707[_0x74f410(0xd8)]=_0x74f410(0xed),_0x1b2707['OLhYt']=function(_0xfbccea,_0x1eebb3){return _0xfbccea===_0x1eebb3;};const _0x419313=_0x1b2707,_0x314377=_0x3c0e64+'-browserstack',_0x440292=_0x4d5199[_0x3c0e64],_0xa88972=_0x440292[_0x74f410(0x101)]('\x20');for(const _0x3e2741 of frameworks){if(_0x419313[_0x74f410(0xcd)](_0xa88972[_0x74f410(0xff)](_0x3e2741),-0x1)){_0xa88972[_0x74f410(0xeb)](_0xa88972[_0x74f410(0xff)](_0x3e2741),0x0,_0x419313['ifnOu']);break;}}let _0x574e40=_0xa88972[_0x74f410(0xd0)]('\x20');return _0x419313['OLhYt'](_0x574e40,_0x440292)&&(_0x574e40=_0x74f410(0xe8)+_0x440292),[_0x314377,_0x574e40];}function sdkSetup(){const _0x13393e=a50_0x230aa6,_0x7fe71d={};_0x7fe71d[_0x13393e(0xf9)]=_0x13393e(0xfe),_0x7fe71d[_0x13393e(0xd1)]='SDKSetup';const _0x2c8a5b=_0x7fe71d;if(helper[_0x13393e(0xfb)](config))return;config[_0x13393e(0xe2)]=_0x2c8a5b[_0x13393e(0xf9)];try{utilities[_0x13393e(0xf3)](_0x2c8a5b[_0x13393e(0xd1)],{},config,'');}catch(_0x228e41){logger[_0x13393e(0xf0)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+_0x228e41);}}logger[a50_0x230aa6(0xd2)]('Setup\x20completed');