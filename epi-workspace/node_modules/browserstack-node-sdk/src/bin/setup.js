#!/usr/bin/env node

const a50_0x442ee9=a50_0x1d5f;(function(_0x5978f8,_0x1930cd){const _0x15b176=a50_0x1d5f,_0x2d6e46=_0x5978f8();while(!![]){try{const _0x5b36e9=-parseInt(_0x15b176(0xb6))/0x1+-parseInt(_0x15b176(0xde))/0x2*(parseInt(_0x15b176(0xc6))/0x3)+parseInt(_0x15b176(0xb4))/0x4*(-parseInt(_0x15b176(0xdb))/0x5)+-parseInt(_0x15b176(0xc7))/0x6+parseInt(_0x15b176(0xdd))/0x7*(parseInt(_0x15b176(0xd9))/0x8)+-parseInt(_0x15b176(0xda))/0x9*(parseInt(_0x15b176(0xc9))/0xa)+parseInt(_0x15b176(0xf1))/0xb;if(_0x5b36e9===_0x1930cd)break;else _0x2d6e46['push'](_0x2d6e46['shift']());}catch(_0x9eee02){_0x2d6e46['push'](_0x2d6e46['shift']());}}}(a50_0x3528,0xa77a8));function a50_0x1d5f(_0x2e13f1,_0x321adb){const _0x352832=a50_0x3528();return a50_0x1d5f=function(_0x1d5f94,_0x52f2ab){_0x1d5f94=_0x1d5f94-0xb3;let _0x5be7a1=_0x352832[_0x1d5f94];return _0x5be7a1;},a50_0x1d5f(_0x2e13f1,_0x321adb);}function a50_0x3528(){const _0x37590d=['yargs','Setup\x20completed','ywJIS','lROGS','/../../browserstack.yml.sample','WdXxz','node-setup','4rOjiXA','cucumber-js','732472WEtdRU','utf8','VpcCn','username','entries','XeqLD','includes','browserstack-node-sdk\x20','Creating\x20configuration\x20file...','fsiQV','../helpers/utilities','WvjRP','../helpers/helper','IAIOK','argv','ZlOzD','6PGAnrt','6663108DDRCTA','playwright','30wHlFZh','SDKSetup','writeFileSync','push','stringify','lxfoH','scripts','ImhcY','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','info','LYaCb','ClxOe','cwd','postinstall','Adding\x20new\x20script(s)\x20in\x20package.json...','npm\x20update\x20browserstack-node-sdk','2244888LjmiST','431703OdJcaF','1618455LQcpJP','YOUR_ACCESS_KEY','7eDCaNO','847426kgkHAJ','replace','ohSOz','error','\x20&&\x20npm\x20update\x20browserstack-node-sdk','NHSee','debug','indexOf','node','key','length','PPGdV','LPjec','YOUR_USERNAME','/../../browserstack.pw.yml.sample','../helpers/logger','browserstack-node-sdk','Nbvci','splice','39197279Lyldqe','load'];a50_0x3528=function(){return _0x37590d;};return a50_0x3528();}const fs=require('fs'),helper=require(a50_0x442ee9(0xc2)),utilities=require(a50_0x442ee9(0xc0)),yaml=require('js-yaml'),yargs=require(a50_0x442ee9(0xf3)),logger=require(a50_0x442ee9(0xed))['winstonLogger'],configFileTemplate=__dirname+a50_0x442ee9(0xf7),configFileTemplatePW=__dirname+a50_0x442ee9(0xec),configFile=process[a50_0x442ee9(0xd5)]()+'/browserstack.yml',packageFile=process[a50_0x442ee9(0xd5)]()+'/package.json',frameworks=['mocha','jest',a50_0x442ee9(0xb5),a50_0x442ee9(0xe6),'nightwatch','codeceptjs',a50_0x442ee9(0xc8)];let config;logger[a50_0x442ee9(0xd2)](a50_0x442ee9(0xbe)),createConfigurationFile(yargs[a50_0x442ee9(0xc4)][a50_0x442ee9(0xb9)],yargs['argv'][a50_0x442ee9(0xe7)],yargs[a50_0x442ee9(0xc4)][a50_0x442ee9(0xc8)]);try{sdkSetup();}catch(a50_0x11f233){logger[a50_0x442ee9(0xe4)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a50_0x11f233);}addScriptInPackageJson();function createConfigurationFile(_0x16923b,_0x556c28,_0x3d70bc=![]){const _0x4f56e6=a50_0x442ee9,_0x235827={};_0x235827[_0x4f56e6(0xf6)]=_0x4f56e6(0xb7),_0x235827[_0x4f56e6(0xc1)]=_0x4f56e6(0xeb),_0x235827[_0x4f56e6(0xd4)]=_0x4f56e6(0xdc);const _0x527a4e=_0x235827;try{let _0x29abf7=fs['readFileSync'](_0x3d70bc?configFileTemplatePW:configFileTemplate,_0x527a4e[_0x4f56e6(0xf6)]);_0x16923b&&(_0x29abf7=_0x29abf7[_0x4f56e6(0xdf)](_0x527a4e[_0x4f56e6(0xc1)],_0x16923b)),_0x556c28&&(_0x29abf7=_0x29abf7['replace'](_0x527a4e['ClxOe'],_0x556c28)),config=yaml[_0x4f56e6(0xf2)](_0x29abf7),fs[_0x4f56e6(0xcb)](configFile,_0x29abf7,_0x5624df=>{const _0x1a56dc=_0x4f56e6;_0x5624df&&logger[_0x1a56dc(0xe1)](_0x5624df);});}catch(_0x4a2ab1){logger['error'](_0x4a2ab1);}}function addPostInstallScript(_0x21978b,_0x5d2b90){const _0x13a99f=a50_0x442ee9,_0xa8f21c={};_0xa8f21c[_0x13a99f(0xef)]=_0x13a99f(0xd6),_0xa8f21c['LPjec']=_0x13a99f(0xd8),_0xa8f21c[_0x13a99f(0xe9)]=_0x13a99f(0xe2);const _0x402659=_0xa8f21c;let _0x11450f=_0x21978b[_0x402659[_0x13a99f(0xef)]];if(_0x11450f&&_0x11450f[_0x13a99f(0xbc)](_0x402659[_0x13a99f(0xea)]))return;!_0x11450f?_0x11450f=_0x402659[_0x13a99f(0xea)]:_0x11450f+=_0x402659[_0x13a99f(0xe9)],_0x5d2b90[_0x13a99f(0xcc)]([_0x402659[_0x13a99f(0xef)],_0x11450f]);}function addScriptInPackageJson(){const _0x4db8ea=a50_0x442ee9,_0x4e48f4={'fsiQV':_0x4db8ea(0xb7),'IAIOK':function(_0x555a01,_0x376c9f){return _0x555a01<_0x376c9f;},'WdXxz':function(_0x2c0712,_0xbd673e,_0x1aa6e6){return _0x2c0712(_0xbd673e,_0x1aa6e6);},'XeqLD':function(_0x3bbbb5,_0x3f5ff0){return _0x3bbbb5<_0x3f5ff0;},'lwwmz':function(_0x426bbb,_0x3380de,_0x3c1ea9){return _0x426bbb(_0x3380de,_0x3c1ea9);},'lxfoH':function(_0x1d44f4,_0x24ebfb){return _0x1d44f4!==_0x24ebfb;},'ZlOzD':_0x4db8ea(0xd7)},_0x312b49=JSON['parse'](fs['readFileSync'](packageFile,_0x4e48f4[_0x4db8ea(0xbf)])),_0x47d745=[];for(let _0xf6c498=0x0;_0x4e48f4[_0x4db8ea(0xc3)](_0xf6c498,frameworks[_0x4db8ea(0xe8)]);_0xf6c498+=0x1){const _0x5c189c=_0x4e48f4[_0x4db8ea(0xf8)](findScriptsWithFramework,_0x312b49[_0x4db8ea(0xcf)],frameworks[_0xf6c498]);for(let _0x7978f5=0x0;_0x4e48f4[_0x4db8ea(0xbb)](_0x7978f5,_0x5c189c[_0x4db8ea(0xe8)]);_0x7978f5+=0x1){_0x47d745['push'](_0x4e48f4[_0x4db8ea(0xf8)](getUpdatedCommand,_0x312b49[_0x4db8ea(0xcf)],_0x5c189c[_0x7978f5]));}_0x4e48f4['lwwmz'](addPostInstallScript,_0x312b49[_0x4db8ea(0xcf)],_0x47d745);}const _0x4bb011={..._0x312b49[_0x4db8ea(0xcf)]},_0x3afea6=_0x4bb011;for(let _0x29cc6f=0x0;_0x4e48f4[_0x4db8ea(0xbb)](_0x29cc6f,_0x47d745['length']);_0x29cc6f+=0x1){_0x3afea6[_0x47d745[_0x29cc6f][0x0]]=_0x47d745[_0x29cc6f][0x1];}_0x4e48f4[_0x4db8ea(0xce)](JSON['stringify'](_0x312b49[_0x4db8ea(0xcf)]),JSON[_0x4db8ea(0xcd)](_0x3afea6))&&(logger[_0x4db8ea(0xd2)](_0x4e48f4[_0x4db8ea(0xc5)]),_0x312b49[_0x4db8ea(0xcf)]=_0x3afea6,fs[_0x4db8ea(0xcb)](packageFile,JSON['stringify'](_0x312b49,null,0x2),_0x15daf5=>{const _0x3101ff=_0x4db8ea;_0x15daf5&&logger[_0x3101ff(0xe1)](_0x15daf5);}));};function findScriptsWithFramework(_0x22ebf7,_0x2db164){const _0x99b352=a50_0x442ee9,_0x155be1={};_0x155be1['nZHei']=function(_0x499bd8,_0x404bd2){return _0x499bd8<_0x404bd2;},_0x155be1[_0x99b352(0xd0)]=_0x99b352(0xee);const _0x29e5d7=_0x155be1,_0xe4e836=[],_0x436ab1=Object[_0x99b352(0xba)](_0x22ebf7);for(let _0x503f16=0x0;_0x29e5d7['nZHei'](_0x503f16,_0x436ab1[_0x99b352(0xe8)]);_0x503f16+=0x1){_0x436ab1[_0x503f16][0x1][_0x99b352(0xbc)](_0x2db164)&&!_0x436ab1[_0x503f16][0x1][_0x99b352(0xbc)](_0x29e5d7['ImhcY'])&&_0xe4e836[_0x99b352(0xcc)](_0x436ab1[_0x503f16][0x0]);}return _0xe4e836;}function getUpdatedCommand(_0x22b9b3,_0x478091){const _0x2f35ca=a50_0x442ee9,_0x2cd475={};_0x2cd475[_0x2f35ca(0xe3)]=function(_0x318594,_0x31cc81){return _0x318594!==_0x31cc81;},_0x2cd475[_0x2f35ca(0xb8)]=_0x2f35ca(0xee),_0x2cd475[_0x2f35ca(0xf5)]=function(_0x2534e5,_0xdb8802){return _0x2534e5===_0xdb8802;};const _0x520ac4=_0x2cd475,_0x353489=_0x478091+'-browserstack',_0x25bcbe=_0x22b9b3[_0x478091],_0x555e06=_0x25bcbe['split']('\x20');for(const _0x440434 of frameworks){if(_0x520ac4[_0x2f35ca(0xe3)](_0x555e06['indexOf'](_0x440434),-0x1)){_0x555e06[_0x2f35ca(0xf0)](_0x555e06[_0x2f35ca(0xe5)](_0x440434),0x0,_0x520ac4[_0x2f35ca(0xb8)]);break;}}let _0x4a1da6=_0x555e06['join']('\x20');return _0x520ac4['ywJIS'](_0x4a1da6,_0x25bcbe)&&(_0x4a1da6=_0x2f35ca(0xbd)+_0x25bcbe),[_0x353489,_0x4a1da6];}function sdkSetup(){const _0x2a5a64=a50_0x442ee9,_0x2b888e={};_0x2b888e[_0x2a5a64(0xe0)]=_0x2a5a64(0xb3),_0x2b888e[_0x2a5a64(0xd3)]=_0x2a5a64(0xca);const _0x5d7521=_0x2b888e;if(helper['isUndefined'](config))return;config['source']=_0x5d7521['ohSOz'];try{utilities['fireFunnelTestEvent'](_0x5d7521['LYaCb'],{},config,'');}catch(_0x2fa40e){logger['debug'](_0x2a5a64(0xd1)+_0x2fa40e);}}logger[a50_0x442ee9(0xd2)](a50_0x442ee9(0xf4));