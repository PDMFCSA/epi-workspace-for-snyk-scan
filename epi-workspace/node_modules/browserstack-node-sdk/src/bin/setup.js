#!/usr/bin/env node

const a49_0x1492b1=a49_0x5d87;function a49_0x5d87(_0x41f732,_0x1ecd8f){const _0x4c42a1=a49_0x4c42();return a49_0x5d87=function(_0x5d87c7,_0x179085){_0x5d87c7=_0x5d87c7-0xcf;let _0x529100=_0x4c42a1[_0x5d87c7];return _0x529100;},a49_0x5d87(_0x41f732,_0x1ecd8f);}(function(_0x43e017,_0x2967cf){const _0x14520b=a49_0x5d87,_0xedf4a4=_0x43e017();while(!![]){try{const _0xc2b48d=-parseInt(_0x14520b(0xd1))/0x1*(parseInt(_0x14520b(0x11e))/0x2)+parseInt(_0x14520b(0xfb))/0x3+parseInt(_0x14520b(0x100))/0x4*(-parseInt(_0x14520b(0xf7))/0x5)+-parseInt(_0x14520b(0xfd))/0x6+parseInt(_0x14520b(0x120))/0x7*(parseInt(_0x14520b(0xf2))/0x8)+-parseInt(_0x14520b(0xcf))/0x9*(-parseInt(_0x14520b(0xf3))/0xa)+-parseInt(_0x14520b(0x10f))/0xb*(-parseInt(_0x14520b(0xe3))/0xc);if(_0xc2b48d===_0x2967cf)break;else _0xedf4a4['push'](_0xedf4a4['shift']());}catch(_0x57a16f){_0xedf4a4['push'](_0xedf4a4['shift']());}}}(a49_0x4c42,0xa8823));const fs=require('fs'),helper=require(a49_0x1492b1(0xd5)),utilities=require(a49_0x1492b1(0xdd)),yaml=require(a49_0x1492b1(0x10a)),yargs=require(a49_0x1492b1(0xec)),logger=require('../helpers/logger')[a49_0x1492b1(0x11b)],configFileTemplate=__dirname+a49_0x1492b1(0xd6),configFileTemplatePW=__dirname+a49_0x1492b1(0xda),configFile=process[a49_0x1492b1(0xed)]()+a49_0x1492b1(0x11c),packageFile=process['cwd']()+a49_0x1492b1(0xe5),frameworks=[a49_0x1492b1(0x11f),a49_0x1492b1(0xfa),a49_0x1492b1(0xd9),a49_0x1492b1(0xf6),a49_0x1492b1(0x110),'codeceptjs','playwright'];let config;logger['info'](a49_0x1492b1(0x113)),createConfigurationFile(yargs[a49_0x1492b1(0xef)][a49_0x1492b1(0x101)],yargs[a49_0x1492b1(0xef)][a49_0x1492b1(0xf8)],yargs[a49_0x1492b1(0xef)][a49_0x1492b1(0x11a)]);try{sdkSetup();}catch(a49_0x45aae5){logger['debug'](a49_0x1492b1(0xdb)+a49_0x45aae5);}addScriptInPackageJson();function a49_0x4c42(){const _0x282d33=['winstonLogger','/browserstack.yml','browserstack-node-sdk','10GknUDr','mocha','5679506Emxnqr','EVuhc','6228XvLSxi','aJBDv','198395BGsasH','split','info','kfhcz','../helpers/helper','/../../browserstack.yml.sample','isUndefined','EEeXV','cucumber-js','/../../browserstack.pw.yml.sample','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','NcNpi','../helpers/utilities','BSrBE','ckcFS','debug','HWWPL','includes','24PjDjUv','scripts','/package.json','entries','browserstack-node-sdk\x20','utf8','caymM','splice','tbhlx','yargs','cwd','length','argv','replace','load','8uWiZTo','8110CNSFUu','mFzbZ','CHwvW','node','3050iPSLaZ','key','push','jest','1985046NgvLtU','hrkCf','1425924YOCOxB','sFcFV','error','6228ifgqCF','username','YOUR_ACCESS_KEY','postinstall','writeFileSync','dAhZI','xVUdc','rmAAs','iLwJr','-browserstack','js-yaml','npm\x20update\x20browserstack-node-sdk','\x20&&\x20npm\x20update\x20browserstack-node-sdk','stringify','XOwHO','4594469pENyOC','nightwatch','nxgnV','sBqfc','Creating\x20configuration\x20file...','sTZWl','node-setup','readFileSync','join','indexOf','YOUR_USERNAME','playwright'];a49_0x4c42=function(){return _0x282d33;};return a49_0x4c42();}function createConfigurationFile(_0x24e334,_0x24dc20,_0x15e104=![]){const _0x57dcc4=a49_0x1492b1,_0x256f6a={};_0x256f6a[_0x57dcc4(0xd0)]=_0x57dcc4(0xe8),_0x256f6a['xVUdc']=_0x57dcc4(0x119),_0x256f6a['hrkCf']=_0x57dcc4(0x102);const _0x491a51=_0x256f6a;try{let _0x3334f4=fs[_0x57dcc4(0x116)](_0x15e104?configFileTemplatePW:configFileTemplate,_0x491a51[_0x57dcc4(0xd0)]);_0x24e334&&(_0x3334f4=_0x3334f4[_0x57dcc4(0xf0)](_0x491a51[_0x57dcc4(0x106)],_0x24e334)),_0x24dc20&&(_0x3334f4=_0x3334f4['replace'](_0x491a51[_0x57dcc4(0xfc)],_0x24dc20)),config=yaml[_0x57dcc4(0xf1)](_0x3334f4),fs[_0x57dcc4(0x104)](configFile,_0x3334f4,_0xc5e977=>{const _0x2f2d09=_0x57dcc4;_0xc5e977&&logger[_0x2f2d09(0xff)](_0xc5e977);});}catch(_0x5f1959){logger[_0x57dcc4(0xff)](_0x5f1959);}}function addPostInstallScript(_0x18c696,_0x41ae2f){const _0x181d92=a49_0x1492b1,_0x319143={};_0x319143[_0x181d92(0x114)]=_0x181d92(0x103),_0x319143[_0x181d92(0xe1)]=_0x181d92(0x10b),_0x319143[_0x181d92(0x105)]=_0x181d92(0x10c);const _0x4cf8a4=_0x319143;let _0x4ba67f=_0x18c696[_0x4cf8a4[_0x181d92(0x114)]];if(_0x4ba67f&&_0x4ba67f[_0x181d92(0xe2)](_0x4cf8a4['HWWPL']))return;!_0x4ba67f?_0x4ba67f=_0x4cf8a4['HWWPL']:_0x4ba67f+=_0x4cf8a4[_0x181d92(0x105)],_0x41ae2f['push']([_0x4cf8a4[_0x181d92(0x114)],_0x4ba67f]);}function addScriptInPackageJson(){const _0x3502a8=a49_0x1492b1,_0x3d7289={'sFcFV':'utf8','CHwvW':function(_0x6089b7,_0x35aad){return _0x6089b7<_0x35aad;},'caymM':function(_0x48f39c,_0x5c0b61,_0x3fc2c0){return _0x48f39c(_0x5c0b61,_0x3fc2c0);},'kfhcz':function(_0x3c9e4d,_0x5f6a0){return _0x3c9e4d<_0x5f6a0;},'nxgnV':function(_0x3dc636,_0x506831,_0x76081c){return _0x3dc636(_0x506831,_0x76081c);},'EEeXV':function(_0x14467a,_0x3014b8,_0x1d55f0){return _0x14467a(_0x3014b8,_0x1d55f0);},'mFzbZ':function(_0x4544fd,_0x4b5e13){return _0x4544fd<_0x4b5e13;},'iLwJr':function(_0x4d150c,_0x11be05){return _0x4d150c!==_0x11be05;},'EVuhc':'Adding\x20new\x20script(s)\x20in\x20package.json...'},_0x40d374=JSON['parse'](fs[_0x3502a8(0x116)](packageFile,_0x3d7289[_0x3502a8(0xfe)])),_0x16f78b=[];for(let _0x55b080=0x0;_0x3d7289[_0x3502a8(0xf5)](_0x55b080,frameworks[_0x3502a8(0xee)]);_0x55b080+=0x1){const _0x203e87=_0x3d7289[_0x3502a8(0xe9)](findScriptsWithFramework,_0x40d374[_0x3502a8(0xe4)],frameworks[_0x55b080]);for(let _0x21187a=0x0;_0x3d7289[_0x3502a8(0xd4)](_0x21187a,_0x203e87[_0x3502a8(0xee)]);_0x21187a+=0x1){_0x16f78b[_0x3502a8(0xf9)](_0x3d7289[_0x3502a8(0x111)](getUpdatedCommand,_0x40d374[_0x3502a8(0xe4)],_0x203e87[_0x21187a]));}_0x3d7289[_0x3502a8(0xd8)](addPostInstallScript,_0x40d374[_0x3502a8(0xe4)],_0x16f78b);}const _0x4bace={..._0x40d374[_0x3502a8(0xe4)]},_0x4230ee=_0x4bace;for(let _0x3d076b=0x0;_0x3d7289[_0x3502a8(0xf4)](_0x3d076b,_0x16f78b[_0x3502a8(0xee)]);_0x3d076b+=0x1){_0x4230ee[_0x16f78b[_0x3d076b][0x0]]=_0x16f78b[_0x3d076b][0x1];}_0x3d7289[_0x3502a8(0x108)](JSON[_0x3502a8(0x10d)](_0x40d374['scripts']),JSON[_0x3502a8(0x10d)](_0x4230ee))&&(logger[_0x3502a8(0xd3)](_0x3d7289[_0x3502a8(0x121)]),_0x40d374[_0x3502a8(0xe4)]=_0x4230ee,fs[_0x3502a8(0x104)](packageFile,JSON['stringify'](_0x40d374,null,0x2),_0xf8d95d=>{const _0x30645d=_0x3502a8;_0xf8d95d&&logger[_0x30645d(0xff)](_0xf8d95d);}));};function findScriptsWithFramework(_0x75f3ec,_0x39b7eb){const _0x57db57=a49_0x1492b1,_0x469666={};_0x469666[_0x57db57(0xde)]=function(_0x173104,_0x18c57e){return _0x173104<_0x18c57e;},_0x469666[_0x57db57(0xdc)]=_0x57db57(0x11d);const _0x54f259=_0x469666,_0x292f3e=[],_0x284fe0=Object[_0x57db57(0xe6)](_0x75f3ec);for(let _0xec8af2=0x0;_0x54f259[_0x57db57(0xde)](_0xec8af2,_0x284fe0['length']);_0xec8af2+=0x1){_0x284fe0[_0xec8af2][0x1][_0x57db57(0xe2)](_0x39b7eb)&&!_0x284fe0[_0xec8af2][0x1][_0x57db57(0xe2)](_0x54f259[_0x57db57(0xdc)])&&_0x292f3e[_0x57db57(0xf9)](_0x284fe0[_0xec8af2][0x0]);}return _0x292f3e;}function getUpdatedCommand(_0x17c086,_0x29f827){const _0x280a4a=a49_0x1492b1,_0x16975d={};_0x16975d[_0x280a4a(0x10e)]=function(_0x1f985d,_0x41c727){return _0x1f985d!==_0x41c727;},_0x16975d[_0x280a4a(0xeb)]=_0x280a4a(0x11d),_0x16975d[_0x280a4a(0x107)]=function(_0x49bce1,_0x48e4a3){return _0x49bce1===_0x48e4a3;};const _0x930816=_0x16975d,_0x1bc1b0=_0x29f827+_0x280a4a(0x109),_0x43b2fa=_0x17c086[_0x29f827],_0x2f16a4=_0x43b2fa[_0x280a4a(0xd2)]('\x20');for(const _0x52a0d8 of frameworks){if(_0x930816['XOwHO'](_0x2f16a4[_0x280a4a(0x118)](_0x52a0d8),-0x1)){_0x2f16a4[_0x280a4a(0xea)](_0x2f16a4[_0x280a4a(0x118)](_0x52a0d8),0x0,_0x930816[_0x280a4a(0xeb)]);break;}}let _0x2612a2=_0x2f16a4[_0x280a4a(0x117)]('\x20');return _0x930816[_0x280a4a(0x107)](_0x2612a2,_0x43b2fa)&&(_0x2612a2=_0x280a4a(0xe7)+_0x43b2fa),[_0x1bc1b0,_0x2612a2];}function sdkSetup(){const _0x50002a=a49_0x1492b1,_0x1435f9={};_0x1435f9[_0x50002a(0xdf)]=_0x50002a(0x115),_0x1435f9[_0x50002a(0x112)]='SDKSetup';const _0x4d1e46=_0x1435f9;if(helper[_0x50002a(0xd7)](config))return;config['source']=_0x4d1e46['ckcFS'];try{utilities['fireFunnelTestEvent'](_0x4d1e46[_0x50002a(0x112)],{},config,'');}catch(_0x39f41a){logger[_0x50002a(0xe0)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+_0x39f41a);}}logger[a49_0x1492b1(0xd3)]('Setup\x20completed');