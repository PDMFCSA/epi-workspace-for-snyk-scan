#!/usr/bin/env node

const a50_0x3b96ae=a50_0x5c98;(function(_0x42ef92,_0x4d4e85){const _0x56d2fe=a50_0x5c98,_0x14466c=_0x42ef92();while(!![]){try{const _0x32d971=-parseInt(_0x56d2fe(0xeb))/0x1+parseInt(_0x56d2fe(0xd9))/0x2*(-parseInt(_0x56d2fe(0xef))/0x3)+-parseInt(_0x56d2fe(0xc9))/0x4*(parseInt(_0x56d2fe(0xe3))/0x5)+-parseInt(_0x56d2fe(0xe7))/0x6*(parseInt(_0x56d2fe(0xc5))/0x7)+-parseInt(_0x56d2fe(0xcf))/0x8*(parseInt(_0x56d2fe(0xfa))/0x9)+-parseInt(_0x56d2fe(0x107))/0xa*(-parseInt(_0x56d2fe(0xd3))/0xb)+parseInt(_0x56d2fe(0xcd))/0xc*(parseInt(_0x56d2fe(0xd8))/0xd);if(_0x32d971===_0x4d4e85)break;else _0x14466c['push'](_0x14466c['shift']());}catch(_0x1f9997){_0x14466c['push'](_0x14466c['shift']());}}}(a50_0x1018,0xb8ede));const fs=require('fs'),helper=require(a50_0x3b96ae(0x108)),utilities=require(a50_0x3b96ae(0x101)),yaml=require(a50_0x3b96ae(0xf8)),yargs=require(a50_0x3b96ae(0xda)),logger=require(a50_0x3b96ae(0xee))[a50_0x3b96ae(0xe0)],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+a50_0x3b96ae(0xc4),configFile=process['cwd']()+'/browserstack.yml',packageFile=process[a50_0x3b96ae(0xd0)]()+a50_0x3b96ae(0xe1),frameworks=[a50_0x3b96ae(0xf6),a50_0x3b96ae(0xde),a50_0x3b96ae(0xdd),a50_0x3b96ae(0xe6),'nightwatch',a50_0x3b96ae(0xfd),a50_0x3b96ae(0xc7)];let config;logger[a50_0x3b96ae(0xd5)](a50_0x3b96ae(0x109)),createConfigurationFile(yargs[a50_0x3b96ae(0x102)][a50_0x3b96ae(0xe5)],yargs[a50_0x3b96ae(0x102)][a50_0x3b96ae(0xd2)],yargs[a50_0x3b96ae(0x102)][a50_0x3b96ae(0xc7)]);try{sdkSetup();}catch(a50_0x568933){logger['debug'](a50_0x3b96ae(0xf4)+a50_0x568933);}addScriptInPackageJson();function createConfigurationFile(_0xf30d6d,_0x175236,_0x4c48b5=![]){const _0x58b4cb=a50_0x3b96ae,_0x54f349={};_0x54f349[_0x58b4cb(0xc8)]=_0x58b4cb(0xf3),_0x54f349['yRyrP']='YOUR_USERNAME',_0x54f349['VIjIa']='YOUR_ACCESS_KEY';const _0x5b8745=_0x54f349;try{let _0x5cf074=fs['readFileSync'](_0x4c48b5?configFileTemplatePW:configFileTemplate,_0x5b8745[_0x58b4cb(0xc8)]);_0xf30d6d&&(_0x5cf074=_0x5cf074[_0x58b4cb(0xf5)](_0x5b8745['yRyrP'],_0xf30d6d)),_0x175236&&(_0x5cf074=_0x5cf074[_0x58b4cb(0xf5)](_0x5b8745[_0x58b4cb(0xfe)],_0x175236)),config=yaml['load'](_0x5cf074),fs[_0x58b4cb(0x100)](configFile,_0x5cf074,_0xea3532=>{const _0x57d1a4=_0x58b4cb;_0xea3532&&logger[_0x57d1a4(0xfb)](_0xea3532);});}catch(_0x5f3619){logger['error'](_0x5f3619);}}function a50_0x5c98(_0x1ca61d,_0x42d9ee){const _0x101829=a50_0x1018();return a50_0x5c98=function(_0x5c983c,_0x511d0b){_0x5c983c=_0x5c983c-0xc0;let _0x3eca6d=_0x101829[_0x5c983c];return _0x3eca6d;},a50_0x5c98(_0x1ca61d,_0x42d9ee);}function addPostInstallScript(_0x4e8b0c,_0xf14497){const _0x386c3b=a50_0x3b96ae,_0x3ccbab={};_0x3ccbab[_0x386c3b(0xe9)]=_0x386c3b(0xc6),_0x3ccbab[_0x386c3b(0xd1)]=_0x386c3b(0xe4),_0x3ccbab['clhER']=_0x386c3b(0xf9);const _0xea3e85=_0x3ccbab;let _0x3434c4=_0x4e8b0c[_0xea3e85[_0x386c3b(0xe9)]];if(_0x3434c4&&_0x3434c4[_0x386c3b(0xf7)](_0xea3e85[_0x386c3b(0xd1)]))return;!_0x3434c4?_0x3434c4=_0xea3e85['gZDFz']:_0x3434c4+=_0xea3e85[_0x386c3b(0xc0)],_0xf14497['push']([_0xea3e85[_0x386c3b(0xe9)],_0x3434c4]);}function addScriptInPackageJson(){const _0x192715=a50_0x3b96ae,_0x21395e={'lXRsy':_0x192715(0xf3),'CdREl':function(_0xe0635d,_0x1dca5c){return _0xe0635d<_0x1dca5c;},'zlJIA':function(_0xde8444,_0x24a0d9,_0x4bfd16){return _0xde8444(_0x24a0d9,_0x4bfd16);},'SIskM':function(_0x33a038,_0x297243,_0x2b328a){return _0x33a038(_0x297243,_0x2b328a);},'eOhpT':function(_0x5a4373,_0x326e7d){return _0x5a4373<_0x326e7d;},'bVhaF':function(_0x291963,_0x244a4d){return _0x291963!==_0x244a4d;},'LscsM':_0x192715(0xfc)},_0x16fe84=JSON['parse'](fs[_0x192715(0xec)](packageFile,_0x21395e[_0x192715(0xf2)])),_0xa7d15e=[];for(let _0xad6315=0x0;_0x21395e[_0x192715(0xd4)](_0xad6315,frameworks[_0x192715(0xdf)]);_0xad6315+=0x1){const _0x4425d5=_0x21395e[_0x192715(0xdb)](findScriptsWithFramework,_0x16fe84[_0x192715(0xc1)],frameworks[_0xad6315]);for(let _0x26aa91=0x0;_0x21395e[_0x192715(0xd4)](_0x26aa91,_0x4425d5[_0x192715(0xdf)]);_0x26aa91+=0x1){_0xa7d15e[_0x192715(0xf1)](_0x21395e['zlJIA'](getUpdatedCommand,_0x16fe84['scripts'],_0x4425d5[_0x26aa91]));}_0x21395e['SIskM'](addPostInstallScript,_0x16fe84[_0x192715(0xc1)],_0xa7d15e);}const _0x53d33e={..._0x16fe84[_0x192715(0xc1)]},_0x2735cb=_0x53d33e;for(let _0x1c53a0=0x0;_0x21395e['eOhpT'](_0x1c53a0,_0xa7d15e[_0x192715(0xdf)]);_0x1c53a0+=0x1){_0x2735cb[_0xa7d15e[_0x1c53a0][0x0]]=_0xa7d15e[_0x1c53a0][0x1];}_0x21395e['bVhaF'](JSON[_0x192715(0xdc)](_0x16fe84[_0x192715(0xc1)]),JSON[_0x192715(0xdc)](_0x2735cb))&&(logger[_0x192715(0xd5)](_0x21395e[_0x192715(0xd6)]),_0x16fe84[_0x192715(0xc1)]=_0x2735cb,fs[_0x192715(0x100)](packageFile,JSON[_0x192715(0xdc)](_0x16fe84,null,0x2),_0x416ea8=>{const _0x48e816=_0x192715;_0x416ea8&&logger[_0x48e816(0xfb)](_0x416ea8);}));};function a50_0x1018(){const _0x5aed3b=['scripts','kmaOT','BGyIc','/../../browserstack.pw.yml.sample','7511oguaYk','postinstall','playwright','msbJv','407244eFeQTs','split','qfuiH','QuEJi','29364zMrbFN','pYEcO','48tYFFyP','cwd','gZDFz','key','15468343bhKWlm','CdREl','info','LscsM','indexOf','23816flsDpK','730556KHQBrf','yargs','zlJIA','stringify','cucumber-js','jest','length','winstonLogger','/package.json','debug','70NaBKve','npm\x20update\x20browserstack-node-sdk','username','node','3750LUgDtt','TeLes','RHmin','node-setup','1324890cnnBpD','readFileSync','browserstack-node-sdk\x20','../helpers/logger','12noprLp','SDKSetup','push','lXRsy','utf8','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','replace','mocha','includes','js-yaml','\x20&&\x20npm\x20update\x20browserstack-node-sdk','374499hsoiGK','error','Adding\x20new\x20script(s)\x20in\x20package.json...','codeceptjs','VIjIa','-browserstack','writeFileSync','../helpers/utilities','argv','browserstack-node-sdk','AtpzP','isUndefined','source','10WGzJCn','../helpers/helper','Creating\x20configuration\x20file...','clhER'];a50_0x1018=function(){return _0x5aed3b;};return a50_0x1018();}function findScriptsWithFramework(_0x50d445,_0x1c482c){const _0x5c22b6=a50_0x3b96ae,_0x462f09={};_0x462f09[_0x5c22b6(0xe8)]=function(_0x1a09bc,_0x480cbe){return _0x1a09bc<_0x480cbe;},_0x462f09[_0x5c22b6(0xcb)]=_0x5c22b6(0x103);const _0x1807bb=_0x462f09,_0x340c18=[],_0x5b1675=Object['entries'](_0x50d445);for(let _0x35eb23=0x0;_0x1807bb[_0x5c22b6(0xe8)](_0x35eb23,_0x5b1675[_0x5c22b6(0xdf)]);_0x35eb23+=0x1){_0x5b1675[_0x35eb23][0x1][_0x5c22b6(0xf7)](_0x1c482c)&&!_0x5b1675[_0x35eb23][0x1][_0x5c22b6(0xf7)](_0x1807bb[_0x5c22b6(0xcb)])&&_0x340c18[_0x5c22b6(0xf1)](_0x5b1675[_0x35eb23][0x0]);}return _0x340c18;}function getUpdatedCommand(_0x413158,_0x3300e2){const _0x770e61=a50_0x3b96ae,_0x13a00c={};_0x13a00c[_0x770e61(0x104)]=function(_0x54e8cc,_0x4a7bf1){return _0x54e8cc!==_0x4a7bf1;},_0x13a00c[_0x770e61(0xce)]=_0x770e61(0x103),_0x13a00c['BGyIc']=function(_0x58ff1e,_0xafffec){return _0x58ff1e===_0xafffec;};const _0x1fff05=_0x13a00c,_0x18d5da=_0x3300e2+_0x770e61(0xff),_0x3c0863=_0x413158[_0x3300e2],_0x12426d=_0x3c0863[_0x770e61(0xca)]('\x20');for(const _0x57de5f of frameworks){if(_0x1fff05[_0x770e61(0x104)](_0x12426d[_0x770e61(0xd7)](_0x57de5f),-0x1)){_0x12426d['splice'](_0x12426d[_0x770e61(0xd7)](_0x57de5f),0x0,_0x1fff05['pYEcO']);break;}}let _0xd3fc8=_0x12426d['join']('\x20');return _0x1fff05[_0x770e61(0xc3)](_0xd3fc8,_0x3c0863)&&(_0xd3fc8=_0x770e61(0xed)+_0x3c0863),[_0x18d5da,_0xd3fc8];}function sdkSetup(){const _0x347af2=a50_0x3b96ae,_0x559313={};_0x559313[_0x347af2(0xcc)]=_0x347af2(0xea),_0x559313['kmaOT']=_0x347af2(0xf0);const _0xc254f7=_0x559313;if(helper[_0x347af2(0x105)](config))return;config[_0x347af2(0x106)]=_0xc254f7[_0x347af2(0xcc)];try{utilities['fireFunnelTestEvent'](_0xc254f7[_0x347af2(0xc2)],{},config,'');}catch(_0x4b9d74){logger[_0x347af2(0xe2)](_0x347af2(0xf4)+_0x4b9d74);}}logger['info']('Setup\x20completed');