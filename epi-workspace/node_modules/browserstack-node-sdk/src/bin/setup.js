#!/usr/bin/env node

const a50_0x1633e6=a50_0x3a52;(function(_0x56046f,_0x509318){const _0x3739f1=a50_0x3a52,_0x10c2b0=_0x56046f();while(!![]){try{const _0x3a0044=parseInt(_0x3739f1(0x193))/0x1+-parseInt(_0x3739f1(0x17a))/0x2*(-parseInt(_0x3739f1(0x18d))/0x3)+-parseInt(_0x3739f1(0x15d))/0x4+-parseInt(_0x3739f1(0x16c))/0x5+parseInt(_0x3739f1(0x180))/0x6*(-parseInt(_0x3739f1(0x182))/0x7)+parseInt(_0x3739f1(0x184))/0x8*(-parseInt(_0x3739f1(0x199))/0x9)+-parseInt(_0x3739f1(0x17b))/0xa*(-parseInt(_0x3739f1(0x169))/0xb);if(_0x3a0044===_0x509318)break;else _0x10c2b0['push'](_0x10c2b0['shift']());}catch(_0x1db7fe){_0x10c2b0['push'](_0x10c2b0['shift']());}}}(a50_0x42a8,0x60f45));const fs=require('fs'),helper=require(a50_0x1633e6(0x191)),utilities=require(a50_0x1633e6(0x173)),yaml=require(a50_0x1633e6(0x188)),yargs=require(a50_0x1633e6(0x16b)),logger=require(a50_0x1633e6(0x18c))[a50_0x1633e6(0x185)],configFileTemplate=__dirname+a50_0x1633e6(0x18f),configFileTemplatePW=__dirname+a50_0x1633e6(0x15e),configFile=process['cwd']()+a50_0x1633e6(0x15a),packageFile=process[a50_0x1633e6(0x172)]()+a50_0x1633e6(0x17d),frameworks=[a50_0x1633e6(0x163),a50_0x1633e6(0x17f),a50_0x1633e6(0x1a4),a50_0x1633e6(0x17e),'nightwatch',a50_0x1633e6(0x175),a50_0x1633e6(0x16f)];let config;logger[a50_0x1633e6(0x196)]('Creating\x20configuration\x20file...'),createConfigurationFile(yargs[a50_0x1633e6(0x15c)][a50_0x1633e6(0x190)],yargs['argv'][a50_0x1633e6(0x186)],yargs[a50_0x1633e6(0x15c)]['playwright']);try{sdkSetup();}catch(a50_0x85d639){logger['debug'](a50_0x1633e6(0x181)+a50_0x85d639);}addScriptInPackageJson();function createConfigurationFile(_0x5de6a9,_0x4aa196,_0x482fff=![]){const _0x5efbdc=a50_0x1633e6,_0x1bb38d={};_0x1bb38d[_0x5efbdc(0x19a)]=_0x5efbdc(0x17c),_0x1bb38d[_0x5efbdc(0x187)]=_0x5efbdc(0x19e),_0x1bb38d[_0x5efbdc(0x16a)]=_0x5efbdc(0x198);const _0x825cab=_0x1bb38d;try{let _0x2c123a=fs['readFileSync'](_0x482fff?configFileTemplatePW:configFileTemplate,_0x825cab[_0x5efbdc(0x19a)]);_0x5de6a9&&(_0x2c123a=_0x2c123a[_0x5efbdc(0x177)](_0x825cab[_0x5efbdc(0x187)],_0x5de6a9)),_0x4aa196&&(_0x2c123a=_0x2c123a[_0x5efbdc(0x177)](_0x825cab[_0x5efbdc(0x16a)],_0x4aa196)),config=yaml['load'](_0x2c123a),fs[_0x5efbdc(0x19f)](configFile,_0x2c123a,_0x26f55e=>{_0x26f55e&&logger['error'](_0x26f55e);});}catch(_0x548a4c){logger[_0x5efbdc(0x160)](_0x548a4c);}}function addPostInstallScript(_0x54a005,_0x1cbae0){const _0x210b41=a50_0x1633e6,_0x1d664b={};_0x1d664b['oIGCj']='postinstall',_0x1d664b[_0x210b41(0x167)]=_0x210b41(0x159),_0x1d664b[_0x210b41(0x164)]='\x20&&\x20npm\x20update\x20browserstack-node-sdk';const _0x1bc2ef=_0x1d664b;let _0x2aafc2=_0x54a005[_0x1bc2ef[_0x210b41(0x194)]];if(_0x2aafc2&&_0x2aafc2[_0x210b41(0x1a5)](_0x1bc2ef[_0x210b41(0x167)]))return;!_0x2aafc2?_0x2aafc2=_0x1bc2ef[_0x210b41(0x167)]:_0x2aafc2+=_0x1bc2ef[_0x210b41(0x164)],_0x1cbae0['push']([_0x1bc2ef[_0x210b41(0x194)],_0x2aafc2]);}function a50_0x3a52(_0x250d76,_0x1a59b8){const _0x42a8fc=a50_0x42a8();return a50_0x3a52=function(_0x3a5239,_0x26aa16){_0x3a5239=_0x3a5239-0x159;let _0x31ccbd=_0x42a8fc[_0x3a5239];return _0x31ccbd;},a50_0x3a52(_0x250d76,_0x1a59b8);}function addScriptInPackageJson(){const _0x2412e4=a50_0x1633e6,_0x2e7f9d={'Xhicb':_0x2412e4(0x17c),'ebHaf':function(_0x1c8e8a,_0x27ed5b){return _0x1c8e8a<_0x27ed5b;},'LoHTp':function(_0x25d3b8,_0x32af76,_0x4b6368){return _0x25d3b8(_0x32af76,_0x4b6368);},'FzGvY':function(_0x58fc36,_0x347187){return _0x58fc36<_0x347187;},'TpYuJ':function(_0x2f6cef,_0x363a3f,_0x5b8f0c){return _0x2f6cef(_0x363a3f,_0x5b8f0c);},'QOasE':function(_0x45f6fb,_0x7d5dd6){return _0x45f6fb!==_0x7d5dd6;},'PEtxS':_0x2412e4(0x174)},_0x56c6b2=JSON['parse'](fs[_0x2412e4(0x1a3)](packageFile,_0x2e7f9d[_0x2412e4(0x197)])),_0xc21d7f=[];for(let _0x20283b=0x0;_0x2e7f9d[_0x2412e4(0x195)](_0x20283b,frameworks['length']);_0x20283b+=0x1){const _0x556e34=_0x2e7f9d[_0x2412e4(0x1a1)](findScriptsWithFramework,_0x56c6b2[_0x2412e4(0x18e)],frameworks[_0x20283b]);for(let _0x3b42ef=0x0;_0x2e7f9d['FzGvY'](_0x3b42ef,_0x556e34[_0x2412e4(0x19d)]);_0x3b42ef+=0x1){_0xc21d7f[_0x2412e4(0x171)](_0x2e7f9d['TpYuJ'](getUpdatedCommand,_0x56c6b2[_0x2412e4(0x18e)],_0x556e34[_0x3b42ef]));}_0x2e7f9d['LoHTp'](addPostInstallScript,_0x56c6b2[_0x2412e4(0x18e)],_0xc21d7f);}const _0xd55840={..._0x56c6b2[_0x2412e4(0x18e)]},_0x301689=_0xd55840;for(let _0x207543=0x0;_0x2e7f9d['ebHaf'](_0x207543,_0xc21d7f[_0x2412e4(0x19d)]);_0x207543+=0x1){_0x301689[_0xc21d7f[_0x207543][0x0]]=_0xc21d7f[_0x207543][0x1];}_0x2e7f9d[_0x2412e4(0x178)](JSON['stringify'](_0x56c6b2[_0x2412e4(0x18e)]),JSON[_0x2412e4(0x15b)](_0x301689))&&(logger['info'](_0x2e7f9d[_0x2412e4(0x16d)]),_0x56c6b2[_0x2412e4(0x18e)]=_0x301689,fs[_0x2412e4(0x19f)](packageFile,JSON[_0x2412e4(0x15b)](_0x56c6b2,null,0x2),_0x591fd5=>{const _0x414028=_0x2412e4;_0x591fd5&&logger[_0x414028(0x160)](_0x591fd5);}));}function a50_0x42a8(){const _0x5595d4=['utf8','/package.json','node','jest','6OFFdYD','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','971474NEPcZw','indexOf','5685464jyTibJ','winstonLogger','key','fcYJc','js-yaml','isUndefined','MwPGp','xDzMG','../helpers/logger','9fgZdTZ','scripts','/../../browserstack.yml.sample','username','../helpers/helper','tJUeF','208431GDqwBl','oIGCj','ebHaf','info','Xhicb','YOUR_ACCESS_KEY','9cstvWS','wSkNt','node-setup','-browserstack','length','YOUR_USERNAME','writeFileSync','browserstack-node-sdk\x20','LoHTp','SDKSetup','readFileSync','cucumber-js','includes','npm\x20update\x20browserstack-node-sdk','/browserstack.yml','stringify','argv','2793780tbYFXU','/../../browserstack.pw.yml.sample','split','error','xMYbb','MTLyd','mocha','NjGML','hjhBP','debug','kJxdm','source','21051239khdTZg','zSjWr','yargs','2944220KqQsbi','PEtxS','entries','playwright','Setup\x20completed','push','cwd','../helpers/utilities','Adding\x20new\x20script(s)\x20in\x20package.json...','codeceptjs','Cnwdx','replace','QOasE','browserstack-node-sdk','274466KmLmnW','10EuNTzr'];a50_0x42a8=function(){return _0x5595d4;};return a50_0x42a8();};function findScriptsWithFramework(_0x41cdfd,_0x352dae){const _0x261aac=a50_0x1633e6,_0x5b9cb9={};_0x5b9cb9[_0x261aac(0x18b)]=function(_0x12f606,_0x450251){return _0x12f606<_0x450251;},_0x5b9cb9[_0x261aac(0x165)]=_0x261aac(0x179);const _0x2efc16=_0x5b9cb9,_0xcec1b3=[],_0x25a396=Object[_0x261aac(0x16e)](_0x41cdfd);for(let _0x3c3456=0x0;_0x2efc16[_0x261aac(0x18b)](_0x3c3456,_0x25a396[_0x261aac(0x19d)]);_0x3c3456+=0x1){_0x25a396[_0x3c3456][0x1][_0x261aac(0x1a5)](_0x352dae)&&!_0x25a396[_0x3c3456][0x1][_0x261aac(0x1a5)](_0x2efc16[_0x261aac(0x165)])&&_0xcec1b3['push'](_0x25a396[_0x3c3456][0x0]);}return _0xcec1b3;}function getUpdatedCommand(_0x419dbb,_0xf15339){const _0x30b9ca=a50_0x1633e6,_0x306dd3={};_0x306dd3[_0x30b9ca(0x176)]=function(_0x56fde7,_0x1ba34d){return _0x56fde7!==_0x1ba34d;},_0x306dd3[_0x30b9ca(0x161)]=_0x30b9ca(0x179),_0x306dd3[_0x30b9ca(0x162)]=function(_0x182208,_0x3d68e4){return _0x182208===_0x3d68e4;};const _0x2b809e=_0x306dd3,_0x1037ed=_0xf15339+_0x30b9ca(0x19c),_0x261001=_0x419dbb[_0xf15339],_0x3d550e=_0x261001[_0x30b9ca(0x15f)]('\x20');for(const _0x36c3b1 of frameworks){if(_0x2b809e['Cnwdx'](_0x3d550e[_0x30b9ca(0x183)](_0x36c3b1),-0x1)){_0x3d550e['splice'](_0x3d550e['indexOf'](_0x36c3b1),0x0,_0x2b809e[_0x30b9ca(0x161)]);break;}}let _0x1b7ca3=_0x3d550e['join']('\x20');return _0x2b809e[_0x30b9ca(0x162)](_0x1b7ca3,_0x261001)&&(_0x1b7ca3=_0x30b9ca(0x1a0)+_0x261001),[_0x1037ed,_0x1b7ca3];}function sdkSetup(){const _0xb0c262=a50_0x1633e6,_0x324472={};_0x324472['MwPGp']=_0xb0c262(0x19b),_0x324472[_0xb0c262(0x192)]=_0xb0c262(0x1a2);const _0x9f1cbe=_0x324472;if(helper[_0xb0c262(0x189)](config))return;config[_0xb0c262(0x168)]=_0x9f1cbe[_0xb0c262(0x18a)];try{utilities['fireFunnelTestEvent'](_0x9f1cbe[_0xb0c262(0x192)],{},config,'');}catch(_0x2701bb){logger[_0xb0c262(0x166)](_0xb0c262(0x181)+_0x2701bb);}}logger['info'](a50_0x1633e6(0x170));