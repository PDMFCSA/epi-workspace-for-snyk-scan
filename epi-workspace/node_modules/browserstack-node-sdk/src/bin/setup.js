#!/usr/bin/env node

const a48_0x2312e6=a48_0x5ad5;(function(_0x43e78e,_0x32af64){const _0x53eb33=a48_0x5ad5,_0x51640e=_0x43e78e();while(!![]){try{const _0x366d46=parseInt(_0x53eb33(0xa8))/0x1+parseInt(_0x53eb33(0x71))/0x2+parseInt(_0x53eb33(0x9f))/0x3+parseInt(_0x53eb33(0x7b))/0x4+parseInt(_0x53eb33(0x6e))/0x5*(parseInt(_0x53eb33(0x75))/0x6)+-parseInt(_0x53eb33(0x95))/0x7*(-parseInt(_0x53eb33(0x85))/0x8)+-parseInt(_0x53eb33(0xb3))/0x9*(parseInt(_0x53eb33(0x7d))/0xa);if(_0x366d46===_0x32af64)break;else _0x51640e['push'](_0x51640e['shift']());}catch(_0xce043e){_0x51640e['push'](_0x51640e['shift']());}}}(a48_0xb746,0x1afb8));const fs=require('fs'),helper=require('../helpers/helper'),utilities=require(a48_0x2312e6(0xae)),yaml=require('js-yaml'),yargs=require(a48_0x2312e6(0x99)),logger=require(a48_0x2312e6(0x98))[a48_0x2312e6(0x89)],configFileTemplate=__dirname+a48_0x2312e6(0xa0),configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process['cwd']()+a48_0x2312e6(0x78),packageFile=process['cwd']()+a48_0x2312e6(0xa9),frameworks=['mocha',a48_0x2312e6(0xaf),a48_0x2312e6(0x8e),a48_0x2312e6(0x80),a48_0x2312e6(0x90),a48_0x2312e6(0x94),a48_0x2312e6(0x9e)];let config;logger[a48_0x2312e6(0xaa)]('Creating\x20configuration\x20file...'),createConfigurationFile(yargs[a48_0x2312e6(0xb4)][a48_0x2312e6(0x72)],yargs[a48_0x2312e6(0xb4)][a48_0x2312e6(0x96)],yargs[a48_0x2312e6(0xb4)][a48_0x2312e6(0x9e)]);try{sdkSetup();}catch(a48_0x15ab23){logger[a48_0x2312e6(0x91)](a48_0x2312e6(0xa6)+a48_0x15ab23);}addScriptInPackageJson();function createConfigurationFile(_0xdeed1,_0x5d5464,_0x34d4fb=![]){const _0x2ae337=a48_0x2312e6,_0x2a1787={};_0x2a1787[_0x2ae337(0x6f)]='utf8',_0x2a1787[_0x2ae337(0xb0)]=_0x2ae337(0x9c),_0x2a1787[_0x2ae337(0x77)]=_0x2ae337(0xa1);const _0x150b69=_0x2a1787;try{let _0x31c094=fs['readFileSync'](_0x34d4fb?configFileTemplatePW:configFileTemplate,_0x150b69[_0x2ae337(0x6f)]);_0xdeed1&&(_0x31c094=_0x31c094[_0x2ae337(0x87)](_0x150b69[_0x2ae337(0xb0)],_0xdeed1)),_0x5d5464&&(_0x31c094=_0x31c094[_0x2ae337(0x87)](_0x150b69['kugdK'],_0x5d5464)),config=yaml['load'](_0x31c094),fs['writeFileSync'](configFile,_0x31c094,_0x3b66a4=>{_0x3b66a4&&logger['error'](_0x3b66a4);});}catch(_0x4b8daf){logger[_0x2ae337(0x73)](_0x4b8daf);}}function addPostInstallScript(_0x3f5981,_0x5199ab){const _0x4920c6=a48_0x2312e6,_0x43a1ed={};_0x43a1ed[_0x4920c6(0x7c)]=_0x4920c6(0x74),_0x43a1ed[_0x4920c6(0xb2)]=_0x4920c6(0xab),_0x43a1ed[_0x4920c6(0x7e)]=_0x4920c6(0x76);const _0x399078=_0x43a1ed;let _0x51e4e1=_0x3f5981[_0x399078[_0x4920c6(0x7c)]];if(_0x51e4e1&&_0x51e4e1['includes'](_0x399078[_0x4920c6(0xb2)]))return;!_0x51e4e1?_0x51e4e1=_0x399078[_0x4920c6(0xb2)]:_0x51e4e1+=_0x399078['MhKeN'],_0x5199ab[_0x4920c6(0x81)]([_0x399078[_0x4920c6(0x7c)],_0x51e4e1]);}function addScriptInPackageJson(){const _0x35c13e=a48_0x2312e6,_0x1741c4={'nojMl':_0x35c13e(0x8c),'NwnLy':function(_0x297a84,_0x46918e){return _0x297a84<_0x46918e;},'QkeXJ':function(_0x41c92c,_0x143223,_0x272df7){return _0x41c92c(_0x143223,_0x272df7);},'yXUYU':function(_0x32ddc4,_0x37c8b4,_0x572512){return _0x32ddc4(_0x37c8b4,_0x572512);},'VHvqL':function(_0x36f451,_0x2ec830){return _0x36f451<_0x2ec830;},'HGZbO':function(_0x3e0212,_0x15abc2){return _0x3e0212!==_0x15abc2;},'FfXqG':_0x35c13e(0xa4)},_0x54e35e=JSON['parse'](fs[_0x35c13e(0xa5)](packageFile,_0x1741c4['nojMl'])),_0x62ad96=[];for(let _0x1125d6=0x0;_0x1741c4[_0x35c13e(0x8b)](_0x1125d6,frameworks[_0x35c13e(0x7f)]);_0x1125d6+=0x1){const _0x31e164=_0x1741c4[_0x35c13e(0x88)](findScriptsWithFramework,_0x54e35e[_0x35c13e(0x6d)],frameworks[_0x1125d6]);for(let _0x38daa0=0x0;_0x1741c4[_0x35c13e(0x8b)](_0x38daa0,_0x31e164['length']);_0x38daa0+=0x1){_0x62ad96[_0x35c13e(0x81)](_0x1741c4[_0x35c13e(0x79)](getUpdatedCommand,_0x54e35e[_0x35c13e(0x6d)],_0x31e164[_0x38daa0]));}_0x1741c4[_0x35c13e(0x79)](addPostInstallScript,_0x54e35e[_0x35c13e(0x6d)],_0x62ad96);}const _0x57db57={..._0x54e35e[_0x35c13e(0x6d)]},_0x4a6687=_0x57db57;for(let _0xae427=0x0;_0x1741c4['VHvqL'](_0xae427,_0x62ad96['length']);_0xae427+=0x1){_0x4a6687[_0x62ad96[_0xae427][0x0]]=_0x62ad96[_0xae427][0x1];}_0x1741c4[_0x35c13e(0x8d)](JSON[_0x35c13e(0x86)](_0x54e35e['scripts']),JSON[_0x35c13e(0x86)](_0x4a6687))&&(logger[_0x35c13e(0xaa)](_0x1741c4[_0x35c13e(0xa7)]),_0x54e35e[_0x35c13e(0x6d)]=_0x4a6687,fs['writeFileSync'](packageFile,JSON[_0x35c13e(0x86)](_0x54e35e,null,0x2),_0x13a506=>{const _0x1cc982=_0x35c13e;_0x13a506&&logger[_0x1cc982(0x73)](_0x13a506);}));}function a48_0x5ad5(_0x46bf3e,_0x385876){const _0xb7462e=a48_0xb746();return a48_0x5ad5=function(_0x5ad573,_0xf59774){_0x5ad573=_0x5ad573-0x6d;let _0x17ad67=_0xb7462e[_0x5ad573];return _0x17ad67;},a48_0x5ad5(_0x46bf3e,_0x385876);};function findScriptsWithFramework(_0x6fe7ac,_0x5c70f1){const _0x25d181=a48_0x2312e6,_0x3639d4={};_0x3639d4[_0x25d181(0x9d)]=function(_0x3e9837,_0x4b6493){return _0x3e9837<_0x4b6493;},_0x3639d4[_0x25d181(0xad)]=_0x25d181(0xa3);const _0x57cf7f=_0x3639d4,_0x395ad6=[],_0x5b9513=Object['entries'](_0x6fe7ac);for(let _0x2f0abe=0x0;_0x57cf7f[_0x25d181(0x9d)](_0x2f0abe,_0x5b9513[_0x25d181(0x7f)]);_0x2f0abe+=0x1){_0x5b9513[_0x2f0abe][0x1]['includes'](_0x5c70f1)&&!_0x5b9513[_0x2f0abe][0x1]['includes'](_0x57cf7f[_0x25d181(0xad)])&&_0x395ad6['push'](_0x5b9513[_0x2f0abe][0x0]);}return _0x395ad6;}function a48_0xb746(){const _0x303ac9=['NwnLy','utf8','HGZbO','cucumber-js','OINTn','nightwatch','debug','qjXOL','jODss','codeceptjs','770sjzmru','key','WoKte','../helpers/logger','yargs','isUndefined','Setup\x20completed','YOUR_USERNAME','qQRfI','playwright','512229VUnhpB','/../../browserstack.yml.sample','YOUR_ACCESS_KEY','fireFunnelTestEvent','browserstack-node-sdk','Adding\x20new\x20script(s)\x20in\x20package.json...','readFileSync','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','FfXqG','204877PbeACF','/package.json','info','npm\x20update\x20browserstack-node-sdk','join','vNoUQ','../helpers/utilities','jest','qyWYz','splice','pOQvc','31617kKjqxU','argv','scripts','224605gwddia','geuwT','indexOf','390500wApeHr','username','error','postinstall','18UYWtQS','\x20&&\x20npm\x20update\x20browserstack-node-sdk','kugdK','/browserstack.yml','yXUYU','-browserstack','723936TvpqFR','ZhHSF','2290nzrAHn','MhKeN','length','node','push','source','browserstack-node-sdk\x20','jUuYk','2064CwBMUb','stringify','replace','QkeXJ','winstonLogger','split'];a48_0xb746=function(){return _0x303ac9;};return a48_0xb746();}function getUpdatedCommand(_0x1cf9bd,_0x47990f){const _0x3c5b47=a48_0x2312e6,_0x263887={};_0x263887['jODss']=function(_0x2f1a07,_0x584f92){return _0x2f1a07!==_0x584f92;},_0x263887['OINTn']=_0x3c5b47(0xa3),_0x263887['qjXOL']=function(_0x2aa351,_0x3700cf){return _0x2aa351===_0x3700cf;};const _0x3f3325=_0x263887,_0x1505d0=_0x47990f+_0x3c5b47(0x7a),_0x4e9249=_0x1cf9bd[_0x47990f],_0x20e918=_0x4e9249[_0x3c5b47(0x8a)]('\x20');for(const _0x14c5ca of frameworks){if(_0x3f3325[_0x3c5b47(0x93)](_0x20e918[_0x3c5b47(0x70)](_0x14c5ca),-0x1)){_0x20e918[_0x3c5b47(0xb1)](_0x20e918[_0x3c5b47(0x70)](_0x14c5ca),0x0,_0x3f3325[_0x3c5b47(0x8f)]);break;}}let _0x9b34c9=_0x20e918[_0x3c5b47(0xac)]('\x20');return _0x3f3325[_0x3c5b47(0x92)](_0x9b34c9,_0x4e9249)&&(_0x9b34c9=_0x3c5b47(0x83)+_0x4e9249),[_0x1505d0,_0x9b34c9];}function sdkSetup(){const _0x1e4231=a48_0x2312e6,_0x1d20c7={};_0x1d20c7[_0x1e4231(0x84)]='node-setup',_0x1d20c7['WoKte']='SDKSetup';const _0x402e94=_0x1d20c7;if(helper[_0x1e4231(0x9a)](config))return;config[_0x1e4231(0x82)]=_0x402e94[_0x1e4231(0x84)];try{utilities[_0x1e4231(0xa2)](_0x402e94[_0x1e4231(0x97)],{},config,'');}catch(_0x5ebef7){logger['debug'](_0x1e4231(0xa6)+_0x5ebef7);}}logger[a48_0x2312e6(0xaa)](a48_0x2312e6(0x9b));