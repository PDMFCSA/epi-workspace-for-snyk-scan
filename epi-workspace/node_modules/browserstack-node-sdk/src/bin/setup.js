#!/usr/bin/env node

const a48_0x5e8d76=a48_0x443e;(function(_0x15b6a,_0x2020d3){const _0x51e76d=a48_0x443e,_0x3e3401=_0x15b6a();while(!![]){try{const _0x342227=-parseInt(_0x51e76d(0x13f))/0x1*(-parseInt(_0x51e76d(0x13c))/0x2)+parseInt(_0x51e76d(0x145))/0x3*(parseInt(_0x51e76d(0x11f))/0x4)+parseInt(_0x51e76d(0x13a))/0x5*(-parseInt(_0x51e76d(0x120))/0x6)+-parseInt(_0x51e76d(0x112))/0x7*(-parseInt(_0x51e76d(0x121))/0x8)+-parseInt(_0x51e76d(0xfb))/0x9*(-parseInt(_0x51e76d(0x127))/0xa)+-parseInt(_0x51e76d(0x123))/0xb*(parseInt(_0x51e76d(0x10e))/0xc)+parseInt(_0x51e76d(0x128))/0xd*(-parseInt(_0x51e76d(0x139))/0xe);if(_0x342227===_0x2020d3)break;else _0x3e3401['push'](_0x3e3401['shift']());}catch(_0x53ff75){_0x3e3401['push'](_0x3e3401['shift']());}}}(a48_0x4cb4,0x34dcb));const fs=require('fs'),helper=require(a48_0x5e8d76(0x12f)),utilities=require(a48_0x5e8d76(0x126)),yaml=require('js-yaml'),yargs=require(a48_0x5e8d76(0x130)),logger=require('../helpers/logger')[a48_0x5e8d76(0x134)],configFileTemplate=__dirname+a48_0x5e8d76(0x129),configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process[a48_0x5e8d76(0x12b)]()+a48_0x5e8d76(0x11c),packageFile=process[a48_0x5e8d76(0x12b)]()+a48_0x5e8d76(0x103),frameworks=[a48_0x5e8d76(0x11b),a48_0x5e8d76(0x12d),a48_0x5e8d76(0x106),a48_0x5e8d76(0x13d),a48_0x5e8d76(0x11a),a48_0x5e8d76(0x10f),'playwright'];let config;logger[a48_0x5e8d76(0x12e)](a48_0x5e8d76(0x10d)),createConfigurationFile(yargs[a48_0x5e8d76(0x12c)][a48_0x5e8d76(0x115)],yargs[a48_0x5e8d76(0x12c)][a48_0x5e8d76(0x125)],yargs[a48_0x5e8d76(0x12c)][a48_0x5e8d76(0x13e)]);function a48_0x4cb4(){const _0x383b8=['username','indexOf','replace','push','browserstack-node-sdk','nightwatch','mocha','/browserstack.yml','source','GmZmL','52khMoLd','1130364MMOBZU','25352PaLXoA','uEVWJ','187UgdDFv','HpZRF','key','../helpers/utilities','50OOBUcL','13qnSLpz','/../../browserstack.yml.sample','irqxT','cwd','argv','jest','info','../helpers/helper','yargs','fireFunnelTestEvent','OcsPv','parse','winstonLogger','debug','Cafcv','uTkZO','pEazq','5424664lgefvt','5gdvyOz','BIEVz','300952vjJiHP','node','playwright','1ilsWZm','Dmxck','NVVEg','sQghI','split','scripts','51621gXASxR','utf8','221661OQjHiO','length','vbpyc','entries','stringify','splice','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','OACpr','/package.json','SDKSetup','includes','cucumber-js','node-setup','browserstack-node-sdk\x20','iJuei','error','writeFileSync','readFileSync','Creating\x20configuration\x20file...','78036EGTjDN','codeceptjs','Adding\x20new\x20script(s)\x20in\x20package.json...','cmDLh','896XRWBNv','npm\x20update\x20browserstack-node-sdk','ryPXR'];a48_0x4cb4=function(){return _0x383b8;};return a48_0x4cb4();}try{sdkSetup();}catch(a48_0x421e84){logger[a48_0x5e8d76(0x135)](a48_0x5e8d76(0x101)+a48_0x421e84);}function a48_0x443e(_0x205784,_0x2c4349){const _0x4cb4b5=a48_0x4cb4();return a48_0x443e=function(_0x443e35,_0xe72b6a){_0x443e35=_0x443e35-0xfa;let _0x397a28=_0x4cb4b5[_0x443e35];return _0x397a28;},a48_0x443e(_0x205784,_0x2c4349);}addScriptInPackageJson();function createConfigurationFile(_0x13861a,_0x1c22a8,_0x154964=![]){const _0x274ee2=a48_0x5e8d76,_0x27cee8={};_0x27cee8['OACpr']='utf8',_0x27cee8[_0x274ee2(0x111)]='YOUR_USERNAME',_0x27cee8['RxinS']='YOUR_ACCESS_KEY';const _0x126ac5=_0x27cee8;try{let _0x1d3064=fs[_0x274ee2(0x10c)](_0x154964?configFileTemplatePW:configFileTemplate,_0x126ac5[_0x274ee2(0x102)]);_0x13861a&&(_0x1d3064=_0x1d3064[_0x274ee2(0x117)](_0x126ac5[_0x274ee2(0x111)],_0x13861a)),_0x1c22a8&&(_0x1d3064=_0x1d3064[_0x274ee2(0x117)](_0x126ac5['RxinS'],_0x1c22a8)),config=yaml['load'](_0x1d3064),fs[_0x274ee2(0x10b)](configFile,_0x1d3064,_0x519a2d=>{const _0xd7ee6c=_0x274ee2;_0x519a2d&&logger[_0xd7ee6c(0x10a)](_0x519a2d);});}catch(_0x1b0f81){logger[_0x274ee2(0x10a)](_0x1b0f81);}}function addPostInstallScript(_0x169b11,_0x3433da){const _0x11cf1f=a48_0x5e8d76,_0x17a634={};_0x17a634[_0x11cf1f(0x122)]='postinstall',_0x17a634['BIEVz']=_0x11cf1f(0x113),_0x17a634[_0x11cf1f(0x109)]='\x20&&\x20npm\x20update\x20browserstack-node-sdk';const _0x5041a6=_0x17a634;let _0x2e1e05=_0x169b11[_0x5041a6[_0x11cf1f(0x122)]];if(_0x2e1e05&&_0x2e1e05['includes'](_0x5041a6[_0x11cf1f(0x13b)]))return;!_0x2e1e05?_0x2e1e05=_0x5041a6['BIEVz']:_0x2e1e05+=_0x5041a6['iJuei'],_0x3433da[_0x11cf1f(0x118)]([_0x5041a6[_0x11cf1f(0x122)],_0x2e1e05]);}function addScriptInPackageJson(){const _0x42435a=a48_0x5e8d76,_0x46950d={'Dmxck':_0x42435a(0xfa),'uTkZO':function(_0x1ad17e,_0x8997b3){return _0x1ad17e<_0x8997b3;},'zmIOx':function(_0xfea161,_0x15c242,_0x2dd811){return _0xfea161(_0x15c242,_0x2dd811);},'irqxT':function(_0x3a863d,_0x2b353e){return _0x3a863d<_0x2b353e;},'OcsPv':function(_0x554862,_0x381665,_0x433d3a){return _0x554862(_0x381665,_0x433d3a);},'NVVEg':function(_0x395303,_0x358cb4){return _0x395303<_0x358cb4;},'HpZRF':function(_0x210970,_0x205b8a){return _0x210970!==_0x205b8a;},'yOARl':_0x42435a(0x110)},_0x57de6b=JSON[_0x42435a(0x133)](fs['readFileSync'](packageFile,_0x46950d[_0x42435a(0x140)])),_0x1e4a95=[];for(let _0x116269=0x0;_0x46950d[_0x42435a(0x137)](_0x116269,frameworks[_0x42435a(0xfc)]);_0x116269+=0x1){const _0x580f5b=_0x46950d['zmIOx'](findScriptsWithFramework,_0x57de6b[_0x42435a(0x144)],frameworks[_0x116269]);for(let _0x1ff3fb=0x0;_0x46950d[_0x42435a(0x12a)](_0x1ff3fb,_0x580f5b[_0x42435a(0xfc)]);_0x1ff3fb+=0x1){_0x1e4a95[_0x42435a(0x118)](_0x46950d[_0x42435a(0x132)](getUpdatedCommand,_0x57de6b[_0x42435a(0x144)],_0x580f5b[_0x1ff3fb]));}_0x46950d[_0x42435a(0x132)](addPostInstallScript,_0x57de6b[_0x42435a(0x144)],_0x1e4a95);}const _0x2ef594={..._0x57de6b[_0x42435a(0x144)]},_0x4b6ac0=_0x2ef594;for(let _0x6a6424=0x0;_0x46950d[_0x42435a(0x141)](_0x6a6424,_0x1e4a95[_0x42435a(0xfc)]);_0x6a6424+=0x1){_0x4b6ac0[_0x1e4a95[_0x6a6424][0x0]]=_0x1e4a95[_0x6a6424][0x1];}_0x46950d[_0x42435a(0x124)](JSON[_0x42435a(0xff)](_0x57de6b[_0x42435a(0x144)]),JSON['stringify'](_0x4b6ac0))&&(logger[_0x42435a(0x12e)](_0x46950d['yOARl']),_0x57de6b[_0x42435a(0x144)]=_0x4b6ac0,fs[_0x42435a(0x10b)](packageFile,JSON[_0x42435a(0xff)](_0x57de6b,null,0x2),_0x5b4a70=>{const _0x934cae=_0x42435a;_0x5b4a70&&logger[_0x934cae(0x10a)](_0x5b4a70);}));};function findScriptsWithFramework(_0x2df1b9,_0x37b3ad){const _0x11add7=a48_0x5e8d76,_0x35db3b={};_0x35db3b[_0x11add7(0x114)]=function(_0x4bbb75,_0x457855){return _0x4bbb75<_0x457855;},_0x35db3b['sQghI']='browserstack-node-sdk';const _0x3b7f7a=_0x35db3b,_0x2b7a05=[],_0x14ebc8=Object[_0x11add7(0xfe)](_0x2df1b9);for(let _0x446be9=0x0;_0x3b7f7a['ryPXR'](_0x446be9,_0x14ebc8[_0x11add7(0xfc)]);_0x446be9+=0x1){_0x14ebc8[_0x446be9][0x1][_0x11add7(0x105)](_0x37b3ad)&&!_0x14ebc8[_0x446be9][0x1][_0x11add7(0x105)](_0x3b7f7a[_0x11add7(0x142)])&&_0x2b7a05[_0x11add7(0x118)](_0x14ebc8[_0x446be9][0x0]);}return _0x2b7a05;}function getUpdatedCommand(_0x45c36a,_0x5d9d91){const _0x595b79=a48_0x5e8d76,_0x4bf6bc={};_0x4bf6bc[_0x595b79(0x11e)]=function(_0x7f4df5,_0x399101){return _0x7f4df5!==_0x399101;},_0x4bf6bc['LpTQQ']=_0x595b79(0x119),_0x4bf6bc[_0x595b79(0x136)]=function(_0x4944cb,_0x5f2c22){return _0x4944cb===_0x5f2c22;};const _0x12024c=_0x4bf6bc,_0x2c2b2a=_0x5d9d91+'-browserstack',_0x1cb518=_0x45c36a[_0x5d9d91],_0xf5eeb6=_0x1cb518[_0x595b79(0x143)]('\x20');for(const _0x187802 of frameworks){if(_0x12024c[_0x595b79(0x11e)](_0xf5eeb6[_0x595b79(0x116)](_0x187802),-0x1)){_0xf5eeb6[_0x595b79(0x100)](_0xf5eeb6[_0x595b79(0x116)](_0x187802),0x0,_0x12024c['LpTQQ']);break;}}let _0x4d8c57=_0xf5eeb6['join']('\x20');return _0x12024c[_0x595b79(0x136)](_0x4d8c57,_0x1cb518)&&(_0x4d8c57=_0x595b79(0x108)+_0x1cb518),[_0x2c2b2a,_0x4d8c57];}function sdkSetup(){const _0x3b68cf=a48_0x5e8d76,_0x22f17b={};_0x22f17b[_0x3b68cf(0xfd)]=_0x3b68cf(0x107),_0x22f17b[_0x3b68cf(0x138)]=_0x3b68cf(0x104);const _0x569ce9=_0x22f17b;if(helper['isUndefined'](config))return;config[_0x3b68cf(0x11d)]=_0x569ce9[_0x3b68cf(0xfd)];try{utilities[_0x3b68cf(0x131)](_0x569ce9[_0x3b68cf(0x138)],{},config,'');}catch(_0x48eb9a){logger[_0x3b68cf(0x135)](_0x3b68cf(0x101)+_0x48eb9a);}}logger[a48_0x5e8d76(0x12e)]('Setup\x20completed');