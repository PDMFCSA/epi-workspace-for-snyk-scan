#!/usr/bin/env node

const a45_0x460215=a45_0x16c4;function a45_0x16c4(_0xa03959,_0x576d62){const _0x1796e7=a45_0x1796();return a45_0x16c4=function(_0x16c497,_0x47785a){_0x16c497=_0x16c497-0x124;let _0x5afbf1=_0x1796e7[_0x16c497];return _0x5afbf1;},a45_0x16c4(_0xa03959,_0x576d62);}(function(_0x2186c3,_0x238858){const _0x23aa06=a45_0x16c4,_0x594137=_0x2186c3();while(!![]){try{const _0x21c6df=parseInt(_0x23aa06(0x15f))/0x1*(parseInt(_0x23aa06(0x147))/0x2)+parseInt(_0x23aa06(0x156))/0x3*(parseInt(_0x23aa06(0x149))/0x4)+-parseInt(_0x23aa06(0x13b))/0x5+-parseInt(_0x23aa06(0x160))/0x6+parseInt(_0x23aa06(0x15e))/0x7+-parseInt(_0x23aa06(0x148))/0x8*(-parseInt(_0x23aa06(0x127))/0x9)+parseInt(_0x23aa06(0x131))/0xa*(-parseInt(_0x23aa06(0x126))/0xb);if(_0x21c6df===_0x238858)break;else _0x594137['push'](_0x594137['shift']());}catch(_0x160f76){_0x594137['push'](_0x594137['shift']());}}}(a45_0x1796,0xd1d03));function a45_0x1796(){const _0x548c08=['nightwatch','mSZjF','YOUR_ACCESS_KEY','utf8','includes','cucumber-js','IXYYy','dItcp','Adding\x20new\x20script(s)\x20in\x20package.json...','53666ywXlVC','8naFHth','4NeqpXn','../helpers/helper','postinstall','yargs','fireFunnelTestEvent','load','replace','readFileSync','XBoQH','../helpers/logger','/package.json','winstonLogger','push','1925943qdcYTy','source','indexOf','split','\x20&&\x20npm\x20update\x20browserstack-node-sdk','username','HgjMU','ZBkoF','7209692uzczbQ','7MnlDKM','5731740qVOCrW','SDKSetup','mocha','ZxtLx','join','codeceptjs','/../../browserstack.pw.yml.sample','splice','npm\x20update\x20browserstack-node-sdk','../helpers/utilities','TEHEy','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','WzoMc','error','Creating\x20configuration\x20file...','playwright','99ELpRdH','13010211mfQsbr','CjVAH','parse','pfOZB','cwd','scripts','browserstack-node-sdk','PZmvq','urVUw','writeFileSync','586200jqMxpq','Setup\x20completed','entries','stringify','browserstack-node-sdk\x20','aUUPn','jest','bcJBK','node','/browserstack.yml','4815410DoXCGW','length','argv'];a45_0x1796=function(){return _0x548c08;};return a45_0x1796();}const fs=require('fs'),helper=require(a45_0x460215(0x14a)),utilities=require(a45_0x460215(0x169)),yaml=require('js-yaml'),yargs=require(a45_0x460215(0x14c)),logger=require(a45_0x460215(0x152))[a45_0x460215(0x154)],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+a45_0x460215(0x166),configFile=process[a45_0x460215(0x12b)]()+a45_0x460215(0x13a),packageFile=process[a45_0x460215(0x12b)]()+a45_0x460215(0x153),frameworks=[a45_0x460215(0x162),a45_0x460215(0x137),a45_0x460215(0x143),a45_0x460215(0x139),a45_0x460215(0x13e),a45_0x460215(0x165),a45_0x460215(0x125)];let config;logger['info'](a45_0x460215(0x124)),createConfigurationFile(yargs[a45_0x460215(0x13d)][a45_0x460215(0x15b)],yargs['argv']['key'],yargs['argv'][a45_0x460215(0x125)]);try{sdkSetup();}catch(a45_0x4d20c5){logger['debug'](a45_0x460215(0x16b)+a45_0x4d20c5);}addScriptInPackageJson();function createConfigurationFile(_0x29f748,_0x146f21,_0x43b430=![]){const _0x4f2b5b=a45_0x460215,_0x9f6ef5={};_0x9f6ef5['ZBkoF']='utf8',_0x9f6ef5['aUUPn']='YOUR_USERNAME',_0x9f6ef5[_0x4f2b5b(0x16a)]=_0x4f2b5b(0x140);const _0x2fc6fe=_0x9f6ef5;try{let _0xff7a58=fs['readFileSync'](_0x43b430?configFileTemplatePW:configFileTemplate,_0x2fc6fe[_0x4f2b5b(0x15d)]);_0x29f748&&(_0xff7a58=_0xff7a58[_0x4f2b5b(0x14f)](_0x2fc6fe[_0x4f2b5b(0x136)],_0x29f748)),_0x146f21&&(_0xff7a58=_0xff7a58[_0x4f2b5b(0x14f)](_0x2fc6fe[_0x4f2b5b(0x16a)],_0x146f21)),config=yaml[_0x4f2b5b(0x14e)](_0xff7a58),fs[_0x4f2b5b(0x130)](configFile,_0xff7a58,_0x1b1520=>{const _0x231e3e=_0x4f2b5b;_0x1b1520&&logger[_0x231e3e(0x16d)](_0x1b1520);});}catch(_0x74f60f){logger[_0x4f2b5b(0x16d)](_0x74f60f);}}function addPostInstallScript(_0x33e1d3,_0x120b63){const _0x325936=a45_0x460215,_0x208737={};_0x208737[_0x325936(0x12e)]=_0x325936(0x14b),_0x208737[_0x325936(0x151)]=_0x325936(0x168),_0x208737[_0x325936(0x144)]=_0x325936(0x15a);const _0x617361=_0x208737;let _0x30c85f=_0x33e1d3[_0x617361[_0x325936(0x12e)]];if(_0x30c85f&&_0x30c85f[_0x325936(0x142)](_0x617361['XBoQH']))return;!_0x30c85f?_0x30c85f=_0x617361[_0x325936(0x151)]:_0x30c85f+=_0x617361[_0x325936(0x144)],_0x120b63[_0x325936(0x155)]([_0x617361[_0x325936(0x12e)],_0x30c85f]);}function addScriptInPackageJson(){const _0x2a51d4=a45_0x460215,_0x35665e={'rHEcW':_0x2a51d4(0x141),'dItcp':function(_0xdb76fc,_0xcc14fe){return _0xdb76fc<_0xcc14fe;},'CjVAH':function(_0x4728ab,_0x366566,_0x4e0a67){return _0x4728ab(_0x366566,_0x4e0a67);},'ZxtLx':function(_0x186bb6,_0x3f40e8){return _0x186bb6!==_0x3f40e8;},'CnETn':_0x2a51d4(0x146)},_0x11d2e7=JSON[_0x2a51d4(0x129)](fs[_0x2a51d4(0x150)](packageFile,_0x35665e['rHEcW'])),_0x1b511c=[];for(let _0x505abc=0x0;_0x35665e['dItcp'](_0x505abc,frameworks['length']);_0x505abc+=0x1){const _0x50c434=_0x35665e['CjVAH'](findScriptsWithFramework,_0x11d2e7[_0x2a51d4(0x12c)],frameworks[_0x505abc]);for(let _0x5f1e74=0x0;_0x35665e[_0x2a51d4(0x145)](_0x5f1e74,_0x50c434[_0x2a51d4(0x13c)]);_0x5f1e74+=0x1){_0x1b511c[_0x2a51d4(0x155)](_0x35665e[_0x2a51d4(0x128)](getUpdatedCommand,_0x11d2e7[_0x2a51d4(0x12c)],_0x50c434[_0x5f1e74]));}_0x35665e[_0x2a51d4(0x128)](addPostInstallScript,_0x11d2e7['scripts'],_0x1b511c);}const _0x58fa9b={..._0x11d2e7[_0x2a51d4(0x12c)]},_0x2a3641=_0x58fa9b;for(let _0xc485cd=0x0;_0x35665e[_0x2a51d4(0x145)](_0xc485cd,_0x1b511c[_0x2a51d4(0x13c)]);_0xc485cd+=0x1){_0x2a3641[_0x1b511c[_0xc485cd][0x0]]=_0x1b511c[_0xc485cd][0x1];}_0x35665e[_0x2a51d4(0x163)](JSON[_0x2a51d4(0x134)](_0x11d2e7[_0x2a51d4(0x12c)]),JSON['stringify'](_0x2a3641))&&(logger['info'](_0x35665e['CnETn']),_0x11d2e7[_0x2a51d4(0x12c)]=_0x2a3641,fs[_0x2a51d4(0x130)](packageFile,JSON[_0x2a51d4(0x134)](_0x11d2e7,null,0x2),_0x262388=>{const _0x450013=_0x2a51d4;_0x262388&&logger[_0x450013(0x16d)](_0x262388);}));};function findScriptsWithFramework(_0x1e63b9,_0x3f4fa0){const _0x5d12de=a45_0x460215,_0x3da107={};_0x3da107[_0x5d12de(0x13f)]=function(_0x17a6a8,_0xbd897c){return _0x17a6a8<_0xbd897c;},_0x3da107[_0x5d12de(0x138)]=_0x5d12de(0x12d);const _0x37e54a=_0x3da107,_0x35eea7=[],_0x45a955=Object[_0x5d12de(0x133)](_0x1e63b9);for(let _0x1ddc81=0x0;_0x37e54a[_0x5d12de(0x13f)](_0x1ddc81,_0x45a955[_0x5d12de(0x13c)]);_0x1ddc81+=0x1){_0x45a955[_0x1ddc81][0x1][_0x5d12de(0x142)](_0x3f4fa0)&&!_0x45a955[_0x1ddc81][0x1][_0x5d12de(0x142)](_0x37e54a['bcJBK'])&&_0x35eea7[_0x5d12de(0x155)](_0x45a955[_0x1ddc81][0x0]);}return _0x35eea7;}function getUpdatedCommand(_0x4e20d8,_0x1bcf05){const _0x2d20d9=a45_0x460215,_0x1462df={};_0x1462df['qJzbZ']=function(_0x1f04cf,_0x1c19a7){return _0x1f04cf!==_0x1c19a7;},_0x1462df[_0x2d20d9(0x16c)]=_0x2d20d9(0x12d),_0x1462df[_0x2d20d9(0x12f)]=function(_0x42a1c2,_0x4caee1){return _0x42a1c2===_0x4caee1;};const _0x45ec0c=_0x1462df,_0x273d37=_0x1bcf05+'-browserstack',_0x687f0e=_0x4e20d8[_0x1bcf05],_0x34cc27=_0x687f0e[_0x2d20d9(0x159)]('\x20');for(const _0x5dc8b0 of frameworks){if(_0x45ec0c['qJzbZ'](_0x34cc27[_0x2d20d9(0x158)](_0x5dc8b0),-0x1)){_0x34cc27[_0x2d20d9(0x167)](_0x34cc27[_0x2d20d9(0x158)](_0x5dc8b0),0x0,_0x45ec0c[_0x2d20d9(0x16c)]);break;}}let _0x841aaa=_0x34cc27[_0x2d20d9(0x164)]('\x20');return _0x45ec0c['urVUw'](_0x841aaa,_0x687f0e)&&(_0x841aaa=_0x2d20d9(0x135)+_0x687f0e),[_0x273d37,_0x841aaa];}function sdkSetup(){const _0x5b99f9=a45_0x460215,_0x374085={};_0x374085[_0x5b99f9(0x12a)]='node-setup',_0x374085[_0x5b99f9(0x15c)]=_0x5b99f9(0x161);const _0x58c7c7=_0x374085;if(helper['isUndefined'](config))return;config[_0x5b99f9(0x157)]=_0x58c7c7[_0x5b99f9(0x12a)];try{utilities[_0x5b99f9(0x14d)](_0x58c7c7[_0x5b99f9(0x15c)],{},config,'');}catch(_0x5bdb1e){logger['debug'](_0x5b99f9(0x16b)+_0x5bdb1e);}}logger['info'](a45_0x460215(0x132));