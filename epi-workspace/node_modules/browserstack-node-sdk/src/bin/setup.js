#!/usr/bin/env node

function a49_0x2b80(){const _0x29f996=['jest','8283kfqTtU','6cbljPA','cwd','dSmik','Creating\x20configuration\x20file...','/../../browserstack.yml.sample','Setup\x20completed','entries','username','4068281kTKSYN','jRzEf','error','4Wgcsor','readFileSync','TwLCh','YOUR_USERNAME','load','YTqTT','UKesp','BXanl','kbtXE','node-setup','../helpers/logger','NHoAq','ThPxW','join','utf8','isUndefined','3454845qUgGkm','zlGtu','parse','info','3507960iTFQeL','key','length','postinstall','split','SDKSetup','\x20&&\x20npm\x20update\x20browserstack-node-sdk','cucumber-js','source','Vqkui','npm\x20update\x20browserstack-node-sdk','nightwatch','stringify','-browserstack','hRjRp','indexOf','MYFJq','/package.json','uVaMX','browserstack-node-sdk','includes','playwright','mocha','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','jNtsF','CIunH','debug','replace','argv','push','../helpers/helper','writeFileSync','Adding\x20new\x20script(s)\x20in\x20package.json...','scripts','15457590DKFaUO','1472594HTDtWQ','splice','../helpers/utilities','802065tYLjwo'];a49_0x2b80=function(){return _0x29f996;};return a49_0x2b80();}const a49_0x160a81=a49_0x2c0e;function a49_0x2c0e(_0x3b1a4d,_0x506b72){const _0x2b80e3=a49_0x2b80();return a49_0x2c0e=function(_0x2c0e9a,_0x54c105){_0x2c0e9a=_0x2c0e9a-0x182;let _0x38bafa=_0x2b80e3[_0x2c0e9a];return _0x38bafa;},a49_0x2c0e(_0x3b1a4d,_0x506b72);}(function(_0x230c2e,_0x2edd48){const _0x2b0934=a49_0x2c0e,_0x2b81c4=_0x230c2e();while(!![]){try{const _0x33d5d5=-parseInt(_0x2b0934(0x198))/0x1+-parseInt(_0x2b0934(0x195))/0x2+-parseInt(_0x2b0934(0x19a))/0x3*(-parseInt(_0x2b0934(0x1a6))/0x4)+-parseInt(_0x2b0934(0x1b6))/0x5+-parseInt(_0x2b0934(0x19b))/0x6*(-parseInt(_0x2b0934(0x1a3))/0x7)+parseInt(_0x2b0934(0x1ba))/0x8+parseInt(_0x2b0934(0x194))/0x9;if(_0x33d5d5===_0x2edd48)break;else _0x2b81c4['push'](_0x2b81c4['shift']());}catch(_0x322dbf){_0x2b81c4['push'](_0x2b81c4['shift']());}}}(a49_0x2b80,0x7ca9a));const fs=require('fs'),helper=require(a49_0x160a81(0x190)),utilities=require(a49_0x160a81(0x197)),yaml=require('js-yaml'),yargs=require('yargs'),logger=require(a49_0x160a81(0x1b0))['winstonLogger'],configFileTemplate=__dirname+a49_0x160a81(0x19f),configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process[a49_0x160a81(0x19c)]()+'/browserstack.yml',packageFile=process[a49_0x160a81(0x19c)]()+a49_0x160a81(0x183),frameworks=[a49_0x160a81(0x188),a49_0x160a81(0x199),a49_0x160a81(0x1c1),'node',a49_0x160a81(0x1c5),'codeceptjs',a49_0x160a81(0x187)];let config;logger['info'](a49_0x160a81(0x19e)),createConfigurationFile(yargs[a49_0x160a81(0x18e)][a49_0x160a81(0x1a2)],yargs[a49_0x160a81(0x18e)][a49_0x160a81(0x1bb)],yargs['argv'][a49_0x160a81(0x187)]);try{sdkSetup();}catch(a49_0x3696fd){logger[a49_0x160a81(0x18c)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a49_0x3696fd);}addScriptInPackageJson();function createConfigurationFile(_0x586cc9,_0x28ef4a,_0x25a7af=![]){const _0x3e9ecd=a49_0x160a81,_0x3ae7a7={};_0x3ae7a7['kbtXE']=_0x3e9ecd(0x1b4),_0x3ae7a7['vPADI']=_0x3e9ecd(0x1a9),_0x3ae7a7[_0x3e9ecd(0x1a4)]='YOUR_ACCESS_KEY';const _0x42e111=_0x3ae7a7;try{let _0xaa1e23=fs['readFileSync'](_0x25a7af?configFileTemplatePW:configFileTemplate,_0x42e111[_0x3e9ecd(0x1ae)]);_0x586cc9&&(_0xaa1e23=_0xaa1e23[_0x3e9ecd(0x18d)](_0x42e111['vPADI'],_0x586cc9)),_0x28ef4a&&(_0xaa1e23=_0xaa1e23[_0x3e9ecd(0x18d)](_0x42e111[_0x3e9ecd(0x1a4)],_0x28ef4a)),config=yaml[_0x3e9ecd(0x1aa)](_0xaa1e23),fs[_0x3e9ecd(0x191)](configFile,_0xaa1e23,_0x32188e=>{_0x32188e&&logger['error'](_0x32188e);});}catch(_0x163c52){logger[_0x3e9ecd(0x1a5)](_0x163c52);}}function addPostInstallScript(_0x395910,_0x4097d2){const _0x3caf8d=a49_0x160a81,_0x2bee67={};_0x2bee67[_0x3caf8d(0x1ab)]=_0x3caf8d(0x1bd),_0x2bee67[_0x3caf8d(0x19d)]=_0x3caf8d(0x1c4),_0x2bee67[_0x3caf8d(0x182)]=_0x3caf8d(0x1c0);const _0x43f0e2=_0x2bee67;let _0x2f3f92=_0x395910[_0x43f0e2[_0x3caf8d(0x1ab)]];if(_0x2f3f92&&_0x2f3f92[_0x3caf8d(0x186)](_0x43f0e2['dSmik']))return;!_0x2f3f92?_0x2f3f92=_0x43f0e2[_0x3caf8d(0x19d)]:_0x2f3f92+=_0x43f0e2[_0x3caf8d(0x182)],_0x4097d2[_0x3caf8d(0x18f)]([_0x43f0e2[_0x3caf8d(0x1ab)],_0x2f3f92]);}function addScriptInPackageJson(){const _0x100808=a49_0x160a81,_0x149f76={'TwLCh':'utf8','UKesp':function(_0xa2f987,_0x2470e6){return _0xa2f987<_0x2470e6;},'uVaMX':function(_0x23b01d,_0x50937a,_0x3b8d0e){return _0x23b01d(_0x50937a,_0x3b8d0e);},'zlGtu':function(_0x2f9a6a,_0x7a82e0){return _0x2f9a6a<_0x7a82e0;},'BXanl':function(_0x31c941,_0x2799d6,_0xb9beca){return _0x31c941(_0x2799d6,_0xb9beca);},'tThMx':function(_0x5eaec8,_0x23e8e5){return _0x5eaec8!==_0x23e8e5;},'NrOVf':_0x100808(0x192)},_0x2c9484=JSON[_0x100808(0x1b8)](fs[_0x100808(0x1a7)](packageFile,_0x149f76[_0x100808(0x1a8)])),_0x16cb02=[];for(let _0x156ac5=0x0;_0x149f76[_0x100808(0x1ac)](_0x156ac5,frameworks[_0x100808(0x1bc)]);_0x156ac5+=0x1){const _0x176969=_0x149f76[_0x100808(0x184)](findScriptsWithFramework,_0x2c9484[_0x100808(0x193)],frameworks[_0x156ac5]);for(let _0x455171=0x0;_0x149f76[_0x100808(0x1b7)](_0x455171,_0x176969[_0x100808(0x1bc)]);_0x455171+=0x1){_0x16cb02[_0x100808(0x18f)](_0x149f76[_0x100808(0x1ad)](getUpdatedCommand,_0x2c9484[_0x100808(0x193)],_0x176969[_0x455171]));}_0x149f76[_0x100808(0x1ad)](addPostInstallScript,_0x2c9484[_0x100808(0x193)],_0x16cb02);}const _0x43d7fb={..._0x2c9484[_0x100808(0x193)]},_0x6ef1a0=_0x43d7fb;for(let _0x5976dd=0x0;_0x149f76[_0x100808(0x1b7)](_0x5976dd,_0x16cb02[_0x100808(0x1bc)]);_0x5976dd+=0x1){_0x6ef1a0[_0x16cb02[_0x5976dd][0x0]]=_0x16cb02[_0x5976dd][0x1];}_0x149f76['tThMx'](JSON[_0x100808(0x1c6)](_0x2c9484[_0x100808(0x193)]),JSON['stringify'](_0x6ef1a0))&&(logger[_0x100808(0x1b9)](_0x149f76['NrOVf']),_0x2c9484[_0x100808(0x193)]=_0x6ef1a0,fs[_0x100808(0x191)](packageFile,JSON[_0x100808(0x1c6)](_0x2c9484,null,0x2),_0x4740ff=>{_0x4740ff&&logger['error'](_0x4740ff);}));};function findScriptsWithFramework(_0x4f42c3,_0x3eacbe){const _0x4bb2ef=a49_0x160a81,_0x29001d={};_0x29001d['jNtsF']=function(_0x4cd429,_0x1bf9fb){return _0x4cd429<_0x1bf9fb;},_0x29001d[_0x4bb2ef(0x1b2)]='browserstack-node-sdk';const _0x5e8800=_0x29001d,_0x43be48=[],_0x2a8507=Object[_0x4bb2ef(0x1a1)](_0x4f42c3);for(let _0x4bcab5=0x0;_0x5e8800[_0x4bb2ef(0x18a)](_0x4bcab5,_0x2a8507[_0x4bb2ef(0x1bc)]);_0x4bcab5+=0x1){_0x2a8507[_0x4bcab5][0x1][_0x4bb2ef(0x186)](_0x3eacbe)&&!_0x2a8507[_0x4bcab5][0x1][_0x4bb2ef(0x186)](_0x5e8800['ThPxW'])&&_0x43be48[_0x4bb2ef(0x18f)](_0x2a8507[_0x4bcab5][0x0]);}return _0x43be48;}function getUpdatedCommand(_0xeb1d4c,_0x5ce137){const _0x324b36=a49_0x160a81,_0x3fce56={};_0x3fce56['CIunH']=function(_0x3422fb,_0x7abb18){return _0x3422fb!==_0x7abb18;},_0x3fce56[_0x324b36(0x1c3)]=_0x324b36(0x185),_0x3fce56['NHoAq']=function(_0x6c2232,_0x17a311){return _0x6c2232===_0x17a311;};const _0x30d604=_0x3fce56,_0x1494dd=_0x5ce137+_0x324b36(0x1c7),_0x5d7561=_0xeb1d4c[_0x5ce137],_0x3fdef8=_0x5d7561[_0x324b36(0x1be)]('\x20');for(const _0x33d2aa of frameworks){if(_0x30d604[_0x324b36(0x18b)](_0x3fdef8[_0x324b36(0x1c9)](_0x33d2aa),-0x1)){_0x3fdef8[_0x324b36(0x196)](_0x3fdef8['indexOf'](_0x33d2aa),0x0,_0x30d604[_0x324b36(0x1c3)]);break;}}let _0x243569=_0x3fdef8[_0x324b36(0x1b3)]('\x20');return _0x30d604[_0x324b36(0x1b1)](_0x243569,_0x5d7561)&&(_0x243569='browserstack-node-sdk\x20'+_0x5d7561),[_0x1494dd,_0x243569];}function sdkSetup(){const _0x3b5083=a49_0x160a81,_0x2358a7={};_0x2358a7['hRjRp']=_0x3b5083(0x1af),_0x2358a7['UUXZT']=_0x3b5083(0x1bf);const _0x52faf1=_0x2358a7;if(helper[_0x3b5083(0x1b5)](config))return;config[_0x3b5083(0x1c2)]=_0x52faf1[_0x3b5083(0x1c8)];try{utilities['fireFunnelTestEvent'](_0x52faf1['UUXZT'],{},config,'');}catch(_0x1e2c8b){logger[_0x3b5083(0x18c)](_0x3b5083(0x189)+_0x1e2c8b);}}logger[a49_0x160a81(0x1b9)](a49_0x160a81(0x1a0));