#!/usr/bin/env node

const a45_0x5ddff0=a45_0x2c67;(function(_0x3f8265,_0x34494f){const _0x15ead5=a45_0x2c67,_0x4cbd32=_0x3f8265();while(!![]){try{const _0x3ef448=-parseInt(_0x15ead5(0x160))/0x1*(-parseInt(_0x15ead5(0x18a))/0x2)+-parseInt(_0x15ead5(0x183))/0x3+parseInt(_0x15ead5(0x174))/0x4*(parseInt(_0x15ead5(0x154))/0x5)+-parseInt(_0x15ead5(0x16e))/0x6+-parseInt(_0x15ead5(0x178))/0x7+parseInt(_0x15ead5(0x190))/0x8*(-parseInt(_0x15ead5(0x173))/0x9)+parseInt(_0x15ead5(0x16f))/0xa;if(_0x3ef448===_0x34494f)break;else _0x4cbd32['push'](_0x4cbd32['shift']());}catch(_0x208a32){_0x4cbd32['push'](_0x4cbd32['shift']());}}}(a45_0x21d1,0x71a59));const fs=require('fs'),helper=require(a45_0x5ddff0(0x16c)),utilities=require(a45_0x5ddff0(0x191)),yaml=require('js-yaml'),yargs=require(a45_0x5ddff0(0x16b)),logger=require(a45_0x5ddff0(0x189))['winstonLogger'],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+a45_0x5ddff0(0x180),configFile=process[a45_0x5ddff0(0x18f)]()+'/browserstack.yml',packageFile=process[a45_0x5ddff0(0x18f)]()+a45_0x5ddff0(0x171),frameworks=[a45_0x5ddff0(0x18b),'jest',a45_0x5ddff0(0x188),a45_0x5ddff0(0x184),'nightwatch',a45_0x5ddff0(0x17f),a45_0x5ddff0(0x179)];let config;logger[a45_0x5ddff0(0x193)](a45_0x5ddff0(0x16a)),createConfigurationFile(yargs[a45_0x5ddff0(0x157)][a45_0x5ddff0(0x192)],yargs['argv'][a45_0x5ddff0(0x172)],yargs[a45_0x5ddff0(0x157)][a45_0x5ddff0(0x179)]);try{sdkSetup();}catch(a45_0x2ff437){logger[a45_0x5ddff0(0x17a)](a45_0x5ddff0(0x168)+a45_0x2ff437);}addScriptInPackageJson();function createConfigurationFile(_0x57f63f,_0x1c4c08,_0x130eef=![]){const _0xd6466d=a45_0x5ddff0,_0x4cd57d={};_0x4cd57d[_0xd6466d(0x187)]='utf8',_0x4cd57d[_0xd6466d(0x18e)]=_0xd6466d(0x155),_0x4cd57d[_0xd6466d(0x158)]=_0xd6466d(0x176);const _0x50724a=_0x4cd57d;try{let _0x100b56=fs[_0xd6466d(0x161)](_0x130eef?configFileTemplatePW:configFileTemplate,_0x50724a[_0xd6466d(0x187)]);_0x57f63f&&(_0x100b56=_0x100b56[_0xd6466d(0x18c)](_0x50724a[_0xd6466d(0x18e)],_0x57f63f)),_0x1c4c08&&(_0x100b56=_0x100b56[_0xd6466d(0x18c)](_0x50724a['vxmgJ'],_0x1c4c08)),config=yaml['load'](_0x100b56),fs['writeFileSync'](configFile,_0x100b56,_0x1679e5=>{const _0x2ffb1b=_0xd6466d;_0x1679e5&&logger[_0x2ffb1b(0x195)](_0x1679e5);});}catch(_0x5ca214){logger[_0xd6466d(0x195)](_0x5ca214);}}function addPostInstallScript(_0x1da7b4,_0x56c2ce){const _0x52711b=a45_0x5ddff0,_0x29e801={};_0x29e801[_0x52711b(0x152)]=_0x52711b(0x159),_0x29e801[_0x52711b(0x15a)]=_0x52711b(0x15c),_0x29e801['InSlq']=_0x52711b(0x182);const _0x1d91ab=_0x29e801;let _0x2dbb58=_0x1da7b4[_0x1d91ab[_0x52711b(0x152)]];if(_0x2dbb58&&_0x2dbb58[_0x52711b(0x15d)](_0x1d91ab['YURYM']))return;!_0x2dbb58?_0x2dbb58=_0x1d91ab[_0x52711b(0x15a)]:_0x2dbb58+=_0x1d91ab[_0x52711b(0x194)],_0x56c2ce[_0x52711b(0x170)]([_0x1d91ab[_0x52711b(0x152)],_0x2dbb58]);}function addScriptInPackageJson(){const _0x158d0f=a45_0x5ddff0,_0x4b0590={'ZbKsw':_0x158d0f(0x181),'gztuv':function(_0x1f43ee,_0x4e42bc){return _0x1f43ee<_0x4e42bc;},'KasxF':function(_0x3fd751,_0x57ff8a,_0x112ecc){return _0x3fd751(_0x57ff8a,_0x112ecc);},'GJYZG':function(_0x552353,_0x1cb40e,_0x177284){return _0x552353(_0x1cb40e,_0x177284);},'OyUtq':function(_0x2a1bb7,_0x10d71e){return _0x2a1bb7!==_0x10d71e;},'MGXoK':'Adding\x20new\x20script(s)\x20in\x20package.json...'},_0x2380c6=JSON['parse'](fs[_0x158d0f(0x161)](packageFile,_0x4b0590[_0x158d0f(0x17c)])),_0x2b1d46=[];for(let _0x147da4=0x0;_0x4b0590[_0x158d0f(0x164)](_0x147da4,frameworks[_0x158d0f(0x197)]);_0x147da4+=0x1){const _0x7115bf=_0x4b0590[_0x158d0f(0x163)](findScriptsWithFramework,_0x2380c6['scripts'],frameworks[_0x147da4]);for(let _0x46cb3e=0x0;_0x4b0590[_0x158d0f(0x164)](_0x46cb3e,_0x7115bf[_0x158d0f(0x197)]);_0x46cb3e+=0x1){_0x2b1d46[_0x158d0f(0x170)](_0x4b0590[_0x158d0f(0x15f)](getUpdatedCommand,_0x2380c6[_0x158d0f(0x177)],_0x7115bf[_0x46cb3e]));}_0x4b0590[_0x158d0f(0x163)](addPostInstallScript,_0x2380c6['scripts'],_0x2b1d46);}const _0x389c85={..._0x2380c6[_0x158d0f(0x177)]},_0x4c10e0=_0x389c85;for(let _0x3f4105=0x0;_0x4b0590[_0x158d0f(0x164)](_0x3f4105,_0x2b1d46['length']);_0x3f4105+=0x1){_0x4c10e0[_0x2b1d46[_0x3f4105][0x0]]=_0x2b1d46[_0x3f4105][0x1];}_0x4b0590[_0x158d0f(0x165)](JSON['stringify'](_0x2380c6[_0x158d0f(0x177)]),JSON[_0x158d0f(0x169)](_0x4c10e0))&&(logger['info'](_0x4b0590['MGXoK']),_0x2380c6[_0x158d0f(0x177)]=_0x4c10e0,fs[_0x158d0f(0x17d)](packageFile,JSON[_0x158d0f(0x169)](_0x2380c6,null,0x2),_0x5a5fb2=>{const _0x230409=_0x158d0f;_0x5a5fb2&&logger[_0x230409(0x195)](_0x5a5fb2);}));};function findScriptsWithFramework(_0x349b82,_0xcc3154){const _0x41be52=a45_0x5ddff0,_0x459373={};_0x459373['WELGS']=function(_0x256ae0,_0x1e9716){return _0x256ae0<_0x1e9716;},_0x459373[_0x41be52(0x166)]=_0x41be52(0x17b);const _0x491f0f=_0x459373,_0xfb47c7=[],_0x36287b=Object[_0x41be52(0x153)](_0x349b82);for(let _0xbdde4=0x0;_0x491f0f['WELGS'](_0xbdde4,_0x36287b[_0x41be52(0x197)]);_0xbdde4+=0x1){_0x36287b[_0xbdde4][0x1][_0x41be52(0x15d)](_0xcc3154)&&!_0x36287b[_0xbdde4][0x1]['includes'](_0x491f0f['swvbd'])&&_0xfb47c7[_0x41be52(0x170)](_0x36287b[_0xbdde4][0x0]);}return _0xfb47c7;}function getUpdatedCommand(_0xf7f592,_0x406495){const _0x3ac599=a45_0x5ddff0,_0x3b6574={};_0x3b6574[_0x3ac599(0x196)]=function(_0x10c343,_0x4f4790){return _0x10c343!==_0x4f4790;},_0x3b6574['GvOVW']=_0x3ac599(0x17b),_0x3b6574['OTDrC']=function(_0x167b79,_0x1d2cde){return _0x167b79===_0x1d2cde;};const _0x155fb6=_0x3b6574,_0x12ca78=_0x406495+_0x3ac599(0x15e),_0x344d=_0xf7f592[_0x406495],_0x2a2f24=_0x344d[_0x3ac599(0x162)]('\x20');for(const _0x127a88 of frameworks){if(_0x155fb6[_0x3ac599(0x196)](_0x2a2f24['indexOf'](_0x127a88),-0x1)){_0x2a2f24[_0x3ac599(0x16d)](_0x2a2f24[_0x3ac599(0x17e)](_0x127a88),0x0,_0x155fb6[_0x3ac599(0x185)]);break;}}let _0x2ffaf6=_0x2a2f24['join']('\x20');return _0x155fb6['OTDrC'](_0x2ffaf6,_0x344d)&&(_0x2ffaf6=_0x3ac599(0x167)+_0x344d),[_0x12ca78,_0x2ffaf6];}function a45_0x21d1(){const _0x3b3a95=['split','KasxF','gztuv','OyUtq','swvbd','browserstack-node-sdk\x20','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','stringify','Creating\x20configuration\x20file...','yargs','../helpers/helper','splice','136302duOGnR','13144240cuyqgp','push','/package.json','key','4246623AWaoDZ','540788YBQGyx','fireFunnelTestEvent','YOUR_ACCESS_KEY','scripts','2753828ZVfkaF','playwright','debug','browserstack-node-sdk','ZbKsw','writeFileSync','indexOf','codeceptjs','/../../browserstack.pw.yml.sample','utf8','\x20&&\x20npm\x20update\x20browserstack-node-sdk','2723940YmKaXe','node','GvOVW','Setup\x20completed','crcol','cucumber-js','../helpers/logger','271036bzsXgX','mocha','replace','isUndefined','NHnHP','cwd','8SOtmau','../helpers/utilities','username','info','InSlq','error','TVwGs','length','node-setup','bhiNp','entries','25YLpOJf','YOUR_USERNAME','EKeVv','argv','vxmgJ','postinstall','YURYM','jhEho','npm\x20update\x20browserstack-node-sdk','includes','-browserstack','GJYZG','2KBgumV','readFileSync'];a45_0x21d1=function(){return _0x3b3a95;};return a45_0x21d1();}function a45_0x2c67(_0x2d6ccb,_0x4b6bf4){const _0x21d15b=a45_0x21d1();return a45_0x2c67=function(_0x2c6701,_0x4420a6){_0x2c6701=_0x2c6701-0x151;let _0x181671=_0x21d15b[_0x2c6701];return _0x181671;},a45_0x2c67(_0x2d6ccb,_0x4b6bf4);}function sdkSetup(){const _0x1fa8d9=a45_0x5ddff0,_0x18b02d={};_0x18b02d[_0x1fa8d9(0x15b)]=_0x1fa8d9(0x151),_0x18b02d[_0x1fa8d9(0x156)]='SDKSetup';const _0x2b4843=_0x18b02d;if(helper[_0x1fa8d9(0x18d)](config))return;config['source']=_0x2b4843[_0x1fa8d9(0x15b)];try{utilities[_0x1fa8d9(0x175)](_0x2b4843['EKeVv'],{},config,'');}catch(_0x561e4b){logger[_0x1fa8d9(0x17a)](_0x1fa8d9(0x168)+_0x561e4b);}}logger[a45_0x5ddff0(0x193)](a45_0x5ddff0(0x186));