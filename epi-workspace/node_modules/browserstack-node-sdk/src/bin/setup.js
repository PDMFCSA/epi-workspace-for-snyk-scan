#!/usr/bin/env node

const a49_0x1c76cf=a49_0x4aeb;(function(_0x210361,_0x241bfc){const _0x2ba2ee=a49_0x4aeb,_0x851ae=_0x210361();while(!![]){try{const _0xf640f=parseInt(_0x2ba2ee(0x1a6))/0x1+-parseInt(_0x2ba2ee(0x196))/0x2*(parseInt(_0x2ba2ee(0x192))/0x3)+-parseInt(_0x2ba2ee(0x1a0))/0x4+parseInt(_0x2ba2ee(0x1ca))/0x5*(parseInt(_0x2ba2ee(0x1ae))/0x6)+parseInt(_0x2ba2ee(0x183))/0x7*(parseInt(_0x2ba2ee(0x197))/0x8)+parseInt(_0x2ba2ee(0x188))/0x9+-parseInt(_0x2ba2ee(0x19b))/0xa;if(_0xf640f===_0x241bfc)break;else _0x851ae['push'](_0x851ae['shift']());}catch(_0x33faf5){_0x851ae['push'](_0x851ae['shift']());}}}(a49_0x4365,0xe2d33));const fs=require('fs'),helper=require(a49_0x1c76cf(0x1c7)),utilities=require(a49_0x1c76cf(0x1ac)),yaml=require('js-yaml'),yargs=require(a49_0x1c76cf(0x1a2)),logger=require(a49_0x1c76cf(0x1b9))[a49_0x1c76cf(0x1bc)],configFileTemplate=__dirname+a49_0x1c76cf(0x1ba),configFileTemplatePW=__dirname+a49_0x1c76cf(0x1c1),configFile=process[a49_0x1c76cf(0x18a)]()+'/browserstack.yml',packageFile=process[a49_0x1c76cf(0x18a)]()+'/package.json',frameworks=[a49_0x1c76cf(0x1a1),a49_0x1c76cf(0x193),a49_0x1c76cf(0x182),'node','nightwatch',a49_0x1c76cf(0x18c),a49_0x1c76cf(0x1a8)];function a49_0x4365(){const _0x2f05e1=['source','isUndefined','load','browserstack-node-sdk\x20','../helpers/logger','/../../browserstack.yml.sample','debug','winstonLogger','join','browserstack-node-sdk','UISdF','-browserstack','/../../browserstack.pw.yml.sample','split','info','entries','zctji','indexOf','../helpers/helper','writeFileSync','dcyoM','796135dRkqlH','parse','cucumber-js','7IuCfaK','error','SDKSetup','lvMpi','vOTKg','15560370tWUkqP','FYGvg','cwd','utf8','codeceptjs','scripts','vvCPn','gkbCi','GvbLN','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','14127yxfODJ','jest','laMrU','npm\x20update\x20browserstack-node-sdk','166kYVGDD','6224872zkqwEh','RPAir','length','argv','34597730YgzgUF','readFileSync','sEeFj','username','ADYTB','2273836FXdwpo','mocha','yargs','tTOZh','includes','Creating\x20configuration\x20file...','1567299GbaffL','push','playwright','key','Adding\x20new\x20script(s)\x20in\x20package.json...','fireFunnelTestEvent','../helpers/utilities','hhVGk','48eVhljh','stringify','YOUR_USERNAME','Setup\x20completed','postinstall','Fbwlj','DXJGF'];a49_0x4365=function(){return _0x2f05e1;};return a49_0x4365();}let config;logger[a49_0x1c76cf(0x1c3)](a49_0x1c76cf(0x1a5)),createConfigurationFile(yargs[a49_0x1c76cf(0x19a)][a49_0x1c76cf(0x19e)],yargs[a49_0x1c76cf(0x19a)][a49_0x1c76cf(0x1a9)],yargs[a49_0x1c76cf(0x19a)][a49_0x1c76cf(0x1a8)]);try{sdkSetup();}catch(a49_0x3619f2){logger[a49_0x1c76cf(0x1bb)](a49_0x1c76cf(0x191)+a49_0x3619f2);}addScriptInPackageJson();function createConfigurationFile(_0x16db25,_0x44eb19,_0x2943c5=![]){const _0x1debad=a49_0x1c76cf,_0x39fcfb={};_0x39fcfb[_0x1debad(0x18f)]=_0x1debad(0x18b),_0x39fcfb[_0x1debad(0x19d)]=_0x1debad(0x1b0),_0x39fcfb[_0x1debad(0x189)]='YOUR_ACCESS_KEY';const _0x1896b0=_0x39fcfb;try{let _0x4e834e=fs['readFileSync'](_0x2943c5?configFileTemplatePW:configFileTemplate,_0x1896b0[_0x1debad(0x18f)]);_0x16db25&&(_0x4e834e=_0x4e834e['replace'](_0x1896b0[_0x1debad(0x19d)],_0x16db25)),_0x44eb19&&(_0x4e834e=_0x4e834e['replace'](_0x1896b0[_0x1debad(0x189)],_0x44eb19)),config=yaml[_0x1debad(0x1b7)](_0x4e834e),fs[_0x1debad(0x1c8)](configFile,_0x4e834e,_0x39e7ae=>{const _0xbc9c18=_0x1debad;_0x39e7ae&&logger[_0xbc9c18(0x184)](_0x39e7ae);});}catch(_0x469c8c){logger[_0x1debad(0x184)](_0x469c8c);}}function addPostInstallScript(_0xb53956,_0x22110e){const _0x36fe72=a49_0x1c76cf,_0x376e5c={};_0x376e5c['GvbLN']=_0x36fe72(0x1b2),_0x376e5c[_0x36fe72(0x1b4)]=_0x36fe72(0x195),_0x376e5c[_0x36fe72(0x186)]='\x20&&\x20npm\x20update\x20browserstack-node-sdk';const _0x18b9a6=_0x376e5c;let _0x20ead7=_0xb53956[_0x18b9a6['GvbLN']];if(_0x20ead7&&_0x20ead7[_0x36fe72(0x1a4)](_0x18b9a6[_0x36fe72(0x1b4)]))return;!_0x20ead7?_0x20ead7=_0x18b9a6['DXJGF']:_0x20ead7+=_0x18b9a6[_0x36fe72(0x186)],_0x22110e[_0x36fe72(0x1a7)]([_0x18b9a6[_0x36fe72(0x190)],_0x20ead7]);}function a49_0x4aeb(_0x2a27d5,_0x18bd7e){const _0x436531=a49_0x4365();return a49_0x4aeb=function(_0x4aeb60,_0x4b75b8){_0x4aeb60=_0x4aeb60-0x181;let _0x34fd53=_0x436531[_0x4aeb60];return _0x34fd53;},a49_0x4aeb(_0x2a27d5,_0x18bd7e);}function addScriptInPackageJson(){const _0x429e82=a49_0x1c76cf,_0x5a0bdd={'tTOZh':'utf8','hhVGk':function(_0x2508e6,_0x5b0fd8){return _0x2508e6<_0x5b0fd8;},'ADYTB':function(_0x23566e,_0x1d5988,_0x664dc0){return _0x23566e(_0x1d5988,_0x664dc0);},'ouLJX':function(_0x2a068c,_0x1fcb4f){return _0x2a068c<_0x1fcb4f;},'WzMdz':function(_0x4b1576,_0x1abd6c){return _0x4b1576<_0x1abd6c;},'gEmLb':function(_0x2ca197,_0x7dcf30){return _0x2ca197!==_0x7dcf30;},'laMrU':_0x429e82(0x1aa)},_0x3a2fb8=JSON[_0x429e82(0x181)](fs[_0x429e82(0x19c)](packageFile,_0x5a0bdd[_0x429e82(0x1a3)])),_0xb1f009=[];for(let _0x48a0be=0x0;_0x5a0bdd[_0x429e82(0x1ad)](_0x48a0be,frameworks[_0x429e82(0x199)]);_0x48a0be+=0x1){const _0x197835=_0x5a0bdd[_0x429e82(0x19f)](findScriptsWithFramework,_0x3a2fb8['scripts'],frameworks[_0x48a0be]);for(let _0x42aa9f=0x0;_0x5a0bdd['ouLJX'](_0x42aa9f,_0x197835[_0x429e82(0x199)]);_0x42aa9f+=0x1){_0xb1f009[_0x429e82(0x1a7)](_0x5a0bdd[_0x429e82(0x19f)](getUpdatedCommand,_0x3a2fb8[_0x429e82(0x18d)],_0x197835[_0x42aa9f]));}_0x5a0bdd[_0x429e82(0x19f)](addPostInstallScript,_0x3a2fb8[_0x429e82(0x18d)],_0xb1f009);}const _0x324f63={..._0x3a2fb8[_0x429e82(0x18d)]},_0xd87b27=_0x324f63;for(let _0x36380a=0x0;_0x5a0bdd['WzMdz'](_0x36380a,_0xb1f009[_0x429e82(0x199)]);_0x36380a+=0x1){_0xd87b27[_0xb1f009[_0x36380a][0x0]]=_0xb1f009[_0x36380a][0x1];}_0x5a0bdd['gEmLb'](JSON[_0x429e82(0x1af)](_0x3a2fb8[_0x429e82(0x18d)]),JSON['stringify'](_0xd87b27))&&(logger[_0x429e82(0x1c3)](_0x5a0bdd[_0x429e82(0x194)]),_0x3a2fb8[_0x429e82(0x18d)]=_0xd87b27,fs[_0x429e82(0x1c8)](packageFile,JSON['stringify'](_0x3a2fb8,null,0x2),_0x3a32de=>{const _0x43f039=_0x429e82;_0x3a32de&&logger[_0x43f039(0x184)](_0x3a32de);}));};function findScriptsWithFramework(_0x3518df,_0xc9934a){const _0x3007e9=a49_0x1c76cf,_0x41f702={};_0x41f702[_0x3007e9(0x1b3)]=function(_0x401f8e,_0x119bf3){return _0x401f8e<_0x119bf3;},_0x41f702['RPAir']=_0x3007e9(0x1be);const _0x2659de=_0x41f702,_0x53dfb5=[],_0x582d81=Object[_0x3007e9(0x1c4)](_0x3518df);for(let _0x72a47f=0x0;_0x2659de['Fbwlj'](_0x72a47f,_0x582d81[_0x3007e9(0x199)]);_0x72a47f+=0x1){_0x582d81[_0x72a47f][0x1]['includes'](_0xc9934a)&&!_0x582d81[_0x72a47f][0x1][_0x3007e9(0x1a4)](_0x2659de[_0x3007e9(0x198)])&&_0x53dfb5[_0x3007e9(0x1a7)](_0x582d81[_0x72a47f][0x0]);}return _0x53dfb5;}function getUpdatedCommand(_0x126388,_0x12c9f8){const _0x41abfb=a49_0x1c76cf,_0x53928d={};_0x53928d[_0x41abfb(0x1bf)]=function(_0x1c4356,_0x250e69){return _0x1c4356!==_0x250e69;},_0x53928d['vOTKg']=_0x41abfb(0x1be),_0x53928d[_0x41abfb(0x1c9)]=function(_0x3625b3,_0x5d7ec5){return _0x3625b3===_0x5d7ec5;};const _0x582646=_0x53928d,_0x3eb682=_0x12c9f8+_0x41abfb(0x1c0),_0x217480=_0x126388[_0x12c9f8],_0x115f14=_0x217480[_0x41abfb(0x1c2)]('\x20');for(const _0x4af738 of frameworks){if(_0x582646[_0x41abfb(0x1bf)](_0x115f14[_0x41abfb(0x1c6)](_0x4af738),-0x1)){_0x115f14['splice'](_0x115f14['indexOf'](_0x4af738),0x0,_0x582646[_0x41abfb(0x187)]);break;}}let _0x8e1d18=_0x115f14[_0x41abfb(0x1bd)]('\x20');return _0x582646[_0x41abfb(0x1c9)](_0x8e1d18,_0x217480)&&(_0x8e1d18=_0x41abfb(0x1b8)+_0x217480),[_0x3eb682,_0x8e1d18];}function sdkSetup(){const _0x358552=a49_0x1c76cf,_0x13f883={};_0x13f883[_0x358552(0x18e)]='node-setup',_0x13f883['zctji']=_0x358552(0x185);const _0xca8e34=_0x13f883;if(helper[_0x358552(0x1b6)](config))return;config[_0x358552(0x1b5)]=_0xca8e34[_0x358552(0x18e)];try{utilities[_0x358552(0x1ab)](_0xca8e34[_0x358552(0x1c5)],{},config,'');}catch(_0x5b69ee){logger[_0x358552(0x1bb)](_0x358552(0x191)+_0x5b69ee);}}logger['info'](a49_0x1c76cf(0x1b1));