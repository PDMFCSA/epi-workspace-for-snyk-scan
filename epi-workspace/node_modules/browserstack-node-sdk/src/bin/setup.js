#!/usr/bin/env node

const a45_0x22e4d5=a45_0x434f;function a45_0x434f(_0x1c27a9,_0x5bb342){const _0x5e4ba8=a45_0x5e4b();return a45_0x434f=function(_0x434f9f,_0x3b62ed){_0x434f9f=_0x434f9f-0x97;let _0x40402d=_0x5e4ba8[_0x434f9f];return _0x40402d;},a45_0x434f(_0x1c27a9,_0x5bb342);}(function(_0xb5baba,_0x115f06){const _0x397219=a45_0x434f,_0x355fe8=_0xb5baba();while(!![]){try{const _0x25a61c=-parseInt(_0x397219(0xbe))/0x1+-parseInt(_0x397219(0x9b))/0x2+-parseInt(_0x397219(0xe1))/0x3*(parseInt(_0x397219(0xb8))/0x4)+-parseInt(_0x397219(0xaa))/0x5*(-parseInt(_0x397219(0x9f))/0x6)+parseInt(_0x397219(0xc3))/0x7*(parseInt(_0x397219(0xd4))/0x8)+-parseInt(_0x397219(0xa2))/0x9*(-parseInt(_0x397219(0xcf))/0xa)+-parseInt(_0x397219(0xa4))/0xb*(-parseInt(_0x397219(0xe2))/0xc);if(_0x25a61c===_0x115f06)break;else _0x355fe8['push'](_0x355fe8['shift']());}catch(_0x2e8aff){_0x355fe8['push'](_0x355fe8['shift']());}}}(a45_0x5e4b,0x51d2a));const fs=require('fs'),helper=require('../helpers/helper'),utilities=require(a45_0x22e4d5(0xdb)),yaml=require(a45_0x22e4d5(0x9e)),yargs=require('yargs'),logger=require(a45_0x22e4d5(0xd8))[a45_0x22e4d5(0x98)],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+a45_0x22e4d5(0xc1),configFile=process[a45_0x22e4d5(0xbd)]()+a45_0x22e4d5(0xca),packageFile=process['cwd']()+a45_0x22e4d5(0xb0),frameworks=[a45_0x22e4d5(0xcb),a45_0x22e4d5(0xc4),a45_0x22e4d5(0xb5),a45_0x22e4d5(0xd3),a45_0x22e4d5(0xbc),a45_0x22e4d5(0xc6),'playwright'];let config;logger[a45_0x22e4d5(0xc9)](a45_0x22e4d5(0xb9)),createConfigurationFile(yargs[a45_0x22e4d5(0xa5)]['username'],yargs['argv']['key'],yargs[a45_0x22e4d5(0xa5)][a45_0x22e4d5(0xdf)]);try{sdkSetup();}catch(a45_0x49ffb8){logger['debug'](a45_0x22e4d5(0xd5)+a45_0x49ffb8);}addScriptInPackageJson();function createConfigurationFile(_0x1b7689,_0x4ab708,_0x283580=![]){const _0x24b17e=a45_0x22e4d5,_0x2e9990={};_0x2e9990['gdqlA']=_0x24b17e(0xda),_0x2e9990['vgMEl']=_0x24b17e(0xa6),_0x2e9990['WfUGW']=_0x24b17e(0xc2);const _0x46d312=_0x2e9990;try{let _0x20514d=fs[_0x24b17e(0xb6)](_0x283580?configFileTemplatePW:configFileTemplate,_0x46d312[_0x24b17e(0x9c)]);_0x1b7689&&(_0x20514d=_0x20514d['replace'](_0x46d312[_0x24b17e(0xbf)],_0x1b7689)),_0x4ab708&&(_0x20514d=_0x20514d[_0x24b17e(0xcc)](_0x46d312[_0x24b17e(0x99)],_0x4ab708)),config=yaml[_0x24b17e(0xd2)](_0x20514d),fs[_0x24b17e(0xad)](configFile,_0x20514d,_0x1a706f=>{const _0xa9b6db=_0x24b17e;_0x1a706f&&logger[_0xa9b6db(0xa8)](_0x1a706f);});}catch(_0x48424c){logger[_0x24b17e(0xa8)](_0x48424c);}}function addPostInstallScript(_0x526dde,_0x59a6e7){const _0x10f2bd=a45_0x22e4d5,_0x519d89={};_0x519d89[_0x10f2bd(0xd6)]=_0x10f2bd(0xaf),_0x519d89['LHrgu']=_0x10f2bd(0xb7),_0x519d89['ESBaI']=_0x10f2bd(0xc5);const _0x24285e=_0x519d89;let _0x51baa5=_0x526dde[_0x24285e[_0x10f2bd(0xd6)]];if(_0x51baa5&&_0x51baa5[_0x10f2bd(0xa9)](_0x24285e[_0x10f2bd(0xa7)]))return;!_0x51baa5?_0x51baa5=_0x24285e[_0x10f2bd(0xa7)]:_0x51baa5+=_0x24285e[_0x10f2bd(0xd9)],_0x59a6e7['push']([_0x24285e['XeTIZ'],_0x51baa5]);}function addScriptInPackageJson(){const _0x5068fb=a45_0x22e4d5,_0x5a8b57={'wUmua':_0x5068fb(0xda),'poywh':function(_0x31b2ce,_0x4e2824){return _0x31b2ce<_0x4e2824;},'fohEI':function(_0xd01b32,_0x4039ea,_0x436df8){return _0xd01b32(_0x4039ea,_0x436df8);},'hloEN':function(_0x1bb241,_0x27a194,_0x103fc4){return _0x1bb241(_0x27a194,_0x103fc4);},'KDxDu':function(_0x21a0a8,_0x225cc4,_0x13588a){return _0x21a0a8(_0x225cc4,_0x13588a);},'kTFbw':function(_0x5cdd70,_0xd70678){return _0x5cdd70<_0xd70678;},'txqbt':function(_0x2fc42f,_0x5115a7){return _0x2fc42f!==_0x5115a7;},'HJRlG':_0x5068fb(0xa0)},_0x12b2d7=JSON['parse'](fs[_0x5068fb(0xb6)](packageFile,_0x5a8b57[_0x5068fb(0xc8)])),_0x3c8e4e=[];for(let _0x20c658=0x0;_0x5a8b57['poywh'](_0x20c658,frameworks[_0x5068fb(0xe0)]);_0x20c658+=0x1){const _0x48da73=_0x5a8b57[_0x5068fb(0xa1)](findScriptsWithFramework,_0x12b2d7['scripts'],frameworks[_0x20c658]);for(let _0x2f211b=0x0;_0x5a8b57[_0x5068fb(0xce)](_0x2f211b,_0x48da73[_0x5068fb(0xe0)]);_0x2f211b+=0x1){_0x3c8e4e['push'](_0x5a8b57[_0x5068fb(0xab)](getUpdatedCommand,_0x12b2d7[_0x5068fb(0xd1)],_0x48da73[_0x2f211b]));}_0x5a8b57['KDxDu'](addPostInstallScript,_0x12b2d7[_0x5068fb(0xd1)],_0x3c8e4e);}const _0x31628f={..._0x12b2d7[_0x5068fb(0xd1)]},_0x4d37ec=_0x31628f;for(let _0xef8f9b=0x0;_0x5a8b57[_0x5068fb(0xde)](_0xef8f9b,_0x3c8e4e['length']);_0xef8f9b+=0x1){_0x4d37ec[_0x3c8e4e[_0xef8f9b][0x0]]=_0x3c8e4e[_0xef8f9b][0x1];}_0x5a8b57['txqbt'](JSON[_0x5068fb(0x9a)](_0x12b2d7[_0x5068fb(0xd1)]),JSON['stringify'](_0x4d37ec))&&(logger['info'](_0x5a8b57[_0x5068fb(0xdc)]),_0x12b2d7[_0x5068fb(0xd1)]=_0x4d37ec,fs['writeFileSync'](packageFile,JSON[_0x5068fb(0x9a)](_0x12b2d7,null,0x2),_0x558e9d=>{const _0x25fdcd=_0x5068fb;_0x558e9d&&logger[_0x25fdcd(0xa8)](_0x558e9d);}));};function findScriptsWithFramework(_0x309e99,_0x245c56){const _0x4be012=a45_0x22e4d5,_0x1ac4dc={};_0x1ac4dc['uebHw']=function(_0x5e6cf0,_0x34ff34){return _0x5e6cf0<_0x34ff34;},_0x1ac4dc[_0x4be012(0xb1)]=_0x4be012(0xb3);const _0x419a9c=_0x1ac4dc,_0x2cdca7=[],_0x298492=Object['entries'](_0x309e99);for(let _0x1d324b=0x0;_0x419a9c[_0x4be012(0xcd)](_0x1d324b,_0x298492[_0x4be012(0xe0)]);_0x1d324b+=0x1){_0x298492[_0x1d324b][0x1][_0x4be012(0xa9)](_0x245c56)&&!_0x298492[_0x1d324b][0x1][_0x4be012(0xa9)](_0x419a9c[_0x4be012(0xb1)])&&_0x2cdca7['push'](_0x298492[_0x1d324b][0x0]);}return _0x2cdca7;}function getUpdatedCommand(_0x5f264c,_0x291361){const _0xbd2696=a45_0x22e4d5,_0x251561={};_0x251561[_0xbd2696(0x9d)]=function(_0x4d143a,_0x16b00b){return _0x4d143a!==_0x16b00b;},_0x251561['IzPTG']=_0xbd2696(0xb3),_0x251561[_0xbd2696(0xc7)]=function(_0x9e9a79,_0x712326){return _0x9e9a79===_0x712326;};const _0x5569c6=_0x251561,_0x1fa17d=_0x291361+'-browserstack',_0x190b9e=_0x5f264c[_0x291361],_0x73379d=_0x190b9e[_0xbd2696(0xac)]('\x20');for(const _0x1de491 of frameworks){if(_0x5569c6[_0xbd2696(0x9d)](_0x73379d[_0xbd2696(0xbb)](_0x1de491),-0x1)){_0x73379d[_0xbd2696(0xc0)](_0x73379d[_0xbd2696(0xbb)](_0x1de491),0x0,_0x5569c6[_0xbd2696(0xb4)]);break;}}let _0x264f95=_0x73379d[_0xbd2696(0xd7)]('\x20');return _0x5569c6[_0xbd2696(0xc7)](_0x264f95,_0x190b9e)&&(_0x264f95='browserstack-node-sdk\x20'+_0x190b9e),[_0x1fa17d,_0x264f95];}function sdkSetup(){const _0x1e8f31=a45_0x22e4d5,_0x480c09={};_0x480c09['FejMB']='node-setup',_0x480c09[_0x1e8f31(0xdd)]=_0x1e8f31(0x97);const _0x5a9eb0=_0x480c09;if(helper[_0x1e8f31(0xd0)](config))return;config[_0x1e8f31(0xb2)]=_0x5a9eb0['FejMB'];try{utilities[_0x1e8f31(0xba)](_0x5a9eb0['Irlmw'],{},config,'');}catch(_0x5e76f6){logger[_0x1e8f31(0xae)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+_0x5e76f6);}}logger[a45_0x22e4d5(0xc9)](a45_0x22e4d5(0xa3));function a45_0x5e4b(){const _0x6c6e59=['105ZNEBAM','jest','\x20&&\x20npm\x20update\x20browserstack-node-sdk','codeceptjs','GTzXo','wUmua','info','/browserstack.yml','mocha','replace','uebHw','poywh','2115070kkUtyf','isUndefined','scripts','load','node','341464mdGbPG','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','XeTIZ','join','../helpers/logger','ESBaI','utf8','../helpers/utilities','HJRlG','Irlmw','kTFbw','playwright','length','354921aidPKe','292428izXQRR','SDKSetup','winstonLogger','WfUGW','stringify','130150OgDPQO','gdqlA','hpgRH','js-yaml','18978hbOEMw','Adding\x20new\x20script(s)\x20in\x20package.json...','fohEI','9fmMdtf','Setup\x20completed','55kYESpn','argv','YOUR_USERNAME','LHrgu','error','includes','100EgFPLp','hloEN','split','writeFileSync','debug','postinstall','/package.json','GSgmj','source','browserstack-node-sdk','IzPTG','cucumber-js','readFileSync','npm\x20update\x20browserstack-node-sdk','20srLWGg','Creating\x20configuration\x20file...','fireFunnelTestEvent','indexOf','nightwatch','cwd','45101gYxgwL','vgMEl','splice','/../../browserstack.pw.yml.sample','YOUR_ACCESS_KEY'];a45_0x5e4b=function(){return _0x6c6e59;};return a45_0x5e4b();}