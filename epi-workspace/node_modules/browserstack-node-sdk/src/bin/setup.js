#!/usr/bin/env node

const a49_0x362f6e=a49_0x4b3d;(function(_0x1b69be,_0x5a87ab){const _0x1f2014=a49_0x4b3d,_0x54860e=_0x1b69be();while(!![]){try{const _0x23d958=-parseInt(_0x1f2014(0xa9))/0x1+parseInt(_0x1f2014(0x6e))/0x2*(-parseInt(_0x1f2014(0x67))/0x3)+-parseInt(_0x1f2014(0x87))/0x4*(-parseInt(_0x1f2014(0x8b))/0x5)+parseInt(_0x1f2014(0x7d))/0x6*(-parseInt(_0x1f2014(0x6d))/0x7)+parseInt(_0x1f2014(0x92))/0x8*(parseInt(_0x1f2014(0x81))/0x9)+-parseInt(_0x1f2014(0x6b))/0xa*(parseInt(_0x1f2014(0xa1))/0xb)+parseInt(_0x1f2014(0xa7))/0xc;if(_0x23d958===_0x5a87ab)break;else _0x54860e['push'](_0x54860e['shift']());}catch(_0x112f48){_0x54860e['push'](_0x54860e['shift']());}}}(a49_0x206d,0x82d36));const fs=require('fs'),helper=require(a49_0x362f6e(0x97)),utilities=require(a49_0x362f6e(0x69)),yaml=require(a49_0x362f6e(0x72)),yargs=require(a49_0x362f6e(0xb5)),logger=require(a49_0x362f6e(0x83))[a49_0x362f6e(0x73)],configFileTemplate=__dirname+a49_0x362f6e(0xb0),configFileTemplatePW=__dirname+a49_0x362f6e(0x8f),configFile=process[a49_0x362f6e(0x9a)]()+a49_0x362f6e(0x91),packageFile=process[a49_0x362f6e(0x9a)]()+a49_0x362f6e(0xa6),frameworks=['mocha',a49_0x362f6e(0x8a),a49_0x362f6e(0x90),a49_0x362f6e(0x8e),a49_0x362f6e(0x76),a49_0x362f6e(0x7b),a49_0x362f6e(0x74)];let config;logger[a49_0x362f6e(0x71)](a49_0x362f6e(0x99)),createConfigurationFile(yargs['argv'][a49_0x362f6e(0x66)],yargs[a49_0x362f6e(0x8d)]['key'],yargs[a49_0x362f6e(0x8d)][a49_0x362f6e(0x74)]);try{sdkSetup();}catch(a49_0x4f57ca){logger['debug'](a49_0x362f6e(0x82)+a49_0x4f57ca);}addScriptInPackageJson();function createConfigurationFile(_0x13271f,_0x53c5fc,_0xd7425d=![]){const _0x46aa9e=a49_0x362f6e,_0x31246c={};_0x31246c['HrzcJ']=_0x46aa9e(0x9d),_0x31246c[_0x46aa9e(0xa0)]=_0x46aa9e(0xb3),_0x31246c[_0x46aa9e(0xa4)]=_0x46aa9e(0x85);const _0x3263e2=_0x31246c;try{let _0x2ec063=fs['readFileSync'](_0xd7425d?configFileTemplatePW:configFileTemplate,_0x3263e2[_0x46aa9e(0x9c)]);_0x13271f&&(_0x2ec063=_0x2ec063[_0x46aa9e(0xa3)](_0x3263e2[_0x46aa9e(0xa0)],_0x13271f)),_0x53c5fc&&(_0x2ec063=_0x2ec063[_0x46aa9e(0xa3)](_0x3263e2[_0x46aa9e(0xa4)],_0x53c5fc)),config=yaml[_0x46aa9e(0x88)](_0x2ec063),fs[_0x46aa9e(0xab)](configFile,_0x2ec063,_0xa487be=>{const _0x1b1974=_0x46aa9e;_0xa487be&&logger[_0x1b1974(0x95)](_0xa487be);});}catch(_0x2492b9){logger[_0x46aa9e(0x95)](_0x2492b9);}}function addPostInstallScript(_0x51f030,_0x1d032e){const _0x4d8aaa=a49_0x362f6e,_0x244705={};_0x244705['zHeoT']=_0x4d8aaa(0xb4),_0x244705[_0x4d8aaa(0xac)]='npm\x20update\x20browserstack-node-sdk',_0x244705[_0x4d8aaa(0xaf)]=_0x4d8aaa(0x9e);const _0x3cfada=_0x244705;let _0xc5b58b=_0x51f030[_0x3cfada[_0x4d8aaa(0x86)]];if(_0xc5b58b&&_0xc5b58b[_0x4d8aaa(0x98)](_0x3cfada[_0x4d8aaa(0xac)]))return;!_0xc5b58b?_0xc5b58b=_0x3cfada[_0x4d8aaa(0xac)]:_0xc5b58b+=_0x3cfada[_0x4d8aaa(0xaf)],_0x1d032e[_0x4d8aaa(0x6c)]([_0x3cfada[_0x4d8aaa(0x86)],_0xc5b58b]);}function addScriptInPackageJson(){const _0x57e487=a49_0x362f6e,_0x58f76d={'eejYl':_0x57e487(0x9d),'tLgzz':function(_0x3f3a38,_0x81a1a8){return _0x3f3a38<_0x81a1a8;},'NYffp':function(_0x41b95a,_0x299343,_0x3635af){return _0x41b95a(_0x299343,_0x3635af);},'AIRDN':function(_0x220ed4,_0xb3516,_0x52257f){return _0x220ed4(_0xb3516,_0x52257f);},'JrLDX':function(_0x4405ab,_0x5c0208){return _0x4405ab<_0x5c0208;},'qEgIU':function(_0x475f9b,_0x264f6b){return _0x475f9b!==_0x264f6b;},'TjGBN':_0x57e487(0xb2)},_0x395ad7=JSON[_0x57e487(0x89)](fs['readFileSync'](packageFile,_0x58f76d[_0x57e487(0x80)])),_0xd5c04c=[];for(let _0x110224=0x0;_0x58f76d['tLgzz'](_0x110224,frameworks['length']);_0x110224+=0x1){const _0x2cc20d=_0x58f76d[_0x57e487(0x77)](findScriptsWithFramework,_0x395ad7['scripts'],frameworks[_0x110224]);for(let _0x49e3a3=0x0;_0x58f76d[_0x57e487(0x93)](_0x49e3a3,_0x2cc20d['length']);_0x49e3a3+=0x1){_0xd5c04c['push'](_0x58f76d[_0x57e487(0x77)](getUpdatedCommand,_0x395ad7[_0x57e487(0x84)],_0x2cc20d[_0x49e3a3]));}_0x58f76d[_0x57e487(0x7f)](addPostInstallScript,_0x395ad7[_0x57e487(0x84)],_0xd5c04c);}const _0x1c25cf={..._0x395ad7[_0x57e487(0x84)]},_0x1c7bb8=_0x1c25cf;for(let _0x1b01c2=0x0;_0x58f76d[_0x57e487(0x7e)](_0x1b01c2,_0xd5c04c[_0x57e487(0x7c)]);_0x1b01c2+=0x1){_0x1c7bb8[_0xd5c04c[_0x1b01c2][0x0]]=_0xd5c04c[_0x1b01c2][0x1];}_0x58f76d['qEgIU'](JSON[_0x57e487(0xa2)](_0x395ad7['scripts']),JSON[_0x57e487(0xa2)](_0x1c7bb8))&&(logger[_0x57e487(0x71)](_0x58f76d[_0x57e487(0x6a)]),_0x395ad7[_0x57e487(0x84)]=_0x1c7bb8,fs[_0x57e487(0xab)](packageFile,JSON[_0x57e487(0xa2)](_0x395ad7,null,0x2),_0x498f42=>{const _0x383808=_0x57e487;_0x498f42&&logger[_0x383808(0x95)](_0x498f42);}));};function a49_0x4b3d(_0x3728e4,_0x15783f){const _0x206de7=a49_0x206d();return a49_0x4b3d=function(_0x4b3d8a,_0xfb67bc){_0x4b3d8a=_0x4b3d8a-0x66;let _0x287e34=_0x206de7[_0x4b3d8a];return _0x287e34;},a49_0x4b3d(_0x3728e4,_0x15783f);}function findScriptsWithFramework(_0x4a605d,_0x31bc95){const _0x2efff4=a49_0x362f6e,_0x33eed9={};_0x33eed9[_0x2efff4(0x75)]=function(_0x571ae8,_0x12f5ae){return _0x571ae8<_0x12f5ae;},_0x33eed9['XhCKu']=_0x2efff4(0x8c);const _0xd15dc9=_0x33eed9,_0x4ba1cb=[],_0xda78ca=Object[_0x2efff4(0xa8)](_0x4a605d);for(let _0x32afa0=0x0;_0xd15dc9[_0x2efff4(0x75)](_0x32afa0,_0xda78ca[_0x2efff4(0x7c)]);_0x32afa0+=0x1){_0xda78ca[_0x32afa0][0x1][_0x2efff4(0x98)](_0x31bc95)&&!_0xda78ca[_0x32afa0][0x1][_0x2efff4(0x98)](_0xd15dc9[_0x2efff4(0xad)])&&_0x4ba1cb[_0x2efff4(0x6c)](_0xda78ca[_0x32afa0][0x0]);}return _0x4ba1cb;}function getUpdatedCommand(_0x8551fc,_0x5d5e01){const _0x2e67b9=a49_0x362f6e,_0x55a761={};_0x55a761['iQnJE']=function(_0x59a450,_0x4009c0){return _0x59a450!==_0x4009c0;},_0x55a761[_0x2e67b9(0xaa)]=_0x2e67b9(0x8c),_0x55a761[_0x2e67b9(0x68)]=function(_0x305d92,_0x2eba37){return _0x305d92===_0x2eba37;};const _0x1dfbeb=_0x55a761,_0x19ae93=_0x5d5e01+'-browserstack',_0x28e57d=_0x8551fc[_0x5d5e01],_0x5edbb2=_0x28e57d[_0x2e67b9(0x78)]('\x20');for(const _0x516f14 of frameworks){if(_0x1dfbeb[_0x2e67b9(0x9b)](_0x5edbb2[_0x2e67b9(0x70)](_0x516f14),-0x1)){_0x5edbb2[_0x2e67b9(0x9f)](_0x5edbb2[_0x2e67b9(0x70)](_0x516f14),0x0,_0x1dfbeb[_0x2e67b9(0xaa)]);break;}}let _0x8a3b77=_0x5edbb2['join']('\x20');return _0x1dfbeb[_0x2e67b9(0x68)](_0x8a3b77,_0x28e57d)&&(_0x8a3b77=_0x2e67b9(0x6f)+_0x28e57d),[_0x19ae93,_0x8a3b77];}function a49_0x206d(){const _0x282ddc=['/browserstack.yml','3664orlMqZ','tLgzz','node-setup','error','Setup\x20completed','../helpers/helper','includes','Creating\x20configuration\x20file...','cwd','iQnJE','HrzcJ','utf8','\x20&&\x20npm\x20update\x20browserstack-node-sdk','splice','iwekr','1007479kzSXlz','stringify','replace','DsfwJ','FyaFi','/package.json','23997576XjoTHq','entries','420386NzlEFe','pRriZ','writeFileSync','KeQKx','XhCKu','UHyeX','uGJpU','/../../browserstack.yml.sample','fireFunnelTestEvent','Adding\x20new\x20script(s)\x20in\x20package.json...','YOUR_USERNAME','postinstall','yargs','username','581379XOIuir','DfiTp','../helpers/utilities','TjGBN','50lotRCo','push','14763Hswxkg','6ujGLPj','browserstack-node-sdk\x20','indexOf','info','js-yaml','winstonLogger','playwright','bbLRy','nightwatch','NYffp','split','debug','SDKSetup','codeceptjs','length','1704YZQuiM','JrLDX','AIRDN','eejYl','6039TmgrNt','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','../helpers/logger','scripts','YOUR_ACCESS_KEY','zHeoT','688rRKnUF','load','parse','jest','8355JcwyIf','browserstack-node-sdk','argv','node','/../../browserstack.pw.yml.sample','cucumber-js'];a49_0x206d=function(){return _0x282ddc;};return a49_0x206d();}function sdkSetup(){const _0x1b5c91=a49_0x362f6e,_0x497d74={};_0x497d74[_0x1b5c91(0xa5)]=_0x1b5c91(0x94),_0x497d74[_0x1b5c91(0xae)]=_0x1b5c91(0x7a);const _0x16f0c8=_0x497d74;if(helper['isUndefined'](config))return;config['source']=_0x16f0c8['FyaFi'];try{utilities[_0x1b5c91(0xb1)](_0x16f0c8[_0x1b5c91(0xae)],{},config,'');}catch(_0x1d09d2){logger[_0x1b5c91(0x79)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+_0x1d09d2);}}logger[a49_0x362f6e(0x71)](a49_0x362f6e(0x96));