#!/usr/bin/env node

const a49_0x79c210=a49_0x1742;function a49_0x1742(_0x4bda91,_0x44c700){const _0x33bf29=a49_0x33bf();return a49_0x1742=function(_0x174286,_0x262f68){_0x174286=_0x174286-0x91;let _0x1b59c6=_0x33bf29[_0x174286];return _0x1b59c6;},a49_0x1742(_0x4bda91,_0x44c700);}(function(_0x3b7281,_0x1728a9){const _0x220057=a49_0x1742,_0x2c8e7f=_0x3b7281();while(!![]){try{const _0x34765b=parseInt(_0x220057(0xc4))/0x1+-parseInt(_0x220057(0xae))/0x2+-parseInt(_0x220057(0x99))/0x3*(parseInt(_0x220057(0xc6))/0x4)+-parseInt(_0x220057(0xdc))/0x5*(-parseInt(_0x220057(0xc3))/0x6)+-parseInt(_0x220057(0xd9))/0x7*(-parseInt(_0x220057(0xd0))/0x8)+parseInt(_0x220057(0x9c))/0x9+-parseInt(_0x220057(0x9e))/0xa;if(_0x34765b===_0x1728a9)break;else _0x2c8e7f['push'](_0x2c8e7f['shift']());}catch(_0x133a3e){_0x2c8e7f['push'](_0x2c8e7f['shift']());}}}(a49_0x33bf,0x6c857));const fs=require('fs'),helper=require(a49_0x79c210(0xbb)),utilities=require(a49_0x79c210(0xb3)),yaml=require(a49_0x79c210(0xcc)),yargs=require(a49_0x79c210(0xbc)),logger=require('../helpers/logger')[a49_0x79c210(0x9f)],configFileTemplate=__dirname+a49_0x79c210(0x95),configFileTemplatePW=__dirname+a49_0x79c210(0x93),configFile=process[a49_0x79c210(0xac)]()+a49_0x79c210(0xba),packageFile=process['cwd']()+a49_0x79c210(0xd8),frameworks=['mocha','jest',a49_0x79c210(0xa5),a49_0x79c210(0xa0),a49_0x79c210(0xc0),'codeceptjs',a49_0x79c210(0xde)];let config;function a49_0x33bf(){const _0x4aa22d=['scripts','PfLRP','mxGPS','info','cwd','xGiuS','749736nDeQBd','\x20&&\x20npm\x20update\x20browserstack-node-sdk','includes','push','debug','../helpers/utilities','join','isUndefined','iWLrs','writeFileSync','WVlVp','Btnfz','/browserstack.yml','../helpers/helper','yargs','UFVOd','YOUR_USERNAME','split','nightwatch','gzawP','IlrSd','6XWbIab','869852HsEtjI','TrhmZ','3021884SAhJnh','ewMyt','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','Fsjyo','fireFunnelTestEvent','entries','js-yaml','eObuH','Setup\x20completed','node-setup','24mGvJYQ','length','WopeX','browserstack-node-sdk','indexOf','LlAAh','gmvrB','load','/package.json','734307AsRkpU','SDKSetup','postinstall','2906055doacnr','oqmeN','playwright','stringify','parse','/../../browserstack.pw.yml.sample','source','/../../browserstack.yml.sample','HkgSG','browserstack-node-sdk\x20','WSimb','3WbOEwL','Creating\x20configuration\x20file...','splice','7046343iqWZGH','argv','9738510uUfefe','winstonLogger','node','username','YOUR_ACCESS_KEY','replace','npm\x20update\x20browserstack-node-sdk','cucumber-js','error','readFileSync'];a49_0x33bf=function(){return _0x4aa22d;};return a49_0x33bf();}logger[a49_0x79c210(0xab)](a49_0x79c210(0x9a)),createConfigurationFile(yargs[a49_0x79c210(0x9d)][a49_0x79c210(0xa1)],yargs['argv']['key'],yargs[a49_0x79c210(0x9d)][a49_0x79c210(0xde)]);try{sdkSetup();}catch(a49_0x467da4){logger[a49_0x79c210(0xb2)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a49_0x467da4);}addScriptInPackageJson();function createConfigurationFile(_0x20db98,_0x422bf3,_0x33ea38=![]){const _0x29f6f6=a49_0x79c210,_0x5ab59e={};_0x5ab59e[_0x29f6f6(0xd2)]='utf8',_0x5ab59e[_0x29f6f6(0xc7)]=_0x29f6f6(0xbe),_0x5ab59e[_0x29f6f6(0xd5)]=_0x29f6f6(0xa2);const _0x151306=_0x5ab59e;try{let _0xfa37f7=fs[_0x29f6f6(0xa7)](_0x33ea38?configFileTemplatePW:configFileTemplate,_0x151306['WopeX']);_0x20db98&&(_0xfa37f7=_0xfa37f7[_0x29f6f6(0xa3)](_0x151306[_0x29f6f6(0xc7)],_0x20db98)),_0x422bf3&&(_0xfa37f7=_0xfa37f7['replace'](_0x151306['LlAAh'],_0x422bf3)),config=yaml[_0x29f6f6(0xd7)](_0xfa37f7),fs['writeFileSync'](configFile,_0xfa37f7,_0x53205a=>{_0x53205a&&logger['error'](_0x53205a);});}catch(_0x212380){logger[_0x29f6f6(0xa6)](_0x212380);}}function addPostInstallScript(_0x2c473b,_0x53921e){const _0x2c772d=a49_0x79c210,_0x4e2845={};_0x4e2845[_0x2c772d(0x96)]=_0x2c772d(0xdb),_0x4e2845[_0x2c772d(0xc5)]=_0x2c772d(0xa4),_0x4e2845['oqmeN']=_0x2c772d(0xaf);const _0x5c439d=_0x4e2845;let _0x591dab=_0x2c473b[_0x5c439d['HkgSG']];if(_0x591dab&&_0x591dab[_0x2c772d(0xb0)](_0x5c439d[_0x2c772d(0xc5)]))return;!_0x591dab?_0x591dab=_0x5c439d[_0x2c772d(0xc5)]:_0x591dab+=_0x5c439d[_0x2c772d(0xdd)],_0x53921e[_0x2c772d(0xb1)]([_0x5c439d[_0x2c772d(0x96)],_0x591dab]);}function addScriptInPackageJson(){const _0x93d348=a49_0x79c210,_0x3c9a46={'xGiuS':'utf8','eObuH':function(_0x43339e,_0x5c457c){return _0x43339e<_0x5c457c;},'gzawP':function(_0x13373c,_0x5f3867,_0xa4bb18){return _0x13373c(_0x5f3867,_0xa4bb18);},'mxGPS':function(_0x5d76cb,_0x4cf880){return _0x5d76cb<_0x4cf880;},'fjglO':function(_0x5f31cc,_0x112641,_0x447ce2){return _0x5f31cc(_0x112641,_0x447ce2);},'UFVOd':function(_0x20980,_0x2862f4,_0x43f11c){return _0x20980(_0x2862f4,_0x43f11c);},'eKGuM':function(_0x3fc28b,_0x418a16){return _0x3fc28b<_0x418a16;},'iWLrs':function(_0xf75898,_0x3f7373){return _0xf75898!==_0x3f7373;},'IlrSd':'Adding\x20new\x20script(s)\x20in\x20package.json...'},_0x225c4e=JSON[_0x93d348(0x92)](fs[_0x93d348(0xa7)](packageFile,_0x3c9a46[_0x93d348(0xad)])),_0x255cbd=[];for(let _0x463b31=0x0;_0x3c9a46[_0x93d348(0xcd)](_0x463b31,frameworks['length']);_0x463b31+=0x1){const _0x4ef236=_0x3c9a46[_0x93d348(0xc1)](findScriptsWithFramework,_0x225c4e[_0x93d348(0xa8)],frameworks[_0x463b31]);for(let _0x50dd02=0x0;_0x3c9a46[_0x93d348(0xaa)](_0x50dd02,_0x4ef236['length']);_0x50dd02+=0x1){_0x255cbd[_0x93d348(0xb1)](_0x3c9a46['fjglO'](getUpdatedCommand,_0x225c4e[_0x93d348(0xa8)],_0x4ef236[_0x50dd02]));}_0x3c9a46[_0x93d348(0xbd)](addPostInstallScript,_0x225c4e[_0x93d348(0xa8)],_0x255cbd);}const _0x204e31={..._0x225c4e[_0x93d348(0xa8)]},_0xf36174=_0x204e31;for(let _0x4f7525=0x0;_0x3c9a46['eKGuM'](_0x4f7525,_0x255cbd[_0x93d348(0xd1)]);_0x4f7525+=0x1){_0xf36174[_0x255cbd[_0x4f7525][0x0]]=_0x255cbd[_0x4f7525][0x1];}_0x3c9a46[_0x93d348(0xb6)](JSON[_0x93d348(0x91)](_0x225c4e['scripts']),JSON[_0x93d348(0x91)](_0xf36174))&&(logger[_0x93d348(0xab)](_0x3c9a46[_0x93d348(0xc2)]),_0x225c4e['scripts']=_0xf36174,fs[_0x93d348(0xb7)](packageFile,JSON[_0x93d348(0x91)](_0x225c4e,null,0x2),_0x4cef70=>{_0x4cef70&&logger['error'](_0x4cef70);}));};function findScriptsWithFramework(_0x259989,_0x4060ec){const _0x267456=a49_0x79c210,_0x5c164b={};_0x5c164b[_0x267456(0xd6)]=function(_0x473632,_0x57f7ff){return _0x473632<_0x57f7ff;},_0x5c164b[_0x267456(0xb8)]=_0x267456(0xd3);const _0x56fb8d=_0x5c164b,_0x3713ff=[],_0x3751d8=Object[_0x267456(0xcb)](_0x259989);for(let _0xa2cf33=0x0;_0x56fb8d[_0x267456(0xd6)](_0xa2cf33,_0x3751d8[_0x267456(0xd1)]);_0xa2cf33+=0x1){_0x3751d8[_0xa2cf33][0x1]['includes'](_0x4060ec)&&!_0x3751d8[_0xa2cf33][0x1][_0x267456(0xb0)](_0x56fb8d[_0x267456(0xb8)])&&_0x3713ff[_0x267456(0xb1)](_0x3751d8[_0xa2cf33][0x0]);}return _0x3713ff;}function getUpdatedCommand(_0x4661d1,_0x3a7c34){const _0x35c80a=a49_0x79c210,_0x3d88ed={};_0x3d88ed[_0x35c80a(0xb9)]=function(_0x3b307b,_0x366a90){return _0x3b307b!==_0x366a90;},_0x3d88ed[_0x35c80a(0xc9)]=_0x35c80a(0xd3),_0x3d88ed[_0x35c80a(0x98)]=function(_0x183040,_0x4a4efa){return _0x183040===_0x4a4efa;};const _0x4c472a=_0x3d88ed,_0x344f65=_0x3a7c34+'-browserstack',_0x5c0298=_0x4661d1[_0x3a7c34],_0x34d070=_0x5c0298[_0x35c80a(0xbf)]('\x20');for(const _0x5e2fb5 of frameworks){if(_0x4c472a['Btnfz'](_0x34d070['indexOf'](_0x5e2fb5),-0x1)){_0x34d070[_0x35c80a(0x9b)](_0x34d070[_0x35c80a(0xd4)](_0x5e2fb5),0x0,_0x4c472a[_0x35c80a(0xc9)]);break;}}let _0x4b1cb9=_0x34d070[_0x35c80a(0xb4)]('\x20');return _0x4c472a[_0x35c80a(0x98)](_0x4b1cb9,_0x5c0298)&&(_0x4b1cb9=_0x35c80a(0x97)+_0x5c0298),[_0x344f65,_0x4b1cb9];}function sdkSetup(){const _0x36d3ea=a49_0x79c210,_0x4216c6={};_0x4216c6[_0x36d3ea(0xa9)]=_0x36d3ea(0xcf),_0x4216c6['LVgqy']=_0x36d3ea(0xda);const _0x5c93ed=_0x4216c6;if(helper[_0x36d3ea(0xb5)](config))return;config[_0x36d3ea(0x94)]=_0x5c93ed['PfLRP'];try{utilities[_0x36d3ea(0xca)](_0x5c93ed['LVgqy'],{},config,'');}catch(_0x335c23){logger['debug'](_0x36d3ea(0xc8)+_0x335c23);}}logger[a49_0x79c210(0xab)](a49_0x79c210(0xce));