#!/usr/bin/env node

const a50_0x48db37=a50_0x16de;(function(_0x3f0ada,_0x1ced9f){const _0x5ace98=a50_0x16de,_0x2d5167=_0x3f0ada();while(!![]){try{const _0x111c17=-parseInt(_0x5ace98(0x1cc))/0x1+parseInt(_0x5ace98(0x1e0))/0x2+parseInt(_0x5ace98(0x1e2))/0x3+-parseInt(_0x5ace98(0x1f7))/0x4*(parseInt(_0x5ace98(0x1ef))/0x5)+-parseInt(_0x5ace98(0x1d6))/0x6+parseInt(_0x5ace98(0x1d9))/0x7*(-parseInt(_0x5ace98(0x1bd))/0x8)+-parseInt(_0x5ace98(0x1da))/0x9*(-parseInt(_0x5ace98(0x1cb))/0xa);if(_0x111c17===_0x1ced9f)break;else _0x2d5167['push'](_0x2d5167['shift']());}catch(_0x439d12){_0x2d5167['push'](_0x2d5167['shift']());}}}(a50_0x2fdc,0xadf8f));const fs=require('fs'),helper=require('../helpers/helper'),utilities=require('../helpers/utilities'),yaml=require('js-yaml'),yargs=require(a50_0x48db37(0x1e7)),logger=require(a50_0x48db37(0x1f6))[a50_0x48db37(0x1cf)],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+a50_0x48db37(0x1bb),configFile=process['cwd']()+a50_0x48db37(0x1c5),packageFile=process[a50_0x48db37(0x1db)]()+'/package.json',frameworks=[a50_0x48db37(0x1b9),'jest',a50_0x48db37(0x1dd),a50_0x48db37(0x1ee),a50_0x48db37(0x1c4),a50_0x48db37(0x1e3),a50_0x48db37(0x1b8)];function a50_0x16de(_0x162461,_0x1fc3df){const _0x2fdc72=a50_0x2fdc();return a50_0x16de=function(_0x16de1d,_0x25ef5c){_0x16de1d=_0x16de1d-0x1b5;let _0x35207c=_0x2fdc72[_0x16de1d];return _0x35207c;},a50_0x16de(_0x162461,_0x1fc3df);}let config;logger[a50_0x48db37(0x1c8)](a50_0x48db37(0x1f5)),createConfigurationFile(yargs[a50_0x48db37(0x1bc)][a50_0x48db37(0x1d3)],yargs[a50_0x48db37(0x1bc)][a50_0x48db37(0x1f4)],yargs[a50_0x48db37(0x1bc)][a50_0x48db37(0x1b8)]);try{sdkSetup();}catch(a50_0x44559b){logger[a50_0x48db37(0x1d4)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a50_0x44559b);}addScriptInPackageJson();function a50_0x2fdc(){const _0x53ad87=['517108cejlXN','stringify','sfGbq','length','node-setup','load','scripts','GzzPM','RezFU','qNdcx','playwright','mocha','writeFileSync','/../../browserstack.pw.yml.sample','argv','5624FPKbhX','CRqxW','isUndefined','YHjvE','LfQQY','HwtUD','indexOf','nightwatch','/browserstack.yml','splice','browserstack-node-sdk\x20','info','YHVHS','\x20&&\x20npm\x20update\x20browserstack-node-sdk','19131130GaxeBH','731242CnaQGr','fireFunnelTestEvent','readFileSync','winstonLogger','uRiMh','parse','join','username','debug','lhKjB','2459274IWOEIc','postinstall','includes','3283RDliKa','9UmflRE','cwd','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','cucumber-js','BFTeH','push','522664ZjUCaY','EnkpF','1966077ZrPhgQ','codeceptjs','YOUR_ACCESS_KEY','Setup\x20completed','browserstack-node-sdk','yargs','LJJGj','utf8','entries','-browserstack','DgIMe','error','node','25sYMAHg','SDKSetup','source','adLwE','hRhvO','key','Creating\x20configuration\x20file...','../helpers/logger'];a50_0x2fdc=function(){return _0x53ad87;};return a50_0x2fdc();}function createConfigurationFile(_0x59507c,_0x12c044,_0x1186aa=![]){const _0x59a064=a50_0x48db37,_0x4fbca7={};_0x4fbca7[_0x59a064(0x1ec)]='utf8',_0x4fbca7['pkTxs']='YOUR_USERNAME',_0x4fbca7[_0x59a064(0x1c9)]=_0x59a064(0x1e4);const _0x345012=_0x4fbca7;try{let _0x20cb0e=fs[_0x59a064(0x1ce)](_0x1186aa?configFileTemplatePW:configFileTemplate,_0x345012['DgIMe']);_0x59507c&&(_0x20cb0e=_0x20cb0e['replace'](_0x345012['pkTxs'],_0x59507c)),_0x12c044&&(_0x20cb0e=_0x20cb0e['replace'](_0x345012[_0x59a064(0x1c9)],_0x12c044)),config=yaml[_0x59a064(0x1fc)](_0x20cb0e),fs[_0x59a064(0x1ba)](configFile,_0x20cb0e,_0x128d72=>{const _0x293282=_0x59a064;_0x128d72&&logger[_0x293282(0x1ed)](_0x128d72);});}catch(_0x9660a0){logger[_0x59a064(0x1ed)](_0x9660a0);}}function addPostInstallScript(_0x1c59e9,_0x3d218d){const _0x23ea39=a50_0x48db37,_0x2d3984={};_0x2d3984[_0x23ea39(0x1b5)]=_0x23ea39(0x1d7),_0x2d3984[_0x23ea39(0x1f3)]='npm\x20update\x20browserstack-node-sdk',_0x2d3984[_0x23ea39(0x1f9)]=_0x23ea39(0x1ca);const _0x670ea7=_0x2d3984;let _0xb7d2f9=_0x1c59e9[_0x670ea7[_0x23ea39(0x1b5)]];if(_0xb7d2f9&&_0xb7d2f9[_0x23ea39(0x1d8)](_0x670ea7[_0x23ea39(0x1f3)]))return;!_0xb7d2f9?_0xb7d2f9=_0x670ea7[_0x23ea39(0x1f3)]:_0xb7d2f9+=_0x670ea7['sfGbq'],_0x3d218d[_0x23ea39(0x1df)]([_0x670ea7[_0x23ea39(0x1b5)],_0xb7d2f9]);}function addScriptInPackageJson(){const _0x858dda=a50_0x48db37,_0x3eec65={'LfQQY':_0x858dda(0x1e9),'qNdcx':function(_0x25a4bc,_0x5538ab){return _0x25a4bc<_0x5538ab;},'LJJGj':function(_0x3737b7,_0x187d08,_0x33c60f){return _0x3737b7(_0x187d08,_0x33c60f);},'YHjvE':function(_0x57f9d6,_0xef4fbb,_0x41039a){return _0x57f9d6(_0xef4fbb,_0x41039a);},'wkMsf':function(_0x23f054,_0x587ac0){return _0x23f054!==_0x587ac0;},'RezFU':'Adding\x20new\x20script(s)\x20in\x20package.json...'},_0x1ea9f5=JSON[_0x858dda(0x1d1)](fs['readFileSync'](packageFile,_0x3eec65[_0x858dda(0x1c1)])),_0x142b8c=[];for(let _0x228be5=0x0;_0x3eec65[_0x858dda(0x1b7)](_0x228be5,frameworks[_0x858dda(0x1fa)]);_0x228be5+=0x1){const _0x17d78a=_0x3eec65[_0x858dda(0x1e8)](findScriptsWithFramework,_0x1ea9f5[_0x858dda(0x1fd)],frameworks[_0x228be5]);for(let _0x2a25b0=0x0;_0x3eec65[_0x858dda(0x1b7)](_0x2a25b0,_0x17d78a[_0x858dda(0x1fa)]);_0x2a25b0+=0x1){_0x142b8c[_0x858dda(0x1df)](_0x3eec65[_0x858dda(0x1c0)](getUpdatedCommand,_0x1ea9f5['scripts'],_0x17d78a[_0x2a25b0]));}_0x3eec65['LJJGj'](addPostInstallScript,_0x1ea9f5[_0x858dda(0x1fd)],_0x142b8c);}const _0x21fcae={..._0x1ea9f5['scripts']},_0x5c7799=_0x21fcae;for(let _0x5ce100=0x0;_0x3eec65['qNdcx'](_0x5ce100,_0x142b8c[_0x858dda(0x1fa)]);_0x5ce100+=0x1){_0x5c7799[_0x142b8c[_0x5ce100][0x0]]=_0x142b8c[_0x5ce100][0x1];}_0x3eec65['wkMsf'](JSON[_0x858dda(0x1f8)](_0x1ea9f5[_0x858dda(0x1fd)]),JSON[_0x858dda(0x1f8)](_0x5c7799))&&(logger['info'](_0x3eec65[_0x858dda(0x1b6)]),_0x1ea9f5[_0x858dda(0x1fd)]=_0x5c7799,fs[_0x858dda(0x1ba)](packageFile,JSON['stringify'](_0x1ea9f5,null,0x2),_0x1bf94e=>{const _0x488c75=_0x858dda;_0x1bf94e&&logger[_0x488c75(0x1ed)](_0x1bf94e);}));};function findScriptsWithFramework(_0x590a3a,_0x2e2f76){const _0xca501a=a50_0x48db37,_0x126063={};_0x126063['adLwE']=function(_0x34013f,_0x42e7d5){return _0x34013f<_0x42e7d5;},_0x126063[_0xca501a(0x1c2)]=_0xca501a(0x1e6);const _0x25872c=_0x126063,_0x2abd86=[],_0x3e74d5=Object[_0xca501a(0x1ea)](_0x590a3a);for(let _0x1d014b=0x0;_0x25872c[_0xca501a(0x1f2)](_0x1d014b,_0x3e74d5['length']);_0x1d014b+=0x1){_0x3e74d5[_0x1d014b][0x1][_0xca501a(0x1d8)](_0x2e2f76)&&!_0x3e74d5[_0x1d014b][0x1][_0xca501a(0x1d8)](_0x25872c[_0xca501a(0x1c2)])&&_0x2abd86[_0xca501a(0x1df)](_0x3e74d5[_0x1d014b][0x0]);}return _0x2abd86;}function getUpdatedCommand(_0x45dfa7,_0x4f7fc8){const _0x5c3fb8=a50_0x48db37,_0x1a3e3e={};_0x1a3e3e[_0x5c3fb8(0x1d0)]=function(_0x166801,_0x3de0a2){return _0x166801!==_0x3de0a2;},_0x1a3e3e['BFTeH']=_0x5c3fb8(0x1e6),_0x1a3e3e['CRqxW']=function(_0x24388a,_0x360cb0){return _0x24388a===_0x360cb0;};const _0x3a8196=_0x1a3e3e,_0x40d564=_0x4f7fc8+_0x5c3fb8(0x1eb),_0x29b91a=_0x45dfa7[_0x4f7fc8],_0x5d1e78=_0x29b91a['split']('\x20');for(const _0x42bc23 of frameworks){if(_0x3a8196[_0x5c3fb8(0x1d0)](_0x5d1e78['indexOf'](_0x42bc23),-0x1)){_0x5d1e78[_0x5c3fb8(0x1c6)](_0x5d1e78[_0x5c3fb8(0x1c3)](_0x42bc23),0x0,_0x3a8196[_0x5c3fb8(0x1de)]);break;}}let _0x2a2669=_0x5d1e78[_0x5c3fb8(0x1d2)]('\x20');return _0x3a8196[_0x5c3fb8(0x1be)](_0x2a2669,_0x29b91a)&&(_0x2a2669=_0x5c3fb8(0x1c7)+_0x29b91a),[_0x40d564,_0x2a2669];}function sdkSetup(){const _0x186f02=a50_0x48db37,_0x53c42d={};_0x53c42d[_0x186f02(0x1e1)]=_0x186f02(0x1fb),_0x53c42d[_0x186f02(0x1d5)]=_0x186f02(0x1f0);const _0x5266ad=_0x53c42d;if(helper[_0x186f02(0x1bf)](config))return;config[_0x186f02(0x1f1)]=_0x5266ad[_0x186f02(0x1e1)];try{utilities[_0x186f02(0x1cd)](_0x5266ad[_0x186f02(0x1d5)],{},config,'');}catch(_0x4949aa){logger['debug'](_0x186f02(0x1dc)+_0x4949aa);}}logger[a50_0x48db37(0x1c8)](a50_0x48db37(0x1e5));