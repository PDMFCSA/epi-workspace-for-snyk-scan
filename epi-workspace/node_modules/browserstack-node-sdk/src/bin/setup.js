#!/usr/bin/env node

const a49_0x166a80=a49_0x5082;(function(_0x394d8d,_0x1717df){const _0x863338=a49_0x5082,_0x7f74ad=_0x394d8d();while(!![]){try{const _0x46623f=parseInt(_0x863338(0x15b))/0x1*(parseInt(_0x863338(0x14e))/0x2)+-parseInt(_0x863338(0x12f))/0x3*(parseInt(_0x863338(0x143))/0x4)+parseInt(_0x863338(0x132))/0x5+parseInt(_0x863338(0x167))/0x6+-parseInt(_0x863338(0x170))/0x7+parseInt(_0x863338(0x13a))/0x8+-parseInt(_0x863338(0x169))/0x9;if(_0x46623f===_0x1717df)break;else _0x7f74ad['push'](_0x7f74ad['shift']());}catch(_0x336b09){_0x7f74ad['push'](_0x7f74ad['shift']());}}}(a49_0x1d3f,0xd45d2));const fs=require('fs'),helper=require(a49_0x166a80(0x157)),utilities=require('../helpers/utilities'),yaml=require(a49_0x166a80(0x139)),yargs=require(a49_0x166a80(0x16c)),logger=require(a49_0x166a80(0x171))[a49_0x166a80(0x12d)],configFileTemplate=__dirname+a49_0x166a80(0x147),configFileTemplatePW=__dirname+a49_0x166a80(0x15a),configFile=process[a49_0x166a80(0x165)]()+a49_0x166a80(0x151),packageFile=process[a49_0x166a80(0x165)]()+a49_0x166a80(0x16d),frameworks=['mocha',a49_0x166a80(0x13c),'cucumber-js',a49_0x166a80(0x134),a49_0x166a80(0x156),a49_0x166a80(0x159),'playwright'];function a49_0x5082(_0x3ed298,_0x252ae5){const _0x1d3fd8=a49_0x1d3f();return a49_0x5082=function(_0x508245,_0x531064){_0x508245=_0x508245-0x12d;let _0x38e8fd=_0x1d3fd8[_0x508245];return _0x38e8fd;},a49_0x5082(_0x3ed298,_0x252ae5);}let config;logger[a49_0x166a80(0x145)](a49_0x166a80(0x163)),createConfigurationFile(yargs[a49_0x166a80(0x135)][a49_0x166a80(0x130)],yargs[a49_0x166a80(0x135)][a49_0x166a80(0x142)],yargs[a49_0x166a80(0x135)]['playwright']);try{sdkSetup();}catch(a49_0x192c20){logger['debug']('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a49_0x192c20);}addScriptInPackageJson();function createConfigurationFile(_0x1700aa,_0x2ac9de,_0x41123a=![]){const _0x2efb3c=a49_0x166a80,_0x371018={};_0x371018[_0x2efb3c(0x141)]='utf8',_0x371018[_0x2efb3c(0x131)]=_0x2efb3c(0x136),_0x371018[_0x2efb3c(0x148)]=_0x2efb3c(0x153);const _0x5b4fc5=_0x371018;try{let _0x9164dd=fs[_0x2efb3c(0x133)](_0x41123a?configFileTemplatePW:configFileTemplate,_0x5b4fc5[_0x2efb3c(0x141)]);_0x1700aa&&(_0x9164dd=_0x9164dd[_0x2efb3c(0x16e)](_0x5b4fc5[_0x2efb3c(0x131)],_0x1700aa)),_0x2ac9de&&(_0x9164dd=_0x9164dd['replace'](_0x5b4fc5[_0x2efb3c(0x148)],_0x2ac9de)),config=yaml[_0x2efb3c(0x138)](_0x9164dd),fs[_0x2efb3c(0x164)](configFile,_0x9164dd,_0x499d3f=>{const _0x5f09f2=_0x2efb3c;_0x499d3f&&logger[_0x5f09f2(0x160)](_0x499d3f);});}catch(_0x4d1c6f){logger[_0x2efb3c(0x160)](_0x4d1c6f);}}function addPostInstallScript(_0x49a444,_0xe624c2){const _0x46bcc6=a49_0x166a80,_0xdb2774={};_0xdb2774[_0x46bcc6(0x144)]=_0x46bcc6(0x173),_0xdb2774[_0x46bcc6(0x166)]=_0x46bcc6(0x137),_0xdb2774[_0x46bcc6(0x13f)]=_0x46bcc6(0x168);const _0x54bdde=_0xdb2774;let _0x1817af=_0x49a444[_0x54bdde['ExJzJ']];if(_0x1817af&&_0x1817af[_0x46bcc6(0x15e)](_0x54bdde[_0x46bcc6(0x166)]))return;!_0x1817af?_0x1817af=_0x54bdde['oYxFw']:_0x1817af+=_0x54bdde['WxUke'],_0xe624c2[_0x46bcc6(0x15c)]([_0x54bdde[_0x46bcc6(0x144)],_0x1817af]);}function addScriptInPackageJson(){const _0x121276=a49_0x166a80,_0x2828d0={'xwDID':_0x121276(0x14d),'QGMxl':function(_0x157e21,_0x3d0df1){return _0x157e21<_0x3d0df1;},'jZuUF':function(_0x1dc0b7,_0x317288,_0x30b0f9){return _0x1dc0b7(_0x317288,_0x30b0f9);},'MYORF':function(_0x4bcc3b,_0x42c7bc,_0x4877ae){return _0x4bcc3b(_0x42c7bc,_0x4877ae);},'pHLHt':function(_0x47c650,_0x13717c,_0x2769ab){return _0x47c650(_0x13717c,_0x2769ab);},'iyprX':function(_0x251f06,_0x4b5121){return _0x251f06!==_0x4b5121;},'MgKHc':_0x121276(0x13b)},_0xcbe49d=JSON[_0x121276(0x154)](fs['readFileSync'](packageFile,_0x2828d0[_0x121276(0x150)])),_0x2e5ad2=[];for(let _0xecff58=0x0;_0x2828d0['QGMxl'](_0xecff58,frameworks[_0x121276(0x16b)]);_0xecff58+=0x1){const _0x4bac18=_0x2828d0[_0x121276(0x140)](findScriptsWithFramework,_0xcbe49d[_0x121276(0x146)],frameworks[_0xecff58]);for(let _0x1ce58d=0x0;_0x2828d0['QGMxl'](_0x1ce58d,_0x4bac18[_0x121276(0x16b)]);_0x1ce58d+=0x1){_0x2e5ad2[_0x121276(0x15c)](_0x2828d0['MYORF'](getUpdatedCommand,_0xcbe49d[_0x121276(0x146)],_0x4bac18[_0x1ce58d]));}_0x2828d0[_0x121276(0x13d)](addPostInstallScript,_0xcbe49d['scripts'],_0x2e5ad2);}const _0x42de7a={..._0xcbe49d[_0x121276(0x146)]},_0x130901=_0x42de7a;for(let _0x5c7894=0x0;_0x2828d0['QGMxl'](_0x5c7894,_0x2e5ad2['length']);_0x5c7894+=0x1){_0x130901[_0x2e5ad2[_0x5c7894][0x0]]=_0x2e5ad2[_0x5c7894][0x1];}_0x2828d0[_0x121276(0x14f)](JSON[_0x121276(0x14b)](_0xcbe49d[_0x121276(0x146)]),JSON[_0x121276(0x14b)](_0x130901))&&(logger[_0x121276(0x145)](_0x2828d0['MgKHc']),_0xcbe49d[_0x121276(0x146)]=_0x130901,fs[_0x121276(0x164)](packageFile,JSON[_0x121276(0x14b)](_0xcbe49d,null,0x2),_0x596448=>{const _0x4fddba=_0x121276;_0x596448&&logger[_0x4fddba(0x160)](_0x596448);}));}function a49_0x1d3f(){const _0x257464=['username','ROIVh','4907740LnzEAa','readFileSync','node','argv','YOUR_USERNAME','npm\x20update\x20browserstack-node-sdk','load','js-yaml','7255920PwmvbY','Adding\x20new\x20script(s)\x20in\x20package.json...','jest','pHLHt','SDKSetup','WxUke','jZuUF','CFfQm','key','2752836RUkvBM','ExJzJ','info','scripts','/../../browserstack.yml.sample','GZxVb','browserstack-node-sdk','browserstack-node-sdk\x20','stringify','nDAcU','utf8','890qcNiVc','iyprX','xwDID','/browserstack.yml','source','YOUR_ACCESS_KEY','parse','eryVP','nightwatch','../helpers/helper','indexOf','codeceptjs','/../../browserstack.pw.yml.sample','38tYUYiR','push','sBORR','includes','sAALn','error','eFlUK','entries','Creating\x20configuration\x20file...','writeFileSync','cwd','oYxFw','5115348aUSKJB','\x20&&\x20npm\x20update\x20browserstack-node-sdk','7310025ICCnls','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','length','yargs','/package.json','replace','debug','2714110JSxKmQ','../helpers/logger','Setup\x20completed','postinstall','winstonLogger','oIvkS','3DTAGBb'];a49_0x1d3f=function(){return _0x257464;};return a49_0x1d3f();};function findScriptsWithFramework(_0x4da8fe,_0x4e9a14){const _0x58116a=a49_0x166a80,_0x4537bf={};_0x4537bf['wwKKp']=function(_0x1768e8,_0x210490){return _0x1768e8<_0x210490;},_0x4537bf[_0x58116a(0x12e)]='browserstack-node-sdk';const _0x4e00cb=_0x4537bf,_0x3cd754=[],_0x17c888=Object[_0x58116a(0x162)](_0x4da8fe);for(let _0x2f7e8e=0x0;_0x4e00cb['wwKKp'](_0x2f7e8e,_0x17c888[_0x58116a(0x16b)]);_0x2f7e8e+=0x1){_0x17c888[_0x2f7e8e][0x1][_0x58116a(0x15e)](_0x4e9a14)&&!_0x17c888[_0x2f7e8e][0x1][_0x58116a(0x15e)](_0x4e00cb['oIvkS'])&&_0x3cd754[_0x58116a(0x15c)](_0x17c888[_0x2f7e8e][0x0]);}return _0x3cd754;}function getUpdatedCommand(_0x52c236,_0x2d6a9e){const _0xbeac1a=a49_0x166a80,_0x1b1e33={};_0x1b1e33[_0xbeac1a(0x15d)]=function(_0x35dfa6,_0x2bf63e){return _0x35dfa6!==_0x2bf63e;},_0x1b1e33[_0xbeac1a(0x155)]=_0xbeac1a(0x149),_0x1b1e33[_0xbeac1a(0x161)]=function(_0x541e5b,_0xef86c8){return _0x541e5b===_0xef86c8;};const _0x1e4053=_0x1b1e33,_0x11780b=_0x2d6a9e+'-browserstack',_0x5cf31d=_0x52c236[_0x2d6a9e],_0x5eb133=_0x5cf31d['split']('\x20');for(const _0x447d27 of frameworks){if(_0x1e4053[_0xbeac1a(0x15d)](_0x5eb133[_0xbeac1a(0x158)](_0x447d27),-0x1)){_0x5eb133['splice'](_0x5eb133[_0xbeac1a(0x158)](_0x447d27),0x0,_0x1e4053[_0xbeac1a(0x155)]);break;}}let _0x14c9b9=_0x5eb133['join']('\x20');return _0x1e4053[_0xbeac1a(0x161)](_0x14c9b9,_0x5cf31d)&&(_0x14c9b9=_0xbeac1a(0x14a)+_0x5cf31d),[_0x11780b,_0x14c9b9];}function sdkSetup(){const _0x5cf9a8=a49_0x166a80,_0x2da1a6={};_0x2da1a6[_0x5cf9a8(0x15f)]='node-setup',_0x2da1a6[_0x5cf9a8(0x14c)]=_0x5cf9a8(0x13e);const _0x1fcabc=_0x2da1a6;if(helper['isUndefined'](config))return;config[_0x5cf9a8(0x152)]=_0x1fcabc[_0x5cf9a8(0x15f)];try{utilities['fireFunnelTestEvent'](_0x1fcabc[_0x5cf9a8(0x14c)],{},config,'');}catch(_0x5676d5){logger[_0x5cf9a8(0x16f)](_0x5cf9a8(0x16a)+_0x5676d5);}}logger[a49_0x166a80(0x145)](a49_0x166a80(0x172));