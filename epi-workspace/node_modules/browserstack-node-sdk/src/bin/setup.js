#!/usr/bin/env node

const a48_0x5daf20=a48_0x2032;(function(_0x16db2c,_0x355e9b){const _0x5d6cb0=a48_0x2032,_0x267af9=_0x16db2c();while(!![]){try{const _0x2c3db1=parseInt(_0x5d6cb0(0x1b3))/0x1+parseInt(_0x5d6cb0(0x1a5))/0x2+-parseInt(_0x5d6cb0(0x17f))/0x3*(parseInt(_0x5d6cb0(0x196))/0x4)+-parseInt(_0x5d6cb0(0x184))/0x5*(parseInt(_0x5d6cb0(0x1a4))/0x6)+parseInt(_0x5d6cb0(0x18f))/0x7+-parseInt(_0x5d6cb0(0x1ae))/0x8*(-parseInt(_0x5d6cb0(0x180))/0x9)+-parseInt(_0x5d6cb0(0x1b6))/0xa;if(_0x2c3db1===_0x355e9b)break;else _0x267af9['push'](_0x267af9['shift']());}catch(_0x33d994){_0x267af9['push'](_0x267af9['shift']());}}}(a48_0x4782,0x34374));function a48_0x2032(_0x1e9007,_0x3484f7){const _0x4782f5=a48_0x4782();return a48_0x2032=function(_0x2032a3,_0x1b345a){_0x2032a3=_0x2032a3-0x16a;let _0x248ba5=_0x4782f5[_0x2032a3];return _0x248ba5;},a48_0x2032(_0x1e9007,_0x3484f7);}const fs=require('fs'),helper=require('../helpers/helper'),utilities=require(a48_0x5daf20(0x1b1)),yaml=require(a48_0x5daf20(0x1a8)),yargs=require(a48_0x5daf20(0x170)),logger=require(a48_0x5daf20(0x181))[a48_0x5daf20(0x197)],configFileTemplate=__dirname+a48_0x5daf20(0x17d),configFileTemplatePW=__dirname+a48_0x5daf20(0x19f),configFile=process['cwd']()+a48_0x5daf20(0x1a3),packageFile=process[a48_0x5daf20(0x174)]()+a48_0x5daf20(0x183),frameworks=[a48_0x5daf20(0x1b2),'jest',a48_0x5daf20(0x1a1),'node',a48_0x5daf20(0x199),a48_0x5daf20(0x1ac),a48_0x5daf20(0x17a)];let config;logger[a48_0x5daf20(0x1b8)](a48_0x5daf20(0x18e)),createConfigurationFile(yargs['argv']['username'],yargs[a48_0x5daf20(0x17c)][a48_0x5daf20(0x16a)],yargs[a48_0x5daf20(0x17c)][a48_0x5daf20(0x17a)]);try{sdkSetup();}catch(a48_0x4d4d3a){logger['debug'](a48_0x5daf20(0x1ab)+a48_0x4d4d3a);}addScriptInPackageJson();function createConfigurationFile(_0x4f2f03,_0x2c3af7,_0xe26f4e=![]){const _0x57d197=a48_0x5daf20,_0x1d1885={};_0x1d1885[_0x57d197(0x1a0)]=_0x57d197(0x191),_0x1d1885[_0x57d197(0x176)]=_0x57d197(0x1b5),_0x1d1885['UjDMt']=_0x57d197(0x182);const _0x28b30a=_0x1d1885;try{let _0x19c072=fs[_0x57d197(0x18c)](_0xe26f4e?configFileTemplatePW:configFileTemplate,_0x28b30a[_0x57d197(0x1a0)]);_0x4f2f03&&(_0x19c072=_0x19c072[_0x57d197(0x189)](_0x28b30a[_0x57d197(0x176)],_0x4f2f03)),_0x2c3af7&&(_0x19c072=_0x19c072['replace'](_0x28b30a[_0x57d197(0x192)],_0x2c3af7)),config=yaml['load'](_0x19c072),fs[_0x57d197(0x198)](configFile,_0x19c072,_0x58ff98=>{const _0x2ad642=_0x57d197;_0x58ff98&&logger[_0x2ad642(0x172)](_0x58ff98);});}catch(_0x2116c1){logger[_0x57d197(0x172)](_0x2116c1);}}function a48_0x4782(){const _0x1d990c=['includes','playwright','UeeTo','argv','/../../browserstack.yml.sample','debug','8181yyJVmE','416781rklEVO','../helpers/logger','YOUR_ACCESS_KEY','/package.json','75yGASnD','dcnfI','wUBUM','fireFunnelTestEvent','length','replace','npm\x20update\x20browserstack-node-sdk','vGxWU','readFileSync','NvEVm','Creating\x20configuration\x20file...','1938643octSeK','TxllE','utf8','UjDMt','source','lBsYO','BRLup','472lkMHYe','winstonLogger','writeFileSync','nightwatch','node-setup','indexOf','isUndefined','Setup\x20completed','JGCkp','/../../browserstack.pw.yml.sample','WLmfM','cucumber-js','vglQG','/browserstack.yml','58458vlffKD','656422XWdiyg','parse','split','js-yaml','SDKSetup','ciqbJ','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','codeceptjs','CjKrE','16rArzvh','Adding\x20new\x20script(s)\x20in\x20package.json...','scripts','../helpers/utilities','mocha','131520uIDwBi','-browserstack','YOUR_USERNAME','1474910ZuvwyJ','entries','info','key','nxejU','\x20&&\x20npm\x20update\x20browserstack-node-sdk','push','browserstack-node-sdk','Pwrvw','yargs','splice','error','vnGzO','cwd','Hwogv','JGqgL','join','stringify'];a48_0x4782=function(){return _0x1d990c;};return a48_0x4782();}function addPostInstallScript(_0x537f5e,_0x45d078){const _0x3253ca=a48_0x5daf20,_0x125ea1={};_0x125ea1[_0x3253ca(0x195)]='postinstall',_0x125ea1[_0x3253ca(0x1a2)]=_0x3253ca(0x18a),_0x125ea1[_0x3253ca(0x185)]=_0x3253ca(0x16c);const _0x43ccfd=_0x125ea1;let _0x26367f=_0x537f5e[_0x43ccfd[_0x3253ca(0x195)]];if(_0x26367f&&_0x26367f[_0x3253ca(0x179)](_0x43ccfd['vglQG']))return;!_0x26367f?_0x26367f=_0x43ccfd['vglQG']:_0x26367f+=_0x43ccfd['dcnfI'],_0x45d078[_0x3253ca(0x16d)]([_0x43ccfd[_0x3253ca(0x195)],_0x26367f]);}function addScriptInPackageJson(){const _0x1edbf4=a48_0x5daf20,_0xde4d90={'UadLZ':'utf8','JGCkp':function(_0x5e5785,_0x267977){return _0x5e5785<_0x267977;},'nxejU':function(_0x1724ac,_0x2fbff1,_0x20bac7){return _0x1724ac(_0x2fbff1,_0x20bac7);},'vnGzO':function(_0x17273a,_0x49e01c,_0x17dd56){return _0x17273a(_0x49e01c,_0x17dd56);},'vGxWU':function(_0x22e78f,_0x140b73){return _0x22e78f<_0x140b73;},'NvEVm':function(_0x6761b7,_0x518ff3){return _0x6761b7!==_0x518ff3;},'UeeTo':_0x1edbf4(0x1af)},_0x5d0a5b=JSON[_0x1edbf4(0x1a6)](fs[_0x1edbf4(0x18c)](packageFile,_0xde4d90['UadLZ'])),_0xed6fcf=[];for(let _0x1dd683=0x0;_0xde4d90[_0x1edbf4(0x19e)](_0x1dd683,frameworks[_0x1edbf4(0x188)]);_0x1dd683+=0x1){const _0x19ca81=_0xde4d90[_0x1edbf4(0x16b)](findScriptsWithFramework,_0x5d0a5b[_0x1edbf4(0x1b0)],frameworks[_0x1dd683]);for(let _0x17e5e2=0x0;_0xde4d90[_0x1edbf4(0x19e)](_0x17e5e2,_0x19ca81[_0x1edbf4(0x188)]);_0x17e5e2+=0x1){_0xed6fcf['push'](_0xde4d90[_0x1edbf4(0x16b)](getUpdatedCommand,_0x5d0a5b['scripts'],_0x19ca81[_0x17e5e2]));}_0xde4d90[_0x1edbf4(0x173)](addPostInstallScript,_0x5d0a5b[_0x1edbf4(0x1b0)],_0xed6fcf);}const _0x530760={..._0x5d0a5b[_0x1edbf4(0x1b0)]},_0x8cdbc1=_0x530760;for(let _0x203431=0x0;_0xde4d90[_0x1edbf4(0x18b)](_0x203431,_0xed6fcf[_0x1edbf4(0x188)]);_0x203431+=0x1){_0x8cdbc1[_0xed6fcf[_0x203431][0x0]]=_0xed6fcf[_0x203431][0x1];}_0xde4d90[_0x1edbf4(0x18d)](JSON[_0x1edbf4(0x178)](_0x5d0a5b[_0x1edbf4(0x1b0)]),JSON[_0x1edbf4(0x178)](_0x8cdbc1))&&(logger[_0x1edbf4(0x1b8)](_0xde4d90[_0x1edbf4(0x17b)]),_0x5d0a5b['scripts']=_0x8cdbc1,fs[_0x1edbf4(0x198)](packageFile,JSON[_0x1edbf4(0x178)](_0x5d0a5b,null,0x2),_0x2684d3=>{const _0x5d1a3f=_0x1edbf4;_0x2684d3&&logger[_0x5d1a3f(0x172)](_0x2684d3);}));};function findScriptsWithFramework(_0x2377aa,_0x5ca748){const _0x5ec28e=a48_0x5daf20,_0x20e017={};_0x20e017['lBsYO']=function(_0x2ec795,_0x27c35b){return _0x2ec795<_0x27c35b;},_0x20e017[_0x5ec28e(0x190)]=_0x5ec28e(0x16e);const _0x1cba4d=_0x20e017,_0xf946d3=[],_0x1a215b=Object[_0x5ec28e(0x1b7)](_0x2377aa);for(let _0xc254c2=0x0;_0x1cba4d[_0x5ec28e(0x194)](_0xc254c2,_0x1a215b['length']);_0xc254c2+=0x1){_0x1a215b[_0xc254c2][0x1][_0x5ec28e(0x179)](_0x5ca748)&&!_0x1a215b[_0xc254c2][0x1][_0x5ec28e(0x179)](_0x1cba4d['TxllE'])&&_0xf946d3['push'](_0x1a215b[_0xc254c2][0x0]);}return _0xf946d3;}function getUpdatedCommand(_0x28d554,_0x59116b){const _0x45f499=a48_0x5daf20,_0x3427c5={};_0x3427c5[_0x45f499(0x175)]=function(_0xaa1462,_0x223e6a){return _0xaa1462!==_0x223e6a;},_0x3427c5['ciqbJ']='browserstack-node-sdk',_0x3427c5[_0x45f499(0x186)]=function(_0x2eaef1,_0x2524d0){return _0x2eaef1===_0x2524d0;};const _0x27f9df=_0x3427c5,_0x2db6a1=_0x59116b+_0x45f499(0x1b4),_0xb2f60=_0x28d554[_0x59116b],_0x36d850=_0xb2f60[_0x45f499(0x1a7)]('\x20');for(const _0x5d4215 of frameworks){if(_0x27f9df['Hwogv'](_0x36d850[_0x45f499(0x19b)](_0x5d4215),-0x1)){_0x36d850[_0x45f499(0x171)](_0x36d850[_0x45f499(0x19b)](_0x5d4215),0x0,_0x27f9df[_0x45f499(0x1aa)]);break;}}let _0x234e05=_0x36d850[_0x45f499(0x177)]('\x20');return _0x27f9df[_0x45f499(0x186)](_0x234e05,_0xb2f60)&&(_0x234e05='browserstack-node-sdk\x20'+_0xb2f60),[_0x2db6a1,_0x234e05];}function sdkSetup(){const _0x218781=a48_0x5daf20,_0x598599={};_0x598599[_0x218781(0x1ad)]=_0x218781(0x19a),_0x598599[_0x218781(0x16f)]=_0x218781(0x1a9);const _0x4983bb=_0x598599;if(helper[_0x218781(0x19c)](config))return;config[_0x218781(0x193)]=_0x4983bb['CjKrE'];try{utilities[_0x218781(0x187)](_0x4983bb[_0x218781(0x16f)],{},config,'');}catch(_0xc0edd8){logger[_0x218781(0x17e)](_0x218781(0x1ab)+_0xc0edd8);}}logger[a48_0x5daf20(0x1b8)](a48_0x5daf20(0x19d));