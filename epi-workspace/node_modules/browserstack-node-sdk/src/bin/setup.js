#!/usr/bin/env node

const a45_0x362718=a45_0x279b;(function(_0x42af4f,_0x1d450d){const _0x24c06d=a45_0x279b,_0x263898=_0x42af4f();while(!![]){try{const _0x445316=-parseInt(_0x24c06d(0x1cb))/0x1+parseInt(_0x24c06d(0x1ce))/0x2*(-parseInt(_0x24c06d(0x1d2))/0x3)+-parseInt(_0x24c06d(0x1d4))/0x4+parseInt(_0x24c06d(0x1d3))/0x5+-parseInt(_0x24c06d(0x1df))/0x6+parseInt(_0x24c06d(0x1da))/0x7+parseInt(_0x24c06d(0x1bc))/0x8*(parseInt(_0x24c06d(0x1cf))/0x9);if(_0x445316===_0x1d450d)break;else _0x263898['push'](_0x263898['shift']());}catch(_0x26f81a){_0x263898['push'](_0x263898['shift']());}}}(a45_0x45bd,0xb608d));const fs=require('fs'),helper=require('../helpers/helper'),utilities=require(a45_0x362718(0x1c1)),yaml=require(a45_0x362718(0x1de)),yargs=require('yargs'),logger=require(a45_0x362718(0x1be))[a45_0x362718(0x1d6)],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+a45_0x362718(0x1b6),configFile=process['cwd']()+'/browserstack.yml',packageFile=process[a45_0x362718(0x1f1)]()+'/package.json',frameworks=[a45_0x362718(0x1ca),'jest',a45_0x362718(0x1cc),'node','nightwatch','codeceptjs','playwright'];function a45_0x279b(_0x15c3a3,_0x2fc03a){const _0x45bdac=a45_0x45bd();return a45_0x279b=function(_0x279b4b,_0x4520d3){_0x279b4b=_0x279b4b-0x1b3;let _0x25299a=_0x45bdac[_0x279b4b];return _0x25299a;},a45_0x279b(_0x15c3a3,_0x2fc03a);}let config;logger[a45_0x362718(0x1f5)](a45_0x362718(0x1f3)),createConfigurationFile(yargs[a45_0x362718(0x1bd)][a45_0x362718(0x1d8)],yargs[a45_0x362718(0x1bd)][a45_0x362718(0x1ee)],yargs[a45_0x362718(0x1bd)]['playwright']);try{sdkSetup();}catch(a45_0x482035){logger['debug'](a45_0x362718(0x1f4)+a45_0x482035);}addScriptInPackageJson();function createConfigurationFile(_0x3d9a7a,_0x15d783,_0x335846=![]){const _0x42137e=a45_0x362718,_0x16f059={};_0x16f059['nXRYI']=_0x42137e(0x1ec),_0x16f059[_0x42137e(0x1c0)]=_0x42137e(0x1b7),_0x16f059[_0x42137e(0x1c2)]=_0x42137e(0x1ef);const _0x66820c=_0x16f059;try{let _0x2bd5c8=fs[_0x42137e(0x1d9)](_0x335846?configFileTemplatePW:configFileTemplate,_0x66820c['nXRYI']);_0x3d9a7a&&(_0x2bd5c8=_0x2bd5c8[_0x42137e(0x1d1)](_0x66820c[_0x42137e(0x1c0)],_0x3d9a7a)),_0x15d783&&(_0x2bd5c8=_0x2bd5c8[_0x42137e(0x1d1)](_0x66820c['KwsCY'],_0x15d783)),config=yaml[_0x42137e(0x1c4)](_0x2bd5c8),fs['writeFileSync'](configFile,_0x2bd5c8,_0x5bab94=>{const _0x269946=_0x42137e;_0x5bab94&&logger[_0x269946(0x1f0)](_0x5bab94);});}catch(_0x24d418){logger['error'](_0x24d418);}}function addPostInstallScript(_0x4f3914,_0x1e5a29){const _0x4b6314=a45_0x362718,_0x1c2261={};_0x1c2261[_0x4b6314(0x1f6)]=_0x4b6314(0x1c3),_0x1c2261[_0x4b6314(0x1b3)]=_0x4b6314(0x1ed),_0x1c2261[_0x4b6314(0x1c8)]=_0x4b6314(0x1dc);const _0x508e73=_0x1c2261;let _0x23f0e9=_0x4f3914[_0x508e73['mwoFy']];if(_0x23f0e9&&_0x23f0e9['includes'](_0x508e73[_0x4b6314(0x1b3)]))return;!_0x23f0e9?_0x23f0e9=_0x508e73[_0x4b6314(0x1b3)]:_0x23f0e9+=_0x508e73['idTnL'],_0x1e5a29['push']([_0x508e73[_0x4b6314(0x1f6)],_0x23f0e9]);}function a45_0x45bd(){const _0x6c5ba6=['nvoWc','OXPdH','split','writeFileSync','8OWLIXX','argv','../helpers/logger','kzusS','WSVPr','../helpers/utilities','KwsCY','postinstall','load','indexOf','isUndefined','stringify','idTnL','parse','mocha','399022vTSZHd','cucumber-js','CxjUY','9498UlfQNa','17303967EQLGpv','splice','replace','114Rsoamc','1291330OPMQjt','5284060PriSzw','scripts','winstonLogger','LQcXG','username','readFileSync','4829895xkZckv','SDKSetup','\x20&&\x20npm\x20update\x20browserstack-node-sdk','Setup\x20completed','js-yaml','1348812TLcYCN','join','includes','Adding\x20new\x20script(s)\x20in\x20package.json...','length','sNheM','dABAi','entries','push','SeEsA','browserstack-node-sdk\x20','-browserstack','YiVEn','utf8','npm\x20update\x20browserstack-node-sdk','key','YOUR_ACCESS_KEY','error','cwd','ggDIq','Creating\x20configuration\x20file...','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','info','mwoFy','browserstack-node-sdk','FOqGK','Nrgew','node-setup','/../../browserstack.pw.yml.sample','YOUR_USERNAME'];a45_0x45bd=function(){return _0x6c5ba6;};return a45_0x45bd();}function addScriptInPackageJson(){const _0x48a026=a45_0x362718,_0x349430={'OXPdH':_0x48a026(0x1ec),'YiVEn':function(_0x356b65,_0x5903dd){return _0x356b65<_0x5903dd;},'ggDIq':function(_0x46340f,_0x277e97,_0x152df2){return _0x46340f(_0x277e97,_0x152df2);},'kzusS':function(_0x5a80bb,_0x4a141e,_0x2a9a1e){return _0x5a80bb(_0x4a141e,_0x2a9a1e);},'Nrgew':function(_0x4c18d0,_0xfee4ec){return _0x4c18d0!==_0xfee4ec;},'DNtuQ':_0x48a026(0x1e2)},_0x5b008a=JSON[_0x48a026(0x1c9)](fs[_0x48a026(0x1d9)](packageFile,_0x349430[_0x48a026(0x1b9)])),_0x49ad76=[];for(let _0x399dae=0x0;_0x349430[_0x48a026(0x1eb)](_0x399dae,frameworks[_0x48a026(0x1e3)]);_0x399dae+=0x1){const _0x5dee8d=_0x349430[_0x48a026(0x1f2)](findScriptsWithFramework,_0x5b008a['scripts'],frameworks[_0x399dae]);for(let _0x12104f=0x0;_0x349430[_0x48a026(0x1eb)](_0x12104f,_0x5dee8d['length']);_0x12104f+=0x1){_0x49ad76[_0x48a026(0x1e7)](_0x349430[_0x48a026(0x1bf)](getUpdatedCommand,_0x5b008a[_0x48a026(0x1d5)],_0x5dee8d[_0x12104f]));}_0x349430[_0x48a026(0x1bf)](addPostInstallScript,_0x5b008a[_0x48a026(0x1d5)],_0x49ad76);}const _0x4458e6={..._0x5b008a[_0x48a026(0x1d5)]},_0x40904c=_0x4458e6;for(let _0x51d22e=0x0;_0x349430[_0x48a026(0x1eb)](_0x51d22e,_0x49ad76['length']);_0x51d22e+=0x1){_0x40904c[_0x49ad76[_0x51d22e][0x0]]=_0x49ad76[_0x51d22e][0x1];}_0x349430[_0x48a026(0x1b4)](JSON['stringify'](_0x5b008a[_0x48a026(0x1d5)]),JSON[_0x48a026(0x1c7)](_0x40904c))&&(logger[_0x48a026(0x1f5)](_0x349430['DNtuQ']),_0x5b008a[_0x48a026(0x1d5)]=_0x40904c,fs[_0x48a026(0x1bb)](packageFile,JSON[_0x48a026(0x1c7)](_0x5b008a,null,0x2),_0x5970b6=>{const _0x427056=_0x48a026;_0x5970b6&&logger[_0x427056(0x1f0)](_0x5970b6);}));};function findScriptsWithFramework(_0x332788,_0x43086c){const _0x50796=a45_0x362718,_0x247847={};_0x247847[_0x50796(0x1e4)]=function(_0x402326,_0x11bdf7){return _0x402326<_0x11bdf7;},_0x247847[_0x50796(0x1b8)]=_0x50796(0x1f7);const _0x116f9b=_0x247847,_0x2acab8=[],_0x384bf5=Object[_0x50796(0x1e6)](_0x332788);for(let _0x51672d=0x0;_0x116f9b[_0x50796(0x1e4)](_0x51672d,_0x384bf5[_0x50796(0x1e3)]);_0x51672d+=0x1){_0x384bf5[_0x51672d][0x1][_0x50796(0x1e1)](_0x43086c)&&!_0x384bf5[_0x51672d][0x1][_0x50796(0x1e1)](_0x116f9b[_0x50796(0x1b8)])&&_0x2acab8[_0x50796(0x1e7)](_0x384bf5[_0x51672d][0x0]);}return _0x2acab8;}function getUpdatedCommand(_0x1b46ed,_0x11ac5d){const _0x587bca=a45_0x362718,_0x202814={};_0x202814['SeEsA']=function(_0x3dbe11,_0x2caecb){return _0x3dbe11!==_0x2caecb;},_0x202814[_0x587bca(0x1cd)]=_0x587bca(0x1f7),_0x202814['dABAi']=function(_0x58bc8e,_0x3a759a){return _0x58bc8e===_0x3a759a;};const _0x4b662e=_0x202814,_0x53c0e3=_0x11ac5d+_0x587bca(0x1ea),_0x11c159=_0x1b46ed[_0x11ac5d],_0x213d9e=_0x11c159[_0x587bca(0x1ba)]('\x20');for(const _0x19f179 of frameworks){if(_0x4b662e[_0x587bca(0x1e8)](_0x213d9e[_0x587bca(0x1c5)](_0x19f179),-0x1)){_0x213d9e[_0x587bca(0x1d0)](_0x213d9e[_0x587bca(0x1c5)](_0x19f179),0x0,_0x4b662e[_0x587bca(0x1cd)]);break;}}let _0x1c81c2=_0x213d9e[_0x587bca(0x1e0)]('\x20');return _0x4b662e[_0x587bca(0x1e5)](_0x1c81c2,_0x11c159)&&(_0x1c81c2=_0x587bca(0x1e9)+_0x11c159),[_0x53c0e3,_0x1c81c2];}function sdkSetup(){const _0xe9db5c=a45_0x362718,_0x55a845={};_0x55a845['CzvAB']=_0xe9db5c(0x1b5),_0x55a845[_0xe9db5c(0x1d7)]=_0xe9db5c(0x1db);const _0x2b4f83=_0x55a845;if(helper[_0xe9db5c(0x1c6)](config))return;config['source']=_0x2b4f83['CzvAB'];try{utilities['fireFunnelTestEvent'](_0x2b4f83[_0xe9db5c(0x1d7)],{},config,'');}catch(_0x3a0e3a){logger['debug'](_0xe9db5c(0x1f4)+_0x3a0e3a);}}logger[a45_0x362718(0x1f5)](a45_0x362718(0x1dd));