#!/usr/bin/env node

const a48_0x275fc8=a48_0x1197;function a48_0x49d4(){const _0x3bd40d=['winstonLogger','737044uoaKtQ','YOUR_USERNAME','node','length','feqna','2200682zMZYtN','mIOCe','24HSwnuv','ysSXZ','indexOf','22644wMVwsa','wVlJk','nightwatch','utf8','npm\x20update\x20browserstack-node-sdk','LSvbK','parse','5735750EfiWxW','ZJMxv','srUcO','54ocMKrJ','Creating\x20configuration\x20file...','Favbq','postinstall','browserstack-node-sdk','3451155AjCkbK','info','stringify','load','7rFLisr','js-yaml','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','RURpD','tUWdd','6826788JjCjzX','530832tlZUsr','key','node-setup','../helpers/logger','entries','error','split','readFileSync','YOUR_ACCESS_KEY','writeFileSync','scripts','push','295PjXiPq','includes','/../../browserstack.yml.sample','jest','fireFunnelTestEvent','LPYmB','-browserstack','codeceptjs','playwright','cwd','\x20&&\x20npm\x20update\x20browserstack-node-sdk','replace','/package.json','cQtAz','2FXXKAJ','yargs','browserstack-node-sdk\x20','bwihc','debug','/browserstack.yml','argv','Ngdhu','cucumber-js'];a48_0x49d4=function(){return _0x3bd40d;};return a48_0x49d4();}(function(_0x5ff05c,_0x39b6a0){const _0x2ae24d=a48_0x1197,_0x55fab7=_0x5ff05c();while(!![]){try{const _0x2e7a48=-parseInt(_0x2ae24d(0x1d1))/0x1+-parseInt(_0x2ae24d(0x1c7))/0x2*(-parseInt(_0x2ae24d(0x1ea))/0x3)+-parseInt(_0x2ae24d(0x1db))/0x4*(parseInt(_0x2ae24d(0x1b9))/0x5)+parseInt(_0x2ae24d(0x1f3))/0x6*(parseInt(_0x2ae24d(0x1ee))/0x7)+-parseInt(_0x2ae24d(0x1f4))/0x8*(parseInt(_0x2ae24d(0x1e5))/0x9)+-parseInt(_0x2ae24d(0x1e2))/0xa+parseInt(_0x2ae24d(0x1d6))/0xb*(parseInt(_0x2ae24d(0x1d8))/0xc);if(_0x2e7a48===_0x39b6a0)break;else _0x55fab7['push'](_0x55fab7['shift']());}catch(_0x39436b){_0x55fab7['push'](_0x55fab7['shift']());}}}(a48_0x49d4,0x9d9bd));function a48_0x1197(_0x41ece1,_0x4f0e00){const _0x49d473=a48_0x49d4();return a48_0x1197=function(_0x119709,_0x5d2952){_0x119709=_0x119709-0x1b1;let _0x46c8fb=_0x49d473[_0x119709];return _0x46c8fb;},a48_0x1197(_0x41ece1,_0x4f0e00);}const fs=require('fs'),helper=require('../helpers/helper'),utilities=require('../helpers/utilities'),yaml=require(a48_0x275fc8(0x1ef)),yargs=require(a48_0x275fc8(0x1c8)),logger=require(a48_0x275fc8(0x1f7))[a48_0x275fc8(0x1d0)],configFileTemplate=__dirname+a48_0x275fc8(0x1bb),configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process[a48_0x275fc8(0x1c2)]()+a48_0x275fc8(0x1cc),packageFile=process[a48_0x275fc8(0x1c2)]()+a48_0x275fc8(0x1c5),frameworks=['mocha',a48_0x275fc8(0x1bc),a48_0x275fc8(0x1cf),a48_0x275fc8(0x1d3),a48_0x275fc8(0x1dd),a48_0x275fc8(0x1c0),a48_0x275fc8(0x1c1)];let config;logger[a48_0x275fc8(0x1eb)](a48_0x275fc8(0x1e6)),createConfigurationFile(yargs[a48_0x275fc8(0x1cd)]['username'],yargs[a48_0x275fc8(0x1cd)][a48_0x275fc8(0x1f5)],yargs['argv'][a48_0x275fc8(0x1c1)]);try{sdkSetup();}catch(a48_0x579d3a){logger[a48_0x275fc8(0x1cb)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a48_0x579d3a);}addScriptInPackageJson();function createConfigurationFile(_0x32da71,_0x379178,_0xbdb46d=![]){const _0x5be3fe=a48_0x275fc8,_0x4d92eb={};_0x4d92eb[_0x5be3fe(0x1d7)]=_0x5be3fe(0x1de),_0x4d92eb['RSpFf']=_0x5be3fe(0x1d2),_0x4d92eb['kuBKg']=_0x5be3fe(0x1b5);const _0x56c9c8=_0x4d92eb;try{let _0x47e424=fs[_0x5be3fe(0x1b4)](_0xbdb46d?configFileTemplatePW:configFileTemplate,_0x56c9c8[_0x5be3fe(0x1d7)]);_0x32da71&&(_0x47e424=_0x47e424[_0x5be3fe(0x1c4)](_0x56c9c8['RSpFf'],_0x32da71)),_0x379178&&(_0x47e424=_0x47e424['replace'](_0x56c9c8['kuBKg'],_0x379178)),config=yaml[_0x5be3fe(0x1ed)](_0x47e424),fs[_0x5be3fe(0x1b6)](configFile,_0x47e424,_0x401970=>{const _0x3ab281=_0x5be3fe;_0x401970&&logger[_0x3ab281(0x1b2)](_0x401970);});}catch(_0xdcfa9f){logger[_0x5be3fe(0x1b2)](_0xdcfa9f);}}function addPostInstallScript(_0x1075df,_0x6cb13e){const _0x51db36=a48_0x275fc8,_0x302f85={};_0x302f85[_0x51db36(0x1e0)]=_0x51db36(0x1e8),_0x302f85[_0x51db36(0x1e4)]=_0x51db36(0x1df),_0x302f85[_0x51db36(0x1c6)]=_0x51db36(0x1c3);const _0x29fada=_0x302f85;let _0x1881c8=_0x1075df[_0x29fada[_0x51db36(0x1e0)]];if(_0x1881c8&&_0x1881c8[_0x51db36(0x1ba)](_0x29fada[_0x51db36(0x1e4)]))return;!_0x1881c8?_0x1881c8=_0x29fada[_0x51db36(0x1e4)]:_0x1881c8+=_0x29fada[_0x51db36(0x1c6)],_0x6cb13e[_0x51db36(0x1b8)]([_0x29fada[_0x51db36(0x1e0)],_0x1881c8]);}function addScriptInPackageJson(){const _0x1cb0d3=a48_0x275fc8,_0x2e9541={'EwYMF':'utf8','Ngdhu':function(_0x3e595b,_0x47204f){return _0x3e595b<_0x47204f;},'wVlJk':function(_0x2142cd,_0x3ef41b,_0x30e164){return _0x2142cd(_0x3ef41b,_0x30e164);},'xeFiC':function(_0x216e80,_0x249e1c,_0x12d28f){return _0x216e80(_0x249e1c,_0x12d28f);},'LPYmB':function(_0x2cf648,_0x46e50f){return _0x2cf648<_0x46e50f;},'tQNpT':function(_0x183caa,_0x13006e){return _0x183caa!==_0x13006e;},'EdTnP':'Adding\x20new\x20script(s)\x20in\x20package.json...'},_0x26fbd3=JSON[_0x1cb0d3(0x1e1)](fs['readFileSync'](packageFile,_0x2e9541['EwYMF'])),_0x24c09d=[];for(let _0x28416=0x0;_0x2e9541['Ngdhu'](_0x28416,frameworks[_0x1cb0d3(0x1d4)]);_0x28416+=0x1){const _0x57c84e=_0x2e9541['wVlJk'](findScriptsWithFramework,_0x26fbd3[_0x1cb0d3(0x1b7)],frameworks[_0x28416]);for(let _0x17cd4a=0x0;_0x2e9541[_0x1cb0d3(0x1ce)](_0x17cd4a,_0x57c84e['length']);_0x17cd4a+=0x1){_0x24c09d[_0x1cb0d3(0x1b8)](_0x2e9541[_0x1cb0d3(0x1dc)](getUpdatedCommand,_0x26fbd3[_0x1cb0d3(0x1b7)],_0x57c84e[_0x17cd4a]));}_0x2e9541['xeFiC'](addPostInstallScript,_0x26fbd3['scripts'],_0x24c09d);}const _0x5b519d={..._0x26fbd3[_0x1cb0d3(0x1b7)]},_0x59b07b=_0x5b519d;for(let _0x4333aa=0x0;_0x2e9541[_0x1cb0d3(0x1be)](_0x4333aa,_0x24c09d[_0x1cb0d3(0x1d4)]);_0x4333aa+=0x1){_0x59b07b[_0x24c09d[_0x4333aa][0x0]]=_0x24c09d[_0x4333aa][0x1];}_0x2e9541['tQNpT'](JSON[_0x1cb0d3(0x1ec)](_0x26fbd3['scripts']),JSON[_0x1cb0d3(0x1ec)](_0x59b07b))&&(logger[_0x1cb0d3(0x1eb)](_0x2e9541['EdTnP']),_0x26fbd3[_0x1cb0d3(0x1b7)]=_0x59b07b,fs[_0x1cb0d3(0x1b6)](packageFile,JSON[_0x1cb0d3(0x1ec)](_0x26fbd3,null,0x2),_0x31e7f2=>{const _0x2c5aa8=_0x1cb0d3;_0x31e7f2&&logger[_0x2c5aa8(0x1b2)](_0x31e7f2);}));};function findScriptsWithFramework(_0x3a86b9,_0x2cf5fd){const _0x1f8616=a48_0x275fc8,_0x38047b={};_0x38047b[_0x1f8616(0x1e3)]=function(_0x4d03b6,_0x2004af){return _0x4d03b6<_0x2004af;},_0x38047b[_0x1f8616(0x1d5)]=_0x1f8616(0x1e9);const _0x3dd74e=_0x38047b,_0x4aa717=[],_0x14a18e=Object[_0x1f8616(0x1b1)](_0x3a86b9);for(let _0x21f585=0x0;_0x3dd74e['ZJMxv'](_0x21f585,_0x14a18e[_0x1f8616(0x1d4)]);_0x21f585+=0x1){_0x14a18e[_0x21f585][0x1][_0x1f8616(0x1ba)](_0x2cf5fd)&&!_0x14a18e[_0x21f585][0x1]['includes'](_0x3dd74e[_0x1f8616(0x1d5)])&&_0x4aa717['push'](_0x14a18e[_0x21f585][0x0]);}return _0x4aa717;}function getUpdatedCommand(_0x5563ec,_0x2065a1){const _0x852b7b=a48_0x275fc8,_0x17ba07={};_0x17ba07['bwihc']=function(_0x37b3a1,_0x537b39){return _0x37b3a1!==_0x537b39;},_0x17ba07[_0x852b7b(0x1e7)]=_0x852b7b(0x1e9),_0x17ba07['tUWdd']=function(_0x1acfec,_0x3d6747){return _0x1acfec===_0x3d6747;};const _0x3e4ddc=_0x17ba07,_0x154af3=_0x2065a1+_0x852b7b(0x1bf),_0x4d725a=_0x5563ec[_0x2065a1],_0x54378b=_0x4d725a[_0x852b7b(0x1b3)]('\x20');for(const _0x5da287 of frameworks){if(_0x3e4ddc[_0x852b7b(0x1ca)](_0x54378b[_0x852b7b(0x1da)](_0x5da287),-0x1)){_0x54378b['splice'](_0x54378b[_0x852b7b(0x1da)](_0x5da287),0x0,_0x3e4ddc[_0x852b7b(0x1e7)]);break;}}let _0x1e1b1d=_0x54378b['join']('\x20');return _0x3e4ddc[_0x852b7b(0x1f2)](_0x1e1b1d,_0x4d725a)&&(_0x1e1b1d=_0x852b7b(0x1c9)+_0x4d725a),[_0x154af3,_0x1e1b1d];}function sdkSetup(){const _0x5100d8=a48_0x275fc8,_0x293066={};_0x293066[_0x5100d8(0x1f1)]=_0x5100d8(0x1f6),_0x293066['ysSXZ']='SDKSetup';const _0x5b3b89=_0x293066;if(helper['isUndefined'](config))return;config['source']=_0x5b3b89[_0x5100d8(0x1f1)];try{utilities[_0x5100d8(0x1bd)](_0x5b3b89[_0x5100d8(0x1d9)],{},config,'');}catch(_0x41c5ed){logger[_0x5100d8(0x1cb)](_0x5100d8(0x1f0)+_0x41c5ed);}}logger['info']('Setup\x20completed');