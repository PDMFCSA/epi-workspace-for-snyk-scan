#!/usr/bin/env node

const a50_0x1f7d2c=a50_0x8d1b;(function(_0x1b9cd9,_0x28d36b){const _0x4c0f48=a50_0x8d1b,_0x279982=_0x1b9cd9();while(!![]){try{const _0x25d0c7=-parseInt(_0x4c0f48(0xd8))/0x1*(-parseInt(_0x4c0f48(0xcd))/0x2)+-parseInt(_0x4c0f48(0x9d))/0x3*(-parseInt(_0x4c0f48(0xd9))/0x4)+parseInt(_0x4c0f48(0xce))/0x5+parseInt(_0x4c0f48(0xa9))/0x6*(parseInt(_0x4c0f48(0xd2))/0x7)+-parseInt(_0x4c0f48(0xc8))/0x8*(parseInt(_0x4c0f48(0xc2))/0x9)+parseInt(_0x4c0f48(0x9f))/0xa+-parseInt(_0x4c0f48(0xd7))/0xb;if(_0x25d0c7===_0x28d36b)break;else _0x279982['push'](_0x279982['shift']());}catch(_0x4afd67){_0x279982['push'](_0x279982['shift']());}}}(a50_0xf113,0x62a31));const fs=require('fs'),helper=require(a50_0x1f7d2c(0xbf)),utilities=require('../helpers/utilities'),yaml=require('js-yaml'),yargs=require(a50_0x1f7d2c(0xa5)),logger=require('../helpers/logger')[a50_0x1f7d2c(0xa3)],configFileTemplate=__dirname+a50_0x1f7d2c(0xb7),configFileTemplatePW=__dirname+a50_0x1f7d2c(0xc7),configFile=process[a50_0x1f7d2c(0xd6)]()+'/browserstack.yml',packageFile=process[a50_0x1f7d2c(0xd6)]()+a50_0x1f7d2c(0xb3),frameworks=[a50_0x1f7d2c(0xcb),'jest',a50_0x1f7d2c(0x9b),a50_0x1f7d2c(0xaf),a50_0x1f7d2c(0x95),a50_0x1f7d2c(0xc6),a50_0x1f7d2c(0xa1)];let config;logger['info']('Creating\x20configuration\x20file...'),createConfigurationFile(yargs[a50_0x1f7d2c(0xc5)]['username'],yargs[a50_0x1f7d2c(0xc5)][a50_0x1f7d2c(0xb4)],yargs[a50_0x1f7d2c(0xc5)][a50_0x1f7d2c(0xa1)]);try{sdkSetup();}catch(a50_0x4a1c54){logger[a50_0x1f7d2c(0xbe)](a50_0x1f7d2c(0xc4)+a50_0x4a1c54);}addScriptInPackageJson();function createConfigurationFile(_0xabe226,_0x8e2256,_0x1c5640=![]){const _0x41c1c2=a50_0x1f7d2c,_0x18103e={};_0x18103e[_0x41c1c2(0xbd)]=_0x41c1c2(0xac),_0x18103e[_0x41c1c2(0xd0)]=_0x41c1c2(0xb9),_0x18103e[_0x41c1c2(0x9a)]=_0x41c1c2(0xad);const _0x92fcbb=_0x18103e;try{let _0x27f52e=fs[_0x41c1c2(0xdb)](_0x1c5640?configFileTemplatePW:configFileTemplate,_0x92fcbb['XjpLl']);_0xabe226&&(_0x27f52e=_0x27f52e[_0x41c1c2(0xa8)](_0x92fcbb[_0x41c1c2(0xd0)],_0xabe226)),_0x8e2256&&(_0x27f52e=_0x27f52e[_0x41c1c2(0xa8)](_0x92fcbb['eGdYW'],_0x8e2256)),config=yaml[_0x41c1c2(0xae)](_0x27f52e),fs[_0x41c1c2(0xa7)](configFile,_0x27f52e,_0x1205e2=>{const _0x1a9bea=_0x41c1c2;_0x1205e2&&logger[_0x1a9bea(0x9c)](_0x1205e2);});}catch(_0x2bde7f){logger[_0x41c1c2(0x9c)](_0x2bde7f);}}function addPostInstallScript(_0x3bb864,_0x219aef){const _0x351d97=a50_0x1f7d2c,_0xbbc3ba={};_0xbbc3ba[_0x351d97(0xc0)]='postinstall',_0xbbc3ba['WLJlL']='npm\x20update\x20browserstack-node-sdk',_0xbbc3ba[_0x351d97(0xb2)]=_0x351d97(0xb0);const _0x5b2872=_0xbbc3ba;let _0x458606=_0x3bb864[_0x5b2872[_0x351d97(0xc0)]];if(_0x458606&&_0x458606[_0x351d97(0xba)](_0x5b2872[_0x351d97(0xd3)]))return;!_0x458606?_0x458606=_0x5b2872['WLJlL']:_0x458606+=_0x5b2872['wKjGE'],_0x219aef['push']([_0x5b2872[_0x351d97(0xc0)],_0x458606]);}function a50_0x8d1b(_0x1650d9,_0x4efcf){const _0xf113f3=a50_0xf113();return a50_0x8d1b=function(_0x8d1b82,_0x3319bf){_0x8d1b82=_0x8d1b82-0x95;let _0x43a031=_0xf113f3[_0x8d1b82];return _0x43a031;},a50_0x8d1b(_0x1650d9,_0x4efcf);}function addScriptInPackageJson(){const _0x4580f9=a50_0x1f7d2c,_0x2a779a={'MVWcj':'utf8','QJcHT':function(_0xf24c21,_0x325dd6){return _0xf24c21<_0x325dd6;},'UroCk':function(_0xffe27f,_0x55968c,_0x5c2c1a){return _0xffe27f(_0x55968c,_0x5c2c1a);},'zeoYX':function(_0x524840,_0x302e1e){return _0x524840<_0x302e1e;},'sOLXi':function(_0x1d509f,_0x317d0c){return _0x1d509f!==_0x317d0c;},'aAmHF':'Adding\x20new\x20script(s)\x20in\x20package.json...'},_0x5a16d9=JSON['parse'](fs[_0x4580f9(0xdb)](packageFile,_0x2a779a[_0x4580f9(0xaa)])),_0x233e22=[];for(let _0x44190d=0x0;_0x2a779a['QJcHT'](_0x44190d,frameworks[_0x4580f9(0x96)]);_0x44190d+=0x1){const _0x28e411=_0x2a779a['UroCk'](findScriptsWithFramework,_0x5a16d9[_0x4580f9(0xb6)],frameworks[_0x44190d]);for(let _0xc23106=0x0;_0x2a779a[_0x4580f9(0x98)](_0xc23106,_0x28e411[_0x4580f9(0x96)]);_0xc23106+=0x1){_0x233e22[_0x4580f9(0xc9)](_0x2a779a['UroCk'](getUpdatedCommand,_0x5a16d9[_0x4580f9(0xb6)],_0x28e411[_0xc23106]));}_0x2a779a[_0x4580f9(0xc1)](addPostInstallScript,_0x5a16d9[_0x4580f9(0xb6)],_0x233e22);}const _0x5c9565={..._0x5a16d9['scripts']},_0x2b2764=_0x5c9565;for(let _0x1e91cf=0x0;_0x2a779a[_0x4580f9(0x98)](_0x1e91cf,_0x233e22[_0x4580f9(0x96)]);_0x1e91cf+=0x1){_0x2b2764[_0x233e22[_0x1e91cf][0x0]]=_0x233e22[_0x1e91cf][0x1];}_0x2a779a[_0x4580f9(0xd4)](JSON[_0x4580f9(0x99)](_0x5a16d9[_0x4580f9(0xb6)]),JSON['stringify'](_0x2b2764))&&(logger['info'](_0x2a779a[_0x4580f9(0xa4)]),_0x5a16d9[_0x4580f9(0xb6)]=_0x2b2764,fs['writeFileSync'](packageFile,JSON['stringify'](_0x5a16d9,null,0x2),_0x279d0f=>{const _0x51f2bd=_0x4580f9;_0x279d0f&&logger[_0x51f2bd(0x9c)](_0x279d0f);}));}function a50_0xf113(){const _0x4e16ce=['/../../browserstack.yml.sample','isUndefined','YOUR_USERNAME','includes','entries','node-setup','XjpLl','debug','../helpers/helper','WqjeA','UroCk','207vrjGLH','source','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','argv','codeceptjs','/../../browserstack.pw.yml.sample','16600qDxVIg','push','indexOf','mocha','OVfzr','2BkquKD','2941765aNbmyL','mXvwm','EuXPG','bkDRf','658798zXTomy','WLJlL','sOLXi','fireFunnelTestEvent','cwd','21160843dYggcQ','17113wojdST','551396OSxOuv','-browserstack','readFileSync','nightwatch','length','split','zeoYX','stringify','eGdYW','cucumber-js','error','15SipVnh','info','7042880junDpy','join','playwright','UquSS','winstonLogger','aAmHF','yargs','Setup\x20completed','writeFileSync','replace','24eWECoX','MVWcj','splice','utf8','YOUR_ACCESS_KEY','load','node','\x20&&\x20npm\x20update\x20browserstack-node-sdk','Zwqfb','wKjGE','/package.json','key','CPsXa','scripts'];a50_0xf113=function(){return _0x4e16ce;};return a50_0xf113();};function findScriptsWithFramework(_0x40925a,_0x37da17){const _0x5a4791=a50_0x1f7d2c,_0x4c9136={};_0x4c9136[_0x5a4791(0xd1)]=function(_0x4f71cc,_0x42c3c8){return _0x4f71cc<_0x42c3c8;},_0x4c9136[_0x5a4791(0xa2)]='browserstack-node-sdk';const _0x5ab872=_0x4c9136,_0x4b427a=[],_0x561de9=Object[_0x5a4791(0xbb)](_0x40925a);for(let _0x18f850=0x0;_0x5ab872[_0x5a4791(0xd1)](_0x18f850,_0x561de9[_0x5a4791(0x96)]);_0x18f850+=0x1){_0x561de9[_0x18f850][0x1][_0x5a4791(0xba)](_0x37da17)&&!_0x561de9[_0x18f850][0x1]['includes'](_0x5ab872[_0x5a4791(0xa2)])&&_0x4b427a[_0x5a4791(0xc9)](_0x561de9[_0x18f850][0x0]);}return _0x4b427a;}function getUpdatedCommand(_0x899a03,_0x1f0cfe){const _0x35a45b=a50_0x1f7d2c,_0x28279e={};_0x28279e[_0x35a45b(0xb5)]=function(_0x466fe5,_0x2dab6e){return _0x466fe5!==_0x2dab6e;},_0x28279e['JnALP']='browserstack-node-sdk',_0x28279e[_0x35a45b(0xcc)]=function(_0x46d5e9,_0x4f7cf4){return _0x46d5e9===_0x4f7cf4;};const _0x1455dc=_0x28279e,_0x1013bc=_0x1f0cfe+_0x35a45b(0xda),_0x23daf6=_0x899a03[_0x1f0cfe],_0x24e224=_0x23daf6[_0x35a45b(0x97)]('\x20');for(const _0x106ebe of frameworks){if(_0x1455dc['CPsXa'](_0x24e224[_0x35a45b(0xca)](_0x106ebe),-0x1)){_0x24e224[_0x35a45b(0xab)](_0x24e224[_0x35a45b(0xca)](_0x106ebe),0x0,_0x1455dc['JnALP']);break;}}let _0x14f274=_0x24e224[_0x35a45b(0xa0)]('\x20');return _0x1455dc[_0x35a45b(0xcc)](_0x14f274,_0x23daf6)&&(_0x14f274='browserstack-node-sdk\x20'+_0x23daf6),[_0x1013bc,_0x14f274];}function sdkSetup(){const _0x59a600=a50_0x1f7d2c,_0x5105cf={};_0x5105cf[_0x59a600(0xb1)]=_0x59a600(0xbc),_0x5105cf[_0x59a600(0xcf)]='SDKSetup';const _0x1665cc=_0x5105cf;if(helper[_0x59a600(0xb8)](config))return;config[_0x59a600(0xc3)]=_0x1665cc[_0x59a600(0xb1)];try{utilities[_0x59a600(0xd5)](_0x1665cc['mXvwm'],{},config,'');}catch(_0x43a9cf){logger[_0x59a600(0xbe)](_0x59a600(0xc4)+_0x43a9cf);}}logger[a50_0x1f7d2c(0x9e)](a50_0x1f7d2c(0xa6));