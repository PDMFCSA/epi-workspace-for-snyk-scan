#!/usr/bin/env node

const a45_0x250cca=a45_0x4919;(function(_0x2e87f6,_0x5398f4){const _0x493619=a45_0x4919,_0x157978=_0x2e87f6();while(!![]){try{const _0x26b8f3=parseInt(_0x493619(0x1f4))/0x1*(parseInt(_0x493619(0x1fe))/0x2)+-parseInt(_0x493619(0x211))/0x3+-parseInt(_0x493619(0x226))/0x4*(parseInt(_0x493619(0x20d))/0x5)+-parseInt(_0x493619(0x1ff))/0x6+parseInt(_0x493619(0x1ef))/0x7+parseInt(_0x493619(0x22c))/0x8+-parseInt(_0x493619(0x201))/0x9*(-parseInt(_0x493619(0x232))/0xa);if(_0x26b8f3===_0x5398f4)break;else _0x157978['push'](_0x157978['shift']());}catch(_0x2630c2){_0x157978['push'](_0x157978['shift']());}}}(a45_0x563b,0xbc103));const fs=require('fs'),helper=require(a45_0x250cca(0x20b)),utilities=require('../helpers/utilities'),yaml=require(a45_0x250cca(0x210)),yargs=require(a45_0x250cca(0x217)),logger=require(a45_0x250cca(0x1f1))[a45_0x250cca(0x1fd)],configFileTemplate=__dirname+a45_0x250cca(0x222),configFileTemplatePW=__dirname+a45_0x250cca(0x227),configFile=process[a45_0x250cca(0x208)]()+'/browserstack.yml',packageFile=process[a45_0x250cca(0x208)]()+'/package.json',frameworks=[a45_0x250cca(0x1fb),a45_0x250cca(0x231),a45_0x250cca(0x22a),a45_0x250cca(0x225),a45_0x250cca(0x1f6),a45_0x250cca(0x1fa),'playwright'];function a45_0x563b(){const _0x4006ca=['2323848WazXoq','fireFunnelTestEvent','7803XCJDqo','pibGI','fpWwS','brTWt','SAReM','argv','error','cwd','browserstack-node-sdk','gXzFi','../helpers/helper','debug','876635BuDXql','splice','PgOsW','js-yaml','3383664CaFHSs','source','length','info','-browserstack','YOUR_USERNAME','yargs','wNBUR','hXFFB','JzDff','Hxxog','load','scripts','JHBds','push','utf8','npm\x20update\x20browserstack-node-sdk','/../../browserstack.yml.sample','Adding\x20new\x20script(s)\x20in\x20package.json...','ZJkws','node','32oaVaUb','/../../browserstack.pw.yml.sample','indexOf','includes','cucumber-js','entries','8701344mYQDSZ','lyrbV','username','gwgZh','Setup\x20completed','jest','17090CGDVKj','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','stringify','replace','6946534oTZOZZ','naClM','../helpers/logger','key','\x20&&\x20npm\x20update\x20browserstack-node-sdk','4861SUvECj','GBtAO','nightwatch','fyAlJ','isUndefined','writeFileSync','codeceptjs','mocha','parse','winstonLogger','52BsipoR'];a45_0x563b=function(){return _0x4006ca;};return a45_0x563b();}let config;logger[a45_0x250cca(0x214)]('Creating\x20configuration\x20file...'),createConfigurationFile(yargs[a45_0x250cca(0x206)][a45_0x250cca(0x22e)],yargs[a45_0x250cca(0x206)][a45_0x250cca(0x1f2)],yargs[a45_0x250cca(0x206)]['playwright']);function a45_0x4919(_0x1ea547,_0x34462a){const _0x563b16=a45_0x563b();return a45_0x4919=function(_0x4919ab,_0x4eab36){_0x4919ab=_0x4919ab-0x1ef;let _0x16aa7e=_0x563b16[_0x4919ab];return _0x16aa7e;},a45_0x4919(_0x1ea547,_0x34462a);}try{sdkSetup();}catch(a45_0x2161e2){logger[a45_0x250cca(0x20c)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a45_0x2161e2);}addScriptInPackageJson();function createConfigurationFile(_0x4f9d39,_0x415d39,_0x54115c=![]){const _0x1a8c77=a45_0x250cca,_0x9106f7={};_0x9106f7['fRUfY']=_0x1a8c77(0x220),_0x9106f7[_0x1a8c77(0x20a)]=_0x1a8c77(0x216),_0x9106f7[_0x1a8c77(0x1f0)]='YOUR_ACCESS_KEY';const _0x4fc608=_0x9106f7;try{let _0xcc2a4a=fs['readFileSync'](_0x54115c?configFileTemplatePW:configFileTemplate,_0x4fc608['fRUfY']);_0x4f9d39&&(_0xcc2a4a=_0xcc2a4a[_0x1a8c77(0x235)](_0x4fc608[_0x1a8c77(0x20a)],_0x4f9d39)),_0x415d39&&(_0xcc2a4a=_0xcc2a4a[_0x1a8c77(0x235)](_0x4fc608[_0x1a8c77(0x1f0)],_0x415d39)),config=yaml[_0x1a8c77(0x21c)](_0xcc2a4a),fs[_0x1a8c77(0x1f9)](configFile,_0xcc2a4a,_0x3b6438=>{_0x3b6438&&logger['error'](_0x3b6438);});}catch(_0x3ab2cc){logger[_0x1a8c77(0x207)](_0x3ab2cc);}}function addPostInstallScript(_0x48880c,_0x3cf522){const _0x577ad5=a45_0x250cca,_0xa6b265={};_0xa6b265[_0x577ad5(0x203)]='postinstall',_0xa6b265['PgOsW']=_0x577ad5(0x221),_0xa6b265[_0x577ad5(0x1f5)]=_0x577ad5(0x1f3);const _0xf80c2e=_0xa6b265;let _0x474614=_0x48880c[_0xf80c2e[_0x577ad5(0x203)]];if(_0x474614&&_0x474614['includes'](_0xf80c2e[_0x577ad5(0x20f)]))return;!_0x474614?_0x474614=_0xf80c2e['PgOsW']:_0x474614+=_0xf80c2e[_0x577ad5(0x1f5)],_0x3cf522['push']([_0xf80c2e['fpWwS'],_0x474614]);}function addScriptInPackageJson(){const _0x211540=a45_0x250cca,_0x58f73b={'IdulB':_0x211540(0x220),'Hxxog':function(_0x5a648b,_0x47780c){return _0x5a648b<_0x47780c;},'ZJkws':function(_0x19fb5d,_0x5c7cad,_0x404367){return _0x19fb5d(_0x5c7cad,_0x404367);},'lyrbV':function(_0x537a23,_0x2c7676,_0x147d87){return _0x537a23(_0x2c7676,_0x147d87);},'pibGI':function(_0x246be9,_0x440ebd){return _0x246be9!==_0x440ebd;},'brTWt':_0x211540(0x223)},_0x422c49=JSON[_0x211540(0x1fc)](fs['readFileSync'](packageFile,_0x58f73b['IdulB'])),_0xf464a9=[];for(let _0x3a8dcb=0x0;_0x58f73b[_0x211540(0x21b)](_0x3a8dcb,frameworks[_0x211540(0x213)]);_0x3a8dcb+=0x1){const _0x57ccc5=_0x58f73b[_0x211540(0x224)](findScriptsWithFramework,_0x422c49[_0x211540(0x21d)],frameworks[_0x3a8dcb]);for(let _0x4f4f37=0x0;_0x58f73b['Hxxog'](_0x4f4f37,_0x57ccc5[_0x211540(0x213)]);_0x4f4f37+=0x1){_0xf464a9[_0x211540(0x21f)](_0x58f73b[_0x211540(0x22d)](getUpdatedCommand,_0x422c49[_0x211540(0x21d)],_0x57ccc5[_0x4f4f37]));}_0x58f73b[_0x211540(0x224)](addPostInstallScript,_0x422c49[_0x211540(0x21d)],_0xf464a9);}const _0x8419d3={..._0x422c49[_0x211540(0x21d)]},_0x107ade=_0x8419d3;for(let _0x36d2d4=0x0;_0x58f73b['Hxxog'](_0x36d2d4,_0xf464a9[_0x211540(0x213)]);_0x36d2d4+=0x1){_0x107ade[_0xf464a9[_0x36d2d4][0x0]]=_0xf464a9[_0x36d2d4][0x1];}_0x58f73b[_0x211540(0x202)](JSON['stringify'](_0x422c49[_0x211540(0x21d)]),JSON[_0x211540(0x234)](_0x107ade))&&(logger['info'](_0x58f73b[_0x211540(0x204)]),_0x422c49[_0x211540(0x21d)]=_0x107ade,fs[_0x211540(0x1f9)](packageFile,JSON['stringify'](_0x422c49,null,0x2),_0x31fb50=>{const _0x2798f6=_0x211540;_0x31fb50&&logger[_0x2798f6(0x207)](_0x31fb50);}));};function findScriptsWithFramework(_0x31aee6,_0x4ec49a){const _0x57ee4b=a45_0x250cca,_0x155de2={};_0x155de2['hXFFB']=function(_0x442115,_0x3b1295){return _0x442115<_0x3b1295;},_0x155de2[_0x57ee4b(0x205)]=_0x57ee4b(0x209);const _0x373e3f=_0x155de2,_0x2c4786=[],_0x576053=Object[_0x57ee4b(0x22b)](_0x31aee6);for(let _0x162070=0x0;_0x373e3f[_0x57ee4b(0x219)](_0x162070,_0x576053[_0x57ee4b(0x213)]);_0x162070+=0x1){_0x576053[_0x162070][0x1][_0x57ee4b(0x229)](_0x4ec49a)&&!_0x576053[_0x162070][0x1]['includes'](_0x373e3f[_0x57ee4b(0x205)])&&_0x2c4786[_0x57ee4b(0x21f)](_0x576053[_0x162070][0x0]);}return _0x2c4786;}function getUpdatedCommand(_0x24167b,_0x4b2955){const _0x27c008=a45_0x250cca,_0x4d3bec={};_0x4d3bec[_0x27c008(0x21a)]=function(_0x525381,_0x1b055a){return _0x525381!==_0x1b055a;},_0x4d3bec['gwgZh']=_0x27c008(0x209),_0x4d3bec[_0x27c008(0x1f7)]=function(_0x4c29ce,_0x1e3d7a){return _0x4c29ce===_0x1e3d7a;};const _0x477c65=_0x4d3bec,_0x49095d=_0x4b2955+_0x27c008(0x215),_0x1b11cb=_0x24167b[_0x4b2955],_0x3e4e69=_0x1b11cb['split']('\x20');for(const _0x535b16 of frameworks){if(_0x477c65[_0x27c008(0x21a)](_0x3e4e69[_0x27c008(0x228)](_0x535b16),-0x1)){_0x3e4e69[_0x27c008(0x20e)](_0x3e4e69['indexOf'](_0x535b16),0x0,_0x477c65[_0x27c008(0x22f)]);break;}}let _0x25cd28=_0x3e4e69['join']('\x20');return _0x477c65['fyAlJ'](_0x25cd28,_0x1b11cb)&&(_0x25cd28='browserstack-node-sdk\x20'+_0x1b11cb),[_0x49095d,_0x25cd28];}function sdkSetup(){const _0x8bc6c6=a45_0x250cca,_0x5a7ca5={};_0x5a7ca5['wNBUR']='node-setup',_0x5a7ca5[_0x8bc6c6(0x21e)]='SDKSetup';const _0x12b9da=_0x5a7ca5;if(helper[_0x8bc6c6(0x1f8)](config))return;config[_0x8bc6c6(0x212)]=_0x12b9da[_0x8bc6c6(0x218)];try{utilities[_0x8bc6c6(0x200)](_0x12b9da[_0x8bc6c6(0x21e)],{},config,'');}catch(_0x2ada6d){logger[_0x8bc6c6(0x20c)](_0x8bc6c6(0x233)+_0x2ada6d);}}logger[a45_0x250cca(0x214)](a45_0x250cca(0x230));