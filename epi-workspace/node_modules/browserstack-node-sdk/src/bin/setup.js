#!/usr/bin/env node

const a45_0x18dfdb=a45_0x5d4e;function a45_0x2637(){const _0x1bd65b=['debug','sLNTj','isUndefined','replace','includes','info','../helpers/utilities','/browserstack.yml','HWyGA','bdyfb','argv','6065LtktDx','3944276uYHAFj','33VHAkja','playwright','../helpers/logger','utf8','1283982gljXHD','rWTcG','writeFileSync','ROjAt','browserstack-node-sdk','Setup\x20completed','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','entries','knOsd','Creating\x20configuration\x20file...','/package.json','SDKSetup','browserstack-node-sdk\x20','YOUR_ACCESS_KEY','parse','key','username','cucumber-js','codeceptjs','jtkWm','postinstall','JcNNr','732hDjVvG','yNCcg','-browserstack','load','scripts','readFileSync','js-yaml','eRgpU','Iqdus','cwd','jqXaa','\x20&&\x20npm\x20update\x20browserstack-node-sdk','5683410NLkJwh','indexOf','push','lgBiJ','join','zQcXL','xWyjL','Adding\x20new\x20script(s)\x20in\x20package.json...','1378554ciYFXl','RxAos','YCDjO','jest','WnUct','source','length','2lDTWZY','error','qDQQy','npm\x20update\x20browserstack-node-sdk','75411DREdZx','840DTqVBU','387403fztGuT','YOUR_USERNAME'];a45_0x2637=function(){return _0x1bd65b;};return a45_0x2637();}(function(_0x5b140e,_0x5f0d7b){const _0x393d41=a45_0x5d4e,_0x410367=_0x5b140e();while(!![]){try{const _0xea4ae1=parseInt(_0x393d41(0xbc))/0x1*(-parseInt(_0x393d41(0xb6))/0x2)+parseInt(_0x393d41(0xaf))/0x3+parseInt(_0x393d41(0xca))/0x4+parseInt(_0x393d41(0xc9))/0x5*(parseInt(_0x393d41(0xe5))/0x6)+parseInt(_0x393d41(0xcf))/0x7+-parseInt(_0x393d41(0xbb))/0x8*(-parseInt(_0x393d41(0xba))/0x9)+-parseInt(_0x393d41(0xf1))/0xa*(parseInt(_0x393d41(0xcb))/0xb);if(_0xea4ae1===_0x5f0d7b)break;else _0x410367['push'](_0x410367['shift']());}catch(_0x4004b1){_0x410367['push'](_0x410367['shift']());}}}(a45_0x2637,0x89c90));const fs=require('fs'),helper=require('../helpers/helper'),utilities=require(a45_0x18dfdb(0xc4)),yaml=require(a45_0x18dfdb(0xeb)),yargs=require('yargs'),logger=require(a45_0x18dfdb(0xcd))['winstonLogger'],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process[a45_0x18dfdb(0xee)]()+a45_0x18dfdb(0xc5),packageFile=process[a45_0x18dfdb(0xee)]()+a45_0x18dfdb(0xd9),frameworks=['mocha',a45_0x18dfdb(0xb2),a45_0x18dfdb(0xe0),'node','nightwatch',a45_0x18dfdb(0xe1),a45_0x18dfdb(0xcc)];let config;logger[a45_0x18dfdb(0xc3)](a45_0x18dfdb(0xd8)),createConfigurationFile(yargs[a45_0x18dfdb(0xc8)][a45_0x18dfdb(0xdf)],yargs[a45_0x18dfdb(0xc8)][a45_0x18dfdb(0xde)],yargs['argv'][a45_0x18dfdb(0xcc)]);try{sdkSetup();}catch(a45_0x23809a){logger['debug']('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a45_0x23809a);}addScriptInPackageJson();function createConfigurationFile(_0x363666,_0x2e065b,_0x2ec742=![]){const _0x1f332d=a45_0x18dfdb,_0x48f194={};_0x48f194['bdyfb']=_0x1f332d(0xce),_0x48f194[_0x1f332d(0xe2)]=_0x1f332d(0xbd),_0x48f194[_0x1f332d(0xd7)]=_0x1f332d(0xdc);const _0x47e339=_0x48f194;try{let _0x390038=fs[_0x1f332d(0xea)](_0x2ec742?configFileTemplatePW:configFileTemplate,_0x47e339[_0x1f332d(0xc7)]);_0x363666&&(_0x390038=_0x390038[_0x1f332d(0xc1)](_0x47e339[_0x1f332d(0xe2)],_0x363666)),_0x2e065b&&(_0x390038=_0x390038[_0x1f332d(0xc1)](_0x47e339[_0x1f332d(0xd7)],_0x2e065b)),config=yaml[_0x1f332d(0xe8)](_0x390038),fs[_0x1f332d(0xd1)](configFile,_0x390038,_0x539ef3=>{const _0x5e4aa1=_0x1f332d;_0x539ef3&&logger[_0x5e4aa1(0xb7)](_0x539ef3);});}catch(_0x33982e){logger[_0x1f332d(0xb7)](_0x33982e);}}function addPostInstallScript(_0x522a8a,_0x5e9d8f){const _0x3f11fa=a45_0x18dfdb,_0x20b189={};_0x20b189[_0x3f11fa(0xed)]=_0x3f11fa(0xe3),_0x20b189['tQMKU']=_0x3f11fa(0xb9),_0x20b189[_0x3f11fa(0xd0)]=_0x3f11fa(0xf0);const _0x202ecd=_0x20b189;let _0x432f52=_0x522a8a[_0x202ecd[_0x3f11fa(0xed)]];if(_0x432f52&&_0x432f52[_0x3f11fa(0xc2)](_0x202ecd['tQMKU']))return;!_0x432f52?_0x432f52=_0x202ecd['tQMKU']:_0x432f52+=_0x202ecd[_0x3f11fa(0xd0)],_0x5e9d8f['push']([_0x202ecd[_0x3f11fa(0xed)],_0x432f52]);}function addScriptInPackageJson(){const _0x831290=a45_0x18dfdb,_0x4293ae={'qDQQy':'utf8','xWyjL':function(_0xb63b7b,_0x1dc8ca){return _0xb63b7b<_0x1dc8ca;},'ROjAt':function(_0xa953fa,_0x3b3674,_0x36c8fa){return _0xa953fa(_0x3b3674,_0x36c8fa);},'YCDjO':function(_0x1a4836,_0x2b84b2,_0x3964a4){return _0x1a4836(_0x2b84b2,_0x3964a4);},'yNCcg':function(_0x1f2178,_0x5bd3c7){return _0x1f2178<_0x5bd3c7;},'JcNNr':function(_0x2afa6e,_0x49dd80){return _0x2afa6e!==_0x49dd80;},'sLNTj':_0x831290(0xae)},_0x209aac=JSON[_0x831290(0xdd)](fs[_0x831290(0xea)](packageFile,_0x4293ae[_0x831290(0xb8)])),_0x2d7331=[];for(let _0x4411c9=0x0;_0x4293ae[_0x831290(0xad)](_0x4411c9,frameworks[_0x831290(0xb5)]);_0x4411c9+=0x1){const _0x42e299=_0x4293ae[_0x831290(0xd2)](findScriptsWithFramework,_0x209aac[_0x831290(0xe9)],frameworks[_0x4411c9]);for(let _0x38b347=0x0;_0x4293ae[_0x831290(0xad)](_0x38b347,_0x42e299[_0x831290(0xb5)]);_0x38b347+=0x1){_0x2d7331[_0x831290(0xf3)](_0x4293ae[_0x831290(0xb1)](getUpdatedCommand,_0x209aac['scripts'],_0x42e299[_0x38b347]));}_0x4293ae['ROjAt'](addPostInstallScript,_0x209aac['scripts'],_0x2d7331);}const _0x13b9d4={..._0x209aac['scripts']},_0x1a4c6f=_0x13b9d4;for(let _0x32a102=0x0;_0x4293ae[_0x831290(0xe6)](_0x32a102,_0x2d7331[_0x831290(0xb5)]);_0x32a102+=0x1){_0x1a4c6f[_0x2d7331[_0x32a102][0x0]]=_0x2d7331[_0x32a102][0x1];}_0x4293ae[_0x831290(0xe4)](JSON['stringify'](_0x209aac[_0x831290(0xe9)]),JSON['stringify'](_0x1a4c6f))&&(logger[_0x831290(0xc3)](_0x4293ae[_0x831290(0xbf)]),_0x209aac[_0x831290(0xe9)]=_0x1a4c6f,fs['writeFileSync'](packageFile,JSON['stringify'](_0x209aac,null,0x2),_0x5b5e5d=>{const _0x31e434=_0x831290;_0x5b5e5d&&logger[_0x31e434(0xb7)](_0x5b5e5d);}));};function findScriptsWithFramework(_0x4ebfe0,_0x52635e){const _0x582928=a45_0x18dfdb,_0x10c19d={};_0x10c19d['eRgpU']=function(_0x12e846,_0x109c07){return _0x12e846<_0x109c07;},_0x10c19d[_0x582928(0xb3)]='browserstack-node-sdk';const _0x209b76=_0x10c19d,_0x1ea05b=[],_0x19acb7=Object[_0x582928(0xd6)](_0x4ebfe0);for(let _0x244b49=0x0;_0x209b76[_0x582928(0xec)](_0x244b49,_0x19acb7[_0x582928(0xb5)]);_0x244b49+=0x1){_0x19acb7[_0x244b49][0x1][_0x582928(0xc2)](_0x52635e)&&!_0x19acb7[_0x244b49][0x1]['includes'](_0x209b76[_0x582928(0xb3)])&&_0x1ea05b[_0x582928(0xf3)](_0x19acb7[_0x244b49][0x0]);}return _0x1ea05b;}function a45_0x5d4e(_0xdd4f4,_0x3845a7){const _0x2637e2=a45_0x2637();return a45_0x5d4e=function(_0x5d4e84,_0x1af9ec){_0x5d4e84=_0x5d4e84-0xaa;let _0x16f2a4=_0x2637e2[_0x5d4e84];return _0x16f2a4;},a45_0x5d4e(_0xdd4f4,_0x3845a7);}function getUpdatedCommand(_0x587ece,_0x260b87){const _0x43bd1e=a45_0x18dfdb,_0x18b8c0={};_0x18b8c0[_0x43bd1e(0xaa)]=function(_0x1d9d59,_0x3da6df){return _0x1d9d59!==_0x3da6df;},_0x18b8c0['RxAos']=_0x43bd1e(0xd3),_0x18b8c0[_0x43bd1e(0xef)]=function(_0x366c25,_0x2ff922){return _0x366c25===_0x2ff922;};const _0x36dd8d=_0x18b8c0,_0xfa437c=_0x260b87+_0x43bd1e(0xe7),_0x465b64=_0x587ece[_0x260b87],_0x403423=_0x465b64['split']('\x20');for(const _0x668101 of frameworks){if(_0x36dd8d[_0x43bd1e(0xaa)](_0x403423['indexOf'](_0x668101),-0x1)){_0x403423['splice'](_0x403423[_0x43bd1e(0xf2)](_0x668101),0x0,_0x36dd8d[_0x43bd1e(0xb0)]);break;}}let _0x443db1=_0x403423[_0x43bd1e(0xab)]('\x20');return _0x36dd8d[_0x43bd1e(0xef)](_0x443db1,_0x465b64)&&(_0x443db1=_0x43bd1e(0xdb)+_0x465b64),[_0xfa437c,_0x443db1];}function sdkSetup(){const _0x5551b4=a45_0x18dfdb,_0x5e5487={};_0x5e5487[_0x5551b4(0xac)]='node-setup',_0x5e5487[_0x5551b4(0xc6)]=_0x5551b4(0xda);const _0x2bf06e=_0x5e5487;if(helper[_0x5551b4(0xc0)](config))return;config[_0x5551b4(0xb4)]=_0x2bf06e['zQcXL'];try{utilities['fireFunnelTestEvent'](_0x2bf06e[_0x5551b4(0xc6)],{},config,'');}catch(_0x2dca3){logger[_0x5551b4(0xbe)](_0x5551b4(0xd5)+_0x2dca3);}}logger[a45_0x18dfdb(0xc3)](a45_0x18dfdb(0xd4));