#!/usr/bin/env node

const a50_0x51230d=a50_0x1792;(function(_0x24ad3d,_0x1e92c1){const _0x40f308=a50_0x1792,_0x24462c=_0x24ad3d();while(!![]){try{const _0x31aa12=parseInt(_0x40f308(0x179))/0x1+parseInt(_0x40f308(0x19c))/0x2*(-parseInt(_0x40f308(0x18b))/0x3)+-parseInt(_0x40f308(0x1a9))/0x4*(parseInt(_0x40f308(0x177))/0x5)+-parseInt(_0x40f308(0x19f))/0x6+parseInt(_0x40f308(0x17f))/0x7+-parseInt(_0x40f308(0x17e))/0x8+parseInt(_0x40f308(0x181))/0x9*(parseInt(_0x40f308(0x171))/0xa);if(_0x31aa12===_0x1e92c1)break;else _0x24462c['push'](_0x24462c['shift']());}catch(_0x566970){_0x24462c['push'](_0x24462c['shift']());}}}(a50_0x34c6,0x682f3));const fs=require('fs'),helper=require('../helpers/helper'),utilities=require(a50_0x51230d(0x18d)),yaml=require(a50_0x51230d(0x18c)),yargs=require(a50_0x51230d(0x19a)),logger=require('../helpers/logger')[a50_0x51230d(0x184)],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+a50_0x51230d(0x1a5),configFile=process[a50_0x51230d(0x191)]()+a50_0x51230d(0x188),packageFile=process[a50_0x51230d(0x191)]()+a50_0x51230d(0x176),frameworks=[a50_0x51230d(0x1b4),'jest',a50_0x51230d(0x199),'node',a50_0x51230d(0x17a),a50_0x51230d(0x1b6),a50_0x51230d(0x1b1)];function a50_0x34c6(){const _0x3d6780=['codeceptjs','pjeaY','sIfZc','Creating\x20configuration\x20file...','837610QBOWcb','utf8','splice','includes','BSQwM','/package.json','879180VQnbnV','Setup\x20completed','563835pKiPZX','nightwatch','length','gBrhC','browserstack-node-sdk','70240uvEXGo','4976272EiuXGx','writeFileSync','18bAvUeg','join','node-setup','winstonLogger','username','debug','replace','/browserstack.yml','info','ILcUh','3QRiGki','js-yaml','../helpers/utilities','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','stringify','readFileSync','cwd','npm\x20update\x20browserstack-node-sdk','ScOuX','dyxbJ','DMWBG','YOUR_ACCESS_KEY','push','source','cucumber-js','yargs','isUndefined','548906xLyygc','MJpAt','oUYEK','3338670zgSUJs','fireFunnelTestEvent','JOrRb','UmpXo','\x20&&\x20npm\x20update\x20browserstack-node-sdk','scripts','/../../browserstack.pw.yml.sample','CPkAX','browserstack-node-sdk\x20','error','4fTIdCs','postinstall','TMrBh','key','KoJIp','YOUR_USERNAME','split','AFnFb','playwright','-browserstack','argv','mocha','SHimy'];a50_0x34c6=function(){return _0x3d6780;};return a50_0x34c6();}let config;logger[a50_0x51230d(0x189)](a50_0x51230d(0x170)),createConfigurationFile(yargs[a50_0x51230d(0x1b3)][a50_0x51230d(0x185)],yargs[a50_0x51230d(0x1b3)][a50_0x51230d(0x1ac)],yargs[a50_0x51230d(0x1b3)][a50_0x51230d(0x1b1)]);try{sdkSetup();}catch(a50_0x3a5327){logger[a50_0x51230d(0x186)](a50_0x51230d(0x18e)+a50_0x3a5327);}addScriptInPackageJson();function createConfigurationFile(_0x45c226,_0x9e2466,_0x5168d6=![]){const _0x1a5118=a50_0x51230d,_0x555bdf={};_0x555bdf['CtycH']=_0x1a5118(0x172),_0x555bdf[_0x1a5118(0x1a6)]=_0x1a5118(0x1ae),_0x555bdf[_0x1a5118(0x1b8)]=_0x1a5118(0x196);const _0x5f27b7=_0x555bdf;try{let _0x53432c=fs[_0x1a5118(0x190)](_0x5168d6?configFileTemplatePW:configFileTemplate,_0x5f27b7['CtycH']);_0x45c226&&(_0x53432c=_0x53432c['replace'](_0x5f27b7['CPkAX'],_0x45c226)),_0x9e2466&&(_0x53432c=_0x53432c[_0x1a5118(0x187)](_0x5f27b7['sIfZc'],_0x9e2466)),config=yaml['load'](_0x53432c),fs[_0x1a5118(0x180)](configFile,_0x53432c,_0x158b6f=>{_0x158b6f&&logger['error'](_0x158b6f);});}catch(_0x2db1a8){logger[_0x1a5118(0x1a8)](_0x2db1a8);}}function addPostInstallScript(_0x3693d1,_0x14263f){const _0x3ec75e=a50_0x51230d,_0x37ef0e={};_0x37ef0e['AFnFb']=_0x3ec75e(0x1aa),_0x37ef0e[_0x3ec75e(0x19d)]=_0x3ec75e(0x192),_0x37ef0e['gBrhC']=_0x3ec75e(0x1a3);const _0x462bda=_0x37ef0e;let _0x28d792=_0x3693d1[_0x462bda[_0x3ec75e(0x1b0)]];if(_0x28d792&&_0x28d792[_0x3ec75e(0x174)](_0x462bda['MJpAt']))return;!_0x28d792?_0x28d792=_0x462bda['MJpAt']:_0x28d792+=_0x462bda[_0x3ec75e(0x17c)],_0x14263f[_0x3ec75e(0x197)]([_0x462bda[_0x3ec75e(0x1b0)],_0x28d792]);}function addScriptInPackageJson(){const _0x3c8998=a50_0x51230d,_0x4f0934={'pjeaY':_0x3c8998(0x172),'pYVRX':function(_0x36c6ba,_0x285dd8){return _0x36c6ba<_0x285dd8;},'TXycL':function(_0x15c444,_0x29a509,_0x24e9b2){return _0x15c444(_0x29a509,_0x24e9b2);},'ScOuX':function(_0x2690d6,_0x33f2c0){return _0x2690d6<_0x33f2c0;},'DMWBG':function(_0x19bbec,_0xddcd39,_0x23baaf){return _0x19bbec(_0xddcd39,_0x23baaf);},'JOrRb':function(_0x269260,_0x402846,_0x41c888){return _0x269260(_0x402846,_0x41c888);},'ypQuo':function(_0x5ecd0c,_0x5ea647){return _0x5ecd0c<_0x5ea647;},'SHimy':function(_0x3aefec,_0x399421){return _0x3aefec!==_0x399421;},'BSQwM':'Adding\x20new\x20script(s)\x20in\x20package.json...'},_0x5d5166=JSON['parse'](fs[_0x3c8998(0x190)](packageFile,_0x4f0934[_0x3c8998(0x1b7)])),_0x4eba36=[];for(let _0x3e7a51=0x0;_0x4f0934['pYVRX'](_0x3e7a51,frameworks[_0x3c8998(0x17b)]);_0x3e7a51+=0x1){const _0x4ed485=_0x4f0934['TXycL'](findScriptsWithFramework,_0x5d5166[_0x3c8998(0x1a4)],frameworks[_0x3e7a51]);for(let _0x58032e=0x0;_0x4f0934[_0x3c8998(0x193)](_0x58032e,_0x4ed485[_0x3c8998(0x17b)]);_0x58032e+=0x1){_0x4eba36[_0x3c8998(0x197)](_0x4f0934[_0x3c8998(0x195)](getUpdatedCommand,_0x5d5166[_0x3c8998(0x1a4)],_0x4ed485[_0x58032e]));}_0x4f0934[_0x3c8998(0x1a1)](addPostInstallScript,_0x5d5166[_0x3c8998(0x1a4)],_0x4eba36);}const _0x554c70={..._0x5d5166['scripts']},_0x2b0228=_0x554c70;for(let _0x3919fc=0x0;_0x4f0934['ypQuo'](_0x3919fc,_0x4eba36[_0x3c8998(0x17b)]);_0x3919fc+=0x1){_0x2b0228[_0x4eba36[_0x3919fc][0x0]]=_0x4eba36[_0x3919fc][0x1];}_0x4f0934[_0x3c8998(0x1b5)](JSON[_0x3c8998(0x18f)](_0x5d5166[_0x3c8998(0x1a4)]),JSON['stringify'](_0x2b0228))&&(logger[_0x3c8998(0x189)](_0x4f0934[_0x3c8998(0x175)]),_0x5d5166[_0x3c8998(0x1a4)]=_0x2b0228,fs[_0x3c8998(0x180)](packageFile,JSON[_0x3c8998(0x18f)](_0x5d5166,null,0x2),_0x1eb2e8=>{const _0x413b3e=_0x3c8998;_0x1eb2e8&&logger[_0x413b3e(0x1a8)](_0x1eb2e8);}));}function a50_0x1792(_0x4a3030,_0x1aee41){const _0x34c6fa=a50_0x34c6();return a50_0x1792=function(_0x17927,_0x14aa78){_0x17927=_0x17927-0x170;let _0x377576=_0x34c6fa[_0x17927];return _0x377576;},a50_0x1792(_0x4a3030,_0x1aee41);};function findScriptsWithFramework(_0x39ccc0,_0x27abb2){const _0x3a97e6=a50_0x51230d,_0xdc08d8={};_0xdc08d8[_0x3a97e6(0x1ad)]=function(_0x113dbf,_0x4b3ee3){return _0x113dbf<_0x4b3ee3;},_0xdc08d8['FJRBC']=_0x3a97e6(0x17d);const _0xaa598d=_0xdc08d8,_0x1b580a=[],_0x4090cc=Object['entries'](_0x39ccc0);for(let _0x4922bb=0x0;_0xaa598d[_0x3a97e6(0x1ad)](_0x4922bb,_0x4090cc[_0x3a97e6(0x17b)]);_0x4922bb+=0x1){_0x4090cc[_0x4922bb][0x1][_0x3a97e6(0x174)](_0x27abb2)&&!_0x4090cc[_0x4922bb][0x1][_0x3a97e6(0x174)](_0xaa598d['FJRBC'])&&_0x1b580a[_0x3a97e6(0x197)](_0x4090cc[_0x4922bb][0x0]);}return _0x1b580a;}function getUpdatedCommand(_0x556f93,_0x4f8207){const _0x56bd98=a50_0x51230d,_0x2adac1={};_0x2adac1[_0x56bd98(0x1ab)]=function(_0x1fa981,_0x5754b8){return _0x1fa981!==_0x5754b8;},_0x2adac1[_0x56bd98(0x18a)]=_0x56bd98(0x17d),_0x2adac1['oUYEK']=function(_0x55722a,_0x5016d6){return _0x55722a===_0x5016d6;};const _0x1ffbed=_0x2adac1,_0x1bbaf3=_0x4f8207+_0x56bd98(0x1b2),_0x17012b=_0x556f93[_0x4f8207],_0x18f037=_0x17012b[_0x56bd98(0x1af)]('\x20');for(const _0xf274fb of frameworks){if(_0x1ffbed[_0x56bd98(0x1ab)](_0x18f037['indexOf'](_0xf274fb),-0x1)){_0x18f037[_0x56bd98(0x173)](_0x18f037['indexOf'](_0xf274fb),0x0,_0x1ffbed[_0x56bd98(0x18a)]);break;}}let _0x1c3be9=_0x18f037[_0x56bd98(0x182)]('\x20');return _0x1ffbed[_0x56bd98(0x19e)](_0x1c3be9,_0x17012b)&&(_0x1c3be9=_0x56bd98(0x1a7)+_0x17012b),[_0x1bbaf3,_0x1c3be9];}function sdkSetup(){const _0x13b160=a50_0x51230d,_0x209a2b={};_0x209a2b[_0x13b160(0x1a2)]=_0x13b160(0x183),_0x209a2b[_0x13b160(0x194)]='SDKSetup';const _0x43d846=_0x209a2b;if(helper[_0x13b160(0x19b)](config))return;config[_0x13b160(0x198)]=_0x43d846['UmpXo'];try{utilities[_0x13b160(0x1a0)](_0x43d846['dyxbJ'],{},config,'');}catch(_0x24c45e){logger[_0x13b160(0x186)](_0x13b160(0x18e)+_0x24c45e);}}logger[a50_0x51230d(0x189)](a50_0x51230d(0x178));