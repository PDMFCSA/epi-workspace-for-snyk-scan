#!/usr/bin/env node

const a45_0x20964f=a45_0x2ea1;(function(_0x42876d,_0x41fc02){const _0x48a756=a45_0x2ea1,_0x2b1e8e=_0x42876d();while(!![]){try{const _0x303fb0=-parseInt(_0x48a756(0x1a2))/0x1+parseInt(_0x48a756(0x1a1))/0x2*(parseInt(_0x48a756(0x1ca))/0x3)+parseInt(_0x48a756(0x18a))/0x4*(-parseInt(_0x48a756(0x1ce))/0x5)+parseInt(_0x48a756(0x1a7))/0x6*(-parseInt(_0x48a756(0x1b9))/0x7)+-parseInt(_0x48a756(0x188))/0x8*(-parseInt(_0x48a756(0x1cf))/0x9)+-parseInt(_0x48a756(0x191))/0xa+parseInt(_0x48a756(0x18c))/0xb*(parseInt(_0x48a756(0x1ab))/0xc);if(_0x303fb0===_0x41fc02)break;else _0x2b1e8e['push'](_0x2b1e8e['shift']());}catch(_0x28c9a7){_0x2b1e8e['push'](_0x2b1e8e['shift']());}}}(a45_0x5ce6,0x2da54));function a45_0x5ce6(){const _0x1be964=['XTEvh','SMqFo','OWCZY','7nvGqfT','xLBZc','browserstack-node-sdk\x20','tkxOF','YOUR_ACCESS_KEY','YOUR_USERNAME','NwCKJ','VZkWH','argv','source','fMuVe','parse','node-setup','ubnPP','error','stringify','ANGZz','6AFfmwK','TRKaW','indexOf','Setup\x20completed','1487820NNBNcq','18lmoGfH','length','fireFunnelTestEvent','readFileSync','ZaaOH','winstonLogger','replace','1416208uaeGRh','key','4rYXpqh','UkLgG','11Wosbzd','splice','postinstall','/browserstack.yml','SWabk','3107450itFwAY','npm\x20update\x20browserstack-node-sdk','cwd','/../../browserstack.yml.sample','utf8','scripts','ATwyt','tANSg','writeFileSync','cucumber-js','split','push','nightwatch','yargs','includes','mocha','166006hiQuTY','170552bVKLmG','isUndefined','info','\x20&&\x20npm\x20update\x20browserstack-node-sdk','../helpers/logger','1001202niqHrT','MnhRr','browserstack-node-sdk','debug','7351608rbJxPg','entries','zJjdb','playwright','Creating\x20configuration\x20file...','js-yaml','../helpers/utilities','zZDaJ','username','SDKSetup','-browserstack'];a45_0x5ce6=function(){return _0x1be964;};return a45_0x5ce6();}const fs=require('fs'),helper=require('../helpers/helper'),utilities=require(a45_0x20964f(0x1b1)),yaml=require(a45_0x20964f(0x1b0)),yargs=require(a45_0x20964f(0x19e)),logger=require(a45_0x20964f(0x1a6))[a45_0x20964f(0x186)],configFileTemplate=__dirname+a45_0x20964f(0x194),configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process['cwd']()+a45_0x20964f(0x18f),packageFile=process[a45_0x20964f(0x193)]()+'/package.json',frameworks=[a45_0x20964f(0x1a0),'jest',a45_0x20964f(0x19a),'node',a45_0x20964f(0x19d),'codeceptjs',a45_0x20964f(0x1ae)];let config;logger[a45_0x20964f(0x1a4)](a45_0x20964f(0x1af)),createConfigurationFile(yargs[a45_0x20964f(0x1c1)][a45_0x20964f(0x1b3)],yargs[a45_0x20964f(0x1c1)][a45_0x20964f(0x189)],yargs[a45_0x20964f(0x1c1)]['playwright']);try{sdkSetup();}catch(a45_0x4d316f){logger[a45_0x20964f(0x1aa)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a45_0x4d316f);}function a45_0x2ea1(_0x30cdd7,_0x3046bb){const _0x5ce6d5=a45_0x5ce6();return a45_0x2ea1=function(_0x2ea119,_0x1bf684){_0x2ea119=_0x2ea119-0x183;let _0x3e81d8=_0x5ce6d5[_0x2ea119];return _0x3e81d8;},a45_0x2ea1(_0x30cdd7,_0x3046bb);}addScriptInPackageJson();function createConfigurationFile(_0xdcc619,_0x192f44,_0x24b3fa=![]){const _0x505b6c=a45_0x20964f,_0x157181={};_0x157181[_0x505b6c(0x1bf)]=_0x505b6c(0x195),_0x157181['SWabk']=_0x505b6c(0x1be),_0x157181[_0x505b6c(0x1c0)]=_0x505b6c(0x1bd);const _0x599fa0=_0x157181;try{let _0x3da6a0=fs[_0x505b6c(0x184)](_0x24b3fa?configFileTemplatePW:configFileTemplate,_0x599fa0[_0x505b6c(0x1bf)]);_0xdcc619&&(_0x3da6a0=_0x3da6a0[_0x505b6c(0x187)](_0x599fa0[_0x505b6c(0x190)],_0xdcc619)),_0x192f44&&(_0x3da6a0=_0x3da6a0[_0x505b6c(0x187)](_0x599fa0[_0x505b6c(0x1c0)],_0x192f44)),config=yaml['load'](_0x3da6a0),fs['writeFileSync'](configFile,_0x3da6a0,_0x17ccfc=>{const _0xd4dd7d=_0x505b6c;_0x17ccfc&&logger[_0xd4dd7d(0x1c7)](_0x17ccfc);});}catch(_0x329603){logger[_0x505b6c(0x1c7)](_0x329603);}}function addPostInstallScript(_0x27c674,_0xe99049){const _0x34a707=a45_0x20964f,_0x5df9b8={};_0x5df9b8['OWCZY']=_0x34a707(0x18e),_0x5df9b8[_0x34a707(0x1a8)]=_0x34a707(0x192),_0x5df9b8[_0x34a707(0x1b2)]=_0x34a707(0x1a5);const _0x28c098=_0x5df9b8;let _0x31fd40=_0x27c674[_0x28c098[_0x34a707(0x1b8)]];if(_0x31fd40&&_0x31fd40['includes'](_0x28c098[_0x34a707(0x1a8)]))return;!_0x31fd40?_0x31fd40=_0x28c098[_0x34a707(0x1a8)]:_0x31fd40+=_0x28c098['zZDaJ'],_0xe99049[_0x34a707(0x19c)]([_0x28c098['OWCZY'],_0x31fd40]);}function addScriptInPackageJson(){const _0x1b64e0=a45_0x20964f,_0x4fd983={'ubnPP':_0x1b64e0(0x195),'UkLgG':function(_0x2b4f0d,_0x1ccd62){return _0x2b4f0d<_0x1ccd62;},'tANSg':function(_0x308836,_0x2cdabd,_0x325c66){return _0x308836(_0x2cdabd,_0x325c66);},'kjhRK':function(_0x57a119,_0xfc0d8c){return _0x57a119<_0xfc0d8c;},'tkxOF':function(_0x1b279c,_0x591841){return _0x1b279c<_0x591841;},'xLBZc':function(_0x354169,_0x4148b7){return _0x354169!==_0x4148b7;},'ZaaOH':'Adding\x20new\x20script(s)\x20in\x20package.json...'},_0x3c7969=JSON[_0x1b64e0(0x1c4)](fs[_0x1b64e0(0x184)](packageFile,_0x4fd983[_0x1b64e0(0x1c6)])),_0x362812=[];for(let _0x3c1069=0x0;_0x4fd983[_0x1b64e0(0x18b)](_0x3c1069,frameworks['length']);_0x3c1069+=0x1){const _0x2a20b9=_0x4fd983[_0x1b64e0(0x198)](findScriptsWithFramework,_0x3c7969[_0x1b64e0(0x196)],frameworks[_0x3c1069]);for(let _0x1b8e77=0x0;_0x4fd983['kjhRK'](_0x1b8e77,_0x2a20b9[_0x1b64e0(0x1d0)]);_0x1b8e77+=0x1){_0x362812[_0x1b64e0(0x19c)](_0x4fd983[_0x1b64e0(0x198)](getUpdatedCommand,_0x3c7969[_0x1b64e0(0x196)],_0x2a20b9[_0x1b8e77]));}_0x4fd983['tANSg'](addPostInstallScript,_0x3c7969[_0x1b64e0(0x196)],_0x362812);}const _0xa4cdf3={..._0x3c7969[_0x1b64e0(0x196)]},_0x5f0ec5=_0xa4cdf3;for(let _0x1711a1=0x0;_0x4fd983[_0x1b64e0(0x1bc)](_0x1711a1,_0x362812[_0x1b64e0(0x1d0)]);_0x1711a1+=0x1){_0x5f0ec5[_0x362812[_0x1711a1][0x0]]=_0x362812[_0x1711a1][0x1];}_0x4fd983[_0x1b64e0(0x1ba)](JSON[_0x1b64e0(0x1c8)](_0x3c7969[_0x1b64e0(0x196)]),JSON[_0x1b64e0(0x1c8)](_0x5f0ec5))&&(logger[_0x1b64e0(0x1a4)](_0x4fd983[_0x1b64e0(0x185)]),_0x3c7969['scripts']=_0x5f0ec5,fs[_0x1b64e0(0x199)](packageFile,JSON[_0x1b64e0(0x1c8)](_0x3c7969,null,0x2),_0x361cef=>{const _0x5002d9=_0x1b64e0;_0x361cef&&logger[_0x5002d9(0x1c7)](_0x361cef);}));};function findScriptsWithFramework(_0x15a3bf,_0x1ef7ba){const _0x440448=a45_0x20964f,_0x1a38ac={};_0x1a38ac['fMuVe']=function(_0xf6247,_0x18dd6f){return _0xf6247<_0x18dd6f;},_0x1a38ac[_0x440448(0x197)]=_0x440448(0x1a9);const _0x343a91=_0x1a38ac,_0x17515d=[],_0x3942fd=Object[_0x440448(0x1ac)](_0x15a3bf);for(let _0x11aa21=0x0;_0x343a91[_0x440448(0x1c3)](_0x11aa21,_0x3942fd[_0x440448(0x1d0)]);_0x11aa21+=0x1){_0x3942fd[_0x11aa21][0x1][_0x440448(0x19f)](_0x1ef7ba)&&!_0x3942fd[_0x11aa21][0x1]['includes'](_0x343a91[_0x440448(0x197)])&&_0x17515d[_0x440448(0x19c)](_0x3942fd[_0x11aa21][0x0]);}return _0x17515d;}function getUpdatedCommand(_0xe52ff7,_0x14f239){const _0x53507e=a45_0x20964f,_0x384970={};_0x384970[_0x53507e(0x1b6)]=function(_0x2839fa,_0xb02cbc){return _0x2839fa!==_0xb02cbc;},_0x384970[_0x53507e(0x1c9)]=_0x53507e(0x1a9),_0x384970[_0x53507e(0x1cb)]=function(_0x37fbb2,_0x5707d1){return _0x37fbb2===_0x5707d1;};const _0x3576b6=_0x384970,_0x34ea72=_0x14f239+_0x53507e(0x1b5),_0x241ca=_0xe52ff7[_0x14f239],_0x37f342=_0x241ca[_0x53507e(0x19b)]('\x20');for(const _0xa9afee of frameworks){if(_0x3576b6[_0x53507e(0x1b6)](_0x37f342['indexOf'](_0xa9afee),-0x1)){_0x37f342[_0x53507e(0x18d)](_0x37f342[_0x53507e(0x1cc)](_0xa9afee),0x0,_0x3576b6[_0x53507e(0x1c9)]);break;}}let _0x1ab984=_0x37f342['join']('\x20');return _0x3576b6[_0x53507e(0x1cb)](_0x1ab984,_0x241ca)&&(_0x1ab984=_0x53507e(0x1bb)+_0x241ca),[_0x34ea72,_0x1ab984];}function sdkSetup(){const _0x40c03=a45_0x20964f,_0x4898da={};_0x4898da[_0x40c03(0x1ad)]=_0x40c03(0x1c5),_0x4898da[_0x40c03(0x1b7)]=_0x40c03(0x1b4);const _0x3fff9a=_0x4898da;if(helper[_0x40c03(0x1a3)](config))return;config[_0x40c03(0x1c2)]=_0x3fff9a['zJjdb'];try{utilities[_0x40c03(0x183)](_0x3fff9a[_0x40c03(0x1b7)],{},config,'');}catch(_0x30382e){logger[_0x40c03(0x1aa)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+_0x30382e);}}logger[a45_0x20964f(0x1a4)](a45_0x20964f(0x1cd));