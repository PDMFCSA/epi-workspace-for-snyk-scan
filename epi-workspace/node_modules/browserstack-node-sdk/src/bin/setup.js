#!/usr/bin/env node

const a49_0x1b0258=a49_0x4f3c;(function(_0x108b02,_0x19b2a4){const _0x3888f0=a49_0x4f3c,_0x2a143c=_0x108b02();while(!![]){try{const _0x4de78c=parseInt(_0x3888f0(0x1e5))/0x1+parseInt(_0x3888f0(0x1f9))/0x2*(-parseInt(_0x3888f0(0x1dc))/0x3)+parseInt(_0x3888f0(0x20b))/0x4*(parseInt(_0x3888f0(0x1e9))/0x5)+-parseInt(_0x3888f0(0x1e6))/0x6*(parseInt(_0x3888f0(0x1d6))/0x7)+-parseInt(_0x3888f0(0x220))/0x8*(parseInt(_0x3888f0(0x1fb))/0x9)+parseInt(_0x3888f0(0x1fc))/0xa+parseInt(_0x3888f0(0x224))/0xb;if(_0x4de78c===_0x19b2a4)break;else _0x2a143c['push'](_0x2a143c['shift']());}catch(_0x59e5ca){_0x2a143c['push'](_0x2a143c['shift']());}}}(a49_0x145a,0x29d8d));const fs=require('fs'),helper=require(a49_0x1b0258(0x1ec)),utilities=require(a49_0x1b0258(0x20f)),yaml=require(a49_0x1b0258(0x1ef)),yargs=require('yargs'),logger=require(a49_0x1b0258(0x1e4))[a49_0x1b0258(0x21d)],configFileTemplate=__dirname+a49_0x1b0258(0x209),configFileTemplatePW=__dirname+a49_0x1b0258(0x1d8),configFile=process[a49_0x1b0258(0x1dd)]()+a49_0x1b0258(0x1f7),packageFile=process['cwd']()+a49_0x1b0258(0x21a),frameworks=[a49_0x1b0258(0x1f8),'jest',a49_0x1b0258(0x205),a49_0x1b0258(0x210),a49_0x1b0258(0x1e8),'codeceptjs',a49_0x1b0258(0x213)];let config;logger[a49_0x1b0258(0x21f)](a49_0x1b0258(0x201)),createConfigurationFile(yargs['argv'][a49_0x1b0258(0x1e1)],yargs[a49_0x1b0258(0x206)][a49_0x1b0258(0x216)],yargs[a49_0x1b0258(0x206)]['playwright']);try{sdkSetup();}catch(a49_0x57c1cb){logger[a49_0x1b0258(0x1d9)](a49_0x1b0258(0x1da)+a49_0x57c1cb);}addScriptInPackageJson();function createConfigurationFile(_0x3111a3,_0x803d7d,_0x4a2b64=![]){const _0x483883=a49_0x1b0258,_0x329353={};_0x329353[_0x483883(0x207)]=_0x483883(0x218),_0x329353['HimnW']=_0x483883(0x219),_0x329353[_0x483883(0x1f5)]=_0x483883(0x1fd);const _0x311f6b=_0x329353;try{let _0x53130b=fs[_0x483883(0x1f2)](_0x4a2b64?configFileTemplatePW:configFileTemplate,_0x311f6b['pWRfd']);_0x3111a3&&(_0x53130b=_0x53130b[_0x483883(0x1fa)](_0x311f6b[_0x483883(0x1e3)],_0x3111a3)),_0x803d7d&&(_0x53130b=_0x53130b[_0x483883(0x1fa)](_0x311f6b['BvkCw'],_0x803d7d)),config=yaml['load'](_0x53130b),fs[_0x483883(0x20a)](configFile,_0x53130b,_0x139ef8=>{const _0x2eaa18=_0x483883;_0x139ef8&&logger[_0x2eaa18(0x1ed)](_0x139ef8);});}catch(_0x46b2f7){logger[_0x483883(0x1ed)](_0x46b2f7);}}function addPostInstallScript(_0x578136,_0x1c1e57){const _0x5ffdd=a49_0x1b0258,_0x2d2d21={};_0x2d2d21[_0x5ffdd(0x1f1)]=_0x5ffdd(0x1db),_0x2d2d21[_0x5ffdd(0x204)]=_0x5ffdd(0x1fe),_0x2d2d21['BJCfJ']=_0x5ffdd(0x202);const _0x4c9f89=_0x2d2d21;let _0x5d5f3c=_0x578136[_0x4c9f89[_0x5ffdd(0x1f1)]];if(_0x5d5f3c&&_0x5d5f3c[_0x5ffdd(0x21b)](_0x4c9f89[_0x5ffdd(0x204)]))return;!_0x5d5f3c?_0x5d5f3c=_0x4c9f89[_0x5ffdd(0x204)]:_0x5d5f3c+=_0x4c9f89[_0x5ffdd(0x222)],_0x1c1e57[_0x5ffdd(0x1de)]([_0x4c9f89[_0x5ffdd(0x1f1)],_0x5d5f3c]);}function addScriptInPackageJson(){const _0x23953f=a49_0x1b0258,_0x4a4e42={'QAycD':_0x23953f(0x218),'WFcDG':function(_0x29b87b,_0x477d2b){return _0x29b87b<_0x477d2b;},'TqOKW':function(_0x4ab650,_0xc08b34,_0x524c78){return _0x4ab650(_0xc08b34,_0x524c78);},'gcIpF':function(_0xda76a6,_0x3e3368){return _0xda76a6<_0x3e3368;},'WnFfs':function(_0x4eee32,_0x4442ec,_0x1dcffa){return _0x4eee32(_0x4442ec,_0x1dcffa);},'CjytH':function(_0x19003a,_0x53727b){return _0x19003a!==_0x53727b;},'fLnwh':'Adding\x20new\x20script(s)\x20in\x20package.json...'},_0x24cd0d=JSON[_0x23953f(0x208)](fs[_0x23953f(0x1f2)](packageFile,_0x4a4e42[_0x23953f(0x1ea)])),_0x51203f=[];for(let _0x38e9f3=0x0;_0x4a4e42[_0x23953f(0x1f4)](_0x38e9f3,frameworks[_0x23953f(0x1ff)]);_0x38e9f3+=0x1){const _0x515882=_0x4a4e42[_0x23953f(0x20c)](findScriptsWithFramework,_0x24cd0d[_0x23953f(0x214)],frameworks[_0x38e9f3]);for(let _0x22c449=0x0;_0x4a4e42[_0x23953f(0x1f3)](_0x22c449,_0x515882['length']);_0x22c449+=0x1){_0x51203f[_0x23953f(0x1de)](_0x4a4e42['TqOKW'](getUpdatedCommand,_0x24cd0d[_0x23953f(0x214)],_0x515882[_0x22c449]));}_0x4a4e42[_0x23953f(0x1e0)](addPostInstallScript,_0x24cd0d[_0x23953f(0x214)],_0x51203f);}const _0x7087be={..._0x24cd0d[_0x23953f(0x214)]},_0xe4d173=_0x7087be;for(let _0x377e53=0x0;_0x4a4e42[_0x23953f(0x1f4)](_0x377e53,_0x51203f[_0x23953f(0x1ff)]);_0x377e53+=0x1){_0xe4d173[_0x51203f[_0x377e53][0x0]]=_0x51203f[_0x377e53][0x1];}_0x4a4e42[_0x23953f(0x203)](JSON[_0x23953f(0x20e)](_0x24cd0d['scripts']),JSON['stringify'](_0xe4d173))&&(logger[_0x23953f(0x21f)](_0x4a4e42['fLnwh']),_0x24cd0d['scripts']=_0xe4d173,fs[_0x23953f(0x20a)](packageFile,JSON[_0x23953f(0x20e)](_0x24cd0d,null,0x2),_0x4283ba=>{const _0x10155d=_0x23953f;_0x4283ba&&logger[_0x10155d(0x1ed)](_0x4283ba);}));};function a49_0x145a(){const _0x4c187a=['9063vlDCBJ','1673660rDiQrc','YOUR_ACCESS_KEY','npm\x20update\x20browserstack-node-sdk','length','eFuPL','Creating\x20configuration\x20file...','\x20&&\x20npm\x20update\x20browserstack-node-sdk','CjytH','nUlgJ','cucumber-js','argv','pWRfd','parse','/../../browserstack.yml.sample','writeFileSync','220oHqaPE','TqOKW','split','stringify','../helpers/utilities','node','indexOf','ePUlt','playwright','scripts','hZoKK','key','Setup\x20completed','utf8','YOUR_USERNAME','/package.json','includes','SYYvC','winstonLogger','browserstack-node-sdk','info','2248SzzPVd','-browserstack','BJCfJ','entries','4450325ApGDNl','619864JKEDsj','node-setup','/../../browserstack.pw.yml.sample','debug','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','postinstall','8247UHczJC','cwd','push','source','WnFfs','username','join','HimnW','../helpers/logger','32376ePvxth','6wvlTRs','splice','nightwatch','4915ERijqi','QAycD','fireFunnelTestEvent','../helpers/helper','error','isUndefined','js-yaml','CJjJl','sbXqV','readFileSync','gcIpF','WFcDG','BvkCw','cZrJa','/browserstack.yml','mocha','84NVZcqx','replace'];a49_0x145a=function(){return _0x4c187a;};return a49_0x145a();}function findScriptsWithFramework(_0xddd6db,_0x4b3f69){const _0x289c76=a49_0x1b0258,_0x46c908={};_0x46c908[_0x289c76(0x21c)]=function(_0x8e2fb9,_0x3b4d82){return _0x8e2fb9<_0x3b4d82;},_0x46c908[_0x289c76(0x200)]=_0x289c76(0x21e);const _0x264ced=_0x46c908,_0x9848e4=[],_0x12face=Object[_0x289c76(0x223)](_0xddd6db);for(let _0x18f0dd=0x0;_0x264ced['SYYvC'](_0x18f0dd,_0x12face[_0x289c76(0x1ff)]);_0x18f0dd+=0x1){_0x12face[_0x18f0dd][0x1][_0x289c76(0x21b)](_0x4b3f69)&&!_0x12face[_0x18f0dd][0x1][_0x289c76(0x21b)](_0x264ced[_0x289c76(0x200)])&&_0x9848e4[_0x289c76(0x1de)](_0x12face[_0x18f0dd][0x0]);}return _0x9848e4;}function getUpdatedCommand(_0x211ef4,_0x3e3cd0){const _0x19d9ba=a49_0x1b0258,_0xe67178={};_0xe67178[_0x19d9ba(0x215)]=function(_0x428810,_0x55518b){return _0x428810!==_0x55518b;},_0xe67178['CJjJl']='browserstack-node-sdk',_0xe67178['PkyjD']=function(_0x3d94a9,_0x128bee){return _0x3d94a9===_0x128bee;};const _0xd2bcdb=_0xe67178,_0x536d0f=_0x3e3cd0+_0x19d9ba(0x221),_0x63b8aa=_0x211ef4[_0x3e3cd0],_0x2f5389=_0x63b8aa[_0x19d9ba(0x20d)]('\x20');for(const _0x2f1219 of frameworks){if(_0xd2bcdb[_0x19d9ba(0x215)](_0x2f5389[_0x19d9ba(0x211)](_0x2f1219),-0x1)){_0x2f5389[_0x19d9ba(0x1e7)](_0x2f5389['indexOf'](_0x2f1219),0x0,_0xd2bcdb[_0x19d9ba(0x1f0)]);break;}}let _0x32d420=_0x2f5389[_0x19d9ba(0x1e2)]('\x20');return _0xd2bcdb['PkyjD'](_0x32d420,_0x63b8aa)&&(_0x32d420='browserstack-node-sdk\x20'+_0x63b8aa),[_0x536d0f,_0x32d420];}function a49_0x4f3c(_0x4c39ca,_0x2c35b1){const _0x145a3c=a49_0x145a();return a49_0x4f3c=function(_0x4f3ce9,_0x563730){_0x4f3ce9=_0x4f3ce9-0x1d6;let _0x57654b=_0x145a3c[_0x4f3ce9];return _0x57654b;},a49_0x4f3c(_0x4c39ca,_0x2c35b1);}function sdkSetup(){const _0x462e16=a49_0x1b0258,_0x50ef89={};_0x50ef89[_0x462e16(0x1f6)]=_0x462e16(0x1d7),_0x50ef89[_0x462e16(0x212)]='SDKSetup';const _0x16e4a4=_0x50ef89;if(helper[_0x462e16(0x1ee)](config))return;config[_0x462e16(0x1df)]=_0x16e4a4['cZrJa'];try{utilities[_0x462e16(0x1eb)](_0x16e4a4[_0x462e16(0x212)],{},config,'');}catch(_0x1fcbe5){logger[_0x462e16(0x1d9)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+_0x1fcbe5);}}logger[a49_0x1b0258(0x21f)](a49_0x1b0258(0x217));