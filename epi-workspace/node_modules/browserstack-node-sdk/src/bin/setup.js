#!/usr/bin/env node

const a45_0x280664=a45_0x3acf;(function(_0x43dace,_0x321914){const _0x130234=a45_0x3acf,_0x2719e9=_0x43dace();while(!![]){try{const _0x12a745=parseInt(_0x130234(0x110))/0x1+parseInt(_0x130234(0xfa))/0x2*(-parseInt(_0x130234(0xf9))/0x3)+-parseInt(_0x130234(0x11e))/0x4+-parseInt(_0x130234(0x113))/0x5+-parseInt(_0x130234(0x115))/0x6*(-parseInt(_0x130234(0x114))/0x7)+-parseInt(_0x130234(0x117))/0x8*(-parseInt(_0x130234(0x106))/0x9)+parseInt(_0x130234(0x12d))/0xa*(parseInt(_0x130234(0x126))/0xb);if(_0x12a745===_0x321914)break;else _0x2719e9['push'](_0x2719e9['shift']());}catch(_0x281f19){_0x2719e9['push'](_0x2719e9['shift']());}}}(a45_0x4108,0xc983f));const fs=require('fs'),helper=require('../helpers/helper'),utilities=require('../helpers/utilities'),yaml=require('js-yaml'),yargs=require(a45_0x280664(0x11b)),logger=require('../helpers/logger')[a45_0x280664(0xf8)],configFileTemplate=__dirname+a45_0x280664(0x123),configFileTemplatePW=__dirname+a45_0x280664(0x12a),configFile=process[a45_0x280664(0x109)]()+'/browserstack.yml',packageFile=process['cwd']()+a45_0x280664(0x128),frameworks=[a45_0x280664(0xff),a45_0x280664(0xf6),a45_0x280664(0x130),a45_0x280664(0xf7),'nightwatch','codeceptjs','playwright'];function a45_0x3acf(_0x3df2cf,_0x5e3928){const _0x410803=a45_0x4108();return a45_0x3acf=function(_0x3acfe6,_0x288c06){_0x3acfe6=_0x3acfe6-0xf1;let _0x3adee0=_0x410803[_0x3acfe6];return _0x3adee0;},a45_0x3acf(_0x3df2cf,_0x5e3928);}let config;logger[a45_0x280664(0x12e)](a45_0x280664(0x10e)),createConfigurationFile(yargs[a45_0x280664(0xf2)]['username'],yargs[a45_0x280664(0xf2)]['key'],yargs['argv'][a45_0x280664(0x10b)]);try{sdkSetup();}catch(a45_0x216e8f){logger['debug']('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a45_0x216e8f);}addScriptInPackageJson();function createConfigurationFile(_0x560277,_0x128139,_0x25fef3=![]){const _0x406b67=a45_0x280664,_0x2d4345={};_0x2d4345[_0x406b67(0x119)]='utf8',_0x2d4345[_0x406b67(0xfb)]=_0x406b67(0xfc),_0x2d4345['KCZYk']=_0x406b67(0x11a);const _0x278d37=_0x2d4345;try{let _0x4d0792=fs[_0x406b67(0xf1)](_0x25fef3?configFileTemplatePW:configFileTemplate,_0x278d37[_0x406b67(0x119)]);_0x560277&&(_0x4d0792=_0x4d0792['replace'](_0x278d37[_0x406b67(0xfb)],_0x560277)),_0x128139&&(_0x4d0792=_0x4d0792[_0x406b67(0xf5)](_0x278d37['KCZYk'],_0x128139)),config=yaml['load'](_0x4d0792),fs[_0x406b67(0x108)](configFile,_0x4d0792,_0x473cd2=>{const _0x2609f3=_0x406b67;_0x473cd2&&logger[_0x2609f3(0x136)](_0x473cd2);});}catch(_0x342f04){logger[_0x406b67(0x136)](_0x342f04);}}function addPostInstallScript(_0x264a38,_0x3cb2b6){const _0x273a25=a45_0x280664,_0x5066b4={};_0x5066b4[_0x273a25(0x118)]='postinstall',_0x5066b4[_0x273a25(0x132)]=_0x273a25(0x112),_0x5066b4[_0x273a25(0x129)]=_0x273a25(0x12f);const _0x2a49ae=_0x5066b4;let _0x59c96d=_0x264a38[_0x2a49ae['jnNgH']];if(_0x59c96d&&_0x59c96d[_0x273a25(0x102)](_0x2a49ae['jaugn']))return;!_0x59c96d?_0x59c96d=_0x2a49ae[_0x273a25(0x132)]:_0x59c96d+=_0x2a49ae[_0x273a25(0x129)],_0x3cb2b6['push']([_0x2a49ae[_0x273a25(0x118)],_0x59c96d]);}function addScriptInPackageJson(){const _0x46bfd4=a45_0x280664,_0x3f9aac={'XthjV':_0x46bfd4(0x131),'xnXCV':function(_0x387793,_0x39977c){return _0x387793<_0x39977c;},'voazS':function(_0x324c59,_0x3fcb70,_0x23ccf8){return _0x324c59(_0x3fcb70,_0x23ccf8);},'ATzzk':function(_0x7988b,_0x11f050,_0x5655e7){return _0x7988b(_0x11f050,_0x5655e7);},'OCXCZ':function(_0x265596,_0x20e278,_0x4d13dd){return _0x265596(_0x20e278,_0x4d13dd);},'dVtJq':function(_0x3cdd9f,_0x42be64){return _0x3cdd9f<_0x42be64;},'rvDHG':function(_0x5bb010,_0x17b5e2){return _0x5bb010!==_0x17b5e2;},'zOGYi':_0x46bfd4(0x111)},_0x51572d=JSON['parse'](fs[_0x46bfd4(0xf1)](packageFile,_0x3f9aac[_0x46bfd4(0x120)])),_0xad20f=[];for(let _0x34652a=0x0;_0x3f9aac[_0x46bfd4(0x105)](_0x34652a,frameworks[_0x46bfd4(0xf4)]);_0x34652a+=0x1){const _0x5407e5=_0x3f9aac[_0x46bfd4(0x107)](findScriptsWithFramework,_0x51572d['scripts'],frameworks[_0x34652a]);for(let _0x344f0e=0x0;_0x3f9aac['xnXCV'](_0x344f0e,_0x5407e5['length']);_0x344f0e+=0x1){_0xad20f[_0x46bfd4(0x12c)](_0x3f9aac[_0x46bfd4(0x101)](getUpdatedCommand,_0x51572d['scripts'],_0x5407e5[_0x344f0e]));}_0x3f9aac['OCXCZ'](addPostInstallScript,_0x51572d[_0x46bfd4(0x116)],_0xad20f);}const _0x533fd6={..._0x51572d[_0x46bfd4(0x116)]},_0x498a8d=_0x533fd6;for(let _0x2b2718=0x0;_0x3f9aac[_0x46bfd4(0x104)](_0x2b2718,_0xad20f[_0x46bfd4(0xf4)]);_0x2b2718+=0x1){_0x498a8d[_0xad20f[_0x2b2718][0x0]]=_0xad20f[_0x2b2718][0x1];}_0x3f9aac['rvDHG'](JSON['stringify'](_0x51572d[_0x46bfd4(0x116)]),JSON[_0x46bfd4(0x125)](_0x498a8d))&&(logger[_0x46bfd4(0x12e)](_0x3f9aac[_0x46bfd4(0xfe)]),_0x51572d[_0x46bfd4(0x116)]=_0x498a8d,fs[_0x46bfd4(0x108)](packageFile,JSON[_0x46bfd4(0x125)](_0x51572d,null,0x2),_0x2c42a1=>{const _0x25b316=_0x46bfd4;_0x2c42a1&&logger[_0x25b316(0x136)](_0x2c42a1);}));}function a45_0x4108(){const _0x10803e=['/../../browserstack.pw.yml.sample','SDKSetup','push','2210uvqAEB','info','\x20&&\x20npm\x20update\x20browserstack-node-sdk','cucumber-js','utf8','jaugn','kTXwV','MXraX','debug','error','browserstack-node-sdk','readFileSync','argv','FbIem','length','replace','jest','node','winstonLogger','1956147CCVSDI','2dhaaYG','qNwiS','YOUR_USERNAME','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','zOGYi','mocha','splice','ATzzk','includes','Setup\x20completed','dVtJq','xnXCV','801jKrLfP','voazS','writeFileSync','cwd','entries','playwright','source','indexOf','Creating\x20configuration\x20file...','join','117281ODGhFo','Adding\x20new\x20script(s)\x20in\x20package.json...','npm\x20update\x20browserstack-node-sdk','7641685Fifkoo','168NoOysR','154932KiDVMz','scripts','132456WcnVKp','jnNgH','iZaqO','YOUR_ACCESS_KEY','yargs','isUndefined','split','5417824EGunvu','UuQSi','XthjV','ATFqC','fireFunnelTestEvent','/../../browserstack.yml.sample','eaanA','stringify','106997HgcUXW','vSKKy','/package.json','lEddF'];a45_0x4108=function(){return _0x10803e;};return a45_0x4108();};function findScriptsWithFramework(_0x6c4e9e,_0x3ba151){const _0x2e057d=a45_0x280664,_0x83eb5={};_0x83eb5[_0x2e057d(0xf3)]=function(_0x12d805,_0x9821cc){return _0x12d805<_0x9821cc;},_0x83eb5[_0x2e057d(0x121)]=_0x2e057d(0x137);const _0x3dff1a=_0x83eb5,_0x330c37=[],_0x1cc0db=Object[_0x2e057d(0x10a)](_0x6c4e9e);for(let _0x1019dd=0x0;_0x3dff1a[_0x2e057d(0xf3)](_0x1019dd,_0x1cc0db[_0x2e057d(0xf4)]);_0x1019dd+=0x1){_0x1cc0db[_0x1019dd][0x1][_0x2e057d(0x102)](_0x3ba151)&&!_0x1cc0db[_0x1019dd][0x1][_0x2e057d(0x102)](_0x3dff1a[_0x2e057d(0x121)])&&_0x330c37['push'](_0x1cc0db[_0x1019dd][0x0]);}return _0x330c37;}function getUpdatedCommand(_0x39b5e8,_0x1ef464){const _0xdc3771=a45_0x280664,_0x5b49a={};_0x5b49a['UuQSi']=function(_0x197c01,_0x479a47){return _0x197c01!==_0x479a47;},_0x5b49a[_0xdc3771(0x134)]=_0xdc3771(0x137),_0x5b49a[_0xdc3771(0x133)]=function(_0x568da5,_0x300da9){return _0x568da5===_0x300da9;};const _0x21e521=_0x5b49a,_0x483388=_0x1ef464+'-browserstack',_0x2d0cbf=_0x39b5e8[_0x1ef464],_0x52a8ad=_0x2d0cbf[_0xdc3771(0x11d)]('\x20');for(const _0x5d8b8d of frameworks){if(_0x21e521[_0xdc3771(0x11f)](_0x52a8ad[_0xdc3771(0x10d)](_0x5d8b8d),-0x1)){_0x52a8ad[_0xdc3771(0x100)](_0x52a8ad[_0xdc3771(0x10d)](_0x5d8b8d),0x0,_0x21e521['MXraX']);break;}}let _0x43bd28=_0x52a8ad[_0xdc3771(0x10f)]('\x20');return _0x21e521[_0xdc3771(0x133)](_0x43bd28,_0x2d0cbf)&&(_0x43bd28='browserstack-node-sdk\x20'+_0x2d0cbf),[_0x483388,_0x43bd28];}function sdkSetup(){const _0x4cb9ee=a45_0x280664,_0x2ab646={};_0x2ab646[_0x4cb9ee(0x124)]='node-setup',_0x2ab646[_0x4cb9ee(0x127)]=_0x4cb9ee(0x12b);const _0x20cffd=_0x2ab646;if(helper[_0x4cb9ee(0x11c)](config))return;config[_0x4cb9ee(0x10c)]=_0x20cffd[_0x4cb9ee(0x124)];try{utilities[_0x4cb9ee(0x122)](_0x20cffd['vSKKy'],{},config,'');}catch(_0x3b599c){logger[_0x4cb9ee(0x135)](_0x4cb9ee(0xfd)+_0x3b599c);}}logger['info'](a45_0x280664(0x103));