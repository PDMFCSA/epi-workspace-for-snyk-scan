#!/usr/bin/env node

const a49_0x10ca5a=a49_0xcaae;(function(_0x3783ab,_0x3bec41){const _0x342d23=a49_0xcaae,_0xb70e91=_0x3783ab();while(!![]){try{const _0x59b29b=-parseInt(_0x342d23(0xe8))/0x1+parseInt(_0x342d23(0xf4))/0x2+-parseInt(_0x342d23(0xb7))/0x3*(parseInt(_0x342d23(0xe2))/0x4)+-parseInt(_0x342d23(0xe7))/0x5+parseInt(_0x342d23(0xc5))/0x6*(-parseInt(_0x342d23(0xde))/0x7)+-parseInt(_0x342d23(0xba))/0x8*(parseInt(_0x342d23(0xd5))/0x9)+parseInt(_0x342d23(0xf6))/0xa;if(_0x59b29b===_0x3bec41)break;else _0xb70e91['push'](_0xb70e91['shift']());}catch(_0x440d18){_0xb70e91['push'](_0xb70e91['shift']());}}}(a49_0x3725,0x4e768));const fs=require('fs'),helper=require('../helpers/helper'),utilities=require('../helpers/utilities'),yaml=require('js-yaml'),yargs=require(a49_0x10ca5a(0xf2)),logger=require('../helpers/logger')['winstonLogger'],configFileTemplate=__dirname+a49_0x10ca5a(0xb3),configFileTemplatePW=__dirname+a49_0x10ca5a(0xf3),configFile=process['cwd']()+a49_0x10ca5a(0xc9),packageFile=process[a49_0x10ca5a(0xca)]()+a49_0x10ca5a(0xcb),frameworks=[a49_0x10ca5a(0xc4),'jest','cucumber-js',a49_0x10ca5a(0xcd),a49_0x10ca5a(0xdb),'codeceptjs',a49_0x10ca5a(0xd0)];function a49_0xcaae(_0x344b0a,_0x3137e2){const _0x372504=a49_0x3725();return a49_0xcaae=function(_0xcaaea2,_0x5e7c25){_0xcaaea2=_0xcaaea2-0xb1;let _0x55a4bc=_0x372504[_0xcaaea2];return _0x55a4bc;},a49_0xcaae(_0x344b0a,_0x3137e2);}let config;logger[a49_0x10ca5a(0xc0)](a49_0x10ca5a(0xe5)),createConfigurationFile(yargs[a49_0x10ca5a(0xe3)]['username'],yargs[a49_0x10ca5a(0xe3)][a49_0x10ca5a(0xc7)],yargs[a49_0x10ca5a(0xe3)]['playwright']);try{sdkSetup();}catch(a49_0x426592){logger[a49_0x10ca5a(0xbe)](a49_0x10ca5a(0xb9)+a49_0x426592);}addScriptInPackageJson();function createConfigurationFile(_0x1c58b3,_0x5e485a,_0x20e57e=![]){const _0xf6475b=a49_0x10ca5a,_0x182460={};_0x182460[_0xf6475b(0xd2)]=_0xf6475b(0xe1),_0x182460[_0xf6475b(0xdf)]=_0xf6475b(0xbb),_0x182460['fSKKV']='YOUR_ACCESS_KEY';const _0x4d647f=_0x182460;try{let _0x5d6860=fs['readFileSync'](_0x20e57e?configFileTemplatePW:configFileTemplate,_0x4d647f[_0xf6475b(0xd2)]);_0x1c58b3&&(_0x5d6860=_0x5d6860[_0xf6475b(0xee)](_0x4d647f[_0xf6475b(0xdf)],_0x1c58b3)),_0x5e485a&&(_0x5d6860=_0x5d6860[_0xf6475b(0xee)](_0x4d647f[_0xf6475b(0xe6)],_0x5e485a)),config=yaml[_0xf6475b(0xea)](_0x5d6860),fs[_0xf6475b(0xcc)](configFile,_0x5d6860,_0x23b5c2=>{const _0x340ae8=_0xf6475b;_0x23b5c2&&logger[_0x340ae8(0xb5)](_0x23b5c2);});}catch(_0x306639){logger['error'](_0x306639);}}function addPostInstallScript(_0x1825cf,_0x5b2b1a){const _0xa948fe=a49_0x10ca5a,_0x49f4ad={};_0x49f4ad[_0xa948fe(0xd8)]='postinstall',_0x49f4ad['qjPXF']=_0xa948fe(0xd6),_0x49f4ad[_0xa948fe(0xb4)]=_0xa948fe(0xd9);const _0x38cbfa=_0x49f4ad;let _0x5081b8=_0x1825cf[_0x38cbfa[_0xa948fe(0xd8)]];if(_0x5081b8&&_0x5081b8[_0xa948fe(0xe0)](_0x38cbfa['qjPXF']))return;!_0x5081b8?_0x5081b8=_0x38cbfa[_0xa948fe(0xda)]:_0x5081b8+=_0x38cbfa[_0xa948fe(0xb4)],_0x5b2b1a['push']([_0x38cbfa[_0xa948fe(0xd8)],_0x5081b8]);}function addScriptInPackageJson(){const _0x3e71b5=a49_0x10ca5a,_0xa0e431={'skkgh':_0x3e71b5(0xe1),'ewJWr':function(_0x16f971,_0x353b68){return _0x16f971<_0x353b68;},'tQHfM':function(_0x32f00c,_0x245756,_0xe1f3cc){return _0x32f00c(_0x245756,_0xe1f3cc);},'OaMVW':function(_0x5ac9e0,_0x4adb40){return _0x5ac9e0!==_0x4adb40;},'tApaO':_0x3e71b5(0xf8)},_0x1fce7e=JSON[_0x3e71b5(0xb6)](fs[_0x3e71b5(0xbf)](packageFile,_0xa0e431[_0x3e71b5(0xec)])),_0x2ce7d5=[];for(let _0x4dbd81=0x0;_0xa0e431[_0x3e71b5(0xc1)](_0x4dbd81,frameworks[_0x3e71b5(0xc6)]);_0x4dbd81+=0x1){const _0x3c6c62=_0xa0e431['tQHfM'](findScriptsWithFramework,_0x1fce7e[_0x3e71b5(0xd7)],frameworks[_0x4dbd81]);for(let _0x2081ce=0x0;_0xa0e431[_0x3e71b5(0xc1)](_0x2081ce,_0x3c6c62[_0x3e71b5(0xc6)]);_0x2081ce+=0x1){_0x2ce7d5[_0x3e71b5(0xd1)](_0xa0e431['tQHfM'](getUpdatedCommand,_0x1fce7e[_0x3e71b5(0xd7)],_0x3c6c62[_0x2081ce]));}_0xa0e431[_0x3e71b5(0xce)](addPostInstallScript,_0x1fce7e[_0x3e71b5(0xd7)],_0x2ce7d5);}const _0x260abb={..._0x1fce7e['scripts']},_0x188339=_0x260abb;for(let _0x54c613=0x0;_0xa0e431[_0x3e71b5(0xc1)](_0x54c613,_0x2ce7d5[_0x3e71b5(0xc6)]);_0x54c613+=0x1){_0x188339[_0x2ce7d5[_0x54c613][0x0]]=_0x2ce7d5[_0x54c613][0x1];}_0xa0e431[_0x3e71b5(0xdd)](JSON[_0x3e71b5(0xd3)](_0x1fce7e[_0x3e71b5(0xd7)]),JSON[_0x3e71b5(0xd3)](_0x188339))&&(logger[_0x3e71b5(0xc0)](_0xa0e431[_0x3e71b5(0xbc)]),_0x1fce7e[_0x3e71b5(0xd7)]=_0x188339,fs['writeFileSync'](packageFile,JSON[_0x3e71b5(0xd3)](_0x1fce7e,null,0x2),_0x2f7fbc=>{_0x2f7fbc&&logger['error'](_0x2f7fbc);}));};function findScriptsWithFramework(_0x4007b5,_0xab0316){const _0x1ebe80=a49_0x10ca5a,_0x18afde={};_0x18afde['lopsW']=function(_0x17933a,_0x3439e9){return _0x17933a<_0x3439e9;},_0x18afde[_0x1ebe80(0xe4)]='browserstack-node-sdk';const _0x7ad072=_0x18afde,_0x526049=[],_0x2e21c1=Object['entries'](_0x4007b5);for(let _0x19af55=0x0;_0x7ad072[_0x1ebe80(0xd4)](_0x19af55,_0x2e21c1[_0x1ebe80(0xc6)]);_0x19af55+=0x1){_0x2e21c1[_0x19af55][0x1]['includes'](_0xab0316)&&!_0x2e21c1[_0x19af55][0x1][_0x1ebe80(0xe0)](_0x7ad072[_0x1ebe80(0xe4)])&&_0x526049[_0x1ebe80(0xd1)](_0x2e21c1[_0x19af55][0x0]);}return _0x526049;}function a49_0x3725(){const _0x313ab4=['QyuNj','Creating\x20configuration\x20file...','fSKKV','2764155BiSaKC','350204IRnckv','source','load','hIRrT','skkgh','Setup\x20completed','replace','indexOf','browserstack-node-sdk\x20','node-setup','yargs','/../../browserstack.pw.yml.sample','258522TCkMGo','browserstack-node-sdk','20420790sgPCyr','split','Adding\x20new\x20script(s)\x20in\x20package.json...','wanfD','splice','/../../browserstack.yml.sample','tqODH','error','parse','776829PqeaSR','xxpPo','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','388216rHSWAK','YOUR_USERNAME','tApaO','koRZF','debug','readFileSync','info','ewJWr','lJTkB','isUndefined','mocha','138cwlqNj','length','key','-browserstack','/browserstack.yml','cwd','/package.json','writeFileSync','node','tQHfM','join','playwright','push','UsvVa','stringify','lopsW','63bsAwlQ','npm\x20update\x20browserstack-node-sdk','scripts','KDyST','\x20&&\x20npm\x20update\x20browserstack-node-sdk','qjPXF','nightwatch','fireFunnelTestEvent','OaMVW','106001vLBicl','RpVCg','includes','utf8','4PTIVrG','argv'];a49_0x3725=function(){return _0x313ab4;};return a49_0x3725();}function getUpdatedCommand(_0x1216da,_0x221cb3){const _0x84b465=a49_0x10ca5a,_0xfc4070={};_0xfc4070[_0x84b465(0xbd)]=function(_0x522eeb,_0x378d13){return _0x522eeb!==_0x378d13;},_0xfc4070[_0x84b465(0xb8)]=_0x84b465(0xf5),_0xfc4070[_0x84b465(0xc2)]=function(_0x4312c3,_0x36dd6d){return _0x4312c3===_0x36dd6d;};const _0x4fde00=_0xfc4070,_0x2a5673=_0x221cb3+_0x84b465(0xc8),_0x4ce87b=_0x1216da[_0x221cb3],_0x49d896=_0x4ce87b[_0x84b465(0xf7)]('\x20');for(const _0x15f212 of frameworks){if(_0x4fde00[_0x84b465(0xbd)](_0x49d896[_0x84b465(0xef)](_0x15f212),-0x1)){_0x49d896[_0x84b465(0xb2)](_0x49d896['indexOf'](_0x15f212),0x0,_0x4fde00['xxpPo']);break;}}let _0x5cdd0a=_0x49d896[_0x84b465(0xcf)]('\x20');return _0x4fde00[_0x84b465(0xc2)](_0x5cdd0a,_0x4ce87b)&&(_0x5cdd0a=_0x84b465(0xf0)+_0x4ce87b),[_0x2a5673,_0x5cdd0a];}function sdkSetup(){const _0x88cfa=a49_0x10ca5a,_0x21b82b={};_0x21b82b[_0x88cfa(0xeb)]=_0x88cfa(0xf1),_0x21b82b[_0x88cfa(0xb1)]='SDKSetup';const _0x5b99bb=_0x21b82b;if(helper[_0x88cfa(0xc3)](config))return;config[_0x88cfa(0xe9)]=_0x5b99bb['hIRrT'];try{utilities[_0x88cfa(0xdc)](_0x5b99bb[_0x88cfa(0xb1)],{},config,'');}catch(_0x4df693){logger[_0x88cfa(0xbe)](_0x88cfa(0xb9)+_0x4df693);}}logger[a49_0x10ca5a(0xc0)](a49_0x10ca5a(0xed));