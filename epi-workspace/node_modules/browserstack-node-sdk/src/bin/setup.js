#!/usr/bin/env node

const a45_0x118375=a45_0x7baf;(function(_0x352e39,_0x177783){const _0x53fa22=a45_0x7baf,_0x309a8f=_0x352e39();while(!![]){try{const _0xdc4f29=-parseInt(_0x53fa22(0x108))/0x1+parseInt(_0x53fa22(0xe2))/0x2+-parseInt(_0x53fa22(0xcc))/0x3*(-parseInt(_0x53fa22(0xde))/0x4)+-parseInt(_0x53fa22(0xe5))/0x5+-parseInt(_0x53fa22(0xc9))/0x6+-parseInt(_0x53fa22(0xc7))/0x7*(parseInt(_0x53fa22(0xe1))/0x8)+parseInt(_0x53fa22(0xf4))/0x9*(parseInt(_0x53fa22(0x114))/0xa);if(_0xdc4f29===_0x177783)break;else _0x309a8f['push'](_0x309a8f['shift']());}catch(_0x59d772){_0x309a8f['push'](_0x309a8f['shift']());}}}(a45_0x14ec,0xd611c));function a45_0x14ec(){const _0x5be0e9=['stringify','/../../browserstack.pw.yml.sample','length','hAjKA','YnPCL','key','codeceptjs','93340pVBbeQ','../helpers/logger','/package.json','7nudirY','postinstall','8117940nBtDYg','username','Adding\x20new\x20script(s)\x20in\x20package.json...','4911yuQvDr','yargs','WVUtm','source','join','AaWVx','load','ysUqv','winstonLogger','utf8','/browserstack.yml','argv','-browserstack','scripts','YHXdS','includes','Creating\x20configuration\x20file...','nightwatch','3992hufxEM','mocha','RljHH','9714416UkSafZ','1119678piLcZd','vySoJ','fireFunnelTestEvent','7080535SKyxww','debug','WjbCa','writeFileSync','SDKSetup','bbFiq','CgBtt','isUndefined','node-setup','rSQZD','VOTFc','../helpers/helper','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','RmCnT','info','4104LwjRcH','xpvDZ','push','cwd','sgxcG','npm\x20update\x20browserstack-node-sdk','browserstack-node-sdk','YOUR_USERNAME','splice','replace','parse','split','entries','DplMJ','js-yaml','Setup\x20completed','readFileSync','node','playwright','\x20&&\x20npm\x20update\x20browserstack-node-sdk','1589642rzXNVF','jest','YOUR_ACCESS_KEY','WxLpD','IELgI'];a45_0x14ec=function(){return _0x5be0e9;};return a45_0x14ec();}const fs=require('fs'),helper=require(a45_0x118375(0xf0)),utilities=require('../helpers/utilities'),yaml=require(a45_0x118375(0x102)),yargs=require(a45_0x118375(0xcd)),logger=require(a45_0x118375(0xc5))[a45_0x118375(0xd4)],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+a45_0x118375(0x10e),configFile=process['cwd']()+a45_0x118375(0xd6),packageFile=process[a45_0x118375(0xf7)]()+a45_0x118375(0xc6),frameworks=[a45_0x118375(0xdf),a45_0x118375(0x109),'cucumber-js',a45_0x118375(0x105),a45_0x118375(0xdd),a45_0x118375(0x113),a45_0x118375(0x106)];let config;logger['info'](a45_0x118375(0xdc)),createConfigurationFile(yargs['argv'][a45_0x118375(0xca)],yargs[a45_0x118375(0xd7)][a45_0x118375(0x112)],yargs['argv'][a45_0x118375(0x106)]);try{sdkSetup();}catch(a45_0x3fd8e7){logger['debug'](a45_0x118375(0xf1)+a45_0x3fd8e7);}addScriptInPackageJson();function createConfigurationFile(_0x15215f,_0x41e4f4,_0xec5d3f=![]){const _0x10c42b=a45_0x118375,_0x3d17b4={};_0x3d17b4[_0x10c42b(0xea)]='utf8',_0x3d17b4[_0x10c42b(0x10b)]=_0x10c42b(0xfb),_0x3d17b4['AaWVx']=_0x10c42b(0x10a);const _0x3c686f=_0x3d17b4;try{let _0x3ff0d2=fs[_0x10c42b(0x104)](_0xec5d3f?configFileTemplatePW:configFileTemplate,_0x3c686f['bbFiq']);_0x15215f&&(_0x3ff0d2=_0x3ff0d2['replace'](_0x3c686f[_0x10c42b(0x10b)],_0x15215f)),_0x41e4f4&&(_0x3ff0d2=_0x3ff0d2[_0x10c42b(0xfd)](_0x3c686f[_0x10c42b(0xd1)],_0x41e4f4)),config=yaml[_0x10c42b(0xd2)](_0x3ff0d2),fs[_0x10c42b(0xe8)](configFile,_0x3ff0d2,_0x1d8f1c=>{_0x1d8f1c&&logger['error'](_0x1d8f1c);});}catch(_0xfd552f){logger['error'](_0xfd552f);}}function addPostInstallScript(_0x3a147f,_0x115814){const _0x265150=a45_0x118375,_0x26be2={};_0x26be2[_0x265150(0xee)]=_0x265150(0xc8),_0x26be2[_0x265150(0xf2)]=_0x265150(0xf9),_0x26be2[_0x265150(0x111)]=_0x265150(0x107);const _0x2e0f8e=_0x26be2;let _0x5be55b=_0x3a147f[_0x2e0f8e[_0x265150(0xee)]];if(_0x5be55b&&_0x5be55b[_0x265150(0xdb)](_0x2e0f8e[_0x265150(0xf2)]))return;!_0x5be55b?_0x5be55b=_0x2e0f8e[_0x265150(0xf2)]:_0x5be55b+=_0x2e0f8e[_0x265150(0x111)],_0x115814[_0x265150(0xf6)]([_0x2e0f8e[_0x265150(0xee)],_0x5be55b]);}function addScriptInPackageJson(){const _0x35f90a=a45_0x118375,_0x1cc286={'IELgI':_0x35f90a(0xd5),'WjbCa':function(_0x104387,_0x22b851){return _0x104387<_0x22b851;},'iNAPa':function(_0x71f70d,_0x598f0a,_0x5b0639){return _0x71f70d(_0x598f0a,_0x5b0639);},'GkVBb':function(_0x4db1fa,_0x3d1473){return _0x4db1fa<_0x3d1473;},'vySoJ':function(_0x38276e,_0x53194d,_0x39ff9a){return _0x38276e(_0x53194d,_0x39ff9a);},'CgBtt':function(_0x4702ab,_0x487695){return _0x4702ab<_0x487695;},'YHXdS':function(_0x4faf3a,_0x52b82c){return _0x4faf3a!==_0x52b82c;},'xpvDZ':_0x35f90a(0xcb)},_0x37b9e2=JSON[_0x35f90a(0xfe)](fs[_0x35f90a(0x104)](packageFile,_0x1cc286[_0x35f90a(0x10c)])),_0x59b9aa=[];for(let _0x4203e1=0x0;_0x1cc286[_0x35f90a(0xe7)](_0x4203e1,frameworks[_0x35f90a(0x10f)]);_0x4203e1+=0x1){const _0x4a5d56=_0x1cc286['iNAPa'](findScriptsWithFramework,_0x37b9e2[_0x35f90a(0xd9)],frameworks[_0x4203e1]);for(let _0x3181ad=0x0;_0x1cc286['GkVBb'](_0x3181ad,_0x4a5d56[_0x35f90a(0x10f)]);_0x3181ad+=0x1){_0x59b9aa[_0x35f90a(0xf6)](_0x1cc286[_0x35f90a(0xe3)](getUpdatedCommand,_0x37b9e2[_0x35f90a(0xd9)],_0x4a5d56[_0x3181ad]));}_0x1cc286[_0x35f90a(0xe3)](addPostInstallScript,_0x37b9e2[_0x35f90a(0xd9)],_0x59b9aa);}const _0x18e831={..._0x37b9e2[_0x35f90a(0xd9)]},_0x1507fa=_0x18e831;for(let _0x45765b=0x0;_0x1cc286[_0x35f90a(0xeb)](_0x45765b,_0x59b9aa[_0x35f90a(0x10f)]);_0x45765b+=0x1){_0x1507fa[_0x59b9aa[_0x45765b][0x0]]=_0x59b9aa[_0x45765b][0x1];}_0x1cc286[_0x35f90a(0xda)](JSON[_0x35f90a(0x10d)](_0x37b9e2[_0x35f90a(0xd9)]),JSON['stringify'](_0x1507fa))&&(logger[_0x35f90a(0xf3)](_0x1cc286[_0x35f90a(0xf5)]),_0x37b9e2['scripts']=_0x1507fa,fs[_0x35f90a(0xe8)](packageFile,JSON['stringify'](_0x37b9e2,null,0x2),_0x4d56de=>{_0x4d56de&&logger['error'](_0x4d56de);}));}function a45_0x7baf(_0x122d95,_0x243f5f){const _0x14ec2e=a45_0x14ec();return a45_0x7baf=function(_0x7baf11,_0x4244fc){_0x7baf11=_0x7baf11-0xc5;let _0x4084ef=_0x14ec2e[_0x7baf11];return _0x4084ef;},a45_0x7baf(_0x122d95,_0x243f5f);};function findScriptsWithFramework(_0x14cdd3,_0x54a44e){const _0x32c1f1=a45_0x118375,_0x4cb1f0={};_0x4cb1f0[_0x32c1f1(0xe0)]=function(_0x30ee9b,_0x156d57){return _0x30ee9b<_0x156d57;},_0x4cb1f0[_0x32c1f1(0x101)]='browserstack-node-sdk';const _0x18930a=_0x4cb1f0,_0x5892f3=[],_0x57ca36=Object[_0x32c1f1(0x100)](_0x14cdd3);for(let _0x2da276=0x0;_0x18930a[_0x32c1f1(0xe0)](_0x2da276,_0x57ca36[_0x32c1f1(0x10f)]);_0x2da276+=0x1){_0x57ca36[_0x2da276][0x1]['includes'](_0x54a44e)&&!_0x57ca36[_0x2da276][0x1][_0x32c1f1(0xdb)](_0x18930a['DplMJ'])&&_0x5892f3[_0x32c1f1(0xf6)](_0x57ca36[_0x2da276][0x0]);}return _0x5892f3;}function getUpdatedCommand(_0x217694,_0x6418cc){const _0xc152e8=a45_0x118375,_0x3c4687={};_0x3c4687['hAjKA']=function(_0x2347ea,_0x15025c){return _0x2347ea!==_0x15025c;},_0x3c4687[_0xc152e8(0xd3)]=_0xc152e8(0xfa),_0x3c4687['WVUtm']=function(_0x48645e,_0x69825c){return _0x48645e===_0x69825c;};const _0x5a5b78=_0x3c4687,_0x3fed0f=_0x6418cc+_0xc152e8(0xd8),_0x5b2b33=_0x217694[_0x6418cc],_0x428604=_0x5b2b33[_0xc152e8(0xff)]('\x20');for(const _0x222535 of frameworks){if(_0x5a5b78[_0xc152e8(0x110)](_0x428604['indexOf'](_0x222535),-0x1)){_0x428604[_0xc152e8(0xfc)](_0x428604['indexOf'](_0x222535),0x0,_0x5a5b78[_0xc152e8(0xd3)]);break;}}let _0x12604b=_0x428604[_0xc152e8(0xd0)]('\x20');return _0x5a5b78[_0xc152e8(0xce)](_0x12604b,_0x5b2b33)&&(_0x12604b='browserstack-node-sdk\x20'+_0x5b2b33),[_0x3fed0f,_0x12604b];}function sdkSetup(){const _0x950c42=a45_0x118375,_0xf65252={};_0xf65252[_0x950c42(0xef)]=_0x950c42(0xed),_0xf65252[_0x950c42(0xf8)]=_0x950c42(0xe9);const _0x2e8a91=_0xf65252;if(helper[_0x950c42(0xec)](config))return;config[_0x950c42(0xcf)]=_0x2e8a91['VOTFc'];try{utilities[_0x950c42(0xe4)](_0x2e8a91[_0x950c42(0xf8)],{},config,'');}catch(_0x3311e7){logger[_0x950c42(0xe6)](_0x950c42(0xf1)+_0x3311e7);}}logger[a45_0x118375(0xf3)](a45_0x118375(0x103));