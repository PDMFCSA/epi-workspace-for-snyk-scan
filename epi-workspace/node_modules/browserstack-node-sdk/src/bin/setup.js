#!/usr/bin/env node

const a49_0x22f1e8=a49_0x7652;(function(_0x412037,_0x47042d){const _0x1ca4fb=a49_0x7652,_0x1dafe4=_0x412037();while(!![]){try{const _0x2aeebc=-parseInt(_0x1ca4fb(0x1b2))/0x1+-parseInt(_0x1ca4fb(0x1cf))/0x2+parseInt(_0x1ca4fb(0x1bc))/0x3+-parseInt(_0x1ca4fb(0x1c0))/0x4*(-parseInt(_0x1ca4fb(0x1a6))/0x5)+parseInt(_0x1ca4fb(0x1b1))/0x6+parseInt(_0x1ca4fb(0x1dc))/0x7*(parseInt(_0x1ca4fb(0x1cd))/0x8)+parseInt(_0x1ca4fb(0x1cc))/0x9*(-parseInt(_0x1ca4fb(0x19b))/0xa);if(_0x2aeebc===_0x47042d)break;else _0x1dafe4['push'](_0x1dafe4['shift']());}catch(_0xf33cdd){_0x1dafe4['push'](_0x1dafe4['shift']());}}}(a49_0x58df,0xc24f6));const fs=require('fs'),helper=require('../helpers/helper'),utilities=require(a49_0x22f1e8(0x1b3)),yaml=require(a49_0x22f1e8(0x1c2)),yargs=require(a49_0x22f1e8(0x1ce)),logger=require(a49_0x22f1e8(0x1a2))['winstonLogger'],configFileTemplate=__dirname+a49_0x22f1e8(0x1c3),configFileTemplatePW=__dirname+a49_0x22f1e8(0x1ac),configFile=process[a49_0x22f1e8(0x1d2)]()+'/browserstack.yml',packageFile=process[a49_0x22f1e8(0x1d2)]()+a49_0x22f1e8(0x1df),frameworks=['mocha','jest','cucumber-js','node','nightwatch','codeceptjs',a49_0x22f1e8(0x1e0)];let config;logger[a49_0x22f1e8(0x1bf)](a49_0x22f1e8(0x1a5)),createConfigurationFile(yargs[a49_0x22f1e8(0x1ba)][a49_0x22f1e8(0x1d8)],yargs[a49_0x22f1e8(0x1ba)][a49_0x22f1e8(0x1a4)],yargs[a49_0x22f1e8(0x1ba)][a49_0x22f1e8(0x1e0)]);function a49_0x7652(_0x40b03f,_0x5b1622){const _0x58df07=a49_0x58df();return a49_0x7652=function(_0x765263,_0x3461b0){_0x765263=_0x765263-0x19b;let _0x1098cf=_0x58df07[_0x765263];return _0x1098cf;},a49_0x7652(_0x40b03f,_0x5b1622);}try{sdkSetup();}catch(a49_0x5d466e){logger[a49_0x22f1e8(0x1a0)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a49_0x5d466e);}function a49_0x58df(){const _0x47f2d3=['info','4iWRGXH','kodPN','js-yaml','/../../browserstack.yml.sample','YOUR_USERNAME','npm\x20update\x20browserstack-node-sdk','iiQmR','error','stringify','\x20&&\x20npm\x20update\x20browserstack-node-sdk','-browserstack','YOUR_ACCESS_KEY','9796698CRiPzM','12013184xeVifx','yargs','1810710wexrtz','parse','browserstack-node-sdk','cwd','indexOf','Setup\x20completed','rFCLR','push','nDOlR','username','Adding\x20new\x20script(s)\x20in\x20package.json...','split','postinstall','7eiAoNG','load','browserstack-node-sdk\x20','/package.json','playwright','RGlud','10jUYvuP','mVPxh','wmACT','readFileSync','scripts','debug','replace','../helpers/logger','ugtIO','key','Creating\x20configuration\x20file...','7327205sTaPBj','QSjUX','includes','EpysO','writeFileSync','AoQaA','/../../browserstack.pw.yml.sample','KNWRH','node-setup','qzIZS','fHSBX','3332742HZncFN','1439970icCdUK','../helpers/utilities','length','zbPZq','Irrvu','entries','btebL','PzUaU','argv','SDKSetup','2121585zlKluu','utf8','IVSCD'];a49_0x58df=function(){return _0x47f2d3;};return a49_0x58df();}addScriptInPackageJson();function createConfigurationFile(_0x2dde4e,_0x18d436,_0x5d218d=![]){const _0x4a6d9e=a49_0x22f1e8,_0x1fbb6e={};_0x1fbb6e[_0x4a6d9e(0x1a7)]=_0x4a6d9e(0x1bd),_0x1fbb6e[_0x4a6d9e(0x1ad)]=_0x4a6d9e(0x1c4),_0x1fbb6e['qzIZS']=_0x4a6d9e(0x1cb);const _0x37647a=_0x1fbb6e;try{let _0x2a7df7=fs[_0x4a6d9e(0x19e)](_0x5d218d?configFileTemplatePW:configFileTemplate,_0x37647a[_0x4a6d9e(0x1a7)]);_0x2dde4e&&(_0x2a7df7=_0x2a7df7[_0x4a6d9e(0x1a1)](_0x37647a[_0x4a6d9e(0x1ad)],_0x2dde4e)),_0x18d436&&(_0x2a7df7=_0x2a7df7[_0x4a6d9e(0x1a1)](_0x37647a[_0x4a6d9e(0x1af)],_0x18d436)),config=yaml[_0x4a6d9e(0x1dd)](_0x2a7df7),fs[_0x4a6d9e(0x1aa)](configFile,_0x2a7df7,_0x5033c3=>{const _0x3bfab4=_0x4a6d9e;_0x5033c3&&logger[_0x3bfab4(0x1c7)](_0x5033c3);});}catch(_0x8a1357){logger[_0x4a6d9e(0x1c7)](_0x8a1357);}}function addPostInstallScript(_0x4997f4,_0x267e16){const _0x14fb92=a49_0x22f1e8,_0x2880f2={};_0x2880f2['mVPxh']=_0x14fb92(0x1db),_0x2880f2[_0x14fb92(0x1e1)]=_0x14fb92(0x1c5),_0x2880f2[_0x14fb92(0x1a3)]=_0x14fb92(0x1c9);const _0x1f9e0f=_0x2880f2;let _0x16cdc2=_0x4997f4[_0x1f9e0f[_0x14fb92(0x19c)]];if(_0x16cdc2&&_0x16cdc2['includes'](_0x1f9e0f['RGlud']))return;!_0x16cdc2?_0x16cdc2=_0x1f9e0f[_0x14fb92(0x1e1)]:_0x16cdc2+=_0x1f9e0f[_0x14fb92(0x1a3)],_0x267e16[_0x14fb92(0x1d6)]([_0x1f9e0f[_0x14fb92(0x19c)],_0x16cdc2]);}function addScriptInPackageJson(){const _0x1811f0=a49_0x22f1e8,_0x447381={'fHSBX':'utf8','EpysO':function(_0x407d79,_0x34c2c4){return _0x407d79<_0x34c2c4;},'kodPN':function(_0x16189f,_0x23f725,_0x2097bc){return _0x16189f(_0x23f725,_0x2097bc);},'rFCLR':function(_0x3ada71,_0x1ddce4,_0x370ea9){return _0x3ada71(_0x1ddce4,_0x370ea9);},'Irrvu':function(_0xb98dc3,_0x3f3895){return _0xb98dc3<_0x3f3895;},'loXZR':function(_0x33a112,_0x239b03){return _0x33a112!==_0x239b03;},'btebL':_0x1811f0(0x1d9)},_0x29034f=JSON[_0x1811f0(0x1d0)](fs[_0x1811f0(0x19e)](packageFile,_0x447381[_0x1811f0(0x1b0)])),_0x3f4dec=[];for(let _0x234d22=0x0;_0x447381[_0x1811f0(0x1a9)](_0x234d22,frameworks[_0x1811f0(0x1b4)]);_0x234d22+=0x1){const _0x422f6b=_0x447381[_0x1811f0(0x1c1)](findScriptsWithFramework,_0x29034f[_0x1811f0(0x19f)],frameworks[_0x234d22]);for(let _0xeef64d=0x0;_0x447381[_0x1811f0(0x1a9)](_0xeef64d,_0x422f6b['length']);_0xeef64d+=0x1){_0x3f4dec[_0x1811f0(0x1d6)](_0x447381[_0x1811f0(0x1c1)](getUpdatedCommand,_0x29034f[_0x1811f0(0x19f)],_0x422f6b[_0xeef64d]));}_0x447381[_0x1811f0(0x1d5)](addPostInstallScript,_0x29034f[_0x1811f0(0x19f)],_0x3f4dec);}const _0x1e78cd={..._0x29034f[_0x1811f0(0x19f)]},_0x348ea8=_0x1e78cd;for(let _0x3a2ce7=0x0;_0x447381[_0x1811f0(0x1b6)](_0x3a2ce7,_0x3f4dec[_0x1811f0(0x1b4)]);_0x3a2ce7+=0x1){_0x348ea8[_0x3f4dec[_0x3a2ce7][0x0]]=_0x3f4dec[_0x3a2ce7][0x1];}_0x447381['loXZR'](JSON[_0x1811f0(0x1c8)](_0x29034f[_0x1811f0(0x19f)]),JSON[_0x1811f0(0x1c8)](_0x348ea8))&&(logger[_0x1811f0(0x1bf)](_0x447381[_0x1811f0(0x1b8)]),_0x29034f['scripts']=_0x348ea8,fs[_0x1811f0(0x1aa)](packageFile,JSON[_0x1811f0(0x1c8)](_0x29034f,null,0x2),_0x27f5ea=>{const _0x449d87=_0x1811f0;_0x27f5ea&&logger[_0x449d87(0x1c7)](_0x27f5ea);}));};function findScriptsWithFramework(_0x2b40cf,_0x207ad3){const _0x3a12c1=a49_0x22f1e8,_0x263ef4={};_0x263ef4[_0x3a12c1(0x1b9)]=function(_0x15f327,_0x534bf7){return _0x15f327<_0x534bf7;},_0x263ef4['wmACT']='browserstack-node-sdk';const _0x41e9e2=_0x263ef4,_0x18fb17=[],_0x70e083=Object[_0x3a12c1(0x1b7)](_0x2b40cf);for(let _0x3d5dce=0x0;_0x41e9e2['PzUaU'](_0x3d5dce,_0x70e083['length']);_0x3d5dce+=0x1){_0x70e083[_0x3d5dce][0x1][_0x3a12c1(0x1a8)](_0x207ad3)&&!_0x70e083[_0x3d5dce][0x1][_0x3a12c1(0x1a8)](_0x41e9e2[_0x3a12c1(0x19d)])&&_0x18fb17[_0x3a12c1(0x1d6)](_0x70e083[_0x3d5dce][0x0]);}return _0x18fb17;}function getUpdatedCommand(_0x2a3d82,_0x40bddd){const _0x5df404=a49_0x22f1e8,_0x3bc7ac={};_0x3bc7ac[_0x5df404(0x1be)]=function(_0x484c8b,_0x56aeca){return _0x484c8b!==_0x56aeca;},_0x3bc7ac[_0x5df404(0x1b5)]=_0x5df404(0x1d1),_0x3bc7ac[_0x5df404(0x1c6)]=function(_0x455a6b,_0x8cd0c8){return _0x455a6b===_0x8cd0c8;};const _0x5bb99b=_0x3bc7ac,_0x51542e=_0x40bddd+_0x5df404(0x1ca),_0x57327c=_0x2a3d82[_0x40bddd],_0x4c6b71=_0x57327c[_0x5df404(0x1da)]('\x20');for(const _0xfd4540 of frameworks){if(_0x5bb99b[_0x5df404(0x1be)](_0x4c6b71[_0x5df404(0x1d3)](_0xfd4540),-0x1)){_0x4c6b71['splice'](_0x4c6b71[_0x5df404(0x1d3)](_0xfd4540),0x0,_0x5bb99b[_0x5df404(0x1b5)]);break;}}let _0x64bc9=_0x4c6b71['join']('\x20');return _0x5bb99b['iiQmR'](_0x64bc9,_0x57327c)&&(_0x64bc9=_0x5df404(0x1de)+_0x57327c),[_0x51542e,_0x64bc9];}function sdkSetup(){const _0x546719=a49_0x22f1e8,_0x32101b={};_0x32101b[_0x546719(0x1d7)]=_0x546719(0x1ae),_0x32101b[_0x546719(0x1ab)]=_0x546719(0x1bb);const _0x21c92c=_0x32101b;if(helper['isUndefined'](config))return;config['source']=_0x21c92c['nDOlR'];try{utilities['fireFunnelTestEvent'](_0x21c92c[_0x546719(0x1ab)],{},config,'');}catch(_0x3b8b7a){logger[_0x546719(0x1a0)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+_0x3b8b7a);}}logger['info'](a49_0x22f1e8(0x1d4));