#!/usr/bin/env node

const a49_0x34b6fe=a49_0x1c2f;(function(_0x3b12a0,_0x295602){const _0x22ec0f=a49_0x1c2f,_0x43ae56=_0x3b12a0();while(!![]){try{const _0x3582f4=-parseInt(_0x22ec0f(0x104))/0x1*(-parseInt(_0x22ec0f(0xf5))/0x2)+-parseInt(_0x22ec0f(0x102))/0x3+-parseInt(_0x22ec0f(0x125))/0x4+-parseInt(_0x22ec0f(0x109))/0x5*(-parseInt(_0x22ec0f(0x133))/0x6)+parseInt(_0x22ec0f(0x114))/0x7*(-parseInt(_0x22ec0f(0x126))/0x8)+-parseInt(_0x22ec0f(0x124))/0x9*(-parseInt(_0x22ec0f(0x13a))/0xa)+parseInt(_0x22ec0f(0x13f))/0xb;if(_0x3582f4===_0x295602)break;else _0x43ae56['push'](_0x43ae56['shift']());}catch(_0x163121){_0x43ae56['push'](_0x43ae56['shift']());}}}(a49_0x5234,0xe3835));const fs=require('fs'),helper=require(a49_0x34b6fe(0xfb)),utilities=require(a49_0x34b6fe(0x120)),yaml=require(a49_0x34b6fe(0x12d)),yargs=require(a49_0x34b6fe(0x12b)),logger=require(a49_0x34b6fe(0x131))[a49_0x34b6fe(0x119)],configFileTemplate=__dirname+a49_0x34b6fe(0x137),configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process['cwd']()+'/browserstack.yml',packageFile=process[a49_0x34b6fe(0x12f)]()+'/package.json',frameworks=['mocha',a49_0x34b6fe(0x127),a49_0x34b6fe(0x13e),a49_0x34b6fe(0xfe),a49_0x34b6fe(0x11e),a49_0x34b6fe(0x103),a49_0x34b6fe(0x111)];let config;logger[a49_0x34b6fe(0xfa)](a49_0x34b6fe(0x12e)),createConfigurationFile(yargs[a49_0x34b6fe(0xf3)][a49_0x34b6fe(0x116)],yargs[a49_0x34b6fe(0xf3)]['key'],yargs[a49_0x34b6fe(0xf3)][a49_0x34b6fe(0x111)]);try{sdkSetup();}catch(a49_0x5306ad){logger[a49_0x34b6fe(0x112)](a49_0x34b6fe(0x106)+a49_0x5306ad);}addScriptInPackageJson();function createConfigurationFile(_0x19ff14,_0x334cad,_0x1bb21b=![]){const _0x4738ff=a49_0x34b6fe,_0x53d497={};_0x53d497[_0x4738ff(0x123)]=_0x4738ff(0xfd),_0x53d497[_0x4738ff(0x122)]=_0x4738ff(0x117),_0x53d497[_0x4738ff(0x139)]=_0x4738ff(0xf9);const _0x11e2ec=_0x53d497;try{let _0x11a5c1=fs[_0x4738ff(0x10b)](_0x1bb21b?configFileTemplatePW:configFileTemplate,_0x11e2ec[_0x4738ff(0x123)]);_0x19ff14&&(_0x11a5c1=_0x11a5c1[_0x4738ff(0x128)](_0x11e2ec[_0x4738ff(0x122)],_0x19ff14)),_0x334cad&&(_0x11a5c1=_0x11a5c1['replace'](_0x11e2ec['FforJ'],_0x334cad)),config=yaml[_0x4738ff(0x11d)](_0x11a5c1),fs['writeFileSync'](configFile,_0x11a5c1,_0x3c78f0=>{const _0x197319=_0x4738ff;_0x3c78f0&&logger[_0x197319(0x115)](_0x3c78f0);});}catch(_0x4dc7b8){logger['error'](_0x4dc7b8);}}function addPostInstallScript(_0x30c750,_0x3276fb){const _0x3bb18b=a49_0x34b6fe,_0x47da4a={};_0x47da4a[_0x3bb18b(0x108)]=_0x3bb18b(0xf4),_0x47da4a['OKMPx']=_0x3bb18b(0x113),_0x47da4a[_0x3bb18b(0x12a)]=_0x3bb18b(0x11f);const _0x1cdc0f=_0x47da4a;let _0x2ed81e=_0x30c750[_0x1cdc0f[_0x3bb18b(0x108)]];if(_0x2ed81e&&_0x2ed81e[_0x3bb18b(0x118)](_0x1cdc0f['OKMPx']))return;!_0x2ed81e?_0x2ed81e=_0x1cdc0f[_0x3bb18b(0x132)]:_0x2ed81e+=_0x1cdc0f[_0x3bb18b(0x12a)],_0x3276fb['push']([_0x1cdc0f[_0x3bb18b(0x108)],_0x2ed81e]);}function addScriptInPackageJson(){const _0x337af8=a49_0x34b6fe,_0x33eeb2={'IfMXW':_0x337af8(0xfd),'vRtJi':function(_0x2f1bc1,_0x1da645){return _0x2f1bc1<_0x1da645;},'JukPU':function(_0x31b213,_0x1dd634,_0x3a683c){return _0x31b213(_0x1dd634,_0x3a683c);},'eWzkL':function(_0x29e4ae,_0x2b6aa4){return _0x29e4ae<_0x2b6aa4;},'uBEzT':function(_0x490b47,_0x541b6e){return _0x490b47!==_0x541b6e;},'ErcAP':_0x337af8(0x130)},_0x5a2592=JSON[_0x337af8(0x11a)](fs[_0x337af8(0x10b)](packageFile,_0x33eeb2[_0x337af8(0x10f)])),_0x3a32ee=[];for(let _0x5289fe=0x0;_0x33eeb2[_0x337af8(0x10d)](_0x5289fe,frameworks[_0x337af8(0x10c)]);_0x5289fe+=0x1){const _0xf3f501=_0x33eeb2[_0x337af8(0xf8)](findScriptsWithFramework,_0x5a2592['scripts'],frameworks[_0x5289fe]);for(let _0x557c9f=0x0;_0x33eeb2[_0x337af8(0x11b)](_0x557c9f,_0xf3f501[_0x337af8(0x10c)]);_0x557c9f+=0x1){_0x3a32ee[_0x337af8(0x13b)](_0x33eeb2[_0x337af8(0xf8)](getUpdatedCommand,_0x5a2592[_0x337af8(0x136)],_0xf3f501[_0x557c9f]));}_0x33eeb2[_0x337af8(0xf8)](addPostInstallScript,_0x5a2592['scripts'],_0x3a32ee);}const _0x21da57={..._0x5a2592[_0x337af8(0x136)]},_0x15f462=_0x21da57;for(let _0x5ab0ea=0x0;_0x33eeb2['eWzkL'](_0x5ab0ea,_0x3a32ee[_0x337af8(0x10c)]);_0x5ab0ea+=0x1){_0x15f462[_0x3a32ee[_0x5ab0ea][0x0]]=_0x3a32ee[_0x5ab0ea][0x1];}_0x33eeb2['uBEzT'](JSON[_0x337af8(0x12c)](_0x5a2592[_0x337af8(0x136)]),JSON[_0x337af8(0x12c)](_0x15f462))&&(logger[_0x337af8(0xfa)](_0x33eeb2[_0x337af8(0xfc)]),_0x5a2592[_0x337af8(0x136)]=_0x15f462,fs[_0x337af8(0x10e)](packageFile,JSON['stringify'](_0x5a2592,null,0x2),_0x5411b0=>{const _0x27bf7b=_0x337af8;_0x5411b0&&logger[_0x27bf7b(0x115)](_0x5411b0);}));};function findScriptsWithFramework(_0x5b598e,_0x16dfe9){const _0x2a504b=a49_0x34b6fe,_0x7468ab={};_0x7468ab[_0x2a504b(0xf2)]=function(_0x7f1796,_0x12ff5d){return _0x7f1796<_0x12ff5d;},_0x7468ab['FLrqc']=_0x2a504b(0x135);const _0x20e4f2=_0x7468ab,_0x4fbb81=[],_0x3388bb=Object[_0x2a504b(0x129)](_0x5b598e);for(let _0x356a7f=0x0;_0x20e4f2[_0x2a504b(0xf2)](_0x356a7f,_0x3388bb['length']);_0x356a7f+=0x1){_0x3388bb[_0x356a7f][0x1]['includes'](_0x16dfe9)&&!_0x3388bb[_0x356a7f][0x1]['includes'](_0x20e4f2[_0x2a504b(0xff)])&&_0x4fbb81[_0x2a504b(0x13b)](_0x3388bb[_0x356a7f][0x0]);}return _0x4fbb81;}function getUpdatedCommand(_0x329db4,_0x4a2d70){const _0x908a57=a49_0x34b6fe,_0x20a17d={};_0x20a17d[_0x908a57(0x107)]=function(_0x361fe7,_0xf3f86c){return _0x361fe7!==_0xf3f86c;},_0x20a17d[_0x908a57(0x110)]=_0x908a57(0x135),_0x20a17d[_0x908a57(0x13d)]=function(_0x3d626c,_0x5b79a1){return _0x3d626c===_0x5b79a1;};const _0xa46511=_0x20a17d,_0x32e61d=_0x4a2d70+'-browserstack',_0x43d043=_0x329db4[_0x4a2d70],_0x125644=_0x43d043[_0x908a57(0x105)]('\x20');for(const _0x40a409 of frameworks){if(_0xa46511['jjhwv'](_0x125644['indexOf'](_0x40a409),-0x1)){_0x125644[_0x908a57(0x101)](_0x125644[_0x908a57(0x134)](_0x40a409),0x0,_0xa46511['OJyYP']);break;}}let _0x2b4f02=_0x125644['join']('\x20');return _0xa46511[_0x908a57(0x13d)](_0x2b4f02,_0x43d043)&&(_0x2b4f02=_0x908a57(0x13c)+_0x43d043),[_0x32e61d,_0x2b4f02];}function sdkSetup(){const _0x322a23=a49_0x34b6fe,_0x152cd7={};_0x152cd7[_0x322a23(0x138)]=_0x322a23(0x10a),_0x152cd7[_0x322a23(0xf6)]=_0x322a23(0x11c);const _0x210be8=_0x152cd7;if(helper['isUndefined'](config))return;config[_0x322a23(0x100)]=_0x210be8[_0x322a23(0x138)];try{utilities[_0x322a23(0xf7)](_0x210be8[_0x322a23(0xf6)],{},config,'');}catch(_0x1d9dab){logger[_0x322a23(0x112)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+_0x1d9dab);}}function a49_0x1c2f(_0x3d2596,_0x27e51b){const _0x523425=a49_0x5234();return a49_0x1c2f=function(_0x1c2f87,_0x1efead){_0x1c2f87=_0x1c2f87-0xf2;let _0x5f3877=_0x523425[_0x1c2f87];return _0x5f3877;},a49_0x1c2f(_0x3d2596,_0x27e51b);}function a49_0x5234(){const _0x4c9a83=['splice','2713230eIFoSP','codeceptjs','155847KQvRpC','split','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','jjhwv','myogR','5FirQvw','node-setup','readFileSync','length','vRtJi','writeFileSync','IfMXW','OJyYP','playwright','debug','npm\x20update\x20browserstack-node-sdk','14yBxyZA','error','username','YOUR_USERNAME','includes','winstonLogger','parse','eWzkL','SDKSetup','load','nightwatch','\x20&&\x20npm\x20update\x20browserstack-node-sdk','../helpers/utilities','Setup\x20completed','UMYbp','ahuZQ','83286hvOopl','7235356sYxKgk','1511848SCBAUb','jest','replace','entries','xbyYZ','yargs','stringify','js-yaml','Creating\x20configuration\x20file...','cwd','Adding\x20new\x20script(s)\x20in\x20package.json...','../helpers/logger','OKMPx','408474pPvRjR','indexOf','browserstack-node-sdk','scripts','/../../browserstack.yml.sample','KulGo','FforJ','860jiVDlq','push','browserstack-node-sdk\x20','KqGUW','cucumber-js','15893504usvhoh','HHkxc','argv','postinstall','22eraPkV','aCcGF','fireFunnelTestEvent','JukPU','YOUR_ACCESS_KEY','info','../helpers/helper','ErcAP','utf8','node','FLrqc','source'];a49_0x5234=function(){return _0x4c9a83;};return a49_0x5234();}logger[a49_0x34b6fe(0xfa)](a49_0x34b6fe(0x121));