#!/usr/bin/env node

const a50_0x4a7d4d=a50_0x2a0c;(function(_0x39cf9a,_0x58e059){const _0x5f1cba=a50_0x2a0c,_0x35b628=_0x39cf9a();while(!![]){try{const _0x471f1d=-parseInt(_0x5f1cba(0x213))/0x1*(-parseInt(_0x5f1cba(0x201))/0x2)+-parseInt(_0x5f1cba(0x1fc))/0x3*(parseInt(_0x5f1cba(0x229))/0x4)+parseInt(_0x5f1cba(0x218))/0x5+parseInt(_0x5f1cba(0x20b))/0x6+parseInt(_0x5f1cba(0x230))/0x7*(parseInt(_0x5f1cba(0x203))/0x8)+parseInt(_0x5f1cba(0x20c))/0x9*(parseInt(_0x5f1cba(0x224))/0xa)+-parseInt(_0x5f1cba(0x221))/0xb;if(_0x471f1d===_0x58e059)break;else _0x35b628['push'](_0x35b628['shift']());}catch(_0x2ce174){_0x35b628['push'](_0x35b628['shift']());}}}(a50_0x4926,0xee1dd));const fs=require('fs'),helper=require(a50_0x4a7d4d(0x205)),utilities=require(a50_0x4a7d4d(0x1f5)),yaml=require(a50_0x4a7d4d(0x20e)),yargs=require(a50_0x4a7d4d(0x1f3)),logger=require(a50_0x4a7d4d(0x225))[a50_0x4a7d4d(0x21d)],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process[a50_0x4a7d4d(0x223)]()+a50_0x4a7d4d(0x215),packageFile=process[a50_0x4a7d4d(0x223)]()+a50_0x4a7d4d(0x207),frameworks=['mocha','jest',a50_0x4a7d4d(0x22d),a50_0x4a7d4d(0x21c),a50_0x4a7d4d(0x1eb),a50_0x4a7d4d(0x222),'playwright'];let config;logger[a50_0x4a7d4d(0x219)](a50_0x4a7d4d(0x1f1)),createConfigurationFile(yargs[a50_0x4a7d4d(0x1f2)][a50_0x4a7d4d(0x212)],yargs[a50_0x4a7d4d(0x1f2)][a50_0x4a7d4d(0x231)],yargs[a50_0x4a7d4d(0x1f2)][a50_0x4a7d4d(0x227)]);try{sdkSetup();}catch(a50_0x2b3224){logger[a50_0x4a7d4d(0x210)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a50_0x2b3224);}function a50_0x4926(){const _0x2b9b0b=['error','40UGVcGt','SDKSetup','../helpers/helper','tEsAK','/package.json','includes','mDEvj','length','241542yUnQrQ','918kwlCDt','YOUR_USERNAME','js-yaml','indexOf','debug','postinstall','username','2hAxiSS','OXLnA','/browserstack.yml','join','zGSnb','4269525BqFicr','info','parse','load','node','winstonLogger','writeFileSync','replace','scripts','16695338nxMval','codeceptjs','cwd','138670wddkmY','../helpers/logger','LqXqW','playwright','browserstack-node-sdk\x20','20ltoRXx','-browserstack','RVVAx','CvLfn','cucumber-js','lKeFi','ynynP','462952yUkemt','key','split','yXwig','\x20&&\x20npm\x20update\x20browserstack-node-sdk','utf8','zIqdJ','push','YBLcw','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','nightwatch','jRDIl','isUndefined','Setup\x20completed','source','entries','Creating\x20configuration\x20file...','argv','yargs','node-setup','../helpers/utilities','stringify','FlSuf','LGNfx','Adding\x20new\x20script(s)\x20in\x20package.json...','dpRRN','dDVXL','312717nFMGez','npm\x20update\x20browserstack-node-sdk','browserstack-node-sdk','dCuKT','tkCZf','375002hTdUKS'];a50_0x4926=function(){return _0x2b9b0b;};return a50_0x4926();}addScriptInPackageJson();function createConfigurationFile(_0x26f1fb,_0x498617,_0x193625=![]){const _0x3c2b17=a50_0x4a7d4d,_0x94121b={};_0x94121b['yXwig']=_0x3c2b17(0x1e6),_0x94121b['zIqdJ']=_0x3c2b17(0x20d),_0x94121b[_0x3c2b17(0x1fa)]='YOUR_ACCESS_KEY';const _0x15fef7=_0x94121b;try{let _0x2059d7=fs['readFileSync'](_0x193625?configFileTemplatePW:configFileTemplate,_0x15fef7[_0x3c2b17(0x1e4)]);_0x26f1fb&&(_0x2059d7=_0x2059d7[_0x3c2b17(0x21f)](_0x15fef7[_0x3c2b17(0x1e7)],_0x26f1fb)),_0x498617&&(_0x2059d7=_0x2059d7['replace'](_0x15fef7[_0x3c2b17(0x1fa)],_0x498617)),config=yaml[_0x3c2b17(0x21b)](_0x2059d7),fs[_0x3c2b17(0x21e)](configFile,_0x2059d7,_0x4b5b92=>{const _0x190685=_0x3c2b17;_0x4b5b92&&logger[_0x190685(0x202)](_0x4b5b92);});}catch(_0x17a4eb){logger['error'](_0x17a4eb);}}function addPostInstallScript(_0x419e86,_0x288931){const _0x4370d0=a50_0x4a7d4d,_0x59ea8a={};_0x59ea8a[_0x4370d0(0x22e)]=_0x4370d0(0x211),_0x59ea8a['YBLcw']=_0x4370d0(0x1fd),_0x59ea8a[_0x4370d0(0x209)]=_0x4370d0(0x1e5);const _0x4676db=_0x59ea8a;let _0x2777ad=_0x419e86[_0x4676db[_0x4370d0(0x22e)]];if(_0x2777ad&&_0x2777ad[_0x4370d0(0x208)](_0x4676db[_0x4370d0(0x1e9)]))return;!_0x2777ad?_0x2777ad=_0x4676db[_0x4370d0(0x1e9)]:_0x2777ad+=_0x4676db['mDEvj'],_0x288931[_0x4370d0(0x1e8)]([_0x4676db[_0x4370d0(0x22e)],_0x2777ad]);}function addScriptInPackageJson(){const _0x23f422=a50_0x4a7d4d,_0x1862ab={'CvLfn':'utf8','jRDIl':function(_0x538651,_0xf75b16){return _0x538651<_0xf75b16;},'zGSnb':function(_0x46df39,_0x4e8dcd,_0x3c4377){return _0x46df39(_0x4e8dcd,_0x3c4377);},'PwTdU':function(_0x9529d5,_0x33f142,_0xb32c5){return _0x9529d5(_0x33f142,_0xb32c5);},'ynynP':function(_0x1eb0be,_0x4fbbe9,_0x5857f6){return _0x1eb0be(_0x4fbbe9,_0x5857f6);},'OXLnA':function(_0x1d52c3,_0x2b31cb){return _0x1d52c3!==_0x2b31cb;},'LqXqW':_0x23f422(0x1f9)},_0x12717f=JSON[_0x23f422(0x21a)](fs['readFileSync'](packageFile,_0x1862ab[_0x23f422(0x22c)])),_0x7adce3=[];for(let _0x390b1e=0x0;_0x1862ab[_0x23f422(0x1ec)](_0x390b1e,frameworks[_0x23f422(0x20a)]);_0x390b1e+=0x1){const _0x2e2e58=_0x1862ab[_0x23f422(0x217)](findScriptsWithFramework,_0x12717f['scripts'],frameworks[_0x390b1e]);for(let _0x1e230c=0x0;_0x1862ab[_0x23f422(0x1ec)](_0x1e230c,_0x2e2e58[_0x23f422(0x20a)]);_0x1e230c+=0x1){_0x7adce3['push'](_0x1862ab['PwTdU'](getUpdatedCommand,_0x12717f[_0x23f422(0x220)],_0x2e2e58[_0x1e230c]));}_0x1862ab[_0x23f422(0x22f)](addPostInstallScript,_0x12717f['scripts'],_0x7adce3);}const _0x524448={..._0x12717f['scripts']},_0x1d6fed=_0x524448;for(let _0x473fff=0x0;_0x1862ab[_0x23f422(0x1ec)](_0x473fff,_0x7adce3['length']);_0x473fff+=0x1){_0x1d6fed[_0x7adce3[_0x473fff][0x0]]=_0x7adce3[_0x473fff][0x1];}_0x1862ab[_0x23f422(0x214)](JSON[_0x23f422(0x1f6)](_0x12717f[_0x23f422(0x220)]),JSON[_0x23f422(0x1f6)](_0x1d6fed))&&(logger[_0x23f422(0x219)](_0x1862ab[_0x23f422(0x226)]),_0x12717f[_0x23f422(0x220)]=_0x1d6fed,fs[_0x23f422(0x21e)](packageFile,JSON[_0x23f422(0x1f6)](_0x12717f,null,0x2),_0x451576=>{const _0x326e4f=_0x23f422;_0x451576&&logger[_0x326e4f(0x202)](_0x451576);}));};function findScriptsWithFramework(_0x32da78,_0x1e7984){const _0x4923a1=a50_0x4a7d4d,_0xd9b8b6={};_0xd9b8b6['LGNfx']=function(_0x375269,_0x421526){return _0x375269<_0x421526;},_0xd9b8b6[_0x4923a1(0x22b)]=_0x4923a1(0x1fe);const _0x31eae4=_0xd9b8b6,_0x37f4f5=[],_0xba5cc5=Object[_0x4923a1(0x1f0)](_0x32da78);for(let _0x1df542=0x0;_0x31eae4[_0x4923a1(0x1f8)](_0x1df542,_0xba5cc5['length']);_0x1df542+=0x1){_0xba5cc5[_0x1df542][0x1]['includes'](_0x1e7984)&&!_0xba5cc5[_0x1df542][0x1][_0x4923a1(0x208)](_0x31eae4[_0x4923a1(0x22b)])&&_0x37f4f5[_0x4923a1(0x1e8)](_0xba5cc5[_0x1df542][0x0]);}return _0x37f4f5;}function getUpdatedCommand(_0x212886,_0x8518d3){const _0x9bb9f8=a50_0x4a7d4d,_0x5579e3={};_0x5579e3[_0x9bb9f8(0x206)]=function(_0x18e1e6,_0x202081){return _0x18e1e6!==_0x202081;},_0x5579e3[_0x9bb9f8(0x200)]=_0x9bb9f8(0x1fe),_0x5579e3['FlSuf']=function(_0x5c1e18,_0x10f271){return _0x5c1e18===_0x10f271;};const _0x2d27cc=_0x5579e3,_0x2e23dc=_0x8518d3+_0x9bb9f8(0x22a),_0x1b07e6=_0x212886[_0x8518d3],_0x7bc37c=_0x1b07e6[_0x9bb9f8(0x232)]('\x20');for(const _0xd892a6 of frameworks){if(_0x2d27cc[_0x9bb9f8(0x206)](_0x7bc37c[_0x9bb9f8(0x20f)](_0xd892a6),-0x1)){_0x7bc37c['splice'](_0x7bc37c['indexOf'](_0xd892a6),0x0,_0x2d27cc[_0x9bb9f8(0x200)]);break;}}let _0x137f6e=_0x7bc37c[_0x9bb9f8(0x216)]('\x20');return _0x2d27cc[_0x9bb9f8(0x1f7)](_0x137f6e,_0x1b07e6)&&(_0x137f6e=_0x9bb9f8(0x228)+_0x1b07e6),[_0x2e23dc,_0x137f6e];}function a50_0x2a0c(_0x27ebc6,_0x4bbec6){const _0x492674=a50_0x4926();return a50_0x2a0c=function(_0x2a0c1c,_0x43faea){_0x2a0c1c=_0x2a0c1c-0x1e4;let _0x5e1bda=_0x492674[_0x2a0c1c];return _0x5e1bda;},a50_0x2a0c(_0x27ebc6,_0x4bbec6);}function sdkSetup(){const _0x3900af=a50_0x4a7d4d,_0x2ec766={};_0x2ec766[_0x3900af(0x1ff)]=_0x3900af(0x1f4),_0x2ec766[_0x3900af(0x1fb)]=_0x3900af(0x204);const _0x3eb321=_0x2ec766;if(helper[_0x3900af(0x1ed)](config))return;config[_0x3900af(0x1ef)]=_0x3eb321[_0x3900af(0x1ff)];try{utilities['fireFunnelTestEvent'](_0x3eb321['dDVXL'],{},config,'');}catch(_0x275d7b){logger[_0x3900af(0x210)](_0x3900af(0x1ea)+_0x275d7b);}}logger['info'](a50_0x4a7d4d(0x1ee));