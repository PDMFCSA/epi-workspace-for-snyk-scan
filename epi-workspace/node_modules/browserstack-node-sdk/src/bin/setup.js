#!/usr/bin/env node

const a45_0x4767bb=a45_0x2bfe;(function(_0x49f66a,_0x1db372){const _0xd43e23=a45_0x2bfe,_0x47fd88=_0x49f66a();while(!![]){try{const _0x3ffa25=parseInt(_0xd43e23(0x94))/0x1*(parseInt(_0xd43e23(0xc5))/0x2)+parseInt(_0xd43e23(0xd4))/0x3*(parseInt(_0xd43e23(0x9b))/0x4)+parseInt(_0xd43e23(0xb1))/0x5+-parseInt(_0xd43e23(0x8d))/0x6*(-parseInt(_0xd43e23(0xd0))/0x7)+parseInt(_0xd43e23(0xcb))/0x8*(-parseInt(_0xd43e23(0xb9))/0x9)+-parseInt(_0xd43e23(0xaa))/0xa*(-parseInt(_0xd43e23(0xbc))/0xb)+-parseInt(_0xd43e23(0xc8))/0xc*(parseInt(_0xd43e23(0x90))/0xd);if(_0x3ffa25===_0x1db372)break;else _0x47fd88['push'](_0x47fd88['shift']());}catch(_0x579c0d){_0x47fd88['push'](_0x47fd88['shift']());}}}(a45_0x4213,0xc8578));const fs=require('fs'),helper=require(a45_0x4767bb(0xc2)),utilities=require('../helpers/utilities'),yaml=require(a45_0x4767bb(0xad)),yargs=require(a45_0x4767bb(0x91)),logger=require(a45_0x4767bb(0xbd))[a45_0x4767bb(0xae)],configFileTemplate=__dirname+a45_0x4767bb(0x89),configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process[a45_0x4767bb(0xc9)]()+a45_0x4767bb(0xc0),packageFile=process['cwd']()+a45_0x4767bb(0xc7),frameworks=[a45_0x4767bb(0xb5),'jest',a45_0x4767bb(0xd1),a45_0x4767bb(0x9a),'nightwatch','codeceptjs',a45_0x4767bb(0xa1)];let config;logger[a45_0x4767bb(0x8e)](a45_0x4767bb(0xc1)),createConfigurationFile(yargs[a45_0x4767bb(0xa3)][a45_0x4767bb(0xba)],yargs[a45_0x4767bb(0xa3)][a45_0x4767bb(0xb2)],yargs[a45_0x4767bb(0xa3)][a45_0x4767bb(0xa1)]);function a45_0x2bfe(_0x477cbe,_0x21d7c0){const _0x421300=a45_0x4213();return a45_0x2bfe=function(_0x2bfe18,_0x6774ec){_0x2bfe18=_0x2bfe18-0x88;let _0x476bc6=_0x421300[_0x2bfe18];return _0x476bc6;},a45_0x2bfe(_0x477cbe,_0x21d7c0);}try{sdkSetup();}catch(a45_0x256129){logger[a45_0x4767bb(0xab)](a45_0x4767bb(0xac)+a45_0x256129);}addScriptInPackageJson();function createConfigurationFile(_0x335eb7,_0x212ddb,_0x409620=![]){const _0x1639f5=a45_0x4767bb,_0x579bb7={};_0x579bb7['nngbz']=_0x1639f5(0xce),_0x579bb7[_0x1639f5(0xa7)]=_0x1639f5(0xc6),_0x579bb7['xpfNl']=_0x1639f5(0x96);const _0x34c08c=_0x579bb7;try{let _0x516cf3=fs[_0x1639f5(0x9d)](_0x409620?configFileTemplatePW:configFileTemplate,_0x34c08c['nngbz']);_0x335eb7&&(_0x516cf3=_0x516cf3[_0x1639f5(0x8c)](_0x34c08c[_0x1639f5(0xa7)],_0x335eb7)),_0x212ddb&&(_0x516cf3=_0x516cf3[_0x1639f5(0x8c)](_0x34c08c[_0x1639f5(0xb8)],_0x212ddb)),config=yaml[_0x1639f5(0xaf)](_0x516cf3),fs[_0x1639f5(0x8f)](configFile,_0x516cf3,_0x2cb3ca=>{_0x2cb3ca&&logger['error'](_0x2cb3ca);});}catch(_0x428a44){logger[_0x1639f5(0x97)](_0x428a44);}}function addPostInstallScript(_0xd97a91,_0x1e0d78){const _0x3fb7ab=a45_0x4767bb,_0x29d296={};_0x29d296['rQegW']=_0x3fb7ab(0xa8),_0x29d296[_0x3fb7ab(0xa9)]=_0x3fb7ab(0x99),_0x29d296[_0x3fb7ab(0xb6)]='\x20&&\x20npm\x20update\x20browserstack-node-sdk';const _0x4ab30c=_0x29d296;let _0x14b6ff=_0xd97a91[_0x4ab30c[_0x3fb7ab(0xbe)]];if(_0x14b6ff&&_0x14b6ff['includes'](_0x4ab30c[_0x3fb7ab(0xa9)]))return;!_0x14b6ff?_0x14b6ff=_0x4ab30c['ojRaK']:_0x14b6ff+=_0x4ab30c[_0x3fb7ab(0xb6)],_0x1e0d78[_0x3fb7ab(0xa2)]([_0x4ab30c[_0x3fb7ab(0xbe)],_0x14b6ff]);}function addScriptInPackageJson(){const _0xabb036=a45_0x4767bb,_0x1947fb={'IYVPH':_0xabb036(0xce),'RSTQj':function(_0x223dd4,_0xa8bb2a){return _0x223dd4<_0xa8bb2a;},'JaIPY':function(_0x34fa38,_0xfff15,_0x452ab5){return _0x34fa38(_0xfff15,_0x452ab5);},'JoRix':function(_0x33b4c7,_0x4f4f11){return _0x33b4c7<_0x4f4f11;},'vgcWM':function(_0x5b6ad8,_0x435d9d,_0x14a48e){return _0x5b6ad8(_0x435d9d,_0x14a48e);},'UJTFj':function(_0x3f5d8b,_0x22b60a,_0x268e4b){return _0x3f5d8b(_0x22b60a,_0x268e4b);},'LGHkF':function(_0x57720b,_0x438354){return _0x57720b<_0x438354;},'zwofs':function(_0x2ba479,_0x2b8483){return _0x2ba479!==_0x2b8483;},'yBhVz':_0xabb036(0x93)},_0x3fac55=JSON['parse'](fs[_0xabb036(0x9d)](packageFile,_0x1947fb['IYVPH'])),_0x553134=[];for(let _0xc28eab=0x0;_0x1947fb['RSTQj'](_0xc28eab,frameworks['length']);_0xc28eab+=0x1){const _0x4d998c=_0x1947fb['JaIPY'](findScriptsWithFramework,_0x3fac55[_0xabb036(0xb4)],frameworks[_0xc28eab]);for(let _0x32fb68=0x0;_0x1947fb['JoRix'](_0x32fb68,_0x4d998c[_0xabb036(0xa6)]);_0x32fb68+=0x1){_0x553134[_0xabb036(0xa2)](_0x1947fb[_0xabb036(0x95)](getUpdatedCommand,_0x3fac55[_0xabb036(0xb4)],_0x4d998c[_0x32fb68]));}_0x1947fb[_0xabb036(0x9f)](addPostInstallScript,_0x3fac55[_0xabb036(0xb4)],_0x553134);}const _0x1fef0d={..._0x3fac55['scripts']},_0x172bcc=_0x1fef0d;for(let _0x11662d=0x0;_0x1947fb['LGHkF'](_0x11662d,_0x553134['length']);_0x11662d+=0x1){_0x172bcc[_0x553134[_0x11662d][0x0]]=_0x553134[_0x11662d][0x1];}_0x1947fb[_0xabb036(0x9e)](JSON[_0xabb036(0x92)](_0x3fac55[_0xabb036(0xb4)]),JSON[_0xabb036(0x92)](_0x172bcc))&&(logger[_0xabb036(0x8e)](_0x1947fb[_0xabb036(0xbf)]),_0x3fac55[_0xabb036(0xb4)]=_0x172bcc,fs[_0xabb036(0x8f)](packageFile,JSON[_0xabb036(0x92)](_0x3fac55,null,0x2),_0x1e46e8=>{const _0x2b1aa2=_0xabb036;_0x1e46e8&&logger[_0x2b1aa2(0x97)](_0x1e46e8);}));};function findScriptsWithFramework(_0x34b358,_0x23b5dc){const _0x12d6f2=a45_0x4767bb,_0x252189={};_0x252189[_0x12d6f2(0xb7)]=function(_0x1bdeaa,_0x22ca9d){return _0x1bdeaa<_0x22ca9d;},_0x252189[_0x12d6f2(0xd2)]=_0x12d6f2(0xcd);const _0x3e3b82=_0x252189,_0x4d7b15=[],_0x3868d4=Object[_0x12d6f2(0xa0)](_0x34b358);for(let _0x426b05=0x0;_0x3e3b82[_0x12d6f2(0xb7)](_0x426b05,_0x3868d4['length']);_0x426b05+=0x1){_0x3868d4[_0x426b05][0x1][_0x12d6f2(0x9c)](_0x23b5dc)&&!_0x3868d4[_0x426b05][0x1]['includes'](_0x3e3b82[_0x12d6f2(0xd2)])&&_0x4d7b15[_0x12d6f2(0xa2)](_0x3868d4[_0x426b05][0x0]);}return _0x4d7b15;}function getUpdatedCommand(_0x582025,_0x3840b0){const _0xbefe20=a45_0x4767bb,_0x23335e={};_0x23335e[_0xbefe20(0xa5)]=function(_0xda32b1,_0x53316d){return _0xda32b1!==_0x53316d;},_0x23335e['TpRfq']=_0xbefe20(0xcd),_0x23335e[_0xbefe20(0x8a)]=function(_0x4c7691,_0x3897e5){return _0x4c7691===_0x3897e5;};const _0x5b142e=_0x23335e,_0x3aa95e=_0x3840b0+_0xbefe20(0xcc),_0x50e273=_0x582025[_0x3840b0],_0x47181d=_0x50e273[_0xbefe20(0xa4)]('\x20');for(const _0x264e5d of frameworks){if(_0x5b142e['HsIsE'](_0x47181d[_0xbefe20(0xbb)](_0x264e5d),-0x1)){_0x47181d[_0xbefe20(0xca)](_0x47181d[_0xbefe20(0xbb)](_0x264e5d),0x0,_0x5b142e[_0xbefe20(0xb3)]);break;}}let _0x49571f=_0x47181d[_0xbefe20(0x88)]('\x20');return _0x5b142e[_0xbefe20(0x8a)](_0x49571f,_0x50e273)&&(_0x49571f='browserstack-node-sdk\x20'+_0x50e273),[_0x3aa95e,_0x49571f];}function a45_0x4213(){const _0x5b4112=['split','HsIsE','length','PVFFj','postinstall','ojRaK','1467010sJGZYR','debug','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','js-yaml','winstonLogger','load','fireFunnelTestEvent','2760185IWEqqJ','key','TpRfq','scripts','mocha','HCnNS','PUitV','xpfNl','1732725EuEuxR','username','indexOf','99NAMSIF','../helpers/logger','rQegW','yBhVz','/browserstack.yml','Creating\x20configuration\x20file...','../helpers/helper','fnkLQ','Setup\x20completed','3064XXmIUq','YOUR_USERNAME','/package.json','216qReabI','cwd','splice','40oGrHvy','-browserstack','browserstack-node-sdk','utf8','node-setup','21YgOpEZ','cucumber-js','LUlOR','iBIWi','6RZVipf','join','/../../browserstack.yml.sample','zctwn','source','replace','1764618HqAVAA','info','writeFileSync','1859260rvALWj','yargs','stringify','Adding\x20new\x20script(s)\x20in\x20package.json...','371SIiFHF','vgcWM','YOUR_ACCESS_KEY','error','SDKSetup','npm\x20update\x20browserstack-node-sdk','node','2069116OrGXEN','includes','readFileSync','zwofs','UJTFj','entries','playwright','push','argv'];a45_0x4213=function(){return _0x5b4112;};return a45_0x4213();}function sdkSetup(){const _0x1a08ae=a45_0x4767bb,_0x4db4f0={};_0x4db4f0['fnkLQ']=_0x1a08ae(0xcf),_0x4db4f0['iBIWi']=_0x1a08ae(0x98);const _0x8ec590=_0x4db4f0;if(helper['isUndefined'](config))return;config[_0x1a08ae(0x8b)]=_0x8ec590[_0x1a08ae(0xc3)];try{utilities[_0x1a08ae(0xb0)](_0x8ec590[_0x1a08ae(0xd3)],{},config,'');}catch(_0x4d3a16){logger['debug'](_0x1a08ae(0xac)+_0x4d3a16);}}logger[a45_0x4767bb(0x8e)](a45_0x4767bb(0xc4));