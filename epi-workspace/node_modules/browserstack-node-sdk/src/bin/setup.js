#!/usr/bin/env node

const a49_0x5dc285=a49_0x496c;(function(_0xc5923f,_0x3dede2){const _0x4f1f28=a49_0x496c,_0x50c4b8=_0xc5923f();while(!![]){try{const _0x4b5b74=parseInt(_0x4f1f28(0x109))/0x1+parseInt(_0x4f1f28(0x10e))/0x2+-parseInt(_0x4f1f28(0xfd))/0x3+parseInt(_0x4f1f28(0xed))/0x4*(parseInt(_0x4f1f28(0x106))/0x5)+-parseInt(_0x4f1f28(0x10f))/0x6*(-parseInt(_0x4f1f28(0xe8))/0x7)+-parseInt(_0x4f1f28(0xdf))/0x8+parseInt(_0x4f1f28(0xf4))/0x9*(-parseInt(_0x4f1f28(0x103))/0xa);if(_0x4b5b74===_0x3dede2)break;else _0x50c4b8['push'](_0x50c4b8['shift']());}catch(_0x424d1a){_0x50c4b8['push'](_0x50c4b8['shift']());}}}(a49_0x3142,0x306e4));const fs=require('fs'),helper=require(a49_0x5dc285(0xeb)),utilities=require(a49_0x5dc285(0xe4)),yaml=require('js-yaml'),yargs=require(a49_0x5dc285(0xea)),logger=require(a49_0x5dc285(0x11f))[a49_0x5dc285(0x108)],configFileTemplate=__dirname+a49_0x5dc285(0xf2),configFileTemplatePW=__dirname+a49_0x5dc285(0x104),configFile=process[a49_0x5dc285(0x11a)]()+a49_0x5dc285(0x116),packageFile=process[a49_0x5dc285(0x11a)]()+a49_0x5dc285(0xf1),frameworks=['mocha',a49_0x5dc285(0x11e),a49_0x5dc285(0x100),a49_0x5dc285(0x115),a49_0x5dc285(0x11b),a49_0x5dc285(0xff),a49_0x5dc285(0xdc)];let config;logger[a49_0x5dc285(0x110)]('Creating\x20configuration\x20file...'),createConfigurationFile(yargs[a49_0x5dc285(0xfa)][a49_0x5dc285(0x119)],yargs[a49_0x5dc285(0xfa)][a49_0x5dc285(0xe0)],yargs[a49_0x5dc285(0xfa)][a49_0x5dc285(0xdc)]);try{sdkSetup();}catch(a49_0x586878){logger['debug'](a49_0x5dc285(0xf3)+a49_0x586878);}addScriptInPackageJson();function createConfigurationFile(_0xe6c5ab,_0x4775d9,_0x50a615=![]){const _0x890523=a49_0x5dc285,_0x1923b3={};_0x1923b3[_0x890523(0xe2)]='utf8',_0x1923b3[_0x890523(0x120)]=_0x890523(0x10b),_0x1923b3['OQTaq']=_0x890523(0xe1);const _0x1e0ccb=_0x1923b3;try{let _0x5b3e5d=fs[_0x890523(0xe3)](_0x50a615?configFileTemplatePW:configFileTemplate,_0x1e0ccb[_0x890523(0xe2)]);_0xe6c5ab&&(_0x5b3e5d=_0x5b3e5d[_0x890523(0xdb)](_0x1e0ccb[_0x890523(0x120)],_0xe6c5ab)),_0x4775d9&&(_0x5b3e5d=_0x5b3e5d[_0x890523(0xdb)](_0x1e0ccb['OQTaq'],_0x4775d9)),config=yaml[_0x890523(0xee)](_0x5b3e5d),fs[_0x890523(0xda)](configFile,_0x5b3e5d,_0x4d12ff=>{const _0x3f2585=_0x890523;_0x4d12ff&&logger[_0x3f2585(0xf5)](_0x4d12ff);});}catch(_0x4a8c28){logger[_0x890523(0xf5)](_0x4a8c28);}}function addPostInstallScript(_0x273150,_0x29242b){const _0x41c233=a49_0x5dc285,_0x1ddb10={};_0x1ddb10['ACTld']=_0x41c233(0xe9),_0x1ddb10[_0x41c233(0xf7)]=_0x41c233(0x105),_0x1ddb10[_0x41c233(0xf6)]='\x20&&\x20npm\x20update\x20browserstack-node-sdk';const _0x453d02=_0x1ddb10;let _0xdef381=_0x273150[_0x453d02[_0x41c233(0x111)]];if(_0xdef381&&_0xdef381[_0x41c233(0xd8)](_0x453d02[_0x41c233(0xf7)]))return;!_0xdef381?_0xdef381=_0x453d02['QVlng']:_0xdef381+=_0x453d02[_0x41c233(0xf6)],_0x29242b[_0x41c233(0x121)]([_0x453d02['ACTld'],_0xdef381]);}function a49_0x3142(){const _0x4d249a=['indexOf','SDKSetup','1169259qVzmpd','CiqLS','codeceptjs','cucumber-js','EsAKu','utf8','170BCgaxS','/../../browserstack.pw.yml.sample','npm\x20update\x20browserstack-node-sdk','70jxwOBV','Adding\x20new\x20script(s)\x20in\x20package.json...','winstonLogger','307571PqEPXE','parse','YOUR_USERNAME','split','JPvsr','21680wBFrNI','6eQGQTs','info','ACTld','debug','isUndefined','stringify','node','/browserstack.yml','source','PiwNv','username','cwd','nightwatch','fireFunnelTestEvent','tdhAj','jest','../helpers/logger','pibIT','push','uConv','Setup\x20completed','BPEQX','includes','node-setup','writeFileSync','replace','playwright','scripts','browserstack-node-sdk','70520bDhMKq','key','YOUR_ACCESS_KEY','XAUpo','readFileSync','../helpers/utilities','GzABA','gxggg','LfmhW','433769hAvYbb','postinstall','yargs','../helpers/helper','join','88084VmoyRX','load','xKjaH','length','/package.json','/../../browserstack.yml.sample','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','48564VJurmb','error','GGtrP','QVlng','RkSKD','-browserstack','argv'];a49_0x3142=function(){return _0x4d249a;};return a49_0x3142();}function addScriptInPackageJson(){const _0x2d1d20=a49_0x5dc285,_0xea66d0={'EsAKu':_0x2d1d20(0x102),'PiwNv':function(_0x509f08,_0x381b76){return _0x509f08<_0x381b76;},'JPvsr':function(_0x2aca04,_0x1a243d,_0x542f57){return _0x2aca04(_0x1a243d,_0x542f57);},'jhPHK':function(_0x4b39f8,_0x53a872){return _0x4b39f8<_0x53a872;},'xdGav':function(_0x117b5b,_0x5f0fcf,_0x39f4c2){return _0x117b5b(_0x5f0fcf,_0x39f4c2);},'GzABA':function(_0x3c6069,_0x546d53){return _0x3c6069<_0x546d53;},'tsNCH':function(_0x52a1a0,_0x4a67e3){return _0x52a1a0!==_0x4a67e3;},'gxggg':_0x2d1d20(0x107)},_0x13a67f=JSON[_0x2d1d20(0x10a)](fs[_0x2d1d20(0xe3)](packageFile,_0xea66d0[_0x2d1d20(0x101)])),_0x2364df=[];for(let _0x21a6f9=0x0;_0xea66d0[_0x2d1d20(0x118)](_0x21a6f9,frameworks['length']);_0x21a6f9+=0x1){const _0x2197b9=_0xea66d0[_0x2d1d20(0x10d)](findScriptsWithFramework,_0x13a67f[_0x2d1d20(0xdd)],frameworks[_0x21a6f9]);for(let _0x41bd3c=0x0;_0xea66d0['jhPHK'](_0x41bd3c,_0x2197b9['length']);_0x41bd3c+=0x1){_0x2364df[_0x2d1d20(0x121)](_0xea66d0['JPvsr'](getUpdatedCommand,_0x13a67f['scripts'],_0x2197b9[_0x41bd3c]));}_0xea66d0['xdGav'](addPostInstallScript,_0x13a67f[_0x2d1d20(0xdd)],_0x2364df);}const _0x115053={..._0x13a67f['scripts']},_0x38dc4c=_0x115053;for(let _0x36ff49=0x0;_0xea66d0[_0x2d1d20(0xe5)](_0x36ff49,_0x2364df[_0x2d1d20(0xf0)]);_0x36ff49+=0x1){_0x38dc4c[_0x2364df[_0x36ff49][0x0]]=_0x2364df[_0x36ff49][0x1];}_0xea66d0['tsNCH'](JSON['stringify'](_0x13a67f['scripts']),JSON[_0x2d1d20(0x114)](_0x38dc4c))&&(logger[_0x2d1d20(0x110)](_0xea66d0[_0x2d1d20(0xe6)]),_0x13a67f[_0x2d1d20(0xdd)]=_0x38dc4c,fs['writeFileSync'](packageFile,JSON[_0x2d1d20(0x114)](_0x13a67f,null,0x2),_0x5a290e=>{const _0x508876=_0x2d1d20;_0x5a290e&&logger[_0x508876(0xf5)](_0x5a290e);}));};function findScriptsWithFramework(_0x51072d,_0xefd884){const _0x4ca491=a49_0x5dc285,_0x481408={};_0x481408[_0x4ca491(0xef)]=function(_0x40d374,_0x1ba81f){return _0x40d374<_0x1ba81f;},_0x481408[_0x4ca491(0xd7)]=_0x4ca491(0xde);const _0x5f0f64=_0x481408,_0x467eeb=[],_0x35cc90=Object['entries'](_0x51072d);for(let _0x287484=0x0;_0x5f0f64[_0x4ca491(0xef)](_0x287484,_0x35cc90[_0x4ca491(0xf0)]);_0x287484+=0x1){_0x35cc90[_0x287484][0x1][_0x4ca491(0xd8)](_0xefd884)&&!_0x35cc90[_0x287484][0x1]['includes'](_0x5f0f64[_0x4ca491(0xd7)])&&_0x467eeb[_0x4ca491(0x121)](_0x35cc90[_0x287484][0x0]);}return _0x467eeb;}function getUpdatedCommand(_0x16eebd,_0x40eb5a){const _0x4b6fd9=a49_0x5dc285,_0xd270e0={};_0xd270e0[_0x4b6fd9(0xfe)]=function(_0x580378,_0x274a3a){return _0x580378!==_0x274a3a;},_0xd270e0[_0x4b6fd9(0xf8)]=_0x4b6fd9(0xde),_0xd270e0[_0x4b6fd9(0x11d)]=function(_0x477000,_0x20083f){return _0x477000===_0x20083f;};const _0x54c84c=_0xd270e0,_0x30950a=_0x40eb5a+_0x4b6fd9(0xf9),_0x477b9d=_0x16eebd[_0x40eb5a],_0x17e8e4=_0x477b9d[_0x4b6fd9(0x10c)]('\x20');for(const _0x42acfe of frameworks){if(_0x54c84c[_0x4b6fd9(0xfe)](_0x17e8e4[_0x4b6fd9(0xfb)](_0x42acfe),-0x1)){_0x17e8e4['splice'](_0x17e8e4[_0x4b6fd9(0xfb)](_0x42acfe),0x0,_0x54c84c['RkSKD']);break;}}let _0x134624=_0x17e8e4[_0x4b6fd9(0xec)]('\x20');return _0x54c84c[_0x4b6fd9(0x11d)](_0x134624,_0x477b9d)&&(_0x134624='browserstack-node-sdk\x20'+_0x477b9d),[_0x30950a,_0x134624];}function sdkSetup(){const _0x27d8eb=a49_0x5dc285,_0x54c04b={};_0x54c04b[_0x27d8eb(0x122)]=_0x27d8eb(0xd9),_0x54c04b['LfmhW']=_0x27d8eb(0xfc);const _0x2372c8=_0x54c04b;if(helper[_0x27d8eb(0x113)](config))return;config[_0x27d8eb(0x117)]=_0x2372c8[_0x27d8eb(0x122)];try{utilities[_0x27d8eb(0x11c)](_0x2372c8[_0x27d8eb(0xe7)],{},config,'');}catch(_0x1f0b06){logger[_0x27d8eb(0x112)](_0x27d8eb(0xf3)+_0x1f0b06);}}function a49_0x496c(_0x5b07be,_0x558494){const _0x31424d=a49_0x3142();return a49_0x496c=function(_0x496cd6,_0x40383e){_0x496cd6=_0x496cd6-0xd6;let _0x3fb6b0=_0x31424d[_0x496cd6];return _0x3fb6b0;},a49_0x496c(_0x5b07be,_0x558494);}logger[a49_0x5dc285(0x110)](a49_0x5dc285(0xd6));