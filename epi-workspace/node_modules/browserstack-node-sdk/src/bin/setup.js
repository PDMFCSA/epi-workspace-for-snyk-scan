#!/usr/bin/env node

const a49_0x18195f=a49_0x16ec;(function(_0x3632b2,_0x6498a4){const _0x3c2744=a49_0x16ec,_0x500de3=_0x3632b2();while(!![]){try{const _0x20e1e2=parseInt(_0x3c2744(0x1b1))/0x1*(parseInt(_0x3c2744(0x1b8))/0x2)+-parseInt(_0x3c2744(0x1af))/0x3*(parseInt(_0x3c2744(0x1a3))/0x4)+-parseInt(_0x3c2744(0x1a4))/0x5*(-parseInt(_0x3c2744(0x1c2))/0x6)+-parseInt(_0x3c2744(0x1d5))/0x7*(-parseInt(_0x3c2744(0x1ae))/0x8)+-parseInt(_0x3c2744(0x1b2))/0x9*(parseInt(_0x3c2744(0x1be))/0xa)+parseInt(_0x3c2744(0x1c4))/0xb*(parseInt(_0x3c2744(0x19a))/0xc)+-parseInt(_0x3c2744(0x1c9))/0xd;if(_0x20e1e2===_0x6498a4)break;else _0x500de3['push'](_0x500de3['shift']());}catch(_0x2f48ad){_0x500de3['push'](_0x500de3['shift']());}}}(a49_0x582a,0xc6e29));const fs=require('fs'),helper=require('../helpers/helper'),utilities=require(a49_0x18195f(0x1dd)),yaml=require('js-yaml'),yargs=require(a49_0x18195f(0x1ca)),logger=require(a49_0x18195f(0x1b3))[a49_0x18195f(0x1b5)],configFileTemplate=__dirname+a49_0x18195f(0x1da),configFileTemplatePW=__dirname+a49_0x18195f(0x1aa),configFile=process[a49_0x18195f(0x19b)]()+'/browserstack.yml',packageFile=process['cwd']()+a49_0x18195f(0x19f),frameworks=['mocha',a49_0x18195f(0x19c),a49_0x18195f(0x19d),'node',a49_0x18195f(0x1c1),a49_0x18195f(0x1c3),a49_0x18195f(0x1ac)];let config;logger['info'](a49_0x18195f(0x1d1)),createConfigurationFile(yargs[a49_0x18195f(0x1c6)]['username'],yargs['argv']['key'],yargs[a49_0x18195f(0x1c6)][a49_0x18195f(0x1ac)]);try{sdkSetup();}catch(a49_0x53993f){logger[a49_0x18195f(0x1a7)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a49_0x53993f);}addScriptInPackageJson();function a49_0x582a(){const _0x43cc02=['-browserstack','npm\x20update\x20browserstack-node-sdk','debug','fDbfG','replace','/../../browserstack.pw.yml.sample','scripts','playwright','WbPfY','12881432ayVcBV','14451NPIHDd','isUndefined','298ktvHyV','19773UdyHOo','../helpers/logger','stringify','winstonLogger','IbrPM','hcYzL','2082EvxXdS','AcxFD','splice','utf8','error','msOGd','3460LbyxTR','iZdVp','fireFunnelTestEvent','nightwatch','6DwrtbC','codeceptjs','11RzWxPT','parse','argv','browserstack-node-sdk','indexOf','19189313SyQQvO','yargs','qrMNZ','VaKBv','qZIYw','readFileSync','length','XiRsU','Creating\x20configuration\x20file...','dXhel','info','split','7rsgvyf','LdIZH','node-setup','slaYV','source','/../../browserstack.yml.sample','includes','OPTUO','../helpers/utilities','dRVhf','QOmOo','postinstall','\x20&&\x20npm\x20update\x20browserstack-node-sdk','push','9521808KIEWbb','cwd','jest','cucumber-js','YQstS','/package.json','Adding\x20new\x20script(s)\x20in\x20package.json...','browserstack-node-sdk\x20','join','776TCpChD','6357565fhMaLI'];a49_0x582a=function(){return _0x43cc02;};return a49_0x582a();}function createConfigurationFile(_0x3fd438,_0x1f574f,_0x38a63e=![]){const _0x5ca1b3=a49_0x18195f,_0x508690={};_0x508690['CoPtA']='utf8',_0x508690[_0x5ca1b3(0x1a8)]='YOUR_USERNAME',_0x508690[_0x5ca1b3(0x19e)]='YOUR_ACCESS_KEY';const _0x17908a=_0x508690;try{let _0x1340a8=fs[_0x5ca1b3(0x1ce)](_0x38a63e?configFileTemplatePW:configFileTemplate,_0x17908a['CoPtA']);_0x3fd438&&(_0x1340a8=_0x1340a8[_0x5ca1b3(0x1a9)](_0x17908a[_0x5ca1b3(0x1a8)],_0x3fd438)),_0x1f574f&&(_0x1340a8=_0x1340a8[_0x5ca1b3(0x1a9)](_0x17908a[_0x5ca1b3(0x19e)],_0x1f574f)),config=yaml['load'](_0x1340a8),fs['writeFileSync'](configFile,_0x1340a8,_0x2cc3c6=>{const _0x34fffc=_0x5ca1b3;_0x2cc3c6&&logger[_0x34fffc(0x1bc)](_0x2cc3c6);});}catch(_0x3125fc){logger[_0x5ca1b3(0x1bc)](_0x3125fc);}}function addPostInstallScript(_0x27c922,_0x5c64eb){const _0x2e8484=a49_0x18195f,_0x5012f5={};_0x5012f5[_0x2e8484(0x1cc)]=_0x2e8484(0x197),_0x5012f5[_0x2e8484(0x1cb)]=_0x2e8484(0x1a6),_0x5012f5[_0x2e8484(0x1bd)]=_0x2e8484(0x198);const _0x46c873=_0x5012f5;let _0x3b518a=_0x27c922[_0x46c873[_0x2e8484(0x1cc)]];if(_0x3b518a&&_0x3b518a[_0x2e8484(0x1db)](_0x46c873[_0x2e8484(0x1cb)]))return;!_0x3b518a?_0x3b518a=_0x46c873[_0x2e8484(0x1cb)]:_0x3b518a+=_0x46c873[_0x2e8484(0x1bd)],_0x5c64eb[_0x2e8484(0x199)]([_0x46c873[_0x2e8484(0x1cc)],_0x3b518a]);}function addScriptInPackageJson(){const _0x2c720c=a49_0x18195f,_0x264b04={'XmacD':_0x2c720c(0x1bb),'XiRsU':function(_0x31253d,_0x4f1763){return _0x31253d<_0x4f1763;},'iZdVp':function(_0x1c2ae2,_0x274aca,_0x25b1d4){return _0x1c2ae2(_0x274aca,_0x25b1d4);},'QOmOo':function(_0x15df3e,_0xb41c33){return _0x15df3e<_0xb41c33;},'WbPfY':function(_0x6cef22,_0x597a78,_0x4fbc3a){return _0x6cef22(_0x597a78,_0x4fbc3a);},'sXgeJ':function(_0x485e87,_0x22b32a,_0x344272){return _0x485e87(_0x22b32a,_0x344272);},'LdIZH':function(_0x437e54,_0x4142a4){return _0x437e54<_0x4142a4;},'dXhel':function(_0x3ea471,_0x4f72a8){return _0x3ea471!==_0x4f72a8;},'OPTUO':_0x2c720c(0x1a0)},_0x5b0027=JSON[_0x2c720c(0x1c5)](fs[_0x2c720c(0x1ce)](packageFile,_0x264b04['XmacD'])),_0x4ebffb=[];for(let _0x38830a=0x0;_0x264b04[_0x2c720c(0x1d0)](_0x38830a,frameworks[_0x2c720c(0x1cf)]);_0x38830a+=0x1){const _0x32789c=_0x264b04[_0x2c720c(0x1bf)](findScriptsWithFramework,_0x5b0027[_0x2c720c(0x1ab)],frameworks[_0x38830a]);for(let _0x4f36f5=0x0;_0x264b04[_0x2c720c(0x196)](_0x4f36f5,_0x32789c[_0x2c720c(0x1cf)]);_0x4f36f5+=0x1){_0x4ebffb[_0x2c720c(0x199)](_0x264b04[_0x2c720c(0x1ad)](getUpdatedCommand,_0x5b0027['scripts'],_0x32789c[_0x4f36f5]));}_0x264b04['sXgeJ'](addPostInstallScript,_0x5b0027[_0x2c720c(0x1ab)],_0x4ebffb);}const _0x461103={..._0x5b0027['scripts']},_0x51ef49=_0x461103;for(let _0x71a79b=0x0;_0x264b04[_0x2c720c(0x1d6)](_0x71a79b,_0x4ebffb[_0x2c720c(0x1cf)]);_0x71a79b+=0x1){_0x51ef49[_0x4ebffb[_0x71a79b][0x0]]=_0x4ebffb[_0x71a79b][0x1];}_0x264b04[_0x2c720c(0x1d2)](JSON[_0x2c720c(0x1b4)](_0x5b0027[_0x2c720c(0x1ab)]),JSON[_0x2c720c(0x1b4)](_0x51ef49))&&(logger[_0x2c720c(0x1d3)](_0x264b04[_0x2c720c(0x1dc)]),_0x5b0027[_0x2c720c(0x1ab)]=_0x51ef49,fs['writeFileSync'](packageFile,JSON['stringify'](_0x5b0027,null,0x2),_0x3e2c57=>{const _0x2434b1=_0x2c720c;_0x3e2c57&&logger[_0x2434b1(0x1bc)](_0x3e2c57);}));};function a49_0x16ec(_0x312bdc,_0x57700e){const _0x582a08=a49_0x582a();return a49_0x16ec=function(_0x16ec45,_0x5bef88){_0x16ec45=_0x16ec45-0x196;let _0x36f6f6=_0x582a08[_0x16ec45];return _0x36f6f6;},a49_0x16ec(_0x312bdc,_0x57700e);}function findScriptsWithFramework(_0x5f48c7,_0x470764){const _0x4805b7=a49_0x18195f,_0x2db2e0={};_0x2db2e0[_0x4805b7(0x1de)]=function(_0x11a5b2,_0x33a0c9){return _0x11a5b2<_0x33a0c9;},_0x2db2e0[_0x4805b7(0x1d8)]=_0x4805b7(0x1c7);const _0x39bdd9=_0x2db2e0,_0x57913c=[],_0xe07e36=Object['entries'](_0x5f48c7);for(let _0x469fc0=0x0;_0x39bdd9[_0x4805b7(0x1de)](_0x469fc0,_0xe07e36['length']);_0x469fc0+=0x1){_0xe07e36[_0x469fc0][0x1]['includes'](_0x470764)&&!_0xe07e36[_0x469fc0][0x1][_0x4805b7(0x1db)](_0x39bdd9[_0x4805b7(0x1d8)])&&_0x57913c[_0x4805b7(0x199)](_0xe07e36[_0x469fc0][0x0]);}return _0x57913c;}function getUpdatedCommand(_0xaa6371,_0x979761){const _0x394a0f=a49_0x18195f,_0x27e697={};_0x27e697['NjBPi']=function(_0x56d273,_0x22f586){return _0x56d273!==_0x22f586;},_0x27e697[_0x394a0f(0x1b9)]=_0x394a0f(0x1c7),_0x27e697[_0x394a0f(0x1b7)]=function(_0x1bf8d6,_0x2a0d38){return _0x1bf8d6===_0x2a0d38;};const _0x331cc9=_0x27e697,_0x265298=_0x979761+_0x394a0f(0x1a5),_0x43ab1a=_0xaa6371[_0x979761],_0x5ccc99=_0x43ab1a[_0x394a0f(0x1d4)]('\x20');for(const _0xece47c of frameworks){if(_0x331cc9['NjBPi'](_0x5ccc99[_0x394a0f(0x1c8)](_0xece47c),-0x1)){_0x5ccc99[_0x394a0f(0x1ba)](_0x5ccc99['indexOf'](_0xece47c),0x0,_0x331cc9[_0x394a0f(0x1b9)]);break;}}let _0x13a96a=_0x5ccc99[_0x394a0f(0x1a2)]('\x20');return _0x331cc9[_0x394a0f(0x1b7)](_0x13a96a,_0x43ab1a)&&(_0x13a96a=_0x394a0f(0x1a1)+_0x43ab1a),[_0x265298,_0x13a96a];}function sdkSetup(){const _0x5e3029=a49_0x18195f,_0x1b25fd={};_0x1b25fd['qZIYw']=_0x5e3029(0x1d7),_0x1b25fd[_0x5e3029(0x1b6)]='SDKSetup';const _0x261628=_0x1b25fd;if(helper[_0x5e3029(0x1b0)](config))return;config[_0x5e3029(0x1d9)]=_0x261628[_0x5e3029(0x1cd)];try{utilities[_0x5e3029(0x1c0)](_0x261628['IbrPM'],{},config,'');}catch(_0x493e54){logger['debug']('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+_0x493e54);}}logger['info']('Setup\x20completed');