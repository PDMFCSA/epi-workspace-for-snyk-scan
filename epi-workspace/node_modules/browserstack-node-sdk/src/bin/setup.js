#!/usr/bin/env node

const a48_0xea9290=a48_0x3189;function a48_0x5aff(){const _0x103f20=['js-yaml','key','qPFGH','mErSJ','wyFeu','779070EmSmon','yargs','debug','utf8','YOUR_USERNAME','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','../helpers/logger','readFileSync','16255SEdwou','node','scripts','replace','LHNNO','Setup\x20completed','stringify','error','SDKSetup','PThvM','549876TiYPyD','cwd','534IclelS','\x20&&\x20npm\x20update\x20browserstack-node-sdk','INmpb','username','jest','TiaZv','writeFileSync','winstonLogger','length','364hkDXiS','ZDUGO','RNPTT','info','izNHN','codeceptjs','cucumber-js','Adding\x20new\x20script(s)\x20in\x20package.json...','lZFzo','indexOf','join','PDfsE','WHlbF','postinstall','18501roVjcl','YOUR_ACCESS_KEY','/package.json','fireFunnelTestEvent','includes','26AsXDBx','TobQG','RrXYh','2yIqFHn','319795NncZvk','argv','../helpers/utilities','LlIpz','2377359WvYvoC','8LluUyU','nightwatch','Creating\x20configuration\x20file...','3420168rxfemi','browserstack-node-sdk\x20','node-setup','npm\x20update\x20browserstack-node-sdk','fysVX','parse','Pkwjv','splice','push','/../../browserstack.pw.yml.sample','/../../browserstack.yml.sample','browserstack-node-sdk','SMhiK','11CedLuh'];a48_0x5aff=function(){return _0x103f20;};return a48_0x5aff();}(function(_0x1b03bf,_0x186907){const _0x564c68=a48_0x3189,_0x280836=_0x1b03bf();while(!![]){try{const _0x3f0579=-parseInt(_0x564c68(0xa7))/0x1+parseInt(_0x564c68(0xa6))/0x2*(parseInt(_0x564c68(0x85))/0x3)+parseInt(_0x564c68(0x90))/0x4*(parseInt(_0x564c68(0xca))/0x5)+parseInt(_0x564c68(0x87))/0x6*(parseInt(_0x564c68(0x9e))/0x7)+parseInt(_0x564c68(0xac))/0x8*(parseInt(_0x564c68(0xab))/0x9)+-parseInt(_0x564c68(0xc2))/0xa*(-parseInt(_0x564c68(0xbc))/0xb)+-parseInt(_0x564c68(0xaf))/0xc*(parseInt(_0x564c68(0xa3))/0xd);if(_0x3f0579===_0x186907)break;else _0x280836['push'](_0x280836['shift']());}catch(_0x13f698){_0x280836['push'](_0x280836['shift']());}}}(a48_0x5aff,0x28ac3));const fs=require('fs'),helper=require('../helpers/helper'),utilities=require(a48_0xea9290(0xa9)),yaml=require(a48_0xea9290(0xbd)),yargs=require(a48_0xea9290(0xc3)),logger=require(a48_0xea9290(0xc8))[a48_0xea9290(0x8e)],configFileTemplate=__dirname+a48_0xea9290(0xb9),configFileTemplatePW=__dirname+a48_0xea9290(0xb8),configFile=process[a48_0xea9290(0x86)]()+'/browserstack.yml',packageFile=process[a48_0xea9290(0x86)]()+a48_0xea9290(0xa0),frameworks=['mocha',a48_0xea9290(0x8b),a48_0xea9290(0x96),a48_0xea9290(0xcb),a48_0xea9290(0xad),a48_0xea9290(0x95),'playwright'];let config;function a48_0x3189(_0x5979b1,_0x51fe35){const _0x5affbc=a48_0x5aff();return a48_0x3189=function(_0x31894b,_0x5817b8){_0x31894b=_0x31894b-0x7f;let _0x4a525d=_0x5affbc[_0x31894b];return _0x4a525d;},a48_0x3189(_0x5979b1,_0x51fe35);}logger[a48_0xea9290(0x93)](a48_0xea9290(0xae)),createConfigurationFile(yargs['argv'][a48_0xea9290(0x8a)],yargs['argv'][a48_0xea9290(0xbe)],yargs[a48_0xea9290(0xa8)]['playwright']);try{sdkSetup();}catch(a48_0x1fc721){logger[a48_0xea9290(0xc4)](a48_0xea9290(0xc7)+a48_0x1fc721);}addScriptInPackageJson();function createConfigurationFile(_0x39394c,_0x10714c,_0x5b6e53=![]){const _0x21817e=a48_0xea9290,_0x44f691={};_0x44f691[_0x21817e(0x92)]=_0x21817e(0xc5),_0x44f691[_0x21817e(0xbf)]=_0x21817e(0xc6),_0x44f691['WHlbF']=_0x21817e(0x9f);const _0x206e47=_0x44f691;try{let _0x5536ac=fs[_0x21817e(0xc9)](_0x5b6e53?configFileTemplatePW:configFileTemplate,_0x206e47[_0x21817e(0x92)]);_0x39394c&&(_0x5536ac=_0x5536ac[_0x21817e(0xcd)](_0x206e47[_0x21817e(0xbf)],_0x39394c)),_0x10714c&&(_0x5536ac=_0x5536ac[_0x21817e(0xcd)](_0x206e47[_0x21817e(0x9c)],_0x10714c)),config=yaml['load'](_0x5536ac),fs[_0x21817e(0x8d)](configFile,_0x5536ac,_0x2cfc90=>{_0x2cfc90&&logger['error'](_0x2cfc90);});}catch(_0xfff6e){logger[_0x21817e(0x82)](_0xfff6e);}}function addPostInstallScript(_0x45a363,_0x168b1b){const _0x1e4fe6=a48_0xea9290,_0x4ecb31={};_0x4ecb31[_0x1e4fe6(0x91)]=_0x1e4fe6(0x9d),_0x4ecb31[_0x1e4fe6(0xa4)]=_0x1e4fe6(0xb2),_0x4ecb31[_0x1e4fe6(0x7f)]=_0x1e4fe6(0x88);const _0x19fd9d=_0x4ecb31;let _0x15fcc0=_0x45a363[_0x19fd9d[_0x1e4fe6(0x91)]];if(_0x15fcc0&&_0x15fcc0[_0x1e4fe6(0xa2)](_0x19fd9d[_0x1e4fe6(0xa4)]))return;!_0x15fcc0?_0x15fcc0=_0x19fd9d[_0x1e4fe6(0xa4)]:_0x15fcc0+=_0x19fd9d[_0x1e4fe6(0x7f)],_0x168b1b[_0x1e4fe6(0xb7)]([_0x19fd9d[_0x1e4fe6(0x91)],_0x15fcc0]);}function addScriptInPackageJson(){const _0x5a2c31=a48_0xea9290,_0x494b8d={'PThvM':_0x5a2c31(0xc5),'Pkwjv':function(_0x58201d,_0x37808c){return _0x58201d<_0x37808c;},'LlIpz':function(_0x21ad98,_0x557b37,_0x265126){return _0x21ad98(_0x557b37,_0x265126);},'izNHN':function(_0x4b05a9,_0x125b9c,_0x5ea988){return _0x4b05a9(_0x125b9c,_0x5ea988);},'YeGpZ':function(_0xa0f422,_0x55f397,_0x53f354){return _0xa0f422(_0x55f397,_0x53f354);},'SMhiK':function(_0x309dff,_0x3be778){return _0x309dff!==_0x3be778;},'TiaZv':_0x5a2c31(0x97)},_0x286b01=JSON[_0x5a2c31(0xb4)](fs[_0x5a2c31(0xc9)](packageFile,_0x494b8d[_0x5a2c31(0x84)])),_0x4f49d1=[];for(let _0x2601b6=0x0;_0x494b8d[_0x5a2c31(0xb5)](_0x2601b6,frameworks['length']);_0x2601b6+=0x1){const _0x59c207=_0x494b8d[_0x5a2c31(0xaa)](findScriptsWithFramework,_0x286b01[_0x5a2c31(0xcc)],frameworks[_0x2601b6]);for(let _0x1834b5=0x0;_0x494b8d[_0x5a2c31(0xb5)](_0x1834b5,_0x59c207[_0x5a2c31(0x8f)]);_0x1834b5+=0x1){_0x4f49d1[_0x5a2c31(0xb7)](_0x494b8d[_0x5a2c31(0x94)](getUpdatedCommand,_0x286b01[_0x5a2c31(0xcc)],_0x59c207[_0x1834b5]));}_0x494b8d['YeGpZ'](addPostInstallScript,_0x286b01[_0x5a2c31(0xcc)],_0x4f49d1);}const _0x5cb161={..._0x286b01[_0x5a2c31(0xcc)]},_0x3f5499=_0x5cb161;for(let _0x32d2a9=0x0;_0x494b8d[_0x5a2c31(0xb5)](_0x32d2a9,_0x4f49d1[_0x5a2c31(0x8f)]);_0x32d2a9+=0x1){_0x3f5499[_0x4f49d1[_0x32d2a9][0x0]]=_0x4f49d1[_0x32d2a9][0x1];}_0x494b8d[_0x5a2c31(0xbb)](JSON[_0x5a2c31(0x81)](_0x286b01[_0x5a2c31(0xcc)]),JSON[_0x5a2c31(0x81)](_0x3f5499))&&(logger[_0x5a2c31(0x93)](_0x494b8d[_0x5a2c31(0x8c)]),_0x286b01[_0x5a2c31(0xcc)]=_0x3f5499,fs[_0x5a2c31(0x8d)](packageFile,JSON[_0x5a2c31(0x81)](_0x286b01,null,0x2),_0x3e6fd6=>{const _0x22d8ae=_0x5a2c31;_0x3e6fd6&&logger[_0x22d8ae(0x82)](_0x3e6fd6);}));};function findScriptsWithFramework(_0x42a417,_0x1c024b){const _0x27f87e=a48_0xea9290,_0x23575b={};_0x23575b[_0x27f87e(0xb3)]=function(_0x24bc62,_0xac6abb){return _0x24bc62<_0xac6abb;},_0x23575b[_0x27f87e(0xc1)]=_0x27f87e(0xba);const _0x257315=_0x23575b,_0x5a383b=[],_0x4d51b5=Object['entries'](_0x42a417);for(let _0x53b36c=0x0;_0x257315[_0x27f87e(0xb3)](_0x53b36c,_0x4d51b5['length']);_0x53b36c+=0x1){_0x4d51b5[_0x53b36c][0x1]['includes'](_0x1c024b)&&!_0x4d51b5[_0x53b36c][0x1]['includes'](_0x257315[_0x27f87e(0xc1)])&&_0x5a383b[_0x27f87e(0xb7)](_0x4d51b5[_0x53b36c][0x0]);}return _0x5a383b;}function getUpdatedCommand(_0x1ae985,_0x2185af){const _0x3f9951=a48_0xea9290,_0x3e90a7={};_0x3e90a7[_0x3f9951(0x98)]=function(_0x389675,_0x18935e){return _0x389675!==_0x18935e;},_0x3e90a7[_0x3f9951(0xc0)]=_0x3f9951(0xba),_0x3e90a7[_0x3f9951(0x9b)]=function(_0x106d6c,_0x24c180){return _0x106d6c===_0x24c180;};const _0x23d200=_0x3e90a7,_0x249994=_0x2185af+'-browserstack',_0xd31f5f=_0x1ae985[_0x2185af],_0x1a846c=_0xd31f5f['split']('\x20');for(const _0x117348 of frameworks){if(_0x23d200[_0x3f9951(0x98)](_0x1a846c[_0x3f9951(0x99)](_0x117348),-0x1)){_0x1a846c[_0x3f9951(0xb6)](_0x1a846c[_0x3f9951(0x99)](_0x117348),0x0,_0x23d200[_0x3f9951(0xc0)]);break;}}let _0xd5c2bf=_0x1a846c[_0x3f9951(0x9a)]('\x20');return _0x23d200[_0x3f9951(0x9b)](_0xd5c2bf,_0xd31f5f)&&(_0xd5c2bf=_0x3f9951(0xb0)+_0xd31f5f),[_0x249994,_0xd5c2bf];}function sdkSetup(){const _0x114eb2=a48_0xea9290,_0x5dc05f={};_0x5dc05f[_0x114eb2(0x89)]=_0x114eb2(0xb1),_0x5dc05f[_0x114eb2(0xa5)]=_0x114eb2(0x83);const _0x5ca8c2=_0x5dc05f;if(helper['isUndefined'](config))return;config['source']=_0x5ca8c2['INmpb'];try{utilities[_0x114eb2(0xa1)](_0x5ca8c2['RrXYh'],{},config,'');}catch(_0x10b85b){logger[_0x114eb2(0xc4)](_0x114eb2(0xc7)+_0x10b85b);}}logger[a48_0xea9290(0x93)](a48_0xea9290(0x80));