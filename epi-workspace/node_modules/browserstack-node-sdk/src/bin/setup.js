#!/usr/bin/env node

const a45_0x144d54=a45_0xe91b;(function(_0x4bf915,_0x112bb2){const _0x451cd6=a45_0xe91b,_0x1cdab6=_0x4bf915();while(!![]){try{const _0x3538da=parseInt(_0x451cd6(0x18d))/0x1+-parseInt(_0x451cd6(0x19a))/0x2*(parseInt(_0x451cd6(0x162))/0x3)+-parseInt(_0x451cd6(0x178))/0x4+-parseInt(_0x451cd6(0x15d))/0x5+parseInt(_0x451cd6(0x199))/0x6*(-parseInt(_0x451cd6(0x18a))/0x7)+-parseInt(_0x451cd6(0x170))/0x8*(-parseInt(_0x451cd6(0x17e))/0x9)+-parseInt(_0x451cd6(0x179))/0xa*(-parseInt(_0x451cd6(0x163))/0xb);if(_0x3538da===_0x112bb2)break;else _0x1cdab6['push'](_0x1cdab6['shift']());}catch(_0x553724){_0x1cdab6['push'](_0x1cdab6['shift']());}}}(a45_0x533b,0xea6d6));const fs=require('fs'),helper=require(a45_0x144d54(0x19e)),utilities=require('../helpers/utilities'),yaml=require(a45_0x144d54(0x18c)),yargs=require('yargs'),logger=require(a45_0x144d54(0x190))['winstonLogger'],configFileTemplate=__dirname+a45_0x144d54(0x198),configFileTemplatePW=__dirname+a45_0x144d54(0x173),configFile=process[a45_0x144d54(0x169)]()+a45_0x144d54(0x184),packageFile=process[a45_0x144d54(0x169)]()+a45_0x144d54(0x192),frameworks=['mocha','jest',a45_0x144d54(0x18b),'node','nightwatch',a45_0x144d54(0x1a1),a45_0x144d54(0x167)];function a45_0x533b(){const _0x337419=['vSBJF','/../../browserstack.yml.sample','6taOKNm','15766ffFThO','npm\x20update\x20browserstack-node-sdk','SWeaZ','join','../helpers/helper','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','lCtJx','codeceptjs','isUndefined','BKpeJ','browserstack-node-sdk','includes','XQZvf','ptQTJ','5039865oIXqhQ','RHYnp','Creating\x20configuration\x20file...','lEnoi','ARbnG','378BAVQLg','9999869ZXrDzb','push','hdSek','Adding\x20new\x20script(s)\x20in\x20package.json...','playwright','scripts','cwd','postinstall','browserstack-node-sdk\x20','WAVMu','readFileSync','-browserstack','info','2104gWptaP','indexOf','vZaJo','/../../browserstack.pw.yml.sample','twEjs','BSpbS','debug','ymevQ','4550860CWrhQi','30SHtOTP','TRhDu','key','load','stringify','59085NHevAi','parse','nNNtB','utf8','fireFunnelTestEvent','ovwDg','/browserstack.yml','replace','node-setup','argv','GnvJP','length','6336134lWOAtK','cucumber-js','js-yaml','550490xaBTmn','entries','\x20&&\x20npm\x20update\x20browserstack-node-sdk','../helpers/logger','MNzMA','/package.json','SDKSetup','writeFileSync','YOUR_USERNAME','YOUR_ACCESS_KEY'];a45_0x533b=function(){return _0x337419;};return a45_0x533b();}let config;logger[a45_0x144d54(0x16f)](a45_0x144d54(0x15f)),createConfigurationFile(yargs[a45_0x144d54(0x187)]['username'],yargs[a45_0x144d54(0x187)][a45_0x144d54(0x17b)],yargs[a45_0x144d54(0x187)][a45_0x144d54(0x167)]);try{sdkSetup();}catch(a45_0xfdffc3){logger[a45_0x144d54(0x176)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+a45_0xfdffc3);}addScriptInPackageJson();function createConfigurationFile(_0x39d03e,_0x5196e7,_0x3802ae=![]){const _0x3eb7b7=a45_0x144d54,_0x3d8b7b={};_0x3d8b7b[_0x3eb7b7(0x15e)]=_0x3eb7b7(0x181),_0x3d8b7b['vZaJo']=_0x3eb7b7(0x195),_0x3d8b7b['ptQTJ']=_0x3eb7b7(0x196);const _0x1a5e50=_0x3d8b7b;try{let _0x12eb8b=fs['readFileSync'](_0x3802ae?configFileTemplatePW:configFileTemplate,_0x1a5e50[_0x3eb7b7(0x15e)]);_0x39d03e&&(_0x12eb8b=_0x12eb8b[_0x3eb7b7(0x185)](_0x1a5e50[_0x3eb7b7(0x172)],_0x39d03e)),_0x5196e7&&(_0x12eb8b=_0x12eb8b[_0x3eb7b7(0x185)](_0x1a5e50[_0x3eb7b7(0x15c)],_0x5196e7)),config=yaml[_0x3eb7b7(0x17c)](_0x12eb8b),fs['writeFileSync'](configFile,_0x12eb8b,_0x2d3af8=>{_0x2d3af8&&logger['error'](_0x2d3af8);});}catch(_0x1680f4){logger['error'](_0x1680f4);}}function addPostInstallScript(_0x4238f1,_0xc9a7c){const _0x5a6a7c=a45_0x144d54,_0x22e095={};_0x22e095[_0x5a6a7c(0x183)]=_0x5a6a7c(0x16a),_0x22e095[_0x5a6a7c(0x15b)]=_0x5a6a7c(0x19b),_0x22e095[_0x5a6a7c(0x165)]=_0x5a6a7c(0x18f);const _0x1d83c0=_0x22e095;let _0x4243ba=_0x4238f1[_0x1d83c0[_0x5a6a7c(0x183)]];if(_0x4243ba&&_0x4243ba[_0x5a6a7c(0x15a)](_0x1d83c0[_0x5a6a7c(0x15b)]))return;!_0x4243ba?_0x4243ba=_0x1d83c0[_0x5a6a7c(0x15b)]:_0x4243ba+=_0x1d83c0[_0x5a6a7c(0x165)],_0xc9a7c[_0x5a6a7c(0x164)]([_0x1d83c0[_0x5a6a7c(0x183)],_0x4243ba]);}function addScriptInPackageJson(){const _0x3cf515=a45_0x144d54,_0x4806f8={'ymevQ':_0x3cf515(0x181),'twEjs':function(_0x28c409,_0x469c4b){return _0x28c409<_0x469c4b;},'vSBJF':function(_0x4eb022,_0x3e0d3d,_0x201595){return _0x4eb022(_0x3e0d3d,_0x201595);},'TRhDu':function(_0x17b694,_0x5a20fc){return _0x17b694<_0x5a20fc;},'GnvJP':function(_0x480545,_0x4ce18a,_0x3b877f){return _0x480545(_0x4ce18a,_0x3b877f);},'WAVMu':function(_0x257095,_0x3bb096,_0x3ce9b2){return _0x257095(_0x3bb096,_0x3ce9b2);},'seAKx':function(_0x4c7114,_0x71c8bd){return _0x4c7114<_0x71c8bd;},'oNQmj':function(_0x1d5128,_0x33856d){return _0x1d5128!==_0x33856d;},'ARbnG':_0x3cf515(0x166)},_0x50b476=JSON[_0x3cf515(0x17f)](fs[_0x3cf515(0x16d)](packageFile,_0x4806f8[_0x3cf515(0x177)])),_0x3f1811=[];for(let _0x278a30=0x0;_0x4806f8[_0x3cf515(0x174)](_0x278a30,frameworks[_0x3cf515(0x189)]);_0x278a30+=0x1){const _0x197665=_0x4806f8[_0x3cf515(0x197)](findScriptsWithFramework,_0x50b476[_0x3cf515(0x168)],frameworks[_0x278a30]);for(let _0x318b51=0x0;_0x4806f8[_0x3cf515(0x17a)](_0x318b51,_0x197665[_0x3cf515(0x189)]);_0x318b51+=0x1){_0x3f1811[_0x3cf515(0x164)](_0x4806f8[_0x3cf515(0x188)](getUpdatedCommand,_0x50b476['scripts'],_0x197665[_0x318b51]));}_0x4806f8[_0x3cf515(0x16c)](addPostInstallScript,_0x50b476[_0x3cf515(0x168)],_0x3f1811);}const _0x13b0ea={..._0x50b476[_0x3cf515(0x168)]},_0x59df07=_0x13b0ea;for(let _0x29e232=0x0;_0x4806f8['seAKx'](_0x29e232,_0x3f1811['length']);_0x29e232+=0x1){_0x59df07[_0x3f1811[_0x29e232][0x0]]=_0x3f1811[_0x29e232][0x1];}_0x4806f8['oNQmj'](JSON['stringify'](_0x50b476[_0x3cf515(0x168)]),JSON[_0x3cf515(0x17d)](_0x59df07))&&(logger[_0x3cf515(0x16f)](_0x4806f8[_0x3cf515(0x161)]),_0x50b476[_0x3cf515(0x168)]=_0x59df07,fs[_0x3cf515(0x194)](packageFile,JSON[_0x3cf515(0x17d)](_0x50b476,null,0x2),_0x664d1c=>{_0x664d1c&&logger['error'](_0x664d1c);}));};function a45_0xe91b(_0x51bed4,_0x385db0){const _0x533b52=a45_0x533b();return a45_0xe91b=function(_0xe91b6b,_0x4e1af8){_0xe91b6b=_0xe91b6b-0x15a;let _0x42d65e=_0x533b52[_0xe91b6b];return _0x42d65e;},a45_0xe91b(_0x51bed4,_0x385db0);}function findScriptsWithFramework(_0x59901d,_0x50220a){const _0x54c90a=a45_0x144d54,_0x5fd737={};_0x5fd737['SWeaZ']=function(_0xa2ddfd,_0x20a98c){return _0xa2ddfd<_0x20a98c;},_0x5fd737['lEnoi']=_0x54c90a(0x1a4);const _0x379f1b=_0x5fd737,_0x1d1218=[],_0x1972b2=Object[_0x54c90a(0x18e)](_0x59901d);for(let _0x3b5e4a=0x0;_0x379f1b[_0x54c90a(0x19c)](_0x3b5e4a,_0x1972b2['length']);_0x3b5e4a+=0x1){_0x1972b2[_0x3b5e4a][0x1][_0x54c90a(0x15a)](_0x50220a)&&!_0x1972b2[_0x3b5e4a][0x1][_0x54c90a(0x15a)](_0x379f1b[_0x54c90a(0x160)])&&_0x1d1218[_0x54c90a(0x164)](_0x1972b2[_0x3b5e4a][0x0]);}return _0x1d1218;}function getUpdatedCommand(_0x461ccd,_0x56a374){const _0x79626f=a45_0x144d54,_0x182fb3={};_0x182fb3[_0x79626f(0x191)]=function(_0x2845de,_0x2fe659){return _0x2845de!==_0x2fe659;},_0x182fb3[_0x79626f(0x1a0)]='browserstack-node-sdk',_0x182fb3['BKpeJ']=function(_0x503765,_0x14d06e){return _0x503765===_0x14d06e;};const _0x5814ae=_0x182fb3,_0x1f8690=_0x56a374+_0x79626f(0x16e),_0x3ae961=_0x461ccd[_0x56a374],_0x2732c0=_0x3ae961['split']('\x20');for(const _0x55ff0f of frameworks){if(_0x5814ae['MNzMA'](_0x2732c0['indexOf'](_0x55ff0f),-0x1)){_0x2732c0['splice'](_0x2732c0[_0x79626f(0x171)](_0x55ff0f),0x0,_0x5814ae[_0x79626f(0x1a0)]);break;}}let _0xad0561=_0x2732c0[_0x79626f(0x19d)]('\x20');return _0x5814ae[_0x79626f(0x1a3)](_0xad0561,_0x3ae961)&&(_0xad0561=_0x79626f(0x16b)+_0x3ae961),[_0x1f8690,_0xad0561];}function sdkSetup(){const _0x310911=a45_0x144d54,_0x47aee2={};_0x47aee2[_0x310911(0x180)]=_0x310911(0x186),_0x47aee2[_0x310911(0x175)]=_0x310911(0x193);const _0x541320=_0x47aee2;if(helper[_0x310911(0x1a2)](config))return;config['source']=_0x541320[_0x310911(0x180)];try{utilities[_0x310911(0x182)](_0x541320[_0x310911(0x175)],{},config,'');}catch(_0x5ac73a){logger[_0x310911(0x176)](_0x310911(0x19f)+_0x5ac73a);}}logger[a45_0x144d54(0x16f)]('Setup\x20completed');