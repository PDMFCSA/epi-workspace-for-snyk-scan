#!/usr/bin/env node

const a49_0x578c74=a49_0x252b;(function(_0x2b8ce9,_0x5a5888){const _0x58c596=a49_0x252b,_0x1cc3f3=_0x2b8ce9();while(!![]){try{const _0x10f368=-parseInt(_0x58c596(0xc9))/0x1*(parseInt(_0x58c596(0xdd))/0x2)+-parseInt(_0x58c596(0x103))/0x3+-parseInt(_0x58c596(0xe8))/0x4+-parseInt(_0x58c596(0xcb))/0x5+-parseInt(_0x58c596(0xfb))/0x6+parseInt(_0x58c596(0xc6))/0x7+parseInt(_0x58c596(0xf1))/0x8;if(_0x10f368===_0x5a5888)break;else _0x1cc3f3['push'](_0x1cc3f3['shift']());}catch(_0x36b29a){_0x1cc3f3['push'](_0x1cc3f3['shift']());}}}(a49_0x1e13,0xda72a));const fs=require('fs'),helper=require(a49_0x578c74(0xf8)),utilities=require(a49_0x578c74(0xd0)),yaml=require(a49_0x578c74(0xd4)),yargs=require(a49_0x578c74(0xd2)),logger=require('../helpers/logger')[a49_0x578c74(0xe1)],configFileTemplate=__dirname+a49_0x578c74(0xfe),configFileTemplatePW=__dirname+a49_0x578c74(0xca),configFile=process[a49_0x578c74(0xee)]()+a49_0x578c74(0xfc),packageFile=process[a49_0x578c74(0xee)]()+'/package.json',frameworks=[a49_0x578c74(0xd6),'jest',a49_0x578c74(0xe9),'node',a49_0x578c74(0xde),a49_0x578c74(0xf7),'playwright'];let config;logger[a49_0x578c74(0xc7)](a49_0x578c74(0x107)),createConfigurationFile(yargs[a49_0x578c74(0x101)][a49_0x578c74(0xdb)],yargs[a49_0x578c74(0x101)][a49_0x578c74(0xff)],yargs[a49_0x578c74(0x101)]['playwright']);try{sdkSetup();}catch(a49_0x533062){logger['debug'](a49_0x578c74(0xc5)+a49_0x533062);}addScriptInPackageJson();function createConfigurationFile(_0x246e1a,_0x406253,_0x5a04ba=![]){const _0x4745bf=a49_0x578c74,_0x310432={};_0x310432['hUkiO']=_0x4745bf(0xf0),_0x310432[_0x4745bf(0xce)]='YOUR_USERNAME',_0x310432[_0x4745bf(0xe6)]=_0x4745bf(0x100);const _0x536f1f=_0x310432;try{let _0x197aea=fs[_0x4745bf(0xd5)](_0x5a04ba?configFileTemplatePW:configFileTemplate,_0x536f1f['hUkiO']);_0x246e1a&&(_0x197aea=_0x197aea[_0x4745bf(0xe0)](_0x536f1f[_0x4745bf(0xce)],_0x246e1a)),_0x406253&&(_0x197aea=_0x197aea[_0x4745bf(0xe0)](_0x536f1f['ACyfm'],_0x406253)),config=yaml[_0x4745bf(0x106)](_0x197aea),fs[_0x4745bf(0xdc)](configFile,_0x197aea,_0x461bb0=>{_0x461bb0&&logger['error'](_0x461bb0);});}catch(_0x355cd2){logger['error'](_0x355cd2);}}function a49_0x1e13(){const _0x499f4c=['writeFileSync','3016842MxSLxk','nightwatch','QWRrP','replace','winstonLogger','entries','GBQgS','splice','includes','ACyfm','yAMMX','5944472BJnpbe','cucumber-js','node-setup','NYeNC','browserstack-node-sdk\x20','lEDsM','cwd','\x20&&\x20npm\x20update\x20browserstack-node-sdk','utf8','52815880Ihfksd','join','BhaCP','ICagc','debug','split','codeceptjs','../helpers/helper','error','knfoF','10251798BoIsfp','/browserstack.yml','scripts','/../../browserstack.yml.sample','key','YOUR_ACCESS_KEY','argv','source','4555095EvSHmX','stringify','fireFunnelTestEvent','load','Creating\x20configuration\x20file...','Wguvf','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','4063486hwyCod','info','npm\x20update\x20browserstack-node-sdk','1GauXei','/../../browserstack.pw.yml.sample','330920jGnTNS','vlAeY','Setup\x20completed','DqrGO','hfOQW','../helpers/utilities','push','yargs','parse','js-yaml','readFileSync','mocha','indexOf','postinstall','length','LIUlx','username'];a49_0x1e13=function(){return _0x499f4c;};return a49_0x1e13();}function a49_0x252b(_0x50e3c2,_0x5e34d0){const _0x1e1334=a49_0x1e13();return a49_0x252b=function(_0x252b58,_0x5bec40){_0x252b58=_0x252b58-0xc5;let _0x54d731=_0x1e1334[_0x252b58];return _0x54d731;},a49_0x252b(_0x50e3c2,_0x5e34d0);}function addPostInstallScript(_0x1b2300,_0x2bdf3a){const _0x34242f=a49_0x578c74,_0x1d409b={};_0x1d409b[_0x34242f(0xcc)]=_0x34242f(0xd8),_0x1d409b[_0x34242f(0xda)]=_0x34242f(0xc8),_0x1d409b[_0x34242f(0xcf)]=_0x34242f(0xef);const _0x231105=_0x1d409b;let _0xbd2f7a=_0x1b2300[_0x231105['vlAeY']];if(_0xbd2f7a&&_0xbd2f7a[_0x34242f(0xe5)](_0x231105[_0x34242f(0xda)]))return;!_0xbd2f7a?_0xbd2f7a=_0x231105['LIUlx']:_0xbd2f7a+=_0x231105[_0x34242f(0xcf)],_0x2bdf3a[_0x34242f(0xd1)]([_0x231105[_0x34242f(0xcc)],_0xbd2f7a]);}function addScriptInPackageJson(){const _0x5702ff=a49_0x578c74,_0x4cf610={'gWpZd':_0x5702ff(0xf0),'BhaCP':function(_0x1fc369,_0x978fe){return _0x1fc369<_0x978fe;},'lEDsM':function(_0x7dcb14,_0x1cc441,_0x5534d7){return _0x7dcb14(_0x1cc441,_0x5534d7);},'GqJSl':function(_0x1135c7,_0x4c5977){return _0x1135c7<_0x4c5977;},'NYeNC':function(_0x38239b,_0x43e307){return _0x38239b<_0x43e307;},'Wguvf':function(_0x4923b8,_0x3144cb){return _0x4923b8!==_0x3144cb;},'maREs':'Adding\x20new\x20script(s)\x20in\x20package.json...'},_0x190f1f=JSON[_0x5702ff(0xd3)](fs['readFileSync'](packageFile,_0x4cf610['gWpZd'])),_0x2b6b94=[];for(let _0x302150=0x0;_0x4cf610[_0x5702ff(0xf3)](_0x302150,frameworks[_0x5702ff(0xd9)]);_0x302150+=0x1){const _0xd22f2e=_0x4cf610['lEDsM'](findScriptsWithFramework,_0x190f1f[_0x5702ff(0xfd)],frameworks[_0x302150]);for(let _0x52fd58=0x0;_0x4cf610['GqJSl'](_0x52fd58,_0xd22f2e[_0x5702ff(0xd9)]);_0x52fd58+=0x1){_0x2b6b94[_0x5702ff(0xd1)](_0x4cf610['lEDsM'](getUpdatedCommand,_0x190f1f[_0x5702ff(0xfd)],_0xd22f2e[_0x52fd58]));}_0x4cf610[_0x5702ff(0xed)](addPostInstallScript,_0x190f1f['scripts'],_0x2b6b94);}const _0x47c891={..._0x190f1f[_0x5702ff(0xfd)]},_0x2cc29e=_0x47c891;for(let _0xcb51af=0x0;_0x4cf610[_0x5702ff(0xeb)](_0xcb51af,_0x2b6b94[_0x5702ff(0xd9)]);_0xcb51af+=0x1){_0x2cc29e[_0x2b6b94[_0xcb51af][0x0]]=_0x2b6b94[_0xcb51af][0x1];}_0x4cf610[_0x5702ff(0x108)](JSON[_0x5702ff(0x104)](_0x190f1f[_0x5702ff(0xfd)]),JSON['stringify'](_0x2cc29e))&&(logger['info'](_0x4cf610['maREs']),_0x190f1f[_0x5702ff(0xfd)]=_0x2cc29e,fs['writeFileSync'](packageFile,JSON[_0x5702ff(0x104)](_0x190f1f,null,0x2),_0x1cb8d5=>{const _0xab4869=_0x5702ff;_0x1cb8d5&&logger[_0xab4869(0xf9)](_0x1cb8d5);}));};function findScriptsWithFramework(_0x3b9b1e,_0x45f8c0){const _0x46fb82=a49_0x578c74,_0x5a15={};_0x5a15['pQKJu']=function(_0x1012f,_0x2144b9){return _0x1012f<_0x2144b9;},_0x5a15[_0x46fb82(0xe7)]='browserstack-node-sdk';const _0x74dae=_0x5a15,_0x422998=[],_0x171ba7=Object[_0x46fb82(0xe2)](_0x3b9b1e);for(let _0x563c27=0x0;_0x74dae['pQKJu'](_0x563c27,_0x171ba7['length']);_0x563c27+=0x1){_0x171ba7[_0x563c27][0x1][_0x46fb82(0xe5)](_0x45f8c0)&&!_0x171ba7[_0x563c27][0x1][_0x46fb82(0xe5)](_0x74dae[_0x46fb82(0xe7)])&&_0x422998['push'](_0x171ba7[_0x563c27][0x0]);}return _0x422998;}function getUpdatedCommand(_0x3b6e92,_0x3c1cc5){const _0x3c61c0=a49_0x578c74,_0x39d53a={};_0x39d53a[_0x3c61c0(0xfa)]=function(_0x2e5a56,_0x1f45ea){return _0x2e5a56!==_0x1f45ea;},_0x39d53a[_0x3c61c0(0xe3)]='browserstack-node-sdk',_0x39d53a[_0x3c61c0(0xf4)]=function(_0x402637,_0x19a9e8){return _0x402637===_0x19a9e8;};const _0x2c41dc=_0x39d53a,_0x357072=_0x3c1cc5+'-browserstack',_0x461e02=_0x3b6e92[_0x3c1cc5],_0x3d0081=_0x461e02[_0x3c61c0(0xf6)]('\x20');for(const _0x2f2089 of frameworks){if(_0x2c41dc[_0x3c61c0(0xfa)](_0x3d0081[_0x3c61c0(0xd7)](_0x2f2089),-0x1)){_0x3d0081[_0x3c61c0(0xe4)](_0x3d0081[_0x3c61c0(0xd7)](_0x2f2089),0x0,_0x2c41dc[_0x3c61c0(0xe3)]);break;}}let _0x2d5acb=_0x3d0081[_0x3c61c0(0xf2)]('\x20');return _0x2c41dc[_0x3c61c0(0xf4)](_0x2d5acb,_0x461e02)&&(_0x2d5acb=_0x3c61c0(0xec)+_0x461e02),[_0x357072,_0x2d5acb];}function sdkSetup(){const _0x5c4be0=a49_0x578c74,_0xbdec8a={};_0xbdec8a['TGlxs']=_0x5c4be0(0xea),_0xbdec8a[_0x5c4be0(0xdf)]='SDKSetup';const _0x19563b=_0xbdec8a;if(helper['isUndefined'](config))return;config[_0x5c4be0(0x102)]=_0x19563b['TGlxs'];try{utilities[_0x5c4be0(0x105)](_0x19563b[_0x5c4be0(0xdf)],{},config,'');}catch(_0x2b846f){logger[_0x5c4be0(0xf5)](_0x5c4be0(0xc5)+_0x2b846f);}}logger[a49_0x578c74(0xc7)](a49_0x578c74(0xcd));