#!/usr/bin/env node

const a48_0x40ca5c=a48_0x5a5b;(function(_0x518ca1,_0x1a65e4){const _0x237710=a48_0x5a5b,_0x4db1f0=_0x518ca1();while(!![]){try{const _0x2858e0=parseInt(_0x237710(0xac))/0x1*(parseInt(_0x237710(0xc6))/0x2)+-parseInt(_0x237710(0xca))/0x3*(-parseInt(_0x237710(0xbf))/0x4)+parseInt(_0x237710(0xa7))/0x5+-parseInt(_0x237710(0x9b))/0x6+parseInt(_0x237710(0xa4))/0x7*(-parseInt(_0x237710(0xd6))/0x8)+-parseInt(_0x237710(0xd5))/0x9+-parseInt(_0x237710(0x9e))/0xa*(parseInt(_0x237710(0xdb))/0xb);if(_0x2858e0===_0x1a65e4)break;else _0x4db1f0['push'](_0x4db1f0['shift']());}catch(_0x343d6c){_0x4db1f0['push'](_0x4db1f0['shift']());}}}(a48_0xc3a9,0x62a60));const fs=require('fs'),helper=require('../helpers/helper'),utilities=require(a48_0x40ca5c(0xdf)),yaml=require(a48_0x40ca5c(0xa5)),yargs=require(a48_0x40ca5c(0xae)),logger=require(a48_0x40ca5c(0x9c))[a48_0x40ca5c(0xd9)],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+a48_0x40ca5c(0xb8),configFile=process['cwd']()+'/browserstack.yml',packageFile=process[a48_0x40ca5c(0xd1)]()+a48_0x40ca5c(0xb2),frameworks=[a48_0x40ca5c(0xa1),a48_0x40ca5c(0xde),'cucumber-js',a48_0x40ca5c(0xd4),'nightwatch',a48_0x40ca5c(0xa6),'playwright'];let config;logger['info'](a48_0x40ca5c(0xb3)),createConfigurationFile(yargs[a48_0x40ca5c(0xcd)]['username'],yargs['argv'][a48_0x40ca5c(0xc5)],yargs[a48_0x40ca5c(0xcd)][a48_0x40ca5c(0xa0)]);try{sdkSetup();}catch(a48_0x34729c){logger[a48_0x40ca5c(0xbe)](a48_0x40ca5c(0xda)+a48_0x34729c);}addScriptInPackageJson();function createConfigurationFile(_0x7242da,_0x470c91,_0x3424d0=![]){const _0x348169=a48_0x40ca5c,_0x2b8cda={};_0x2b8cda[_0x348169(0xa2)]=_0x348169(0xd3),_0x2b8cda['rKzrz']=_0x348169(0xc7),_0x2b8cda[_0x348169(0xb0)]='YOUR_ACCESS_KEY';const _0x1764b2=_0x2b8cda;try{let _0x494a06=fs[_0x348169(0x9a)](_0x3424d0?configFileTemplatePW:configFileTemplate,_0x1764b2['kmWQr']);_0x7242da&&(_0x494a06=_0x494a06[_0x348169(0xd2)](_0x1764b2[_0x348169(0xd7)],_0x7242da)),_0x470c91&&(_0x494a06=_0x494a06['replace'](_0x1764b2['EQpcN'],_0x470c91)),config=yaml['load'](_0x494a06),fs['writeFileSync'](configFile,_0x494a06,_0x3e7c5f=>{const _0x519d8c=_0x348169;_0x3e7c5f&&logger[_0x519d8c(0x97)](_0x3e7c5f);});}catch(_0x254800){logger['error'](_0x254800);}}function addPostInstallScript(_0x30d65c,_0x384db5){const _0x16e93b=a48_0x40ca5c,_0x1a0702={};_0x1a0702['LxxfH']=_0x16e93b(0x95),_0x1a0702['MfoaB']=_0x16e93b(0xc1),_0x1a0702[_0x16e93b(0x94)]=_0x16e93b(0x98);const _0x3e4372=_0x1a0702;let _0x314602=_0x30d65c[_0x3e4372[_0x16e93b(0xb5)]];if(_0x314602&&_0x314602[_0x16e93b(0xc4)](_0x3e4372[_0x16e93b(0xce)]))return;!_0x314602?_0x314602=_0x3e4372[_0x16e93b(0xce)]:_0x314602+=_0x3e4372[_0x16e93b(0x94)],_0x384db5[_0x16e93b(0xd0)]([_0x3e4372[_0x16e93b(0xb5)],_0x314602]);}function addScriptInPackageJson(){const _0x219cc9=a48_0x40ca5c,_0x3c74f6={'fxgNR':_0x219cc9(0xd3),'hRGmP':function(_0x4e873a,_0x5440c2){return _0x4e873a<_0x5440c2;},'OLEIs':function(_0x10e460,_0x461104,_0x404e95){return _0x10e460(_0x461104,_0x404e95);},'NRsQr':function(_0x378c6b,_0x57d2af){return _0x378c6b<_0x57d2af;},'pCylp':function(_0x200b2a,_0x4785df,_0xe56150){return _0x200b2a(_0x4785df,_0xe56150);},'BUPmk':function(_0x44e90b,_0x52772c,_0x1a3115){return _0x44e90b(_0x52772c,_0x1a3115);},'ftPvx':function(_0x303d03,_0x39799d){return _0x303d03<_0x39799d;},'nNpHL':function(_0x2ca98f,_0x5c56c5){return _0x2ca98f!==_0x5c56c5;},'hMZRP':_0x219cc9(0xc3)},_0x166625=JSON['parse'](fs[_0x219cc9(0x9a)](packageFile,_0x3c74f6[_0x219cc9(0xa9)])),_0x53b69d=[];for(let _0x2ee288=0x0;_0x3c74f6['hRGmP'](_0x2ee288,frameworks[_0x219cc9(0xba)]);_0x2ee288+=0x1){const _0x7a7727=_0x3c74f6[_0x219cc9(0xa8)](findScriptsWithFramework,_0x166625[_0x219cc9(0xc2)],frameworks[_0x2ee288]);for(let _0x5048c2=0x0;_0x3c74f6[_0x219cc9(0xc9)](_0x5048c2,_0x7a7727[_0x219cc9(0xba)]);_0x5048c2+=0x1){_0x53b69d[_0x219cc9(0xd0)](_0x3c74f6[_0x219cc9(0xcf)](getUpdatedCommand,_0x166625['scripts'],_0x7a7727[_0x5048c2]));}_0x3c74f6[_0x219cc9(0xab)](addPostInstallScript,_0x166625[_0x219cc9(0xc2)],_0x53b69d);}const _0x32f127={..._0x166625['scripts']},_0x27595e=_0x32f127;for(let _0x145549=0x0;_0x3c74f6[_0x219cc9(0xb9)](_0x145549,_0x53b69d[_0x219cc9(0xba)]);_0x145549+=0x1){_0x27595e[_0x53b69d[_0x145549][0x0]]=_0x53b69d[_0x145549][0x1];}_0x3c74f6[_0x219cc9(0xaa)](JSON[_0x219cc9(0xcc)](_0x166625[_0x219cc9(0xc2)]),JSON[_0x219cc9(0xcc)](_0x27595e))&&(logger['info'](_0x3c74f6['hMZRP']),_0x166625[_0x219cc9(0xc2)]=_0x27595e,fs[_0x219cc9(0x9f)](packageFile,JSON[_0x219cc9(0xcc)](_0x166625,null,0x2),_0x578173=>{const _0x5c20d4=_0x219cc9;_0x578173&&logger[_0x5c20d4(0x97)](_0x578173);}));};function findScriptsWithFramework(_0x2946e3,_0x57b9d6){const _0x2535a1=a48_0x40ca5c,_0x13160b={};_0x13160b[_0x2535a1(0xbc)]=function(_0x2a1006,_0x10a9de){return _0x2a1006<_0x10a9de;},_0x13160b[_0x2535a1(0xc8)]=_0x2535a1(0xbd);const _0x5a6bca=_0x13160b,_0x4d310f=[],_0x1a28ee=Object[_0x2535a1(0xc0)](_0x2946e3);for(let _0x4c622c=0x0;_0x5a6bca[_0x2535a1(0xbc)](_0x4c622c,_0x1a28ee[_0x2535a1(0xba)]);_0x4c622c+=0x1){_0x1a28ee[_0x4c622c][0x1]['includes'](_0x57b9d6)&&!_0x1a28ee[_0x4c622c][0x1][_0x2535a1(0xc4)](_0x5a6bca[_0x2535a1(0xc8)])&&_0x4d310f['push'](_0x1a28ee[_0x4c622c][0x0]);}return _0x4d310f;}function getUpdatedCommand(_0x364af5,_0x1cc380){const _0x5af5fe=a48_0x40ca5c,_0xe64f03={};_0xe64f03[_0x5af5fe(0xb1)]=function(_0x33caf6,_0x14b0e0){return _0x33caf6!==_0x14b0e0;},_0xe64f03[_0x5af5fe(0xad)]='browserstack-node-sdk',_0xe64f03[_0x5af5fe(0xdd)]=function(_0x32dd7b,_0x52533a){return _0x32dd7b===_0x52533a;};const _0x1aa6bd=_0xe64f03,_0x1fdb91=_0x1cc380+'-browserstack',_0x4f0e45=_0x364af5[_0x1cc380],_0x309c6e=_0x4f0e45[_0x5af5fe(0x99)]('\x20');for(const _0x5ecadf of frameworks){if(_0x1aa6bd['UWUfo'](_0x309c6e[_0x5af5fe(0x9d)](_0x5ecadf),-0x1)){_0x309c6e[_0x5af5fe(0x96)](_0x309c6e[_0x5af5fe(0x9d)](_0x5ecadf),0x0,_0x1aa6bd[_0x5af5fe(0xad)]);break;}}let _0x3fbaf6=_0x309c6e['join']('\x20');return _0x1aa6bd[_0x5af5fe(0xdd)](_0x3fbaf6,_0x4f0e45)&&(_0x3fbaf6=_0x5af5fe(0xb7)+_0x4f0e45),[_0x1fdb91,_0x3fbaf6];}function sdkSetup(){const _0x478fde=a48_0x40ca5c,_0x1dbc5f={};_0x1dbc5f[_0x478fde(0xaf)]='node-setup',_0x1dbc5f[_0x478fde(0xd8)]=_0x478fde(0xb6);const _0x4457c3=_0x1dbc5f;if(helper[_0x478fde(0xcb)](config))return;config[_0x478fde(0xdc)]=_0x4457c3[_0x478fde(0xaf)];try{utilities[_0x478fde(0xbb)](_0x4457c3[_0x478fde(0xd8)],{},config,'');}catch(_0x30e74d){logger[_0x478fde(0xbe)](_0x478fde(0xda)+_0x30e74d);}}function a48_0x5a5b(_0x1453ae,_0x2bb0f0){const _0xc3a95=a48_0xc3a9();return a48_0x5a5b=function(_0x5a5b0d,_0xd9ed51){_0x5a5b0d=_0x5a5b0d-0x94;let _0x4e3ebe=_0xc3a95[_0x5a5b0d];return _0x4e3ebe;},a48_0x5a5b(_0x1453ae,_0x2bb0f0);}function a48_0xc3a9(){const _0x344e46=['isUndefined','stringify','argv','MfoaB','pCylp','push','cwd','replace','utf8','node','5982201xCKZUD','1795008OPclCw','rKzrz','sGUSH','winstonLogger','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','176ovZDvm','source','PRqDf','jest','../helpers/utilities','jeQal','postinstall','splice','error','\x20&&\x20npm\x20update\x20browserstack-node-sdk','split','readFileSync','274788SodbqP','../helpers/logger','indexOf','24420GatgaT','writeFileSync','playwright','mocha','kmWQr','Setup\x20completed','7EjhkNX','js-yaml','codeceptjs','2726150vtFMit','OLEIs','fxgNR','nNpHL','BUPmk','2JnCcHQ','rUVcS','yargs','baFMj','EQpcN','UWUfo','/package.json','Creating\x20configuration\x20file...','info','LxxfH','SDKSetup','browserstack-node-sdk\x20','/../../browserstack.pw.yml.sample','ftPvx','length','fireFunnelTestEvent','NgwwQ','browserstack-node-sdk','debug','2224388tcKMkP','entries','npm\x20update\x20browserstack-node-sdk','scripts','Adding\x20new\x20script(s)\x20in\x20package.json...','includes','key','276672Hyfxxq','YOUR_USERNAME','QDYYq','NRsQr','3KIUabQ'];a48_0xc3a9=function(){return _0x344e46;};return a48_0xc3a9();}logger[a48_0x40ca5c(0xb4)](a48_0x40ca5c(0xa3));